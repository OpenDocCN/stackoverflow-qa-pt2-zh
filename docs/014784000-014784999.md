# StackOverflow 问答 14784000-14784999

# php - facebook帖子和页面见解不起作用

> ID：14784009
> 
> 赞同：1
> 
> 时间：2013-02-09T01:34:07.447
> 
> 标签：php, facebook-graph-api, facebook-insights

我正在使用 Graph API 从我的页面获取统计信息，我创建了一个应用程序并获得了我的权限（read_insights、manage_pages ...），但只有一些指标可以正常工作，例如 page_fans_country 和大多数指标（page_fans / post_impressions / page_impressions / page_fans_gender_age ...) 不起作用并返回： [data] => Array () 。我尝试了 3 个不同的页面，第一个有 20.000 个赞，第二个有 3.000 个，第三个有 30 个赞，除了 page_fans_country 之外，我无法从它们那里获得任何信息。但是当我在 Graph Api Explorer 中使用它的令牌尝试之前的查询时，它工作正常，当我使用我的令牌时它不起作用，我确定我有 read_insights 权限

请帮我 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T16:50:12.273

我得到了答案

更改范围参数的顺序：

尝试

```
"email,read_insights,manage_pages" 
```

代替

```
"email,manage_pages,read_insights" 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T08:20:59.647

我有同样的问题。似乎我通过在消息 fb id 前加上页面 id 来获得一些见解，所以我没有点击`https://graph.facebook.com/messageFbId/insights?access_token=...`（官方文档说要这样做），而是从`https://graph.facebook.com/pageId_messageFbId/insights?access_token=....`

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T02:02:40.633

对于大多数页面洞察，您需要一个[页面访问令牌](https://developers.facebook.com/docs/howtos/login/login-as-page/)。

普通用户访问令牌，即使是来自页面管理员的令牌，也不会返回任何数据。

# javascript - 将变量从 app.js 传递到 index.html

> ID：14784018
> 
> 赞同：3
> 
> 时间：2013-02-09T01:35:26.410
> 
> 标签：javascript, angularjs

我可以成功地从 /api/session.json 调用中获取数据并将其记录到我的控制台。

如何将此 api 调用的输出发送到我的 index.html 文件并替换“用户名”？

谢谢！

这是我的 Angular 应用程序的 app.js 文件：

```
'use strict';

var staticApp = angular.module('staticApp', [])
  .config(['$routeProvider', function($routeProvider) {
    $routeProvider
      .when('/', {
        templateUrl: 'views/main.html',
        controller: 'MainCtrl'
      })
      .otherwise({
        redirectTo: '/'
      });
  }])
  .run( function($http) {
    $http.defaults.useXDomain = true;     

    // API CALL
    $http({method: 'GET', url: '/api/session.json'}).
      success(function(data, status, headers, config) {

        // THIS WORKS!!
        // MY CONSOLE SHOWS THIS:
        // Object {user: "devuser"}

        console.log(data); 

      }).
      error(function(data, status, headers, config) {
        console.log(status);
      });
  }); 
```

这是我的 index.html 文件：

```
<!DOCTYPE html>  
  <head>
    <!-- meta and css stuff -->
  </head>
  <body ng-app="staticApp">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" 
                  class="btn btn-navbar" 
                  data-toggle="collapse" data-target=".nav-collapse">
          </button>
          <a class="brand" href="/">MyApp</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">

              <!-- I WANT Username TO BE THE VALUE RETURNED FROM THE API CALL -->

              Logged in as <a href="#" class="navbar-link">Username</a>
            </p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container" ng-view></div>

    <script src="scripts/vendor/angular.js"></script>
    <script src="scripts/app.js"></script>
    <script src="scripts/controllers/main.js"></script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:37:47.950

一般来说，您不会在一个全局中拥有所有这些逻辑。当您考虑在 JS 的这个小部分中所做的事情时，您会：

*   定义一个模块，
*   将 URL 与模板和控制器匹配，
*   发出 GET 请求，
*   （登录用户？），
*   试图在 HTML 中显示用户名

你最好把它分成几块，有特定的目的。

让我们考虑一下您要完成的工作：您希望导航栏了解用户。对我来说，这听起来像是一个使用控制器的机会。

### 索引.html

```
<div class="navbar navbar-inverse navbar-fixed-top" ng-controller="Navbar">
  <div class="navbar-inner">
    <div class="container-fluid">
      <button type="button" 
              class="btn btn-navbar" 
              data-toggle="collapse" data-target=".nav-collapse">
      </button>
      <a class="brand" href="/">MyApp</a>
      <div class="nav-collapse collapse">
        <p class="navbar-text pull-right">
          Logged in as <a href="#" class="navbar-link">{{username}}</a>
        </p>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

### 脚本/控制器/Navbar.js

```
staticApp.controller('Navbar', ['$scope', function ($scope) {
    $scope.username = 'Username!';
}]); 
```

现在，我们可以提供一个用户名来`$scope`匹配`Navbar`模板（`div.navbar`这里）。当然，这并不是那么有用，因为`Username!`可能不是每个人的用户名。

所以，现在我们的问题是：我们可以将处理从服务器登录用户的代码放在哪里？

完美的地方就是服务。

### 脚本/服务/User.js

```
staticApp.factory('User', ['$http', function ($http) {
  var User;

  var setUser = function (user) {
    if (angular.isObject(user))
      User = user;
  };

  var getUser = function () {
    if (angular.isObject(User))
      return User;
  };

  var logIn = function (username, password) {
    // $http call that validates the username and password.
    setUser({ user: username });
  };

  return {
    logIn: logIn,
    getUser: getUser
  };
}]); 
```

可以编辑此控制器中的逻辑以匹配您的流程，但以这种方式保持模块化并不是一个坏主意。公开`logIn`and`getUser`方法应该是您的控制器所需要的。

让我们回到`Navbar`控制器。

### 脚本/控制器/Navbar.js

```
staticApp.controller('Navbar', ['$scope', 'User', function ($scope, User) {
    var user = User.getUser();

    $scope.username = user.username;
}]); 
```

在您将`User`服务配置为与您的应用程序自己的用户处理流程一起使用后，您的应用程序将处于更好的发展位置。您不必搞砸`$rootScope`，您的模板可以绑定到控制器（也许`Navbar`模板需要一些其他功能），最重要的是，您的不同关注点已经分开。

如果您对我上面所做的任何更改有任何疑问，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T01:38:56.357

```
$scope.username = data 
```

在你的 js 文件中。（假设数据是返回的）

并在 html 中做`{{username}}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T02:27:46.320

尝试传入`$rootScope`（因为这是您在技术上所处的位置），然后在`$rootScope`. 像这样：

```
function($http, $rootScope) {
  $rootScope.username = "Foo";
} 
```

# python - python-matplotlib AttributeError Axes3D 对象没有属性 set_zticks

> ID：14784020
> 
> 赞同：4
> 
> 时间：2013-02-09T01:36:27.557
> 
> 标签：python, matplotlib, scikit-learn

我正在尝试复制 scikit-learn [plot_iris_dataset.py](http://scikit-learn.org/stable/auto_examples/datasets/plot_iris_dataset.html)中的一个示例。我相信我拥有最新的 python-matplotlib（截至 2013 年 2 月 8 日），但尝试在 Axes3D 对象中调用 set_zticks(()) 方法时出现错误。我不会复制所有代码，但它是这样的：

```
...
ax = Axes3D(fig, elev=-150, azim=110)
...
ax.set_zticks(() 
```

给出一个错误：

```
AttributeError: 'Axes3D' object has no attribute 'set_zticks' 
```

由于我是 scikit-learn 和 matplotlib 的新手，我不太确定调用应该做什么。如果我将其注释掉，我会得到一个 3-D 图就好了（上面页面上的其余代码都有效）。我尝试了一些谷歌搜索，但还没有找到解决方法，但我得到的提示可能是这种调用已经过时了。我想我会在stackoverflow上发布一个问题，希望有人可以为我或其他人澄清。

编辑：我现在注意到该调用应该删除刻度线。它似乎不适用于任何方向，x、y 或 z，但我只收到 z 方向的错误。这是我的图表的显示方式（由于某种原因，数据点未保存在 PNG 文件中）![我的情节，注意所有维度的刻度线](../Images/ad24964295b5b1bf40aeed344f6fbc9e.png)

其他参考：

*   [其他地方的消息线程](http://comments.gmane.org/gmane.comp.python.matplotlib.general/27686)说此错误可能已在以后的版本中修复。
*   [这个页面得到了谷歌的点击](http://thread.gmane.org/gmane.comp.python.matplotlib.devel/8860/focus=9039)，但我不明白它或看到对 zticks 的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:04:54.617

感谢@tcaswell，我终于解决了这个问题......我没有经验，所以我不太确定，最后，什么有效，但我会尝试解释：

简短回答：更新到最新的 matplotlib（从 1.0.1 到 1.2）似乎是解决方案。

长答案：更新 matplotlib 并不容易！我尝试了很多东西，所以我不确定最终效果如何，但这里有一个大概的大纲：

截至 2013 年 2 月 9 日，apt-get install 仅获得版本 1.0.1。[因此，我按照matplotlib page](http://matplotlib.org/users/installing.html)上的说明从源代码卸载和安装。

当我尝试这个时，编译的代码但我的图形窗口不会出现。这是由于后端问题，没有正确识别 GTK（或类似的东西）。为了解决这个问题，我自定义了 setup.cfg 文件来构建 matplotlib

```
<line 58> gtk = True
<line 57> gtkagg = True
<line 74> backend = GTKAgg 
```

然后我按照上一页所述进行构建和编译。

注意：我做了很多其他事情，所以我不确定以上是否是最小的解决方案。

# sql - SQL：加入计数不起作用

> ID：14784021
> 
> 赞同：2
> 
> 时间：2013-02-09T01:36:28.753
> 
> 标签：sql, join, aggregate-functions

我有一个 SQL 查询，我只需加入两个表。一个表包含评论，另一个是用户表。我加入表格以一种简单的方式获取有关撰写评论（用户名）的用户的用户信息，同时获取评论（评论文本等）。

现在我想计算评论的数量，以便在页面顶部写下正确的评论数量。我通过添加一个 COUNT 和一个别名来保存值来做到这一点。

当我回显 numCount 时，我得到了正确的评论值，但在我的评论循环中没有得到任何评论。一旦我删除计数，我就会再次收到所有评论。我究竟做错了什么？

```
SELECT
ncID, ncText, ncDate,
uID, uName, uImageThumb,
COUNT(a.ncID) AS numComments
FROM tblNewsComments a LEFT JOIN tblUsers b
ON a.ncUserID = b.uID
WHERE  a.ncNewsID = $newID 
ORDER BY ncDate DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T01:39:48.030

我将假设这是 MySQL（或者可能是 SQLite），因为大多数其他 RDBMS 将在此查询上失败。问题是您缺少一个`GROUP BY`子句，这是使用聚合函数时所必需的，`COUNT()`除非它要对整个行集进行操作。MySQL 的异常行为是允许不存在 a `GROUP BY`，或者允许不在 中的列`SELECT`产生`GROUP BY`异常结果。

执行此操作的适当方法是加入返回`COUNT()`per的子查询`ncID`。

```
SELECT
  ncID,
  ncText,
  ncDate,
  uID,
  uName,
  uImageThumb,
  /* The count returned by the subquery */
  ccount.numComments
FROM
  tblNewsComments a
  LEFT JOIN tblUsers b ON a.ncUserID = b.uID
  /* Derived table returns only ncID and count of comments */
  LEFT JOIN (
    SELECT ncID, COUNT(*) AS numComments 
    FROM tblNewsComments 
    GROUP BY ncID
  ) ccount ON a.ncID = ccount.ncID
WHERE a.ncNewsID = $newID
ORDER BY ncDate DESC 
```

**编辑**哎呀 - 看起来你想要 count per `ncID`，而不是`ncUserID`我最初拥有的 count per 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:18:16.023

尝试这个：

```
SELECT  
ncID, ncText, ncDate,  
uID, uName, uImageThumb,  
(SELECT COUNT(ncID)   
FROM   
tblNewsComments a  
INNER JOIN  
tblUsers b  
ON a.ncUserID = b.uID)   
AS numComments  
FROM tblNewsComments a LEFT JOIN tblUsers b  
ON a.ncUserID = b.uID  
WHERE  a.ncNewsID = $newID   
ORDER BY ncDate DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T01:40:56.433

我不知道您使用的是什么 SQL 引擎，但您在这里所拥有的不是有效的 SQL，应该这样标记。

COUNT 是一个聚合函数，您只能将它们应用于组或整个表，因此在您的情况下，您可能会这样做

```
SELECT
ncID, ncText, ncDate,
uID, uName, uImageThumb,
COUNT(a.ncID) AS numComments
FROM tblNewsComments a LEFT JOIN tblUsers b
ON a.ncUserID = b.uID
WHERE  a.ncNewsID = $newID 
GROUP BY ncID, ncText, ncDate,
uID, uName, uImageThumb
ORDER BY ncDate DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T01:41:10.753

您正在使用 AGGREGATE 函数（计数），但您需要一个 GROUP BY 才能从该计数中获得任何意义。

我建议在您的查询中添加“GROUP BY [除 COUNT 之外的所有其他字段名称]”

# php - 替换特殊字符 UTF-8 PHP DOM

> ID：14784033
> 
> 赞同：0
> 
> 时间：2013-02-09T01:37:36.647
> 
> 标签：php, dom, replace

我有这个代码：

```
 $strhtml = file_get_contents('05001400300320100033100.html');
        // create the DOMDocument object, and load HTML from a string
        $dochtml = new DOMDocument();
        $dochtml->loadHTML($strhtml);
        $elm = $dochtml->getElementById('upPanelActuciones');
        $segatiel= $dochtml->saveXml($elm);

        $order   = array("Ã¡","Ã©","Ã­","Ã³","Ãº","Ã±");                      
        $replace = array("&aacute","&eacute","&iacute","&oacute","&uacute","&ntilde");
        $megin = str_replace($order, $replace,$segatiel); 

        echo $megin; 
```

但显然 str_replace 函数不起作用，因为输出保留了稀有字符（如 Ã³）。有没有办法让 str_replace 工作？

在此先感谢您的帮助。

pd：我设置了 html charset Utf-8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:41:18.387

**更新**

试试这个

```
$strhtml = file_get_contents('05001400300320100033100.html');
$dochtml = new DOMDocument();
$dochtml->loadHTML($strhtml);
$elm = $dochtml->getElementById('upPanelActuciones');
$segatiel= $dochtml->saveXml($elm);
$trans = get_html_translation_table(HTML_ENTITIES);
unset($trans["\""], $trans["<"], $trans[">"]);
$megin = strtr($segatiel, $trans);
echo $megin; 
```

* * *

str_replace 不适用于国际字符。

```
<?php
/**
 * Replace all occurrences of the search string with the replacement string.
 *
 * @author Sean Murphy <sean@iamseanmurphy.com>
 * @copyright Copyright 2012 Sean Murphy. All rights reserved.
 * @license http://creativecommons.org/publicdomain/zero/1.0/
 * @link http://php.net/manual/function.str-replace.php
 *
 * @param mixed $search
 * @param mixed $replace
 * @param mixed $subject
 * @param int $count
 * @return mixed
 */
if (!function_exists('mb_str_replace')) {
    function mb_str_replace($search, $replace, $subject, &$count = 0) {
        if (!is_array($subject)) {
            // Normalize $search and $replace so they are both arrays of the same length
            $searches = is_array($search) ? array_values($search) : array($search);
            $replacements = is_array($replace) ? array_values($replace) : array($replace);
            $replacements = array_pad($replacements, count($searches), '');

            foreach ($searches as $key => $search) {
                $parts = mb_split(preg_quote($search), $subject);
                $count += count($parts) - 1;
                $subject = implode($replacements[$key], $parts);
            }
        } else {
            // Call mb_str_replace for each subject in array, recursively
            foreach ($subject as $key => $value) {
                $subject[$key] = mb_str_replace($search, $replace, $value, $count);
            }
        }

        return $subject;
    }
}
?> 
```

但是您正在寻找的不是 htmlentities() 吗？ [http://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

# firefox - imagros 帮助 if 语句

> ID：14784034
> 
> 赞同：1
> 
> 时间：2013-02-09T01:37:39.300
> 
> 标签：firefox, scripting, imacros

在我的 macro1.iim 中，我在 google 中搜索 Iron Maiden。如果在结果中找到某个关键字（例如：单词“eddy”），我想提取单词“eddy”并将其保存到文本文件中。如果找不到该词，我想等待 10 分钟并再次搜索。

思考 eval 还是制作 vbs 脚本？
有人可以告诉我我该怎么做吗？

我试过这个：

```
`VERSION BUILD=7500718 RECORDER=FX
SET !EXTRACT_TEST_POPUP NO
SET !ERRORIGNORE YES
SET !TIMEOUT_PAGE 15
TAB T=1     
TAB CLOSEALLOTHERS
ONDIALOG POS=1 BUTTON=OK CONTENT=
URL GOTO=http://google.com/search=ironmaiden/
TAG POS=1 TYPE=P ATTR=TXT:eddy EXTRACT=TXT
SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\";var txt=/eddy/i;
if (s.match(eddy)) iimPlay(macro2)
else WAIT=10000 seconds {{!LOOP}}")` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:13:41.760

这是使用 iMacros JavaScript 脚本实现的一种方法。

```
//declaring the macro
var macroIronMaiden;

macroIronMaiden ="CODE:";
macroIronMaiden +="VERSION BUILD=7500718 RECORDER=FX"+"\n";
macroIronMaiden +="SET !EXTRACT_TEST_POPUP NO"+"\n";
macroIronMaiden +="SET !ERRORIGNORE YES"+"\n";
macroIronMaiden +="SET !TIMEOUT_PAGE 15"+"\n";
macroIronMaiden +="TAB T=1"+"\n";
macroIronMaiden +="TAB CLOSEALLOTHERS"+"\n";
macroIronMaiden +="ONDIALOG POS=1 BUTTON=OK CONTENT="+"\n";
macroIronMaiden +="URL GOTO=http://google.com/search=ironmaiden/"+"\n";
macroIronMaiden +="TAG POS=1 TYPE=P ATTR=TXT:eddy EXTRACT=TXT"+"\n";

var macroWait;

macroWait ="CODE:";
macroWait +="WAIT SECONDS=600";    
////////Beginning///////

//this loop will search 10 times. Change number 10 for more times

for(var i=0;i<10;i++)
{

iimPlay(macroIronMaiden)

var extract=iimGetLastExtract();

if(extract.toLowerCase()=="eddy")
{

//save it to text file
}
else
{

    iimDisplay("Waiting for 10 minutes")
iimPlay(macroWait)
}

} 
```

您可以使用[此答案](https://stackoverflow.com/questions/14740337/xpcom-writestring-error/14762088#14762088)将数据保存在文本文件中。

# c++ - 移动构造函数，使用 std::move 在两个对象之间移动向量？

> ID：14784041
> 
> 赞同：12
> 
> 时间：2013-02-09T01:38:52.557
> 
> 标签：c++, c++11, move-semantics

我有一个类似以下的对象，我正在尝试实现一个移动构造函数，以便您可以插入`std::vector<Mesh>`.

```
struct Mesh
{    
    std::vector<Vector3> vPoint;
    bool Valid;

    Mesh(Mesh&& other)
    {
        vPoint = std::move(other.vPoint);
        Valid = std::move(other.Valid);
    }
}; 
```

这是正确的方法吗？如果是这样，在 std::move 对其进行操作之后 other.Valid 的值是多少？

编辑：

另外，如果我有这个对象的实例，我是否需要在以下场景中使用 std::move？

```
std::vector<Mesh> DoSomething()
{
    Mesh mesh; //Imagine vPoint is filled here to

    std::vector<Mesh> meshes;
    meshes.push_back(std::move(mesh)); // Here is my question, std::move? or just pass mesh here?

    return meshes;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-09T01:57:49.020

您应该按如下方式编写移动构造函数：

```
Mesh( Mesh&& other )
: vPoint( std::move( other.vPoint ) )
, Valid( std::move( other.Valid ) )
{} 
```

与使用构造函数初始化器列表相比，在构造函数体内赋值的缺点是，在前一种情况下`Mesh`，您要移动到的对象的成员对象是默认构造的，然后在体内赋值。在后一种情况下，它们是直接从`std::move`调用结果构造的。

移动对象后，您不应该读取对象，无论是整数类型还是更复杂的对象。此类对象以未指定的状态存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T01:56:35.973

（部分答案 - 回答关于`move`ing的问题`bool`）

[cppreference.com](http://en.cppreference.com/w/cpp/utility/move)有以下要说的`std::move`：

> 库代码需要在参数中保留有效值，但除非类型或函数另有说明，否则对结果参数值没有其他约束。这意味着通常最明智的做法是避免再次使用 move from 参数。

因此，您不能依赖 a`bool`成为`true`或`false`在`move`ing 之后。

# r - 在 R 中的 data.table 环境中创建公式

> ID：14784048
> 
> 赞同：20
> 
> 时间：2013-02-09T01:39:49.170
> 
> 标签：r, environment, data.table

我想在`data.table`. `formula`需要动态构建。我尝试了以下方法：

```
x = data.table(a=1:20, b=20:1, id=1:5)
> x[,as.list(coef(lm(as.formula("a ~ b")))),by=id]
  Error in eval(expr, envir, enclos) : object 'a' not found 
```

如何将环境指定为进行评估的实际 data.table 的环境？

编辑：我意识到我可以做 lm(a ~ b)。我需要公式是动态的，因此它被构建为字符串。通过动态我的意思是公式可以在`paste0(var_1, "~", var_2)`哪里`var_1 = a`和`var_2 = b`

这是我认为我们可以做得更好的一种解决方案：

```
txt = parse(text="as.list(coef(lm(a ~ b)))")
> x[,eval(txt),by=id]
  id (Intercept)  b
  1:  1          21 -1
  2:  2          21 -1
  3:  3          21 -1
  4:  4          21 -1
  5:  5          21 -1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T03:19:01.090

`lm`可以接受字符串作为公式，因此将其与`.SD`如下组合：

```
> x[, as.list(coef(lm("a ~ b", .SD))), by = id]
   id (Intercept)  b
1:  1          21 -1
2:  2          21 -1
3:  3          21 -1
4:  4          21 -1
5:  5          21 -1 
```

# java - 识别游戏中的线程（也与 TCP 相关）

> ID：14784049
> 
> 赞同：2
> 
> 时间：2013-02-09T01:39:57.640
> 
> 标签：java, multithreading, tcp, game-development

这是一个学校项目，请不要提供任何代码，我只是在寻找指导我正确方向的提示。

编写并测试客户端订阅的游戏服务器。订阅后，客户端会收到当前正在玩的游戏列表（相同的游戏，只是它的不同“实例”）。客户然后可以选择加入游戏或开始新游戏。一场比赛在实际开始之前必须至少有两名玩家。系统必须支持多个客户端都玩一个游戏，或者多个客户端玩多个游戏。

该项目的目标是获得 Java、TCP 和线程方面的经验。

我当前的设计和实现有 2 个文件：server.java 和 client.java

1.  服务器文件有 3 个类：Server、Lobby 和 Game
2.  客户端文件有 1 个类：Client。

“游戏”的实现是微不足道的，我对此很好。

目前，服务器类与客户端类建立 TCP 连接。每次实例化客户端时，服务器类都会接受套接字，然后程序继续运行。

继续，服务器类创建大厅类。

大厅课是我遇到**麻烦**的地方。默认情况下，我正在创建 1 个“游戏”对象，并传入 clientSocket：

```
game g = new game(clientSocket, playerID);                 
g.start(); 
```

游戏类扩展了线程，我认为这是正确的做法。每个“游戏”都会是一个单独的线程，可以这么说，所以玩家 A 和 B 可以共享一个线程，玩家 C 和 D 可以使用另一个线程开始新游戏。

我是线程新手，但这是我能想到的最好的实现。我排除了大厅的多个线程，因为这没有任何意义，而且客户端的多个线程也毫无意义，所以我认为多线程游戏类是理想的。

现在，当我创建 2 个客户端实例时，它们都加入了同一个“线程”（它们都在同一个游戏中并且可以相互交谈）。

我应该怎么做，一个新玩家可以在大厅里输入“new”或其他任何东西，然后创建一个新的“游戏”，它是一个新线程。

我确定我误解了有关线程或诸如此类的某些部分，但我感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:53:13.547

我不会将游戏映射到线程。相反，将客户端映射到线程。每个客户端都有自己的线程，该线程通过接收来自该客户端的命令启动工作。当您需要创建新游戏时，只需在共享的游戏集合中创建一个新对象即可。在客户端实例中跟踪与哪个游戏（如果有）相关联。

如果你发现你确实需要一个线程来管理游戏，那么你可以创建一个。当客户端向特定游戏发送命令时，只需将该命令放在由管理该游戏的线程读取的命令队列中。游戏线程只需要知道它正在管理哪个游戏。当游戏结束时，它可以自行终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:24:05.850

首先，我建议您阅读 Java 中的多人游戏开发和网络（UDP/TCP）。我不是游戏开发者，只是碰巧在大学学习了 Java 网络课程，并且有一个类似的项目（网络游戏）。

其次，处理多线程与复杂度成正比。您希望最小化复杂性。我建议放弃“*我必须找到使用线程的地方*”的心态。（不要在圆孔中强行使用方钉；））

继续，按照要求：

**编写并测试客户端订阅的游戏服务器。**

> IIRC，这相当简单（你可能已经过了这部分）。

**订阅后，客户端会收到当前正在玩的游戏列表（相同的游戏，只是它的不同“实例”）**

> 这也应该相当简单，因为服务器和客户端之间的 TCP 连接已经建立。
> 
> 但是，此时有几件事需要理解。也许最重要的是，将有一个中央服务器来保存所有连接的客户端和现有游戏的信息。因此，这意味着它必须是处理系统状态（例如跟踪当前存在的游戏室）、客户端请求（创建/加入游戏室）以及使用系统状态的相关信息更新客户端（例如创建/关闭游戏室）。
> 
> 此时的另一个考虑因素是系统中客户端功能的范围。典型的实现可能是*胖服务器、瘦客户端*架构。基本上，这意味着客户端不会真正处理数据（来自用户输入），而是依赖于服务器。大多数时候，客户端只等待用户的输入或服务器的响应。另一方面，服务器处理来自客户端的数据，更新系统状态（包括单个游戏状态），并通知相关客户端系统/游戏状态的相关变化。

**然后，客户可以选择加入游戏或开始新游戏**

> 这里实际发生的是客户端向服务器发送数据“我选择加入游戏”或“我选择创建游戏”。服务器对此采取行动并通知相关客户端（我说的是*关注*而不是*全部*，因为某些客户端可能正在玩并且不需要知道是否已经产生了新游戏）。

**一场比赛在实际开始之前必须至少有两名玩家。**

> -

**系统必须支持多个客户端都玩一个游戏，或者多个客户端玩多个游戏。**

> 再次取决于客户端-服务器架构，服务器将执行所有处理（*fat-server、thin-client*）或客户端（*thin-server、fat-client*）执行处理，而服务器主要用作中继指向其他客户。然而，我对此没有明确的（甚至是自信的）建议，因为我只是对可能的实现数量及其后果感到不知所措。因此，我真的不能鼓励阅读更多关于网络和游戏开发的内容。单独来看，这两个主题非常庞大，结合起来会更多。

最后，关于线程的使用。IIRC，为打开的套接字分派单独的线程对于防止应用程序被阻塞等待输入很有用。我不太同意您在线程中“主持”游戏的想法，但由于您在学校，我只能欣赏您的尝试。

这可能会进一步帮助您：[课程：所有关于套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。您可能还对[UDP](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/MulticastSocket.html)感兴趣。

# javascript - TypeError: this.parts[1].reviewMoment 不是函数

> ID：14784050
> 
> 赞同：0
> 
> 时间：2013-02-09T01:40:10.090
> 
> 标签：javascript, jquery, backbone.js

我正在处理这个错误，但我不断收到以下错误 -

```
TypeError: this.parts[1].reviewMoment is not a function 
```

我正在使用 jQuery 和骨干网。不幸的是，我对 JS 不是很熟悉，也不知道为什么这条线断了。

```
define([
    "jquery",
    "underscore",
], function($, _) {

    reviewMoment: function(place) {
         this.collection.bind("add", _.once(_.bind(this.triggerReview, this)));
         this.collection.addMomentByPlace(place);
     },
     triggerReview: function() {
         this.parts[(this.matchView ? 2 : 1)].reviewMoment();
         if(this.matchView) {
             this.matchView.search.close();
         }
     }
  });
}); 
```

为什么`reviewMoment`不考虑函数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:26:05.537

它不是一个函数，因为您实际上并没有创建一个`{}`可以使用该`identifier:property`符号的对象文字。要创建有效的函数定义，请在函数周围放置一个带有对象字面量的 return 语句：

```
define([
    "jquery",
    "underscore",
], function($, _) {
    return {
        reviewMoment: function(place) {
            this.collection.bind("add", _.once(_.bind(this.triggerReview, this)));
            this.collection.addMomentByPlace(place);
        },
        triggerReview: function() {
            this.parts[(this.matchView ? 2 : 1)].reviewMoment();
            if(this.matchView) {
                this.matchView.search.close();
            }
        }
    }
  });
}); 
```

# javascript - 使用 jQuery 访问关联数组

> ID：14784051
> 
> 赞同：1
> 
> 时间：2013-02-09T01:40:17.687
> 
> 标签：javascript, jquery, arrays, associative-array

我在这里有一个关联数组 -

```
var dataset = {
    "person" : [    
        {"userLabels": ["Name","Role"]},
        {"tagNames": ["lName","role"]},
        {"tableClass": "width530"},
        {"colWidths": ["50%","50%"]}
    ]
} 
```

我尝试使用各种方法使用 jQuery 访问“userLabels”对象，但失败了。我认为我在基础方面做错了什么。我希望使用 jQuery 访问 userLabels 对象，结果应该是一个数组，所以我可以执行 jQuery.inArray() 操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T02:18:46.693

首先，这是使用现有方法访问数据集的方法。

```
var dataset = 
{
  "person" : [  
          {"userLabels": ["Name","Role"]},
          {"tagNames": ["lName","role"]},
          {"tableClass": "width530"},
          {"colWidths": ["50%","50%"]}
         ]
};

 alert(dataset['person'][0]['userLabels']);    //style 1

 alert(dataset.person[0]['userLabels']);    //style 2

 alert(dataset.person[0].userLabels);    //style 3

 //Also you can use variables in place of specifying the names as well i.e.

 var propName ='userLabels';
 alert(dataset.person[0][propName]);

 //What follows is how to search if a value is in the array 'userLabels'
 $.inArray('Name', dataset.person[0].userLabels); 
```

我想问一下你为什么以这种“有趣的方式”来做这件事。你为什么不把它们都变成对象呢？

如果我是你，我会这样做，因为如果你考虑一下，人就是一个对象，应该注意**数组基本上**是 Javascript 中具有“长度”属性的对象，尽管我不会在这里详细说明（随意做一些研究）。我猜这是因为您不知道如何迭代对象属性。当然，如果它对你更有意义，那就去吧。

请注意，数组和对象之间的区别之一是需要定义对象属性；你会注意到我在下面给出了 'undefined' 的 'Name' 和 'Role' 值。

无论如何，这就是我要做的：

```
var dataset = 
{
  "person" : {
          "userLabels": {"Name" : undefined,"Role": undefined},
          "tagNames": {"lName" : undefined,"role" : undefined},
          "tableClass": "width530",
          "colWidths": ["50%","50%"]
        }
};

for (var i in dataset) { //iterate over all the objects in dataset
   console.log(dataset[i]);   //I prefer to use console.log() to write but it's only in firefox
   alert(dataset[i]);    // works in IE.
}

 //By using an object all you need to do is:

 dataset.person.userLabels.hasOwnProperty('Role'); //returns true or false 
```

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T01:42:40.550

```
var basic = dataset.person[0].userLabels;
//          |        |     |
//          |        |     --- first element = target object
//          |        --- person property
//           ---- main-object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T01:42:40.490

```
var userLabels = dataset.person[0].userLabels;
if ($.inArray(yourVal, userLabels) !== -1) {
    doStuff();
} 
```

# ajax - 为什么 jquery 两次提交我的 ajax 表单？

> ID：14784053
> 
> 赞同：1
> 
> 时间：2013-02-09T01:40:26.840
> 
> 标签：ajax, jquery

当我的表单提交时`false`，如果它不喜欢包含在`field1`and中的值，php 将返回`field2`。如果它确实喜欢这些字段，那么它将返回`true`. 如果用户提交表单并且 php 返回`false`，则会出现警报。关闭警报窗口后，如果用户立即在这些字段中输入新的（好的）数据并再次提交表单，那么表单会以某种方式提交两次。为什么？我怎样才能解决这个问题？

```
$("form#myForm").on('submit',function() 
{
    $.ajax(
    {
        type: "POST",
        url: 'myfile.php',
        dataType: 'html',
        data: 
        {
            field1:$("input[name=field1]").val(),
            field2:$("input[name=field2]").val()
        },
        success: function(data)
        {
            if(data == false) 
            {
                alert('hello world');
            } 
            else 
            {
                // stuff
            }
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-01T17:52:22.283

2014 年提出了同样的问题（[jquery ajax 表单提交两次](https://stackoverflow.com/questions/20195483/jquery-ajax-form-submits-twice)）。

`e.preventDefault()`它自己的按钮和锚链接工作，但在提交表单时对我不起作用（与上面 Nancy 的代码相同）。

我必须`e.stopImmediatePropagation();`在我的 ajax 帖子之前添加。这阻止了 ajax 调用被提交两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T13:24:36.353

在下面，之前添加此代码`return false`

```
$('#myForm').unbind('submit');
 return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T02:24:40.327

因为您正在执行 ajax 发布，所以您需要禁用默认提交按钮行为。请参阅[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# python - 如果没有价值，什么也不做

> ID：14784057
> 
> 赞同：0
> 
> 时间：2013-02-09T01:41:01.217
> 
> 标签：python, xbmc

这里的代码

```
import subprocess,os
import xbmcgui
import xbmc
import xbmcaddon
import urllib2
import re
import string

#Initialize value for ref.
menu          = 0
video         = 0
audio         = 0
music_title   = 0
music_title1  = 1

#Initialize ADDON
settings = xbmcaddon.Addon(id='micasaverde.addon')

#Initialize ADDON INFORMATION
ip  =  settings.getSetting( "vera_ip" )
dev  =  settings.getSetting( "vera_dev" )

while (not xbmc.abortRequested):
    win   = (xbmcgui.getCurrentWindowId())

    if xbmc.Player().isPlayingAudio():
        tag = xbmc.Player().getMusicInfoTag()
        music_title = tag.getTitle()
        music_title = music_title.replace(' ', '_')
        if music_title != music_title1:
            urllib2('http://%s:3480/data_request?id=variableset&DeviceNum=%s&serviceId=urn:upnp-org:serviceId:XBMCState1&Variable=IdleTime&Value=%s' % (ip, dev, music_title))
        music_title1 = music_title 
```

问题是它有时会发送命令，但在 url 的末尾没有值（music_title），它会使代码崩溃。只有在里面有东西的情况下，我怎么能发送 url。我尝试在网上搜索但没有任何成功谢谢 Mike

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:01:55.197

改变：

```
if music_title != music_title1: 
```

至：

```
if music_title.strip() and music_title != music_title1: 
```

# javascript - 用户滚动时在地图上绘制圆圈

> ID：14784060
> 
> 赞同：2
> 
> 时间：2013-02-09T01:41:13.643
> 
> 标签：javascript, jquery, canvas, scroll

我想建立一个与这个非常相似（重复）的。只是圆圈出现在地图上的第一部分。我可以从哪里开始有什么想法吗？任何执行此操作的 jquery 插件？

[https://www.airbnb.com/annual](https://www.airbnb.com/annual)

如果没有任何插件，您可以指导我应该从哪里开始吗？任何例子都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:04:02.520

只需将事件处理程序绑定到`scroll`事件。从 获取您的位置`$(window).scrollTop()`，并根据需要使用此信息绘制和/或调整您的圆圈数组。

有一些方法可以在没有 Canvas 的情况下在网站上获得效果。您可以使用`position:fixed`高的 div`border-radius`来创建圆圈，并且可以调整它们的大小并使用 JQuery 重新定位它们。您还可以使用 SVG，您可以使用它在最初的半径 0 处创建一个包含所有圆形对象的数组，并通过滚动效果（或您的数据集）增加或减少半径。如果您确实使用画布，则可能需要准备在每个滚动刻度上重新渲染整个画布，因为否则很难让圆圈“缩小”。这可能会使您的滚动不连贯，就像我在网站上一样。

# ruby-on-rails - 如何让我的 Rails 控制器保持干燥并使用我自己的 API？

> ID：14784068
> 
> 赞同：1
> 
> 时间：2013-02-09T01:42:37.897
> 
> 标签：ruby-on-rails, model-view-controller, dry, rails-activerecord

假设我有一个名为 Books 的控制器（以及相应的 Book 模型）和一个名为 Users 的控制器（以及相应的 User 模型）。这些控制器中的每一个都具有标准的 CRUD 操作，它们也充当我网站 API 的工具。

我网站上的大多数页面都很容易适应这个框架。例如，看一本书。或查看您的用户帐户。或编辑您的用户帐户。等等。

但是假设我有一个有点独特的索引：我想显示一个用户列表和一个书籍列表。这提出了几个问题：

*   这应该放在哪个控制器下：UsersController、BooksController 或新控制器？
*   如果我创建一个新控制器，是否会被视为违反任何 MVC 原则，因为它不会特别绑定到任何特定模型？
*   这个新的控制器操作将如何检索数据？如果我在其中编写新的 ActiveRecord 查询，我会重复自己，因为我的其他控制器中已经有这样的代码。如果可能的话，我也更喜欢使用我自己的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:21:08.547

您可以在模型中使用范围（谷歌搜索）来保持控制器的精简。根据您要展示的内容，您可以创建新的方法和视图。假设您有一个用户仪表板，其中列出了您的书籍和不同模型中的作者。

您可以在用户控制器中创建一个名为 def dashboard 的新方法，因为它与您的用户相关。

```
def dashboard

end 
```

您将在模型中创建一个辅助方法来确定特定查询的范围。请记住还要将正确的路线添加到您的路线文件中。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:29:08.793

随便你。

1）我可能会编写另一个控制器，尽管它最终可能是一个品味问题，并且它可能会随着应用程序的上下文而改变。

2）我会从两个模型中获取数据。没有一对一的 MVC 规则映射控制器和模型。

我不太清楚您所说的“查询”是什么意思，但您可以将它们放在模型方法（或范围）中以避免 DRY。当然，人们很想在控制器中进行简单的查询，因为 ActiveRecord 将它们封装为方法（例如 User.find(n) ）

# ios - 以与预览层匹配的大小导出 AVCaptureSession 视频

> ID：14784074
> 
> 赞同：8
> 
> 时间：2013-02-09T01:42:50.947
> 
> 标签：ios, avfoundation, avcapturesession, avcapture, avvideocomposition

我正在使用`AVCaptureSession`会话预设录制视频`AVCaptureSessionPreset640x480`。我`AVCaptureVideoPreviewLayer`在录制时使用非标准尺寸（300 x 300）的重力设置为纵横比填充。它的设置是这样的：

```
self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:_captureSession];
_previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
_previewLayer.frame = _previewView.bounds; // 300 x 300
[_previewView.layer addSublayer:_previewLayer]; 
```

录制视频后，我想将其写入 quicktime 格式的文件。在播放过程中，我再次以 300 x 300 非标准大小的图层播放视频。因为这些视频最终将通过网络连接传输，所以保留完整的 640x480 视频似乎很浪费。

导出视频以匹配我的 300 x 300 预览层的最佳方式是什么？我是一个 AVFoundation 菜鸟，所以如果我以错误的方式处理这个问题，请告诉我。我只希望录制期间在预览层中显示的录制视频与磁盘上导出的视频相匹配。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T08:42:09.337

视频分辨率和视频大小是两个不同的东西。分辨率代表清晰度，更高的分辨率意味着更高的清晰度。而视频大小是显示视频的范围。根据视频的分辨率和视频的纵横比，在查看器中观看时，视频会拉伸或缩小。

现在已经解释了事实，您可以在这里找到答案：

[如何使用 AVFoundation 裁剪视频](https://stackoverflow.com/questions/5198245/how-do-i-use-avfoundation-to-crop-a-video/5231713#5231713)

按此顺序执行步骤：

> 1.  将视频录制到磁盘。
> 2.  从磁盘保存到资产库。
> 3.  从磁盘中删除。
> 4.  执行上述链接中提到的步骤。

**注意：**在录制视频并将其写入资产库（`saveComposition`已保存的资产）后执行这些步骤。

并在此步骤中提供您的尺寸：`videoComposition.renderSize = CGSizeMake(320, 240);`as`videoComposition.renderSize = CGSizeMake(300, 300);`

和一个建议。由于将文件写入磁盘，然后写入库，然后再写入磁盘，这是一个漫长的操作。尝试使用`dispatch_queue`or异步执行所有操作`operationBlock`

干杯，玩得开心。

# .net - 实体框架 5 不添加外键

> ID：14784075
> 
> 赞同：0
> 
> 时间：2013-02-09T01:42:53.093
> 
> 标签：.net, sql-server, entity-framework

我在 SQL Server 2012 Express 数据库中有两个表，它们是这样定义的。

SampleTableOne ColumnName nvarchar(50) 主键 ID int

SampleTableTwo Id int 主键 ColumnName nvarchar(50)

当我使用以下命令添加外键时

```
ALTER TABLE SampleTableOne
ADD FOREIGN KEY(Id) REFERENCES SampleTableTwo(Id)
ON DELETE CASCADE
ON UPDATE CASCADE
GO 
```

但是，当我将模型添加到实体框架中时，它不会添加外键。我选择了“在模型中包含外键列”。我缺少一个步骤吗？

编辑：

我的目标是建立一对一的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:30:33.707

[在EF Code](http://weblogs.asp.net/manavi/archive/2011/05/17/associations-in-ef-4-1-code-first-part-6-many-valued-associations.aspx)中的关联的第三[部分](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)和 [第六部分](http://weblogs.asp.net/manavi/archive/2011/05/17/associations-in-ef-4-1-code-first-part-6-many-valued-associations.aspx)中，首先看到了共享主键关联的局限性，并认为这种类型的关联相对较少，并且在许多模式中，表示的是一对一和多值关联具有外键字段和唯一约束。

# c++ - 程序触发断点；不运行

> ID：14784080
> 
> 赞同：0
> 
> 时间：2013-02-09T01:44:21.363
> 
> 标签：c++, visual-c++

嗨，我是一名初级程序员，我一直在研究的程序有问题。重点是创建一个单独的类，该类具有一个由随机生成的数字组成的数组，作为一个私有变量，数组的大小，以及通过使用数组表示个体适应度的数字。

它利用头文件、头文件的源文件和测试头文件的源文件。出于某种原因，每当我尝试编译时，都会遇到断点，而 Visual Studio 不会告诉我错误是什么。我怀疑它与我班级中的私有指针有关，但我不知道为什么或如何修复错误。

标题

```
#ifndef INDIVIDUAL_H
#define INDIVIDUAL_H

class individual
{   
    int size;
    double fitness;
    double* genotype;
public:
    individual(int pSize = 10);
    individual(const individual& copy);
    ~individual();
    double* getGenotype();
    double getFitness();
    int getSize();
    void mutation();
    void crossover(individual a);
};

#endif 
```

标头来源

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <time.h>
#define M_PI 3.14159265358979323846
#define M_E 2.71828182845904523536
#include <cmath>
#include "individual.h"

using namespace std;

double RandomFloat(double min = -32.768, double max = 32.768)
{
    min = min;
    max = max;
    unsigned int seed;
    seed = (unsigned int) time(0) + rand();
    srand(seed);
    double r = (double)rand() / (double)RAND_MAX;
    return min + r * (max - min);
}

double Fitness(double a[], int size)
{
    double fitness;
    double firstSum, secondSum;

    firstSum = 0;
    for(int i = 0; i<size; i++)
    {
        firstSum += a[i]*a[i];
    }
    firstSum /= size;

    secondSum = 0;
    for(int i = 0; i<size; i++)
    {
        secondSum += cos(2*M_PI*a[i]);
    }
    secondSum /= size;

    fitness = -20*exp(-0.2*sqrt(firstSum) - exp(secondSum) + 20 + M_E);

    return fitness;
}

individual::individual(int pSize)
{
    size = pSize;
    genotype = nullptr;
    genotype = new double(size);
    for(int i = 0; i<size; i++)
    {
        genotype[i] = RandomFloat();
    }

    fitness = Fitness(genotype,size);
}    

individual::individual(const individual& copy)
    :size(copy.size),genotype(new double[copy.size])
{    
    std::copy(copy.genotype, copy.genotype + copy.size, genotype);
}

individual::~individual()
{
    delete[] genotype;
}

double* individual::getGenotype()//returns a pointer
{
    return genotype;
}

double individual::getFitness()
{
    return fitness;
}

int individual::getSize()
{
    return size;
}

void individual::mutation()
{
    int first, second;
    double temp;
    first = (int)RandomFloat();
    second = (int)RandomFloat();

    temp = genotype[first];
    genotype[first] = genotype[second];
    genotype[second] = temp;
}

void individual::crossover(individual a)
{
    int crossPoint = size/3 - 1;

    for(int i = crossPoint; i<size; i++)
    {
        double temp1;

        temp1 = 0;
        temp1 = genotype[i];
        genotype[i] = a.genotype[i];
        a.genotype[i] = temp1;
    }

} 
```

驱动源

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <cmath>
#include <vector>
#include "individual.h"
#define M_PI 3.14159265358979323846
#define M_E 2.71828182845904523536

using namespace std;

int main()
{
    individual test;
    int size = test.getSize();
    cout << size << endl;

    for(int i = 0; i<size; i++)
    {
        cout << test.getGenotype()[i] << endl;
    }
    return 0;
} 
```

我已经尝试寻找可能的解决方案（添加了复制构造函数和析构函数），但似乎没有任何解决问题的方法。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:54:57.457

分配一个双精度数组

改变：

```
genotype = new double(size);  // this initialize one double and initialize value to size 
```

至

```
genotype = new double[size];  // this creates an array which size is 'size' 
```

当您只分配一个 double 并将数据写入内存时，您的代码会超出内存

```
for(int i = 0; i<size; i++)
{
    genotype[i] = RandomFloat();
} 
```

# css - 无法返回站点 IE8

> ID：14784083
> 
> 赞同：0
> 
> 时间：2013-02-09T01:44:36.780
> 
> 标签：css, internet-explorer-8

我在[http://arcrealtyco.com](http://arcrealtyco.com)的网站无法在 IE8 中加载。我已经更新了 jQuery (1.9.1) 并更新了网站上运行的 Modernizr (2.5.2)。使用 ie8 模式时，它在 ie9 中运行良好，但在 ie8 上它不会加载。看来问题出在我们的 CSS 文件上。

现在它是一个 301k 大小的文件，由 SCSS 连接而成。我什至测试了一个 131k 的缩小版本。没有什么。

这里有什么想法吗？

在 css 文件中，我们有 Bootstrap、Symbolset、我们的全局 CSS 和其他一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:37:03.010

在你的`<footer>`，你有一个`<br>`里面的一个`<strong>`。试着把它`<strong>`拿走，这样它就成了一个`<br>`。这让我的崩溃消失了。我使用了 Windows 7 和真正的 Internet Explorer 8。

# java - Java 中的权限和登录

> ID：14784087
> 
> 赞同：0
> 
> 时间：2013-02-09T01:45:22.387
> 
> 标签：java, database, permissions

我正在用 Java 编写一个应用程序，我将管理用户的权限（没有域的身份验证）。换句话说，用户只能看到管理员授予的权限（基于角色的访问控制）。我想知道是否已经存在一个框架或类似直接管理所有的东西。

提前致谢！

# perforce - Perforce：如何将不同的 Stream 路径重新映射到同一个 Workspace 文件夹？

> ID：14784088
> 
> 赞同：0
> 
> 时间：2013-02-09T01:45:33.717
> 
> 标签：perforce

我们一直在工作室中设置 Perforce，为了简单起见，我们决定使用 Streams。我遇到的问题之一是无法将多个文件夹从 Stream 重新映射到工作区中的同一目标文件夹中。

我知道 Overlay Operator (+)，但是在设置 Stream View Path 时这是不允许的。我试图用 Workspace Remap 来做，但它似乎不起作用。基本上我想做的是

```
Dev/FolderA/... Dev/...
+Dev/FolderB/... Dev/... 
```

FolderA 和 FolderB 有不同的文件，它们的名称不同，我唯一感兴趣的是将它们放在同一个文件夹中是为了在本地驱动器中构建目的。

有任何想法吗？

PS：我知道这类似于[perforce 客户端规范 - 使不同的仓库路径映射到相同的客户端工作空间路径](https://stackoverflow.com/questions/6301151/perforce-client-spec-making-different-depot-paths-map-to-the-same-client-works)，不同之处在于这仅适用于传统的本地仓库视图（而不是流）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:10:35.063

“+”线称为覆盖映射，它们不能用于流工作区视图规范。

流框架有几个原始 Perforce 没有的约束。您正在寻找的简单性依赖于这些约束。您可能已经注意到视图的另一个限制是您不能使用前导或嵌入的通配符，例如“...this/example/...”或“this/.../one”。

因此，如果您试图让流完全按照您习惯使用本机 Perforce 所做的那样工作，您最终可能会在其中投入大量工作而没有获得太多收益。与任何框架一样，充分利用流的最佳方法是重新开始并根据其优势启动新的工作流程。

话虽如此，您可以尝试一个偷偷摸摸的技巧。您可以创建映射流库路径的静态非流客户端视图。您喜欢的任何映射语法都可以在非流客户端视图中使用。

非流视图可用于同步流文件并对其进行处理，但不能提交它们。要提交文件，您必须将工作区切换到流客户端，提交文件，然后将工作区切换回来。只要您不在切换视图之间重新同步，您的文件就不会在本地磁盘上重新排列。

这对您的效果如何取决于您使用的客户端工具等。某些工具可能不允许非流客户端处理流文件。其他工具可能允许这样做，但它们可能会显示不一致的状态，因为它们不希望您这样做。当然，从长远来看，像这样颠覆框架可能只会让事情变得更加复杂。

# excel - 对文件夹中的所有 xls 文件运行 Excel 宏

> ID：14784094
> 
> 赞同：0
> 
> 时间：2013-02-09T01:46:44.277
> 
> 标签：excel, vbscript, vba

我正在尝试运行此代码 VB 代码，但它给了我下面提到的错误。

任何帮助将不胜感激，因为我是 VB 的新手。

```
**Code :** 
Option Explicit
Public Sub ReadExcelFiles(FolderName As String)
Dim FileName As String

' Add trailing \ character if necessary
'
If Right(FolderName, 1) <> "\" Then FolderName = FolderName & "\"

FileName = Dir(FolderName & "*.xls")

Do While FileName <> ""
Workbooks.Open (FolderName & FileName)

Sub Macro1()
'
' Macro1 Macro
'

'
    Range("A1").Select
    ActiveCell.FormulaR1C1 = "Name"
    Range("B1").Select
    ActiveCell.FormulaR1C1 = "Anil"
    Range("A2").Select
End Sub

Workbooks(FileName).Close
FileName = Dir()
Loop
End Sub

Public Sub test()
ReadExcelFiles ("C:\Macro")
End Sub 
```

命令：cscript c:\macro\test.vbs

结果：**错误，第 2 行，字符 38，预期 ')'**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:29:19.980

您的错误是因为您正在设置`Foldername As String`但您不需要“作为字符串”。但是，您的代码中存在更多错误。VBScript 的工作方式与 Visual Basic 或 Excel 中的宏不同。您需要实际调用函数/子例程才能执行某些操作。您必须在代码中的某处（子例程之外）`Call test`

接下来，Dir() 函数在 VBScript 中不可用，因此您必须使用不同的东西。`Dim fso: set fso = CreateObject("Scripting.FileSystemObject")`然后使用非常可比的东西`fso.FIleExists(FileName)`

接下来，您不能像传统上在宏中那样访问 Excel 工作簿。你不能使用 `Workbooks.Open (FolderName & FileName)`. 您可以使用`Dim xl: set xl = CreateObject("Excel.application")`然后使用`xl.Application.Workbooks.Open FileName`

这是我只从 vbscript 打开一个 excel 工作簿的代码

```
Option Explicit

Call test

Sub ReadExcelFiles(FolderName)
    Dim FileName
    Dim fso: set fso = CreateObject("Scripting.FileSystemObject")
    Dim xl: set xl = CreateObject("Excel.application")

    If Right(FolderName, 1) <> "\" Then FolderName = FolderName & "\"

    FileName = (FolderName & "test" & ".xls")

    If (fso.FIleExists(FileName)) Then 
        xl.Application.Workbooks.Open FileName
        xl.Application.Visible = True
    End If
End Sub

Sub test()
    ReadExcelFiles ("C:\Users\Developer\Desktop\")
End Sub 
```

现在修改电子表格将是您的下一个任务。这应该让你朝着正确的方向前进。希望有帮助。

# java - 为什么这个静态字段为空？

> ID：14784097
> 
> 赞同：1
> 
> 时间：2013-02-09T01:47:56.883
> 
> 标签：java, android, nullpointerexception, broadcastreceiver

在安卓上。我的活动是这样的。

```
public class MainActivity extends Activity {

   static TextView textview;
   static int aaa = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
    setContentView(R.layout.activity_main);

             textview = (TextView)findViewById(R.id.textView6); 
```

//其他方法，startservice()等。

并且有 BroadcastReceiver 从服务接收标志。

```
 public static class Receiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intents) {
        intents.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        textview.setText("set")//throw null point
                    Log.d("aaa","aaa is" + aaa); 
```

像这样，在 onReceiver 中，textview 为空。作为测试，int aaa 不是空的。

为什么 textview 为空？

编辑 Texttiew xml 是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
 <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/adview"
        android:layout_alignParentLeft="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

并且在 Activity 中使用相同的 textview.settext 方法不是 null。谢谢。

EDIT2 我知道我应该保存这个变量。那么，保存 VIEW 变量的最佳方法是什么？SharedPreferences 似乎无法保存 VIEW 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:27:48.240

该线程表明具有静态字段可能是一个问题。一般来说，android 会杀死你的应用程序.. 并且在返回时可能不会设置静态变量。

[返回应用时的静态变量null](https://stackoverflow.com/questions/9541688/static-variable-null-when-returning-to-the-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:51:24.183

这很可能是您没有引用正确的 textview 元素。仔细检查布局文件中的 ID。

# jquery - 使用 if 语句匹配单击的元素

> ID：14784098
> 
> 赞同：1
> 
> 时间：2013-02-09T01:47:56.640
> 
> 标签：jquery

使用 Jquery，我怎么说（这是在 click() 函数中）：

```
if(element clicked has an href == 'the href location'){

}; 
```

我正在使用这样的东西：

```
if ($(this).attr('href') == 'image.png') {
//Do Stuff
}; 
```

这不起作用，因为我发现 $(this) 指的是窗口。此外，我不知道如何使用 $(this) 特定于某些东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:51:01.283

如果您只想在满足此条件的元素上触发点击事件，请使用：

```
 $('a[href="image.png"]').click(function(e)
 {
 }); 
```

如果您想在选择器的所有元素上触发单击事件，但如果它们具有特定的 href，则执行一些特殊的操作，那么您做对了，*但* `$(this)`仅在事件回调中引用单击的元素。

```
 $('a').click(function(e)
 {
     if ($(this).attr('href') == 'image.png') { ... }; // it works within this function
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:53:56.707

你在寻找这样的东西吗？

[这是工作的jsFiddle。](http://jsfiddle.net/mjaA3/342/)

```
$(document).ready(function() {
    $('img').click(function() {
        var target = $(this).attr('src');

        if( target === 'http://www.mallorcaweb.net/masm/Planetas/Jupiter.jpg' ) {
            alert('you have found it!');
        }else{
            alert('wrong one..');
        }
    });

}); 
```

# php - 贝宝 PHP 不工作。没有收到沙盒的回复；只有连接：关闭

> ID：14784104
> 
> 赞同：4
> 
> 时间：2013-02-09T01:48:38.977
> 
> 标签：php, paypal

我已经在这工作了 24 小时，现在正要拔掉我的头发。我已经检查了整个 Web 和 Stackoverflow，但找不到任何帮助。我什至检查过以前的帖子，例如[没有收到来自 Paypal IPN 沙盒](https://stackoverflow.com/questions/8302028/not-receiving-a-response-from-paypal-ipn-sandbox)的回复，但这些回复对我不起作用。也许我错过*了对我有帮助的*帖子；如果我有，请原谅我重复同样的问题，但这件事相当紧急，我已经走到尽头了。

**无论如何，问题是这样的：**

我有一个 PHP 购物车，它将客户发送到 Paypal。一切正常。在向他们发送所有代码时，我已经按照 Paypal 的说明构建了它。一切都很好，除了最后一步，`POST`从 Paypal 返回到我的服务器以检查一切正常。即使在那里，我也照原样复制了整个 Paypal 代码，并添加了检查我的所有匹配项的功能。但是，我无法让它工作。我尝试将结果发送到数据库，但没有任何反应。`Mail`因此，如果一切正常并且我没有收到电子邮件，我将一个 PHP命令放在最后一个操作应该在的位置。我`Mail`几乎在其他任何地方都放置了同样的命令，试图找出什么'

**首先，**当我调用将 Paypal 应该发送回我的服务器的 vars 打印到电子邮件中时，我收到了包含除`item_name`and之外的所有 vars 的电子邮件`item_number`，我得到了空白；这很奇怪，因为到目前为止，Paypal Sandbox 正在向我展示我应该购买的每一件产品。我试着给 PHP 代码上的这些变量一个固定的值，因为 Paypal 没有向它们发布值，至少在那时。我想看看缺少这两个值是否是错误的原因；但是，即使使用设定值，错误仍然存​​在。

**其次，** Paypal 代码中有一个`while`循环（上面给出的链接中的响应说应该替换为 的循环`$res=stream_get_contents($fp, 1024);`，但是，这对我也不起作用），所以我把`Mail`命令放在那里看看我回来了。我要求打印`$res`var 和 the `payment_status`，果然得到了几封 E-Mail，收集到的结果如下：

```
 payment_status = Pending
    $res = HTTP/1.0 302 Found
           Location: https://www.sandbox.paypal.com
           Server: BigIP
           Connection: close
           Content-Length: 0 
```

所以我猜这个错误正在发生。有些事情正在发生（或没有发生），它不仅没有返回代码为继续检查等而寻找的`Completed`状态`payment_status`，而且甚至没有返回`INVALID`响应。所以我没有得到任何回应，也没有任何东西可以告诉我一切是否正常。而且，奇怪的是，甚至更糟糕的是，Sandbox 仍然在每次付款尝试都向我收取虚假费用，即使很明显某处存在错误并且流程没有完成。（当然，这带来了另一个困境：一旦这一切都解决了，如果由于 X 原因在某个时候出现服务器错误，Paypal 是否仍会向我的客户收费，我赢了'

好吧，我想这就是我在这件事上所能解释的。在这一点上，我看不出我哪里出错了。代码应该使这变得非常简单。所以我真的不明白我怎么能搞砸复制和粘贴。我想至少应该没有错误，除非它们带有原始代码。此外，因为在那一点上其他一切都 100% 正常工作，所以这个错误可能出现的唯一地方是这个 PHP 文件中，一旦用户完成支付过程，Paypal 就必须调用它。

**任何关于此事的想法将不胜感激！**

这里是代码。

**PHP代码：**

```
 include('../inc/db_fns.inc'); //<--All my DB work is in here.
    include('../inc/shipping.inc');

    $paypal_email = "seller_1360198925_biz@hotmail.com";
    $paypal_currency = 'USD';

    //Here begin the functions I'm using to check everything and pass data to DB.
    function no_paypal_trans_id($trans_id) {
      $connection = db_connect();
      $query = sprintf("SELECT id FROM orders WHERE paypal_trans_id = '%s'", mysql_real_escape_string($trans_id));
      $result = mysql_query($query);
      $num_results = mysql_num_rows($result);
      if($num_results == 0) {
        return true; 
      }
      return false;
    }

    function payment_amount_correct($shipping, $params) {
      $amount = 0.00;   
      for ($i=1;  $i <= $params['num_cart_items']; $i++) {
        $query = sprintf("SELECT precio FROM products WHERE id='%s'", mysql_real_escape_string($params["item_number{$i}"]));
        $result = mysql_query($query);
        if($result) {
          $item_price = mysql_result($result, 0, 'precio');
          $amount += $item_price * $params["quantity{$i}"];
        }
      }
      if(($amount+$shipping) == $params['mc_gross']) {
        return true;    
      } else {
        return false;   
      }
    }

    function create_order($params) {
      db_connect();
      $query =  sprintf("INSERT INTO orders set orders.firstname = '%s', orders.lastname = '%s', orders.email = '%s', orders.country = '%s', orders.address = '%s', orders.city = '%s', orders.zip_code = '%s', orders.state = '%s', orders.status = '%s', orders.amount = '%s', orders.paypal_trans_id = '%s', created_at = NOW()", mysql_real_escape_string($params['first_name']), mysql_real_escape_string($params['last_name']), mysql_real_escape_string($params['payer_email']), mysql_real_escape_string($params['address_country']), mysql_real_escape_string($params['address_street']), mysql_real_escape_string($params['address_city']), mysql_real_escape_string($params['address_zip']), mysql_real_escape_string($params['address_state']), mysql_real_escape_string($params['payment_status']), mysql_real_escape_string($params['mc_gross']), mysql_real_escape_string($params['txn_id']));
      $result = mysql_query($query);
      if(!$result) {
        return false;
      }
      $order_id = mysql_insert_id();
      for ($i=1;  $i <= $params['num_cart_items'] ; $i++) {
        $product = find_product($params["item_number{$i}"]);
        $query = sprintf("INSERT INTO items set order_id = '%s', product_id = '%s', title = '%s', price = '%s', qty = '%s'", mysql_real_escape_string($order_id), mysql_real_escape_string($product['id']), mysql_real_escape_string($product['title']), mysql_real_escape_string($product['price']), mysql_real_escape_string($params["quantity{$i}"]));
        $result = mysql_query($query);
        if(!$result) {
          return false; 
        }
      }
      return true;
    }   

    //Here begins the Paypal code as is
    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';

    foreach ($_POST as $key => $value) {
      $value = urlencode(stripslashes($value));
      $req .= "&$key=$value";
    }

    // post back to PayPal system to validate
    $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('www.sandbox.paypal.com', 80, $errno, $errstr, 30); //<--Here I also tried out the other response to the question linked above and it actually returned a 'Invalid host' into he $res var-

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];    //<--These are the two vars for which
    $item_number = $_POST['item_number'];//   Paypal Sandbox posts no value.
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];

    if (!$fp) {
      // HTTP ERROR
    } else {
      fputs ($fp, $header . $req);
      while (!feof($fp)) {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0) {
        if ($_POST['payment_status'] == 'Completed' && no_paypal_trans_id($_POST['txn_id']) && $paypal_email == $_POST['receiver_email'] && $paypal_currency == $_POST['mc_currency'] && payment_amount_correct($shipping, $_POST)) {
            // process payment
            create_order($_POST);
          }
        } else if (strcmp ($res, "INVALID") == 0) {
          // log for manual investigation
        }
      }
      fclose ($fp);
    } 
```

**编辑1：再试一次：不走运！**

我刚刚尝试了原始的、未改动的 Paypal 代码。我刚刚将它复制并粘贴到这个 PHP 中，然后运行 ​​Sandbox 购买。同样的结果。没有回应，没有数据插入表格，我无法知道有人真的从我的购物车上买了东西，但 Paypal 仍然对购买进行虚假收费。这支持了我的怀疑，即错误出现在原始代码中，与我添加的函数无关。希望有人能尽快理解这一点。千提前感谢那个人！

**编辑 2：在第一个响应之后。**

现在删除了他/她的回复的好心用户非常好心，可以先尝试一下。他/她建议在 Paypal 文档中提及`https://www.sandbox.paypal.com/cgi-bin/webscr`我拥有的`http://www.sandbox.paypal.com`. 也许我有旧版本的代码，所以我尝试了他/她的建议。现在我评论发生了什么：

首先，非常感谢您的回复。不幸的是，没有运气。用另一个地址替换了一个地址，现在该过程没有进入`while`循环，它停止在`fsockopen`. 我放置了一个`Mail`命令来打印出该命令中包含的`$errno`和`$errstr`。`https://www.sandbox.paypal.com/cgi-bin/webscr`替换后`http://www.sandbox.paypal.com`我**无法找到套接字传输“https” - 您在配置 PHP 时是否忘记启用它**？所以我剥离了“https://”并再次尝试。现在我得到**php_network_getaddresses: getaddrinfo failed: Name or service not known**。有任何想法吗？

**编辑 3：在评论部分与@hexacyanide 交谈后：**

```
 $req = cmd=_notify-validate&test_ipn=1&payment_type=instant&payment_date=20%3A55%3A22+Feb+08%2C+2013+PST&payment_status=Completed&address_status=confirmed&payer_status=verified&first_name=John&last_name=Smith&payer_email=buyer%40paypalsandbox.com&payer_id=TESTBUYERID01&address_name=John+Smith&address_country=United+States&address_country_code=US&address_zip=95131&address_state=CA&address_city=San+Jose&address_street=123%2C+any+street&receiver_email=seller%40paypalsandbox.com&receiver_id=TESTSELLERID1&residence_country=US&item_name1=something&item_number1=AK-1234&quantity1=1&tax=2.02&mc_currency=USD&mc_fee=0.44&mc_gross_1=9.34&mc_handling=2.06&mc_handling1=1.67&mc_shipping=3.02&mc_shipping1=1.02&txn_type=cart&txn_id=2229455&notify_version=2.4&custom=xyz123&invoice=abc1234&charset=windows-1252&verify_sign=AsdNkKD2ktCz.aUB.9WYWy-g8MHoAa-TsvSjUgGstseJVdUhQTq3aCwW 
```

对不起，那是`$req`，不是`$res`var。`$res`var 由循环`while`返回。我在那里放置了一个命令，我收到了几封带有这些值`mail`的电子邮件。`$res`这些都是：

```
 X-Frame-Options: SAMEORIGIN
    HTTP/1.0 200 OK
    Strict-Transport-Security: max-age=14400
    INVALID 
    Content-Type: text/html; charset=UTF-8
    Date: Sat, 09 Feb 2013 05:44:33 GMT
    Connection: close
    Content-Length: 7 
```

**编辑 4：绝对目瞪口呆：即使是直接来自 Paypal 开发者网站并使用 Paypal 开发者网站 IPN 测试器进行测试的简单 Paypal IPN 代码也不能工作......**

1.  我使用了[此处](https://www.paypaltech.com/SG2/)找到的 Paypal IPN 脚本生成器。
2.  我选择生成一个脚本，该脚本将向我发送一个 VALID 或 INVALID 响应。
3.  我将其全部复制并粘贴到我保存在服务器中的 PHP 文件中。
4.  我检查并重新检查了代码的任何部分都没有留下。
5.  [我从这里](https://developer.paypal.com/devscr?cmd=_ipn-link-session)找到的 IPN 模拟器将这个 PHP 文件定位在我的服务器上。
6.  模拟器显示检查并显示“ *IPN 已成功发送。* ”
7.  我去查看我的邮件，看看我收到了什么回复，是有效的还是无效的……我根本没有收到任何回复。因此，IPN 在某些时候到达 PHP 购买，该过程被破坏，因此它甚至无法访问 VALID/INVALID 函数。然而，这正是 Paypal 为您提供的代码，并使用它为其设计的 sim 卡进行了测试。发生什么了？

* * *

## 这次奥德赛的第二天

OK 不用说：还没有运气。但我现在决定详尽地跟踪进入 PHP 代码并输出到 Paypal 的所有内容。这个想法是，`VALID`当此代码以相同的顺序将 Paypal 插入其中的初始值发送回 Paypal 时，会发生响应（根据 Paypal 文档）。

第一个问题是我没有收到任何来自代码的响应。所以假设是代码在一开始就失败了。碰巧第一个问题是沙盒链接不起作用。（我在@hexacyanide 的帮助下做到了这一点，他昨天很乐意跟随我的进步或缺乏。每当我获得足够的声誉来积极地标记他/她的回应时，我会的。）所以我剥离了`sandbox.`而且，瞧，它正在返回一个响应，但现在响应是`INVALID`.

从那时到现在，我了解到 IPN 仅用于卖方交易检查和数据记录。Paypal 不关心 IPN 的结果。所以我的购物车是 100% 工作的。用户可以购买东西，Paypal 会向用户收费。如果购买信息实际上来自 Paypal 并且一切正常，IPN 只会为我检查，然后（在我的脚本中）将所有这些信息发送到数据库中，以便我可以完成我的服务。因此，即使交易在没有 IPN 的情况下成功进行，IPN 仍将是促进整个销售过程的宝贵机制。但是，所有这些最后的信息都解决了我的怀疑，即我所有的购物车代码都正常，问题仅出在此处，使用此代码或 Paypal 处理它的方式。（Paypal 的“处女”代码通过 Paypal 的事实

所以，所有进出这个 PHP 的日志。为了创建检查点，我`Mail`在代码中的每个重要点都放置了命令。在`foreach()`命令中，我包含了一个增量变量，以便获得进入的 POSTED 数据的有序列表。这就是我得到的：

**这是 Paypal 发布到代码中的数据（按照发布的顺序）**

```
 test_ipn=1
    payment_type=instant
    payment_date=08%3A42%3A23+Feb+09%2C+2013+PST
    payment_status=Completed
    payer_status=verified
    first_name=John
    last_name=Smith
    payer_email=buyer%40paypalsandbox.com
    payer_id=TESTBUYERID01
    business=seller%40paypalsandbox.com
    receiver_email=seller%40paypalsandbox.com
    receiver_id=TESTSELLERID1
    residence_country=US
    item_name1=something
    item_number1=AK-1234
    quantity1=1
    tax=2.02
    mc_currency=USD
    mc_fee=0.44
    mc_gross=15.34
    mc_gross_1=12.34
    mc_handling=2.06
    mc_handling1=1.67
    mc_shipping=3.02
    mc_shipping1=1.02
    txn_type=cart
    txn_id=23291642
    notify_version=2.4
    custom=xyz123
    invoice=abc1234
    charset=windows-1252 
```

乍一看，我似乎从 Paypal 获得了我应该得到的所有数据。这是PP发送它的顺序。所以如果我按这个顺序发回这个数据，而 PP 实际上确实检查了这个相同的顺序，那么理论上我应该得到一个`VALID`响应。

所以代码所做的是添加“cmd=_notify-validate”，这是唯一的添加（PP 文档明确指出这是必要的添加是必要的），并将所有这些数据传递到`$req`以这种方式调用的 var 中：`A=X&B=Y&C=Z...`.

这是来自下一个检查点的消息，在`foreach()`命令关闭后添加。

```
 $req = cmd=_notify-validate&test_ipn=1&payment_type=instant&payment_date=08%3A42%3A23+Feb+09%2C+2013+PST&payment_status=Completed&payer_status=verified&first_name=John&last_name=Smith&payer_email=buyer%40paypalsandbox.com&payer_id=TESTBUYERID01&business=seller%40paypalsandbox.com&receiver_email=seller%40paypalsandbox.com&receiver_id=TESTSELLERID1&residence_country=US&item_name1=something&item_number1=AK-1234&quantity1=1&tax=2.02&mc_currency=USD&mc_fee=0.44&mc_gross=15.34&mc_gross_1=12.34&mc_handling=2.06&mc_handling1=1.67&mc_shipping=3.02&mc_shipping1=1.02&txn_type=cart&txn_id=23291642&notify_version=2.4&custom=xyz123&invoice=abc1234&charset=windows-1252&verify_sign=AFcWxV21C7fd0v3bYYYRCpSSRl31ACyRxUQ6LVDwUz.i78mjQLsN9aKb 
```

**注意**最后`verify_sign=AFcWxV21C7fd0v3bYYYRCpSSRl31ACyRxUQ6LVDwUz.i78mjQLsN9aKb`。`foreach()`我无法解释那段数据，因为它在循环期间没有以电子邮件的形式吐出。那么它是从哪里来的呢？`INVALID`这可能是返回响应的罪魁祸首吗？开放式问题。但是此时，所有这些数据都由代码在“ *DATA COMING IN* ”检查点传递；所以如果这个数据是进来的，我的代码把它发回，那么一切都应该没问题。

所以下一个检查点将是“ *DATA COMING OUT* ”。`fputs ($fp, $header . $req);`我在写`$req`回 PP的代码之前找到了这个检查点。这就是代码的结果：

```
 $req = cmd=_notify-validate&test_ipn=1&payment_type=instant&payment_date=08%3A42%3A23+Feb+09%2C+2013+PST&payment_status=Completed&payer_status=verified&first_name=John&last_name=Smith&payer_email=buyer%40paypalsandbox.com&payer_id=TESTBUYERID01&business=seller%40paypalsandbox.com&receiver_email=seller%40paypalsandbox.com&receiver_id=TESTSELLERID1&residence_country=US&item_name1=something&item_number1=AK-1234&quantity1=1&tax=2.02&mc_currency=USD&mc_fee=0.44&mc_gross=15.34&mc_gross_1=12.34&mc_handling=2.06&mc_handling1=1.67&mc_shipping=3.02&mc_shipping1=1.02&txn_type=cart&txn_id=23291642&notify_version=2.4&custom=xyz123&invoice=abc1234&charset=windows-1252&verify_sign=AFcWxV21C7fd0v3bYYYRCpSSRl31ACyRxUQ6LVDwUz.i78mjQLsN9aKb 
```

哼！我错过了什么吗？我的眼睛是否跳过了导致此代码旅行的最微小的打嗝？输出似乎与输入完全相同。让我们假设 PP 很好地处理了他们的代码，POST 数据以 PP 期望的方式转换为字符串，因此，检查......假设所有这些，可能有什么问题？

让我们再看一遍：开放式问题：

*   会不会是标题的问题？根据文档，这是应该使用的标题......所以除非他们对此关闭，否则它应该可以正常工作。
*   给定的 URL 可能有问题吗？好的，这实际上是一个问题，或者更确切地说是在某些时候。互联网上至少有 6 或 7 个不同的 URL，它们应该可以工作，但不能工作。有些人为某些人工作而不为其他人工作，有些人似乎永远不会工作，等等。甚至 PP 自己也不确定应该使用什么 URL，因为在他们自己的文档中它会有所不同。很清楚的是，使用`sandbox.`URL 将不会返回任何内容——假设这些 URL 已损坏。
*   可能是字符集的问题吗？会不会有不兼容？当我看到数据以十六进制代码进出时，我突然想到了这一点。问题是这应该使它兼容，对吧？然而，昨天，当我检查`while()`循环中发生了什么，并将从 PP 发回的信息捕获到`$res`var 中时，我没有得到十六进制代码，正如你在本*遗嘱*中进一步看到的那样。

下一个检查点是`if()`VALID 和`if()`INVALID 的经典检查点。而且，当然，我得到一个告诉我这一切都再次无效的消息。

希望我提供的这些详细信息能让某人的灯泡闪闪发光！至于我，我还是傻眼了。

提前致谢！

* * *

**非常感谢你们的回复！**

我还没有尝试过第二个，虽然它听起来很明智。听起来这可能是我从 PayPal 获得的原始代码的问题。如果我有时间尝试一下，看看代码是否适用，我会在这里发布我的反馈。希望有人会发现这一切都很有用。

经过一个星期的头撞墙和一点时间来冷静大脑中的问题后，我终于在几天前找到了另一种解决问题的方法，该方法与第二种方法非常相似六氰化物反应的一部分。我在下面为任何关注此字符串的人发布它。但是，我必须说，**PayPal 代码有很多错误。**至少我收到的那个。从那以后，我遇到了其他几个必须通过变通方法解决的问题。最糟糕的是，PayPal 根本不支持。我什至打了三次：第一次，那个人挂了我；然后，他们告诉我这可能是病毒问题（当他们真的不知道发生了什么时的典型反应）。

无论如何，我希望我能评价你的两个回答，但我需要超过 +15 分，所以我会在这里口头表扬他们。我按原样尝试了 Hexacynide 的响应代码，但它对我不起作用，所以我无法将其标记为已检查。如果我将来有时间尝试另一个，并且它有效，我会将其标记为正确。

在那之前，这是我使用 CURL 进行的代码更新。

```
 $ch = curl_init('https://www.paypal.com/pe/cgi-bin/webscr');
    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

    if( !($res = curl_exec($ch)) ) {
        // error_log("Got " . curl_error($ch) . " when processing IPN data");
        curl_close($ch);
        exit;
    }
    curl_close($ch); 
```

**注意：**这里它针对的是真实的东西，因为它现在已经启动并运行，但是，使用它也可以`sandbox.`工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T03:25:07.087

我是 Stackoverflow 的新手，所以我没有意识到可以回答自己的问题。无论如何，我已经在原帖结尾处回答了它，并在上周对其进行了编辑。现在我将它包含在这里，以便任何遇到此类问题的人都可以参考它并意识到这是我能够解决问题的方式。

我尝试了其他贡献者在这里给出的第一个解决方案，但不幸的是它对我不起作用。一旦我已经能够以另一种方式解决它，第二个解决方案就到了，所以我没有尝试过。也许我会在未来的某个时候得到它。但是，如果有人尝试过，请在此处留下您的评论，以便其他人从智慧中受益。

## 这是我的解决方案：

经过一个星期的头撞墙和一点时间来冷静大脑中的问题后，我终于在几天前找到了另一种解决问题的方法，该方法与第二种方法非常相似六氰化物反应的一部分。我在下面为任何关注此字符串的人发布它。但是，我必须说，**PayPal 代码有很多错误。**至少我收到的那个。从那以后，我遇到了其他几个必须通过变通方法解决的问题。最糟糕的是，PayPal 根本不支持。我什至打了三次：第一次，那个人挂了我；然后，他们告诉我这可能是病毒问题（当他们真的不知道发生了什么时的典型反应）。

无论如何，我希望我能评价你的两个回答，但我需要超过 +15 分，所以我会在这里口头表扬他们。我按原样尝试了 Hexacynide 的响应代码，但它对我不起作用，所以我无法将其标记为已检查。如果我将来有时间尝试另一个，并且它有效，我会将其标记为正确。

在那之前，这是我使用 CURL 进行的代码更新。

```
 $ch = curl_init('https://www.paypal.com/pe/cgi-bin/webscr');
    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

    if( !($res = curl_exec($ch)) ) {
        // error_log("Got " . curl_error($ch) . " when processing IPN data");
        curl_close($ch);
        exit;
    }
    curl_close($ch); 
```

**注意：**这里它针对的是真实的东西，因为它现在已经启动并运行，但是，使用它也可以`sandbox.`工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:01:43.750

尝试改变这个：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('www.sandbox.paypal.com', 80, $errno, $errstr, 30); 
```

对此：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";
$header .= "Connection: close\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 
```

从本质上讲，PayPal 将停止支持 HTTP 1.0。我相信它已经在 Sandbox 上停产了，但它仍然在现场站点上得到支持（但不会持续太久）。这篇文章有更多关于它的信息：[https ://www.paypal-notify.com/eventnotification/event_details?eventId=2891](https://www.paypal-notify.com/eventnotification/event_details?eventId=2891)

此外，您应该回发到启用 SSL 的主机。我想说 PayPal 将拒绝验证 HTTP URL 上的 IPN（并且只是重定向到启用 SSL 的服务器上的 PayPal 主页），但我对此不是 100% 确定的。

最后，回答您的问题——IPN 是一个异步过程，直到付款完成后才会开始。因此，如果您因任何原因没有收到 IPN，则付款已经完成，不会因为您没有收到 IPN 而被撤销。如果您想要在付款**之前****肯定会**回复您的网站的东西，我建议您查看 Express Checkout。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T04:54:35.903

我刚刚经历过这个。您必须将命令附加到响应而不是添加它。完成此操作后，您应该会收到来自贝宝的令人垂涎的“已验证”回复。为了您的方便，我发布了对我有用的代码。兄弟，我一直在你所在的地方，我想我会真正做出回应，而不是关闭浏览器并上床睡觉（我也为此度过了漫长的一天！）。无论如何，没有进一步的告别，这里是：

```
function verifyPayment($request)
{
    if($request->is('post') && !empty($request->data))
    {
        //build response string
        $response = '';
        foreach($request->data as $field => $value)
        {
            //build response string
            $response .= $field . '=' . urlencode(stripslashes($value)) . '&';
        }
        if(empty($id))
        {
            return false; //invalid transaction
        }
        //append notify validate command
        $response .= "cmd=_notify-validate"; 
        //respond to paypal - open connection
        $parsedUrl = parse_url('https://www.sandbox.paypal.com/cgi-bin/webscr');
        $sock = fsockopen('ssl://' . $parsedUrl['host'], "443", $errorNumber, $error, 30);
        if(!$sock)
        {
            return false; //could not open connection - must be able to verify
        }
        //post data back to paypal
        fputs($sock, "POST $parsedUrl[path] HTTP/1.1\r\n");
        fputs($sock, "Host: $parsedUrl[host]\r\n");
        fputs($sock, "Content-type: application/x-www-form-urlencoded\r\n");
        fputs($sock, "Content-length: " . strlen($response) . "\r\n");
        fputs($sock, "Connection: close\r\n\r\n");
        fputs($sock, $response . "\r\n\r\n");
        //loop through response and append
        $ipnResponse = '';
        while(!feof($sock))
        {
            $ipnResponse .= fgets($sock, 1024);
        }
        //close connection
        fclose($sock);
        if(!eregi("VERIFIED", $ipnResponse))
        {
            return false; //paypal reports invalid transaction
        }
        //if we made it here, transaction is valid
        return true;
    }
} 
```

我真诚地希望这可以帮助您和其他任何人处理贝宝的挫败感！

干杯! 杰伊·古德**

# jquery - 在这个 d3.js 可重用和可缩放折线图中的两个数据集之间切换

> ID：14784109
> 
> 赞同：2
> 
> 时间：2013-02-09T01:48:54.750
> 
> 标签：jquery, plot, d3.js, code-reuse

在此示例[http://bl.ocks.org/4743409](http://bl.ocks.org/4743409)中，我设置了一个包含两条线的可缩放折线图。

![d3线图](../Images/6444b52e48e9948abb3e4ddaaa80553a.png)

但是切换选择`options`我获得了两个数据集的叠加。如何在两者之间切换？

提前感谢您的帮助，最重要的是您提出的改进代码的建议。

**更新：** 我成功实现了一个可重复使用的图表（我更新了链接中的示例）。现在我没有两个数据集的叠加。但是，我仍然不明白为什么正确的`svg`尺寸只在更新时设置，而不是在第一次创建时设置。

# algorithm - 对矩阵进行分区

> ID：14784113
> 
> 赞同：3
> 
> 时间：2013-02-09T01:49:59.243
> 
> 标签：algorithm

给定一个`N x N`矩阵，其中`N <= 25`和每个单元格都有一个正整数值，您如何将其划分为最多 K 行（直线上/下线或直线左/右线 [注意：它们必须从一侧延伸到其他]）以便最大值组（由分区确定）最小？

例如，给定以下矩阵

```
1 1 2
1 1 2 
2 2 4 
```

并且我们可以使用 2 行来划分它，我们应该在第 2 列和第 3 列之间画一条线，以及在第 2 和第 3 行之间画一条线，它给出了最小化的最大值 4。

我的第一个想法是用一个位掩码来表示每行的状态，用 2 个整数来表示它。但是，这太慢了。我认为复杂性是`O(2^(2N))`也许你可以为行解决它，然后为列解决它？

有人有想法么？

编辑：这是我用谷歌搜索后的问题：[http ://www.sciencedirect.com/science/article/pii/0166218X94001546](http://www.sciencedirect.com/science/article/pii/0166218X94001546)

另一篇论文：[http ://cis.poly.edu/suel/papers/pxp.pdf](http://cis.poly.edu/suel/papers/pxp.pdf)

我试着读那个^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:34:56.103

您可以尝试垂直线的所有子集，然后对水平线进行动态规划。

假设您已将垂直线集固定为 S。将包含固定垂直线集 S 的矩阵的前 K 行的子问题的答案表示为 D(K, S)。然后找到一个递归来解决具有较小子问题的 D(K, S) 是微不足道的。

如果您在开始时预先计算每个子矩阵的大小，则总体复杂度应为 O(2^N * N^2)。

# .htaccess - 用于屏蔽 URL 的 htaccess 重写语法

> ID：14784116
> 
> 赞同：2
> 
> 时间：2013-02-09T01:50:06.460
> 
> 标签：.htaccess, redirect, rewrite

您好，我需要每次用户进入 www.mydomain.com/page 他们被重定向到 www.mydomain.com/portal/index.php?option=com_content&id=84 但顶部的 URL 必须保持 www.mydomain.com/页

我在我的 htaccess 中尝试了很多东西。只是能够重定向，但不能屏蔽 url ..

这是我的代码。

```
Redirect 301 /page http://www.mydomain.com/portal/index.php?option=com_content&id=84

RewriteEngine on
RewriteBase /
RewriteRule ^/portal/index.php?option=com_content&id=84$ /page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:57:04.143

你`RewriteRule`的想法是正确的，只是它是倒退的。最终用户的 URL 位于左侧，重写后的 URL 位于右侧。`Redirect 301`应该完全删除，因为这将更改浏览器 URL 。

```
RewriteEngine On
RewriteRule ^page$ portal/index.php?option=com_content&id=84 [L] 
```

# ios - 以编程方式旋转 UIViewController？

> ID：14784117
> 
> 赞同：1
> 
> 时间：2013-02-09T01:50:24.280
> 
> 标签：ios, objective-c, uiviewcontroller, rotation, autorotate

我正在尝试以编程方式将 UIViewController 旋转 180 度。假设我点击了“旋转”按钮。该按钮应将屏幕及其内容旋转 180 度。我的 iOS 目标只有纵向作为部署信息下支持的界面方向。这会是一个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:12:35.040

您可以`UIView`通过将旋转变换分配给它`CALayer`的`transform`属性来旋转（不是控制器）。

但是，请记住，方向将保持为纵向，并且状态栏不会随视图旋转。

没有用于设置设备 UI 方向的公共 API。如果你不关心公共 API 和应用商店的合规性，有`[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];`

# c# - 使用 LINQ 获取两个 IEnumerable 的交集

> ID：14784119
> 
> 赞同：5
> 
> 时间：2013-02-09T01:50:40.957
> 
> 标签：c#, linq

我有两个类型的实例`IEnumerable`如下。

```
IEnumerable<Type1> type1 = ...;
IEnumerable<Type2> type2 = ...; 
```

两者`Type1`和`Type2`都包含一个名为 的成员`common`，因此即使它们属于不同的类，我们仍然可以像这样关联它们。

```
type1[0].common == type2[4].common 
```

我试图过滤掉那些`type1`没有对应`common`值的元素，`type2`并根据每个元素的一个值创建一个字典。现在，我通过以下双循环来做到这一点。

```
Dictionary<String, String> intersection = ...;
foreach (Type1 t1 in type1)
  foreach(Type2 t2 in type2)
    if (t1.common == t2.common)
      intersection.Add(t1.Id, t2.Value); 
```

现在，我已经尝试过使用 LINQ，但所有的,`.Where`只是让我头疼。有没有办法使用 LINQ 巧妙地执行相同的操作？`.Select``.ForEach`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T03:43:08.583

当两个序列有共同点并且您想根据该共同点过滤它们的产品时，有效的查询是连接。假设*Type1*是*Customer*并且*Type2*是*Order*。每个客户都有一个*CustomerID*，每个订单也有一个*CustomerID*。那你可以这么说。

```
var query = from customer in customers
            join order in orders 
              on customer.CustomerId equals order.CustomerId
            select new { customer.Name, order.Product }; 
```

迭代将为您提供一系列对，其中包含每个有订单的客户名称及其所有产品。因此，如果顾客 Suzy 点了煎饼和比萨饼，顾客 Bob 点了牛排，那么您会得到这些对。

```
Suzy, pancake
Suzy, pizza
Bob, steak 
```

相反，如果您希望将这些分组以便每个客户都有他们的订单列表，那就是组加入。

```
var query = from customer in customers
            join order in orders 
              on customer.CustomerId equals order.CustomerId 
              into products
            select new { customer.Name, products }; 
```

迭代为您提供配对，其中第一项是名称，第二项是一系列产品。

```
Suzy, { pancake, pizza }
Bob, { steak } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:17:26.803

另一种选择是加入。我在下面做了一个快速控制台应用程序，但必须自己编写数据。希望我正确理解了你的问题。

```
public class Type1
{
    public string ID { get; set; }
    public Guid common { get; set; }
}
public class Type2
{
    public string Value { get; set; }
    public Guid common { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Guid CommonGuid = Guid.NewGuid();

        IEnumerable<Type1> EnumType1 = new List<Type1>()
        {
            new Type1() {
                ID = "first",
                common = CommonGuid
            },
            new Type1() {
                ID = "second",
                common = CommonGuid
            },
            new Type1() {
                ID = "third",
                common = Guid.NewGuid()
            }
        } as IEnumerable<Type1>;

        IEnumerable<Type2> EnumType2 = new List<Type2>()
        {
            new Type2() {
                Value = "value1",
                common = CommonGuid
            },
            new Type2() {
                Value = "value2",
                common = Guid.NewGuid()
            },
            new Type2() {
                Value = "value3",
                common = CommonGuid
            }
        } as IEnumerable<Type2>;

        //--The part that matters
        EnumType1                       //--First IEnumerable
            .Join(                      //--Command
                EnumType2,              //--Second IEnumerable
                outer => outer.common,  //--Key to join by from EnumType1
                inner => inner.common,  //--Key to join by from EnumType2
                (inner, outer) => new { ID = inner.ID, Value = outer.Value })  //--What to do with matching "rows"
            .ToList()   //--Not necessary, just used so that I can use the foreach below
            .ForEach(item =>
                {
                    Console.WriteLine("{0}: {1}", item.ID, item.Value);
                });

        Console.ReadKey();
    }
} 
```

如下所示：
first: value1
first: value3
second: value1
second: value3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:23:18.927

假设您仍希望将交集保留为`Dictionary<string, string>`：

```
IEnumerable<Type1> list1;
IEnumerable<Type2> list2;

Dictionary<string, string> intersection = 
    (from item1 in list1
     from item2 in list2
     where item1.common = item2.common
     select new { Key = item1.Id, Value = item2.Value })
         .ToDictionary(x => x.Key, x => x.Value); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-09T02:01:05.627

```
type1.where(i=>type2.where(j=>j.common == i.common).Count > 0); 
```

这应该会为您提供仅包含匹配项的列表。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-09T03:28:20.183

我错过了一些东西，但这会不会：

```
type1
 .where(t1 => type2.Any(t2 => t1.common == t2.common)
 .ToDictionary(t1 => t1.Id) 
```

或者正如Servy建议的那样

```
type1
  .Join(type2, a => a.common, b => b.common, (a1,b1) => a1)
  .ToDictionary(t1 => t1.Id) 
```

# html - 如何在 HTML5 中的一组指南上锁定滚动

> ID：14784120
> 
> 赞同：0
> 
> 时间：2013-02-09T01:50:46.037
> 
> 标签：html, scroll, vertical-scrolling

不是我不确定如何做我所要求的。这就是为什么我决定呼吁这个美妙的社区来帮助我，这样我就可以学到一些东西。这是我的问题：

我正在制作一个只有一页的网站。网站的每个部分，例如“关于我”、“我在哪里”等，都将位于您通过滚动到达的大型网页上的不同位置。目前，我有一些按钮可以通过动画将您带到页面的每个部分。
现在我想知道我是否可以锁定滚动。我所说的锁定滚动的意思是，如果我向下滚动，网页会自动将我带到下一部分，而无需进一步滚动。这可能吗？
如果我不清楚，请告诉我，我会尽力完善我的段落。

非常感谢你们的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:59:02.940

是的，可以通过以下方式实现：

```
$(window).scroll(function() {
    var winTop = $(this).scrollTop(); // distance frome current top to page top
    if (winTop >= $('#aboutPage').offset().top) { // or you may change to something else
        $('body').animate({
            // animate scrolling to somewhere
            scrollTop: $('#homePage').offset().top
        });
    }
}) 
```

# jquery - 无法使用 serializeArray() 和 array.push() 将数据附加到字符串

> ID：14784122
> 
> 赞同：0
> 
> 时间：2013-02-09T01:51:04.727
> 
> 标签：jquery, arrays, string, serialization

[在遵循这样的](https://stackoverflow.com/questions/8289349/jquery-appending-to-serialize)答案之后，我正在尝试使用以下方法将数据附加到字符串中：

```
<input type='checkbox' name='a' />A
<input type='checkbox' name='b' checked='checked'/>B
<input type='checkbox' name='c' />C

var attr_str = $('input').serializeArray();
attr_str.push({q:'hello',p:'world'}); 
```

但它返回`[object Object],[object Object]`。我错过了什么？

[JSFIDDLE](http://jsfiddle.net/ECahX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:34:15.070

`serializeArray`返回一个对象数组，每个对象都包含属性`name`和`value`。

前任

```
[{"name": "x", "value": "y"}, {"name": "a", "value": "b"}, ...] 
```

这就是它打印的原因`[Object, Object]`。

如果需要，您可以使用`JSON.stringify(attr_str)`打印字符串化的值。但`JSON.stringify`在旧浏览器中不原生支持，因此您可能必须包含像[JOSN2这样的兼容性库](https://github.com/douglascrockford/JSON-js)

演示：[小提琴](http://jsfiddle.net/arunpjohny/ECahX/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:34:26.227

我不确定您要完成什么，但只有经过检查的输入才会包含在`serializeArray()`. [你可以在这里](http://api.jquery.com/serializeArray/)阅读更多关于它的信息。

但是您的数组正按应有的方式作为对象返回。要查看此对象的 JSON 布局，您可以尝试`JSON.stringify(attr_str)`.

```
var attr_str = $('input').serializeArray();

attr_str.push({q:'hello',p:'world'});

$('body').append('<br><br>string='+JSON.stringify(attr_str)); 
```

这将表明您正在将一个对象附加到您的`attr_str`数组中，但仅包含输入“b”，因为它是唯一被检查的对象。`string=[{"name":"b","value":"on"}{"q":"hello","p":"world"}]` 要访问此对象，您只需将`attr_str[0]`then 用于该对象的属性 use `attr_str[0].name`。哪个会打印`b`.

# git - 在 Windows 上设置 git 以推送到 linux 框

> ID：14784125
> 
> 赞同：0
> 
> 时间：2013-02-09T01:52:02.247
> 
> 标签：git, deployment

目前我的部署方法只是一个标准的 SFTP 上传到我的 VPS，但据我所知，我可以通过使用 git 将任何更改推送到我的服务器来节省大量时间？

Git 对我来说是全新的，我在网上努力寻找任何有用的信息来帮助我，因为我在 Win7 上进行开发，谁能给我一个失败或指出我正确的方向？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:44:28.097

Git主页位于：

*   [http://git-scm.com/](http://git-scm.com/)

git 的 Windows 客户端位于此处：

*   [http://git-scm.com/download/win](http://git-scm.com/download/win)

有一本优秀的书和一个学习 git 的在线教程：

*   [http://git-scm.com/book](http://git-scm.com/book)
*   [http://try.github.com/](http://try.github.com/)

最后，如果您想支持远程存储库，您的服务器 (VPS) 还需要安装 git。说明书都在书里：

*   [http://git-scm.com/book/en/Git-on-the-Server](http://git-scm.com/book/en/Git-on-the-Server)

# .net - PagedList 非常冗余和重复的代码

> ID：14784129
> 
> 赞同：0
> 
> 时间：2013-02-09T01:52:27.023
> 
> 标签：.net, asp.net-mvc-3, html-helper, code-duplication, pagedlist

我的页面上有分页列表，它允许 5 个页面查看结果，其格式为 www.example.com/viewing?1 ... 2 ...3 一直到 5，我正在检查我是哪个页面在做

```
@if (Model.article.PageNumber == 1)
{ 
} 
```

然后

```
@if (Model.article.PageNumber == 2)
{ 
} 
```

一直到 5 .. 有没有更好的方法来做到这一点这里是代码..

```
// look at Model.article.PageNumber as you can see I use that to get pages 1-5 and
// it keeps the tabs in order if page=2 then the first element is page2 -1 and the like
// how can i reduce this code so i can add the page numbers correctly without repeating 5 times

@if (Model.article.PageNumber == 1)
{ 
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber).ToString()), "index", new { page = Model.article.PageNumber })  @Html.Raw(" ");          
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 1).ToString()), "index", new { page = Model.article.PageNumber + 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 2).ToString()), "index", new { page = Model.article.PageNumber + 2 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 3).ToString()), "index", new { page = Model.article.PageNumber + 3 })@Html.Raw(" ");  
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 4).ToString()), "index", new { page = Model.article.PageNumber + 4 }) 
}

@if (Model.article.PageNumber == 2)
{  
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 1).ToString()), "index", new { page = Model.article.PageNumber - 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber).ToString()), "index", new { page = Model.article.PageNumber }) @Html.Raw(" ");      
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 1).ToString()), "index", new { page = Model.article.PageNumber + 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 2).ToString()), "index", new { page = Model.article.PageNumber + 2 })@Html.Raw(" "); 
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 3).ToString()), "index", new { page = Model.article.PageNumber + 3 })
    @Html.Raw(" ");
}

@if (Model.article.PageNumber == 3)
{  
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 2).ToString()), "index", new { page = Model.article.PageNumber - 2 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 1).ToString()), "index", new { page = Model.article.PageNumber - 1 })@Html.Raw(" ");       
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber).ToString()), "index", new { page = Model.article.PageNumber })@Html.Raw(" "); 
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 1).ToString()), "index", new { page = Model.article.PageNumber + 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 2).ToString()), "index", new { page = Model.article.PageNumber + 2 })  
}

@if (Model.article.PageNumber == 4)
{  
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 3).ToString()), "index", new { page = Model.article.PageNumber - 3 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 2).ToString()), "index", new { page = Model.article.PageNumber - 2 })  @Html.Raw(" ");     
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 1).ToString()), "index", new { page = Model.article.PageNumber - 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber).ToString()), "index", new { page = Model.article.PageNumber }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber + 1).ToString()), "index", new { page = Model.article.PageNumber + 1 })  @Html.Raw(" ");
}

@if (Model.article.PageNumber == 5)
{  
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 4).ToString()), "index", new { page = Model.article.PageNumber - 4 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 3).ToString()), "index", new { page = Model.article.PageNumber - 3 })    @Html.Raw(" ");   
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 2).ToString()), "index", new { page = Model.article.PageNumber - 2 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber - 1).ToString()), "index", new { page = Model.article.PageNumber - 1 }) @Html.Raw(" ");
    @Html.ActionLink(String.Format("{0}", (Model.article.PageNumber).ToString()), "index", new { page = Model.article.PageNumber })  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:12:47.243

既然您将自己限制为 5 页，为什么需要根据当前页码使用大的 if/else 语句动态生成页脚或其他内容？您是对的，因为这可能会很快变得不守规矩，特别是如果您决定将来在文章中添加更多页面。

看来您可以传递单个属性，例如记录计数或 numPages 并执行以下操作：

```
@{for(var pageNum = 1; pageNum <= Model.article.numPages, pageNum++){
    @Html.ActionLink(string.Format("{0} ", pageNum), "index", new { page = pageNum })                
}} 
```

这将减少我在上面看到的嵌套，消除最后对 Html.Raw 的需求并且与页面无关（这意味着你在哪个页面上并不重要）。您还可以在视图模型中包含当前请求的页面，这样您就无法将该页面设置为链接。例如：

```
@{for(var pageNum = 1; pageNum <= Model.article.numPages, pageNum++){
    if(pageNum <> Model.article.PageNumber){
       @Html.ActionLink(string.Format("{0} ", pageNum), "index", new { page = pageNum })
    }else{
       @Model.article.PageNumber
    } 
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:21:27.330

考虑使用我的 PagedList nuget 包：

[https://github.com/troygoode/pagedlist](https://github.com/troygoode/pagedlist)

# python - 带有几个答案的通用 Python 套接字问题

> ID：14784132
> 
> 赞同：0
> 
> 时间：2013-02-09T01:52:42.363
> 
> 标签：python, sockets, operating-system

我正在尝试使用服务器[的示例](http://www.devshed.com/c/a/Python/Sockets-in-Python/2/)，但客户端只能发送一条消息，然后服务器将回复一个数字。

这是代码。

```
import socket
mySocket = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
mySocket.bind ( ( '', 2000 ) )
mySocket.listen ( 1 )
while True:
   channel, details = mySocket.accept()
   print 'We have opened a connection with', details
   print channel.recv ( 100 )
   channel.send ( 'Green-eyed monster.' )
   channel.close() 
```

**问题：**

1.  为什么每当客户端向服务器发送消息时，它都会以一个数字响应？

2.  如何在 Internet 上使用套接字，而不是在 LAN 上？

3.  有没有办法让服务器使用套接字将数据从客户端移动到客户端 - 有点像[IM](http://en.wikipedia.org/wiki/Instant_messaging)程序。

4.  我很可能会在我的 Mac 上为我的朋友托管这个 IM 服务器 - 它可以在操作系统（Mac、PC）之间工作吗

5.  有什么好的库可以用来做这个吗？（我听说 HTTP 很棒）

6.  这些代码行*确实*令人困惑。它们是如何工作的？

    ```
    print channel.recv ( 100 )
    channel.send ( 'Green-eyed monster.' ) 
    ```

7.  此外，当我关闭服务器（使用红色 X）并重用端口时，它会说：

    ```
    Traceback (most recent call last):
    File "C:\Users\****\Desktop\Python\Sockets\First Server\server.py",
    line 3, in <module>
    mySocket.bind ( ( '', 2003 ) )
    File "C:\Python27\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
    error: [Errno 10048] Only one usage of each socket address
    (protocol/network address/port) is normally permitted 
    ```

8.  最后，在哪里有一些好的教程可以让我更好地理解这一点？

很抱歉在同一个帖子中问了这么多问题，但是当我发布[这个](https://stackoverflow.com/questions/14764294/how-to-change-the-shutdown-message-for-windows-using-python)并且[这个](https://stackoverflow.com/questions/14764126/how-to-make-a-python-script-which-can-logoff-shutdown-and-restart-a-computer)人因为我在不同问题中发布类似问题而生我的气。

Python版本：Python 2.7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:59:01.960

我做了一些研究（*几个*小时）并找到了一些解决我的问题的方法！

**3：**是的，有一种方法可以让客户端相互通信，*他们只需要使用服务器！*您必须在服务器端初始化一个无限循环，它将接收数据并发送它。这就是我解决问题的方法：

```
 while True:
        #Receiving from client
        data = conn.recv(1024)
        if not data:
            break
        conn.sendall(data)
        print data
        #To come out of the loop
    conn.close() 
```

该程序是一个名为**clientthread**的定义的一部分，它初始化与客户端的所有连接。“实际”循环继续线程的其余部分：

```
 while True:
        #Wait to accept a connection - blocking call
        conn, addr = s.accept()
        #display client information (IP address)
        print 'Connected with ' + addr[0] + ':' + str(addr[1])

        #Start new thread takees 1st argument as a function name to be run, second
        #is the tuple of arguments to the function

        start_new_thread(clientthread ,(conn,)) 
```

**4：**是的，它将在操作系统之间工作。套接字*独立*于平台。

**6：**那行代码其实很简单。该行`print channel.recv ( 100 )`告诉服务器打印用户输入，最多 100 个字符。下一行，`channel.send ( 'Green-eyed monster.' )`只是告诉服务器向`Green-eyed monster`客户端发送一条消息。

**7：**出现该错误是因为每个端口不能打开多个套接字。我建议在代码末尾使用诸如`s.close()`或之类的行来关闭端口。`sys.exit()`或者您可以简单地选择另一个！

**8：**互联网上有一些很棒的教程。一个教你套接字基础知识的就是[这个](http://www.binarytides.com/python-socket-programming-tutorial/1/)。Telnet 对我来说真的很困惑，所以我发现结合[这个](http://www.devshed.com/c/a/Python/Sockets-in-Python/2/)客户端可以创建一个定制的客户端，这实际上要好得多。

如果您有任何问题，请随时发表评论，我会尽力回答。

# c++ - 使用 CMake + SWIG + Python 进行`make install`

> ID：14784134
> 
> 赞同：9
> 
> 时间：2013-02-09T01:53:16.260
> 
> 标签：c++, python, makefile, cmake, swig

我正在编写一个 C++ 库，它可以在 Mac 和 Linux 上从 C++ 和 Python 中使用。所以我决定在我的项目中使用 CMake 和 SWIG。

正如 SWIG 2.0 文档中所述，SWIG 和 CMake 的组合在我的 Mac 上也可以正常工作。 [http://www.swig.org/Doc2.0/SWIGDocumentation.html#Introduction_build_system](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Introduction_build_system)

但我有一个关于`make install`.

输入`cmake .`and后`make`，`_example.so`成功生成。但`make install`不起作用，因为自动生成的 Makefile 没有`install`目标。我想知道如何`install`在 Makefile 中添加目标。我想`_example.so`安装在`site-packages`每个系统的目录下。

如果有人能告诉我如何修改上面链接中编写的 CMake 示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T10:14:09.907

```
find_package(SWIG REQUIRED)
find_package(PythonLibs REQUIRED)

include(${SWIG_USE_FILE})
set(CMAKE_SWIG_FLAGS "")
include_directories(${PYTHON_INCLUDE_DIRS})

set_source_files_properties(target.i PROPERTIES CPLUSPLUS ON)
set_source_files_properties(target.i PROPERTIES SWIG_FLAGS "-includeall")
swig_add_module(target python target.i ${SOURCES})
swig_link_libraries(target ${PYTHON_LIBRARIES})

execute_process(COMMAND python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()" OUTPUT_VARIABLE PYTHON_SITE_PACKAGES OUTPUT_STRIP_TRAILING_WHITESPACE)
install(TARGETS _target DESTINATION ${PYTHON_SITE_PACKAGES})
install(FILES ${CMAKE_BINARY_DIR}/src/target.py DESTINATION ${PYTHON_SITE_PACKAGES}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T12:39:46.640

CMake 接口`make install`是 CMake 命令[install()](http://cmake.org/cmake/help/v2.8.10/cmake.html#command%3ainstall)。在您的示例中，您可以添加如下安装规则：

```
install(
  TARGETS ${SWIG_MODULE_example_REAL_NAME} 
  # ... add other arguments to install() as necessary
) 
```

一旦 CMakeList 中有任何`install()`命令，CMake 将生成一个`install`可调用的目标作为`make install`.

# build - makefile，多输入，一输出。保持新鲜状态。可能的？

> ID：14784135
> 
> 赞同：0
> 
> 时间：2013-02-09T01:53:17.900
> 
> 标签：build, makefile, wildcard, gnu-make

我有一个目标，它需要几个输入文件并生成一个。

现在我忽略输入文件的新鲜状态并将其作为 .PHONY 运行

```
file.out:
    $(CMD) input/* file.out 
```

我想要类似的东西：

```
file.out: $(wildcard input/*)
    $(CMD) $^ $@ 
```

...因此，每次输入未更改时，make 都不会运行 CMD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:59:54.543

删除 .PHONY 目标。

```
CMD := cat

file.out: $(wildcard input/*)
    $(CMD) $^ > $@ 
```

# c# - 如何处理asp.net mvc中的会话

> ID：14784139
> 
> 赞同：1
> 
> 时间：2013-02-09T01:54:18.250
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, session

我怎样才能在 Asp.Net MVC 中做到这一点？

*   活动计时器：当用户在页面上导航时（意味着做一些调用`ActionResult`），计时器将重置。
*   当用户超过 15 分钟没有进行任何活动时，系统会提示他并询问“你还在吗？” (Yes/LogOut)，如果他点击是，那么活动计时器将归零，并重新开始计数。
*   此活动计时器对于每个用户必须是唯一的，并且必须在注销时销毁。

请请！对我有耐心！我不知道该怎么做。

我已经发布了这个[问题](https://stackoverflow.com/questions/14744908/how-to-create-login-session-timer-for-individual-users#comment20696997_14744908)，但我没有得到任何解决这个问题的答案。所以我计划从一开始就做，我需要一些帮助/指导才能正确地做到这一点。
任何参考链接或教程将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:21:16.493

我会在客户端处理这个。创建一个对象来封装功能。

就像是：

```
var UserInactivityMonitor = UserInactivityMonitor || {};
UserInactivityMonitor = (function (module) {
    var inactivityIndex;
    var promptIndex;
    var timer;

    module.startInactivityMonitor = function () {
        module.timerTick();
    };

    module.timerTick = function () {
        inactivityIndex--;
        if (inactivityIndex === 0) {
            module.fireInactivityAlert();
        }

        if (inactivityIndex === promptIndex) {
            module.fireIdlePrompt();
        }

        timer = setTimeout(module.timerTick, 1000);
    };

    module.fireIdlePrompt = function () {
        var response = confirm('are you stil there?');
        if (response === true) {
            module.resetInactivityIndex();
        }
    };

    module.resetInactivityIndex = function () {
        inactivityIndex = 15;
        promptIndex = 5;
    };

    module.fireInactivityAlert = function () {
        alert('Inactivity alert!');
    };

    module.initialize = function () {
        module.resetInactivityIndex();
        module.startInactivityMonitor();
    };

    return module;
})(UserInactivityMonitor || {}); 
```

将 inactivityIndex 设置为在不活动事件触发之前将经过的秒数。将 promptIndex 设置为当用户仍然存在时将被提示的剩余秒数。上面的代码将不活动超时设置为 15 秒，并且将在剩余 5 秒标记处调用空闲提示。

在页面加载时启动不活动计时器：

```
$(function () {
    UserInactivityMonitor.initialize();
}); 
```

在任何 AJAX 请求上，重置计数器：

```
 $("#fooButton").on('click', function () {
        $.ajax(
            {
                url: $("#buttonClickPostUrl").val(),
                data: {
                    someData: 'data'
                },
                type: 'POST',
                complete: function () {
                    UserInactivityMonitor.resetInactivityIndex();
                }
            });
    }); 
```

如果服务器正在维护会话状态，那么您将需要向服务器发出请求以终止会话，并可选择将浏览器定向到事件的相应页面。您可以在 fireInactivityAlert() 函数中执行此操作。

# jquery - jquery colorbox 标题属性

> ID：14784142
> 
> 赞同：0
> 
> 时间：2013-02-09T01:54:41.837
> 
> 标签：jquery, attributes, colorbox, title

如何扩展可用于显示标题的区域以处理长的、多行的、更具描述性的标题字符串？只有高度需要扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:15:57.313

你需要通过 JavaScript 来做到这一点。看看这个 jQuery 插件[qTip](http://craigsworks.com/projects/qtip2/demos/ "提示")

# php - 在mysql中更改用户密码，检查旧密码匹配并强制使用新密码？

> ID：14784147
> 
> 赞同：-1
> 
> 时间：2013-02-09T01:55:52.750
> 
> 标签：php, mysql, passwords

有人可以帮忙吗，我有这个更改密码脚本，允许用户更改密码。

目前它允许用户更改他们的密码，尽管他们在旧密码框中输入了什么。有人可以告诉我如何检查旧密码是否与“ptb_users.password”中存储的密码匹配吗？

它目前还允许用户将密码设置为空，有没有办法让我强制输入 enw 密码和确认密码字段？

谢谢。

```
<?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
?>
<?php 

session_start();

include '_config/connection.php'; 

$password = md5($_POST['password']);
$newpassword = md5($_POST['newpassword']);

$result = mysql_query("SELECT password FROM ptb_users WHERE id=".$_SESSION['user_id']." AND password = '".$password."'");
if(!$result) 
{ 
echo "The username you entered does not exist or old password didn't match"; 
} 
else
{
     $sql=mysql_query("UPDATE ptb_users SET password='$newpassword' WHERE id=".$_SESSION['user_id'].""); 
}
if($sql) 
{ 
    echo "Thank You. Your Password has been successfully changed."; 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:28:21.250

要检索密码并检查与查询的匹配，您可以使用@hexacyanide 建议的答案。

要从 mysql 获取密码字段以更新密码，您需要更改

`mysql_query("UPDATE ptb_users SET password='$newpassword'`
至
`mysql_query("UPDATE ptb_users SET password='".$newpassword."'`

# c++ - GLFW：编译错误 C++

> ID：14784156
> 
> 赞同：1
> 
> 时间：2013-02-09T01:58:15.240
> 
> 标签：c++, opengl, compiler-errors, glfw

我刚刚完成了为 C++ 安装 GLFW 以使用 OpenGL，当我运行以下代码时：

```
#include <stdlib.h>
#include <GL/glfw.h>

int main(int argc, char *argv[])
{
    int running = GL_TRUE;

    if (!glfwInit())
        exit(EXIT_FAILURE);

    if (!glfwOpenWindow(300, 300, 0, 0, 0, 0, 0, 0, GLFW_WINDOW))
    {
        glfwTerminate();
        exit(EXIT_FAILURE);
    }

    while (running)
    {
        glClear(GL_COLOR_BUFFER_BIT);
        glClearColor(rand() % 255 + 1, rand() % 255 + 1, rand() % 255 + 1, 0);

        glfwSwapBuffers();

        running = !glfwGetKey(GLFW_KEY_ESC) && glfwGetWindowParam(GLFW_OPENED);
    }

    glfwTerminate();

    exit(EXIT_SUCCESS);
} 
```

，它会引发以下错误：

```
Error:
build/Debug/MinGW-Windows/main.o: In function `main':
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:8: undefined reference to `glfwInit'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:11: undefined reference to `glfwOpenWindow'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:13: undefined reference to `glfwTerminate'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:22: undefined reference to `glfwSwapBuffers'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:24: undefined reference to `glfwGetKey'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:24: undefined reference to `glfwGetWindowParam'
C:\Users\User\Dropbox\NetBeans Workspace\OpenGL_Testing/main.cpp:27: undefined reference to `glfwTerminate' 
```

是的，我已将 opengl32.lib 链接到我的项目中。

# python-3.x - Mako：无法导入模板类。在“\mako\template.py”中出现 SyntaxError 错误，第 622 行

> ID：14784157
> 
> 赞同：-3
> 
> 时间：2013-02-09T01:58:18.917
> 
> 标签：python-3.x, mako

我想用 Django 代替 Django 的默认模板语言来尝试 Mako。但是当我尝试[按照手册中的](http://docs.makotemplates.org/en/latest/usage.html)`Template`说明导入 Mako 的课程时遇到了问题：

```
from mako.template import Template 
mytemplate = Template("hello world!") 
print mytemplate.render() 
```

我在 Windows cmd 中执行此操作并收到这样的错误：

```
C:\Documents and Settings\User>cd C:\py\project\vendor\template\Mako_73  // cd to where I unpacked Mako
C:\py\project\vendor\template\Mako_73>python   // run Python interpreter

>>> from mako.template import Template  // trying to import and getting an error
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".\mako\template.py", line 622
    exec code in module.__dict__, module.__dict__
            ^
SyntaxError: invalid syntax 
```

该部分的代码：

```
def _compile_text(template, text, filename):
    identifier = template.module_id
    source, lexer = _compile(template, text, filename,
                        generate_magic_comment=template.disable_unicode)

    cid = identifier
    if not util.py3k and isinstance(cid, unicode):
        cid = cid.encode()
    module = types.ModuleType(cid)
    code = compile(source, cid, 'exec')    
    exec code in module.__dict__, module.__dict__
    return (source, module) 
```

会是什么？我在 Google 中找不到有关此错误的任何信息。

我正在使用 Python 3.3。

我已将 Mako-0.7.3 下载为 tar.gz 文件，然后将其解压缩为 `C:\py\poject\vendor\template\Mako_73`. 我在 PYTHONPATH 或 paths.pth 中没有这个目录。`C:\py\poject`是我的 Django 项目所在的目录，我`\vendor\template`决定放入 Mako 并从那里导入它。

**UPD**

我找到了解决方案。我已经安装了 Pyramid Framework 并从那里获取了 Mako，因为 Mako 是其中的默认模板系统。Pyramid 的版本运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T22:47:08.183

您的基本问题是您使用的是 Python 3，这对于 Django 等大型项目来说相对较新。

其次，您需要了解如何正确安装软件包。我不知道你从哪里得到 Mako，但你不会找到任何地方说“只需解压缩 tarball”——也许你是根据你对 PHP 的了解来假设的，但这是不正确的。

在 Mako 站点上，建议的安装方法是 pip。

如果您手动下载，您需要阅读有关安装 Python 包的说明，例如：[http ://wiki.python.org/moin/CheeseShopTutorial](http://wiki.python.org/moin/CheeseShopTutorial)

Mako 不适合您的原因是安装过程（您尚未运行）转换了所有提供的 Python 2 代码，以便它可以在 Python 3 上运行。并不是有人不费心检查代码对于基本的语法错误！

但是，如果您尝试使用 Django，那么 Python 3 绝对是错误的选择 - 安装说明清楚地表明您需要使用 Python 2.5 到 2.7： [https ://docs.djangoproject.com/en/1.4/intro/install /](https://docs.djangoproject.com/en/1.4/intro/install/)

由于您是 Python 新手，因此您应该在跑步之前尝试步行，并使用久经考验的路径 - 这是 Django 的 Python 2.7。忽略安装说明和要求只会减慢您的速度并使生活变得艰难。

# ruby-on-rails - JQuery Sortable + Rails - 更新外部模型

> ID：14784158
> 
> 赞同：0
> 
> 时间：2013-02-09T01:58:33.780
> 
> 标签：ruby-on-rails, jquery-ui-sortable

我遵循 Railscast 关于创建[可排序列表](http://railscasts.com/episodes/147-sortable-lists-revised?view=asciicast)的一集，并成功创建了一个可在内部更新其模型的可排序列表——在我的应用程序中，项目有很多步骤（这些步骤嵌套在项目中），我创建了一个包含可排序步骤的表当我打开 project_steps 路径时可以访问。

我现在要做的是从 edit_project_steps 路径（步骤有很多图像）中更新外部模型（图像）。我不确定如何将 Railscast 中所做的事情扩展到更新外部模型；现在，当我尝试在 edit_project_steps 路径中对图像进行排序时，出现错误“ **ActionController::RoutingError (No route matches [POST] "/projects/1/steps/2/edit")** ”

有人能指出我正确的方向吗？

这是我到目前为止所拥有的：

**路线.rb**

```
 resources :projects do
    resources :steps do
        collection {post :sort}
      end
      match "steps/:id" => "steps#number", :as => :number
  end

  resources :images do
     collection {post :sort}
   end 
```

**图像.rb**

```
class ImagesController < ApplicationController
   # Sorts images
  def sort
    render nothing: true
  end

end 
```

**步骤/edit.html.erb**

```
<div class="imageGallery span8">
    <p style="margin: 5px 0px;"><b>Step Images</b> - Click and drag to rearrange</p>
      <div class = "wrapper">
        <div class="scrolls">
          <div class="imageDiv" id="stepImages" data-update-url="<%= sort_images_url %>">
            <div class="images">
              <%= render :partial => 'images/image', :collection => @step.images.all %>
            </div>
            <div class="clear"></div>
          </div>
        </div>
      </div>

<% #drag images %>
<script>
$(".imageDiv .images").sortable({
  cursor: "move",
  axis: 'x', 
  update: function(){
    $.post($(this).data('update-url'), $(this).sortable('serialize'));
        }
  }).disableSelection();
</script> 
```

**耙路线**

```
 sort_project_steps POST       /projects/:project_id/steps/sort(.:format)     steps#sort
                 project_steps GET        /projects/:project_id/steps(.:format)          steps#index
                               POST       /projects/:project_id/steps(.:format)          steps#create
              new_project_step GET        /projects/:project_id/steps/new(.:format)      steps#new
             edit_project_step GET        /projects/:project_id/steps/:id/edit(.:format) steps#edit
                  project_step GET        /projects/:project_id/steps/:id(.:format)      steps#show
                               PUT        /projects/:project_id/steps/:id(.:format)      steps#update
                               DELETE     /projects/:project_id/steps/:id(.:format)      steps#destroy
                project_number            /projects/:project_id/steps/:id(.:format)      steps#number
                      projects GET        /projects(.:format)                            projects#index
                               POST       /projects(.:format)                            projects#create
                   new_project GET        /projects/new(.:format)                        projects#new
                  edit_project GET        /projects/:id/edit(.:format)                   projects#edit
                       project GET        /projects/:id(.:format)                        projects#show
                               PUT        /projects/:id(.:format)                        projects#update
                               DELETE     /projects/:id(.:format)                        projects#destroy
                   sort_images POST       /images/sort(.:format)                         images#sort
                        images GET        /images(.:format)                              images#index
                               POST       /images(.:format)                              images#create
                     new_image GET        /images/new(.:format)                          images#new
                    edit_image GET        /images/:id/edit(.:format)                     images#edit
                         image GET        /images/:id(.:format)                          images#show
                               PUT        /images/:id(.:format)                          images#update
                               DELETE     /images/:id(.:format)                          images#destroy
                          root            /                                              projects#index 
```

这是我试图在页面上排序的图像：

![我试图在 edit_project_step 路径中排序的图像](../Images/fd7e37287f067aa25c1c16019397132e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:14:59.857

原来是一系列问题......这是我为感兴趣的人提供的最终代码：

**图像.rb**

```
 def sort
    params[:image].each_with_index do |id, index|
      Image.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end 
```

**步骤/edit.html.erb**

```
<div class="imageGallery span8">
    <p style="margin: 5px 0px;"><b>Step Images</b> - Click and drag to rearrange</p>
    <div class = "wrapper">
      <div class="scrolls">
        <div id="images" data-update-url="<%= sort_images_url %>">
          <% @step.images.order("position").each do |image| %>
            <%=content_tag_for(:div, image) do %>
              <%= render :partial => 'images/image', :locals => {:image=> image} %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

<% #drag images %>
<script>
$("#images").sortable({
  cursor: "move",
  axis: 'x', 
  update: function(){
    $.post($(this).data('update-url'), $(this).sortable('serialize'));
  }
  }).disableSelection();
</script> 
```

# sql - 使用多个 if 条件进行条件选择

> ID：14784162
> 
> 赞同：1
> 
> 时间：2013-02-09T01:59:12.937
> 
> 标签：sql

我在这样的表中有行`Players`。

```
+-----------+----+----+----+----+----+----+----+----+
|  USERNAME | A  | B  | C  | D  | E  | F  | G  | H  |
+-----------+----+----+----+----+----+----+----+----+
|   Mike    | 45 | 34 | 56 | 58 | 29 | 74 | 39 | 48 |
+-----------+----+----+----+----+----+----+----+----+ 
```

现在我的查询应该有点像..

> ```
> SELECT USERNAME FROM PLAYERS 
> IF 
>  (DIFFERENCE BETWEEN A & B <20)
> 
> IF
>  (DIFFERENCE BETWEEN C & D <20)
> 
> IF
>  (DIFFERENCE BETWEEN E & F <20)
> IF
>  (DIFFERENCE BETWEEN G & H <20) 
> ```

现在..如果四个条件中的任何两个为真，我必须选择用户名..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:03:15.080

假定 SQL Server

```
select
   username 
from(
    SELECT USERNAME,
        case when abs(a-b)<20 then 1 else 0 end A
        case when abs(c-d)<20 then 1 else 0 end b
        case when abs(e-f)<20 then 1 else 0 end c
        case when abs(g-h)<20 then 1 else 0 end d
    FROM PLAYERS
)tmp
WHERE tmp.a+tmp.b+tmp.c+tmp.d>=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:04:52.177

假设mysql：

```
select username from (
    select username,
        if(b-a < 20, 1, 0) as ab,
        if(d-c < 20, 1, 0) as cd,
        if(f-e < 20, 1, 0) as ef,
        if(h-g < 20, 1, 0) as gh
    from players
) x where ab + cd + ef + gh = 2 
```

`abs()`如果 a 可以高于 b，您可能想要使用。`>= 2`如果两个或多个条件都很好，您可能想要使用。

# python - 不断解析由另一个进程更新的 CSV 文件

> ID：14784164
> 
> 赞同：3
> 
> 时间：2013-02-09T01:59:16.913
> 
> 标签：python, csv

如果我有一堆`csv`文件并且它们会定期更新。假设 csv 文件是：

```
file1.csv, file2.csv file3.csv 
```

在更新过程中，数据被附加到`csv`文件的最后一行。

是否可以从`csv`文件中读取数据并在更新时将其存储在`array`or`collection(deque)`中。

有没有办法在更新时从 csv 文件中收集数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:58:28.463

您可以使用名为[Watchdog](http://pypi.python.org/pypi/watchdog)的 python 包。

此示例显示递归监视当前目录以查找文件系统更改，并将任何内容记录到控制台：

```
import time
from watchdog.observers import Observer
from watchdog.events import LoggingEventHandler

if __name__ == "__main__":
    event_handler = LoggingEventHandler()
    observer = Observer()
    observer.schedule(event_handler, path='.', recursive=True)
    observer.start()
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
    observer.join() 
```

您可以将其与 Ignacio 的答案结合使用 - 用于`file_pointer.tell()`获取文件中的当前位置，然后`seek()`下次再读取文件的其余部分。例如：

```
# First time
with open('current.csv', 'r') as f:
    data = f.readlines()
    last_pos = f.tell() 

# Second time
with open('current.csv', 'r') as f:
    f.seek(last_pos)
    new_data = f.readlines()
    last_pos = f.tell() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:03:07.127

将文件的当前大小与文件中的当前偏移量进行比较。如果大小更大，则读取新数据。

# ruby-on-rails - if 语句的语法错误

> ID：14784165
> 
> 赞同：0
> 
> 时间：2013-02-09T01:59:28.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 rails helper 中的 if 语句中添加条件。

```
<%= link_to "Admin", rails_admin_path, :class => "btn btn-success" if user_signed_in? && current_user.has_any_role? :superadmin, :admin %> 
```

这会在该行返回语法错误：

```
SyntaxError at / 
```

那么如何检查用户是否已登录，如果已登录，他们在 1 条优雅的线路中扮演什么角色？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:03:19.197

尝试

```
<%= link_to "Admin", rails_admin_path, :class => "btn btn-success" if user_signed_in? && current_user.has_any_role?(:superadmin, :admin) %> 
```

# arrays - 如何将数组作为 post 变量发送

> ID：14784166
> 
> 赞同：1
> 
> 时间：2013-02-09T01:59:28.927
> 
> 标签：arrays, perl, post, mojolicious

我正在使用 Perl 和 Perl 框架（不确定这是否重要）。我要做的是在表单中创建任意数量的输入（因此用户可以从列表中选择任意数量的内容）然后将其作为 HTTP 帖子的一部分发送。有没有办法做到这一点？如果是这样，我将如何在 Perl 中检索该信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T08:11:12.520

如果我理解正确，你想做这样的事情：

```
<form action="/test" method="post">
    <input type="text" name="elements[]" value="">
    <input type="text" name="elements[]" value="">
    <input type="text" name="elements[]" value="">
    <input type="text" name="elements[]" value="">
    <input type="text" name="elements[]" value="">

    <input type="submit" value="Submit">
</form> 
```

然后，当您提交表单时，您将获得一个数组“elements[]”（或者它可能只是“elements”，但“[]”更清楚），它将包含所有字段。

如果您使用**复选框**，您将只获得被**选中**的那些。

或者你可以[用 "multiple"](http://www.w3schools.com/tags/att_select_multiple.asp)创建一个选择框。

# analysis - 函数的 Big-O 和 Big Omega - 作业

> ID：14784167
> 
> 赞同：2
> 
> 时间：2013-02-09T01:59:42.140
> 
> 标签：analysis, big-o

所以我得到了一个函数，我会改变这个函数，因为它是家庭作业，我想学习如何做到这一点，而不是被告知答案是什么。

使用 big-Oh 和 Ω 的定义，找到以下表达式的上限和下限。请务必说明 c 和 k 的适当值。

c [1] 3 ^n + c [2] n ⁴，其中常数是正整数。

现在，我了解如何确定类中的函数 f(n) ∈ O(g(n)) 还是 af(n) ∈ Ω(g(n)。

我不明白的是，如果你只有 f(n)，如何确定 g(n)。我希望这是有道理的！

编辑：我相信你可以强行将它插入到 g(n) 的一堆函数中，但如果有更好的解决方案，那并不是我真正想要的。

Edit2：我们不能为此使用限制方法，他们希望我们以某种方式使用基本定义。

编辑 3：以下是我们给出的定义：

这是我对 Big O 的看法：

对于 T(n) 一个非负值函数，如果存在两个正常数 c 和 k 使得 T(n)，则 T(n) 在集合 O(f(n)) 中<=c*f(n) 对于所有 n > k。

对于 Ω：

对于 T(n) 一个非负值函数，如果存在两个正常数 c 和 k 使得 T(n) >= c*g，则 T(n) 在集合 Ω(g(n)) 中(n) 对于所有 n > k

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:11:49.903

直觉是 f ∈ O(g) 意味着 g 在某种程度上等于或大于 f；并且 f ∈ Ω(g) 意味着 g 在某种程度上等于或小于 f。在我的回答中，我不会对如何选择常数过于精确/挑剔。

首先要热身，你应该说服自己

*   f ∈ O(f) 和 f ∈ Ω(f)。（在定义中让 c=1, k=1）。
*   如果 f ∈ O(g)，则 g ∈ Ω(f)，反之亦然。（如果你找到一个常数 (c,k)，那么 (1/c, k) 是你需要的常数）
*   如果 f ∈ O(g) 则 f ∈ O(P*g) 和 Q*f ∈ O(g) 对于任何正常数 P,Q。这意味着将函数乘以正常数并不重要。Ω 也是如此。
*   如果 f ∈ O(g) 且 f ∈ O(h)，则 f ∈ O(MIN(g,h))。
*   如果 f ∈ Ω(g) 且 f ∈ Ω(h)，则 f ∈ Ω(MAX(g,h))。

当您试图找到 f+g 的 O 或 Ω 时，您通常会猜测 O(f) 或 O(g) 或 Ω(f) 或 Ω(g)。

在您的 3^n + n^4 的情况下，我们知道 3^n ∈ O(3^n)、n^4 ∈ O(n^4) 和 3^n + n^4 ∈ O(3^n + n^4)。但我们想做得更好。我们要证明 3^n + n^4 ∈ O(3^n + 3^n) = O(3^n)。如果我们可以证明 n^4 ∈ O(3^n)，我们就可以做到这一点。

我们应该完全按照定义所说的去做：证明存在 (c,k) 使得对于所有 n>k

```
n^4 ≤ c3^n
4log(n) ≤ log(c) + nlog(3)
4log(n) - nlog(3) ≤ log(c) 
```

证明这个 c 总是存在的一种方法是使用微积分：证明 4log(n) - nlog(3) 最终是一个递减函数。导数是 4/n - log(3)，我们可以看到，对于足够大的 n，它是负数。因此，对于足够大的 n，4log(n) -nlog(3) 正在减少。因此，存在一个不等式成立的正常数 c。因此 n^4 ∈ O(3^n)。并且 3^n + n^4 ∈ O(3^n + 3^n) = O(3^n)。

因为 3^n + n^4 ≥ 1*3^n，3^n + n^4 ∈ Ω(3^n)。为了说明常量无关紧要，让我们使用您拥有的 c_1 和 c_2：c_1*3^n + c_2*n^4。令 d := min(c_1, c_2)。然后

```
c_1*3^n + c_2*n^4 ≥ d(3^n + n^4) ≥ d*3^n 
```

所以 c_1*3^n + c_2*n^4 ∈ Ω(3^n)。类似地，使用 O(3^n)：让 d := max(c_1, c2)。那么对于足够大的n，

```
c_1*3^n + c_2*n^4 ≤ d(3^n + n^4) ≤ d(c*3^n) = (dc)*3^n 
```

我们知道这个 c 存在是因为 3^n + n^4 ∈ O(3^n)。因此 c_1*3^n + c_2*n^4 ∈ O(3^n)。

不确定我的回答是否充分，但希望对您有所帮助。

# azure-sql-database - “AspNet_SqlCacheTablesForChangeNotification”的确切作用是什么

> ID：14784170
> 
> 赞同：2
> 
> 时间：2013-02-09T01:59:57.383
> 
> 标签：azure-sql-database, sqlcachedependency

我们有一个启用了 Azure（托管）缓存的 .NET 4.5 Azure Webrole。我们使用 Entity Framework 5.0 与 Azure SQL 数据库通信。

我们对暂存/测试进行了一些清理，我注意到实体框架 edmx 文件抱怨说

`Entity type 'AspNet_SqlCacheTablesForChangeNotification' is not mapped.`

我们还简要地试验了 SQL Sync。我们不知道是 SQL Sync 还是 Azure 缓存将该表（以及任何其他元素？）添加到我们的数据库中

安装和使用`AspNet_SqlCacheTablesForChangeNotification`什么？删除它是否安全？最后，我们应该清理与该表一起使用的任何额外项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T09:31:33.173

请参阅[Scott Hansleman 撰写](http://www.wrox.com/WileyCDA/Section/Using-the-ASP-NET-2-0-SQL-Server-Cache-Dependency.id-306459.html)的有关设置 SQL Server 缓存依赖关系的这篇文章。

`aspnet_regsql.exe`这是使用.Net 附带的工具设置的

您可以使用禁用此功能，`aspnet_regsql -S localhost -U sa -P wrox -d Northwind -dd`但我不确定这是否会删除相关的配置表（值得一试）。该工具可能无法使用，`SQL Azure`在这种情况下您可能必须手动删除表格。

`web.config`通过检查以下内容来检查您的未设置为期望缓存依赖项是值得的：

```
<system.web>
  <caching>
     <sqlCacheDependency enabled="true">
        <databases>
           <add name="Northwind" connectionStringName="AppConnectionString1" 
            pollTime="500" />
        </databases>
     </sqlCacheDependency>
  </caching>
</system.web> 
```

# knockout.js - 在 knockout.js 中，如何在“with”上下文中绑定选择列表？

> ID：14784171
> 
> 赞同：0
> 
> 时间：2013-02-09T01:59:59.317
> 
> 标签：knockout.js

我在以下 jsfiddle 中重新创建了问题：

[http://jsfiddle.net/DhgRL/2/](http://jsfiddle.net/DhgRL/2/)

## HTML

```
<h2>Edit Person Here</h2>
<div data-bind="with: EditPerson">
    <h3 data-bind="html: Name"></h3>
    <!--Uncomment line below to generate binding error. -->
    <!--<select data-bind="options:$parent.IceCreams, optionsText: Name, optionsValue: Id"></select>-->
</div>
<h2>List of People</h2>
<div data-bind="foreach: People">
    <div data-bind="click: $parent.SelectPerson">
        <h3 data-bind="html: Name"></h3>
        Favorite IceCream: <span data-bind="html: FavoriteIceCream().Name"></span>
    </div>
</div> 
```

## Javascript

```
function ViewModel() {
     var self = this;

    self.IceCreams = ko.observableArray([
            new IceCream(1, "Chocolate"),
            new IceCream(2, "Vanilla"),
            new IceCream(3, "Mint")
        ]);
    self.EditPerson = ko.observable(new Person("", self.IceCreams()[0]));
    self.People = ko.observableArray([
            new Person("Joe", self.IceCreams()[2]),
            new Person("Sue", self.IceCreams()[0]),
            new Person("Carl", self.IceCreams()[1])
        ]);
    self.SelectPerson = function(person){
            self.EditPerson(person);
    }
}

function Person(Name, FavoriteIceCream){
    var self = this;
    self.Name = ko.observable(Name);
    self.FavoriteIceCream = ko.observable(FavoriteIceCream);
}

function IceCream(Id, Name){
    var self = this;
    self.Id = Id;
    self.Name = Name;
}

ko.applyBindings(new ViewModel()); 
```

当您从列表中选择一个人时，他们的名字将出现在上方。我想添加一个下拉菜单，让您可以选择所选人员最喜欢的冰淇淋。我在 html 中注释掉了我希望工作的内容。

但是，似乎不是使用选项参数对象的上下文，而是使用父 div 的 with 参数的上下文。

如何编写选择标签以使绑定起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:27:40.103

`optionsText`并且`optionsValue`需要是字符串或函数。有关详细信息，请参阅[选项文档](http://knockoutjs.com/documentation/options-binding.html)。

示例：http: [//jsfiddle.net/mbest/DhgRL/3/](http://jsfiddle.net/mbest/DhgRL/3/)

# r - 创建一个 for 循环，打印 1-200 之间 x%%3=0 的每个数字

> ID：14784172
> 
> 赞同：0
> 
> 时间：2013-02-09T02:00:07.773
> 
> 标签：r, loops, for-loop

就像标题说的那样，我需要一个 for 循环，它将写入从 1 到 200 的每个数字，并除以 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:44:40.707

到目前为止发布的所有其他方法都会生成 1:200 向量，然后丢弃其中的三分之二。多么浪费。为了具有生态意识，这种方法不会浪费任何电子：

```
seq(3,200,by=3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:07:25.340

其他两种选择：

```
c(1:200)[c(F, F, T)]
c(1:200)[1:200 %% 3 == 0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T02:02:03.593

您不需要 for 循环，`match`而是使用函数，如：

```
which(1:200 %% 3 == 0)
 [1]   3   6   9  12  15  18  21  24  27  30  33  36  39  42  45  48  51  54  57  60  63  66  69  72  75  78  81
[28]  84  87  90  93  96  99 102 105 108 111 114 117 120 123 126 129 132 135 138 141 144 147 150 153 156 159 162
[55] 165 168 171 174 177 180 183 186 189 192 195 198 
```

# ios - 应用程序音频在后台几天后不再工作

> ID：14784176
> 
> 赞同：0
> 
> 时间：2013-02-09T02:01:07.193
> 
> 标签：ios, xcode, audio, background, multitasking

我的 iOS 应用程序是一个以音频为主导的应用程序。如果我离开应用程序并保持多任务处理，我会发现如果我在几天后返回，它会很高兴地让我回到应用程序中的位置，但所有音频都不再有效。如果我只放几个小时就没有问题。

它已经做了很多，我不知道如何重现它。我现在通过关闭多任务处理解决了这个问题，这显然不理想。但是，这意味着音频每次都会完全重新启动，并且不会使应用程序完全无用！

抱歉含糊不清，我有点卡住了。我尝试过的事情：确保在应用程序过渡到后台时释放所有音频，并允许音频在后台运行（这会做其他事情）

想法？

一种解决方案，虽然没有解决问题，但只允许应用程序在后台运行几个小时 - 有人知道如何做到这一点吗？

# android - ListView/CursorAdapter 动态生成列表标题

> ID：14784186
> 
> 赞同：4
> 
> 时间：2013-02-09T02:02:46.000
> 
> 标签：android, performance, android-listview, android-sqlite

我有一个这样的数据库表：

```
ID
NAME
COUNTRY_NAME 
```

我想要一个这样的列表：

```
+ Italy
    - Potato
    - Tomato
+ France
    - Fromage
    - Baguette 
```

我写了一个 CursorAdapter，每次调用 requery 时，读取表上的所有项目并将其映射到一个对象中，该对象用于映射每个项目（实际项目或标题）的位置。

```
private  static class PersonEntry {
    boolean isHeader;
    String countryName;
    int realPos;
    int id;
} 
```

代码是这样的：

```
 /* cursor generated by querying whole table */

 public void readHeaders(Cursor cursor ) {
    Log.d(this.getClass().getSimpleName(),"readHeaders init");
    items = new ArrayList<PersonEntry >();
    this.mCursor = cursor;

    cursor.moveToFirst();
    int i = 0;
    String previousCountry = "";
    String currentCountry;
    while(cursor.isAfterLast() == false)  {
        int id = cursor.getInt(cursor.getColumnIndexOrThrow(Match.ROW_ID));
        currentCountry = cursor.getString(cursor.getColumnIndexOrThrow(Person.ROW_COUNTRY_NAME));
        if (!currentCountry.equals(previousCountry)) {
            // ho incontrato una nuova nazione
            // rispetto alla precedente, aggiungiamola
            items.add(new PersonEntry(... define isHeader=true ..));

        }
        // stiamo comunque scorrendo gli elementi, aggiungiamo quello appena trovato
        items.add(new PersonEntry( ... defile isHeader = false ....);
        previousCountry = currentCountry;
        i++;
        cursor.moveToNext();
    }
    cursor.close();
    Log.d(this.getClass().getSimpleName(),"readHeaders end");

} 
```

所以我重写了 getView、bindView 和 newView 来膨胀正确的布局并绑定基于 realPos-position 光标的视图。

该方法有效，但非常昂贵：它需要详细说明整个表，而且我有很多记录。我正在寻找的是一种在滚动 ListView 时映射 realPosition -> fakePosition 的简单方法，但我认为方法太复杂了，我认为如果 getView 不是线性的（快速滚动？）它们会中断。

解决方案： 1) 按 COUNTRY_NAME 查询排序。向下滚动时 real_cursor_position = (requested position - "country changes # (?)")。如果在 real_position 中翻译的请求位置位于具有不同 country_name 的项目之后，则它是一个标题。我认为，除非有棘手的解决方案，否则在向下滚动拳头和向上滚动时它会破裂。...仅此而已

还有其他解决方案吗？

编辑：另一个问题是我无法在不扫描整个表的情况下预测 adapter.getCount() 返回的视图数量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T19:19:36.147

我已经编写了`getView`简单适配器的方法来向您展示如何`ListView`使用标题对具有相同国家/地区的项目进行分组。这将假定标题视图位于每一行的布局中，根据当前行的需要显示/隐藏它。同样的事情可以通过使用该`getItemViewType`方法来完成，并在绑定适配器的各个部分上做更多的工作。

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = mInflater.inflate(
                    R.layout.rowlayout, parent, false);
        }
        // for simplicity, the header it's just a TextView
        TextView header = (TextView) convertView
                .findViewById(R.id.headerPart);
        // also for simplicity, the row content it's just a TextView
        TextView rowText = (TextView) convertView
                .findViewById(R.id.normalPart);
        // set the data for the row
        mCursor.moveToPosition(position);
        rowText.setText(mCursor.getString(mCursor.getColumnIndex("name")));
        // this is not the first position               
        if (position - 1 >= 0) {
            // if there is a previous position see if it has the same
            // country(in which case you already had set the header)
            String currentCountry = mCursor.getString(mCursor
                    .getColumnIndex("country"));
            mCursor.moveToPosition(position - 1);
            String previousCountry = mCursor.getString(mCursor
                    .getColumnIndex("country"));
            if (currentCountry.equalsIgnoreCase(previousCountry)) {
                // the countries are the same so abort everything as we
                // already set the header on one of previous rows
                header.setVisibility(View.GONE);
            } else {
                // this is the first occurrence of this country so show the
                // header
                header.setVisibility(View.VISIBLE);
                header.setText(currentCountry);
            }
        } else {
            // this is position 0 and we need a header here
            header.setVisibility(View.VISIBLE);
            header.setText(mCursor.getString(mCursor
                    .getColumnIndex("country")));
        }
        return convertView;
    } 
```

# c++ - 在 C++ 中使用 if/else 语句验证输入值

> ID：14784187
> 
> 赞同：0
> 
> 时间：2013-02-09T02:02:47.903
> 
> 标签：c++, if-statement, validation

所以我环顾四周，但显然我要么没有找对地方，要么我误解了一些东西。

给出的指示是程序只能接受 2.0 到 5.0 之间的拱顶高度值。我觉得这与我的 if 条件有关，但我不知道如何纠正它。

当我在调试期间输入高度时，它会跳转到我的 else 语句，并且不给我机会重新输入新的输入。

```
//Retrieving name and first vault and date
cout << "Please enter the name of the pole vaulter.\n";
getline(cin, name);
cout << "Please enter the height of the first vault attempt.\n";
cin >> vault1;
if(5.0 >= vault1 >= 2.0) {
    cout << "What date was this vault accomplished?\n";
    getline(cin, date1);
} else {
    cout << "Only jumps between 2.0 meters and 5.0 meters are valid inputs.       Please enter the height of the first vault attempt.\n";
    cin >> vault1;
    cout << "What date was this vault accomplished?\n";
    getline(cin, date1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T02:06:33.010

表达方式

```
5.0>=vault1>=2.0 
```

在 Python 中应该可以正常工作，但在 C++ 中它被解析为

```
(5.0>=vault1) >= 2.0 
```

其中第一次比较的结果与 2.0 进行比较，得出一个无意义的结果。

在 C++ 中，将其写为

```
2.0 <= vault1 && vault1 <= 5.0 
```

如果您在多个地方执行此检查，那么定义一个适当命名的布尔函数有助于提高清晰度和可维护性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:04:58.840

C++ 不支持数学表达式。

改变：

```
if (5.0>=vault1>=2.0) 
```

到：

```
if (vault1 > 5.0 || valut1 < 2.0)
{
   // invalid vault1
}
else
{
   // valid vault1
} 
```

或者，如果您想使用`&&`

```
if (vault1 <= 5.0 && valut1 > 2.0)
{
   // valid vault1
} 
```

# android - 显示来自 android.app.application 的对话框

> ID：14784194
> 
> 赞同：1
> 
> 时间：2013-02-09T02:03:19.870
> 
> 标签：android, android-activity, android-ui, android-context

我有一个更新例程（连接到服务器并查找自身的更新版本），它在我的第一个活动上运行 onCreate。如果有更新，则会向用户显示一个对话框，如果更新不是强制性的，询问他们是否要下载更新。

问题是我不想在活动中运行它，因为每次重新加载活动时都会调用它，比如旋转设备时。

我可以创建一个单例，它知道检查是否已经执行或类似的事情，但更愿意在活动之外进行检查，因为它似乎不是正确的地方。

我遇到的问题是，如果我把它放在 android.app.application 中，那么我没有创建对话框的活动。我可以为此创建一个加载器活动，然后触发主要活动，但这似乎也不理想。

处理这种情况的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:33:06.440

您不能从应用程序上下文启动活动，遗憾的是这是不可能的。您需要做的是创建一个活动

```
android:theme="@android:style/Theme.Dialog" 
```

在您的 AndroidManifest.xml 的活动标签中。在这个活动中，您应该定义一个相当简单的布局，使其看起来尽可能像一个对话框（或者如果您希望它看起来像其他东西，则不要）。

另一种选择是让您的第一个活动设置广播接收器，然后让应用程序上下文

```
sendBroadcast(new Intent("MyUniqueID")); 
```

在 BroadcastReceiver 的 onReceive 方法中显示带有 Activity 上下文的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:35:10.397

crdnilfan 给出了很好的答案。如果您想在 MainActivity 中执行此操作，那么您可以按照[此处](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)所述的正确方式维护 Activity Lifecycle ，如果您想`onCreate()`在旋转设备时限制调用，您可以指定 configChanges，

```
 <activity
        android:name="com.example.temp.MainActivity"
        android:configChanges="orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

我希望它会有所帮助！

# angularjs - 以声明方式编写 *wrapper* 指令 AngularJS

> ID：14784195
> 
> 赞同：2
> 
> 时间：2013-02-09T02:03:23.413
> 
> 标签：angularjs, angularjs-directive

我正在使用 AngularJS 和 Reveal.js 创建幻灯片。显示要求表格

```
<div class="slides">
    <section>
    </section>
</div> 
```

用于水平幻灯片。虽然垂直幻灯片有两个部分：

```
<div class="slides">
    <section>
        <section>
        </section>
    </section>
</div> 
```

我正在使用角度呈现此页面：

```
<div ng-app='myApp' class="reveal">
    <div class="slides" ng-controller='MyController'>
        <section slide ng-repeat="slide in slides">
        </section>
    </div>
</div>

<script src="https://raw.github.com/hakimel/reveal.js/master/js/reveal.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>
</body>
</html> 
```

*具有多个步骤*的幻灯片应该是垂直的。所有其他都应该是水平的。控制器返回步骤并设置 Reveal：

```
function MyController($scope) {
    $scope.slides = [
        { 'steps': ['a'] },
        { 'steps': ['b1', 'b2'] },
        { 'steps': ['c1'] }
    ];
    setTimeout(function() {
            Reveal.initialize({
                loop: false,
                transition: Reveal.getQueryHash().transition || 'none'
            });
    }, .1 * 1000);
} 
```

该指令需要在步骤周围添加一个新元素和属性。这是我丑陋的、令人尴尬的、命令式的、类似 jQuery 的指令：

```
app.directive('slide', function () {

var wrapContent = function (content) {
    return '<h1>' + content + '</h1>';
};

return {
    restrict: 'A'
    ,link: function (scope, element, attrs, controller) {
    // resorting to imparative jQuery way
    if (scope.slide.steps.length == 1) {
        element.html(
        wrapContent(scope.slide.steps[0])
        );
    } else {
        var sections = '';
        for (i=0,len=scope.slide.steps.length; i < len; ++i) {
        sections +=
            '<section ' +
            function () {
            result = '';
            if (i !== len-1) {
                result = 'data-autoslide="1000" ';
            }
            return result;
            }() +
            '>' +
            wrapContent(scope.slide.steps[i]) +
            '</section>';
        }
        element.html(sections);
    }
    }
}
}); 
```

我如何编写它使其看起来像角度代码？[jsfiddle](http://jsfiddle.net/zhon/W5xet/2/)

我试过编译、链接、替换、ng-switch 都无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:55:13.097

由于您`slides`在范围内的属性中定义了所有部分，因此我可能会将整个幻灯片移动到指令中。

```
<div ng-app='myApp' class='reveal' ng-controller='MyController'>
  <div slideshow='slides'></div>
</div> 
```

在指令本身内部，我将遍历每张幻灯片并创建一个`<section>`元素。对于每张幻灯片，遍历这些步骤并创建一个`<section>`元素（如果有多个）或一个`<h1>`元素（如果只有一个）。它可能看起来像这样：

```
for (var i = 0; i < slides.length; i++) {
  var section = angular.element("<section>");
  var steps = scope.slides[i].steps;

  if (steps.length == 1) {
    var content = angular.element("<h1>").html(steps[0]);
    section.append(content);
  } else {
    for (var j = 0; j < steps.length; j++) {
      var subSection = angular.element("<section>");
      if (j < steps.length - 1)
        subSection.attr('data-autoslide', '1000');
      var content = angular.element("<h1>").html(steps[j]);
      subSection.append(content);
      section.append(subSection);
    }
  }
} 
```

然后，您可以附加`section`到指令的元素。而且，由于在指令内部，我们知道 DOM 已经构建完成，我们可以将调用`Reveal.initialize`从控制器（在控制器中进行 DOM 操作或库调用通常不是最好的主意）转移到指令本身。

将所有内容与一些小的更改放在一起，您最终可能会得到以下 jsFiddle 的代码：http: [//jsfiddle.net/BinaryMuse/CXqAb/](http://jsfiddle.net/BinaryMuse/CXqAb/)

虽然您可能可以在指令中以更具声明性的风格编写此代码，但我认为这可能更具可读性，并且当与第三方库（如 Reveal）集成时，需要特定的 DOM 结构，从而更容易创建可预测的和干净的 DOM 结构，而不是使用散布在其中`ngShow`的 s 和es的一堆 DOM 元素。`ngSwitch`

# requirejs - 摩卡+需要问题

> ID：14784196
> 
> 赞同：0
> 
> 时间：2013-02-09T02:03:30.570
> 
> 标签：requirejs, mocha.js

我试图让 Mocha（浏览器版本，而不是 Node）在我的（Require.js）环境中运行，但我遇到了一个奇怪的问题。

如果我做：

```
<script src="require.js" data-main='mochaTestMain.js'></script> 
```

然后在 mochaTestMain.js 中执行以下操作：

```
require(['someFile'], function() {
    describe('foo', function() {
        it('foo', function() {
            chai.expect(false).to.equal(true)
        });
    });
}); 
```

我的“foo”规范结果出现了。但是，如果我将完全相同的测试放入`someFile.js`（在`define`语句中），则测试不会显示；就像摩卡甚至从未意识到它的存在。如果我在`console.log`里面添加一个`describe`，它会显示出来，但如果我在里面添加一个`it`它不会。

有没有人对我可以做些什么来让 Mocha 识别模块中定义的测试有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:10:41.167

我看不到您在哪里调用“mocha.run()” 如果它在上述测试之前运行，那可能是原因之一。

您可以通过将异步线程中的逻辑拉到内联流中来控制事情的时间：

someTestFile.js 的内容：

```
;(function(){

    function setUpTests(){
        describe('foo', function() {
            it('foo', function() {
                chai.expect(false).to.equal(true)
            })
        })
    }

    // note, we are returning a test "constructor"
    define(function(){return setUpTests})

})(); 
```

mochaTestMain.js 的内容：

```
;(function(){

    require(["someTestFile"], function(setUpTests){
        // defining of the test must come before
        setUpTests()
        // you run the test suite
        mocha.run()
    })

})(); 
```

# wso2 - WSO2 ESB-如何使用 XLST 调解器检索具有 xml 标签的属性值，所有我得到它的 '<' for '<'

> ID：14784197
> 
> 赞同：0
> 
> 时间：2013-02-09T02:03:32.520
> 
> 标签：wso2, wso2esb

我正在开发 WSO2 ESB 代理服务，其中需要进行 XSLT 转换，从 xml 中获取一部分值并与另一个 .dsb 文件的结果相结合

这是我的财产，价值低于

```
*<xslt key="conf:/input/proxy_input_transform.xslt"/>
<property name="DETAILS" expression="//QUARTERLY_DATA" />
<QUARTERLY_DATA>
<ROW>
<SAP_CUST_ID>0000905133</SAP_CUST_ID>
<AOC_FLAG>N</AOC_FLAG>
<LOB>AppleCare</LOB>...." 
```

但是当在 outsequence 中调用 .dbs 文件后完成 xlst

```
 <xslt key="conf:/output/proxy_output_transform.xslt" >
      <property name="details" expression value="get-property('DETAILS')"/>
   </xslt> 
```

我得到了转换后的 xml 中的值，如下所示。

```
&lt;QUARTERLY_DATA>
&lt;ROW>
&lt;SAP_CUST_ID>0000905133&lt;/SAP_CUST_ID>
&lt;AOC_FLAG>N&lt;/AOC_FLAG>
&lt;LOB>AppleCare&lt;/LOB>.... 
```

我不确定为什么“<”被更改为“<”。有人可以就此发表他们的发现吗？注意：我能够成功地从属性中检索值，它只有单个值而不是 XML 标记。在将 xml 放置在消息上下文中时，将属性中的类型设置为“OM”。这是我的代理服务

```
 <?xml version="1.0" encoding="UTF-8"?>
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="TQS_SIST_BILLING_PCH_N" transports="https http" startOnLoad="true" trace="enable" statistics="enable">
    <target>
    <inSequence onError="conf:/tqs/common/FaultHandler_Seq.xml">
        <property xmlns:sist="http://sist.tqs.ist.apple.com/sist_request" name="IN_SAP_SOLD_TO" expression="//sist:ACC_BILLING_REQ_PCH_FLAG_N/sist:CUST_SRCH_INPUT/sist:SAP_SOLD_TO"/>
        <xslt key="conf:/tqs/sist/billing_pch_n/proxy_input_transform.xslt"/>
          <property name="REQUEST" value="DETAILS_REQUEST"/>
            <property name="SAP_CUST_ID" expression="//ACC_BILLING_REQ_PCH_FLAG_N" type="OM"/>
                <send>
                    <endpoint key="conf:/tqs/sist/billing_pch_n/ds_endpoint.xml"/>
                </send>
     </inSequence>
    <outSequence onError="conf:/tqs/common/FaultHandler_Seq.xml">
        <switch source="get-property('REQUEST')">
            <case regex="DETAILS_REQUEST">
                <log level="custom">
                    <property name="sequence" value="outSequence - response from Details Service"/>
                </log>
                <property name="DETAILS" expression="//QUARTERLY_DATA"/>
                <log level="custom" separator=",">
                    <property name="DETAILS------at entry level" expression="get-property('DETAILS')"/>
                </log>
                <enrich>
                    <source type="property" clone="true" property="SAP_CUST_ID"/>
                    <target type="body"/>
                </enrich>
                <log level="full">
                    <property name="sequence" value="outSequence - request for Summary Service"/>
                </log>
                <property name="REQUEST" value="SUMMARY_REQUEST"/>
                <send>
                    <endpoint key="conf:/tqs/sist/billing_pch_n/ds_summary_endpoint.xml"/>
                </send>
            </case>
            <case regex="SUMMARY_REQUEST">
                <log level="full">
                    <property name="sequence" value="outSequence  - response from Summary Service"/>
                </log>
                <log level="custom" separator=",">
                    <property name="DETAILS------222222" expression="get-property('DETAILS')"/>
                </log>
                <xslt key="conf:/tqs/sist/billing_pch_n/proxy_output_transform.xslt">
                    <property name="details" expression="get-property('DETAILS')"/>
                </xslt>
                <send/>
            </case>
        </switch>

    </outSequence>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:23:40.430

我认为问题出在您的 xslt 中，您可以将“输出方法”用作文本。使用 `output method="xml"`

例如： `<xsl:output method="xml" version="1.0" encoding="UTF-8" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T03:35:40.413

您可以尝试通过直接访问配置的 .xml 文件来编辑配置文件吗？只需使用文本编辑器进行所有配置编辑并尝试运行您的方案。有时当您在管理控制台中编辑配置时，此类字符包含在配置文件中。你可以试试这个吗？

# visual-c++ - Visual C++：插件 DLL 使用的第 3 方 DLL 的位置？

> ID：14784199
> 
> 赞同：1
> 
> 时间：2013-02-09T02:03:38.637
> 
> 标签：visual-c++, dll, static-libraries, zeromq

我正在为第 3 方 Windows 应用程序编写 C++ 插件 DLL。我的插件 DLL 可以存在于文件系统上的任何位置，我在从 3rd-party 应用程序加载它时指定它的位置。

我的 DLL 的部分功能需要我使用第 3 方库 ( [ZeroMQ](http://www.zeromq.org/) )。我将我的 DLL 链接到 ZeroMQ 库并正确构建。但是，在第 3 方应用程序中加载我的 DLL 时，我一直收到`The specified module could not be found.`错误消息。最初，我不清楚我是否也需要 zeromq DLL 是否使用 ZeroMQ 静态库（但显然通常有一个静态库来包装对 DLL 的访问：[Using .dll in Visual Studio 2010 C++](https://stackoverflow.com/questions/7136450/using-dll-in-visual-studio-2010-c)）。

我尝试将零 mq dll（在我的情况下为 libzmq-v100-mt-gd-3_2_2.dll）与我的插件 DLL 放在同一个文件夹中，但这不起作用。

最后通过纯粹的实验，我发现我可以将 zeromq dll 直接放在与第 3 方主应用程序相同的文件夹中，现在我的插件可以工作了。但是，理想情况下，我宁愿不这样做。有没有办法让我以某种方式将 zeromq dll 库与我的插件 DLL 放在同一个文件夹中？如果是这样，怎么办？在构建我的 DLL 时，也许 Visual Studio 中有一些配置选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:56:16.447

问题是 Windows 在定位 dll 时使用的搜索路径包括应用程序的路径，而不是您的插件 dll 的路径（除非您可以说服应用程序供应商添加此功能！）。加载插件 dll 时，加载器发现它需要从 libzmq-v100-mt-gd-3_2_2.dll 导出的函数，并试图找到它。您所发现的与预期的一样 - 应用程序目录位于 dll 搜索路径中，因此如果您将 libzmq-v100-mt-gd-3_2_2.dll 放在那里，加载器将正确找到它，并继续加载您的插件 dll。有一些方法可以将插件的路径添加到搜索路径，但不幸的是，这些方法不能在您的 dll 中使用，因为您的代码只有在 dll 正确加载的情况下才会运行 - 如果 libzmq-v100- 则不会未找到 mt-gd-3_2_2.dll！

正如建议的那样，延迟加载可以解决问题。我可以看到的其他选项是：

*   在您的插件安装程序中将您的插件的路径添加到 PATH 环境变量中，并将 libzmq-v100-mt-gd-3_2_2.dll 放在同一位置 - 这种方法会污染 PATH 变量，并且可能很脆弱
*   使用动态链接而不是静态链接到您的插件所需的 libzmq-v100-mt-gd-3_2_2.dll - 然后您可以直接控制使用 LoadLibrary 加载 dll 的位置。这种方法的另一个优点是，如果您找不到插件所需的库，您可能仍然会激活插件，但功能会减少，或者至少提供有意义的错误/日志消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T07:26:40.927

您想要做的是将 DLL 加载延迟到稍后使用以下内容：

[http://msdn.microsoft.com/en-us/library/151kt790.aspx](http://msdn.microsoft.com/en-us/library/151kt790.aspx)

[延迟加载 DLL](https://stackoverflow.com/questions/1388388/delay-loading-dlls)

[http://www.codeproject.com/Articles/9428/Delay-Loading-a-DLL](http://www.codeproject.com/Articles/9428/Delay-Loading-a-DLL)

[防止 .lib 在运行时加载 DLL](https://stackoverflow.com/questions/12685664/prevent-lib-from-loading-dll-at-runtime)

然后在加载发生之前，使用 LoadLibrary 动态加载 DLL，您可以在其中输入 dll 的整个路径。

当延迟加载发生时，它会意识到 DLL 已经被您的 LoadLibrary 调用加载了，并且 viola...

或者，您也可以使用以下命令将目录添加到 dll 搜索路径，而不是使用 LoadLibrary 加载：

[http://msdn.microsoft.com/en-us/library/ms686203.aspx](http://msdn.microsoft.com/en-us/library/ms686203.aspx)

当延迟加载发生时，它将在该目录中查找 dll，然后中提琴...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:58:07.840

我最近在一篇博文中解决了这个确切的问题：http: [//otb.manusoft.com/2013/01/using-delayload-to-specify-dependent-dll-path.htm](http://otb.manusoft.com/2013/01/using-delayload-to-specify-dependent-dll-path.htm)

# python - python中的计数反转（对于大整数数组）

> ID：14784205
> 
> 赞同：0
> 
> 时间：2013-02-09T02:04:26.353
> 
> 标签：python, algorithm, inversion

我在 pyhton 中制作了一个计数反转程序，并使用 python27 来实现。我已经使用分而治之的技术（合并排序技巧）实现了算法。我的程序对于大小为 100 的输入数组运行良好（这是我可以验证的最大值）。现在我在大小为 50,000 和 1,00,000 的输入数组上测试了我的程序，但是我怎么也无法得到正确的答案。我在下面粘贴了我的代码，请指出任何可能的错误：

```
 f=open('forum.txt')
    a=[]
    s=1
    for line in f:
        a.append(line)

def CountInversion(IntegerArray):
_count=0
lc=0
rc=0
RightArray=[]
LeftArray=[]
if len(IntegerArray)>1:
        LeftArray,lc=CountInversion(IntegerArray[:len(IntegerArray)/2])
        RightArray,rc=CountInversion(IntegerArray[len(IntegerArray)/2:])
elif len(IntegerArray)==1:
    return IntegerArray,0
ResultArray=IntegerArray
i=0
l=len(ResultArray)
j,k=0,0
for i in range(0,l):
    if j<len(RightArray) and k<len(LeftArray):
        if RightArray[j]<LeftArray[k]:
            ResultArray[i]=RightArray[j]
            j += 1
            a=(len(LeftArray)-k)
            _count = _count + a    
        else:
            ResultArray[i]=LeftArray[k]
            k += 1
elif j<len(RightArray):
    ResultArray[i]=RightArray[j]
        j += 1
elif k<len(LeftArray):
        ResultArray[i]=LeftArray[k]
        k += 1          
return ResultArray,(_count+lc+rc)

arr,b=CountInversion(a)

print ('end of inversions')

print b 
```

我还运行了 JF Sebastian 在[这篇](https://stackoverflow.com/questions/2987605/minimum-number-of-swaps-needed-to-change-array-1-to-array-2/2989341#2989341)文章中给出的代码，但结果是相同的（答案对于小输入是正确的，但对于大小为 50000 或 1,00,000 的输入数组则不正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:48:53.287

您的第一个问题是缩进不一致。在几行中，您使用制表符而不是空格，这是一个非常糟糕的主意。缩进在 Python 中很重要，所以如果不小心很容易出错。

我认为您遇到的第二个问题是您正在比较字符串，而不是数字。Python 非常乐意对字符串进行排序，但它会使用字典顺序排序，这在应用于编码为字符串的整数时可能会出乎意料。例如， string`"11"`将排在 string 之前`"2"`，因为它的第一个字符`1`在`2`ASCII 字符集中（以及在 Unicode 中）之前。

正如我在评论中所问的那样，尚不清楚您如何确定您的代码无法正常工作。简单地解决我上面描述的问题可能会解决您遇到的问题。如果他们不这样做，请解释您如何确定您的结果无效，我将尝试更新这篇文章并提供进一步的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:57:42.990

通过将字符串解析为 int 并填充数组来解决问题

# ruby-on-rails - 如何在 Ruby on Rails 中显示特定类别的帖子

> ID：14784206
> 
> 赞同：-1
> 
> 时间：2013-02-09T02:04:44.420
> 
> 标签：ruby-on-rails, categories

我有一个简单的博客网站，正在尝试从特定类别中检索帖子。我已将模型设置如下。

```
class Post < ActiveRecord::Base
    has_many :categorizations
    has_many :categories, through: :categorizations

    attr_accessible :author, :description, :title, :photo, :category_ids

    scope :breaking, lambda { |category_ids|
        joins(:categorizations).where('categorizations.category_id' => category_ids)
    }
end

class Category < ActiveRecord::Base
    attr_accessible :name
    has_many :categorizations
    has_many :posts, :through => :categorizations
end

class Categorization < ActiveRecord::Base

    attr_accessible :category_id, :position, :post_id

    belongs_to :post
    belongs_to :category
end 
```

我在 post 模型中写了一个 scope，叫做*breaks*，我不知道如何在视图中渲染它。还有控制器会是什么样子，为了检索特定类别下的帖子，我的范围是否被打破？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:03:45.417

将您的范围声明更改为：

```
scope :breaking, lambda { |category_ids|
    joins(:categorizations).where('categorizations.category_id = ?', category_ids)
} 
```

或者

```
scope :breaking, lambda { |category_ids|
    joins(:categorizations).where(categorizations: { category_id: category_ids })
} 
```

我更喜欢类方法，而不是在作用域上使用 lambda，因为对我来说，它们看起来更具可读性。此外，添加默认值更容易。

```
def self.breaking(category_ids)
    joins(:categorizations).where(categorizations: { category_id: category_ids })
end 
```

# android - 在Android上打开手电筒？最兼容的方法？

> ID：14784208
> 
> 赞同：3
> 
> 时间：2013-02-09T02:04:52.657
> 
> 标签：android, camera, android-camera, flashlight

在成为一名长期的 Java 开发人员之后，我刚刚开始为 Android 编程，并且我创建了一个小手电筒应用程序（好像还不够 xD）。我意识到有这么多不同的手机，我读到有时很难让 LED 灯在所有设备上持续打开，因为有些需要不同的方法。

我目前使用这种方法打开相机 LED：

```
camera = Camera.open();

Camera.Parameters params = camera.getParameters();
params.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
camera.setParameters(params);
camera.setPreviewDisplay(holder);
camera.startPreview(); 
```

显然，我不能真正使用模拟器来确保闪存正常工作，所以我只能在三星 Galaxy Nexus 和 Nexus 4 上对其进行测试。两者都可以，但我想知道这是否是最兼容的方法还是我应该做些什么来使它适用于更多设备？

另外附注我已将应用程序免费发布到 Google Play，[在这里](https://play.google.com/store/apps/details?id=com.ndcubed.justlight)，如果您想尝试它并让我知道它是否可以在您的设备上运行 :)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:08:22.613

我自己只是为了好玩而做了一个。我意识到如果您在 GingerBeard 设备中执行 setPreviewDisplay(holder)，它将无法正常工作。所以我做了这样的事情。

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            camera.setPreviewDisplay(mSurfaceView.getHolder());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T09:30:42.857

首先检查设备是否支持闪光灯或不下面的代码：

```
 boolean hasFlash = SevenBitsDemo.getInstance().getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH);
   if (hasFlash) {
     // device support flash light:
     Camera.Parameters  cameraParams = mCamera.getParameters();
     cameraParams.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
   }else{
    // device is not support flash light 
   } 
```

# javascript - 如何验证特定数字的字段？

> ID：14784211
> 
> 赞同：-1
> 
> 时间：2013-02-09T02:05:39.073
> 
> 标签：javascript, forms, validation

我在一个表单上有两个字段，一个可以有 0 或 10 或更多的值，另一个可以有 0 或 100 或更多的值。我将如何标记以验证在这些字段中输入的内容（如果有的话）是否符合这些准则。字段如下：

```
<div class="fb-input-number">
          <input name="unassembled" type="text" id="unassembled" autocomplete="off"     value=""  data-hint="" />
        </div>
      </div>
      <div id="item8" class="fb-item fb-50-item-column" style="padding-bottom: 5px; ">
        <div class="fb-grouplabel">
          <label id="item8_label_0" style="display: inline; ">
            Number of <font color="#FF0000" >Assembled</font> Hygiene Kits (Min. 10) @2.50/ea.
          </label>
        </div>
        <div class="fb-input-number">
          <input name="assembled" type="text" id="assembled" autocomplete="off" value="" data-hint="" />
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:45:29.500

试试这些链接[validation1](http://eisabainyo.net/weblog/2009/04/30/10-examples-of-basic-input-validation-in-javascript/)和[validation2](http://www.w3resource.com/javascript/form/javascript-sample-registration-form-validation.php)

从你的问题很难理解你想要什么类型的验证谢谢

# iphone - 'UIAPPLICATION 没有可见的@interface .. 本地通知教程失败

> ID：14784213
> 
> 赞同：0
> 
> 时间：2013-02-09T02:05:46.737
> 
> 标签：iphone

刚刚学习 iPhone，我收到以下错误

```
 [app scheduledLocalNotifications:notification]; 
```

uiapplication 没有可见的@interface 声明选择器 schedulelocalnotifications

有人可以帮帮我吗？我确定它很简单，我只是没有意识到，因为这是我的第一个教程

谢谢

```
-(IBAction)createNotification{

NSLog(@"createNotification");

NSString *dateString = dateTextField.text;
NSString *textString = textTextField.text;

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM-dd-yyyy HH:mm"];
[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:-18000]];

NSDate *alertTime = [formatter dateFromString:dateString];

UIApplication* app = [UIApplication sharedApplication];

UILocalNotification *notification = [[UILocalNotification alloc] init];
if (notification) {
    notification.fireDate = alertTime;
    notification.timeZone = [NSTimeZone defaultTimeZone];
    notification.repeatInterval = 0;
    notification.alertBody = textString;

    [app scheduledLocalNotifications:notification];
    [app presentLocalNotificationNow:notification];

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T02:10:25.093

**scheduleLocalNotifications 是属性。**

> 此属性包含表示当前计划的本地通知的 UILocalNotification 实例数组。您可以设置或重置阵列中的本地通知以及访问它们。

阅读文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

更改为以下代码。

```
NSMutableArray *notifications = [[NSMutableArray alloc] init];
[notifications addObject:notification];
app.scheduledLocalNotifications = notifications;
//Equivalent: [app setScheduledLocalNotifications:notifications]; 
```

# javascript - 检查本地文件是否存在（HTML5 FS API）

> ID：14784214
> 
> 赞同：6
> 
> 时间：2013-02-09T02:05:56.977
> 
> 标签：javascript, google-chrome-extension, html5-filesystem

我正在开发一个 Chrome 扩展程序，我想检查一个文件是否存在。我不想对文件做任何事情：我只想检查它的存在。

如果我使用 XMLHttpRequest 它不起作用，因为出于安全原因不允许这样做。所以我必须使用 HTML5 FS API。问题是这个 API 没有检查文件是否存在的方法。

我有一个名为“fileExists”的变量，我想知道如何根据文件的存在（由 URL 确定）将其值从 false 更改为 true 或从 true 更改为 false。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T09:16:43.100

使用类似的东西：

```
 function exists(fileName, callback) {
        storageRootEntry.getFile(fileName, {create : false}, function() {
            callback(true);
        }, function() {
            callback(false);
        });
    } 
```

where`storageRootEntry`是正确初始化的根目录。如果文件存在，该函数将返回“true”，否则返回“false”。这里的关键是第二个参数 `{create : false}`

# angularjs - AngularJS 如何将函数识别为控制器指令

> ID：14784218
> 
> 赞同：2
> 
> 时间：2013-02-09T02:06:34.220
> 
> 标签：angularjs, angularjs-directive

我正在查看[Angular API 参考](http://docs.angularjs.org/api/ng.directive%3angController)。它说 ngController 是一个指令，并给出以下示例：

```
function SettingsController($scope) {
 $scope.name = "John Smith";
} 
```

这看起来就像一个普通的 Javascript 函数，传入了参数 $scope。我想定义指令，我们需要调用：

```
app.directive("name", func()) 
```

Angular 是否将任何带有 $scope 参数的函数视为控制器指令？或者只有当我们修改 DOM 元素以包含 ng-controller = "SettingsController" 时，SettingsController 才会被解释为这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:22:01.443

`ngController`是指令（指令总是在 DOM 中被引用——Angular 允许你通过标签名、属性、类名和注释来指定指令）。该`ngController`指令的编写是为了根据传入指令的名称（在本例中为字符串）创建一个控制器实例`"SettingsController"`。函数本身不是指令。

# javascript - 用 EventEmitter 覆盖 http.request

> ID：14784220
> 
> 赞同：2
> 
> 时间：2013-02-09T02:07:33.543
> 
> 标签：javascript, node.js, fakeweb

我正在使用[fakeweb](https://github.com/thegreatape/node-fakeweb)[`http.request`](http://nodejs.org/api/http.htm)模块，它用以下函数覆盖 Node 的：

```
var old_request = http.request;

http.request = function(options, callback){
    var rule = match_rule(options);
    if(rule){
        var res = new events.EventEmitter();
        res.headers = rule.headers || {'Content-Type': 'text/html'};
                return {end: function(){ 
            callback(res);
            res.emit('data', rule.body || '');
            res.emit('end');
            } 
        };
    } else {
        return old_request.call(http, options, callback);
    }
}; 
```

我的问题是我得到了错误：`TypeError: Object #<Object> has no method 'on'`来自另一个文件中的以下代码：

```
var req = proto.request(options, function (res) { ... });
req.on('error', function (err) {
        err.success = false;
        settings.complete(err);
    }); 
```

我认为我的问题发生是因为它不再是[`EventEmitter`](http://nodejs.org/api/events.html)，尽管我可能是错的。如何在`http.request`不出现此问题的情况下成功覆盖？

背景：我使用的是 Node 版本**0.8.2**。请求 NPM 是**2.12.0版本**

**更新（2013 年 2 月 11 日）**：我想提供一些有关 http.request 被调用位置的更多信息，以便我可以更具体地了解需要什么以及导致错误的原因。这里是它的名字：

```
var proto = (options.protocol === 'https:') ? https : http;              
var req = proto.request(options, function (res) {
    var output = new StringStream();                
    switch (res.headers['content-encoding']) {
        case 'gzip':
            res.pipe(zlib.createGunzip()).pipe(output);
            break;
        case 'deflate':
            res.pipe(zlib.createInflate()).pipe(output);
            break;
        default:
            // Treat as uncompressed string
            res.pipe(output);
            break;
    }

    output.on('end', function() {
        if (settings.cookieJar && res.headers['set-cookie']) {
            var cookies = res.headers['set-cookie'];
            for (var i = 0; i < cookies.length; i++) {
                settings.cookieJar.set(cookies[i]);
            }
        }

        if (res.statusCode >= 300 && res.statusCode < 400) {
            if (settings.maxRedirects > settings.nRedirects++) {
                // Follow redirect                                            
                var baseUrl = options.protocol + '//' + ((proxy) ? options.headers['host'] : options.host),
                    location = url.resolve(baseUrl, res.headers['location']);                    
                request(location, settings);                                   
            } else {
                var err = new Error('Max redirects reached.');
                err.success = false;
                settings.complete(err); 
            }
        } else if (res.statusCode >= 400) {
            var err = new Error(output.caught);
            err.success = false;
            err.code = res.statusCode;
            settings.complete(err);            
        } else {                                
            settings.complete(null, output.caught, res);
        }
    });
});
req.on('error', function (err) {
    err.success = false;
    settings.complete(err);
});

if (data) { req.write(data); }

req.end(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:17:03.433

**编辑**

如果您希望请求完全相同，只是没有应用程序实际访问请求的服务器，然后尝试使用[nock](https://github.com/flatiron/nock)它将拦截您定义的请求并返回您定义的数据。

* * *

*原答案：*

我认为您正在寻找的是更像这样的东西：

```
var old_request = http.request;

http.request = function(options, callback){
    var rule = match_rule(options);
    if(rule){
        var res = new events.EventEmitter(),
            req = new events.EventEmitter();
        res.headers = rule.headers || {'Content-Type': 'text/html'};
        req.end = function(){ 
            if(callback) callback(res);
            res.emit('data', rule.body || '');
            res.emit('end'); 
        };
        return req;
    } else {
        return old_request.call(http, options, callback);
    }
}; 
```

# winapi - 使用 Win32 API 检测视频播放？

> ID：14784221
> 
> 赞同：0
> 
> 时间：2013-02-09T02:07:38.497
> 
> 标签：winapi, directshow, ms-media-foundation

有没有办法使用 Win32 API 检测视频播放是否正在运行？

对于音频，我可以通过以下方式检测播放过程：

1.  使用 MMDeviceEnumerator 枚举播放设备，
2.  对于每个设备，使用 IaudiosessionManager 枚举会话。

我想为视频播放做类似的事情。理想情况下，适用于任何应用程序的方法，但如果不可能，适用于特定框架（DirectShow、Media Foundation 等）的方法是可以的。

谢谢。

# cidr - CIDR 条目和路由器

> ID：14784223
> 
> 赞同：1
> 
> 时间：2013-02-09T02:08:01.290
> 
> 标签：cidr

路由器在其转发表中具有以下 CIDR 条目： 地址/掩码 下一跳 135.46.56.0/22 接口 A 135.46.60.0/22 接口 B 135.46.40.0/23 接口 C 默认接口 D 路由器将其转发到哪里，如果具有以下 IP 地址的数据包到达：135.46.63.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:55:42.093

它转到接口 B，因为您将 135.46.60.0/22 指向它。

```
Network: 135.46.60.0/22
First IP: 135.46.60.1
Last IP: 135.46.63.254
Broadcast: 135.46.63.255 
```

你可以看到这个地址在这个范围内。永远记住doh，将采取最具体的路线。

# iphone - iOS不更新标签文本

> ID：14784228
> 
> 赞同：0
> 
> 时间：2013-02-09T02:08:38.857
> 
> 标签：iphone, ios, objective-c, uilabel, touchxml

我在这里解析 xml，想知道为什么这不起作用。在我的请求对象中，我这样做

```
- (Request *)performRequest{
NSError *error;
CXMLDocument *parser = [[CXMLDocument alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://production.shippingapis.com/ShippingAPITest.dll?API=TrackV2&XML=%3CTrackRequest%20USERID=%22827ACSTU1155%22%3E%3CTrackID%20ID=%22EJ958088694US%22%3E%3C/TrackID%3E%3C/TrackRequest%3E"] options:0 error:&error];
if (error) {
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"An error has occured. Try again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
}
NSArray *arr = [parser nodesForXPath:@"//TrackResponse/TrackInfo/TrackSummary" error:nil];
self.keyVal = [arr objectAtIndex:0];
NSLog(@"%@", keyVal);

return self;
} 
```

nslog 正在显示

```
<CXMLElement 0x2005c7c0 [0x2005cfb0] TrackSummary <TrackSummary>Your item was delivered at 1:39 pm on June 1 in WOBURN MA 01815.</TrackSummary>> 
```

我期望的。但是，在我的视图控制器中，我这样做了。

```
- (void)viewDidLoad{
Request *re = [[Request alloc]init];
[re performRequest];
[self performSelectorOnMainThread:@selector(updateUI:) withObject:re waitUntilDone:NO];
}

- (void)updateUI:(Request *)re{
self.info1.text = re.keyVal;
NSLog(@"%@", re.keyVal);
} 
```

但是，标签 (info1) 和日志显示 (null)。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:49:33.607

我通过将标题中的属性声明为自己解决了这个问题

```
(nonatomic, retain) 
```

# git - git：只推送特定的标签

> ID：14784229
> 
> 赞同：15
> 
> 时间：2013-02-09T02:09:35.380
> 
> 标签：git, tags

AFAIK，`git push --tag`将 refs/tags 下的每个标签推送到远程。我想知道git中是否有办法只推送一些匹配通配符或正则表达式的标签？

例如，我的仓库有标签`v1.0`、、`v1.1`和。我只想推。我试过`v2.0``v2.1``v2.*`

```
git push <repo> refs/tags/v2.* 
```

并得到错误

> 致命：refspec 的远程部分在 refs/tags/v2.* 中不是有效名称

当然，我总能做到

```
cd .git && ls refs/tags/v2.* | xargs git push <repo> 
```

但这并没有气味。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T03:13:10.960

```
git tag | grep '^v2\.' | xargs --no-run-if-empty  git push <repo> 
```

*   `.git`可能不是目录，它可能根本不存在。子模块有指向根存储库的文件。或者你可以`GIT_DIR`设置到其他地方。
*   当没有标签符合您的条件时，您不想进行推送。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-03-22T16:44:54.117

```
git push <remote> tag <tag> 
```

在你的情况下，它将是

```
git push origin tag v2.* 
```

# c - c 系统调用在 if 语句之前运行

> ID：14784231
> 
> 赞同：-4
> 
> 时间：2013-02-09T02:10:29.523
> 
> 标签：c

所以这是我的问题，鉴于此代码，在请输入您的姓名之前添加的几乎所有内容都将被忽略，并且自动运行的第一条指令（甚至没有首先检查 x 是否为 5，输入您的姓名，然后是前面的指令到它运行。因此，如果程序的第一行是 printf，那将被忽略并立即要求输入，然后打印 printf 语句，即使它是第一个。请帮助

```
int main(int argc, char** argv)
{
    char val[70];
    int x=3;
    if(x>5)
    {
        if(write(1, "Please input your name", 22)!=22)
        {
            return -1;
        }

        if(read(0, val, 36) < 0)
        {}

        if(write(1, val, 36)!=36)
        {}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:16:49.873

printf 适用于`stdout`FILE*。read() 和 write() 调用直接作用于文件描述符。

FILE* 通常是缓冲的，这意味着您 printf 的内容驻留在程序的缓冲区中，直到它被刷新。而 write() 将数据直接发送到操作系统，而在您的应用程序中没有任何缓冲。

所以刷新 FILE* 缓冲区以使输出出现：

```
int main(int argc, char** argv)
{
  char val[70];
  int x=3;
  printf("Hello");
  fflush(stdout); 
```

如果 stdout 是您的终端，它通常会在您编写换行符时自动刷新，例如 `printf("Hello\n");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:20:33.953

你所说的不是发生的事情。您的 main 函数将立即返回 0。这是一个调试示例：

```
(gdb) break main
Breakpoint 1 at 0x40074b: file ./test.cpp, line 6.
(gdb) run
Starting program: /tmp/test 

Breakpoint 1, main (argc=1, argv=0x7fffffffe528) at ./test.cpp:6
6       int x=3;
Missing separate debuginfos, use: debuginfo-install glibc-2.16-28.fc18.x86_64 libgcc-4.7.2-8.fc18.x86_64 libstdc++-4.7.2-8.fc18.x86_64
(gdb) next
7       if(x>5)
(gdb) 
19  }
(gdb) 
0x00007ffff7744a05 in __libc_start_main () from /lib64/libc.so.6
(gdb) 
Single stepping until exit from function __libc_start_main,
which has no line number information.
[Inferior 1 (process 4962) exited normally]
(gdb) 
```

事实上，启用优化后，`if`其主体的整个检查都被作为死代码消除，从而产生了一个不错的 main 函数，如下所示：

```
int main()
{
    return 0;
} 
```

通过查看二进制代码 ( `objdump -CD -M intel`) 可以确认这一点：

```
00000000004004c0 <main>:
  4004c0:       31 c0                   xor    eax,eax
  4004c2:       c3                      ret    
  4004c3:       90                      nop 
```

也许现在是您学习如何调试代码的好时机。首先阅读一些[GDB 文档](http://www.gnu.org/software/gdb/documentation/)。

祝你好运！

# android - 在 beforeTextChange 中，值已经改变

> ID：14784233
> 
> 赞同：2
> 
> 时间：2013-02-09T02:10:53.783
> 
> 标签：android, android-edittext, textwatcher

我在 EditText 上有一个 TextWatcher。在 beforeTextChanged 中，我发现 EditText 值已更改。这是一段代码：

```
@Override
public void beforeTextChanged (CharSequence s, int start, int lengthBefore, int lengthAfter)
{
//      restoreValue = text.getText().toString();
  String restoreValue = s.toString();
  System.out.println ("restore |" + restoreValue + "|");
} 
```

在此函数中，调试输出显示的是修改后的字符串，而不是 EditText 的原始值。无论我是从“text”（即 EditText 小部件）还是从“s”获取值，都是一样的。

有人对此有可能的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:31:52.873

尝试下面的代码它正在工作

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                if(count>0)
                Log.e("MIS",""+s.toString().substring(0,count-1));
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T17:02:51.593

原来答案很简单。Android 试图变得聪明，认为您的插入应该是一个单词，并添加一个空格将其与其他文本分开。因此，它首先插入空格（可能是两个空格 - 在选定区域的每一端一个），然后插入粘贴缓冲区文本。

这些操作中的每一个都会导致对 beforeTextChanged 的​​单独调用。onTextChanged 和 afterTextChanged 相同。

因此，对于粘贴操作，您最多可以获得三组回调。

# gcc - llvm中的链接

> ID：14784234
> 
> 赞同：0
> 
> 时间：2013-02-09T02:11:24.920
> 
> 标签：gcc, llvm, clang, llvm-gcc

我正在使用用 LLVM 编写的分析器对 Spec2K6 基准测试中的一些文件进行分析，并且无法理解链接多个 .bc 文件的正确方法是什么。

例如，benchmark 有 concat.c，它使用了 xmalloc.c 中定义的 xmalloc 方法，它使用了来自 xexit.c 的 xexit 方法

在我分析它们之前，我正在使用以下命令链接多个 .bc 文件 -

```
CFLAGS='-D_GNU_SOURCE -D_XOPEN_SOURCE=600 -c -Wall -pedantic -Wno-long-long -g -O0 -    I/net/x/silkyar/llvm/include -I/net/403.gcc/src'
clang $CFLAGS -emit-llvm -c 403.gcc/src/concat.c -o concat.bc
clang $CFLAGS -emit-llvm -c 403.gcc/src/xexit.c -o xexit.bc
clang $CFLAGS -emit-llvm -c 403.gcc/src/xmalloc.c -o xmalloc.bc 
llvm-link concat.bc xexit.bc xmalloc.bc -o a.bc
llc a.bc -o a.s
g++ -o final a.s
./final 
```

但这失败了，llvm-link：“xexit.bc”中的链接错误：链接名为“xexit”的全局变量：符号多重定义！/tmp/ccUldT0Y.o:(.debug_info+0​​x1e): 未定义引用`.Lline_table_start0' /tmp/ccUldT0Y.o:(.debug_info+0x42f): undefined reference to`.Lline_table_start1' /tmp/ccUldT0Y.o:(.debug_info+0​​x4a0): 未定义引用 `.Lline_table_start2' collect2: ld 返回 1 退出状态

谁能指导我llvm-link的工作原理。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:11:57.163

一般来说，`llvm-link`工作正常。这是一个简单的演示（几天前从主干构建的 LLVM）：

```
$ cat lib.c 
int libfoo(int x) {
    return x * 2;
}

$ cat user.c
int libfoo(int);

int bar(int a, int b) {
    return a + libfoo(b);
}
$ clang -emit-llvm -c user.c -o user.bc
$ clang -emit-llvm -c lib.c -o lib.bc
$ llvm-link lib.bc user.bc -o linked.bc
$ llvm-dis linked.bc
$ cat linked.ll
; ModuleID = 'linked.bc'
target datalayout = "e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

define i32 @libfoo(i32 %x) nounwind uwtable {
entry:
  %x.addr = alloca i32, align 4
  store i32 %x, i32* %x.addr, align 4
  %0 = load i32* %x.addr, align 4
  %mul = mul nsw i32 %0, 2
  ret i32 %mul
}

define i32 @bar(i32 %a, i32 %b) nounwind uwtable {
entry:
  %a.addr = alloca i32, align 4
  %b.addr = alloca i32, align 4
  store i32 %a, i32* %a.addr, align 4
  store i32 %b, i32* %b.addr, align 4
  %0 = load i32* %a.addr, align 4
  %1 = load i32* %b.addr, align 4
  %call = call i32 @libfoo(i32 %1)
  %add = add nsw i32 %0, %call
  ret i32 %add
} 
```

因此，您必须仔细检查您的特定代码是否存在符号重复、缺失等。

# exception - 创建程序集以生成代码（反射），但出现未知异常

> ID：14784239
> 
> 赞同：1
> 
> 时间：2013-02-09T02:12:42.580
> 
> 标签：exception, reflection, .net-assembly, implicit

我正在使用以下内容在运行时生成一个方法：

```
System.Reflection.Assembly currentAssembly = System.Reflection.Assembly.GetExecutingAssembly();
System.CodeDom.Compiler.CompilerParameters compilerParams = new System.CodeDom.Compiler.CompilerParameters();
compilerParams.GenerateExecutable = false;
compilerParams.GenerateInMemory = true;
compilerParams.ReferencedAssemblies.Add(currentAssembly.Location);
System.CodeDom.Compiler.CodeDomProvider provider = System.CodeDom.Compiler.CodeDomProvider.CreateProvider("C#");
System.CodeDom.Compiler.CompilerResults results = provider.CompileAssemblyFromSource(compilerParams, code);
System.Reflection.Assembly newAssembly = results.CompiledAssembly;
newAssembly.GetType("NewOut.NewClass").GetMethod("newMethod").Invoke(null, args); 
```

它接受一个“代码”字符串，通常工作正常。然而，一些动态生成的代码显然拒绝编译，在访问 CompiledAssembly 时抛出此异常：

“无法加载文件或程序集 'file:///C:\Documents and Settings\Dan\Local Settings\Temp\tkitti7h.dll' 或其依赖项之一。系统找不到指定的文件。”

代码应该编译。

此代码确实编译，并且工作正常：

```
using Environment;

namespace NewOut{
public class NewClass{
    public NewClass(){
    }
    public static void newMethod(Color[,] data){
        int width = data.GetLength(0); int height = data.GetLength(1); for(int x = 0; x < width; x++){ for(int y = 0; y < height; y++){ Color brighter = data[x, y].brighten(0.4f).setRed(127); data[x, y] = brighter.toward(new Color("gray", 0.5), 0.5f); } }
    }
}
} 
```

而这个其他相同的代码，除了调用不同的 Color 构造函数之外，会引发异常：

```
using Environment;

namespace NewOut{
public class NewClass{
    public NewClass(){
    }
    public static void newMethod(Color[,] data){
        int width = data.GetLength(0); int height = data.GetLength(1); for(int x = 0; x < width; x++){ for(int y = 0; y < height; y++){ Color brighter = data[x, y].brighten(0.4f).setRed(127); data[x, y] = brighter.toward(new Color("gray"), 0.5f); } }
    }
}
} 
```

显然，如果我将动态生成的代码粘贴到实际的 cs 文件中，它会编译并运行良好；该单参数构造函数没有任何问题。

当然，我用谷歌搜索过，异常本身很常见，并且与缓存 dll 等有关，但我无法找出如何查看实际动态调用的编译器所抱怨的内容。我需要查看动态编译错误，因为动态生成的代码显然没有实际问题。

那么如何查看实际错误呢？

我应该注意除了 Color(string) 构造函数之外，当我尝试在动态编译的代码中使用它时，从字符串到 Color 的隐式转换也会引发 CompiledAssembly 异常。我怀疑那里有连接，特别是因为我过去注意到 C# 编译器有时会无缘无故地调用隐式字符串到颜色的转换（优化错误？）。但不管怎样，我不知道与隐式转换相关的动态编译的任何限制。

除非有人立即知道为什么我的字符串构造函数和字符串隐式转换在动态编译时失败，否则我希望有人能给我简单的指导来查看实际的动态编译器错误，因为“无法加载文件或程序集”没有帮助。

非常感谢！

# php - PHP - 在合并内部数组时使多维数组唯一

> ID：14784240
> 
> 赞同：0
> 
> 时间：2013-02-09T02:12:50.247
> 
> 标签：php, arrays, sorting, merge, unique

**初始数组：**

```
Array 
( 
    [0] => Array ( 
        [0] => "Kate" 
        [1] => Array ( [0] => 1 [1] => 30 [2] => 11 ) 
        [2] => "Seattle" 
    ) 
    [1] => Array ( 
        [0] => "Kate" 
        [1] => Array ( [0] => 100 [1] => 7 [2] => 55 ) 
        [2] => "Seattle" 
    ) 
    [2] => Array ( 
        [0] => "Mike" 
        [1] => Array ( [0] => 1 [1] => 2 [2] => 13 ) 
        [2] => "New York" 
    ) 
    [3] => Array ( 
        [0] => "Paul" 
        [1] => Array ( [0] => 5 [1] => 34 [2] => 9 ) 
        [2] => "Chicago" 
    ) 
    [4] => Array ( 
        [0] => "Mike" 
        [1] => Array ( [0] => 1 [1] => 30 [2] => 13 ) 
        [2] => "New York" 
    ) 
) 
```

**期望的输出：**

```
Array 
( 
    [0] => Array ( 
        [0] => "Kate" 
        [1] => Array ( [0] => 1 [1] => 30 [2] => 11 [3] => 100 [4] => 7 [5] => 55 ) 
        [2] => "Seattle" 
    ) 
    [1] => Array ( 
        [0] => "Mike" 
        [1] => Array ( [0] => 1 [1] => 2 [2] => 13 [3] => 30 ) 
        [2] => "New York" 
    ) 
    [2] => Array ( 
        [0] => "Paul" 
        [1] => Array ( [0] => 5 [1] => 34 [2] => 9 ) 
        [2] => "Chicago" 
    ) 
) 
```

我想根据 [0] 中的字符串值简化数组，例如“Kate”、“Mike”或“Paul”。在这样做的同时，我想合并 [1] 中的数组并使其独一无二，就像“Mike”在 Desired Output 中的数组一样。

我不知道该做什么或从哪里开始。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:36:40.507

好的，您正在处理数组，因此您可能需要使用[修改数组的函数](http://www.php.net/manual/en/ref.array.php)。您很可能还需要一个[`foreach`](http://www.php.net/manual/en/control-structures.foreach.php)循环来遍历数组。辅助变量也可能有用。

它类似于儿童玩具，他们将物体插入各种形状。只需将值相互匹配即可。如果它们合适，则合并它们。只有当你不关心学习它是困难的。

# c# - JSON 无法将 JSON 数组反序列化为类型

> ID：14784241
> 
> 赞同：3
> 
> 时间：2013-02-09T02:12:56.750
> 
> 标签：c#, json, json.net

即使在尝试了多种方法之后，我仍然在尝试让这个 JSON 反序列化时遇到问题。

这是 Web 服务返回的 JSON：

```
[
   {
      "data":[
         {
            "osis":"Matthew 5:5-8",
            "content":"<p><span id=\"unique-id-23240\" class=\"text Matt-5-5\"><span class=\"woj\"><sup class=\"versenum\">5\u00a0<\/sup>\u201cBlessed are the <sup class='crossreference' value='(<a href=\"#cunique-id-23240A\" title=\" A\">A<\/a>)'>(<a href=\"#cunique-id-23240A\" title=\" A\">A<\/a>)<\/sup>meek, for they <sup class='crossreference' value='(<a href=\"#cunique-id-23240B\" title=\" B\">B<\/a>)'>(<a href=\"#cunique-id-23240B\" title=\" B\">B<\/a>)<\/sup>shall inherit the earth.<\/span><\/span><\/p> <p><span id=\"unique-id-23241\" class=\"text Matt-5-6\"><span class=\"woj\"><sup class=\"versenum\">6\u00a0<\/sup>\u201cBlessed are those who hunger and <sup class='crossreference' value='(<a href=\"#cunique-id-23241C\" title=\" C\">C<\/a>)'>(<a href=\"#cunique-id-23241C\" title=\" C\">C<\/a>)<\/sup>thirst <sup class='crossreference' value='(<a href=\"#cunique-id-23241D\" title=\" D\">D<\/a>)'>(<a href=\"#cunique-id-23241D\" title=\" D\">D<\/a>)<\/sup>for righteousness, for they shall be satisfied.<\/span><\/span><\/p> <p><span id=\"unique-id-23242\" class=\"text Matt-5-7\"><span class=\"woj\"><sup class=\"versenum\">7\u00a0<\/sup>\u201cBlessed are <sup class='crossreference' value='(<a href=\"#cunique-id-23242E\" title=\" E\">E<\/a>)'>(<a href=\"#cunique-id-23242E\" title=\" E\">E<\/a>)<\/sup>the merciful, for they shall receive mercy.<\/span><\/span><\/p> <p><span id=\"unique-id-23243\" class=\"text Matt-5-8\"><span class=\"woj\"><sup class=\"versenum\">8\u00a0<\/sup>\u201cBlessed are <sup class='crossreference' value='(<a href=\"#cunique-id-23243F\" title=\" F\">F<\/a>)'>(<a href=\"#cunique-id-23243F\" title=\" F\">F<\/a>)<\/sup>the pure in heart, for <sup class='crossreference' value='(<a href=\"#cunique-id-23243G\" title=\" G\">G<\/a>)'>(<a href=\"#cunique-id-23243G\" title=\" G\">G<\/a>)<\/sup>they shall see God.<\/span><\/span><\/p>",
            "footnotes":[

            ],
            "crossrefs":[
               "<li id=\"cunique-id-23240A\"><a href=\"#unique-id-23240\" title=\" Matthew 5:5\">Matthew 5:5<\/a> : <a href=\"\/passage\/?search=Ps 37:11&version=ESV\" data-bibleref=\"Ps.37.11\">Ps. 37:11<\/a><\/li>\n",
               "<li id=\"cunique-id-23240B\"><a href=\"#unique-id-23240\" title=\" Matthew 5:5\">Matthew 5:5<\/a> : <a href=\"\/passage\/?search=Ps 37:11&version=ESV\" data-bibleref=\"Ps.37.11\">Ps. 37:11<\/a><\/li>\n",
               "<li id=\"cunique-id-23241C\"><a href=\"#unique-id-23241\" title=\" Matthew 5:6\">Matthew 5:6<\/a> : <a href=\"\/passage\/?search=Ps 42:2, Isa 55:1-Isa 55:2, John 7:37&version=ESV\" data-bibleref=\"Ps.42.2,Isa.55.1-Isa.55.2,John.7.37\">Ps. 42:2; Isa. 55:1, 2; John 7:37<\/a><\/li>\n",
               "<li id=\"cunique-id-23241D\"><a href=\"#unique-id-23241\" title=\" Matthew 5:6\">Matthew 5:6<\/a> : <a href=\"\/passage\/?search=2Tim 2:22, Matt 6:33&version=ESV\" data-bibleref=\"2Tim.2.22,Matt.6.33\">2 Tim. 2:22; [ch. 6:33]<\/a><\/li>\n",
               "<li id=\"cunique-id-23242E\"><a href=\"#unique-id-23242\" title=\" Matthew 5:7\">Matthew 5:7<\/a> : <a href=\"\/passage\/?search=Matt 18:33, Matt 25:34-Matt 25:36, Prov 19:17, Luke 6:36, 2Tim 1:16, Heb 6:10&version=ESV\" data-bibleref=\"Matt.18.33,Matt.25.34-Matt.25.36,Prov.19.17,Luke.6.36,2Tim.1.16,Heb.6.10\">ch. 18:33; 25:34-36; Prov. 19:17; Luke 6:36; 2 Tim. 1:16; Heb. 6:10<\/a><\/li>\n",
               "<li id=\"cunique-id-23243F\"><a href=\"#unique-id-23243\" title=\" Matthew 5:8\">Matthew 5:8<\/a> : <a href=\"\/passage\/?search=Ps 24:4, 2Tim 2:22, 1Pet 1:22&version=ESV\" data-bibleref=\"Ps.24.4,2Tim.2.22,1Pet.1.22\">Ps. 24:4; 2 Tim. 2:22; [1 Pet. 1:22]<\/a><\/li>\n",
               "<li id=\"cunique-id-23243G\"><a href=\"#unique-id-23243\" title=\" Matthew 5:8\">Matthew 5:8<\/a> : <a href=\"\/passage\/?search=Heb 12:14, 1John 3:2-1John 3:3, Rev 22:4, 1Cor 13:12&version=ESV\" data-bibleref=\"Heb.12.14,1John.3.2-1John.3.3,Rev.22.4,1Cor.13.12\">Heb. 12:14; 1 John 3:2, 3; Rev. 22:4; [1 Cor. 13:12]<\/a><\/li>\n"
            ]
         },
         {
            "osis":" Mark 3:9",
            "content":"<p><span id=\"unique-id-24294\" class=\"text Mark-3-9\"><sup class=\"versenum\">9\u00a0<\/sup>And he told his disciples to <sup class='crossreference' value='(<a href=\"#cunique-id-24294A\" title=\" A\">A<\/a>)'>(<a href=\"#cunique-id-24294A\" title=\" A\">A<\/a>)<\/sup>have a boat ready for him because of the crowd, lest they <sup class='crossreference' value='(<a href=\"#cunique-id-24294B\" title=\" B\">B<\/a>)'>(<a href=\"#cunique-id-24294B\" title=\" B\">B<\/a>)<\/sup>crush him,<\/span><\/p>",
            "footnotes":[

            ],
            "crossrefs":[
               "<li id=\"cunique-id-24294A\"><a href=\"#unique-id-24294\" title=\" Mark 3:9\">Mark 3:9<\/a> : <a href=\"\/passage\/?search=Mark 6:32, Mark 6:45, Mark 8:10&version=ESV\" data-bibleref=\"Mark.6.32,Mark.6.45,Mark.8.10\">ch. 6:32, 45 (Gk.); 8:10 (Gk.)<\/a><\/li>\n",
               "<li id=\"cunique-id-24294B\"><a href=\"#unique-id-24294\" title=\" Mark 3:9\">Mark 3:9<\/a> : <a href=\"\/passage\/?search=Mark 5:24, Mark 5:31&version=ESV\" data-bibleref=\"Mark.5.24,Mark.5.31\">ch. 5:24, 31<\/a><\/li>\n"
            ]
         }
      ]
   }
] 
```

很丑我知道。不幸的是，它是别人的网络服务，所以我无能为力。我一直在搞乱 C# 模型类，似乎无法让它工作。

调用方法：

```
 2013-02-08 20:08:32.768 VersesiOS[36931:c07] Unhandled managed exception: Cannot deserialize JSON array into type 'Verses.Core.BibleGatewayVerses'. (Newtonsoft.Json.JsonSerializationException)
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureArrayContract (System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateList (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract, Newtonsoft.Json.Serialization.JsonProperty member, System.Object existingValue, System.String reference) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract, Newtonsoft.Json.Serialization.JsonProperty member, System.Object existingValue) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize (Newtonsoft.Json.JsonReader reader, System.Type objectType) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonSerializer.DeserializeInternal (Newtonsoft.Json.JsonReader reader, System.Type objectType) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonSerializer.Deserialize (Newtonsoft.Json.JsonReader reader, System.Type objectType) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.DeserializeObject (System.String value, System.Type type, Newtonsoft.Json.JsonSerializerSettings settings) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.DeserializeObject[BibleGatewayVerses] (System.String value, Newtonsoft.Json.JsonSerializerSettings settings) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonConvert.DeserializeObject[BibleGatewayVerses] (System.String value) [0x00000] in <filename unknown>:0 
  at Verses.Core.BibleGateway+Response.GetVerseText (System.String requestUrl) [0x00047] in /Users/pierceboggan/Desktop/Verses/Verses.Core/Verses.Core/Web Services/BibleGateway.cs:111 
  at Verses.Core.BibleGateway.GetVerseText (System.String searchKeywords) [0x00012] in /Users/pierceboggan/Desktop/Verses/Verses.Core/Verses.Core/Web Services/BibleGateway.cs:43 
```

型号类：

```
[JsonObject(MemberSerialization.OptIn)]
public class BibleGatewayVerse
{
    [JsonProperty("osis")]
    public string Reference { get; set; }
    [JsonProperty("content")]
    public string Content { get; set; }
    [JsonProperty("footnotes")]
    public List<string> Footnotes { get; set; }
    [JsonProperty("crossrefs")]
    public List<string> CrossReferences { get; set; }
}

[JsonObject(MemberSerialization.OptIn)]
public class BibleGatewayVerses
{
    [JsonProperty("data")]
    public List<BibleGatewayVerse> Verses;
} 
```

我使用过诸如 json2csharp.com 之类的工具，它们会生成相同的东西。我也玩弄过使用数组而不是 List，但无济于事。此外，我还尝试将脚注列表替换为类型对象（由 json2sharp 推荐）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:41:31.243

您的 Json 数据包装在一个数组中，因此您需要反序列化为您的类型的数组

```
JsonConvert.DeserializeObject<BibleGatewayVerses[]>(jsonData); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T09:50:34.887

我认为你应该像这样跟随

```
public class BibleGatewayVerse
{

    [JsonProperty("data")]
    public Datum[] Data { get; set; }
}

public class Datum
{

    [JsonProperty("osis")]
    public string Osis { get; set; }

    [JsonProperty("content")]
    public string Content { get; set; }

    [JsonProperty("footnotes")]
    public object[] Footnotes { get; set; }

    [JsonProperty("crossrefs")]
    public string[] Crossrefs { get; set; }
} 
```

# javascript - innerhtml 提交按钮

> ID：14784244
> 
> 赞同：1
> 
> 时间：2013-02-09T02:13:23.907
> 
> 标签：javascript, forms, submit, innerhtml

### 我想要做什么

我正在使用 a`<form>`来研究地址，最终将其显示在 Google 地图上。

在用户进行初始输入后，我将他们引向一个`search.php`页面，其中地址参数被分成它们的组件（即邮政编码、城市），它​​们是`<input type="text" readonly>`. 还有一个显示地址的谷歌地图，询问用户显示的地址是否正确。他们可以在`Yes`或之间进行选择`No`。

如果地址被判断为不正确，他们点击一个`No`按钮，使各种`<input type="text">`可修改（删除`readonly`属性）。

一旦他们点击`No`，`<div>`包含提交按钮的按钮就可以通过`document.getElementById.innerHTML`和 按钮访问，`Yes`并被`No`转换为一个新`<input type="submit" value="Look it up">`按钮。

### 我的问题！

这个新`Look it up`按钮不能用作提交按钮！！当我点击它时没有任何反应。

请帮忙？

### 代码：

我的重置功能：

```
function reset_search() {
  document.getElementById('number').removeAttribute("readonly");
  document.getElementById('street').removeAttribute("readonly");
  document.getElementById('apt').removeAttribute("readonly");
  document.getElementById('postal').removeAttribute("readonly");
  document.getElementById('city').removeAttribute("readonly");

  document.getElementById('lookup').setAttribute('action', './search.php');
  var new_submit = 'Please correct the mistakes above and click on the button below to launch another search<br><input type="submit" name="submit" value="Look it up">';
  document.getElementById('submit_button').innerHTML=new_submit;
} 
```

我的表格：

```
<form method="post" id="lookup" name="lookup" action="./display.php">
.........
<tr>
    <td valign="top" align="center" colspan="4">
    <div id="submit_button">
    According to the map below, is the address correct?<br>
        <input type="submit" value="Yes" />&nbsp;<input type="button" value="No" onclick="reset_search()" />
    </div>
    </td>
</tr>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:41:42.063

使用调试器更改后，请仔细查看修改后的源代码。只要提交按钮在表单内，它就会提交表单。

[http://jsfiddle.net/bighostkim/VC6XJ/](http://jsfiddle.net/bighostkim/VC6XJ/)

```
<form action="foo">
    <input type="submit" onclick="alert(this.form)" />
</form>
    <input type="submit" onclick="alert(this.form)"/>
<form action="bar">
    <input type="submit" onclick="alert(this.form)" />
</form> 
```

正如我在这里试验的那样，将 onclick="alert(this.form)" 添加到您的提交按钮。

如果它显示FormElement，并且什么都不做，这是w3c标准中的大问题。

如果它显示为 null 并且什么都不做，那么您的提交按钮就在表单之外。

# google-earth - Matlab Google Earth Toolbox批量导出kml文件

> ID：14784247
> 
> 赞同：0
> 
> 时间：2013-02-09T02:13:59.757
> 
> 标签：google-earth, matlab

我正在运行一个循环以使用 matlab googleearth 工具箱的 ge_scatter 函数创建单独的 kml 文件（来自数百个点数据文件），如下所示：

```
files = dir('*.txt');
for k = 1:numel(files)
Data = load(files(k).name);
x = Data(:,1);
y = Data(:,2);
kmlStr = ge_scatter(x,y);
ge_output(files(k).name,[kmlStr])
end 
```

不幸的是，使用 files(k).name 不会给出输出（在文本文件中具有相同的名称），因为传统的方法是编写：

```
ge_output('filename.kml',[kmlStr]) 
```

但在这种情况下，每次循环运行时都会替换输出文件。谁能告诉我如何运行循环，以便我获得具有相应文件名的输出？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:01:31.137

假设您要使用的输出文件名是`myFile`. 这是您可以执行的操作：

```
files = dir('*.txt');
for k = 1:numel(files)
    Data = load(files(k).name);
    x = Data(:,1);
    y = Data(:,2);
    kmlStr = ge_scatter(x,y);
    ge_output(['myFile' num2str(k) '.kml'],[kmlStr])
end 
```

希望这可以帮助。

# api - OAuth2 需要一个返回 URL，但我没有提供。Windows 8 手机开发

> ID：14784248
> 
> 赞同：1
> 
> 时间：2013-02-09T02:14:02.060
> 
> 标签：api, oauth-2.0, windows-phone-8

我正在开发一个使用 API 访问某些数据的项目。API 请求一个返回 url，这样当它通过身份验证后，它可以将信息发送回一个 URL……但是，在电话上……我为数据返回到哪个 URL 提供？

此应用程序是在 Visual Studio 2012 Express 中用 C# 编写的 Windows 8 手机应用程序。

有任何想法吗？我实在是太不了解了...

这是我正在使用的文档：[https ://developers.podio.com/authentication/username_password](https://developers.podio.com/authentication/username_password)

# excel - Excel VB循环文件夹并运行宏

> ID：14784252
> 
> 赞同：1
> 
> 时间：2013-02-09T02:15:49.613
> 
> 标签：excel, vba

我尝试了这段代码，似乎它不起作用。谁能告诉我为什么？

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ActiveWorkbook.Path & "C:\Macro\"
    Filename = Dir(Pathname & "*.xls")
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & Filename)
        DoWork wb
        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub

Sub DoWork(wb As Workbook)
    With wb
       Range("A1").Select
        ActiveCell.FormulaR1C1 = "Name"
        Range("B1").Select
        ActiveCell.FormulaR1C1 = "Anil"
        Range("A2").Select
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:37:40.763

我发现了 2 个值得关注的领域。第一的，

**路径名 = ActiveWorkbook.Path & "C:\Macro\"**

这将返回类似于 "C:\Users\ [USER NAME] \ [FILELOCATION]C:\Macro\" 的内容（这是我的输出 C:\Users\Developer\DesktopC:\Macro\"）

一个简单的检查方法是放置

**消息框路径名**

后

**路径名 = ActiveWorkbook.Path & "C:\Macro\"**

喜欢

**路径名 = ActiveWorkbook.Path & "C:\Macro\"**

**消息框路径名**

并运行代码。这将向您显示主要问题的路径名。如果您计划打开/修改的 excel 文件与 ActiveWorkbook 位于同一目录中，则可以正常工作

**路径名 = ActiveWorkbook.Path & "\"**

（完成后删除 Msgbox 路径名。）

第二个关注领域是 Do While 循环。您当前将其设置为仅在文件名不等于“”时执行循环。但是，当您进入循环时，您使用 Filename = Dir() 将 Filename 设置为 ""。如果您不打算遍历文件夹，则可以使用单个 IF 语句。如果您确实计划遍历该文件夹，请继续执行 Do While 语句，但最终需要修改 Filename = Dir()。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:39:06.827

这可能是你的问题：

`Pathname = ActiveWorkbook.Path & "C:\Macro\"`

`ActiveWorkbook.Path`已经返回`C:\YourPathToWorkbook`，所以你`Pathname`可能是这样的：

`C:\yourpathtoworkbookC:\Macro\`

您应该使用 F8 单步执行代码，并在变量以黄色突出显示时将鼠标悬停在变量上。

# ios - 使用 GKMatchMakerViewController initWithRequest 时，配对邀请好友立即失败

> ID：14784253
> 
> 赞同：2
> 
> 时间：2013-02-09T02:15:53.947
> 
> 标签：ios, game-center, gkmatchmaker

这是我关于 Stack Overflow 的第一个问题，所以提前致谢。我正在为我的 iPhone 游戏添加简单的 1v1 多人游戏功能，但我正在为 Matchmaker 功能而苦苦挣扎。目前我有一个 ViewController 作为默认 MatchMaker 的代表。我让 matchmaker 视图控制器毫无问题地出现，但是当我尝试邀请我作为朋友的另一个 Sandbox 帐户时，它立即失败。接受对话框永远不会在其他设备上弹出，并且我的邀请处理程序永远不会被调用。这是我用来调用 Match Maker 的代码片段：

```
- (IBAction)hostMatch: (id) sender
{
    GKMatchRequest *request = [[GKMatchRequest alloc] init];
    request.minPlayers = 2;
    request.maxPlayers = 2;

    GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithMatchRequest:request];
    mmvc.matchmakerDelegate = self;

    [self presentViewController:mmvc animated:YES completion:nil];
} 
```

不太确定我做错了什么，但这可能是愚蠢的。任何帮助，将不胜感激。谢谢。

# java - 每次我尝试在 Jenkins 上运行测试用例时出现 Java 错误

> ID：14784256
> 
> 赞同：1
> 
> 时间：2013-02-09T02:16:27.060
> 
> 标签：java, maven, jenkins, selenium-webdriver, saucelabs

每次我尝试使用 Jenkins 执行测试用例时，我的测试报告中都会显示以下 Java 错误。

错误一：

java.lang.IllegalArgumentException：没有枚举常量类 org.openqa.selenium.Platform.Windows 2003 在 org.openqa.selenium.Platform.valueOf(Platform.java: 30) 在 WebDriverWithHelperTest.setUp(WebDriverWithHelperTest.java:76) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) ) 在 java.lang.Thread.run(Thread.java:619) ... 删除了 22 个堆栈帧

错误2：

java.lang.NullPointerException：方法不应该在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) 在java.lang.Thread.run(Thread.java:619) ... 删除了 17 个堆栈帧

我可以毫无问题地使用 Eclipse 和 Maven 执行这些测试用例。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:07:06.090

对于 Jenkins 作业，检查注入的环境变量，并将它们与从 eclipse 运行作业时设置的所有 jar 和其他环境变量进行比较。在运行 Jenkins 的测试时，确保您拥有所需的一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:03:37.077

您可以尝试从此更改代码：

```
capabilities.setCapability(CapabilityType.PLATFORM, Platform.valueOf(System.getenv("SELENIUM_PLATFORM")); 
```

对此：

```
capabilities.setCapability(CapabilityType.PLATFORM, System.getenv("SELENIUM_PLATFORM")); 
```

Jenkins 插件发送的是平台的值，而不是 org.openqa.selenium.Platform 的枚举查找值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:17:25.307

谢谢 Roos，它现在解决了，我通过 Jenkins 配置发送身份验证信息，而不是在设置所需的作业/构建期间从 OnDemand 插件覆盖它。

# arrays - 使用链表的二进制堆的复杂性

> ID：14784258
> 
> 赞同：0
> 
> 时间：2013-02-09T02:16:41.657
> 
> 标签：arrays, tree, linked-list, complexity-theory, binary-heap

我正在尝试使用数组和链表比较实现二进制堆。我认为数组在各方面都更好，因为所有操作都可以比使用链表的操作更快或相等。它还需要更少的内存。

但是，为什么使用链表比二进制堆中的数组更好，有什么理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:41:29.287

二进制堆很少被表示为显式树。它们比数组版本使用更多的内存，引用的局部性很差，并且（正如您在之前的问题中指出的那样）更难实现。

将二叉堆作为树来研究的主要原因是建立对数据结构的直觉。仅给定数组表示，很难推断二叉堆的属性和正确性，但是通过将它们连接回二叉树表示，设计和证明二叉堆算法的正确性变得容易得多。

希望这可以帮助！

# javascript - 尝试使用拆分提取特定数据

> ID：14784259
> 
> 赞同：-1
> 
> 时间：2013-02-09T02:16:44.310
> 
> 标签：javascript

我有这个 txt 文件名contacts.txt，其中包含：

```
kate|female|kathryn bailey beckinsale|26-jul-1973|#23 underworld drive|(621) 142-7827|kate@lycans.net
jessica|female|jessica claire biel|03-mar-1982|27 texas avenue|(53)2344223|jbiel@yahoo.com
johnny|male|john christopher depp ii|09-jun-1963|711 pirate road|(773) 476-6634|jspaw@piratebay.org 
```

我的脚本是这样的：

```
function syncText() {
var xhr = new XMLHttpRequest();
xhr.open("get", "data/contacts.txt", false);
xhr.send(null);

  if (xhr.status == 200) {
    var data = xhr.responseText;
    var items = data.split("|");
    items.sort();
    var div = document.getElementById("header2");

  for (var i = 0; i < items.length; i++) {
    var p = document.createElement("p");
    var text = document.createTextNode(items[i]);
    p.appendChild(text);
    div.appendChild(p);
  }
  } else {
    alert("data retrieval failed...");
  }
} 
```

HTML是这样的：

```
<div id="header2">
  <button onclick="syncText()">Load</button>    
</div>` 
```

我只想找回 kat、jessica、johnny.. 请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:34:37.973

这应该可以只获取名称：

```
var items = data.split("\n"); // build an array with each lines
// \n or \n\r considering that it is separated with line jumps
// warning: it may also contain an empty value at the end if there's an ending line jump

var names=[];

for (var i=0;i<items.length;i++) {
    names.push( items[i].split("|")[0] ); // read the first value before | and insert it
}

// ...
// whatever is needed to be done with names
// ... 
```

# git - 从无版本控制转换

> ID：14784260
> 
> 赞同：2
> 
> 时间：2013-02-09T02:16:49.347
> 
> 标签：git, version-control

我正在与一个拥有多个版本的软件的团队合作。

这个软件有很多部署——每次我们的客户抛出一个新的“事件”时，我们都会为他们部署一个新的 rails 应用程序，它有自己的数据库并放置在我们的服务器上。

到目前为止，我们只保留了每个版本的“主”，并将使用该软件版本的每个安装符号链接到该主版本。

这使我们能够对主服务器进行更改，并从该主更新部署 5 次安装（如果它是全局需要的错误修复或修补程序），同时还允许我们偶尔加入可能只有每个安装的功能在其中一个事件安装中需要或需要。

**管理和维护这样的系统有哪些有效的方法？**

**如何将所有这些旧版本的软件放入包含新版本的存储库中？**

我在想我可以这样做：创建一个名为“v1.0”的新分支删除所有文件从我想要标记的应用程序版本中移动文件提交这些更改？一些 git 命令允许我将该分支转换为 master 上的标签。

这纯粹是猜想，我将对此进行测试，以及我从那些更熟悉 git 的人那里得到的任何想法。

**最后，如果您对这种类型的转换有任何一般提示，请分享。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:14:15.803

根据我的经验，管理多棵分叉树的痛苦是相当大的。

Instead, I would strongly consider building the different features that your different deployments have into a single source tree and having a really good configuration/feature-flags system to tailor the install to what you need in each instance. You could even turn the whole thing into a single application, where instead of having multiple deployments, each deployment becomes an "account" inside of it, aka: a multi tenant app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:03:31.913

如果您具有无法配置的 per-install 功能，请创建 per-install 分支并在需要升级时将其变基为 master。请参阅[http://git-scm.com/book/en/Git-Branching-Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing)（从一开始就阅读那本书）。

导入历史：我希望您在它自己的目录中拥有每个版本。然后在第一个目录中初始化 Git 存储库，然后从每个版本目录创建符号链接到这个新的`first/.git`. 现在进入`git add . && git commit -a`每个版本目录。之后，您将创建所有提交，因此删除符号链接并将 .git 目录移动到新的（空）目录并键入`git reset --hard`（它将将该空目录的内容恢复到您的上一个版本）。

您将需要在执行`git commit`. 请参阅手册了解您的选项 ( `git commit --help`)。

# c++ - 在 std::sort 期间使用自定义比较器进行 std::out_of_range

> ID：14784263
> 
> 赞同：0
> 
> 时间：2013-02-09T02:17:10.567
> 
> 标签：c++, sorting, stl, stl-algorithm

我有以下代码

```
template<typename T>
bool GenericCompare(T lhs, T rhs)
{
    return lhs < rhs;
}

template<typename T>
class SortOrder
{
public:

    SortOrder(const std::vector<T> *_sortArray, 
              bool (*_comparator)(T,T) = GenericCompare) : 
    sortArray(_sortArray) , comparator (_comparator) , customOperator(true) {;}

    bool operator()(int lhs=0, int rhs=0) const
    {

        bool res;

        try {
             sortArray->at(lhs);

        }
        catch (std::out_of_range& oor) {
            std::cout << "LHS Out of range: " << lhs << " : " << rhs 
                      << " " << oor.what() << std::endl;
        }
        try {
            sortArray->at(rhs); 
        }
        catch (std::out_of_range& oor) {
            std::cout << "RHS Out of range: " << lhs << " : " 
                      << rhs << " "<< oor.what() << std::endl;

        }
        // Always needs comparator
        res = comparator(sortArray->at(lhs),sortArray->at(rhs));    
        return res;

    }
    private:
    const std::vector<T> *sortArray;
    bool (*comparator)(T,T);
    bool customOperator; 
    }; 
```

现在我有一个简单的排序代码，其中我根据另一个双精度向量对索引向量进行排序。'circle_fwd_vector' 是一个包含所有双精度的向量。

```
for (int i=0;i<circle_fwd_vector.size();i++) {
  circle_index_vector.push_back(i); 
}
try {
  std::sort(circle_index_vector.begin(),circle_index_vector.end(),
            SortOrder<double>(&circle_fwd_vector));
}
catch (std::exception& e)
{
  std::cout << e.what() << std::endl;
} 
```

现在在控制台中，我得到这样的结果：

```
 RHS Out of range: 1711 : 1079615151 vector::_M_range_check 
```

由于我没有使用任何自定义类，并且我正在排序的向量仅基于双打，所以我不确定为什么我会超出范围。我确保双向量中没有无穷大，但即使有，std::sort 不应该在不超出索引的情况下给我正确的排序索引吗？

感谢您的任何帮助。

编辑：如果有帮助，这是发生这种情况时向量的数据转储。 [http://pastebin.com/7wLX63FJ](http://pastebin.com/7wLX63FJ)另外，我正在使用 Xcode 3.2.6 附带的 GCC 4.2 进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:29:42.503

此错误是由`nan`数据中的值（位置 1688）引起的。问题是`<`不再满足包含s`std::sort`时所需的约束。`nan`有关所有比较器必须满足的“严格弱排序”的定义，请参见标准 25.4/4。

# javascript - 在 IE 中隐藏 CSS 下拉菜单

> ID：14784265
> 
> 赞同：0
> 
> 时间：2013-02-09T02:17:44.380
> 
> 标签：javascript, jquery, css

我正在使用具有 HTML 结构的 CSS 菜单，例如：

```
<div class="toolmenu" style="min-width:800px">
    <ul>
        <li><a class="dropdown left" href="#">Main A</a></li>
    </ul>
    <ul>
        <li><a class="dropdown right" href="#">Main B<span class="tm-arrow">&#9660;</span></a>
            <ul class="tm-width-2">
                <li><a href="#">Sub i</a></li>
                <li><a href="#">Sub ii</a></li>
                <li><a href="#">Sub iii</a></li>
                <li><a href="#">Sub iv</a></li>
            </ul>
        </li>
    </ul>                   
</div> 
```

CSS 可以在[这个 jsFiddle](http://jsfiddle.net/ericjohannsen/nfvqL/3/)中看到。

它工作得很好，只是一旦单击一个项目，子菜单就不会关闭。由于菜单项触发了对页面的 Ajax 更新，因此它提供了一种古怪的 UI 体验。

为了解决这个问题，我尝试了一点 JavaScript：

```
$('div.toolmenu ul li ul li a').click(function () {
    var grand = $(this).parent().parent();
    grand.css('display', 'none');
    setInterval(function () {
        grand.css('display', '');
    }, 300);
}); 
```

这在*大多数*浏览器中都非常有效。但是，IE 的行为如下：

*   单击时子菜单消失
*   setInterval 的回调触发后，子菜单重新出现

我怎样才能在 IE 中也能做到这一点？有没有更好的方法让子菜单在点击后消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:33:49.190

您可以让它出现在鼠标输入功能上，而不是让它随着间隔重新出现。尝试这个：

```
$('div.toolmenu ul li ul li a').click(function () {
    var grand = $(this).parent().parent();
    grand.hide();

});

$('.dropdown').mouseenter(function(){
     $(this).next('ul').show();
}); 
```

如果你想创建一个更动画的菜单，你可以用fadeOut() 代替hide，用fadeIn() 代替show。

编辑：这是你的[jsfiddle](http://jsfiddle.net/nfvqL/4/)修改。

# mongodb - Mongo 更新脚本

> ID：14784273
> 
> 赞同：0
> 
> 时间：2013-02-09T02:19:09.233
> 
> 标签：mongodb

我有一个简单的更新脚本，由于某种原因，它会遍历每个文档两次并继续执行代码。我不明白为什么会这样......任何帮助将不胜感激：

```
db.products.find().forEach(function(product) {
var numerator = {
    0 : [],
    1 : [],
    2 : [],
    3 : [],
    4 : []
},
denominator= {
    0 : [],
    1 : [],
    2 : [],
    3 : [],
    4 : []
};

product.reviews.forEach(function(review) {
    var weight = review.weight.reputation + review.weight.reviewRelevance,
    i = 0;

    review.score.forEach(function(score) {
    if ( i == 0){
        score.rating = Math.ceil((score.rating/100) * 10);
    }else {
        score.rating = Math.ceil((score.rating/25) * 10);

        numerator[i].push(score.rating * weight);
        denominator[i].push(weight);
        i++;
        }
    });

    var s = 0;
    for (var key in product.score) {
        var obj = product.score[key];
        if ( key == 'Overall'){
            obj.percent = obj.rating;
            obj.rating = Math.ceil((obj.rating/100) * 10);
        }else {
        obj.rating = Math.ceil((obj.rating/25) * 10);
        }

                obj.info = {
        'numerator' : array_sum(numerator[s]),
        'denominator' : array_sum(denominator[s]),
        };

        s++;
    }
});
db.products.save(product);
});

function array_sum (array) {
    var key, sum = 0;

    if (array && typeof array === 'object' && array.change_key_case) { // Duck-type check for our own array()-created PHPJS_Array
            return array.sum.apply(array, Array.prototype.slice.call(arguments, 0));
      }

      // input sanitation
      if (typeof array !== 'object') {
          return null;
      }

      for (key in array) {
          if (!isNaN(parseFloat(array[key]))) {
                sum += parseFloat(array[key]);
          }
      }

      return sum;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:04:45.143

默认情况下，当您修改文档并将其移动到集合的末尾（它将被再次读取）时，光标不会处理这种情况。在这种情况下，您可以使用快照游标来避免多次读取同一文档的多个版本。

检查文档：[docs.mongodb.org/manual/reference/operator/snapshot](http://docs.mongodb.org/manual/reference/operator/snapshot)

# caching - Golang - 包 - 带有缓存的模板引擎

> ID：14784274
> 
> 赞同：2
> 
> 时间：2013-02-09T02:19:10.553
> 
> 标签：caching, redis, package, go, template-engine

我一直在寻找带有缓存的模板引擎，但没有任何运气。我考虑过使用 Redis 和我当前的模板引擎 Pongo 来实现我自己的系统。

我的计划是创建一个文件夹，其中包含将成为配置一部分的所有模板，因此对其他模板没有限制，并且与模板的 Redis 时间戳相比，当文件更新时，每个模板都会加载到 Redis 上。

我也在考虑检查模板请求，因此如果您经常编辑模板但没有请求它，那么服务器不会为所有保存加载它。这可以最大限度地减少工作量，而不会严重影响许多请求。

有人知道 Go 的模板缓存包吗？如果不是，缓存方法是否描述了一个不错的选项，或者是否有更好的选项我应该实施？

# javascript - 无法访问 skyDrive 文件夹

> ID：14784278
> 
> 赞同：0
> 
> 时间：2013-02-09T02:21:17.240
> 
> 标签：javascript, onedrive

我正在尝试创建一个应用程序，该应用程序将通过 SkyDrive API 访问文件夹以及随后的内容。

但我设法得到的只有我的名字和照片。出于某种未知原因，未显示文件夹。

代码运行没有错误，只有输出不存在。我真的不知道我在做什么错。如果有人有任何建议，我将不胜感激。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>file Content</title>
    <style>

    </style>    

</head>
<body>
<h1>File Content</h1>
<div>
  <div id="meName" class="Name"></div>
  <div id="meImg"></div>
  <div id="signin"></div>
  <div bgcolor='blue' id ="meCount"></div>
</div>

<script src="//js.live.net/v5.0/wl.js" type="text/javascript" language="javascript"></script>
<script type="text/javascript" language="javascript">

    // Update the following values
    var client_id = "XXXXXXXXXX",
        scope = ["wl.signin", "wl.basic", "wl.offline_access", "wl.emails", "wl.skydrive_update"],
        redirect_uri = "http://XXXXXXXX/callback.aspx";

    function id(domId) {
        return document.getElementById(domId);
    }

    function displayMe() {
        var imgHolder = id("meImg"),
        nameHolder = id("meName"),
    cout = id("meCount");

        if (imgHolder.innerHTML != "") return;

        if (WL.getSession() != null) {
            WL.api({ path: "me/picture", method: "get" }).then(
                    function (response) {
                        if (response.location) {
                            imgHolder.innerHTML = "<img src='" + response.location + "' />";
                        }
                    }
                );

            WL.api({ path: "me", method: "get" }).then(
                    function (response) {
                        nameHolder.innerHTML = response.name;
                    }
                );

            WL.api({ path: "me/skydrive", method: "get" }).then(
                    function (response) {
                        cout.innerHTML = response.count;
                    }
                );

        }
    }

    function clearMe() {
        id("meImg").innerHTML = "";
        id("meName").innerHTML = "";
    }

    WL.Event.subscribe("auth.sessionChange",
        function (e) {
            if (e.session) {
                displayMe();
                refreshPath ();
            }
            else {
                clearMe();
            }
        }
    );

    WL.init({ client_id: client_id, redirect_uri: redirect_uri, 
              response_type: "code" });

    WL.ui({ name: "signin", element: "signin", brand: "skydrive", 
            type: "Connect", scope: "wl.signin wl.skydrive_update" });

    function refreshPath (){
                  var options = viewerPage.options;

                  var name = (options && 'name' in options) ? 
                                              options.name : 'SkyDrive';
                  var path = (options && 'path' in options) ? 
                                              options.path : 'me/skydrive';

                  loadPath(name, path);
                }

                function isFolder (file){
                  return file.type == 'folder' || 
file.type == 'album';
                }

                function loadPath(name, path){
                 updateTitle(name);
                 clearViewer();

         WL.api({path: path + '/files'}, function (response){
                  if (response.error){
                  return;
                  }

             var items = response.data.map(function (item) {

                  return{
                    group: 'default',
                    key: item.id,
                    file: item
                    };
                });

                items.sort(function itemA, itemB){
                   var isFolderA = isFolder(itemA.file);
                   var isFolderB = isFolder(itemB.file);

                   if (isFolderA == isFolderB){

return itemA.file.namelocaleCompare(itemB.file.name);
                    }
                    else if (isFolderA){
                    return -1;
                    }
                    else{
                      return 1;
                      }
                    });
                viewerPage.items = items;
                updateList();
            });
            }

    </script>

<script>

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:34:55.343

您是否尝试过使用 ISDK 上的示例：

[http://isdk.dev.live.com](http://isdk.dev.live.com)

例如，以下示例：

[http://isdk.dev.live.com/ISDK.aspx?category=scenarioGroup_skyDrive&index=2](http://isdk.dev.live.com/ISDK.aspx?category=scenarioGroup_skyDrive&index=2)

还有一个面板，您可以在其中直接调用 Live API 服务来查看它们返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:37:02.043

顺便说一句，这里是 Live SDK 开发者论坛的链接：

[http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/threads](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/threads)

# html - 奇怪的行为浮动

> ID：14784279
> 
> 赞同：1
> 
> 时间：2013-02-09T02:21:26.153
> 
> 标签：html, css, css-float

这是我的代码

```
#sidebar
{
    width:140px;
    border: solid 3px green;
    height:300px;
    float:left;
}

#content
{
    border: solid 3px blue;
    height:400px;
    float:left;

}
<div id="sidebar">Sidebar</div>

<div id="content">Content</div> 
```

* * *

由于没有指定内容 div 的宽度，所以正如预期的那样**，它只会占用足够的空间来显示 div 内的文本**

现在我不使用浮点数，而是使用这样的边距：

```
#content
{
    border: solid 3px blue;
    height:400px;
    margin-left:160px;

} 
```

**内容 div 现在将占据浏览器视口的其余宽度，**即使未指定宽度也是如此。

我认为这是因为内容 div 继承了用户代理样式表分配的 body 标记的 width 属性。如果这是真的，我的问题是**为什么在我使用浮点数时没有发生继承？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:42:09.730

未指定`width`的 a`div`默认为`width:100%;`.

您需要指定`width:auto;`以获得您想要的效果，只要足够宽以包含其内容即可。

```
#content
{
    width  : auto;
    border : solid 3px blue;
    height : 400px;
    float  : left;
} 
```

# jquery-datatables - DataTables- 展开行的详细信息时，aoData 为空

> ID：14784280
> 
> 赞同：2
> 
> 时间：2013-02-09T02:21:31.297
> 
> 标签：jquery-datatables

我正在使用在[此处](http://www.datatables.net/blog/Drill-down_rows)找到的向下钻取数据表。

数据表存在于手风琴内。用户将通过单击选择类别，它会展开以显示与该类别相关的数据表。当用户单击类别时调用函数 initTable。

DataTables 文档说要使用此代码来说明页面上的多个数据表，但我无法让它工作。

```
$(document).ready(function() {
    $('.dataTable').dataTable();
} ); 
```

我所做的不是使用“#example”，而是将其替换为“#”+类别，这 99% 有效。我可以单击一个类别，向下钻取以查看一行上的其他数据，切换到一个新类别，做同样的事情。

不起作用的是 - 如果我单击一个类别，然后关闭该类别或转到另一个然后返回第一个类别 - 展开一行然后抛出错误“aoData”为空或不是对象。以下 3 张图片显示了我在说什么。注意在第 3 个图像详细信息行中不显示。

我无法插入图像，但我已将它们张贴[在这里](http://imgur.com/XvRtl8U,MlmcFDc,RmpCfQY)以显示我在说什么。

这是为创建表而调用的 initTable 函数。在创建新表之前，我正在使用 bDestroy 销毁现有表。

任何帮助将不胜感激！

```
function initTable(category, facility)
{
  if (gsCategory == "")
    gsCategory = category;
  else if (gsCategory == category)
    gbToggle = !gbToggle;
  else
    gbToggle = false;

  gsCategory = category;

  if (gbToggle == false)
  {
    gsCategory = category;

    var select = document.forms[0].selFacility;
    var facility = select.options[select.selectedIndex].value;

    document.body.style.cursor = 'wait';

    var patJson = getJson(facility, category);
    var anOpen = [];
    var sImageUrl = "../images/";
    makeTable(category);

    document.body.style.cursor = 'default';

    var oTable = $('#'+category).dataTable( {
      "bProcessing": false,
      "bDestroy": true,
      "aaData": patJson,
      "bAutoWidth": false,
      "aoColumns": [
        {
         "mDataProp": null, 
         "sClass": "control center", 
         "sDefaultContent": '<img src="'+sImageUrl+'details_open.png'+'">',
         "sWidth": "5%"
        },
        { "mDataProp": "S_PAT_NAME", "sWidth": "30%" },
        { "mDataProp": "S_AGE", "sWidth": "15%"},
        { "mDataProp": "S_FIN", "sWidth": "30%"},
        { "mDataProp": "S_ROOM_BED", "sWidth": "20%" }
      ]
    } );

    $('#'+category+' td.control').live( 'click', function () 
    {
      var nTr = this.parentNode;
      var i = $.inArray( nTr, anOpen );

      if ( i === -1 ) 
      {
        $('img', this).attr( 'src', sImageUrl+"details_close.png" );
        var nDetailsRow = oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );
        $('div.innerDetails', nDetailsRow).slideDown();
        anOpen.push( nTr );
      }
      else 
      {
        $('img', this).attr( 'src', sImageUrl+"details_open.png" );
        $('div.innerDetails', $(nTr).next()[0]).slideUp( function () 
        {
          oTable.fnClose( nTr );
          anOpen.splice( i, 1 );
        } );
      }
    } );
  }
}
function fnFormatDetails( oTable, nTr )
{
  var oData = oTable.fnGetData( nTr );
  var sOut = 
     '<div class="innerDetails">'+
        '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
           '<tr><td>Trigger Order:</td><td>'+oData.S_TRIGGER_MED+'</td></tr>'+
           '<tr><td>Allergies:</td><td>'+oData.S_ALLERGIES+'</td></tr>'
        '</table>'+
     '</div>';
  return sOut;
} 
```

# php - 足球联赛调度算法（带同步主/客场）

> ID：14784286
> 
> 赞同：1
> 
> 时间：2013-02-09T02:22:47.583
> 
> 标签：php, algorithm, schedule, sports-league-scheduling-problem

我正在制作一个自动足球联赛生成器并按计划进行。我有一个生成所有内容的算法，但没有时间表。看一看：

```
[tour-id] => Array
    (
        [playing-day] => 2013-03-07
        [tour (tour-id+1)] => 9
        [game-id] => Array
            (
                [blue team-id] => 13
                [red team-id] => 10
            ) 
```

例如：

```
[8] => Array
    (
        [playday] => 2013-03-07
        [tour] => 9
        [0] => Array
            (
                [blue] => 13
                [red] => 10
            )

        [1] => Array
            (
                [red] => 15
                [blue] => 12
            )

        [2] => Array
            (
                [blue] => 6
                [red] => 11
            ) 
```

现在，当我获得所有这些数据时，我可以只用很少的数据`foreach()`来获取我需要的东西。但是 - 我想要的是将团队正常放入红色和蓝色团队。

我是说：

*   一侧的一支队伍（蓝队或红队）最多可打 2 次；
*   一轮中的一支球队必须`$totalTours/2`在一轮中进行比赛。

例如，如果有 9 支球队，在第一轮中，一支球队必须参加 4 场红色巡回赛（总共，不是连续）和 5 场蓝色巡回赛。在第 2 轮中，它必须进行 5 次红色巡回赛，4 次蓝色巡回赛。

即使有 100 个团队，该算法也必须有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-31T22:37:07.747

要构建一组固定装置，您需要每支球队精确地互相比赛一次。

一个不错的方法是围绕单个固定元素“旋转”元素。

固定数字 1，我们需要

第一轮将是

```
 1 2 3 4 5 
 v v v v v
10 9 8 7 6 
```

第二轮将是

```
 1 10 2 3 4
 v  v v v v 
 9  8 7 6 5 
```

第3轮将是

```
 1 9 10 2 3
 v v  v v v 
 8 7  6 5 4 
```

依此类推，直到数字一直旋转。

我使用这种方法在 JavaScript 中构建了一组固定装置： [https ://jsfiddle.net/jonwinstanley/9dfLm8nq/97/](https://jsfiddle.net/jonwinstanley/9dfLm8nq/97/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T16:57:11.040

我认为您应该检查**[循环赛-](http://en.wikipedia.org/wiki/Round-robin_tournament)**算法。通过这种方式，您可以轻松地安排您的比赛，并且该地点将成为可选的。到达时间后，您可以设置位置`home`或`away`

# mysql - .SQL 转储中的 MySQL 使用

> ID：14784287
> 
> 赞同：1
> 
> 时间：2013-02-09T02:23:04.260
> 
> 标签：mysql, sql, database, linux

当我使用此命令备份我的 MySQL 数据库时：

```
mysqldump -u username -pPASSWORD database_name | gzip > db_`date '+%m-%d-%Y'`.sql.gz 
```

这被添加到每个转储的开头：

```
USE `database_name`; 
```

我做了一些研究，似乎该 `--databases`选项可能是导致此问题的原因，但正如您从我的陈述中看到的那样，我没有使用它。

预先感谢您来自 Linux 新手 :)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:43:28.153

每当进行数据库转储时，

```
USE 'database_name'; 
```

自动添加在前面，使您可以在其他地方再次设置数据库，而无需您每次希望重新使用它时都重命名它。

您使用的操作系统无关紧要（默认情况下，我在 Windows 中也有此功能）。

# javascript - 在未设置库的情况下在 jsfiddle 中调用 jquery 函数

> ID：14784291
> 
> 赞同：1
> 
> 时间：2013-02-09T02:23:36.647
> 
> 标签：javascript, jquery, html, jsfiddle

我正在尝试从 html 调用 jquery 函数，但它似乎不起作用。我将我的 jsfiddle 页面设置为纯 js（没有为我加载库），因为我试图自己将它们加载到 html 中。任何想法为什么不调用此函数？如果我在 jsfiddle 中设置 jquery 库，那么它可以工作。

jsfiddle.net/qD6PN/

ps 我不想通过 jsfiddle UI 加载库的原因是因为我想弄清楚为什么我的脚本在 MVC 中没有被正确调用，所以我不希望 jsfiddle 做任何特别的事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:25:26.317

简而言之，JSFiddle 会将 HTML 部分中的所有内容放入`<body>`您的 HTML 文档中（它并不意味着`<head>`尽可能接近）。您*可以*在 HTML 中放置一个`<script>`标签，但它将在 Javascript 窗格中的任何内容*之后*加载，该窗格放置在`<head>`JSFiddle 实际生成的位置中。

如果让 JSFiddle 将您的 HTML 和代码包装在自己的标签中会使您的测试用例出现问题，您可以尝试[jsbin](http://jsbin.com)，其中包含与您在此小提琴中所做的完全一样的库，方法是将`script`标签添加到`head`.

# python - 使用 BlobstoreUploadHandler 处理图像上传并返回 JSON 消息

> ID：14784295
> 
> 赞同：1
> 
> 时间：2013-02-09T02:24:31.383
> 
> 标签：python, google-app-engine, webapp2

我正在尝试将图像上传到使用 create_upload_url() 创建的 URL，使用默认的 BlobstoreUploadHandler 处理它，并使用图像的 get_serving_url() URL 将 JSON 消息返回给客户端。我的代码如下：

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        response = {}

        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]

        response['error'] = False
        response['message'] = "Image uploaded."
        response['image_url'] = images.get_serving_url(blob_info.key())

        self.response.headers['Content-Type'] = 'application/json'
        self.response.out.write(json.dumps(response))

app = webapp2.WSGIApplication(
    [('/_ih/upload_handler/', UploadHandler),
    ], debug=True) 
```

问题是客户端没有收到响应。AppEngine 日志显示请求的状态为 200。使用 flash 发出请求时，状态码为 200 且没有响应正文，但使用 HTML5 会输出“（已取消）”状态。我不知道发生了什么。从我在互联网上看到的所有代码片段中，这应该可以工作。请帮忙！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:29:18.457

要处理上传并返回 JSON 响应，您需要从 upload_handler 重定向到将返回 JSON 响应的处理程序。

这是一个例子：

```
class FileUploadHandler(blobstore_handlers.BlobstoreUploadHandler):

    def post(self):
        blob_info = self.get_uploads()[0]       
        self.redirect(self.uri_for("successfulUpload",blob_key = blob_info.key()))

class SuccessfulUpload(BaseHandler):

    def get(self, blob_Key):
        response['error'] = False
        response['message'] = "Image uploaded."
        response['image_url'] = images.get_serving_url(blobstore.BlobKey(blob_Key))
        self.response.headers['Content-Type'] = 'application/json'
        self.response.out.write(json.dumps(response)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T04:15:43.657

事实证明，这是一个 HTML5 跨域资源共享问题。您可以通过在响应中添加正确的标头来解决此问题：

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        response = {}

        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]

        response['error'] = False
        response['message'] = "Image uploaded."
        response['image_url'] = images.get_serving_url(blob_info.key())

        self.response.headers.add_header("Access-Control-Allow-Methods", "POST") 
        self.response.headers.add_header("Access-Control-Allow-Origin", "*")

        self.response.headers['Content-Type'] = 'application/json'

        self.response.out.write(json.dumps(response)) 
```

# java - Java BufferedInputStream 进度条

> ID：14784296
> 
> 赞同：0
> 
> 时间：2013-02-09T02:24:38.613
> 
> 标签：java, swing, download, jprogressbar, bufferedinputstream

我在`JProgressBar`显示 HTTP 下载状态时遇到了一个小问题。
进度条正在工作，但是它填得太快，最终超出最大值相当多，如下所示：

```
public void test(InputStream stream, File location) {  
    BufferedInputStream in = new BufferedInputStream(stream);  
    FileOutputStream file = new FileOutputStream(location);  
    BufferedOutputStream out = new BufferedOutputStream(file);  
    int i;  
    int bytesDownloaded = 0;  
    while ((i = in.read()) != -1) {  
        bytesDownloaded += i;  
        out.write(i);  
        System.out.println("Bytes downloaded: " + bytesDownloaded + " out of " + len);  
        update(bytesDownloaded);  
    }
} 
```

问题是`bytesDownloaded`最终比文件末尾的 len 大得多，`in.read()`实际上是返回文件中最多的字节还是其他值？我假设前者来自 Java 7 API，但它与我的发现不一致。

我正在一个 2.69MB 的文件上测试这个片段。
这是 println 语句的输出（最后几行）

> Bytes downloaded: 371525502 out of 2821490
> Bytes downloaded: 371525526 out of 2821490
> Bytes downloaded: 371525631 out of 2821490
> Bytes downloaded: 371525788 out of 2821490
> Bytes downloaded: 371526028 out of 2821490
> Bytes downloaded: 371526222 out of 2821490
> Bytes downloaded: 371526442 out of 2821490
> Bytes下载：371526697 出 2821490
> 字节下载：371526914 出 2821490

现在我知道这`2821490`是 2.69MB 的正确字节值，所以我的问题仍然存在，为什么`read()`BufferedInputStream 的函数将文件读取字节的结尾显示为`371526914`，如果这真的是字节，那么它等于大约 350MB，文件显然是不是！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:27:36.877

只需插入一个[javax.swing.ProgressMonitorInputStream](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T02:41:24.297

我解决了，在`i = in.read()` 执行后，`i`变量将数据的字节表示保存到文件中，以此类推，每次循环迭代。所以它不是读取的字节数，它是一个字节的实际数据。

我将我的更改`bytesDownloaded += i;`为`bytesDownloaded++;`，这在调试输出和进度条中都给了我正确的结果。

# windows - 虚拟机 - Azure，设置 Web 服务器

> ID：14784298
> 
> 赞同：5
> 
> 时间：2013-02-09T02:25:02.197
> 
> 标签：windows, web-services, azure, virtual-machine

我已经安装了一个 windows server 2012 虚拟机。但是，似乎没有设置 IIS，也没有为 Web 设置，因此当我在地址栏中输入 URL 时，我什么也得不到。

如何使服务器网络准备就绪？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T10:01:25.607

原因是默认情况下创建的虚拟机仅在 Windows Azure 防火墙中打开 RDP 端口。

如果您希望能够从 Azure 外部浏览到您的计算机，您必须打开防火墙，方法是转到 Windows Azure 管理门户中的计算机，切换到端点选项卡并添加一个带有公共端口 80 和私有端口的 TCP 端点80（如果需要 SSL，也可以考虑打开 443）。

这将允许流量通过防火墙到达您打开的端口上的计算机，如果您已配置 IIS，则可以访问 Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:37:10.070

您所获得的只是 IaaS 场景中的虚拟机，您可以自行决定如何使用它。我可以建议您下载**Azure 准备内容**( [http://www.microsoft.com/en-us/download/details.aspx?id=8396](http://www.microsoft.com/en-us/download/details.aspx?id=8396) ) 并且有一个关于 Windows Azure 虚拟机的动手实验室（它被称为“ **IntroToWindowsAzureVirtualMachines** ”）。该实验室将指导您完成该过程。

# mysql - MySQL count() 没有返回正确的数字

> ID：14784301
> 
> 赞同：0
> 
> 时间：2013-02-09T02:25:50.197
> 
> 标签：mysql

这是我正在尝试的查询。

```
select
    UserId,
    count(e.UserId) as 'Experiments',
    count(t.TaskId) as 'Tasks tried',
    count(case when t.TaskStatus = 'Completed' then t.TaskStatus end) as 'Tasks completed',
    sec_to_time(avg(timediff(TaskLocalUserEndDateTime,TaskLocalUserStartDateTime))) as 'Average Time'
from
    Tasks as t,
    Experiments as e
where
    t.ExperimentId = e.ExperimentId
and
    e.UserId = e.UserId
group by
    UserId; 
```

`count(e.UserId)``count(t.TaskId)`给出与哪个错误相同的结果。但是`count()`，如果我在没有任何连接的情况下运行查询，则会返回正确的结果，例如：

```
select
    count(UserId)
from
    Experiments
where
    UserId = UserId
group by 
    UserId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:12:26.743

不确定这是否会有所帮助，但如果您在查询下方运行，您是否会获得所需的结果 - 请参阅 group by：

```
select
    count(UserId), ExperimentId
from
    Experiments
where
    UserId = UserId
group by 
    ExperimentId; 
```

只需检查查询 - 注意到 Tasks 和 Experiments 表之间的连接位于 ExperimentId 上 - 在您声明的查询中，您仅使用 userId 获得所需结果。让我知道这是否有帮助。

```
select
    UserId,
    e.Experiments, -- count(e.UserId) as 'Experiments',
    count(t.TaskId) as 'Tasks tried',
    count(case when t.TaskStatus = 'Completed' then t.TaskStatus end) as 'Tasks completed',
    sec_to_time(avg(timediff(TaskLocalUserEndDateTime,TaskLocalUserStartDateTime))) as 'Average Time'
from
    Tasks as t,
--    Experiments as e 
LEFT JOIN 
(
   select count(UserId) as 'Experiments', ExperimentId from Experiments group by ExperimentId
) as e
where
    t.ExperimentId = e.ExperimentId
and
    e.UserId = e.UserId
group by
    UserId; 
```

# r - 自定义格函数中的范围（组参数）

> ID：14784302
> 
> 赞同：2
> 
> 时间：2013-02-09T02:26:01.677
> 
> 标签：r, lattice

请考虑这个功能：

```
tf <- function(formula = NULL, data = NULL, groups = NULL) {

    grv <- eval(substitute(groups), data, environment(formula)) # the values
    grn <- as.character(match.call()$groups) # the name
    gr <- match.call()$groups # unquoted name

    p <- xyplot(formula, data, # draws the data but not in groups
# Try these options:
#   p <- xyplot(formula, data, groups, # can't find 'cat2' 
#   p <- xyplot(formula, data, groups = data[,grn], # can't fine grn
#   p <- xyplot(formula, data, groups = grv, # can't find grv
        panel = function(x, y) {
            panel.stripplot(x, y, jitter.data = TRUE, pch = 20)
            }
            )
    p
    } 
```

您可以使用它运行：

```
tf(formula = mpg~vs, groups = am, data = mtcars) 
```

`groups`将论点传递给我做错了什么`xyplot`-为什么找不到？我无法弄清楚它如何想要这些`group`信息。谢谢。

**更新：**

@agstudy 的回答很有帮助，但是如果我像原始示例一样添加面板功能，仍然无法识别组（没有分组，但也没有发生错误）：

```
tf <- function(formula = NULL, data = NULL, groups = NULL) {
    ll <- as.list(match.call(expand.dots = FALSE)[-1])
    p <- xyplot(as.formula(ll$formula), 
              data = eval(ll$data), 
              groups = eval(ll$groups),
                panel = function(x, y) {
                panel.stripplot(x, y, jitter.data = TRUE, pch = 20)
                }
                )
    p
    } 
```

仍然缺少一些东西...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T07:01:23.100

您可以`eval`在此处使用，因为`match.call`返回符号。

```
tf <- function(formula = NULL, data = NULL, groups = NULL) {
  ll <- as.list(match.call(expand.dots = FALSE)[-1])
  p <- xyplot(as.formula(ll$formula), 
              data = eval(ll$data), 
              groups = eval(ll$groups),
              panel = function(x, y,...) { ## here ... contains groups and subscripts
                ## here you can transform x or y before giving them to the jitter
                panel.stripplot(x, y, jitter.data = TRUE, pch = 20,...)
              }
  )
  p
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:50:18.460

当我在函数内定义和调用函数时遇到问题时，我使用的一种技术是将参数作为字符串传递，然后从这些字符串构造函数内的调用。这就是这里的样子。

```
panel2 <- function(x, y, ...) {panel.stripplot(x, y, jitter.data = TRUE, pch = 20, ...)}
tf <- function(formula, data, groups) {
  eval(call("xyplot", as.formula(formula), 
                      groups=as.name(groups), 
                      data=as.name(data),
                      panel=as.name("panel2")))
}

tf("mpg~vs", "mtcars", "am") 
```

有关此示例的另一个示例，请参见我之前的一个问题的答案：[https](https://stackoverflow.com/a/7668846/210673) ://stackoverflow.com/a/7668846/210673 。

另请参阅此问题的姐妹问题的答案，我建议使用类似的方法`aov`：[https ://stackoverflow.com/a/14858614/210673](https://stackoverflow.com/a/14858614/210673)

# facebook-graph-api - 来自 Facebook Graph API - 我可以在 1 次通话中获取所有朋友的相册吗？

> ID：14784306
> 
> 赞同：2
> 
> 时间：2013-02-09T02:26:52.577
> 
> 标签：facebook-graph-api

所以我可以打一个电话让所有的朋友。然后遍历并获取每个朋友的专辑。

api/网络开销是疯狂的，因为通常朋友数量非常高。

有没有办法直接在同一个原始 user.friends() 调用中获取所有专辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:30:28.130

[领域扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)是您的朋友。试试这个：

```
me/friends?fields=albums 
```

如果您有很多朋友，则运行此查询可能需要一些时间。

# perl - perl - 推送不附加到数组的末尾

> ID：14784307
> 
> 赞同：-3
> 
> 时间：2013-02-09T02:27:04.673
> 
> 标签：perl

```
 DB<2> n
  main::(/home/repsa/temper.pl:84):  my $tttdiskhumber=$myTemprecord[-1];
   DB<2> n
  main::(/home/repsa/temper.pl:87):  push(@myMainrecord,$tttdiskhumber);
   DB<2> p @myMainrecord
   t2agvio701vhost03t2adsap7011
   DB<3> p $tttdiskhumber
  hdisk6
   DB<4> n
   main::(/home/repsa/temper.pl:88): @myTemprecord=();
    DB<4> p @myMainrecord
    hdisk6o701vhost03t2adsap7011
   DB<5> 
```

为什么我的最后一次推送没有附加到数组的末尾？任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T04:15:34.930

哦，是的。问题是您正在向屏幕发送回车。它可能落后于数组中的前一个元素。

```
$ perl -e'print "abc", "def\r", "ghi", "\n";'
ghidef 
```

您可能在非 Windows 系统上读取 Windows 文本文件而无需转换行尾，无论是提前（使用`dos2unix`）还是在读取文件时（使用`s/\s+\z//;`而不是`chomp;`）。

* * *

正如 jordanm 在评论中所建议的那样，调试器的`x`命令将向您展示您所拥有的比`p`.

```
$ perl -d

Loading DB routines from perl5db.pl version 1.33
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

my @a = ("abc", "def\r", "ghi");
1;
^D
main::(-:1):    my @a = ("abc", "def\r", "ghi");
  DB<1> s
main::(-:2):    1;
  DB<1> p @a
ghidef
  DB<2> x @a
0  'abc'
1  "def\cM"
2  'ghi'
  DB<3> q 
```

# php - 如何在 PHP 中比较和获取 2 个 multidim 数组之间的差异

> ID：14784313
> 
> 赞同：0
> 
> 时间：2013-02-09T02:28:23.367
> 
> 标签：php, arrays

有人可以帮我解决这个问题。

我有 2 个数组 arr1 和 arr2

```
<?php
$arr1[0]['name'] = "Ben";
$arr1[0]['level'] = "3";
$arr1[0]['age'] = "10";
$arr1[0]['gender'] = "M";
$arr1[1]['name'] = "Chris";
$arr1[1]['level'] = "12";
$arr1[1]['age'] = "4";
$arr1[1]['gender'] = "F";

$arr2[0]['name'] = "Jack";
$arr2[0]['grade_level'] = "3";
$arr2[0]['age'] = "10";
$arr2[0]['gender'] = "F";
$arr2[1]['name'] = "Lily";
$arr2[1]['level'] = "2";
$arr2[1]['age'] = "7";
$arr2[1]['gender'] = "F";
$arr2[2]['name'] = "Chris";
$arr2[2]['level'] = "12";
$arr2[2]['age'] = "4";
$arr2[2]['gender'] = "M";
?> 
```

我需要在具有相同级别和年龄值的条目上比较 arr1 和 arr2 之间的差异（反之亦然），并返回/突出显示不匹配的列。

例如： arr1 中的 Ben->3->10->M 将与
arr2 中的 A.1 Jack->3->10->F 进行比较，因为它们具有相同的级别和年龄值

Chris->12->4- arr1 中的 >F 将与
arr2 中的 A.2 Chris->12->4->M 进行比较，因为它们具有相同的级别和年龄值

我应该能够知道哪些列与
A.1 不匹配返回应该是 A.2 的名称和性别
返回应该是性别

所需输出： [http ://s7.postimage.org/8r3tf24rf/img.png](http://s7.postimage.org/8r3tf24rf/img.png)

我已经尝试了 array_diff 和几个数组函数和操作，但我无法得出想要的结果:(请帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:20:18.223

例如，您可以使用如下所示的“辅助数组”（$hl 荧光笔）：

```
<?php
$arr1[0]['name'] = "Ben";
$arr1[0]['level'] = "3";
$arr1[0]['age'] = "10";
$arr1[0]['gender'] = "M";
$arr1[1]['name'] = "Chris";
$arr1[1]['level'] = "12";
$arr1[1]['age'] = "4";
$arr1[1]['gender'] = "F";

$arr2[0]['name'] = "Jack";
$arr2[0]['level'] = "3";
$arr2[0]['age'] = "10";
$arr2[0]['gender'] = "F";
$arr2[1]['name'] = "Lily";
$arr2[1]['level'] = "2";
$arr2[1]['age'] = "7";
$arr2[1]['gender'] = "F";
$arr2[2]['name'] = "Chris";
$arr2[2]['level'] = "12";
$arr2[2]['age'] = "4";
$arr2[2]['gender'] = "M";

$hl1 = array();
$hl2 = array();

foreach($arr1 as $x => $tester)
{
    foreach($arr2 as $y => $testing)
    {
        if(($tester['level'] == $testing['level']) AND ($tester['age'] == $testing['age']))
        {
            foreach($tester as $key => $value)
            {
                if($testing[$key] != $value)
                {
                    $hl1[$x]['pos'] = true;
                    $hl1[$x]['key'][] = $key;
                    $hl2[$y]['pos'] = true;
                    $hl2[$y]['key'][] = $key;
                }
            }
        }
    }
}
$printheader = true;
echo "<table border='1'>";
foreach($arr1 as $pos => $printer)
{
    echo "<tr>";
    if($printheader)
    {
        $header = array_keys($printer);
        foreach($header as $key)
        {
            echo "<td>". $key ."</td>";
        }
        echo "</tr><tr>";
        $printheader = false;
    }
    foreach($printer as $key => $value)
    {
        if(isset($hl1[$pos]) AND in_array($key, $hl1[$pos]['key']))
        {
            echo "<td style='background-color: ff0000;'>". $value ."</td>";
        }
        else
            echo "<td>". $value ."</td>";
    }
    echo "</tr>";
}
echo "</table>";
$printheader = true;
echo "<table border='1'>";
foreach($arr2 as $pos => $printer)
{
    echo "<tr>";
    if($printheader)
    {
        $header = array_keys($printer);
        foreach($header as $key)
        {
            echo "<td>". $key ."</td>";
        }
        echo "</tr><tr>";
        $printheader = false;
    }
    foreach($printer as $key => $value)
    {
        if(isset($hl2[$pos]) AND in_array($key, $hl2[$pos]['key']))
        {
            echo "<td style='background-color: ff0000;'>". $value ."</td>";
        }
        else
            echo "<td>". $value ."</td>";
    }
    echo "</tr>";
}
echo "</table>";
?> 
```

看起来像这样：[http ://anyimg.com/view/8pj5q71/table_out.png](http://anyimg.com/view/8pj5q71/table_out.png)

# javascript - 我可以阻止中间单击打开链接以开始自动滚动吗？

> ID：14784316
> 
> 赞同：1
> 
> 时间：2013-02-09T02:28:48.863
> 
> 标签：javascript, jquery, html

我正在创建一个组件，该组件在带有溢出的容器内显示一堆用户照片：自动，每张照片都被一个`<a>`标签包围。这些图像周围没有空间，因此如果用户使用中键单击自动滚动此照片列表，它将始终打开链接而不是启动自动滚动。这意味着自动滚动不起作用。

是否有一种技巧可以在这些图像链接之一中进行中间点击以使用自动滚动而不是在新选项卡中打开链接？

这是一个演示该问题的小提琴：http: [//jsfiddle.net/uBrbb/](http://jsfiddle.net/uBrbb/)

我原来的小提琴实际上显示了滚动条 - 然后允许在滚动条本身上单击鼠标中键 - 但在我的实际情况下，滚动条用负填充隐藏，以便我可以显示自定义滚动条（我使用简单的模拟向上/向下按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:55:58.657

您可以做一些复杂的事情，但如果可能的话，最好不要一开始就将`<img>`元素包装起来`<a></a>`，而是通过响应您自己的`click()`事件来处理导航。在您的`click`事件中，仅在条件`(e.which == 1)`（左键单击）下执行导航，将中键单击保留为默认行为。

# python - Macbook 视网膜显示器上的 PyOpenGL

> ID：14784317
> 
> 赞同：5
> 
> 时间：2013-02-09T02:29:07.647
> 
> 标签：python, osx-lion, glut, retina-display, pyopengl

我有一些代码在 glut 窗口中使用 PyOpenGL 显示图形。在视网膜 Macbook Pro 上，此窗口以低分辨率模式显示，一个 OpenGL 像素由四个物理像素表示。如果它以完整的原始分辨率显示会更好。

**我的问题**
有什么方法可以在 Retina 显示器上使用 glut 或其他方式在 Python 中获得原生分辨率的 OpenGL 上下文？

**问题示例**
下面是 PyOpenGL 程序的最小工作示例。它没有什么特别之处——任何工作的 PyOpenGL 代码都会出现这个问题。这是屏幕截图的放大细节。请注意，构成白色三角形的像素是 OS X 小部件像素大小的四倍。这是不是专门为 Retina 设备设计的程序的默认设置。我想知道如何为 PyOpenGL 程序关闭它。

![在此处输入图像描述](../Images/eca1312c3c3768223285bbca67c0c9bf.png)

这是代码：

```
from OpenGL.GL import *
from OpenGL.GLUT import *
from OpenGL.GLU import *

import os

def initFunc():
    glDisable(GL_DEPTH_TEST)
    glClearColor(0.0, 0.0, 0.0, 0.0)
    glMatrixMode(GL_PROJECTION)
    glLoadIdentity()
    gluOrtho2D(0.0, 400.0, 0.0, 400.0)

def displayFunc():
    glClear(GL_COLOR_BUFFER_BIT)
    glColor3f(1.0, 1.0, 1.0)
    glBegin(GL_TRIANGLES)
    glVertex2f(10.0, 10.0)
    glVertex2f(10.0, 100.0)
    glVertex2f(100.0, 100.0)
    glEnd()
    glFlush()

if __name__ == '__main__':
    glutInit()
    glutInitWindowSize(400,400)
    glutCreateWindow("GL test")
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)
    glutDisplayFunc(displayFunc)
    initFunc()
    os.system('''/usr/bin/osascript -e 'tell app "Finder" to set frontmost of process "Python" to true' ''')
        # prevent GL window from appearing behind other applications
    glutMainLoop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T16:11:35.913

要正确实现您所追求的分辨率，您需要使用 a`NSView`然后指示视图应该使用最佳分辨率（这也意味着您不再应该使用 GLUT）。由于这超出了 OpenGL 的范围，并且您想使用 Python，您将需要使用一些包来访问这些类型的对象以及 py2app（但`build`不需要完整的 py2app）。

为了访问一个`NSView`，或者更具体地说是`NSOpenGLView`满足您的需要，`pyobjc`是必需的。以下代码导入`Cocoa`（由 提供`pyobjc`）只是为了清楚起见，可以通过 访问相同的对象`AppKit`。代码创建一个`NSWindow`，然后是一个定义在`drawRect`需要时调用的视图。解决分辨率问题的单行是：`view.setWantsBestResolutionOpenGLSurface_(True)`.

```
import Cocoa
from OpenGL.GL import *
from OpenGL.GLU import *

class GLView(Cocoa.NSOpenGLView):
    def initWithFrame_(self, frame):
        format = Cocoa.NSOpenGLPixelFormat.alloc().initWithAttributes_((0, ))
        view = super(GLView, self).initWithFrame_pixelFormat_(frame, format)
        view.setWantsBestResolutionOpenGLSurface_(True)

        view.openGLContext().makeCurrentContext()
        glDisable(GL_DEPTH_TEST)
        glClearColor(0.0, 0.0, 0.0, 0.0)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()
        gluOrtho2D(0.0, 1.0, 0.0, 1.0)
        return view

    def drawRect_(self, bounds):
        glClear(GL_COLOR_BUFFER_BIT)
        glColor3f(1.0, 1.0, 1.0)
        glBegin(GL_TRIANGLES)
        glVertex2f(0.1, 0.1)
        glVertex2f(0.1, 0.9)
        glVertex2f(0.9, 0.9)
        glEnd()
        glFlush()

class AppDelegate(Cocoa.NSObject):
    def windowWillClose_(self, notification):
        app.terminate_(self)

app = Cocoa.NSApplication.sharedApplication()

rect = Cocoa.NSMakeRect(0, 0, 300, 300)
winflags = Cocoa.NSTitledWindowMask | Cocoa.NSClosableWindowMask
win = Cocoa.NSWindow.alloc().initWithContentRect_styleMask_backing_defer_(
        rect, winflags, Cocoa.NSBackingStoreBuffered, False)
delegate = AppDelegate.alloc().init()
win.setDelegate_(delegate)
view = GLView.alloc().initWithFrame_(rect)
win.setContentView_(view)
win.makeKeyAndOrderFront_(None)

app.run() 
```

如果您尝试运行此代码，它会运行得很好，但您不会注意到有关分辨率问题的任何差异。为了解决这个问题，您需要构建一个简单`setup.py`的假设，假设上面的代码保存在一个名为的文件中`test1.py`：

```
from distutils.core import setup
import py2app
setup(app=["test1.py"]) 
```

然后运行`mypythonexecutable setup.py py2app -A`（当然，`mypythonexecutable`这里被一些有意义的东西代替，例如`python`or `python2.7`）。现在你这样做`open dist/test1.app`了，问题就解决了（`dist/test1.app`将在前面的命令执行后创建）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T13:26:01.683

您可以从此处获取可选支持 HiDPI 的 GLUT 修补版本：http: [//iihm.imag.fr/blanch/software/glut-macosx/](http://iihm.imag.fr/blanch/software/glut-macosx/)

如果您使用此 GLUT 框架，您的应用程序可能会选择以实际屏幕像素分辨率获取 OpenGL 上下文。您只需要更改代码（无论是 C、Python/PyOpenGL 还是任何与 GLUT 框架链接的东西）中的显示初始化：

```
glutInitDisplayMode(GLUT_RGBA|GLUT_DOUBLE) 
```

至：

```
glutInitDisplayString("rgba double hidpi") 
```

修补后的版本优雅地处理具有不同后备存储比例因子的多个屏幕，并为期望以像素指定大小或尺寸（即，`glutInitWindowSize, glutReshapeWindow, glutGet(GLUT_WINDOW_WIDTH), glutGet(GLUT_WINDOW_HEIGHT)`传递给事件回调的光标位置）的各种函数提供一致的行为。

此版本的 GLUT 还完全向后兼容其他决定不选择加入 HiDPI 支持的应用程序。如果您更喜欢构建自己的版本，还提供了补丁和自行构建框架的说明。

如果您需要，补丁版本还增加了鼠标滚轮支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:45:56.180

我想你必须使用一些 PyObjC 绑定来获取 Glut 创建的 NSWindow ，然后摆弄比例因子。以下是有关 Objective C 部分的一些信息：http: [//supermegaultragroovy.com/2012/10/24/coding-for-high-resolution-on-os-x-read-this/](http://supermegaultragroovy.com/2012/10/24/coding-for-high-resolution-on-os-x-read-this/)

# c - 对 C 中的指针和更改内存地址的数据感到困惑

> ID：14784318
> 
> 赞同：0
> 
> 时间：2013-02-09T02:29:30.737
> 
> 标签：c, pointers, memory

我想如果有人能在我正在进行的当前项目中帮助我，我会更好地理解这个概念。我想使用 C 使用指针编辑特定内存地址的数据。具体来说，我有两个字符数组（字符串），我既需要从特定位置读取数据，也需要在特定位置写入数据。

我主要对指针的语法感到困惑，例如`*`and`->`和`&`。

据我了解，`*`指的是保存在指针当前内存地址的数据。因此，例如，如果我想编辑 a 的起始内存地址处的数据`char *p`，我会执行以下操作： `(*p) = 'c';`

现在，如果我想从开头更改*第二个*内存地址的字符怎么办`p`？

另外，我理解是`&`指指针的位置。但我不知道如何使用这种语法。

这是我的例子：

```
 int orig_length = strlen(original_string); //-1 for \0?
char *poriginal, *pnew_string;

poriginal = &original_string; 

while(orig_length>0) {
 k = 0;
 j = 0;
 while(isalpha(*(poriginal+j))) { 
   j++;
   k++;
 }
 while(k > 0) {
   *(pnew_string+(j-k)) = toupper(*(poriginal+k-1)); //toupper
   k--;
 }
 if(*(poriginal+(j)) == '_') { 
   *(pnew_string+(j)) = ' '; 
 }
 else {
   *(pnew_string+(j)) = *(poriginal+(j)); 
 }
 orig_length = orig_length - j;
}
*(pnew_string+strlen(pnew_string)) = '\0'; //Syn? Is this actually necessary? 
... //program continues... 
```

顺便说一句，这个程序是用来接收一个字符串“now_i_understand！”的。并反转每个单词，将每个单词大写，将 _ 切换为 ' '，并保留其他标点符号：“WON I DNATSREDNU！”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T02:43:02.880

如果您要处理的是一个字符数组（确实如此），请使用数组语法：

```
pnew_string[j+1] = poriginal[j+1]; 
```

请注意，此语法等效于：

```
*(pnew_string + j + 1) = *(poriginal + j + 1); 
```

但更具可读性。

鉴于此示例，处理您遇到的大多数其他情况应该是显而易见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:01:46.123

和运算`*`符`&`互为逆。指针对象保存内存中其他对象的*地址（或者它旧的**空指针*，它不指向任何对象）。

一元运算`*`符接受一个指针操作数，并为您提供它指向的对象；这称为*取消引用*。

一元运算`&`符接受一个引用任何类型对象的操作数，并为您提供指向该对象的指针。`&`是*地址*运算符。

例如：

```
int obj = 42; /* obj is an object of type int; it currently holds the value 42 */
int *ptr;     /* ptr is a pointer to an int */
ptr = &obj;   /* ptr now holds the address of obj */
printf("obj = %d\n", obj); /* prints 42 */
printf("*ptr = %d\n", *ptr); /* also prints 42; *ptr is another name for obj */ 
```

`->`运算符是取消引用指针并访问它所指向的成员的简写。前缀必须是指向结构或联合的指针。`foo->bar`与 的含义相同`(*foo).bar`，其中`foo`是指针，`bar`是指向的成员的名称`foo`。

您还可以对指针执行算术运算。if`ptr`是指向数组元素的指针，则`ptr + 1`指向数组的下一个元素，`ptr + 2`指向之后的元素，依此类推。

`[]`数组索引运算符实际上是根据指针算术定义的。`ptr[2]`与 的意思完全相同`*(ptr+2)`。结合这一事实，在大多数情况下，数组名称会衰减为指向数组第一个元素的指针，稍加思考您就会看到如何`arr[2]`引用数组的第三个元素`arr`（第三个，因为索引从 开始`0`）。

[我强烈推荐comp.lang.c FAQ](http://c-faq.com/)的第 4 节（指针）和第 6 节（数组和指针）；它可能会比我更好地解释这些东西。

# android - Monkeyrunner 不接触 webview

> ID：14784320
> 
> 赞同：6
> 
> 时间：2013-02-09T02:29:58.210
> 
> 标签：android, testing, webview, monkeyrunner

我需要测试包含带有按钮的 WebView 的 android 应用程序。

Monkeyrunner 适用于除 WebView 之外的应用程序的所有部分。WebView 中的按钮只是忽略来自 Monkeyrunner 的触摸。我看到那个按钮被点击了，因为它变成了灰色，但是按钮什么也没做。如果我在模拟器上使用鼠标或在真实设备上使用手指，那么按钮效果很好。

我从 logcat 看到触摸事件已发送到应用程序，但应用程序没有任何操作。

一些代码：

```
final WebView w = (WebView) findViewById(R.id.webView1);
String summary = "<html><body><b>Google</b><form action=http://google.com><input type=submit><input type=text></form></body></html>";
w.loadData(summary, "text/html", null); 
```

布局：

```
 <Button android:id="@+id/button1" android:text="Click me!" />
 <WebView android:id="@+id/webView1" /> 
```

Monkeyrunner py：

```
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
device = MonkeyRunner.waitForConnection(10)
# android.widget.Button COORDINATES - THIS WORKS FINE
device.touch(10,100, 'DOWN_AND_UP')
# WEBVIEW BUTTON COORDINATES - BUTTON DOESN'T WORK
device.touch(200,200, 'DOWN_AND_UP') 
```

我曾单独尝试过DOWN延迟UP - 结果相同。来自 Python 或来自 Java 内部的 Monkeyrunner 也不起作用。像 ChimpChat 这样的 monkeyrunner 的口味和包装不起作用。

我认为它应该可以工作，因为有这么多的 web/HTML5 应用程序，而且所有这些应用程序都没有经过测试是不可能的。但它似乎相反。有关如何为 WebView 组件强制执行触摸事件的任何想法或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-13T12:54:14.687

This was a bug which I had reported to Android team. Some people had confirmed it. However with time it was merged with another bug and later that another bug was closed as "works as designed". Fortunately after few next Android versions it started to work as it supposed to do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:30:52.873

我已经测试了您提供的示例代码，并且能够在 WebView 控件上执行触摸事件而没有任何问题。我能想到的几种方法可以使它对您有用：

*   确保触摸在正确的位置，请注意触摸功能使用屏幕像素而不是倾斜，当您尝试在多个设备上进行测试时，这很可能会有所不同。您可以使用模拟器附带的“开发工具”应用程序中的“指针位置”来获取按钮的确切位置。
*   您可以使用键盘事件而不是触摸事件来导航 UI。例如，您提供的示例应用程序可以这样完成：

    ```
    from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
    device = MonkeyRunner.waitForConnection(10)
    device.press('KEYCODE_DPAD_DOWN')
    device.press('KEYCODE_DPAD_CENTER') 
    ```

    并且会产生想要的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T07:46:44.393

这不是答案，但我认为它可能会有所帮助。

Square 发布了一个名为“Spoon”的新仪器测试框架。它允许您做任何您想做的事情，并且在我运行的几个测试中运行良好。我还没有尝试过 webviews，但我认为它也应该涵盖这些。它是由 Jake Wharton（ActionBarSherlock 背后的人）创建的。如果您想尝试一下，请点击以下链接：

[http://square.github.com/spoon/](http://square.github.com/spoon/)

# c# - 使用类型变量调用正确的泛型方法，不带 out 和 ref

> ID：14784322
> 
> 赞同：1
> 
> 时间：2013-02-09T02:30:13.773
> 
> 标签：c#, generics, types, lambda, invoke

```
static class Example
{
    public static string Method<T>(ref List<string> p2, out string p3, string p4)
    {
      ...
    }
    public static string Method<T>(ref List<string> p2, out string p3, int p4)
    {
      ...
    }
} 
```

以下显然不起作用，但这就是想法：

```
public static string MethodCaller(Type theType, ref List<string> p2, out string p3, string p4)
{
    Method<theType>(ref p2, out p3, p4);
} 
```

使用 GetMethod？它如何知道要使用两个重载方法中的哪一个？我们应该使用 Expression.Call 吗？我们如何处理 ref 和 out 参数？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T06:52:32.220

这可以通过反射来完成，尽管找到正确的重载有点麻烦：

```
class Program
{
    static void Main(string[] args)
    {
        List<string> p2 = new List<string>();
        string p3;
        string p4 = "input string";
        string result = MethodCaller(typeof(DateTime), ref p2, out p3, p4);
    }

    public static string MethodCaller(Type theType, ref List<string> p2, out string p3, string p4)
    {
        MethodInfo method = (from m in typeof(Example).GetMethods()
                             let p = m.GetParameters()
                             where m.Name == "Method"
                             && p.Length == 3
                             && p[0].ParameterType.IsByRef
                             && p[0].ParameterType.HasElementType
                             && p[0].ParameterType.GetElementType() == typeof(List<string>)
                             && p[1].ParameterType.IsByRef
                             && p[1].ParameterType.HasElementType
                             && p[1].ParameterType.GetElementType() == typeof(string)
                             && p[2].ParameterType == typeof(string)
                             select m).Single();
        MethodInfo genericMethod = method.MakeGenericMethod(theType);
        object[] parameters = new object[] { null, null, p4 };
        string returnValue = (string)genericMethod.Invoke(null, parameters);
        p2 = (List<string>)parameters[0];
        p3 = (string)parameters[1];
        return returnValue;
    }
}

static class Example
{
    public static string Method<T>(ref List<string> p2, out string p3, string p4)
    {
        p2 = new List<string>();
        p2.Add(typeof(T).FullName);
        p2.Add(p4);
        p3 = "output string";
        return "return value";
    }

    public static string Method<T>(ref List<string> p2, out string p3, int p4)
    {
        p2 = new List<string>();
        p2.Add(typeof(T).FullName);
        p2.Add(p4.ToString());
        p3 = "output string";
        return "return value";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T21:34:03.523

我一直在寻找某种类似的方法，但不幸的是没有找到它 - 但后来决定自己解决它。然而——在原型设计过程中，我发现“out”和“ref”是相互排斥的——所以你只能支持其中一个。

所以我想支持如下语法：

```
 object DoCall<A1>( String function, A1 a1 ) 
```

这将需要生成如下函数：

```
 object DoCall<A1>( String function, out A1 a1 )
 object DoCall<A1>( String function, ref A1 a1 ) 
```

哪个编译器不喜欢。

所以我决定只支持'ref'关键字——因为它可以支持进出方向，但'out'只支持出方向。

但另外就像有人可能注意到的那样——如果你需要支持所有类型的参数排列——简单的编码是不够的——你需要编写代码生成器——我最后做了什么。

所以测试代码看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace TestReflection
{
    public class CustomClassAsArg
    {
        public string MyInfo { get; set; }
    }

    public class CallMe
    {
        public void Hello1(String msg, int i)
        {
            Console.WriteLine(msg + ": " + i.ToString());
        }

        public void Hello2(ref String msg)
        {
            msg += "out string";
        }

        public void Hello2(ref int a)
        {
            a += 2;
        }

        public string Hello3(string a)
        {
            return a + "--";
        }

        public static bool MyStaticMethod( int arg, ref String outs )
        {
            outs = "->" + arg.ToString();
            return true;
        }

        public bool? ThreeStateTest( int i )
        {
            switch ( i )
            {
                case 0:
                    return null;
                case 1:
                    return false;
                case 2:
                    return true;
            }

            return null;
        }

        public void UpdateCC( CustomClassAsArg c )
        {
            c.MyInfo = "updated";
        }

    }

    class Program
    {
        static void Main(string[] args)
        {
            ClassCaller.UpdateSourceCodeHelperFunctions(2);

            CallMe m = new CallMe();
            ClassCaller c = new ClassCaller(m);
            string r = "in string ";
            int arg = 1;
            String sx = "";
            object ox = c.DoCall("!MyStaticMethod", 23, ref sx);
            Console.WriteLine(sx);

            c.DoCall("Hello1", "hello world", 1);
            c.DoCall("Hello2", ref r);
            Console.WriteLine(r);
            c.DoCall("Hello2", ref arg);
            Console.WriteLine(arg.ToString());

            bool? rt = (bool?)c.DoCall("ThreeStateTest", 0);
            rt = (bool?)c.DoCall("ThreeStateTest", 1);
            rt = (bool?)c.DoCall("ThreeStateTest", 2);

            CustomClassAsArg ccarg = new CustomClassAsArg();
            c.DoCall("UpdateCC",ccarg);

        } //Main
    }
} 
```

和 ClassCaller.cs 本身：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

/// <summary>
/// Helper class for performing invoke function call in dynamically loaded assembly.
/// </summary>
public class ClassCaller
{
    Type type;
    object o;
    bool throwOnError;

    /// <summary>
    /// Can specify class using only assembly name / class type without
    /// actual class instance - if you intend to call only static methods.
    /// </summary>
    /// <param name="assemblyName">Assembly name</param>
    /// <param name="className">Class name, including namespace</param>
    /// <param name="_throwOnError">true if throw on error</param>
    public ClassCaller(String assemblyName, String className, bool _throwOnError)
    {
        throwOnError = _throwOnError;
        Assembly asm = AppDomain.CurrentDomain.GetAssemblies().Where(x => x.GetName().Name == assemblyName).FirstOrDefault();
        if (asm == null)
        {
            if (_throwOnError)
                throw new NullReferenceException("Assembly with name '" + assemblyName + "' was not found");

            return;
        }

        type = asm.GetType(className, _throwOnError);
    }

    public ClassCaller(object _o)
    {
        type = _o.GetType();
        o = _o;
    }

    /// <summary>
    /// Gets method to invoke. 
    /// </summary>
    /// <param name="func">Function name to get. Use '!' as a prefix if it's static function.</param>
    /// <param name="types">Function argument types.</param>
    /// <returns>Method to be invoked.</returns>
    public MethodInfo GetFunc(String func, Type[] types)
    {
        bool bIsStatic = func.FirstOrDefault() == '!';
        if (bIsStatic) func = func.Substring(1);

        BindingFlags f = BindingFlags.Public | BindingFlags.NonPublic;
        if (!bIsStatic)
            f |= BindingFlags.Instance;
        else
            f |= BindingFlags.Static;

        MethodInfo m = type.GetMethod(func, f, null, types, null);

        if (m == null && throwOnError)
            throw new NotSupportedException("Compatible function '" + func + "' not found");

        return m;
    }

    //Autogenerated code starts (Do not edit)

    public object DoCall(string func)
    {
        Type[] types = new Type[] { };
        object[] args = new object[] { };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        return r;
    }

    public object DoCall<A1>(string func, A1 a1)
    {
        Type[] types = new Type[] { typeof(A1) };
        object[] args = new object[] { a1 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        return r;
    }

    public object DoCall<A1>(string func, ref A1 a1)
    {
        Type[] types = new Type[] { typeof(A1).MakeByRefType() };
        object[] args = new object[] { a1 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        a1 = (A1)args[0];
        return r;
    }

    public object DoCall<A1, A2>(string func, A1 a1, A2 a2)
    {
        Type[] types = new Type[] { typeof(A1), typeof(A2) };
        object[] args = new object[] { a1, a2 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        return r;
    }

    public object DoCall<A1, A2>(string func, ref A1 a1, A2 a2)
    {
        Type[] types = new Type[] { typeof(A1).MakeByRefType(), typeof(A2) };
        object[] args = new object[] { a1, a2 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        a1 = (A1)args[0];
        return r;
    }

    public object DoCall<A1, A2>(string func, A1 a1, ref A2 a2)
    {
        Type[] types = new Type[] { typeof(A1), typeof(A2).MakeByRefType() };
        object[] args = new object[] { a1, a2 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        a2 = (A2)args[1];
        return r;
    }

    public object DoCall<A1, A2>(string func, ref A1 a1, ref A2 a2)
    {
        Type[] types = new Type[] { typeof(A1).MakeByRefType(), typeof(A2).MakeByRefType() };
        object[] args = new object[] { a1, a2 };
        MethodInfo f = GetFunc(func, types);
        if (f == null)
            return null;
        object r = f.Invoke(o, args);
        a1 = (A1)args[0];
        a2 = (A2)args[1];
        return r;
    }

    //Autogenerated code ends

    public static void UpdateSourceCodeHelperFunctions( int nParametersToSupport)
    {
        String srcFilename = new StackTrace(true).GetFrame(0).GetFileName();
        String src = File.ReadAllText(srcFilename, Encoding.UTF8);

        String autogenRegex = "(Autogenerated\\scode\\sstarts.*?[\r\n]{2})(.*)([\r\n]{2}\\s+//Autogenerated\\scode\\sends)";

        if (!Regex.Match(src, autogenRegex, RegexOptions.Singleline).Success)
        {
            Console.WriteLine("Error: Invalid source code");
            return;
        }

        string[] argType = new String[] { "", "ref" };

        String s = "";
        string lf = "\r\n";
        string headSpace = "    ";
        for (int callArgs = 0; callArgs <= nParametersToSupport; callArgs++)
        {
            int[] argTypes = new int[callArgs];
            int iterations = (int)Math.Pow(2, callArgs);
            for (int i = 0; i < iterations; i++)
            {
                //public object DoCall<A1, A2>(String func, A1 a1, A2 a2)
                s += headSpace;
                s += "public object DoCall" + ((callArgs != 0) ? "<" : "");
                s += String.Join(", ", Enumerable.Range(1, callArgs).Select(n => "A" + n));
                s += (callArgs != 0) ? ">" : "";
                s += "(string func";

                String types = "";
                String paramsList = "";

                bool[] isRefType = new bool[callArgs];

                for (int iArg = 0; iArg < callArgs; iArg++)
                {
                    isRefType[iArg] = (((1 << iArg) & i) != 0);
                    String isRef = isRefType[iArg] ? "ref " : "";
                    String argTypeName = "A" + (iArg + 1);
                    String argName = "a" + (iArg + 1);
                    s += ", ";
                    s += isRef;
                    s += argTypeName + " " + argName;

                    if (iArg != 0)
                    {
                        types += ", ";
                        paramsList += ", ";
                    }

                    types += "typeof(" + argTypeName + ")";
                    if (isRefType[iArg])
                        types += ".MakeByRefType()";

                    paramsList += argName;
                } //for

                s += ")";
                s += lf;
                s += headSpace + "{" + lf;

                //Type[] types = new Type[] { typeof(A1).MakeByRefType() };
                s += headSpace + "    ";
                if( types.Length != 0 ) types += " ";
                s += "Type[] types = new Type[] { " + types + "};";
                s += lf;

                //object[] args = new object[] { a1 };
                s += headSpace + "    ";
                if( paramsList.Length != 0 ) paramsList += " ";
                s += "object[] args = new object[] { " + paramsList + "};";
                s += lf;

                //MethodInfo f = GetFunc(func, types);
                //if (f == null)
                //    return null;
                //object r = f.Invoke(o, args);
                s += headSpace + "    MethodInfo f = GetFunc(func, types);" + lf;
                s += headSpace + "    if (f == null)" + lf;
                s += headSpace + "        return null;" + lf;
                s += headSpace + "    object r = f.Invoke(o, args);" + lf;

                for (int iArg = 0; iArg < callArgs; iArg++)
                {
                    if (!isRefType[iArg])
                        continue;
                    // a1 = (A1)args[0];
                    String argTypeName = "A" + (iArg + 1);
                    String argName = "a" + (iArg + 1);

                    s += headSpace + "    ";
                    s += argName + " = (" + argTypeName + ")args[" + iArg + "];";
                    s += lf;
                }

                s += headSpace + "    return r;" + lf;
                s += headSpace + "}" + lf;
                s += lf;
            }

        } //for

        String oldautogenCode = Regex.Match(src, autogenRegex, RegexOptions.Singleline).Groups[2].Value;

        //
        // Visual studio text editor configuration affects spacing. We trim here everything so we can compare output.
        //
        oldautogenCode = oldautogenCode.Replace(" ", "").TrimStart('\r','\n');
        String newautogenCode = s.Replace(" ", "").TrimStart('\r', '\n');

        String newSrc = Regex.Replace(src, autogenRegex, "$1\r\n" + s + "$3", RegexOptions.Singleline);

        if (oldautogenCode == newautogenCode)
        {
            Console.WriteLine("Source code is up-to-date.");
        }
        else
        {
            File.WriteAllText(srcFilename, newSrc, Encoding.UTF8);
        }
    } //UpdateSourceCodeHelperFunctions
} //class ClassCaller 
```

所以：

```
ClassCaller.UpdateSourceCodeHelperFunctions(2); 
```

函数重新生成自动生成的代码部分以支持 - 出于演示目的，我现在只支持 2 个要调用的参数，但通常您需要更多参数 - 但这会增加自动生成的代码大小。

自动生成的代码只能在调试模式下更新，而不是在发布配置中。（但这在发布时根本不需要）。

也许这不是您问题的直接答案，但我认为它符合您的想法。

反射调用要求所有参数类型 100% 正确匹配 - 否则反射将无法找到所需的方法。

此解决方案也有局限性 - 例如，如果某些参数是可选的，它将无法找到正确的方法 - 例如：

```
void DoMethod( int a, int b = 0 ); 
```

所以你可以打电话：

```
DoMethod(5); 
```

但不是：

```
DoCall("DoMethod", 5); 
```

它必须是完整的参数集：

```
DoCall("DoMethod", 5, 0); 
```

我知道通过反射调用的方法在消耗时间方面可能会很昂贵，所以在使用它之前要三思而后行。

**更新 31.5.2016**我还发现 C# 的“动态”关键字也可用于动态调用特定方法，而无需了解反射方法调用详细信息，但动态仅对实例进行操作，使用 ClassCaller 仍然更容易进行静态方法调用.

# html - 如何让元素留在容器内？

> ID：14784323
> 
> 赞同：1
> 
> 时间：2013-02-09T02:30:39.523
> 
> 标签：html, css

示例代码在这里[http://jsfiddle.net/BLrKd/](http://jsfiddle.net/BLrKd/)。如果您水平缩短页面，搜索框会移到页面顶部的标题之外。我怎样才能让所有元素都留在标题中？

基本上我正在尝试制作一个行为类似于stackoverflow的标题。对于stackoverflow，如果您使页面更小，则标题元素将保留在标题中并且不会向上或向下移动。

这是jsfiddle不起作用的代码

```
<body>
    <div id="header">
        <div id="page-nav" >
            <a id="login" href="/login">login</a>
            <form id="search-form" action="search.py" method="get">
                <input id="searchbox" type="text" name="q" placeholder="search"/>
            </form>
        </div>
    </div>
</body> 
```

这是CSS

```
body {
    margin: 0;
    padding: 0;
}
#header {
    background-color: #015367;
    overflow:hidden;
    height: 50px;
    /*border-style:solid;*/
}

#login {
    color: #b92c2c;
    font-size: 1.25em;
    float: left;
    margin-left: 10em;
    margin-top: 16px;
    text-decoration: none;
    /*border-style:solid;*/
}
#page-nav
{
    float: right;
    margin-right: 13em;
    /*border-style:solid;*/
    /*border-color:white;*/
}

#search-form {
    float: right;
    margin-left: 0.5em;
    margin-right: 1em;
    margin-top: 16px;
    /*border-style:solid;*/
    /*border-color:yellow;*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T02:56:22.190

只需指定最小宽度：

```
#header{
  min-width: 720px;  /* or whatever the size of the content is */
} 
```

（并删除溢出属性，不需要）

# php - 使用 PHP 和 Javascript 进行重定向并设置 cookie

> ID：14784324
> 
> 赞同：0
> 
> 时间：2013-02-09T02:30:47.540
> 
> 标签：php, javascript, redirect

好吧，我会尽量保持这个简单和甜蜜。我正在开发我的网站，当用户首次加载网站时，它当前会加载启动页面。这就是我想要的行为。

1.  如果用户以前从未访问过该站点，则重定向到启动页面。
2.  如果用户之前访问过该站点并且不想看到启动画面，请不要重定向。
3.  如果用户喜欢启动画面并希望在新会话中看到，则显示启动画面。

那些基本上是我正在使用的场景，真的想不出更多了，在过去的几个小时里一直试图破解一些东西，但没有运气。

**索引.php**

```
<?php
setcookie("visit", "true", mktime (0, 0, 0, 12, 31, 2014), "/"); // delete cookie on 31DEC14

$cookie_splash = $_COOKIE['splash'];
$cookie_visit = $_COOKIE['visit'];
$cookie_visit_now = $_COOKIE['visit_now'];

do {

    if ($cookie_splash == '' && $cookie_visit == '' && $cookie_visit_now == '') {
        /*
        echo "<script type = text/javascript>";
        echo "window.location = 'http://chrisrjones.com/splash.php'";
        echo "</script>";
        */
        header('Location: splash.php');
    }

    if ( $cookie_splash == 'false' && $cookie_visit_now == 'true') {
    break;
    }

    if ( $cookie_splash == 'true' && $cookie_visit_now == 'false') {
        /*
        echo "<script type = text/javascript>";
        echo "window.location = 'http://chrisrjones.com/splash.php'";
        echo "</script>";
        */
        header('Location: splash.php');
    }

    if ( $cookie_splash == 'true' && $cookie_visit == 'true' && $cookie_visit_now == "false") {
        /*
        echo "<script type = text/javascript>";
        echo "window.location = 'http://chrisrjones.com/splash.php'";
        echo "</script>";
        */
        header('Location: splash.php');
    }

    if ($cookie_splash == 'true' && $cookie_visit == 'true' && $cookie_visit_now == 'true') {
        break;
    }
}
while (0);

?> 
```

**飞溅.php**

```
<p>
    <form name="tosplashornottosplash" action="scripts/splash-process.php" method="post" onSubmit="return valForm()">
    Splash pages are stupid.

    <input type="radio" name="splash" id="splash_false" value="false" /> No
    <input type="radio" name="splash" id="splash_true" value="true" /> Yes

    <input type="submit" name="splashSubmit" onClick="return valForm(tosplashornottosplash)" value="Enter" />
    </form>
    </p> 
```

**飞溅过程.php**

```
 <?php 

    setcookie("visit", "true", mktime (0, 0, 0, 12, 31, 2014), "/"); // delete cookie on 31DEC14
    setcookie("visit_now", "true", NULL, '/'); // cookie should expire / delete at end of session.

    $splashvar = $_POST["splash"];

    if ( $splashvar == "false" ) {
        // create cookie - splash 1
        setcookie("splash", "true", time()+3600, '/'); // expires in one hour
    }
        else {
            // create cookie - splash 0
            setcookie("splash", "false", time()+3600, '/'); // expires in one hour
        }

    echo "<script type = text/javascript>";
    echo "window.location = 'http://chrisrjones.com/index.php'";
    echo "</script>";

    ?> 
```

去 chrisrjones.com 看看我在说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:48:39.743

尝试以下操作：

```
<?php
if (($_GET['nosplash'] == '1') || ($_COOKIE['nosplash'] == '1')) {
    setcookie('nosplash','1',strtotime('+1 year'),'/');
    header('Location: http://'.$_SERVER['HTTP_HOST'].'/index2.html');
    exit;
}

?><html>
<head>
<title>Splash screen</title>
</head>
<p>
Splash screen
</p>
<p>
<a href="/index2.html">continue (and show splash screen on next visit)</a><br />
<a href="<?=$_SERVER['SCRIPT_NAME']?>?nosplash=1">continue and don't show the splash again</a>
</p>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:15:43.197

好吧，所以我认为问题不在于我的代码，而在于了解浏览器的行为方式。如果我现在在 FF 18.0.2 中访问该站点 (chrisrjones.com) 并在启动页面上选择“否”是愚蠢的，那么我可以在单击 Enter 后进入该站点。

但是，如果我让标签保持打开状态，并将 FF 设置为在重新启动时保持标签打开（不管它叫什么，你知道我的意思），然后退出 FF，然后重新启动它，会话 cookie 永不过期。因此，当我刷新页面时，不会加载启动页面。但是，如果我关闭选项卡然后退出浏览器然后重新加载页面，则会加载启动页面。（这就是我想要的）。

另一方面，一旦浏览器关闭，Chrome 似乎不会删除会话 cookie，所以这就是我在使用 Chrome 时遇到如此困难的原因。

我现在对为什么事情会这样表现有了更好的理解，并意识到这并不是我糟糕的编码习惯。

# solr - Solr 4 将分片添加到现有集群

> ID：14784326
> 
> 赞同：2
> 
> 时间：2013-02-09T02:31:23.707
> 
> 标签：solr, lucene

**背景：**我刚读完[Apache Solr 4 Cookbook](http://www.packtpub.com/apache-solr-4-cookbook/book)。作者在其中提到需要明智地设置分片，因为不能将新的分片添加到现有集群中。但是，这是使用 Solr 4.0 编写的，目前我使用的是 4.1。现在还是这样吗？我希望我没有发现这个[问题](https://issues.apache.org/jira/browse/SOLR-3755)，我希望有人可以告诉我。

**问题：**在 SolrCloud 集群中设置分片时，我是否应该知道将来要存储多少数据？我玩过[Solandra](http://www.datastax.com/dev/blog/cassandra-with-solr-integration-details)并阅读过[弹性搜索](http://www.elasticsearch.org/)，但老实说，我是 Solr 的粉丝（以及它的大型社区！）。我也喜欢动物园管理员。我现在卡住了还是有解决方法/补丁？

***编辑：***如果上面的问题是否定的，我可以用一堆（可能是 100 个或更多）分片构建一个 SolrCloud 并让它们（内部）增长，而当我增长我的数据时，我开始将它们一个一个剥离并放入更大、更快拥有更多资源的服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T08:33:48.607

是的，当然可以。您必须设置一个指向同一个 zookeeper 实例的新 Solr 服务器。在引导期间，服务器连接到 zk ensemble 并将自己注册为集群成员。

注册过程完成后，服务器就可以创建新内核了。您可以使用[CoreAdmin](http://wiki.apache.org/solr/SolrCloud#Creating_cores_via_CoreAdmin)创建现有分片的副本。您也可以创建新的分片，但由于 Lucene 索引格式（并非所有字段都存储），它们不会被平衡，因为它可能没有所有文档信息来重新平衡集群，所以只有新的索引/更新的文档才能到达此服务器（**不推荐这样做**）。

当您设置 SolrCloud 时，您必须在考虑文档数量增长因素的情况下创建集群，因此如果您一开始有 1M 文档并且它以 10k 文档/天的速度增长，请使用 5 个分片设置集群，所以在开始时您必须在您的两台机器初始设置中托管此分片，但将来，您可以根据需要将新服务器添加到集群并将[这些分片移动到此新服务器](http://wiki.apache.org/solr/SolrCloud#Re-sizing_a_Cluster)。注意不要让集群过度增长，因为在 Lucene 中，跨 5 个分片拆分的单个 20Gb 索引不会是每个分片中的 4Gb 索引。每个分片大约需要 (single_index_size/num_shards)*1.1（由于字典压缩）。这可能会根据您的术语频率而改变。

您最后的机会是将新服务器添加到集群中，而不是向现有服务器添加新的分片/副本，而是使用您的新分片设置一个新的不同集合，并与这个新集合并行重新索引。然后，一旦你的重新索引过程完成，交换这个集合和旧的集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-22T14:02:01.990

该问题的一种解决方案是在创建集合时使用“隐式路由器”。

可以说 - 您必须将应用程序的所有“审计跟踪”数据索引到 Solr。每天都会添加新数据。您很可能希望按年分片。

您可以在集合的初始设置期间执行以下操作：

```
admin/collections?
action=CREATE&
name=AuditTrailIndex&
router.name=implicit&
shards=2010,2011,2012,2013,2014&
router.field=year 
```

上面的命令： a) 创建 5 个分片 - 当前和过去 4 年各一个 2010,2011,2012,2013,2014 b) 根据“年份”字段的值将数据路由到正确的分片（指定为路由器.字段）

在 2014 年 12 月，您可能会使用 CREATESHARD API（集合 API 的一部分）添加一个新的分片，为 2015 年做准备 - 执行以下操作：

```
/admin/collections?
action=CREATESHARD&
shard=2015&
collection=AuditTrailIndex 
```

上面的命令在同一个集合上创建一个新的分片。

在 2015 年时，假设您的数据的“年份”字段正确填充到 2015 年，所有数据都将自动索引到“2015”分片中。

在 2015 年，如果您认为不需要 2010 分片（根据您的数据保留要求） - 您可以随时使用 DELETESHARD API 来执行此操作：

```
/admin/collections?
action=DELETESHARD&
shard=2015&
collection=AuditTrailIndex 
```

PS 此解决方案仅在您在创建收藏时使用“隐式路由器”时才有效。当您使用默认的“compositeId 路由器”时不起作用 - 即使用 numshards 参数创建的集合。

此功能真正改变了游戏规则 - 允许根据您业务不断增长的需求动态添加分片。

# lua - LuaSocket - TCP 第二条消息未发送

> ID：14784329
> 
> 赞同：1
> 
> 时间：2013-02-09T02:31:42.183
> 
> 标签：lua, coronasdk

我一直在谷歌搜索一段时间，似乎没有解决我在这里遇到的这个问题的提议。

我使用 LuaSocket 作为连接到我创建的外部服务器的简单方法，并且能够成功连接到它并发送信号。

但是，当我稍后尝试发送第二条消息时，即使我仍然连接到套接字，外部服务器似乎也没有收到该消息。

```
socket = require("socket")
host, port = ip, port
tcp = assert(socket.tcp())
tcp:settimeout( 0 )

tcp:connect(host, port);

msg = {
    ["status"]="connect",
    ["usrName"]=username
}
msg = Json.Encode(msg)

tcp:send(msg); -- This message, the server received this message.

-- Later in my code, I attempt to send another message.

msg = {
    ["status"]="anotherMessage",
    ["usrName"]=username
};
msg = Json.Encode(msg) 
tcp:send(msg); -- This message is not sending, even though i'm still connected. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:56:54.007

您需要显示另一端发生的情况，因为即使连接可能打开，它也可能根本无法读取。您也没有说“消息未发送”时到底发生了什么；你有错误吗？脚本完成但未发送消息？

您可以尝试几件事：

*   切换到（默认）同步发送，直到你让它工作；remove `tcp:settimeout(0)`，因为如果对方还没有准备好阅读消息，您的发送可能会简单地失败并显示“超时”消息。
*   检查来自调用的错误消息`:send`，看看它是否超时。

    `local ok, err = tcp:send(msg)`

*   用于`socket.select`检查对方是否准备好接受您发送的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T23:58:11.740

尝试`"\r\n"`在序列化 JSON 的末尾添加。

# git - 关于使用 Windows 的 git 中的 LF 和 CRLF

> ID：14784330
> 
> 赞同：0
> 
> 时间：2013-02-09T02:31:46.980
> 
> 标签：git

我在 Windows 下使用 Git 来签入一些文件。我收到了类似的警告

LF 将被 foobar 中的 CRLF 替换

这个警告是什么意思？我可以做些什么来防止这个警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:34:01.720

这可能意味着您尝试添加一个以 LF 行结尾的文件，并且您已[`core.autocrlf`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)打开。将文件转换为 CR/LF 行结尾，或关闭`core.autocrlf`.

还有[这里](https://stackoverflow.com/questions/5834014/lf-will-be-replaced-by-crlf-in-git-what-is-that-and-is-it-important?rq=1)、[这里](https://stackoverflow.com/questions/1598260/make-crlf-warnings-go-away?rq=1)、[这里](https://stackoverflow.com/questions/1967370/git-replacing-lf-with-crlf)等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:52:34.603

这与`core.autocrlf`选项有关。手册是这样说的：

```
 core.autocrlf
       Setting this variable to "true" is almost the same as setting the
       text attribute to "auto" on all files except that text files are
       not guaranteed to be normalized: files that contain CRLF in the
       repository will not be touched. Use this setting if you want to
       have CRLF line endings in your working directory even though the
       repository does not have normalized line endings. This variable can
       be set to input, in which case no output conversion is performed. 
```

Git 会警告您他为您更改了行终止符。

我建议为项目设置全局策略（如“始终使用 unix 行结束”，反之亦然）并禁用此选项。有时事情会变得混乱，提交差异然后包含许多额外的空白更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:13:32.307

msysgit 默认系统配置是`core.autocrlf = true`，这意味着 CRLF 转换是开启的。

# javascript - 视频播放完毕后，播放按钮不会开始播放视频

> ID：14784332
> 
> 赞同：0
> 
> 时间：2013-02-09T02:32:10.723
> 
> 标签：javascript, css, html, html5-video

我有一个我正在制作的视频播放器的播放/暂停按钮。视频播放完一次后，我希望播放按钮让视频重新开始，但事实并非如此。

这是我使用的脚本：

```
function play(){
        if(!media.paused && !media.ended){
        media.pause();
        playButton.innerHTML='Play';
        window.clearInterval(updateBar);
    }else{
        media.play();
        playButton.innerHTML='Pause';
        updateBar=setInterval(update, 100)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:57:02.907

像这样构建你的函数怎么样

```
function play(){
    if (!media.paused) { // if currently playing (or ended?)
        if (media.ended) { // if at the end
            media.currentTime = 0; // go to start 
        } else { // else
            media.pause(); // pause
            playButton.innerHTML='Play';
            window.clearInterval(updateBar);
            return; // and end function here
        }
    } // then if function didn't end
    media.play(); // resume playing
    playButton.innerHTML='Pause';
    updateBar=setInterval(update, 100);
} 
```

您使用的 DOM 接口是[**HTMLMediaElement**](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)。

# python - Python CSV 错误：预期序列

> ID：14784334
> 
> 赞同：16
> 
> 时间：2013-02-09T02:33:20.853
> 
> 标签：python, csv

我正在尝试在 Python 中运行以下代码，但出现错误：

```
 csv.Error: sequence expected 
```

有谁知道我的代码有什么问题？（该文件先前已导入程序中）。

```
import csv
file = open('/home/btoms/Desktop/TomsBen/2000/01/01/20000101acme.mts', 'r')

variables = []

file.readline() #Skip a line
file.readline() 
file.readline() #Skip another line

for line in file:
    tmp = line.split()
    tmp_STID = str(tmp[0])
    tmp_T = float(tmp[4]) 
    tmp_RH = float(tmp[3])
    tmp_Times = float(tmp[2])
    variables.append(tmp_STID)
    variables.append(tmp_Times)
    variables.append(tmp_T)
    variables.append(tmp_RH)

    if tmp_T < 6.2 and tmp_RH > 60.0: 
    dataCSV = open('ProgramCheck.csv', 'w') 
    writer = csv.writer(dataCSV, dialect='excel')
    writer.writerow(['Station ID', 'Time', 'Temperature' , 'Relative Humidity']) 

    for values in variables:
        writer.writerow(values)
    else:
            pass
    file.close() 
```

错误出现为：

```
 Traceback (most recent call last):
      File "checkcsv.py", line 30, in <module>
        writer.writerow(values)
    _csv.Error: sequence expected 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-09T02:49:00.333

`writer.writerow`期望将值的序列（元组或列表）写入单行，该行中的每列一个值。你给它的是一个单一的值。您的代码确实应该看起来更像：

```
writer.writerow([tmp_STID, tmp_Times, tmp_T, tmp_RH]) 
```

在我看来，大部分代码应该在一个大循环中，每个站运行一次（因此每行运行一次）。

* * *

```
dataCSV = open('ProgramCheck.csv', 'w') 
writer = csv.writer(dataCSV, dialect='excel')
writer.writerow(['Station ID', 'Time', 'Temperature' , 'Relative Humidity']) 

for line in inputData:
    tmp = line.split()

    tmp_STID = str(tmp[0])
    tmp_T = float(tmp[4]) 
    tmp_RH = float(tmp[3])
    tmp_Times = float(tmp[2])

    if tmp_T < 6.2 and tmp_RH > 60.0: 
        writer.writerow([tmp_STID, tmp_Times, tmp_T, tmp_RH])

file.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T02:43:22.860

现在看起来你只是想写一个字符串

```
 writer.writerow(variables) 
```

将写整行

```
 tmp_STID = str(tmp[0])
    tmp_T = float(tmp[4]) 
    tmp_RH = float(tmp[3])
    tmp_Times = float(tmp[2]) 
```

检查变量列表

```
[tmp_STID, tmp_T, tmp_RH, tmp_Time] 
```

看起来您正在为每次迭代打开一个新的 csv 文件？那应该不在循环中吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T02:49:34.953

好吧，当你尝试使用“writeROW”方法时，试着想想 Python 的期望：) 只输入一个值是行不通的，因为每个值都在不同的行中，这可能不是你想要做的。相反，您可能会在一组中获得所有相互关联的值。

例如：华盛顿火车站 16:35 的温度为 26C，湿度为 85%。这将表示为：["Washington", "16:35", 26, 85]。

# mobile - 我可以为移动网站调用不同的 html 吗？基于宽度？

> ID：14784336
> 
> 赞同：0
> 
> 时间：2013-02-09T02:33:32.953
> 
> 标签：mobile, width

希望我的问题不会太模糊。

我设计了一个非常简单的网站。[您可以在此处](http://oi50.tinypic.com/1z18th5.jpg)查看它的图像>>>

但现在我正在尝试制作移动版本。但是我正在考虑为移动版本使用不同的 html，因为桌面版本有 jquery 弹出窗口（prettyPhoto）和一个非常大的可缩放背景，这在移动屏幕上不是很好。

我不确定该怎么做。因此，我的第一个问题是：

**1.) 如何为移动设备调用不同的 html？**

此外，对于平板电脑，网站在横向模式下呈现得很好，但在纵向模式下变得奇怪。所以我的第二个问题是：

**2.) 可以根据宽度调用这个不同的 html 吗？如果是这样，有什么想法吗？** 因此，如果平板电脑以纵向模式查看网站，他们将获得移动版，如果他们以横向模式查看网站，他们将获得桌面版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:49:14.217

我不确定您要尝试做什么，但是从开发人员和移动用户的经验来看，您提出的建议不是一个好主意。同样，由于您没有提到您要尝试做什么，所以我说的是一般性的。一致性对于 UX 来说非常重要，提供完全不同的行为和寻找方向听起来并不是一个好的可用性。另外，请记住，在今天的平板电脑上，切换方向非常容易。您会在每次方向更改时加载每个版本吗？如果用户使用 3G 怎么办？

但从技术上讲，可以根据宽度或方向进行加载。使用 AJAX，并加载适当的内容。

# android - 从列表适配器调用片段

> ID：14784344
> 
> 赞同：4
> 
> 时间：2013-02-09T02:34:21.390
> 
> 标签：android, android-fragments, android-listfragment, android-sliding

我在我的应用程序中使用滑动菜单/抽屉模式。所以主要活动有一个leftView，它是一个名为topicsFragment()的ListFragment，它加载一组主题项。单击项目/主题时，它会通过调用 FeedsFragment(tag) 替换主视图上的片段。FeedsFragment 使用 arraylist 适配器加载在每个列表项中具有各种可点击项的提要。当在列表项中单击一个项目时，我想在 feedsFragment(tag) 上获取另一个实例。

```
 holder.contextView= (TextView) newsView.findViewById(R.id.arcHeader);
    if (item.hasArc()) {
        holder.contextView.setVisibility(View.VISIBLE);
        String arc;
        try {
            arc=item.getarc();
            holder.contextView.setText(arc);

            holder.contextView.setOnClickListener(new View.OnClickListener() {

                //currently it loads a class
                @Override
                public void onClick(View v) { 
                   Intent i = new Intent(context, SomeClass.class); 
                   i.putExtra("tag", arc);
                   context.startActivity(i);
                }
            });
        } catch (JSONException e) {

            e.printStackTrace();
        }

    } else {
        holder.contextView.setVisibility(View.GONE);
    } 
```

目前它加载了一个新类。我想定义一个片段，然后传递给主要活动以替换为当前视图，但我不能在适配器类中使用 getSupportFragmentManager()，而只能在片段或片段活动中使用。除了从适配器中扫入片段之外，应该有什么替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:34:21.703

我所做的是在我的主要活动中创建此方法，然后从其他类中调用它来更改片段：

```
public void switchContent(Fragment fragment) {
        mContent = fragment;
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.fragment_container, fragment).commit();

        slidemenu.showContent();

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T22:08:54.570

通过使用列表适配器中传递的上下文来解决它：

```
@Override
public void onClick(View v) {
    Fragment newFragment = new ListFragmentClass(tag);
    if (newFragment != null)
        switchFragment(newFragment);
}

private void switchFragment(Fragment newFragment) {
    if (context == null)
        return;
    if (context instanceof MainActivity) {
        MainActivity feeds = (MainActivity) context;
        feeds.switchContent(newFragment);
    }
} 
```

这里 switchContent 是在您的主要活动中定义的用于切换/替换片段的方法，如 Justin V 在回答中给出的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T13:10:11.577

`getFragmentManager()`在适配器的构造函数中作为参数传递并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T14:03:15.373

使用 an`Interface`将您的侧抽屉连接`ListFragment`到主要活动。例如：

```
public class LeftDrawer extends ListFragment{

    private DrawerCallback mCallback;

    public interface DrawerCallback{
        public void onListClick(String tag);
    }

    public void setCallback(DrawerCallback callback){
        mCallback = callback;
    }

} 
```

由于`Fragments`应该有一个空的构造函数，请在完成将回调添加到抽屉`Fragment`之前使用您的公共方法来设置回调。`FragmentTransaction`此时剩下的就是通知您`Fragment`发生了点击。您应该做的实际上是`ListFragment`直接捕获点击，而不是将 onClickListener 添加到适配器中的每个视图中。

```
 @Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    /*
     * Get item at the clicked position from your adapter and
     * get its string tag before triggering interface
     */
   mCallback.onListClick(tag);
} 
```

使用 onListItemClick 方法来执行此操作。您将获得被点击的列表位置，然后可以轻松地从适配器中获取该项目并获取其标记值以传递回您的主机活动。

# python - 我想要一个在光标下执行 Python 单行的 elisp 脚本

> ID：14784347
> 
> 赞同：2
> 
> 时间：2013-02-09T02:34:39.610
> 
> 标签：python, elisp

我是 Emacs 的大佬。我从这个月初开始使用 Emacs。

我想将小型 Vim 脚本移植到 Emacs。这些脚本也可以让我们在 Emacs 中进行这样的计算。

[http://www.youtube.com/watch?v=yDR0dTPu6M4](http://www.youtube.com/watch?v=yDR0dTPu6M4)

我尝试移植下面编写的 Vim 脚本。

```
function! s:ExecPySf_1liner()
    let l:strAt = getline(".")
    call writefile([strAt], "temp.pysf")

    let l:strAt = system("python -u -m sfPP -fl temp.pysf")
    if @0 == 0
        let @0 = l:strAt
    else
        let @0 = l:strAt
    endif

    let @" = @0
    if match(&clipboard, "unnamed") >= 0
        let @* = @0
    endif
    echo @0
endfunction 
```

但是我已经筋疲力尽了。我花了整整 3 天时间写下以下代码。

```
(defun ExecPySf_1liner ()
    (let (  (strAt
             (buffer-substring-no-properties (point-at-bol) (point-at-eol))
            )
         )
    ) 
) 
```

我想让 Emacs 执行以下操作。

```
1 read one line under the cursor.
2 write down the one line string into temp.pysf file in current directory
3 execute "python -u -m sfPP -fl temp.pysf" in a shell.
4 display the returned calculated string in echo arear
5 and copy the string in the clipboard to enable a user to past the calculated result. 
```

请告诉我相应的elisp函数或代码。

提前致谢

# ================================

嗨，克里斯。我修改了您的代码，如下所示。

```
(defun __getLineOmittingComment ()
    "Get position after ';;' string. If there is no ;; then return line-beginning-posiion"
    (interactive)
    (goto-char (line-beginning-position))
    (let (( posAt (search-forward ";;" (line-end-position) t) ))
     (if (equal posAt nil) (line-beginning-position) posAt)
    )
)

(defun ExecPySf_1liner()
    "Evaluates the current line in PythonSf, then copies the result to the clipboard."
    (interactive)
    (write-region (__getLineOmittingComment) (line-end-position) "temp.pysf" nil)

    (let ((strAt
           (shell-command-to-string "python -u -m sfPP -fl temp.pysf" )
         ))
        (message strAt)
        (kill-new strAt))) 
```

ExecPySf_1liner() 计算勒让德符号：[http](http://en.wikipedia.org/wiki/Legendre_symbol) ://en.wikipedia.org/wiki/Legendre_symbol如下。

```
import sympy as ts; Lgndr=lambda a,b:(lambda c=a%b:0 if ts.gcd(c,b)!=1 else 1 if any((c-k^2)%b==0 for k in range(1,b//2+2)) else -1)(); [Lgndr(3,p) for p in ts.primerange(3,100)] 
===============================
[0, -1, -1, 1, 1, -1, -1, 1, -1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1, -1, 1, -1, 1] 
```

> 你应该看看 IPython。它带有一个 Emacs 模式，可以完成所有这些以及更多

我能理解你的意见。但是您可能会忽略 Python 单行程序是函数式编程并在单行程序中完成的事实。因为他们不使用 if then else 语法。他们必须使用 lambda 函数，而不是使用 def 函数。虽然它们不是严格透明的引用，但它们是函数式编程，就像 elisp 脚本一样。并且数学问题很容易用函数式编程风格编写，如上勒让德符号。

IPython 可以将他们的笔记保存为 Matlab、Mathematica，您可以重复使用它们。但是笔记的内容整体上是纠结的。普通人在写了很多很烂的表情之后，才写出有价值的表情。而有价值的表达式在很多情况下依赖于一些前向表达式。将依赖的表达式放在一起很麻烦。所以这张纸条很纠结。

一年后，当你想重新使用有价值的表达时，你会忘记笔记的细节，很难重新使用有价值的表达。因为你必须把细节作为一个整体来记住。

但是每个 Python 单行代码本身都是完整的。即使在几年后，您也可以轻松地重复使用它们。您可以轻松地合并 Python 单行代码，因为它们是函数式编程。

与 IPython 中的 Python 表达式相比，您可能更容易处理 Python 单行语句。

* * *

我从修改您的 elisp 代码中学到了很多东西。我成为了一个elisp情人。而且我可能比 Vim 脚本更熟悉 elisp。非常感谢。

# ==================================================== ==============================

> 你应该看看 IPython :)。它带有一个 Emacs 模式，可以完成所有这些以及更多工作。:) ？我能理解你的意见。但我声称将 Emacs 用作 IPython 比将 IPython 用作 Emacs 更好。

我为数学稍微扩展了 Python。sfPP.py 是一个预处理器，它将单行代码更改为以下代码。您不需要编写“打印”，因为 sfPP.py 添加了打印指令。

```
' xy"' in 'abcd"xy"efg'
===============================
False

type __tempConverted.py
from __future__ import division
# -*- encoding: utf-8 -*-
from pysf.sfFnctns import *
setDctGlobals(globals())
from pysf.customize import *
if os.path.exists('./sfCrrntIni.py'):
    from sfCrrntIni import *
rightSideValueAt__= ' xy"' in 'abcd"xy"efg'
print "==============================="
print rightSideValueAt__
putPv(rightSideValueAt__, '_dt')

'"xy"' in 'abcd"xy"efg'
===============================
True 
```

（这个示例代码也说明了为什么我敢使用临时单行文件。聪明的克里斯会明白其中的原因。）

您可以在 Emacs 中轻松观看 Python 源代码，如下所示。

```
source(np.source)
In file: C:\Python27\lib\site-packages\numpy\lib\utils.py

def source(object, output=sys.stdout):
        snipped
    import inspect
    try:
        print >> output,  "In file: %s\n" % inspect.getsourcefile(object)
        print >> output,  inspect.getsource(object)
    except:
        print >> output,  "Not available for this object."

===============================
None 
```

> 你应该看看 IPython 我一直在看 IPython youtube 视频：IPython in-depth by bits 写一篇文章：《Use Vim/Emacs as IPython》

你同意我将 Emacs 用作 IPython 吗？

* * *

最后一个问题。我想按下接受按钮。但我不知道它在哪里。“这个帖子对你有用吗？是/否按钮”可能不是那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:26:29.220

这是我整理的东西：

```
(defun get-current-line ()
  (buffer-substring-no-properties (line-beginning-position)
                                  (line-end-position)))

(defun run-python-command (str)
  (shell-command-to-string
   (concat "/usr/bin/env python -u -m sfPP -c "
           (shell-quote-argument (concat "print(" str ")")))))

(defun eval-line-in-python ()
  "Evaluates the current line in python, then copies the result to the clipboard."
  (interactive)
  (let ((str (run-python-command (get-current-line))))
    (message str)
    (kill-new str))) 
```

您可以使用`M-x eval-line-in-python`.

我对其进行了更改，使其不使用临时文件，而是直接评估该行。如果你仍然想写一个临时文件，这是一个微不足道的改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T10:04:10.297

对于其他偶然发现这一点的人，我修改了@Chris Barrett 以防止 python 附加换行符`print`。另外，由于某种原因，导入模块`-m module`使命令不返回任何输出，所以我在文字命令中导入模块。

```
(defun run-python-command (str)
  (shell-command-to-string
   (concat "/usr/bin/python -c "
           (shell-quote-argument (concat "from myutils import *; import sys; sys.stdout.write(" str ")"))))) 
```

# php - NginX GZIP PHP 文件

> ID：14784354
> 
> 赞同：0
> 
> 时间：2013-02-09T02:35:27.920
> 
> 标签：php, nginx, gzip

我可以安全地压缩 PHP 文件吗？我正在使用这些设置：

```
add_header Pragma public;
add_header Cache-Control "public";
expires 1d; 
```

就像我现在正在测试它并且效果很好，但是这样做有安全风险吗？php 文件会以文本形式存储在用户计算机上吗？

# c++ - 使用 dynamic_cast 进行运行时类型识别

> ID：14784355
> 
> 赞同：0
> 
> 时间：2013-02-09T02:35:44.280
> 
> 标签：c++, dynamic-cast, static-cast

在阅读 Essential c++ 第 5.10 章运行时类型识别时，我遇到了一个问题。我先介绍一下背景。有一个名为的基类`num_sequence`和一个`Fibonacci`派生自的类`num_sequence`。在基类中，有一个名为的虚函数`gen_elems`，派生类有自己的定义。

以下内容来自书中。

```
Fibonacci fib;
num_sequence *ps = &fib;
ps->gen_elems(64); 
```

> 我们知道 gen_elems() 的斐波那契实例将被调用。然而，虽然我们从这个测试中知道 ps 寻址一个斐波那契类对象，但尝试直接通过 ps 调用 gen_elems() 的斐波那契实例会导致编译时错误：
> 
> ps->斐波那契::gen_elems(64); //给出编译时错误
> 
> ps 不知道它所寻址的对象的类型，即使我们和 typeid 和虚函数机制知道。
> 
> **要调用 gen_elems() 的斐波那契实例，我们必须指示编译器将其转换`ps`为斐波那契类型的指针。**static_cast 和 dynamic_cast 都可以完成这项工作。

我被粗体字弄糊涂了。`ps->gen_elems(64)`实际上调用 的 Fibonacci 实例`gen_elems()`。为什么我们需要使用 static_cast 和 dynamic_cast 将其转换为斐波那契类型的指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:44:30.737

在**大多数**情况下，您只需正常调用虚方法，并让多态根据需要调用最派生的实现。作者试图解释的是，也可以不经过多态直接调用虚方法的**具体实现。**

假设一个类派生自再次`Fibonacci`覆盖`gen_elems()`，但您不想调用该覆盖，您想调用`Fibonacci`覆盖。通过在编译时将`num_sequence`指针转换为`Fibonacci`指针（或后代指针），它允许编译器访问`Fiboncci`vtable，因此它可以发出代码以直接调用`Fibonacci::gen_elems()`（如果在运行时指向的对象实际上不是`Fibanocci`或后代，您可能会崩溃/损坏您的应用程序。这无法在编译时验证）。

例如：

```
class num_sequence
{
public:
    virtual void gen_elems(int value)
    {
        std::cout << "num_sequence" << std::endl;
    }
};

class Fibonacci : public num_sequence
{
public:
  void gen_elems(int value)
  {
        std::cout << "Fibonacci" << std::endl;
  }
};

class SomethingElse : public Fibonacci
{
public:
  void gen_elems(int value)
  {
        std::cout << "SomethingElse" << std::endl;
  }
}; 
```

.

```
num_sequence ns;
Fibonacci fib;
SomethingElse se;
num_sequence *ps;

ps = &ns;
ps->gen_elems(64); // displays "num_sequence"

ps = &fib;
ps->gen_elems(64); // displays "Fibonacci"

ps = &se;
ps->gen_elems(64); // displays "SomethingElse"

ps->Fiboacci::gen_elems(64); // compiler error!

static_cast<Fibonacci*>(ps)->Fibonacci::gen_elems(64); // displays "Fibonacci"
static_cast<SomethingElse*>(ps)->Fibonacci::gen_elems(64); // displays "Fibonacci"

Fibonacci *pfib = dynamic_cast<Fibonacci*>(ps);
if (pfib != NULL)
{
    pfib->gen_elems(64); // displays "SomethingElse"
    pfib->Fibonacci::gen_elems(64); // displays "Fibonacci"
} 
```

# command-line - 使用 OS X SIPS（可编写脚本的图像处理系统）批量处理图像以仅缩小图像？

> ID：14784358
> 
> 赞同：3
> 
> 时间：2013-02-09T02:36:08.447
> 
> 标签：command-line, image-resizing, sips

我想批量处理 1000 个图像的多个文件夹，以将任何长边大于 1440 像素的图像缩小到 1440，同时忽略任何已经小于该图像的文件。

我正在查看 sips 并且无法判断它是否默认跳过升迁，或者是否有办法使用 getProperty 过滤它？（我不擅长从手册页中解读 CLI 选项）。

我在想也许我可以先使用 find 或 sips 查询，然后将其通过管道传输到另一个 sips 以调整大小，但我不确定究竟如何，也不认为 find 可以按图像大小搜索。

（也对除了啜饮之外的东西持开放态度，这似乎是最快的方法）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T05:39:22.477

使用聚光灯将结果过滤到大于特定尺寸的图像非常有效：

```
mdfind -0 -onlyin . "kMDItemPixelHeight > 1440 || kMDItemPixelWidth > 1440" | xargs -0 sips -Z 1440 
```

这会递归地从当前目录中找到宽度或高度大于 1440 像素的图像，并将它们的大小调整为 1440。1440 以下的文件将被单独保留。

# python - Python将colorsys RGB坐标转换为十六进制

> ID：14784365
> 
> 赞同：6
> 
> 时间：2013-02-09T02:37:29.697
> 
> 标签：python, rgb

根据[这个答案](https://stackoverflow.com/a/876872/129475)，我在 Python 中生成了一些均匀分布的颜色，如下所示：

```
>>> import colorsys
>>> num_colors = 22
>>> hsv_tuples = [(x*1.0/num_colors, 0.5, 0.5) for x in range(num_colors)]
>>> rgb_tuples = map(lambda x: colorsys.hsv_to_rgb(*x), hsv_tuples)
>>> rgb_tuples
[(0.5, 0.25, 0.25), (0.5, 0.3181818181818182, 0.25), (0.5, 0.38636363636363635, 0.25), (0.5, 0.45454545454545453, 0.25), (0.4772727272727273, 0.5, 0.25), (0.4090909090909091, 0.5, 0.25), (0.34090909090909094, 0.5, 0.25), (0.2727272727272727, 0.5, 0.25), (0.25, 0.5, 0.2954545454545454), (0.25, 0.5, 0.36363636363636365), (0.25, 0.5, 0.43181818181818177), (0.25, 0.5, 0.5), (0.25, 0.4318181818181819, 0.5), (0.25, 0.36363636363636354, 0.5), (0.25, 0.2954545454545454, 0.5), (0.2727272727272727, 0.25, 0.5), (0.34090909090909083, 0.25, 0.5), (0.40909090909090917, 0.25, 0.5), (0.4772727272727273, 0.25, 0.5), (0.5, 0.25, 0.4545454545454546), (0.5, 0.25, 0.38636363636363646), (0.5, 0.25, 0.3181818181818181)] 
```

现在如何将这些（“坐标？”）RGB 元组转换回 RGB 十六进制字符串，例如`#FF00AA`？可能是一个简单的问题，但我无法找到答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T03:03:03.710

对于每种颜色， floor(color * 256)，以十六进制打印出来（填充到 2 个位置）。例如：

```
In [1]: rgb_tuples = [(0.5, 0.25, 0.25), (0.5, 0.3181818181818182, 0.25), (0.5, 0.38636363636363635, 0.25), (0.5, 0.45454545454545453, 0.25), (0.4772727272727273, 0.5, 0.25), (0.4090909090909091, 0.5, 0.25), (0.34090909090909094, 0.5, 0.25), (0.2727272727272727, 0.5, 0.25), (0.25, 0.5, 0.2954545454545454), (0.25, 0.5, 0.36363636363636365), (0.25, 0.5, 0.43181818181818177), (0.25, 0.5, 0.5), (0.25, 0.4318181818181819, 0.5), (0.25, 0.36363636363636354, 0.5), (0.25, 0.2954545454545454, 0.5), (0.2727272727272727, 0.25, 0.5), (0.34090909090909083, 0.25, 0.5), (0.40909090909090917, 0.25, 0.5), (0.4772727272727273, 0.25, 0.5), (0.5, 0.25, 0.4545454545454546), (0.5, 0.25, 0.38636363636363646), (0.5, 0.25, 0.3181818181818181)]

In [2]: for (r,g,b) in rgb_tuples:
   ...:     print '%02x%02x%02x' % (int(r*255), int(g*255), int(b*255))
   ...:     
804040
805140
806240
807440 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T02:58:25.093

1) 将浮点数乘以 256 并转换为整数。如果等于 256，则减 1。

编辑：由于我得到了很多令人困惑的评论，所以你必须乘以 256（如果它最终为 256，则减去 1）的原因是你得到与每个整数输出对应的完全相同数量的浮点值。

2) [http://docs.python.org/2/library/string.html?highlight=hexadecimal#format-specification-mini-language](http://docs.python.org/2/library/string.html?highlight=hexadecimal#format-specification-mini-language)

'x' 十六进制格式。输出以 16 为基数的数字，对 9 以上的数字使用小写字母。

使用它，将其设为大写并在它之前插入一个#。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T13:35:45.773

最有效的方法是将 base-1 十进制 RGB 转换为 base-16 十进制或 HEX。

```
 r = int(input('R: '))
  g = int(input('G: '))
  b = int(input('B: '))
  def rgbToHex(r,g,b):
    rgb = [r,g,b]
    x = ''
    for i in rgb:
      x += format(i,'02x').upper()
    if x[0] == x[1] and x[2] == x[3] and x[4] == x[5]:
      x = x[0] + x[2] + x[4]
    return '#'+x
  print(rgbToHex(r,g,b)) 
```

# c - C 的 printf 和 fprintf(stdout,) 不打印

> ID：14784367
> 
> 赞同：18
> 
> 时间：2013-02-09T02:37:45.077
> 
> 标签：c, file-descriptor, printf

这有点奇怪。我的代码没有输出我认为它应该输出的内容。我在各个阶段添加了一些打印语句，看看哪里出了问题。依然没有。所以我在 main 的开头添加了一个 printf 语句。那是我真正感到困惑的地方。

所以我推测文件描述符发生了一些有趣的事情。我将其更改`printf`为`fprintf`. 依然没有。打印到 stderr`fprintf`确实有效！为什么会这样？

从 main 中删除所有主体，除了初始打印语句和 return 确实打印。

### 代码

```
int main(void) {
    fprintf(stdout, "STARTED!");
    //Create an Internet domain socket
    int sockfd = socket(AF_INET, SOCK_STREAM, 0);
    //If this fails exit and print the error
    if (sockfd == -1) {
        printf("Error %d, cannot create socket", errno);
        return 1;
    }
    printf("SOCKET CREATED!");

    //Creates a socket address
    struct sockaddr_in  addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(8080);
    addr.sin_addr.s_addr = INADDR_ANY;

    //Attempts to bind to the socket address, again prints to error if this fails.
    if (bind(sockfd, (struct sockaddr *) &addr, sizeof(addr)) == -1)
    {
        printf("Error %d, cannot bind", errno);
        return 1;
    }

    //Starts Listening for a client
    if (listen(sockfd, 1) == -1)
    {
        printf("Error %d, cannot listen", errno);
        return 1;
    }

    //If all is successful, server is operational
    while(1)
    {
        //Creates a file descripter for the connection
        int connfd;
        //And a socket address for the client
        struct sockaddr_in cliaddr;
        socklen_t cliaddrlen = sizeof(cliaddr);
        //If a connection attempt is made accepts it.
        connfd = accept(sockfd, (struct sockaddr *) &cliaddr, &cliaddrlen);
        if (connfd == -1) {
            //If the connection fails print an error
            printf("Error %d, cannot accept connection", errno);
            continue;
        }

        //Otherwise process the request
        else {
            printf("CONNECTED!");
            char end;
            end = 1;
            while (end)
            {
                process_request(connfd);
                end = 0;
            }
        }
        close(connfd);

    }
    close(sockfd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-09T02:41:40.257

输出通常由系统缓冲。您可以调用 fflush，但有时，根据缓存的工作方式，只需用换行符结束输出就足够了。所以尝试改变

```
fprintf(stdout, "STARTED!"); 
```

到

```
fprintf(stdout, "STARTED!\n"); 
```

而且，如果这没有帮助，

```
fprintf(stdout, "STARTED!\n");
fflush(stdout) 
```

（而且 stderr 通常不会被缓存，因为您想立即看到错误。）

最后，您将在程序完成时看到输出（因为随后刷新了内容），这可能解释了其余的行为。

# asp.net - 大型预编译 Asp.net 网站项目中的错误 CS0433

> ID：14784369
> 
> 赞同：7
> 
> 时间：2013-02-09T02:38:00.443
> 
> 标签：asp.net, .net-4.0, msbuild, visual-studio-2012

**背景**

我已经接管了一个非常大的 asp.net 网站项目。旧的部署过程是将 .cs、.aspx 和 .ascx 文件复制到 IIS 并使其即时构建。我想预编译它并使用 TeamCity 自动部署它。我已经用其他一些网站项目做到了这一点。

该项目有大约 350 个用户控件，这些控件很好地组织在文件夹中，但可以在任何地方使用。从其他文件夹引用的控件，相互引用...基本上是循环文件引用的噩梦。

**我的尝试**

我的第一次尝试是像其他人一样构建它。MSbuild 整个 vs2012 解决方案。我遇到了大量的“不允许循环文件引用”。来发现所有这些井井有条的控件到处都在使用，并且到处都有循环引用。[我读了这篇文章](http://ellisweb.net/2009/12/fixing-the-circular-file-references-are-not-allowed-error-in-asp-net/)，然后将“web.config”切换到`compilation batch="false"`然后在构建中将站点设置为“不可更新”和“使用固定命名程序集”。该站点已构建，但在我的四核、ssd、16gb ram 开发盒上编译需要 25 分钟。这是不可接受的构建时间。

我知道，如果我关闭“使用固定命名程序集”，该网站的构建速度会大大加快。（我已经在一个较小的网站上证明了这一点。它从 4 分钟缩短到了 45 秒）。当我删除该设置时，我会遇到奇怪的构建错误：

```
c:\Projects\Web\Site.master(146): error CS0433: The type 'ASP.usercontrols_modules_viewprofilepopup_ascx' exists in both 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_viewprofilepopup.ascx.4101713c.dll' and 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_xa514so5.dll'

c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_site.master.cdcab7d2.0.cs(927): error CS0433: The type 'ASP.usercontrols_modules_viewprofilepopup_ascx' exists in both 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_viewprofilepopup.ascx.4101713c.dll' and 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_xa514so5.dll'

error ASPPARSE: c:\Projects\web\Web\UserControls\Modules\JobsLeftMenu.ascx(128): error CS0433: The type 'ASP.usercontrols_modules_imagesgallerymodule_ascx' exists in both 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_imagesgallerymodule.ascx.4101713c.dll' and 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_nvrj33tx.dll'

error ASPPARSE: c:\Projects\web\Web\Site.master(146): error CS0433: The type 'ASP.usercontrols_modules_viewprofilepopup_ascx' exists in both 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_viewprofilepopup.ascx.4101713c.dll' and 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\web\8d37b2c6\4c39f0a\App_Web_xa514so5.dll' 
```

这是确切的 aspnet_compiler.exe 命令：

> aspnet_compiler.exe -v /web -p Web\ -f "预编译的 Web"

我四处搜寻答案。不，它们不会在任何地方的代码中重复。它们恰好位于不同的文件夹中，由不同文件夹中的其他控件使用。我有一种感觉，这是由于循环文件引用的事情。好的。我删除了其中一些的使用，以查看它是否会构建，并且构建过程会转移到其他错误，就像这个错误一样。我不能完全删除代码以适应这一点......如何在不打开“使用固定命名程序集”的情况下修复这些错误？

**我试过的东西**

1.  清除了`Temporary ASP.NET Files`整个系统中的所有内容。
2.  在visual studio 2012中尝试了“发布”。同样的错误。
3.  尝试将站点转换为 Web 应用程序，但错误太多（超过 600 个）。
4.  再次：确保没有重复的文件和代码可以解释它。我使用 notepad++ 对整个解决方案文件夹进行了文本搜索，以验证没有其他同名控件。
5.  [检查了这个。](http://www.pgs-soft.com/the-type-x-exists-in-both-y1-dll-and-y2-dll.html)
6.  我打开了 msbuild 性能调整：`/m /p:CreateHardLinksForCopyLocalIfPossible=true /p:BuildInParallel=true`

我很困惑，似乎认为我唯一的选择是重写应用程序，在转换为 Web 应用程序时克服错误，或者继续将源代码部署到网络服务器但自动执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T23:38:24.490

我知道你已经尝试过了，但是避免循环引用将是你最好的选择。请注意，“循环引用”一词实际上并不完全正确。构建系统抱怨的是目录级别的循环引用，而不是文件级别。

例如`sub1\page.aspx`使用`sub2\uc1.ascx`用途`sub1\uc2.ascx`

在文件级别，没有圆圈，但在目录级别有，这与批处理的工作方式相混淆。

虽然看起来你有太多这样的情况以至于无法修复，但我敢打赌，如果你看看“目录圈”的细节，那肯定不是那么多。绘制参考图可能有助于理解事物。

然后，您只需将违规者移动到不同的文件夹并相应地更改链接。

是的，这是一个痛苦的过程，但它可能是可以解决的。

# r - R：创建一个while循环来对向量中低于平均值的值求和

> ID：14784371
> 
> 赞同：-3
> 
> 时间：2013-02-09T02:38:03.970
> 
> 标签：r, loops, vector, while-loop

我真的可以在这里使用一些帮助，我想要一个 while 循环来计算向量中低于均值的所有值的总和，我还想提取总和中的值的数量，向量如下所示：

x <- 日志（1:200）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:39:26.403

创建逻辑向量，指示值是否低于均值：

```
vec <- x < mean(x) 
```

将以下所有值相加意味着：

```
sum(x[vec]) 
```

下面的计数值意味着：

```
sum(vec) 
```

# javascript - 主干.js 集合与服务器同步

> ID：14784374
> 
> 赞同：3
> 
> 时间：2013-02-09T02:38:17.030
> 
> 标签：javascript, jquery, backbone.js

我正在尝试弄清楚如何使backbone.js Collection 与url 末尾的服务器保持同步。

我希望能够将模型添加到集合中，并让集合自动使用新模型对集合 url 进行 POST ...

我无法在任何地方找到这个功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T03:28:58.707

模型永远不会保存到集合端点，它们有自己的 url 属性来配置它们的保存位置。

您可以只调用集合，`add`然后调用模型，而不是调用集合，它会同时执行这两个操作，但您必须配置模型的 URL。`save``create`

```
var MyModel = Backbone.Model.extend({
    urlRoot: '/some/path'
});
var MyCollection = Backbone.Collection.extend({
    url: '/some/path',
    model: MyModel
});

var instance = new MyCollection();
instance.fetch(); //fetches at /some/path

// ...

instance.create({ foo: 'bar' }); // adds to collection and saves the new model 
```

## [创建文档](http://backbonejs.org/#Collection-create)

> 为了使其工作，您应该设置集合的模型属性。

# scala - 带有附加参数的scala定义类

> ID：14784375
> 
> 赞同：1
> 
> 时间：2013-02-09T02:38:38.850
> 
> 标签：scala, jackson, jerkson

我正在使用一个案例类，它在其他参数中是用 BigInt 十六进制值实例化的。我使用这个案例类通过 Jerkson/Jackson 反序列化 JSON 消息。使用 Jackson 的美妙之处在于，反序列化可以根据案例类的签名（我猜）开箱即用。

现在，一个十六进制编码的 BigInt 值需要用一个额外的基数参数来实例化：BigInt(hexValue, 16)。但是我的 JSON 消息不包含这样的参数。我正在寻找一种解决方案来在我的案例类的定义中定义这个基数，以便杰克逊能够继续使用该类而无需配置。就像是：

```
case class MyClass(name: String, hexValue: BigInt(hexValue, 16)) 
```

我知道替代方法是 a) 明确定义 JSON 反序列化或 b) 围绕 BigInt 定义我自己的包装类。但是，我正在寻找一个更优雅和“scala-ish”的解决方案——如果有的话。

注意：Int 是不够的，它必须是 BigInt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:24:00.697

您可以覆盖该`apply`方法以自定义`case class`实例化..

```
case class MyClass (name: String, hexValue: BigInt)

object MyClass{
  def apply(name: String, hexValue: String) = 
                            new MyClass(name,BigInt(hexValue,16))
} 
```

用它作为

```
MyClass("Foo","29ABCDEF")   //> res0: MyClass = MyClass(Foo,699125231) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:28:49.390

我认为你最好的选择是使用包装器`BigInt`。就像是

```
import  java.math.BigInteger

class   BigHexInt(hexString: String)
extends BigInt(new BigInteger(hexString, 16)) 
```

然后写你的`case class`使用`BigHexInt`：

```
case class MyClass(name: String, bigHex: BigHextInt) 
```

# ruby-on-rails - 在 OS X 上清除 memcached 服务器中的缓存

> ID：14784377
> 
> 赞同：2
> 
> 时间：2013-02-09T02:38:57.783
> 
> 标签：ruby-on-rails, memcached, osx-lion

我在 OS X Lion 上运行 Ruby on Rails 3.0.6。我已经设置了一个 memcached 服务器实例，并且正在开发中进行缓存以用于测试目的。一切正常，但我决定清除我的数据库，看看应用程序如何在没有任何数据的情况下运行。我清除了它，重新启动了 Apache，并在开发模式下关闭了缓存。转到主页，数据似乎还在缓存中，所以我重新启动了 Apache，但没有任何效果（请记住，数据库中没有数据）。然后我杀死了 memcached 进程（它重新启动了自己）。那没有用。所以我关闭了我的机器，然后重新启动它，但数据仍然被缓存。

有没有办法刷新这个缓存？如果它存储在内存中，为什么重新启动不会清除缓存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-18T21:46:44.873

或者您可以从 CLI 执行此操作：

```
echo 'flush_all' | nc localhost 11211 
```

*资料来源*：[cyberciti.biz](http://www.cyberciti.biz/faq/linux-unix-flush-contents-of-memcached-instance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:42:29.367

原来删除 /tmp/cache 中的缓存文件夹清除了缓存。现在我知道 ：）

# java - Android 软键盘重叠按钮（屏幕截图）

> ID：14784379
> 
> 赞同：4
> 
> 时间：2013-02-09T02:39:16.893
> 
> 标签：java, android, xml, android-layout, actionbarsherlock

我正在使用 Sherlock 操作选项卡，因此有一个选项卡的片段活动。不幸的是，当键盘出现时，会发生以下情况：

![在此处输入图像描述](../Images/9845958cf878487c79b5f8207fb5b7e1.png)

键盘与第三个文本框正下方的两个按钮重叠。但是，我希望在打开键盘时可以看到这两个按钮。

我尝试了几件事：

*   添加`android:windowSoftInputMode="adjustResize"`以及`android:windowSoftInputMode="adjustPan"`包含这三个选项卡的活动
*   将图示的选项卡片段包装在滚动视图中，该视图部分工作，允许屏幕可滚动以查看两个按钮

这是片段的 XML：

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#EBEBEB"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:layout_weight="1"
        android:gravity="right" >

        <EditText
            android:id="@+id/TextBox"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#ffffff"
            android:height="50dp"
            android:hint="@string/BoxHint"
            android:paddingLeft="15dp" >
        </EditText>

        <TextView
            android:id="@+id/LocBoxHint"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_below="@+id/TextBox"
            android:background="#ffffff"
            android:gravity="center"
            android:padding="10dp"
            android:text="\@"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/LocBox"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_below="@+id/TextBox"
            android:layout_toRightOf="@+id/LocBoxHint"
            android:background="#ffffff"
            android:hint="Joey&apos;s Pizza" >
        </EditText>

        <TextView
            android:id="@+id/DateTimeBoxHint"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_below="@+id/LocBoxHint"
            android:background="#ffffff"
            android:gravity="center"
            android:padding="10dp"
            android:text="#"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/DateTimeBox"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_below="@+id/LocBox"
            android:layout_toRightOf="@+id/DateTimeBoxHint"
            android:background="#ffffff"
            android:hint="Friday 8pm"
            android:paddingRight="60dp"
            android:layout_marginBottom="50dp" />

        <ImageButton
            android:id="@+id/DateTimePicker"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/LocBox"
            android:onClick="dateTimeButton"
            android:src="@drawable/ic_menu_today"
            android:background="#ffffff" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_below="@+id/DateTimeBox"
            android:orientation="horizontal"
            android:layout_marginTop="-50dp" >

            <Button
                android:id="@+id/infoButton"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_weight="5"
                android:onClick="infoButton"
                android:text="i"
                android:textColor="#ffffff" />

            <Button
                android:id="@+id/Button"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_weight="2"
                android:onClick="planButton"
                android:text="@string/Button"
                android:textColor="#ffffff"
                />
        </LinearLayout>

    </RelativeLayout>
</LinearLayout> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:24:35.543

您的父布局是线性的，在相对布局中更改它，如下面的代码

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/theme_black_bg" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/bottom_bar"
        android:layout_below="@+id/top_bar"
        android:layout_marginTop="15dip"
        android:gravity="center_horizontal"
        android:orientation="vertical" >
        <LinearLayout
            android:id="@+id/linearlayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/email_edit_bg"
            android:gravity="center_horizontal"
            android:orientation="vertical" >
            <EditText
                android:id="@+id/LoginEmailAddressEditTextView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/edit_text_bg"
                android:ems="2"
                android:hint="Please enter email"
                android:paddingLeft="5dip"
                android:paddingRight="5dip"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:singleLine="true"
                android:textColor="@color/label_color_white"
                android:textColorHint="#FFFFFFFF"
                android:textSize="12sp" />

        </LinearLayout>
        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/separator_bg" />
        <EditText
            android:id="@+id/LoginPasswordEditTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/edit_text_bg"
            android:ems="2"
            android:hint="@string/hint_password"
            android:inputType="textPassword"
            android:paddingLeft="5dip"
            android:paddingRight="5dip"
            android:singleLine="true"
            android:textColor="@color/label_color_white"
            android:textColorHint="#FFFFFFFF"
            android:textSize="12sp" />

        <Button
            android:id="@+id/LoginScreenLoginButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:background="@drawable/login_btn_selector" />
        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/separator_bg" />
        <Button
            android:id="@+id/LoginScreenForgotPasswordButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:background="@drawable/forgot_password_btn_selector" />
    </LinearLayout>
    <include
        android:id="@+id/bottom_bar"
        android:layout_alignParentBottom="true"
        layout="@layout/bottom_advertisement_merge_layout" />
</RelativeLayout> 
```

# redis - 如何设置redis连接超时？

> ID：14784385
> 
> 赞同：13
> 
> 时间：2013-02-09T02:40:37.783
> 
> 标签：redis

我在配置文件的哪个位置设置 Redis 的连接超时？

我知道配置文件中有超时设置，但这仅适用于空闲连接。当我想从 redis 读取时，我希望应用超时。我希望它仅在 N 秒后超时，而不是默认值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-05-17T13:47:23.430

对于仍在寻找此内容的任何人，您可以在 redis 连接字符串上指定 connectTimeout，如下所示。

```
<add key="RedisConnectionString" value="your-redis-server,abortConnect=false,connectTimeout=1000,ssl=false,,password=your-password" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-07T21:07:58.397

在 redis 的控制台上设置此配置

```
config set timeout 300 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T10:42:31.250

*   你基本上需要一个**读取超时**

*   这将是客户端属性

*   在您的申请中提及这一点。

* * *

我将举例说明 PHP 的 Laravel 框架

在 database.php 文件中指定它（'read_timeout' => 60）

```
 'redis' => [

    'client' => 'predis',

        'cluster' => false,

        'default' => [
            'host' => env('REDIS_HOST', 'localhost'),
            'password' => env('REDIS_PASSWORD', null),
            'port' => env('REDIS_PORT', 6379),
            'database' => 0,
            'read_timeout' => 60,
        ],

    ],

]; 
```

# performance - 如何测量循环和递归方法之间代码速度的差异？

> ID：14784395
> 
> 赞同：3
> 
> 时间：2013-02-09T02:42:44.923
> 
> 标签：performance, delphi, loops, recursion

假设我们要创建一个计算器，它的第一个功能是 Fatorial。我们可以将其写成递归函数或使用循环来获取结果。我们都知道递归更慢，因为它是指数性质的。但是如何通过代码而不是通过计算行数来证明呢？

我试图计算花费的毫秒数，但是对于我的 i7，它在初始时间和代码停止之间始终为零。

**如何测量循环和递归方法之间代码速度的差异？**

```
type
  TJanela = class(TForm)
    Instrucao: TLabel;
    Entrada: TEdit;
    Botao: TButton;
    procedure Calcular(Sender: TObject);
  end;

var
  Janela: TJanela;
  Val, Fat, Start, TimeRecursive, TimeLoop: Int64;

function FR(N: Int64): Int64; // Fatorial Recursivo
function FL(N: Int64): Int64; // Fatorial em Loop

implementation

{$R *.dfm}

procedure TJanela.Calcular(Sender: TObject);
begin
  Val := StrToInt(Entrada.Text);
  Start := StrToInt(FormatDateTime('nnsszzz',Now));
  Fat := FR(Valor);
  TimeRecursive := StrToInt(FormatDateTime('nnsszzz',Now)) - Start;
  Start := StrToInt(FormatDateTime('nnsszzz',Now));
  Fat := FL(Valor);
  TimeLoop := StrToInt(FormatDateTime('nnsszzz',Now)) - Start;
  if Val > 25 then
    ShowMessage('Delphi can't calculate above [ 25! ]')
  else
    ShowMessage(' [ ' +
                IntToStr(Val) + '! ] is equal to [ ' +
                FormatFloat('###,###,###,###,###,###',Fat) + ' ]'#13#13+
                'Recursive: [ ' + IntToStr(TimeRecursive) + ' ] ms;'#13+
                'Loop: [ ' + IntToStr(TimeLoop) + ' ] ms;');
end;

function FR(N: Int64): Int64;
begin
  if N <= 1 then
    Result := 1
  else
    Result := N * FR(N - 1);
end;

function FL(N: Int64): Int64;
var
  I: Integer;
begin
  for I := 2 to N - 1 do
    N := N * I;
  if N = 0 then
    Result := 1
  else
    Result := N;
end; 
```

既然大卫给出了答案，我问了一个关于[数学](https://math.stackexchange.com/questions/300273/how-to-create-equations-to-measure-time-spending-in-executing-algorithms)的问题，所以他们可以帮助我得出两个方程，以确定给定阶乘在两种方法中在计算机上花费的近似时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T08:10:21.630

您正在使用分辨率很低的计时器，并且对阶乘函数的单次评估速度太快，甚至无法注册。

您可以使用更高分辨率的计时器，但到目前为止，最简单的方法是对需要更长的时间进行计时。与其计时一次对阶乘的调用，不如计时一千或一百万。

如果您真的对实现快速阶乘函数感兴趣，对于整数输入，那么您应该使用查找表。

对于它的价值，我认为诊断单元中的 TStopWatch 比日期/时间功能更方便计时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T02:50:26.983

使用[分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)。Delphi 的最新版本包括[AQTime](http://www.automatedqa.com/products/aqtime/index.asp)`profiler Delphi`的有限功能版本，但在此处搜索会在 StackOverflow[上找到 Delphi 的 Profiler 和内存分析工具。](https://stackoverflow.com/q/291631/62576)

Profiler 允许您以几种不同的方式评估您的代码，包括执行代码各个部分所花费的精确时间。您可以使用结果来确定哪个需要更多（或更少）时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:11:57.270

如果它只是为了测试，你可以在循环之前和之后放置一个 TimeGetTime() 而不是 GetTime() 。然后只需将值保存在列表框中即可查看需要多长时间。

如果这太慢，请尝试 QueryPerformanceCounter/QueryPerformanceFrequency

# android - android模拟器地理修复无法设置gps位置

> ID：14784398
> 
> 赞同：6
> 
> 时间：2013-02-09T02:43:07.157
> 
> 标签：android, gps, emulation

我目前正在 Android 中测试 gps 位置（使用 SDK Tools rev 21.0.1。我尝试了标准程序：

1.  创建一个启用 GPS 的模拟器（尝试了多个版本，从 2.1 到 4.2）
2.  启动模拟器
3.  远程登录到本地主机：5554
4.  输入 geo fix long lat

理论上，这应该将 gps 设置为 .

但以下标志表明位置设置不正确：

**1.当我去maps.google.com或打开谷歌地图时，它总是抱怨无法确定我的位置，他们总是让我打开wifi**。

**2\. GPS 似乎从未被激活——状态栏上没有图标。**

此外，我尝试了 DDMS（已弃用，当然我也尝试了 Monitor）。似乎什么也没有发生。

我去了以前指向这里的链接： [位置未在 android 模拟器中的新地理修复上更新](https://stackoverflow.com/questions/3858743/location-not-being-updated-on-new-geo-fix-in-android-emulator)

[Android - 无法在模拟器上获取 gps 位置](https://stackoverflow.com/questions/4745670/android-unable-to-get-the-gps-location-on-the-emulator)

[模拟器上的 GPS 没有得到地理修复 - Android](https://stackoverflow.com/questions/896889/gps-on-emulator-doesnt-get-the-geo-fix-android)

但所有这些链接似乎都没有帮助。android 项目页面上有一些错误报告： [http ://code.google.com/p/android/issues/detail?id=13046](http://code.google.com/p/android/issues/detail?id=13046)

但这是一个相当古老的问题，尚未达成最终解决方案。

我想知道是否有其他人遇到过类似的问题，请提供一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:41:20.927

hope You will see icon and it will work.working on mine. APi Level 10

```
package com.example.locationsddf;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    LocationManager lm;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final TextView tv = (TextView) findViewById(R.id.tv);
        lm = (LocationManager) getSystemService(LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new LocationListener() {

            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onLocationChanged(Location arg0) {
                tv.setText("Latitude: "+arg0.getLatitude()+" \nLongitude: "+arg0.getLongitude());

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

Manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.locationsddf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.locationsddf.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

When icon is notified then you can just simply get the location by `lm.getLastKnowLocation`it will work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T10:36:43.297

有时 AVD 本身存在问题。尝试切换到另一个 CPU 架构。我有类似的问题，通过在 ARM 和 Intel 之间切换来解决。有时启用 Google 服务的 AVD 也有帮助

还可以在开发人员选项中使用“允许模拟位置”

作为替代方案，你可以试试这个客户端： [https](https://github.com/RomanTheLegend/Pokemon_NoGo/tree/master/Sources/PokemonNoGo) ://github.com/RomanTheLegend/Pokemon_NoGo/tree/master/Sources/PokemonNoGo 我写它是为了玩口袋妖怪，但它适用于任何基于 GPS 的应用程序。它所做的只是接受来自桌面客户端的坐标并模拟主系统 GPS 提供程序 - LocationManager.GPS_PROVIDER

最后但同样重要的是：在 AVD 中，您可以重播 .kml 文件。有许多服务可以帮助您生成一个。或者只是安装“Lockito”并从 Android 生成假坐标

# algorithm - 黑名单或白名单过滤方法？

> ID：14784401
> 
> 赞同：-1
> 
> 时间：2013-02-09T02:43:42.067
> 
> 标签：algorithm, filter, web

我正在测试移动互联网，并注意到提供商正在对敏感内容使用过滤器。

他们究竟使用了什么方法？会是白名单吗？因为我认为筛选所有网站可能是不切实际的，同时有孩子最终进入他们不应该进入的网站的风险。

还是他们会使用第三种方法？比如说，一个聪明的过滤器可以扫描单词和权重结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:48:54.373

两者都不; 进行消毒：[https ://www.owasp.org/index.php/Data_Validation#Sanitize](https://www.owasp.org/index.php/Data_Validation#Sanitize)

同时创建黑名单/白名单会让您陷入不断更新和管理的“圈子”以及其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T06:07:03.107

有些公司出售按类型对网站进行分类的现成数据库。然后您的提供商将决定他们想要允许哪些类别以及阻止哪些类别 - 参见例如[http://technet.microsoft.com/en-us/library/ee207145.aspx](http://technet.microsoft.com/en-us/library/ee207145.aspx) “URL 过滤是基于订阅的，并且是Forefront TMG Web 安全服务许可证。”

当然，此类计划的声誉很差，诸如斯肯索普之类的城镇或出售手表的人（名称中包含坏词）或有关各种癌症的网站（假设有关这些身体部位的任何事情都一定是顽皮的）的问题。

如果这篇文章通过了，恭喜 Stack Overflow - 尽管我试图让它的工作尽可能简单。

# arrays - jQuery：循环数组编译 url 获取变量和值

> ID：14784402
> 
> 赞同：0
> 
> 时间：2013-02-09T02:43:42.910
> 
> 标签：arrays, jquery, get, each

我在 jQuery 中有一个数组，我`$.each()`用来循环遍历数组。我正在尝试找到一种使用数组中的值编译 URL 链接的方法

```
var selectArr = ["numbers123", "more_array_values", "etc", "more"];
            $.each(selectArr,function(k,v){
                k++;
                alert('fid'+k+'='+v);
            }); 
```

这行得通，

但我想以某种方式得到它，所以它会像

`var url = fid1=numbers123&fid2=more_array_values&fid3=etc`...

这样，我可以使用`url`并将其附加到`<a href=''>`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T02:48:01.007

通过一些创造性的应用[`jQuery.map`](http://api.jquery.com/jQuery.map/)和数组方法`.join`：

```
var url = $.map(selectArr, function(v,k) {
    // encodeURIComponent makes the value "URL safe"
    return 'fid' + (k + 1) + '=' + encodeURIComponent(v);   
}).join('&'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T02:51:22.890

试试这个

```
var selectArr = ["numbers123", "more_array_values", "etc", "more"];
var parts = [];
$.each(selectArr,function(k,v){
    parts.push('fid'+(k+1)+'='+v)
});
var url = parts.join('&'); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/eHcmd/1/)

您可以使用Felix 所说的[jQuery.map](http://api.jquery.com/jQuery.map/)函数来清理答案

我建议在我的情况下使用该方法。

# css - 在 L 形容器中重叠图像？

> ID：14784404
> 
> 赞同：3
> 
> 时间：2013-02-09T02:44:34.120
> 
> 标签：css, image, overlap

我一直在这里搜索了一下，这就是我能够做到的。我对任何与网页设计有关的事情都很陌生，所以请不要太苛刻。:P

[http://jsfiddle.net/rPAPz/141/](http://jsfiddle.net/rPAPz/141/)

html

```
<div class="container-3">
  <div class="top"><img class="img1" src="http://dummyimage.com/200/ccc/000.png&text=image+1" />
  </div>
  <div class="bottom"><img  src="http://dummyimage.com/200/ccc/000.png&text=image+5" width="202" height="210" class="img5" /></div>
</div> 
```

css

```
.img1{top:0px; left:0px; z-index:1;opacity:.5}

.img2{top:10px; right:110px; z-index:2;opacity:.5}

.container-3{    
  position:absolute; 
}

.top{   
  width: 200px;  
  height:200px;
  background:red;
  border:blue solid 2px;
  border-bottom:none;
  position:relative;
  z-index:4;
} 

.bottom{
  z-index:2;
  width: 600px;
  height: 300px;
  position:absolute;
  top:50px;
  left:0;
  border: blue solid 2px;
  background:red;
} 
```

现在得到图像（我认为），但我不知道如何正确定位它。我希望最终结果看起来[像这样](http://i1081.photobucket.com/albums/j359/hetsig/testest_zps6876a446.png)

html:

```
<p>Etvab luxury estates är en webportal för den kräsne bostadsköparen.

Här har vi samlat ett representativt urval av de mest

exklusiva bostäderna på Spaniens södra kust.

Bostäder med unika lägen – havsnära eller örnnästen.

Bostäder med förfinad design.

Bostäder med vyer som är ”breathtaking”.

Bostäder med luft och ytor som andas välbefinnande.

Bostäder som har allti modern utrustning och senaste teknologi.

Vi har medvetet lagt ribban högt, för att kittla fantasin, ge en svindlande

resa i tid och rum och visa det bästa av spansk modern arkitektur.

Vi har i första hand valt bostäder med lägen och kvalitet

som är i absolut topskikt.

Vi har inte tittat på status i områden

då vi bedömer att det inte avgör bostadens värde och attraktion.

Vår ambition är att förnya dessa sidor regelbundet, till nöje

och nytta för den som söker inspiration till ett husköp

med högsta kvalitet och läge.

Men även för den som njuter av design och vackra miljöer

- på avstånd.</div>     
<p>&nbsp;<br>
</p>

 <style>
    .qs_input { height:40px; padding: 0px 0px 0px 8px; background: #f3f3f3; border: 1px solid #dfdfdf; border-bottom: 2px solid #d7d6d6; font-family: 'Helvetica Neue', sans-serif; font-size: 1.0 em;}
    .the_table {font-family: 'Helvetica Neue', sans-serif; font-size: 0.8em;}
    .fastighet { padding:5px;}
    .inne { padding:8px 0px 8px 8px;  height:15px;}
</style>
 <div id='qsResale' class='qs_body' style='width:50%; float:right; margin-left: 15px; padding:0px; margin: 0px;'>
<form name='qsFormResale' id='qsFormResale' method='post' action='search.php'>
<table class="the_table" style='width:98%; float:left;'>
    <tr><td class='qs_label' style='width:98%;'><h7>Typ av fastighet</h7></td></tr>
    <tr><td>
<select class='qs_input fastighet' name='Type' id='Type' style='width:90%;'>
<option class='qs_input' value='No Preference'></option>
<option class='qs_input' value='S'>Studio</option>
<option class='qs_input' value='A'>Lägenhet</option>
<option class='qs_input' value='T'>Radhus</option>
<option class='qs_input' value='V'>Villa</option>
<option class='qs_input' value='P'>Tomt</option>
<option class='qs_input' value='C'>Kommersiella</option>
<option class='qs_input' value='AS'>Lägenhet & Studio</option>
<option class='qs_input' value='AT'>Lägenhet & radhus</option>
<option class='qs_input' value='AV'>Lägenhet & villa</option>
<option class='qs_input' value='TV'>Radhus & villa</option>
</select>
        </td>
    </tr>

        <tr><td class='qs_label' style='vertical-align:top;'><h7>Kust</h7></td></tr>
        <tr><td>
            <select class='qs_input fastighet' name="Area" id="Area" onchange="cambia(this, document.qsFormResale.Location);" style='width:90%;'> 
            <option value='Costa de la Luz'>Costa de la Luz</option>
            <option value='Costa del Sol'>Costa del Sol</option>
            <option value='Costa del Sol East'>Costa del Sol East</option>
            <option value='Granada (Costa Tropical)'>Granada (Costa Tropical)</option>
            <option value='Almería (Costa Almería)'>Almería (Costa Almería)</option>
            <option value='Murcia (Costa Calida)'>Murcia (Costa Calida)</option>
            <option value='Alicante (Costa Blanca)'>Alicante (Costa Blanca)</option>
            <option value='Costa Azahar'>Costa Azahar</option>
            <option value='Costa Brava'>Costa Brava</option>
            <option value='Costa Dorada'>Costa Dorada</option>
            <option value='Ibiza'>Ibiza</option>
            <option value='Cordoba'>Cordoba</option>
            <option value='Tenerife'>Tenerife</option>
            <option value='Mallorca'>Mallorca</option>

            </select>

            </td>
        </tr>

    <tr>
      <td class='qs_label' style='vertical-align:top;'><h7>Område</h7></td></tr>
    <tr><td>
        <select class='qs_input' size='5' style="height:150px; width:395px;" name='Location' id='Location' multiple='multiple' style='width:90%;'>
        <option class='qs_input inne' value='No Preference'>Ingen Preferens</option>
        <option class='qs_input inne' value='Ayamonte'>Ayamonte</option>
        <option class='qs_input inne' value='Huelva'>Huelva</option>
        <option class='qs_input inne' value='Sanlucar de Barrameda'>Sanlucar de Barrameda</option>
        <option class='qs_input inne' value='Tarifa'>Tarifa</option>
        <option class='qs_input inne' value='Jimena de la Frontera'>Jimena de la Frontera</option>
        <option class='qs_input inne' value='San Pablo de Buceite'>San Pablo de Buceite</option>
        <option class='qs_input inne' value='Jerez de la Frontera'>Jerez de la Frontera</option>
        <option class='qs_input inne' value='Cadiz'>Cádiz</option>
        <option class='qs_input inne' value='Olvera'>Olvera</option>
        </select></td>
    </tr>

    <tr><td class='qs_label'><h7>Sovrum</h7></td></tr>
    <tr><td>
        <select size='1' class='qs_input fastighet' name='Beds' id='Beds' style='width:90%;'>
<option class='qs_input' value='No Preference'>Ingen Preferens</option>
<option class='qs_input' value='1'>1 Bädd</option>
<option class='qs_input' value='1x'>1 Bädd eller fler</option>
<option class='qs_input' value='2'>2 Bäddar</option>
<option class='qs_input' value='2x'>2 Bäddar eller fler</option>
<option class='qs_input' value='3'>3 Bäddar</option>
<option class='qs_input' value='3x'>3 Bäddar eller fler</option>
<option class='qs_input' value='4'>4 Bäddar</option>
<option class='qs_input' value='4x'>4 Bäddar eller fler</option>
<option class='qs_input' value='5'>5 Bäddar</option>
<option class='qs_input' value='5x'>5 Bäddar eller fler</option>
<option class='qs_input' value='6'>6 Bäddar</option>
<option class='qs_input' value='6x'>6 Bäddar eller fler</option>
<option class='qs_input' value='7'>7 Bäddar</option>
<option class='qs_input' value='7x'>7 Bäddar eller fler</option>
<option class='qs_input' value='8'>8 Bäddar</option>
<option class='qs_input' value='8x'>8 Bäddar eller fler</option>
<option class='qs_input' value='9'>9 Bäddar</option>
<option class='qs_input' value='9x'>9 Bäddar eller fler</option>
        </select></td>
    </tr>

    <tr><td class='qs_label'><h7>Pris från</h7></td></tr>
    <tr><td><p>
      <input type='text' class='qs_input' id='PriceMin' name='PriceMin' style='width:80%;' value='0' maxlength='8' onChange='return f_checkNumber(this,0,0);'>
          &nbsp;<span class='qs_text'>&euro;</span></p></td></tr>

    <tr>
      <td class='qs_label'><h7>Pris upp till</h7></td></tr>
    <tr><td><input type='text' class='qs_input' id='PriceMax' name='PriceMax' style='width:80%;' value='0' maxlength='8' onChange='return f_checkNumber(this,0,0);'>&nbsp;<span class='qs_text'>&euro;</span></td></tr>

    <tr>
      <td class='qs_label'><h7>Referens nr</h7></td></tr>
    <tr><td style='padding-right:5%;'><input type='text' class='qs_input' id='RefNum' name='RefNum' value='' maxlength='12'></td></tr>

    <tr><td style='padding-top:10px;'><input type='submit' input type='button' class="button-5" value="Sök"></td></tr>
</table>

<input type='hidden' name='P1' id='P1' value='ETvabResales'>
<input type='hidden' name='P2' id='P2' value='R'>
<input type='hidden' name='P3' id='P3' value='ALL'>
<input type='hidden' name='QS' id='QS' value='RESALE'>
<input type='hidden' name='Country' id='Country' value='Spain'>
<input type='hidden' name='RentalType' id='RentalType' value=''>
<input type='hidden' name='RentalDateFrom' id='RentalDateFrom' value='06-02-2013'>
<input type='hidden' name='RentalDateTo' id='RentalDateTo' value='06-02-2013'>
<input type='hidden' name='Language' id='Language' value='8'>
<input type='hidden' name='CustomArea' id='CustomArea' value=''>
</form>         
            </div>

        </div>

     <div class="clear"></div>  

 </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:57:54.517

如果我了解您希望将顶部 div 堆叠在底部 div 之上，但同时您希望这两个 div 中的图像具有彼此依赖的自己的堆栈顺序？

在这个

```
<div class="container-3">
  <div class="top"><img class="img1" src="http://dummyimage.com/200/ccc/000.png&text=image+1" />
  </div>
  <div class="bottom"><img  src="http://dummyimage.com/200/ccc/000.png&text=image+5" width="202" height="210" class="img2" /></div>
</div> 
```

当您将 z-index 设置为 div（父元素）时，您无法将 z-index 设置（您可以，但它不起作用）这些 div 中的图像，并期望它们将相互堆叠。

[小提琴](http://jsfiddle.net/BRANIS/rPAPz/142/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:47:26.220

几件事：对于图像，要使用`top`和`left`，他们需要有`position:absolute`。`position:relative`应该给包含的div，所以我把它移到：

```
.container-3{    
  position:relative; 
} 
```

然后给`position:absolute`.top

这允许独立堆叠图像和文本区域。然后需要调整一些定位，因为它都是相对于 的`.container-3`，并且需要调整一些 z-index 值。

您可以在以下位置查看结果：http: [//jsfiddle.net/rPAPz/143/](http://jsfiddle.net/rPAPz/143/)

希望这就是你要找的。

# graphviz - 如何在 GraphViz 中为点格式设置输出大小？

> ID：14784405
> 
> 赞同：42
> 
> 时间：2013-02-09T02:44:38.127
> 
> 标签：graphviz, networkx, pygraphviz, pyprocessing

我想确保所有节点在布局后都在某个范围内（比如 [0,0,W,H]）。

我认为边界框将是使用该`bb`属性的解决方案，但*dot*和*neato*都只是简单地覆盖它。

例如我的图表：

```
strict digraph {
    1,2,3;
    1 -> 3;
    3 -> 2;
} 
```

输出`neato -Gbb="0,0,50,50" -T dot file.txt`：

```
strict digraph {
        graph [bb="0,0,120.49,162.36"];
        node [label="\N"];
        1        [height=0.5,
                pos="27,18",
                width=0.75];
        3        [height=0.5,
                pos="70.233,75.918",
                width=0.75];
        1 -> 3   [pos="e,57.954,59.469 39.043,34.133 43.004,39.441 47.504,45.468 51.827,51.261"];
        2        [height=0.5,
                pos="93.485,144.36",
                width=0.75];
        3 -> 2   [pos="e,87.436,126.56 76.221,93.545 78.643,100.67 81.496,109.07 84.177,116.97"];
} 
```

对于and的任何值`bb`或任何组合，我得到相同的位置。`size``dpi`

我需要的是让所有节点都在一个给定的框中。

任何建议如何做到这一点？

**全文：**

我正在使用*networkx*中的 *graphviz_layout*来布局我的图表。我用*pyprocessing*绘制图形。如果有办法告诉我的界限，我想避免重新缩放 *graphviz_layout* 的结果。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-12-12T06:01:55.033

# 这是 TL;DR 版本：

要从 foo.gv 中的图形生成 900 x 1500 像素的 PNG 图像，您可以运行：

```
dot -Tpng -Gsize=9,15\! -Gdpi=100 -ofoo.png foo.gv 
```

生成正好 900 像素宽或 1500 高的图像，但不一定两者兼而有之；进而：

```
convert foo.png -gravity center -background white -extent 900x1500 final.png 
```

用空白填充图像，使其*正好是*900 x 1500 像素；[ImageMagick](http://www.imagemagick.org/)套件`convert`的一部分在哪里。

# 以下是详细解释：

澄清：

1.  [该`bb`属性被标记为“只写”](http://www.graphviz.org/doc/info/attrs.html#a:bb)，因此任何 Graphviz 布局引擎都不会尊重您在处理之前提交的任何值。

2.  在一般情况下，[Graphviz 可以生成矢量（可缩放）和位图图形](http://www.graphviz.org/doc/info/output.html)，因此 DPI 并不总是一个有意义的指标。

    特别是，该[`dpi`](http://www.graphviz.org/doc/info/attrs.html#d:dpi)属性仅对位图和 SVG 输出格式有效。

你要做的有点复杂，因为 Graphviz 生成的图像的像素大小是由几个交互属性驱动的。

让我们以任意图为例。

该命令`gvgen‎ -dh3`将生成一个三阶有向超立方体。（如果您想了解更多详细信息，gvgen 手册页的 PDF 版本在[这里](http://www.graphviz.org/pdf/gvgen.1.pdf)，但没关系，它只是用于演示目的的任意图表。）

可以通过运行以下命令来创建该图的默认点生成 PNG 渲染：

```
gvgen -dh3 | dot -Tpng -oexample.png 
```

当我这样做时，我得到一个 275 x 347 像素的 PNG 格式（位图）图像。（据报道`file example.png`。）

该[`size`](http://www.graphviz.org/doc/info/attrs.html#d:size)属性允许您为输出图像推荐最大或所需的高度和宽度（以英寸为单位）。即，该属性告诉 Graphviz*最多*`size=3,5`生成 3 x 5 英寸的图像。如果图像开始时小于 3 x 5，Graphviz 将不理会它。如果图像开始时大于 3 英寸 x 5 英寸，Graphviz 会将其缩小，直到它适合 3 x 5 英寸的画布（保留原始图像的纵横比）。

 *添加感叹号会将`size`属性从最大大小更改为*所需*大小。现在，如果*两个*尺寸都小于指定尺寸，则绘图将按比例放大，直到*至少一个*尺寸等于指定尺寸。

例如，运行：

```
gvgen -dh3 | dot -Tpng -Gsize=3,5\! -oexample.png 
```

（请注意，它会`\!`转义 bash 的感叹号。在 DOT 文件中，您只需编写`size=3,5!`.）

生成一个 288 x 363 像素的图像，在两个维度上都比默认值略大。

dot 是如何得出这些数字的？好吧，Graphviz 的默认 DPI 值是每英寸 96 像素。在该分辨率下，3 x 5*英寸*的图像是 288 x 480*像素*的图像。布局引擎只是简单地按比例放大图像，直到至少有一个尺寸与所需尺寸匹配。

[`dpi`您可以使用属性](http://www.graphviz.org/doc/info/attrs.html#d:dpi)覆盖默认 DPI 值，如下所示：

```
gvgen -dh3 | dot -Tpng -Gsize=3,5\! -Gdpi=200 -oexample.png 
```

现在生成的图像尺寸为 600 x 757 像素。同样，Graphviz 只是将图像放大，直到其中一个尺寸与所需尺寸匹配（但在此分辨率下，3 x 5 英寸的图像是 600 x 1000 像素的图像）。

因此，如果要生成包含任意数量像素的图像，则需要同时`size`进行`dpi`适当的设置。

即，假设您要创建一个 900 x 1500 像素的图像。你可以使用：

```
gvgen -dh3 | dot -Tpng -Gsize=9,15\! -Gdpi=100 -oexample.png 
```

或者

```
gvgen -dh3 | dot -Tpng -Gsize=3,5\! -Gdpi=300 -oexample.png 
```

甚至：

```
gvgen -dh3 | dot -Tpng -Gsize=900,1500\! -Gdpi=1 -oexample.png 
```

（虽然最后一个似乎在快速测试中对我有用，但我建议坚持使用更传统的 DPI 值以防万一。）

这解决了您的大部分问题，但请注意 Graphviz 仅缩放图像，直到*其中一个*尺寸与指定尺寸匹配。根据原始图像的纵横比，您可能会或可能不会获得您正在寻找的确切尺寸。

这就是[`ratio`属性](http://www.graphviz.org/doc/info/attrs.html#d:ratio)发挥作用的地方。

命令：

```
gvgen -dh3 | dot -Tpng -Gsize=3,5\! -Gdpi=300 -Gratio=fill -oexample.png 
```

应该给你一个你正在寻找的精确尺寸的图像，但有几个警告：

*   在实践中，它似乎有时会产生与预期略有不同的大小。例如，当我运行上面的命令时，我得到一个 900 x 1472 像素的图像（而不是 900 x 1500）。我不知道这是由于舍入错误还是什么。

*   为此，Graphviz 必须在每个维度上独立缩放布局。*缩放布局*而不是*图像*足够聪明，因此图像本身不会失真，但取决于您请求的纵横比与布局的“自然”纵横比的差异程度，水平与垂直间距可能看起来有点奇怪的。

`ratio`也接受一些不同的值。请参阅[文档](http://www.graphviz.org/doc/info/attrs.html#d:ratio)和/或进行一些实验以了解它们的作用。

对于它的价值，如果你真的想要你要求的精确像素尺寸的图像，我的建议是让 Graphviz 缩放图像，使两个尺寸之一匹配，然后使用[ImageMagick](http://www.imagemagick.org/)之类的东西来填充图像获得您正在寻找的精确纵横比。例如，命令：

```
convert in.png -gravity center -background white -extent 900x1500 out.png 
```

将在 900 x 1500 像素的画布上居中图像（从`in.png`）（将其保存到`out.png`），方法是根据需要填充水平或垂直尺寸*

# ruby-on-rails - 如何为不同视图上的模型生成 simple_form？

> ID：14784406
> 
> 赞同：0
> 
> 时间：2013-02-09T02:44:48.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我正在尝试在我的`home#index`.

但是，当我`<%= simple_form_for @search do |f| %>`在视图中执行此操作时`Home#index`，出现此错误：

```
NoMethodError at /

Message undefined method `model_name' for NilClass:Class 
```

即使`Home#index`在我的控制器中，我有：

```
 def index
    render :layout => 'home'
    @users = User.all
    @search = Search.new
  end 
```

如何`search`从我的应用程序中的任何视图访问我的对象？顺便说一句，我有一个`Search`模型 - 如果从我的`Home#index`.

想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T02:47:46.293

如果此视图在您的所有页面中共享，您可以跳过声明实例变量并直接`Search.new`在表单上调用

```
<%= simple_form_for Search.new do |f| %> 
```

# django-rest-framework - 设置 django rest 框架

> ID：14784408
> 
> 赞同：3
> 
> 时间：2013-02-09T02:45:09.910
> 
> 标签：django-rest-framework

我已经设置了我的 Django 休息框架并从我的初始教程开始。它运行良好，但是

当我运行它时，我得到了这个消息——

```
{
    "detail": "Authentication credentials were not provided."
} 
```

我有一个用户正在设置..不确定我没有在结果集中看到。当我去 shell 并尝试 User.objects.all() 时，我看到了那个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T08:45:57.957

如果您的问题不是这么简单，我深表歉意，但是您是否通过 Django 站点进行了身份验证？

快速移动的方法；转到 Django 管理控制台，登录，然后转到您的 API。

在旧版本的 Django 中，您必须在 [project]/settings.py 和 [project]/urls.py 中启用管理控制台。

[https://docs.djangoproject.com/en/1.6/ref/contrib/admin/](https://docs.djangoproject.com/en/1.6/ref/contrib/admin/)

在构建时，我倾向于在单独的选项卡中打开两者，当我第一次开始使用 rest_framework 时，我什至没有意识到本教程默认使用 django auth，直到我进入 tute 的 auth 部分。这些天来，我对这种当前的一些技术工作得多么自满感到有点傻！

# android - 如果我将 .apk 上传到所有没有翻译的国家/地区的 Google Play 会怎样？

> ID：14784414
> 
> 赞同：0
> 
> 时间：2013-02-09T02:46:17.053
> 
> 标签：android

如果该国家/地区不支持英语，他们会在这些国家/地区删除该应用程序吗？完全删除应用程序？就是想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:33:17.950

它不会被删除。如果您只将一种语言写入应用程序，它只会显示一种语言，无论它是什么。该国家/地区任何可以访问 Play 商店的人仍然可以使用它

# jsf - 带有数千个复选框的 JSF 数据表

> ID：14784417
> 
> 赞同：1
> 
> 时间：2013-02-09T02:46:46.693
> 
> 标签：jsf, icefaces

我在 JSF 上有一个数据表，其中包含以下列：

```
<ice:column style="width:25px;">   
    <ice:selectBooleanCheckbox value="#{historyBean.checked[mapEntry2.id]}" partialSubmit="true" id="playlist-select" style="width:25px;"> 
    </ice:selectBooleanCheckbox> 
</ice:column> 
```

如您所见，它由绑定到映射的复选框组成，其中键是 id，值是布尔值。

这一切都很好。但有时 dataTable 可能有多达几千行，然后，当用户选中或取消选中其中一个复选框时，partialSubmit 开始变得迟缓。

归根结底，我想要的是在服务器上对每个选定行的数据执行操作。到目前为止，我在服务器上使用 partialSubmit 和地图来存储所选数据的 Id。

如何使检查/取消检查操作更快地反映在服务器上？有什么线索吗？

谢谢你。

# html - 导航栏大小保持相对于内容

> ID：14784418
> 
> 赞同：1
> 
> 时间：2013-02-09T02:46:51.733
> 
> 标签：html, css, navigation

我的网站导航栏有问题。我使用列表和 CSS 样式创建了导航栏。栏上的可点击框保持较小，并且相对于该框中内容的大小，但我希望它是固定大小。

```
#navbar ul, #navbar ul li {padding:0; margin:0; list-style:none; }
#navbar a{color:#FFFFFF; font-weight:bold;}
#navbar a:hover{background:#777777;}
#navbar li a:link, #navbar li a:visited {background:#444444; text-decoration:none; height:24px; line-height:24px; display:inline; float:left; width:auto; padding:0px 10px;} 
```

这是我用于导航栏的 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:47:54.627

尝试设置：

```
 display:block; 
```

在您的锚标记上，结合一些填充以使样式远离文本？

# database - 是否有既定或商定的模式或算法可以根据用户历史数据创建“为您推荐”列表？

> ID：14784419
> 
> 赞同：0
> 
> 时间：2013-02-09T02:47:00.683
> 
> 标签：database, algorithm, search

在创建内容共享网站时，是否有一种公认的或典型的模式或算法来分析用户历史并推荐新的、看不见的内容？

我希望答案与语言无关，但如果重要的话，那就是 PHP/mySQL。

当前跟踪的数据是：

*   喜欢/不喜欢（用户 A 喜欢内容 B，用户 A 不喜欢内容 B）
*   内容有相关映射（所以内容A，与内容B、C、D相关）
*   用户之间没有关系（没有朋友/等）

理想情况下，我想抵消老化的内容，所以更新的内容权重更高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:05:29.767

通过研究发现的最佳解决方案是在 mysql 中实现 Slope One。

请在此处查看： [http ://en.wikipedia.org/wiki/Slope_One](http://en.wikipedia.org/wiki/Slope_One)

# javascript - 将嵌套模块与 require.js 优化器相结合

> ID：14784424
> 
> 赞同：1
> 
> 时间：2013-02-09T02:47:53.630
> 
> 标签：javascript, requirejs, amd, r.js

我有以下。

```
require([ 'a', 'b' ], function() {     
   if(x){
       require([ 'c', 'd' ], function( ) {});
   }   
}); 
```

`c`将始终加载`d`. 有没有办法让优化器优化`c`，`d`以便它们作为一个文件加载？

编辑：

我也使用 r.js 作为优化器。我的构建脚本的模块看起来像这样。

```
modules: [
    {
        name: "main",
    },
    {
        name: "c",
            include: ["d"]
    }
] 
```

这将包括`d`in `c`，但两者`c`和`d`仍然在运行时加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:52:57.880

`r.js`（我假设这就是您所说的“优化器”的意思）不会触及`c`，`d`除非您明确要求它 [ “您始终可以使用***include****选项**明确添加通过优化器的静态分析找不到的模块。”* **- 来自[RequireJS 文档](http://requirejs.org/docs/optimization)]。如果你这样做，它们最终会出现在优化的输出中，并将在运行时与`a`和`b`其他代码一起加载（即使`x`是`false`并且`require`永远不会到达块）。**

 **如果你不这样做，`r.js`将跳过该块，并且`RequireJS`只会在运行时解析`c`和`d`（如果`x`是`true`），当进行任何优化或连接为时已晚时。

**回复：编辑**

强制 include`c`和`d`in的正确方法`main`是：

```
 modules: [ {
        name: "main",
        include: ["c", "d"]
    } ] 
```

这意味着：*“包括所有`main.js`需要明确但还添加`c.js`和`d.js`”*

**回复：评论：**

哦，你是对的，你的配置也将创建一个`c.js`包含两者的优化，`c`但`d`无论如何都会`RequireJS`加载“独立” 。`d`奇怪的是，它仍然会使用`d`优化后的文件，甚至不会评估独立文件`d.js`（通过编辑优化`c.js`和的内容进行检查`d.js`）。我猜 RequireJS 会立即请求所有列出的依赖项，因为它无法知道加载`c`将满足`d`依赖项（这只有在加载和处理模块后才知道）。这是有道理的，因为唯一的其他选择是依次请求文件，一个接一个 - 这将是一个瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:08:53.977

我在[这里得到了答案](https://groups.google.com/d/msg/requirejs/n33UK52SZnY/YIWolEsJbr0J)

您可以在生产环境中设置路径映射以通知`d`位于`c`.

只需这样做：

```
paths: {
  'd': 'c'
} 
```**

# javascript - 使用 gl-matrix 库 mat4.translate 的 WebGL 未运行

> ID：14784427
> 
> 赞同：7
> 
> 时间：2013-02-09T02:48:10.663
> 
> 标签：javascript, webgl

我有这段代码：

```
function setupWebGL() {
    gl.clearColor(0.1, 0.5, 0.1, 1.0);
    gl.clear(gl.COLOR_BUFFER_BIT);
    gl.viewport(0,0,400,300);

    mat4.perspective(45, 400 / 300, 0.1, 100.0, pMatrix);
    mat4.identity(mvMatrix);
    mat4.translate(mvMatrix, [0, 0, -2.0]);
  } 
```

代码中的所有内容都运行，除了最后一行

```
mat4.translate(mvMatrix, [0, 0, -2.0]); 
```

我知道这一点，因为我在每一行之后都放置了警报功能，直到它们无法运行（我需要一种更好的 chrome 调试方法，有什么建议吗？）

我正在使用这里找到的 gl-Matrix 库[https://github.com/toji/gl-matrix/blob/master/dist/gl-matrix-min.js](https://github.com/toji/gl-matrix/blob/master/dist/gl-matrix-min.js)

关于为什么该行停止代码执行的任何想法？

这是完整的代码：

```
<!doctype html>
    <html>
      <head>
       <title>WebGL - Chapter One - Lol</title>

<style>
  body{ background-color: grey; }
  canvas{ background-color: white; }
</style>
<script src = "gl-matrix-min.js"></script>
<script src = "raf_polyfill.js"></script>
<script id="shader-vs" type="x-shader/x-vertex">
  attribute vec3 aVertexPosition;
  attribute vec3 aVertexColor;

  uniform mat4 uMVMatrix;
  uniform mat4 uPMatrix;

  varying highp vec4 vColor;
  void main(void){
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    vColor = vec4(aVertexColor, 1.0);
  }
</script>

<script id="shader-fs" type="x-shader/x-fragment">
  varying highp vec4 vColor;
  void main(void){
    gl_FragColor = vColor;
  }
</script>

<script>
  var gl = null,
      canvas = null,
      glProgram = null,
      fragmentShader = null,
      vertexShader = null;

  var vertexPositionAttribute = null,
      trianglesVerticeBuffer = null,
      vertexColorAttribute = null,
      trianglesColorBuffer = null;

  var angle = 0.0;

  var mvMatrix = mat4.create(),
      pMatrix = mat4.create();

  function initWebGL(){
    var canvas = document.getElementById("my-canvas");
    try{
      gl = canvas.getContext("experimental-webgl");
    }catch(e){}

    if(gl){

      initShaders();
      setupBuffers();

      getMatrixUniforms();

      animLoop();

    }else{
      alert("Error: Your browser does not appear to support WebGL.");
    }
  }
  function animLoop(){

          setupWebGL();

          setupDynamicBuffers();

          setMatrixUniforms();
          drawScene();
          requestAnimationFrame(animLoop,canvas);
  }

  function setupWebGL() {
    //sets the clear color to red lol
    gl.clearColor(0.1, 0.5, 0.1, 1.0);
    gl.clear(gl.COLOR_BUFFER_BIT);
    gl.viewport(0,0,400,300);

    mat4.perspective(45, 400 / 300, 0.1, 100.0, pMatrix);
    mat4.identity(mvMatrix);
mat4.translate(mvMatrix, [0, 0, -2.0]);  

  }

  function initShaders(){
    var fs_source = document.getElementById("shader-fs").innerHTML;
    var vs_source = document.getElementById("shader-vs").innerHTML;

    //compile shaders
    vertexShader = makeShader(vs_source, gl.VERTEX_SHADER);
    fragmentShader = makeShader(fs_source, gl.FRAGMENT_SHADER);
    //create program
    glProgram = gl.createProgram();

    //attach and link shaders to the program
    gl.attachShader(glProgram, vertexShader);
    gl.attachShader(glProgram, fragmentShader);
    gl.linkProgram(glProgram);

    if (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {
      alert("Unable to initialize the shader program.");
    }

    //use program
    gl.useProgram(glProgram);
  }

  function makeShader(src, type) {
    //compile the vertex shader
    var shader = gl.createShader(type);
    gl.shaderSource(shader, src);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
      alert("Error compiling shader: " + gl.getShaderInfoLog(shader));
    }

    return shader;
  }

  function getMatrixUniforms(){
      glProgram.pMatrixUniform = gl.getUniformLocation(glProgram, "uPMatrix");
      glProgram.mvMatrixUniform = gl.getUniformLocation(glProgram, "uMVMatrix");
  }
  function setMatrixUniforms(){
      gl.unifromMatrix4fv(glProgram.pMatrixUniform, false, pMatrix);
      gl.unifromMatrix4fv(glProgram.mvMatrixUniform, false, mvMatrix); 
  }

  function setupBuffers() {
    var triangleVerticeColors = [
         1.0, 0.0, 0.0,
         1.0, 1.0, 1.0,
         1.0, 0.0, 0.0,

         0.0, 0.0, 1.0,
         1.0, 1.0, 1.0,
         0.0, 0.0, 1.0
    ];

    trianglesColorBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, trianglesColorBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(triangleVerticeColors), gl.STATIC_DRAW);
  }

  function setupDynamicBuffers(){

    var xTran = Math.sin(angle)/2.0;
    var triangleVertices = [
        -0.5 + xTran, 0.5, -0.5,
         0.0 + xTran, 0.0, -0.5,
        -0.5 + xTran, -0.5, -0.5,

         0.5 + xTran, 0.5, -0.5,
         0.0 + xTran, 0.0, -0.5,
         0.5 + xTran, -0.5, -0.5
    ];
    angle += 0.05;

    trianglesVerticeBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, trianglesVerticeBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(triangleVertices), gl.DYNAMIC_DRAW);

  }

  function drawScene() {
    vertexPositionAttribute = gl.getAttribLocation(glProgram, "aVertexPosition");
    gl.enableVertexAttribArray(vertexPositionAttribute);
    gl.bindBuffer(gl.ARRAY_BUFFER, trianglesVerticeBuffer);
    gl.vertexAttribPointer(vertexPositionAttribute, 3, gl.FLOAT, false, 0, 0);

    vertexColorAttribute = gl.getAttribLocation(glProgram, "aVertexColor");
    gl.enableVertexAttribArray(vertexColorAttribute);
    gl.bindBuffer(gl.ARRAY_BUFFER, trianglesColorBuffer);
    gl.vertexAttribPointer(vertexColorAttribute, 3, gl.FLOAT, false, 0, 0);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
  }
</script>

</head>
<body onload="initWebGL()">
<canvas id="my-canvas" width="400" height="300">
    Your browser does not support the HTML5 canvas element.
</canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-25T16:19:59.400

使用新的 API：

### 旧 API

```
mat4.translate(mvMatrix, [0, 0, -2.0]); 
```

### 新 API

```
var translation = vec3.create();
vec3.set (translation, 0, 0, -2.0);
mat4.translate (mvMatrix, mvMatrix, translation); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T07:01:27.753

你有一个错字：

`unifromMatrix4fv`应该`uniformMatrix4fv`在功能`setMatrixUniforms`。

我不确定这是否解决了您的问题，或者您为什么认为您的问题出在`mat4.translate`. 您始终可以打开 JavaScript 控制台（如果您在 Windows 中运行 Chrome，请按 F12），它会告诉您错误是什么。

# facebook - 我已经在我的博客上安装了“分享这个”，当我点击 facebook 的点赞按钮时，只有其中的一部分显示在屏幕上。我该如何解决？

> ID：14784428
> 
> 赞同：0
> 
> 时间：2013-02-09T02:48:12.397
> 
> 标签：facebook, wordpress, facebook-like

我通过电子邮件向支持人员发送了电子邮件，他们回复说将此代码添加到我的 CSS 中。

```
**span.st_fblike_hcount span div.fb-like span iframe#f249dba5d33c086.fb_ltr
{
height: 234px !important;
max-width: 634% !important;
}** 
```

我是编程新手，不知道应该在哪里添加这段代码。有人可以指导我如何解决这个问题。

我的网址[我的博客](http://cookwithjack.com/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:14:07.413

看起来您需要进入插件文件夹并修改 CSS 文件。在 sharthis 文件夹中有一个名为 sharthis.css 的文件

在文本编辑器中打开文件并添加他们给你的以下代码。

```
span.st_fblike_hcount span div.fb-like span iframe#f249dba5d33c086.fb_ltr
{
height: 234px !important;
max-width: 634% !important;
} 
```

保存并刷新页面，它应该可以工作

# shell - 在 unix shell 中获取目录的大小

> ID：14784429
> 
> 赞同：1
> 
> 时间：2013-02-09T02:48:21.713
> 
> 标签：shell, unix, size, tcsh

我是在 Unix shell 环境中编程的一个相对较新的人，我有一个关于如何获取目录大小的问题。我读过您可以执行以下命令；du、du -b 等等。但是，当我尝试将其放入我的程序中时，它会以某种方式返回路径名而不是实际的目录大小。这就像串联不起作用或什么的。.garbage 文件肯定在我的主目录中，所以我不知道问题出在哪里。这可能是我忽略的一些愚蠢的错误。如果任何一双新鲜的眼睛或有 UNIX 经验的人可以帮我看看这个，我将不胜感激！这是我的外壳代码：

```
 #!/bin/tcsh -f

set n = 1

mkdir -p ~/.garbage

while ($n <= $#argv)
 if ( -d $argv[$n] ) then
   echo "$argv[$n] is a directory and cannot be removed"
 else

     mv $argv[$n] ~/.garbage

     echo "The file moved to the garbage directory was: "$argv[$n] "\n"

 endif 
@ n++
end

  echo "The garbage bin's size is: " du ~/.garbage "bytes." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T04:06:52.597

您似乎错过了在 echo 行上使用命令替换。你必须用这样的反引号括起你对 du -sh 的调用

```
echo "size is:" `du -sh` "...." 
```

# javascript - 继承和对象字面量

> ID：14784434
> 
> 赞同：1
> 
> 时间：2013-02-09T02:48:59.243
> 
> 标签：javascript, jquery

我创建了以下测试，但不确定为什么它不起作用：http: [//jsfiddle.net/SKphY/](http://jsfiddle.net/SKphY/)。我应该得到三个警报对话框：“你好”、“再见”和“再见”。相反，我只得到前两个。

```
var p = {
    hello : function() {
        alert('hello');
    }
};

var obj1 = Object.create(p, {
    goodbye : function() {
        alert('goodbye');
    }
});

var obj2 = $.extend(p, {
    goodbye : function() {
        alert('goodbye');   
    }
});

$(function() {
    // The third line (below) gives the parser error:
    // 'Uncaught TypeError: Property 'goodbye' of object #<Object> 
    // is not a function' 

    obj1.hello();
    obj2.goodbye(); // This executes fine
    obj1.goodbye(); // This gives the parser error
}); 
```

关键是我正在学习如何使用对象继承，在这种情况下使用对象文字，我很好奇为什么当我使用 jQuery.extend 时它对我有用，而不是使用 Object.create。据我所知，我似乎遵循了[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)中概述的方法。我究竟做错了什么？

谢谢你的时间，ktm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:03:00.727

[http://jsfiddle.net/SKphy/1/](http://jsfiddle.net/SKphY/1/)

正如@headacheCoder 指出的那样，第二个参数`Object.create`用于属性对象（这也在您链接的MDN 文档中进行了描述）。

检查上面的链接以获得可行的解决方案：

```
var obj1 = Object.create(p, {
    goodbye : {value : function() {
        alert('goodbye');
    }}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T02:59:43.970

Object.create 中的第二个参数用于属性对象，而不是用于合并。改用`var obj1 = Object.create(p);`它，它将按预期工作。

> 如果指定且未定义，则其可枚举自身属性的对象（即，在其自身上定义的那些属性，而不是沿其原型链的可枚举属性）指定要添加到新创建的对象的属性描述符，以及相应的属性名称。

```
// Example where we create an object with a couple of sample properties.
// (Note that the second parameter maps keys to *property descriptors*.)
o = Object.create(Object.prototype, {
// foo is a regular "value property"
foo: { writable:true, configurable:true, value: "hello" },
// bar is a getter-and-setter (accessor) property
bar: {
    configurable: false,
    get: function() { return 10 },
    set: function(value) { console.log("Setting `o.bar` to", value) }
}}) 
```

# c++ - 如何使用 lambda 在 std::function 参数中推导出模板类型？

> ID：14784441
> 
> 赞同：4
> 
> 时间：2013-02-09T02:50:21.490
> 
> 标签：c++, templates, c++11, lambda, type-inference

我有一个 boost::variant 并且我只想在变体是特殊类型时才执行函子，所以我编写了这个函数：

```
template<typename T, typename Variant>
void if_init(Variant& opt_variant, std::function<void(T)> functor){
    if(auto* ptr = boost::get<T>(&opt_variant)){
        functor(*ptr);
    }   
} 
```

这很好用，但我希望推导出类型 T，以便我可以这样写：

```
if_init(b, [](double var){ std::cout << "I'm double and set" << std::endl; }); 
```

但是没有推断出类型：

```
type_inference.cpp:19:5: error: no matching function for call to 'if_init'
    if_init(b, [](double var){ std::cout << "I'm double and set" << std::endl; }); 
    ^~~~~~~
type_inference.cpp:10:6: note: candidate template ignored: failed template argument deduction
    void if_init(Variant& opt_variant, std::function<void(T)> functor){ 
```

如果我写：

```
if_init<double>(b, [](double var){ std::cout << "I'm double and set" << std::endl; }); 
```

它运作良好。

有没有办法推导出类型 T ？我只想输入 T 一次。这里的类型很短，但在实际情况下，有长类型。

我正在使用 CLang 3.2。

这是完整的测试用例（第一个调用编译不是第二个）：

```
#include <iostream>
#include <functional>
#include <boost/variant.hpp>

typedef boost::variant<int, double> Test;

template<typename T, typename Variant>
void if_init(Variant& opt_variant, std::function<void(T)> functor){
    if(auto* ptr = boost::get<T>(&opt_variant)){
        functor(*ptr);
    }   
}

int main(){
    Test b = 1.44; 

    if_init<double>(b, [](double var){ std::cout << "I'm double and set" << std::endl; });
    if_init(b, [](int var){ std::cout << "I'm int and set" << std::endl; });      

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T03:20:02.460

我建议您将其`std::function<Sig>`视为符合签名的任何一个函子的容器`Sig`- 并且可以随时替换。这个功能非常方便，例如`std::vector<std::function<Sig>>`因为这样的容器可以容纳*不同*类型的函子。

在您的情况下，因为您只关心只有一个函子，您真的不需要`std::function<Sig>`. 因此，我建议您像这样声明您的函数模板：

```
template<typename T, typename Variant, typename Functor>
void if_init(Variant& opt_variant, Functor functor); 
```

如果您担心这不会传达`Functor`必须符合`void(T)`签名的信息，请注意这`std::function<Sig>`也*不会*强制执行：虽然显然您最终*会*遇到编译错误，但这不是一个好的错误。计划进行更改（也许您的实现也有），但更改为另一种错误。对您的情况仍然没有帮助。

我个人使用模板别名（[在模板参数列表中](http://flamingdangerzone.com/cxx11/2012/06/01/almost-static-if.html)）来记录和强制执行函子应符合的内容。这最终看起来像：

```
// Documents that e.g. long l = std::forward<Functor>(functor)(42.)
// should be a valid expression -- a functor that returns int would
// also be accepted.
// Triggers a hard-error (typically a static_assert with a nice message)
// on violation.
template<typename Functor, Requires<is_callable<Functor, long(double)>>...>
R foo(Functor functor);

// Documents that this function template only participates in overload resolution
// if the functor conforms to the signature.
// Does not trigger a hard-error (necessary by design); if everything goes right
// then another overload should be picked up -- otherwise an error of the kind
// 'no matching overload found' is produced
template<typename Functor, EnableIf<is_callable<Functor, long(double)>>...>
R bar(Functor functor); 
```

至于您的*确切*问题，C++ 的规则不允许在您的情况下推导出模板参数。这真的不是一个容易解决的“问题”，如果它是一个。您可以找到有关此的[更多信息](https://stackoverflow.com/questions/6060824/c-template-argument-can-not-be-deduced)。

# bash - linux排序对我不起作用

> ID：14784442
> 
> 赞同：1
> 
> 时间：2013-02-09T02:50:22.270
> 
> 标签：bash, shell, unix, sorting, sh

我有一个如下的排序命令，

```
sort -t $'\t' -k2,2nr 
```

结果片段就像

```
apple rind  9.983498736703696E-5    9.821524318539816E-5    1.6197441816387907E-6
barren apple    9.972712868635945E-5    1.1021253359685341E-4   -1.0485404910493957E-5
kept apple  9.95533841217251E-6 2.2368286282260593E-5   -1.2412947870088083E-5
apple become    9.954637398594461E-6    1.81625156251578E-5 -8.207878226563337E-6
straggling apple    9.953618126913039E-6    1.408307957656849E-5    -4.129461449655451E-6
apple big   9.948337410841929E-5    1.0583294657729803E-4   -6.349572468878738E-6
ibm apple   9.946711193013018E-4    8.75459103803131E-4 1.1921201549817075E-4
apple rootstock 9.93574943786854E-4 9.333210264003837E-4    6.025391738647017E-5
smaller apple   9.933352410426696E-5    1.0778732631866422E-4   -8.453802214397258E-6
cream apple 9.93011589875499E-4 9.235511228493648E-4    6.946046702613425E-5 
```

我想对表格的第二列进行排序，但结果显示它没有按我的预期工作。谁能告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:06:58.977

`-n`不做科学记数法。改为使用`-g`。

# big-o - 这将属于什么 Big-O 符号？

> ID：14784446
> 
> 赞同：3
> 
> 时间：2013-02-09T02:50:29.103
> 
> 标签：big-o

这将属于什么 Big-O 符号？我知道 setSearch() 和 removeAt() 的顺序是 O(n) （假设它们是任何一种方式）。我知道如果没有 for 循环，它肯定会是 O(n)，但是我很困惑如何计算它与一个 for 循环投入其中的结果。我数学不是那么好……所以。会是 O(n^2) 吗？

```
public void removeAll(DataElement clearElement)
{
     if(length == 0)
         System.err.println("Cannot delete from an empty list.");
     else
     {
         for(int i = 0; i < list.length; i++)
         {      
            loc = seqSearch(clearElement);

            if(loc != -1)
            {      
               removeAt(loc);
                --i;
             }
         } 
     } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:03:24.183

如果 removeAt() 和 seqSearch() 相对于列表的长度是 O(n)，那么是的，这个算法的顺序是 O(n^2)。这是因为在 for 循环中您每次都调用 seqSearch，并有可能调用 removeAt(loc)。这意味着对于每次迭代，您都在进行 n 次或 2n 次操作。在最坏的情况下，您有 2n^2 次操作，即 O(n^2)。

# c++ - C++ 读取大数据，解析，然后写入数据

> ID：14784447
> 
> 赞同：2
> 
> 时间：2013-02-09T02:50:42.250
> 
> 标签：c++, performance, large-files, mmap

我正在尝试读取一个大型数据集，按照我需要的方式对其进行格式化，然后将其写入另一个文件。我正在尝试使用 C++ 而不是 SAS 或 STATA 以获得速度优势。数据文件通常约为 10 GB。我当前的代码需要一个多小时才能运行（然后我杀死它，因为我确信我的代码效率很低。

有没有更有效的方法来做到这一点？也许将文件读入内存，然后使用 switch 语句对其进行分析？（我有 32gb ram linux 64bit）。是否有可能读取，然后在循环中写入会减慢它，因为它一直在读取，然后写入？我试图从一个驱动器读取它，然后写入另一个驱动器以加快速度。

开关盒是否会减慢速度？

我现在使用 getline 读取数据的过程，使用 switch 语句正确解析它，然后将其写入我的输出文件。并重复 3 亿行。switch 语句中还有大约 10 个案例，但为简洁起见，我没有复制。

代码在 main 函数中可能非常难看，但我想在我研究吸引力之前让它工作。

我试过使用 read() 但没有任何成功。如果我需要澄清任何事情，请告诉我。

感谢您的帮助！

```
 #include <iostream>
 #include <fstream>
 #include <string>
 #include <sstream>
 #include <stdio.h>
 //#include <cstring>
 //#include <boost/algorithm/string.hpp>

 #include <vector>

  using namespace std;
 //using namespace boost;

 struct dataline
{
char type[0];
double second;
short mill;
char event[1];
char ticker[6];
char marketCategory[1];
char financialStatus[1];
int roundLotSize;
short roundLotOnly;
char tradingState[1];
char reserved[1];
char reason[4];
char mpid[4];
char primaryMarketMaker[1];
char primaryMarketMode[1];
char marketParticipantState[1];
unsigned long orderNumber;
char buySell[0];
double shares;
float price;
int executedShares;
double matchNumber;
char printable[1];
double executionPrice;
int canceledShares;
double sharesBig;
double crossPrice;
char crossType[0];
double pairedShares;
double imbalanceShares;
char imbalanceDirection[1];
double fairPrice;
double nearPrice;
double currentReferencePrice;
char priceVariationIndicator[1];
};

  int main () 
{
string a; 
string b;
string c;
string d;
string e;
string f;
string g;
string h;
string k;
string l;
string times;
string smalltimes;

short time;     //counter to keep second filled
short smalltime;    //counter to keep millisecond filled
double N;
double NN;
double NNN;
int length;
char M; 
//vector<> fout;
string line;

ofstream fout ("/media/3tb/test.txt");
ifstream myfile;
myfile.open("S050508-v3.txt");

dataline oneline;

if (myfile.is_open())
    {
    while ( myfile.good() )
        {
        getline (myfile,line);
//      cout << line<<endl;;

        a=line.substr(0,1);
        stringstream ss(a);
        char type;
        ss>>type;

        switch (type)
            { 
            case 'T':
                {
                if (type == 'T')
                    {
                    times=line.substr(1,5);
                    stringstream s(times);
                    s>>time;
                    //oneline.second=time;
                    //oneline.second;
                    //cout<<time<<endl;
                    }
                else
                    {
                    time=time;
                    }
                break;
                }
            case 'M':
                {
                if (type == 'M')
                    {
                    smalltimes=line.substr(1,3);
                    stringstream ss(smalltimes);
                    ss>>smalltime;      //oneline.mill;
                //  cout<<smalltime<<endl;                            //smalltime=oneline.mill;
                    }
                else
                    {
                    smalltime=smalltime;
                    }
                break;
                }

            case 'R':
                {
                oneline.second=time;
                oneline.mill=smalltime;

                a=line.substr(0,1);
                stringstream ss(a);
                ss>>oneline.type;

                b=line.substr(1,6);
                stringstream sss(b);
                sss>>oneline.ticker;

                c=line.substr(7,1);
                stringstream ssss(c);
                ssss>>oneline.marketCategory;

                d=line.substr(8,1);
                stringstream sssss(d);
                sssss>>oneline.financialStatus;

                e=line.substr(9,6);
                stringstream ssssss(e);
                ssssss>>oneline.roundLotSize;

                f=line.substr(15,1);
                stringstream sssssss(f);
                sssssss>>oneline.roundLotOnly;

                *oneline.tradingState=0;
                *oneline.reserved=0;
                *oneline.reason=0;
                *oneline.mpid=0;
                *oneline.primaryMarketMaker=0;
                *oneline.primaryMarketMode=0;
                *oneline.marketParticipantState=0;
                oneline.orderNumber=0;
                *oneline.buySell=0;
                oneline.shares=0;
                oneline.price=0;
                oneline.executedShares=0;
                oneline.matchNumber=0;
                *oneline.printable=0;
                oneline.executionPrice=0;
                oneline.canceledShares=0;
                oneline.sharesBig=0;
                oneline.crossPrice=0;
                *oneline.crossType=0;
                oneline.pairedShares=0;
                oneline.imbalanceShares=0;
                *oneline.imbalanceDirection=0;
                oneline.fairPrice=0;
                oneline.nearPrice=0;
                oneline.currentReferencePrice=0;
                *oneline.priceVariationIndicator=0;

                break;
                }//End Case 
            }//End Switch
            }//end While
    myfile.close();

     }//End If
else cout << "Unable to open file"; 
cout<<"Junk"<<endl;

return 0;
} 
```

**更新**所以我一直在尝试使用内存映射，但现在我遇到了分段错误。我一直在尝试遵循不同的示例来拼凑一些对我有用的东西。为什么我会遇到分段错误？我采用了我的代码的第一部分，如下所示：

```
int main (int argc, char** path) 
 {
 long i;
 int fd;
 char *map;
 char *FILEPATH = path;
 unsigned long FILESIZE;
 FILE* fp = fopen(FILEPATH, "/home/brian/Desktop/S050508-v3.txt");
 fseek(fp, 0, SEEK_END);
 FILESIZE = ftell(fp);
 fseek(fp, 0, SEEK_SET);
 fclose(fp);
 fd = open(FILEPATH, O_RDONLY);

 map = (char *) mmap(0, FILESIZE, PROT_READ, MAP_SHARED, fd, 0);

 char z;
 stringstream ss;

 for (long i = 0; i <= FILESIZE; ++i) 
    {
    z = map[i];
    if (z != '\n') 
        {
        ss << z;
            }
    else 
        {
            // c style tokenizing
            ss.str("");
            }
        }
 if (munmap(map, FILESIZE) == -1) perror("Error un-mmapping the file");
 close(fd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:58:43.030

> 数据文件通常约为 10 GB。...开关盒是否会减慢速度？

几乎可以肯定不是，闻起来像你受 I/O 限制。但是你应该考虑测量它。现代 CPU 具有性能计数器，使用正确的工具很容易利用这些计数器。但是让我们开始将问题划分为一些主要领域：设备的 I/O、内存的加载/存储、CPU。您可以在代码中读取时钟的位置放置一些标记，以了解每个操作需要多长时间。`linux`您可以使用`clock_gettime()`或`rdtsc`指令来访问比操作系统刻度更精确的时钟。

考虑`mmap`/ `CreateFileMapping`，其中任何一个都可能为您正在访问的页面提供更好的效率/吞吐量。

如果流过大量已经被分页的数据，请考虑大/巨大的页面。

从[手册中`mmap()`](http://linux.die.net/man/2/mmap)：

> 描述
> 
> mmap() 在调用进程的虚拟地址空间中创建一个新映射。新映射的起始地址在 addr 中指定。length 参数指定映射的长度。

这是一个[`mmap()`例子](https://www.linuxquestions.org/questions/programming-9/mmap-tutorial-c-c-511265/)：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/mman.h>

#define FILEPATH "/tmp/mmapped.bin"
#define NUMINTS  (1000)
#define FILESIZE (NUMINTS * sizeof(int))

int main(int argc, char *argv[])
{
    int i;
    int fd;
    int *map;  /* mmapped array of int's */

    fd = open(FILEPATH, O_RDONLY);
    if (fd == -1) {
    perror("Error opening file for reading");
    exit(EXIT_FAILURE);
    }

    map = mmap(0, FILESIZE, PROT_READ, MAP_SHARED, fd, 0);
    if (map == MAP_FAILED) {
    close(fd);
    perror("Error mmapping the file");
    exit(EXIT_FAILURE);
    }

    /* Read the file int-by-int from the mmap
     */
    for (i = 1; i <=NUMINTS; ++i) {
    printf("%d: %d\n", i, map[i]);
    }

    if (munmap(map, FILESIZE) == -1) {
    perror("Error un-mmapping the file");
    }
    close(fd);
    return 0;
} 
```

# google-apps-script - TypeError：在对象表中找不到函数 getCell

> ID：14784448
> 
> 赞同：1
> 
> 时间：2013-02-09T02:50:44.060
> 
> 标签：google-apps-script

一般来说，我对与 Google Apps 脚本和 JavaScript 相关的任何内容都完全陌生。

我已经根据自己的需要调整了一个脚本，但是当我运行它时出现以下错误：

> TypeError：在对象表中找不到函数 getCell

本质上，我试图获取单元格 D4 (4,4) 中的值并将该值传递给变量`emailTo`。我显然没有正确地做到这一点。脚本的其余部分应该可以正常工作。任何指导表示赞赏。

```
// Sends PDF receipt
// Based on script by ixhd at https://gist.github.com/ixhd/3660885

// Load a menu item called "Receipt" with a submenu item called "E-mail Receipt"
// Running this, sends the currently open sheet, as a PDF attachment
function onOpen() {
  var submenu = [{name:"E-mail Receipt", functionName:"exportSomeSheets"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu('Receipt', submenu);  
}

function exportSomeSheets() {
  // Set the Active Spreadsheet so we don't forget
  var originalSpreadsheet = SpreadsheetApp.getActive();

  // Set the message to attach to the email.
  var message = "Thank you for attending !  Please find your receipt attached.";

  // Construct the Subject Line
  var subject = "Receipt";

  // THIS IS WHERE THE PROBLEM IS
  // Pull e-mail address from D4 to send receipt to
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var emailTo = sheet.getCell(4, 4).getValue();

  // Create a new Spreadsheet and copy the current sheet into it.
  var newSpreadsheet = SpreadsheetApp.create("Spreadsheet to export");
  var projectname = SpreadsheetApp.getActiveSpreadsheet();
  sheet = originalSpreadsheet.getActiveSheet();
  sheet.copyTo(newSpreadsheet);

  // Find and delete the default "Sheet 1"
  newSpreadsheet.getSheetByName('Sheet1').activate();
  newSpreadsheet.deleteActiveSheet();

  // Make the PDF called "Receipt.pdf"
  var pdf = DocsList.getFileById(newSpreadsheet.getId()).getAs('application/pdf').getBytes();
  var attach = {fileName:'Receipt.pdf',content:pdf, mimeType:'application/pdf'};

  // Send the  constructed email 
  MailApp.sendEmail(emailTo, subject, message, {attachments:[attach]});

  // Delete the wasted sheet
  DocsList.getFileById(newSpreadsheet.getId()).setTrashed(true);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T00:52:05.057

问题是那`getCell()`是一种方法`Range`，而不是`Sheet`。`Range`从 中获取 a `Sheet`，然后`getCell()`在`Range`对象上使用

# java - 在我的代码中覆盖文件 java 时出错

> ID：14784453
> 
> 赞同：0
> 
> 时间：2013-02-09T02:52:38.983
> 
> 标签：java, file

我创建了一个临时文件，写入它，我想覆盖现有文件

1.  创建临时文件
2.  填补;填写（表格，资料
3.  打开旧文件
4.  将旧文件设置为等于新文件

这是我的代码，但它不起作用

如果您能找到问题，请告诉我。谢谢！

```
try{
            //create a temporary file
            File temporary=File.createTempFile("tmp", "");
            BufferedWriter writer = new BufferedWriter(new FileWriter(temporary));
            //Write each line to file (temporary)
            for (String string : parsedArticlesToSave) {
                writer.write (String.format("%s\n", string));
            }
            //load old file
            File oldFile = new File("StringFile/ArticlesDB.txt");
            //replace old file with new file
            oldFile=temporary;
            //release resources
            writer.close();
        }catch(Exception e){
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:55:17.150

我认为您误解了类 java.io.File 的整个概念

并且不理解Java中变量赋值的概念。

使这个类的对象 java.io.File 在文件上创建一种指针，以便您可以“在整体上”对其进行操作

所以你通过'oldFile =temporary'所做的只是让你指向oldFile的指针指向临时文件。但这只是在 Java 中变量赋值的上下文中完成的，它对实际的文件系统没有任何影响。

现在关于变量赋值。

与对象一起使用：假设您有两个整数：

```
Integer a = 5;
Integer b = 10; 
```

通过执行“b = a”，您实际上并没有更改对象 b 本身，而是您对对象 b 的引用变成了对对象 a 的引用。对象 b 的旧值仍然存储在内存中，但是由于在赋值之后没有人指向（引用）它，它变得不可访问并且最终将被垃圾回收。

现在关于解决方案本身：您应该真正将文件 temp 的内容逐行逐字节复制到旧文件中），或者如果您只想使旧文件具有相同的内容并且您真的不需要临时文件只是删除文件，然后将临时文件重命名为“oldFile”。

这是如何在 java 中使用 rename 的链接： [Renaming in Java](https://stackoverflow.com/questions/1158777/renaming-a-file-using-java)

希望这可以帮助

# java - imacros 关键字验证

> ID：14784456
> 
> 赞同：-1
> 
> 时间：2013-02-09T02:52:48.030
> 
> 标签：java, firefox, scripting, automation, imacros

我有一个自动填写表格的宏。但有时在自动填写表格后，我需要检查我的电子邮件以获取“完成填写表格”的链接（有点像验证）。有时它要求我检查我的电子邮件以获取验证链接，有时它不会。

我如何让我的宏检查页面是否询问我`"you have to check your email"`，如果我必须检查我的电子邮件，我想暂停它，以便我可以查看我的邮件，然后单击验证电子邮件。如果它不需要我检查电子邮件，只需循环并从头开始并开始填写另一个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:34:20.260

imacros 中没有 if 语句，因此您需要为此使用 javascript（例如）。流的例子是：

```
// scrape text on the page
if (text found){
    //pause
    //verify link
}
else {
    continue;
} 
```

# javascript - JS图像交换中的多个图像，mouseout错误图像

> ID：14784458
> 
> 赞同：1
> 
> 时间：2013-02-09T02:52:57.147
> 
> 标签：javascript, html, image, swap

我试图复制一个图像交换，但是当我只希望它在最后一个时，鼠标移出最终在三个交换中的每一个上都是图像 3。任何帮助我弄清楚我如何使交换彼此不同，因此他们不会调用相同的图像，我将不胜感激，谢谢！

```
//---imageswap1

if(document.images) {
    cars1 = new Array();
    cars1[1] = new Image();
    cars1[1].src = "car4.png";
    cars1[2] = new Image();
    cars1[2].src = "car1.png";
}

function swapping_pics(picture_name, value_2) {
    document.images[picture_name].src = cars1[value_2].src;
}

//---imageswap2

if(document.images) {
    cars2 = new Array();
    cars2[1] = new Image();
    cars2[1].src = "car5.png";
    cars2[2] = new Image();
    cars2[2].src = "car2.png";
}

//---imageswap3

function swapping_pics(picture_name, value_2) {
    document.images[picture_name].src = cars2[value_2].src;
}

if(document.images) {
    cars3 = new Array();
    cars3[1] = new Image();
    cars3[1].src = "car6.png";
    cars3[2] = new Image();
    cars3[2].src = "car3.png";
}

function swapping_pics(picture_name, value_2) {
    document.images[picture_name].src = cars3[value_2].src;
}

<div id="imageswap1" onMouseOver="swapping_pics('car1',1)" onMouseOut="swapping_pics('car1',2)" href="javascript:void">
    <img name="car1" border=”0” src="car1.png" alt="car1">
</div>

<div id="imageswap2" onMouseOver="swapping_pics('car2',1)" onMouseOut="swapping_pics('car2',2)" href="javascript:void">
    <img name="car2" border=”0” src="car2.png" alt="car2">
</div>

<div id="imageswap3" onMouseOver="swapping_pics('car3',1)" onMouseOut="swapping_pics('car3',2)" href="javascript:void">
    <img name="car3" border=”0” src="car3.png" alt="car3">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:21:28.153

您不能有多个具有相同名称的函数：`swapping_pics`，为了解决您的问题，您可以为每个函数添加一个 id，例如：`swapping_pics_01`、`swapping_pics_02`、`swapping_pics_03`。

但这并不能解决你所拥有的混乱，而不是所有的代码，CSS 可以以更好的方式做到这一点......

**HTML：**

```
<div id="imageswap1" class="swap"></div>
<div id="imageswap2" class="swap"></div>
<div id="imageswap3" class="swap"></div> 
```

**CSS：**

```
// This class "swap" is general to all the divs
.swap {
    width: 500px; // This is the image size
    height: 400px;
}

#imageswap1       { background-image: url("car01.png"); }
#imageswap1:hover { background-image: url("car04.png"); } // Mouse over 1

#imageswap2       { background-image: url("car02.png"); }
#imageswap2:hover { background-image: url("car05.png"); } // Mouse over 2

#imageswap3       { background-image: url("car03.png"); }
#imageswap3:hover { background-image: url("car06.png"); } // Mouse over 3 
```

摆弄这个例子：http: [//jsfiddle.net/qnw6j/](http://jsfiddle.net/qnw6j/)

# java - 爪哇声音。暂时静音背景音乐并播放声音

> ID：14784459
> 
> 赞同：2
> 
> 时间：2013-02-09T02:54:05.870
> 
> 标签：java, audio, usb, javasound

我在大学里的兄弟会里，在这个兄弟会里，我们有楼梯。不时有人从楼梯上摔下来。我们通常从酒吧后面的电脑播放音乐（通常来自互联网或 iTunes）。我有一个 USB 按钮，并且想编写一个程序，当我在有人从楼梯上摔下来后按下按钮时，临时静音背景音乐并播放歌曲“Wiiiipe-ouuut”中的片段。我怎么能用声音做到这一点......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:10:16.773

制作一个只显示一个播放给定声音提示的按钮，甚至是一组用于不同提示的按钮的 Java 应用程序非常容易。

您可能会让应用程序保持运行，等待正确的时间按下按钮，以获得近乎即时的响应。我会使用 Swing 库制作按钮并使用 javax.sound.sampled.Clip 将声音保存在内存中并根据命令播放。但是，可能还有更简单的音频对象可以做到这一点，因为您实际上不需要做任何事情，只需以最大音量播放提示。此外，JavaFX 开始用于 gui 按钮。

我不知道如何从 Java 中调低 iTunes 或浏览器的音量。这并不是说它不能完成。如果其他人可以说如何，请务必选择他们的答案！我只是还没有尝试这样做。

但是，如果您练习几次，手动调高和调低 iTunes 或浏览器的音量也许并不难。调高或调低音量的好处是不像停止和重新启动音乐应用程序那样具有破坏性。所以，调低应用程序中的音量（不是主计算机音量！），将鼠标悬停在 Java 按钮应用程序上并单击它，等待声音结束并重新调高音乐应用程序的音量。不理想，但它可以产生所需的声音。

另一个想法，可能不是控制音乐应用程序，而是有一种方法可以在播放应用程序之前通过 Java 路由应用程序的输出。在这种情况下，可以编写一个按钮来处理整个序列。我将 TargetDataLine 视为用于处理声音流输入的主要工具，但不知道您如何识别适当的混音器线路或端口。这可能需要根据您的设置和操作系统以及声卡或音响系统进行定制。

有趣的想法！另一种语言也可能适用于此，例如，带有 HTML5 的单独的小浏览器窗口和用于启动声音效果的按钮。

# iphone - 为什么我收到“未找到预期的 getter 方法”？

> ID：14784460
> 
> 赞同：0
> 
> 时间：2013-02-09T02:54:34.230
> 
> 标签：iphone, macos, xcode4.5

我正在开发一个 iphone 数据库应用程序，我得到“未找到预期的 getter 方法”。我不明白为什么我会收到这条消息。我尝试了各种故障排除。它在这行代码中：

```
NSString *inserStmt = [NSString stringWithFormat:@"INSERT INTO PERSONS(NAME,AGE)  values   ('%s' '%d')",[self.Namefield.text UTF8String],[self.ageField.text intValue]]; 
```

这是代码：

```
#import "ViewController.h"

@interface ViewController ()
{
    NSMutableArray *arrayOfPerson;
    sqlite3 *personDB;
    NSString *dbPathString;
}
@end

@implementation ViewController

- (void)viewDidLoad 
{
    [super viewDidLoad];
    arrayOfPerson = [[NSMutableArray alloc]init];
    [[self myTableView]setDelegate:self];
    [[self myTableView]setDataSource:self];
    [self createOrOpenDB]; 
}

-(void)createOrOpenDB
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,      NSUserDomainMask, YES);
    NSString *docPath = [path objectAtIndex:0];

    dbPathString = [docPath stringByAppendingPathComponent:@"persons.db"];

    char *error;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    if (![fileManager fileExistsAtPath:dbPathString]) {
        const char *dbPath = [dbPathString UTF8String];

        if (sqlite3_open(dbPath, &personDB)==SQLITE_OK) {
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS PERSONS (ID INTEGER PRIMARY   KEY AUTOINCREMENT, NAME TEXT, AGE INTEGER)";
            sqlite3_exec(personDB, sql_stmt, NULL, NULL, &error);
            sqlite3_close(personDB);
        }
    }
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrayOfPerson count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc ]initWithStyle:UITableViewCellStyleSubtitle  reuseIdentifier:CellIdentifier];

    }

    Person *aPerson = [arrayOfPerson objectAtIndex:indexPath.row];
    cell.textLabel.text = aPerson.name;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%d", aPerson.age];

    return cell;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)AddPersonButton:(id)sender {

    if (sqlite3_open([dbPathString UTF8String], &personDB)==SQLITE_OK) {
        NSString *inserStmt = [NSString stringWithFormat:@"INSERT INTO PERSONS(NAME,AGE)  values ('%s' '%d')",[self.Namefield.text UTF8String],[self.ageField.text intValue]];
    }
}

- (IBAction)DisplayPersonButton:(id)sender {
}

- (IBAction)deletePersonButton:(id)sender {
}
@end 
```

有人能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:41:58.130

这个错误告诉你，你必须需要getter方法，即我们必须为我们的属性编写getter，如果我们合成它们，那么ios内部会为我们实现getter方法。这就是为什么你必须综合你的属性。

```
@implementation ViewController
@Synthesize NameField,ageField;//property synthesized
// remaining code
@end 
```

# sql - 使用 SQL 从 ERD 创建表和关系

> ID：14784461
> 
> 赞同：0
> 
> 时间：2013-02-09T02:54:55.477
> 
> 标签：sql, erd

我正在为班级做作业，我必须参加 ERD 并创建 SQL 语句来捕获关系。我在问我创建的 SQL 语句是否捕获了这些关系。特别是，我认为“依赖”是一个弱实体，我不知道如何捕捉这种关系。

ERD：http: [//imgur.com/mMLsMgS](https://imgur.com/mMLsMgS)

![ERD](../Images/bf60f294ecb2f1e1ce380d1614f7354e.png)

这是我的 SQL 语句：

```
CREATE TABLE Employees (
    ssn INTEGER, salary REAL, phone VARCHAR(24), PRIMARY KEY (ssn))

CREATE TABLE Departments (
    dno INTEGER, dname VARCHAR(150), budget REAL, PRIMARY KEY (dno), 
    managerid INTEGER, FOREIGN KEY (managerid) REFERENCES Employees (ssn))

CREATE TABLE Works_in (
    eid INTEGER, did INTEGER, PRIMARY KEY (ssn, did), FOREIGN KEY (ssn) 
    REFERENCES  Employees(eid), FOREIGN KEY (did) REFERENCES Dept (did))

CREATE TABLE Child (
    parentssn INTEGER, name VARCHAR(50), age INTEGER, FOREIGN KEY (parentssn)   REFERENCES Employees (ssn)) 
```

如果发布家庭作业问题是不可接受的，请随时删除。

我感谢任何和所有的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:07:35.893

你做了一个很好的尝试。Works_In 是关系而不是表。所以每个员工都会有一个引用部门表的部门ID。

```
CREATE TABLE Employees (
    ssn INTEGER, salary REAL, phone VARCHAR(24),deptno INTEGER, PRIMARY KEY (ssn),
FOREIGN KEY (parentdept) REFERENCES Departments(dno))

CREATE TABLE Departments (
    dno INTEGER, dname VARCHAR(150), budget REAL, PRIMARY KEY (dno), 
    managerid INTEGER, FOREIGN KEY (managerid) REFERENCES Employees (ssn))

CREATE TABLE Child (
    parentssn INTEGER, name VARCHAR(50), age INTEGER, FOREIGN KEY (parentssn)   
REFERENCES Employees (ssn)) 
```

# mysql - “表不存在”问题

> ID：14784467
> 
> 赞同：1
> 
> 时间：2013-02-09T02:57:36.107
> 
> 标签：mysql

我一直在尝试为我的网站安装 PHP 脚本，设置所有内容，通过脚本附带的 phpMyAdmin 导入 SQL 文件，但我面临一个空白页面，错误如下所示：

> 文件 /home/user/public_html/user/include/functions_common.php
> 
> 511线
> 
> Sql select a.* ,a.ratingm 作为投票，format(ifnull(((a.ratingp*100)/ (a.ratingm*5))/10,0),1) 作为评分，format(ifnull((( a.ratingp*100)/ ( ratingm*5))/20,0),1) 作为电影 a 的评分，其中 features=1 order by id desc limit 9
> 
> 错误表“user.movi​​es”不存在

奇怪的是，脚本在 SQL 导入文件中没有附带此表，但是有没有办法解决这个问题？有没有办法以某种方式创建表以使其正常工作？我被困住了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:15:22.427

您可以使用创建一个虚拟表，

```
CREATE TABLE MOVIES
(`ID` int, `RATINGM` int, `RATINGP` int, `FEATURED` int, `VIEWS` int); 
```

# python - 装饰类——装饰一次就忘了吗？

> ID：14784474
> 
> 赞同：1
> 
> 时间：2013-02-09T02:58:40.537
> 
> 标签：python, decorator, interpreter

我成功地创建了一个装饰器来装饰任何类型的类，为它们添加一个标准接口，以便于访问、集成等......

我一直拒绝使用元类，因为关于这一点的文献说它是一种矫枉过正，而且大多数时候可以用类装饰器来代替。困扰我的是以下几点：

```
def Decorator(somearg):

    def wrapper(cls):
        clsinit = cls.__init__
        cls.members = []

        def __init__(self, *args, **kwargs):
            #do something with somearg...
            self.__class__.members.append(self)
            clsinit(self,*args,**kwargs)

        cls.__init__ = clsinit
        return cls

    return wrapper

@Decorator('thearg')
class A(object):
    pass

a = A()
b = A() 
```

使用 python 调试器，在导入时，类 A 立即用参数 'thearg' 修饰。但是每次我实例化 A() 时，实例都会直接调用装饰器中定义的 init，而不会经过前面的层。这很棒，因为我希望我的班级记录每个成员，而不是在每次实例化新实例时都重置。但我不确定我明白为什么。

有人可以在这种特定情况下解释 python 解释器的物理特性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:01:05.560

如果您只是更改类而不创建新类，则不需要包装函数（应该是包装类）：

```
def Decorator(cls):
    clsinit = cls.__init__
    cls.members = []

    def __init__(self, *args, **kwargs):
        clsinit(self, *args, **kwargs)
        self.__class__.members.append(self)

    cls.__init__ = __init__
    return cls 
```

顺便说一句，您应该只创建一个基类并从中继承：

```
class Base(object):
    members = []
    def __init__(self):
        self.__class__.members.append(self)

class A(Base):
    pass 
```

更清洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:33:40.453

好的，参考更新问题中的更正代码，您会问：

> “但每次我实例化 A() 时，实例都会直接调用装饰器中定义的 init，而不会通过前面的层。”

这样做是因为当`wrapper()`函数创建的类装饰器函数`Decorator()`应用于 时，它会用自己的动态定义函数`class A`替换`A`'s 。每当实例化 s时都会调用*该*函数，并且首先编写它做一些事情，然后在最后调用原始函数。`__init__()``wrapper.__init__()`*`A``A.__init__()`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:02:39.373

感谢@JBernardo 和@martineau 的回答。我使用此代码的目标是实现类对象的类似容器的行为，以便更轻松地访问它们的实例。但是我想一次访问一个与每个类相关的实例，而不是所有在同一个继承类中的实例。

实际上再次处理代码帮助我理解了我的问题：

a)装饰器被调用，其参数为 somearg

b) 下一行的内容（A 类的定义）用作包装函数的参数。在这个函数内部我： 1）记住初始类 init 以避免无限递归 2）定义一个新的 init 以在实例级别进行更改 3）为类绑定一个新的 init 方法 4）返回一个转换的类对象

c) 因为返回的是一个类对象，所以每次我实例化一个实例时，我都会直接进入 init，因为这是它在新类中的绑定方式。*

# flash - 从另一个 SWF 文件访问 SWF 文件中的变量

> ID：14784476
> 
> 赞同：0
> 
> 时间：2013-02-09T02:58:42.267
> 
> 标签：flash, variables

好的，我是 ActionScript 菜鸟。我可以做“点击这里去那里”之类的东西，所有的时间线脚本。

然后我把这个项目扔在我的腿上（因为我是“Flash Guy”），虽然我读过很多有意义的东西，但我需要有人告诉我在哪里编码。我保证一旦这一切结束我会回去学习真正的 AS3，我有书和一个很好的教程。

这是任务。我有一个 SWF 文件（我们将其称为 parent.swf），它要求用户在文本字段 (hospNameInput) 中输入名称，并将其保存到变量 (hName) 中。

```
var hName:String;

hospNameInput.addEventListener(Event.CHANGE, inputCapture1);
function inputCapture1(evt:Event):void
{
hName = hospNameInput.text;
} 
```

我需要在另一个 SWF（child.swf，由 parent.swf 加载）中使用字符串变量“hName”，以便将名称文本添加到文件的许多帧上的文本框中。它本质上是一个美化的幻灯片，在框架上具有一些交互性，他们希望能够为他们正在展示的人个性化它。

我在 child.swf 中有文本框，我想用 parent.swf 中的变量“hName”中的文本填充，例如：

```
var frameHeader:String = "01 " + hName + " Today";
frameHeader1.text = frameHeader;
chartLabel.text = hName + " Analysis"; 
```

就像我说的，我只是一个懦弱的时间线编码员。有人可以给我相当明确的说明，说明在每个 SWF 中放入什么以使其正常工作吗？

我保证会阅读书籍并学会正确执行此操作，外部 .as 文件等等！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:40:27.377

尝试通过 Loader 对象的 content 属性访问该变量。content 属性应该直接引用加载的 swf 的时间线。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6#content](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6#content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:13:29.550

对于仍然遇到此问题的任何人，您可以尝试以下步骤...

*   您必须使用代码创建文本框。首先将输入框添加到stage
*   加载外部 SWF 并将其视为 MovieClip 对象。
*   将文本框（带有保存的输入）添加到 MovieClip（加载的 SWF）。

下面有一些示例代码可以尝试。它添加了一个输入框，当用户单击“加载 SWF”按钮时，它会加载外部 SWF，然后添加带有输入文本副本的文本框。要制作“加载 SWF”按钮，只需创建一个像红色正方形这样的简单图形，转换为 movieClip 并为其命名为“btn_load_SWF”。（代码仍将使它像按钮一样工作）。此外，在通过代码创建文本框时，您可能需要记录您希望它们出现的 X 和 Y 位置。使用信息工具 (CTRL+I) 获取舞台上鼠标/对象位置的提示。无论如何，所有代码都在一帧中..

```
//-- For later referencing of Child.swf as though it's MovieClip on stage named   "my_Child_Swf"
var my_Child_Swf:MovieClip;

//-- create User Input textbox
var input_txt:TextField = new TextField();
input_txt.type = "input";
input_txt.border = true;
input_txt.x = 50;
input_txt.y = 100;

//-- create string to hold User Input for passing onto a Child.swf textbox
var saved_text:String;

//-- create Name textbox for Child.swf (later will contain text of "saved_text") 
var name_txt:TextField = new TextField();
name_txt.type = "dynamic";
//name_txt.border = true;
name_txt.x = 10;
name_txt.y = 10;
name_txt.width = 50;

//-- Now add User Input box to screen 
stage.addChild(input_txt);

//-- load SWF
var swf_loader:Loader = new Loader(); 

//add loader object to stage BEFORE you do anything with external SWF..
stage.addChild(swf_loader);
btn_load_SWF.buttonMode = true;
btn_load_SWF.addEventListener(MouseEvent.CLICK, load_Child_SWF); 

//Button control function
function load_Child_SWF (event:MouseEvent) : void 
{ 
  saved_text = input_txt.text; //capture text as we begin load of Child SWF
  trace("input_txt is..." + saved_text); //trace is for testing/confirmation

  swf_loader.load ( new URLRequest ("Child.swf") );
  swf_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, Child_SWF_ready);
}  

function Child_SWF_ready (evt:Event) : void
{
  swf_loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, Child_SWF_ready); 
  swf_loader.x = stage.stageWidth / 2; 
  swf_loader.y = 200;

  //Treat the Loader contents (Child.swf) as a MovieClip named "my_Child_Swf"
  my_Child_Swf = swf_loader.content as MovieClip; 

  //Position of text when adding to Child SWF 
  //note: Its top-left corner is new X & Y point set to 0   
  name_txt.x = 10; //10 pixels from 0 point of Child SWF
  name_txt.y = 10;

  updateText(); //do instructions inside function "updateText"
  my_Child_Swf.addChild(name_txt); //add (updated) name text to Child SWF 

}

function updateText() : void
{
  name_txt.text = saved_text; //apply the saved_input String here
} 
```

这应该足以让你开始。其他需要研究的是如何通过代码设置和嵌入字体、设置文本大小和颜色等。对于记录在时间轴上进行任何编码并不是最好的工作方式。我将所有代码放在一个地方，即 .as 文件。我无法预测当您切换到另一个框架和代码集时会发生什么。话虽如此，这是从时间线和工作中测试的。谢谢， VC：一个

# php - php中的控制器类

> ID：14784477
> 
> 赞同：0
> 
> 时间：2013-02-09T02:58:51.253
> 
> 标签：php, http-referer

我是 php 编程的新手，我想问一个问题：

所以我有3个php表单：

*   插入workerform.php
*   插入工具表格.php
*   insertorderform.php

在这些文件中，我使用`<form action=class.controller.php>`了将用于控制这些文件的标签，所以我需要知道请求来自哪个文件，这可能吗？然后当我知道哪个文件使用控制器类时，我将从对应于这 3 个文件请求的另一个类调用该方法，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:22:33.487

Matthew Brown 是对的，这是另一种方法，仅用于学习目的。

**形式：**

```
<!-- pass variable 'from' to the controller -->
<form action='class.controller.php?from=insertworkerform'> 
```

**类.controller.php**

```
<?php
    // example, if you want to store in database remember SQL Injection
    $from = isset($_GET['from'])?
        $_GET['from'] :
        'I dont know which form called me';

    // You can do what you want with the var $from
    // like this
    switch($from) {
        case 'insertworkerform':
            // bla bla
            break;
        case 'another_form':
            // bl bla
            break;
        default:
            // I dont know which form called me
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:10:24.800

如果我理解正确，您在三个单独的文件中有 3 个表格？您有一个控制器用于所有三个，所以您想知道如何传递发送它的文件？

尝试：

```
 <input type="hidden" value="NAME OF FILE"> 
```

将值替换为文档名称。

# html - 来自 Dreamweaver 的网页上令人讨厌的横幅

> ID：14784478
> 
> 赞同：0
> 
> 时间：2013-02-09T02:58:56.117
> 
> 标签：html, css, dreamweaver-templates

我使用 Dreamweaver 从我从 timothy 框架中获得的模板创建了一个网站，可以在此处 查看该网站[http://www.manchestertemplate.info/](http://www.manchestertemplate.info/)如果您注意到在网页的最顶部有一条橙色的细条或横幅不是背景图像的一部分。它在那个网站上看起来不错，但是如果您尝试更改墙纸，它可能看起来不太好。我真的想摆脱它，但我似乎无法在任何地方找到它的代码，它是在 HTML 中还是在css 样式表。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:03:00.237

id 为“wrapper”的 div 的边框顶部为“10px #BF6000 solid”。这是你的罪魁祸首。

快速解决此类问题的一个好方法是使用 Google chrome 的“检查元素”功能（或 Firefox 的等效功能）。它非常强大，可以为您节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:04:54.410

在您的文件中，元素`CSS`上有一个边框：`#wrapper`

```
border-top:10px #BF6000 solid; 
```

删除它，它应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:08:44.460

打开`styles.css`文件并查找`#wrapper`元素。

为了删除烦人的横幅，请删除以下规则： `border-top:10px #BF6000 solid;`

如果您仍然想让页面的主要部分从顶部向下推一点以便您可以看到背景，请在同一元素内更改以下规则：`margin:0 auto;`改为：`margin:10px auto 0 auto;`

此更改会将 #wrapper 元素从页面顶部向下推 10 个像素，因此它看起来与现在完全一样，但是当您更改背景时，横幅会相应更改。

# c - 我可以在 C 中将 GCC 的 __builtin_expect() 与三元运算符一起使用吗

> ID：14784481
> 
> 赞同：11
> 
> 时间：2013-02-09T02:59:53.080
> 
> 标签：c, gcc, ternary-operator, branch-prediction

[GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)仅显示了将__builtin_expect() 放置在“if”语句的整个条件周围的示例。

我还注意到，如果我使用 GCC，它不会抱怨，例如，与三元运算符一起使用，或在任何任意整数表达式中，即使是未在分支上下文中使用的表达式。

所以，我想知道它使用的潜在限制实际上是什么。

在像这样的三元运算中使用时它是否会保留其效果：

```
int foo(int i)
{
  return __builtin_expect(i == 7, 1) ? 100 : 200;
} 
```

那么这个案例呢：

```
int foo(int i)
{
  return __builtin_expect(i, 7) == 7 ? 100 : 200;
} 
```

和这个：

```
int foo(int i)
{
  int j = __builtin_expect(i, 7);
  return j == 7 ? 100 : 200;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T05:57:06.950

它显然适用于三元和常规 if 语句。

首先，让我们看一下以下三个代码示例，其中两个同时使用`__builtin_expect`正则 if 和三元 if 样式，第三个根本不使用它。

内置.c：

```
int main()
{
    char c = getchar();
    const char *printVal;
    if (__builtin_expect(c == 'c', 1))
    {
        printVal = "Took expected branch!\n";
    }
    else
    {
        printVal = "Boo!\n";
    }

    printf(printVal);
} 
```

三元.c：

```
int main()
{
    char c = getchar();
    const char *printVal = __builtin_expect(c == 'c', 1) 
        ? "Took expected branch!\n"
        : "Boo!\n";

    printf(printVal);
} 
```

nobuiltin.c：

```
int main()
{
    char c = getchar();
    const char *printVal;
    if (c == 'c')
    {
        printVal = "Took expected branch!\n";
    }
    else
    {
        printVal = "Boo!\n";
    }

    printf(printVal);
} 
```

使用 编译时`-O3`，所有三个都会生成相同的程序集。但是，如果`-O`省略 （在 GCC 4.7.2 上），则 ternary.c 和 builtin.c 都具有相同的程序集列表（重要的地方）：

内置.s：

```
 .file   "builtin.c"
    .section    .rodata
.LC0:
    .string "Took expected branch!\n"
.LC1:
    .string "Boo!\n"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    subl    $32, %esp
    call    getchar
    movb    %al, 27(%esp)
    cmpb    $99, 27(%esp)
    sete    %al
    movzbl  %al, %eax
    testl   %eax, %eax
    je  .L2
    movl    $.LC0, 28(%esp)
    jmp .L3
.L2:
    movl    $.LC1, 28(%esp)
.L3:
    movl    28(%esp), %eax
    movl    %eax, (%esp)
    call    printf
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.7.2-4) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

三元：

```
 .file   "ternary.c"
    .section    .rodata
.LC0:
    .string "Took expected branch!\n"
.LC1:
    .string "Boo!\n"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    subl    $32, %esp
    call    getchar
    movb    %al, 31(%esp)
    cmpb    $99, 31(%esp)
    sete    %al
    movzbl  %al, %eax
    testl   %eax, %eax
    je  .L2
    movl    $.LC0, %eax
    jmp .L3
.L2:
    movl    $.LC1, %eax
.L3:
    movl    %eax, 24(%esp)
    movl    24(%esp), %eax
    movl    %eax, (%esp)
    call    printf
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.7.2-4) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

而 nobuiltin.c 没有：

```
 .file   "nobuiltin.c"
    .section    .rodata
.LC0:
    .string "Took expected branch!\n"
.LC1:
    .string "Boo!\n"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    subl    $32, %esp
    call    getchar
    movb    %al, 27(%esp)
    cmpb    $99, 27(%esp)
    jne .L2
    movl    $.LC0, 28(%esp)
    jmp .L3
.L2:
    movl    $.LC1, 28(%esp)
.L3:
    movl    28(%esp), %eax
    movl    %eax, (%esp)
    call    printf
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.7.2-4) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

相关部分：

![差异](../Images/11718d15bed13264180cfcee038a7439.png)

基本上，`__builtin_expect`导致额外代码（`sete %al`...）在`je .L2`基于`testl %eax, %eax`CPU 更有可能预测为 1 的结果（此处为天真假设）之前执行，而不是基于输入 char 与`'c'`. 而在 nobuiltin.c 的情况下，不存在这样的代码，并且`je`/`jne`直接跟在与 'c' ( `cmp $99`) 的比较之后。请记住，分支预测主要在 CPU 中完成，这里 GCC 只是“设置陷阱”让 CPU 分支预测器假设将采用哪条路径（通过额外的代码和 and 的切换`je`，`jne`尽管我没有来源，因为英特尔的[官方优化手册](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf)没有提到用`je`vs处理第一次遇到`jne`分支预测不同！我只能假设 GCC 团队是通过反复试验得出的）。

我确信有更好的测试用例可以更直接地看到 GCC 的分支预测（而不是观察对 CPU 的提示），尽管我不知道如何简洁/简洁地模拟这种情况。（猜想：它可能会在编译期间涉及循环展开。）

# c - 非函数调用错误

> ID：14784483
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:00:49.810
> 
> 标签：c, file-io

你好朋友，我是 C 语言的新手，我的程序出现错误（在 turbo c 编译器中）

```
#include<stdio.h>
#include<conio.h>

void main()
{
    FILE *fopen().*p;//error call of nonfunction
    char name[10];

    p=fopen("rec.dat","r");
    printf("enter your name:");
    scanf("%s",name);
    fprintf("p,"my name is %s",name);
    fclose(p);
    getch();
} 
```

如果有人看到我的问题并给出一些解决方案，我会很高兴..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:07:06.450

您发布的代码很可能与您编译的代码不同。您应该已经收到了许多您没有提及的语法错误消息。查找不匹配的引号。

您的线路：

```
FILE *fopen().*p; 
```

可能是为了：

```
FILE *fopen(),*p; 
```

这将声明`fopen()`function 和`FILE*`object `p`。但是完全没有必要声明`fopen`自己；这就是它的`#include <stdio.h>`用途。所以只需将其更改为

```
FILE *p; 
```

当您这样做时，请更改`void main()`为`int main(void)`，并删除任何告诉您`void main()`正确的书。

而且`scanf("%s",name);`是不安全的。它会将尽可能多的以空格分隔的字符序列读入`name`. 问题是，你还没有告诉它有`scanf`多大`name`。如果我输入 20 个字符，`scanf`将写在`name`. 欢闹会接踵而至。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:04:54.720

错误行应该是这样的：

```
FILE *p = fopen("rec.dat", "r");
// remove the subsequent call of fopen below 
```

要不就

```
FILE *p;
// Keep the fopen call below 
```

# python - 数组名称未在 python NameError 中定义

> ID：14784484
> 
> 赞同：0
> 
> 时间：2013-02-09T03:01:07.760
> 
> 标签：python

我是python的初学者，开始学习基础知识。我在 python 中有一个示例程序

```
#Simple Program Python
tf=float(input("Enter total time of run in seconds "))
delt = float(input("Enter the time step of run "))
dx = float(input("Enter the value of dx "))
xf = float(input("Enter the total length of a channel "))
n =float(tf/delt)
#t =range[n]

from array import array

m = xf/dx
for i in range(0,int(n)) :
    t[i]=i*tf/n

print("THe total time of run is %r " %tf)
print("seconds")
print("The time step is %r" %delt)
print("Number of steps is %r" %n)
print("The number of space step in X direction is %r " %m) 
```

在 for 循环中，当我尝试评估 t[i] 时，它会引发错误“NameError：未定义名称't'”。在一些stackoverflow问题中，有建议使用

```
from array import array 
```

但我仍然得到一个错误。我从 NameError 尝试了该解决方案[： name 'array' is not defined in python](https://stackoverflow.com/questions/7098938/nameerror-name-array-is-not-defined-in-python)。请帮助摆脱这个错误。

谢谢。

贾巴巴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:02:05.367

您必须先创建`t`，然后才能对其进行索引，试试这个：

```
m = xf/dx
t = []
for i in range(0,int(n)) :
    t.append(i*tf/n) 
```

你也可以把`from array import array`线拿出来。您正在制作和使用列表而不是数组。如果你只是在学习 python，你可能不需要数组和列表就可以了。

实际上，你甚至可以用这个替换整个 for 循环：

```
m = xf/dx
t = [i*tf/n for i in range(int(n))] 
```

这个版本使用列表推导来完成同样的事情。它几乎可以肯定更快并且（在我看来）更容易理解。

# ruby-on-rails - 在 Rails 3 中实现 MongoDB 记录器

> ID：14784486
> 
> 赞同：0
> 
> 时间：2013-02-09T03:01:38.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, logging

我在 Rails 3.2.11 上

我想将我的应用程序的日志条目放入 MongoDB 集合中，因为我有一个多租户应用程序，并且想按帐户、时间范围、标签等过滤条目。

实现这样的事情的最简单方法是什么？我想我会使用 Moped 或 Mongoid 来保存数据。

编辑：

[mbasset 的central_logger](https://github.com/mbasset/central_logger)版本可以与最新的Rails 一起使用，并且只需要几周时间就可以使用我自己的系统。会在某个时候把这些写下来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:08:13.017

[GitHub 上](https://github.com/customink/central_logger)有一个相当不错的实现，但目前正在失败。可能是由于最近几次小的 Rails 更新缺乏维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T15:57:59.593

您可以尝试使用[http://mongodb-logger.catware.org](http://mongodb-logger.catware.org)它支持 Rails 3+ 和 Rack 应用程序。

# algorithm - 计算两个序列之间相似性的复杂性

> ID：14784487
> 
> 赞同：3
> 
> 时间：2013-02-09T03:01:43.423
> 
> 标签：algorithm, complexity-theory, bioinformatics, dna-sequence

用于计算两个序列之间相似性的最著名算法的计算复杂度是多少（如在 DNA 或蛋白质比对/近似字符串匹配中）？

相似性基于：

1.  [使用替换评分矩阵](http://en.wikipedia.org/wiki/Substitution_matrix)对对齐进行评分（用于[蛋白质字母表](http://en.wikipedia.org/wiki/Amino_acid#Table_of_standard_amino_acid_abbreviations_and_properties)中 20 个符号或 DNA 字母表中 4 个符号的全局或特定位置替换）

2.  [差距罚球](http://en.wikipedia.org/wiki/Gap_penalty)

[Bowtie](http://bowtie-bio.sourceforge.net/index.shtml)和[BWA](http://bio-bwa.sourceforge.net/)短读对齐器中使用的[Burrows-Wheeler 变换](http://en.wikipedia.org/wiki/Burrows%E2%80%93Wheeler_transform)的线性时间是实际最先进的，还是有解决相同问题的亚线性算法？

[编辑]：考虑应用[LSH](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)进行近似匹配，假设参考数据集的预处理/索引将是次线性的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:14:12.910

我想在某些时候你最终会阅读整个序列，所以不可能有一个亚线性时间算法。

# boolean - 逻辑函数的卡诺图

> ID：14784490
> 
> 赞同：2
> 
> 时间：2013-02-09T03:02:14.307
> 
> 标签：boolean, logic, computer-science, truthtable, karnaugh-map

我有以下布尔函数：*F=(a1+b1)(a2+b2)*并试图为它构建一个 K-map。这是我到目前为止所拥有的：![在此处输入图像描述](../Images/ddebafc143af21915bb8f2d45d658178.png)

我对 K-maps 比较陌生，所以我并不完全相信这是正确的。有人可以帮我仔细检查一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:09:08.563

在卡诺图中盘旋时，您始终必须在每个方向上制作 2^n 大小的圆圈（1x1、2x1、4x1、2x2、4x4、...，但绝不是 1x3、3x3、5x3）。

在您的示例中，您需要 4 个 2x2 的圆圈。

# php - 无法修改标头信息 - 标头已发送简单的解决方案

> ID：14784497
> 
> 赞同：-3
> 
> 时间：2013-02-09T03:03:06.173
> 
> 标签：php, header

嘿伙计们，我只是想分享我发现的错误解决方案：无法修改标头信息 - 标头已发送。

假设从包含如下标题的代码开始：

```
<?php
header('Content-disposition: attachment; filename="video"');
header('Content-type: video/mp4');
$video = $_POST['$video'] ;
readfile("$video");
?> 
```

出于某种原因，PHP 不喜欢这样。要查看如何在下面修复此视图答案。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-09T03:03:06.173

要修复这种类型的错误，您可以在代码`<? ob_start(); ?>`之前添加并在代码末尾添加？> 像这样：`<?php``<? ob_flush(); ?>`

```
<? ob_start(); ?>
<?php
header('Content-disposition: attachment; filename="video"');
header('Content-type: video/mp4');
$video = $_POST['$video'] ;
readfile("$video");
?>
<? ob_flush(); ?> 
```

希望这可以帮助。这是我找到的一个简单的解决方案，它对我和我认识的其他一些人都很有效。

# java - 微调器选择后的其他操作

> ID：14784503
> 
> 赞同：0
> 
> 时间：2013-02-09T03:04:16.347
> 
> 标签：java, android, spinner

我的代码类似于以下内容：

```
package com.javasamples;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class ArrayAdapterDemo2 extends Activity implements
        AdapterView.OnItemSelectedListener {
    TextView selection;
    String[] items = { "this", "is", "a", "really", 
            "really2", "really3",
            "really4", "really5", "silly", "list" };

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        selection = (TextView) findViewById(R.id.selection);

        Spinner spin = (Spinner) findViewById(R.id.spinner);
        spin.setOnItemSelectedListener(this);

        ArrayAdapter aa = new ArrayAdapter(
                this,
                android.R.layout.simple_spinner_item, 
                items);

        aa.setDropDownViewResource(
           android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(aa);
    }

    public void onItemSelected(AdapterView<?> parent, View v, int position,
            long id) {
        selection.setText(items[position]);
    }

    public void onNothingSelected(AdapterView<?> parent) {
        selection.setText("");
    }
}//class 
```

在从微调器列表中选择后，我需要在哪个地方实现一些东西，例如，我的程序将更改背景图片。我一直在寻找类似 setOnClickListener 的东西，但实际上没有它它也能工作，在这种情况下，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:10:15.797

与微调器的 onClickListener 等效的是 onItemSelectedListener。它的工作方式与 onClickListener 基本相同——您通过调用 spinner.setOnItemSelectedListener 来设置它，并且您将根据需要将意图加载到其中。

# linux-kernel - 具有相同堆栈指针的两个进程。为什么？

> ID：14784507
> 
> 赞同：0
> 
> 时间：2013-02-09T03:05:17.073
> 
> 标签：linux-kernel, computer-architecture

使用以下代码打印 ESP 寄存器：

```
#include <stdio.h>
#include <stdlib.h>

unsigned long get_sp() {
    __asm__("movl %esp, %eax");
}

int main() {
    sleep(5);
    printf("Stack pointer (ESP): 0x%x\n", get_sp());
    return 0;
} 
```

禁用 ASLR

```
echo "0" > /proc/sys/kernel/randomize_va_space 
```

建造：

```
gcc get_sp.c -o get_sp 
```

运行两个进程：

```
./get_sp & ./get_sp 
```

我得到：

```
Stack pointer (ESP): 0xbffff158
Stack pointer (ESP): 0xbffff158 
```

我期待不同的地址。任何人都可以对此有所了解吗？是因为这些是虚拟内存地址，并且 Linux 在后台跟踪每个进程的内存并正确映射到主内存吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:08:27.847

> 是因为这些是虚拟内存地址，并且 Linux 在后台跟踪每个进程的内存并正确映射到主内存吗？

是的。

# java - 使用java正则表达式匹配文本中的值

> ID：14784512
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:06:04.720
> 
> 标签：java, regex

我需要使用此文本中的 java regex 匹配此值“wJJNfeRPLC”：

*"et le mot de passe suivants :

nom d'utilisateur : 信息

主题：**wJJNfeRPLC**

Vous pouvez aussi vous connecter en cliquant sur ce lien ou le copier-coller
dans votre navigateur"*

我试过了，但我不是正则表达式专家

```
Pattern pattern = Pattern.compile(^mot de passe(.*)); 
```

跟随 Cyrille Karmann 的回答

```
 String text = (String)message[1].getContent();
    Pattern pattern = Pattern.compile("(?<=mot de passe : )(\\w+)$", Pattern.MULTILINE);

    Matcher matcher = pattern.matcher(text); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:38:25.383

好的。你想要的是一个以字符串“mot de passe :”开头的字符串，并以行尾结尾。

因此正则表达式应该是这样的：

```
(?<=mot de passe : )(\w+)$ 
```

它使用*积极*的后视（开头带有有趣的部分`?<=`）来检查您捕获的部分（密码）是否以“mot de passe：”开头。

它是这样使用的：

```
String string = "et le mot de passe suivants :\n\n" +
                "nom d'utilisateur : Information\n\n" +
                "mot de passe : wJJNfeRPLC\n\n" +
                "Vous pouvez aussi vous connecter en cliquant sur ce lien ou le copier-coller dans votre navigateur";

Pattern pattern = Pattern.compile("(?<=mot de passe : )(\\w+)$", Pattern.MULTILINE);
Matcher matcher = pattern.matcher(string);
if (matcher.find()) {
  String password = matcher.group();
  System.out.println(password);
} 
```

# android - 没有用户交互的Android FaceDetector？

> ID：14784513
> 
> 赞同：1
> 
> 时间：2013-02-09T03:06:05.247
> 
> 标签：android, face-detection

我想问一个关于 Android FaceDetector.Face 类的问题。我花了合理的时间四处搜索和阅读文档，但仍然看不到大局。我想了解执行以下操作是否可行：

无需用户交互即可执行面部检测的应用程序。例如，我想监控一个蹒跚学步的孩子在另一个房间里玩我的 Kindle Fire。当然我不能要求孩子每 5 秒拍一张自己的照片来启动人脸检测，所以应用程序应该做这些事情：

1）每5秒唤醒一次；
2）拍照；
3）检测人脸；
4）如果未检测到面部，请向我发送警报。

这是我的问题：
A）是否可以使用 Android FaceDetector.Face 类编写我的应用程序？
B）如果可能的话，粗略的步骤是什么？
C）如果不可能，有什么替代方案？

提前感谢您的回答/想法。如果可以提供文档、教程和/或代码示例的链接，那将更有帮助。

[编辑：我根据 Geobits 的回答和评论修改了我的问题。]

# python - 在 AWS 上请求 Spot 实例时，如何附加现有的 EBS 卷？

> ID：14784519
> 
> 赞同：1
> 
> 时间：2013-02-09T03:07:33.343
> 
> 标签：python, amazon-web-services, amazon-ec2, boto

我正在使用boto，代码如下：

```
dev_xvdb = boto.ec2.blockdevicemapping.EBSBlockDeviceType(volume_id='vol-xxxxxx')
bdm = boto.ec2.blockdevicemapping.BlockDeviceMapping()
bdm['/dev/xvdb'] = dev_xvdb

rs = ec2.request_spot_instances(price=MY_MAX_PRICE,
                                image_id='ami-xxxxx',
                                count=1,
                                type='one-time',
                                key_name='MY_KEY_NAME',
                                security_groups=['default'],
                                instance_type='t1.micro',
                                block_device_map=bdm) 
```

此代码可以正常运行，但无法附加 EBS 卷（id=vol-xxxxxx）。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:26:25.630

我认为这里的问题是您无法使用 BlockDeviceMapping 将现有卷附加到实例。BlockDeviceMapping 允许您指定卷大小或快照 ID。如果您指定一个大小，它将创建一个该大小的新空白卷并将其附加到您指定的设备。如果您指定快照 ID，它将从该快照创建一个新卷并附加它。

如果要将现有卷附加到实例，则必须使用`attach_volume`只有在拥有实例 ID 后才能运行的方法。

那么，你可能会问，为什么 boto 的 EBSBlockDeviceType 有一个`volume_id`属性呢？这是因为当我们进行`get_all_instances`调用时，AWS 返回的 BlockDeviceMapping 数据包括`volume_id`当前连接的 EBS 卷。

# c - 在编译 FreeBSD 自定义系统调用时“取消引用指向不完整类型的指针”

> ID：14784525
> 
> 赞同：1
> 
> 时间：2013-02-09T03:08:47.597
> 
> 标签：c, compiler-errors

编译此代码时出现编译错误：

```
#include <sys/param.h> 
#include <sys/system.h>

struct syshello_args 
{
   char *buf;
};

int sys_myhello(p, uap)
struct proc* p; struct syshello_args* uap;
{
   sprintf(uap->buf, "Hello");
   p->p_retval[0]=0;
   return 0;
} 
```

我收到很多错误：

我对C语言一点也不熟悉。我在几个教程中找到了这个例子，但它对我不起作用。谁能帮我修复错误。

谢谢

# model-view-controller - gtk_main 后恢复控制

> ID：14784528
> 
> 赞同：1
> 
> 时间：2013-02-09T03:09:34.467
> 
> 标签：model-view-controller, user-interface, gtk

我正在使用 C 中的 MVC 设计模式创建一个 GUI 应用程序。它是一个连接 4 的游戏。

我希望我的控制器能够将数据发送到 GUI。我在我的 GUI 中有一个方法来绘制起始元素，例如用于选择将检查器放入哪一列的板和按钮。

在此方法结束时，我必须调用 gtk_main() 以使 GUI 显示在屏幕上。我希望能够在视图和控制器类之间发送数据，但是在调用此方法后，控制权不会返回给控制器类。

需要明确的是，main 方法在我的控制器类中，它在我的视图类中调用“setup”方法，gtk_main() 调用位于“setup”方法的末尾。

我该如何解决这个问题？

另外，例如，我认为我有这种方法：

void drop_checker(GtkWidget *widget, cairo_t *cr, gint col, gint row, int r, int g, int b)

使用 GTK 回调很容易调用它，因为我可以访问小部件和 cr 变量，但是我不知道如何从我的控制器类中调用它。

这是应用程序设计方式的错误，还是技术上的误解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:48:49.273

我认为这是一种技术误解，导致您的应用程序设计不正确。对于 GUI 应用程序，您希望主循环始终运行，您的程序流程应该是这样的

```
int main (int argc, char **argv)
{
    <do setup>
    <do UI setup>

    gtk_main ();

    return 0;
} 
```

主循环仅在您调用时退出`gtk_main_quit();`，通常仅在通过窗口控件或菜单​​选项退出游戏时才会退出。游戏中发生的所有其他事情都必须由于主循环中的事件而发生。您可以将回调附加到小部件上的信号，例如 GtkButton 上的“clicked”信号，或者如果您需要独立发生某些事情，您可以使用 g_timeout_add 设置回调以在特定时间调用，或者在主循环空闲时使用 g_idle_add 调用。

（请注意，有时您确实想在第一个循环中运行第二个循环，但这些循环很少而且与您当前的情况无关，通常 GTK+ 会在您不需要了解细节的情况下处理它们）

# build - gnuMake，如何强制虚假目标多次运行？

> ID：14784541
> 
> 赞同：4
> 
> 时间：2013-02-09T03:12:35.490
> 
> 标签：build, makefile, gnu-make

我的构建系统坚持在一次调用中对所有目标执行 make，所以我得到：

`make clean test clean build`

第二次清理只会说“‘清理’没有什么可做的。” 即使它已添加到 .PHONY 目标中。

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T00:21:10.847

我验证了这一点。试试这个：

```
test: ...
    ...

build: ...
    ...

clean%: ...
    ... 
```

然后你可以调用：

```
make clean1 test clean2 build 
```

似乎只要目标名称不同，即使它击中相同的目标模式，它也会重新运行它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T13:58:19.517

呸！不*要这样做*。不要依赖于目标的隐式排序——当你使用`make -j`. 使您的订购*明确*。如果您真的必须在构建之间进行清理，那么类似：

```
.PHONY: everything
everything:
    ${MAKE} clean
    ${MAKE} test
    ${MAKE} clean
    ${MAKE} build 
```

同样，递归 make 很臭，但在这种情况下是您的最佳选择。

# magento - Magento 1.7.0.0 CE FishPig - Ultimate Category Excluder Extension

> ID：14784542
> 
> 赞同：0
> 
> 时间：2013-02-09T03:12:45.670
> 
> 标签：magento, magento-1.7, fishpig

我正在使用 FishPig 的免费 WP 集成插件，并购买了他们的“终极类别排除器”。我已经安装了我可以正确看到的内容，因为我可以看到它可用并且在 Magento 中启用。

然后，我下载了实际的类别排除器 WordPress 插件[http://wordpress.org/extend/plugins/ultimate-category-excluder/](http://wordpress.org/extend/plugins/ultimate-category-excluder/)，安装并设置了我想要排除的类别。FishPig 扩展应该允许这个插件按照我与作者交流的理解工作。

但是，我设置为排除的类别拒绝不排除并显示所有内容。

从我所看到的来看，我已经安装了一切正常的东西。编译和缓存被禁用，因为它目前在开发服务器上，但我编译，清除所有缓存，重新索引所有内容并重新禁用这些东西。

有没有人遇到过这样的问题？我找不到这个扩展的文档，档案没有附带自述文件，什么都没有……我没想到鱼猪会这样，但也许我是盲人，错过了什么……

此致，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T02:15:32.393

今天看了我之前问的问题，发现这个问题已经解决了，但是我没有回答。

无论如何，解决方案是从头开始重新安装 WordPress 并将数据导入安装。客户的网站在不同的服务器上安装了旧的 WP，我导入到与 Magento 相同的服务器。但是，后来意识到 DB AND 文件已被以前的开发人员以某种方式修改，解决此问题的最佳方法是重新安装 WP，将内容和内容从旧数据库复制到新数据库。

最后，安装完类别排除插件后，它就可以与 FishPig 一起使用了。

我得到了 FishPig 的 Ben 的帮助，非常感谢。我会推荐这个扩展（免费）和来自这个作者的任何付费。伟大的支持，伟大的人！

# c - C 中的程序无法正确接收输入的问题

> ID：14784543
> 
> 赞同：2
> 
> 时间：2013-02-09T03:12:54.897
> 
> 标签：c, function

我对此程序的输出有疑问。它没有正确接收输入。我相信这可能与我的用户定义函数有关，它充当 scanf

```
#include <stdio.h>
#include <math.h>
#define PI 3.14

int GetNum(void)
{
    return scanf("%d");
}

int CalculateAreaR(int length, int width)
{   
    return length*width;
}

double CalculateAreaC(int radius)
{
    return PI*radius*radius;
}

int main(void)
{
    int length;
    int width;
    int radius;
    int areaR;
    double areaC;

    printf( " Please enter the length of a rectangle  \n");
    length = GetNum();
    printf(" Please enter the width of a rectangle \n"); 
    width = GetNum();
    printf(" Please enter the radius of a circle \n");
    radius = GetNum();

    areaR = CalculateAreaR(length, width);

    printf("\nThe area of the rectangle is %d\n", areaR);

    printf("\nThe length is %d, the width is, %d and thus the area of the rectangle is %d\n\n", length, width, areaR);

    areaC = CalculateAreaC(radius);

    printf("\nThe area of the circle is %.3f\n", areaC);

    printf("\n\n The radius of the circle is %d and the area of the circle is %.3f\n\n", radius, areaC);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T03:16:08.517

您可以尝试像这样修改您的程序

```
int GetNum(void)
{ 
   int num;
   scanf("%d", &num);

   return num; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T03:16:32.413

`scanf("%d");`需要一个额外的参数。您需要给它一个您希望存储数字的变量的地址。例如`scanf("%d",&length);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T03:33:42.237

主要问题是您的 GetNum 函数根本不返回任何值：

```
int GetNum(void)
{
  scanf("%d");
} 
```

此外，在您致电 scanf 时，您忘记提供存储位置来存储扫描的号码（如果有）。

将其更改为：

```
int GetNum (void) {
  int i;
  scanf ("%d", &i);
return i;
} 
```

应该或多或少地解决你的问题。要检查扫描是否成功，您可能还需要检查 scanf 的返回值 - 它应该返回成功解析的项目数（在您的情况下为 1）。

顺便说一句：使用正确的编译器切换像您这样的错误应该更容易发现。

如果您使用 gcc，开关 -Wall 会给您警告： main.c:12: warning: control reach end of non-void function

# ios - UIButton Touch Up Inside TouchesBegan

> ID：14784544
> 
> 赞同：0
> 
> 时间：2013-02-09T03:12:56.363
> 
> 标签：ios, xcode, uibutton

我在 StoryBoard 上创建 UIButton，并为此 UIbutton 创建 Outlet，然后为 Touch Up Inside 创建一些方法。在标准按钮中有方法又名 TouchesEnded

也许这是愚蠢的问题，我是 Xcode 的新手，但我问如何在 TouchesBegan 上打开这个按钮？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:58:32.177

`IBAction`为您创建`UIButton`并将您的按钮连接到`IBAction`. 因为当您点击按钮时，您的方法就会被调用。

像这样的方法，

```
-(IBAction)butttonTaped:(UIButton *) Sender
{
   // connect to your button
} 
```

# ruby - 无法加载此类文件 -- rails (LoadError)

> ID：14784550
> 
> 赞同：1
> 
> 时间：2013-02-09T03:13:53.487
> 
> 标签：ruby, gem, sinatra, rack, kaminari

我有一个 Sinatra 应用程序。添加后`gem 'kaminari'`，我开始收到错误

```
/var/lib/gems/1.9.1/gems/backports-2.7.1/lib/backports/tools.rb:318:in `require': cannot load such file -- rails (LoadError)
        from /var/lib/gems/1.9.1/gems/backports-2.7.1/lib/backports/tools.rb:318:in `require_with_backports'
        from /var/lib/gems/1.9.1/gems/kaminari-0.11.0/lib/kaminari/railtie.rb:1:in `<top (required)>'
        from /var/lib/gems/1.9.1/gems/backports-2.7.1/lib/backports/tools.rb:318:in `require'
        from /var/lib/gems/1.9.1/gems/backports-2.7.1/lib/backports/tools.rb:318:in `require_with_backports'
        from /var/lib/gems/1.9.1/gems/kaminari-0.11.0/lib/kaminari.rb:2:in `<top (required)>'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
        from /home/alex/Documents/ruby_projects/app_base.rb:3:in `<top (required)>'
        from /home/alex/Documents/ruby_projects/app.rb:1:in `require_relative'
        from /home/alex/Documents/ruby_projects/app.rb:1:in `<top (required)>'
        from /home/alex/Documents/ruby_projects/config.ru:11:in `require'
        from /home/alex/Documents/ruby_projects/config.ru:11:in `block in <main>'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/builder.rb:55:in `instance_eval'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/builder.rb:55:in `initialize'
        from /home/alex/Documents/ruby_projects/config.ru:in `new'
        from /home/alex/Documents/ruby_projects/config.ru:in `<main>'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/builder.rb:49:in `eval'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/builder.rb:49:in `new_from_string'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/builder.rb:40:in `parse_file'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/server.rb:277:in `build_app_and_options_from_config'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/server.rb:199:in `app'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/server.rb:314:in `wrapped_app'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/server.rb:250:in `start'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/lib/rack/server.rb:141:in `start'
        from /var/lib/gems/1.9.1/gems/rack-1.5.1/bin/rackup:4:in `<top (required)>'
        from /usr/local/bin/rackup:23:in `load'
        from /usr/local/bin/rackup:23:in `<main>' 
```

当我尝试通过 ' 启动应用程序`rackup'`时 以前它运作良好。

我该如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:37:10.513

它应该[在 sinatra/padrino 支持](https://github.com/amatsuda/kaminari#sinatrapadrino-support)`gem 'kaminari', :require => 'kaminari/sinatra'`的 kaminari README 部分中解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:25:24.303

实际上在内部需要的`/lib/kaminari/helpers/sinatra_helpers.rb` [文件第 128-129 行是](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/sinatra_helpers.rb)：

```
$stderr.puts "[!]You should install `padrino-helpers' gem if you want to use kaminari's pagination helpers with Sinatra."
$stderr.puts "[!]Kaminari::Helpers::SinatraHelper does nothing now..." 
```

所以我认为你应该安装 padrino-helpers。

# c++ - 与向量相比，C++ STL 队列内存使用情况？

> ID：14784551
> 
> 赞同：6
> 
> 时间：2013-02-09T03:13:59.730
> 
> 标签：c++, memory, stl, queue

我想知道与向量相比，队列使用了多少内存。前几天我遇到了一个问题，我有一个使用大约 60MB 的 int 队列数组，而当将相同的数据放入一个使用大约 4MB 的向量向量中时。这是我在编写程序时的错误还是 stl 队列通常比向量使用更多的内存？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T03:30:47.180

这`std::queue`是一个容器适配器，而不是容器本身。所以让我们比较一些实际容器的开销：

*   `std::vector`非常节省内存，它使用几乎零开销。在大多数平台上， A`std::vector<int>`每个项目使用大约 4 个字节。

*   `std::list`内存效率非常低，它可能会使用每个项目的两个开销指针。A`std::list<int>`在 64 位平台上每个项目使用大约 24 个字节，在 32 位平台上使用 12 个字节。

*   `std::deque`介于两者之间，是`std::queue`. 根据[“内存开销到底是怎么回事`std::deque`”](https://stackoverflow.com/questions/4088999/what-the-heque-is-going-on-with-the-memory-overhead-of-stddeque)`int` ，MSVC deque 是一个块列表，每个块包含大约 16 个字节，如果您的队列每个包含一个或两个并且您有很多，这是相当多的开销的队列。

影响开销的另一个因素是您平台上分配器的效率，除非您可以考虑到它，否则它将为您的结果着色。两个实现之间 15 倍的差异是如此之大，以至于完全令人怀疑——这让我想知道你是如何得到这些数字的。

*一般来说，*如果您的队列很短，那么与其他实现相比还有很大的改进空间。如果您可以编写自己的容器，您可以编写一个循环缓冲区容器或使用[Boost 的`circular_buffer`](http://www.boost.org/doc/libs/1_53_0/libs/circular_buffer/doc/circular_buffer.html). 循环缓冲区结合了双端队列类型操作的内存效率`std::vector`和 CPU 效率`std::deque`。有点让我希望它一开始就在 STL 中。那好吧。

### 脚注

实际开销将随实施而变化。

# php - 为 404 错误设置 .htaccess

> ID：14784554
> 
> 赞同：0
> 
> 时间：2013-02-09T03:14:11.100
> 
> 标签：php, .htaccess

所以，我是.htaccess 的新手。我当前的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /simpleblogsys/profile.php?username=$1 
```

所以我为我正在测试的网站创建了登录和注册。如果我在“simpleblogsys/”之后输入用户名，它会指向该页面。例子：

```
http://localhost/simpleblogsys/TestUser1 
```

问题是，如果我在用户名上加上一个斜杠并随机输入一些东西，就像这样：

```
http://localhost/simpleblogsys/TestUser1/blablabla 
```

它在没有任何脚本或样式表的情况下加载页面。如果找不到该页面，我想设置一个错误 404 文档。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:21:41.837

最有可能找不到脚本和样式表，因为您使用相对路径调用它们...

```
js/whatever.js 
```

您需要使用根目录的路径...

```
/assets/js/whatever.js 
```

对于 404，如果您没有看到有效的用户名，您可以调用：

```
header("HTTP/1.0 404 Not Found"); 
```

# java - Java 应用程序如何在 Mac OS X 中关闭？

> ID：14784556
> 
> 赞同：3
> 
> 时间：2013-02-09T03:14:14.530
> 
> 标签：java, macos, api, memory-leaks

我一直在编写一个在 Mac OS X 中运行的 Java 程序。然而，让我感到困惑的一件事是，我看到[有人说](http://nakkaya.com/2009/04/19/java-osx-integration/)如果用户从菜单栏中退出应用程序，则应用程序无法正常关闭- 它不会正确清理，我必须为它实现一个单独的关闭方法。但是，我还读到 Java for Mac 在 2010 年对其进行了一些重大更改。当我查看[Apple Docs](http://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/Application.html#setQuitStrategy%28com.apple.eawt.QuitStrategy%29)时，似乎默认关闭操作现在正在调用 SYSTEM_EXIT_0。这是否意味着它调用了 System.exit(0)？这能解决清理问题吗？由于对 API 的所有更改以及 Apple 停止控制 Java for Mac 时发生的所有弃用，我有点困惑。

谢谢！

# python - 自动数学方程式生成器未正确显示

> ID：14784557
> 
> 赞同：2
> 
> 时间：2013-02-09T03:14:25.910
> 
> 标签：python, function

我正在尝试编写一个会产生数学问题的程序。每个问题应具有以下格式：

```
<num> <op> <num>  = ? 
```

其中每个 num 代表一个介于 -50 和 50 之间的随机数，并且 op 是从四个基本数学运算符中随机选择的：+、-、/、*。

到目前为止，我有：

```
import random
from operator import add, sub, mul, truediv

def main(): 

    random.seed()

    ops = (add, sub, mul, truediv)
    op = random.choice(ops)

    num1 = random.randint(-50,50)
    num2 = random.randint(-50,50)    

    answer = op(num1, num2)
    answer = round(answer,2)   
    print("Welcome! Here is your practice problem:\n")

    print(num1, op ,num2,"=?\n")
main( 
```

但是当我编译它时，它会返回，例如：

```
-2 <built-in function truediv> -27 =? 
```

而不是：-2 / -27 =？

我怎样才能得到它，所以它显示运算符而不是

```
<built-in function truediv> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:16:21.083

为选定的运算符制作一个字典`opsStr = {add :'+', sub: '-', ...}`并打印其相应的条目。

所以你的打印看起来像：

```
print(num1, opsStr [op] ,num2,"=?\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:18:56.703

试着查一下。

```
op_display = {
   add: '+',
   sub: '-',
   mult: '*',
   truediv: '/',
}
print(num1, op_display[op], num2,"=?\n") 
```

或者，您可以使用`op.__name__`来提供更美观的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:24:49.533

我建议：

```
ops = [(add,'+'), (sub, '-'), (mul, '*'), (truediv, '/')]
op, symbol = random.choice(ops) 
```

然后打印符号。

注意 ops 应该是一个全局常量

# javascript - Ajax 与提交 - 为什么我没有得到相同的响应

> ID：14784558
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:14:31.897
> 
> 标签：javascript, html, ajax, forms, post

我正在使用 Ajax 来提交这个。**所有以box**结尾的变量都是全局的。

**不是完整的代码，请放心 init 等其他部分正在工作。**

```
function begin() {
    if (confirm("Are you sure you want to proceed. This is completely up to you and all consequences go towards you!!"))
    {
        var usernameName = usernameBox.getAttribute("name");
        var passwordName = passwordBox.getAttribute("name");
        var hiddenName = hiddenBox.getAttribute("name");
        var username = usernameBox.value;
        var password = passwordBox.value;
        var hidden = hiddenBox.value;
        if (username !== "" && password !== "")
        {
            var http = new XMLHttpRequest();
            http.open("POST", "<?php echo $url_base, $action?>");
            http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            http.onreadystatechange = function()
            {
                console.log(http.readyState + " " + http.status);
                if (http.readyState == 4 && http.status == 200)
                {
                    alert(http.responseText);
                }
                else
                {
                    alert("We had an error!!!");
                }
            }
            var query = hiddenName + "=" + hidden + "&" + usernameName + "=" + username + "&" + passwordName + "=" + password;
            //var query = usernameName + "=" + username + "&" + passwordName + "=" + password;
            console.log(query);
            http.send(query);
        }
        else
        {
            alert("don't be a fool fill out the info");
        }
    }
    else
    {
        alert("No refunds!!");
    }
} 
```

表格如下。当我使用提交而不是`onclick`然后使用 Ajax 时，此表单完美地工作，任何特定的原因。它可能是表单名称。如果您想知道，我无权访问服务器。

> ```
> <form name="signin_form" action="<?php echo $url_base,$action?>" method="post">
> <input id='hidden' type="hidden" name="loginPage" value="student">
> <label>Username <input id='userid' size="25" name="student_userid" tabindex="0"><br/></label>
> <label> Password<input id='password' type="password" size="25" name="student_password"></br></label>
> <input id='submit' style="COLOR: #6373b5" type="button" value="Sign In" width="100px" onclick="begin();">
> </form> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:21:33.360

我在您的代码中没有看到任何特别错误的地方。表单名称无论如何都不会传递。

您是否检查以确保请求与[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)或[http://www.charlesproxy.com/](http://www.charlesproxy.com/)相同？这些工具会自动在您的计算机上创建本地代理服务器，以在 Web 请求和响应发生时捕获并显示它们。只需启动该工具，然后在浏览器中尝试请求，您就会看到原始请求/响应对。

确保[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)、标头和正文匹配。

[XHR](http://en.wikipedia.org/wiki/XMLHttpRequest)可能正在添加一些额外的标头，并且服务器代码正在根据它们做一些不同的事情。

# mysql - 如何添加 SELECT 语句结果？

> ID：14784559
> 
> 赞同：1
> 
> 时间：2013-02-09T03:14:38.983
> 
> 标签：mysql, sql, sqlite

我有一个运行以下命令的数据库。目的是显示 DATE 等于 02/08/2013 的每一行的 HOURS 字段。然后我想要做的是添加结果并显示为总量。

```
SELECT HOURS FROM RESOURCE WHERE DATE = '02/08/2013'; 
```

当前结果是 20 40 18。我想要的是输出总数 78。

我已经尝试了以下，但这只是计算结果，3。

```
SELECT COUNT(HOURS) FROM RESOURCE WHERE DATE = '02/08/2013' 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:17:20.147

您可以使用，

```
SELECT SUM(HOURS) FROM RESOURCE WHERE DATE = '02/08/2013'; 
```

**[SQL 提琴输出](http://www.sqlfiddle.com/#!2/0ffeb/3/0)**

# android - 本机活动和“无法加载本机库”

> ID：14784563
> 
> 赞同：7
> 
> 时间：2013-02-09T03:15:45.687
> 
> 标签：android, android-ndk, makefile

我正在尝试基于 Android NDK 文件夹中的“native-activity”示例项目构建一个 Android-10 NDK 原生活动。但是，当我打开 Eclipse 并为我的项目选择“运行方式 - > Android 应用程序”时，我的本机活动崩溃并出现以下运行时异常：

> 02-09 03:02:12.599: E/AndroidRuntime(881): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.native_activity/android.app.NativeActivity}: java.lang.IllegalArgumentException: 无法加载本机库：/data/app-lib/com.example.native_activity-1/[库名称].so

但是，我已经确认文件“lib[library name].so”已经存在于“libs/armeabi”（等）路径中。我的本机活动最终需要加载三个“.so”文件，但无论我尝试加载一个“.so”文件还是所有三个“.so”文件，此错误都会持续存在。我的“AndroidManifest.xml”文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- BEGIN_INCLUDE(manifest) -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.native_activity"
    android:versionCode="1"
    android:versionName="1.0">

<!-- This is the platform API where NativeActivity was introduced. -->
<uses-sdk android:minSdkVersion="9" />

<!-- This .apk has no Java code itself, so set hasCode to false. -->
<application android:label="@string/app_name" android:hasCode="false">

    <!-- Our activity is the built-in NativeActivity framework class.
         This will take care of integrating with our NDK code. -->
    <activity android:name="android.app.NativeActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden">
        <!-- Tell NativeActivity the name of or .so -->
        <meta-data android:name="android.app.lib_name"
            android:value="[library name]" />
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
<!-- END_INCLUDE(manifest) --> 
```

需要做什么来修复这个运行时异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-29T22:12:47.263

查找有关加载失败的更多信息的一个有用方法是制作一个基本的 Android 应用程序，并使用`System.loadLibrary`该方法加载本机库，`onCreate`完全绕过 NativeActivity。

例如

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    System.loadLibrary("foo");
    System.loadLibrary("bar");
    System.loadLibrary("depends-on-foo-and-bar");
} 
```

然后，您将不会收到 NativeActivity 提供的不太有用的“无法加载本机库”消息，而是会收到更有用的消息，例如

> java.lang.UnsatisfiedLinkError：dlopen 失败：无法加载“libdepends-on-foo-and-bar.so”所需的库“lib42.so”；由找不到库“lib42.so”引起

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:23:58.150

在您的 JNI 文件夹中，“”设置为什么？“[库名称]”名称应设置为您正在构建的包的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T14:01:45.817

问题似乎是系统正在寻找一个名称附加了 -1 的库

（来自您的错误消息）/data/app-lib/com.example.native_activity-1

我已经看到当一个库先前存在时，andoird 会这样做，然后在名称中添加 -1、-2 等。不知道为什么，但很确定它是一个版本控制问题，您可以通过卸载或全新安装来解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-28T21:47:33.133

发生这种情况是由于缺少依赖项（甚至是实现）。您可能会收到“无法加载库：libFoo.so”，但真正缺少的依赖项可能是 libBar.so，它由 libFoo.so 依赖。或者您可能只是声明了函数并调用了它们，但没有实现它们。

问题是由于构建 so 文件的工作方式造成的。当您使用 gcc 构建共享对象时，链接步骤并没有真正发生。例如在 libFoo.so 中，您可以声明一个 myFunc() 原型并调用它。您可以跳过 myFunc(){} 的实现。gcc 会很乐意为您构建一个 .so 文件。它会很高兴地出现在 apk 中。但是，当需要加载库时，这会因“无法加载库”消息而中断。

有两种方法可以解决这个问题：你要么按照 AndrewJC 在他的回答中告诉你的去做。或者您开始​​注释代码，直到您能够再次加载。从而定位功能实现缺失。

重要提示：添加到 so 文件的 -1 -2 后缀不是问题。该评论误导我花了几天时间才发现这些数字后缀实际上是 android 包管理器的预期行为。

# python - python，如何修改类实例的dict属性

> ID：14784566
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:16:06.430
> 
> 标签：python, class, dictionary

我有一个有字典的实例。如何通过字典中的键修改函数中的字典？

```
class myclass:
    def __init__(self):
        self.mydict = {'number':0}

def myfunction(foo):
    foo.mydict[number] += 10 #<- doesnt work gives me 'global name number not defined' 

instance = myclass()
myfunction(instance) 
```

希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:17:47.167

实际上，这与它是类属性无关：

```
foo.mydict['number'] += 10 
```

键必须是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:18:07.113

`number`应该是一个字符串

```
foo.mydict['number'] += 10 
```

# python - flickrAPI groups_leave() 给出错误

> ID：14784570
> 
> 赞同：0
> 
> 时间：2013-02-09T03:16:30.180
> 
> 标签：python, python-2.7, flickr

`<Element 'rsp' at 0x2f25830> Error: 99: Insufficient permissions. Method requires delete privileges; write granted.`当我尝试`groups_leave()`从 FlickrAPI运行时，我不断收到错误消息。

我使用`people_getGroups()`它，它像冠军一样运行，所以我使用相同的代码，更改`people_getGroups()`为`groups_leave()`它只是弯腰和月亮我。:(

```
##  Python 2.73
##
##  Patterned after http://stackoverflow.com/questions/3182269/retrieving-flickr-favorites
##

import fileinput
import time
import flickrapi

Start = time.time()

g = 0

api_key    = 'Thisisnotreallyit'
api_secret = "ifItoldyou,I'dhavetokillyou"

flickr = flickrapi.FlickrAPI(api_key, api_secret)

uNSIDfile = '\flickrAPI\Test\GrpLeave.ttxt'

InFile  = open(uNSIDfile)
OutFile = open('C:\flickrAPI\Test\LeftGrp.ttxt', mode='w')

# group = '1569978@N25 '
for group in InFile:
    group = group [:-1]  # gets rid of{CR}{LF}

    g += 1
    if '@N' in group:
            try:
                    Grp = flickr.groups_leave(group_id = group)
                    fErr = ''
                    tup = 'Left Group {0}\n'.format(Grp)
                    OutFile.write(tup.encode('utf-8'))

            except flickrapi.FlickrError as fErr:
                    tup = str(Grp) + '\t' + str(fErr) + '\n'
                    OutFile.write(tup.encode('utf-8'))

            print('Left group: {0} \t {1}'.format (Grp, str(fErr)))
            group = ''

    else:
            pass

print('{0} groups \n'.format (g))
print(" Processing time: {1}:{0}".format ( int(( time.time()-Start) % 60), int((time.time()-Start)/60)))

InFile.close()
OutFile.close() 
```

我尝试从控制台运行它，它给了我：

```
>>> group = '1389232@N25'
>>> Grp = flickr.groups_leave(group_id = group)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
        ##
  File "c:\python27\lib\site-packages\flickrapi\flickrapi\__init__.py", line 349, in handler
        parse_format=args['format'], **args)
  File "c:\python27\lib\site-packages\flickrapi\flickrapi\__init__.py", line 435, in __wrap_in_parser
        return parser(self, data)
  File "c:\python27\lib\site-packages\flickrapi\flickrapi\__init__.py", line 278, in parse_etree
        raise FlickrError(u'Error: %(code)s: %(msg)s' % err.attrib)
FlickrError: Error: 99: Insufficient permissions. Method requires delete privileges; write granted.
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T04:50:52.597

好的，我又一次拥有了“金发时刻！” ![在此处输入图像描述](../Images/91c3cebf763d4e791d64074f460380bd.png)

在服务网站 [http://www.flickr.com/services/api/flickr.groups.leave.html](http://www.flickr.com/services/api/flickr.groups.leave.html)它声明：***注意：****此方法需要 HTTP POST 请求。*

我还没有学会如何格式化这些，但那是另一天，嗯？

# ios - 在其他平台（iOS、Blackberry、Windows Mobile）上是否有等效的 AIDL

> ID：14784573
> 
> 赞同：0
> 
> 时间：2013-02-09T03:17:37.707
> 
> 标签：ios, windows-phone-7, blackberry, windows-mobile, aidl

黑莓手机上是否有等效的[Android 接口定义语言](http://developer.android.com/guide/components/aidl.html)(AIDL)？

我们已经使用 AIDL 开发了一个 Android 应用程序，我们希望在 BlackBerry、iPhone 和 Windows Mobile 上开发相同的应用程序。

这些平台上是否有任何等效的 AIDL 可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:12:51.650

据我所知，Blackberry < 10 上没有类似的东西。Blackberry 10 与 Android 兼容（本机模拟 Android 应用程序）。

iOS 也很不同，应用程序比 Android 应用程序分离得多。没有后台服务的概念，也就没有界面语言的概念。

我对Windows Mobile一无所知。

# php - 高度和对上传者的要求

> ID：14784576
> 
> 赞同：0
> 
> 时间：2013-02-09T03:18:20.450
> 
> 标签：php, file-upload

我目前已经创建了这个脚本。

```
<?php
$allowedExts = array("png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];

    $path = "/path/to/file";
    move_uploaded_file($_FILES["file"]["tmp_name"], $path."/".$_SESSION['Username'].".png");

    }
  }
else
  {
  echo "Invalid file";
   }
?> 
```

我希望为上传的图像指定最大高度和宽度。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:25:04.337

你需要使用PHP函数`getimagesize();`

getimagesize() 函数不需要 GD 库。

尝试这个：

```
<?php
    // Set maximum width and height in pixels
    $maxwidth = 4000;
    $maxheight = 4000;

    $allowedExts = array("png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 20000)
    && in_array($extension, $allowedExts))
      {
        // List the width, height, image type, img attributes of the uploaded file into the specified variables
        list($imgwidth, $imgheight, $imgtype, $imgattr) = getimagesize($_FILES["file"]["tmp_name"]);

        // If the image is too wide, or if the image is too tall, don't upload and tell the user.
        if($imgwidth < $maxwidth || $imgheight < $maxheight){
            if ($_FILES["file"]["error"] > 0)
            {
                echo "Error: " . $_FILES["file"]["error"] . "<br>";
            }
            else
            {
                echo "Upload: " . $_FILES["file"]["name"] . "<br>";
                echo "Type: " . $_FILES["file"]["type"] . "<br>";
                echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
                echo "Stored in: " . $_FILES["file"]["tmp_name"];

                $path = "/path/to/file";
                move_uploaded_file($_FILES["file"]["tmp_name"], $path."/".$_SESSION['Username'].".png");

            }
        }else{
            echo "File width or height is too large.";
        }
    }
    else
    {
        echo "Invalid file";
    }
?> 
```

# java - Java：在这段代码中解释闭包

> ID：14784577
> 
> 赞同：8
> 
> 时间：2013-02-09T03:18:21.557
> 
> 标签：java, closures

我理解闭包，并且已经应用​​了一些语言，例如 Python 和 SML。然而，当我阅读关于 Java 闭包的维基百科（当然，只有 8 个版本）时，我不明白 Java 在他们的示例中是否支持闭包的区别。

我从维基百科复制的那些代码：[关闭](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)

没有闭包的java代码：

```
class CalculationWindow extends JFrame {
  private volatile int result;
  ...
  public void calculateInSeparateThread(final URI uri) {
    // The expression "new Runnable() { ... }" is an anonymous class implementing the 'Runnable' interface.
    new Thread(
      new Runnable() {
        void run() {
          // It can read final local variables:
          calculate(uri);
          // It can access private fields of the enclosing class:
          result = result + 10;
        }
      }
    ).start();
  }
} 
```

如果 Java 支持闭包，代码将如下所示：

```
class CalculationWindow extends JFrame {
private volatile int result;
  ...
  public void calculateInSeparateThread(final URI uri) {
    // the code () -> { /* code */ } is a closure
    new Thread(() -> {
        calculate(uri);
        result = result + 10;
    }).start();
  }
} 
```

所以，我的问题是：如果 Java 支持闭包，那么第二个代码中有哪些特别之处？我真的看不出两个代码之间的主要区别。

请告诉我这一点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T04:01:35.547

关键是它们在功能上并没有太大的不同：

```
() -> {
    calculate(uri);
    result = result + 10;
} 
```

等效于具有*run()*方法的等效实现的*Runnable的新类实例。**你用一个简单的lambda*函数替换了很多“样板”代码。

 **使用 lambda，您的代码变得更具表现力、简洁、更易于编写和可读性。一旦你进入闭包和 lambda 函数的世界，这就是好处开始的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T03:59:55.063

不同之处在于：

*   在第一种情况下，您要声明一个匿名类并创建一个实例，但是
*   在第二种情况下，没有类也没有实例。相反，有一个 lambda ... 实际上是一个匿名函数。

它们达到了相同的目的，但 lambda 语法*肯定*更轻量级。

`final`但是，如果 lambda 是（或实际上是最终的），则 lambda 只能访问声明它的范围内的局部变量；请参阅 JSR-000335 审查草案 #2 中的 15.27.2。所以你可能会说 Java lambdas 不是完全闭包。

但是 JSR-000335 规范确实暗示 lambda 不是匿名类。并且在 lambda 主体中`this`，`super`它们在方法中具有不同的含义。

该规范将 lambdas（在某一时刻）描述为使用“合成类”实现，并声明合成类的实例可以在适当的时候作为编译优化被重用。（相比之下，不允许编译器对匿名类进行优化。）这种优化意味着 lambda*可能*比使用匿名类编码的等效代码执行得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T22:23:12.627

嗯，主要有两个区别。第一个与 Javac 和 JVM 中发生的底层进程相关联，第二个是语法。

在给出解释之前，让我们快速定义一下“真正的”函数式语言中的闭包是什么：一个函数及其词法环境和内存上下文。

首先，编译器将通过“扫描”将在其中执行代码的“语法上下文”来解析此代码（不是变量，而是您编写的代码导致编译器进行静态检查）。如果它发现您正在编写一个 lambda 作为等待功能接口的方法的参数，您将能够进行编译，以便 JVM 能够找到要执行的正确代码段。事实上，您将要实现一个只动态公开一个签名的接口。

然后，语法本身很重要，因为它不会为您提供与匿名类相同的功能，您可以在同一个地方实现或覆盖多个方法。

问题中的那段代码与查看这两个概念之间的区别并不是很相关，并且它整体上没有使用“闭包”。这是一段代码，可以帮助您了解潜力：

```
public class MyClass
{
    // A one method interface.
    public static interface Function
    {
        void execute(int a);
    };

    // An implementation of Function using the closure and lambda.
    public static Function createPrintAddToTenFunction()
    {
        Integer x = 10;
        Function func = (a) -> System.out.println(x + a);
        return func;
    }

    // A basic program.
    public static void main(String args[])
    {
        Function func = createPrintAddToTenFunction();
        func.execute(10);
    }
} 
```

这在 java 8 中编译并将打印： `20`

但是，Java 中有一些奇怪的闭包。这段代码来自[在线文档](http://www.oracle.com/technetwork/articles/java/architect-lambdas-part1-2080972.html)，清单 14：

```
public static void main(String... args) {
  StringBuilder message = new StringBuilder();
  Runnable r = () -> System.out.println(message);
  message.append("Howdy, ");
  message.append("world!");
  r.run();
} 
```

这将打印 `Howdy, world!`

而这正是函数式编程语言所不想要的。JVM 这样做是因为 Java 是一种面向对象的语言并且非常擅长它。

在 Java 中，您使用大量对堆的引用（这些引用接近于 C 或更接近的 C++ 等语言中的指针）。使用此原则，如果您在执行堆栈中嵌入了对该变量的引用，则可以修改在程序的内存上下文中启动的变量。这是来自[冯诺依曼架构](https://en.wikipedia.org/wiki/Von_Neumann_architecture)的隐含原则。这与函数式语言不同，后者应该将不同的执行上下文包含在彼此之间，后者略有不同，并将确保变量引用的值不会被以后的变量赋值修改。但那是另一回事了。**

# laravel - 如何在 laravel eloquent 模型中一对多地获取两个表的列？

> ID：14784578
> 
> 赞同：1
> 
> 时间：2013-02-09T03:18:33.000
> 
> 标签：laravel, eloquent, laravel-3

使用这个简单的示例，我可以获取表“comments”中的列，但无法获取表“post”中的列。我知道我可以使用“Fluent join”，但它在 Eloquente 中可行吗？谢谢！

```
class Post extends Eloquent {

 public function comments()
 {
      return $this->has_many('Comment');
 } 
```

}

```
$comments = Post::find(1)->comments()->get(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:14:42.360

利用`with()`

```
Post::with('comments')->get() 
```

您将得到一个`comments`带有所有`post`s 的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:40:20.897

你必须写这样的迁移

```
public function up()

{
    Schema::table('comments', function($table){
        $table->foreign('post_id')
              ->references('id')
              ->on('post')
              ->on_delete('cascade')
              ->on_update('cascade');
    });

} 
```

我相信它是不言自明的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:19:13.120

这就是我要找的：（对不起，如果我的问题不清楚）

```
$data = Odt::find(1);
$post_date = $data->c_date;
$comments_arr = $data->comments;
$comment1_date = $comments_arr[0]->c_date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:40:52.643

我认为你需要以另一种方式来做。

您的评论模型：

```
class Comment extends Eloquent {

 public function post()
 {
      return $this->belongs_to('Post');
 } 
```

然后在你的代码中你会想要类似的东西。

```
$comments = Comment::with('post')->where('post_id','=',$YourPostId)->get() 
```

我相信这应该为您提供帖子的信息及其所有相关评论。

# android - Listview 中的垂直和水平滚动

> ID：14784579
> 
> 赞同：4
> 
> 时间：2013-02-09T03:18:41.837
> 
> 标签：android, horizontal-scrolling

[我正在尝试在水平 listview](http://www.dev-smart.com/archives/34)内创建一个常见的 listviews 。水平滚动很好，但垂直滚动不起作用。我尝试使用[此](https://stackoverflow.com/questions/6768952/android-vertical-scrolling-for-listview-inside-horizontal-scrollview)解决方案，但什么也没发生。我应该怎么办？

Horizo​​ntalListviewDemo.java

```
package com.devsmart.android.ui;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.LinearLayout.LayoutParams;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.devsmart.android.ui.HorizontialListView;
import com.example.horlistview.R;

public class HorizontalListViewDemo extends Activity {

    private final static String ITEM = "item";
    private static int COLUMN_COUNT = 20;
    private static int ROW_COUNT = 50;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.listviewdemo);

        HorizontialListView listview = (HorizontialListView) findViewById(R.id.listview);
        listview.setAdapter(mAdapter);
    }

    static class VerticalViewHolder {
        protected TextView textview;
    }

    public void setColumnCount(int n) {
        COLUMN_COUNT = n;
    }

    public void setRowCount(int n) {
        ROW_COUNT = n;
    }

    private BaseAdapter mAdapter = new BaseAdapter() {

        public int getCount() {
            return COLUMN_COUNT;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            final List<Map<String, String>> l = createList();
            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.viewitem, null);
            final ListView listview = (ListView) convertView.findViewById(R.id.viewitem_listview);

            if (position==0) {
                listview.setLayoutParams(new LayoutParams(parent.getWidth()-50, LayoutParams.WRAP_CONTENT));

                listview.setAdapter(new SimpleAdapter(
                        getApplicationContext(),
                        l,
                        R.layout.viewitemitem,
                        new String[] {ITEM},
                        new int[] {R.id.textView}) {

                    @Override
                    public View getView(int position, View convertView, ViewGroup parent) {
                        VerticalViewHolder verticalViewHolder = null;
                        if (convertView==null) {
                            convertView = super.getView(position, convertView, parent);

                            verticalViewHolder = new VerticalViewHolder();
                            verticalViewHolder.textview = (TextView) convertView.findViewById(R.id.textView);

                            LayoutParams lp = (LayoutParams) verticalViewHolder.textview.getLayoutParams();
                            if (position==0)    lp.setMargins(1, 2, 1, 0);
                            else                lp.setMargins(1, 0, 1, 0);

                            convertView.setTag(verticalViewHolder);
                            convertView.setTag(R.id.textView, verticalViewHolder.textview);
                        } else {
                            verticalViewHolder = (VerticalViewHolder) convertView.getTag();
                        }
                        verticalViewHolder.textview.setText(l.get(position).get(ITEM));
                        return convertView;
                    }
                });
            }
            else {
                if (COLUMN_COUNT>=5)
                    listview.setLayoutParams(new LayoutParams(parent.getWidth()/5, LayoutParams.WRAP_CONTENT));
                else
                    listview.setLayoutParams(new LayoutParams(parent.getWidth()/COLUMN_COUNT, LayoutParams.WRAP_CONTENT));

                listview.setAdapter(new SimpleAdapter(
                        getApplicationContext(),
                        l,
                        R.layout.viewitemitem,
                        new String[] {ITEM},
                        new int[] {R.id.textView}) {

                    @Override
                    public View getView(int position, View convertView, ViewGroup parent) {
                        View retval = super.getView(position, convertView, parent);
                        TextView textview = (TextView) retval.findViewById(R.id.textView);
                        LayoutParams lp = (LayoutParams) textview.getLayoutParams();
                        if (position==0)                lp.setMargins(0, 2, 1, 0);
                        else if (position==ROW_COUNT-1) lp.setMargins(0, 0, 1, 1);
                        else                            lp.setMargins(0, 0, 1, 0);
                        return retval;
                    }
                });
            }

            convertView.setOnTouchListener(new OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    listview.setSmoothScrollbarEnabled(true);
                    listview.dispatchTouchEvent(event);
                    return false;
                }
            });

            return convertView;
        }

        private List<Map<String, String>> createList() {
            List<Map<String, String>> values = new ArrayList<Map<String, String>>();
            Map<String, String> v = new HashMap<String, String>();

            for (int j = 0; j < ROW_COUNT; j++) {
                v = new HashMap<String, String>();
                v.put(ITEM, ""+j);
                values.add(v);
            }

            return values;
        }
    };

} 
```

Horizo​​ntalListView.java

```
/*
 * HorizontalListView.java v1.5
 *
 * 
 * The MIT License
 * Copyright (c) 2011 Paul Soucy (paul@dev-smart.com)
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

package com.devsmart.android.ui;

import java.util.LinkedList;
import java.util.Queue;

import android.content.Context;
import android.database.DataSetObserver;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.Scroller;

public class HorizontialListView extends AdapterView<ListAdapter> {

    public boolean mAlwaysOverrideTouch = true;
    protected ListAdapter mAdapter;
    private int mLeftViewIndex = -1;
    private int mRightViewIndex = 0;
    protected int mCurrentX;
    protected int mNextX;
    private int mMaxX = Integer.MAX_VALUE;
    private int mDisplayOffset = 0;
    protected Scroller mScroller;
    private GestureDetector mGesture;
    private Queue<View> mRemovedViewQueue = new LinkedList<View>();
    private OnItemSelectedListener mOnItemSelected;
    private OnItemClickListener mOnItemClicked;
    private boolean mDataChanged = false;

    public HorizontialListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView();
    }

    private synchronized void initView() {
        mLeftViewIndex = -1;
        mRightViewIndex = 0;
        mDisplayOffset = 0;
        mCurrentX = 0;
        mNextX = 0;
        mMaxX = Integer.MAX_VALUE;
        mScroller = new Scroller(getContext());
        mGesture = new GestureDetector(getContext(), mOnGesture);
    }

    @Override
    public void setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener) {
        mOnItemSelected = listener;
    }

    @Override
    public void setOnItemClickListener(AdapterView.OnItemClickListener listener){
        mOnItemClicked = listener;
    }

    private DataSetObserver mDataObserver = new DataSetObserver() {

        @Override
        public void onChanged() {
            synchronized(HorizontialListView.this){
                mDataChanged = true;
            }
            invalidate();
            requestLayout();
        }

        @Override
        public void onInvalidated() {
            reset();
            invalidate();
            requestLayout();
        }

    };

    @Override
    public ListAdapter getAdapter() {
        return mAdapter;
    }

    @Override
    public View getSelectedView() {
        //TODO: implement
        return null;
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        if(mAdapter != null) {
            mAdapter.unregisterDataSetObserver(mDataObserver);
        }
        mAdapter = adapter;
        mAdapter.registerDataSetObserver(mDataObserver);
        reset();
    }

    private synchronized void reset(){
        initView();
        removeAllViewsInLayout();
        requestLayout();
    }

    @Override
    public void setSelection(int position) {
        //TODO: implement
    }

    private void addAndMeasureChild(final View child, int viewPos) {
        LayoutParams params = child.getLayoutParams();
        if(params == null) {
            params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        }

        addViewInLayout(child, viewPos, params, true);
        child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
                MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
    }

    @Override
    protected synchronized void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        if(mAdapter == null){
            return;
        }

        if(mDataChanged){
            int oldCurrentX = mCurrentX;
            initView();
            removeAllViewsInLayout();
            mNextX = oldCurrentX;
            mDataChanged = false;
        }

        if(mScroller.computeScrollOffset()){
            int scrollx = mScroller.getCurrX();
            mNextX = scrollx;
        }

        if(mNextX < 0){
            mNextX = 0;
            mScroller.forceFinished(true);
        }
        if(mNextX > mMaxX) {
            mNextX = mMaxX;
            mScroller.forceFinished(true);
        }

        int dx = mCurrentX - mNextX;

        removeNonVisibleItems(dx);
        fillList(dx);
        positionItems(dx);

        mCurrentX = mNextX;

        if(!mScroller.isFinished()){
            post(new Runnable(){
                public void run() {
                    requestLayout();
                }
            });

        }
    }

    private void fillList(final int dx) {
        int edge = 0;
        View child = getChildAt(getChildCount()-1);
        if(child != null) {
            edge = child.getRight();
        }
        fillListRight(edge, dx);

        edge = 0;
        child = getChildAt(0);
        if(child != null) {
            edge = child.getLeft();
        }
        fillListLeft(edge, dx);

    }

    private void fillListRight(int rightEdge, final int dx) {
        while(rightEdge + dx < getWidth() && mRightViewIndex < mAdapter.getCount()) {

            View child = mAdapter.getView(mRightViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, -1);
            rightEdge += child.getMeasuredWidth();

            if(mRightViewIndex == mAdapter.getCount()-1){
                mMaxX = mCurrentX + rightEdge - getWidth();
            }
            mRightViewIndex++;
        }

    }

    private void fillListLeft(int leftEdge, final int dx) {
        while(leftEdge + dx > 0 && mLeftViewIndex >= 0) {
            View child = mAdapter.getView(mLeftViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, 0);
            leftEdge -= child.getMeasuredWidth();
            mLeftViewIndex--;
            mDisplayOffset -= child.getMeasuredWidth();
        }
    }

    private void removeNonVisibleItems(final int dx) {
        View child = getChildAt(0);
        while(child != null && child.getRight() + dx <= 0) {
            mDisplayOffset += child.getMeasuredWidth();
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mLeftViewIndex++;
            child = getChildAt(0);

        }

        child = getChildAt(getChildCount()-1);
        while(child != null && child.getLeft() + dx >= getWidth()) {
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mRightViewIndex--;
            child = getChildAt(getChildCount()-1);
        }
    }

    private void positionItems(final int dx) {
        if(getChildCount() > 0){
            mDisplayOffset += dx;
            int left = mDisplayOffset;
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                int childWidth = child.getMeasuredWidth();
                child.layout(left, 0, left + childWidth, child.getMeasuredHeight());
                left += childWidth;
            }
        }
    }

    public synchronized void scrollTo(int x) {
        mScroller.startScroll(mNextX, 0, x - mNextX, 0);
        requestLayout();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean handled = mGesture.onTouchEvent(ev);
        return handled;
    }

    protected boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
        synchronized(HorizontialListView.this){
            mScroller.fling(mNextX, 0, (int)-velocityX, 0, 0, mMaxX, 0, 0);
        }
        requestLayout();

        return true;
    }

    protected boolean onDown(MotionEvent e) {
        mScroller.forceFinished(true);
        return true;
    }

    private OnGestureListener mOnGesture = new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onDown(MotionEvent e) {
            return HorizontialListView.this.onDown(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            return HorizontialListView.this.onFling(e1, e2, velocityX, velocityY);
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {

            synchronized(HorizontialListView.this){
                mNextX += (int)distanceX;
            }
            requestLayout();

            return true;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            Rect viewRect = new Rect();
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                int left = child.getLeft();
                int right = child.getRight();
                int top = child.getTop();
                int bottom = child.getBottom();
                viewRect.set(left, top, right, bottom);
                if(viewRect.contains((int)e.getX(), (int)e.getY())){
                    if(mOnItemClicked != null){
                        mOnItemClicked.onItemClick(HorizontialListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    if(mOnItemSelected != null){
                        mOnItemSelected.onItemSelected(HorizontialListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    break;
                }                   
            }
            return true;
        }           
    };      
} 
```

listviewdemo.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.devsmart.android.ui.HorizontialListView
        android:id="@+id/listview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:background="#fff"/>

</LinearLayout> 
```

查看项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/viewitem_linearlayout"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/viewitem_listview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </ListView>

</LinearLayout> 
```

查看itemitem.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/viewitemitem"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#fff" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#000"
        android:paddingLeft="3dp"
        android:text="@string/hello_world" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:57:19.027

试试我下面的自定义代码，`HorizontalScrollingPage`它提供了垂直和水平滚动包含列表视图的视图的功能..

**Horizo​​ntalPagerWithPageControl.class**

> ```
>  package com.wli.horizontalpager.withpagecontrol;
>    import android.content.Context;
>    import android.content.res.TypedArray;
>    import android.graphics.Color;
>    import android.graphics.drawable.Drawable;
>    import android.graphics.drawable.ShapeDrawable;
>    import android.graphics.drawable.shapes.OvalShape;
>    import android.graphics.drawable.shapes.Shape;
>    import android.util.AttributeSet;
>    import android.util.DisplayMetrics;
>    import android.view.Display;
>    import android.view.Gravity;
>    import android.view.MotionEvent;
>    import android.view.VelocityTracker;
>    import android.view.View;
>    import android.view.ViewConfiguration;
>    import android.view.ViewGroup;
>    import android.view.WindowManager;
>    import android.widget.ImageView;
>    import android.widget.LinearLayout;
>    import android.widget.Scroller;      
>    public final class HorizontalPagerWithPageControl extends ViewGroup {
> /*
>  * How long to animate between screens when programmatically setting with
>  * setCurrentScreen using the animate parameter
>  */
> private static final int ANIMATION_SCREEN_SET_DURATION_MILLIS = 500;
> // What fraction (1/x) of the screen the user must swipe to indicate a page
> // change
> private static final int FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE = 4;
> private static final int INVALID_SCREEN = -1;
> /*
>  * Velocity of a swipe (in density-independent pixels per second) to force a
>  * swipe to the next/previous screen. Adjusted into
>  * mDensityAdjustedSnapVelocity on init.
>  */
> private static final int SNAP_VELOCITY_DIP_PER_SECOND = 600;
> // Argument to getVelocity for units to give pixels per second (1 = pixels
> // per millisecond).
> private static final int VELOCITY_UNIT_PIXELS_PER_SECOND = 1000;
> private static final int TOUCH_STATE_REST = 0;
> private static final int TOUCH_STATE_HORIZONTAL_SCROLLING = 1;
> private static final int TOUCH_STATE_VERTICAL_SCROLLING = -1;
> private int m_currentScreen;
> private int m_densityAdjustedSnapVelocity;
> private boolean m_firstLayout = true;
> private float m_lastMotionX;
> private float m_lastMotionY;
> private OnScreenSwitchListener m_onScreenSwitchListener;
> private int m_maximumVelocity;
> private int m_nextScreen = INVALID_SCREEN;
> private Scroller m_scroller;
> private int m_touchSlop;
> private int m_touchState = TOUCH_STATE_REST;
> private VelocityTracker m_velocityTracker;
> private int m_lastSeenLayoutWidth = -1;
> // Active and inactive draw
> private Drawable m_activeDrawable;
> private Drawable m_inactiveDrawable;
> // The size for the drawables
> private float m_indicatorSize;
> // The screen scale to get px to dip
> private static float SCALE;
> /**
>  * Simple constructor to use when creating a view from code.
>  * 
>  * @param p_context
>  *            The Context the view is running in, through which it can
>  *            access the current theme, resources, etc.
>  */
> public HorizontalPagerWithPageControl(final Context p_context) {
>     super(p_context);
>     init();
> }
> /**
>  * Constructor that is called when inflating a view from XML. This is called
>  * when a view is being constructed from an XML file, supplying attributes
>  * that were specified in the XML file. This version uses a default style of
>  * 0, so the only attribute values applied are those in the Context's Theme
>  * and the given AttributeSet.
>  * 
>  * <p>
>  * The method onFinishInflate() will be called after all children have been
>  * added.
>  * 
>  * @param p_context
>  *            The Context the view is running in, through which it can
>  *            access the current theme, resources, etc.
>  * @param p_attrs
>  *            The attributes of the XML tag that is inflating the view.
>  * @see #View(Context, AttributeSet, int)
>  */
> public HorizontalPagerWithPageControl(final Context p_context,
>         final AttributeSet p_attrs) {
>     super(p_context, p_attrs);
>     init();
> }
> /**
>  * Sets up the scroller and touch/fling sensitivity parameters for the
>  * pager.
>  */
> private void init() {
>     m_scroller = new Scroller(getContext());
>     // get the screen density
>     SCALE = getResources().getDisplayMetrics().density;
>     // set the indicator size resolution independent
>     m_indicatorSize = (7 * SCALE);
>     // Calculate the density-dependent snap velocity in pixels
>     DisplayMetrics m_displayMetrics = new DisplayMetrics();
>     ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE))
>             .getDefaultDisplay().getMetrics(m_displayMetrics);
>     m_densityAdjustedSnapVelocity = (int) (m_displayMetrics.density * SNAP_VELOCITY_DIP_PER_SECOND);
>     final ViewConfiguration m_configuration = ViewConfiguration
>             .get(getContext());
>     m_touchSlop = m_configuration.getScaledTouchSlop();
>     m_maximumVelocity = m_configuration.getScaledMaximumFlingVelocity();
>     // draw the shapes
>     makeShapes();
> }
> @Override
> protected void onMeasure(final int p_widthMeasureSpec,
>         final int p_heightMeasureSpec) {
>     super.onMeasure(p_widthMeasureSpec, p_heightMeasureSpec);
>     final int m_width = MeasureSpec.getSize(p_widthMeasureSpec);
>     final int m_widthMode = MeasureSpec.getMode(p_widthMeasureSpec);
>     if (m_widthMode != MeasureSpec.EXACTLY) {
>         throw new IllegalStateException(
>                 "ViewSwitcher can only be used in EXACTLY mode.");
>     }
>     final int m_heightMode = MeasureSpec.getMode(p_heightMeasureSpec);
>     if (m_heightMode != MeasureSpec.EXACTLY) {
>         throw new IllegalStateException(
>                 "ViewSwitcher can only be used in EXACTLY mode.");
>     }
>     // The children are given the same width and height as the workspace
>     final int m_count = getChildCount();
>     for (int m_i = 0; m_i < m_count; m_i++) {
>         getChildAt(m_i).measure(p_widthMeasureSpec, p_heightMeasureSpec);
>     }
>     if (m_firstLayout) {
>         scrollTo(m_currentScreen * m_width, 0);
>         m_firstLayout = false;
>     }
>     else if (m_width != m_lastSeenLayoutWidth) { // Width has changed
>         /*
>          * Recalculate the width and scroll to the right position to be sure
>          * we're in the right place in the event that we had a rotation that
>          * didn't result in an activity restart (code by aveyD). Without
>          * this you can end up between two pages after a rotation.
>          */
>         Display m_display = ((WindowManager) getContext().getSystemService(
>                 Context.WINDOW_SERVICE)).getDefaultDisplay();
>         int m_displayWidth = m_display.getWidth();
>         m_nextScreen = Math.max(0,
>                 Math.min(getCurrentScreen(), getChildCount() - 1));
>         final int m_newX = m_nextScreen * m_displayWidth;
>         final int m_delta = m_newX - getScrollX();
>         m_scroller.startScroll(getScrollX(), 0, m_delta, 0, 0);
>     }
>     m_lastSeenLayoutWidth = m_width;
> }
> @Override
> protected void onLayout(final boolean p_changed, final int p_l,
>         final int p_t, final int p_r, final int p_b) {
>     int m_childLeft = 0;
>     final int m_count = getChildCount();
>     for (int m_i = 0; m_i < m_count; m_i++) {
>         final View m_child = getChildAt(m_i);
>         if (m_child.getVisibility() != View.GONE) {
>             final int m_childWidth = m_child.getMeasuredWidth();
>             m_child.layout(m_childLeft, 0, m_childLeft + m_childWidth,
>                     m_child.getMeasuredHeight());
>             m_childLeft += m_childWidth;
>         }
>     }
> }
> @Override
> public boolean onInterceptTouchEvent(final MotionEvent p_ev) {
>     /*
>      * By Yoni Samlan: Modified onInterceptTouchEvent based on standard
>      * ScrollView's onIntercept. The logic is designed to support a nested
>      * vertically scrolling view inside this one; once a scroll registers
>      * for X-wise scrolling, handle it in this view and don't let the
>      * children, but once a scroll registers for y-wise scrolling, let the
>      * children handle it exclusively.
>      */
>     final int m_action = p_ev.getAction();
>     boolean m_intercept = false;
>     switch (m_action) {
>     case MotionEvent.ACTION_MOVE:
>         /*
>          * If we're in a horizontal scroll event, take it (intercept further
>          * events). But if we're mid-vertical-scroll, don't even try; let
>          * the children deal with it. If we haven't found a scroll event
>          * yet, check for one.
>          */
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             /*
>              * We've already started a horizontal scroll; set intercept to
>              * true so we can take the remainder of all touch events in
>              * onTouchEvent.
>              */
>             m_intercept = true;
>         } else if (m_touchState == TOUCH_STATE_VERTICAL_SCROLLING) {
>             // Let children handle the events for the duration of the scroll
>             // event.
>             m_intercept = false;
>         } else { // We haven't picked up a scroll event yet; check for one.
>             /*
>              * If we detected a horizontal scroll event, start stealing
>              * touch events (mark as scrolling). Otherwise, see if we had a
>              * vertical scroll event -- if so, let the children handle it
>              * and don't look to intercept again until the motion is done.
>              */
>             final float m_x = p_ev.getX();
>             final int m_xDiff = (int) Math.abs(m_x - m_lastMotionX);
>             boolean m_xMoved = m_xDiff > m_touchSlop;
>             if (m_xMoved) {
>                 // Scroll if the user moved far enough along the X axis
>                 m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>                 m_lastMotionX = m_x;
>             }
>             final float m_y = p_ev.getY();
>             final int m_yDiff = (int) Math.abs(m_y - m_lastMotionY);
>             boolean m_yMoved = m_yDiff > m_touchSlop;
>             if (m_yMoved) {
>                 m_touchState = TOUCH_STATE_VERTICAL_SCROLLING;
>             }
>         }
>         break;
>     case MotionEvent.ACTION_CANCEL:
>     case MotionEvent.ACTION_UP:
>         // Release the drag.
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     case MotionEvent.ACTION_DOWN:
>         /*
>          * No motion yet, but register the coordinates so we can check for
>          * intercept at the next MOVE event.
>          */
>         m_lastMotionY = p_ev.getY();
>         m_lastMotionX = p_ev.getX();
>         break;
>     default:
>         break;
>     }
>     return m_intercept;
> }
> @Override
> public boolean onTouchEvent(final MotionEvent p_ev) {
>     if (m_velocityTracker == null) {
>         m_velocityTracker = VelocityTracker.obtain();
>     }
>     m_velocityTracker.addMovement(p_ev);
>     final int m_action = p_ev.getAction();
>     final float m_x = p_ev.getX();
>     switch (m_action) {
>     case MotionEvent.ACTION_DOWN:
>         /*
>          * If being flinged and user touches, stop the fling. isFinished
>          * will be false if being flinged.
>          */
>         if (!m_scroller.isFinished()) {
>             m_scroller.abortAnimation();
>         }
>         // Remember where the motion event started
>         m_lastMotionX = m_x;
>         if (m_scroller.isFinished()) {
>             m_touchState = TOUCH_STATE_REST;
>         } else {
>             m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>         }
>         break;
>     case MotionEvent.ACTION_MOVE:
>         final int m_xDiff = (int) Math.abs(m_x - m_lastMotionX);
>         boolean m_xMoved = m_xDiff > m_touchSlop;
>         if (m_xMoved) {
>             // Scroll if the user moved far enough along the X axis
>             m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>         }
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             // Scroll to follow the motion event
>             final int m_deltaX = (int) (m_lastMotionX - m_x);
>             m_lastMotionX = m_x;
>             final int m_scrollX = getScrollX();
>             if (m_deltaX < 0) {
>                 if (m_scrollX > 0) {
>                     scrollBy(Math.max(-m_scrollX, m_deltaX), 0);
>                 }
>             } else if (m_deltaX > 0) {
>                 final int m_availableToScroll = getChildAt(
>                         getChildCount() - 1).getRight()
>                         - m_scrollX - getWidth();
>                 if (m_availableToScroll > 0) {
>                     scrollBy(Math.min(m_availableToScroll, m_deltaX), 0);
>                 }
>             }
>         }
>         break;
>     case MotionEvent.ACTION_UP:
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             final VelocityTracker m_velocityTrack = m_velocityTracker;
>             m_velocityTrack.computeCurrentVelocity(
>                     VELOCITY_UNIT_PIXELS_PER_SECOND, m_maximumVelocity);
>             int m_velocityX = (int) m_velocityTrack.getXVelocity();
>             if (m_velocityX > m_densityAdjustedSnapVelocity
>                     && m_currentScreen > 0) {
>                 // Fling hard enough to move left
>                 snapToScreen(m_currentScreen - 1);
>             } else if (m_velocityX < -m_densityAdjustedSnapVelocity
>                     && m_currentScreen < getChildCount() - 1) {
>                 // Fling hard enough to move right
>                 snapToScreen(m_currentScreen + 1);
>             } else {
>                 snapToDestination();
>             }
>             if (m_velocityTracker != null) {
>                 m_velocityTracker.recycle();
>                 m_velocityTracker = null;
>             }
>         }
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     case MotionEvent.ACTION_CANCEL:
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     default:
>         break;
>     }
>     return true;
> }
> @Override
> public void computeScroll() {
>     if (m_scroller.computeScrollOffset()) {
>         scrollTo(m_scroller.getCurrX(), m_scroller.getCurrY());
>         postInvalidate();
>     } else if (m_nextScreen != INVALID_SCREEN) {
>         m_currentScreen = Math.max(0,
>                 Math.min(m_nextScreen, getChildCount() - 1));
>         // Notify observer about screen change
>         if (m_onScreenSwitchListener != null) {
>             m_onScreenSwitchListener.onScreenSwitched(m_currentScreen);
>         }
>         m_nextScreen = INVALID_SCREEN;
>     }
> }
> /**
>  * Returns the index of the currently displayed screen.
>  * 
>  * @return The index of the currently displayed screen.
>  */
> public int getCurrentScreen() {
>     return m_currentScreen;
> }
> /**
>  * Sets the current screen.
>  * 
>  * @param p_currentScreen
>  *            The new screen.
>  * @param p_animate
>  *            True to smoothly scroll to the screen, false to snap instantly
>  */
> public void setCurrentScreen(final int p_currentScreen,
>         final boolean p_animate) {
>     m_currentScreen = Math.max(0,
>             Math.min(p_currentScreen, getChildCount() - 1));
>     if (p_animate) {
>         snapToScreen(p_currentScreen, ANIMATION_SCREEN_SET_DURATION_MILLIS);
>     } else {
>         scrollTo(m_currentScreen * getWidth(), 0);
>     }
>     invalidate();
> }
> /**
>  * Sets the {@link OnScreenSwitchListener}.
>  * 
>  * @param onScreenSwitchListener
>  *            The listener for switch events.
>  */
> public void setOnScreenSwitchListener(
>         final OnScreenSwitchListener onScreenSwitchListener) {
>     m_onScreenSwitchListener = onScreenSwitchListener;
> }
> /**
>  * Snaps to the screen we think the user wants (the current screen for very
>  * small movements; the next/prev screen for bigger movements).
>  */
> private void snapToDestination() {
>     final int m_screenWidth = getWidth();
>     int m_scrollX = getScrollX();
>     int m_whichScreen = m_currentScreen;
>     int m_deltaX = m_scrollX - (m_screenWidth * m_currentScreen);
>     // Check if they want to go to the prev. screen
>     if ((m_deltaX < 0)
>             && m_currentScreen != 0
>             && ((m_screenWidth / FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE) < -m_deltaX)) {
>         m_whichScreen--;
>         // Check if they want to go to the next screen
>     } else if ((m_deltaX > 0)
>             && (m_currentScreen + 1 != getChildCount())
>             && ((m_screenWidth / FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE) < m_deltaX)) {
>         m_whichScreen++;
>     }
>     snapToScreen(m_whichScreen);
> }
> /**
>  * Snap to a specific screen, animating automatically for a duration
>  * proportional to the distance left to scroll.
>  * 
>  * @param p_whichScreen
>  *            Screen to snap to
>  */
> private void snapToScreen(final int p_whichScreen) {
>     snapToScreen(p_whichScreen, -1);
> }
> /**
>  * Snaps to a specific screen, animating for a specific amount of time to
>  * get there.
>  * 
>  * @param p_whichScreen
>  *            Screen to snap to
>  * @param p_duration
>  *            -1 to automatically time it based on scroll distance; a
>  *            positive number to make the scroll take an exact duration.
>  */
> private void snapToScreen(final int p_whichScreen, final int p_duration) {
>     /*
>      * Modified by Yoni Samlan: Allow new snapping even during an ongoing
>      * scroll animation. This is intended to make HorizontalPager work as
>      * expected when used in conjunction with a RadioGroup used as "tabbed"
>      * controls. Also, make the animation take a percentage of our normal
>      * animation time, depending how far they've already scrolled.
>      */
>     m_nextScreen = Math
>             .max(0, Math.min(p_whichScreen, getChildCount() - 1));
>     final int m_newX = m_nextScreen * getWidth();
>     final int m_delta = m_newX - getScrollX();
>     if (p_duration < 0) {
>         // E.g. if they've scrolled 80% of the way, only animation for 20%
>         // of the duration
>         m_scroller
>                 .startScroll(
>                         getScrollX(),
>                         0,
>                         m_delta,
>                         0,
>                         (int) (Math.abs(m_delta) / (float) getWidth() * ANIMATION_SCREEN_SET_DURATION_MILLIS));
>     } else {
>         m_scroller.startScroll(getScrollX(), 0, m_delta, 0, p_duration);
>     }
>     // sets the drawables when the user swipes
>     setActiveInactiveDrawables(p_whichScreen);
>     // redraw screen
>     invalidate();
> }
> /**
>  * Allways called when the user swipes to another view. Gets the current
>  * view an sets the active drawable / shape to the curretn view. (in the
>  * page control)
>  */
> public void setActiveInactiveDrawables(int p_whichScreen) {
>     // Getting the Linear Layout where the page control drawables are inside
>     LinearLayout m_linLayout = (LinearLayout) ((ViewGroup) this.getParent())
>             .getChildAt(((LinearLayout) this.getParent()).getChildCount() - 1);
>     // get every imageview and set the one of the current screen to active
>     for (int m_i = 0; m_i < this.getChildCount(); m_i++) {
>         ImageView m_imgView = (ImageView) m_linLayout.getChildAt(m_i);
>         if (m_i == p_whichScreen) {
>             m_imgView.setBackgroundDrawable(m_activeDrawable);
>         } else {
>             m_imgView.setBackgroundDrawable(m_inactiveDrawable);
>         }
>     }
> }
> /**
>  * Listener for the event that the HorizontalPager switches to a new view.
>  */
> public static interface OnScreenSwitchListener {
>     /**
>      * Notifies listeners about the new screen. Runs after the animation
>      * completed.
>      * 
>      * @param screen
>      *            The new screen index.
>      */
>     void onScreenSwitched(int screen);
> }
> /**
>  * Builds the active and inactive shapes / drawables for the page control
>  */
> private void makeShapes() {
>     m_activeDrawable = new ShapeDrawable();
>     m_inactiveDrawable = new ShapeDrawable();
>     m_activeDrawable.setBounds(0, 0, (int) m_indicatorSize,
>             (int) m_indicatorSize);
>     m_inactiveDrawable.setBounds(0, 0, (int) m_indicatorSize,
>             (int) m_indicatorSize);
>     int m_i[] = new int[2];
>     m_i[0] = android.R.attr.textColorSecondary;
>     m_i[1] = android.R.attr.textColorSecondaryInverse;
>     TypedArray a = getContext().getTheme().obtainStyledAttributes(m_i);
>     Shape m_s1 = new OvalShape();
>     m_s1.resize(m_indicatorSize, m_indicatorSize);
>     Shape m_s2 = new OvalShape();
>     m_s2.resize(m_indicatorSize, m_indicatorSize);
>     ((ShapeDrawable) m_activeDrawable).getPaint().setColor(
>             a.getColor(0, Color.DKGRAY));
>     ((ShapeDrawable) m_inactiveDrawable).getPaint().setColor(
>             a.getColor(1, Color.LTGRAY));
>     ((ShapeDrawable) m_activeDrawable).setShape(m_s1);
>     ((ShapeDrawable) m_inactiveDrawable).setShape(m_s2);
> }
> /**
>  * Called by the Activity when all Views are added to the horizontal pager
>  * to
>  */
> public void addPagerControl() {
>     ViewGroup m_view = (ViewGroup) this.getParent();
>     m_view.addView(initPageControl());
> }
> private LinearLayout initPageControl() {
>     LinearLayout m_linearLayout = new LinearLayout(getContext());
>     LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
>             LinearLayout.LayoutParams.FILL_PARENT,
>             LinearLayout.LayoutParams.FILL_PARENT, 2f);
>     m_linearLayout.setLayoutParams(params);
>     m_linearLayout.setOrientation(LinearLayout.HORIZONTAL);
>     m_linearLayout.setGravity(Gravity.CENTER_HORIZONTAL
>             | Gravity.CENTER_VERTICAL);
>     m_linearLayout.setBackgroundColor(Color.BLACK);
>     return setPageCount(this.getChildCount(), m_linearLayout);
> }
> /**
>  * Initializes the page control layout at be bottom of the news view. Draws
>  * all page control shapes an set the active shape to the first view
>  * 
>  * @param p_pageCount
>  *            the cout of the pages the user can swipe to
>  * @param p_linearLayout2
>  *            the page control linearlayout
>  * @return the given layout filled with the page control shapes
>  */
> private LinearLayout setPageCount(int p_pageCount,
>         LinearLayout p_linearLayout2) {
>     for (int m_i = 0; m_i < p_pageCount; m_i++) {
>         final ImageView m_imageView = new ImageView(getContext());
>         LinearLayout.LayoutParams m_params = new LinearLayout.LayoutParams(
>                 (int) m_indicatorSize, (int) m_indicatorSize);
>         m_params.setMargins((int) m_indicatorSize / 2,
>                 (int) m_indicatorSize, (int) m_indicatorSize / 2,
>                 (int) m_indicatorSize);
>         m_imageView.setLayoutParams(m_params);
>         m_imageView.setBackgroundDrawable(m_inactiveDrawable);
>         if (m_i == 0) {
>             m_imageView.setBackgroundDrawable(m_activeDrawable);
>         }
>         p_linearLayout2.addView(m_imageView);
>     }
>     return p_linearLayout2;
> }
>   } 
> ```

**Horizo​​ntalPagerWithPageControlActivity.class**

> ```
> public class HorizontalPagerWithPageControlActivity extends Activity {
> private HorizontalPagerWithPageControl m_pager;
> // The data to show
> List<Map<String, String>> planetsList = new ArrayList<Map<String, String>>();
> @Override
> public void onCreate(final Bundle p_savedInstanceState) {
>     super.onCreate(p_savedInstanceState);
>     setContentView(R.layout.horizontal_pager_with_page_control);
>     m_pager = (HorizontalPagerWithPageControl) findViewById(R.id.hphorizontal_pager);
>     /*
>      * You can add more views to the horizontal pager here with
>      * mPager.addChild() or in xml. When every view is in the horizontal
>      * pager just call addPagerControl() on the horzizontal pager.
>      */
>     initList();
>     // We get the ListView component from the layout
>     ListView lv = (ListView) findViewById(R.id.listView);
>     // This is a simple adapter that accepts as parameter
>     // Context
>     // Data list
>     // The row layout that is used during the row creation
>     // The keys used to retrieve the data
>     // The View id used to show the data. The key number and the view id
>     // must match
>     SimpleAdapter simpleAdpt = new SimpleAdapter(this, planetsList,
>             android.R.layout.simple_list_item_1, new String[] { "planet" },
>             new int[] { android.R.id.text1 });
>     lv.setAdapter(simpleAdpt);
>     m_pager.addPagerControl();
> }
> private void initList() {
>     // We populate the planets
>     planetsList.add(createPlanet("planet", "Mercury"));
>     planetsList.add(createPlanet("planet", "Venus"));
>     planetsList.add(createPlanet("planet", "Mars"));
>     planetsList.add(createPlanet("planet", "Jupiter"));
>     planetsList.add(createPlanet("planet", "Saturn"));
>     planetsList.add(createPlanet("planet", "Uranus"));
>     planetsList.add(createPlanet("planet", "Neptune"));
> }
> private HashMap<String, String> createPlanet(String key, String name) {
>     HashMap<String, String> planet = new HashMap<String, String>();
>     planet.put(key, name);
>     return planet;
> }
> } 
> ```

**Horizo​​ntal_pager_with_page_control.xml**

> ```
> <?xml version="1.0" encoding="utf-8"?>
>    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:orientation="vertical" >
> <com.wli.horizontalpager.withpagecontrol.HorizontalPagerWithPageControl
>     android:id="@+id/hphorizontal_pager"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:layout_weight="0.1" >
>     <TextView
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"
>         android:background="#f00"
>         android:text="@string/lipsum"
>         android:textColor="#000"
>         android:textSize="24sp"
>         android:textStyle="bold" />
>     <ScrollView
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent" >
>         <TextView
>             android:layout_width="fill_parent"
>             android:layout_height="fill_parent"
>             android:background="#0f0"
>             android:text="@string/lipsum"
>             android:textColor="#000"
>             android:textSize="24sp"
>             android:textStyle="bold" />
>     </ScrollView>
>         <ListView
>             android:id="@+id/listView"
>             android:layout_width="fill_parent"
>             android:layout_height="fill_parent" />
> </com.wli.horizontalpager.withpagecontrol.HorizontalPagerWithPageControl>
> </LinearLayout> 
> ```

我希望它会帮助你。

谢谢。

# mysql - 避免在 ActiveRecord 中存储重复的字符串

> ID：14784580
> 
> 赞同：0
> 
> 时间：2013-02-09T03:18:53.900
> 
> 标签：mysql, ruby-on-rails, rails-activerecord

假设我有以下模型：

```
 class Event < ActiveRecord::Base
      has_many :tips
    end

    class Tip < ActiveRecord::Base
    end 
```

提示描述只是`VARCHAR(140)`MySQL 数据库中的一个，其中大多数是固定值，例如“穿雨衣”或“带支票簿”。我想使用规范化来避免存储大量具有相同值的字符串，但是，如果我添加`belongs_to :event`到`Tip`模型中，该`event_id`值会导致许多重复提示。

如何在不手动管理`tip_id <---> tip_description`映射的情况下获得规范化的好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:16:39.033

如果您想避免在表中重复输入，请使用`has_and_belongs_to_many`

```
class Event < ActiveRecord::Base
  has_and_belongs_to_many :tips
end

class Tip < ActiveRecord::Base
  has_and_belongs_to_many :events
end 
```

迁移创建`events_tips`：

```
class CreateEventsTips < ActiveRecord::Migration
  def change
    create_table :events_tips, :id => false do |t|
      t.integer :event_id
      t.integer :tip_id
    end
  end
end 
```

在控制器中：

```
tip = Tip.find_or_create_by_tip_description(params[:tip][:description])
Event.find_by_id(params[:id]).tips << tip 
```

# php - PHP：$_SESSION 变量未传递到另一个文件

> ID：14784582
> 
> 赞同：0
> 
> 时间：2013-02-09T03:19:00.437
> 
> 标签：php, html, mysql

我目前正在学习使用会话和类似的东西，并且我正在尝试制作一些简单的登录系统，但我似乎无法将变量从一页传递到下一页。

login_confirm.php

```
<?php
session_start("session");
$host="localhost"; // Host name 
$username="*"; // Mysql username 
$password="*"; // Mysql password 
$db_name="*"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$myusername=$_POST['myusername'];
$mypassword=hash('sha256', $_POST['mypassword']);

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 

$_SESSION['_username']=$myusername;

header("location:login_success.php");

}
else {
echo "Wrong Username or Password.";
}
ob_end_flush();
?> 
```

login_success.php

```
<?php
session_start();
if(!session_is_registered(myusername)){
//header("location:login.php");
 echo $_SESSION['_username']; 
}
?> 
```

基本上它甚至不会呼应`$_SESSION['_username'];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:23:53.003

真的，您应该使用 PDO 或 mysqli，因为 mysql_* 函数很快就会被弃用。一定是一个很老的教程

**这是使用 PDO 的代码端口**

```
<?php
session_start();
// SQL Config
$config['sql_host']='localhost';
$config['sql_db']  ='members';
$config['sql_user']='*';
$config['sql_pass']='*';

// SQL Connect
try {
        $db = new PDO("mysql:host=".$config['sql_host'].";dbname=".$config['sql_db'], $config['sql_user'], $config['sql_pass']);
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
}catch (Exception $e){
        echo ('Cannot connect to mySQL server.');
}

// Check for POST, add isset($_POST['myusername']) ect to add validations
if($_SERVER['REQUEST_METHOD']=='POST'){
   // Build your query with placeholders
   $sql = "SELECT 1 FROM members WHERE username=:username && password=:password";

    // Prepare it
    $statement = $db->prepare($sql);
    // Assign your vairables to the placeholders
    $statement->bindParam(':username', $_POST['myusername']);
    $statement->bindValue(':password', hash('sha256', $_POST['mypassword']));

    // Execute the query
    $statement->execute();
    //Fetch the result
    $result = $statement->fetch(PDO::FETCH_ASSOC);
    //Is it not empty else
    if(!empty($result)){
            //$_SESSION['logged_in'] in login_success.php
        $_SESSION['logged_in'] = true;
        $_SESSION['username'] = $_POST['myusername'];
        exit(header("Location: ./login_success.php"));
    }else{
        $_SESSION['logged_in'] = false;
            //pass error to login 
        $_SESSION['error'] = 'Username or password wrong bla';
        exit(header("Location: ./login.php"));
    }
}
?> 
```

希望能帮助到你。

# r - 迭代存储在 R 中的 data.frame 中的列表

> ID：14784585
> 
> 赞同：5
> 
> 时间：2013-02-09T03:20:13.117
> 
> 标签：r, for-loop, dataframe, loops

我认为这是一个初学者问题，但我似乎没有正确的词汇来进行有效的 Google 搜索。

我有一个 data.frame, `final`，其中包含一个 列表`clusters`，每个列表都是字符串列表。

我想遍历每个集群中的字符串列表：for 循环中的 for 循环。

```
for (j in final$clusters){
    for (i in final$clusters$`j`){
        print final$clusters$`j`[i]
    }
} 
```

`j`对应于中的列表`clusters`，并且`i`对应于中的项目`clusters[j]`

我试图通过使用每个集群的长度来做到这一点，我认为这类似于`length(final$clusters[1])`，但这给出了 1，而不是列表的长度。

此外，`final$clusters[1]`给出 $'1'，并在下一行给出簇 1 中的所有字符串。

谢谢。

编辑：`dput(str(final))`按要求输出：

```
List of 2
 $ clusters     :List of 1629
  ..$ 1   :
  ..$ 2   : 
  ..$ 3   : 
  ..$ 4   : 
  ..$ 5   : 
  ..$ 6   : 
  ..$ 7   : 
  ..$ 8   : 
  ..$ 9   : 
  ..$ 10  : 
  .. [list output truncated]
 $ cluster_stats: num [1:1629, 1:6] 0.7 0.7 0.7 0.7 0.7 0.7 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:1629] "1" "2" "3" "4" ...
  .. ..$ : chr [1:6] "min" "qu1" "median" "mean" ...
NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:35:27.803

我认为这里的主要问题是你在这里迭代的方式是错误的。

我认为这样的事情会更好：

```
for (j in final$clusters){
    for (i in final$clusters[j]){
        print i
    }
} 
```

这是循环的文档：[http](http://manuals.bioinformatics.ucr.edu/home/programming-in-r#TOC-For-Loop) : //manuals.bioinformatics.ucr.edu/home/programming-in-r#TOC-For-Loop 子集：http: [//www.statmethods.net/management/subset.html](http://www.statmethods.net/management/subset.html)

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T06:24:29.713

我认为您混淆了 a`list`和 a `data.frame`。我猜你的 final is object 是一个列表。

要遍历列表，您可以使用`rapply`. 它是 lapply 的递归版本。

例如：

```
## I create some reproducible example

cluster1 <- list(a='a',b='b')
cluster2 <- list(c='aaa',d='bbb')
clusters <- list(cluster1,cluster2)
final <- list(clusters) 
```

所以使用`rapply`

```
rapply(final,f=print)
[1] "a"
[1] "b"
[1] "aaa"
[1] "bbb"
    a     b     c     d 
  "a"   "b" "aaa" "bbb" 
```

**OP编辑后**更新****

 **使用`lapply`，我遍历列表的名称。`[[`对于每个名称，我使用（`[`如果您想获取文件的名称和 heder 可以使用）获取元素列表，然后使用`write.table`. 这里我使用列表中元素的名称来创建文件名。在您的情况下，您的文件名将是 number.(1.txt,...)

```
 lapply(names(final$clusters),
                      function(x)
                             write.table(x=final$clusters[[x]],
                                         file=paste(x,'.txt',sep=''))) 
```**

# c# - 在 C# 中计算特征向量？

> ID：14784586
> 
> 赞同：0
> 
> 时间：2013-02-09T03:20:14.357
> 
> 标签：c#

有没有办法在 C# 中计算 EigenVectors 和 eigenvalue？

我发现了这个问题[Calculating EigenVectors in C# using Advanced Matrix Library in C#。网](https://stackoverflow.com/questions/4400203/calculating-eigenvectors-in-c-sharp-using-advanced-matrix-library-in-c-net)

但图书馆已被删除

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T03:26:41.513

ALGLIB 库可以计算它们并且它们支持 C# 和 C++。你可以[在这里查看](http://www.alglib.net/eigen/nonsymmetric/nonsymmetricevd.php)。它是开源的，他们对模块的描述是：

> RMatrixEVD 子例程查找一般矩阵的特征值和（如果需要）特征向量（右和/或左）。子程序使用矩阵A作为输入，返回特征值数组（实部和虚部）和特征向量数组（数组结构在子程序注释中有详细描述）。

# mysql - 使用条件语句连接多个表

> ID：14784587
> 
> 赞同：-2
> 
> 时间：2013-02-09T03:20:24.547
> 
> 标签：mysql, codeigniter, activerecord

我想在 CodeIgniter 中运行一个查询：

查询是

```
"SELECT * FROM td_album,td_image
     WHERE td_album.album_id=td_image.album_id
          AND td_album.album_id='$id'
          AND (td_image.image_name='$name' OR td_image.image_id='$image_id');" 
```

我使用活动记录在 CI 中编写了这个查询：

```
$query = $this->db->select('*')
                        ->from('td_image')
                        ->join('td_album', 'td_album.album_id = td_image.album_id')
                        ->like('td_image.image_id', $descp)
                        ->or_like('td_image.image_name', $descp)
                        ->like('td_album.album_id',$a_id)
                        ->get('', $this->limit, $this->offset); 
```

但我面临一个问题。假设我有两张 id`1`和`2`. 我只想显示专辑的图像`1`。上面的 CI AR 查询正在返回所有图像的结果，即显示两个相册的图像，这不应该发生。

实际上它应该显示来自album_id为1的相册中的图像。

现在我意识到上面的 CI AR 查询代表：

```
"SELECT * FROM td_album,td_image
         WHERE td_album.album_id=td_image.album_id
              AND td_album.album_id LIKE'$id'
              OR td_image.image_name LIKE'$name' AND td_image.image_id LIKE'$image_id';" 
```

所以它显示了所有的图像。我的要求是只显示一张专辑的图像。

所以，我需要 CI AR 查询等同于这个 MYSQL 查询

```
"SELECT * FROM td_album,td_image
             WHERE td_album.album_id=td_image.album_id
                  AND td_album.album_id LIKE'$id'
                  AND (td_image.image_name LIKE'$name' OR td_image.image_id LIKE'$image_id');" 
```

如何将最后一个查询转换为 CI AR？我想要一个具有`like() or_like()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:46:19.507

几天前我刚刚遇到了这个问题。Active Records 不支持在 () 中对 where 子句进行分组，因此您需要将 where 子句的那一部分放在变量中。

```
$where = "(td_image.image_name LIKE'$name' OR td_image.image_id LIKE'$image_id')";
$this->db->where($where); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:56:13.480

也许你可以只使用 $this->db->query('YOUR QUERY HERE'); 对于复杂的查询。

IE

```
$My_SQL_Query = $this->db->query("SELECT * FROM td_album,td_image WHERE td_album.album_id=td_image.album_id AND td_album.album_id LIKE'$id' AND (td_image.image_name LIKE'$name' OR td_image.image_id LIKE'$image_id')");

 foreach($My_SQL_Query->result() as $Row){
    echo "-------<br />".print_r($Row)."<br />-------<br /><br />";
 } 
```

希望这会有所帮助:)

# php - Missing: after property list

> ID：14784596
> 
> 赞同：2
> 
> 时间：2013-02-09T03:22:29.493
> 
> 标签：php, javascript, jquery

This code is giving me this error: `missing : after property list` where error comment is.

```
$("#jquery_jplayer_1-<?php echo $key.'-'.$j; ?>").jPlayer({
     ready: function () {
          $(this).jPlayer("setMedia", {
               <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
          });
     },
     $(this).bind($.jPlayer.event.play, function() { //ERROR HERE
          $(this).jPlayer("pauseOthers");
     },
     solution:"flash,html",
     swfPath: "jquery",
     supplied: "<?php echo $info['extension'];?>"
}); 
```

I want to know how to fix this error and am I implementing the `pauseOthers` function correctly by looking at this documentation: [DOCUMENTATION](http://www.jplayer.org/latest/developer-guide/#jPlayer-pauseOthers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:25:24.023

You're putting this call:

```
$(this).bind($.jPlayer.event.play, function() { //ERROR HERE
  $(this).jPlayer("pauseOthers");
} 
```

Smack in the middle of declaring an object literal:

```
{
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $info['extension'];?>"
} 
```

which is simply invalid JavaScript syntax. Perhaps you meant to put the `.bind()` call inside of the `ready` callback?

```
 $("#jquery_jplayer_1-<?php echo $key.'-'.$j; ?>").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
      });
      $(this).bind($.jPlayer.event.play, function() { 
          $(this).jPlayer("pauseOthers");
        });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $info['extension'];?>"
}); 
```

# c# - ASPX 中的简单 jQuery Hello World

> ID：14784605
> 
> 赞同：0
> 
> 时间：2013-02-09T03:24:59.070
> 
> 标签：c#, javascript, jquery, asp.net

我真的不明白为什么这个简单的例子不起作用：S 我有一个 WebApplication，其中有一个脚本：

```
function myAlert() {    
    $("#Button1").click(function () {
        alert("Hello world!");
    });
} 
```

在我的asp页面中，我有这个简单的代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Graph.aspx.cs" Inherits="WebApplication.Graph" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">  
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<asp:Button ID="Button1" runat="server" Text="Button" Width="100px"/>
</asp:Content> 
```

最后我在 cs 中注册了脚本：

```
 protected override void OnPreLoad(EventArgs e)
   {
        Page.ClientScript.RegisterClientScriptInclude("jQuery",
                        ResolveUrl(@"Scripts\jquery-1.4.1.js"));
        Page.ClientScript.RegisterClientScriptInclude("jMyAlert",
            ResolveUrl(@"Scripts\MyAlert.js"));
        // check if the start up script is already registered with a key
        if(!Master.Page.ClientScript.IsStartupScriptRegistered("jMyAlert"))
        {
            // since it is not registered, register the script
            Master.Page.ClientScript.RegisterStartupScript
                (this.GetType(), "jMyAlert", "myAlert();", true);
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "jMyAlert", "myAlert()", true);
    } 
```

我不明白这有什么问题。我试图将脚本直接包含在 aspx 中，但没有。然后我尝试到一个简单的 html 页面，它工作正常。

我想在我的页面中使用一个使用 jQuery 的绘图库，所以如果这样一个简单的例子给我带来了很多问题，我离成功还很远......哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:42:47.037

尝试在您使用的任何浏览器中检查调试控制台，以查看“$”是否未定义。听起来您在使用完整的 ASP.NET 方法时缺少 jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:45:51.563

该按钮的 Id 不会是`#Button1`因为使用了母版页。尝试查看源代码以了解我的意思。

为了解决这个问题，您需要能够在 JavaScript 中看到实际的 Id。

在你的`Page_Load`方法中是这样的：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(),
    "Button1Id", string.Format("var Button1Id = '{0}';", Button1.ClientID), true); 
```

将在您的页面中创建以下内容：

```
<script type="text/javascript">
//<![CDATA[
var Button1Id = 'Button1';//]]>
</script> 
```

这意味着您的`myAlert`方法需要如下所示：

```
function myAlert() {
    $("#" + Button1Id).click(function () {
        alert("Hello world!");
    });
} 
```

# javascript - MVC 4 - 在哪里加载 JS 脚本

> ID：14784616
> 
> 赞同：3
> 
> 时间：2013-02-09T03:27:06.177
> 
> 标签：javascript, jquery, asp.net-mvc

我对 MVC 相当陌生，我注意到加载我编写并尝试加载的 js 文件时存在很多不一致之处。

首先，这是我的网站设置方式：

```
 _Layout.cshtml (main page)
Index.cshtml
_MainMenu.cshtml (partial view) 
```

我将 MainMenu 呈现在 Layout 的主体中。所有 jquery 脚本都加载在布局的页脚中（我在某个地方读到了更可取的）。

当我渲染视图时，我会在视图顶部加载与该内容相关的任何特定脚本。

加载javascript文件的最佳方法是什么（无论是来自谷歌的cdn文件还是我的项目中包含的文件）？我应该将它们全部加载到我的布局页面的标题中，还是在我使用它们时加载它们？有人可以解释最佳实践并在 mvc 应用程序中管理/加载/使用 javascript 文件。

谢谢您的意见！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T03:36:30.653

如果您使用的是[Modernizr](http://modernizr.com/)，请将其加载到头部。在底部加载您的其他脚本，包括 jquery `body`（除非另有说明 - 某些脚本将需要`head`）。理想情况下，您的 _Layout.cshtml 应如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head stuff -->
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <!-- your entire body -->
    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

这将加载您的 jQuery 包，然后是您可以根据需要在每页加载自定义脚本的部分，例如（在其他`.cshtml`文件中）：

```
@section Scripts {
    @Scripts.Render("~/bundles/myNiceBundle")
} 
```

因此它会将您的自定义脚本放在 jQuery 下。

[将脚本放在页面底部的强制性原因](http://developer.yahoo.com/performance/rules.html#js_bottom)：

> 脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

# javascript - 遍历输入并将数据传递给 AJAX 函数

> ID：14784618
> 
> 赞同：1
> 
> 时间：2013-02-09T03:27:38.450
> 
> 标签：javascript

我正在循环几个输入并尝试将该数据附加到一个对象中，然后我可以将其传递给 AJAX 函数。我不太确定我做错了什么，但我不断收到一个错误消息，`"Uncaught SyntaxError: Unexpected token )"`我找不到这个额外的括号，我想我一定是做错了。

```
var dataObject = [];

$("#"buttonId).find("input").each(function(index) {

    inputId = $(this).attr("id").replace(buttonId, "");
    inputValue = $(this).val();

    var data = { 
       inputId : inputValue;
    }

    dataObject.push(data);
});

$.post(
    'ajax/' + buttonId + '.php', 
    {
        dataObject: dataObject
    },
    function (response) {
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:29:49.380

您缺少`+`字符串连接。

```
$("#"buttonId)
//   ^---- 
```

此外，您不能在对象文字中使用变量作为属性名称，试试这个：

```
var data = {}; 
data[inputId] = inputValue;
dataObject.push(data); 
```

您还可以使用`map`方法：

```
var dataObject = $("#" + buttonId).find("input").map(function() {
    var inputId = this.id.replace(buttonId, ""),
        obj = {};
    obj[inputId] = this.value;
    return obj;
}).get(); 
```

或[.serializeArray()](http://api.jquery.com/serializeArray/)方法。

# c++ - c++ set 容器的问题

> ID：14784620
> 
> 赞同：0
> 
> 时间：2013-02-09T03:27:46.470
> 
> 标签：c++, stl, set

当我尝试编译以下代码时：

```
 #include <iostream>
    #include <set>
    #include <vector>

    using namespace std;

    template <class T, class S> 
    class Property
    {
    public:
        pair<T,S> p;

        Property(T t, S s) { p = make_pair(t,s);}

    };

    int main()
    {
    set< Property<string, string> > properties;
    Property<string, string> name("name", "Andy");

    properties.insert(name);

    } 
```

我得到编译错误。但是，当我用向量替换 set 并因此使用 push_back 函数而不是 insert 函数时，一切正常。谁能解释我做错了什么？谢谢指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T05:09:08.917

[`std::set`](http://en.cppreference.com/w/cpp/container/set)将其值存储在排序的二叉树中，因此它需要知道如何比较它所保存的值。默认情况下，它[`std::less`](http://en.cppreference.com/w/cpp/utility/functional/less)用作比较函数，对于非专业的用户定义类型，它会尝试调用`operator<`. 因此，告诉集合如何比较您的对象的最简单方法是`operator<`为您的类定义一个：

```
template <class T, class S> 
class Property
{
public:
    pair<T,S> p;

    Property(T t, S s) { p = make_pair(t,s);}

    bool operator<(const Property<T,S>& rhs) const
    {
        return p < rhs.p;
    }
}; 
```

但是，还有其他方法可以告诉`std::set`您如何比较您的类型。一种是专门`std::less`为您的班级模板：

```
namespace std {
template<typename T,typename S>
struct less<Property<T, S> >
{
    bool operator()(const Property<T, S>& lhs, const Property<T,S>& rhs) const
    {
        return lhs.p < rhs.p;
    }
};
} 
```

另一种方法是将默认比较类型替换为具有正确签名的函数，或使用`operator()`正确签名定义的类。这就是事情开始变得丑陋的地方。

```
// Comparison function
template<typename T, typename S>
bool property_less_function(const Property<T,S>& lhs, const Property<T,S>& rhs)
{
    return lhs.p < rhs.p;
}

// Comparison functor
template<typename T, typename S>
struct PropertyLess
{
    bool operator()(const Property<T,S>& lhs, const Property<T,S>& rhs) const
    {
        return lhs.p < rhs.p;
    }
};

int main()
{
    // Set using comparison function. 
    // Have to pass the function pointer in the constructor so it knows
    // which function to call. The syntax could be cleaned up with some
    // typedefs.
    std::set<Property<std::string, std::string>, 
        bool(*)(const Property<std::string, std::string>&, 
                const Property<std::string, std::string>&)> 
            set1(&property_less_function<std::string, std::string>);

    // Set using comparison functor. Don't have to pass a value for the functor
    // because it will be default constructed.
    std::set<Property<std::string, std::string>, PropertyLess<std::string, std::string> > set2;
} 
```

请记住，无论您使用什么小于函数，该函数都必须为您的类型定义[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T03:39:16.993

为了在 中插入一些东西`std::set`，您需要`operator<`定义。

例如，这在 GCC 4.7.2 上编译得很好：

```
#include <iostream>
#include <set>
#include <vector>

using namespace std;

template <class T, class S> 
class Property
{
public:
    pair<T,S> p;
    Property(T t, S s) { 
        p = make_pair(t,s);
    }
    bool operator<(const Property& p2) const {
        //Something naive..
        return p < p2.p; 
    }

};

int main()
{
set< Property<string, string> > properties;
Property<string, string> name("name", "Andy");

properties.insert(name);

} 
```

一种替代方法是使用`std::unordered_set`，尽管这需要您为键和定义提供散列`operator==`。

# c++ - 如何在 C++ 的类中定义常量数组？

> ID：14784621
> 
> 赞同：2
> 
> 时间：2013-02-09T03:27:57.750
> 
> 标签：c++, arrays, class

我希望在一个类中定义一个数组，并将类的变量设置为数组的元素。下面的实现会导致分段错误：

```
class Grade {
    char MAP[];
    char *letter;
public:
    Grade();
    ~Grade();
    void set(int);
};
 Grade::Grade(){
    letter = new char;
    *letter = '\0';

    MAP[0] = 'A';
    MAP[1] = 'B';
    MAP[2] = 'C'; // result in segmentation fault

    MAP = { 'A', 'B', 'C'}; // result in segmentation fault
    }

Grade::~Grade(){
    delete letter;
    delete percent;
}

void Grade::set(int a){
    *letter = MAP[a];
} 
```

我应该如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:31:51.530

最快的方法是更改`char MAP[];`​​为`char MAP[3];`

代码中还有其他有趣的东西。

1）它没有按照给定的方式编译（你永远不会定义百分比是什么）。
2) 如果有人向您的 set 函数发送了超出地图范围的“int a”，会发生什么情况？（即：56 而不是 0、1 或 2）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T03:35:29.130

对您打算执行的代码进行一些假设，看来最简单的解决方法是替换当前的

```
char MAP[];
char *letter;

...

void Grade::set(int a){
    *letter = MAP[a];
} 
```

和

```
char letter_;

...

void Grade::set( int const grade )
{
    // Assuming grade in range 1 through 5 inclusive.
    letter_ = "ABCDEF"[grade - 1];
} 
```

顺便说一句，为宏保留所有大写标识符是个好主意。这样可以最大限度地减少意外文本替换的可能性。此外，它对眼睛更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T04:00:46.153

在数组的情况下，编译器要求您显式声明数组中的元素数量。这是为了确保在执行之前确定数组的大小。

因此，如下声明数组`char MAP[];`总是会导致编译错误。

您的问题的一个可能的解决方案是 [如 David D 所述] 将其声明为`char MAP[3]`;

但是，如果您的要求是动态分配，您可以将其声明为

```
char *MAP; 
```

并在构造函数内部分配所需的内存，如下所示：

> MAP = 新字符 [n];

其中 n 表示您需要在数组中的元素数。

注意：如果动态声明数组，则需要使用

```
 delete[] MAP; 
```

在销毁期间完成释放内存。

# python - 如何使用 for 循环在 python 中编写二维数组

> ID：14784623
> 
> 赞同：0
> 
> 时间：2013-02-09T03:28:10.257
> 
> 标签：python, python-3.x

我正在编写代码，我想在 python 中分配一个二维数组。

我的代码的算法是

```
For i = 0 To n
                A(i, 0) = 0
            Next i 
```

如何将上述代码转换为 python ？

如果它是一维数组，那么我可以使用

```
A = [0 for i in range(int(n))] 
```

但是，对于二维数组，我没有任何线索。我正在使用 python 3.3。

感谢您的关注。

贾巴巴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:29:31.850

嵌套它们。

```
[[0 for i in ...] for j in ...] 
```

# java - 将十进制转换为二进制 Java

> ID：14784630
> 
> 赞同：33
> 
> 时间：2013-02-09T03:29:40.783
> 
> 标签：java, binary, decimal

我正在尝试使用 Java 将用户输入的十进制数转换为二进制数。

我收到错误。

```
package reversedBinary;
import java.util.Scanner;

public class ReversedBinary {

public static void main(String[] args) {
    int number; 

    Scanner in = new Scanner(System.in);

    System.out.println("Enter a positive integer");
    number=in.nextInt();

    if (number <0)
        System.out.println("Error: Not a positive integer");
    else { 

        System.out.print("Convert to binary is:");
        System.out.print(binaryform(number));
}

}

private static Object binaryform(int number) {
    int remainder;

    if (number <=1) {
        System.out.print(number);

    }

    remainder= number %2; 
    binaryform(number >>1);
    System.out.print(remainder);

    { 
    return null;
} } } 
```

如何在 Java 中将十进制转换为二进制？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-06-24T20:57:14.907

`Integer.toBinaryString()`是一种内置方法，效果会很好。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-10-11T06:16:39.093

```
Integer.toString(n,8) // decimal to octal

Integer.toString(n,2) // decimal to binary

Integer.toString(n,16) //decimal to Hex 
```

其中 n = 十进制数。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-09T03:39:07.197

您的`binaryForm`方法陷入无限递归，您需要返回 if `number <= 1`：

```
import java.util.Scanner;

public class ReversedBinary {

    public static void main(String[] args) {
        int number;

        Scanner in = new Scanner(System.in);

        System.out.println("Enter a positive integer");
        number = in.nextInt();

        if (number < 0) {
            System.out.println("Error: Not a positive integer");
        } else {

            System.out.print("Convert to binary is:");
            //System.out.print(binaryform(number));
            printBinaryform(number);
        }
    }

    private static void printBinaryform(int number) {
        int remainder;

        if (number <= 1) {
            System.out.print(number);
            return; // KICK OUT OF THE RECURSION
        }

        remainder = number % 2;
        printBinaryform(number >> 1);
        System.out.print(remainder);
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-17T00:34:32.183

我只想为使用以下内容的任何人添加：

```
 String x=Integer.toBinaryString() 
```

获取二进制数字字符串并希望将该字符串转换为 int。如果你使用

```
 int y=Integer.parseInt(x) 
```

你会得到一个 NumberFormatException 错误。

我将 String x 转换为 Integers 所做的工作是首先将 String x 中的每个单独的 Char 转换为 for 循环中的单个 Char。

```
 char t = (x.charAt(z)); 
```

然后我将每个 Char 转换回一个单独的字符串，

```
 String u=String.valueOf(t); 
```

然后将每个字符串解析为一个整数。

Id figure Id post this，因为我花了一段时间才弄清楚如何将二进制（例如 01010101）转换为整数形式。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-07T12:34:49.773

```
/**
 * @param no
 *            : Decimal no
 * @return binary as integer array
 */
public int[] convertBinary(int no) {
    int i = 0, temp[] = new int[7];
    int binary[];
    while (no > 0) {
        temp[i++] = no % 2;
        no /= 2;
    }
    binary = new int[i];
    int k = 0;
    for (int j = i - 1; j >= 0; j--) {
        binary[k++] = temp[j];
    }

    return binary;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-20T13:51:25.480

```
public static void main(String h[])
{
    Scanner sc=new Scanner(System.in);
    int decimal=sc.nextInt();

    String binary="";

    if(decimal<=0)
    {
        System.out.println("Please Enter more than 0");

    }
    else
    {
        while(decimal>0)
        {

            binary=(decimal%2)+binary;
            decimal=decimal/2;

        }
        System.out.println("binary is:"+binary);

    }

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-17T16:36:55.130

以下将十进制转换为具有时间复杂度的二进制：O(n) 线性时间并且没有任何 java 内置函数

```
private static int decimalToBinary(int N) {
    StringBuilder builder = new StringBuilder();
    int base = 2;
    while (N != 0) {
        int reminder = N % base;
        builder.append(reminder);
        N = N / base;
    }

    return Integer.parseInt(builder.reverse().toString());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-09T10:02:07.010

如果要反转计算的二进制形式，可以使用 StringBuffer 类并简单地使用 reverse() 方法。这是一个示例程序，将解释其用途并计算二进制

```
public class Binary {

    public StringBuffer calculateBinary(int number) {
        StringBuffer sBuf = new StringBuffer();
        int temp = 0;
        while (number > 0) {
            temp = number % 2;
            sBuf.append(temp);
            number = number / 2;
        }
        return sBuf.reverse();
    }
}

public class Main {

    public static void main(String[] args) throws IOException {
        System.out.println("enter the number you want to convert");
        BufferedReader bReader = new BufferedReader(newInputStreamReader(System.in));
        int number = Integer.parseInt(bReader.readLine());

        Binary binaryObject = new Binary();
        StringBuffer result = binaryObject.calculateBinary(number);
        System.out.println(result);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-20T16:13:45.343

这可能看起来很傻，但如果你想试试效用函数

```
System.out.println(Integer.parseInt((Integer.toString(i,2)))); 
```

必须有一些实用方法可以直接完成，我不记得了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-19T00:34:38.800

在 C# 中，但它与在 Java 中相同：

```
public static void findOnes2(int num)
{
    int count = 0;      // count 1's 
    String snum = "";   // final binary representation
    int rem = 0;        // remainder

    while (num != 0)
    {
        rem = num % 2;           // grab remainder
        snum += rem.ToString();  // build the binary rep
        num = num / 2;
        if (rem == 1)            // check if we have a 1 
            count++;             // if so add 1 to the count
    }

    char[] arr = snum.ToCharArray();
    Array.Reverse(arr);
    String snum2 = new string(arr);
    Console.WriteLine("Reporting ...");
    Console.WriteLine("The binary representation :" + snum2);
    Console.WriteLine("The number of 1's is :" + count);
}

public static void Main()
{
    findOnes2(10);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-19T00:17:16.297

```
public static void main(String[] args)
{
    Scanner in =new Scanner(System.in);
    System.out.print("Put a number : ");
    int a=in.nextInt();
    StringBuffer b=new StringBuffer();
    while(a>=1)
    {
      if(a%2!=0)
      {
        b.append(1);
       }
      else if(a%2==0)
      {
         b.append(0);
      }
      a /=2;
    }
    System.out.println(b.reverse());
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-12-12T03:48:20.767

你所有的问题都可以用一条线来解决！要将我的解决方案合并到您的项目中，只需删除您的`binaryform(int number)`方法，然后替换`System.out.print(binaryform(number));`为`System.out.println(Integer.toBinaryString(number));`.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-25T11:30:54.653

**不使用 Integer.ParseInt() 的二进制到十进制：**

```
import java.util.Scanner;

//convert binary to decimal number in java without using Integer.parseInt() method.

public class BinaryToDecimalWithOutParseInt {

    public static void main(String[] args) {

        Scanner input = new Scanner( System.in );
        System.out.println("Enter a binary number: ");

        int  binarynum =input.nextInt();
        int binary=binarynum;

        int decimal = 0;
        int power = 0;

        while(true){

            if(binary == 0){

                break;

            } else {

                int temp = binary%10;
                decimal += temp*Math.pow(2, power);
                binary = binary/10;
                power++;

            }
        }
        System.out.println("Binary="+binarynum+" Decimal="+decimal); ;
    }

} 
```

**输出：**

输入一个二进制数：

1010

二进制=1010 十进制=10

* * *

**使用 Integer.parseInt() 将二进制转换为十进制：**

```
import java.util.Scanner;

//convert binary to decimal number in java using Integer.parseInt() method.
public class BinaryToDecimalWithParseInt {

    public static void main(String[] args) {

        Scanner input = new Scanner( System.in );

        System.out.println("Enter a binary number: ");
        String binaryString =input.nextLine();

        System.out.println("Result: "+Integer.parseInt(binaryString,2));

    }

} 
```

**输出：**

输入一个二进制数：

1010

结果：10

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-17T12:24:33.817

一个相当简单而不是高效的*程序*，但它可以完成工作。

```
 Scanner sc = new Scanner(System.in);
        System.out.println("Give me my binaries");
        int str = sc.nextInt(2);
        System.out.println(str); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-25T08:48:19.720

```
public static String convertToBinary(int dec)
{
    String str = "";
    while(dec!=0)
    {
        str += Integer.toString(dec%2);
        dec /= 2;
    }
    return new StringBuffer(str).reverse().toString();
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-19T09:46:38.843

```
/**
 * converting decimal to binary
 *
 * @param n the number
 */
private static void toBinary(int n) {
    if (n == 0) {
        return; //end of recursion
    } else {
        toBinary(n / 2);
        System.out.print(n % 2);
    }
}

/**
 * converting decimal to binary string
 *
 * @param n the number
 * @return the binary string of n
 */
private static String toBinaryString(int n) {
    Stack<Integer> bits = new Stack<>();
    do {
        bits.push(n % 2);
        n /= 2;
    } while (n != 0);

    StringBuilder builder = new StringBuilder();
    while (!bits.isEmpty()) {
        builder.append(bits.pop());
    }
    return builder.toString();
} 
```

或者你可以使用`Integer.toString(int i, int radix)`

**例如：（**将 12 转换为二进制）

```
Integer.toString(12, 2) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-01-22T12:27:56.297

实际上，您可以将其编写为递归函数。每个函数调用都返回它们的结果并添加到前一个结果的尾部。可以使用 java 编写此方法，如下所示：

```
public class Solution {

    private static String convertDecimalToBinary(int n) {
        String output = "";
        if (n >= 1) {
            output = convertDecimalToBinary(n >> 1) + (n % 2);
        }

        return output;
    }

    public static void main(String[] args) {
        int num = 125;
        String binaryStr = convertDecimalToBinary(num);

        System.out.println(binaryStr);
    }

} 
```

让我们看看上面的递归是如何工作的：

[![在此处输入图像描述](../Images/3f7fd862ec0ff0505325765de16ff419.png)](https://i.stack.imgur.com/IH260.png)

调用一次 convertDecimalToBinary 方法后，它会调用自己，直到数字的值小于 1 并将所有连接的结果返回到它第一次调用的地方。

**参考：**

Java - 位和位移运算符[https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-14T12:59:17.903

更好的方法：

```
public static void main(String [] args) throws IOException {
        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
        int t = Integer.parseInt(bf.readLine().trim());
        double ans = 0;
        int i=0;

        while(t!=0){
           int digit = t & 1;
           ans = ans + (digit*Math.pow(10,i));
           i++;
           t =t>>1;
        }
        System.out.println((int)ans);
    } 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-04-23T22:37:50.080

我自己解决了这个问题，我想分享我的答案，因为它包括二进制反转然后转换为十进制。我不是一个非常有经验的编码器，但希望这对其他人有帮助。

我所做的是在转换二进制数据时将其推送到堆栈中，然后将其弹出以反转它并将其转换回十进制。

```
import java.util.Scanner;
import java.util.Stack;

public class ReversedBinary 
{
    private Stack<Integer> st;

    public ReversedBinary()
    {
        st = new Stack<>();
    }

    private int decimaltoBinary(int dec)
    {
        if(dec == 0 || dec == 1)
        {
            st.push(dec % 2);
            return dec;
        }

        st.push(dec % 2);

        dec = decimaltoBinary(dec / 2);        

        return dec;
    }

    private int reversedtoDecimal()
    {
        int revDec = st.pop();
        int i = 1;

        while(!st.isEmpty())
        {
            revDec += st.pop() * Math.pow(2, i++);
        }

        return revDec;
    }

    public static void main(String[] args)
    {
        ReversedBinary rev = new ReversedBinary();

        System.out.println("Please enter a positive integer:");

        Scanner sc = new Scanner(System.in);
        while(sc.hasNextLine())
        {
            int input = Integer.parseInt(sc.nextLine());
            if(input < 1 || input > 1000000000)
            {
                System.out.println("Integer must be between 1 and 1000000000!");
            }
            else
            {
                rev.decimaltoBinary(input);
                System.out.println("Binary to reversed, converted to decimal: " + rev.reversedtoDecimal());
            }
        }

    }
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-07-14T14:04:08.920

```
import java.util.*;

public class BinaryNumber 
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter the number");
        int n = scan.nextInt();
        int rem;
        int num =n; 
        String str="";
        while(num>0)
        {
            rem = num%2;
            str = rem + str;
            num=num/2;
        }
        System.out.println("the bunary number for "+n+" is : "+str);
    }
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-08-15T13:10:37.120

这是一个非常基本的程序，我在纸上写了一个一般程序后得到了这个。

```
import java.util.Scanner;

    public class DecimalToBinary {

        public static void main(String[] args) {
            Scanner input = new Scanner(System.in);
            System.out.println("Enter a Number:");
            int number = input.nextInt();
            while(number!=0)
            {
                if(number%2==0) 
                {
                    number/=2;
                    System.out.print(0);//Example: 10/2 = 5     -> 0
                }
                else if(number%2==1) 
                {
                    number/=2;
                    System.out.print(1);// 5/2 = 2              -> 1
                }
                else if(number==2)
                {
                    number/=2;
                    System.out.print(01);// 2/2 = 0             -> 01   ->0101
                }
            }
        }
    } 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2016-06-01T00:00:10.633

```
//converts decimal to binary string
String convertToBinary(int decimalNumber){  
    String binary="";
    while(decimalNumber>0){
        int remainder=decimalNumber%2;
        //line below ensures the remainders are reversed
        binary=remainder+binary;
        decimalNumber=decimalNumber/2;
    }
    return binary;

} 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-01-26T16:29:05.963

最快的解决方案之一：

```
public static long getBinary(int n)
    {
        long res=0;
        int t=0;
        while(n>1)
        {
            t= (int) (Math.log(n)/Math.log(2));
            res = res+(long)(Math.pow(10, t));
            n-=Math.pow(2, t);
        }
        return res;
    } 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2017-11-02T22:54:02.527

使用 StringBuilder 在正在构建的十进制字符串前面使用 insert() 效果更好，无需调用 reverse()，

```
static String toBinary(int n) {
    if (n == 0) {
        return "0";
    }

    StringBuilder bldr = new StringBuilder();
    while (n > 0) {
        bldr = bldr.insert(0, n % 2);
        n = n / 2;
    }

    return bldr.toString();
} 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2017-11-18T12:48:37.067

好吧，你可以像这样使用while循环，

```
import java.util.*;
public class DecimalToBinaryDemo
{
    // this function converts decimal to binary
    static void toBinary(int num)
    {
       // here we are storing binary number
       int binaryNumber[] = new int[1000];
       // "count" variable is counter for binary array
       int count = 0;
       while(num > 0)
       {
          // storing remainder in binary array
          binaryNumber[count] = num % 2;
          num = num / 2;
          count++;
       }
       // here we are printing binary in reverse order
       for(int a = count - 1; a >= 0; a--)
          System.out.print(binaryNumber[a]);
    }
    public static void main(String[] args)
    {
       int number = 20;
       toBinary(number);
   }
} 
```

**输出：** 10100

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2015-04-03T03:32:27.710

不需要任何 java 内置函数。简单的递归就可以了。

```
public class DecimaltoBinaryTest {
     public static void main(String[] args) {
        DecimaltoBinary decimaltoBinary = new DecimaltoBinary();
        System.out.println("hello " + decimaltoBinary.convertToBinary(1000,0));
    }

}

class DecimaltoBinary {

    public DecimaltoBinary() {
    }

    public int convertToBinary(int num,int binary) {
        if (num == 0 || num == 1) {
            return num;
        } 
        binary = convertToBinary(num / 2, binary);
        binary = binary * 10 + (num % 2);
        return binary;
    }
} 
```

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2016-06-02T18:10:48.833

这是十进制到二进制的三种不同方式的转换

```
import java.util.Scanner;
public static Scanner scan = new Scanner(System.in);

    public static void conversionLogical(int ip){           ////////////My Method One 
        String str="";
        do{
            str=ip%2+str;
            ip=ip/2;

        }while(ip!=1);
        System.out.print(1+str);

    }
    public static void byMethod(int ip){                /////////////Online Method
        //Integer ii=new Integer(ip);
        System.out.print(Integer.toBinaryString(ip));
    }
    public static String recursion(int ip){             ////////////Using My Recursion

        if(ip==1)
            return "1";
        return (DecToBin.recursion(ip/2)+(ip%2));

    }

    public static void main(String[] args) {            ///Main Method

        int ip;         
        System.out.println("Enter Positive Integer");
        ip = scan.nextInt();

        System.out.print("\nResult 1 = ");  
        DecToBin.conversionLogical(ip);
        System.out.print("\nResult 2 = ");
        DecToBin.byMethod(ip);
        System.out.println("\nResult 3 = "+DecToBin.recursion(ip));
    }
} 
```

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2016-08-27T22:18:11.600

```
 int n = 13;
    String binary = "";

    //decimal to binary
    while (n > 0) {
        int d = n & 1;
        binary = d + binary;
        n = n >> 1;
    }
    System.out.println(binary);

    //binary to decimal
    int power = 1;
    n = 0;
    for (int i = binary.length() - 1; i >= 0; i--) {
        n = n + Character.getNumericValue(binary.charAt(i)) * power;
        power = power * 2;
    }

    System.out.println(n); 
```

# windows-xp - Windows XP 中的复制命令语法错误

> ID：14784635
> 
> 赞同：1
> 
> 时间：2013-02-09T03:31:31.980
> 
> 标签：windows-xp, command-prompt

基本上我只是想创建一个`batch file`将一个文件从一个位置复制到 Windows XP 中的另一个位置，如下面的代码，但**失败了**。我可以知道为什么吗？

```
copy C:/Directory_A/the_file D:/Directory_B 
```

当我执行时，`batch file`我在输出中看到：

```
The syntax of the command is incorrect. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:35:04.577

尝试使用反斜杠

```
copy C:\Directory_A\the_file D:\Directory_B 
```

# json - 如何编写测试以通过spring mvc测试将json发送到@RequestBody方法

> ID：14784636
> 
> 赞同：2
> 
> 时间：2013-02-09T03:31:48.580
> 
> 标签：json, spring, spring-mvc

我的测试

```
 ObjectMapper objectMapper = new ObjectMapper();
  objectMapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);
  byte[] bytes = objectMapper.writeValueAsBytes(webFile);
  this.mockMvc.perform(post("/loadFile.json").accept(MediaType.APPLICATION_JSON).contentType(MediaType.APPLICATION_JSON).content(bytes)).andExpect(status().isOk()); 
```

我的控制器

```
@RequiredPermission(RequiredPermission.OperationType.viewProject)
@RequestMapping(value = "/loadFile", method = RequestMethod.POST)
public
@ResponseBody
ModelAndView load(@RequestBody WebFile document)
         { ... } 
```

但总是得到 400 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:38:18.377

在您的测试中，您使用的是 URL `/loadFile.json`，但在您的控制器中，您有`/loadFile`. 如果不将测试类中的 url 更改为`/loadFile`. 测试类中的所有其他代码似乎都可以。

# algorithm - 范围最小查询 方法（最后步骤）

> ID：14784638
> 
> 赞同：6
> 
> 时间：2013-02-09T03:31:56.553
> 
> 标签：algorithm, rmq

接我上一个问题“[范围最小查询方法（从树到受限RMQ）](https://stackoverflow.com/questions/14777743/range-minimum-query-on-o1-approach-from-tree-to-restricted-rmq) ”（建议阅读）

同样，在 TopCoder 上的[本教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Another%20easy%20solution%20in%20O%28N%20logN,%20O%28logN%29)中，我到处都有一些问题，我希望有人能解决它们。

因此，我将 RMQ（最小范围查询）问题转换为 LCA（最低公共祖先）问题，然后将其转换回来，我可以得到一个简化的数组。（两种变换都可以在教程中找到，简化的数组是“从LCA到RMQ”中讨论的数组L）

无论如何，我可以使用 Euler Tour 得到那个数组，这是所有计算的核心部分。

首先，我需要通过使整个数组仅包含 1 和 -1 来使其更简单，所以这就是我所做的`Ls[i] = L[i] - L[i-1]`：

第二步实际上是分区，这很简单，但是第三步让我感到困惑。

> 令 A'[i] 为 A 中第 i 个块的最小值，B[i] 为该最小值在 A 中的位置。

A指的是这句话中的L数组，所以最小值总是1或-1，并且会有多个1和-1。这让我很困惑，因为我认为这不会让计算变得更容易。

第四步，

> 现在，我们使用第 1 节中描述的 ST 算法对 A' 进行预处理。这将花费 O(N/l * log(N/l)) = O(N) 时间和空间。

如果 A' 只保留 1 和 -1 的记录，那么在上面做任何事情似乎都没用。

最后一步，

> 为了索引表 P，预处理 A 中每个块的类型并将其存储在数组 T[1, N/l] 中。块类型是通过将 -1 替换为 0 并将 +1 替换为 1 获得的二进制数。

这是什么意思？计算每种组合？比如`000`———— `001`……？

它看起来像多个问题，但我希望有人可以引导我完成最后的这些步骤。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T03:54:45.993

希望这有助于解释事情。

> A指的是这句话中的L数组，所以最小值总是1或-1，并且会有多个1和-1。这让我很困惑，因为我认为这不会让计算变得更容易。

我认为作者在这里混淆了术语。在这种情况下，我相信数组**A**指的是原始值数组，然后再将它们预处理为 -1 和 +1。这些值最好放在周围，因为为原始数组的每个块计算最小值使得执行 RMQ 更快。稍后再谈。现在，不要担心 +1 和 -1 值。它们稍后会发挥作用。

> 如果 A' 只保留 1 和 -1 的记录，那么在上面做任何事情似乎都没用。

确实如此。然而，这里的 A' 在每个块被预处理为 -1 和 +1 值*之前*保存了它们的最小值，所以这实际上是一个需要解决的有趣问题。同样，-1 和 +1 步骤还没有发挥作用。

> 为了索引表 P，预处理 A 中每个块的类型并将其存储在数组 T[1, N/l] 中。块类型是通过将 -1 替换为 0 并将 +1 替换为 1 获得的二进制数。

这就是 -1 和 +1 值的来源。这一步背后的关键思想是，对于小块大小，一个块中 -1 和 +1 的可能组合并不多。例如，如果块大小是 3，那么可能的块是

```
---
--+
-+-
-++
+--
+-+
++-
+++ 
```

在这里，我使用 + 和 - 来表示 +1 和 -1。

您正在阅读的文章提供了以下技巧。不要使用 -1 和 +1，而是使用二进制 0 和 1。这意味着可能的块是

```
000 = 0
001 = 1
010 = 2
011 = 3
100 = 4
101 = 5
110 = 6
111 = 7 
```

这种方案的优点是双重的。首先，由于只有有限多个块，因此可以为每个可能的块预先计算该块内任何一对索引的 RMQ 答案。其次，由于每个块都可以解释为一个整数，因此可以将这些问题的答案存储在一个以整数为键的数组中，其中每个整数都是通过将块的 -1 和 +1 值转换为 0 和 1 得到的。

希望这可以帮助！

# python - 如何确保 facebook channel.html javascript 缓存在 Django 中？

> ID：14784639
> 
> 赞同：1
> 
> 时间：2013-02-09T03:32:08.640
> 
> 标签：python, django, facebook, caching, connect

我是 Django 新手，正在尝试构建一个使用 FB API 的应用程序。为了不必每次在我的应用程序中加载页面时都必须登录，Facebook 建议我为 PHP 用户使用包含以下内容的频道文件：

```
<?php
  $cache_expire = 60*60*24*365;
  header("Pragma: public");
  header("Cache-Control: maxage=".$cache_expire);
  header('Expires: '.gmdate('D, d M Y H:i:s', time()+$cache_expire).' GMT');
?>

<script src="//connect.facebook.net/en_US/all.js"></script> 
```

我想知道如何对我的 Django 应用程序产生同样的效果。我不想使用任何过多的 Django-/Python-Facebook 集成，因为它们通常包含太多不必要的功能，这些功能会影响我的后端，或者我不喜欢的功能太少。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:36:51.650

您可以在 HTTP 响应函数上设置响应标头。因此，如果您想模拟该 PHP 代码，您可以在视图中执行以下操作：

```
def channel(request):
    response = HttpResponse('<script src="//connect.facebook.net/en_US/all.js"></script>')
    response['Pragma'] = 'public'
    ...
    return response 
```

# php - 从 mysql 服务器读取数据到“XCODE 4.6”

> ID：14784640
> 
> 赞同：0
> 
> 时间：2013-02-09T03:32:11.970
> 
> 标签：php, ios5, ios6, xcode4.5, webservice-client

我是 ios 的入门者。我需要查看完整的代码，以将数据从 mysql 服务器读取到“XCODE 4.6”中的 iPhone/ipad 中。我阅读了 StackOverflow 中几乎所有类似的页面，但我现在很困惑，它们无法正常工作！我浏览了许多其他网站，但它们已经过时且已被弃用。有人可以帮帮我吗？

我需要标准和最新的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:16:33.587

最后我制作了代码并且它工作了！：

> NSURL *url = [NSURL URLWithString:@" [http://www.test.php](http://www.test.php) "];
> 
> NSString *return= [[NSString alloc]initWithContentsOfURL:url];
> 
> NSData *jsData = [返回 dataUsingEncoding:NSUTF32BigEndianStringEncoding];
> 
> NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsData 选项:NSJSONReadingMutableContainers 错误:NULL];

但是 initWithContentsOfURL 已被弃用并发出警告。相反，我们必须使用：

> *   (id)initWithContentsOfURL:(NSURL *)url 编码:(NSStringEncoding)enc 错误:(NSError ** )error 或
> *   (id)initWithContentsOfURL:(NSURL *)url usedencoding:(NSStringEncoding)enc 错误:(NSError ** )error

但它给了我一个 BAD ACCESS 错误。

# jquery - IE：点击同一个按钮连续多次发送同一个AJAX请求

> ID：14784648
> 
> 赞同：0
> 
> 时间：2013-02-09T03:33:31.593
> 
> 标签：jquery, ajax, internet-explorer

我遇到了一个奇怪的问题。我已经使用 jquery`one()`方法将 click 方法绑定到 div 。

但是，如果我连续点击这个 div，那么在 IE 中它会执行`AJAX`3-4 次方法。如果我禁用`AJAX`调用并编写其他一些 DOM 操作函数，它只会按预期执行一次。

我不知道为什么，但是当我包含`AJAX`call 时出现问题。

我在[“http://jsfiddle.net/MCY4A/”](http://jsfiddle.net/MCY4A/)创建了示例代码，但不确定如何在 jsfiddle 中进行 AJAX 调用

有人请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:58:33.490

我可能无法正确理解您的要求，但我假设您只想在某些 div 单击时调用 ajax 请求，您可以使用以下代码：

```
//declare global var countReq

var reqSend=false;

$(document).ready(function(){
    $('#hitme').click(function(){
    if(!reqSend)    {
            $.ajax({
                  type: "POST",
                  url: 'http://jsfiddle.net/',
                }).success(function(res) {
                    $("#a").insert("<p>success</p>");
                }).error(function(res) {
                    $("#a").insert("<p>error</p>");
                });
reqSend=true;
}
    });
}); 
```

# c - C 计数器意外重置

> ID：14784652
> 
> 赞同：1
> 
> 时间：2013-02-09T03:33:43.907
> 
> 标签：c, arrays, counter, ansi

下面的代码应该从字符串 s 中获取数据并将其拆分为以空格为分隔符的双精度数组数据。当 j 计数器应该递增以终止函数时，它会意外重置

传递给函数的 char *s 是

```
0.0000000E00     0.0000000E00       -1.9311798E+03       8.0321814E+02       8.0294336E+02 
```

下面的诊断 printf 函数打印：

```
0.000000 | 1
0.000000 | 2
-1931.179800 | 3
803.218140 | 4
802.943360 | 1 
```

它会导致程序崩溃

```
void split_data(char *s, double *data, int fields) {
  char buff[DATA_MAX];
  int j = 0, i;

  for(; *s; *s++) {
    while(*s == ' ' || *s == '\t') /* trim leading white space */
      *s++;

    i = 0;
    while(!(*s == ' ' || *s == '\t'))
      buff[i++] = *s++;
    buff[i] = 0;

    data[j++] = atof(buff);
    printf("%lf | %d\n", data[j-1], j);

    if(j == fields)
      return;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:38:44.697

你可能写得`buff`太短了，所以你的程序超出了缓冲区的末尾（可能只有一个字符）。这将导致它覆盖下一个堆栈变量，可能是`j`.

尝试增加`DATA_MAX`，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:40:09.873

你的循环：

```
 while(!(*s == ' ' || *s == '\t'))
      buff[i++] = *s++; 
```

还应该包含对字符串结尾的测试`s`。例如`while(!(*s == ' ' || *s == '\t') && *s) ...`.

否则，`buff`将继续充满“噪音”，直到溢出。然后堆栈上的其他变量将开始被破坏，例如`j`. 但是这种行为非常依赖于编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:45:23.103

如果`fields`大于字符数组中的字符串数，则程序可能会崩溃，因为您的退出条件仅基于 j 与 的比较`fields`。您可以尝试在您的代码中进行以下修改吗？

```
if((j == fields) || (*s == '\0'))
    return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T03:50:05.843

问题是你的第二个循环：

```
while(!(*s == ' ' || *s == '\t'))
  buff[i++] = *s++;
buff[i] = 0; 
```

除非你到达 '\t' 的 ' ' ，否则你会一直填充缓冲区，不幸的是，字符串终止字符 '\0' 都不是，所以在到达字符串末尾后你仍然继续填充。如果您很幸运，您继续阅读的内存包含任何 ' ' '\t' 并且您的循环将在缓冲区满之前停止。

为了解决您的问题，您还应该在第二个循环中检查 '\0' - 如果您在第一个循环中执行它会更好（以防没有足够的值来解析）或添加额外的 ' ' 或 '\t ' 到字符串的末尾。

# google-app-engine - 谷歌应用引擎上来自 web2py 的神秘“欢迎”应用

> ID：14784654
> 
> 赞同：1
> 
> 时间：2013-02-09T03:34:31.090
> 
> 标签：google-app-engine, web2py

我第一次在谷歌应用引擎上部署一个应用程序。

它似乎已经成功，但是当我转到我的应用程序 url 时，我会从默认安装定向到传统的“欢迎”页面。

我没有“欢迎”应用程序。我的 routes.py 文件中没有列出任何关于“欢迎”的内容。

那么为什么我会被定向到 myURL/welcome/default/index 呢？

我什至无法输入我知道我想访问的直接 url，而不会出现“无效请求”错误。

这也仅在我从appspot.com 上传和运行时发生，当我使用本地开发引擎时一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:47:56.917

根据[调度](http://web2py.com/books/default/chapter/29/04#Dispatching)规则，如果你去一个URL没有指定一个应用程序，它会默认`init`应用程序，如果没有找到，它会寻找`welcome`应用程序。此外，如果您`app.example.yaml`在部署时使用标准配置文件，该`welcome`应用程序将包含在您的部署中（请参阅本书的[GAE 部署](http://web2py.com/books/default/chapter/29/13#Configuration)部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T11:49:51.460

您必须调用您的应用程序：“init”并将其部署在 GAE 中。

例如，如果您已经开发`yourweb2pyapp`，您的主页将是`yourweb2pyapp/default/index`，您在 GAE 中的主页将是`yourGAEapp.appspot.com/yourweb2pyapp/default/index`。

但是，如果您在浏览器中编写代码，`yourGAEapp.appspot.com`就会`yourGAEapp.appspot.com/welcome/default/index`出现问题。

最简单的解决方案是您将应用程序称为“init”，而不是`yourweb2pyapp`在 GAE 中部署它时。所以你的新主页面和默认页面将是`yourGAEapp.appspot.com/init/default/index`

您可以打包`yourweb2pyapp`然后将其导入为`init.`

您必须小心内部链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T20:08:46.120

答案不多，因为我仍然不知道路由是如何发生的，但是我在 2 个位置有 web2py 应用程序。在我的本地机器和网络托管服务器上。我一直在将版本从托管服务器上传到 GAE。这个失败了。当我从本地机器上传一个时，事情开始起作用了。

所以我必须在我找不到的两者之间存在差异。

# jakarta-ee - 部署到 websplehere 应用服务器 @ localhost (WTE)

> ID：14784656
> 
> 赞同：1
> 
> 时间：2013-02-09T03:34:39.460
> 
> 标签：jakarta-ee, websphere-7, rational-team-concert

我正在尝试将我的应用程序安装到本地主机中的 Websphere7 应用服务器 (WTE) 中。

耳朵文件是通过控制台部署的，但似乎我可以在启动服务器后在浏览器中测试应用程序。
有一个`index.jsp`，但是当我尝试访问它时，我不断得到`http 404 error`（路径上没有错误，因为该应用程序正在另一台服务器上运行），我必须缺少一个配置文件。

```
java.io.FileNotFoundException: JSPG0036E: Failed to find resource /utilities/pageerror.jsp
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.findWrapper(AbstractJSPExtensionProcessor.java:395)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.handleRequest(AbstractJSPExtensionProcessor.java:349)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3944)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:51:00.847

我终于修好了，ear文件没有正确构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:37:00.613

在 jazz.bet RTC 上下文中，您只有两个线程提及此错误：

*   “[错误获取项目：未找到 - JSP 错误代码 404](https://jazz.net/forum/questions/53353/error-fetching-item-not-found-error-code-404-with-jsp) ”：建议在 Websphere 服务器上设置以下参数：
    `com.ibm.ws.webcontainer.invokefilterscompatibility=true`
*   “[需要帮助才能访问查看测试计划和查看测试用例选项](https://jazz.net/forum/questions/69984/need-help-to-access-view-test-plans-amp-view-test-case-opt)”：

> 我已经解决了这个问题，只需将浏览器默认语言更改为英语而不是将其保留为葡萄牙语。

正如[OP mi3 所](https://stackoverflow.com/users/1884445/mi3) [提到](https://stackoverflow.com/a/15048796/6309)的，这里的根本原因是无效的（错误构建的）耳朵。

# c# - 从网页获取html结果

> ID：14784658
> 
> 赞同：0
> 
> 时间：2013-02-09T03:35:04.637
> 
> 标签：c#, .net

我计划创建一个 movil 应用程序（为了好玩），它应该使用这个网页（[http://consultawebvehiculos.carabineros.cl/index.php](http://consultawebvehiculos.carabineros.cl/index.php)）的结果。有什么方法可以在我的网络代码中创建浏览器实例并读取此结果并使用 Web 服务发布它.. 类似于：

```
var IE= new broswer("http://consultawebvehiculos.carabineros.cl/index.php");
var result=IE.FindElementByID("txtIdentityCar").WriteText(YourIdentityCar);
publicToWebSerivce(result); 
```

更新：使用 Fiddler 我可以看到 http 帖子是这样的：

```
POST http://consultawebvehiculos.carabineros.cl/index.php HTTP/1.1
Host: consultawebvehiculos.carabineros.cl
Connection: keep-alive
Content-Length: 61
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://consultawebvehiculos.carabineros.cl
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 (KHTML, like Gecko)      Chrome/24.0.1312.57 Safari/537.17
Content-Type: application/x-www-form-urlencoded
Referer: http://consultawebvehiculos.carabineros.cl/index.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-ES,es;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

accion=buscar&txtLetras=CL&txtNumeros1=sk&txtNumeros2=12&vin= 
```

可能是我需要一些像 webclient 这样的 .Net 类才能连接到 php 页面……不确定。

更新：我终于找到了使用 Fiddler 来了解总参数的解决方案，并且我使用了来自[http://www.hanselman.com/blog/HTTPPOSTsAndHTTPGETsWithWebClientAndCAndFakingAPostBack.aspx的代码](http://www.hanselman.com/blog/HTTPPOSTsAndHTTPGETsWithWebClientAndCAndFakingAPostBack.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:52:14.377

如果您只是对抓取页面感兴趣，我建议使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。

如果您还想显示页面，则可以使用[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T23:29:21.660

我们一直在使用[http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)来完成类似的任务。它允许您发送请求、接收响应/状态代码/等。

（它是一个 Java 库，因此您可以通过 google 搜索 .Net 端口或使用转换器将 Java 程序集转换为 .Net 程序集 - 请参阅[http://blog.stevensanderson.com/2010/03/30/using-htmlunit- on-net-for-headless-browser-automation/](http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/)用于指导。我们使用了转换方法）。

# c - 在 lubuntu 上使用 gcc 编译器运行 c

> ID：14784660
> 
> 赞同：0
> 
> 时间：2013-02-09T03:35:26.957
> 
> 标签：c, unix, ubuntu

我的中级 prg 课程落后了大约一周（由于 ram 问题），我只需要问一个非常非常简单的问题。

我用什么命令来运行？

我在 lubuntu 上使用 lxterminal。不确定它是否重要，但我使用 gvim 进行编码。我制作了文件goodhello.c

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
  printf("Hello World!\n");
  return EXIT_SUCCESS;
} 
```

我编译使用`gcc blah/goodhello.c`没有任何错误（它没有报告任何内容）。

我如何从这里运行它？

一个`a.out`文件出现在父目录中（这有点奇怪），但是当我写`a.out`它时说找不到命令。当我写 make a.out 时，它没有写任何事情要做。`make goodhello.c`--> `nothing to be done`。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:38:20.630

您需要指定可以找到程序的目录。这通常是您所展示情况下的当前目录，并用`./`. 所以你应该可以使用

```
./a.out 
```

正如@HunterMcMillen 指出的那样，必须使用 ./ 的原因是，与 Windows 不同，基于 *nix 的系统不会在搜索路径中包含当前目录。（在 Windows 中，您可以通过在同一目录中键入其名称来运行可执行文件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T03:38:46.867

您的 shell 不知道在哪里可以找到您尝试运行的文件，所以只需输入它：

```
./a.out 
```

其中 ./ 是当前目录。

# asp.net-mvc - MVC 4 Web API 路由问题

> ID：14784663
> 
> 赞同：2
> 
> 时间：2013-02-09T03:35:34.490
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

这是我第一次使用 MVC Web API 进行牛仔竞技表演，我在理解路由方面时遇到了一些问题。我想要一个类似于thise的uri模板：

1.  [http://google.com/api/AzureQueue](http://google.com/api/AzureQueue) - 获取队列中的所有项目
2.  [http://google.com/api/AzureQueue/DeviceChart/](http://google.com/api/AzureQueue/DeviceChart/) - GET 返回设备和代理的处理时间

[http://google.com/api/](http://google.com/api/) {controller}/{id} <-- 默认 [http://google.com/api/](http://google.com/api/) {controller}/{chartType}/{id} 其中 ID 是可选的

我苦苦挣扎的地方是： 1\. 我在 WebApiConfig.cs 文件中放了什么法式 toash 2\. 我是否需要在我的控制器中做一些特别的事情，例如。指定非动作和动作、动作名称等

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:40:17.550

你快到了。默认路由（`WebApiConfig.cs`如下所示：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

有一个***非常***重要的警告：按照声明它们的顺序检查路由，使用第一个匹配的路由，因此默认路由需要*最后*。

有了这一点，您需要做出决定，您希望对各种图表类型的调用执行一个操作，还是执行多个操作？

对于一个动作：

`WebApiConfig.cs`

```
 config.Routes.MapHttpRoute(
            name: "AzureQueue",
            routeTemplate: "api/AzureQueue/{chartType}/{id}",
            defaults: new { controller = "AzureQueue", id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

`AzureQueueController.cs`

```
public class AzureQueueController : ApiController
{
    public string Get(string chartType)
    {
        return "chart = " + chartType;
    }
    public string Get(string chartType, int id)
    {
        return "chart = " + chartType + ",id = " + id.ToString(); 
    }
} 
```

这里有两点需要注意。在分配给默认值的匿名类中，控制器的值决定将请求路由到哪个控制器。这可以在路由模板中，也可以在类中简单定义。此外，Get 类型的请求会自动发送到以 Url 开头`Get`并具有与模板匹配的参数的操作（有两种不同的情况，因为`id`是可选的）。

除非各种图表的业务逻辑不同，否则这将是我的首选方式。

另一方面，您可以指定：

`WebApiConfig.cs`

```
 config.Routes.MapHttpRoute(
            name: "AzureQueue",
            routeTemplate: "api/AzureQueue/{action}/{id}",
            defaults: new { controller = "AzureQueue", id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

由于我使用的`action`是模板这个词，这将被解释为一个动作名称。

`AzureQueueController.cs`

```
 [HttpGet]
    public string DeviceChart()
    {
        return "chart = DeviceChart" ;
    }

    [HttpGet]
    public string DeviceChart(int id)
    {
        return "chart = DeviceChart" + ",id = " + id.ToString(); 
    } 
```

这里没有字符串参数，该部分 url 用于决定使用哪个操作（公共方法）。此外，由于操作名称不以 开头`Get`，因此我需要`[HttpGet]`为每个方法添加一个属性，以将它们标记为能够接收 GET 请求。

祝你的项目好运。

# c# - 查找复制/粘贴代码的工具？

> ID：14784666
> 
> 赞同：3
> 
> 时间：2013-02-09T03:36:40.087
> 
> 标签：c#, .net, code-analysis

今天我在 if 语句中发现了大量的复制/粘贴代码，其中一两个单词发生了变化。我将 35 行的野兽改成了 5 行易于理解的代码。

我相信我会在代码库中找到更多内容。有没有我可以用来找到它们的工具？全部在 .NET 中用 C# 编写

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T03:43:21.773

我遇到了同样的问题，我在“分析”菜单中使用了 Visual Studio 2012 的“代码克隆分析解决方案”。很多时候，这甚至不是“剪切和粘贴”的工作，而是人们在没有先检查代码是否已经编写的情况下将自己的方法添加到代码库中。有时它是一堆样板代码，也可以用通用或函数方法抽象出来。（所以，你有我的同情！）[单击此处了解有关 MSDN 的更多信息](http://msdn.microsoft.com/en-us/library/hh205279.aspx)。

# ruby-on-rails - 如何摆脱将每个输入包装在 simple_form 中的 div？

> ID：14784668
> 
> 赞同：8
> 
> 时间：2013-02-09T03:37:03.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

这个输入：

```
<%= f.input :keywords, label: false, :input_html => {:class => "span8"}, :placeholder => "Park Slope, Prospect Heights, Fort Green..." %> 
```

产生这个：

```
<div class="control-group string optional">
  <div class="controls">
     <input class="string optional span8" id="search_keywords" name="search[keywords]" placeholder="Park Slope, Prospect Heights, Fort Green..." size="50" type="text" />
  </div>
</div> 
```

我如何只生成`input`没有周围 div 的单独？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-10T12:59:22.867

那么做这样的事情传递这样的`wrapper: false`参数

```
<%= f.input :keywords, 
            label: false,
            wrapper: false,
            input_html: { class: 'span8' }, 
            placeholder: 'Park Slope, Prospect Heights, Fort Green...' %> 
```

并且看到它会工作

希望这有帮助

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T22:28:10.983

所以似乎最好的方法是使用`f.input_field`.

Simple_Form 的文档并没有完全说明，但您可以在[此处查看实际的 API 文档](http://rubydoc.info/github/plataformatec/simple_form/master/SimpleForm/FormBuilder:input_field)。

从文档：

```
simple_form_for @user do |f|
  f.input_field :name
end 
```

将产生：

```
<input class="string required" id="user_name" maxlength="100"
   name="user[name]" size="100" type="text" value="Carlos" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T03:42:20.250

使用常规`text_field`

```
<%= f.text_field :keywords, :class => "string optional span8", :placeholder => "Park Slope, Prospect Heights, Fort Green..." %> 
```

# asp.net - 选择具有 ControlParameter 默认值属性行为的方法

> ID：14784671
> 
> 赞同：1
> 
> 时间：2013-02-09T03:37:30.880
> 
> 标签：asp.net, gridview, objectdatasource

我在我的 gridview 中使用 objectdatasource，ODS 的 SelectMethod 正在工作，但不是我想要的方式，我确定这与 DefaultValue 属性有关，但我已经尝试设置它但没有运气。这是代码：

```
 <asp:ObjectDataSource ID="AppointmentsDataSource" runat="server"  
    TypeName="DAL"
    DataObjectTypeName="DatabaseModel.Appointment"
    SelectMethod="getAppointmentsfiltered">
    <SelectParameters>
        <asp:ControlParameter ControlID="txtCal" PropertyName="Text" Type="DateTime" Name="chosenDate" DefaultValue="" />
    </SelectParameters>
</asp:ObjectDataSource>

 Public Function getAppointmentsfiltered(chosenDate As DateTime) As IEnumerable(Of Appointment)

    If String.IsNullOrEmpty(chosenDate) Then
        Return GetAllAppointments()
    Else
        Dim appts = (From a In context.Appointments.Include("Client")
                    Where a.AppointmentDate.Equals(chosenDate)
                    Select a).ToList()
        Return appts
    End If

End Function

Public Function GetAllAppointments() As IEnumerable(Of DatabaseModel.Appointment)

    Dim AllAppointments = (From a In context.Appointments.Include("Client")
                          Order By a.AppointmentDate Descending
                          Select a).ToList()

    Return AllAppointments
End Function 
```

我的文本框：

```
<asp:TextBox ID="txtCal" runat="server" AutoPostBack="true" OnTextChanged="txtCal_TextChanged" Text=""></asp:TextBox>
<img id="caltrigger" alt="Click this icon to display the calendar" src="../Images/calendar-icon.png" width="18" height="20" />
 <asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="txtCal" PopupButtonID="caltrigger">
</asp:CalendarExtender> 
```

如您所见，我最初想在 gridview 中查看所有约会，因为我的日期文本框的值为空。过滤工作正常。

任何帮助将不胜感激，并原谅我的无知，但我对 asp.net 还很陌生

编辑：我最终在标记中声明了两个 ODS 并在运行时切换，这解决了这个问题，但如果有人能告诉我为什么上面的代码不起作用，我会很感激。

# bash - bash shell 提示在执行 wget 后约 2 分钟内不返回（挂起）

> ID：14784672
> 
> 赞同：1
> 
> 时间：2013-02-09T03:37:45.567
> 
> 标签：bash, shell, wget, prompt

wget 在大约 10 秒内完成文件传输，但在传输后卡住了大约 2 分钟，然后返回到 bash shell。执行 wget 命令后，同一系统上的另一个用户会快速获得命令提示符。

使用 CentOS 6.3 Linux。没有对 .bashrc 文件进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:19:32.013

如果您的问题只是返回提示使用：

```
wget url & 
```

你会立即得到提示，
我通常使用

```
nohup wget url & 
```

为了获得更好的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T07:57:23.177

这对我来说是工作在前面添加单引号，并且 URL 链接的末尾可以解决这个问题。

# javascript - jQuery Img 切换 Ajax 帖子

> ID：14784677
> 
> 赞同：1
> 
> 时间：2013-02-09T03:38:33.480
> 
> 标签：javascript, jquery, html

我有两个图像，当我单击 green.png 时，它会变为 red.png。但是当我加载页面并且它已经设置为 red.png 时，我需要在 img 更改之前单击两次。我只想单击一次。

```
 $(".page-state").toggle(function(event){
    this.src = "images/red.png";

        var id = event.target.id; //the Div ID variable         
        var dataString = 'page='+ id + '&view=off';         

        $.ajax({
            type: "POST",
            url: "pageState.php",
            data: dataString,
            cache: false,
        });
        $('#mainFrame')
        .attr('src', $('iframe')
        .attr('src'))

    }, function(event) { 
        this.src = "images/green.png";

        var id = event.target.id; //the Div ID variable         
        var dataString = 'page='+ id + '&view=on';          

        $.ajax({
            type: "POST",
            url: "pageState.php",
            data: dataString,
            cache: false,
        });
        $('#mainFrame')
        .attr('src', $('iframe')
        .attr('src'))
    }); 
```

我该如何改进呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:44:11.633

jQuery：

```
$(".page-state").click( function() {
    var s = $(this).attr("class").split(" ");
    if(s[1] == 'red') {
        this.src = 'green.png';
        $(this).removeClass('red').addClass('green');
        // more code for green
    }
    else {
        this.src = 'red.png';
        $(this).removeClass('green').addClass('red');
        // more code for red image
    }
}); 
```

HTML：

```
<img class="page-state red" src="red.png" /> 
```

正如您所看到的，`.page-state`它的类表示默认情况下它由红色或蓝色组成。

# jquery - 嵌入在对象元素中的 SVG 上的鼠标指针悬停/jquery 单击事件不起作用

> ID：14784678
> 
> 赞同：1
> 
> 时间：2013-02-09T03:38:35.440
> 
> 标签：jquery, css, svg, hover

我正在使用 jQuery 动态添加元素以使用以下代码显示 SVG：

```
someEl = ('#someElement');
cancelButton = $(document.createElement('object')).attr({
            'class': 'cancelButton',
            'id':parent_id+'_xbtn',
            'data': 'img/cancelBtn.svg',
            'type': 'image/svg+xml'
        });
someEl.after(cancelButton);

function cancel() {
    alert('asd');
}
cancelButton.click(cancel); 
```

我使用这个 CSS 将其设置为用手悬停：

```
.cancelButton:hover {
    cursor: hand;
    cursor: pointer;
} 
```

但是我发现首先当我悬停元素时，鼠标指针没有改变。不过，修改元素本身（例如更改背景颜色）的悬停效果可以正常工作。其次，我附加的 jQuery 点击处理程序也不会触发。

这是`<object>`元素或 SVG 工作方式的一些限制吗？任何意见或建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:07:15.017

根据我的经验，作为元素嵌入的 SVG`<object>`倾向于吞下指针事件（因为浏览器会在对象元素内创建一个新文档，类似于 iframe）。您是否有理由不能只使用`<img>`标签？例如：

```
someEl = ('#someElement');
cancelButton = $('<img>').attr({
    'class': 'cancelButton',
    'id':parent_id+'_xbtn',
    'src': 'img/cancelBtn.svg'
});
someEl.after(cancelButton);

function cancel() {
    alert('clicked');
}
cancelButton.click(cancel); 
```

**编辑：**

如果您需要使用`<object>`标签（例如，因为您的 SVG 文件引用了外部资产），我的解决方案是创建一个具有相同宽度和高度的透明覆盖 div，绝对位于对象的顶部，然后在该 div 上绑定事件.

# crystal-reports - Crystal Reports 中的条件非重复计数

> ID：14784682
> 
> 赞同：1
> 
> 时间：2013-02-09T03:39:04.330
> 
> 标签：crystal-reports, formula, crystal-reports-2010, summary

我有一个这样的数据集：

```
ID    PersonID    ClassID    Attended    Converted
1     1           1          1           0
2     1           1          1           1
3     1           1          1           1
4     2           1          1           1
5     3           2          0           0
6     3           2          1           1
7     4           2          1           0 
```

我正在构建一个按 ClassID 分组的报告（实际上我正在使用一个允许对几个不同的列进行分组的参数，但为了简单起见，我只是使用 ClassID）。我需要在每个组页脚中进行计算。为了进行计算，我需要计算具有该组唯一的 PersonID 的记录。问题是，在一种情况下，这些记录还需要匹配一个标准。例如：

```
X = [Count of records where Converted = 1 with distinct PersonID]
Y = [Count of records where Attended = 1] 
```

然后我需要将商显示为百分比：

```
(X/Y)*100 
```

所以最终的报告看起来像这样：

```
ID    PersonID    Attended    Converted
CLASS 1 GROUP
1     1           1           0
2     1           1           1
3     1           1           1
4     2           1           1

Percent= 2/4 = 50%

CLASS 2 GROUP
5     3           0           0
6     3           1           1
7     4           1           0

Percent= 1/2 = 50% 
```

请注意，在 Class 1 Group 中，有 3 条记录 Converted = 1，但由于 PersonID 重复，“X”（分子）等于 2。如何在 Crystal Reports 中进行计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:09:16.167

[在这个网站](http://www.kenhamady.com/form14.shtml)的帮助下，我不得不创建一些不同的公式来完成这项工作。

首先，我按照该站点的建议创建了一个名为 fNull 的函数，它只是空白。我想知道是否只是在其位置键入 null 就可以完成这项工作，但没有进行测试。接下来，我创建了公式来评估是否有人参加了行以及是否转换了行。

f审判参加：

```
//Allows row to be counted if AttendedTrial is true
if {ConversionData.AttendedTrial} = true
then CStr({ConversionData.PersonID})
else {@fNull} 
```

fTrialsConverted:

```
//Allows row to be counted if Converted is true
if {ConversionData.Converted} = true
then CStr({ConversionData.PersonID})
else {@fNull} 
```

请注意，如果参加或转换为真，我将返回 PersonID。这让我可以在下一个公式中进行不同的计数（来自原始问题的 X）：

外汇：

```
DistinctCount({@fTrialsConverted}, {ConversionData.ClassID}) 
```

这放置在组页脚中。再次记住@fTrialsConverted 正在返回已转换的试验的 PersonID（或 fNull，不会计算在内）。我不明白的一件事是，如果它在组页脚中，为什么我必须按字段（ClassID）显式包含分组，但我这样做了，否则它将计算所有组的总数。接下来，Y 只是一个向上的计数。

fY:

```
//Counts the number of trials attended in the group
Count({@fTrialsAttended}, {ConversionData.ClassID}) 
```

最后是一个计算百分比的公式：

```
if {@fY} = 0 then 0
else ({@fX}/{@fY})*100 
```

我要分享的最后一件事是我还想计算报表页脚中所有组的总数。计算总 Y 很容易，它与 fY 公式相同，只是您按参数省略了组。计算总 X 比较棘手，因为我需要每组 X 的总和，而 Crystal 不能将另一个总和相加。所以我更新了我的 X 公式，以便在全局变量中保持运行总计：

外汇：

```
//Counts the number of converted trials in the group, distinct to a personID
whileprintingrecords;

Local NumberVar numConverted := DistinctCount({@fTrialsConverted}, {@fGroupBy});

global NumberVar rtConverted := rtConverted + numConverted;    //Add to global running total

numConverted;   //Return this value 
```

现在我可以在页脚中使用 rtConverted 进行计算。这导致了另一件令人困惑的事情，我花了几个小时才弄清楚。在我明确添加 global 关键字之前，rtConverted 并未被视为全局变量，尽管我看到的所有文档都说 global 是默认值。一旦我弄清楚了，一切都很好。

# php - php类继承私有方法在子（扩展）类中没有正确调用

> ID：14784685
> 
> 赞同：1
> 
> 时间：2013-02-09T03:39:19.833
> 
> 标签：php, oop, extends, private-methods

```
class A
{
    public function x()
    {
        echo "Public function in class A<br />";
    }
    private function y()
    {
        echo "Private function in class A<br />";
    }
    public function expose()
    {
        $this->x();
        $this->y();
    }
}

class B extends A
{
    public function x()
    {
        echo "Public function in class B<br />";
    }
    private function y()
    {
        echo "Private function in class B<br />";
    }
}
$y = new A;
$y->expose();

$z = new B;
$z->expose(); 
```

A 类的实例化产生以下结果：“A 类中的公共函数 A 类中的私有函数”

B 类的实例化产生以下结果：“B 类中的公共函数 A 类中的私有函数”

谁能解释B类实例化的结果？它不应该调用“B的”私有方法而不是A类的父方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T03:48:53.937

那是因为私有成员不能被继承。

您的`B`类没有`expose()`定义方法，因此它将调用`A`' 方法，该方法调用自己的私有`y()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T00:30:02.333

还有其他要考虑的。如果您想看到与您最初期望的行为相似的东西，您可以使 y() 受保护而不是私有。通过这样做，B 类中的受保护方法将对 A 类中的方法可见，并将按照您的预期运行该类的方法。但是，类 A 和 B 中的受保护方法仍然无法通过 $z->y(); 等外部调用访问。

```
class A
{
    public function x()
    {
        echo "Public function in class A<br />";
    }
    protected function y()
    {
        echo "Protected function in class A<br />";
    }
    public function expose()
    {
        $this->x();
        $this->y();
    }
}

class B extends A
{
    public function x()
    {
        echo "Public function in class B<br />";
    }
    protected function y()
    {
        echo "Protected function in class B<br />";
    }
}
$y = new A;
$y->expose();

$z = new B;
$z->expose(); 
```

将导致：

```
Public function in class A
Protected function in class A
Public function in class B
Protected function in class B 
```

# python - 线程化的python应用程序没有干净地关闭

> ID：14784688
> 
> 赞同：1
> 
> 时间：2013-02-09T03:39:48.737
> 
> 标签：python, multithreading, python-2.7

我有一个用 Python 2.7 编写的[小型爬虫应用程序](https://github.com/technoskald/maltrieve)，它使用线程来获取大量 URL。但它不能干净地关闭或正确响应键盘中断，尽管我试图用我在这里找到的一些建议来解决后一个问题。

```
def main():
    ...
    for i in range(NUMTHREADS):
        worker = Thread(target=get_malware, args=(malq,dumpdir,))
        worker.setDaemon(True)
        worker.start()

    ...

    malq.join()

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        sys.exit() 
```

我需要确保当我按 Ctrl-C 或完成运行时它会正确退出，而不是必须按 Ctrl-Z 并终止工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:56:10.960

讨论了[GIL](http://wiki.python.org/moin/GlobalInterpreterLock)如何影响具有 IO 绑定的多个线程的 Python 应用程序的信号处理。显然 IO 绑定线程导致主线程因处理时间而饿死，并且无法按预期处理信号。我建议查看替代[并行处理选项](http://wiki.python.org/moin/ParallelProcessing)（如[subprocess](http://docs.python.org/2/library/subprocess.html?highlight=subprocess#subprocess)模块或[multiprocessing](http://docs.python.org/2/library/multiprocessing.html)）或异步框架（如[asyncoro](http://asyncoro.sourceforge.net/)）

# wordpress - 使用 .htaccess 将帖子从一个类别重定向到新 URL

> ID：14784692
> 
> 赞同：3
> 
> 时间：2013-02-09T03:40:00.390
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我一直在寻找，但不能完全找到我正在寻找的东西，所以就到这里了。

我有一个相当大的博客，并且想将帖子从特定类别移动到新域，并且需要旧 URL 才能将该类别重定向到新域。

例如，我有“论文”类别，我计划从该类别中的 Wordpress 导出所有帖子，并将它们导入到我在新域上的新站点。所以我想要：

`www.currenthome.com/paper/post-name-here`

重定向到

`www.newhome.com/paper/post-name-here`

我有超过 900 个帖子需要指导。

为了清楚起见，我只有一个特定类别的帖子被重定向。当前站点上的其余帖子不应受到影响。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:34:10.797

`currenthome`您可以在 WP 规则集下方的根 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST}  (?:www\.)?currenthome\.com  [NC]
RewriteCond %{REQUEST_URI}  ^/paper/([^/]+)/?      [NC]
RewriteRule .*   http://www.newhome.com/paper/%1   [R=301,L] 
```

永久重定向：

`http://www.currenthome.com/paper/post-name-here` 或者

`http://currenthome.com/paper/post-name-here` 带或不带斜杠。

至：

`http://www.newhome.com/paper/post-name-here`

对于静默映射，请`R=301`从`[R=301,L]`.

# automata - 下推自动机定义

> ID：14784694
> 
> 赞同：0
> 
> 时间：2013-02-09T03:40:14.433
> 
> 标签：automata

我对 PDA 的正式描述（下推自动机）感到很困惑

如果我们记下 L(M)，这意味着 PDA M 可以识别语言 L，对吗？

那么，L(M)* 表示 PDA M 识别出 L* 对吗？

但是 L* 是什么意思？PDA 如何识别 L 的无限组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:49:44.910

> L(M)* 表示 PDA M 识别出 L* 对吗？

不！它是指由 PDA M 识别的语言中有效的任意数量的句子（包括零个）串联构成的语言。

鉴于 L(M) 是上下文无关的，很容易证明 L(M)* 也是上下文无关的。

要构造 L(M)* ，只需获取 L(M) 的所有语法，从 L(M) 中获取起始符号 S 并添加两个新产生式`R -> S R`，`R -> empty`其中 R 是 L(M)* 的起始符号。

所以，鉴于 L(M)* 是上下文无关的，那么就有一些 PDA 可以识别它。如果你可以为 L(M) 构造一个 PDA，那么构造一个 L(M)* 的 PDA 应该是微不足道的，因为它几乎与 L(M) 相同，只是有两个额外的产生式。

# xml - xml 到 FRED 数据库的访问？

> ID：14784696
> 
> 赞同：1
> 
> 时间：2013-02-09T03:40:18.847
> 
> 标签：xml, ms-access

我正在尝试将 St. Louis Feds 经济数据数据库中的数据插入 MS Access。我是一名学生，这只是我想知道的事情；认为这是了解数据库的好方法。不幸的是，美联储使用的 XML 格式似乎无法被 Access 识别：即使它确实导入了 XML 文件，它也无法填充表。不确定是否有人对此有任何经验，但我想我还是会问。如果这是该问题的错误论坛，请道歉；认为既然美联储的所有信息都是公开的，那就没问题了。

您将需要一个免费的 API 密钥，但让我们超越它。数据采用这种 xml 格式：

```
 <observations realtime_start="2013-02-08" realtime_end="2013-02-08"  
 observation_start="1776-07-04" observation_end="9999-12-31" units="lin"   
 output_type="2" file_type="xml" order_by="observation_date" sort_order="asc" 
 count="792" offset="0"        limit="100000">
  <observation date="1947-01-01" CPIAUCSL_20130208="21.48"/>
  <observation date="1947-02-01" CPIAUCSL_20130208="21.62"/>
  <observation date="1947-03-01" CPIAUCSL_20130208="22.0"/>
  </observations> 
```

所以这基本上是数据集的一个例子。现在，如果我尝试通过 XML 链接将其输入 Access，它基本上会创建一个表，其中包含一个标题为 Observations 的列；但是，它不会用日期和值填充表格吗？任何帮助表示赞赏。

# java - Java - 将 null 作为参数传递给 print()

> ID：14784697
> 
> 赞同：2
> 
> 时间：2013-02-09T03:40:36.040
> 
> 标签：java, reference, outputstream

我想知道为什么下面的代码不起作用：

```
System.out.print(null);    
response.getWriter().print(null); 
```

但下面的工作：

```
String s = null;
System.out.print(s);
response.getWriter().print(s); 
```

`null`传递 a与传递引用 as 相比有什么区别`null`？

**已编辑：** 前面提到的不起作用表示编译错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T03:43:06.880

这是因为您可以传递 a`Object`或 a `String`。由于`null`两者都适合，编译器不知道使用哪种方法，导致编译错误。

方法定义：

*   [System.out.print(对象)](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print(java.lang.Object))
*   [System.out.print（字符串）](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print(java.lang.String))

相反，如果您提供一个`Object`或一个`String`变量（即使它有`null`值），编译器就会知道使用哪种方法。

编辑：这[在这个答案中](https://stackoverflow.com/a/4960961/1065197)得到了更好的解释。至于指向 Java 规范的内部链接，你可以在[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)阅读，这种情况适合这里：

> 非正式的直觉是一个方法比另一个方法更具体**如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误。
> 
> 可能没有一种方法是最具体的，因为有两种或多种方法是最具体的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T03:59:56.787

这是因为`System.out.println()`期望某种类型的东西。`null`没有类型，因此不能单独输出。这通过以下方式显示：

不起作用：

```
 System.out.println(null); 
```

作品：

```
 System.out.println((String)null);
 System.out.println((char[])null);
 System.out.println((Object)null); 
```

这是编译器类型检查方法调用的参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T07:46:28.850

谢谢大家的答案 。根据您的意见，我自己编写了答案。似乎这个调用`System.out.print(null)`对编译器来说是模棱两可的，因为`print(null)`这里会找到两个最佳的特定匹配，即`print(String)`和`print(char[])`。所以编译器无法确定在这里调用哪个方法。
小例子是：

```
private void methodCall(String str) {
}

private void methodCall(char[] ch){
} 
```

现在这段代码变得模棱两可：`methodCall(null)`。

# erb - 未定义的方法 MiddlemanCore 数据

> ID：14784698
> 
> 赞同：2
> 
> 时间：2013-02-09T03:40:58.143
> 
> 标签：erb, middleman

我正在使用中间人处理静态站点，并尝试使用 mm 的本地数据功能。

目前，我在中间人项目的源目录中有所需的数据目录。

数据目录里面是一个yaml文件（home.yml）

这是文件的结构：

```
slides:
    - image: "/img/slider/slide1.jpg"
      image_alt: "Slide 1 alt text"
      caption: "Slide 1 caption"

    - image: "/img/slider/slide2.jpg"
      image_alt: "Slide 2 alt text"
      caption: "Slide 2 caption" 
```

然后，我尝试在 html.erb 文件中循环浏览这些幻灯片，如下所示：

```
<%= data.home.slides.each do |s| %>

    <figure class="slide">

        <%= image_tag(s[:image], alt: s[:image_alt]) %>

        <figcaption><%= s[:caption] %></figcaption>

    </figure>

<% end %> 
```

但是中间人在编译的 html 文件上吐了一个 NoMethodError 。

#<Middleman::CoreExtensions::Data::DataStore:0x4383918> 的未定义方法“home”

我不知道我做错了什么。我尝试将数据目录移动到源文件夹之外的一个级别，但没有任何效果。

似乎中间人无法识别数据目录中的 home.yml 文件夹。对此的任何帮助都非常感谢，因为我发现文档或对中间人数据功能的支持并不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:03:56.087

你非常接近 - 你只是有一个小错字。请注意我如何删除等号“=”符号。

更改此行：

```
<%= data.home.slides.each do |s| %> 
```

对此：

```
<% data.home.slides.each do |s| %> 
```

完成后应生成以下标记：

```
<figure class="slide">
    <img alt="Slide 1 alt text" src="/img/slider/slide1.jpg">
    <figcaption>Slide 1 caption</figcaption>
</figure>

<figure class="slide">
    <img alt="Slide 2 alt text" src="/img/slider/slide2.jpg">
    <figcaption>Slide 2 caption</figcaption>
</figure> 
```

# ruby-on-rails - Rails 注释掉用于开发的迁移文件？

> ID：14784700
> 
> 赞同：1
> 
> 时间：2013-02-09T03:41:56.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在本地运行这个迁移文件并遇到问题，因为部分是 MySQL，因为我使用的是 Sqlite3，所以它不起作用。我想确保 SQL 只在生产中运行，而不是在开发中。我知道我需要用此评论来包装其中的一部分，以便我可以成功运行此迁移：

```
unless Rails.env == "development". 
```

如何将其添加到下面的脚本中？

```
 class Places < ActiveRecord::Migration
      def self.up
        create_table :countries do |t|
          t.string :name, :limit => 50, :null => false
          t.string :fips104, :limit => 2, :null => false
          t.string :iso2, :limit => 2, :null => false
          t.string :iso3, :limit => 3, :null => false
          t.string :ison, :limit => 4, :null => false
          t.string :internet, :limit => 2, :null => false
          t.string :capital, :limit => 25
          t.string :map_reference, :limit => 50
          t.string :nationality_singular, :limit => 35
          t.string :nationaiity_plural, :limit => 35
          t.string :currency, :limit => 30
          t.string :currency_code, :limit => 3
          t.integer :population
          t.string :title, :limit => 50
          t.string :comment, :limit => 255

          t.timestamps
        end

        create_table :regions do |t|
           t.references :country, :null => false
           t.string :name, :limit => 45, :null => false
           t.string :code, :limit => 8, :null => false
           t.string :adm1code, :limit => 4, :null => false

           t.timestamps
         end

         create_table :cities do |t|
           t.references :country, :null => false
           t.references :region, :null => false
           t.string :name, :limit => 45, :null => false
           t.float :latitude, :null => false
           t.float :longitude, :null => false
           t.string :timezone, :limit => 10, :null => false
           t.integer :dma_id
           t.string :county, :limit => 25
           t.string :code, :limit => 4

           t.timestamps
         end
         add_index :cities, :name

         execute "LOAD DATA INFILE '#{RAILS_ROOT}/db/migrate/Countries.txt' INTO TABLE countries
           FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES;"

         execute "LOAD DATA INFILE '#{RAILS_ROOT}/db/migrate/Regions.txt' INTO TABLE regions
           FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES;"

         execute "LOAD DATA INFILE '#{RAILS_ROOT}/db/migrate/Cities.txt' INTO TABLE cities
           FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES;"

      end

      def self.down
        drop_table :countries
        drop_table :regions
        drop_table :cities
      end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:52:07.087

在您的`self.up`方法中，您可以检查`environment`如下：

```
 if Rails.env.production? 
     #your mysql code which runs only in production env
  end 
```

# c++ - 由于 C++ 结构中的大型二维数组导致的分段错误

> ID：14784703
> 
> 赞同：0
> 
> 时间：2013-02-09T03:42:15.710
> 
> 标签：c++, multidimensional-array, struct, heap-memory, stack-overflow

我正在尝试修复在运行 C++ 程序时发生的分段错误错误，该错误是由我调用的结构过大引起的。我正在寻找一种方法来使用我预先存在的 C++ 结构并将其从堆栈移动到堆。

我的代码如下所示：

```
n = 300;

struct arrayStruct {
   double arr[n][n];
};

int main(int argc, char *argv[]){

   arrayStruct temperature;
   // do a bunch of stuff including passing and receiving the arrayStruct within a few    functions
return 0

} 
```

我尝试过使用 malloc 和 new 但似乎只得到了我不知道如何修复它们的错误。我已经在结构和主文件中尝试过，但似乎无法让它工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:01:38.113

尝试使用向量创建二维数组：

```
#include <vector>

 struct arrayStruct {
   arrayStruct()
   : arr(n, std::vector<double>(n))
   {
   }
   std::vector<std::vector<double>> arr;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:05:15.177

`arrayStruct`您可以在堆上分配一个实例：

```
std::unique_ptr<arrayStruct> temperature(new arrayStruct()); 
```

# jquery - 选中复选框时动态更改 jQuery Validate 规则

> ID：14784705
> 
> 赞同：5
> 
> 时间：2013-02-09T03:42:20.373
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation 来验证表单，而我想要做的是...

如果未选中复选框，则应通过以下方式进行验证：

```
weight: { required: true, max: 50 } 
```

如果它被检查，这就是它应该被验证的方式。

```
weight: { required: true, max: 100 } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T06:14:48.887

每当单击复选框时，您将使用[Validate 插件的内置`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)来动态更改规则。

**jQuery** :

```
$(document).ready(function () {

    // initialize the plugin
    $('#myform').validate({ 
        // other options,
        rules: {
            // other rules,
            weight: {
                required: true,
                max: 50 // initial value on load
            }
        }
    });

    // change the rule on checkbox and update displayed message dynamically
    $('#check').on('change', function () {
        if ($(this).is(':checked')) {
            $('#weight').rules('add', {
                max: 100
            });
        } else {
            $('#weight').rules('add', {
                max: 50
            });
        };
        $('#weight.error').each(function () {
            $(this).valid();
        });
    });

}); 
```

**HTML**：

```
<form id="myform">
    <input type="checkbox" id="check" />
    <input type="text" id="weight" name="weight" />
    <input type="submit" />
</form> 
```

**工作演示：http: [//jsfiddle.net/3hGxS/](http://jsfiddle.net/3hGxS/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T10:29:36.750

使用[max](http://docs.jquery.com/Plugins/Validation/Methods/max#value)方法和函数作为参数制定规则。这将在验证字段时进行评估，即在字段上调用 ​​element() 时。

规则定义看起来像这样

```
rules: {
    field1:
    {
        required: true,
        max: function () { return $("#mycheckbox:checked").length ? 100 : 50; }
    }
} 
```

此外，在规则更改时重新验证目标字段，否则您可能会收到不再适用的错误消息

```
$('#mycheckbox').on('change', function () {
    $('#field1.error').each(function () {
        $(this).valid();
    });
}); 
```

请注意，这只会在已验证的情况下重新验证​​该字段，检查是否存在默认的 errorClass 'error'。

像这样的html

```
<input name="mycheckbox" id="mycheckbox" type="checkbox" />
<input name="field1" id="field1">
<input type="submit" /> 
```

完整的 JavaScript 代码是这样[的，在这里找到小提琴](http://jsfiddle.net/jVznt/1/)

```
$(function () {

   $("form").validate({
        rules: {
          field1:
          {
            required: true,
            max: function () {
                    return $("#mycheckbox:checked").length ? 100 : 50;
                }
            }
         },
        submitHandler: function () {
            alert('form ok');
        }
    });

    $('#mycheckbox').on('change', function () {
        $('#field1.error').each(function () {
            $(this).valid();
        });
    });

}); 
```

# javascript - 可以从 Javascript API 到 Google 电子表格建立多少个 I/O 连接？

> ID：14784706
> 
> 赞同：0
> 
> 时间：2013-02-09T03:42:41.670
> 
> 标签：javascript, api, spreadsheet, userscripts

可以使用 Google Apps 脚本从 Javascript API 与 Google 电子表格建立多少 I/O 连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:40:34.247

谷歌没有说明限制，可能也没有正式的限制。

[Google 电子表格 API 服务条款](https://developers.google.com/google-apps/spreadsheets/terms)仅指[Google API 服务条款](https://developers.google.com/terms/)。目前只是说：

> Google***可能会***自行决定限制您可以发出的 API 请求的数量

（强调补充）。

如果您查看[Google Apps*定价*页面](http://www.google.com/intl/en/enterprise/apps/business/pricing.html)并单击该`Compare more features`按钮，您会看到 Google 限制（并收费）使用高资源密集型的东西，如存储、用户和域。（加上 Map API 的地图。）

“正常”API 只是作为给定的，并且可能不会受到限制，除非滥用成为问题（不太可能或已经发生）。

是什么让您认为 Google 限制了您？
或者你只是在问一个假设？

另请参阅[Google 电子表格大小和复杂性限制](http://support.google.com/drive/bin/answer.py?hl=en&answer=2505921)。

# mysql - 在子查询中访问第二个表中的值

> ID：14784720
> 
> 赞同：0
> 
> 时间：2013-02-09T03:44:41.567
> 
> 标签：mysql

我正在使用光标运行数据集。在每个游标传递中，使用存储过程将字符串拆分，该存储过程将单个元素写入临时表`SplitValues`，每行一个值。每个数据集也有一个唯一的 ID`ds_id`

拆分值

```
value   |
--------+
Item1   | 
Item2   | 
Item3   | ` 
```

我还有一个参考表，其中包含拆分函数可能产生的每个项目的 ID：

班级

```
id | class |
---+--------
5  | Item1 |
6  | Item2 |
7  | Item3 |
8  | Item4 |
9  | Item5 | 
```

我现在要做的是遍历所有行`SplitValues`并将它们写入表以存储数据，但是使用类的 ID 而不是类本身来节省存储空间：

贮存

```
ds_id | class_id |
------+-----------
0     | 5        |
0     | 6        |
0     | 7        | 
```

这应该相当简单，但我失败了。我做了多次尝试，一个是以下游标循环：

```
FETCH cur1 INTO ds_id, string;
CALL `Split_String`(string, ',');

INSERT INTO storage (ds_id, class_id) 
    SELECT ds_id, 
        (SELECT classes.id FROM classes WHERE class = SplitValues.value ) as class_id ;

[...] 
```

产生的错误`Unknown column 'SplitValues.value' in 'where clause'`

我进行了很多搜索，并认为我的问题与别名有关，但无法找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:00:44.253

试试这个

```
[...]
INSERT INTO storage (ds_id, class_id) 
SELECT ds_id, c.id
  FROM classes c INNER JOIN 
       SplitValues s ON c.class = s.value
[...] 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/13725/1)

# php - 通过ip访问虚拟主机

> ID：14784721
> 
> 赞同：0
> 
> 时间：2013-02-09T03:44:57.613
> 
> 标签：php, apache, paypal, virtualhost, paypal-ipn

我的机器中有一个具有以下配置的虚拟主机：

```
<VirtualHost 127.0.0.1:80>
  ServerName codigos
  DocumentRoot /home/code/codigos/app/webroot
  SetEnv APPLICATION_ENV "development"
  <Directory /home/code/codigos/app/webroot > 
     AllowOverride All
     Order allow,deny
     Allow from all
  </Directory>
  </VirtualHost> 
```

好的，当我在浏览器中输入这个时效果很好：`codigos/some_path`但是`127.0.0.1/some_path` 现在我正在使用 PayPal，我需要一个 IPN 的 url。我知道我不能`localhost`输入 url，所以我想它会是这样的：`my.dynamic.ip/some_path/ipn.php`......这就是我的问题，我不知道如何配置我的 apache 文件来实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:52:33.777

1.  在[http://www.noip.com/](http://www.noip.com/)（或任何其他动态 dns 站点）注册
2.  设置他们的软件，以便您可以`ping blabla.noip.com`托管（或您在注册和设置过程之后获得的任何主机）并查看它解析为您的 ip（您可以`my ip`在 google 中查看）
3.  之后将给定的主机名放入`blabla.noip.com`or `ServerName`（更好的）`ServerAlias`指令

之后，您将能够从外部访问您的虚拟主机（假设您的防火墙不拒绝连接并且您有白色 IP 地址）

# ios - 将 UITouchesEvent 编码为 NSData 时出错

> ID：14784722
> 
> 赞同：1
> 
> 时间：2013-02-09T03:45:02.730
> 
> 标签：ios, objective-c, nsdata, nskeyedarchiver, objective-c-category

我有一个包含一些对象的 NSDictionary：一个 UITouches 的 NSSet、一个 UIEvent 和一个 NSString。

当我尝试将字典编码为 NSData 时，字符串会正确编码。我在对 UITouch 进​​行编码时遇到了错误，但我找到了一种使用一些代码扩展类的方法，以便可以对 UITouch 进​​行编码。但是，我仍然无法对 UIEvent（实际上是 UITouchesEvent）进行编码。如何扩展 UIEvent 或 UIInternalEvent 以使它们可编码为 NSData？

我用于编码/解码的方法：

```
-(NSString *)stringFromDictionary:(NSDictionary *)dict{
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:dict forKey:@"dictKey"];
    [archiver finishEncoding];

    return [Base64 encode:data];
}

-(NSDictionary *)dictionaryFromString:(NSString *)string{
    NSData *data = [[NSMutableData alloc] initWithData:[Base64 decode:string]];
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    NSDictionary *myDictionary = [unarchiver decodeObjectForKey:@"dictKey"];
    [unarchiver finishDecoding];
    return myDictionary;

} 
```

我得到的错误：

```
-[UITouchesEvent encodeWithCoder:]: unrecognized selector sent to instance 
```

如果我遗漏了有关调试的任何重要信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:00:33.657

您必须拥有`UITouch`或`UITouchesEvent`适应[UICoding](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议。这意味着它必须支持这些方法：

```
- (id)initWithCoder:(NSCoder *)decoder;
- (void)encodeWithCoder:(NSCoder *)encoder; 
```

我自己没有尝试过，但是如果您在班级类别中这样做，它应该可以工作。困难在于找出您需要编码的内容，以便可以再次将其解码为正确的实例，如果这是您需要的话。

# android - 在适用于 Android 的 JNI 项目中的 C++ 源代码中包含对共享对象的依赖

> ID：14784726
> 
> 赞同：2
> 
> 时间：2013-02-09T03:45:36.143
> 
> 标签：android, maven, java-native-interface, dependencies, shared-libraries

如果我没有使用正确的术语，我深表歉意，但我对 Maven 和 JNI 还是很陌生。

这是我的问题。

我有一个依赖 JNI 来使用 c++ 源的 Android 项目 (A)。c++ 代码位于一个独立的项目（A-native）中，该项目构建了一个 .so 库（A-android.so）。使用本机函数的 java 包装器位于一个单独的项目 (A-java) 中，该项目依赖于 A-android.so。A-java 是使用 maven-compiler-plugin 构建的。

这个项目工作正常，我在为 A-java 的 pom 中定义两个项目之间的依赖关系没有问题。

现在我正在创建一个具有完全相同结构的新项目 (B)。它由两部分组成：一是生成 .so 文件 (B-android.so) 的 c++ 代码 (B-native)；一个带有依赖于 B-android.so 的 java 包装器 (B-java)。

B-native 的一部分是来自旧项目的重复代码，所以我想在构建 B-android.so 并重用 A-本国的。

我试图将 A-android.so 包含在 B-native pom 的依赖项中，但是当我运行 mvn clean install 时仍然出现错误，因为找不到 A-native 中定义的类。请注意，我已将 .h 文件包含在我的 B-native 包含目录中。

我真的很感激有人可以向我解释处理这种依赖关系的正确方法。

谢谢！

更新：这是构建 c++ 代码的两个项目的 pom。如您所见，它们是相同的，只是项目 B 的一个在依赖项中添加了项目 A

项目A

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>myGroup</groupId>
        <artifactId>ProjectA</artifactId>
        <version>1.0</version>
    </parent>
    <packaging>so</packaging>

    <artifactId>ProjectA-Native</artifactId>
    <name>ProjectA-Native</name>

    <build>
        <plugins>

            <!-- Maven Compiler plugin -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <!-- Use java 1.6 -->
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.4.1</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>libs</directory>
                        </fileset>
                        <fileset>
                            <directory>obj</directory>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.0.0</version>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>

</project> 
```

项目 B

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>myGroup</groupId>
        <artifactId>ProjectB-Native</artifactId>
        <version>1.0</version>
    </parent>
    <packaging>so</packaging>

    <artifactId>ProjectB-Native</artifactId>
    <name>ProjectB-Native</name>

    <dependencies>
        <dependency>
            <groupId>myGroup</groupId>
            <artifactId>ProjectA-Native</artifactId>
            <version>${project.version}</version>
            <type>so</type>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <!-- Maven Compiler plugin -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <!-- Use java 1.6 -->
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.4.1</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>libs</directory>
                        </fileset>
                        <fileset>
                            <directory>obj</directory>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>

            <plugin>
                     <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.0.0</version>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>

</project> 
```

# java - 从 Java 中的枚举类型参数获取信息

> ID：14784727
> 
> 赞同：0
> 
> 时间：2013-02-09T03:45:42.447
> 
> 标签：java, generics, enums

我正在尝试从通用 Java 类中访问任意 Enum 的属性。特别是，我想访问 Enum 中值的数量以及实际值本身。

这个（显然是愚蠢的）虚拟代码说明了意图：

```
public class Test <E extends Enum>{
    public enum TestEnum {
        FIRST, SECOND, THIRD
    }
    public Test() {
        System.out.println(E.values().length);   //error - won't compile
    }
    public static void main(String[] args) {
        Test<TestEnum> t = new Test<TestEnum>();
    }
} 
```

StackOverflow 上有类似问题的一些解决方案，但它们需要修改 Enum。重要的是，代码适用于*任意*Enum。

这在Java中甚至可能吗？

提前感谢您提供任何可能的建议。

〜克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:02:54.717

您可以使用反射和编译器在创建枚举时自动添加的静态值方法。

```
public class Test {

    public enum TestEnum {
        FIRST, SECOND, THIRD
    }

    public Test(Class<? extends Enum> enumType) throws IllegalAccessException,
            InstantiationException, NoSuchMethodException,
            InvocationTargetException {
        Enum[] values = (Enum[]) enumType.getDeclaredMethod("values").invoke(
            null);
        System.out.println(Arrays.toString(values));
    }

    public static void main(String[] args) throws InstantiationException,
            IllegalAccessException, InvocationTargetException,
            NoSuchMethodException {
        Test t = new Test(Test.TestEnum.class);
    }
}

>> [FIRST, SECOND, THIRD] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:58:30.513

要在运行时访问 E 的实际类，它应该在编译时明确设置。

将其设置为类型参数不起作用，因为 java 类型擦除。我刚刚编译了 Test 类，并为它运行 javap：

```
...
public static void main(java.lang.String[]);
  Code:
   0:   new #2; //class Test
   3:   dup
   4:   invokespecial   #3; //call no-arg constructor "<init>":()V
   7:   astore_1            // store object reference to local variable 't'
   8:   return 
```

因此，构造函数对 TestEnum 类型参数一无所知。

最合适的解决方案是像[@stampy88 所写](https://stackoverflow.com/a/14784823/2056178)的那样将类参数传递给构造函数。

# c++ - 安装 libx11-dev 后我找不到 Xlib.h

> ID：14784731
> 
> 赞同：0
> 
> 时间：2013-02-09T03:46:45.367
> 
> 标签：c++, c, netbeans, ubuntu-10.10

这里有很多帖子，但没有一个对我有帮助。

我已经`libx11-dev`从 apt-get 成功安装，但 netbeans 仍然抱怨它找不到包含文件`<X11/Xlib.h>`。

我也试过找到 xlib.h 并且我的硬盘上没有 Xlib.h 文件或 X11 文件夹。

```
find / X11 
find / Xlib.h 
```

有什么我应该看的东西来解决它吗？我正在使用 ubuntu 12，它是 ac/c++ 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:01:52.830

我对netbeans一无所知，但是：您可以使用以下命令找出系统上安装的软件包中的内容

```
dpkg -L <name of package> 
```

当我在我也有权访问的 Ubuntu 系统上执行此操作时，它表明 libx11-dev*应该*包含文件`/usr/include/X11/Xlib.h`. 但是，这并不能告诉您该文件是否确实存在。您需要类似`find`您为此尝试的命令。

现在，您的`find`命令没有做任何事情，因为`find`命令行语法与其他所有命令都不同。这是如何做你想做的事情`find`：

```
find / -name Xlib.h -print
find / -name X11 -print 
```

（在最近的具有 GNU 用户空间的系统（即所有 Linux 和其他一些系统）上，尾随`-print`不是必需的，但在较旧的系统上，可能还有那些保留更多 BSD 遗产的系统，它是。我在糟糕的旧系统中学习了我的 shell SunOS 4 的日子，我仍然有这些习惯。）

# heroku - 如何关闭我的 heroku 应用程序？

> ID：14784734
> 
> 赞同：22
> 
> 时间：2013-02-09T03:47:00.037
> 
> 标签：heroku, shutdown

我已经慢慢地战斗到了在 Heroku 上拥有一个可以工作的 Grails 应用程序的地步。我现在要睡觉了，所以我想关闭它，这样我就不会继续用完我的 Dyno 的 750 小时空闲时间。这可能很明显，但我找不到如何关闭我的 Heroku Web 服务器并在早上重新启动它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-09T04:56:50.700

要关闭您的 Heroku 应用程序，请将 Web 进程缩放到 0：

> heroku ps:scale web=0

请参阅[用法和计费开发中心文章](https://devcenter.heroku.com/articles/usage-and-billing)：“闲置的 Web dyno 继续累积使用量”。我相信维护模式会继续累积时间；它[只是为访问者提供静态页面，](https://devcenter.heroku.com/articles/maintenance-mode)而不是为您的应用程序提供服务。

请记住，每个应用程序[*每月*](https://devcenter.heroku.com/articles/usage-and-billing#750-free-dynohours-per-app)可获得 750 个免费计费小时。根据您的预期用途，这可能意味着您不需要关闭（即，如果您只打算在整个月内运行一个测功机）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-11-07T22:07:07.200

来自网络：个人 => 您的应用名称 => 概述 => 配置 Dynos => 单击针对网络的编辑 => 翻转开关 => 确认

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-06T23:36:12.807

要停止 DYNO，您可以使用：

```
heroku ps:stop "appname" 
```

要获取正在运行的应用程序名称列表，您可以使用：

```
heroku apps 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-25T06:18:12.120

现在在 2019 年的设置中有一个维护模式。

[![在此处输入图像描述](../Images/377378c699f8abc08e9c2bbac9850b05.png)](https://i.stack.imgur.com/XOBNs.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-23T09:52:06.690

只需阅读文档：
[https ://devcenter.heroku.com/articles/one-off-dynos#one-off-dynos](https://devcenter.heroku.com/articles/one-off-dynos#one-off-dynos)

类型

```
heroku ps 
```

查看与您的帐户关联的所有正在运行的应用程序，以及关联的 id，然后

```
heroku ps:stop run.1 
```

如果您要停止的应用程序具有`1`id。

请注意，维护模式不会停止您的应用程序。我的配置错误，并在启用维护模式后继续崩溃。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-09T03:48:42.463

也许打开维护模式？`heroku maintenance:on`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-25T17:41:25.697

您可以使用附加 AutoIdle 自动关机：

[https://elements.heroku.com/addons/autoidle](https://elements.heroku.com/addons/autoidle)

# c++ - 如何将变量放置在内存中的给定绝对地址（使用 Visual C++）

> ID：14784735
> 
> 赞同：6
> 
> 时间：2013-02-09T03:47:07.987
> 
> 标签：c++, visual-c++, portable-executable

我如何静态地告诉 Visual C++ 将全局变量放置在内存中给定的绝对地址处，就像这样[`__attribute__((at(address)))`做](http://www.keil.com/support/man/docs/armccref/armccref_BABGJHDC.htm)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:26:24.720

可以做到，但我不相信有预定义的方法可以做到这一点，因此需要进行一些实验。即使在用户代码执行开始时在运行时创建变量，我也没有看到太多好处。

[因此，首先使用allocate](http://msdn.microsoft.com/en-us/library/5bkb2w6t.aspx) MS*特定*说明符指定要在其中初始化变量的部分/段。然后在真实场景中启动您的应用程序，转储它或调试它并查看变量出现的位置。注意重定位（有一些方法可以尝试强制不重定位，但不能保证始终遵守）。另一种方法是在您的应用程序中使用一些代码[来](https://stackoverflow.com/questions/4308996/finding-the-address-range-of-the-data-segment)查找您定义的部分的地址。

如果由于某种原因无法获得一致的行为，您可以使用[此实用程序](http://msdn.microsoft.com/en-us/library/xd3shwhf.aspx)来操作目标文件的虚拟地址。总而言之，除了一路上的障碍，但总的来说，如果你足够坚持，我不明白为什么你不能让它为*你的特定场景工作。*

# scala - 在 Scala 中，当从列表 [Class] 访问其实例时，找不到类的成员

> ID：14784738
> 
> 赞同：0
> 
> 时间：2013-02-09T03:47:49.547
> 
> 标签：scala, collections, types, type-erasure

我有一种感觉，我面临的问题与Scala 的*类型擦除*有关，但作为一个新手，我不能把手指放在它上面。在这里需要一些帮助。

首先，代码：

```
 class C (val i: Int) {
          def mkString() = { println("C.i =" + this.i) }

    object C {
               implicit val cOrdering = new Ordering [C] 
               {
                   def compare (a: C, b: C)= 
                   {
                        a.i compare b.i;
                   }
               } 
```

然后，我创建了另一个类，其中包含一个类“C”的集合，因此：

```
 class  ContainerOfC [C] (s:Int) (implicit ordering: cOrdering[C]) {

               var internalCollection = new TreeSet[C]()

               def + (c:C): ContainerOfC [C] = {
                   this.internalCollection += c
                   this
               }

               def mkStringOfElems () = {

                   val y = this.internalCollection.toList

                   println (y.head.i) // <--- Problem here

                }

            } 
```

这是 REPL 告诉我的：

```
error: value i is not a member of type parameter C
                                    println(y.head.i)
                                                   ^ 
```

我已经检查了 'y' 的类型：它是一个 List[C]。如果是这样，为什么我不允许访问“i”？好吧，它是一个构造参数，但它是一个*val*，因此可以被视为成员变量，不是吗？

我已经浏览了论坛中的其他一些相关帖子，清单和类型标签是可能的出路。但是，对于这个简单的用例，我不确定是否需要达到那个级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:30:32.100

这有一种“去过那里，做过那个”的陌生而熟悉的感觉。

你如何尝试改变这一点：

```
class  ContainerOfC [C] (s:Int) (implicit ordering: cOrdering[C]) { ... } 
```

在声明中*没有*类型参数的情况`C`下：

```
class  ContainerOfC(s:Int) (implicit ordering: cOrdering[C]) { ... } 
```

您显示的代码创建了一个类和特定类型`C`。当您稍后编写`class ContainerOfC[C]`时，这`C`是一个可以由任何其他标识符命名的类型参数。这与定义`class ContainerOfC[A]`where与前面代码中定义`A`的类/类型没有任何关系相同。`C`在您的示例中，类型参数`C`将隐藏之前定义的类的名称......错误消息表明`C`没有值`i`，这是因为编译器引用的`C`不是您所想的相同。

编辑：让您快速知道我们是否在同一页面上而不会陷入其他编译错误，这里有一些编辑可以使代码编译并使用更常用的缩进和大括号样式：

```
class C(val i: Int) {
  def mkString() = println("C.i =" + this.i)
}

object C {
  implicit val cOrdering = new Ordering[C] {
    def compare(a: C, b: C) = a.i compare b.i
  }
}

class ContainerOfC(s: Int)(implicit ordering: Ordering[C]) {
  var internalCollection = new collection.mutable.TreeSet[C]()

  def +(c: C): ContainerOfC = {
    this.internalCollection += c
    this
  }

  def mkStringOfElems() = {
    val y = this.internalCollection.toList
    println(y.head.i)
  }
} 
```

# android - 如何在屏幕上放大png

> ID：14784741
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:48:05.370
> 
> 标签：android

所以现在我正在玩游戏（android），我有几个问题。好的，所以每当我在屏幕上绘制任何不是 320x480 的图像时，它只会填充屏幕的一部分，例如，如果绘制 500x500 的图像，它只会显示图像的左上角，如果我绘制一个 32x32 它只会填充屏幕的一部分。这是一个问题，因为为了获得清晰的图像，我需要图像在像素方面更大，否则图像会出现像素化。基本上有一种方法可以将大图像压缩到设定的区域中，使 500x500 的图像适合 320x480 的区域而不切割图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:59:42.540

通常，最好使用缩放选项加载缩小版本的位图文件，如[Android 文档中所示。](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

但是，根据您的问题，我认为您只想读取图像文件的矩形部分。幸运的是，有一个类[`BitmapRegionDecoder`](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html) 可以做到这一点：

```
BitmapRegionDecoder brd = BitmapRegionDecoder.newInstance(<file_name>,true);

Bitmap b = brd.decodeRegion(new Rect(0,0,32,32), BitmapFactory.Options());
//-- In the Options object above, you can set scale, 
//-- which will read scaled down region and do it so faster--

//-- after you no longer need above resources anywhere, remember to free them --
brd.recycle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:11:12.527

将以下尺寸的图像放入文件夹中：

```
Hdpi: 480*800
Ldpi: 320*460
mdpi: 720*960
xdpi: 800*1280 
```

# php - 保存用户 cookie 不起作用

> ID：14784744
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:48:40.033
> 
> 标签：php, javascript, cookies

我想为访问者保存一个 cookie。我使用下面的代码，但它似乎对我不起作用。请指导我哪里错了

```
<script type="text/javascript">
    if(!isset($_COOKIE['visited_alreadyxxx']))
    {
        setcookie('visited_alreadyxxx' , 'true' , time()+60*60*24*7*365);  
        alert("hi");
    }
</script> 
```

[演示](http://8xxxd.com/session.php)

编辑：对不起上面的代码，下面的代码工作正常吗？

```
<?php 
    if(!isset($_COOKIE['visited_alreadyxxx']))
        {
            setcookie('visited_alreadyxxx' , 'true' , time()+60*60*24*7*365);  
          ?>

<script>alert("hi");</script>
<?
        }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:51:07.127

我不认为你可以访问这样的 cookie。它似乎是 PHP，与 Javascript 混合。

1.  isset() 是一个 PHP 函数
2.  $_COOKIE 是您在 PHP 中访问 c​​ookie 的方式
3.  setcookie 也是 PHP
4.  警报是Javascript。

Javascript 解释器不知道如何解析 PHP，将无法执行。

# internet-explorer - 如何确保链接仅在 Firefox 中打开

> ID：14784749
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:49:31.190
> 
> 标签：internet-explorer, firefox

要么使用 javascript，我如何确保只有在浏览器是 firefox 时才打开链接，否则显示警报？我有检查 IE 的代码，但我想确保浏览器是 firefox 并且只允许加载链接，否则留在链接所在的页面上。

人们通常会使用 IE 访问该页面，但我希望仅在 Firefox 中打开一些链接。

请建议。

**================编辑===============**

最后我正在为这段代码安顿下来：

```
function allow_if_ff(){
    var is_ff = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;  //true or false
    if (!is_ff){
        //window.open ("https://download.mozilla.org/?product=firefox-17.0.2esr&os=win&lang=en-US");
        alert('Please open in firefox');
        window.history.back();
        return false;
    }
} 
```

window.open 被注释掉的原因是因为窗口正在打开，但立即关闭。拥有它并不紧迫。所以我评论了它。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:57:23.863

`var is_ff = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;` 这将用于检测 ff

# algorithm - 最短路径：DFS、BFS 还是两者兼而有之？

> ID：14784753
> 
> 赞同：21
> 
> 时间：2013-02-09T03:50:08.490
> 
> 标签：algorithm, graph, depth-first-search, breadth-first-search

我知道仅 BFS 就可以在未加权的图中找到最短路径，但我也在几个网站上看到人们声称 BFS 或 DFS 都可以做到这一点。我只是想确认这些可能是错误的，并且只有 BFS 可以做到这一点（即使在进行了快速的谷歌搜索之后，我也不是完全有信心）。如果我不正确，有人可以解释一下 DFS 如何提供最短路径。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-09T03:57:02.520

DFS 不一定会在无向图中产生最短路径。BFS 将是这里的正确选择。

例如，考虑一个通过取三角形的角并将它们连接起来形成的图形。如果您尝试使用 DFS 找到从一个节点到另一个节点的最短路径，那么您将得到错误的答案，除非您沿着直接连接起始节点和目标节点的边。

正如@nhahtdh 在下面指出的那样，有一种称为*迭代深化*的 DFS 变体，其中您运行 DFS 的最大深度为一、二、三等，直到找到目标。这将始终找到最短路径，并且使用比 BFS 更少的内存。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T05:37:57.837

迭代加深搜索（IDS），由多轮深度受限搜索（基本上是 DFS，但如果达到深度限制 d 则停止搜索）组成，从 1 逐渐增加深度，将在未加权图中找到最短路径.

```
// Iterative deepening search
// isGoal is a function that checks whether the current node is the goal
function ids(graph, start, isGoal) { 
    maxDepth = 1
    do {
        found = dls(graph, start, isGoal, maxDepth, 0)
        // Clear the status whether a node has been visited
        graph.clearVisitedMarker();
        // Increase maximum depth
        depth = depth + 1

    // You can slightly modify the dls() function to return whether there is a
    // node beyond max depth, in case the graph doesn't have goal node.
    } while (found == null)

    return found
}

// Depth-limited search
// isGoal is a function that checks whether the current node is the goal
function dls(graph, currentNode, isGoal, maxDepth, currentDepth) {
    if (graph.visited(currentNode)) {
        return null
    }
    graph.setVisited(currentNode)

    if (isGoal(currentNode)) {
        return currentNode
    }

    // Stop searching when exceed max depth
    // This is the only difference from DFS
    if (currentDepth >= maxDepth) {
        return null
    }

    for (adjNode in graph.getAdjacent(currentNode)) {
        found = dls(graph, adjNode, goal, maxDepth, currentDepth + 1)
        if (found != null) {
            return found
        }
    }

    return null
} 
```

它可以工作，因为您逐渐增加了与起始节点允许的距离：由于深度限制，距离为 a + 1 的节点将不会在距离为 a 的节点之前探索。

一个常见的问题是距离为 a 的节点将被重新访问 (d - a + 1) 次，其中 d 是到达目标的最短路径的深度。如果我们要谈论性能，这取决于图或搜索树。在具有大分支因子的搜索树上，深度 d 处生成的节点成为主导项，因此重访问题不大。由于指数空间要求，BFS 无法用于这种情况，但 IDS 将仅使用多项式空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-19T10:18:29.547

我知道这里的派对迟到了，但是。DFS 和 BFS 之间有几个区别（**简短的回答：它们都可以在未加权的图中找到最短路径**）。

1.  BFS：通常由队列实现（先进先出数据结构）当您逐层耗尽所有邻居顶点直到到达目标节点并在该节点处停止时，例如：如果没有，则从第 1 层到达所有节点找到所有节点层进入队列，并继续为第 2 层做，依此类推。它将保证目标节点是迄今为止找到的最短层（因为它在找到目标节点后停止，它不会遍历图中的所有节点（它在速度方面比DFS快））

2.  DFS：通常由堆栈实现（先进后出数据结构）DSF 从给定点耗尽所有节点，直到它无法再探索。但是当它找到目标节点时，不能保证路径是最短路径，所以它必须遍历图中的所有节点以确保路径是最短的。顺便提一句

@alandong 答案是错误的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-25T23:14:26.177

理解的角度：没有权重和方向的图中的 BFS 与 Dijkstra（权重 = 1，一个方向）相同，因此了解 Dijkstra 为何正确可能会有所帮助。如果我通过了，将添加更多细节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-27T17:18:02.670

如果实施得当，BFS 和 DFS 都会给出从 A 到 B 的最短路径。

让我们把整个图想象成一棵树。基本上，BFS 将运行每一层树并通过遍历所有层来找出路径。相比之下，DFS 将运行到每个叶节点，并在沿着该路径遍历节点时找出路径。他们都在使用穷举寻路搜索，所以，如果你正确地实现了这些算法，他们都会保证找到最短路径。

使用 BFS 和 DFS 的优缺点如下：

BFS，使用更多内存，遍历所有节点

DFS，使用更少的内存，如果您幸运地选择包含您感兴趣的节点的叶子节点路径可能会稍微快一些。（不一定必须遍历所有节点）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-04T17:58:01.487

我对使用 dfs 在未加权图上查找最短路径以及加权图上最小加权路径的理解：

A) Dfs 也可以求解最短路径（也就是最小加权路径）。唯一的缺点是多条边重新访问已经访问过的节点所产生的指数时间复杂度。

B）如果要求找到最短路径的长度（也就是最小的权重）：缓存从源到当前节点的距离似乎首先解决了上述时间复杂度问题。但事实上不，它仍然没有。因为每次为缓存节点提供更好的距离（即，从源到当前节点的新路径的距离小于当前节点处已经缓存的距离），必须再次重新计算该节点。

C) 结论：Dfs 解决了最短路径（也是最小权重）问题，但它从来都不是最优的。相反，它在时间上最差（读取指数）。

# ruby-on-rails - Cocoon 茧：插入后的咖啡脚本

> ID：14784754
> 
> 赞同：0
> 
> 时间：2013-02-09T03:50:24.467
> 
> 标签：ruby-on-rails, coffeescript, jquery-chosen, cocoon-gem

我有一个使用 Cocoon 的嵌套表单。在嵌套表单中，我有一个要调用 selected() 的选择菜单。

通常我会在代码中包含以下内容

```
$('#cust_select').chosen() 
```

但是，我需要在使用诸如添加嵌套字段后调用它

```
 $('#container').bind('cocoon:before-insert', function(e, inserted_item) {
      // ... do something
    }); 
```

但是，我无法让它工作，所以有 2 个问题

1.  这段代码的咖啡脚本版本是什么？
2.  insert_item 是要使用的实际代码还是应该将 item 替换为模型名称？

有什么想法吗？

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:56:31.000

**1)** CoffeeScript 版本是：

```
$('#cust_select').chosen() # just the same

$('#container').bind 'cocoon:before-insert', (e, inserted_item) -> 
  # ... do something with the inserted item 
```

**2）** inserted_item 确实是插入的项目：

从[这里](https://github.com/nathanvda/cocoon#callbacks-upon-insert-and-remove-of-items)

> 要收听事件，您的 javascript 中有以下代码：
> 
> ```
> $('#container').bind('cocoon:before-insert', function(e, inserted_item) {
>    // ... do something
> }); 
> ```
> 
> 其中 e 是事件，第二个参数是插入或删除的项目。这允许您更改标记，或添加效果/动画（参见下面的示例）。

# html - 简单的 CSS：将对象从下到上移动

> ID：14784755
> 
> 赞同：0
> 
> 时间：2013-02-09T03:50:36.933
> 
> 标签：html, css, whmcs

我正在处理 whmcs 安装和编辑默认主题。我正在尝试将 youtube 视频移动到域工具旁边，但似乎无法使其正常工作。

看看：http: [//jaberminia.com/](http://jaberminia.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T04:11:13.810

您需要做的就是：

包含域输入的 div（*在 youtube 视频之前*）：

```
{
    float: left;
    width: 440px; // more or less
} 
```

`input.bigfield`班级：

```
input.bigfield {
    width: 80%; // more or less
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:00:46.417

??

```
 <div id="video-box" align="right" style="float:left"> 
```

# python - 在 python 中编写算法时，类型对象不可下标

> ID：14784758
> 
> 赞同：0
> 
> 时间：2013-02-09T03:50:54.497
> 
> 标签：python, python-3.x

我正在尝试将我的算法转换为 python 代码。算法如下：

```
For i = 1 To n
                For j = 1 To (m - 1)
                    del1 = C(i - 1, j) - C(i - 1, j - 1)
                    del2 = C(i - 1, j + 1) - C(i - 1, j)
                    If del2 = 0 Then
                        r = 0
                    Else
                        r = del1 / del2
                    End If
Next i 
```

我试图一步一步地转换上面的代码块。对于del1，我尝试编写python代码如下：

```
del1 = [[C[i-1,j]-C[i-1,j-1] for j in range(1,(m-1))]for i in range [0,int(n)]] 
```

我收到错误 TypeError: 'type' object is not subscriptable。谁能给我关于如何将上述算法转换为python代码的起点？

**编辑：**

```
C = [[0 for j in range(0,int(m))]for i in range(0)]
C = [[1 for i in range(0,int(n))]for j in range(0)] 
```

谢谢。

贾巴巴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T03:53:18.857

应该：

```
del1 = [[C[i-1,j]-C[i-1,j-1] for j in range(1,(m-1))]for i in range(0,int(n))] 
```

`[]`->`()`在最后`range`

`C`如果类似于`numpy`支持多维切片的数组，则上述表示法将起作用。如果`C`是列表列表，则以下内容应该有效：

```
del1 = [[C[i-1][j]-C[i-1][j-1] for j in range(1,(m-1))]for i in range(0,int(n))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:53:36.907

看起来像你想要`range(0,int(n))`的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T09:53:37.470

在 python 中，[] 中的任何内容，即方括号都称为可下标的——它代表一个数组概念。

但是，在循环中，我们可能会使用范围，在这里我们可以使用 [] 而不是 () 括号的拼写错误。

范围值不是下标格式或数组的可分离元素。

因此，唯一的解决方案是将 [] 更改为 () 并运行..

# android - 如何在 onRestoreInstanceState() 中设置视图的背景颜色

> ID：14784761
> 
> 赞同：0
> 
> 时间：2013-02-09T03:51:46.103
> 
> 标签：android, view, background-color, oncreate

我目前正在尝试学习使用视图和状态。我通常可以在如下函数中设置它的颜色：

```
 View mColorRegion = findViewById(R.id.color_region);
    mColorRegion.setBackgroundColor(Color.CYAN); 
```

但是，我似乎无法在**onRestoreInstanceState()**中设置颜色，因为

```
 mColorRegion.setBackgroundColor(savedInstanceState.getInt("color")); 
```

但是，使用与 TextView 相同的视图，我能够恢复文本，如下所示：

```
 TextView mText = (TextView)findViewById(R.id.color_region);
    mText.setText(savedInstanceState.getString("text"); 
```

有什么区别，以及如何在**onRestoreInstanceState()**中设置背景颜色？

* * *

编辑：自从原始帖子以来，我注意到两件事：

1)`mColorRegion.setBackgroundColor(Color.CYAN)`似乎也不适用于**onCreate()**。

2）即使按下按钮时以下函数正确更改了视图颜色，但如果我直接从**onRestoreInstanceState()**调用它，它也不起作用：

```
 public void centerButton1(View clickedButton) {
        mColorRegion.setBackgroundColor(Color.CYAN);
    } 
```

唔...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T00:56:09.790

许多人不喜欢使用`android:configChanges="orientation|screenSize"`，例如[Google 的 Dianne Hackborn](https://stackoverflow.com/questions/5335665/avoid-reloading-activity-with-asynctask-in-orientation-change-in-android/5336057#5336057)。一方面，这将使您的应用程序在多种布局之间切换的过程变得非常困难（例如，如果您想要一种布局用于横向，一种用于纵向），因为您必须完成 Android 通常所做的所有工作在**onConfigurationChanged()**中自动为您服务。

反正我也遇到过这种问题。我正在创建一个 DialogPreference，并且在旋转时我无法更改**onRestoreInstanceState(savedInstanceBundle)中***SeekBar*的进度......所以如果你不能使用**onCreate(savedInstanceBundle)**或**onActivityCreated(savedInstanceBundle)**（对于片段） ，这就是我的建议恢复视图对象的状态：

 ********1）**创建一个名为“mRestoredBGColor”的私有类成员，

`private int mRestoredBGColor = -1;`

**2)**在**onRestoreInstanceState() 中：**

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) 
       mRestoredBGColor = savedInstanceState.getInt("key_you_used_in_onSaveInstanceState");
} 
```

**3)**然后在**onResume()**中，因为 onRestoreInstanceState() 是在 onStart() 之后，但在 onResume() 之前调用的

```
@Override
public void onResume(){
   super.onResume();
   if(mColorRegion != null && mRestoredBGColor != -1){
       mColorRegion.setBackgroundColor(mRestoredBGColor);
       mRestoredBGColor = -1; //to make sure it only sets this once per rotation.
   }
} 
```

希望这可以帮助某人。我相信总有另一种方法（除非你想快速旋转 WebViews ......）而不是使用`android:configChanges="orientation|screenSize"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:37:25.983

所以我找到了一个“半解决方案”。如果您将以下行添加到*AndroidManifest.xml*，它将在方向更改期间保留颜色：

```
 android:configChanges="orientation|screenSize" 
```

但是，这仍然不能回答为什么我可以在**onRetoreInstanceState()**或**onCreate()**中设置文本而不是颜色...******

# image - 如何将 WORDPRESS 热链接图像（用于 exp：Image.jpg）重定向到它所在的帖子/页面？

> ID：14784762
> 
> 赞同：3
> 
> 时间：2013-02-09T03:51:52.703
> 
> 标签：image, wordpress, redirect

最近谷歌改变了图像搜索，结果大部分流量点击查看原始图像并将它们发送到直接图像文件。

如果他们单击图像文件，我已经更改了我的 .htaccess 并停止所有热链接并重定向到我的主页。

最近我也尝试过是否可以重定向到图片所在的帖子或页面。

通过以下代码

```
<?php 
require('../wp-blog-header.php');
$imageURL = strip_tags( $_GET['id'] );
if imageURL!== "") {    
  $query = "SELECT ID FROM $wpdb->posts WHERE post_type = 'attachment'AND post_parent > '0' AND guid = '$imageURL'";    
  $linkedImage = $wpdb-get_row($query);    
  $attachmentUrl = get_attachment_link($linkedImage->ID);    
  if($attachmentUrl !== "" && !is_numeric(stripos($attachmentUrl, "attachment_id=0"))) {
    header("HTTP/1.1 302 Found");        
    header("Location: ". $attachmentUrl);        
    exit;    
  }
}
$newUrl = get_site_url() . "/image-not-found";
header("HTTP/1.0 404 Not Found");
header("Location: " . $newUrl);
exit;
?> 
```

但它重定向到[http://www.mydomain.com/?attachment_id=](http://www.mydomain.com/?attachment_id=)

id 为 nil 或无法获取正确的 id

我在 Wordpress CMS 版本 3.5.1 中的网站

任何人都可以帮助如何重定向到正确的附件页面以获取 .jpg 文件直接请求。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T21:34:59.890

仅当请求的 URL 上有一个与图像 URL 完全匹配的 ID 参数时，您的代码才有效，例如[http://www.example.com/?id=http://www.example.com /uploads/Some-Image.jpg](http://www.example.com/?id=http://www.example.com/uploads/Some-Image.jpg)

是这样吗？即便如此，你也不应该使用它，`id`因为它是 WP 中其他东西的保留参数。在您的 .htaccess 中，您应该将[http://www.example.com/uploads/Some-Image.jpg](http://www.example.com/uploads/Some-Image.jpg)重定向到，例如[http://www.example.com/?image_redirect=http://www.example .com/uploads/Some-Image.jpg](http://www.example.com/?image_redirect=http://www.example.com/uploads/Some-Image.jpg)。然后使用`$imageURL = $_GET['image_redirect']`.

其他注意事项：`strip_tags`不会使字符串安全地用作 SQL 查询。在 WordPress 中，您可以`esc_sql($string)`做到这一点。另外，您应该使用`if ( $imageUrl != '' )`，而不是 with `!==`。第 5 行有一个错误，它应该说`$wpdb->get_row`，你当前有一个减号。我认为这些是错别字。最后，您不应该使用`Location:`带有状态码 404 的标头。

# python - Teamcity pytest 插件和单元测试报告

> ID：14784765
> 
> 赞同：7
> 
> 时间：2013-02-09T03:52:28.630
> 
> 标签：python, teamcity, pytest

我们最近放弃了我们的自定义测试运行器/发现工具，转而使用 py.test。为了在 teamcity 下运行时进行正确的单元测试报告，存在一个 pytest 插件：[https ://github.com/JetBrains/teamcity-python](https://github.com/JetBrains/teamcity-python)

安装时：

> python setup.py 安装

该插件被 pytest 正确发现。但是，我们不想在我们的构建机器上安装 pytest 和这个插件。相反，我们宁愿将它们打包为我们项目“工具”目录的一部分。

如何安装/配置 py.test 以“发现”这个插件。我们尝试向`pytest_plugins = "teamcity"`pytest 的 setup.cfg 文件添加几个变体，但没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T13:26:36.820

没有“pytest_plugins”配置变量（请参阅“py.test -h”末尾的输出）。但是，环境变量“PYTEST_PLUGINS”包含逗号分隔的 python 导入路径。因此，如果您的插件位于“teamcity/util/ myplugin.py" 你可以这样设置：

```
export PYTEST_PLUGINS=teamcity.util.myplugin 
```

您还可以使用命令行选项“-p teamcity.util.myplugin”来实现类似的效果。然后将其添加到您的 setup.cfg 部分：

```
[pytest]
addopts = -p teamcity.util.myplugin 
```

# c - ClutterActor 属性

> ID：14784769
> 
> 赞同：0
> 
> 时间：2013-02-09T03:53:13.717
> 
> 标签：c, glib, clutter

我刚开始玩弄杂乱，我遇到了一个关于在 ClutterActor 上设置属性的问题。

我想设置枢轴点属性，在搜索参考后，似乎最适合的函数是 clutter_container_child_set_property （我找不到任何直接在演员上操作的东西），所以我正在尝试

```
ClutterPoint point = {128,64};
clutter_container_child_set_property(CLUTTER_CONTAINER(stage), box, "pivot-point", point); 
```

但我得到一个错误，它期望点是 GValue 类型，我如何将杂波点更改为 gvalue？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:18:21.833

`clutter_container_set_property`可能不是正确的方法，但是`ClutterPoint`在 a 中填充 a`GValue`看起来像这样：

```
GValue value;
g_value_init (&value, CLUTTER_TYPE_POINT);
g_value_set_boxed (&value, &point); 
```

一旦你有了，你可以使用[g_object_set_property](http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#g-object-set-property)来设置[ClutterActor:pivot-point](http://developer.gnome.org/clutter/stable/ClutterActor.html#ClutterActor--pivot-point)属性：

```
g_object_set_property (G_OBJECT(box), "pivot-point", &value); 
```

或者你可以让 GObject 为你处理 GValue 的东西并使用[g_object_set](http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#g-object-set)：

```
g_object_set (G_OBJECT(box), "pivot-point", &point, NULL); 
```

如果由于其他原因您还没有`ClutterPoint`坐下来，最简单的方法就是使用[clutter_actor_set_pivot_point](http://developer.gnome.org/clutter/stable/ClutterActor.html#clutter-actor-set-pivot-point)：

```
clutter_actor_set_pivot_point (box, 128, 64); 
```

当然，如果您已经拥有`ClutterPoint`，您也可以只使用`point.x`and`point.y`代替`128`and `64`。

# javascript - 从其余代码中分离出 d3 转换

> ID：14784771
> 
> 赞同：1
> 
> 时间：2013-02-09T03:53:34.557
> 
> 标签：javascript, d3.js, transition

我是 java 脚本和 d3 的新手，我正试图让我的头脑开始过渡。谁能解释为什么最后一段代码（如下）不起作用？也就是说，当我将 .transition 语句与原始 svg 绑定时，调用行转换很好。但是，当我将 yaxis 名称从“price($)”分别转换为“New Price($)”时，什么也没有发生。

我问的原因是我也想分离线路径的转换调用，但如果我不能让轴名称工作，我认为我对路径转换工作没有太大希望。

```
 svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
  .append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", 6)
  .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("Price ($)");

 svg.append("path")
  .datum(data)
  .attr("class", "line")
  .attr("d", line)
  .transition()
  .duration(1000)
  .attr("d",line2);

 svg.append("g")
  .transition()
  .duraction(1000)
  .text("New Price ($)"); 
```

# java - GroupLayout 使动作监听器失去焦点

> ID：14784773
> 
> 赞同：1
> 
> 时间：2013-02-09T03:53:40.987
> 
> 标签：java, swing, layout-manager, keylistener, grouplayout

我最近开始使用 java GUI - 最合适的是 Swing。

现在我遇到了这个问题，我无法解决。我想处理一个扩展`JPanel`和实现`ActionListener`（某些东西）的游戏板，如下所示：

```
+----------------+
| Panel1 | Board |
|________|       |
| Panel2 |       |
|        |       |
+----------------+ 
```

但我得到了这个：

```
+----------------+
| Panel1 | Board |
|________|_______|
| Panel2 | EMPTY |
|        |       |
+----------------+ 
```

我首先尝试使用内部`GridLayout`带有 ed 面板的主窗格来执行此操作，`BoxLayout`但这不起作用。然后我发现`GroupLayout`，这导致我遇到上述情况，并使我在董事会课程中失去了听众的控制/注意力。

[编辑] 我还尝试更改板的最小和首选尺寸，也没有奏效。

谁能告诉我为什么会这样？

恢复：

1.  为什么组布局对 Board 面板执行此操作？无论如何我可以修复它吗？
2.  因为在 Board 类里面我做了 setFocusable(true); 为什么它不能在组布局内获得动作/事件？（没有它也可以正常工作）

这是代码：

游戏课

```
...
public ConstructorOfTheClassThatExtendsJFrame() {

        statusbar = new JLabel(" 0");
        panel = new JPanel();

        panel.setBorder(BorderFactory.createLineBorder(Color.black));
        this.getContentPane().add(panel);

        Board board = new Board(this);

        GroupLayout layout = new GroupLayout(panel);
        panel.setLayout(layout);

        //Specify automatic gap insertion:
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);

        //PANEL 1
        col1 = new JPanel();
        col1.setBorder(BorderFactory.createLineBorder(Color.black));

        //PANEL 3
        col3 = new JPanel();
        col3.add(statusbar);

        layout.setHorizontalGroup(
              layout.createSequentialGroup()
                              .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(col1)
                    .addComponent(col3))
                .addComponent(board)
              );
        layout.setVerticalGroup(
              layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(col1)
                    .addComponent(board))
                .addComponent(col3)
              );

        setSize(400, 400);
        setResizable(false);
        setTitle("GameOn");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
   } 
```

和我的董事会课程（来自[ZetCode](http://zetcode.com/tutorials/javagamestutorial/tetris/)）

```
public Board(Game parent) {

        setFocusable(true);  
        curPiece = new Shape();
        timer = new Timer(400, this);
        timer.start(); 

        statusbar =  parent.getStatusBar();
        board = new Tetrominoes[BoardWidth * BoardHeight];
        addKeyListener(new TAdapter());
        clearBoard();  
     }
...
class TAdapter extends KeyAdapter {
        public void keyPressed(KeyEvent e) {

            if (!isStarted || curPiece.getShape() == Tetrominoes.NoShape) {  
                return;
            }

            int keycode = e.getKeyCode();

            if (keycode == 'p' || keycode == 'P') {
                pause();
                return;
            }

            if (isPaused)
                return;

            switch (keycode) {
            case KeyEvent.VK_LEFT:
                tryMove(curPiece, curX - 1, curY);
                break;
            case KeyEvent.VK_RIGHT:
                tryMove(curPiece, curX + 1, curY);
                break;
            case KeyEvent.VK_DOWN:
                //tryMove(curPiece, curX, curY - 1);
                oneLineDown();
                break;
            case KeyEvent.VK_UP:
                tryMove(curPiece.rotateRight(), curX, curY);
                break;
            case KeyEvent.VK_SPACE:
                dropDown();
                break;
            case 'd':
                oneLineDown();
                break;
            case 'D':
                oneLineDown();
                break;
            case KeyEvent.VK_SHIFT:
                newPiece();
                break;
            }

        } 
```

* * *

[编辑] 经过一些建议，这里是关键事件工作但对齐仍然错误的代码的 sscce 版本：

**游戏类（这个案例是 hello world 但仍然是）**

```
import javax.swing.*;
import java.awt.BorderLayout;
import java.awt.Color;

public class HelloWorldSwing{

    private static void createAndShowGUI(){
        //Create frame
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel();
        panel.setBorder(BorderFactory.createLineBorder(Color.black));
        frame.getContentPane().add(panel);

        //Create the new group layout
        GroupLayout layout = new GroupLayout(panel);
        panel.setLayout(layout);

        //We specify automatic gap insertion:
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);

        //PANEL 1
        JPanel col1 = new JPanel();
        col1.setBorder(BorderFactory.createLineBorder(Color.black));

        //PANEL 2
        JLabel label2 = new JLabel("Col2");
        Board board = new Board(label2, new BorderLayout());

        //PANEL 3
        JPanel col3 = new JPanel();

        JLabel label = new JLabel("Col1");

        JLabel label3 = new JLabel("Col3");

        col1.add(label);
        board.add(label2,BorderLayout.PAGE_END);
        col3.add(label3);

        layout.setHorizontalGroup(
                   layout.createSequentialGroup()
                      .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                           .addComponent(col1)
                           .addComponent(col3))
                      .addComponent(board)
                );
                layout.setVerticalGroup(
                   layout.createSequentialGroup()
                      .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                           .addComponent(col1)
                           .addComponent(board))
                      .addComponent(col3)
                );

        frame.setSize(300, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args){
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

**和董事会类：**

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.BorderLayout;
import javax.swing.JLabel;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class Board extends JPanel implements ActionListener {

    JLabel blabel;
    public Board(JLabel label, BorderLayout b) {
        super(b);
        setFocusable(true);
        blabel = label;
        addKeyListener(new TAdapter());
     }

    public void actionPerformed(ActionEvent e) {

    }

    class TAdapter extends KeyAdapter {
        public void keyPressed(KeyEvent e) {
            int keycode = e.getKeyCode();

            switch (keycode) {

            case KeyEvent.VK_LEFT:
                blabel.setText("Left");
                break;
            case KeyEvent.VK_RIGHT:
                blabel.setText("Right");
                break;
            case KeyEvent.VK_DOWN:
                blabel.setText("Down");
                break;
            }
        }
    }
} 
```

* * *

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:28:35.663

我在您的代码中看到一件事可能是一个问题，并且可以毫不费力地解决：您正在使用 KeyListeners。这通常应该在 Swing GUI 中避免，相反，您应该尝试使用更灵活且不需要绑定组件具有焦点的键绑定[。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

关于您的 GroupLayout 大小问题，我不得不承认对 GroupLayout 的使用非常薄弱，实际上我尽量避免使用它。要考虑的其他布局包括 GridBagLayout 或 MigLayout。

**编辑：**
但是，我现在已经阅读了 GroupLayout 教程，包括[标记](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)为“强制组件可调整大小（允许缩小和增长）：”的部分。当您将组件添加到布局时，您似乎必须添加一些参数，在我的代码示例中如下所示：

```
.addComponent(board2, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE) 
```

例如，这是我的代码，显示了根据需要布置的组件，还显示了 KeyBindings 和 PropertyChangeListener 的使用。请注意，通过使用 Key Bindings，焦点不再是一个大问题，因为我不必将 JPanel 设置为可聚焦也不给它焦点：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;

/**
 * uses GroupLayout and Key Bindings
 * @link http://stackoverflow.com/questions/14784773/grouplayout-makes-action-listener-loses-focus
 * @author Pete
 *
 */
@SuppressWarnings("serial")
public class HelloWorldSwing2GroupLayout extends JPanel {
   private JLabel[] labels = {new JLabel("A"), new JLabel("B")};
   private Board2 board2 = new Board2();
   private JLabel directionLabel = new JLabel();

   public HelloWorldSwing2GroupLayout() {
      directionLabel.setHorizontalAlignment(SwingConstants.CENTER);
      board2.add(directionLabel);

      board2.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent pcEvt) {
            if (Board2.DIRECTION.equals(pcEvt.getPropertyName())) {
               Direction dir = (Direction)pcEvt.getNewValue();
               if (dir != null) {
                  directionLabel.setText(dir.getText());
               } else {
                  directionLabel.setText("");
               }
            }
         }
      });

      GroupLayout layout = new GroupLayout(this);
      setLayout(layout);

      int lWidth = board2.getPreferredSize().width;
      int lHeight = board2.getPreferredSize().height / 2;
      Dimension preferredSize = new Dimension(lWidth, lHeight);
      for (JLabel label : labels) {
         label.setHorizontalAlignment(SwingConstants.CENTER);
         label.setVerticalAlignment(SwingConstants.CENTER);
         label.setBorder(BorderFactory.createLineBorder(Color.black));

         // please, please forgive me Jeanette! This is for demo purposes only.
         label.setPreferredSize(preferredSize);
      }

      layout.setAutoCreateGaps(true);
      layout.setAutoCreateContainerGaps(true);
      layout.setHorizontalGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                  .addComponent(labels[0], 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                  .addComponent(labels[1], 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addComponent(board2, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
      );
      layout.setVerticalGroup(layout.createParallelGroup()
            .addGroup(layout.createSequentialGroup()
                  .addComponent(labels[0], 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                  .addComponent(labels[1], 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addComponent(board2, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)      
      );
   }

   private static void createAndShowGui() {
      HelloWorldSwing2GroupLayout mainPanel = new HelloWorldSwing2GroupLayout();

      JFrame frame = new JFrame("HelloWorldSwing2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class Board2 extends JPanel {
   private static final int PREF_W = 200;
   private static final int PREF_H = 400;
   public static final String DIRECTION = "direction";
   private Direction direction = null;

   public Board2() {
      setBorder(BorderFactory.createTitledBorder("Board2"));
      InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);
      ActionMap actionMap = getActionMap();

      for (Direction dir : Direction.values()) {
         inputMap.put(dir.getKeyStroke(), dir.getText());
         actionMap.put(dir.getText(), new MyArrowBinding(dir));
      }
   }

   private class MyArrowBinding extends AbstractAction {
      private Direction dir;

      public MyArrowBinding(Direction dir) {
         super(dir.getText());
         this.dir = dir;
         putValue(ACTION_COMMAND_KEY, dir);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         setDirection(dir);
      }
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public void setDirection(Direction direction) {
      Direction oldValue = this.direction;
      Direction newValue = direction;
      this.direction = newValue;

      firePropertyChange(DIRECTION, oldValue, newValue);
   }

   public Direction getDirection() {
      return direction;
   }
}

enum Direction {
   UP("Up", KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0)),
   DOWN("Down", KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0)),
   LEFT("Left", KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0)),
   RIGHT("Right", KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0));

   Direction(String text, KeyStroke keyStroke) {
      this.text = text;
      this.keyStroke = keyStroke;
   }
   private String text;
   private KeyStroke keyStroke;

   public String getText() {
      return text;
   }

   public KeyStroke getKeyStroke() {
      return keyStroke;
   }

   @Override
   public String toString() {
      return text;
   }
} 
```

看起来像这样：
![在此处输入图像描述](../Images/7923a9d9ffb96177587f8e09d1ade691.png)

我非常喜欢将 PropertyChangeListeners 用于此类事情，因为它可以轻松解耦您的代码。现在 Board2 类不必担心其他类对其方向的任何变化有何反应。它所要做的就是将这个变化广播给任何正在听它的类，它们每个都按照他们认为合适的方式做出响应。

# jquery - 使用ticker的浏览器兼容性显示

> ID：14784775
> 
> 赞同：1
> 
> 时间：2013-02-09T03:54:29.247
> 
> 标签：jquery, html, css, cross-browser, ticker

我希望在我的页面顶部向用户显示警告代码，如果用户没有使用特定版本的浏览器，例如如果用户使用的是 IE6，则会显示一条消息，那么我希望显示“不支持此浏览器”的消息，所以请升级”。

这里的问题首先是如何检查哪个浏览器用户正在使用，其次是如何在页面顶部创建 Javascript/Jquery 或任何更简单的代码，它应该只显示一次，并且应该有一个用于隐藏它的十字按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:11:08.853

您想为哪些浏览器/版本显示消息？

如果您只是为较旧的 IE 执行此操作，则可以添加包含该消息的 HTML，并将“old-ie”类添加到它的父容器中。为您的主样式表添加一个选择器并为其`.old-ie`赋予`display: none;`属性。

使用条件注释，您可以覆盖 ie6.css、ie7.css（或内联 CSS）中的主样式表并为 . 添加另一个选择器`.old-ie`，但这次给它`display: block;`。

如果您想针对旧版本的 Safari、Chrome、Firefox 等，您需要使用上述 mikakun 的功能检测。

# linux - 公平、安全、高效、多语言的沙盒

> ID：14784778
> 
> 赞同：3
> 
> 时间：2013-02-09T03:54:58.617
> 
> 标签：linux, sandbox, jail

我正在开发一个在线判断类型系统，其中可能有 100 个左右不受信任的可执行文件将同时运行并评估相同的输入数据。

我希望每个可执行文件都限制在预定义资源池的 CPU、内存、磁盘空间等的相等份额。例如，如果资源池设置为机器 CPU 的 3/4、3 GB 内存、300 GB 磁盘，并且正在运行 2 个可执行文件，则每个将获得 3/8 的 CPU、1.5 GB 内存、150 GB的磁盘。如果另一个人加入，资源将被重新调整为三个相等的切片。这是为了防止恶意或有缺陷的可执行文件从他人那里窃取资源，并为每个人提供平等的资源。

理想情况下，我还希望可执行文件不局限于单一语言（例如，让用户使用他们喜欢的任何语言进行开发——C、C++、Java、Python 等）。

使用整个 VM 或类似 OpenVZ 的东西似乎有点过头了。是否有更轻量级的替代方案，基本上为每个可执行文件使用单独的进程，同时限制其资源，禁用网络访问、进程生成等？我正在寻找一个轻量级解决方案的部分原因是有相当多的输入数据——宁愿不必将其复制到每个可执行文件，而是让它们从共享内存中读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:00:11.067

也许为每个进程创建不同的用户ID，然后通过“ulimit”来限制它们就足够了。Debian 下 bash 的 ulimit 手册页：

```
ulimit [-HSTabcdefilmnpqrstuvx [limit]] 
```

在允许这种控制的系统上，提供对 shell 可用资源和由它启动的进程的控制。-H 和 -S 选项指定为给定资源设置硬限制或软限制。硬限制一旦设置就不能由非 root 用户增加；软限制可以增加到硬限制的值。如果既没有指定 -H 也没有指定 -S，则同时设置软限制和硬限制。limit 的值可以是为资源指定的单位中的数字，也可以是特殊值 hard、soft 或 unlimited 之一，它们分别代表当前的硬限制、当前的软限制和无限制。如果省略limit，则打印资源软限制的当前值，除非给出-H 选项。当指定多个资源时，限制名称和单位将打印在值之前。其他选项解释如下：

```
 -a     All current limits are reported
          -b     The maximum socket buffer size
          -c     The maximum size of core files created
          -d     The maximum size of a process's data segment
          -e     The maximum scheduling priority ("nice")
          -f     The maximum size of files written by the shell and its children
          -i     The maximum number of pending signals
          -l     The maximum size that may be locked into memory
          -m     The **maximum resident set size** (many systems do not honor this limit)
          -n     The maximum number of open file descriptors (most systems do not allow this value to be set)
          -p     The pipe size in 512-byte blocks (this may not be set)
          -q     The maximum number of bytes in POSIX message queues
          -r     The maximum real-time scheduling priority
          -s     The maximum stack size
          -t     The maximum amount of cpu time in seconds
          -u     The maximum number of processes available to a single user
          -v     The maximum amount of virtual memory available to the shell and, on some systems, to its children
          -x     The maximum number of file locks
          -T     The **maximum number of threads** 
```

I think that limiting the threads to 1 you can get a fair distribution of CPU computation time.

Limit also the maximum RSS.

# ios - Xcode 4.5.2 构建但不会存档

> ID：14784782
> 
> 赞同：2
> 
> 时间：2013-02-09T03:56:08.323
> 
> 标签：ios, xcode

我正在尝试让我的 Xcode 工作区包含一个应用程序 + 2 个静态库以成功存档。一切都很好。我已经逐字跟踪了这个 Apple 文档[Using Static Libraries in iOS](http://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/creating.html)，它在构建时效果很好，但存档总是留下 1 个找不到的头文件。

我可能已经查看了所有其他相关的帖子，并尝试了在头文件中拖动、使用复制头构建阶段、将用户头搜索路径更改为各种派生等的多种排列方式。似乎没有“正确”的方法来解决这个问题。

我在我的智慧尽头。愿意尝试任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:57:20.760

这里有同样的问题。我只能通过以下方式解决它。

在库的副本标题构建阶段，有不同的部分，公共、私有和项目。所有受影响的标题（即在构建中识别但在存档中被忽略）都在项目部分中。将它们拖到公共部分对我来说是诀窍。

# jquery - jQuery-ui 自动完成多个值按字母顺序排序结果

> ID：14784794
> 
> 赞同：0
> 
> 时间：2013-02-09T03:57:34.330
> 
> 标签：jquery, jquery-ui, sorting, jquery-ui-autocomplete

参考这个问题[Sorting Autocomplete UI Results based on match location](https://stackoverflow.com/questions/8302534/sorting-autocomplete-ui-results-based-on-match-location)，有一个提供单值 jQuery 自动完成的解决方案，但是否有可能为多值 jQuery 自动完成获得类似的解决方案（[http://jqueryui.com/autocomplete/ #多个](http://jqueryui.com/autocomplete/#multiple)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:40:18.070

这里唯一的区别是您需要确保并`extractLast`像您链接到的演示一样调用。这是应该使用多个值的完整代码（特别注意`source`选项）：

```
$("#tags")
    .on("keydown", function (event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
            event.preventDefault();
        }
    })
    .autocomplete({
        minLength: 0,
        source: function (request, response) {
            var term = $.ui.autocomplete.escapeRegex(extractLast(request.term))
                // Create two regular expressions, one to find suggestions starting with the user's input:
                , startsWithMatcher = new RegExp("^" + term, "i")
                , startsWith = $.grep(source, function(value) {
                    return startsWithMatcher.test(value.label || value.value || value);
                })
                // ... And another to find suggestions that just contain the user's input:
                , containsMatcher = new RegExp(term, "i")
                , contains = $.grep(source, function (value) {
                    return $.inArray(value, startsWith) < 0 &&
                        containsMatcher.test(value.label || value.value || value);
                });            

            // Supply the widget with an array containing the suggestions that start with the user's input,
            // followed by those that just contain the user's input.
            response(startsWith.concat(contains));
        },
        focus: function () {
            return false;
        },
        select: function (event, ui) {
            var terms = split(this.value);
            terms.pop();
            terms.push(ui.item.value);
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
}); 
```

**示例：http:** [//jsfiddle.net/Aa5nK/1/](http://jsfiddle.net/Aa5nK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:09:38.193

在响应中，您应该返回与您在查询中想要的结果相匹配的结果列表：

例如

```
list_of_terms = {"term0","term1","term2",...};

$("#inputsearch").autocomplete({
    var term = request.term
    var list = new Array();
    source: function( request, response ) {
        var cnt = 0;
        $.each(list_of_terms, function(i) {
            var rSearchTerm = new RegExp('^' + RegExp.quote(term),'i');
            if (list_of_terms[i].match(rSearchTerm)) {                 
                list[cnt] = list_of_terms[i];
                cnt++;
            }
       });
     response(list);
    }
});

RegExp.quote = function(str) {
    return (str+'').replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
}; 
```

如果我没有错过括号，如果输入的术语等于 list_of_terms 数组中术语的开头，这应该会在下拉列表中为您提供多个值

# javascript - 仅在 Chrome 中使用 addPoints() 的 HighCharts/HighStock 内存泄漏

> ID：14784795
> 
> 赞同：1
> 
> 时间：2013-02-09T03:58:07.700
> 
> 标签：javascript, google-chrome, memory-leaks, highcharts, highstock

HighStock 网站上的“[**动态更新数据**](http://www.highcharts.com/stock/demo/dynamic-update)”演示似乎在当前版本的 Google Chrome (24.0) 中泄漏了内存。我已经在 Mac OS X 10.8.2 和 Windows 7（64 位）上试过了。我还在 OS X 上尝试了 Safari 6.0.2，在 Windows 7 上尝试了 IE9 和 Firefox 18。泄漏似乎只发生在 Chrome 中，而且总是会发生。

鉴于这是一个相当突出的演示，我预计它会运行良好。但是如果有足够的时间，它会在 Chrome 中崩溃，并出现“Aw, Snap”错误页面。在编写的演示中可能需要很长时间，但是如果您单击 jsFiddle 链接并将`setInterval()`调用更改为 100 毫秒而不是 1000 毫秒，泄漏是相当明显的。具有多个系列和大量数据的真实应用程序可能会在几分钟内使 Chrome 崩溃。

请注意，在不断添加数据时，“shift”参数`addPoints()`始终为真，这意味着旧数据被丢弃的速度同样快。所以内存使用应该是相当稳定的——在 Chrome 以外的浏览器上，它是。

我不确定如何判断这是 Chrome 错误还是 HighCharts 错误。而且我还没有找到有用的解决方法。非常感谢任何一个方面的结论性答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:55:34.007

受到马克评论的启发，我决定尝试不同版本的各种事物。首先，我尝试了最新版本的 jQuery 和 HighStock。Chrome 24（稳定版）仍然泄漏。然后我尝试了 Chrome 23，因为它适用于 Fedora 上的 Mark，但它仍然在 Mac OS 上泄漏。

然后我尝试了 Chrome Canary 版本 26.0。它有效，没有泄漏！它展示了经典的垃圾收集模式，即每隔几秒就会建立几十兆字节的多余内存使用量，然后回落到“正常”状态。所以这是个好消息。坏消息是 Chrome Beta，25.0，仍然泄漏。因此，如果 HighCharts 的其他用户在接下来的几个月内遇到此问题，他们将需要使用“不稳定”版本的 Chrome，或者只是使用不同品牌的浏览器。

# c# - 实体框架虚拟属性

> ID：14784796
> 
> 赞同：6
> 
> 时间：2013-02-09T03:58:23.707
> 
> 标签：c#, entity-framework, entity-framework-4

*不*将 Entity Framework (v4) 实体的导航属性标记为虚拟会有什么影响？

如果我不使用延迟加载，但忽略了正确的预加载，那么在访问（未加载）属性时会发生什么？

除了延迟加载之外还会有其他影响吗，还是需要虚拟导航属性的主要功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T04:15:13.213

有两种效果。一种是延迟加载，如果属性不是`virtual`. 但是延迟加载并不总是你想要的。

二是变化检测。如果您使用纯 POCO 或使用代理但不创建属性`virtual`，则更改检测变得更加复杂。

[您可以在此处](http://blog.oneunicorn.com/2012/03/10/secrets-of-detectchanges-part-1-what-does-detectchanges-do/)了解有关变更检测的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T05:16:16.250

如果您想知道 POCO 对象是否支持延迟加载，那么我想您会很高兴知道您也可以使用 POCO 获得延迟加载。

为了获得 POCO 实体的延迟加载支持，您需要做两件事：

1.  将要延迟加载的属性声明为虚拟属性。这些属性可以是任何实现 ICollection 的集合类型，也可以是表示 1/0..1 关系的引用。

2.  在上下文中启用延迟加载

请参阅[MSDN 的“实体框架中的 POCO”帖子](http://blogs.msdn.com/b/adonet/archive/2009/05/28/poco-in-the-entity-framework-part-2-complex-types-deferred-loading-and-explicit-loading.aspx)。

# php - 重定向到贝宝页面后获取表单详细信息

> ID：14784798
> 
> 赞同：-1
> 
> 时间：2013-02-09T03:59:09.180
> 
> 标签：php, paypal

我想从贝宝表格中获取详细信息。在客户选择一定数量后，我将他们重定向到此表格。我可以得到下面表格的详细信息吗？我不知道。由于贝宝要求提供信用卡号和所有这些，出于安全目的，它不应允许获取此表单数据。但再次，只是想知道，这可能吗？

![在此处输入图像描述](../Images/a4e6bff27bc55a02897707fb91ac6455.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:11:43.123

简短的回答：没有。

当然不使用服务器端的 PHP（在此处使用您的标签），这将是一个 javascript hack。立即想到的方法是在包含 Paypal 表单的子 iframe 中调用 Javascript，但这样做有两个明显的问题：

1.  我怀疑 Paypal 是否允许在 iframe 中打开该页面
2.  如果 iframe 中的页面与调用页面不在同一个域中，则不能在 iframe 中调用 javascript。

我能想到的最好的方法是使用 javascript 制作一个 Greasemonkey/Chrome/whatever 扩展来获取数据并将其发送出去，但接下来就是这样：**没有人会愿意安装他们知道窃取信用的东西卡信息在他们的计算机上。**你到底为什么要这样做？

在一个相关但无用的说明中，如果您有兴趣尝试这样做，以实现不那么非法和不道德的目的，您可能想要查看的一件事是[this](http://stevehanov.ca/blog/index.php?id=109)。它展示了如果您有权在两个页面上编写 javascript（或找到一个未消毒的字段来注入它），如何使用框架进行跨域通信......

# php - 如何停止响应时间并计算鼠标点击次数

> ID：14784803
> 
> 赞同：0
> 
> 时间：2013-02-09T03:59:57.250
> 
> 标签：php, javascript, jquery

下面的代码是将每个选项显示为每个问题的复选框按钮的动态方式：

```
 function ExpandOptionType($option) { 
                $options = explode('-', $option);
                if(count($options) > 1) {
                    $start = array_shift($options);
                    $end = array_shift($options);
                    do {
                        $options[] = $start;
                    }while(++$start <= $end);
                 }
                 else{
                    $options = explode(' or ', $option);
                 }
                 echo '<p>';
                 foreach($options as $indivOption) {
                     echo '<div id="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
                 }
                  echo '</p>';

            }

            foreach ($arrQuestionId as $key=>$question) {

            ?>

            <p><?php echo ExpandOptionType(htmlspecialchars($arrOptionType[$key])); ?></p>

    <p><input type='text' class='questionIds' name='questionids' value='<?php echo htmlspecialchars($arrQuestionId[$key]); ?>' /></p>

    <p><input type='text' class='responseTime' name='responsetime' value='00:00:00' /></p>

    <p><input type='text' class='mouseClick' name='mouseclick' value='0' /></p>

} 
```

现在下面我有 2 个文本输入，它们也在 foreach 循环中，一个用于响应时间，另一个用于计算鼠标点击：

```
<p><input type='text' class='responseTime' name='responsetime' value='00:00:00' /></p>

<p><input type='text' class='mouseClick' name='mouseclick' value='0' /></p> 
```

现在这是我的问题：

1.  响应时间文本输入包含一个递增计时器。我想要的是，如果在问题中单击第一个按钮复选框，则问题的响应计时器应该停止。这样我们就可以知道用户回答特定问题需要多长时间

2.  鼠标单击文本以 0 开头，我希望此文本输入对问题中单击的每个按钮复选框进行操作，问题的鼠标单击文本输入会计算点击量，因此我们知道问题选项的点击次数用户已编译。

如何实现上述目标？

下面是一个 jsfiddle，显示了一个问题的示例代码：

[http://jsfiddle.net/zAFND/630/](http://jsfiddle.net/zAFND/630/)

更新：

显示多个问题示例的源代码：

```
QUESTION 1:

<p>
<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-A" value="A" />
<span>A</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-B" value="B" />
<span>B</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-C" value="C" />
<span>C</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-D" value="D" />
<span>D</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-E" value="E" />
<span>E</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-F" value="F" />
<span>F</span>
</label>
</div>

</p>

<p><input type='text' class='questionIds' name='questionids' value='73' /></p>

<p><input type='text' class='responseTime' name='responsetime' value='00:00:00' /></p>

<p><input type='text' class='mouseClick' name='mouseclick' value='0' /></p>

QUESTION 2:

<p>
<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-A" value="A" />
<span>A</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-B" value="B" />
<span>B</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-C" value="C" />
<span>C</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-D" value="D" />
<span>D</span>
</label>
</div>

<div id="ck-button">
<label class="fixedLabelCheckbox">
<input type="checkbox" name="options[]" id="option-E" value="E" />
<span>E</span>
</label>
</div>

</p>

<p><input type='text' class='questionIds' name='questionids' value='74' /></p>

<p><input type='text' class='responseTime' name='responsetime' value='00:00:00' /></p>

<p><input type='text' class='mouseClick' name='mouseclick' value='0' /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:20:06.007

当您为 setinterval 创建参考时，这很好。现在您可以删除第一个复选框的单击事件的设置间隔，并在所有复选框上添加一个单击事件以增加计数器。

那将是

```
$(document).ready(function(){
var checkBox=$('#ck-button').find('input');
var responsetimer=//your interval function
checkbox.filter(':first').bind('click',function(e){
 clearInterval(responsetimer);
});
checkbox.bind('click',function(e){
$('.mouseClick').val(parseInt($('.mouseClick').val())+1);
});
}); 
```

好吧，我不确定您希望计时器在第一次单击按钮或第一次单击按钮时停止的问题。如果是第一次，则不要使用第一次绑定。在第二次绑定本身中保持明确的间隔。

```
checkbox.bind('click',function(e){
 clearInterval(responsetimer);
 $('.mouseClick').val(parseInt($('.mouseClick').val())+1);
}); 
```

JS 小提琴： http: [//jsfiddle.net/zAFND/631/](http://jsfiddle.net/zAFND/631/) 第二个选项 [http://jsfiddle.net/zAFND/638/](http://jsfiddle.net/zAFND/638/)

**更新** ，如果你想要这个用于多个问题，用 div 包装每个问题说`<div class="queWrap"></div>`

为您的区间函数创建一个数组引用，以便它可以清楚。

循环到每个 queWrap 并启动​​计时器并在复选框上分配事件。

检查多个问题的示例：http: [//jsfiddle.net/zAFND/640/](http://jsfiddle.net/zAFND/640/)

# java - 如何使用结果集输出 SQL SUM 语句？

> ID：14784805
> 
> 赞同：0
> 
> 时间：2013-02-09T04:00:31.363
> 
> 标签：java, sql, resultset

目标：我想打印以下 SQL 语句的输出。通常我使用`rs.getString("rowname")`SUM 并没有指定 COLUMN，所以我对如何做到这一点有点困惑。

```
SELECT SUM(HOURS) FROM RESOURCE WHERE DATE = '02/08/2013'; --Actual SQL Query as used below

ResultSet rs = stat.executeQuery("SELECT SUM(HOURS) FROM RESOURCE WHERE DATE = '02/08/2013';");

            out.println("<tr>");
            out.println("<td>" + rs.get + "</td>");
            out.println("</tr>");            
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:02:19.783

你试过了吗

```
rs.getLong(1); 
```

**笔记**

避免混淆代码和视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:07:21.533

除了@JigarJoshi 的回答之外，另一种获得所需内容的方法是使用`Alias`.

```
SELECT SUM(HOURS) AS "SUM_HOURS" FROM RESOURCE WHERE DATE = '02/08/2013'; 
```

然后使用，

```
rs.getString(SUM_HOURS); 
```

# php - 在标头 if 语句中处理新条件 - 如果 URI 是某个页面，则不要显示在网站上其他任何地方显示的代码

> ID：14784807
> 
> 赞同：0
> 
> 时间：2013-02-09T04:00:34.317
> 
> 标签：php, javascript, html, if-statement

在我公司网站的标题中，我们有这段代码调用了显示我们实时聊天功能的 javascript。我需要它不只显示在**一页上**，但我无法真正拆除当前系统 - 我正在构建的页面绝对需要包含通用标题，所以我想我会尝试让标题成为例外代替我的页面。下面是显示聊天功能的代码：

```
<?php if(empty($_SERVER['HTTPS'])): ?>
<script type="text/javascript" id="*******" src="//www.ourdomain.com/support/scripts/track.js"></script>
<img src="http://www.ourdomain.com/support/scripts/pix.gif" onload="LiveChatFeature.createButton('11111111', this);" style="display:none" />

<?php else: ?>
<script type="text/javascript" id="*******" src="https://www.ourdomain.com/support/scripts/track.js"></script>
<img src="https://www.ourdomain.com/support/scripts/pix.gif" onload="LiveChatFeature.createButton('11111111', this);" style="display:none" />
<?php endif; ?> 
```

所以我编写了以下代码，其中 my-page 是我需要聊天功能不显示的页面：

```
<?php if(strpos($_SERVER['REQUEST_URI'],'my-page')): ?> 
```

但是我真的不确定从这里到哪里去将它引入现有的标题 if 语句并让它不显示聊天代码。任何有智慧和有经验的人可以给我一点方向吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T05:23:20.650

我对 PHP 有点生疏，但我知道你想要的是两个 if 语句都返回 true，然后，只有这样，它才应该包含你的聊天代码是否正确？

```
<?php if (strpos($_SERVER['REQUEST_URI'],'my-page')) : ?> 
```

上面的代码，如果找不到字符串，则可能返回 FALSE，但如果找到，则返回一个数值（字符串的索引），因此您会得到奇怪的结果。为了 100% 确定没有找到，您需要检查：

```
 <?php if (strpos($_SERVER['REQUEST_URI'],'my-page')===FALSE) : ?> 
```

所以这两个条件结合起来看起来像这样：

```
 <?php if (empty($_SERVER['HTTPS']) && (strpos($_SERVER['REQUEST_URI'],'my-page')===FALSE) ): ?> 
```

我希望这有帮助！

# c# - 启动 Web API

> ID：14784813
> 
> 赞同：-1
> 
> 时间：2013-02-09T04:01:04.780
> 
> 标签：c#, asp.net, .net, visual-studio-2012, asp.net-web-api

我被要求为已经开发的桌面应用程序创建一个 web api。

一般来说，我没有任何 Web 开发背景，并且不知何故我在很短的时间内就陷入了困境

我在那里找到了几本书和指南，但没有一本是重点，需要很多时间……我根本没有。

有人可以指导我如何开始教程页面吗？我有基本的 C# .NET 经验并使用 Visual Studio 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:48:17.167

试试这个：

[您的第一个 ASP.NET Web API](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api "您的第一个 ASP.NET Web API")

# axapta - AX 2012 http 入站端口激活错误 – 未找到端口的部署网站

> ID：14784828
> 
> 赞同：5
> 
> 时间：2013-02-09T04:03:50.740
> 
> 标签：axapta, microsoft-dynamics, dynamics-ax-2012, aif

我是 AX 的新手，也是 IIS 的初学者（并且是关于 stackoverflow 的第一篇文章）。我需要一些有关 AX 2012 AIF Web 服务和配置 http AX 入站端口的帮助。

我的问题是尝试使用 HTTP 激活 AX 中的入站端口。我收到以下两个错误：

*   未找到端口的部署网站：TestOrdImport
*   无法部署端口“TestOrdImport”。\n错误：找不到端口的部署网站：TestOrdImport

这是在测试环境中使用 Microsoft 发布的 AX 2012 FP1 hyper-v 映像。其他人使用此处的说明安装了 Web 服务：[https ://msdn.microsoft.com/EN-US/library/gg731848.aspx](https://msdn.microsoft.com/EN-US/library/gg731848.aspx)

[根据为 Web 服务安装的人，我使用虚拟目录共享路径“C:\Program Files\Microsoft Dynamics AX\60\AifWebServices\”和 URL“ http](http://AX2012-A:85/MicrosoftDynamicsAXAif60) ”在网站屏幕中创建了一个新条目： [//AX2012-A:85/MicrosoftDynamicsAXAif60](http://AX2012-A:85/MicrosoftDynamicsAXAif60) "

我不确定这些是否正确，但网站验证没有错误。Web 服务似乎安装到站点“AIF”而不是“默认网站”</p>

有人看到站点的 IIS 配置有任何问题吗？是否应该将 Web 服务安装到默认网站而不是 AIF 站点？

创建入站端口时，它需要是 http，因为我是根据某人的请求进行设置的，但我再次无法激活入站端口，可以使用一些指导。

[https://i.imgur.com/cl8jGVJ.png](https://i.imgur.com/cl8jGVJ.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T16:31:38.300

我能够让具有 AX 经验的人使用带有 AX 的 HTTP 入站端口适配器和 AIF Web 服务来解决问题。

与我的问题相关的一些关键点以及使用配置的 AX AIF 网站在 AIF 中设置入站端口可能对处于类似情况的其他人有所帮助：

在 AX 中设置 AIF 网站的注意事项：

*   要为实际的 IIS 服务器设置获取正确的文件夹（虚拟目录），您必须使用 IIS 查找关联（虚拟服务器 -> 物理磁盘路径）。
*   URL 必须是对将为该服务提供服务的真实 HTTP 服务器的有效引用（在我的例子中是端口 85；而不是端口 8101）。AOS 托管的 WCF 服务配置为端口 8101。

在 AX 中设置 HTTP 入站端口的注意事项：

*   入站端口的 URI 中的站点路径与配置的“网站”中定义的任何路径都不匹配。文本字符串必须从“http://...”开始到入站端口名称（“TestOrdImport/xppservice.svc”部分）完全匹配，在我的示例中使用端口 85，在路径，因为那是用于基本入站端口的，并且没有为 IIS 虚拟服务器配置“服务”子文件夹。事实上，如果您尝试使用“服务”子文件夹设置网站配置，使其在此处正确匹配，则网站表单会给您一个错误，因为“服务”子文件夹不存在并且如果您创建它，它没有安装的所有其他支持文件（“bin”文件夹等）。
*   成功部署后，当我在 Web 浏览器中使用 WSDL URI 时，我会返回一个页面，说明“您已经创建了一个服务……”。并告诉你一些如何使用它的基础知识（这表明它安装正确）。对于 HTTP 服务，您始终将“?wsdl”添加到 URI 以获取实际的 WSDL 文档，因此此 URI/URL 可以正常工作：[http ://ax2012-a.contoso.com:85/MicrosoftDynamicsAXAif60/TestOrdImport/xppservice.svc ?wsdl](http://ax2012-a.contoso.com:85/MicrosoftDynamicsAXAif60/TestOrdImport/xppservice.svc?wsdl)

这并不多，但我希望这对其他人有帮助。以上大部分内容都是由帮助解决我的问题的人撰写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T12:47:29.323

这也可能是由网站 URL 字段中的尾部斜杠字符 (/) 引起的。删除它可能会解决此错误消息。

Source: [https://community.dynamics.com/ax/b/axdilip/archive/2015/06/23/troubleshoot-dynamics-ax-2012-aif-error-the-deployment-web-site-was-not-found-for-the-port](https://community.dynamics.com/ax/b/axdilip/archive/2015/06/23/troubleshoot-dynamics-ax-2012-aif-error-the-deployment-web-site-was-not-found-for-the-port)

# android - Android 3d 立方体动画

> ID：14784833
> 
> 赞同：0
> 
> 时间：2013-02-09T04:04:43.647
> 
> 标签：android, animation, transition

我想让一个屏幕（或屏幕的一部分）在类似 3D 立方体的过渡中切换到另一个部分。我说的是 2 个普通的 Android UI 部分，而不是在画布上渲染的原始图形。

你会如何处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:01:32.327

可能你应该看看[默认android安装](http://developer.android.com/tools/samples/index.html)附带的示例（>>>视图>>>动画>>> 3D转换）并在[谷歌上搜索其他一些](https://www.google.com/search?q=android%20Views/Animation/3D%20transition&rlz=1C1CHKZ_enTH438TH438&oq=android%20Views/Animation/3D%20transition&aqs=chrome.0.57j62l3j64.16181&sourceid=chrome&ie=UTF-8)

# c# - WinJS web worker 调用 vs 调用 WinRT C# 组件返回一个承诺

> ID：14784838
> 
> 赞同：1
> 
> 时间：2013-02-09T04:05:37.347
> 
> 标签：c#, multithreading, windows-runtime, winjs, web-worker

我正在开发一个 WinJS 游戏，其中部分逻辑在 C# WinRT 组件中实现，因为事实证明它更高效，更易于概念化和调试。该组件的调用频率相对较低，并返回一个 Promise，我将其返回值插入 WinJS 游戏对象。

现在我有第二种情况，我想通过将在动画阶段发生的必要数学工作委托给单独的线程来加速 SVG 动画，并返回一个表示要执行的纯 UI 操作的对象，例如游戏列表应该移动/增长等的对象，并且具有快速针对 DOM 的主线程操作（我正在使用 Knockout）。与第一种情况不同，这种后台线程交互会发生在每个动画增量中，所以，相当多。

我打算用一个网络工作者来实现这个，我已经部分开始工作了，但我想确保我了解这两种方法的优缺点以及推荐的用例。似乎调用 WinRT 组件和调用 Web Worker 都涉及对正在传递的对象进行某种序列化或翻译。对于我现有的 WinRT 调用，我有一个 WinRT 工厂类作为我的 js 对象的属性，我使用它来构建游戏的镜像简化 WinRT 表示以传递给 WinRT 组件。对于网络工作者，我必须传递游戏相关方面的 JSON 副本，然后再次将结果翻译回来。再次使用对 C# 的调用会更好，还是真的只推荐用于不经常调用的调用？每个的相对开销是多少？还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T19:47:24.547

除了 Tavares 提到的之外，没有真正的硬性规定。WebWorkers 之间的通信比调用 WinRT 更快，但 WebWorkers 不是您想要反复创建和销毁的东西。在这种情况下，我个人会使用我在启动期间创建一次的 Webworker，然后在每次需要计算时调用其中的方法。

# html - Apache没有收到referal_url？

> ID：14784840
> 
> 赞同：0
> 
> 时间：2013-02-09T04:06:24.627
> 
> 标签：html, apache, url, tracking

我有一个 Apache 服务器，每天接收大约 7000 次访问，但 7000 次中只有大约 1300 次从用户代理接收到 referal_url。

对此我能做些什么吗？

我想知道这些点击来自何处以用于欺诈目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:09:21.987

您不能强制用户代理发送任何内容。它遵守自己的规则。另请注意，如果用户直接输入您的 URL，则不会生成任何推荐标头。

但是，您确实获得了可以检查的 IP 地址。

# android - TileProvider 使用本地图块

> ID：14784841
> 
> 赞同：73
> 
> 时间：2013-02-09T04:06:30.060
> 
> 标签：android, google-maps, android-maps-v2

我想使用`TileProvider`最新的 Android Maps API (v2) 的新功能在`GoogleMap`. 但是，由于我的用户很多时候不会上网，我想将磁贴存储在设备上的 zipfile/文件夹结构中。我将使用`Maptiler`with生成我的图块`geotiffs`。我的问题是：

1.  在设备上存储图块的最佳方式是什么？
2.  我将如何创建一个返回本地图块的 TileProvider？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-02-12T13:05:00.757

1.  您可以将图块放入资产文件夹（如果应用程序大小可以接受）或在第一次启动时将它们全部下载并放入设备存储（SD 卡）。

2.  您可以像这样实现 TileProvider：

* * *

```
public class CustomMapTileProvider implements TileProvider {
    private static final int TILE_WIDTH = 256;
    private static final int TILE_HEIGHT = 256;
    private static final int BUFFER_SIZE = 16 * 1024;

    private AssetManager mAssets;

    public CustomMapTileProvider(AssetManager assets) {
        mAssets = assets;
    }

    @Override
    public Tile getTile(int x, int y, int zoom) {
        byte[] image = readTileImage(x, y, zoom);
        return image == null ? null : new Tile(TILE_WIDTH, TILE_HEIGHT, image);
    }

    private byte[] readTileImage(int x, int y, int zoom) {
        InputStream in = null;
        ByteArrayOutputStream buffer = null;

        try {
            in = mAssets.open(getTileFilename(x, y, zoom));
            buffer = new ByteArrayOutputStream();

            int nRead;
            byte[] data = new byte[BUFFER_SIZE];

            while ((nRead = in.read(data, 0, BUFFER_SIZE)) != -1) {
                buffer.write(data, 0, nRead);
            }
            buffer.flush();

            return buffer.toByteArray();
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        } catch (OutOfMemoryError e) {
            e.printStackTrace();
            return null;
        } finally {
            if (in != null) try { in.close(); } catch (Exception ignored) {}
            if (buffer != null) try { buffer.close(); } catch (Exception ignored) {}
        }
    }

    private String getTileFilename(int x, int y, int zoom) {
        return "map/" + zoom + '/' + x + '/' + y + ".png";
    }
} 
```

现在您可以将它与您的 GoogleMap 实例一起使用：

```
private void setUpMap() {
    mMap.setMapType(GoogleMap.MAP_TYPE_NONE);

    mMap.addTileOverlay(new TileOverlayOptions().tileProvider(new CustomMapTileProvider(getResources().getAssets())));

    CameraUpdate upd = CameraUpdateFactory.newLatLngZoom(new LatLng(LAT, LON), ZOOM);
    mMap.moveCamera(upd);
} 
```

在我的情况下，我也遇到了 MapTiler 生成的瓦片的 y 坐标问题，但我通过将此方法添加到 CustomMapTileProvider 中来管理它：

```
/**
 * Fixing tile's y index (reversing order)
 */
private int fixYCoordinate(int y, int zoom) {
    int size = 1 << zoom; // size = 2^zoom
    return size - 1 - y;
} 
```

并从 getTile() 方法调用它，如下所示：

```
@Override
public Tile getTile(int x, int y, int zoom) {
    y = fixYCoordinate(y, zoom);
    ...
} 
```

**[更新]**

如果您知道自定义地图的精确区域，则应该从方法中返回`NO_TILE`缺少的图块。`getTile(...)`

我是这样做的：

```
private static final SparseArray<Rect> TILE_ZOOMS = new SparseArray<Rect>() {{
    put(8,  new Rect(135,  180,  135,  181 ));
    put(9,  new Rect(270,  361,  271,  363 ));
    put(10, new Rect(541,  723,  543,  726 ));
    put(11, new Rect(1082, 1447, 1086, 1452));
    put(12, new Rect(2165, 2894, 2172, 2905));
    put(13, new Rect(4330, 5789, 4345, 5810));
    put(14, new Rect(8661, 11578, 8691, 11621));
}};

@Override
public Tile getTile(int x, int y, int zoom) {
    y = fixYCoordinate(y, zoom);

    if (hasTile(x, y, zoom)) {
        byte[] image = readTileImage(x, y, zoom);
        return image == null ? null : new Tile(TILE_WIDTH, TILE_HEIGHT, image);
    } else {
        return NO_TILE;
    }
}

private boolean hasTile(int x, int y, int zoom) {
    Rect b = TILE_ZOOMS.get(zoom);
    return b == null ? false : (b.left <= x && x <= b.right && b.top <= y && y <= b.bottom);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T09:56:28.747

在新 API (v2) 中添加自定义 tileproviders 的可能性很大，但是您提到您的用户大多处于离线状态。如果用户在首次启动应用程序时处于脱机状态，您将无法使用新 API，因为它要求用户处于联机状态（似乎至少要建立一次缓存）——否则它只会显示黑屏。

编辑 2/22-14：我最近再次遇到了同样的问题 - 为必须离线工作的应用程序设置自定义磁贴。通过将不可见的（w/h 0/0）地图视图添加到客户端必须下载一些内容的初始视图来解决它。这似乎可行，并允许我稍后在离线模式下使用地图视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T16:47:20.680

这就是我在 Kotlin 中实现它的方式：

```
class LocalTileProvider : TileProvider
{

override fun getTile(x: Int, y: Int, zoom: Int): Tile?
{
    // This is for my case only
    if (zoom > 11)
        return TileProvider.NO_TILE

    val path = "${getImagesFolder()}/tiles/$zoom/$x/$y/filled.png"
    val file = File(path)
    if (!file.exists())
        return TileProvider.NO_TILE
    return try {
        Tile(TILE_SIZE, TILE_SIZE, file.readBytes())
    }
    catch (e: Exception)
    {
        TileProvider.NO_TILE
    }
}

companion object {
    const val TILE_SIZE = 512
}

} 
```

# css - Chrome：溢出：自动 + 边距：自动有时无法正确布局

> ID：14784845
> 
> 赞同：3
> 
> 时间：2013-02-09T04:07:06.170
> 
> 标签：css, google-chrome, webkit, css-float, overflow

我正在尝试布局一个页面，该页面具有我想要在新行上并居中的锚元素。然而，这些块`<p>`位于浮动图像旁边的元素内部。

**右：** [http ://test.sunnysidemarket.ca/right.jpg](http://test.sunnysidemarket.ca/right.jpg)

**错误：** [http ://test.sunnysidemarket.ca/wrong.jpg](http://test.sunnysidemarket.ca/wrong.jpg)

所以基本上我有：

**HTML**：

```
<div class="content">
    <div>
        <img src="..." width="276" height="207" />
    </div>
    <div class="body">
          <p>
            ...
            <a class="mediaset" href="...">Link</a>
        </p>
    </div>
</div> 
```

**CSS：**

```
.content img {
    float: right;
}

a.mediaset {
    margin: 0 auto;
    width: 220px;
    display: block;
    overflow: auto;
} 
```

或者您可以在 jsfiddle 中看到的内容：http: [//jsfiddle.net/CVkFw/](http://jsfiddle.net/CVkFw/)

这个问题是间歇性的，有时会发生，有时不会。在我看来是 chrome 中的一个错误，其中计算了溢出和边距属性，但是当浮动内容加载时，有时浏览器不会再次布局元素。

**有一些方法可以使用 jQuery 和修改我的 HTML 来解决这个问题，但如果可能的话，我真的很想用 CSS 来解决这个问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:39:44.043

我最好的猜测是，这种不稳定的行为是由`overflow: visible`应用在 global.styles.css 中引起的。问题：

```
.node-article .field-name-body,
.node-synced-facebook-content .field-name-body {
    overflow: visible;
} 
```

我提供这个建议是因为当我添加这个 CSS 覆盖时`overflow: hidden`，该组件似乎加载“更稳固”。修复：

```
.node-article .field-name-body,
.node-synced-facebook-content .field-name-body {
    overflow: hidden;
} 
```

选择器本身可能需要根据要影响的内容进行调整。（我显然不是很熟悉您页面的 css 代码。）希望这可以为您指明正确的方向！

# .net - 在 .net 运行时打开 explorer.exe

> ID：14784849
> 
> 赞同：0
> 
> 时间：2013-02-09T04:07:42.907
> 
> 标签：.net, runtime, explorer

我正在开发一个 shell 扩展，我需要在托管上下文（.net 4 运行时）中打开 Windows 资源管理器（explorer.exe）。我创建了 explorer.exe.config 文件并放在 %windir% 中。explorer.exe.config 文件的内容如下。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup> 
    <requiredRuntime imageVersion="v4.0.30319" version="v4.0.30319" />
    <supportedRuntime version="v4.0.30319" />
</startup>
</configuration> 
```

但是，资源管理器不会在 .net 运行时中打开。有没有更好的方法来做到这一点？

更清楚地说，我希望 explorer.exe 及其类型在“附加到进程”窗口中为“托管”。

![](../Images/52523aefc61da6ae8bdf3f553d80eac5.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:23:52.397

您可以`Process.Start` [按照此处所述](https://stackoverflow.com/questions/181719/how-to-start-a-process-from-c)使用，但资源管理器不是 .NET 可执行文件，因此任何强制它使用 .config 文件的尝试都可能不起作用。你想达到什么目的？

# c - 在 C 中取消引用字符指针

> ID：14784851
> 
> 赞同：-2
> 
> 时间：2013-02-09T04:08:44.683
> 
> 标签：c, pointers

这是我的代码：

```
char *str = malloc(100*sizeof(char));
*str ="Hello"; // or pass it any string 
```

现在我想传入`str`函数：

sys_open(const char * 文件名，int 标志，int 模式)

当我使用 char 数组作为第二个参数时，它可以工作，但使用其值被复制过来的指针不起作用。

我可以用 char 数组实现我想要的，但为什么我不能用指针做同样的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T04:10:36.393

您不能在 C 中以这种方式分配字符串。您需要使用[`strcpy(3)`](http://www.manpagez.com/man/3/strcpy/)它或其亲属之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:20:07.773

有几点不对：

```
*str = "Hello"; // or pass it any string 
```

*   `str`is `char*`, `*str`is a `char`, and `"Hello"`is a `const char*`（嗯，实际上`const char[6]`它衰减成`const char*`）。将 a 分配给 a 是非法`const char*`的`char`。

*   假设您的意思是`str = "Hello";`，那仍然是错误的，因为它正在重新分配指针`str`以指向字符串*文字* `"Hello"`。您之前分配的内存`malloc`现在没有任何指向它，并且您已经泄漏了内存。

*   在你做的时候传递`str`给`sys_read`你是行不通的。 `str`指向一个字符串文字，而不是您分配的可写内存。不仅会`count`出错，而且`sys_read`根本无法写入。（字符串文字是不可变的，尝试修改它会导致未定义的行为。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-09T04:18:20.553

在程序中，我觉得缺少类型转换，因为 malloc 返回 a`void *`并将其分配给`char *`会产生错误。

# html - 如何找到第二个 a中的元素 ?

> ID：14784852
> 
> 赞同：10
> 
> 时间：2013-02-09T04:09:06.930
> 
> 标签：html, css, css-selectors

哪个 CSS 选择器匹配第二段而不使用 ID？

```
<div>
  <p>Apple</p>
  <p>Mango</p>
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-09T04:13:07.517

您可以使用[`nth-child`选择器](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child)，设置为找到第二个孩子。这将选择`<p>`作为其父级的第二个子级的所有元素：

```
p:nth-child(2) {
  background-color: lightblue;
}
```

```
<div>
  <p>Apple</p>
  <p>Mango</p>
</div>
<div>
  <p>Apple</p>
  <p>Mango</p>
</div>
```

或者，如果您想在一组特定元素中找到第二个子元素，您可以将这些元素包装在 a 中`<div>`：

```
#wrapper p:nth-child(2) {
  background-color: lightblue;
}
```

```
<div>
  <p>Apple</p>
  <p>Mango</p>
</div>
<div id="wrapper">
  <p>Apple</p>
  <p>Mango</p>
</div>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-10-03T21:22:56.343

在这种情况下，我的偏好是使用`:nth-of-type`伪类：

```
div p:nth-of-type(2) 
```

* * *

**为什么选择`:nth-of-type`over `:nth-child`？**

因为***明确***`:nth-of-type`适用于您希望在给定上下文中选择*特定元素类型*的第 n 个的情况（如您描述的情况） 。

 *** * *

**请参阅此工作示例：**

```
div p:nth-of-type(2) {
  display: inline-block;
  padding: 6px;
  color: rgb(255, 255, 255);
  background-color: rgb(255, 0, 0);
}
```

```
<div>
<h2>Fruit Bowl</h2>
<p>Apple</p>
<p>Mango</p>
</div>
```

* * *

**但我仍然可以使用`:nth-child`，对吧？**

是的，你可以 - 但它可能并不总是给你你期望的结果。

语法`div p:nth-child(2)` ***并不***`p`意味着在给定上下文中的每一秒`div`（就像`div p:nth-of-type(2)`这样）。

相反，它表示一个元素，它是 a`p`并且*也是*第二个孩子。

知道了这一点，`p`你猜哪一个会在下面的例子中突出显示？

```
div p:nth-child(2) {
  display: inline-block;
  padding: 6px;
  color: rgb(255, 255, 255);
  background-color: rgb(255, 0, 0);
}
```

```
<div>
<h2>Fruit Bowl</h2>
<p>Apple</p>
<p>Mango</p>
</div>
```

你猜对了吗？

你现在明白 和 之间的区别了`:nth-of-type(2)`吗`:nth-child(2)`？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T04:13:15.117

你应该使用`nth-child`.

```
p:nth-child(2) {  
  color: #ccc;
} 
```

REF：[第 n 个孩子如何工作](http://css-tricks.com/how-nth-child-works)**

# amazon-ec2 - EC2 上的 Apache Whirr 与自定义 AMI

> ID：14784857
> 
> 赞同：0
> 
> 时间：2013-02-09T04:10:23.863
> 
> 标签：amazon-ec2, amazon-ami, apache-whirr

我正在尝试启动一组自定义 AMI 映像。AMI 映像只是来自安装了 Java 的亚马逊免费套餐选择的 Ubunutu 12.04 服务器映像（我实际上想用 numpy 和 scipy 创建 AMI）。事实上，我是通过启动 Ubuntu 12.04 实例来创建该映像的，该实例使用 whirr 和 noop 作为角色。然后我安装了 Java，并在 AWS 在线控制台中选择了 Create Image (EBS AMI)。我正在使用与启动原始 ubuntu 服务器相同的 whirr 配方脚本，仅更改了图像 ID。

Whirr 启动图像，它显示在控制台中。然后它尝试为 noop 运行 InitScript，但没有任何反应。10分钟后，由于脚本运行时间过长而引发异常。whirr.log 包含记录

```
error acquiring SFTPClient() (out of retries - max 7): Invalid packet: indicated length 1349281121 too large 
```

我在其中一个教程中看到了这个错误，建议的解决方案是添加行

whirr.bootstrap-user=ec2-user

让 JCloud 知道用户名。我知道这是正确的用户名，并且默认使用。添加该行后，whirr.log 显示身份验证错误，公钥有问题。最后，当我使用 'ubuntu' 作为用户时，错误是 Dying 因为 - java.net.SocketTimeoutException: Read timed out

这是我用来启动集群的文件

```
whirr.cluster-name=pineapple
whirr.instance-templates=1 noop
whirr.provider=aws-ec2
whirr.identity=${env:AWS_ACCESS_KEY_ID}
whirr.credential=${env:AWS_SECRET_ACCESS_KEY}
whirr.private-key-file=${sys:user.home}/.ssh/id_rsa
whirr.public-key-file=${sys:user.home}/.ssh/id_rsa.pub
whirr.env.repo=cdh4
whirr.hardware-id=t1.micro
whirr.image-id=us-east-1/ami-224cda4b
whirr.image-location=us-east-1b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:27:43.517

异常日志将帮助我们解决您的问题。

此外，设置以下内容可能会解决您的问题。

```
whirr.cluster-user=<Clu> 
```

# r - 在R中交织两个data.frames

> ID：14784861
> 
> 赞同：7
> 
> 时间：2013-02-09T04:11:18.443
> 
> 标签：r, merge, dataframe, rbind, do.call

我想`data.frame`在 R 中交织两个。例如：

```
a = data.frame(x=1:5, y=5:1)
b = data.frame(x=2:6, y=4:0) 
```

我希望结果看起来像：

```
> x y
  1 5
  2 4
  2 4
  3 3
  3 3
  ... 
```

通过`cbind`ing `x[1]`with `y[1]`, `x[2]`with`y[2]`等获得。

最干净的方法是什么？现在，我的解决方案包括将所有内容都吐出到列表中并合并。这很丑陋：

```
lst = lapply(1:length(x), function(i) cbind(x[i,], y[i,]))
res = do.call(rbind, lst) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-09T06:05:29.897

当然，`interleave`“gdata”包中的函数：

```
library(gdata)
interleave(a, b)
#    x y
# 1  1 5
# 6  2 4
# 2  2 4
# 7  3 3
# 3  3 3
# 8  4 2
# 4  4 2
# 9  5 1
# 5  5 1
# 10 6 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T04:36:30.560

您可以通过给出`x`和`y`索引来做到这一点，`rbind`它们并按索引排序。

```
a = data.frame(x=1:5, y=5:1)
b = data.frame(x=2:6, y=4:0)
df <- rbind(data.frame(a, index = 1:nrow(a)), data.frame(b, index = 1:nrow(b)))
df <- df[order(df$index), c("x", "y")] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T04:32:22.513

这就是我的处理方式：

```
dat <- do.call(rbind.data.frame, list(a, b))
dat[order(dat$x), ] 
```

`do.call`在第一步中是不必要的，但使解决方案更具可扩展性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-09T05:06:31.683

也许这有点作弊，但`interleave`来自**ggplot2**的（非导出的）函数是我之前为自己使用而偷的东西：

```
as.data.frame(mapply(FUN=ggplot2:::interleave,a,b)) 
```

# java - Java - 编译后 GUI 不会运行

> ID：14784862
> 
> 赞同：1
> 
> 时间：2013-02-09T04:11:27.757
> 
> 标签：java, user-interface

在过去的几周里，我做了一些其他简单的 GUI 项目，没有任何问题，但现在我无法让程序在编译后显示。我无法弄清楚可能出了什么问题，因为没有抛出任何错误，而且它的格式与我为学校提供的其他项目几乎相同。

任何有关在屏幕上查看 GUI 的位置的指导都将不胜感激，这样我就可以在上交之前完成并整理我想要的东西。

```
import java.util.Random;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

/***********************************************************************
Program Name: ProgramName.java
Programmer's Name: Student Name
Program Description: Describe here what this program will do
***********************************************************************/
public class GuessGame extends JFrame{

    //Declare GUI components
    private JFrame mainFrame;
    private JButton guessButton;
    private JButton exitButton;
    private JTextField guessField;
    private JTextField answerField;
    private JLabel directionsLabel;
    private JLabel guessLabel;
    private JLabel answerLabel;

    public GuessGame(){

        //Initialize window components
        mainFrame = new JFrame("Number Guessing Game");
        exitButton =  new JButton("Exit");
        guessButton = new JButton("Try your luck");
        guessField = new JTextField(4);
        answerField = new JTextField(50);
        guessLabel = new JLabel("What is your guess?");
        answerLabel = new JLabel("Now it is/isn't");
        directionsLabel = new JLabel("Enter a number and then press the" +
                "guess button until you are correct");

        //Build the GUI
        Container c = mainFrame.getContentPane();
        c.setLayout(new FlowLayout());
        c.add(directionsLabel);
        c.add(guessLabel);
        c.add(guessField);
        c.add(answerLabel);
        c.add(answerField);
        c.add(guessButton);
        c.add(exitButton);

        //Set Mnemonics
        guessButton.setMnemonic('G');
        exitButton.setMnemonic('E');

        mainFrame.setSize(450, 300);

        mainFrame.addWindowListener(new WindowAdapter(){
            public void windowClosing(WindowEvent e){
                System.exit(0);
            }
        });

        //Call the handler methods for specific functions
        GuessButtonHandler ghandler = new GuessButtonHandler();
        guessButton.addActionListener(ghandler);

        ExitButtonHandler ehandler = new ExitButtonHandler();
        exitButton.addActionListener(ehandler);

        FocusHandler fhandler = new FocusHandler();
        guessField.addFocusListener(fhandler);
        answerField.addFocusListener(fhandler);

    }

    //Implement actionListener for the Guess button
    class GuessButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            String instring;
            int counter = 0;
            int guess;
            Random rand = new Random();
            int numberToGuess = rand.nextInt(1000);

            instring = guessField.getText();

            guess = Integer.parseInt(instring);
            counter++;

            if (guess == numberToGuess){
                answerLabel = new JLabel("You win! " + 
        "\nThe number was: " + numberToGuess + 
                "\nIt took you " + counter + " tries");
            }
            else if (guess < numberToGuess){
                answerLabel = new JLabel("Too low");
            }
            else if (guess > numberToGuess){
                answerLabel = new JLabel("Too high");
            }           
        }
    }

    //Implement ActionListener for the exit button
    class ExitButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            System.exit(0);
        }
    }

    //Implement focus listener
    class FocusHandler implements FocusListener{
        public void focusGained(FocusEvent e){
            if (e.getSource()== guessField){
                answerField.setText("");
            }
            else if (e.getSource() == answerField){
                guessButton.requestFocus();
            }
        }

        public void focusLost(FocusEvent arg0) {

        }
    }

    //Main to run program, call GuessGame method
    public static void main(String[] args) {
        new GuessGame();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T04:13:11.060

在将所有组件添加到 JFrame 之后，您将需要调用`setVisible(true)`它。除非您明确告诉它这样做，否则程序不会在数学上知道您要显示任何内容。

IE，

```
public GuessGame() {

  // Initialize window components
  mainFrame = new JFrame("Number Guessing Game");

  // ..... etc....

  FocusHandler fhandler = new FocusHandler();
  guessField.addFocusListener(fhandler);
  answerField.addFocusListener(fhandler);

  mainFrame.setVisible(true);
} 
```

此外，您不希望此类扩展 JFrame，因为这不是必需的。您已经在构造函数中使用了 JFrame，因此在类本身中不需要另一个 JFrame。

# javascript - 从内存中的 HTML 元素中取消绑定内联 javascript 事件

> ID：14784867
> 
> 赞同：10
> 
> 时间：2013-02-09T04:12:10.043
> 
> 标签：javascript, jquery, html, memory-leaks

**如何将内联 javascript 事件与其 HTML 元素完全解除绑定？**

我试过了：

*   从 body 元素取消对事件的委托
*   解除事件与元素的绑定
*   甚至从 HTML 元素中删除 event 属性

至少令我惊讶的是，只有删除`onchange`属性 ( `.removeAttr('onchange')`) 才能防止事件再次触发。

```
<input type="text" onchange="validateString(this)"></input> 
```

*我知道这对代表来说是可能的，这可能是最好的方法，但只是在这里玩。这个例子纯粹是为了提出问题而假设的。*

* * *

所以假设的情况是这样的：

我正在编写一个 javascript 验证库，该库通过内联 HTML 属性将 javascript 事件绑定到输入字段，如下所示：

```
<input type="text" onchange="validateString(this)"></input> 
```

但是，我想通过解除绑定我的事件来使库更好一点，这样在单页应用程序中使用这个库的人就不必管理我的事件处理程序，也不必混乱他们的代码通过将输入事件连接到我假设的验证库中的函数......无论如何。这些都不是真的，但它似乎是一个不错的用例。

这是假设验证 Library.js 的“示例”代码：

### ****[http://jsfiddle.net/CoryDanielson/jwTTf/](http://jsfiddle.net/CoryDanielson/jwTTf/)****

 **要进行测试，只需在文本框中输入，然后单击其他地方来触发更改事件。在“时间轴”选项卡上打开并记录 Web 检查器来执行此操作。突出显示与您触发 change 事件（多次触发 change 事件）相关的时间线区域，您将看到事件侦听器（在下面的窗口中）在每个 change 事件上增加 100。如果正确管理和删除，每个事件侦听器都会在呈现新输入之前被正确删除，但我还没有找到一种方法来使用内联 javascript 事件正确地做到这一点。

该代码的作用是：

1.  onChange，输入元素触发验证功能
2.  该函数验证输入并在成功时为边框着色
3.  然后在 1 秒后（为了演示内存泄漏），输入元素连续 100 次替换为相同的 HTML，而没有取消绑定更改事件（因为我不知道该怎么做……这就是问题所在）。这模拟了在单页应用程序中更改视图。这会在 DOM 中创建 100 个新的事件侦听器，这些事件侦听器可以通过 Web 检查器看到。

    *   有趣的笔记。`$('input').removeAttr('onchange');`实际上会阻止 onchange 事件在未来被触发，但**不会**垃圾收集 web 检查器中可见的 eventListener/DOM 内容。

此屏幕截图是在更改事件触发 3 次之后。每次，100 个新的 DOM 节点都使用相同的 HTML 呈现，我尝试`onchange`在替换 HTML 之前从每个节点取消绑定事件。

![在此处输入图像描述](../Images/221711e9e307a577ef09dbc6b377a28b.png)

* * *

**更新：**我回到这个问题，只是使用 JSFiddle 做了一个快速的小测试，以确保答案是有效的。我运行了数十次“测试”，然后等待——果然，GC 通过并处理了事务。

![在此处输入图像描述](../Images/b1cb16e03524909df3e7baeb99fd492c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T07:36:38.723

我不认为你有什么可担心的。尽管无法再引用内存并且最终会被垃圾回收，但它仍会显示在 Web Inspector 内存窗口中。当 GC 决定对内存进行垃圾收集时（例如，当浏览器内存不足或某个固定时间后），内存将被垃圾收集。细节取决于 GC 实现者。您可以通过单击 Web Insepctor 窗口底部的“收集垃圾”按钮来验证这一点。我正在运行 Chrome 23，并且在您的验证框中输入文本大约 5 或 6 次后，内存使用率下降，显然是由于垃圾收集。

这种现象并非特定于内联事件。我看到了类似的模式，只是通过重复分配一个大数组然后覆盖对该大数组的引用，为 GC 留下大量孤立内存。内存增加了一段时间，然后 GC 启动并完成其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:21:03.387

我的第一个建议是使用`off('change')`，但似乎你已经尝试过了。它不工作的原因可能是因为处理程序没有附加`.on('change')`. 我不太了解 jQuery 如何在内部处理这样的侦听器，但请尝试使用`.on('change', function ()...`or`.bind('change', function ()...`代替。**

# git - GIT，我是否将源代码移回母版？如何

> ID：14784869
> 
> 赞同：2
> 
> 时间：2013-02-09T04:12:39.437
> 
> 标签：git, github

我是 git 新手，我只是在学习..

我设置了一个 github 项目进行测试，我一直在本地工作。

我听说你永远不应该在主人身上工作，它应该准备好生产。所以我做了以下

我做了一个

```
git branch myfix
git checkout 
```

做了我的改变并做了一个

```
git commit -a 
```

但是我如何告诉它把我的代码移到主分支中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:17:43.433

好

```
git checkout 
```

实际上应该是

```
git checkout myfix 
```

如果您确实这样做了，那么您可以像这样将代码“移动”到主分支中

```
git checkout master
git merge myfix 
```

# javascript - 使用 javascript 切换背景图像强制绝对路径

> ID：14784871
> 
> 赞同：0
> 
> 时间：2013-02-09T04:12:50.907
> 
> 标签：javascript, background-image

我有一个 div 开头如下：

```
<div id="info_picture" style="background-image: url('assets/img/channels/banners/3')"></div> 
```

图像没有文件扩展名的原因是它可以由用户上传，我不想将扩展名存储在数据库中（或强制他们只使用一种图像格式）。我有一行 javascript 可以更改此背景图像：

```
info_picture.style.backgroundImage = "url('assets/img/channels/banners/"+channel+"')"; 
```

但是，在检查元素时，背景图像样式显示为绝对路径，而不是我在脚本中指定的相对路径。这是一个问题，因为没有扩展，这会导致它与 application/octet-stream 一起传输。然后 chrome 发出警告，图像不显示。如何强制它加载相对路径而不是绝对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:54:31.177

我的直觉说这不是javascript问题或浏览器问题。

问题可能出在实际文件中，该文件实际上具有 application/octet-stream 作为 mime 类型。

如果我是你，

1.  我不会使用资产目录来提供图像。我的选择至少是 public/images 目录。资产不是用于动态文件，而是用于静态文件。

2.  如果图像是从没有扩展名的服务器提供的，我会通过控制器正确设置 mime 类型来从应用程序提供图像，猜测你使用 rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:57:37.833

我不知道您的文件夹结构，但您可以使用“../”来表示您希望从执行代码的位置相对上升的每个文件夹。

尝试：

```
info_picture.style.backgroundImage = "url('../assets/img/channels/banners/"+channel+"')"; 
```

看看路径将如何变化。

# macos - 为什么 iTerm2 中 OSX 上的 emacs 看不到 CS- ?

> ID：14784874
> 
> 赞同：4
> 
> 时间：2013-02-09T04:13:13.263
> 
> 标签：macos, emacs, zsh, iterm

我的 init.el 中有以下键盘快捷键

```
(global-set-key (kbd "C-S-<up>") 'move-line-up) 
```

这在 Cocoa Emacs.app 中效果很好，但是在 iTerm2 中以控制台模式运行 emacs 时，它们的键似乎永远不会进入 emacs。

我尝试在emacs中运行以下

```
(read-key-sequence "?") 
```

并输入`C-S-<up>`提示，但从未收到。这让我认为 iTerm2 或 zsh 正在窃取击键。关于如何调试的任何想法？或者更好的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:32:13.253

# angularjs - Angularjs 教程 step2 测试 chrome not start with Error write EIO

> ID：14784876
> 
> 赞同：0
> 
> 时间：2013-02-09T04:13:20.183
> 
> 标签：angularjs, karma-runner

我的电脑是Windows7 32位。
当我测试 Angularjs 教程第 2 步时。
Chrome 无法启动并出现错误。

--- 版本 ---
Angularjs:1.0.2
testacular:0.4.0

--- 消息 ----

```
 info: Testacular server started at http://localhost:9876/
    info (launcher): Starting browser chrome
    error (launcher):
    events.js:71
            throw arguments[1]; // Unhandled 'error' event
                           ^
    Error: write EIO
        at errnoException (net.js:770:11)
        at Object.afterWrite (net.js:594:19) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:16:46.050

参考：[https](https://github.com/angular/ang) ://github.com/angular/ang ...

启动脚本/test.sh（*在 Windows 上：scripts\test.bat*）

在 Git Shell / 命令窗口中，转到 angular-phonecat 目录。输入这个命令

**脚本\test.bat**

请注意它是 test.bat 而不是 .sh 文件。

您可以看到服务器已启动，但可能会抛出 Chrome 无法启动且无法找到路径的错误。在这一点上我也被阻止了，无论如何经过几次参考，得到了这个解决方案。

在某个编辑器中打开**config/testacular.conf.js 。**更改

浏览器 = ['Chrome'] 到

**browsers = ['C:/Program Files (x86)/Google/Chrome/Application/chrome.exe'];**

（这是我的 Chrome 在 Windows 8 中的安装位置）。您可能需要获取正确的安装路径以及路径中的 chrome.exe，并且应该使用正斜杠，否则它将无法正常工作。

它现在对我有用！

# javascript - .removeClass 在 .replaceWith 中不起作用

> ID：14784887
> 
> 赞同：0
> 
> 时间：2013-02-09T04:15:36.640
> 
> 标签：javascript, jquery, removeclass, replacewith

我正在尝试制作一个隐藏特定按钮的按钮 - 然后将其替换为另一个隐藏的 . 但是，当我测试代码时，除了包含“显示：无”的 .removeClass 之外，一切都正确触发。

这是代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
        var webform = document.getElementById('block-webform-client-block-18');
        var unmarriedbutton = document.getElementById('unmarried');
        var buyingblock = document.getElementById('block-block-10');

        $(unmarriedbutton).click(function () {
            $(buyingblock).fadeOut('slow', function() {
                $(this).replaceWith(function () {
                    $(webform).removeClass('hiddenbox')
                });
            });
        });
    });
    </script> 
```

'hiddenbox' 上的 CSS 只不过是“显示：无”。

有一个 id 为 unmarried 的，当单击它时会淡出一个 div 并用一个隐藏的 div 替换它，该隐藏的 div 会删除类以显示它。然而，最后一部分没有触发——其他一切都正常运行。当我也在控制台中查看时，它没有显示任何错误。

有人可以告诉我错误在哪里吗？谢谢！

编辑：我可能使用了错误的函数来替换 div，所以这里是网站：[http](http://drjohncurtis.com/happily-un-married) ://drjohncurtis.com/happily-un-married 。如果单击“下载书”按钮，该 div 将消失并正确替换为 div#block-webform-client-block-18。但是，它仍然是隐藏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:17:41.797

传递给 replaceWith 的函数必须返回要替换它的内容。您必须实际返回内容。

我不确切知道您要完成什么，但如果目标是用 webform 对象替换它，您可以使用它：

```
$(this).replaceWith(function () {
       return($(webform).removeClass('hiddenbox'));
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-09T04:16:41.920

注意，使用 jquery ！

```
 var webform = $('#block-webform-client-block-18');
    var unmarriedbutton = $('#unmarried');
    var buyingblock =$('#block-block-10');
    unmarriedbutton.click(function () {
        buyingblock.fadeOut('slow', function() {
            $(this).replaceWith( webform.removeClass('hiddenbox'));

        });
    }); 
```

太快了，我相信这是你选择你的对象（getelementbyid）然后你从中创建一个jquery对象的方式...... - >使用jquery API

# webbrowser-control - 从 WebBrowser 访问网页资源

> ID：14784890
> 
> 赞同：0
> 
> 时间：2013-02-09T04:16:22.527
> 
> 标签：webbrowser-control

有没有办法或解决方法来访问由 WebBrowser 中的页面加载的资源，无论是 Windows Forms WebBrowser 还是 Windows Phone WebBrowser（和/或 WPF WebBrowser）？

我一直使用 WebBrowser 的 DocumentText 属性进行网络爬取和自动化任务，但不知道是否可以从代码中实际访问资源，就像我们使用 firebug 或 Chrome 控制台检索加载页面时已获取的一些文档时一样.

# ios - 除了 rootviewcontroller 之外，无法向 uiwindow 添加其他子视图

> ID：14784896
> 
> 赞同：5
> 
> 时间：2013-02-09T04:17:01.510
> 
> 标签：ios

下面是我在 didFinishLaunchingWithOptions 中的应用程序委托的代码

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

CGRect windowFrame = self.window.frame;
UIView *bottomView = [[UIView alloc] initWithFrame:CGRectMake(0, windowFrame.size.height-100, windowFrame.size.height, windowFrame.size.height)];
bottomView.backgroundColor = [UIColor redColor];
[self.window addSubview:bottomView];

//    self.viewController.view.frame = CGRectMake(0, 0, windowFrame.size.width, windowFrame.size.height-100);

self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];

return YES; 
```

我的 ViewController 是 FreeForm，它的高度大约是 245。如您所见，我试图放置一个 100 点高度的底部视图。

我只是想学习这个。

但是视图总是填满整个屏幕。如果我将视图控制器设置为 Windows rootviewcontroller 注释掉，我可以在屏幕上看到我的底部视图。

我做错了什么？请指教。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T05:55:38.093

代替

```
self.window.rootViewController = self.viewController; 
```

当我编码时

```
[self.window addSubview:self.viewController.view]; 
```

给了我预期的结果，它控制了自由形式的大小。

当设置为 rootviewcontroller 时，它会出现，它会填满整个可用屏幕，而不管 XIB 上设置的自由格式大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T04:31:03.590

只写一句话

```
[self.window bringSubviewToFront: bottomView]; 
```

**或者**

将bottomView添加到窗口，

```
[[[[UIApplication sharedApplication] delegate] window] addSubview:bottomView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T05:19:53.233

我不确定您为什么要这样做，但 IB 中的自由格式设置（至少对于 xib 文件）似乎仅用于布局目的。它实际上不会影响您在视图加载时获得的大小。如果你想让它更短，那么在 ViewController 的 viewDidAppear: 方法中设置它的框架，而不是在应用程序委托中——视图还没有加载到那里，所以现在设置框架还为时过早。

# python - 在 python Tornado 服务器上处理许多路径的最佳方法是什么？

> ID：14784897
> 
> 赞同：0
> 
> 时间：2013-02-09T04:17:30.967
> 
> 标签：python, tornado, web-frameworks

```
class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
        (r"/", MainHandler),
        (r"/auth/login", AuthLoginHandler),
        (r"/auth/logout", AuthLogoutHandler),
        (r"/auth/register",RegisterHandler),
        (r'/user/([a-z\d.]{5,})/?',UserHandler),
        (r'/user/([a-z\d.]{5,})/friends',UserFriendHandler),
        (r'/user/([a-z\d.]{5,})/status',StatusHandler),
        (r'/user/([a-z\d.]{5,})/wall',WallHandler),
        (r'/actions/respond_friend',FriendActionHandler),
        ] 
```

这是我的处理程序数组。这可能会增长得更多。我的问题涉及到这一行：

```
 (r'/actions/respond_friend',FriendActionHandler), 
```

我计划使用这条线通过帖子响应朋友请求，将朋友的用户名作为帖子参数。发送帖子时如何检索此参数（它“存储”在哪里）？这样做是否更有意义：

```
(r'/user/([a-z\d.]{5,})/actions/respond_friend',FriendActionHandler), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:26:36.113

您可以使用[`get_argument`](http://www.tornadoweb.org/documentation/web.html?highlight=get_argument#tornado.web.RequestHandler.get_argument)在 post 方法中获取请求参数

`username = self.get_argument('username', None)`

我不知道通过 url 传递用户名是否有意义。如果你是，它也会复制它来发布用户名。

如果 url 参数与正则表达式不匹配，我相信龙卷风只会引发 404。因此，如果您需要对引发的错误进行更细粒度的控制，将用户名发布在帖子正文中可能更有意义

# javascript - 使用把手显示来自 parse.com 的 json 响应

> ID：14784907
> 
> 赞同：4
> 
> 时间：2013-02-09T04:19:27.210
> 
> 标签：javascript, json, getjson, handlebars.js, parse-platform

我想将 json 响应传递给车把。我已经查看了解析文档和 stackoverflow 问题，但我似乎无法弄清楚这一点。

这是回应：

```
{"results":[{"address":"755 W. Yale","createdAt":"2013-02-09T01:12:15.732Z","updatedAt":"2013-02-09T01:12:15.732Z","objectId":"JomKPfme5M"}]} 
```

这是我的车把模板：

```
<script id="post-template" type="text/x-handlebars-template">
<h1>{{address}}</h1>
</script> 
```

这是脚本

```
Parse.initialize("xxxxxx", "yyyyyy");

var listingsView = Parse.Object.extend("listings");
var query = new Parse.Query(listingsView);
query.equalTo("objectId", "JomKPfme5M");
query.first({
  success: function(results){

        var source = $('#post-template').html();
        var template = Handlebars.compile(source);
        var html = template(results);
    },
    error: function(object, error){
        console.log(error);
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:20:37.270

结果是一个数组。尝试将第一个元素传递给模板。

```
 var html = template(results[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T19:50:01.993

如果您使用的是 EmberJS [Ember-Model-Parse-Adapter](https://github.com/samharnack/ember-model-parse-adapter/blob/master/ember-model-parse-adapter.js)很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:28:08.013

如果赫克托的回答不起作用，试试这个：

```
var html = template(results[0].attributes); 
```

# php - 使电话号码可点击以在手机上拨打屏幕？

> ID：14784914
> 
> 赞同：2
> 
> 时间：2013-02-09T04:20:27.080
> 
> 标签：php, mysql, hyperlink

如何从 mysql 数据库中创建一个在 php 中回显的电话号码？

我是 php 和 mysql 的新手，还在学习，请有人解释或告诉我如何使电话号码可点击以转到手机上的拨号屏幕。

这是我在下面使用的代码，我需要如何调整我的超链接

```
<?php
$user_type_set = user_type_profile();
while ($user = mysql_fetch_array($user_type_set)) { ?>

<div class="contact-buddy"></div><div class="contact-buddy2"></div>
<div class="contact_details_phone"><p><strong>Phone: <div class="phone_font"><strong><?php echo $profile['contact_number'] ?></strong></div></div></p>
<div class="contact_details_email"><p><strong>Email:&nbsp;&nbsp;<?php echo $profile['public_email'] ?></strong></p></div>

<? } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:24:11.433

这肯定适用于 iphone，但我相信它也适用于 android。您的 php 应该输出类似于以下内容的最终产品：

```
<a href="tel:1-800-555-5555">1-800-555-5555</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:38:44.857

如果你想让电话号码由`<?php echo $profile['contact_number'] ?>`可点击返回，那么你可以使用带有内联 PHP 的直接 HTML 代码块：

```
<a href="tel:<?php echo $profile['contact_number']; ?>"><?php echo $profile['contact_number']; ?></a> 
```

或者用这个 PHP 清理一下：

```
<?php
$phone = $profile['contact_number'];
echo "<a href="tel:$phone">$phone</a>";
?> 
```

无论您想要哪种方法。

# iphone - 如何设置对ipa中文件的控制访问

> ID：14784915
> 
> 赞同：0
> 
> 时间：2013-02-09T04:20:34.993
> 
> 标签：iphone, xcode, ipad, ios-simulator

我有一个 ipa 文件，其中嵌入了一些敏感信息。当有人打开 ipa 或使用 iExplorer 查看内容时，他们能够查看其中存在的信息。有没有一种方法可以让用户阻止访问 ipa 中的文件。如果是，请说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T11:43:45.890

不会。如果您的应用程序能够读取和解密文件，那么任何拥有越狱手机的人都可以附加调试器并转储相同的数据。

# javascript - 如何实现多实例jplayers

> ID：14784917
> 
> 赞同：5
> 
> 时间：2013-02-09T04:20:58.453
> 
> 标签：javascript, jquery, jplayer

如果有人以前使用过 jplayer，我需要这个问题的帮助。

我有多个 jplayers，每个播放器都应该播放自己的音频文件。但它不是这样做的，如果我播放一个 jplayer，那么所有的 jplayer 都会播放，都播放来自所选 jplayer 的那个音频文件。事实上，如果我在一个 jplayer 中使用一个控件，它也会控制所有其他 jplayer。

所以我正在尝试实现一个多实例 jplayers，其信息来自：

[http://www.jplayer.org/latest/demo-03/](http://www.jplayer.org/latest/demo-03/)

但我真的很难实现这一点，所以我的问题是有人可以帮我完成这个实现，以便 jplayer 可以正常工作，而 jplayer 只控制自己的播放器而不影响其他 jplayer？

以下是我目前拥有的javascript代码（查看源代码）：

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1-72-0").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: "AudioFiles/Kalimba.mp3"
      });
    },
    play: function() { // To avoid both jPlayers playing together.
      $(this).jPlayer("pauseOthers");
   },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "mp3"
  });
}); 
</script> 
```

**更新：**

实际代码：

如果没有音频文件，则为每个音频文件显示一个空白，否则，显示一个音频播放器。我也包含了 html 控件，不确定是否需要，但发布它以防万一

```
 //start:procedure audio
        $aud_result = '';
        if(empty($arrAudioFile[$key])){
          $aud_result = '&nbsp;';
        }else{

$j = 0;
foreach ($arrAudioFile[$key] as $a) { 

        $info = pathinfo('AudioFiles/'.$a); 
?>

<script type="text/javascript">   
    $(document).ready(function(){

$("#jquery_jplayer_1-<?php echo $key.'-'.$j; ?>").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
      });
      $(this).bind($.jPlayer.event.play, function() { 
          $(this).jPlayer("pauseOthers");
        });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $info['extension'];?>"
});
}); 
</script>
  <div id="jquery_jplayer_1-<?php echo $key.'-'.$j; ?>" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
<?php $j++; 
}

}
//end:procedure audio
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T05:16:42.427

您可以像这样创建一个`function`并传递参数 ( `file and player id`) 以在同一页面上创建不同的播放器，而不会产生任何冲突：

```
function js_audioPlayer(file,location) {
    jQuery("#jquery_jplayer_" + location).jPlayer( {
        ready: function () {
          jQuery(this).jPlayer("setMedia", {
        mp3: file
          });
        },
        cssSelectorAncestor: "#jp_interface_" + location,
        swfPath: "/swf"
    });
        return;
} 
```

在这个例子中，一个文件和位置变量被传递到一个包装函数中，然后构造播放器。

然后`js_audioPlayer()`根据需要多次运行 javascript 函数：

```
js_audioPlayer('file1.mp3',1); //Player 1
js_audioPlayer('file2.mp3',2); //Player 2
js_audioPlayer('file3.mp3',3); //Player 3 
```

创建带有 ID 的 Player DIV：

```
jquery_jplayer_1 
jquery_jplayer_2
jquery_jplayer_3 
```

和带有 ID 的接口 DIV：

```
jp_interface_1
jp_interface_2
jp_interface_3 
```

希望这可以帮助。

**更多详情**：[http ://www.nightbluefruit.com/blog/2011/08/multiple-jplayers-on-the-same-page/](http://www.nightbluefruit.com/blog/2011/08/multiple-jplayers-on-the-same-page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T06:56:45.273

这是使用 jplayer 的多个音频播放器实例的代码。以下代码对我有用。希望这对任何人都有帮助。

```
$(document).ready(function(){
    /*---Create a jplayer instance on click on the play image---*/

    $(".audio").click(function() {
       $.jPlayer.pause();
       var record_id = this.id;
       var path = 'path for the audio file';
       $("#jquery_jplayer_"+record_id).jPlayer({
            ready: function (event) {
                $(this).jPlayer("setMedia", {
                    title: "Bubble",
                    oga: path,
                });
            },
            cssSelectorAncestor: "#jp_container_"+record_id,
            supplied: "oga",
            wmode: "window",
            errorAlerts: true,
            consoleAlerts: true,
            warningAlerts: true,
            useStateClassSkin: true,
            autoBlur: false,
            smoothPlayBar: true,
            keyEnabled: true,
            remainingDuration: true,
            toggleDuration: true
        });
    });
}); 
```

# php - Wordpress 排序自定义帖子类型

> ID：14784920
> 
> 赞同：0
> 
> 时间：2013-02-09T04:21:32.790
> 
> 标签：php, wordpress

我有一个自定义帖子类型，它会倒置显示我的所有条目，这意味着第一个条目最后显示在我的实际首页上 - 有没有办法更改排序顺序？

我的代码如下：

```
 <?php global $post; ?>

        <ul class="menu-items">
            <?php
            $menuloop = new WP_Query(array(
                'posts_per_page' => -1,
                'post_type'      => 'menu',
                'tax_query'      => array(
                    // Note: tax_query expects an array of arrays!
                    array(
                        'taxonomy' => 'menu_type', // my guess
                        'field'    => 'slug',
                        'terms'    => $menuname_category
                    )
                ),
            ));

            ?>
            <?php if ( have_posts() ) : while ( $menuloop->have_posts() ) : $menuloop->the_post(); ?>
            <li>
                    <div class="grid2column"><?php the_title(); ?></div>
                    <div class="grid2column lastcolumn"><?php if(get_post_meta($post->ID, 'menuoption_menu_pricing', true)): ?><?php echo get_post_meta($post->ID, 'menuoption_menu_pricing', true) ?><?php endif; ?></div>
                    <div class="clearfix"></div>
                    <div class="item-description-menu"><?php echo get_the_excerpt(); ?></div>
            </li>
            <?php endwhile; ?>
            <?php endif; ?>
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:55:13.767

我猜你在问题中给出的代码有错误。`posts_per_page => -1`.

为什么会这样`-1`？它必须是一个数字`> 0`才能显示。

对于排序，您需要将这两个参数添加到数组中

`array ( 'orderby' => 'date', 'order' => 'DESC'`

基本上，您可以更改`DESC`to`ASC`以反转顺序。

## 最终数组

```
$menuloop = new WP_Query(array(
                'posts_per_page' => 10,
                'post_type'      => 'menu',
                'orderby'        => 'date', // new arg
                'order'          => 'DESC', // new arg
                'tax_query'      => array(
                    // Note: tax_query expects an array of arrays!
                    array(
                        'taxonomy' => 'menu_type', // my guess
                        'field'    => 'slug',
                        'terms'    => $menuname_category
                    )
                ),
            )); 
```

# ios - iOS 静态库引用静态库

> ID：14784921
> 
> 赞同：0
> 
> 时间：2013-02-09T04:21:48.640
> 
> 标签：ios, xcode

静态库是否可以链接到另一个静态库？例如，我想有以下工作区结构：

应用 静态库 1 静态库 共享 静态库 2 静态库 共享

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:25:06.747

静态库不相互链接。您需要一个最终的可执行文件（在这种情况下是应用程序）或静态库中的所有符号的东西来解析。您可以拥有`liba.a`将要出现在 中的参考符号`libb.a`，但您可能同时需要`liba.a`和`libb.a`来链接应用程序。最终需要什么取决于应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:48:27.740

只需将其他库的标题放在搜索路径上（以便您可以编译），然后发布您的库用户也需要其他库的要求。

还可以考虑使用像[CocoaPods](http://cocoapods.org/)这样的库管理器来管理它。

# c# - C#访问接口数组中对象的非接口方法

> ID：14784924
> 
> 赞同：3
> 
> 时间：2013-02-09T04:23:05.410
> 
> 标签：c#, arrays, types, interface

我有一个名为 iBlocks 的接口数组，其中包含多个类的对象（它们都实现了 iBlocks 接口）。我想知道是否有可能，或者如何处理我需要为此数组中某个类的所有对象调用接口未涵盖的方法的情况。例如：

```
iBlocks = new iBlocks[1];
iBlocks[0] = new greenBlock();
iBlocks[1] = new yellowBlock();

foreach (greenBlock in iBlocks)
{
   greenBlock.doStuff()
} 
```

其中 doStuff() 是接口中未定义的方法，因为它在 YellowBlock 类中没有用处。实际界面非常出色，因为 greenBlock 和 YellowBlock 有很多共同的功能。但是，我仍然希望访问每个类的某些特殊方面，而无需为每个对象类型创建一个完全独立的数组。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T04:26:53.887

您可以使用`as`运算符。

```
foreach (var block in iBlocks)
{
    var green = block as greenBlock;
    if (green != null)
         green.doStuff()
} 
```

或者在 LINQ 中

```
foreach (var green in iBlocks.OfType<greenBlock>())
{
    green.doStuff()
} 
```

# php - 如何从 php 文件中的数据库查询中获取数组数据到 ajax 成功数据

> ID：14784925
> 
> 赞同：3
> 
> 时间：2013-02-09T04:23:26.793
> 
> 标签：php, javascript, mysql, ajax

我正在尝试获取数组中的数据，从 SQL 查询到 ajax 成功数据。这是我试过的代码，

```
function adminchecksub(value1){
//alert('hi');
var value1=$('#adminsid').val();
//alert(value1);
if(value1==''){
alert('Please enter a Sub id');
}
else{
//alert(value1);
 $.ajax({

                                        type: 'POST',
                                        url: root_url + '/services/services.php?method=adminsubcheck',
                                        data: {value1:value1},
                                        async: true,
                                        success: function (data) {
                                                alert(data);

                                                if (data == 1) {
                                                        alert('inside');
                                                        //window.location.assign(rdurl+"?sid="+sid);
                                                        return true;
                                                } else {
                                                        //alert('does not exist!');
                                                       //alert('outside');
                                                        return false;
                                                }

                                        }
                                });
} 
```

现在在从上面的ajax调用请求的php方法中，我必须得到这个函数返回的数据，它返回一个数组

```
 function adminsubcheck($sid){
$subid=$sid['value1'];
$row = array();
//echo $subid;
$query = "SELECT Sub_id,Status,Sub_type FROM Sub WHERE Sub_id=$subid";        
        //echo $query;
        //echo $subid;
        $queryresult = mysql_query($query);
        $count  = mysql_num_rows($queryresult);
         //echo $count;

         while ($r = mysql_fetch_assoc($queryresult)) {

           $row[] = $r;
        } 
        return $row;

} 
```

这里 $row 将一个数组作为数据返回给 ajax 函数，我需要在其中单独获取所有项目。有人帮助我将值放入 ajax 调用中。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:29:48.027

```
return $row; 
```

像这样替换

```
echo json_encode($row); 
```

并像这样在 ajax 中添加 dataType='json'

```
dataType: 'json', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:31:30.780

如果您想在 ajax 调用中获取值，我认为应该是：

```
 while ($r = mysql_fetch_assoc($queryresult)) {
       $row[] = $r;
    }

    echo json_encode(array('data'=>$row));
    exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T04:31:36.803

在您的 PHP 文件中，您可以通过以下方式将数组作为 json 对象返回（注意 PHP 文件如何回显结果以将其传递回 javascript）

```
...
$json = json_encode($row);
echo $json 
```

现在将以下内容添加到您的 javascrip ajax

```
 $.ajax({

...
 // Whatever code you currently have
...

}).done(function ( json ) {

    var data = JSON.parse(json);

    //Continue with javascript
}); 
```

您可以将 java 脚本变量“数据”作为关联数组处理，就像在 PHP 中一样

另外，看看你如何填充 php 变量 $row 并调整以下方式：

```
$cnt = 0;
while ($r = mysql_fetch_assoc($queryresult)) {

        $row[$cnt] = $r;
        $cnt++;

} 
 $json = json_encode($row);
    echo $json; 
```

在 javascript 中，您可以通过以下方式在数据变量中访问您的行：

```
var value = data[0]['field_name']; 
```

上面语句中，0会对应$cnt的值（即mysql返回的行号）

# php - 支付宝支付成功后跳转到页面

> ID：14784931
> 
> 赞同：0
> 
> 时间：2013-02-09T04:24:34.050
> 
> 标签：php, paypal

支付成功后是否可以将用户重定向到某个页面。 ![在此处输入图像描述](../Images/85859d7d79bcdeb3ae535cac378070b0.png)

我有这个表格，当用户填写详细信息时，我想在付款成功时将用户重定向到我的页面。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:56:52.183

这是贝宝付款代码的示例。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">  
    <input type="hidden" name="cmd" value="_xclick">  
    <input type="hidden" name="business" value="accounts@freelanceswitch.com">  
    <input type="hidden" name="item_name" value="Donation">  
    <input type="hidden" name="item_number" value="1">  
    <input type="hidden" name="amount" value="9.00">  
    <input type="hidden" name="no_shipping" value="0">  
    <input type="hidden" name="no_note" value="1">  
    <input type="hidden" name="currency_code" value="USD">  
    <input type="hidden" name="lc" value="AU">  
    <input type="hidden" name="bn" value="PP-BuyNowBF">
    <input type="hidden" name="return" value="http://net.tutsplus.com/payment-complete/">    
    <input type="image" src="https://www.paypal.com/en_AU/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">  
    <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">  
</form> 
```

这里`<input type="hidden" name="return" value="http://net.tutsplus.com/payment-complete/">`指定返回 url。欲了解更多信息 -[去这里](http://net.tutsplus.com/tutorials/html-css-techniques/creating-a-paypal-payment-form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T15:54:21.157

还要考虑[自动返回](http://www.paysketch.com/paypal-auto-return-url/)选项：它允许您为所有按钮设置一个 url。

*   登录并单击“我的帐户”下的“个人资料”子选项卡。
*   单击销售偏好下的网站支付偏好链接。
*   单击打开单选按钮以启用自动返回。
*   输入返回网址

> 退货 URL 将普遍适用于所有自动退货付款。这可以通过在您在 PayPal 个人资料中创建的付款按钮中提及单独的返回 URL 来覆盖

[此答案](https://stackoverflow.com/a/7708419/1677209)中的更多信息。

# sencha-touch-2 - Sencha Touch 2 叠加 showBy html div

> ID：14784934
> 
> 赞同：0
> 
> 时间：2013-02-09T04:25:14.443
> 
> 标签：sencha-touch-2

我怎样才能用它来显示一个div：

html

```
<div class='clickable'>Tap me</div> 
```

JS代码（tap连接到上面的div元素）

```
tap      : function(e) {
    overlay = Ext.Viewport.add({
        xtype: 'panel',
        left: 0,
        top: 0,
        modal: true,
        hideOnMaskTap: true,
        hidden: true,
        width: 260,
        height:'70%',
        html: 'STUFF!!',
        styleHtmlContent: true,
        scrollable: true,
        items: [
            {
                docked: 'top',
                xtype: 'toolbar',
                title: 'Overlay Title'
            }
        ]
    });

    overlay.showBy(e.getTarget());
} 
```

然而，这是一场噩梦，我会用`e.getTarget()`or得到这些错误`e.target`，它确实可以工作，`.show()`但它的定位是错误的。这样做的正确方法是什么？

```
Uncaught TypeError: Object #<HTMLTableCellElement> has no method 'getPageBox' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:25:03.537

您可能希望在 HTML div 标签上使用[事件委托。](http://www.sencha.com/forum/showthread.php?176239-HOWTO-Adding-Event-Listeners-to-Component-Elements)所以你可以给你的 div 标签一个 id：

`<div class='clickable' id='myId'>Tap me</div>`

```
listeners : {
    tap: {
        fn: function() {},
        element: 'element',
        delegate: '#myId'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T00:53:00.817

你需要这样做：

```
tap : function(e) {
    var overlay = Ext.create('Ext.Panel', {
      xtype: 'panel',
      left: 0,
      top: 0,
      modal: true,
      hideOnMaskTap: true,
      hidden: true,
      width: 260,
      height:'70%',
      html: 'STUFF!!',
      styleHtmlContent: true,
      scrollable: true,
      items: [
        {
            docked: 'top',
            xtype: 'toolbar',
            title: 'Overlay Title'
        }
    ]
   });

overlay.showBy(e.getTarget());
} 
```

也就是说，不要添加到视口...而是创建面板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T23:13:25.137

您可以通过在您的 html div 上覆盖一个不可见的 Ext.Button 来破解它！您只需要添加一个绘制函数来呈现新按钮...

```
 tpl: '<div class='clickable'>Tap me</div>'
 .......

 listeners: {

        painted : function(){
            var clickable     = Ext.DomQuery.select('.pageClass .clickable')[0];

                var invisibleButton = new Ext.Button({
                    text:           'whatever',
                    renderTo:       clickable,
                    cls:            'something',
                    width:          '100%',
                              // set styles as transparent bg, no border etc...
                    handler: function(){
                        var overlay = Ext.Viewport.add({
                            xtype: 'panel',
                            left: 0,
                            top: 0,
                            modal: true,
                            hideOnMaskTap: true,
                            hidden: true,
                            width: 260,
                            height:'70%',
                            html: 'STUFF!!',
                            styleHtmlContent: true,
                            scrollable: true,
                            items: [
                                {
                                    docked: 'top',
                                    xtype: 'toolbar',
                                    title: 'Overlay Title'
                                }
                            ]
                        });

                        overlay.showBy(this);
                    }
                });
            }
        } 
```

测试和工作。

# android - 歌曲管理器中的空指针异常？

> ID：14784935
> 
> 赞同：0
> 
> 时间：2013-02-09T04:25:14.340
> 
> 标签：android, android-mediaplayer

我正在尝试使用此代码获取播放列表。

```
final String MEDIA_PATH=new String(MediaStore.Audio.Media.IS_MUSIC+"!=0");  
    //final String MEDIA_PATH=new String(MediaStore.Video.Media.IS_PRIVATE);
            private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Constructor
    public SongsManager(){

    }

    /**
     * Function to read all mp3 files from sdcard
     * and store the details in ArrayList
     * */
    public ArrayList<HashMap<String, String>> getPlayList(){
        File home = new File(MEDIA_PATH);

        if (home.listFiles(new FileExtensionFilter()).length > 0) {
            for (File file : home.listFiles(new FileExtensionFilter())) {
                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
        }
        // return songs list array
        return songsList;
    }

    /**
     * Class to filter files which are having .mp3 & .mp4 extension
     * */
    class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP4"));
        }
    }
} 
```

这是日志猫——

```
02-09 10:09:34.749: E/AndroidRuntime(389): Caused by: java.lang.NullPointerException 
02-09 10:09:34.749: E/AndroidRuntime(389): at com.example.androidtablayout.SongsManager.getPlayList(SongsManager.java:29) 
02-09 10:09:34.749: E/AndroidRuntime(389): at com.example.androidtablayout.AudioActivity.onCreate(AudioActivity.java:29) 
02-09 10:09:34.749: E/AndroidRuntime(389): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
02-09 10:09:34.749: E/AndroidRuntime(389): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

我正在按照你的建议使用你的代码 Grishu，但是在这个错误中，我使用它的方式如下所示：

```
public class SongsManager {
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
private Cursor musiccursor, videocursor;
// projection for audio media files
    String[] music = { MediaStore.Audio.Media._ID,MediaStore.Audio.Media.DATA,MediaStore.Audio.Media.DISPLAY_NAME, MediaStore.Video.Media.SIZE };
    // projection for video media files
    String[] video = { MediaStore.Video.Media._ID,MediaStore.Video.Media.DATA,MediaStore.Video.Media.DISPLAY_NAME, MediaStore.Video.Media.SIZE };

    int totalSongs,totalSongs1;
    public ArrayList<HashMap<String, String>>getPlayList(){
        // set cursor for audio media
        musiccursor= managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                music, null, null, null);
        // set cursor for video media
        videocursor = managedQuery(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
                video, null, null, null);

        totalSongs=musiccursor.getCount();
        totalSongs1=videocursor.getColumnCount();

         if (musiccursor!= null) {
                if (musiccursor.moveToFirst()) {
                    do {
                        String songname = musiccursor.getString(musiccursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
                        int song_id = musiccursor.getInt(musiccursor.getColumnIndex(MediaStore.Audio.Media._ID));
                        String fullpath = musiccursor.getString(musiccursor.getColumnIndex(MediaStore.Audio.Media.DATA));

                        songsList.addAll(songsList);
                        String albumname =musiccursor.getString(musiccursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));
                        int album_id = musiccursor.getInt(musiccursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
                        String artistname = musiccursor.getString(musiccursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));
                        int artist_id = musiccursor.getInt(musiccursor.getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));

                     } while (musiccursor.moveToNext());
                }
                musiccursor.close();
            }
         else if (videocursor!=null) {
            if(videocursor.moveToFirst()){
                do{
                    String songname= videocursor.getString(videocursor.getColumnIndex(MediaStore.Video.Media.DISPLAY_NAME));
                    int song_id= videocursor.getInt(videocursor.getColumnIndex(MediaStore.Video.Media._ID));
                    String fullpath=videocursor.getString(videocursor.getColumnIndex(MediaStore.Video.Media.DATA));

                    songsList.addAll(songsList);
                    String albumname =videocursor.getString(videocursor.getColumnIndex(MediaStore.Video.Media.ALBUM));
                   // int album_id = videocursor.getInt(videocursor.getColumnIndex(MediaStore.Video.Media.ALBUM_ID));
                    String artistname = videocursor.getString(videocursor.getColumnIndex(MediaStore.Video.Media.ARTIST));
                   // int artist_id = videocursor.getInt(videocursor.getColumnIndex(MediaStore.Video.Media.ARTIST_ID));

                }while (videocursor.moveToNext());
            }
            videocursor.close();
        }
         return songsList;
}

    private Cursor managedQuery(Uri externalContentUri, String[] audio2,
            Object object, Object object2, Object object3) {
        // TODO Auto-generated method stub
        return null;
    }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:08:46.430

尝试这个 ：

> ```
>  String[] STAR = { "*" };
>    int totalSongs;
>  public void ListAllSongs() 
>   {
>     Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
>     String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
>     if (MusicUtils.isSdPresent()) {
>         cursor = managedQuery(allsongsuri, STAR, selection, null, null);
>         totalSongs = cursor.getCount();
>         if (cursor != null) {
>             if (cursor.moveToFirst()) {
>                 do {
>                     String songname = cursor
>                             .getString(cursor                                        .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
>                     int song_id = cursor.getInt(cursor
>                             .getColumnIndex(MediaStore.Audio.Media._ID));
>                     String fullpath = cursor.getString(cursor
>                             .getColumnIndex(MediaStore.Audio.Media.DATA));
>                     fullsongpath.add(fullpath);
>                     String albumname = cursor.getString(cursor
>                             .getColumnIndex(MediaStore.Audio.Media.ALBUM));
>                     int album_id = cursor
>                             .getInt(cursor
>                                     .getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
>                     String artistname = cursor.getString(cursor
>                             .getColumnIndex(MediaStore.Audio.Media.ARTIST));
>                     int artist_id = cursor
>                             .getInt(cursor
>                                     .getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));
>                                             } while (cursor.moveToNext());
>             }
>             cursor.close();
>         }
>     }
>  } 
> ```

**编辑：**

您查看以下链接以在列表视图中显示存储在您的 SD 卡中的所有视频文件。

1)[链接 1](http://gypsynight.wordpress.com/2012/02/17/how-to-show-all-video-file-stored-in-your-sd-card-in-a-listview/)
2)[链接 2](http://z4android.blogspot.in/2011/06/displaying-list-of-music-files-stored.html)
3)[链接 3](http://raghumudem.blogspot.in/2011/10/android-populating-music-files-from.html)

我希望它会帮助你。

谢谢。

# bash - bash 脚本中任务的自定义进度消息

> ID：14784936
> 
> 赞同：0
> 
> 时间：2013-02-09T04:25:35.197
> 
> 标签：bash

我目前正在编写一个 bash 脚本来自动执行任务。在我的脚本中，我希望它在执行任务时显示进度消息。

例如：

> user@ubuntu:~$ 配置一些东西

->

> 配置一些东西。

->

> 配置一些东西..

->

> 配置一些东西...

->

> 配置一些东西......完成

所有进度消息都应该出现在同一行。到目前为止，以下是我的解决方法：

```
echo -n "Configure something "
exec "configure something 2>&1 /dev/null"
//pseudo code for progress message
echo -n "." and sleep 1 if the previous exec of configure something not done
echo " done" if exec of the command finished successfully
echo " failed" otherwise 
```

exec 会等待命令完成，然后再继续执行脚本行吗？如果是这样，那么我如何在执行配置某事的同时回显消息？我如何知道 exec 何时完成上一个命令并返回 true？使用`$?`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:49:36.540

只是戴上编辑的帽子，如果出现问题怎么办？您或您脚本的用户如何知道*出了什么*问题？这可能不是您要寻找的答案，但是让您的脚本单独执行每个构建步骤可能会总体上更好，尤其是对于故障排除。为什么不定义一个函数来验证您的构建步骤：

```
function validateCmd()
{
  CODE=$1
  COMMAND=$2
  MODULE=$3

  if [ ${CODE} -ne 0 ]; then
    echo "ERROR Executing Command: \"${COMMAND}\" in Module: ${MODULE}"
    echo "Exiting."
    exit 1;
  fi
}    

./configure
validateCmd $? "./configure" "Configuration of something" 
```

无论如何，是的，正如您在上面可能注意到的那样，用于`$?`确定最后一个命令的结果是什么。例如：

```
rm -rf ${TMP_DIR}

if [ $? -ne 0 ]; then
  echo "ERROR Removing directory: ${TMP_DIR}"
  exit 1;
fi 
```

要回答您的第一个问题，您可以使用：

```
echo -ne "\b" 
```

删除同一行上的一个字符。因此，要在一行中数到十，您可以执行以下操作：

```
for i in $(seq -w 1 10); do
  echo -en "\b\b${i}"
  sleep .25
done
echo 
```

诀窍是您必须知道要删除多少，但我相信您可以弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T05:55:49.073

你不能那样打电话`exec`；exec 永远不会返回，并且 exec 之后的行将不会执行。在单行上打印进度更新的标准方法是简单地使用`\r`而不是`\n`在每行的末尾使用。例如：

```
#!/bin/bash

i=0
sleep 5 &   # Start some command
pid=$!      # Save the pid of the command
while sleep 1; do    # Produce progress reports
    printf '\rcontinuing in %d seconds...' $(( 5 - ++i ))
    test $i -eq 5 && break
done
if wait $pid; then echo done; else echo failed; fi 
```

这是另一个例子：

```
#!/bin/bash

execute() {
    eval "$@" &  # Execute the command
    pid=$!

    # Invoke a shell to print status.  If you just invoke
    # the while loop directly, killing it will generate a
    # notification.  By trapping SIGTERM, we suppress the notice.
    sh -c 'trap exit SIGTERM
    while printf "\r%3d:%s..." $((++i)) "$*"; do sleep 1
    done' 0 "$@" &
    last_report=$!
    if wait $pid; then echo done; else echo failed; fi
    kill $last_report
}
execute sleep 3
execute sleep 2 \| false   # Execute a command that will fail
execute sleep 1 
```

# cakephp - Cakephp谷歌地图获取纬度，经度和格式化地址

> ID：14784937
> 
> 赞同：1
> 
> 时间：2013-02-09T04:25:35.103
> 
> 标签：cakephp

我有**ContactusController.php**功能：

```
<?php
App::uses('GeocodeLib', 'Tools.Lib');
class ContactusController extends AppController
{
    public function beforeFilter()
    {
parent::beforeFilter();
$this->Auth->allow('main', 'step2');

}

public $name = 'Contactus';

public $components = array('RequestHandler', 'Email', 'Session'); 

public $helpers = array('Js','Html','Form', 'Tools.GoogleMapV3'); 

public function main() {

    if ($this->request->is('post')) {

        $this->Contactus->set($this->data);

          if ($this->Contactus->validates()) {

            $settings = array('min_accuracy'=>GeocodeLib::ACC_SUBLOC);

            $this->Geocode = new GeocodeLib();

            $this->Geocode->setOptions(array('host'=>'us')); //optional - you can set it to your country's top level domain.

            if ($this->Geocode->geocode($this->data['Contactus']['address1']. " " .$this->data['Contactus']['address2'], $settings)) {

                $result = $this->Geocode->getResult();

                 /*debug($result);*/

                $options = array(

                    'lat' => $result['lat'],

                    'lng' => $result['lng'],

                    'content' => 'Testing',

                    'draggable' => TRUE,

                );

            }

                /*

                $this->Email->to = array("sales@ichiban.com.my", "clement@ichiban.com.my");

                $this->Email->subject = 'Please contact ' . $this->data['Contactus']['name'];

                $this->Email->from = "websys@ichiban.com.my"; 

                $this->Email->bcc = "yienbin@nixser.com";

                $this->Email->replyTo = $this->data['Contactus']['email'];

                //25, Jalan Ceria 5, Taman Nusa Indah, Johor

                $this->Email->send("Name: " . $this->data['Contactus']['name'] . "\n" .

                                              "Phone: " . $this->data['Contactus']['phone'] . "\n" .

                                              "Fax: " . $this->data['Contactus']['fax'] . "\n" .

                                              "Address: " . $this->data['Contactus']['address'] . "\n" .

                                              "Email: " . $this->data['Contactus']['email'] . "\n" . 

                                              "Detail: " . $this->data['Contactus']['detail'] . "\n");

                $this->Session->setFlash('Sent', 'message', array('class' => 'success1'));

                */
                $this->request->data['Customer'] = $this->request->data['Contactus'];
                $this->loadModel('Customer');
                pr($this->request->data);
                $this->Customer->save($this->request->data);

          }

        $this->set(array(

            'options' => $options

            ));

    }

    $customerStatuses = $this->Contactus->CustomerStatus->find('list');
    $enquiryTypes = $this->Contactus->EnquiryType->find('list');
    $this->set(compact('customerStatuses', 'enquiryTypes'));    
    $this->layout = 'popup';

}

public function step2() {

    $this->layout = 'popup';

}

     }

    ?> 
```

这是**main.ctp**函数

```
 <div class="row">

        <div class="span10 breakline">
            <h1 class="headtitle">Your Contact Details</h1>
            <h2>Please confirm your address and provide your name, phone number and email address</h2>

            <?php 
                echo $this->Form->create('Contactus');

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('full_name', array( 'label' => 'Full Name' )) . "\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('company_name', array( 'label' => 'Company Name' )) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('phone', array( 'label' => 'Phone Number' )) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('email', array( 'label' => 'Email Address' )) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('address1', array( 'label' => 'Address Line 1')) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('address2', array( 'label' => 'Address Line 2')) ."\n";
                echo "</div>\n";

                echo  $this->Form->input('formated_address', array( 'label' =>false,'type'=>'hidden'));
                echo  $this->Form->input('lat', array( 'label' =>false,'type'=>'hidden'));
                echo  $this->Form->input('lng', array( 'label' =>false,'type'=>'hidden'));

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('contact_by', array( 'label' => 'Contact Me By','type'=>'select','options'=>array('Email'=>'Email','Telephone'=>'Telephone'))) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('enquiry_type_id', array('type'=>'select', 'label' => 'Type Of Enquiry')) ."\n";
                echo "</div>\n";

                echo "<div class='control-group'>\n";
                echo "". $this->Form->input('customer_status_id', array('type'=>'select', 'label' => 'Customer Type')) ."\n";
                echo "</div>\n";

                //echo $this->Form->end('Next', array('class' => 'btn btn-primary'));
                echo $this->Form->end(__('Next', array('class' => 'btn btn-primary')));
            ?>

        </div>

        <div class="span10 breakline">

        </div>

    </div>

    <h2>Please drag the map to find your installation location, and place the pin on your roof</h2>

    <?php echo $this->Session->flash(); 
    echo $this->Html->script($this->GoogleMapV3->apiUrl());
    $options2 = array(
                'zoom'=>6,
                'type'=>'R',
                'autoCenter' => true,
                'div' => array('id'=>'mapCanvas'),
                'map' => array('navOptions'=>array('style'=>'SMALL'), 'typeOptions' => array('style'=>'HORIZONTAL_BAR', 'pos'=>'RIGHT_TOP'))
            );
            //debug($options2);
    ?>

    <?php
    if ($this->request->is('post')) {

            // tip: use it inside a for loop for multiple markers
            //echo $this->GoogleMapV3->map($options2);

            $js = "
                var geocoder = new google.maps.Geocoder();

                function geocodePosition(pos) {
                  geocoder.geocode({
                    latLng: pos
                  }, function(responses) {
                    if (responses && responses.length > 0) {
                      updateMarkerAddress(responses[0].formatted_address);
                    } else {
                      updateMarkerAddress('Cannot determine address at this location.');
                    }
                  });
                }

                function updateMarkerStatus(str) {
                  document.getElementById('markerStatus').innerHTML = str;
                }

                function updateMarkerPosition(latLng) {
                  document.getElementById('info').innerHTML = [
                    latLng.lat(),
                    latLng.lng()
                  ].join(', ');
                }

                function updateMarkerAddress(str) {
                  document.getElementById('address').innerHTML = str;
                }

                function initialize() {
                  var latLng = new google.maps.LatLng(" . $options['lat'] . ", " . $options['lng'] . ");
                  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
                    zoom: 17,
                    center: latLng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                  });
                  var marker = new google.maps.Marker({
                    position: latLng,
                    title: 'Point A',
                    map: map,
                    draggable: true
                  });

                  // Update current position info.
                  updateMarkerPosition(latLng);
                  geocodePosition(latLng);

                  // Add dragging event listeners.
                  google.maps.event.addListener(marker, 'dragstart', function() {
                    updateMarkerAddress('Dragging...');
                  });

                  google.maps.event.addListener(marker, 'drag', function() {
                    updateMarkerStatus('Dragging...');
                    updateMarkerPosition(marker.getPosition());
                  });

                  google.maps.event.addListener(marker, 'dragend', function() {
                    updateMarkerStatus('Drag ended');
                    geocodePosition(marker.getPosition());
                  });
                }

                // Onload handler to fire off the app.
                google.maps.event.addDomListener(window, 'load', initialize);

            ";

            //$this->GoogleMapV3->addMarker($options);

            //$this->GoogleMapV3->addCustom($js);

            // print js
            echo $this->Html->scriptBlock($js);

        }

    ?>
    <div id="mapCanvas"></div>

    <div id="infoPanel">

        <b>Marker status:</b>
        <div id="markerStatus"><i>Click and drag the marker.</i></div>

        <b>Current position:</b>
        <div id="info"></div>

        <b>Closest matching address:</b>
        <div id="address"></div>

    </div> 
```

我想得到**并插入字段**“formated_address”**、 **“lat”**和**“long”****

 **请帮助我，我无法做到这一点。

当我调试时，我得到了这个：

```
 Array
    (
[Contactus] => Array
    (
        [full_name] => yein Bin
        [company_name] => Microsoft
        [phone] => +6012345678
        [email] =>someting@gmail.com
        [address1] => 25, Jalan Ceria 5
        [address2] => Taman Nusa Indah, Johor
        [formated_address] => 
        [lat] => 
        [lng] => 
        [contact_by] => Email
        [enquiry_type_id] => 1
        [customer_status_id] => 1
    )

[Customer] => Array
    (
        [full_name] => yein Bin
        [company_name] => Microsoft
        [phone] => +6012345678
        [email] =>someting@gmail.com
        [address1] => 25, Jalan Ceria 5
        [address2] => Taman Nusa Indah, Johor
        [formated_address] => 
        [lat] => 
        [lng] => 
        [contact_by] => Email
        [enquiry_type_id] => 1
        [customer_status_id] => 1
    )

  ) 
```

有人请帮帮我**

# json - 如何在控制器中调用 web api 并返回到视图 MVC4

> ID：14784938
> 
> 赞同：6
> 
> 时间：2013-02-09T04:25:38.187
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api, client, getjson

我有一个使用 MVC4 的项目，我想问一下如何从 webapi 获取数据并返回到视图中。

**模型**

```
public class Name
{
    public Int32 NameId { get; set; }
    public String FirstName{ get; set; }
    public String LastName{ get; set; }
    public String CreatedBy { get; set; }
}

public class IListMyProject
{
    public List<Name> Names { get; set; }
} 
```

我可以`Index.cshtml`使用此代码列出所有内容

```
public ActionResult Index()
    {
        string securityToken = repo.GetTokens();
        if (securityToken != null)
        {
            HttpClient client = new HttpClient();
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

            HttpRequestMessage httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, "webapiurl/api/Name/Get?$orderby=LastName&$top=10");
            string authHeader = System.Net.HttpRequestHeader.Authorization.ToString();
            httpRequestMessage.Headers.Add(authHeader, string.Format("JWT {0}", securityToken));
            var response = client.SendAsync(httpRequestMessage)
                .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode())
                .Result;
            if (response.IsSuccessStatusCode)
            {
                model.Names = response.Content.ReadAsAsync<IList<Name>>().Result.ToList();

            }
        }
        return View("Index", model);
    } 
```

我可以返回我的观点。现在我有另一个名为 Details.cshtml 的视图，其中包含以下代码：

```
 public ActionResult Details(string id)
    {
        string securityToken = repo.GetTokens();
        if (securityToken != null)
        {
            HttpClient client = new HttpClient();
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

            HttpRequestMessage httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, "webapiurl/api/Name/GetById/"+id+"");
            string authHeader = System.Net.HttpRequestHeader.Authorization.ToString();
            httpRequestMessage.Headers.Add(authHeader, string.Format("JWT {0}", securityToken));

            var response = client.SendAsync(httpRequestMessage)
                .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode())
                .Result;
            if (response.IsSuccessStatusCode)
            {

                model.Names = response.Content.ReadAsAsync<IList<Name>>().Result.ToList();

            }
        }
        return View(model);
    } 
```

对于这个细节，我的 Json 看起来像这样：

```
 application/json, text/json
 {
  "NameId": 1,
  "FirstName": "This is First Name",
  "LastName": "This is Last Name",
  "CreatedBy": "This is Created By"
 } 
```

当我运行它时，我得到这个错误：

```
 Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.IList`1[Models.Name]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.

 To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.

 Path 'NameId', line 1, position 10. 
```

我如何解决这个问题，我是 webapi 的新手。我想知道为什么如果我列出所有（对于索引，我使用 api/get）它可以工作，但是当我想详细显示它时，它不起作用。

感谢帮助

问候

**编辑**

当我调试时

```
 model.Names = response.Content.ReadAsAsync<IList<Name>>().Result.ToList(); 
```

它说空，当我尝试得到响应时有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:32:31.047

问题是：

```
{
  "NameId": 1,
  "FirstName": "This is First Name",
  "LastName": "This is Last Name",
  "CreatedBy": "This is Created By"
} 
```

不能反序列化为 IList。您上面的 JSON 只是一个名称，而不是名称的集合。所以 Json.NET 反序列化会失败。

确保您的 Web API 控制器返回一个 IList，或更改您的 MVC 代码以将内容作为单个名称读取。JSON 中的名称集合将如下所示：

```
[{
  "NameId": 1,
  "FirstName": "This is First Name",
  "LastName": "This is Last Name",
  "CreatedBy": "This is Created By"
},
{
  "NameId": 2,
  "FirstName": "This is First Name",
  "LastName": "This is Last Name",
  "CreatedBy": "This is Created By"
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:25:33.803

问题似乎是当您将结果读取为 .json 时，您的 JSON 仅返回 1 条记录`IList<Name>`。将其更改为简单`Name`应该可以解决问题。

但是您的问题是：“**如何在控制器中调用 web api 并返回视图 MVC4** ”

我建议您查看[http://restsharp.org/](http://restsharp.org/)您可以将代码简化为：

```
public ActionResult Details(string id)
{
    string securityToken = repo.GetTokens();
    Name model;
    if (securityToken != null)
    {
        var client = new RestClient("");

        var request = new RestRequest("webapiurl/api/Name/GetById/"+id, HttpMethod.Get);
        string authHeader = System.Net.HttpRequestHeader.Authorization.ToString();
        request.AddHeader(authHeader, string.Format("JWT {0}", securityToken));

        var model = client.Execute<Name>(request);
    }
    return  View(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:53:38.970

Web API 返回一个**Name**类型的对象，而不是 Name 的**集合**。我看不到您在哪里定义**model**。我添加了**Name**类型的定义。尝试这个。

```
public ActionResult Details(string id)
{
    string securityToken = repo.GetTokens();
    Name model;
    if (securityToken != null)
    {
        HttpClient client = new HttpClient();
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        HttpRequestMessage httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, "webapiurl/api/Name/GetById/"+id+"");
        string authHeader = System.Net.HttpRequestHeader.Authorization.ToString();
        httpRequestMessage.Headers.Add(authHeader, string.Format("JWT {0}", securityToken));

        var response = client.SendAsync(httpRequestMessage)
            .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode())
            .Result;
        if (response.IsSuccessStatusCode)
        {

            model = response.Content.ReadAsAsync<Name>();

        }
    }
    return  View(model);
} 
```

# python - 搜索使用某些字母的单词的程序

> ID：14784939
> 
> 赞同：0
> 
> 时间：2013-02-09T04:25:52.027
> 
> 标签：python, string, search, loops

我正在设计一个程序，它查看单词列表，并计算有多少单词中只有字母 p、y、t、h、o 和 n。

到目前为止，我的代码是：

```
def find_python(string, python):
 """searches for the letters 'python' in the word."""
 for eachLetter in python:
    if eachLetter not in string:
        return False
 return True

def main():
 python = 'python'
 how_many = 0

 try:
 fin = open('words.txt')#open the file
 except:
     print("No, no, file no here") #if file is not found
 for eachLine in fin:
    string = eachLine
    find_python(string, python)
if find_python(string, python) == True:
    how_many = how_many + 1#increment count if word found
 print how_many#print out count
 fin.close()#close the file

if __name__ == '__main__':
main() 
```

但是，我的代码返回的单词数不正确，例如，如果我为其输入 print 语句，它将返回单词“xylophonist”，因为其中包含字母 python。我应该怎么做它会拒绝任何有禁止字母的单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:28:46.003

更正您的测试功能：

```
def find_python(string, python):
 """searches for the letters 'python' in the word.
    return True, if string contains only letters from python.
 """
 for eachLetter in string:
    if eachLetter not in python:
        return False
 return True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:53:20.967

```
from os import listdir

def diagy(letters,li):
    return sum( any(c in letters for c in word) for word in li )

def main():
    dir_search = 'the_dir_in_which\\to_find\\the_file\\'
    filename = 'words.txt'

    if filename in listdir(dir_search):
        with open(dir_search + 'words.txt',) as f:
            li = f.read().split()
        for what in ('pythona','pyth','py','ame'):
            print '%s  %d' % (what, diagy(what,li))

    else:
        print("No, no, filename %r is not in %s" % (filename,dir_search))

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T06:54:53.960

欢迎使用正则表达式：

```
import re
line = "hello python said the xylophonist in the ythoonp"
words = re.findall(r'\b[python]+\b',line)
print words 
```

返回

```
['python', 'ythoonp'] 
```

如果您想要查找实际单词 python 出现的次数，那么您应该发出`re.findall(r'\bpython\b')`

如果你不想走这条路，如果字符串的任何字母不是 p、y、t、h、o 或 n，我建议你返回 false。

# c++ - 在 C++ 中对二维数组中的浮点数进行排序

> ID：14784947
> 
> 赞同：-4
> 
> 时间：2013-02-09T04:27:01.887
> 
> 标签：c++, c, sorting

我遇到了，`std:sort`但在我的情况下它不起作用。我有一个二维浮点数组，我只需要对一列进行排序。任何 FLOATS 的排序算法都可以。不过，我正在考虑合并排序。有人吗？

```
void selectionSort(float x[], int n) {
float curr = 0, min = 0, i = 0, temp;

for (curr = 0; curr < n-1; curr++) {
    min = curr;  // assume this is smallest

    //--- Look over remaining elements to find smallest.
    for (i = curr+1; i < n; i++) {
        if (x[i] < x[min]) {
            //--- Remember index for latter swap.
            min = i;
        }
    }

    //--- Swap smallest remaining element
    temp = x[curr];
    x[curr] = x[min];
    x[min] = temp;
}} 
```

VS 2010 输出错误：下标不是整数类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:14:30.987

C/C++ 不允许真正的数据类型（`float`等`double`）作为下标运算符来声明数组的大小或访问。以下是一个错误：

```
int ArraySize[10.0]; 
```

所以以下内容：

```
ArraySize[4.0]; 
```

您必须传递一个整数类型（`int`、`long`、`char`、`bool`等`unsigned`）来指定大小并访问元素。如果变量是真实类型，您可以将其类型转换为 int （或者，更优选`size_t`）

```
float nIndex = 5.0; 
ArraySize[(size_t)nIndex]; 
```

如果你有一个类，那么你可以用你喜欢的任何类型重载下标运算符！

# python - Python比较运算符重载

> ID：14784948
> 
> 赞同：2
> 
> 时间：2013-02-09T04:27:08.667
> 
> 标签：python, datetime, comparison, operator-overloading

对于我的 Python 2.7.3 项目，我有一个名为 的类`custom_date`，它有一个名为的属性`fixed_date`：

```
from datetime import date
class custom_date():
    def __init__(self, fixed_date):
        self.fixed_date = fixed_date

    def __lt__(self, other):
        return self.fixed_date < other

    #__gt__, __ge__, __le__, __eq__, __ne__ all implemented the same way 
```

我的想法是能够直接`custom_date.fixed_date`与内置比较`date`。

**问题**

如果我将一个`custom_date`对象与一个`date`对象进行比较，那很好。但是，如果我将一个`date`对象与 a进行比较`custom_date`，它会返回 a`TypeError`

```
>>> from datetime import date
>>> x = custom_date(date(2013,2,1))
>>> y = date(2013,2,2)
>>> x > y
False
>>> y > x
TypeError: can't compare datetime.date to instance 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T05:07:27.640

我想我知道你为什么会遇到问题。检查 docs.python.org 上的[数据模型文档](http://docs.python.org/2/reference/datamodel.html?highlight=__lt__#object.__lt__)。

```
>>> y > x 
```

调用：

```
y.__gt__(x) 
```

x 只是一个实例对象，而不是存储在其中的 fixed_date 属性：

```
>>> x
<__main__.custom_date instance at 0x020D78C8>
>>> x.fixed_date
datetime.date(2012, 2, 1) 
```

使其按照您设置的方式工作的一种方法是：

```
>>> y > x.fixed_date 
```

我认为要“解决”这个问题，您应该将所有日期设为 custom_date 类型。其他人可能对你有更好的解决方案，我会关注的，因为我也很好奇。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T06:15:21.033

只需子类`date`化即可获得此功能。由于 datetime 对象是不可变的，因此您需要使用`__new__`构造函数 vs `__init__`：

```
from datetime import date
class custom_date(date):
    def __new__(cls, year,month,day):
        return date.__new__(cls, year, month,day)

x = custom_date(2013,2,1)
y = date(2013,2,2)

print x<y
print y<x 
```

印刷：

```
True
False 
```

由于比较的确定类是[LH 类](http://docs.python.org/2/reference/datamodel.html?highlight=__lt__#object.__lt__)，所以左边的类需要有正确的比较运算符来处理与右边的类的比较。如果任何一个类都没有比较运算符，则实例按标识排序——它们的内存地址。您的错误本质上是试图将苹果与橙子进行比较：身份与日期类。

请注意，曾经在 Python 2.1[中删除了一个](http://docs.python.org/2/reference/datamodel.html#object.__rcmp__)**rcmp** 来处理此类问题。[新样式类的](http://www.python.org/download/releases/2.2.3/descrintro/)引入和[丰富的比较](http://www.python.org/dev/peps/pep-0207/)也导致被弃用。`__cmp__`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T03:46:41.527

找到一个潜在的解决方案，以防其他人面临同样的问题。

来自[Python 日期时间文档](http://docs.python.org/2/library/datetime.html#date-objects)：

> > 换句话说，date1 < date2 当且仅当 date1.toordinal() < date2.toordinal()。为了阻止比较回退到比较对象地址的默认方案，如果另一个比较对象不是日期对象，日期比较通常会引发 TypeError。**但是，如果另一个比较具有 timetuple() 属性，则返回 NotImplemented。这个钩子为其他类型的日期对象提供了实现混合类型比较的机会。**如果不是，则当比较日期对象与不同类型的对象时，会引发 TypeError，除非比较为 == 或 !=。后一种情况分别返回 False 或 True。

如果`x.__op__(y)`返回`NotImplemented`而不是提高 a `TypeError`，Python 将自动尝试反向比较`y.__rop__(x)`（有关比较的更多信息[here](https://stackoverflow.com/questions/878943/why-return-notimplmented-instead-of-raising-notimplementederror)）。

`date``TypeError`然而，如果另一个对象不是`date`对象，则引发 a ，**除非另一个对象实现 timetuple() 属性**。

所以解决方案是在`timetuple()`我的类中添加一个虚拟方法。

```
from datetime import date
class custom_date():
    def __init__(self, fixed_date):
        self.fixed_date = fixed_date

    def __lt__(self, other):
        return self.fixed_date < other

    #__gt__, __ge__, __le__, __eq__, __ne__ all implemented the same way

    def timetuple():
        pass 
```

# java - 无法使用 Java 扫描程序键入

> ID：14784950
> 
> 赞同：-1
> 
> 时间：2013-02-09T04:28:10.307
> 
> 标签：java, java.util.scanner, typing

所以我昨天刚开始自学Java，在我无限的无聊中决定测试我所知道的一点点，并试图制作一个简单的基于文本的游戏。我正在使用扫描仪询问玩家他想成为哪个班级，但是当我运行代码时，我无法输入任何内容。到目前为止，这是我的代码

```
import java.util.Scanner;
public class mainscript {
public static void main(String args[]){
    System.out.println("Welcome to your first quest, young lord.");
    System.out.println("In this quest, you will face many foes.");
    System.out.println("What type of warrior are you, Sire?");
    System.out.println("[use propper caps](Warrior, Rogue, Mage, Brute)");
    Scanner c = new Scanner(System.in);
        Scanner Warrior = null;
        Scanner Rogue = null;
        Scanner Mage = null;
        if (c == Warrior){//c = class
            System.out.println("So you are a warrior.");
            System.out.println("You come equipped with the following items.");
            System.out.println("Sword(20), Shield(10), Gold(20), and 50 points of health.");
            System.out.println("Defeat enemies and do side quests to earn more money for items.");
            int Sword, Shield, Health, Money;
            Sword = 20;
            Shield = 10;
            Health = 50;
            Money = 20;
        }else if(c == Rogue){ 
            System.out.println("So you are a Rogue.");
            System.out.println("You are equipped with the following items.");
            System.out.println("Dagger(20), Gloves(50), Buckler(10), Gold(20) and 40 points of health");
            System.out.println("Defeat enemies and do side quests to earn more money for items.");
            System.out.println("Alternately, use your Gloves to steal gold from your enemies in combat.");
            int Dagger, Gloves, Buckler, Money, Health;
            Dagger = 20;
            Gloves = 50;
            Buckler = 20;
            Money = 20;
            Health = 40;
        }else if(c == Mage){
            System.out.println("So you are a Mage.");
            System.out.println("You are equipped with the following items.");
            System.out.println("");
            System.out.println("Defeat enemies and do side quests to earn more money for items.");
            int Knife, Mana, Health;
        } 

}
} 
```

我只是想知道为什么我在 Eclipse 中运行代码时无法输入任何内容。同样，我对编程非常陌生，所以如果你能相应地回答我可以理解我的错误，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:38:46.610

关于

```
Scanner c = new Scanner(System.in);
Scanner Warrior = null;
Scanner Rogue = null;
Scanner Mage = null;
if (c == Warrior){
  //.... 
```

这不是 Scanner 类的工作方式。您的代码将只需要*一个*Scanner 对象，并且需要调用此对象上的方法（例如`nextLine()`方法）来获取用户的输入。在使用新工具之前，请查看包括[扫描仪](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)教程在内的教程，因为它将帮助您快速上手。编译器和 JVM 是无情的，不允许您编写代码并祈祷它可以工作。

IE，

```
Scanner scan = new Scanner(System.in);

String userInput = scan.nextLine();
if ("Warrior".equals(userInput)) {
   // do something
} 
```

# java - 从给定路径加载类

> ID：14784951
> 
> 赞同：1
> 
> 时间：2013-02-09T04:28:16.693
> 
> 标签：java, classloader

我有这段简单的代码可以从给定路径加载一个类：

```
public static void main(String args[]) throws ClassNotFoundException
{
    String str ="/Users/path/to/myclass.class";
    Class<?> cl = ThisTest.class.getClass().getClassLoader().loadClass(str);
} 
```

谁能告诉我这里有什么问题？`ClassNotFoundException`执行时我不断收到`main`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T04:37:00.910

更改`String str ="/Users/path/to/myclass.class";`为`String str ="myclass";` 根据[http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass(java.lang.String))此字符串不应是类的路径，而是类的完整名称（如“java.lang.String”）。

# c++ - 加密初始化向量

> ID：14784962
> 
> 赞同：4
> 
> 时间：2013-02-09T04:29:50.560
> 
> 标签：c++, c, encryption, pascal, initialization-vector

使用`aes_cfb_encrypt`and`aes_cfb_decrypt`函数，我有以下问题。

1.  加密中的**unsigned char *iv** （初始化向量）是什么。
2.  是否需要保留***iv**进行解密。
3.  每次我加密一个数据块时，***iv**都会被修改，我对这个修改后的***iv**有什么影响。
4.  我正在加密一个大约 100mb 的大文件，并第一次传递一个随机***iv**，我是否必须在循环的其余部分使用相同的***iv**，或者我必须使用上次调用中更新的***iv**的加密块。

5.  最后，我正在处理一个结构化文件，所以我必须使用**Sizeof(struct)**作为缓冲区的**长度**还是必须使用**sizeof(struct)*8**作为缓冲区的**长度**来进行加密或解密。请指导..

`AES_RETURN aes_cfb_encrypt(const unsigned char *ibuf, unsigned char *obuf, int len, unsigned char *iv, aes_encrypt_ctx cx[1]);`

 ````
AES_RETURN aes_cfb_decrypt(const unsigned char *ibuf, unsigned char *obuf, int len, unsigned char *iv, aes_encrypt_ctx cx[1]); 
````  `* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T07:46:06.633

在回答您的问题时，请注意以下几点：

```
PT(x) = Plain Text representation of 'x'
CT(x) = Cipher Text representation of 'x'
Bn    = Logical Data Block 'n' in a sequence of multiple blocks. 
```

**1\. 什么是静脉注射？**

IV 是**Initialization Vector**的缩写。它用于以所谓的*链式*或*反馈*模式执行加密的对称块加密算法。在任何一种情况下，前一个加密数据块都被用作一块功能数据“goo”来更改下一个要加密的数据块。每个连续的加密数据块都被提供给先前已经加密的数据块作为它们要使用的粘性块。但是*第*一块明文呢？*它*的特殊酱汁是用什么做的？答：IV提供给函数。从图形上看，它如下所示：

```
CT(B1) = Encrypt(IV + PT(B1))
CT(B2) = Encrypt(CT(B1) + PT(B2))
CT(B3) = Encrypt(CT(B2) + PT(B3))
...
CT(Bn) = Encrypt(CT(Bn-1) + PT(Bn)) 
```

注意：上面的“+”表示将先前的密码块应用于下一个明文块。*不应*将其视为数学加法。将其视为“结合”。

IV 的大小*必须*与所使用的对称算法的块大小相同。AES-128-CFB 和 AES-256-CFB 都使用 128 位块大小（16 字节）。因此，出于您在这个问题中的目的，您的 IV 应该是 16 字节的随机 goo，并且应该使用符合 FIPS 的安全随机源算法在加密端生成。

**2\. 是否需要保留IV进行解密？**

是的，但不一定是你可能首先想到的时尚。*必须*以某种方式保留第一个 IV（由您提供） 。传统上，它会发送到您认为应该在的地方。作为第一块加密数据。这常常把人们吓坏了，他们想“但如果我用数据发送 IV，它就没有那么安全了，是吗？” 这样想吧。*无论如何，您要发送多少个“IV”？*请记住，每个数据块都使用*前*一个加密数据块作为其 IV 进行加密。因此，您实际上是在发送整个 IV 流，每个加密块是下一个加密块的 IV，等等。初始 IV 在输出密文中的位置是一个数据表示问题，但它最终的去向与这个问题。**必须**保存。作为其输出流的一部分，您的 API 可能会为您执行此操作（事实上，这并不罕见）。

**3\. 每次我加密一个数据块时 *iv 都会被修改，我对这个修改后的 *iv 有什么影响？**

我不熟悉您使用的 API，但听起来您已经获得了用于*下一次*加密的 IV ，当您考虑反馈或链接如何用于块模式加密时，这非常有意义。您不应该重复使用相同的 IV。使用最后返回的作为下一个。由于您的 API 正在就地修改 IV，因此您可能需要做的唯一一件事就是在发送之前将*初始*IV 保留在其他地方。我会将第一个密文块与您的 IV 进行比较。如果它们不相同，您可能需要发送您的 IV，*然后*是数据流中的密文链，并让接收者知道第一个块是解密的 IV。

**4\. 我正在加密一个大约 100mb 的大文件，并且第一次传递一个随机的 *iv，我是否必须在循环的其余部分使用相同的 *iv，或者我必须使用更新后的 *iv加密块的最后一次调用。**

见（3）。对每个连续块使用更新的 IV。

**5\. 最后，我正在处理一个结构化文件，所以 i Sizeof(struct) 作为缓冲区的长度还是必须使用 sizeof(struct)*8 作为缓冲区的长度进行加密或解密。？**

**以字节**（而不是位）为单位使用结构的大小。C/C++`sizeof(yourstruct)`应该为您计算这一点，但请注意，如果您将每个结构加密为一个独立的实体（而不是一个整体的整个文件），则每次加密都将携带最少数量的数据添加到帐户（ a) 用于该结构的 IV，以及 (b) 将最后一个块填充到偶数块边界，假设您使用的是 PKCS5 填充。因此，加密结构的确切大小将是：

```
IV + ((sizeof(struct) + 15)/16)*16) bytes. 
```

同样，如果您将每个结构作为单一加密独立加密和存储，那么您的 API 可能会为您解释其中的一部分。

有关对称 AES 的更多信息，请参阅[Wiki 上的 AES 条目](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。有关 CFB 分组密码模式的信息，请参阅同一站点上的[分组密码操作模式一文。](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher_feedback_.28CFB.29)

我希望这有帮助。做一些功课，最重要的是，*准确*了解你的 API 是如何工作的，很遗憾，我无法帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:43:25.903

加密系统中的初始化向量 (IV) 是一个随机值，作为加密系统初始化的一部分包含在内，以确保如果相同的数据被多次加密，它总是看起来不同。这是安全加密系统的要求，以确保查看多个不同加密消息的攻击者无法轻易确定其中任何两个消息是否相同。理想情况下，IV 应完全随机选择。

您不需要保留 IV 进行解密。通常，IV 与加密数据一起以明文形式发送。这不是安全问题 - 这是设计使然。

IV 在每次加密迭代中都会更改，因为在内部，密码系统正在迭代地将分组密码应用于数据，然后使用该密码的输出，结合一些额外的数据，作为下一次分组密码应用的新 IV . 然后根据需要重复此过程多次。我怀疑（但不确定）IV 已交还给您，以便您可以在之前中断的地方加密更多数据。 **你绝对应该仔细检查一下！**

至于是使用你的结构的大小还是八倍 - 我不能在没有看到更多代码的情况下说。但是，您可能应该提供要加密的总字节数，因此如果您要加密结构的八个副本，请传入结构的八倍`sizeof`。

希望这可以帮助！`

# php - phpseclib exec() 返回未格式化的文本？

> ID：14784963
> 
> 赞同：0
> 
> 时间：2013-02-09T04:30:23.463
> 
> 标签：php, linux, phpseclib

我正在尝试针对 HP C7000 Onboard Administrator 执行以下代码

```
include('Net/SSH2.php');

$ssh = new Net_SSH2('OA');

if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

$response = $ssh->exec('show server names');

echo $response; 
```

问题是它显示了一堆未格式化的文本，这使得尝试从中获取内容变得更加困难。没有换行符，只有空格。

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:47:58.527

我会做`echo '<pre>' . htmlspecialchars($response) . '</pre>';`

# actionscript-3 - AS3 Air app setinterval在不聚焦时不会暂停

> ID：14784967
> 
> 赞同：0
> 
> 时间：2013-02-09T04:30:56.803
> 
> 标签：actionscript-3, air

我有一个适用于 iOS 的 air 应用程序，它向用户播放连续的声音，并且有一些设置允许应用程序在播放音频时定期振动（如果他们的音量基本上降低了，请通知用户）。该应用程序能够继续在后台播放音频，但是只是一个简单的 setinterval 的计时器事件不会继续或暂停。

因此，例如，用户将开始播放，设备将振动 10 秒，10 秒后再次振动等。如果用户将应用程序置于后台（转到他们的主屏幕等），音频会继续播放，这很好，但是然后在 30 秒内他们返回到我的应用程序，设备将振动 3 次，因为它似乎存储了已经过去的间隔量。

我想我的问题是： - 我可以让应用程序在后台振动吗？- 我可以让应用在失去焦点时暂停间隔并在重新获得焦点时恢复吗？

如果以上都不可能，我将不得不在暂停时退出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:42:21.527

您可以在 Deactivate 上暂停 setInterval 并在 ACTIVATE 上恢复它，因为您必须添加两个事件侦听器。您可以相应地在该部分中为您的 setinterval 编码。

事件监听器：

```
stage.addEventListener(Event.ACTIVATE, appActivateHandler);
stage.addEventListener(Event.DEACTIVATE, appDeactivateHandler); 
```

在停用侦听器中，您必须设置：

```
stage.focus = null; 
```

试试看，这可以帮助你。

# stream - CURLOPT_READFUNCTION 未使用 CURLFORM_STREAM 指针

> ID：14784970
> 
> 赞同：2
> 
> 时间：2013-02-09T04:31:34.533
> 
> 标签：stream, libcurl, mime, multipartform-data

我正在尝试使用自定义流（多个二进制文件）发送多部分 MIME 消息。为此，我无法让我的`CURLOPT_READFUNCTION`回调使用由`CURLFORM_STREAM`.

据我所知，[文档`CURLFORM_STREAM`在](http://curl.haxx.se/libcurl/c/curl_formadd.html#CURLFORMSTREAM)`CURLOPT_READFUNCTION`开始流式传输数据时会自动调用指针。这不会发生在我身上。

这是我当前的代码示例（我一直在尝试不同的配置但没有成功）。`CURLCODECHECK`并且`CURLFORMCHECK`是在错误时引发异常的宏。`streams`是我自己的`StreamData`结构的向量。

```
 CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_HTTPPOST, 1L));
        CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_READFUNCTION, ::StreamReadFunction));

        for (auto iter = streams.begin(); iter != streams.end(); ++iter)
        {
            std::string const & name = iter->first;
            auto streamData = iter->second;

            CURLFORMCHECK(curl_formadd(&m_Post, &last,
                CURLFORM_COPYNAME, name.c_str(),
                CURLFORM_FILENAME, streamData->fileName.c_str(),
                CURLFORM_CONTENTTYPE, streamData->mimeType.c_str(),
                CURLFORM_STREAM, (void *) streamData.get(),
                CURLFORM_CONTENTSLENGTH, streamData->size,
                CURLFORM_END));
        } 
```

My`::StreamReadFunction`确实被调用，但除非我`curl_easy_setopt()`使用`CURLOPT_READDATA`set 调用，否则它会为第四个 (void * userdata) 参数传递一个空指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:25:37.563

总之，*不是*`CURLOPT_HTTPPOST`替代品。两者都必须提供并且必须首先*设置*。*`CURLOPT_POST``CURLOPT_POST`*

 **我将`curl_formadd()`调用移到函数的顶部，然后是：

```
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_POST, 1L));
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_POSTFIELDSIZE, fieldSize));
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_READFUNCTION, ::StreamReadFunction));
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_HTTPPOST, m_Post));
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_VERBOSE, 1L));
CURLCODECHECK(curl_easy_setopt(m_Curl, CURLOPT_HEADER, 1L)); 
```

然后`::StreamReadFunction`用我的流指针正确调用 my 。

请注意，`CURLOPT_POST`必须在*之前* `CURLOPT_HTTPPOST`设置流回调才能使用正确的指针（`CURLOPT_POST`稍后放置将导致传入空指针）。**

# xcode - 在结构中使用 Objective-C 对象时修复 ARC 错误

> ID：14784973
> 
> 赞同：12
> 
> 时间：2013-02-09T04:31:42.887
> 
> 标签：xcode

我的 Xcode 项目有问题。

我有这些行：

```
typedef struct
{
    NSString *escapeSequence;
    unichar uchar;
} 
```

我收到了这个错误：

> ARC 禁止在结构或联合中使用 Objective-C 对象。

我该如何解决？

我似乎无法找到这如何违反 ARC，但我很想学习。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-09T04:37:10.083

将其更改为：

```
typedef struct
{
    __unsafe_unretained NSString *escapeSequence;
    unichar uchar;
}MyStruct; 
```

但是，我建议遵循[本文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)中的 Apple 规则。

> **ARC执行新规则**
> 
> 您不能在 C 结构中使用对象指针。
> 您可以创建一个 Objective-C 类来管理数据，而不是使用结构。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-04T01:50:48.507

最安全的方法是`__unsafe_unretained`直接使用 or `CFTypeRef`，然后使用`__bridge`,`__bridge_retained`和`__bridge_transfer`。

例如

```
typedef struct Foo {
    CFTypeRef p;
} Foo;

int my_allocating_func(Foo *f)
{
    f->p = (__bridge_retained CFTypeRef)[[MyObjC alloc] init];
    ...
}

int my_destructor_func(Foo *f)
{
    MyObjC *o = (__bridge_transfer MyObjC *)f->p;
    ...
    o = nil; // Implicitly freed
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T15:00:53.580

当我们在启用 ARC 的 Objective C 中定义 C 结构时，我们得到错误“ARC forbids Objective-C objects in struct”。在这种情况下，我们需要使用关键字`__unsafe_unretained`。

例子

```
struct Books{

    NSString *title;
    NSString *author;
    NSString *subject;
    int book_id;
}; 
```

在 ARC 启用项目中使用的正确方法：

```
struct Books{

    __unsafe_unretained NSString *title;
   __unsafe_unretained NSString *author;
   __unsafe_unretained NSString *subject;
   int book_id;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T23:07:38.667

我刚刚将相同的代码从 Google Toolbox for Mac 集成到我的项目中

[GTMNSString-HTML.m](https://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMNSString%2BHTML.m)

他们关于将标志添加到每个文件的[ARC 兼容性的建议对我有用。](https://code.google.com/p/google-toolbox-for-mac/wiki/ARC_Compatibility)`-fno-objc-arc`

# linux - Bash 脚本出错

> ID：14784979
> 
> 赞同：2
> 
> 时间：2013-02-09T04:32:38.083
> 
> 标签：linux, bash

我想知道以下脚本中的错误是什么

我得到错误`: command not foundh: line 1:`，`: command not foundh: line 2:`它是连续的

我试过添加`;`，但现在工作请告诉我该怎么做？？

```
#!/bin/bash;
clear;
FILEREPO=http://192.168.1.2/cpplugin;

echo "-----------------------------------------------";
echo " Welcome to C-Panel Login Alert Installer";
echo "-----------------------------------------------";
    cd /var/cpanel/;
    mkdir perl5
    cd perl5/
    mkdir lib
    cd lib/
    wget $FILEREPO/LoginAlerthook.zip
    unzip LoginAlerthook.zip
    rm -r LoginAlerthook.zip
    cd /
    /usr/local/cpanel/bin/manage_hooks add module LoginAlert
    chmod 777 LoginAlert.pm
    echo " "
    echo " Login Alert Script Hooked With C Panel Finished"
    echo " " 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T04:51:07.080

您得到有趣的输出这一事实肯定是您的脚本在行尾有回车 (CR) 字符，这通常是使用假定行尾应该是 CR/LF 而不仅仅是 CR/LF 的 Windows 编辑器的症状标准 UNIX LF（换行）。这导致错误输出，如：

```
this_command_ends_hh<CR>: command not found 
```

并且因为 CR 将光标放回行首，它覆盖了其中的一些：

```
this_command_ends_hh<CR>
: command not found 
```

制造：

```
: command not foundh 
```

检查您的脚本`od -xcb scriptname`以检查 CR（显示为`\r`）字符，您还可以通过管道输出脚本`od -xcb`以查看*实际*输出。例如，我创建了一个文件，`hello`后跟一个回车符，这是唯一的一行：

```
0000000    6568    6c6c    0d6f    000a
          h   e   l   l   o  \r  \n
        150 145 154 154 157 015 012
0000007 
```

您可以在其中看到 CR ( `\r`)。

如果这*是*问题所在，只需删除 CR 字符，例如通过`tr -d '\r'`.

执行`cat hello.txt | tr -d '\r' | od -xcb`表明你可以摆脱它：

```
0000000    6568    6c6c    0a6f
          h   e   l   l   o  \n
        150 145 154 154 157 012
0000006 
```

在您的情况下，假设您的脚本被调用`freak.bash`，您将使用：

```
tr -d '\r' <freak.bash >newfreak.bash 
```

并且`newfreak.bash`将是一个没有冒犯性角色的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:40:44.943

可以用来了解执行此脚本以进行调试的工具是命令，

```
bash -x scriptname.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T05:23:23.617

paxdiablo 几乎可以肯定是正确的：您需要修复行尾。但是您在第一行中也有一个错误的分号。代替：

```
#!/bin/bash; 
```

你要：

```
#!/bin/bash 
```

没有尾随分号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T04:46:33.813

我现在没有 Centos 5，但也许……只是也许……bash 不在 /bin 中？在 FreeBSD 中，它位于 /usr/local/bin。在 Cygwin 中，它位于 /usr/bin。此命令的输出是什么：

```
which bash 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T06:21:06.563

paxdiablo 和 William Pursell 很好地解释了问题所在。

现在，如果您要分发它，请花时间改进您的脚本。

**未测试**示例：

```
#/bin/bash

ZIPFILE=http://192.168.1.2/cpplugin/LoginAlerthook.zip
CPANEL_LIBDIR=/var/cpanel/perl5/lib
MANAGE_HOOKS_CMD=/usr/local/cpanel/bin/manage_hooks

TMPFILE=`tempfile`

function exit_with_error(){
   echo "$*" >&2   # Write error messages to stderr!!
   exit 1
}

function at_exit(){
  [ -f "${TMPFILE}" ] && rm -v ${TMPFILE}
}

# Run at_exit function when script finishes
trap at_exit 0

echo "WELCOME TO ZOMBO.COM"

# Create lib directory if not exists, exit if not possible
if ! [ -d "${CPANEL_LIBDIR}" ]; then
     mkdir -p ${CPANEL_LIBDIR} || exit_with_error "Couldn't create required directory [${CPANEL_LIBDIR}]"
fi

wget ${ZIPFILE} -O ${TMPFILE} || exit_with_error "Couldn't download file"
unzip -d ${CPANEL_LIBDIR} ${TMPFILE} || exit_with_error "Couldn't unzip file"
chmod +x ${CPANEL_LIBDIR}/LoginAlert.pm || exit_with_error "Couldn't chmod file" 
$MANAGE_HOOKS_CMD add module LoginAlert

echo "End." 
```

这只是一个肮脏的例子。阅读手册页以进行改进。

```
man bash
man tempfile
man wget
man unzip
man chmod 
```

# jquery - 使用 jQuery 加载第一张图片后加载所有图片

> ID：14784982
> 
> 赞同：0
> 
> 时间：2013-02-09T04:33:14.150
> 
> 标签：jquery, loadimage

我一次为 jQuery carousel 加载 5 张图片，但我只想在加载 1 张图片后加载第一个和另外 4 个，我如何使用 jQuery 来做这个。

**我正在应用以下 css，因为图像适合每种分辨率。**

代码如下我还在头部使用了 jQuery.1.4.1.min.js。

```
<div align="center" id="conatier">
    <img src="/Images/home/Movie_Color_1.jpg" class="bg" style="display: block" id="img1">
    <img src="/Images/home/Movie_Color_2.jpg" class="bg" id="img2">
    <img src="/Images/home/Movie_Color_3.jpg" class="bg" id="img3">
    <img src="/Images/home/Movie_Color_4.jpg" class="bg" id="img4">
    <img src="/Images/home/Movie_Color_5.jpg" class="bg" id="img5">
</div>

<a onclick="fun_next()" style="margin:100px">Next</a> <a onclick="fun_pre()">Previous</a>

<script>
    var val = "";
    function fun_next() {
        commm();
        if (val == 4) { $("#img4").hide(); $("#img1").show(); }
        if (val == 3) { $("#img3").hide(); $("#img4").show(); }
        if (val == 2) { $("#img2").hide(); $("#img3").show(); }
        if (val == 1) { $("#img1").hide(); $("#img2").show(); }
    }

    function fun_pre() {
        commm();
        if (val == 4) { $("#img4").hide(); $("#img3").show(); }
        if (val == 3) { $("#img3").hide(); $("#img2").show(); }
        if (val == 2) { $("#img2").hide(); $("#img1").show(); }
        if (val == 1) { $("#img1").hide(); $("#img4").show(); }
    }

    function commm() {
        if ($("#img1").is(':hidden') == false) { val = 1; }
        if ($("#img2").is(':hidden') == false) { val = 2; }
        if ($("#img3").is(':hidden') == false) { val = 3; }
        if ($("#img4").is(':hidden') == false) { val = 4; } 
    }
</script> 
```

//头部样式

```
<style type="text/css">
    .bg
    {
        width: 100%;
        height: 90%;
        position: absolute;
        top: 0;
        left: 0;
        display: none;            
    }

    a
    {            
        z-index: 1000;
        position: absolute;
        color: White;
        margin:50px;
    }
</style> 
```

# c++ - Memcached 如何确保其在内存中的页面不会被其他页面换出？

> ID：14784983
> 
> 赞同：0
> 
> 时间：2013-02-09T04:33:19.783
> 
> 标签：c++, caching, web-applications, memcached, scalability

所以我试图加快我的数据库驱动的网站，我遇到了 memcached，我显然可以用它来“缓存”内存中数据库中的频繁键/值。我的问题是，如何强制数据留在内存中，因为通常如果服务器正在运行其他应用程序，则有可能memcached hashtable（或其中的一部分）会在一个页面被写回硬盘来自另一个应用程序的页面替换了 memcached 中的页面。那么在工业界，他们有单独的机器只运行 memcached 吗？或者他们是否调整了操作系统的内部结构，以使 memcached 中的页面不会被换出？

这个问题可以推广到任何其他应用程序，知道如何强制数据留在内存中是非常有益的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:11:48.107

By default memcached pages will be swapped out to the hard disk if your machine is using more physical memory than it has available. You can specify the -k parameter however to specify that the pages memcached is using be locked into physical memory with mlockall(). See this blog post for more information on how to do this.

[http://threebrothers.org/brendan/blog/using-memcached-k-prevent-paging/](http://threebrothers.org/brendan/blog/using-memcached-k-prevent-paging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:23:43.567

The OS writers have written good algorithms for paging over the years; algo that have stood the test of time. The paging algorithm tries to optimize the pages it swaps out.

'it would be very beneficial to to force the data to stay in memory' - sure about that? Would you rather have your Apache code being swapped out, rather than a page of data that was not used for an hour? If Apache swaps out, who would use that data?

It is difficult to design something that beats native OS paging algo. Can be done, but usually requires more than just locking memory for 1 program.

I would recommend setting memcache size appropriately so that the machine does not use paging.

If you run memcache solely on the system, which many people do, there is not much need to fiddle with -k switch. Or that machine can be set to swap = 0\.

# extjs4 - 用于 ipad Web 应用程序的 Extjs4：如何防止键盘在 datepicker 上弹出

> ID：14784987
> 
> 赞同：0
> 
> 时间：2013-02-09T04:33:46.523
> 
> 标签：extjs4

用于 ipad Web 应用程序的 Extjs4：如何防止键盘在 datepicker 上弹出？

```
{
 xtype: 'datefield',
 name: 'myDate',
 fieldLabel: 'Date'             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:46:31.583

尝试将其设置为不可编辑：`editable: false`

# php - 如何禁用所有文件上传到服务器？

> ID：14784993
> 
> 赞同：5
> 
> 时间：2013-02-09T04:35:18.680
> 
> 标签：php, apache, security

有没有办法通过`php.ini`或`.htaccess`禁用所有文件上传到服务器？

唯一的问题是，我希望有一个文件夹（例如管理文件夹）仍然可以访问上传。

我正在考虑何时禁用`eval`和`exec`.

这个问题源于我看到的网站感染了恶意软件，这些网站位于服务器的所有随机位置 - 我最近看到的一个例子类似于：

```
eval(gzinflate(base64_decode("HZ3fdsfHjtfvdqlkdsfabf5Y7OAQfMCRc9YKaYc5o0mHOmmJ6+ .... )); 
```

位于`stp.php`服务器上调用的文件中。我的想法是，如果网站用户不需要访问上传文件（他们不需要），那么它应该被简单地禁用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T04:39:52.040

是的。在您的 php.ini 文件集中，如此[处](https://www.php.net/manual/en/ini.core.php#ini.file-uploads)`file_uploads=Off`所述。这将禁用所有通过 HTTP 上传的文件。

# python - 添加# -*- coding: utf-8 -*- 会停止加载css和js文件吗？

> ID：14784997
> 
> 赞同：0
> 
> 时间：2013-02-09T04:36:28.053
> 
> 标签：python, django, utf-8, external

`# -*- coding: utf-8 -*-`我在我的开头放了`view.py`解决中文字符编码问题，但是添加`# -*- coding: utf-8 -*-`网页后不会加载css和js文件。删除`# -*- coding: utf-8 -*-`，页面将加载正常！

这是代码：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/login.css"> 
```

我还添加`DEFAULT_CHARSET = 'utf-8'`了设置。

怎么回事？

好吧，我尝试从设置中注释掉以下内容：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
) 
```

页面加载正常，但为了使用 Django 消息框架，我必须使用上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:38:37.667

设置 USE_I18N = True

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.contrib.messages.context_processors.messages",
) 
```