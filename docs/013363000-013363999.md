# StackOverflow 问答 13363000-13363999

# .net - 确定每个用户的网络使用情况

> ID：13363002
> 
> 赞同：0
> 
> 时间：2012-11-13T14:57:04.753
> 
> 标签：.net, vb.net

有没有办法在 vb.net 中监控每个用户的网络活动？

基本上是模仿远程桌面服务管理器的东西，任何信息都会很棒，

谢谢

# yahoo - 如何从 YQL 查询中获取所有结果？

> ID：13363008
> 
> 赞同：0
> 
> 时间：2012-11-13T14:57:31.897
> 
> 标签：yahoo, yql

如何从 YQL 查询中获取所有结果？

我已经尝试将限制设置为 0。它不输出任何结果。如果我将其设置为 50，我将得到 50。

我用它来收集来自雅虎答案的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:33:41.857

我想我已经解决了我的问题。没有意识到雅虎答案最多可以在单个结果集中返回 50 个结果。但是可以设置查询的“开始”参数，迭代到最大值 1000 以获得更多结果。

# javascript - 是否存在用于批处理的免费 JavaScript/ActionScript 解释器？

> ID：13363009
> 
> 赞同：1
> 
> 时间：2012-11-13T14:57:33.970
> 
> 标签：javascript, file-io, converter, interpreter, batch-processing

我正在寻找一种编写 JavaScript 或 ActionScript 的方法，并让它读取以执行一些批处理任务（将声音文件转换为另一种格式，以及写出处理文件的 XML 文件列表）。

我目前使用的唯一宏/批处理语言是 AutoIt v3（适用于 Windows），但它使用了我发现很难习惯的 VBScript 之类的东西。

是否有任何解释器/引擎可以执行 JavaScript“命令”，并带有一些扩展来执行文件和目录写入、读取和执行其他控制台命令/可执行文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:59:45.323

You might want to have a look at [Node JS](http://nodejs.org/).

It allows you to execute headless JavaScript outside the context of any web browser.

From a Node JS program, you have access to a bunch of APIs to handle files, network, etc...

# linux - 如何在 UNIX 上运行 maven 作业

> ID：13363010
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:57:33.677
> 
> 标签：linux, unix, maven

我创建了 J-Meter 测试并使用 maven 运行它们，在 Windows 上，我`mvn -Ppolar clean test`在 pom.xml 文件所在的文件夹中从命令提示符运行 maven 执行批处理命令。

我现在有一个问题，因为我们应该在 UNIX 上运行测试，而我不知道如何在 UNIX 上运行 maven。有人知道`mvn -Ppolar clean test`在 UNIX 上什么应该是等效的命令吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:02:10.577

这与在 Windows 中完全相同。

您是否从“http://maven.apache.org/download.html”安装了 Maven linux 软件包？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:39:50.237

Maven 是跨平台的，因为它是用 Java 编写的。因此，如果一切配置正确，您应该运行与 Windows 中完全相同的命令行。

# .net - 如何加载在 GAC 中注册的混合程序集？

> ID：13363012
> 
> 赞同：3
> 
> 时间：2012-11-13T14:57:44.207
> 
> 标签：.net, interop, .net-assembly

我在 MSDN 上发布了这个问题，但是通过与 MS 支持沟通有点浪费时间，他们每天只给你一句话，没有任何线索:(，无论如何这是我的问题，感谢任何评论。

我在互操作项目中遇到程序集加载问题

即有3个VS项目：

*   A 是一个本地 C 项目，通过静态绑定引用 B，即 A 调用 B 的函数，如果你愿意；

*   B 是一个 CLI 包装器，它反过来静态引用 C 的对象；

*   C 是一个纯 .NET 代码的 CS 项目。

B 和 C 都使用强名称进行签名，并且它们的*AssemblyInfo.cs*和*AssemblyInfo.cpp*文件使用它们的密钥文件进行更新。

B 和 C 都使用*gacutil.exe V4.0*在 GAC 中注册。A 在注册 B.dll 的文件夹中引用了 B.dll，B 在注册 C 的同一个文件夹中引用了 C。

当我从 A 运行程序时，它失败并显示消息：

> '程序无法启动，因为您的计算机中缺少 B.dll。尝试重新安装 > 程序来解决这个问题'。

我可以使它工作的唯一方法是将 B.dll 复制到 A.exe 的同一文件夹中。似乎 C.dll 是从 GAC 加载的。

混合装配在加载透视图中是否以不同的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:16:41.490

您正在使用一些技巧来加载 CLR 以执行托管代码。大概您在 CLI 代码中编写了静态函数并用`__declspec(dllexport)`. 是的，这行得通，本机代码 (A) 可以通过 C++/CLI 编译器生成的存根调用，以确保加载和初始化 CLR。

然而不能工作的是 CLR 帮助在 GAC 中找到 DLL。这是一个先有鸡还是先有蛋的问题，必须先加载 CLR，然后才能找到程序集。所以B找到C是没有问题的。但是 A 发现 B 是行不通的。查找 B 是本机 Windows 加载程序的工作，根本没有理由查看 GAC。

您需要将 B 部署在与本机程序相同的文件夹中。

# sql - xp_cmdshell queryout 正确生成 Excel 文件，但文件中间有一个空行

> ID：13363017
> 
> 赞同：0
> 
> 时间：2012-11-13T14:58:15.263
> 
> 标签：sql, excel, tsql, xp-cmdshell

我有一个在每个月底运行一次的存储过程。

它会生成一些文件。其中之一是 .csv 文件。

```
SELECT @Command = 'bcp "EXEC DB1.dbo.spCreateFile" queryout "' + @LocalFilePath + @MainFileName + '" -c -T -x'

EXEC master..xp_cmdshell @Command 
```

这将创建文件 OK。问题是在文件的中间，有一个空白行。我试图理解为什么会发生这种情况。我在想也许它与查询结果的大小有关？该查询返回超过 15k 条记录以放入 Excel 文件中。它是在试图打破它吗？

有没有人有任何线索。这里的问题是解决这个问题非常困难，因为语法方面/逻辑方面，这没关系，所以我不知道问题可能是什么。

任何帮助是极大的赞赏。

这是excel文件的截图：

![](../Images/472b7198ada3f7ce9ec9c638d5c56b53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:21:07.140

伙计们，我发现了问题所在。

它是带回空行的查询。

我需要看一下查询。不幸的是，我会讨厌看它，因为它很大，并且其中的 1 值会使该行的所有内容都归零。

# java - 将 java.awt.Image 保存到磁盘

> ID：13363021
> 
> 赞同：10
> 
> 时间：2012-11-13T14:58:28.213
> 
> 标签：java, h.264, decoder

我有一个从视频流中生成 java.awt.Image 对象的第 3 方库。（实际上，它最初是用来解码 .h264 文件，然后显示在 JFrame 中解码的图像）。

现在，我想使用该库来捕获流的多个图像并将它们保存到硬盘。那么，我必须怎么做才能将这些 java.awt.Image 保存到文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:06:39.207

参见[ImageIO](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html)

类型可以是“jpg”、“png”（Java <1.6）或“gif”（Java 1.6+）。

要保存 ToolKitImage，您可以执行以下操作。

```
BufferedImage bufferedImage= new BufferedImage(toolkitImage.getWidth(), toolkitImage.getHeight(), BufferedImage.TYPE_INT_RGB);
image.getGraphics().drawImage(toolkitImage, 0, 0, null);
ImageIO.write(bufferedImage, "jpg", new File("C:\\myImage.jpg")); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-04T16:29:33.343

```
public void savePic(Image image, String type, String dst){ 
    int width = image.getWidth(this); 
    int height = image.getHeight(this);
    BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_3BYTE_BGR);
    Graphics g = bi.getGraphics(); 
    try { 
        g.drawImage(image, 0, 0, null);
        ImageIO.write(bi, type, new File(dst)); 
    } catch (IOException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:04:42.003

请查看本教程：[编写/保存图像](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)

这是一项基本任务，ImageIO 库将帮助您轻松完成此任务。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-13T15:09:29.233

就像是;

```
Image img = /* your image */
BufferedImage bi = (BufferedImage)img;
File f = new File("./output.png");
ImageIO.write(bi, "png", f); 
```

# javascript - HTML 输入类型号 JavaScript onchange 触发两次？

> ID：13363032
> 
> 赞同：1
> 
> 时间：2012-11-13T14:59:03.233
> 
> 标签：javascript, forms, html, javascript-events

我不敢相信我已经找不到任何关于此的讨论......关于如何处理来自 HTML5 表单元素的事件的问题`<input type="number"/>`......[到目前为止，似乎存在很多浏览器不一致。](https://stackoverflow.com/questions/3940258/what-events-does-an-input-type-number-fire-when-its-value-is-changed)但是没有其他人注意到这一点吗？

`onchange`当我使用箭头键从空白变为数字时，该事件发生了两次。[自己试试。](http://jsfiddle.net/4JFaA/2/)似乎立即变为 0，然后变为 1。我使用的是 Chrome 23.0.1271.64 m。其他浏览器没试过。

它是一个错误吗？预期的？跨浏览器类似吗？一个更好的问题是，避免这种行为的最佳方法是什么？我正在进行一些即时验证工作，并且 0 无效，我友好的“你不能那样做”文本会在再次消失之前出现一闪而过。在上面链接的问题中，建议使用“oninput”事件，但对于它如何跨浏览器工作存在一些分歧。

我想最好的方法是完全忘记数字类型，因为它本身还没有完全支持。我有兴趣看看其他人是否得到了这个，以及他们如何处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:02:01.603

我复制了它。

**如果**输入开始为空白。在第一次按下向上或向下按钮时，它会将其设置为`0`，**然后**将其设置为`1`或`-1`。

这不是错误。

为您提供方便！它不必从 0 开始，它可以从 100000000000000000 开始，但它没有:-)

* * *

如果输入**不是**以空白开头，那么您没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:17:41.247

这确实是一个好点。

**但首先：避免这种情况的方法**

设置焦点处理程序 onfocus 保存值。设置模糊处理程序 onblur 比较当前值与保存的值，如果值已更改触发/调度/触发“comittedchange”事件。-> 使用 commitedchange 事件而不是 busted 更改事件 :-)

这里有一些想法。[但首先阅读更改事件](http://www.w3.org/TR/html5/common-input-element-apis.html#event-input-change)的 HTML5 规范。

**现在有些历史**

HTML4 规范有不同的定义（如果 value/checkednes 发生变化并且元素被激活或未聚焦事件发生），这是一件坏事，尤其是对于复选框和单选按钮（这就是人们使用 click 而不是这些元素（或 jQuery）的更改事件）。

**新的 HTML5 规范**

新规范结合了第一个定义并添加了一些额外的称为“显式提交操作”。实际上我并不真正理解这意味着什么，但我敢肯定，当用户在旋转按钮（类型=数字）上按下鼠标时，该用户尚未执行提交操作，他仍在与表单交互并且仍然可能会进行输入/更改。

此外，HTML5 添加了输入事件，以“更快地”通知开发人员一些非最终更改。例如，将其与 datalist 元素结合并允许动态更改，即创建自动建议。

**现实：浏览器**

如果输入类型带有微调按钮（类型编号、时间等）。Opera 和 Chrome 的行为非常相似（与微调按钮交互触发输入和更改），Safari 触发更改 onblur。在 type=range 的情况下，所有浏览器都在处理它。change 事件和 input 事件一直触发，同时拖动鼠标。很好，我们有两个不同的事件，具有不同的规范和用例，但它们在现实中做同样的事情（是的）。

**现实：开发商**

好吧，有很多教程和脚本在用例中使用 type=range 的 change 事件，它应该接受 input 事件，但是如您所知，开发人员很愚蠢，只阅读了规范的 1%。

**故事结局**

旧的定义很糟糕，使它毫无用处。新规范得到了改进，但无法理解，被误用并且实施不当......现在？我认为没有人想打破旧的糟糕的 HTML5 教程/脚本代码。

如果你想改变这一点，请[成为我的英雄](https://code.google.com/p/chromium/issues/detail?id=155747)。

# .net - 自动签入 TFS 中的所有更改

> ID：13363033
> 
> 赞同：0
> 
> 时间：2012-11-13T14:59:05.730
> 
> 标签：.net, visual-studio, tfs, visual-studio-2012

我是 TFS 的新手（过去曾使用过 Source-Safe 和 Perforce）并且正在从事一个大型项目。在过去的几天里，我在多个位置更改了几个文件。

TFS 中是否有一个选项可以选择我已更改和添加的所有文件并将它们全部签入？

我正在使用 Visual Studio 2012 和 TFS 2012。

**注意：**我没有明确检查这些文件，我刚刚开始编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:02:24.537

在 TFS 资源管理器中选择该文件夹并右键单击。您将看到“签入待处理更改..”选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:44:35.017

在团队资源管理器中，打开源代码管理选项卡，然后右键单击路由文件夹并选择 Check in Pending Changes。

这将签入根目录下所有解决方案/项目的所有文件。对您使用过的任何其他团队集合重复此过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:04:41.487

您可以通过右键单击解决方案资源管理器窗口中的解决方案名称并单击签入挂起的更改来签入整个项目或解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T18:32:53.013

在 Visual Studio 中，打开 Pending Changes 窗口以查看所有等待签入的更改。如果您使用的是单个工作区，您将看到所有解决方案中的所有挂起更改。

**对于 Visual Studio 2012 和 2010：**

从菜单中，选择**“查看 > 其他窗口 > 待更改”**。

# java - 过期密码更改失败

> ID：13363034
> 
> 赞同：4
> 
> 时间：2012-11-13T14:59:07.040
> 
> 标签：java, ibm-midrange, jtopen

我正在使用 JTOpen API 访问 AS400 系统。

我可以像这样成功更改活动的 AS400 用户密码：

```
AS400 system = new AS400("AS400SYSTEM", "AS400USER");
system.changePassword("OLDPASSWORD", "NEWPASSWORD"); 
```

另一方面，当我尝试以相同的方式更改过期的用户密码时，我会从第二行抛出以下异常：

> com.ibm.as400.access.AS400SecurityException：密码不正确。

我需要先做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:47:32.307

密码是否已过期或用户配置文件是否已禁用？

如果配置文件被禁用，则根本无法登录……由于无法登录，因此无法更改密码。

在更改密码之前尝试调用 connect(AS400.SIGNON) 方法。

如果所有其他方法都失败了，请尝试激活[跟踪](http://javadoc.midrange.com/jtopen/com/ibm/as400/access/Trace.html)以查看系统试图在幕后执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T23:46:57.413

是的，用户没有被禁用（然后启用：P），只是密码已过期。

事实证明，问题在于新密码的第一个字符是数字。AS400 控制台根本不喜欢那样...

[http://search400.techtarget.com/answer/Setting-iSeries-passwords](http://search400.techtarget.com/answer/Setting-iSeries-passwords)

谢谢！

# android - 将额外的或在 ArrayList 中的自定义 Parcelable 对象传递给 RemoteViewsService 会破坏 appwidget

> ID：13363046
> 
> 赞同：10
> 
> 时间：2012-11-13T14:59:57.633
> 
> 标签：android, android-intent, android-appwidget, remoteview, parcel

基本上我想要做的是通过一个意图将一个自定义的可打包对象传递给 RemoteViewsService，从而传递给我的 RemoteViewsFactory。出于某种原因，这根本不起作用：S 每当我尝试这样做时，小部件最终都会显示“问题加载小部件”文本。

当我尝试相同的事情时，我没有将其传递给 RemoteViewsService，而是将其传递给常规 Activity，它完全按预期工作。

我试图在网上找到我的答案，但我没有成功，因此我现在在这里发帖希望得到帮助。

我一直试图让它在我的主程序中工作一段时间。但我就是想不通。所以我试着把它归结起来，看看我是否在某个时候做错了什么。我成功地重现了问题，我重现问题的基础来自 CommonsGuy 的 LoremWidget ( [https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget](https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget) ) 和一个随机的可打包示例 ( [http ://prasanta-paul.blogspot.dk/2010/06/android-parcelable-example.htm](http://prasanta-paul.blogspot.dk/2010/06/android-parcelable-example.htm) l) 我已经修改以显示我的问题。（希望我不会遇到麻烦，在这两个链接上使用了代码）

这是上传到随机文件主机上的完整代码，以防有人想测试我在说什么： [http ://www.filedropper.com/remoteviewserviceparcelerrorexample](http://www.filedropper.com/remoteviewserviceparcelerrorexample)

所以总结一下我的问题：

为什么我不能将我的可打包对象（单独或包装在 ArrayList 中）传递给我的 RemoteViewsService？（当相同的代码适用于 Activity 时）

我真的希望有人能够帮助我。现在在我的主程序中我序列化到内部存储，然后几乎立即从 RemoteViewsService 再次反序列化它，从我读过的所有内容来看，这不是很有效！

编辑：刚刚记住，由于某种原因，在我的主程序中，如果我传递了一个自定义对象，其中 ArrayList 和 Strings 设置为 null，并且布尔值全部为 false（基本上正是对象在创建时的样子），则小部件看起来正常（即没有“问题加载小部件”消息）。

编辑：在查看了外观（未过滤到我正在运行的应用程序）之后，我现在看到了一些错误（我想我最好学会在没有任何文件的情况下查看所有未过滤的内容:)）：

```
 11-13 17:14:27.268: D/AndroidRuntime(8840): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
    11-13 17:14:27.268: D/AndroidRuntime(8840): CheckJNI is ON
    11-13 17:14:27.340: D/AndroidRuntime(8840): Calling main entry com.android.commands.pm.Pm
    11-13 17:14:27.348: W/ActivityManager(90): No content provider found for permission revoke: file:///data/local/tmp/com.commonsware.android.appwidget.lorem.LoremActivity.apk
    11-13 17:14:27.348: W/ActivityManager(90): No content provider found for permission revoke: file:///data/local/tmp/com.commonsware.android.appwidget.lorem.LoremActivity.apk
    11-13 17:14:27.356: I/PackageManager(90): Removing non-system package:com.commonsware.android.appwidget.lorem
    11-13 17:14:27.360: I/ActivityManager(90): Force stopping package com.commonsware.android.appwidget.lorem uid=10034
    11-13 17:14:27.360: I/ActivityManager(90): Killing proc 8798:com.commonsware.android.appwidget.lorem/10034: force stop
    11-13 17:14:27.400: D/dalvikvm(90): GC_CONCURRENT freed 511K, 17% free 8611K/10311K, paused 0ms+0ms
    11-13 17:14:27.400: I/PackageManager(90): Package com.commonsware.android.appwidget.lorem codePath changed from /data/app/com.commonsware.android.appwidget.lorem-2.apk to /data/app/com.commonsware.android.appwidget.lorem-1.apk; Retaining data and using new
    11-13 17:14:27.404: I/PackageManager(90): Running dexopt on: com.commonsware.android.appwidget.lorem
    11-13 17:14:27.440: D/dalvikvm(8850): DexOpt: load 12ms, verify+opt 4ms
    11-13 17:14:27.448: W/PackageManager(90): Code path for pkg : com.commonsware.android.appwidget.lorem changing from /data/app/com.commonsware.android.appwidget.lorem-2.apk to /data/app/com.commonsware.android.appwidget.lorem-1.apk
    11-13 17:14:27.448: W/PackageManager(90): Resource path for pkg : com.commonsware.android.appwidget.lorem changing from /data/app/com.commonsware.android.appwidget.lorem-2.apk to /data/app/com.commonsware.android.appwidget.lorem-1.apk
    11-13 17:14:27.452: I/ActivityManager(90): Force stopping package com.commonsware.android.appwidget.lorem uid=10034
    11-13 17:14:27.460: D/PackageManager(90): New package installed in /data/app/com.commonsware.android.appwidget.lorem-1.apk
    11-13 17:14:27.472: I/ActivityManager(90): Force stopping package com.commonsware.android.appwidget.lorem uid=10034
    11-13 17:14:27.496: D/dalvikvm(266): GC_EXPLICIT freed 127K, 9% free 6766K/7367K, paused 0ms+0ms
    11-13 17:14:27.512: D/dalvikvm(221): GC_EXPLICIT freed 878K, 57% free 15010K/34119K, paused 0ms+0ms
    11-13 17:14:27.584: D/dalvikvm(90): GC_EXPLICIT freed 385K, 18% free 8558K/10311K, paused 0ms+0ms
    11-13 17:14:27.588: D/PackageManager(90): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
    11-13 17:14:27.620: D/PackageManager(90): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
    11-13 17:14:27.620: D/BackupManagerService(90): Received broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.commonsware.android.appwidget.lorem flg=0x10000010 (has extras) }
    11-13 17:14:27.620: D/PackageManager(90): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
    11-13 17:14:27.620: D/PackageManager(90): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
    11-13 17:14:27.628: W/ResourceType(90): Failure getting entry for 0x7f060000 (t=5 e=0) in package 0 (error -75)
    11-13 17:14:27.632: D/BackupManagerService(90): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.commonsware.android.appwidget.lorem flg=0x10000010 (has extras) }
    11-13 17:14:27.636: V/BackupManagerService(90): updatePackageParticipantsLocked: #1
    11-13 17:14:27.640: W/RecognitionManagerService(90): no available voice recognition services found
    11-13 17:14:27.652: D/dalvikvm(8854): Not late-enabling CheckJNI (already on)
    11-13 17:14:27.684: I/ActivityManager(90): Start proc com.commonsware.android.appwidget.lorem for broadcast com.commonsware.android.appwidget.lorem/.WidgetProvider: pid=8854 uid=10034 gids={}
    11-13 17:14:27.688: D/BackupManagerService(90): Received broadcast Intent { act=android.intent.action.PACKAGE_REPLACED dat=package:com.commonsware.android.appwidget.lorem flg=0x10000010 (has extras) }
    11-13 17:14:27.688: V/BackupManagerService(90): updatePackageParticipantsLocked: #1
    11-13 17:14:27.740: I/dalvikvm(8854): Turning on JNI app bug workarounds for target SDK version 11...
    11-13 17:14:27.756: D/dalvikvm(90): GC_EXPLICIT freed 409K, 16% free 8687K/10311K, paused 0ms+4ms
    11-13 17:14:27.792: D/AndroidRuntime(8840): Shutting down VM
    11-13 17:14:27.796: D/dalvikvm(8840): GC_CONCURRENT freed 99K, 79% free 447K/2048K, paused 0ms+0ms
    11-13 17:14:27.796: D/dalvikvm(8840): Debugger has detached; object registry had 1 entries
    11-13 17:14:27.812: I/AndroidRuntime(8840): NOTE: attach of thread 'Binder Thread #3' failed
    11-13 17:14:27.820: D/WidgetProvider(8854): ParcelData=ParcelData [id=0, name=null, desc=null, cities=[suwon, delhi]]
    11-13 17:14:27.820: D/WidgetProvider(8854): ArrayList<ParcelData>=[ParcelData [id=0, name=null, desc=null, cities=[suwon, delhi]]]
    11-13 17:14:27.824: V/ParcelData(8854): writeToParcel...0
    11-13 17:14:27.824: V/ParcelData(8854): writeToParcel...0
    11-13 17:14:27.828: V/ParcelData(8854): writeToParcel...0
    11-13 17:14:27.828: V/ParcelData(8854): writeToParcel...0
    11-13 17:14:27.828: E/Parcel(221): Class not found when unmarshalling: com.commonsware.android.appwidget.lorem.ParcelData, e: java.lang.ClassNotFoundException: com.commonsware.android.appwidget.lorem.ParcelData
    11-13 17:14:27.832: W/AppWidgetHostView(221): updateAppWidget couldn't find any view, using error view
    11-13 17:14:27.832: W/AppWidgetHostView(221): android.os.BadParcelableException: ClassNotFoundException when unmarshalling: com.commonsware.android.appwidget.lorem.ParcelData
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readParcelable(Parcel.java:1966)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readValue(Parcel.java:1854)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readListInternal(Parcel.java:2103)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readArrayList(Parcel.java:1544)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readValue(Parcel.java:1875)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Parcel.readMapInternal(Parcel.java:2094)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Bundle.unparcel(Bundle.java:223)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Bundle.putInt(Bundle.java:436)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.content.Intent.putExtra(Intent.java:4695)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.widget.RemoteViews$SetRemoteViewsAdapterIntent.apply(RemoteViews.java:401)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.widget.RemoteViews.performApply(RemoteViews.java:1606)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.widget.RemoteViews.apply(RemoteViews.java:1583)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.appwidget.AppWidgetHostView.updateAppWidget(AppWidgetHostView.java:289)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.appwidget.AppWidgetHost.updateAppWidgetView(AppWidgetHost.java:283)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.appwidget.AppWidgetHost$UpdateHandler.handleMessage(AppWidgetHost.java:84)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Handler.dispatchMessage(Handler.java:99)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.os.Looper.loop(Looper.java:137)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at android.app.ActivityThread.main(ActivityThread.java:4424)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at java.lang.reflect.Method.invokeNative(Native Method)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at java.lang.reflect.Method.invoke(Method.java:511)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    11-13 17:14:27.832: W/AppWidgetHostView(221):   at dalvik.system.NativeStart.main(Native Method)
    11-13 17:14:28.116: D/AndroidRuntime(8872): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
    11-13 17:14:28.116: D/AndroidRuntime(8872): CheckJNI is ON
    11-13 17:14:28.200: D/AndroidRuntime(8872): Calling main entry com.android.commands.am.Am
    11-13 17:14:28.204: I/ActivityManager(90): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.commonsware.android.appwidget.lorem/.LoremActivity} from pid 8872
    11-13 17:14:28.208: W/WindowManager(90): Failure taking screenshot for (192x135) to layer 21020
    11-13 17:14:28.220: W/NetworkManagementSocketTagger(90): setKernelCountSet(10034, 1) failed with errno -2
    11-13 17:14:28.240: D/AndroidRuntime(8872): Shutting down VM
    11-13 17:14:28.244: D/dalvikvm(8872): GC_CONCURRENT freed 100K, 77% free 475K/2048K, paused 4ms+0ms
    11-13 17:14:28.244: D/dalvikvm(8872): Debugger has detached; object registry had 1 entries
    11-13 17:14:28.244: I/AndroidRuntime(8872): NOTE: attach of thread 'Binder Thread #1' failed
    11-13 17:14:28.252: W/InputManagerService(90): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@b38c3ef0
    11-13 17:14:28.504: W/NetworkManagementSocketTagger(90): setKernelCountSet(10034, 0) failed with errno -2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:55:43.043

我最终做了 TreKing 在这里谈论的事情： [https ://groups.google.com/d/msg/android-developers/KX0BUAbOTKY/jqW_ZokCH3gJ](https://groups.google.com/d/msg/android-developers/KX0BUAbOTKY/jqW_ZokCH3gJ)

> 我所做的是创建一个“Bundleable”接口，它基本上完成了 Parcelable 的意图。扩展此接口的对象可以放置自己并从 Bundle 对象重新创建自己，该对象本身是 Parcelable，因此您可以像您的对象一样发送它 - 除了系统总是知道如何加载 Bundle 类型因此您不知道的小事实不会遇到这个错误。

并按照他的代码示例：

```
public interface Bundleable
{
 public Bundle toBundle();

 public void fromBundle(Bundle b);
}

public class MyClass implements Bundleable
{
 public Bundle toBundle()
 { 
  Bundle b = new Bundle();
  // Fill b with data
  return b;
 }

 public void from Bundle(Bundle b)
 {
  // set properties from data in b
 }
}

// ...

MyClass m = new MyClass();
Intent i = new Intent();
i.putBundleExtra("MyClass", m.toBundle());

// ... Elsewhere

Bundle b = intent.getBundleExtra("MyClass");
MyClass m = new MyClass(b); // Constructor calls fromBundle(b); 
```

就像我从一开始就期望整个包裹交易一样工作！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-24T12:21:57.377

我对 Serializable 对象 ArrayList 也有同样的问题。当我尝试像这样在 AppWidgetManager 中传递列表时

```
Intent listIntent = new Intent(context, WidgetService.class);
listIntent.putExtra("list", myList); 
```

它只是没有用。但是将相同的数据放在一个包中，然后将其放入意图中作为额外的工作。

```
Intent listIntent = new Intent(context, WidgetService.class);
Bundle extrasBundle = new Bundle();
extrasBundle.putSerializable("list", myList);
listIntent.putExtra("bundle", extrasBundle); 
```

我在这里找到了一篇关于堆栈溢出的帖子，其中用户解释了将额外内容直接放入或捆绑在一起的 [区别：在 Android 中使用 Bundle 而不是直接 Intent putExtra() 的优势](https://stackoverflow.com/questions/15243798/advantages-of-using-bundle-instead-of-direct-intent-putextra-in-android) 看起来它有效，因为只有在你将额外内容放入时一个捆绑包，可以通过多个意图传递它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:16:16.870

如果您无法使用`Parcelable`. 而是通过`ParcelData`as a `String`。只需将您的`writeToParcel()`and`ParcelData(Parcel source)`方法转换为这样的东西（穷人的“序列化”）：

```
public String serializeToString() {
    StringBuilder sb = new StringBuilder();
    sb.append(Integer.toString(id)).append('|').append(name).append('|').append(desc)
        .append('|');
    for (String c : cities) {
        sb.append(c).append(';');
    }
    sb.append('|');
    return sb.toString();
}

ParcelData(String source) {
    String[] parts = source.split("|");
    id = Integer.parseInt(parts[0]);
    name = parts[1];
    desc = parts[2];
    cc = parts[3].split(";");
    if (cc.length == 0) {
        cities = new String[0]; // No cities
    } else {
        cities = new String[cc.length - 1]; // Last element is empty
        for (int i = 0; i < cc.length - 1; i++) {
            cities[i] = cc[i];
        }
    }
} 
```

我没有通过编译器运行它，所以它可能有愚蠢的语法错误。你应该明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-03T00:23:19.593

我知道为时已晚，我的意思是为时已晚，但今天我遇到了同样的问题，并找到了一个最少代码行的解决方案。决定与解决方案分享。`Gson`因此，基本上您可以使用Google的 API 将任何对象（甚至是对象列表）转换为字符串。看看这个：

```
ComplextObject object=new ComplexObject();
Type type = new TypeToken<ComplextObject>() {}.getType();
intent.putExtra("key",convertToJsonString(object,type)); //that's it 
```

或者在“另一边”阅读这个对象：

```
String jsonString=intent.getStringExtra("key");
Type type = new TypeToken<ComplexObject>() {}.getType();
ComplexObject object=convertFromJsonString(jsonString,type); 
```

这里是`convertToJsonString`和`convertFromJsonString`方法：

```
public static <T> T convertFromJsonString(String jsonString, Type type){
    if(jsonString==null) return null;
    Gson gson=new Gson();
    return gson.fromJson(jsonString,type);
}

public static String convertToJsonString(Object object, Type type){
    if(object==null) return null;
    Gson gson=new Gson();
    return gson.toJson(object,type);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-25T17:24:32.767

这是使用 Kotlin 和 Bundle 的示例代码：

在你**updateAppWidget()**

```
val intent = Intent(context, ItemsCollectionRemoteViewsService::class.java)
            .apply {
                val extrasBundle = Bundle()
                extrasBundle.putSerializable(WIDGET_DATA, myCustomData)
                putExtra(WIDGET_BUNDLE, extrasBundle)
            }
        remoteViews.setRemoteAdapter(R.id.items_list_view, intent) 
```

然后在**RemoteViewsService.RemoteViewsFactory**

```
override fun onCreate() {
    val bundleData = data?.getBundleExtra(WIDGET_BUNDLE)
    bundleData?.let {
        val myCustomData = bundleData.getSerializable(WIDGET_DATA) as MyCustomData?
        myCustomData?.let {
            list = myCustomData.myList
        }
    }
} 
```

# jquery - Next image onclick gallery

> ID：13363047
> 
> 赞同：1
> 
> 时间：2012-11-13T15:00:01.173
> 
> 标签：jquery, image, next

I have this gallery and I'd like to add an onclick event to go to the next image. I don't need next/prev buttons just let the user see next image and keep the gallery in loop. Hope someone can give me a tip. Thanks.

```
var galleryId = 'gallery'; /* change this to the ID of the gallery list */
var gallery; /* this will be the object reference to the list later on */
var galleryImages; /* array that will hold all child elements of the list */
var currentImage; /* keeps track of which image should currently be showing */
var previousImage;
var preInitTimer;
preInit();

/* functions */

function preInit() {
    /* manages to initially hide the image gallery list
       before even onload is triggered (at which point it's normally too late, and the whole list already
       appeared to the user before being remolded) */
    if ((document.getElementById)&&(gallery=document.getElementById(galleryId))) {
        gallery.style.visibility = "hidden";
        if (typeof preInitTimer != 'undefined') clearTimeout(preInitTimer); /* small Opera fix */
    } else {
        preInitTimer = setTimeout("preInit()",2);
    }
}

function fader(imageNumber,opacity) {
    /* helper function to deal specifically with images and the cross-browser differences in opacity handling */
    var obj=galleryImages[imageNumber];
    if (obj.style) {
        if (obj.style.MozOpacity!=null) {  
            /* Mozilla's pre-CSS3 proprietary rule */
            obj.style.MozOpacity = (opacity/100) - .001;
        } else if (obj.style.opacity!=null) {
            /* CSS3 compatible */
            obj.style.opacity = (opacity/100) - .001;
        } else if (obj.style.filter!=null) {
            /* IE's proprietary filter */
            obj.style.filter = "alpha(opacity="+opacity+")";
        }
    }
}

function fadeInit() {
    if (document.getElementById) {
        preInit(); /* shouldn't be necessary, but IE can sometimes get ahead of itself and trigger fadeInit first */
        galleryImages = new Array;
        var node = gallery.firstChild;
        /* instead of using childNodes (which also gets empty nodes and messes up the script later)
        we do it the old-fashioned way and loop through the first child and its siblings */
        while (node) {
            if (node.nodeType==1) {
                galleryImages.push(node);
            }
            node = node.nextSibling;
        }
        for(i=0;i<galleryImages.length;i++) {
            /* loop through all these child nodes and set up their styles */
            galleryImages[i].style.position='absolute';
            galleryImages[i].style.top=0;
            galleryImages[i].style.zIndex=0;
            /* set their opacity to transparent */
            fader(i,0);
        }
        /* make the list visible again */
        gallery.style.visibility = 'visible';
        /* initialise a few parameters to get the cycle going */
        currentImage=0;
        previousImage=galleryImages.length-1;
        opacity=100;
        fader(currentImage,100);
        /* start the whole crossfade process after a second's pause */
        window.setTimeout("crossfade(100)", 2000);
    }
}

function crossfade(opacity) {
        if (opacity < 120) {
            /* current image not faded up fully yet...so increase its opacity */
            fader(currentImage,opacity);
            /* fader(previousImage,100-opacity); */
            opacity += 10;
            window.setTimeout("crossfade("+opacity+")", 30);
        } else {
            /* make the previous image - which is now covered by the current one fully - transparent */
            fader(previousImage,0);
            /* current image is now previous image, as we advance in the list of images */
            previousImage=currentImage;
            currentImage+=1;
            if (currentImage>=galleryImages.length) {
                /* start over from first image if we cycled through all images in the list */
                currentImage=0;
            }
            /* make sure the current image is on top of the previous one */
            galleryImages[previousImage].style.zIndex = 0;
            galleryImages[currentImage].style.zIndex = 100;
            /* and start the crossfade after a second's pause */
            opacity=0;
            window.setTimeout("crossfade("+opacity+")", 5000);
        }

}

/* initialise fader by hiding image object first */
addEvent(window,'load',fadeInit)

/* 3rd party helper functions */

/* addEvent handler for IE and other browsers */
function addEvent(elm, evType, fn, useCapture) 
// addEvent and removeEvent
// cross-browser event handling for IE5+,  NS6 and Mozilla

{
 if (elm.addEventListener){
   elm.addEventListener(evType, fn, useCapture);
   return true;
 } else if (elm.attachEvent){
   var r = elm.attachEvent("on"+evType, fn);
   return r;
 }
} 
```

# redis - 如何将一个redis实例迁移到n个实例？

> ID：13363049
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:04.167
> 
> 标签：redis, cluster-computing, migrate

我已经有一个 redis 节点，现在内存成本很高，我想将它迁移到更多实例。如果我在每个实例中都加载 rdb，那肯定会浪费很多。我可以使用“密钥”来获取所有密钥，然后通过对密钥执行一致的哈希来对数据进行分片，但这很丑……有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:06:42.360

如果你在配置 AOF 的情况下运行 redis，你可以简单地编写一个读取 AOF 的脚本。这就是我们所做的。在 RDB 配置中使用 redis，我认为您无法做到这一点。

如果您正在运行 redis 2.6，则可以使用 migrate 命令：

[http://redis.io/commands/migrate](http://redis.io/commands/migrate)

您仍然需要使用`KEYS`.

我认为没有更好的解决方案可以遍历所有键，`KEYS`然后始终对它们进行哈希处理。

如果您不怕直接与 redis 通信，您可以`KEYS *`在阅读时处理批量回复，以加快速度并节省内存。

# python - Python win32file 删除文件数据

> ID：13363050
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:05.947
> 
> 标签：python, file, user-accounts

我有一个数据文件，用于存储有关用户的详细信息。我需要能够在文件中查找用户并从文件中`win32file`删除数据。

我对每个用户帐户都有以下结构大小

```
account = struct.pack("=250s250s", username, password) 
```

我知道如何使用`WriteFile()`and更新个人帐户`SetFilePointer()`，但我不知道如何删除帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:26:03.420

似乎您为每个条目使用了 500 字节的固定大小，这意味着删除条目意味着从文件中间删除。为此，可以重写整个文件，或者将每个条目移到您需要删除 500 个字节并截断文件的条目之后。

此外，python 内置的 io api 应该更有能力做到这一点，没有真正的理由求助于 win32file api。

# c# - 在 Try/Catch 中包含 ExecuteReader 使其成功？

> ID：13363051
> 
> 赞同：2
> 
> 时间：2012-11-13T15:00:11.623
> 
> 标签：c#, windows, service, sqlcommand

我的项目用 c# 编写了一个小型 Windows 服务来在我们的服务器上启动几个进程。我们的新服务依赖于 MSSQLSERVER 服务，并且在从用户会话中操作时可靠地启动/运行/停止。

不过，在启动时，我们性能有限的硬件非常繁忙，看起来虽然 MSSQLSERVER 已向服务控制管理器报告“已启动”，但它还没有完全准备好为查询提供服务。因此，尽管当我们打开 SQLConnection 成功时，第一次尝试查询“有时”（大约 50/50）失败。

我（诚然直率）解决此问题的方法是采用我认为失败的 ExecuteReader 方法：

```
rdr = cmd.ExecuteReader(); 
```

并将其放入延迟为 1 秒的 Try/Catch 中，并让它重试最多 10 次：

```
 bool bReady = false;
        int iErrCount = 0;
        while (bReady == false && iErrCount < 10)
        {
            try
            {
                System.Threading.Thread.Sleep(1000); 
                rdr = cmd.ExecuteReader();
                bReady = true;
                EventLog.WriteEntry("Starting...",EventLogEntryType.Information);
            }
            catch
            {
                bReady = false;
                iErrCount += 1;
                EventLog.WriteEntry("Failed once...",EventLogEntryType.Warning);
            }
        }

        if (bReady == false)
        {
            EventLog.WriteEntry("Failed ten times.  Service will now exit.",EventLogEntryType.Error);
            return; 
        } 
```

我的困惑是，尽管这种方法运行良好并且每次都允许服务启动，但如果我检查事件日志，它实际上总是在第一次尝试时成功！我现在试图捕捉的异常永远不会发生。就好像将方法调用放在 Try/Catch 本身中的某些事情影响了它成功的可能性。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:10:18.230

确定您没有添加以前不存在的 Thread.Sleep 吗？

```
System.Threading.Thread.Sleep(1000); 
rdr = cmd.ExecuteReader(); 
```

如果以前不存在，那么现在您在尝试打开连接之前要睡一秒钟。也许这就是你所需要的。

# jquery - 链接 jQuery index() 函数

> ID：13363054
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:16.757
> 
> 标签：jquery, chaining

我有以下代码：

```
var td = textbox.closest('tr').children('td:first'); 
```

我想获取表中最近的 tr 的索引并将其设置为变量，因此我需要将 index() 函数放在最接近的 ('tr') 和 children('td:first'); 之间。像这样的东西：

```
var td = textbox.closest('tr').index(/*PUT A FUNCTION HERE */).children('td:first'); 
```

我知道我可以像这样完成这个：

```
var index = textbox.closest('tr').index(); 
```

但我想知道是否可以使用链接方法来实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:02:46.737

该[`index`](http://api.jquery.com/index/)函数返回一个数字，而不是一个 jQuery 对象。你不能把它锁起来。

# javascript - 使用地点的地址查找坐标

> ID：13363058
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:25.257
> 
> 标签：javascript, google-maps

我有一个地址列表（街道、城市、国家、邮编），我想在谷歌地图中找到经纬度来标记它们。那可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:08:57.877

我认为[地理编码](https://developers.google.com/maps/documentation/geocoding/)是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:16:15.943

是的，谢谢
，这就是我要找的

```
function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
}); 
```

}

# node.js - 处理 Express 中间件中的参数

> ID：13363059
> 
> 赞同：1
> 
> 时间：2012-11-13T15:00:29.313
> 
> 标签：node.js, express

我试图弄清楚如何构建我的 Express 代码，并且对如何处理参数感到困惑。举例来说，假设我编写了一些从数据库中加载某些内容的中间件：

```
var loadMW = function (request, response, next) {
    var thingID = request.params.id;
    // load thing from db and put in locals
    response.locals.thing = loadThing(id); //sync for simplicity
    next();
} 
```

当用于以下路线时，这一切都很好：

```
app.get('/getThing/:id', loadMW, ...) 
```

不过，让我们想象一下，我还希望在请求正文中有接受事物 ID 的路由（我知道在这种情况下这似乎是做作的，但它确实出现了）。

```
app.post('/getThing', loadMW, ...) 
```

那是行不通的，因为 loadMW 期望查看 request.params。在这种情况下，构建代码的最佳方法是什么？我可以想到几个替代方案。首先是定义一个新的中间件：

```
var loadMWBody = function (request, response, next) {
     var id = request.body.id;
     ...
} 
```

这似乎不必要地冗长而且有点难看。

另一种方法是修改 loadMW 以始终向本地人查找 ID，然后显式移动路由中的参数。

```
var loadMW = function (request, response, next) {
    var thingID = response.locals.id;
    // load thing from db and put in locals
    response.locals.thing = loadThing(id); //sync for simplicity
    next();
}

app.get('/getThing/:id', function (request, response, next) {
           response.locals.id = request.params.id;
           next();
         },
   loadMW,
   ...)

app.post('/getThing', function (request, response, next) {
           response.locals.id = request.body.id;
           next();
         },
   loadMW,
   ...) 
```

这似乎没问题，虽然有点冗长，而且似乎有点机械。

我觉得我可能会遗漏一些东西，并且有一种更优雅的方法可以做到这一点。我考虑过使用某种指示如何获取参数的函数来参数化中间件，但这并不是很简单（因为请求不在定义点的范围内）。

有人对这个问题有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-21T05:03:35.020

还有另一种处理方式。

```
var loadMW = function (request, response, next) {
    var thingID = request.param('id');

    // load thing from db and put in locals
    response.locals.thing = loadThing(id); //sync for simplicity
    next();
} 
```

的文档[`request.param()`](http://expressjs.com/api.html#req.param)说它按以下顺序查找参数：

1.  `req.params`express.bodyParse()
2.  `req.body`
3.  `req.query`

我相信该`req.body`部分取决于`express.bodyParser()`在某些时候使用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:20:00.180

像followig这样的东西不会奏效吗？

```
var loadMW = function (request, response, next) {
    var thingID;
    if(request.param.id) {
        thingID = request.param.id;
    }
    else {
        thingID = request.body.id;
    }
    // load thing from db and put in locals
    response.locals.thing = loadThing(thingID); //sync for simplicity
    next();
} 
```

您还可以查看 express 中的可选参数，以减少冗长，给定以下路线`'/user/:id?'`，`id`参数是可选的。

并查看[http://expressjs.com/api.html#app.use](http://expressjs.com/api.html#app.use)以获取中间件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:17:01.147

如果它是我的项目，这就是我将如何去做的问题：

路由处理程序封装了参数如何来自客户端的知识，并且`loadMW`只知道如何获取它（并提供它——在这个例子中）。

```
app.get('/getThing/:id', function(req, res) { loadMW(req.params, res); });
app.post('/getThing', function(req, res) { loadMW(req.body, res); });

function loadMW(opts, response) {
  var thingId = opts.id;
  ...
} 
```

`loadMW`随着项目的发展，通过传入一个`callback`函数作为第二个参数来进一步抽象可能是有意义的——而不是`response`.

# asp.net - LinkBut ton CommandName 和 CommandArgument

> ID：13363061
> 
> 赞同：18
> 
> 时间：2012-11-13T15:00:35.307
> 
> 标签：asp.net, linkbutton

我无法理解`CommandName`和`CommandArgument`关联 ASP.NET LinkBut​​ton。我已阅读这篇文章 - [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx)以及该站点上的其他问题。

我想我的问题是——“命令”到底是什么？基本上可以`CommandName`是任何文本吗？我将“排序”和“提交”作为示例。至于`CommandArgument`，这只是用来进一步指定“命令”的类型。正确的？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-13T15:02:54.363

A`Command`可以是任何你想要的。

基本思想是，如果您说有一个中继器，并且在该中继器中有多个选项，您可以为每个选项赋予不同的`CommandName`. 然后`CommandArgument`将基于线路的唯一标识符。

然后在回发时，您可以检查哪个`CommandName`被触发并基于该值使用`CommandArgument`

例如，标记可能看起来像......

```
<asp:Repeater runat="server" id="myRepeater">
  <ItemTemplate>
    <div>
      <asp:LinkButton runat="server" id="lnkEdit" CommandName="edit" 
        CommandArgument="<%#Container.DataItem.Id%>" Text="Edit" 
        OnClick="OnClickHandler" />
      <asp:LinkButton runat="server" id="lnkDelete" CommandName="delete" 
        CommandArgument="<%#Container.DataItem.Id%>" Text="Delete"
        OnClick="OnClickHandler" />
    </div>
  </ItemTemplate>
</asp:Repeater> 
```

然后你的打包后处理程序可以检查哪个被点击了......

```
Protected Sub OnClickHandler(ByVal sender As Object, ByVal e As EventArgs)
  Dim lnk as LinkButton = CType(sender,LinkButton)
  Select Case lnk.CommandName
    Case "edit"
      EditItem(lnk.CommandArgument)
    Case "delete"
      DeleteItem(lnk.CommandArgument)
  End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T15:59:22.520

`CommandName`可以是任何字符串是的。**但要小心！ASP.NET 将以特殊方式处理某些字符串。**例如，如果您在具有“删除”的`GridView`列中有一个 Button 控件，`CommandName`它将引发`OnDeleting`事件，并且`CommandArgument`将被设置`GridViewRow`为该按钮所在的行索引。否则，正如其他人发布的那样，您可以使用`CommandName`and`CommandArgument`但最适合您的情况。

通常，您将`CommandArgument`在绑定期间将 设置为控件父容器的行索引，并将 设置`CommandName`为对您的应用程序域有意义的内容，例如“UpdateFoo”。然后，您在 OnRowCommand 事件处理程序中使用它来确定单击了哪个按钮，从而确定要执行什么业务逻辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:09:47.733

`CommandName`是触发事件时您实际执行的操作，`CommandArgument`并且当然是与流程相关的参数。如果您在转发器或类似列表项中使用链接按钮，则更有意义。在这种情况下，您`CommandName`可以是“删除”、“编辑”、“发布”，对于此过程，您需要知道您正在处理的记录和“CommandArgument”是您的人在这种情况下，您可以为其分配 ID 或逗号分隔要处理的数据。

当然，您也可以使用它来合并相似的事件“排序”是一个很好的例子，因为您可以将“CommandArgument”作为“价格升序”、“日期升序”、“日期降序”所有链接按钮触发事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:10:26.873

正如 freefaller 所说，`CommandName`和`CommandArgument`都只是字符串值。

很多折叠的原因是单击事件只会触发按钮的单击，并且您会专门处理该按钮。

使用命令按钮的一个很好的例子是想象你有几行数据，每一行都有查看、编辑或删除的能力。

`Command`您可以使用各个部分并让每一行都有`CommandArgument`记录 ID，而不是单独编写代码，而`CommandArgument`是您希望执行的操作；`ViewRec,`EditRec `and`DelRec` 例如：

```
protect void cmd_Command(object sender, CommandEventArgs e)
{
    // Example, Redirect to page with action
    response.redirect(string.format("~/record.aspx?id={0}&action={1}", e.commandArgument, e.CommandName);
} 
```

使用这个例子作为一个概念，表明你只有一段代码来处理多个选项，因此只有一个地方需要维护等等......

# unity3d - Unity 自定义编辑器，例如“层碰撞矩阵”

> ID：13363062
> 
> 赞同：11
> 
> 时间：2012-11-13T15:00:37.053
> 
> 标签：unity3d, inspector

我试图在编辑器中显示一个二维数组，如 Unity 中显示的“层碰撞矩阵”： ![在此处输入图像描述](../Images/b7127c1e025d76d236766f20eea4537b.png)

虽然我需要整数和一个完整的网格（不是三角形）而不是复选框。但我似乎无法弄清楚如何做到这一点......我可以获得一个自定义编辑器，尽管使网格失败。那么，有什么方法可以让我看到物理管理器编辑器的代码（层碰撞矩阵在里面），或者有人知道这样做的好方法吗？

注意：首选语言是 c#，尽管任何语言都可以。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T22:44:52.687

您要查找的内容所涉及的代码非常复杂，因此我将依靠您知道我在说什么。[Unity 文档是您的朋友。](http://docs.unity3d.com/Documentation/ScriptReference/)

1.  创建`GUIArea`您的特殊编辑器工具所在的位置。在其中放置一个函数调用，然后调用其他渲染函数。我怀疑你会想在这里做一些封装。将 gui 封装在另一个函数中将允许您复制其功能（在抽象的限制内）并更轻松地在屏幕上移动内容。

2.  设计三个锚点 ( `Vector2`)。它们应该分别代表行标签、列标签和数据字段的左上角坐标。请注意，列锚需要在行锚的正上方（与行锚相同的 x 值），因为旋转（下一步）将改变锚。

3.  用于`GUIUtility.RotateAroundPivot()`将 GUI 变换矩阵围绕列锚点旋转 90°。

4.  为您的标签写一个长的`GUI.Label`（或几个）。将它们锚定在柱锚上。根据上图，您的标签字符串可能会显示为“Default\nTransparentFX\nIgnoreRaycast\nWater”之类的内容，其中 \n 会创建一个换行符。

5.  再次旋转，-90° 回到原始矩阵。或者，您可以在第 3 步之前复制`GUI.matrix`，然后将其分配回去以保证矩阵重置。由于浮点数和其他不精确性，来回旋转可能会产生一些误差。

6.  为行写标签。与后退两步的方法相同。将它们锚定在行锚上。

7.  这是较难的部分。遍历您的数据字段，为数据中的每个元素创建一个小元素，甚至 `EditorGUI.IntField()`创建一个小元素。每个元素都需要自己的锚点，然后将其与数据字段锚点相加。如果您的数据字段是一个方形 2D 数组，则派生锚点将很容易——尽管您的数组中也会有空元素（如果您想要上面描述的确切功能）。如果要节省内存，则必须使用一些棘手的数学将元素索引转换为坐标。我不确定我会怎么做。`StringField()``ObjectField()`

希望我没有忘记任何事情。Unity 的 GUI 是一个 b----。评论，我会尽力帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-03T14:21:09.887

因为我刚从 Google 来到这里......这里有 Unity 编辑器的源代码：[https ://github.com/Unity-Technologies/UnityCsReference/blob/master/Editor/Mono/Inspector/PhysicsManagerInspector.cs](https://github.com/Unity-Technologies/UnityCsReference/blob/master/Editor/Mono/Inspector/PhysicsManagerInspector.cs)

令人惊讶的是，它使用`GUILayout.BeginScrollView`的是计算高度，因此它与`EditorGUILayout`样式兼容并`GUI.matrix`用于文本旋转。我不会去思考整个代码（第 40 到 95 行），但我建议检查一下。

# android - 将 JSONObject 传递给 AsyncTask，然后使用 HttpPost 发送到 PHP 服务器

> ID：13363064
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:45.290
> 
> 标签：android, android-asynctask, json

经过大量研究后，我无法通过传入然后检索服务器端来找到使用`AsyncTask`to `HttpPost`a的人。我正在填充一个通过多个。`JSONObject``JSONObject``JSONObject``HashMaps`

当我传递`JSONObject`给`AsyncTask`我时，我得到了一个看起来像`JSONObject`参考的东西，我不确定如何正确解析 PHP 服务器端。

* * *

`JSONObject`构建器方法和`AsyncTask`调用者：

```
HashMap<Integer, HashMap<String, String>> finalHash;
HashMap<String, String> semiFinalHash;
private void completeSurvey() throws JSONException {

    finalHash = new HashMap<Integer, HashMap<String, String>>();
    semiFinalHash = new HashMap<String, String>();

    JSONArray jArray = new JSONArray();
    JSONObject joMap = new JSONObject();
    for (int indexInt = 0; indexInt <= lightingMap.size(); indexInt++) {
        if (lightingMap.containsKey(indexInt) && !placeholderHashMap.containsKey(indexInt)) {
            int checkId = indexInt;
            placeholderHashMap.put(checkId, "null");
        }
    }

    Log.i("", "" + placeholderHashMap.toString());
    for (int finalOutPut = 0; finalOutPut < lightingMap.size(); finalOutPut++) {
        JSONObject jo = new JSONObject();
        try {
            int id = finalOutPut + 1;
            jo.put("id", id);
            jo.put("SurveyPhoto", placeholderHashMap.get(id));
            jo.put("Lighting", lightingMap.get(id));
            jo.put("Notes", signSpecNotesMap.get(id));
            jo.put("AdditionalService", chkBxMap.get(id));
            //jo.put("Coordinates", latLngMap.get(id));
            jArray.put(jo);

        } catch (Exception e) {
            Log.e("", "" + e.getMessage());
        }
    }
    joMap.put(businessName, jArray);
    Log.i("JSONObject", joMap.toString());
    new CompleteSurveyAsync().execute(joMap);
} 
```

`AsyncTask`班级：

```
class CompleteSurveyAsync extends AsyncTask<JSONObject, Void, String> {

    public ProgressDialog progressDialog = new ProgressDialog(Main.this);

    protected void onPreExecute() {
        progressDialog.setMessage("Submitting Data to Server...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface diaInterface) {
                CompleteSurveyAsync.this.cancel(true);
                diaInterface.dismiss();
            }
        });
    }

    String inString, parameterPass;
    JSONObject jobject;
    @Override
    protected String doInBackground(JSONObject... jObject) {

        parameterPass = jObject.toString();
        Log.i("doInBackground", parameterPass);
        String url_select = "http://www.somewebsite.com/db/completedSurvey.php";
        HttpResponse response;
        try {

            HttpPost httpPost = new HttpPost(url_select);
            HttpClient httpClient = new DefaultHttpClient();

            httpPost.setEntity(new ByteArrayEntity(jObject.toString().getBytes("UTF8")));
            httpPost.setHeader("Accept", "application/json");
            httpPost.setHeader("Content-type", "application/json");
            response = (HttpResponse) httpClient.execute(httpPost);

            HttpEntity entity = response.getEntity();

            if(entity != null) {
                InputStream in = response.getEntity().getContent();
                inString = in.toString();
                Log.i("InputStream", "" + in.toString());
            }

        } catch (UnsupportedEncodingException e1) {
            Log.e("UnsupportedEncodingException", e1.toString());
            e1.printStackTrace();
        } catch (ClientProtocolException e2) {
            Log.e("ClientProtocolException", e2.toString());
            e2.printStackTrace();
        } catch (IllegalStateException e3) {
            Log.e("IllegalStateException", e3.toString());
            e3.printStackTrace();
        } catch (IOException e4) {
            Log.e("IOException", e4.toString());
            e4.printStackTrace();
        }
        return parameterPass;
    }

    protected void onPostExecute(String s) {
        this.progressDialog.dismiss();
        Log.i("onPostExecute", s);
        Toast.makeText(Main.this, s, Toast.LENGTH_LONG).show();
    }

} 
```

* * *

这给了我一个 LogCat 输出：

```
11-13 09:52:45.606: I/JSONObject(2601): {"SOME COMPANY":[{"Notes":"null","SurveyPhoto":"[B@427a1fa8","id":1,"Lighting":1,"AdditionalService":0},{"Notes":"null","SurveyPhoto":"null","id":2,"Lighting":0,"AdditionalService":0},{"Notes":"null","SurveyPhoto":"null","id":3,"Lighting":1,"AdditionalService":0},{"Notes":"null","SurveyPhoto":"null","id":4,"Lighting":1,"AdditionalService":0}]}
11-13 09:52:45.626: I/doInBackground(2601): [Lorg.json.JSONObject;@416ad478
11-13 09:52:45.786: I/InputStream(2601): org.apache.http.conn.EofSensorInputStream@416c51d0
11-13 09:52:45.816: I/onPostExecute(2601): [Lorg.json.JSONObject;@416ad478 
```

我验证了`JSON`，构建它工作正常，但是当通过时`AsyncTask`我开始得到`[Lorg.json.JSONObject;@4158c990`，这是一个对象引用吗？如果是这样，我该如何解析这个 PHP 服务器端？

我当前的 PHP 设置为仅写入文件：

```
$json = file_get_contents('php://input');
$jsonObj = json_decode($json, true);

$jsonFile = "json.txt";
$fh = fopen($jsonFile, 'a');

fwrite($fh, $json);
fwrite($fh, "\n");
fwrite($fh, $jsonObj);
fwrite($fh, "\n");

fclose($fh); 
```

输出（json.txt）：

```
[Lorg.json.JSONObject;@416ad478 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:12:01.830

`JSONObject... jObject`意味着这`jObject`不是`JSONObject`......它是一个可变参数/数组

尝试

```
if(jObject.length > 0)
{
  final JSONObject realjObject = jObject[0];
  //rest of code goes here and instead of jObject we are using realjObject
} 
```

编辑：改为：

```
httpPost.setEntity(new ByteArrayEntity(jObject.toString().getBytes("UTF8"))); 
```

使用（仅用于干净的代码:)）：

```
httpPost.setEntity(new StringEntity(jObject.toString(), "UTF8")); 
```

# jquery - 如何查看与 DOM 元素关联的对象

> ID：13363065
> 
> 赞同：3
> 
> 时间：2012-11-13T15:00:47.880
> 
> 标签：jquery, ajax, fancybox

作为一个快速概述，我正在尝试将 fancybox 应用于通过 ajax 拉入的元素。

我目前使用此代码应用 jQuery UI 的日历小部件以将其应用到新内容。

```
$('.date').live('focusin', function() {
            var $this = $(this);
            if(!$this.is(':data(datepicker)')) {
                //this will attach a datepicker control &amp; datepicker will immediately fire
                $this.datepicker();
            }
        }); 
```

我明白这是在做什么，鼠标悬停时它会检查 datepicker 对象是否应用于元素，如果不应用它然后触发它。

我不确定的是，虽然 jQuery UI 的日期选择器使用标识符“datepicker”，但我不确定fancybox 会使用什么。

我很确定我记得有一种方法可以查看哪些对象应用于 firebug 中的哪些 dom 元素，但我似乎找不到它。

有谁知道如何找到标识符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:03:41.403

[您可以使用名为FireQuery](https://addons.mozilla.org/de/firefox/addon/firequery/ "火查询")的 Firefox/Firebug 插件。

它显示了在 Firebug 的 HTML 面板中绑定到 DOM 元素的任何 JavaScript 对象。

~~我不知道 Chrome 开发工具是否有类似的东西。~~

更新：我切换到 Chrome 作为主要的开发浏览器，并且有一个名为[jQuery Debugger](https://chrome.google.com/webstore/detail/jquery-debugger/dbhhnnnpaeobfddmlalhnehgclcmjimi)的扩展，它在显示 jQuery 数据和事件方面做得非常好。

# c++ - 查找过滤图的连通分量

> ID：13363067
> 
> 赞同：3
> 
> 时间：2012-11-13T15:00:53.857
> 
> 标签：c++, boost, boost-graph

如何使用 BGL 计算过滤图的连通分量？我创建了一个工作过滤器，它检查名为“alive”的自定义顶点属性，并仅返回“活动”顶点，但`connected_components`在`filtered_graph`. 我认为这与过滤后的图具有不连续的顶点 id 的事实有关，因此`operator[]`现在不再定义定义的，但我不确定为什么或如何围绕它进行编码。

```
typedef boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, VertexProperties> Graph;
typedef boost::property_map<Graph, ::vertex_alive_t>::type AliveMap;

template <typename AliveMap>
struct vertex_is_alive {
  vertex_is_alive() { }
  vertex_is_alive(AliveMap alive) : m_alive(alive) { }
  template <typename Vertex>
  bool operator()(const Vertex& v) const {
    return boost::get(m_alive,v) == STILL_ALIVE_CODE;
  }
  AliveMap m_alive;
};

Graph G;
//generate G...
int N = boost::num_vertices(G);
vector<int> component(N);
int num = boost::connected_components(G, &component[0]);
//do something with component and play around with vertex_alive statuses...this part works fine.
vertex_is_alive<AliveMap> filter(boost::get(::vertex_alive_t(), G));
boost::filtered_graph<Graph, vertex_is_alive<AliveMap> > fG (G, filter); 
int num = boost::connected_components(fG, &component[0]);
//this makes it choke 
```

我收到的错误消息是（删除家谱）：

```
/usr/local/include/boost/property_map/property_map.hpp:354:56: error: no match for ‘operator[]’ in ‘((const boost::vec_adj_list_vertex_property_map<boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >, boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >*, unsigned int, unsigned int&, vertex_alive_t>&)pa)[k]’
/usr/local/include/boost/property_map/property_map.hpp:354:56: note: candidate is:
In file included from /usr/local/include/boost/graph/adjacency_list.hpp:245:0,
                 from main.cpp:1:
/usr/local/include/boost/graph/detail/adjacency_list.hpp:2465:24: note: Reference boost::vec_adj_list_vertex_property_map<Graph, GraphPtr, ValueType, Reference, Tag>::operator[](boost::vec_adj_list_vertex_property_map<Graph, GraphPtr, ValueType, Reference, Tag>::key_type) const [with Graph = boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >; GraphPtr = boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >*; ValueType = unsigned int; Reference = unsigned int&; Tag = vertex_alive_t; boost::vec_adj_list_vertex_property_map<Graph, GraphPtr, ValueType, Reference, Tag>::key_type = unsigned int]
/usr/local/include/boost/graph/detail/adjacency_list.hpp:2465:24: note:   no known conversion for argument 1 from ‘const boost::detail::edge_desc_impl<boost::undirected_tag, unsigned int>’ to ‘boost::vec_adj_list_vertex_property_map<boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >, boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, boost::property<vertex_alive_t, unsigned int> >*, unsigned int, unsigned int&, vertex_alive_t>::key_type {aka unsigned int}’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:43:40.813

You should use boost::filtered_graph > fG (G, boost::keep_all(), filter);. The signature for the filtered graph is `filtered_graph<Graph, EdgePredicate, VertexPredicate>` so you were using your vertex filter as an edge one. The last line in your error implies that boost::get(m_alive,x) requires that x be a vertex descriptor (`unsigned int`) and it was being passed an edge descriptor (`const boost::detail::edge_desc_impl<boost::undirected_tag, unsigned int>`).

# sql - SQL在存储过程中的选择语句内将变量与字符串连接起来

> ID：13363068
> 
> 赞同：0
> 
> 时间：2012-11-13T15:00:53.290
> 
> 标签：sql, sql-server, concatenation

我有一个冗长且非常重复的查询，我需要每 5 分钟运行一次以进行报告，下面有几个 select 语句的摘录，我有 26 个与此类似的列需要总共运行 6 行不同的行，每行都有 7 个不同的 where 语句，基于时间框架、作业和运算符，所以与其创建大量的 T-SQL，并且每五分钟运行一次我想尝试创建一个存储过程，其中传递给它的参数是两位数的行号（在下面的示例中为“05”）、where 条件和列的标识符（在下面的示例中为“作业”）。我遇到的问题是连接 select 语句中的列名，我尝试了许多方法，但都没有奏效。

示例（是的，我知道很多转换为十进制，我想对自己大喊大叫，因为一切都是 varchar，但是将数据从我们的制造机器传输到 Db 的应用程序只会写为时间戳的字符串或日期时间，而 charindex 是因为我看到数据被放到小数点后 20 位，在极少数情况下甚至更远）

```
 ,AVG(CAST(LEFT("E05UP", (CHARINDEX(',', E05UP, 5) + 6)) AS decimal(11,6)))*100 AS JobE05Up
        ,AVG(CAST(LEFT(E05QUAL, (CHARINDEX(',', E05QUAL, 5) + 6)) AS decimal(11,6)))*100 AS JobE05Qual
        ,CASE WHEN AVG(CAST(LEFT(E05UP, (CHARINDEX(',', E05UP, 5) + 6)) AS decimal(11,6)))>0 AND AVG(CAST(LEFT(E05SPD, (CHARINDEX(',', E05SPD, 5) + 6)) AS decimal(11,6)))>0 AND 
            AVG(CAST(LEFT(E05QUAL, (CHARINDEX(',', E05QUAL, 5) + 6)) AS decimal(11,6)))>0 THEN (AVG(CAST(LEFT(E05UP, (CHARINDEX(',', E05UP, 5) + 6)) AS decimal(11,6)))*
            (AVG(CAST(LEFT(E05SPD, (CHARINDEX(',', E05Spd, 5) + 6)) AS decimal(11,6)))/@E05SpeedMAX)*AVG(CAST(LEFT(E05QUAL, (CHARINDEX(',', E05QUAL, 5) + 6)) AS decimal(11,6)))*100)
            ELSE 0 END AS JobE05OEE 
```

简而言之，我想做的是：

```
 SELECT AVG(E+@P1+SPD) AS @P2+Speed FROM Test.Dbo.Line+@P1 WHERE @P3 
```

编辑：整个查询从最后一个 Db 只写中选择数据，在将所有 Casts 更改为一个函数之后，唯一会在此报告和此报告的所有其他查询之间更改的是 Line # (L05) the Column Name， where 子句，以及被求和或平均的数字，因为我们将使用不止一行。

```
DECLARE @L05CurWO as INT
DECLARE @L05CurCount AS INT
DECLARE @L05SpeedMAX AS INT
DECLARE @E05SpeedMAX AS INT
DECLARE @H05SpeedMAX AS INT
DECLARE @P05SpeedMAX AS INT
DECLARE @C05SpeedMAX AS INT
DECLARE @L05CurQual AS Decimal(11,6)

--Set Maximum Line Speeds Speeds
SET @L05SpeedMAX = 147
SET @E05SpeedMAX = 147
SET @H05SpeedMAX = 147
SET @P05SpeedMAX = 147
SET @C05SpeedMAX = 147

SET @L05CurWO = (SELECT TOP 1 L05WO FROM WB.dbo.Line05 WHERE L05WO IS NOT NULL ORDER BY L05Time DESC)
SET @L05CurCount = (SELECT SUM(dbo.TOD(E05Count)) FROM WB.dbo.Line05 WHERE L05WO = @L05CurWO)
SET @L05CurQual = (SELECT TOP 1 CASE WHEN dbo.TOD(L05Count)<1 THEN 0 ELSE CASE WHEN dbo.TOD(L05Blowoff)<1 THEN 1 ELSE (1-(dbo.TOD(L05Blowoff)/
                        dbo.TOD(L05Count))) END END FROM WB.dbo.Line05 WHERE L05WO = @L05CurWO ORDER BY L05Time DESC)

--Select Current Numbers
    SELECT TOP 1 @L05CurWO AS CurrentL05WorkOrder
                    ,L05TE AS CurrentL05TE
                    ,L05TF AS CurrentL05TF
                    ,@L05CurCount AS CurrentL05Count
                    ,@L05JobScrap AS CurrentL05Scrap
                    ,L05QUAN AS CurrentL05Quantity
                    ,dbo.TOD(L05UP)*100 AS CurrentL05Uptime
                    ,dbo.TOD(C05SPD) AS CurrentL05Speed
                    ,@L05CurQual*100 AS CurrentL05Qual
                    ,CASE WHEN dbo.ToD(L05UP)>0 AND dbo.ToD(C05SPD)>0 AND @L05CurQUAL>0 THEN dbo.ToD(L05UP)*(dbo.ToD(C05SPD)/@L05SpeedMAX)*@L05CurQual ELSE 0 END AS CurrentL05OEE
                    ,dbo.ToD(E05SPD) AS CurrentE05Speed
                    ,dbo.ToD(E05UP)*100 AS CurrentE05Up
                    ,dbo.ToD(E05QUAL)*100 AS CurrentE05Qual
                    ,CASE WHEN dbo.ToD(E05UP)>0 AND dbo.ToD(E05SPD)>0 AND dbo.ToD(E05QUAL)>0 THEN (dbo.ToD(E05UP)*(dbo.ToD(E05SPD)/@E05SpeedMAX)*(1-(dbo.ToD(E05Blowoff)/
                     dbo.ToD(E05Count)))*100) ELSE 0 END AS CurrentE05OEE
                    ,dbo.ToD(H05SPD) AS CurrentH05Speed
                    ,dbo.ToD(H05UP)*100 AS CurrentH05Up
                    ,dbo.ToD(H05QUAL)*100 AS CurrentH05Qual
                    ,CASE WHEN dbo.ToD(H05UP)>0 AND dbo.ToD(H05SPD)>0 AND dbo.ToD(H05QUAL)>0 THEN (dbo.ToD(H05UP)*(dbo.ToD(H05SPD)/@H05SpeedMAX)*(1-(dbo.ToD(H05Blowoff)/
                     dbo.ToD(H05Count)))*100) ELSE 0 END AS CurrentH05OEE
                    ,dbo.ToD(P05SPD) AS CurrentP05Speed
                    ,dbo.ToD(P05UP)*100 AS CurrentP05Up
                    ,dbo.ToD(P05QUAL)*100 AS CurrentP05Qual
                    ,CASE WHEN dbo.ToD(P05UP)>0 AND dbo.ToD(P05SPD)>0 AND dbo.ToD(P05QUAL)>0 THEN (dbo.ToD(P05UP)*(dbo.ToD(P05SPD)/@P05SpeedMAX)*(1-(dbo.ToD(P05Blowoff)/
                     dbo.ToD(P05Count)))*100) ELSE 0 END AS CurrentP05OEE
                    ,dbo.ToD(C05SPD) AS CurrentC05Speed
                    ,dbo.ToD(C05UP)*100 AS CurrentC05Up
                    ,dbo.ToD(C05QUAL)*100 AS CurrentE05Qual
                    ,CASE WHEN dbo.ToD(C05UP)>0 AND dbo.ToD(C05SPD)>0 AND dbo.ToD(C05QUAL)>0 THEN (dbo.ToD(C05UP)*(dbo.ToD(C05SPD)/@P05SpeedMAX)*(1-(dbo.ToD(C05Blowoff)/
                     dbo.ToD(C05Count)))*100) ELSE 0 END AS CurrentC05OEE
    FROM WB.dbo.Line05
    WHERE L05WO = @L05CurWO
    ORDER BY L05Time DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:19:48.070

从...开始

```
Create Function dbo.ToD(@val as varchar(max)) Returns Decimal(11, 6) As
Begin
  Return Cast(Left(@val, (CharIndex(',', @val, 5) + 6)) As Decimal(11, 6))
End 
```

我认为下一步是动态 sql，这样的事情应该会让你走上正轨。（如果@Col来自用户输入，则存在sql注入漏洞）：

这是完全未经测试的，所以会有愚蠢的错误。我也可能误解了从查询到查询哪些位会发生变化，哪些保持不变。我不是 100% 确定通过动态 sql 设置参数的机制有效，但我在[How to get sp_executesql result into a variable?](https://stackoverflow.com/questions/803211/how-to-get-sp-executesql-result-into-a-variable) . 您可能需要改用临时表。

```
Declare 
  @Col nvarchar(max) = '05',
  @sql nvarchar(max),
  @params nvarchar(max),
  @CurWO int

-- Dynamically getting one of the current values
Set @sql = N'Set @CurWO = (' + 
           N'Select Top 1 L' + @Col + N'WO' +
           N' From WB.dbo.Line' + @Col + 
           N' Where L' + @Col + N'WO Is Not Null' +
           N' Order By L' + @Col + N'Time Desc)'

-- For diagnosing the inevitable errors
Print @sql

Set @params = N'@CurWO int output'

Exec sp_executesql @sql, @params, @CurWO Output

-- Dynamically executing the main query
Set @sql = N'Select Top 1 @CurWO As CurrentL' + @Col + N'WorkOrder,' + -- @CurWO from last query
           N' L' + @Col + N'TE AS CurrentL' + @Col + N'TE,' +
           N' L' + @Col + N'TF AS CurrentL' + @Col + N'TF,' +
           ...
           N' From WB.dbo.Line' + @Col +
           N' Where L' + @Col + N'WO = @CurWO' +
           N' Order By L' + @Col + N'Time Desc'

-- For diagnosing the inevitable errors
Print @sql

Set @params = N'@CurWO int'

Exec sp_executesql @sql, @params, @CurWO 
```

# bootstrap-typeahead - 如何更改 Bootstrap 预输入的选择行为

> ID：13363070
> 
> 赞同：4
> 
> 时间：2012-11-13T15:00:58.783
> 
> 标签：bootstrap-typeahead

当使用 Twitter Bootstrap（[示例](http://twitter.github.com/bootstrap/javascript.html#typeahead)）中的预输入功能时，当我按 TAB 和按 ENTER 时，第一个建议会被选中。但是，当用户不想使用其中一个建议时，只有一种方法可以实现这一点，那就是抓住鼠标并单击提交按钮。

我想要一种只使用键盘的方法，TAB 或 ARROW-UP 看起来都很直观，但在这两种情况下，我都无法让 Bootstrap 的默认行为停止。我尝试了 preventDefault() 和 stopPropagation()。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T15:27:03.603

我解决这个问题的方法是用当前查询的建议初始化列表。因此，当按 enter 或 tab 时，查询被选中。当按下向下箭头或向上箭头 + 输入时，会选择一个真正的建议。

这类似于 Chrome 在 url 栏中输入内容时所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T21:52:55.857

一个老问题，但仍然相关。您可以使用以下方法将其删除。在 typeahead.jquery.js 文件中找到以下内容并将其注释掉

```
items.first().addClass('active') 
```

# jquery - 漂亮照片内联javascript

> ID：13363078
> 
> 赞同：1
> 
> 时间：2012-11-13T15:01:30.107
> 
> 标签：jquery

我正在使用带有内联内容的漂亮照片，我遇到的问题是当项目放大时，javascript 似乎在漂亮照片中不起作用。

我尝试将 javascript 放在被调用和打开的实际标签中。有没有办法说当一个项目被选中时，这个 javascript 应该在漂亮的照片中运行。

我只是在使用

```
<a href="#item" rel="pop"></a><div id="item">contents</div> 
```

# mfc - 将工具提示添加到 CStatic

> ID：13363079
> 
> 赞同：13
> 
> 时间：2012-11-13T15:01:37.050
> 
> 标签：mfc, static, tooltip

我一直无法找到一个简洁的代码块来允许我向 CStatic（和 CLed）控件添加/显示工具提示。显然，这样做的标准代码不适用于这种类型的控件。有人可以发布代码片段吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-16T08:23:55.320

我希望这段代码能解决你的问题。重要的是让 CStatic 的 NOTIFY 属性 =TRUE。

```
if( !m_ToolTip.Create(this))
{
    TRACE0("Unable to create the ToolTip!");
}
else
{
    CWnd* pWnd = GetDlgItem(IDC_STATIC_MASTER_PWD);
    m_ToolTip.AddTool(pWnd,"Ok");
    m_ToolTip.Activate(TRUE);
} 
```

让我知道是否有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-23T06:10:37.283

我不知道这是否仍然需要，但这是我用来解决问题的方法：只需在创建静态标签时将 SS_NOTIFY 添加到 dwStyle 即可。（或者只是在属性中设置“Nofity”“True”）。这对我来说很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-20T15:11:06.520

使用这个简单的类，我在多行工具提示方面取得了成功：

为 ToolTips 创建一个类：

```
class ToolTip
{
public:
    static HWND CreateToolTip(int toolID, HWND hDlg, UINT id);
}; 
```

接下来，实现一个工具提示创建功能：

```
HWND ToolTip::CreateToolTip(int toolID, HWND hDlg, UINT id)
{
    if (!toolID || !hDlg || !id)
    {
        return FALSE;
    }

    CString strTTText;
    strTTText.LoadString( id );

    // Get the window handle of the control to attach the TT to.
    HWND hwndTool = ::GetDlgItem(hDlg, toolID);

    // Create the tooltip window
    HWND hwndTip = CreateWindowEx(NULL, TOOLTIPS_CLASS, NULL,
                              WS_POPUP |TTS_ALWAYSTIP,// | TTS_BALLOON,
                              CW_USEDEFAULT, CW_USEDEFAULT,
                              CW_USEDEFAULT, CW_USEDEFAULT,
                              hDlg, NULL, 
                              AfxGetInstanceHandle() , NULL);

   if (!hwndTool || !hwndTip)
   {
       return (HWND)NULL;
   }                              

    // Associate the tooltip with the tool.
    TOOLINFO toolInfo = { 0 };
    toolInfo.cbSize = sizeof(toolInfo);
    toolInfo.hwnd = hDlg;
    toolInfo.uFlags = TTF_IDISHWND | TTF_SUBCLASS;
    toolInfo.uId = (UINT_PTR)hwndTool;
    toolInfo.lpszText = (char*)(LPCTSTR)strTTText;
    ::SendMessage(hwndTip, TTM_ADDTOOL, 0, (LPARAM)&toolInfo);
    ::SendMessageA(hwndTip, TTM_SETMAXTIPWIDTH, 0, 40); // force multi-line

    return hwndTip;
} 
```

在 InitDialog 的某个地方调用它：

```
CMyDialog::InitDialog()
{
    ToolTip::CreateToolTip( PickAUniqueNumber, m_hWnd, IDS_MY_RESOURCE_STRING );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-18T05:23:49.093

当我在基于对话框的自动创建的 mfc 应用程序上添加 CStatic 时，工具提示不会显示，直到我在预翻译对话框消息中添加 RelayEvent

```
BOOL CTooltipStaticDlg::PreTranslateMessage(MSG* pMsg)
{
    m_ToolTip.RelayEvent(pMsg); 
    return CDialog::PreTranslateMessage(pMsg);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-06T17:18:15.297

我的对话框标签上有分配的自定义 ID IDC_PATH。我需要打开标签的通知标志 (SS_NOTIFY)，我需要重载 CWnd 方法 OnToolHitTest 并像这样处理工具提示命中测试：

```
INT_PTR CPath::OnToolHitTest(CPoint point, TOOLINFO* pTI) const
{
    INT_PTR r = CWnd::OnToolHitTest(point,pTI);

    this->ClientToScreen(&point);
    CRect rcLbl;
    GetDlgItem(IDC_PATH)->GetWindowRect(&rcLbl);
    if( rcLbl.PtInRect(point) )
    {
        pTI->uFlags |= TTF_IDISHWND;
        pTI->uFlags &= ~TTF_NOTBUTTON;
        pTI->uId = (UINT_PTR)GetDlgItem(IDC_PATH)->m_hWnd;
        return IDC_PATH;
    }

    return r;
} 
```

然后我的对话框开始接收 TTN_NEEDTEXT 通知，我处理并动态设置了工具提示的文本。

```
BOOL CPath::OnTtnNeedText(UINT id, NMHDR *pNMHDR, LRESULT *pResult)
{
   UNREFERENCED_PARAMETER(id);

   TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;
   UINT_PTR nID = pNMHDR->idFrom;
   BOOL bRet = FALSE;

   if (pTTT->uFlags & TTF_IDISHWND)
   {
      // idFrom is actually the HWND of the tool
      nID = ::GetDlgCtrlID((HWND)nID);
      if(nID == IDC_PATH)
      {
         pTTT->lpszText = (LPSTR)(LPCTSTR)m_FullDestPath;
         bRet = TRUE;
      }
   }

   *pResult = 0;

   return bRet;
} 
```

# java - 数组语句中的方法调用导致程序“挂起”

> ID：13363084
> 
> 赞同：2
> 
> 时间：2012-11-13T15:01:58.157
> 
> 标签：java, knights-tour

我编写了一个基于尝试解决骑士巡回赛问题的程序。我相信我已经想出了一个合适的解决方案，一切看起来都很好。

我很好奇的一个小问题是一小段代码，它基于展望未来可能的方格来实现最佳移动。

如果我这样实现（implementation1）——</p>

```
if( moveMade )  // if any move is possible
{
    currentRow += vertical[ betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn ) ];
    currentColumn += horizontal[ betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn ) ];
    board[ currentRow ][ currentColumn ] = squareCounter;
    squareCounter++;
    moveMade = false;
}
else
moveMade = true;    // if there are no moves possible this is the end 
```

软件会挂起 - 为什么？

如果我做一个像这样（实施2）这样无害且看似微不足道的小改动——</p>

```
int temp1 = betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn );

if( moveMade )  // if any move is possible
{
    currentRow += vertical[ temp1 ];
    currentColumn += horizontal[ temp1 ];
    board[ currentRow ][ currentColumn ] = squareCounter;
    squareCounter++;
    moveMade = false;
}
else
    moveMade = true;    // if there are no moves possible this is the end 
```

那么一切都很好，代码将得出结论。

我正在使用 netbeans 7.1 编写我的软件，并认为它一定与 IDE 有关，所以我尝试仅使用“javac”和命令行来编译它，只是为了找到相同的结果。我不明白为什么我不能像这样在数组参数中调用这个方法——vertical[ HERE ] 或 Horizo​​ntal[ HERE ] 并让返回的结果在表达式中使用。我之前已经设法编写这样的代码而没有任何问题。

这是被调用的方法——</p>

```
public static int betterMove( int moverMatrix[], int theHorizontal[], int theVertical[], int accessBoard[][], int newCurrentRow, int newCurrentColumn )
{
    int[] equalMatrix = new int [ 8 ];  // records the positions which are equal in value with a (1)
    int[] bmValueMatrix = new int[ 8 ]; // holds the numbers taken from accessibility heuristic
    int[] finalTable = new int[ 8 ];    // the best move discovered
    int best = bestMove( moverMatrix ); // the lowest number in the given array
    int startPos = best + 1;
    int moveNumber = 0;
    int originalCurrentRow = newCurrentRow;
    int originalCurrentColumn = newCurrentColumn;

    equalMatrix[ best ] = 1;    // mark the lowest value position with a 1

    initVMatrix( bmValueMatrix );
    initVMatrix( finalTable );

    for( int i = startPos; i < 8; i++ ) // mark the elements of equal value in equalMatrix with (1)
    {
        if( moverMatrix[ best ] == moverMatrix[ i ] )
            equalMatrix[ i ] = 1;
    }

    for( int j = 0; j < 8; j++ )    // go through each element of equalMatrix and look forward
    {                               // for best accessibility heuristic
        newCurrentRow = originalCurrentRow;
        newCurrentColumn = originalCurrentColumn;
        if( equalMatrix[ j ] == 1 )
        {
            newCurrentRow += theVertical[ j ];
            newCurrentColumn += theHorizontal[ j ];
            while( moveNumber < 8 )
            {
                if( newCurrentRow + theVertical[ moveNumber ] >= 0 &&
                        newCurrentRow + theVertical[ moveNumber ] < 8 )
                {
                    if( newCurrentColumn + theHorizontal[ moveNumber ] >= 0 &&
                            newCurrentColumn + theHorizontal[ moveNumber ] < 8 )
                    {
                        bmValueMatrix[ moveNumber ] = accessBoard[ newCurrentRow + theVertical[ moveNumber ] ]
                                                                    [ newCurrentColumn + theHorizontal[ moveNumber ] ]; 
                    }   // end if
                }   // end if
                moveNumber++;
            }   // end while 
            moveNumber = 0;
            finalTable[ j ] = bestMove( bmValueMatrix );
            initVMatrix( bmValueMatrix );
        }   // end if

    }   // end for
    return bestMove( finalTable );   
} 
```

上面 return 语句中使用的方法 bestmove -

```
public static int bestMove( int theMoves[] )
{
    int theLowest = 10,
        idealMove = 0;

    for( int i = 0; i < 8; i++ )
    {
        if( theMoves[ i ] < theLowest )
        {
            theLowest = theMoves[i];
            idealMove = i;
        }
    }
    return idealMove;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:06:44.403

```
currentRow += vertical[ betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn ) ];
currentColumn += horizontal[ betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn ) ]; 
```

在上述情况下，`index value`两个数组都不相同。

问题是，当您`betterMove`第二次调用该方法时，该`currentRow`值已更改，并且由于您将`currentRow`方法作为参数之一传递，因此`index`用于`horizontal`数组的那个与那个不一样当您在`if (moveMade)`.

请注意，差异仅适用于`2nd statement`. 第一个将与两种方式相同。

所以，这可能是个问题。

因此，您需要先存储该方法执行的返回值，然后将该返回值用作数组`vertical`和`horizontal`数组的索引。

```
int temp1 = betterMove( valueMatrix, horizontal, vertical, accessibility, currentRow, currentColumn );

if( moveMade )  // if any move is possible
{
    currentRow += vertical[ temp1 ];
    currentColumn += horizontal[ temp1 ];
    // Rest of the code
} 
```

现在在这种情况下，两个数组都具有相同的`index value`- `temp1`。

此外，如果您多次使用方法调用的返回值，并且该方法正在修改您的任何`passed parameter`. 这将使您免于目睹奇怪的结果。

# .net - 实体框架存储过程只返回一个结果

> ID：13363086
> 
> 赞同：1
> 
> 时间：2012-11-13T15:02:00.403
> 
> 标签：.net, sql-server, entity-framework, c#-4.0

```
List<GetAllDataResult> list = myContext.GetAllData(id).ToList(); 
```

因此，考虑上面使用实体框架对存储过程的调用。当我调用它时，我期望返回 5 行（我将枚举）但调用只返回一行 - 看起来像第一行。

这是EF设计器代码中的方法： public ObjectResult GetAllData(Nullable id)();

为什么它不返回列表。

当我在 Sql Server Management Studio 中手动运行 SP 时，我得到了正确的列表。有任何想法吗？

更新：正在执行的存储过程如下：

```
Select id, Name, age from Person where lid = @id 
```

在 SQL 探查器中，我可以看到如下调用：

```
exec [dbo].[GetAllData] @id=2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:48:15.037

在您的 EF 设计器中，您可以检查您的映射吗？

我的假设是，如果您从数据库自动生成实体，它实际上是将您的`@ID`参数映射到`Person`.

我的意思是，当 EF 生成 SQL 时，它很可能正在生成：

```
 Select id, Name, age from Person where id = @id 
```

这可以进一步检查以查看返回的行是否`ID`为 2，而不是`lid`

# css - 悬停时CSS更改属性

> ID：13363090
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:02:20.230
> 
> 标签：css, hover

当元素（在内部）悬停时，是否有办法更改框的 css 属性？

例如，如果我有：

```
<table>
<tr><td><a>.....</td></tr>
</table> 
```

当链接 a 鼠标悬停时，我想更改容器 td 的属性。可能吗？

对不起，我没有解释清楚。我有一个 ，而不是一张桌子......这只是一个例子......我有

```
<ul>
<li><a>..... 
```

在我的CSS中，我有：

```
#navigation li a {
text-decoration: none;
color: #333;
text-transform: none;
}
#navigation li:hover {
color: white;
background-color: #333;
}
#navigation li a:hover {
color: white;
background-color: #333;
} 
```

但它不起作用，因为如果我继续链接它没关系，但如果我在 li 中使用鼠标但关闭链接文本的颜色不会改变......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:41:44.630

代替

```
#navigation li a:hover { 
```

尝试

```
#navigation li:hover a { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:27:11.187

> 但它不起作用，因为如果我继续链接它没关系，但如果我在 li 中使用鼠标但关闭链接文本的颜色不会改变......

那是因为您将鼠标悬停在链接本身上。如果您希望链接在您将鼠标悬停在 li 上时做出反应，只需更改放置悬停伪类的位置：

```
li:hover a {
    color: #d2d2d2;
} 
```

这基本上是说“当 li 悬停时，其中的链接应该更改为这些样式。”

或者，您可以向链接添加填充（例如 - `padding: 5px`），使其反应字段更大。所以：

```
li a {
  display: block; /* Required to make it honor padding. */
  padding: 10px;
}

li a:hover {
  color: #d2d2d2;
} 
```

只要您没有将`li`元素设置为比`a`元素更大的尺寸（通过高度、宽度、边距和/或填充），那么`li`将“收缩包装”`a`并且与总尺寸相同的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:07:55.303

您不能更改父元素的属性，但可以在父 td 本身上触发悬停事件：

```
table td:hover {
    background-color: red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:50:17.540

您可以将 display: block 添加到锚元素，这将使锚填充 li... 取决于 ul 等上的缩进等。

```
li a { display: block; } 
```

# javascript - Vimeo iframe 作为背景

> ID：13363092
> 
> 赞同：2
> 
> 时间：2012-11-13T15:02:23.693
> 
> 标签：javascript, jquery, html, css, ajax

我要制作一个以视频为背景的网站。

我想从 vimeo 加载视频，但我还没有找到全屏播放的最佳方式。

我正在尝试向 iframe 添加一个 CSS，但它根本不起作用：

```
iframe{
     width: 100%;
     height: 100%;
} 
```

你们中的任何人都知道在不使用插件或 html5 的情况下将其作为背景嵌入的最佳方法，以避免 IE 出现问题。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:05:30.487

给你：[演示](http://jsfiddle.net/maniator/4279a/)

将其包装在一个 div 中并将其设置为 100%、100%

```
iframe, div {
     width: 100%;
     height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:06:25.790

HTML：

```
<iframe src="vimeo.path"></iframe>
<div id="container"></div> 
```

CSS：

```
body {
    overflow: hidden;
}
iframe {
     position: absolute;
     z-index: 1;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
}
#container {
     position: absolute;
     z-index: 2;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     overflow: auto;
} 
```

演示：

[http://jsbin.com/utezov/4/embed?live](http://jsbin.com/utezov/4/embed?live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:06:44.790

```
<iframe src="http://player.vimeo.com/video/47922974" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/47922974">Jape 'Scorpio'</a> from <a href="http://vimeo.com/fergalbrennan">Fergal Brennan</a> on <a href="http://vimeo.com">Vimeo</a>.</p> 
```

现在我刚从 vimeo 拍了一段视频。也许为 iframe 设置一个类，比如

```
<iframe class="fullvideo"> 
```

并将css设置为：

```
iframe.fullvideo {
width: 100%;
height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:25:11.503

尝试使用一个 ID 来识别这个 bg iframe：

```
<iframe id="bgiframe">...</iframe> 
```

并以这种方式重新定义此 iframe：

```
html, body, p, div, span, table, td 
/* Add other elements... These are explicit defined since ie6/7 doesn't support * selector */ 
{
   z-index: inherit;
   background: transparent; /* this is important to see-through normal elements */
}

#bgiframe {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    padding 0;
    margin: 0;
    border: 0;
    width: 100%; height: 100%;
    z-index: -1;
} 
```

`z-index: -1;`用于将此元素置于其他所有元素之下。 `background: transparent;`对于其他所有元素，都是通过将视频视为背景。

This can be an example: [http://jsfiddle.net/4KHET/2/](http://jsfiddle.net/4KHET/2/)

# android - 检测用户是我

> ID：13363093
> 
> 赞同：1
> 
> 时间：2012-11-13T15:02:23.913
> 
> 标签：android

我敢肯定这会被问过，但我不知道要搜索什么......

无论如何，我有一个应用程序，我想以某种方式运行，除非由我或在我的特定手机上操作 - 这是出于调试目的。我可以想到各种笨拙的方法，但我怀疑可能有一种标准的方法……有吗？

**编辑：**此代码是一种可能的解决方案：

```
TelephonyManager telemamanger = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String getSimSerialNumber = telemamanger.getSimSerialNumber();
if (getSimSerialNumber.equals("my_serial_number"))
{
    // yes its me!
} 
```

唯一的问题是它需要额外的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:43:59.193

我认为最好的方法是简单地使用唯一的设备标识符。在某些情况下它可以更改或为空，但由于您只需要它来确保这是您的设备，因此您可以使用它而不必担心一些问题。

以下是如何使用它（取自[Is there a unique Android device ID?](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id#2785493)：

```
import android.provider.Settings.Secure;
private String android_id = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

您可以打印它（这样您就知道您的设备的 ID 是什么），然后将其与该结果进行比较（我不确定 if() 语句的语法是否正确，所以我将把它留给您）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:44:08.433

您可以在 SD 卡中创建一个文件，并检查该文件是否存在。如果文件存在，您可以假设它是您的并打印额外的调试信息等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:18:20.200

检查电话 ID 和电话号码。编写您自己的 Web 脚本以检查是否允许手机访问您的应用程序。您可以为此使用数据库。

# jquery - 用 mobiscroll 和 jquery mobile 计算问题

> ID：13363101
> 
> 赞同：0
> 
> 时间：2012-11-13T15:02:52.180
> 
> 标签：jquery, date, mobile, mobiscroll

我尝试计算出发日期和到达日期之间的夜数，如果设置了出发日期，则到达日期应自动更改为给定出发日期后的一天。

那是我的 mobiscrolldatepickers

```
$(function(){

    $('#anreise').scroller({
        preset: 'date',
        theme: 'ios',
            dateFormat: 'dd.mm.yyyy',
            dateOrder: 'M DD ddyy',
minDate: new Date()

    });    

});

$(function(){

    $('#abreise').scroller({
        preset: 'date',
        theme: 'ios',
           dateFormat: 'dd.mm.yyyy',
            dateOrder: 'M DD ddyy'

    });    

}); 
```

这就是我尝试计算的函数：

```
 var DatePicked = function() { 
    var departure = $("#anreise"); 
    var arrival = $("#abreise"); 
    var nights = $("#nacht"); 
    var triggeringElement = $(this); 
    var departureDate = departure.scroller("getDate"); 
    var minArrivalDate = departure.scroller("getDate"); 

    if (departureDate != null) { 
    minArrivalDate.setDate(departureDate.getDate() + 1); 
    } else { 
    minArrivalDate.setDate(minArrivalDate.getDate() + 1); 
    } 

    arrival.scroller('option', 'setDate', minArrivalDate); 

    }; 
```

这就是我尝试调用更改的方式：

```
$('#anreise').scoller({ 
    onSelect: DatePicked   
    }); 
```

我尽力让它工作，但我现在不知道更多:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:38:34.393

所以我想通了：

我将该功能添加到我的 anreise-scroller 中：

```
onSelect: function() {
                                    var date1 = $('#anreise').scroller('getDate');
                                    var date2 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate() + 1);
                                    $('#abreise').scroller('option', 'minDate', date2);
                        $("#abreise").scroller("setDate",date2, true); 

                                }, 
```

不完美但做到了，我将以下代码添加到我的 abreisescroller 中：

var currentDate = new Date();

```
 var nextcurrentDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() + 1);
$("#abreise").scroller("setDate",nextcurrentDate, true); 
```

谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:40:43.877

您使用的 setDate 方法错误，应该是这样的：

```
arrival.scroller('setDate', minArrivalDate, true); 
```

# php - session 在生成的文件之外始终为空

> ID：13363104
> 
> 赞同：0
> 
> 时间：2012-11-13T15:03:01.367
> 
> 标签：php, session, webserver, server-configuration

`var_dump`当我在另一个页面中尝试时，为什么我得到一个空的会话数组？在服务器中，会话存储没有任何内容，只有 id 的名称。使用 cookie 一切正常。有时（是的，有时），我重新启动服务器，然后会话也运行良好。什么可能导致此问题？

也许是 php 5.1.6 的错误？还是服务器配置有问题？

**index_2.php**

```
<?php
session_start();
$_SESSION['xxx'] = "tessstsse";
var_dump($_SESSION);//here show the correct session
header( 'Location: index_3.php'); 
```

**index_3.php**

```
<?php
session_start();
var_dump($_SESSION); 
```

其输出将是：

```
array
  empty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:06:30.687

试一试..如果可行，我会重新检查您的代码，否则可能是您的服务器有问题...

page1.php

```
<?php
    session_start();
    $_SESSION['auth'] = "true";
    $_SESSION['superhero'] = "batman";
?>
<a href="page2.php">Click here</a> 
```

page2.php

```
<?php
    session_start(); // start the session before using it
    //echo $_SESSION['auth']; // will output 'true'
    print_r($_SESSION); 
?> 
```

销毁.php

```
<?php
    session_start(); // start the session before using it
    session_destroy(); // deletes the current session..
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:22:13.243

我的 Web 服务器没有空间来存储会话内容。

0% 的可用空间。删除一些数据，问题就解决了。

# css - Css 颜色（例如#999） - 为什么只有三个数字？

> ID：13363105
> 
> 赞同：4
> 
> 时间：2012-11-13T15:03:07.267
> 
> 标签：css

> **可能重复：**
> [3 位十六进制颜色](https://stackoverflow.com/questions/1459273/3-digit-hex-color-code)
> [代码在 CSS 中使用 3 位颜色代码而不是 6 位颜色代码](https://stackoverflow.com/questions/3108860/using-3-digit-color-codes-rather-than-6-digit-color-codes-in-css)

我的颜色具有以下 RGB 值：

```
255-223-145 
```

我看到很多页面的颜色只有三位数，例如：

```
color: #999; 
```

我想知道为什么，以及如何将这些 rgb 值转换为三位数的颜色。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:04:53.843

它不是三位数的颜色，#999 只是 #999999 的简写，所以除非你的数字像 #223322 (#232) 那样重复，否则你不能把它剪掉。

这个问题有两个位，要将十六进制转换为 rgb，请在线使用[此类](http://www.javascripter.net/faq/hextorgb.htm)工具或[此类](http://hex2rgba.devoth.com/)工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T15:06:53.763

`#999`是 的简写`#999999`，`#ABC`是的简写`#AABBCC`。如果您不需要完整的六个十六进制数字，则可以缩短 CSS 颜色。

你的十六进制颜色是`#FFDF91`. 最接近的三位数颜色是`#FD8`( `#FFDD88`)。接近，虽然不相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:06:02.343

如果你有 2 个相同的数字，你可以很快写

```
FF -> F
99 -> 9 
```

所以 #999 = #999999 和 #FFF = #FFFFFF

# objective-c - 自定义没有 uiappearance 的 uibarbuttonitem

> ID：13363106
> 
> 赞同：1
> 
> 时间：2012-11-13T15:03:07.717
> 
> 标签：objective-c, ios, uibarbuttonitem, uiappearance

有没有办法在不使用 UIApperance 的情况下自定义所有 uibarbuttonitems 以获得背景图像？不幸的是，我们的代码库有一些限制，我们无法使用 UIAppearance，所以我正在寻找替代方案。

提前致谢。

编辑：我可以通过继承 UIBarButtonItem 来做到这一点，它适用于我的大多数按钮......但我特别想知道如何使用 UITableView 编辑按钮和 UINavigationController 后退按钮等默认按钮来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:28:29.157

你也可以像这样创建子类。首先我去创建 UIBarButtonItem 的子类。我的 CustomBarButtonItem.h 应该是这样的。

```
@interface CustomBarButtonItem : UIBarButtonItem

+ (CustomBarButtonItem *)sharedInstance;
- (UIBarButtonItem *)backButtonwithTarget:(id)target andAction:(SEL)action;

@end 
```

然后在我的 CustomBarButtonItem.m 里面应该是这样的。

```
@implementation CustomBarButtonItem

static CustomBarButtonItem * _sharedInstance = nil;

+ (CustomBarButtonItem *)sharedInstance
{
    if (_sharedInstance != nil)
    {
        return _sharedInstance;
    }
    _sharedInstance = [[CustomBarButtonItem alloc] init];

    return _sharedInstance;
}

- (UIBarButtonItem *)backButtonwithTarget:(id)target andAction:(SEL)action
{
    UIImage *backImage = [UIImage imageNamed:@"back_btn_normal.png"];
    UIImage *backPressed = [UIImage imageNamed:@"back_btn_hilight.png"];
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
    [backButton setBackgroundImage:backImage forState:UIControlStateNormal];
    [backButton setBackgroundImage:backPressed forState:UIControlStateHighlighted];

    const CGFloat BarButtonOffset = 5.0f;
    [backButton setFrame:CGRectMake(BarButtonOffset, 0, backImage.size.width, backImage.size.height)];

    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, backImage.size.width, backImage.size.height)];
    [containerView addSubview:backButton];

    UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:containerView];
    return item;
}
@end 
```

然后，无论您想在哪里制作自定义 NavigationItem（NavigationBar 中的按钮），您都可以在下面为我自定义代码。

```
- (void)viewDidLoad
{
    self.navigationItem.leftBarButtonItem = [[CustomBarButtonItem sharedInstance] backButtonwithTarget:self andAction:@selector(searchButtonTapped:)];
} 
```

我所有的代码都工作正常。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:20:35.993

你可以做这样的事情。刚刚将它从我的项目中复制出来。

```
 _leftBarButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:[self imageButton]]
                                                          style:UIBarButtonItemStyleBordered
                                                         target:self
                                                         action:@selector(showLeftViewController)];

    [navController.navigationBar.topItem setLeftBarButtonItem:_leftBarButton]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:31:31.157

为此：在**UINavigationBar**上创建类别并覆盖方法**drawRect**

```
@implementation UINavigationBar (CustomBackground)
 - (void)drawRect:(CGRect)rect { 
    UIImage *image = [UIImage imageNamed: @"background"]; 
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

此代码允许您更改项目中所有 UINavigationBar 的背景。

# node.js - PassportJs 的 passport.session() 与文件上传器冲突 - 不会写入文件

> ID：13363110
> 
> 赞同：2
> 
> 时间：2012-11-13T15:03:12.023
> 
> 标签：node.js, express, passport.js, valums-file-uploader

好吧，把我的头撞在墙上。我刚刚从everyauth 切换到passportjs，一切都很好，除了我实现的Valums 文件上传器。

[您可以在https://gist.github.com/4066155](https://gist.github.com/4066155)看到我的文件上传器代码的要点

我的快递 app.configure 如下所示：

```
app.configure( function () {
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/public'));
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.set('view options', {
    layout: false
  });
  app.use(passport.initialize());
  app.use(passport.session());
}); 
```

**奇怪的是，如果我注释掉 app.use(passport.session()); - 文件上传器似乎工作正常。**passport.initialize 可以保留，因为它不会引起任何问题。

如果我在代码中保留 use passport.session，则上传调用会通过，它实际上确实在我的 tmp 目录中创建了一个临时文件，但它保持为零字节。服务器从不响应 Web 客户端（无回调），并且文件实际上从未由 fs 写入。

即使是指向正确方向的指针也可能非常有帮助。如果您需要更多上下文，请告诉我。谢谢。

更新：

如果有帮助，我对 req 变量进行了比较，以查看未调用 passport.session 与调用 passport.session 时的区别。第一个差异是未调用的 passport.session，第二个是被调用的。URL：[http](http://diffchecker.com/Xk8g434Q) ://diffchecker.com/Xk8g434Q - 第 469 行很有趣，它显示了正在绑定的事件，然后在第二个文本块中，事件只是 {}（空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:52:32.380

该`passport.session()`方法调用 your `passport.deserializeUser()`，它本身通常会调用数据库来获取用户。此数据库调用延迟了开始侦听传入数据的代码的执行。也就是说，数据在没有人监听的情况下到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:14:50.160

如果有人遇到这种情况，一种解决方法虽然不理想，但只是在 PassportJS 会话中间件周围添加一层额外的中间件 - 它显然不会对文件上传进行身份验证，但到目前为止没有人回答我的问题，我仍然一直找不到它为什么会发生冲突。

这里有一些代码你可以放在 Express 的 app.configure(function () { 就在 app.use(passport.initialize()) 之后。

```
 var sessionMiddleware = passport.session()

  app.use(function(req, res, next) {
    if (req.url.match("/upload")) return next()
    console.log("Using session", req.url)
    sessionMiddleware(req, res, next)
  }) 
```

# javascript - Django，Javascript：通过 javascript innerHtml 注入 DOM 的表单在提交时崩溃 google chrome 选项卡。在 IE 中工作

> ID：13363111
> 
> 赞同：3
> 
> 时间：2012-11-13T15:03:19.697
> 
> 标签：javascript, django, google-chrome, crash, innerhtml

我编写了一个书签，它接收一个 Django 表单，并通过一个新的 div 元素的 innerHtml 将其插入 Dom，该元素是通过 javascript 创建的，并附加到现有 html 文档的正文中。第一次提交是一个 ajax 请求（工作正常），如果表单由于未知用户而被 Django 拒绝，则提交函数与 ajax 解除绑定，并在没有 ajax 的情况下重新提交到弹出窗口以验证没有 CORS 的用户。该过程在 IE 中完美运行，但在单击提交按钮时会使 chrome 选项卡崩溃。

测试：我认为可能是最初的 ajax 提交导致了问题。但是，如果我在注入时使用没有 ajax 的相同进程，提交也会失败。如果我在注入完成后从浏览器复制 html 代码并创建一个新的 html 文档，然后在 chrome 中打开它，一切正常。此外，如果我在注入之前删除包含表单字段的 div，则提交按钮可以工作。这让我相信它与在现有页面上的 Dom 加载后注入表单有关。有没有办法在不刷新页面的情况下重新加载 Dom 或强制 innerHtml 在注入时在 Dom 中正确注册？

没有控制台错误，只是一个 aww，快照！显示此网页时出现问题。

要复制问题，请按照以下步骤操作：（我在 Windows 8 上使用 Chrome 版本 23.0.1271.64 m）
**（步骤 1）**转到图像 url：itsblackcurrent.com/wp-content/uploads/2012/07/what-hi.png
**（步骤 2）**转到 chrome 控制台并输入以下代码：

```
o = document.createElement("div");
o.setAttribute("id", "overlay");
o.innerHTML = '<div class="modal fade" id="new-pin"><div class="modal-header"><h3>New Pin</h3></div><form action="" enctype="multipart/form-data" method="get" id="ajaxform" name="pin_form" class="form-horizontal"><div class="modal-body"><div id="div_id_url" class="control-group"><label class="control-label" for="id_url">URL</label><div class="controls"><input type="text" name="url" id="id_url" /></div></div><div id="div_id_image" class="control-group"><label class="control-label" for="id_image">or Upload</label><div class="controls"><input type="file" name="image" id="id_image" /></div></div><div id="div_id_description" class="control-group"><label class="control-label" for="id_description">Description</label><div class="controls"><textarea id="id_description" rows="10" cols="40" name="description"></textarea></div></div><div id="div_id_tags" class="control-group"><label class="control-label" for="id_tags">Tags</label><div class="controls"><input type="text" name="tags" id="id_tags" /></div></div></div><div class="modal-footer"><div class="messageContainer"></div><button id="btnsubmit" type="submit" class="btn btn-primary">Submit</button><a id="cancel" onclick="removeOverlay()" data-toggle="modal" class="btn">Cancel</a></div></form></div>'; 
document.body.appendChild(o); 
```

**（第 3 步）**单击提交并查看 Chrome 崩溃！

**（第 4 步）**如果在 DOM 加载之前加载完全相同的代码，它就可以工作。将以下内容粘贴到新的文本文档中并另存为 .html。

```
<body>
<script>
Copy and paste all the code from step 2 here
</script>
</body> 
```

**（第5步）**用chrome打开.html文件，提交不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:58:56.787

我想出了如何防止 chrome 崩溃并且在 IE 中也可以工作！因此，我们可以将其称为跨浏览器方式，在 dom 加载后注入表单，而不会导致 chrome 崩溃。

```
$('#form').submit(function () {
    formData = $("#form").serialize()
    window.location = "http:url.to.submitdata/?"+formData;
    return false;
}); 
```

首先，我们必须通过使用 jQuery 捕获 submit() 来创建自定义提交函数。然后序列化表单数据，并手动将表单数据附加到您要提交表单的url。最后，最重要的是 return false 停止正常的提交功能并防止 chrome 崩溃！

**如果您按照说明在我的原始问题中复制该问题，您可以通过以下方式测试 Chrome 的解决方法：**

**（第 6 步）**完成我原来问题的第 1 步和第 2 步。
**（第7步）**在chrome控制台输入以下代码：

```
s = document.createElement("script")
s.src = src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"
document.body.appendChild(s);
jQueryCheckLoad();

function jQueryCheckLoad() {
    if( window.$) {
        console.warn("jquery is ready");
        jqReady();
    } else {
        window.setTimeout( jQueryCheckLoad, 10 );
    }
}
function jqReady() {
    $( '#ajaxform' ).submit(function () {
        formData = $( "#ajaxform" ).serialize()
        window.location = "http://url.to.submitdata/?"+formData;
        return false;
    });
} 
```

**（第 8 步）**您将在控制台中看到“jQuery Ready”警告，然后单击提交和 BOOM！没有崩溃！

我们所做的只是通过创建一个返回 false 的自定义 jQuery submit() 来阻止正常的 submit() 触发。首先我们注入 jQuery，然后使用 jQueryCheckLoad() 等待 jQuery 准备好。然后绑定我们的 jQuery submit()。

*如果有人知道导致 chrome 崩溃的原因，我仍然很想知道。最奇怪的部分是，当我第一次解绑并提交表单时，它在大约 2 小时的测试中非常一致地工作，然后神秘地开始不断地崩溃。我修改了注入顺序并且没有清除书签上的缓存的可能性很小，当我这样做时它开始崩溃。这让我相信有一种方法可以在不刷新页面的情况下成功地重新加载 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T19:01:53.400

这是一个使您的 chrome 浏览器崩溃的 javascript 小书签。

```
javascript:var i = 0; while (i < 1) { window.location.reload(true); i = i - 1; }; 
```

也只有普通的 javascript 形式（基本上是一样的，但没有 javascript: 在开头，它有单独的行）。

```
var i = 0;
while (i < 1) {
window.location.reload(true);
i = i - 1;
} 
```

这是一个 url，当您在浏览器中打开它时，它会使用它来崩溃您的浏览器。

[https://codehs.com/editor/html/4767743/2616125/index.html](https://codehs.com/editor/html/4767743/2616125/index.html)

# scala - Scala 中这种隐式转换的背后是什么？

> ID：13363116
> 
> 赞同：4
> 
> 时间：2012-11-13T15:03:39.853
> 
> 标签：scala, casting

我不熟悉 Scala，在使用交互模式时遇到以下问题：

```
scala>"abc"+4
res0: java.lang.String = abc4
scala>4+"abc"
res1: String = 4abc 
```

我很好奇的是结果的类型如何不同（`java.lang.String`vs `String`）。而在《*七周七语》中，*这两种类型都是`java.lang.String`。

顺便说一句，scala 解释器的版本是 2.9.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:11:37.763

在 JVM 上，scala`String`只是`java.lang.String`. `String`Repl 有时将类型显示为有时 显示为的事实`java.lang.String`只是一个小故障（REPL 特定），不会以任何方式影响运行时行为。

对于它的价值，这是我在 scala 2.10-RC1 中得到的：

```
scala> "abc"+4
res0: String = abc4

scala> 4+"abc"
res1: String = 4abc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:39:04.837

你想要什么 ？？？

```
scala> (4+"abc").getClass.getName
res3: java.lang.String = java.lang.String

scala> ("abc"+4).getClass.getName
res5: java.lang.String = java.lang.String 
```

两者都是 java.lang.String。我认为交互式口译员只是说`String`不是`java.lang.String`。但是我们有 java.lang.String 实例。

`("abc"+4): '+' is applied to java.lang.String, and returns java.lang.String. This is true both on Java and Scala.`

`(4+"abc") on Java: '+' is applied to java.lang.Integer, and returns java.lang.String.`

`(4+"abc") on Scala: '+' is applied to scala.Int, and returns String. '+(x: String)' is defined on scala.Int.`

在交互式解释器的输出中，`type String = java.lanag.String`应用在 Predef.scala 中定义。当然，反过来没有定义。

> 这看起来很脏

我不这么认为。

> 应该是一致的，以便它们始终是 String

我不这么认为。这是一致的。

java版本“1.7.0_09”

Scala 代码运行器版本 2.9.2

# php - 在 MySQL 中执行 UNION ALL 时设置值

> ID：13363119
> 
> 赞同：1
> 
> 时间：2012-11-13T15:03:53.113
> 
> 标签：php, mysql, union

我在两张不同的桌子上做一个 UNION ALL。查询效果很好，但我需要设置一个名为`tab`1 或 2 的额外列来告诉哪个表。

示例查询：

```
SELECT * FROM news
UNION ALL
SELECT * FROM highlight 
```

在我的 php 代码中，我会做 $row['tab']==1 然后它的新闻..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:04:43.360

```
SELECT *, 1 AS `tab` FROM news
UNION ALL
SELECT *, 2 AS `tab` FROM highlight 
```

# javascript - 不接受函数作为参数的jQuery函数的名称是什么

> ID：13363126
> 
> 赞同：1
> 
> 时间：2012-11-13T15:04:20.770
> 
> 标签：javascript, jquery

这是一个理论问题：

是否有一个通用名称来指代所有不接受函数作为参数的 jQuery 函数？比如 index()、children()、height() ...

**更新：** 如果我知道名称，那么我可以提出这样的问题：“我可以将函数传递给“命名”函数吗？”

为了提供更多细节，我尝试将一个函数作为参数传递给 jQuery 的`.index()`方法，但它不起作用：

```
 textbox.closest('tr').index(function(){var index = $(this);}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:11:33.500

所有带参数的 jQuery 函数都可以带函数。在 JavaScript 中，函数是对象，jQuery 或 vanilla JavaScript 都不是类型安全的。换句话说，只要函数接受参数，它就会接受一个函数作为它的参数之一。

因此，不接受任何参数的方法是唯一不接受函数的方法。

**编辑：**

如果您想获得技术知识，那么即使不接受任何参数的方法仍将接受函数作为参数。就像 JavaScript 不是类型安全的一样，它实际上也不会强制执行有关函数签名的任何规则，即它不检查输入的参数数量是否与定义的参数数量相匹配。这就是为什么您会收到“空引用”错误（如果未处理）而不是“没有函数 [函数名称] 采用参数 [参数列表]”。这也是为什么您可以向函数传递无限数量的参数的原因，即使它只需要一个、两个或没有参数。

**更新：**

关于我对您最初问题的解决方案，我想通过添加 jQuery 是一种可靠的语言来澄清，因为它通常会在传递无效参数时简单地返回 null （但在传递不正确的数字时它不会出错论据）。JavaScript 在许多情况下是相同的，但是，正如我所暗示的和常识所决定的那样，向方法传递太多或太少的参数都是荒谬的，无论其合法性如何。

关于您的更新和评论，我认为您误解了 jQuery`.index()`方法的基本用途。如果使用得当，此方法在元素集合上调用，并以选择器（或要匹配的元素）作为参数，并返回满足给定选择器或匹配给定元素的元素第一次出现的索引.

**更新：**

从您更新的示例中，我可以看出我认为您对`.index()`函数的使用有一点误解是正确的。该函数采用选择器或元素，但您传递的函数也不返回。这是您需要的（使用您现有的语法）：

```
textbox.closest('tr').index(function(){ return $(this);}); 
```

或者（更简单）：

```
textbox.closest('tr').index($(this)); 
```

要添加更多细节（也许更好地回答您最初的问题），您还可以执行以下操作：

```
function getOnlyParagraphElements() {
    return this.tagName === "p";
}

var collection = $("body").find("*");
var firstParaIndex = collection.index(getOnlyParagraphElements); 
```

这只是一个示例（是的，我知道我可以只使用 jQuery 来获取段落），但概念是相同的 - 这就是您制作自己的选择器的方式。

另请注意，在您的示例中，您始终检查单项集合，这意味着您只会获得值`0`或值`-1`（如果元素与选择器/传入的元素不匹配）。如果您的目标是获取您正在调用该方法的元素相对于其兄弟元素的索引，那么您只需要调用该方法而不提供任何参数。

# xcode - Xcode 故事板缩放放大

> ID：13363127
> 
> 赞同：3
> 
> 时间：2012-11-13T15:04:26.073
> 
> 标签：xcode, xcode4.2, storyboard, zooming

我目前正在使用情节提要功能来定位视图。由于这些视图的性质，它们需要精确定位。

我想以大于 100% 的放大/缩放级别查看情节提要场景/视图，但似乎无法使用标准放大/缩小功能。

是否有可能做到这一点？

注意 - 我了解如何使用“尺寸检查器”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-05T20:31:44.557

看起来没有办法做到这一点，但至少有一个替代方案可以很好地工作：

1.  转到系统偏好设置 > 辅助功能 > 缩放
2.  打开键盘快捷键或滚动手势

您现在应该能够放大操作系统的任何部分，包括情节提要。

为了使编辑更容易，启用这些选项，其中一些位于更多选项...下：

*   关闭平滑图像
*   将缩放样式更改为画中画
*   窗口位置：跟随鼠标光标
*   光标样式：十字准线
*   启用临时缩放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T02:32:55.963

不，我几乎肯定不可能做到这一点。您被 100% 缩放困住了。但是，如果您需要很高的精度，您可以尝试选择要移动的元素并使用箭头键准确地移动项目。

但是，像 MacN00b 一样，我不经常使用 Storyboard，所以也许某处埋藏着一些绝密的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T02:03:25.710

这是我不使用故事板但更喜欢老式的个人 xib 的原因之一。我认为不可能放大到100%，你可以尝试双击背景，我知道通常会放大。

# php - 移动站点后的 Symfony2 APC RunTimeException

> ID：13363133
> 
> 赞同：1
> 
> 时间：2012-11-13T15:04:49.413
> 
> 标签：php, apache, symfony, apc

将我的网站从一台服务器移动到另一台服务器后，我不断收到某个 APC 错误。我检查了 APC 模块是否已安装在新模块上（常规和 cli 都是）并且所有设置似乎都正常（apc.so 已加载，权限正常，phpinfo 说它已安装，请参阅下面的 php.ini 设置） . 但是我不断收到以下错误：

```
Fatal error: Uncaught exception 'RuntimeException' with message 'Unable to use ApcUniversalClassLoader as APC is not enabled.' in /home/xxx/vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php:77 
Stack trace: 
#0 /home/xxx/app/autoload.php(6): Symfony\Component\ClassLoader\ApcUniversalClassLoader->__construct('sf2csg')
#1 /home/xxx/app/bootstrap.php.cache(3): require_once('/home/xxx/...') 
#2 /home/xxx/public_html/app.php(3): require_once('/home/xxx/...') 
#3 {main} thrown in /home/xxx/vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php on line 77 
```

我的 APC 设置：

```
[APC]
;specifies the size for each shared memory segment 8MB to start
apc.shm_size=8M
;max amount of memory a script can occupy
apc.max_file_size=1M
apc.ttl=0
apc.gc_ttl=3600
; means we are always atomically editing the files
apc.file_update_protection=0
apc.enabled=1
apc.enable_cli=1
apc.cache_by_default=1
apc.include_once_override=0
apc.localcache=0
apc.localcache.size=512
apc.num_files_hint=1000
apc.report_autofilter=0
apc.rfc1867=0
apc.slam_defense=0
apc.stat=1
apc.stat_ctime=0
apc.ttl=7200
apc.user_entries_hint=4096
apc.user_ttl=7200
apc.write_lock=1 
```

任何帮助将不胜感激，因为几个小时的谷歌搜索问题似乎没有给我比我已经拥有的更多信息。有接盘侠吗？:-)

多谢你们！

C。

# javascript - Javascript图像交换未激活功能

> ID：13363137
> 
> 赞同：0
> 
> 时间：2012-11-13T15:04:55.857
> 
> 标签：javascript, image, swap

我不是一个 javascript 编码器，所以我正在向任何可以帮助我解决我遇到的问题的人寻求任何建议，主要问题是我正在尝试交换图像，以便可以通过选择来选择它们单选按钮。

```
<script language="JavaScript">
function changeImage(newImage)
{
    if document[imageName].src = eval(newImage + ".src");
}
var img00700000232 = new Image();
img00700000232.src = "/2/00700000232.jpg";
var img00700000263 = new Image();
img00700000263.src = "/2/00700000263.jpg";
var img00700000270 = new Image();
img00700000270.src = "/2/00700000270.jpg";
var img00700000133 = new Image();
img00700000133.src = "images/TempImage.png";
var img00700000164 = new Image();
img00700000164.src = "images/TempImage.png";
var img00700000140 = new Image();
img00700000140.src = "images/TempImage.png";
var img00700000157 = new Image();
img00700000157.src = "images/TempImage.png";
</script>

</head><body>
<form name="test">
<input name="field" type="radio" value="00700000232" onchange="changeImage('img00700000232');">Prod1</input>
<br/>
<input name="field" type="radio" value="00700000263" onchange="changeImage('img00700000263');">Prod2</input>
<br/>
<input name="field" type="radio" value="00700000270" onchange="changeImage('img00700000270');">Prod3</input>
<br/>
<input name="field" type="radio" value="00700000133" onchange="changeImage('img00700000133');">Prod4</input>
<br/>
<input name="field" type="radio" value="00700000164" onchange="changeImage('img00700000164');">Prod5</input>
<br/>
<input name="field" type="radio" value="00700000140" onchange="changeImage('img00700000140');">Prod6</input>
<br/>
<input name="field" type="radio" value="00700000157" onchange="changeImage('img00700000157');">Prod7</input>
<br/>
</form>
<img name="image_name" src="images/TempImage.png" /> 
```

这是从 ASP 经典生成的代码，因此代码是在服务器端生成的，所以我不确定这是否是一个问题，或者我的代码是否有问题，任何和所有的帮助都将不胜感激。

谢谢布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:13:21.573

你有一个语法错误：

```
if document[imageName].src = eval(newImage + ".src"); 
```

应该：

```
if( document["image_name"])
  document["image_name"].src = eval(newImage + ".src"); 
```

编辑：

获取“image_name”DOM 元素的更好方法是将“name”属性更改为“id”并改用 document.getElementById。

所以，看起来像这样：

`<img id="image_name" src="images/TempImage.png" />`

```
function changeImage(newImage) 
{
  var imgEle = document.getElementById("image_name");
  if (imgEle){
      imgEle.src = eval(newImage + ".src");
  }
} 
```

此外，您不一定需要在此处使用 eval 。如果需要，您可以在 Anchor 标记中引用图像变量

所以改变这个

```
<input name="field" type="radio" value="00700000164" onchange="changeImage('img00700000164');">Prod5</input> 
```

对此

产品5

然后你必须改变你的功能

```
function changeImage(newImage) 
{
  var imgEle = document.getElementById("image_name");
  if (imgEle && newImage){
      imgEle.src = newImage.src;
  }
} 
```

# android - android-facebook-sdk 打开 facebook 页面

> ID：13363138
> 
> 赞同：0
> 
> 时间：2012-11-13T15:05:00.957
> 
> 标签：android, facebook, android-browser

我使用 facebook-android-sdk-3.0.1.b 将我的 Android 应用程序与 Facebook 集成。用户登录后（显式或隐式 - 无关紧要），调用回调：

```
@Override
protected void onSessionStateChange(SessionState state, Exception exception) {
    if (state.isOpened()) {         
        final String urlString = "http://www.facebook.com/22332332322";
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(urlString)));
    }
} 
```

如您所见，我启动了一个浏览器，向它传递了一些 Facebook 页面。我的目标是让用户“喜欢”这个页面。然而，当用户在这个页面上按下“like”按钮时，他被要求授权。这不好，因为他已经授权了。

我很感兴趣是否可以从 facebook-android-sdk 中提取授权信息（访问令牌或其他）并将此信息传递给浏览器？

**更新**

我发现可以获取会话的访问令牌：

```
final String accessToken = getAccessToken(); 
```

但是如何将它传递给浏览器以使用户登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:15:22.790

我们也有这个问题。在我们的例子中，我们假设如果用户有 Facebook 帐户，他的设备上也有 Facebook 应用程序。因此，在这种情况下，当用户按下“关注我们”按钮时，我们只需打开带有我们页面的 Facebook 应用程序，用户只需按下“喜欢”按钮即可。

如果用户在他的设备上没有应用程序，我们会打开带有 Facebook 页面的浏览器。

你可以这样做：

```
try{

Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/22332332322)); 
startActivity(intent);

}catch(Exception e){

startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com/22332332322")));
} 
```

另一种可能性是使用 Facebook API 中的单点登录，这是一种对用户更友好的方法。用户可以看到您到底想要什么，并且可以授权或不授权。

如您所说，您可以获得访问令牌，**但我认为您不能将其传递给浏览器**。半年前我试过了，没有找到任何答案。

您可以查看我的问题，它可能会帮助您：

[链接1](https://stackoverflow.com/questions/11327799/open-page-in-facebook-twitter-and-google-plus-app-from-other-app-android)

[链接2](https://stackoverflow.com/questions/11134371/how-to-stay-connected-to-facebook-in-an-android-application)

[链接3](https://stackoverflow.com/questions/11117516/move-to-the-facebook-application-page-after-authenticate-through-single-sign-on)

[链接4](https://stackoverflow.com/questions/11103256/use-facebook-authentication-for-an-android-application)

# c# - 使用带有 IEnumerable 自定义类的 ViewModel 设置下拉列表

> ID：13363140
> 
> 赞同：0
> 
> 时间：2012-11-13T15:05:08.557
> 
> 标签：c#, asp.net-mvc, razor

我已将 ddl 更改为使用视图模型而不是 viewbag，但出现此错误：

没有“IEnumerable”类型的 ViewData 项

在我的视图模型中：

```
public IEnumerable<TimeZone> TimeZones
{
   List<TimeZone> timeZones = new List<TimeZone>();
   timeZones.Add(new TimeZone { TimeZoneName = "Eastern", TimeZoneOffset = -5 });
} 
```

我的观点：

```
@Html.DropDownList("timeZone", Model.TimeZones as SelectList, new { @class = "ddl" }) 
```

我的自动映射

```
.ForMember(dest => dest.TimeZones, opt => opt.Ignore()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:16:06.057

`Model.Timezones`是您示例中的类型`List<TimeZone>`。

`List<TimeZone>`无法转换为，`SelectList`因此代码`Model.TimeZones as SelectList`将返回`null`.

而不是演员表，使用`new SelectList(Modle.TimeZones, "TimeZoneOffset", "TimeZoneName")`.

# performance - Haskell 中 hFlush 的 CPU 使用率高

> ID：13363142
> 
> 赞同：2
> 
> 时间：2012-11-13T15:05:12.797
> 
> 标签：performance, haskell, bytestring

我发现以下 Haskell 代码使用 100% CPU 并在我的 Linux 服务器上完成大约需要 14 秒。

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import qualified Data.ByteString.Lazy.Char8 as L
import System.IO

str = L.pack "FugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFuga\n"

main = do
  hSetBuffering stdout (BlockBuffering (Just 1000))
  sequence (take 1000000 (repeat (L.hPutStr stdout str >> hFlush stdout)))
  return () 
```

另一方面，非常相似的 Python 代码在大约 3 秒内完成相同的任务。

```
import sys

str = "FugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFuga\n"

def main():
    for i in xrange(0, 1000000):
        print str,
        sys.stdout.flush()
        # doIO()

main() 
```

通过使用 strace，我发现在 Haskell 版本中每次调用 hFlush 时都会调用 select。另一方面，在 Python 版本中不调用 select。我想这是 Haskell 版本慢的原因之一。

有什么方法可以提高 Haskell 版本的性能吗？

我已经尝试省略 hFlush，它确实大大降低了 CPU 使用率。但是这个解决方案不能令人满意，因为它不会冲洗。

谢谢。

**已编辑**

非常感谢您的帮助！通过将序列和重复更改为 replicateM_，运行时间从 14 秒减少到 3.8 秒。

但现在我有另一个问题。我问了上面的问题，因为当我从上面的程序中删除 hFlush 时，尽管它使用序列和重复重复 I/O，但它运行得很快。

为什么只有 sequence 和 hFlush 的组合使它变慢？

为了确认我的新问题，我改变了我的程序如下进行分析。

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import qualified Data.ByteString.Char8 as S
import System.IO
import Control.Monad

str = S.pack "FugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFuga\n"

doIO = S.hPutStr stdout str >> hFlush stdout
doIO' = S.hPutStr stdout str >> hFlush stdout
doIOWithoutFlush = S.hPutStr stdout str

main = do
  hSetBuffering stdout (BlockBuffering (Just 1000))
  sequence (take 1000000 (repeat doIO))
  replicateM_ 1000000 doIO'
  sequence (take 1000000 (repeat doIOWithoutFlush))
  return () 
```

通过编译运行如下：

```
$ ghc -O2 -prof -fprof-auto Fuga.hs
$ ./Fuga +RTS -p -RTS > /dev/null 
```

我得到了以下结果。

```
COST CENTRE      MODULE  %time %alloc

doIO             Main     74.7   35.8
doIO'            Main     21.4   35.8
doIOWithoutFlush Main      2.6   21.4
main             Main      1.3    6.9 
```

执行相同任务的 doIO 和 doIO' 有什么区别？为什么 doIOWithoutFlush 即使按顺序重复运行也很快？有没有关于这种行为的参考？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T15:17:06.850

在每次写入时调用 hFlush 似乎是错误的。

这个简单的改变，使用严格的字节串，`forM_`或者`replicateM_`代替你的显式`sequence`和块缓冲，将运行时间从 16.2s 减少到 0.3s

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import qualified Data.ByteString.Char8 as S
import Control.Monad
import System.IO

str = S.pack "FugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFuga\n"

main = replicateM_ 1000000 $ S.putStr str 
```

虽然更惯用的是使用惰性字节串的单次写入，但依靠字节串子系统来协调写入。

```
import qualified Data.ByteString.Char8 as S
import qualified Data.ByteString.Lazy.Char8 as L
import Control.Monad
import System.IO

str :: S.ByteString
str = S.pack "FugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFugaFuga\n"

main = L.putStr $ L.fromChunks (replicate 1000000 str) 
```

性能略有提高（0.27 秒）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T15:17:31.863

我不确定 Python 代码（什么是`doIO()`？），但是改进 Haskell 的一个明显方法是使用`sequence_`而不是`sequence`，因此它不需要建立庞大的`()`s 列表。这个小小的改变使它在我的机器上快了 6-7 倍。

（表达该行的更简单方法是`replicateM_ 1000000 (L.hPutStr stdout str >> hFlush stdout)`。）

可能是系统调用的数量很大——GHC 的 RTS 确实进行了非阻塞 I/O，并且可能会进行不必要`select`的调用——但是根据你的数字，这个变化可能足以让它进入 Python 的范围它自己的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T15:21:11.513

最大的问题是

```
sequence (take 1000000 (repeat (L.hPutStr stdout str >> hFlush stdout))) 
```

收集`IO`列表中执行的操作的结果。如果你丢弃结果，

```
sequence_ (take 1000000 (repeat (L.hPutStr stdout str >> hFlush stdout))) 
```

它会更快，并且分配更少。

# asp.net - 列名作为参数

> ID：13363143
> 
> 赞同：2
> 
> 时间：2012-11-13T15:05:11.787
> 
> 标签：asp.net, sql, select

我在 SQL 表中有一些列，例如 text_en、text_es、text_de。现在我想根据语言从一列中检索值。所以我创建了一个 sql 字符串 `SELECT @textfield FROM <table>` 并在我使用的 vb 代码中 `cmd.AddWithValue("textfield", "text_" + lang)` 但是 sql 返回列的名称而不是该列的值。我怎样才能获得价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:14:54.653

你也可以做

```
SELECT CASE @textfield
         WHEN 'text_en' THEN text_en
         WHEN 'text_es' THEN text_es
         WHEN 'text_de' THEN text_de
       END AS local_text
FROM TableName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:07:46.693

不要将其作为参数传递，将其作为字符串文字传递。您的 sql 语句应采用以下形式：

```
string col1name = 'somename';
string sql = 'SELECT ' + col1name + ' FROM TableName'; 
```

但是，如果您将参数传递给`WHERE`子句，则应将其作为参数传递，就像您在问题中所做的那样。

**请注意：**您的查询，这种方式容易受到[***SQL Injection***](http://en.wikipedia.org/wiki/SQL_injection)的攻击。在您的情况下，您可以将连接的 SQL 语句传递给存储过程，然后使用`sp_executesql`，而不是`EXEC()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:09:16.313

无论如何，您不能使用变量是 SQL 中的列名，而不是这样。

您需要使用动态 SQL 来指定这样的列名。

我建议阅读[The Curse and Blessings of Dynamic SQL](http://www.sommarskog.se/dynamic_sql.html)以全面了解该主题。

# linux - Oracle Virtual Server OEL vm 无法启动 - cpu 识别时出现内核崩溃

> ID：13363144
> 
> 赞同：2
> 
> 时间：2012-11-13T15:05:13.813
> 
> 标签：linux, virtual-machine

我正在按照指南设置各种 oracle vm 模板，到目前为止，我已经安装了 OVS 2.2 并让 OVM Manager 工作，导入了 OEL5U5 的模板并从中创建了一个 vm.. 开始时出现问题那个虚拟机。

OVMM 控制台中的日志显示如下；

```
Update VM Status - Running
Configure CPU Cap
Set CPU Cap: failed:<Exception: failed:<Exception: ['xm', 'sched-credit', '-d',  
'32_EM11g_OVM', '-c', '0'] => Error: Domain '32_EM11g_OVM' does not exist.

StackTrace:
File "/opt/ovs-agent-2.3/OVSXXenVMConfig.py", line 2531, in xen_set_cpu_cap
run_cmd(args=['xm',
File "/opt/ovs-agent-2.3/OVSCommons.py", line 92, in run_cmd
raise Exception('%s => %s' % (args, err)) 
```

xend.log 显示；

```
[2012-11-12 16:42:01 7581] DEBUG (DevController:139) Waiting for devices vtpm
[2012-11-12 16:42:01 7581] INFO (XendDomain:1180) Domain 32_EM11g_OVM (3) unpaused. 
[2012-11-12 16:42:03 7581] WARNING (XendDomainInfo:1907) Domain has crashed: name=32_EM11g_OVM id=3.
[2012-11-12 16:42:03 7581] ERROR (XendDomainInfo:2041) VM 32_EM11g_OVM restarting too fast (Elapsed time: 11.377262 seconds). Refusing to restart to avoid loops .>
[2012-11-12 16:42:03 7581] DEBUG (XendDomainInfo:2757) XendDomainInfo.destroy: domid=3
[2012-11-12 16:42:12 7581] DEBUG (XendDomainInfo:2230) Destroying device model
[2012-11-12 16:42:12 7581] INFO (image:553) 32_EM11g_OVM device model terminated 
```

我在 vm.cfg 中有 set_on_crash="preserve" ，然后运行 ​​xm create -c 以在启动时获取控制台屏幕，这是发生的日志。

```
Started domain 32_EM11g_OVM (id=4)
Bootdata ok (command line is ro root=LABEL=/ )
Linux version 2.6.18-194.0.0.0.3.el5xen (mockbuild@build.example.com) (gcc 
version 4.1.2 20080704 (Red Hat 4.1.2-48)) #1 SMP Mon Mar 29 18:27:00 EDT 2010
BIOS-provided physical RAM map:
Xen: 0000000000000000 - 0000000180800000 (usable)>
No mptable found.
Built 1 zonelists. Total pages: 1574912
Kernel command line: ro root=LABEL=/
Initializing CPU#0
PID hash table entries: 4096 (order: 12, 32768 bytes)
Xen reported: 1600.008 MHz processor.
Console: colour dummy device 80x25
Dentry cache hash table entries: 1048576 (order: 11, 8388608 bytes)
Inode-cache hash table entries: 524288 (order: 10, 4194304 bytes)
Software IO TLB disabled
Memory: 6155256k/6299648k available (2514k kernel code, 135548k reserved, 1394k data, 184k init)
Calibrating delay using timer specific routine.. 4006.42 BogoMIPS (lpj=8012858)
Security Framework v1.0.0 initialized
SELinux: Initializing.
selinux_register_security: Registering secondary module capability
Capability LSM initialized as secondary
Mount-cache hash table entries: 256
CPU: L1 I Cache: 64K (64 bytes/line), D cache 16K (64 bytes/line)
CPU: L2 Cache: 2048K (64 bytes/line)
general protection fault: 0000 [1] SMP
last sysfs file:
CPU 0
Modules linked in:
Pid: 0, comm: swapper Not tainted 2.6.18-194.0.0.0.3.el5xen #1
RIP: e030:[ffffffff80271280] [ffffffff80271280] identify_cpu+0x210/0x494
RSP: e02b:ffffffff80643f70 EFLAGS: 00010212
RAX: 0040401000810008 RBX: 0000000000000000 RCX: 00000000c001001f
RDX: 0000000000404010 RSI: 0000000000000001 RDI: 0000000000000005
RBP: ffffffff8063e980 R08: 0000000000000025 R09: ffff8800019d1000
R10: 0000000000000026 R11: ffff88000102c400 R12: 0000000000000000
R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
FS: 0000000000000000(0000) GS:ffffffff805d2000(0000) knlGS:0000000000000000
CS: e033 DS: 0000 ES: 0000
Process swapper (pid: 0, threadinfo ffffffff80642000, task ffffffff804f4b80)
Stack: 0000000000000000 ffffffff802d09bb ffffffff804f4b80 0000000000000000
0000000021100800 0000000000000000 0000000000000000 ffffffff8064cb00
0000000000000000 0000000000000000
Call Trace:
[ffffffff802d09bb] kmem_cache_zalloc+0x62/0x80
[ffffffff8064cb00] start_kernel+0x210/0x224
[ffffffff8064c1e5] _sinittext+0x1e5/0x1eb
Code: 0f 30 b8 73 00 00 00 f0 0f ab 45 08 e9 f0 00 00 00 48 89 ef
RIP [ffffffff80271280] identify_cpu+0x210/0x494
RSP ffffffff80643f70
0 Kernel panic - not syncing: Fatal exception 
```

对我来说清如泥。

还有其他日志可以帮助我吗？

我现在已经从同一个模板部署了另一个 vm，并使用了默认的 vm 设置，而不是添加更多的内存等——我得到了完全相同的错误。

# jquery - 在 UpdatePanel 中使用 JQuery 按需加载

> ID：13363145
> 
> 赞同：0
> 
> 时间：2012-11-13T15:05:14.153
> 
> 标签：jquery, asp.net, updatepanel

我的问题是关于控件 UpdatePanel。

**UpdatePanel**：基本上我的页面上几乎没有 UpdatePanel，它们加载网络数据的成本很高，所以有时我不需要加载所有内容，这就是为什么我想了解如何按需加载 UpdatePanel 中的内容。

**使用 JQuery**：UpdatePanels 的加载应该通过 JQuery 函数调用进行，所以我不知道如何，但是使用 JQuery 我应该能够说“LoadUpdatePanel(“idOfUpdatePanel”)”并且它应该加载它的内容。

知道如何通过使用 UpdatePanel 和 JQuery 来解决这个问题，或者我应该在哪个方向进行调查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:00:17.910

你不能用 UpdatePanel 做到这一点。UpdatePanel 会自动连接所有的帖子数据，包括视图状态，以及后面的代码。

您不能只获得一个 UpdatePanel 就运行后面的代码，必须运行整个循环。

## 你可以做什么

您可以通过检查请求是否来自同一个 UpdatePanel 来避免在某些函数后面运行代码。

例如，假设您有 4 个更新面板，并且更新面板 2 被回发。然后在页面加载的其余更新面板上，您可以执行类似的操作

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsUpdatePanelInRendering(Page, upUpdatePanelId))
    {
        // run the code for update panel 1, me
        // ...
    }
} 
```

其中 IsUpdatePanelInRendering ：

```
public static bool IsUpdatePanelInRendering(Page page, UpdatePanel panel)
{
    Debug.Assert(HttpContext.Current != null, "Where are you called ? HttpContext.Current is null ");
    Debug.Assert(HttpContext.Current.Request != null, "Where are you called HttpContext.Current.Request is null ");

    // if not post back, let it render
    if (false == page.IsPostBack)
    { 
        return true; 
    }
    else
    {
        try
        {
            // or else check if need to be update
            ScriptManager sm = ScriptManager.GetCurrent(page);

            if (sm != null  && sm.IsInAsyncPostBack)
            {
                Debug.Assert(HttpContext.Current.Request.Form != null, "Why forms are null ?");

                string smFormValue = HttpContext.Current.Request.Form[sm.UniqueID];

                if (!string.IsNullOrEmpty(smFormValue))
                {
                    string[] uIDs = smFormValue.Split("|".ToCharArray());
                    if (uIDs.Length == 2)
                    {
                        if (!uIDs[0].Equals(panel.UniqueID, StringComparison.InvariantCultureIgnoreCase))
                        {
                            return false;
                        }
                    }
                }
            }
        }
        catch (Exception x)
        {
            Debug.Fail("Ops, what we lost here ?");
        }

        return true;
    }
} 
```

相对：
[如何限制 UpdatePanel 上的帖子值数量？](https://stackoverflow.com/questions/2771895/how-to-limit-the-number-of-post-values-on-updatepanel)
[如何防止用户控制代码在异步回发中运行？](https://stackoverflow.com/questions/6780140/how-to-prevent-user-controls-code-behind-running-in-async-postbacks)

## 直接ajax调用

更好但困难的解决方案是删除 UpdatePanel，并使用 ajax 调用手动进行更新。

在这种情况下，您可以使用 jQuery 和部分发送、部分更新页面上的任何内容，以最低的数据发送和操作成本 - 但具有更多的代码和设计。

# ios - 添加到主屏幕时 Cookie 未保存在 Safari 中

> ID：13363149
> 
> 赞同：0
> 
> 时间：2012-11-13T15:05:22.810
> 
> 标签：ios, jquery-mobile, cookies, safari, jquery-cookie

嘿，我正在使用以下代码设置 cookie 并获取它：

```
 $.cookie('SimMobileUsername', $('#user_id').val());

  if($.cookie('SimMobileUsername') != "null" && $.cookie('SimMobileUsername') != null); {

    $('#user_id').val($.cookie('SimMobileUsername'));

    } 
```

效果很好，但是当我将网页添加到主屏幕时，它不会保存 cookie。

**重要的：**

我已经阅读了 safari 缓存主屏幕页面，所以我尝试使用以下代码在启动时刷新页面 1 次，但这也无济于事：

```
 var url = window.location.href;
if (url.indexOf('rnd=') == -1) {
    url = (url.indexOf("?") == -1 ? url + "?rnd=" : url + "&rnd=") + Math.random();
    window.location.href = url;
} 
```

关于这个主题的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:11:45.127

最后，我使用 ios 中的 localStorage 而不是 cookie 解决了这个问题，如果有人要正确回答问题，我会将其标记为正确答案。

# c++ - 部署多个 DLL

> ID：13363155
> 
> 赞同：1
> 
> 时间：2012-11-13T15:05:36.887
> 
> 标签：c++, windows, visual-studio-2010, dll

假设我有多个 DLL：d1.dll、d2.dll ... d10.dll。它们都在同一个文件夹中。我还指向我的环境->路径中的那个文件夹。问题是：有没有办法我可以编写一个`master.dll`，在部署时，将部署 d1.dll ... d10.dll？这`master.dll`可能是微不足道的，只提供我的软件的版本信息，但它的主要任务是部署其他 DLL。

我正在 Windows 上使用 C++ Visual Studio 2010 进行开发。我怎么写这个`master.dll`？最好能详细解释一下。

# java - 播放框架1.2.4：play.exceptions.MailException的构造函数中的NullPointerException

> ID：13363163
> 
> 赞同：0
> 
> 时间：2012-11-13T15:06:09.237
> 
> 标签：java, playframework

问题如下：

在运行异常的 webapp 中发送邮件时，`Play framework 1.2.4`可以在日志中观察到以下堆栈跟踪：

```
Execution exception 
NullPointerException occured : null 

play.exceptions.JavaExecutionException 
        at play.mvc.ActionInvoker.invoke(ActionInvoker.java:231) 
        at Invocation.HTTP Request(Play!) 
Caused by: java.lang.NullPointerException 
        at play.exceptions.MailException.<init>(MailException.java:27) 
        at play.libs.Mail.buildMessage(Mail.java:79) 
        at play.libs.Mail.send(Mail.java:35) 
        at play.mvc.Mailer.send(Mailer.java:347) 
        at play.mvc.Mailer.sendAndWait(Mailer.java:355) 
        at notifiers.Mails.forgotPassword(Mails.java:19) 
        at controllers.PasswordReset.requestPasswordReset(PasswordReset.java:102) 
        at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548) 
        at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502) 
        at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 
        at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473) 
        at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) 
        ... 1 more 
```

这里的相关部分如下：

```
Caused by: java.lang.NullPointerException 
        at play.exceptions.MailException.<init>(MailException.java:27) 
```

这表明这是从（第 27 行）`NullPointerException`的构造函数中抛出的。`play.exceptions.MailException`此构造函数的源代码如下所示：

```
public MailException(String message, Throwable cause) {
    super(message, cause);
    StackTraceElement element = getInterestingStrackTraceElement(cause);
    if(element != null) {
        ApplicationClass applicationClass = Play.classes.getApplicationClass(element.getClassName());
        sourceFile = applicationClass.javaFile.relativePath(); // this line is 27th and NPE is thrown from here
        source = Arrays.asList(applicationClass.javaSource.split("\n"));
        line = element.getLineNumber();
    }
} 
```

所以`applicationClass`局部变量或`javaFile`属性都为空。熟悉`Play framework`奇怪内部结构的人可以建议导致此问题的原因吗？

非常感谢提前

## `Seb Cesbron`回答后编辑

我们还检查`play.libs.Mail.buildMessage(Mail.java:79)`了清楚地看到`from`地址为空的地方，但在修复之后，弹出了类似的异常：

```
play.exceptions.JavaExecutionException
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:231)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at play.exceptions.MailException.<init>(MailException.java:27)
    at play.mvc.Mailer.send(Mailer.java:349)
    at play.mvc.Mailer.sendAndWait(Mailer.java:355)
    at notifiers.Mails.forgotPassword(Mails.java:19)
    at controllers.PasswordReset.requestPasswordReset(PasswordReset.java:102)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) 
```

在那里，`play.mvc.Mailer.send`方法包含近 200 行代码，包含在`try-catch`块中，因此找出问题所在非常棘手：)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:40:42.040

Mail.java 中的第 79 行引用了 throw MailException，因为没有发件人地址。

MailException 中的 NullPointerException 似乎表明没有与您的邮件关联的文件。您确定文件 Mails/forgotPassword.html（或 txt）存在吗？

# javascript - Magento 管理面板丢失

> ID：13363164
> 
> 赞同：0
> 
> 时间：2012-11-13T15:06:09.943
> 
> 标签：javascript, magento

几个月来我们一直很高兴使用 magento，但后来发现这个问题我们无法跟踪到系统上的日期或更改，并且不知如何解决。

我们的管理面板丢失了一个名为“批量操作”的 div，所以现在我们无法批量选择

见附上的截图，我们的开发箱有项目，但现场服务器丢失了它。

[https://dl.dropbox.com/u/31039169/screenshot-admin.jpg](https://dl.dropbox.com/u/31039169/screenshot-admin.jpg)

所有核心 js 文件未经编辑。

关于如何解决的任何想法？

# java - 将数据从 java 传递到 cups 过滤器

> ID：13363170
> 
> 赞同：7
> 
> 时间：2012-11-13T15:06:25.853
> 
> 标签：java, linux, bash, printing, cups

我正在研究打印系统，需要向每个打印的文档添加任意文本（如作者、文档哈希、一些系统变量等）。我们使用 Java 打印服务 (javax.print) 作为打印客户端，使用 Cups 作为服务器。

Cups 有一些称为“过滤器”的文档后处理程序。

*Filter - 是一个程序，将由 Cups 推出。Cups pass 过滤了一些参数——其中的“工作属性”。*

因此，我决定将自定义属性从 java 传递给 cups，并将属性作为文本添加到过滤器中的文档中。一切正常，打印文档，但我没有在过滤器中获得我的属性。它们甚至没有传递给 Cups（在数据包嗅探器中看到）。

我已经使用 getSupportedAttributeCategories() 查看支持的（由打印机？）属性列表。也许我应该以某种方式将我的添加到该列表中，但我不明白如何。

我不限于“属性”，**我只需要将任意数据从 java 传递到 Cups filter**。我该怎么做？

我的java代码是这样的：

```
MyAttrSet attrs = new MyAttrSet();
attrs.add(new MyAttr(42));
attrs.add(new Copies(18));  

PrintService service = PrintServiceLookup.lookupDefaultPrintService();
DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
Doc doc = new SimpleDoc(is, flavor, null);
DocPrintJob job = service.createPrintJob();

job.print(doc, attrs); 
```

Filter 是一个简单的 bash 脚本，它打印传递给它的所有内容：

```
#!/bin/bash
echo "All args:" > /tmp/f1.log
for var in "$@"
do
        echo "$var, " >> /tmp/f1.log
done 
```

/tmp/f1.log 看起来像：

```
All args:
87, 
oroboros, 
 Java Printing, 
18, <- number of pages is passed! But not MyAttr
some useless crap like job uuid and else... 
```

我的属性：

```
class MyAttr extends IntegerSyntax implements PrintRequestAttribute {

    protected MyAttr(int value) {
        super(value);
    }

    public Class<? extends Attribute> getCategory() {
        // TODO Auto-generated method stub
        return MyAttr.class;
    }

    public String getName() {
        // TODO Auto-generated method stub
        return "somemycustop5";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:17:56.907

你可以使用cups4j

```
Map attributes = new HashMap();
attributes.put("job-attributes", "print-quality:enum:3#media:keyword:iso_a5_148x210mm");
printJob.setAttributes(attributes); 
```

请参阅以下关于 Linux 上的 CUPS 升级如何破坏 Java 库和 CUPS 库的文章： [http ://www.cups.org/articles.php?L433+TFAQ+Q](http://www.cups.org/articles.php?L433+TFAQ+Q)

现在，既然您可以打印，我认为这不是问题。但我不确定 MyAttrSet 是什么，它应该是**HashPrintRequestAttributeSet**。

尝试：

```
PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
aset.add(new Copies(2)); 
```

看看这个属性是否被读入，然后尝试将你的添加到这样的集合中，它是否有效。您可能想尝试实现其他属性：

Sides 属性如下所示：

```
public class Sides
  extends EnumSyntax
  implements DocAttribute, PrintRequestAttribute, PrintJobAttribute
  {
  public final Object getCategory()
    {
    return Sides.class;
    }
  ...
  } 
```

类似副本：

```
public final class Copies
extends IntegerSyntax
implements PrintRequestAttribute, PrintJobAttribute 
```

也许尝试添加 PrintJobAttribute 的其他实现

# javascript - 正则表达式以捕获尽可能多的 Javascript 重定向

> ID：13363174
> 
> 赞同：2
> 
> 时间：2012-11-13T15:06:30.437
> 
> 标签：javascript, python, regex, redirect

我试图从许多 HTML 页面中捕获尽可能多的 Javascript 重定向。我的正则表达式是：

```
((location.href)|(window.location)|(location.replace)|(location.assign))(( ?= ?)|( ?\( ?))("|')([^'"]*)("|')( ?\) ?)?; 
```

我使用 Python，但问题很笼统：

```
regex = re.compile(r"""((location.href)|(window.location)|(location.replace)|(location.assign))(( ?= ?)|( ?\( ?))("|')([^'"]*)("|')( ?\) ?)?;""", re.I)
# ... some control here ...
print re.search(regex, html).group(10)  # 10 is the pure url 
```

我做了一些测试，我能够捕捉到所有这些情况。

```
location.href = "http://www.foo.com";
location.href="http://www.foo.com";
window.location = "http://www.foo.com";
window.location.href = "http://www.foo.com";
location.replace ("http://www.foo.com");
location.replace( "http://www.foo.com" ) ;
location.assign ("http://www.foo.com"); 
```

并跳过我无法解析 URL 的地方，因为代码包含一个变量：

```
location.href = "http://www.foo.com" + var + "something else"; 
```

问题是：

1.  还有其他使用 Javascript 重定向的方法吗？其他`location.somethingelse`我想念的？
2.  我抓住这4个案例的方式是否正确？是否允许有类似的东西，`location.href = http://www.foo.com;`或者`location.replace (http://www.foo.com);`我会因为（双）引号而错过？我是太严格还是太松懈？
3.  我的正则表达式写得好吗？或者我可以以某种方式改进它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:15:23.857

一般来说，你不能用正则表达式解析编程语言（好吧，理论上[你可以](https://stackoverflow.com/a/11382641/989121)，但这是非常不切实际的）。这对于 javascript 来说尤其如此，因为它具有高度动态性。例如，

```
 window['loc' + 'a' + 'tion'][['h','r','e','f'].join('')] = 'something'.replace(/s/, etc...) 
```

也就是说，这是一个至少通过了您的测试的表达式（为清楚起见进行了分解）：

```
# quoted string
str = r"""
    ' (?:\\.|[^'])* '
    |
    " (?:\\.|[^"])* "
"""
# dotted reference to "location"
loc = r"""
    (?: \w+\.)*
    \b location \b
    (?: \.\w+)*
"""

# ref=string or ref(string)
expr = r"""
    ({0})
    \s*
    (?:
        = \s* ({1})
        |
        \( \s* ({1}) \s* \)
    )
    \s*
    ;
""".format(loc, str) 
```

在扩展模式下编译它，例如

```
expr = re.compile(expr, re.X) 
```

# android - 填充不适用于某些背景资源

> ID：13363183
> 
> 赞同：10
> 
> 时间：2012-11-13T15:06:57.337
> 
> 标签：android, android-view

谁能向我解释为什么会这样？

我有一个相当简单的类扩展 TextView。当我将背景颜色设置为 Color.BLUE 时，填充效果很好。当我将背景资源更改为 android.R.drawable.list_selector_background 时，我的填充不再应用。什么F？

这是我的 UI 类：

```
public class GhostDropDownOption extends TextView {

    TextView text_view;

    public GhostDropDownOption(Context context, AttributeSet attrs) {
        super(context, attrs);
        setup(context);
    }

    public GhostDropDownOption(Context context) {
        super(context);
        setup(context);
    }

    private void setup(Context context) {
        this.setClickable(false);
        // THE 2 LINES BELOW ARE THE ONLY THING I'M CHANGING
        //this.setBackgroundResource(android.R.drawable.list_selector_background);
        this.setBackgroundColor(Color.BLUE);
    }
} 
```

我在这样的布局中使用它：

```
<trioro.voyeur.ui.GhostDropDownOption
    android:id="@+id/tv_dropdown_option_1"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:text="@string/request_control_dropdown_option_1"
    android:textColor="#000000"
    android:padding="10dip"/> 
```

这是改变背景的结果： ![在此处输入图像描述](../Images/278570573fada748013e3d5487b0dff4.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T15:14:40.967

呼吁：

```
this.setBackgroundResource(android.R.drawable.list_selector_background); 
```

将删除任何先前设置的填充（这是为了使其与 9-patch 资产一起正常工作）。

尝试在上面一行之后的代码中设置填充，如下所示：

```
this.setPadding(PADDING_CONSTANT, PADDING_CONSTANT, PADDING_CONSTANT, PADDING_CONSTANT); 
```

请记住，发送到 setPadding 的值是像素而不是下降！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:20:56.333

如果可能的话，您应该在 XML 中设置您的背景可绘制对象。如果您在代码中设置它，它将使用可绘制资源中的填充而不是您在 XML 中设置的填充，因此如果需要以编程方式进行，您将需要检索当前填充，临时存储它，设置背景，然后按照@TofferJ 的建议设置填充。

原因是可绘制对象本身可以有填充，在 9-patch 图像的情况下（底部和右侧像素边界定义填充量）。

您的解决方案应该是在 XML 中设置您的背景资源：

`android:background="@android:drawable/list_selector_background"`

尽管我相信这可能是一个私有的可绘制资源，您必须首先将其复制到您的项目中。

# objective-c - UILocalNotification：在特定日期全部取消

> ID：13363185
> 
> 赞同：0
> 
> 时间：2012-11-13T15:07:05.447
> 
> 标签：objective-c, ios, uilocalnotification

我的应用只需要在工作日触发警报。我的想法是安排每天的通知，但问题是我读到 64 个预定通知是您可以拥有的最大值，而我的通知将总共有 120 个通知，因此无法做到这一点。

现在我想知道是否有办法取消周六和周日的所有通知。

我现在使用的代码在周末重复通知：

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setHour:8];
    [comps setMinute:25];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *fireDate = [gregorian dateFromComponents:comps];

    UILocalNotification *alarm = [[UILocalNotification alloc] init];

    alarm.fireDate = fireDate;
    alarm.repeatInterval = NSDayCalendarUnit;
    alarm.soundName = @"sound.aiff";
    alarm.alertBody = @"Message..";
    alarm.timeZone = [NSTimeZone defaultTimeZone];
    [[UIApplication sharedApplication] scheduleLocalNotification:alarm]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:05:42.983

看`[UIApplication scheduledLocalNotifications]`，您已经安排了所有通知。

它是一个数组`UILocalNotification`。

使用此数组创建一个循环并查看`fireDate`通知的日期，然后执行以下操作：

```
[UIApplication cancelLocalNotification:theNotificationToDelete]; 
```

# sitecore - Sitecore - 电子邮件营销经理：在线版本上未替换 $fullname$

> ID：13363190
> 
> 赞同：0
> 
> 时间：2012-11-13T15:07:26.957
> 
> 标签：sitecore, sitecore6, sitecore-ecm

对于我的时事通讯实施，我定义了这样的文本：

你好$全名$，

发送电子邮件时，变量被正确替换。用户将看到他的名字。在时事通讯中，允许读者在线阅读时事通讯。通过一个链接，他将被重定向到一个网站。在在线版本上，变量没有被替换。

用户将阅读 Hello $fullname$,

有什么应该配置/开发的吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:39:17.200

您应该将名为**Process Personalization Tokens**的子布局添加到项目 Presentation。以标准模块模板（如**One Column Message**）为例。

# html - HTML/CSS 表单样式

> ID：13363193
> 
> 赞同：2
> 
> 时间：2012-11-13T15:07:32.793
> 
> 标签：html, css, forms, upload, styles

我正在尝试创建一个文件共享网站，但在设置上传表单时遇到了问题，因为我的设计非常先进，而不是设置我试图将设计设置为背景图像的个人样式。

这是我的设计 - [http://icap.me/i/s5YIbheY3g.png](http://icap.me/i/s5YIbheY3g.png)

这是目前的努力 - [http://icap.me/i/ODuzJOQMhS.png](http://icap.me/i/ODuzJOQMhS.png)

到目前为止，我使用以下代码设置了上传按钮的样式 -

```
form input[type=submit] {
background : url("../img/upload.png") no-repeat center center;
width : 115px;
height :52px;
border : none;
color : transparent;
font-size : 0 
```

}

你知道我如何使用图像来设置我的其他表单按钮的样式吗？这里是 html -

```
 <form action="upload_file.php" method="post"enctype="multipart/form-data">
        <input type="file" name="file" id="file" />
        <br />
        <input type="submit" name="submit" value="Submit" />
        <input type="checkbox" name="vehicle" value="Bike">I agree to the terms and conditions<br>
        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:21:19.037

设计一些表单元素很糟糕，不幸的是，文件元素就是其中之一。这是因为浏览器实际上是从操作系统中派生出控件本身（这意味着您完全无法控制它的外观）。这对您意味着，为了设置样式，您将需要 JavaScript 和一些 CSS hackary。

[Quirksmode 有一个很好的一步一步](http://www.quirksmode.org/dom/inputfile.html)来做，至少可以让你开始。

但是，其中的基础是：

1.  使用 .为您的正常文件输入设置样式`position: relative`。
2.  添加一个新的纯旧文本输入并将其放置在文件输入的顶部。
3.  设置文本输入的样式，使其看起来像文件输入
4.  将文件输入`opacity`设置为 0，使其不可见，但仍可单击（这是关键，因为您实际上仍在使用文件输入）
5.  使用 JavaScript 将文件名放入文本输入

这是一种原始的，不太符合标准（额外的元素和所有这些）。如果您已经在使用 JavaScript 库（jQuery、MooTools 等），您可能会找到一个可以处理控件本身的插件，然后您只需为其添加样式即可。这种方法的优点是您不一定需要自己添加额外的元素（因此您周围没有杂散的`input`字段），并且 JavaScript（理想情况下）会拾取文件输入的存在和相应地“修复”它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:03:05.860

对于样式浏览按钮，您需要借助 css-javascript duo 或类似[twitter bootstrap](http://twitter.github.com/bootstrap/)的工具，它可以开箱即用[1](http://twitter.github.com/bootstrap/) .. 另外，[请查看这篇文章](https://stackoverflow.com/questions/11235206/twitter-bootstrap-form-file-element-upload-button)和[这篇文章](http://www.randomout.com/2012/07/hacking-more-visually-appealing-file.html)

作为个人观点，我觉得像浏览按钮和下拉菜单这样的表单元素不应该进行太多调整..给出两个好处..一，更快的开发..二，跨浏览器对称..

# android - ActionBarSherlock onCreateDialog() 错误：“必须重写或实现超类型方法”

> ID：13363199
> 
> 赞同：3
> 
> 时间：2012-11-13T15:07:49.860
> 
> 标签：android, actionbarsherlock, android-dialog

我正在使用 ActionBarSherlock，遇到了一个问题，我认为与导入有关（？）。

我正在尝试使用 onCreateDialog() 和 onPrepareDialog() 来呈现来自 SherlockListFragment 的自定义对话框。例如，onCreateDialog 看起来像这样：

```
@Override
protected Dialog onCreateDialog(int id) {
    AlertDialog alert = null;

    switch (id) {
    case DIALOG_CASE_1:

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        builder.setMessage(question)
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // do stuff
                }
             })
             .setNegativeButton("No", new DialogInterface.OnClickListener() {
                 public void onClick(DialogInterface dialog, int id) {
                     dialog.cancel();
                 }
              });

          alert = builder.create();
          break;

    default:
        alert = null;
    }

    return alert;
} 
```

这种方法在 SherlockActivity 中运行良好，但我在使用 SherlockListFragment 时遇到错误：

```
The method onCreateDialog(int) of type MyFragment must override or implement a supertype method 
```

我收到 onPrepareDialog() 的类似错误。如上所述，MyFragment 扩展了 SherlockListFragment。

对于解决此错误的任何建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:12:57.690

这些 API 已弃用，您应该使用 DialogFragment：http: [//developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

# javascript - 在字符串末尾使用通配符

> ID：13363202
> 
> 赞同：1
> 
> 时间：2012-11-13T15:07:58.643
> 
> 标签：javascript, jquery

我正在尝试找到一种在 if 语句中使用通配符的方法。所以我有这样的值：07/22/2012（日期）然后我希望它这样做：

```
if (date = "07/" *) { alert("test"); }; 
```

它还必须只在 07 之后使用通配符，因为它可以在中间使用：06/07/2012

任何建议，谢谢西蒙。如果有人知道更简单的方法，我也可以使用 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:11:03.550

您可以使用该[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)函数来检查字符串的特定部分：

```
if (date.substring(0, 3) === "07/") { alert("test"); }; 
```

* * *

也就是说，我同意您的用例可能存在更大的问题。如果您正在尝试验证日期，您真的应该使用日期函数而不是尝试验证字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:15:46.850

如果您需要将字符串与特定模式匹配，则应使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

如果要测试字符串是否以某个子字符串开头，则可以使用 RegExp，例如：

```
/^07\// 
```

*   `/`在开头和结尾分隔正则表达式文字
*   `^`匹配字符串的开头，它会阻止模式在日期内匹配，例如`'06/07/08'`
*   `07`匹配字符串`'07'`
*   `\/`匹配一个`/`字符，该`\`字符用作转义符，这样正则表达式就不会关闭，类似于字符串中的引号需要用`\`(ex `"\""`) 转义。

检查`if`语句的方法是使用以下`test`方法：

```
if (/^07\//.test(yourDate)) {
    ...do stuff...
} 
```

这是模式匹配字符串的所有独角兽和彩虹，但是如果您经常使用日期，则应该将日期解析为`Date`对象并通过对象进行管理，而不是尝试执行复杂的模式匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:19:56.590

如果您尝试操作日期，我可以建议您使用像[moment.js](http://momentjs.com)这样的库吗？

例如，要检查某个日期的月份是否为 7 月，请执行以下操作：

```
// month starts at 0 so July => 6
var month = 6;
var d = moment("07/22/2012", "MM-DD-YYYY");

if( d.month() === month ) alert("test"); 
```

[这里的](http://jsbin.com/opesom/1/edit)例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:12:19.630

使用[substring](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring) / [substr](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)：

```
if (date.substr(0, 3) == "07/") 
```

检查字符串是否以该序列开头。在非常现代的 JS 引擎中，您也可以使用`date.startsWith("07/")`（也可以在[填充时](https://github.com/paulmillr/es6-shim)使用）。

对于更复杂的匹配，您可能需要使用正则表达式。“开始”看起来像这样：

```
/^07\//.test(date) 
```

# haskell - 创建帕斯卡三角形时出现错误

> ID：13363203
> 
> 赞同：0
> 
> 时间：2012-11-13T15:08:03.400
> 
> 标签：haskell

我在创建帕斯卡三角形时遇到了问题。代码如下。这里**sumLstElts**将对一行中的元素求和，**putBetween**会将和放在 [1] 的右侧。**pascal n**将连续给出一系列帕斯卡序列。

```
 sumLstElts (x:[])=[x]
    sumLstElts []=[]
    sumLstElts xs=[head xs+head(tail xs)]++sumLstElts (tail xs)

    putBetween xs'= [1]++xs''
            where xs''=sumLstElts xs'

    pascal 0=[1]
    pascal n= putBetween(pascal (n-1)) ++ pascal(n-1) 
```

你能帮我找出我的错误吗？提前谢谢。

绍加塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:15:13.820

如果你只想要第 n 行，

```
pascal n= putBetween(pascal (n-1)) 
```

是正确的方法，`putBetween`已经从给定构造了完整的下一行。如果要将三角形创建为行列表，例如

```
pascal :: Int -> [[Integer]]
pascal n = take (n+1) $ iterate putBetween [1] 
```

将从第 0 行开始构建三角形。如果您希望三角形的部分以相反的顺序排列，则首先要较长的行，

```
pascal :: Int -> [[Integer]]
pascal 0 = [[1]]
pascal n = putBetween top : previous
  where
    previous = pascal (n-1)
    top = head previous 
```

这样做。

您尝试的问题在于，`putBetween`它适用于 的整个结果`pascal (n-1)`，该结果不仅包含`n-1`-st 行，还包含前面的行。所以`pascal 1`给出了第一行`[1,1]`与第零的连接`[1]`，当`pascal 2`适用`putBetween`于它时，它不是帕斯卡三角形的一行，所以结果也不是一个。您还可以通过以下方式获得行的串联

```
pascal 0 = [1]
pascal n = putBetween (take n previous) ++ previous
  where
    previous = pascal (n-1) 
```

但在我看来，最好将三角形作为行列表。

# java - Jetty 9 处理程序示例？

> ID：13363204
> 
> 赞同：7
> 
> 时间：2012-11-13T15:08:17.033
> 
> 标签：java, jetty

我正在使用 Jetty 构建我的第一个项目，我喜欢它提供的控制量。我将使用 Jetty 9，但我无法找到所有不同类型处理程序的示例以及如何使用 HandlerWrappers、HandlerLists、ServletContextHandler 等。

是否有任何好的资源，其中包含这些可靠的示例以及其他任何可能让我感兴趣/帮助我更好地实施的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:25:39.003

我们正在处理 jetty9 文档（正在进行中）：

[http://www.eclipse.org/jetty/documentation/current/](http://www.eclipse.org/jetty/documentation/current/)

如果您愿意贡献，可以在 github 上分叉文档，请参阅任何页面底部的链接。

目前，jetty 本身将是这些概念中最好的例子，我们将在接下来的几个月内扩展我们的嵌入式示例。这些是当前的嵌入式示例。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded)

在码头本身的单元测试中也有大量的例子。

# javascript - 这是我用打字稿创建javascript命名空间的正确方法吗？

> ID：13363206
> 
> 赞同：0
> 
> 时间：2012-11-13T15:08:29.837
> 
> 标签：javascript, typescript

我最近问了一个问题，但无法真正理解答案。这是我能够理解的。有人可以验证这是否是在我有命名空间的地方做类似于 C# 的正确方法吗？请注意，以下是三个文件，它们都相互引用，但此处未显示：

```
/Admin/dialog/start.ts
module Admin.dialog {
    export function x() { };
    Admin.grid.y(); // executes the function inside of file2.ts
}

/Admin/dialog/file1.ts
module Admin.dialog {
    export function y() { };
}

/Admin/grid/file2.ts   
module Admin.grid {
    export function y() { };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:37:00.047

这是我建议的结构：

*./Admin/Dialog.ts*

```
module Admin {
    export class Dialog {
        x() {
            this.y();
        }

        y() {

        }
    }
} 
```

*./Admin/Grid.ts*

```
module Admin {
    export class Grid {
        y() {
        }
    }
} 
```

然后，您可以像这样使用这些模块：

```
///<reference path="./Admin/Dialog.ts" />
///<reference path="./Admin/Grid.ts" />

var dialog = new Admin.Dialog();
dialog.x();

var grid = new Admin.Grid();
grid.y(); 
```

# java - JApplet & KeyListener

> ID：13363208
> 
> 赞同：3
> 
> 时间：2012-11-13T15:08:34.897
> 
> 标签：java, swing, jframe, keylistener, japplet

我正在为**我的计算机科学课程**开发一个应用程序。任务是编写一个计算器，但不使用`JTextField`s 或`JTextArea`s。我想出了一个实现的想法，`KeyListener`它**在 appletviewer 中运行良好，`JFrame`**但在 Google Chrome （可能还有其他浏览器）**中根本不起作用。**

这是我的代码片段。

```
//- BinaryCalc.java
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class BinaryCalc extends JApplet implements KeyListener {

    private JPanel panel;

    public BinaryCalc() {
        super();

        panel = new JPanel();
        this.add(panel);

        panel.addKeyListener(this);
        panel.requestFocusInWindow();
    }

    @Override
    public void init() {
        JOptionPane.showMessageDialog(this, "applet");
        panel.setFocusable(true);
        panel.requestFocus();
    }

    public void keyPressed(KeyEvent e) {
        JOptionPane.showMessageDialog(this, (char) e.getKeyCode());
    }

    public void keyReleased(KeyEvent e) {}

    public void keyTyped(KeyEvent e) {}

    public JPanel getPanel() { return panel; }

    public static void main(String args[]) {
        JFrame frame = new JFrame("Binary Calculator");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setMinimumSize(new Dimension(320, 240));

        BinaryCalc kalkulator = new BinaryCalc();
        frame.add(kalkulator);

        frame.pack();
        frame.setVisible(true);
        kalkulator.getPanel().requestFocusInWindow();
    }

} 
```

以及包含我的小程序的 HTML 文件。

```
<!doctype html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Kalkulator binarny</title>
</head>

<body>
    <div style="text-align: center; border-bottom: 1px solid black">
        <h1>Kalkulator Binarny</h1>
    </div>

    <br/>
    <object style="display: block; margin: auto;" type="application/x-java-applet" width="320" height="240">
    <param name="code" value="BinaryCalc.class" />
    <!--- <param name="archive" value="Liczba.jar" /> -->
        What a terrible failure: applet failed to load!
    </object>   
    <br/>
</body>

</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:17:32.347

我冒昧地将@David 的有用示例转换为使用标签和数字键盘。

更新：这种[混合](https://stackoverflow.com/a/12449949/230513)适用于 Ubuntu/OpenJDK，它可以通过[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)进行部署。

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.event.*;
import javax.swing.*;

/**
 * @see https://stackoverflow.com/a/13363349/230513
 */
public class BinaryCalc extends JApplet {

    private static BinaryCalc bc = new BinaryCalc();
    private JLabel label = new JLabel("0000000000");

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setTitle("BinaryCalc");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                initContainer(frame);
                frame.pack();
                bc.label.setText("");
                frame.setVisible(true);
            }
        });
    }

    // Common initialization for either JApplet or JFrame
    private static void initContainer(Container container) {
        JPanel panel = new JPanel();
        bc.setKeyBindings(panel);
        panel.add(bc.label);
        container.add(panel, BorderLayout.CENTER);
        panel.requestFocusInWindow();
    }

    @Override
    public void init() {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initContainer(BinaryCalc.this);
            }
        });
    }

    private void setKeyBindings(final JPanel panel) {
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_0, 0), "0");
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_NUMPAD0, 0), "0");
        panel.getActionMap().put("0", new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                String tmp = label.getText();
                label.setText(tmp + "0");
            }
        });
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_1, 0), "1");
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_NUMPAD1, 0), "1");
        panel.getActionMap().put("1", new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                String tmp = label.getText();
                label.setText(tmp + "1");
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T15:16:02.850

*   使用[`KeyBindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)与不使用`KeyListener`

*   不要创建自己`JFrame`的`JApplet`简单调用`getContentPane()`小程序实例并在那里添加所有组件。

*   所有组件都应该在覆盖在块中的`JApplet`覆盖`init()`方法中创建[`SwingUtilities#invokeAndWait(..)`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

*   `JApplet`s 和`Applet`s 没有`main(..)`方法（除了测试目的）

*   使用`requestFocusInWindow()`代替`requestFocus()`

我强烈建议您阅读：

*   [如何制作小程序](http://docs.oracle.com/javase/tutorial/uiswing/components/applet.html)
*   [JApplet 教程](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JApplet.html)

这是一个适合我的例子。它只是添加一个不可编辑`JTextField`的`JPanel`，然后添加`KeyBinding`s for `KeyEvent.VK_0`and`KeyEvent.VK_1`到`JPanel`. 如果用户键入*0*或*1*，它将显示为 un-edtiable `JTextField`：

![在此处输入图像描述](../Images/415a5636db35df4927eb7a80b08bbad3.png)

```
import java.awt.BorderLayout;
import java.awt.event.*;
import java.lang.reflect.InvocationTargetException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class BinaryCalc extends JApplet {

    private JTextField jtf;

    @Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {

                    JPanel panel = new JPanel();
                    setKeyBindings(panel);
                    jtf = new JTextField(10);
                    //so we cant edited it without pressing a key
                    jtf.setEditable(false);

                    panel.add(jtf);
                    getContentPane().add(panel, BorderLayout.CENTER);
                    panel.requestFocusInWindow();//incase we lost focus
                }
            });
        } catch (InterruptedException ex) {
            Logger.getLogger(BinaryCalc.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvocationTargetException ex) {
            Logger.getLogger(BinaryCalc.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void setKeyBindings(final JPanel panel) {
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_0,0), "0");
        panel.getActionMap().put("0", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                String tmp = jtf.getText();
                jtf.setText(tmp + "0");
            }
        });
        panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_1,0), "1");
        panel.getActionMap().put("1", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                String tmp = jtf.getText();
                jtf.setText(tmp + "1");
            }
        });
    }
} 
```

# html - 如何在 TD 中对齐表格？

> ID：13363209
> 
> 赞同：18
> 
> 时间：2012-11-13T15:08:37.067
> 
> 标签：html, css, html-table, alignment

我有一张2和 2的**桌子**：`<tr>``<td>`

```
<table>
    <tr>
        <td>
            <table>
                <!-- other content -->
            </table>
        </td>
        <td/>
    </tr>
    <tr>
        <td/><td/>
    </tr>
</table> 
```

***** 在哪里，我需要插入几乎相同的表（**不**包含另一个表）。但是当我调试它时，表格是左对齐的。

[现场示例](http://jsbin.com/abinuv/6)

我希望左上框中的**表格***右对齐*（知识：和*中心对齐*）。

例如：里面的表格是 32px 宽度，但包含`td`是 64px 宽度。

如何将**表格**向右对齐？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T09:24:48.647

A `table` is a **block-element**; `text-align` and `align` only works on **inline-elements**. So for a **block-element** you have to use `margin`:

**CSS:**

```
.centered{
    margin: 0 auto;
}

.rightaligned{
    margin-right: 0;
    margin-left: auto;
}

.leftaligned{
    margin-left: 0;
    margin-right: auto;
} 
```

**HTML:**

```
<td>
    <table class="leftaligned">
        <!-- Other Content -->
    </table>
    <table class="centered">
        <!-- Other Content -->
    </table>
    <table class="rightaligned">
        <!-- Other Content -->
    </table>
</td> 
```

This will work in almost every browser, even **Internet Explorer 7**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:14:48.313

只想到以下几点：

```
<table>
    <tr>
        <td style="text-align: right"></td>
        <td/>
    </tr>
    <tr>
        <td/><td/>
    </tr>
</table> 
```

或另一种 css 方法：

```
table table {
    float: right;
} 
```

或与浮点数内联：

```
<table>
    <tr>
        <td>
            <table style="float: right;">.....</table>
        </td>
        <td/>
    </tr>
    <tr>
        <td/><td/>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:13:42.603

如果`td`仅包含表格并且没有其他文本或元素，那么下面的代码也应该可以工作，只有它会正确对齐所有内容`td`并且在 html5 中不起作用：

```
<table>
    <tr>
        <td align="right">*</td>
        <td/>
    </tr>
    <tr>
        <td/><td/>
    </tr>
</table> 
```

# java - 有没有办法将监听器添加到 Executor/Future 中？

> ID：13363212
> 
> 赞同：1
> 
> 时间：2012-11-13T15:08:49.430
> 
> 标签：java, multithreading

Java：有没有办法给一个监听器添加一个[`Executor`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)？我有一个包含`Future`s 的集合，我尝试对其进行监控，以更新一些 GUI 状态。目前，如果提交/完成的任务存在差异，我正在检查后台线程，但我是在一个`while(true){}`块中执行此操作，我不喜欢这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:35:03.117

您可以根据您的 GUI 工具包使用 SwingWorkers 或类似的类来在任务完成时获得通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:08:57.047

使用 java.util.concurrent.ExecutorCompletionService 代替 Executor 提交任务。它有方法 take() 返回最近完成的任务。`take()`启动将在循环中调用的附加线程（或 SwingWorker） ，并使用结果更新 GUI 状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:11:48.633

不幸的是，没有办法做到这一点。

相反，请使用 Google 的[`ListenableFuture<V>`界面](https://guava.dev/releases/21.0/api/docs/com/google/common/util/concurrent/ListenableFuture.html)。
或者，使用具有更好异步支持的语言，例如 C# 和 TPL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:12:20.053

如果您想在任务完成时执行某些操作，请将其添加到任务本身。

```
 public static <T> void addTask(Callable<T> tCall) {
     executor.submit(new Runnable() {
         public void run() {
             T t = tCall.call();
             // what you want done when the task completes.
             process(t);
         }
     });
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-30T11:35:26.123

我做了类似于@Peter Lawrey 的回答。

我添加了一个侦听器作为可调用对象的成员变量，并在可调用对象返回其结果之前调用了该侦听器。

所以你有一个监听器接口：

```
@FunctionalInterface
public interface Listener<T> {    
    void notify(T result);    
} 
```

将其作为成员变量的 Callable：

```
public class CallbackCallable implements Callable<String>{

    private Listener<String> listener;

    @Override
    public String call() throws Exception {
        // do some stuff
        if (listener != null) 
             listener.notify("result string");
        return "result string";
    }

    public void setListener(Listener<String> listener) {
        this.listener = listener;
    }
} 
```

在您的应用程序中，您传递了一个侦听器的实现，其中包含您想要对结果执行的操作：

```
public static void main(String[] args) {
    ExecutorService es = Executors.newSingleThreadExecutor();

    System.out.println("This is thread: " + Thread.currentThread().getName());

    CallbackCallable myCallable = new CallbackCallable();
    myCallable.setListener(r -> {
        // process your callable result here            
        System.out.println("Got from Callable: " + r);
        System.out.println("This is thread: " + Thread.currentThread().getName());
    });

    es.submit(myCallable);
} 
```

您唯一需要记住的是，您的实现将在与 Callable 相同的线程上运行，您可以看到是否运行它：

```
This is thread: main
Got from Callable: result string
This is thread: pool-1-thread-1 
```

# android - 即使调用了 setWillNotDraw(false)，也没有在自定义视图中调用 onDraw

> ID：13363213
> 
> 赞同：0
> 
> 时间：2012-11-13T15:08:49.310
> 
> 标签：android, android-view

所以我有一个名为 Square 的自定义视图，我想将其添加到表格中。当我用文本视图替换我的方块时，它可以完美地工作。

我在网上搜索了很多，发现我应该在构造函数中调用 setWillNotDraw(false) 。我这样做没有结果。

这是我的班级广场：

```
public class Square extends View
{
    private String courseName;
    private String className;
    private String place;
    private Weekdays weekday;
    private int hour;
    private Paint paint;

    public Square(Context context, AttributeSet attrs){
        super(context,attrs);
        setWillNotDraw(false);
    }
    public Square(Context context, String courseName, String className, String place, Weekdays weekday, int hour)
    {
        super(context);

        this.courseName = courseName;
        this.className = className;
        this.place = place;
        this.weekday = weekday;
        this.hour = hour;

        setWillNotDraw(false);

        paint = new Paint();
    }

    public Square(Context context,Weekdays weekdays, int i) {
        super(context);
        this.weekday = weekdays;
        this.hour = i;

        setWillNotDraw(false);

        paint = new Paint();
        paint.setColor(Color.BLACK);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {       
        super.onDraw(canvas);

        canvas.drawText("Hello I'm a test", 1, 30, paint);

    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    } 
```

我尝试将 onMeasure() 方法设置为使用 10,10 或其他任何值，但没有显示任何内容。我不知道这是否与我的问题有关。

该表是这样动态制作的：

```
public class MainActivity extends Activity {

private Controller controller;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    controller = new Controller(this);

    createTable();

}

private void createTable() {

     // get a reference for the TableLayout
    TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);

    /**Create 8 rows*/
    for(int i=0;i<Controller.TABLE_ROW_COUNT;i++){
        // create a new TableRow
        TableRow row = new TableRow(this);

         /** create 5 columns*/
        for(int j=0;j<Controller.TABLE_COLUMN_COUNT;j++){
            Square sq = controller.tableModel.getSquare(Weekdays.values()[j], i);
            row.addView(sq, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        }
        // add the TableRow to the TableLayout
        table.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:10:59.377

您的目标 SDK 版本是什么？如果它 >= 11，则硬件加速正在让 GPU 缓存您的视图。尝试调用`setLayerType(View.LAYER_TYPE_SOFTWARE, null)`你的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:37:44.913

将您的替换`onMeasure`为以下内容：

```
public void onMeasure(int wms, int hms){
    setMeasuredDimension(MeasureSpec.getSize(wms), MeasureSpec.getSize(hms));
} 
```

View 中的默认（超级）实现将其大小设置为 0x0。

您可能需要根据父级调整值以获得合适的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T16:41:31.667

如果您的活动的硬件加速为 TRUE。然后尝试禁用该 ImageView 的硬件加速。

```
imageview.setLayerType(View.LAYER_TYPE_SOFTWARE, null) 
```

为我工作。

# c# - 将参数传递给 IBackgroundTask

> ID：13363214
> 
> 赞同：0
> 
> 时间：2012-11-13T15:08:54.953
> 
> 标签：c#, windows-8, windows-store-apps

我正在为 Windows rt 实现一个 Windows 商店应用程序。它使用后台任务来更新其磁贴。我希望能够将后台任务和应用程序配置为在执行工作时使用相同的 url，所以我想使用统一或集中的配置。现在我正在使用一些 *.resw 文件来配置我的 Windows Store 应用程序中的某些方面。如何将此配置传递给后台任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:43:32.940

最简单的方法是使用 `ApplicationData.Current.LocalSettings` 以下是我在我的应用程序中使用的包装器示例：

```
 public class SettingsService
    {

        private readonly ApplicationDataContainer _container;

        public SettingsService()
        {
            var localSettings = ApplicationData.Current.LocalSettings;

            if (!localSettings.Containers.ContainsKey("AppSettings"))
            {
                _container = localSettings.CreateContainer("AppSettings", ApplicationDataCreateDisposition.Always);
            }
            else
            {
                _container = localSettings.Containers["AppSettings"];
            }
        }

     private T GetValue<T>(string key, T @default)
        {

            if (_container.Values.ContainsKey(key))
            {
                return (T)_container.Values[key];
            }

            return @default;
        }

        private void SetValue(string key, object value)
        {
            if (!_container.Values.ContainsKey(key))
            {
                _container.Values.Add(key, value);
            }
            else
            {
                _container.Values[key] = value;
            }

        }

       //Any setting
   public bool IsFirstLaunch
    {
        get { return GetValue("IsFirstLaunch", true); }
        set { SetValue("IsFirstLaunch", value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:35:38.467

奇怪的是，我在另一个线程中回答了我自己的问题

[使用后台任务中的应用程序 resw 文件](https://stackoverflow.com/questions/13233962/using-app-resw-file-from-background-task?lq=1)

# c# - 以编程方式查找所有 sql server 实例

> ID：13363215
> 
> 赞同：2
> 
> 时间：2012-11-13T15:08:54.663
> 
> 标签：c#, sql-server, wmi

我知道有很多类似的主题，但没有一个提供我正在寻找的正确答案。

我正在努力收集我们网络上的所有 SQL-Server 实例。它应该能够检测到正在运行的 SQl-Server 版本。我们运行的不同版本在 ' `SQL Server 2000`' 和 ' `SQL Server 2008 R2`'之间有所不同

给你一点背景信息，目前我正在我们的本地网络上开发，但稍后它将在我们的服务器上运行以收集信息。

收集到的一些信息是：

*   应用程序池
*   iis 安装
*   服务器上的所有数据库
*   还有一些像这样的东西

以上所有这些都可以通过 WMI 查询正常工作。但我无法通过 WMI 或 Visual Studio 2010 中的命名空间获得正确的 SQl-Server 实例。

我根据stackoverflow和其他网站周围的其他解决方案尝试过的一些事情：

1.  `root\\Microsoft\\SqlServer\\ComputerManagement10`WMI，使用不同的命名空间，例如`ServerSettings`类。但是这只给出了没有版本号的 SQLSERVER 和 SQLEXPRESS。让它有点没用。
2.  我还尝试`root\\CIMV2 Win32_Product`包含一个 where like sql 子句。但这会返回比我正在寻找的更多的数据。另外查询本身很慢。
3.  后来我在 Visual Studio 中找到了一些类`SqlDataSourceEnumerator`，例如。尽管这仅在某个服务正在运行并且某些端口打开时才有效。由于可能的安全问题和可能的不正确数据，我们最好不要这样做
4.  我还看到一些人提到了一些其他的命名空间（一旦我再次找到它们就会在这里写出来），但是 msdn 表示这些命名空间我们将在不久的将来被删除。

总结一下：我需要检索`SQL-Server`版本在 2000 和 2008 R2 之间变化的域上的所有已安装实例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:34:11.170

好的，所以我解决了这个问题。我所做的是几件事：

*   首先，我在域中扫描机器。
*   检查SQLBrowser服务是否正在运行，如果没有，启动它！这是由`ServiceController class`位于`system.ServiceProcess`
*   启动所有 SQLBrowser 后，我使用`SqlDataSourceEnumerator`枚举所有实例。

对于那些对代码感兴趣的人：
**注意：您需要网络管理员权限才能在远程机器上启动它。**

```
public void StartSqlBrowserService(List<String> activeMachines)
{
    ServiceController myService = new ServiceController();
    myService.ServiceName = "SQLBrowser";

    foreach (var machine in activeMachines)
    {
        try
        {
            myService.MachineName = machine;
            string svcStatus = myService.Status.ToString();
            switch (svcStatus)
            {
                case "ContinuePending":
                    Console.WriteLine("Service is attempting to continue.");
                    break;

                case "Paused":
                    Console.WriteLine("Service is paused.");
                    Console.WriteLine("Attempting to continue the service.");
                    myService.Continue();
                    break;

                case "PausePending":
                    Console.WriteLine("Service is pausing.");
                    Thread.Sleep(5000);
                    try
                    {
                        Console.WriteLine("Attempting to continue the service.");
                        myService.Start();
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e.Message);
                    }
                    break;

                case "Running":
                    Console.WriteLine("Service is already running.");
                    break;

                case "StartPending":
                    Console.WriteLine("Service is starting.");
                    break;

                case "Stopped":
                    Console.WriteLine("Service is stopped.");
                    Console.WriteLine("Attempting to start service.");
                    myService.Start();
                    break;

                case "StopPending":
                    Console.WriteLine("Service is stopping.");
                    Thread.Sleep(5000);
                    try
                    {
                        Console.WriteLine("Attempting to restart service.");
                        myService.Start();
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e.Message);
                    }
                    break;
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
} 
```

然后这就是我用来检索实例的方法。

```
public static void SqlTestInfo()
{
    SqlDataSourceEnumerator instance = SqlDataSourceEnumerator.Instance;
    DataTable table = instance.GetDataSources();
    DisplayData(table);
}

private static void DisplayData(DataTable table)
{
    foreach (DataRow row in table.Rows)
    {
        foreach (DataColumn dataColumn in table.Columns)
        {
            Console.WriteLine("{0} = {1}", dataColumn.ColumnName, row[dataColumn]);
        }
        Console.WriteLine();
    }
} 
```

它可能不是最好的解决方案，有些人可能会觉得它有点脏。但就目前而言，这是我能得到的最好的解决方法。
希望这可以帮助将来遇到同样问题的任何人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T00:31:02.180

我使用了这里的代码：http: [//msdn.microsoft.com/en-us/library/dd981032.aspx](http://msdn.microsoft.com/en-us/library/dd981032.aspx)

效果很好。唯一需要提及的是，这是针对 SQL 2005 - SQL 2008。您必须检查 ComputerManagement11 以获取 SQL 2012。

# ios - xcode“找不到有效的签名身份”分发配置文件

> ID：13363218
> 
> 赞同：5
> 
> 时间：2012-11-13T15:09:00.123
> 
> 标签：ios, xcode

我似乎遇到了与[这篇文章](https://stackoverflow.com/questions/12355387/xcode-valid-signing-identity-not-found)类似的问题，不同之处在于我是 2 个团队的开发人员。我的团队可以很好地生成临时分发配置文件（团队 A）我也是这个团队的创建者。当我为 B 团队创建一个时，我遇到了一个问题，我的 xcode 显示“未找到有效的签名身份”。

我试过删除，重新导入分发证书等。奇怪的是，我可以创建一个开发条款就好了，但不是一个发行版。B 队在他们的系统中创建了我作为管理员，但没有运气。我很难过。

我们考虑吊销他的发行证书并重新创建它，这行得通吗？注意：他在应用商店中确实有其他应用。

呸呸呸

注意：我需要它是一个临时分发，以便我可以将它交给 testFlight

我还应该补充一点，我拥有 Team B 的完整发行版证书（带有私钥）。他为我导出了它。也没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:47:08.530

解决了。而不是下载 ditro 证书，或者让生成证书的开发人员用私钥向您发送证书，我只是让他在他的 xcode 中打开组织者，选择他的团队（我所在的团队）并导出profile（需要密码），并将其发送给我以导入。

所有密钥和证书都正确交叉，并且配置文件现在有效

# c - main 函数中的 **argv 符号

> ID：13363229
> 
> 赞同：5
> 
> 时间：2012-11-13T15:09:47.980
> 
> 标签：c, main, argv, argc

> **可能重复：**
> [argc 和 argv 在 main](https://stackoverflow.com/questions/2020945/argc-and-argv-in-main)

我很难理解用于一般主函数声明的符号，即`int main(int argc, char *argv[])`. 我知道实际上传递给 main 函数的是一个指向 的指针`char`，但我发现符号很困难。例如：

为什么`**argv`指向第一个字符而不是整个字符串？同样，为什么`*argv[0]`指向与前面的示例相同的内容。

为什么`*argv`指向整个第一个字符串，而不是`char`像前面的例子那样指向第一个？

这有点不相关，但为什么`*argv + 1`指向一个字符串“减去第一个字符”而不是指向数组中的下一个字符串？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T15:30:47.683

考虑一个带有`argc == 3`.

```
 argv
     |
     v
+---------+         +----------------+
| argv[0] |-------->| program name\0 |
+---------+         +-------------+--+
| argv[1] |-------->| argument1\0 |
+---------+         +-------------+
| argv[2] |-------->| argument2\0 |
+---------+         +-------------+
|    0    |
+---------+ 
```

该变量`argv`指向指针数组的开头。 `argv[0]`是第一个指针。它指向程序名称（或者，如果系统无法确定程序名称，则字符串 for`argv[0]`将为空字符串；`argv[0][0] == '\0'`）。 `argv[1]`指向第一个参数，`argv[2]`指向第二个参数，和`argv[3] == 0`（等价`argv[argc] == 0`）。

当然，您需要知道的另一个细节是`array[i] == *(array + i)`任何数组的细节。

你具体问：

> *   为什么 **argv 指向第一个字符而不是整个字符串？

`*argv`等价于`*(argv + 0)`并且因此`argv[0]`。它是一个`char *`. 当您取消引用 a`char *`时，您将获得字符串中的“第一个”字符。因此`**argv`等价于`*(argv[0])`or`*(argv[0] + 0)`或`argv[0][0]`。

（可以合理地争论 that`**argv`是一个字符，而不是一个指针，因此它不会“指向第一个字符”。它只是`'p'`of 的另一个名称`"program name\0"`。）

> *   同样，为什么 *argv[0] 指向与前一个示例相同的东西。

如前所述，`argv[0]`是一个指向字符串的指针；因此`*argv[0]`必须是字符串中的第一个字符。

> *   为什么`*argv`指向整个第一个字符串，而不是像前面的例子那样指向第一个字符？

这是一个约定俗成的问题。 `*argv`指向第一个字符串的第一个字符。如果将其解释为指向字符串的指针，则它指向“整个字符串”，与`char *pqr = "Hello world\n";`指向“整个字符串”的方式相同。如果将其解释为指向单个字符的指针，则它指向字符串的第一个字符。把它想象成波粒二象性，只是这里是字符串二象性。

> *   为什么`*argv + 1`指向一个字符串“减去第一个字符”而不是指向数组中的下一个字符串？

`*argv + 1`是`(*argv) + 1`。如前所述，`*argv`指向第一个字符串的第一个字符。如果给一个指针加1，它就指向下一项；因为`*argv`指向一个字符，所以`*argv+1`指向下一个字符。

`*(argv + 1)`指向下一个字符串的（第一个字符）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:18:26.620

这一切都归结为指针算术。

```
*argv[0] = *(*(argv + 0)) = **argv 
```

由于`[]`具有比一元更高的优先级`*`。

另一方面，`*argv`给出数组中的第一个单元格，一个包含指针的数组。这个指针指向什么？为什么是一个 char 数组，一个字符串，当然。

`*argv + 1`给出它给出的值，因为`+`它的优先级低于 unary `*`，所以首先我们得到一个指向字符串的指针，然后给它加 1，从而得到字符串中第二个字符的指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:34:17.113

`I understand that what is actually passed to the main function is a pointer to a pointer to char`

不，传递的是字符指针数组（字符串数组）。可以这样想，如果我在命令提示符下给出这个：

```
>> ./program hello 456 
```

我的程序的主要内容将得到：

```
argc == 3

argv[0] == program (the name of the program as a string)
argv[1] == hello   (the first parameter as a string)
argv[2] == 456     (the second parameter as a string) 
```

`Why does **argv point to the first char and not the whole string?`

```
char *argv[]  //an array of character pointers
*argv         // an array decays to a pointer, so this is functionally equivalent to
              // argv[0]
**argv        // Now the argv[0] decays to a pointer and this is functionally
              // equivalent to (argv[0])[0] 
```

`Likewise, why does *argv[0] point to the same thing as the previous example.`

往上看。

`Why does *argv point to the whole first string, instead of the first char like the previous example?`

往上看。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T15:19:52.973

这都是因为数组也是指向 c 中数组中第一个元素的指针。 `**argv`两次取消引用指向 char 的指针，给我们一个 char。 `*argv[0]`基本上是在说“取消引用该地址，并返回我们刚刚从取消引用中获得的地址所描述的数组中的第一个元素”，这恰好是同一件事。 `*argv`只取消引用一次，所以我们仍然有一个指向 char 或 char 数组的指针。 `*argv + 1`解引用一次，给我们第一个字符串，然后给地址加 1，给我们第二个元素的地址。因为指针也是数组，我们可以说这是数组`*argv`减去第一个元素。

# database - 如何重新设计这个 SQL 数据结构？

> ID：13363230
> 
> 赞同：5
> 
> 时间：2012-11-13T15:09:52.770
> 
> 标签：database, postgresql

我有一个用于存储动物信息的数据结构。数据类型（列）取决于动物类型，只有少数是常见的。可以有许多具有不同特征集的动物类型（一种类型可以实现一个或多个特征集）。

**我想要实现的是：**

1.  有可能基于现有的特征集创建新的动物类型，而无需稍后修改数据结构

2.  有可能对具有已知 animal_id 的动物或具有已知类型的所有动物的所有数据进行简单选择

3.  拥有数据控制（以确保对于动物类型“狗”不允许插入数据，例如关于 fly_animal 的数据）

4.  尽可能保持简单和愚蠢（当然现在我可以编写一些存储过程并在“插入之前”触发以确保所有数据都是正确的，但也许有更优雅的方式？）

**现有数据结构：**

**表：**动物

animal_id（主键）

动物名

动物年龄

animal_type（来自 animal_types 表的外键）

**示例数据行：**

1, '雷克斯', 3, 2

**表：** animal_types

animal_type_id : int (主键)

动物类型名称：字符

*-- 以下是功能集：*

house_animal : 布尔值

飞行动物：布尔值

wild_animal : 布尔值

**示例数据行：**

1、'野鹦鹉'，假，真，真

2、“狗”，真、假、假

每个功能集现在都实现为表，例如：

**表：** house_animal

animal_id（动物表中的外键）

最喜欢的食物

last_vet_visit_date

**表：**飞行动物

animal_id（动物表中的外键）

length_of_wings

最大速度

等等

当前的数据结构使事情变得过于复杂。

你可以问我为什么不做一个包含所有可能列的大表和一个包含动物类型的字典表。我当然可以，但这使得数据控制几乎不可能，以及如何定义一个只允许某些列的新类型..？

为什么我不为每种新类型创建一个表？因为我不想拥有例如 200 个表，每个表中只有几行。

有任何想法吗？

DBMS 是 PostgreSQL 版本 9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:43:05.163

一种方法是不要为每种不同类型的动物制作一张桌子。相反，您可以使用一个引用 animal_types 的表来存储每种类型所具有的特征。它会是这样的：

**表：**动物

animal_id（主键）

动物名

动物年龄

animal_type（来自 animal_types 表的外键）

示例数据行：

1, '雷克斯', 3, 2

**表**：动物类型

animal_type_id : int (主键)

动物类型名称：字符

现在将存储每种类型的允许功能的表

**表**：animal_types_features

animal_type_id : int (Primary Key) (来自 animal_types 表的外键)

animal_type_feature_id : int (主键)

动物类型特征名称：字符

然后是一张表来存储每只动物的特征：

**表：** animals_features

animal_id（表动物的外键）

animal_type_id ：（来自 animal_types_features 表的外键）

animal_type_feature_id（来自 animal_types_features 表的外键）

动物特征值：字符

这是一个非常简单的示例，可以添加的一件事是 animal_type_features 可以有一个列来存储数据，以指示它可以用于每个特征的有效数据。这种方式的好处是允许在不额外修改应用程序和/或数据库的情况下实现新类型。

# r - 标准化相关对象的简单函数

> ID：13363235
> 
> 赞同：0
> 
> 时间：2012-11-13T15:10:12.863
> 
> 标签：r, function, relate

我对 R 很陌生，我正在尝试编写一个函数来规范化我在不同数据帧中的数据。

标准化过程非常简单，我只需将要标准化的数字除以每个对象的总体大小（存储在表中）。为了知道哪个对象与一个和另一个相关，我尝试使用存储在第一列中每个数据帧中的 ID。

我想这样做是因为人口数据框中的某些对象在要规范化的数据框中没有相应的对象，也就是说，数据框有时具有较少的对象。

通常人们会建立一个关系数据库（我尝试过），但对我来说并没有成功。因此，我尝试将函数中的对象关联起来，但该函数不起作用。也许你们当中有人有这方面的经验，可以帮助我。

所以我编写这个函数的尝试是：

```
 # Load Tables
    # Agriculture, Annual Crops
    table.annual.crops <-read.table ("C:\\Users\\etc", header=T,sep=";")
    # Agriculture, Bianual and Perrenial Crops
    table.bianual.crops <-read.table ("C:\\Users\\etc", header=T,sep=";")
    # Fishery
    table.fishery <-read.table ("C:\\Users\\etc", header=T,sep=";")
    # Population per Municipality
    table.population <-read.table ("C:\\Users\\etc", header=T,sep=";")

    # attach data
    attach(table.annual.crops)
    attach(table.bianual.crops)
    attach(table.fishery)
    attach(table.population)

    # Create a function to normalize data
    # Objects should be related by their ID in the first column
    # Values to be normalized and the population appear in the second column
    funktion.norm.percapita<-function (x,y){if(x[,1]==y[,1]){x[,2]/y[,2]}else{return("0")}}

    # execute the function
    funktion.norm.percapita(table.annual.crops,table.population) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:50:30.253

让我们从附加步骤开始......为什么？它通常是不必要的，会给你带来麻烦！特别是因为您的人口 data.frame 和您的作物 data.frame 都有地理编码作为一列！

正如评论中所建议的，您可以使用`merge`. 默认情况下，这将使用同名的列组合 data.frames。`by`您可以指定要与参数合并的列。

```
dat <- merge(table.annual.crops, table.population)
dat$crop.norm <- dat$CropValue / dat$Population 
```

您的功能不起作用的原因是什么？看看你的`if`statemnt的结果。

```
table.annual.crops[,1] == table.population[,1] 
```

给出一个布尔向量，它将循环使用较短的向量。如果您的数据非常大（大约数百万行），则该`merge`函数可能会很慢。如果是这种情况，请查看`data.table`包并改用它的合并功能。

# c - 如何在 PulseAudio 中使用回声消除模块？

> ID：13363241
> 
> 赞同：9
> 
> 时间：2012-11-13T15:10:28.137
> 
> 标签：c, pulseaudio, echo-cancellation

我试图让 PulseAudio 回声消除器工作。

我有两个应用程序 - 录音机和播放器，都使用 PulseAudio。我像这样创建播放器和录音机：

```
 // pulseAudio
 pa_simple *paS=0;
 pa_sample_spec ss;

void initPulseAudio()
 {
     ss.format = PA_SAMPLE_S16LE;
     ss.channels = 1;
     ss.rate = 8000;

     paS = pa_simple_new(NULL,               // Use the default server.
                       "bottomPlayer",           // Our application's name.
                       PA_STREAM_PLAYBACK,
                       NULL,               // Use the default device.
                       "playStream",            // Description of our stream.
                       &ss,                // Our sample format.
                       NULL,               // Use default channel map
                       NULL,               // Use default buffering attributes.
                       NULL               // Ignore error code.
                       );

     if(!paS)
     {
         fprintf(stderr,
                 "unable to create recorder\n");
         myExit(1);
       }
 } 
```

一切正常，除了回声消除。我已经启用它

```
pactl load-module module-echo-cancel 
```

但是有和没有那个模块没有区别 - echo 存在。我是 PulseAudio 的新手，找不到关于回声消除器使用的好的手册。我应该在我的设备设置中添加或调整什么以使其正常工作？

操作系统——linux，现在是ubuntu，最后还是openWrt

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T03:47:18.193

我假设您使用的是 PulseAudio 1.0 或更高版本。对于播放器和记录器流，您需要将“filter.want”属性设置为“echo-cancel”。我们没有使用简单的 API 公开一种方法来执行此操作，因此在创建流之前，您需要采取一种稍微丑陋的方法来设置 PULSE_PROP 环境变量，这样才能达到目的：

```
setenv("PULSE_PROP", "filter.want=echo-cancel", 1); 
```

ps：对于真正高质量的回声消除，您需要 PulseAudio 2.0 或更高版本，并内置 webrtc-audio-processing 支持 - 获得此功能的难易程度取决于您的发行版是否已经打包。

# javascript - 调用多个jQuery插件实例

> ID：13363243
> 
> 赞同：0
> 
> 时间：2012-11-13T15:10:50.413
> 
> 标签：javascript, jquery

我有一个简单的 jQuery 插件，我希望能够在单个页面上调用多个元素。

到目前为止，我明确声明了选择器，但我希望它们与调用插件的对象相关。我怎样才能做到这一点？

```
(function($) {

    var MyPlugin = function(options){

        var plugin      = $(this); // The entire myPlugin object
        var element     = $("div#plugined div#element"); // An element in myPlugin
        var pluginChild = $( ); // Need selector of what plugin was called on + additional slider. ("div#plugined div#child")

        this.publicFunction = function() {
            // something...
        }

        var privateFunction = function() {
            // something private...
        }
    };

    $.fn.myPlugin = function(options) {

        var defaults = {
            // options
        }

        var options = $.extend(defaults, options);

        var myPlugin = new MyPlugin(options);

        $("div#plugined a.arrow").bind('click', function(e){ // Same problem. Need selector of what plugin was called on + additional slider. ("div#plugined div#child")
            e.preventDefault();
            myPlugin.publicFunction();
        });

        return myPlugin;
    };
})(jQuery);

<script type="text/javascript">
    $(window).load(function() {
        $('div#plugined').myPlugin();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:13:48.377

您必须传递当前的 jQuery 集：

```
var myPlugin = new MyPlugin(this, options); 
```

在里面`myPlugin`，做类似的事情：

```
var MyPlugin = function($set, options){
    // ...
    var pluginChild = $set.find(".child"); 
```

请注意，`this`在您的代码中指的是`MyPlugin`实例，因此调用`$(this)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:19:43.797

在[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)您可以找到一些描述如何执行此操作的基本代码。

看看这个例子：

```
(function( $ ){

  $.fn.tooltip = function( options ) {  

    // Create some defaults, extending them with any options that were provided
    var settings = $.extend( {
      'location'         : 'top',
      'background-color' : 'blue'
    }, options);

    return this.each(function() {        

      // Tooltip plugin code here

      $(this) // Will return the selected element

    });

  };
})( jQuery ); 
```

在 this.each 循环中，您可以在 $(this) 上运行代码，这将为您提供每个选定的元素。

# java - 在内部类中调用封闭类方法

> ID：13363244
> 
> 赞同：0
> 
> 时间：2012-11-13T15:10:53.313
> 
> 标签：java, methods, inner-classes

我在内部类中调用封闭类方法，但出现语法错误。这是代码：

```
public class Horizon
{
  ....
  public void checkWinner()
  {
    if(x[1]==1 && x[2]==1 && x[3]==1 || x[4]==1 && x[5]==1 && x[6]==1 || x[7]==1 && x[8]==1 && x[9]==1)
    {
      JOptionPane.showMessageDialog(null, "Congratulations!\n      Player 1 won!", "Congratulations",JOptionPane.OK_OPTION);
    }
  }
  private class HandlerClass implements MouseListener
  {
    public void mouseClicked(MouseEvent event)
    {

      if(event.getSource()==lb1)
      {
        if(j==1)
          x[1]=1;
        else
          x[1]=2;
        lb1.setIcon(icon);
      }
      public void mousePressed(MouseEvent event){}
      public void mouseEntered(MouseEvent event){}
      public void mouseReleased(MouseEvent event){}
      public void mouseExited(MouseEvent event){} // error here

      Horizon.this.checkWinner(); 

      if(i==9)
      {
        JOptionPane.showMessageDialog(null, "The game is a draw", "Draw", JOptionPane.OK_OPTION);
      }

    }
  }

} 
```

删除方法调用后错误消失。

这个错误的原因是什么，我该如何解决？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:15:52.267

您已将方法声明放在方法声明中。只需将所有这些声明移到外面`mouseClicked`：

```
 private class HandlerClass implements MouseListener
  {
    public void mouseClicked(MouseEvent event)
    {
      if(event.getSource()==lb1)
      {
        if(j==1)
          x[1]=1;
        else
          x[1]=2;
        lb1.setIcon(icon);
      }

      Horizon.this.checkWinner(); 

      if(i==9)
      {
        JOptionPane.showMessageDialog(null, "The game is a draw", "Draw", JOptionPane.OK_OPTION);
      }
    }

    public void mousePressed(MouseEvent event){}
    public void mouseEntered(MouseEvent event){}
    public void mouseReleased(MouseEvent event){}
    public void mouseExited(MouseEvent event){} // error here
  } 
```

顺便说一句，我希望您使用 IDE 来开发 Java 代码。如果是这样，请了解如何自动重新格式化代码并定期使用此功能。在 Eclipse 中，它是 Ctrl-Shift-F。

# python-3.x - 如何使用python将2个文本文件组合成一个新文件？

> ID：13363245
> 
> 赞同：1
> 
> 时间：2012-11-13T15:10:53.860
> 
> 标签：python-3.x, python-2.7

我有两个文本文件，每个文件都有数据列。我想知道是否有办法将两个文件组合在一起，以便特定或所有列并排？这可以使用附加来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:19:12.143

我将使用[csv 模块](http://docs.python.org/2/library/csv.html)来读取这两个文件，将数据按键放入字典中，然后再次使用 csv 模块编写一个包含连接数据的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:24:25.610

假设您的两个文件具有完全相同的行数，您可以执行以下操作：

```
# column 0 in right file next to column 0 in left file
# column 1 in right file next to column 1 in left file
# column 2 in right file next to column 2 in left file
order = (0, 0), (1, 1), (2, 2)
contents = [] # contains left side file content in idx 0, right side in idx 1
for fname in ("leftfile", "rightfile"):
    with open(fname) as f:
        contents.append(f.readlines()) # read entire file content

separator = " " # what separates the columns?
with open("out", "w") as outfile:
    for row in range(len(contents[0])):
        cl = contents[0][row].strip().split(separator) # columns in left file
        cr = contents[1][row].strip().split(separator) # columns in right file
        outfile.writelines(
                separator.join("%s%s%s" % (cl[l], separator, cr[r])
                    for l, r in order))
        outfile.write("\n") 
```

这会将两个文件（称为`leftfile`and `rightfile`）读入内存，去除两个文件中的前导/尾随空格的每一行，然后将它们拆分为给定的`separator`.
然后重新排列这些列，重新组合在一起并写入输出文件。
您可以通过更改元组来控制每个文件中的列彼此相邻放置的顺序`order`。

# php - 离开网页后如何清理缓存？php或任何脚本？

> ID：13363249
> 
> 赞同：1
> 
> 时间：2012-11-13T15:11:02.020
> 
> 标签：php, webpage, browser-cache, cache-control

问题是，每个浏览器都用于存储网页缓存，每当我从服务器更新我的网页时，我都无法看到更新，直到我刷新该页面或清除缓存。所以，这对用户/访客来说是个大问题，例如，访问者今天访问了我的网页，我更新了有重要新闻的网页，每当他再次访问时，由于已经存储，他将无法看到更新缓存在他/她的系统上。在他/她刷新页面或清除浏览器缓存之前，更新将被隐藏。

这个问题有什么解决方案吗？因为大多没有body用来刷新页面或者擅长清除缓存。那么，知道如何解决它吗？

或者如果我没记错的话，当访问者离开我的网页时，我可以这样做，只删除/清除我网页的缓存。任何 php 代码、脚本或任何东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:22:04.087

使用 PHP：

```
if( !headers_sent() )
    {   header('Expires: ' . gmdate('D, d M Y H:i:s') . 'GMT');
        header('Cache-control: no-cache');
    } 
```

使用 HTML：

```
<META HTTP-EQUIV="Expires" CONTENT="Tue, 04 Dec 1993 21:29:02 GMT"> 
```

**您无法清除客户端缓存，但可以使其在特定时间过期。**

# c# - 尝试使用 dbcontext 将数据保存到数据库时出错。不是浮点类型的有效实例

> ID：13363252
> 
> 赞同：1
> 
> 时间：2012-11-13T15:11:11.027
> 
> 标签：c#, sql-server, floating-point, double

我似乎无法弄清楚这一点。我得到的错误是

> “传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流 > 不正确。参数 13 (“@10”)：提供的值不是数据类型 >float 的有效实例。检查源数据是否无效值。无效值的一个示例是 >numeric 类型的数据，其比例大于精度。”

我已经检查了 NaN 的每个值。首先使用代码创建数据库。但是，当我尝试使用 dbcontext 添加一些值时，我得到了错误。

这可能与我尝试插入的双精度值是通过使用 double.parse() 解析字符串生成的事实有关。

任何建议表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T17:00:03.723

I was receiving the same error for a parameterized query. I found that the value I was trying to pass to the SqlCommand object was actually a value resulting from a division by zero. The error wasn't triggered by the actual division by zero calculation, the Double variable accommodated that by storing a value that looked like -1.#IND But then when I tried to pass that value to the SqlCommand object for the parameter specified in the error, then I got the error above when I tried to execute the query.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-13T16:17:43.923

对于任何想知道的人，我发现了这个：[http](http://www.datawizard.com/) ://www.datawizard.com/它使我陷入困境。

我认为某些 sql 服务器中内置了类似的东西，但我的没有，所以我使用了它。

感谢 Rick B 为我指明了正确的方向！

# gwt - 创建一个简单的垂直布局？无法填满所有空间

> ID：13363255
> 
> 赞同：0
> 
> 时间：2012-11-13T15:11:23.397
> 
> 标签：gwt

我无法设置简单的布局。我想要一个垂直面板下方的画布。就像是：

```
VerticalPanel parent = new VerticalPanel();
parent.setWidth("100%");
parent.setHeight("100%");

HorizontalPanel hp = new HorizontalPanel();
hp.setWidth("100%");
parent.add(hp);

Canvas canvas = Canvas.createIfSupported();
canvas.setWidth("100%");
canvas.setHeight("100%");
parent.add(canvas); 
```

所以基本上我希望顶部面板“hp”的高度与其内容需要的一样高，并且页面的其余部分应该用画布元素填充。但是我得到了奇怪的效果，画布似乎只填充了屏幕的一部分等。它在布局后报告其高度约为 200 像素，而可用高度应约为 600 像素。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:41:08.023

可能画布不会占用所有空间，因为不包含任何内容或未设置大小且默认为 300 像素。看到这个：[GWT Canvas - 保存图像并打开它](https://stackoverflow.com/questions/11544054/gwt-canvas-save-image-and-open-it)

**更新：**

垂直和水平面板只是 HTML 表格。它们将占用与其内容高度一样多的空间。

相反，您可以使用：[DockLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/DockLayoutPanel.html)

```
public void onModuleLoad() 
{
    DockLayoutPanel dockLayoutPanel = new DockLayoutPanel(Unit.PCT);
    dockLayoutPanel.addNorth(new Label("My header"),5);

    Canvas canvas = Canvas.createIfSupported();
    canvas.getElement().getStyle().setBackgroundColor("red");
    canvas.setWidth("100%");
    canvas.setHeight("100%");

    dockLayoutPanel.add(canvas);

    RootLayoutPanel.get().add(dockLayoutPanel);
} 
```

另请查看：[开发人员指南 - 使用面板进行布局](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

# apache - 基于字符串匹配 htaccess 重定向 url

> ID：13363258
> 
> 赞同：0
> 
> 时间：2012-11-13T15:11:32.753
> 
> 标签：apache, .htaccess, redirect, url-rewriting

有数百个 url 返回服务器错误。这是示例网址

[http://www.example.com/index.php?option=com_nap&format=raw&view=googlemapshow&vw_name=tabbed_compact&pid=12196](http://www.example.com/index.php?option=com_nap&format=raw&view=googlemapshow&vw_name=tabbed_compact&pid=12196)

如果我看到一个字符串值为“com_nap”的 url，我需要重定向到我的子域。

上面的 url 应该被重定向到

[http://subdomain.example.com/index.php?option=com_nap&format=raw&view=googlemapshow&vw_name=tabbed_compact&pid=12196](http://subdomain.example.com/index.php?option=com_nap&format=raw&view=googlemapshow&vw_name=tabbed_compact&pid=12196)

我怎样才能在 htaccess 中做到这一点。

问候， 拉贾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:31:09.260

我假设您的网络服务器运行 apache 并启用了 mod_rewrite？
在这种情况下，您可以将 QUERY_STRING（在 ? 标记后面的部分）与正则表达式进行匹配。

像这样：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{QUERY_STRING} ^option=com_nap [NC]
  RewriteRule ^ http://subdomain.example.com%{REQUEST_URI} [R=301,L]
</IfModule> 
```

1）如果可用，则打开重写引擎
2）检查 QUERY_STRING 是否以 option=com_nap 开头
3）使用 301 重定向到子域

# angularjs - 如何在 ng-repeat 中使用 ng-select？

> ID：13363259
> 
> 赞同：1
> 
> 时间：2012-11-13T15:11:33.020
> 
> 标签：angularjs

我正在编写一个角度应用程序来管理管理配置信息的 REST 服务（想想：application.properties，在云中）。

我从 REST 服务获得的一种响应是一组观察到的维度，我想对其进行迭代并为其创建下拉菜单。

这是一个 JSFiddle，显示了我正在尝试做的事情：http: [//jsfiddle.net/tvaughan/3Lp9c/17/](http://jsfiddle.net/tvaughan/3Lp9c/17/)

```
 <div ng-repeat="(dim, values) in observedDimensions">
        <select ng-options="val for val in values" name="dim-{{dim}}">
            <option value="">-- select a {{dim}} --</option>
        </select>
        {{dim}} : {{values}}
        <br/>
    </div> 
```

请注意，观察到的尺寸正确地以纯文本形式出现在选择框的右侧，但选择框本身似乎超出了“dim”和“values”元素的范围。我想我知道 ng-repeat 创建了一个新范围，但是使用“parent.values”或 $parent.values 也不起作用......

我在这里做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:31:37.697

问题是您没有`ng-model`选择。见[http://jsfiddle.net/3Lp9c/19/](http://jsfiddle.net/3Lp9c/19/)

# javascript - IE8 中的多个 jQuery 动画

> ID：13363264
> 
> 赞同：1
> 
> 时间：2012-11-13T15:11:40.043
> 
> 标签：javascript, jquery, jquery-animate, slider

**我的问题：**

IE8 一次可以处理多少个动画并且仍然可以正确处理动画？

**更多详情：**

我有两个 onload 递归滑块动画，它在 IE8 中不起作用。除了 $('elem').stop().animate() 还有什么方法可以优化 jQuery 动画？

谢谢！

# html - 如何在 org-mode html 导出中删除页脚详细信息？

> ID：13363267
> 
> 赞同：33
> 
> 时间：2012-11-13T15:11:48.240
> 
> 标签：html, emacs, org-mode

将 org-mode 文件导出为 html 时，其内容很简单，例如“Hello World！”，导出的 .html 文件在页脚中包含以下内容：

```
Date: 2012-11-13 16:06:19 CET

Author: <name>

Org version 7.8.11 with Emacs version 24
Validate XHTML 1.0 
```

有没有办法摆脱这些信息，只显示一个简单的“Hello World！” 在生成的 .html 中？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-03-09T23:02:44.453

您还可以在 org 文件中使用以下选项：

```
#+OPTIONS: html-postamble:nil 
```

要查看大多数现有的 html 导出选项，请输入`C-c C-e # html RET`org buffer，它将插入 HTML 选项的模板。

2014-01-21 ：还有另一种方法可以回答最初的问题，尚未在任何其他答案中描述。文件局部变量 org-html-postamble 设置为 nil。这可以通过`M-x`add-file-local-variable `RET`org-html-postamble `RET`nil来完成`RET`。这将在文件末尾添加如下行。

```
# Local Variables:
# org-html-postamble: nil
# End: 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-13T15:21:00.610

```
(setq org-export-html-postamble nil) 
```

您还可以通过修改变量来自定义页脚`org-export-html-postamble-format`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-02T02:36:17.853

另一种按文件删除它的方法是

```
#+style: <style>#postamble { display:none; }</style> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-18T21:39:55.710

我无法通过 thdox 得到答案来工作。为了在每个文件的基础上关闭 postamble 导出，我插入了

```
#+BIND: org-export-html-postamble nil 
```

在我文件的顶部。从组织模式手册：

> 如果 org-export-allow-bind-keywords 不为零，则 Emacs 变量可以在导出期间使用 BIND 关键字变为缓冲区本地。它的语法是'#+BIND: 变量值'。这对于无法使用特定关键字更改的缓冲区内设置特别有用。

因此，这应该适用于在每个文件的基础上关闭任何导出选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-28T17:13:33.077

我正在导出到 LaTeX，并且我得到了在文档末尾发出的 emacs 版本和 org-mode 版本。原来那是“CREATOR”变量，所以要禁用导出：

```
#+OPTIONS: creator:nil 
```

为我工作。您可以对`author`and`date`和其他字段执行相同的操作。

# java - 如何使用 iText 添加两个段落并排在一起

> ID：13363272
> 
> 赞同：0
> 
> 时间：2012-11-13T15:12:07.977
> 
> 标签：java, netbeans, itext

我想使用 iText 创建一个 PDF 文档，并且我想在另一个段落（左右）旁边添加一个段落。我试图通过将这两个段落添加到另一个段落来合并两个段落。但这对我不起作用。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:55:01.603

也许可以使用一张桌子？这个例子给出了一个 5 列的表

```
PdfPTable t = new PdfPTable(5);

int headerwidths[] = {12, 22, 22, 22, 22};
try {
    t.setWidths(headerwidths);
} catch (Exception e) {
    System.out.println(e.getMessage());
}

t.setWidthPercentage(100);

t.addCell(borderlessCell("text", Element.ALIGN_LEFT, fBold));
t.addCell(borderlessCell("text", Element.ALIGN_CENTER, fBold));
t.addCell(borderlessCell("text", Element.ALIGN_CENTER, fBold));
t.addCell(borderlessCell("text", Element.ALIGN_CENTER, fBold));
t.addCell(borderlessCell("text", Element.ALIGN_CENTER, fBold)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-10T07:09:28.743

你可以使用 chunk 来完成这个任务。喜欢

```
chunk c = new chunk("this is first paragraph",font);
chunk c1 = new chunk("this is second paragraph",font2);

paragraph p1 = new paragraph;

p1.add(new chunk(c1));
p1.add(new chunk(c2));

documnet.add(p1); 
```

# asp.net-mvc - 继承自 System.Web.Mvc.ViewStartPage 的虚拟视图

> ID：13363273
> 
> 赞同：1
> 
> 时间：2012-11-13T15:12:17.167
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, virtualpathprovider

尝试通过 VirtualPathProvider 从文件中检索虚拟视图时遇到问题，[此 stackoverflow thread](https://stackoverflow.com/questions/13209998/asp-net-mvc-virtual-views-and-web-configuration)对此进行了描述。

现在我的问题是为什么虚拟视图继承自 System.Web.Mvc.ViewStartPage，以及如何使其继承自 WebViewPage 以便我可以使用

`ViewResult View(string viewName);`

代替

`PartialViewResult PartialView(string viewName);`

就像描述的解决方法一样？

# c# - 在 T-SQL 模棱两可？

> ID：13363283
> 
> 赞同：2
> 
> 时间：2012-11-13T15:12:38.387
> 
> 标签：c#, asp.net, .net, visual-studio, tsql

我有一个IF条件，

```
IF (this.Something.GID == 1)
{
Something = "something";
} 
```

除了 1 之外，我还想再添加一个选项，我想说

```
IF (this.Something.GID **is 1 or 2**)
{
Something = "something";
} 
```

我该如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:15:09.330

您可以使用数组和`Contains`：

```
var items = new int[] {1, 2};
if(items.Contains(this.something.GID))
{
} 
```

如果您在本地执行代码（没有转换为 SQL 的 O/R LINQ），a[`HashSet`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)可能在大量数据上执行得更好：

```
var items = new HashSet<int>();
items.Add(1);
items.Add(2);
// equivalent one-liner, thanks to Eren
// var items = new HashSet<int> { 1, 2 }
if(items.Contains(this.something.GID))
{
} 
```

如果您在编译时知道所有元素，并且它们属于`switch`支持类型，例如`int`or `string`，那么您应该使用 Marc 的方法`switch`。

**关于使用`Contains`**

正如我在评论中所读到的，进一步解释我的代码可能会有所帮助。**基本上，代码以相反的方式**解决了您的问题：而不是检查 if `a` *is either* `b`，`c` *或者* `d`它检查集合是否`{b, c, d}` **包含** `a`（这是*等效*的）。

**在数组和`HashSet`**

数组和 a`HashSet`是对这个问题有用的两种不同的实现。通常，您可以比在数组中`HashSet` *更快*地找到元素。

数组执行*线性搜索*，它遍历*每个元素*并检查它是否是想要的元素（努力与数组的长度成**线性关系）。**A`HashSet`也存储在数组中的元素。但是，当您搜索一个元素时，它会从想要的元素中计算出一个*整数散列*，并检查其内部数组中的单个元素是否是想要的元素（不断*努力***）**。`hash % array_length`

 **您可以查看[Hash table](http://en.wikipedia.org/wiki/Hash_table)上的 Wikipedia articla 以了解更多详细信息（相当多的阅读，但非常有趣）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:14:35.473

你可以使用这样的[开关](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx) ：

```
switch (this.Something.GID)
{
   case 1:
   case 2:
   case 3: 
      Something = "something";
  break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:14:51.427

```
if (this.Something.GID == 1 || this.Something.GID == 2 )
{
 Something = "something";
} 
```

最好从一些 C# 初学者书籍/教程开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:13:40.500

您可以在此使用`||`和`&&`。

```
if ((this.Something.GID == 1) || (this.Something.GID == 2))
{
     Something = "something";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:22:57.063

```
if( (new int[]{1, 2, 3, 4}).Any(x => x == 3) )
{
    Something = "..."; 
```**

# vba - 如何使用 vba 查找系列名称？

> ID：13363284
> 
> 赞同：6
> 
> 时间：2012-11-13T15:12:39.077
> 
> 标签：vba, excel

我已经编写了用于在图中命名系列的 vba 代码：

```
 ActiveChart.SeriesCollection(1).name = "SPEC"
 ActiveChart.SeriesCollection(2).name = "manju" 
```

我的问题是我想使用 vba 代码找到特定的系列名称。在上面的代码中，我有两个系列。现在我想使用 vba 代码找到系列名称（manju）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:23:08.110

要`SeriesCollection()`通过传递名称来访问，您可以：

```
MsgBox ActiveChart.SeriesCollection("manju").Name 
```

这是可能的，因为`index`in`SeriesCollection(index)`实际上是`Variant`类型，所以如果您传递一个`String`类型并尝试按名称访问它，或者如果您传递一个`Long/Integer`（*或任何其他数字数据类型*）来访问枚举器，编译器就会工作。

或迭代 SeriesCollection，将当前名称与“manju”进行比较：

```
For i = 1 to ActiveChart.SeriesCollection.Count
   If ActiveChart.SeriesCollection(i).name = "manju" Then
      MsgBox "Found it!"
      Exit for
   End if
Next 
```

# javascript - 使用一个将点击事件分配给动态元素

> ID：13363290
> 
> 赞同：0
> 
> 时间：2012-11-13T15:13:02.590
> 
> 标签：javascript, jquery, ajax

我正在构建一个动态提交数量的表单。

我遇到的问题是在新加载的行上维护点击事件。我希望在每次提交后重新分配“一个”事件。我目前有：

```
$(this).one('click',function(e){ 
```

为了允许委派新的 DOM 元素，我认为它需要看起来有点像：

```
$(document).one('click',this,function(e){ 
```

但我无法完成这项工作

[这是代码的简化版本](http://jsfiddle.net/8XLNE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:32:00.693

[`one()`](http://api.jquery.com/one/)接受一个选择器：

> .one（事件 [，选择器] [，数据]，处理程序（事件对象））

因此，您可以将代码更改为：

```
$(document).one('click','tr',function(e){ 
```

相应调整。

# python - 将csv解析成变量

> ID：13363291
> 
> 赞同：-3
> 
> 时间：2012-11-13T15:13:12.260
> 
> 标签：python, parsing, variables, csv

我对 python 很陌生，正在尝试让一些代码工作。我已经查看了示例，但无法完全根据我的需要进行调整。这是正在发生的事情。

我有一个 CSV 文件，每行包含姓名、地址、电子邮件等数据。我需要做的是取第一行（或最后一行，并不重要）并将每个值解析为它自己的变量，然后删除该行。

就像我说的那样，我查看了示例，但不能完全按照我的需要工作，而且我确信有很多不需要的代码。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:16:25.987

查看并使用[csv 模块](http://docs.python.org/2/library/csv.html)。

如果您需要更改磁盘上的文件，您应该读入您需要的数据，然后用新的所需内容重新写入文件。从文本文件中删除一行并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:40:55.043

这取决于您所说的“删除”是什么意思。我假设你想从文件中删除它？除了将文件中的所有数据读入内存、删除不需要的记录并将数据写回之外，实际上没有任何简单的方法可以做到这一点。仅从文件中删除一条记录的操作非常昂贵。

就实际读取文件并将每个值存储到它自己的数组中而言，使用 csv 模块允许您逐行读取文件作为所有逗号分隔值的数组。

```
#example of reading in a csv file and operating on each row (python 2.7)

import csv
import sys

f = open('test.csv', 'r') #open file
try:
    r = csv.reader(f) #init csv reader
    for row in r:
        #assuming we have the format -  name, address, ph num
        print row[0] #prints name
        print row[1] #prints address
        print row[2] #prints ph num
finally:
    f.close() #cleanup 
```

# asp.net - ie8 回传提琴手

> ID：13363295
> 
> 赞同：1
> 
> 时间：2012-11-13T15:13:28.990
> 
> 标签：asp.net, forms, internet-explorer-8, postback, fiddler

我网站上的搜索表单在 IE 上的行为错误（我尝试过 IE8 和 IE7） 当我单击链接按钮或复选框时，会启动回发并重置所有字段。所有以前找到的结果也被重置，页面变成空的，就像第一次加载一样。

这不会发生在 FF 和 Chrome 上。

如果我运行 Fiddler 来查看发生了什么，页面运行得非常好，并且回发会返回我所有的数据。我猜 Fiddler 纠正了它，所以我看不出 IE 发送到服务器的查询有什么问题。

现在，让我们看看代码。首先，调用 .Net 内容的 HTML 页面：

```
<iframe width="605" scrolling="AUTO" height="6000" frameborder="NO" marginwidth="0" marginheight="0" src="http://[MYSERVERNAME]/xml/dialog/rechercher.aspx?L=FR" id="iframe_"></iframe> 
```

然后，ASPX 页面文件“rechercher.aspx”：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="~/xml/Dialog/rechercher.aspx.cs" Inherits="xml_Dialog_rechercher" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Recherche</title>
    <link rel="stylesheet" href="css/screen.css" />
    <script type="text/javascript" src="js/dialog.js"></script>
    <!-- other js calls -->
</head>
<body style="background-image:url('/lib_central/images/ACTIV/common/bgd_main.gif');background-repeat:repeat-y;">

    <form runat="server">

        <!--
            some presentation code
            ...
        -->

        <!-- sample of one of the search fields -->
        <label for="motsClefs" class="bold"><% Response.Write(get_label("motcle")); %></label><br />
        <asp:TextBox ID="rech_kw" runat="server" value="" ForeColor="#999999" Width="250"></asp:TextBox>

        <!-- The validation field -->
        <asp:LinkButton ID="rech_valide" OnClick="lancer_recherche" runat="server" CssClass="boutons rechercher inlineBlk" >
        <span class="rechercher"><span class="alt_text">rechercher</span></span></asp:LinkButton>
        <br class="clear" />

        <%-- Results displaying --%>
        <div ID="resultats" class="contentDia alignementBlk" runat="server"></div>

        <!--
            some footer code
            ...
        -->

        <!-- Tell the parent page to stretch according to the number of results -->
        <script type="text/javascript">
            $('#iframe_666', window.parent.document).height(100+$(".contentDialogue").height());
        </script>
    </form>
</body>
</html> 
```

最后是背后的.Net代码：

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Xml.Linq;
using UsersData;

public partial class xml_Dialog_rechercher : System.Web.UI.Page
{
    string keyword = ""; // Champ de saisie texte
    List<DLG_Questions> list_q;
    public string lang;

    // Au chargement de la page
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    // If the form validation button is clicked
    protected void lancer_recherche(object sender, EventArgs e)
    {
        // If user typed something in search field
        if (get_filters())
        {
            // Query the data layer to retrieve what is searched
            this.list_q = DialogManager.recherche(this.keyword);

            // Display resultst
            if (this.list_q.Count == 0)
            {
                resultats.InnerHtml = "no results";
            }
            else
            {
                resultats.InnerHtml = display_question_list();
            }
        }
    }

    // "Read" input field controls.
    // If all empty => return FALSE
    // if some contains data => Save that data and return TRUE
    protected bool get_filters()
    {
        // ...

        return ret;
    }

    // Return a HTML of the list of themes searched
    public string display_question_list(){
        // ...
    }

    // Internationnalisation allow me to display labels in different languages
    protected string get_label(String cle)
    {
        // ...
    }
} 
```

# c# - 如何使用 Rowstate 和 Delete() 从我的数据集中删除一行

> ID：13363296
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:13:34.193
> 
> 标签：c#, dataset, rowstate

> **可能重复：**
> [错误：无法通过行访问已删除的行信息。（C＃）](https://stackoverflow.com/questions/4321840/error-deleted-row-information-cannot-be-accessed-through-the-row-c)

当我尝试从我的数据集中删除一行时出现此错误：

> 已删除的行信息无法通过该行访问

我该如何解决。

下面是我的功能：

```
 private void btnDelete_Click(object sender, EventArgs e)
    {
       var result =  MessageBox.Show("Proceed to deleting this location?", "Delete Location", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
       if (result == DialogResult.Yes)
       {
            var row = myData.xspArea.FindByxar_Id(pRow.xar_Id);
            if (row.RowState != DataRowState.Deleted)
            {
                row.Delete();
                MessageBox.Show("This location has been deleted", "Location Deleted", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
       }
       else
       {
          this.Close();
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:19:10.413

我认为您需要`mData.AcceptChanges()`在 row.Delete() 之后调用。

**编辑：**

正如@Tim Schmelter 所说： `AcceptChanges`将阻止数据库中的更新，因为行状态是数据适配器用来确定如何处理该行的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:20:54.453

可能值得阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete.aspx)以了解`row.Delete()`应该做什么。

> 如果该行的 RowState 已添加，则当您调用 AcceptChanges 时，RowState 将变为 Detached，并且该行将从表中删除。
> 
> 对现有 DataRow 使用 Delete 方法后，RowState 变为 Deleted。在您调用 AcceptChanges 之前，它一直处于已删除状态。此时，DataRow 已从表中删除。
> 
> 可以通过调用 RejectChanges 取消删除已删除的行。

因此，`row.Delete()`将更`row.RowState`改为`DataRowState.Deleted`.

如果您希望从 DataSet 中实际删除您的行，则需要调用`row.AcceptChanges()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:20:57.977

我假设该异常实际上是在`FindByxar_Id(pRow.xar_Id)`而不是稍后提出的`row.Delete();`。您是否创建了 DataRow 的副本，`pRow`或者该行是否也被删除（可能通过级联删除约束）？然后您无法访问，`xar_Id`因为它已被删除。

所以也检查一下：

```
// ...
if(pRow.RowState != DataRowState.Deleted)
{
    var row = myData.xspArea.FindByxar_Id(pRow.xar_Id);
    if (row.RowState != DataRowState.Deleted)
    {
        row.Delete();
        // ...
    }
// ... 
```

如果要更新数据库，则需要使用`DataAdapter`.

# python - 从 .txt 文件中获取自身属性

> ID：13363298
> 
> 赞同：0
> 
> 时间：2012-11-13T15:13:39.237
> 
> 标签：python, class, text-files, init, self

我正在为 D&D 做一个战斗助手。我打算让它以这种格式从 .txt 文件中获取每个怪物的统计信息：

```
_Name of monster_
HP = 45
AC = 19
Fort = -3 
```

我正在使用一个名为 的类`Monster`，并`__init__`遍历 .txt 文件。它迭代得很好，我的问题是我无法`self.`在它之前获得变量。`Monsterfind()`只需找到怪物 .txt 文件的路径，我知道这不是问题，因为变量打印正常。

```
class Monster:
    def __init__(self, monster):
        """Checks if the monster is defined in the directory. 
        If it is, sets class attributes to be the monster's as decided in its .txt file"""
        self.name = monster.capitalize()
        monstercheck = self.monsterfind()
        if monstercheck != Fales:
            monsterchck = open(monstercheck, 'r')
            print monstercheck.next() # Print the _Name of Monsters, so it does not execute
            for stat in monstercheck:
                print 'self.{}'.format(stat) # This is to check it has the correct .txt file
                eval('self.{}'.format(stat))
            monstercheck.close()
            print 'Monster loaded'
        else: # if unfound
            print '{} not found, add it?'.format(self.name)
            if raw_input('Y/N\n').capitalize() == 'Y':
                self.addmonster() # Function that just makes a new file
            else:
                self.name = 'UNKNOWN' 
```

它只是说：`self.AC = 5` `SyntaxError: invalid syntax @ the equals sign`

如果我的课程或我的课程有任何问题`__init__`，即使它不重要，请告诉我，因为这是我第一次使用课程。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:15:25.990

您在这里不需要`eval()`（或`exec`）（它们几乎不应该被使用）-Python 有[`setattr()`](http://docs.python.org/3/library/functions.html#setattr)，它可以满足您的需求。

请注意，使用已经存在的数据格式（例如[JSON](http://docs.python.org/3/library/json.html)）可能更容易避免手动解析它。

另请注意，在处理文件时，最好使用上下文管理器，因为它读起来很好，并确保文件关闭，即使出现异常：

```
with open(monstercheck, 'r') as monsterchck:
        print monstercheck.next()
        for stat, value in parse(monstercheck):
            setattr(self, stat, value) 
```

显然，您需要在这里进行一些真正的解析。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-13T15:20:07.367

正如@Lattyware 所提到的，你真的应该使用`setattr`它。我将简单讨论*为什么*代码会引发错误。原因`eval`不起作用是因为它评估表达式并且赋值不是表达式。换句话说，你传递给的`eval`应该只是等式的右手边：

```
eval("a = 5") 
```

这就像您的代码一样失败。

您可以从 using 更改`eval`为`exec`：

```
exec "a = 5"  #exec("a = 5") on py3k 
```

但这又是不明智的。

# hibernate - 在排序闭包中，如何最后获得空值？

> ID：13363301
> 
> 赞同：4
> 
> 时间：2012-11-13T15:13:49.730
> 
> 标签：hibernate, grails, groovy

您好，我正在使用 Grails 2.1，但有一个小问题我找不到好的解决方案。我正在查询数据库中的某些对象，它返回并按预期对其进行排序，但有一个异常，空值是第一个。

这是我可以用来查询数据库的代码：

```
Object.findAllByObjectTypeAndDateBetween(ObjectType.REGULAR, startDate, stopDate).sort {it.str} 
```

有什么方法可以按字符串排序并最后而不是第一个获取所有空值？我正在寻找一种简单的方法，而不是这样： [Grails/Hibernate: how to order by isnull(property) to get NULLs last?](https://stackoverflow.com/questions/5787855/grails-hibernate-how-to-order-by-isnullproperty-to-get-nulls-last)

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T15:24:14.690

你可以这样做：

```
objects.sort { a, b ->
  !a.str ? !b.str ? 0 : 1 : !b.str ? -1 : a.str <=> b.str
} 
```

展开说明：

```
objects.sort { a, b ->
  if( !a.str ) {             // If a.str is null or empty
    if( !b.str ) {           // If b.str is null or empty 
      return 0               // They are the same
    }
    else {                   // a.str is empty or null, but b.str has value
      return 1               // b.str should come before a.str
    }
  else {                     // a.str has value
    if( !b.str ) {           // b.str is null or empty
      return -1              // b.str should come after a.str
    }
    else {                   // Both have value, 
      return a.str <=> b.str // Compare them 
    }
  } 
```

这会将空字符串**和**空字符串放在列表的末尾，并按字母顺序对其余部分进行排序

如果您想要列表头部的空字符串（以及尾部的空值），则需要显式检查空值而不是依赖 Groovy Truth：

```
objects.sort { a, b ->
  a.str == null ? b.str == null ? 0 : 1 : b.str == null ? -1 : a.str <=> b.str
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:25:17.367

我想你可以使用：

```
Object.findAllByObjectTypeAndDateBetween(ObjectType.REGULAR, startDate, stopDate).sort{a, b-> null == a || null == b ? 1 : a <=> b } 
```

# java - Gson反序列化内部部分

> ID：13363304
> 
> 赞同：2
> 
> 时间：2012-11-13T15:14:17.053
> 
> 标签：java, json, gson

我有以下 JSON：

```
{
   "LightObjectSet": {
      "Objects": {
         "Org": {
            "State": "Unchanged",
            "Guid": "00000000-0000-0000-0000-000000000000",
            "Id": "39",
            "Name": "Test org",
            "ShortName": "Test"
         }
      }
   }
} 
```

我可以`Org`使用 Gson 仅反序列化对象（不是所有结构）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T06:30:39.910

尝试这个。请注意，反序列化的`Org`类没有遵循 Java 命名约定来匹配 JSON。如果你想关注他们，你需要用`@SerializedName`

```
public class Q13363304 {

    class Org {

        String State;
        String Guid;
        int Id;
        String Name;
        String ShortName;

        @Override
        public String toString() {
            return "Org [State=" + State + ", Guid=" + Guid + ", Id=" + Id
                    + ", Name=" + Name + ", ShortName=" + ShortName + "]";
        }

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        String json = "{ \"LightObjectSet\": { \"Objects\": { \"Org\": { \"State\":\"Unchanged\", \"Guid\":\"00000000-0000-0000-0000-000000000000\", \"Id\":\"39\", \"Name\":\"Test org\", \"ShortName\":\"Test\" } } } }";

        JsonObject root = new JsonParser().parse(json).getAsJsonObject();
        JsonObject lightObjectSet = root.get("LightObjectSet").getAsJsonObject();
        JsonObject objects = lightObjectSet.get("Objects").getAsJsonObject();
        JsonElement org = objects.get("Org");

        Gson g = new Gson();

        Org o = g.fromJson(org, Org.class);
        System.out.print(o);

    }

} 
```

# iphone - UINavigationController becomes null when using pushViewController

> ID：13363305
> 
> 赞同：0
> 
> 时间：2012-11-13T15:14:17.777
> 
> 标签：iphone, ios, uikit

I have a little problem using `UINavigationController`.

I have a first `ViewController (called LaunchViewController)` with a navigation controller (that works fine), I can use `pushViewController` to display a `second ViewController (called SettingViewController)` and it works fine too, but when (from the first view controller) I want to display a third `ViewController (called IPhonePage),` after the view is displayed, and when I want to use the `navigation controller` in my `IPhonePage`, the `navigation controller` is `null...`

Don't know if my question is clear, I can show you the code I use to do that :

`AppDelegate.m :`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    LaunchViewController* controller = [[LaunchViewController alloc] initWithNibName:@"LaunchViewController" bundle:nil];
    _navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
    _navigationController.navigationBar.tintColor = [UIColor blackColor];
    [self.window setRootViewController:_navigationController];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

`LaunchViewController.m :`

```
- (IBAction)showSettings:(id)sender {
    SettingViewController* controller = [[SettingViewController alloc] initWithNibName:@"SettingViewController" bundle:nil];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

This works fine (I can access the `navigation controller` in `SettingViewController)`

But this,

`LaunchViewController.m :`

```
- (void)ShowPageWithIMDevicePage:(id<IMDevicePage>)page {
    [self.navigationController pushViewController:(UIViewController*)page animated:YES];
} 
```

The page is created by :

```
- (id<IMDevicePage>)CreatePage {
    return [[IPhonePage alloc] init];
} 
```

And my IPhonePage class looks like this,

IPhonePage.h :

```
@interface IPhonePage : UIViewController <IMDevicePage> 
```

IPhonePage.m :

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"navigation controller = %@", self.navigationController);
} 
```

And the log displays **navigation controller = (null)**, e.g. I don't have access to the `navigation controller.`

I really hope someone's gonna understand what I want, I know it's a bit complicated but it's for a specific reason that I make that this way.

Thanks ! Cheers :)

**EDIT** Actually it happens because I create the page, and I set different things like the title, content and toolbar, and then I call `pushViewController`, the strange thing is that I have a method that sets the content of the UIViewController

`IPhonePage.m`

```
- (void)SetContentWithIMDeviceControl:(id<IMDeviceControl>)content {
    self.view = (UIView*)content;
} 
```

And after that it doesn't call anymore my viewDidLoad method (any clue ?). Also I have a method which role is to add a toolbar at the bottom of the view

```
- (void)SetApplicationBarWithIMDeviceApplicationBar:(id<IMDeviceApplicationBar>)appBar {
} 
```

At first I wanted to use the navigation controller to set this toolbar, but because this method is called before the `pushViewController` method, the navigation controller is nil. Is there any possibility to set manually the navigation controller without calling `pushViewController` ? Or any other way to add a toolbar ? Like declaring a toolbar and adding it as a subview maybe ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:27:53.180

Try something like :

```
- (void)ShowPageWithIMDevicePage:(id<IMDevicePage>)page {
    YourDelegate* delegate = (YourDelegate*)[[UIApplication sharedApplication] delegate];
    IPhonePage* pageVC = (IPhonePage*)page;
    [delegate.navigationController pushViewController:pageVC animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T09:57:26.590

You can access self.navigationController in - (void)viewWillAppear function. When you create the UIViewController, - (void)viewDidLoad is called. And at this time, you haven't called the pushViewController function and thus self.navigationController is not set.

# php - PHP重命名权限被拒绝（WAMP）

> ID：13363306
> 
> 赞同：1
> 
> 时间：2012-11-13T15:14:19.100
> 
> 标签：php, wamp, rename

基本上，

```
rename("./source", "./$new_name"); //succeeds, 
//but subsequent reversal... 
rename("./$new_name", ./source"); fails... 
```

至于我为什么要这样做，希望上下文中的代码能够解释......

```
<?php
    //$filename="Simplicity.zip"; (Original Folder)
    //$version ="1.0.4b";
    //End result AM_Simplicity1.0.4b.zip
    $src='source';
    //Destination folder for new Zip file.
    $dst='patched';
    $am_zip = "AM_".rtrim($filename,'.zip');
    $filename = $am_zip.$version.".zip";
    rename("./source", "./$am_zip"); //succeeds
    $src = $am_zip;
    $dst = 'patched';
    include "./recurseZip.php";
    $z=new recurseZip();
    $x = $z->compress($src,$dst,$filename);
    // AND... so that ./source can be emptied on demand later.
    rename("./$am_zip","./source"); //fails... Permission Denied
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:54:29.017

您是否尝试查看要重命名的目录是否有打开的文件？我的猜测是`recurseZip`该类正在打开一个文件`$am_zip`并且没有正确关闭它。因此，您不能移动/重命名它。`rename`您可以通过将 2 个语句放在一起来确保。

此外，wamp 标签表明您在 Windows 上，所以我想这不是真正的权限问题。否则，您应该确保您使用`chmod`授予目录写权限，也许`recurseZip`该类没有保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:15:09.200

我找到的解决方案是 sleep(5); 在最终重命名之前。

# javascript - Javascript - Jquery/文本框，提交消失 onblur

> ID：13363307
> 
> 赞同：1
> 
> 时间：2012-11-13T15:14:18.273
> 
> 标签：javascript, jquery, html

这是[我的代码](http://pastebin.com/c552eA8D)。一切正常，所以如果我在文本框外点击它会恢复到默认大小，但如果我点击提交按钮，它也会恢复到正常大小并且不提交数据。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:35:07.097

您必须注释掉这一行：

```
$("#sbutton_block").slideUp("fast"); 
```

并且在 action 属性中，您必须将 php 页面名称写入 Post 变量。

这是您修改后的代码。[http://pastebin.com/LR4HyHv6](http://pastebin.com/LR4HyHv6)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:38:12.573

首先你的代码不起作用，因为模糊功能会在按钮点击事件之前触发，所以我改成这个

**HTML**

```
<form method="post" action="" onsubmit="return false;">
  <div id="vsetko">
      <textarea  id="scontent"></textarea>
      <div id="sbutton_block" style="display:none;">
          <input type="submit" id="sbutton" value=" Share " />
      </div>
  </div>
</form>​​​​ 
```

**CSS**

```
#scontent {
  overflow: auto;
  width:722px;
  height:30px;
  border:solid 2px #006699;
  font-size:14px;
}

#sbutton{
  background-color:#006699;
  color:#ffffff;
  font-size:13px;
  font-weight:bold;
  padding:4px;
  margin-bottom: 5px;
} 
```

**查询**

```
$(document).ready(function(){

  $("#scontent").focus(function(){
    $(this).animate({"height": "85px",}, "fast" );
    $("#sbutton_block").slideDown("fast");
    return false;
  });

  $("html").click(function(event){
    if ($(event.target).attr("id") != "scontent") {
      $("#scontent").animate({"height": "30px",}, "fast" );
      $("#sbutton_block").slideUp("fast");
      return false;
    }
  });

  $("#scontent").keypress(function(){
    var MaxLen = 250;
    return ($(this).val().length <= MaxLen);
  });

  $("#sbutton").click(function(){
    // do your stuff
    return false;
  });

}); 
```

所以整个html点击事件将取代焦点事件，然后你可以保存
我在笔记本电脑上测试过的数据它工作正常

编辑：我正在修改 html 点击功能以检查要跳过的元素

# javascript - 在 window.location.href 中搜索字符串的更有效方法？

> ID：13363308
> 
> 赞同：2
> 
> 时间：2012-11-13T15:14:21.420
> 
> 标签：javascript, jquery

有没有更有效的方法来搜索 window.location.href？

window.location.href：`http://www.example.com/6CATA/folder/file.html`

我目前的代码是：

```
var searchWinHref = window.location.href;
if(searchWinHref.indexOf("/6CATA/") > -1) {
  alert('6CATA is in the window.location.href');
} 
```

哪个工作得很好，但我正在尝试学习在可能的情况下优化代码的方法，如果我需要在一个页面上执行几次，我很想知道是否有更有效的方法来做到这一点？

编辑：

为了澄清，我需要偶尔在 URL 中搜索不同的变体，例如：6CATA 和 6CATB 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:20:31.313

不，那很好。您可能会使用`location.pathname.split('/').contains("6CDATA")`，但这是相当等价的。如果您想优化您的代码并真正关心这种微优化，请将结果缓存在一个变量中，如果您需要它几次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:16:41.623

您可以使用`window.location.pathname`，但您不会从那一小段代码中获得任何速度提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:18:02.253

就性能而言，这看起来不错 - 特别是如果您只调用它几次。

但是，您确定需要在客户端执行此检查吗？这可能更适合在服务器上执行。但这取决于你...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:19:02.913

[http://jsperf.com/test-vs-match-vs-indexof-vs-search-2/2](http://jsperf.com/test-vs-match-vs-indexof-vs-search-2/2)

这是一个基准，在这种情况下不需要优化

# c++ - C ++ 11中的几个数组

> ID：13363310
> 
> 赞同：1
> 
> 时间：2012-11-13T15:14:24.570
> 
> 标签：c++, c++11

在 C++11 中，我们有一个新`std::array`的`boost::array`. 例子：

```
std::array<int, 5> fiveInts; 
```

如果我想以两种方式使用这个新数组：

1.  **在堆栈上**分配一个数组。
2.  **在堆上**分配一个数组。

如何在语法上实现这一点？那`5`可以是一个变量还是只是一个`const`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:17:02.713

```
std::array<int, 5> fiveInts; 
```

在堆栈上分配一个数组（自动存储）。

```
std::array<int,5>* fiveInts = new std::array<int, 5>; 
```

在堆上分配一个数组（动态存储）。

该值必须在编译时知道，是的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T15:40:59.733

模板参数必须始终在编译时已知。a 的大小`std::array`不能是变量。

管理堆上的值的连续缓冲区的最佳方法是 via `std::vector`，它为您提供缓冲区大小的运行时大小。

`std::array<int, 5> fiveInts;`在堆栈上创建一个包含 5 个元素的数组（在自动存储中）。 在堆上（在空闲存储中）`std::vector<int> fiveInts(5);`创建一个 5 秒的托管缓冲区。`int`

您可以`std::array`通过调用在堆上创建完整的`new`，但我建议不要这样做。 `std::array`它的主要优点是它允许基于堆栈（或基于内部到类）的存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T16:07:51.260

`std::array<T, N>`是一个由`N`type 对象组成的模板`T`。您可以创建这种类型的自动对象：

```
void f() {
    std::array<int, 5> auto_ints;
} 
```

并且该对象将包含 5 个 int 对象，全部在堆栈中。

您还可以在免费商店中创建这种类型的对象：

```
void g() {
    std::array<int, 5> *free_store_ints = new std::array<int, 5>;
} 
```

但几乎没有理由这样做，因为`std::vector<int>`它做得更好。

您必须在`std::array`编译时指定大小；您可以在运行时`std::vector`调整大小。

# c# - 在datagridview中显示最后一列单元格的值

> ID：13363312
> 
> 赞同：0
> 
> 时间：2012-11-13T15:14:27.393
> 
> 标签：c#, datagridview, windows-applications

如何在datagridview中显示最后一列单元格的值的总和。我有一个包含 2 列名称和值的网格。我希望网格有一个文本框，其中最后一行的值总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:23:24.100

假设您的最后一列中有整数值，您可以使用如下内容： 编辑：您应该检查当前行是否为新行（用于插入的行）

```
 int sum = 0;
        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            int num = 0;
            if(!dataGridView1.Rows[i].IsNewRow)
                if (int.TryParse(dataGridView1.Rows[i].Cells[dataGridView1.Columns.Count - 1].Value.ToString(), out num))
                    sum += num;
        }
        dataGridView1.Rows.Add(new object[] { "Total", sum.ToString()}); 
```

如果您有其他类型的数字，则应解析该数字。 ****编辑：*** *如评论中所述，您有一个`DataGridView`数据绑定控件。在这种情况下，您应该将数据添加到绑定源。如果这是 a `DataTable`，您应该添加到它而不是添加到`DataGridView`。

```
DataTable dt = (DataTable)dataGridView1.DataSource;
dt.Rows.Add(new object[] { "Total" , sum.ToString() }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:37:23.137

```
 var value = dataGridView1.Rows.Cast<DataGridViewRow>().Sum(x =>
                                                                {
                                                                  double val = 0;
                                                                  if (double.TryParse(x.Cells["Column"], out val))
                                                                    return val;
                                                                  else
                                                                    return 0;
                                                                }); 
```

这应该为您使用 LINQ 完成。

# asp.net-mvc - 在数据库中存储产品列表

> ID：13363313
> 
> 赞同：0
> 
> 时间：2012-11-13T15:14:30.500
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我正在挑战自己做一个小型网上商店，但在我的数据库中存储订单时遇到了问题。

这是我的订单课程

```
 [Key]
    public int Id { get; set; }
    public IEnumerable<BasketProduct> BasketProducts { get; set; }
    public string UserName { get; set; } 
```

哪个存储 BasketProducts（没有 int Id 它不想工作，但我不知道它为什么需要它）

```
 public int Id { get; set; }
    public Product Product { get; set; }
    public int Quantity { get; set; } 
```

在 BasketController 中，如果用户点击结帐，我想创建一个订单并将其放入数据库

```
public ActionResult CreateOrder()
        {
            //GetCurrentBasket returns a basket of current session
            var baskItems = GetCurrentBasket().Items;

            Order order = new Order { BasketProducts = baskItems, UserName = User.Identity.Name };
            EFDbContext ent = new EFDbContext();
            ent.Orders.Add(order);
            ent.SaveChanges();

            return RedirectToAction("Index", "Checkout", new { order = order });
        } 
```

在结帐 Index 方法中，它应该只接受 Order 对象并显示其中的所有产品

```
 @model Domain.Elements.Order
       //some code omitted
       @foreach (var item in Model.BasketProducts)
       {
          <p>@item.Product.Name</p>
          <p>@item.Quantity</p>
       } 
```

问题是在我的数据库中（在订单表中）它只创建了 ID 和用户名，所以我无法检索当前人订购的任何产品。

我做错了什么，或者我错过了一些使它起作用的东西？提前致谢。

编辑：这是我现在得到的错误。你调用的对象是空的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T03:42:54.013

似乎问题出在您保存到数据库时。我相信在添加实体时，您会希望将它们添加到内容上的特定 DbSet 中。尝试这样的事情：

```
public ActionResult CreateOrder()
{
    //GetCurrentBasket returns a basket of current session
    var baskItems = GetCurrentBasket().Items;

    var context = new EFDbContext();
    var orders = context.GetDbSet<Order>();

    var order = orders.Create(); //use the DbSet to create your new entity
    order.BasketProducts = baskItems;
    order.UserName = User.Identity.Name;

    orders.Add(order);

    try
    {
        context.SaveChanges();
    }
    catch(DatabaseException ex)
    {
    }

    return RedirectToAction("Index", "Checkout", new { order = order });
 } 
```

我已将您的 Context.SaveChanges() 调用包装在 try/catch 中。如果我有一个错误保存到数据库，我通常会这样做，这样我就可以调试和单步执行它，任何数据库级别的异常都会被捕获，你可以看到发生了什么。

# php - Doctrine Migrations and Fixtures：从fixture获取迁移中加载的实体

> ID：13363315
> 
> 赞同：3
> 
> 时间：2012-11-13T15:14:36.687
> 
> 标签：php, symfony, doctrine-orm, fixtures, doctrine-migrations

我有一个成功使用 Doctrine Migrations 和 Fixtures 的网站（很棒的功能！），但是我遇到了一个小问题。

我在现有实体中向该表添加了一个表和一个新的外键字段。迁移使用其初始值填充新表。

在使用外键为表加载数据的夹具中，我需要将该字段设置为迁移中创建的值之一，但我似乎无法从该存储库中获取任何实体。

任何想法为什么会发生这种情况，或者关于我应该如何以不同的方式做这件事的建议。

夹具实现了，`ContainerAwareInterface`以便我可以访问实体存储库，但是这样做：

```
$repo = $this->container->get('doctrine')
    ->getRepository('myCoreBundle:StoryStatus');
$statuses = $repo->findAll();
print_r($statuses); 
```

什么都不返回，即使此时我可以看到数据库中有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:45:10.347

弄清楚了。我有点愚蠢。加载固定装置当然是清除数据库，所以它永远不会找到任何实体:)。需要实现一个夹具来再次创建它们。

# ruby-on-rails - 安装 Gem 错误 - 无法构建 gem 原生扩展

> ID：13363319
> 
> 赞同：0
> 
> 时间：2012-11-13T15:14:43.127
> 
> 标签：ruby-on-rails, rubygems

我继承了一个 Ruby on Rails 项目。它已全部压缩交付，因此作为第一步，我想让它在我的桌面 Mac 上运行：

脚本/服务器

=> 正在启动 WEBrick.../ Library/Ruby/Gems/1.8/gems/ `establish_connection': Please install the postgresql adapter:`activerecord-2.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:74:in gem install activerecord-postgresql-adapter`（没有这样的要加载的文件 -- pg) (RuntimeError)

所以，我尝试安装 activerecord-postgresql-adapter gem，然后得到这个：

```
$ sudo  gem install activerecord-postgresql-adapter
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing activerecord-postgresql-adapter:
ERROR: Failed to build gem native extension. 
```

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/ 找不到 ruby​​ 的头文件usr/lib/ruby/ruby.h

Gem 文件将继续安装在 /Library/Ruby/Gems/1.8/gems/pg-0.14.1 以供检查。结果记录到 /Library/Ruby/Gems/1.8/gems/pg-0.14.1/ext/gem_make.out

我怎样才能安装这个必需的 gem？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:23:52.237

假设您熟悉 rails 并正确安装它，您需要使用 macports 安装 postgre 的驱动程序，然后才能使用任何 gem。

[这里](http://www.lowendmac.com/ed/winston/08kw/rails-posgresql-leopard.html)有说明，或者（最近，使用 brew）[这里](http://bigbangtechnology.com/post/installing_postgresql_on_mac_os_x/)

# kernel - 在 OpenCL 中使用内核导致另一个内核

> ID：13363328
> 
> 赞同：5
> 
> 时间：2012-11-13T15:15:10.237
> 
> 标签：kernel, opencl

我使用 API 的 clCreateImage2D 来创建空间，clEnqueueWriteImage 用于写入设备，read_imageui 用于读取内核中的图像，write_imageui 用于将图像写回主机，为图像卷积编写了代码。

现在我想使用卷积内核的结果，它指向另一个内核参数中的缓冲区。不将结果移回主机和设备。这可能吗？

如果结果来回移动......我认为它会很昂贵。

在这方面的任何帮助都将是无价的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T15:29:51.150

从主机的角度来看，您应该能够获取缓冲区对象，并将其作为参数传递给另一个内核。之后，您只需将其视为任何其他缓冲区。唯一的技巧是确保当您创建缓冲区时，它具有足够的读写权限，可以作为内核的输出和输入。

# c++ - 硬编码的快捷方式

> ID：13363332
> 
> 赞同：1
> 
> 时间：2012-11-12T19:05:03.070
> 
> 标签：c++, qt

我已经在几个地方问过这个问题，但我仍然无法弄清楚。

我想要做的是有一个in `QKeySequence(Qt::CTRL + Qt::Key_X, Qt::CTRL + Qt::Key_C)`a作为中心小部件。`MainWindow``QTextEdit`

问题是我有一个 Cut ( `Ctrl+X`) 的快捷方式，当我按下 时`Ctrl+X`，`Ctrl+C`它不起作用。当焦点在不同的小部件上时，快捷方式可以完美运行。

我尝试覆盖`QWidget::keyPressEvent`and`QWidget::event`但它是一样的。

我还有一个问题：如果我有这两个快捷键`Ctrl+X`，为什么我按 时`Ctrl+X` `Ctrl+C`没有收到信号？根据 Qt 文档：`activatedAmbigiously()``Ctrl+X`

> 当在键盘上键入一个键序列时，只要它与多个快捷方式的开头匹配，就可以说它是模棱两可的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-17T15:22:50.933

这可能有点胡扯，但您不能简单地在中央小部件上安装一个事件过滤器并查找您感兴趣的按键吗？

对我来说，下面的代码似乎符合您的描述，如果您按下`CTRL+X`它会启动一个计时器，该计时器会在其 timeout() 上触发一个`cut()`事件`QTextEdit`（这是`centralWidget()`的`QMainWindow`）。`CTRL+C`相反，如果在标志仍然处于活动状态时出现另一个键事件`CTRL+X`，它将触发`close()`.

**主窗口.h**

```
#ifndef MYMAINWINDOW_H
#define MYMAINWINDOW_H

#include <QMainWindow>
#include "ui_mainwindow.h"
#include <QTimer>

class MainWindow: public QMainWindow, private Ui::MainWindow
{
  Q_OBJECT

 public:
  MainWindow(QWidget *parent = 0 );
  virtual bool eventFilter(QObject *obj, QEvent *event);

public slots:
  void passOnEvent();

private:
  QTimer *timer;
  bool xactive;

};

#endif 
```

**主窗口.cc**

```
#include "mainwindow.h"

#include <QMouseEvent>
#include <QKeyEvent>

MainWindow::MainWindow(QWidget *parent ) : QMainWindow(parent), timer (new QTimer), xactive(false)
{
  setupUi(this);
  centralWidget()->installEventFilter(this);
}

bool MainWindow::eventFilter(QObject *obj, QEvent *event)
{
  if( obj != centralWidget() ) {
    return QObject::eventFilter(obj, event);
  } else  if (event->type() ==  QEvent::KeyPress ) {
    QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);
    if( keyEvent->key() == Qt::Key_X && keyEvent->modifiers() == Qt::ControlModifier ) {
      timer->start(250);
      connect(timer,SIGNAL(timeout()),this,SLOT(passOnEvent()));
      xactive = true;
      return true;
    } else if( xactive && keyEvent->key() == Qt::Key_C && keyEvent->modifiers() == Qt::ControlModifier ) {
      this->close();
      return true;
    } else {
      return QObject::eventFilter(obj, event);
    }
  } else {
    // standard event processing                                                                                                                                                                                                  
    return QObject::eventFilter(obj, event);
  }
}

void MainWindow::passOnEvent()
{
  xactive = false;
  timer->stop();
  static_cast<QTextEdit*>(centralWidget())->cut();
} 
```

虽然此代码对我有用，但其中可能会干扰您正在做的其他事情。另外，我没有解决您关于`QKeySequence`and的任何问题`activatedAmbigiously()`。

让我知道这是否有帮助。

# asp.net-mvc-3 - 将包含正斜杠的值传递给控制器

> ID：13363333
> 
> 赞同：0
> 
> 时间：2012-11-13T15:15:18.983
> 
> 标签：asp.net-mvc-3

我有以下链接：

```
@Html.ActionLink("Order", "OrderProduct", 
new { controller = "Orders", id = item.ITEMID }, 
new { @class = "lightbox order-link" }) 
```

我的`item.ITEMID`id 可能包含正斜杠，例如：`GT25-1/VS`

但是当我点击链接时，`id`我的控制器中只有`GT25-1`

```
public ActionResult OrderProduct(string id) 
```

有没有办法可以编码这个值以包含所有内容，然后在我的操作中对其进行解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:25:53.963

在创建您的 url 时尝试对您的 id 进行编码，例如

```
@Html.ActionLink("Order", "OrderProduct", 
new { controller = "Orders", id = HttpUtility.UrlEncode(item.ITEMID) }, 
new { @class = "lightbox order-link" }) 
```

你可能需要/想要在你的行动中解码然后

```
id = HttpUtility.UrlDecode(id); 
```

# html - 如何将多个字符作为单个字符传递给输入值？

> ID：13363340
> 
> 赞同：0
> 
> 时间：2012-11-13T15:15:36.353
> 
> 标签：html, character-encoding, fonts, special-characters

当您执行类似按钮的操作时`<input type="submit" value="Submit">`，该按钮将被命名`Submit`（因为这是它的值）。

但是如果我使用的字体没有“A”字母附加到“A”位置等怎么办？相反，它使用自己的字符空间并使用例如`\f002`（这是单个字符）。它是矢量图标字体，我想使用一个图标作为提交输入的值。

使用`<input type="submit" value="\f002">`只会打印`\f002`而不是那个单个图标。我怎样才能转换这个？

PS
当我`content: "\f002";`在 style.css 中使用时效果很好。它将这个完整的字符串转换为一个图标。

PPS
图标集： http: [//fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:27:17.430

好的，我让它工作了。答案：`&#xf002;`但我没有解释 - 我只记得前段时间我正在努力解决类似的问题并添加`x`帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:25:36.200

也许您会尝试向`class`输入按钮添加一个属性？
IE：`<input type="submit" value="Submit" class="myClass">`

看看这篇文章：[http ://www.webreference.com/programming/css_stylish/index.html](http://www.webreference.com/programming/css_stylish/index.html)

# c++ - Newton Raphson 混合算法无法解决

> ID：13363342
> 
> 赞同：9
> 
> 时间：2012-11-13T15:15:47.503
> 
> 标签：c++, math, numerical-methods, newtons-method

问题的简要说明：我使用 Newton Raphson 算法在多项式中求根，但在某些情况下不起作用。为什么？

我从“c++ 中的数值配方”中提取了一个 Newton Raphson 混合算法，如果 New-Raph 没有正确收敛（导数值低或收敛速度不快），该算法会一分为二。

我用几个多项式检查了算法，它奏效了。现在我正在我拥有的软件内部进行测试，但我总是遇到特定多项式的错误。我的问题是，我不知道为什么这个多项式没有得到结果，而其他许多人却得到了结果。因为我想改进任何多项式的算法，所以需要知道哪一个是不收敛的原因，以便我可以正确对待它。

接下来，我将发布我可以提供的有关算法和出现错误的多项式的所有信息。

多项式：

```
f(t)= t^4 + 0,557257315256597*t^3 - 3,68254086033178*t^2 +
+ 0,139389107255627*t + 1,75823776590795 
```

它是一阶导数：

```
 f'(t)= 4*t^3 + 1.671771945769790*t^2 - 7.365081720663563*t + 0.139389107255627 
```

阴谋： ![在此处输入图像描述](../Images/93192091b633e215973479ef3b30fbdf.png)

根（通过 Matlab）：

```
 -2.133112008595826          1.371976341295347          0.883715461977390 
  -0.679837109933505 
```

算法：

```
double rtsafe(double* coeffs, int degree, double x1, double x2,double xacc,double xacc2)
    {
    int j;
    double df,dx,dxold,f,fh,fl;
    double temp,xh,xl,rts;
    double* dcoeffs=dvector(0,degree);
    for(int i=0;i<=degree;i++)
        dcoeffs[i]=0.0;
    PolyDeriv(coeffs,dcoeffs,degree);
    evalPoly(x1,coeffs,degree,&fl);
    evalPoly(x2,coeffs,degree,&fh);
    evalPoly(x2,dcoeffs,degree-1,&df);
if ((fl > 0.0 && fh > 0.0) || (fl < 0.0 && fh < 0.0))
    nrerror("Root must be bracketed in rtsafe");

if (fl == 0.0) return x1;
if (fh == 0.0) return x2;

if (fl < 0.0) { // Orient the search so that f(xl) < 0.
    xl=x1;
    xh=x2;
} else {
    xh=x1;
    xl=x2;
}
rts=0.5*(x1+x2);    //Initialize the guess for root,
dxold=fabs(x2-x1);  //the "stepsize before last,"
dx=dxold;           //and the last step

evalPoly(rts,coeffs,degree,&f);
evalPoly(rts,dcoeffs,degree-1,&dx);

for (j=1;j<=MAXIT;j++) { //Loop over allowed iterations

    if ((((rts-xh)*df-f)*((rts-xl)*df-f) > 0.0) //Bisect if Newton out of range,
            || (fabs(2.0*f) > fabs(dxold*df))) { //or not decreasing fast enough.
        dxold=dx;
        dx=0.5*(xh-xl);
        rts=xl+dx;
        if (xl == rts) 
            return rts; //Change in root is negligible.
    } else {// Newton step acceptable. Take it.
        dxold=dx;
        dx=f/df;
        temp=rts;
        rts -= dx;
        if (temp == rts)
            return rts;
    }
    if (fabs(dx) < xacc) 
        return rts;// Convergence criterion
    evalPoly(rts,coeffs,degree,&f);
    evalPoly(rts,dcoeffs,degree-1,&dx);
    //The one new function evaluation per iteration.
    if (f < 0.0) //Maintain the bracket on the root.
        xl=rts;
    else
        xh=rts;

}
//As the Accuracy asked to the algorithm is really high (but usually easily reached)
//the results precission is checked again, but with a less exigent result
dx=f/df;
if(fabs(dx)<xacc2)
    return rts;
nrerror("Maximum number of iterations exceeded in rtsafe");
return 0.0;// Never get here.
} 
```

使用以下变量调用该算法：

```
x1=0.019
x2=1.05
xacc=1e-10
xacc2=0.1
degree=4
MAXIT=1000
coeffs[0]=1.75823776590795;
coeffs[1]=0.139389107255627;
coeffs[2]=-3.68254086033178;
coeffs[3]=0.557257315256597;
coeffs[4]=1.0; 
```

问题是该算法超过了最大迭代次数，并且 aproximatedly 的根存在错误`0.15`。

所以我的直接和简化的问题是：为什么当许多（至少 1000 个）其他非常相似的多项式（精度为 1e-10 且迭代次数很少！）时，这个多项式没有达到准确的误差！

我知道这个问题很难，它可能没有一个真正直接的答案，但我被这个问题困扰了好几天，我不知道如何解决它。非常感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:28:19.310

在没有运行您的代码的情况下，我最初的猜测是您正在与浮点值进行比较以确定您的解决方案是否已经收敛。

```
 if (xl == rts) 
        return rts; //Change in root is negligible. 
```

也许您应该将其计算为比率：

```
 diff = fabs(xl - rts);
   if (diff/xl <= 1.0e-8)  // pick your own accuracy value here
      return rts; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:23:33.160

我不确定确切的原因，但在这种情况下，检查函数是否足够快地下降似乎不起作用。

如果我这样做，它会起作用：

```
 double old_f = f;

  .
  .
  .

    if ((((rts-xh)*df-f)*((rts-xl)*df-f) > 0.0) //Bisect if Newton out of range,
        || (fabs(2.0*f) > old_f)) { //or not decreasing fast enough.
  .
  .
  .

    if (fabs(dx) < xacc)
      return rts;// Convergence criterion
    old_f = f; 
```

**更新**

您的代码中似乎存在问题：

```
evalPoly(rts,dcoeffs,degree-1,&dx); 
```

应该

```
evalPoly(rts,dcoeffs,degree-1,&df); 
```

# html - Chrome在加载时随机滚动到页面的中间/下部

> ID：13363352
> 
> 赞同：3
> 
> 时间：2012-11-13T15:16:06.707
> 
> 标签：html, google-chrome, autofocus

我无法在谷歌浏览器以外的任何浏览器上重现此内容。加载页面时会随机滚动到页面下方的 50-75%。

没有 JS 触发这个。

更糟糕的是不一致。大多数情况下，我在新标签中打开页面。有时会在我更改网址时发生。页面刷新时很少发生。

我什至不知道如何调试这类问题。以前有人经历过吗？知道解决方法吗？可能的原因？

这绝对不是“滚动到 iframe”问题，因为我消除了所有 iframe/框架。

我也禁用了所有扩展。它仍然在不断发生。

编辑：禁用 javascript 对此行为没有影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:56:14.873

看起来问题是隐藏表单内的自动对焦元素。Chrome 决定这意味着“有时滚动到中间”

# java - 删除 Sprites 颜色键 libGDX

> ID：13363353
> 
> 赞同：1
> 
> 时间：2012-11-13T15:16:10.590
> 
> 标签：java, graphics, libgdx

我正在尝试从精灵中删除颜色键。在这种情况下，我的精灵背景是紫色的。我曾尝试使用 spritebatch setColor() 函数，但这会将整个屏幕变成精灵背景颜色。有没有人有关于如何去除颜色的解决方案？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:22:35.230

我不认为 libGDX（或 OpenGL ES）支持“colorkey”透明度。据我所知，每个人都只是在图像中使用 alpha（透明度）通道。（除了红色、绿色和蓝色之外，每个像素都有一个表示其透明度的 alpha 值。）

如果您在离线工具中删除背景颜色并使用透明度信息保存图像，您应该没问题。（我相信这是大多数现有的 libGDX 应用程序所做的。）

或者，您可以在运行时通过定义将色键像素转换为透明像素的着色器来执行此操作。

# gdb - 使用 gdb 检查 eCos mips 目标上的“非当前”线程

> ID：13363359
> 
> 赞同：6
> 
> 时间：2012-11-13T15:16:29.980
> 
> 标签：gdb, mips, ecos

我有一个运行 eCos 的 MIPS 目标，它使用多个线程。对于调试，我使用 gdb 7.5 和 JTAG 探针。

我如何从 GDB 检查和回溯非当前线程。我确实有基线程地址，以及来自备用线程的程序计数器（如果需要，我可以正确找到其他信息）。

由于 gdb 不知道 eCos，因此诸如“信息线程”之类的命令不起作用。所以我很可能不得不手动在gdb中使用哪个线程上下文......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:38:15.950

我们使用 Eclipse 的[Code Confidence 工具](http://www.codeconfidence.com/ecos-tools.shtml "代码置信度工具")，它允许通过 JTAG 进行 eCos 线程感知调试。它不是免费的，但运行良好，与新的 Eclipse 版本保持同步，John Dallaway 提供的支持非常好。如果您正在做任何认真的 eCos 开发，我强烈推荐它。

# ruby-on-rails - 将用户对象从一个模型传递到另一个模型

> ID：13363361
> 
> 赞同：0
> 
> 时间：2012-11-13T15:16:36.177
> 
> 标签：ruby-on-rails, paperclip

使用 Rails 3.2 和 Paperclip 保存照片。我正在尝试将用户的 ID 保存到`user_id`表`photos`中，计数器缓存增量在`photos_count`表`users`中。被`photos`上传到另一个`shops`. 照片被上传，但我无法将`user`对象传递给`photo`模型来创造奇迹。

事情不工作：

1.  用户 ID 未能保存在`photos`表`user_id`列中
2.  `photos_count`每当通过表单上传照片时，in `users`table 都不会增加。`shops`

下面是我的代码：

```
# photo.rb
class Photo < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true, :counter_cache => true
  belongs_to :user, :counter_cache => true
  attr_accessible :data, :attachable_id, :attachable_type, :user_id
end

# shop.rb
class Shop < ActiveRecord::Base  
  attr_protected :reviews_count, :rating_average, :photos_count
  has_many :photos, :as => :attachable, :dependent => :destroy
  accepts_nested_attributes_for :photos, :allow_destroy => true
end

# photos_controller.rb
class PhotosController < ApplicationController
end

# shops_controller.rb
class ShopsController < ApplicationController
  before_filter :require_user, :only => [:new, :edit, :update, :create]

  def new
    @shop = Shop.new
  end

  def edit
    @shop = Shop.find(params[:id])
  end

  def update
    @shop = Shop.find(params[:id])
    if @shop.update_attributes(params[:shop])
      flash[:notice] = 'Successfully updated.'
      redirect_to shop_path(@shop)
    else
      render :action => :edit
    end
  end

  def create
    @shop = Shop.new(params[:shop])
    if @shop.save
      flash[:notice] = 'Successfully saved.'
      redirect_to shop_path(@shop)
    else
      render :action => :new
    end
  end
end

# shops/_form.html.erb
<%= form_for @shop, :url => { :action => action, :type => type }, :html => { :multipart => true } do |f| %>
  <%= f.text_field :name %>
  <%= f.file_field :shop_photos_data, :multiple => true, :name => "shop[photos_attributes][][data]" %>
<% end %> 
```

我试图把它放进去，`photo.rb`但它返回`user`为零：

```
 after_create :save_associated_user

  private

  def save_associated_user
    self.user_id = self.user
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:22:46.270

您需要 attr_accessible user_id，而不是用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:43:15.783

在表单中，您必须在 photos_attributes 中设置 user_id，如下所示，

```
<%= form_for @shop, :url => { :action => action, :type => type }, :html => { :mult ipart  => true } do |f| %>
  <%= f.text_field :name %>
  <%= f.file_field :shop_photos_data, :multiple => true, :name => "shop[photos_attributes][][data]" %>
  <%= f.hidden_field :shop_photos_user_id, :value => current_user.id, :multiple => true, :name => "shop[photos_attributes][][user_id]" %>
<% end %> 
```

提交后，您需要调用一些回调来更新 users 表中的 photos_count

# silverlight - 为什么我不能绑定任何东西？

> ID：13363362
> 
> 赞同：0
> 
> 时间：2012-11-13T15:16:38.280
> 
> 标签：silverlight, data-binding, expression-blend

![在此处输入图像描述](../Images/802d5b2b4d53f14a536a804ea3bb3ef4.png)

出于某种原因，我无法再通过 Expression Blend 绑定任何内容。我必须进入 XAML 并在那里绑定东西，这是一个真正的生产力杀手。在上面的屏幕截图中，绝对没有理由不启用 OK 并且可以单击。这是一个已知的错误？难道我做错了什么？我的 XAML 已签出且不是只读的。如果我手动绑定控件并返回绑定对话框工作正常。这种情况到处都有各种绑定。

我还在[此处](http://social.expression.microsoft.com/Forums/en-US/blend/thread/5df874a3-4045-42aa-b48f-0c9eaaf43a5a)的 Expression Blend 论坛上发布了此内容。

**编辑：**

我最近将我的项目插入 TFS 2012。它之前在 Source Safe 中（是的，我知道）。该文件已签出并且未设置为只读。但是这种变化可能会导致问题吗？有人吗？

**进一步编辑：**

这真是令人沮丧。Expression Blend 论坛上的一个人告诉我，我可以做一些事情来让它发挥作用。每当我想绑定某些东西时，都必须切换到 XAML，这是一个真正的生产力吸盘。它也不仅仅是元素绑定，它的所有绑定都是这样的。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:45:37.340

这是微软意识到的一个错误。您可以找到更多信息；

[http://social.msdn.microsoft.com/forums/en-US/blend/thread/3da0b61e-cf0a-48c7-9f6e-30c07dfe6ad7](http://social.msdn.microsoft.com/forums/en-US/blend/thread/3da0b61e-cf0a-48c7-9f6e-30c07dfe6ad7)

和...

[http://social.msdn.microsoft.com/forums/he-IL/blend/thread/002b36d0-dffc-444d-81a2-4067797516a6](http://social.msdn.microsoft.com/forums/he-IL/blend/thread/002b36d0-dffc-444d-81a2-4067797516a6)

尽管我不确定是否有提交给 MSConnect，即使 MSFT 的 Erik 说它“在他的待办事项清单上”。希望这可以帮助...

# android - Android中Canvas错误中的触摸事件

> ID：13363367
> 
> 赞同：0
> 
> 时间：2012-11-13T15:16:59.980
> 
> 标签：android, events, touch

描述：

我创建了使用画布绘制矩形的视图，并在该视图中实现了 On Touch Event。

我希望这种接触能够启动新的活动。

问题：

现在的问题是每当我触摸矩形“强制关闭”错误时就会弹出。

这是 PickCardView.java

```
 public class PickCardView extends View
    {   
    private Paint mCanvasPaint;

    private Rect mScreenSize = new Rect();

    private Rect mCardSize = new Rect();
    private int mCardCap;

    private Card MCards;

    public PickCardView(Context context) 
    {
        super(context);

        mCanvasPaint = new Paint();
        mCanvasPaint.setColor(0xFF228B22); // Green background
        mCanvasPaint.setAntiAlias(false);
        mCanvasPaint.setFilterBitmap(false);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) 
    {
        super.onSizeChanged(w, h, oldw, oldh);

        // Store current screen size
        mScreenSize.set(0, 0, w, h);

        // Calculate card and decks sizes and positions
        int cw = w / 11;
        mCardSize.set(0, 0, cw, (int) (cw * 1.5));
        Log.v("card size", mCardSize.toString());

        int freeSize = w - cw * 7; //117
        mCardCap = freeSize / (6 + 4 * 2);//5

        int cy = (int) (mScreenSize.height() * 0.35);

        //MIDDLE CARD HOLDER
        MCards = new Card(Card.CardType.PickDeck, mCardCap * 2 + mCardSize.width()*4 - 15, cy - 20, mCardSize.width()+60, mCardSize.height()+60);
    }

    @Override
    public void onDraw(Canvas canvas) 
    {
        mCanvasPaint.setStyle(Style.FILL);
        canvas.drawRect(mScreenSize, mCanvasPaint);

        MCards.doDraw(canvas);     
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        int action = event.getAction();

        if (action == MotionEvent.ACTION_DOWN) 
        {
            int x = (int) event.getX();
            int y = (int) event.getY();

            Card card = getCardUnderTouch(x, y);

            if(card != null)
            {
                Intent i = new Intent(null, BuildWord.class);  
                startActivity(i);
            }
        }

        return true;
    }

    private void startActivity(Intent i) 
    {
        //Intent i1 = new Intent(null, BuildWord.class);        
    }

    private Card getCardUnderTouch(int x, int y) 
    {
        Card ret = null;

        if (MCards.isUnderTouch(x, y)) 
        {
            return MCards;
        }

        return ret;
    }
} 
```

当我触摸该矩形时，这是 logcat 中显示的错误：

```
11-13 21:07:12.037: E/InputEventReceiver(712): Exception dispatching input event.
11-13 21:07:12.037: E/MessageQueue-JNI(712): Exception in MessageQueue callback: handleReceiveCallback
11-13 21:07:12.138: E/MessageQueue-JNI(712): java.lang.NullPointerException
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.content.ComponentName.<init>(ComponentName.java:75)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.content.Intent.<init>(Intent.java:3301)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at apk.gameshufflewords.PickCardView.onTouchEvent(PickCardView.java:79)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.View.dispatchTouchEvent(View.java:7127)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.View.dispatchPointerEvent(View.java:7307)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.os.MessageQueue.nativePollOnce(Native Method)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.os.MessageQueue.next(MessageQueue.java:125)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.os.Looper.loop(Looper.java:124)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at java.lang.reflect.Method.invokeNative(Native Method)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at java.lang.reflect.Method.invoke(Method.java:511)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 21:07:12.138: E/MessageQueue-JNI(712):    at dalvik.system.NativeStart.main(Native Method)
11-13 21:07:12.167: D/AndroidRuntime(712): Shutting down VM
11-13 21:07:12.167: W/dalvikvm(712): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-13 21:07:12.267: E/AndroidRuntime(712): FATAL EXCEPTION: main
11-13 21:07:12.267: E/AndroidRuntime(712): java.lang.NullPointerException
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.content.ComponentName.<init>(ComponentName.java:75)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.content.Intent.<init>(Intent.java:3301)
11-13 21:07:12.267: E/AndroidRuntime(712):  at apk.gameshufflewords.PickCardView.onTouchEvent(PickCardView.java:79)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.View.dispatchTouchEvent(View.java:7127)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
11-13 21:07:12.267: E/AndroidRuntime(712):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
11-13 21:07:12.267: E/AndroidRuntime(712):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
11-13 21:07:12.267: E/AndroidRuntime(712):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.View.dispatchPointerEvent(View.java:7307)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.os.MessageQueue.nativePollOnce(Native Method)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.os.MessageQueue.next(MessageQueue.java:125)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.os.Looper.loop(Looper.java:124)
11-13 21:07:12.267: E/AndroidRuntime(712):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 21:07:12.267: E/AndroidRuntime(712):  at java.lang.reflect.Method.invokeNative(Native Method)
11-13 21:07:12.267: E/AndroidRuntime(712):  at java.lang.reflect.Method.invoke(Method.java:511)
11-13 21:07:12.267: E/AndroidRuntime(712):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 21:07:12.267: E/AndroidRuntime(712):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 21:07:12.267: E/AndroidRuntime(712):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:28:56.350

将 onTouchEvent 更改为

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
int action = event.getAction();

if (action == MotionEvent.ACTION_DOWN) 
{
    int x = (int) event.getX();
    int y = (int) event.getY();

    Card card = getCardUnderTouch(x, y);

    if(card != null)
    {
        Context context = getContext();
        Intent i = new Intent(context, BuildWord.class);  
        context.startActivity(i);
    }
}

return true;
} 
```

删除你的 startActivity 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:30:13.473

您正在以下行中创建一个新`Intent`的上下文：`null`

```
Intent i = new Intent(null, BuildWord.class); 
```

您应该执行以下操作：

```
Context mContext;
public PickCardView(Context context) 
{
    super(context);
    mContext = context;
    ...
} 
```

然后将意图行替换为：

```
Intent i = new Intent(mContext, BuildWord.class); 
```

问候。

# html - 使用 CSS 更改 HTML 列表边距

> ID：13363368
> 
> 赞同：2
> 
> 时间：2012-11-13T15:17:00.027
> 
> 标签：html, css

我想减少子项目符号之间的边距大小。下面用红色标记了一个示例。如何使用 CSS 完成此任务？

![保证金变化](../Images/c8b897749abab40e7da0e24e02c98c83.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:18:11.833

### 可以通过 CSS 完成：

```
ul li ul {margin-left: 10px;} 
```

### 演示：[小提琴](http://jsfiddle.net/BUa9Z)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:21:29.047

有几种方法可以做到：

```
ul ul {margin-left: 10px;} 
```

或者

```
ul li ul {margin-left: 10px;} 
```

或者

```
ul ul li {margin-left: 10px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:29:59.373

嗨，这些是列表的默认边距，最好重置所有边距，然后根据需要设置：

```
div, li, ul, img, body, html {margin:0px;padding:0px;} 
```

重置后设置为您喜欢的：

```
li {margin-left:10px;} 
```

这将适用于所有 li 元素，如果嵌套，下一个列表项也将与前一个相距 10px。边距意味着一个元素和下一个元素之间的空间，所以如果你在 li 上设置一个边距，它将适用于每个 li，如果嵌套它，它将看起来像一个楼梯，如果这就是你所追求的，如果你只想要第一级 li 的边距，但不是第二次添加这个：

```
li li {margin:0px;} 
```

# php - 来自自定义词汇表的自动网站工具提示？

> ID：13363371
> 
> 赞同：0
> 
> 时间：2012-11-13T15:17:08.717
> 
> 标签：php, jquery, tooltip

我有一个包含大量技术内容的 PHP 网站。我为网站上使用的一些比较晦涩的术语创建了一个词汇表。我希望在用户将鼠标悬停在这些术语之一上时显示工具提示（或提示气泡，无论它们被称为什么）。

我发现了大量的 jQuery 扩展似乎可以满足我的需求，但它们需要通过将`span`标签设置为特定类来手动链接到每个术语实例。

我希望这个自动完成。我应该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:32:19.633

我建议在服务器端进行此操作。当页面上有很多元素时，jQuery 插件会减慢页面速度。你可能会得到类似的东西：

```
$content = "<p>Lorem ajax ipsum</p>";

$terms = array(
    'ajax' => 'Asynchronous JavaScript and XML',
);

foreach ($terms as $term => $explained) {
    $content = str_replace($term, '<acronym title="' . htmlspecialchars($explained) . '">' . $term . '</acronym>', $content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-27T07:50:29.913

我建立了[sroes](https://stackoverflow.com/users/616859/sroes)的答案，但需要解决两个问题：

*   **部分词**，即在定义“说唱”时，您不想在“那些猛禽”中替换它
*   **替换 self**，即“歌曲”的定义包括“说唱”一词，然后将再次替换它，从而导致定义之上的定义。

这个例子可能会通过正则表达式或其他一些方法来删除嵌套的 foreach 循环，欢迎提出建议 - 但请记住在 stritr 中的串行替换。

```
function add_glossary_tooltips($text) {
    global $glossary;
    if(empty($glossary))
        return $text;
    // Create array of replacements, using only individual
    // words surrounded by spaces or other punctuation

    $endings = array(
        '.',
        ' ',
        ',',
        '!',
        '-',
        '?',
        '&',
    );
    $beginnings = array(
        '-',
        ' ',
    );
    $replacements = array();
    foreach ($glossary as $entry) {
        $clean_defintion = htmlentities(strip_tags($entry['definition']), ENT_QUOTES);
        $replacement = "<abbr
                class='tooltip'
                title='".$clean_defintion."'
            >"
            .$entry['glossary_word']
            ."</abbr>";
        foreach ($endings as $ending) {
            foreach ($beginnings as $beginning) {
                $replacements[$beginning.$entry['glossary_word'].$ending] = $beginning.$replacement.$ending;
            }
        }
    }

    $text = stritr($text, $replacements);

    return $text;
} 
```

这由不区分大小写的自定义 strstr 支持。（不是我的作品）

```
function stritr($string, $one = NULL, $two = NULL){
/*
stritr - case insensitive version of strtr
Author: Alexander Peev
Posted in PHP.NET
*/
    if(  is_string( $one )  ){
        $two = strval( $two );
        $one = substr(  $one, 0, min( strlen($one), strlen($two) )  );
        $two = substr(  $two, 0, min( strlen($one), strlen($two) )  );
        $product = strtr(  $string, ( strtoupper($one) . strtolower($one) ), ( $two . $two )  );
        return $product;
    }
    else if(  is_array( $one )  ){
        $pos1 = 0;
        $product = $string;
        while(  count( $one ) > 0  ){
            $positions = array();
            foreach(  $one as $from => $to  ){
                if(   (  $pos2 = stripos( $product, $from, $pos1 )  ) === FALSE   ){
                    unset(  $one[ $from ]  );
                }
                else{
                    $positions[ $from ] = $pos2;
                }
            }
            if(  count( $one ) <= 0  )break;
            $winner = min( $positions );
            $key = array_search(  $winner, $positions  );
            $product = (   substr(  $product, 0, $winner  ) . $one[$key] . substr(  $product, ( $winner + strlen($key) )  )   );
            $pos1 = (  $winner + strlen( $one[$key] )  );
        }
        return $product;
    }
    else{
        return $string;
    }
}/* endfunction stritr */ 
```

# android - keysexposed 资源限定符

> ID：13363374
> 
> 赞同：2
> 
> 时间：2012-11-13T15:17:22.697
> 
> 标签：android, android-resources

有人可以解释`keysexposed`资源限定符的含义吗？[该文档](http://developer.android.com/guide/topics/resources/providing-resources.html#KeyboardAvailQualifier)完全无法理解：*警告，如果您的大脑不稳定，请不要阅读！*

> **keysexposed：**设备有可用的键盘。如果设备启用了软件键盘（很可能），即使硬件键盘没有暴露给用户，即使设备没有硬件键盘，也可以使用它。如果没有提供软件键盘或它被禁用，那么这仅在暴露硬件键盘时使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:39:15.837

好的，我没有在任何地方使用过它，但我将借助简单的英语语义来理解您引用的文档摘录。

`keysexposed:`哈哈！易变的大脑。

`Device has a keyboard available.`这只是说明它假设运行应用程序的设备具有硬件键盘。

`If the device has a software keyboard enabled (which is likely),`具有硬件键盘的设备有时具有“滑入式”键盘或其他禁用硬件键的选项。`this may be used even when the hardware keyboard is not exposed to the user`意味着键盘处于“滑入”状态（因此对用户不可见）。`even if the device has no hardware keyboard.`这也可以用于设备根本没有硬件键盘的明显情况。

`If no software keyboard is provided or it's disabled, then this is only used when a hardware keyboard is exposed.`如果软件键盘被禁用，那么在这种情况下，无论您向哪个资源添加此限定符，只有当硬件键盘暴露给用户时才会显示（即，它处于“滑出”状态）。

因此，基本上将此限定符添加到资源意味着如果启用了软件键盘，它将一直使用它。但是如果软件键盘不可用/禁用，那么它只会在硬件键盘“暴露”给用户时使用，即滑出。

# passwords - 从 ASP.NET Membership Provider 获取散列密码

> ID：13363383
> 
> 赞同：1
> 
> 时间：2012-11-13T15:17:59.697
> 
> 标签：passwords, asp.net-membership, membership-provider

MembershipProvider（或 Membership 实例）上是否有任何方法可以用来获取散列密码本身？我不是要进行恢复，也不是要查找实际密码，我只需要散列字符串。

另外，当我使用它时，我能否获得用于创建该哈希的确切算法名称（如 SHA1 或 MD5）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:55:29.653

不，我找不到任何返回 HashedPassword 的方法。即使你得到了HashedPassword，你仍然需要salt。

默认哈希算法是 salted base64 `SHA1`。

```
public string EncodePassword(string pass, string saltBase64) 
{ 
   byte[] bytes = Encoding.Unicode.GetBytes(pass); 
   byte[] src = Convert.FromBase64String(saltBase64); 
   byte[] dst = new byte[src.Length + bytes.Length]; 
   Buffer.BlockCopy(src, 0, dst, 0, src.Length); 
   Buffer.BlockCopy(bytes, 0, dst, src.Length, bytes.Length); 
   HashAlgorithm algorithm = HashAlgorithm.Create("SHA1"); 
   byte[] inArray = algorithm.ComputeHash(dst); 
   return Convert.ToBase64String(inArray); 
} 
```

# c# - DataGridViewComboBox 列数据源

> ID：13363395
> 
> 赞同：0
> 
> 时间：2012-11-13T15:18:47.323
> 
> 标签：c#, datagridview, datagridcomboboxcolumn

我需要将 DataGridView 绑定到将通过 Oledb 填充的数据表。

这部分不是问题，但我想做的是替换 DataGridView 的一些标准列，并将它们替换为 DataGridViewComboBox 列。

然后这些列将拥有自己的数据源，这将允许最终用户将默认数据值更改为项目集合中的数据值之一。

有没有人为这种任务提供任何像样的链接或教程？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:32:52.403

我设法让测试工作。我希望这可以帮助其他需要帮助的人。这是一个非常基本的测试。但它有效。

```
public DataTable Orders = new DataTable("Order_Table");

        private void Form1_Load(object sender, EventArgs e)
        {

            // Create Orders Table
            Orders.Columns.Add("Order_ID");
            Orders.Columns.Add("Product_ID");

            DataRow row = Orders.NewRow();

            row["Order_ID"] = "1";
            row["Product_ID"] = "23";

            Orders.Rows.Add(row);

            DataRow row1 = Orders.NewRow();

            row1["Order_ID"] = "2";
            row1["Product_ID"] = "24";

            Orders.Rows.Add(row1);

            // Bind to Orders Table
            BindingSource bs = new BindingSource();
            bs.DataSource = Orders;
            // Bind DataGrid to Binding Source.
            dataGridView1.DataSource = bs;

            // Create Product Table

            DataTable productTable = new DataTable();

            productTable.Columns.Add("Product_ID");
            productTable.Columns.Add("Product_Description");

            DataRow rw1 = productTable.NewRow();

            rw1["Product_ID"] = "23";
            rw1["Product_Description"] = "Pantera Home Videos";

            DataRow rw2 = productTable.NewRow();

            rw2["Product_ID"] = "24";
            rw2["Product_Description"] = "Muse Videos";

            DataRow rw3 = productTable.NewRow();

            rw3["Product_ID"] = "25";
            rw3["Product_Description"] = "Megadeth Videos";

            productTable.Rows.Add(rw1);
            productTable.Rows.Add(rw2);
            productTable.Rows.Add(rw3);

            // Create ComboBoxColum

            DataGridViewComboBoxColumn combo = new DataGridViewComboBoxColumn();

            // Set Its Datasource for the CombBox  to the Product Table
            combo.DataSource = productTable;
            combo.HeaderText = "Product_ID";

            // CHoose Display Member.
            combo.DisplayMember = "Product_ID";

            // Set the DataProperty to the Existing column.
            combo.DataPropertyName = "Product_ID";

            // Add ComboBocColumn to DataGrid.
            dataGridView1.Columns.Add(combo);

            // Hide the Bound Product_ID Column from the Orders Table
            dataGridView1.Columns[1].Visible = false;

        }

        private void button1_Click(object sender, EventArgs e)
        {

           // Record to XML to test changes in DataGrid are effecting the Bound Orders table.
           Orders.WriteXml(@"c:\Test\Output.xml");
        } 
```

# android - GPS 无法在我的 Android 上搜索

> ID：13363396
> 
> 赞同：0
> 
> 时间：2012-11-13T15:18:48.023
> 
> 标签：android, gps, location

我是 android 编程新手，我的应用程序有问题。我的 Gps 只是不搜索位置或其他任何东西。是的，我的 GPS 已开启。清单包含许可：ACCESS_COARSE_LOCATION 和 ACCESS_FINE_LOCATION。

有人可以帮我吗？

```
public class LocationTest extends Activity implements
  LocationListener { 
private static final String[] A = { "invalid", "n/a", "fine", "coarse" };
private static final String[] P = { "invalid", "n/a", "low", "medium",
     "high" };
private static final String[] S = { "out of service",
     "temporarily unavailable", "available" };

private LocationManager mgr;
private TextView output;
private String best;

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  mgr = (LocationManager) getSystemService(LOCATION_SERVICE); 
  output = (TextView) findViewById(R.id.output);

  log("Location providers:");
  dumpProviders(); 

  Criteria criteria = new Criteria(); 
  best = mgr.getBestProvider(criteria, true);
  log("\nBest provider is: " + best);

  log("\nLocations (starting with last known):");
  if (best != null) {  
     Location location = mgr.getLastKnownLocation(best);
     dumpLocation(location);
  }
}

@Override
protected void onResume() {
  super.onResume();
  // Start updates (doc recommends delay >= 60000 ms)
  if (best != null) {
     mgr.requestLocationUpdates(best, 15000, 1, this);
  }
  }

 @Override
protected void onPause() {
  super.onPause();
  // Stop updates to save power while app paused
  mgr.removeUpdates(this);
}

public void onLocationChanged(Location location) {
  dumpLocation(location);
}

public void onProviderDisabled(String provider) {
  log("\nProvider disabled: " + provider);
}

public void onProviderEnabled(String provider) {
  log("\nProvider enabled: " + provider);
}

public void onStatusChanged(String provider, int status,
     Bundle extras) {
  log("\nProvider status changed: " + provider + ", status="
        + S[status] + ", extras=" + extras);
}

/** Write a string to the output window */
private void log(String string) {
  output.append(string + "\n");
}

/** Write information from all location providers */
private void dumpProviders() {
  List<String> providers = mgr.getAllProviders();
  for (String provider : providers) {
     dumpProvider(provider);
  }
}

/** Write information from a single location provider */
private void dumpProvider(String provider) {
  LocationProvider info = mgr.getProvider(provider);
  StringBuilder builder = new StringBuilder();
  builder.append("LocationProvider[")
        .append("name=")
        .append(info.getName())
        .append(",enabled=")
        .append(mgr.isProviderEnabled(provider))
        .append(",getAccuracy=")
        .append(A[info.getAccuracy() + 1])
        .append(",getPowerRequirement=")
        .append(P[info.getPowerRequirement() + 1])
        .append(",hasMonetaryCost=")
        .append(info.hasMonetaryCost())
        .append(",requiresCell=")
        .append(info.requiresCell())
        .append(",requiresNetwork=")
        .append(info.requiresNetwork())
        .append(",requiresSatellite=")
        .append(info.requiresSatellite())
        .append(",supportsAltitude=")
        .append(info.supportsAltitude())
        .append(",supportsBearing=")
        .append(info.supportsBearing())
        .append(",supportsSpeed=")
        .append(info.supportsSpeed())
        .append("]");
  log(builder.toString());
}

/** Describe the given location, which might be null */
private void dumpLocation(Location location) {
  if (location == null)
     log("\nLocation[unknown]");
  else
     log("\n" + location.toString());
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:38:11.787

我通常不这样做，但我几乎不得不去。这是我使用的代码，它有效。（只需将其放在一个新项目中）。我没有清理它，因为我从我的另一个项目中撕下了它，但是当你创建一个新项目并复制/粘贴它时它确实有效。：

```
import java.util.Timer;
import java.util.TimerTask;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.widget.Toast;

public class MainActivity extends Activity {
    Timer timer1;
    LocationManager lm;
    boolean gps_loc = false;
    boolean gps_enabled=false;
    boolean network_enabled=false;
    double lat;
    double lng;
    String gps_location;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getLocation(this, locationResult);
    }

    public LocationResult locationResult = new LocationResult() {
        public void gotLocation(final Location location) {
            try {
                lat = location.getLatitude();
                lng = location.getLongitude();
                if (lat != 0.0 && lng != 0.0) {
                    String sLat;
                    String sLng;
                    sLat = Double.toString(lat);
                    sLng = Double.toString(lng);
                    gps_location = sLat + " " + sLng;
                    Toast.makeText(getBaseContext(), "We got gps location!",
                            Toast.LENGTH_LONG).show();
                    System.out.println("We got gps");
                    System.out.println("lat = "+lat);
                    System.out.println("lng = "+lng);
                }
            } catch (Exception e) {

            }
        }
    };

    public boolean getLocation(Context context, LocationResult result)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.

        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled){

          return false;
        }
        if(gps_enabled){
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        }
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 35000);

        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
       @Override
        public void run() {

             lm.removeUpdates(locationListenerGps);
             lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 else
                     locationResult.gotLocation(net_loc);
                 return;
             }

             if(gps_loc!=null){

                 locationResult.gotLocation(gps_loc);
                 return;
             }
             if(net_loc!=null){
                 locationResult.gotLocation(net_loc);

                 return;

             }
             locationResult.gotLocation(null);
        }

    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }

} 
```

还要在清单中添加：

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

现在没有时间解释，如果你仍然需要它，也许明天。

它会在您的 logcat 中打印纬度和经度。

# asp.net - 将 Web 服务从本地主机更改为服务器

> ID：13363397
> 
> 赞同：0
> 
> 时间：2012-11-13T15:18:50.250
> 
> 标签：asp.net, visual-studio-2010, wcf, web-services, deployment

我已经创建了一个小型 WCF 服务。

我可以编辑它并让它在本地主机上运行良好，但我的 PC 不是运行此应用程序的地方。它将在我们的服务器上运行。

但是，每次我尝试对指向我们服务器的项目进行任何类型的更改时，整个项目都会变成废话：我无法再在浏览器中查看该项目，并且我的测试控制台应用程序无法连接到它。我尝试将其更改回使用本地 IIS Web 服务器，但是每当项目启动时本地计算机都不会启动 IIS，因此它也不起作用。

我可以调试和排除一天左右的故障，让它在本地机器上再次运行，但是我回到 Square 1，我需要将我的应用程序部署到我们的服务器上。

这太让人抓狂了！

我的项目有效，但我似乎无法将它从 Localhost 获取到真正的服务器。

我在网上找到的所有示例都显示了如何使用 Localhost 执行此操作。没有人部署过他们的项目吗？

从开发阶段到部署的指南在哪里？

![截屏](../Images/59641ef79ee93763e564fcb96dd8e392.png)

![错误](../Images/9cc964fa1066981b37f31242f1848355.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:56:15.703

这里有一些不错的教程

[http://www.dotnetspider.com/forum/193466-Deploy-Wcf-service-IIS.aspx](http://www.dotnetspider.com/forum/193466-Deploy-Wcf-service-IIS.aspx)

[http://wcftutorial.net/WCF-IIS-Hosting.aspx](http://wcftutorial.net/WCF-IIS-Hosting.aspx)

[当它只有一个 App.config 时，](https://stackoverflow.com/questions/1246849/deploy-wcf-service-to-iis-when-it-only-has-an-app-config)也在 SO Deploy WCF Service to IIS

还有 youtube 上的视频[http://www.youtube.com/watch?v=mX8quq7MoeI](http://www.youtube.com/watch?v=mX8quq7MoeI)

# repository - 用于文档库的 Alfresco Share 站点的 dashlet

> ID：13363398
> 
> 赞同：1
> 
> 时间：2012-11-13T15:18:57.677
> 
> 标签：repository, share, alfresco, sites

我想知道是否存在任何 dashlet 可以让您探索网站的文档库。据我所知，不存在这种开箱即用的 dashlet，只有“站点内容”dashlet，但它略有限制。

我一直在四处搜索和“谷歌搜索”，我发现这些有用的资源可以作为一个有用的起点，如果我必须创建自己的：

[http://ecmarchitect.com/archives/2012/05/08/1592](http://ecmarchitect.com/archives/2012/05/08/1592)

[http://code.google.com/p/fme-alfresco-extensions/wiki/GalleryPlusDashlet2](http://code.google.com/p/fme-alfresco-extensions/wiki/GalleryPlusDashlet2)

有人知道更多针对此问题的仪表板/资源吗？有什么建议吗？

作为一个临时解决方案，我还在考虑利用“Web 视图”dashlet 的可能性，方法是在其中配置检索文档库页面中的***文档******列表***区域/组件的URL 。例如：**share/page/components/documentlibrary/documentlist**或**share/page/site/{site}/documentlibrary?region=documentlist**。也许这很疯狂，或者我所说的没有任何意义，但这只是一个想法。

 *****我刚刚想到的另一个想法是创建自定义 Surf/Share 页面的选项，其中包括实现文档库资源管理器的组件/webscript，特别是 documentlist 组件。然后配置“Web 视图”dashlet，提供指向创建的自定义页面的 URL。这有意义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:56:55.900

[您将在https://github.com/bhagyas/alfresco-visualization-tools](https://github.com/bhagyas/alfresco-visualization-tools)上看到一些关于 Alfresco 可视化工具的站点可视化和导航小板。该项目仍处于初始阶段，但您会发现有趣的代码片段，用于在 dashlet 中检索文档库内容树。

就在一周前，我在柏林的 Alfresco DevCon 上展示了这个项目，带来了交互式导航和内容分析。如果有兴趣，您可以在 Alfresco 的 DevCon 2012 站点的 lightening talk slides 中找到这些幻灯片。

干杯! =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:23:03.950

嗨，我做了完全相同的事情，Dashlet 并不真正需要它，而是将站点的文档库嵌入到另一个站点的 iframe 中。

所以我所做的确实是创建了一个新的页面模板嵌入文档库。

我首先复制了以下文件并重命名它们：

1.  站点数据/页面/documentlibrary.xml
2.  站点数据/模板实例/documentlibrary.xml
3.  网站-webscripts/org/alfresco/documentlibrary.ftl

如果重命名文件 3 或将其放在另一个文件夹中，则需要检查文件 1 和 2 中的路径。

因此，为了只显示文档库而不是所有内容，我只是删除了`<div id="alf-hd">`标签内文件 3 中的所有内容。

如果您删除标签，文档树也将被删除，并给出一些 javascript 错误。这应该在最新版本中修复，但没有绑定。

因此，创建自己的页面非常容易，无需导航到站点/文档库，您只需导航到站点/嵌入式文档库或您选择的名称即可。

是的，那么您需要使用 web-view Dashlet 来显示它。

您唯一需要知道的是，链接在 iframe 中打开。因此，如果您使用 web-view Dashlet，您需要在新窗口中打开链接。对于我的情况，我需要一个 iframe，在您的情况下，您也可以让 Dashlet 中的 freemarker 呈现所需的组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T06:48:57.763

在 alfresco 附加列表中有一个可用的文档库显示仪表板，可用于在站点仪表板上显示来自文档库的所有文档。 [http://addons.alfresco.com/addons/document-library-display-dashlet](http://addons.alfresco.com/addons/document-library-display-dashlet)*****

# clearcase - 如何将 clearcase 视图与流或 vob 相关联？

> ID：13363399
> 
> 赞同：1
> 
> 时间：2012-11-13T15:18:59.523
> 
> 标签：clearcase

下面的命令是创建一个视图：
**ct mkview -tag *myview* /var/tmp/your-username_dynview.vws**

但是，我们怎么知道 [ *myview* ] 是某个流的视图？上面的命令没有指定参数来指示视图用于哪个流。

请阅读：
[https ://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.tutorial.doc/topics/a_crview_ux.htm](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.tutorial.doc/topics/a_crview_ux.htm)

是因为上面的命令是用于基本 clearcase 视图，而不是用于 UCM 视图吗？如果是这样，视图如何在基本 clearcase 中使用 stream 或 vob ？我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:27:43.540

您需要添加`-stream`参数（按照[cleartool`mkview`手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkview.htm)）。

```
ct mkview -tag myview -stream MyStream@/vobs:MyPVob /var/tmp/your-username_dynview.vws 
```

参见例如“[如何在 ClearCase 中创建某些项目或流的快照视图？](https://stackoverflow.com/a/1367656/6309) ”。

```
-str/eam stream-selector 
```

> 指定 UCM 流。正在创建的视图附加到此流。（不能与 –reg/ion 一起使用。）
> 
> `stream-selector`格式为`[stream:]stream-name[@vob-selector]`，其中`vob-selector`指定流的项目 VOB。

所以这`-stream`是基本 ClearCase 视图和 UCM 视图之间的唯一区别。

# vb.net - 刷新后在asp.net中对gridview进行排序

> ID：13363402
> 
> 赞同：-2
> 
> 时间：2012-11-13T15:19:03.343
> 
> 标签：vb.net, sorting, refresh, dopostback

我在我的 asp 页面中使用 sql 数据源创建了一个网格。所以排序是在构建控件中使用 asp.net 自动完成的（在 vb.net 中没有添加用于排序的代码）。

但是如果我刷新页面或转到其他页面，排序顺序就会消失。

有没有办法捕捉之前的排序顺序（排序方向和排序表达式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:24:20.553

在页面`PreRender`事件中，将当前值`GridView.SortDirection`和`GridView.SortExpression`属性存储在，例如`Session`：

```
this.Session[this.GetType().FullName + ".GridView.SortDirection"] = this.GridView.SortDirection;
this.Session[this.GetType().FullName + ".GridView.SortExpression"] = this.GridView.SortExpression; 
```

在页面`Init`事件上执行此代码：

```
if (!this.IsPostBack && this.Session.Contains(this.GetType.FullName + ".GridView.SortDirection"))
{
    this.GridView.SortDirection = (SortDirection)this.Session[this.GetType().FullName + ".GridView.SortDirection"];
    this.GridView.SortExpression = (string)this.Session[this.GetType().FullName + ".GridView.SortExpression"];
} 
```

# python - Errno 10054 现有连接被远程主机强行关闭。- 如何调试？

> ID：13363403
> 
> 赞同：5
> 
> 时间：2012-11-13T15:19:05.467
> 
> 标签：python, google-app-engine

我第一次使用 Google App Engine，我对这个错误有点困惑，我无法理解如何进一步调试它。

我在我的帐户下创建了一个应用程序，然后我尝试通过 Google App Engine Launcher 将 python 文件上传到其中。但我不断收到这个错误。

```
08:39 PM Host: appengine.google.com
08:39 PM Application: gappproxytestapp; version: 1
08:39 PM 
Starting update of app: gappproxytestapp, version: 1
08:39 PM Getting current resource limits.
2012-11-13 20:40:32,505 ERROR appcfg.py:2202 An error occurred processing file '': <urlopen error [Errno 10054] An existing connection was forcibly closed by the remote host>. Aborting. 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 171, in <module>
    run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 167, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4322, in <module>
    main(sys.argv)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4313, in main
    result = AppCfgApp(argv).Run()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2599, in Run
    self.action(self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4048, in __call__
    return method()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3065, in Update
    self.UpdateVersion(rpcserver, self.basepath, appyaml)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3047, in UpdateVersion
    lambda path: self.opener(os.path.join(basepath, path), 'rb'))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2172, in DoUpload
    self.resource_limits = GetResourceLimits(self.rpcserver, self.config)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 357, in GetResourceLimits
    resource_limits.update(GetRemoteResourceLimits(rpcserver, config))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 328, in GetRemoteResourceLimits
    version=config.version)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 389, in Send
    f = self.opener.open(req)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
    **return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Program Files (x86)\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 383, in do_open
    raise url_error
urllib2.URLError: <urlopen error [Errno 10054] An existing connection was forcibly closed by the remote host>
2012-11-13 20:40:32 (Process exited with code 1)**

You can close this window now. 
```

我该如何进一步调试？似乎 urllib2 的 HTTPS 有问题。但这很奇怪，因为我没有使用任何本地代理，而且我从未遇到任何其他 HTTPS 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-13T19:12:13.587

我遇到了同样的问题。我关闭了 Google App Engine Launcher 并再次启动它，并尝试上传该应用程序，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T12:20:27.203

我遇到了同样的问题。即使我尝试不同的 PC、操作系统、更新最新的 SDK 或其他解决方案，它也不起作用。我怀疑这是 Google App Engine 服务器端的问题。等了一天，一切都好。**所以如果你有同样的问题，等一天**可能是个不错的选择。

# php - 在 PHP 和 MySql 中多次打印记录

> ID：13363406
> 
> 赞同：0
> 
> 时间：2012-11-13T15:19:14.217
> 
> 标签：php, javascript, html, mysql

我正在尝试创建一个网页，该网页对表格进行简单查询并将表格显示到页面，但有一个复杂的转折让我感到困惑。以下是表格中的列名和一个示例记录，以逗号分隔：

```
R_ID ,  B_ID ,  R_No ,  RoomName , showers , eyewashPlumbed , EyewashBottles  
1 , 609 ,   609 ,   Hazardous Waste Shed ,  1   ,   1    ,  1 
```

我需要打印此表的每一行，但如果淋浴、洗眼液或洗眼瓶大于 0，我还需要打印多行。例如，我将打印此行 3 次。如果淋浴数为 0，我只会打印两次（一次用于 eyewashPlumbed，一次用于 EyewashBottles，0 用于淋浴）。如果阵雨是 2，我会打印 4 次，等等。

我用来打印的代码如下：

```
<?php while ($row = mysql_fetch_array($result, MYSQL_ASSOC)): ?> 
    <tr>
    <td><?php print $row["B_ID"];?></td> 
    <td><?php print $row["R_No"];?></td> 
    <td><?php print $row["RoomName"];?></td>
    <td><?php print $row["Showers"];?></td>
    <td><?php print $row["eyewashPlumbed"];?></td>
    <td><?php print $row["EyewashBottles"];?></td>  
    </tr>
<?php endwhile; ?> 
```

问题是我不知道如何中断 while 循环以便多次打印同一行。当它从 mysql_fetch_array 中提取时，它会进入下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:23:55.223

您确实应该切换到 PDO / mysqli，但是使用您当前的代码，它将类似于（`showers`在您的示例中）：

```
<?php
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)):
  $count = 2 + $row["showers"];
  for ($i = 0; $i < $count)
  {
?> 
    <tr>
    <td><?php print $row["Date"];?></td> 
    <td><?php print $row["Inspector1"];?></td> 
    <td><?php print $row["Inspector2"];?></td>
    <td><?php print $row["Building_Name"];?></td>
    <td><?php print $row["Room"];?></td>
    <td><?php print ($i + 1);?></td>  
    </tr>
<?php
  }
endwhile;
?> 
```

您可能想要更改`$row["shower_no"]`为类似`$i + 1`的内容，因为该列未出现在您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:37:03.970

如果你有各种各样的规则

我会这样处理这个问题：

```
<?php 

function printRow($row=array(), $times=1) {
    for($i=0; $i<$times; $i++) {
        echo "
        <tr>
        <td>{$row["Date"]}</td> 
        <td>{$row["Inspector1"]}</td> 
        <td>{$row["Inspector2"]}</td>
        <td>{$row["Building_Name"]}</td>
        <td>{$row["Room"]}</td>
        <td>{$row["shower_no"]}</td>  
        </tr>
        ";
    }
}

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    switch(true) {
        case ($row['eyewashPlumbed']>0 or $row['EyewashBottles']>0):
            printRow($row, 3); // print 3 times
            break;
        case ($row['showers']==0): // print 2 times
            printRow($row, 2);
            break;
        default: // default print 1 time only
            printRow($row, 1);
    }
}
?> 
```

# javascript - EmberJS 在控制器之间绑定内容

> ID：13363413
> 
> 赞同：8
> 
> 时间：2012-11-13T15:19:40.660
> 
> 标签：javascript, model-view-controller, binding, ember.js

我目前正在使用两个数据模型，其中 Foo 具有 Bars 类型的“toMany”属性。我现在正在尝试创建两个选择框，当第一个填充了 Foo 时，它会细化第二个列表，仅列出与该 foo 关联的 Bars。

JSFiddle 这里：http: [//jsfiddle.net/drew/6jLCy/](http://jsfiddle.net/drew/6jLCy/)

下面的代码，但它肯定不起作用。它确实为第一个设置了 SelectBox 值，但没有用相应的条形值标题填充第二个值。

```
App = Em.Application.create();

App.store = DS.Store.create({
  revision: 7,
  adapter: DS.fixtureAdapter
});

/**************************
* Models
**************************/

App.Foo = DS.Model.extend({
    bars: DS.hasMany('App.Bar'),
    title: DS.attr('string')
});
App.Bar = DS.Model.extend({
    foos: DS.hasMany('App.Foo'),
    title: DS.attr('string')
});

/**************************
* Fixtures
**************************/

App.Foo.FIXTURES = [
    {
        id: 0,
        title: 'Footitle 1',
        bars: [0,1]
    },
    {
        id: 1,
        title: 'Footitle 2',
        bars: [0,1,2]
    }
];

App.Bar.FIXTURES = [
    {
        id: 0,
        title: 'Bartitle 1',

    },{
        id: 1,
        title: 'Bartitle 2'
    },{
        id: 2,
        title: 'Bartitle 3'
    }
];

/**************************
* Views
**************************/

App.SetFooField = Em.Select.extend({
    contentBinding: 'App.fooController',
    valueBinding: 'content.selected',
    optionLabelPath: 'content.title'
});

App.SetBarField = Em.Select.extend({
    contentBinding: 'App.barController',
    valueBinding: 'content.selected',
    optionLabelPath: 'content.title'
});

/**************************
* Controllers
**************************/

App.fooController = Em.ArrayController.create({
    content: App.store.findAll(App.Foo)
});

App.barController = Em.ArrayController.create({
    contentBinding: 'App.fooController.selected.bars'
});​ 
```

html的标记：

```
<script type="text/x-handlebars">

    {{view App.SetFooField}}
    {{view App.SetBarField}}

</script>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:50:24.087

天啊。经过几天几乎疯了，事实证明这完全是最新的 ember-data 中的一个错误。在夹具中，所有 id 都必须是字符串。只是。清楚的。坚果。

```
/**************************
* Fixtures
**************************/

App.Foo.FIXTURES = [
    {
        id: '0',
        title: 'Footitle 1',
        bars: ['0','1']
    },
    {
        id: '1',
        title: 'Footitle 2',
        bars: ['0','1','2']
    }
];

App.Bar.FIXTURES = [
    {
        id: '0',
        title: 'Bartitle 1',

    },{
        id: '1',
        title: 'Bartitle 2'
    },{
        id: '2',
        title: 'Bartitle 3'
    }
]; 
```

[使用带有 ember-data 的 ember.js 无法获取嵌入的对象属性](https://stackoverflow.com/questions/13296812/failed-to-get-embeddeds-object-property-using-ember-js-with-ember-data)

非常感谢@dgeb 回答了这个问题。

jsfiddle 相应更新。

[http://jsfiddle.net/drew/6jLCy/](http://jsfiddle.net/drew/6jLCy/)

# mongodb - 在 6M 文档集合中从字符串转换为浮点数时的性能问题

> ID：13363417
> 
> 赞同：1
> 
> 时间：2012-11-13T15:19:51.507
> 
> 标签：mongodb, mongodb-query

我在 mongodb 中有一个 >6M 的文档集合。其中一个字段（下例中的 field1 和 field2）是字符串值（mongodb 中的类型 2）。

我的问题是我想将它们解析为浮点值（所有值都是 *parseFloat-able*）。我在 SO 中找到了这个片段。但这似乎不是处理 6M 文档集合的好方法。

```
db.collection.find({field1: {$type:1}}).forEach(function(data) {
    db.collection.update(
         {_id:data._id},
         {$set:{
              field1: parseFloat(data.field1),
              field2: parseFloat(data.field2)}
          }
    )
}) 
```

有什么方法可以**在不降低服务器速度的情况下**转换我的两个字段？

使用 db.collection.getIndexes() 和 db.collection.getIndexKeys() 表示我的两个字段已编入索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:14:28.207

[您是否尝试过将update 的第四个参数](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)设置为 true 以便执行多文档更新，而不是使用 forEach 并为每个文档执行一个更新命令？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:42:51.243

如果您的目标是防止服务器减速，那么我会在更新之间在客户端引入睡眠。您可以根据要减少的负载量和完成更新的耐心来调整超时。在 mongo shell 中强制执行睡眠调用“sleep(ms)”，其中“ms”是您想要睡眠的毫秒数。

# c# - 用于客户端和 C# 的表达式 web 4 vs Visual Studio 2010

> ID：13363418
> 
> 赞同：0
> 
> 时间：2012-11-13T15:19:52.343
> 
> 标签：c#, asp.net, visual-studio-2010, microsoft-expression-web

我正在尝试将我的项目从 VS2010 连接到表达式 4，但它不是那么直观。所以我问自己VS2010是否有和表达式4一样的能力？

对于像我这样编写并且需要与程序员一起工作的程序员来说，最好的`css3`解决`html5`方案是`javascript`什么？`c#``asp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:41:37.393

Expression 和 Visual Studio 有一个非常不同的焦点小组。Expression 是为设计师设计的，它有额外的工具/功能来更好地处理创建你的标记。Visual Studio 更倾向于将设计与代码挂钩。

这并不是说你不能单独使用 VS 构建一个漂亮的网站。许多人这样做。但是，如果您需要良好的工具支持，而不是手动编码外观，那么请使用 Expression。

Expression 确实支持由 Visual Studio 处理的项目模型，并且具有 TFS 等源代码控制的挂钩，因此您可以并排使用两者。

# c# - Windows 2000 SP4 上的单声道

> ID：13363427
> 
> 赞同：7
> 
> 时间：2012-11-13T15:20:13.123
> 
> 标签：c#, windows, compiler-construction, mono, windows-2000

在良好的旧 Win2k 上，[.NET Framework 的最高支持版本是 2.0](https://stackoverflow.com/questions/12707106/windows-2000-and-net-2-0)。如果想运行现代 C# 应用程序（例如，使用 LINQ），[Mono 框架](http://mono-project.com/Main_Page)可能是解决方案。不幸的是，尚不清楚 Mono 是否支持 Windows 2000。[下载页面](http://www.go-mono.com/mono-downloads/download.html)显示最新版本（3.0.1-beta）“适用于所有版本的 Windows XP、2003、Vista 和 Windows 7”，但安装程序显示的发行说明声称“此版本可在 Windows 2000 或更高版本上运行”。

作为快速测试，我尝试使用不同版本的 Mono（2.0、2.10.9、3.0.1-beta）在 Win2k 机器上编译并运行以下代码：

```
// Test.cs
using System;
using System.Linq;

public static class Test
{
  public static void Main()
  {
    Console.WriteLine(Environment.Version);
    int[] numbers1 = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 };
    var numbers2 = from number in numbers1 where number < 5 select number;
    Func<int, int> negate = number => -1 * number;
    foreach (var number in numbers2)
      Console.WriteLine(negate(number));
  }
} 
```

我打开 Mono 命令提示符，将工作目录更改`Test.cs`为`mcs Test.cs`.

*   旧版本**2.0**工作，我只需要使用`gmcs` 而不是`mcs`. 我可以在 Mono 2.0 上成功运行可执行文件。（当我尝试在 .Net 2.0 上运行它时，我遇到了一个异常，正如我所料。）
*   在**2.10.9**和**3.0.1-beta**版本的情况下， *什么都没有发生*：没有创建 exe，也没有显示错误消息。这些版本适用于 Windows XP，我可以编译代码并运行可执行文件。

**问题：** Mono 是否仍支持 Windows 2000？Mono 在 2.0 和 3.0 之间发生了什么，这可以解释上面提到的编译问题？怎样才能使最新版本在 Win2k 上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:40:50.040

我尝试了 2.0 和 3.0 之间的每个次要版本。我发现版本 <=2.4 可以工作，但版本 >=2.6 不行。我查看了[v2.6 的发行说明](http://www.mono-project.com/Release_Notes_Mono_2.6#Changes_since_Mono_2.4)，但找不到任何可以解释这一点的东西。然后我用谷歌搜索“mono 2.6 windows 2000”，发现[Windows 2000 上有一个严重的错误](https://bugzilla.novell.com/show_bug.cgi?id=621773)：

> 在 Windows 2000 的 WS2_32.DLL 中找不到入口点 getaddrinfo

就我而言，错误报告和 Watson 博士已关闭，因此错误消息可能会被 Windows 吞噬（我在工业 PC 上进行了测试，错误报告会使重要程序挂起）。我试图打开它，但我仍然没有收到错误消息 -`mono`只是`mcs`停止而不做任何事情。尽管如此，我相信这是问题所在，因为这是一个与版本相关的、显示停止的错误，而且在我的情况下，版本是相同的。

Mono 开发人员 Zoltan Varga 在错误报告中添加了以下评论：

> 与 freeaddrinfo 不同，getaddrinfo 实际上是 mono 的一部分，因此如果不禁用某些功能就无法避免使用它。MSDN 建议包含 Wspiapi.h，我们不能这样做，因为它是 MS 平台 SDK 的一部分，并且它不在 cygwin/mingw 中，我们用于编译单声道版本。因此，您可能需要在 windows 上编译自己的 mono 版本并解决这些问题。

[Zoltan 提到的 MSDN 建议](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)的解决方案如下：

> **在 Windows 2000 和更早版本上支持 getaddrinfo**- getaddrinfo 函数被添加到 Windows XP 和更高版本的 Ws2_32.dll 中。要在早期版本的 Windows 上执行使用此功能的应用程序，您需要包含 Ws2tcpip.h 和 Wspiapi.h 文件。添加 Wspiapi.h 包含文件时，getaddrinfo 函数被定义为 Wspiapi.h 文件中的 WspiapiGetAddrInfo 内联函数。在运行时，WspiapiGetAddrInfo 函数的实现方式是，如果 Ws2_32.dll 或 Wship6.dll（Windows 2000 的 IPv6 技术预览中包含 getaddrinfo 的文件）不包含 getaddrinfo，则内联实现一个版本的 getaddrinfo基于 Wspiapi.h 头文件中的代码。此内联代码将用于原生不支持 getaddrinfo 函数的旧 Windows 平台。

This bug was filed in 2010, got priority level 5, and has not been solved since then. This basically means that until someone solves this bug, **Windows 2000 is not supported by Mono versions >=2.6**.

(I'm planning to try to apply the modifications suggested by MSDN and [rebuild Mono 3.0 using VS2005](http://www.mono-project.com/Compiling_Mono_VSNET), but this does not seem to be an easy task. In case I succeed, I will update my answer.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:53:47.977

您不需要任何比 .NET 2.0 更新的东西来获得大部分好的 .NET 3.5 功能。即使针对 .NET 2.0，Visual Studio 2008-2012 中包含的 C# 3 编译器也支持类型推断、lambda 方法等。

但这里是重要的链接（双关语；））：[http](http://code.google.com/p/linqbridge/) ://code.google.com/p/linqbridge/ LinqBridge 为您提供了 .NET 2.0 上的完整 Linq-to-Objects 支持。

# javascript - tomcat 无法访问脚本

> ID：13363428
> 
> 赞同：1
> 
> 时间：2012-11-13T15:20:18.917
> 
> 标签：javascript, caching, permissions, tomcat5.5, context.xml

从昨天开始，我意识到我无法让我的 Web 应用程序访问我服务器上的 javascripts 和某些样式表（离线工作）

它开始突然发生，在我尝试解决问题的过程中，我还制作了一个虚拟应用程序来测试它：

[http://intra.gchss.edu.mt](http://intra.gchss.edu.mt)

即使脚本实际存在，也无法访问这些脚本。Tomcat 报告 HTTP 状态 404 - 请求的资源 (/scripts/javascript/script.js) 不可用。

在我的尝试中，我还尝试创建其他几个应用程序并调整 contents.xml 以停止 tomcat 缓存：

```
<Context cachingAllowed="false" cacheMaxSize="0" cacheTTL="1">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

但他们都以同样的方式行事。（我知道这与新应用程序无关，但我还是尝试了）

我检查了目录和文件权限，它们是 777，因此任何人都应该可以访问和运行它们。但我仍然无法访问它们。

有两件事我还没有尝试过，也不想尝试

1.  重新安装tomcat
2.  将脚本放在主目录中。

有什么想法吗？我在 Debian 上运行 tomcat 5.5。

谢谢！

# java - 长浮点数输出显示字母

> ID：13363429
> 
> 赞同：10
> 
> 时间：2012-11-13T15:20:22.300
> 
> 标签：java, floating-point

我有以下代码：

```
String curDir = ".";
File fileObject = new File(curDir);
File[] fileList = fileObject.listFiles();

float fileLengthMegabytes = (float)fileList[i].length() / 1000000; 
```

方法 fileList[i].length() 返回 311 个字节作为 Long 类型。

前面的代码产生以下输出：

3.88E-4

**如何在 fileLengthMegabytes 变量中获得预期的 0,000311 输出？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-13T15:27:55.583

那就是科学记数法。

你得到 388 而不是 311 因为你除以 1000000 而不是 1048576 (1024 * 1024)

编辑：即使使用 1048576 也没有达到 311，这样你得到 370 ......所以错误可能在你的计算中；）

如此[处所述](https://stackoverflow.com/questions/6878623/scientific-notation-to-decimal)，您只需通过格式化程序将科学记数法转换为十进制记数法。

```
DecimalFormat df = new DecimalFormat("#.########");
return df.format(fileLengthMegabytes); 
```

**运行示例**：http: [//ideone.com/2lkKv7](http://ideone.com/2lkKv7)

```
import java.util.*;
import java.lang.*;
import java.text.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
                DecimalFormat df = new DecimalFormat("#.##########");

        float fileLengthMegabytes1 = (float) 388 / 1000000;
        float fileLengthMegabytes2 = (float) 388 / 1048576;
        System.out.println("MB1 in Scientific Notation: " + 
                            fileLengthMegabytes1);        
        System.out.println("MB1 in Decimal Notation: " + 
                            df.format(fileLengthMegabytes1));
        System.out.println("MB2 in Scientific Notation: " + 
                            fileLengthMegabytes2);        
        System.out.println("MB2 in Decimal Notation: " + 
                            df.format(fileLengthMegabytes2));
        }
} 
```

输出：

> MB1 科学计数法：3.88E-4
> 
> 十进制表示法的 MB1：0.000388
> 
> MB2 科学计数法：3.7002563E-4
> 
> 十进制表示法的 MB2：0.0003700256

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T15:25:13.073

这是 Java（和许多其他语言）显示浮点数的方式。`E`just 表示`10^`，so`3.88E-4`是另一种写法`3.88 x 10^-4`，与`0.000388`.

这种格式称为[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)。[电子记数法](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)是科学记数法的计算机表示。

其余的不准确（388 对 311）是因为 1000000 不是您想要除以的确切数字。有关更多详细信息，请参阅其他答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:42:03.477

前面提到的 3.88E-4 是[科学 E 表示法中的表示](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)。

如果你想打印它或转换成字符串，你可以这样写：

```
System.out.printf("%f%n", fileLengthMegabytes);
// or
String fileLengthMegabytesMessage = String.format(
        "File size is %fMb", fileLengthMegabytes);
System.out.println(fileLengthMegabytesMessage); 
```

你有：

```
0,000311
// or 
File size is 0,000311Mb 
```

尊敬

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:31:27.320

如果您想要普通数字（没有科学计数法），请使用`BigInteger`

```
BigInteger inbytes = new BigInteger("" + fileList[i].length());
BigInteger inMB = inBytes.divide(new BigInteger("" + (1024*1024))); 
```

注意：正常值`double`也足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:35:19.577

要获得所需的符号，请使用格式化程序：

```
final Formatter f = new Formatter();
final String out = f.format("%8.6f", fileLengthMegabytes); 
```

应该给你你的结果。

另请参阅： [Java 文档：String.Format](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)、 [Java 文档：格式化程序](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

# azure - 为什么指向 Azure 共享缓存的 Web outputCache 配置部分会减慢每个请求？

> ID：13363434
> 
> 赞同：4
> 
> 时间：2012-11-13T15:20:38.303
> 
> 标签：azure, asp.net-mvc-4, outputcache, bundling-and-minification, azure-caching

我的问题与[此](https://stackoverflow.com/q/12230246/304832)类似，但我的问题是 Windows Azure 共享缓存——而不是较新的 Windows Azure 缓存。

这真是一个奇怪的问题。我有一个共享的 Azure 缓存设置并在一个托管的云服务上工作。该应用程序同时使用它`sessionState`和`caching/outputCache`. 该应用程序根本没有延迟问题。它被部署到美国中北部，共享缓存也是如此。

我还有第二个托管服务，它也部署到美国中北部。我已将第二个应用程序配置为使用相同的共享缓存。奇怪的是：当我`<caching>/<outputCache>`在 web.config 中配置部分以将其指向共享缓存时，每个 (MVC4) Web 请求都会减慢到大约 5-6 秒。当我注释掉这个 web.config 部分时，Web 请求要快得多（约 100 毫秒）。

缓存连接本身似乎不是延迟问题，因为我仍在为 sessionState 使用相同的共享缓存，而且速度很快。另外值得注意的是，没有一个 MVC4 操作使用 OutputCacheAttribute。只需将 outputCache 部分添加到 web.config 并重新部署即可重现延迟。

两个应用程序位于相同的数据中心区域，使用相同的 vm 大小、实例和 osFamilies。我能想到的它们之间的唯一区别是第一个（没有延迟问题的）是 MVC3 应用程序，而第二个是 MVC4 应用程序。

为什么简单地添加指向 Windows Azure 共享缓存的缓存/输出缓存配置部分会减慢每个 MVC4 请求？

**更新1：**

我现在能够在不部署到 azure 的情况下重现此问题。我设置了我的本地 VS / IIS Express 安装以将有问题的共享缓存用于会话和 outputCache。在更改此 web.config 设置之前，我得到了亚秒级的响应：

```
<compilation debug="false" ... <!-- changed this from true to false 
```

当关闭 system.web 部分中的调试挂钩时，我开始获得 5-6 秒的响应时间（转载）。这可能是 MVC4 中的捆绑和缩小功能的问题吗？很奇怪，关闭调试编译会增加响应延迟约 10 倍.....

**更新 2：**

MiniProfiler 告诉我，是的，超过 4 秒的延迟来自我在 MVC _Layout.cshtml 中的 @Scripts.Render("~/bundles/mybundle") 之一。web.config 中的 outputCache 设置似乎正在影响捆绑脚本的发布模式呈现。但是**为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:52:09.493

优化框架目前不支持非默认输出缓存提供程序，因为在过去这会导致异常，因此在这些情况下，服务器缓存被禁用，这会导致您看到的高开销。我认为现在我们已经转向 VirtualPathProviders，我们在使用非默认提供程序时遇到的问题可能会得到解决，并且我们现在可能能够支持这种情况。

我在我们的 codeplex 网站上提交了一个工作项来跟踪这个：[问题链接](http://aspnetoptimization.codeplex.com/workitem/46)

**更新**：这应该在 [https://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-Beta1中修复](https://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-Beta1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:32:11.523

我可以证实你的发现。如果我禁用所有 CSS/脚本捆绑/缩小，我不会遇到 CPU 峰值和缓慢。显然，这是由于捆绑和/或缩小的原因。

这就是我的 _Layout.cshtml 中的内容。删除它 = 没有 CPU 问题。包括它会导致 CPU 峰值/缓慢。

```
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/kendoui") 
```

# java - JAR 文件中的 JRI（Java/R 接口）程序可以在没有安装 R 的系统上运行吗？

> ID：13363444
> 
> 赞同：1
> 
> 时间：2012-11-13T15:21:08.940
> 
> 标签：java, r, jri, rjava

如果一个 JRI(Java/R Interface) 程序使用 R 来显示一个图形，它可以捆绑到一个 jar 中并在没有 R 的系统上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:25:14.483

不，它不能。`JRI`需要针对`R`. 这是一个低级接口。

您可以采用一些客户端/服务器设计，您将`Rserve`在服务器上使用客户端上的 API 和类，`REngine`这样您的客户端机器就不需要`R`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T09:41:58.737

那么你可以做到这一点。我确实将所有必需的 dll 复制到 Java 项目中并将它们添加到本机库中。然后从库中的 R 安装中复制一个基本文件夹。将 R_HOME 设置为包含库库的文件夹。它会起作用的

# gwt - 使用 Maven 构建的 KineticGWT 的工作示例

> ID：13363451
> 
> 赞同：0
> 
> 时间：2012-11-13T15:21:30.237
> 
> 标签：gwt, maven

有人有使用 KineticGWT 的工作 maven 项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:21:22.430

我从 KineticGWT 的开发者那里得到了一些帮助。他在这里有一个示例文件[https://github.com/neothemachine/glge-gwt-sample/blob/master/pom.xml](https://github.com/neothemachine/glge-gwt-sample/blob/master/pom.xml)

# vb.net - VB 2010 随机播放 wav 文件 Windows 8 RP

> ID：13363452
> 
> 赞同：2
> 
> 时间：2012-11-13T15:21:32.703
> 
> 标签：vb.net, audio, wav

我需要 5 个 wav 文件在程序结束时随机播放。我知道如何让它播放一首歌，我已经在这个网站上找到了一个代码，但它对我不起作用，它只是每次播放同一首歌。这是代码：

```
 Public Sub PlayRandomTrack()

    Dim trackNum As Integer = CInt(Rnd() * 5 + 0.5)

    Select Case trackNum
        Case 1
            My.Computer.Audio.Play(My.Resources.CallingMonsters, AudioPlayMode.Background)
        Case 2
            My.Computer.Audio.Play(My.Resources.McclainSisters, AudioPlayMode.Background)
        Case 3
            My.Computer.Audio.Play(My.Resources.Mendler, AudioPlayMode.Background)
        Case 4
            My.Computer.Audio.Play(My.Resources.Pray, AudioPlayMode.Background)
        Case Else
            My.Computer.Audio.Play(My.Resources.WillowWhip, AudioPlayMode.Background)

    End Select
End Sub 
```

然后我将其用作：

```
 PlayRandomTrack() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:40:41.780

来自[MSDN](http://msdn.microsoft.com/en-us/library/8zedbtdt%28v=vs.80%29.aspx)：

> 对于任何给定的初始种子，都会生成相同的数字序列，因为对 Rnd 函数的每次连续调用都使用先前生成的数字作为序列中下一个数字的种子。
> 
> 在调用 Rnd 之前，使用不带参数的 Randomize 语句来使用基于系统计时器的种子来初始化随机数生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:44:15.767

你可以试试这个，看看它是否有效？

```
Dim trackNum As Integer = (New Random).Next(1,5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:44:51.037

试试这个随机函数：

```
 Dim tempRnd As New Random(Now.Millisecond)
    Dim trackNum As Integer = tempRnd.Next(1, 5) 
```

# rest - 一个restful api的设计理念和最佳实践

> ID：13363453
> 
> 赞同：0
> 
> 时间：2012-11-13T15:21:37.957
> 
> 标签：rest, design-principles

我有幸重新设计我们的主要项目公共 api。最初的目标是制作一个宁静的 api，[在添加了许多额外的功能之后] 最终成为了 rest/json-rpc 不匹配。

所以，是时候重新思考和重新设计了。但是我需要一些关于如何解决一些更复杂操作的想法。

基本的[CURD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作已经实现并且工作正常。

每个资源都由分层 slug 访问：

```
GET /project/fubar/fishes 
```

还添加了语言环境和输出格式：

```
GET /project/fubar/fishes.en-us.json 
```

好的，现在到棘手的部分：

项目中的基本资源类似于具有标题和子节点的文件夹。“文件夹”可以有子文件夹和项目。

将新文件夹或项目添加到文件夹的最佳做法是什么？

需要 PUT/PATCH 来更新有关文件夹的信息，而不是将资源链接到它？需要 POST 来创建新文件夹。

```
POST /project/fubar/fishes 
```

再补充一点，区分文件夹到文件夹和项目到文件夹链接操作的最佳做​​法是什么。请记住，链接可以并且将有另一个名称，然后是目标。类似于 POSIX 系统中的符号链接。

我的想法是（对现有资源）：

```
POST /project/fubar/fishes
{
   link: /project/fubar/dogs
   title: DOGS!
   type: folder
} 
```

反过来呢？取消链接？

```
DELETE /project/fubar/fishes/dogs 
```

但这是一个好的设计还是稍后会回到我身边？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:08:45.283

# 使用内容协商

不建议使用这个：

```
GET /project/fubar/fishes.en-us.json 
```

在REST术语中，这是*与*

```
GET /project/fubar/fishes 
```

但据我了解您的问题，两者都是*相同*的资源，只是在不同的表示中。

要获取特定表示中的资源，请使用[内容协商](https://en.wikipedia.org/wiki/Content_negotiation)。

```
GET /project/fubar/fishers
Accept: application/json
Accept-Language: en-us 
```

# 物品在哪里？

我在您的网址中看不到任何项目，只有您所谓的“文件夹”。在 REST 术语中，这些称为集合资源。`POST`您可以通过ing 将项目添加到集合资源中。你通过 ing 删除一个项目`DELETE`。您可以`POST`通过将更改的部分添加到项目中来更改项目的部分。`PUT`您可以通过ing更新一个完整的项目。

我建议识别系统中的集合资源和项目。

# kendo-ui - 带有自定义弹出模板取消绑定错误的 Kendo UI Grid

> ID：13363458
> 
> 赞同：0
> 
> 时间：2012-11-13T15:21:49.763
> 
> 标签：kendo-ui

这是一个jsfiddle（不是我的，但同样的错误）。 [http://jsfiddle.net/grenal/KGsSL/73/](http://jsfiddle.net/grenal/KGsSL/73/)

```
<script id="popup_editor" type="text/x-kendo-template">
<table width="600" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th width="197" scope="row">Chapter Name</th>
    <td width="403"><label for="chapterName"></label>
    <input type="text" name="chapterName" id="chapterName" data-bind="source: chaptername"></td>
  </tr>
  <tr>
    <th scope="row">State</th>
    <td><label for="state"></label>
    <input type="text" name="state" id="state" data-bind="source: state"></td>
  </tr>
 <tr>
    <th scope="row">Code</th>
    <td><label for="code"></label>
    <input type="text" name="code" id="code" data-bind="source: code"></td>
  </tr>
  <tr>
    <th scope="row">Date Added</th>
    <td><label for="dateadded"></label>
    <input type="text" name="dateadded" id="dateadded" data-bind="source: dateadded"></td>
  </tr>
  <tr>
    <th scope="row">Active</th>
    <td><label for="active"></label>
    <input type="text" name="active" id="active" data-bind="source: active"></td>
  </tr>
  <tr>
    <th scope="row">&nbsp;</th>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <th scope="row">Approved</th>
    <td><label for="approved"></label>
    <input type="text" name="approved" id="approved" data-bind="source: approved"></td>
  </tr>
 <tr>
    <th scope="row">Chapter Price</th>
    <td><label for="chapterPrice"></label>
    <input type="text" name="chapterPrice" id="chapterPrice" data-bind="source: chapterPrice"></td>
  </tr>
 <tr>
    <th scope="row">Parent Price</th>
    <td><label for="parentPrice"></label>
    <input type="text" name="parentPrice" id="parentPrice" data-bind="source: parentPrice"></td>
  </tr>
</table>
</script>​ 
```

```
 $(document).ready(function() {

               $("#search").click(function() {
                  // alert("clicked refresh");
                   $("#grid").data("kendoGrid").dataSource.read();
                });                 

                $("#grid").kendoGrid({
                    dataSource: {

                       transport: {
                                read: {
                                        url: "chaptersJson.cfm",
                                        dataType: "json",
                                        data: {q: function() { return $("#chapterName").val();}}
                                },
                            update: {
                                    url: "chaptersJson.cfm?pageaction=Update",
                                    dataType: "json"
                                }

                        },
                        schema: {
                            model: {
                                id: "chapterid",
                                fields: {
                                    chapterid: { type:"number" },
                                    chaptername: { type: "string" },
                                    active: {type: "string"},
                                    approved: {type: "string"},
                                    chapterPrice: {type: "string"},
                                    parentPrice: {type:"string"},
                                    code: {type:"string"},
                                    dateadded: {type:"date"},
                                    state: {type:"string"}

                                }
                            }
                        },
                        pageSize: 25
                    },
                    height: 500,
                    filterable: false,
                    sortable: true,
                    pageable: true,
                    columns: [{field: "chaptername", title: "Chapter", width: 200},
                              {field: "state", title:"State", width: 100},
                              {field: "chapterPrice", title:"Chapter Price", width: 100},
                              {field: "parentPrice", title:"Parent Price", width: 100},
                              {field: "dateadded", title:"Added On", width: 100, template: '#= kendo.toString(dateadded,"MM/dd/yyyy") #'},
                              {command: ["edit"], title:"&nbsp;", width:"210px"}
                    ],
                    editable: {mode: "popup", template: $("#popup_editor").html()}
                });
            });
        </script> 
```

当您尝试打开弹出窗口然后单击 X 关闭或取消按钮时，它不会关闭并返回：

未捕获的类型错误：------------ 没有方法“解除绑定”

我基本上是用 KendoUI 创建一个常规网格，但我想要一个自定义弹出编辑器来显示网格当前所做的更多字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:04:42.723

更新版本，错误应该消失（因为它已修复）。

基本上，您只需要更改脚本和样式引用以指向版本 913 而不是 710。

例如

```
<script src="http://cdn.kendostatic.com/2012.2.913/js/kendo.core.min.js"></script> 
```

# c# - 如何知道基于发布的 .net 进程中挂起的方法

> ID：13363461
> 
> 赞同：2
> 
> 时间：2012-11-13T15:21:51.140
> 
> 标签：c#, .net, visual-studio-2010

我有一个挂在未知位置的 .net 进程的转储文件。我需要知道发生挂起的方法。该应用程序非常复杂，具有许多线程，并且挂起是随机发生的。

当它发生在我的机器或客户的机器上时，我试图附加 Visual Studio，但我无法使用挂起方法。是否有任何工具可以调查转储文件中的问题？

**编辑** 挂起的线程是主 UI 线程。其他线程正在工作，因为它们记录了他们的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:50:08.280

由于您已经有内存转储，您可以使用 Windbg 对其进行分析。有关使用 Windbg 诊断挂起的精彩教程，请参阅[此处](http://blogs.msdn.com/b/tess/archive/2008/02/04/net-debugging-demos-lab-1-hang.aspx)的 Tess Fernandez 的博客。

如果这是您构建的应用程序，您还应该使用调试符号构建发布配置。在调试此类情况时，这可以极大地帮助您。

# oracle - Oracle 远程过程中不支持 PowerBuilder 的参数类型

> ID：13363465
> 
> 赞同：2
> 
> 时间：2012-11-13T15:22:05.020
> 
> 标签：oracle, powerbuilder, procedure, database

请帮帮我。我有存储过程

```
 message
 (
 out_error OUT INTEGER, 
 client_absid IN INTEGER,
 document_subject IN VARCHAR, 
 document_text IN VARCHAR, 
 document_attachedfiles IN FILEINF_T,
 p_client_abs IN VARCHAR  
)

FILEINF_T AS OBJECT (
attachedfiles_name VARCHAR(255)
, attachedfiles_val BLOB      
) 
```

我使用本地外部函数来调用它

```
 SUBROUTINE message ( ref long out_error, long client_absid, 
  string document_subject,string document_text, readonly fileinf_t 
  document_attachedfiles[], string client_abs) RPCFUNC ALIAS FOR "message" 
```

结构：

```
 global type fileinf_t from structure
  string        attachedfiles_name
  blob      attachedfiles_val
 end type 
```

在脚本中：

```
FILEINF_T files[]
FILEINF_T file
file.attachedfiles_name = "test"
files[1] = file
....
this.message ( ref ll_return, pclient_absid, pdocument_subject, 
pdocument_text,  files, pclient_abs) 
```

我在对象 ub_ib6_transaction 的函数 uf_ib_messagefile 的第 23 行给出错误“DLL 函数消息中不支持的参数类型”。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:10:02.020

您存储的 proc 声明未将 document_attachedfiles 显示为数组。传入结构的单个实例或更新存储过程签名以接受数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:13:53.607

来自“PowerBuilder”的回答链接[http://scn.sap.com/thread/3265959](http://scn.sap.com/thread/3265959)

# mysql - 带有 RAND() 子查询条件的 MySQL 查询

> ID：13363468
> 
> 赞同：3
> 
> 时间：2012-11-13T15:22:22.557
> 
> 标签：mysql, subquery

我有一个嵌套[子查询](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)，它随机`AlbumID`选择所选视频所在的位置（视频可以在多个专辑中），然后外部查询根据该查询返回视频和专辑信息`AlbumID`。

问题是查询返回混合结果；有时它会给我一张专辑中的一些视频，有时它会提供多张专辑中的视频，有时它什么也不返回。

如果我指定特定`AlbumID`而不是子查询，则外部查询有效，并且子查询本身正确返回 1 random `AlbumID`。但放在一起，结果好坏参半。我错过了什么？**为什么它返回不同数量的行和多个专辑？**

我已经用测试数据复制了这个问题，你可以在这里找到`CREATE`查询：http: //pastebin.com/raw.php?i= [e6HaaSGK](http://pastebin.com/raw.php?i=e6HaaSGK)

选择 SQL：

```
SELECT  
    Videos_Demo.VideoID,
    VideosInAlbums_Demo.AlbumID
FROM 
    VideosInAlbums_Demo
    LEFT JOIN
        Videos_Demo
        ON Videos_Demo.VideoID = VideosInAlbums_Demo.VideoID
WHERE
    VideosInAlbums_Demo.AlbumID = (
                                    SELECT
                                        AlbumID
                                    FROM
                                        VideosInAlbums_Demo
                                    WHERE
                                        VideoID = '1'
                                    ORDER BY
                                        RAND()
                                    LIMIT 1
                                    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:54:14.783

尝试这个。将子查询移至 JOIN 似乎可以解决问题。我认为问题与 WHERE 子句中的子查询有关。我认为在 WHERE 子句中，正在为每条记录执行子查询和 RAND 函数。这可能就是结果不同的原因。

```
SELECT  a.AlbumID,
        Videos_Demo.VideoID,
        VideosInAlbums_Demo.AlbumID

FROM    VideosInAlbums_Demo

        LEFT JOIN Videos_Demo
        ON Videos_Demo.VideoID = VideosInAlbums_Demo.VideoID

        JOIN 
        (
            SELECT  AlbumID
            FROM    VideosInAlbums_Demo
            WHERE   VideoID = '1'
            ORDER BY RAND()
            LIMIT 1
        ) AS a ON VideosInAlbums_Demo.AlbumID = a.AlbumID 
```

# asp.net - ASP.Net：Request.Form 元素的顺序是否已定义？

> ID：13363472
> 
> 赞同：2
> 
> 时间：2012-11-13T15:22:38.617
> 
> 标签：asp.net, html

我有一个使用大量表单字段的表（HTML 种类——即没有 runat=server）。当回发发生时，它们会填充 Requests.Form 对象，并且它们的插入顺序似乎与它们在页面 HTML 中定义的顺序相同。

这种行为是否记录在案并且跨浏览器保持一致？我希望能够通过索引访问元素，这将提供一种查找字段的简单方法，因为它们可以在客户端插入或删除。

**编辑：**

表中的每一行都有一个隐藏字段，其中包含行 ID。该字段根据它在渲染时的显示顺序命名。例如，第一行有一个类似的字段`<input type="hidden" name="row0" value="RowID_555252" />`，依此类推。

当然，只要在表格中间插入或删除一行，行号就会出错，所以我能想到的唯一解决方案是在行移动时使用Javascript更新整个表格的行号. 然后，后端将通过扫描 Request.Form 中的 row0、row1 等按顺序检索行，直到元素为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:26:41.940

> 这种行为是否记录在案并且跨浏览器保持一致？

不，它没有记录在案，也不能保证在浏览器之间保持一致。这就是它发生的方式恰好是您使用的浏览器的实现细节。

您当然可以使用索引，但您不能假设这将对应于表单元素的顺序。此外，它很脆弱——如果在表单的开头添加一个新字段会发生什么？你的逻辑完全崩溃了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:57:18.863

> 这种行为是否记录在案...

是的。

整体算法在这里：[http](http://dev.w3.org/html5/spec/constraints.html#concept-form-submit) ://dev.w3.org/html5/spec/constraints.html#concept-form-submit这定义了它使用[http://dev.w3.org](http://dev.w3.org/html5/spec/constraints.html#constructing-the-form-data-set)`form data set`上的算法构建[/html5/spec/constraints.html#constructing-the-form-data-set](http://dev.w3.org/html5/spec/constraints.html#constructing-the-form-data-set)。

虽然该算法相当复杂，但本质上它表示表单元素将按*节点顺序*放入表单数据集中。这与它们在页面 HTML 中的内容并不完全相同，例如，元素可以通过 JavaScript 移动。

还有其他算法可以将表单数据集转换为查询字符串或 HTTP 内容，但这些也保留了节点顺序。

已知有一些网页依赖于这个顺序。（HTML5 解析器有一个奇怪的怪癖，大多数类型的输入元素，放置在表格内但不在表格单元格内，通过称为养育父母的过程从表格中弹出，但“隐藏”类型的输入元素不会以这种方式弹出. 发生这种情况是因为这是保留浏览器传统提交排序行为的唯一方法。）

> ...并且跨浏览器保持一致？

提交内容的整个算法肯定是不一致的——例如，众所周知，单击“图像”类型的输入元素所产生的提交内容会有很大差异。

我相信提交元素的顺序可能在浏览器实现中是一致的。但是，我不会依赖它，并鼓励您找到更强大的解决方案。

# python - re.sub 不替换所有事件

> ID：13363473
> 
> 赞同：17
> 
> 时间：2012-11-13T15:22:43.913
> 
> 标签：python, regex

我不是 Python 开发人员，但我正在使用 Python 脚本[将 SQLite 转换为 MySQL](https://stackoverflow.com/questions/18671/quick-easy-way-to-migrate-sqlite3-to-mysql)

正如他们所说，建议的脚本很接近，但没有雪茄。

给我的问题是：

```
line = re.sub(r"([^'])'t'(.)", r"\1THIS_IS_TRUE\2", line) 
```

...当然，还有 false ('f') 的等效行。

我看到的问题是任何给定行中只有第一次出现的 't' 被替换。

所以，输入脚本，

```
INSERT INTO "cars" VALUES(56,'Bugatti Veyron','BUG 1',32,'t','t','2011-12-14 18:39:16.556916','2011-12-15 11:25:03.675058','81'); 
```

...给...

```
INSERT INTO "cars" VALUES(56,'Bugatti Veyron','BUG 1',32,THIS_IS_TRUE,'t','2011-12-14 18:39:16.556916','2011-12-15 11:25:03.675058','81'); 
```

我提到我不是 Python 开发人员，但我试图自己解决这个问题。根据文档，我知道 re.sub 应该替换所有出现的“t”。

我很感激关于为什么我只看到第一次出现被替换的提示，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T15:30:43.787

您在示例中想要的两个替换重叠 - 您的两个实例之间的逗号`'t'`将`(.)`在第一种情况下匹配，因此`([^'])`在第二种情况下永远没有机会匹配它。这个稍作修改的版本可能会有所帮助：

```
line = re.sub(r"(?<!')'t'(?=.)", r"THIS_IS_TRUE", line) 
```

此版本使用前瞻和后瞻语法，[在此处](http://docs.python.org/library/re.html#regular-expression-syntax)进行了描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:25:07.543

怎么样

```
line = line.replace("'t'", "THIS_IS_TRUE").replace("'f'", "THIS_IS_FALSE") 
```

不使用`re`. 这将替换所有出现的`'t'`and `'f'`。只要确保没有汽车被命名`t`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:29:08.983

您看到的第一个匹配项是`,'t',`. Python 从下一个字符开始继续，即`'`（在第二个之前`t`），随后，它无法匹配该`([^'])`部分并跳过第二个`'t'`。

换言之，后续要替换的匹配项不能重叠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:29:31.883

使用`re.sub(r"\bt\b","THIS_IS_TRUE",line)`：

```
In [21]: strs="""INSERT INTO "cars" VALUES(56,'Bugatti Veyron','BUG 1',32,'t','t','2011-12-14 18:39:16.556916','2011-12-15 11:25:03.675058','81');"""

In [22]: print re.sub(r"\bt\b","THIS_IS_TRUE",strs)

INSERT INTO "cars" VALUES(56,'Bugatti Veyron','BUG 1',32,'THIS_IS_TRUE','THIS_IS_TRUE','2011-12-14 18:39:16.556916','2011-12-15 11:25:03.675058','81'); 
```

# eclipse - eclipse 控制台将日志与同一服务器中的多个 Web 应用程序区分开来

> ID：13363477
> 
> 赞同：0
> 
> 时间：2012-11-13T15:22:56.097
> 
> 标签：eclipse, web-applications, logging

我在 Eclipse（Helios）中的 Tomcat 服务器上部署了两个不同的 Web 应用程序。来自两个应用程序的日志进入同一个控制台，这使得它很笨拙。有没有办法我们可以将来自两个应用程序的日志拆分到单独的控制台中，或者在同一个控制台中对其进行颜色编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:03:07.910

看起来有一个[ascii 控制台插件](http://www.mihai-nita.net/eclipse/)可以帮助在同一个控制台中以不同颜色显示来自多个应用程序的日志。可能有其他插件可以达到相同的目的。基本上，每个应用程序的日志配置都会提到一个 ascii 颜色代码，并且每个日志语句都会以 ascii 颜色代码为前缀。该插件识别颜色代码并以指定颜色显示日志语句

# c# - CREATE 视图不从控制器发布创建方法

> ID：13363484
> 
> 赞同：0
> 
> 时间：2012-11-13T15:23:17.133
> 
> 标签：c#, asp.net-mvc, razor

创建视图不发布（或使用模型参数调用创建方法）。

## 创建视图

```
@model Univita.LtcClaims.Models.EpisodeOfBenefitModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create</h2>

@using (Html.BeginForm(null, "EpisodeOfBenefit",FormMethod.Post)) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>EpisodeOfBenefitModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.episode_of_benefit_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.episode_of_benefit_id)
            @Html.ValidationMessageFor(model => model.episode_of_benefit_id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.rfb_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.rfb_id)
            @Html.ValidationMessageFor(model => model.rfb_id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.user_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.user_id)
            @Html.ValidationMessageFor(model => model.user_id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_status_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_status_cd)
            @Html.ValidationMessageFor(model => model.eb_status_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_creation_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_creation_dt)
            @Html.ValidationMessageFor(model => model.eb_creation_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_decision_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_decision_dt)
            @Html.ValidationMessageFor(model => model.eb_decision_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_start_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_start_dt)
            @Html.ValidationMessageFor(model => model.eb_start_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_end_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_end_dt)
            @Html.ValidationMessageFor(model => model.eb_end_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_reassessment_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_reassessment_dt)
            @Html.ValidationMessageFor(model => model.eb_reassessment_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_revocation_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_revocation_dt)
            @Html.ValidationMessageFor(model => model.eb_revocation_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_last_extension_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_last_extension_dt)
            @Html.ValidationMessageFor(model => model.eb_last_extension_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_ambulation_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_ambulation_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_ambulation_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_bathing_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_bathing_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_bathing_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_dressing_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_dressing_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_dressing_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_feeding_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_feeding_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_feeding_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_incontinence_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_incontinence_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_incontinence_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_toileting_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_toileting_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_toileting_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_transferring_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_transferring_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_transferring_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_abusive_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_abusive_cd)
            @Html.ValidationMessageFor(model => model.eb_abusive_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_bizarre_hygiene_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_bizarre_hygiene_cd)
            @Html.ValidationMessageFor(model => model.eb_bizarre_hygiene_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_poor_judgement_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_poor_judgement_cd)
            @Html.ValidationMessageFor(model => model.eb_poor_judgement_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_wandering_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_wandering_cd)
            @Html.ValidationMessageFor(model => model.eb_wandering_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_other_behavior_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_other_behavior_cd)
            @Html.ValidationMessageFor(model => model.eb_other_behavior_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_cognitive_imp_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_cognitive_imp_cd)
            @Html.ValidationMessageFor(model => model.eb_cognitive_imp_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_complex_unstable_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_complex_unstable_cd)
            @Html.ValidationMessageFor(model => model.eb_complex_unstable_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_medicare_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_medicare_cd)
            @Html.ValidationMessageFor(model => model.eb_medicare_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_other_ins_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_other_ins_cd)
            @Html.ValidationMessageFor(model => model.eb_other_ins_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_living_arr_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_living_arr_cd)
            @Html.ValidationMessageFor(model => model.eb_living_arr_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_ra_type_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_ra_type_cd)
            @Html.ValidationMessageFor(model => model.eb_ra_type_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_ra_ltr_rcv_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_ra_ltr_rcv_dt)
            @Html.ValidationMessageFor(model => model.eb_ra_ltr_rcv_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_status_rsn_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_status_rsn_cd)
            @Html.ValidationMessageFor(model => model.eb_status_rsn_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_medication_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_medication_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_medication_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_reviewer_user_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_reviewer_user_id)
            @Html.ValidationMessageFor(model => model.eb_reviewer_user_id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.last_mod_dt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.last_mod_dt)
            @Html.ValidationMessageFor(model => model.last_mod_dt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.last_mod_by_user_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.last_mod_by_user_id)
            @Html.ValidationMessageFor(model => model.last_mod_by_user_id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_wound_care_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_wound_care_cd)
            @Html.ValidationMessageFor(model => model.eb_wound_care_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_med_mgmt_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_med_mgmt_cd)
            @Html.ValidationMessageFor(model => model.eb_med_mgmt_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_vent_dependent_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_vent_dependent_cd)
            @Html.ValidationMessageFor(model => model.eb_vent_dependent_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_adl_dependent_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_adl_dependent_cd)
            @Html.ValidationMessageFor(model => model.eb_adl_dependent_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_diabeties_mgmt_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_diabeties_mgmt_cd)
            @Html.ValidationMessageFor(model => model.eb_diabeties_mgmt_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_spvn_for_safety_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_spvn_for_safety_cd)
            @Html.ValidationMessageFor(model => model.eb_spvn_for_safety_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_not_listed_cd)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_not_listed_cd)
            @Html.ValidationMessageFor(model => model.eb_not_listed_cd)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.icd9_code)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.icd9_code)
            @Html.ValidationMessageFor(model => model.icd9_code)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.icd9_rcd_type)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.icd9_rcd_type)
            @Html.ValidationMessageFor(model => model.icd9_rcd_type)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.eb_living_arr_other_text)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.eb_living_arr_other_text)
            @Html.ValidationMessageFor(model => model.eb_living_arr_other_text)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}  <br/> 
```

## 控制器

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Data.Objects;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Univita.LtcClaims.Dal;
using Univita.LtcClaims.Models;
using AutoMapper;

namespace Univita.LtcClaims.Controllers
{
    public class EpisodeOfBenefitController : Controller
    {

       static readonly DbEntities DbContext = DbContextFactory.GetContext();
       readonly GenericRepository _repository = new GenericRepository(DbContext);
       public IEnumerable<EpisodeOfBenefit> Eobresults = null; 

        //private DbEntities dbContext = new DbEntities();
        //
        // GET: /EpisodeOfBenefit/

        public ActionResult Index()
        {
            //Eobresults = dbContext.episode_of_benefit.Where(w => w.rfb_id == 3721130);
            Eobresults = _repository.Find<EpisodeOfBenefit>(w => w.RfbId == 3721130);
            return View(Eobresults);
        }

        //
        // GET: /EpisodeOfBenefit/Details/5

        public ActionResult Details(int id)
        {
            return View();
        }

        //
        // GET: /EpisodeOfBenefit/Create

        [HttpGet]
        public ActionResult Create()
        {

            //Eobresults = _repository.GetQuery<EpisodeOfBenefit>().ToArray();
            //Eobresults = _repository.Find<EpisodeOfBenefit>(w => w.RfbId == 3721130);
            //Mapper.CreateMap<EpisodeOfBenefit, EpisodeOfBenefitModel>();
            //Mapper.Map(EpisodeOfBenefit[], EpisodeOfBenefitModel[])();
            return View();
        }

        //
        // POST: /EpisodeOfBenefit/Create

        [HttpPost]
        //public ActionResult Create(FormCollection collection)
        public ActionResult Create(EpisodeOfBenefitModel episodeOfBenefit)
        {
            try
            {
                // TODO: Add insert logic here
                _repository.Add(episodeOfBenefit);
                _repository.SaveChanges();
                return RedirectToAction("Index");
            }
            catch
            {
                return View(episodeOfBenefit);
            }
        } 
```

## 模型

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace Univita.LtcClaims.Models
{
    public class EpisodeOfBenefitModel
    {

            //this.eob_service_detail_paid_day = new HashSet<eob_service_detail_paid_day>();
            //this.plan_of_care = new HashSet<plan_of_care>();

        [Key]
        public int episode_of_benefit_id { get; set; }
        public int rfb_id { get; set; }
        public string user_id { get; set; }
        public short eb_status_cd { get; set; }
        public DateTime eb_creation_dt { get; set; }
        public DateTime eb_decision_dt { get; set; }
        public DateTime eb_start_dt { get; set; }
        public DateTime eb_end_dt { get; set; }
        public DateTime eb_reassessment_dt { get; set; }
        public DateTime eb_revocation_dt { get; set; }
        public DateTime eb_last_extension_dt { get; set; }
        public short eb_adl_ambulation_cd { get; set; }
        public short eb_adl_bathing_cd { get; set; }
        public short eb_adl_dressing_cd { get; set; }
        public short eb_adl_feeding_cd { get; set; }
        public short eb_adl_incontinence_cd { get; set; }
        public short eb_adl_toileting_cd { get; set; }
        public short eb_adl_transferring_cd { get; set; }
        public short eb_abusive_cd { get; set; }
        public short eb_bizarre_hygiene_cd { get; set; }
        public short eb_poor_judgement_cd { get; set; }
        public short eb_wandering_cd { get; set; }
        public short eb_other_behavior_cd { get; set; }
        public short eb_cognitive_imp_cd { get; set; }
        public short eb_complex_unstable_cd { get; set; }
        public short eb_medicare_cd { get; set; }
        public short eb_other_ins_cd { get; set; }
        public short eb_living_arr_cd { get; set; }
        public short eb_ra_type_cd { get; set; }
        public DateTime eb_ra_ltr_rcv_dt { get; set; }
        public short eb_status_rsn_cd { get; set; }
        public short eb_adl_medication_cd { get; set; }
        public string eb_reviewer_user_id { get; set; }
        public DateTime last_mod_dt { get; set; }
        public string last_mod_by_user_id { get; set; }
        public short eb_wound_care_cd { get; set; }
        public short eb_med_mgmt_cd { get; set; }
        public short eb_vent_dependent_cd { get; set; }
        public short eb_adl_dependent_cd { get; set; }
        public short eb_diabeties_mgmt_cd { get; set; }
        public short eb_spvn_for_safety_cd { get; set; }
        public short eb_not_listed_cd { get; set; }
        public string icd9_code { get; set; }
        public string icd9_rcd_type { get; set; }
        public string eb_living_arr_other_text { get; set; }

        //public virtual eb_living_arr eb_living_arr { get; set; }
        //public virtual ICollection<eob_service_detail_paid_day> eob_service_detail_paid_day { get; set; }
        //public virtual request_for_benefit request_for_benefit { get; set; }
        //public virtual ICollection<plan_of_care> plan_of_care { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:52:34.260

你应该改变

```
@using (Html.BeginForm(null, "EpisodeOfBenefit",FormMethod.Post)) 
```

至

```
@using (Html.BeginForm("Create", "EpisodeOfBenefit",FormMethod.Post)) 
```

在您的代码中，您尝试使用名称 null 发布到 Action。

# module - “广告管理”在管理员面板中不可见

> ID：13363488
> 
> 赞同：3
> 
> 时间：2012-11-13T15:23:26.660
> 
> 标签：module, forum, phpbb

phpBB论坛。我想包含“广告管理”Mod，但安装后它在管理员面板中不可见。

当我在管理员面板中更改对象的格式时，我可以看到广告管理，但最终没有。

论坛语言是德语和现代语言英语。phpBB 版本：3.0.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:45:57.913

如果您已在模板编辑上成功安装它，它应该可以工作，您只需要添加广告

在常规选项卡左侧菜单项中访问您的 ACP，您将在该设置下看到板配置，您将看到广告管理 MOD 的配置

# asp.net - 如何根据一组随机图像裁剪图像？

> ID：13363489
> 
> 赞同：1
> 
> 时间：2012-11-13T15:23:39.493
> 
> 标签：asp.net, crop, system.drawing, jcrop

致力于允许上传各种尺寸的图像，然后允许裁剪图像的预定义区域以获得缩略图。

缩略图大小预定义为 150x150。使用[Jcrop.js](http://deepliquid.com/projects/Jcrop/demos.php?demo=handler)工具选择图像的一部分。

**问题：**

当通过在渲染的图像上实现设置高度/宽度以比原始图像更小的尺寸显示上传的图像时，在选择要裁剪的区域时会出现比例因子。

您要么必须按比例缩小裁剪区域，要么必须根据实际图像的大小（与其显示的大小相比）缩放图像。

**问题：**

如何确定浏览器显示图像与原始图像的比例？我目前正在使用以下代码来保存图像，但我将如何考虑缩放？

```
public static Image CropImage(Image originalImage, int x, int y, int width, int height)
    {
        var bmp = new Bitmap(width, height);
        bmp.SetResolution(originalImage.HorizontalResolution, originalImage.VerticalResolution);

        using (var graphic = Graphics.FromImage(bmp))
        {
            graphic.SmoothingMode = SmoothingMode.AntiAlias;
            graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
            graphic.PixelOffsetMode = PixelOffsetMode.HighSpeed;

            graphic.DrawImage(originalImage, new Rectangle(0, 0, width, height), x, y, width, height, GraphicsUnit.Pixel);

            return bmp;
        }
    } 
```

**奖金问题：**

我发现的另一个问题是，在创建一个创建 a 的新位图时似乎没有有效的方法来传输原始文件的 ImageFormat `ImageFormatMemoryBMP`，当您尝试调用 Bitmap.Save(memorystream, original rawformat) 时，它会爆炸。并且位图 RawFormat 没有设置器。

那么如何在新位图上设置格式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:27:13.930

I think perhaps that this problem is solved purely on the front end, no need to use any server side for this.

Jcrop has a built in scale factor handler.

[http://deepliquid.com/content/Jcrop_Sizing_Issues.html](http://deepliquid.com/content/Jcrop_Sizing_Issues.html)

Now you can use this in two ways, as I understand it. Either to 'resize' the image for you on the front end using 'box sizing', or you can tell it the 'truesize' of the image and it will work out the scale factor and handle the coordinates for you on it's own.

**Box sizing**

```
$('#cropbox').Jcrop({ boxWidth: 450, boxHeight: 400 }); 
```

**True Size**

```
$.Jcrop('#cropbox',{ trueSize: [500,370] }); 
```

Using the true size method you will need to invoke jcrop using the api method: [http://deepliquid.com/content/Jcrop_API.html#API_Invocation_Method](http://deepliquid.com/content/Jcrop_API.html#API_Invocation_Method)

```
var jcrop_api,
options = { trueSize: [500,370] };

$('#target').Jcrop(options,function(){
jcrop_api = this;
}); 
```

Good luck!

# .net - 确定 SQL 配置 VB.Net

> ID：13363494
> 
> 赞同：2
> 
> 时间：2012-11-13T15:23:54.550
> 
> 标签：.net, vb.net

有没有一种简单的方法来确定 SQL 内存分配是否适用于它的快速版本或完整版本以及它的 2005/ 2008 等等？我对 vb.net 还很陌生，所以任何信息或代码示例都会很棒我知道 SQL Server 操作系统相关的动态管理视图，但不知道如何使用它们来获取我需要的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:30:01.353

您可以使用以下命令获取当前 sql 安装的所有属性的长字符串：

```
SELECT @@VERSION 
```

或者你可以用这个来分解它：

```
SELECT SERVERPROPERTY('productversion'), SERVERPROPERTY ('productlevel'), SERVERPROPERTY ('edition') 
```

下面是一个 VB 示例来帮助：

```
 Dim tempResult As String

    Using tempConnection As SqlConnection = New SqlConnection("{yourConnectionString}")
        Using tempCommand As SqlCommand = New SqlCommand()
            tempCommand.CommandText = "SELECT @@VERSION"
            tempCommand.Connection = tempConnection
            tempResult = CStr(tempCommand.ExecuteScalar)
        End Using
    End Using 
```

[http://msdn.microsoft.com/en-us/library/ms174396.aspx](http://msdn.microsoft.com/en-us/library/ms174396.aspx)

希望有帮助。

# actionscript-3 - AS3：错误 1009：

> ID：13363504
> 
> 赞同：-2
> 
> 时间：2012-11-13T15:24:30.837
> 
> 标签：actionscript-3, reference, null, movieclip

在我必须为大学制作的一个小游戏中，我在运行时渲染一个菜单，使用我在 illustrator 中绘制的按钮制作的电影剪辑。我像往常一样在 Flash Professional 中导入了 illustrator 文件，并像使用其他运行良好的影片剪辑一样建立了 AS 链接。但是当我尝试渲染这些按钮时，我得到一个错误 1009，一个空引用。顺便说一句，我用的是 AS3。

```
private function initMenuComponents():void{
        var btnPlay:MovieClip = new Play();
        var btnOptions:MovieClip = new Options();
        var btnLikeOnFacebook:MovieClip = new LikeOnFacebook();
        var btnShareOnFacebook:MovieClip = new ShareOnFacebook();

        btnPlay.x = (stage.stageWidth / 2) - (btnPlay.width / 2);
        btnOptions.x = (stage.stageWidth / 2) - (btnOptions.width / 2);
        btnLikeOnFacebook.x = (stage.stageWidth / 2) - (btnLikeOnFacebook.width / 2);
        btnShareOnFacebook.x = (stage.stageWidth / 2) - (btnShareOnFacebook.width / 2);

        btnPlay.y = 100;
        btnOptions.y = 150;
        btnLikeOnFacebook.y = 200;
        btnShareOnFacebook.y = 250;

        stage.addChild(btnPlay);
        stage.addChild(btnOptions);
        stage.addChild(btnLikeOnFacebook);
        stage.addChild(btnShareOnFacebook);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:41:13.417

听起来您没有正确链接 IDE 中的文件。您看到的错误源于此问题。我会注释掉几乎所有的代码，并测试以找出错误的确切位置。

```
var btnPlay:MovieClip = new Play();
//var btnOptions:MovieClip = new Options();
//var btnLikeOnFacebook:MovieClip = new LikeOnFacebook();
//var btnShareOnFacebook:MovieClip = new ShareOnFacebook(); 
```

# c# - 变量在其范围之外不可见

> ID：13363508
> 
> 赞同：-3
> 
> 时间：2012-11-13T15:24:47.080
> 
> 标签：c#, .net, switch-statement

我有一个单词模板，带有书签等。大部分都可以正常工作..但是我在使用 switch 语句时遇到了问题..我失去了它的范围之外。

我让它检查适用于保险费的货币类型，如果它是“英镑”，那么它将用“英镑”符号替换文本“英镑”，欧元和美元等也是如此。

我在这里的原因是寻求建议或承认我的想法是正确和可能的。

如果你愿意的话，我认为如果这是一个单独的“方法/功能”，我认为会起作用..但缺乏从哪里开始的知识/专业知识。

我试过了，但 Visual Studio 没有。这是 switch 语句：

```
switch (sCurrency.Trim())
{
    case "Pounds":
        sCurType = "L";
        break;
    case "Euros":
        sCurType = "€";
        break;
    case "Dollars":
        sCurType = "$";
        break;
    default:
        sCurType = " ";
        break;
} 
```

然后继续以这种方式使用它：

```
t_tbl.Cell(2, 2).Range.Text = sCurType + iExcess; 
```

问题是正如我之前所说，这个变量失去了它的范围，所以它要么不再存在，要么没有价值..
解决这个问题的最佳方法是什么..??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:38:41.650

我建议让框架处理货币的实际格式。问题是它不仅仅是获得正确的符号那么简单，然后您需要格式化实际值本身，即符号位置、小数分隔符等。因此，与其确定要使用哪个*符号*，不如看看您想要基于哪种*文化*例如格式化

```
public CultureInfo GetCultureForCurrency(string currency)
{
    switch (currency)
    {
        case "Pounds":
            return new CultureInfo("en-GB"); // GBP (UK)
        case "Euros":
            return new CultureInfo("fr-FR"); // Euros (France)
        case "Dollars":
            return new CultureInfo("en-US"); // Dollars (USA)
            break;
        default:
            return Thread.CurrentCulture; // Default system culture
    }
} 
```

**用法**

```
var culture = GetCultureForCurrency("Dollars");
t_tbl.Cell(2, 2).Range.Text = iExcess.ToString("C", culture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:30:17.307

你可以用这样的方法来做到这一点：

```
private string ToCurrencySymbol(string currency)
{
    string currencySymbol = null;

    switch (currency.Trim().ToLower())
    {
        case "pounds":
            currencySymbol = "£";
            break;
        case "euros":
            currencySymbol = "€";
            break;
        case "dollars":
            currencySymbol = "$";
            break;
        default:
            currencySymbol = " ";
            break;
    }

    return currencySymbol
} 
```

然后你这样称呼它：

```
t_tbl.Cell(2, 2).Range.Text = ToCurrencySymbol(sCurrency) + iExcess; 
```

但实际上您应该使用[RegionInfo](http://msdn.microsoft.com/en-us/library/0tk23w8x.aspx)类，它有一个 CurrencySymbol 属性，它为您提供特定区域的货币符号。

# objective-c - 用于协议 Xcode 编译器警告的 Objective-C 代理

> ID：13363514
> 
> 赞同：0
> 
> 时间：2012-11-13T15:25:07.213
> 
> 标签：objective-c

我有一个类，它充当转发代表的通用代理。通过实现`respondsToSelector`，`forwardInvocation`我可以使用这个类来转发选择器，这些选择器将被发送给各种 UI 控件的委托。

问题是当我使用这个类时，我得到一个编译器警告。例如，如果我使用它将消息转发到 UITableViewDelegate：

```
DelegateForwarder* _forward = [[DelegateForwarder alloc] init];
_tableView.delegate = _forward; 
```

我收到编译器警告：

```
Assigning to id<UITableViewDelegate> from incompatible type 'DelegateForwarder' 
```

我知道生成警告是因为 DelegateForwarder 不采用`UITableViewDelegate`委托，但我不希望它这样做 - 因为它提供的转发机制是完全通用的。

尽管有警告，但我的代码按预期运行。

我可以做些什么来以某种方式向此类的编译器和用户表明它使用消息转发，因此它不采用特定协议的事实不是问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:46:36.490

扩展评论....

由于`id`被称为“通用对象类型”，它的使用是向类型检查机制发出的信号，即被引用对象的性质被认为是完全动态的。这意味着诸如...的代码

```
DelegateForwarder* _forward = [[DelegateForwarder alloc] init];
_tableView.delegate = _forward; 
```

...意味着`DelegateForwarder`应该检查变量的一致性，而...

```
id _forward = [[DelegateForwarder alloc] init];
_tableView.delegate = _forward; 
```

...是一种“相信我”的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:51:33.140

检查您是否添加`<UITableViewDelegate>`到`DelegateForwarder`的协议列表中。一般来说，它比使用通用“id”类型初始化更合适。

# json - 黑莓如何获取 Json 响应（java）

> ID：13363523
> 
> 赞同：0
> 
> 时间：2012-11-13T15:25:17.913
> 
> 标签：json, web-services, blackberry, response

我想在模拟器上获得 JSON 响应。如何从服务器读取 JSON？

```
public void run()
{
      HttpConnection httpConn;
      ConnectionFactory connFact = new ConnectionFactory();
      ConnectionDescriptor connDesc;

      connDesc = connFact.getConnection("http://example.com/login.php");

      if (connDesc != null)
      {
          try {  
                  httpConn = (HttpConnection)connDesc.getConnection();
                  final int iResponseCode = httpConn.getResponseCode();

                  Dialog.alert("Type: "+httpConn.getType());

                  UiApplication.getUiApplication().invokeLater(new Runnable()
                  {
                      public void run()
                      {
                          Dialog.alert("Response code: " +  Integer.toString(iResponseCode)); 
                      }
                  });                         
           } 
           catch (IOException e) 
           {
                 System.err.println("Caught IOException: "  + e.getMessage());
           }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:51:05.860

```
HttpConnection connection = (HttpConnection)Connector.open(urlConection);
InputStream  inputStream = connection.openInputStream();
if(connection.getResponseCode() == HttpConnection.HTTP_OK){
    InputStreamReader reader = new InputStreamReader(inputStream, "UTF-8");
    int readCharacter;
    StringBuffer responseBuffer = new StringBuffer();
    while ((readCharacter = reader.read()) != -1) {
        responseBuffer.append((char) readCharacter);
        connection.close();
        inputStream.close();
        reader.close();
        String responseMessage = new String(responseBuffer);
    }
} 
```

您需要为响应创建 JSONObject。

```
try {
    JSONObject object = new JSONObject(responseMessage);
} catch (JSONException e) {
    e.printStackTrace();
} 
```

# cocos2d-iphone - Cocos2d 从 plist 加载动画

> ID：13363525
> 
> 赞同：0
> 
> 时间：2012-11-13T15:25:34.360
> 
> 标签：cocos2d-iphone

我找到了这个[链接](http://www.youtube.com/watch?v=8ZyqGrdkTtM)来了解如何使用 Adob​​e 工具和 plist 文件为精灵创建动画路径。但我仍然不知道如何为这个文件创建解析器。是否已经制定了解决方案，或者我需要自己创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:05:36.650

这将解析文件，加载纹理，并创建您需要的所有 spriteFrame 对象：

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"myFrames.plist"]; 
```

# java - 我可以在 INSERT Batch 之后使用 LAST_INSERT_ID() 选择而不用关心吗？

> ID：13363527
> 
> 赞同：3
> 
> 时间：2012-11-13T15:25:34.873
> 
> 标签：java, mysql, jdbc

我在问自己是否可以在一批 s 之后`SELECT`使用`LAST_INSERT_ID()`in Clause而不会在表中获取损坏的数据？我正在考虑多个用户同时做同样事情的场景。我开发了一个 JSF 应用程序，在该应用程序中可以实现这种情况。`WHERE``INSERT`

在硬代码中，我的`SELECT`after`INSERT`看起来像这样：

```
preparedstatement.addBatch(
              "INSERT INTO table1(all the FIELDS)"
              + "VALUES(null, ...);"
      );

      preparedstatement.addBatch(
              "INSERT INTO table2(all the FIELDS)"
              + "VALUES(null, LAST_INSERT_ID(), ...);"          
      );

      preparedstatement = connect.prepareStatement(

              "SELECT id FROM table3 WHERE id = LAST_INSERT_ID();"

      );

      preparedstatement.executeBatch();
      resultSet = preparedstatement.executeQuery(); 
```

让我对这个实现有问题还是有更好的方法？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:32:33.057

你应该没问题，引用 MySQL 的文档：

> **生成的 ID 在每个连接的基础**上在服务器中维护 。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

[MySQL Last_insert_id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

# sql - 没有递归查询的 SQL 中的空间高效 DAG？

> ID：13363532
> 
> 赞同：0
> 
> 时间：2012-11-13T15:25:41.627
> 
> 标签：sql

在 SQL 中表示 DAG 的标准方法是传递闭包表：

```
CREATE TABLE Foo (Id int primary key identity, Name nvachar(30))
CREATE TABLE Foo_Foo
(ParentId int not null
,ChildId int not null
,Distance int not null) 
```

因此，插入的每个父子关系都需要使用 Distance + 1 复制所有父级的 Foo_Foo 条目：

```
INSERT INTO Foo (Name) VALUES ('Some Name')
DECLARE @somename int = @@IDENTITY

-- DAG: Some Name -> Some other name
INSERT INFO Foo (Name) VALUES ('Some other name')
DECLARE @someother int = @@IDENTITY
INSERT INTO Foo_Foo (ParentId, ChildId, Distance)
VALUES (@somename, @someother, 0)

-- DAG: Some Name -> Some other name -> Some final name
INSERT INTO Foo (Name) Values ('Some final name')
INSERT INTO Foo_Foo (ParentId, ChildId, Distance)
VALUES (@someother, @@IDENTITY, 0)
INSERT INTO Foo_Foo (ParentId, ChildId, Distance) 
SELECT ParentId, @@IDENTITY, Distance + 1 FROM Foo_Foo
WHERE ChildId = @someother

-- DAG: Some Name -> Some other name -> Some final name
--               \_____________________/
INSERT INTO Foo_Foo (ParentId, ChildId, Distance)
VALUES (@someother, @@IDENTITY, 0) 
```

问题是 Foo_Foo 表随着 DAG 路径深度的阶乘乘以唯一路径的数量而增长，即。在距 DAG 的根顶点 V 的距离 D 处插入的每个 Foo 至少需要 (# unique paths to D from V) * (D-1) * (D-2) * ... Foo_Foo 表中的条目。我可以进一步规范化上述内容以获得空间复杂度（~# 与 V 距离为 D 的顶点）* (D-1)！，但这已经是我能做到的了。

这对于表示可以任意增长的 DAG 显然是不可行的。递归查询可能是最好的解决方案，但并非在所有地方都得到完全支持。树有一些聪明的解决方案，但我一直无法为 DAG 找到一个好的解决方案。有没有使用带有非递归查询的 SQL 表的聪明的 DAG 解决方案？

# c# - 为什么调用基类方法而不是派生类方法？

> ID：13363534
> 
> 赞同：7
> 
> 时间：2012-11-13T15:25:42.767
> 
> 标签：c#, inheritance

期待“来自派生的你好”。但得到“基地的你好。”。

```
class Program
{
    interface IBase
    {
        void Method();
    }

    public class Base: IBase
    {
        public virtual void Method()
        {
            Console.WriteLine("Hello from the base.");
        }
    }

    public class Derived : Base
    {
        public virtual new void Method()
        {
            Console.WriteLine("Hello from the derived.");
        }
    }

    static void Main(string[] args)
    {
        IBase x = new Derived();
        x.Method();
    }
} 
```

那么为什么不调用派生类的方法。更重要的是，如何在不将 x 转换为 Derived 类型的情况下调用派生类方法？

在我的实际应用中，IBase还有其他几个相关的方法，而Derived只替换了IBase中的两个方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T15:33:32.023

当您使用`new`修饰符时，您明确表示该方法不是该层次结构的虚拟调度链的一部分，因此在基类中以相同的名称调用该方法不会导致重定向到子类。如果您使用`override`而不是标记该方法，`new`您将看到您期望看到的虚拟调度。

您还需要`virtual`从派生类的方法中删除，因为您不能将`override`方法标记为`virtual`（它已经是）。

如果您真的不想覆盖该方法，那么在您的情况下，根本不使用继承可能更合适。您可能只想专门使用接口：

```
public interface IFoo
{
    void Foo();
}

public class A : IFoo
{
    public void Foo()
    {
        Console.WriteLine("I am A, hear me roar!");
    }
}

public class B : IFoo
{
    public void Foo()
    {
        Console.WriteLine("I am B, hear me roar!");
    }
}

private static void Main(string[] args)
{
    IFoo foo = new A();
    foo.Foo();

    foo = new B();
    foo.Foo();

    Console.WriteLine();
    Console.WriteLine("Press any key to exit . . .");
    Console.ReadKey(true);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:28:57.330

这是工作中的基本[多态性](http://msdn.microsoft.com/en-us/library/ms173152.aspx)。

对于您正在寻找的行为，您需要将派生方法设置为覆盖继承的方法：

```
public class Derived : Base
{
    public override void Method()
    {
        Console.WriteLine("Hello from the derived.");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:27:06.867

使用[override](http://msdn.microsoft.com/en-us/library/ebca9ah3%28v=vs.71%29.aspx)关键字而不是`virtual new`在您的子类中。

因此，您的代码应如下所示：

```
class Program
{
    interface IBase
    {
        void Method();
    }

    public class Base: IBase
    {
        public virtual void Method()
        {
            Console.WriteLine("Hello from the base.");
        }
    }

    public class Derived : Base
    {
        public override void Method() // The magic happens here!
        {
            Console.WriteLine("Hello from the derived.");
        }
    }

    static void Main(string[] args)
    {
        IBase x = new Derived();
        x.Method();
    }
} 
```

[如此处](http://msdn.microsoft.com/en-us/library/435f1dw2%28v=vs.80%29.aspx)所述，`new`关键字用于隐藏父方法，这不是您要查找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:32:27.573

`new`关键字创建一个新方法并表示基本方法是隐藏的。但这仅适用于派生类的消费者，因为基类代码对此一无所知。

`override`关键字用新的基类实现覆盖。

```
class Program
{
    interface IBase
    {
        void Method();
    }

    public class Base: IBase
    {
        public virtual void Method()
        {
            Console.WriteLine("Hello from the base.");
        }
    }

    public class Derived : Base
    {
        // the next line was changed.
        public override void Method()
        {
            Console.WriteLine("Hello from the derived.");

            // note that if you want to call the original implementation, you do it like this:
            base.Method();
        }
    }

    static void Main(string[] args)
    {
        Base x = new Derived();
        x.Method();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:43:33.443

Derived 中的新方法仅存在于 Derived 实例中，它有效地隐藏了基本实现。

但是 IBase 类型只知道 Base 的实现，所以它调用它。

要回答您的问题，请调用派生的实现：

```
Derived d = new Derived();
d.Method();
((IBase)d).Method();

//Prints:
//Hello from the derived.
//Hello from the base. 
```

# javascript - Visual Studio、Windows 8 HTML5 Javascript 问题

> ID：13363537
> 
> 赞同：2
> 
> 时间：2012-11-13T15:25:46.947
> 
> 标签：javascript, html, windows-runtime

不知道这篇文章的标题是什么，我一直在尝试制作一个小的 Windows 8 应用程序，如果这很难理解，我没有太多的知识和抱歉，下面是我的 itemDetail.js

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/itemDetail/itemDetail.html", {
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.

    ready: function (element, options) {
        var item = options && options.item ? Data.resolveItemReference(options.item) : Data.items.getAt(0);
        element.querySelector(".titlearea .pagetitle").textContent = item.group.title;
        element.querySelector("article .item-title").textContent = item.title;
        element.querySelector("article .item-subtitle").textContent = item.subtitle;
        element.querySelector("article .item-image").src = item.backgroundImage;
        element.querySelector("article .item-image").alt = item.subtitle;
        element.querySelector("article .item-content").innerHTML = item.content;
        element.querySelector("article .track1").innerHTML = item.track1;
        WinJS.Utilities.query("#playMP3").listen("click", getStartVideoFuntion("http://www.ikkmusic.com/ikkmusic.com%20mix.mp3"));
    },
});

function getStartVideoFuntion(src) {
    return function () {
        // Set video element's source
        var vid = WinJS.Utilities.query("#playback")[0];
        vid.src = src;
        vid.play();
    };
}})(); 
```

所以我有一个名为 data.js 的文件，其中包含所有示例数据，我在这里获取信息并显示它，它工作正常，但我的问题是显示 url 的底部（下方），当按下按钮时，它会播放 html5 播放器标签中的 url，这很有效，有没有办法让我将 item.track1 的内容放在现在的 URL 的位置，我无法将它的内容放在那里的数据。

```
WinJS.Utilities.query("#playMP3").listen("click", getStartVideoFuntion("http://www.ikkmusic.com/ikkmusic.com%20mix.mp3")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:29:25.873

WinJS.Utilities.query("#playMP3").listen("点击", getStartVideoFuntion(item.track1));

# iphone - 移动网络应用程序 - 键盘未出现

> ID：13363538
> 
> 赞同：0
> 
> 时间：2012-11-13T15:25:50.863
> 
> 标签：iphone, web-applications, mobile, web, mobile-website

我有一个移动网络应用程序，在模拟器 5.1/6.0、xcode 4.5 for iphone 上运行良好。但是当我在真实设备（3gs，ios 5.1）上进行测试时，我得到了一个奇怪的行为：在我放置输入字段 html 元素的任何地方，我需要用户填写一些内容，我点击该字段，它获得焦点（我看到光标），但触摸键盘没有出现，我无法输入任何内容。如果我在 sim 上尝试，一切都很好，kb 出现了。

我不知道如何诊断这个......尝试谷歌搜索一些答案，没有找到任何答案:(

有任何想法吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:47:36.563

好的，发现问题，似乎该应用程序不是使用最新的 Xcode 模板创建的（它是一个旧版应用程序），所以我删除了我不需要的 MainWindowxxx.xibs，并使用了新 XCode 应用程序模板中的代码通过以编程方式创建主视图控制器并将其设置为窗口的 rootViewController 来初始化应用程序。当然，调用 [self.window makeKeyAndVisible]

# ios - 通过 RestKit (iOS) 和 TastyPie 连接到 Django

> ID：13363540
> 
> 赞同：1
> 
> 时间：2012-11-13T15:25:58.867
> 
> 标签：ios, django, nsurlconnection, restkit, tastypie

大家，早安，

所以我们决定创建一个 iOS 应用程序，为此，我们向我们的应用程序添加了一个带有 TastyPie 的 REST Web 服务。到目前为止一切都很好......但我们有一个小问题。

在 iOS 端，我们使用的是 RestKit，我们面临着身份验证问题。我们可以让用户登录，但是 Django 需要向 iOS 应用返回一些东西，以便在用户登录后保留会话并访问其余可能的 API。

在 web 端，我们使用 Django Sessions 和 Cookies。我们是否应该只发回会话并将其存储在 iOS 的 HTTP 标头中？或者，我已经看到我们可以使用 ApiKeyAuthentication。这是否意味着 HTTP 标头将始终在其标头中包含 ApiKey 以及用户名？那还安全吗？

我有点困惑，所以非常感谢！

# sql - SQL Server 组合查询

> ID：13363544
> 
> 赞同：0
> 
> 时间：2012-11-13T15:26:08.537
> 
> 标签：sql, sql-server

我正在尝试获取存储在我的数据库中的每个 Web URL 页面的用户总访问次数。
Bellow 是我的 SQL 查询，它将显示 URL 包含该关键字的唯一用户总数。

```
SELECT COUNT(DISTINCT userId) as someUrlTitleTotalVisitors
FROM someTable
WHERE urlCol LIKE '%someUrlKeyword%' 
```

现在我还有 50 多页要走，例如：

```
SELECT COUNT(DISTINCT userId) as anotherUrlTitleTotalVisitors
FROM someTable
WHERE urlCol LIKE '%anotherUrlKeyword%' 
```

。ETC..

我假设我不需要为每个 URL 标题编写 50 多个单独的查询，并且我应该能够通过一次调用获取所有数据。

所以，我的问题是如何将这个查询合并为一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:48:30.140

好的，如果您没有要在表上检查的关键字，那么可悲的是，您正在查看这样的查询：

```
SELECT  CASE WHEN urlCol LIKE '%Url-Title-1%' THEN 'Url-Title-1'
        WHEN urlCol LIKE '%Url-Title-2%' THEN 'Url-Title-2'
        WHEN urlCol LIKE '%Url-Title-3%' THEN 'Url-Title-3'
        WHEN urlCol LIKE '%Url-Title-4%' THEN 'Url-Title-4'
        ..... END Url,
        COUNT(DISTINCT userId)  TotalVisitors
FROM someTable
WHERE urlCol LIKE '%Url-Title-1%'
OR urlCol LIKE '%Url-Title-2%'
OR urlCol LIKE '%Url-Title-3%'
OR urlCol LIKE '%Url-Title-4%'
.....
GROUP BY CASE WHEN urlCol LIKE '%Url-Title-1%' THEN 'Url-Title-1'
         WHEN urlCol LIKE '%Url-Title-2%' THEN 'Url-Title-2'
         WHEN urlCol LIKE '%Url-Title-3%' THEN 'Url-Title-3'
         WHEN urlCol LIKE '%Url-Title-4%' THEN 'Url-Title-4'
         ..... END 
```

现在，如果您可以将这些关键字放在一个表中，您的查询将是这样的：

```
SELECT  B.KeyWord,
        COUNT(DISTINCT userId)  TotalVisitors
FROM someTable A
INNER JOIN TableWithKeywords B
ON A.urlCol LIKE '%' + B.KeyWord + '%'
GROUP BY B.KeyWord 
```

有很大的不同，对吧？而且您可以在该表上添加或删除关键字，而无需触及您的查询，非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:35:32.507

听起来您需要按 URL 分组：

```
SELECT urlCol, COUNT(DISTINCT userId) as title1TotalVisitors
FROM someTable
GROUP BY urlCol 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T15:34:41.357

```
SELECT COUNT(DISTINCT userId) as title1TotalVisitors,urlCol 
FROM someTable
WHERE urlCol LIKE '%Url-Title-[1-50]%'
Group by urlCol 
```

# grails - 当属性为空时，NamedQuery 不返回结果？

> ID：13363545
> 
> 赞同：0
> 
> 时间：2012-11-13T15:26:11.890
> 
> 标签：grails, grails-orm

嗨，我在构建命名查询时似乎碰壁了。

我有以下情况：一个人有一个可选的地址，一个地址有一个可选的国家。

现在我想过滤一堆字段并在搜索某些文本时返回结果。

我尝试了以下部分，但是每当一个人有一个位置和地址并且地址没有国家/地区时，我就没有结果。

```
 filterOnAddress { String loc ->
        if(!loc.isEmpty()) {
            location {
                address {
                    or {
                        ilike 'street', "%${loc}%"
                        ilike 'city',  "%${loc}%"
                        country {
                            or {
                                ilike 'titleLocal',  "%${loc}%"
                                ilike 'title',  "%${loc}%"
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

```
filterOnAddress { String loc ->
    if(!loc.isEmpty()) {
        location {
            address {
                or {
                    ilike 'street', "%${loc}%"
                    ilike 'city',  "%${loc}%"
                    and {
                        isNotNull('country')
                        country {
                            or {
                                ilike 'titleLocal',  "%${loc}%"
                                ilike 'title',  "%${loc}%"
                            }
                        }

                    }
                }
            }
        }
    }
} 
```

每当 Person 的 Country 为 null 时，查询不会返回预期结果，因为据我所知，某些条件已满足！因此，当一个国家/地区为空时，我会期待一些结果。

当国家为空但其他条件成功时，我的查询中需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:25:24.983

从快速扫描来看，这对我来说很合法。我建议删除国家部分并确保您在没有它的情况下获取数据。然后我的下一步是打开 sql 日志记录（根据[http://grails.org/doc/latest/guide/conf.html#dataSource](http://grails.org/doc/latest/guide/conf.html#dataSource)将 logSql 元素添加到数据源），并查看用于查找数据的内容.

# java - 无法使用 jsp 检索 cookie 值

> ID：13363548
> 
> 赞同：2
> 
> 时间：2012-11-13T15:26:25.433
> 
> 标签：java, jsp, servlets

这是我创建 cookie 的 java 代码。

```
Cookie c= new Cookie("pass", "abc");
response.addCookie(c); 
```

这是我试图检索 cookie 详细信息的 JSP 页面。

```
<%@ page import="javax.servlet.*, javax.servlet.http.*" %>
<% Cookie[] cookie=request.getCookies();
String passwd="pass";
for (int i = 0; i < cookie.length; i++) {
   if(cookie[i].getName().equals("pass"))
   {
     passwd=cookie[i].getValue();
   }
 }
%>
<label for="pwd">Password : </label><input type="text" id="pwd" name="pass" value=<%=passwd%>></input> 
```

[无法检索应用程序添加的 cookie](https://stackoverflow.com/questions/9096352/unable-to-retrieve-application-added-cookie) 这个问题与我的问题有些相关，尽管答案对我有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:49:54.353

谢谢您的意见。我没有设置路径。例如。如果 cookie 是在 /xyz 中创建的，它在 /uvw 中是看不到的。现在我的代码工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:18:07.300

此外，您可以使用`${cookie.pass.value}`获取传递 cookie 的值

# scala - 在 Scala 中使用自定义相等关系在不可变列表上调用 distinct

> ID：13363549
> 
> 赞同：5
> 
> 时间：2012-11-13T15:26:26.180
> 
> 标签：scala

我想从 Scala 列表中提取不同的元素，但我不想使用自然相等关系。我该如何指定它？

我是否必须重写函数或者有什么方法（可能使用我缺少的一些隐式定义）来调用`distinct`具有自定义相等关系的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T15:43:04.767

`distinct`不期望排序算法 - 它使用 equals 方法（[source](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/SeqLike.scala#L501)）。

实现您想要的一种方法是创建自己的排序并将其传递给 a `SortedSet`，它需要一个`Ordering`：

```
implicit val ord = new Ordering[Int] {
  def compare(i: Int, j: Int) = /* your implementation here */
}
val sortedList = collection.immutable.SortedSet(list: _*)/*(ord)*/.toList 
```

# c# - var this.Parent as STP2Main 更好的语法

> ID：13363552
> 
> 赞同：2
> 
> 时间：2012-11-13T15:26:28.893
> 
> 标签：c#, winforms, visual-studio-2010, controls, parent

如果我将控件加载到表单 A 中，我有一个具有以下功能的控件。

```
 private void button1_Click(object sender, EventArgs e)
    {
        var C = this.Parent.Parent.Parent.Parent.Parent as STP2Main;
        C.DisposeControl(STP_Data.Data.ConfigConfigResource);
    } 
```

如果我将控件加载到表单 BI 中需要这样写：

```
 private void button1_Click(object sender, EventArgs e)
    {
        var C = this.Parent.Parent.Parent as STP2Main;
        C.DisposeControl(STP_Data.Data.ConfigConfigResource);
    } 
```

这行得通。但我真的不喜欢`this.Parent.Parent...`（最多 5 次 Parent）如果我`var C`在行上设置断点，我看到它指向，`[STP_Design.STP2Main]`但是当我将函数更改为时，`var C = STP_Design.STP2Main as STP2Main;`我得到一个错误，上面写着：

“STP_Design.STP2Main”是一个“类型”，在给定的上下文中无效

如何摆脱 Parent.Parent.Parent 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:33:43.510

如果父控件是`Form`您可以使用的

```
var C = this.ParentForm as SomeControlName; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:44:12.850

这并不是那么难。只需继续检查控件的父级，直到您用完要检查的父级，或者找到合适的类型之一。我写这个是为了更笼统；您可以将它用于任何类型的父级（只需将其放在泛型类型中），而不是使用特定操作，我为在父表单上调用的方法提供了一个参数。

```
public static void DisposeMainParent<T>(this Control control, Action<T> disposal)
    where T : Control
{
    Control temp = control;
    T mainControl = null;
    for (Control c = control; c != null && mainControl == null; c = c.Parent)
    {
        mainControl = temp as T;
    }

    if (mainControl != null)
    {
        disposal(mainControl);
    }
} 
```

# git - Git错误：连接到远程存储库时“主机密钥验证失败”

> ID：13363553
> 
> 赞同：354
> 
> 时间：2012-11-13T15:26:36.667
> 
> 标签：git, ssh, ssh-keys

我正在尝试连接到位于我的 Web 服务器上的远程 Git 存储库并将其克隆到我的机器上。

我的命令使用以下格式：

```
git clone ssh://username@domain.com/repository.git 
```

这对我的大多数团队成员来说都很好。通常运行此命令后，Git 会提示输入用户密码，然后运行克隆。但是，在我的一台机器上运行时，出现以下错误：

> 主机密钥验证失败。
> 
> 致命：无法从远程存储库中读取。

我们没有使用 SSH 密钥连接到这个存储库，所以我不确定 Git 为什么要在这台特定的机器上检查一个。

* * *

## 回答 #1

> 赞同：546
> 
> 时间：2015-04-01T00:17:14.907

正如我之前在克隆 git repo 中回答的那样[导致错误 - 主机密钥验证失败。致命：远程端意外挂断](https://stackoverflow.com/questions/15214977/cloning-git-repo-causes-error-host-key-verification-failed-fatal-the-remote/29380672#29380672)，将GitHub加入已知主机列表：

```
ssh-keyscan -t rsa github.com >> ~/.ssh/known_hosts 
```

* * *

## 回答 #2

> 赞同：262
> 
> 时间：2012-11-13T15:59:18.870

您正在通过 SSH 协议进行连接，如`ssh://`克隆 URL 上的前缀所示。使用 SSH，每个主机都有一个密钥。客户端记住与特定地址相关联的主机密钥，如果主机密钥出现变化，则拒绝连接。这可以防止中间人攻击。

domain.com 的主机密钥已更改。**如果这对您来说并不可疑，请**`${HOME}/.ssh/known_hosts`通过编辑以删除 domain.com 的行或让 SSH 实用程序为您执行此操作，从而从本地缓存中删除旧密钥。

```
ssh-keygen -R domain.com 
```

从这里，您可以自己记录更新的密钥

```
ssh-keyscan -t rsa domain.com >> ~/.ssh/known_hosts 
```

或者，等价地，`ssh`下次您连接`git fetch`, `git pull`, 或`git push`（甚至是普通的 ol' `ssh domain.com`）时，请在提示时回答“是”，为您执行此操作

```
无法确定主机“domain.com (abcd)”的真实性。
RSA 密钥指纹为 XX:XX:...:XX。
您确定要继续连接（是/否）？
```

`known_hosts`出现这个提示的原因是domain.com在你删除后已经不在了，估计系统的也没有了`/etc/ssh/ssh_known_hosts`，所以`ssh`无法知道连接另一端的主机是否真的是domain.com。（如果 中的键不正确`/etc`，则具有管理权限的人将不得不更新系统范围的文件。）

我强烈建议您考虑让用户也使用密钥进行身份验证。这样，`ssh-agent`可以方便地存储密钥材料（而不是每个人都必须为每次连接服务器输入密码），并且密码不会通过网络传输。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2015-04-28T00:16:21.833

我有类似的问题，但是，使用 SSH 密钥。从上面 Tupy 的回答中，我发现问题在于 known_hosts 文件不存在或 github.com 不存在于已知主机列表中。这是我解决它的步骤 -

1.  `mkdir -p ~/.ssh`
2.  `ssh-keyscan -t rsa github.com >> ~/.ssh/known_hosts`
3.  `ssh-keygen -t rsa -C "user.email"`
4.  使用此命令打开公钥`$ cat ~/.ssh/id_rsa.pub`并复制它。
5.  将*id_rsa.pub*密钥添加到 GitHub 配置文件上的 SSH 密钥列表。

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2017-11-01T09:46:47.413

发生这种情况是因为 github 当前不在您的已知主机中。

应该会提示您将 github 添加到您的已知主机。如果这还没有发生，您可以运行`ssh -T git@github.com`以再次接收提示。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2017-08-02T22:51:53.143

对我来说，我只需要在询问“你确定要继续连接（是/否）吗？”的提示符下输入“是”。而不仅仅是按 Enter。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-03-04T01:40:29.913

如果您在始终受防火墙保护的办公室内部网（否则很危险）中，只需在您的`~/.ssh/config`.

```
Host *
  StrictHostKeyChecking no
  UserKnownHostsFile=/dev/null 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-08-06T12:04:09.183

我在新安装的系统上遇到了同样的问题，但这是一个 udev 问题。没有`/dev/tty`节点，所以我不得不这样做：

```
mknod -m 666 /dev/tty c 5 0 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2019-04-22T07:10:50.993

当被问及：

`Are you sure you want to continue connecting (yes/no)?`

键入**yes**作为响应

这就是我解决问题的方法。但是，如果您尝试仅按 Enter 按钮，它将无法正常工作！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-01-21T21:18:10.487

对我有用的是首先添加我的新计算机的 SSH 密钥，我按照[GitLab 的这些说明进行操作 - 添加 SSH 密钥](https://docs.gitlab.com/ce/ssh/README.html)。请注意，由于我使用的是 Win10，因此我必须在 Windows 上的 Git Bash 中执行所有这些命令（它在常规 DOS cmd Shell 中不起作用）。

然后再次在 Git Bash 中，我不得不做一个`git clone`我遇到问题的 repo，在我的情况下，我不得不将它克隆为不同的名称，因为我已经在本地拥有它并且不想丢失我的提交。例如

```
git clone ssh://git@gitServerUrl/myRepo.git myRepo2 
```

然后我得到提示将其添加到已知主机列表中，问题可能是这个：

> 您确定要继续连接（是/否）？

我输入了“yes”，它终于成功了，你通常会收到类似这样的消息：

> 警告：将“[您的 repo 链接]”（ECDSA）永久添加到已知主机列表中。

**注意**：如果您在 Windows 上，请确保对所有命令都使用 Git Bash，这在常规 cmd shell 或 powershell 中不起作用，我真的必须在 Git Bash 中执行此操作。

最后，我删除了第二个克隆存储库（`myRepo2`在示例中）并返回到我的第一个存储库，我终于可以在我最喜欢的编辑器 VSCode 中像往常一样完成所有 Git 工作。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-07-18T11:31:57.830

当远程服务器想要连接到私有仓库时，它将通过 ssh 进行身份验证。使用 ssh-keygen 创建私钥-公钥对，或者如果您已经拥有公钥-私钥。在私有仓库的设置中复制并粘贴公钥。

**YourPrivateRepo -> 设置 -> 部署密钥 -> 添加部署密钥 -> 粘贴公钥。**

现在远程服务器将能够连接到私有仓库。

注意：部署密钥只能读取 repo。需要明确允许写访问。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-04-05T16:51:53.787

如果你在 Windows 上使用 git。

*   打开 git GUI。
*   在 git GUI 中打开本地 git 存储库。
*   如果遥控器已经存在，则添加遥控器或推送。
*   对是否要继续的问题回答“是”。

GUI 客户端会为您添加密钥到`~/.ssh/known_hosts`. 如果您不经常这样做，这更容易记住，也避免了使用 git 命令行的需要（标准的 Windows 命令行没有`ssh-keyscan`可执行文件。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-07-19T18:57:40.827

这里提到的解决方案很棒，唯一缺少的一点是，如果您的公钥和私钥文件名与默认文件名不同怎么办？

在 ~/.ssh 下创建一个名为“config”的文件并添加以下内容

```
Host github.com
    IdentityFile ~/.ssh/github_id_rsa 
```

替换`github_id_rsa`为您的私钥文件。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-07-30T13:16:29.300

在图像公开时，我在构建期间在 DockerFile 中遇到了同样的错误。我对 Dockerfile 做了一点修改。

```
 RUN git clone  https://github.com/kacole2/express-node-mongo-skeleton.git /www/nodejs 
```

> 这将是因为使用 git@github.com:... 语法最终 > 使用 SSH 进行克隆，并且在容器内，您的私钥不可用 >。您需要使用 RUN git clone > [https://github.com/edenhill/librdkafka.git](https://github.com/edenhill/librdkafka.git)代替。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-10-13T08:28:35.147

原因似乎是远程主机的公钥未存储或与存储的不同。（请注意安全问题，有关详细信息，请参阅 Greg Bacon 的回答。）

在这种情况下，我习惯于`git clone`提示我：

```
The authenticity of host 'host.net (10.0.0.42)' can't be established.
ECDSA key fingerprint is 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00.
Are you sure you want to continue connecting (yes/no)? 
```

不确定，为什么会引发此错误。可能是您的 shell 或 git SSH 命令的配置。
无论如何，您可以通过运行获得相同的提示`ssh user@host.net`。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-04-14T17:39:00.960

另一种方法对我有用，而不是克隆 SSH 链接

```
git@gitlab.company.net:upendra/mycode.git 
```

有一个选择http链接的选项

```
http://gitlab.company.net:8888/upendra/mycode.git 
```

所以我使用http链接克隆Visual Studio，它对我有用

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-08-14T05:02:16.703

这意味着您的远程主机密钥已更改（可能是主机密码更改），

您的终端建议以 root 用户身份执行此命令

```
$ ssh-keygen -f "/root/.ssh/known_hosts" -R [www.website.net] 
```

您必须从您的电脑/服务器上的主机列表中删除该主机名。复制建议的命令并以 root 用户身份执行。

```
$ sudo su                                                        // Login as a root user

$ ssh-keygen -f "/root/.ssh/known_hosts" -R [www.website.net]    // Terminal suggested command execute here
Host [www.website.net]:4231 found: line 16 type ECDSA
/root/.ssh/known_hosts updated.
Original contents retained as /root/.ssh/known_hosts.old

$ exit                                                           // Exist from root user 
```

再试一次，希望这有效。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-01-26T12:19:56.747

Check permissions on the known_hosts file as well - both the user's (~/.ssh/known_hosts) and the global one (/etc/ssh/ssh_known_hosts).

In my case the old host was in /etc/ssh/ssh_known_hosts. When I removed it as root with `sudo ssh-keygen -f /etc/ssh/ssh_known_hosts -R THE_HOST` it changed permissions on that file to 0600, so SSHing to THE_HOST as root worked, but for any other user it failed with "Host key verification failed". The fix was:

```
sudo chmod 644 /etc/ssh/ssh_known_hosts 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-06-11T14:06:18.797

推送到 Git 返回错误代码 403 致命：HTTP 请求失败

检查是否存在计费问题。Google Cloud 停止将文件上传到[https://source.cloud.google.com/](https://source.cloud.google.com/)

付款问题解决后，我得到了这个问题。但没有改变钥匙。

谢谢

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-04-15T23:59:43.017

除了[Tupy 的答案](https://stackoverflow.com/a/29380765/1884171)之外，您可能需要添加存储库主机的端口号：

```
ssh-keyscan -p 8888 -t rsa domain.com >> ~/.ssh/known_hosts 
```

如果您有另一台可以远程访问的机器，您可以通过查看 ~/.ssh/known_hosts 找到端口号：

```
[user]$ less ~/.ssh/known_hosts
[domain.com]:8888,[000.00.000.000]:8888 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCi... 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-08-09T23:27:27.250

您可以使用 https 而不是 ssh 进行 git clone 或 git pull 或 git push

前任：

```
git clone https://github.com/user/repo.git 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-05-19T01:28:45.220

如果您没有使用 Windows Session 来更新代码，并且您使用`PortableGit`，则需要`HOMEPATH`在运行 git 命令之前设置环境变量。

这个例子更[适合其他用例](https://stackoverflow.com/questions/67578903/execute-git-bash-exe-from-a-service/67595782#67595782)，但我认为这对这篇文章来说是一个很好的概念证明。

`$env:HOMEPATH="\Users\Administrator";C:\path\to\PortableGit\bin\git.exe -C C:\path\to\repository.git pull'`

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-26T01:38:29.300

对我来说，我只是将“known_hosts”文件重命名为“known_hosts.del”进行备份。然后重新运行 git clone xxx 并输入“yes”。我将创建新的“known_hosts”

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-05-11T09:58:12.223

您可以在 Jenkinsfile 或任何您想要的地方使用“https”URL 格式的“git url”。

`git url: 'https://github.com/jglick/simple-maven-project-with-tests.git'`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-09-26T11:21:04.853

或者，如果您使用的是*MSYS2*终端（在 Windows* 上）和密码，则可能是终端没有正确提示“输入密码”，从而拒绝访问 SSH。

如果您使用的是 Windows，则可以改为使用 Git Bash 或 Powershell 来获取提示并正确连接。（我目前正在寻找 MSYS 的解决方案。）

*不确定是否相关。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-10-08T08:56:04.730

**问题：** 主机密钥验证失败。致命：无法从远程存储库中读取。

请确保您具有正确的访问权限并且存储库存在。

**解决方案：** 我检查了所有设置，还检查了 GitHub 中的关键设置。最后，我将 Git URL 从文件中更改`"git@github.com:palvsv/travelo-moon.git"`为文件中，它可以工作。`"https://github.com/palvsv/travelo-moon.git"``.config``"yourprojectdirectory/.git/config"`

* * *

## 回答 #26

> 赞同：-3
> 
> 时间：2016-01-22T18:28:42.897

我遇到了类似的问题，不幸的是我使用了 GitExtensions HMI 并忘记了我写了一个密码。使用 HMI.... 算了吧！生成密钥时不要输入密码！

* * *

## 回答 #27

> 赞同：-6
> 
> 时间：2018-04-27T01:00:47.413

当我尝试`git clone`一个不属于我的仓库时，我收到了这条消息。解决方法是分叉然后克隆。

# c# - 如何通过给出路径来修复 Report.rdlc 上的图像？

> ID：13363554
> 
> 赞同：0
> 
> 时间：2012-11-13T15:26:36.227
> 
> 标签：c#, report

我不想将图像保存在数据库中。我的应用程序将在不同的商店工作，我想在 report.rdlc 上显示他们的徽标。为此我想知道，我可以仅使用图像路径在report.rdlc 上显示图像吗？我尝试在 ReportData 中为 Report.rdlc 创建参数，但没有任何图像数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:58:25.433

是的你可以：

1.  将图像**源**设置为**外部**
2.  将图像**值**设置为 URL 或文件路径
3.  `EnableExternalImages=true`在您的报告代码中设置

您还可以参考[http://msdn.microsoft.com/en-us/library/ms251715(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms251715(v=vs.80).aspx)了解更多信息，但以上步骤必须足够。

# jquery - 使用 $.parseJSON 解析 JSON 对象返回 null

> ID：13363556
> 
> 赞同：1
> 
> 时间：2012-11-13T15:26:42.420
> 
> 标签：jquery, ajax, ruby-on-rails-3, json, coffeescript

我`$.ajax`在我的 rails 项目中请求 JSON 响应。

```
jQuery ->
  testAjax()

testAjax = ->
  $.ajax
    url: "/gmap/test"
    data: "id=2"
    type: "GET"
    dataType: "json"
    complete: (data_response) ->
      result = $.parseJSON(data_response)
      alert(result.name) 
```

我似乎得到了正确的 json 字符串（根据 Firebug 控制台），如下所示：

```
{"name":"Space Needle","latitude":47.620471,"longitude":-122.349341} 
```

但是，我收到一个错误，抱怨“TypeError：结果为空”

如果我使用

```
alert(data_response.responseText) 
```

在`complete`函数中，我得到了 json 字符串。所以问题似乎是解析。（？？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:02:02.273

完成回调的第一个参数是一个`jqXHR`对象。试试这个：

```
#Scope the result outside of the testAjax function
result = null

testAjax = ->
  $.ajax
    url: "/gmap/test"
    data: "id=2"
    type: "GET"
    dataType: "json"
    success: (data) ->
      #set the data to your result
      result = data
    complete: ->
      alert result.name 
```

随意编辑我的回复，将我的更改转换为有效的咖啡脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:24:59.333

呸！感谢@KevinB，您的评论`success`并`complete`解决了它。很简单，用前者代替后者：

```
jQuery ->
  testAjax()
  #initialize()

testAjax = ->
  $.ajax
    url: "/gmap/test"
    data: "id=2"
    type: "GET"
    contentType: "application/json"
    dataType: "json"
    success: (data) ->
      alert(data.name) 
```

# actionscript-3 - JPEGEncoderOptions 未定义

> ID：13363557
> 
> 赞同：2
> 
> 时间：2012-11-13T15:26:47.803
> 
> 标签：actionscript-3, apache-flex, air, flex4.5

在 AIR 3.5 中运行以下代码时，我收到一个运行时错误，即 JPEGEncoderOptions 是一个未定义的变量：

```
rawBitmapData.encode(rawBitmapData.rect, new JPEGEncoderOptions(), rawByteArray); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:00:02.400

确保您的 sdk 中的以下文件在文件夹 \yoursdk\frameworks\ 中是最新的

air-config.xml flex-config.xml airmobile-config.xml

更新这个：

```
<target-player>11.5</target-player>
<swf-version>18</swf-version> 
```

这可确保您的运行时是最新的 请参阅：[将 Adob​​e Air 3.3 SDK 与 Flash Builder 一起使用](https://stackoverflow.com/questions/10975151/use-adobe-air-3-3-sdk-with-flash-builder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:55:43.503

您可能缺少`flash.display.JPEGEncoderOptions`包的导入，或者您可能完全内联包质量，如下所示。

[Adobe Flash Platform 压缩位图数据](http://help.adobe.com/en_US/as3/dev/WS4768145595f94108-17913eb4136eaab51c7-8000.html)的示例：

```
// Compress a BitmapData object as a JPEG file. 
var bitmapData:BitmapData = new BitmapData(640,480,false,0x00FF00); 
var byteArray:ByteArray = new ByteArray(); 
bitmapData.encode(new Rectangle(0,0,640,480), new flash.display.JPEGEncoderOptions(), byteArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:37:06.313

如果您收到**运行时**错误，则不能是缺少导入。您必须在太旧的 Flash Player 或太旧的 AIR 运行时中运行它。

我已经测试了PNG编码一段时间，并做到了这一点：

```
var bitmapData:BitmapData = yourBitmapDataHere;
if("encode" in bitmapData)
{
    // use the native encode method
    png = bitmapData.encode(bitmapData.rect, new PNGEncoderOptions(false));
}
else
{
    // use old png encoder (from AS3CoreLib)
    png = PNGEncoder.encode(bitmapData);
} 
```

这有效地测试了您的播放器或运行时环境是否支持 BitmapData 的`.encode()`方法。如果该测试失败，则您必须使用太旧的播放器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:37:59.117

您确定在代码顶部包含该类吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-02T17:07:28.453

您需要最新的 Flex SDK 来编译它，因为这些类仅在 Flash Player 11.3 中引入。[Flex SDK 4.6](http://www.adobe.com/devnet/flex/flex-sdk-download.html)对我有用，而 Flex SDK 4.5 及更低版本给了我相同的编译器错误。

如果它是一个运行时错误，那么您是在较低的 AIR 版本或较低的 Flash Player 版本中运行内容。如果您正在运行的 FP 版本中不存在该类，请使用以下方法回退到普通代码。对于 Web 内容很有用。

```
try {

    // use FP 11.3 encoding
    var options:Object = new JPEGEncoderOptions(quality);
    var bytes:ByteArray = new ByteArray();
    bitmap.encode(bitmap.rect, options, bytes);

} catch (e:Error){

    // use manual JPEG encoding
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-07T12:54:49.137

可能是您缺少目标版本的 playerglobal，或者 SDK 的播放器目录中的 playerglobal.swc 不正确。

如果可以，请下载最新的 Apache Flex SDK 并切换到该版本，并尝试在新项目或主应用程序中创建该类的实例。

老实说，我认为这是编译器或 playerglobal 中的错误。当我查看 sdk 文件夹时，我认为 playerglobal.swc 可能不正确（所有版本都命名为 playerglobal.swc）或者可能是因为我在使用的 SDK 中只有一个目录并且它有一个“/11.2/playerglobal.swc”但没有其他文件夹。我想我需要一个名为“/11.5/playerglobal.swc”的目录才能让-swf-version 有所作为。

如果在编译时未找到 swf 版本的 playerglobal 时编译器抛出错误，那就太好了。进入 SDK 文件夹并下载 playerglobals 并将其添加到 SDK 目录，以使最小目标播放器可以使用此类。

在我的 Flex 4.6.0 SDK 播放器目录中，“$Flash Builder/sdks/4.6.0/frameworks/libs/player/”中的 swcs：

*   11.1 日期为 2012 年 10 月 30 日 351kb
*   11.2 日期为 2013 年 1 月 27 日 352kb
*   11.5 日期为 2014 年 11 月 23 日 351kb
*   11.6 日期为 2013 年 1 月 27 日 352kb
*   15.0 日期为 2014 年 11 月 20 日 388kb

在 Apache Flex 4.14RC 中安装是：

*   11.1 日期为 2012 年 10 月 30 日 351kb
*   11.2 日期为 2013 年 1 月 27 日 352kb
*   11.5 日期为 2014 年 11 月 23 日 351kb
*   11.6 日期为 2013 年 1 月 27 日 352kb
*   15.0 日期为 2015 年 1 月 12 日 388kb

沿途某处安装了一些不同步的东西。

# iphone - 如何获得 UIImage 正确的文件大小

> ID：13363563
> 
> 赞同：0
> 
> 时间：2012-11-13T15:27:12.403
> 
> 标签：iphone, objective-c, uiimage, filesize

当我在相机上拍照时，我想获取 UIImage 的文件大小。

```
-(void)imagePickerController:(UIImagePickerController*)imagePicker didFinishPickingMediaWithInfo:(NSDictionary*)info {
     UIImage *originalimage = [info objectForKey:UIImagePickerControllerOriginalImage];
     NSData *dataForPNGFile =  UIImagePNGRepresentation(originalimage);
     int fileLengthPNG = dataForPNGFile.length;
     NSLog(@"-->> fileSizePNG : [%i]", fileLengthPNG);
} 
```

我写了这段代码，但系统控制台返回“fileSizePNG：[10550292]”。
我认为 10550292 字节太大了。

它大约是 10MB，所以我认为我的代码是错误的。

如果你发现任何问题，你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:37:28.073

ID`[dataForPNGFile writeToFile:@"test.png" atomically:YES]`

然后转到实际文件并查看文件的大小。那你就肯定知道了。

# javascript - jQuery/Javascript 将一个文本节点分成两个或三个？

> ID：13363567
> 
> 赞同：3
> 
> 时间：2012-11-13T15:27:21.437
> 
> 标签：javascript, jquery

我有一个 div，比如说 3 行文本。我想将该 div 拆分为两个，假设我有 150 个字符，我想将它拆分，这样我最终会得到两个相等的部分。

所以让我再解释一下：

下面是一个文本节点......它在stackoverflow所见即所得容器中有6行：

```
<p>Brown the roast on all sides in a large lightly oiled skillet over high heat, before 
adding to the slow cooker. While meat is browning. Prepare vegetables by washing and paring 
potatoes, carrots, and parsnips. Cut into pieces, approximately 2 inches (5 cm) in length. 
Place in the bottom, and up the sides, of a slow cooker. Add onions, and place pot roast on 
top. Combine cranberry sauce, orange juice, rind and cinnamon and pour over the meat. Cover 
and cook on low for 8-10 hours. Yield: 6 servings.</p> 
```

假设我想将该 div 拆分为两个 52 像素的 div（根据我的浏览器，它的高度为 104 像素）。但我想这样做，所以这并不意味着措辞，这意味着我不想`Cut`分成两个词，例如，`C`在一个 div 和`ut`另一个 div 中。

所以我最终会得到类似的东西

第 1 部分

```
<p>Brown the roast on all sides in a large lightly oiled skillet over high heat, before 
    adding to the slow cooker. While meat is browning. Prepare vegetables by washing and paring 
    potatoes, carrots, and parsnips. Cut into pieces, approximately 2 inches (5 cm) in length. </p> 
```

第 2 部分

```
<p>Place in the bottom, and up the sides, of a slow cooker. Add onions, and place pot roast on 
    top. Combine cranberry sauce, orange juice, rind and cinnamon and pour over the meat. Cover 
    and cook on low for 8-10 hours. Yield: 6 servings.</p> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:31:13.487

你可以使用

```
var text = $('div').text();
var tokens = text.split(' ');
var n = Math.floor(tokens.length/2);
var html = '<p>'+tokens.slice(0, n).join(' ') + '</p><p>' + tokens.slice(n+1, tokens.length).join(' ') + '</p>';
$('div').html(html); 
```

[示范](http://jsfiddle.net/dystroy/uPtfA/)

请注意，为了获得更好的结果，尤其是关于配方，您还可以在 dot 上拆分：

```
var text = $('#a').text();
var tokens = text.split('.');
var n = Math.floor(tokens.length/2);
var html = '<p>'+tokens.slice(0, n).join('.') + '.</p><p>' + tokens.slice(n+1, tokens.length).join('.') + '</p>';
$('#a').html(html);​ 
```

[演示与点上的分裂](http://jsfiddle.net/dystroy/uPtfA/)

现在，您可能不希望两个段落中的句子数量相同，但字符长度大致相同。然后，您可以执行以下操作：

```
var text = $('#a').text();
var sentences = text.split('.');
var sum = 0;
var lengths = sentences.map(function(v){sum+=v.length; return v.length});
var n = 0;
var ts = 0;
while (ts<sum/2) ts += lengths[n++];
var html = '<p>'+sentences.slice(0, n-1).join('.') + '.</p><p>' + sentences.slice(n, sentences.length).join('.') + '</p>';
$('#a').html(html); 
```

[演示](http://dystroy.org/stackoverflow/paracut.html)（不在 jsfiddle.net 上，因为它们似乎已关闭）

# opencv - 使用 opencv 和 Javacv 计算轮廓中的白色区域像素

> ID：13363574
> 
> 赞同：2
> 
> 时间：2012-11-13T15:27:50.700
> 
> 标签：opencv, javacv, motion-detection

我开发了一个程序来使用 JavaCV 检测运动。到目前为止，我已经完成了处理后图像的 cvFindContours。源代码如下，

```
public class MotionDetect {

public static void main(String args[]) throws Exception, InterruptedException {

    //FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(new File("D:/pool.avi"));
    OpenCVFrameGrabber grabber = new OpenCVFrameGrabber("D:/2.avi");
    final CanvasFrame canvas = new CanvasFrame("My Image");
    final CanvasFrame canvas2 = new CanvasFrame("ROI");
    canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    grabber.start();
    IplImage frame = grabber.grab();
    CvSize imgsize = cvGetSize(frame);
    IplImage grayImage = cvCreateImage(imgsize, IPL_DEPTH_8U, 1);
    IplImage ROIFrame = cvCreateImage(cvSize((265 - 72), (214 - 148)), IPL_DEPTH_8U, 1);
    IplImage colorImage;
    IplImage movingAvg = cvCreateImage(imgsize, IPL_DEPTH_32F, 3);
    IplImage difference = null;
    IplImage temp = null;
    IplImage motionHistory = cvCreateImage(imgsize, IPL_DEPTH_8U, 3);

    CvRect bndRect = cvRect(0, 0, 0, 0);
    CvPoint pt1 = new CvPoint(), pt2 = new CvPoint();
    CvFont font = null;

    //Capture the movie frame by frame.
    int prevX = 0;
    int numPeople = 0;
    char[] wow = new char[65];

    int avgX = 0;

    //Indicates whether this is the first time in the loop of frames.
    boolean first = true;

    //Indicates the contour which was closest to the left boundary before the object
    //entered the region between the buildings.
    int closestToLeft = 0;
    //Same as above, but for the right.
    int closestToRight = 320;

    while (true) {
        colorImage = grabber.grab();
        if (colorImage != null) {
            if (first) {
                difference = cvCloneImage(colorImage);
                temp = cvCloneImage(colorImage);
                cvConvertScale(colorImage, movingAvg, 1.0, 0.0);
                first = false;
                //cvShowImage("My Window1", difference);
            } //else, make a running average of the motion.
            else {
                cvRunningAvg(colorImage, movingAvg, 0.020, null);
            }

            //Convert the scale of the moving average.
            cvConvertScale(movingAvg, temp, 1.0, 0.0);

            //Minus the current frame from the moving average.
            cvAbsDiff(colorImage, temp, difference);

            //Convert the image to grayscale.
            cvCvtColor(difference, grayImage, CV_RGB2GRAY);
            //canvas.showImage(grayImage);
            //Convert the image to black and white.
            cvThreshold(grayImage, grayImage, 70, 255, CV_THRESH_BINARY);

            //Dilate and erode to get people blobs
            cvDilate(grayImage, grayImage, null, 18);
            cvErode(grayImage, grayImage, null, 10);
            canvas.showImage(grayImage);

            ROIFrame = cvCloneImage(grayImage);
            cvSetImageROI(ROIFrame, cvRect(72, 148, (265 - 72), (214 - 148)));
            //cvOr(outFrame, tempFrame, outFrame);
            cvShowImage("ROI Frame", ROIFrame);

            cvRectangle(colorImage, /* the dest image */
                    cvPoint(72, 148), /* top left point */
                    cvPoint(265, 214), /* bottom right point */
                    cvScalar(255, 0, 0, 0), /* the color; blue */
                    1, 8, 0);

            CvMemStorage storage = cvCreateMemStorage(0);
            CvSeq contour = new CvSeq(null);
            cvFindContours(grayImage, storage, contour, Loader.sizeof(CvContour.class),  CV_RETR_CCOMP,  CV_CHAIN_APPROX_SIMPLE);

        }

            //Show the frame.
            cvShowImage("My Window", colorImage);

            //Wait for the user to see it.
            cvWaitKey(10);

        }

        //If this is the first time, initialize the images.

        //Thread.sleep(50);
    }

   }
} 
```

在这段代码 ROIFrame 中，我需要计算白色轮廓区域或像素数？？.. 有什么方法可以继续

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:45:09.770

[在此处](http://opencv.willowgarage.com/documentation/c/structural_analysis_and_shape_descriptors.html#contourarea)使用功能`cvContourArea()`文档。

在您的代码中，在您的 cvFindContours 之后，使用所有轮廓进行循环，例如：

```
CvSeq* curr_contour = contour;

while (curr_contour != NULL) {
   area = fabs(cvContourArea(curr_contour,CV_WHOLE_SEQ, 0));
   current_contour = current_contour->h_next;
} 
```

不要忘记将该区域存储在某个地方。

# ios - 获取：*** 断言失败 -[UIStoryboardPushSegue 执行]

> ID：13363577
> 
> 赞同：1
> 
> 时间：2012-11-13T15:27:57.520
> 
> 标签：ios, storyboard, segue, assertion

我正在将 Storyboard 用于主/详细 iPad 应用程序。MenutabViewController 是一个 UITabBarViewController。应用程序的另一个场景从同一个 Controller 开始，做类似的 PUSH segues（push->master，push-detail）就可以了。但是这个给了我这个信息。这条消息再也不会给其他人了，因为我用谷歌搜索了很多：p。

您可以在这里看到故事板的图像（不允许发布） [http://qupload.com/images/stackoverq.png](http://qupload.com/images/stackoverq.png)

```
2012-11-13 17:13:47.244[9777:13d03] prepareForSegue: settingsStoreSegue
2012-11-13 17:13:47.244[9777:13d03] *** Assertion failure in -[UIStoryboardPushSegue perform], /SourceCache/UIKit_Sim/UIKit-2372/UIStoryboardBuiltInSegues.m:24
2012-11-13 17:13:52.323 IpposFfs[9777:13d03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', **reason: 'Expected a navigation controller, but got an instance of 'MenuTabViewController' instead, while performing a split view controller push segue (identifier 'settingsStoreSegue') for index #0'**
*** First throw call stack:
(0x1cd6012 0x1606e7e 0x1cd5e78 0x109cf35 0x9a3ca2 0x995ad9 0x630422 0x7326b 0x5fd8d5 0x5fdb3d 0x1004e83 0x1c95376 0x1c94e06 0x1c7ca82 0x1c7bf44 0x1c7be1b 0x1c307e3 0x1c30668 0x54e65c 0x2cbd 0x2be5)
libc++abi.dylib: terminate called throwing an exception 
```

# delphi - 以编程方式创建报表时，如何缩放它以使所有数据都适合？

> ID：13363578
> 
> 赞同：1
> 
> 时间：2012-11-13T15:27:57.317
> 
> 标签：delphi, pdf, scale

**应用程序描述：** 我有一个允许用户将报告输出到文档的应用程序。写入文档的数据采用表格的形式。表格中的列数和表格中每个单元格中包含的字符串的宽度在运行之前是未知的（这取决于用户运行的查询、他们希望在报告中看到的内容等）。

我正在使用 Delphi XE 和 Gnostice 的 eDocEngine 创建一个 PDF 文档，然后在文档中创建一个表格并将报告数据写入其中。

**问题：** 我遇到的问题是，在它们从文档右侧消失之前，您只能在文档中写入一定数量的列（6 或 7）。用户在表中生成包含 30 或 40 列的报告并不陌生（因为它们对应于数据库中的字段，他们对其运行查询），因此我需要能够使表适合完全放入文档中，无论它包含多少列。

由于 PDF 可以缩放，我想我可以缩小字体大小和列宽并以这种方式适合所有内容，因为用户可以使用他们的 PDF 阅读器放大和滚动表格。我需要知道的是：

1.  有没有更好的方法让整个表格适合页面？
2.  如果缩小/缩放是最好/唯一的方法，那么确保所有内容都适合而不会使文档看起来很奇怪的最有效方法是什么（即理想情况下，表格应该在页面上伸展，而不是堆积在左边手边，因为一些随机缩放算法）。

**编辑** 我刚刚做了一些更多的挖掘，我发现“inputXRes”和“inputYRes”属性会改变文档中画布的比例，这看起来很有希望，但我无法让它在片刻。任何人都可以阐明如何使用这些属性吗？文本本身是缩放的，但表格的大小保持不变，这意味着我现在在一个巨大的表格单元格中间有一小段文本，表格仍然只显示报告中的 7 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:40:02.060

不要乱用缩放和字体大小。

您的客户将使用 PDF 阅读器，并且有一些选项可以帮助阅读信息，例如 1:1。但是当您更改缩放或字体大小时，您无法读取信息，因为它太小了。

获得最适合客户需求的字体大小，并扩展页面大小以适应表格大小。

使用 PDF Reader，您的客户可以选择查看和打印（缩小以适合）他们喜欢的内容以及他们的打印可以处理的纸张尺寸。

顺便说一句：如果您更改分辨率并在画布上绘制一条长度为 2 英寸的线，它将是 2 英寸长，但字体大小为 12（像素）的文本会增大或缩小。

# asp.net-mvc-3 - MVC3 多区域不同的认证方法

> ID：13363581
> 
> 赞同：2
> 
> 时间：2012-11-13T15:28:11.823
> 
> 标签：asp.net-mvc-3, iis-7.5, windows-authentication

我的 Web 应用程序具有以下结构：

![在此处输入图像描述](../Images/750f3a4804c0c9cc0142710403ce674a.png)

在我的根网络配置中，而不是在 Areas/Admin/Web.Config 中，我有以下内容：

```
 <location path="Areas/Admin">
    <system.web>
      <authentication mode="Windows"></authentication>
      <authorization>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

我有自己的身份验证在网站的主根上工作，使用`[Authorize]`标签没有问题。

现在对于区域/管理员，我想使用 Windows 身份验证。

在 IIS（Server 2008 R2 机器）中，我将 Admin 文件夹配置为应用程序：

![在此处输入图像描述](../Images/6e3e3a217d9eb06eeaf85e1006568e14.png)

当我单击 IIS 中的区域/管理员时，在身份验证下，我禁用了匿名，并启用了 Windows 身份验证。

但是，当我尝试通过网站访问此文件夹时，它不会提示我输入我的域用户名/密码。它只是加载页面。

如果我访问 www.website.com/Areas/Admin，它会提示我输入用户名/密码。但我需要它来使用 AreaRegistration，并在我访问 www.website.com/Admin 时提示它。

我已经能够将整个站点配置为 Windows 身份验证，这就像一个魅力。

有什么想法可以引导我朝着正确的方向前进吗？或者，如果您需要更多信息，请给我留言，我将非常乐意为您提供我所能提供的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:16:56.083

通过研究，我发现完成这项工作的唯一方法是创建第二个“管理”站点，该站点作为主站点下的应用程序运行。这样做，允许我在该站点上设置权限。

# android - Android相机滤镜在tegra gpus上很慢，但在其他人上很快

> ID：13363586
> 
> 赞同：1
> 
> 时间：2012-11-13T15:28:30.950
> 
> 标签：android, filter, camera, tegra

我正在开发一个应用程序，对 GPU 上的相机预览流进行实时过滤（OpengGL ES 2.0）。它类似于著名的应用程序“纸相机”（付费）和“卡通相机”（免费）。

它在我的 Galaxy s2 上运行良好且速度非常快，在 s3 上甚至更快，在旧的三星设备上也可以。我还在 Sony Xperia Arc S 和 htc 的欲望上以及我不记得的其他几台设备上对其进行了测试，在这些设备上它的速度不如我的 s2 但至少高于 10 fps。

现在问题来了：昨天我能够在 HTC One X+ 和 Galaxy Tab 10.1（分别为 tegra 3 和 tegra 2）上测试它。在 x+ 上，它以大约 5 fps 的速度运行，在平板电脑上以大约 2 fps 的速度运行。

我还在 x+ 上尝试了前面提到的类似应用程序（纸质相机和卡通相机），与我的 Galaxy s2 相比，它们的运行速度也慢得多，尽管由于硬件更好，它们应该运行得更快。

tegra GPU 是否存在与纹理上传速度有关的已知问题（我必须为每个视频帧创建一个纹理）或其他可以大大降低速度的问题？

PS：降低相机预览分辨率可以让它稍微快一些，但它仍然慢得令人讨厌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:33:59.060

可能问题出在片段着色器本身上，我在不同 GPU 上使用着色器进行了很多工作，而且我一直发现并不是更快的 GPU 意味着对着色器的更快解释。您是否在片段着色器中使用了大量分支（“if”条件），或者调用着色器中的其他函数？如果是这样，那么您应该尽量避免分支，还将代码的函数内联为一个，并测试可能在当前 gpu 驱动程序实现上存在错误的 GLSL 内置函数，然后编写自己的替换。

# jboss - 注册应用程序服务器时，mod_cluster https 重定向不起作用

> ID：13363588
> 
> 赞同：1
> 
> 时间：2012-11-13T15:28:40.480
> 
> 标签：jboss, load-balancing, apache, httpd.conf

我使用 mod_cluster 1.2 作为负载平衡器，使用 JBoss AS7 作为节点。我在 JBoss 中配置了 AJP 连接器，并且 mod_cluster 与 JBoss 节点连接。

我想实现以下，Client <--HTTPS--> Balancer <--AJP--> JBoss

这是我的 mod_cluster 配置，

```
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule env_module modules/mod_env.so
LoadModule include_module modules/mod_include.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule ssl_module modules/mod_ssl.so

LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_cluster_module modules/mod_proxy_cluster.so
LoadModule manager_module modules/mod_manager.so
LoadModule slotmem_module modules/mod_slotmem.so
LoadModule advertise_module modules/mod_advertise.so

LogLevel debug

ServerName localhost

<IfModule manager_module>
  Listen 127.0.0.1:6666
  ManagerBalancerName mycluster
  <VirtualHost 127.0.0.1:6666>

    <Location />
     Order deny,allow
     Allow from all
    </Location>

     <Location /mcm>
       SetHandler mod_cluster-manager
       Order deny,allow
       Deny from all
       Allow from 127.0.0
    </Location>

    KeepAliveTimeout 300
    MaxKeepAliveRequests 0
    AdvertiseFrequency 5
    EnableMCPMReceive

  </VirtualHost>
</IfModule>

Listen 80
<VirtualHost *:80>
 RewriteEngine on
 RewriteCond %{SERVER_PORT} 80
 RewriteRule ^(.*) https://%{SERVER_NAME}%{REQUEST_URI}  [R,L]
</VirtualHost>

  Listen 443
  <VirtualHost *:443>
    <Location />
     Order deny,allow
     Allow from all
    </Location>

    SSLEngine  On
    SSLCACertificateFile  C:/work/certs/gs/root.pem
    SSLCertificateChainFile  C:/work/certs/gs/inter.pem
    SSLCertificateFile  C:/work/certs/gs/kc.pem
    SSLCertificateKeyFile  C:/work/certs/gs/key.key

  </VirtualHost> 
```

当 JBoss 未向 mod_cluster 注册时，我尝试`http://localhost`将其重定向到`https://localhost`. 但是当注册 JBoss 节点时，HTTPS 重定向不起作用。它仅以 HTTP 模式打开页面。请帮我解决这个问题。

***编辑：***

根据 karm 的建议，我已经配置了 Worker<--HTTPS-->Balancer 配置。但还是一样的效果。当 Jboss 用 m_c 注册时，重定向不起作用。

这是我的 m_c 配置，

```
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule env_module modules/mod_env.so
LoadModule include_module modules/mod_include.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule ssl_module modules/mod_ssl.so

LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_cluster_module modules/mod_proxy_cluster.so
LoadModule manager_module modules/mod_manager.so
LoadModule slotmem_module modules/mod_slotmem.so
LoadModule advertise_module modules/mod_advertise.so

ErrorLog "logs/error_log"
LogLevel debug

ServerName localhost

Listen 8800
<VirtualHost 127.0.0.1:8800>
 RewriteEngine on
 RewriteCond  %{SERVER_PORT} !^8888$
 RewriteRule ^(.*) https://%{SERVER_NAME}:8888%{REQUEST_URI}
</VirtualHost>

<IfModule manager_module>
  Listen 8888
  ManagerBalancerName qacluster
  <VirtualHost 127.0.0.1:8888>
    <Directory />
      Order deny,allow
      Deny from all
      Allow from all
    </Directory>

    KeepAliveTimeout 300
    MaxKeepAliveRequests 0
    AdvertiseFrequency 5
    EnableMCPMReceive

    #ServerAdvertise on
    #AdvertiseGroup 224.0.1.105:6666

    <Location /mcm>
      SetHandler mod_cluster-manager
      Order deny,allow
      Deny from all
      Allow from all
   </Location>

    SSLEngine  On
    SSLCACertificateFile  C:/work/certs/gs/gs_root.pem
    SSLCertificateChainFile  C:/work/certs/gs/gs_inter.pem
    SSLCertificateFile  C:/work/certs/gs/kc.pem
    SSLCertificateKeyFile  C:/work/certs/gs/kc.key

  </VirtualHost>
</IfModule> 
```

JBoss 配置，

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.0">
        <mod-cluster-config proxy-list="127.0.0.1:8888" advertise="false" excluded-contexts="admin-console,invoker,jbossws,jmx-console,juddi,web-console">
            <ssl key-alias="1" password="changeit" certificate-key-file="C:\Users\jai\.keystore" ca-certificate-file="C:\work\certs\gs\ca.jks"/>
        </mod-cluster-config>
    </subsystem> 
```

在使用 m_c 注册 JBoss 后，链接`http://localhost:8800/mcm`本身不起作用。

这是来自 m_c 的调试日志，

```
[Tue Nov 20 11:43:13 2012] [info] Init: Seeding PRNG with 0 bytes of entropy
[Tue Nov 20 11:43:13 2012] [info] Loading certificate & private key of SSL-aware server
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_pphrase.c(470): unencrypted RSA private key - pass phrase not required
[Tue Nov 20 11:43:13 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Nov 20 11:43:13 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Nov 20 11:43:13 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Nov 20 11:43:13 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Nov 20 11:43:13 2012] [info] Configuring server for SSL protocol
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(465): Creating new SSL context (protocols: SSLv2, SSLv3, TLSv1)
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(601): Configuring client authentication
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(748): Configuring server certificate chain (1 CA certificate)
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(420): Configuring TLS extension handling
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(795): Configuring RSA server certificate
[Tue Nov 20 11:43:13 2012] [debug] ssl_engine_init.c(834): Configuring RSA server private key
[Tue Nov 20 11:43:13 2012] [info] mod_ssl/2.2.21 compiled against Server: Apache/2.2.21, Library: OpenSSL/0.9.8r
[Tue Nov 20 11:43:13 2012] [info] Init: Seeding PRNG with 0 bytes of entropy
[Tue Nov 20 11:43:14 2012] [info] Loading certificate & private key of SSL-aware server
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_pphrase.c(470): unencrypted RSA private key - pass phrase not required
[Tue Nov 20 11:43:14 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Nov 20 11:43:14 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Nov 20 11:43:14 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Nov 20 11:43:14 2012] [info] Configuring server for SSL protocol
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(465): Creating new SSL context (protocols: SSLv2, SSLv3, TLSv1)
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(601): Configuring client authentication
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(748): Configuring server certificate chain (1 CA certificate)
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(420): Configuring TLS extension handling
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(795): Configuring RSA server certificate
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(834): Configuring RSA server private key
[Tue Nov 20 11:43:14 2012] [info] mod_ssl/2.2.21 compiled against Server: Apache/2.2.21, Library: OpenSSL/0.9.8r
[Tue Nov 20 11:43:14 2012] [notice] Advertise initialized for process 6148
[Tue Nov 20 11:43:14 2012] [notice] Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0g mod_cluster/1.2.0.Final configured -- resuming normal operations
[Tue Nov 20 11:43:14 2012] [notice] Server built: Feb  9 2012 22:24:33
[Tue Nov 20 11:43:14 2012] [notice] Parent: Created child process 5660
[Tue Nov 20 11:43:14 2012] [debug] mpm_winnt.c(477): Parent: Sent the scoreboard to the child
[Tue Nov 20 11:43:14 2012] [info] Init: Seeding PRNG with 0 bytes of entropy
[Tue Nov 20 11:43:14 2012] [info] Loading certificate & private key of SSL-aware server
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_pphrase.c(470): unencrypted RSA private key - pass phrase not required
[Tue Nov 20 11:43:14 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Nov 20 11:43:14 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Nov 20 11:43:14 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Nov 20 11:43:14 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Nov 20 11:43:14 2012] [info] Configuring server for SSL protocol
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(465): Creating new SSL context (protocols: SSLv2, SSLv3, TLSv1)
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(601): Configuring client authentication
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(748): Configuring server certificate chain (1 CA certificate)
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(420): Configuring TLS extension handling
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(795): Configuring RSA server certificate
[Tue Nov 20 11:43:14 2012] [debug] ssl_engine_init.c(834): Configuring RSA server private key
[Tue Nov 20 11:43:14 2012] [info] mod_ssl/2.2.21 compiled against Server: Apache/2.2.21, Library: OpenSSL/0.9.8r
[Tue Nov 20 11:43:15 2012] [info] Init: Seeding PRNG with 0 bytes of entropy
[Tue Nov 20 11:43:15 2012] [info] Loading certificate & private key of SSL-aware server
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_pphrase.c(470): unencrypted RSA private key - pass phrase not required
[Tue Nov 20 11:43:15 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Nov 20 11:43:15 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Nov 20 11:43:15 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Nov 20 11:43:15 2012] [info] Configuring server for SSL protocol
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(465): Creating new SSL context (protocols: SSLv2, SSLv3, TLSv1)
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(601): Configuring client authentication
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(748): Configuring server certificate chain (1 CA certificate)
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(420): Configuring TLS extension handling
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(795): Configuring RSA server certificate
[Tue Nov 20 11:43:15 2012] [debug] ssl_engine_init.c(834): Configuring RSA server private key
[Tue Nov 20 11:43:15 2012] [info] mod_ssl/2.2.21 compiled against Server: Apache/2.2.21, Library: OpenSSL/0.9.8r
[Tue Nov 20 11:43:15 2012] [debug] mod_advertise.c(577): [5660 - 6148] in child post config hook
[Tue Nov 20 11:43:15 2012] [notice] Child 5660: Child process is running
[Tue Nov 20 11:43:15 2012] [debug] mpm_winnt.c(398): Child 5660: Retrieved our scoreboard from the parent.
[Tue Nov 20 11:43:15 2012] [info] Parent: Duplicating socket 128 and sending it to child process 5660
[Tue Nov 20 11:43:15 2012] [info] Parent: Duplicating socket 124 and sending it to child process 5660
[Tue Nov 20 11:43:15 2012] [debug] mpm_winnt.c(595): Parent: Sent 2 listeners to child 5660
[Tue Nov 20 11:43:15 2012] [debug] mpm_winnt.c(554): Child 5660: retrieved 2 listeners from parent
[Tue Nov 20 11:43:15 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 5660 for worker proxy:reverse
[Tue Nov 20 11:43:15 2012] [debug] proxy_util.c(1914): proxy: initialized worker 0 in child 5660 for (*) min=0 max=64 smax=64
[Tue Nov 20 11:43:15 2012] [notice] Child 5660: Acquired the start mutex.
[Tue Nov 20 11:43:15 2012] [notice] Child 5660: Starting 64 worker threads.
[Tue Nov 20 11:43:15 2012] [notice] Child 5660: Starting thread to listen on port 8888.
[Tue Nov 20 11:43:15 2012] [notice] Child 5660: Starting thread to listen on port 8800.
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(678): update_workers_node starting
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(693): update_workers_node done
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(678): update_workers_node starting
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(693): update_workers_node done
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(678): update_workers_node starting
[Tue Nov 20 11:43:16 2012] [debug] mod_proxy_cluster.c(693): update_workers_node done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:48:49.607

问题出在 mod_cluster 1.2.0 上。我采用了最新的 mod_cluster 代码并编译和使用。HTTPS 重定向就像魅力一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:38:01.743

伙计，这都是一个非常奇怪的配置...... SSLProxyVerify 要求？Mod_cluster 实际上是 MITM 攻击 :-) 此外，Mod_cluster 本身的 SSL 必须打开。看一看：

1）工作节点可以向平衡器注册。

2）连接是安全的：client<--SSL-->balancer<--SSL-->workers，但是，worker必须信任平衡器......

3）访问例如

```
http://localhost:8800/mcm 
```

被重定向到受保护的

```
https://localhost:8888/mcm 
```

我想这就是你想要的？

**HTTPD**

```
# mod_proxy_balancer should be disabled when mod_cluster is used
LoadModule proxy_cluster_module modules/mod_proxy_cluster.so
LoadModule slotmem_module modules/mod_slotmem.so
LoadModule manager_module modules/mod_manager.so
LoadModule advertise_module modules/mod_advertise.so

MemManagerFile /home/karm/httpd/logs

Listen 8800
<VirtualHost localhost:8800>
 RewriteEngine on
 RewriteCond  %{SERVER_PORT} !^8888$
 RewriteRule ^(.*) https://%{SERVER_NAME}:8888%{REQUEST_URI}
</VirtualHost>

<IfModule manager_module>
  Listen 8888
  ManagerBalancerName qacluster
  <VirtualHost localhost:8888>
    <Directory />
      Order deny,allow
      Deny from all
      Allow from all
    </Directory>

    ServerAdvertise on
    EnableMCPMReceive
    AdvertiseGroup 224.0.1.105:6666

    <Location /mcm>
      SetHandler mod_cluster-manager
      Order deny,allow
      Deny from all
      Allow from all
   </Location>

   SSLEngine on
   SSLCipherSuite AES128-SHA:ALL:!ADH:!LOW:!MD5:!SSLV2:!NULL
   SSLVerifyDepth 10
   SSLProxyEngine On
   SSLCertificateKeyFile /home/karm/Server/server.key
   SSLCertificateFile /home/karm/Server/server.crt
   SSLCACertificateFile /home/karm/Server/myca.crt
   LogLevel debug

  </VirtualHost>
</IfModule> 
```

**AS7：**

```
+++
<subsystem xmlns="urn:jboss:domain:web:1.2" default-virtual-server="default-host" native="false">
    <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
        <ssl name="https" key-alias="javaclient" password="tomcat" certificate-key-file="/home/karm/Client/client-cert-key.jks" cipher-suite="AES128-SHA:ALL:!ADH:!LOW:!MD5:!SSLV2:!NULL" protocol="TLS" verify-client="false" certificate-file="/home/karm/Client/client-cert-key.jks" ca-certificate-file="/home/karm/Client/ca-cert.jks"/>
    </connector>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem>
+++
<subsystem xmlns="urn:jboss:domain:modcluster:1.1">
    <mod-cluster-config advertise-socket="modcluster" advertise="true" sticky-session="true" sticky-session-remove="false" sticky-session-force="false" connector="https">
        <dynamic-load-provider history="10" decay="2">
            <load-metric type="busyness"/>
        </dynamic-load-provider>
        <ssl key-alias="javaclient" password="tomcat" certificate-key-file="/home/karm/Client/client-cert-key.jks" cipher-suite="AES128-SHA:ALL:!ADH:!LOW:!MD5:!SSLV2:!NULL" ca-certificate-file="/home/karm/Client/ca-cert.jks"/>
    </mod-cluster-config>
</subsystem>
+++ 
```

高温高压

干杯

**编辑：** 请注意此错误：[https](https://issues.jboss.org/browse/JBPAPP-9493) ://issues.jboss.org/browse/JBPAPP-9493 ，如果您只有 https 连接器，可能会发生。如果一段时间不活动，客户端会在一段时间后收到几个 502 错误。可行的解决方法是将：更改`Client<--SSL-->Balancer<--SSL-->Workers` 为 `Client<--SSL-->Balancer--AJP-->Worker`, `Worker--SSL-->Balancer`。

就像在 AS7 中添加 AJP 连接器一样简单，例如： `<connector name="ajp" protocol="AJP/1.3" scheme="ajp" socket-binding="ajp"/>`

并为 modcluster 子系统设置：

`<mod-cluster-config advertise-socket="modcluster" advertise="true" sticky-session="true" sticky-session-remove="false" sticky-session-force="false" connector="ajp">`

# python - 在python中制作一个类列表

> ID：13363589
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:28:47.253
> 
> 标签：python, list, class

我已经开始自学 python，虽然我知道 C# 和 Java，但 python 语言现在对我来说有点陌生。我想做一个小的电话簿程序。

我想制作一个名为电话簿的列表，其中列表中的每个成员都来自一个名为 entery 的类，在每个 entery 中有几个字符串和一个电话号码字符串列表。例如：

```
class entery:
    def addEntery (str1,str2,list):
        tmp = entery()
        tmp.str1 = str1
        tmp.str2 = str2
        tmp.list = list

def main():
    phonebook = []
    phonebook.append(addEntery('ian1','ian2',list) 
```

我需要帮助来缩小我从 C# 到 python 的差距，并为简单的任务创建一个类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:32:30.503

您没有定义正确的构造函数。它应该是：

```
class Entery(object):
  def __init__(self, str1, str2, str3):
    self.str1 = str1
    self.str2 = str2
    self.str3 = str3 
```

由于 Python 没有“私有”数据，您可以直接从“外部”访问这些字段：

```
>>> test = Entery("a", "b", "c")
>>> print test.str1
a 
```

然后，您可以通过调用构造函数来构建*实例*来构建列表：

```
phonebook.append(Entery("one", "two", "three"))
phonebook.append(Entery("four", "five", "six")) 
```

这很重要：`phonebook`是实例列表，即对象列表，而不是“类列表”。当然也可以将课程放在列表中，但这不是您所追求的。

您可能应该更多地关注阅读一些基本的 Python 类教程。此外，在命名类时您正在寻找的词可能是`Entry`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:53:21.307

您的 append 方法缺少一个右括号，这将是错误的根源。此外，python 中属于类的所有函数都需要在函数签名中引用 self ，您也可以将类缩小为一个简单的构造函数。

```
class Entery:
    def __init__(self, str1, str2, str3):
        self.str1 = str1
        self.str2 = str2
        self.str3 = str3

phonebook = []
phonebook.append(Entery('ian1','ian2',list))
print phonebook[0].str1 
```

# mfc - CDC 对象和颜色交集

> ID：13363591
> 
> 赞同：1
> 
> 时间：2012-11-13T15:28:57.483
> 
> 标签：mfc, drawing

我正在尝试绘制一个蓝色矩形和一个黄色矩形的交点

```
 ,-------------------,
 |                   |
 |     Blue          |
 |           ,-------+---------,
 |           | Green |         |
 '-----------+-------, Yellow  |
             |_________________| 
```

使用方法 CDC::Polygon 和 CDC::SetBkMode(TRANSPARENT)

但我得到的是：

```
 ,-------------------,
 |                   |
 |     Blue          |
 |           ,-------+---------,
 |           |                 |
 '-----------+      Yellow     |
             |_________________| 
```

请给我一个坚持使用 MFC 的简单解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:37:50.693

无论 SetBkMode 是 TRANSPARENT 还是 OPAQUE，您都不能这样做，因为 Polygon 使用当前选定的笔刷来填充多边形的内部。相反，您应该做的是：

首先绘制一个矩形，然后绘制另一个矩形，然后使用 CRect::IntersectRect 计算两个矩形的交集（参见[http://msdn.microsoft.com/en-us/library/262w7389(v=vs.100) .aspx](http://msdn.microsoft.com/en-us/library/262w7389(v=vs.100).aspx)）。

如果相交不是空的，则计算生成的“颜色混合”并创建适当的画笔，并使用它绘制第三个矩形。

有关如何混合颜色的更多信息，请在 StackOverflow 上[查看 RGB 值的加色混合算法。](https://stackoverflow.com/questions/726549/algorithm-for-additive-color-mixing-for-rgb-values)

# python - 如何使用 Biopython 解析 PQR 文件

> ID：13363597
> 
> 赞同：1
> 
> 时间：2012-11-13T15:29:10.403
> 
> 标签：python, parsing, biopython, protein-database

我想让[Biopython](http://biopython.org/wiki/Main_Page "生物蟒")能够读取[PQR](http://www.poissonboltzmann.org/file-formats/biomolecular-structurw/pqr "PQR 文件格式")文件（修改后的[PDB](http://www.wwpdb.org/documentation/format33/sect9.html#ATOM "PDB 文件格式")文件，占用率和 B 因子被原子电荷和半径替换）。

Biopython PDB 解析器无法读取 Bfactor，因为它通过 PDB 列索引（PQR 格式不支持）检索值。

**标准 PDB 原子记录的示例：**

```
ATOM      1  N   LEU     1       3.469  24.678   1.940  1.00 48.46           N 
```

1.00 是占用率，48.46 是 bfactor

**和 PQR ：**

```
ATOM      1  N   LEU     1       3.469  24.678   1.940  0.1010 1.8240 
```

0.1010 是电荷，1.8240 是半径

那么，如何避免`"PDBConstructionException: Invalid or missing B factor"`并正确解析电荷/半径值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:13:35.157

由于 PQR 格式不再是标准 PDB 格式，您需要修改 Biopython PDB 解析器的源代码以满足您的需要。值得庆幸的是，Biopython 是开源的，并且`PDB.PDBParser`非常易读/易于修改。

### 提取数据

根据您提供的[PQR 描述](http://www.poissonboltzmann.org/file-formats/biomolecular-structurw/pqr)：

> “由于使用了空格而不是特定的列宽和对齐方式，这种格式可能与 PDB 大相径庭。”

Biopython 的 PDB Parser 要求严格按照列宽来计算值。（对于 PDB 文件来说，值之间没有空格是完全有效的。）我认为你最好的选择是修改行数据的提取方式`PDB.PDBParser`，但保留大部分其他错误检查和`Structure`创建。由于字段将以空格分隔，因此您可以简单地使用`line.split()`创建参数列表，然后为这些参数指定有意义的名称。

从给定行解析数据后，您可能希望将其作为字段存储在 Atom 对象中）。原子被[添加到结构中`structure_builder`](https://github.com/biopython/biopython/blob/master/Bio/PDB/PDBParser.py#L224)。也许您可以修改`init_atom()`以将电荷和半径作为字段添加到`PDB.Atom`对象。

### 从哪儿开始

这是您要修改[的源代码中的大致位置。](https://github.com/biopython/biopython/blob/master/Bio/PDB/PDBParser.py#L195)

### 大纲

所以，从头到尾，这就是我要做的：

1.  创建一个新`StructureBuilder`方法`init_pqr_atom()`（以 为模型`init_atom()`）创建一个新的 Atom 对象，`charge`在`radius`新的`Atom`. （也许您想创建一个`PDB.PQRAtom`继承的对象`PDB.Atom`？）。
2.  [`init()`在方法](https://github.com/biopython/biopython/blob/master/Bio/PDB/PDBParser.py#L32)中创建一个可选参数`PDBParser`，告诉解析器它是一个 PQR 文件（不是标准 PDB）：

    ```
    def __init__(self, PERMISSIVE=True, get_header=False,
             structure_builder=None, QUIET=False, is_pqr=False): 
    ```

3.  传递`is_pqr`给`_parse()`，它传递给`_parse_coordinates`。
4.  在 内`_parse_coordinates`，如果不是 PQR 文件（即使用默认的 PDB 列规范），则按正常方式解析数据。如果是 PQR，则基于空格分隔的格式解析数据（同样，Python`str.split()`将从字符串中返回以空格分隔的项目列表）。
5.  在结构中构建适当的`Atom`或`PQRAtom`对象，传入解析的值。

# javascript - 将循环参数传递给闭包内的闭包

> ID：13363599
> 
> 赞同：2
> 
> 时间：2012-11-13T15:29:22.430
> 
> 标签：javascript, loops, closures, parameter-passing

我试图将 for 循环参数 i 提供给内部闭包，因为我想识别我的解码音频（放在缓冲区内）。

此代码给出错误：e 未定义。但是，它在删除 )(test) 时起作用，我的意思是对于所有结果， test 等于 list.length 但是我希望它们在调用时具有当前参数 i 的值。

```
for (var i = 0; i < list.length; i++) { //load in every url
    requestArray.push(new XMLHttpRequest());
    requestArray[i].open('GET', list[i].url, true);
    requestArray[i].responseType = 'arraybuffer';
    test = i;
    requestArray[i].onload = (function (e) {
        //Async method: ASK J
        context.decodeAudioData(e.target.response, (function (buffer) { //Async method
            console.log(test);
            if (!buffer) {
                alert('error decoding file data: ');
                return;
            }
        })(test),

        function (e) {
            console.log('Error decoding audio file', e)
        });
    })(test);

    requestArray[i].onerror = function () {
        alert('BufferLoader: XHR error');
    }

    requestArray[i].send();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:41:59.003

```
for (var i=0; i<list.length; i++){
    requestArray.push(new XMLHttpRequest());
    requestArray[i].open('GET', list[i].url, true);
    requestArray[i].responseType = 'arraybuffer';
    requestArray[i].onload = (function (i) {
        return function (resp) {
            // i: index in requestArray
            // resp: the response object passed when the onload event occurs

            context.decodeAudioData(
                resp.target.response,
                (function(test) {
                    return function (buffer) {
                        console.log(test);
                        if (!buffer) {
                            alert('error decoding file data: ');
                            return;
                        }
                    }
                }(i)),
                function(e) { console.log('Error decoding audio file', e)}
            );
        }
    }(i));
    requestArray[i].onerror = function() {
        alert('BufferLoader: XHR error');
    }
    requestArray[i].send();
} 
```

**请注意，要创建闭包，函数必须返回一个函数。**

这是一个闭包：

```
(function(){
    var a = "b";
    return function(){ alert(b); }
}()); 
```

看到后立即对其进行评估：

```
(function(){
    var a = "b";
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:41:03.930

你的代码没有做你想做的事。您无需将绑定`test`作为参数，而是立即使用参数调用匿名函数`test`并将其返回的结果作为参数传递给`decodeAudioData`. 我建议先解决这个问题。例如通过使用[Function.prototype.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:51:28.133

我想我会尝试这样的语法（我也会采取更模块化的方法，有几个声明的函数）

```
for (var i=0; i<list.length; i++){ //load in every url
        requestArray.push(new XMLHttpRequest());
        requestArray[i].open('GET', list[i].url, true);
        requestArray[i].responseType = 'arraybuffer';
        test = i;
        requestArray[i].onload = (function(outerIndex){
                        return function (e) { //Async method: ASK J
                context.decodeAudioData(e.target.response, 
                    (function(index){
                        return function(buffer) {  //Async method
                            console.log(index);
                            if (!buffer) {
                                alert('error decoding file data: ');
                                return;
                            }
                        };  
                    })(outerIndex),  function(e) { console.log('Error decoding audio file', e)});
        };})(test);

        requestArray[i].onerror = function() {
            alert('BufferLoader: XHR error');
        }

        requestArray[i].send();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:59:09.770

当你放

```
})(test); 
```

您当时（而不是在事件发生时）运行该函数，通过了像 e 一样的测试。我不明白“e 是未定义的”e 是 i。

您可以尝试将“var”放在定义变量 test 的位置并删除“)(test)”吗？我认为这个问题在测试范围内。

# visual-studio - 如何防止 Visual Studio 2012 在默认为“当前文档”的文件中查找？

> ID：13363606
> 
> 赞同：40
> 
> 时间：2012-11-13T15:29:53.083
> 
> 标签：visual-studio, visual-studio-2012

在 Visual Studio 2010 及更早版本中，“在文件中查找”功能会记住您对“查找范围”选项的选择。

在 2012 年，该选项有时会重置为“当前文档”，使其仅在单个文件中搜索。这可能很烦人，尤其是当您没有注意到它已经完成时。

有什么办法可以强制这个设置坚持我想要的（通常是“整个解决方案”）？

作为问题的一个示例，突出显示源文件中的几行文本并调出“在文件中查找”框。它将“查找”设置更改为“选择”。关闭它，取消选择文本并再次在文件中查找。该设置将自动恢复为“当前文档”。在 2010 年及更早的版本中执行此操作不会更改设置。

[这里](https://connect.microsoft.com/VisualStudio/feedback/details/770747/find-in-files-selection-changed)有另一个问题的描述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T09:50:43.037

我发现它是间歇性的（但更多时候不是）并且它是一个潜在的错误。对我来说，它重置为“所有打开的文档”，这可能是灾难性的。

您是否安装了任何插件，因为我正在考虑将其作为一个问题提出，如果它不是影响它的第 3 方工具？

我安装了以下内容：

*   锐器 7.1
*   团队城市
*   安赫
*   实体框架电动工具 Beta 2
*   幽灵医生
*   微软网络开发工具
*   巢内
*   NuGet
*   拼写检查器
*   SQL Server Compact 工具箱
*   适用于 Windows 库 JavaScript 的 VS 扩展

我想我们应该首先排除其中一些？

其他没有安装扩展程序的人发现这个？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T09:41:47.430

试试 SmartFind 扩展是否对您有帮助。我写它是因为我有类似的问题。

[http://visualstudiogallery.msdn.microsoft.com/015611c4-b357-4672-8977-f3ec92f0b808](http://visualstudiogallery.msdn.microsoft.com/015611c4-b357-4672-8977-f3ec92f0b808)

来源在这里：[https ://github.com/laktak/vs-smartfind](https://github.com/laktak/vs-smartfind)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-24T01:13:34.273

对我有用的是在键盘自定义下我做到了，所以 Ctrl-Shift-F 映射到 Edit.SwitchtoFindInFiles 而不是默认值 (Edit.FindInFiles)。我也安装了 SmartFind 扩展（上面提到过这个步骤），但它本身似乎并没有修复它。我不确定在我的情况下是否是两者的结合。另请注意，这适用于 VS2012 所以 YMMV。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T13:48:10.647

我总是使用 ctrl + f 在文档中搜索，并使用 ctrl + shift + f 搜索整个解决方案。

可能不是您问题的答案，但它应该可以解决您的问题。

# spring - 使用 Spring Data Neo4j 解析实体返回错误的实体类型

> ID：13363607
> 
> 赞同：5
> 
> 时间：2012-11-13T15:29:55.317
> 
> 标签：spring, neo4j, nosql, spring-data-neo4j

当我使用 Spring Data Neo4j (SDN) 查找节点实体时，我遇到了一些奇怪的行为。如果我使用 GraphRepository.findOne(long) 它将返回一个具有该标识符的实体，即使该实体不是同一类型。

这就是我的（非常）简化的实体结构的样子：

```
@NodeEntity
protected abstract class BaseEntity {

    @GraphId
    private Long id;

    @JsonIgnore
    @RelatedTo(type = RelationType.ENTITY_AUDIT)
    private Audit audit;

}

@NodeEntity
public final class Person extends BaseEntity {

    @Indexed(indexType = IndexType.FULLTEXT)
    private String firstName;

    @Indexed(indexType = IndexType.FULLTEXT)
    private String lastName;

}

@NodeEntity
public class Audit extends BaseEntity {

    @RelatedTo(type = RelationType.ENTITY_AUDIT, direction = Direction.INCOMING)
    private BaseEntity parent;

    private Long date;

    private String user;

} 
```

对于每种实体类型，我都创建了这样的存储库：

```
@Repository
public interface PersonRepository extends GraphRepository<Person> {}

@Repository
public interface AuditRepository extends GraphRepository<Audit> {} 
```

我的服务层类有一个抽象基类。它们大致是这样的：

```
public abstract class MyServiceImpl<T extends BaseEntity> implements MyService<T> {

    private GraphRepository<T> repository;

    public MyServiceImpl(final GraphRepository<T> repository) {
        this.repository = repository;
    }

    @Override
    public T read(final Long identifier) throws EntityNotFoundException {
        return repository.findOne(identifier);
    }

    @Override   
    public T create(final T entity) {
        return repository.save(entity);
    }

}

@Service
public class PersonServiceImpl extends MyServiceImpl<Person> implements PersonService {

    private PersonRepository personRepository;

    @Autowired
    public PersonServiceImpl(final PersonRepository personRepository) {
        super(personRepository);
        this.personRepository = personRepository;
    }

} 
```

当我执行以下代码时，结果与预期不符：

```
Person person = new Person();
person.setFirstName("Test");
person.setLastName("Person");
personService.create(person);
// suppose the person identifier is 1L
final Audit audit = auditRepository.findOne(1L); 
```

您希望 AuditRepository 会返回 null，但事实并非如此。相反，它会返回一个带有标识符 1L 且所有属性都为 null 的 Audit。似乎只要有一个与给定标识符对应的节点，它就会被返回，不管它的类型是什么。如果 Person 和 Audit 具有匹配的属性名称，它们也将包含它们的值......所有这些都是预期的行为，还是我遗漏了什么？

现在，我已经用下面的代码解决了这个问题，我自己做类型检查。

```
public abstract class MyServiceImpl<T extends BaseEntity> implements MyService<T> {

    private GraphRepository<T> repository;

    public MyServiceImpl(final GraphRepository<T> repository) {
        this.repository = repository;
    }

    @Override
    public T read(final Long identifier) throws EntityNotFoundException {
        return get(identifier);
    }

    protected T get(final Long identifier) throws EntityNotFoundException {     
        final T entity = repository.findOne(identifier);
        final Class<T> type = getServiceType();
        if (entity == null || !(type.equals(repository.getStoredJavaType(entity)))) {
            throw new EntityNotFoundException(type, identifier);
        }
        return entity;
    }

    @SuppressWarnings("unchecked")
    private Class<T> getServiceType() {
         return (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass())
                 .getActualTypeArguments()[0];
    }

} 
```

如果您需要更多配置，请告诉我。

我的框架版本是：

```
<spring.version>3.2.0.RC1</spring.version>
<neo4j.version>1.8</neo4j.version>
<spring.data.neo4j.version>2.1.0.RELEASE</spring.data.neo4j.version> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:40:37.637

在返回错误的实体类型之前，我们有该行为，我们更改了该行为，以便您提供的类型用于自动将节点投影到。

```
public <S extends PropertyContainer, T> T createEntityFromStoredType(S state, MappingPolicy mappingPolicy) {..} 
```

模板。createEntityFromStoredType(node, null) 将为您提供具有存储状态的对象。

```
public Class getStoredJavaType(Object entity) {} 
```

为您提供节点或关系（或实体）的存储类

我们讨论了改变行为和失败的问题。在存储库中。

问题是，那会发生什么？例外？空结果？...

通常，如果您提供有效的原始节点 ID，返回错误或 Null 似乎也不是正确答案？

# svn - Atlassian Bamboo 通过 HTTPS 连接到 SVN

> ID：13363612
> 
> 赞同：0
> 
> 时间：2012-11-13T15:30:10.777
> 
> 标签：svn, bamboo

我正在评估 Bamboo 作为 CI 系统（目前使用 Team City）

我遇到了第一个障碍，它试图让 Bamboo 识别我在第三方站点上通过 HTTPS 的存储库（标准用户名和密码验证）

给出的错误是：

```
This is not a valid Subversion Repository: svn: E175002: Received fatal alert: unexpected_message svn: E175002: OPTIONS request failed 
```

TeamCity 完美连接，使用相同的 repo 和相同的身份验证从同一服务器运行，我可以在浏览器中使用 HTTPS 连接到 repo

SVN repo 运行的是 1.6，所以我在 Bamboo 选项中预先配置了它（默认为 1.7）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:20:03.093

如果我正确理解您的问题，您必须在竹子中配置 svn 凭据。请按照 [1] 进行操作。

1.  [https://confluence.atlassian.com/display/AOD/Subversion](https://confluence.atlassian.com/display/AOD/Subversion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:39:13.583

原因是 Bamboo 使用的 SVN 客户端试图向 SVN 服务器发出 HTTP OPTIONS 调用；由于配置错误或授权问题，它失败了。

首先，确定 Bamboo 用于针对 SVN 进行身份验证的用户 ID。

然后，检查您的 HTTP 服务器的配置。要么是 Apache 配置完全不允许 HTTP OPTIONS 请求，要么是不允许您尝试连接的特定用户执行 HTTP OPTIONS。

首先查看 Apache 实例的 DAV 配置部分。

# php - 这是将数据插入数据库的坏习惯吗？

> ID：13363616
> 
> 赞同：2
> 
> 时间：2012-11-13T15:30:29.587
> 
> 标签：php, mysql

我有这个功能，可以将复选框中的数据插入到我的 sql 数据库中，它只是查找，但我对此很陌生，所以我想知道是否有更好/更安全（来自 sql 注入）的方法来做到这一点。我知道我应该将 PDO 与准备好的语句一起使用，但这是我稍后要解决的问题。

这是生成 html 复选框的表单：

```
<form action="" method="post">
<?php
    if(empty($clients) === true){   
    echo '<p>You do not have any clients yet.</p>';
    }
    else
    {
    foreach($clients as $client){
    echo'
        <input type="checkbox"  name="client_data[]" value="'.$_SESSION['user_id'].'|'.$class_id.'|'.$client['first_name'].'|'.$client['nickname'].'|'.$client['last_name'].'">
        '.$client['first_name'].' ('.$client['nickname'].') '.$client['last_name'].'
         <br />';

   } // foreach($client

} // if empty 

?> 
```

这是调用该函数的php：

```
if (isset($_POST['exist_to_class'])){
if (empty($_POST['client_data']) === true){
    $errors [] = 'You much select a client to be added to the class.';
} else {
    if (isset($_POST['client_data']) && !empty($_POST['client_data']));
    foreach ($_POST['client_data'] as $cd){
     exist_client_to_class($cd);
     header('Location: view_class.php?class_id='.$class_id.' ');

} // foreach $cd

} // else

} //isset 
```

这是我将数据插入数据库的函数：

```
// add existing client to class  ----------------------------------------------------
function exist_client_to_class($cd){

list($user_id, $class_id, $first_name, $last_name, $nickname) = explode('|', $cd);
mysql_query("INSERT INTO `clients` (user_id, class_id, first_name, last_name, nickname, date) 
            VALUES('$user_id', '$class_id', '$first_name', '$last_name', '$nickname', CURDATE())");

} 
```

第一次尝试 PDO 准备好的语句：**UPDATE**

```
function exist_client_to_class($cd){

try{

$stmt = $conn->prepare('INSERT INTO clients 
(user_id, class_id, first_name, last_name, nickname, date)
VALUES (:user_id, :class_id, :first_name, :last_name, :nickname, CURDATE())
');

list($user_id, $class_id, $first_name, $last_name, $nickname) = explode('|', $cd);

$stmt->execute(array(
        ':user_id' => $user_id, 
        ':class_id' => $class_id, 
        ':first_name' => $first_name,
        ':last_name' => $last_name,
        ':nickname' => $nickname
        )
        );
}

catch(PDOException $e) {
    echo 'Error: ' . $e->getMessage();
}

} 
```

这是数据库连接文件：

```
//PDO database connect
try {
$conn = new PDO('mysql:host=localhost;dbname=customn7_cm', '**********', '**********');
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$conn->exec("SET CHARACTER SET utf8");
} catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:34:00.657

简单地说，是的。

无论如何，您都不会清理或转义您的用户数据。您正在使用旧`mysql_*`社区已弃用的功能。你最好的选择是开始使用`PDO`或`Mysqli`

阅读这篇文章：[PHP 数据库访问：你做对了吗？](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/?search_index=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:53:47.613

这适用于大多数 sql 注入：（来自[php.net](http://www.php.net)）
decleration:
string mysql_real_escape_string ( string $unescaped_string [, resource $link_identifier = NULL ] )

```
       // 连接
       $link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password') OR die(mysql_error());
        // 询问
        $query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
        mysql_real_escape_string($user),
        mysql_real_escape_string($password));

```

# random - Erlang 中的列表处理和随机数生成

> ID：13363618
> 
> 赞同：0
> 
> 时间：2012-11-13T15:30:31.290
> 
> 标签：random, erlang

为什么我在`randy:spawner()`下面运行时会得到一个相同数字的列表？我期待一个随机数列表。我怎样才能改变代码来实现这一点？

```
-module(randy).
-export([randlister/2,spawner/0]).
-import(lists,[map/2]).

spawner() ->
    [spawn(fun() -> randlister(X,random:uniform()) end) || X <- lists:seq(1,3)].

randlister(X, Randomnumber) ->
io:format("~p,    ~p~n",[X,Randomnumber]). 
```

示例输出：

```
18> randy:spawner().
1,    0.4435846174457203
2,    0.4435846174457203
3,    0.4435846174457203 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:37:54.390

您必须在每个进程中播种随机数生成器：

```
spawner() ->
    [spawn(fun() ->
                   random:seed(now()),
                   randlister(X,random:uniform())
           end) || X <- lists:seq(1,3)]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:43:42.997

### 为什么我在`randy:spawner()`下面运行时会得到一个相同数字的列表？

您**必须**在生成随机数之前播种。从同一种子生成的随机数序列将完全相同。

如果一个进程调用`uniform/0`或`uniform/1`没有先设置种子，[`seed/0`](http://www.erlang.org/doc/man/random.html#seed-0)则自动调用。 **将使用默认（固定）**`seed/0`值生成随机数，可以通过. 在我的笔记本电脑上，它总是返回一个默认的进程字典。**[`seed0/0`](http://www.erlang.org/doc/man/random.html#seed0-0)`{3172,9814,20125}`**

 **### 我怎样才能改变代码来实现这一点？

在最简单的情况下，@EmilVikström 的解决方案就足够了。但是，我确实建议跟踪随机数生成**状态** ，以便在调试时过上更轻松的生活。

[随机数生成状态](http://www.erlang.org/doc/man/random.html#type-ran)只是一个 3 元组整数，由`now()`. 种子只是第一个状态。然后您可以使用[`uniform_s/1`](http://www.erlang.org/doc/man/random.html#uniform_s-1)or[`uniform_s/2`](http://www.erlang.org/doc/man/random.html#uniform_s-2)从指定状态生成随机数。

**通过使用这些带状态的函数，您可以在 Erlang 代码之外**指定随机数种子，例如通过命令行选项或环境变量传递种子。

*   在测试/调试时，请修复种子，以便每次运行程序时都会给出相同的结果。
*   当您满意时，更改种子以便（可能）继续调试:-)
*   当您准备好进行生产时，只需将当前时间（或其他时间）作为种子传递，这样您就可以获得一些随机性。**

# javascript - jquery在settimeout后运行函数

> ID：13363622
> 
> 赞同：2
> 
> 时间：2012-11-13T15:30:53.270
> 
> 标签：javascript, jquery

我有一个运行良好的动画，但现在我试图通过淡出文本然后运行另一个函数来反转这个动画。加载此页面后，以下运行...

```
 $(document).ready(function () {

      dream();
      setTimeout(runul(), 8000, function() {showVideo()});

    }); 
```

梦想功能在身体背景上创建气泡。

```
 function dream() {
        //calculating random color of dream
        if (animation_stopped) return;
        var color = 'rgb(' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ')';

        //calculating random X position
        var x = Math.floor(Math.random() * $(window).width());

        //calculating random Y position
        var y = Math.floor(Math.random() * $(window).height());

        //creating the dream and hide
        drawingpix = $('<span>').attr({ class: 'drawingpix' }).hide();

        //appending it to body
        $(document.body).append(drawingpix);

        //styling dream.. filling colors.. positioning.. showing.. growing..fading
        drawingpix.css({
            'background-color': color,
            'border-radius': '100px',
            '-moz-border-radius': '100px',
            '-webkit-border-radius': '100px',
            top: y - 14,    //offsets
            left: x - 14 //offsets
        }).show().animate({
            height: '500px',
            width: '500px',
            'border-radius': '500px',
            '-moz-border-radius': '500px',
            '-webkit-border-radius': '500px',
            opacity: 0.1,
            top: y - 250,    //offsets
            left: x - 250
        }, 3000).fadeOut(2000);

        //Every dream's end starts a new dream
         window.setTimeout('dream()', 200);
    } 
```

当 dream 函数运行时，我运行 runul() 函数，它开始输入文本。

```
 function runul() {
        jQuery("#ticker").ticker({
            cursorList: " ",
            rate: 50,
            delay: 18000
        }).trigger("play").trigger("stop");

        // Trigger events
        jQuery(".stop").click(function () {
            jQuery("#ticker").trigger("stop");
            return false;
        });

        jQuery(".play").click(function () {
            jQuery("#ticker").trigger("play");
            return false;
        });

    } 
```

当 runul() 动画完成后，我想运行 showVideo 函数。我希望此函数淡出键入的文本，然后淡入包含在 div 中的 iframe。

```
 function showVideo() {
        $('#divFade').fadeOut(3000);
        animation_stopped = true;
        $(typetext).css('color', 'black');
        $("body").animate({ backgroundColor: "#ffffff" }, 3000);
        $('#divVideos').fadeIn('slow');
       // Animation complete.
        $("#iVideos").prop('src', 'Videos/Quick Start Intro_player.html');
        return false;
      }; 
```

runul() 完成后如何让 showVideo 运行？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:35:20.980

您应该将“showVideo”作为回调函数传递：

```
setTimeout( function() {runul(showVideo)},8000);

function runul(callback) {
        jQuery("#ticker").ticker({
            cursorList: " ",
            rate: 50,
            delay: 18000
        }).trigger("play").trigger("stop");

        // Trigger events
        jQuery(".stop").click(function () {
            jQuery("#ticker").trigger("stop");
            return false;
        });

        jQuery(".play").click(function () {
            jQuery("#ticker").trigger("play");
            return false;
        });

        callback();

    } 
```

您还可以使用 jquery [deferred](http://api.jquery.com/category/deferred-object/)，特别是[when](http://api.jquery.com/jQuery.when/)函数

# android - android创建对象和内存

> ID：13363623
> 
> 赞同：1
> 
> 时间：2012-11-13T15:30:54.033
> 
> 标签：android, memory, bitmap, memory-leaks

如果我创建一个对象并将其分配给一个变量：

```
Obj obj1 = null;
obj1 = myFunction(params); 
```

（这里`myFunction`创建了一个复杂的对象）

后来我重新分配了变量：

```
obj1 = myFunction(otherparams); 
```

在那一刻是否发生内存泄漏，因为我没有破坏以前的对象？

以下是真实情况：

```
Bitmap bmp;
bmp = drawMyBitmap(3);
//... some code
bmp = drawMyBitmap(4); 
```

这里会发生内存泄漏吗？

当然，我知道我必须调用`bmp.recycle`，但我不能这样做，因为真正的代码如下：

```
Bitmap bmp;
bmp = drawMyBitmap(3);
imageView.setImageBitmap(bmp);
//... some code
// if I try to do recycle here - I receive java.lang.IllegalArgumentException: Cannot draw recycled bitmaps
// But I need to recreate bitmap every some minutes
bmp = drawMyBitmap(4);
imageView.setImageBitmap(bmp); 
```

那么，如何回收位图并避免内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:25:28.277

据我了解，您的问题只是您无法回收您的位图，因为它已被使用。这很天真，所以也许是错误的，但是这样做：

```
imageView.setImageBitmap(bmp);
//... some code
Bitmap tmp = bmp;
bmp = drawMyBitmap(4);
imageView.setImageBitmap(bmp);
tmp.recycle(); // As it's not anymore referenced by the ImageView, you can recycle the Bitmap safely 
```

我没有测试它。给予反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:40:53.080

```
 Bitmap bmp;
 bmp = drawMyBitmap(3);
 imageView.setImageBitmap(bmp);
 //... some code
 // if I try to do recycle here - I receive java.lang.IllegalArgumentException: Cannot    draw recycled bitmaps
 // But I need to recreate bitmap every some minutes
 Bitmap temp = bmp;  //try this
 bmp = drawMyBitmap(4);
 imageView.setImageBitmap(bmp);
 temp.recycle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:45:50.940

在第一种情况下，您将释放第一个对象的引用，以便垃圾收集器将其销毁，而使第二个对象由于新的引用而存在于内存中。

在第二种情况下，如果您将位图设置为 ImageViews，则无法回收它们，因为视图将没有位图来绘制图像，并且会向您抛出位图回收异常，因此您不会“泄漏”太多内存在内存中保留 2 个位图。

如果需要，请尝试使用位图选项来创建它们以优化内存消耗。

# c++ - 在 C++ 应用程序中使用 c 类和头文件

> ID：13363625
> 
> 赞同：1
> 
> 时间：2012-11-13T15:30:55.670
> 
> 标签：c++, c, file-conversion

发布有关在 C++ 应用程序中使用 C 样式`.c`和类的基本问题。`.h`我有一个适用于 C 的库，但基于我也可以用于 C++ 的文档。

在我开始将它们包含在我的项目中之前，我是否需要将这两个文件重命名为 .cpp 和 .hpp ？我试图引用现有线程，但它谈到了 crom cpp 到 c 的其他方式。

[如何将 C++ 代码转换为 C](https://stackoverflow.com/questions/737257/code-convert-from-c-to-c)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:33:14.693

不，你没有。`.h`扩展是共享的。

实现文件扩展名取决于编译器/IDE。例如，MSVS 会将`.c`文件编译为 C 源代码，将文件编译`.cpp`为 C++。这意味着你必须使用

```
extern "C" 
```

如果您在项目的 C++ 部分中使用 C 功能，则在标题中。

AFAIK 您可以`.c`使用 C++ 编译文件`g++`，因此不需要更改扩展名。或者您可以编译它们`gcc`并`extern "C"`再次使用。

# python - Django：我可以从字典中创建一个 QueryDict 吗？

> ID：13363628
> 
> 赞同：45
> 
> 时间：2012-11-13T15:31:14.780
> 
> 标签：python, django

想象一下，我的 Django 应用程序中有一本字典：

```
dict = {'a': 'one', 'b': 'two', } 
```

现在我想轻松地从这个字典中创建一个 GET 参数的 urlencoded 列表。当然，我可以循环遍历字典、urlencode 键和值，然后自己连接字符串，但必须有更简单的方法。我想使用一个 QueryDict 实例。QueryDict 是 dict 的子类，所以它应该是可能的。

```
qdict = QueryDict(dict) # this does not actually work
print qdict.urlencode() 
```

我将如何使倒数第二行工作？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-13T15:34:11.123

怎么样？

```
from django.http import QueryDict

ordinary_dict = {'a': 'one', 'b': 'two', }
query_dict = QueryDict('', mutable=True)
query_dict.update(ordinary_dict) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-13T15:34:28.020

Python 有一个内置工具，用于将字典（任何映射对象）编码为查询字符串

```
params = {'a': 'one', 'b': 'two', }

urllib.urlencode(params)

'a=one&b=two' 
```

[http://docs.python.org/2/library/urllib.html#urllib.urlencode](http://docs.python.org/2/library/urllib.html#urllib.urlencode)

`QueryDict`将查询字符串作为其构造函数的第一个参数

`def __init__(self, query_string, mutable=False, encoding=None):`

`q = QueryDict('a=1&b=2')`

[https://github.com/django/django/blob/master/django/http/request.py#L260](https://github.com/django/django/blob/master/django/http/request.py#L260)

更新：在**Python3**中，urlencode 已[移至 urllib.parse](https://docs.python.org/3/library/urllib.parse.html)：

```
from urllib.parse import urlencode

params = {'a': 'one', 'b': 'two', }
urlencode(params)
'a=one&b=two' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-01T16:11:18.350

实际上，实现这一点的一种间接但更合乎逻辑的方法是使用 MultiValueDict。这样，每个键的多个值可以存储在 QueryDict 中，然后 .getlist 方法应该可以正常工作。

```
from django.http.request import QueryDict, MultiValueDict
dictionary = {'my_age': ['23'], 'my_girlfriend_age': ['25', '27'], }

qdict = QueryDict('', mutable=True)
qdict.update(MultiValueDict(dictionary))

print qdict.get('my_age')  # 23
print qdict['my_girlfriend_age']  # 27
print qdict.getlist('my_girlfriend_age')  # ['25', '27'] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-19T13:18:14.393

我的解决方案适用于单个和多个键值：

```
def dict_to_querydict(dictionary):
    from django.http import QueryDict
    from django.utils.datastructures import MultiValueDict

    qdict = QueryDict('', mutable=True)

    for key, value in dictionary.items():
        d = {key: value}
        qdict.update(MultiValueDict(d) if isinstance(value, list) else d)

    return qdict 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T22:45:53.663

我迟到了，但我最近需要做同样的事情——但要保留响应对象中“真实”QueryDict 的只读行为。

改编`QueryDict.fromkeys()`方法中的代码提供了一个很好的功能：

```
from django.http import QueryDict

def querydict_from_dict(data: Dict[str, Any],  mutable=False) -> QueryDict:
    """
    Return a new QueryDict with keys (may be repeated) from an iterable and
    values from value.
    """
    q = QueryDict('', mutable=True)

    for key in data:
        q.appendlist(key, data[key])

    if not mutable:
        q._mutable = False

    return q 
```

# ios - 如何在 UIViewController 中使用 TableView？

> ID：13363630
> 
> 赞同：0
> 
> 时间：2012-11-13T15:31:23.110
> 
> 标签：ios, cocoa-touch, cocoa, uistoryboard

我想向我的 UIView 添加一个简单的静态 TableView。所以我把它拖到我的 UIView 中。将 TableViewDataSource 和委托协议添加到我的 ViewController 类。为我的表格视图创建了一个出口，并将数据源和委托出口连接到视图控制器。但我仍然收到一条错误消息，指出静态表视图仅在嵌入 UITableViewCOntroller 实例时才有效？任何想法如何解决这个问题？PS：我正在使用 UIStoryboards 来设计 UI

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:36:54.067

使用将链接到 UITableViewController 的 containerView（将其拖到您的 UIView 上）。您将使用 prepareForSegue 方法来初始化表视图控制器。
哦，你可能想接受对你有帮助的答案，或者没有人会再帮助你了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:13:57.200

如果您想要静态单元格，请在 Storyboard 中单击 tableview，然后在检查器中，将`Content`“Dynamic Prototypes”更改为`Static Cells`. 您还可以将这些单元格连接到新控制器，而无需为表设置数据源和委托。

# ember.js - Ember 应用程序初始集合视图的最佳结构

> ID：13363635
> 
> 赞同：1
> 
> 时间：2012-11-13T15:31:48.493
> 
> 标签：ember.js

我目前正在开发一个使用 Ember.js 的应用程序，但是我在寻找为我的路线视图设置上下文的正确方法时遇到了问题。

对于我的应用程序的初始视图，我需要发出 3 个 AJAX 请求（1\. 基本用户详细信息，2\. 用户地址，3\. 用户图像）。

目前，我将这些设置为用户对象上的 3 个单独的函数——然后是一个调用所有 3 个函数并返回一个对象的单个函数——结合所有 3 个函数的结果。

这在大多数情况下都有效，但是有时我的路由视图会在 AJAX 请求完成之前尝试呈现，因此会导致我的视​​图出现错误。

任何想法如何更好地构建这个并解决我的问题？

# amazon-web-services - 如何使用（如果可能）JMeter 加载带有消息的 AWS SQS 队列？

> ID：13363639
> 
> 赞同：1
> 
> 时间：2012-11-13T15:31:57.213
> 
> 标签：amazon-web-services, jmeter

我需要在 Amazon Web Services 上加载一个 SQS 队列来负载测试使用来自 SQS 队列的消息的应用程序。

是否可以使用 JMeter 加载 SQS 队列？

有没有比使用 JMeter 更好的加载 SQS 队列的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:51:04.643

我没试过，但你应该可以通过[HTTP requests](http://docs.amazonwebservices.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/MakingRequestsArticle.html)发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T02:45:12.983

我创建了使用 AWS SDK 在 SNS 标准或 FIFO 主题中发布事件的 JMeter 插件：

[https://github.com/JoseLuisSR/awsmeter](https://github.com/JoseLuisSR/awsmeter)

您只需要具有编程访问权限的 AWS IAM 用户，下载 JMeter 并安装 awsmeter 插件。

如果您有任何问题或意见，请告诉我。

谢谢。

# symfony - 构建使用多个字段的 Symfony 2 自定义验证器

> ID：13363640
> 
> 赞同：19
> 
> 时间：2012-11-13T15:31:57.323
> 
> 标签：symfony

我正在构建一个自定义验证器，它需要验证数据库中两个表单字段的值，以便让这个约束通过。

我的问题是：ContractValidator 的 validate 方法在其签名中只有一个 $value，那么我如何从多个字段中访问这些值来进行验证？

这是一个典型的自定义验证器：

```
namespace Acme\WebsiteBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class MyCustomValidator extends ConstraintValidator
{
  public function validate($value, Constraint $constraint)
  {
    // check $value and return an error
    // but in my case, i want the value from more than one form field to do a validation
    // why? i'm checking that two pieces of information (ssn + dob year) match
    // the account the user is registering for
  }
} 
```

这是一个带有一些验证集的表单类的示例：

```
namespace ACME\WebsiteBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Validator\Constraints\Collection;
use Symfony\Component\Validator\Constraints\MinLength;
use Symfony\Component\Validator\Constraints\NotBlank;
use Symfony\Component\Validator\Constraints\Regex;
use ACME\WebsiteBundle\Validator\Constraints\UsernameAvailable;

class AccountRegistration extends AbstractType
{
  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder->add('ssn', 'number', array(
      'max_length' => 9, 
      'required' => true,
      'error_bubbling' => true)
    );

    $builder->add('year_of_birth', 'choice', array(
      'choices'  => range(date("Y") - 100, date("Y")),
      'required' => true,
      'empty_value' => 'Select ...',
      'label'    => 'Year of Birth',
      'error_bubbling' => true)
    );

    $builder->add('username', 'text', array(
      'required' => true,
      'error_bubbling' => true)
    );

    $builder->add('password', 'password', array(
      'max_length' => 25,
      'required' => true,
      'error_bubbling' => true)
    );

    $builder->add('security_question', 'choice', array(
      'empty_value' => 'Select ...',
      'choices' => array(),
      'label' => 'Security Question',
      'required' => true,
      'error_bubbling' => true)
    );

    $builder->add('security_question_answer', 'text', array(
      'label' => 'Answer',
      'required' => true,
      'error_bubbling' => true)
    );
  }

  public function getName()
  {
    return 'account_registration';
  }

  public function getDefaultOptions(array $options)
  {

    $collectionConstraint = new Collection(array(
      'allowExtraFields' => true, 
      'fields' => array(
        'ssn'  => array(new MinLength(array('limit' => 9, 'message' => 'too short.')), new NotBlank()),
        'year_of_birth' => array(new NotBlank()),
        'username' => array(new NotBlank(), new UsernameAvailable()),
        'password' => array(new NotBlank(), new Regex(array(
          'message' => 'password must be min 8 chars, contain at least 1 digit',
          'pattern' => "((?=.*\d)(?=.*[a-z]).{8,25})"))
        ),
        'security_question' => array(new NotBlank()),
        'security_question_answer' => array(new NotBlank()))
      )
    );

    return array(
        'csrf_protection' => true,
        'csrf_field_name' => '_token',
        'intention'       => 'account_registration',
        'validation_constraint' => $collectionConstraint
    );
  }  
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-08-21T05:54:20.097

任何扩展的自定义验证器`ConstraintValidator`都可以访问该`$context`属性。`$context`是一个实例，`ExecutionContext`可让您访问提交的数据：

例子：

```
<?php

namespace My\Bundle\MyBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class AppointorRoleValidator extends ConstraintValidator
{

    public function validate($value, Constraint $constraint)
    {
        $values = $this->context->getRoot()->getData();
        /* ... */
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:15:21.463

您需要`CLASS_CONSTRAINT`按照[食谱](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html#class-constraint-validator)中的说明使用。然后，您通过了整个班级，并且可以使用该班级的任何属性。在上面的示例中，这意味着不是`$value`蜂鸣一个字符串/整数，而是您要验证的整个对象。

您唯一需要更改的是`getTargets()`函数，它必须返回`self::CLASS_CONSTRAINT`。

还要确保在类级别而不是属性级别定义验证器。如果您使用注释，这意味着验证器必须在类定义之上进行描述，而不是在一个特定属性定义之上：

```
/**
  * @MyValidator\SomeValidator
  */
class MyClass {

} 
```

# php - 在 PHP 中使用 MSSQL 日期时间时遇到问题（通过 SQLSRV）

> ID：13363647
> 
> 赞同：1
> 
> 时间：2012-11-13T15:32:27.960
> 
> 标签：php, sql-server-2008, datetime

我要和这个转圈！我正在执行以下操作：

1.  通过 SQL/PHP 从 MSSQL 日期时间字段中检索日期
2.  通过查询字符串将日期发送到新的 PHP 页面
3.  尝试在新的 SQL 查询中使用该日期

我在这里遇到问题。

如果我使用回声：

```
echo $_REQUEST['rSessionDate'];
output: 15/10/2012 
```

这很好，但是当我在 SQL 查询中使用它时，我没有得到我期望的结果，所以我认为最好的办法是确保它首先被识别为日期。

如果我使用 date_format()：

```
echo date_format($_REQUEST['rSessionDate'],'Y-m-d');
output: Warning: date_format() expects parameter 1 to be DateTime, string given in ... 
```

如果我使用 strtotime()：

```
echo strtotime($_REQUEST['rSessionDate']);
output: (nothing) 
```

如果我使用日期（）：

```
echo date('Y-m-d H:i',$_REQUEST['rSessionDate']);
output: Notice: A non well formed numeric value encountered in ... 
```

如果我将 date() 与 strtotime() 一起使用：

```
echo date('Y-m-d H:i',strtotime($_REQUEST['rSessionDate']));
output: 1970-01-01 01:00 
```

我确定我完全错过了一些简单的东西。

编辑：我尝试了一些我发现的新功能：

```
$rSessionDate = new DateTime($_REQUEST['rSessionDate']);
echo $rSessionDate->format('Y-m-d H:i:s');
output: Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct(): Failed to parse time string (15/10/2012) at position 0 (1): Unexpected character' 
```

和：

```
$rSessionDate = date_create($_REQUEST['rSessionDate']);
echo date_format($rSessionDate, 'Y-m-d H:i:s');
output: Warning: date_format() expects parameter 1 to be DateTime, boolean given i 
```

编辑2：

我尝试过使用 CAST：

```
SELECT fCourseCode ,fCourseTitle FROM tCourses WHERE fCourseCode = '4B' AND (ISNULL(fValidStart, 0) <= CAST('2012-10-15 00:00:00' as DATETIME)) 
```

但这失败并出现错误“将 varchar 数据类型转换为日期时间数据类型导致值超出范围”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:52:01.123

这些可能有助于阐明您正在寻找的东西。

[http://www.ozzu.com/programming-forum/php-mssql-datetime-field-not-pulling-correctly-t106226.html](http://www.ozzu.com/programming-forum/php-mssql-datetime-field-not-pulling-correctly-t106226.html)

[http://af-design.com/blog/2010/03/13/microsoft-sql-server-driver-for-php-returns-datetime-object/](http://af-design.com/blog/2010/03/13/microsoft-sql-server-driver-for-php-returns-datetime-object/)

strtotime() 在上面的示例中返回一个纪元时间戳。

或检查 CAST 和 CONVERT（指 MSSQL2000，但仍可能对您有所帮助）
[http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T16:12:44.347

如果日期是从 MSSQL 表中检索的，并且您想`strtotime()`在 PHP 中使用并且不想将日期格式更改为 yyyy-mm-dd，那么您可以使用

```
CONVERT(VARCHAR(30), DateFromMSSQL, 121) as DateFromMSSQL 
```

# liferay - Nothing happens when I tried to run liferay 6.1.1\. on a existing Tomcat 7 server

> ID：13363651
> 
> 赞同：0
> 
> 时间：2012-11-13T15:32:59.863
> 
> 标签：liferay, tomcat7, liferay-6

Any help will be welcome.

I followed this [tutorial](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen11-installing-liferay-on-tomcat-7-0) steps, trying to run liferay 6.1.1\. on a existing tomcat, but nothing happens when I launch tomcat server.

Server's log message (see), seems to be normal, but every tomcat default app is loaded, except liferay's war file. When I hit localhost:8080/, all I receive is a nice 404 status!

**//Tomcat logs**:

```
Nov 14, 2012 3:10:22 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /Users/cbs_sp/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
Nov 14, 2012 3:10:23 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Nov 14, 2012 3:10:23 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Nov 14, 2012 3:10:23 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1991 ms
Nov 14, 2012 3:10:23 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Nov 14, 2012 3:10:23 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
Nov 14, 2012 3:10:23 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /Cesar/Profissional/Projetos/Meu/Java/Liferay/Server/liferay_home/apache-tomcat-7.0.32/conf/Catalina/localhost/ROOT.xml
Nov 14, 2012 3:10:26 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /Cesar/Profissional/Projetos/Meu/Java/Liferay/Server/liferay_home/apache-tomcat-7.0.32/webapps/docs
Nov 14, 2012 3:10:26 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /Cesar/Profissional/Projetos/Meu/Java/Liferay/Server/liferay_home/apache-tomcat-7.0.32/webapps/examples
Nov 14, 2012 3:10:27 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /Cesar/Profissional/Projetos/Meu/Java/Liferay/Server/liferay_home/apache-tomcat-7.0.32/webapps/host-manager
Nov 14, 2012 3:10:27 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /Cesar/Profissional/Projetos/Meu/Java/Liferay/Server/liferay_home/apache-tomcat-7.0.32/webapps/manager
Nov 14, 2012 3:10:27 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Nov 14, 2012 3:10:27 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Nov 14, 2012 3:10:27 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 4691 ms 
```

Any idea about what might be happening? Or, where I can start?

Thanks in advance,

*** Additional info added ****

**//Terminal**:

```
[Cesars-Computer: apache-tomcat-7.0.32] $ cd webapps/
[Cesars-Computer: webapps] $ ls -la
total 0
drwxr-xr-x@  7 cbs_sp  admin   238 Oct  3 04:52 .
drwxr-xr-x@ 13 cbs_sp  admin   442 Nov  7 17:09 ..
drwxr-xr-x@  4 cbs_sp  admin   136 Nov 13 12:53 ROOT
drwxr-xr-x@ 52 cbs_sp  admin  1768 Oct  3 04:52 docs
drwxr-xr-x@  7 cbs_sp  admin   238 Oct  3 04:52 examples
drwxr-xr-x@  7 cbs_sp  admin   238 Oct  3 04:52 host-manager
drwxr-xr-x@  8 cbs_sp  admin   272 Oct  3 04:52 manager
[Cesars-Computer: webapps] $ cd ROOT
[Cesars-Computer: ROOT] $ ls -la
total 348080
drwxr-xr-x@ 4 cbs_sp  admin        136 Nov 13 12:53 .
drwxr-xr-x@ 7 cbs_sp  admin        238 Oct  3 04:52 ..
-rw-r--r--@ 1 cbs_sp  admin       6148 Nov 13 12:53 .DS_Store
-rw-r--r--@ 1 cbs_sp  admin  178206477 Nov  7 14:46 liferay-portal-6.1.1-ce-ga2-20120731132656558.war 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:18:48.060

Solved!

If anyone faced this same problem, just change the name of the .war to ROOT.war, and put it under webapps/ directory, it will work fine!

And If you are following the steps from Liferay site, as I did. At some point the tutorial will tell you to create a ROOT.xml, when you do that, just add the Context parent node, which, until the moment I wrote this, was not mentioned in the tutorial example's snippet.

**My ROOT.xml**:

```
[Cesars-Computer: apache-tomcat-7.0.32] $ cd conf/Catalina/localhost/
[Cesars-Computer: localhost] $ cat ROOT.xml 
<Context path="" crossContext="true">

</Context> 
```

Thanks and success to everyone,

# backbone.js - Backbone trigger two methods in one event

> ID：13363660
> 
> 赞同：20
> 
> 时间：2012-11-13T15:33:53.340
> 
> 标签：backbone.js, backbone-views, backbone-events

I am using Backbone and I have a view with events defined:

```
 ....
    events: {
        'click .search-button': 'setModelTerm',
        'change .source-select': 'setModelSourceId',
        'change .source-select': 'activateSource'
    },
    .... 
```

I would like to trigger two methods when the event `change .source-select` fires. The problem is that the last entry in the event object overrides the preceding entry.
How can I trigger two methods in one event?
(I am trying to prevent writing another method that calls those two methods)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-13T15:57:53.157

You can pass a wrapper function in your hash of events to call your two methods.

From [http://backbonejs.org/#View-delegateEvents](http://backbonejs.org/#View-delegateEvents)

> Events are written in the format `{"event selector": "callback"}`. The callback may be either the name of a method on the view, or a direct function body.

Try

```
events: {
    'click .search-button': 'setModelTerm',
    'change .source-select': function(e) {
        this.setModelSourceId(e);
        this.activateSource(e);
    }
}, 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-20T16:56:51.060

The only thing that is keeping you from adding the same event/selector pair is that `events` is a hash - jQuery can handle multiple bindings to the same element/event pair. Good news though, jQuery events allow you to namespace events by adding a `.myNamespace` suffix. Practically speaking, this produces the same results but you can generate many different keys.

```
var MyView = Backbone.View.extend({
  events: {
    'click.a .foo': 'doSomething',
    'click.b .foo': 'doSomethingElse'
    'click.c .foo': 'doAnotherThing', // you can choose any namespace as they are pretty much transparent.
  },

  doSomething: function() {
    // ...
  },

  doSomethingElse: function() {
    // ...
  },

  doAnotherThing: function() {
    // ...
  },
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:42:54.410

The events hash in your view is just a convenience "DSL" of sorts. Just bind your 2nd event manually inside `initialize`.

```
events: {
    'click .search-button': 'setModelTerm'
},
initialize: function () {
    _.bindAll(this);
    this.on('click .search-button', this.doAnotherThing);
} 
```

# yii - Yii：通过每个用户的站点配置最大化代码重用

> ID：13363661
> 
> 赞同：3
> 
> 时间：2012-11-13T15:33:56.817
> 
> 标签：yii

我为之工作的客户有一个用 Yii 编写的 CMS。目前，他们的一部分业务是定制 CMS 以满足每个客户的特定需求。大约 90% 的代码被重用，主要是通过从一个目录复制和粘贴到另一个目录。虽然我一直在从事这个项目，但我不得不多次将更改合并到共享代码库中。

这些站点中的所有或大多数都托管在同一台服务器上，并且似乎使用单一登录会更有意义，这会改变我们基于登录显示的功能。在某些情况下，这意味着覆盖整个或部分视图（例如，_form.php 可能会因客户而异），包括控制器和模型。大多数情况下，这意味着添加一个新控制器来实现为该客户端编写的一些功能。

我读过这里有一个前端和后端站点：[http ://www.yiiframework.com/wiki/63/organize-directories-for-applications-with-front-end-and-back-end-using- webapplicationend-behavior](http://www.yiiframework.com/wiki/63/organize-directories-for-applications-with-front-end-and-back-end-using-webapplicationend-behavior)但这似乎不合适（例如，我不希望每个人都使用不同的 start php 文件）

理想情况下，我会让用户登录并获得一个站点 ID，它将过滤共享 MVC 对象中的数据，并专门为他们添加那些，或者在必要时覆盖那些

直觉上，这样的事情似乎是有道理的：

共享控制器在这里：

```
/protected/controllers 
```

client1 的覆盖和添加到这里：

```
/protected/controllers/client1 
```

或者：

```
/protected/client1/controllers 
```

但我不确定如何让 Yii 以最有效和易于管理的方式做到这一点。这是要与 Yii 一起工作的东西，还是我以非故意的方式破坏它？如果它会起作用，那么完成它的最佳方法是什么，以便从现在起六个月后我清楚，或者一些随机的开发人员取代我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:44:29.400

你知道 RBAM 吗？

使用基于角色的访问，您可以以或多或少的粒度方式分析您的应用程序

# c# - 将 Datagrid 绑定到 ObservableCollection 在银光中

> ID：13363664
> 
> 赞同：0
> 
> 时间：2012-11-13T15:34:01.453
> 
> 标签：c#, data-binding, silverlight-5.0

我正在努力将 DataGrid 绑定到 SIlverlight 中的 ObservableCollection。

我非常简单的代码如下。它当前显示一个空白的 DataGrid。我已经完成了教程等，我确信我错过了一些非常基本的东西。

主页 XAML

```
<UserControl xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  x:Class="Tower.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot">
    <sdk:DataGrid Grid.Row="1" Margin="10" IsReadOnly="True" ColumnWidth="120" ItemsSource="{Binding Path=Tests, Mode=OneWay}" AllowDrop="True" />
</Grid> 
```

主页代码背后：

```
public partial class MainPage : UserControl
{
    public ObservableCollection<Test> Tests { get; set; }

    public MainPage()
    {
        InitializeComponent();

        DataContext = this;

        Tests = new ObservableCollection<Test>();
        Tests.Add(new Test() { Label = "Test1" });
        Tests.Add(new Test() { Label = "Test2" });
        Tests.Add(new Test() { Label = "Test3" });
        Tests.Add(new Test() { Label = "Test4" });
    }
} 
```

测试类：

```
public class Test : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged; 

    private String _Label;

    public String Label
    {
        get
        {
            return _Label;
        }
        set
        {
            _Label = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Label"));
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:40:30.987

您的代码中有两个问题 -

*   `You can only bind with property`而不是字段。所以先做`Test`财产。
*   其次，您需要将`DataContext to self for`绑定设置为有效。

    ```
    public partial class MainPage : UserControl
    {
       public ObservableCollection<Test> Tests { get; set; }

       public MainPage()
       {
           InitializeComponent();

           DataContext = this;

           Tests = new ObservableCollection<Test>();
           Tests.Add(new Test() { Label = "Test1" });
           Tests.Add(new Test() { Label = "Test2" });
           Tests.Add(new Test() { Label = "Test3" });
           Tests.Add(new Test() { Label = "Test4" });
       }
    } 
    ```

**XAML -**

```
<Grid x:Name="LayoutRoot">
    <sdk:DataGrid Grid.Row="1" Margin="10" IsReadOnly="True" ColumnWidth="120"
              ItemsSource="{Binding DataContext.Tests,
                RelativeSource={RelativeSource FindAncestor,
                 AncestorType= UserControl}}" AllowDrop="True" />
</Grid> 
```

注意 propertyName - 它应该是`Tests`而不是`tests`。这只是一个旁注，请遵循 Microsoft 的命名约定。属性名称的第一个字母应始终为大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:50:45.653

*   为了绑定到工作测试必须是一个公共属性。（我很惊讶地看到该财产需要公开，但没有它就无法运作）
*   要在绑定中引用属性，您必须
*   设置数据上下文，如 RV 建议或参考如下：

```
<Grid>
    <DataGrid ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=Tests}" />
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:39:35.947

不要忘记： **PUBLIC** ObservableCollection 测试 {get; 私人集}

# php - Symfony2 和 Doctrine2 ：用两个实体填充表单（一个复杂的场景）

> ID：13363668
> 
> 赞同：8
> 
> 时间：2012-11-13T15:34:12.733
> 
> 标签：php, symfony, doctrine-orm, entity, symfony-forms

我有 5 个实体：

*   用户，
*   人，
*   用户从属关系，
*   个人从属关系和
*   联系

这是架构：

![在此处输入图像描述](../Images/cee6e9e30697c3ec7c5da4741b9b4ee2.png)

**一些细节：**

*   WebUser 是在网站上注册的人。对于每个 Webuser，都有一个个人 ID。

*   一个人可以是网络用户、作者等。

*   每个 WebUser 有 0 个或多个从属关系。这些从属关系是由这个 WebUser 创建的，并链接到有能力的 UserAffiliations 中。

*   WebUser 还可以将他创建的从属关系链接到一个人（如果该人是作者），并且将填充实体 PersonAffiliation。

我现在正试图让网络用户有可能将隶属关系分配给作者（人）。为此，我有：

*   在实体人

    ```
    @ORM\OneToMany(targetEntity="PersonAffiliation", mappedBy="person", cascade={"persist", "remove"})

    protected $affiliations; 
    ```

*   在个人从属关系中

    ```
    @ORM\ManyToOne(targetEntity="Person", inversedBy="affiliations")
    @ORM\JoinColumn(name="person_id", referencedColumnName="id")

    protected $person;

    @ORM\ManyToOne(targetEntity="Affiliation", inversedBy="person_affiliations")
    @ORM\JoinColumn(name="affiliation_id", referencedColumnName="id")

    protected $affiliation; 
    ```

*   在实体用户中：

    ```
    @ORM\OneToMany(targetEntity="UserAffiliation", mappedBy="user")

    protected $affiliations;

    @ORM\ManyToOne(targetEntity="Person")
    @ORM\JoinColumn(name="person_id", referencedColumnName="id")

    protected $person; 
    ```

*   在实体 UserAffiliation

    ```
    @ORM\ManyToOne(targetEntity="User", inversedBy="affiliations")
    @ORM\JoinColumn(name="user_id", referencedColumnName="id")

    protected $user;

    @ORM\ManyToOne(targetEntity="Affiliation", inversedBy="user_affiliations")
    @ORM\JoinColumn(name="affiliation_id", referencedColumnName="id")

     protected $affiliation; 
    ```

在表格中，我正在执行以下操作：

```
$builder->add('affiliations', 'entity', array(
            'class' => 'SciForumVersion2Bundle:PersonAffiliation',
            'query_builder' => function($em) use ($person){
            return $em->createQueryBuilder('pa')->where('pa.person_id = :id')->setParameter('id', $person->getId());
        },
            'property'    => 'affiliation',
            'multiple' => true,
            'expanded' => true,
        )); 
```

但这一切都没有像我想的那样正常工作。

**说明**：当我尝试添加新的从属关系时，它只是为 WebUser 添加，我无法通过表单将其链接到作者（Person）。

你有关于如何解决这个问题的想法，或者可能有一个好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:28:23.490

这应该在 Entity1Controller.php 中处理：

```
public function createAction(Request $request)
{
  $securityContext = $this->get('security.context');
  $em = $this->getDoctrine()->getManager();
  $form = $this->createForm(new Entity1Type()
     ,null,array('attr' => array('securitycontext' => $securityContext)));
  $form->bind($request);

  if ($form->isValid()){
    $data = $form->getData();
    $entity1id = $data->getId();
    $entity2id = $data->getEntity2Id();
    $entity1medicaid=$data->getMedicaidID();
    $entity1=$em->getRepostiory('projectBundle:Entity1')->findOneById($entity1id);
    $entity2=$em->getRepository('projectprojectBundle:Entity2')->findOneById($entity2id);
    if (null === $entity1){
      $entity1=new entity1();
      $entity1->setEntity2id($entity2id);
      $entity1->setID($entity1id);
    }
    if (null === $entity2){
      $entity2=new entity2();
      $entity2->setID($entity2id);
    }
    $em->persist($entity1);
    $em->persist($entity2);
    $em->flush();
    return $this->redirect($this->generateUrl('entity1', array()));
  }

  return $this->render('Bundle:entity1:new.html.twig', array(
      'form'   => $form->createView()
     ,'attr' => array('securitycontext' => $securityContext
     )
  )
  );
} 
```

您可能还必须在关联映射中设置级联持久性。Entity1.yml：

```
project\projectBundle\Entity\Entity1:
    type: entity
    table: entity1
    repositoryClass: project\projectBundle\Entity\Entity1Repository
    fields:
        id:
            type: bigint
            id: true
            generator:
                strategy: AUTO
        property:
            type: string
            length: 255
            unique: true
    manyToMany:
        entity2:
            targetEntity: entity2
            mappedBy: entity1
            cascade: ["persist"] 
```

从理论上讲，symfony 将使 entity2 处于底层，从而使第二个 if null 子句变得不必要，但这总是困扰着我，所以我更喜欢明确地这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:24:02.173

好吧，如果此表单将集合绑定到 WebUser 实体是因为您将此类类的对象传递给 Controller 中的表单创建，则意味着：

```
$webUser = new WebUser();

$this->createForm(new SubmissionAffiliationFormType(), $webUser); 
```

或者您通过不设置 DefaultOptions 并明确告诉它必须绑定到的 data_class 将使用哪个类的决定委托给 Symfony Forms：

```
class SubmissionAffiliationFormType extends AbstractType
{

    //...

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Acme\DemoBundle\Entity\Person',
        );
    }
} 
```

# javascript - Javascript 日期在 iOS 上无效

> ID：13363673
> 
> 赞同：69
> 
> 时间：2012-11-13T15:34:20.513
> 
> 标签：javascript, android, ios, cordova

我正在开发一个基于 Phonegap 的 iOS 应用程序，该应用程序已经为 Android 完成。以下几行适用于 Android，但不适用于 iOS。为什么？

```
var d = new Date("2015-12-31 00:00:00");
console.log(d.getDate() + '. ' + d.getMonth() + ' ' + d.getFullYear(); 
```

安卓的结果：

```
31.11 2015 
```

在 iOS 上的结果：

```
NaN. NaN NaN 
```

差异来自哪里？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-11-13T15:41:25.537

您的日期字符串不是指定使用的格式`new Date`。规范中唯一的格式是[ISO-8601 的简化版本](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)，在 ES5 (2009) 中添加。你的字符串不是那种格式，但它真的很接近。将其更改为规范中未包含但普遍支持的格式也很容易

四种选择：

*   使用即将推出的`Temporal`功能（现在处于第 3 阶段）
*   指定格式
*   几乎普遍支持的未指定格式
*   自己解析

### 使用即将推出的`Temporal`功能

截至 2021 年 8 月的此更新，该[`Temporal`提案](https://github.com/tc39/proposal-temporal)处于第 3 阶段。您可以使用它来解析您的字符串，将其视为 UTC 或本地时间：

将字符串视为 UTC：

```
// (Getting the polyfill)
const {Temporal} = temporal;

const dateString = "2015-12-31 00:00:00";
const instant = Temporal.Instant.from(dateString.replace(" ", "T") + "Z");
// Either use the Temporal.Instant directly:
console.log(instant.toLocaleString());
// ...or get a Date object:
const dt = new Date(instant.epochMilliseconds);
console.log(dt.toString());
```

```
<script src="https://unpkg.com/@js-temporal/polyfill/dist/index.umd.js"></script>
```

或将其视为当地时间：

```
// (Getting the polyfill)
const {Temporal} = temporal;

const dateString = "2015-12-31 00:00:00";

console.log("Parsing as local time:");
const tz = Temporal.Now.timeZone();
const instant = tz.getInstantFor(dateString.replace(" ", "T"));
console.log(instant.toLocaleString());
const dt = new Date(instant.epochMilliseconds);
console.log(dt.toString());
```

```
<script src="https://unpkg.com/@js-temporal/polyfill/dist/index.umd.js"></script>
```

`Temporal`不存在下面提到的指定日期/时间字符串格式在历史上没有指定时区的问题。

### 指定格式

如果您将空格更改为 a `T`，您将符合规范：

```
var dateString = "2015-12-31 00:00:00";
// Treats the string as local time -- BUT READ BELOW, this varied
var d = new Date(dateString.replace(" ", "T"));
console.log(d.toString());
```

（我假设您实际上并没有使用字符串文字，因此`replace`调用。）

为了在旧浏览器中进行可靠的时区处理，您还需要附加一个`Z`（用于 GMT/UTC）或一个时区指示符（`+`/ `-` `HH:MM`），因为在 ES5 中错误指定了没有它们的字符串处理，在 ES2015 中进行了更新，然后在 ES2016 中进一步更新。当前版本的现代浏览器现在遵循规范，其中说：

*   如果字符串上有时间但没有时区指示符，则以本地时间解析字符串
*   如果字符串上没有时间且没有时区指示符，则以 UTC 解析字符串

（[ES5 表示](https://262.ecma-international.org/5.1/#sec-date-time-string-format)始终默认为[UTC。ES2015 表示](https://262.ecma-international.org/6.0/#sec-date-time-string-format)始终默认为本地时间[。ES2016](https://262.ecma-international.org/7.0/#sec-date-time-string-format)是定义当前行为的地方。从那以后它一直很稳定。）

所以最好包含一个时区指示器，特别是如果您必须支持旧版浏览器。请注意，它必须是`Z`(UTC) 或`+`/ `-` `HH:MM`；`CST`不允许使用诸如此类的缩写，因为它们没有标准。这是一个 UTC 示例：

```
var dateString = "2015-12-31 00:00:00";
// Treat the string as UTC
var d = new Date(dateString.replace(" ", "T") + "Z");
console.log(d.toString());
```

### 几乎普遍支持的未指定格式

规范中没有第二种格式，但几乎得到了普遍支持，并且已经存在了很长时间：`YYYY/MM/DD HH:MM:SS`，它被解释为本地时间。所以：

```
var dateString = "2015-12-31 00:00:00";
// Treats the string as local time
var d = new Date(dateString.replace(/-/g, "/"));
console.log(d.toString());
```

不过，这又是未指明的行为，所以请谨慎购买。但它至少可以在 IE8+（可能更早）、Chrome 和其他任何使用 V8 JavaScript 引擎、Firefox 和 Safari 的平台上运行。

### 自己解析

自己解析该字符串也很容易。使用 ES2020+ 特性：

```
function parseDate(str) {
    const [dateparts, timeparts] = str.split(" ");
    const [year, month, day] = dateparts.split("-");
    const [hours = 0, minutes = 0, seconds = 0] = timeparts?.split(":") ?? [];
    // Treats the string as UTC, but you can remove the `Date.UTC` part and use
    // `new Date` directly to treat the string as local time
    return new Date(Date.UTC(+year, +month - 1, +day, +hours, +minutes, +seconds));
}

const dateString = "2015-12-31 00:00:00";
const d = parseDate(dateString);
console.log(d.toString());
```

或者只有 ES5 级别的功能（因为问题来自 2015 年）：

```
function parseDate(str) {
    var parts = str.split(" ");
    var dateparts = parts[0].split("-");
    var timeparts = (parts[1] || "").split(":");
    var year = +dateparts[0];
    var month = +dateparts[1];
    var day = +dateparts[2];
    var hours = timeparts[0] ? +timeparts[0] : 0;
    var minutes = timeparts[1] ? +timeparts[1] : 0;
    var seconds = timeparts[2] ? +timeparts[2] : 0;
    // Treats the string as UTC, but you can remove the `Date.UTC` part and use
    // `new Date` directly to treat the string as local time
    return new Date(Date.UTC(year, month - 1, day, hours, minutes, seconds));
}

var dateString = "2015-12-31 00:00:00";
var d = parseDate(dateString);
console.log(d.toString());
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T15:38:21.050

我不能告诉你为什么。可能是因为 iOS 不像 Android 那样支持 Javascript Date 函数，或者支持不同的格式？

但我可以给你一个解决方法：

```
var s = "2015-12-31 00:00:00".split(" ")[0].split("-"),
    d = new Date( s[0], s[1], s[2], 0, 0, 0 );

console.log(d); 
```

* * *

```
var s = "2015-12-31 00:00:00".replace(/[ :]/g, "-").split("-"),
    d = new Date( s[0], s[1], s[2], s[3], s[4], s[5] );

console.log(d); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-23T17:03:17.603

适用于 IOS 和 Android 并在不需要时避免字符串操作的解决方案是

```
let fullDate = "1991-03-29 00:00:00";
let date = new Date(fullDate);

// In case its IOS, parse the fulldate parts and re-create the date object.
if(Number.isNaN(date.getMonth())) {
  let arr = fullDate.split(/[- :]/);
  date = new Date(arr[0], arr[1]-1, arr[2], arr[3], arr[4], arr[5]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-16T18:09:03.680

我很难解决这个问题，我终于找到了一个更简单的解决方案并使用[了 moment.js](https://momentjs.com)。您只需声明每个设备中的日期和工作方式即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T01:20:02.833

如果有人还在寻找它。

在 IE、Safari、IOS-FF、IOS-Safari 等中为我工作。

```
getIOSSaveDateObj = function(dateString){
    if(dateString.indexOf('-') > 0){
        var arr = dateString.split(/[- :]/);
        var date = new Date(arr[0], arr[1]-1, arr[2], arr[3], arr[4], arr[5]);
    }else{
        var arr = dateString.split(/[. :]/);
        var date = new Date(arr[2], arr[1]-1, arr[0], arr[3], arr[4], arr[5]);
    }
    return date;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-13T15:38:28.323

尝试`var d = new Date("2015/12/31 00:00:00");`为我工作。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-09-13T12:48:48.937

还

```
var d = new Date("2015/12/31T00:00:00"); 
```

为我工作:)

谢谢@dda

# html - 我想渲染从数据库读取的 html 并显示结果，而不是实际的 html

> ID：13363675
> 
> 赞同：1
> 
> 时间：2012-11-13T15:34:26.250
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, ckeditor

我在我的 Intranet 中使用 ckeditor。我用它来保存格式化的文本，例如链接。

问题是，我在 ckeditor 源中拥有的​​是

```
<p>
this is the new <a href="http://www.google.com">test</a> we need to run.</p> 
```

我在编辑器中看到的是

```
test(as a link) 
```

保存在数据库中的是

```
 &lt;p&gt;
    this is the new &lt;a href="http://www.google.com"&gt;test&lt;/a&gt; we need to run.&lt;/p&gt; 
```

哪个是对的。

但是当我想在ckeditor上编辑它时，我看到的是

```
<p> <a href="http://www.google.com">test</a></p> 
```

我看到的来源是

```
&lt;p&gt;
        &lt;a href="http://www.google.com"&gt;test&lt;/a&gt;&lt;/p&gt; 
```

我希望在编辑时看到完全相同的内容。

另一件事是，我使用 Html.Raw 在我的索引中显示它，但它向我显示了 html。我想看看渲染的 html。

所以，如果我保存

```
<p>
    this is the new <a href="http://www.google.com">test</a> we need to run.</p> 
```

我想看看

```
this is the new test(as link) we need to run 
```

并不是

```
<p>
        this is the new <a href="http://www.google.com">test</a> we need to run.</p> 
```

有任何想法吗？？瑞马丁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:48:17.000

您的问题是不了解 htmlentities。

## 编码 HTML

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

## 解码 HTML

[http://www.php.net/manual/en/function.html-entity-decode.php](http://www.php.net/manual/en/function.html-entity-decode.php)

## 示例用法

```
<?php

   $orig = "I'll \"walk\" the <b>dog</b> now";

   $a = htmlentities($orig);
   $b = html_entity_decode($a);

   echo $a; // I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt; now
   echo $b; // I'll "walk" the <b>dog</b> now

?> 
```

# 编辑（添加 asp.net 等效项）

```
Server.HtmlEncode("<your string>");

Server.HtmlDecode("&lt;your string&gt;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T08:19:21.483

试试这个代码：

```
<%: Html.Raw(HttpUtility.HtmlDecode(YourHTMLStringHere)) %> 
```

它只会渲染 HTML 代码

# mime-types - 如何更改附件 MIME 类型

> ID：13363681
> 
> 赞同：1
> 
> 时间：2012-11-13T15:34:44.490
> 
> 标签：mime-types, xpages, attachment, lotus-domino

我正在使用 XPages FileUpload 控件将一些附件（.xml 文件）保存到文档中。默认情况下，Domino 使用“text/xml”MIME 类型保存 .xml。但是我需要它是“应用程序/xml”。设置 FileUpload 控件的“MIME 类型”选项无济于事，因为 Domino 可以识别文件类型并对其进行更改。

有没有办法完成这项任务并手动将附件 MIME 类型切换为自定义类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:03:56.723

你可能想看看“另一端”。与其在保存时尝试更改 mime 类型（我实际上怀疑 Domino 确实保存了！！！），不如更改检索时提供文件的方式。不要使用内置 URL 来访问它，而是使用 XAgent。在那里，您可以将 MIME-Type 标头设置为您心中的愿望。

**编辑**：
偷偷摸摸的方式：不要在你的应用程序中做任何事情。与您的管理员交谈。在网站配置中，您可以指定规则。提供 XML 文件的模式并覆盖配置中的 mime-type 标头。管理文档包含[所有详细信息](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.help.domino.admin85.doc%2FH_WEB_SITE_RULES.html)。您想使用“自定义标题”

# php - 我可以使用 Zend Dom Query 来查询其他 html 属性，例如 ALT

> ID：13363687
> 
> 赞同：0
> 
> 时间：2012-11-13T15:35:05.113
> 
> 标签：php, zend-framework, zend-dom-query

使用 Zend Dom Query 我想搜索**HTML**以查找**某些属性。**

以下图为例。

```
<img id="active-main-image"  src="/images/example.jpg" alt="Image 1234" class="product-image"> 
```

而不是使用`$this->_xhtml->query('img#active-main-image');`我想通过使用**alt**属性来查找图像。

伪-> `$this->_xhtml->query('img alt Image 1234');`

我可以理解为什么这种方法在传统上并不流行，但是，当只配备页面上某个图像的**Alt 值时，我别无选择。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:41:57.830

[Zend_Dom_Query](http://framework.zend.com/manual/1.12/en/zend.dom.query.html)有一个`queryXpath`方法可以接受有效的 xpath 查询。

未经测试，但这应该可以工作：

```
$dom = new Zend_Dom_Query($html);
$img = $dom->queryXpath("//img[@alt='Image 1234']"); 
```

# python - Python使用信号警报来限制函数执行时间dosnt总是停止方法

> ID：13363688
> 
> 赞同：0
> 
> 时间：2012-11-13T15:35:05.693
> 
> 标签：python, selenium-webdriver

我需要限制函数执行时间，所以我跟着[Josh Lee 回答](https://stackoverflow.com/questions/366682/how-to-limit-execution-time-of-a-function-call-in-python/601168#601168)

```
try:
    with time_limit(10):
        long_function_call()
except TimeoutException, msg:
    print "Timed out!" 
```

其中 long_function_call() 是一个 selenium webdriver 函数，它与页面交互并执行一些操作。

```
def long_function_call(self, userName, password):
    driver = self.initDriver()
    try: 
         driver.get("https://yyyy.com")
         time.sleep(2)
         if not self.isHttps(driver.current_url):
              isHttps = False             
         driver.find_element_by_id("i015516").clear()
         time.sleep(5)
         if 'https://yyy.com' not in driver.current_url:
             self.raiseFailedToLogin('yyy')                    
    except Exception as e:
        self.raiseException('yyy',e)
    finally:
        driver.close()
        driver.quit()
    return 'yyyy' 
```

在大多数情况下，当函数执行时间超过信号超时时，发送信号并停止方法，但在某些情况下，方法超过超时并没有停止。似乎 selenium 挂了。（firefox 是打开的，没有做任何事情）。

在这些情况下，我尝试暂停调试器，但暂停并没有告诉我它挂在哪里。如果我关闭 selenium firefox 而不是在此方法上停止调试暂停：

```
_read_status [httplib.py:366]   
begin [httplib.py:407]  
getresponse [httplib.py:1030]   
do_open [urllib2.py:1180]   
http_open [urllib2.py:1207]
def _read_status(self):
    # Initialize with Simple-Response defaults
    line = self.fp.readline()
    if self.debuglevel > 0:  ################Hang here 
```

知道为什么在某些情况下用硒发出警报信号不起作用吗？（我不认为他们抓住中断）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:04:49.457

这是您面临的一个非常有趣的问题。我创建了一个示例，可以演示您在使用`with time_limit`. 如果您运行下面的代码，您可能会期望在 1 秒后 a`TimeoutException`将被引发，然后退出 python 并且正在运行的线程以及 xterm 应该都退出。一秒钟后会发生什么，`TimeoutException`然后您会看到“超时！” 出现在终端中，但线程和 xterm 都将继续执行。这可能是您在使用 selenium 时所面临的场景类型。我不知道 selenium 是如何实现的，但是必须以类似于示例中 xterm 的方式生成 firefox 进程。

**简单的方法**

```
import time, os, sys, subprocess, threading

def worker():
    for i in range(30):
        print i
        time.sleep(0.1)

try:
    with time_limit(1):
        threading.Thread(target=worker).start()
        subprocess.check_output('/usr/bin/xterm')
except TimeoutException, msg:
    print "Timed out!" 
```

这个问题的一个潜在解决方案是下面的代码。它会杀死这个python程序的所有孩子，在这种情况下会杀死xterm，然后它会杀死自己。这当然是一种强有力的退出方式，但可以保证一切都在超时时结束。

**杀光他们**

```
subprocess.call('pkill -P %s' % os.getpid(), shell=True)
subprocess.call('kill -9 %s' % os.getpid(), shell=True) 
```

考虑到您在下面的评论，另一种方法是让另一个线程在主线程中的操作超过指定超时时执行终止操作。这是具有示例调用的该方法的实现。

**在超时时监视和杀死的线程**

```
import time, os
from subprocess import check_output, call
from threading import Thread
from contextlib import contextmanager

def wait_thread(active, duration):
    start = time.time()
    while active[0] and time.time() - start < duration:
        time.sleep(0.1)
    if active[0]:
        call('pkill -P %s' % os.getpid(), shell=True)
        call('kill -9 %s' % os.getpid(), shell=True)

@contextmanager
def wait(duration):
    active = [True]
    Thread(target=wait_thread, args=(active, duration)).start()
    yield
    active[0] = False

with wait(1):
    time.sleep(0.5)
    print 'finished safely before timeout'
with wait(1):
    call('/usr/bin/xterm') 
```

# excel - Excel 脚本超链接提取

> ID：13363690
> 
> 赞同：0
> 
> 时间：2012-11-13T15:35:14.087
> 
> 标签：excel, hyperlink

> **可能重复：**
> [使用 VBA 从多个单元格中提取超链接](https://stackoverflow.com/questions/11289664/extracting-the-hyperlink-from-multiple-cells-with-vba)

[已修复] 自己排序 :)

> 对于 i = 3 总计
> 
> ```
> Cells(i, 11) = Cells(i, 1).Hyperlinks.Item(1).Address
> Cells(i, 12) = Cells(i, 2).Hyperlinks.Item(1).Address
> 
>  Next i 
> ```

我从未在 excel 中编写过任何脚本，因此感谢您的帮助。

我想从第 1 列和第 2 列中提取超链接地址 (URL)。然后将它们（不是超链接）粘贴到另一列中（这样我就可以使用链接导出到 CSV）

我想在循环中做这样的事情，但它不起作用！

```
ActiveSheet.Cells(i, 11).Value = ActiveSheet.Cells(i, 1).Hyperlinks.Item(1).Address

ActiveSheet.Cells(i, 12).Value = ActiveSheet.Cells(i, 2).Hyperlinks.Item(1).Address 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:18:15.447

这是一个关于如何获取工作表前两列中的所有超链接并将它们写入下一个工作表的示例。

```
Sub getHyperlinks()
'used to keep track of where we are at when writing to the second sheet
Dim iWriteRow As Long
'used to hold how many columns to look through
Dim numberOfCols As Long
numberOfCols = 2
'set initial position
iWriteRow = 1

'variable used in looping through the hyperlinks
Dim h As Hyperlink
'loop through all hyper links on the sheet
For i = 1 To numberOfCols
    For Each h In ActiveWorkbook.Sheets(1).Columns(i).Hyperlinks
        'write them to the next sheet
        ActiveWorkbook.Sheets(2).Cells(iWriteRow, i).Value = h.Address
        'add 1 to our counter
        iWriteRow = iWriteRow + 1
    Next
    iWriteRow = 1
Next i
End Sub 
```

# magento-1.7 - 集成 Magento 模块以收取额外的结帐费用

> ID：13363693
> 
> 赞同：1
> 
> 时间：2012-11-13T15:35:23.883
> 
> 标签：magento-1.7

我是 Magento 开发的新手，并且很难集成此处解释和列出的模块：http: [//turnkeye.com/blog/magento-development-add-total-row-checkout/](http://turnkeye.com/blog/magento-development-add-total-row-checkout/)

我知道演练中有一些不一致之处，我相信我已经解释了这些，但仍然无法使其正常工作。到目前为止我做了什么：

-创建了他们概述的所有文件和配置文件：

> /magento/app/code/local/Turnkeye/Insurance/RW/Adminhtml/Block/Sales/Order/Totals.php /magento/app/code/local/Turnkeye/Insurance/RW/Adminhtml/Block/Sales/Order/Creditmemo /Totals.php /magento/app/code/local/Turnkeye/Insurance/RW/Adminhtml/Block/Sales/Order/Invoice/Totals.php /magento/app/code/local/Turnkeye/Insurance/etc/config.xml /magento/app/code/local/Turnkeye/Insurance/Model/Total/Insurance/Quote.php /magento/app/code/local/Turnkeye/Insurance/Model/Total/Insurance/Creditmemo.php /magento/app/code /local/Turnkeye/Insurance/Model/Total/Screen/Invoice.php

- 创建了一个帮助文件：类 Turnkeye_Insurance_Helper_Data extends Mage_Core_Helper_Abstract { }

完成所有这些操作后，尝试将产品添加到购物车时出现错误：地址总模型应该从 Mage_Sales_Model_Quote_Address_Total_Abstract 扩展。不幸的是，我已经达到了我所知道的极限。对我可能犯的任何错误的任何帮助或任何想法可能来自该错误的任何想法，那就太棒了！

# c++ - 向量的最大值

> ID：13363696
> 
> 赞同：1
> 
> 时间：2012-11-13T15:35:28.000
> 
> 标签：c++, vector

我有一个双精度向量，我需要在其中获取最大值，然后将值存储在一个整数变量中，以便我可以比较该值。到目前为止我有这个：

```
vector<double>::iterator result;

result = max_element(zerocrossdata.begin(), zerocrossdata.end()); 
```

如何将值放在变量中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:37:05.827

该`std::max_element()`函数返回一个指向向量中最大元素的迭代器。

因此，要获得实际的最大值，您只需要像这样取消引用返回的迭代器：

```
double max_value = *result; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:58:02.567

正如其他人已经说过的那样，您需要使用 * 运算符来尊重迭代器：

```
int max_value = *result; 
```

但是，请注意，此操作的结果将是**double**，而不是 int。在几乎所有平台上，double 都是一个 8 字节的浮点值。您的结果可能超出 int（通常是带符号的 4 字节整数）可以支持的值范围。这可能会导致意外行为，并且您可能（或可能不会）收到有关它的编译器警告，具体取决于您的编译器和设置。

# nhibernate - DDD with L2S or NHibernate... 关于业务对象的持久化数据

> ID：13363699
> 
> 赞同：0
> 
> 时间：2012-11-13T15:35:38.793
> 
> 标签：nhibernate, linq-to-sql, domain-driven-design

我一直在从事我的第一个实验性 DDD 项目。这个项目的目的是让我对整个 DDD 概念有一个感觉。奇怪的是，正如我所读的那样，它是更困难的部分，我发现无处不在的语言“翻译”比整个架构本身更容易，因此我的问题是。

我只在我过去的项目中使用过 L2S（Linq to SQL）。我的应用程序本身不是 DDD，但它们确实有一个业务对象（除了 linq to sql 生成的那些），我有一个用于该对象的存储库。例如，

```
public class Customer
    {
       public ID {get; set;}
       public string Fullname {get; set;}
       public Address address {get; set;}
       public List<Invoices> invoices {get; set;}
    } 
```

现在，在 L2S 中，我必须将这个类分解为三个不同的查询并将它们提交到数据库中。我有一个映射器（扩展方法）让我的生活“更轻松”。像这样的东西。

```
public void AddCustomer(Customer customer)
{
// This customer i am passing is the business object
// For the sake of demo, i am going to avoid the whole attach(), check for ID, etc.
// I think you are going to get what i am trying to do here.

using{ var context = new L2SContext())
{
context.CustomerEntity.InsertOnSubmit(customer.ToEntity());
context.AddressEntity.InsertOnSubmit(customer.Address.ToEntity());
context.InvoicesEntity.InsertAllOnSubmit(customer.Invoices.ToEntity());
}
} 
```

行。后来我在上下文中有一个 SubmitChanges() 方法，我实际上将数据保存到数据库中。

现在，我对 NHibernate 知之甚少，几乎一无所知。**但是看看一些例子，我怀疑 NHibernate 会为你处理所有的故障（因为映射？）所以你只需要传递 Customer，它会做剩下的事情。那是对的吗？**

如果我真的从中受益匪浅，我愿意学习 NHibernate。

感谢您查看我的问题。

编辑：你听说过 Codesmithtools.com 吗？他们有一个用于 LinqToSql、EF、NHibernate 的框架生成器。有人试过他们的 NHibernate 吗？我已经为 LinqToSql 使用了 PLINQO，但是它们给我认为不必要的类添加了很多废话。几乎这些类都适合用于糟糕的程序员，如业务类、DTO、ViewModels 等。多合一 :)。糟糕的。但是，他们真的很擅长生成所有这些。我必须为此给予他们 KUDOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:13:13.440

NHibernate over Linq-2-SQL for DDD 的几点：

*   通过可达性实现持久性。这也可以称为级联保存，但它允许您保留客户实体而无需显式插入它们。这非常适合 DDD，因为 Customer 将是一个聚合，而 Address 将是一个值对象。在 NHibernate 中，值对象表示为组件映射，实体和聚合表示为类映射。聚合应该作为单个单元进行持久化和检索，NHibernate 允许您这样做。

*   执着无知。NHibernate 允许您将您的类设计为纯 POCO，而无需引用其他库。据我所知，L2S 需要一个特殊的集合类型，并且需要明确的外键作为属性。请注意，即使使用 NHibernate[持久性无知也是一种理想，而不是目标](http://gorodinski.com/blog/2012/08/10/toward-persistence-ignorance-with-nhibernate-in-domain-driven-design/)。

正如其他人所指出的，NHibernate 有一个陡峭的学习曲线。例如，[延迟加载可能会出现问题](http://gorodinski.com/blog/2012/06/16/orm-lazy-loading-pitfalls/)。但总的来说还是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:06:51.733

你的问题是开放式的。很明显，您现在了解 Linq-2-SQL 的工作原理。正如第一条评论所说：是的，NHibernate 可以提供级联保存。但这只是开始……请首先检查这个问题和答案（有趣的不止一个）：

[NHibernate 与 LINQ to SQL](https://stackoverflow.com/questions/26971/nhibernate-vs-linq-to-sql)

我`NHibernate`在我的私人项目中使用作为第一选择。如果可能的话，我更喜欢在任何项目中使用它。但是，我想根据我的经验再添加一个*NOTE*：

最大的好处是，一旦您学习并使用了，使用其他**ORM**工具`NHibernate`就不会那么困难了。在某些项目中，您将（我确实）在某些 LLBL 生成器上遇到实体框架......，并且*（虽然我们可以责怪与之相比**缺少某些东西；）*我们可以快速：***`NHibernate`***

 ***   了解领域，因为**ORM**强制实体/领域驱动的实现
*   使用标准模式

希望它有所帮助并祝你好运`NHibernate`。学习曲线可能比预期的要慢，但好处等待着。**

# sublimetext2 - Sublime Text 错误地解析代码

> ID：13363700
> 
> 赞同：1
> 
> 时间：2012-11-13T15:35:55.533
> 
> 标签：sublimetext2

在 C++ 源文件中，我们的编码标准要求我们声明如下函数：

```
void            InputJournalManager::RecordFocusChange
(
WindowInfo * windowP, 
int reason
)
    {
    ...
    } 
```

当我这样做时，按符号导航将无法将其作为跳转到的方法。问题似乎是在单独的行上声明了参数列表。此外，似乎不支持解析 C++/CLI，因为任何采用 ref 类（或返回一个）的东西都将无法被识别。有什么办法可以解决这个问题吗？

# html - HTML/CSS 中的平铺布局

> ID：13363701
> 
> 赞同：0
> 
> 时间：2012-11-13T15:36:00.247
> 
> 标签：html, css

对于比我更了解 CSS 的人来说，这可能是小菜一碟。

我正在尝试创建一个 CSS 布局，其中包含许多我想像图块一样排列的元素。每个图块将具有相同的宽度（尽管高度不同），因此会自然地将它们自己排列成列，如下所示：

[http://jsfiddle.net/SVzWh/](http://jsfiddle.net/SVzWh/)

我想知道如何使同一行中的每个元素都具有相同的高度。我不知道那个高度是多少，因为图块的内容（有点）是动态的。理想情况下，瓷砖会像小提琴中所示流动，这样在更宽的屏幕上会有更多的列，在更窄的屏幕上会有更少的列。可能有几十个瓷砖。

这是小提琴中显示的代码：

HTML的一个点：

```
<ul>
  <li class="e">Element 1</li>
  <li class="e">Element 2 Taller item</li>
  <li class="e">Element 3</li>
  <li class="e">Element 4</li>
  <li class="e">Element 5</li>
  <li class="e">Element 6</li>
  <li class="e">Element 7</li>
  <li class="e">Element 8</li>
</ul> 
```

还有一点 CSS：

```
.e {
  display: inline-block;
  border: 1px solid black;
  margin: 5px;
  padding: 3px;
  width: 120px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:39:26.000

查看[JQuery masonry](http://masonry.desandro.com/)，它是一个 JQuery 插件，可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:16:59.647

考虑到您的问题，我认为 jQuery 肯定是要走的路。我做了一点搜索，发现以下内容：

[http://css-tricks.com/equal-height-blocks-in-rows/](http://css-tricks.com/equal-height-blocks-in-rows/)

粗略地看，它似乎确实可以帮助您实现目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T16:35:57.853

我最终使用了这个 JS 脚本的稍微修改的版本：

[https://www.assembla.com/code/raysafedemo/subversion/nodes/WebSite/Scripts/jQuery.equalHeights.js?rev=107](https://www.assembla.com/code/raysafedemo/subversion/nodes/WebSite/Scripts/jQuery.equalHeights.js?rev=107)

由 Scott Jehl、Todd Parker 和 Maggie Costello Wachs 撰写

# elasticsearch - 如何将 2 个匹配查询加入到弹性搜索的查询中？

> ID：13363709
> 
> 赞同：6
> 
> 时间：2012-11-13T15:36:34.440
> 
> 标签：elasticsearch

我想查询`user_id`is`'1'`和`name`is的数据`'John'`。很容易写一个常用的SQL：

```
select * from t where user_id = '1' and name = 'John'; 
```

但是对elasticsearch进行查询对我来说并不容易。

首先，我查询了`user_id`：

```
{
  "query" : {
    "match" : {
      "user_id" : "1"
    }
  }
} 
```

结果是我所期望的。

然后，我查询了`name`：

```
{
  "query" : {
    "match" : {
      "name" : "John"
    }
  }
} 
```

它也运作良好。

但我无法使用 and 操作查询加入 2 个条件。如何将这两个匹配查询合并为一个使用和操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T15:42:20.293

您需要的是一个[bool 查询](http://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-bool-query.html)，您可以在其中放置所有单个查询：

*（我无法测试查询，它可能是错误的，但 bool-query 是您问题的答案）*

```
{
    "bool" : {
        "must" : [{
            "match" : {
                "user_id" : "1"
            },
            "match" : {
                "name" : "John"
            }
        }]
    }
} 
```

# java - Java 分隔符阅读器

> ID：13363712
> 
> 赞同：0
> 
> 时间：2012-11-13T15:36:52.990
> 
> 标签：java, delimiter

我有一个以冒号分隔的文本文件，其中包含结构化的分组数据。该`People`组包含人们的姓名，后跟他们的年龄，用冒号分隔。如何解析文本并根据年龄对人进行分组？

结构如下：

```
Group.txt
Age:10:20:30:40:
Group:G1:10:G2:30:G3:20:G4:40:
People:Jack:10:Tom:30:Dick:20:Harry:10:Paul:10:Peter:20:
People:Mary:20:Lance:10: 
```

我想显示这样的东西：

```
G1 Jack Harry Paul Lance
G2 Dick Peter Marry
G3 Tom
G4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:49:30.727

我建议首先创建一个`Map`具有相应年龄的所有组。

为此，您可以使用 a`Regex`来获取`alphanumeric`左侧和`digit`右侧的字符串，以获取以 .`colon`开头的行`Group`。

我怀疑这些行来自您的文件。所以，首先你需要检查你的行是否以`Group`. 然后在该行上应用以下正则表达式： -

```
"([A-Za-z0-9]+):(\\d+)"  // Matches `G1:10`, `G2:30`, ... 
```

然后将所有匹配字符串的`group 1`和添加到`group 2``Map<String, Integer>`

现在，对于以 开头的其他行`People`，应用类似的正则表达式，但仅`alphabetic characters`在 的左侧`colon`，然后`group`从已创建的特定年龄中获取`Map`。

```
"([A-Za-z]+):(\\d+)"  // Matches `John:22` 
```

可能这会让你开始。

* * *

**更新 ：**

根据您的最新编辑，我建议创建一个`Group`具有 3 个属性的类：

```
class Group {
    private String groupName;
    private int age;
    private List<String> people;
} 
```

而不是创建一个`Map<String, Integer>`，创建一个`Map<Integer, Group>`。你的工作会更轻松。`Integer`是`age`。

所以，当你得到一个`Person`特定的 时，从那个获取`age`组对象，并用那个人更新那个。`Map``age``List<String>``group object`

请尝试一下，看看您是否可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:10:48.853

我会把这个任务分解成碎片。首先，找到所有组：

```
/^Group:(G[0-9]+:[0-9]+)*/ 
```

从该行获取第一个捕获组，在 上拆分每个匹配`:`项，您将每个组的名称映射到相应的年龄。

接下来，与人类似的事情：

```
/^People:([A-Za-z]+:[0-9]+)*/ 
```

像以前一样匹配、分组和拆分，现在您将每个人映射到他或她的年龄。从那里，您所要做的就是为每个年龄组制作一个桶，按年龄对桶进行排序，然后将每个人放在适当的桶中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:13:04.040

创建一个包含个人信息的新类。（这个会起作用，但为了保持简短，会破坏一堆好的实践。阅读 POJO 以获取有关如何将属性设为私有并添加访问器方法的更多详细信息，如果您愿意的话。这是一个不同的讨论。

```
public class Person { public String name; public int age; } 
```

然后，您可以使用这个新类将人们的信息存储到您以后可以访问的列表中。

当您遍历文件时，当您找到以 开头的行时，`People:`您可以使用以下代码对其进行解析：

```
 List<Person> people = new ArrayList<Person>();
    String str = "People:Mary:20:Lance:10:";  // Replace with the line you read from the file
    Pattern p = Pattern.compile("(?:([^:]*):(\\d*):)");
    Matcher m = p.matcher(str);
    while(m.find()) {
        for(int i=1; i<=m.groupCount(); i+=2) {
            Person p = new Person();
            p.name = m.group(i);
            p.age = new Integer(m.group(i+1));
            people.add(p);
        }
    }

// At this point, all your people are store into the list. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:43:51.397

[您可以使用StringTokenizer](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)拆分您的线路，然后创建一个实现[Comparable Interface](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的“People”类。

这些至少应该让你开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:44:27.697

您可以[拆分](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)字符串：

```
String[] items = row.split(":");

if (items[0].equals("Age")) {
  // items[1] and onwards consists of Ages
}
if (items[0].equals("Group")) {
  // items[1] and onwards consists of group name/numbers
} 
```

等等

# python - Xor Hex/ASCII/转换问题

> ID：13363719
> 
> 赞同：1
> 
> 时间：2012-11-13T15:37:17.810
> 
> 标签：python, hex, xor

所以我有一个问题，我想对各种十六进制字符串进行异或运算，将它们转换为常规的英文字符串，然后将它们重新转换为十六进制字符串。但是，我对以任何有意义的方式使用 hex 或 xor 并不十分熟悉。在执行按位异或运算之前，是否需要将十六进制转换为二进制或 unicode？如果是这样，完成后如何检索十六进制值？我一直在研究使用 str.encode('hex') 和 str.decode('hex')，但我不断收到错误消息，说我使用的是非十六进制字符。简而言之，我完全迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:45:36.430

Python 有一个用于整数的 XOR 运算符：`^`. 以下是您可以使用它的方法：

```
>>> hex(int("123abc", 16) ^ int("def456", 16))
'0xccceea' 
```

**编辑**：根据您的评论使用长十六进制字符串进行测试：

```
>>> def hexor(hex1, hex2):
...     """XOR two hex strings."""
...     xor = hex(int(hex1, 16) ^ int(hex2, 16))
...     return xor[2:].rstrip("L")  # get rid of "0x" and maybe "L"
... 
>>> import random
>>> a = "".join(random.choice("0123456789abcdef") for i in range(200))
>>> b = "".join(random.choice("0123456789abcdef") for i in range(200))
>>> a
'8db12de2f49f092620f6d79d6601618daab5ec6747266c2eea29c3493278daf82919aae6a72
64d4cf3dffd70cb1b6fde72ba2a04ac354fcb871eb60e088c2167e73006e0275287de6fc6133
56e44d7b0ff8378a0830d9d87151cbf3331382b096f02fd72'
>>> b
'40afe17fa8fbc56153c78f504e50a241df0a35fd204f8190c0591eda9c63502b41611aa9ac2
27fcd1a9faea642d89a3a212885711d024d2c973115eea11ceb6a57a6fa1f478998b94aa7d3e
993c04d24a0e1ac7c10fd834de61caefb97bcb65605f06eae'
>>> hexor(a, b)
'cd1ecc9d5c64cc47733158cd2851c3cc75bfd99a6769edbe2a70dd93ae1b8ad36878b04f0b0
43281e94053d689c3f5e45392af75b13702e7102fa3e0a990ca0db096fcff60db1f672561c0d
cfd849a945f62d4dc93f01ecaf30011c8a6849d5f6af293dc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:12:56.750

@ user1427661：您看到的输出与输入之一（比如输入1）相同，因为-

长度（输入1）>长度（输入2）

您现在可以做的就是检查两个字符串的长度，并用类似这样的方式剥离较大的字符串以匹配较小字符串的大小（因为该部分的其余部分无论如何都是无用的） -

如果长度（输入 1）> 长度（输入 2）：

```
 input1 = input1[:len(b)] 
```

同样是一个 else 条件。

让我给你一个更简单的答案（当然在我看来！）。您可以使用内置的 'operator' 包，然后直接使用其中的 xor 方法。

[http://docs.python.org/2/library/operator.html](http://docs.python.org/2/library/operator.html)

希望这可以帮助。

# reporting-services - 在 SSRS 矩阵中显示组合

> ID：13363720
> 
> 赞同：2
> 
> 时间：2012-11-13T15:37:18.627
> 
> 标签：reporting-services, matrix

我的数据集中有以下数据

```
 Type | Code | Value
  C1   |      | Cash
  C2   |      | Check
  P1   | 0001 | Payment 1
  P2   | 0002 | Payment 2 
```

我需要用来创建以下矩阵

```
 P1 0001 
  P1 0001 Cash
  P1 0001 Check
  P1 0001 Cash Check
  P2 0002
  P2 0002 Cash
  P2 0002 Check
  P2 0002 Cash Check 
```

基本上我需要一种方法来显示 P 类型和 C 类型的所有组合，但似乎无法正确获取列或行组，我正在寻求帮助。谢谢。

SSRS 版本 = 2008 R2，如果它有所作为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:14:10.043

我最终采取了不同的路线。我没有在 SSRS 中构建矩阵，而是编写了一个 sql 函数来构建矩阵并返回一个表。SSRS 只是调用该函数并获取所有行。

# c# - 在 JSONP 中触发错误事件

> ID：13363732
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:38:00.613
> 
> 标签：c#, asp.net

这个 js 触发服务器端 api 调用和 C# 也成功返回，但它在 js 中出现错误函数。而且我看不到响应错误的结果。

JS

```
$.ajax({
    url: "http://127.0.0.1:81/api/sites/GetDomainAvailability?apikey=asfasfdsf&callback=?",
    data: { subDomain: subDomain, parentDomain: parentDomain, resellerId: resellerId },
    contentType: 'application/json; charset=utf-8',
    accept: 'application/json',
    dataType: 'json',
    success: function (response) {
        if (callback)
            callback(response.d);
    },
    error: function (response) {
        if (callback)
            error(response.d);
    }
}); 
```

C# 代码

```
 [HttpGet]
        public HttpResponseMessage GetDomainAvailability(string subDomain, string parentDomain, string resellerId)
        {
            if (ModelState.IsValid)
            {
                var domain = string.Format("{0}.{1}", subDomain, parentDomain);

                var manager = new CloudSitesManager();
                var isDomainAvailable = manager.GetDomainAvailability(domain);

                var response = Request.CreateResponse(HttpStatusCode.OK, isDomainAvailable);
                return response;
            }
            else
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:34:50.730

您需要确保在 web.config（以及任何 WCF 声明）中使用 includeExceptionDetailInFaults="True"。在 DEBUG 模式下编译它以确保您获得最大的异常详细信息。

编辑：生产时再次将其关闭！

# c# - DirectShow.net c# - 在同一个项目中捕获图像和捕获视频

> ID：13363733
> 
> 赞同：1
> 
> 时间：2012-11-13T15:38:02.440
> 
> 标签：c#, directshow, directshow.net

我对**DirectShow.net**库非常陌生。

我想创建一个应该使用**DirectShow.net**库并捕获图像和视频的项目。是否有相同示例应用程序的链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:46:31.260

这样做的一种方法可能是您在捕获图中使用图像采集卡......有点像：

源->图像采集卡->avi mux->文件写入器

然后，您可以在回调函数中捕获图像，而图表的其余部分将继续捕获视频。

# windows - 如何从 Windows 命令行调用 F12 开发人员工具中不同版本的 Internet Explorer 选项

> ID：13363734
> 
> 赞同：2
> 
> 时间：2012-11-13T15:38:01.973
> 
> 标签：windows, internet-explorer, windows-7, ie-developer-tools

我需要在我的 Windows 7 中安装多个版本的 IE 浏览器以进行跨浏览器测试。我检查了独立应用程序，但没有任何工作正常。

我知道 Windows 中有一个 F12 开发人员工具可以切换用户代理，是否可以从命令行调用 iexplore.exe 浏览器以及所需的浏览器版本？

*   我已经得到了spoon的试用版，但我正在寻找一个免费的解决方案。
*   我不是在寻找任何付费版本的替代品
*   我不需要涉及创建虚拟机的程序，因为它们对我不起作用。

如果上述信息不明确或不充分，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:30:35.237

无法从命令行更改浏览器版本。

您可以做的最接近但完全不推荐的方法是使用浏览器仿真功能控制键（[文档](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx)）来更改默认模式，因为它会影响每个 IE 实例。

# drupal - Drupal 中的 Liferay-Portlet

> ID：13363737
> 
> 赞同：3
> 
> 时间：2012-11-13T15:38:16.233
> 
> 标签：drupal, liferay, portlet, jsr286

我们有一些符合 JSR 286 标准的 portlet。我们将这些带有 liferay 服务器的 portlet 出售给我们的客户。一位客户询问是否可以使用 Drupal 而不是 Liferay。

我找不到 Drupal 支持 jsr-286-portlets 的任何信息。所以不可能将 liferay-portlet 与 Drupal 一起使用，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:19:08.003

我认为您可能有以下选择：

## 远程 Portlet 2.0 (WSRP) 的 Web 服务

引用 WSRP 规范：

> 远程 Portlets 的 Web 服务规范定义了一个 Web 服务接口，用于访问和交互的面向表示的交互式 Web 服务。

基本上，您需要一个 Liferay 的运行实例，将您的 portlet 作为面向演示的 Web 服务公开给 Drupal，Drupal 将使用它们并将其发送回客户端。

好消息是 Drupal 似乎支持它。您需要将**Drupal**启用为[WSRP](http://en.wikipedia.org/wiki/Web_Services_for_Remote_Portlets)的**消费者**[**，**](http://drupal.org/project/wsrp)查看Drupal 页面，并将**Liferay**作为**生产者**，请参阅[**此处**](http://www.liferay.com/community/wiki/-/wiki/Main/WSRP)。[](http://drupal.org/project/wsrp)******[](http://www.liferay.com/community/wiki/-/wiki/Main/WSRP)******

 ******## 使用 IFrame

与第一个解决方案类似，但集成较少，安全性工作要做更多，因为客户端将直接联系 Liferay 服务器，因此您需要将其公开为公共服务器（如果不是在 Intranet 场景中），您可能会需要**[单点登录](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CFUQFjAA&url=http://en.wikipedia.org/wiki/Single_sign-on&ei=3XKiUNLIBuis0AHH-4HICw&usg=AFQjCNEssO08IAUl2mZrnBk9p5XtFiqGLg&sig2=YFpFtX2ApzvKxoPFpR-d-Q)**解决方案进行身份验证。

* * *

我建议看一下关于[**Liferay Application Integration Strategies**](http://dev.opnworks.com/downloads/soft/Liferay/Documentation/Liferay%20Application%20Integration%20Strategies.pdf)的文档，因为很好地回顾了几种具有优缺点的集成策略（包括我引用的两个）。******

# java - 复杂的 Activiti + JPA 查询

> ID：13363739
> 
> 赞同：5
> 
> 时间：2012-11-13T15:38:23.080
> 
> 标签：java, jpa, jbpm, activiti

我们正在尝试在一个新项目中使用 Activiti。我创建了一个设置，它通过 JPA 使用 Hibernate 来持久化进程中涉及的实体，并且 JPA 与 Activiti 互连，因此我们可以将这些实体用作 JPA 变量。参见：[Activiti 文档的 JPA 章节](http://activiti.org/userguide/#N1200A)

我发现 Activiti 不允许我在涉及 JPA 变量的进程上创建查询，我喜欢在 JPA 实体字段上进行过滤。例如，如果我有一个带有引用 Book 实体的变量的流程，我无法为具有特定标题的图书的流程创建查询。

克服这个问题的最佳方法是什么？我虽然关于使用 Hibernate 单独查询实体，然后在 Activiti 上进行第二次查询以获取所涉及的进程，但我担心它会很慢。另外，如果我以相反的方式进行操作（首先查询进程，然后在实体上使用 Hibernate 进行第二次查询），Activiti 对 JPA 变量进行了不必要的填充，我不知道如何仅获取实体 ID它保存到我数据库的 Activiti 变量表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:02:04.383

我已经实施了问题评论中描述的解决方案。我还没有一个大的数据集来测试性能，但它似乎可以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:39:30.550

将您的实体 ID 用作流程的 businessKey 怎么样？

然后您可以对您的实体（具有特定标题的书籍）进行查询，然后使用它来检索您在 Activiti 中的流程

# php - PHP规范化范围内的百分比值

> ID：13363740
> 
> 赞同：1
> 
> 时间：2012-11-13T15:38:23.687
> 
> 标签：php, math, numbers, normalization

我有一个数字数组，无法确定数组中的属性数量。

```
example:

array(30, 30, 10, 20, 60);
array(2, 53, 71, 22);
array(88, 22, 8);
etc... 
```

现在通常，所有数组值的总和将为 100 或更少。

我想要做的是，当它们超过 100 时，将它们全部减少以使其等于 100。通常我只会将差值相除然后带走，但例如，第一个数组加起来为 150，如果我除差异（50）均匀，我最终会得到：

```
array(20, 20, 0, 10, 50); 
```

但我希望根据它们的大小减去数字，所以 30 会取出比 10 更大的块。

我会这样做的方法是将每个值除以（total_sum / 100），并且效果很好。现在我需要做的是能够选择一个占主导地位且不能从中减去的值，然后减去所有其他值，直到总和为 100。示例如下：

```
array(20, 20, 80); // 80 is the dominant number

After normalising, the array would be:

array(10, 10, 80);

Example 2:

array(20, 20, 40, 60); // 40 is dominant number

after normalising:

array(10, 10, 40, 20) // maybe it wouldnt be those exact values bhut just to show how different size numbers get reduced according to size. But now total sum is 100

Example 3:
array(23, 43, 100, 32) // 100 is dominant
normalise
array(0, 0, 100, 0); 
```

我尝试了很多东西，但似乎没有任何效果。我将如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:17:12.240

如果我正确理解你的问题，你就完成了。只需从您的输入数组中删除主导值，减少该`100`值，然后像以前一样执行其余操作：

```
function helper($values, $sum) {
  $f = array_sum($values) / $sum;
  return array_map(function ($v) use($f) {
    return $v / $f;
  }, $values);
}

// input
$a = array(20, 20, 40, 60);

// remove the dominant value (index: 2)
$b = array_splice($a, 2, 1);

// `normalize` the remaining values using `100 - dominant value` instead of `100`
$c = helper($a, 100 - $b[0]);

// re-inject the dominant value
array_splice($c, 2, 0, $b);

// output
print_r($c); // => [12, 12, 40, 36] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:04:42.767

尝试这个？

```
function normalise_array($array_to_work_on,$upper_limit){

    $current_total = array_sum($array_to_work_on);
    $reduce_total_by = $current_total - $upper_limit;
    $percentage_to_reduce_by = floor(($reduce_total_by / $current_total) * 100);

    $i = 0;
    $new_array;
    foreach($array_to_work_on as $item){
        $reduce = ($item / 100) * $percentage_to_reduce_by;
        $new_array[$i] = floor($item - $reduce);
        $i ++;
        echo $new_array[$i];
    }
    return($new_array);
}

$numbers1 = array(30, 30, 10, 20, 89);
print_r(normalise_array($numbers1,20));
echo "<br />";
echo "<br />First array total: ".array_sum(normalise_array($numbers1,20));

echo "<br /><br/ >";

$numbers2 = array(234, 30, 10, 20, 60);
print_r(normalise_array($numbers2,100));

echo "<br />First array total: ".array_sum(normalise_array($numbers2,100)); 
```

# mutex - Peterson-2 互算法

> ID：13363742
> 
> 赞同：1
> 
> 时间：2012-11-13T15:38:30.100
> 
> 标签：mutex, mutual-exclusion, contention

Peterson 的 2 进程算法的无争用复杂度为 4（在入口代码中执行 3 两次对共享寄存器内存的访问，在退出代码中执行一次）。如何修改 Peterson 的 2 进程算法，使其无争用复杂度为 3？谢谢。

# html - 定位 :before 和 :afer 伪类在父级之外

> ID：13363744
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:38:33.733
> 
> 标签：html, css

我有一个具有背景图像的部门，但它需要是可变大小。我正在使用三个图像。一个顶部，一个底部，一个重复的中间。

我只有一个 div 可以使用，并为其提供了中间背景图像，然后使用 before 和 after pesudo 类来放置其他图像。主分区的图像显示在这两个后面，因为它们是半透明的。有没有办法在css中解决这个问题或更好的方法来做到这一点？

高HTML：

```
<div class="faq">
  <strong>Q.&nbsp;Who was the greatest business man?</strong><br />
  <p><strong>A.&nbsp;</strong>Noah. He kept his stock afloat, while the rest of the world went into liquidation.</p><br />
  <strong>Q.&nbsp;How should my employees let off steam?</strong><br />
  <p><strong>A.&nbsp;</strong>Take them see to see the comedian Sampson. He'll bring the house down.</p><br />
</div> 
```

CSS - 样式

```
.faq{
  background: transparent url(../images/image_middle.png) repeat-y center;
  color: #ffffff;
  display: block;
}
.faq:before {
  background: transparent url(../images/image_top.png) no-repeat center top !important;
}
.faq:after {
  background: transparent url(../images/image_bottom.png) no-repeat center bottom !important;
} 
```

CSS - 布局

```
.faq:before {
    padding-top: 20px;
    display: block;
    content: "\A";
}
.faq:after {
    padding-top: 14px;
    display: block;
    content: "\A";
}
.faq{
    margin: 20px 0 5px !important;
    padding: 0 20px 0 15px !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:17:50.243

最好的方法是使用多个背景 - 请参阅[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds)。通过这种方式，您可以指定 3 个不同的图像及其位置作为元素的样式。首先列出顶部图像。

如果您的浏览器支持要求不适用于 CSS 多背景，您可以通过设置其他元素的样式来获得相同的结果 - 例如a`h1`或. 这种方法更复杂，因为您必须非常小心.`p:last``div``div`

请注意，背景或图像将**始终**通过其上方图像的透明区域显示。如果您不希望这样，则必须在该覆盖图像中添加一些不透明的东西 - 例如您要淡入淡出的背景颜色。

如需更详细的帮助，请发布您正在使用的代码的自包含示例。

# javascript - 如何防止 Javascript 崩溃

> ID：13363747
> 
> 赞同：0
> 
> 时间：2012-11-13T15:38:34.623
> 
> 标签：javascript

有没有办法防止一个糟糕的 Javascript 调用破坏我的整个代码库？现在，如果我的应用程序中有人进行了错误的 Javascript 调用，那么应用程序其余部分中的脚本将停止工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:45:23.530

您可以使用[异常处理](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Statements#Exception_Handling_Statements)来尝试解决此问题 - 特别`try`是`catch`. 如果应用程序的某些特定区域很脆弱并且似乎最常损坏，那将是最有效的。

但这可能只是一个更大问题的征兆。如果您发现您的应用程序经常出现故障，则问题可能出在您的开发过程中。也许您需要开发功能/单元测试，在部署之前更严格地测试您的应用程序，了解为什么个别开发人员没有修复他们自己的错误（或首先“释放”这么多错误）等等。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-13T15:41:50.963

是的，将代码包装在：

```
try {

} catch (e) {

} 
```

# yii - Yii 密码重复字段

> ID：13363748
> 
> 赞同：8
> 
> 时间：2012-11-13T15:38:37.313
> 
> 标签：yii, passwords, confirmation

创建和更新用户时，我希望在基于 Yii 的 Web 应用程序中重复密码字段。创建时我希望这两个字段都是必需的，更新时，用户可以将这些字段留空（密码相同）或输入新密码并确认。我该怎么点呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T17:30:32.907

首先，您需要在模型中创建一个新属性（在本例中，我们称之为*repeatpassword*）：

```
class MyModel extends CActiveRecord{
    public $repeatpassword;
    ... 
```

接下来，您需要定义一个规则以确保它与您现有的密码属性匹配：

```
 public function rules() {
            return array(
                array('password', 'length', 'max'=>250),
                array('repeatpassword', 'compare', 'compareAttribute'=>'password', 'message'=>"Passwords don't match"),
                ...
            );
    } 
```

*现在，当创建新模型时，除非密码和重复*密码属性匹配，否则模型不会验证。正如您所提到的，这对于**创建**新记录很好，但您不想在**update**上验证匹配的密码。要创建此功能，我们可以使用[模型场景](http://www.yiiframework.com/wiki/266/understanding-scenarios/)

如上所示，我们只需更改*重复密码*规则即可获得额外的参数：

```
...
array('repeatpassword', 'compare', 'compareAttribute'=>'password', 'message'=>"Passwords don't match",'on'=>'create'),
... 
```

现在剩下要做的就是在为 create 函数声明模型时，使用：

```
$model = new MyModel('create'); 
```

而不是正常的：

```
$model = new MyModel; 
```

# asp.net - 使用 DetailsView 文本框数据值填充变量

> ID：13363750
> 
> 赞同：1
> 
> 时间：2012-11-13T15:38:47.353
> 
> 标签：asp.net, vb.net, detailsview

当第一次显示 ASP.Net DetailsView 数据时，您能告诉我如何填充此编码中显示的变量吗？

我已经在代码隐藏文件中尝试过这个，但显示一个错误：

```
Object reference not set to an instance of an object. 
```

这是编码：

```
Protected Sub DetailsViewDetails_DataBound(sender As Object, e As EventArgs) Handles DetailsViewDetails.DataBound

    Dim txtOriginalRegistrationFee As TextBox

    If DetailsViewDetails.CurrentMode = DetailsViewMode.Edit Then
        txtOriginalRegistrationFee = FindControl("TextBoxRegistrationFee")

        If String.IsNullOrEmpty(txtOriginalRegistrationFee.Text) = False Then
            MsgBox(txtOriginalRegistrationFee)
        End If
    End If
End Sub 
```

这是来自 aspx 文件：

```
<asp:TemplateField HeaderText="RegistrationFee" SortExpression="RegistrationFee">
   <EditItemTemplate>
      <asp:TextBox ID="TextBoxRegistrationFee" runat="server" Text='<%# Eval("RegistrationFee") %>'></asp:TextBox>
   </EditItemTemplate>

   <InsertItemTemplate>
      <asp:TextBox ID="TextBoxRegistrationFee" runat="server" Text='<%# Bind("RegistrationFee") %>'></asp:TextBox>
   </InsertItemTemplate>

   <ItemTemplate>
      <asp:Label ID="LabelRegistrationFee" runat="server" Text='<%# Bind("RegistrationFee", "{0:c}") %>'></asp:Label>
   </ItemTemplate>

   <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

*** 更新 ***

我尝试使用根据您的帮助更新的编码，但仍然得到“对象引用未设置为对象的实例”。单击 DetailsView 的编辑按钮时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:48:56.480

FindControl 函数需要一个控件来搜索，否则它将搜索页面（或内容）级别的控件。

尝试

```
txtOriginalRegistrationFee = DetailsViewDetails.FindControl("TextBoxRegistrationFee") 
```

顺便说一句，你的 MsgBox 函数行也不起作用。MsgBox 适用于 windows 窗体，不能在 web 上运行。您必须使用 javascript 来实现该类型的功能。另外，该函数需要一个字符串，而不是控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:47:34.460

我不在 VB 中工作，所以请多多包涵……仅当您的详细信息视图处于插入模式时才会呈现模板。

```
Dim txtOriginalRegistrationFee As TextBox

If DetailsViewDetails.CurrentMode = DetailsViewMode.Insert Then
    txtOriginalRegistrationFee = FindControl("TextBoxRegistrationFee")

    If String.IsNullOrEmpty(txtOriginalRegistrationFee.Text) = False Then
        MsgBox(txtOriginalRegistrationFee)
    End If
End If 
```

# javascript - 去除重复并总结数量

> ID：13363751
> 
> 赞同：2
> 
> 时间：2012-11-13T15:38:48.570
> 
> 标签：javascript, arrays, duplicates

```
var name = new Array();
var amount = new Array();
name[0]="Peter";
amount[0]="50";
name[1]="John";
amount[1]="10";
name[2]="John";
amount[2]="20";
name[3]="Peter";
amount[3]="20";
name[4]="Mary";
amount[4]="40"; 
```

我有类似上面的东西。我的问题是，如何创建一个函数来消除所有重复项并总结数组中每个人的值？以下是我正在寻找的结果。

例如：

```
Peter 70
John  30
Mary  40 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:42:08.627

尝试以下

```
var sum = {};
var i;
for (i = 0; i < amount.length; i++) {
  var name = name[i];
  var oldSum = sum[name];
  if (typeof oldSum === 'undefined') {
    oldSum = 0;
  }
  sum[name] = oldSum + amount[i];
} 
```

现在该对象`sum`将为其中的每个名称都有一个属性，`name`并且该属性的值将是具有该名称的金额的总和

要打印出来，请尝试以下操作

```
for (var prop in sum) {
  if (sum.hasOwnProperty(prop)) {
    console.log(prop + " " sum[prop]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:45:38.630

我不知道您是否真的想修改数组，或者只是收集结果。

这是一种将结果收集到对象中的方法。

```
var result = name.reduce(function(res, n, i) {
    res[n] = (res[n] + +amount[i]) || +amount[i];
    return res;
}, {}); 
```

该`.reduce()`方法需要 IE8 及更低版本的填充程序。

结果是：

```
{
    "Peter": 70,
    "John": 30,
    "Mary": 40
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:47:21.093

```
result = {};
for( var i=name.length; i--; ) {
  result[name[i]] = result[ name[i] ] ? (result[name[i]] + parseInt( amount[i], 10 )) : parseInt( amount[i], 10 );
}
console.log( result ); 
```

返回

```
{ Mary=40, Peter=70, John=30 } 
```

`parseInt()`当您将`amount[]`值作为字符串提供时，这是必需的。

`result`调用之后是一个保存汇总值的对象，其中键是条目 from `name[]`，值是 from `amount[]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:53:03.543

```
tally=[];
for(i=0;i<name.length;i++) {
  if(tally[name[i]]==undefined){
    tally[name[i]]=parseInt(amount[i]);
  }else{
    tally[name[i]]+=parseInt(amount[i]);
  }
} 
```

# java - AtomicBoolean.set(flag) 和 AtomicBoolean.compareAndSet(!flag, flag) 有什么区别？

> ID：13363752
> 
> 赞同：5
> 
> 时间：2012-11-13T15:38:54.653
> 
> 标签：java, java.util.concurrent, compare-and-swap

我想知道调用之间是否有任何区别（或可能的副作用）：

```
AtomicBoolean.set(true) 
```

和

```
AtomicBoolean.compareAndset(false, true) 
```

状态的 JavaDoc `AtomicBoolean#set`：

> 无条件设置为给定值。

虽然`AtomicBoolean#compareAndSet`说：

> 如果当前值 == 预期值，则自动将值设置为给定的更新值。

在这两种情况下，该值都将设置为 true。那么区别是什么呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T15:41:32.433

`compareAndset(false, true)``false`如果值已经是将返回`true`。
它实际上相当于`!getAndSet(true)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T15:45:23.093

好吧，您引用的文字明确说明了两种操作之间的区别。但为了更清楚一点，如果忽略原子性方面，第一个等效于：

```
public void set(boolean newValue) {
    this.value = newValue;
} 
```

第二个相当于：

```
public boolean compareAndSet(boolean expected, boolean newValue) {
    if (this.value == expected) {
        this.value = newValue;
        return true;
    } else {
        return false;
    }
} 
```

* * *

对于您的示例，`set(true)`将 state 设置为`true`，并将`compareAndset(false, true)`state 设置为`true`if it is not already `true`。所以，是的，对状态的净影响`AtomicBoolean`是相同的。

但是，您会注意到该`return`值根据`AtomicBoolean`对象的初始状态而有所不同......因此从这个角度来看，即使使用这些参数值，这些方法也不等效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-26T07:42:10.220

登陆这里从性能角度寻找答案。由于不确定本机实现 v 决策块，我最终编写了代码来评估它。根据结果​​， set() 绝对在性能上占优势，因为它不经过多个决策块。请在下面找到代码和输出。

```
public static void main(String[] args) {
    boolean curValue = true;
    boolean dummyValue = true;
    int attempts = Integer.MAX_VALUE;

    AtomicBoolean test = new AtomicBoolean(curValue);
    long start = System.currentTimeMillis();
    for(int i=0; i<attempts; i++){
        test.set(true);
        dummyValue = !dummyValue;
    }
    System.out.println("time taken for set: "+(System.currentTimeMillis()-start));

    start = System.currentTimeMillis();
    for(int i=0; i<attempts; i++){
        test.compareAndSet(curValue, curValue); // always set the same value
        dummyValue = !dummyValue;
    }
    System.out.println("time taken for compareAndSet - same value case: "+(System.currentTimeMillis()-start));

    curValue = !curValue;
    start = System.currentTimeMillis();
    for(int i=0; i<attempts; i++){
        test.compareAndSet(curValue, !curValue); // always invert
        curValue = !curValue;
    }
    System.out.println("time taken for compareAndSet - inversion case: "+(System.currentTimeMillis()-start));
} 
```

输出：

```
time taken for set: 2689
time taken for compareAndSet - same value case: 15559
time taken for compareAndSet - inversion case: 14802 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-01T09:54:26.203

AtomicBoolean 的 set() 和 compareAndSet() 方法的区别可以在线程锁定机制中找到。

可以使用以下代码实现线程安全。

```
public class AtomicBooleanSample {
    private AtomicBoolean locked = new AtomicBoolean(false);

    private void lock() {
        while(!this.locked.compareAndSet(false, true)) {
            //a thread will be locked here
        }
    }

    private void unlock() {
        this.locked.set(false);
    }
} 
```

对于共享资源，当第一个线程执行一个`lock()`方法时，`locked`实例变量的值将被设置`true`为期望值与 的值相同，`locked`并获取锁以访问共享资源。

在第一个线程调用`unlock()`方法之前，如果另一个线程尝试锁定，它将失败，因为值`locked`不同（`true`不符合预期值`false`）并在循环中运行，直到第一个线程将值设置`locked`为 false。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T08:27:35.307

*CAS 算法*在高争用情况下会产生性能影响，因为 `compareAndSet(false, true)`它会被淘汰，直到它成功。因此，如果不需要原子性，则纯布尔值可能是更好的选择。

# android - base64 InvalidKeyException：密钥长度不是 128/192/256 位

> ID：13363754
> 
> 赞同：1
> 
> 时间：2012-11-13T15:38:56.983
> 
> 标签：android, exception, base64, sharedpreferences, encryption-symmetric

我正在尝试使用 Base64 加密 editText 字符串 wnich 将保存在 sharedpreferences 中，但是一旦字符串被编码并保存，我的 .xml 文件就是空白的。我是一名新手程序员，对加密非常陌生，所以我迷路了，不知道如何正确分析我的代码以确定可能非常简单的问题。我收到了一些建议，但没有清楚地表明问题出在哪里，为什么它不起作用，以及如何解决它。我怀疑我的加密方法，但不确定在哪里。对于试图保护用户名和密码条目的编码人员来说，这一定是一项常见任务。本教程用于此加密项目[单击此处](http://www.ravenblast.com/index.php/blog/android-password-text-encryption/)

这是用于编码、加密和保存 EditText 字符串的类：

```
public void onClick(View arg0) {
    user=rName.getText().toString().trim();
    pass=rPwd.getText().toString().trim();

    if(arg0==regBttn){     
       if((user.length()!=0))
        {
          if((pass.length()!=0))
        {

        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE);
        Editor myEditor=sp.edit();

        byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };

        try {
             String encryptedUser = encrypt(user, key);  
             myEditor.putString("USERNAME_KEY", encryptedUser); 
        }
     catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
    try {
             String encryptedPass = encrypt(pass, key);  
             myEditor.putString("PASSWORD_KEY", encryptedPass); 

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    myEditor.commit();
    Toast.makeText(this, "Registration is successfull",10000).show();
    i=new Intent(this,AccessApp.class);
    startActivity(i);
    }
    else
     {
      Toast.makeText(this, "Please Enter password", 10000).show();  
     }}

    else{
        Toast.makeText(this,"Please Enter Username",10000).show();
     }
        }

else if(arg0==rtnBttn){
    AlertDialog.Builder builder=new AlertDialog.Builder(this);
     builder.setTitle("Exit");
     builder.setMessage("Do you want to exit");
     builder.setCancelable(false);
     builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int which) {
  // TODO Auto-generated method stub
  finish();
  }
  });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
                arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();
}
    }

public String encrypt(String toEncrypt, byte key[]) throws Exception {
    SecretKeySpec secret = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, secret);
    byte[] encryptedBytes = cipher.doFinal(toEncrypt.getBytes());
    String encrypted = Base64.encodeBytes(encryptedBytes);
    return encrypted;

}

} 
```

日志猫：

```
 11-11 23:41:59.873: W/System.err(11404): java.security.InvalidKeyException: Key length not 128/192/256 bits.
 11-11 23:41:59.873: W/System.err(11404):   at com.android.org.bouncycastle.jce.provider.JCEBlockCipher.engineInit(JCEBlockCipher.java:570)
 11-11 23:41:59.894: W/System.err(11404):   at com.android.org.bouncycastle.jce.provider.JCEBlockCipher.engineInit(JCEBlockCipher.java:617)
 11-11 23:41:59.903: W/System.err(11404):   at javax.crypto.Cipher.init(Cipher.java:519)
 11-11 23:41:59.928: W/System.err(11404):   at javax.crypto.Cipher.init(Cipher.java:479)
 11-11 23:41:59.943: W/System.err(11404):   at com.SharedPreferences.Login.SharedPrefLoginActivity.encrypt(SharedPrefLoginActivity.java:139)
 11-11 23:41:59.953: W/System.err(11404):   at com.SharedPreferences.Login.SharedPrefLoginActivity.onClick(SharedPrefLoginActivity.java:82)
 11-11 23:41:59.953: W/System.err(11404):   at android.view.View.performClick(View.java:3511)
 11-11 23:41:59.953: W/System.err(11404):   at android.view.View$PerformClick.run(View.java:14105)
 11-11 23:41:59.973: W/System.err(11404):   at android.os.Handler.handleCallback(Handler.java:605)
 11-11 23:41:59.973: W/System.err(11404):   at android.os.Handler.dispatchMessage(Handler.java:92)
 11-11 23:42:00.034: W/System.err(11404):   at android.os.Looper.loop(Looper.java:137)
 11-11 23:42:00.034: W/System.err(11404):   at android.app.ActivityThread.main(ActivityThread.java:4424)
 11-11 23:42:00.034: W/System.err(11404):   at java.lang.reflect.Method.invokeNative(Native Method)
 11-11 23:42:00.103: W/System.err(11404):   at java.lang.reflect.Method.invoke(Method.java:511)
 11-11 23:42:00.103: W/System.err(11404):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 11-11 23:42:00.124: W/System.err(11404):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 11-11 23:42:00.124: W/System.err(11404):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:49:50.493

您似乎数错了字节数：

`byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };`

您需要一个 128 位密钥（16 个字节），但您在这里声明了 17 个字节。将密钥长度减少一，我认为它应该可以工作。

# marionette - 如何从 CollectionView 访问 ItemView.onShow？

> ID：13363756
> 
> 赞同：0
> 
> 时间：2012-11-13T15:39:02.033
> 
> 标签：marionette

我希望能够从 CollectionView 收听 itemView 上的[show](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#region-events-and-callbacks)事件。以下代码段不起作用。也许这是不可能的？

```
@on 'itemview:show', (itemView) =>
  console.log "Showed itemView" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:00:30.270

您在问题中所做的评论是目前完成这项工作的唯一方法。

这是如何`onShow`在项目视图上调用该方法的限制，因为无法保证何时显示项目视图。

# c# - MVC 模型 - 应用程序中的一个或多个 dbcontext (EF)

> ID：13363757
> 
> 赞同：2
> 
> 时间：2012-11-13T15:39:05.387
> 
> 标签：c#, entity-framework, model, asp.net-mvc-4, code-first

我正在为某种网上商店构建 MVC 4 应用程序。这是我第一次用 ASP.NET 做任何事情，所以我花了一些时间阅读有关 mvc 模式的整个想法，以及它是如何在最新版本中实现的。

我知道我需要为数据编写模型，所以我决定采用 Code-first 方法。

我也喜欢不同的类在不同的文件中移动。还有不同类别的不同部分。

现在我不确定我应该如何组织模型类。当我使用“Internet Application”模板制作项目时，我已经获得了带有用户信息的 AccountModel。对我来说，我应该将有关产品的信息放在该模型中，这听起来不合适。但是如果我制作单独的模型，我将需要在这两个模型之间建立某种联系，我不知道如何制作它。

还是应该将整个数据库放在一个模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:16:34.640

如果可能的话，我建议将所有内容都放入一个模型中。

这里有几个例子，来自代码隐藏的观点和数据库：

1.  当我不得不访问/操作来自单个数据库的数据时，我使用了单个模型。
2.  当我不得不访问/操作来自多个数据库的数据时，我使用了多个模型。

大多数时候，我只创建了一个数据上下文，因为多个数据上下文不合逻辑。如果您只有一个数据库，为什么还要有多个数据上下文？

回答你的问题：我不确定这个“网上商店”会有多复杂，但我建议创建一个模型。如有必要，您以后可以随时移动东西。

# firebreath - FireBreath 不编译包含 boost 进程头文件

> ID：13363760
> 
> 赞同：1
> 
> 时间：2012-11-13T15:39:14.373
> 
> 标签：firebreath

我想从 firebreath 启动进程，所以我包含了“boost/process.hpp”。仅包含此标头会引发编译错误。有人可以帮忙吗？

FireBreath 1.6.1，FireBreath 1.7.0，Windows 8

错误：

2>C:\Projects\plugin\FireBreath\src\3rdParty\boost\boost/process/detail/pipe.hpp(129): 错误 C2665: 'boost::system::system_error::system_error' : 没有 7重载可以转换所有参数类型 2> C:\Projects\plugin\FireBreath\src\3rdParty\boost\boost/system/system_error.hpp(39): could be 'boost::system::system_error::system_error(int ,const boost::system::error_category &,const std::string &)' 2> C:\Projects\plugin\FireBreath\src\3rdParty\boost\boost/system/system_error.hpp(43): 或 'boost ::system::system_error::system_error(int,const boost::system::error_category &,const char *)' 2> 尝试匹配参数列表时 '(DWORD, 重载函数, const char [54]) '

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:53:05.423

我遇到了同样的问题

```
boost: 1.47
OS:    Windows XP (32 bit VM) 
```

但不是用 FireBreath

我改为`boost::system::system_category`在`boost::system::system_category()`pipe.hpp 第 129 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:57:25.933

FireBreath 中的 boost::process 库中存在编译错误。我已经修复了这些错误，它现在可以为我编译，至少在包含 . 我实际上还没有尝试在 Windows 上使用它，我也不怀疑有其他人。

祝你好运，希望有帮助。

# excel - 自动化 Excel 工作 - 将平面文件转换为 Excel 电子表格

> ID：13363767
> 
> 赞同：2
> 
> 时间：2012-11-13T15:39:36.163
> 
> 标签：excel, automation, flat-file, vba

我有一个主 Excel 电子表格，我每天都用 10 个平面文件来更新它，用于 10 个不同的选项卡。所以，每天早上我都会打开我的 excel 电子表格，删除昨天的标签并放入最新的 txt 文件。Txt 文件遵循相同的模式，如下所示：

今天我有“FILE_1_45”、“FILE_2_45”、“FILE_3_45”......“FILE_10_45”。

明天我将拥有“FILE_1_46”、“FILE_2_46”、“FILE_3_46”……“FILE_10_46”，所以这些都是增量的。

我怎样才能自动化这个过程？我可以输入与我的一天相对应的#，然后点击一个按钮让excel创建我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:06:50.937

我想到的简单方法是编写一个 perl 脚本。您可以使用 SpreadSheet-ParseExcel 和/或 SpreadSheet-WriteExcel 来更新现有电子表格并根据新数据文件生成新电子表格。这个想法的许多例子是可用的。

快速搜索： [http ://www.thegeekstuff.com/2011/12/perl-and-excel/](http://www.thegeekstuff.com/2011/12/perl-and-excel/)

# magento - product_attribute.info magento 未捕获的 SoapFault 异常：[3] 无效的 api 路径

> ID：13363773
> 
> 赞同：0
> 
> 时间：2012-11-13T15:40:06.590
> 
> 标签：magento, soap

我尝试使用“product_attribute.info”来访问 magento 中的 API 并返回：

> 致命错误：未捕获的 SoapFault 异常：[3] 无效的 api 路径。在...在第 81 行

归于何处`return $proxy->call($sessionId, 'product_attribute.info', $attributeId);`

即使替换 $attributeId 给出的函数也能纠正这个错误。我想我的服务器上的某些文件已损坏，但不知道是哪个文件负责。

我感谢

编辑：我的 Api.php

```
 class Mage_Catalog_Model_Product_Attribute_Api extends Mage_Catalog_Model_Api_Resource
{
    public function __construct()
    {
        $this->_storeIdSessionField = 'product_store_id';
        $this->_ignoredAttributeCodes[] = 'type_id';
        $this->_ignoredAttributeTypes[] = 'gallery';
        $this->_ignoredAttributeTypes[] = 'media_image';
    }

    public function items($setId)
    {
        $attributes = Mage::getModel('catalog/product')->getResource()
                ->loadAllAttributes()
                ->getSortedAttributes($setId);
        $result = array();

        foreach ($attributes as $attribute) {
            /* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute */
            if ( (!$attribute->getId() || $attribute->isInSet($setId))
                && $this->_isAllowedAttribute($attribute)) {

                if (!$attribute->getId() || $attribute->isScopeGlobal()) {
                    $scope = 'global';
                } elseif ($attribute->isScopeWebsite()) {
                    $scope = 'website';
                } else {
                    $scope = 'store';
                }

                $result[] = array(
                    'attribute_id' => $attribute->getId(),
                    'code'         => $attribute->getAttributeCode(),
                    'type'         => $attribute->getFrontendInput(),
                    'required'     => $attribute->getIsRequired(),
                    'scope'        => $scope
                );
            }
        }

        return $result;
    }

    public function options($attributeId, $store = null)
    {
        $storeId = $this->_getStoreId($store);
        $attribute = Mage::getModel('catalog/product')
            ->setStoreId($storeId)
            ->getResource()
            ->getAttribute($attributeId)
            ->setStoreId($storeId);

        /* @var $attribute Mage_Catalog_Model_Entity_Attribute */
        if (!$attribute) {
            $this->_fault('not_exists');
        }
        $options = array();
        if ($attribute->usesSource()) {
            foreach ($attribute->getSource()->getAllOptions() as $optionId=>$optionValue) {
                if (is_array($optionValue)) {
                    $options[] = $optionValue;
                } else {
                    $options[] = array(
                        'value' => $optionId,
                        'label' => $optionValue
                    );
                }
            }
        }
        return $options;
    }
} 
```

# java - 如何用java itext保存pdf

> ID：13363774
> 
> 赞同：1
> 
> 时间：2012-11-13T15:40:08.863
> 
> 标签：java, web-applications, pdf-generation, itext

我正在为课程作业做一个 java web 应用程序。在此应用程序中有两种类型的用户：卖方和买方。买家可以买一套东西，当他买的时候，我必须创建一个pdf格式的收据；但是当我尝试购买tomcat的东西时给我这个错误：

```
HTTP Status 500 - \WebApplication\pdf\test.pdf (Impossibile trovare il percorso specificato)

type Exception report

message \WebApplication\pdf\test.pdf (Impossibile trovare il percorso specificato)

description The server encountered an internal error that prevented it from fulfilling this request.

exception

java.io.FileNotFoundException: \WebApplication\pdf\test.pdf (Impossibile trovare il percorso specificato)

    java.io.FileOutputStream.open(Native Method)
    java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    viewer.PdfCreator.createPdf(PdfCreator.java:30)
    servlet.BuyerConfirmationPage.doGet(BuyerConfirmationPage.java:115)
    servlet.BuyerConfirmationPage.doPost(BuyerConfirmationPage.java:61)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我写的代码：

```
try {
            Document document = new Document(PageSize.A4,50,50,50,50);
            PdfWriter.getInstance(document,new FileOutputStream(request.getContextPath() + "/pdf/test.pdf"));
            document.open();
            PdfPTable table = new PdfPTable(5);
            PdfPCell seller_cell = new PdfPCell(new Paragraph("Seller"));
            PdfPCell name_cell = new PdfPCell(new Paragraph("Name"));
            PdfPCell price_cell = new PdfPCell(new Paragraph("Price"));
            PdfPCell UM_cell = new PdfPCell(new Paragraph("UM"));
            PdfPCell quantity_cell = new PdfPCell(new Paragraph("Quantity"));
            table.addCell(seller_cell);
            table.addCell(name_cell);
            table.addCell(price_cell);
            table.addCell(UM_cell);
            table.addCell(quantity_cell);
            PdfPCell seller_cell_value = new PdfPCell(new Paragraph(seller));
            PdfPCell name_cell_value = new PdfPCell(new Paragraph(name));
            PdfPCell price_cell_value = new PdfPCell(new Paragraph(total_price));
            PdfPCell UM_cell_value = new PdfPCell(new Paragraph(UM));
            PdfPCell quantity_cell_value = new PdfPCell(new Paragraph(quantity));
            table.addCell(seller_cell_value);
            table.addCell(name_cell_value);
            table.addCell(price_cell_value);
            table.addCell(UM_cell_value);
            table.addCell(quantity_cell_value);
            document.add(table);
            document.close();

        } catch (DocumentException ex) {
            Logger.getLogger(PdfCreator.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

我确定代码是正确的，而且该文件夹存在，为什么我不能保存我的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:46:52.170

这不是 iText 问题。如果您删除所有 iText 代码并尝试将纯文本写入 FileOutputStream，您将遇到同样的异常。

Perneel 提交的问题“是否有必要从 Web 加载 PDF”是非常相关的。为什么不在内存中创建 PDF 而不是将其写入文件？请参阅“iText in Action”中第 9 章的示例以获得灵感：http: [//itextpdf.com/book/chapter.php](http://itextpdf.com/book/chapter.php?id=9) ?id=9 （阅读该章也会有所帮助）。

在任何情况下：madth3 是正确的：您假设 (1) 路径`\WebApplication\pdf\`存在并且 (2) Web 应用程序可以访问该路径。只需使用该路径创建一个`File`对象`"."`并使用该路径将该路径`getAbsolutePath()`写入您的 servlet 的输出。我敢打赌它不会给你预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:50:15.890

是否有必要从网上加载pdf？你不能像这样生成一个pdf文件：

```
Document document = new Document(PageSize.A4,50,50,50,50);
File file = File.createTempFile("dossier_" + selectedDossier.getDossierID() + "_", ".pdf");
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(file.getPath())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:13:53.213

您得到的上下文路径是 URL 中使用的相对路径，因此它可能没有指向您认为的位置。我想你应该使用类似的东西[`getRealPath()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

# mysql - 如何使用十六进制（blob）内容生成 SQL 插入，例如 Flyway 迁移脚本

> ID：13363776
> 
> 赞同：0
> 
> 时间：2012-11-13T15:40:15.273
> 
> 标签：mysql, blob, flyway

如何为例如 Flyway 迁移脚本生成具有十六进制 (blob) 内容的 SQL 插入。

我可以在编辑器中打开二进制内容，例如使用十六进制模式的 UltraEdit。但是，找不到将这些内容复制并粘贴到我的 SQL 编辑器（例如 MySQL Workbench）的方法。我可以复制几个字节，但我需要的文件大约是 60k 到 100k。

建议请任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:38:41.330

作为替代方案，您可以将 BLOB 保存为二进制或十六进制格式，并使用基于 Flyway Java 的迁移加载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:58:57.710

尝试[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中的 DataExport 功能。单击数据库资源管理器中表格弹出菜单中的“导出数据”命令，选择需要导出的字段和行，然后按“导出”按钮；您将获得带有 INSERT 语句的 SQL 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T22:33:40.590

在 MySQL Workbench 6.2 中，我转到顶部菜单中的**Server** -> **Data Export**。我选择了我想要的对象。接下来我选择了 Export to **Self-Contained File**。最后，我点击右上角的**Advanced Options按钮，然后选中****hex-blob**选项。

导出后，导出的文件具有我想要的十六进制 blob 的 INSERTS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:11:55.393

在这里与同事交谈后，尝试了这个快速过程并验证它可以正常工作：-

1.  使用 MySQL Workbench，右键单击 blob 字段并使用新内容“从文件中加载值”。

2.  在命令行（DOS 或 Cygwin）上，使用 mysqldump 实用程序，例如 mysqldump -u root -psomestring --hex-blob my_schemaname my_tablename > destination_file.sql

3.  打开生成的 destination_file.sql，将十六进制内容字符串复制并粘贴到 Flyway 脚本。

量子点

# python - 大文本文件的递归

> ID：13363779
> 
> 赞同：0
> 
> 时间：2012-11-13T15:40:26.007
> 
> 标签：python

我正在尝试读取一个大文本文件（1.08 MB，116253 个字），我遇到了程序在进入文本文件的大约 1/20 处停止的问题（在`Read`函数中停止，甚至不执行`print`语句）。

这是我现在拥有的功能：

```
from binary_search_tree import BinarySearchTree
from tree_node import TreeNode
import sys

sys.setrecursionlimit(5000000)

MovieTree = BinarySearchTree()

def Read(filename):
    file = open('movieData.txt')
    for line in file:
        MovieTree[line.strip()] = line
        print(line)
    file.close()

Read('movieData.txt')
print(MovieTree) 
```

给我的 binary_search_tree 和 tree_node 因为这是一个家庭作业，所以我假设它是有效的，因为它以前被使用过。

有谁知道问题是什么？

二叉搜索树：

```
from tree_node import TreeNode

class BinarySearchTree:

    def __init__(self):
        self.root = None
        self.size = 0

    def length(self):
        return self.size

    def __len__(self):
        return self.size

    def __iter__(self):
        return self.root.__iter__()

    def __str__(self):
        """Returns a string representation of the tree
           rotated 90 degrees counter-clockwise"""

        def strHelper(root, level):
            resultStr = ""
            if root:
                resultStr += strHelper(root.rightChild, level+1)
                resultStr += "| " * level
                resultStr += str(root.key) + "\n"
                resultStr += strHelper(root.leftChild, level+1)                
            return resultStr

        return strHelper(self.root, 0)

    def __contains__(self,key):
        if self._get(key,self.root):
            return True
        else:
            return False

    def get(self,key):
        if self.root:
            res = self._get(key,self.root)
            if res:
                return res.payload
            else:
                return None
        else:
            return None

    def _get(self,key,currentNode):
        if not currentNode:
            return None
        elif currentNode.key == key:
            return currentNode
        elif key < currentNode.key:
            return self._get(key,currentNode.leftChild)
        else:
            return self._get(key,currentNode.rightChild)

    def __getitem__(self,key):
        return self.get(key) 

    def __setitem__(self,k,v):
        self.put(k,v)

    def put(self,key,val):
        if self.root:
            self._put(key,val,self.root)
        else:
            self.root = TreeNode(key,val)
        self.size = self.size + 1

    def _put(self,key,val,currentNode):
        if key < currentNode.key:
            if currentNode.hasLeftChild():
                self._put(key,val,currentNode.leftChild)
            else:
                currentNode.leftChild = TreeNode(key,val,
                                          parent=currentNode)
        else:
            if currentNode.hasRightChild():
                self._put(key,val,currentNode.rightChild)
            else:
                currentNode.rightChild = TreeNode(key,val,
                                          parent=currentNode)

    def delete(self,key):
      if self.size > 1:
          nodeToRemove = self._get(key,self.root)
          if nodeToRemove:
              self.remove(nodeToRemove)
              self.size = self.size-1
          else:
              raise KeyError('Error, key not in tree')
      elif self.size == 1 and self.root.key == key:
          self.root = None
          self.size = self.size - 1
      else:
          raise KeyError('Error, key not in tree')

    def __delitem__(self,key):
        self.delete(key)

    def remove(self,currentNode):
      if currentNode.isLeaf(): #leaf
        if currentNode == currentNode.parent.leftChild:
            currentNode.parent.leftChild = None
        else:
            currentNode.parent.rightChild = None
      elif currentNode.hasBothChildren(): #interior
        succ = currentNode.findSuccessor()
        succ.spliceOut()
        currentNode.key = succ.key
        currentNode.payload = succ.payload

      else: # this node has one child
        if currentNode.hasLeftChild():
          if currentNode.isLeftChild():
              currentNode.leftChild.parent = currentNode.parent
              currentNode.parent.leftChild = currentNode.leftChild
          elif currentNode.isRightChild():
              currentNode.leftChild.parent = currentNode.parent
              currentNode.parent.rightChild = currentNode.leftChild
          else:
              currentNode.replaceNodeData(currentNode.leftChild.key,
                                 currentNode.leftChild.payload,
                                 currentNode.leftChild.leftChild,
                                 currentNode.leftChild.rightChild)

        else:
          if currentNode.isLeftChild():
              currentNode.rightChild.parent = currentNode.parent
              currentNode.parent.leftChild = currentNode.rightChild
          elif currentNode.isRightChild():
              currentNode.rightChild.parent = currentNode.parent
              currentNode.parent.rightChild = currentNode.rightChild
          else:
              currentNode.replaceNodeData(currentNode.rightChild.key,
                                 currentNode.rightChild.payload,
                                 currentNode.rightChild.leftChild,
                                 currentNode.rightChild.rightChild) 
```

树节点：

```
class TreeNode:
   def __init__(self,key,val,left=None,right=None,
                                       parent=None):
      self.key = key
      self.payload = val
      self.leftChild = left
      self.rightChild = right
      self.parent = parent

   def hasLeftChild(self):
      return self.leftChild

   def hasRightChild(self):
      return self.rightChild

   def isLeftChild(self):
      return self.parent and \
             self.parent.leftChild == self

   def isRightChild(self):
      return self.parent and \
             self.parent.rightChild == self

   def isRoot(self):
      return not self.parent

   def isLeaf(self):
      return not (self.rightChild or self.leftChild)

   def hasAnyChildren(self):
      return self.rightChild or self.leftChild

   def hasBothChildren(self):
      return self.rightChild and self.leftChild

   def replaceNodeData(self,key,value,lc,rc):
      self.key = key
      self.payload = value
      self.leftChild = lc
      self.rightChild = rc
      if self.hasLeftChild():
          self.leftChild.parent = self
      if self.hasRightChild():
          self.rightChild.parent = self

   def __iter__(self):

      if self:
         if self.hasLeftChild():
              for elem in self.leftChild:
                 yield elem
         yield self.key
         if self.hasRightChild():
              for elem in self.rightChild:
                 yield elem

   def findSuccessor(self):
      succ = None
      if self.hasRightChild():
          succ = self.rightChild.findMin()
      else:
          if self.parent:
              if self.isLeftChild():
                  succ = self.parent
              else:
                  self.parent.rightChild = None
                  succ = self.parent.findSuccessor()
                  self.parent.rightChild = self
      return succ

   def findMin(self):
      current = self
      while current.hasLeftChild():
          current = current.leftChild
      return current

   def spliceOut(self):
      if self.isLeaf():
         if self.isLeftChild():
            self.parent.leftChild = None
         else:
            self.parent.rightChild = None
      elif self.hasAnyChildren():
         if self.hasLeftChild():
            if self.isLeftChild():
               self.parent.leftChild = self.leftChild
            else:
               self.parent.rightChild = self.leftChild
            self.leftChild.parent = self.parent
         else:
            if self.isLeftChild():
               self.parent.leftChild = self.rightChild
            else:
               self.parent.rightChild = self.rightChild
            self.rightChild.parent = self.parent 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:22:56.827

堆栈溢出也会在这里崩溃。

由于您的代码不包含递归，因此它必须在老师给您的课程中。我认为溢出发生在`put(self, key, val)`方法中。

恐怕我几乎不知道 Python，所以我不能给你任何进一步的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:39:09.593

1.08 MB 是一个小文件。为什么要使用 BinarySearchTree？您可以通过将数据转储到字典中轻松处理此问题。

如果 BinarySearchTree 是作业的一部分，在我看来它有错误。我将从它的 _put() 方法开始跟踪。

顺便说一句，您不应该使用`sys.setrecursionlimit(5000000)`来解决问题。除非您的数据大小在 2^5000000 的数量级，否则体面的二分搜索不会达到此限制。对于 116253 个单词，你有一个平衡的二叉树应该只需要 12 级递归。

# ruby-on-rails - ActiveScaffold vs DeviseInvitable

> ID：13363781
> 
> 赞同：0
> 
> 时间：2012-11-13T15:40:37.503
> 
> 标签：ruby-on-rails, devise, activescaffold

在设计资源上使用 Active Scaffold，使用 devise-invitatible 后出现错误

```
NameError in Admin/users#index

Showing /home/user/.rvm/gems/ruby-1.9.3-p286/gems/active_scaffold-3.2.16/frontends/default/views/_list_record_columns.html.erb where line #6 raised:

uninitialized constant User::InvitedBy

Extracted source (around line #6):

3:   <% column_value = authorized ? get_column_value(record, column) : active_scaffold_config.list.empty_field_text -%>
4: 
5:   <%= content_tag :td, column_attributes(column, record).merge(:class => column_class(column, column_value, record)) do %>
6:     <%= authorized ? render_list_column(column_value, column, record) : column_value %>
7:   <% end %>
8: <% end -%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:33:05.100

ActiveScaffold 3.2.x 不支持多态关联的链接，你可以在受邀的列 conf.columns[:invited_by].clear_link 中调用 clear_link

我在 rails-3.2 分支中禁用了这些链接，但它将在 3.2.18 中。您也可以使用 git 中的 gem (gem 'active_scaffold', :git => 'git://github.com/activescaffold/active_scaffold) 来使用支持多态关联链接的 master 分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T19:06:50.013

添加一些可能对某人有帮助的交叉链接：通过这个 Github 问题：[https ://github.com/scambra/devise_invitable/issues/247](https://github.com/scambra/devise_invitable/issues/247)

你可以放：

```
filter :email #fixes uninitialized constant User::InvitedBy 
```

在 app/admin/user.rb

（我希望这是可以接受的，并会帮助某人）

编辑：我还使用了 devise_invitable，它已被删除或从未正确迁移：

```
def change
  add_column :users, :invitation_token, :string
  add_column :users, :invitation_created_at, :datetime
  add_column :users, :invitation_sent_at, :datetime
  add_column :users, :invitation_accepted_at, :datetime
  add_column :users, :invitation_limit, :integer
  add_column :users, :invited_by_id, :integer
  add_column :users, :invited_by_type, :string
  add_index :users, :invitation_token, :unique => true
end

# Allow null encrypted_password
change_column :users, :encrypted_password, :string, :null => true
# Allow null password_salt (add it if you are using Devise's encryptable module)
change_column :users, :password_salt, :string, :null => true 
```

通过：[https ://github.com/scambra/devise_invitable](https://github.com/scambra/devise_invitable)

# ruby - 在 Ruby 中使用正则表达式

> ID：13363784
> 
> 赞同：0
> 
> 时间：2012-11-13T15:40:51.577
> 
> 标签：ruby, regex

我有一个正则表达式，我正在尝试在 Ruby 中使用它。这是我的正则表达式，当我添加双转义键时它在 Java 中工作

```
\(\*(.*?)\*\) 
```

我知道这是一个简单的问题，但是我将如何将其编写为 ruby​​ 表达式并将其设置为等于变量？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:46:37.520

试试这个：

```
myregex = /\(\*(.*?)\*\)/ 
```

需要明确的是，这只是将正则表达式保存到变量中。要使用它：

```
"(**)" =~ myregex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:43:49.557

试试这个：

```
if /\(\*(.*?)\*\)/ === "(*hello*)"
  content = $1 # => "hello"
end 
```

[http://rubular.com/r/7eCuPX3ri0](http://rubular.com/r/7eCuPX3ri0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:48:06.613

正则表达式是 Ruby 中的原生类型（实际的类是“Pattern”）。你可以写：

```
mypat = /\(\*(.*?)\*\)/ 
```

[看起来像'（*'/'*）'对之间的任何东西，是吗？]

然后你可以做

```
m = mypat.match(str)
comment = m[1] 
```

...或者，更紧凑

```
comment = mypat.match(str)[1] 
```

# php - 检查重复的 SQL 或 php？

> ID：13363796
> 
> 赞同：0
> 
> 时间：2012-11-13T15:41:38.827
> 
> 标签：php, sql

我的用户数据库中有一个字段，即注册时生成的 6 位数字。我`mt_rand(100000, 999999)`用来生成数字。

现在问题来了，为了确保没有人得到相同的数字，我需要将字段设为唯一（我认为这似乎是最好的）而不是一些 PHP 代码。也许还有其他我不知道的方法。问题是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:44:03.533

### 您可以使用 PHP 执行此操作。

首先给`unique`字段一个约束。

```
if (mysqli_errno() == 2027)
    mysqli_query("INSERT INTO ... {mt_rand()}"); 
```

因此，一旦您插入重复值，它就会给出一个错误代码`2027`，即重复。您可以重新提交查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:46:59.503

你为什么不

*   使用嵌套选择来获取 max(user_id)，增加它并将该值用于新用户？
*   创建一个仅包含当前用户 ID 的表并获取、增加并使用该值来创建新用户？
*   使用 AUTO_INCREMENT 列？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:48:14.897

使用`AUTO_INCREMENT`列。

执行查询以检查生成的号码是否已经存在是一个不好的解决方案，并且随着越来越多的用户注册，因为使用了更多的号码而变得更糟，因此您需要跟踪所有生成的号码以始终生成有效的号码。

对于一`AUTO_INCREMENT`列，这会*“自动”*发生。

# c# - 具有复杂类型的数据合约序列化

> ID：13363806
> 
> 赞同：1
> 
> 时间：2012-11-13T15:41:56.097
> 
> 标签：c#, .net, serialization, datacontractserializer

我正在使用数据协定序列化来序列化 XML 中的以下类：

```
[DataContract]
public partial class Foo
{
    [DataMember]
    public string MyString { get; set; }
    [DataMember]
    public int MyInt { get; set; }
    [DataMember]
    public Bar MyBar { get; set; }
}

[DataContract]
public class Bar
{
    public int BarId { get; set; }
    [DataMember]
    public string BarField { get; set; }
} 
```

当我序列化它时，它会生成这样的 XML：

```
<Foo>
    <MyString>My text</MyString>
    <MyInt>2</MyInt>
    <MyBar>
        <BarField>My bar field</BarField>
    </MyBar>
</Foo> 
```

我想做的是让该`MyBar`字段不显示为复杂类型，而是像这样：

```
<Foo>
    <MyString>My text</MyString>
    <MyInt>2</MyInt>
    <MyBar>My bar field</MyBar>
</Foo> 
```

我是数据合同序列化的新手，还没有找到任何类型的教程来解决我的问题。我什至不知道这是否可能，但我想在我放弃之前我会问一下，并按照它的方式处理它或找到更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:55:45.497

通过将数据类装饰为`DataContract`，您本质上设置了数据在序列化时将被表示的结构（Xml、Json 等）。

我是否可以建议您将“业务实体”和“序列化实体”的关注点从您的数据类中分离出来，例如，如果`Foo`+`Bar`是您在内存中或数据的 ORM 表示，则从它们中删除`[DataContract]`s：

```
public partial class Foo
{
    public string MyString { get; set; }
    public int MyInt { get; set; }
    public Bar MyBar { get; set; }
}

public class Bar
{
    public string BarField { get; set; }
} 
```

然后，提供一个专门针对序列化格式的新类，用`DataContract`

```
[DataContract]
public partial class SerializableFoo
{
    [DataMember]
    public string MyString { get; set; }
    [DataMember]
    public int MyInt { get; set; }
    [DataMember]
    public string MyBar { get; set; }
} 
```

然后提供一个映射函数来从一个映射到另一个。LINQ 非常适合这种工作，如果类的属性名称大多相同，那么 AutoMapper 可以为您完成很多工作

例如

```
var wireFoo = new SerializableFoo()
{
    MyString = foo.MyString,
    MyInt = foo.MyInt,
    MyBar = foo.Bar.BarField // Do the projection / flattening here
}
// Serialize wireFoo here, or return it from a WCF Service, etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:45:41.160

您将其定义为复杂类型......这意味着它将通过这种方式。如果您不希望这样，请将 Foo 的数据合同更改为将 Bar 作为字符串，而不是复杂类型。

基本上，在 XML 术语中，您将类定义为 DataContract，将属性定义为 DataMembers，您正在创建复杂对象或包含元素的元素。在您介绍的情况下，您将更改您的第一个数据合同，使其不包含额外的复杂对象，只包含您想要的数据。

但是，当在这些 SOA 情况下应用 OO 设计时，根据您要完成的任务，其他复杂对象内部的复杂对象可能比充满属性的巨大复杂对象更容易处理，甚至更容易阅读。

为了得到你的结果，你会放弃你的 Bar 类，只在 Foo 中返回一个字符串。

```
[DataContract]
public partial class Foo
{
    [DataMember]
    public string MyString { get; set; }
    [DataMember]
    public int MyInt { get; set; }
    [DataMember]
    public string MyBar { get; set; }
} 
```

编辑：我想我的答案不够清楚，这是**不**，你不能得到你想要的东西并保持你的复杂类型。您的 XML 将根据您的 OO 设计进行结构化。

# javascript - 使用数组查询window.location.href中是否存在其中一个字符串

> ID：13363809
> 
> 赞同：1
> 
> 时间：2012-11-13T15:41:58.890
> 
> 标签：javascript, jquery

我目前单独搜索 window.location.href ：

window.location.href：`http://www.example.com/6CATA/folder/file.html`

```
var searchWinHref = window.location.href;
if(searchWinHref.indexOf("/6CATA/") > -1) {
  alert('6CATA is in the window.location.href');
} 
```

这会触发警报。

如何调整它以查询变量 searchWinHref 以匹配数组中的字符串之一？

```
var searchWinHref = window.location.href;
var searchWinArray = ['6CATA', '6CATB', '6CATC'];
if(searchWinHref.indexOf(searchWinArray)) {
  alert('alert which code is in the window.location.href');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:48:41.010

如果您的目标是更新的浏览器：（IE9+）

```
var isMatch = ['6CATA', '6CATB', '6CATC'].some(function(value) {
    return window.location.href.indexOf( value ) !== -1;
});

if ( isMatch ) {
    // do my alert stuff
} 
```

查看更多关于[Array.some](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)

**支持：**

```
"Feature         Chrome   Firefox (Gecko)   Internet Explorer   Opera   Safari
 Basic support   (Yes)    (Yes)             9                   (Yes)   (Yes) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:43:42.863

使用 for 循环：

```
var searchWinHref = window.location.href;
var searchWinArray = ['6CATA', '6CATB', '6CATC'];
for(var i = 0; i < searchWinArray.length; i++) {
  if(searchWinHref.indexOf(searchWinArray[i]) != -1) {
     alert(searchWinArray[i]);
     break;  // stop if we found one..
  }
} 
```

如果您想发挥创意，可以利用[jQuery .each() API](http://api.jquery.com/jQuery.each/)：

```
jQuery.each(searchWinArray, function() {
  //  `this`  now points to the current item in the array  
  if(searchWinHref.indexOf(this) != -1) {
     alert(this);
     return false;   // stop iterating if we found it
  }       
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:46:39.020

```
 var searchWinHref = window.location.href;
  var searchWinArray = ['6CATA', '6CATB', '6CATC'];
  var result = [];
  for(var i=0; i<searchWinArray.length; i++)
  {
     if(searchWinHref.indexOf(searchWinArray[i])) {
        result.push(searchWinArray[i]);
     }
  }
  alert(result.join(",")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T16:02:45.563

尝试

```
var href = window.location.href, s = ['6CATA', '6CATB', '6CATC'], i = s.length;

while( --i ) {
    if( href.indexOf( s[i] ) > -1 ) { 
        alert( "found" );
        break;
    }
} 
```

# vba - VBA 统计图表对象中的系列数

> ID：13363812
> 
> 赞同：2
> 
> 时间：2012-11-13T15:42:09.043
> 
> 标签：vba, excel, excel-2010

我知道这看起来很简单，但它似乎对我不起作用。我在“Sheet1”上有一张图表。它是工作表上唯一的图表。我想获得图表中的系列数。所以我使用：

```
Debug.Print ThisWorkbook.Sheets("Sheet1").ChartObjects(1).SeriesCollection.Count 
```

在即时窗口中得到答案。但是 VBA 给了我一个“对象不支持属性或方法”错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T15:48:45.630

您需要添加`Chart`：

```
Debug.Print ThisWorkbook.Sheets("Sheet1").ChartObjects(1).Chart.SeriesCollection.Count 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:47:50.123

尝试这个`Debug.Print ThisWorkbook.Sheets("Sheet1").ChartObjects(1).Chart.SeriesCollection.Count`

# reporting-services - SSRS 水平显示数据集结果

> ID：13363815
> 
> 赞同：7
> 
> 时间：2012-11-13T15:42:20.997
> 
> 标签：reporting-services

我的数据集中有以下数据

```
| Person | Bonus   |
  John   |  15,000
  Mary   |  20,000
  Steve  |  5,000
  Betty  |  10,000 
```

我想将我的表格布局为水平显示而不是垂直显示

```
John      15,0000        Mary      20,000
Steve     5,0000         Betty     10,000 
```

如何使用 SSRS 2008 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:28:24.473

要使行水平而不是垂直显示，您需要在人名上添加一个列组。右键单击表格中的 Detail 单元格，单击`Add Group`并单击`Column Group`-`Parent Group`和 Group By `Person`。这将显示`Person`为水平扩展的列，有点像矩阵。

但是，您显示的布局更像是使用多列布局。要使用多个列，请单击报表空白区域的任意位置并转到“属性”窗口（不要右键单击并选择“属性”，因为 SSRS 2008 的弹出对话框中不显示“列”属性），展开Columns 属性并输入`2`for `Columns`，然后像往常一样布局报表，注意多列加上列间距不超过页面宽度。

请注意，并非所有渲染器都支持多列，包括报表设计器和标准 HTML Web 渲染器，因此无论如何它们都只会显示一列 - 打印和 PDF 确实支持多列。但是，您可以使用一个 hack 来[伪造使用两个表显示多个列](https://stackoverflow.com/questions/10882784/ssrs-how-to-continue-data-to-next-column/10890383#10890383)。

# ios - 在后台上传时图像损坏

> ID：13363828
> 
> 赞同：0
> 
> 时间：2012-11-13T15:43:06.123
> 
> 标签：ios, image, asihttprequest

我正在为我的公司开发一个小图像共享应用程序。一切都很好，除了一件事：当我将图像上传到服务器并将应用程序切换到背景时，图像的一部分已损坏（全灰色）。

只要应用程序处于活动状态，似乎图像数据就会正确发送。一旦我切换到后台，它似乎什么也不发送。

作为记录，我使用 ASIHttpRequest，shouldContinueWhenAppEntersBackground 设置为 YES，并且我正在运行从 iOS 4.3 到 iOS 6.0 的应用程序。我正在使用ARC。

我试图“保留”（通过强引用）图像和数据，也没有。

以下是部分代码：

发送图像的 Web 服务

```
- (void)sendImage:(UIImage*)image forEmail:(NSString*)email
{
     NSString* uploadImage = [NSString stringWithFormat:[self completeUrlForService:SEND_PHOTO], email];
     NSURL* url = [NSURL URLWithString:[uploadImage stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
     NSLog(@"uploadImage %@", uploadImage);
     // setting that we will send a JSON object
     [self setRequestType:WebServiceWrapperTypePOSTRequest];
    // when posting a picture, it could take more time...
    self.request.timeOutSeconds = 4*60;
    [self.request setShouldContinueWhenAppEntersBackground:YES];
     // setting up the POST data
     [self addPostData:image forKey:@"fileContents"];
     // start the request
     [self startRequestForUrl:url userInfo:[NSDictionary dictionaryWithObject:SEND_PHOTO forKey:URL_KEY]];
} 
```

ASIHttpRequest 类的实际部分

```
self.request = [ASIHTTPRequest requestWithURL:url];
[self.request setShouldContinueWhenAppEntersBackground:YES];
NSString* key = [[self.postDictionnary allKeys] objectAtIndex:0];
UIImage* value = [self.postDictionnary valueForKey:key];
__strong NSData* data = UIImageJPEGRepresentation(value, 1.0);
if (!data) data = UIImagePNGRepresentation(value);
[self.request appendPostData:data];
[self.request setPostLength:data.length];    
[self.request setUserInfo:userInfo];
[self.request setDelegate:self];
[self.request startAsynchronous]; 
```

如果你们中的任何人有最小的想法，我会接受它！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:58:42.960

最后，我决定使用不同的库（MKNetworkKit），而不是发送 UIImage，而是将磁盘上的图像保存到 tmp 文件夹并发送文件。下载完成后，我只是删除磁盘上的图像。它的工作就像一个魅力:)

# c# - 同一个表'tableName'不能是两个嵌套关系中的子表

> ID：13363835
> 
> 赞同：3
> 
> 时间：2012-11-13T15:43:27.170
> 
> 标签：c#, xml, xslt, xsd.exe

使用[XSD.EXE](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)我生成了一个 *.cs 文件来序列化 XML。当我序列化我得到错误

`"The same table 'DefaultFont' cannot be the child table in two nested relations."`

为什么我会收到错误消息？我可以在不使用 XSLT 转换的情况下修复错误吗？

序列化代码

```
 StreamReader fs = new StreamReader(@"C:\path\DocumentSample.xml");
        XmlSerializer serializer = new XmlSerializer(typeof(PhysDocDocument));
        var result = serializer.Deserialize(fs) as PhysDocDocument;//exception thrown here 
```

示例 XML

```
<PhysDocDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <PhysDocNode HeaderVisible="true" Display="Summary" IsCollapsed="false" CopyForwardEnabled="true" IsHidden="false" Borders="false">
        <LinkedPluginId>00000000-0000-0000-0000-000000000000</LinkedPluginId>
        <Plugin xsi:type="PromptPlugin" ID="2446441e-6eb2-49ef-b8e3-28f638755b75">
            <CopyForwardChecked>true</CopyForwardChecked>
            <PromptBase xsi:type="MemoPrompt">
                <Label>Comment</Label>
                <DocumentValue>
                    <Paragraphs />
                    <DefaultFont FontFamily="Arial" SizeInPoints="10" Style="Regular" />
                </DocumentValue>
                <ShowLabel>false</ShowLabel>
                <RenderHeader>false</RenderHeader>
            </PromptBase>
        </Plugin>
    </PhysDocNode>
</PhysDocDocument> 
```

生成的代码

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class PhysDocDocument
{

    private PhysDocDocumentPhysDocNode[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PhysDocNode", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNode[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNode
{

    private string linkedPluginIdField;

    private PhysDocDocumentPhysDocNodePlugin[] pluginField;

    private string headerVisibleField;

    private string displayField;

    private string isCollapsedField;

    private string copyForwardEnabledField;

    private string isHiddenField;

    private string bordersField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string LinkedPluginId
    {
        get
        {
            return this.linkedPluginIdField;
        }
        set
        {
            this.linkedPluginIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Plugin", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePlugin[] Plugin
    {
        get
        {
            return this.pluginField;
        }
        set
        {
            this.pluginField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string HeaderVisible
    {
        get
        {
            return this.headerVisibleField;
        }
        set
        {
            this.headerVisibleField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Display
    {
        get
        {
            return this.displayField;
        }
        set
        {
            this.displayField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string IsCollapsed
    {
        get
        {
            return this.isCollapsedField;
        }
        set
        {
            this.isCollapsedField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string CopyForwardEnabled
    {
        get
        {
            return this.copyForwardEnabledField;
        }
        set
        {
            this.copyForwardEnabledField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string IsHidden
    {
        get
        {
            return this.isHiddenField;
        }
        set
        {
            this.isHiddenField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Borders
    {
        get
        {
            return this.bordersField;
        }
        set
        {
            this.bordersField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePlugin
{

    private string copyForwardCheckedField;

    private PhysDocDocumentPhysDocNodePluginPromptBase[] promptBaseField;

    private string idField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string CopyForwardChecked
    {
        get
        {
            return this.copyForwardCheckedField;
        }
        set
        {
            this.copyForwardCheckedField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PromptBase", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBase[] PromptBase
    {
        get
        {
            return this.promptBaseField;
        }
        set
        {
            this.promptBaseField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string ID
    {
        get
        {
            return this.idField;
        }
        set
        {
            this.idField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePluginPromptBase
{

    private string labelField;

    private string showLabelField;

    private string renderHeaderField;

    private PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue[] documentValueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Label
    {
        get
        {
            return this.labelField;
        }
        set
        {
            this.labelField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string ShowLabel
    {
        get
        {
            return this.showLabelField;
        }
        set
        {
            this.showLabelField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string RenderHeader
    {
        get
        {
            return this.renderHeaderField;
        }
        set
        {
            this.renderHeaderField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("DocumentValue", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue[] DocumentValue
    {
        get
        {
            return this.documentValueField;
        }
        set
        {
            this.documentValueField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue
{

    private string paragraphsField;

    private PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont[] defaultFontField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Paragraphs
    {
        get
        {
            return this.paragraphsField;
        }
        set
        {
            this.paragraphsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("DefaultFont", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont[] DefaultFont
    {
        get
        {
            return this.defaultFontField;
        }
        set
        {
            this.defaultFontField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont
{

    private string fontFamilyField;

    private string sizeInPointsField;

    private string styleField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string FontFamily
    {
        get
        {
            return this.fontFamilyField;
        }
        set
        {
            this.fontFamilyField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string SizeInPoints
    {
        get
        {
            return this.sizeInPointsField;
        }
        set
        {
            this.sizeInPointsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Style
    {
        get
        {
            return this.styleField;
        }
        set
        {
            this.styleField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:19:28.217

您生成的一些类在 XmlTypeAttribute 中设置了 AnonymousType=true。当我修改它并添加真实的类名时 - 错误消失了。这是完整的工作示例（请注意，我在 XmlTypeAttribute 中添加了“MemoPrompt”和“PromptPlugin”类名）：

```
using System.Xml.Serialization;
using System.IO;
using System;

class App
{
  static void Main()
  {
    StreamReader fs = new StreamReader(@"sample.xml");
    XmlSerializer serializer = new XmlSerializer(typeof(PhysDocDocument));
    var result = serializer.Deserialize(fs) as PhysDocDocument;  
    Console.WriteLine(result);
  }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class PhysDocDocument
{

    private PhysDocDocumentPhysDocNode[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PhysDocNode", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNode[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNode
{

    private string linkedPluginIdField;

    private PhysDocDocumentPhysDocNodePlugin[] pluginField;

    private string headerVisibleField;

    private string displayField;

    private string isCollapsedField;

    private string copyForwardEnabledField;

    private string isHiddenField;

    private string bordersField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string LinkedPluginId
    {
        get
        {
            return this.linkedPluginIdField;
        }
        set
        {
            this.linkedPluginIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Plugin", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePlugin[] Plugin
    {
        get
        {
            return this.pluginField;
        }
        set
        {
            this.pluginField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string HeaderVisible
    {
        get
        {
            return this.headerVisibleField;
        }
        set
        {
            this.headerVisibleField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Display
    {
        get
        {
            return this.displayField;
        }
        set
        {
            this.displayField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string IsCollapsed
    {
        get
        {
            return this.isCollapsedField;
        }
        set
        {
            this.isCollapsedField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string CopyForwardEnabled
    {
        get
        {
            return this.copyForwardEnabledField;
        }
        set
        {
            this.copyForwardEnabledField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string IsHidden
    {
        get
        {
            return this.isHiddenField;
        }
        set
        {
            this.isHiddenField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Borders
    {
        get
        {
            return this.bordersField;
        }
        set
        {
            this.bordersField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute("PromptPlugin")]
public partial class PhysDocDocumentPhysDocNodePlugin
{

    private string copyForwardCheckedField;

    private PhysDocDocumentPhysDocNodePluginPromptBase[] promptBaseField;

    private string idField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string CopyForwardChecked
    {
        get
        {
            return this.copyForwardCheckedField;
        }
        set
        {
            this.copyForwardCheckedField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PromptBase", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBase[] PromptBase
    {
        get
        {
            return this.promptBaseField;
        }
        set
        {
            this.promptBaseField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string ID
    {
        get
        {
            return this.idField;
        }
        set
        {
            this.idField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute("MemoPrompt")]
public partial class PhysDocDocumentPhysDocNodePluginPromptBase
{

    private string labelField;

    private string showLabelField;

    private string renderHeaderField;

    private PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue[] documentValueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Label
    {
        get
        {
            return this.labelField;
        }
        set
        {
            this.labelField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string ShowLabel
    {
        get
        {
            return this.showLabelField;
        }
        set
        {
            this.showLabelField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string RenderHeader
    {
        get
        {
            return this.renderHeaderField;
        }
        set
        {
            this.renderHeaderField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("DocumentValue", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue[] DocumentValue
    {
        get
        {
            return this.documentValueField;
        }
        set
        {
            this.documentValueField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValue
{

    private string paragraphsField;

    private PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont[] defaultFontField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Paragraphs
    {
        get
        {
            return this.paragraphsField;
        }
        set
        {
            this.paragraphsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("DefaultFont", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont[] DefaultFont
    {
        get
        {
            return this.defaultFontField;
        }
        set
        {
            this.defaultFontField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class PhysDocDocumentPhysDocNodePluginPromptBaseDocumentValueDefaultFont
{

    private string fontFamilyField;

    private string sizeInPointsField;

    private string styleField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string FontFamily
    {
        get
        {
            return this.fontFamilyField;
        }
        set
        {
            this.fontFamilyField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string SizeInPoints
    {
        get
        {
            return this.sizeInPointsField;
        }
        set
        {
            this.sizeInPointsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Style
    {
        get
        {
            return this.styleField;
        }
        set
        {
            this.styleField = value;
        }
    }
} 
```

# authentication - 如何在两个 Java 应用程序中使用 Kerberos 票证？

> ID：13363837
> 
> 赞同：0
> 
> 时间：2012-11-13T15:43:30.447
> 
> 标签：authentication, kerberos, jaas

我希望我在这里会很清楚：
让我们的用户使用 Kerberos 对应用程序 A 进行身份验证（代码使用 JAAS Krb5LoginModule）。
客户端现在也需要向应用程序 B 进行身份验证。
Kerberos 票证仍然有效。
如何使用我确保应用程序 B 的身份验证流不会尝试创建新的 Kerberos 票证？
当我使用 JAAS 时，我执行：（ `loginContext.login`
我当然将回调处理程序传递给提供者凭据和用作配置索引的名称，请参阅此处的[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/security/auth/login/LoginContext.html#LoginContext%28java.lang.String,%20javax.security.auth.callback.CallbackHandler%29)），当然，应用程序 A 和应用程序 B 的运行方式与不同的进程不同，
所以 loginContext 对象不会在它们之间共享。
如何在不同进程中运行的两个应用程序之间重用有效的 kerberos 票证，但用户使用相同的凭据（相同的 user@realm）
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:46:55.437

如果两个应用程序都在同一台物理/逻辑机器上，共享同一个 SPN 并且都在机器帐户下运行，是的，您可以重复使用服务票证，直到它过期。但这些实际上是由浏览器处理的。无论如何，你永远不会惹到他们。您的 SPNEGO 接受器会为您完成所有工作。

# sql - CrystalReports 的 Sybase 12 LEFT JOIN 性能问题

> ID：13363839
> 
> 赞同：0
> 
> 时间：2012-11-13T15:43:32.600
> 
> 标签：sql, performance, crystal-reports, left-join, sybase

我正在尝试优化这里经常使用的水晶报表。我成功地优化了许多查询，但我还有最后一个瓶颈：这是从报告生成的主查询。

```
SELECT
    A.*,
    B.*,
    C.*,
    D.*,
    E."N",
    F."N",
    G."N"
FROM
    A
LEFT OUTER JOIN B ON
    A."PK" = B."FK"
LEFT OUTER JOIN C ON
    A."PK" = C."FK"
LEFT OUTER JOIN D ON
    A."FK" = D."PK"
LEFT OUTER JOIN E ON
    A."PK" = E."FK"
LEFT OUTER JOIN F ON
    A."PK" = F."FK"
LEFT OUTER JOIN G ON
    A."PK" = G."FK"
WHERE A.PK = #### 
```

A、B、C 和 D 是表格。E,F,G 是简单的视图。

如您所见，报告生成了多个 LEFT JOINS。此查询需要 2.28 秒才能完成（来自 Plan Viewer 统计信息）。我确定了三个看起来有问题的连接。如果我从查询中删除 E、F、G，它几乎是即时的（来自相同统计数据的 0.0009 秒）

```
SELECT
    A.*,
    B.*,
    C.*,
    D.*
FROM
    A
LEFT OUTER JOIN B ON
    A."PK" = B."FK"
LEFT OUTER JOIN C ON
    A."PK" = C."FK"
LEFT OUTER JOIN D ON
    A."FK" = D."PK"
WHERE A.PK = #### 
```

我认为这可能是缓慢的观点，但如果我这样做......

```
SELECT *
FROM E
WHERE E.FK = #### 
```

...它也几乎是即时的（0.0009s）

表都有关于 PKs-FKs 的索引。视图 E、F、G 都返回一行或不返回以 [FK|N] 作为列的行，因此结果列是 NULL 或数字。

你知道我怎样才能快速完成这个查询吗？

PS：如果我用 INNER JOINS 替换 LEFT OUTER JOINS，主查询会变得很快...... :-/

或者尝试将此查询拆分为报表上的多个查询会是更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:48:17.223

问题可能是因为您正在创建一个巨大的笛卡尔积，其中包含 5 个以`A`某种方式全部连接的表（`A`并且`D`只会为该产品贡献一条记录）。拥有如此大的笛卡尔积将在 Sybase 内部消耗相当多的内存。您的查询很可能是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:56:09.917

我会创建函数来查找 E、F 和 G，而不是加入它们。这样，优化器就不太可能感到困惑并尝试做愚蠢的事情。

```
SELECT
    A.*,
    B.*,
    C.*,
    D.*,
    GET_E(A."PK"),
    GET_F(A."PK"),
    GET_G(A."PK")
FROM
    A
LEFT OUTER JOIN B ON
    A."PK" = B."FK"
LEFT OUTER JOIN C ON
    A."PK" = C."FK"
LEFT OUTER JOIN D ON
    A."FK" = D."PK"
WHERE A.PK = #### 
```

# android - 设备启动后两次调用 Android 小部件更新

> ID：13363840
> 
> 赞同：2
> 
> 时间：2012-11-13T15:43:32.317
> 
> 标签：android, widget, boot, reboot

设备重新启动后，我收到第一个 APPWIDGET_ENABLED，然后收到**两次**APPWIDGET_UPDATE。我花了很多时间在谷歌上搜索这个没有结果。有没有人有同样的经历？您是否找到避免两次调用更新的方法？

这是一些代码：

```
 <receiver android:name=".Widget" android:label="@string/app_name">
        <intent-filter>
             <action android:name="android.appwidget.action.APPWIDGET_UPDATE" /> 
        </intent-filter>
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/button_widget_provider" />
    </receiver>

public void onReceive(final Context context, final Intent intent) {
    super.onReceive(context, intent);
    final String action = intent.getAction();

    if  (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action) ) {
        Log.i(TAG, "update");
    } else if (AppWidgetManager.ACTION_APPWIDGET_ENABLED.equals(action) ) {
        Log.i(TAG, "enabled");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:18:30.360

> 您是否找到避免两次调用更新的方法？

您无法控制更新的次数。这取决于主屏幕和应用小部件框架。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-25T12:43:45.460

```
import java.util.ArrayList;

import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;

public class CopyOfWidgetProvider extends AppWidgetProvider {

    private static ArrayList<Integer> widgets = new ArrayList<Integer>();

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] widgetIDs) {
        super.onUpdate(context, appWidgetManager, widgetIDs);

        for (int widgetID : widgetIDs) {
            if (!widgets.contains(widgetID)) {
                widgets.add(widgetID);
                // this code will run only ONCE after reboot
                // loop is necessary in cases where there were more than one
                // instances of widget before reboot
            }
        }
    }

} 
```

# jquery - 用于 css 样式切换器的 jquery cookie

> ID：13363846
> 
> 赞同：1
> 
> 时间：2012-11-13T15:43:48.920
> 
> 标签：jquery, css, cookies

我正在尝试在 jquery 中成功创建样式表切换器，但是当我尝试使用 jquery.cookie 插件将更改保存在 cookie 中时，它不起作用..

这是jQuery代码：

```
$("#theme-cp ul li").click(function () {
    var $pattern = $(this).css("background-image");
    $("body").css("background-image",$pattern);
    $("#main-wrapper").css("background-image",$pattern);
    $.cookie('background',$pattern);
    alert($.cookie('background'));
}); 
```

警报用于检查，但它不起作用....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:16:51.113

我最近做了同样的事情，我得到了它的工作，想我会和你分享我的代码。

[jsFiddle](http://jsfiddle.net/sygad/BnwHs/)

**jQuery**

```
//If Cookie isn't blank (i.e. do we have a cookie set at all?)
if($.cookie('colour')!='')
{
    $('body').addClass($.cookie('colour'));  //set the body to the cookie colour
}

$('#accessibility-colours a').each(function(index)
{
    $(this).click(function(e)
    {
        e.preventDefault();

        switch(index)
        {
            //black text white background
            case 0:
                $('body').removeClass($.cookie('colour'));
                $('body').addClass('blackText-whiteBackground');
                $.cookie('colour', null);
                $.cookie('colour', 'blackText-whiteBackground',{ expires: 7, path: '/' });
            break;

            //black text yellow background
            case 1:
                $('body').removeClass($.cookie('colour'));
                $('body').addClass('blackText-yellowBackground');
                $.cookie('colour', null);
                $.cookie('colour', 'blackText-yellowBackground',{ expires: 7, path: '/' });
            break;

            //black text pink background
            case 2:
                $('body').removeClass($.cookie('colour'));
                $('body').addClass('blackText-pinkBackground');
                $.cookie('colour', null);
                $.cookie('colour', 'blackText-pinkBackground',{ expires: 7, path: '/' });
            break;

            //blue text white background
            case 3:
                $('body').removeClass($.cookie('colour'));
                $('body').addClass('blueText-whiteBackground');
                $.cookie('colour', null);
                $.cookie('colour', 'blueText-whiteBackground',{ expires: 7, path: '/' });
            break;

        }
    }); 
```

**CSS**

```
html, body                              {font:0.9em/1.1em "Arial", sans-serif}

/* Accesibility Icons */
#accessibility-colours                  {margin:0px; overflow:hidden;}
#accessibility-blackWhite               {background:url(../images/design/icon-accessibility-blackWhite.gif) 0 0 no-repeat}
#accessibility-blackYellow              {background:url(../images/design/icon-accessibility-blackYellow.gif) 0 0 no-repeat}
#accessibility-blackPink                {background:url(../images/design/icon-accessibility-blackPink.gif) 0 0 no-repeat}
#accessibility-blueWhite                {background:url(../images/design/icon-accessibility-blueWhite.gif) 0 0 no-repeat}

    #accessibility-colours a            {float:left; display:block; margin:6px 0 0; padding:4px; border:0; width:16px; height:16px;}
    #accessibility-colours a span       {margin:0; padding:0; position:absolute; top:-9999px; left:-9999px;}

/* Colours to be set for accessibility choice */
.blackText-whiteBackground              {background:white; color:black}
.blackText-yellowBackground             {background:yellow; color:black}
.blackText-pinkBackground               {background:pink; color:black}
.blueText-whiteBackground               {background:white; color:blue} 
```

**HTML**

```
<div id="accessibility-colours">
        <a id="accessibility-blackWhite" href="#" title="Black text / White background"><span>Black text / White background</span></a>
        <a id="accessibility-blackYellow" href="#" title="Black text / Yellow background"><span>Black text / Yellow background</span></a>
        <a id="accessibility-blackPink" href="#" title="Black text / Pink background"><span>Black text / Pink background</span></a>
        <a id="accessibility-blueWhite" href="#" title="Blue text / White background"><span>Blue text / White background</span></a>
    </div>

    <h1>This is the H1 tag</h1>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam facilisis nibh sed tortor blandit interdum semper leo ullamcorper. 
    Pellentesque gravida hendrerit accumsan. Mauris pretium blandit augue, suscipit ultricies libero aliquam sit amet. Aliquam egestas eleifend augue, 
    et hendrerit dolor dictum facilisis. Nulla facilisi. Integer auctor elementum purus id lobortis. Aliquam sit amet sem erat. Integer nec orci risus. 
    Quisque eu purus augue. Sed vehicula venenatis metus eget molestie. Proin vel ultrices augue. Duis in laoreet tellus. Proin eget gravida purus. 
    Donec ut placerat velit. Etiam ultrices, nibh nec ultricies iaculis, odio orci porta dui, quis semper nunc ante interdum augue. 
    Curabitur elementum orci interdum nibh adipiscing blandit. Curabitur diam arcu, semper id facilisis id, tempor et nisi. 
    Vestibulum nisl dolor, aliquam et posuere ut, tincidunt sed mi.</p> 
```

# c# - XML 反序列化返回空数组

> ID：13363850
> 
> 赞同：4
> 
> 时间：2012-11-13T15:43:56.623
> 
> 标签：c#, xml, xml-serialization

又一个 XML 反序列化问题。

我检查了其他几个线程并在那里尝试了大多数解决方案，但无济于事。我收到的 XML 无法修改（或至少不容易修改），它是：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?> 
<ActueleVertrekTijden>
    <VertrekkendeTrein>
        <RitNummer>37047</RitNummer>
        <VertrekTijd>2012-11-13T15:40:00+0100</VertrekTijd>
        <EindBestemming>Sneek</EindBestemming>
        <TreinSoort>Stoptrein</TreinSoort>
        <Vervoerder>Arriva</Vervoerder>
        <VertrekSpoor wijziging=\"false\">3</VertrekSpoor>
    </VertrekkendeTrein>
    <VertrekkendeTrein>
        <RitNummer>10558</RitNummer>
        <VertrekTijd>2012-11-13T15:46:00+0100</VertrekTijd>
        <EindBestemming>Rotterdam Centraal</EindBestemming>
        <TreinSoort>Intercity</TreinSoort>
        <RouteTekst>Heerenveen, Steenwijk, Utrecht C</RouteTekst>
        <Vervoerder>NS</Vervoerder>
        <VertrekSpoor wijziging=\"false\">4</VertrekSpoor>
    </VertrekkendeTrein>
    <VertrekkendeTrein>
        <RitNummer>37349</RitNummer>
        <VertrekTijd>2012-11-13T15:59:00+0100</VertrekTijd>
        <EindBestemming>Groningen</EindBestemming>
        <TreinSoort>Sneltrein</TreinSoort>
        <RouteTekst>Buitenpost</RouteTekst>
        <Vervoerder>Arriva</Vervoerder>
        <VertrekSpoor wijziging=\"false\">5b</VertrekSpoor>
    </VertrekkendeTrein>
</ActueleVertrekTijden> 
```

有更多元素（总是至少 10 个）

现在这些也是我反序列化的类：

```
[Serializable, XmlRoot(ElementName="ActueleVertrekTijden", DataType="VertrekkendeTrein", IsNullable=false)]
public class ActueleVertrekTijden
{
    [XmlArray("ActueleVertrekTijden")]
    public VertrekkendeTrein[] VertrekLijst { get; set; }
}

[Serializable]
public class VertrekkendeTrein
{
    [XmlElement("RitNummer")]
    public string RitNummer { get; set; }
    [XmlElement("VertrekTijd")]
    public string VertrekTijd { get; set; }
    [XmlElement("EindBestemming")]
    public string EindBestemming { get; set; }
    [XmlElement("Vervoerder")]
    public string Vervoerder { get; set; }
    [XmlElement("VertrekSpoor")]
    public string VertrekSpoor { get; set; }
} 
```

其他的我暂时省略了。我添加的 XmlRoot 部分是因为出现“xmlsn =”-错误。所以不得不设置XmlRoot。

现在解串器：

```
 public ActueleVertrekTijden Deserialize<ActueleVertrekTijden>(string s)
    {
        var ser = new XmlSerializer(typeof(ActueleVertrekTijden));
        ActueleVertrekTijden list = (ActueleVertrekTijden)ser.Deserialize(new StringReader(s));

        return list;
    } 
```

它确实返回了一个 ActueleVertrekTijden 类，但 VertrekLijst 数组仍然为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:15:53.980

您需要省略包装命名空间，因为您的数组元素直接出现在容器`ActueleVertrekTijden`类下方，没有任何集合`wrapper`元素。即改变

```
 [XmlArray("ActueleVertrekTijden")]
 public VertrekkendeTrein[] VertrekLijst { get; set; } 
```

到

```
 [XmlElement("VertrekkendeTrein")]
 public VertrekkendeTrein[] VertrekLijst { get; set; } 
```

参考[这里](https://stackoverflow.com/questions/8199738/how-do-i-get-xmlserializer-to-not-serialize-container-tags)

# ios - 下载文件到 Documents 目录

> ID：13363858
> 
> 赞同：1
> 
> 时间：2012-11-13T15:44:21.177
> 
> 标签：ios, xcode, nsdocumentdirectory

我正在尝试将下载的文件复制到应用程序文档目录中的特定文件夹，但似乎无法正常工作。我正在使用的代码是：

```
NSString *itemPathString = @"http://pathToFolder/folder/myFile.doc";
NSURL *myUrl = [NSURL URLWithString:itemPathString];

NSArray *paths = [fm URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask];

NSURL *folderPath = [[paths objectAtIndex:0] URLByAppendingPathComponent:@"folder"];
NSURL *itemURL = [documentsPath URLByAppendingPathComponent:@"myFile.doc"];

// copy to documents directory asynchronously
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSFileManager *theFM = [[NSFileManager alloc] init];
    NSError *error;
    [theFM copyItemAtURL:myUrl toURL:itemURL error:&error];
    }
}); 
```

我可以正常检索文件，但无法复制它。谁能告诉我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:31:23.293

如果从服务器下载文件，如果它是一个相当小的文件（例如，以 kb 为单位，而不是 mb），您可以使用[`dataWithContentsOfURL`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/uid/20000172-BBCGJEAC). 您可以使用该方法将文件加载到内存中，然后使用`NSData`实例方法`writeToFile`保存文件。

但是，如果它是一个较大的文件，您将需要使用[`NSURLConnection`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)，它不会尝试将整个文件保存在内存中，而是在适当的时候将其写入文件系统。但是，这里的技巧是，如果您想下载多个文件，则必须按顺序下载它们，或者封装它们，`NSURLConnection`这样`NSOutputStream`您就可以为每个同时下载的文件提供单独的副本。

我已经上传了一个项目，[下载管理器](https://github.com/robertmryan/download-manager)，它演示了`NSURLConnection`实现的样子，但这并不简单。您可能更愿意考虑使用已建立的第三方库，例如[ASIHTTPRequest](https://github.com/pokeb/asi-http-request/tree/)或[RestKit](http://restkit.org)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:44:14.990

如果要访问具有给定名称的文件夹，则应检查它是否存在，如果不存在则创建它。这可以很容易地做到这一点：

```
NSString *folder = [documentsPath stringByAppendingPathComponent:folderName];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error = nil;
if (![fileManager fileExistsAtPath:folder]) {
    [fileManager createDirectoryAtPath:folder withIntermediateDirectories:YES attributes:nil error:&error];
}
if (error != nil) {
    NSLog(@"Some error: %@", error);
    return;
} 
```

**编辑**

如果您想检查文件夹是否在您的设备上正确创建，请转到 Organizer -> Devices -> [YourDevelopingDeviceWhereTheAppWasInstalled] -> Applications -> [YourApplication]

在下半部分，您至少应该看到一些文件夹，例如 Documents。如果成功，您创建的文件夹也是如此。

![在此处输入图像描述](../Images/921efafc73cee1b435a5d4efb2b51cc3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:00:17.020

您需要在复制文件之前创建任何中间目录。检查 Simulator 文件夹以查看是否在应用程序 Documents 文件夹中创建了“文件夹”目录。

模拟器路径是 /Users/$username/Library/Application Support/iPhone Simulator/

# asp.net - 上传超过 1mb 是不可能的

> ID：13363860
> 
> 赞同：0
> 
> 时间：2012-11-13T15:44:24.033
> 
> 标签：asp.net, sql-server

我在数据库中的表中使用了以下结构。我无法在数据库中上传超过 1mb 的文件，请帮忙看看是什么问题。

fileid(int), FileName(varchar(100)), ContentType (varchar(75)), data varbinary(MAX)

```
protected void btnUpload_Click(object sender, EventArgs e)
{

    // Read the file and convert it to Byte Array

    string filePath = FileUpload1.PostedFile.FileName;

    string filename = Path.GetFileName(filePath);

    string ext = Path.GetExtension(filename);

    string contenttype = String.Empty;

    //Set the contenttype based on File Extension

    switch (ext)
    {

        case ".doc":

            contenttype = "application/vnd.ms-word";

            break;

        case ".docx":

            contenttype = "application/vnd.ms-word";

            break;

        case ".xls":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".xlsx":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".jpg":

            contenttype = "image/jpg";

            break;

        case ".png":

            contenttype = "image/png";

            break;

        case ".gif":

            contenttype = "image/gif";

            break;

        case ".pdf":

            contenttype = "application/pdf";

            break;

    }

    if (contenttype != String.Empty)
    {

        Stream fs = FileUpload1.PostedFile.InputStream;

        BinaryReader br = new BinaryReader(fs);

        Byte[] bytes = br.ReadBytes((Int32)fs.Length);
        //insert the file into database

        Transmittallistfortest transmittalList = (Transmittallistfortest)DetailsView1.FindControl("Transmittallistfortest1");
        GridView g3 = transmittalList.FindControl("GridViewTtransmittals") as GridView;
        foreach (GridViewRow di in g3.Rows)
        {

            if (di.RowType == DataControlRowType.DataRow)
            {

                RadioButton rad = di.FindControl("RadioButton1") as RadioButton;
                //Giving Error:Object reference not set to an instance of an object.
                rad.CheckedChanged += new EventHandler(MyCheckedChangeEventHandler);
                if (rad != null && rad.Checked)
                {
                    var w = di.RowIndex;

                    string s = ((HyperLink)di.Cells[1].Controls[0]).Text;

                    var tr = from transmittal in _DataContext.tbltransmittalNos
                             where transmittal.TRANSMITTAL == s
                             select transmittal.TransID;
                    int _transid = tr.SingleOrDefault();
                    // int _transid = Convert.ToInt32(tr.SingleOrDefault()); 
                    Label1.Text = _transid.ToString();
                    Label2.Text = s;
                }
            }
        }

        tblFile fn = new tblFile();

        fn.DocId = _DocID;
        fn.TransId = Convert.ToInt32(Label1.Text);
        fn.FileName = filename;
        fn.ContentType = contenttype;
        fn.Data = bytes;

        // BookAuthor bookAuthor = new BookAuthor();
        _DataContext.tblFiles.InsertOnSubmit(fn);
        _DataContext.SubmitChanges();
        //doctranscon.TransmitToConid = Convert.ToInt32(ddlTransmittaltoCon.SelectedValue);

        lblMessage.ForeColor = System.Drawing.Color.Green;

        lblMessage.Text = "File Uploaded Successfully";

        // Update display
        DisplayDocument();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:51:48.443

1.  分配数组大小的数据最终会失败。研究[流式语义](http://rusanu.com/2010/12/28/download-and-upload-images-from-sql-server-with-asp-net-mvc/)。
2.  检查您配置的[maxRequestLength](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:53:21.577

您没有分享您的具体错误，但这可能是原因。增加 web.config 文件中的**maxRequestLength**大小。默认值为 4096 KB (4 MB)。

```
<configuration>
   <system.web>
      <httpRuntime maxRequestLength="size in kbytes"
      ...             
      /> 
```

# java - 从 JLabel 中删除 MouseListener()

> ID：13363865
> 
> 赞同：0
> 
> 时间：2012-11-13T15:44:49.307
> 
> 标签：java, swing, jlabel, mouselistener

我`MouseListener`在一个`JLabel`. 现在，如果我想禁用`MouseListener`与 关联的这个`JLabel`，当单击标签一次时，我该怎么做。

我知道有一种很好的方法可以在单击标签时设置布尔或 int 变量，然后调用方法并`MouseListener`在那里删除，但我想学习一种紧凑而简单的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:48:32.663

在您的鼠标侦听器中：

```
public void mouseClicked(MouseEvent event) {
    // Do stuff...
    ((Component) event.getSource()).removeMouseListener(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:48:26.267

有什么问题`label.removeMouseListener(listener)`？它工作得很好。如果要创建删除自身的侦听器，请调用`label.removeMouseListener(this)`

# c# - 如何仅指定要传递的某些 FaultExceptions？

> ID：13363869
> 
> 赞同：0
> 
> 时间：2012-11-13T15:44:56.790
> 
> 标签：c#, asp.net, wcf, exception, faultexception

我有一个 WCF 服务，并且有一个继承自 FaultException 的 CustomFaultException 类。

我设置了以下代码：

```
<serviceDebug includeExceptionDetailInFaults="False"/> 
```

但它总是返回带有完整堆栈跟踪详细信息的异常。

如何配置或实现 WCF 服务以便只返回某些类型的异常，例如 CustomFaultException？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:20:34.483

将以下属性添加到您的服务操作：

```
[FaultContract(typeof(CustomFaultException))] 
```

在您的捕获中，添加以下内容：

```
throw new CustomFaultException("Custom Fault Message"); 
```

这将阻止将完整的堆栈跟踪异常详细信息发送到客户端。

# php - Drupal 7 主题“前”与其他页面不同

> ID：13363870
> 
> 赞同：2
> 
> 时间：2012-11-13T15:45:07.850
> 
> 标签：php, drupal, drupal-7, drupal-theming

我需要一个用于“首页”的自定义模板和一个用于所有其他页面的自定义模板。

实现这一目标的最佳实践是什么？

我需要制作 2 个主题还是可以使用相同的主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:45:46.067

创建 2 个模板文件：

1.  `page--front.tpl.php`为首页。

2.  `page.tpl.php`对于其他页面。

如需进一步阅读，请查看[Drupal 7 模板建议](http://drupal.org/node/1089656)。

不要忘记在创建每个新模板文件后清除站点缓存。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:32:53.167

如果您是 Drupal 主题的新手，请尝试使用 Devel 和 Themer 开发者模块 ( [http://drupal.org/project/devel_themer](http://drupal.org/project/devel_themer) )

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:17:16.787

如果您还不熟悉，我想将您引向“The Drupal Way”（使用灵活的基于 UI 的模块）。

如果您需要在页面上显示列出的信息（例如新闻提要或类似信息），我将使用[面板](http://drupal.org/project/panels)和可能的[视图](http://drupal.org/project/views)来解决此问题。

这为设置站点的内容显示提供了一种完全不同的方法，这是 Drupal 生态系统的总体方向。

# android - Android 4.0 键盘的 Next 功能

> ID：13363874
> 
> 赞同：0
> 
> 时间：2012-11-13T15:45:15.293
> 
> 标签：android, keyboard, next

在我的编辑文本中，我将键盘设置为具有“下一步”按钮。问题是，当在 Android 4.0 上按下 Next 按钮时（我在模拟器和 Android 4.0 设备上进行了测试），光标位于单词的开头而不是单词的末尾。我该怎么办？

谢谢

注意：在我的摩托罗拉 Defy (Android 2.2) 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:51:01.020

您可以覆盖editText的onFocusChangeListener，并且当焦点更改时执行类似的操作以将光标设置到文本的末尾

```
editText.setSelection(editText.length - 1); 
```

# parameters - CDE 图表了解数据源的选择器

> ID：13363875
> 
> 赞同：1
> 
> 时间：2012-11-13T15:45:20.553
> 
> 标签：parameters, dashboard, pentaho

我有一个图表和一个表格，我想让他们知道选择器选项，然后选择相应的数据源。这将避免我放入三个表格和三个图表来显示相同​​的信息，但分组和排序不同。

图表被称为：MainBar

我的数据源是：get_Line get_Category get_Type

参数、选择器和监听器为：“metric”

在这里和那里阅读，我设法放置了一个 Pre Execution javascript 来尝试使其工作，但事实并非如此。这是javascript

```
function changeData(){
var cadDataSource="get_"+metric;
this.chartDefinition.dataAccessId = cadDataSource;
render_MainBar.update();
} 
```

我使用了两个alert（更改前后）来调试它，我可以看到实际上是根据参数更改变量this.ChartDefinition.dataAccessId。但图表仍会刷新，但仅显示默认数据源，即图表定义中设置的数据源。

这仅适用于图表。对于桌子，我完全迷失了。我不知道要设置哪些变量。

有任何想法吗？

# python - 如何使 Homebrew Python 成为我使用的主要工具？

> ID：13363878
> 
> 赞同：0
> 
> 时间：2012-11-13T15:45:22.530
> 
> 标签：python, homebrew

> **可能重复：**
> [默认情况下python自制软件](https://stackoverflow.com/questions/5157678/python-homebrew-by-default)

当我在终端中键入以下内容时，我得到了这个：我需要它指向 Homebrew Python。

```
whereis python = /usr/bin/python
which python  = /Library/Framewroks/Python.framework/Versions/2.7/bin/python 
```

# objective-c - Objective-c 初始化属性

> ID：13363881
> 
> 赞同：0
> 
> 时间：2012-11-13T15:45:37.167
> 
> 标签：objective-c, cordova, initialization

我是我的 2.0.1 phonegap 应用程序，我向 MainViewController 添加了一个属性

```
@property (nonatomic, readwrite, copy) NSString* test; 
```

然后我在 initWithNibName 方法中初始化属性，就像 phonegap 建议的那样。

```
test = @"test"; 
```

这很好用，但是我看到有些人执行以下操作来初始化那里的属性：

```
test = [[NSString alloc] init]; 
```

我认为@property 已经被分配到内存并已经初始化为字符串，所以不需要做所有这些 o.0 :S？

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:50:36.837

要正确初始化您应该使用的属性`self.test = @"test"`。使用`[[NSString alloc] init];`是绝对没有意义的，任何人都没有理由这样做。如果你想要一个空字符串而不是`nil`类类型的成员变量（和综合属性）的默认值，你可以简单地将 test 设置为`@""`, `self.test = @""`。

> 我认为@property 已经被分配到内存并已经初始化为字符串，所以不需要做所有这些 o.0 :S？

正如我上面提到的，成员变量，包括那些由属性合成的，将被设置为它们的默认值，`nil`在这种情况下。

# cloud - 在云中加载/保存小数据（可靠）？

> ID：13363887
> 
> 赞同：0
> 
> 时间：2012-11-13T15:45:58.973
> 
> 标签：cloud

有类似的问题：

[寻找一种简单而简约的方式将小数据包存储在云端](https://stackoverflow.com/questions/4281111/looking-for-a-simple-and-minimalistic-way-to-store-small-data-packets-in-the-clo)

我的是这个：1）它需要可靠 2）它需要安全

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T18:35:36.877

您最好的选择是在大型云提供商之一上使用对象存储。需要注意的关键是*不要*使用 CDN 并使用 API 来访问您的文件（所有大型提供商都有 Python、Java、.NET、PHP、Ruby、node.js 的客户端）。

这是一个小清单：

*   Rackspace 的[CloudFiles](http://www.rackspace.com/cloud/files/)，基于[OpenStack Swift](https://wiki.openstack.org/wiki/Swift)构建。

*   亚马逊的[简单存储服务 (S3)](http://aws.amazon.com/s3/)

*   最小权限的[简单安全存储服务](https://leastauthority.com/)

*   微软的[Azure Blob 存储](http://www.windowsazure.com/en-us/documentation/services/storage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:24:07.893

Nasuni 有一份关于云存储状态的免费白皮书，您可以查看主要云提供商（亚马逊、Azure、谷歌）的基准。它们的可靠性、性能等。

[http://www6.nasuni.com/the-state-of-cloud-storage-in-2013-nasuni-industry-report.html](http://www6.nasuni.com/the-state-of-cloud-storage-in-2013-nasuni-industry-report.html)

所有主要提供商都提供：免费进入其云、全球 CDN、基于证书的 https 安全性和 3x/6x 冗余备份。（需要注意的是较小/较便宜的供应商并未提供上述所有内容）。

所有主要的云提供商都为其云平台提供高级 API。用于发送小数据包。但是，我会对低级 API 功能感兴趣。例如，您可以在 Azure 中拥有一个 40 gig 的文件并下载/操作最后 16 位，而不是在本地下载整个文件。一些云提供商并未全部提供的另一件事是存储 URL 后面的自定义域，这有时很重要。

如果您需要进行自动化，API 语言可能对您很重要。如果你看看 Google，它们支持 Java、Python、Go 和 PHP……如果你需要 .NET，Azure 在那里有更好的支持。

在我看来，任何主要提供商都不会出错，最好的部分是测试 Azure/Amazon/Google 的上传/存储是否真的很便宜，即使对于大量文件也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T12:48:45.483

看看这个：

[https://www.dropbox.com/developers/datastore/tutorial/http](https://www.dropbox.com/developers/datastore/tutorial/http)

您可以从 JSON 或 HTTP 发布的角度使用它。

（我最近问过：[临时云存储和发送脚本](https://stackoverflow.com/questions/21852093/temporary-cloud-storage-and-sending-script)）

# javascript - 日期输出支持所有浏览器 javascript

> ID：13363889
> 
> 赞同：0
> 
> 时间：2012-11-13T15:46:10.690
> 
> 标签：javascript, date, browser-support

```
function getDateFromUrl(url)
{
var urlDateString = url.substring(url.lastIndexOf('/day/')+5);

urlDateString =urlDateString.replace("/index-1.html","");
urlDateString =urlDateString.replace("th",""); 
urlDateString =urlDateString.replace("rd",""); 
urlDateString =urlDateString.replace("st",""); 
urlDateString =urlDateString.replace(","," "); 
urlDateString =urlDateString.replace("/"," "); 
urlDateString =urlDateString.replace("-"," ");
urlDateString =urlDateString.replace("."," ");
urlDateString =urlDateString.replace(","," "); 
urlDateString =urlDateString.replace("/"," "); 
urlDateString =urlDateString.replace("-"," ");
urlDateString =urlDateString.replace("."," ");

return new Date(urlDateString);
}

function getDayFromDate(dt)
{

 switch (dt.getDay())
 {
 case 0:
   x="Sunday";
   break;
 case 1:
   x="Monday";
   break;
 case 2:
   x="Tuesday";
   break;
 case 3:
   x="Wednesday";
   break;
 case 4:
   x="Thursday";
   break;
 case 5:
   x="Friday";
   break;
 case 6:
   x="Saturday";
   break;
 }
return x;
} 
```

[http://jsfiddle.net/FyEMD/](http://jsfiddle.net/FyEMD/)

IE 和opera 不支持这个脚本。因为它们不输出日期，而 chrome 和 firefox 确实输出日期。会不会是因为他们不支持字符串格式的日期。如果是这样，日期必须采用哪种格式。

输入看起来像 C:\example\day\12-October-12 输出应该是 date: Oct 12 2012 day: Friday 代码的方式是 atm 它在 chrome 和 firefox 中工作

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T20:40:23.370

使用以下格式之一进行跨浏览器`Date`构建：

```
"2010"

"2010-06"

"2010-06-09"

"2010-06-09T15:20:00Z"

"2010-06-09T15:20:00-07:00"

"2010/06/09"

"2009/6/9"

"2010/6/9 12:34"

"2010/6/9 12:34:56"

"June 9, 2010"

"2010 June 9" 
```

# android - 如何在一段时间内调用异步任务

> ID：13363890
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:46:15.540
> 
> 标签：android

我想定期获取音频元数据，例如歌曲名称和艺术家姓名。为此，我在异步任务中使用媒体元数据检索器。所以问题是

1) 在 AsyncTask 类中，我如何将文本分配给 Taxt-view。

2）我如何在特定时间内调用该异步任务类，例如 30 秒的时间间隔。

3）有些文本我每天只需要获取一次。那么如何检查上次获取数据的时间呢？还有哪个是存储获取数据并将其用于 Listview 的最佳方法？（我的意思是我需要将其存储到数据库或任何哈希图或数组列表中？）

这是元数据检索器代码

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.afragment, container, false);
}

@Override
public void onStart() {
    super.onStart();
    initfrag();
}

private void initfrag() {
    // TODO Auto-generated method stub
    lv1=(ListView)getView().findViewById(R.id.list);

    tv=(TextView)getView().findViewById(R.id.tv1);
    tv1=(TextView)getView().findViewById(R.id.tv2);
    LongOperation task=new LongOperation();
    task.execute();
}

class LongOperation extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... params) {
        MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
        String link = "http://xyz-radio-link.ogg";
        metaRetriever.setDataSource(link, new HashMap<String, String>());
        // get mp3 info
        title = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE);
        artist = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST);
        metaRetriever.release();  
        refreshtext();
        return null;
    }      
    @Override
    protected void onPostExecute(String result) {               
    }
    @Override
    protected void onPreExecute() {
    }
    @Override
    protected void onProgressUpdate(Void... values) {       
    }
}

public void refreshtext() {
    // TODO Auto-generated method stub
    Typeface tf = Typeface.createFromAsset(getActivity().getAssets(),"fonts/Roboto-Regular.ttf");
    tv.setTypeface(tf);
    tv1.setTypeface(tf);
    tv.setText(artist);
    tv1.setText(title);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:02:48.667

> 1) 在 AsyncTask 类中，我如何将文本分配给 Taxt-view。

你不能因为你没有在 UIThread 上运行。恕我直言，最佳做法是使用`onPostExecute()`. 另一种选择是`runOnUIThread()`与您自己的`Runnable`课程一起使用。

> 2）我如何在特定时间内调用该异步任务类，例如 30 秒的时间间隔。

您可以使用[ScheduledExecutorService](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)。

> 3）有些文本我每天只需要获取一次。那么如何检查上次获取数据的时间呢？

将最后一次保存到[您的数据库](http://developer.android.com/guide/topics/data/data-storage.html)中。

> 存储获取数据并将其用于 Listview 的最佳方法？（我的意思是我需要将其存储到数据库或任何哈希图或数组列表中？）

子类（扩展）[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)以满足您自己的需要，然后您可以直接使用它来提供`ListView`. [这](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterintro)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:59:49.907

使用处理程序，您可以使用[postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)创建每 30 秒运行一次的 runnable 。

# jquery - 带有 $(this).has() 的 jQuery 过滤器函数

> ID：13363895
> 
> 赞同：1
> 
> 时间：2012-11-13T15:46:36.227
> 
> 标签：jquery, jquery-selectors

我想这种问题对你们中的一半人来说很容易，但我已经坚持了几个小时，所以，我非常感谢你的帮助。这是我一直在努力解决的问题：

我需要选择所有包含以 .`href`结尾的属性的链接元素`.pdf`。我提出了这个解决方案：

```
$('a[href$=".pdf"]').filter(function() {
    return $(this).parent().has('ul');
  })
}) 
```

`$(this).parent().has('**anytag**')`但是，无论是什么，它似乎总是返回 true `"anytag"`（我已经用 firebug 进行了检查）。所以，我的代码坏了，但我不明白为什么它会出现这种意外行为。你能指出我在这里的误解是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:49:13.210

[`.has()`](http://api.jquery.com/has/)本身就是一个过滤函数。它返回一个新的 jQuery 集合，其中包含与选择器匹配的元素作为其后代的元素。由于 jQuery 集是 thruthy，返回它们`.filter()`没有任何效果，因为没有任何东西被过滤掉。

您可以改为将`:has`选择器与子选择器结合使用：

```
$(':has(ul) > a[href$=".pdf"]'); 
```

# javascript - 一页网站上的非常简单的路由

> ID：13363898
> 
> 赞同：0
> 
> 时间：2012-11-13T15:46:38.723
> 
> 标签：javascript, jquery

我正在开发一个简单的单页网站，其中页面使用 scrollTo() javascript 库水平滚动。我有一个主页/关于/联系页面。我想知道是否有办法仍然使用某种形式的 URL 路由（例如 www.example.com/about）来获取 about 页面，并在导航中单击该页面时在浏览器中进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:52:13.810

您最简单的选择是使用哈希。IE`www.example.com/#about`

然后，您可以使用`window.history` [（更多阅读）](https://developer.mozilla.org/en-US/docs/DOM/window.history)来更改 URL，而无需重新加载页面。具体来说，您将寻找 history.pushState() 或 history.replaceState()

根据您需要的浏览器支持，您可能需要[History.js 之](https://github.com/balupton/History.js/)类的东西来回退到 IE 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:49:06.513

[您可以使用Ajax](http://www.w3schools.com/ajax/default.asp)加载页面

# python - 保存网页的Python urlopen错误

> ID：13363901
> 
> 赞同：0
> 
> 时间：2012-11-13T15:46:51.657
> 
> 标签：python, beautifulsoup, urllib2

我在 C:\webpage.htm 位置保存了一个网页。我想加载它并使用 BeautifulSoup 分析它，但是 urllib 不会打开它。

```
from BeautifulSoup import BeautifulSoup
import urllib2

url="C:\webpage.htm"

page=urllib2.urlopen(url) 
```

这会引发错误：

```
Traceback (most recent call last):
    page=urllib2.urlopen(url)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 423, in _open
    'unknown_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1240, in unknown_open
    raise URLError('unknown url type: %s' % type)
urllib2.URLError: <urlopen error unknown url type: c> 
```

我该如何解决这个问题，或者是否有另一种方法可以将文档加载到漂亮的汤中（我曾尝试将其保存为文本文档，但抛出了错误：

```
'str' object has no attribute 'findall' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:54:29.867

看来您必须指定协议。在这种情况下，您可能想要做的是：

```
from BeautifulSoup import BeautifulSoup
import urllib2
url="file:///C:/webpage.html"
page=urllib2.urlopen(url) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:01:34.523

由于您从本地机器加载文件，因此不需要使用 urllib2。相反，您可以使用 Python 的标准文件 I/O 函数：open()、read() 和 close()

```
from BeautifulSoup import BeautifulSoup
url="C:\webpage.htm"
f = open(url)
# read entire file as a string
page=f.read()
soup=BeautifulSoup(page)
# etc...
f.close() 
```

# css - Gmail CSS边距不起作用

> ID：13363911
> 
> 赞同：1
> 
> 时间：2012-11-13T15:47:25.600
> 
> 标签：css, html-email

我正在构建一封电子邮件，我需要一个图像（一个号召性用语按钮）位于另一个顶部，他遵循代码它只在少数客户中工作：

```
<tr>
    <td align="center" width="660" height="457" valign="top"><img width="660" height="457" style="display:block; vertical-align:top; margin:0; padding:0; outline:none; border:none;" src="image_1.jpg" />
    <a href="http://www.facebook.com/LurpakButter/app_299490026832067"><img width="341" height="56" style="display:block; vertical-align:top; margin-top:-300px; padding:0; outline:none; border:none;" src="cta.png" /></a></td>
</tr> 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:55:11.613

在 Gmail 中，使用`padding`而不是`margin`用于间距，并且像 Diodeus 提到的[活动](http://www.campaignmonitor.com/css/)监视器是一个很好的资源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:56:55.360

定位和许多其他 CSS 功能可能会导致内容在许多邮件客户端上的客户区跳出或泄漏出来。因此，在许多邮件客户端上，将元素放在一起是不可能的。

对于基于 Web 的客户端，这大部分是为了防止电子邮件欺骗客户端功能。对于 MS-Outlook，它使用了非常糟糕的 MS-WORD 渲染引擎。

这是一个很好的指南，你**可以**使用什么。

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T16:50:01.833

看起来您正在尝试解决电子邮件不支持表格中的背景图像（无论如何始终跨客户端）这一事实。聪明的想法`margin-top:-300;`，但似乎它没有像希望的那样工作。（不全面支持 CSS 边距）。

我知道获得所需布局的唯一方法是将背景图像切割成更小的块：

```
<table width="660" border="0" cellpadding="0" cellspacing="0">
  <tr>    
    <td width="660" colspan="3">
      <img width="660" height="100" style="margin: 0; border: 0; padding: 0; display: block;" src="image_1.jpg" />
    </td>
  </tr>
  <tr>    
    <td width="60">
      <img width="60" height="50" style="margin: 0; border: 0; padding: 0; display: block;" src="image_1.jpg" />
    </td>
    <td width="300">        
      <a href="http://www.facebook.com/LurpakButter/app_299490026832067"><img width="300" height="50" style="margin: 0; border: 0; padding: 0; display: block;" src="cta.png" /></a>
    </td>
    <td width="300">
      <img width="300" height="50" style="margin: 0; border: 0; padding: 0; display: block;" src="image_1.jpg" />
    </td>
  </tr>
  <tr>    
    <td align="center" width="660" colspan="3">
      <img width="660" height="100" style="margin: 0; border: 0; padding: 0; display: block;" src="image_1.jpg" />
    </td>
  </tr>
</table> 
```

或者，您可以只制作一张大图像并进行图像映射，但这可能不是号召性用语的最佳做法。

# c++ - sobel 算子 - 假边缘自然图像

> ID：13363918
> 
> 赞同：2
> 
> 时间：2012-11-13T15:47:56.987
> 
> 标签：c++, image-processing

我在使用 Sobel 算子进行边缘检测时遇到问题：它会产生太多错误边缘，效果如下图所示。我正在使用 3x3 sobel 运算符 - 首先提取垂直然后水平，最终输出是每个滤波器输​​出的幅度。合成图像上的边缘被正确提取，但自然图像产生的错误边缘或“噪声”太多，即使图像是通过应用模糊或中值滤波器进行预处理的。这可能是什么原因？是实现问题（然后：为什么合成图像很好？）还是我需要做更多的预处理？

**原来的：**
![原版](../Images/cd44320ec484fe1824bb2f5f09d0334e.png)

**输出：**
![出去](../Images/071572ac7d9f12da4e553973c37c94f6.png)

代码：

```
void imageOp::filter(image8* image, int maskSize, int16_t *mask)
{
    if((image == NULL) || (maskSize/2 == 0) || maskSize < 1)
    {
        if(image == NULL)
        {
            printf("filter: image pointer == NULL \n");
        }
        else if(maskSize < 1)
        {
            printf("filter: maskSize must be greater than 1\n");
        }
        else
        {
            printf("filter: maskSize must be odd number\n");
        }
        return;
    }

    image8* fImage = new image8(image->getHeight(), image->getWidth());
    uint16_t sum = 0;
    int d = maskSize/2;
    int ty, tx;

    for(int x = 0; x < image->getHeight(); x++)         //
    {                                                   // loop over image
        for(int y = 0; y < image->getWidth(); y++)      // 
        {
            for(int xm = -d; xm <= d; xm++)
            {
                for(int ym = -d; ym <= d; ym++)
                {
                    ty = y + ym;
                    if(ty < 0)  // edge conditions
                    {
                        ty = (-1)*ym - 1;
                    }
                    else if(ty >= image->getWidth())
                    {
                        ty = image->getWidth() - ym;
                    }

                    tx = x + xm;
                    if(tx < 0)  // edge conditions
                    {
                        tx = (-1)*xm - 1;
                    }
                    else if(tx >= image->getHeight())
                    {
                        tx = image->getHeight() - xm;
                    }

                    sum += image->img[tx][ty] * mask[((xm+d)*maskSize) + ym + d];
                }
            }

            if(sum > 255)
            {
                fImage->img[x][y] = 255;
            }
            else if(sum < 0)
            {
                fImage->img[x][y] = 0;
            }
            else
            {
                fImage->img[x][y] = (uint8_t)sum;
            }
            sum = 0;
        }
    }

    for(int x = 0; x < image->getHeight(); x++)
    {
        for(int y = 0; y < image->getWidth(); y++)
        {
            image->img[x][y] = fImage->img[x][y];
        }
    }

    delete fImage;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:09:11.773

这似乎是由于代码中某处的数学错误造成的。为了跟进我的评论，这是我在此处通过 Sobel 运算符运行图像时得到的结果（边缘强度由输出图像的亮度表示）：

![Sobel算子后的图像](../Images/5ea8020afdc06ca513a1d0e19a9dcd85.png)

我使用 GLSL 片段着色器来生成这个：

```
 precision mediump float;

 varying vec2 textureCoordinate;
 varying vec2 leftTextureCoordinate;
 varying vec2 rightTextureCoordinate;

 varying vec2 topTextureCoordinate;
 varying vec2 topLeftTextureCoordinate;
 varying vec2 topRightTextureCoordinate;

 varying vec2 bottomTextureCoordinate;
 varying vec2 bottomLeftTextureCoordinate;
 varying vec2 bottomRightTextureCoordinate;

 uniform sampler2D inputImageTexture;

 void main()
 {
    float bottomLeftIntensity = texture2D(inputImageTexture, bottomLeftTextureCoordinate).r;
    float topRightIntensity = texture2D(inputImageTexture, topRightTextureCoordinate).r;
    float topLeftIntensity = texture2D(inputImageTexture, topLeftTextureCoordinate).r;
    float bottomRightIntensity = texture2D(inputImageTexture, bottomRightTextureCoordinate).r;
    float leftIntensity = texture2D(inputImageTexture, leftTextureCoordinate).r;
    float rightIntensity = texture2D(inputImageTexture, rightTextureCoordinate).r;
    float bottomIntensity = texture2D(inputImageTexture, bottomTextureCoordinate).r;
    float topIntensity = texture2D(inputImageTexture, topTextureCoordinate).r;
    float h = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity;
    float v = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity;

    float mag = length(vec2(h, v));

    gl_FragColor = vec4(vec3(mag), 1.0); 
```

你没有显示你的掩码值，我假设它包含 Sobel 内核。在上面的代码中，我对 3x3 Sobel 内核中每个像素的红色通道执行的计算进行了硬编码。这纯粹是为了我平台上的性能。

我在您的代码中没有注意到的一件事（同样，我可能会错过它，就像我将总和设置回 0 一样）是确定 Sobel 运算符的两个部分的向量的大小。如果存在的话，我希望在某处看到平方根运算。

# button - 简单的数据库插入模块

> ID：13363919
> 
> 赞同：0
> 
> 时间：2012-11-13T15:47:58.360
> 
> 标签：button, input, insert, admin, magento-1.7

因此，我已经使用 magento 玩了几个月了，我真的认为我已经掌握了它，直到我冒险尝试编写自己的模块。iv开始很简单，我想要实现的只是在magento后端的管理页面中获取一个输入框和一个按钮。

在过去的 2 天里，我从许多不同的教程中整理了一个基本的管理模块。我已经成功设置了一个出现在后端的模块，它同时显示了一个输入字段和一个按钮。

在我的`indexController`我有以下代码

```
public function indexAction()
{
    $this->loadLayout();

    $this->_addContent($this->getLayout()->createBlock('presbo/view'));

    $this->renderLayout();

}   
public function testAction()
{

    $connection = Mage::getSingleton('core/resource')
    ->getConnection('core_write');

    $connection->beginTransaction();
    $fields = array();
    $fields['name']= 'andy';
    $connection->insert('test', $fields);

    $fields = array();
    $fields['name']= 'andy2';
    $connection->insert('test',$fields);

    $connection->commit();
} 
```

然后在视图文件中我有以下内容

```
public function __construct()
{
    parent::__construct();
}
protected function _toHtml()
{
    $html="hello world <input type='text' /><input type='button' value='save' />";

    return $html;
} 
```

所以这一切都很好，块被加载并显示在后端。

现在我不想得到答案（老实说，我怀疑有人会给出答案）但我什至不知道从哪里开始搜索将这个按钮链接到`testAction`控制器内。基本上我希望用户能够在文本字段中输入一个数字，然后当他们按下一个按钮时，它将把它保存到指定的数据库表中。

如果我将代码放在`testAction`, 中`indexAction`并访问页面，则条目已成功插入到数据库表中。但我需要用户能够指定值。

我会以完全错误的方式去做吗？

# database - 在某些页面中重复的 Wordpress 页面标题

> ID：13363921
> 
> 赞同：1
> 
> 时间：2012-11-13T15:48:03.057
> 
> 标签：database, wordpress, seo

我创建了一个 Wordpress 网站，并且标题运行良好。然后，一段时间后安装了插件，我注意到在某些页面中，我的标题重复了 2 次。

错误页面标题示例： **联系人 - 姓名 | 姓名**

普通标题示例： **我们的服务 | 姓名**

现在，如果我转到常规设置并更改标题，它将同时更改，没有任何改进。Yoast 的 SEO 可以选择重置页面标题，但这只会删除所有标题，将当前 URL 保留为页面标题，所以也不好。

这是我最初拥有的代码： `<title><?php wp_title(''); ?><?php if(wp_title('', false)) { echo ' | '; } ?><?php bloginfo('name'); ?></title>`

这是我现在使用的代码： `<title><?php wp_title('|'); ?></title>`

**总而言之，我认为在数据库的某个地方重复了一个 wp_title：一次使用“-”作为分隔符，另一个（当前）使用“|”。**

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:37:51.220

SEO Yoast 建议`<?php wp_title(''); ?>`不要使用`<?php wp_title('|'); ?>`

检查以下内容：登录到您的管理部分并查看有问题的页面。在 Yoast 元框的 Wordpress SEO 下，检查字段“seo 标题”以查看名称是否在此处重复。

在 SEO 菜单项下导航到标题和元数据。

在常规选项卡中检查以下内容：

是否检查了强制重写标题？

在帖子类型选项卡下

检查页面标题模板，看看它是否在那里重复

# makefile - GNU 使 VPATH 不能正确地用于重写规则中的对象路径

> ID：13363922
> 
> 赞同：1
> 
> 时间：2012-11-13T15:48:05.133
> 
> 标签：makefile

我的Makefile：

```
CC=cc
INC=-I.
CFLAGS=-g  -DDEBUG -std=gnu99 -DSFHASH -DDOMAIN
LDFLAGS=-ldl
OBJS=*.o
OBJDIR=.obj
BINDIR=.obj
LIBDIR=.obj

%.o: %.c
        $(CC) $(INC) $(CFLAGS) -DSFHASH -o $(OBJDIR)/$@ -c $<

VPATH = .obj
#vpath %.o $(OBJDIR)

hashtest: hashfuncs.o hast.o scanners.o parseargs.o
        $(CC) -rdynamic -o $(BINDIR)/$@ $^ $(LDFLAGS)

clean:
        @rm -f $(OBJDIR)/$(OBJS) $(BINDIR)/hashtest 
```

第一次使用它：make 不会重写 gcc 的输入文件路径：

```
@delphi# make clean
@delphi# make
cc -I. -g  -DDEBUG -std=gnu99 -DSFHASH -DDOMAIN -DSFHASH -o .obj/hashfuncs.o -c hashfuncs.c
cc -I. -g  -DDEBUG -std=gnu99 -DSFHASH -DDOMAIN -DSFHASH -o .obj/hast.o -c hast.c
cc -I. -g  -DDEBUG -std=gnu99 -DSFHASH -DDOMAIN -DSFHASH -o .obj/scanners.o -c scanners.c
cc -I. -g  -DDEBUG -std=gnu99 -DSFHASH -DDOMAIN -DSFHASH -o .obj/parseargs.o -c parseargs.c
cc -rdynamic -o .obj/hashtest hashfuncs.o hast.o scanners.o parseargs.o -ldl
cc: error: hashfuncs.o: No such file or directory
cc: error: hast.o: No such file or directory
cc: error: scanners.o: No such file or directory
cc: error: parseargs.o: No such file or directory
make: *** [hashtest] Error 1 
```

连续第二次使用它，它确实：

```
@delphi# make
cc -rdynamic -o .obj/hashtest .obj/hashfuncs.o .obj/hast.o .obj/scanners.o .obj/parseargs.o -ldl
@delphi# 
```

GNU Make 手册说：

> make 变量 VPATH 的值指定了 make 应该搜索的目录列表。大多数情况下，目录应该包含不在当前目录中的必备文件；但是，**make 使用 VPATH 作为先决条件和** **规则目标** 的搜索列表。

我会理解 VPATH 是否是一个在启动时设置一次的类型变量，但它不是。正确查找在运行时生成的目标依赖项这一事实说明了这一点。

那是怎么回事？为什么 make 仅第二次正确重写 gcc 的输入文件路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:50:52.903

```
Subject: Re: (un)expected make behavior while using VPATH
From: mad scientist 
```

> <<< %.o: %.c
> 
> <<< $(CC) $(INC) $(CFLAGS) -DSFHASH -o $(OBJDIR)/$@ -c $<
> 
> 这是一个无效的规则。它违反了我的“makefile 规则”之一：
> 
> [http://make.mad-scientist.net/rules.html](http://make.mad-scientist.net/rules.html)
> 
> <<< 第一次使用：make不会重写gcc的输入文件路径：
> 
> <<< 连续第二次使用它，它确实：
> 
> 经典的。不要难过，这就是每个人一开始都会做的事情。这很可能表明 VPATH 设计错误（或者需要其他一些工具）。然而，那是另一个对话。这可能会有所帮助：
> 
> [http://make.mad-scientist.net/vpath.html](http://make.mad-scientist.net/vpath.html)
> 
> 干杯!

来自 help-make ml，线程[http://lists.gnu.org/archive/html/help-make/2012-11/msg00018.html](http://lists.gnu.org/archive/html/help-make/2012-11/msg00018.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:22:25.013

可以在[GNU Make 手册的第 3.7 节](http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles)中找到对此行为的解释：

> 3.7 make 如何读取 Makefile
> 
> GNU make 在两个不同的阶段完成它的工作。在第一阶段，它读取所有的 makefile、包含的 makefile 等，并内化所有变量及其值、隐式和显式规则，并构建所有目标及其先决条件的依赖图。
> 
> 在第二阶段，make 使用这些内部结构来确定需要重建哪些目标并调用必要的规则来这样做。

`make`首次运行时，`.obj`目录中的先决条件尚不存在。这意味着它们不会成为第一阶段创建的依赖关系图的一部分。因此，在执行创建规则时，在第二阶段不会使用这些先决条件`hashtest`——即使由于之前在第二阶段执行的规则，它们在那时已经存在。

当您`make`第二次运行时，这些先决条件确实存在，并通过`VPATH`设置找到并包含在依赖关系图中。

请注意，其中的表达式`VPATH`只是一个搜索路径，*仅*此而已。它可以包含多个目录名称，以冒号分隔。`make`在第一阶段构建依赖图时，将在该搜索路径中搜索先决条件和目标。如果它在该搜索列表中的目录中找到特定目标，则该目标将作为现有文件添加到依赖关系图中，该文件可能已过期，也可能不会过期。

您似乎期望`make`将子目录从添加`VPATH`到目标，即使该目标在该子目录中不存在并且需要创建。这不是它的工作方式——在这种情况下如何`make`处理多个目录`VPATH`？

# android - 如何使用 Apache 客户端和 KeyChain API 从 Android 4.1 进行客户端证书身份验证

> ID：13363940
> 
> 赞同：1
> 
> 时间：2012-11-13T15:48:41.463
> 
> 标签：android, ssl, keystore

由于 ICS Android 支持通过 KeyChain API 对系统密钥库和可信 CA 的统一访问。

这很好，但是当我尝试使用来自该来源的私钥进行客户端证书身份验证时，给我带来了麻烦。

我在这里检查了一些答案，发现最好的结果是：[Android 4.0 SSL Authentication](https://stackoverflow.com/questions/11581208/android-4-0-ssl-authentication)

它引用4.0并提供以下编码：

更新 - 这个编码是错误的 - 它在 4.1+ 中不起作用

```
String alias = "test";
KeyStore memoryKeyStore = KeyStore.getInstance("BKS");
memoryKeyStore.load(null);
X509Certificate[] chain = KeyChain.getCertificateChain(getApplicationContext(),alias);
PrivateKey key = KeyChain.getPrivateKey(getApplicationContext(),alias);
memoryKeyStore.setKeyEntry(alias, key.getEncoded(), chain); 
```

但是，这在 4.1 中不起作用，因为当调用 getEncoded() 方法并且无法初始化 KeyStore 时，由 KeyChain.getPrivateKey() 返回的 PrivateKey 对象返回 null。

在 4.1 中还有其他方法可以做到这一点吗？

更新 - 这里是定义您自己的 KeyStore 和 KeyStoreSpi 实现的正确方法这里是 KeyStore 和 KeyStoreSpi 的示例实现：

KeyStoreSpi 实现：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.Key;
import java.security.KeyStoreException;
import java.security.KeyStoreSpi;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.Certificate;
import java.security.cert.CertificateException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.Enumeration;
import java.util.List;

import java.security.PrivateKey;

public class KeyChainProxy extends KeyStoreSpi {

  private String alias = null;
  private PrivateKey privateKey = null;
  private Certificate[] certChain = null;

  public KeyChainProxy(String alias, PrivateKey privateKey, Certificate[] certChain) {
    this.alias = alias;
    this.privateKey = privateKey;
    this.certChain = certChain;
  }

  @Override
  public Key engineGetKey(String alias, char[] password) throws NoSuchAlgorithmException, UnrecoverableKeyException {
    return privateKey;
  }

  @Override
  public Certificate[] engineGetCertificateChain(String alias) {
    return certChain;
  }

  @Override
  public Certificate engineGetCertificate(String alias) {
    return certChain[0];
  }

  @Override
  public Date engineGetCreationDate(String alias) {
    return new Date();
  }

  @Override
  public void engineSetKeyEntry(String alias, Key key, char[] password, Certificate[] chain) throws KeyStoreException {
    throw new KeyStoreException("Not Implemented");

  }

  @Override
  public void engineSetKeyEntry(String alias, byte[] key, Certificate[] chain) throws KeyStoreException {
    throw new KeyStoreException("Not Implemented");

  }

  @Override
  public void engineSetCertificateEntry(String alias, Certificate cert) throws KeyStoreException {
    throw new KeyStoreException("Not Implemented");

  }

  @Override
  public void engineDeleteEntry(String alias) throws KeyStoreException {
    throw new KeyStoreException("Not Implemented");

  }

  @Override
  public Enumeration<String> engineAliases() {
    List<String> list = new ArrayList<String>();
    list.add(alias);
    return Collections.enumeration(list);
  }

  @Override
  public boolean engineContainsAlias(String alias) {
    return alias != null && alias.equals(this.alias);
  }

  @Override
  public int engineSize() {
    return 1;
  }

  @Override
  public boolean engineIsKeyEntry(String alias) {
    return true;
  }

  @Override
  public boolean engineIsCertificateEntry(String alias) {
    return false;
  }

  @Override
  public String engineGetCertificateAlias(Certificate cert) {
    return null;
  }

  @Override
  public void engineStore(OutputStream stream, char[] password) throws IOException, NoSuchAlgorithmException, CertificateException {

  }

  @Override
  public void engineLoad(InputStream stream, char[] password) throws IOException, NoSuchAlgorithmException, CertificateException {

  }

} 
```

密钥库实现：

```
import java.security.KeyStore;
import java.security.KeyStoreSpi;
import java.security.Provider;

public class KeyChainKeystore extends KeyStore {

  public KeyChainKeystore(KeyStoreSpi keyStoreSpi, Provider provider, String type) {
    super(keyStoreSpi, provider, type);
    try {
      load(null, null);
    } catch (Exception e) {
      // ignore - our spi doesn't do anything
    }
  } 
```

}

谢谢

瓦西尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:28:11.107

KeyChain 旨在保护您的私钥。

因此，您可以获得对私钥的引用，并在您的应用程序中使用该私钥进行身份验证、加密……但您永远无法访问实际的私钥数据。

因此，您无法导出私钥 - 这是您正在尝试做的事情。

# javascript - 如何使用 javascript 获取 HTML 注释

> ID：13363946
> 
> 赞同：30
> 
> 时间：2012-11-13T15:49:08.810
> 
> 标签：javascript, html

如果我有那个

```
 <!-- some comment --> 
```

如何获取此元素并使用 javascript 更改内容？如果我里面有一个代码，我想删除评论的标签，我该怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-13T15:56:09.713

## 使用 NodeIterator (IE >= 9)

最好的方法是使用一个专用的[NodeIterator](https://developer.mozilla.org/de/docs/Web/API/NodeIterator)实例迭代给定根元素中包含的所有注释。

[在行动中看到它！](http://jsfiddle.net/yjkmxmtt/3/)

```
function filterNone() {
    return NodeFilter.FILTER_ACCEPT;
}

function getAllComments(rootElem) {
    var comments = [];
    // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11
    var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, filterNone, false);
    var curNode;
    while (curNode = iterator.nextNode()) {
        comments.push(curNode.nodeValue);
    }
    return comments;
}

window.addEventListener("load", function() {
    console.log(getAllComments(document.body));
}); 
```

## 使用定制的 DOM 遍历（也支持 IE < 9）

如果你必须支持旧的浏览器（例如IE <9），你需要自己遍历DOM并提取[节点类型](https://developer.mozilla.org/de/docs/Web/API/Node/nodeType)为的元素[`Node.COMMENT_NODE`](https://developer.mozilla.org/en-US/docs/Web/API/Comment)。

[在行动中看到它！](http://jsfiddle.net/7UXum/77/)

```
// Thanks to Yoshi for the hint!
// Polyfill for IE < 9
if (!Node) {
    var Node = {};
}
if (!Node.COMMENT_NODE) {
    // numeric value according to the DOM spec
    Node.COMMENT_NODE = 8;
}

function getComments(elem) {
  var children = elem.childNodes;
  var comments = [];

  for (var i=0, len=children.length; i<len; i++) {
    if (children[i].nodeType == Node.COMMENT_NODE) {
      comments.push(children[i]);
    }
  }
  return comments;
} 
```

## 提取节点的内容并将其删除

与您从上面选择的方式无关，您会收到相同的节点 DOM 对象。

访问评论的内容就像`commentObject.nodeValue`.
删除评论有点冗长：`commentObject.parentNode.removeChild(commentObject)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T15:54:19.327

你必须遍历 DOM 才能得到它。`nodeType`评论 DOM 元素的`8`

```
if( oNode.nodeType === 8 ) {
  oNode.parentNode.removeChild( oNode );
} 
```

将是一种方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:53:40.657

这是一个检索评论的 JQuery 插件：

[http://www.bennadel.com/blog/1563-jQuery-Comments-Plug-in-To-Access-HTML-Comments-For-DOM-Templating.htm](http://www.bennadel.com/blog/1563-jQuery-Comments-Plug-in-To-Access-HTML-Comments-For-DOM-Templating.htm)

基本思想是看`nodes`，而不是`elements`：

[http://www.w3schools.com/htmldom/dom_nodes.asp](http://www.w3schools.com/htmldom/dom_nodes.asp)

您从对象开始，并使用集合`document`遍历它们。`childNodes`您必须检查`node.nodeType == 8`哪个将仅返回注释节点（请注意，您需要递归地遍历子节点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T16:39:29.683

我需要为整个网页存储一个模板。但是 <template>-tag 不能包含例如 <html>-tag。所以我决定将我的模板存储在 HTML 注释中。

我将 HTML 注释放在隐藏的 <div> 中，以便更轻松地检索该特定 HTML 注释中的文本，而不必费心将其与其他 HTML 注释区分开来。

这是一个演示如何使用 createTreeWalker 检索 HTML 注释中的内容。

```
alert(
  document.createTreeWalker(
    document.getElementById('commentDiv'), 
    NodeFilter.SHOW_COMMENT, 
    null, 
    false
  ).nextNode().nodeValue
);
```

```
<p>Getting the text in a HTML-comment.</p>
<p>I use createTreeWalker to make sure we don't simply capture an empty text node by mistake. You could make the code even simpler, but then you must make sure that the &lt;div>-tag is immediately followed by the "&lt;!--", like this "&lt;div>&lt;!--". But if that breaks because of for example autoformating in an editor, so that you get a line feed in between or so, then the simpler method will fail. That is why I prefere to use the createTreeWalker here.</p>
<!--
  This is NOT the comment we want to get text from
-->
<div id="commentDiv" style="display:none;">
  <!--
    This is THE text, and you can have anything in here
    <>
    <div>
    <script>alert('hello');</script>
    etc.
    except of course an end of HTML-comment.

    An advantage of this way to store a template compared to using
    the <template>-tag, is that the <template>-tag can for example
    not contain a <html>-tag, in case you need to have a template
    for an entire web page.

    Check also my explanation down in the body text for why I use 
    createTreeWalker instead of some simpler code.
  -->
</div>
<!--
  This is also NOT the comment we want to get text from
-->
<p>End of body.</p>
```

# java - JPanel 图像多次运行

> ID：13363948
> 
> 赞同：1
> 
> 时间：2012-11-13T15:49:13.490
> 
> 标签：java, swing, jpanel, bufferedimage, paintcomponent

我试图让这两部分代码一起工作，但我遇到了问题。这第一部分代码构建了由我的编辑器（Netbeans GUI Builder for Java）生成的表单，不确定这是否是导致问题的原因。

发生的事情是当我运行项目时，我的代码（第二个代码块）开始运行并反转图像的颜色（正是它应该做的）然后它恢复到原始图像（非反转）这不应该发生，图像应该在面板中显示为非反转图像。然后，当我单击框架边框以重新调整面板图像的大小时，面板图像闪烁为倒置，然后是非倒置，然后是倒置。再次单击它会执行相同的操作，但会在非反转时停止。是什么导致了这个奇怪的问题？

```
package weblaftest;

/**
 *
 * @author Ryan
 */
public class Main extends javax.swing.JFrame{
    /**
     * Creates new form Main
     */
    public Main(){
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jInternalFrame1 = new javax.swing.JInternalFrame();
        test1 = new weblaftest.test();

        jInternalFrame1.setVisible(true);

        javax.swing.GroupLayout jInternalFrame1Layout = new javax.swing.GroupLayout(jInternalFrame1.getContentPane());
        jInternalFrame1.getContentPane().setLayout(jInternalFrame1Layout);
        jInternalFrame1Layout.setHorizontalGroup(
            jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        jInternalFrame1Layout.setVerticalGroup(
            jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout test1Layout = new javax.swing.GroupLayout(test1);
        test1.setLayout(test1Layout);
        test1Layout.setHorizontalGroup(
            test1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 409, Short.MAX_VALUE)
        );
        test1Layout.setVerticalGroup(
            test1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 362, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(test1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(262, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(83, Short.MAX_VALUE)
                .addComponent(test1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(74, 74, 74))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */

    public static void main(String args[]){
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try{
            for(javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()){
                if("Nimbus".equals(info.getName())){
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        }catch(ClassNotFoundException ex){
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }catch(InstantiationException ex){
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }catch(IllegalAccessException ex){
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }catch(javax.swing.UnsupportedLookAndFeelException ex){
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable(){
            @Override
            public void run(){
                new Main().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JInternalFrame jInternalFrame1;
    private weblaftest.test test1;
    // End of variables declaration
} 
```

这部分是我写的，它是显示图像的面板的代码，出于测试目的，它所做的只是反转面板中显示的图像的颜色。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package weblaftest;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import weblaftest.grapics.Colors;

/**
 *
 * @author Ryan
 */
public class test extends javax.swing.JPanel{
private BufferedImage image;
    /**
     * Creates new form test
     */
    public test(){
        try{
            image = ImageIO.read(new File("/Users/Public/Pictures/Sample Pictures/Chrysanthemum.jpg"));
        }catch(IOException e){
        }
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        int width = image.getWidth();
        int height = image.getHeight();
        for(int x = 0; x < width; x++){
            for(int y = 0; y < height; y++){
                int color = image.getRGB(x, y);
                int red = Colors.red(color);
                int green = Colors.green(color);
                int blue = Colors.blue(color);

                int rgb = Colors.rgba(255 - red, 255 - green, 255 - blue);
                image.setRGB(x, y, rgb);
            }
        }
        g.drawImage(image, 0, 0, width, height, Color.black, null);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    // End of variables declaration
} 
```

这是请求的颜色类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package weblaftest.grapics;

/**
 *
 * @author Ryan
 */
public class Colors{

    public static int rgba(int red, int green, int blue, Integer alpha){
        int rgba = alpha;
        rgba = (rgba << 8) + red;
        rgba = (rgba << 8) + green;
        rgba = (rgba << 8) + blue;
        return rgba;
    }
    public static int rgba(int red, int green, int blue){
        int rgba = 255;
        rgba = (rgba << 8) + red;
        rgba = (rgba << 8) + green;
        rgba = (rgba << 8) + blue;
        return rgba;
    }

    public static int alpha(int color){
        return color >> 24 & 0x0FF;
    }

    public static int red(int color){
        return color >> 16 & 0x0FF;
    }

    public static int green(int color){
        return color >> 8 & 0x0FF;
    }

    public static int blue(int color){
        return color & 0x0FF;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:34:51.020

*   仅保留`paintComponent()`用于绘图，不应进行长时间运行的处理`paintComponent(..)`
*   类名应以大写字母开头，即`Test`

这是问题所在：

```
@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    int width = image.getWidth();
    int height = image.getHeight();
    for(int x = 0; x < width; x++){
        for(int y = 0; y < height; y++){
            int color = image.getRGB(x, y);
            int red = Colors.red(color);
            int green = Colors.green(color);
            int blue = Colors.blue(color);

            int rgb = Colors.rgba(255 - red, 255 - green, 255 - blue);
            image.setRGB(x, y, rgb);
        }
    }
    g.drawImage(image, 0, 0, width, height, Color.black, null);
} 
```

`BufferedImage`您在第一次调用时绘制倒置的`paintComponent()`连续调用，它将每次都重新反转并再次反转。

而是`BufferedImage`在您的构造函数中反转并仅绘制反转`BufferedImage`的`paintComponent(..)`不反转，`paintComponent(..)`因此反转和原始图像之间的切换`JFrame`是重新调整大小的：

```
/**
 *
 * @author Ryan
 */
public class Test extends javax.swing.JPanel {

    private BufferedImage image;
    int width;
    int height;

    /**
     * Creates new form test
     */
    public Test() {
        try {
            image = ImageIO.read(new URL("http://imgs.mi9.com/uploads/flower/4533/tulip-flowers_400x300_80023.jpg"));
            invertImage();
        } catch (Exception e) {
        }
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, width, height, Color.black, null);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 400, Short.MAX_VALUE));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 300, Short.MAX_VALUE));
    }// </editor-fold>
    // Variables declaration - do not modify
    // End of variables declaration

    private void invertImage() {
        width = image.getWidth();
        height = image.getHeight();
        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                int color = image.getRGB(x, y);
                int red = Colors.red(color);
                int green = Colors.green(color);
                int blue = Colors.blue(color);

                int rgb = Colors.rgba(255 - red, 255 - green, 255 - blue);
                image.setRGB(x, y, rgb);
            }
        }
    }
} 
```

# sharepoint - MS Search Server 2010 Express：需要 cookie 的站点的爬网规则问题

> ID：13363949
> 
> 赞同：4
> 
> 时间：2012-11-13T15:49:23.880
> 
> 标签：sharepoint, search, search-engine, search-server, microsoft-search-server

我正在尝试通过 Central Admin 为使用 Search Server Express 2010 的非 SharePoint 网站创建爬网规则。

如果我上传 cookie，爬网完成后我会收到错误消息，提示参数无效。我不确定 cookie 文件应该是什么格式，但是我尝试过的各种格式都提供了这个错误，我无法在线找到预期的格式。有人可以提供正确格式的链接吗？

如果我尝试指定一个 URL 来获取 cookie，我会在 IE8 中收到以下 JS 错误。

“访问被拒绝 FormsAuthenticationProxyPage.aspx 第 138 行。”

如果用户代理与爬虫匹配，我还尝试在站点的服务器端代码上设置 cookie，但这也无法正常工作。当爬虫爬行时，cookie 可能不会被存储/传回。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T11:36:14.030

我不确定这是否适合 Express 版本，但您应该能够在中央管理中指定 cookie 进行身份验证

[http://technet.microsoft.com/en-us/library/ee792871(v=office.14).aspx#procedure1](http://technet.microsoft.com/en-us/library/ee792871%28v=office.14%29.aspx#procedure1)

# java - 日期对象中的 Java DateFormat

> ID：13363951
> 
> 赞同：1
> 
> 时间：2012-11-13T15:49:36.797
> 
> 标签：java, java.util.date

有一个简单的日期格式转换问题。在java中，当我们打印日期对象时，它的格式为“Tue Nov 13 18:34:35 PKT 2012”，但我希望这个日期在日期对象中以“2012-11-13 18:34:35”的格式显示. 不需要字符串。上述格式只需要 Date 对象。谁能帮我。我在用

```
Date d = new Date();  
SimpleDateFormat sdf =  new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
Date formattedDate = sdf.parse(d.format(sdf)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:56:43.520

> 但我希望在 Date 对象中以这种格式“2012-11-13 18:34:35”显示此日期。不需要字符串。

你说的格式*是*字符串。如果不需要字符串，那么您的第一个要求将完全消失。您希望显示日期**，***这*意味着需要一个字符串。

A`Date` *没有*格式的概念。自 Unix 时代以来，这只是几毫秒。没有`Date`控制格式的信息。

只需使用`SimpleDateFormat`，将其调整为您想要的任何格式 - 和日历、时区和语言环境。不要浪费时间试图改变`Date`自己，因为你将一事无成。视为`Date.toString()`一种诊断便利，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:51:01.300

我觉得你很困惑。格式化仅用于显示目的，不用于计算目的。`Date()`对象不代表格式，它是纪元时间的毫秒数。使用`SimpleDateFormat`类`format()`方法，您可以根据需要格式化日期和打印。

# java - Java同步方法...不同步

> ID：13363952
> 
> 赞同：2
> 
> 时间：2012-11-13T15:49:43.847
> 
> 标签：java, synchronized

对于我当前的 java 练习，我必须从 2 个不同的 gmail 帐户获取邮件。我通过创建我的 gmail 类的新实例来做到这一点。gmail 类扩展了线程，其中有一个同步的方法 readMail() 获取邮件并打印它。此 readMail 方法由 run 方法在 while(true) 循环中调用，然后休眠 30 秒，其想法是每 30 秒获取一次邮件。但是，同步方法似乎不起作用。线程相互中断，并且在另一个线程中断并开始打印之前，该方法不会打印消息的所有项。

任何建议将不胜感激。

请参阅下面给我带来麻烦的方法：

```
public synchronized void readMail() throws MessagingException, IOException {
    Folder inbox = store.getFolder("Inbox");
    inbox.open(Folder.READ_ONLY);
    messages = inbox.getMessages();
    // System.out.println("No of Messages : " + inbox.getMessageCount());
    // System.out.println("No of Unread Messages : "
    // + inbox.getUnreadMessageCount());

    for (int i = 0; i < inbox.getUnreadMessageCount(); i++) {

        System.out
                .println("*****************************************************************************");
        System.out.println("NEW MESSAGE " + (i + 1) + ":");
        msg = messages[i];
        // System.out.println(msg.getMessageNumber());
        // Object String;
        // System.out.println(folder.getUID(msg)

        String subject = msg.getSubject();

        System.out.println("Subject: " + subject);
        System.out.println("From: " + msg.getFrom()[0]);
        System.out.println("To: " + msg.getAllRecipients()[0]);
        System.out.println("Date: " + msg.getReceivedDate());
        System.out.println("Size: " + msg.getSize());
        // System.out.println(msg.getFlags());
        // System.out.println("Body: \n"+ msg.getContent());
        // System.out.println(msg.getContentType());
    }
} 
```

然后运行方法：

```
 public void run() {
    while (true) {

        try {
            readMail();
        } catch (MessagingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        try {
            sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:07:40.573

您应该在两个线程都可以访问的对象上同步您的方法，因为现在您正在使用您所在的对象实例来同步哪个原因永远不会产生影响，因为据我所知，两个线程都只停留在它们的范围内你的问题。您可以在创建时将一个简单的对象传递给两个线程，然后像这样重新格式化您的方法

传递对象进行同步：

```
public static void main(String[] args){
     Object obj = new Object();
     gmail g1 = new gmail(obj);
     gmail g2 = new gemail(obj);
     // more code
} 
```

在 gmail 类中保存参考：

```
public class gmail extends Thread{
    private Object sharedObject;

    public gmail( Object synchronizer){
          sharedObject = synchronzier;
    } 
```

同步它：

```
public void readMail(){
   synchronized( sharedObject ){
       // your method code goes here
   }
} 
```

对于这个例子，在 gmail 的类对象上同步也是可能的，而且更容易

```
public void readMail(){
   synchronized( this.getClass() ){
       // your method code goes here
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:07:52.370

当您将 readMail() 作为方法同步时，一次只有一个线程可以访问**Objects** readMail() 方法。如果您有两个不同的 GMail 类型的对象实例和 readMail() 方法，则两个线程可以不同步（并行）访问它们。

换句话说，阻止 readMail() 方法执行的信号量实际上是 GMail 对象。对于两个不同的对象实例，您有两个不交互的信号量。

如果您只有一个具有同步 readMail() 方法的 GMail 对象实例，它将起作用。然后一次只有一个线程可以访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T15:52:05.337

`synchronized`关键字出现在**线程调用**的方法上，而不是线程中的方法。

因此，在您的线程中定义的方法必须调用**所有线程都使用的**`readMail`其他方法，该方法在其他地方定义，并且您同步**该**方法。

 ****所以创建一个类

```
public class MailHelper {
   public static void synchronized doRead(store) throws MessagingException, IOException {
       // all your readMail code here, except pass in the store
   }
} 
```

在你的线程类中

```
public void readMail() throws MessagingException, IOException {
    // get your store
     MailHelper.doRead(store);
} 
```

请注意，您可以使方法`MailHelper`不是静态的，然后您必须创建 MailHelper 的实例并将其传递给您的线程。****

# c# - 使用 datagridview 和下拉列表进行操作

> ID：13363955
> 
> 赞同：0
> 
> 时间：2012-11-13T15:49:50.913
> 
> 标签：c#, winforms

这是我的表格的图像。

这应该这样做。
1\. 用户将选择要重命名的项目。（例如，用户选择“string1”）
2\. 在下拉列表中选择新项目名称。（例如，用户选择“新字符串 1”）
**注意：下拉列表中选择的项目将是“string1”的新名称** 3\. 单击在按钮上。（**单击按钮后。这将自动创建所做的更改**）。

![在此处输入图像描述](../Images/6cdd0c0acd5c09a7db75deacd5cbe40c.png)

这是问题：
如何从下拉列表中的选定项目更改datagridview上的项目名称？

这是我的一些代码。

```
public void loadgrid()
        {
            DataGridViewCheckBoxColumn checkboxColumn = new DataGridViewCheckBoxColumn();
            checkboxColumn.Width = 25;
            dataGridView1.Columns.Add(checkboxColumn);

            DataGridViewTextBoxColumn textboxcolumn = new DataGridViewTextBoxColumn();
            textboxcolumn.Width = 150;
            dataGridView1.Columns.Add(textboxcolumn);

            dataGridView1.Rows.Add(new object[] { false, "string1" });
            dataGridView1.Rows.Add(new object[] { false, "string2" });
        } 
```

对于按钮1

```
private void button1_Click(object sender, EventArgs e)
        {
            int x = 0;
            foreach (DataGridViewRow row in dataGridView1.Rows)
            { 
                DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
                chk.TrueValue = true;
                if(chk.Value == chk.TrueValue) // there no chk.Check on datagridview just chk.Selected
                {
                    //code here
                    //this will test if the checkbox has been checked.
                    //the selected item on the dropdown will be the
                    //new name of the item on the datagridview
                }
            }
                x = x + 1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:08:01.477

如果您想使用选中的复选框更改行中的所有字符串，我认为这将有所帮助：

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
                {
                    if (!row.IsNewRow)
                    {
                        DataGridViewCheckBoxCell chk1 = (DataGridViewCheckBoxCell)row.Cells[0];
                        if (chk1 != null && chk1.Value!=null && (bool)chk1.Value) // there no chk.Check on datagridview just chk.Selected
                        {
                            string newString = string.Empty;
                            if (comboBox1.SelectedItem != null)
                            {
                                newString = comboBox1.SelectedItem.ToString();
                                row.Cells[dataGridView1.Columns.Count - 1].Value = newString;
                            }
                        }
                    }
                } 
```

如果您只想在选中 CheckBox 的选定行中更改字符串，则可以使用以下代码：

```
 if(dataGridView1.SelectedRows.Count>0)
                {
                    DataGridViewRow row = dataGridView1.SelectedRows[0];
                    if (!row.IsNewRow)
                    {
                        DataGridViewCheckBoxCell chk1 = (DataGridViewCheckBoxCell)row.Cells[0];
                        if (chk1 != null && chk1.Value!=null && (bool)chk1.Value) // there no chk.Check on datagridview just chk.Selected
                        {
                            string newString = string.Empty;
                            if (comboBox1.SelectedItem != null)
                            {
                                newString = comboBox1.SelectedItem.ToString();
                                row.Cells[dataGridView1.Columns.Count - 1].Value = newString;
                            }
                        }
                    }
                } 
```

并且如果您想设置所有选定的行（如果这在您的`DataGridView`控件中是可能的，那么只需迭代`SelectedRows`属性

# vba - Excel For Loop VBA 宏不起作用

> ID：13363959
> 
> 赞同：0
> 
> 时间：2012-11-13T15:50:14.330
> 
> 标签：vba, excel

我有一个 2 列的 excel 电子表格，最后一行是`287983`. 在 A 列中有数字，如果单元格没有数字，则将其`NaN`放置在那里。在 B 列中有日期。我正在尝试使用以下宏来删除 A 列中的单元格具有的所有行`NaN`：

```
Sub Rowdel()
    Dim i As Long
    For i = Cells(Rows.Count, 1).End(xlUp).Row To 1 Step -1
        If Cells(i, 1) = "NaN" Then Cells(i, 1).EntireRow.Delete
    Next i
End Sub 
```

但是，当我运行上面的代码时，`NaN`单元格仍然存在。谁能建议为什么代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:26:58.610

确保此代码引用正确的工作表。您可能在错误的工作表上运行代码，该工作表`NaN`在 A 列中不包含任何内容，因此不会导致代码运行的任何删除或其他可见迹象。

您可以尝试使用以下（仅调试）版本调试此代码：

```
Sub Rowdel()
    Dim i As Long
    For i = Cells(Rows.Count, 1).End(xlUp).Row To 1 Step -1
        Cells(i, 1).Select
        If Cells(i, 1) = "NaN" Then Cells(i, 1).EntireRow.Delete
    Next i
End Sub 
```

在 Excel VBA 窗口中，使用 执行 sub `F8`，这将允许您单步执行代码并检查您引用的工作表。

# c# - 无法比较 EF 查询中的元素异常

> ID：13363963
> 
> 赞同：9
> 
> 时间：2012-11-13T15:50:24.123
> 
> 标签：c#, entity-framework-4.1

我基本上有：

```
public ActionResult MyAction(List<int> myIds)
{
    var myList = from entry in db.Entries
             where (myIds == null || myIds.Contains(entry.Id))
                 select entry;
    return View(myList);
} 
```

目标是仅获取具有传递 Id 的项目或返回所有项目。（为清楚起见，剪掉了其他标准）

返回时出现异常`myList`，我已经进行了一些调试，并且在执行`.ToList()`

> 无法比较“System.Collections.Generic.List`1”类型的元素。
> 仅支持原始类型（例如 Int32、String 和 Guid）和实体类型。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T15:50:43.593

问题是因为 myIds 为空。

我需要：

```
public ActionResult MyAction(List<int> myIds)
{
    if(myIds == null)
    {
        myIds = new List<int>();    
    }
    bool ignoreIds = !myIds.Any();

    var myList = from entry in db.Entries
                 where (ignoreIds || myIds.Contains(entry.Id))
                 select entry;
    return View(myList);
} 
```

# javascript - 使用 CSS 可见性淡入：可见？

> ID：13363965
> 
> 赞同：6
> 
> 时间：2012-11-13T15:50:25.203
> 
> 标签：javascript, jquery, html, css

我正在使用`visibility: hidden;`and`visibility: visible;`来显示和配置 div，例如 modals 和其他 div。我希望在单击`<a>`链接以运行 javascript 以显示和隐藏 div 时具有淡入效果，但我非常希望继续使用该`visibility`元素来切换 div 可见性。有没有办法用 HTML/CSS/JavaScript/jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:51:53.297

在 jQuery 中：

```
$('selector').fadeIn(); 
```

使用 CSS，使用不透明度：（这是 50%）

```
-moz-opacity:.50; 
filter:alpha(opacity=50); 
opacity:.50; 
```

如果您想手动进行淡入，请逐步调整此不透明度，当您达到不可见点时，添加`display:none`但是如果您仍然使用 jQuery，请坚持使用`fadeIn()`

`fadeIn()`也支持速度，只需添加毫秒作为第一个参数。查看文档：[http ://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

想要将`display`属性保留在 css 中，请使用`fadeTo()`. 它需要不透明度百分比：[http ://api.jquery.com/fadeto/](http://api.jquery.com/fadeto/)

```
$(this).fadeTo("slow", 1); // 100% visible
$(this).fadeTo("slow", 0); // 0% visible aka hidden 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T16:02:58.120

我假设您想使用 visibility:hidden 而不是 display:none 以便您看到一个空白区域。

如果是这样，fadeIn() 和 fadeOut() 将不适合您，因为它在淡出后将显示设置为无。

而是使用 jQuery animate() 为不透明度设置动画，然后在回调中添加 visibility:hidden/visible。

这是我将如何使用 jQuery 来实现的。

```
$('#a-id').click(
  if( $('#div-id').css('visibility') == 'hidden'){
    $('#div-id').animate({opacity: 1}, 'fast', function(){
    $('#div-id').css('visibility', 'visible');
  });
  }else{
    $('#div-id').animate({opacity: 0}, 'fast', function(){
    $('#div-id').css('visibility', 'hidden');
  }
); 
```

我敢肯定有更好的方法可以做到这一点，但这没有问题afaik。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T16:23:36.823

您也可以使用 css3 完成此操作：http: [//jsfiddle.net/dc7EV/](http://jsfiddle.net/dc7EV/)

```
$("#hideme").click(function(){
    $(this).removeClass("fadein").addClass("fadeout");

    setTimeout(function(){
        $("#hideme").removeClass("fadeout").addClass("fadein");
    }, 2000);
});​ 
```

CSS

```
#hideme{
    border:solid 1px #000;
    background:#ccc;
    padding:20px;
}

@-webkit-keyframes fadeout{
    0%{opacity:1;visibility:visible;}
    99%{opacity:0;}
    100%{opacity:0;visibility: hidden;}
}
.fadeout {
    -webkit-animation:fadeout 1s linear;
    visibility:hidden;
}
@-webkit-keyframes fadein{
    0%{opacity:0;visibility:visible;}
    100%{opacity:1;}
}
.fadein {
    -webkit-animation:fadein 1s linear;
}
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:55:40.620

我更喜欢 Rene 的回答，但是如果您强烈希望使用可见性属性（正如您所说的那样），那么您可以使用 css() 这样做：

```
$('selector').css('visibility', 'hidden');
$('selector').css('visibility', 'visible'); 
```

# java - 如何在休眠中以最大长度设置列的长度

> ID：13363969
> 
> 赞同：37
> 
> 时间：2012-11-13T15:50:42.473
> 
> 标签：java, mysql, hibernate

我想在数据库中保存一个对象。
我正在使用 MySQL 数据库，但是当我尝试它时，我得到一个异常，上面写着：“数据大于列长度”。
如何使用休眠增加列的长度？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-13T15:57:28.650

如果您的列`varchar`使用注释`length`

```
@Column(length = 255) 
```

或使用其他列类型

```
@Column(columnDefinition="TEXT") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-11T05:09:05.853

```
@Column(name = Columns.COLUMN_NAME, columnDefinition = "NVARCHAR(MAX)") 
```

`max`表示最大存储大小为 2^31-1 字节（2 GB）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T15:59:02.583

您可以对列使用[长度](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/#table-builtin-constraints)注释。通过使用它，您可以最大化或最小化列长度。长度注释仅用于`Strings`.

```
@Column(name = "NAME", nullable = false, length = 50)  
@Length(max = 50)
public String getName() {
    return this.name;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:57:13.377

使用`@Column`注解并定义其`length`属性。检查[Hibernate](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-property)的文档以获取参考资料（第 2.2.2.3 节）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-16T03:23:12.507

与 mychalvlcek 的回答类似，您可以将长度属性用于字符串值，但是如果您想在数据库中设置为 VARCHAR(MAX)，此解决方案在 MS SQL 中对我有用：

```
@Column(length = Integer.MAX_VALUE) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-13T15:58:12.890

你需要改变你的桌子。使用 DDL 语句增加列宽。

请看这里

```
http://dba-oracle.com/t_alter_table_modify_column_syntax_example.htm 
```

# c# - 如果用户在客户端弹出窗口中单击是，如何在服务器端查找

> ID：13363971
> 
> 赞同：0
> 
> 时间：2012-11-13T15:50:51.753
> 
> 标签：c#, javascript, jquery, client-side, server-side

我在服务器端按钮单击上添加一个事件：

```
ClientScript.RegisterStartupScript(Page.GetType(), "openPopUp", "javascript:onClick();", true); 
```

在客户端我有一个功能：

```
function onClick() {

    var r = confirm("Are you sure you want to go ahead ?.");

    if (r == true) {
    }
    else {
        return false;
    }
} 
```

如果用户单击是或否，我如何在服务器端找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:56:45.843

向页面添加一个 HiddenField 并在之后检索该值。

```
<asp:HiddenField runat="server" ID="hidResultOfConfirm" /> 
```

Javascript：

```
function onClick() {

    var r = confirm("Are you sure you want to go ahead ?.");

    if (r == true) {
        document.getElementById('<%=hidResultOfConfirm.ClientID%>').value = "true";
    }
    else {
        document.getElementById('<%=hidResultOfConfirm.ClientID%>').value = "false";
        return false;
    }
} 
```

然后在服务器端检查`hidResultOfConfirm.Value`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:53:29.357

你不能在服务器上找到。了解页面生命周期。JavaScript 在页面加载后运行，服务器已完全完成加载。

如果您需要获取用户输入，则需要考虑再次回发页面或进行 Ajax 调用。

# apache - 将网站切换到新的 CMS

> ID：13363973
> 
> 赞同：1
> 
> 时间：2012-11-13T15:50:59.820
> 
> 标签：apache

我被要求将网站更新为流行 CMS 的新版本。新站点几乎准备就绪，我想知道如何在切换期间限制停机时间。

我有一个包含当前站点的文件夹 [/public_html]。我想我可以创建一个新文件夹 [/public_html2]，将新站点复制到那里，测试它，然后简单地重命名文件夹

[ `/public_html`] -> [ `/public_html_old`]

和

[ `/public_html2`] -> [ `/public_html`]

停机时间是我重命名文件夹的时间。

这是“正确”的做法吗？是不是很糟糕？，有没有“更好”的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:54:52.870

也许你可以在 apache 上更改这个项目的配置。使停机时间只有重新启动 apache 的时间。我认为它会更小。

# php - 如何从数据库 MySQL 中的大量记录中删除特定字符？

> ID：13363976
> 
> 赞同：2
> 
> 时间：2012-11-13T15:51:09.257
> 
> 标签：php, mysql, sql, character

我在数据库中有很多记录，我想从特定列中的所有记录中删除一个特定字符。

例如我有这张桌子

```
id cost    distance  
1  $1,519  21.5 miles   
2  $7,987  32.789 miles 
```

我想删除成本列中的所有美元符号和逗号我想从距离列中删除单词英里

所以我希望最终结果是

```
id cost  distance  
1  1519  21.5  
2  1987  32.789 
```

你能帮我如何处理大量记录吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:53:34.853

用`REPLACE`在这个上，

```
UPDATE  tableName
SET cost = REPLACE(REPLACE(cost, '$', ''), ',',''),
    distance = REPLACE(distance, 'miles', '') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f8828/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:00:26.210

```
select id,
       replace(substring(price, 2, length(price)), '.', ''),  
       replace(distance, 'miles', '')
from *tablename* 
```

# ios - UIPopoverController 不会初始化ContentViewController

> ID：13363977
> 
> 赞同：1
> 
> 时间：2012-11-13T15:51:15.620
> 
> 标签：ios, uiimagepickercontroller, uipopovercontroller

我目前正面临我的 UIPopovercontroller 的问题。

这是事实，我有一个类：（`ImagePickerViewController`从 BaseViewController 继承）包含两个属性：

```
@property (nonatomic, retain) UIImagePickerController *pickerController;
@property (nonatomic, retain) UIPopoverController *popOver; 
```

我还在 pickerController 上应用了一个覆盖，如下所示：

`[self presentViewController:pickerController animated:NO completion:nil];`

当我想通过 iPad 上的 UIPopoverController 显示图像库时：

```
popOver = [[UIPopoverController alloc] initWithContentViewController:pickerController]; 
```

我收到此错误：

> ***由于未捕获的异常“NSGenericException”而终止应用程序，原因：“内容视图控制器参数必须是其关联视图控制器层次结构的根。”

我已经看过[这个话题](https://stackoverflow.com/questions/7766051/ios5-ipad-uipopovercontroller-initwithcontentviewcontroller-nsgenericexception)，但它并没有真正帮助。

所以我认为呈现 pickerController 使它成为根，看起来它不是。欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:00:32.150

问题是您试图同时显示相同的 pickerController 两次。你不能那样做。要么将其呈现为模态视图控制器，要么将其`presentViewController`呈现在弹出框中。不要试图两者都做。

要在弹出窗口中显示它，请从您必须创建弹出窗口的行开始：

```
popOver = [[UIPopoverController alloc] initWithContentViewController:pickerController]; 
```

然后调用两种方法之一来呈现弹出框：

```
[popover presentPopoverFrom.... permittedArrowDirections: UIPopoverArrowDirectionAny animated:YES]; 
```

# php - 使用elliothaughin/在Codeigniter中登录Twitter会出错

> ID：13363979
> 
> 赞同：1
> 
> 时间：2012-11-13T15:51:19.460
> 
> 标签：php, codeigniter, twitter-oauth

尝试在 codeigniter 中使用 Twitter 进行身份验证。它去推特并回来但给出错误。这是错误和代码。任何提示？

```
A PHP Error was encountered
Severity: Notice
Message: Undefined property: stdClass::$request
Filename: libraries/tweet.php
Line Number: 205

A PHP Error was encountered
Severity: Notice
Message: Undefined property: stdClass::$error
Filename: libraries/tweet.php
Line Number: 205

bool(false)

A PHP Error was encountered
Severity: Notice
Message: Undefined variable: friendship
Filename: controllers/tweet_connect.php
Line Number: 63 
```

这是代码；

```
function index()
    {
        echo 'hi there';
    }

  function auth()
  {
    $tokens = $this->tweet->get_tokens();

    // $user = $this->tweet->call('get', 'account/verify_credentiaaaaaaaaals');
    // 
    // Will throw an error with a stacktrace.

    $user = $this->tweet->call('get', 'account/verify_credentials');
    var_dump($user);

    //$friendship   = $this->tweet->call('get', 'friendships/show', array('source_screen_name' => $user->screen_name, 'target_screen_name' => 'elliothaughin'));
    //var_dump($friendship);

    if ( $friendship->relationship->target->following === FALSE )
    {
    //$this->tweet->call('post', 'friendships/create', array('screen_name' => $user->screen_name, 'follow' => TRUE));
    }

    //$this->tweet->call('post', 'statuses/update', array('status' => 'Testing #CodeIgniter Twitter library by @elliothaughin - http://bit.ly/grHmua'));

    $options = array(
    'count' => 10,
    'page'  => 2,
    'include_entities' => 1
    );

    //$timeline = $this->tweet->call('get', 'statuses/home_timeline');

    //var_dump($timeline);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:43:22.970

您可能正在使用旧库：[https ://github.com/elliothaughin/codeigniter-twitter/pull/25#commitcomment-1988684](https://github.com/elliothaughin/codeigniter-twitter/pull/25#commitcomment-1988684)

您可能已达到请求限制：[Elliot Haughin API verify credentials error](https://stackoverflow.com/q/8857575/183254)

自从大约 2 年前发布该库以来，twitter api 也发生了很多变化——该库可能在​​当前状态下不再工作。

可能想查看 twitter 提供的库：[https ://dev.twitter.com/docs/twitter-libraries#php](https://dev.twitter.com/docs/twitter-libraries#php)

# python - csv 模块将时间写入十进制

> ID：13363989
> 
> 赞同：3
> 
> 时间：2012-11-13T15:51:57.690
> 
> 标签：python, excel, csv, xlrd

我遇到了一个问题，我在 .xls 文件中有一些数据（下面的示例）。

```
 A            B           C         D         E        F
John Smith     8:00AM      9:00AM    10:00AM    5:00PM  8.00 
```

当我使用 Python CSV 模块将其写入 csv 时，它显示为

```
John,Smith,0.333333333,0.375,0.416666667,0.708333333,0.333333333 
```

现在有趣的部分是，如果我手动将 xls 文件保存为 MSDOS csv，我会得到所需的输出

```
John,Smith,8:00 AM,9:00 AM,10:00 AM,5:00 PM,8:00 
```

这是我正在运行的功能。它有点混乱，所以我提前道歉。

```
def csv_gen(filepath, saveto):
    for files in glob.glob("*.xls"):
        shutil.copy(filepath + "\\" + files, saveto)
        with xlrd.open_workbook(files) as wb:
            sh = wb.sheet_by_index(0)
            newfile = saveto + files[:-4] + '.csv'
            now = datetime.datetime.now()
            dates = now.strftime("%m-%d-%Y")
            filestart = [saveto + files]
            time = [dates]
            with open(newfile, 'wb') as f:
                c = csv.writer(f,delimiter=',')
                list =  range(sh.nrows)
                last = range(sh.nrows)[-1]
                list.remove(0)
                list.remove(3)
                list.remove(2)
                list.remove(1)
                list.remove(last)
                #Iterate through data and show values of the rows
                for r in list:
                    lines = sh.row_values(r)
                    del lines[:4]
                    stuff = lines + filestart + time
                    #Remove blanks so csv doesnt have uneeded data
                    if lines[0] is '':
                        del stuff[:]
                    #Write to csv file with new data
                    if any(field.strip() for field in stuff):
                        c.writerow(stuff)
            shutil.move(newfile, mergeloc) 
```

我不明白为什么会这样。我尝试将方言标志添加到 csv 编写器为“excel”，但输出仍然相同。

**更新：**

如果我将文档保存为 csv，那么`workBook.SaveAs(test.csv, 24)`编码 24 用于 MSDOS。我得到了所需的输出

```
John,Smith,8:00 AM,9:00 AM,10:00 AM,5:00 PM,8:00 
```

但是当 csv 模块抓住它并删除一些空白行并在最后删除一些东西时，它会写出这些行，这就是我再次得到小数的时候

```
John,Smith,0.333333333,0.375,0.416666667,0.708333333,0.333333333 
```

csv 模块的目的是修改行和删除空白行。

**更新**

```
 for r in list: 
     cells = sh.row_values(r) 
     csv_row = cells[0] for col_value in cells[1:]:
         csv_row.append(datetime.time(*xlrd.xldate_as_tuple(col_value, 0)[3:])) 
```

添加 row_values 以仅返回单元格的值，而不是 xldata:0.33333。然后添加一个 * 以使传递成为位置参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:14:46.533

对我来说，这在`csv`模块中看起来不是问题，看起来在读取`.xls`文件时出现了问题。

根据`xlrd` [文档](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html)，Excel 工作表中的日期是一团糟

> **Excel 电子表格中的日期**
> 
> 实际上，没有这样的事情。你所拥有的是浮点数和虔诚的希望。Excel日期有几个问题：

我使用`.xls`您在其中提供的内容的新文件进行了快速测试。Python 读取文件没有问题，虽然我的机器上没有 Excel，但我在 LibreOffice 中制作了文件并将其保存为 .xls。即便如此，这些字段在 python 端以 unicode 字符串的形式出现。

您应该能够使用`xlrd.xldate_as_tuple(xldate, datemode)`( [link](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#xldate.xldate_as_tuple-function) ) 将浮点数转换为 python 日期元组。正在做

```
print xlrd.xldate_as_tuple(0.333333333,0) 
```

打印出来

```
(0, 0, 0, 8, 0, 0) 
```

**更新**

所以你可能想要类似下面的东西，改变`for`你的行的循环

```
...
for r_idx in list:
    cells = sh.row(r)
    csv_row = [cells[0]] # the first row value should be ok as just a string
    for col_value in cells[1:]:
        # add the date time column values to the converted csv row
        csv_row.append( datetime.time(xlrd.xldate_as_tuple(col_value, 0)[3:]) )
    ... 
```

# mysql - 现有表上 MySQL 的 ASP.net MVC MembershipProvider

> ID：13363991
> 
> 赞同：2
> 
> 时间：2012-11-13T15:52:02.420
> 
> 标签：mysql, asp.net-mvc, asp.net-membership

**语言/技术位**

*   用 VB 和 razor 编写的 ASP.net MVC 4。（从互联网模板创建）
*   MySQL 5.5
*   Visual Studio 2012 Express for Web（即将升级到专业版）

**要求**

我需要在我的 ASP.net MVC 4 应用程序中实现成员资格和角色。我有一个现有的 MySQL 数据库，其中包含一个我希望用于此目的的 Users 表。

但是，由于时间限制以及我对 ASP.net MVC 开发相对较新，我希望尽可能少地进行技术编码或重写。

以下是现有 users 表的 create 语句的主要部分：

```
CREATE TABLE `User` (
    `User_ID` int(11) NOT NULL AUTO_INCREMENT,
    `Company_ID` int(11) NOT NULL,
    `Email` varchar(255) NOT NULL,
    `Firstname` varchar(255) NOT NULL,
    `Surname` varchar(255) NOT NULL,
    `Password` varchar(128) NOT NULL,
    `Password_Salt` varchar(128) NOT NULL,
    `Status` int(11) NOT NULL DEFAULT '1',
    `Created` datetime DEFAULT NULL,
    `Modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`User_ID`)) 
```

虽然我有一定的灵活性并且可以从用户表中添加或删除一些字段，但 User_ID 和 Company_ID 字段非常重要并且必须保留，因为它们在至少六个其他表中用作外键。

我也不想使用用户名字段，而是希望所有帐户登录都使用电子邮件字段。

**目前的比赛状态**

目前，我已经能够使用其默认的自动生成表集成功设置和测试标准 MySQLMembershipProvider...

```
my_aspnet_applications
my_aspnet_membership
my_aspnet_profiles
my_aspnet_roles
my_aspnet_schemaversion
my_aspnet_sessioncleanup
my_aspnet_sessions
my_aspnet_users
my_aspnet_usersinroles 
```

在理想情况下，我宁愿替换 my_aspnet_users 表（删除过程中的所有其他表）并使用我自己的用户表（和角色表结构）。但是，我知道这涉及编写自定义 MembershipProvider ，这是我目前宁愿避免的事情，我需要一些快速且不涉及重新发明轮子的东西。

目前，我会通过使用一个键来解决默认的 Membership users 表和我自己的表之间的链接。

**问题**

1.  在 my_aspnet_users 和 Users 之间创建链接的最佳方法是什么？
2.  如何限制提供商仅使用电子邮件地址？
3.  根据谁登录，我将如何从用户表中检索名字和姓氏以及公司 ID？（在登录时显示用户名而不是他们的电子邮件地址等）
4.  有没有人发现任何文章、教程或视频对他们有类似或相同的帮助？

非常感谢任何人对此提供的任何帮助，我非常感谢！！！

# ruby-on-rails-3 - 在 Rails 中迭代 JSON

> ID：13363996
> 
> 赞同：2
> 
> 时间：2012-11-13T15:52:16.913
> 
> 标签：ruby-on-rails-3, json

我有一个单行 JSON 文件，我正在尝试迭代并寻找循环遍历它的最佳方式。

爆炸后，它看起来像：

```
{
 "system": "Test",
 "Continents": [
    {
        "Continent": {
            "name": "Europe",
            "location": "North"
         },
        "Continent": {
            "name": "Australia",
            "location": "South"
         },
        "Continent": {
            "name": "Asia",
            "location": "North"
         }
     }  
  ]
} 
```

首先，我使用以下内容加载 JSON，它成功加载了完整的 JSON。

```
File.open(json_file, 'r') do |file|

    file.each do |line|            

      JSON.parse(line).each do |item|

        ## CODE TO ITERATE HERE

      end        
    end
 end 
```

我不知道该怎么做是循环浏览该`Continents`部分并提取相关记录。目标是循环并输出列表/表格/显示中的信息。

感谢您的帮助-如果我能澄清一下，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:01:34.787

`JSON.parse`会将您的 JSON 字符串转换为 Ruby 哈希，因此您可以像使用其他任何内容一样使用它：

```
json = JSON.parse(line)
json["Continents"].each do |continent|
  # do something
end 
```

但是，您的数据存在一个单独的问题。如果您实际使用`JSON.parse`您发布的数据，您应该得到如下结果：

```
{"system"=>"Test", "Continents"=>[{"Continent"=>{"name"=>"Asia", "location"=>"North"}}]} 
```

您会注意到只有一个大陆 - 这是因为 Ruby 散列仅支持每个键的一个值，因此JSON 中`Continent`的每个键都被覆盖。`Continent`您可能需要查看格式化该数据的不同方式。

# sql-server - 与 Linq-to-SQL 等效的子查询的 SQL 查询

> ID：13363997
> 
> 赞同：0
> 
> 时间：2012-11-13T15:52:23.290
> 
> 标签：sql-server, linq, linq-to-sql

我再次重写我的问题，我没有以正确的方式暴露它，对不起。

我有这个 SQL 查询：

```
SELECT T1.*, T2.documentNumber
FROM TABLE1 T1      
LEFT JOIN TABLE2 T2 ON      
    T2.documentNumber = (
        SELECT TOP 1 documentNumber         
        FROM TABLE2  
        WHERE description = T1.description)                                     
WHERE T1.color = 'RED'; 
```

我需要`T1`用相应的`T2.documentNumber`值检索按颜色过滤的所有行，但是唯一的`T1`行，我的意思是，与 1 到 1 的关系`T2`。

`T1`并`T2`通过`description`列相关。因为`description`在 中不是唯一的`t2`，所以该表可以包含具有相同描述的 N 行，因为我只希望每`T1`行的结果为 1 行，所以我通过唯一列 ( `documentNumber`) 获得前 1 个过滤。

这个查询对我来说很好，我想知道是 Linq-to-SQL 的等价物，我尝试了几个小时但没有成功。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:07:38.157

尝试

```
var result = table1.Where(t1 => t1.color == "RED")
                   .GroupJoin(table2,
                              t1 => t1.description,
                              t2 => t2.description,
                              (t1,g) => new {
                                              T1 = t1,
                                              DocumentNumber = g.FirstOrDefault()
                                             }); 
```

强制性 101 链接：[http](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b) ://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b应该有助于处理这类查询......