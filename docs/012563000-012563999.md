# StackOverflow 问答 12563000-12563999

# loops - 将一个工作表列中的数据匹配到另一个工作表列

> ID：12563000
> 
> 赞同：0
> 
> 时间：2012-09-24T10:18:15.080
> 
> 标签：loops, vbscript, matching, vlookup, if-statement

我有两个包含两列数据的工作表。工作表的 A 列是项目的名称，B 列是项目的价格。工作表 1 具有去年的价格，工作表 2 具有今年的价格。工作表 1 中的项目名称可能在工作表 2 中，也可能不在工作表 2 中。

我需要一个流程来匹配每个工作表中的名称，如果匹配，则确定该项目的价格差异。价格差异将出现在工作表 2 的 C 列中。

我考虑过使用带有 vlookup 函数的 if-then 函数，但是我需要检查工作表 1 和工作表 2 的所有列 A 中的所有记录是否匹配。我相信VB循环过程可能更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T01:25:03.337

由于在我看来，您可能只需要一次（或一年一次）效率似乎不是很重要，因此公式可能会起作用。

假设 Row1 中的标签（分别在 Sheet1`Item_Name` 和Sheet2 中） ，则以下公式（复制下来以适应）应指示不匹配的位置（或者，如果存在，则相对于去年的价格变化：`Price_O``Item_Name``Price_N``Diff``#N/A`

在 Sheet1 C2 中：`=IF(MATCH(A2,Sheet2!A:A,0)>0,"")`
在 Sheet2 C2 中：`=B2-VLOOKUP(A2,Sheet1!A:B,2,FALSE)`

* * *

或者，数据透视表可能会提供更好的概览，并结合：

在 Sheet2 H5 中：（`=IF(OR(ISBLANK(F5),ISBLANK(G5)),"No Match",G5-F5)`复制下来以适应）。

1.  在 Sheet2 E1 中调用数据透视表向导（Alt+D，P 如果需要），选择多个合并范围和数据透视表，下一步。
2.  选择我将创建页面字段，下一步。
3.  在 Range 中选择或插入 Sheet1!$A:$B, Add, 然后 Sheet2!$A$B, Add, Next, 选择 Existing worksheet 并输入`=$E$3`, Finish。
4.  右键单击表格，如有必要，将 Σ 值从 Count of Value 更改为 Sum of Value（左键单击 Count of Value，左键单击 Value Field Settings... 并在 Summarize by 中选择 Sum），确定。
5.  右键单击表格，左键单击数据透视表选项，左键单击总计和过滤器，如有必要，取消勾选显示行总计，确定。
6.  如有必要，右击`PriceN`表格中的Sort，Sort ZA。

* * *

![SO12563000 示例](../Images/a8a72bdea576be7077117a9f1e965df6.png)

# c# - 在单独的页面上打印图像？

> ID：12563003
> 
> 赞同：0
> 
> 时间：2012-09-24T10:18:33.187
> 
> 标签：c#, printing

请建议，我正在尝试将我的图像列表打印一页图像。以下代码将每个图像与其他图像重叠打印在一页上。

```
 void pd_PrintPage(object sender, PrintPageEventArgs e)
    {

        List<Bitmap> labels = GetLabels();

        foreach (var bitmap in labels)
        {
            e.Graphics.DrawImageUnscaled(bitmap, 0, 0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:26:58.520

Move the read of bitmaps outside the PrintPage event handler, make it something like this:

```
void pd_PrintPage(object sender, PrintPageEventArgs e)
{
   var bitmap = GetNextLabel();

   if(bitmap != null)
   {
      e.Graphics.DrawImageUnscaled(bitmap, 0, 0);
   }

   // Will print more pages as long as there are bitmaps
   e.HasMorePages = (bitmap != null);
} 
```

So the GetNextLabel() method will have to keep track of what bitmap to print next, and return null when there are no more to print.

Setting e.HasMorePages = true will print another page. See this [link](http://msdn.microsoft.com/en-us/library/cwbe712d.aspx) for more details

# zend-framework2 - ZF2如何在视图中更改语言环境

> ID：12563004
> 
> 赞同：1
> 
> 时间：2012-09-24T10:18:37.417
> 
> 标签：zend-framework2, zend-translate

我的配置是

```
'translator' => array(
'locale' => 'en_EN',
'translation_file_patterns' => array(
    array(
        'type'     => 'gettext',
        'base_dir' => __DIR__ . '/../language',
            'pattern'  => '%s.mo',
        ),
    ),
), 
```

以及如何从我的视图或控制器更改语言环境？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:25:01.830

获取`Translator`实例并调用`setLocale()`方法。示例（控制器上下文）：

```
// Get the translator from the service locator.
$translator = $this->getServiceLocator()->get('translator');
$translator->setLocale($myLocale); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T19:12:47.443

更新：

```
$translator = $this->getServiceLocator()->get('translator');
$translator->setLocale($myLocale); 
```

# doctrine-orm - 运行模式管理器更新时忽略 Doctrine2 实体

> ID：12563005
> 
> 赞同：11
> 
> 时间：2012-09-24T10:18:39.460
> 
> 标签：doctrine-orm

我已经定义了一个 Doctrine Entity，它映射到我的数据库中的一个视图。一切正常，实体关系按预期正常工作。

现在的问题是，当`orm:schema-manager:update`在 CLI 上运行时，会为此实体创建一个表，这是我想要阻止的。这个实体已经有一个视图，不需要为它创建一个表。

我可以对实体进行注释，这样就不会创建表，同时仍然可以访问所有与实体相关的功能（关联，...）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-20T12:46:01.303

基于在 Marco Pivetta 的帖子中启发的 ChrisR 的原始 alswer，如果您使用 Symfony2，我将在此处添加解决方案：

看起来 Symfony2 不使用原始 Doctrine 命令：\Doctrine\ORM\Tools\Console\Command\SchemaTool\UpdateCommand

相反，它使用捆绑包中的一个：\Doctrine\Bundle\DoctrineBundle\Command\Proxy\UpdateSchemaDoctrineCommand

所以基本上这是必须扩展的类，最终有：

src/Acme/CoreBundle/Command/DoctrineUpdateCommand.php：

```
<?php

namespace Acme\CoreBundle\Command;

use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Doctrine\ORM\Tools\SchemaTool;

class DoctrineUpdateCommand extends \Doctrine\Bundle\DoctrineBundle\Command\Proxy\UpdateSchemaDoctrineCommand {

  protected $ignoredEntities = array(
      'Acme\CoreBundle\Entity\EntityToIgnore'
  );

  protected function executeSchemaCommand(InputInterface $input, OutputInterface $output, SchemaTool $schemaTool, array $metadatas) {

    /** @var $metadata \Doctrine\ORM\Mapping\ClassMetadata */
    $newMetadatas = array();
    foreach ($metadatas as $metadata) {
      if (!in_array($metadata->getName(), $this->ignoredEntities)) {
        array_push($newMetadatas, $metadata);
      }
    }

    parent::executeSchemaCommand($input, $output, $schemaTool, $newMetadatas);
  }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T09:41:51.147

最终它变得相当简单，我只需将其子类`\Doctrine\ORM\Tools\Console\Command\SchemaTool\UpdateCommand`化为我自己的 CLI 命令。在该子类中过滤`$metadatas`要传递给的数组，`executeSchemaCommand()`然后将其传递给父函数。

只需将此新的子类命令附加到您在教义 cli 脚本中使用的 ConsoleApplication 即可！

下面是扩展命令，在生产中你可能想`$ignoredEntities`从你的配置或其他东西中获取属性，这应该会让你上路。

```
<?php
use Symfony\Component\Console\Input\InputArgument,
    Symfony\Component\Console\Input\InputOption,
    Symfony\Component\Console\Input\InputInterface,
    Symfony\Component\Console\Output\OutputInterface,
    Doctrine\ORM\Tools\SchemaTool;

class My_Doctrine_Tools_UpdateCommand extends \Doctrine\ORM\Tools\Console\Command\SchemaTool\UpdateCommand
{
    protected $name = 'orm:schema-tool:myupdate';

    protected $ignoredEntities = array(
        'Entity\Asset\Name'
    );

    protected function executeSchemaCommand(InputInterface $input, OutputInterface $output, SchemaTool $schemaTool, array $metadatas)
    {
        /** @var $metadata \Doctrine\ORM\Mapping\ClassMetadata */
        $newMetadatas = array();
        foreach($metadatas as $metadata) {
            if(!in_array($metadata->getName(), $this->ignoredEntities)){
                array_push($newMetadatas, $metadata);
            }
        }

        return parent::executeSchemaCommand($input, $output, $schemaTool, $newMetadatas);
    }
} 
```

PS：感谢 Marco Pivetta 让我走上了正轨。[https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/rwWXZ7faPsA](https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/rwWXZ7faPsA)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-05T15:52:19.010

相当老的一个，但使用事件监听器也没有任何价值的解决方案`Doctrine2`-`postGenerateSchema`对我来说，它比覆盖 `Doctrine`类更好：

```
namespace AppBundle\EventListener;

use Doctrine\ORM\Tools\Event\GenerateSchemaEventArgs;

/**
 * IgnoreTablesListener class
 */
class IgnoreTablesListener
{
    private $ignoredTables = [
        'table_name_to_ignore',
    ];

    public function postGenerateSchema(GenerateSchemaEventArgs $args)
    {
        $schema = $args->getSchema();

        $tableNames = $schema->getTableNames();
        foreach ($tableNames as $tableName) {

            if (in_array($tableName, $this->ignoredTables)) {
                // remove table from schema
                $schema->dropTable($tableName);
            }

        }
    }

} 
```

同时注册监听器：

```
ignore_tables_listener:
    class: AppBundle\EventListener\IgnoreTablesListener
    tags:
        - {name: doctrine.event_listener, event: postGenerateSchema } 
```

不需要额外的钩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T18:53:50.590

`$schema->getTableNames()`没有工作（我不知道为什么）。

所以：

```
namespace AppBundle\EventListener;

use Doctrine\Bundle\DoctrineBundle\Command\Proxy\UpdateSchemaDoctrineCommand;
use Doctrine\ORM\Tools\Event\GenerateSchemaEventArgs;

class IgnoreTablesListener extends UpdateSchemaDoctrineCommand
{

    private $ignoredEntities = [
        'YourBundle\Entity\EntityYouWantToIgnore',
    ];

    /**
     * Remove ignored tables /entities from Schema
     *
     * @param GenerateSchemaEventArgs $args
     */
    public function postGenerateSchema(GenerateSchemaEventArgs $args)
    {
        $schema = $args->getSchema();
        $em = $args->getEntityManager();

        $ignoredTables = [];
        foreach ($this->ignoredEntities as $entityName) {
            $ignoredTables[] = $em->getClassMetadata($entityName)->getTableName();
        }

        foreach ($schema->getTables() as $table) {

            if (in_array($table->getName(), $ignoredTables)) {
                // remove table from schema
                $schema->dropTable($table->getName());
            }
        }
    }
} 
```

并注册服务

```
#services.yml
ignore_tables_listener:
    class: AppBundle\EventListener\IgnoreTablesListener
    tags:
        - {name: doctrine.event_listener, event: postGenerateSchema } 
```

工作得很好！;)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-08T12:25:04.620

如果问题仅在于在 db_view 中产生错误，那么在调用 dictionary:schema:update 命令时，为什么不是最简单的方法：

1.  从 @ORM\Entity 注释中删除 @
2.  执行学说：模式：更新
3.  将 @ 添加到 ORM\Entity 注释

;-)

# java - SSLSocket：为什么我们需要在访问服务器证书之前进行握手？

> ID：12563010
> 
> 赞同：2
> 
> 时间：2012-09-24T10:19:12.100
> 
> 标签：java, ssl

我正在通过 SSLSocket 连接到使用证书进行握手的远程主机。由于我们不使用所有证书颁发机构的默认 JVM 信任库，因此我需要将远程主机证书添加到我的信任库。

如何从 SSLSocket 获取我应该信任的证书？似乎确实要检索它们，我需要使用似乎需要握手的 SSLSession。为什么我们需要执行握手才能检索证书？

是否有任何工具可以提取所使用的远程主机证书？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:13:29.417

实际上，证书是在握手期间提供的，以便服务器可以识别自己，最终对客户端也是如此。

当你这样做时：

```
SSLContext context = SSLContext.getInstance("TLS");
TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
[...]
SavingTrustManager tm = new SavingTrustManager(defaultTrustManager);
SSLSocket socket = (SSLSocket)factory.createSocket(host, port);
try {
    socket.startHandshake();
    socket.close();
} catch (SSLException e) {
    e.printStackTrace(System.out);
} 
```

如果您在 startHandshake() 上没有收到异常，则表示证书由于某种原因已经受信任（直接存在于密钥库中，由受信任的实体签名）。

是否发生异常，您可以访问下载的链：

```
X509Certificate[] chain = tm.chain;
if (chain == null) {
   // error in downloading certificate chain
   return;
}

// loop through chain
for (int i = 0; i < chain.length; i++) {
    X509Certificate cert = chain[i];
    [....]
} 
```

使用 X509Certificate 对象实例，您实际上可以更新您的 k-ieth 密钥库：

```
X509Certificate cert = chain[k];
String alias = host + "-" + (k + 1);
KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
[...]
ks.setCertificateEntry(alias, cert);
OutputStream out = new FileOutputStream("jssecacerts");
ks.store(out, passphrase);
out.close(); 
```

[在此处](http://www.dzone.com/snippets/ssl-download-certificate-chain)查看完整示例。

或者，为您信任的服务器下载证书的另一种可能更安全的方法是使用 openssl 命令：

```
# openssl s_client -showcerts -connect $SERVER:$PORT  2>&1 | \
      sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' >/tmp/$SERVERNAME.cert 
```

然后像往常一样使用`keytool`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T10:58:04.967

通常，您不应该从 中获取您应该信任的证书`SSLSocket`，相反，它应该是您独立获得的配置设置，作为您想要信任的参考。

您似乎想要做的是获取第一个连接的证书，希望该连接没有被拦截，然后将其用作后续连接的参考（类似于 SSH 通常做的事情，当你不必须在第一次连接时知道服务器密钥的指纹，但稍后检查是否得到相同的指纹）。

安全方面，这并不理想，因为初始连接可能会被 MITM 攻击者拦截（这会使所有后续连接易受攻击），但这无疑是一种降低风险的方法。理想情况下，您应该将该证书与您通过其他方式获得的已知参考进行比较。

您可以在握手期间使用自定义访问远程证书`X509TrustManager`（或者您可以使用它禁用信任验证并稍后获取证书），然后您可以使用它来初始化一个`SSLContext`，您可以从中获取您的`SSLSocketFactory`. 在信任管理器中禁用信任验证通常是一个坏主意（因为它打开了与 MITM 攻击的连接），但它可以用于此目的。您可能对该[`InstallCert`](http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java)实用程序感兴趣，它应该或多或少地完成您所追求的工作。

> 为什么我们需要在访问服务器证书之前进行握手？

这是在握手期间完成的，因为 SSL/TLS 套接字 API 的目的是为应用程序层提供一个它可以认为是安全的套接字，并且在该阶段或多或少地用作普通套接字。通常，对于 JSSE（或通常其他 SSL/TLS 堆栈）的大多数用途，作为使用该堆栈的应用程序开发人员，您不希望必须明确地进行验证。[作为TLS 规范](https://www.rfc-editor.org/rfc/rfc4346#section-7.4.5)的一部分，还建议在握手期间检查证书：

> 收到服务器 hello done 消息后，如果需要，客户端应该验证服务器是否提供了有效的证书，并检查服务器 hello 参数是否可接受。

# jquery - 获取文档标题

> ID：12563012
> 
> 赞同：1
> 
> 时间：2012-09-24T10:19:19.087
> 
> 标签：jquery, ajax, get, meta-tags

我有一个允许从任何网站检索元内容的脚本：[JsFiddle](http://jsfiddle.net/XnUK7/)

我想检索文档标题，所以我尝试了：

```
 $.each($foop.find("head[title]"), function(idx, item) {
        lnk = $(item).attr("title");
        $('<div>' + lnk + '</div>').appendTo($('#meta'));
    }); 
```

和：

```
 $.each($foop.find("document[title]"), function(idx, item) {
        lnk = $(item).attr("title");
        $('<div>' + lnk + '</div>').appendTo($('#meta'));
    }); 
```

还有更多变体，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:21:48.350

在你的回调中使用它：

```
var title = $foop.find('title').text();
console.log(title); 
```

[演示](http://jsfiddle.net/dystroy/naTAx/)

# iphone - 自定义单元格 UITableview

> ID：12563013
> 
> 赞同：0
> 
> 时间：2012-09-24T10:19:20.230
> 
> 标签：iphone, objective-c

我想在我的 UITableview 中有一个自定义单元格。我已经尝试过以下方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"Cell" owner:nil options:nil];

    for (UIView *view in views) {
        if([view isKindOfClass:[UITableViewCell class]])
        {
            cell = (CustomCell*)view;
        }
    }
}
[cell setLabelText:[daten objectAtIndex:indexPath.row]];
return cell;

} 
```

但我在那条线上遇到了一个例外：

```
CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:23:04.767

这就是我制作自定义单元格并从课堂上调用它的方式：-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
     {
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[cell reuseIdentifier]];

    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = customCell;
        customCell = nil;
    }

    // Configure the cell.
    cell.serialLabel.text = [[NSNumber numberWithInt:indexPath.row+1]stringValue];
    cell.textLabel.textColor=[UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:58:32.683

我几乎可以肯定您在 XIB 文件中丢失了连接。如果commentLabel 仍然存在，您应该删除它并创建一个新的出口或检查出口部分并删除额外的连接，一切都会好起来的！

编辑：当您有两个插座连接到 IB 中的同一标签时，会发生此错误。

![在此处输入图像描述](../Images/9d16cb15e2b6bc7d1f35c22fd7e474cd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:01:18.820

如果您没有使用最新的 ios SDK，请确保您已编写 @synthesize 注释标签；在自定义单元格中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:14:35.560

尝试清理构建文件夹，或尝试模拟器 -> 重置内容和设置。

# c# - 将自定义数组对象转换为字符串数组

> ID：12563015
> 
> 赞同：1
> 
> 时间：2012-09-24T10:19:35.920
> 
> 标签：c#

我正在尝试将我的类的对象数组转换为字符串数组。

在这个例子中，我有两个类。在我的一个类中，我想创建两个变量，另一个类的对象。一个变量将是一个数组，另一个是“常规”变量。

两个类名。显示结果和游戏。

在游戏类中，我写道：

```
private ShowResult[] _showResults;
private ShowResult _showResult; 
```

在我的 Game 类的属性中，我尝试将这两个变量转换为字符串数组和字符串：

```
 public string[] ShowResults
    {
        get { return _showResults.ToString().ToArray(); }
        set { _showResults.ToString().ToArray() = value; }
    }

    public string ShowResult
    {
        get { return _showResult.ToString(); }
        set { _showResult = value; }
    } 
```

这行不通。我真的希望将我的自定义对象转换为字符串数组和字符串。但我得到一个错误..我知道我可以，但我不知道如何..

如果有人有任何建议，我将不胜感激。OBS，这只是一个例子。但我仍然不明白为什么它不起作用..？

顺便说一句，对不起我的英语不好。;)

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:22:40.007

试试这个：

```
_showResults.Select(a => a.ToString()).ToArray() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:29:30.193

鉴于您的代码的性质（即字符串似乎直接映射到`ShowResults`实例），您可能需要考虑实现`implicit`运算符：

```
ShowResults s = "hello";
string ss = s;
Console.WriteLine(ss); // "hello"

class ShowResults
{
    public string SomeProp
    {
        get; private set;
    }
    public static implicit operator ShowResults(string s)
    {
        //this is where you'd parse your string
        //to form a valid ShowResults
        return new ShowResults{SomeProp = s};
    }
    public static implicit operator string(ShowResults s)
    {
        return s.SomeProp;
    }
} 
```

# sip - SIP注册和SIP登录的区别

> ID：12563021
> 
> 赞同：3
> 
> 时间：2012-09-24T10:19:53.827
> 
> 标签：sip, pjsip, jain-sip, sip-server

我们需要开发SIP Client，有一个基本的疑问，

我们得到了 SIP UserId 、密码和服务器详细信息，并且想知道一些事情，

1.  SIP 注册和 SIP 登录有什么区别，我相信，没有像 SIP 登录，它的自定义 SIP 请求，并且在注册期间将使用 UserId / 密码
    ，如果我错了，请纠正我
2.  我们了解了音频呼叫流程，但所有教程都没有说语音服务器，假设一方正在呼叫并且另一方接受呼叫，那么媒体会话将建立，我相信双方都会收到一个服务器和端口号，双方都需要从那里传输和接收语音数据包。

如果我错了，请纠正我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:35:31.297

1.  SIP 定义了该`REGISTER`方法，以便用户代理可以将当前`Contact`地址与记录地址相关联。[请参阅RFC 3261](http://www.ietf.org/rfc/rfc3261.txt)的第 10 节。RFC3261 中没有定义登录方法。但是，任何初始请求都可能受到 401/407 响应的质询，该响应要求 UAC 重新发送带有身份验证凭据的初始请求。[请参阅RFC 3261](http://www.ietf.org/rfc/rfc3261.txt)的第 22.2 节。

2.  每一方在 SDP（会话描述协议）中向另一方提供媒体流的 IP 地址和端口号，作为 MIME 类型的 SIP 消息的主体传递`"application/sdp"`。在 SIP 中使用 SDP 记录在 RFC 3261 的相关部分中，并且可以在[此处](http://www.siptutorial.net/SDP/SDP.pdf)找到教程。

[这里](http://www.iptel.org/SIP)有一个非常好的 SIP 教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:18:40.810

有一个很棒的 SDP 教程可以在[这里](http://www.ozekiphone.com/what-is-sdp-session-description-protocol-352.html)找到。它解释了与 Ozeki Phone System XE 的关系。

我在搜索有关 SIP 的文章时发现了这个页面 :)

# ruby-on-rails - 看物体时偏移？

> ID：12563023
> 
> 赞同：1
> 
> 时间：2012-09-24T10:19:56.053
> 
> 标签：ruby-on-rails

我在控制器中有这样的东西：

```
@puzzleGames = Game.where("category = 'puzzle'").limit(8) 
```

但在视图中，我将它们显示在 2 个单独的区域中，其中 4 个在一个区域中，4 个在另一个区域中。

而不是做这样的事情：

```
<% @puzzleGames.each do |puzzleGame| %> 
```

循环遍历所有元素，是否可以循环到有限数（0-3,4-7）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:25:22.163

你也可以试试这个

```
@gameSlices = @puzzleGames.each_slice(4) 
```

然后使用`@gameSlices.first`和`@gameSlices.last`

**编辑：**结果证明这`@gameSlices.next`在这种情况下非常有用。它将一个一个地返回每个切片。

或者您可以使用类似的块

```
@puzzleGames.each_slice(4) do |slice|
    # Do your stuffs with slice
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:21:17.117

尝试 `@puzzleGames[0...4]`并`@puzzleGames[4...8]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:25:44.433

```
@puzzleGames = Game.where("category = 'puzzle'").limit(8)
@firstFourPuzzleGames = arr.each_slice(4).map(&:first)
@lastFourPuzzleGames = arr.each_slice(4).map(&:last) 
```

和

```
<% @firstFourPuzzleGames.each do |puzzleGame| %>
<% end %> 
```

和

```
<% @lastFourPuzzleGames.each do |puzzleGame| %>
<% end %> 
```

# c# - VSTO : 打开一个 Word 文档，该文档位于 VSTO 文件之外的另一个目录中

> ID：12563025
> 
> 赞同：2
> 
> 时间：2012-09-24T10:20:00.330
> 
> 标签：c#, ms-word, vsto, clickonce

我很确定我的问题是一个提示，但我找不到任何解决方案。

我有一个 Word 加载项解决方案，我想在其中打开一个与 vsto 文件不在同一目录的 Word 文档。

这是我打开word文件的代码：

```
object filename = Globals.ThisDocument.workingDirectory + Globals.ThisDocument.Id.ToString() + Constants.EXTENSION;
object missing = System.Reflection.Missing.Value;
Document doc = Globals.ThisDocument.Application.Documents.Open(ref filename, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing); 
```

在我的示例中： .vsto 文件位于`bin/debug`，我的 word 文档位于`bin/debug/save`

但我收到了这个错误：

无法加载 .vsto 文件

当然，因为 .vsto 文件与 word 文件不在同一个地方！...

![在此处输入图像描述](../Images/543bcdf8be2cf9fb193658d58c07372a.png)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:03:34.733

我自己找到答案，

事实上，当文档以 VSTO C# 代码保存时，vsto 文件的位置存储在 Word Xml 结构中。

所以不要介意你的 docx 被存储了，他们会找到他们的 vsto 文件。

# r - FUN(newX[, i], ...) 中的错误：找不到函数“sim”

> ID：12563026
> 
> 赞同：1
> 
> 时间：2012-09-24T10:20:03.327
> 
> 标签：r

我试图用一本书来学习 R。我试图做一个示例，其中对于矩阵的每一行，向量的相应元素将是 1 或 0，具体取决于该行中的前 d 元素的大多数是 1 还是 0。使用的代码是:-

```
copymaj <- function(rw,d) {
   maj <- sum(rw[1:d]) / d
   return(if(maj > 0.5) 1 else 0)
}

 x
    [,1] [,2] [,3] [,4] [,5]
[1,]  1    0    1    1    0
[2,]  1    1    1    1    0
[3,]  1    0    0    1    1
[4,]  0    1    1    1    0

apply(x,1,copymaj,3) 
```

它显示了上述错误。另外，如果我这样做`apply(x,1,copymaj(3))`，仍然会显示错误。

R 2.13 已安装 请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:46:53.823

正如@BenBarnes 指出的那样，您可能拼写错误`sum`，我认为您写`sim`的是`sum`.

我能够通过执行以下操作重现您的错误：

```
copymaj0 <- function(rw,d) {
  maj <- sim(rw[1:d]) / d    # here you have sim, this causes the error 
  return(if(maj > 0.5) 1 else 0)
}

copymaj1 <- function(rw,d) {
  maj <- sum(rw[1:d]) / d    # here you have sum which works well for me 
  return(if(maj > 0.5) 1 else 0)
}

x <- matrix(c(1,0,1,1,0,
         1,1,1,1,0,
         1,0,0,1,1,
         0,1,1,1,0), ncol=5, byrow=TRUE)

apply(x,1,copymaj0,3) # prints error
Error in FUN(newX[, i], ...) : could not find function "sim"

apply(x,1,copymaj1,3) # works well
[1] 1 1 0 1 
```

我真的认为你拼错了`sum`。

`apply(x,1,copymaj1(3))`将不起作用，因为如果您阅读`?apply`您会看到 `apply(X, MARGIN, FUN, ...)`，然后会`apply(x,1,copymaj1(3))`产生错误，因为 `...`替换`FUN`(`d=3`在您的情况下) 的参数被遗漏。为了将可选参数传递给您的乐趣，您必须使用`...`as in`apply(x,1,copymaj1,3)`但不能使用`apply(x,1,copymaj1(3))`.

# android - 在android cm9平台中嵌入加密

> ID：12563027
> 
> 赞同：0
> 
> 时间：2012-09-24T10:20:05.717
> 
> 标签：android, makefile, openssl, libraries, platform

我想做的事情是使用 android 的 openssl 库，所以我想在其他一些嵌入式应用程序中添加该库并保持数据加密。我在 cyanogen 7.1 平台上尝试了这些东西，只需添加：

LOCAL_C_INCLUDES += /external/openssl/include

LOCAL_SHARED_LIBRARIES += libssl libcrypto

在当前项目的 Android.mk 文件中，我能够在特定的 .c 文件中使用简单的#include 来使用所有功能。

唉，这一切在氰 9 上并不那么简单，我正在寻求一些帮助。您能否告诉我构建系统中是否有任何更改或我需要做的其他事情？

例如我有这种错误：

`EVP_get_cipherbyname' undefined reference to`对OPENSSL_add_all_algorithms_noconf' 的未定义引用。

我只想重复一遍，我将所有代码和我在 cyanogen 7 上所做的所有事情（并且完美地工作）移植到 cyanogen 9 上，但我无法构建平台。我确信我拥有所有包含的内容，并且 .h 文件一切正常。在我看来，可能只是库的链接可能导致问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:52:26.440

您似乎需要在位于 Android.mk 文件中的 sqlite 的所有 3 个实现中添加 C 包含以及 libssl 和 libcrypto 库。那将是 android 应用程序使用的 sqlite 的一个实现，以及在 android 平台中生成的两个 sqlite 实现。

# extjs - Extjs窗口调整大小后flexcroll不起作用

> ID：12563033
> 
> 赞同：2
> 
> 时间：2012-09-24T10:20:31.167
> 
> 标签：extjs, custom-scrolling

我正在使用 ExtJs 4.1.0，我是 extjs 的新手。我使用 fleXcroll 将自定义滚动条应用于窗口和面板。到目前为止它们工作正常，但是当我尝试调整窗口大小时，滚动条没有得到更新，而且它们也被隐藏在屏幕上。

这是代码：

```
 var samplePanel=new Ext.panel.Panel({
    title:'Panel1',
    height:350,
    width:350
    });

var sampleWindow=new Ext.window.Window({title:'Window',
                               items:[samplePanel],
                renderTo:Ext.getBody(),
                height:300,
                width:300,
                listeners:{
                                afterLayout:function(c){
                                   fleXenv.fleXcrollMain(c.body.id);
                 },resize:function(c,w,h,o){        
                                  if(c.body.dom.fleXcroll)
                                                 fleXenv.updateScrollBars();                        }
            }
}); 
```

有没有人有类似的问题？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:40:11.687

苦苦挣扎了好久，终于找到了真正的问题。

让我们看看当我们将滚动条应用到窗口时会发生什么。窗口内的内容进入我们需要显示滚动条的主体。FleXcroll 将在目标 div（在本例中为 body）内添加两个额外的 div，其 id 格式为 targetDivID_mcontentwrapper 和 targetDivID_scrollbarwrapper。正文的内容将转到 _mcontentwrapper，滚动条将在后面显示。

如果 contentSize 大于与目标 div 相同的 contentwrapper-div 的大小，则将显示滚动条。

这是应用flexcroll后div的结构

```
 window-body(target div)
   -- mcontentwrapper
      -- contentwrapper
          -- actual content
   -- scrollbarwrapper 
```

调整窗口大小后，内容将进入 window-body 而不是 contentwrapper。因此 contentwrapper 中的内容大小将为零，因此滚动条消失。

调整大小后的结构：

```
 window-body(target div)
   -- actual content
   -- mcontentwrapper
      -- contentwrapper
   -- scrollbarwrapper 
```

现在我们需要在更新滚动条之前将 actual_content 放入 contentwrapper 中。

这是执行此操作的代码：

```
 listeners:{afterLayout:function(c){    
                   fleXenv.fleXcrollMain(c.body.id);                    
              },
           resize:function(c){if(c.body.dom.fleXcroll){
                             var a=c.body.dom.childNodes;
                             var b=[];
                                for (var i=0,j=0;i<a.length ;i++ )
                                {
                                    if(a[i].id!=c.body.id+"_mcontentwrapper" && a[i].id!=c.body.id+"_scrollwrapper")
                                    {
                                        b[j]=a[i];
                                        j++;
                                    }
                                }
                            var el=Ext.get(c.body.id+"_contentwrapper");
                            for(var i=0;i<b.length;i++)
                                el.appendChild(b[i]);
                            }
}
} 
```

我希望它是有用的。

# windows-phone-7 - 在 Wp7 中获取 GetColorFromHexa 时未处理 ArgumentOutOfRangeException

> ID：12563037
> 
> 赞同：0
> 
> 时间：2012-09-24T10:20:40.693
> 
> 标签：windows-phone-7

当我试图从六值中获取颜色时，我得到了 ArgumentOutOfRangeException 。

```
 public static SolidColorBrush GetColorFromHexa(string hexaColor)
    {
        return new SolidColorBrush(
            Color.FromArgb(
                Convert.ToByte(hexaColor.Substring(1, 2), 16),
                Convert.ToByte(hexaColor.Substring(3, 2), 16),
                Convert.ToByte(hexaColor.Substring(5, 2), 16),
                Convert.ToByte(hexaColor.Substring(7, 2), 16)
            )
        );
    }

  SolidColorBrush brush = GetColorFromHexa("#ADD8E6");
  border.Background = brush; 
```

我是否遗漏了可能导致此问题的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:29:33.933

看起来您的参数 #ADD8E6 缺少颜色组件之一。AD D8 E6 只是三个组件，而 ARGB 需要四个。第四个在哪里？因此在 Convert.ToByte(hexaColor.Substring(7, 2), 16) 行上抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:27:46.913

`ArgumentOutOfRangeException -
startIndex plus length indicates a position not within this instance.`

`-or-`

`startIndex or length is less than zero` -msdn

所以这是导致您的问题的原因，换句话说，值（最后一个是 7,2）超出了范围。

一些可能对您使用[MSDN String.Substring 方法有帮助的示例](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

希望对你有帮助，祝你好运。

# android - Android：将音频文件转换为复数数组（用于 FFT）

> ID：12563044
> 
> 赞同：1
> 
> 时间：2012-09-24T10:21:07.433
> 
> 标签：android, file, audio, byte, fft

为了处理音频信号上的 FFT，我首先需要**将音频文件转换为复数数组**。我仍然不明白这部分是否需要在我的 sd 卡上保存 .TXT 文件的 .CSV，或者我是否可以简单地将应用程序中的数据作为变量存储。我只是想了解这部分的真正工作原理，以便在我的 FFT 程序中走得更远：**从我的 .3gpp 音频文件**（顺便说一句，它是用于我正在做的事情的好格式吗？）保存在我的 sd卡，我应该怎么做才能让我的复数数组成为 FFT 的输入？

如果有人有用于将音频文件转换为二进制数据的现有代码示例，我将非常感谢您查看它并了解如何在我的活动中实现它。

# asp.net - RadAjaxManager 不会更新 radgrid

> ID：12563046
> 
> 赞同：2
> 
> 时间：2012-09-24T10:21:13.577
> 
> 标签：asp.net, telerik

我有一个 radgrid，当复选框列表更改时应该更新（在由 AutoPostBack 触发的选定事件上实现）但是当我选中列表中的复选框时，RadAjaxLoading 图片将正常工作以在 RadGrid 所在的位置显示加载图像但是它永远不会消失并重新显示网格。根据我的网络浏览器中的控制台错误，我不断收到以下错误：

**未捕获的类型错误：对象 [object Object] 没有方法“_destroyTree”**

如果有帮助的话，这就是我设置经理的方式：

```
<telerik:RadAjaxManager ID="RadAjaxManagerNotesView" runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="RadGridNotes">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadGridNotes" LoadingPanelID="RadAjaxLoadingPanel" />
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="CheckBoxListCategories">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadGridNotes" 
                    LoadingPanelID="RadAjaxLoadingPanel" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager> 
```

有人可以帮我解决这个错误吗？从当前开始，RadGrid 将永远不会重新显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:44:10.807

发现该错误与 .NET 4.0 不兼容，旧版本的 telerik(2009) 设法通过在单独的 JavaScript 文件中使用以下补丁并将其包含在我的母版页的页脚中来解决该错误。

[http://www.telerik.com/ClientsFiles/203221_default.zip](http://www.telerik.com/ClientsFiles/203221_default.zip)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T13:12:44.020

这个脚本解决了我的问题：

```
function _destroyTree2(element) {
    if (element.nodeType === 1) {
        var childNodes = element.childNodes;
        for (var i = childNodes.length - 1; i >= 0; i--) {
            var node = childNodes[i];
            if (node.nodeType === 1) {
                if (node.dispose && typeof (node.dispose) === "function") {
                    node.dispose();
                }
                else if (node.control && typeof (node.control.dispose) === "function") {
                    node.control.dispose();
                }
                var behaviors = Sys.UI.Behavior.getBehaviors(node);
                for (var j = behaviors.length - 1; j >= 0; j--) {
                    behaviors[j].dispose();
                }
                this._destroyTree(node);
            }
        }
    }
}

Sys.WebForms.PageRequestManager.getInstance()._destroyTree = _destroyTree2 
```

把它放在页面的末尾。

# android - 将 TextViews 与 RelativeLayout 对齐

> ID：12563048
> 
> 赞同：2
> 
> 时间：2012-09-24T10:21:23.500
> 
> 标签：android, textview, center, android-relativelayout

我有这样的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:background="@drawable/bgr">
    <RelativeLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_centerVertical="true"
            >
        <TextView android:layout_width="60dp" android:layout_height="wrap_content"
                  android:id="@+id/label"
                  style="@style/ConnectionPoint.Label"
                  android:text="Title"
                />
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:id="@+id/code"
                  style="@style/ConnectionPoint.Code"
                  android:text="CODE"
                />
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:id="@+id/name"
                  android:layout_toRightOf="@id/label"
                  android:layout_toLeftOf="@id/code"
                  style="@style/ConnectionPoint.Name"
                  android:text="Some text"
                />
    </RelativeLayout>
</RelativeLayout> 
```

和风格：

```
<style name="ConnectionPoint.Text" parent="android:TextAppearance">
    <item name="android:layout_alignParentBottom">true</item>
</style>
<style name="ConnectionPoint.Label" parent="ConnectionPoint.Text">
    <item name="android:textColor">@color/from_to</item>
    <item name="android:layout_marginLeft">5dp</item>
    <item name="android:layout_marginRight">10dp</item>
    <item name="android:textSize">16dp</item>
</style>
<style name="ConnectionPoint.Name" parent="ConnectionPoint.Text">
    <item name="android:textSize">26dp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:singleLine">true</item>
    <item name="android:ellipsize">end</item>
</style>
<style name="ConnectionPoint.Code" parent="ConnectionPoint.Text">
    <item name="android:textColor">@color/iata</item>
    <item name="android:textSize">18dp</item>
    <item name="android:singleLine">true</item>
    <item name="android:layout_alignParentRight">true</item>
    <item name="android:layout_marginRight">5dp</item>
    <item name="android:layout_marginLeft">5dp</item>
</style> 
```

但结果 TextViews 没有正确对齐：

![在此处输入图像描述](../Images/475d2c8dc6d66e602d708e298fcadf37.png)

我希望它们按底部对齐，并且无法理解为什么 RelativeLayout 不能这样做。我应该怎么做才能使RelativeLayout对齐TextViews？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T10:33:05.707

选择 textview 和 goto 属性

`select Center Vertical for each textview`

或者

`put android:layout_centerVertical="true" in xml`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T10:37:07.357

试试这个代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true" >

    <TextView
        android:id="@+id/label"
        style="@style/ConnectionPoint.Label"
        android:layout_width="60dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Title" />

    <TextView
        android:id="@+id/code"
        style="@style/ConnectionPoint.Code"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="CODE" />

    <TextView
        android:id="@+id/name"
        style="@style/ConnectionPoint.Name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Some text" />
  </RelativeLayout>

  </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:36:27.833

不幸的是，唯一可行的解​​决方案是不使用 LinearLayout 而不是嵌套的 RelativeLayout

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T18:03:43.323

我知道这个问题已经有 2 年历史了，但我想如果其他人遇到这个问题，我会得到更好的答案。它解决了我试图在嵌套的相对布局中底部对齐文本视图的问题。

假设OP的代码：

```
<RelativeLayout 
        android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_centerVertical="true">
<TextView 
        android:layout_width="60dp" android:layout_height="wrap_content"
        android:id="@+id/label"
        style="@style/ConnectionPoint.Label"
        android:text="Title"/>
<TextView 
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:id="@+id/code"
        style="@style/ConnectionPoint.Code"
        android:text="CODE"/>
<TextView 
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:id="@+id/name"
        android:layout_toRightOf="@id/label"
        android:layout_toLeftOf="@id/code"
        style="@style/ConnectionPoint.Name"
        android:text="Some text"/> 
```

以下应该可以按底部对齐这些元素：

```
<RelativeLayout
          android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_centerVertical="true">
        <TextView
                android:layout_width="60dp" android:layout_height="wrap_content"
                android:id="@+id/label"
                android:text="Title"/>
        <TextView
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:id="@+id/code"
                android:layout_alignBottom="@+id/label"
                android:text="CODE"/>
        <TextView
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:id="@+id/name"
                android:layout_toRightOf="@id/label"
                android:layout_toLeftOf="@id/code"
                android:layout_alignBottom="@+id/label"
                android:text="Some text"/>
    </RelativeLayout> 
```

这里唯一的变化是添加了以下行：

```
android:layout_alignBottom="@+id/{your-id-here}" 
```

您可能需要根据您的布局对其进行一些调整 - 在上面的示例中，带有 id=label 的 TextView 本质上是根，而其他元素则从中获取底部。这就是 id=label 没有 layout_alignBottom 属性的原因。

# android - 当您在 android listview 中滑动任何列表项时想要调用

> ID：12563058
> 
> 赞同：1
> 
> 时间：2012-09-24T10:21:56.347
> 
> 标签：android, android-listview, android-contacts, swipe-gesture

![在此处输入图像描述](../Images/b0bb15d2472362bfac4f56519b5df125.png)

嗨，您想实现使用滑动功能从列表视图中调用任何联系人的功能，如下图所示。

我怎样才能在android中实现这一点？

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:29:35.587

我想你想在 Listview 上滑动抽屉下面的链接解释了如何实现这个：

教程链接：[http ://w2davids.wordpress.com/android-damn-that-sliding-drawer/](http://w2davids.wordpress.com/android-damn-that-sliding-drawer/)

堆栈溢出帖子：[Android - ListView 像三星联系人一样向左/向右滑动 ListView](https://stackoverflow.com/questions/9321016/android-listview-slide-left-right-like-samsung-contact-listview)

[动画 Android ListView 像通知列表一样上下滑动](https://stackoverflow.com/questions/12129822/animate-android-listview-to-slide-up-and-down-like-the-notification-list)

另一个教程下面的另一个链接： [http ://android-coding-tuts.blogspot.in/2012/02/custom-listview-with-sliding-view-for.html](http://android-coding-tuts.blogspot.in/2012/02/custom-listview-with-sliding-view-for.html)

# java - 这个preparedStatement我做错了什么？

> ID：12563063
> 
> 赞同：3
> 
> 时间：2012-09-24T10:22:35.283
> 
> 标签：java, sql, oracle, prepared-statement

```
private Connection conn = DriverManager.getConnection(URL, info);
try {
String sql = "INSERT INTO \"STUD1582251\".\"ACCOUNTS\" VALUES USERNAME=?, PASSWORD=?, PORTFOLIONAME=?";
    PreparedStatement stm = conn.prepareStatement(sql);
    stm.setString(1, user.getUsername());
    stm.setString(2, user.getPassword());
    stm.setString(3, user.getPortfolioName());
    System.out.println(sql);
    stm.executeUpdate();
} catch (SQLException e) {
    e.printStackTrace();
} 
```

例外

> SELECT username FROM "STUD1582251"."ACCOUNTS" WHERE username=? 插入“STUD1582251”。“帐户”值 USERNAME=?, PASSWORD=?, PORTFOLIONAME=? java.sql.SQLSyntaxErrorException: ORA-00933: SQL 命令未正确结束

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T10:24:32.347

INSERT SQL 语句必须是：

```
 String sql = "INSERT INTO \"STUD1582251\".\"ACCOUNTS\" (USERNAME,PASSWORD,PORTFOLIONAME) VALUES (?,?,?)"; 
```

PS：如果标识符是*保留*字，请在*标识符*周围使用“（双引号） 。

# mysql - 如何从匹配两个相似列的表中选择不同的 ID？

> ID：12563065
> 
> 赞同：3
> 
> 时间：2012-09-24T10:22:42.707
> 
> 标签：mysql, sql

我有这个数据表：

```
+-----+-----------+------------------------------------+---------+
| ID  | post_type | name                               | term_id |
+-----+-----------+------------------------------------+---------+
| 278 | supplier  | Heating                            |      15 |
| 282 | supplier  | Central Heating                    |      16 |
| 278 | supplier  | Biomass                            |      17 |
| 278 | supplier  | Ground Source Heat Pumps           |      18 |
| 278 | supplier  | Passive Solar                      |      19 |
| 282 | supplier  | Air Source Heat Pumps              |      21 |
| 278 | supplier  | Air Conditioning                   |      22 |
| 278 | supplier  | Boilers                            |      23 |
| 277 | supplier  | Lighting                           |      25 |
| 277 | supplier  | LED's                              |      26 |
| 282 | supplier  | Halogen                            |      28 |
| 277 | supplier  | CFL                                |      29 |
| 282 | supplier  | Sustainable Construction Materials |      31 |
| 282 | supplier  | Plaster                            |      33 |
| 282 | supplier  | Floors                             |      37 |
| 282 | supplier  | Water                              |      38 |
| 282 | supplier  | Showers &amp; Baths                |      43 |
| 278 | supplier  | Cooling                            |      44 |
| 278 | supplier  | Refrigeration                      |      46 |
| 282 | supplier  | Passive Design                     |      47 |
| 278 | supplier  | Chillers                           |      48 |
| 282 | supplier  | Renewable Energy                   |      49 |
| 282 | supplier  | Air Source Heat Pumps              |      53 |
| 282 | supplier  | Biomass Heating                    |      55 |
| 282 | supplier  | Biofuels                           |      57 |
| 282 | supplier  | Insulation                         |      61 |
| 282 | supplier  | Wall                               |      63 |
| 282 | supplier  | Floor                              |      64 |
| 282 | supplier  | Draught Proofing                   |      65 |
| 282 | supplier  | Energy Efficiency                  |      70 |
| 282 | supplier  | Gas Boiler Management Systems      |      71 |
| 282 | supplier  | Low Energy Lighting                |      72 |
| 282 | supplier  | Voltage Control                    |      73 |
| 282 | supplier  | Smart Meters                       |      74 |
| 282 | supplier  | Electric Heating                   |      75 |
+-----+-----------+------------------------------------+---------+ 
```

并且需要提取`ID`适用于指定`name`（通配符字符串）和`term_id`（整数）的 s 列表。因此，例如，我将搜索`ID`具有 a`name LIKE '%Lighting%'`和 a `term_id = 26`...应该返回的 s `ID 277`。

以下查询有效但不漂亮：

```
SELECT a.ID, d.name, d.term_id
FROM cn_posts AS a
INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Lighting%'
AND a.ID IN (
    SELECT a.ID
    FROM cn_posts AS a
    INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
    INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
    INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
    WHERE d.term_id = '26'
)
GROUP BY a.ID 
```

我尝试了以下查询，但它们都没有返回任何结果：

```
SELECT DISTINCT a.ID, d.name, d.term_id
FROM cn_posts AS a
LEFT JOIN cn_postmeta AS b ON a.ID = b.post_id
LEFT JOIN cn_term_relationships AS c ON a.ID = c.object_id
LEFT JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Lighting%'
AND d.term_id = '26'

SELECT a.ID, d.name, d.term_id, a.post_status
FROM cn_posts AS a
JOIN cn_postmeta AS b ON a.ID = b.post_id
JOIN cn_term_relationships AS c ON a.ID = c.object_id 
JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Lighting%'
AND d.term_id = '26'
GROUP BY a.ID 
```

这些都返回帖子：

```
SELECT a.ID, d.name, d.term_id, a.post_status
FROM cn_posts AS a
JOIN cn_postmeta AS b ON a.ID = b.post_id
JOIN cn_term_relationships AS c ON a.ID = c.object_id 
JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Lighting%'

SELECT a.ID, d.name, d.term_id, a.post_status
FROM cn_posts AS a
JOIN cn_postmeta AS b ON a.ID = b.post_id
JOIN cn_term_relationships AS c ON a.ID = c.object_id 
JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.term_id = '26' 
```

但是，当您在查询中同时包含 name 和 term_id 时，它什么也不返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:14:25.217

显然，表（您的数据样本）中没有任何一行符合`d.name LIKE '%Lighting%' AND d.term_id = '26'`. 有匹配第一部分的行和匹配第二部分的行，但没有一个匹配两者。但是，如果将其作为一*组*行，则`ID = 277`确实匹配条件。因此，您需要在 HAVING 子句中引入分组并应用条件，尽管稍作修改，如下所示：

```
SELECT a.ID
FROM cn_posts AS a
INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
GROUP BY a.ID
HAVING COUNT(d.name LIKE '%Lighting%' OR NULL) > 0
   AND COUNT(d.term_id = '26'         OR NULL) > 0
; 
```

但是请注意，这意味着您无法在同一查询中获取与 ID 类似`d.name`或旁边的详细信息（但在这种情况下，可以`d.term`从中提取其他列）。`a`如果`d`在同一查询中返回列对于解决您的问题是强制性的，那么您可能需要在几乎相同的查询中将上述内容用作派生表，以提取您需要的*所有数据。*在这种情况下，派生表将用作过滤 ID 集以仅匹配两个条件的 ID 集的一种方式。在该主查询中，这两个条件需要与`OR`而不是与连接`AND`，如下所示：

```
SELECT a.ID, d.name, d.term_id
FROM cn_posts AS a
INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND (d.name LIKE '%Lighting%' OR d.term_id = '26')
AND a.ID IN (
    /* the above query, now used just as a filter */
    SELECT a.ID
    FROM cn_posts AS a
    INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
    INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
    INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
    WHERE a.post_status = 'publish'
    GROUP BY a.ID
    HAVING COUNT(d.name LIKE '%Lighting%' OR NULL) > 0
       AND COUNT(d.term_id = '26'         OR NULL) > 0
)
; 
```

显然，这几乎不会比您最终得到的查询更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:31:00.800

```
SELECT a.ID, d.name, d.term_id 
FROM cn_posts AS a 
INNER JOIN cn_postmeta AS b ON a.ID = b.post_id 
INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id 
INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id 
INNER JOIN cn_terms AS d2 ON c.term_taxonomy_id = d2.term_id 
WHERE a.post_status = 'publish' 
AND d.name LIKE '%Lighting%' 
AND d2.term_id = '26' 
```

Since your conditions are on different rows, you have to join to the cn_terms twice.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:24:34.960

经过大家的帮助（非常感谢！！）我最终只使用了这个查询，它不是最干净的，但唯一一个得到了我所追求的结果，我需要让工作开始。

还匹配帖子标题和描述上的关键字以及服务名称。

```
SELECT a.ID, a.post_title, a.post_status, d.name, d.term_id
FROM cn_posts AS a
JOIN cn_postmeta AS b ON a.ID = b.post_id
JOIN cn_term_relationships AS c ON a.ID = c.object_id
JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND ( a.post_title LIKE '%Lighting%' OR a.post_content LIKE '%Lighting%' OR d.name LIKE '%Lighting%' )
AND a.ID IN (
    SELECT a.ID FROM cn_posts AS a
    INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
    INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id
    INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
    WHERE d.term_id = '26' )
GROUP BY a.ID 
```

非常感谢你们的帮助。显然，如果您能弄清楚为什么其他查询不起作用或者可以清理这个查询，请随时回复。

戴夫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:26:10.920

你试过这个吗？

```
SELECT a.ID, d.name, d.term_id
FROM cn_posts AS a
INNER JOIN cn_postmeta AS b ON a.ID = b.post_id
INNER JOIN cn_term_relationships AS c ON a.ID = c.object_id 
INNER JOIN cn_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Lighting%'
AND d.term_id = '28'
GROUP BY a.ID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T13:27:53.200

不能这个简单的选择不会满足你的需要。

```
select ID, name, term_id from yourtable where name LIKE '%Lighting%' and a term_id = 26 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T11:29:33.257

```
SELECT a.ID, d.name, d.term_id, a.post_status
FROM wp_posts AS a
JOIN wp_postmeta AS b ON a.ID = b.post_id
JOIN wp_term_relationships AS c ON a.ID = c.object_id 
JOIN wp_terms AS d ON c.term_taxonomy_id = d.term_id
WHERE a.post_status = 'publish'
AND d.name LIKE '%Halogen%'
AND d.term_id = '25'
GROUP BY a.ID 
```

# silverlight - Silverlight 按钮事件未触发

> ID：12563067
> 
> 赞同：1
> 
> 时间：2012-09-24T10:22:50.160
> 
> 标签：silverlight

我知道以前有人问过这类问题，但我尝试了这些建议无济于事，所以希望一些新鲜的眼睛可以帮助我解决这个问题。

我有一个自定义控件，它基本上是一个带有网格的边框，其中包含 2 个文本框和一个按钮。

该控件还有一个在代码隐藏中添加的八边形。

按钮的单击事件不会触发。我收集它可能与它上面的控件获取点击事件而不是按钮有关，但我不知道如何解决它。或者可能是因为八边形是后来在后面的代码中绘制的。

我尝试了很多不同的东西，移动按钮，添加另一个网格，将背景设置为透明。这让我发疯了。

下面是代码。

XAML

```
<UserControl x:Class="HSCGym.UserControls.CustomErrorControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"            
mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="1000">
    <Border x:Name="ErrorBorder" BorderBrush="Black" BorderThickness="2" CornerRadius="20" Background="White"
            Width="900" Height="700"
            VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
            Grid.Row="0" Grid.RowSpan="2">
        <Border.Effect>
            <DropShadowEffect BlurRadius="7" Direction="300" ShadowDepth="6" Color="Black" />
        </Border.Effect>

        <Grid x:Name="LayoutRoot" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" >
            <Grid.RowDefinitions>
            <RowDefinition Height="55" />
            <RowDefinition Height="55" />
            <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock Text="{Binding ErrorText}" HorizontalAlignment="Center" FontSize="40" Grid.Row="0"/>
            <TextBlock Text="{Binding ErrorText2}" HorizontalAlignment="Center" FontSize="40" Grid.Row="1"/>

        <Button x:Name="btnExit" VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="38,0,0,20"
                    Content="Exit" Height="50" Width="200"  FontSize="20" Click="btnExit_Click"
                Grid.Row="2"/>
        </Grid>
    </Border>
</UserControl> 
```

以及背后的代码：

```
public partial class CustomErrorControl
{
    public string ErrorText { get; set; }

    public string ErrorText2 { get; set; }

    public string StopText { get; set; }

    private readonly int x;
    private readonly int y;
    private readonly int r;

    public CustomErrorControl(int x, int y, int radius, string stopError)
    {
        InitializeComponent();

        this.x = x;
        this.y = y;
        r = radius;

        StopText = stopError;

        DrawOctagon(this.x, this.y, r);

    }
    public void DrawOctagon(int x, int y, int R)
    {
        int r2 = (int)(R/Math.Sqrt(2));

        // OuterOctagon
        Point[] outerOctagon = new Point[8];
        outerOctagon[0].X = x;
        outerOctagon[0].Y = y - R;

        outerOctagon[1].X = x + r2;
        outerOctagon[1].Y = y - r2;

        outerOctagon[2].X = x + R;
        outerOctagon[2].Y = y;

        outerOctagon[3].X = x + r2;
        outerOctagon[3].Y = y + r2;

        outerOctagon[4].X = x;
        outerOctagon[4].Y = y + R;

        outerOctagon[5].X = x - r2;
        outerOctagon[5].Y = y + r2;

        outerOctagon[6].X = x - R;
        outerOctagon[6].Y = y;

        outerOctagon[7].X = x - r2;
        outerOctagon[7].Y = y - r2;

        HexColor stop1Colour = new HexColor("#FFA30D0D");
        HexColor stop2Colour = new HexColor("#FFCA0C0C");
        HexColor stop3Colour = new HexColor("#FFF71212");

        GradientStop gs1 = new GradientStop { Color = stop1Colour, Offset = 0.98 };
        GradientStop gs2 = new GradientStop { Color = stop2Colour, Offset = 0.5 };
        GradientStop gs3 = new GradientStop { Color = stop3Colour, Offset = 0.04 };

        LinearGradientBrush gb = new LinearGradientBrush
                                     {
                                         StartPoint = new Point(0.77, 0.85),
                                         EndPoint = new Point(0.13, 0.15),
                                         GradientStops = new GradientStopCollection {gs1, gs2, gs3}
                                     };

        DropShadowEffect dse = new DropShadowEffect
                                   {
                                       BlurRadius = 8,
                                       Color = Colors.Black,
                                       Direction = 320,
                                       ShadowDepth = 10.0,
                                       Opacity = 0.5
                                   };

        Polygon octagonOuter = new Polygon
        {

            VerticalAlignment = VerticalAlignment.Center,
            HorizontalAlignment = HorizontalAlignment.Center,
            Fill = gb,

            Stroke = new SolidColorBrush(Colors.Black),
            StrokeThickness = 5,
            StrokeDashArray = new DoubleCollection { 10, 0 },
            Effect = dse,
            Points = new PointCollection
                        {
                            new Point(outerOctagon[0].X, outerOctagon[0].Y),
                            new Point(outerOctagon[1].X, outerOctagon[1].Y),
                            new Point(outerOctagon[2].X, outerOctagon[2].Y),
                            new Point(outerOctagon[3].X, outerOctagon[3].Y),
                            new Point(outerOctagon[4].X, outerOctagon[4].Y),
                            new Point(outerOctagon[5].X, outerOctagon[5].Y),
                            new Point(outerOctagon[6].X, outerOctagon[6].Y),
                            new Point(outerOctagon[7].X, outerOctagon[7].Y),
                        }
        };

        double outerOctCenterY = octagonOuter.Points[6].Y - octagonOuter.Points[2].Y;
        double outerOctCenterX = octagonOuter.Points[4].X - octagonOuter.Points[0].X;

        var rotate = new RotateTransform { Angle = 22.8, CenterX = outerOctCenterX, CenterY = outerOctCenterY };
        octagonOuter.RenderTransform = rotate;
        Grid.SetRow(octagonOuter, 2);

        TextBlock tbStopError = new TextBlock
                                    {
                                        Text = StopText,
                                        Foreground = new SolidColorBrush(Colors.White),
                                        FontFamily = new FontFamily("Courier New"),
                                        FontSize = 80,
                                        FontWeight = FontWeights.Bold,
                                        VerticalAlignment = VerticalAlignment.Center,
                                        HorizontalAlignment = HorizontalAlignment.Center
                                    };
        Grid.SetRow(tbStopError, 2);

        LayoutRoot.Children.Add(octagonOuter);
        LayoutRoot.Children.Add(tbStopError);   
    }

    private void btnExit_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Clicked");
    }

} 
```

有任何想法吗？

非常感谢

尼尔

更新：

我已经测试过将 MouseLeftButtonUp 事件快速放在网格和边框上。

当我单击边框时，首先触发网格事件，然后触发边框事件，但是如果我单击按钮，则不会触发。这是否意味着 Button 位于网格和边框上方，因此应该触发事件？

在此期间，我也会尝试其他一些建议。

尼尔

更新 2：

它变得陌生。我将按钮移到顶部，然后单击事件触发。我看到的是，从某个 Y 点及以下，绝对没有 mouseleftbuttonup 或 click 事件触发，nada。这是没有意义的。如果我从底部开始并单击缓慢向上移动，那么在某个点，所有事件都开始触发。

尼尔

更新 3

大家好，

在逐一删除控件以查看导致问题的原因后，我现在知道它是边界控件。如果我删除它，一切正常，当它回来时，和以前一样的问题。有任何想法吗？

谢谢

尼尔

更新 4

大家好，

好的，所以我终于解决了问题，以防万一有人发现自己处于类似情况。它与那个页面完全没有关系。我正在从不同页面的框架中加载页面，看起来我必须在主页的网格中设置许多行定义。在我更正之后，一切正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:18:45.030

首先尝试用透明颜色（00000000）填充按钮。

您也可以将解决方案或其中的一部分发送给我，我会尽力提供帮助。

# algorithm - 是双向链表还是 BST

> ID：12563074
> 
> 赞同：0
> 
> 时间：2012-09-24T10:23:28.513
> 
> 标签：algorithm, binary-search-tree, doubly-linked-list

给定一个具有以下结构的节点

```
class Node {
int data,
Node* P1,
Node* p2;
} 
```

我们需要确定该节点是表示循环双向链接列表还是二叉树。在我看来，我们需要开始在一个方向上遍历给定的节点

```
node = givenNode;
while(node->P1 != null && node->P1 != givenNode)
{
  node = node->p1
}

if(node == givenNode) // It means Circular DLL
else if(node == null)  // It means Tree 
```

检测到这一点需要 O(n) 时间。

请建议是否有比这更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:42:13.093

我建议你可以用这段代码检查它是否是双向链表：

```
node = givenNode;
if(givenNode->P1 == null || givenNode->P2 == null)
 // It can not be double link list (circular)
else if(givenNode->p1->p2 == givenNode || givenNode->p2->p1 == givenNode)
{
//It is a double linked list
}
else
{
It is not a double linked list
} 
```

我们有 O(1) 复杂度

# c++ - 用vbscript部署c++程序？

> ID：12563077
> 
> 赞同：1
> 
> 时间：2012-09-24T10:23:33.380
> 
> 标签：c++, c, dll, deployment, vbscript

我创建了一个 Windows 应用程序和一个包含发布可执行文件和适当 Dll 的文件夹。

第一个问题是我想将它全部打包到一个 setup.exe 对于这个任务，我计划使用 Windows 默认的 iexpress 应用程序......（是否有更好的软件可用于此......但必须是免费的，因为这只是大学作业）

第二个问题是我想构建安装结构，以便将实际程序以及包含的库保存在它们的磁盘驱动器中，即 w7 的程序文件（x86）。同时制作桌面快捷方式，以便用户更轻松地运行和访问。

我的第二个问题出现的问题是：

*   我是否错误地假设用户将拥有一个“程序文件”文件夹？

*   我正在考虑制作一个 vbscript 来处理创建快捷方式，但是 vb.exe 是否也需要包含库文件？

作业将在 2 天内到期，所以如果我能把它从我的胸膛中解脱出来，我将不胜感激

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:08:44.310

您可能对以下 SW 感兴趣：

*   [高级安装程序](http://www.advancedinstaller.com/)

*   [国家安全情报局](http://nsis.sourceforge.net/Download)

*   [威克斯](http://wix.sourceforge.net/)

我会推荐第一个选项，它是免费的，你不需要购买专业许可证，你可以在 5 分钟内制作 MSI 包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:03:56.573

不，`Program Files`文件夹对于有效的 Windows 安装是公用的。但是你不能假设它总是`C:\Program Files`. 您必须使用相应的[环境字符串](http://ss64.com/nt/syntax-variables.html)来获取程序文件文件夹：

*   `%ProgramFiles%`- 在 32 位操作系统上存储 32 位程序，在 64 位操作系统上存储 64 位程序。
*   `%ProgramFiles(x86)%`- 在 64 位操作系统上存储 32 位程序。

VBScript 与 Visual Basic (VB.exe) 本身无关。它由[Windows Script Host](http://msdn.microsoft.com/en-us/library/9bbdkx3k%28v=vs.84%29.aspx)运行，不需要任何额外的库。Windows Scripting Host 默认包含在任何现代 Windows 操作系统中。

您只需创建带有扩展名的脚本源文件`.vbs`并将其作为任何通常的可执行文件运行。可以在[此处](http://visualbasic.about.com/od/quicktips/qt/createshortcut.htm)找到创建快捷方式的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:11:13.600

您有一个环境变量 ProgramFiles，其中包含此文件夹的路径。

不包括您用于构建 exe 和 dll 文件的安装程序/打包程序的软件？

否则我会搜索一个免费的打包​​程序，它应该是最简单的方法，制作快捷方式也可以通过这个包完成。另一方面，如果您想使用 vbscript，您也可以从那里完成所有操作，但您的脚本必须由具有管理权限的用户执行，而不是日常用户...

免费包装：一些谷歌搜索给了我`http://www.windowsnetworking.com/articles_tutorials/msi-packaging-tools.html`，检查一下

# php - 是否可以在 Magento 中更新订单商品数量？

> ID：12563078
> 
> 赞同：2
> 
> 时间：2012-09-24T10:23:42.373
> 
> 标签：php, magento, magento-1.7

我曾尝试更改 magento 订单商品数量，但它不起作用。是否可以使用 Magento 自己的 API 更改订单项目数量，或者我是否需要使用一些自己的 SQL 来更改订单项目数量？

```
$order = Mage::getModel('sales/order')->loadByIncrementId($orderId);
foreach($order->getAllItems() as $item)
{
    $item->setToCancel(5);
    $item->setToRefund(5);
    $item->setToInvoice(5);
    $item->setQtyToShip(5);
    $item->setQty(5);
    $item->save();  
}

// Why qtys are still same and not 5 as set before???
foreach($order->getAllItems() as $item)
{
    echo "Id : " . $item->getId() . "\r\n" .
        "QtyToCancel : " . $item->getQtyToCancel() . "\r\n".
        "QtyToRefund : " . $item->getQtyToRefund() . "\r\n".
        "QtyToInvoice : " . $item->getQtyToInvoice() . "\r\n".
        "QtyToShip : " . $item->getQtyToShip() . "\r\n".
        "Qty : " . $item->getQty() . "\r\n";                
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:25:46.190

in magento the process is meant to be as follows:

*   make order
*   in order to change, disable order
*   create new order

# python - sql请求出错

> ID：12563079
> 
> 赞同：-6
> 
> 时间：2012-09-24T10:23:42.147
> 
> 标签：python, sql, database, python-2.7, kinterbasdb

我写了这个程序：

```
con=kinterbasdb.create_database("create database 'D:/ThirdTask/test.db' user 'sysdba' password 'masterkey'")
conn=kinterbasdb.connect(host='localhost',database='D:/ThirdTask/test.db', user='sysdba', password='masterkey')
cur=con.cursor()
s="""
 create table CLIENTS
  (        
     ID   FMTBCD PRIMARY KEY,
     COMPANY   CHAR(50),
     LAST NAME   CHAR(50),
     FIRST NAME   CHAR(50),
     E-MAIL ADDRESS   CHAR(50),
     JOB TITLE   CHAR(50),
     BUSINESS PHONE   CHAR(25),
     HOME PHONE   CHAR(25),
     MOBILE PHONE   CHAR(25),
     FAX NUMBER   CHAR(25),
     ADDRESS   MEMO,
     CITY   CHAR(50),
     STATE/PROVINCE   CHAR(50),
     ZIP/POSTAL CODE   CHAR(15),
     COUNTRY/REGION   CHAR(50),
     WEB-SITE   CHAR(25),
     NOTES   MEMO,
     INCLUDING   BLOB
     )"""
     print s
     cur.execute(s)
     con.close()
     conn.close() 
```

编译器给出以下错误：

```
 create table CLIENTS
 (
    ID   FMTBCD PRIMARY KEY,
    COMPANY   CHAR(50),
    LAST NAME   CHAR(50),
    FIRST NAME   CHAR(50),
    E-MAIL ADDRESS   CHAR(50),
    JOB TITLE   CHAR(50),
    BUSINESS PHONE   CHAR(25),
    HOME PHONE   CHAR(25),
    MOBILE PHONE   CHAR(25),
    FAX NUMBER   CHAR(25),
    ADDRESS   MEMO,
    CITY   CHAR(50),
    STATE/PROVINCE   CHAR(50),
    ZIP/POSTAL CODE   CHAR(15),
    COUNTRY/REGION   CHAR(50),
    WEB-SITE   CHAR(25),
    NOTES   MEMO,
    INCLUDING   BLOB
    )

Traceback (most recent call last):
File "D:\ThirdTask\connect.py", line 119, in <module>
      cur.execute(s)
ProgrammingError: (-104, 'isc_dsql_prepare: \n  Dynamic SQL Error\n  SQL error code = -104\n  Token unknown - line 6, column 16\n  CHAR') 
```

错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:34:14.817

您正在使用空格以及`-`破折号和`\`斜杠定义列名。将这些名称放在双引号中：

```
s="""
 create table CLIENTS
  (        
     ID   FMTBCD PRIMARY KEY,
     COMPANY   CHAR(50),
     "LAST NAME"   CHAR(50),
     "FIRST NAME"   CHAR(50),
     "E-MAIL ADDRESS"   CHAR(50),
     "JOB TITLE"   CHAR(50),
     "BUSINESS PHONE"   CHAR(25),
     "HOME PHONE"   CHAR(25),
     "MOBILE PHONE"   CHAR(25),
     "FAX NUMBER"   CHAR(25),
     ADDRESS   MEMO,
     CITY   CHAR(50),
     "STATE/PROVINCE"   CHAR(50),
     "ZIP/POSTAL CODE"   CHAR(15),
     "COUNTRY/REGION"   CHAR(50),
     "WEB-SITE"   CHAR(25),
     NOTES   MEMO,
     INCLUDING   BLOB
     )""" 
```

Firebird 非常严格地遵守 ANSI SQL 标准，请参阅[Interbase/Firebird 标识符](http://wiki.ispirer.com/sqlways/interbase-firebird/identifiers)以了解有关可以使用和不使用引号定义哪些标识符的详细规则。

# android - 如何显示消息一段时间然后在android中将其关闭

> ID：12563082
> 
> 赞同：1
> 
> 时间：2012-09-24T10:23:46.247
> 
> 标签：android, message

所以我有主 UI 线程，并且有一个需要相当长的时间的函数。所以我想在那段时间在屏幕上向用户展示一些东西，但我不想将我的函数移动到线程中，因为它需要一些 GUI 通信。

所以我需要的是这个

```
 Message msg;
 msg.wait("wait dude");
 //my code
 msg.dismis_wait(); 
```

有任何想法吗？

我尝试将我的代码放入线程中，但有一个问题是在代码结束时我需要更改我的视图，而我无法从线程中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:26:07.463

`Message` is not the one you want to use.

You should try with [`Toast Notifications`](http://developer.android.com/guide/topics/ui/notifiers/toasts.html).

Below an example from the documentation:

```
Context context = getApplicationContext();
CharSequence text = "Hello toast!";
int duration = Toast.LENGTH_SHORT;

Toast toast = Toast.makeText(context, text, duration);
toast.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:39:57.297

您可以`Toast`像建议的其他答案一样使用。

`Thread`如果您有长时间运行的代码，您也可以使用单独的，并使用[Handler](http://developer.android.com/reference/android/os/Handler.html)向主线程发送消息以在屏幕上进行更改。

您也可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，这是一个 Android 特殊线程，可让您在运行期间对视图进行更改，这是在`doInBackground`方法中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:26:47.110

If you want a toast message you could do something like this:

```
for (int i=0; i < 2; i++) { 
    Toast.makeText(yourclass.this, " Here you message ", Toast.LENGTH_LONG).show();
} 
```

For toast you can only choose to display it long or short but cant define a time. Im displaying here the same toast message twice and with that doubling the time i would like to show it.

Put your entire code inside a scheduleTaskExecutor. That one runs code in the background line by line. so you can show your toast message in the beginning. Here an example:

First declare

```
private ScheduledExecutorService scheduleTaskExecutor;

    scheduleTaskExecutor= Executors.newScheduledThreadPool(5);

    // This schedule a task to run every 10 seconds:

    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
      public void run() {

            for (int i=0; i < 2; i++){ Toast.makeText(yourclass.this, " Here you message ", Toast.LENGTH_LONG).show();}

            try {                 

            // your code here                       

            } catch (IOException e) {                          
               e.printStackTrace();                           
            }                                     

     // If you need update UI, simply do this:
     //   runOnUiThread(new Runnable() {
      //    public void run() {
            // update your UI component here.
        //    myTextView.setText("refreshed");
         // }
      //  });
      }
    }, 0, 10, TimeUnit.SECONDS); 
```

you can stop the thread with:

```
 scheduleTaskExecutor.shutdownNow(); 
```

You can also start it with a delay or run it only once or in other ways. Check the documentation on: [https://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html](https://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:52:40.220

@gabrjan：`Ofir A`为您的查询提出了正确的解决方案。永远不要在主线程中运行 long/cpu 密集型操作。使用 AsyncTask/Thread 执行您的后端操作并使用处理程序实例发布 ui 更新。你也可以使用 runOnUiThread 来更新你的 UI。

```
 runOnUiThread(new Runnable() {
                public void run() {

                      HERE U CAN WRITE UR UI UPDATION CODE.
                }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T10:49:18.180

尝试使用倒数计时器。这是课程：-

```
public class MyCount extends CountDownTimer{
    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
        }

    @Override
    public void onFinish() {
 // Dismiss message
     }

    @Override
    public void onTick(long millisUntilFinished) {

    }
} 
```

并在 onCreate 或您要显示消息的地方使用它。

```
MyCount counter = new MyCount(15000,1000);
    counter.start();
// Show message 
```

启动 Timer 后显示您的消息 onFinish 的 CountDownTimer 关闭消息。您可以在对象创建时更改这些值。第一个值即“15000”是以毫秒为单位的总时间，第二个值即“1000”是以毫秒为单位的每次滴答时间。

希望这会对你有所帮助。

# php - 通过jquery在循环中显示隐藏元素表元素

> ID：12563083
> 
> 赞同：0
> 
> 时间：2012-09-24T10:23:51.953
> 
> 标签：php, jquery, html, hide, show

我是 Jquery 编码的学习者，我的任务是在单击**SPAN元素时显示/隐藏****TABLE**元素。我尝试使用下面提到的 Jquery 代码，但它不起作用..

 ****HTML代码是：**

```
foreach($array as $key => $arrValue) {
  <span id="link<?=$count?>">$key</span>
    <table id="tbl<?=$count?>">

      foreach($arrValueas $key => $value) {
           <tr><td>$value</td></tr>
      }
   </table>
} 
```

**我的 Jquery 代码是：**

```
$(function(){
   // To open/close field's group div
   $("span").each(function (i){
      i++;
      $('#link' + i).click(function (i) {
          $('#tbl' + i).toggle(800);
      });
   });
}); 
```

**请避免在 HTML 代码中出现 PHP 打开关闭标签问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:27:38.863

```
$("span").each(function (){ 
    $(this).click(function () { 
        $(this).next('table').toggle(800); 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:27:27.803

try this

```
$(function(){
   $("span").each(function (i){

      (function(i) {

          $('#link' + i).click(function() {
              $('#tbl' + i).toggle(800);
          });

      }(i));

   });
}); 
```

you don't need to increment the variable with `i++` oyherwise you won't set the handler on the expected `link` element. `Each()` is already incrementing the variable `i`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:29:09.830

尝试这种方式来匹配两个不同的元素组：

[**这是jsFiddle。**](http://jsfiddle.net/mjaA3/103/)

```
var thumbs = $('ul.thumbHolder li');
var bigImg = $('ul.imgHolder li');

thumbs.click(function() {
    var target = $(this).index();
    bigImg.each(function(i){
        if( i != target){
            $(this).fadeOut(300);
        }else{
            $(this).fadeIn(300);
        }
    });    
});​ 
```**

# iphone - 如何避免 UITableViewCell 中包含的 UIImageView 被展开？

> ID：12563085
> 
> 赞同：0
> 
> 时间：2012-09-24T10:23:56.403
> 
> 标签：iphone

当每个表格视图单元格具有不同的高度时，如何避免 UITableViewCell 中包含的 UIImageView 被扩展？根据 UILabel 的文本长度，我每行的高度都是可变的。当 UITableViewCell 的高度增加时，图像视图`s image height also increases. How to keep image view`的帧常数？

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
       NSString *text = [self.myArray objectAtIndex:indexPath.row];

        if(text.length!=0)
        {    

        CGSize constraint = CGSizeMake(212, LONG_MAX);

        CGSize size = [text sizeWithFont:[UIFont fontWithName:@"Arial" size:14.0] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

        CGFloat height = size.height;

      return (71.0 + height); //this gives the row height
        }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    MyXYZ *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"MyXYZ" owner:nil options:nil];
        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[MyXYZ class]]) {
                cell = (MyXYZ *)currentObject;
]                break;
            }
        }
    }  

 ((HJManagedImageV *)cell.myImageView).url = [NSURL URLWithString:myImageUrl]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:26:54.910

Create a custom cell in which you can keep the frame of the `UIImageView` constant. This will help it to remain the same throughout the tableView cells even if you vary the height of various cells

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:32:13.270

```
try this

[cell.contentView addSubview:imageview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:32:33.853

将`contentMode`图像视图的属性设置为适当的值，以禁止在图像视图中缩放图像，并且不关心图像视图本身的大小。

# junit - JUnit 可选/必需测试

> ID：12563088
> 
> 赞同：7
> 
> 时间：2012-09-24T10:24:09.273
> 
> 标签：junit, maven-3, testng, junit4, maven-surefire-plugin

我有 Junit 4.8.2 和 maven 3 我的应用程序中的一些测试应该在失败的情况下使构建失败，而其中一些不应该（只报告以下可选测试失败）

我怎么能用junit做到这一点，如果我不能，那么也许testng可以？

例如，我有两个测试用例：

首先不是很重要，可能会因为连接超时、服务不可用等而失败。所以如果它失败了，我不想让整个构建失败，只是让用户知道它并写入控制台

其次是非常重要的一个，如果它失败 - 构建也应该失败

我知道@Ignore - 这不是我想要的，因为我不想跳过任何测试。

我知道@Category，所以如果你知道如何配置surefire插件说：如果com.me.Required类别 - 构建应该在失败的情况下失败，如果类别com.me.Optional - 构建不应该失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:21:36.570

考虑对允许失败的测试使用[故障安全插件，并将](http://maven.apache.org/plugins/maven-failsafe-plugin/)[testFailureIgnore](http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html#testFailureIgnore)标志设置为 true。

要[使用](http://maven.apache.org/plugins/maven-failsafe-plugin/usage.html)故障安全插件，您必须将插件添加到您的 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>foo.bar</groupId>
    <artifactId>test</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.12.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <testFailureIgnore>true</testFailureIgnore>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

默认情况下，surefire 插件将执行名为Test 的[*测试*](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#includes)。默认情况下，故障安全插件将执行名为[*IT*](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)的测试。

鉴于测试

```
import static org.junit.Assert.*;

import org.junit.Test;

public class SurefireTest {

    @Test
    public void test() {
        assertTrue(true);
    }

} 
```

和

```
import static org.junit.Assert.*;

import org.junit.Test;

public class FailsafeIT {

    @Test
    public void test() {
        assertTrue(false);
    }

} 
```

运行`mvn install`现在将导致

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building test 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
.
.
.
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running SurefireTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.062 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
.
.
.
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running FailsafeIT
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.072 sec <<< FA
ILURE!
...
Results :

Failed tests:   test(FailsafeIT)

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0
.
.
.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.174s
[INFO] Finished at: Sat Sep 29 08:19:38 CEST 2012
[INFO] Final Memory: 9M/245M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:55:56.553

1.  您可以使用@Ignore，请参阅[Is there a way to skip only a single test in maven?](https://stackoverflow.com/questions/835705/is-there-a-way-to-skip-only-a-single-test-in-maven)

2.  你可以跳过某个包中的测试[有没有办法告诉surefire跳过某个包中的测试？](https://stackoverflow.com/questions/4389744/is-there-a-way-to-tell-surefire-to-skip-tests-in-a-certain-package)或[http://maven.apache.org/plugins/maven-failsafe-plugin/examples/inclusion-exclusion.html](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/inclusion-exclusion.html)或

3.  您可以使用 JUnit 4.8 类别 JUnit 类别[http://maven.apache.org/plugins/maven-failsafe-plugin/examples/junit.html](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/junit.html)

4.  您可以使用skipITs [http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html#skipITs](http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html#skipITs)

我认为 JUnit 4.8 类别实际上是您要寻找的。

# android - 运行android单元测试以使用ActivityInstrumentationTestCase2测试FragmentActivity时出现java.lang.NoClassDefFoundError

> ID：12563093
> 
> 赞同：0
> 
> 时间：2012-09-24T10:24:31.203
> 
> 标签：android, testing, android-fragmentactivity

我正在尝试使用 ActivityInstrumentationTestCase2 测试从 FragmentActivity（来自 android-support-v4.jar）派生的 Activity。android-support-v4.jar 位于我的主项目（测试项目）的 libs 文件夹中。为了使测试项目通过构建，我使用命令“ln ../mainProject/libs/android-support-v4.jar ./libs/android-support-v4”添加了一个从主项目到测试项目的链接。 jar”在我的测试项目根目录中。由[http://dtmilano.blogspot.com/2009/12/android-testing-external-libraries.html?showComment=1348480869133](http://dtmilano.blogspot.com/2009/12/android-testing-external-libraries.html?showComment=1348480869133)推荐。按照博客中的指南，我可以使用 Eclipse 成功运行测试。但是，当我尝试使用命令“ant clean debug install test”运行测试时，总是会遇到以下异常：

```
[exec] android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests:
[exec] Error in testSuiteConstructionFailed:
[exec] java.lang.RuntimeException: Exception during suite construction
[exec]     at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:239)
[exec]     at java.lang.reflect.Method.invokeNative(Native Method)
[exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
[exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
[exec]     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)
[exec]     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)
[exec] Caused by: java.lang.reflect.InvocationTargetException
[exec]     at com.test.QuestionListActivityTest.<init>(QuestionListActivityTest.java:17)
[exec]     at java.lang.reflect.Constructor.constructNative(Native Method)
[exec]     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
[exec]     at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
[exec]     at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
[exec]     at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:263)
[exec]     at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:185)
[exec]     at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)
[exec]     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4218)
[exec]     at android.app.ActivityThread.access$3000(ActivityThread.java:125)
[exec]     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
[exec]     at android.os.Handler.dispatchMessage(Handler.java:99)
[exec]     at android.os.Looper.loop(Looper.java:123)
[exec]     at android.app.ActivityThread.main(ActivityThread.java:4627)
[exec]     at java.lang.reflect.Method.invokeNative(Native Method)
[exec]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
[exec]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
[exec]     at dalvik.system.NativeStart.main(Native Method)
[exec] Caused by: java.lang.NoClassDefFoundError: com.activity.QuestionListActivity
[exec]     ... 19 more 
```

这是测试代码的快照：

```
 public class QuestionListActivityTest extends ActivityInstrumentationTestCase2<QuestionListActivity>{
    private Solo solo;
    private FragmentActivity activity;

 public QuestionListActivityTest() {  
     super(QuestionListActivity.class); **// the exception happened here**
 }
...
} 
```

我正在使用android sdk R15。测试是用模拟器运行的。有人知道如何解决吗？我真的需要用 ant 运行它，以便与 hudson 集成。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:38:41.707

您是否在[这里](https://stackoverflow.com/questions/9931040/fragmentactivity-causing-classnotfoundexception)检查过相关问题？

它与您的相似。

# android - ImageView 在文本字段大小后动态增加和减少

> ID：12563095
> 
> 赞同：0
> 
> 时间：2012-09-24T10:24:32.707
> 
> 标签：android, android-layout

我有一个这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabBar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#272727"
android:orientation="horizontal" >

<ImageButton
    android:id="@+id/BtnSlide"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@null"
    android:src="@drawable/lin" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="275dp"
    android:layout_height="50dp"
    android:gravity="center"
    android:paddingLeft="20dp"
    android:paddingRight="100dp"
    android:text="HEADER"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="2.2dp"
    android:src="@drawable/logo" /> 
```

`ImageView`放置在屏幕的右侧。但是我面临一个问题，`ImageView`高度和宽度的增加和减少取决于 的长度，`TextView`我怎样才能使它正常工作，而不`ImageView`改变大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:47:10.063

我的建议是将 layout_weight 设置为所有组件，以便无论其内容如何，​​它们的大小都是固定的:) 有关更多详细信息，请参见[此处](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:47:38.487

这里的问题是您`ImageView`的大小与您父母的大小相匹配，即您的`LinearLayout`（带有 id tabBar）。

这`LinearLayout`将内容包装在他的高度上，因此，它总结了他内容的所有“高度”。将`LinearLayout`采用高度`TextView`+ 的高度`ImageButton`。然后，`ImageView`将匹配该高度。

解决方案取决于您要执行的操作，但您可以尝试：

*   在您的`ImageView`
*   使用 RelativeLayout 而不是 a`LinearLayout`并根据彼此对齐所有视图

# c# - WCF Windows 身份验证，未通过

> ID：12563096
> 
> 赞同：2
> 
> 时间：2012-09-24T10:24:37.210
> 
> 标签：c#, wcf

在我的一个应用程序中，我在通过 Windows 帐户连接和验证 WCF 服务时遇到问题。为了测试这一点，我将它移到了一个新的解决方案中，其中包含一个简单的控制台应用程序和 VS2010 中的标准 WCF 启动应用程序。

WCF 代码，用于一个简单的操作：

```
[PrincipalPermission(SecurityAction.Demand, Role = "xxxx\\xxxxxx")]
    public string GetData(int value)
    {
        return string.Format("You entered: {0}", value);
    } 
```

配置文件：

```
 <bindings>
        <basicHttpBinding>
          <binding name="BasicHttpBinding_IService1">
            <security mode="TransportCredentialOnly">
              <transport clientCredentialType="Windows" proxyCredentialType="Windows"/>
              <message clientCredentialType="UserName" algorithmSuite="Default"/>
            </security>
          </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:16674/Service1.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService1" contract="testService.IService1"
            name="BasicHttpBinding_IService1" />
    </client> 
```

以及对此的呼吁：

```
 testService.Service1Client sv = new testService.Service1Client();
 sv.GetData(1); 
```

我收到标准的“委托人许可请求失败”。错误虽然我看不到配置文件有什么问题。我在创建服务对象时查看了它，并且 ClientCredentials.Windows 和用户名对象为空。谁能帮帮我，我在这里是不是很傻？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:55:36.617

您需要使用代码设置凭据，请参阅[本文](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials.aspx)

```
 testService.Service1Client sv = new testService.Service1Client();
 sv.ClientCredentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultCredentials;
 sv.GetData(1); 
```

# javascript - 如何将字段集内容从html传递到html

> ID：12563098
> 
> 赞同：0
> 
> 时间：2012-09-24T10:24:42.923
> 
> 标签：javascript, html, css

这是我在页面 html1 中的代码，

```
 <fieldset id="bill1">
        <div style="font-size:9px" id="serviced"><b>Service :</b></div>
        <div style="font-size:9px" id="tratyped"><b>Type of Transport :</b></div>
        <div style="font-size:9px" id="custyped"><b>Type of Client</b></div>
        <div style="font-size:9px" id="datepickerd"><b>Date :</b></div>
        <div  style="font-size:9px;display:none" id="timed"><b>Time :</b></div>
        <div  style="font-size:9px" id="departured"><b>Departure Address :</b></div>
        <div style="font-size:9px" id="destinationd"><b>Arrival Address</b></div>
      </fieldset> 
```

这些 div 的 innerhtml 值将在运行时更改。

如何在另一个页面 html2 中发送或查看这些信息。

我希望能够从“html1”提供页面“html2”内的字段集内容，该页面包含（包括“html2”）到“php1”页面中。

请帮助我进行编码或只是提供您的建议，我将尝试自己编码。

谢谢！

编辑............

里面 fare.html

```
 <fieldset id="bill2" style="padding-top:0">
        <div style="font-size:9px" id="passengerd"><b>No. of Passengers :</b></div>
        <div style="font-size:9px" id="shairwelld"><b>No. of Chariwells :</b></div>
        <div style="font-size:9px" id="babycd"><b>No. of Baby Chairs :</b></div>
        <div style="font-size:9px" id="companiond"><b>No. of Companions :</b></div>
     </fieldset> 
```

在 pay.html 中

```
 <fieldset id="bill2">
     </fieldset> 
```

我在 head 标签中使用了 jquery 代码作为

```
<script src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#bill2').load('/fare.html #bill2')
})
</script> 
```

上面的代码工作...

它加载字段集的默认内容。但不加载运行时产生的值。有没有什么办法解决这一问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:27:03.853

You can generate a hidden form with javascript and submit it. When you want to use GET, you can also add those parameters to the current url with javascript and load this url.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:34:43.183

我喜欢您的“请帮助我编写代码或提供您的建议，我将尝试自己编写代码。

你可以用表格来做，

创建一个带有一些隐藏文件的表单，同时提交该表单获取`div`内部 html 并使用 javascript 将其作为隐藏值并提交该表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:34:51.103

使用[jQuery](http://jquery.com)，您可以使用`.load()`以下方法：

```
$(document).ready(function(){
    $('#bill2').load('/html1.html #bill2')
}) 
```

您要从中加载字段`#bill2`集的字段集的ID在哪里`html2.html``#bill2``html1.html`

# android - 如何使用位置管理器？

> ID：12563100
> 
> 赞同：2
> 
> 时间：2012-09-24T10:24:47.920
> 
> 标签：android, gps, location

我尝试从 GPS 添加位置，但我总是得到空值。你能帮我看看我做错了什么吗？

我想始终在 onCreate 中接收位置。如果未收到位置，则显示“未收到提供者”而不是位置。问题是我总是收到消息。

```
//Location variables
private TextView gps;
private LocationManager locationManager;
private String locationProvider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_upload_draw);
    initializeData();
}

private void initializeData()
{
    gps = (TextView) findViewById(R.id.GPS);
    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    locationProvider = locationManager.getBestProvider(new Criteria(), true);
    if(locationProvider!=null)
     {
        gps.setText("Upload image location: "+ locationProvider); 
     }
    else
    {
        gps.setText("Upload image location: No provider Found" );
    }

}

@Override
protected void onPause() {  
    super.onPause();
    locationManager.removeUpdates(this);
}

private void showLocation(Location location)
{
    if(location==null)
        gps.append("\nUnknown location");
    else
    {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        gps.append("\n\nLocation lat: " +lat+
                ", long: " + lng+"\n"
                + getAddress(lat, lng));
    }
}

public void onLocationChanged(Location location) {
    showLocation(location);     
}

public void onProviderDisabled(String provider) {
    gps.append("\nProvider Disabled: " +provider);
}

public void onProviderEnabled(String provider) {
    gps.append("\nProvider Enabled: " +provider);       
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    gps.append("\nProvider Status Changed: " + provider+ ",status: "+
                status);
}

public String getAddress(double lat, double lng)
{
    Geocoder geocoder = new Geocoder(this);

    try {
        List<Address> addresses = geocoder.getFromLocation(lat, lng, 1);
        Address obj = addresses.get(0);
        String str  = obj.getCountryName();
        str+="\n" + obj.getCountryCode();
        str+="\n" + obj.getLocality(); //current city
        str+="\n" + obj.getAddressLine(0); 

        return str;         
    }
    catch (IOException e) {
        return "Error: "  +e.getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:43:27.157

1）您需要向提供商请求更新：

```
newLocation = requestUpdatesFromProvider(
            LocationManager.GPS_PROVIDER, "error string"); 
```

2）注册一个监听器：

```
LocationListener listener = new LocationListener() {

@Override
public void onLocationChanged(Location location) {
//Do something

} );} 
```

# asp.net - Output multiple HTML tables to single excel sheet

> ID：12563106
> 
> 赞同：1
> 
> 时间：2012-09-24T10:25:17.367
> 
> 标签：asp.net, html, vb.net, excel

I'm creating two HTML tables in vb.net in a string variable and appending the string text to the innerhtml of an aspx page at runtime. The code to this is as below (This is a sample code):

```
Dim oBuilder as stringbuilder
With oBuilder
 .Append("<html xmlns:x=""urn:schemas-microsoft-com:office:excel"">")
                .Append("<head>")
                .Append("<meta http-equiv=""Content-Type"" content=""text/html;charset=windows-1252"">")
                .Append("<!--[if gte mso 9]>")
                .Append("<xml>")
                .Append("<x:ExcelWorkbook>")
                .Append("<x:ExcelWorksheets>")
                .Append("<x:ExcelWorksheet>")
                .Append("<x:Name>Summary</x:Name>")
                .Append("<div>")
                .Append("<table style="" border:solid 1px black; "">")
                .Append("<tr>")
                .Append("<td>Column 1</td>")
                .Append("</tr>")
                .Append("</table>")
                .Append("</div>")
                .Append("<div>")
                .Append("<table style="" border:solid 1px black; "">")
                .Append("<tr>")
                .Append("<td>Column 1 - Table 2</td>")
                .Append("</tr>")
                .Append("</table>")
                .Append("</div>")
End With
LogDetails.InnerHtml = oBuilder.ToString 
```

The aspx page actually displays the tables fine (one below the other). I tried adding the following lines and use office functionality with XML to name the worksheets. I was able to create and name two worksheets:

```
 .Append("<html xmlns:x=""urn:schemas-microsoft-com:office:excel"">")
        .Append("<head>")
        .Append("<meta http-equiv=""Content-Type"" content=""text/html;charset=windows-1252"">")
        .Append("<!--[if gte mso 9]>")
        .Append("<xml>")
        .Append("<x:ExcelWorkbook>")
        .Append("<x:ExcelWorksheets>")
        .Append("<x:ExcelWorksheet>")
        .Append("<x:Name>Summary</x:Name>")
        .Append("</x:ExcelWorksheet>")
        .Append("<x:ExcelWorksheet>")
        .Append("<x:Name>Summary no 2</x:Name>")
        .Append("</x:ExcelWorksheet>")
        .Append("</xml>")
        .Append("<![endif]-->")
        .Append("</head>")
        .Append("<body>")
        .Append(oBuilder)
        .Append("</body>")
        .Append("</html>") 
```

Post renderring the page, I click a button to export the tables to excel. My button click event does the following:

```
Context.Response.ContentType = "application/ms-excel"
Context.Response.AddHeader("content-disposition", "attachment; filename=" + Session("ExcelFile").Trim + "")
Context.Response.AddHeader("Content-Transfer-Encoding", "binary")
Context.Response.Write(LogDetails.InnerHtml) 
```

This button gives me a save / open dialog box. When I open the saved excel sheet, I find that it has the two tables one below the other ... I would like the tables to be on seperate worksheets. I don’t want to recreate my entire code because it has years of work … Is there a way that I can put the first HTML table in the "summary" worksheet and the second HTML table into the "summary no 2" worksheet without having to rework the entire code?

Any help will be greatly appreciated as I have been researching on this for over 3 days now ... (Doesn't say much about my research skills)

Regards, Sunny

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:33:41.730

我假设您需要将第一个表格呈现到第一个电子表格中，然后更改活动工作表并呈现第二个表格。

# css - 使用 CSS 选择换行的位置

> ID：12563109
> 
> 赞同：0
> 
> 时间：2012-09-24T10:25:30.737
> 
> 标签：css

我有一个用 a`ul`和`li`s 编写的菜单，但我无法将行换行在正确的位置。这是HTML：

```
<li><span>●&lt;/span>&nbsp;<a href="/spl">Scottish Premier League</a></li> 
```

我希望它看起来像这样：

```
● Scottish
Premier League 
```

但它看起来像这样：

```
●
Scottish Premier
League 
```

带有点的`span`jQuery 用于扩展联赛以显示俱乐部，并`a`导航到联赛页面。

我试过`white-space: nowrap;`在 上使用`li`，但这会扩大`ul`并弄乱布局的其余部分。我试过`<wbr>`在联赛名称中添加标签，但这没有效果。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:25:30.737

找到了。问题出`display: inline-block`在`<a>`标签上。

# ios - 为一个控制器 [Storyboard] 创建纵向和横向视图的最佳方法是什么？

> ID：12563110
> 
> 赞同：0
> 
> 时间：2012-09-24T10:25:31.393
> 
> 标签：ios, xcode, storyboard, orientation

故事板是一个很棒的功能——但是否有可能为一个控制器创建一个横向和纵向视图？最好的方法是什么？

我在 StackOverflow 上发现了很多东西，从复制故事板到为每个方向添加子视图。太好了，如果有更好的方法可以做到这一点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:11:59.863

自动调整大小仅适用于最简单直接的情况。如果你只需要稍微调整一下最终结果，那就太难了。为了使这更直观，我设置了自动调整大小，然后在同一个 xib 中为同一个控制器复制纵向视图并将其旋转到横向。然后我调整位置。但在此之前，我为每个控件设置标签属性。因此，我实际上创建了 2 个重复视图，1 个纵向和 1 个横向，并且由于标签相同，因此在“willRotateTo...”或“didRotateTo..”期间，我从视觉上复制的重复视图中复制每个控件的 .frame 属性在xib中进行了调整，这将控件放在了我想要的位置。我什至可以沿途添加动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:17:55.620

您想为情节提要的每个 UIViewController 使用子视图的自动调整大小。这是管理轮换的最干净的方式。

检查：[http ://www.techotopia.com/index.php/IOS_5_iPhone_Rotation,_View_Resizing_and_Layout_Handling](http://www.techotopia.com/index.php/IOS_5_iPhone_Rotation,_View_Resizing_and_Layout_Handling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:01:34.277

您不应该为每个方向创建多个场景。您应该使用自动调整大小、弹簧和支柱、几种旋转方法的自定义实现并响应通知。

# c# - How to detect the installation and start MySQL server automatically from an application built in C#

> ID：12563113
> 
> 赞同：1
> 
> 时间：2012-09-24T10:25:34.873
> 
> 标签：c#, mysql, process.start

I am developing a C# desktop application for my client that uses MySQL Server. What my client demands is that the database server should be started at the time of application start and also it should be stopped at the application exit. I know how to start a process in C# using Process.Start() but what I don't know is that how to **detect the installation path of the MySQL server and start the server** because the condition of my client is that the server installation path may change in future. Also I don't know **how to stop a process/service in C#**. So please tell me these two things:

*   Detect installation path of MySQL and start the server via C#
*   Stop the MySQL server on application exit via C#

I tried this but this code needs the path of the MySql installation. I need the path automatic and I am unable to predict any code for that

```
if (Process.GetProcessesByName("mysqld.exe") == null)
{
    Process.Start("C:\Program Files (x86)\MySQL\MySQL Cluster 5.5\bin\mysqld.exe");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:53:33.630

在 bin 文件夹中提供 MySQLInstanceConfig.exe 的路径...

"C:\Program Files\MySQL\MySQL 服务器 5.1\bin\mysqld"

通过以下链接可以帮助您

[http://dev.mysql.com/doc/refman/5.0/en/mysql-config-wizard-starting.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-config-wizard-starting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T04:57:48.063

> 这完美无缺....只需转到您的 Windows 服务并确定机器上 MySQL 实例的服务名称。我的是'MySQL57'。超时只是为了确保服务状态在做其他事情之前返回预期值。

```
 public int RestartMySQL()
    {
        var serviceName = "MySQL57";
        var timeoutMilliseconds = 2000;

        var service = new ServiceController(serviceName, Environment.MachineName);

        try
        {
            TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);

            if (service.Status == ServiceControllerStatus.Running)
            {
                service.Stop();
                service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);
            }

            service.Start();
            service.WaitForStatus(ServiceControllerStatus.Running, timeout);

            return 5;
        }
        catch (Exception ex)
        {
            return 0;
        }
    } 
```

# php - Incorporating extra loop into random selection?

> ID：12563116
> 
> 赞同：1
> 
> 时间：2012-09-24T10:25:43.597
> 
> 标签：php, wordpress, custom-fields

I have the code below that is selecting a random set of questions from Wordpress.

```
<?php
    $rows = get_field('step_by_step_test');
    $row_count = count($rows);
    $rand_rows = array();
    $questions = get_field('select_number_of_questions');
    for ($i = 0; $i < min($row_count, $questions); $i++) {
        $r = rand(0, $row_count - 1);
        while (array_search($r, $rand_rows) !== false) {
            $r = rand(0, $row_count - 1);
        }
        $rand_rows[] = $r;
        echo $rows[$r]['question'];
    }
?> 
```

I want to incorporate a bit of extra code (below), how can I make sure it's selecting the same random question?

```
<?php if(get_sub_field('answer_options')): ?>
<?php while(has_sub_field('answer_options')): ?> 
    <?php echo the_sub_field('answer'); ?>
<?php endwhile; ?> 
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T04:12:02.387

你为什么不稍微改变你的方法？

```
<?php 
   $rows = get_field('step_by_step_test');  // Get the test
   $question_count = get_field('select_number_of_questions');  // Get the number of questions
   $rows = shuffle($rows);   // Randomize your questions
   $rows = array_slice($rows, $question_count);   // Now set the array to only contain the number of questions you wanted
   foreach ($rows as $row) {
       echo $row['question'];    // Show the question
       if(get_sub_field('answer_options', $row['id'])) {
              while(has_sub_field('answer_options', $row['id'])) {
                       echo the_sub_field('answer');
              }
       }
   } 
?> 
```

我假设您可以更改“get_sub_field”以包含问题的 ID，因此您可以将 ID 包含在“answer_options”的“where”字段中。这将允许您链接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:04:17.647

我认为你需要的是在一个循环中设置整个事情。[按自定义字段查询](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)

或者您可以存储您在上面得到的问题的 ID，然后在下面[查询这些特定帖子的答案](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:38:13.150

以下是我如何使用 Advanced Custom Fields 插件 + Royal Slider 和上面 TheSwiftExchange 代码的修改版本随机化我的 WordPress 滑块

```
<div id="full-width-slider" class="royalSlider heroSlider rsMinW">

<?php
   /*
    *  Slider Repeater field shuffled
    *  http://stackoverflow.com/questions/12563116/incorporating-extra-loop-into-random-selection
    */

    $rows = get_field('slider');
//  For Debugging:
//  echo "<pre>";
//  var_dump($rows);
//  echo "</pre>";

    $quotes = get_field('slide_text');  // Get the number of images
    shuffle($rows);   // Randomize your slides

    foreach ($rows as $row) {

        $slideImageID =  $row['slide_image'];
        $slideImage = wp_get_attachment_image_src( $slideImageID, 'full' );
        $slideText = $row['slide_text'];
        ?>

        <div class="rsContent">

               <div class="royalCaption">
                   <div class="royalCaptionInner">

                       <div class="infoBlock">
                            <?php if(!empty($slideText)) {
                                   echo $slideText;
                           }; ?>
                       </div>
                   </div>
               </div>
               <img src="<?php echo $slideImage[0]; ?>" class="" />

        </div><!-- /.rsContent -->
    <?php }  // end foreach ?>

</div><!-- /slider-wrap --> 
```

# c - writing a glibc api for a system call

> ID：12563121
> 
> 赞同：3
> 
> 时间：2012-09-24T10:25:48.590
> 
> 标签：c, linux, unix, glibc, system-calls

> **Possible Duplicate:**
> [Need help with glibc source](https://stackoverflow.com/questions/6515583/need-help-with-glibc-source)

I understand how to implement our own system calls in linux kernel. I know we can call this with `syscall()` or with `_asm()` in a c program.

1.  But I want to understand how to write glibc api for this new system call?.

2.  How the `open()` and `read()` glibc function calls mapping into system call in kernel?.

    ```
    char      message[ ] = "Hello!\n";

    int main( void )
    {
            write( 1, message, 7 );
            exit( 0 );
    } 
    ```

When I convert the above program into assembly it is giving

```
main:
    leal    4(%esp), %ecx
    andl    $-16, %esp
    pushl   -4(%ecx)
    pushl   %ebp
    movl    %esp, %ebp
    pushl   %ecx
    subl    $20, %esp
    movl    $7, 8(%esp)
    movl    $message, 4(%esp)
    movl    $1, (%esp)
    call    write
    movl    $0, (%esp)
    call    exit
    .size   main, .-main
    .ident  "GCC: (Debian 4.3.2-1.1) 4.3.2"
    .section        .note.GNU-stack,"",@progbits 
```

~

3, In "call write" I think write is glibc call here ?. what happens after that? how it maps the glibc call to system call?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:35:14.757

参见例如[这个答案](https://stackoverflow.com/a/10151524/841108)和类似问题的[那个答案。](https://stackoverflow.com/a/11609768/841108)阅读更多关于[系统调用](http://en.wikipedia.org/wiki/Syscall)、[linux内核、](http://en.wikipedia.org/wiki/Linux_kernel) [linux系统调用](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)概述和[汇编方法的信息。](http://tldp.org/HOWTO/Assembly-HOWTO/)

glibc 中的`write`函数不是真正的系统调用。`sysenter`它是一个包装器（通过例如机器指令执行 sycall ，可能使用[VDSO](http://en.wikipedia.org/wiki/VDSO)和设置`errno`）。您可以使用它`strace`来了解某些程序所做的系统调用。

例如，[MUSL libc](http://www.musl-libc.org/)有这个[write.c](http://git.musl-libc.org/cgit/musl/tree/src/unistd/write.c)实现，用于`write`. 对于 GNU libc，请查看它的[write.c](http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=io/write.c;hb=HEAD)。

# c++ - Overload math operators

> ID：12563122
> 
> 赞同：1
> 
> 时间：2012-09-24T10:25:50.737
> 
> 标签：c++, operator-overloading

> **Possible Duplicate:**
> [Why is my log in the std namespace?](https://stackoverflow.com/questions/11892976/why-is-my-log-in-the-std-namespace)

Based on [Overload a C++ function according to the return value](https://stackoverflow.com/questions/226144/puzzle-overload-a-c-function-according-to-the-return-value), I did the following experiment:

```
#include <cmath>

class myType
{
private:
    double value;
    myType(double value) : value(value) {}

public:

    myType& operator= (const myType& other) {
        if (this != &other) value = other.value;
        return *this;
    }

    static myType test(double val) { return myType(val); }

    friend std::ostream& operator<<(std::ostream& target, const myType& A);    
};

std::ostream& operator<<(std::ostream& target, const myType& A){
    target << A.value;
    return target;
}

class asin {
private:
    double value;
public:
    asin(double value)
        : value(std::asin( (value<-1.0) ? -1.0 : (value>1.0?1.0:value) ))
    {}
    operator double() { return value;               }
    operator myType() { return myType::test(value); }        
};

int main(int argc, char *argv[])
{
   myType d = asin(1.0); 

   std::cout << d << std::endl;

   return 0;
} 
```

which resulted in

```
error: ‘myType::myType(double)’ is private 
```

on the first line in `main()`. A bit more experimenting showed me that this works fine and as expected when I change the classname `asin` to `Asin` (or anything else for that matter). So apparently, I'm not allowed to call my class `asin`, while the act of defining it (and not using it) does not give me any warning/error.

Now I know all of this is bad practice, so don't flame me for that. I ask this purely out of academic interest: why can't I call my class `asin`, or `acos` or `atan` or anything like that? I was under the impression that `cmath` hid everything in the `std`-namespace, so that defining this class in the global namespace would not give rise this particular problem.

Can anyone explain what's going on?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:22:59.707

asin 是在 c++ 标准库中定义为全局函数，也在数学库中定义，（所以你甚至不必使用 std::) 如果你尝试使用未命名的命名空间，那么你会得到'使用 `asin' 是模棱两可的'错误。命名空间可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T11:03:30.167

对于某些 IDE，例如 Visual Studio，您甚至不需要包含 cmath。它已经在全局命名空间中定义了这些函数。尝试排除 cmath ，您会看到 asin() 仍然被定义。

# android - Sending apps to other devices

> ID：12563124
> 
> 赞同：0
> 
> 时间：2012-09-24T10:26:26.397
> 
> 标签：android, eclipse, cordova

How can I share my app with friends? I created my app in eclipse and can run the app on my device but how can I share it without adding it to the play market?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:29:06.377

通过邮件将您的 apk 文件发送给您的朋友或通过蓝牙发送，然后按照以下步骤操作。

*   将 APK 文件复制到手机中 Android 的 SD 卡中。

*   从 Android Market 下载并安装 Apps Installer 应用程序

*   安装后，Apps Installer 将显示存储卡上的 APK 文件。

*   单击并安装您的 APK 文件。

**注意：您可以在项目的 bin 文件夹中找到您的 apk 文件。但在此之前，您必须启用 unknow Source 。转到设置 -> 应用程序 -> 并启用未知来源。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:30:14.043

您可以共享`.apk`创建的文件（通常在文件夹的子文件`out`夹中）。只需通过电子邮件、蓝牙等将您的 .apk 文件发送给您的朋友。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:30:17.060

在模拟器上运行应用程序进行测试。现在 Eclipse 应该已经在您的项目文件夹中创建了一个 bin 文件夹。在此文件夹中，您将找到一个包含您的应用程序的 apk 文件。

只需通过电子邮件将此文件发送给您的朋友。如果他有一个正在运行的模拟器，他现在可以在模拟器上安装该文件。如果不是，他可以通过 USB 插入手机，将文件移动到 SD 卡，移除 USB 连接，然后使用[ASTRO](http://www.androlib.com/android.application.com-metago-astro-qzq.aspx)等文件浏览器导航到 SD 卡上的文件，然后选择应用程序管理器现在应该显示的项目起来，他可以安装应用程序。如果这不起作用，他必须转到设置 -> 应用程序 -> 并启用未知来源。

# jsf - Matching element id's with JSF dynamic view Id

> ID：12563125
> 
> 赞同：5
> 
> 时间：2012-09-24T10:26:32.140
> 
> 标签：jsf, xpath, selenium

I'm using JSF 1.2\. We want to write some selenium tests (based on xpath) but xpath does not seem to have wildcard matching on element id's.

We cannot turn off prefix ids as we are running as a portlet within IBM Portal Server 6.1 and our application breaks in that environment with the prefix turned off.

Currently we are using xpaths of the form

`//*[substring(@id, 54)='id_distributorName']`

which will match: `<select size="1" class="firstName" name="viewns_7_8000CB1A0GUIE0IJF799CR10O2_:commonEntryForm:id_distributorName" id="viewns_7_8000CB1A0GUIE0IJF799CR10O2_:commonEntryForm:id_distributorName" >`

but it strikes me that assuming JSF will always generate a viewId of the same length is dangerous.

Is there a better way to do this?

We've tried using the `name` attribute for our input controls but of course JSF ignores the attribute and writes it's own name attribute whose value matches the id presumably for evant handling scripting reasons)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:36:11.507

如果您使用的是 XPath 2.0，只需使用`ends-with()`函数：

```
//*[ends-with(@id, ':id_distributorName')] 
```

如果您使用的是 XPath 1.0，请用于`string-length()`计算 的开头`substring()`：

```
//*[substring(@id, string-length(@id) - 18) = ':id_distributorName'] 
```

这里，18 是`id_distributorName`（不带`:`前缀！）的长度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T10:48:20.583

好的，我刚刚回答了我自己的问题。

我承认我对 xpaths 知之甚少，这是我的借口！

答案是使用`contains()`

IE `//*[contains(@id, 'id_distributorName')]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:08:02.990

**使用**：

```
//*[substring-after(@id, ':commonEntryForm:') = 'id_distributorName'] 
```

# java - 仅在第一次出现时使用特殊符号在Java中拆分字符串？

> ID：12563141
> 
> 赞同：0
> 
> 时间：2012-09-24T10:27:25.623
> 
> 标签：java, regex, json, string, split

我想在 html 页面中显示 java 列表数据。所以我决定最好使用 JSON。我将列表转换为 json 字符串对象。使用 Jquery 我可以解析并显示列表中的信息。我将列表转换为 json 对象。它转换如下：

`{"list":[{"one":"11","two":"21","three":31},{"one":"12","two":"22","three":32},{"one":"13","two":"23","three":33}]}`

但我开始知道，jQuery 解析的语法几乎不匹配。
只有当我通过谷歌搜索知道时，jQuery 才处理以下一个：

`'[{"one":"11","two":"21","three":31},{"one":"12","two":"22","three":32},{"one":"13","two":"23","three":33}]'`

我只想丢弃`:`(colon) 的子字符串，最后一个 char`{`也丢弃，然后我可以传递这个`json`对象并且 jQuery 处理得很好。我尝试了两个字符串，只有第二个有效。如何丢弃第一次出现`:`with regex 的子字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:30:43.143

jQuery 可以同时处理这两种情况。（它们都是正确的 JSON 格式。）

```
var obj = $.parseJSON(data);

// for the first type
var arr = obj.list;

// for the second type obj is already an array. 
```

***[检查演示。](http://jsfiddle.net/QarnP/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T10:31:05.423

以下代码将为您提供所需的字符串：

```
String str = "{"list":[{"one":"11","two":"21","three":31},{"one":"12","two":"22","three":32},{"one":"13","two":"23","three":33}]}" // Escape the Quotes to include in str

str = str.substring(str.indexOf(':')+1,str.length()-1); 
```

# asp.net - SetAuthCookie 如何适用于两个不同的站点

> ID：12563144
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:27:34.287
> 
> 标签：asp.net, authentication, cookies

我想知道`SetAuthCookie`同一服务器上不同应用程序的工作原理？

目前我有两个具有不同虚拟目录的类似应用程序。

我怎样才能做到这一点，以便如果我登录其中一个应用程序，那么它不会要求我登录另一个应用程序，而注销也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:31:05.207

如果两个应用程序都托管在同一个顶级域上，这是可能的。您应该在两个应用程序的 web.config 中指定此域：

```
<forms 
   name="name" 
   loginUrl="URL" 
   defaultUrl="URL"
   domain="example.com">
</forms> 
```

这样，表单身份验证 cookie 将与`domain`属性设置一起发出，客户端将在 2 个应用程序之间有效地发送它。另一个先决条件是两个应用程序共享相同的机器密钥，以便由第一个应用程序加密的身份验证 cookie 可以由第二个应用程序成功解密。如果两个应用程序都托管在同一台服务器上，您可以在 machine.config 中设置这些机器密钥，如果没有，那么您可以在每个应用程序的 web.config 中设置它们：

```
<system.web>
    <machineKey decryption="AES" decryptionKey="C03B1AB0BC1ACCD18EA915CBD87373010AD0DEC430A69871,IsolateApps" validation="AES" validationKey="C0ED7C430148AD4BC6505085DA4FD0DD3EE2453B566FC4EA4C7B3C2DCAB2025A79C774370CA884DF909CE9A3D379E544B7890D0A1CEE164141D3A966999DC625,IsolateApps" />
</system.web> 
```

我也在[下面的答案](https://stackoverflow.com/a/5000895/29407)中介绍了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:03:20.343

即使帖子很旧，但是有一个简单的解决方案，可以在 web.config 的表单标签中添加“名称”，因为如果您不给 cookie 命名，它将有一个默认名称

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" name="client" />
</authentication> 
```

对于另一个应用程序使用另一个名称，它与我完美配合。祝你好运

# c# - 如何区分价值观组？

> ID：12563147
> 
> 赞同：3
> 
> 时间：2012-09-24T10:27:48.847
> 
> 标签：c#, xml, linq, linq-to-xml, distinct

我正在尝试构建一个选择唯一值组的查询。我知道如何对值进行分组并选择不同的值，但我不知道如何选择不同的值组，而不管考虑的元素的顺序如何。更确切地说：

我的 XML 是这样的：

```
<A>
    <B type="1">value1</prop>
    <B type="2">value2</prop>
    <B type="3">value3</prop>
    <B type="4">value4</prop>
<C>
    <D>XXX</D>
</C>
<C>
    <D>YYY</D>
</C>
</A>

<A>
    <B type="3">value3</prop>
    <B type="4">value4</prop>
    <B type="2">value2</prop>
<C>
    <D>XXX</D>
</C>
<C>
    <D>YYY</D>
</C>
</A> 
```

在这里，我想`<B>`从所有`<A>`节点中创建一组值，并只选择唯一的一组值。例如，这里：

值1+值2+值3+值4

和

值2+值3+值4+值1

仅当部分或全部值不同时，这两组值才应该是唯一的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:50:02.720

以下作品：

```
var doc = XDocument.Parse(xml);

var comparer = new ElementsComparer();

var result = doc.Descendants("B")
                .GroupBy(x => x.Parent)
                .Distinct(comparer);

class ElementsComparer : IEqualityComparer<IGrouping<XElement, XElement>>,
                         IEqualityComparer<XElement>
{
    public bool Equals(XElement lhs, XElement rhs)
    {
        return lhs.Value.Equals(rhs.Value);
    }

    public bool Equals(IGrouping<XElement, XElement> lhs,
                       IGrouping<XElement, XElement> rhs)
    {
        var x = lhs.OrderBy(a => a.Value);
        var y = rhs.OrderBy(a => a.Value);
        return x.SequenceEqual(y, this);
    }

    public int GetHashCode(XElement obj)
    {
        return obj.Value.GetHashCode();
    }

    public int GetHashCode(IGrouping<XElement, XElement> obj)
    {
        return 0;
    }
} 
```

这将返回不同的组。如果组中的元素与另一组中的元素具有相同的值，则该组被视为与另一组相同。
不幸的是，我们需要一个完整的`IEqualityComparer`实现来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:39:28.623

尝试

```
var xDocument = XDocument.Parse(/*Your XML here*/);
var vals =
    //Find all A-Elements
    xDocument.Root.Elements("A")
        //Select all their B-Elements to one collection
        .SelectMany(a => a.Elements("B"))
        //Group the B-Items by their value
        .GroupBy(element => element.Value)
        //Select the keys of the IGrouping<TValue, XElement>
        .Select(element => element.Key)
        //Distinct them
        .Distinct(); 
```

# wpf - DependencyProperty ObservableCollection 事件

> ID：12563148
> 
> 赞同：0
> 
> 时间：2012-09-24T10:27:59.237
> 
> 标签：wpf, events, dependency-properties, observablecollection

我正在尝试制作内部有另一个 UserControl_2 的 UserControl (GridSearch)。我想使用 XAML 将一些 FrameworkElements 添加到 UserControl_2 面板。

所以我在 GridSearch 中做了 ObservableCollection DependencyProperty：

```
public partial class GridSearch : UserControl
{
    public GridSearch()
    {
        InitializeComponent();
    }

    public ObservableCollection<Filter> Filters
    {
        get { return (ObservableCollection<Filter>)GetValue(FiltersProperty); }
        set { SetValue(FiltersProperty, value); }
    }

    public static readonly DependencyProperty FiltersProperty =
        DependencyProperty.Register("Filters",
                                    typeof(ObservableCollection<Filter>), 
                                    typeof(GridSearch),
                                    new FrameworkPropertyMetadata(getObservableFilters(), null)
                                    );

    private static ObservableCollection<Filter> getObservableFilters()
    {
        var ob = new ObservableCollection<Filter>();
        ob.CollectionChanged += ob_CollectionChanged;
        return ob;
    }

    private static void ob_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {

    }
} 
```

现在我尝试使用 ob_CollectionChanged 向面板添加新元素。但是，因为它是静态方法，所以我无法访问面板。我无法投射发件人，因为它只给了我 ObservableCollection。但是我需要GridSearch。

我正在寻找几个小时的解决方案，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:26:10.380

将 getObservableFilters() 方法更改为只创建并返回可观察集合。

并且在 GridSearch() 构造函数中，在调用 InitializeComponent() 之后，可以为 Filters.CollectionChanged 添加一个处理程序并提供一个非静态成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:47:12.937

好的，它最终起作用了，关键是在构造函数中为控件的每个实例创建新的 ObservableCollection()。

但是，仍然存在一个问题。一切都在运行时工作，但设计师无法显示任何东西，因为它得到以下错误：

***你调用的对象是空的。***

这是这一行的标签：`<gsh:GridSearch.Filters>`

这是我最终得到的代码：

```
public partial class GridSearch : UserControl
{
    public GridSearch()
    {
        Filters = new ObservableCollection<Label>();
        InitializeComponent();

        Filters.CollectionChanged += Filters_CollectionChanged;
    }

    void Filters_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        foreach (Label uc in e.NewItems)
            pnlFilters.Children.Add(uc);                
    }

    public ObservableCollection<Label> Filters
    {
        get { return (ObservableCollection<Label>)GetValue(FiltersProperty); }
        set { SetValue(FiltersProperty, value); }
    }

    public static readonly DependencyProperty FiltersProperty =
        DependencyProperty.Register("Filters",
                                    typeof(ObservableCollection<Label>), 
                                    typeof(GridSearch),
                                    new FrameworkPropertyMetadata(new ObservableCollection<Label>(), null)
                                    );

} 
```

* * *

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="0.5*"/>
        <RowDefinition Height="0.5*"/>
    </Grid.RowDefinitions>

    <gsh:GridSearch>
        <gsh:GridSearch.Filters>
            <Label Content="aa" />
            <Label Content="aa" />
            <Label Content="aa" />
        </gsh:GridSearch.Filters>
    </gsh:GridSearch>

    <gsh:GridSearch Grid.Row="1">
        <gsh:GridSearch.Filters>
            <Label Content="bb" />
            <Label Content="cc" />
            <Label Content="dd" />
        </gsh:GridSearch.Filters>
    </gsh:GridSearch>
</Grid> 
```

# c# - 实现 IEnumerable 时 无法访问“求和”功能

> ID：12563150
> 
> 赞同：2
> 
> 时间：2012-09-24T10:28:02.733
> 
> 标签：c#, .net, class

我有一个继承自的集合类，`BindingList`我可以`Sum`在它上面使用函数，例如`myList.Sum(x=>x.Quantity)`.

但是当我实现接口时，`IEnumerable<SqlDataRecord>`我不能再使用它了，`x.Quantity`没有作为选项给出。我该如何解决这个问题？

```
class item
{
    public decimal Quantity { get; set; }
}

class items : BindingList<T>
{
}

items newItems = new items();
items.Sum(x=>x.Quantity); 
```

上面的代码有效，但是当我添加以下代码时，它不再有效。它说该类没有`Sum`. 我究竟做错了什么？

```
class items : BindingList<T>, IEnumerable<SqlDataRecord>
{
}
items.Sum(x=>x.?); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:41:37.607

当您的类仅继承`BindingList<T>`时，`myList.Sum(...)`明确地调用`Enumerable<T>.Sum(myList, ...)`via`BindingList<T>`的继承自 `Collection<T>`.

现在您已经使您的类直接实现`IEnumerable<SqlDataRecord>`，不再清楚调用*哪种*类型- 是来自您的继承还是来自您的直接实现？`Enumerable<?>``Sum``?``T``BindingList``SqlDataRecord`

（出于某种原因，我的 VS 将此报告为“不包含定义......”而不是模棱两可的调用。）

因此，如果您想像以前一样拨打电话，则必须明确拨打`myList.Sum<T>(...)`.

# jquery - 用于隐藏和显示 div 的 jQuery 简单复选框（产品过滤）

> ID：12563152
> 
> 赞同：3
> 
> 时间：2012-09-24T10:28:05.867
> 
> 标签：jquery, html, custom-data-attribute

我正在使用 jQuery 过滤页面上的产品项目（隐藏和显示 DIV） 我使用过滤器作为替代品，因为 PHP $_GET 有点过时，我们正试图通过 jQuery 来做到这一点。我使用 filter() 和数据属性。

如何关闭除现有项目之外的当前复选框选择？如何根据选择隐藏项目并在不隐藏时取消隐藏？

# HTML

```
<input type="checkbox" id="drama" onClick="filterCategory(this.value)" value="drama" /> Drama<br />
<input type="checkbox" id="romance" onClick="filterCategory(this.value)" value="" /> Romance<br />
<input type="checkbox" id="horror" onClick="filterCategory(this.value)" value="horror" /> Horror<br />

<!--------------------->
<div class="products">
    <div class="productItem" data-price="250" data-category="horror">
        Scary Book
        <div class="productItemPrice"><span>&pound;250</span></div>
    </div>
    <div class="productItem" data-price="150" data-category="drama">
        Drama Poems
        <div class="productItemPrice"><span>&pound;150</span></div>
    </div>
    <div class="productItem" data-price="250" data-category="romance">
        Love Story
        <div class="productItemPrice"><span>&pound;250</span></div>
    </div>
    <div class="productItem" data-price="241" data-category="horror">
        Creep Book
        <div class="productItemPrice"><span>&pound;241</span></div>
    </div>
</div>
<!---------------------> 
```

# 查询

```
function filterCategory(id) {
    var pid=$(".productItem"); // Which product is it
    var checkid=$('#'+id); // The name of the checkbox form
    var cid=$(pid).data("category"); // The value of the checkbox form
    if ($(checkid).is(':checked')){
        $(pid).hide().filter(function () {var catId=$(this).data("category");return catId;}).show();
    } else {
        $(pid).show().filter(function () {var catId=$(this).data("category");return catId;}).show();
    }
} 
```

# CSS

```
.productItem{float:left;padding:5px;margin:5px;border:1px solid #eaeaea}
body{font-family:verdana} 
```

# JSFiddle

[http://jsfiddle.net/RyZy8/](http://jsfiddle.net/RyZy8/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T10:39:26.497

您可以尝试使用类似的东西，

首先删除`onclick`复选框上的属性 - 使用 jQuery 绑定`click`事件：

```
// bind to click
$('input[type="checkbox"]').click(function() {
    // any checked
    if ($('input[type="checkbox"]:checked').length > 0) {
        // hide all
        $('.products >div').hide();
        // loop checked and display relavent div
        $('input[type="checkbox"]:checked').each(function() {
            $('.products >div[data-category=' + this.id + ']').show();
        });
    } else {
        // none checked - show all
        $('.products >div').show();
    }
});​ 
```

[这里的工作示例](http://jsfiddle.net/manseuk/RyZy8/3/)

# tinymce - Tinymce 将标题样式应用于整个段落，而不仅仅是选定的文本

> ID：12563158
> 
> 赞同：4
> 
> 时间：2012-09-24T10:28:23.017
> 
> 标签：tinymce

我刚刚注意到 TinyMCE 编辑器的一个令人讨厌的行为。当我写了几段文字时，我想选择其中的一些并使其成为标题（标题 2 样式），整个文本都会获得该标题样式，而不仅仅是我选择的文本。

当我想应用粗体时，这不会发生 - 在这种情况下，它可以按预期工作；只有选定的文本变为粗体。

**我怎样才能改变这种行为？**我知道有 HTML 模式可以更改样式，但我担心我的客户对 HTML 不太熟悉，他们只想使用可视模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:08:28.903

我猜这是因为 h2-tags 通常不能作为段落的子节点。您可以根据需要尝试调整tinymce 配置参数[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:27:58.077

这是 TinyMCE 的本机行为，无法更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T06:54:42.353

这是我找到的解决方法。对我有用

```
tinyMCE.PluginManager.add('FormatingToolbarButtons', function (editor, url) {
['pre', 'p', 'code', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(function (name) {
    editor.addButton("style-" + name, {
        tooltip: "Toggle " + name,
        text: name.toUpperCase(),
        onClick: function () {
            if (this.active()) {
                editor.execCommand('mceToggleFormat', false, name);
                this.active(false)
            }
            else {
                editor.selection.setContent('<' + name + '>' + editor.selection.getContent() + '</' + name + '>');
                this.active(true)
            }
        },
        onPostRender: function () {
            var self = this, setup = function () {
                editor.formatter.formatChanged(name, function (state) {
                    self.active(state);
                });
            };
            editor.formatter ? setup() : editor.on('init', setup);
        }
    })
}); 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T05:36:53.440

你可以试试下面：

[https://www.tiny.cloud/docs-3x/reference/Configuration3x/Configuration3x@force_br_newlines/](https://www.tiny.cloud/docs-3x/reference/Configuration3x/Configuration3x@force_br_newlines/)

试试看`force_p_newlines : true,`它是否有效。

# jquery - CodeIgniter 只在循环内执行一次 JS

> ID：12563161
> 
> 赞同：0
> 
> 时间：2012-09-24T10:28:36.200
> 
> 标签：jquery, codeigniter, foreach, modal-dialog

我正在使用 CodeIgniter 显示数据库中的项目列表。我想根据它的 ID 删除一个项目。这不是问题，并且在没有模态框的情况下可以正常工作。

我的问题是我正在使用一个名为reveal（http://goo.gl/3lzRN）的jQuery插件来添加一个模式框来确认删除。这适用于列表中的第一项，但其他项与第一项具有相同的 ID。

```
<a href="pages/<?php echo $row->id; ?>" class="delete">
    <i class="icon-cancel"></i><span class="delete_tooltip">delete page</span>
</a>

<aside id="modal">
    <header id="delete_page">Delete Page</header>
    <article id="modal_content">
        <p>
        Are you sure you want to delete the page<br />'<?php echo $row->title ?>'?
        </p>

        <p>This action cannot be undone.</p>

        <p>
        <a href="pages/delete_page/<?php echo $row->id; ?>" >
            <i class="icon-cancel"></i>Delete
        </a> <a href="pages/#" class="modal_cancel">Cancel</a> 
        </p>
    </article>
</aside> 
```

上面是打开模态框的链接，以及里面的内容。这些在 foreach 循环中，但我知道循环工作正常，我没有发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:38:25.163

您不能对页面上的多个元素使用相同的 ID。ID 是唯一标识符，因此大多数浏览器只会考虑第一个元素，而其他浏览器会返回意外值。

您应该为那些具有相同功能的元素使用类，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:57:20.987

您应该使用类而不是 ID。ID 应该每页只出现一次，因此这就是导致您的问题的原因。

类用于出现多次的项目（可重复使用的项目）。

我建议也为模式分配一个*唯一的*id，比如 id="modal-1" 其中 1 是来自 $row->id; 的 ID；

这样，您的每个模态都可以通过类轻松访问，但可以通过它们的 ID 唯一标识。

[http://jsfiddle.net/Z7vHT/1/](http://jsfiddle.net/Z7vHT/1/)这应该可以解决您的问题。

# android - 更新列表视图滚动问题中的单个项目视图

> ID：12563163
> 
> 赞同：1
> 
> 时间：2012-09-24T10:28:41.003
> 
> 标签：android, android-layout, android-listview

有点难描述的问题，请耐心等待

我在列表视图的每个列表项中都有一个进度条，用于显示现在正在下载以更新单个视图我得到单个项目的视图对象现在此视图被传递给异步任务以仅更新正在进行下载的视图

它工作正常，直到我滚动列表视图时，当我为列表视图的一些随机列表项显示进度条时

**调用异步任务的代码**

```
 ListView lv = getListView();
 int visiblePosition = lv.getFirstVisiblePosition();
 View v = lv.getChildAt(position - visiblePosition);
 v.setClickable(true);
 task = new TestLoadingTask();
 task.v = lv.getChildAt(position - visiblePosition);
 executeAsyncTask(task, null, null, null); 
```

**关于异步任务的进度更新**

```
 @Override
    protected void onProgressUpdate(Object... values) {
        super.onProgressUpdate(values);
        progress[currentposition] = (Integer)values[0];
        max[currentposition] = 100;
        updateprogress(currentposition,v);
    }

    public void updateprogress(int position,View v)
  {

    ProgressBar update = (ProgressBar)v.findViewById(R.id.downloadbar);
    if(max!=null && max[position]!=0)
        update.setMax(max[position]);
    if(progress!=null)
        update.setProgress(progress[position]);
    TextView tv_per = (TextView) v.findViewById(R.id.percentage);
    if(progress[position]==max[position])
    {
        tv_per.setVisibility(View.GONE);
        update.setVisibility(View.GONE);
    }
    else
    {
        tv_per.setVisibility(View.VISIBLE);
        tv_per.setText(progress[position]+"/"+max[position]);
        update.setVisibility(View.VISIBLE);
    }
} 
```

任何参考/建议/示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:03:25.687

好的，如果我理解正确，您的问题是 ListView 的适配器不会在您每次滚动时创建新的列表项，它只是转换以前的。因此，如果它没有关于新可见列表项的某些视图的特殊说明，它将像在此位置的先前列表项中一样绘制它们。解决方案是在您的列表项中添加一些标志（如布尔 isUpdating），如果为真，则在适配器的 getView 方法中显示进度条，否则隐藏进度条

# html - 奇怪的 HTML 行为？

> ID：12563164
> 
> 赞同：-2
> 
> 时间：2012-09-24T10:28:48.460
> 
> 标签：html

```
<a href='#' style='display: block;  border: 1px solid black; width: 208px; height: 210px;'>
    <a href='#'>My link</a> 
</a> 
```

为什么当我在浏览器中打开此 html 时，它会在带有黑色边框（即另一个链接）元素的框外显示“我的链接”按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:33:58.030

HTML 无效。一个`a`元素不能包含另一个`a`元素。您正在看到浏览器错误恢复的实际效果。

给定您的代码作为输入，Chrome 中生成的 DOM 看起来（当序列化回 HTML 时）如下所示：

```
<a href="#" style="display: block;  border: 1px solid black; width: 208px; height: 210px;">
    </a><a href="#">My link</a> 
```

我没有时间编写测试来证明这一点，但我怀疑用于恢复的逻辑是：

1.  `a`此处不允许使用第二个元素
2.  过早关闭第一个`a`元素，以便允许第二个元素
3.  我的链接
4.  `a`元素结束
5.  `a`未打开元素的结束标记：丢弃它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:33:34.710

如果你这样做看起来很好：

```
<div style="display: block;  border: 1px solid black; width: 208px; height: 210px;">
<a href="#">My link</a> 
</div> 
```

# android - 更改方向时 Android 中的 ViewPagerIndicator 出现问题

> ID：12563165
> 
> 赞同：0
> 
> 时间：2012-09-24T10:29:01.607
> 
> 标签：android, android-orientation, orientation-changes, viewpagerindicator

我已经实现了[Jake Wharton 的](https://github.com/JakeWharton/Android-ViewPagerIndicator)ViewPagerIndicator。在这里，我在方向改变时重新加载数据。

在横向中，我有 6 页，并且已滚动到最后一页。结果在这里 ![这里](../Images/83413db038670959b310a6d649d78172.png)

现在，我已将方向更改为纵向。现在肖像只有4页。但是，结果就在这里。

![在此处输入图像描述](../Images/4acaa7ea29450b0e826544bafff570db.png)

此处的指示器已从可用项目中消失。

但是，选择的页面是 1。

如何解决这个问题？我使用了以下行

`circlePageIndicator.setCurrentItem(0);`

即使那样它也不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:05:43.213

circlePageIndicator.setCurrentItem(0); 在位置 1 选择页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:54:12.450

您的清单中很可能有`android:configChanges="orientation"`阻止活动在方向更改时重新启动。正因为如此，视图的某些基本方面正在发生变化（例如，宽度），并且控件没有正确更新，因为您阻止了重新创建。

# android - android + 访问远程可绘制对象 - 最佳实践

> ID：12563175
> 
> 赞同：1
> 
> 时间：2012-09-24T10:29:34.110
> 
> 标签：android, drawable

我正在开发一个应用程序，它是一个产品目录。用户可以搜索和查看产品（书籍）。它都是只读的，所以允许用户查看产品。当用户点击一个产品时，下一个屏幕显示-书名-书名-封面图片。

这是我有一个问题的图片部分。我知道呈现可绘制对象的一种方法是将它们放在我的 android 项目中的“可绘制”方向并以 android:src="@drawable/name" 的形式访问它们（在我的 xml 文件中）。

唯一的问题是会添加新产品，所以当我发布它时，我无法将可绘制对象存储在 APK 文件中。我需要在运行时阅读它们。我想知道解决这个问题的最佳方法是什么。

我正在考虑（第一次）启动执行 AsyncTask 的应用程序，该任务将调用 HttpURLConnection 的 openConnection 并抓取所有可绘制对象（从网站上的特定远程目录），然后将它们存储在 sqllite db 中（如一个斑点）。数据库中的每个产品都可以很容易地与其特定的可绘制对象相关联。

不确定是否有更好的方法？或者我应该将它们保存到设备的内部存储中（我知道大小是这个选项的问题）。尝试按需获取可绘制对象可能需要 2-4 秒（即从远程服务器获取）。有没有办法以有效的方式下载drawables？

更新：上述方法的唯一问题是获取远程可绘制对象并将其呈现在设备上所需的时间（2-7 秒之间）。因此，出于性能原因，我不能采用这种方法。当用户第一次启动应用程序时，它（使用异步任务）抓取所有产品（远程在 csv 中）并将其内容存储在 SQLLite 数据库中。所以他们在应用程序第一次启动时有一个可以接受的等待时间，但之后就没有了。我想做一些类似的事情（即也得到drawables），但不确定我应该将它们存储在内部存储中还是将它们作为BLOB 保存到数据库中。每个最大大小为 2-3kb，但总共可以有 300 个产品

任何帮助都会很棒。我正在 Android 4.0.3 上开发。

谢谢 - 罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:54:50.650

您描述的方法是执行此类任务的最佳方法。直接从网上获取它们，这样每当您更改图片时，它就会在您的手机上更改。还有一种更简单的方法，您可以直接向用户显示图像，无需将它们存储到数据库中，但在您必须检查互联网连接之前。

检索图像的功能：

```
public static Bitmap getBitmapFile(String str)
    {
        Bitmap bmImg=null;
        URL myFileUrl;
        try {
            myFileUrl = new URL(str);
            HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return bmImg;

    } 
```

检查 Internet 连接：

```
// declaring variable for holding Internet connection state
        boolean connected = false;
        // checking connectivity to the Internet through mobile network or WIFI
        ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
            if(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED || 
                    connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == NetworkInfo.State.CONNECTED) {
                // Internet connection
                connected = true;
            }
            else
                // no Internet connection
                connected = false; 
```

例子：

```
 // grab image to display
            try {
                // Bitmap bmp1;
                    // String url1;
                    // ImageView img1;

                // in case there is Internet connection display image from online url
                if(connected == true)
                {
                    bmp1=MainActivity.getBitmapFile(url1); 
                    img1.setImageBitmap(bmp1);
                    }
                    else
                    {
                    img1.setImageResource(R.drawable.not_connected);
                    }
                } catch(Exception e) {

                e.printStackTrace();

            } 
```

# google-calendar-api - 将 ics 添加到 Google 日历的链接停止工作

> ID：12563178
> 
> 赞同：7
> 
> 时间：2012-09-24T10:29:50.670
> 
> 标签：google-calendar-api

我在网站上有一个链接，可让用户将 ICS 提要添加到他们的谷歌日历。使用此代码：

```
http://www.google.com/calendar/render?cid=https://<etc> 
```

它工作了3-4年，但不再有效。谷歌给我的信息是：

```
This email address isn't associated with an active Google Calendar account: https://<etc> 
```

如果我手动输入 ics 提要，一切正常：提要按应有的方式解析。没有错误。

知道在哪里可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-19T14:33:44.697

我也有这个问题。你解决了吗？

我的测试表明它在使用带有**http**的 URL 时有效，例如：

```
www.google.com/calendar/render?cid=http%3A%2%2Fwww.example.com%2FCalendar%2FPublic%2520Events.ics 
```

但**不适**用于**https**，例如：

```
www.google.com/calendar/render?cid=https%3A%2%2Fwww.example.com%2FCalendar%2FPublic%2520Events.ics 
```

我的解决方法是在链接中使用 http，但将其重定向到 Web 服务器中的 https。不是很优雅，但它有效。GET 不会被加密，但至少答案是。

**编辑**：实际上，如果您不进行比通过查询字符串参数更多的身份验证，那么通过 http 而不是 https 发送 GET 可能是一个巨大的安全风险，这对于日历提要来说可能很困难。任何可以嗅探 GET 的人都可以自己通过 https 发送相同的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T21:38:57.460

现在它可以工作，即使是`https`.

```
https://www.google.com/calendar/render?cid=https%3A%2F%2Fwww.example.com%2FCalendar%2FPublic%20Events.ics 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-29T17:30:25.767

日历地址使用`webcal`协议：

```
https://www.google.com/calendar/render?cid=webcal%3A%2F%2Fwww.example.com%2FCalendar%2FPublic%20Events.ics 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-21T14:48:55.613

好的，所以对我来说，此页面上的其他答案均无效。但我用其他一些零碎的东西弄清楚了：

链接到我的日历的 ics：

```
https://example.com/calendar?id=a304036ea5a474ee5d80a100d79c231c 
```

将其链接到 Google 日历的正确方法：

```
https://calendar.google.com/calendar/r?cid=webcal%3A%2F%2Fexample.com%2Fcalendar%3Fid%3Da304036ea5a474ee5d80a100d79c231c 
```

**这里的关键是使用webcal**协议而不是**https**协议来添加它。

希望这对任何人都有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T02:29:45.247

他们变得更加严格。现在你必须使用

```
http://www.google.com/calendar/render?cid=http%3A%2F%2Fwww.example.com%2FCalendar%2FPublic%2520Events.ics 
```

注意编码。

# iphone - ios特殊字符问题

> ID：12563180
> 
> 赞同：4
> 
> 时间：2012-09-24T10:30:05.313
> 
> 标签：iphone, objective-c, ios, ios4

在我的应用程序中，当我尝试将附加字符串设置为 UIlabel 时，未显示特殊字符。请帮我解决这个问题。

谢谢

![结果](../Images/5e4385be4624d7de0f3d3c8749ddeec8.png)

![特殊字符](../Images/09f6fb584e583681ba2b34c8e3887350.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:00:16.800

如果你的键盘上有一个欧元字符，你可以直接使用它：

```
[lLabel setText:@"€"]; 
```

否则使用 Unicode 转义：

```
[lLabel setText:@"\u20AC"]; 
```

**添加了 Foundation 框架和 NSString 类不知道像“¿euro¿”这样的转义序列，因此您必须手动替换它**：****

 **```
NSString *s = @"abc ¿euro¿ def";
NSString *d = [s stringByReplacingOccurrencesOfString:@"¿euro¿" withString:@"\u20AC"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:45:53.887

将字符串转换为 UTF-8，然后将其设置为标签文本。

```
[label setText:[NSString stringWithFormat:@"%s",[@"your_string" UTF8String]]]; 
```

[编辑]

我对此进行了测试，并且无需将字符串转换为 UTF-8 即可正常工作！

```
label.text = @"¿euro¿"; 
```

![检查此输出](../Images/4e00060738f987c2340c561d5a0e43a2.png)

请确保您的服务器的响应设置为 UTF-8 并且它应该修复它。我遇到了同样的问题，我从 UTF8 的服务器获取字符串 - NSUTF8StringEncoding！我改变了它，其他一切都很好！

例如我这样做：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
request.defaultResponseEncoding = NSUTF8StringEncoding; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:49:34.427

```
//Conevrt the string utf-8 format

[yourstringvariabel UTF8String]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T08:48:25.860

使用`NSISOLatinStringEncoding`解决了这个问题。**

# forms - Zend 框架 2 - 独立表单

> ID：12563181
> 
> 赞同：1
> 
> 时间：2012-09-24T10:30:06.327
> 
> 标签：forms, zend-framework2

是否可以将 ZF2 形式用作独立组件？ZF1 可以做到这一点，但 ZF2 无法解决。

我可以创建一个表单和一个验证器，但不知道如何呈现表单：

```
$form = new AddressBookForm('address_book'); \\ extends Zend\Form\Form

if ($this->input->isPost()) {
    $validator = new AddressBookValidator(); \\ implements Zend\InputFilter\InputFilterAwareInterface
    $form->setInputFilter($validator->getInputFilter());
    $form->setData($this->input->getPost());

    if ($form->isValid()) {
        echo 'valid'; exit;
    }
}

// Render form somehow here??? 
```

我尝试创建一个视图，但不知道如何给它视图助手。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-04T10:05:26.343

我有一个基本的解决方案，似乎可以完成这项工作

```
$zfView = new \Zend\View\Renderer\PhpRenderer();
$plugins = $zfView->getHelperPluginManager();
$config  = new Zend\Form\View\HelperConfig;
$config->configureServiceManager($plugins); 
```

然后渲染表单

```
echo $zfView->form()->openTag($form);
echo $zfView->formRow($form->get('name'));
echo $zfView->formSubmit( $form->get('submit'));
echo $zfView->form()->closeTag(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-13T04:36:26.527

查看此博客。

[在视图文件中呈现表单](http://www.kdecom.com/display-form-using-one-line-in-view-file-zend-framework-2/)

您可以简单地通过 zend 框架表单视图助手来完成。

```
$form = $this->form;
$form->prepare();
$this->form()->render($form); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-14T12:45:30.307

@CodeMonkey 的方法很好，但代码不完整。我从他的答案和我用部分代码找到的其他答案中拼凑了一个工作示例。

```
<?php
    /*
     * @author Carl McDade
     * 
     * @since 2012-06-11
     * @version 0.2
     *
     */

namespace zftest;

$path = DOCROOT .'/_frameworks/zf/ZendFramework-2.2.2/library';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
require_once($path . '/Zend/Loader/StandardAutoloader.php');

use Zend\Loader;
use Zend\Http\Request;
use Zend\Http\Client;

use Zend\Captcha;
use Zend\Form\Element;
use Zend\Form\Fieldset;
use Zend\Form\Form;
use Zend\Form\FormInterface;
use Zend\InputFilter\Input;
use Zend\InputFilter\InputFilter;
use Zend\Form\View\Helper;

use \Common;

class zftest{

function __construct()
{

    spl_autoload_register(array($this, '_zftest_autoload'));
}

 function _zftest_autoload($class)
 {
     //
     $loader = new \Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));
     $loader->registerNamespaces(array('Zend'));

     // finally send namespaces and prefixes to the autoloader SPL
     $loader->register();
     return;
 }

function zftest()
{

    $uri = 'http://maps.google.com/maps/api/geocode/json';
    $address = urlencode('berlin');
    $sensor = 'false';

    $request = new Request();
    $request->setUri($uri);
    $request->setMethod('GET');

    $client = new Client($uri);
    $client->setRequest($request);
    $client->setParameterGet(array('sensor'=>$sensor,'address'=>$address));
    $response = $client->dispatch($request);        
    if ($response->isSuccess()) {
        print 'Your Request for:<pre>' . print_r($address, 1) . '</pre>';
        print '<pre>' . print_r($response->getBody(), 1) . '</pre>';

    }
}

function zfform()
{

    // Zend Framework 2 form example

    $name = new Element('name');
    $name->setLabel('Your name');
    $name->setAttributes(array(
        'type'  => 'text'
    ));

    $email = new Element\Email('email');
    $email->setLabel('Your email address');

    $subject = new Element('subject');
    $subject->setLabel('Subject');
    $subject->setAttributes(array(
        'type'  => 'text'
    ));

    $message = new Element\Textarea('message');
    $message->setLabel('Message');

    $captcha = new Element\Captcha('captcha');
    $captcha->setCaptcha(new Captcha\Dumb());
    $captcha->setLabel('Please verify you are human');

    $csrf = new Element\Csrf('security');

    $send = new Element('send');
    $send->setValue('Submit');
    $send->setAttributes(array(
        'type'  => 'submit'
    ));

    $form = new Form('contact');
    $form->add($name);
    $form->add($email);
    $form->add($subject);
    $form->add($message);
    $form->add($captcha);
    $form->add($csrf);
    $form->add($send);

    $nameInput = new Input('name');
    // configure input... and all others
    $inputFilter = new InputFilter();
    // attach all inputs

    $form->setInputFilter($inputFilter);

    $zfView = new \Zend\View\Renderer\PhpRenderer();
    $plugins = $zfView->getHelperPluginManager();
    $config  = new \Zend\Form\View\HelperConfig;
    $config->configureServiceManager($plugins);

    $output = $zfView->form()->openTag($form) . "\n";
    $output .= $zfView->formRow($form->get('name')) . "<br />\n";
    $output .= $zfView->formRow($form->get('captcha')) . "<br />\n";
    $output .= $zfView->formSubmit( $form->get('send')) . "<br />\n";
    $output .= $zfView->form()->closeTag() . "\n";

    echo $output;

}
}
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T10:51:10.387

您可以使用`Zend\Form\View\Helper`视图助手在视图中呈现表单。示例：（查看上下文）

```
My Form: 
<?php echo $this->form()->openTag($this->form); ?>
<?php echo $this->formCollection($this->form); ?>
<?php echo $this->form()->closeTag($this->form); ?> 
```

**请注意**，这`$this->form`是`$form`分配给视图的变量。此外，视图助手总是在视图中可用，只要它们注册为`invokables`（对于内置助手总是如此）。

这将呈现`<form ...> ... </form>`标签内的所有元素。检查其他视图助手以获取更多信息。

此外，请参阅示例文档：http: [//zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html) 您可以使用它做更多的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-22T22:00:15.107

因为我没有设置 Service Manager 也没有 View Helper 方法，所以没有一个更简单的答案对我有帮助。

但匆忙这对我有用：

```
 $checkbox = new Element\Checkbox('checkbox');
    $checkbox->setLabel('Label');

    $checkbox->setCheckedValue("good");
    $checkbox->setUncheckedValue("bad");

    $form = new FormCheckbox();
    echo $form->render($checkbox); 
```

# hibernate - findAll() 方法在 Hibernate 中给出空结果集

> ID：12563182
> 
> 赞同：3
> 
> 时间：2012-09-24T10:30:06.703
> 
> 标签：hibernate, jpa-2.0

在hibernate中，我使用`findById()`了`findAll()`Dao层。`findById()`方法按我的预期工作，但`findAll()`总是返回空结果集，我仍然无法弄清楚原因，任何人都可以帮助我解决这个问题，

注意：没有例外，只返回空列表

这是我的代码

查找全部方法

```
 public List<T> findAll() {
        Query query = getSession().createQuery("SELECT obj FROM " + persistentClass.getSimpleName() + " obj");
        return query.list()
    } 
```

按 ID 查找方法

```
public T findById(Long id) {
        T result = (T) getSession().get(getPersistentClass(), id);
        return result;
    } 
```

获取会话方法

```
protected Session getSession() {
        if (session == null)
            session = tenantBasedSessionFactory.getTenantBasedSession("tenantId");
//            throw new IllegalStateException("Session has not been set on DAO before usage");
        return session;
    } 
```

提前谢谢你干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T10:18:47.523

假设实体名称准确且数据存在，我看不出有任何问题，但是您是否已经尝试过简写法？

```
Query query = getSession().createQuery("FROM " + persistentClass.getSimpleName()); 
```

我发现最好阅读简单的“获取所有”查询，因为如果只返回一个实体，则不需要任何别名。

# java - 尝试编译基于 Maven 的应用程序时出错

> ID：12563186
> 
> 赞同：4
> 
> 时间：2012-09-24T10:30:21.897
> 
> 标签：java, eclipse, jakarta-ee, maven

在尝试编译我的基于 Maven 的 Web 应用程序时出现以下错误/异常......任何人都可以帮忙。使用 Eclipse 靛蓝编辑器

提前致谢。

```
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Ilex 2.3.08.01
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.312s
[INFO] Finished at: Mon Sep 24 15:27:58 UZT 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project ilex: Could not resolve dependencies for project com.ilex:ilex:war:2.3.08.01: Failed to collect dependencies for [log4j:log4j:jar:1.2.16 (compile), commons-dbcp:commons-dbcp:jar:1.3 (compile), commons-dbutils:commons-dbutils:jar:1.3 (compile), commons-pool:commons-pool:jar:1.5.1 (compile), com.sun.xml.bind:jaxb-xjc:jar:2.2.2 (compile), struts:struts:jar:1.1 (compile), com.mind:mind-common-framework:jar:1.3.1 (compile), com.lowagie:itext:jar:2.1.7 (compile), com.lowagie:itext-rtf:jar:2.1.7 (compile), org.directwebremoting:dwr:jar:2.0.2 (compile), mysql:mysql-connector-java:jar:5.0.4 (provided), java4less:java4less:jar:1.0.0 (compile), jfree:jfreechart:jar:1.0.1 (compile), net.sourceforge.jtds:jtds:jar:1.2.4 (provided), jstl:jstl:jar:1.2 (compile), jasperreports:jasperreports:jar:3.1.0 (compile), javax.mail:mail:jar:1.4.1 (compile), net.sf.json-lib:json-lib:jar:jdk15:2.3 (compile), javax:javaee-api:jar:6.0 (provided), javax.activation:activation:jar:1.1 (compile), net.sf.flexjson:flexjson:jar:2.0 (compile), com.ilex:ilex-schemas:jar:1.0.0 (compile), commons-collections:commons-collections:jar:3.1 (compile), com.ilex:ilex-core-common:jar:1.0.0 (compile), com.ilex:ilex-core-dao:jar:1.0.0 (compile), com.ilex:ilex-core-logic:jar:1.0.0 (compile), com.sun.jersey:jersey-client:jar:1.6 (compile), org.apache.httpcomponents:httpclient:jar:4.0.1 (compile), org.apache.httpcomponents:httpmime:jar:4.2 (compile), org.apache.velocity:velocity:jar:1.6.2 (compile), commons-lang:commons-lang:jar:2.4 (compile)]: No versions available for commons-collections:commons-collections:jar:[2.1,) within specified range -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project ilex: Could not resolve dependencies for project com.ilex:ilex:war:2.3.08.01: Failed to collect dependencies for [log4j:log4j:jar:1.2.16 (compile), commons-dbcp:commons-dbcp:jar:1.3 (compile), commons-dbutils:commons-dbutils:jar:1.3 (compile), commons-pool:commons-pool:jar:1.5.1 (compile), com.sun.xml.bind:jaxb-xjc:jar:2.2.2 (compile), struts:struts:jar:1.1 (compile), com.mind:mind-common-framework:jar:1.3.1 (compile), com.lowagie:itext:jar:2.1.7 (compile), com.lowagie:itext-rtf:jar:2.1.7 (compile), org.directwebremoting:dwr:jar:2.0.2 (compile), mysql:mysql-connector-java:jar:5.0.4 (provided), java4less:java4less:jar:1.0.0 (compile), jfree:jfreechart:jar:1.0.1 (compile), net.sourceforge.jtds:jtds:jar:1.2.4 (provided), jstl:jstl:jar:1.2 (compile), jasperreports:jasperreports:jar:3.1.0 (compile), javax.mail:mail:jar:1.4.1 (compile), net.sf.json-lib:json-lib:jar:jdk15:2.3 (compile), javax:javaee-api:jar:6.0 (provided), javax.activation:activation:jar:1.1 (compile), net.sf.flexjson:flexjson:jar:2.0 (compile), com.ilex:ilex-schemas:jar:1.0.0 (compile), commons-collections:commons-collections:jar:3.1 (compile), com.ilex:ilex-core-common:jar:1.0.0 (compile), com.ilex:ilex-core-dao:jar:1.0.0 (compile), com.ilex:ilex-core-logic:jar:1.0.0 (compile), com.sun.jersey:jersey-client:jar:1.6 (compile), org.apache.httpcomponents:httpclient:jar:4.0.1 (compile), org.apache.httpcomponents:httpmime:jar:4.2 (compile), org.apache.velocity:velocity:jar:1.6.2 (compile), commons-lang:commons-lang:jar:2.4 (compile)]
    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:196)
    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies(LifecycleDependencyResolver.java:108)
    at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved(MojoExecutor.java:258)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:201)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project com.ilex:ilex:war:2.3.08.01: Failed to collect dependencies for [log4j:log4j:jar:1.2.16 (compile), commons-dbcp:commons-dbcp:jar:1.3 (compile), commons-dbutils:commons-dbutils:jar:1.3 (compile), commons-pool:commons-pool:jar:1.5.1 (compile), com.sun.xml.bind:jaxb-xjc:jar:2.2.2 (compile), struts:struts:jar:1.1 (compile), com.mind:mind-common-framework:jar:1.3.1 (compile), com.lowagie:itext:jar:2.1.7 (compile), com.lowagie:itext-rtf:jar:2.1.7 (compile), org.directwebremoting:dwr:jar:2.0.2 (compile), mysql:mysql-connector-java:jar:5.0.4 (provided), java4less:java4less:jar:1.0.0 (compile), jfree:jfreechart:jar:1.0.1 (compile), net.sourceforge.jtds:jtds:jar:1.2.4 (provided), jstl:jstl:jar:1.2 (compile), jasperreports:jasperreports:jar:3.1.0 (compile), javax.mail:mail:jar:1.4.1 (compile), net.sf.json-lib:json-lib:jar:jdk15:2.3 (compile), javax:javaee-api:jar:6.0 (provided), javax.activation:activation:jar:1.1 (compile), net.sf.flexjson:flexjson:jar:2.0 (compile), com.ilex:ilex-schemas:jar:1.0.0 (compile), commons-collections:commons-collections:jar:3.1 (compile), com.ilex:ilex-core-common:jar:1.0.0 (compile), com.ilex:ilex-core-dao:jar:1.0.0 (compile), com.ilex:ilex-core-logic:jar:1.0.0 (compile), com.sun.jersey:jersey-client:jar:1.6 (compile), org.apache.httpcomponents:httpclient:jar:4.0.1 (compile), org.apache.httpcomponents:httpmime:jar:4.2 (compile), org.apache.velocity:velocity:jar:1.6.2 (compile), commons-lang:commons-lang:jar:2.4 (compile)]
    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:139)
    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:171)
    ... 22 more
Caused by: org.sonatype.aether.collection.DependencyCollectionException: Failed to collect dependencies for [log4j:log4j:jar:1.2.16 (compile), commons-dbcp:commons-dbcp:jar:1.3 (compile), commons-dbutils:commons-dbutils:jar:1.3 (compile), commons-pool:commons-pool:jar:1.5.1 (compile), com.sun.xml.bind:jaxb-xjc:jar:2.2.2 (compile), struts:struts:jar:1.1 (compile), com.mind:mind-common-framework:jar:1.3.1 (compile), com.lowagie:itext:jar:2.1.7 (compile), com.lowagie:itext-rtf:jar:2.1.7 (compile), org.directwebremoting:dwr:jar:2.0.2 (compile), mysql:mysql-connector-java:jar:5.0.4 (provided), java4less:java4less:jar:1.0.0 (compile), jfree:jfreechart:jar:1.0.1 (compile), net.sourceforge.jtds:jtds:jar:1.2.4 (provided), jstl:jstl:jar:1.2 (compile), jasperreports:jasperreports:jar:3.1.0 (compile), javax.mail:mail:jar:1.4.1 (compile), net.sf.json-lib:json-lib:jar:jdk15:2.3 (compile), javax:javaee-api:jar:6.0 (provided), javax.activation:activation:jar:1.1 (compile), net.sf.flexjson:flexjson:jar:2.0 (compile), com.ilex:ilex-schemas:jar:1.0.0 (compile), commons-collections:commons-collections:jar:3.1 (compile), com.ilex:ilex-core-common:jar:1.0.0 (compile), com.ilex:ilex-core-dao:jar:1.0.0 (compile), com.ilex:ilex-core-logic:jar:1.0.0 (compile), com.sun.jersey:jersey-client:jar:1.6 (compile), org.apache.httpcomponents:httpclient:jar:4.0.1 (compile), org.apache.httpcomponents:httpmime:jar:4.2 (compile), org.apache.velocity:velocity:jar:1.6.2 (compile), commons-lang:commons-lang:jar:2.4 (compile)]
    at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:262)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.collectDependencies(DefaultRepositorySystem.java:345)
    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:131)
    ... 23 more
Caused by: org.sonatype.aether.resolution.VersionRangeResolutionException: No versions available for commons-collections:commons-collections:jar:[2.1,) within specified range
    at org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:384)
    at org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:533)
    at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:243)
    ... 25 more
[ERROR] 
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:39:54.930

由于您的构建正在运行，因此很可能是工作区的问题。切换到新工作区并重新配置您的项目。类似的[问题](https://stackoverflow.com/questions/12478041/maven-dependencies-are-not-copied-to-web-inf-lib-in-eclipse)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:35:11.590

重要的部分是

```
No versions available for commons-collections:commons-collections:jar:[2.1,) 
```

尝试`[2.1,)`用. `3.2.1`_ `pom.xml`我建议不要使用`[x.y,)`符号，因为如果新版本被破坏，它可能会破坏构建。

# c# - SAML WCF 网络服务

> ID：12563188
> 
> 赞同：0
> 
> 时间：2012-09-24T10:30:26.990
> 
> 标签：c#, wcf, wif, saml

我已经开始研究 WIF saml WCF 服务。我似乎已经按照我的想法进行了所有设置，安全服务、客户端令牌 WCF 服务等。当我运行调用 WCF 服务的网站时，它会弹出一个 Windows 卡空间对话框，并在 Windows 事件中出现以下错误日志。

> 传入策略验证失败。在策略 XML 中找不到有效的声明元素。
> 
> 附加信息：
> 在 System.Environment.get_StackTrace()
> 在 Microsoft.InfoCards.Diagnostics.InfoCardTrace.BuildMessage(InfoCardBaseException ie)
> 在 Microsoft.InfoCards.Diagnostics.InfoCardTrace.TraceAndLogException(Exception e)
> 在 Microsoft.InfoCards.Diagnostics.InfoCardTrace.ThrowHelperError(例外 e)
> 在 Microsoft.InfoCards.InfoCardPolicy.Validate()
> 在 Microsoft.InfoCards.Request.PreProcessRequest()
> 在 Microsoft.InfoCards.ClientUIRequest.PreProcessRequest()
> 在 Microsoft.InfoCards.Request.DoProcessRequest(String& extendedMessage)
> 在 Microsoft.InfoCards。 RequestFactory.ProcessNewRequest（Int32 parentRequestHandle，IntPtr rpcHandle，IntPtr inArgs，IntPtr& outArgs）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:15:36.387

从内存中，通过设置禁用 Cardspace：

```
ChannelFactory.Credentials.SupportInteractive = false 
```

# endianness - 浮点数的 endian.h

> ID：12563189
> 
> 赞同：1
> 
> 时间：2012-09-24T10:30:33.507
> 
> 标签：endianness

我正在尝试读取由大端机器编写的未格式化的二进制文件。我的机器是 32 位小端。我已经知道如何为不同的变量类型交换字节，但这是一项繁琐的工作。我发现这组函数[endian.h](http://linux.die.net/man/3/endian)可以很容易地处理整数交换。我想知道浮点数或字符串是否有类似的东西，或者我是否必须从头开始编程？因为对于这个字节顺序问题，它们作为整数的处理方式不同。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:45:45.553

我认为没有用于交换浮动的标准标题。您可以查看[http://www.gamedev.net/page/resources/_/technical/game-programming/writing-endian-independent-code-in-c-r2091](http://www.gamedev.net/page/resources/_/technical/game-programming/writing-endian-independent-code-in-c-r2091) ，它提供了一些有用的代码。

至于字符串，不需要进行字节序交换。字节序用于对变量的字节进行排序。字符串由一系列字符组成。每个字符只有一个字节，所以没有什么可以交换的。

# asp.net-mvc-3 - 将字典键传回查看

> ID：12563191
> 
> 赞同：0
> 
> 时间：2012-09-24T10:30:36.863
> 
> 标签：asp.net-mvc-3, c#-4.0

我已使用 viewbag 项将 DIctionary 传递给我的视图。

在我看来，我正在将他们转换回字典：

var date = veiwbag.Dictionary 作为字典；

我的字典设置为： Key = string of date ("MMM yyyy") eg - SEP 2012 value = int - 这是数据库中日期与键匹配的条目的计数。

我很乐意输出这些键值对。我需要知道如何当 suer 选择一个条目时，我可以将字符串 Key 返回到 aciton 方法以检索该字符串的所有日期。

我是 MVC3 的新手，所以有点迷茫。

我最初的想法是这样的：（这个语法可能有点像从记忆中做的那样）

```
<a href="(@Href("/Posts/Previous/"+ @date.Key))">@date.key (@date.value)</a> 
```

我的控制器有动作：

```
public ActionResult Previous(string date)
{
       ..work on data

      return View(..my results);

} 
```

ActionResult 中的代码很好。该链接将我带到我的 ActionResult 但字符串为空。我如何通过

```
date.key 
```

到 ActionResult 作为字符串变量？我会一直这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:39:00.950

如果您使用默认路由，请使用：

```
public ActionResult Previous(string id) 
```

或者您的链接必须如下所示：

```
/Posts/Previous?date=sometext 
```

但更好的解决方案是使用`@Html.ActionLink`：

```
@Html.ActionLink(String.Format("{0} ({1})", date.key, date.value), "Previous", "Posts", new { data = date.Key }, null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:40:02.387

您可以使用 HTML 帮助程序生成指向此控制器操作的正确链接：

```
@Html.ActionLink(
    string.Format("{0} ({1})", date.key, date.value), 
    "Previous", 
    new { date = date.Key }
) 
```

如果您还需要指定控制器名称，则可以使用以下重载：

```
@Html.ActionLink(
    string.Format("{0} ({1})", date.key, date.value), 
    "Previous", 
    "Posts",
    new { date = date.Key },
    null
) 
```

假设已经设置了默认路由，这将生成以下标记：

```
<a href="/Posts/Previous?date=SEP%202012">SEP 2012 (9)</a> 
```

并且当调用上一个控制器操作时，它将成功`date`传递`SEP 2012`.

# ruby-on-rails - 是否可以在heroku上运行的rails应用程序中删除url的.herokuapp部分

> ID：12563192
> 
> 赞同：4
> 
> 时间：2012-09-24T10:30:38.037
> 
> 标签：ruby-on-rails, url, heroku

你好奇妙的堆栈世界！

这是我第一次使用 Heroku 进行部署（目前我只是在使用他们的免费服务）。

我已将我的域设置为指向 Heroku 并重命名我的应用程序，一切正常。但是，我想更改的一件事是最终 url 的格式。

例如，输入后：

```
www.example.com 
```

页面加载并且 url 更改为：

```
example.herokuapp.com 
```

有什么办法可以改变这种行为，使 url 保持不变？

我尝试使用 Heroku 提供的帮助页面和各种搜索（通常与此问题标题类似的搜索），但我不确定我是否在搜索正确的内容，因为我似乎只得到不相关的结果。

在此先感谢您对此事的了解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:11:40.587

这听起来像是您的 DNS 域设置而不是 heroku 的问题。[在此处](https://devcenter.heroku.com/articles/custom-domains)阅读有关如何正确配置您的域以供 heroku 使用的信息。

当您应该设置 CNAME 或 A 记录时，听起来好像您正在对您的域进行某种“网络重定向”（每个托管服务提供商提供的自定义内容）。

哪个提供商托管您的域/您在哪里“购买”它？

# java - 通过代理java创建套接字

> ID：12563196
> 
> 赞同：1
> 
> 时间：2012-09-24T10:30:49.680
> 
> 标签：java, http, sockets, proxy

我已经编写了必须通过套接字使用http HEAD请求来查找文件大小的代码......我在我的家中尝试使用非代理连接它的工作......但是当我在我的大学尝试使用其IP的代理服务器时是 172.16.4.6 和端口 1117 它不工作......任何建议......谢谢。

```
public class Proxytesting {

    private static OutputStream os;
    private static InputStream in;
    private static BufferedReader reader;
    private static int Totalsize;

    public static void main(String[] args) {
        try {         

            URL url_of_file=new URL("http://www.stockvault.net/data/s/124348.jpg");

            String hostaddress=url_of_file.getHost();

            ////////////////////for proxy server ///////////////////
            String textip="172.16.4.7";
            InetAddress host=InetAddress.getByName(textip);
            System.out.println(host);
            int port=1117;

            SocketAddress ad=new InetSocketAddress(host, 1117);
            Proxy proxy = new Proxy(Proxy.Type.SOCKS, ad);

            Socket mysocket2 = new java.net.Socket();
            mysocket2.connect(new InetSocketAddress(hostaddress,80));

            System.out.println("Socket opened to " + hostaddress + "\n");
            String file=url_of_file.getFile();
            System.out.println(" file = "+file);
            os = mysocket2.getOutputStream();

            String headRequest = "HEAD " +url_of_file+" HTTP/1.1\r\n"
                     + "Host: "+ hostaddress +"\r\n\r\n";
            os.write(headRequest.getBytes());

            in = mysocket2.getInputStream();
            reader= new BufferedReader(new InputStreamReader(in));
            String contlength="Content-Length:";

            // 1\. Read the response header from server separately beforehand.
            String response;
            Totalsize = 0;
            do{ 
                response = reader.readLine();
                if(response.indexOf("Content-Length") > -1)
                {            
                    Totalsize = Integer.parseInt(response.substring(response.indexOf(' ')+1)); 
                    response = null;
                }
            }while(response != null);  

            System.out.println(" cont_lentht ##### == "+Totalsize);

    } catch (IOException ex) {
        Logger.getLogger(Proxytesting.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我得到的错误是：

```
Unknown host exception at for code [ mysocket2.connect(
    new InetSocketAddress(hostaddress,80));] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:25:57.837

你让自己的事情变得非常困难。使用[HttpURLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)通过代理连接：

```
HttpConnection conn = (HttpConnection) url_of_file.openConnection(proxy);
conn.setRequestMethod("HEAD");
Totalsize = conn.getContentLength(); 
```

还有其他 HTTP 客户端做得更好，但除非现有客户端不能满足您的需求，否则您不应创建自己的客户端！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:30:40.467

感谢评论中的线索。我找到了问题的解决方案。`InetSocketAddress`我使用错误的端口构建了两次的代码中有一个错误。完整的工作代码如下。

```
public class Proxytesting {
    private static OutputStream os;
    private static InputStream in;
    private static BufferedReader reader;
    private static int Totalsize;
    public static void main(String[] args) {
        try {         
            URL url_of_file=new URL("http://www.stockvault.net/data/s/124348.jpg");

            String hostaddress=url_of_file.getHost();
            ////////////////////for proxy server ///////////////////
            String textip="172.16.4.7";
            InetAddress host=InetAddress.getByName(textip);
            System.out.println(host);
            int port=1117;

            SocketAddress ad=new InetSocketAddress(host, 1117);
            Proxy proxy = new Proxy(Proxy.Type.SOCKS, ad);

            Socket mysocket2 = new java.net.Socket();
            mysocket2.connect(ad);

            System.out.println("Socket opened to " + hostaddress + "\n");
            String file=url_of_file.getFile();
            System.out.println(" file = "+file);
            os = mysocket2.getOutputStream();

            String headRequest = "HEAD " +url_of_file+" HTTP/1.1\r\n"
                     + "Host: "+ hostaddress +"\r\n\r\n";
            os.write(headRequest.getBytes());

            in = mysocket2.getInputStream();
            reader= new BufferedReader(new InputStreamReader(in));
            String contlength="Content-Length:";

            // 1\. Read the response header from server separately beforehand.
            String response;
            Totalsize = 0;
            do{ 
                response = reader.readLine();
                if(response.indexOf("Content-Length") > -1)
                {            
                    Totalsize = Integer.parseInt(response.substring(response.indexOf(' ')+1)); 
                    response = null;
                }
            }while(response != null);  

            System.out.println(" cont_lentht ##### == "+Totalsize);

    } catch (IOException ex) {
        Logger.getLogger(Proxytesting.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

# ios - iOS：如何在 iPad 上更改 MPMoviePlayerViewController 的方向？

> ID：12563197
> 
> 赞同：0
> 
> 时间：2012-09-24T10:30:57.140
> 
> 标签：ios, ipad, movieplayer

我正在开发一个以非常短的介绍视频开头的通用应用程序。所以我只需添加一个 MPMoviePlayerViewController 并以模态方式呈现它。即使我以横向模式播放视频，在 iPhone 上一切正常。但在 iPad 上，无论设备当前具有何种界面方向，视频始终以纵向模式播放。我搜索了几个小时并尝试了很多不同的东西，比如 CGAffineTransformation 或添加新视图，但似乎没有任何效果。这是我使用的代码：

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:videoName ofType:@"mp4"];
    NSURL *fileURL = [NSURL fileURLWithPath:filePath];  

    self.startupController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];
    [self.startupController.moviePlayer setControlStyle:MPMovieControlStyleNone];
    [self.startupController.moviePlayer setScalingMode:MPMovieScalingModeAspectFit];
    [self.startupController.moviePlayer setFullscreen:YES];        
    [self presentModalViewController:self.startupController animated:NO]; 
```

你知道我该如何解决这个问题吗？在我看来，这应该是 Apple 提供的一个简单功能，但有时最简单的事情是我最担心的事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:48:39.980

这是我的做法。首先，收听这个通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

然后实现这个：

```
- (void)detectOrientation {
    NSLog(@"handling orientation");
    [self setMoviePlayerViewOrientation:[[UIDevice currentDevice] orientation]];
}

- (void)setMoviePlayerViewOrientation:(UIDeviceOrientation)orientation {
if (lwvc != nil)
    return;
if (moviePlayerController.playbackState == MPMoviePlaybackStateStopped) return;
//Rotate the view!
CGFloat degree = 0;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.1];
switch (orientation) {
    case UIDeviceOrientationPortrait:
    case UIDeviceOrientationPortraitUpsideDown:
        degree = 0;
        moviePlayerController.view.bounds = CGRectMake(0, 0, 320, height);
        break;
    case UIDeviceOrientationLandscapeLeft:
        degree = 90;
        moviePlayerController.view.bounds = CGRectMake(0, 0, height, 320);
        break;
    case UIDeviceOrientationLandscapeRight:
        degree = -90;
        moviePlayerController.view.bounds = CGRectMake(0, 0, height, 320);
        break;
    default:
        break;
}
lastOrientation = orientation;
CGAffineTransform cgCTM = CGAffineTransformMakeRotation((degree) * M_PI / 180);
moviePlayerController.view.transform = cgCTM;
[UIView commitAnimations];
[[UIApplication sharedApplication] setStatusBarOrientation:orientation];
} 
```

所以诀窍就是使用转换

# ios - ios5 ios6 和 Twitter 集成

> ID：12563202
> 
> 赞同：0
> 
> 时间：2012-09-24T10:31:06.883
> 
> 标签：ios, ios5, twitter

*   我正在开发与 iOS5 和 iOS6 兼容的 iOS 应用程序（仅限 iPhone 应用程序）

*   我使用 XCODE 4.5 (4G182) 开发

*   该应用程序需要在 Twitter 上发布推文

*   对于 ios6 实现，我成功使用了 UIActivityViewController 类

*   对于 ios5 实现，我正在使用 Twitter.framework 中的 TWTweetComposeViewController，我正在使用以下代码（已在我使用以前的 XCODE 版本开发的以前的应用程序中使用并工作）

    ```
     TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
        tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result) {
            [self dismissModalViewControllerAnimated:YES];
        };

        NSString *textToShare = @"Tweet Example";
        [tweetSheet setInitialText:textToShare];
        [self presentModalViewController:tweetSheet animated:YES]; 
    ```

此代码显示标准 Twitter 面板，但在我按下发送按钮后，我收到带有以下消息的警报：

**无法发送推文**

**推文“推文示例”无法发送，因为与 Twitter 的连接失败。**

**[取消] [再试一次]**

我还尝试编译 Apple 示例应用程序“Tweetie”，并在 ios5 iPhone 上得到相同的结果，我在第一代 iPad (ios5.1) 上对其进行了测试，它似乎工作正常

有人有同样的问题吗？你有什么建议吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:36:24.707

解决了

*   我从我正在测试的 iPhone 上卸载了 twitter 应用程序

*   从设置中删除了 Twitter 帐户

*   再次安装推特

*   从设置中新登录的推特

然后一切都恢复正常

# mysql - 仅当自上次记录以来数据已更改时才将记录添加到表中

> ID：12563205
> 
> 赞同：1
> 
> 时间：2012-09-24T10:31:17.067
> 
> 标签：mysql, date, merge

我需要帮助来尝试找到一种仅在数据发生更改时才将数据添加到表中的有效方法。

我有第一个表，它是**最新**结果，只存储最新结果（每个团队编号 1）

```
TeamNumber(Primary) TeamScore TeamWorkUnits RecordDateTime
1 - 500 - 600 - 2012-09-22 08:20:00
2 - 400 - 6 - 2012-09-22 08:20:00
3 - 90 - 15 - 2012-09-22 08:20:00
4 - 1 - 0 - 2012-09-22 08:20:00 
```

另一个名为**HistoricResults**的表存储非常结果的副本，以防我将来需要它进行统计。

```
HisotryKey(Auto-Primary) TeamNumber TeamScore TeamWorkUnits RecordDateTime
1 - 1 500 - 600 - 2012-09-22 08:20:00
2 - 2 -400 - 6 - 2012-09-22 08:20:00
3 - 3- 90 - 15 - 2012-09-22 08:20:00
4 - 4 - 1 - 0 - 2012-09-22 08:20:00
5 - 1 490 - 600 - 2012-09-21 08:20:00
6 - 2 -300 - 6 - 2012-09-21 08:20:00
7 - 3- 40 - 15 - 2012-09-21 08:20:00
8 - 4 - 0 - 0 - 2012-09-21 08:20:00 
```

因此，仅当数据 TeamScore 或 TeamWorkUnits 自 RecordDateTime 的最后一条记录以来发生更改时，我才想将第一个表合并到第二个表中。

这意味着如果 TeamScore 和 TeamWorkUnits 相同，您将保留历史表中最旧的条目。

如果可能的话，我宁愿完全在 MySQL 中执行此操作以提高速度。

目前我需要每小时检查大约 100,000 条记录

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:04:53.090

您可以尝试这种方法：

```
insert into HistoricResults 
  (teamNumber, TeamScore, TeamWorkUnits, RecordDateTime)
  select
    lr.teamNumber, 
    lr.TeamScore, 
    lr.TeamWorkUnits,
    NOW()
  from
    LatestResults lr
  where 
    exists (
      select 
        *
      from
        HistoricResults hs
      where
        hs.teamNumber = lr.teamNumber and
        (hs.TeamScore != lr.TeamScore or hs.TeamWorkUnits != lr.TeamWorkUnits)
        and hs.RecordDateTime = (select max(RecordDateTime) 
                                 from HistoricResults hs1 
                                 where hs1.teamNumber = lr.teamNumber)
      order by RecordDateTime desc
    ) 
```

它应该是这样工作的：内部的子查询`exist`正在寻找与表记录有或不同`HistoricResults`的最新记录。如果找到这样的记录，则 external从中选择适当的记录，并将这些记录最终插入到.`TeamScore``TeamWorkUnits``LatestResults``select``LatestResults``HistoricResults`

# c#-4.0 - 使用泛型的名称生成器

> ID：12563215
> 
> 赞同：0
> 
> 时间：2012-09-24T10:31:52.947
> 
> 标签：c#-4.0, generics

我正在尝试根据对象的类型生成名称。在我的系统中，我有，

```
class Employee {}

Class ContractEmp:Employee{}

class Manager:Employee{} 
```

我正在尝试生成看起来像 ContractEmp1 的名称，其中 1 将来自增量器。我正在尝试使用泛型。

任何帮助

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:28:45.833

使用扩展方法，您可以执行以下操作：

```
public static class NameExtension
{
    private static Dictionary<string, int> counters = new Dictionary<string, int>();
    public static string MakeUpName<T>(this T @object)
    {
        var t = typeof(T);
        if ( ! counters.ContainsKey(t.FullName))
            counters[t.FullName] = 0;

        return t.Name + counters[t.FullName]++;
    }
} 
```

测试：

```
[TestFixture]
class NameTest
{
    [Test]
    public void test()
    {
        Console.WriteLine(new NameTest().MakeUpName());
        Console.WriteLine(new NameTest().MakeUpName());
        Console.WriteLine(new NameTest().MakeUpName());
        Console.WriteLine(new NameTest().MakeUpName());
    }
} 
```

输出：

> 名称
> 测试
> 0
> 名称测试1 名称测试2 名称测试3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:37:28.623

您可以在 Employee 类中使用私有静态 int，该类在每次构造函数调用时都会递增。将此数字与 typeof(this).Name 值相结合，您可以生成所描述的名称。请注意，计数器将对所有 Employee 扩展类计数，因此如果您想要每个 Employee 扩展类的连续数字列表，则应为每个扩展类实现一个特定的计数器。此外，每次应用程序重新启动时，计数器都将设置为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:41:37.050

```
public Class ContractEmp:Employee{
    private static int counter = 1;
    private String name = "";

    public ContractEmp() {
      name = typeof(this).Name + counter++;
    }
} 
```

像这样的东西应该工作！

# prestashop - prestashop 后台组合价格

> ID：12563216
> 
> 赞同：0
> 
> 时间：2012-09-24T10:31:59.247
> 
> 标签：prestashop

我是新手`prestashop`，我对数据库中的后台条目感到非常失望。我有不同的产品，有超过 40,000 种由自动生成的组合生成的组合。但是每种产品都有不同的价格和影响因产品而异。我在更新价格、编辑价格方面遇到问题，我必须手动或一个一个地做所有这些讨厌的事情。

这项工作浪费了大量时间来添加产品条目并为它们提供价格。有没有什么办法可以编辑，只更新具体价格的价格在`prestashop`自己生成所有可能的组合之后。

是否有任何软件或插件可以使这项工作更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:01:08.607

不幸的是 Prestashop 不处理具体的价格组合。你必须计算价格上涨。每次我们必须迁移数据时都会遇到同样的问题。我不建议您将主要产品价格设为 0，因为它会在 RSS 和某些模块上显示为 0。

# c# - 选中（或不选中）复选框时更改 ViewModel

> ID：12563220
> 
> 赞同：0
> 
> 时间：2012-09-24T10:32:17.757
> 
> 标签：c#, asp.net-mvc-3, viewmodel

伙计们！

我有这个 ViewModel：

```
public class ItemViewModel {
    [Display(Name="Has serie number?")]
    public bool HasSerieNumber { get; set; }
    public string SerieNumber { get; set; }
} 
```

我有这个观点：

```
@Html.LabelFor(item => item.HasSerieNumber);
@Html.CheckBoxFor(item => item.HasSerieNumber);

@Html.TextBoxFor(item => item.SerieNumber); 
```

而这个JS代码：

```
$('#HasSerieNumber').click(function() {
    if ($(this).is(':checked')) {
        $('#SerieNumber').show();   
    } else {
        $('#SerieNumber').hide();
    }
}); 
```

好吧，当我选中 HasSerieNumber 复选框时，会显示 SerieNumber 文本框。当我检查视图中的项目时，有没有办法触发/更改 HasSerieNumber 属性？这个想法是：当我选中复选框时，属性的值将被更改，我可以通过此属性控制文本框的可见性。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:47:14.963

因为该`HasSerieNumber`属性绑定到复选框，所以您的代码已经这样做了。当复选框被选中时，`HasSerieNumber`将被发送`true`到相应的控制器操作，当未选中时，它将被发送`false`。单击复选框时，您还可以有效地切换相应文本框的可见性。

所以只需将其包装在一个表格中：

```
@using (Html.BeginForm("SomeAction", "SomeController"))
{

    @Html.LabelFor(item => item.HasSerieNumber)
    @Html.CheckBoxFor(item => item.HasSerieNumber)

    @Html.TextBoxFor(item => item.SerieNumber)

    <button type="submit">OK</button>
} 
```

当表单提交到以下控制器操作时：

```
[HttpPost]
public ActionResult SomeAction(ItemViewModel model)
{
    ...
} 
```

由于默认模型绑定器，模型将从请求值正确绑定 -`HasSerieNumber`和`SerieNumber`属性将包含这些值。

# php - 如何使用 Facebook Graph Api Php 在上传的照片中标记用户的朋友？

> ID：12563221
> 
> 赞同：1
> 
> 时间：2012-09-24T10:32:25.910
> 
> 标签：php, facebook, facebook-graph-api, tags

我正在使用此代码但出现错误：（错误的参数）

```
$uid = $facebook->getUser(); 

      $friends = $facebook->api('/' . $uid . '/friends?limit=1');

    $tags[] = array('tag_uid' => $friends['data']['id'],
     'x' => '10',
     'y' => '10',
     ); 
```

我想在上传的照片中标记用户的任何朋友。为此，我应该有一个朋友的 uid，所以我用`$friends['data']['id']`它来获取 uid，但它不是一个有效的参数。

帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:48:23.860

首先，确保您的应用对用户帐户具有 publish_stream 权限

要标记朋友，您可以使用 POST 方法调用要标记的照片的标记连接。“tags”参数应该是一个标签对象数组

这是一个例子：

```
<photo_id>/tags=[{id:123,tag_text:friend1,x:10,y:20},{id:456,tag_text:friend2}] 
```

请注意，坐标不是强制性的。

另请注意，此功能旨在帮助用户在真实照片中标记他们的朋友。Facebook 可能会为您的应用程序禁用此功能，如果它鼓励在照片上标记人而不是他们不是

# wpf - 需要一个带有编辑模板的控件

> ID：12563230
> 
> 赞同：0
> 
> 时间：2012-09-24T10:33:10.077
> 
> 标签：wpf, listview, custom-controls

我正在开发一个自定义网格，例如从 ListView 继承的控件。我希望这个控件的每个单元格都有 2 种模式，编辑模式和普通模式，基于这些模式我将在 DefaultTemplate 和 EditingTemplate 之间切换。

我尝试在 ListView 中使用 DataGridCell 并在其 IsEditing 属性上应用触发器以在我的模板之间切换。但是没用。。

我可能必须创建一个自定义控件来实现这一点。如果是这样，请建议如何捕获编辑模式。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:58:54.607

我用 DataGrid 和 RowDetails 做到这一点

[DataGrid.RowDetailsTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowdetailstemplate.aspx)

# c# - 如何在我的 jQuery Datepicker 中使用其他日期格式？

> ID：12563231
> 
> 赞同：0
> 
> 时间：2012-09-24T10:33:10.873
> 
> 标签：c#, jquery, asp.net, jquery-ui-datepicker, date-format

我在我的 ASP.NET 应用程序中使用 jquery datepicker，如果用户来自西班牙或德国，我想使用其他日期格式。

这是我的jQuery代码：

```
$(function () {
    $("#txtAbwesenheitBis").datepicker();
    $("#format").change(function () {
        $("#txtAbwesenheitBis").datepicker("option", "dateFormat", $(this).val());
    });
}); 
```

我如何使用其他日期格式？或者我如何使用德语日期格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:37:42.200

[该文档](http://jqueryui.com/demos/datepicker/#localization)描述了如何本地化日历。

基本上，您只需包含适当的本地化脚本，您可以从 jQuery-ui 网站下载，例如：

```
<script type="text/javascript" src="/scripts/jquery.ui.datepicker-de.js'></script> 
```

并且您不需要指定 dateFormat 参数：适当的默认值将由本地化脚本设置。要支持多种语言，您可以执行以下操作：

```
<script type="text/javascript" src="/scripts/jquery.ui.datepicker-<% =MyLanguage %>.js'></script> 
```

此解决方案在弹出日历中为您提供本地化的月份和日期名称，以及与所选文化匹配的默认日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:35:53.083

像这样试试

```
$("#txtAbwesenheitBis").datepicker({ dateFormat :"dd.mm.yyy"}); 
```

德语格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:38:02.603

[这](http://docs.jquery.com/UI/Datepicker/formatDate)是一个链接，其中显示了可能的格式选项。只需使用描述构建所需的格式字符串。

**Upd：** 要根据标签值设置格式化字符串，您可以使用以下内容：

```
if($("#lbllanguagelabel").text() == "EN")
  { 
    $("#txtAbwesenheitBis").datepicker("option", "dateFormat", 'en-format-string'); 
  } else {
   ...
 } 
```

但请注意，如果您的标签具有 runat="server"，则其在客户端的 id 将与服务器端的不同，因此您应该使用`$("#<%=lbllanguagelabel.ClientID %>").text()`或者更简单地为它定义一些唯一的类：

```
<asp:lable id="lbllanguagelabel" runat="server" CssClass="languageLable"... 
```

和JS：

```
if($(".languageLable").text() == "EN")
      { 
        $("#txtAbwesenheitBis").datepicker("option", "dateFormat", 'en-format-string'); 
      } else {
       ...
     } 
```

# iphone - 如何将 NSMutableArray 的内容复制到 iPhone 应用程序中的另一个 NStArray？

> ID：12563232
> 
> 赞同：0
> 
> 时间：2012-09-24T10:33:13.853
> 
> 标签：iphone, nsmutablearray, nsarray

我有两个数组，一个是 NSMutableArray，一个是 NSArray 我想将 NSMutableArray 的内容存储在 NSArray 中，但它对我不起作用，会发送无法识别的选择器异常。

```
myArray=[[NSArray alloc] initWithArray:appDelegate.surveyAnswersScreenOne]; 
```

注意，`SurveyAnswerScreenOne`是一个`NSMutableArray`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:37:49.560

您可以通过多种方式做到这一点 -

```
NSArray * myArray = [appDelegate.surveyAnswersScreenOne copy];

NSArray * myArray = [NSArray arrayWithArray:appDelegate.surveyAnswersScreenOne];

NSArray * myArray = [[NSArray alloc]initWithArray:appDelegate.surveyAnswersScreenOne]; 
```

但首先你`appDelegate.surveyAnswersScreenOne`应该有对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:40:42.180

从我们在这里看到的情况来看，您的可变数组很可能是 nil。在您的应用程序委托中查看它的创建。如果创建正确，请检查它是否保留。它是一个强有力的参考吗？

```
@propery(nonatomic, strong) NSMutableArray *surveyAnswersScreenOne; 
```

一方面，我会使用方便的方法：

```
myArray = [NSArray arrayWithArray:appDelegate.surveyAnswersScreenOne]; 
```

如果surveyAnswersScreenOne 是一个有效的数组，可变的或其他的，这应该有效。尝试将其打印到控制台以确保。如果surveyAnswersScreenOne 为nil，这将返回空数组，其中alloc initWithArray 将失败。像这样检查你的可变数组。

```
NSLog(@"Mutable array is %@", appDelegate.surveyAnswersScreenOne); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:45:30.640

**你为你的对象做了对象`appDelegate`吗？**

```
appDelegate = (yourDelegateClass *)[[UIApplication sharedApplication]delegate]; 
```

如果是，那么其他答案应该有效！

```
myArray = [NSArray arrayWithArray:appDelegate.surveyAnswersScreenOne]; 
```

# visual-studio - 如何使用 Visual Studio Charts 绘制“Manhattan* Chart”？

> ID：12563239
> 
> 赞同：0
> 
> 时间：2012-09-24T10:33:43.773
> 
> 标签：visual-studio, charts, asp.net-charts

*这是我见过的用于我所追求的图表样式的名称 - 不确定这个名称有多“官方”。

我想要什么：

*   条形图
*   X - 星期几
*   Y - 项目数
*   Z - 周数，后退到图表中。

我不确定图表控件可以做到这一点，但我可能在控件的许多属性和设置中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:06:52.203

经过 pnuts 的提示。我已经在图表控件上阅读了更多内容......

![3d 条形图](../Images/cce5d337f98ce672a5fc73ebf0489806.png)

我创建了一个 3D 'Manhattan' 风格的图表。数据源选择包含 DayName、NumberOfOrders 和 WeekNo 等列的数据。

图表应关闭集群，您需要使用特殊的数据绑定方法。

```
Chart1.DataBindCrossTable(ds.GetYearsOrdersByDay, "WeekNo", "DayName", "NumberOfOrders", null); 
```

这会根据数据集和参数创建几个系列。

基本标记

```
<asp:Chart ID="Chart1" runat="server" Height="600px" Width="700px">
    <Series>

    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
            <Area3DStyle Enable3D="True" IsClustered="false"  Perspective="20"/>     
            <AxisY Interval="100"></AxisY>
            <AxisX IntervalOffset ="1.0" Interval ="1.0" >
                <MajorGrid Enabled="true" Interval="1.0" IntervalOffset="0.5" />
            </AxisX>
        </asp:ChartArea> 

    </ChartAreas>
    <Legends>
        <asp:Legend Name="Legend1" Title="Number of Orders">
        </asp:Legend>
    </Legends>
</asp:Chart> 
```

# django - DJangoCMS - 将菜单子项的数量输出到菜单模板

> ID：12563242
> 
> 赞同：2
> 
> 时间：2012-09-24T10:33:57.000
> 
> 标签：django, menu, navigation, parent-child, django-cms

在 DjangoCMS 中，我想在导航中显示一个页面的子节点数。

我有一个名为“Careers”的菜单项，如果站点树中的该页面中有 2 个子页面，我希望它显示“Careers (2)”。

这可能吗？

我可以在 menu.html 中定位正确的菜单项，但需要以某种方式动态生成数字。

```
{% if child.get_menu_title|slugify == "careers" %}<span>1</span>{% endif %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:29:19.380

我或多或少地确定，不用模型（我做不到）我用一些漂亮的 CSS 和 JavaScript 解决了这个问题。不是一个美妙的结果，但它已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:26:49.527

自己试过了，你可以这样做：

```
{% if child.children %} <span>{{ child.children|length }}</span>{% endif %} 
```

# java - method.invoke - java.lang.RuntimeException：java.lang.IllegalArgumentException：对象不是声明类的实例

> ID：12563244
> 
> 赞同：0
> 
> 时间：2012-09-24T10:33:57.750
> 
> 标签：java, reflection

任何想法？

尝试调用对象时出现错误。

```
R java.lang.RuntimeException: java.lang.IllegalArgumentException: object is not an instance of declaring class

 Caused by: java.lang.IllegalArgumentException: object is not an instance of declaring class
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java(Compiled Code))
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java(Compiled Code))
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled Code))
at java.lang.reflect.Method.invoke(Method.java(Compiled Code))
at com.test.corp.name.workflow.changetracking.changeimpl.FieldValueChange.apply(FieldValueChange.java:171) 
```

```
 public void apply(DomainContext context) {
    try {
        final Class entityClazz = Class.forName(entityClass);
        Object entity = context.getEntity( entityClazz, primaryKey);
        Object entityChange = context.getChangeEntity(entityClazz, primaryKey);
        Method setter = getSetterMethod(entityClazz,fieldName);

        if(entity!=null)
            setter.invoke(entity, new Object[]{getValue()}); //this line 171
        if(entityChange!=null)
            setter.invoke(entityChange, new Object[]{getValue()});

    }catch(Exception e) {
        throw new RuntimeException(e);
    }
} 
```

我认为这已经足够了，但仍然有错误，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:08:43.497

它说的`entity`是不属于类`entityClazz`。当您通过反射调用时，`setter.invoke`它当然期望该类的对象。

尝试输出`entity.getClass()`并`entityClazz`查看它们是否相同或至少`entityClazz`是`entity.getClass()`.

# tomcat - 无法查看 tomcat 的默认页面

> ID：12563246
> 
> 赞同：0
> 
> 时间：2012-09-24T10:34:02.900
> 
> 标签：tomcat

我安装了 apache tomcat 并在我的服务器上启动了该服务：

[root@RHEL-6 init.d]# ps -aux | grep -i tomcat 警告：语法错误，可能是假的“-”？请参阅 /usr/share/doc/procps-3.2.8/FAQ root 31281 3.0 1.2 3724272 99624 pts/0 Sl 06:08 0:03 /usr/java/jdk1.7.0_07/bin/java -Djava.util.logging .config.file=/usr/share/apache-tomcat-7.0.30/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/share /apache-tomcat-7.0.30/endorsed -classpath /usr/share/apache-tomcat-7.0.30/bin/bootstrap.jar:/usr/share/apache-tomcat-7.0.30/bin/tomcat-juli。 jar -Dcatalina.base=/usr/share/apache-tomcat-7.0.30 -Dcatalina.home=/usr/share/apache-tomcat-7.0.30 -Djava.io.tmpdir=/usr/share/apache-tomcat -7.0.30/temp org.apache.catalina.startup.Bootstrap 启动根 31326 0.0 0.0 103240 836 pts/0 S+ 06:10 0:00 grep -i tomcat

但我无法从本地机器访问该页面。它显示“找不到页面”

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:37:48.077

你输入端口号了吗？Tomcat 通常在端口 8080 上，所以试试

```
http://localhost:8080/ 
```

您可以在 [tomcat 文件夹]\conf\server.xml 中找到端口号

```
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" /> 
```

# jquery - 如何减少时间（从上午 9 点到下午 5 点）？时间选择器插件

> ID：12563255
> 
> 赞同：0
> 
> 时间：2012-09-24T10:34:19.750
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker, jquery-ui-timepicker

我使用[http://trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js](http://trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js)

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function(){
$('#time').datetimepicker({ showSecond: false,dateFormat: 'yy-mm-dd',timeFormat: 'hh:mm',minDate: new Date() });
});
</script> 
```

…………

```
<p><label for="id_time">Date:</label> <input type="text" name="time" id="time" /></p> 
```

…………

如何减少时间（从上午 9 点到下午 5 点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:36:37.037

[http://trentrichardson.com/examples/timepicker/#rest_examples](http://trentrichardson.com/examples/timepicker/#rest_examples)

```
$('#time').timepicker({
    ampm: true,
    hourMin: 9,
    hourMax: 17
}); 
```

# android - 安卓回购变更日志

> ID：12563256
> 
> 赞同：4
> 
> 时间：2012-09-24T10:34:21.243
> 
> 标签：android, sync, android-source, repository, changelog

我已经按照文档下载了带有 repo 的 android 源存储库。之后，我会定期与“repo sync”同步。这一切都很好。但是，我想获得不同同步之间最近更改的列表。怎么做？

提前致谢。

问候，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T04:52:18.570

您可以使用这个[repo changelog subcmd](https://github.com/sagiben/Android)。

然后，您可以运行以下命令：

```
repo sync -n
repo changelog --revisions='HEAD..aosp/master' 
repo sync 
```

# javascript - 限制输入字符并阻止用户输入

> ID：12563258
> 
> 赞同：1
> 
> 时间：2012-09-24T10:34:27.610
> 
> 标签：javascript, jquery, html, textarea

我希望用户在 textarea 中最多输入 5 行，每行最多 15 个字符。之后，用户应该能够防止按下除箭头、Del、Backspace 等之外的任何键。

这是我的函数，它接受每个文本区域的 TextareaId、事件和限制（我有 3 个具有不同字符限制的文本区域），我正在`event.preventDefault();`使用代码但它仍然允许用户添加更多字符

```
function charCountTextarea(textAreaId,event,limit)
{
  var code = (event.keyCode ? event.keyCode : event.which);
  var Length = $("#"+textAreaId).val().length;
  var t = $("#"+textAreaId)[0];
  var AmountLeft = limit - Length;
  var lineIndex = t.value.substr(0, t.selectionStart).split("\n").length-1;
  var t = $("#"+textAreaId).val().split("\n");
  var lineIndex = (t.length)-1

  var controlKeys = [8, 46, 37, 38,39,40];
  var isControlKey = controlKeys.join(",").match(new RegExp(event.which));

  if(lineIndex>4 && t[lineIndex].length>15) {
    if(isControlKey) {
      return;
    }
    else {
      console.log("prevent");
      event.preventDefault();
    }
  }

  if(AmountLeft<0) {
    if(isControlKey) {
      return;
    }
    else {
      console.log("preve 2");
      event.preventDefault();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:46:25.483

你可以简单地这样做：

```
var characters=500 //max characters

$("#MyTextArea").keyup(function(){
    if($(this).val().length > characters){
        $(this).val($(this).val().substr(0, characters));
    }
}); 
```

或者在你的代码中，而不是

```
event.preventDefault() 
```

使用：

```
$(this).val($(this).val().substr(0, characters)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:54:37.267

如果您不想使用 javascript，您可以简单地使用 'maxlength' 属性进行限制：

```
<textarea name="hard" maxlength='45'></textarea> 
```

# ruby-on-rails - Ruby on rails：线程执行和日志记录

> ID：12563259
> 
> 赞同：1
> 
> 时间：2012-09-24T10:34:32.930
> 
> 标签：ruby-on-rails, ruby, multithreading, activerecord

假设我有一个用户模型，当我创建一个新的用户模型时，我生成了一个新线程，该线程需要在创建用户后执行一些网络/后台任务。

```
def create
  @user = User.new(params[:user])

  collect_info_async(@user)

  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'User created.' }
    else
      format.html { render action: "new" }
    end
  end
end

def collect_info_async(user)
  Thread.new do
    logger.info "Thread starting" #Gets logged correctly

    #Do some network requests, perform calculations, etc.

    usr = User.find_by_id(user.id).update_attributes(:info => gathered_info)
    logger.info "Thread finishing"

   end
end 
```

当我创建一个新用户时，在日志中我看到“线程正在启​​动”，但在它真正完成的同时我没有看到“线程完成”。我必须从控制台执行 User.find 或在一段时间后刷新用户页面，然后我才能看到“线程完成”日志。那么异步任务什么时候真正完成呢？使用线程是正确的选择吗？我正在使用 Ruby 1.9.3 和 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:43:24.257

目前最好在 Rails 中为后台作业使用专用的工作进程，而不是使用线程。你可以使用 Sidekiq、Resque、delayed_job 等[。RailsCasts](http://railscasts.com/)有一些关于这些的很好的截屏视频。

实际上有一个很好的[RailsCast 关于 thread-safety](http://railscasts.com/episodes/365-thread-safety)。但是，您需要成为专业会员才能观看。

# nginx - 1 分 20 秒后 nginx 网关超时

> ID：12563263
> 
> 赞同：1
> 
> 时间：2012-09-24T10:34:43.117
> 
> 标签：nginx, timeout

我的 nginx 设置是这样的：

```
server {
    listen   80;
    server_name websitenamne.in www.websitename.in;

    root /root/path;

    location /static {
    }

location / {
    proxy_pass http://localhost:8003/;
    proxy_connect_timeout 3600;
    send_timeout 3600;
    proxy_read_timeout 3600;
    include /etc/nginx/proxy_params;
}

# what to serve if upstream is not available or crashes
error_page 500 502 503 504 /static/50x.html;
} 
```

在上面，在位置 /，我添加了这些东西：

```
 proxy_connect_timeout 3600;
    send_timeout 3600;
    proxy_read_timeout 3600; 
```

但仍然 nginx 发送网关超时错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:12:34.863

通常不可能将连接超时设置为超过操作系统重试 SYN 数据包传输的时间，通常为 75 秒，如[nginx 文档](http://nginx.org/r/proxy_connect_timeout)中所示。

# ajax - ANTS Performance Profile 是否能够跟踪 Web 应用程序中的 AJAX 调用？

> ID：12563267
> 
> 赞同：0
> 
> 时间：2012-09-24T10:35:03.137
> 
> 标签：ajax, red-gate-ants

我有一个 Web 应用程序，我在我的页面中使用 jQuery 使用简单的 AJAX 调用。我只是想知道 ANTS Performance Profiler 是否会跟踪 AJAX 调用并显示 AJAX 调用的结果也只是一种普通方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:23:10.987

如果您使用的是 ANTS Performance Profiler Pro 7.3+ 和除采样以外的分析模式，那么您将在调用树中看到 AJAX 调用的两个节点。一个节点将是实际请求的 HTTP 节点，第二个节点将是在单独的线程上运行的方法，该线程将数据提供给客户端。如果您还使用 MS SQL 或 Oracle，您还将在调用树和数据库视图中看到这些节点。

# jquery - 保存jquery数据表中输入元素的状态

> ID：12563273
> 
> 赞同：0
> 
> 时间：2012-09-24T10:35:21.073
> 
> 标签：jquery, datatables

我正在使用[Jquery 数据表](http://datatables.net/)。在我的数据表中有一些可编辑的字段，但是当我进行分页、排序或更改表的大小时，我丢失了我的更改。我在某处阅读以在表单中添加提交事件处理程序，但我的数据表不在表单内。请建议我的方式，以便即使在应用分页、排序等之后我也可以保留我的更改。

PS：我正在通过 ajax 调用填充数据

谢谢 $ 问候 Tarun Madaan

# javascript - 将 for 循环中的值传递给事件侦听器 - Javascript

> ID：12563277
> 
> 赞同：1
> 
> 时间：2012-09-24T10:35:27.330
> 
> 标签：javascript, google-maps, dom-events

> **可能重复：**
> [使用 Google Maps API v3 循环标记问题](https://stackoverflow.com/questions/2670356/looping-through-markers-with-google-maps-api-v3-problem)

我有一个循环，我从数组元素中提取一些数据，然后为每次迭代添加一个事件侦听器。但是我需要将这些值传递给每个关联的侦听器，但我最终在侦听器中只有最后一个数组项值。我试图从[“这个”](https://stackoverflow.com/questions/7809009/google-maps-event-listeners-not-working-properly-in-a-javascript-for-loop)中理解，但该解决方案似乎不适合我的情况，我很困惑。这是我拥有的代码：

```
for(var i=0;i<route.length;i++)
{
  var input= route[i];
  var sdata= input.split("@",19)
  //Some code
  google.maps.event.addListener(marker,'click',showiwindow);
}

function showiwindow(event)
{
  var input= event.latLng;
  //some code 
  ...
  document.getElementById('<%= lbl1.ClientID %>').innerHTML = sdata[1];
  document.getElementById('<%= lbl2.ClientID %>').innerHTML = sdata[2];
  document.getElementById('<%= lbl3.ClientID %>').innerHTML = sdata[3];
  document.getElementById('<%= lbl4.ClientID %>').innerHTML = sdata[4];     
  ......
} 
```

当我点击一个标记时，我只会得到最后一次迭代的值。回到那个链接中的解决方案，我如何将数组与迭代值一起传递给`i`. 请参考我的意思的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:58:13.000

这样的事情怎么样？

```
for(var i=0;i<route.length;i++)
{
  var input= route[i];
  var sdata= input.split("@",19)
  //Some code
  showiwindow(sdata);
}

function showiwindow(sdata)
{
  google.maps.event.addListener(marker,'click', function(event) {
    var input= event.latLng;
    //some code 
    ...
    document.getElementById('<%= lbl1.ClientID %>').innerHTML = sdata[1];
    document.getElementById('<%= lbl2.ClientID %>').innerHTML = sdata[2];
    document.getElementById('<%= lbl3.ClientID %>').innerHTML = sdata[3];
    document.getElementById('<%= lbl4.ClientID %>').innerHTML = sdata[4];     
    ......
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:02:54.953

感谢大家提供的各种链接。终于对如何处理有了清晰的认识：

```
for(var i=0;i<route.length;i++)
{
  var input= route[i];
  var sdata= input.split("@",19)
  //Some code
  google.maps.event.addListener(marker,'click',showiwindow(sdata));
}

function showiwindow(rdata)
{
  return function(){
  .....//some code
  document.getElementById('<%= lbl4.ClientID %>').innerHTML =rdata[4];
  .....
  };
} 
```

# javascript - 选择 preventDefault

> ID：12563278
> 
> 赞同：1
> 
> 时间：2012-09-24T10:35:34.740
> 
> 标签：javascript, android, cordova, jquery-mobile

我正在创建一个 Android 应用程序。总的来说，我想防止默认行为。所以我使用这个代码片段：

```
 document.ontouchmove = function(event){
    event.preventDefault();
} 
```

但是我使用的是多页模板。使用 Phonegap 和 Jquery Mobile。我想要一种仅在某些 div 上锁定默认行为的方法。另外我想知道是否有办法选择某些行为。例如，我想在某些页面上禁用水平滚动，同时保持垂直滚动。

任何人都有任何想法，或者可以告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T01:13:01.107

我没有对此进行测试，但我希望这会起作用：

```
document.ontouchmove=function(event){  
    if(event.srcElement.className=='donttouch'){
          event.preventDefault();
          // You probably will need to add event.stopPropagation() as well,
          // maybe before.
    } else {
         // Do your thing...
    }
} 
```

**注意**：上课可能不是最好的方法。数据会更好，因为类可以是动态的并且可能会出现问题。

# javascript - 椭圆化水平列表

> ID：12563280
> 
> 赞同：1
> 
> 时间：2012-09-24T10:35:59.997
> 
> 标签：javascript, html, css

我正在构建一个浏览系统，它包括通常的面包屑：

```
Home / dir1 / dir2 
```

面包屑列表是一个`<ul>`列表。但是当列表增长时，有必要对其进行椭圆化。完美的解决方案将以这种方式工作：

```
|-- Width of the container's div ---|
 / Home / my / long / list / of / directories / 
```

这将变成：

```
|-- Width of the container's div ---|
 / Home / (...) / of / directories / 
```

但我不知道我怎么能做到这一点。如果我尝试用 javascript 来做，我需要知道渲染列表的宽度，以便知道我是否必须省略它。听起来很棘手。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:39:03.553

您将很难使用 CSS 以您想要的方式做到这一点。

我相信有一个： text-overflow: ellipsis; CSS 设置，但不确定跨浏览器的可比性。

将其设置在容器上，它会为您提供 (...) 并将面包屑截断为容器的宽度。

Javascript 将允许您获取容器的宽度和列表的宽度，但恐怕我不知道您将如何去做。

# javascript - 获取推文 ID

> ID：12563282
> 
> 赞同：0
> 
> 时间：2012-09-24T10:36:12.947
> 
> 标签：javascript

> **可能重复：**
> [获取特定推文的推文 ID](https://stackoverflow.com/questions/6678403/getting-tweet-id-of-a-particular-tweet)

在我的网站上，我添加了一个 Tweet 按钮。我想要做的是每当用户单击该按钮并且推文发布在用户的推特帐户上时，我想捕获该推文的唯一 ID 并将其存储到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:40:07.223

推文 ID 应该在回调中...

[https://dev.twitter.com/docs/api/1.1/post/statuses/update](https://dev.twitter.com/docs/api/1.1/post/statuses/update)

底部的内容是返回给您的内容。

# xpages - 恢复调试器：调试循环期间出错：TypeError: firstViewRangeElement is null

> ID：12563285
> 
> 赞同：4
> 
> 时间：2012-09-24T10:36:18.160
> 
> 标签：xpages

我真的不知道为什么 firebug 在 Firefox 中预览 xpages 8.5.2 移动控件时显示此错误

“恢复调试器：调试循环期间出错：TypeError：firstViewRangeElement 为空”

如果您有任何解决此错误的想法，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T11:07:22.930

我相信这是一个 Firebug 错误（而不是与 XPages 相关的错误）。

尝试在 Google 上搜索“恢复调试器：调试循环期间出错”。

# wpf - 使用 Alpha 通道保存 PNG

> ID：12563286
> 
> 赞同：0
> 
> 时间：2012-09-24T10:36:18.847
> 
> 标签：wpf, png, save, alpha, channel

我正在尝试将 WriteableBitmap 保存为 png，但总是以 24 位图像（无 alpha 通道）结束。

```
WriteableBitmap image = new WriteableBitmap(100, 100, 600, 600, PixelFormats.Bgra32, null);
int stride = image.PixelWidth * image.Format.BitsPerPixel / 8;
image.WritePixels(new System.Windows.Int32Rect(0, 0, image.PixelWidth, image.PixelHeight), emptyArray, stride, 0);

FileStream filestream = new FileStream(imageSrc, FileMode.Create);
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create((image)));
encoder.Save(filestream); 
```

emptyArray 是一个所有像素为 (255, 0, 0, 0) 的数组，因此我可以测试保存是否有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:04:38.850

我设法找到了问题：文件在其他地方被更改并覆盖了初始图像。所以图像的初始保存工作正常。麻烦您了！

# iphone - CGContext 用两个具有不透明度的 UIColor 绘制

> ID：12563289
> 
> 赞同：0
> 
> 时间：2012-09-24T10:36:31.187
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cgcontext

我正在使用 CGContext 绘制一条线，颜色的透明度为 0.7，现在我想在前一行上绘制另一条具有相同透明度的另一种颜色的线。但是我将第二条线的颜色作为纯色，在两条线相交的部分没有任何透明度。对于第一行，我使用混合效果清除来绘制透明线，对于第二行，我使用混合效果颜色。请告诉我如何分别绘制这两条线，以便绘制的第二条线可以有自己单独的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:06:07.100

默认混合模式 ( `kCGBlendModeNormal`) 应该在这两种情况下都提供您想要的行为。

# iphone - iOS 上 PayPal 的 MPL 库的初始化实际上是一个阻塞过程吗？

> ID：12563290
> 
> 赞同：0
> 
> 时间：2012-09-24T10:36:32.433
> 
> 标签：iphone, ios, ipad, paypal

[此处](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_iPhone.pdf)适用于 iOS 的 PayPal 移动支付库的文档 指出，您有两个用于初始化库的选项。选项 1 是：

> “在需要时在主线程上初始化 PayPal 对象。每次调用 getPayButtonWithTarget 方法之前初始化库。这个实现很简单，因为它使用单线程编程模型。initializeWithAppID 调用是阻塞的，所以你的应用程序等待初始化完成。
> 要使用此方法，您可以使用一行代码： `[PayPal initializeWithAppID:appID];`"

但是，每当我在主线程上调用此函数时，我都会返回`STATUS_INPROGRESS`. 我别无选择，只能手动休眠，直到状态变为`STATUS_COMPLETED_SUCCESS.`

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:54:24.530

您可以
`[PayPal initializeWithAppID:appID]`在 的主线程中调用`ViewController`，但您需要等待 2-3 秒`Paypal`才能初始化信息，然后单击按钮进行支付。（如果您使用示例
`[[PayPal getPayPalInst] getPayButtonWithTarget:self...];`，您将看到按钮最初禁用，仅在 1-2 秒后启用（变为黄色）。如果您想
`- (IBAction)simplePayment{}`从主线程调用，则必须创建后台线程。类似线程：[iPhone PayPal初始化失败](https://stackoverflow.com/questions/8895456/iphone-paypal-init-failed)

```
-(void) viewDidAppear:(BOOL)animated {
   [super viewDidAppear:animated];
    [PayPal initializeWithAppID:@"APP-80W284485P519543T" forEnvironment:ENV_SANDBOX];
    [NSThread detachNewThreadSelector:@selector(checkInitStatusAndPay) toTarget:self withObject:nil];
}

-(void) checkInitStatusAndPay {

    while (TRUE) {
        PayPalInitializationStatus status = [PayPal initializationStatus];
        NSLog(@"status %u", status);
        if(status == STATUS_COMPLETED_SUCCESS) {

            [self performSelectorOnMainThread:@selector(simplePayment:) withObject:nil waitUntilDone:NO];
            break;
        }
    [NSThread sleepForTimeInterval:2];
    }
}

- (IBAction)simplePayment:(id)sender {

.... 
    [[PayPal getPayPalInst] checkoutWithPayment:payment];
} 
```

# javascript - 我可以在 Javascript 中集成音乐键吗

> ID：12563296
> 
> 赞同：2
> 
> 时间：2012-09-24T10:36:56.330
> 
> 标签：javascript, key-events

我认为答案是否定的，但我仍然想确定一下。我正在尝试以某种方式将媒体播放器键（在键盘上）集成到 javascript 函数中。作为一种迂回的方式，我找到了[Ubuntu Webapps Integration](http://developer.ubuntu.com/api/ubuntu-12.04/javascript/index.html)，但这只能在 Ubuntu 12.10 中运行。是否有适用于 Windows 的类似解决方案，或者没有自定义插件就不可能？

我也尝试过[JS KeyTest](http://unixpapa.com/js/testkey.html)，它没有返回任何音乐键的键码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:40:27.310

我刚刚使用我的 IBM 键盘在带有 FF 7 的 Windows 7 上进行了测试，它为`Stop`, `Play/Pause`, `Back`,返回以下内容`Forward`：

```
keydown  keyCode=178       which=178       charCode=0        
keypress keyCode=178       which=0         charCode=0        
keyup    keyCode=178       which=178       charCode=0        
keydown  keyCode=179       which=179       charCode=0        
keypress keyCode=179       which=0         charCode=0        
keyup    keyCode=179       which=179       charCode=0        
keydown  keyCode=177       which=177       charCode=0        
keypress keyCode=177       which=0         charCode=0        
keyup    keyCode=177       which=177       charCode=0        
keydown  keyCode=176       which=176       charCode=0        
keypress keyCode=176       which=0         charCode=0        
keyup    keyCode=176       which=176       charCode=0 
```

# android - 如何在eclipse中并行运行两个模拟器

> ID：12563299
> 
> 赞同：-3
> 
> 时间：2012-09-24T10:36:58.203
> 
> 标签：android, android-emulator

> **可能重复：**
> [在 android 中启动 2 个模拟器](https://stackoverflow.com/questions/4978179/starting-2-emulators-in-android)

当一个模拟器已经运行时，我无法启动第二个模拟器。实际上我想在两个模拟器上测试聊天应用程序。任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:39:02.270

打开您的 AVD 管理器（Eclipse -> 窗口 -> Android 虚拟设备管理器），选择一个 AVD 并按右侧的“开始”。

# .net - 如何从故障转储中确定导致错误的指令

> ID：12563300
> 
> 赞同：1
> 
> 时间：2012-09-24T10:37:00.463
> 
> 标签：.net, debugging, crash-dumps

当引发异常时，我为带有参数的 .NET 应用程序创建了一个小型转储

`MiniDumpNormal | MiniDumpWithProcessThreadData | MiniDumpWithThreadInfo | MiniDumpWithUnloadedModules`

这是提取托管调用堆栈所必需的（从[What is minimum MINIDUMP_TYPE set to dump native C++ process that hosts .net component to be able to use !clrstack in windbg](https://stackoverflow.com/questions/4851538/what-is-minimum-minidump-type-set-to-dump-native-c-process-that-hosts-net-com)）。迷你转储生成在异常过滤器中执行，如此处[所述](http://blogs.msdn.com/b/dondu/archive/2010/10/31/writing-minidumps-from-exceptions-in-c.aspx)

在 WinDBG 中的故障转储上执行`!dumpstack`时，可以看到类似

```
ChildEBP RetAddr  Caller,Callee
...
001dccc0 09b301a3 (MethodDesc 0x274268c +0x133 MyNameSpace.ErrorObject.FaultyMethod(Int32))
... 
```

如果我没记错的话，这意味着错误是在方法 FaultyMethod 中的偏移量 0x133 处生成的，其中 0x133 是 JIT 编译的机器代码中的偏移量。

如何将此偏移量转换回源代码或 IL 行号以识别导致异常的指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:00:29.747

您是否尝试过使用 windbg 中的[SOS.dll](http://msdn.microsoft.com/en-us/library/bb190764.aspx)对其进行调试？您可以使用该`CLRStack`命令获取托管代码堆栈跟踪。有关加载它的说明，请参阅[无法在 WinDbg 中加载 SOS 。](https://stackoverflow.com/questions/4373683/unable-to-load-sos-in-windbg)但是，正如您所说，`dumpstack`给出了指令偏移量。

要转换指令偏移量，一种笨重但可行的方法是将可疑程序集加载到 ILDASM 中，深入研究类和方法/属性并查看 IL。指令前面是 IL_XXXX，其中 XXXX 是从方法开始的十六进制偏移量。它不会为您提供确切的代码，但会为您提供更多信息，尤其是在方法调用方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:15:20.547

如果有人感兴趣，这是我解决问题的方法。它从添加`MiniDumpWithIndirectlyReferencedMemory`到`MiniDumpWriteDump`呼叫开始。这将导致包含堆栈上的指针引用的内存页面。尽管 MSDN 在我的测试中声明“此选项可以显着增加小型转储文件的大小”，但小型转储文件的大小增长不超过 100 KB。

现在，抛出异常的方法的编译机器代码在转储中可用。这种方式`!u`可以在 WinDBG/SOS 中用于反汇编代码。虽然这不完全是 IL 或源代码，但将机器代码指令与 IL/源代码匹配应该不会太难。[这篇博客文章](http://blogs.msdn.com/b/tess/archive/2006/05/18/601002.aspx)提供了一个如何做到这一点的示例。

# php - 电子商务方法的 PHP/MYSQL 解决方案

> ID：12563310
> 
> 赞同：1
> 
> 时间：2012-09-24T10:37:32.850
> 
> 标签：php, mysql

例如，假设用户购买`soap`了价格为`1.50`on的产品`20th sept 2012`。这已记录在带有和的`purchase`表下的数据库中。`productID``date`

假设在 2012 年 9 月 22 日，管理员将价格更改`soap`为`1.20`，现在报告价格因此而更改。

确保`1.50`为旧报告和`1.20`新报告存储旧数据的最佳方法是什么。`purchase`我应该在表格中插入所有数据，包括产品名称、产品价格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:58:00.060

您的问题的简单答案是肯定的。

对于金融系统，任何可能需要审计“交易”的系统都应该完整地存储在“文档”或“记录”中。

还有其他方法，例如使用“标志”（例如当前、已删除、已修改等）、“from_date”和“to_date”记录每次删除或修改，而不是实际删除或修改数据库中的数据，但这将使用更多服务器资源和编程不仅在 mySQL 中而且在 PHP 中都要复杂得多。但它允许您同时只提供记录之间的关系。

我的建议是保持简单并将所有需要的数据存储在一条记录中。如果需要对系统进行审核，您将更加安全，您将节省时间和合法地。

祝你好运，我希望它有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:44:01.443

我认为没有必要将产品名称存储在购买表中，但我认为应该存储产品价格。

此外，如果您不将产品名称存储在购买表中，则应注意删除产品。也许删除它们不是最好的主意，因此您应该将它们从商店中隐藏，但不要从数据库中删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:28:04.683

我通常将产品的价格与 productID 和日期一起存储在 purchase 表中，或者如果您可以在购物车中有多个项目，您将有一个 purchase 表和一个 purchase_product 表。这是如果您添加优惠券代码或其他类似的东西，您将始终能够看到该人在该特定购买中为该商品支付的费用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:37:22.133

我最近一直在研究与您描述的产品接近的产品。而且我相信您的答案取决于您愿意实施项目的复杂程度。最简单的方法是将产品信息存储在发票记录中。但随着时间的推移，这会导致冗余。

另一方面，您可以实施修订机制，以便随时跟踪记录的更改。这可以通过为您的记录使用两个 id 而不是一个来轻松完成。这是一个示例表：

```
CREATE TABLE IF NOT EXISTS `product` (
  `product_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `entity_id` bigint(20) unsigned NOT NULL,
  `name` varchar(255) NOT NULL,
  `price` double NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_id`),
  KEY `inx_entity_id` (`entity_id`)
) DEFAULT CHARSET=utf8 ; 
```

虽然`product_id`是您的普通自动增量 ID，但`entity_id`它是一个特殊的 ID，对于同一产品的所有记录都是相同的。在这种设计中，您永远不会删除记录，也不会更新它。您将始终只插入表中，当您需要获取产品列表时，您只需记住按`entity_id`顺序排列。产品信息可以在最大的记录中找到`product_id`。也许您可能想要创建一个实体表来跟踪`entity_id`s。

这种设计比将产品信息复制到发票更复杂。但它有很多很大的好处。就像您可以跟踪产品的价格变化一样。或者您可以使用外键来`product_id`指向产品的一个特定版本，或者使用`entity_id`来指示产品类型而不是它的某个特定版本。当然，它的复杂性会让你付出代价，但你可以判断它是否值得。

# ajax - 在 WebView 中从 AJAX Web 检索提交

> ID：12563311
> 
> 赞同：3
> 
> 时间：2012-09-24T10:37:35.143
> 
> 标签：ajax, macos, cocoa, webview

要检索用户密码，我在以下位置搜索它们：

`- (void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request frame:(WebFrame *)frame decisionListener:(id )listener`

当用户提交登录表单时，这会被调用。

但是，我遇到了以下网站：[商店](https://www.weltbild.de/1/account.startseite/loginseite-personalisierter-bereich.html)

在这里，当用户提交登录时，不会引发来自 WebPolicyDelegate 的事件。似乎没有任何动作发生。保存密码的方式适用于我测试过的所有其他网站（20+）。

Any1 知道这里发生了什么吗？当用户提交表单时，如何在此站点检索密码内容？

**更新**

由于[UIWebViewDelegate 没有监控 XMLHttpRequest，我现在收到了事件调用？](https://stackoverflow.com/questions/5353278/uiwebviewdelegate-not-monitoring-xmlhttprequest)，但是，我无法访问密码元素。我怎样才能找回它？

问题是`[actionInformation objectForKey:@"WebActionFormKey"];`内部调用`webView:decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:frame:decisionListener:`返回 nil

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:30:41.083

您要访问的页面使用 AJAX 登录。

然而，[WebPolicyDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html)仅在页面加载时调用。AJAX 调用不是典型的页面加载，地址栏中的 URL 在提交登录表单后仍然保持不变。总之，没有调用 WebPolicyDelegate，因为没有发生典型的导航操作。

# c# - 如何将 ListBox 的多个选定值添加到列表中？C#、ASP.NET 网站

> ID：12563321
> 
> 赞同：0
> 
> 时间：2012-09-24T10:38:21.867
> 
> 标签：c#, asp.net, list

我正在做我的第一个项目。我有一个列表框，可以在其中选择多个值，并且我想将每个选择（selectedItem.Text）添加到字符串列表中。

到目前为止，我正在做的是类似..

```
selectedItem = new List<string>();
 var value = lstpdfList.SelectedItem.Text;
 for (int i = 0; i < lstpdfList.SelectedValue.Count(); i++)
 {
  selectedItem.Add(value);
 } 
```

我真的很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:43:01.800

迭代 ListBox.Items 集合中的每个项目

```
foreach (ListItem  item in ListBox1.Items)
 {
  if (item.Selected)
  {
    selectedItem.Add(item.Text); // selectedImte.Add(item.Value);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:46:01.993

您可以将它们转换为字符串：

```
var selectedItems = listBox1.SelectedItems
    .Cast<string>()
    .ToList(); 
```

如果您在 ListBox 中填充了字符串以外的内容，只需转换为您需要的任何类型，如下所示：

```
var selectedItems = listBox1.SelectedItems
    .Cast<WhateverYourTypeIs>()
    .Select(item => item.ToString())
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:42:33.180

ListBox有[SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditems%28v=vs.100%29.aspx)属性，尝试遍历它。例如，如果您的 ListBox 中有字符串，那么您的代码可能如下所示：

```
selectedItem = new List<string>();
foreach (string value in lstpdfList.SelectedValues)
  selectedItem.Add(value); 
```

# java - java，苹果默认外观：如何设置按钮的颜色

> ID：12563322
> 
> 赞同：0
> 
> 时间：2012-09-24T10:38:22.447
> 
> 标签：java, macos, look-and-feel

我想知道如何使用苹果的外观和感觉设置按钮的颜色（例如，但我需要设置每个组件的颜色）。

我在 stackoverflow 中找到了一个建议更改为标准外观和感觉的答案，这对我有用，但我不想改变，因为我喜欢苹果的那个。

有什么解决办法吗？我知道这是因为我看到许多用 java 编写的应用程序都有彩色按钮，并且使用特定的样式或图像作为背景。

你能告诉我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:49:29.180

扩展 Jbutton 类并在其中覆盖 repaint() 方法并调用 setBackground(COLOR.ORANGE) 来更改按钮颜色。

现在使用这个类来创建你所有的按钮。如果您希望更改特定按钮的颜色，请在该特定按钮上调用 setBackground(COLOR.ORANGE) 方法。希望这可以帮助。看看下面的代码

```
package solutions;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class VerifierTest extends JFrame {

    private static final long serialVersionUID = 1L;

    public VerifierTest() {
        final JTextField tf = new JTextField("TextField1");

        getContentPane().add(tf, BorderLayout.NORTH);
        tf.setInputVerifier(new PassVerifier());

        final JTextField tf2 = new JTextField("TextField2");

        getContentPane().add(tf2, BorderLayout.SOUTH);
        tf2.setInputVerifier(new PassVerifier());

        final JButton b = new JButton("Button");
        b.setBackground(Color.ORANGE);
        b.setVerifyInputWhenFocusTarget(true);
        getContentPane().add(b, BorderLayout.EAST);
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (!tf.getInputVerifier().verify(tf)) {
                    JOptionPane.showMessageDialog(tf.getParent(), "illegal value: " + tf.getText(), "Illegal Value",
                            JOptionPane.ERROR_MESSAGE);
                }
                if (b.isFocusOwner()) {
                    System.out.println("Button clicked");
                }
            }
        });
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        Frame frame = new VerifierTest();
        frame.setSize(400, 200);
        frame.setVisible(true);
    }

    class PassVerifier extends InputVerifier {

        @Override
        public boolean verify(JComponent input) {
            final JTextField tf = (JTextField) input;
            String pass = tf.getText();
            if (pass.equals("Manish")) {
                return true;
            } else {
                return false;
            }
        }
    }
} 
```

注释“b.setBackground(Color.ORANGE);”行 看看有什么不同。

# asp.net-mvc-3 - 生产时 MvcSiteMapProvider 中的 NullReferenceException

> ID：12563326
> 
> 赞同：0
> 
> 时间：2012-09-24T10:38:43.643
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

问题是我经常在生产站点（ASP.NET MVC 3）收到错误，但无法在本地重现此错误。异常的文本是：

```
ExceptionType: System.NullReferenceException
Message: Object reference not set to an instance of an object.
StackTrace:
   at System.Collections.Specialized.NameObjectCollectionBase.BaseGetAllKeys()
   at System.Collections.Specialized.NameValueCollection.get_AllKeys()
   at MvcSiteMapProvider.MvcSiteMapNode.get_MetaAttributes()
   at MvcSiteMapProvider.Web.Html.SiteMapNodeModelMapper.MapToSiteMapNodeModel(SiteMapNode node, MvcSiteMapNode mvcNode, IDictionary`2 sourceMetadata)
   at MvcSiteMapProvider.Web.Html.SiteMapPathHelper.BuildModel(MvcSiteMapHtmlHelper helper, SiteMapNode startingNode)
   at MvcSiteMapProvider.Web.Html.SiteMapPathHelper.SiteMapPath(MvcSiteMapHtmlHelper helper, String templateName)
   at ASP._Page_Views_Shared__LoggedInLayout_cshtml.Execute() in c:\Solution\Sites\Project2Site\Views\Shared\_LoggedInLayout.cshtml:line 86
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.WebPages.WebPageBase.Write(HelperResult result)
   at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
   at System.Web.WebPages.WebPageBase.PopContext()
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

我在本地没有这样的错误。这是我调用`MvcSiteMap().SiteMapPath()`方法的地方：

![在此处输入图像描述](../Images/7dcfaad315d27cfa5e7e5e8bf6649f0e.png)

可能有人以前遇到过同样的问题。如果是这样，请分享您的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:35:27.330

这不会直接回答您的问题，但可以帮助您调试问题，因为它只发生在生产中而不是在开发/调试中。

考虑更换您的线路：

```
@Html.MvcSiteMap().SiteMapPath() 
```

有类似的东西：

```
@SafeBreadCrumb()

@helper SafeBreadCrumb() {
    MvcHtmlString output;
    try
    {
        output = Html.MvcSiteMap().SiteMapPath();
    }
    catch (Exception e)
    {
        output = new MvcHtmlString(e.Message);    
    }
    <text>@output</text>
} 
```

感觉有点脏，但总比抓到 MvcSiteMapProvider 的源头，再贴一些日志要容易！如果它发生在调试中，你不需要尝试这个。另外，这只是视图更改，因此不需要重新编译。

# c++ - 在 C++ / WRL 中使用静态方法创建 WinRT 组件

> ID：12563327
> 
> 赞同：2
> 
> 时间：2012-09-24T10:38:47.857
> 
> 标签：c++, windows-runtime, idl, wrl

我想使用**C++**和[**WRL**](http://msdn.microsoft.com/en-us/library/hh438466.aspx) **（Windows 运行时 C++ 模板库）创建一个WinRT**组件，以便通过 C# 静态方法调用在托管代码中使用。**[](http://msdn.microsoft.com/en-us/library/hh438466.aspx)**

 ****```
int sum = Math.FastAdd(5,6); 
```

对我不起作用的实现如下。
这里有什么问题？

1.  在**IDL**文件中创建一个*数学*类。它将是托管端静态方法的宿主。*使用FastAdd*方法创建*IMathStatics*接口。这个只包含一堆静态方法。*使用带有IMathStatics参数的****静态***属性标记*Math*类。

 *****```
    导入“inspectable.idl”；
    #define COMPONENT_VERSION 1.0
    命名空间 WRLNativeComponent
    {
        运行时类数学；
        [uuid(EFA9D613-BA8F-4F61-B9E7-C6BE7B7765DD)]
        [exclusiveto(WRLNativeComponent.Math)]
        [版本（COMPONENT_VERSION）]
        接口 IMathStatics : IInspectable
        {
            HRESULT FastAdd([in] int a, [in] int b, [out, retval] int* value);
        }
        [uuid(650438BA-C401-49E1-8F06-58DCD5A4B685), 版本(COMPONENT_VERSION)]
        接口 IMath : IInspectable
        {
            HRESULT InstanceMethod(void);
        }
        [静态（WRLNativeComponent.IMathStatics，COMPONENT_VERSION）]
        [版本（COMPONENT_VERSION），可激活（COMPONENT_VERSION）]
        运行时类数学
        {
            [默认] 接口 IMath；
        }
    }

```

1.  创建*MathStatics* C++ 类。让*InspectableClassStatic*宏指向*IMathStatics*字符串标识符。添加*ActivatableStaticOnlyFactory*宏以指向*MathStatics*类实现。

```
    #pragma 一次
    #include <wrl.h>
    #include "MyMath_h.h" // 从 IDL 生成
    使用命名空间 Microsoft::WRL；
    命名空间 WRLNativeComponent {
    数学类：公共 Microsoft::WRL::RuntimeClass，
        ABI::WRLNativeComponent::IMath>
    {
        InspectableClass(RuntimeClass_WRLNativeComponent_Math, BaseTrust);
    上市：
        数学（无效）{}
        〜数学（无效）{}
        STDMETHODIMP InstanceMethod() 覆盖
        {
            返回 S_OK；
        }
    };
    类 MathStatics : public Microsoft::WRL::ActivationFactory
    {
        InspectableClassStatic(InterfaceName_WRLNativeComponent_IMathStatics, BaseTrust);
    上市：
        数学静态（无效）{}
        〜数学（无效）{}
        STDMETHODIMP FastAdd(_In_ int a, _In_ int b, _Out_ int* value) 覆盖
        {
            if (value == nullptr) 返回 E_POINTER；
            *值 = a + b;
            返回 S_OK；
        }
    };
    可激活类（数学）；
    ActivatableStaticOnlyFactory(MathStatics);
    }

```

1.  编译后，将创建*WRLNativeComponent.winmd*文件。我可以看到具有*公共静态 FastAdd*方法的*Math*类。

**   构造 C# 客户端以调用静态方法。进行调用时，将引发**“System.InvalidCastException” 。**这有望正常工作。* 

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:23:56.650

一个运行时类最多可以有一个激活工厂。每次使用其中一个`Activatable`宏都会为运行时类型注册一个激活工厂。因此，您的库中的以下代码

```
ActivatableClass(Math);
ActivatableStaticOnlyFactory(MathStatics); 
```

尝试注册两个激活工厂：第一个为`Math`类注册一个简单的激活工厂，第二个注册另一个实际上不可用的简单激活工厂（我们马上就会看到原因）。

因为第一个简单的激活工厂与`Math`类相关联，所以当 C# 组件尝试调用静态成员函数时，它会被返回。然后，C# 组件尝试将此接口指针转换为`IMathStatics`简单激活工厂未实现的接口，因此转换失败，您将获得`InvalidCastException`.

* * *

由于给定的运行时类只能有一个激活工厂，因此您的`MathStatics`类需要同时实现`IMathStatics`静态成员接口和`IActivationFactory`用于默认构造的接口（这是必需的，因为您将`Math`类型声明为默认可构造，使用`activatable`属性没有工厂接口名称）。

您的激活工厂需要像这样实现：

```
class MathStatics : public ActivationFactory<IMathStatics>
{
    InspectableClassStatic(RuntimeClass_WRLNativeComponent_Math, BaseTrust);

public:

    MathStatics() {}
    ~MathStatics() {}

    STDMETHODIMP ActivateInstance(_Outptr_result_nullonfailure_ IInspectable** ppvObject) override
    {
        return MakeAndInitialize<Math>(ppvObject);
    }

    STDMETHODIMP FastAdd(_In_ int a, _In_ int b, _Out_ int* value) override
    {
        if (value == nullptr) return E_POINTER;
        *value = a + b;
        return S_OK;
    }
};

ActivatableClassWithFactory(Math, MathStatics); 
```

基`ActivationFactory`类模板提供了`IActivationFactory`接口的默认实现。`E_NOTIMPL`当客户端尝试默认构造该类型的实例时，此默认实现仅返回`Math`，因此我们需要重写此成员函数以实际默认构造一个`Math`对象。

请注意，当使用`InspectableClassStatic`完成`IInspectable`激活工厂的实现时，类名应该是运行时类的名称（在本例中为`RuntimeClass_WRLNativeComponent_Math`），而不是静态接口的名称。激活由类型名称执行，WRL 基础结构使用此名称来查找使用其名称的运行时类型的激活工厂。

`ActivatableClassWithFactory`用于向关联的激活工厂注册运行时类。**********

# asp.net-mvc-3 - Linq - 多行作为字符串

> ID：12563328
> 
> 赞同：0
> 
> 时间：2012-09-24T10:38:49.343
> 
> 标签：asp.net-mvc-3, linq

假设我有一个包含用户名的表和另一个包含名字的表。一个用户可以有多个名字：

如何获取包含用户名和所有以逗号分隔的名字的记录？

IE

```
Users
id | Username
1 | Test

Names
UserId | FirstName
1 | Mike
1 | John 
```

我想收到一份记录，其中包含

测试，“迈克，约翰”

我怎样才能做到这一点？

**编辑**：如果用户表将有更多我想要获得的列怎么办？

IE

```
id | Username | Status
1  | Test     | Active 
```

如何获得`Test, Active, "Mike, John"`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:47:54.693

您可以使用`GroupBy`和`String.Join`

```
var userGroups = from u in users
     join n in names
     on u.ID equals n.UserID
     group new{n, u} by n.UserID into UserGrp
     select new
     {
         Username = UserGrp.Key,
         Status = UserGrp.First().u.Status,
         Names = string.Join(",", UserGrp.Select(x => x.n.Name))
     };

foreach (var ug in userGroups)
   Console.WriteLine("{0}, {1}, \"{2}\"", ug.Username, ug.Status, ug.Names); 
```

# php - CodeIgniter - 教义 - DateDiff

> ID：12563333
> 
> 赞同：1
> 
> 时间：2012-09-24T10:39:00.763
> 
> 标签：php, mysql, codeigniter, doctrine, datediff

我一直想使用 MySQL DATEDIFF 功能，但我从未成功过。

我按照这里的教程：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html)

我已正确设置配置

```
$config = new Configuration;
$config->addCustomStringFunction('DATEDIFF', 'Project\ORM\MySql\DateDiff'); 
```

我还将文件放置到正确的位置。

目前，我的下库的路径是：

```
libraries
--Doctrine
--Project
----ORM
------MySql
---------DateDiff.php
--Doctrine.php 
```

我的 DateDiff.php 代码是：

```
class DateDiff extends FunctionNode
{
// (1)
public $firstDateExpression = null;
public $secondDateExpression = null;

public function parse(\Doctrine\ORM\Query\Parser $parser)
{
    $parser->match(Lexer::T_IDENTIFIER); // (2)
    $parser->match(Lexer::T_OPEN_PARENTHESIS); // (3)
    $this->firstDateExpression = $parser->ArithmeticPrimary(); // (4)
    $parser->match(Lexer::T_COMMA); // (5)
    $this->secondDateExpression = $parser->ArithmeticPrimary(); // (6)
    $parser->match(Lexer::T_CLOSE_PARENTHESIS); // (3)
}

public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
{
    return 'DATEDIFF(' .
        $this->firstDateExpression->dispatch($sqlWalker) . ', ' .
        $this->secondDateExpression->dispatch($sqlWalker) .
    ')'; // (7)
}
} 
```

这就是我试图抓住它的方式：

```
$this->doctrine->em->
createQuery('SELECT a FROM models\user_table a 
WHERE a.user_id = '.$user_id.' 
AND DATEDIFF(NOW(), a.created_at) < 1')
->getResult(); 
```

我基本上只是复制了食谱中写的内容。

但是，我无法让它工作，因为我的应用程序无法显示任何输出。没有错误。它就停在那里。

有人知道问题可能出在哪里吗？是路径问题吗？还是我没有正确调用它？

任何建议将不胜感激。

谢谢！

# php - flex php之间的通信

> ID：12563337
> 
> 赞同：0
> 
> 时间：2012-09-24T10:39:10.247
> 
> 标签：php, mysql, actionscript-3, flash-builder, mxml

这是我的第一个 flex 应用程序，我编写了一个 php 类，目的是从数据库中获取结果。该服务确实有效，但我很难让 Flash 列出结果，并且不明白如何从 Flash 中正确调用该函数。

继承人的PHP：

```
<?php
 class CityService {

  public function getCitys($q) {

  $con = mysqli_connect('host', 'user', 'password','database') or die(mysqli_connect_error());

  $sql="SELECT * FROM city WHERE countrycode ='".$q."'";

  $result = mysqli_query($con, $sql) or die('query Failed: ' . mysqli_error($con));

  $rows = array();
  while($row = mysqli_fetch_object($result)) {

      $rows[] = $row;

  }
  return $rows;
  }

}
?> 
```

然后我尝试在 flash 中选择函数并根据 $q 给出的值显示结果，但是 flash 不显示结果，当我设置服务时，它都显示它正在工作并且可以在生成器中返回结果但是当我尝试设置所有内容`mxml`然后运行它时，我什么也得不到

这是包含所有相关部分的 flash mxml 示例：

```
 <fx:Script><![CDATA[
    import com.adobe.serializers.utility.TypeUtility;
    import mx.controls.Alert;
    import mx.events.FlexEvent;

                    protected function button_clickHandler_100():void
    {
        currentState='data';
    }

        protected function dataGrid_creationCompleteHandler(event:FlexEvent):void
    {
        getCitysResult.token = cityservice.getCitys('GB');
    }
        ]]></fx:Script>

    <s:states>
      <s:State fc:color="0x0003a3" name="europe"/>
      <s:State name="data" fc:color="0x0081cc"/>
    </s:states>

      <fx:Declarations>
        <s:CallResponder id="getCitysResult"/>
        <cityservice:Cityservice id="cityservice" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" showBusyCursor="true"/>
      </fx:Declarations>

      <s:Button click="button_clickHandler_100()" id="button128" includeIn="europe" skinClass="components.englandButton" x="101" y="135"/>

      <mx:DataGrid includeIn="data" x="23" y="37" id="dataGrid" creationComplete="dataGrid_creationCompleteHandler(event)" dataProvider="{getCitysResult.lastResult}">
        <mx:columns>
          <mx:DataGridColumn headerText="citycode" dataField="citycode"/>
          <mx:DataGridColumn headerText="id" dataField="id"/>
          <mx:DataGridColumn headerText="countrycode" dataField="countrycode"/>
          <mx:DataGridColumn headerText="city" dataField="city"/>
        </mx:columns>
      </mx:DataGrid> 
```

我在这里错过了什么吗？除了设计层的其余部分，我是否正确地赋予了城市 php 服务的价值？我如何将 GB 绑定到按钮并以这种方式将其提供回城市功能？当我转到页面时，我也没有得到任何结果的主要问题？？？

这是动作脚本：

```
package services.cityservice
{

public class Cityservice extends _Super_Cityservice
{

 }

 } 
```

还有 getCitys 函数

```
package services.cityservice
 {
 import com.adobe.fiber.core.model_internal;
 import com.adobe.fiber.services.wrapper.RemoteObjectServiceWrapper;
 import com.adobe.serializers.utility.TypeUtility;
 import mx.rpc.AbstractOperation;
 import mx.rpc.AsyncToken;
 import mx.rpc.remoting.Operation;
 import mx.rpc.remoting.RemoteObject;
 import valueObjects.Citydata;

 import mx.collections.ItemResponder;
 import com.adobe.fiber.valueobjects.AvailablePropertyIterator;

 [ExcludeClass]
 internal class _Super_Cityservice extends com.adobe.fiber.services.wrapper.RemoteObjectServiceWrapper
 {      

// Constructor
public function _Super_Cityservice()
{
    // initialize service control
    _serviceControl = new mx.rpc.remoting.RemoteObject();

    var operations:Object = new Object();
    var operation:mx.rpc.remoting.Operation;

    operation = new mx.rpc.remoting.Operation(null, "getCitys");
     operation.resultElementType = valueObjects.Citydata;
    operations["getCitys"] = operation;

    valueObjects.Citydata._initRemoteClassAlias();

    _serviceControl.operations = operations;   
    _serviceControl.convertResultHandler = com.adobe.serializers.utility.TypeUtility.convertResultHandler;
    _serviceControl.source = "cityservice";
    _serviceControl.endpoint = "gateway.php";
    destination = "cityservice";

     model_internal::initialize();
}

   public function getCitys(q:Object) : mx.rpc.AsyncToken
{
    var _internal_operation:mx.rpc.AbstractOperation = _serviceControl.getOperation("getCitys");
    var _internal_token:mx.rpc.AsyncToken = _internal_operation.send(q) ;

    return _internal_token;
} 
```

# .net-4.0 - 为什么我的 .NET 4.5 项目不能使用为 .NET 4 编译的 DLL？（两者都使用 EF 5）

> ID：12563338
> 
> 赞同：0
> 
> 时间：2012-09-24T10:39:16.783
> 
> 标签：.net-4.0, asp.net-web-api, visual-studio-2012, .net-4.5, entity-framework-5

我有一个由客户端应用程序和 WebApi 网站组成的应用程序。

我的客户端是针对 .NET 4 的，这样我就不必坚持让用户安装 .NET 4.5。但是，我的网站完全在我的控制之下，所以我的目标是 .NET 4.5。

有一个共享程序集，我用于数据访问。它使用实体框架 5。

当我构建客户端应用程序时，使用的 DLL 版本是 4.4.xxx，而当我构建 Web 应用程序时，DLL 是 5.0.xxx。

到目前为止，我已经能够毫无问题地运行客户端应用程序，并且我也能够运行 Web 应用程序，再次没有问题。

但是，我现在从头开始重新创建了我的 Web 应用程序项目 (*)，但我突然无法运行它。我在第一次调用我的数据访问程序集时收到一条 YSOD，说“无法加载文件或程序集 'EntityFramework, Version=4.4.0.0 ...”。

现在，该错误的含义非常清楚 - 它找不到数据访问程序集使用的 v4.4 DLL - 但我不明白为什么我的新项目没有问题时会出现问题与我的旧项目。据我所知，每个项目都引用了相同的 DLL。

(*) 我应该解释为什么我要重新创建我的项目。我最初在 VS 2012 RC 中创建项目，后来升级到发布版本。尽管这据说升级了我的项目，但我遇到了一些问题，并且还注意到与新创建的项目的一些差异。所以，为了安全起见——并希望能规避那些其他问题——我正在从头开始重新创建它。

所以，我的问题是：为什么这突然成为一个问题，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:02:18.093

代码是否取决于设置为需要确切版本的程序集？如果是这样，您将需要EntityFramework 程序集的[发布者策略或引用应用程序（Web 项目）的](http://msdn.microsoft.com/en-us/library/06d2bae3.aspx)[bindingRedirect](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)。

# delphi - cxGrid 中类似 Outlook 的搜索

> ID：12563341
> 
> 赞同：0
> 
> 时间：2012-09-24T10:39:27.783
> 
> 标签：delphi, devexpress, tcxgrid

有没有人知道是否可以让[cxGrid](http://www.devexpress.com/Products/VCL/ExQuantumGrid/Index.xml)有一个搜索栏，就像在 Outlook 联系人中一样，您只需按一个字母并显示姓氏中带有该字母的第一个联系人？

我很想看到一个这样的例子，但到目前为止，我到处搜索都没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T20:41:02.553

You can enable de Filter bar in CxGrid doing the next steps:

At the Object Inspector you must change some properties

Step 1:

At the DBTableView.FilterRow property change:

```
DBTableView1 - FilterRow - ApplyChanges = fracImmedialety
DBTableView1 - FilterRow - Visible = True
DBTableView1 - FilterRow - InfoText = to add the text "Click here for filter creation (for substring search, begin with * character)" 
```

Step 2:

At the DBTableView.DataController property change:

```
DBTableView1 -DataController-Filter-PercentWildCards = * ( will put instead of percent a star)
DBTableView1 -DataController-Filter-Options-fcoCaseInsensitive = True (any register)

DBTableView1 -DataController-Filter-Options-fcoShowOperatorDescription = True 
```

# java - 如何在 windows server 2008 上通过 java 程序创建、挂载、卸载 VHD？

> ID：12563344
> 
> 赞同：0
> 
> 时间：2012-09-24T10:39:35.687
> 
> 标签：java, windows, java-native-interface, vhd

参考[VHD Java library](https://stackoverflow.com/questions/11354335/vhd-java-library)，我尝试使用`libguestfs`.. 但我无法让它工作。乍一看，它似乎不适用于 windows 环境。

但是对于尝试，我只停留在第一点，如何获取`com.redhat.et.libguestfs.*`类的 jar 文件。我的执行计划可能错了。请帮忙。

有没有更好的方法来实现我通过 java 程序创建、安装、卸载 VHD 的目标。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:11:19.767

包含该`com.redhat.et.libguestfs`包的 Java 绑定作为源代码分发 tarball 的一部分提供。这可以从[`libguestfs`下载页面](http://libguestfs.org/download/)获得；选择最新版本，当前[为 1.18.8](http://libguestfs.org/download/1.18-stable/libguestfs-1.18.8.tar.gz)。

或者，可以从 Maven 存储库中获得预编译的 JAR。

无论哪种方式，在 Windows 上，您可能都必须`libguestfs`自己编译本机库。

# python - 用python脚本截取打开的网站

> ID：12563350
> 
> 赞同：2
> 
> 时间：2012-09-24T10:40:08.300
> 
> 标签：python, browser, screenshot, screensaver, wxwidgets

我需要编写一个打开网站的python脚本，当网站完全打开时，它会截取打开的网站的屏幕截图。

我是这样写的：

```
import webbrowser
import wx

wx.App()
link = "http://stackoverflow.com/questions"
webbrowser.get('firefox %s').open_new_tab(link)
screen = wx.ScreenDC()
size = screen.GetSize()
bmp = wx.EmptyBitmap(size[0], size[1])
mem = wx.MemoryDC(bmp)
mem.Blit(0, 0, size[0], size[1], screen, 0, 0)
del mem
bmp.SaveFile('screenshot.png', wx.BITMAP_TYPE_PNG) 
```

它只会在 Firefox 中打开一个新选项卡，但不会对其进行截图:(

我希望解决方案是跨平台的。谢谢你的帮助：）

**编辑：**

**这里的主要问题是脚本必须在我的网页完全打开之前拍照。如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:51:06.940

我相信您需要针对不同操作系统的不同解决方案。用于[`sys.platform`](http://docs.python.org/library/sys.html#sys.platform)找出您在哪个平台上。其余的你必须自己弄清楚，但快速的互联网搜索显示：

*   在 Linux 系统上，您可以按照此处所述截取屏幕截图：

[通过 python 脚本截取屏幕截图。[Linux]](https://stackoverflow.com/questions/69645/take-a-screenshot-via-a-python-script-linux)

*   在 Windows 系统上，您可以将解决方案基于以下答案：

[在 Windows 上使用 python 截屏的最快方法](https://stackoverflow.com/questions/3586046/fastest-way-to-take-a-screenshot-with-python-on-windows)

*   在 Mac 系统上，这将有助于：

[在 Mac OS X 上用 Python 截屏](https://stackoverflow.com/questions/4524723/take-screenshot-in-python-on-mac-os-x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:50:55.620

根据[这个问题](https://stackoverflow.com/questions/2846947/get-screenshot-on-windows-with-python)，你应该可以使用[ImageGrab](http://www.pythonware.com/library/pil/handbook/imagegrab.htm)来截图。由于 ImageGrab 使用 PIL，这应该是跨平台的。[这](http://www.blendedtechnologies.com/quick-screenshots-script-python-pil/38)是一些示例代码，可帮助您上路

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:01:15.937

这个解决方案是相当跨平台的，但是如果你试图在桌面上显示一些带有菜单/工具栏等的网页打开......这不是你想要的。

您可以使用[SeleniumHQ](http://seleniumhq.org/)自动化您选择的浏览器，让该浏览器渲染页面，然后获取渲染页面的完整图像 - 即，不仅仅是屏幕上显示的页面部分的屏幕截图。然后，您可以相应地裁剪它。

# clojure - 使用 core.logic 列出唯一的 DAG 父级

> ID：12563351
> 
> 赞同：6
> 
> 时间：2012-09-24T10:40:24.320
> 
> 标签：clojure, logic-programming, clojure-core.logic, minikanren

这是一个（希望如此）简单的逻辑程序，我已经坚持了一段时间。

我有一个由 core.logic 中的边关系表示的 DAG，在生成父节点列表时，当我在图中有“菱形”时会得到重复（我不是在谈论循环）。

在这种情况下，有什么方法可以生成不同的父母列表（通过重写 parento 或类似方法）？

```
(defrel edge a b)
(fact edge :a :b)
(fact edge :a :c)
(fact edge :b :d)
(fact edge :c :d)

(defne parento [x y]
  ([x y] (edge y x))   
  ([x y] (fresh [z]
           (edge z x)
           (parento z y))))

(run* [q] (parento :d q))
;; => (:b :c :a :a) 
```

我想得到 (:b :c :a) 并且我想在 run* 语句中执行它（即将结果包装在一个集合中不是我的目标）。

此外，将“^:tabled”添加到 parento 似乎可以解决问题，但我不想要 tabled 引入的记忆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:34:07.713

如果您像之前那样为边定义单独的事实，那么在不离开关系编程的情况下就无法做到这一点。一种解决方案是简单地将整个结果列表传递给 Clojure 的 set 构造函数。另一种选择是在逻辑程序中一次处理所有节点。

查看针对此问题的现有 Prolog 解决方案并翻译您的发现可能会有所帮助。

# asp.net - 在不提供电子邮件 ID 和密码的情况下发送电子邮件

> ID：12563355
> 
> 赞同：-2
> 
> 时间：2012-09-24T10:40:32.120
> 
> 标签：asp.net

如何在不提供我的电子邮件 ID 和密码的情况下在 asp.net 中发送电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:42:05.617

通常，根据您的邮件服务器的安全程度，您可以将其添加到您的 Web 配置中：

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="192.168.0.1" port="25" />
      </smtp>
    </mailSettings>
  </system.net> 
```

这将只允许您通过该服务器发送电子邮件（将 IP 更改为您的邮件服务器），因为您喜欢的任何地址（电子邮件非常不安全）而无需凭据。

# java - 一种为给定数字打印出星号的方法

> ID：12563361
> 
> 赞同：-2
> 
> 时间：2012-09-24T10:40:53.553
> 
> 标签：java

我想知道如果我想编写一个代码来为我给出的值打印出一些星号，那么编码会是什么。

例如，如果我输入值 values: {3, 2, 1} 我会得到

* * *

** *

```
public void stars(int[] values) 
```

，这是我的代码的开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:46:58.633

```
 int count = 5;
    StringBuilder builder = new StringBuilder();
    for(int i = 0; i<count;i++)
    {
        builder.append("*");
    }
    System.out.println(builder.toString()); 
```

假设您希望数量`*`等于计数。

**更新：** 我想您可以在上述解决方案之上构建您的解决方案。我想你应该试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:54:59.770

只是为了好玩，肮脏的单行黑客：

```
public String repeatAsterisk(int number) {
    return new String(new char[number]).replaceAll(".", "*");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:45:00.280

就是这样：

```
public void print(int input) {
    for (int i = 0; i < input; i++) {
       System.out.print("*");
    }
} 
```

**通过评论编辑：**

```
public static void print(int[] input) {
    for (int inp : input) {
        for (int i = 0; i < inp; i++) {
            System.out.print("*");
        }
        System.out.print(" ");
    }
}

public static void main(String... args) {
    print(new int[]{2, 5});
} 
```

产生以下输出：

```
** ***** 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:50:31.413

要使用星号（*）填充字符`Arrays.fill()`：

```
public static void stars(int[] values) {
    for (int value: values) {
        char[] numberChars = new char[value];
        Arrays.fill(numberChars, '*');
        System.out.print(numberChars);
        System.out.print(" ");
    }

    System.out.println();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T10:52:45.480

```
for   
 1 = *           
 5 = ***** 
```

整数计数 = 5；

```
 for(int i=0;i<count;i++)
            {
                System.out.print("*");
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T10:55:57.920

```
public String numToAsterisk(int num) {
    StringBuilder sb = new StringBuilder(num);
    for (int i = 0; i < num; ++i) {
       sb.append("*");
    }
    return sb.toString();
} 
```

还是你想要这个？

```
public void stars(int[] values) {
    StringBuilder sb = new StringBuilder();

    for (int val : values) {
        for (int i = 0; i < val; ++i) {
            sb.append("*");
        }
        sb.append(" ");
    }

    System.out.println(sb.toString().trim());
} 
```

的输出`stars(new int[]{2, 4, 5});`将是`** **** *****`。

# mobile - 如何在电话间隙应用程序中获取用户的手机号码

> ID：12563362
> 
> 赞同：0
> 
> 时间：2012-09-24T10:40:53.567
> 
> 标签：mobile, cordova

有什么方法可以在电话间隙应用程序中获取用户的手机号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:56:42.413

您无法直接在phonegap中使用它，首先您应该找到如何在每个平台（ios，android，..）中执行此操作，然后使用phonegap-plugins您可以轻松地将它们集成到您的应用程序中。请注意，此解决方案是基于平台的提示：您所做的是违反苹果法律协议，如果您在应用程序中使用它，您将被苹果应用商店拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T09:30:36.307

[https://github.com/macdonst/TelephoneNumberPlugin](https://github.com/macdonst/TelephoneNumberPlugin)

我没有尝试过，但我认为它适用于 android 设备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T12:07:01.187

试试这个文档

[https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-contacts/index.html#navigatorcontactspickcontact](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-contacts/index.html#navigatorcontactspickcontact)

此代码 100% 工作正常

```
function onDeviceReady() {
    // Now safe to use device APIs
    window.addEventListener("batterystatus", onBatteryStatus, false);

    $("#contact").click(function () {
        navigator.contacts.pickContact(function (contact) {

            console.log('The following contact has been selected:' + JSON.stringify(contact));
            $("#contact_details").html('The following contact has been selected:' + JSON.stringify(contact.phoneNumbers));

        }, function (err) {
            console.log('Error: ' + err);
        });
    });

} 
```

# php - mysql + json + iphone + 网络服务

> ID：12563364
> 
> 赞同：2
> 
> 时间：2012-09-24T10:40:58.403
> 
> 标签：php, ios, json, web-services

我在 php 中创建了 web 服务。

现在我想在我的 ios 应用程序中调用该 Web 服务。

我正在使用 JSON 解析来获取数据。

但它向我展示了一些错误。

我的代码：

```
 SBJSON *json = [SBJSON new];
    json.humanReadable = YES;
    responseData = [[NSMutableData data] retain];

    NSString *service = @"/getLastUpdated";
    NSString *str;
    str = @"LastUpdated";

    NSString *requestString = [NSString stringWithFormat:@"{\"LastUpdated\":\"%@\"}",str];

   // [[NSUserDefaults standardUserDefaults] setValue:nil forKey:@"WRONGANSWER"];

    NSLog(@"request string:%@",requestString);
    NSData *requestData = [NSData dataWithBytes: [requestString UTF8String] length: [requestString length]];

    NSString *fileLoc = [[NSBundle mainBundle] pathForResource:@"URLName" ofType:@"plist"];
    NSDictionary *fileContents = [[NSDictionary alloc] initWithContentsOfFile:fileLoc];
    NSString *urlLoc = [fileContents objectForKey:@"URL"];
    urlLoc = [urlLoc stringByAppendingString:service];
    NSLog(@"URL : %@",urlLoc);

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: 
                                    [NSURL URLWithString: urlLoc]];  
    NSString *postLength = [NSString stringWithFormat:@"%d", [requestData length]];
    [request setHTTPMethod: @"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: requestData];

    NSError *respError = nil;
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: &respError ];

    if (respError) 
    {
        //        NSString *msg = [NSString stringWithFormat:@"Connection failed! Error - %@ %@",
        //                         [respError localizedDescription],
        //                         [[respError userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]]; 
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Sing It Say It" 
                                                            message:@"check your network connection" delegate:self cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
        [alertView show];
        [alertView release];

    } 
    else
    {
        NSString *responseString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];

        NSDictionary *results = [responseString JSONValue];
        NSLog(@"results=%@",results);
        NSString *extractUsers = [results objectForKey:@"d"];

        // NSDictionary *finalResult = [extractUsers JSONValue];
        NSLog(@"Final Result : %@",extractUsers);
        [[NSUserDefaults standardUserDefaults] setValue:@"YES" forKey:@"NAVIGATION"];
        [[NSUserDefaults standardUserDefaults] setValue:extractUsers forKey:@"NEWQUEID"];
    } 
```

错误 ：

```
2012-09-24 16:08:47.090 ACTEC_Webservice[3239:f803] -JSONValue failed. Error trace is: (
    "Error Domain=org.brautaset.JSON.ErrorDomain Code=3 \"Unrecognised leading character\" UserInfo=0x6865bc0 {NSLocalizedDescription=Unrecognised leading character}"
)
2012-09-24 16:08:47.091 ACTEC_Webservice[3239:f803] results=(null)
2012-09-24 16:08:47.092 ACTEC_Webservice[3239:f803] Final Result : (null) 
```

在响应字符串日志显示我这个值：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>404 - File or directory not found.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>404 - File or directory not found.</h2>
  <h3>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

请帮帮我。。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:54:44.327

该行：

```
NSDictionary *results = [responseString JSONValue]; 
```

抛出异常，因为`responseString`不是 json。它是 HTML。您需要阅读 HTML 以发现错误：

```
<h2>404 - File or directory not found.</h2>
<h3>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</h3> 
```

看来你有错误的网址。

太糟糕了，尽管`JSONValue`失败得如此不优雅。鉴于它确实如此，您将希望在生产代码中提供一些保护。在尝试解析之前以某种方式验证 json，或者实现异常处理程序。

# javascript - 避免 Node.js 服务器上的重复内容

> ID：12563367
> 
> 赞同：2
> 
> 时间：2012-09-24T10:41:09.617
> 
> 标签：javascript, node.js, express, md5, sha1

我有小型图像托管，我意识到有很多重复的内容。我想在未来通过使用校验和或哈希码来消除这个问题，与现有的图像哈希数据库相比，新上传的文件将被哈希，如果它已经存在则删除，并且用户将看到现有的图像链接。一站式服务

我的设置是准系统 Node.js+ [jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload) +2 个目录（一个用于论坛上传，另一个用于直接网络上传）。

考虑到每个目录中可能有数千或数百万个文件的可能性，对我来说最好的（快速和可靠的）哈希和数据库设置是什么？我认为 MD5 或 SHA1 太过分了，可能会占用大量资源。我想知道是否有更简单的解决方案。

**统计数据：**
每天上传~1,000 张图片
~400 kb 平均图片大小
~35,000 张服务器中的图片
~30% 重复内容（使用 MD5 测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:51:06.733

MD5 实际上非常快，对于您的用例来说已经足够快了。一个轶事基准在单个 CPU 上大约每秒 400 兆字节（[来源](https://stackoverflow.com/questions/2722943/is-calculating-an-md5-hash-less-cpu-intensive-than-sha-1-or-sha-2)）。它不会成为服务器处理的瓶颈，并且是检查重复文件的可靠方法。MD5容易受到碰撞攻击，但必须精心准备；偶然碰撞在统计上是不可能的。听起来碰撞在您的应用程序中不会成为太大的问题（但请确保无论如何处理它们）。

如果你真的只想要速度而不是可靠性，你可以选择 CRC。它不打算成为真正的哈希，只是为了检测字节流中的错误。它的碰撞率相对较高，约为百万分之一。但是，它的速度非常快。它旨在在路由器上的硬件中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:51:58.260

下面的方法怎么样：

*   当用户上传图片时，它会创建 MD5 和
*   然后使用该 MD5 和作为文件名存储图像
*   原始图像名称也存储在 FS 上，但作为指向 MD5 名称的符号链接。
*   如果用户上传的图像是重复的，那么您可以检查 MD5 名称是否已经存在并创建符号链接。

为了将现有图像转换为该结构，我确信一个相当简单的 shell 脚本使用`md5sum`,`mv`并且`ln -s`可以解决问题。

另一种可能性是使用 MongoDB 之类的东西将图像存储在数据库中，这可能更容易集群。

# android - Android Animate 库到按钮单击时的下一个图像

> ID：12563376
> 
> 赞同：0
> 
> 时间：2012-09-24T10:42:03.503
> 
> 标签：android, animation, gallery

我希望图库图像在单击按钮时来回动画。我使用了 setSelection 方法，但它只是滚动到下一个和上一个项目，没有任何动画。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:49:57.403

它是 Android Gallery 上的一个错误，已弃用。我曾经模拟一个用户Fling来实现动画。

```
int currentPosition = gal.getSelectedItemPosition();
    gallery.setSelection(currentPosition + 1);
    gallery.onFling(null, null, (float) (currentPosition + 1) * 1000, 0); 
```

# java - 学习 Apache Ofbiz？

> ID：12563377
> 
> 赞同：12
> 
> 时间：2012-09-24T10:42:03.867
> 
> 标签：java, erp, ofbiz

我是一名Java开发人员，我刚刚开始学习开源企业自动化软件apache ofbiz，我浏览了apache ofbiz官方网站上的教程，因为ERP本身就是一件大事，这需要时间来学习。

这个问题听起来像是一个新手问的问题，但是，任何人都可以建议有效地学习 Ofbiz 的正确流程（或说更好的方法），比如我应该从哪里开始，我的意思是我应该开始的主题序列或先决条件？

链接到一些解释基础知识的例子会很棒！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:41:20.337

你根据你想用它来学习它。Ofbiz 不能开箱即用。您需要对其进行一些自定义以满足您的需求。定制并不意味着编程，而是利用您需要的模块。所以第一个问题是你想用它做什么。并从那里移动。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-10T04:59:59.480

有许多资源可以帮助您学习 Apache OFBiz。

参考官网​​教程，了解基础知识： [OFBiz Tutorial - A Beginners Development Guide](https://cwiki.apache.org/confluence/display/OFBIZ/OFBiz+Tutorial+-+A+Beginners+Development+Guide)

[或在此处](https://vimeo.com/user2598348/videos/sort:alphabetic)的官方 Youtube 频道或[此处](https://www.youtube.com/user/ofbiz)的 Vimeo上参考相同的内容。

你也可以参考：

1.  [https://www.hotwaxsystems.com/ofbiz-tutorials/](https://www.hotwaxsystems.com/ofbiz-tutorials/)
2.  [Apache OFBiz 框架教程 -](https://www.youtube.com/playlist?list=PLOU-bf4QmR3zTxcjSiGtNOk09ngioyT4W)在 Youtube 频道[HotWaxU上开发企业应用程序播放列表](https://www.youtube.com/user/HotWaxU)
3.  Ruth Hoffman 的 Apache OFBiz 食谱
4.  Apache OFBiz 开发：Jonathon Wong、Rupert Howell 的初学者教程

尽管书籍解释了旧版本，但您仍然可以了解那里的基本架构。

如果您仍有疑问，可以[在此处](http://ofbiz.apache.org/mailing-lists.html)订阅官方邮件列表并向社区提问。

# gwt - 从 RequestContext 方法返回 Void

> ID：12563379
> 
> 赞同：0
> 
> 时间：2012-09-24T10:42:05.590
> 
> 标签：gwt, requestfactory

RequestContext 方法中存在的方法可以返回 void 吗？

如果我的 RequestContext 看起来像这样，

```
@Service( value = PersonUtil.class, locator = PersonLocator.class )
public interface PersonRequest extends RequestContext
{

    Request<void> testMethod( Long id );
    ......
} 
```

我收到此错误：

此行有多个标记 - 缺少该方法的返回类型 - 标记“void”上的语法错误，尺寸预计在之后

我们不能创建返回类型为 void 的方法吗？如果不是，为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:31:33.967

`void`就像`int`or之类的原始类型一样`boolean`，您不能将其用作类型参数。

就像您使用`Integer`而不是一样`int`，您将`Void`在此处使用 ( `java.lang.Void`)

# javascript - 如何使用 getElementsByName 方法在 javascript 中提交表单？

> ID：12563381
> 
> 赞同：3
> 
> 时间：2012-09-24T10:42:19.930
> 
> 标签：javascript, forms, submit, getelementsbytagname, getelementsbyname

我只是对某个场景感到好奇：

如果我想使用以下代码使用 getElementById 提交表单：

```
 document.getElementById("form_id").submit(); 
```

它工作正常。但是，在下面的代码中使用 getElementsByName 尝试类似的代码：

```
document.getElementsByName("form_name").submit(); 
```

不起作用，尽管只有一个具有此名称的元素：form_name。

**所以我的问题是？**

是否可以使用 getElementsByName 提交表单，或者我是否需要为所有表单提供 id。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T10:43:42.607

[`document.getElementsByName`返回一个数组](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)，因此您需要使用数组索引表示法访问它：

```
document.getElementsByName("form_name")[0].submit(); 
```

# cakephp-2.0 - 在 cakephp 中获取结果计数

> ID：12563383
> 
> 赞同：1
> 
> 时间：2012-09-24T10:42:36.457
> 
> 标签：cakephp-2.0

我想从数据库中获取记录数。

在我的表中，这是值：

```
id  emp_id  number  created_emp_id  status  timestamp
29  7   1   2   0   2012-09-24 15:18:28
30  16  1   2   0   2012-09-24 15:18:28
31  7   2   2   0   2012-09-24 15:18:54
32  19  2   2   0   2012-09-24 15:18:54 
```

我`created_emp_id`有`2`。

所以我需要她的结果是2。

这意味着这`number`是一个重复的列。

这是我为获得结果而编写的代码：

`$result = $this->TravancoDSRGroup->find('all', array('conditions' => array('created_emp_id= '.$emp_id),'fields' => array('DISTINCT TravancoDSRGroup.number')));`

仅返回两`$result`行。

但我需要得到这个查询的计数......

像...

`$dsrPageCnt = $this->TravancoDSRGroup->find('count',................`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:45:57.527

你可以试试这个：

```
$dsrPageCnt = $this->TravancoDSRGroup->find('count', array('conditions' => array('created_emp_id= '.$emp_id),'fields' => array('DISTINCT TravancoDSRGroup.number'))); 
```

[http://book.cakephp.org/1.3/view/1020/find-count](http://book.cakephp.org/1.3/view/1020/find-count)

# asp.net-mvc - ASP .Net MVC 中的 2 组自定义成员资格

> ID：12563384
> 
> 赞同：0
> 
> 时间：2012-09-24T10:42:48.867
> 
> 标签：asp.net-mvc, asp.net-membership

我可以很容易地设置自定义会员资格，但是如果我需要两套即控制面板管理员和登录客户注册怎么办。这意味着要从两个单独的表中获取用户。我的问题是如何将两者集成以通过 1 个自定义成员资格进行控制，以及如何在控制器上为 2 个进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:14:08.340

您不会以这种方式分隔用户，而是实现[自定义角色提供程序](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)并将这些角色分配给用户。因此，假设您创建了两个角色**admin**和**user**，您将为控制器设置一个属性，如下所示：

**管理页面控制器**

```
[Authorize(Roles = "Admin")]
public ActionResult AdminAction() { } 
```

**用户页面控制器**

```
[Authorize(Roles = "User")]
public ActionResult UserAction() { } 
```

如果您希望您的管理员查看所有登录的用户页面，您只需将**用户**角色分配给您的管理员。

# c# - 为什么接口成员不能是非公开的？

> ID：12563385
> 
> 赞同：4
> 
> 时间：2012-09-24T10:42:50.877
> 
> 标签：c#, interface, access-specifier

> **可能重复：**
> [C# 接口的非公共成员](https://stackoverflow.com/questions/17576/non-public-members-for-c-sharp-interfaces)

假设我有

```
internal interface IInterface
{
    int MyProperty { get; set; }
}

public class MyClass : IInterface
{
    internal int MyProperty
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }
} 
```

我明白了：

> *不实现接口成员；无法实现接口成员，因为它不是公共的；*

我知道解决方法是什么，**但我想知道为什么 C# 不让接口成员私有。**

很多时候，我希望我的课程遵循一种模式，但不必将成员公开，比如在我编写库时。最重要的是，接口本身不是公开的：X

注意：我不是在问如何实现私有接口成员，但我知道这个决定背后的设计逻辑。我找不到合适的副本。

**更新**：比原始线程更多，[这个来自另一个线程答案的代码示例](https://stackoverflow.com/a/7238707/661933)比大多数描述答案更好地解释了它。甚至更好，来自[@JonSkeet](https://stackoverflow.com/a/11162397/661933)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:45:38.763

接口用于定义合同，通过将字段/方法设为私有，那么使用接口实际上没有意义。客户如何知道如何使用合同？除非你真的需要一个抽象类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:46:27.827

接口的意义在于它们提供了一个契约，其他对象可以使用它来与您的对象进行通信。将成员设为私有没有意义，因为它不再有用

# javascript - 没有可调整大小的对话框 jquery

> ID：12563388
> 
> 赞同：0
> 
> 时间：2012-09-24T10:43:09.837
> 
> 标签：javascript, jquery, jquery-ui

我已经在我的应用程序中使用了许多对话框。但现在，我不想再使用可调整大小的功能了。

我知道“ *resizable: false* ”会关闭这个功能。但是，如何只使用一次而不在每个对话框构造函数中逐一使用呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:46:00.393

您可以对 jQuery UI 的选项进行原型设计：

```
$.extend($.ui.dialog.prototype.options, {
    resizable: false,
}); 
```

# django - 服务器间通信

> ID：12563392
> 
> 赞同：2
> 
> 时间：2012-09-24T10:43:25.723
> 
> 标签：django, nginx

我有一个使用不同服务器的 Django 应用程序。

-> 首先我收到请求，我需要向我的身份验证服务器验证它

-> 在 Log Server 中转储请求数据

-> 处理请求并从不同的数据库服务器获取数据

-> 响应请求

-> 将响应数据转储到日志服务器

每个服务器（身份验证服务器、日志服务器......）基本上都是 Django 服务。

**进行这种交流的最佳方式是什么。显然 HTTP 请求和响应会花费很长时间。服务一个请求会产生超过 5-6 个新的 HTTP 请求和响应。**

我可以有任何方式（适用于 Django）直接调用其他服务器的方法（比如身份验证服务器、日志服务器）

# java - 如何在 Java MongoDB 中访问 Collection 元素

> ID：12563395
> 
> 赞同：1
> 
> 时间：2012-09-24T10:43:30.730
> 
> 标签：java, mongodb, indexing

我是 Java Mongo DB 的新手。我必须存储大量数据。我打算将它存储在一个集合中。我对此毫无疑问。

1.  如何访问集合的元素？（例如：访问前 5 个元素或第 10 到第 15 个元素）

2.  是否可以使用索引访问第 n 个元素？（我希望索引仅用于对集合进行 asc 或 desc 排序）

3.  使用集合存储大量数据就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:15:34.377

1 Ans>对数据库结果的迭代器。因此，对集合执行 find() 查询会返回 DBCursor

```
 DBCursor cursor = collection.find( query );
 if( cursor.hasNext() )
     DBObject obj = cursor.next(); 
```

例如，要获取游标的第 10-15 个元素组成的数组，请使用

```
 List obj = collection.find( query ).skip( 10 ).limit( 5 ).toArray(); 
```

2 Ans> MongoDB 中的索引与您在 MySQL 中需要索引的情况相同。

3回答>是的

# c++ - HLSL 代码未注册？

> ID：12563398
> 
> 赞同：1
> 
> 时间：2012-09-24T10:43:48.820
> 
> 标签：c++, hlsl, directx-9

我要问一个比较笼统的问题。

我正在使用 VC++ 2010，使用着色器组件编写 Direct X9 应用程序。该程序编译得很好，它绘制了一个带灯光和纹理的正方形。问题在于，尽管程序的 c++ 端工作正常，并且更改照明颜色或纹理位置等更改工作正常，但对 .fx 文件的所有更改都被忽略了。实际上从指定目录中删除文件实际上对程序没有影响。

这是编译器问题吗？当然 HLSL 文件不是没用的，我的意思是我正在将变量传递给它，那么它们会去哪里？

main.cpp：mediafire.com/?9n4llrclcfohqfb

transform.fx：mediafire.com/?jqach463p2vcqhz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:52:22.137

着色器不会即时重新编译，因此如果您在程序运行时修改着色器代码，您需要再次调用 D3DXCreateEffectFromFile 来创建着色器的新编译实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:14:16.733

哇，这实际上是相当可耻的，原来我忘记在 D3DXCreateEffectFromFile 函数中编辑 .fx 文件的目录，所以我正在编辑的文件当然对应用程序没有影响。感谢大家的帮助。

# c# - WP7 XML 插入 GPX

> ID：12563399
> 
> 赞同：1
> 
> 时间：2012-09-24T10:43:49.657
> 
> 标签：c#, xml, windows-phone-7, gpx

在我的隔离存储中，我有一个名为 Route.gpx 的文件，它是使用以下代码创建的：

```
using (IsolatedStorageFileStream myStream = new IsolatedStorageFileStream("Route.gpx", FileMode.Create, myStore))
{
    XNamespace ns = "http://www.topografix.com/GPX/1/1";
    XNamespace xsiNs = "http://www.w3.org/2001/XMLSchema-instance";
    XDocument xDoc = new XDocument(
        new XDeclaration("1.0", "UTF-8", "no"),
        new XElement(ns + "gpx",
            new XAttribute(XNamespace.Xmlns + "xsi", xsiNs),
            new XAttribute(xsiNs + "schemaLocation",
                "http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),
            new XAttribute("creator", "XML tester"),
            new XAttribute("version", "1.1"),
            new XElement(ns + "trk",
                new XElement(ns + "trkseg",
                    new XElement(ns + "trkpt",
                        new XAttribute("lat", "7.0"),
                        new XAttribute("lon", "19.0"),
                        new XElement(ns + "time", DateTime.Now.ToString("yyyy-MM-ddThh:mm:ssZ", System.Globalization.CultureInfo.InvariantCulture))
                        )))));
    xDoc.Save(myStream); 
```

但是现在我想添加一个额外的`trkpt`元素，我尝试过使用以下代码：

```
XDocument doc1;
using (IsolatedStorageFileStream myStream = new IsolatedStorageFileStream("Route.gpx", FileMode.Open, myStore))
{
    doc1 = XDocument.Load(myStream);
}

var root = doc1.Element("trkseg");
var rows = root.Descendants("trkpt");
var lastRow = rows.Last();
lastRow.AddAfterSelf(
//XElement trkseg =
      new XElement("trkpt",
          new XElement("time", DateTime.Now.ToString("yyyy-MM-ddThh:mm:ssZ", System.Globalization.CultureInfo.InvariantCulture))));

using (IsolatedStorageFileStream myStream = new IsolatedStorageFileStream("Route.gpx", FileMode.Create, myStore))
{
    doc1.Save(myStream);
} 
```

我从[这里](https://stackoverflow.com/questions/7957066/add-an-element-to-an-xml-file-in-isolatedstorage)得到 的代码只是捕获一个异常然后按下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:13:01.463

您正在尝试将“trkseg”元素作为根对象的后代访问，而您在较低级别创建它。

尝试：

```
var root = doc1.Element("trk").Element("trkseg"); 
```

# php - XPath 评估查询并检索值

> ID：12563400
> 
> 赞同：2
> 
> 时间：2012-09-24T10:43:52.587
> 
> 标签：php, xml, xslt, xpath

我有这个代码

```
$XMLTranslationObject = new DOMDocument();
$XMLTranslationObject->load("../xdata/xml/translation/en-US/profile.xml");

$Xpath = new DOMXpath($XMLTranslationObject);
$Result = $Xpath->evaluate("Field[@Name = 'AttachedFiles']")->nodeValue;

echo $Result; 
```

和xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Translation language="en-US">

    <!-- Basic Begin -->
        <Field Name="SiteName">Brainfavor</Field>
        <Field Name="Error">Error</Field>
    <!-- Basic End -->

    <!-- Header Begin -->
        <Field Name="Name">Name</Field>
        <Field Name="WorkingAt">Working at</Field>
        <Field Name="Phone">Phone</Field> 
```

女巫给了我以下错误

注意：未定义的属性：C:\xampp\htdocs\brainbook\profile\loadmore.php 中第 30 行的 DOMNodeList::$nodeValue

我想要的只是检索字段名称所在行的值`AttachedFiles`，只需运行一个简单的 Xpath 查询并检索结果。使用 XSLT 很容易

```
<xsl:value-of select="$TranslationProfile/Field[@Name = 'AttachedFiles']"/> 
```

但我之前没有使用过 PHP Xpath。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:52:03.623

正确的公式是

```
$Xpath->evaluate("string(Field[@Name = 'AttachedFiles'])"); 
```

这是有效的，因为该[`string`](http://msdn.microsoft.com/en-us/library/ms256133.aspx)函数将节点集（在这种情况下实际上只包含一个节点）转换为集合中第一个节点的值。

警告：这意味着如果有多个元素与查询匹配，则只有第一个（按文档顺序）将返回其值。

# navigation - 如何在 QuadTree 上进行 A* 导航

> ID：12563401
> 
> 赞同：1
> 
> 时间：2012-09-24T10:43:57.757
> 
> 标签：navigation, path-finding, a-star, quadtree

我想在 QuadTree 上进行导航/A*。

我已经实现了四叉树，或者至少我认为是四叉树。同时，我看到了一些内部节点也包含元素的地方。使用我的内部节点仅链接到它们的子节点，并且元素存储在叶节点的集合中。虽然每个节点都链接到其父节点，但（当前）没有链接到邻居，也没有兄弟节点或其他分支的节点。元素是区域而不仅仅是点。

我在网格上也看过 A* 很长一段时间，甚至在 QuadTree 上也有过演示，但没有详细说明。

我想主要问题是我如何快速到达我的邻居？

我不确定我是否应该让叶子相互连接。但这将是一项艰巨的工作，因为随着元素更新它们的位置，树是动态的。它还需要一些用于链接的动态集合之王，因为根据节点大小，一个大叶子可以在一个方向（例如东）有很多小叶子。更新它的努力似乎相当巨大，即使目前不知道我会怎么做。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:19:00.000

A* 是一种用于查找从开始节点到结束节点的最短路径的算法。这在树中并没有多大意义，因为最短的路径总是从起点上升到[最不常见的祖先](http://en.wikipedia.org/wiki/Lowest_common_ancestor)，然后下降到终点。

如果由于某种原因您无法在树中找到终点，则必须将树视为普通图并进行广度优先搜索*（或 A*，如果您有某种启发式）*

> 我想主要问题是我如何快速到达我的邻居？

在树中存储一个指向每个节点的父节点的指针。然后可以通过查看其所有父节点的子节点来查看节点的兄弟节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:01:05.500

这是可能的，但肯定不是最佳的。A* 是在图形数据结构上完成的。其中“图形”意味着可以非常快速地访问节点 - 最好通过直接指针/引用。

[维基百科](http://en.wikipedia.org/wiki/Quadtree)上解释了通过四叉树获取邻居的正常方法- 因此，如果子条目在查询范围内，请递归检查。它也[已经实施](http://en.wikipedia.org/wiki/Quadtree)。

如果您还需要 A*，则可以反过来：使用普通图，在其上执行 A* 并[直接在图上](https://github.com/graphhopper/graphhopper/blob/master/src/main/java/de/jetsli/graph/storage/Location2IDQuadtree.java)实现最近邻搜索。

# javascript - MapReduce 的误解。

> ID：12563402
> 
> 赞同：1
> 
> 时间：2012-09-24T10:44:01.327
> 
> 标签：javascript, mongodb, mapreduce, mongodb-query

我正在编写我的第二个 mapReduce，以便从包含“活动”嵌套文档的集合中获取上周为每个用户播放的前十首歌曲，该文档包含一组 song_id、计数器和日期。计数器表示歌曲的“播放次数”。

我尝试使用 mapReduce，我能够完成此任务并仅使用“map”输出所需的结果，而无需减少发出的值。这是我使用的错误方法吗？这样做的最佳方法是什么。

## 这是地图功能：

```
var map = function() {
user_top_songs = [];
user_songs = [];
limit = 10;
if(this.activities !== undefined){
        key = {user_id:this.id};
        for (var i=0; i < this.activities.songs.length; i++){
            if (this.activities.songs !== undefined  && this.activities.songs[i].date.getDate() > (new Date().getDate()-7))
                user_songs.push([this.activities.songs[i].song_id, this.activities.songs[i].counter]);
        }
        if(user_songs.length !== 0){
            user_songs.sort(function(a,b){return b[1]-a[1]});
            if(user_songs.length < 10 )
                limit = user_songs.length;
            for(var j=0; j < limit; j++)
                user_top_songs.push(user_songs[j]);
        }
        value = {songs:user_top_songs};
        emit(key,value);
    }
} 
```

## 这是空的reduce方法：

```
var reduce = function(key, values) {}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:31:05.327

你不应该需要一个`reduce`函数。根据输入数据，这不是必需的，我将解释原因。

简而言之，在 MapReduce 中，mapper 函数获取输入并通过键将其拆分，然后将对传递`(key,value)`给 reducer。然后，reducer 将这些`(key, [list of values])`对聚合成一些有用的输出。

在您的情况下，`key`是用户 ID，值是他们听过的前 10 首歌曲。就数据的布局方式而言，它已经`(key,[list of values])`成对组织起来了。您已经拥有键，其中包含与之关联的每个值的列表。用户 ID 与他们听的每首歌曲一起列出，因此无需减少。

基本上，该`reduce`步骤是*将*每一`(user ID, song)`对组合成用户歌曲的列表。但这已经完成了。这是数据中固有的。因此，在这种特定情况下，映射器是完成您在这种情况下所需的唯一必要功能。

# android - 单击返回按钮时键盘关闭时的android事件

> ID：12563415
> 
> 赞同：0
> 
> 时间：2012-09-24T10:45:19.643
> 
> 标签：android, keyboard

在我的场景中，我有一个获得焦点的 EditText。当我使用后退按钮关闭键盘时，我想捕捉该事件并做一些事情，比如将焦点转移到另一个视图。

如何获得键盘关闭事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:56:49.490

软键盘有cabback。我已经使用了这个代码片段，实际上我忘记了从哪里:(

```
final View activityRootView = findViewById(R.id.loging_rootview);
        activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(
                new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        int heightDiff = activityRootView.getRootView()
                                .getHeight()
                            - activityRootView.getHeight();
                        if (heightDiff > 138) { // if more than 100 pixels, its
                            // probably a keyboard...

                            logo.setVisibility(View.GONE);
                        } else {

                            logo.setVisibility(View.VISIBLE);
                        }
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:57:02.760

您可以获得**返回**按钮

```
editText.setOnKeyListener(new View.OnKeyListener() {
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
// You can identify which key pressed buy checking keyCode value
// with KeyEvent.KEYCODE

   if (keyCode == KeyEvent.KEYCODE_ENTER && KeyEvent.ACTION_DOWN == vent.getAction())     {
          // YOUR CODE HERE
   }

   return false;
   }
}); 
```

**编辑 ：**

软键盘隐藏时不会发生任何事件。看到这个[问题](https://stackoverflow.com/questions/3793093/android-edittext-soft-keyboard-show-hide-event)将帮助你解决你的问题

# javascript - 局部视图无法正常工作

> ID：12563416
> 
> 赞同：0
> 
> 时间：2012-09-24T10:45:24.960
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我在每个 Div 中添加了评论链接。. 当用户单击该评论链接时，它会加载包含用于添加评论的控件组的部分视图。

我正在使用列表来显示记录，当用户单击评论按钮时，我使用部分视图来加载评论控件。

现在的问题是我只能为第一条记录添加评论我不能对其他记录添加评论......

什么问题？

请检查下图...

![在此处输入图像描述](../Images/9a72d22e414e1e62f30fc46eba5b9316.png)

这是部分视图中的代码，它在 DB 中添加评论并再次获取最新评论以查看以显示它。

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>

<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>

 <script src="../../Scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () 

        {
        var comment1 = $('#Comment').val();
        if (comment1 == '') {
            alert('Please enter a comment');
            return;
        }

            $.ajax({

                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',

                data:
                { 

                 'comments' : $('#Comment').val(), 
                 'EType' : @Html.Raw(Json.Encode(ViewBag.EType)), 
                  'EId' : @Html.Raw(Json.Encode(ViewBag.EId))

                },
                success: function (data) {

                                   $("p.p12").append('<button type="button" id=' + data.Id  + ' class="deleteComment2">Delete</button></div>')

                }

            });
        });
    });
</script> 
```

我使用下面的代码，当我点击删除按钮时......

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

    $('.deleteComment').live('click', function () {
        alert('Clicked');
    });

</script> 
```

现在，问题的总结是我附加了 div 并在该 div 中添加了一个按钮，我试图获取该按钮的单击事件，但我无法获取该事件。

当按钮在 Div 标记中添加运行时时，任何人都可以提供处理按钮单击事件的简单代码。

***这是 Darin Dimitrov 的更新代码***

```
@model  IEnumerable<CRMEntities.Comment>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

 <!DOCTYPE html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

   $(document).on('click', '.deleteComment', function() 
   {
    alert('comment deleted');    
});

$(document).ready(function () {
alert("Doc loaded");

});
​

</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $('#AddCommentButton').click(function () {

            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
        });
    });
</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");

        });
    });
</script>

</head>
<body>

@{

     <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" id = "@item.Id" class="deleteComment">Delete</button></span>

          <span class="EmpName"> @Html.ActionLink("Delete", "Delete", "Comment", new { id = item.Id }, new { @style = "color:#1A6690;" })</span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        <br />
            <a class="Delete222" style="cursor:move;display:none;">DeleteNew</a>
        <br />

        </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

    <div id="comments22">
    <input type="button" class="deleteComment" value="Delete" /><br/>
    <input type="button" class="deleteComment" value="Delete" /><br/>    
    <input type="button" class="deleteComment" value="Delete" /><br/>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:25:14.510

您已订阅 的点击事件 `#AddCommentButton`。但正如您所知，id 在整个 DOM 中必须是唯一的。你只能有 1 个元素`id="AddCommentButton"`。所以你应该为你的`Add Comment`按钮使用一个类选择器：

```
$('.addComment').click(...); 
```

和你的按钮：

```
<input type="button" value="Add Comment" class="addComment" /> 
```

我也希望你注意到[这个答案](https://stackoverflow.com/a/12561510/29407)。显然你没有，因为我仍然在你的视图中看到你硬编码 url 而不是使用帮助程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:30:06.520

嗨，你可以像这样得到你的删除事件，它在下面

```
 $(".lnkDelete").click(function (e) {
            e.preventDefault();
            var targeturl = $(this).attr("href");

 and you can pass that targert url to your delete button like this 

window.location.href = targeturl; 
```

我想这会对你有所帮助....

# c# - 如何使用 C# 在 SSAS 中测试与数据源的连接

> ID：12563417
> 
> 赞同：4
> 
> 时间：2012-09-24T10:45:25.223
> 
> 标签：c#, sql-server-2008-r2, ssas, smo, adomd.net

我在远程服务器上的 Analysis Services 中有一个数据库。这包含位于另一个远程服务器上的另一个数据库的数据源。

我正在尝试使用 C# 编写一个连接测试，它将检查两个数据库之间的数据库连接。

~~我一直无法使用 ADOMD.NET 做到这一点。我目前正在考虑使用 SMO 来做到这一点，但到目前为止我还没有运气。~~

~~我将不胜感激任何意见或建议。~~

**更新：**
经过进一步研究，我提出了以下测试（请注意，我打算稍后添加更多 try..catch 块和断言）。

此外，它使用*C:\Program Files\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.AnalysisServices.DLL*来访问 Server、Database 和 DataSource 类。

```
class ConnectivityTests
{
    // Variables
    String serverName = "";
    String databaseName = "";
    String dataSourceName = "";

    [Test]
    public void TestDataSourceConnection()
    {
        // Creates an instance of the Server
        Server server = new Server();
        server.Connect(serverName);

        // Gets the Database from the Server
        Database database = server.Databases[databaseName];

        // Get the DataSource from the Database
        DataSource dataSource = database.DataSources.FindByName(dataSourceName);

        // Attempt to open a connection to the dataSource.  Fail test if unsuccessful
        OleDbConnection connection = new OleDbConnection(dataSource.ConnectionString);
        try
        {
            connection.Open();
        }
        catch (OleDbException e)
        {
            Assert.Fail(e.ToString());
        }
        finally
        {
            connection.Close();
        }

    } 
```

我相信这个测试对于我的测试来说已经足够了（一旦我添加了更多的 try..catch 块和断言）。如果测试通过，这意味着我的机器和两台服务器之间没有连接问题，这意味着服务器之间不应该有任何连接问题。

但是，我一直无法弄清楚如何直接测试两台服务器之间的连接，如果有人知道这样做的方法，我很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:31:35.770

我遇到的进行此连接测试的最佳解决方案如下： 请注意，这需要添加 Microsoft.AnalysisServices.DLL 作为参考。

```
class ConnectivityTests
{
    // Variables
    String serverName = "";
    String databaseName = "";
    String dataSourceName = "";

    [Test]
    public void TestDataSourceConnection()
    {
        try
        {

            // Creates an instance of the Server
            Server server = new Server();
            server.Connect(serverName);

            // Gets the Database from the Server
            Database database = server.Databases[databaseName];

            // Get the DataSource from the Database
            DataSource dataSource = database.DataSources.FindByName(dataSourceName);

            // Attempt to open a connection to the dataSource.  Fail test if unsuccessful
            OleDbConnection connection = new OleDbConnection(dataSource.ConnectionString);

            connection.Open();
        }
        catch (Exception e)
        {
            Assert.Fail(e.ToString());
        }
        finally
        {
            connection.Close();
        }

     }
} 
```

# java - 用于 HTML5 的图表 API

> ID：12563420
> 
> 赞同：0
> 
> 时间：2012-09-24T10:45:33.967
> 
> 标签：java, html

有哪些基于 HTML5 的优秀且可能开放且免费的交互式图表包可用，它们可以提供丰富的体验，就像某些 flex 图表包创建动态图表一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:52:45.703

[jqChart](http://www.jqchart.com)是一个纯 HTML5 交互式图表库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:49:22.930

看看这些网站可能对你有帮助..

1.  [用于交互式图表的 5 个顶级 jQuery 图表库](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)
2.  [项目清单](https://developers.google.com/chart/interactive/docs/more_charts)
3.  [带有 RGraph 的图表和图形](http://www.rgraph.net/)
4.  [最佳交互式 Javascript 和 HTML5 图表](http://mannaio.altervista.org/design/interactive-javascript-charts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:58:51.457

[我是Google 图表 API](https://developers.google.com/chart/)的忠实粉丝，该 API提供相当简单的图表，供公众/商业/营销使用。它免费提供了一些不错的交互式糖，并且非常易于使用。

可能不太适合复杂的技术/工程图表，但对于那些我很想使用 JS 前端的服务器端解决方案，比如Python 的[Graphite](http://graphite.wikidot.com/start)。服务器端实现倾向于为处理数据提供更多功能，并与数据记录和管理系统很好地结合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:50:10.413

使用开源[ExtJS](http://docs.sencha.com/ext-js/4-1/#) Javascript 库。检查[图表示例](http://docs.sencha.com/ext-js/4-1/#!/example/charts/Area.html)

# core-audio - MIDI MusicDevice AudioUnit：播放两个相同音高的音符，停止一个？

> ID：12563422
> 
> 赞同：4
> 
> 时间：2012-09-24T10:45:41.273
> 
> 标签：core-audio, midi, audiounit, coremidi

对于 AudioUnits，我是个新手，所以如果我的问题非常基本，请原谅我。

我正在使用 MusicDevice AudioUnit 播放一些音符。我正在使用 MusicDeviceMIDIEvent 发送音符开和音符关消息。它运作良好。有时应该同时发出多个音符，所以我可能会连续发送两个音符消息。有时这些音符碰巧有相同的音高。然后，当我想关闭其中一个音符时，我会为此音高发送一个音符关闭事件。但是这条消息会关闭音高的*所有*音符。当然这种行为很有意义，但我想问一下人们通常如何处理这个问题。

我应该使用不同的通道来同步笔记吗？或者手动管理音符，例如使用包含当前播放音高的计数集，并且仅在音高的最后一个实例停止播放后才发送音符关闭事件？还是完全不同的东西？

编辑：

由于这是在 iOS 上，我必须使用 kAudioUnitSubType_Sampler 作为 AudioUnit 子类型。虽然文档只提到这种类型是单声道的，但我现在怀疑它也是单声道的。这当然可以解释这种行为。我仍然想知道如果我真的有一个和弦乐器我会怎么做。

编辑2：

我做了一些更多的测试，现在在我看来，在任何通道上发送一个音符关闭消息会停止所有通道上具有相同音高的所有音符。我在[http://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/Introduction/Intro.html 获取](http://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/Introduction/Intro.html)了苹果示例代码并修改了 stopPlay[low/mid/high]Note 方法来发送注释某个随机频道上的消息（如果您必须知道，分别在频道 7、8 和 9 上）。尽管在通道 0 上发送了音符消息，但它仍然会停止音符。这是预期的行为吗？

只是为了确保我没有犯愚蠢的错误，以下是发送 note-on 和 note-off 消息的方法：

```
- (IBAction) startPlayLowNote:(id)sender {

    UInt32 noteNum = kLowNote;
    UInt32 onVelocity = 127;
    UInt32 noteCommand =    kMIDIMessage_NoteOn << 4 | 0;

    OSStatus result = noErr;
    require_noerr (result = MusicDeviceMIDIEvent (self.samplerUnit, noteCommand, noteNum, onVelocity, 0), logTheError);

    logTheError:
    if (result != noErr) NSLog (@"Unable to start playing the low note. Error code: %d '%.4s'\n", (int) result, (const char *)&result);
}

- (IBAction) stopPlayLowNote:(id)sender {

    //note the channel!
    UInt32 noteNum = kLowNote;
    UInt32 noteCommand =    kMIDIMessage_NoteOff << 4 | 7;

    OSStatus result = noErr;
    require_noerr (result = MusicDeviceMIDIEvent (self.samplerUnit, noteCommand, noteNum, 0, 0), logTheError);

    logTheError:
    if (result != noErr) NSLog (@"Unable to stop playing the low note. Error code: %d '%.4s'\n", (int) result, (const char *)&result);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:34:20.807

我很确定在同一通道上相同音高的事件上的两个音符后关闭音符的行为是未定义的。有些乐器可能会同时关闭两个音符，而有些乐器可能会关闭一个音符并需要关闭第二个音符才能关闭另一个音符。

如果你真的需要两个相同音高的同时音符，它们应该在不同的通道上。

**编辑关于发布的代码**

我在您的链接中尝试了示例项目，并以与您在发布的代码中相同的方式更改了频道。原来`kAudioUnitSubType_Sampler`确实是单音色，所以忽略了 MIDI 通道参数。因此，如果您想同时拥有两个相同音高的音符，则`kAudioUnitSubType_Sampler`必须创建两个单独的实例。

注意`kAudioUnitSubType_Sampler`不是单声道的。它是复调的，因为它可以同时播放多个音高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:36:08.570

使用 MusicDevice.h`MusicDeviceStartNote()`和`MusicDeviceStopNote()`呢？它为音符使用一个独特的标记，因此您应该能够区分两个相同的音高。

# algorithm - BST 到 LinkList 并返回到相同的 BST

> ID：12563432
> 
> 赞同：1
> 
> 时间：2012-09-24T10:46:08.473
> 
> 标签：algorithm, binary-search-tree

由于我找不到任何有用的东西，所以我在这里问我的问题：

我们如何在不使用任何额外空间的情况下将 BST 转换为有序链接列表，然后再转换回“相同”的 BST。

到目前为止我尝试过的（尽管仍在做）：我尝试了 Morris Traversal 连接到下一个有序后继节点，但它无法连接所有节点，仅适用于左子树和右子树，不是树的实际根。请建议我如何将 Tree 转换为 Linked List 并返回到 Same 树...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:14:09.870

要将树存储在列表中 - 您至少需要两个列表：一个用于前序遍历，另一个用于中序遍历。

幸运的是 - 由于树是 BST，因此中序遍历只是排序列表。

因此，您可以存储前序遍历（您可以尝试就地进行）并通过对重新构建的元素进行排序，您可以获得中序遍历。

[这篇文章](https://stackoverflow.com/q/6464507/572670)讨论了如何从它的中序和前序遍历中重建一棵树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:32:33.760

二叉搜索树列表：

```
subTreeToList(node)
    if (node.hasLeft()) then subTreeToList(node.left, list)
    list.add(node.Value)
    if (node.hasRight()) subTreeToList(node.right, list)
    end if
subTreeToList end

treeToList(tree)
    subTreeToList(tree.root)
treeToList end

list <- new List()
treeToList(tree) 
```

您需要将上述想法实现到您的解决方案中，如果您正在使用面向对象的技术，那么列表和树应该是数据成员，否则它们应该作为引用传递给函数。

知道树中的插入如下所示，您可以重新构建树：

```
Insert(tree, value)
    if (tree.root is null) then
        tree.createRoot(value)
    else
        node <- tree.root
        while (((node.value < value) and (node.hasRight())) or ((node.value > value) and (node.hasLeft())))
            if ((node.value < value) and (node.hasRight())) then node <- node.right()
            else node <- node.left()
            end if
        while end
        if (node.value > value) then node.createLeft(value)
        else node.createRight(value)
        end if
    end if
insert end 
```

您只需要按顺序遍历您的列表并调用基于我上面的伪代码实现的函数。祝你的家庭作业好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:15:49.493

I think I found the solution myself: below is the complete Java implementation The logic + pseudo Code is as below [1] Find the left most node in the tree, that will be the head of the LinkList, store it in the class

```
Node HeadOfList = null;
    findTheHeadOfInorderList (Node root)
    {
        Node curr = root;

        while(curr.left != null)
            curr = curr.left;

        HeadOfList = curr; // Curr will hold the head of the list

    } 
```

[2] Do the reverse - inorder traversal of the tree to convert it to a LL on right pointer, and make sure the left pointer is always pointing to the parent of the node.

```
updateInorderSuccessor(Node root, Node inorderNext, Node parent)
{
    if(root != null) 
                 //Recursively call with the right child
            updateInorderSuccessor(root.right, inorderNext, root);

                // Update the in-order successor in right pointer
        root.right = inorderNext; 
        inorderNext = root;

                //Recursively call with the left child
        updateInorderSuccessor(root.left, inorderNext, root);

                // Update the parent in left pointer
        root.left = parent;
    }
} 
```

[3] To convert it back :

Traverse the list and find the node with left pointer as null, Make it the root, break the link of this root in the linklist and also from its children...

Now the link list is broken into two parts one for left Subtree and one for right subtree, recursively find the roots in these two list and make them the left and right child, Please refer the function restoreBST()

```
Node restoreBST(Node head)
{
    if(head == null || (head.left == null && head.right == null)) return root;

    Node prev, root, right, curr;
            curr = head;

    // Traverse the list and find the node with left as null
    while(curr != null)
    {
        if(curr.left == null)
        {
            // Found the root of this tree
            root = curr;
                            // Save the head of the right list
            right = curr.right;
                            // Detach the children of the root just found, these will be updated later as a part of the recursive solution
            detachChildren(curr, head);
            break;
        }
        prev = curr;
        curr = curr.right;
    }

    // By now the root is found and the children of the root are detached from it.
    // Now disconnect the right pointer based connection in the list for the root node, so that list is broken in to two list, one for left subtree and one for right subtree
    prev.right = null;

    root.right = null;

    // Recursively call for left and right subtree

    root.left = restoreBST(head);
    root.right = restoreBST(right);

    //now root points to its proper children, lets return the root
    return root;
} 
```

Logic to detach the children is simple : Iterate through the list and look for the nodes with left pointer equal to root.

```
private void detachChildren(AvlNode root, AvlNode head) {
    AvlNode curr = head;

    while(curr != null)
    {
        if(curr.left == root)
        {
            curr.left = null;
        }
        curr = curr.right;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T10:02:31.603

Here is a recursive solution for BST to LL, hope you find it useful.

```
 Node BSTtoLL(BST root) {

        if(null == root) return null;

        Node l = BSTtoLL(root.left);
        Node r = BSTtoLL(root.right);

        Node l1 = null;
        if(null != l) {
            l1 = l;
            while(null != l.left) { l = l.left; }
            l.left = root;
            l.right = null;
        }
        if(null != r) {
            root.left = r;
            root.right = null;
        }

        if(null != l1) return l1;
        return root;
    } 
```

# javascript - 使 jQuery Growl 插件消息不会淡出

> ID：12563433
> 
> 赞同：1
> 
> 时间：2012-09-24T10:46:09.867
> 
> 标签：javascript, jquery, web, growl

我正在使用 jQuery Growl 插件在我的网站上向我的用户通知消息，我的消息 displayTimeout 是 3500，我的问题是一些通知消息需要在 displayTimeout 之后消失，但有些需要保持静态，直到我将它们删除。我的问题是我如何让我的通知保持不变而不是淡出？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-01T16:26:04.653

这个循环负责显示和褪色..您可以编辑代码..

```
Growl.prototype.cycle = function() {
    var $growl;
    $growl = this.$growl();
    console.log(this.settings.duration);
    return enter code here$growl.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove);
    }; 
```

弄成这样。。

```
Growl.prototype.cycle = function() {
      var $growl;
      $growl = this.$growl();
      console.log(this.settings.duration);
      if(this.settings.duration==0){
            return $growl.queue(this.present);
      }else{
            return $growl.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove);
      }
    }; 
```

所以如果你像这样初始化..

```
$.growl({
                title: "Saving",
                style: "primary",
                message: 'Please wait...',
                duration: 0
            }); 
```

它不会淡出..您可能想使用“关闭”手动淡出它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:32:25.897

在 jquery.growl.js 文件中只需注释这行代码：

```
if ($.growl.settings.displayTimeout > 0) {
        setTimeout(function(){
            jQuery.growl.settings.noticeRemove(notice, function(){
                notice.remove();
            });
        }, jQuery.growl.settings.displayTimeout);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-22T12:20:40.570

我使用 Growl.settings.duration = duration; 解决了它

我创建的函数：

```
function woobe_message(text, type, duration = 0) {
    jQuery('.growl').hide();
    if (duration > 0) {
        Growl.settings.duration = duration;
    }
    switch (type) {
        case 'notice':
            jQuery.growl.notice({message: text});
            break;

        case 'warning':
            jQuery.growl.warning({message: text});
            break;

        case 'clean':
            //clean
            break;

        default:
            jQuery.growl({title: '', message: text});
            break;
}

} 
```

# c++ - 如何在后台打开默认浏览器并获取网页的源代码？

> ID：12563436
> 
> 赞同：1
> 
> 时间：2012-09-24T10:46:25.347
> 
> 标签：c++

我正在使用 Dev-C++ 并且我正在寻找一种模式来打开（...或更好...我需要在后台加载浏览器实例）默认浏览器（示例 IE）并发送请求以获取我请求的页面的源代码。

我可以在 C++ 中做这样的事情吗？

谢谢！

PS我需要这个用于Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:02:32.913

您似乎为您的问题设想了错误的解决方案。如果您想获取网页的 HTML 源代码，则无需通过浏览器进行。您需要执行浏览器所做的任何事情来获取它。

当您在浏览器中输入地址时，浏览器会向托管您请求的资源（通常是网页）的服务器发送 HTTP GET 请求，然后服务器会返回包含资源内容（通常是 HTML）的 HTTP 响应.

你想在你的应用程序中做同样的事情。您需要向服务器发送 HTTP 请求并读取响应。一个流行的库是[libcurl](http://curl.haxx.se/libcurl/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:09:23.350

如果您不必发送 POST 请求（即只是一个简单的 Web 请求或在 URL (GET) 上传递参数，那么您可以使用[`URLDownloadToFile()`](http://msdn.microsoft.com/en-us/library/ms775123%28v=vs.85%29.aspx).

如果您不想使用回调等而只是下载文件，则可以将其称为相当简单：

```
URLDownloadToFile(0, "http://myserver/myfile", "C:\\mytempfile", 0, 0); 
```

还提供了一些其他功能，可以自动将下载的数据推送到流而不是文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:52:50.713

它不能在纯 C++ 中完成。您应该使用本机 Windows 库或其他（如[Qt Framework](http://qt-project.org/)）并使用它获取和解析网站的功能。在 Qt 中，您将使用[QtWebkit](http://qt-project.org/doc/qt-4.8/qtwebkit.html)。

编辑：如果你只想要一个页面的源代码，你可以在不使用浏览器或其引擎的情况下做到这一点，你可以使用[Winsock](http://msdn.microsoft.com/en-us/library/ms740673.aspx)。

# c - 为什么即使我刚刚编译了源代码，我的 makefile 也会重新编译？

> ID：12563437
> 
> 赞同：1
> 
> 时间：2012-09-24T10:46:27.123
> 
> 标签：c, makefile

我有一个简单的 makefile，可以在 Linux 上将文件编译为`p.c`可执行文件。`gcc`该`p.c`文件依赖于一个`a.h`文件。我的生成文件如下所示：

```
//makefile
CC = gcc

build: p.c a.h
    $(CC) -o out p.c
clean:
    rm -f *.exe
rebuild: clean build 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T10:50:49.407

您的 makefile 不会生成它承诺生成的文件，即`build`,`clean`和`rebuild`. 由于这些目标不是文件，因此应将它们标记为[虚假目标](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)：

```
.PHONY: build clean rebuild 
```

`build`目标应该是：

```
build : out

out : p.c a.h
    $(CC) -o $@ p.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:16:11.770

这部分

```
build: p.c a.h
    $(CC) -o out p.c 
```

说“我正在使用 $(CC) -o out pc 进行编译，结果将是一个名为 'build' 的文件”。由于您撒谎`make`（这会创建`out`文件），它将尝试再次构建“构建”。

这里给 Makefile 编写者一个教训：总是使用`$@`变量（表示目标）来避免这个错误：

```
out: p.c a.h
    $(CC) -o $@ p.c 
```

如需更多建议，请参阅[Paul 的 Makefile 规则](http://mad-scientist.net/make/rules.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:11:33.047

学习者，这里有一个使用变量来存储可执行文件名称的例子。这样您只需要在 Makefile 开头的一个地方指定它：

```
EXECUTABLE = out

.PHONY: build clean rebuild

build: $(EXECUTABLE)

$(EXECUTABLE): p.c a.h
    $(CC) -o $@ p.c

clean:
    rm -f $(EXECUTABLE)

rebuild: clean build 
```

通常你也会在变量中列出你的`.c`和`.h`文件，这样你就可以轻松地从你的构建中添加/删除文件，而不必在你的 Makefile 中搜索它们使用的所有位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:51:41.233

Makefile 具有一般语法：

```
target : dependencies
    commands to make target from dependencies 
```

`build`因此，您的 Makefile 期望使用目标创建一个名为的文件`build : p.c a.h`。由于命令实际上并没有在每次调用 make 时都生成此文件，因此必须重做命令。

（PS：Linux 二进制文件没有 .exe 扩展名）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T16:17:35.967

如果你想避免总是重新编译源，那么你的目标应该依赖于*目标*文件，而不是源文件：

```
目标.exe：宝
        $(CC) -o $@ $?;

po：电脑啊
        $(CC) -c $@ $?;

```

典型的 makefile 通常没有每个目标文件的显式规则，也通常不会列出实现和头文件之间的显式依赖关系；你通常会看到一个隐含的规则，比如

```
%.o : %.c
        $(CC) -c $(CFLAGS) $?;

```

（其中`$?`表示该目标的先决条件列表），或者，如果您的项目非常简单（一个源文件），您甚至不需要它；你通常可以逃脱

全部：目标目标：target.o

假设您有一个名为 的文件`target.c`，上面将`target`使用默认编译器和 CFLAGS 选项构建。

同样，典型的 makefile（至少在我的经验中）没有明确列出头文件依赖项。相反，它依赖于编译器选项来自动生成这些依赖项列表（对于 gcc，该选项是`-M`）。有关示例，请参见[此处。](http://scottmcpeak.com/autodepend/autodepend.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-14T12:44:07.323

我知道“目标”和“输出文件”名称必须完全匹配才能*使制作*能够识别是否不需要重新编译。所以在 Windows 环境的情况下（*我*已经尝试过`mingw32-make.exe`）它应该是这样的：

```
build.exe: p.c a.h
    gcc -o build.exe p.c 
```

或者

```
build.exe: p.c a.h
    gcc -o build p.c    # .exe is added automatically to generated file 
```

*调用make*时，此代码将始终导致重新编译：

```
build: p.c a.h
    gcc -o build p.c    # target is "build" and it is not the same as "build.exe" which is the output of compilation 
```

# objective-c - IOS - 使用#import 类的正确方法

> ID：12563439
> 
> 赞同：0
> 
> 时间：2012-09-24T10:46:34.257
> 
> 标签：objective-c, ios, class, import

我正在编写一个测试项目来学习用代码编写所有内容。我想这样做，以便我可以更好地理解情节提要中的元素在幕后为我做了什么

在我的项目中，我有几个 UIViewControllers 共享相同的 UI 元素。例如，我在屏幕顶部有一个 UITool 栏，里面有几个按钮。

现在我想把 UIToolbar 放在一个单独的类中，这样我就不必把它全部写出来或复制粘贴到每个控制器中。

现在我知道我可以通过这样做来实现这一点：

```
#import "General_Add_ons.h" //the UIToolbar is properly set up in this file

@interface FirstViewController : General_Add_ons 
```

然后我只是使用`[self topToolBar];`//topToolBar 是工具栏的名称

现在我只想澄清这是最好的还是唯一的方法？

不知何故，我觉得我应该能够做到这一点：

```
 General_Add_ons *gao = [[General_Add_ons alloc] init];
    [gao topToolbar]; 
```

我在想这个错误的方式吗？如果我有多个外部类，第一种方法似乎是有限的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:10:44.993

你的方法似乎是正确的。如果您有多个`UIViewController`实例需要相同的 UI 元素或其他控制器代码，则可以将这些元素放在`UIViewController`子类中。就您而言，我相信该类`General_Add_ons`是`UIViewController`您的子类将继承的类。

这个类（你的`General_add_ons`）应该有一个可重用工具栏的属性，例如

```
@property (nonatomic, strong) UIToolbar *toolbar; 
```

顺便说一句，Cocoa 中的类名，按照惯例是：前缀+大写单词，不带下划线。Apple 对[命名约定](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html)有很好的参考。

**编辑**

为澄清起见，您可以根据需要多次对自定义子类进行子类化。例如，在我的代码中，我有一个类`CCFViewController`，它封装了我希望所有视图控制器都具有的常见属性和行为。那么，在项目中，所有视图控制器都继承自该父控制器。同样，您的工具栏将存在于超类中，并且其他控制器从它继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:15:46.657

我不是 100% 确定，但我认为你应该这样尝试：

```
General_Add_ons *gao = [[General_Add_ons alloc] init];
[gao.topToolbar anypossiblemethodcall]; 
```

# html - 在 DIV 中居中对齐图像

> ID：12563440
> 
> 赞同：2
> 
> 时间：2012-09-24T10:46:51.800
> 
> 标签：html, css

虽然这个问题之前被问过，但我的问题有点不同。我有一个 div，其中有两个图像。第一个图像需要保持左对齐，而第二个图像需要居中对齐。div 没有固定宽度，因此它覆盖了标题。我创建了一个小提琴，可以在[这里](http://jsfiddle.net/Eevpc/)找到。

任何建议都会对我很有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T10:50:41.723

**情况1**

添加`text-align:center`到 div 类。

通过使用伪类给`float:left`第一个图像，以便您的第二个图像将与 div 居中对齐，而第一个图像将左对齐。

这是演示[http://jsfiddle.net/Eevpc/5/](http://jsfiddle.net/Eevpc/5/)

**案例2**

这样做`position:absolute`

```
.brandLogo {
    margin: 15px; background-color:red; text-align:center; position:relative;
}   

a img:first-child {
    border: 0 none; position: absolute; left:0;
    height: auto;
    vertical-align: middle;
}
img {
    border: 0 none; margin:0 auto !important;
    height: auto;
    vertical-align: middle;
} 
```

演示[http://jsfiddle.net/Eevpc/11/](http://jsfiddle.net/Eevpc/11/)

在情况 1 中，第二张图片是 div 剩余宽度的中心（忽略第一张图片占用的空间）。

在情况 2 中，第二个图像与原始 div 宽度的确切中心对齐。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T08:31:21.960

希望这会奏效。

```
.div_class{
   display: block;
   margin-left: auto;
   margin-right: auto;
} 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:56:14.157

试试这个：

```
<div id="main" style="text-align:center; width:100%;">
  <div id="left" style="float:left;">
    <img src="..." alt="..."/>
  </div>
  <div id="right" style="float:right; width:100%; text-align:center;">
    <img src="..." alt="..." style="margin:0 auto;" />
  </div>
  <div style="clear:both; content:'.'; display:none" />
</div> 
```

# objective-c - 查找 URL 的扩展名

> ID：12563443
> 
> 赞同：4
> 
> 时间：2012-09-24T10:46:58.530
> 
> 标签：objective-c, ios, cocoa

我有一个名为 url 的字符串，即

```
NSString *url = @"http://sound17.mp3pk.com/indian/barfi/%5BSongs.PK%5D%20
                  Barfi%20-%2001%20-%20Barfi!.mp3"; 
```

现在我想要它应该从最后搜索到 .(dot)

即它应该 `mp3`在字符串中搜索，因为它在 .(dot) 之后并希望将其存储`mp3`在临时变量中。我如何使用`lastindex(".")`或其他东西存储在临时变量中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T10:48:40.620

就那么简单：

```
NSString *extension = [url pathExtension]; 
```

# jpa - JPA：如何过滤关联？

> ID：12563445
> 
> 赞同：2
> 
> 时间：2012-09-24T10:47:09.003
> 
> 标签：jpa, jpa-2.0, criteria-api

我的模型：

```
@Entity
class Person {
    @Id
    long id;
    @OneToMany
    Set<Employment> employments =  new HashSet<Employment>();
}

@Entity
class Employment {
    @Id
    long id;
    @ManyToOne
    Company company;
    Date from;
    Date until;
} 
```

`Person`它是 a和 a之间的关联`Company`，受时间间隔的限制。

我正在寻找一个 JPA 标准查询以`Person`在给定时间选择所有 s 及其工作。

预期结果是`List<Person>`包含*所有*`employments`人员，其中每个人的集合`Person`仅包含符合特定条件的就业（或根本不包含就业）。

`@Where`不是一种明智的方法，因为就业的过滤标准是可变的，例如，我想在任何给定时间选择一个人的所有就业。

这甚至是合理的做法吗？任何建议如何以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:25:32.583

不，这不是一件合理的事情。实体应该表示数据库中的数据，而不是特定查询返回的日期。

我会简单地从`Employment`to添加一个 ManyToOne 关联`Person`，然后搜索工作。如果您需要一组人员，只需遍历就业并将每个就业的人员添加到一个集合中。如果您想要在此日期与他们的工作相关联的人员，您可以使用自定义类或`MultiMap<Person, Employment>`.

```
String hql = "select employment from Employment employment"
             + " left join fetch employment.person"
             + " where :date between employment.startDate and employment.endDate";
List<Employment> employments = session.createQuery(hql)
                                      .setDate("date", date)
                                      .list(); 
```

# javascript - 如何在电子表格的 Google Apps 脚本中使用数组作为自定义函数的参数

> ID：12563448
> 
> 赞同：3
> 
> 时间：2012-09-24T10:47:19.313
> 
> 标签：javascript, multidimensional-array, google-apps-script, google-sheets

我正在尝试使用脚本编辑器在我的谷歌电子表格中创建一个自定义函数。

我似乎不允许用户给函数一个数组作为参数。

当我像这样硬编码时，我的脚本可以工作：

```
 var values = SpreadsheetApp.getActiveSheet().getRange("G2:j30").getValues(); 
```

我想要做的是将数组作为参数传递：

```
 function arrayToList(chosenArray) {
        ...
        var values = SpreadsheetApp.getActiveSheet().getRange(chosenArray).getValues();
        ...
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:32:30.873

Now this functionality is not implemented in GAS. There are similar questions in SO ([here](https://stackoverflow.com/questions/12206399/) and [here](https://stackoverflow.com/questions/12371434/)). You can post a feature request to the [issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:40:47.247

Riku - 您是否尝试将您的函数称为 arrayToList(G2:j30)？我相信 Apps 脚本会将所选范围转换为逗号分隔的字符串（向左 -> 向右，然后从上到下）。

它与 Range 对象不同，但至少您可以获得所选范围的 CSV 字符串表示形式，也许这就足够了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-17T16:28:12.167

有两种方法可以将数组作为参数传递给 Google 表格自定义函数

1.  通过使用范围引用，例如`A1:D5`. 用法：`=myCustomFunction(A1:D5)`。
2.  通过使用 Google 表格数组表示法，例如`{1,2;"Yellow","Orange"}`. 用法：`=myCustomFunction({1,2;"Yellow","Orange"})`。注意：如果您的电子表格设置为使用逗号作为小数分隔符，请使用`/`作为列分隔符

参考

*   [https://developers.google.com/apps-script/guides/sheets/functions](https://developers.google.com/apps-script/guides/sheets/functions)
*   [在 Google 表格中使用数组](https://support.google.com/docs/answer/6208276?hl=en)

# algorithm - AI蛇拳本身

> ID：12563449
> 
> 赞同：2
> 
> 时间：2012-09-24T10:47:22.770
> 
> 标签：algorithm, artificial-intelligence

我正在研究与许多其他蛇竞争的 AI 蛇。我的主要问题是我的蛇一直在自己的身体里装箱，有时它会被其他蛇装箱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:22:37.407

试着提前考虑几步。蛮力 2-3-4 的所有可能性（无论你在注意到滞后之前可以挤入多少）向前移动。这些不应该很多，因为蛇在任何给定时间只能转向 3 个位置。因此，如果您检查`k`前面的步骤，您将需要`3^k`操作，这还不包括您可以做的修剪：不要检查明显阻塞的位置等。

选择以下路径（不一定按此顺序，您必须进行试验 - 不幸的是，这没有灵丹妙药）：

1.  让你活下来
2.  不会让你陷入困境
3.  给你周围最空旷的空间
4.  无论您能想到什么其他启发式方法，都可以使一个职位比另一个职位更好

研究[极小极大](http://en.wikipedia.org/wiki/Minimax)及其变体。这应该可以帮助您构建一个体面的 AI。

# html - 用图像替换文本输入的边框

> ID：12563460
> 
> 赞同：1
> 
> 时间：2012-09-24T10:48:14.770
> 
> 标签：html, css

我有一张直线图像，我想替换输入文本框的底部边框。

```
 div{
   border-image:url("image.png");
 } 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:54:44.083

最好创建一个类似框的图像并将其用作背景图像。

如果你想使用`border-image`参考这个[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:00:13.923

您应该为边框定义一个宽度，为图像定义完整的参数。您应该根据图像更改此参数。

```
border-width:25px 30px 10px 20px;
border-image:url("image.png") 25 30 10 20 repeat; 
```

# python - 修复处理 @property setter 装饰器的 pyflakes

> ID：12563469
> 
> 赞同：11
> 
> 时间：2012-09-24T10:48:47.450
> 
> 标签：python, properties, decorator, python-decorators, pyflakes

Pyflakes 不能很好地处理以下代码：

```
@property
def nodes(self):
    return self._nodes

@nodes.setter
def nodes(self, nodes):
    """
    set the nodes on this object.
    """
    assert nodes != []  # without nodes no route..

    self.node_names = [node.name for node in nodes]
    self._nodes = nodes 
```

使用使用 pyflakes 的 vim 和 syntastic 我得到以下错误：

```
 W806 redefinition of function 'nodes' from line 5 
```

所以我收到警告，`@nodes.setter`因为我重新定义了`nodes`.

由于此代码正确，如何禁用此无用警告？或者哪个 python 检查器正确处理了这段代码？

**更新**

我在重构代码时遇到了一些问题，因为属性和函数具有不同的继承行为。访问基类的属性是不同的。看：

*   [如果该属性在派生类中被覆盖，如何调用基类的属性？](https://stackoverflow.com/questions/1021464/python-how-to-call-a-property-of-the-base-class-if-this-property-is-being-overw).
*   [Python派生类和基类属性？](https://stackoverflow.com/questions/6396452/python-derived-class-and-base-class-attributes)

所以我现在倾向于避免这种语法，而是使用适当的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:02:29.380

pyflakes 问题跟踪器上有一个[开放的拉取请求](https://github.com/kevinw/pyflakes/pull/12)，其中包含此问题的补丁；你可以[从 GitHub 下载补丁版本](https://github.com/ervandew/pyflakes/tarball/master)，或者手动应用补丁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:08:32.910

可能会在某个时候发布的各种修复：

*   [http://bazaar.launchpad.net/~menesis/pyflakes/pyflakes-mg/revision/38](http://bazaar.launchpad.net/~menesis/pyflakes/pyflakes-mg/revision/38)
*   [https://github.com/kevinw/pyflakes/pull/12](https://github.com/kevinw/pyflakes/pull/12)
*   [http://bazaar.launchpad.net/~divmod-dev/divmod.org/trunk/revision/2685](http://bazaar.launchpad.net/~divmod-dev/divmod.org/trunk/revision/2685)

最后一个似乎最接近发布，因为 divmod 是 PyFlakes 的父项目。

除了自己修补软件包之外，您始终可以解决此问题：

```
@property
def nodes(self):
    return self._nodes

@nodes.setter
def _nodes_setter(self, nodes):    # FIXME: pyflakes
    ... 
```

不幸的是，这会导致类命名空间的污染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T00:31:52.057

我遇到了同样的问题，为了有效地抑制这个特定的实例，我在添加装饰器的行的末尾添加了 #NOQA 行。在这种情况下，它应该看起来像

```
@nose.setter  #  NOQA 
```

这为我解决了问题。这并不理想，但对于我的需要来说已经足够了。

这样做不是为了抑制所有 W806 警告，而是为了捕获可能实际需要修复的其他实例。

# php - 在 PHP 中编写多维数组的最佳方法是什么？

> ID：12563470
> 
> 赞同：-2
> 
> 时间：2012-09-24T10:48:52.650
> 
> 标签：php, multidimensional-array, associative-array

好的，这是我有多个需要显示注释的产品的问题。在不为每个产品写出以下整个代码的情况下，将注释与多个产品相呼应的最佳方法是什么？

```
<?php if ($data['header']['group_code'] == 'R088X') { ?>

<li><span>Printers:</span> Wipe the allocated print area before print application with methylated spirit.</li>

<?php } ?> 
```

我已经尝试了以下放置它不起作用...

```
<?php 
$data = array((['header']['group_code'] == 'R088X', 'R129X'));

if (in_array(['header']['category'] == 'R088X', $data)) { ?>

                                        <li><span>Printers:</span> Wipe the allocated print area before print application with methylated spirit.</li>
<?php } ?> 
```

任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:52:54.497

```
$data = array (
    'header' => array (
        'group_code' => array (
            'R088X',
            'R129X'
        )
     )
); 
```

当涉及到数组时，PHP 并不是最好的编程语言！

然而，如果你运行的是 PHP 5.4，你可以这样写：

```
$data = [
    'header' => [
        'group_code' => [
            'R088X',
            'R129X'
        ]
     ]
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:54:09.060

除了@Darkzaelus 回答之外，在 PHP 5.4 中，您还可以执行以下操作：

```
$data = [ 'header' => [ 'group_code' => [ 'R088X', 'R129X' ] ] ]; 
```

# php - php定义包含文件

> ID：12563471
> 
> 赞同：1
> 
> 时间：2012-09-24T10:48:53.900
> 
> 标签：php, include

我想知道是否以及如何定义要包含的文件。

例如

```
<?php
//define('_login',inlcude('file.php'));
define('_login',include('file.php')); // edited due to typo..
?> 
```

还是我需要这样做

```
<?php
define('_login','file.php');
include(_login);
?> 
```

我问的原因是我的网站允许插件，我希望其他开发人员覆盖定义以包含他们的插件而不是核心 _login 定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:52:39.143

这个应该没问题：

```
<?php
define('_login','file.php');
include(_login);
?> 
```

事件无法想象在第一种情况下会发生什么。也许如果你从文件中返回一些东西——那个值会被使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:52:39.753

你必须像这样使用它

```
<?php
// works
if ((include 'vars.php') == 'OK') {
    echo 'OK';
}
?> 
```

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

# facebook - Facebook新的付款人促销不起作用

> ID：12563472
> 
> 赞同：0
> 
> 时间：2012-09-24T10:48:55.283
> 
> 标签：facebook, payment, promotions

[https://developers.facebook.com/docs/payments/payer_promotion/#user_eligibility](https://developers.facebook.com/docs/payments/payer_promotion/#user_eligibility)上的 Facebook 新付款人促销规范 表示，如果用户符合条件，它将返回 1，否则将返回 1。

但是，PHP中的这段代码：

```
$fbdata = $facebook->api('/me?fields=id,locale,third_party_id,is_eligible_promo'); 
```

返回 is_eligible_promo => '1'；

但是当我在 Graph API explorer 或 JavaScript 上使用该查询时：

```
FB.api('/me?fields=id,locale,third_party_id,is_eligible_promo', function(response) {}); 
```

它不返回 is_eligible_promo 字段。

此外，调用此付款弹出窗口：

```
var obj = {
    method: 'fbpromotion',
    display: 'popup',
    package_name: 'zero_promo',
    product: '---my-open-graph-currency---'
};
FB.ui(obj, function() {}); 
```

，它会返回类似“抱歉，促销当前不可用。”的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:57:10.867

它解决了**user_is_eligible 取决于用户请求的 IP**。

由于我的服务器位于 A 国，因此从该服务器到 facebook 的 php 请求返回该用户是合格的。但是当我使用 javascript 请求相同的参数时（我在 B 国），facebook 说该用户不符合条件。

通过将所有检查移至 javascript 来解决此问题，因为它取决于用户位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:42:06.287

> 但是当我在 Graph API explorer 或 JavaScript […] 上使用该查询时，它不会返回 is_eligible_promo 字段。

我认为这是一个 access_token 问题——玩家是否有资格获得晋升取决于个人应用程序，我猜。

尝试在 Graph API 资源管理器（右上角的下拉菜单）中选择您自己的应用程序，然后查看您是否获得与在 PHP 脚本中相同的结果。

# rrdtool - rrdtool 中的 rpn 表达式无效，在 CDEF 中包含多个 LT 和 IF

> ID：12563473
> 
> 赞同：0
> 
> 时间：2012-09-24T10:48:56.093
> 
> 标签：rrdtool, rpn

我正在尝试创建一个包含多个数据源的图表，并试图获得所有数据源的最小值。

我已经尝试了两个数据源，它正在工作。低于具有 2 个数据源的版本：

```
DEF:min_0="/path0/file.rrd":value:MIN
DEF:min_1="/path1/file.rrd":value:MIN
CDEF:min=min_0,min_1,LT,min_0,min_1,IF 
```

但我坚持三个，这是更复杂的：

```
DEF:min_0="/path0/file.rrd":value:MIN
DEF:min_1="/path1/file.rrd":value:MIN
DEF:min_2="/path2/file.rrd":value:MIN
CDEF:min=min_0,min_1,LT,min_0,min_1,IF,min_2,LT,min_0,min_1,LT,min_0,min_1,IF,min_2,IF 
```

我从 rrdtool graph 得到以下错误：

```
ERROR: invalid rpn expression 
```

关于为什么我不能推送我想要的任何值然后将其与 IF 语句或 LT 一起使用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:11:25.763

只使用 MIN 函数怎么样？这将使您的头免于爆炸

```
CDEF:min=min_0,min_1,MIN,min_2,MIN 
```

# c# - 将字符串数据拆分为页面

> ID：12563481
> 
> 赞同：1
> 
> 时间：2012-09-24T10:49:51.660
> 
> 标签：c#, jquery, webbrowser-control

我使用[小册子插件](http://builtbywill.com/code/booklet/demos/hovers)为我的内容制作翻书效果`Web Browser`，所以一切都很好。

我从 db 检索我的文本数据我想编写一个函数，将文本（已经从 db 检索到）转换为页面，例如，如果我的文本量大于页面，它会将其余文本放在下一页等等.

**html代码**

```
<html >
<head>
    <!-- page css -->
    <link href="Booklet%20-%20jQuery%20Plugin_files/base0000.css" type="text/css" rel="stylesheet" media="screen, projection, tv">
    <link href="Booklet%20-%20jQuery%20Plugin_files/booklet0.css" type="text/css" rel="stylesheet" media="screen, projection, tv">

    <!-- required files for booklet -->
    <script src="Booklet%20-%20jQuery%20Plugin_files/jquery00.js" type="text/javascript"></script>
    <script src="Booklet%20-%20jQuery%20Plugin_files/jquery-u.js" type="text/javascript"></script>
    <script src="Booklet%20-%20jQuery%20Plugin_files/jquery01.js" type="text/javascript"></script>
    <script src="Booklet%20-%20jQuery%20Plugin_files/jquery02.js" type="text/javascript"></script>
    <link href="Booklet%20-%20jQuery%20Plugin_files/jquery00.css" type="text/css" rel="stylesheet" media="screen, projection, tv">

    <!-- basic initialization -->
    <script type="text/javascript">
    function mm() {
        $('#mybook').booklet();
    };
    </script>
</head>
<body >
<div id="mybook">
<div>page 1 content<div>//If my page content was larger than page put rest of text to next page
<div>page 2 content<div>
<div>page 3 content<div>
.
.
.
<div>
</body>
</html> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:24:28.923

据我了解，一旦加载文档，您就必须执行以下操作：

```
var bookDiv = yourWebBrowserControl.Document.GetElementById["mybook"];

IEnumerable<string> theBook = getTheDataFromDb();
var sites = SplitTheBookIntoSites();

foreach (var site in sites)
{
  var bookSiteDiv = yourWebBrowserControl.Document.CreateElement("div");
  bookSiteDiv.InnerText = theSite;
  bookDiv.AppendChild(bookSiteDiv);
} 
```

要拆分字符串，您可以使用[此处](https://stackoverflow.com/questions/3081492/split-a-string-with-max-character-limit)提供的解决方案之一。为了在每个站点上都有固定的字符串大小，您必须选择像 Courier 这样的[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)

# composer-php - 如何将composer与包含packages.json的非packagist github项目一起使用

> ID：12563485
> 
> 赞同：5
> 
> 时间：2012-09-24T10:49:57.750
> 
> 标签：composer-php, momentjs, packagist, satis

我想将[https://github.com/timrwood/moment](https://github.com/timrwood/moment)放入我的 composer.json 以便于维护。

它不是官方的 packagegist 项目（当然，因为它不是 PHP），但它包含一个`packages.json`for nodejs。我可以在我的 中使用它`composer.json`吗？

我试过这个，但没有奏效：

```
{
    "repositories": {
        "timrwood/moment": {
           "type": "git",
           "url": "git://github.com/timrwood/moment.git"
        }
    }
} 
```

它会抛出一条错误消息，说*“在 git://github.com/timrwood/moment.git 的任何分支或标签中找不到有效的 composer.json，无法从中加载包。”*

而且它缺少版本字符串来定义我要使用的版本......

有人可以在这里帮忙吗？

或者我根本不应该在这里使用作曲家，因为我正在混合 JS 和 PHP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:34:35.337

Composer 只管理 composer 包。它不知道如何解析`package.json`文件。这个问题有不同的方法。Composer 将来可能能够处理前端依赖项。

目前，我建议为您的 JavaScript 依赖项使用单独的依赖项管理器。NPM 或类似[jam](http://jamjs.org/)或[ender](http://ender.no.de/)的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T15:56:39.620

查看 composer 插件以通过 和存储库处理组件`bower`：fxpio [/composer-asset-](https://github.com/francoispluchino/composer-asset-plugin)`nodejs` plugin 。`git`

# c# - 测试 Exchange Web 服务 API 的最佳策略

> ID：12563499
> 
> 赞同：6
> 
> 时间：2012-09-24T10:50:51.730
> 
> 标签：c#, unit-testing, mocking, exchangewebservices

我正在开发一个新的 C# 3.5 应用程序，该应用程序需要监视 Exchange 邮箱并在收到电子邮件时执行一些操作。我知道微软现在[建议](http://msdn.microsoft.com/en-us/library/exchange/bb204040%28v=exchg.140%29.aspx)使用 Exchange Web 服务在 Exchange 服务器上执行操作，所以我决定使用它。

我还发现了[Exchange Web Services Managed API](http://msdn.microsoft.com/en-us/library/dd633709%28v=exchg.80%29.aspx)（使用 1.2.1 版），这似乎使调用这些 Web 服务的任务变得更加容易。

我的问题是，有没有人有使用托管 API 创建自动化单元/集成测试的经验？

目前我没有 Exchange 服务器，所以我真的很想创建某种模拟（我通常使用 Moq），但`Microsoft.Exchange.WebServices.Data.ExchangeService`没有实现任何我可以模拟的接口。我的代码全部编码为接口并为依赖注入而设计，但我想不出一种抽象出 EWS API 依赖的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:19:35.483

您可以使用[外观](http://en.wikipedia.org/wiki/Facade_pattern)设计模式并在 EWS 托管 API 之上构建一组类。Facade 类应该实现一组您自己创建的接口。这些接口不应模仿 EWS API，而应仅公开您在应用程序中需要的功能。

您的应用程序中的代码会很高兴地忘记 EWS。它只会知道您的 Facade 接口，这使您可以在单元测试时使用 Moq 存根或模拟接口。

例如，如果您需要检索邮箱中的所有项目，您可以使用一个名为 GetItems 的方法创建一个 IMailBox 接口：

```
public interface IMailBox
{
    IEnumerable<MailItem> GetItems(string smtpAddress, WellknownFolderName folder);
} 
```

然后，对于您的应用程序，您将创建一个实现此接口的类。您可以使用您最喜欢的 DI 框架在代码中注入该类。

```
public class MailBox : IMailBox
{
    public IEnumerable<MailItem> GetItems(string smtpAddress, WellknownFolderName folder)
    {
        var service = new ExchangeService();
        // Some code here...
    }
} 
```

# mysql - MySQL BETWEEN 索引

> ID：12563501
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:50:54.877
> 
> 标签：mysql, database-indexes

我必须弄清楚一个数字（由于前导零而存储为字符串）是否落在特定范围内。范围如下所示：

```
12 - 14
3456 - 4567 
```

1233435 将被视为属于第一个范围（匹配从左侧开始）。该数字最多可以有 20 位数字，我有一个包含所有范围的文件。我导入了范围，将尾随零添加到下限，尾随九添加到上限以达到 20 的长度。这是为了能够处理可变长度数字 - 它们在右侧填充零，以便我可以执行以下查询：

```
SELECT * FROM ranges WHERE 'my padded number' BETWEEN bound_lower AND bound_upper 
```

由于我有几千个范围，我想在表格上放一个索引，但我不确定如何实现这一点。

谢谢，孟德尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:55:07.477

这似乎是您采取的有效方法。要添加索引，您只需：

```
 CREATE INDEX between_index on ranges (bound_lower, bound_upper); 
```

您可以使用 EXPLAIN 验证它是否正常工作。

# r - 通过 Qt 运行时，R 小部件上显示的地图不会最大化

> ID：12563510
> 
> 赞同：1
> 
> 时间：2012-09-24T10:51:11.207
> 
> 标签：r, qt, ggplot2, ggmap, rinside

当我在 R 的小部件上加载地图*（通过`ggmap`）* 并通过 R 的控制台直接运行程序时，当我最大化 R 的窗口时，地图会正确最大化。

当我通过 Qt 运行 R 时，同样的情况不会发生。我正在使用 RInside。通过 Qt，当我运行 R 时，确实显示了小部件（上面有地图），但是当我最大化 R 窗口时，地图没有***最大化***。它仍然是相同的大小！

在任何特定情况下都不会发生。它一直发生在我通过 Qt 运行 R 的时候，而当我通过 R 的控制台运行 R 时从来没有。

**此处应提供哪些硬件/软件信息？**

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 
```

**使用 Qt 4.7.0 版**

```
> cat /etc/issue && uname -a
Welcome to openSUSE 11.4 "Celadon" - Kernel \r (\l).  
Linux linux-trra 2.6.37.1-1.2-desktop #1 SMP PREEMPT 2011-02-21 10:34:10 +0100 x86_64 x86_64 x86_64 GNU/Linux 
```

**导致这种情况的最简单的 R 程序：**

```
R.parseEvalQ ("library (ggmap); library (raster);");

qtToR ["currentFileName"] = currentFileName;
R.parseEvalQ ("load (file = currentFileName); print (ggmap (mapImageData));"); 
```

![在此处输入图像描述](../Images/cba05dbe2129c84307dba6085ab30199.png) 我的系统上可能没有正确安装 X11 服务器吗？或者这是一个已知的问题`print`？

有没有其他方法可以通过 ggmap 正常运行？

![在此处输入图像描述][2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:33:28.873

解决地图没有最大化问题的一个临时解决方案是设置`X11`服务器的初始尺寸。

`X11 (width = 11, height = 11);`
默认情况下，这会显示一个几乎最大化的窗口，并且地图也会显示为最大化。

# asp.net - 如何在 jquery multislect 中调用 webmethod

> ID：12563512
> 
> 赞同：0
> 
> 时间：2012-09-24T10:51:17.277
> 
> 标签：asp.net, jquery

当我使用 jquery 多选关闭功能时，我在方法后面的代码中调用 webmethod 没有命中我的脚本是：

```
$(document).ready(function () {

    $('.department').multiselect({
        show: ["bounce", 5], hide: ["blind", 1],

        close: function () {
            debugger;
            var values = new Array();

            $(this).multiselect("getChecked").each(function (index, item) {
                values.push($(item).val());
            });
            $("input[id*=selectedValues]").val(values.join(","));
            document.getElementById("<%=hdnDepartment.ClientID %>").value = values;
            if (document.getElementById("<%=hdnDepartment.ClientID %>").value != "") {
                //$("#<%=Button1.ClientID %>")[0].click();
                $.ajax({
                    type: "POST",
                    url: "wfrmLeave_PermisssionReport.aspx/Populate",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                    }
                });
            }
        }
    })
    .multiselectfilter();
}); 
```

我的方法是：

```
[System.Web.Services.WebMethod]
public  void Populate()
{
    strQuery = "select * from tblhrims_employeedetail where  nvrresigned='No'";
    if (ddlBusinessUnit.SelectedItem.ToString() != "Select")
    {
        strQuery += "and nvrbusinessunit ='" + ddlBusinessUnit.SelectedValue + "' ";
    }
    if (hdnDepartment.Value != "")
    {
        string strDepartment = hdnDepartment.Value;
        string[] strarrDepartment = strDepartment.Split(',');
        strDepartment = "";
        for (int i = 0; i < strarrDepartment.Length; i++)
        {
            strDepartment += "'" + strarrDepartment[i] + "'" + ",";
        }
        strDepartment = strDepartment.TrimEnd(',');
        strQuery += "and nvrdepartment in(" + strDepartment + ")";
    }

    populateDropDown(strQuery, ddlEmployeeName, "nvrempname", "nvrempcode");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:14:21.210

我希望这可以帮助你[http://trentgardner.net/net/asp-net-webmethods-with-jquery-and-ajax/](http://trentgardner.net/net/asp-net-webmethods-with-jquery-and-ajax/)

# php - PHPMailer不发送邮件

> ID：12563513
> 
> 赞同：0
> 
> 时间：2012-09-24T10:51:33.300
> 
> 标签：php, phpmailer

我正在尝试发送订单确认并通知卖家有关用户购买的信息。然而，PHPMailer 只发送第一封电子邮件。这里又快又脏：

```
$bodytext = 'Mail.';
$email = new PHPMailer();
$email->From      = 'mail@mail.com';
$email->FromName  = 'Sender';
$email->Subject   = 'Subject';
$email->Body      = $bodytext;
$email->AddAddress($_REQUEST['sahkoposti']);
$email->AddAttachment($path, 'kuitti'.$ordernumber.'.pdf');
return $email->Send();
?>

<?php

//send message to seller

$bodytext = 'Mail.';
$email = new PHPMailer();
$email->From      = 'mail@mail.com';
$email->FromName  = 'Sender';
$email->Subject   = 'Tilaus vastaanotettu';
$email->Body      = $bodytext;
$email->AddAddress("mail@mail.com");
$email->AddAttachment($path, 'kuitti'.$ordernumber.'.pdf');
return $email->Send();
?> 
```

甚至可以从一个脚本发送多封电子邮件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:55:07.830

有可能，但是您`return`在第一条语句中使用，这将停止函数的执行。删除第一个返回（只需使用`$email->Send();`），它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:56:40.300

第二封电子邮件没有被执行，因为您在发送第一封电子邮件后立即**返回**，您应该更改：

```
return $email->Send(); 
```

为了这：

```
$email->Send(); 
```

# tdd - Joel 的功能规范中缺少要求

> ID：12563516
> 
> 赞同：1
> 
> 时间：2012-09-24T10:51:47.480
> 
> 标签：tdd

我假设大多数人都阅读了[Joel 的 Painless Functional Specification 文章](http://www.joelonsoftware.com/articles/fog0000000036.html)。在第二部分，[什么是规范？](http://www.joelonsoftware.com/articles/fog0000000035.html)，提供了[样本规格](http://www.joelonsoftware.com/articles/WhatTimeIsIt.html)。但是没有提到要求。我有两个问题：

1.  需求如何适应示例功能规范？我假设在编写功能规范之前必须知道需求。所以它们不能成为功能规范的一部分，但它们记录在哪里？

2.  测试驱动开发 (TDD) 如何融入整个 func 规范/技术规范拆分 Joel 大纲（如下）：

> 功能规范完全从用户的角度描述产品将如何工作。它不关心事情是如何实现的。它谈论功能。它指定屏幕、菜单、对话框等。
> 
> 技术规范描述了程序的内部实现。它讨论了数据结构、关系数据库模型、编程语言和工具的选择、算法等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:00:18.047

## 功能设计

这是**什么**。

你在设计什么？用户会用它做什么？它将为他们提供什么价值？

功能规格*是*要求。各种用户执行的每个操作（创建帐户、登录、查看时间）都是系统的要求。

但是，您必须更深入地问自己，“如果迈克不记得他的密码会怎样？” “‘令人兴奋’对 Cindy 意味着什么？” 等等（这就是 Joel 指出它不是一个完整的规范的原因——它缺少很多细节。）

## TDD

测试驱动设计是**HOW**

类、方法等如何工作？错误如何处理？数据如何通过代码流动？

# iframe - 如何在 Windows 8 应用程序中显示 Vimeo 视频？

> ID：12563518
> 
> 赞同：0
> 
> 时间：2012-09-24T10:51:56.967
> 
> 标签：iframe, webview, windows-8, embed, vimeo

我想在 Windows 8 应用程序中显示来自 Vimeo 的视频。我在 C#/XAML 中开发了一个应用程序，并希望在 iframe 中嵌入视频（通过 WebView 控件）。

**这是我的代码：**

```
string EmbedCode = "<iframe src=\"http://player.vimeo.com/video/33713088?title=0&amp;byline=0&amp;portrait=0\" width=\"640\" height=\"360\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen>";
MyWebView.NavigateToString(EmbedCode); 
```

不幸的是，它不起作用。有谁知道这是如何在官方 Vimeo 应用程序中完成的？

# sql - 如何手动插入身份？

> ID：12563522
> 
> 赞同：34
> 
> 时间：2012-09-24T10:52:03.190
> 
> 标签：sql, sql-server, sql-server-2008

```
CREATE TABLE masterTbl (
id INT IDENTITY(1,1) CONSTRAINT pk_id PRIMARY KEY,
name VARCHAR(100))

INSERT INTO masterTbl VALUES ('ABC', 'XYZ','PQR') 
```

现在

```
Select * FROM masterTbl 
```

结果：

```
id  | name
---------------------
1 |  ABC
2 |  XYZ
3 |  PQR

DELETE FROM masterTbl WHERE id=1 
```

现在

```
Select * FROM masterTbl 
```

结果：

```
id |  name
---------------------
2 |  XYZ
3 |  PQR 
```

现在我想运行：

```
INSERT INTO masterTbl (id, name) VALUES (1, 'MNO') 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-24T10:54:26.680

以最简单的形式，您需要暂时允许插入标识值

```
SET IDENTITY_INSERT masterTbl ON
INSERT INTO masterTbl (id, name) VALUES (1, 'MNO')
SET IDENTITY_INSERT masterTbl OFF 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-24T10:54:36.773

是的，您可以手动设置身份字段

```
SET IDENTITY_INSERT masterTbl ON 
```

然后插入你的数据

```
INSERT INTO masterTbl (id, name) VALUES (1, 'MNO') 
...... 
```

记得打电话

```
SET IDENTITY_INSERT masterTbl OFF 
```

重新启用正确的功能

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T10:53:49.783

```
SET IDENTITY_INSERT masterTbl ON 
```

[https://docs.microsoft.com/en-us/sql/t-sql/statements/set-identity-insert-transact-sql?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-identity-insert-transact-sql?view=sql-server-2017)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-14T14:00:14.637

可以执行以下步骤：

I. 启用标识插入，这将禁止 SQL Server 在表的标识列中自动插入值：

```
SET IDENTITY_INSERT ON 
```

二、执行“手动”插入操作，指定所有受影响的列名：

```
INSERT INTO masterTbl (id, name)
VALUES (1, 'ABC',
        2, 'XYZ',
        4, 'PQR') 
```

*   如果您跳过列出列名，SQL Server 将弹出一条错误消息。

三、完成后，通过禁用之前的手动插入功能重新启用自动标识值插入：

```
SET IDENTITY_INSERT OFF 
```

四。你完成了！

# c# - 使用 wpf,mvvm 从选中列表框中选择一个项目

> ID：12563540
> 
> 赞同：1
> 
> 时间：2012-09-24T10:53:47.733
> 
> 标签：c#, wpf, mvvm

我是 MVVM 的新手，我在带有标题列表的视图中有一个选中列表框（已将 ViewModel 中的公开属性绑定到此选中列表框控件）...

这是我填充 ListCheckBox 的 XAML 代码 -

```
<ListBox x:Name="lstCode" ItemsSource="{Binding Code,Mode=TwoWay}"  Grid.Row="1" Style="{StaticResource ListBoxStyle}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox x:Name="chkBox" IsChecked="{Binding IsChecked,Mode=TwoWay}"  Content="{Binding Code_Name}" Margin="0" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

此控件显示正确的项目列表以及列表框中每个项目的复选框...

viewmodel 中的代码应该是什么才能使其以两种方式工作 - 从数据库中获取代码时，它应该自动从 listcheckedbox 中选择代码，当用户选择一个或多个代码时，viewmodel 应该能够知道项目选择...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:02:19.580

通常，对于`TwoWay`绑定，您需要在要绑定到的 ViewModel 上实现[INotifyPropertyChanged接口。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

在这种情况下，您的 ViewModel 必须提供一个属性，该属性返回您的视图可以绑定到的集合，例如[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。

这`ObservableCollection`已经允许您以自动传达 View 和 ViewModel 之间更改的方式添加、更新和删除该列表中的项目。

对于其余部分，我建议开始深入研究 MVVM 深度。要充分利用 WPF 的功能，您需要自己了解基础知识。一个很好的起点是这个 SO 线程：[MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

# c# - 在 REST 服务下的虚拟目录下托管时出现 Soap Web 服务错误

> ID：12563543
> 
> 赞同：2
> 
> 时间：2012-09-24T10:53:57.930
> 
> 标签：c#, wcf, web-services, iis

我试图自己找到一些解决方案，但我失败了。我在 IIS 的虚拟目录下托管了 WCF Web 服务

```
http://host/soap/myservice.svc 
```

Soap 服务放在 REST 服务下

```
http://host - REST services address 
```

当我尝试从 WCF 服务执行方法时，出现此错误（在服务器端）：

> *未能查找通道以接收传入消息。未找到端点或 SOAP 操作。*

当我在同一个 IIS 上托管 WCF 服务但作为独立应用程序时

```
http://host:81 
```

一切正常。但我需要他们在那些 REST 服务之下。

这是`web.config`svcutil 生成的客户端：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IMyService" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
            maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
            allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
              enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
                algorithmSuite="Default" establishSecurityContext="true" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://host/soapservices/MyService.svc"
          binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMyService"
          contract="IMyService" name="WSHttpBinding_IMyService">
        <identity>
          <servicePrincipalName value="host/host" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

这是`web.config`肥皂服务：

```
 </appSettings>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MyServiceName">
        <host>
          <baseAddresses>
            <add baseAddress="http://host/SOAPServices/MyService/" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="wsHttpBinding" contract="IMyService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
</configuration> 
```

# php - 阿拉伯语电子邮件地址的正则表达式

> ID：12563547
> 
> 赞同：0
> 
> 时间：2012-09-24T10:54:07.517
> 
> 标签：php, preg-match

**已编辑**

我用谷歌搜索为我的网络应用程序编写了一个自定义正则表达式，但我仍然无法得到我想要的。

我想检查一个字符串是否通过这个模式：

```
*STRING*STRING INCLUDING ALL CHARS*STRING INCLUDING ALL CHARS# 
```

例如：

```
*STRING*the first string تست یک*the second string تست دو# 
```

应该返回 TRUE

```
*sdsdsd*the first string تست یکthe second string تست دو# 
```

应该返回 FALSE（因为它不是 *STRING*STRING*STRING# 的模式）

```
$check = preg_match("THE RULE", $STRING); 
```

我在这里要求规则，如果我以错误的方式提出问题，对不起......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:59:45.803

不需要正则表达式，使用`filter_var()`：

```
function checkEmail($str){
    $exp = explode('*', $str);
    if(filter_var($exp[1], FILTER_VALIDATE_EMAIL) && $exp[2] && $exp[3] && substr($str, strlen($str)-1, strlen($str)) == '#') {
        return true;
    }
    return false;
}

$valid = checkEmail('*example@example.com*the first string تست یک*the second string تست دو#'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:06:44.913

检查字符串是否具有此模式`*STRING*STRING*STRING#`：

```
if (preg_match(
    '/^       # Start of string
    \*        # Match *
    ([^*]*)   # Match any number of characters except *
    \*        # Match *
    ([^*]*)   # Match any number of characters except *
    \*        # Match *
    ([^#]*)   # Match any number of characters except #
    \#        # Match #
    $         # End of string/x', 
    $subject, $matches)) 
```

然后使用

```
filter_var($matches[1], FILTER_VALIDATE_EMAIL) 
```

检查第一组是否可能包含电子邮件地址。

# java - 使用 Java 和 Spring 在 Oracle 数据库中插入 UTC/GMT 日期

> ID：12563553
> 
> 赞同：4
> 
> 时间：2012-09-24T10:54:31.173
> 
> 标签：java, oracle, jdbc, timezone, spring-jdbc

当我`new Date()`使用 Oracle 数据库插入对象时`jdbcTemplate`，我可以看到 jdbc 驱动程序或 Spring jdbcTemplate`Date`使用本地 JVM 偏移量插入。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
Date timeZoneDate = sdf.parse("09-SEP-1987"); 
```

例如，当我插入在 GMT 中创建的 Date 对象时，如果 JVM 时区是美国，则会在 Oracle 数据库中插入 08-SEP-1987。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T06:37:10.733

`java.util.Date`Oracle 也不存储`Date`时区信息。在您的情况下，Jdbc 驱动程序使用 JVM 时区转换您的日期。您可以使用以下选项之一：

*   如果您使用的是 PreparedStatement，您可以使用`setDate(int parameterIndex, Date x, Calendar cal)`方法`Calendar` 在 UTC 时区中指定。
*   对于 Spring`jdbcTemplate`而不是插入`Date`对象，插入`Calendar`时`UTC`区
*   `TimeZone.setDefault(TimeZone.getTimeZone("GMT"))`可以在 JVM lvl 上设置
*   `-Duser.timezone=GMT`在 JVM 启动时使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T11:29:44.253

Oracle[`DATE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref151)数据类型没有时区字段。它仅存储日期和时间组件。因此，当`jdbc`将带有时区的日期插入`DATE`数据库字段时，它必须决定如何处理将消失的时区信息。

在您的情况下，似乎在插入之前将`jdbc`java 转换`Date`为语言环境时区。插入时将日期`09-SEP-1987 00:00:00 UTC`转换为`08-SEP-1987 20:00:00 EST`并删除时区信息。

知道了这一点，您可以在插入`DATE`字段时不指定时区，以便使用默认语言环境时区，或者同时修改默认时区和 java`Date`时区。

# android - Junit如何获取父类中的变量？

> ID：12563558
> 
> 赞同：1
> 
> 时间：2012-09-24T10:54:41.820
> 
> 标签：android, junit

我有这样的课程：

```
Class A extends B
Class B extends C

Class C{
    protected ArrayList<Dialog> variable;
} 
```

而我想做A类的JUnit测试，我想得到C类中变量的实例，有没有办法做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:48:47.080

您必须将 getter 和 setter 添加到 B 类，然后您可以像这样访问 A 类中的变量

```
class C{
 protected Object variable;
}
class B extends C{
protected void setObject(Object obj)
   this.variable = obj;
}

protected Object getObject(){
   return this.variable;
}
}

class A extends B{
} 
```

# actionscript-3 - Away3d 相机路径

> ID：12563559
> 
> 赞同：1
> 
> 时间：2012-09-24T10:54:42.770
> 
> 标签：actionscript-3, away3d

如果知道方位角，如何知道路径的坐标。我想在远离 3d 的物体周围移动我的相机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:14:03.590

通过从起始方位角到目标的[插值在](http://en.wikipedia.org/wiki/Interpolation)[球坐标系](http://en.wikipedia.org/wiki/Spherical_coordinate_system)中移动相机- 这将是您的轨迹。 您可以从\到笛卡尔坐标系[转换](http://en.wikipedia.org/wiki/Spherical_coordinate_system#Coordinate_system_conversions)以检索\将当前坐标传递给 away3d 渲染器。

你们都可能想要使用非线性相机加速（为了更真实的感觉）它可以用[贝塞尔曲线来实现](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)

PS。如果您发布您的实现，我将不胜感激，因为我将在我的下一个项目中需要这个功能。你会为我节省很多时间:)

或者只是使用相机从[Object3D](http://away3d.com/livedocs/away3d/4.0/away3d/core/base/Object3D.html)继承的平移和旋转方法， 这都包含在 Away3D 示例项目中。Allso [Away3D 有路径助手包](https://github.com/away3d/away3d-core-fp11/tree/master/src/away3d/paths)

# r - NaN 作为 kernlab 的高斯过程预测的输出

> ID：12563563
> 
> 赞同：0
> 
> 时间：2012-09-08T12:52:50.327
> 
> 标签：r

我正在尝试使用*kernlab 中的 gausspr**函数*解决回归问题。输入是标准化的。但是 predict(model, test.set) 的输出结果是一组 NaN 值！

训练集，X

```
M1 -0.3437191 -0.1755636 -0.1914969 -0.205308 -0.1595554
M2 -0.3437191 -0.1755636 -0.1914969 -0.205308 -0.1595554
M3 -0.3437191 -0.1755636 -0.1914969 -0.205308 -0.1595554
M4 -0.3437191 -0.1755636 -0.1914969 -0.205308 -0.1595554
M5 -0.3437191 -0.1755636 -0.1914969 -0.205308 -0.1595554 
```

训练输出，Y 是

```
Y = c(1,2,3,4,5) 
```

测试集，Z

```
T1   1.5530507 -0.2152377 -0.202634 -0.1460405 -0.1592964
T2   1.5530507 -0.2152377 -0.202634 -0.1460405 -0.1592964
T3 -0.3736244 -0.2152377 -0.202634 -0.1460405 -0.1592964
T4 -0.3736244 -0.2152377 -0.202634 -0.1460405 -0.1592964
T5 -0.3736244 -0.2152377 -0.202634 -0.1460405 -0.1592964 
```

编码：

```
library(kernlab)
model <- gausspr(X,Y)
predict(model, Z) 
```

输出是

```
> head(res14)
     [,1]
[1,]  NaN
[2,]  NaN
[3,]  NaN
[4,]  NaN
[5,]  NaN
[6,]  NaN 
```

我想知道为什么我会得到这个输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:09:46.080

因此，因为输入数据具有一组零方差列，所以可以生成协方差矩阵（有人可以说为什么吗？），最终结果将是 NaN 值。

# javascript - 在javascript中缓存对象

> ID：12563565
> 
> 赞同：2
> 
> 时间：2012-09-24T10:55:04.097
> 
> 标签：javascript, json, caching

我有这个代码的 poltergeist：

javascript代码：

```
var cache = {};

cache.init = function()
{   
    if(typeof(this.memory)=='undefined')
        this.memory = {};
};

cache.set = function(key, value)
{
    this.memory[key] = value;
};

cache.get = function(key)
{
    if(console)
    {
        console.log("memory: ");
        console.log(cache.memory);

        console.log("key: "+key);
        console.log(cache.memory[key]);
    }

    if(typeof(cache.memory[key])!='undefined')
        return cache.memory[key];

    return false;
};

var route = {};

route.load = function(url)
{
    var route_list = cache.get('route_list');

    if(route_list==false)
    {
        route_list = this.getList();
        cache.set('route_list', route_list);
    }

    return route_list;
};

route.getList = function()
{
    var result = false;
    $.ajax(
    {
        url: 'route.json',
        dataType: 'json',
        async: false,
        success: function(json)
        {
            result = json;
        }
    });
    return result;
};

cache.init();
route.load();
route.load(); 
```

我想用“缓存”设置和获取在客户端缓存一些对象。

route.json 文件的内容：

```
{    
    "/example":
    {
        "controller":   "example"
    },
    "/example/show":
    {
        "controller":   "example",
        "method":   "show"
    }
} 
```

萤火虫的结果是：

```
memory:
Object
{
route_list
    Object { /example={...}, /example/show={...}}
}
key: route_list
undefined 
```

为什么未定义？我可以使用 firebug oO 在对象内部导航

编辑：我添加了第二次调用 route.load(); 我得到未定义的密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:49:13.317

好的，现在我可以看到你的问题了。你的代码

```
route.load();
route.load(); 
```

1.  尝试从缓存中获取 [uncached] 值：
    1.  这会记录内存对象
    2.  并记录`undefined`，因为什么都没有
2.  因为它返回 false
    1.  同步获取 JSON
    2.  并将其设置在缓存中
3.  再次尝试获取 [cached] 值
    1.  记录内存对象
    2.  并记录缓存的对象

一切都正确执行。现在，您在控制台中看到内存对象两次 - 但它是同一个对象，在检查它时处于当前状态，而不是在您记录它时的状态。也可以看看

*   [如何更改 console.log 的默认行为？（* Safari 中的错误控制台，没有附加组件*）](https://stackoverflow.com/q/7389069/1048572)
*   [console.log 中的错误？](https://stackoverflow.com/q/11118758/1048572)
*   [console.log 中的值错误](https://stackoverflow.com/q/11214430/1048572)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:51:52.800

错误来自node.js：

```
 socket.emit('zapp_client', '/example');
    socket.emit('zapp_client', '/example/show'); 
```

我认为它是异步的：

```
 socket.emit('zapp_client', '/example');
    setTimeout(function()
    {
        socket.emit('zapp_client', '/example/show');
    }, 1000); 
```

有了这个我暂时解决了这个问题......

# javascript - Three.js中的旋转锚点

> ID：12563569
> 
> 赞同：3
> 
> 时间：2012-09-24T10:55:08.550
> 
> 标签：javascript, three.js

我正在定义一个锥体，我需要能够围绕其顶点（锥体厚度最小的点）旋转。我还找不到设置旋转发生点的方法。

```
var coneGeometry = new THREE.CylinderGeometry(1000, 0, width, 50, 50, false);
var cone = new THREE.Mesh(coneGeometry, material);
cone.position.x = x;
cone.position.y = y + width / 2;
cone.position.z = z;
// I want this rotation to happen around the point given by the (x, y, z) location
cone.rotation.x = dip; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:07:23.707

圆锥几何体以原点为中心。您需要做的是在创建圆锥几何体后立即平移它，使圆锥体的尖端位于原点。

```
coneGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, coneHeight/2, 0 ) ); 
```

（平移符号的变化取决于圆锥的哪一端是小端。）

现在，当您旋转圆锥体时，它将围绕尖端旋转。提示也将位于您设置的位置。

编辑：您现在可以这样做，而不是：

```
coneGeometry.translate( 0, coneHeight/2, 0 ); // three.js r.72 
```

# asp.net-web-api - 如何访问 SetDefaultContentHeaders 中的底层对象？

> ID：12563571
> 
> 赞同：3
> 
> 时间：2012-09-24T10:55:31.250
> 
> 标签：asp.net-web-api

我有一个 web api，我在其中返回一个对象。当我使用接受标头“image/jpg”时，我想要该对象的图像表示，但我想根据我返回的对象设置文件名。我已经实现了一个`BufferedMediaTypeFormatter`并认为我应该在这样的方法中做到这一点`SetDefaultContentHeaders`：

```
public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, MediaTypeHeaderValue mediaType)
{
    base.SetDefaultContentHeaders(type, headers, mediaType);
    var myObject = // How do I get this from the response?
    var contentDispositionHeader = new ContentDispositionHeaderValue("attachment") 
        { FileName = myObject.FileName };
    headers.ContentDisposition = contentDispositionHeader;
} 
```

所以问题是当我在时如何获取底层对象`SetDefaultContentHeaders`？`HttpResponseMessage`我可以通过从传递给方法的方法中读取它来在测试版中做到这一点，但它已被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:58:22.160

您无法在此处获取对象实例。

格式化程序中唯一可以访问对象的位置是`WriteToStreamAsync`，到那时您不能再修改标头，因为它们已经发送。

您有两个选择，将文件名保存在`request.Properties`控制器中并通过覆盖在格式化程序中检索`GetPerRequestFormatterInstance`（因为它在 之前运行`SetDefaultContentHeaders`）。然后你可以使用这个值`SetDefaultContentHeaders`

```
//Controller
public Url Get(int id)
        {
            Request.Properties.Add("name", _repo.Get(id).Name);
            return _repo.Get(id);
}

//Formatter
        public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, System.Net.Http.HttpRequestMessage request, MediaTypeHeaderValue mediaType)
        {
            //here save the request.Properties["name"] to some local field which you can use later
            return base.GetPerRequestFormatterInstance(type, request, mediaType);
        } 
```

另一种是在管道末端使用委托处理程序：即（当然，当您想要反序列化时，您已经过滤掉等等）：

```
public class RenameHandler : DelegatingHandler
    {
        protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
        {
            return base.SendAsync(request, cancellationToken).ContinueWith<HttpResponseMessage>(t =>
            {
                var msg = t.Result;
                var myobj = msg.Content.ReadAsAsync<IMobi>().Result;
                msg.Content.Headers.ContentDisposition.FileName = myobj.Name + ".mobi";

                return msg;
            });
        }
    } 
```

# objective-c - xCode 4.5 新文件 > __add_unsigned 的子类？

> ID：12563572
> 
> 赞同：1
> 
> 时间：2012-09-24T10:55:33.567
> 
> 标签：objective-c, xcode, cocos2d-iphone

当我尝试将新文件添加到我的项目时，我无法选择它的子类。

我执行以下步骤：Objective-C 类 > 下一步 > 当我打开组合框的子类时，组合框会在 1 纳秒内填充正确的类。然后它全部变为 __add_unsigned..![在此处输入图像描述](../Images/f3829f4a5feceb19e8c309aae6064450.png)

有谁知道为什么会这样显示？

# wdk - WIndows 驱动程序检索新添加的 RAM 的地址

> ID：12563575
> 
> 赞同：2
> 
> 时间：2012-09-24T10:55:41.050
> 
> 标签：wdk

如果我在我的 DIMM 插槽中添加一个新 RAM，如何在 Windows 内核中找到相同的物理地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:24:27.393

不是。RAM没有身份。就像水一样。如果你将一升加到一升，你就有两升水，但你不能指出哪个是哪个。

# .net - Web API：HttpResponseMessage 中的内容

> ID：12563576
> 
> 赞同：32
> 
> 时间：2012-09-24T10:55:42.273
> 
> 标签：.net, asp.net-web-api, httpresponse, mediatypeformatter

在我的一个 Get 请求中，我想返回一个包含一些内容的 HttpResponseMessage。目前我的工作方式如下：

```
var header = new MediaTypeHeaderValue("text/xml");
Request.CreateResponse(HttpStatusCode.OK, myObject, header); 
```

但是，由于我使用的是静态请求，这变得很难测试。根据我的阅读，我应该能够做到以下几点：

```
return new HttpResponseMessage<T>(objectInstance); 
```

但是，似乎无法做到这一点。是因为我使用的是旧版本的 WebApi / .NET？

* * *

在旁注中，我发现您可能会创建如下响应：

```
var response = new HttpResponseMessage();
response.Content = new ObjectContent(typeof(T), objectInstance, mediaTypeFormatter); 
```

令我困惑的是为什么我必须在这里添加一个 mediaTypeFormatter。我在 global.asax 级别添加了媒体类型格式化程序。

谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-24T12:03:35.457

`HttpResponseMessage<T>`Beta 版后被移除。现在，`HttpResponseMessage`我们有一个 typed 而不是 typed`ObjectContent`

如果您`HttpResponseMessage`使用其默认的无参数构造函数手动创建，则没有可用于执行内容协商的请求上下文 - 这就是您需要指定格式化程序或手动执行内容协商的原因。

我知道你不想这样做 - 所以改用这个：

```
HttpResponseMessage response = Request.CreateResponse<MyObject>(HttpStatusCode.OK, objInstance); 
```

这将创建依赖于针对请求执行的内容协商的响应消息。

[最后，您可以在此链接](http://www.strathweb.com/2012/07/everything-you-want-to-know-about-asp-net-web-api-content-negotation/)上阅读有关内容协商的更多信息

# wpf - 使用 CellTemplate 和 CellEditingTemplate 在 DataGrid 中验证 IDataErrorInfo

> ID：12563577
> 
> 赞同：0
> 
> 时间：2012-09-24T10:55:43.850
> 
> 标签：wpf, validation, datagrid, idataerrorinfo, celleditingtemplate

我在 DataGrid 中的验证方面遇到了麻烦。我在模型类中使用 IDataErrorInfo 验证。

问题出在具有单独 CellTemplate 和 CellEditingTemplate 的可编辑 DataGrid 中（注意是非空属性 - 如果为空或为空，验证将返回错误）：

```
<!-- some other validated columns -->
<DataGridTemplateColumn Header="Note">
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>                                    
            <TextBox Name="textBoxNote" Text="{Binding Note, ValidatesOnDataErrors=True}" />                                    
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Note}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

在 Save 按钮上，我检查 MyObject.Error 验证属性，如果不是 null，我会显示一个 MessageBox。问题是，当将第一列（不是 Note 列）更改为有效值然后单击 Save 按钮时，.Error 属性为 null - 这是预期的（尽管不需要）行为，因为与 Note 属性上的 ValidatesOnDataError 绑定从未发生（TextBox 控件甚至从未存在过！）。但是，如果我在 TextBlock 上将 ValidatesOnDataErrors 设置为 true，那么我会在 DataGrid 中显示的每个对象（例如来自数据库）上得到不需要的验证，而我并不关心；在这种情况下，验证也可能需要很多时间......

处理这个问题的正确方法是什么？我想在模型类中保留验证（对象应该知道它是否有效）。有没有办法在代码隐藏（保存按钮事件）中强制验证行绑定对象？或者我应该以某种方式初始化 .Error 对象构造？还有其他想法吗？

**编辑：** 如何将整行（所有单元格）置于编辑模式（CellEditingTemplate）？然后，所有的控件都将被加载和数据绑定，这也意味着验证......

谢谢大家， DB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:42:28.657

好的，我设法重新验证了 IDataErrorInfo 对象——一种强制的 IDataErrorInfo 验证。否则我可以将新对象添加到 DataGrid，但属性（编辑的除外）从未得到验证。

在我的所有模型对象（扩展 IDataErrorInfo）的超类中，我添加了这个方法：

```
public virtual void Revalidate() // never needed to override though
{
    Type type = this.GetType();

    // "touch" all of the properties of the object - this calls the indexer that checks
    // if property is valid and sets the object's Error property 
    foreach (PropertyInfo propertyInfo in type.GetProperties())
    {                
        var indexerProperty = this[propertyInfo.Name];
    }
} 
```

现在，当用户将新对象添加到 DataGrid 时，我手动调用 myNewObject.Revalidate() 方法来设置我在将对象保存到数据库之前检查的 Error 属性。也许这不是最好的解决方案，但它对我来说非常轻松。

谢谢和问候， DB

# visual-c++ - 如何在列表视图中显示文本文件的数据

> ID：12563584
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:56:34.933
> 
> 标签：visual-c++

我想显示来自

> 文本文件

在列表视图和树视图中。root 将是文件名，但我不知道该怎么做，问题是在列表视图中显示文本文件数据，我对此一无所知。文本文件数据非常简单，它只是一个双值的方阵，例如：

> 21.06 34.06 5.0
> 
> 12.78 45.25 6.9
> 
> 12.89 45.98 5.5

在列表视图中我想显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:34:31.110

**读取文本文件**

```
listBox1->Items->Clear();
    try   
    {    
        String* textFile = String::Concat(windir,(S"\\mytest.txt"));                               
            StreamReader *reader=new  StreamReader(textFile);
        do
        {
            listBox1->Items->Add(reader->ReadLine());
        }   
        while(reader->Peek() != -1);
    }      

    catch (System::Exception *e)
    { 
        listBox1->Items->Add(e);
    }

} 
```

**查看文件信息**

```
listBox1->Items->Clear();
 String* testfile = String::Concat(windir, (S"\\notepad.exe")); 
 FileInfo *pFileProps  =new FileInfo(testfile);

 listBox1->Items->Add(String::Concat(S"File Name = ", (pFileProps->get_FullName() )) );
 listBox1->Items->Add(String::Concat(S"Creation Time = ", (pFileProps->get_CreationTime() ).ToString()) );
 listBox1->Items->Add(String::Concat(S"Last Access Time = "  ,(pFileProps->get_LastAccessTime() ).ToString()) );
 listBox1->Items->Add(String::Concat(S"Last Write Time = ", (pFileProps->get_LastWriteTime() ).ToString()) );
 listBox1->Items->Add(String::Concat(S"Size = ", (pFileProps->get_Length() ).ToString()) ); 
```

有关更多信息，请参见[此处](http://support.microsoft.com/kb/307398)

对于树视图，您可以关注此[页面](http://www.functionx.com/visualc/treeview/tvdlg1.htm)

# iphone - 如果更改视图框架，为什么所有已经设置的自动布局约束都消失了？

> ID：12563585
> 
> 赞同：0
> 
> 时间：2012-09-24T10:56:37.313
> 
> 标签：iphone, ios6, autolayout

![在此处输入图像描述](../Images/befe034e4658b5f6d3c801fa0bedefcb.png)

如屏幕截图所示，我制作了所有 4 个视图`widths equally`，`height equally`然后如果我更改绿色视图的帧大小，所有其他约束`Horizontal spacing`都`vertical spacing`消失了，我必须从头开始，所有视图都可以在纵向和横向上工作。

同样在那之后我再次设置所有约束并且仍然处于横向模式标签没有正确显示，如屏幕截图所示![在此处输入图像描述](../Images/1529b336a3e547547a8ae4b065ccee49.png)

我设置了这些约束。![在此处输入图像描述](../Images/1693f36e52147591792bbca305b4b054.png)

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:51:50.410

查看日志以获取更多信息，以确保您的约束是否被打破。

请按照以下步骤查看您是否有**不可满足/不明确的约束**

1）运行应用程序，然后暂停它。

2) 在 lldb 调试器中输入/发送以下消息到 UIWindow。

```
 po [UIWindow keyWindow] _autoLayoutTrace] 
```

3）这为您提供了自动布局跟踪，您可以轻松找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:09:59.877

已经删除的约束的原因是没有满足约束。如果发现约束条件不满足，系统会智能地调整约束条件。请参阅上一个答案并确保 autoLayoutTrace 没有违规。

# xml - 应用引擎 元素缺失错误

> ID：12563587
> 
> 赞同：3
> 
> 时间：2012-09-24T10:56:39.243
> 
> 标签：xml, google-app-engine, error-handling, thread-safety

所以我有这个错误，我见过很多人都有：

```
appengine-web.xml does not contain a <threadsafe> element. 
```

但总是提供的解决方案是添加

```
<threadsafe>true</threadsafe> 
```

到 appengine-web.xml 文件。这是我的 appengine-web.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>dummy</application>
  <version>1</version>
  <threadsafe>true</threadsafe>
  <!-- Configure java.util.logging -->
  <system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
  </system-properties>
</appengine-web-app> 
```

我仍然得到没有找到线程安全元素的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:17:52.367

我认为 `<threadsafe>true</threadsafe>`需要成为您的 appengine-web.xml 中的第一个条目

这是我的 xml 没有错误：

```
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <!--<async-session-persistence enabled="true"/>-->
    <threadsafe>true</threadsafe>
    <application>dummy</application>

    <version>443</version>
    <sessions-enabled>true</sessions-enabled>
    <inbound-services>
        <service>mail</service>
        <service>xmpp_message</service>
    </inbound-services>
    <system-properties>
      <property name="com.google.gdata.DisableCookieHandler" value="true"/>
    </system-properties>
</appengine-web-app> 
```

# android - 防止 Android 在资源上生成新 ID

> ID：12563590
> 
> 赞同：0
> 
> 时间：2012-09-24T10:56:51.423
> 
> 标签：android, resources

有谁知道是否可以让 Android 不为添加到原始、可绘制和其他资源文件夹的资源生成新 ID？问题是，如果我添加一个名为 3.jpg 的图像，然后添加另一个名为 2.jpg 的图像，则图像 3.jpg 的 ID 会更改。我需要保持 ID 的静态，因为 ID 在 XML 文件中定义并在应用程序中用于根据 ID 获取资源。

我在测试时可能做错了什么，所以可能是 ID 没有改变，但据我所知，在添加新资源时 ID 改变了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:05:08.683

据我所知，R.java 是自动生成的，所有资源 ID 都是由 eclipse 内部分配的。从技术上讲，您的代码不应依赖于生成的 ID。因此，即使 ID 不断变化，也绝对没问题。如果您依赖代码中生成的 ID，您将不断遇到问题。

# php - 如何将动态添加的行的值存储在数据库中

> ID：12563592
> 
> 赞同：0
> 
> 时间：2012-09-24T10:57:07.090
> 
> 标签：php, mysql, database, forms

我有一个表单，用户可以根据需要在其中添加更多字段...

他可以添加 1,2,3,.. 行的字段..

我使用的代码在这里，

```
<?php
echo '
<form method="post" action="">
   <input type="hidden" name="mod" value="'.$mod.'" />
   <table style="width: 700px">
   <tr>
       <th>Description</th>
       <th>Quantity</th>
       <th>Price</th>
   </tr>';

// Loop to prepare the display of 100 product lines
for ($i=0; $i<100; $i++) {

   if ($text['quantity'][$i] == "") $text['quantity'][$i] = 1;
   if ($text['unit'][$i] == "") $text['unit'][$i] = "0.00";
   // Display only the first line
   if ($nbr_ligne == 0) $nbr_ligne = 1;
   if ($i >= $nbr_ligne) $display = 'style="display:none"';
   echo '
   <tr id="cell'.$i.'" '.$display.'>
       <td>
           <textarea name="text[detail]['.$i.']">'.stripslashes($text['detail'][$i]).'</textarea>
           <br />
           <a href="javascript:void(0)" onclick="javascript:document.getElementById(\'cell'.($i+1).'\').style.display=\'table-row\'; this.style.display=\'none\'">[+]</a>
       </td>
       <td>
           <input name="text[quantity]['.$i.']" id="q'.$i.'" value="" size="4" />
       </td>
       <td>
           <input name="text[unit]['.$i.']" id="u'.$i.'" value="" size="7" /> USD
       </td>
   </tr>';
}

echo '
   </table>
   <input type="submit" name="save" value="Save" />
</form>
';
?> 
```

字段添加成功。

现在我想将这些字段的值存储在数据库中。

我用于此的代码是：

```
if(isset($_POST['save']))
{
    echo mysql_error($db);

       extract($_POST);
       $insert=mysql_query(" insert into add (description, quantity, price) values ('{$text['detail'][$i]}','{$text['quantity'][$i]}','{$text['unit'][$i]}')") or die("unable to insert"); 
} 
```

但它不起作用。请帮帮我。我非常需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:04:10.257

如果 $i 等于添加的行的 nr，则需要将 mysql 查询放入循环中：

```
if(isset($_POST['save']))
{
for ($e = 1; $e <= $i; $e++) {
$insert=mysql_query(" insert into add (description, quantity, price) values ('".$text['detail'][$e]."','".$text['quantity'][$e]."','".$text['unit'][$e]."')") or die("unable to insert"); 
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:08:16.607

这里的问题是 $i 尚未在您用于保存到数据库的脚本中初始化。如果数字不存在，您将需要从 0 循环到 100 和 BREAK。您还使用了[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)add。在保留关键字上使用反引号`。

```
extract($_POST);

foreach(range(0,100) as $i){
    if(isset($text['detail'][$i]) && isset(isset($text['quantity'][$i]) && isset(isset($text['unit'][$i])){
         $insert= mysql_query(" INSERT INTO `add` (`description`, `quantity`, `price`) VALUES ('".$text['detail'][$i]."','".$text['quantity'][$i]."','".$text['unit'][$i]."')") or die(mysql_error());
    }
    else{
        break;
    }
} 
```

不太喜欢循环插入的方式，但上面的代码应该可以工作，即使它显然不是最好的解决方案。更好的方法是创建一个插入多行的单一 INSERT 查询：

```
INSERT INTO example (name, age)
VALUES   ('John', 24),   ('Katrina', 21),   ('Michael', 22),   ('Hui Ling', 25),   ('Catherine', 29) 
```

如果您必须对单独的查询进行循环，出于性能原因，您应该使用准备好的语句。

其他问题：

1.  您对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)持开放态度。
2.  您正在使用不再推荐的 mysql 函数。请改用 PDO 或 mysqli。

# vb.net - 对 DataTable 中的行求和，需要一个带有可能的“子”限定符的列参数

> ID：12563593
> 
> 赞同：0
> 
> 时间：2012-09-24T10:57:08.827
> 
> 标签：vb.net, datatable, sum, datarow, datacolumn

我有一个从数据库查询填充的数据表对象。

我正在尝试使用此功能实现总计行

```
Public Function getDataTable(data) As DataTable

    Dim theTable As New DataTable()
    theTable.Columns.Add(New DataColumn("Location"))
    theTable.Columns.Add(New DataColumn("Total Sales"))
    theTable.Columns.Add(New DataColumn("VAT"))
    theTable.Columns.Add(New DataColumn("Refunds"))
    theTable.Columns.Add(New DataColumn("VAT refund"))
    theTable.Columns.Add(New DataColumn("Total VAT"))
    theTable.Columns.Add(New DataColumn("Turnover"))
    theTable.Columns.Add(New DataColumn("Turnover Net"))
    ' Location, Sale value, VAT, Refund, VAT refund, Total Vat, Turnover (Gross) 

    For Each ele In data
        Dim thisRow As DataRow = theTable.NewRow()
        thisRow.Item("location") = ele("name")
        thisRow.Item("Total Sales") = "£" & FormatNumber(ele("totalSales"), 2)
        thisRow.Item("VAT") = "£" & FormatNumber(ele("totalVat"), 2)
        thisRow.Item("Refunds") = "£" & FormatNumber(ele("refundTotal"), 2)
        thisRow.Item("VAT refund") = "£" & FormatNumber(ele("vatRefunded"), 2)
        thisRow.Item("Total VAT") = "£" & FormatNumber((ele("totalVat") - ele("vatRefunded")), 2)
        thisRow.Item("Turnover") = "£" & FormatNumber(ele("netSales"), 2)
        thisRow.Item("Turnover Net") = "£" & FormatNumber((ele("netSales") - ele("totalVat")), 2)
        theTable.Rows.Add(thisRow)
    Next

    Dim totalRow = theTable.NewRow
    For Each col As DataColumn In theTable.Columns
        If col.ColumnName <> "Location" Then
            Try
                totalRow(col.ColumnName) = Convert.ToDouble(theTable.Compute("SUM(CONVERT([" & col.ColumnName & "], CHAR(64)))", Nothing).ToString)
            Catch ex As Exception
                totalRow(col.ColumnName) = "grr"
            End Try
        Else
            totalRow("Location") = "Total"
        End If
    Next
    theTable.Rows.Add(totalRow)

    Return theTable
End Function 
```

如您所见，我们正在创建一个包含 8 列的表，第一列是位置名称，其余列是数字。我用一个简单的`if`子句跳过“位置”行的总和。

我不断收到此错误：

```
Expecting a single column argument with possible 'Child' qualifier. 
```

我已经阅读了一些帖子，但似乎没有任何解决办法。

我认为我的列名中的空格可能是一个问题，这篇文章建议这样：

[http://forums.asp.net/t/1341960.aspx/1](http://forums.asp.net/t/1341960.aspx/1)

添加方括号没有帮助。

我也尝试过添加`字符，但这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:26:59.367

在`.Compute`表达式中，函数在聚合`CONVERT`内部被调用。`SUM`聚合函数需要一个简单的`SUM`列名，而不是表达式。

[http://msdn.microsoft.com/en-us/library/system.data.datatable.compute(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T23:30:55.700

我正在使用数据表并且遇到了同样的问题。我正在使用：

```
dataTableNew.Columns.Add("Tax Rate", GetType(System.Double)) 
```

一旦我用下划线替换了空格，它就起作用了：

```
dataTableNew.Columns.Add("Tax_Rate", GetType(System.Double)) 
```

我不认为它喜欢空格。

# jquery - 使用 jquery 在 tumblr 博客中添加标题

> ID：12563599
> 
> 赞同：1
> 
> 时间：2012-09-24T10:57:37.370
> 
> 标签：jquery, tumblr

我最近发现了 tumblr，我决定在那里创建一个博客来宣传我的网站。

一切似乎都很好，但我只有一个问题。在 tumblr 视频和照片帖子中不能有标题。因此，当您发布照片时，您在其下方添加的文字作为标题看起来相同。

我想要做的是用 h3 标签替换每个标题的第一段。html结构是这样的

```
<div id="content">
    <div>
        <div>
            <div class="video">
                <div class="caption">Text here</div>
            </div>
            <div class="photo">
                <div class="caption">Text here</div>
            </div>
            <div class="text">
                <h1>Title</h1>
                <div class="caption">Text here</div>
            </div>
        </div>
    </div> 
```

我自己尝试过，到目前为止我的理解是我需要使用 each() append() 来定位每个标题的第一个孩子，但我不知道如何将它们放在一起。我想要的是每个标题中的第一段被标签替换。

此外，您可能会注意到文本帖子在我的主题中使用与视频和照片相同的类名，但它们确实有标题。所以我不想在那里更改第一段。例如，我可以添加第二个类`class="caption photovideo"`并让 jQuery 仅针对这些类。我想我可以的问题是如何：P。

如果你想检查我在这里使用的主题的确切 html 代码是链接`http://effectortheme.tumblr.com/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:17:49.400

用标签替换第一段是什么意思？至于尝试定位和更改第一段，您可以尝试使用 :first-child 和 :before css 选择器吗？就像是

```
.video p:first-child:before {
    content: "";
} 
```

# ios - Cocos2d：GPU 必须处理不可见的 CCSprite 四边形

> ID：12563600
> 
> 赞同：0
> 
> 时间：2012-09-24T10:57:39.720
> 
> 标签：ios, opengl-es, cocos2d-iphone

给定一张纹理表，拥有一个或多个 CCSpriteBatchNode 更好吗？或者这不会影响处理不可见 CCSprite 四边形的 GPU 计算成本吗？

我正在考虑性能并参考我得到的[这个问题和答案](https://stackoverflow.com/questions/12465911/cocos2d-does-ccspritebatch-node-draw-only-sprites-with-visible-property-set-to)。基本上它建议我应该使用多个 CCSpriteBatchNode，即使我只有一个文件。我不明白“太多的批处理精灵仍然会对性能产生负面影响，即使它们不可见或在屏幕之外”这句话是否也适用于有两个 CCSpriteBatchNode 而不是一个。换句话说，这句话是否指的是“GPU负责取消由于完全在屏幕之外而不可见的四边形的绘制。它仍然需要处理这些四边形。”？**如果是这样，这应该意味着我的 CCSpriteBatchNode 实例如何使用相同的纹理表并不重要，对吧？**

我该如何优化呢？我的意思是，我**怎样才能避免 GPU 不得不处理不可见的四边形？**

你能至少回答粗体字的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:24:50.160

第一种情况：**场景中有太多节点（或精灵），其中许多节点超出屏幕/可见区域。**在这种情况下，对于每个精灵，GPU 必须检查它是否在可见区域之外。太多的精灵节点意味着 GPU 上的负载过多。

添加更多 CCSpriteBatchNode 不会影响性能。因为 sprite-sheet 位图被加载到 GPU 内存中，并且应用程序保存了一个坐标数组来绘制单个 sprite。因此，如果您将 2 个图像放在 2 个不同的 CCSpriteBatchNodes 中或将 2 个图像放在 1 个中，CPU 和 GPU 将是相同的。

如何优化？最好的方法是从父级中删除不可见的节点/精灵。但这取决于您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:28:27.490

FPS 下降肯定有两个原因：

*   **fillrate** - 当很多精灵相互重叠时（另外，如果我们将高分辨率纹理渲染成小精灵）
*   **冗余状态更改**- 在这种情况下，最重的是着色器和纹理切换

您可以在单个批次中在屏幕外渲染精灵，这不会显着降低性能。请注意，渲染具有零不透明度（或透明纹理）的精灵与非透明精灵所花费的时间相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:20:58.497

首先，这听起来确实像是一个[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)的案例。使用您希望在屏幕上显示的精灵数量进行测试，并添加一些，删除一些。您在最旧的受支持设备上获得 60 fps 吗？如果是，很好，不需要优化。如果不是，请调整代码设计以查看实际有什么不同。

```
 I mean, how can I avoid the GPU having to process the non visible quads? 
```

你不能，除非你要重写 cocos2d 如何处理精灵/批量精灵的绘制。

```
it doesn't really matter how may CCSpriteBatchNode instances I have using the same texture sheet, right? 
```

每个额外的精灵批处理节点都会添加一个绘制调用。考虑到他们可以将多少精灵批处理到一个绘图调用中，好处远远超过缺点。无论您有一个、两个还是三个 sprite 批处理节点，都完全没有区别。

# jquery - 使用 jquery 在文本框后插入断线

> ID：12563605
> 
> 赞同：1
> 
> 时间：2012-09-24T10:58:04.323
> 
> 标签：jquery, html

我正在尝试`<br />`使用以下代码在单击按钮的每个文本框后插入断线（）：

**HTML：**

```
<input type="text" id="text1" /><b>This is test</b>
<br />
<button>New line</button> 
```

**查询：**

```
$(document).ready(function(){
$("button").click(function(){
$("#text1").append("<br />");
});
}); 
```

我在控制台中收到以下错误

**消息：对象不支持此属性或方法**

请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:00:34.713

使用 after() 而不是追加。

[http://api.jquery.com/after/](http://api.jquery.com/after/)

[http://jsfiddle.net/66ERc/](http://jsfiddle.net/66ERc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:00:05.367

试试这个：

```
$(document).ready(function(){
$("button").click(function(){
var txt = $("text1");
txt.val( txt.val() + "\n");
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:01:33.327

试试这个

```
$(document).ready(function(){
   $("button").click(function(){
   $("#text1").after("<br />");
  });
}); 
```

# git - git避免推送二进制文件

> ID：12563607
> 
> 赞同：3
> 
> 时间：2012-09-24T10:58:08.130
> 
> 标签：git, binaries

假设我有一个私有存储库和一个公共存储库。我使用我的私人存储库进行开发，并在重要步骤中进行提交，在其中保存所有源和二进制文件。保存二进制文件的原因是允许恢复以前提交的版本，而不必重建所有二进制文件。当我完成了一项功能的开发后，我将它推送到一个公共存储库，集成商可以访问该存储库，它接受我和其他开发人员的贡献，并集成所有这些。在提取所有贡献后，集成商总是重建二进制文件。因此，我不需要将二进制文件从我的私人存储库推送到公共存储库，也不需要他拉取它们。git 中有没有办法避免在这个工作流程中推送和拉取二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:00:34.343

Fedora 项目所做的是有一个后备缓存，其中二进制文件被签入并由它们的校验和识别——如果您不需要二进制文件，只需忽略列出校验和和相应文件名的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:09:13.457

一种方法是拥有两个存储库，即源存储库和二进制存储库。将源存储库克隆为二进制存储库的子模块，以便您可以将特定的源修订与二进制文件相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:26:26.393

您可以尝试在单独的目录中构建二进制文件。然后，您可以将 is 视为另一个本地存储库，并保持源存储库与二进制文件无关。将它们放在本地存储库中并避免将特定文件推送到远程存储库会破坏 DVCS 的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:05:48.240

简而言之，使用以下二进制文件命名目录：

```
.gitignore 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T11:12:54.847

我不认为你到底想要什么是可能的。您想要 2 个远程仓库，但将二进制文件推送到其中一个，而不是另一个。我认为如果不使用特殊命令（在提交时可以忽略 .gitignore 文件的选项）让 repo 推送二进制文件，这是不可能的。

查看 .gitignore 功能以忽略来自提交（并因此推送）的文件。但这并不是您想要的，因为它会阻止所有二进制文件被推送。

请注意将二进制文件签入 git，因为所有签出都会更新二进制文件的时间戳（它可能比项目中的其他文件更新，因此增量构建不会重建内容，因为许多工具使用文件时间戳来确定要重建的内容） .

你的问题是，为了推动任何事情，你必须提交它。但是两个 repos 都会看到他们共享和分发的分支的所有提交。

因此，您唯一的解决方法是在本地工作副本（以及您的私人仓库）中创建一个新分支，并且该分支将只提交二进制文件。但这对您来说是一项艰巨的工作和令人头疼的工作，需要整理和实施。

即你需要设置一个工作流将分支切换到这个仅二进制分支，然后搜索所有二进制文件，然后生成提交（可能忽略 .gitignore 或编辑），然后推送到私有仓库，然后撤消对仓库所做的任何更改（恢复旧的 .gitgnore 如果你编辑它），然后切换回只包含源代码的原始分支。

我的建议是重新考虑为什么需要推送二进制文件。您的项目重建需要几分钟/几小时吗？

# mysql - 关于 vb.net 中的字符串数据类型

> ID：12563608
> 
> 赞同：2
> 
> 时间：2012-09-24T10:58:09.547
> 
> 标签：mysql, vb.net, string

我`String`在 VB.NET 中有一个变量，它包含一个像

```
"Date of    9/23/2012  Tot Sec_sale Amt = 29,22,696RM's Wise  ,  Gunadeep=15,83,876 ,  Purushothaman C.S.=1,12,829 ,  P.madhusudhanreddy=4,63,933 ,  Sunil vakayil=6,31,120 ,  Girish Varghese=33,019 ,  Debarun Chakraborty=79,288 ,  Rajiv Varma=18,630, RM's DT Count 1,342" 
```

在应用程序方面，我可以查看此值。我将此值存储在 MySQL 表列中。该列包含一个`longtext`数据类型。但我无法查看完整内容。无法查看最后一部分`RM's DT Count 1,342`。它显示为`Rm's...`.

我的表结构：

```
fld_msg longtext
fld_phone   varchar(20)
fld_date    date
fld_status  varchar(45)
fld_type    varchar(45)
fld_name    varchar(50) 
```

我的 VB.NET 代码：

```
Dim bh_msg As String =
    "Date of    " + Convert.ToDateTime(txt1.Text).Date +
    "  Tot Sec_sale Amt = " + strdmy_bh_sec_amt.ToString +
    "RM's Wise " + bh_amt_frmt1.ToString + "," +
    " RM's DT Count " + str_bh_dt_count.ToString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T16:49:49.907

大多数 DB Viewer 会截断长文本字段（blob、clob、...）以保持性能。但这只是调试视图。真实数据和您的程序应该使用整个值。

尝试使用您的 VB 代码检索这些值。它应该工作

# ios - UITableView：拖放在单元格之间留出空间

> ID：12563615
> 
> 赞同：1
> 
> 时间：2012-09-24T10:58:47.640
> 
> 标签：ios, uitableview, drag-and-drop

我将如何使单元格在我拖动的单元格下方向下，为插入留出空间？
[例子](http://www.youtube.com/watch?v=FSdVop564mY&feature=channel&list=UL#t=1m50s)。

我希望它的行为如下：

![在此处输入图像描述](../Images/02159c8d79350e0909aab9ac2ccf4ba2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:42:41.593

[这](https://github.com/shusta/ReorderingTableViewController)是一个很好的实现。基本上，您有一个手势识别器来进行点击并按住然后平移（技巧开始于您不移动平移上的单元格，您移动带有单元格快照的 UIImageView）

当单元格移动时，您会检测到哪一行在下方，并相应地移动表格视图的单元格（例如，使用`moveRowAtIndexPath:toIndexPath:`）

# seo - 类别和产品网址 SEO

> ID：12563616
> 
> 赞同：1
> 
> 时间：2012-09-24T10:58:48.417
> 
> 标签：seo, e-commerce

如今，什么被认为是 url 结构的最佳实践？

出于某种原因，我认为在 url 末尾包含扩展是一旦你进入层次结构的“最低”部分，例如

/category/sub-category/product.html

那么所有类别的网址都是：

/类别/子类别/

而不是在最后包括一个扩展，因为还有进一步的结构。

期待你的想法。安迪。

### 编辑

只是为了澄清目的：我从电子商务的角度来看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:05:51.547

你的问题不是很清楚，但我会按照我的理解回答。至于使用或不使用文件扩展名，根据 Google 代表 Matt Cutts 的说法，Google 会抓取 .html、.php 或 .asp，但应远离 .exe、.dll、.bin。它们主要表示二进制数据，因此可能会被 Googlebot 忽略。

尽管如此，在设计 SEO 友好的 URL 时，请记住它们应该简短且具有描述性，因此您可以使用关键字来获得更高的排名。因此，如果您的类别名称中有很好的关键字，为什么不让它们在 URL 中可见。

确保您使用的是静态而不是动态 URL，它们更容易记住并且不会更改。

# objective-c - 转回本端视图控制器

> ID：12563618
> 
> 赞同：6
> 
> 时间：2012-09-24T10:58:51.417
> 
> 标签：objective-c, ios, xcode, ios5

我目前面临一个问题，我想通过单击表格视图单元格回到同一个视图控制器。供您参考，我的表格视图是以编程方式生成的，每个单元格都使用 NIB 文件进行控制。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath (NSIndexPath *)indexPath
{
    if( indexPath.row == 0 ){
         NSLog(@"Clicked");
    }
} 
```

当我单击位置编号 0 的单元格时，日志确实出来了。所以现在我想继续使用同一个视图控制器而不是其他视图控制器。从情节提要中，我不可能拖动 segue，因为视图控制器只有一个滚动视图。

例如：视图控制器 A 内部有 5 个单元格，当我单击第一个单元格时，它会返回到视图控制器 A 并传递数据。

如果您需要查看我的更多代码，请告知您。感谢观众！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T17:17:59.350

如果我理解正确，您想在 tableView 中选择一行并将其 performSegueWithIdentifier 返回到同一个/当前 UITableViewController？

去做这个：

1.  在*storyboard*中，`ctrl`+从暴露的表格视图单元格拖动到下方黑条中的黄色视图控制器图标。这将创建 segue 到 self view 控制器。
2.  点击*segue*，并添加一个标识符；例如“segueToSelf”
3.  在您的*didSelectRowAtIndexPath*方法中，添加以下内容：

    `[self performSegueWithIdentifier:@"segueToSelf" sender:self];`

# c# - 如何在 C# 中访问 DevExpress.XtraGrid.GridControl 的列

> ID：12563627
> 
> 赞同：5
> 
> 时间：2012-09-24T10:59:35.673
> 
> 标签：c#, devexpress, gridcontrol

我尝试获取 GridControl 的 ColumnNames 和当前 Vieworder。该文档不会帮助我“.Net Reflector”-工具也不会给我建议。

来自其他 stackoverflowpost 的提示（[如何隐藏 devexpress XtraGrid 的列](https://stackoverflow.com/questions/3615415/how-to-hide-column-of-devexpress-xtragrid)）也对我没有帮助，因为我无法访问 View.Columns

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T11:59:22.827

我建议您尝试使用属性 gridControl.MainView 来访问视图。此属性属于 BaseView 类型（所有视图的基类），因此为了访问列/订单信息，您应该将其转换为 GridView（或您使用的任何类型）：

```
var firstColumnName = ((GridView)gridControl.MainView).Columns[0].FieldName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:03:23.573

如果您尚未填充列集合，则将没有可访问的列。

这是您在设计网格时通常会做的事情。

运行设计器 -> 列 -> 检索字段。

# python - python中是否有内置函数来计算数字中1的数量？

> ID：12563629
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:59:38.640
> 
> 标签：python

如果不存在这样的库函数，请提出一个有效的算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:01:16.127

像`str(number).count("1")`什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:07:29.763

就像是：

```
for baseconv in (int, oct, hex, bin):
    as_text = str(baseconv(123456789))
    print as_text, as_text.count('1') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T11:23:14.320

对于二进制表示中 '1' 的数量，8 位查找表非常有效。例如。对于 32 位数字

```
>>> tab=[0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8]
>>> N=123456789
>>> tab[N>>24]+tab[N>>16&255]+tab[N>>8&255]+tab[N&255]
16 
```

# qt4 - QString 代替 printf

> ID：12563632
> 
> 赞同：1
> 
> 时间：2012-09-24T10:59:47.377
> 
> 标签：qt4

如何通过 QString 显示字符串的一部分

```
plainTextEdit->appendPlainText(QString(a.c_str())) 
```

在 QtSDK 中？例如。在 C 中，我们这样做：

```
int length = 5;
printf("%*.*s", length, length, "hello there"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:05:33.930

您可以从*QString*获取子字符串。为此，您可以使用*QString*的*left*、*right*或*mid* [方法](http://qt-project.org/doc/qt-4.8/qstring.html)。

 *这是给定链接的示例：

```
QString x = "Nine pineapples";
QString y = x.mid(5, 4);            // y == "pine"
QString z = x.mid(5);               // z == "pineapples" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:25:19.267

step1: QString QString::mid ( int position, int n = -1 ) const 返回一个包含该字符串的n个字符的字符串，从指定的位置索引开始。

如果位置索引超过字符串的长度，则返回空字符串。如果从给定位置开始的字符串中可用的字符少于 n 个，或者如果 n 为 -1（默认值），则该函数返回从指定位置开始的所有可用字符。

例子：

```
 QString x = "Nine pineapples";
 QString y = x.mid(5, 4);            // y == "pine"
 QString z = x.mid(5);               // z == "pineapples" 
```

step2: QString QString::fromStdString ( const std::string & str ) [静态] 返回 str 字符串的副本。使用 fromAscii() 函数将给定的字符串转换为 Unicode。

仅当 Qt 配置为启用 STL 兼容性时，此构造函数才可用。*

# wordpress - 免费或付费的 Wordpress 足球俱乐部主题？

> ID：12563638
> 
> 赞同：0
> 
> 时间：2012-09-24T10:59:59.330
> 
> 标签：wordpress, themes

有谁知道是否有任何高级或免费的 Wordpress 主题来管理足球俱乐部？不需要处理排名，但只需要一个好看的。

非常感谢，

伊莎贝尔，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:31:16.243

你应该看看 Themeboy 的足球俱乐部主题[http://themeboy.com/](http://themeboy.com/)

这是迄今为止我遇到的最好的足球 wordpress 主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:56:39.267

您应该在官方[WordPress Theme Repository](http://wordpress.org/extend/themes/)中浏览主题。

# charts - 鼠标相对于原点的位置

> ID：12563639
> 
> 赞同：0
> 
> 时间：2012-09-24T11:00:00.017
> 
> 标签：charts, javafx-2

如何计算鼠标相对于折线图原点的位置？

下面的代码获取鼠标光标相对于图表布局原点的 x 位置。我想知道鼠标相对于笛卡尔原点的位置。

```
public class Chart extends Application {

    private NumberAxis xAxis;
    private NumberAxis yAxis;
    private LineChart<Number,Number> lineChart;
    private Label cursorPosition;
    private Label xAxisPosition;

    @Override
    public void start(Stage primaryStage) {
        VBox root = new VBox();

        xAxis = new NumberAxis("Date", 0.f, 100.f, 10.f);
        yAxis = new NumberAxis("Value", 0.f, 100.f, 10.f);
        lineChart = new LineChart<>(xAxis, yAxis);

    Series series = new Series();
    for (int ii = 1; ii <= 100; ii++) {
        series.getData().add(new Data(ii, Math.random()*20.));
    }
    lineChart.getData().add(series);

    lineChart.setOnMouseMoved(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {
            lineChart.setCursor(Cursor.CROSSHAIR);
            cursorPosition.setText(String.valueOf(event.getX()));
        }
    });

    lineChart.setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {
            lineChart.setCursor(Cursor.DEFAULT);
        }
    });

    cursorPosition = new Label();
    root.getChildren().addAll(lineChart, cursorPosition,);

    Scene scene = new Scene(root, 300, 250);
    primaryStage.setScene(scene);
    primaryStage.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:20:23.157

您必须使用图表的轴在显示坐标和笛卡尔（值）坐标之间进行转换。`xAxis.getDisplayPosition(0)`例如，将为您提供值 0 的 x 坐标。您还可以使用它将当前鼠标位置转换为“值”。

# c# - C# RunAs /智能卡

> ID：12563642
> 
> 赞同：2
> 
> 时间：2012-09-24T11:00:16.690
> 
> 标签：c#, smartcard, remote-server

我的应用程序曾经接受用户名/密码来验证远程共享（在 Windows 服务器上），然后获取文件列表等。

```
public int ConnectNetResource(string server, string user, string password, ref string driveLeter) {
        NETRESOURCE net = new NETRESOURCE();
        net.dwScope = 0;
        net.dwType = 0;
        net.dwDisplayType = 0;
        net.dwUsage = 0;
        net.lpRemoteName = server;
        net.lpLocalName = driveLeter;
        net.lpProvider = null;

        return WNetAddConnection2(ref net, password, user, 0);

    } 
```

现在，我们需要使用 SmartCard 进行身份验证。我有 GetSmartCards 的代码，但我不知道如何使用证书进行身份验证。

```
public static X509Certificate2 GetClientCertificate()
    {
        X509Certificate2 certificate = null;
        var store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
        try
        {
            store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
            // Nothing to do if no cert found.
            if (store.Certificates != null && store.Certificates.Count > 0)
            {
                if (store.Certificates.Count == 1)
                {
                    // Return the certificate present.
                    certificate = store.Certificates[0];
                }
                else
                {
                    // Request the user to select a certificate 
                    var certificates = X509Certificate2UI.SelectFromCollection(store.Certificates, "Digital Certificates", "Select a certificate from the following list:", X509SelectionFlag.SingleSelection);
                    // Check if one has been returned
                    if (certificates != null && certificates.Count > 0)
                        certificate = certificates[0];
                }
            }
        }
        finally
        {
            store.Close();
        }
        return certificate;

    } 
```

GetClientCertificate 函数将返回用户选择的证书，现在我如何使用此证书连接到远程共享。我可以使用什么 API 或 .dll。

顺便说一句，我是一名 Windows 工程师，他可以谷歌代码并使其以某种方式工作。将非常感谢工作代码。谢谢你。

# jquery - 从表格行中查找下一个输入值

> ID：12563645
> 
> 赞同：0
> 
> 时间：2012-09-24T11:00:19.170
> 
> 标签：jquery, jquery-selectors

我有一些带有一些代码的表格数据：

```
<tr>
  <td><input type='text' class='ACode' value='3400' /></td>
  <td><input type='text' class='DCode' value='100' /></td>
<tr>
<tr>
  <td><input type='text' class='ACode' value='3000' /></td>
  <td><input type='text' class='DCode' value='130' /></td>
<tr>
<tr>
  <td><input type='text' class='ACode' value='2500' /></td>
  <td><input type='text' class='DCode' value='110' /></td>
<tr> 
```

当我想像这样使用 jQuery 访问`ACode`下一个输入值时：

```
$('.ACode').change(function(){
  var that = $(this);
  var DCode =  that.next('.DCode').val();
}); 
```

它没有显示价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:03:47.463

请尝试以下操作：

```
var DCode =  that.parent().next().find('.DCode').val(); 
```

`.ACode`没有兄弟姐妹，因此什么也*得不到*[`.next()`](http://api.jquery.com/next/)，因为它只返回紧随其后的兄弟姐妹。相反，您应该转到`td`确实有一个兄弟姐妹的 parent ，使用`.next()`它到达下一个`td`，然后找到`.DCode`。

**[演示](http://jsfiddle.net/LGh6y/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:03:54.643

我建议：

```
$('.ACode').change(function(){
    var that = $(this),
        DCode =  that.closest('tr').find('.DCode').val();
}); 
```

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).

# r - R 中 Fortran 中的 OpenMP - 程序似乎无缘无故挂起？

> ID：12563647
> 
> 赞同：0
> 
> 时间：2012-09-24T11:00:33.117
> 
> 标签：r, fortran, openmp

我在 R 中有一个程序，它调用了几个支持 openMP 的 Fortran 例程。有两个 Fortran 例程`sub_1`和`sub_2`. 第一个在 R 函数中被调用两次，而第二个被调用一次。除了一些小事情外，这两个例程几乎相同。我调用第一个例程，然后调用第二个例程，然后再次调用第一个例程。但是，如果我让它们都启用了 openMP，则该函数在第二次使用第一个 fortran 例程时停止执行任何操作（没有错误或停止执行，只是坐在那里）。

如果我禁用 openMP，`sub_1`那么一切运行正常。如果我改为禁用 .openMP 中的 openMP `sub_2`，那么它在`sub_1`. 这很奇怪，因为它显然可以很好地通过第一次使用。

我认为这可能与线程未正确关闭或其他原因有关（我对 openMP 不太了解）。然而，另一个奇怪的是，调用这三个例程的 R 函数被调用了四次，如果我只启用 openMP in `sub_2`，那么这工作正常（即第二个、第三个等调用`sub_2`不会挂起）。我只是不知道它为什么会这样做！作为参考，这是以下代码`sub_1`：

```
subroutine correlation_dd_rad(s_bins,min_s,end_s,n,pos1,dd,r)   
!!! INTENT IN !!!!!!!!
integer             :: s_bins       !Number of separation bins
integer             :: N            !Number of objects
real(8)             :: pos1(3,N)    !Cartesian Positions of particles
real(8)             :: min_s        !The smallest separation calculated.
real(8)             :: end_s        !The largest separation calculated.
real(8)             :: r(N)         !The radii of each particle (ascending)
!!! INTENT OUT !!!!!!!
real(8)             :: dd(N,s_bins)         !The binned data.

!!! LOCAL !!!!!!!!!!!!
integer             :: i,j      !Iterators
integer             :: bin
real(8)             :: d            !Distance between particles.
real(8)             :: dr,mins,ends
real(8),parameter   :: pi = 3.14159653589

integer             :: counter
dd(:,:) = 0.d0

dr = (end_s-min_s)/s_bins

!Perform the separation binning
mins = min_s**2
ends = end_s**2

counter = 1000
!$OMP parallel do private(d,bin,j)
do i=1,N
    !$omp critical (count_it)
        counter = counter - 1
    !$omp end critical (count_it)
    if(counter==0)then
        counter = 1000
        write(*,*) "Another Thousand"
    end if
    do j=i+1,N
        if(r(j)-r(i) .GT. end_s)then
            exit
        end if

        d=(pos1(1,j)-pos1(1,i))**2+&
            &(pos1(2,j)-pos1(2,i))**2+&
            &(pos1(3,j)-pos1(3,i))**2
        if(d.LT.ends .AND. d.GT.mins)then
            d = Sqrt(d)
            bin = Floor((d-min_s)/dr)+1
            dd(i,bin) = dd(i,bin)+1.d0
            dd(j,bin) = dd(j,bin)+1.d0
        end if
    end do
end do
!$OMP end parallel do
write(*,*) "done"
end subroutine 
```

有谁知道为什么会发生这种情况？

干杯。

我将添加一个我能想到的最小的例子，它确实重现了这个问题（顺便说一下，这一定是一个 R 问题——我在这里展示的类型的一个小例子，但是用 fortran 编写的可以正常工作）。所以我在fortran中有上面的代码和下面的代码，编译到共享对象`correlate.so`：

```
subroutine correlation_dr_rad(s_bins,min_s,end_s,n,pos1,n2,pos2,dd,r1,r2)

!!! INTENT IN !!!!!!!!
integer             :: s_bins       !Number of separation bins
integer             :: N            !Number of objects
integer             :: n2
real(8)             :: pos1(3,N)    !Cartesian Positions of particles
real(8)             :: pos2(3,n2)   !random particles
real(8)             :: end_s        !The largest separation calculated.
real(8)             :: min_s        !The smallest separation
real(8)             :: r1(N),r2(N2) !The radii of particles (ascending)

!!! INTENT OUT !!!!!!!
real(8)             :: dd(N,s_bins)         !The binned data.

!!! LOCAL !!!!!!!!!!!!
integer             :: i,j      !Iterators
integer             :: bin
real(8)             :: d            !Distance between particles.
real(8)             :: dr,mins,ends
real(8),parameter   :: pi = 3.14159653589

integer             :: counter
dd(:,:) = 0.d0

dr = (end_s-min_s)/s_bins

!Perform the separation binning

mins = min_s**2
ends = end_s**2

write(*,*) "Got just before parallel dr"
counter = 1000
!$OMP parallel do private(d,bin,j)
do i=1,N
    !$OMP critical (count)
            counter = counter - 1
        !$OMP end critical (count)
            if(counter==0)then
                write(*,*) "Another thousand"
                counter = 1000
            end if
    do j=1,N2

        if(r2(j)-r1(i) .GT. end_s)then
            exit
        end if
        d=(pos1(1,j)-pos2(1,i))**2+&
            &(pos1(2,j)-pos2(2,i))**2+&
            &(pos1(3,j)-pos2(3,i))**2
        if(d.GT.mins .AND. d.LT.ends)then
            d = Sqrt(d)
            bin = Floor((d-min_s)/dr)+1
            dd(i,bin) = dd(i,bin)+1.d0
        end if
    end do
end do
!$OMP end parallel do

write(*,*) "Done"
end subroutine 
```

然后在 R 中，我有以下函数——前两个只是包装了上面的 fortran 代码。第三个以与我的实际代码类似的方式调用它：

```
correlate_dd_rad = function(pos,r,min_r,end_r,bins){
  #A wrapper for the fortran routine of the same name.
  dyn.load('correlate.so')
  out = .Fortran('correlation_dd_rad',
             s_bins = as.integer(bins),
             min_s = as.double(min_r),
             end_s = as.double(end_r),
             n = as.integer(length(r)),
             pos = as.double(t(pos)),
             dd = matrix(0,length(r),bins), #The output matrix.
             r = as.double(r))

  dyn.unload('correlate.so')
  return(out$dd)
}

correlate_dr_rad = function(pos1,r1,pos2,r2,min_r,end_r,bins){
  #A wrapper for the fortran routine of the same name
  N = length(r1)
  N2 = length(r2)
  dyn.load('correlate.so')

  out = .Fortran('correlation_dr_rad',
             s_bins = as.integer(bins),
             min_s = as.double(min_r),
             end_s = as.double(end_r),
             n = N,
             pos1 = as.double(t(pos1)),
             n2 = N2,
             pos2 = as.double(t(pos2)),
             dr = matrix(0,nrow=N,ncol=bins),
             r1 = as.double(r1),
             r2 = as.double(r2))

  dyn.unload('correlate.so')
  return(out$dr)
}

the_calculation = function(){

  #Generate some data to use
  pos1 = matrix(rnorm(30000),10000,3)
  pos2 = matrix(rnorm(30000),10000,3)

  #Find the radii
  r1 = sqrt(pos1[,1]^2 + pos1[,2]^2+pos1[,3]^2)
  r2 = sqrt(pos2[,1]^2 + pos2[,2]^2+pos2[,3]^2)

  #usually sort them but it doesn't matter here.

  #Now call the functions
  print("Calculating the data-data pairs")
  dd = correlate_dd_rad(pos=pos1,r=r1,min_r=0.001,end_r=0.8,bins=15)

  print("Calculating the data-random pairs")
  dr = correlate_dr_rad(pos1,r1,pos2,r2,min_r=0.001,end_r=0.8,bins=15)

  print("Calculating the random-random pairs")
  rr = correlate_dd_rad(pos=pos2,r=r2,min_r=0.001,end_r=0.8,bins=15)

  #Now we would do something with it but I don't care in this example.
  print("Done")
} 
```

运行这个我得到输出：

```
 [1] "Calculating the data-data pairs"
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  Another Thousand
  done
 [1] "Calculating the data-random pairs"
  Got just before parallel dr
  Another thousand
  Another thousand 
```

然后它就坐在那里......实际上，运行它几次表明它每次都会改变它挂起的位置。有时它会在第二次调用 to 时获得大部分时间，而在`correlate_dd_rad`其他情况下它只会在调用 to 中途获得`correlate_dr_rad`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:37:16.277

我不确定这是否会解决您的问题，但这确实是一个错误。在子程序`correlation_dd_rad`中，当您打算关闭并行区域时，您实际上添加了注释。为了更清楚地显示以下内容：

```
 !OMP end parallel do 
```

应转换为：

```
 !$OMP end parallel do 
```

作为旁注：

1.  `use omp_lib`如果您不调用库函数，则不需要
2.  您可以使用`atomic`构造（参见最新 OpenMP 规范的[第 2.8.5 节](http://www.openmp.org/mp-documents/OpenMP3.1.pdf)）以原子方式访问特定存储位置，而不是`critical`构造
3.  总是给`critical`结构起一个名字（规范的第 2.8.2 节）

> 所有没有名称的**关键**构造都被认为具有相同的未指定名称。

# perl - perl imagemagick中的png水印，使png透明

> ID：12563650
> 
> 赞同：3
> 
> 时间：2012-09-24T11:00:36.183
> 
> 标签：perl, imagemagick, png, opacity, watermark

在 perl imagemagick 方面需要帮助！

我正在尝试在 jpg 图像上添加 png 水印，

```
$image = Image::Magick->new;
$image->Read('image_filename');

$logo = Image::Magick->new;
$logo->Read('watermark_filename');

$logo->Transparent(color=>'#FFFFFF');
$image->Composite(image=>$logo, gravity=>'southeast', geometry=>'-10-10'); 
$image->Write('final_filename'); 
```

一切都很好，但我需要我的水印是透明的，当我尝试 opacity=>'50%' 时它可以工作，但水印 png 开始看起来像 s...t :))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:13:44.513

您是否考虑过使用 GIMP 手动创建水印或通过 GD 按语法创建水印？

# c# - 私有方法参数

> ID：12563655
> 
> 赞同：1
> 
> 时间：2012-09-24T11:00:57.127
> 
> 标签：c#

我有这个带有可选参数的方法。

```
public static Test(String connection, Int32 retryInfiniteLoopGuard = 0) 
```

有没有办法以某种方式将其标记`retryInfiniteLoopGuard`为，`private`以便在从类外部调用该方法时它变得不可见？

如果您想知道为什么，`retryInfiniteLoopGuard`是用于递归执行并且不应该对用户可见......

今天我使用重载，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T11:01:59.610

使用该参数创建方法的私有重载，并从公共版本中删除该参数。比使用默认值使公共版本调用私有版本：

```
private static int Test(string connection, int retryInfiniteLoopGuard)
{
    // The code
}

public static int Test(String connection)
{
    return Test(connection, 0);
} 
```

没有其他方法可以实现这一目标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-05T05:19:29.120

## 编辑：此功能似乎从未添加过。

在新的 C# 6 中，您可以执行以下操作：

```
public static int Test(String connection, private Int32 retryInfintiteLoopGuard = 0)
{
    /* Enter Code Here */
} 
```

它编译为：

```
private static int test(String connection, Int32 retryInfiniteLoopGuard)
{
    /* Enter Code Here */
}
public static int Test(String connection)
{
   return test(connection, 0);
} 
```

其工作方式是所有参数都隐含地与方法一样可访问，当然除非另有明确说明。支持的访问器是：

```
public
internal
protected
private 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:03:41.377

不知道你为什么需要它，但你可以创建两个这样的方法

```
public static Test(String connection, Int32 retryInfiniteLoopGuard)
{
    //method body
}

public static Test(String connection)
{
     Test(connection, 0);
} 
```

# php - CakePHP：插入具有特定ID的记录

> ID：12563660
> 
> 赞同：3
> 
> 时间：2012-09-24T11:01:18.587
> 
> 标签：php, cakephp, cakephp-1.2

这与 CakePHP 本质上是同一个问题[：是否可以插入带有预定义主键值的记录？](https://stackoverflow.com/questions/1070749). 在 CakePHP 1.2 中，我想插入一条具有预定 id 的记录。id 的值由外部系统确定，但与链接问题不同，我无法控制该系统，因此该问题的解决方案对我来说不是一个选项。

如果调用时设置了模型的 id 字段`$model->save()`，Cake 将始终尝试更新记录。`false`如果不存在具有该 id 的记录，Cake 甚至会将 id 设置为[1]：

```
<?php
function save($data = null, $validate = true, $fieldList = array()) {
    // snip
    if (!$this->__exists && $count > 0) {
        $this->id = false;
    }
    // snip
} 
```

首先保存模型然后手动更新 id 也不是一种选择，因为这会破坏引用完整性（这是我也无法控制的架构限制）。

那么如何强制 CakePHP 插入带有特定主键的记录呢？

我面临的问题的一些背景：

我正在处理的应用程序由 Postgres 数据库支持，因此新的主键由序列确定。有一个过程，外部系统将`SELECT nextval('my_model_sequence')`使用该 id 进行一些工作，然后将其传递给 CakePHP 应用程序，我想在其中`INSERT`使用该 id 记录 my_model 。

保存记录后，我无法调用外部进程。我也根本无法修改外部流程。

* * *

[1] [http://api12.cakephp.org/view_source/model/#l-1260](http://api12.cakephp.org/view_source/model/#l-1260)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:03:31.313

如果您想创建具有特定 id 的记录，请确保填写 id 字段

```
 $this->data['ModelName']['id'] = $your_id; 
```

同样在调用之前：

```
 $this->save($this->data); 
```

你应该记得打电话

```
$this->create(); 
```

这将重置模型状态，让您创建新记录。最后你应该尝试：

```
 $this->ModelName->create(); 
   $this->ModelName->save($this->data); 
```

另一方面，当我阅读您的帖子并尝试想象您的表结构时，我建议您考虑单独保留 id 字段并尝试使该外键 id 成为外键。这对你来说是一个选择吗？

# javascript - 试图从 jQuery 代码中调用一个通用函数

> ID：12563661
> 
> 赞同：0
> 
> 时间：2012-09-24T11:01:29.563
> 
> 标签：javascript, jquery

当我尝试调用常见的 javascript 函数时，我的脚本无法正常工作。我该怎么做才能让它工作？谢谢！

```
$(".displayControl a").click(function() {
    $(".displayControl a").removeClass("activeButton");
    buttonNumber = $(".displayControl a").index(this);
    $(".displayControl a:eq("+buttonNumber+")").addClass("activeButton");
    ShowBoxes(buttonNumnber);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:05:08.247

你可以这样做：

```
$(".displayControl a").click(function() {
    $(".displayControl a").removeClass("activeButton");
    ShowBoxes($(this).addClass("activeButton").index());
}); 
```

* * *

```
buttonNumber = $(".displayControl a").index(this); 
```

应该`buttonNumber = $(this).index();`

和

```
$(".displayControl a:eq('+buttonNumber+')").addClass("activeButton"); 
```

只是`$(this)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:02:43.497

像这样编辑

```
buttonNumber = $(this).index(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:04:18.290

使用以下代码：

```
$(".displayControl a").click(function() {
$(this).removeClass("activeButton");
buttonNumber = $(this).index();
$(".displayControl a:eq('+buttonNumber+')").addClass("activeButton");
ShowBoxes(buttonNumber);
}); 
```

请注意我在其中编辑了引号的行。

从评论中注意到，它们实际上是您的函数名称中的拼写错误。

# asp.net - 如何在 asp:wizard 控件中显示加载图像或文本？

> ID：12563666
> 
> 赞同：1
> 
> 时间：2012-09-24T11:01:47.900
> 
> 标签：asp.net, aspwizard

我在我的项目中使用了一个 asp:wizard 控件。当单击下一步按钮时，延迟加载下一步，我想显示加载图像“gif”或文本，如“正在加载...”。
怎么做？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:10:45.067

当您单击一个步骤时，向导控件是否会回发（我不记得是否有）。如果是这样，请使用 UpdatePanel 控件和将出现并显示加载 gif 的 UpdateProgress 控件。在每个选项卡加载时都有向导回发您可以在此处创建加载 GIF：http: [//ajaxload.info/](http://ajaxload.info/)

如果不是，则向导将全部位于客户端，这可以通过将 DIV 添加到 DOM 客户端以显示加载面板来实现，方法是将 DIV 加载到向导之上。

HTH。

# android - 通过 OTA 服务安装 Android 应用

> ID：12563670
> 
> 赞同：5
> 
> 时间：2012-09-24T11:01:54.217
> 
> 标签：android, apk, android-contentprovider, ota

我开发了 5 个 android 应用程序并生成了 5 个具有相同密钥库的 apk 文件。在 5 个应用程序中，一个应用程序是包含公共数据库的家庭应用程序。所有其他应用程序都使用内容提供程序访问数据库。

现在，我希望用户通过 OTA 服务下载所有 5 个 apk 文件。下载完成后，家庭应用程序首先开始安装，安装自动完成后，第二个应用程序开始安装，同样适用于所有 5 个 apk。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:51:47.517

您可以提示安装

```
Intent promptInstall = new Intent(Intent.ACTION_VIEW) 
    .setData(Uri.parse("file:///path/to/your.apk")) 
    .setType("application/vnd.android.package-archive"; 
startActivityForResult(promptInstall); 
```

用户已接受并安装的，您将收到一个回调，您可以在该回调上调用下一个 APK 安装。您还可以使用 PackageManager 来检查用户是否已成功安装 APK

# javascript - bgStretcher 插件 - 多个实例

> ID：12563673
> 
> 赞同：2
> 
> 时间：2012-09-24T11:01:59.713
> 
> 标签：javascript, jquery, css

使用 jQuery 插件 bgStretcher 2（[链接到插件](http://www.ajaxblender.com/bgstretcher-2-jquery-stretch-background-plugin-updated.html)），我试图`<div>`在一个页面上让各种 s 使用它的功能。但是，该插件似乎只支持每页一个实例，如果我进行多个`$("#element").bgStretcher()`调用，则只有第一个调用有效，而所有其他调用都将被忽略，并且控制台中会记录“多个 bgStretcher”。

有没有办法解决这个问题，或者是否有任何其他插件可以做类似的事情，即智能拉伸图像以填充元素？我试图破解这个插件的相关部分来做到这一点，但没有运气。

使用 background-size: 100% 不起作用，因为这不会垂直填充元素空间，它只会水平拉伸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:18:21.543

如果您的设计允许您一次只显示一个 bgstretcher 实例，您可以销毁活动的实例并创建另一个。

```
$('#slide1').bgStretcher.sliderDestroy();

$('#slide2').bgStretcher({
    images: imagesArray,
    imageWidth: 1600,
    imageHeight: 800,
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T20:52:01.717

您是否尝试添加容器ID？

```
el1.bgStretcher({
                containerId: "bgstretcher1",
                images : [...],
                ... further settings ...
})
el1.bgStretcher({
                containerId: "bgstretcher2",
                images : [...],
                ... further settings ...
}) 
```

# android - 如何仅压缩 Android 中特定文件夹中包含的文件夹和文件？

> ID：12563674
> 
> 赞同：1
> 
> 时间：2012-09-24T11:01:58.670
> 
> 标签：android, zip

我能够压缩包含在特定文件夹中的文件。这是我使用的代码：

```
public class Compress { 
 private static final int BUFFER = 2048; 

private String[] _files; 
private String _zipFile; 

public Compress(String[] files, String zipFile) { 
_files = files; 
_zipFile = zipFile; 
} 

public void zip() { 
try  { 
  BufferedInputStream origin = null; 
  FileOutputStream dest = new FileOutputStream(_zipFile); 

  ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(dest)); 

  byte data[] = new byte[BUFFER]; 

  for(int i=0; i < _files.length; i++) { 
    Log.v("Compress", "Adding: " + _files[i]); 
    FileInputStream fi = new FileInputStream(_files[i]); 
    origin = new BufferedInputStream(fi, BUFFER); 
    ZipEntry entry = new ZipEntry(_files[i].substring(_files[i].lastIndexOf("/") + 1)); 
    out.putNextEntry(entry); 
    int count; 
    while ((count = origin.read(data, 0, BUFFER)) != -1) { 
      out.write(data, 0, count); 
    } 
    origin.close(); 
  } 

  out.close(); 
} catch(Exception e) { 
  e.printStackTrace(); 
} 

} 

} 
```

我在另一个类中以这种方式调用这个类：

```
String[] files = {mainFolderPath+"/text1.txt", mainFolderPath+ "/text2.txt", mainFolderPath +"/NewFolder"};
        Compress compress = new Compress(files, sourceFile.getAbsolutePath());
        compress.zip(); 
```

在运行应用程序时，我得到了一个 IOException。

您能否告诉我如何压缩包含另一个文本文件以及文本文件“text1.txt”和“text2.txt”的“NewFolder”？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:38:47.890

这个对我有用！！！！！！！！在我需要的所有项目中......

```
 public String[] _files;
    public String _zipFile  = "/mnt/sdcard/123.zip"; 

    /////zIIIiiiiPPPPPer

 public class Compress { 
 private static final int BUFFER = 2048; 
 public Compress(String[] files, String zipFile) { 
   _files = files; 
   _zipFile = zipFile; 
 } 
 public void zip() { 
   try  { 
     BufferedInputStream origin = null; 
     FileOutputStream dest = new FileOutputStream(_zipFile); 
     ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(dest)); 
     String path = "/mnt/sdcard/out";
     File fileDir = new File( path );
     if(!fileDir.exists() || !fileDir.isDirectory())
     {
         return;
     }
     String[] _files = fileDir.list(); 
     for ( int i = 0 ; i < _files.length ; i++  )
     { 
           _files[i] = path + "/"+ _files[i];
     }
     byte data[] = new byte[BUFFER]; 
     for(int i=0; i < _files.length; i++) { 
       Log.v("Compress", "Adding: " + _files[i]); 
       FileInputStream fi = new FileInputStream(_files[i]); 
       origin = new BufferedInputStream(fi, BUFFER); 
       ZipEntry entry = new ZipEntry(_files[i].substring(_files[i].lastIndexOf("/") + 1)); 
       out.putNextEntry(entry); 
       int count; 
       while ((count = origin.read(data, 0, BUFFER)) != -1) { 
         out.write(data, 0, count); 
       } 
       origin.close(); 
     } 
     out.close(); 
   } catch(Exception e) { 
     e.printStackTrace(); 
   } 

 } 
```

称之为Just do smth like ...

```
Compress cs = new Compress(_files, _zipFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:09:06.230

我得到了我的问题的解决方案，即；仅压缩特定文件夹的内容，其中包括一个文件夹以及一些文本文件。这是代码：

```
public class Compress {

private static final int BUFFER = 2048;
private String[] _files;
private String _zipFile;

public Compress(String[] files, String zipFile) {

            _files = files;
            _zipFile = zipFile;
}

public void zip() {

    try {
        BufferedInputStream origin = null;
        FileOutputStream dest = new FileOutputStream(_zipFile);

        ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(
                dest));

        byte data[] = new byte[BUFFER];

        for (int i = 0; i < _files.length; i++) {
            Log.v("Compress", "Adding: " + _files[i]);
            String name =  _files[i];
            File f = new File( _files[i]);
            if (f.isDirectory()) {
                name = name.endsWith("/") ? name : name + "/";

                for (String file : f.list()) {
                    System.out.println(" checking " + file);
                    System.out
                            .println("The folder name is: " + f.getName());
                    out.putNextEntry(new ZipEntry(f.getName() + "/" + file));
                    FileInputStream fi = new FileInputStream( _files[i]
                            + "/" + file);
                    origin = new BufferedInputStream(fi, BUFFER);
                    int count;
                    while ((count = origin.read(data, 0, BUFFER)) != -1) {
                        out.write(data, 0, count);
                    }
                    origin.close();
                }
                System.out.println(" checking folder" + name);
            } else {
                FileInputStream fi = new FileInputStream( _files[i]);
                origin = new BufferedInputStream(fi, BUFFER);
                ZipEntry entry = new ZipEntry( _files[i].substring( _files[i]
                        .lastIndexOf("/") + 1));
                out.putNextEntry(entry);
                int count;
                while ((count = origin.read(data, 0, BUFFER)) != -1) {
                    out.write(data, 0, count);
                }
                origin.close();
            }
        }

        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

# sql-server - 此查询的估计成本超过配置的阈值 ssis

> ID：12563680
> 
> 赞同：6
> 
> 时间：2012-09-24T11:02:23.157
> 
> 标签：sql-server, sql-server-2008, ssis

我有一个因上述错误而失败的 SSIS 包。

> 数据库的查询调控器限制为 300

我尝试在数据流任务执行语句之前将“执行 SQL”任务添加到我的包中：

```
SET QUERY_GOVERNOR_COST_LIMIT 0 
```

这在包执行期间显示为成功，但我的数据流任务仍然失败并报告限制为 300。

> 来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80004005 描述：“查询已被取消，因为此查询的估计成本 (336) 超过了配置的阈值 300。请联系系统管理员。”。结束错误

如何在我的数据流任务中覆盖此设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:48:29.647

除非您在包上设置了“保持相同的连接”属性，这不是我对它的价值的偏好，否则您所经历的就是[文档](http://msdn.microsoft.com/en-us/library/ms176100.aspx)所述。

```
Using SET QUERY_GOVERNOR_COST_LIMIT applies to the current connection only 
and lasts the duration of the current connection 
```

在您的包中，为执行 SQL 任务打开一个连接，发出您的查询调控器语句并且该任务终止。然后在您的数据流任务中使用新的/不同的连接作为 OLE DB 源（或 ADO.NET 源）的一部分。这种联系并没有改变州长的成本计算，因此它受制于 QG。

要解决此问题，您需要修改数据流中的源。假设您刚刚选择了您想要的表，您需要将单选按钮从表源切换到查询源（名称近似）。作为此查询的来源，您将使用类似

```
SET QUERY_GOVERNOR_COST_LIMIT 0;
SELECT
    MT.*
FROM
    dbo.MyTable AS MT; 
```

## 编辑

鉴于它是超出 QG 限制的目标表，快速而肮脏的方法是修改目标的连接管理器以将 RetainSameConnection 属性设置为 True。这将确保您的目标转换中的相同连接已经修改了成本。您在我对这个问题的回答中设置的位置有一个屏幕截图

[SSIS：默认日志记录 OnError 不适用于 RetainSameConnection](https://stackoverflow.com/questions/11454062/ssis-default-logging-onerror-dont-work-with-retainsameconnection/11458177#11458177)

其他可能有效的方法是修改数据负载以降低查询（插入）成本。

*   您可以通过减少提交大小和/或批量大小来实现。
*   如果目标表被大量索引，维护所有索引的成本可能会使您超过查询调控器的阈值，因此在包运行之前和之后删除并重新创建非聚集索引可能会降低插入成本。它也可能只是将罐头（成本）踢到路上，因为重新创建 NCI 可能会使工作花费更长的时间
*   如果您使用的是企业版并且正在使用分区，您可能能够加载到一个空分区并将其换入。我认为在这种情况下情况并非如此，因为分区如果做得不好会使问题变得更糟。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-26T13:46:03.543

有一种方法可以为整个服务器更改它，使用 SSMS 中的 GUI 选项。

1\. 在“服务器属性”对话框中，转到“连接”页面。
2\. 选择选项使用查询调控器来防止长时间运行的查询。
3\. 在选项下方的框中，输入最大查询成本限制。有效范围是 0 到 2,147,483,647。值 0 禁用查询调控器；任何其他值设置最大查询成本限制。
4\. 单击确定。

来源：[Technet 文章：使用查询调控器控制过度查询执行](https://technet.microsoft.com/en-us/magazine/dd421653.aspx)

# php - PHP多文件上传脚本不起作用

> ID：12563682
> 
> 赞同：0
> 
> 时间：2012-09-24T11:02:31.950
> 
> 标签：php, file-upload

这是用于多次上传的 html 标记..我想对其执行验证.. 1）检查文件是否为 5 mb 2）检查它是否为 jpg、gif 图像文件

```
<form action="" method="POST" enctype="multipart/form-data">
<input type="file" name="file[]" multiple="multiple">
<input type="submit" value="upload">
</form> 
```

这是php代码

```
if(!empty($_FILES['file'])){        
    foreach($_FILES['file']['name'] as $key => $name)
    {           
                 if($_FILES['file']['error'][$key] == 0 && move_uploaded_file($_FILES['file']['tmp_name'][$key], "images/{$name}")){

            $uploaded[] = $name;
                 }
    }       
    print_r($uploaded);     
} 
```

现在它只是在没有任何验证的情况下上传文件......我无法弄清楚要检查大小并检查它的图像类型是否只有......请 php 专家帮助我

当我尝试使用它时，它会直接上传

```
 if($_FILES['file']['size'][$key] > 5000){
                     echo 'file must be under 5 mb';
                   }else{
                     move_uploaded_file($_FILES['file']['tmp_name'][$key], "images/{$name}") 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:06:50.857

您可以使用：[http](http://us2.php.net/manual/en/function.exif-imagetype.php) ://us2.php.net/manual/en/function.exif-imagetype.php来检查图像的类型

大小可以在 $_FILES 数组中找到（小于大小），例如 $_FILES['file']['size'][$key]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:07:37.860

```
foreach(...) {
   $fileType = explode(".", $name);
   $fileType = strtolower("." . $fileType[count($fileType)-1]);

   if(!in_array($fileType, array('.gif','.jpg','.jpeg')))
       echo 'Incorrect file type';
   if($_FILES['file']['size'][$key] > 5000)
       echo 'Maximum alowed size is 5MB';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:08:10.833

它正在上传文件，因为您已经编写了用于上传的代码

```
if($_FILES['file']['error'][$key] == 0 && move_uploaded_file($_FILES['file']['tmp_name'][$key], "images/{$name}")) 
```

# caching - 将缓存系统复制到每个 http 服务器

> ID：12563684
> 
> 赞同：0
> 
> 时间：2012-09-24T11:02:36.060
> 
> 标签：caching

我最近为一个流量很大的 PHP 站点设置了 memcached。在我们使用 APC 之前，但这缺乏拥有唯一缓存系统的可能性（使一台服务器上的一个键失效不会通过其他服务器失效）。

当 memcached 与 http 服务器在同一台机器上或在单独的服务器上时，我注意到一个很大的不同。

> 同一服务器上的 http+memcached -> 交付页面的平均时间为 0.06
> 
> diff 服务器上的 http 和 memcache（但在 NAT 下）-> 0.15 - 0.20 以传递页面

所以这是一个巨大的差异，我想知道将缓存系统与 http 放在同一台机器上是否会更好。额外的复杂性是网站由几个 http 服务器（通过负载平衡器）提供服务。所以我实际上需要一个带有复制的缓存系统，每个http服务器都有一个缓存“副本”并将更改仅写入“主”（或其他类似的方法）。

有几个这样的系统（couchbase、redis、aso）。我认为 couchbase 对此并不好，因为它不允许连接到本地缓存服务器，而是连接到“门”。Redis可能工作，我还在检查其他人。

主要是：有人尝试过这种方法来加速网站吗？通过在每台机器上都有一个缓存“副本”（与其他机器保持同步）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:37:13.067

您可以使用 GigaSpaces XAP 解决方案，它是一个分布式内存数据网格，但也与 jetty 集成，允许您部署 Web 应用程序并从单个管理系统进行管理。中央分布式数据网格（可以用作简单缓存）可以在每个 Web 容器上都有一个本地缓存，它与主缓存保持同步，您不必为此使用码头集成，您仍然可以使用您自己的 Web 容器，只需通过代码使用嵌入式本地缓存创建分布式缓存的代理。或者，您也可以在 Web 容器之间拥有完全复制的拓扑，而无需主分布式缓存，并且每个 Web 容器将包含整个缓存的完整副本，该副本将与 Web 容器的其他实例同步。

您可以阅读更多内容：

[http://wiki.gigaspaces.com/wiki/display/SBP/Web+Service+PU](http://wiki.gigaspaces.com/wiki/display/SBP/Web+Service+PU) http://wiki.gigaspaces.com/wiki/display/XAP9/Web+Jetty+Processing+Unit+Container [http:// wiki.gigaspaces.com/wiki/display/XAP9/Client+Side+Caching](http://wiki.gigaspaces.com/wiki/display/XAP9/Client+Side+Caching)

免责声明：我是为 GigaSpaces 工作的开发人员。

# firefox - cfx xpi 命令删除插件/lib 目录中的压缩文件？

> ID：12563686
> 
> 赞同：0
> 
> 时间：2012-09-24T11:02:44.253
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

在尝试打包使用 SDK 1.9 版构建的 Firefox 插件时，我遇到了一个奇怪的问题。扩展目录结构是这样的：

```
├── data
│   ├── file1.js
│   ├── file2.js
│   ├── jquery.min.js
│   └── uri.js
├── lib
│   ├── file3.js
│   ├── main.js
│   ├── services
│   │   ├── file4.js
│   │   ├── file5.js
│   │   └── file6.js
│   └── uri.js
├── package.json
└── package.json.backup 
```

作为构建过程的一部分，我通过[uglify.js](https://github.com/mishoo/UglifyJS)`data`运行'lib' 目录。这似乎工作正常。基本上我将代码库复制到不同的位置，通过 uglify 运行它，我得到相同的目录结构，除了 JS 文件被压缩。

接下来，我运行`cfx xpi --pkgdir=path/to/ugly/codebase`将代码打包到 xpi 中。

如果我随后将生成的内容`.xpi`移至新目录，解压缩`unzip`并检查内容，则我的大部分`lib`目录已被删除。目录中的文件`data`很好。

```
tree resources/addon_name 
resources/addon_name
├── data
│   ├── file1.js
│   ├── file2.js
│   ├── jquery.min.js
│   └── uri.js
└── lib
    └── main.js 
```

如果我不 uglify JS 文件，那么一切似乎都可以正常工作，当我解压缩 xpi 时，我将拥有一个完整的 lib 目录，正如我所期望的那样。

请注意，这不是丑化过程的问题（这是我检查的第一件事）。当我复制代码库并对其进行 uglify 时，我可以在此时停止该过程并列出`lib`目录。它将包含我期望的所有 uglified JS 文件。只有在包装和随后的解压缩之后，它们才会消失。

我尝试使用全新的扩展来重现这个问题，但我遇到了一个稍微不同的问题。基本上，`lib`目录中的文件在打包时都会被删除，无论它们是否被压缩。基本上我的步骤是：

```
mkdir test_extension
cd test_extension && cfx init
touch lib/uri.js // this is 
cd .. && cfx xpi pkgdir=test_extension // Have to run this part twice to get ID
mkdir unpack && mv test_textension.xpi unpack
cd unpack
unzip test_extension.xpi
ls resources/test_extension/lib
=> main.js // the uri.js file is missing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:15:10.810

如果`lib/uri.js`插件的任何 js 文件都不需要，它将从最终的 XPI 中删除。因此，如果您`require('./uri.js')`的 main.js 中有该文件，则该文件应该在打包后存在。

我的猜测是，丑化库使得当前的 cfx 工具无法生成包含所有依赖项的正确清单。请参阅[清单生成](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/chrome.html)。

***请注意**mozilla-labs-jetpack 邮件列表上的原始帖子，将答案复制到此处以对不了解 ML 的其他人有用。*

# android - 如何更改警报对话框的位置

> ID：12563687
> 
> 赞同：4
> 
> 时间：2012-09-24T11:02:46.100
> 
> 标签：android, animation

我有一个使用 Alertdialog 的 android 应用程序。我正在为此对话框设置动画。我想从左上角开始动画并在右下角结束。即，对话框希望在动画中从左上角移动到右下角持续时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T11:23:27.133

尝试这个

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Final Result");
        alert.setMessage(msg);
        alert.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                    }

                });

        // dlgAlert.create();
        AlertDialog dialog_card = alert.create();
        // dlgAlert.requestWindowFeature(Window.FEATURE_NO_TITLE);
        // WindowManager.LayoutParams WMLP =
        dialog_card.getWindow().setGravity(Gravity.TOP);

        dialog_card.show();` 
```

# asp.net-mvc-3 - Azure AppFabric 缓存。错误代码 :子状态

> ID：12563690
> 
> 赞同：1
> 
> 时间：2012-09-24T11:02:57.403
> 
> 标签：asp.net-mvc-3, azure, appfabric, appfabric-cache

发生了一件非常奇怪的事情，
我有一个用 MVC 3 制作的网站，部署在 Azure WebRole 中
，它运行良好，最初是在 VS2010 中制作的，
现在我使用 VS2012
，我决定做一些小改动，它似乎正在工作，但是以随机间隔保持故障
这是

随机间隔后发生的情况 我在收到此错误`ErrorCode<ERRCA0017>:SubStatus<ES0006>`
2-3 分钟后收到此错误 站点似乎工作正常

我没有更改与缓存
此错误相关的站点的先前版本的任何内容nt 发生在我在代码中测试它`staging`或在`local environment`
我以编程方式访问此缓存的任何位置时
我已经从 azure 门户复制粘贴了整个配置，我知道它是正确的，因为这些配置设置与
我刚刚使用之前工作的配置设置相同，`Azure AppFabric Caching`因为我需要保存`sessions`一些位置。所以唯一提到它的地方是在我的网站上`web config`，正如我所说的那样，所有配置都可以假设是正确的。

如果这可以有所帮助，这是堆栈跟踪

```
[DataCacheException: ErrorCode<ERRCA0017>:SubStatus<ES0006>:There is a temporary failure. Please retry later. (One or more specified cache servers are unavailable, which could be caused by busy network or servers. For on-premises cache clusters, also verify the following conditions. Ensure that security permission has been granted for this client account, and check that the AppFabric Caching Service is allowed through the firewall on all cache hosts. Also the MaxBufferSize on the server must be greater than or equal to the serialized object size sent from the client.)]
   Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody) +616
   Microsoft.ApplicationServer.Caching.DataCache.ExecuteAPI(RequestBody reqMsg, IMonitoringListener listener) +29
   Microsoft.ApplicationServer.Caching.DataCache.InternalGetAndLock(String key, TimeSpan timeout, DataCacheLockHandle& lockHandle, String region, Boolean lockKey, IMonitoringListener listener) +227
   Microsoft.ApplicationServer.Caching.<>c__DisplayClass78.<GetAndLock>b__77() +103
   Microsoft.ApplicationServer.Caching.DataCache.GetAndLock(String key, TimeSpan timeout, DataCacheLockHandle& lockHandle) +258
   Microsoft.Web.DistributedCache.<>c__DisplayClass31`1.<PerformCacheOperation>b__30() +19
   Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action) +208
   Microsoft.Web.DistributedCache.DataCacheForwarderBase.GetAndLock(String key, TimeSpan timeout, DataCacheLockHandle& lockHandle) +190
   Microsoft.Web.DistributedCache.BlobBasedSessionStoreProvider.GetItem(HttpContextBase context, String id, Boolean acquireWriteLock, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actions) +593
   Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.GetItemExclusive(HttpContext context, String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actions) +125
   System.Web.SessionState.SessionStateModule.GetSessionStateItem() +178
   System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData) +1076
   System.Web.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +115
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

**更新：-**
突然我发现了一个新错误，在我看来这是许多网站谈论
错误描述的内部错误之一

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond [IP-Address]:[PORT] 
```

这是新的堆栈跟踪

```
[SocketException (0x274c): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond [IP-ADDRESS]:[PORT]]
   System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +305
   System.Net.Sockets.Socket.Connect(EndPoint remoteEP) +162
   System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout) +774

[EndpointNotFoundException: Could not connect to [SOCKET-ENDPOINT]. The connection attempt lasted for a time span of 00:00:21.0308462\. TCP error code 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 111.221.89.111:22233\. ]
   System.Runtime.Remoting.Proxies.RealProxy.EndInvokeHelper(Message reqMsg, Boolean bProxyCase) +518
   System.Runtime.Remoting.Proxies.RemotingProxy.Invoke(Object NotUsed, MessageData& msgData) +401
   Microsoft.ApplicationServer.Caching.OpenDelegate.EndInvoke(IAsyncResult result) +0
   Microsoft.ApplicationServer.Caching.ChannelContainer.Opened(IAsyncResult ar) +122 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:51:59.950

一年多前有一篇关于此错误的有趣博客文章：[Azure AppFabric Caching - ErrorCode:SubStatus : What to do？](http://blogs.msdn.com/b/akshar/archive/2011/05/01/azure-appfabric-caching-errorcode-lt-errca0017-gt-substatus-lt-es0006-gt-what-to-do.aspx).

> 在初始化 DataCacheFactory 之前，将您正在使用的 dataCacheFactoryConfiguration 实例的 DataCacheFactoryConfiguration.ChannelOpenTimeout 修改为 2 分钟的较大值。（不能使用配置来设置值，因为在允许的限制内 20 秒）。此外，此建议仅用于调试目的，理想情况下在生产环境中不需要。这使底层能够以发生的实际错误进行响应。现在，如果您检查内部异常，您应该会看到导致请求失败的原因。

请按照以下步骤查找内部异常，该异常将解释请求失败的原因。

**注意：**如果这是由瞬态故障引起的，您应该考虑使用[瞬态故障处理应用程序块](http://msdn.microsoft.com/en-us/library/hh680934%28v=pandp.50%29.aspx)（也支持 AppFabric 缓存）来实施重试策略。

# javascript - 在日期选择器文本字段上调用另一个函数

> ID：12563691
> 
> 赞同：0
> 
> 时间：2012-09-24T11:02:57.437
> 
> 标签：javascript, jquery, ajax

我有一个带有 jQ​​uery 日历的表单。我想调用价格计算函数

但是如果我调用这个函数，# 符号会进入 url 并且页面会转到顶部。如果我删除 onChange 函数，表单运行良好，如何删除 # 登录调用函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:11:04.107

使用 JavaScript:void(0)

它不会让你到达页面的最上面一行..

href="JavaScript:void(0)"

# jquery-mobile - Photoswipe 库中的第一个选择不起作用

> ID：12563697
> 
> 赞同：1
> 
> 时间：2012-09-24T11:03:18.140
> 
> 标签：jquery-mobile, photoswipe

我正在使用带有 jQ​​uery Mobile 的 Photoswipe 图库。第一个选择，当单击/点击时仅显示具有完整 URL 的图像，并且不适用于图库方式。当我返回并再次选择时，它工作正常。

谁能告诉我如何解决这个问题？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:30:44.270

当用户直接使用链接 photoswipe 进入 photoswipe 画廊页面时，不会初始化。例如，即使使用直接链接进行官方演示也会呈现此问题。链接：[http ://www.photoswipe.com/latest/examples/04-jquery-mobile.html#Gallery1](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html#Gallery1)

尝试将 photoswipe 附加处理程序`pageshow`和`pagehide`事件的脚本放在`jquery-mobile.js`. 如果在用户第一次访问页面时不会触发处理程序后附加处理程序。

```
<script type="text/javascript" src="code.photoswipe-3.0.5.min.js"></script>
<script type="text/javascript">
    (function(window, $, PhotoSwipe){

        $(document).ready(function(){
            $('div.gallery-page')
                .live('pageshow', function(e){
                    if( $('ul.gallery', e.target).length > 0 ){
                        var 
                            currentPage = $(e.target),
                            options = {},
                            photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options,  currentPage.attr('id'));

                            return true;
                    }
                })

                .live('pagehide', function(e){
                    if( $('ul.gallery', e.target).length > 0 ){
                        var 
                            currentPage = $(e.target),
                            photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

                        if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                            PhotoSwipe.detatch(photoSwipeInstance);
                        }

                        return true;
                    }

                });

        });

    }(window, window.jQuery, window.Code.PhotoSwipe));

</script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

# windows-services - Windows 服务 64 位和 32 位

> ID：12563700
> 
> 赞同：0
> 
> 时间：2012-09-24T11:03:29.277
> 
> 标签：windows-services, 32bit-64bit, system.data.sqlite

我开发了一个 Windows servce，它可以在 Windows Server 2008（64 位）、Windows 7（64 位）上完美运行。我已将相同的服务编译为 32 位，但它仅在 32 位 windows 7 上运行，在 32 位 windows xp 上它意外停止。服务与 SQLite 数据库（创建、插入和 ..）和计时器线程一起使用。如果有人知道这个问题，请帮忙

# sql - 去掉 SELECT 中的非数字字符

> ID：12563701
> 
> 赞同：8
> 
> 时间：2012-09-24T11:03:29.647
> 
> 标签：sql, regex, ms-access, ms-access-2007

在 MS Access 2007 项目报告中，我有以下（已编辑）查询：

```
SELECT SomeCol FROM SomeTable 
```

问题是，这`SomeCol`显然包含一些不可见的字符。例如，我看到一个结果返回为`123456`但`SELECT LEN(SomeCol)`返回`7`。当我将结果复制到 Notepad++ 时，它显示为`?123456`.

该列设置为`TEXT`。我无法控制这种数据类型，所以我无法更改它。

如何修改我的`SELECT`查询以去除任何非数字。我怀疑 RegEx 是要走的路……或者，是否有`CAST`or`CONVERT`功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T18:16:57.440

您提到为此使用正则表达式。Access的数据库引擎确实不直接支持正则表达式。但是，您似乎愿意在查询中使用 VBA 用户定义函数……而 UDF 可以使用正则表达式方法。与遍历输入字符串的每个字符并仅存储您希望保留在新输出字符串中的那些字符相比，该方法应该简单、容易且执行速度更快。

```
Public Function OnlyDigits(ByVal pInput As String) As String
    Static objRegExp As Object

    If objRegExp Is Nothing Then
        Set objRegExp = CreateObject("VBScript.RegExp")
        With objRegExp
            .Global = True
            .Pattern = "[^\d]"
        End With
    End If
    OnlyDigits = objRegExp.Replace(pInput, vbNullString)
End Function 
```

这是立即窗口中该函数的示例，其中“x”字符作为您的不可见字符的代理。（*任何*未包含在“数字”字符类中的字符都将被丢弃。）

```
? OnlyDigits("x1x23x")
123 
```

如果这是您想要的输出，只需在查询中使用该函数。

```
SELECT OnlyDigits(SomeCol) FROM SomeTable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:37:56.207

Access 中没有 RegEx，至少 SQL 中没有。如果您冒险使用 VBA，您不妨在 SQL 语句中使用自定义 StripNonNumeric VBA 函数。

例如`SELECT StripNonNumeric(SomeCol) as SomeCol from SomeTable`

```
Function StripNonNumeric(str)
      keep = "0123456789"
      outstr = ""
      For i = 1 to len(str)
          strChar = mid(str,i,1)
          If instr(keep,strChar) Then
              outstr = outstr & strChar
          End If
      Next
      StripNonNumeric = outstr
  End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:50:51.443

您可以在查询中完成所有操作，将此问题与您[之前的问题](https://stackoverflow.com/questions/12560581/add-a-every-3rd-digit-pad-with-0-in-select/12560936#comment16923664_12560936)结合起来，您会得到：

```
SELECT IIf(IsNumeric([atext]),
           IIf(Len([atext])<4,Format([atext],"000"),
               Replace(Format(Val([atext]),"#,###"),",",".")),
           IIf(Len(Mid([atext],2))<4,Format(Mid([atext],2),"000"),
               Replace(Format(Val(Mid([atext],2)),"#,###"),",","."))) AS FmtNumber
FROM Table AS t; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T07:07:02.347

```
Public Function fExtractNumeric(strInput) As String
' Returns the numeric characters within a string in
' sequence in which they are found within the string
Dim strResult As String, strCh As String
Dim intI As Integer
If Not IsNull(strInput) Then
    For intI = 1 To Len(strInput)
        strCh = Mid(strInput, intI, 1)
        Select Case strCh
            Case "0" To "9"
                strResult = strResult & strCh
            Case Else
        End Select
    Next intI
End If
fExtractNumeric = strResult 
```

结束功能

# clojure - 从 noir 发送外部 http 请求

> ID：12563705
> 
> 赞同：0
> 
> 时间：2012-09-24T11:03:43.500
> 
> 标签：clojure, noir

我需要在向服务器发出请求时，我想从外部服务器获取一些数据以处理当前请求。花一些时间搜索，但没有运气。我使用**noir 1.2.2**

有什么办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:27:12.977

我自己想通了。

它非常简单，我使用黑色附带的**clj-http-0.1.1.jar 完成了它......**

```
(clj-http.client/post "uri" "params") 
```

# mysql - 是否有 MySQL 选项/功能来跟踪记录更改的历史记录？

> ID：12563706
> 
> 赞同：149
> 
> 时间：2012-09-24T11:03:45.557
> 
> 标签：mysql, database

有人问我是否可以跟踪 MySQL 数据库中记录的更改。因此，当一个字段被更改时，旧的与新的可用以及发生的日期。是否有功能或常用技术可以做到这一点？

如果是这样，我正在考虑做这样的事情。创建一个名为`changes`. 它将包含与**主**表相同的字段，但以 old 和 new 为前缀，但仅适用于实际更改的字段和 a `TIMESTAMP`。它将用`ID`. 这样，`SELECT`可以运行报告以显示每条记录的历史记录。这是一个好方法吗？谢谢！

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-09-29T22:17:45.983

这是一个简单的方法来做到这一点：

首先，为您要跟踪的每个数据表创建一个历史表（下面的示例查询）。该表将为对数据表中的每一行执行的每个插入、更新和删除查询都有一个条目。

历史表的结构将与它跟踪的数据表相同，除了三个附加列：存储发生的操作的列（我们称其为“操作”）、操作的日期和时间以及一列存储序列号（'revision'），每次操作递增，并按数据表的主键列分组。

要执行此排序行为，在主键列和修订列上创建两列（复合）索引。请注意，如果历史表使用的引擎是 MyISAM，则只能以这种方式进行排序（[请参阅本页上的“MyISAM 注释”）](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

历史表很容易创建。在下面的 ALTER TABLE 查询（以及下面的触发器查询）中，将“primary_key_column”替换为数据表中该列的实际名称。

```
CREATE TABLE MyDB.data_history LIKE MyDB.data;

ALTER TABLE MyDB.data_history MODIFY COLUMN primary_key_column int(11) NOT NULL, 
   DROP PRIMARY KEY, ENGINE = MyISAM, ADD action VARCHAR(8) DEFAULT 'insert' FIRST, 
   ADD revision INT(6) NOT NULL AUTO_INCREMENT AFTER action,
   ADD dt_datetime DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER revision,
   ADD PRIMARY KEY (primary_key_column, revision); 
```

然后创建触发器：

```
DROP TRIGGER IF EXISTS MyDB.data__ai;
DROP TRIGGER IF EXISTS MyDB.data__au;
DROP TRIGGER IF EXISTS MyDB.data__bd;

CREATE TRIGGER MyDB.data__ai AFTER INSERT ON MyDB.data FOR EACH ROW
    INSERT INTO MyDB.data_history SELECT 'insert', NULL, NOW(), d.* 
    FROM MyDB.data AS d WHERE d.primary_key_column = NEW.primary_key_column;

CREATE TRIGGER MyDB.data__au AFTER UPDATE ON MyDB.data FOR EACH ROW
    INSERT INTO MyDB.data_history SELECT 'update', NULL, NOW(), d.*
    FROM MyDB.data AS d WHERE d.primary_key_column = NEW.primary_key_column;

CREATE TRIGGER MyDB.data__bd BEFORE DELETE ON MyDB.data FOR EACH ROW
    INSERT INTO MyDB.data_history SELECT 'delete', NULL, NOW(), d.* 
    FROM MyDB.data AS d WHERE d.primary_key_column = OLD.primary_key_column; 
```

你完成了。现在，“MyDb.data”中的所有插入、更新和删除都将记录在“MyDb.data_history”中，为您提供这样的历史表（减去人为的“data_columns”列）

```
ID    revision   action    data columns..
1     1         'insert'   ....          initial entry for row where ID = 1
1     2         'update'   ....          changes made to row where ID = 1
2     1         'insert'   ....          initial entry, ID = 2
3     1         'insert'   ....          initial entry, ID = 3 
1     3         'update'   ....          more changes made to row where ID = 1
3     2         'update'   ....          changes made to row where ID = 3
2     2         'delete'   ....          deletion of row where ID = 2 
```

要显示给定列从更新到更新的更改，您需要在主键和序列列上将历史表连接到自身。您可以为此目的创建一个视图，例如：

```
CREATE VIEW data_history_changes AS 
   SELECT t2.dt_datetime, t2.action, t1.primary_key_column as 'row id', 
   IF(t1.a_column = t2.a_column, t1.a_column, CONCAT(t1.a_column, " to ", t2.a_column)) as a_column
   FROM MyDB.data_history as t1 INNER join MyDB.data_history as t2 on t1.primary_key_column = t2.primary_key_column 
   WHERE (t1.revision = 1 AND t2.revision = 1) OR t2.revision = t1.revision+1
   ORDER BY t1.primary_key_column ASC, t2.revision ASC 
```

编辑：哦，哇，人们喜欢我 6 年前的历史表：P

我认为它的实现仍在嗡嗡作响，变得越来越大，越来越笨拙。我写了视图和漂亮的 UI 来查看这个数据库中的历史，但我认为它没有被太多使用。就这样。

不按特定顺序处理一些评论：

*   我在 PHP 中做了自己的实现，涉及更多一点，并避免了评论中描述的一些问题（有索引转移，显着。如果你将唯一索引转移到历史表，事情就会中断。有解决方案这在评论中）。根据您的数据库建立的程度，遵循此帖子可能是一次冒险。

*   如果主键和修订列之间的关系似乎不正确，则通常意味着复合键以某种方式失效。在极少数情况下，我会发生这种情况并且不知所措。

*   我发现这个解决方案非常高效，它使用触发器。此外，MyISAM 的插入速度很快，这是所有触发器所做的。您可以通过智能索引（或缺少...）进一步改进这一点。实际上，除非您在其他地方遇到重大问题，否则将单行插入具有主键的 MyISAM 表不应该是您需要优化的操作。在我运行这个历史表实现的 MySQL 数据库的整个过程中，它从来都不是出现任何（许多）性能问题的原因。

*   如果您收到重复插入，请检查您的软件层是否有 INSERT IGNORE 类型查询。嗯，现在不记得了，但我认为这个方案和事务在运行多个 DML 操作后最终会失败。至少要注意一些事情。

*   历史表和数据表中的字段必须匹配，这一点很重要。或者，更确切地说，您的数据表没有比历史表更多的列。否则，当对历史表的​​插入将不存在的列放入查询中时（由于触发器查询中的 d.*），对数据表的插入/更新/删除查询将失败，并且触发器失败。如果 MySQL 有类似模式触发器之类的东西，那就太棒了，如果将列添加到数据表中，您可以在其中更改历史表。MySQL现在有吗？这些天我做 React :P

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-09-24T11:45:46.663

这是微妙的。

如果业务需求是“我想审计对数据的更改——谁在什么时候做了什么？”，您通常可以使用审计表（根据 Keethanjan 发布的触发器示例）。我不是触发器的忠实拥护者，但它的巨大好处是实现起来相对轻松 - 您现有的代码不需要了解触发器和审计内容。

如果业务需求是“告诉我数据在过去给定日期的状态”，则意味着随时间变化的方面已进入您的解决方案。虽然您几乎可以通过查看审计表来重建数据库的状态，但它既困难又容易出错，而且对于任何复杂的数据库逻辑，它都变得笨拙。例如，如果企业想知道“找到我们应该发送给在当月第一天有未付未付发票的客户的信件的地址”，您可能需要搜索六张审计表。

相反，您可以将随时间变化的概念融入您的模式设计中（这是 Keethanjan 建议的第二个选项）。这是对您的应用程序的更改，肯定是在业务逻辑和持久性级别，所以它不是微不足道的。

例如，如果您有这样的表：

```
CUSTOMER
---------
CUSTOMER_ID PK
CUSTOMER_NAME
CUSTOMER_ADDRESS 
```

并且您想随着时间的推移进行跟踪，您将对其进行如下修改：

```
CUSTOMER
------------
CUSTOMER_ID            PK
CUSTOMER_VALID_FROM    PK
CUSTOMER_VALID_UNTIL   PK
CUSTOMER_STATUS
CUSTOMER_USER
CUSTOMER_NAME
CUSTOMER_ADDRESS 
```

每次您想更改客户记录时，您无需更新记录，而是将当前记录上的 VALID_UNTIL 设置为 NOW()，并插入一条带有 VALID_FROM（现在）和空 VALID_UNTIL 的新记录。您将“CUSTOMER_USER”状态设置为当前用户的登录 ID（如果您需要保留它）。如果需要删除客户，您可以使用 CUSTOMER_STATUS 标志来指示这一点 - 您可能永远不会从该表中删除记录。

这样，您总是可以找到给定日期客户表的状态 - 地址是什么？他们改名了吗？通过加入其他具有相似valid_from 和valid_until 日期的表，您可以从历史上重建整个图片。要查找当前状态，请搜索具有空 VALID_UNTIL 日期的记录。

它很笨拙（严格来说，您不需要valid_from，但它使查询更容易一些）。它使您的设计和数据库访问变得复杂。但它使重建世界变得容易得多。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-24T11:07:39.827

您可以创建触发器来解决此问题。[这是一个这样做的教程](http://web.archive.org/web/20121104211941/http://codespatter.com/2008/05/06/how-to-use-triggers-to-track-changes-in-mysql)（存档链接）。

> 在数据库中设置约束和规则比编写特殊代码来处理相同的任务要好，因为它会阻止另一个开发人员编写绕过所有特殊代码的不同查询，并可能使您的数据库数据完整性较差。
> 
> 很长一段时间以来，我一直在使用脚本将信息复制到另一个表，因为当时 MySQL 不支持触​​发器。我现在发现这个触发器可以更有效地跟踪所有内容。
> 
> 如果有人编辑行时更改了旧值，此触发器会将旧值复制到历史记录表中。`Editor ID`并且`last mod`每次有人编辑该行时都存储在原始表中；时间对应于它更改为当前形式的时间。

```
DROP TRIGGER IF EXISTS history_trigger $$

CREATE TRIGGER history_trigger
BEFORE UPDATE ON clients
    FOR EACH ROW
    BEGIN
        IF OLD.first_name != NEW.first_name
        THEN
                INSERT INTO history_clients
                    (
                        client_id    ,
                        col          ,
                        value        ,
                        user_id      ,
                        edit_time
                    )
                    VALUES
                    (
                        NEW.client_id,
                        'first_name',
                        NEW.first_name,
                        NEW.editor_id,
                        NEW.last_mod
                    );
        END IF;

        IF OLD.last_name != NEW.last_name
        THEN
                INSERT INTO history_clients
                    (
                        client_id    ,
                        col          ,
                        value        ,
                        user_id      ,
                        edit_time
                    )
                    VALUES
                    (
                        NEW.client_id,
                        'last_name',
                        NEW.last_name,
                        NEW.editor_id,
                        NEW.last_mod
                    );
        END IF;

    END;
$$ 
```

另一种解决方案是保留修订字段并在保存时更新此字段。您可以决定 max 是最新的版本，或者 0 是最新的行。随你（由你决定。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-11T01:37:38.403

这是我们如何解决的

用户表看起来像这样

```
Users
-------------------------------------------------
id | name | address | phone | email | created_on | updated_on 
```

业务需求发生了变化，我们需要检查用户以前拥有的所有地址和电话号码。新架构看起来像这样

```
Users (the data that won't change over time)
-------------
id | name

UserData (the data that can change over time and needs to be tracked)
-------------------------------------------------
id | id_user | revision | city | address | phone | email | created_on
 1 |   1     |    0     | NY   | lake st | 9809  | @long | 2015-10-24 10:24:20
 2 |   1     |    2     | Tokyo| lake st | 9809  | @long | 2015-10-24 10:24:20
 3 |   1     |    3     | Sdny | lake st | 9809  | @long | 2015-10-24 10:24:20
 4 |   2     |    0     | Ankr | lake st | 9809  | @long | 2015-10-24 10:24:20
 5 |   2     |    1     | Lond | lake st | 9809  | @long | 2015-10-24 10:24:20 
```

要查找任何用户的当前地址，我们使用修订版 DESC 和 LIMIT 1 搜索 UserData

要在特定时间段内获取用户的地址，我们可以使用 created_on bewteen (date1 , date 2)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-09-04T13:52:15.760

MariaDB 从 10.3 开始支持系统版本控制，这是标准 SQL 功能，可以完全满足您的需求：它存储表记录的历史记录并通过`SELECT`查询提供对其的访问。MariaDB 是 MySQL 的一个开放式开发分支。您可以通过此链接找到有关其系统版本控制的更多信息：

[https://mariadb.com/kb/en/library/system-versioned-tables/](https://mariadb.com/kb/en/library/system-versioned-tables/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-19T13:40:21.480

为什么不简单地使用 bin 日志文件？如果在 Mysql 服务器上设置了复制，并且 binlog 文件格式设置为 ROW，则可以捕获所有更改。

可以使用一个很好的名为 noplay 的 Python 库。更多信息[在这里](https://aws.amazon.com/blogs/database/streaming-changes-in-a-database-with-amazon-kinesis/)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-15T07:46:53.297

只是我的2美分。我将创建一个解决方案来准确记录更改的内容，这与瞬态的解决方案非常相似。

我的 ChangesTable 很简单：

`DateTime | WhoChanged | TableName | Action | ID |FieldName | OldValue`

1）当主表中的一整行被更改时，很多条目会进入这个表，但是这不太可能，所以不是一个大问题（人们通常只改变一件事）2）OldVaue（如果你想要）必须是某种史诗般的“任何类型”，因为它可以是任何数据，可能有一种方法可以使用 RAW 类型或仅使用 JSON 字符串来转换输入和输出。

最小的数据使用量，存储您需要的所有内容，并且可以一次用于所有表。我现在正在自己研究这个，但这可能最终成为我要走的路。

对于创建和删除，只需行 ID，不需要任何字段。删除主表上的标志（活动？）会很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-04T05:26:40.127

这样做的直接方法是在表上创建触发器。设置一些条件或映射方法。当更新或删除发生时，它会自动插入到“更改”表中。

但最大的部分是如果我们有很多列和很多表怎么办。我们必须输入每个表的每一列的名称。显然，这是浪费时间。

为了更华丽地处理这个问题，我们可以创建一些过程或函数来检索列的名称。

我们也可以简单地使用 3rd-part 工具来做到这一点。在这里，我写了一个java程序 [Mysql Tracker](https://github.com/goforu/Mysql-Tracker)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-04T04:22:07.510

在 MariaDB 10.5+ 中，这很容易设置

```
CREATE TABLE t (x INT) WITH SYSTEM VERSIONING 
  PARTITION BY SYSTEM_TIME; 
```

然后可以通过做查询过​​去的历史

```
SELECT * FROM t FOR SYSTEM_TIME AS OF TIMESTAMP '2016-10-09 08:07:06'; 
```

目前在 MySQL 中没有对应的。

有关更多信息，请参阅[文档](http://take%20a%20look%20at%20https://mariadb.com/kb/en/system-versioned-tables/)。如果您使用的是较旧版本的 MariaDB，则该文档具有自 MariaDB 10.3.4 以来可用的替代语法。

# c++ - 在 txt 文件中查找长度为 L 的特定字符串的出现

> ID：12563709
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:03:51.507
> 
> 标签：c++, string

假设我有一个`y`长度为 N 的十六进制字符串，形式为`y{N}y{N-1}...y{1}`。然后给定另一个`x`长度为 L 的十六进制字符串（L 小于 N），我想检查这个字符串出现了多少次（如果有的话）`y`......比如说`y{N}...x{L}x{L-1}...x{1}...y{j}..x{L}x{L-1}...x{1}....y{1}`. 在 C++ 中执行此操作的最有效方法是什么？...我需要一个非常有效的实现，因为我想为大型数据库运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:19:12.707

您的请求是一个简单的[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm)。有很多算法可以做到这一点。他们中的大多数会在 O(L+N) 中通过预处理给你一个很好的答案。

您还可以使用[后缀树](http://marknelson.us/1996/08/01/suffix-trees/)，它会在 O(L + Z) 中提供更快的答案，其中 Z 是 x 在 y 中出现的次数。后缀树虽然占用大量内存空间 (O(N²))，但在这里可能不是理想的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:20:42.327

“十六进制”在这里并不意味着什么。C++ 是一种计算机语言，并且适用于位。“十六进制”只是将 4 位组合在一起以供人类使用的便捷方式。

类似地，C++ 不会像`y{N}y{N-1}...y{1}`. 它将它们索引为`y[0],y[1],y[N-1]`. （没有`y[N]`。）

在正常情况下，`std::string::find`它会比你的磁盘快，这意味着它已经足够快了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:10:28.530

> 在 C++ 中，哪种方法最有效？

尝试您[`std::search`](http://en.cppreference.com/w/cpp/algorithm/search)的[`std::istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator)输入文件，如下所示：

```
#include <string>
#include <iterator>
#include <iostream>
#include <algorithm>

int main () {
  // std::ifstream input("input.txt");
  std::istream& input(std::cin);
  std::string search_for("1234");

  std::istream_iterator<char> last;
  std::istream_iterator<char> it(input);
  int count(0);

  while((it = std::search(it, last, search_for.begin(), search_for.end())) != last) {
    count++;
  }

  std::cout << count << "\n";

} 
```

如果这还不够快，您可以尝试[`std::istreambuf_iterator`](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator).

如果*这*还不够快，您可以尝试对文件进行内存映射并使用初始和最终指针作为迭代器。

# asterisk - 从一个 dahdi 频道跳转到另一个频道

> ID：12563712
> 
> 赞同：1
> 
> 时间：2012-09-24T11:04:01.837
> 
> 标签：asterisk, asteriskami

嗨，我会尽我所能描述。

我将 Asterisk 1.4 与 DAHDI 2.4 一起使用。我们已经合并了两条 PRI 线，即现在我们在一个跨度上有 60 条线。

我想将呼叫从一个通道跳到另一个通道，即我的呼叫在通道号上收到。3 dahdi 然后我想将此呼叫切换到通道号 32，即在第二个号码上（并非全部，仅适用于某些特定情况）。

我`Dial(DAHDI/G1)`习惯拨打上次可用的免费频道，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:26:36.827

您可以创建 2 个组并拨号到 dahdi/g2。

有关示例，请参见默认 chan_dahdi.conf.sample。您还可以将一些频道放到 1 个以上的组中（例如，将 0 组全部和 group1 仅 pri span 1）

# windows-7 - 从系统帐户运行脚本，但将其显示给“普通”用户

> ID：12563715
> 
> 赞同：0
> 
> 时间：2012-09-24T11:04:09.133
> 
> 标签：windows-7, vbscript, hta, user-interaction, rights-management

我试图通过向用户显示某种 gui 来使我们的软件部署更加用户友好，用户可以在其中获取一些信息并自己进行一些设置。我遇到的问题是充当 gui 的脚本（它是一个 HTA vbsctipt）是通过系统帐户执行的，因此不会直接显示给用户。相反，用户会收到消息“交互式服务检测”（由 Windows 7 上的 UIODetect 服务初始化）。单击该消息后，用户可以看到 gui。有没有办法直接向用户显示 gui？也许就像为用户创建一个任务，但比使用特权运行脚本（用户没有管理权限）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T22:27:59.737

您遇到的问题是由于会话 0 隔离，会话 0 隔离是在 Vista 及更高版本中引入的。以下是网站的摘录：

[http://technet.microsoft.com/en-us/library/ee449431(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ee449431(v=ws.10).aspx)

> 会话 0 隔离。在 Windows XP 和更早版本的 Windows 中，所有服务都在与登录控制台的第一个用户相同的会话中运行。此会话称为会话 0。在会话 0 中同时运行服务和用户应用程序会带来安全风险，因为服务以提升的特权运行，因此是寻求提升自身特权级别的方法的恶意代理的目标。Windows Vista 和 Windows 7 操作系统通过隔离 Session 0 中的服务并使 Session 0 非交互来减轻这种安全风险。在这种情况下，只有系统进程和服务在会话 0 中运行。第一个用户登录到会话 1，后续用户登录到后续会话。

该网站可能有助于提供解决方案：

[http://csi-windows.com/toolkit/csi-msgq](http://csi-windows.com/toolkit/csi-msgq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T05:52:21.580

检查[http://dieseyer.de/scr/elevate.hta](http://dieseyer.de/scr/elevate.hta)

并使用

函数 HTAElevate()

在 WinXP 和 Win7 中 - 它工作正常

```
<html>
<head>
<title>HTA Helpomatic</title>

<HTA:APPLICATION
     ID="oHTA"
     APPLICATIONNAME="HTAHelpomatic"
     SCROLL="yes"
     SINGLEINSTANCE="yes"
>
<!-- ID="objHTAHelpomatic" -->
<!-- WINDOWSTATE="maximize" -->

</head>

<SCRIPT Language="VBScript">

If HTAElevate() = True Then
    CreateObject("WScript.Shell").Run "mmc.exe compmgmt.msc", , True
    Call Main()
End If

Sub Main()
    MsgBox "HTA-Ende", 4096
End Sub

'*** v13.3 *** www.dieseyer.de *****************************
Function HTAElevate()
'***********************************************************
' http://dieseyer.de/scr/elevate.hta
' Unter Windows x64 laufen VBS' nach einem Doppelklick in der x64-Umgebung
' mit %WinDi%\System32\wscript.exe oder mit %WinDi%\System32\cscript.exe.
' In der x64-Umgebung laufen VBS aber nicht (richtig). Die Prozedur
' HTAElevate() erkennt dies und startet ggf. das VBS in der

  Const Elev = " /elevated"

' MsgBox oHTA.commandLine, , "5016 :: "

' Trace32Log "5018 :: oHTA.commandLine: ==" & oHTA.commandLine & "==", 1

  HTAElevate = True

' If InStr( LCase( oHTA.commandLine ), Elev) > 0 then MsgBox oHTA.commandLine, , "5022 :: "
  If InStr( LCase( oHTA.commandLine ), Elev) > 0 then Exit Function

  On Error Resume Next
    window.resizeto 750, 10 ' : window.moveto screen.width / 2, screen.height / 2
  On Error GoTo 0

' MsgBox oHTA.commandLine, , "5030 :: "

  createobject("Shell.Application").ShellExecute "mshta.exe", oHTA.commandLine & Elev, "", "runas", 1

  HTAElevate = False

  self.close

End Function ' HTAElevate()

</SCRIPT>
<body>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T22:46:22.093

> [PAExec](https://github.com/poweradminllc/PAExec "PAExec")是一个免费的、可再发行的和开源的，相当于微软流行的 PsExec 应用程序

例如，我有两个活动会话：

```
PS C:\> query session
SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE
 services                                    0  Disc
>console           Administrator             1  Active
 rdp-tcp#3         administrator2            2  Active
 rdp-tcp                                 65536  Listen 
```

在会话 2 上打开计算器：

```
PS C:\> paexec.exe -i 2 -s C:\Windows\System32\calc.exe 
```

`-s`从会话 0 运行时，可能不需要该参数。

# sugarcrm - 电子邮件未在 cronjob SugarCRM 中发送

> ID：12563723
> 
> 赞同：1
> 
> 时间：2012-09-24T11:04:45.037
> 
> 标签：sugarcrm

我已成功使用本地主机中的 gmail 设置了电子邮件设置，并且我的糖实例正在发送测试邮件。我还完成了 cron 作业设置并对其进行了测试。当我尝试在无法发送的 cron 作业中发送电子邮件时，就会出现问题。我正在使用的基本代码是

```
 require_once('include/SugarPHPMailer.php'); 
    $emailObj = new Email();
    $defaults = $emailObj->getSystemDefaultEmail();
    $mail = new SugarPHPMailer();
    $mail->setMailerForSystem();
    $mail->From = $defaults['email'];
    $mail->FromName = $defaults['name'];
    $mail->Subject=from_html($bean->name);
    $mail->Body="hello this is testing ....!";
    $mail->prepForOutbound();
    $mail->AddAddress('abc@yahoo.com'); 
    @$mail->Send(); 
```

致命日志中显示以下错误。

```
09/24/12 10:58:07 [4560][1][FATAL] SMTP -> ERROR: EHLO not accepted from server. Code: , Reply: 
09/24/12 10:58:07 [4560][1][FATAL] SMTP -> ERROR: HELO not accepted from server. Code: , Reply: 
09/24/12 10:58:07 [4560][1][FATAL] SMTP -> ERROR:AUTH not accepted from server. Code:  Reply: 
09/24/12 10:58:07 [4560][1][FATAL] SugarPHPMailer encountered an error: SMTP Error: Could not authenticate.
09/24/12 10:58:07 [4560][1][FATAL] SugarPHPMailer encountered an error: SMTP Error: Could not connect to SMTP host.
09/24/12 10:58:07 [4560][1][FATAL] SugarPHPMailer encountered an error: An outgoing mail server is not configured to send emails. Please configure an outgoing mail server or select an outgoing mail server for the mail account that you are using in Settings >> Mail Account. 
```

有时它会给出以下一个，

```
 09/24/12 11:01:07 [832][1][FATAL] SugarPHPMailer encountered an error: Language string failed to load: tls 
```

有人可以帮忙吗？

# windows-runtime - 在 WinRT 应用程序中不再可能创建 BitmapSource 对象？

> ID：12563725
> 
> 赞同：0
> 
> 时间：2012-09-24T11:04:50.423
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

BitmapSource 在适用于 Windows 应用商店应用的 .NET API 中没有 Create 方法。我假设不再可能动态创建图像（如果是，为什么？）。或者有谁知道如何在 Windows 应用商店应用程序中以编程方式创建图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:19:30.700

请参阅[http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)和成像扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:07:01.930

WriteableBitmap 就是答案。它有一个构造函数，它接受 with 和 height 并允许对其进行写入和更新。

# python - python m2crypt 和 load_key，但我只有一个 .cert 文件

> ID：12563730
> 
> 赞同：2
> 
> 时间：2012-09-24T11:05:08.360
> 
> 标签：python, openssl, pem, passbook

我有一个问题。我正在用 python 测试一些关于苹果存折的提示。我正在使用 M2Crypto 来获取签名。

代码是：

```
 def passwordCallback(*args, **kwds):
        return password

    smime = SMIME.SMIME()
    smime.load_key(key, certificate, callback=passwordCallback)
    pk7 = smime.sign(SMIME.BIO.MemoryBuffer(manifest), flags=SMIME.PKCS7_DETACHED | SMIME.PKCS7_BINARY)
    pem = SMIME.BIO.MemoryBuffer()
    pk7.write(pem)
    der = ''.join(l.strip() for l in pem.read().split('-----')[2].splitlines()).decode('base64') 
```

该代码应该运行良好并生成签名内容，问题在于“密钥”和“证书”。

这两个变量是certificate.pem 和key.pem 的名称，但我只从Apple Developer 门户下载了pass.cert 文件。

如何使用 openssl 或类似的东西获得这两个文件？

解决了：

我已经用这个链接解决了

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:22:57.177

您需要从第三方证书颁发机构 (CA) 获取证书，或者使用类似于[openSSL](http://www.openssl.org/docs/HOWTO/certificates.txt)中描述的过程创建自签名证书。如果您只是测试一些代码，则自签名证书将起作用，但 CA 颁发的证书会向其他用户提供一些指示，表明您就是证书所说的您。您可以创建自称是 Tim_Cook@apple.com 的自签名证书，但没有信誉良好的 CA 会向您颁发这样的证书。

# android - 用于振动和静音的 Android 广播接收器

> ID：12563731
> 
> 赞同：4
> 
> 时间：2012-09-24T11:05:19.700
> 
> 标签：android, android-intent

我需要一个广播接收器实现，用户可以在其中检查电话是从振铃模式变为静音还是从静音变为振动，反之亦然。

```
int volumeValue = (Integer)intent.getExtras().get("android.media.EXTRA_VOLUME_STREAM_VALUE"); 
```

我尝试了这段代码，但它对我没有多大帮助，因为它提供了从铃声到静音和静音到振动的相同价值，反之亦然。我真的想捕捉手机从铃声模式到静音和静音到振动时的动作提前谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T11:15:44.643

在接收器的 onCreate() 方法中编写此代码：

```
 BroadcastReceiver receiver=new BroadcastReceiver(){
          @Override
          public void onReceive(Context context, Intent intent) {
               //code...
          }
      };
      IntentFilter filter=new IntentFilter(
                      AudioManager.RINGER_MODE_CHANGED_ACTION);
      registerReceiver(receiver,filter); 
```

还将其添加到 mainfest 文件中：

```
<receiver android:name=".receivers.RingerModeStateChangeReceiver" >
        <intent-filter>
            <action android:name="android.media.RINGER_MODE_CHANGED" />
        </intent-filter>
    </receiver> 
```

# android - 如果订阅购买了两次，RESTORE_TRANSACTIONS 的响应是什么？

> ID：12563733
> 
> 赞同：0
> 
> 时间：2012-09-24T11:05:26.617
> 
> 标签：android, in-app-purchase, in-app-billing, recurring-billing, android-billing

我自己无法对此进行测试，因为显然无法完全终止订阅。

所以，我想测试以下用例：用户购买订阅，取消它（或过期），而不是用户购买相同的订阅。

RESTORE_TRANSACTIONS 响应我会得到什么？我会得到两件具有相同物品 ID、不同购买令牌和不同状态的物品吗？还是 purchaseToken 会保持不变？恐怕只有一个订单ID和购买令牌不同的订阅，之前订阅的信息会丢失，但我现在无法确认。此外，订阅中的每次重复购买都会更改 orderId 吗？

为什么我需要这个 - 订阅每天都会为用户提供新内容，所以当用户取消订阅（订阅 A）然后购买新的（订阅 B）时，我需要向用户展示在时间范围内发布的`subscription A`内容，以及的时间范围`subscription B`，但不是在使用期间发布的内容没有有效订阅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:46:58.910

> **注意**`RESTORE_TRANSACTIONS`：仅当您的应用程序首次安装在设备上或您的应用程序已从设备中删除并重新安装时，您才应使用请求类型。
> 
> `RESTORE_TRANSACTIONS`由于性能影响，不建议定期使用。

取自 Android 开发者[http://developer.android.com/guide/google/play/billing/billing_overview.html](http://developer.android.com/guide/google/play/billing/billing_overview.html)

尽管我确实理解您对订阅计费的担忧。Google 非常擅长他们的 API 以及您应该如何与购买进行交互。

当您发送`RESTORE_TRANSACTIONS`请求时，您将收到两个广播。一个`RESPONSE_CODE`和一个`PURCHASE_STATE_CHANGED`。这是来自 Google 的表格，说明了您可以收到的不同值。

![在此处输入图像描述](../Images/f76551b56e10f7d9dca88a4a4f5778cf.png)

回到您关于购买两个订阅的问题：您应该检查用户是否已通过`GET_PURCHASE_INFORMATION`请求购买了订阅，如果订阅在列表中，请检查订阅的购买状态，看看您是否应该继续购买。

至于如果你“可以”购买两个相同的订阅，你会得到什么，它（我想说不可能）不太可能......但你会得到两个订单交易。

只要您始终了解您的用户交易，Google 的 API 就会完成剩下的工作。祝你好运！

# xcode - Xcode 4.5 未找到已弃用的函数

> ID：12563735
> 
> 赞同：6
> 
> 时间：2012-09-24T11:05:30.183
> 
> 标签：xcode, warnings, deprecated

我的问题是我无法在 xcode 4.5 中可视化已弃用的警告。像 viewDidUnload 或 presentModalViewController。我检查了标志“警告弃用功能”并且是正确的（是）。我试图创建一个新项目并复制所有文件，但我得到了相同的结果。我尝试使用两个可用的编译器 LLVM GCC4.2 和 Apple LLVM 4.1 进行构建。奇怪的是，其他项目正确地找到了所有不推荐使用的函数。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T00:23:40.963

这些警告似乎基于您的部署目标。（而不是我所期望的基本 SDK。）这似乎是一个明智的选择，因为为了摆脱警告，您很有可能需要使用尚不存在的新方法较旧的 SDK。

因此，如果您想确保看到所有弃用警告，请在“目标”列表中选择您的目标，并将“部署目标”设置为最新版本。进行构建或从产品菜单中选择分析，您将看到所有警告。

![Xcode 中的部署目标设置](../Images/a4fb81e0ec63e3e44c3e971a6d8040aa.png)

# asp.net - SSRS：表中断问题

> ID：12563739
> 
> 赞同：0
> 
> 时间：2012-09-24T11:05:34.823
> 
> 标签：asp.net, reporting-services, export, localreport

我在`SSRS`报告中使用了表格，当我以格式导出它时`pdf`，表格进入半页，表格的其余部分进入第二页。前半页为空白。

见图片：

![在此处输入图像描述](../Images/226f5fc1ed9843694787cb3f7c68efcc.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:48:49.120

转到报告 -> 报告属性，然后更改纸张大小宽度和高度

# objective-c - C - 如何定义数据类型

> ID：12563743
> 
> 赞同：0
> 
> 时间：2012-09-24T11:05:47.947
> 
> 标签：objective-c

我只是想弄清楚一个问题。

在 C 语法中，数据类型的示例可能是`char`or `int`or `float`or `double`or `BOOL`（这只是一个 int 对吗？）

好吧，我只是想知道。这些数据类型是如何存储/定义的。您无权查找，它不是一个类。

程序员如何对这些数据类型进行编程，以便将它们识别为整数或字符？

它们是如何存储的？

我只是想问这个问题，因为它已经困扰了我一段时间！

# c# - 使用 c# windows 应用程序将数据库信息存储到 .csv 文件

> ID：12563744
> 
> 赞同：1
> 
> 时间：2012-09-24T11:05:52.787
> 
> 标签：c#

> **可能重复：**
> [从 Lists/SortedLists C# 创建 CSV 字符串的有效方法？](https://stackoverflow.com/questions/4425574/efficient-method-for-creating-csv-string-from-lists-sortedlists-c)

这里我需要使用 c# 将数据库信息导出到 .csv 文件，

在这里，我给出了我的代码，但加载到 csv 文件需要更多时间

```
public void CSVFile(DataTable table, string FilePath)
{
// Create the CSV file to which grid data will be exported.
StreamWriter swr = new StreamWriter(FilePath, false);
//First we will write the headers.
int iColCount = table.Columns.Count;
for (int i = 0; i < iColCount; i++)
{
    swr.Write(dtDataTablesList.Columns[i]);
    if (i < iColCount - 1)
    {
        swr.Write(",");
    }
}
swr.Write(swr.NewLine);

// Now write all the rows.
foreach (DataRow dr in table.Rows)
{
    for (int i = 0; i < iColCount; i++)
    {
        if (!Convert.IsDBNull(dr[i]))
        {
            swr.Write(dr[i].ToString());
        }
        if (i < iColCount - 1)
        {
            swr.Write(",");
        }
    }
    swr.Write(sw.NewLine);
}
swr.Close();
} 
```

请告诉我更好的方法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:10:34.580

是的，最近我有同样的问题，

我有解决方案，试试这个代码。

```
private void button1_Click(object sender, EventArgs e)
{
    Stopwatch swra = new Stopwatch();
    swra.Start();
    string NewconnectionString = "myCoonectionString";
    StreamWriter CsvfileWriter = new StreamWriter(@"D:\testfile.csv");
    string sqlselectQuery = "select * from Mytable";
    SqlCommand sqlcmd = new SqlCommand();

    SqlConnection spContentConn = new SqlConnection(NewconnectionString);
    sqlcmd.Connection = spContentConn;
    sqlcmd.CommandTimeout = 0;
    sqlcmd.CommandType = CommandType.Text;
    sqlcmd.CommandText = sqlselectQuery;
    spContentConn.Open();
    using (spContentConn)
    {
        using (SqlDataReader sdr = sqlcmd.ExecuteReader())
        using (CsvfileWriter)
        {
            //For getting the Table Headers
            DataTable Tablecolumns = new DataTable();

            for (int i = 0; i < sdr.FieldCount; i++)
            {
                Tablecolumns.Columns.Add(sdr.GetName(i));
            }
            CsvfileWriter.WriteLine(string.Join(",", Tablecolumns.Columns.Cast<datacolumn>().Select(csvfile => csvfile.ColumnName)));
            //For table headers

            while (sdr.Read())
            //based on your columns
                YourWriter.WriteLine(sdr[0].ToString() + "," + sdr[1].ToString() + "," +   
sdr[2].ToString() + "," + sdr[3].ToString() + "," + sdr[4].ToString() + "," + 
sdr[5].ToString() + "," + sdr[6].ToString() + "," + sdr[7].ToString() + "," + 
sdr[8].ToString() + "," + sdr[9].ToString() + "," + sdr[10].ToString() + "," + 
sdr[11].ToString() + ",");

        }
    }
   swra.Stop();
Console.WriteLine(swra.ElapsedMilliseconds);
} 
```

使用此代码，我们可以使用 datareader 快速将数据库信息导出到 csv 文件。

# visual-studio - Visual Studio 插件跳转到测试类

> ID：12563745
> 
> 赞同：7
> 
> 时间：2012-09-24T11:05:54.240
> 
> 标签：visual-studio, unit-testing, tdd, visual-studio-extensions

我想知道是否有一个插件可以让我直接跳转到当前类的测试（或者如果它不存在则创建它）。

我想这应该基于测试项目被命名为正在测试的项目+“测试”并且测试类被命名为测试者+“测试”的约定。

像这样的功能确实有助于具有许多文件和文件夹的项目，其中滚动解决方案资源管理器以查找相关的测试项目可能非常烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:09:13.217

[NCrunch](http://ncrunch.net)怎么样？该工具将按方法向您显示覆盖了哪些测试以及覆盖了多少测试：

![NCrunch 显示有多少测试覆盖](../Images/5ed6cb05c190158527a6c7f0a06bd0fa.png)

![双击导航到测试](../Images/5becb631f96a952ac6058139770f5d07.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:49:18.440

我确实设法在 visualstudiogallery.com 上找到了一些扩展，但最终为此编写了我自己的插件。它并不完美，但我做了我需要的。

如果其他人愿意，可以在 testlocator.eqa.dk 免费获得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:12:46.053

在 Visual Studio 中，您可以`Shift+F12`在任何类或方法定义上查找所有引用。虽然生成的列表 Studio 不是很方便，但是一个起点。使用 DevExpress CodeRush 或 ReSharper 等工具，您可以按命名空间、项目、文件等进行排序和过滤。

# iphone - 来自 Iphone 应用程序的付款费用

> ID：12563746
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:06:05.440
> 
> 标签：iphone, payment

我正在开发一个允许购买产品和通过信用卡付款的 Iphone 应用程序。我是否必须从应用程序内的每次付款中支付一些费用？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:09:13.337

不，前提是产品不是数字产品（即真正的有形物品）或应用程序中的功能。

接受信用卡支付商品（例如 eBay 和亚马逊应用程序）完全没问题，而无需向 Apple 支付 30% 的费用。

# jdeveloper - 如何更新 EAR 项目中的 java 文件

> ID：12563749
> 
> 赞同：0
> 
> 时间：2012-09-24T11:06:22.643
> 
> 标签：jdeveloper

我正在使用 JDeveloper 10.1。当我导入一个EAR项目时，所有的jsp和js文件都被导入了。但是对于 java 文件，只导入类文件。我有一些java文件。如果我想在 java 文件中进行修改，那么如何在进行更改后构建新的 java 类。基本上我需要知道如何修改现有 EAR 项目中的 java 文件（因为那里只有类文件），如何在更改后创建新的 EAR 以便更新新的类文件。

如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:31:18.147

您不能更改 EAR 中的已编译类。您必须再次构建 EAR，为此您需要 java 源文件。如果您没有它们（并且无法获得它们），那么您就是违法（在世界大部分地区）。

# date - 今天的richfaces日历

> ID：12563750
> 
> 赞同：0
> 
> 时间：2012-09-24T11:06:25.237
> 
> 标签：date, calendar, richfaces

我想知道如何在除默认日历之外的其他日期设置 Richfaces 日历。

我想要这个，因为时区开始发挥作用，如果应该使用另一个时区而不是服务器的时区，它可能是日历中选择的另一个“今天”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:15:56.633

试试 defaultTime 属性

[http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_calendar.html](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_calendar.html)

“defaultTime”属性在两种情况下设置当前日期的默认时间值：

*   如果没有设置时间
*   如果选择了另一个日期并且“resetTimeOnDateSelect”属性的值设置为“true”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T22:54:37.797

另一种方法是从后端管理“今天”。

如果您有一个获取正确时间的支持 bean，您可以将 rich:calendar 值绑定到支持 bean 的 Date 属性。

**支持豆**

```
Class MyBackingBean{
  SomeUtil someUtil;
  Date today;
  @Create
  public void init(){
    today = someUtil.getCurrentTime();
  }
  public Date getToday(){ return today;}
} 
```

**html**

```
<rich:calendar 
    id="todayDate" 
    value="#{myBackingBean.today}"></rich:calendar> 
```

# oracle - 如何在包体中运行过程

> ID：12563752
> 
> 赞同：2
> 
> 时间：2012-09-24T11:06:36.637
> 
> 标签：oracle, package, procedure

我正在使用 oracle 11g 。我正在尝试使用命令在包内运行一个过程

```
execute package.procedure 
```

但我不断收到异常

```
ERROR at line 1:
ORA-06550: line 1, column 12:
PLS-00302: component 'package' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我创建的包和包体如下。我实际上在这里要做的是创建一个包，该包用于在每次执行时创建表。所以我写了下面的脚本。

- - -包裹

```
create or replace package pack1 as
end pack1 ;
/ 
```

------包体

```
create or replace package body pack1 as
procedure proc1
is 
begin
execute immediate 'create table bcd(bc date)';
end ;
procedure proc2
is 
begin
execute immediate 'create table bcde(bc number(12,0)) as select country_id from      countries';
end ;
end pack1;
/ 
```

但是当我跑的时候

```
execute pack1.proc2 ; 
```

它给了我上述例外。

有人可以帮我解决什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:17:43.050

默认情况下，包中的过程和函数是私有的。[要使它们公开，您必须在包规范中声明它们](http://docs.oracle.com/cd/E11882_01/appdev.112/e17126/packages.htm#i2412)：

```
create or replace package pack1 as
procedure proc1;
procedure proc2;
end pack1;
/ 
```

不过，动态创建表听起来不是一个好主意。

# objective-c - AFNetworking 未恢复下载

> ID：12563753
> 
> 赞同：4
> 
> 时间：2012-09-24T11:06:41.273
> 
> 标签：objective-c, ios, afnetworking

我正在使用 AFNetworking 将大文件下载到我的 iPad 应用程序中。

AFHTTPRequestOperation 的一个实例用于下载此文件。以下是供参考的代码 -

```
//request 是下载文件的 NSRequest 对象
AFHTTPRequestOperation *operation = [self HTTPRequestOperationWithRequest:request
                                        成功：^（AFHTTPRequestOperation *操作，id responseObject）{                                                                        

                                        } 失败：^（AFHTTPRequestOperation *操作，NSError *错误）{

                                        }];
//这里的路径变量是下载文件的位置
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path
                                                               附加：是]；
//因为这个类是AFHTTPClient的子类所以操作被添加到请求队列中
[自入队HTTPRequestOperation：操作]；

```

现在这里的问题是，当我尝试使用以下功能暂停和恢复此下载时，pauseDownload 功能可以正常工作，但是恢复下载不能按应有的方式工作，并且似乎下载从头开始，正如我所期望的那样它将从它离开的地方恢复。这里可能是什么问题？

```
-（无效）暂停下载{
    [操作暂停]；
}

-(void)resumeDownload{
   [操作简历​​]；
}

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:37:05.080

花了一段时间后，我想出了如何暂停和恢复下载。

AFNetworking 有[扩展](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-Extensions)，其中之一是[AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)，它主要用于处理大文件的暂停和恢复。所以这里不使用 AFHTTPRequestOperation ，而是使用 AFDownloadRequestOperation 。下面是示例代码

```
//request 是下载文件的 NSRequest 对象，targetPath 是文件下载后的最终位置。不要忘记将 shouldResume 设置为 YES
AFDownloadRequestOperation *operation = [[AFDownloadRequestOperation alloc] initWithRequest:request
                                                                                     目标路径：目标路径
                                                                                   应该恢复：是];
[操作 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //处理完成
    }失败：^（AFHTTPRequestOperation *操作，NSError *错误）{
     //处理失败
 }];
[操作 setProgressiveDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile) {
    //处理进度

}];
//因为这个类是AFHTTPClient的子类所以操作被添加到请求队列中
[自入队HTTPRequestOperation：操作]；

//用于暂停下载
-（无效）暂停下载{
    [操作暂停]；
}
//用于恢复下载
-(void)resumeDownload{
   [操作简历​​]；
}

```

# android - 我怎么知道“onPause()”方法已经被称为方向变化相关？

> ID：12563757
> 
> 赞同：1
> 
> 时间：2012-09-24T11:07:04.193
> 
> 标签：android, android-orientation

我怎么知道“onPause()”方法已经被称为方向变化相关？（用于片段或活动）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:28:10.913

通常，方向更改意味着重新启动活动并遍历整个生命周期。最简单的方法是让 Log 查看它何时被调用。否则，您可以通过覆盖 onConfigurationChanged() 来跳过循环。参考链接[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:33:35.750

您始终可以使用 log 来检查代码流。Log.d 用于调试..转到 logcat 以查看代码流。Log 只是回显 log 语句中写入的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:29:35.603

默认情况下，如果方向发生变化，您的活动将被终止并重新启动。您应该在 中取消注册您的接收器`onPause()`，并确保它们将在您的`onStart()`方法中再次注册。

# mongodb - 在 MongoDB 中加入两个集合

> ID：12563762
> 
> 赞同：2
> 
> 时间：2012-09-24T11:07:23.710
> 
> 标签：mongodb

我是 mongoDB 的初学者。我有两个收藏书和作者。[姓名和著作]分别是常用栏。使用内部联接，我必须发出 Book 和 Author 中的一些列。就像这个 sql 查询：

```
select book.name,book.editions,book.characters,author.name 
from dbo.book book 
inner join dbo.author author on book.name=author.works_written 
```

我需要在 MongoDB 中执行相同的查询。映射/减少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:39:45.833

MongoDB 不支持 JOIN 操作。当您需要此功能时，您必须通过查询这两个集合来自己实现它。

出于这个原因，使用嵌入而不是链接通常是一个很好的策略。

Map/Reduce 作业通常是一项非常昂贵的操作。它只应偶尔用于数据挖掘目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:48:46.957

> 我需要如何使用 mapreduce 函数来做到这一点。

该`db`对象在 MR 中已被弃用很长时间，因此不可能在 MR 中同时获取两个表。

不过还有另一种解决方案：两个 MR。您在第一个集合上运行 MR，首先输出到所需的集合，然后使用第二个 MR 输出到同一个集合，使用`out`类似`reduce`或`merge`“加入”两个集合的选项。

当然这很慢，所以更好的方法是不这样做。至于：

```
select book.name,book.editions,book.characters,author.name 
from dbo.book book 
inner join dbo.author author on book.name=author.works_written 
```

这个查询可以是从图书集合中流式传输一个游标，然后非常快速地固定数据库，您遍历的每本书（可以在 MongoDB 中执行此操作）来获取作者的详细信息。

您还可以从书籍中获取一组作者 ID，然后一次查询所有作者集合，并在客户端对两者进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:40:38.563

mongodb 不是关系数据库——因此这里不可能进行任何类型的连接。连接很难扩展。

mongodb中实现join的常用方式是数据非规范化。在您的情况下，您可以将作者姓名非规范化为书表。那么您的查询将不需要加入。这是架构示例：

```
book
{
  _id,
  name,
  editions,
  characters,
  author_name
} 
```

`author_name`请记住，每次更新作者收藏时，您都需要更新图书收藏。

另一种解决方案——每本书的作者姓名的附加请求，但它的工作速度会慢得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-07T10:03:03.870

尝试这个：-

```
db.book.aggregate([
    {
      $lookup:
        {
          from: "author",
          localField: "name",
          foreignField: "works_written",
          as: "nameWorkData"
        }
   }
]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T04:17:13.163

您可以比较 SQL 和 mongoDB (NoSQL) 的以下代码：

*   SQL 代码：

    ```
     SELECT *, [output array field]
          FROM collection
          WHERE [output array field] IN (SELECT *
                FROM [collection to join]
                WHERE [foreignField]= [collection.localField]); 
    ```

*   mongoDB（NoSQL）：

    ```
     {
        $lookup:
          {
            from: [collection to join],
            localField: [field from the input documents],
            foreignField: [field from the documents of the "from" collection],
            as: [output array field]
          }
     } 
    ```

# android - 优化 Android 布局——性能还是可读性？

> ID：12563768
> 
> 赞同：1
> 
> 时间：2012-09-24T11:07:47.167
> 
> 标签：android, android-layout, optimization, readability

在设计 Android 布局时，经常会遇到一个问题——是否应该牺牲可读性来换取性能？例如，您可以将相同的组件放入多个嵌套布局或一个复杂的 RelativeLayout。我的理解是，只有在嵌套过多（超过 8-10 级），或者这是适配器中的重复元素的情况下，您应该尝试使用 RelativeLayout 来扁平化层次结构。也许我错了，默认情况下你应该更喜欢复杂的RelativeLayouts而不是Frame/Linear/RelativeLayouts的组合，因为视图层次结构中的新级别对于性能和内存使用来说非常重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:31:06.617

我同意这有点哲学。

话虽这么说，考虑到响应式 UI 在 android 应用程序上的重要性以及 XML 布局的膨胀频率，我会在性能方面犯错。

# android - 如何使用 Linux 将自己的 java 源文件构建到 SDK 中

> ID：12563769
> 
> 赞同：-2
> 
> 时间：2012-09-24T11:07:51.337
> 
> 标签：android, linux, sdk

我可以在 Windows 7 上使用 Eclipse Juno 中的 ADT (20.0.3) 使用我自己的类创建一个 jar 文件。这是通过在 Properties -> Android 中选择“Is Library”复选框来完成的窗口，当在 Eclipse 中选择的项目上按 Alt + Enter 时。这“自动”生成一个 .jar 文件）。

我还可以将创建的 jar 文件添加到本地测试服务器，然后将位置包含在 Android SDK 管理器 (20.0.3) -> 工具 -> 管理附加站点 -> 用户定义的站点中，以获取我的 .jar 文件使用 Android SDK 管理器的 Packages 概述列出并安装。

在构建应用程序时，我还可以使用额外添加的 .jar 文件。

到目前为止，一切都很好。一切正常。

但是，这一切都在***Windows 7***上。

我想知道的是如何在***Linux***上使用 SDK 的构建机制来做到这一点。

我想在“供应商”的子目录中添加 Java 源文件。

那么，需要采取哪些措施：

*   将我的文件添加到 SDK 构建机制
*   让 SDK 构建机制在 SDK 构建过程中构建我的 .jar 文件（连同我的 java 文件）（就像 ADT 在 Windows 上所做的那样，使用“Is library”选项）
*   知道输出将存储在哪里

我可以找到很多 Windows 版本的解决方案，但我已经知道（见上文）。但是，在 Linux 上构建 SDK 时，我找不到有关如何执行此操作的信息。

希望有人可以阐明这一点。

最佳 rgds，--吉尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:20:25.157

你能找到的唯一方法是在 Linux 上实际执行与 Windows 相同的步骤。Eclipse 在 Windows/Mac/Linux 上的工作方式与它在 JVM 之上运行的方式相同。所以我没有看到太多的操作系统特异性。

# php - mouseover 透明 div 类显示图像

> ID：12563770
> 
> 赞同：1
> 
> 时间：2012-09-24T11:07:51.537
> 
> 标签：php, javascript, html, css

我在这个问题上停留了很长时间..希望有人可以帮助我，因为我不精通 Javascript。

场景是这样的：

我正在使用 wordpress，在一个页面中，我有一张大图片（800 像素 X 1200 像素），里面有纸杯蛋糕。

我希望达到的效果是这样的；当用户将鼠标悬停在特定的纸杯蛋糕上（带有一层透明 div）时，会出现一个图像（320px x 320px）。

我尝试使用 css :hover，它适用于 safari、chrome 和 firefox。但对于 IE，它不起作用。因此，我正在考虑使用 javascript 来操作 div 类而不是***onmouseover***和***onmouseout***事件

PHP/HTML：

```
<div id="f1"></div> 
```

CSS：

```
#f1{
width: 100px;
height: 50px;
left: 370px;
top: 450px;
position: absolute;
opacity:0;
} 
```

因此，当用户将鼠标悬停在透明 div 上时，我希望出现一个图像（320px x 320px）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:14:08.123

因为您可以为此使用 IE 过滤器。像这样写：

```
#f1{
width: 100px;
height: 50px;
left: 370px;
top: 450px;
position: absolute;
opacity:0;
filter: alpha(opacity=0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:45:21.223

如果您希望图像出现在第二个 div 外部 #f1 div 试试这个

[演示 1](http://jsfiddle.net/afshinprofe/tNRAr/2/)

或者你想将图像显示为 f1 div 的背景图像试试这个

[演示 2](http://jsfiddle.net/afshinprofe/TSxu4/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:56:07.350

**试试这个：为每个链接附加一个缩略图并使其显示：无，然后通过 jQuery .hover() 使其显示和隐藏。**

```
<html>
<head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
  <style>
    .lsr { 
        width: 10px; 
        height: 10px;
        background-color: #000; 
    }

    #lsr {
        display: none;
    } 
}
​
  </style>

</head>
<body>
 <div class="lsr" id="img1"><a href="#"><img src="http://pbskids.org/itsmylife/images/teststress1.gif" alt="img" ></a></div>

<div id="lsr"> 
    <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" id="img1" >
</div>
<script>
   $("div.lsr a").hover(
        function() { $("#lsr").show(); },
        function() { $("#lsr").hide(); }
    );
</script>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:13:27.000

`:hover`在 IE7+ 中受支持，但可能存在其他问题或不支持的问题，例如`opacity`或`hasLayout`问题。

你可以这样做是javascript：

```
var div = document.getElementById('f1');
div.onmouseover = function() {
    div.className += ' hover';
};
div.onmouseout = function() {
    div.className = div.className.replace(/\shover/,'');
} 
```

或 jQuery：

```
$('#f1').hover(function() {
    $(this).addClass('hover');
}, function() {
    $(this).removeClass('hover');
}); 
```

当鼠标悬停时，它将为元素添加一个`hover`类，以便您可以设置它的样式，f.ex：

```
#f1.hover{ background:url(path/to/img.jpg); }; 
```

# wpf - 手动切换标签后在文本框上设置焦点

> ID：12563773
> 
> 赞同：4
> 
> 时间：2012-09-24T11:08:03.120
> 
> 标签：wpf, textbox, focus, tabcontrol

我想要一个按钮，将选项卡控件切换到特定的选项卡项，然后将焦点设置在该选项卡项中的文本框上。

为此，我有一个像这样的 click 事件的事件处理程序

```
private void MyButton_Click(object sender, RoutedEventArgs e)
{
    MyTabControl.SelectedIndex = 0;
    MyTextBox.Focus();
} 
```

这不起作用，选项卡项已更改，但文本框仍然没有焦点。这个怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:19:20.010

在聚焦文本框之前调用 UpdateLayout：

```
 MyTabControl.SelectedIndex = 0;
  UpdateLayout();
  MyTextBox.Focus(); 
```

# matlab - vec(i:1:len) 是什么意思？

> ID：12563775
> 
> 赞同：-2
> 
> 时间：2012-09-24T11:08:10.823
> 
> 标签：matlab, loops

基本上，我需要了解这段代码的作用（“块”是一个向量）：

```
len = length(blocks);
currsum = sum(abs(blocks(i:1:len))); 
```

我知道 sum 和 abs 的作用，它只是最后一部分，我知道它与循环有关，但是，它是否需要向量的特定部分并得到总和，或者，它是否将整个向量相加?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:13:28.887

让我们把它分成几部分：

* * *

```
 i:len 
```

创建一个向量`[i, i+1, i+2,.... len]`。回想一下，在 Matlab 中，运算符`vec(indexes)`选择在索引中找到的向量元素。

```
 blocks(i:len) 
```

取从第 i 个到最后一个的最后 k 个元素。

```
 abs(  blocks(i:len) ) 
```

最后 k 个元素的绝对值。

```
 sum(abs(blocks(i:1:len))); 
```

最后 k 个元素的绝对值之和。

# c++ - 如何打印出文本文件的内容

> ID：12563778
> 
> 赞同：0
> 
> 时间：2012-09-24T11:08:16.580
> 
> 标签：c++, file-io

我有一个文件，我想打印它的内容，但我的功能无法正常工作，谁能帮忙？

这是我的代码：

```
int main()
{
  MenuText text;
  string test = "Champion";
  ofstream output("File.txt");
  text.save(output);
  fstream output ("File.txt");
  text.load("File.txt");//This is an error.
  text.print();

MenuText::MenuText()
{
    mText = "Default";

}
MenuText :: MenuText(string text)
{
mText = text;
}
void MenuText::print()
{
cout<< "Story= " << mText<< endl;
cout<< endl;
}
void MenuText::save(ofstream& outFile)
{
outFile<<   "/         .   \  \____    \\   \\    _ -. "
            //"/    /__        -    \/\_______\\__\\__\ \"
            "__\  /\   __   \     .      \/_______//__//"
            "__/\/__/ \  \   \_\  \       -   ________  "
            "___    ___  ______  \  \_____/     -  /\    "
            "__    \\   -.\    \\   ___\ \/_____/    ."
            "\  \  \__\   \\   \-.      \\   __\_        "
            "-   \ _\_______\\__\  `\___\\_____\           "
            ".     \/_______//__/    /___//_____/ "<< mText<< endl;
cout<< endl;
outFile<< endl;
}
void MenuText::load(ifstream& inFile)
{
string garbage;
inFile>> garbage >> mText;
}
The errors are:
Error   1   error C2371: 'output' : redefinition; different basic types c:\users\conor\documents\college\c++ programming\marooned\marooned\mainapp.cpp  15  1   Marooned
Error   2   error C2664: 'MenuText::load' : cannot convert parameter 1 from 'const char [9]' to 'std::ifstream &'   c:\users\conor\documents\college\c++ programming\marooned\marooned\mainapp.cpp  16  1   Marooned 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:11:58.153

`MenuText::load()`将 a`ifstream&`作为其唯一参数，而不是 a `const char*`。创建 an 的实例[`ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)并将其传递给`MenuText::load()`：

```
std::ifstream input("File.txt");
if (input.is_open())
{
    text.load(input);
} 
```

此外，确保所有写入数据[`close()`](http://en.cppreference.com/w/cpp/io/basic_ofstream/close)的`output`流在创建`ifstream`.

`MenuText::load()`不会将文件的全部内容读入内存。它将文件中遇到的第二个字符串存储到`mText`将`operator>>`在第一个空白字符处停止读取。

# delphi - 如果按不同的索引排序，Delphi 7 TClientDataSet 聚合不起作用

> ID：12563781
> 
> 赞同：3
> 
> 时间：2012-09-24T11:08:34.050
> 
> 标签：delphi, delphi-7, tclientdataset

我有一个包含三个聚合字段的 ClientDataset。除其他外，聚合计算每个客户的总订购量，因此它们使用客户 ID 的索引。

我将此 ClientDataset 用于报告 (FastReports)，它显示所有客户及其订单，按客户分组并按订单日期排序。

因此，我在 ClientDataSet 上有两个索引，一个在 CustomerId 上（用于分组和聚合字段），一个在 CustomerId+OrderDate 上（用于排序）。

现在，当我为客户端数据集选择排序索引时，聚合不再起作用并在我的报告中返回空值。它们仅在我为 ClientDataset 本身选择分组索引时才有效，即使每个单独的聚合已经使用了正确的索引。

我非常希望这样做，因为我要么必须编写大量额外的代码，要么调整我的报告（我想在每个组的顶部显示总数，因此 FR SUM 表达式将无法正常工作任何一个）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:15:21.413

我想我想通了。我根本不需要单独的分组索引。我可以只使用排序索引并将索引和聚合字段的分组级别设置为 1。

# java - 使用 HQL 编辑器查询时出现休眠错误

> ID：12563782
> 
> 赞同：1
> 
> 时间：2012-09-24T11:08:35.117
> 
> 标签：java, mysql, hibernate

大家好，我正在尝试使用 HQL 编辑器从我的数据库中检索数据进行查询。我按照示例“在 Java Swing 应用程序中使用 Hibernate”中的步骤进行操作。我的配置文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mobilecarriers?zeroDateTimeBehavior=convertToNull</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">######</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
    <property name="hibernate.c3p0.min_size">1</property>
    <property name="hibernate.c3p0.max_size">100</property>
    <property name="hibernate.c3p0.timeout">0</property>
    <property name="hibernate.c3p0.max_statements">0</property>
    <property name="hibernate.c3p0.idle_test_period">0</property>
    <mapping resource="mobilecarriers/entity/National.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

映射：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 23 Sep 2012 11:26:47 PM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="mobilecarriers.entity.National" table="national" catalog="mobilecarriers">
        <id name="id" type="java.lang.Short">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="dominantSecondLanguage" type="string">
            <column name="DominantSecondLanguage" length="25" />
        </property>
    </class>
</hibernate-mapping> 
```

使用这个：`from national`或者`from National`我得到以下错误：

> org.hibernate.exception.SQLGrammarException: 无法在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) 在 org.hibernate.SQLStateConverter.convert(SQLStateConverter.java:67) 执行查询.loader.Loader.doList(Loader.java:2223) at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) at org.hibernate.loader.Loader.list(Loader.java:2099) at org. hibernate.hql.classic.QueryTranslatorImpl.list(QueryTranslatorImpl.java:912) 在 org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172) 在 org.hibernate.impl.SessionImpl.list(SessionImpl.java: 1121) at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79) 原因：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java 的 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 的第 1 行的“from limit 100”附近使用正确的语法： 57) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:525) 在 com.mysql.jdbc.Util.handleNewInstance(Util.java:411 ) 在 com.mysql.jdbc.Util.getInstance(Util.java:386) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java: 3609) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541) 在 com.mysql.jdbc.MysqlIO。在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163) 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624) 在 com.mysql.jdbc.PreparedStatement 的 sendCommand(MysqlIO.java:2002) .executeInternal(PreparedStatement.java:2127) 在 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293) 在 org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186) 在 org.hibernate.loader。 Loader.getResultSet(Loader.java:1787) at org.hibernate.loader.Loader.doQuery(Loader.java:674) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) at org.hibernate.loader .Loader.doList(Loader.java:2220) ... 还有 8 个2624) 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127) 在 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293) 在 org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java :186) 在 org.hibernate.loader.Loader.getResultSet(Loader.java:1787) 在 org.hibernate.loader.Loader.doQuery(Loader.java:674) 在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader. java:236) 在 org.hibernate.loader.Loader.doList(Loader.java:2220) ... 还有 8 个2624) 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127) 在 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293) 在 org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java :186) 在 org.hibernate.loader.Loader.getResultSet(Loader.java:1787) 在 org.hibernate.loader.Loader.doQuery(Loader.java:674) 在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader. java:236) 在 org.hibernate.loader.Loader.doList(Loader.java:2220) ... 还有 8 个getResultSet(Loader.java:1787) at org.hibernate.loader.Loader.doQuery(Loader.java:674) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) at org.hibernate.loader.Loader .doList(Loader.java:2220) ... 还有 8 个getResultSet(Loader.java:1787) at org.hibernate.loader.Loader.doQuery(Loader.java:674) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) at org.hibernate.loader.Loader .doList(Loader.java:2220) ... 还有 8 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:00:43.900

Use

```
from mobilecarriers.entity.National 
```

# android - 如何在 Android 的 SD 卡上创建动态目录结构？

> ID：12563786
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:08:51.277
> 
> 标签：android, file, directory, creation

我想在我的 SDCard 上使用包含文件完整路径的给定路径自动创建目录。路径是从服务器动态来的，所以我不知道目录的名称是什么，目录结构的深度是多少。

例如 dir1/dir2/dir3/file1.txt

我正在使用以下代码

```
createDirectoryIfNotPresent(Environment.getExternalStorageDirectory() + "/"+ mypaths.getNextPath()); 
```

其中的定义

```
createDirectoryIfNotPresent 
```

是

```
private void createDirectoryIfNotPresent(String fileName) {
    File f = new File(fileName);

    if(!f.exists())
        f.mkdirs();
} 
```

但上面的代码也为 file1.txt 创建了目录。我该如何避免这种情况？我只想为目录名而不是文件名创建目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:14:45.143

您可以做一些简单的事情，例如检查文件名是否包含 .txt 或其他扩展名

```
if(f.toString.contains(".txt")) {
f.createNewFile();
} else {
f.mkdirs();
} 
```

如果扩展名不断变化，您甚至可以求助于使用正则表达式。

# wpf - 命令和命令参数设计

> ID：12563788
> 
> 赞同：0
> 
> 时间：2012-09-24T11:09:03.790
> 
> 标签：wpf, mvvm, command, commandparameter

假设您有一个控制媒体播放器的视图模型。它必须提供标准控制功能，如启动、停止、暂停和恢复。

我正在考虑在视图模型中设计它的两种方法

第一种方式：每个动作都有自己的命令。- StartCommand - StopCommand - PauseCommand - ResumeCommand

视图中的每个按钮都将绑定到它的相关命令。

第二种方式：具有不同命令参数的单个命令。PerformActionCommand 和一个看起来像的枚举

```
enum ActionEnum
{
  start, 
  stop,
  pause,
  resume
} 
```

您认为哪种方式更可取，原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:19:42.300

在这种情况下，使用单独的命令会更好。这些命令不是很相似，所以如果你有一个命令处理程序，你将不得不在里面使用一个大的 switch 语句并且可能调用不同的方法。

另一个原因是，使用不同的命令，您可以轻松地在启用或不启用这些命令时拥有不同的条件 - 例如，仅在播放器暂停时才启用 Resume。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:45:56.747

除了 Jogy 所写的内容之外，我还会使用单独的命令。通过这种方式，您还可以使用内置的[wpf 媒体命令](http://msdn.microsoft.com/en-us/library/system.windows.input.mediacommands%28v=vs.100%29.aspx)。

这有一些潜在的优势：

*   您不需要为每个命令编写实现[ICommand](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand%28v=vs.100%29.aspx)的类，因为它已经在 WPF 中

*   每个媒体命令实际上是一个[RoutedUICommand](http://msdn.microsoft.com/en-us/library/system.windows.input.routeduicommand%28v=vs.100%29.aspx)，这意味着它具有可以用作按钮内容的文本属性。

*   您可以通过一些命令利用已经内置的输入手势。

# sharepoint - SharePoint 2010 内容编辑器 Web 部件编辑生成的代码

> ID：12563789
> 
> 赞同：2
> 
> 时间：2012-09-24T11:09:04.333
> 
> 标签：sharepoint, cewp

为什么 SharePoint 如此糟糕？

首先，内容编辑器 Web 部件会给您一个很好的消息“警告：您输入的 HTML 源代码可能已被修改。” 当您通过“编辑 HTML 源”插入一些 HTML 时。

更糟糕的是，您正在编辑的是生成的 HTML，而不是源 HTML。

假设您有一些被链接到母版页中的 jQuery 修改并变成滑块的标记。jQuery 插件通常会添加类，在原始标记周围添加额外的 HTML 以实现所需的功能。

使用 SharePoint 2010 页面编辑器，您会看到在 JavaScript 修改后的标记。这是什么愚蠢的做法？？

我可以将源 HTML 放在单独的文件中，然后从每个内容编辑器 webpart 简单地链接到它们，但这使得维护页面变得很麻烦。

有没有我在某处缺少的设置？我假设有一个类似于以下的设置

```
SPActLikeARetard = True 
```

如何将其更改为 False？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:45:06.180

另一个选项是 HTML 表单 Web 部件（在表单类别中）。这可用于连接到其他 Web 部件，但更简单地说，它可用于直接在 Web 部件中编辑 JavaScript。内容编辑器 Web 部件的规则似乎不适用于 HTML 表单 Web 部件，因此它具有更大的灵活性。

不是最好的，但会起作用。

最好有一个标记编辑器 Web 部件，它除了控制由 Web 部件输出的标记外，还没有交互式设计。

# c# - SQL 服务器日期时间和 C# 日期时间

> ID：12563795
> 
> 赞同：5
> 
> 时间：2012-09-24T11:09:30.227
> 
> 标签：c#, sql

在我的 SQL 服务器上，我有一个非常简单的测试表，它只包含三行： `ID`和`Date`. `Hours`( `varchar`, `DateTime`, `varchar`)。

SQL 中的 DateTime 格式如下`yyyy-MM-dd HH:mm:ss.fff`：

C# 中的 DateTime 格式如下：`yyyy-dd-MM HH:mm:ss.fff`.

我使用以下代码获取 C# DateTime 格式：

```
 string ddd = "2012-10-10 00:00:00.000";
 dt1 = DateTime.ParseExact(ddd, "yyyy-MM-dd HH:mm:ss.fff", null); 
```

如果我尝试进入`yyyy-dd-MM`我会得到一个错误：

> 日历不支持由字符串表示的 DateTime。

在我的 C# 应用程序中，我试图找出不同日期之间的总小时数。我有点让它工作，但它只适用于 01 到 12 之间的日期。

所以从`2012-01-10`到`2012-10-10`（十天）会给我正确的数据库总小时数。

但是当我写信`2012-01-10`给`2012-14-10`（十四天）时，我收到一个错误：

> 将 char 数据类型转换为 datetime 数据类型导致超出范围"

先感谢您。

PS。你能推荐一种更简单的约会方式吗？

mySQL 查询

```
string CommandText = "SELECT * FROM date_test WHERE id = '4' AND date BETWEEN '" + dt1 + "' AND '" + dt2 + "'"; 
```

我已经找到了问题，但没有找到解决方案。

问题是SQL数据库看格式，想要yyyy-MM-dd，但是C#只能发送yyyy-dd-MM。

为什么不能`ParseExact()`做 yyyy-MM-dd？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:26:55.573

您正在为[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)准备一个完美的基础。
也看[这里](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。有一个参数化查询的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:24:28.510

> 日历不支持由字符串表示的 DateTime。

出现此错误是因为您的 C# 应用程序将日期`2012-14-10`视为`14th`月、`10th`日和`2012th year`. 找到日期和年份，但没有找到月份。此外，不要尝试更改 C# 应用程序查看日期的方式，这是基于系统文化的。

您对如何*定义*`DateTime`对象以及如何*显示*对象感到困惑。

由于您将日期存储为`DateTime`SQL，因此我没有充分的理由相信您需要进行**任何**类型的解析。考虑下面的代码示例。

```
var dataTable = new DataTable();
var dataAdapter = new SqlDataAdapter("SELECT * FROM YourTable", "{connection string}");

dataAdapter.Fill(dataTable);

var yourDate = dataTable.Rows[0]["Date"]; <=== the type will be DateTime, simple. 
```

## 添加参数

让我们以您的示例查询为例：

> "SELECT * FROM date_test WHERE id = '4' AND date BETWEEN '" + dt1 + "' AND '" + dt2 + "'";

让我们稍微修正一下，考虑下面的例子：

```
var dataTable = new DataTable();
var dataAdapter = new SqlDataAdapter("SELECT * FROM date_test WHERE id = @ID AND date BETWEEN @StartDate AND @EndDate", "{connection string}");

dataAdapter.SelectCommand.Parameters.AddWithValue("@ID", "4");
dataAdapter.SelectCommand.Parameters.AddWithValue("@StartDate", new DateTime(2012, 10, 1));
dataAdapter.SelectCommand.Parameters.AddWithValue("@EndDate", new DateTime(2012, 10, 14));

dataAdapter.Fill(dataTable);

var yourDate = dataTable.Rows[0]["Date"]; <=== the type will be DateTime, simple. 
```

# objective-c - 以 iPad iOS 6 为中心呈现视图控制器时出错

> ID：12563798
> 
> 赞同：6
> 
> 时间：2012-09-24T11:09:43.223
> 
> 标签：objective-c, ios, ios5, uinavigationcontroller, ios6

在 iOS 5 中它可以正常运行：

```
PinRequiredViewController *pinView = [[PinRequiredViewController alloc]initWithNibName:@"PinRequiredView" bundle:nil];

            UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:pinView];

            // show the navigation controller modally
            navController.modalPresentationStyle = UIModalPresentationFormSheet;
            navController.modalInPopover = NO;
            navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

            [self presentViewController:navController animated:YES completion:nil];

            navController.view.superview.frame = CGRectMake(0, 0, 250, 250);

            navController.view.superview.center = self.view.window.center; 
```

但在 iOS6 中无法正常工作，视图不会在屏幕中保持居中，无论是纵向还是横向。有什么解决办法吗？

谢谢！！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T12:37:09.410

我认为如果您删除`UIModalTransitionStyleFlipHorizontal`过渡样式并改用其他过渡样式之一，它会起作用。

似乎这是一个错误`UIModalTransitionStyleFlipHorizontal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T11:10:23.113

使用完成：在您的 presentViewController 中：

```
[self presentViewController:navController animated:YES completion:^{
        navController.view.superview.bounds = CGRectMake(0, 0, 250, 250);}]; 
```

这将使它与`UIModalTransitionStyleFlipHorizontal`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:35:18.700

问题是您可以将超级视图的框架设置为您想要的任何内容，但不会更改原点。这就是为什么它不保持居中的原因。

看起来Apple在iOS6中故意限制了这一点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T11:45:32.207

在我对**UIModalTransitionStyleFlipHorizo​​ntal**的理解中，唯一的出路是首先呈现没有动画的视图，设置中心点，然后在下一行将其解散，然后再次使用动画显示它：是的。比如下面......

```
[self presentViewController:navController animated:NO completion:nil];

CGPoint centerPoint = CGPointMake([[UIScreen mainScreen] bounds].size.width/2, [[UIScreen mainScreen] bounds].size.height/2);
navController.view.superview.center = centerPoint;
[navController dismissModalViewControllerAnimated:NO];

navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:navController animated:YES completion:nil]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T12:32:48.073

我成功地完成了以下操作：

```
aboutViewController.modalPresentationStyle = UIModalPresentationFormSheet;
aboutViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

CGRect aboutSheetFrame = aboutViewController.view.frame;
[self presentViewController:aboutViewController animated:YES completion:^{
        aboutViewController.view.superview.bounds = aboutSheetFrame;
        }];
aboutViewController.view.superview.bounds = aboutSheetFrame; 
```

`UIModalTransitionStyleFlipHorizontal`在 ios 6.1 beta 2 上 使用过渡仍然存在问题。`aboutSheetFrame`是为了避免大小硬编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T14:36:06.180

只需在 viewDidAppear 而不是 viewDidLoad 中执行。你已经排序了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-23T15:08:27.710

对于 iOS 7 试试这个：

```
[self.navigationController presentViewController:navigationController animated:YES completion:^{
    //Make the modal bigger than normal
    navigationController.view.superview.bounds = CGRectMake(0, 0, 700, 650);
}]; 
```

动画看起来很难看，所以我建议添加一个动画来改进它：

```
[self.navigationController presentViewController:navigationController animated:YES completion:^{
    [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        //Make the modal bigger than normal
        navigationController.view.superview.bounds = CGRectMake(0, 0, 700, 650);
    } completion:^(BOOL finished) {
    }];
}]; 
```

还要记住，您需要在 viewDidAppear 中设置 navigationControllers 视图的框架，以使内容的大小正确。

# xcode - 框架中的字符串表

> ID：12563803
> 
> 赞同：0
> 
> 时间：2012-09-24T11:10:25.763
> 
> 标签：xcode, cocoa, frameworks, localization

我正在开发一个可可库，它保留自己的字符串表以进行本地化。

例如：返回 NSLocalizedStringFromTable(m_errID, @"ResultMessages", nil );

我将此框架添加到一个可可应用程序项目中。当我调用 Api（使用上面的代码）时，它不起作用。当我将此字符串表单独添加到应用程序项目中时，它起作用了。

请帮我一个解决方案，以便框架Apis使用框架中包含的String表。

问候比诺伊克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:18:56.610

`NSLocalizedString`和朋友在里面找字符串表`[NSBundle mainBundle]`。如果您需要在不同的包中进行字符串查找，例如`[NSBundle bundleForClass:[MyFrameworkClass class]]`，那么您需要使用也需要`NSBundle`参数的变体之一，例如[`NSLocalizedStringFromTableInBundle`](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSLocalizedStringFromTableInBundle).

# android - 图像拖动时标记正在移动（平移和移动）

> ID：12563805
> 
> 赞同：0
> 
> 时间：2012-09-24T11:10:35.317
> 
> 标签：android, imageview, android-canvas

我有一个使用 SeekBar 进行缩放的自定义 imageView。在该 imageView 中，我正在标记图像的一部分，但是当我移动图像时，标记不随图像移动，它保持不变。所以请帮助我，如何在选定的部分做那个标记。

以下代码我用来缩放：

```
public class ImageZoomView extends View implements Observer {

    /** Paint object used when drawing bitmap. */
    private final Paint mPaint = new Paint(Paint.FILTER_BITMAP_FLAG);

    /** Rectangle used (and re-used) for cropping source image. */
    private final Rect mRectSrc = new Rect();

    /** Rectangle used (and re-used) for specifying drawing area on canvas. */
    private final Rect mRectDst = new Rect();

    /** The bitmap that we're zooming in, and drawing on the screen. */
    private Bitmap mBitmap;
    private Bitmap mBitmap2;

    private ShapeDrawable one;
    private ShapeDrawable two;

    /** Pre-calculated aspect quotient. */
    private float mAspectQuotient;

    /** State of the zoom. */
    private ZoomState mState;

    // Public methods

    /**
     * Constructor
     */
    public ImageZoomView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * Set image bitmap
     *
     * @param bitmap
     *            The bitmap to view and zoom into
     */
    public void setImage(Bitmap bitmap) {
        mBitmap = bitmap;

        calculateAspectQuotient();

        invalidate();
    }

    /**
     * Set image bitmap
     *
     * @param bitmap
     *            The bitmap to view and zoom into
     */
    public void setImage2(Bitmap bitmap2) {
        mBitmap2 = bitmap2;

        calculateAspectQuotient();

        invalidate();
    }

    /**
     * Set object holding the zoom state that should be used
     *
     * @param state
     *            The zoom state
     */
    public void setZoomState(ZoomState state) {
        if (mState != null) {
            mState.deleteObserver(this);
        }

        mState = state;
        mState.addObserver(this);

        invalidate();
    }

    // Private methods

    private void calculateAspectQuotient() {
        if (mBitmap != null) {
            mAspectQuotient = (((float) mBitmap.getWidth()) / mBitmap.getHeight()) / (((float) getWidth()) / getHeight());
            Log.i("Aspect",""+mAspectQuotient);
        }
    }

    // Superclass overrides

    @Override
    protected void onDraw(Canvas canvas) {
        if (mBitmap != null && mState != null) {
            final int viewWidth = getWidth();
            final int viewHeight = getHeight();
            final int bitmapWidth = mBitmap.getWidth();
            final int bitmapHeight = mBitmap.getHeight();

            final float panX = mState.getPanX();
            final float panY = mState.getPanY();
            final float zoomX = mState.getZoomX(mAspectQuotient*0.5f) * viewWidth / bitmapWidth;
            final float zoomY = mState.getZoomY(mAspectQuotient*0.5f) * viewHeight / bitmapHeight;

            Log.i("onDraw", "onDraw" + SimpleSeekBarListener.f);
            // Setup source and destination rectangles
            mRectSrc.left = (int) (panX * bitmapWidth - viewWidth / (zoomX * 2));
            mRectSrc.top = (int) (panY * bitmapHeight - viewHeight / (zoomY * 2));
            mRectSrc.right = (int) (mRectSrc.left + viewWidth / zoomX);
            mRectSrc.bottom = (int) (mRectSrc.top + viewHeight / zoomY);
            mRectDst.left = getLeft();
            mRectDst.top = getTop();
            mRectDst.right = getRight();
            mRectDst.bottom = getBottom();

            // Adjust source rectangle so that it fits within the source image.
            if (mRectSrc.left < 0) {
                mRectDst.left += -mRectSrc.left * zoomX;
                mRectSrc.left = 0;
            }
            if (mRectSrc.right > bitmapWidth) {
                mRectDst.right -= (mRectSrc.right - bitmapWidth) * zoomX;
                mRectSrc.right = bitmapWidth;
            }
            if (mRectSrc.top < 0) {
                mRectDst.top += -mRectSrc.top * zoomY;
                mRectSrc.top = 0;
            }
            if (mRectSrc.bottom > bitmapHeight) {
                mRectDst.bottom -= (mRectSrc.bottom - bitmapHeight) * zoomY;
                mRectSrc.bottom = bitmapHeight;
            }
            // int h1= mBitmap.getHeight();
            // Log.d("Height Befor",""+h1);
            canvas.drawBitmap(mBitmap, mRectSrc, mRectDst, mPaint);

        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        int left1 = left;
        calculateAspectQuotient();
    }

    // implements Observer
    public void update(Observable observable, Object data) {
        invalidate();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:41:28.743

我找到了这个解决方案，你可以合并图像，所以试试这个方法：

```
private Bitmap annotateTheImage(Bitmap thisBitmap)    { 

    Bitmap constructThisImage = Bitmap.createBitmap(thisBitmap.getWidth(),thisBitmap.getHeight(),Bitmap.Config.ARGB_8888); 
    Canvas canvas = new Canvas(constructThisImage); 

    canvas.drawBitmap(thisBitmap, 0, 0, null);

    for (MyAnnotations point : annotationsPoints) {
        canvas.drawBitmap(point.getBitmap(), point.x, point.y, null);
    }

    return constructThisImage;
} 
```

在你的画布调用中是这样的：

```
canvas.drawBitmap(annotateTheImage(mBitmap), mRectSrc, mRectDst, mPaint); 
```

mBitmap 是自定义 imageView 中的原始图像。

我希望这对你有帮助 =)

# c - 用于反向字符串的高效且可移植的 strcmp

> ID：12563807
> 
> 赞同：2
> 
> 时间：2012-09-24T11:10:39.160
> 
> 标签：c, performance, strcmp

strcmp，至少使用 g++，对许多架构进行了许多优化。在我的电脑 Core2Duo E8400 中，strcmp 比使用 straigforward 实现快两倍。

我的问题是它是否存在一些提供比较两个“反向字符串”的函数的库。反向字符串`char *s1`开始`s1`并结束于某个`s1-n`这样的`s1-n == '\0'`（where`n >= 0`和 for all `0 <= n' < n, s1-n' != '\0'`）。

当然，要求是这个函数必须像strcmp一样高效和便携。

编辑：我只需要知道两个字符串是否相等（所以我不需要知道哪个更大。那么 strcmp 的相同优化原则上适用于反向字符串）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:21:43.933

据我所知，针对特定架构的 strcmp 的大多数优化都使用了将多个字节一起比较的技巧，例如转换为带有对齐指针的 long 等。这类优化不可能与比较字符串的反转一起工作，即反转不会形成相同的时间，例如 long 并且再次反转它以生成相同的数字会导致效率损失。所以在我看来答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:47:10.063

如果我有你的问题，一个反向`strcmp`，我会写它。出于几个原因，不要担心速度。

首先，具有`strcmp`重大“瓶颈”的程序很少见。

其次，`strcmp`在第一个不相等的字符处停止，因此除非字符串很长且几乎相等，否则平均可能比较很少的字符。任何花费大部分时间比较相等或几乎相等的字符串的程序都在乞求一些性能调整。

# eclipse - 从更新站点构建功能？

> ID：12563809
> 
> 赞同：2
> 
> 时间：2012-09-24T11:10:40.463
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

当我构建自己的功能时，我只能包含我在当前 Eclipse 安装中已经安装的功能和插件。有没有办法从更新站点添加功能/插件？

或者只是指向我桌面上的一个 jar 文件并说应该包含它？

这导致了一个问题，我想包含一个插件版本 1.0，但是我的系统已经加载了同一个插件的更高版本。所以当我尝试添加插件时，我只能看到最新版本，因为这是我的系统加载的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:50:33.073

您可以在以下位置编辑您的目标平台`Preferences>Plug-in Development>Target Platform`

![目标平台偏好页面](../Images/48041ac5be4fa83d63a15c226603fb11.png)

您可以根据当前运行的实例创建一个新的目标平台，然后包含额外的更新站点或本地目录以引入其他插件。

使用 PDE 构建时，您使用`p2.mirror`和`p2.repo2Runnable`创建相同类型的目标平台。

# c# - 如何在回发点获取元素的值以在 Page_Load 方法中使用？

> ID：12563811
> 
> 赞同：0
> 
> 时间：2012-09-24T11:10:41.243
> 
> 标签：c#, asp.net, web-services

我正在编写一个 ASP.NET 表单，它使用自定义 Web 服务来填充基于值的表（这方面的细节并不重要）。

页面上有两个 ASP.NET 日历控件，我想要做的是利用这些控件的 AutoPostback 行为在每次`SelectedDate`其中一个更改时调用一个新的 Web 服务，使用它的值作为输入范围。

`Page_Load`目前我在（在一个语句中）设置控件的值`if (!Page.IsPostBack){}`，并且第一个 Web 服务调用包括这两个值。如果这些日历中的一个更新了，我希望进行一个新的 Web 服务调用，并将日历中的**Submitted 值**作为参数，目前我无法获得包含除初始值之外的任何内容的请求，该初始值设置为第一个页面加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:15:33.240

您是否尝试过将调用 Web 服务的代码放在日历控件的 on_changed 事件中？

# php - 使用 php 通过 javascript 传递参数

> ID：12563813
> 
> 赞同：0
> 
> 时间：2012-09-24T11:10:45.470
> 
> 标签：php, javascript, mysql

我必须使用javascript函数显示重定向页面，增量为1。但是当我尝试这个时，我得到了 NaN Error 。谁能帮我解决问题。我在下面附上了我的来源。像这个 quiz.php?qusId=NaN。

```
 <script type="text/javascript">
        function handler(var1,quizId) {
            alert(var1);
            var id = parseInt(quizId);
            window.location = "quiz.php?qusId="+parseInt(quid(id));
        }
        function quid(quzId){
            if(quzId == 1){
                return 1;
            }else{
                return quzId++;
            }
        }
    </script>
</head>
<body>
    <?php 
        $qusId=$_GET['qusId'];
        ?>
        <form action="test.php" method="POST">
            <?php
                $result = select("SELECT * FROM questions WHERE question_id='$qusId'");
                //$row = mysql_fetch_array($result);
                $i=$_GET['qusId'];
                while($row = mysql_fetch_array($result))
                {
                    ?>
                        <table width="581" height="299" border="1">
                            <tr>
                                <td>Union Assurance Questionnaire</td>
                            </tr>
                            <tr>
                                <td>
                                    <?php 
                                        echo $i.'.' .$row['questions']; 
                                        $i++;
                                    ?>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <?php 
                                        $qId=$row['question_id'];
                                        $result1=select("SELECT * FROM answers WHERE questionId='$qId' ORDER BY RAND()");
                                        while($row1=mysql_fetch_array($result1)){
                                            ?>
                                                <input type="radio" name="answers" value="<?php echo $row1['answers'];?>"  onclick="handler('<?php echo $row1["feedback"]; ?>,<?php echo $qusId;?>')" /><?php echo $row1['answers']; ?><br/>
                                            <?php 
                                        } 
                                    ?>
                                    &nbsp;
                                </td>
                            </tr>
                            <tr>
                                <td>&nbsp;</td>
                            </tr>
                        </table>
                    <?php
                }
            ?>
        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:22:52.033

在您的点击处理程序中，您有

```
handler('<?php echo $row1["feedback"]; ?>,<?php echo $qusId;?>') 
```

您将单引号放在错误的位置 - 它作为单个参数传递到您的“处理程序”函数中。请尝试：

```
handler('<?php echo $row1["feedback"]; ?>',<?php echo $qusId;?>) 
```

# javascript - 非字符串变量可以进入 window.onerror 事件的处理程序吗？

> ID：12563814
> 
> 赞同：3
> 
> 时间：2012-09-24T11:10:51.290
> 
> 标签：javascript, android, html, android-webview

```
window.onerror = function() {
    log arguments.m || arguments[0];
} 
```

我收到了一个“[对象事件]”的日志。谁能告诉我为什么会有一个事件对象发送给处理程序？以及我们如何重现或修复它？

并且它单独出现在 android 设备的 web 控件上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:14:24.393

您将错误事件对象作为函数的第一个参数。事件对象包含有关错误的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:15:34.143

`arguments`不是由你如何定义函数决定的，而是由如何调用它决定的。`window.onerror`调用时，将作为`event`第一个参数传递给它。（对于非 IE，在 IE 中，事件是全局可访问的）。

例子：

```
var foo = function() {
  console.log(arguments[0], arguments[1]);
}

foo(1,2);
// will log 1 and 2 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T02:50:52.330

这似乎只是旧 Android 浏览器中的一个错误。见[https://github.com/getsentry/raven-js/issues/360](https://github.com/getsentry/raven-js/issues/360)

# php - 如何使用 php 在 mysql 中存储敏感的用户数据

> ID：12563824
> 
> 赞同：1
> 
> 时间：2012-09-24T11:11:25.190
> 
> 标签：php, mysql, encryption

我想将敏感的用户数据（如名称和地址）存储在 mysql 数据库中。

**我的主要问题是如何搜索包含加密数据的数据库。**

如果有人偷了电脑，那就不好了，如果数据以纯文本形式存储，所以我想用一个密钥加密它，这个密钥存储在 php 文件中。php 文件使用 ioncube 编码，因此 php 代码中的密钥（非常）安全。

另一方面，我还希望能够从 Web 前端查询应用程序以获取用户名和地址。

我的第一个想法是在存储数据之前加密数据，在我的搜索页面中，我必须读取整个用户数据库并完全解密，这样我就可以使用 php.ini 搜索结果。

但对于大型用户数据库，这将非常占用内存。

* * *

附加信息：

我已经加密了密码，所以我不需要解决方案。

我需要 php 和 mysql 的解决方案，因为我无法更改服务器配置（磁盘加密等）。服务器是旧的 ubuntu 9 安装，非常不安全，但无法更改，原因我不会在这里解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:53:25.750

您可以加密数据库行的每个敏感字段，但您需要确保密钥安全。如果您担心整个服务器被盗，那么您不能将解密密钥存储在文件系统上，因为它会与机器一起被盗。

您可以使用根据用户密码生成的密钥对每个用户进行加密。由于您（我假设）仅存储密钥的哈希值（使用 Bcrypt），因此攻击者很难检索用户的密码。 **但是**，这意味着*只有用户*可以查看他的数据；管理员帐户将无法解密其他用户的敏感数据。这对你来说很可能会破坏交易。

如果用户之外的其他人需要访问数据，那么您必须在整个应用程序中全局使用相同的加密密钥。如果在配置文件中没有此密钥，您唯一的选择是尝试将密钥存储在内存中（这样您就必须在系统可用之前对其进行初始化）。这不足以保证密钥没有写入磁盘（想想交换文件等），但在冷启动后更接近于保护数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:14:51.103

很简单，将您的服务器存储在锁和钥匙（或生物识别安全）后面。

并散列您的密码。

选项 2 使用[加密文件系统](http://en.wikipedia.org/wiki/Encrypting_File_System)。

# android - Android NDK -stdio.h：未找到 sys/cdefs.h

> ID：12563826
> 
> 赞同：2
> 
> 时间：2012-09-24T11:11:29.223
> 
> 标签：android, android-ndk

我在 android 中构建了一个示例本机应用程序，当我使用 ndk -bild 编译时出现链接问题。我收到以下错误

```
 arm-linux-androideabi-gcc -c -O2 -w -ansi -D_POSIX_SOURCE -I. -I../bozorth/include -   I./include/ "-D __MSYS__" "-D__NBISLE__"  src/BiomServerComponent.c -o src/BiomServerComponent.o
    In file included from src/BiomServerComponent.c:1:0:
    f:\android-ndk-r8b\toolchains\arm-linux-androideabi-4.6\prebuilt\windows\bin\../lib/gcc/arm-linux-androideabi/4.6.x-google/include-fixed/stdio.h:50:23: fatal error: sys/cdefs.h: No such file or directory
    compilation terminated.
    Makefile:25: recipe for target `src/BiomServerComponent.o' failed 
```

我没有找到 sys/cdefs.h 或 sys/_types.h，但我在以下路径中找到了 stdio.h

```
F:\android-ndk-r8b\platforms\android-9\arch-arm\usr\include 
```

任何人都知道，如何链接这个标准头文件，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:21:23.317

从表面上看，您的澄清似乎是您正在尝试#include NDK 不支持的头文件；请记住，NDK 不能 100% 覆盖您通常期望在编译器中找到的内容。

如果您直接包含这些文件，则可能应该包含`<sys/types.h>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T05:18:03.727

我找到了答案。确保正确设置*--sysroot*标志。否则，ndk在找不到目录后会默认到目录*toolchains\arm-linux-androideabi-4.6\prebuilt\windows\lib\gcc\arm-linux-androideabi\4.6.x-google\include-fixed*目录*平台\android-9\arch-arm\usr\include*。我有同样的问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-24T13:21:33.830

编辑重新：最新的问题修订：

`toolchains\arm-linux-androideabi-4.6\prebuilt\windows\lib\gcc\arm-linux-androideabi\4.6.x-google\include-fixed`真正的问题是 - 为什么编译器在它们真正位于的时候在下面寻找头文件`platforms\android-9\arch-arm\usr\include`？某处是否有流氓 -I 选项？OP 遇到问题的`include`文件夹下的文件夹看起来很残缺；`toolchains`它可能是 GCC 发行版的产物。真正的 NDK 头文件夹在别处。

# jquery-plugins - jQuery Validation Plugin 远程回调成表单

> ID：12563827
> 
> 赞同：0
> 
> 时间：2012-09-24T11:11:29.637
> 
> 标签：jquery-plugins, jquery-validate

我有一个表格：

```
<form action="" method="post" id="form"  name="form">
<p><label for="name">Name</label><input type="text" id="name" value="" name="name" /></p>

<p><label for="uname">Username<input type="text" id="username" name="username" value=""/></p>
 </form> 
```

带有 jqueryvalidationform 的 Jquery：

```
var validator = $("#form").validate({  
    ignore: ':hidden',          

    rules: {
                name:{
                        required:true,
                        remote: {
                                type: "post",
                                url: "remote-file.php",
                                data: {
                                        username: function() {
                                            return $("#username").val();

                                        }
                                }
                        },

                },
                username: "required", 
.......... 
```

我想要名称：发送到远程文件，在该文件中将其转换为用户名（小写删除空格等），与其他用户名（sql）一起检查，作为回调返回，然后放在只读用户名输入字段中。上面显示了所需的回调，但未在表单中输入，并且在提交调用时，名称和用户名均出现错误。

我可以使用什么 jquery 在更改名称时使用回调填充用户名输入字段？

# django - Django子模板可以创建新块作为钩子吗

> ID：12563828
> 
> 赞同：1
> 
> 时间：2012-09-24T11:11:34.743
> 
> 标签：django, django-templates

我有以下情况：

base.html：

```
{% block content %}{% endblock %} 
```

child.html:

```
{% extends 'base.html' %}
{% block content %}
   <p>Overriding content</p>
{% endblock %}
{% block child_block %}{% endblock %} 
```

child_of_child.html：

```
{% extends 'child.html' %}
{% block child_block %}
   <p>Overriding child</p>
{% endblock %} 
```

在 child.html 中创建一个新块 child_block 并让 child_of_child.html 扩展 child.html 并覆盖此块不起作用，直到我在 base.html 中也包含 child_block 作为钩子。

除了根模板之外，是否不能创建新的模板块/钩子？如果是这样，有没有办法绕过它而不必在 base.html 中包含所有可能的钩子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T12:18:11.680

问题是您的`child_block`块并不存在于 中`base.html`的任何地方，因为它位于现有块之外。渲染模板时它会出现在哪里？根本没有为它定义的地方。

子模板在其他块内定义块是完全可以的，然后由更多的子代填充。因此，例如：

```
{% extends 'base.html' %}
{% block content %}
   <p>Overriding content</p>
   {% block child_block %}{% endblock %}
{% endblock %} 
```

工作得很好，你的结果将是：

```
<p>Overriding content</p>
<p>Overriding child</p> 
```

# cryptography - XMLDSIG 中的 KeyInfo

> ID：12563831
> 
> 赞同：0
> 
> 时间：2012-09-24T11:11:43.407
> 
> 标签：cryptography, digital-signature, xml-dsig

我相当熟悉基本的数字签名。目前正在阅读 XMLDSIG。

此页面说明如何签名

[http://www.di-mgt.com.au/xmldsig.html](http://www.di-mgt.com.au/xmldsig.html)

我无法确定页面上示例输出 XML 文件的字段中存储了什么键？

签名证书有一个公钥。但是，为什么要在签名文档中嵌入 RSA 密钥——这是谁的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:12:47.207

如果您仅使用私有 RSA 密钥对数据进行签名（与使用带有私有密钥的 X.509 证书对其进行签名相反），则将公共 RSA 密钥包含到 KeyInfo 中。

# python - python中的切片表示法 - 需要对代码片段进行澄清

> ID：12563832
> 
> 赞同：3
> 
> 时间：2012-09-24T11:11:47.197
> 
> 标签：python

我是 python 新手，在阅读切片符号时，我遇到了以下代码片段。我能够在非常简单的示例中理解和使用它，但是在以下示例中我无法掌握它的用法。任何解释都会有帮助！

```
>>> a = [1,2]
>>> a[1:1] = [3,4,5]
>>> print a
[1, 3, 4, 5, 2]

>>> a = [1,2]
>>> a[0:1] = [3,4,5]
>>> print a
[3, 4, 5, 2] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:16:04.517

```
a[n:m] = b
# is essentially* equivalent to
a = a[:n] + b + a[m:] 
```

你可以把它读作“替换`a[n:m]`为`b`”（因为`a = a[:n] + a[n:m] + a[m:]`）。

**实际上，切片会**在原地**改变列表（即`id(a)`保持不变），这通常会更可取（而设置会在不同的内存位置`a=`创建我们的新列表）。`a`*

所以在你的例子中：

```
a = [1,2]
#a[1:1] = [3,4,5]
a = a[:1] + [3,4,5] + a[1:]
#   [1]               [2]
[1, 3, 4, 5, 2]

a = [1,2]
#a[0:1] = [3,4,5]
a = a[:0] + [3,4,5] + a[1:]
#   []                [2]
[3, 4, 5, 2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:16:37.590

`a[1:1]`是列表中第一个和第二个元素之间位置的空切片。
所以`a[1:1] = [3,4,5]`意味着“`3,4,5`在列表的第一个元素之后插入元素”。

`a[0:1]`是列表中从第一个元素到（但不包括）第二个元素的切片。
所以`a[0:1] = [3,4,5]`意思是“用元素替换列表的第一个元素`3,4,5`”。

也许这种可视化有助于：

```
| h | e | l | l | o |    <-- string "hello"
0   1   2   3   4   5    <-- slice positions
^---^                    <-- slice [0:1]: "h"
    ^                    <-- slice [1:1]: "" 
```

# c# - “在 C# 中使用‘部分’类的好处”？

> ID：12563838
> 
> 赞同：1
> 
> 时间：2012-09-24T11:12:23.143
> 
> 标签：c#

> **可能重复：**
> [使用部分类而不是抽象类有什么好处？](https://stackoverflow.com/questions/1057851/what-are-the-benefits-to-using-a-partial-class-as-opposed-to-an-abstract-one)

在 C# 中创建分部类有什么用。

它可能有什么缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:14:08.043

Visual Studio 设计人员通常使用分部类。例如实体框架设计器、WinForms、WPF 和 ASP.NET 设计器。它总是生成部分类，以便您以后可以向该部分类添加属性和方法，并实现一些自定义功能，这些功能在设计器的初始自动生成的类定义中不可用。

> 它可能有什么缺点。

由于现在可以将类的定义拆分到不同`.cs`的文件中，因此阅读源代码的开发人员不再知道该类的所有位在哪里。类的定义不再集中在单个文件中，而是可以在同一个项目中展开。所以基本上，如果你开始滥用部分课程，你最终可能会陷入一团糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:18:16.620

部分类用于 WPF、Silverlight 等技术中。在这些情况下，类被制作为部分类以分离应用程序的设计和与其功能相关的代码。在 Windows 窗体中，Visual Studio 自动生成设计代码部分（假设设计用户使用 UI 设计器工具提交）。在 WPF 中，XAML 也会动态编译为部分类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:19:02.050

部分类用于能够拆分类的定义。这意味着您可以跨多个文件或文件的多个部分定义一个类。.NET 框架本身最常使用它来将自动生成的代码与用户代码分开，正如您在 WinForms 等中看到的那样。

使用分部类实际上并没有任何缺点，因为您有明确的理由实际开始使用它们，这并不常见。

# ms-access - 如果任何字段为空，则访问计算失败

> ID：12563840
> 
> 赞同：1
> 
> 时间：2012-09-24T11:12:27.967
> 
> 标签：ms-access

我正在对单个表执行选择，并且需要对一组相关字段中的值求和，我在查询生成器的“字段”部分中有这个。

> 总价值：[FIELD1]+[FIELD2]+[FIELD3]+[FIELD4]+[FIELD5]+[FIELD6]+[FIELD7]

当我转到查询的“表视图”时，我只得到一个计算，其中所有指定的字段都有值？但是，如果所有字段都有一个值，它就可以完美地工作。

为了查看是否真的是这种情况，我将每个字段都插入到查询中，并且得到了一个缺少值的表。

显然不是我所期待的！

我错过了一些明显的东西吗？它与字段中的“空”值有关吗？

请帮助，在此先感谢

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:13:38.997

您需要用 Nz(Field,0) 包装每个字段

```
TotalValue : Nz([FIELD1],0)+Nz([FIELD2],0)+Nz([FIELD3],0)+Nz([FIELD4],0)+
Nz([FIELD5],0)+Nz([FIELD6],0)+Nz([FIELD7],0) 
```

如果不允许空值，也可以设置一个数值默认为零的表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T11:27:29.630

Remu 提供的答案让我得到了正确的答案。

我尝试了 Remu 的解决方案，我收到一条错误消息，关于一个额外的“，”不在它应该在的位置。

所以对代码进行了微小的修改，现在它显示...

> NZ([DEBITN1D1])+NZ([DEBITN2D1])+NZ([DEBITN3D1])+NZ([DEBITN4D1])+NZ([DEBITN5D1])+NZ([DEBITN6D1])+NZ([DEBITN7D1])

我给 Remu 一个 +1，因为我不知道这个特定的功能，也找不到任何地方！此外，他/她的回应使我走上了正确的解决方案。

大卫

编辑：

因此，作为对评论的回应，我衷心同意应该包括额外的信息。但是，当我在方法中有额外的变量时，我看不出为什么代码在我的情况下失败了？

鉴于此，我发现很难选择我的回答作为正确答案（即使 Remou 的原件因错误而失败，而我的代码没有）。

我想知道这是否是因为我在查询生成器的字段详细信息中使用了该函数（而不是在报表或页面上的 VB 模块中使用它）。有没有人有什么方法可以让我测试看看是什么原因？

# android - 使用 IntentService 打开的文件过多

> ID：12563844
> 
> 赞同：1
> 
> 时间：2012-09-24T11:12:37.310
> 
> 标签：android, file, intentservice

我正在使用 IntentService 定期执行任务。每次调用此服务后，都会留下三个额外的打开文件。

在 adb 控制台上，此命令显示 PID（进程 ID）的所有打开文件：

```
lsof | busybox grep PID | busybox wc -l 
```

活动：

```
public class FileLeakActivity extends Activity {
    private Handler handler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        handler.post(mStartService);
    }

    private Runnable mStartService = new Runnable() {
        @Override
        public void run() {
            Intent svc = new Intent(FileLeakActivity.this, FileLeakService.class);
            FileLeakActivity.this.startService(svc);
            handler.postDelayed(mStartService, 1000);
        }
    };
} 
```

服务：

```
public class FileLeakService extends IntentService {
    private final static String TAG = FileLeakService.class.getSimpleName();

    public FileLeakService() {
        super(TAG);
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        Log.v(TAG, "onHandleIntent");
    }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sample.android.fileleak"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <service android:name="FileLeakService" />

        <activity
            android:name=".FileLeakActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我究竟做错了什么？

# php - Zend Framework：选择重复的行

> ID：12563847
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:12:50.853
> 
> 标签：php, zend-framework

那是我的桌子：

```
mat_id| yes| no | type
  1   | 1  | 0  |  3
  1   | 1  | 0  |  3
  2   | 1  | 1  |  3
  3   | 1  | 0  |  3 
```

我的选择查询：

```
$q = $db->select()->from('tableName', 'mat_id')->where('type = ?', 3)->group('yes')->having('COUNT(yes) > 1'); 
```

但为什么`mat_id = 1`只选择，应该采取`mat_id =1,3`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:28:11.160

尝试这个，

```
$db->select()->->distinct()->from('tableName', 'mat_id')->where('type = ?', 3)->group('yes')->having('COUNT(yes) > 1'); 
```

# yii - 如何将下载的扩展添加到 yii 1.11？

> ID：12563852
> 
> 赞同：7
> 
> 时间：2012-09-24T11:13:08.540
> 
> 标签：yii, yii-extensions

谁能告诉我如何为我的 yii 添加扩展名？我用谷歌搜索并下载了**Bootstrap 0.9.8**扩展，并按照其中描述的步骤进行操作，但它对我不起作用。我正在使用**Ubuntu**，您能否逐步解释一下，我只是初学者。

我不知道如何向 yii 添加扩展

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:39:40.237

@raghulrnair，假设您对 yii 有一些基本知识。如果没有，请阅读 Yii 文档[http://www.yiiframework.com/doc/guide/1.1/en/quickstart.what-is-yii](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.what-is-yii)

结合 [http://www.cniska.net/yii-bootstrap/setup.html#setup进行解释](http://www.cniska.net/yii-bootstrap/setup.html#setup)

* * *

1) 下载 bootstrap 扩展，解压到“protected/extensions/bootstrap”。完成此步骤后，您必须看到以下文件夹。

```
protected/extensions/bootstrap/assets
protected/extensions/bootstrap/gii
protected/extensions/bootstrap/components
protected/extensions/bootstrap/lib
protected/extensions/bootstrap/widgets 
```

* * *

2）“**应用程序配置**”在安装扩展时起着**重要作用。**默认情况下，此配置将在一个 php 文件中（即*protected/config/main.php*）

* * *

3）只需编辑该文件并搜索“预加载”。如果找到，则将“引导程序”添加到该数组

```
'preload'=>array( 'log', 'bootstrap'), 
```

如果没有找到，

```
'preload'=>array('bootstrap'), 
```

* * *

4）现在搜索“组件”，然后将引导程序添加到该数组，如下所示

```
'components'=>array(
    .....
    'bootstrap'=>array(
        'class'=>'ext.bootstrap.components.Bootstrap',
    ),
), 
```

* * *

5) 如果您想自动生成引导代码（crud、视图、模型等），请按照此步骤操作。（如果您不想要，这是可选的）在“模块”配置中将引导程序添加到 gii。

```
'modules'=>array(
    .....
    'gii'=>array(
        .....
        'generatorPaths'=>array(
            'bootstrap.gii',
        ),
    ),
), 
```

* * *

6）您的配置已完成。设置完成。

* * *

7)**在您的视图中使用引导程序开始编码** 或使用 gii 生成代码。

许多例子在[http://www.cniska.net/yii-bootstrap/](http://www.cniska.net/yii-bootstrap/)

例如，如果要显示菜单，则编辑视图文件并添加此代码。

```
<?php $this->widget('bootstrap.widgets.TbMenu', array(
    'type'=>'tabs', // '', 'tabs', 'pills' (or 'list')
    'stacked'=>false, // whether this is a stacked menu
    'items'=>array(
        array('label'=>'Home', 'url'=>'#', 'active'=>true),
        array('label'=>'Profile', 'url'=>'#'),
        array('label'=>'Messages', 'url'=>'#'),
    ),
)); ?> 
```

8) 就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T15:00:26.320

bootstrap 下载链接： [http ://www.yiiframework.com/extension/bootstrap](http://www.yiiframework.com/extension/bootstrap)

为您解压缩的扩展程序/引导程序分配权限：

```
chmod 755 bootstrap 
```

# jquery - jquery上滑/下滑代码几乎完美

> ID：12563854
> 
> 赞同：0
> 
> 时间：2012-09-24T11:13:15.550
> 
> 标签：jquery, slidedown, slideup

我最近从“deifwud”得到了这个精彩的代码：

```
$(document).ready(function() {    
    $(".slide").hide();

$('a.link').on('click', function(e) {

  e.preventDefault();
  var slideSelector = '#' + $(this).attr('id').replace('link', 'slide');

  // or do it in the reverse order
  $('div.slide').not($(slideSelector)).slideUp(500, function() {
    $(slideSelector).slideDown(500);
  });

  });      

}); 
```

我想以某种方式“拆分”代码，以便我可以决定（在 css 中？）单击链接时哪个 div 向下滑动，哪个 div 向上滑动。

在[**此**](http://jsfiddle.net/NL9we/)示例中，您将看到 3 个链接。我希望“链接 3”向上滑动，“链接 1”和“链接 2”像他们现在所做的那样向下滑动。

很想听听你的意见！太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:35:47.410

检查此编辑[**FIDDLE**](http://jsfiddle.net/NL9we/2/) ，但您的链接 3 不是切换链接。

# android - 在 libgdx 中创建新层

> ID：12563856
> 
> 赞同：1
> 
> 时间：2012-09-24T11:13:23.863
> 
> 标签：android, libgdx, layer

我想在我的 Libgdx 应用程序中使用图层。谁能指导我如何去做并朝着正确的方向前进。

我也没有找到要导入的任何图层类。

我需要在我的 Libgdx 应用程序中使用 BitmapFont 添加文本层，根据用户标记的位置可能会重叠一点。类似于您在 Facebook 照片中看到标签的方式。

# c# - 如何使用 Jquery 在 Asp Grid 视图的项目模板中获取特定项目？

> ID：12563857
> 
> 赞同：2
> 
> 时间：2012-09-24T11:13:23.833
> 
> 标签：c#, jquery

如何对特定行的网格视图产生影响

```
<asp:GridView ID="gvSearch" runat="server" DataKeyNames="guidId" >
        <Columns>
          <asp:TemplateField>
           <ItemTemplate>
            <div class="test1"> "test paragraph"
            <img src="../Images/double-arrow.png" 
                 style="margin-left: 741px;margin- top:39px;"            
                 class="PreviewImage" 
                 onclick="DisplayImg('<%# Eval("guidId") %>')"/>
           </div>
          </asp:TemplateField>
        </Columns>
 </asp:GridView> 
```

现在通过使用 Jquery，如何在 div 上的 onmouseover 事件上只显示一张图像，我在下面尝试过，但它显示了所有行的图像。

```
 $('div.test1').mouseover(function () {

            $('.PreviewImage').show();
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:16:16.793

你可以试试这个。

```
$('div.test1').mouseover(function () {
     //Hide all images which are visible.
     $('.PreviewImage:visible').hide();
     //On Mouse Over find the Image and show.
     $(this).find('.PreviewImage').show();
}) 
```

或者您可以尝试[使用](http://api.jquery.com/on/)jQuery 版本 >= 1.6

```
$('[Id$=gvSearch]').on('mouseover','div.test1',function () {
     //Hide all images which are visible.
     $('.PreviewImage:visible').hide();
     //On Mouse Over find the Image and show.
     $(this).find('.PreviewImage').show();
}) 
```

# extjs - ExtJS 4 树形图标

> ID：12563862
> 
> 赞同：2
> 
> 时间：2012-09-24T11:13:36.717
> 
> 标签：extjs, extjs4, extjs4.1

当节点支持展开/折叠时，如何基于每个节点更改树节点图标？

例如，我可以使用这个 CSS 为树全局设置展开/折叠图标：

```
#reports-tree .x-tree-icon-parent
{
    background-image: url('../images/tree/folder_closed.png');
    background-repeat: no-repeat;
}

#reports-tree .x-grid-tree-node-expanded .x-tree-icon-parent
{
    background-image: url("../images/tree/folder_opened.png");
    background-repeat: no-repeat;
} 
```

我还可以使用标准设置单个`leaf`图标。`iconCls`

但是，在某些情况下，我有非叶节点，我想提供一个自定义图标，而不是使用正常的展开/折叠图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:39:09.907

似乎解决方案是插入`!important`图标 CSS，例如：

```
.sg-arp-reports-tree-report-stim {
    background-image: url('../images/tree/report_stim.png') !important;
    background-repeat: no-repeat;
} 
```

这似乎按预期工作并保持图标相同，无论展开/折叠或叶子/非叶子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T07:50:22.080

这应该可以帮助你

```
#helpContentsTree .x-tree-node-expanded  .x-tree-node-icon
{
    background-image: url("test1.gif") !important;
    background-repeat: no-repeat;
}
#helpContentsTree .x-tree-node-collapsed   .x-tree-node-icon
{
    background-image: url("test.jpg") !important;
    background-repeat: no-repeat;
} 
```

# windows-phone-7 - WP7 变音符号和特殊字符

> ID：12563864
> 
> 赞同：1
> 
> 时间：2012-09-24T11:13:41.320
> 
> 标签：windows-phone-7, diacritics

我在 WP7 中遇到编码问题。我向 API 发出 json 请求，响应包括德语变音符号，但由于某种原因，它显示不正确。这是发出请求的代码：

```
public static void makeRequest(string requestString,List<String> parameters,Action<string> handleRequestResult)
    {
        //generate a random nonce and a timestamp
        Random rand = new Random();
        Random rand2 = new Random();
        string nonce1 = rand.Next().ToString();
        string nonce2 = rand2.Next().ToString();
        string nonce = nonce1 + nonce2;
        string timestamp = GetTimestamp();

        //create the parameter string in alphabetical order
        //string parameters = "oauth_callback=" + UrlHelper.Encode("http://www.example.com");
        parameters.Add("oauth_consumer_key=" + ConsumerKey);
        parameters.Add("oauth_nonce=" + nonce);
        parameters.Add("oauth_signature_method=HMAC-SHA1");
        parameters.Add("oauth_timestamp=" + timestamp);
        parameters.Add("oauth_version=1.0");

        //sorting the list of parameters (adding '&' between them)
        string sortedParameters = sortParams(parameters);

        //generate a signature base on the current requeststring and parameters and adding it to request string
        string signature = generateSignature("GET", requestString, sortedParameters);
        string url = requestString + "?" + sortedParameters + "&oauth_signature=" + signature;

        //test the request
        WebClient web2 = new WebClient();
        web2.Encoding = UTF8Encoding.UTF8;
        //string result = web.DownloadString(url);
        web2.DownloadStringCompleted += (sender, e) =>
        {
            string result = (string)e.Result;
            handleRequestResult(result);

            //App.ViewModel.LoadData(result);
        };
        web2.DownloadStringAsync(new Uri(url));
    } 
```

这是加载视图响应的示例代码：

```
public void LoadBlogPosts(string content)
    {

        if (!AddToExistingBlogs)
        {
            this.BlogPosts.Clear();
        }

        XDocument xml = XDocument.Parse(content);
        foreach (XElement element in xml.Descendants("item"))
        {
            BlogViewModel newBlog = new BlogViewModel();
            newBlog.Title = element.Element("title").Value;
            newBlog.Description = element.Element("description").Value;
            newBlog.Link = element.Element("link").Value;
            newBlog.Category = element.Element("category").Value;
            //newBlog.Comments = element.Element("comments").Value;
            newBlog.PubDate = element.Element("pubDate").Value;
            XNamespace dc = "http://purl.org/dc/elements/1.1/";
            XNamespace wfw = "http://wellformedweb.org/CommentAPI/";
            XNamespace atom = "http://www.w3.org/2005/Atom";
            XNamespace sy = "http://purl.org/rss/1.0/modules/syndication/";
            XNamespace slash = "http://purl.org/rss/1.0/modules/slash/";
            XNamespace contentn = "http://purl.org/rss/1.0/modules/content/";
            newBlog.Dccreator = element.Element(dc + "creator").Value;
            newBlog.Guid = element.Element("guid").Value;
            newBlog.WfwCommentRss = element.Element(wfw + "commentRss").Value;
            newBlog.SlashComments = element.Element(slash + "comments").Value;
            newBlog.Content = "<html><body style='color: white; background-color:Black'>";
            newBlog.Content += element.Element(contentn + "encoded").Value;
            newBlog.Content += "</body></html>";

            //
            //Extract images from post:
            //
            // Size the control to fill the form with a margin

            var reg = new Regex("src=(?:\"|\')?(?<imgSrc>[^>]*[^/].(?:jpg|bmp|gif|png))(?:\"|\')?");
            var match = reg.Match(newBlog.Content);
            if (match.Success)
            {
                newBlog.FeaturedImage = match.Groups["imgSrc"].Value;
            }
            else
            {
                newBlog.FeaturedImage = @"http://karkur.com/no_image.png";
            }

            BlogPosts.Add(newBlog);

        }

    } 
```

这就是我得到的结果： ![在此处输入图像描述](../Images/6c9918ad9d62c25f65d89a7dc77dc4d4.png)

基本上我需要的是在 WP7 中取消转义 unicode 字符：转换：![在此处输入图像描述](../Images/73875d8c2682ab229d2fd7835019009b.png)

到普通字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:40:28.427

您应该将编码设置为 ISO-8859-1。所以，在你的情况下：

```
web2.Encoding = Encoding.GetEncoding("ISO-8859-1"); 
```

# python - 无法获取 URL 中的偏移值（Django）

> ID：12563870
> 
> 赞同：1
> 
> 时间：2012-09-24T11:13:50.917
> 
> 标签：python, django, url, offset

> **可能重复：**
> [在 request.GET 中捕获 url 参数](https://stackoverflow.com/questions/150505/capturing-url-parameters-in-request-get)

我正在使用 django 设计我的网站的详细信息页面，并将 Topic Url 设置如下：

```
(r'd/\d+/$', 'xiangwww.detail.views.detail'), 
```

第二个参数是主题的 ID。但是当我按照 Django Book 的指南获取它时：

```
def detail(request,offset):
    print offset
    return render_to_response('detail.html') 
```

页面“localhost:8000/d/1/”显示 TypeError：detail() 正好需要 2 个参数（1 个给定）

似乎Django无法识别我的views.py文件中的偏移量，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:26:02.650

您需要通过将其放入正则表达式组来*捕获*该数字：

```
(r'd/(\d+)/$', 'xiangwww.detail.views.detail'), 
```

没有该`(...)`组，Django 不知道捕获的数字，也无法将其传递给您的视图。请参阅[URL 调度文档](https://docs.djangoproject.com/en/stable/topics/http/urls/#using-regular-expressions)：

> 要从 URL 中获取值，只需将括号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:26:39.037

您需要更改 url 以接受偏移量作为参数，例如

```
(r'd/(?P<offset>\d+/)$', 'xiangwww.detail.views.detail'), 
```

# eclipse - 如何防止在 Eclipse 导航器中创建 .project 文件？

> ID：12563878
> 
> 赞同：4
> 
> 时间：2012-09-24T11:14:18.137
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-pde

在我们的 Eclipse 插件中，我们使用导航器管理一些资源。对于导航器中的每个文件夹，Eclipse 都会创建一个`.project`文件，这会导致资源管理下的代码出现问题。

一种方法是`.project`务实地过滤文件。但我想知道 Eclipse 中是否有配置或设置来防止`.project`在导航器下为地图创建文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:10:39.810

`.project`Eclipse IDE 创建的文件是必不可少的，不能阻止生成。

有关更多信息，请参阅[Eclipse 文档中的文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/project_description_file.html)。

编辑：

解决方法是在您的工作区中创建一个项目，然后创建一个链接文件夹，指向您要扫描的资源，这些资源位于文件系统的其他位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:13:13.863

不要试图删除项目元数据。`.project`与简单地将团队 API 配置为在所有版本控制操作期间忽略文件相比，这将导致更多麻烦。该`.project`文件包含来自*所有插件*的元信息，而不仅仅是来自您的。

根据所使用的 VCS，您应该只创建一个默认的 .gitignore、svn:ignore 或任何您需要的文件。

除此之外，我只是将其称为插件中的错误，它试图对该文件执行某些操作。它根本不应该那样做。其他插件将在项目中创建其他文件，如果它们不属于您的插件，您不应该尝试处理每个文件。JDT 插件还知道要编译哪些文件以及忽略哪些文件。

# makefile - FREEBSD：make install Unknown modifier 'u' 变量 ALL_OPTIONS 是递归的

> ID：12563880
> 
> 赞同：2
> 
> 时间：2012-09-24T11:14:21.413
> 
> 标签：makefile, freebsd

我正在寻找一种方法来删除我收到的 make 错误消息。请让我知道是否有任何合适的解决方案。我的 uname -a 返回以下内容：

```
FreeBSD SM2-BSD 6.3-RELEASE FreeBSD 6.3-RELEASE #0: Wed Jan 16 04:18:52 UTC 2008     root@dessler.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  i386 
```

**更新：我的 make 命令在我的旧 linux 机器上运行，它与我的新机器具有相同的配置，运行 FreeBSD 6.3。我没有收到任何错误。我尝试将此 make 文件复制到我的新机器，但它仍然给出相同的错误。**

我刚刚完成了 portsnap 更新，每当我尝试在任何端口包中进行 make install 时都会遇到错误。我收到以下错误

```
make install
Unknown modifier 'u'

Variable ALL_OPTIONS is recursive. 
```

我已经尝试删除 /usr/ports/Mk 和 /usr/ports/lang/tcl84 并按照[http://forums.freebsd.org/showthread.php?t=32376](http://forums.freebsd.org/showthread.php?t=32376)中的建议再次执行 portsnap fetch但我得到了再次出现同样的错误。

我还尝试从我的另一台机器复制一个工作的 make 二进制文件并将其粘贴到 /user/bin/make 到我的新机器中，但无济于事。

我什至尝试通过在提取的文件夹中运行以下命令从[http://ftp.gnu.org/gnu/make/make-3.82.tar.gz下载 Make 文件并安装它们：](http://ftp.gnu.org/gnu/make/make-3.82.tar.gz)

```
./configure
make
make check
make install
make distclean 
```

这是我在运行上述命令时得到的输出：

```
[root@SM2-BSD ~/stuff/make-3.82]# ./configure >> logfile
config.status: WARNING:  'po/Makefile.in.in' seems to ignore the --datarootdir setting
[root@SM2-BSD ~/stuff/make-3.82]# make >> logfile
In file included from glob.c:1377:
glob.c: In function `glob_in_dir':
glob.c:199: warning: passing arg 1 of `my_realloc' from incompatible pointer type
In file included from glob.c:812:
glob.c: In function `glob':
glob.c:199: warning: passing arg 1 of `my_realloc' from incompatible pointer type
In file included from glob.c:931:
glob.c:199: warning: passing arg 1 of `my_realloc' from incompatible pointer type
In file included from glob.c:987:
glob.c:199: warning: passing arg 1 of `my_realloc' from incompatible pointer type
[root@SM2-BSD ~/stuff/make-3.82]# make install >> logfile 
```

我的日志文件内容如下：

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... config/install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... nawk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of gcc... gcc3
checking for ranlib... ranlib
checking how to run the C preprocessor... gcc -E
checking for ar... ar
checking for perl... perl
checking build system type... i386-unknown-freebsd6.3
checking host system type... i386-unknown-freebsd6.3
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for strerror in -lcposix... no
checking whether NLS is requested... yes
checking for msgfmt... /usr/local/bin/msgfmt
checking for gmsgfmt... /usr/local/bin/msgfmt
checking for xgettext... /usr/local/bin/xgettext
checking for msgmerge... /usr/local/bin/msgmerge
checking for ld used by GCC... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for shared library run path origin... done
checking whether NLS is requested... yes
checking for GNU gettext in libc... no
checking for iconv... yes
checking how to link with libiconv... /usr/local/lib/libiconv.so -Wl,-rpath -Wl,/usr/local/lib
checking for GNU gettext in libintl... yes
checking whether to use NLS... yes
checking for GNU gettext in libc... no
checking for iconv... yes
checking how to link with libiconv... /usr/local/lib/libiconv.so -Wl,-rpath -Wl,/usr/local/lib
checking for GNU gettext in libintl... yes
checking whether to use NLS... yes
checking where the gettext function comes from... external libintl
checking how to link with libintl... /usr/local/lib/libintl.so -L/usr/local/lib /usr/local/lib/libiconv.so -Wl,-rpath -Wl,/usr/local/lib
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for library containing getpwnam... none required
checking for ANSI C header files... (cached) yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking whether stat file-mode macros are broken... no
checking whether time.h and sys/time.h may both be included... yes
checking for stdlib.h... (cached) yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking for unistd.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for string.h... (cached) yes
checking for memory.h... (cached) yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/timeb.h usability... yes
checking sys/timeb.h presence... yes
checking for sys/timeb.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking whether gcc and cc understand -c and -o together... yes
checking for an ANSI C-conforming const... yes
checking return type of signal handlers... void
checking for uid_t in sys/types.h... yes
checking for pid_t... yes
checking for uintmax_t... yes
checking for nanoseconds field of struct stat.st_mtim... no
checking whether to use high resolution file timestamps... no
checking whether system uses MSDOS-style paths... no
checking for standard gettimeofday... yes
checking for strdup... yes
checking for strndup... no
checking for mkstemp... yes
checking for mktemp... yes
checking for fdopen... yes
checking for fileno... yes
checking for dup2... yes
checking for getcwd... yes
checking for realpath... yes
checking for sigsetmask... yes
checking for sigaction... yes
checking for getgroups... yes
checking for seteuid... yes
checking for setegid... yes
checking for setlinebuf... yes
checking for setreuid... yes
checking for setregid... yes
checking for getrlimit... yes
checking for setrlimit... yes
checking for setvbuf... yes
checking for pipe... yes
checking for strerror... yes
checking for strsignal... yes
checking for lstat... yes
checking for readlink... yes
checking for atexit... yes
checking whether bsd_signal is declared... no
checking for strcasecmp... yes
checking for strncasecmp... yes
checking for strcmpi... no
checking for strncmpi... no
checking for stricmp... no
checking for strnicmp... no
checking for working strcoll... yes
checking for working alloca.h... no
checking for alloca... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... yes
checking for working vfork... (cached) yes
checking for vprintf... yes
checking for _doprnt... no
checking whether closedir returns void... no
checking for getloadavg... yes
checking for pstat_getdynamic... no
checking for kstat_open in -lkstat... no
checking for getloadavg... yes
checking whether getloadavg requires setgid... no
checking whether sys_siglist is declared... yes
checking whether _sys_siglist is declared... no
checking whether __sys_siglist is declared... no
checking for sys/wait.h... yes
checking for waitpid... yes
checking for wait3... yes
checking for union wait... no
checking for SA_RESTART... yes
checking for location of SCCS get command... get
checking if system libc has GNU glob... no; using local copy
checking if malloc debugging is wanted... no
configure: creating ./config.status
config.status: creating Makefile
config.status: creating glob/Makefile
config.status: creating po/Makefile.in
config.status: creating config/Makefile
config.status: creating doc/Makefile
config.status: creating w32/Makefile
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing depfiles commands
config.status: executing default-1 commands
config.status: creating po/POTFILES
config.status: creating po/Makefile
config.status: creating build.sh
make  all-recursive
Making all in glob
gcc -DHAVE_CONFIG_H -I. -I..    -I/usr/local/include  -g -O2 -MT glob.o -MD -MP -MF .deps/glob.Tpo -c -o glob.o glob.c
mv -f .deps/glob.Tpo .deps/glob.Po
gcc -DHAVE_CONFIG_H -I. -I..    -I/usr/local/include  -g -O2 -MT fnmatch.o -MD -MP -MF .deps/fnmatch.Tpo -c -o fnmatch.o fnmatch.c
mv -f .deps/fnmatch.Tpo .deps/fnmatch.Po
rm -f libglob.a
ar cru libglob.a glob.o fnmatch.o 
ranlib libglob.a
Making all in config
Making all in po
Making all in doc
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT ar.o -MD -MP -MF .deps/ar.Tpo -c -o ar.o ar.c
mv -f .deps/ar.Tpo .deps/ar.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT arscan.o -MD -MP -MF .deps/arscan.Tpo -c -o arscan.o arscan.c
mv -f .deps/arscan.Tpo .deps/arscan.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT commands.o -MD -MP -MF .deps/commands.Tpo -c -o commands.o commands.c
mv -f .deps/commands.Tpo .deps/commands.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT default.o -MD -MP -MF .deps/default.Tpo -c -o default.o default.c
mv -f .deps/default.Tpo .deps/default.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT dir.o -MD -MP -MF .deps/dir.Tpo -c -o dir.o dir.c
mv -f .deps/dir.Tpo .deps/dir.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT expand.o -MD -MP -MF .deps/expand.Tpo -c -o expand.o expand.c
mv -f .deps/expand.Tpo .deps/expand.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT file.o -MD -MP -MF .deps/file.Tpo -c -o file.o file.c
mv -f .deps/file.Tpo .deps/file.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT function.o -MD -MP -MF .deps/function.Tpo -c -o function.o function.c
mv -f .deps/function.Tpo .deps/function.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT getopt.o -MD -MP -MF .deps/getopt.Tpo -c -o getopt.o getopt.c
mv -f .deps/getopt.Tpo .deps/getopt.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT getopt1.o -MD -MP -MF .deps/getopt1.Tpo -c -o getopt1.o getopt1.c
mv -f .deps/getopt1.Tpo .deps/getopt1.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT implicit.o -MD -MP -MF .deps/implicit.Tpo -c -o implicit.o implicit.c
mv -f .deps/implicit.Tpo .deps/implicit.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT job.o -MD -MP -MF .deps/job.Tpo -c -o job.o job.c
mv -f .deps/job.Tpo .deps/job.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT main.o -MD -MP -MF .deps/main.Tpo -c -o main.o main.c
mv -f .deps/main.Tpo .deps/main.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT misc.o -MD -MP -MF .deps/misc.Tpo -c -o misc.o misc.c
mv -f .deps/misc.Tpo .deps/misc.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT read.o -MD -MP -MF .deps/read.Tpo -c -o read.o read.c
mv -f .deps/read.Tpo .deps/read.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT remake.o -MD -MP -MF .deps/remake.Tpo -c -o remake.o remake.c
mv -f .deps/remake.Tpo .deps/remake.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT remote-stub.o -MD -MP -MF .deps/remote-stub.Tpo -c -o remote-stub.o remote-stub.c
mv -f .deps/remote-stub.Tpo .deps/remote-stub.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT rule.o -MD -MP -MF .deps/rule.Tpo -c -o rule.o rule.c
mv -f .deps/rule.Tpo .deps/rule.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT signame.o -MD -MP -MF .deps/signame.Tpo -c -o signame.o signame.c
mv -f .deps/signame.Tpo .deps/signame.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT strcache.o -MD -MP -MF .deps/strcache.Tpo -c -o strcache.o strcache.c
mv -f .deps/strcache.Tpo .deps/strcache.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT variable.o -MD -MP -MF .deps/variable.Tpo -c -o variable.o variable.c
mv -f .deps/variable.Tpo .deps/variable.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT version.o -MD -MP -MF .deps/version.Tpo -c -o version.o version.c
mv -f .deps/version.Tpo .deps/version.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT vpath.o -MD -MP -MF .deps/vpath.Tpo -c -o vpath.o vpath.c
mv -f .deps/vpath.Tpo .deps/vpath.Po
gcc -DLOCALEDIR=\"/usr/local/share/locale\" -DLIBDIR=\"/usr/local/lib\" -DINCLUDEDIR=\"/usr/local/include\" -DHAVE_CONFIG_H -I.  -I./glob   -I/usr/local/include  -g -O2 -MT hash.o -MD -MP -MF .deps/hash.Tpo -c -o hash.o hash.c
mv -f .deps/hash.Tpo .deps/hash.Po
gcc  -g -O2   -o make ar.o arscan.o commands.o  default.o dir.o expand.o  file.o function.o getopt.o  getopt1.o implicit.o job.o  main.o misc.o read.o remake.o  remote-stub.o rule.o signame.o  strcache.o variable.o version.o  vpath.o hash.o glob/libglob.a  /usr/local/li
b/libintl.so -L/usr/local/lib /usr/local/lib/libiconv.so -Wl,-rpath -Wl,/usr/local/lib   
Making install in glob
Making install in config
Making install in po
/bin/sh ../config/mkinstalldirs /usr/local/share
installing be.gmo as /usr/local/share/locale/be/LC_MESSAGES/make.mo
installing da.gmo as /usr/local/share/locale/da/LC_MESSAGES/make.mo
installing de.gmo as /usr/local/share/locale/de/LC_MESSAGES/make.mo
installing es.gmo as /usr/local/share/locale/es/LC_MESSAGES/make.mo
installing fi.gmo as /usr/local/share/locale/fi/LC_MESSAGES/make.mo
installing fr.gmo as /usr/local/share/locale/fr/LC_MESSAGES/make.mo
installing ga.gmo as /usr/local/share/locale/ga/LC_MESSAGES/make.mo
installing gl.gmo as /usr/local/share/locale/gl/LC_MESSAGES/make.mo
installing he.gmo as /usr/local/share/locale/he/LC_MESSAGES/make.mo
installing hr.gmo as /usr/local/share/locale/hr/LC_MESSAGES/make.mo
installing id.gmo as /usr/local/share/locale/id/LC_MESSAGES/make.mo
installing it.gmo as /usr/local/share/locale/it/LC_MESSAGES/make.mo
installing ja.gmo as /usr/local/share/locale/ja/LC_MESSAGES/make.mo
installing ko.gmo as /usr/local/share/locale/ko/LC_MESSAGES/make.mo
installing lt.gmo as /usr/local/share/locale/lt/LC_MESSAGES/make.mo
installing nl.gmo as /usr/local/share/locale/nl/LC_MESSAGES/make.mo
installing pl.gmo as /usr/local/share/locale/pl/LC_MESSAGES/make.mo
installing pt_BR.gmo as /usr/local/share/locale/pt_BR/LC_MESSAGES/make.mo
installing ru.gmo as /usr/local/share/locale/ru/LC_MESSAGES/make.mo
installing sv.gmo as /usr/local/share/locale/sv/LC_MESSAGES/make.mo
installing tr.gmo as /usr/local/share/locale/tr/LC_MESSAGES/make.mo
installing uk.gmo as /usr/local/share/locale/uk/LC_MESSAGES/make.mo
installing vi.gmo as /usr/local/share/locale/vi/LC_MESSAGES/make.mo
installing zh_CN.gmo as /usr/local/share/locale/zh_CN/LC_MESSAGES/make.mo
if test "make" = "gettext-tools"; then  /bin/sh ../config/mkinstalldirs /usr/local/share/gettext/po;  for file in Makefile.in.in remove-potcdate.sin  quot.sed boldquot.sed en@quot.header en@boldquot.header insert-header.sin Rules-quot   Makevars.template; do  /usr/bin/i
nstall -c -m 644 ./$file  /usr/local/share/gettext/po/$file;  done;  for file in Makevars; do  rm -f /usr/local/share/gettext/po/$file;  done;  else  : ;  fi
Making install in doc
test -z "/usr/local/share/info" || ../config/install-sh -c -d "/usr/local/share/info"
 /usr/bin/install -c -m 644 ./make.info ./make.info-1 ./make.info-2 '/usr/local/share/info'
 install-info --info-dir='/usr/local/share/info' '/usr/local/share/info/make.info'
test -z "/usr/local/bin" || config/install-sh -c -d "/usr/local/bin"
  /usr/bin/install -c make '/usr/local/bin'
test -z "/usr/local/share/man/man1" || config/install-sh -c -d "/usr/local/share/man/man1"
 /usr/bin/install -c -m 644 make.1 '/usr/local/share/man/man1' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:19:52.520

在我看来，您当前的 porttree 与`make`古代 FreeBSD 6.3 中使用的不兼容。您最好的选择是升级到 FreeBSD 8 或 9，即当前支持的 STABLE 分支之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:02:18.377

在互联网上进行了一些研究后，我可以找到解决问题的方法。尽管它对问题的解释不是很清楚，但它确实有助于解决问题。

一旦您进行了 portsnap 更新，该错误只会出现在 FreeBSD 6.3 中。建议您运行以下命令查看需要降级的端口。

找出使用

```
make -V ALL_OPTIONS 
```

它会给你所有的端口，通常会有这个端口**/usr/ports/Mk**需要降级。

该文件夹仅包含一些 bsd.*.mk 文件

现在要解决问题，您需要获取旧的端口文件夹并将其替换为当前的 Mk。文件夹。您可以通过从其他 FreeBSD 6.3 机器上复制它来做到这一点，该机器上 make 运行正常或未运行 portsnap 更新。

**更新：**您还可以从**http://cinto.in/Mk.tar下载一个工作 Mk 文件夹**

将**/usr/ports/Mk**文件夹替换为旧的 Mk 文件夹后，您的 make 将开始正常运行。

现在您可以转到任何端口文件夹并运行 make install ，它将根据需要运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-21T11:06:49.107

*替换**/usr/ports/Mk**对我不起作用*

最好的方法是运行“sysinstall”

```
#sysinstall 
```

然后再次将端口添加到您的 freebsd。（执行 FreeBSD 的安装后配置 -> 分发 -> 端口）

从 FTP 站点安装

[ftp://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/amd64/6.3-RELEASE/](ftp://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/amd64/6.3-RELEASE/)

:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T02:31:55.177

@ChooChu 和 @Jens 的回答是正确的，您有一个旧的且不受支持的 FreeBSD 版本，您可以更新端口树，较新的端口树与您当前的旧版本不兼容。

如果您仍然想使用这个旧的稳定版本，想法是您可以将端口树降级到相应的版本，您可以从 FreeBSD 存档站点下载端口树（此 url 仅在发布此评论时有效，如果没有，您应该在 6.3 版本中搜索“freebsd 存档”）：http: [//ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/i386/6.3-RELEASE/ports/](http://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/i386/6.3-RELEASE/ports/)

将两个文件下载到非 usr 目录（不在“/usr”下）： install.sh ports.tgz

然后切换到root并执行以下cmds：

```
su
sh ./install.sh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T21:08:25.923

如果无法选择升级到受支持的 FreeBSD 版本，有一个解决方案：

> 编辑文件 /usr/ports/Mk/bsd.options.mk（如果需要，还可以编辑 /usr/ports/Mk/ 中的其他文件）从文件中删除所有 ":u"（区分大小写，不带引号）。"

这个对我有用。

# android - 解析内部 xml 数据

> ID：12563882
> 
> 赞同：0
> 
> 时间：2012-09-24T11:14:27.653
> 
> 标签：android

如何获取以下 xml 格式的**名称值？**

这是我的代码。

> `<Tracking> <ImageTarget size="140 292" name="teapot"/> </Tracking>`

# vb.net - 打印水晶报告中的最后一行后如何停止打印机（VS2005）

> ID：12563884
> 
> 赞同：1
> 
> 时间：2012-09-24T11:14:29.230
> 
> 标签：vb.net, crystal-reports, visual-studio-2005, report

我在vs2005中有一个水晶报告。我必须用点阵打印机在卷纸上打印这份报告。打印报告后，它会省略一些浪费空间。

我必须停止打印最后一行的打印机。

我遇到了这个问题，但我找不到解决方案。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:24:08.267

我解决了这个问题，我们不能用 Crystal Reports 直接在卷纸上打印动态长度（即动态页面大小），因为在 Crystal Report 中我们有一个标准页面大小（A4、Letter、信封等..）

对于这种情况，请阅读这篇文章： http: [//support.microsoft.com/kb/322090](http://support.microsoft.com/kb/322090)。本文介绍如何打印原始数据。

将所有数据写入并对齐文本文件并打印。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:33:21.687

在报告本身中确保任何页脚都被禁止，这可能会导致纸张浪费。

# ruby-on-rails - 查找在关联中设置标志的记录

> ID：12563896
> 
> 赞同：0
> 
> 时间：2012-09-24T11:15:11.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个名为“Item”的模型，它有很多图像。现在，图像可以成为项目的关键图像。我想找到所有没有与之关联的关键图像的项目。

我最初的方法是这样的：

```
Item.joins(:images).where('images.is_key_image' => nil).group("images.item_id") 
```

但是，这不会对 is_key_image 属性进行分组，因此会一遍又一遍地返回相同的项目，直到所有图像都设置了 is_key_image 属性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T15:46:12.093

1）也许你应该尝试按 items.id 分组？您选择表格项目而不是图像 2）您确定 is_key_image 应该为零吗？经常使用默认值 false 创建布尔字段

# xaml - 在 Win RT XAML 中获取口音刷

> ID：12563898
> 
> 赞同：1
> 
> 时间：2012-09-24T11:15:12.957
> 
> 标签：xaml, windows-runtime, brush

有什么方法可以在 Win RT 中获得重音刷。WPF 提供了通过一些静态 API 获取系统画笔的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:49:57.670

您是否在 SO 上看到过[类似的帖子？](https://stackoverflow.com/questions/9825943/windows-8-theme-color-accessing-it-programatically)简短的回答是否定的，您无法在 WInRT 应用程序中以编程方式获取重音刷。[阅读这篇短文](http://www.irisclasson.com/2012/08/22/winrtmetro-app-q-n-a-can-i-access-accent-start-screen-background-color-in-my-app/)以及其中的链接项目以获取选项。

# android - Droidgap 与 CordovaWebView

> ID：12563904
> 
> 赞同：2
> 
> 时间：2012-09-24T11:15:45.347
> 
> 标签：android, cordova, cordova-2.0.0

我是 Phonegap 的新手，我需要为我将在 Android 上使用 Phonegap 2.0.0 的下一个应用清除一些疑虑。

使用扩展 DroidGap 类的传统方法还是遵循使用 CordovaWebView 的新方法会更好吗？

我[在这里](http://wiki.apache.org/cordova/CordovaWebView)读到DroidGap 类将被弃用，CordovaWebView 将进一步改进以调整性能。

我想要一个不滞后的应用程序，如果与它们的本机版本相比，大多数当前的 Phonegap 应用程序确实有点滞后。那么我应该更喜欢什么？

如果这个问题太愚蠢而无法被问到，请原谅..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:29:29.063

那么 DroidGap 方法是最快和最容易启动和运行的方法。我怀疑这门课还会有一段时间。即使它确实消失了，您也始终能够使用旧版本的 PhoneGap/Cordova 或获取 DroidGap 的源代码并将其包含在您自己的应用程序中。

如果您需要将 CordovaWebView 嵌入到更大的 Android 应用程序中，那就是开始使用的类。

# iphone - 删除不同实体中的对象（核心数据）

> ID：12563908
> 
> 赞同：0
> 
> 时间：2012-09-24T11:15:55.377
> 
> 标签：iphone, core-data

我有一个包含 2 个实体（没有关系）的数据库（核心数据）......在我的情况下插入和获取效果很好......但删除部分让我很困扰......一个实体中的对象被删除，但其他实体没有。 .

这是我的代码：

```
 -(void)deleteObject:(NSString *)entityDescription //entityDescription get entity name 
       {
            NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
                        NSEntityDescription *entity = [NSEntityDescription entityForName:entityDescription inManagedObjectContext:self.managedObjectContext];
                        [fetchRequest setEntity:entity];
                        NSError *errors;
                        NSArray *items = [self.managedObjectContext executeFetchRequest:fetchRequest error:&errors];
                        NSManagedObject *managedObject=[finalArray objectAtIndex:currentImageIndex];
                        for (int i=0;i<[items count];i++)
                        {
                            if ([managedObject isEqual:[items objectAtIndex:i]])
                            {
                                 [self.managedObjectContext deleteObject:managedObject];
                            }
                        }

                            NSLog(@"%@ object deleted", entityDescription);

                         NSNotificationCenter *nc1=[NSNotificationCenter defaultCenter];
                        [nc1 addObserver:self selector:@selector(deleteCheck:) name:NSManagedObjectContextObjectsDidChangeNotification object:self.managedObjectContext];
NSError *error;
                if (![self.managedObjectContext save:&error])
                {
                    NSLog(@"error occured during save = %@", error);
                }
                else
                {
                    NSLog(@"deletion was succesful");
                } 
```

这是我的代码，我遵循相同的方法从其他实体中删除对象......实体描述从另一种方法获取不同的实体名称......它适用于一个实体而不适用于另一个......但我得到了managedObjectContext 删除成功消息（bt 未删除 frm DB）.. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:35:38.143

你可以做几件事来缩小范围：

```
 NSArray *items = [self.managedObjectContext executeFetchRequest:fetchRequest error:&errors];
  // Add this to see that you are returning items from your fetch
  NSLog(@"%i objects returned in items array",items.count);
  NSManagedObject *managedObject=[finalArray objectAtIndex:currentImageIndex];
  // Add this to see what your fetch is returning
  NSLog(@"Fetch returned %@", managedObject);
  for (int i=0;i<[items count];i++)
  {
     // Add this to see for yourself if it is equal to managedObject
     NSLog(@"Testing: %@",[items objectAtIndex:i]);
     if ([managedObject isEqual:[items objectAtIndex:i]])
     {
        [self.managedObjectContext deleteObject:managedObject];
        // Move this to here so you know each time an object is deleted
        NSLog(@"%@ object deleted", entityDescription);
     }
   } 
```

我怀疑您想测试对象的属性，而不是对象是否相等。无论您是否删除了任何内容，当循环完成时，您都会报告“对象已删除”。如果您打算测试托管对象的属性，请将您的测试更改为：

```
If ([managedObject.propertyToTest isEqual:[items objectAtIndex:i]]) 
```

或每个项目的属性：

```
If ([managedObject isEqual:[items objectAtIndex:i].propertyToTest]) 
```

# objective-c - iOS：从 UIView 生成 PDF 使文本模糊

> ID：12563910
> 
> 赞同：2
> 
> 时间：2012-09-24T11:16:04.750
> 
> 标签：objective-c, ios, pdf, uiview

# 通过渲染从 UIView 生成 PDF 质量下降 iOS

我有一个名为`TTT_WantsToBeRazorSharpView`. 这个视图什么都不做，但是用

```
NSString*txtPleaseHelp = NSLocalizedString(@"Hello, am I blurry again?",@"");
CGContextShowTextAtPoint(ctx, 10, 50, [txtPleaseHelp cStringUsingEncoding:NSMacOSRomanStringEncoding], [txtPleaseHelp length]); 
```

现在视图被绘制了三次`UIViewController`（一次在 中`IB`）和两次在代码中使用这些行（比较下图）：

```
 TTT_WantsToBeRazorSharpView *customViewSharp = [[TTT_WantsToBeRazorSharpView alloc] initWithFrame:CGRectMake(10,250, 300, 80)];
 [self.view addSubview:customViewSharp];

 TTT_WantsToBeRazorSharpView *customViewBlurryButIKnowWhy = [[TTT_WantsToBeRazorSharpView alloc] initWithFrame:CGRectMake(361.5, 251.5, 301.5, 80.5)];
 [self.view addSubview:customViewBlurryButIKnowWhy]; 
```

第一个代码绘制视图是锐利的，而第二个不是，但没关系，因为 rect 的逗号值（361.5、251.5、301.5、80.5）。

看这张图片： ![看这张照片](../Images/573bf650bc17978b563b42b6acc45bc7.png)

但我现在的问题是，如果我将视图渲染成 pdf 文档，它就会变得模糊！不知道为什么，请看这里： ![模糊的pdf](../Images/01110c3bcfeacff2de5db754118b01ba.png)

和 PDF 文件本身 Test.pdf [https://raw.github.com/florianbachmann/GeneratePDFfromUIViewButDontWantToLooseQuality/master/Test.pdf](https://raw.github.com/florianbachmann/GeneratePDFfromUIViewButDontWantToLooseQuality/master/Test.pdf)

以及将视图呈现为 pdf 的行：

```
//this is blurry, but why? it can't be the comma coordinates
CGRect customFrame1 = CGRectMake(10,50, 300, 80);
TTT_WantsToBeRazorSharpView *customViewSharp = [[TTT_WantsToBeRazorSharpView alloc] initWithFrame:customFrame1];
CGContextSaveGState(context);
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, (int)customFrame1.origin.x, (int)customFrame1.origin.y);
[customViewSharp.layer renderInContext:context];
CGContextRestoreGState(context); 
```

**那么为什么`renderInContext:context`文字模糊呢？**

感谢您的所有提示和帮助，我什至为您的勇敢做了一个 GitHub 项目（附来源）：[https ://github.com/florianbachmann/GeneratePDFfromUIViewButDontWantToLooseQuality](https://github.com/florianbachmann/GeneratePDFfromUIViewButDontWantToLooseQuality)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:55:27.797

尝试这个：

```
- (void)initValues {
    UIColor *gray = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.3f];
    CALayer *l = [self layer];
    l.masksToBounds = YES;
    l.cornerRadius = 10.0f;
    l.borderWidth = 3.0f;
    self.backgroundColor = gray;
    l.backgroundColor = gray.CGColor;
    l.borderColor = gray.CGColor;
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"TTT_WantsToBeRazorSharpView drawRect[%3.2f,%3.2f][%3.2f,%3.2f]",rect.origin.x,rect.origin.y,rect.size.width,rect.size.height);

    // get the graphic context
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetShouldSmoothFonts(ctx,YES);

    CGColorRef colorWhite = CGColorRetain([UIColor redColor].CGColor);

    CGContextSetFillColorWithColor(ctx, colorWhite);

    CGContextSelectFont(ctx, "Helvetica-Bold", 24, kCGEncodingMacRoman);
    CGAffineTransform tranformer = CGAffineTransformMakeScale(1.0, -1.0);
    CGContextSetTextMatrix(ctx, tranformer);

    //why is this sucker blurry?
    NSString*txtPleaseHelp = NSLocalizedString(@"Hello, am I blurry again?",@"");
    CGContextShowTextAtPoint(ctx, 10, 50, [txtPleaseHelp cStringUsingEncoding:NSMacOSRomanStringEncoding], [txtPleaseHelp length]);
    CGColorRelease(colorWhite);
}

- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {

    if (!layer.shouldRasterize && !CGRectIsEmpty(UIGraphicsGetPDFContextBounds())) {
        [self drawRect:self.bounds];
    }
    else {
        [super drawLayer:layer inContext:ctx];
    }
} 
```

我不得不将文本颜色更改为红色以使其可见。因为先写了文字，然后在上面放了一个透明的灰色按钮，它会使白色的文字消失。添加drawLayer方法时，不需要光栅化的所有内容都作为矢量写入pdf，使文本也可选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:05:47.240

视图中的文本在 PDF 中呈现为位图而不是矢量图形，这会导致外观模糊。我的猜测是 iOS 渲染引擎在中间位图上绘制文本（我认为是出于颜色合成的目的），然后在目标上下文中渲染该位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:45:45.610

我使用以下命令修复模糊文本：

```
 self.frame = CGRectIntegral(self.frame); 
```

文本模糊的原因是对齐不理想，即点坐标中的分数值，因此文本由于过度抗锯齿而显得模糊。

# c# - 如何让用户输入在我的 mvc 控制器中点击某个方法？

> ID：12563918
> 
> 赞同：0
> 
> 时间：2012-09-24T11:16:18.290
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, html, function

我有一个网络表单，要求用户提供他们的 ID。我的总体目标是能够获取 id 并调用函数并返回一个类。该类将返回用户名、电子邮件和城市。我还没有那么远。我还在第一阶段。

我的html代码正确吗？当按下按钮时，我希望用户输入传递给控制器​​？

我想从 html 中的输入文本中获取文本。我想从我的 html 表单中的输入接收文本。然后将该文本带到调用用户类并显示该类的控制器

```
<html>
       <div align="center">
        <form id="searchUser" method="post" action="">
            <table align="center">
        <tr>
            <td class="label">
           Enter ID:
             </td>
            <td>
                <input type="text" name="UserId" id="UserId" />
            </td>
        </tr>
        <tr>
            <td>
                <button class="searchButton" id="searchButtong">Search</button>
            </td>
        </tr>
      </table>
     </form>
   </div>
   <hr /> 
</html>

Search Controller

 public class SearchController : Controller
{
    //
    // GET: /Search/

    public ActionResult Index()
    {
        return View();
    }

    public string searchUser(string UserId)
    {
        UserId = Request["UserId"];
        return UserId;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:18:46.750

您已经`UserId`在控制器操作中声明了变量。您不需要从后面获取它`Request`：

```
public class SearchController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]    
    public ActionResult SearchUser(string UserId)
    {
        User user = ... go and fetch the user given the user id 
        // from wherever your users are stored (a database or something)
        return View(user);
    }
} 
```

现在你可以让你的视图强类型化到`User`类，并有一个部分显示结果：

```
<%@ Page 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewPage<MvcApplication1.Models.User>"
%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Demo</title>
</head>
<body>
   <div align="center">
        <% using (Html.BeginForm("SearchUser", "Search")) { %>
            <table align="center">
                <tr>
                    <td class="label">
                        Enter ID:
                    </td>
                    <td>
                        <input type="text" name="UserId" id="UserId" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="searchButton" id="searchButtong">Search</button>
                    </td>
                </tr>
            </table>
        <% } %>
    </div>

    <hr /> 

    <% if (Model != null) { %>
        <!-- Display the User results here -->
        <div>
            <%= Html.DisplayFor(x => x.FirstName) %>
        </div>
        <div>
            <%= Html.DisplayFor(x => x.LastName) %>
        </div>
    <% } %>
</body>
</html> 
```

* * *

现在您已经使用标准 HTML 技术实现了这个功能，您可以通过引入 AJAX 来改进它：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Demo</title>
</head>
<body>
    <div align="center">
        <% using (Ajax.BeginForm("SearchUser", "Search", null, new AjaxOptions { UpdateTargetId = "results" })) { %>
            <table align="center">
                <tr>
                    <td class="label">
                        Enter ID:
                    </td>
                    <td>
                        <input type="text" name="UserId" id="UserId" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="searchButton" id="searchButtong">Search</button>
                    </td>
                </tr>
            </table>
        <% } %>
    </div>

    <hr /> 

    <div id="result"></div>

    <!-- TODO: Adjust with the proper version of jQuery that you are using -->
    <script src="<%= Url.Content("~/Scripts/jquery-1.7.1.min.js") %>" type="text/javascript"></script>
    <script src="<%= Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js") %>" type="text/javascript"></script>
</body>
</html> 
```

然后让您的控制器操作返回 PartialView：

```
[HttpPost]    
public ActionResult SearchUser(string UserId)
{
    User user = ... go and fetch the user given the user id 
    // from wherever your users are stored (a database or something)
    return PartialView(user);
} 
```

您需要定义（`~/Views/Search/SearchUser.ascx`）：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<mVCaPPLICATION1.mODELS.uSER>" 
%>
<!-- Display the User results here -->
<div>
    <%= Html.DisplayFor(x => x.FirstName) %>
</div>
<div>
    <%= Html.DisplayFor(x => x.LastName) %>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:17:47.233

最简单的方法可能是向操作发出 AJAX 请求，并让操作以 JSON 格式返回正确的数据。

```
public JsonResult YourActionName(int id)
{
    // Fetch your data from DB, or create the model
    // in whatever way suitable
    var model = new YourModel {
        UserName = "Something"
    };

    // Format the response as JSON
    return Json(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:21:34.903

您的表单标签决定了用户提交表单时 POST 的去向。您目前拥有：

```
<form id="searchUser" method="post" action=""> 
```

这会将 POST 定向到当前地址。

您可以使用 MVC 表单助手轻松更改此设置：

```
@using (Html.BeginForm()) {
    //Your form here
} 
```

或者，您可以使用正确的 URL 或 URL 助手手动启动它。

网址助手

```
<form id="searchUser" method="post" action="@Url.Action("searchUser", "Search")"> 
```

手摇

```
<form id="searchUser" method="post" action="/Search/searchUser/"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:22:42.943

```
$(function(){
  $("#searchButtong").click(function(e){
    e.preventDefault();
    var usrId=$("#UserId").val();
    $.getJSON("@Url.Action("searchUser","search")/"+usrId,function(data){
        //here you may set this to a div in the dom instead of alerting.
        alert(data.UserName);
        alert(data.UserID);
    });
  });
}); 
```

假设您有返回这样的 JSON 的操作

```
public ActionResult searchUser(int id)
{
  UserEntity user=repo.GetUserFromID(id);
  return Json(new { UserName=user.UserName, ID=id},
                                                JsonRequestBehaviour.AllowGet);
} 
```

# visual-studio-2010 - 为什么我在 Visual Studio 中使用第三方测试工具？

> ID：12563919
> 
> 赞同：0
> 
> 时间：2012-09-24T11:16:23.517
> 
> 标签：visual-studio-2010

当我安装了 Visual Studio 测试系统 (VSTS) 单元测试框架时，为什么要使用第三方测试工具，如 NUnit、TestDriven.Net 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:20:51.867

其他测试框架具有更多功能、更好的工具支持或某些开发人员可能更喜欢的不同界面。例如，NUnit 具有[TestCase](http://nunit.org/?p=testCase&r=2.5)属性，允许使用相同的测试方法执行多个测试。MSTest 缺少此功能，尽管可以对其进行仿真（请参阅[MSTest 是否具有与 NUnit 的 TestCase 等效的功能？](https://stackoverflow.com/questions/1010685/does-mstest-have-an-equivalent-to-nunits-testcase)）。

有关更多信息，请参阅[NUnit 与 MbUnit 与 MSTest 与 xUnit.net](https://stackoverflow.com/questions/261139/nunit-vs-mbunit-vs-mstest-vs-xunit-net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:20:23.673

[https://stackoverflow.com/a/2367759/545858](https://stackoverflow.com/a/2367759/545858)

至少对于 NUnit 来说是这样。我的猜测是，其他单元测试工具的制作也是出于同样的原因（可扩展性）

# gwt - 适用于 GWT 的 Google Maps v3：如何使用 map.setControls(JsArray > 控制）？

> ID：12563921
> 
> 赞同：2
> 
> 时间：2012-09-24T11:16:28.450
> 
> 标签：gwt, google-maps-api-3, jsni

如您所知，GWT 的官方 Google Maps API v3 在这里宣布：[https ://groups.google.com/forum/#!topic/gwt-google-apis/6SO5kCDqb-k](https://groups.google.com/forum/#!topic/gwt-google-apis/6SO5kCDqb-k)

我需要使用 GoogleMap 类的以下方法：

```
map.setControls(JsArray<MVCArray<Node>> controls) 
```

我如何构建论点？

```
JsArray<MVCArray<Node>> controls 
```

例如，如何在地图的 TOP_LEFT 上放置 GWT 标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:21:30.237

```
TextBox textbox = new TextBox();
textbox.setText("textbox123");
MVCArray<Node> array = MVCArray.create();
array.push(textbox.getElement());
map.getControls().set((int)ControlPosition.RIGHT_TOP.getValue(), array); 
```

# r - 选择正方形周长内的圆圈内的点

> ID：12563922
> 
> 赞同：1
> 
> 时间：2012-09-24T11:16:30.133
> 
> 标签：r

我有一个坐标向量，其中每一行指定一个圆的中心：

```
x <- runif(5,0,2)
y <- runif(5,0,2) 
```

如您所见，圆心都在正方形 (0,2) 内。

每个圆的半径为 0.2。我想在原始圆的范围内随机移动圆的中心。我想我可以这样做：

```
radii  <- (sample(20,5,replace=TRUE))/100
angles <- sample(360,5,replace=TRUE)
newx <- x + radii*(cos(angles))
newy <- y + radii*(sin(angles)) 
```

但是，我意识到这样做我可以从技术上获得落在正方形 (0,2) 之外的圆心。我可以尝试编写一个拒绝`newx`和否定`newy`值的循环。但是必须为成千上万行执行此操作并担心此速度。是否可以在不诉诸循环的情况下运行这种有条件的坐标偏移？

我的规则集如下：

1.  为每个中心选择一个新的圆心。

2.  新的中心必须落在每个圆的区域内（距离原始中心的半径 0.2 距离）

3.  新中心必须位于原来的方格内。

4.  如果一个中心与圆的边界相交，则应按照反射定律反映（反映所选随机半径距离的剩余长度）

![在此处输入图像描述](../Images/5589b73cd10a857e411e776d8abb4de2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:21:15.957

像这样的东西：

```
#lets do only one point first
x <- runif(1,0,2)
y <- runif(1,0,2)

randomwalk <- function (pos) {
  x <- pos[1]
  y <- pos[2]
  radius  <- (sample(20,1,replace=TRUE))/100
  angle <- sample(360,1,replace=TRUE)
  newx <- x + radius*(cos(angle))
  newy <- y + radius*(sin(angle))

  if (newy > 2) { #check the geometric calculations
    r2 <- (2-y)/sin(angle)

    hitx <- x + r2*(cos(angle))
    hity <- 2

    newx <- hitx + (radius-r2)*sin(angle)
    newy <- hity - (radius-r2)*cos(angle)
  } 

  #implement other borders yourself
  #and include a check, which border is hit first
  #and include the possibility for multiple hits 
  #(e.g., left border and then top border)

  cbind(newx,newy)
}

resx <- vector(50,mode="numeric")
resy <- vector(50,mode="numeric")

res <- cbind(resx,resy)

res[1,] <- cbind(x,y)

for (i in 2:50) {
  res[i,] <- randomwalk(res[i-1,])
} 
```

我怀疑这仍然包含一些几何错误，但没有时间检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:05:14.977

函数`inpip`和`inout`from package splancs 非常有用；它们可用于检查点是否落在多边形内。您只需要一个包含 2 列的矩阵，它代表任何多边形（例如正方形）。使用 C 和 Fortran 程序使这些函数变得快速。

如果您的正方形是：

```
square <- cbind(c(0, 10, 10, 0), c(0, 0, 10, 10)) # In case side = 10 
```

然后创建所有新中心（我建议使用`runif`而不是`sample`for the `radii`and `angle`，但这取决于你）。然后用一条线检查这些中心是否落在正方形内：

```
inside <- inout(newCenters, square)
newCenters <- newCenters[inside] 
```

之后，您应该执行所有必要的步骤来重新创建`newCenters`选择的对象，根据需要多次创建，直到它们落在正方形内。请注意，这需要一个`while`循环（或等效项）。

另请注意，在同一个包（splancs）中有这个函数`csr`可以在多边形内创建随机点。因此，原则上，您可以在正方形之外的每个圆周上切割一块，然后使用生成的多边形（切割圆）作为该函数的输入。这可能会变得很慢，因为您必须对所有切割圆使用循环（或`lapply`可能）。

最后一个想法，也许您可​​以将这两种策略结合起来。首先将您最初的想法用于完全落在正方形内的所有圆周（或等效地，与圆周距离为 2 或更多的所有中心）。然后`csr`对所有其余的圆圈使用该功能。

希望这可以帮助！

# javascript - 从具有相同值的两个数组中提取元素

> ID：12563925
> 
> 赞同：0
> 
> 时间：2012-09-24T11:16:35.843
> 
> 标签：javascript, arrays

您好，我想从具有相同 url 的两个数组中提取元素。我如何循环这两个数组并获取它们的内容，因为它给了我未定义的 news_url 并且我认为它在控制台中输出了两倍的项目。

```
function geo(news_array,user_tweets){
    console.log(news_array,user_tweets);
    for (var x=0; x<user_tweets.length; x++) {
        var user = user_tweets[x].user;
        var date = user_tweets[x].date;
        var profile_img = user_tweets[x].profile_img;
        var text = user_tweets[x].text;
        var url=user_tweets[x].url;
        second(user,date,profile_img,text,url);
    }
    function second(user,date,profile_img,text,url){
        for (var i = 0; i < news_array.length; i++) {
            var news_user = news_array[i].news_user;
            var news_date = news_array[i].news_date;
            var news_profile_img = news_array[i].news_profile_img;
            var news_text = news_array[i].news_text;
            var news_url=news_array[i].url;
            if (url==news_array[i].news_url) {
                geocode(user,date,profile_img,text,url,news_user,news_date,news_profile_img,news_text,news_url);
            }
        }
    }
    function geocode(user,date,profile_img,text,url,news_user,news_date,news_profile_img,news_text,news_url) {
        console.log(url,news_url);
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:22:39.387

您必须在第一个循环之前声明一些变量`for`，以便可以在`second`函数范围内访问它们。尝试`for`用以下代码替换您的第一个循环：

```
var user, date, profile_img, text, url;
for (var x=0; x<user_tweets.length; x++){
    user = user_tweets[x].user;
    date = user_tweets[x].date;
    profile_img = user_tweets[x].profile_img;
    text = user_tweets[x].text;
    url=user_tweets[x].url;
    second(user,date,profile_img,text,url);
} 
```

此外，在`if`你的`second`函数中，`news_array[i].news_url`没有定义。改为使用`if (url == news_url)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:23:06.677

问题出在`news_tweets`功能上，你添加`news_url`到`news_array`. 所以你应该打电话

> news_array[i].news_url

在`second`功能上。

我将您的代码修改为

1.  `news_url: (item.entities.urls.length > 0)?item.entities.urls[0].url : ''`在`news_tweets`功能上
2.  `}`为`geo`函数添加右大括号并`}`从最后一个删除
3.  将`new_array`参数添加到`second`函数中`second(user, date, profile_img, text, url,news_array);`

修改代码可以在[http://jsfiddle.net/rhjJb/7/测试](http://jsfiddle.net/rhjJb/7/)

# c# - 捕获由不正确的 web.config 引起的错误

> ID：12563928
> 
> 赞同：1
> 
> 时间：2012-09-24T11:16:44.177
> 
> 标签：c#, asp.net, .net, web-config

我正在寻找一种方法来捕获由不正确的 web.config 文件引起的错误。看起来`void Application_Error(object sender, EventArgs ev)`仅在验证配置文件后才调用并且永远不会到达。

示例错误：

> 解析器错误消息：无法识别的属性“targetFramework”。请注意，属性名称区分大小写。

当应用程序的应用程序池设置为框架 2.0 而不是 4.0 时会发生此错误

发生此错误时，我想重定向到带有屏幕截图的特定页面，以解释如何更改应用程序池。

是否可以在 global.asax 中捕获此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:24:07.733

试试这个解决方案

```
<configuration>
   <system.web>
      <customErrors defaultRedirect="GenericError.htm" mode="RemoteOnly">
         <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
   </system.web>
</configuration> 
```

有关更多详细信息[http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx)

# magento - Magento 覆盖现有的源模型

> ID：12563929
> 
> 赞同：1
> 
> 时间：2012-09-24T11:16:48.027
> 
> 标签：magento

我想在`Mage_CatalogInventory_Model_Source_Backorders`.How 中添加一个更多选项。如何覆盖此源模型？

覆盖是否类似于实体模型覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:40:09.687

正确的。xpath 是`global/models/cataloginventory/rewrite/source_backorders`. 根据您的排序需求/偏好，只需`array_merge()`,`array_unshift()`或`array_splice()`您的选项，它需要在覆盖的`toOptionArray()`方法中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:12:55.707

只需尝试将相同的文件夹放在您的本地文件夹中，例如 magentodemo\app\code\local\Mage\CatalogInventory\Model\Source\Backorders.php，然后在 Backorders.php 中编写您想要添加的代码，然后检查它。

# c# - Visual Studio 中的数据库

> ID：12563931
> 
> 赞同：0
> 
> 时间：2012-09-24T11:16:58.167
> 
> 标签：c#, database

我目前正在开发需要存储来自不同控件的大量信息的应用程序。我以前从来没有这样做过，在阅读了关于这个主题的几件事之后，我有点困惑。我是否需要下载 SQL Server 2008 并使用它才能从 WinForm 存储数据？如果是，那么服务端项目是做什么用的？我可以用于存储吗？我不需要从数据库中导入数据（至少现在不需要），我只需要将东西保存在某个地方，我想知道确切的位置。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:22:03.827

您不必**在**数据库中存储任何内容，例如，您可以将需要存储的任何内容[序列化](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.110%29.aspx)到[隔离存储中](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:22:50.687

我从您的问题“SQL server 2008 and work with it to store data from WinForm”中读到了一行；意思是你想保存一些数据，这将来自winform的数据输入。对吗？

如果是这种情况，您可以采用任何适合您的财务 + 容量需求和其他参数的[RDBMS 软件](http://en.wikipedia.org/wiki/List_of_relational_database_management_systems)。

您当然可以选择 SQL server 2008 或 Oracle 或 MySql 或（列表中的一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:24:27.113

如果您不需要像存储过程、奇怪索引等花哨的数据库内容，您可以选择将数据存储在无服务器数据库（例如 SQL CE、SQLite）中。上述两种技术都与 Entity Framework 兼容，因此您可以使用代码优先的方法（您可以编写类并动态生成数据库）。

在这里你可以阅读更多关于它的信息。 [http://www.codeproject.com/Articles/318010/Entity-Framework-Code-First-Let-s-Try-It](http://www.codeproject.com/Articles/318010/Entity-Framework-Code-First-Let-s-Try-It)

这是.Net [http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki的 SQLite 程序集](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:37:48.623

您的数据的**性质是什么？**

仅仅因为它很大并不一定意味着成熟的 DBMS（甚至是嵌入式数据库）是最合适的。您是否考虑过简单地将数据序列化为普通文件？

但是如果你的数据是“关系的”并且你需要做诸如查询、完整性执行、事务、多个客户端的并发访问（等等）之类的事情，那么你绝对应该考虑一种数据库方法，包括 MS SQL Server、Oracle 、IBM DB2、Sybase 等...

也有很好的开源 DBMS：PostgreSQL、Firebird、MySQL...

# mysql - 将嵌套子查询转换为简单查询

> ID：12563934
> 
> 赞同：0
> 
> 时间：2012-09-24T11:17:00.383
> 
> 标签：mysql, join, subquery

有两个表“员工”和“分配”。谁能帮我把这个嵌套查询转换成一个简单的查询（使用连接或任何东西）。我的意思是我不想要嵌套查询。这是工作正常的查询。

```
select emp_id, emp_name from employees 
where emp_id not in (select emp_id from allocation 
            where emp_id is not null 
            and date_assignedUpto is null 
            group by emp_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:34:09.073

如果您真的不想使用`NOT IN`query ，您可以这样做：

```
 SELECT e.emp_id, e.emp_name FROM employees e 
 LEFT JOIN (SELECT emp_id FROM allocation 
            WHERE emp_id IS NOT NULL 
            AND date_assignedUpto IS NULL 
            GROUP BY emp_id) a 
 ON e.emp_id= a.emp_id; 
```

# ssl - TYPO3、RealURL、快捷方式和多种语言 = 不快乐

> ID：12563935
> 
> 赞同：0
> 
> 时间：2012-09-24T11:17:02.880
> 
> 标签：ssl, typo3, realurl

我正在尝试让 RealURL 在我的 TYPO3 4.7 安装上工作。整个网站是 SSL 加密的。这是我的配置：

```
$TYPO3_CONF_VARS['EXTCONF']['realurl']['_DEFAULT'] = array(
  'pagePath' => array(
    'type' => 'user',
    'userFunc' => 'EXT:realurl/class.tx_realurl_advanced.php:&tx_realurl_advanced->main',
    'segTitleFieldList' => 'tx_realurl_pathsegment,alias,title,nav_title',
    'languageGetVar' => 'L',
  ),
  'preVars' => array(
    array(
      'GETvar' => 'L',
      'valueMap' => array(
          'en' => '0',
          'de' => '1',
      ),
      'noMatch' => 'bypass',
    ),
  ),
); 
```

我的页面树有每个链接到第一个子页面的类别页面：

```
Home
Cat1 [shortcut]
 | 
 --subpage1.1
 --subpage1.2
Cat2 [shortcut]
 |
 --subpage2.1
 --subpage2.2
Cat3
[..]
External link 
```

只要我使用默认语言（英语），一切正常。一旦我切换到语言 1（德语），Cat 链接就会消失，这使得无法访问子页面。直接输入子页面 URL，例如[https://domain.com/cat1/subpage1.1](https://domain.com/cat1/subpage1.1)将我带到所需的页面。哦，外部链接也坏了，虽然这是一个小问题。为两种语言设置了标题、副标题、导航标题和口语网址。我还尝试将“第一个可用子页面”更改为固定子页面，但这并没有改善这种情况。

编辑：“链接消失”意味着导航菜单正确显示，但相应的 a 标签没有 href 属性。例如英文版有一个

```
<li><a href="en/cat1/subpage1.1/" onfocus="blurLink(this);"  >Cat1</a></li> 
```

nav 元素，而德语版本有

```
<li><a onfocus="blurLink(this);"  >Cat1</a></li> 
```

有任何想法吗？

# image-processing - 为什么 GPU 在 opencv SURF 算法中没有比 CPU 显示出优势？

> ID：12563939
> 
> 赞同：1
> 
> 时间：2012-09-24T11:17:32.147
> 
> 标签：image-processing, opencv, computer-vision, gpu, emgucv

我想使用 GPU 来加速 SURF 算法。但实际上我发现 CPU（enale TBB）比 SURF 算法的 GPU 更快。 **我的硬件和操作系统信息：** CPU：Intel(R) Xeon(R) CPU E3-1230 V2 @ 3.30GHz（4 核 + 8 线程） GPU：Nvidia GTX 660ti ~1000MHz（1344 GPU 核）ubuntu 12.04（64 位）

**应用场景：** 我的文件夹有大约 120 张图像。我需要使用 SURF 获取每个图像的关键点。

**时间日志**

每个图像的 CPU(TBB)，花费时间日志：

索引 DB:/home/ole/MatchServer/ImgDB0/img0 在 SURF ALGO (ON TBB)[s] 上花费时间：0.00666648

索引 DB:/home/ole/MatchServer/ImgDB0/img1 花费时间 onSURF ALGO (ON TBB)[s]: 0.00803925

索引 DB:/home/ole/MatchServer/ImgDB0/img2 在 SURF ALGO (ON TBB)[s] 上花费时间：0.0066344

索引 DB:/home/ole/MatchServer/ImgDB0/img3 在 SURF ALGO (ON TBB)[s] 上花费时间：0.00625698

索引 DB:/home/ole/MatchServer/ImgDB0/img4 在 SURF ALGO (ON TBB)[s] 上花费时间：0.00699448

索引 DB:/home/ole/MatchServer/ImgDB0/img5 在 SURF ALGO (ON TBB)[s] 上花费时间：0.00621663

```
 .................more.................................. 
```

每个图像的 GPU，花费时间日志（每个图像的 GPU 有 2 行日志，一个是上传 img 到 GPU Mem，第二个是 SURF_GPU 算法花费时间）：

索引 DB:/home/ole/MatchServer/ImgDB0/img0 GPU 上传图像的成本时间 [s]: 1.99329

索引 DB:/home/ole/MatchServer/ImgDB0/img0 在 Gpu SURF ALGO[s] 上花费时间：0.00971809

索引 DB:/home/ole/MatchServer/ImgDB0/img1 GPU 上传图像的成本时间 [s]: 0.000157638

索引 DB:/home/ole/MatchServer/ImgDB0/img1 在 Gpu SURF ALGO[s] 上花费时间：0.00618778

索引 DB:/home/ole/MatchServer/ImgDB0/img2 在 GPU 上传图像上花费时间 [s]: 8.8108e-05

索引 DB:/home/ole/MatchServer/ImgDB0/img2 在 Gpu SURF ALGO[s] 上花费时间：0.00736609

索引 DB:/home/ole/MatchServer/ImgDB0/img3 GPU 上传图像的成本时间 [s]: 8.8599e-05

索引 DB:/home/ole/MatchServer/ImgDB0/img3 在 Gpu SURF ALGO[s] 上花费时间：0.00559131

索引 DB:/home/ole/MatchServer/ImgDB0/img4 GPU 上传图像的成本时间 [s]: 8.7626e-05

索引 DB:/home/ole/MatchServer/ImgDB0/img4 在 Gpu SURF ALGO[s] 上花费时间：0.00610033

索引 DB:/home/ole/MatchServer/ImgDB0/img5 GPU 上传图像的成本时间 [s]: 8.9125e-05

索引 DB:/home/ole/MatchServer/ImgDB0/img5 在 Gpu SURF ALGO[s] 上花费时间：0.00632997

```
 ............................more.................................. 
```

**我发现将图像垫上传到 GPU 大约 2 秒的第一张图像非常慢。接下来是正常的大约 0.000157638 秒。**

**显卡代码**：

```
 try
    {
        double t0 = (double)getTickCount();
        cv::gpu::SURF_GPU surf_gpu;
        Size size = help_img.size();
        Size size0 = size;
        int type = help_img.type();
        cv::gpu::GpuMat d_m(size0, type);
        if(size0 != help_img.size() )
            d_m = d_m(Rect((size0.width - size.width) / 2, (size0.height - size.height) / 2, size.width, size.height));
        d_m.upload(help_img);
        double t = ((double)getTickCount() - t0)/getTickFrequency();
        std::cout << "indexing DB:"<< path << " cost time on upload image[s]: " << t << std::endl;

        t0 = (double)getTickCount();
        surf_gpu(d_m, cv::gpu::GpuMat(), help_keypoints);
        t = ((double)getTickCount() - t0)/getTickFrequency();
        std::cout << "indexing DB:"<< path << " cost time on Gpu image[s]: " << t << std::endl;
    }
    catch (const cv::Exception& e)
    {
       printf("issue happen!");
    } 
```

请帮忙就以下问题提出一些建议：

**1.**为什么第一次上传图片到GPU很慢2秒左右？

**2.**为什么GPU不能加速SURF算法，SURF有很多计算，理论上GPU可以加速。

**3.** SURF算法如何提高GPU性能？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:05:11.300

1.  第一次上传到 GPU 总是会比较慢。GPU 需要进行初始化才能进行一些实际工作。这是因为默认 CUDA 上下文是在第一次 CUDA 调用时创建的，在您的情况下，它是上传到 GPU Mat。一种解决方法是在执行实际工作之前调用随机 GPU 函数。

2.  这取决于您要比较的 GPU 和 CPU。使用 TBB 时，您使用的 XEON 等高端 CPU 更有可能获胜。对于实际加速，请尝试使用 NVIDIA Tesla 等高端 GPU。OpenCV 的当前实现可能没有针对您正在使用的 Kepler 架构 GPU 进行优化。

3.  对此没有固定的答案。它取决于算法的并行性、最佳实现以及系统中存在的硬件。

# c - 为什么可以通过额外的比较来检查枚举位掩码？

> ID：12563940
> 
> 赞同：1
> 
> 时间：2012-09-24T11:17:35.500
> 
> 标签：c, syntax

我最近遇到过几次：

```
if ((flags & PERFORM_DELETION_CONCURRENTLY) == PERFORM_DELETION_CONCURRENTLY)
   ... 
```

额外比较的原因是什么？为什么不是这个？

```
if (flags & PERFORM_DELETION_CONCURRENTLY)
   ... 
```

我的猜测是，在编译器更加严格的时候，消除警告是一种遗留的习惯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:18:53.783

也有可能在掩码中设置了不止一个位。在这种情况下，两个比较具有不同的语义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:26:52.577

准确地说，如果 中的所有位`PERFORM_DELETION_CONCURRENTLY`都设置在 中，则条件为真`flags`。一种稍微更有效的方法（在某些架构上）是`if ((~flags & PERFORM_DELETION_CONCURRENTLY) == 0)`......我将它埋在`ALL_BITS_SET`我的标准头文件中的一个宏中，这也使代码更具可读性/可理解性。

# xslt - XSLT 查找兄弟姐妹是否存在

> ID：12563941
> 
> 赞同：6
> 
> 时间：2012-09-24T11:17:39.540
> 
> 标签：xslt, xpath

下面给出了示例 XML。

```
<mapNode>
      <mapNode>...</mapNode>
      <mapNode>...</mapNode>-----I am here at 2
      <mapNode>...</mapNode>
      <mapNode>...</mapNode>
</mapNode>
<mapNode>
      <mapNode>...</mapNode>
      <mapNode>...</mapNode>
</mapNode> 
```

我想知道位置 3 是否存在。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T11:55:22.783

如果你想测试一个元素后面是否有兄弟，你可以使用命名为“following-sibling”的xpath表达式：

```
<xsl:if test="following-sibling::*" /> 
```

请注意，这将测试是否有任何后续兄弟。如果您只想测试**mapNode**元素，您可以这样做

```
<xsl:if test="following-sibling::mapNode" /> 
```

但是，在以下情况下也是如此，因为 following-sibling 将查看所有以下兄弟姐妹：

```
<mapNode> 
   <mapNode>...</mapNode> 
   <mapNode>...</mapNode>-----I am here at 2 
   <differentNode>...</differentNode> 
   <mapNode>...</mapNode> 
</mapNode> 
```

因此，如果您想检查紧随其后的兄弟元素是**mapNode**元素，您可以这样做：

```
<xsl:if test="following-sibling::*[1][self::mapNode]" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:49:10.747

除了@rene's answer之外，您还可以`following-sibling`在 any 中使用轴`mapNode`：

```
<xsl:template match="mapNode">
    <xsl:if test="count(following-sibling::mapNode)>0">
    <!-- has a successor -->
    </xsl:if>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:41:23.430

不知道您已经拥有什么，但假设您有一个模板来选择顶级 mapNode，您可以使用[count](http://www.dpawson.co.uk/xsl/sect2/N2018.html)来找出当前节点下有多少 mapNode：

```
 <xsl:template match="/root/mapNode">
      <xsl:if test="count(mapNode)>2">
        more than two mapNodes
      </xsl:if>
    </xsl:template> 
```

# c# - 在 C# 中可视化 Weka 分类树

> ID：12563943
> 
> 赞同：0
> 
> 时间：2012-09-24T11:17:44.423
> 
> 标签：c#, tree, weka, visualizer

我使用 weka 库创建了一个 C# 程序。

我正在关注 WekaManual.pdf，示例在数据集上构建 J48 分类器，并使用 TreeVisualizer 类直观地显示生成的树。

代码是，

```
Instances data = ... // from somewhere
// train classifier
J48 cls = new J48();
cls.buildClassifier(data);

weka.gui.treevisualizer.TreeVisualizer tv = new weka.gui.treevisualizer.TreeVisualizer(null,cls.graph(), new weka.gui.treevisualizer.PlaceNode2());

javax.swing.JFrame jf = new javax.swing.JFrame("Weka Classifier Tree Visualizer : J48");

jf.setDefaultCloseOperation(2);
jf.setSize(1280, 1024);
jf.getContentPane();
jf.setLayout(new java.awt.BorderLayout());
jf.add(tv, java.awt.BorderLayout.CENTER);

jf.setVisible(true);

tv.fitToScreen(); 
```

作为代码的结果，Java Swing 表单被创建，但树图没有出现。

谁能指导我如何在 C# 环境中获取树图？

# linux - 我正在使用 rsync 将所有 httpdocs 文件从服务器复制到服务器，我用什么来包含隐藏/htaccess 文件

> ID：12563946
> 
> 赞同：0
> 
> 时间：2012-09-24T11:17:51.570
> 
> 标签：linux, bash

这是我正在运行的命令

```
rsync -av -e ssh httpdocs user@ipaddress:httpdocs 
```

但这错过了像 .htaccess 这样的隐藏文件？

任何帮助表示赞赏！

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:22:33.083

使用 rsync 将自动复制所有子目录和文件。您不需要额外的键或选项来复制隐藏文件。

# asp.net - 更新面板内的链接按钮不起作用

> ID：12563951
> 
> 赞同：0
> 
> 时间：2012-09-24T11:18:06.060
> 
> 标签：asp.net, updatepanel, asplinkbutton

该页面在 updatePanel 内有表格，在 tablecell 内有链接按钮：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
  <ContentTemplate>
    <asp:Table ID="Table1" runat="server" BackColor="White" BorderColor="Black" 
        BorderWidth="1px" ForeColor="Black" GridLines="Both" BorderStyle="Solid">
    </asp:Table>
  </ContentTemplate>        
</asp:UpdatePanel> 
```

在 .cs 文件中，我将行添加到表中：

```
TableRow tr = new TableRow();
TableCell tc = new TableCell();
LinkButton lb = new LinkButton();
lb.Text = "Click me";
lb.Click += new EventHandler(this.LinkButton_Click);
tc.Controls.Add(lb);
tr.Cells.Add(tc);
Table1.Rows.Add(tr); 
```

和方法：

```
protected void LinkButton_Click(Object sender, EventArgs e)
{
  Response.Write("<script type='text/javascript'>");
  Response.Write("alert('Ok!');");
  Response.Write("</script>");  
} 
```

因此，当我单击链接按钮时，警报不起作用。什么是问题？

请注意，如果我删除更新面板，则链接按钮在单击它时会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:33:06.743

这不是正确的方法

用这个

ScriptManager.RegisterStartupScript(pnlUpdateCom, this.GetType(), "UpdateCom", "alert('OK!.');return false;", true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:30:58.160

您需要添加 postbacktrigger，如下所示：

```
<asp:PostBackTrigger ControlID="SearchBrn"/> 
```

# sql-server - 如何在sql server中选择仅匹配IN List的项目

> ID：12563952
> 
> 赞同：21
> 
> 时间：2012-09-24T11:18:14.203
> 
> 标签：sql-server, tsql

如何在 IN 列表中只选择他想要的项目？例如

```
select * from pagetags where TagID in (1,2,4) 
```

现在我想要所有分配了以上 3 个 ID 的页面（1,2,4），不只是其中任何一个，而是全部？

有办法吗？任何其他运营商？我已经尝试过`= Any`，`= All`但没有运气。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-24T11:21:19.667

这类问题的术语是[关系划分](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。下面的一种方式。

```
SELECT PageID
FROM   pagetags
WHERE  TagID IN ( 1, 2, 4 )
GROUP  BY PageID
HAVING Count(DISTINCT TagID) = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:35:56.083

你可以尝试这样的事情：

```
SELECT id, Tag FROM (
SELECT id, Tag, COUNT(*) OVER(partition by id) as cnt
FROM pagetags
WHERE Tag in(1,2,4)
GROUP BY id, tag
) a WHERE a.cnt = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:24:57.730

马丁史密斯的精选答案

```
SELECT PageID
FROM   pagetags
WHERE  TagID IN ( 1, 2, 4 )
GROUP  BY PageID
HAVING Count(DISTINCT TagID) = 3 
```

是正确的，但如果速度是一个问题，那么试试这些。

我有一张大桌子在做同样的事情，并且通过以下方式获得了 10 倍的性能提升。
从具有 300 万行的表中返回 272 的查询需要 0.2 秒和 2.0 秒。
还在具有 5 个标签和相同 10 倍但现在为 0.5 与 5.0 的更大表上进行了测试。
索引是PageID，TagID 有百万个PageID 和数百个TagID。
许多对象被标记为多值属性的常见场景。

```
 SELECT distinct(p1.PageID)
    FROM   pagetags p1
    JOIN   pagetags p2
      ON   p2.PageID = p1.PageID
      AND  p2.TagID = 2 
    JOIN   pagetags p3
      ON   p3.PageID = p1.PageID
      AND  p3.TagID = 4
    WHERE  p1.PageID = 1
 ORDER BY  p1.PageID 
```

或者

```
 SELECT  distinct(PageID)
    FROM   pagetags
    WHERE  TagID = 1
   INTERSECT
   SELECT  distinct(PageID)
    FROM   pagetags
    WHERE  TagID = 2 
   INTERSECT
   SELECT  distinct(PageID)
    FROM   pagetags
    WHERE  TagID = 4 
 ORDER BY  PageID 
```

更喜欢最后一个，因为有超过 5 个连接，查询优化器通常会做出一些错误的决定。
如果您需要将它用于另一个聚合，那么它还没有用完 Group By。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T11:02:37.437

```
SELECT distinct(PageID)
FROM   pagetags
WHERE  TagID IN (1,2,4)
and PageID in
(select distinct(PageID) from pagetags group by PageID having count(TagID)=3)
group by PageID 
```

# objective-c - setStatusBarOrientation:animated: 在 iOS 6 中不工作

> ID：12563954
> 
> 赞同：6
> 
> 时间：2012-09-24T11:18:21.223
> 
> 标签：objective-c, cocoa-touch, ios6, uiinterfaceorientation, autorotate

当用户完成观看视频（它允许以横向模式查看）时，我使用此代码强制将方向更改回纵向，然后将视频视图控制器从导航控制器中弹出：

```
//set statusbar to the desired rotation position
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO];

//present/dismiss viewcontroller in order to activate rotating.
UIViewController *mVC = [[[UIViewController alloc] init] autorelease];
[self presentModalViewController:mVC animated:NO];
[self dismissModalViewControllerAnimated:NO];

[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

这工作完美，直到`iOS 5.1.1`。在另一篇文章中读到现在应该使用这些方法后，我什至尝试使用新的呈现/解雇方法：

```
[self presentViewController:mVC animated:NO completion:NULL];
[self dismissViewControllerAnimated:NO completion:NULL]; 
```

问题是它根本不起作用。在我将视频查看器旋转到横向然后弹出它之后，我的设置视图（表格视图控制器）又回来了，但也处于横向模式。

我什至尝试过[这里的提示](http://9to5mac.com/2012/06/25/apple-pushes-ios-6-0-update-to-devs/)

“该`setStatusBarOrientation:animated:`方法并未完全弃用。但它现在仅`supportedInterfaceOrientations`在最顶层全屏视图控制器的方法返回 0 时才有效。这将确保状态栏方向一致的责任交到调用者手中。”

所以我尝试设置一个标志来强制`supportedInterfaceOrientations`（`return 0`在调用上面的第一个代码块之前），但它也不起作用。

有人对此有解决方案吗？感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T19:52:08.390

`setStatusBarOrientation`方法改变了一些行为。根据苹果文档：

> setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:17:27.017

您的根视图控制器应该对该方法回答错误`shouldAutorotate`，以便您的应用程序响应`setStatusBarOrientation:animated`

来自 Apple 文档：“但是，如果您的应用程序具有可旋转的窗口内容，则不应使用此方法任意设置状态栏方向”

要理解这一点，在`shouldAutorotate`方法中放置一个断点，你会看到它在设置状态栏方向后被称为 juste。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:53:41.780

这是我修复的方法。

[https://stackoverflow.com/a/14530123/1901733](https://stackoverflow.com/a/14530123/1901733)

当前问题与上述网址中的问题相关联。

statusBarOrientation 在 ios6 中是一个真正的问题。

# java - 使用java将所有文件从文件夹移动到其他文件夹

> ID：12563955
> 
> 赞同：5
> 
> 时间：2012-09-24T11:18:21.177
> 
> 标签：java

> **可能重复：**
> [在 Java 中将文件从一个目录复制到另一个目录](https://stackoverflow.com/questions/1146153/copying-files-from-one-directory-to-another-in-java)

java - 如何使用java将所有文件从一个文件夹移动到另一个文件夹？我正在使用这段代码：

```
import java.io.File;

    public class Vlad {

        /**
         * @param args the command line arguments
         */
        public static void main(String[] args) {
            // TODO code application logic here
            // File (or directory) to be moved
            File file = new File("C:\\Users\\i074924\\Desktop\\Test\\vlad.txt");

            // Destination directory
            File dir = new File("C:\\Users\\i074924\\Desktop\\Test2");

            // Move file to new directory
            boolean success = file.renameTo(new File(dir, file.getName()));
            if (!success) {
                System.out.print("not good");
            }
        }
    } 
```

但它只适用于一个特定的文件。

谢谢！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T11:22:44.017

通过使用 org.apache.commons.io。**FileUtils**类

`moveDirectory(File srcDir, File destDir)` 我们可以移动整个目录

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-24T11:23:57.457

如果一个`File`对象指向一个文件夹，您可以遍历它的内容

```
File dir1 = new File("C:\\Users\\i074924\\Desktop\\Test");
if(dir1.isDirectory()) {
    File[] content = dir1.listFiles();
    for(int i = 0; i < content.length; i++) {
        //move content[i]
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-24T11:27:16.743

从 Java 1.7 开始，`java.nio.file.Files`它提供了处理文件和目录的操作。尤其是`move`,`copy`和`walkFileTree`函数您可能会感兴趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:22:59.260

*   您可以重命名目录本身。
*   您可以遍历目录中的文件并一一重命名。如果目录可以包含子目录，则必须递归执行此操作。
*   您可以使用[Apache FileUtils 之](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html)类的实用程序，它已经完成了所有这些工作。

# java - Java TCP 连接

> ID：12563963
> 
> 赞同：6
> 
> 时间：2012-09-24T11:19:14.250
> 
> 标签：java

如何在 Java 中创建 TCP 套接字？

我如何创建这样一个 TCP 连接，它只有在我告诉它时才会终止，否则它会保持打开状态？

我如何使用 keepalives 知道服务器或客户端是否仍然可用？

请帮忙！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T11:24:06.607

> 如何在 Java 中创建 TCP 套接字？

```
Socket socket = new Socket(hostname, port); 
```

[http://docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

> 我如何创建这样一个 TCP 连接，它只有在我告诉它时才会终止，否则它会保持打开状态？

它们将保持打开状态，直到您或另一端将其关闭。

> 我如何使用 keepalives 知道服务器或客户端是否仍然可用？

那取决于你。您可以发送不同的消息，其中一条是告诉另一端您还活着的心跳。

如果您要发送二进制消息，通常要做的事情是将长度作为无符号的 short 或 int 值发送。我使用“长度”为 0 的消息作为心跳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:24:40.293

类[java.net.Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)是您要搜索的。

# ios - 使用 UISlider 旋转图像？

> ID：12563964
> 
> 赞同：1
> 
> 时间：2012-09-24T11:19:17.310
> 
> 标签：ios, uiimageview

有什么方法可以根据 UISlider 的值旋转图像吗？我知道可以使用 Gestures 轻松执行旋转，但我必须使用 UISLider 执行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:23:47.477

只需使用：

```
imageView.transform = CGAffineTransformMakeRotation(slider.value * 2*M_PI / slider.maximumValue); 
```

# shell - 在 shell 中查找变量和函数内存地址

> ID：12563968
> 
> 赞同：0
> 
> 时间：2012-09-24T11:19:34.980
> 
> 标签：shell, memory, memory-address, function-address

在shell编程中，有没有办法找到变量和函数地址？当我们输出 &x 时，就像在 c 或 c++ 中一样，我们可以获得 x 内存地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:17:34.253

这取决于你想要什么。大多数 shell 只支持符号（或“软”）引用，即包含其他变量名称的变量。Korn shell 93 具有名称引用，使用 创建`typeset -n`，但地址未公开。看看那个`man ksh`，它可能会有所帮助。

但即使你能得到变量的内存地址，你会用它做什么呢？Shell 变量不像 C 语言那样以原始方式构造，因此指针算术是没有用的。您不能仅通过增加地址来遍历数组或字符串。您能做的最好的事情就是调查该特定 shell 的特定版本的内存。

由于 shell 大部分是用 C 编写的，因此您始终可以使用 debug ( `-g`) 编译 shell 源代码并使用调试器进行连接。不知道那会给你带来什么，所以我的问题必须是：为什么？

编辑; 从评论中我看到你想要堆栈大小 - 我很确定 shell 变量将在堆或环境块中分配。

# gwt - 在 Smart GWT 中获取选定的 SectionStack 部分

> ID：12563972
> 
> 赞同：3
> 
> 时间：2012-09-24T11:19:48.537
> 
> 标签：gwt, smartgwt, smartclient

我有一个**sectionStack**，其中**部分**是动态添加的，并且我已经向部分堆栈添加了一个处理程序。

单击 sectionStack 部分时，我想获取已单击部分的 id 或内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:36:50.867

SectionStackSection 有方法

```
String getID() 
```

这将返回一个字符串。

请参阅[JavaDoc](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/layout/SectionStackSection.html)

如果你想获得当前选择的 SectionStackSection 那么你应该通过添加一个 SectionHeaderClickHandler

`public HandlerRegistration addSectionHeaderClickHandler(SectionHeaderClickHandler handler)`

到 SectionStack。SectionHeaderClickEvent 将为您提供方法`getSection()`

请参阅[SectionHeaderClickEvent](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/layout/events/SectionHeaderClickEvent.html)

# html - 使用 jQuery 在 div 块之间/内部的移动设备上拖放/滚动，并阻止整个页面滚动

> ID：12563974
> 
> 赞同：1
> 
> 时间：2012-09-24T11:19:50.300
> 
> 标签：html, jquery-mobile, scroll, drag

情况：

1.  配备jquery、jquery mobile、jquery-ui.touch 和jquery.ui.touch-punch 的手机，后者使诸如拖放等相当多的东西可用于触摸屏。

2.  两个 div 块，用于将项目符号从一个可排序的 div 块拖到另一个可排序的 div 块中。

3.  在屏幕上，这两个块在视觉上是彼此相邻的，虽然不是最理想的，但因为项目符号在拖入另一个 div 块时会消失。然而它可以以某种方式被丢弃，因为之后子弹确实出现在目标 div 块中并消失在原始 div 块中。

4.  借助 css 选项溢出：自动，可以使滚动出现在两个块中以滚动项目符号列表。

问题：

1.  这些滚动有时有效，有时无效，因为在后一种情况下，要么整个页面开始滚动，要么（在单击本地 div 滚动条后）它开始放大到整个页面变得无用的级别/深度。
2.  在 Firefox Mobile 中，div 滚动条不可见，但有时可以滚动；在 Opera Mobile 中，div 滚动条可见，但在单击 div 滚动条后随机“深度”放大。
3.  尝试了互联网上提供的不同解决方案来阻止页面滚动或放大，但无济于事。一些“解决方案”使页面滚动被锁定，但是所有滚动都被锁定和/或拖动也被锁定。

问题：

有人对上述情况有任何经验或可以提供一些提示吗？我知道这是最前沿的，因为即使是 JQ/JQM（或任何其他框架？）目前还没有达到这一点，尽管他们正在努力。jquery.ui.touch-punch 是一个插件，虽然是实验性的，但它是迄今为止我所知道的唯一让拖放等可用于手机/触摸屏的方法。

非常感谢您！

# java - 如何在撒克逊解析器/xalon解析器中避免节点/元素的空格

> ID：12563977
> 
> 赞同：1
> 
> 时间：2012-09-24T11:20:10.103
> 
> 标签：java, xslt, xpath, saxon, xalan

我输入了如下代码段，

***输入片段：***

```
 <div class="a">
      <table>
        <col width="4" />
        <col width="8" />
        <col width="5" />
        <tbody>
          <tr>
            <td>ABC</td>
            <td>DEF </td>
            <td>GHI</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="x">

    <table>
        <col width="5" />
        <col width="8" />
        <col width="8" />
    <tbody>
          <tr>
            <td>ABC</td>
            <td>DEF </td>
            <td>GHI</td>
          </tr>
        </tbody> 
```

我目前在**div class="a"**标记内的**table**中，我想检查紧随其后的兄弟是**div**并且它的第一个孩子是**table**或什么都没有。我编写了以下 XPath ：.******`./../following-sibling::div[1]/node()[1] ) = 'table'`******

 ******我在**altova XMLSpy**中得到了预期的输出，但在**saxon 解析器**中没有给出准确的输出，因为 and 之间有一些空格`<div>`，`<table>`并且该空格被视为文本节点。

如何避免标签之间的空格，或者有没有其他解决方案？

片段代码：

```
<xsl:choose>

<xsl:when local-name(./../following-sibling::div[1]/node()[1] ) = 'table' ">    
  loagic-1
</xsl:when>
<xsl:otherwise>
logic-2 
  </xsl:otherwise>

</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:28:32.270

你需要使用

```
<xsl:strip-space elements="*"/> 
```

在样式表的顶层，告诉它在解析时忽略纯空格文本节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:07:58.423

虽然伊恩的回答是正确的，但更清洁的解决方案是......

```
<xsl:when test="../following-sibling::div[1]/*[1]/self::table"> 
```

此外，如果您不关心 div 与其子表之间的任何干预元素，则可以简化为...

```
<xsl:when test="../following-sibling::div[1]/table"> 
```******

# iphone - 在 UISplitView iphone 中重新加载 MasterView

> ID：12563981
> 
> 赞同：0
> 
> 时间：2012-09-24T11:20:37.990
> 
> 标签：iphone, ios, uisplitview

我正在研究 UISplitView ，我在 detailViewController 中有一个按钮，我想要单击按钮。显示 MasterViewController 并重新加载 MasterViewController 的表数据。

怎么可能，请给我帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:22:02.133

请浏览以下链接，我希望他们能提供一些解决方案....

[刷新 UISplitView 控制器的主 TableView](https://stackoverflow.com/questions/8065849/refreshing-master-tableview-of-a-uisplitview-controller)

[从 DetailView 重新加载 MasterView 中的数据](https://stackoverflow.com/questions/6479780/reloaddata-in-masterview-from-detailview)

# qt - 在透明的 qt 小部件上画一条线

> ID：12563983
> 
> 赞同：1
> 
> 时间：2012-09-24T11:20:43.107
> 
> 标签：qt, qpainter

我想实现这一点：

1.  具有一定宽度和高度的透明表面（透明小部件）
2.  在这个表面上画一些东西，这样在屏幕上只能看到那个图形的轮廓，没有其他东西（我正在绘制的表面的背景不应该在那里）

我制作了一个小部件并实现了使其透明，如下所示：

```
window.setAttribute( Qt::WA_TranslucentBackground);
window.setWindowFlags (Qt::FramelessWindowHint);
window.setGeometry( 0,0,1200, 800 );
window.show(); 
```

然后我覆盖了函数paintEvent(QPaintEvent *); 使用 QPainter 制作椭圆。

但表面仍然只是黑色。有人可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:11:14.633

看起来与我在类似应用程序中所做的相似，但我也做了：

```
window.setAutoFillBackground(false); 
```

也许这就是你所缺少的？

**编辑：**另一个想法：在您的中，您是否在绘制椭圆之前用完全透明的颜色`paintEvent`填充小部件？`rect()`

# php - 错误处理加载 URL

> ID：12563985
> 
> 赞同：0
> 
> 时间：2012-09-24T11:20:44.967
> 
> 标签：php, error-handling, simple-html-dom

我正在使用一个名为 Simple HTML DOM 的库

其中一种方法是将 url 加载到 DOM 对象中：

```
function load_file()
{
    $args = func_get_args();
    $this->load(call_user_func_array('file_get_contents', $args), true);
    // Throw an error if we can't properly load the dom.
    if (($error=error_get_last())!==null) {
        $this->clear();
        return false;
    }
} 
```

为了测试错误处理，我创建了以下代码：

```
include_once 'simple_html_dom.php';
function getSimpleHtmlDomLoaded($url)
{
  $html = false;
  $count = 0;
  while ($html === false && ($count < 10)) {
    $html = new simple_html_dom();
    $html->load_file($url);
    if ($html === false) {
      echo "Error loading url!\n";
      sleep(5);
      $count++;
    }
  }
  return $html;
}

$url = "inexistent.html";
getSimpleHtmlDomLoaded($url); 
```

这段代码背后的想法是，如果 url 无法加载，则再次尝试，如果 10 次尝试仍然失败，它应该返回 false。

但是，如果 url 不存在，load_file 方法似乎永远不会返回 false。

相反，我收到以下警告消息：

> PHP 警告：file_get_contents(inexisten.html)：无法打开流

知道如何解决这个问题吗？

注意：最好我想避免入侵图书馆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:34:40.780

更改以下代码：

```
$html->load_file($url);
if ($html === false) { 
```

对于这个：

```
$ret = $html->load_file($url);
if ($ret === false) { 
```

因为您正在检查对象实例而不是方法的返回值`load_file()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:23:50.857

通过在方法调用之前添加 @ 符号，任何警告都会被抑制。如果您使用它，请务必像现在一样自己检查错误，并确保没有其他方法可以确保不会弹出警告和/或错误。

您应该检查由 load() 方法保存在某处的实际数据，如果它等于 FALSE 而不是对象实例 $html。

# android - 小部件在三星 Galaxy S3 上丢失 onClickPendingIntent

> ID：12563987
> 
> 赞同：2
> 
> 时间：2012-09-24T11:20:50.293
> 
> 标签：android, widget, samsung-mobile

我使用正常的例程来制作可点击的小部件视图：

```
 Intent intent = new Intent(context, OnOff_screen.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId); // Identifies the particular widget...
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        // Make the pending intent unique...
        Uri data = Uri.withAppendedPath(
            Uri.parse(Intent.URI_INTENT_SCHEME + "://widget/id/"),
            String.valueOf(widgetId));
        intent.setData(data);

        PendingIntent pendIntent = PendingIntent.getActivity(context, 0,
            intent, PendingIntent.FLAG_UPDATE_CURRENT);

        //start the activity when clicking on the view
        views.setOnClickPendingIntent(R.id.tc_logo, pendIntent); 
```

虽然这适用于所有手机，但仅在三星 Galaxy S3 上，小部件在大约 20 分钟左右后不会对任何点击做出反应。

安装小部件后，S3 上的一切都正常。

但是只需等待大约 20 分钟或因此不再触发视图的点击 - 好像视图只是失去了 setOnClickPendingIntent。

再次安装小部件后，一切都会再次运行 - 但大约 20 分钟后再次失去可点击性。

这仅适用于三星 Galaxy S3 - 所有其他设备都可以。

ps 我还发现其他一些小部件（例如三星本身的时钟）只是停止并且不再更新。

S3 有什么特别之处会破坏小部件功能？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:04:42.370

...最后我们发现这个问题的原因是三星在使用的版本的 Android 实现中出现了错误。感谢三星的惊人支持，我们可以确认这个问题，三星承诺在下一次更新中解决这个问题！

# php - 正则表达式匹配并替换多个字符串

> ID：12563989
> 
> 赞同：4
> 
> 时间：2012-09-24T11:20:57.213
> 
> 标签：php, regex

我有这个：

```
$only_left_pattern = '/[^-{]\bleft\b/';
$subject = 'body {left: 24px;}\n p {right:30px;}';
$subject = preg_replace($only_left_pattern, 'right', $subject);
echo $subject; 
```

我需要为要匹配的每个字符串声明一个模式。如果有办法我可以左右匹配并据此替换？示例（我脑海中的语法）：

```
$right_left_pattern = '/[^-{](\bleft\b|\bright\b/)';

// if you found left replace with right, if you found right replace with left
// acrording to the order in the pattern
$subject = preg_replace($only_left_pattern, right|left, $subject); 
```

我在问我是否可以使用 PHP 或仅使用正则表达式来执行类似我的示例的操作。

我尝试了戴夫的解决方案

```
$pattern = array('/[^-{]\bleft\b/','/[^-{]\bright\b/');
$replace = array('right','left');
$subject = 'body {left: 24px;} p {right: 24px;}';
$subject = preg_replace($pattern, $replace, $subject);
echo $subject; 
```

但它不起作用，我测试了`regex`not as 数组并且它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T17:30:51.147

第一个问题是你的正则表达式。你有`[^-{]`这意味着你正在检查一个不以 a`-`或 a开头`{`但因为`{left:`以 a开头的字符串，`{`所以匹配忽略它。我想你想说的只是替换这个词`left`。要仅替换字符串的一部分，您需要使用这样的反向引用：

```
$pattern = '/([-{]\b)(left)(\b)/';
$replace = '$1right$3';
$subject = 'body {left: 24px;} p {right: 24px;}';
$subject = preg_replace($pattern, $replace, $subject);

// result: body {right: 24px;} p {right: 24px;}
echo $subject; 
```

注意 . 中的括号`$pattern`。那就是将这些部分组合在一起。还要注意`$n`. `$replace`第一个括号组`([-{]\b)`是`$1`，第二个`(left)`是`$2`，第三个`(\b)`是`$3`。

现在解决了替换左->右的问题，但是您不能按照建议执行数组，因为这会发生：

```
body {left: 24px;} p {right: 24px;}

Step 1: replace left pattern
body {right: 24px;} p {right: 24px;}

Step 2: replace right pattern
body {left: 24px;} p {left: 24px;} 
```

哎呀！现在你已经全部离开了。这不是很有帮助。你真正想要的是`preg_replace_callback`。`preg_replace_callback`将为每个匹配运行一个用户定义的函数。所以我们要做的是一次性找到所有的左和右，然后在我们的函数中我们交换左/右并返回它加上原始字符串，如下所示：

```
function replaceLeftRight($matches) {
    // get the opposite left/right
    $leftRight = ($matches[2] == 'left') ? 'right' : 'left';
    return $matches[1] . $leftRight . $matches[3];
}   

$pattern = '/([-{]\b)(left|right)(\b)/';
$subject = 'body {left: 24px;} p {right: 24px;}';    
$subject = preg_replace_callback($pattern, 'replaceLeftRight', $subject);

// result: body {right: 24px;} p {left: 24px;}
echo $subject; 
```

# iphone - 如何将 nsmutable 数组添加到 sqlite 数据库表中

> ID：12563996
> 
> 赞同：0
> 
> 时间：2012-09-24T11:21:22.607
> 
> 标签：iphone, ios, sqlite, nsmutablearray

如何将 nsmutablearray 添加到 sqlite 数据库表中？谁能帮我编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:45:56.497

您可以使用 ：

```
 for (int i = 0; i < [mutArray count]; i++)
    {
       NSString *string = [mutArray objectAtIndex:i];
       // insert query
       insert into table_name ('string') values(column_name);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:25:37.170

使用**循环控件**对数组进行排序并插入每个值

**例子：**

```
for(int itemIndex = 0; itemIndex < [yourArray count];itemIndex++){

     NSString *myname = [yourArray objectAtIndex:itemIndex];

    //insert myname to database.

} 
```

**要检索**，您可以使用以下代码示例

```
 if(sqlite3_open([path UTF8String], &dataBase) == SQLITE_OK)
        {
            NSString *query = [NSString stringWithFormat:@"select name from syncTable where Crc = %d",crc];         const char *sql = [query UTF8String];
            sqlite3_stmt *statement;
            if (sqlite3_prepare(dataBase, sql, -1, &statement, NULL) == SQLITE_OK)
            {
                char *name;
                unsigned int value;
                while(sqlite3_step(statement) == SQLITE_ROW)
                {
                    name = (char *)sqlite3_column_text(statement, 0);   
                    [yourArray addObject:[NSString stringWithUTF8String:name]];

                }
                sqlite3_finalize(statement);
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:24:39.560

这是在 iphone 上使用 sqlite 的教程列表。它不是模拟器或设备的问题。它也适用于模拟器。

正确创建您的数据库结构并根据[本](http://mobileorchard.com/iphone-sqlite-tutorials-and-libraries/)教程工作。

或者

如果您希望在 iPhone OS 上使用数据库，我建议您使用 Core Data。

[本](http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/)教程应该非常适合您的应用程序。请询问是否还有其他问题。

# ios - performBatchUpdates 上的 UICollectionView 性能问题

> ID：12563997
> 
> 赞同：7
> 
> 时间：2012-09-24T11:21:25.453
> 
> 标签：ios, performance, ios6, uicollectionview

我们正在尝试使用自定义布局设置 UICollectionView。每个 CollectionViewCell 的内容将是一个图像。总体而言，将有数千张图像，并且在某个特定时间可以看到大约 140-150 张图像。在一个动作事件上，所有单元格的位置和大小都可能重新组织。目标是为当前使用 performBatchUpdates 方法的所有移动事件设置动画。这会导致所有内容都被动画化之前的巨大延迟时间。

到目前为止，我们发现内部方法 layoutAttributesForItemAtIndexPath 为每个单元格（总共数千个）调用。此外，调用 cellForItemAtIndexPath 方法的单元格比实际显示在屏幕上的单元格多。

有没有可能提高动画的性能？

* * *

默认的 UICollectionViewFlowLayout 并不能真正提供我们想要在应用程序中实现的那种设计。这是我们的一些代码：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
RPDataModel *dm = [RPDataModel sharedInstance]; //Singleton holding some global information
NSArray *plistArray = dm.plistArray; //Array containing the contents of the cells
NSDictionary *dic = plistArray[[indexPath item]];
RPCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CELL" forIndexPath:indexPath];
cell.label.text = [NSString stringWithFormat:@"%@",dic[@"name"]];
cell.layer.borderColor = nil;
cell.layer.borderWidth = 0.0f;
[cell loadAndSetImageInBackgroundWithLocalFilePath:dic[@"path"]]; //custom method realizing asynchronous loading of the image inside of each cell
return cell;
} 
```

layoutAttributesForElementsInRect 遍历所有元素，为矩形内的所有元素设置 layoutAttributes。for 语句在第一个单元格超出矩形右下角定义的边界时中断：

```
-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect {
NSMutableArray* attributes = [NSMutableArray array];
RPDataModel *dm = [RPDataModel sharedInstance];
for (int i = 0; i < dm.cellCount; i++) {
    CGRect cellRect = [self.rp getCell:i]; //self.rp = custom object offering methods to get information about cells; the getCell method returns the rect of a single cell
    if (CGRectIntersectsRect(rect, cellRect)) {
        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:[dm.relevanceArray[i][@"product"] intValue] inSection:0];
        UICollectionViewLayoutAttributes *attribute = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
        attribute.size = cellRect.size;
        attribute.center = CGPointMake(cellRect.origin.x + attribute.size.width / 2, cellRect.origin.y + attribute.size.height / 2);
        [attributes addObject:attribute];
    } else if (cellRect.origin.x > rect.origin.x + rect.size.width && cellRect.origin.y > rect.origin.y + rect.size.height) {
        break;
    }
}
return attributes;
} 
```

在布局更改时，无论 layoutAttributesForElementsInRect 中定义的单元格数量是否有限，结果都几乎相同。如果系统没有限制，系统要么获取其中所有单元格的布局属性，要么调用所有缺失单元格的 layoutAttributesForElementAtIndexPath 方法（如果它是有限的）。总体而言，每个单元格的属性都在以某种方式使用。

```
-(UICollectionViewLayoutAttributes*)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath {
RPDataModel *dm = [RPDataModel sharedInstance];
UICollectionViewLayoutAttributes *attribute = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
CGRect cellRect = [self.rp getCell:[dm.indexDictionary[@(indexPath.item)] intValue]];
attribute.size = cellRect.size;
attribute.center = CGPointMake(cellRect.origin.x + attribute.size.width / 2, cellRect.origin.y + attribute.size.height / 2);
return attribute;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T23:03:39.053

Without seeing code, my guess is that your layoutAttributesForElementsInRect method is iterating through all of the items in your collection, and that is, in turn, what is causing the other methods to get over-called. layoutAttributesForElementsInRect is giving you a hint - that is, the CGRect it is passing to you - about which items you need to call layoutAttributesForItemAtIndexPath for, in terms of what is on the screen.

So that may be part of the performance issue - that is, tuning your custom layout so it is being smart about which items it is updating.

其他问题通常与动画性能有关。需要注意的一件事是是否正在进行任何类型的合成 - 确保您的图像是不透明的。另一件事是，如果您在图像上使用阴影，那么制作动画可能会很昂贵。提高阴影动画性能的一种方法是在调整图像大小时设置 shadowPath 值 - 如果您确实有阴影，请告诉我并发布一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:59:23.670

这似乎是由于尝试将单元格添加到具有标题视图但其中没有单元格的部分所致。

该错误消息非常无用，并且需要花费几个小时的努力才能找到它。