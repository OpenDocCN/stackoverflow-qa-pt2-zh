# StackOverflow 问答 16094000-16094999

# java - Applet 未将变量从 init 方法传送到 paint 方法

> ID：16094004
> 
> 赞同：0
> 
> 时间：2013-04-18T22:15:40.603
> 
> 标签：java, variables, applet, scope, init

这是我班级的一个小程序。为什么我的最终 g.drawString 为我在其中的所有变量打印 0？

```
import javax.swing.*;
import java.awt.*;

public class Days extends JApplet
{
private int month;

private int  day; 

private int  year_string,

private int total_days;

private int month_days;

public final int minMonth = 1; 

public final int maxMonth = 12; 

public final int minDay = 1; 

public final int maxDay = 31; 

public final int minYear = 1000; 

public final int maxYear = 2999;

public void init()
  {
    String month_string,
           day_string,
           year_string;

    month_string = JOptionPane.showInputDialog("Enter the month (" + minMonth +
                                               "-" + maxMonth + ")");
    day_string   = JOptionPane.showInputDialog("Enter the day (" + minDay +
                                               "-" + maxDay + ")");
    year_string  = JOptionPane.showInputDialog("Enter the year (" + minYear +
                                               "-" + maxYear + ")");
     int month = Integer.parseInt( month_string );
     int day = Integer.parseInt( day_string );
     int year = Integer.parseInt( year_string );

    switch (month){
      case 1: 
              month_days = 0;
                 break;
      case 2: 
              month_days = 31;
                 break;
      case 3: 
              month_days = 59;
                 break;
      case 4: ;
              month_days = 90;
                 break;
      case 5: 
              month_days = 120;
                 break;
      case 6: 
              month_days = 151;
                 break;
      case 7: 
              month_days = 181;
                 break;
      case 8: 
              month_days = 212;
                 break;
      case 9: 
              month_days = 243;
                 break;
      case 10: 
              month_days = 273;
                 break;
      case 11:
               month_days = 304;
                  break;
      case 12: 
               month_days = 334;
                  break;        

        }

     int total_days = month_days + day;
  }

  public void paint(Graphics g)
  {

     g.drawString("The number of days from the beginning of " + year_string + " to " + month + "/" + day + "/" + year_string +
                  "= " + total_days, 40, 30);

    showStatus("Alex Collins");
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:16:11.967

发布的源不在这里编译。修复编译错误后，问题似乎在于变量被声明为类属性以及方法的本地属性。本地声明的属性正在“遮蔽”我们需要的另一个属性，但在声明它的方法结束时消失（超出范围）。

注意：

1.  Applet 比（基于框架的）应用程序更难开发和调试。
2.  应用程序比命令行应用程序更难编码。
3.  变量范围是 Java 101，应该在命令行应用程序中进行排序。

这是小程序的工作版本。

```
import javax.swing.*;
import java.awt.*;

public class Days extends JApplet
{
private int month;
private int  day;
private String  year_string;
private String  month_string;
private String  day_string;
private int total_days;
private int month_days;
public final int minMonth = 1;
public final int maxMonth = 12;
public final int minDay = 1;
public final int maxDay = 31;
public final int minYear = 1000;
public final int maxYear = 2999;

public void init()
  {
    month_string = JOptionPane.showInputDialog("Enter the month (" + minMonth +
                                               "-" + maxMonth + ")");
    day_string   = JOptionPane.showInputDialog("Enter the day (" + minDay +
                                               "-" + maxDay + ")");
    year_string  = JOptionPane.showInputDialog("Enter the year (" + minYear +
                                               "-" + maxYear + ")");
     int month = Integer.parseInt( month_string );
     int day = Integer.parseInt( day_string );
     int year = Integer.parseInt( year_string );

    switch (month){
      case 1:
              month_days = 0;
                 break;
      case 2:
              month_days = 31;
                 break;
      case 3:
              month_days = 59;
                 break;
      case 4: ;
              month_days = 90;
                 break;
      case 5:
              month_days = 120;
                 break;
      case 6:
              month_days = 151;
                 break;
      case 7:
              month_days = 181;
                 break;
      case 8:
              month_days = 212;
                 break;
      case 9:
              month_days = 243;
                 break;
      case 10:
              month_days = 273;
                 break;
      case 11:
               month_days = 304;
                  break;
      case 12:
               month_days = 334;
                  break;

        }
     total_days = month_days + day;
  }

  public void paint(Graphics g)
  {
     g.drawString("The number of days from the beginning of " + year_string + " to " + month + "/" + day + "/" + year_string +
                  "= " + total_days, 10, 30);
    showStatus("Alex Collins");
  }
} 
```

# c - 可以按值将数组传递给递归函数吗？

> ID：16094009
> 
> 赞同：2
> 
> 时间：2013-04-18T22:16:04.560
> 
> 标签：c, arrays, recursion

我想编写一个递归函数来构建问题的所有可能解决方案。我在想我应该传递一个数组，然后在每个递归步骤中，将它设置为该递归步骤中可能的所有值，但后来我开始想知道这是否可能，因为 C 通过传递一个指针来传递一个数组。你通常如何处理这个问题？

我正在考虑这些方面的事情。根据选择的路径，该数组将采用许多不同的值。我猜我们真正想要的是按值传递数组。

```
recFunc(int* array, int recursiveStep) {
    for (int i = 0; i < a; i++) {
        if (stopCondition) {
            doSomething;    
        }
        else if (condition) {
            array[recursiveStep] = i;
            recFunc(array, recursiveStep+1);        
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:18:58.780

您可以通过将数组粘贴到结构中来按值传递数组：

```
struct foo { int a[10]; };

void recurse(struct foo f)
{
    f.a[1] *= 2;
    recurse(f);    /* makes a copy */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:19:23.760

如果您需要按值传递，您总是可以将您的数组包装成一个结构并传递它。请记住，您现在包含的结构数组仍然需要足够大以处理所有情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T22:20:05.767

将其包装在一个结构中。

```
typedef struct arr_wrp {
    int arr[128]; // whatever
} arr_wrp;

void recFunc(arr_wrp arr, int step) {
    // do stuff, then
    arr.arr[step] = i;
    recFunc(arr, step + 1);
} 
```

# python - 带有 IE 的 mp3 的 jPlayer 问题：有什么建议吗？

> ID：16094012
> 
> 赞同：0
> 
> 时间：2013-04-18T22:16:16.343
> 
> 标签：python, django, internet-explorer, mp3, jplayer

我有一个 django 网站，可以使用 jPlayer 收听 mp3 文件。

它在 Chrome、Firefox 和 Opera 上运行良好。不幸的是，它在 IE9 中不起作用。但是，使用 django 开发服务器在本地运行站点时可以。

有什么事情吗，我应该在服务器端小心。我检查过 jPlayer.swf 在服务器上。还要别的吗？

有什么调试这个问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:51:47.827

快速搜索会发现关于 jPlayer 和 IE9 的类似问题。你以前看过这个q/a吗？

[IE9 中的 JPlayer 问题](https://stackoverflow.com/questions/6175417/jplayer-issue-in-ie9)<--

它可以像 .htaccess 修复一样简单。格拉西亚斯。

# mongodb - Mongo中副本集之间的安全/授权

> ID：16094013
> 
> 赞同：2
> 
> 时间：2013-04-18T22:16:18.843
> 
> 标签：mongodb, set

我在 Mongo 中设置了 3 个节点作为副本集。一切都很好，但是当我启用授权时，我不知道如何让他们进行交流。

*   我让他们都复制得很好
*   我在辅助服务器的 mongod.conf 中启用 auth=true

我遇到以下问题：

```
 "_id" : 2,
                    "name" : "50.17.?.?:27017",
                    "health" : 0,
                    "state" : 6,
                    "stateStr" : "(not reachable/healthy)",
                    "uptime" : 0,
                    "optime" : {
                            "t" : 1366321962,
                            "i" : 1
                    },
                    "optimeDate" : ISODate("2013-04-18T21:52:42Z"),
                    "lastHeartbeat" : ISODate("2013-04-18T22:04:52Z"),
                    "lastHeartbeatRecv" : ISODate("1970-01-01T00:00:00Z"),
                    "pingMs" : 81,
                    "authenticated" : false,
                    "syncingTo" : "54.244.?.?:27017" 
```

当我通过将其设置为 false 来禁用身份验证时，它显然可以工作。现在我可能对此很陌生，但并不愚蠢。我知道它无法连接，因为我启用了授权。但是，一个人究竟会在哪里配置主节点以与 auth=true 辅助节点同步呢？或者是否有任何其他解决方案关于如何在强制客户端需要授权的同时启用副本集之间的通信> 我到处寻找无济于事。

如果不可能，除了仅使用防火墙之外，还有什么替代授权的方法？如果有人通过 IP 破坏受信任的系统怎么办。我不希望他们能够在没有密码的情况下连接到辅助服务器或主服务器。例如，如果我的办公室被入侵并且 mongo 主节点信任我们的办公室 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:35:19.603

感谢 Asya 和我在下面找到的文章，我能够允许用户授权，并且还可以让副本与密钥文件通信（在所有副本之间共享）。强调您不能像其他一些 RDBMS 的工作方式那样让副本与用户进行通信。

您必须记住对文件进行 chmod，否则 mongod 实例将不会开始说密钥文件“太开放”。它试图保护您免受向非必要 linux 用户/组显示的密钥。您还必须确保您对 mongod（在我的情况下）用户。

[Mongodb KeyFile 太开放权限](https://stackoverflow.com/questions/14789622/mongodb-keyfile-too-open-permissions)

# sql - 从 SQL 中消除额外数据

> ID：16094018
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:17:37.293
> 
> 标签：sql

所以我有一个 SQL 数据库，其中有一个表，其中有一个名为 City 的列：

一些命名的城市是这样的：

```
德克萨斯州休斯顿
加利福尼亚州旧金山
```

我想从城市中删除列和州的缩写，以便它们像这样列出：

```
休斯顿
旧金山
```

是否有可以完成此操作的 SQL 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:20:27.333

假设 MySQL：

```
SELECT SUBSTRING_INDEX('San Francisco, CA', ',', 1) 
```

替换`San Francisco, CA`为您的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:22:27.967

假设 SQL Server：

```
SELECT LEFT('San Francisco, CA', CHARINDEX(',', 'San Francisco, CA')-1) 
```

替换`San Francisco, CA`为您的列名。

# r - data.table::fread 和不平衡"

> ID：16094025
> 
> 赞同：4
> 
> 时间：2013-04-18T22:18:15.993
> 
> 标签：r, data.table, fread

当我尝试使用 读取 csv 文件`data.table:fread(fn, sep='\t', header=T)`时，它给出了“在这一行上观察到的不平衡”错误。数据有 3 个整数变量和 1 个字符串变量。csv 文件中的字符串没有用 括起来`"`，是的，有一些包含`"`在字符串变量中的行并且`"`字符不是成对的。

我想知道是否可以让`fread`忽略`"`变量中的未配对并继续读取数据？谢谢。

这是示例数据（只有一条记录）

```
N_ID    VISIT_DATE  REQ_URL REQType
175931  2013-3-8 23:40:30   http://aaa.com/rest/api2.do?api=getSetMobileSession&data={"imei":"60893ZTE-CN13cd","appkey":"android_client","content":"Z0JiRA0qPFtWM3BYVltmcx5MWF9ZS0YLdW1ydXoqPycuJS8idXdlY3R0TGBtU   1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:46:16.013

**UPDATE: Now implemented in v1.8.11**

From NEWS :

> fread now accepts quotes (both ' and ") in the middle of fields, whether the field starts with " or not, rather than the 'unbalanced quotes' error, #2694\. Thanks to baidao for reporting. It was known and documented at the top of ?fread (text now removed). If a field starts with " it must end with " (necessary if the field separator itself is in the field contents). Embedded quotes can be in column names too. Newlines (\n) still can't be in quoted fields or quoted column names, yet.

* * *

Yes as @agstudy said, embedded quotes are a known documented problem not yet implemented since `fread` is new. Strictly speaking, I suppose these ones aren't embedded because the string in your example doesn't start with a quote, though.

Anyway, I've filed this as a bug report so it doesn't get forgotten. To be done in the next release. Thanks for highlighting.

[#2694 : Strings including quotes but not starting with quote in fread](https://r-forge.r-project.org/tracker/?group_id=240&atid=975&func=detail&aid=2694)

# java - 你如何在java中解析/转换（不确定术语）未知数据类型

> ID：16094030
> 
> 赞同：0
> 
> 时间：2013-04-18T22:18:51.530
> 
> 标签：java

我敢肯定，这已经被问了一百万次了，但是就这样吧。

我试图在java中获取一个字符串值并解析或转换，我不确定这个术语，它是适当的数据类型。我尝试了很多搜索，但我找不到可能是我不知道正确术语的答案。我出现的所有搜索都涉及使用诸如 XML 或自动装箱之类的东西，这与我想要的东西并不接近。

例如，用户输入可能是 int、char 或 double（例如 12.0），但它在代码中被捕获为字符串。可以这么说，我如何将它放入正确的桶中？我不知道为什么我找不到一个简单的答案。

编辑：我了解下面的 Integer.parseInt() 等，但我想知道如何在运行时通过使用 switch 或 if-else 语句检查适当的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:43:11.133

如果用户在键盘上输入一些东西，它是一个字符序列，即一个字符串，所以这就是你得到的。现在，可以将该字符串解释为数字、URL 或任何其他类型。

如果您知道期望什么样的输入，您可以使用该特定类型的解析函数，例如`Integer.parseInt(String)`.

但是，没有通用的方法来回答“这个字符串代表什么类型”这个问题，因为可能性是无限的。字符串“1”可能旨在表示一个整数，或者它可能只是一个字符串，或者它可能是一个表示 unix 纪元后一毫秒的日期。

如果您将自己限制为几种不同的可能性，您当然可以编写一个函数`Object parse(String)`，将字符串转换为具有不重叠字符串表示的几种可能类型之一 - 例如 Integer、Float、Double、Bool、Date（带有特定格式）或如果没有匹配项则回退到字符串。但是，这很少有用，并且您需要支持的类型范围很可能仍然取决于您的应用程序，因此您仍然必须推出自己的解决方案。它可能看起来像这样：

```
Object myParse(String str) {
    try {
        return Integer.valueOf(str);
    } catch(NumberFormatException e) {
        // Not an Integer, try the next one
    }

    try {
        return Double.valueOf(str);
    } catch(NumberFormatException e) {
        // Not a Double, try the next one
    }

    try {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        return sdf.parse(str);
    } catch(ParseException e) {
        // Not a Date in format yyyy-MM-dd
    }

    throw new IllegalArgumentException("No matching format found.");
} 
```

最后，您的 String 输入可能是已知的 contianer 格式，它表示值的类型及其字符串表示形式 - 例如对于 XML 格式：`<Integer>1</Integer>`. 这将允许您从字符串中获取明确键入的值，但它确实要求字符串遵循特定的容器格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:30:14.653

> 用户输入可以是 int、char 或 double，例如 12.0。

如果输入确实是未知的，那么您将在转换输入时遇到问题。例如，“1”（不带引号）是 char 还是 int？

每种输入类型都有自己的转换。例如：

```
String s = "test string";

char c = s.charAt(0);
int i = Integer.parseInt(s);
double d = Double.parseDouble(s); 
```

如果字符串分别不是 int 或 double，您将获得 NumberFormatException。

# f# - 具有多个数据库的 F# 数据提供程序

> ID：16094033
> 
> 赞同：3
> 
> 时间：2013-04-18T22:19:04.700
> 
> 标签：f#, f#-3.0

我按照[http://msdn.microsoft.com/en-CA/library/hh361039.aspx](http://msdn.microsoft.com/en-CA/library/hh361039.aspx)上的说明执行数据库查询。

我想加入来自不同数据库（相同实例）的表。教程中的示例

```
SqlMetal.exe /sprocs /dbml:C:\destpath\MyDatabase.dbml /server:SERVER\INSTANCE /database:MyDatabase 
```

不提供此类选项。

这可以用 F# 完成还是我必须使用不同的工具集（C# + dapper）来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:11:45.530

也许[Tranq](https://github.com/nakamura-to/Tranq)是要走的路。我会在我的下一个项目中尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T13:11:43.597

我不认为 Entity Framework 会让你跨越多个数据库；但是，如果它仅用于少量数据，则可以通过在主数据库中使用从其他数据库中选择数据的视图来实现这一点。

# c# - 将字符串作为数组访问，检查索引的值并可能更改该索引中的字符

> ID：16094037
> 
> 赞同：3
> 
> 时间：2013-04-18T22:19:26.777
> 
> 标签：c#, .net, string

我一直在尝试读取一个字符串，然后为每个字符一个接一个地运行一个随机数，如果生成 5，然后将字符从 1 更改为 0，反之亦然。我觉得我快到了这是我的第三次尝试，但是我在写入索引时遇到了一点问题，因为它告诉我它是只读的。这是我的代码：

```
string mutate = "1010";

for (int i = 0; i < 4; i++)
{
    int MutProbablity = random.Next(1, 1000);
    if (MutProbablity == 5)
    {
        if (mutate[i] == '0')
        {
            mutate[i] = '1';
        }
        else if (mutate[i] == '1')
        {
            mutate[i] = '0';
        }
    }
} 
```

这是我的错误：

> `string.this[int]`无法将属性或索引器“ ”分配给 -- 它是只读的

有人可以告诉我如何解决这个问题，或者建议一种不同的方式来实现我的目标吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T22:21:25.900

.NET 中的字符串是不可变的，因此您将无法修改任何字符，但您可以通过首先将其转换`char[]`为可变的 a 来实现您的目标。

像这样：

```
var chars = mutate.ToCharArray();     // convert to char[]
for (int i = 0; i < 4; i++)
{
    int MutProbablity = random.Next(1, 1000);
    if (MutProbablity == 5)
    {
        if (chars[i] == '0')
        {
            chars[i] = '1';
        }
        else if (chars[i] == '1')
        {
            chars[i] = '0';
        }
    }
}

mutate = new String(chars);    // convert to back to string 
```

另一种方法是使用 Linq（以及一个公认的*非常*丑陋的三元运算符字符串）。

```
var new string(mutate.Select(c => 
    (random.Next(1, 1000) == 5) ? ((c == '0') ? '1' : (c == '1') ? '0' : c) : c).ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:24:40.557

尝试使用[StringBuilder](http://msdn.microsoft.com/it-it/library/system.text.stringbuilder.aspx)

它提供了单个字符更改，以及更多有用的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T22:31:02.017

您的`mutate`字符串是否仅由 0 和 1 组成？
StringBuilder 可用于更改字符串中的单个字符

```
Random r = new Random();
StringBuilder b = new StringBuilder("0101");
for (int i = 0; i < 4; i++)
{
    int MutProbablity = r.Next(1, 1000);
    if (MutProbablity == 5)
    {
        b[i] = (b[i] == '0' ? '1' : '0');
    }
}
Console.WriteLine(b.ToString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T22:43:50.797

如前所述，字符串是不可变的，但类`StringBuilder`实际上是可变字符串。使用 StringBuilder 作为后备存储创建自定义类，大致如下：

```
class MyMutableString
{
  private StringBuilder backingStore ;
  private string        currentValue ;
  public MyMutableString()
  {
    this.backingStore = new StringBuilder() ;
    this.currentValue = this.backingStore.ToString() ;
    return ;
  }
  public MyMutableString( string initialValue )
  {
    this.backingStore = new StringBuilder( initialValue ) ;
    this.currentValue = this.backingStore.ToString() ;
  }

  public string Value
  {
    get
    {
        return this.currentValue ;
    }
    set
    {
      this.backingStore.Length = 0 ;
      this.backingStore.Append( value ) ;
      this.currentValue = this.backingStore.ToString() ;
    }
  }

  public void Mutate( int mutationThreshold , Dictionary<char,char> mutations )
  {
    int probability = GetNextRandomValue() ;
    if ( probability == mutationThreshold )
    {
      int replacementsMade = 0 ;
      for ( int i = 0 ; i < this.backingStore.Length ; ++i )
      {
        char c = this.backingStore[i] ;
        char r ;
        bool mutate = mutations.TryGetValue(c, out r ) ;
        if ( mutate )
        {
           this.backingStore[i] = r ;
           ++replacementsMade ;
        }
      }
      this.currentValue = this.backingStore.ToString() ;
    }
    return ;
  }

  private static readonly Random random = new Random() ;
  private int GetNextRandomValue()
  {
    int value = random.Next(1,1000) ;
    return value ;
  }

} 
```

# file - 如何使用 AppleScript 检查文件夹是否包含某种类型的文件？

> ID：16094041
> 
> 赞同：0
> 
> 时间：2013-04-18T22:20:05.257
> 
> 标签：file, applescript

第一次使用applescripting，我已经编写了一个脚本，该脚本创建一个.nfo 文件，其中包含基于文件夹名称的电影的[IMDB链接。](http://www.imdb.com/)

目前，该脚本已设置为向用户询问包含所有电影的文件夹，并在该文件夹中循环，直到处理完所有子文件夹。

结构是：

*   电影
    *   电影 1
        *   视频文件
        *   电影1.信息
    *   电影 2
        *   视频文件
        *   电影2.信息
    *   电影 3
        *   视频文件
        *   电影3.信息

等等...

我需要帮助添加一个 if-then-else 语句，该语句首先检查 nfo 文件是否已经存在，如果存在，只需增加计数器以移动到下一个文件夹或运行我当前的脚本代码。

我尝试过类似的东西

```
if (theFiles contains files whose name extension is nfo) then
    i = i + 1
else
    -- My Code
end if 
```

它似乎并不关心，只是再次处理所有文件夹，用新的 nfo 替换当前的 nfo。

当前的 AppleScript：

```
property imdburl : ""
property newurl : ""
property FolderPath1 : ""
property FolderPath : ""
property Foldername : ""

tell application "Finder"
    activate
    set theFolder to choose folder with prompt "Select the Movie Folder."
    set theList to every folder of theFolder
    repeat with i from 1 to count the theList
        set thisItem to item i of theList as alias
        set currentName to name of thisItem
        --set currentfolder to get the POSIX path of thisItem
        set theFiles to every file of folder thisItem as alias list

        if (theFiles contains files whose name extension is nfo) then
            i = i + 1
        else
            tell application "Finder"
                set FolderPath1 to thisItem -- sets file path to folder you select
                set ParentFolder to container of FolderPath1 -- sets the parent folder of the folder you select
                set Foldername to name of folder FolderPath1 -- sets the folder name as text
                set FolderPath to get the POSIX path of FolderPath1
                set newurl to "http://google.com/search?q=" & Foldername & "+imdb&btnI=I%27m+Feeling+Lucky"
                --set the clipboard to newurl -- sets foldername to the clipboard
            end tell

            tell application "Safari"
                open location newurl
                activate
                delay 3
                set imdburl to URL of current tab of window 1
                set the clipboard to FolderPath
                close window 1
            end tell

            tell application "TextEdit"
                activate
                make new document
                set text of document 1 to imdburl
                set Foldername to text 1 thru -(7 + 1) of Foldername
                save document 1 in FolderPath & "/" & Foldername
                close document 1
            end tell

            tell application "Finder" to set name extension of (files of FolderPath1 whose name extension is "rtf") to "nfo"
        end if
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:10:40.810

此示例显示如何检查文件夹中的应用程序包（只是为了便于测试）。将 .app 替换为 .ifo 即可获得所需的内容。

```
on foo()
    tell application "Finder"
        set someFolder to choose folder
        set aList to name of files of someFolder as list
        set AppleScript's text item delimiters to return
        return ".app" is in (aList & return as text)
    end tell
end foo

on run {}
    foo()
end run 
```

请注意，与通常所说的相反，重复循环不是获取文件夹文件列表的必要条件。

# android - 选项卡内的活动

> ID：16094044
> 
> 赞同：0
> 
> 时间：2013-04-18T22:20:14.473
> 
> 标签：android, tabs, android-activity

我的 android 应用程序中有四个选项卡，我想在每个选项卡中实现活动，并将意图从一个选项卡内的活动发送到另一个选项卡中的活动。问题是我的标签类扩展了片段，例如

```
public class Results extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return (LinearLayout) inflater.inflate(R.layout.results, container, false);
}

} 
```

函数 findViewById 不起作用，因为该类没有扩展 Activity，所以我无法将任何 Activity 附加到按钮。帮助如何做到这一点任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T06:03:34.703

使用[`getView()`](http://developer.android.com/reference/android/app/Fragment.html#getView%28%29)上的`Fragment`来获得一个视图以通过 进行搜索`findViewById`。

```
this.getView().findViewById(R.id.myviewid) 
```

# php - PHP foreach复制输出数据的最后一次迭代

> ID：16094051
> 
> 赞同：2
> 
> 时间：2013-04-18T22:20:55.640
> 
> 标签：php, arrays, foreach, iteration

真的很感谢你们的帮助。即使你只是发现一切都很好，你给了我重要的线索来解决它。

//解决方案清除第一个迭代过程，因为我计划在页面开始时将其全部完成，并将其移至主迭代。我真的不知道发生了什么，只是有一个关于引用变量的线索，然后稍后将其重用于新的迭代。

继承人的工作代码：

```
foreach ($groups as $group) {                   
$group['games'] = db_getGamesElimbyGroup ($group['id']);
    $class_by_groupID = $group['id'];

foreach ($group['games'] as $game) {
   $game['players'] = db_getPlayerElimbyGames($game['id']);             
   $class_by_gameID = $game['id']; ?>
   <div class="group<?=$class_by_groupID?> game<?=$class_by_gameID?> item clearfix">

    <?  foreach ($game['players'] as $player) { ?>

            <div class="player box<?=$player['casa_fora']?> clearfix">
                <div class="thumb" style="background-image:url(<?=$home_path.$player['thumb']?>)"></div>
                <div class="name"><?=$player['nome']?></div>
                <div class="result"><?=$player['equipa_result']?></div>
            </div>

            <?  } ?>
       </div>

     <?}
 } 
```

//解决方案结束 //新

在获取数组之前，我对其进行了以下操作：

```
$groups = db_getCountGroupsElim();

foreach ($groups as &$group) {

   foreach ($group['games'] as &$game) {
      $game['players'] = db_getPlayerElimbyGames($game['id']);
   }
} 
```

使用引用将查询结果添加到同一个数组中。如果按原样使用数组，或者使用 JSON 形式，它可以工作。我怀疑它可能必须是关于使用引用和相同的变量名？！

//老的

我有一个数组，有几个级别，主要是 Groups, Games, Players

团体有游戏，游戏有玩家。

像这样。

JSON

```
 [{"id":"9","name":"Oitavos","games":[{"id":"49","next_game_id":"58","players":[{"equipa_result":"0","casa_fora":"1","nome":"Lucas Neves Castro","thumb":"uploads\/1364040943\/thumb\/dsc01491.jpg","jogador_id":"2"},{"equipa_result":"1","casa_fora":"2","nome":"Jo\u00e3o Monteiro Ribeiro","thumb":"uploads\/1364249922\/thumb\/foto.png","jogador_id":"6"}]},{"id":"50","next_game_id":"58","players":[{"equipa_result":"1","casa_fora":"1","nome":"Lu\u00eds Salgado","thumb":"uploads\/1364229837\/thumb\/20130322171159.jpg","jogador_id":"1"},{"equipa_result":"0","casa_fora":"2","nome":"Pedro Fernandes","thumb":"uploads\/1364759964\/thumb\/sam_0255.jpg","jogador_id":"32"}]},{"id":"51","next_game_id":"59","players":[{"equipa_result":"1","casa_fora":"1","nome":"Pedro Costa","thumb":"uploads\/1364126670\/thumb\/pedro.jpg","jogador_id":"12"},{"equipa_result":"0","casa_fora":"2","nome":"Jos\u00e9 Vieira","thumb":"uploads\/1364134124\/thumb\/19084_540280705996807_1199242145_n.jpg","jogador_id":"13"}]},{"id":"52","next_game_id":"59","players":[{"equipa_result":"1","casa_fora":"1","nome":"Jos\u00e9 Peixoto","thumb":"uploads\/1364099591\/thumb\/foto.jpg","jogador_id":"10"},{"equipa_result":"0","casa_fora":"2","nome":"Pedro Sousa","thumb":"uploads\/1364150593\/thumb\/552121_566863856670835_1922080433_n.jpg","jogador_id":"16"}]},{"id":"53","next_game_id":"60","players":[{"equipa_result":"1","casa_fora":"1","nome":"Lu\u00eds Carvalho","thumb":"uploads\/1364150836\/thumb\/598590_119690038195872_1425120299_n.jpg","jogador_id":"17"},{"equipa_result":"0","casa_fora":"2","nome":"Jo\u00e3o Fernandes","thumb":"uploads\/1364171606\/thumb\/img_20130314_222526.jpg","jogador_id":"24"}]},{"id":"54","next_game_id":"60","players":[{"equipa_result":"1","casa_fora":"1","nome":"Patr\u00edcio Correia Santos","thumb":"uploads\/1364156207\/thumb\/dsc01877.jpg","jogador_id":"19"},{"equipa_result":"0","casa_fora":"2","nome":"Tiago Fernandes","thumb":"uploads\/1364171076\/thumb\/4232037_big.jpg","jogador_id":"23"}]},{"id":"55","next_game_id":"61","players":[{"equipa_result":"0","casa_fora":"1","nome":"Carlos Miguel Da Silva Lopes","thumb":"uploads\/1364217431\/thumb\/miguel1.jpg","jogador_id":"26"},{"equipa_result":"1","casa_fora":"2","nome":"Luis Silva","thumb":"uploads\/1364562821\/thumb\/177158_390926850971196_1987889821_o.jpg","jogador_id":"31"}]},{"id":"56","next_game_id":"61","players":[{"equipa_result":"0","casa_fora":"1","nome":"Tiago Teixeira Castro","thumb":"uploads\/1364220392\/thumb\/tiago.jpg","jogador_id":"27"},{"equipa_result":"1","casa_fora":"2","nome":"Hugo Pereira Castro","thumb":"uploads\/1364771622\/thumb\/263386_241332222564106_3344558_n.jpg","jogador_id":"29"}]}]},{"id":"10","name":"Quartos","games":[{"id":"58","next_game_id":"62","players":[{"equipa_result":"1","casa_fora":"1","nome":"Jo\u00e3o Monteiro Ribeiro","thumb":"uploads\/1364249922\/thumb\/foto.png","jogador_id":"6"},{"equipa_result":"0","casa_fora":"2","nome":"Lu\u00eds Salgado","thumb":"uploads\/1364229837\/thumb\/20130322171159.jpg","jogador_id":"1"}]},{"id":"59","next_game_id":"63","players":[{"equipa_result":"0","casa_fora":"1","nome":"Pedro Costa","thumb":"uploads\/1364126670\/thumb\/pedro.jpg","jogador_id":"12"},{"equipa_result":"1","casa_fora":"2","nome":"Jos\u00e9 Peixoto","thumb":"uploads\/1364099591\/thumb\/foto.jpg","jogador_id":"10"}]},{"id":"60","next_game_id":"62","players":[{"equipa_result":"1","casa_fora":"1","nome":"Patr\u00edcio Correia Santos","thumb":"uploads\/1364156207\/thumb\/dsc01877.jpg","jogador_id":"19"},{"equipa_result":"0","casa_fora":"2","nome":"Lu\u00eds Carvalho","thumb":"uploads\/1364150836\/thumb\/598590_119690038195872_1425120299_n.jpg","jogador_id":"17"}]},{"id":"61","next_game_id":"63","players":[{"equipa_result":"1","casa_fora":"1","nome":"Luis Silva","thumb":"uploads\/1364562821\/thumb\/177158_390926850971196_1987889821_o.jpg","jogador_id":"31"},{"equipa_result":"0","casa_fora":"2","nome":"Hugo Pereira Castro","thumb":"uploads\/1364771622\/thumb\/263386_241332222564106_3344558_n.jpg","jogador_id":"29"}]}]},{"id":"11","name":"Meias","games":[{"id":"62","next_game_id":"65","players":[{"equipa_result":"1","casa_fora":"1","nome":"Jo\u00e3o Monteiro Ribeiro","thumb":"uploads\/1364249922\/thumb\/foto.png","jogador_id":"6"},{"equipa_result":"0","casa_fora":"2","nome":"Patr\u00edcio Correia Santos","thumb":"uploads\/1364156207\/thumb\/dsc01877.jpg","jogador_id":"19"}]},{"id":"63","next_game_id":"65","players":[{"equipa_result":"0","casa_fora":"1","nome":"Jos\u00e9 Peixoto","thumb":"uploads\/1364099591\/thumb\/foto.jpg","jogador_id":"10"},{"equipa_result":"1","casa_fora":"2","nome":"Luis Silva","thumb":"uploads\/1364562821\/thumb\/177158_390926850971196_1987889821_o.jpg","jogador_id":"31"}]}]},{"id":"12","name":"3\u00ba e 4\u00ba","games":[{"id":"64","next_game_id":"0","players":[{"equipa_result":"0","casa_fora":"1","nome":"Patr\u00edcio Correia Santos","thumb":"uploads\/1364156207\/thumb\/dsc01877.jpg","jogador_id":"19"},{"equipa_result":"0","casa_fora":"2","nome":"Jos\u00e9 Peixoto","thumb":"uploads\/1364099591\/thumb\/foto.jpg","jogador_id":"10"}]}]},{"id":"13","name":"Final","games":[{"id":"65","next_game_id":"0","players":[{"equipa_result":"0","casa_fora":"1","nome":"Jo\u00e3o Monteiro Ribeiro","thumb":"uploads\/1364249922\/thumb\/foto.png","jogador_id":"6"},{"equipa_result":"0","casa_fora":"2","nome":"Luis Silva","thumb":"uploads\/1364562821\/thumb\/177158_390926850971196_1987889821_o.jpg","jogador_id":"31"}]}]}] 
```

样品阵列

```
Array
(
[id] => 13
[name] => Final
[games] => Array
    (
        [0] => Array
            (
                [id] => 65
                [next_game_id] => 0
                [players] => Array
                    (
                        [0] => Array
                            (
                                [equipa_result] => 0
                                [casa_fora] => 1
                                [nome] => JoÃ£o Monteiro Ribeiro
                                [thumb] => uploads/1364249922/thumb/foto.png
                                [jogador_id] => 6
                            )

                        [1] => Array
                            (
                                [equipa_result] => 0
                                [casa_fora] => 2
                                [nome] => Luis Silva
                                [thumb] => uploads/1364562821/thumb/177158_390926850971196_1987889821_o.jpg
                                [jogador_id] => 31
                            )
                    )
            )
    )
) 
```

我正在为每个级别做一个 foreach，以创建可以使用 css 更轻松地设置样式的单个元素。

我的迭代是这样的：

```
foreach ($groups as $group) {                   

    $class_by_groupID = $group['id'];

foreach ($group['games'] as $game) {

   $class_by_gameID = $game['id']; ?>
   <div class="group<?=$class_by_groupID?> game<?=$class_by_gameID?> item clearfix">

    <?  foreach ($game['players'] as $player) { ?>

            <div class="player box<?=$player['casa_fora']?> clearfix">
                <div class="thumb" style="background-image:url(<?=$home_path.$player['thumb']?>)"></div>
                <div class="name"><?=$player['nome']?></div>
                <div class="result"><?=$player['equipa_result']?></div>
            </div>

            <?  } ?>
       </div>

     <?}
 } 
```

好的，既然所有重要的代码都在这里，我在最后一组的最后一场比赛的最后输出上得到了一个奇怪的结果。

这不是因为特定的组，我试图修改数组以获得更少的结果，并且仍然是相同的最后一个重复输出。

所以我的最后一个DIV，不是获取最后一条记录的数据，而是获取上一条记录，并在两个HTML DIVS中复制，完全相同，但重复。

任何提示或建议都将受到欢迎。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T08:00:34.510

带参考的 foreach 是我的第一个想法，但由于您的原始代码没有显示它，所以我没有提到它。

为了将来参考，您可以在 PHP 的 foreach 函数文档中阅读：

> **警告**
> 
> 即使在 foreach 循环之后，对 $value 和最后一个数组元素的引用仍然存在。建议通过 unset() 将其销毁。

以下是有关如何解决该问题的示例：

```
<?php
    $arr = array(1, 2, 3, 4);
    foreach ($arr as &$value) {
        $value = $value * 2;
    }
    // $arr is now array(2, 4, 6, 8)
    unset($value); // break the reference with the last element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:36:51.410

您可能会得到一个有线结果，但我只能告诉您这不是因为您在问题中发布的内容：

```
<?php

$groups[] = array(
    'id'    => 13,
    'name'  => 'Final',
    'games' => array(
        array(
            'id'           => 65,
            'next_game_id' => 0,
            'players'      => array(
                array('equipa_result' => 0, 'casa_fora' => 1, 'nome' => 'JoÃ£o Monteiro Ribeiro', 'thumb' => 'uploads/1364249922/thumb/foto.png', 'jogador_id' => 6),
                array('equipa_result' => 0, 'casa_fora' => 2, 'nome' => 'Luis Silva', 'thumb' => 'uploads/1364562821/thumb/177158_390926850971196_1987889821_o.jpg', 'jogador_id' => 31),
            ),
        ),
    ),
);

$home_path = '';

foreach ($groups as $group) {

    $class_by_groupID = $group['id'];

    foreach ($group['games'] as $game) {

        $class_by_gameID = $game['id']; ?>
        <div class="group<?= $class_by_groupID ?> game<?= $class_by_gameID ?> item clearfix">

            <?php foreach ($game['players'] as $player) { ?>

                <div class="player box<?= $player['casa_fora'] ?> clearfix">
                    <div class="thumb" style="background-image:url(<?= $home_path . $player['thumb'] ?>)"></div>
                    <div class="name"><?= $player['nome'] ?></div>
                    <div class="result"><?= $player['equipa_result'] ?></div>
                </div>

            <?php } ?>
        </div>

    <?php
    } // foreach
} 
```

该代码运行良好并输出：

```
<div class="group13 game65 item clearfix">

        <div class="player box1 clearfix">
            <div class="thumb" style="background-image:url(uploads/1364249922/thumb/foto.png)"></div>
            <div class="name">JoÃ£o Monteiro Ribeiro</div>
            <div class="result">0</div>
        </div>

        <div class="player box2 clearfix">
            <div class="thumb" style="background-image:url(uploads/1364562821/thumb/177158_390926850971196_1987889821_o.jpg)"></div>
            <div class="name">Luis Silva</div>
            <div class="result">0</div>
        </div>

            </div> 
```

因此，无论您在哪里犯了错误，都不是在您在问题中提供的代码/数据中犯的。无论如何提示：不要使用短标签，而不是当你在这个网站上说明你的代码时。另请参阅：[PHP 短标签是否可以使用？](https://stackoverflow.com/q/200640/367456).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:40:20.127

只是看...代码看起来不错，但是您的 $groups 数组中可能有一条额外的记录，这会导致第二个循环的一次额外迭代。

# python - 使用 python 绕过 HTTP 403

> ID：16094052
> 
> 赞同：0
> 
> 时间：2013-04-18T22:20:57.363
> 
> 标签：python, http, error-handling, mechanize, http-status-code-403

我正在制作一个使用谷歌搜索的程序，但我不能因为 HTTP 错误 403 有什么方法可以解决它或者我使用 mechanize 浏览这里是我的代码

```
from mechanize import Browser

inp = raw_input("Enter Word: ")
Word = inp

SEARCH_PAGE = "https://www.google.com/"

browser = Browser()
browser.open( SEARCH_PAGE )
browser.select_form( nr=0 )

browser['q'] = Word
browser.submit() 
```

这是错误消息

```
Traceback (most recent call last):
File "C:\Python27\Project\Auth2.py", line 16, in <module>
browser.submit()
File "C:\Python27\lib\site-packages\mechanize\_mechanize.py", line 541, in submit
return self.open(self.click(*args, **kwds))
File "C:\Python27\lib\site-packages\mechanize\_mechanize.py", line 203, in open
return self._mech_open(url, data, timeout=timeout)
File "C:\Python27\lib\site-packages\mechanize\_mechanize.py", line 255, in _mech_open
raise response
httperror_seek_wrapper: HTTP Error 403: request disallowed by robots.txt 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:24:35.780

您可以告诉 Mechanize 忽略该`robots.txt`文件：

```
browser.set_handle_robots(False) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:29:15.393

Mechanize 试图尊重网站上`/robots.txt`文件宣布的抓取限制。在这里，Google 不希望抓取工具为其搜索页面编制索引。

您可以忽略此限制：

```
browser.set_handle_robots(False) 
```

如[Web Crawler - Ignore Robots.txt 文件中所述？](https://stackoverflow.com/questions/8386481/web-crawler-ignore-robots-txt-file)

此外，我建议改用[Google 的自定义搜索 API](https://developers.google.com/custom-search/v1/using_rest)，它公开了一个具有易于解析结果的适当 API。

# javascript - 如何在不使用 unsafeWindow 的情况下访问站点的唯一 JavaScript 对象？

> ID：16094062
> 
> 赞同：0
> 
> 时间：2013-04-18T22:21:47.013
> 
> 标签：javascript, userscripts

我目前正在尝试编写一个脚本，我将尝试在 Chrome 的扩展程序中使用该脚本。我知道这[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow)在 Chrome 中不起作用，所以我找到了一个模仿对象功能的解决方法（[通过这个人的 github ）。](http://mths.be/unsafewindow)

以下是链接中的相关代码：

```
var unsafeWindow = (function() {
    var e1 = document.createElement('p')
    e1.setAttribute('onclick', 'return window;');
    return e1.onclick();
})(); 
```

然后，我可以使用此函数访问网站的自定义/唯一 JavaScript 对象及其原型/属性，如下所示：

```
var newVar = unsafeWindow.WEBSITE.uniqueObject.prototype.uniquePrototype ... etc. 
```

有人告诉我，这种变通方法不是好的做法，只有在没有其他简单方法可以访问独特对象的情况下才会使用。

在不使用类似的东西的情况下访问网站的独特对象及其原型/属性有什么更好或更安全的方法`unsafeWindow`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:08:12.830

我注意到你没有**给出一个*真实的*例子**，我也不打算涵盖所有假设的可能性；有多种技术可用于各种现实世界的网站。

安全的跨浏览器几乎每次尝试都可以使用，方法是[***Script Injection***](https://stackoverflow.com/a/13485650/331508)：

```
function GM_main () {
    var newVar = WEBSITE.uniqueObject.prototype.uniquePrototype;
    /* Or, explicitely...
    var newVar = window.WEBSITE.uniqueObject.prototype.uniquePrototype;
    */

    // DO WHATEVER WITH newVar HERE.
}

addJS_Node (null, null, GM_main);

//-- This is a standard-ish utility function
function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

这两个变体也与[您之前的问题](https://stackoverflow.com/a/16073539/331508)相关联。

* * *

* * *

然而，人们想要使用的最常见情况`unsafeWindow`似乎是破坏广告显示计时器或触发通常由链接或按钮触发的 javascript。

在常见的按钮/链接场景中，不要使用`unsafeWindow`. 只是以[编程方式`click`或`mousedown`控制](https://stackoverflow.com/q/15048223/331508)。

在欺骗网站计时器的情况下，**因为它是一条线**（不包括黑客攻击），这是一种`unsafeWindow`可能很合适的情况。例如：

```
unsafeWindow.payTheBillsTimerCounter = 0; 
```

谨防：

1.  愤怒的站长理论上可以利用`unsafeWindow`.
2.  请不要违反任何*服务条款*(TOS)。
3.  请支持您使用（大量）资源的网站。
4.  对于 Chrome 用户脚本和内容脚本，`unsafeWindow`黑客可能会在 Chrome 版本 28 左右被阻止。对于 Chrome 上的直接脚本，切换到[Tampermonkey](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)。Tampermonkey 很可能会继续支持`unsafeWindow`，而无需任何黑客（就您而言）。
    Tampermonkey 还提供了近乎完美的 Greasemonkey 兼容性和许多 Chrome 用户脚本不具备的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:27:33.513

您可以使用[消息传递](http://developer.chrome.com/dev/extensions/messaging.html)在浏览器页面和您的扩展程序之间安全地发送信息，反之亦然。

# objective-c - 发送 NSCFCalendar nil NSDate 讽刺错误

> ID：16094063
> 
> 赞同：2
> 
> 时间：2013-04-18T22:22:01.343
> 
> 标签：objective-c, xcode, nsdate, null, nscalendar

这里有几个线程讨论了向 Calendar 方法发送 nil 日期时在控制台中弹出的新 iOS 6 Xcode 错误：

```
-[__NSCFCalendar components:fromDate:toDate:options:]: fromDate cannot be nil
I mean really, what do you think that operation is supposed to mean with a nil fromDate?
An exception has been avoided for now.
A few of these errors are going to be reported with this complaint, then further 
violations will simply silently do whatever random thing results from the nil. 
```

这个错误让我轻笑了一下，但让我开始思考......

我编写的导致此错误的代码从多个来源（来自日期格式化程序、字符串、用户输入等）获取日期信息，我真的不希望提供的每个日期都是有效的 - 我知道很好，有些会为零，我很高兴处理这些对象的结果。

当我第一次开始使用 Objective C 编程时，我读到的其中一个特性是[向 nil 对象发送消息](http://www.numbergrinder.com/2009/01/nil-vs-nil-vs-null-the-uses-and-abuses-of-null-objects/)。这很棒，因为这意味着我不必担心传递 nil 对象。

现在我从 Xcode 收到了一条脾气暴躁的错误消息，告诉我我已经向一个 nil 对象发送了一条消息。

现在的推论是我必须在方法中使用它之前检查每个对象不是 nil 吗？我在使用 nil 对象做一些完全令人发指的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:26:42.927

> 现在的推论是我必须在方法中使用它之前检查每个对象不是 nil 吗？

不，这不是推论。推论是你必须检查你发送到的日期参考`NSCalendar`，因为发送它的结果是 nil 参考是未定义的。目前它可能对你有用，但 Apple 可能会在未来的版本中改变这种行为，以做任何它想做的事情，包括打一只小海豹。哦，请你想想海豹宝宝好吗？

> 我在使用 nil 对象做一些完全令人发指的事情吗？

不，如果您想要返回的结果是 nil 或在这种情况下为零，则向可能为 nil的**接收者**发送消息是 100%没问题的。在这种情况下，您不会向 nil 发送消息。您正在向非 nil 接收者发送一个 nil**参数，而该接收者并不期望它。**在一种情况下，接收者为零；在另一种情况下，参数为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:27:12.367

> 现在我从 Xcode 收到了一条脾气暴躁的错误消息，告诉我我已经向一个 nil 对象发送了一条消息。

不正确。你的`NSCalendar`（接收者）*不是*零。你作为方法的参数之一传递 的`nil`是什么。当你给它一个 nil 时，它不知道该怎么做，所以它会给你一条日志消息，而不是抛出一个异常并让你的应用程序崩溃。`NSDate``NSCalendar``NSDate`

# openlayers - 基本 OSRM 和 OpenStreetMaps / OpenLayers 问题

> ID：16094065
> 
> 赞同：0
> 
> 时间：2013-04-18T22:22:23.347
> 
> 标签：openlayers, openstreetmap, osrm

我需要一些帮助。我正在尝试设置一个基本的 OSRM / openlayers 地图。我已经能够创建一个带有地图和一些数据的 openlayers 应用程序。我还编译了自己的 OSRM 服务器版本并对其进行了测试以返回数据。

我现在想使用它。在四处搜索后，我看到人们提出复杂的问题，但没有一个基本的例子来说明如何使用它。我见过一些使用它的网站，但它们通常会最小化/混淆代码，很难对那里发生的事情有一个基本的了解。

我想做的两个主要事情是：

1）从OSRM服务器返回自行车/步行路线，据我了解，服务器只做汽车路线，但在几乎每个现场我看到他们都有步行和自行车道。这是如何实现的。

2）这应该是一个可能的。我需要一个最基本的例子来说明如何调用服务器函数，然后将其显示在地图上。

我知道我可以创建没有问题的 URL 调用，但它返回一个 .json 文件，我无法将其加载到我的应用程序中。显然它接受回调参数，但我不是 100% 确定如何处理它。此外，数据作为编码返回，我无法理解编码的折线问题。

所以我在这里想要的是一个基本示例或指向现有示例的链接：1）调用服务器 url 2）成功函数将数据添加到 openlayers 地图并显示它。

如果有人能指出我正确的方向或提供一些样品，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:07:19.483

如果您想为基于 OSRM 的路由服务提供 Web 界面，我强烈建议您使用（定制的）[Project-OSRM-Web （在](https://github.com/DennisSchiefer/Project-OSRM-Web)[http://osrm.at](http://osrm.at)找到的“官方”UI ），或者至少使用代码作为如何使用 API 的参考。

**路由配置文件**

[您可以通过指定speed-profile](https://github.com/DennisOSRM/Project-OSRM/wiki/Speedprofile)来自定义 OSRM 执行何种路由。[在源代码](https://github.com/DennisOSRM/Project-OSRM/tree/master/profiles)中可以找到几个示例配置文件。据我所知，汽车和自行车的配置文件维护得很好。

OSRM[不](https://github.com/DennisOSRM/Project-OSRM/issues/10)直接支持多个路由配置文件。如果要提供多个配置文件，则必须并行运行多个 OSRM 实例。OSRM-Web 确实支持多个服务器。

**服务器 API**

有关如何调用 OSRM 服务器 API 的信息可以[在 OSRM-wiki 上](https://github.com/DennisOSRM/Project-OSRM/wiki/Server-api)找到。例如，路线输出格式以[Encoded Polyline Algorithm Format](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)进行编码。

# text - 是否可以在 awk 中处理包含换行符的字段？

> ID：16094067
> 
> 赞同：1
> 
> 时间：2013-04-18T22:22:30.150
> 
> 标签：text, csv, awk, newline, gawk

假设我有一个包含以下格式记录的文本文件，其中 the`FS`通常是逗号，而 the`RS`通常是换行符。

但是，此规则的例外是，如果字段用引号引起来，则应将换行符和逗号视为字段的一部分。

```
"This field contains
line breaks and is
quoted but it 
should be treated as a 
single field",1,2,3,"another field" 
```

**如何使用 awk 正确解析这样的文件，我仍然可以`$1,$2...`像往常一样访问，但使用上述字段解释？**

我已经看过[这个 wiki 页面](http://wiki.bash-hackers.org/snipplets/awkcsv)，但是那里提出的解决方案并没有解决换行问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T20:55:44.713

要让 awk 正确解析文件，您可以使用我编写的名为 csvquote 的程序，该程序临时用不会混淆 awk 的非打印字符替换出现在引用字段中的逗号和换行符。该程序将数据整理成一种格式，其中 awk 可以依赖始终表示字段分隔符的逗号和始终表示记录分隔符的换行符。

要使用它，您可以像这样包装涉及 cut/awk/... 的管道：

```
csvquote /tmp/foo.csv | tail +2 | awk -F, '{print $3 $2}' | csvquote -u 
```

你可以在这里找到代码：[https ://github.com/dbro/csvquote](https://github.com/dbro/csvquote)

需要注意的是，如果您想在字段内搜索逗号和换行符，这会使该任务更加复杂，因为您需要搜索非打印字符。如果您正在寻找一种更容易做到这一点的方法，您应该查看 csvfix 工具。

另一种选择是使用 awk 的 FPAT，但如果字段包含转义的引号，那将不起作用。请参阅[http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html](http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T10:09:54.340

您可能可以使用双新行作为记录分隔符。如果您还将逗号设置为字段分隔符，那么这允许您将每个文本块作为一个字段处理：

```
awk -v RS="\n\n" -v FS="," '...' file 
```

对于您给定的文件，让我们将文件编号与文件本身一起显示：

```
$ awk -v RS="\n\n" -v FS="," '{for (i=1; i<=NF; i++) print i, $i}' file
1 "This field contains
line breaks and is
quoted but it 
should be treated as a 
single field"
2 1
3 2
4 3
5 "another field" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T16:04:32.167

一个可能的，虽然不是完美的，解决方案是这样的`awk 'BEGIN{RS="\""}{...}'`：通过这样做，您将记录分隔符重置为`"`，而字段分隔符仍然是空格。问题是这会在您的文件中添加两个空记录，因为第一个和最后一个`"`将被匹配为分隔一些记录。

例子：

```
awk 'BEGIN{RS="\""}  {print $0,"END OF RECORD",$1,"-",$2}' 
```

应用于您的数据时将产生此结果

```
 END OF RECORD  - 
This field contains
line breaks and is
quoted but it 
should be treated as a 
single field END OF RECORD This - field
,1,2,3, END OF RECORD ,1,2,3, - 
another field END OF RECORD another - field

END OF RECORD  - 
```

您可以通过添加条件来跳过第一个`NR>1`。最后一个有点棘手，因为您不知道文件中有多少记录。您可以将要打印的值保存在数组中，并`for`在语句中使用循环打印它们`END`，跳过文件中的第一条和最后一条记录。

# php - 使用 PHP 将 mySQL 表输出为 XML 以在谷歌地图上绘制位置

> ID：16094073
> 
> 赞同：0
> 
> 时间：2013-04-18T22:23:03.257
> 
> 标签：php, mysql, xml

我已经设法使用 PHP 和 XML 输出一个表来绘制谷歌地图，但是在加入表以实现相同的结果时遇到了麻烦，这里是 php 代码：

```
<?php  

// Start XML file, create parent node

$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node); 

// Opens a connection to a MySQL server

$connection=mysql_connect ("localhost", "root", "z2f2w3k8") or die(mysql_error());
mysql_select_db("zena2") or die(mysql_error());

// Set the active MySQL database

$db_selected = mysql_select_db("zena2");
if (!$db_selected) {
die ('Can\'t use db : ' . mysql_error());
} 

// Select all the rows in the markers table

$query = "SELECT customer.customerNo, customer.firstName, customer.lastName, customer.houseNum, customer.address, customer.telephone, map.customerNo, map.lat, map.long".
"FROM customer, map".
"WHERE (customer.customerNo = map.customerNo)";
$result = mysql_query($query);
if (!$result) {  
die('Invalid query: ' . mysql_error());
} 

header("Content-type: text/xml"); 

// Iterate through the rows, adding XML nodes for each

while ($row = @mysql_fetch_assoc($result)){  
// ADD TO XML DOCUMENT NODE  
$node = $dom->createElement("marker");  
$newnode = $parnode->appendChild($node);   
$newnode->setAttribute("name",$row['firstName'+'lastName']);
$newnode->setAttribute("address", $row['houseNum'+'address']);
$newnode->setAttribute("phone", $row['telephone']);  
$newnode->setAttribute("lat", $row['lat']);  
$newnode->setAttribute("lng", $row['long']);  
$newnode->setAttribute("type", $row['customerNo']);
} 

echo $dom->saveXML();

?> 
```

这是HTML中的脚本

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api    /js?sensor=false"></script>
<script type="text/javascript">
//<![CDATA[
var customIcons = {
  1: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(50.944693, -2.655044), 
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("xml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var phone = markers[i].getAttribute("phone");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<table> <tr> <th>" + name + "</th> </tr> <tr> <td>" + address + "</td> </tr> <tr> <td>" + phone + "</td> </tr>";
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script> 
```

运行 xml.php 时出现的错误：

```
file is Invalid query: Unknown table 'customer' in field list 
```

这个错误信息是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:29:51.300

您不正确地连接 SQL 查询。在 SQL 查询行的最后一个引号之前添加一个空格。

所以你的代码应该是这样的：

```
$query = "SELECT customer.customerNo, customer.firstName, customer.lastName, customer.houseNum, customer.address, customer.telephone, map.customerNo, map.lat, map.long ".
"FROM customer, map ".
"WHERE (customer.customerNo = map.customerNo)"; 
```

您也可以删除此行，因为您选择了两次数据库：

```
mysql_select_db("zena2") or die(mysql_error()); 
```

你的格式在这一行是错误的：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api    /js?sensor=false"></script> 
```

您应该阅读过[Developers.Google.com 教程](https://developers.google.com/maps/documentation/javascript/tutorial)

# linux - 将 Pexpect 或 expect 用于 ssh 任务，以及如何捕获错误

> ID：16094076
> 
> 赞同：0
> 
> 时间：2013-04-18T22:23:21.040
> 
> 标签：linux, expect, pexpect

我想使用一个期望或 Pexpect 文件来自动化一个 shell 命令，例如：

```
 for host in HostList:
      ssh -t kitty@host 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"' 
```

如果我手动输入命令，情况**2**有 3 种可能性，我必须输入 a `yes`，对于其他情况我不需要输入任何内容，不需要密码。

**1)**

```
 [kitty@goeland kitty]$ ssh -t kitty@202.171.61.205 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"' 
    nohup: ignoring input and appending output to `nohup.out'
    Connection to 202.171.61.205 closed. 
```

**2)**

```
 [kitty@goeland kitty]$ ssh -t kitty@202.171.61.205 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"' 
    The authenticity of host '202.171.61.205 (202.171.61.205)' can't be established.
    RSA key fingerprint is ff:0b:9c:a9:72:52:8f:53:0d:04:d5:ea:d9:3c:56:37.
    Are you sure you want to continue connecting (yes/no)? yes
    Warning: Permanently added '202.171.61.205' (RSA) to the list of known hosts.
    nohup: ignoring input and appending output to `nohup.out'
    Connection to 202.171.61.205 closed. 
```

**3）** 不同的错误，目前我还没有

对于**3**，我想知道错误

那么如何使用`expect`或`Pexpect`做到这一点？最好`Pexpect` 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:43:36.787

您已经使用 pxssh 模块，这是**此类扩展 pexpect.spawn 以专门设置 SSH 连接。这增加了登录、注销和期待 shell 提示的方法。**该模块在您的**2 个问题**“是”中自动处理

示例代码：- [Python：如何使用 Paramiko 从我的本地 pc 远程到 remoteA 到 remoteb 到远程 c](https://stackoverflow.com/questions/15818328/python-how-can-remote-from-my-local-pc-to-remotea-to-remoteb-to-remote-c-using/15831027#15831027)

并缓存您的错误登录：- 示例代码就像

```
host = pxssh.pxssh()
host.login (hostname, username, password)
host.logfile = open(/tmp/logfile.txt, "w")
host.sendline("ls -l") 
```

打开**logfile.txt**您的终端输出存储在文本文件中

# sorting - 算法/复杂性 - 最有效的解决方法

> ID：16094077
> 
> 赞同：0
> 
> 时间：2013-04-18T22:23:42.023
> 
> 标签：sorting, hashtable, complexity-theory

所以问题是这样的。我有以下作为示例输入，

|身份证号| 一个 | 乙|

|2 |100|200|

|3 |110|190|

|4 |105|145|

|1 |90 |150|

|5 |102|198|

目标如下。对于每个 ID x，计算其他 ID y 的数量，其中 y 的 A 大于 x 的 A 并且 y 的 B 小于 x 的 B。所以上面例子的输出应该是

|ID|计数|

|3 |0 |

|4 |0 |

|1 |1 |

|5 |2 |

|2 |3 |

其中 ID 3 的计数为 0，因为它具有最大的 A。显然您可以进行 O(n^2) 穷举搜索，但这将是低效的。

我的算法如下。对输入进行两次排序-一次按A，一次按B，得到

|身份证号| 一个 | 乙|

|1 |90 |150|

|2 |100|200|

|5 |102|198|

|4 |105|145|

|3 |110|190|

和

|身份证号| 一个 | 乙|

|2 |100|200|

|5 |102|198|

|3 |110|190|

|1 |90 |150|

|4 |105|145|

然后从第一个排序表中的第一个 ID（ID=1）开始，获取具有较大 A 值的 ID（即 ID 在其下方 - 2、5、4、3），然后在第二个排序表上查找 ID=1并查看它下面的 ID，每次在原始 ID 集中找到一个时，计数器都会增加 - 在这种情况下，第二个表中低于 1 的唯一 ID 是 4，而 4 在 {2,5,4,3}所以输出为1。

所以排序是 O(nlogn)，我相信其余的操作是不变的。有没有更好的方法？

# java - 什么正则表达式将与 Java 的“replaceAll”函数一起操作以删除 html 标记及其内容来自 html 字符串？

> ID：16094078
> 
> 赞同：0
> 
> 时间：2013-04-18T22:23:51.093
> 
> 标签：java, html, regex

什么正则表达式将与 Java`replaceAll()`方法一起操作以从 HTML 字符串中删除`<p>`html 标记及其标记之间的内容？

例如，应用该方法后，

```
"<div><p>table <b>test</b> title</p><table><tbody><tr><td>this is table cell value</td></tr></tbody></table><p>miscellaneous contents</p><span>blah</span></div>" 
```

变成：

```
"<div><table><tbody><tr><td>this is table cell value</td></tr></tbody></table><span>blah</span></div>" 
```

**注意：**这是一个“学术”练习。我不是在寻找使用 XML/HTML 解析器的解决方案。

* * *

# 更新：

越来越接近这个解决方案（谢谢，jlordo！）......你的模式似乎有点工作......

***但是，***建议的正则表达式字符串 (`"<[pP]>.*?</[pP]>"`) 似乎对`<p>`包含属性（即，在本例中为“样式”属性）的标签没有影响——见下文

```
 public static void main(String[] args)
    {
        String htmlstring = "<div><p style='text-align: center; font-style: italic'>[click the <b>submit</b> button to create the new company.]</p><table><tbody><tr><td>this is table cell value</td></tr></tbody></table><p>miscellaneous contents</p><span>blah</span></div>";
        htmlstring = htmlstring.replaceAll("<[pP]>.*?</[pP]>", "");
    } 
```

***htmlstring（擦洗之前）：***

```
<div><p style='text-align: center; font-style: italic'>[click the <b>submit</b> button to create the new company.]</p><table><tbody><tr><td>this is table cell value</td></tr></tbody></table><p>miscellaneous contents</p><span>blah</span></div> 
```

***htmlstring（擦洗后）：***

```
<div><p style='text-align: center; font-style: italic'>[click the <b>submit</b> button to create the new company.]</p><table><tbody><tr><td>this is table cell value</td></tr></tbody></table><span>blah</span></div> 
```

我们可以做些什么来“调整”它以便它处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:16:07.720

尝试

```
 htmlstring = htmlstring.replaceAll("(?i)<p.*?>.*?</p>", ""); 
```

请注意， (?i) 表示打开不区分大小写的标志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T00:36:21.010

```
Pattern.compile(
  // A start p tag.
  "<p(?![a-z0-9:\\-])([^>\"']|\"[^\"]*\"|'[^']*)*>"
  + ".*?"   // Phrasing content that does not handle comment, RCDATA or raw text boundaries
  // An end p tag
  + "</p(?![a-z0-9:\\-])[^>]*>",
  Pattern.DOTALL | Pattern.CASE_INSENSITIVE); 
```

该`Pattern.DOTALL`标志将导致`.*?`匹配换行符，这是必要的，因为您的原始正则表达式不会匹配其正文中包含换行符的任何段落。

`Pattern.CASE_INSENSITIVE`没有指定标志，因为`Pattern.UNICODE_CASE`它是不必要的，而且我不相信土耳其语折叠不会造成微妙的维护危险，如果这个正则表达式被修改以处理`<i>`.

该`([^>"']|"[^"]*"|'[^']*)`部分匹配任何标签正文字符或引用属性。它会在某些非验证属性名称（例如`<p ain't-this=confusing>`. 属性语法是常规的，但是对属性值和名称中的引号字符进行全面处理会极大地扩展此正则表达式的大小，并且可能不会有帮助，因为任何需要全面处理的东西都必须处理反引号可以引用的事实一些浏览器上的属性，这意味着没有一个正则表达式可以为任意混乱的 HTML 找到值边界。

确保标签的`(?![a-z0-9:\\-])`名称是“p”而不是“plaintext”或“p-”或“p:foo”或其他以“p”为前缀的 HTML 标识符。

这可能在某些结构上起作用，例如：

*   `<p><!-- </p> -->Not an orphaned end tag</p>`
*   `<p><textarea>Not a paragraph</p></textarea></p>`
*   `<noscript><p>Not a paragraph contextually</p></noscript>`
*   `<p ain't-this=confusing>Foo</p> <p>Isn't recognized as separate</p>.`
*   `<p><script>alert("Not a real </p> tag");</script></p>`

# android - Akka Remoting 是否支持单向连接？

> ID：16094079
> 
> 赞同：2
> 
> 时间：2013-04-18T22:23:59.233
> 
> 标签：android, networking, client-server, netty, akka

我有一个在 Android 设备上运行的 Akka 系统，它通过 Akka Remoting 与服务器上的 Akka 系统通信。

Android 设备可能会获得任何 IP 地址，IP 可能会在应用程序运行时更改，并且 IP 可能无法从服务器访问。因此，我在 Android 设备上使用`akka.remote.netty.hostname = "0.0.0.0"`和配置了 Akka `akka.remote.netty.port = 8000`。

Android Akka 系统获取到服务器上的一个 Actor 的引用，向它发送消息，服务器上的 Actor 记录 sender() actorRef 并不断向它发送消息。当服务器和 Android 设备都在同一个 wlan 上时，并且当它们通过互联网通过 GPRS 通话时，此方法有效。

现在我正在仔细研究连接丢失和重新连接。我一直关注的场景是这样的：

*   Android 设备和服务器都在一个 wlan 上。
*   Android 设备向服务器发送消息。
*   Android 上的 Akka 远程处理产生`RemoteClientStarted`.
*   服务器上的 Akka 远程处理产生`RemoteClientStarted`和`RemoteServerClientConnected`.
*   然后我关掉安卓上的wlan，等几秒再打开。在这期间不会尝试向服务器发送任何消息。
*   Android 上的 Akka 远程处理产生`RemoteClientShutdown`和`RemoteClientError`(ETIMEDOUT)
*   服务器上的 Akka 远程处理什么也没说。
*   Android 向服务器发送消息。
*   服务器产生`RemoteServerClientConnected`并接收消息。
*   服务器尝试向Android 发送一条消息（以下问题称为**A**`RemoteServerError` ），并产生： , `RemoteServerClientDisconnected`, `RemoteClientShutdown`, `RemoteServerClientClosed`。
*   Android 永远不会从服务器获取消息。
*   服务器尝试发送另一条消息，但 Akkas`RemoteClient`说：
    *   *[PassiveRemoteClient@akka://xxx@0.0.0.0:8000] 已关闭*
    *   *启动到 [akka://xxx@0.0.0.0:8000|/0.0.0.0] 的远程客户端连接*
    *   *RemoteClientError@akka://vts@0.0.0.0:8000: 错误[...*

最后一个错误似乎来自 Akka Remote 想要创建一个新`ActiveRemoteClient`的而不是重用现有的`PassiveRemoteClient`. 我猜这又是因为服务器在看到错误/断开连接/关闭/客户端关闭之前观察了 RemoteServerClientConnected 事件。

现在的问题：

1.  **在这种情况下发送消息 A 时，如何让服务器重用`PassiveRemoteClient`来自 Android 设备的最后一个传入连接 ( )？**
2.  **如何指示服务器不要尝试连接回客户端？**

版本：

*   安卓：15（4.0.3）
*   阿卡：2.1
*   Java：1.6 64位
*   斯卡拉：2.10.1
*   网：3.5.8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T12:38:16.643

这可能不是您一直希望的答案，但它就是这样（我是 Akka 技术负责人）。

Akka 远程处理旨在在充当对等点的系统之间工作。开发背后的驱动力是构建集群支持，该支持开始出现在 2.1 版中，并且将从 2.2 版开始得到官方支持并进一步开发。这有几个重要的后果：

*   `ActorRefs`应该是位置透明的，这意味着无论您在哪里使用它们，它们的工作方式都是一样的，因此每个节点都需要能够连接到给定引用指向的节点。
*   Akka 节点之间的通信基本上是对称的，即使您对它的使用可能不是。
*   传递`ActorRef`作为进行对话的一种手段意味着通过引用指向的实体需要保持可用，否则通信将失败；并且保持可用意味着“在参考指向的同一位置”。

这对您的场景意味着，您最好不要使用普通的远程处理来耦合您的演员系统，而是使用其他支持您遭受的短期关联的东西。例如，您可以将服务器公开为 REST 服务，或者您可以使用 Akka IO 层仅使用裸 TCP（甚至 UDP）。在服务器端处理端点的actor中，您可以识别同一客户端是否从不同的网络位置与您交谈，缓冲回复消息，将外部actor伪装成本地代理actor等。使用此方案，您甚至可以构建通过不可靠的通道（使用 ACKing）进行可靠的消息传递，美妙之处在于，在服务器（可能是集群）内，所有通信都可以正常工作，因为如何与客户端通信的问题部分被封装在一个地方。

长话短说：您的用例不是开箱即用的普通 Akka 远程支持的用例。

# python - Python：由几个文件定义一个模块

> ID：16094083
> 
> 赞同：6
> 
> 时间：2013-04-18T22:24:15.530
> 
> 标签：python, python-2.7

假设我有一个名为`mymodule`. 在我的代码顶部，我有这个：

```
import mymodule
reload(mymodule) 
```

我的目录结构在哪里

```
/dir/mymodule.py 
```

但是，我想拆分`mymodule.py`成几个文件，同时仍被定义为单个模块（即我不想单独导入每个文件 - 我希望能够像以前一样使用我的导入/重新加载）。

我知道如何做到这一点的唯一方法是

```
/dir/mymodule/
             file1.py
             file2.py
             __init__.py 
```

其中`__init__.py`包含

```
from file1 import *
from file2 import * 
```

这主要是有效的，但我的调用`reload(mymodule)`不再做任何事情，因为它不会重新加载通过 * 导入调用的任何内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:03:39.830

我不确定你为什么要这样做，但会假设你有你的理由。我认为这有效：

`__init__.py:`

```
import file1
reload(file1)
from file1 import * 
```

显然你也可以导入 file2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:04:01.183

对于快速解决方法，我可以建议

```
import sys

def myreload(base_module_name):
    for module_name, module in sys.modules.items():
        if module_name.startswith(base_module_name):
            reload(module)

myreload('mymodule') 
```

这将调用`reload(mymodule.file1)`等`reload(mymodule.file2)`。

但是，它不是递归的，并且当您使用 ipython 时，我相信您的问题[在这里](https://stackoverflow.com/questions/5364050/reloading-submodules-in-ipython)得到了很好的回答。

# iphone - 迁移对象模型时在 coredata 中添加具有递增值的属性

> ID：16094085
> 
> 赞同：0
> 
> 时间：2013-04-18T22:24:28.753
> 
> 标签：iphone, ios, core-data, core-data-migration

我正在开发的 iphone 应用程序中有一个`Bet`由 coredata 管理的对象。

我想为这个赌注对象添加一个 UID（betnum）属性，以便将来我可以使用这个 UID 将赌注推送到服务器，以了解它是否已经存在于服务器上。我知道这将涉及我更新 iPhone 应用程序的版本，将此属性添加到类中并将此属性设置为已由先前版本的核心数据管理的所有对象（以及任何新对象`Bet`）的递增值`Bet`）。

为此，我需要使用[Lightweight Migration](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)或创建我自己的[Mapping Model](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmMappingOverview.html#//apple_ref/doc/uid/TP40004399-CH5-SW1)来迁移对象模型。我已经读到我应该尽可能使用轻量级迁移，因为创建自己的映射模型会变得混乱。我知道可以使用轻量级迁移将属性添加到现有对象，但我不知道通过自动递增或类似的方式设置特定值。

我可以为此使用轻量级迁移吗？我是否使用轻量级迁移，然后在迁移后使用某种迁移后挂钩或 onAppUpdate 方法在代码中设置值？还是我注定要创建自己的映射模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:19:59.623

不，你不能为此使用轻量级迁移，或者至少在事后没有一些额外的工作。如果您只是添加一个属性，那么轻量级迁移会起作用，但它不包括为新属性设置值。您可以 (a) 使用其他迁移方案之一并在迁移期间添加您的 UID 值，或者 (b) 使用轻量级迁移但添加一个后处理步骤，您可以在其中运行数据存储并设置新值。

另外，请记住，Core Data 没有自动递增的值。您必须计算出每个实例的值需要是什么。

# mysql - MySQL - UPDATE WHERE field IN query with LIMIT 被拒绝

> ID：16094094
> 
> 赞同：1
> 
> 时间：2013-04-18T22:25:14.007
> 
> 标签：mysql, subquery

有什么方法可以在 MySQL 中执行以下查询？

```
UPDATE url_source_wp
SET url_source_wp.hash = "ASDF"
WHERE url_source_wp.url IN (SELECT
                              url_source_wp.url
                            FROM url_source_wp
                              LEFT OUTER JOIN url_done_wp
                                ON url_source_wp.id = url_done_wp.url_source_wp AND url_done_wp.url_group = 4 AND
                                   hash IS NULL
                            WHERE url_done_wp.url_source_wp IS NULL
                            ORDER BY url_source_wp.id ASC
                            LIMIT 50); 
```

这里有两个问题： MySQL 不支持对子查询的限制。MySQL 不支持更新选择中使用的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:30:55.873

现在它的格式正确，看起来您的子查询是独立的，所以我真的建议使用临时表。如果您希望子查询的结果会发生变化，您可以批量更新并仍然使用临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:40:43.753

您可以`JOIN`在`UPDATE`：

```
UPDATE url_source_wp AS upd
  JOIN
    ( SELECT s.url
      FROM url_source_wp AS s
        LEFT OUTER JOIN url_done_wp AS d 
          ON  s.id = d.url_source_wp 
          AND d.url_group = 4
          AND hash IS NULL
      WHERE d.url_source_wp IS NULL
      ORDER BY s.id ASC
        LIMIT 50
    ) AS lim
    ON lim.url = upd.url
SET upd.hash = 'ASDF' ; 
```

# objective-c - 未调用 [super method] 时发出警告

> ID：16094095
> 
> 赞同：34
> 
> 时间：2013-04-18T22:25:15.363
> 
> 标签：objective-c, xcode

不使用 ARC 时，在您的 dealloc 方法中未调用 [super dealloc] 时会收到警告。

我试图用一个经常被子类化的类来实现类似的东西，以在实现子类的人不调用 super 时警告他们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-18T22:52:40.583

最近版本的 llvm 添加了一个属性，指示子类必须调用 super：

```
@interface Barn:NSObject
- (void)openDoor NS_REQUIRES_SUPER;
@end

@implementation Barn
- (void) openDoor
{
    ;
}
@end

@interface HorseBarn:Barn
@end
@implementation HorseBarn
- (void) openDoor
{
    ;
}
@end 
```

编译上面的会产生警告：

```
Method possibly missing a [super openDoor] call 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T22:32:19.323

### 更新

有关告诉编译器子类必须调用的直接方法，请参见[bbum 的答案](https://stackoverflow.com/a/16094396/77567)`super`。

### 原来的

苹果通常做的是提供一个钩子，比如`viewDidLoad`. Apple 不会在 base 中做任何工作`-[UIViewController viewDidLoad]`。这是一个空方法。取而代之的是，Apple 在其他地方以您不允许覆盖的私有方法执行其工作，并`viewDidLoad`从该方法调用您的方法。因此，即使您忘记调用`[super viewDidLoad]`您的`UIViewController`子类，Apple 的所有工作仍然可以完成。

也许您可以修改您的 API 以使用类似的模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-12T14:47:33.397

```
NS_REQUIRES_SUPER 
```

是现代的表达方式

```
__attribute__((objc_requires_super)) 
```

# ios - UIScrollView contentsize is reset to zero when using auto layout

> ID：16094096
> 
> 赞同：8
> 
> 时间：2013-04-18T22:25:31.790
> 
> 标签：ios, objective-c, uiscrollview, autolayout

I'm using `autolayout` to change the height of my `scrollview`. I add some `subviews` to the `scrollview` where I manually increment the content size. But when I get an event where I am about to change the height the content size is zero.

**Here is the code:**

```
-(void) addTag:(NSString *)tagName {

    ...
    [button addTarget:self action:@selector(tagPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self setContentSize:CGSizeMake(self.frame.size.width, self.contentSize.height+60)];
    [self.items addObject: button];
    NSLog(@"content height: %0.2f", self.contentSize.height);

} 
```

**Console Output:**

```
 2013-04-18 18:23:06.106 TouchSelectApp[19944:c07] content height: 120.00 
```

**Here I output the contentSize :**

```
- (void)tagPressed:(UIButton *)sender {

    NSLog(@"1 content height: %0.2f", self.contentSize.height);
    ...
} 
```

**The console shows:**

```
 2013-04-18 18:17:24.747 TouchSelectApp[19944:c07] 1 content height: 0.00 
```

I don't why the content height is set to zero. Help Me!

Update: Here is the problem I am trying to solve.

I am have a scroll view with buttons. Initially it only shows one button. When the button is pressed tagPressed: is called. Tag Pressed changes the height to show all the buttons. Then when the user selects a button the scrollview's height is changed to the original and the offset is set to the button's origin. The below code works but the animation is all wrong. If I change the offset and before the animation block then it just sets the offset to zero.

```
- (void)tagPressed:(UIButton *)sender {

     CGPoint p;
     float maxHeight = self.items.count * 60;

     if (self.height.constant == maxHeight) {
        self.height.constant = 60;
        p = CGPointMake(0, sender.frame.origin.y-5);     
     }else {
         self.height.constant = maxHeight;
         p = CGPointMake(0, 0);
     }

     [self.superview setNeedsUpdateConstraints];

     [UIView animateWithDuration:0.5f animations: ^{
          [self.superview layoutIfNeeded];
     } completion:^(BOOL finished) {
          [self setContentOffset:p];

     }]; 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T22:38:13.723

如果您使用带有 a 的自动布局`UIScrollView`，则无需设置该`contentSize`属性。有关更多信息，请参见[此处](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/)（向下滚动到关于 的部分`UIScrollView`）。

# python - Maintaining a ratio when splitting up data in python function

> ID：16094099
> 
> 赞同：11
> 
> 时间：2013-04-18T22:25:51.503
> 
> 标签：python, function, numpy

I have some data and I want to split it up into smaller groups that maintain a common ratio. I wrote a function that will take an input of two array and calculate the size ratio and then tell me the options for how many groups I can split it into (if all the groups are the same size), here is the function:

```
def cross_validation_group(train_data, test_data):
    import numpy as np
    from calculator import factors
    test_length = len(test_data)
    train_length = len(train_data)
    total_length = test_length + train_length
    ratio = test_length/float(total_length)
    possibilities = factors(total_length)
    print possibilities
    print possibilities[len(possibilities)-1] * ratio
    super_count = 0
    for i in possibilities:
        if i < len(possibilities)/2:
            pass
        else: 
            attempt = float(i * ratio)
            if attempt.is_integer():
                print str(i) + " is an option for total size with " +  str(attempt) + " as test size and " + str(i - attempt) + " as train size! This is with " + str(total_length/i) + " folds."
            else:
                pass
    folds = int(raw_input("So how many folds would you like to use? If no possibilities were given that would be sufficient, type 0: "))
    if folds != 0:
        total_size = total_length/folds
        test_size = float(total_size * ratio)
        train_size = total_size - test_size
        columns = train_data[0]
        columns= len(columns)
        groups = np.empty((folds,(test_size + train_size),columns))
        i = 0
        a = 0
        b = 0
        for j in range (0,folds):
            test_size_new = test_size * (j + 1)
            train_size_new = train_size * j
            total_size_new = (train_size + test_size) * (j + 1)
            cut_off = total_size_new - train_size
            p = 0
            while i < total_size_new:
                if i < cut_off:
                    groups[j,p] = test_data[a]
                    a += 1
                else:
                    groups[j,p] = train_data[b]
                    b += 1
                i += 1
                p += 1
        return groups
    else:
        print "This method cannot be used because the ratio cannot be maintained with equal group sizes other than for the options you were givens" 
```

So my question is how can I make it so that a third input to the function that will be the number of folds and change the function around so that rather than iterating through to make sure that each group has the same amount with the right ratio, it will just have the right ratio, but varying sizes?

**Addition for @JamesHolderness**

So your method is almost perfect, but here is one issue:

with lengths 357 and 143 with 9 folds, this is the returning list:

```
[(39, 16), (39, 16), (39, 16), (39, 16), (39, 16), (39, 16), (39, 16), (39, 16), (39, 16)] 
```

now when you add up the columns, you get this: `351 144`

the 351 is fine because it's less than 357, but the 144 doesn't work because it is greater than 143! The reason for this is that 357 and 143 are lengths of arrays, so the 144th row of that array does not exist...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T05:07:20.513

这是我认为可能对您有用的算法。

您将 test_length 和 train_length 除以它们的 GCD 以获得简单分数的比率。你把分子和分母加在一起，这就是你的组的大小因素。

例如，如果比例为 3:2，则每组的大小必须是 5 的倍数。

然后，您将总长度除以折叠数以获得第一组的理想大小，这很可能是一个浮点数。您找到小于或等于 5 的最大倍数，这就是您的第一组。

从您的总数中减去该值，然后除以 folds-1 以获得下一组的理想尺寸。再次找到 5 的最大倍数，从总数中减去 5，然后继续计算所有组。

一些示例代码：

```
total_length = test_length + train_length          
divisor = gcd(test_length,train_length)
test_multiple = test_length/divisor
train_multiple = train_length/divisor
total_multiple = test_multiple + train_multiple 

# Adjust the ratio if there isn't enough data for the requested folds
if total_length/total_multiple < folds:
  total_multiple = total_length/folds
  test_multiple = int(round(float(test_length)*total_multiple/total_length))
  train_multiple = total_multiple - test_multiple

groups = []
for i in range(folds,0,-1):
  float_size = float(total_length)/i
  int_size = int(float_size/total_multiple)*total_multiple
  test_size = int_size*test_multiple/total_multiple
  train_size = int_size*train_multiple/total_multiple
  test_length -= test_size    # keep track of the test data used
  train_length -= train_size  # keep track of the train data used
  total_length -= int_size
  groups.append((test_size,train_size))

# If the test_length or train_length are negative, we need to adjust the groups
# to "give back" some of the data.
distribute_overrun(groups,test_length,0)
distribute_overrun(groups,train_length,1) 
```

这已更新以跟踪每个组（测试和训练）使用的大小，但如果我们最初使用太多也不必担心。

然后在最后，如果有任何超支（即`test_length`或`train_length`已经变为负数），我们通过在尽可能多的项目中减少比率的适当一侧来将超支分配回组中，以使超支回到零。

该`distribute_overrun`功能包括在下面。

```
def distribute_overrun(groups,overrun,part):
    i = 0
    while overrun < 0:
      group = list(groups[i])
      group[part] -= 1
      groups[i] = tuple(group)
      overrun += 1
      i += 1 
```

最后，groups 将是一个包含每个组的 test_size 和 train_size 的元组列表。

如果这听起来像您想要的那种东西，但您需要我扩展代码示例，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T10:15:45.183

在另一个问题中，作者想进行与您类似的交叉验证。请看[一下这个答案](https://stackoverflow.com/a/16109485/832621)。解决您的问题的答案，就像：

```
import numpy as np
# in both train_data the first line is used for the cross-validation,
# and the other lines will follow, so you can add as many lines as you want
test_data = np.array([ 0.,  1.,  2.,  3.,  4.,  5.])
train_data  = np.array([[ 0.09,  1.9,  1.1,  1.5,  4.2,  3.1,  5.1],
                       [    3,    4,  3.1,   10,   20,    2,    3]])

def cross_validation_group( test_data, train_data):
    om1,om2 = np.meshgrid(test_data,train_data[0])
    dist = (om1-om2)**2
    indexes = np.argsort( dist, axis=0 )
    return train_data[:, indexes[0]]

print cross_validation_group( test_data, train_data )
# array([[  0.09,   1.1 ,   1.9 ,   3.1 ,   4.2 ,   5.1 ],
#        [     3 ,  3.1 ,     4 ,     2 ,    20 ,     3 ]]) 
```

您将拥有`train_data`与 中定义的间隔相对应的值`test_data`。

# java - 将 BufferedImage 转换为 double [ ] [ ]

> ID：16094104
> 
> 赞同：1
> 
> 时间：2013-04-18T22:26:32.060
> 
> 标签：java, bufferedimage

我尝试将 BufferedImage 转换为双 [][]。

我有这段代码，但是在参数中我有一个双 [] []，但此时我不知道如何将我的图像转换为双 [] []。

这是我的功能：

```
 public static double[][] reshape(double[][] A, int m, int n) {
    int origM = A.length;
    int origN = A[0].length;
    if(origM*origN != m*n){
        throw new IllegalArgumentException("New matrix must be of same area as matix A");
    }
    double[][] B = new double[m][n];
    double[] A1D = new double[A.length * A[0].length];

    int index = 0;
    for(int i = 0;i<A.length;i++){
        for(int j = 0;j<A[0].length;j++){
            A1D[index++] = A[i][j];
        }
    }
    index = 0;
    for(int i = 0;i<n;i++){
        for(int j = 0;j<m;j++){
            B[j][i] = A1D[index++];
        }
    }
    return B;
} 
```

# php - PHP - 将元素添加到数组 - 网络浏览器中的连接重置错误

> ID：16094105
> 
> 赞同：0
> 
> 时间：2013-04-18T22:26:32.033
> 
> 标签：php, arrays, connection

为什么要通过以下方式向数组添加元素：

$数组名[]=....

在 webbrowser 中生成错误：CONNECTION RESET...

会不会是服务器配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:30:21.840

好吧，什么 php 版本，你在数组中添加什么？？？我只有在 php 崩溃时才经历过这种情况，所以请确保 php 不会崩溃，因为这会导致连接重置。（查看 apache 错误日志....）

# elasticsearch - Elasticsearch 热门关键词

> ID：16094112
> 
> 赞同：9
> 
> 时间：2013-04-18T22:26:51.730
> 
> 标签：elasticsearch

elasticsearch 是否提供了一种跟踪热门关键字的方法？例如，在给定的时间段内，我想知道查询中出现频率最高的关键字。

如果elasticsearch没有这样的功能，那么使用elasticsearch实现它的好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T23:10:41.117

我认为没有内置的方法，但是通过[术语方面应该很容易实现](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet/)

你需要做的是：

1.  将所有查询关键字与时间戳一起保存在弹性搜索索引中
2.  运行按您感兴趣的时间间隔过滤的 match_all 查询，并在其上应用术语方面

~~不幸的是，我没有时间给你写一个例子，但这应该会引导你找到解决方案。~~

这是一个例子：

```
// Demo index
curl -XDELETE 'http://localhost:9200/queries/'
curl -XPUT 'http://localhost:9200/queries/'

// Add some data
curl -XPUT 'http://localhost:9200/queries/query/1' -d '
{ 
    "date": "2013-02-19T12:57:23", 
    "query": "Trying out ElasticSearch, so far so good?"
}'

curl -XPUT 'http://localhost:9200/queries/query/2' -d '
{ 
    "date": "2013-03-02T11:27:23", 
    "query": "Lets give ElasticSearch another try"
}'

curl -XPUT 'http://localhost:9200/queries/query/3' -d '
{ 
    "date": "2013-04-02T08:27:23", 
    "query": "OK, why dont we stick to SOLR?"
}'

curl -XPUT 'http://localhost:9200/queries/query/4' -d '
{ 
    "date": "2013-04-19T11:27:23", 
    "query": "Couse ElasticSearch is so much cooler, its bonsai cool"
}'

// Query it
curl -XGET 'http://localhost:9200/queries/query/_search?pretty=true' -d '
{
    "query" : {
        "filtered" : {
            "filter" : {
                "range" : {
                    "date" : {
                        "gte" : "2013-01-01T00:00:00",
                        "lt" : "2013-04-01T00:00:00"
                    }
                }
            },
            "query" : {
                "match_all" : {}
            }
        }
    },
    "facets": {
        "keywords": {
            "terms": {
                "field": "query"
            }
        }
    }
}
' 
```

调整查询中的日期范围以查看输出的变化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-27T21:54:01.667

已批准的答案不再起作用，因为 Facets 已被删除并替换为[术语聚合](http://nocf-www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:21:28.203

ES 没有这个内置的，但是有一个由 Sematext 运行的免费搜索分析服务（免责声明：我在那里工作）你可以使用它 - 见[http://sematext.com/search-analytics/index.html](http://sematext.com/search-analytics/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-10T15:16:33.707

由于elasticsearch没有这样的内置功能，您可以使用google analyitc等免费服务并将与elasticsearch通信的包装服务集成。

# html - 分页和 rel next\prev

> ID：16094119
> 
> 赞同：2
> 
> 时间：2013-04-18T22:27:29.240
> 
> 标签：html

当我阅读关于 rel="prev" 和 rel="next" 的谷歌文档时，他们的所有示例都在`<link>`元素上。当我查看堆栈溢出代码时，它是在`<a>`标签上完成的。

有一个 rel="prev" 就很`<a>`好吗？我似乎找不到文档。还是它总是必须在`<link>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:41:26.007

该`rel`属性在两个标签中具有相同的含义，并且可以在每个标签中使用。

然而与 不同`a`的是，`link`可能只出现在`HEAD`文档的部分中，尽管它可能出现多次。虽然`LINK`没有内容，但它传达了可以由用户代理以各种方式呈现的关系信息（例如，带有链接下拉菜单的工具栏）。资料来源：[W3C](http://www.w3.org/TR/html4/struct/links.html#edef-LINK)

在`link`：

**所需**的rel 属性指定当前文档和链接的文档/资源之间的关系。

在`a`：

rel 属性指定当前文档和链接文档之间的关系。仅在存在 href 属性时使用

同样根据 W3C： 指定的链接`LINK`不与文档的内容一起呈现，尽管用户代理可以以其他方式呈现它们（例如，作为导航工具）。即使它们不用于导航，这些链接也可以以有趣的方式解释。例如，将一系列 HTML 文档打印为单个文档的用户代理可以使用此链接信息作为形成连贯线性文档的基础。

# c# - 如何在 UnitTest MVC 中处理 httpcontext

> ID：16094126
> 
> 赞同：1
> 
> 时间：2013-04-18T22:27:41.493
> 
> 标签：c#, asp.net-mvc, unit-testing, httpcontext

运行单元测试时出现以下错误：用户代码未处理 NullReferenceException。对象引用未设置为对象的实例。

不知道我哪里出错了。请指教。

我的 SessionManager.cs 类

```
public static int customerID
{
    get
    {
        if (HttpContext.Current.Session != null && 
            HttpContext.Current.Session[_customerID] != null)
        {
            return Convert.ToInt32(HttpContext.Current.Session[_customerID]);
        }
        else
        {
            throw new Ramsell.ExceptionManagement.RamsellException();
        }
    }
    set
    {
        if (HttpContext.Current.Session == null) return;
        HttpContext.Current.Session[_customerID] = value;

    }
} 
```

参与者控制器

```
public ActionResult Index()
{
     int custId = Convert.ToInt32(SessionManager.customerID);
     //code logic about participant lists
     return View();
} 
```

测试方法 ：

```
 [TestMethod]
    public void IndexTest()
    {
        ParticipantController pCTarget = new ParticipantController();
        const int page = 1;
        const string sortBy = "FirstName";
        const bool ascending = true;
        const string partname = ""; 
        const int success = -1;
        const string id = "";
        var expected = typeof(ParticipantListViewModel);
        ViewResult result = pCTarget.Index(page, sortBy, ascending, partname, success, id) as ViewResult;
        Assert.AreEqual(expected, result.Model.GetType());

    } 
```

//这是我的模拟类

```
 public Mock<RequestContext> RoutingRequestContext { get; private set; }
 public Mock<HttpContextBase> Http { get; private set; }
    public Mock<HttpServerUtilityBase> Server { get; private set; }
    public Mock<HttpResponseBase> Response { get; private set; }
    public Mock<HttpRequestBase> Request { get; private set; }
    public Mock<HttpSessionStateBase> Session { get; private set; }
    public Mock<ActionExecutingContext> ActionExecuting { get; private set; }
    public HttpCookieCollection Cookies { get; private set; }

    public MockContext()
    {
        this.RoutingRequestContext = new Mock<RequestContext>(MockBehavior.Loose);
        this.ActionExecuting = new Mock<ActionExecutingContext>(MockBehavior.Loose);
        this.Http = new Mock<HttpContextBase>(MockBehavior.Loose);
        this.Server = new Mock<HttpServerUtilityBase>(MockBehavior.Loose);
        this.Response = new Mock<HttpResponseBase>(MockBehavior.Loose);
        this.Request = new Mock<HttpRequestBase>(MockBehavior.Loose);
        this.Session = new Mock<HttpSessionStateBase>(MockBehavior.Loose);
        this.Cookies = new HttpCookieCollection();

        this.RoutingRequestContext.SetupGet(c => c.HttpContext).Returns(this.Http.Object);
        this.ActionExecuting.SetupGet(c => c.HttpContext).Returns(this.Http.Object);
        this.Http.SetupGet(c => c.Request).Returns(this.Request.Object);
        this.Http.SetupGet(c => c.Response).Returns(this.Response.Object);
        this.Http.SetupGet(c => c.Server).Returns(this.Server.Object);
        this.Http.SetupGet(c => c.Session).Returns(this.Session.Object);
        this.Request.Setup(c => c.Cookies).Returns(Cookies);

        var sessionContainer = new HttpSessionStateContainer("userID", new SessionStateItemCollection(),
                                                new HttpStaticObjectsCollection(), 1, true,
                                                HttpCookieMode.AutoDetect,
                                                SessionStateMode.InProc, false);

        this.Session.Setup(c => c.Add("AspSession", typeof(HttpSessionState).GetConstructor(
                                    BindingFlags.NonPublic | BindingFlags.Instance,
                                    null, CallingConventions.Standard,
                                    new[] { typeof(HttpSessionStateContainer) },
                                    null)
                            .Invoke(new object[] { sessionContainer })));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:16:26.140

当您为控制器编写单元测试时，您应该单独测试它 - 即应该模拟控制器的依赖项。因此，请确保您的控制器依赖于抽象而不是具体`SessionManager`实现（使您的类非静态并`ISessionManager`从管理器类中提取接口）：

```
public interface ISessionManager
{
   int CustomerID { get; set; }
} 

public class HttpSessionManager : ISessionManager
{
    // your current implementation goes here
} 
```

然后模拟这个抽象并将其注入控制器（带 Moq 的示例）：

```
[TestMethod]
public void IndexTest()
{
    var sessionManager = new Mock<ISessionManager>(); // Mock dependency
    sessionManager.Setup(m => m.CustomerID).Returns(42);

    const int page = 1;
    const string sortBy = "FirstName";
    const bool ascending = true;
    const string partname = ""; 
    const int success = -1;
    const string id = "";
    var expectedModelType = typeof(ParticipantListViewModel);
    ParticipantController pCTarget = 
         new ParticipantController(sessionManager.Object); // Inject dependency

    var view = pCTarget.Index(page, sortBy, ascending, partname, success, id)
               as ViewResult;

    sessionManager.VerifyGet(m => m.CustomerID); // Verify dependency was called
    Assert.AreEqual(expectedModelType, view.Model.GetType());
} 
```

这是控制器代码：

```
public class ParticipantController : Controller
{
    private readonly ISessionManager _sessionManager;

    public ParticipantController(ISessionManager sessionManager) 
    {
        _sessionManager = sessionManager;
    }

    public ActionResult Index()
    {
        int custId = _sessionManager.CustomerID;
        //code logic about participant lists
        return View();
    }
} 
```

请注意，单元测试的目标是确保代码的每一小部分都按预期工作。如果您将依赖于测试中的其他单元，那么测试可能会因两个原因而失败 - 您的测试单元的行为与预期不符，或者依赖项有问题您已经遇到了这种情况 - 控制器测试失败，因为会话管理器抛出异常。测试表明控制器的行为不像预期的那样。这是真的吗？不 - 它的会话管理器的行为不像预期的那样。

# html - 如何禁用 iframe 功能

> ID：16094127
> 
> 赞同：0
> 
> 时间：2013-04-18T22:27:41.823
> 
> 标签：html, iframe

我在页面上有多个 iframe，但目前只有一个应该处于活动状态。因此，当我在 frame1、frame2、frame3 中导航时一切正常。有切换 iframe 的主菜单。现在，问题是当我在浏览器中点击返回按钮时，它总是会在最后一次导航的 iframe 中执行返回操作。我需要在“活动”中执行此操作。目前我只隐藏不活动的 iframe，但我需要完全禁用它们。我需要多个 iframe，因此，当我在菜单选项之间切换时，会保留每个 iframe 中的导航。有没有办法完全禁用 iframe，所以它的行为就像它在页面上不存在但不卸载它的内容一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:01:17.907

我不确定在您的情况下是否禁用 iframe。您可以使用 javascript 实现某些东西 - 例如使用以下内容触发特定目标 iframe 上的事件的按钮：

```
<a target="the_active_iframe" href="nav();">Link to a location</a>
<iframe name="the_active_iframe"></iframe> 
```

并在javascript函数中

```
nav() {
  window.navigate("new location",target="the_active_iframe");
} 
```

您可以以类似的方式实现向后和向前导航：

**[iframe 中的后退和前进按钮](https://stackoverflow.com/questions/3254985/back-and-forward-buttons-in-an-iframe)**

另一个可行的想法是使用一些悬停或鼠标悬停功能，来定义哪个框架是活动的，并使用窗口导航事件到那个特定的框架，但我会使用按钮......这对我来说似乎不那么令人困惑。

**编辑：**如果你想像你说的那样做......你需要将每个 iframe 的历史分别保存到 javascript 中的一个变量中......并在鼠标悬停（或类似的东西）上`window.history`用当前- iframe 历史...我从来没有尝试过做这样的事情...但它可能会奏效。

> 在这里您可以找到如何保存特定 iframe 的历史记录： [仅跟踪 iframe 历史记录](https://stackoverflow.com/questions/10745564/track-only-iframe-history)
> 
> 那么您需要做的只是将 iframe 的鼠标悬停在相应的 iframe 导航历史记录上覆盖 window.history ...。

# c - 这段代码中的分段错误？

> ID：16094128
> 
> 赞同：3
> 
> 时间：2013-04-18T22:27:43.563
> 
> 标签：c, segmentation-fault, strtok

```
 char *commandstrings[MAXARGS];

    commandstr = strtok(line,"|");
    int i = 0;

    while(commandstr != NULL){
      commandstrings[i] = commandstr;
      printf("%s \n",commandstr);
      commandstr = strtok(NULL,"|");
      i++;
    }

     printf("first parsing complete!"); 
```

大家好。我正在尝试使用 strtok 将字符串分成各种子字符串，并将它们存储到一个名为“commandstrings”的字符串数组中。

问题是我在到达最终 printf 之前遇到了分段错误。假设我将以下行作为参数：“lol | omg | bbq”

程序打印：
lol
omg
bbq
分段错误（核心转储）

可能是什么问题呢？我认为我不需要用其余的代码来打扰你们，因为“while”循环执行得很好，并且在离开 cicle 之前发生错误，因为最后一次打印没有显示。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:43:24.823

以下对我有用。也可在[http://codepad.org/FZmK4usU](http://codepad.org/FZmK4usU)

```
#include <stdio.h>
#include <string.h>

int main() {

    char line[] = "lol | omg | bbq";
    enum{ MAXARGS = 10 };
    char const *commandstrings[MAXARGS];

    int i = 0;
    char * commandstr = strtok(line,"|");

    while(commandstr != NULL){
        commandstrings[i] = commandstr;
        printf("%s \n",commandstrings[ i ]);
        i++;
        commandstr = strtok(NULL,"|");
    }

    printf("first parsing complete!");
} 
```

# c# - 总结 Jqgrid 上的列

> ID：16094129
> 
> 赞同：0
> 
> 时间：2013-04-18T22:27:56.217
> 
> 标签：c#, asp.net-mvc-3, jqgrid

我阅读了有关使用 jqgrid 中的 getCol 方法在此[问题](https://stackoverflow.com/questions/7392987/jqgrid-total-amount-row)的网格页脚中显示汇总列的信息，例如：

```
var grid = $("#list"),
sum = grid.jqGrid('getCol', 'amount', false, 'sum');

grid.jqGrid('footerData','set', {ID: 'Total:', amount: sum}); 
```

但是当网格包含寻呼机时，计算仅针对显示的数据发生，我需要在文本框中显示列的**总和**。

这应该使用 foreach 来完成，还是有一些方法可以最有效地做到这一点？

显然我可以将它包含在我的模型中，但想在客户端做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:00:31.543

除非您传递整个数据集，否则无法对多个页面执行此操作。这样做很容易，并将这些数据作为用户数据的一部分向下传递。

前任

控制器：

```
 foreach (var item in dataset)
    {
        summaryTotal += (sum of some relevant values)
    }
    ...
    records = totalRecords,                
    userdata = new { ColumnNameForFooterSubtotal = summaryTotal.ToString() },
    rows = (
    ... 
```

然后在您看来，我建议使用页脚，然后您在控制器中计算的值将出现在您上面使用的列名的页脚行中。(ColumnNameForFooterSubtotal)

```
 ...//jqGrid setup
   //turn on the footer   
   footerrow: true,
   userDataOnFooter: true, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:02:27.873

您可以使用`grid.jqGrid("getGridParam", "data")`first 来获取网格的内部数据。数据包含有关*所有页面*的信息。然后你可以做一个简单`for`的循环来枚举由返回的数组中的项目`grid.jqGrid("getGridParam", "data")`。每个项目都有属性`amount`。因此，您需要使用`parseInt(item.amount, 10)`将数据转换为 int （或使用`parseFloat`）并计算所需的总和。

# grails - grails中具有弹簧安全性的动态ldap

> ID：16094130
> 
> 赞同：0
> 
> 时间：2013-04-18T22:28:09.107
> 
> 标签：grails, spring-security, ldap

我正在使用 spring 安全插件编写一个 grails 应用程序，并且想使用 spring ldap 插件。我需要能够在不重新编译的情况下更改 ldap 设置，所以我不相信我可以在配置文件中设置它。我已经让它与不同的 ldap 插件一起工作，但它们在我喜欢的 spring security 中表现不佳。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:29:13.573

一种方便的选择可能是使用外部配置文件（在 Grails 文档中描述[）](http://grails.org/doc/latest/guide/conf.html#configExternalized)。

例如，您可以创建一个`custom-ldap-settings.properties`包含 Spring Security / LDAP 配置的单独文件。部分样本：

```
...
grails.plugins.springsecurity.ldap.context.server = ldap://<AD Domain IP Address>
grails.plugins.springsecurity.ldap.search.base = ou=Accounts,dc=domain,dc=com
grails.plugins.springsecurity.ldap.search.filter = (AccountName={0})
... 
```

然后，您可以将此`.properties`文件放在您的类路径中进行部署，然后将这些设置合并到您的主配置中`Config.groovy`：

```
grails.config.locations = [ "classpath:custom-ldap-settings.properties" ] 
```

您可以更改`.properties`此外部文件，而无需重新编译或重建您的 .war 文件。更新`properties`文件中的设置后，您需要做的就是重新启动应用程序或容器（即 Apache Tomcat）。

# java - split() a String to a Stringarray, and not getting a blank at [0]

> ID：16094131
> 
> 赞同：2
> 
> 时间：2013-04-18T22:28:10.770
> 
> 标签：java, arrays, string, split, whitespace

I'm trying to split() a String with no whitespaces, but getting a blank at [0].

```
String s = "..1..3..";
String[] result2 = s.split("");
System.out.println(result2[0]); // giving me a blank space 
```

I'v realized that "" might not be the right one, but cant find a alternative. Is it possible to split on something else, or will I always get this whitespace when using split() this way?

EDIT SOLUTION:

```
 StringBuilder response = new StringBuilder();
     while((i = in.read()) != -1){     
            response.append((char)i);  
     }
     result = response.toString();   
     result = result.replace("\n", "").replace("\r", ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:31:52.360

*   `0`包含从字符串开头到第一个点的数据（即空字符串）
*   `1`包含第一个点
*   `2`包含第二个点
*   `3`包含字符串`1`
*   ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:40:53.867

您的正则表达式在输入中的每个位置拆分，包括第一个位置，它位于输入的开头 -*在*第一个字符之前。然后找到的第一个元素是输入的开头和第一个字符之间的内容，这当然是一个零长度的字符串 - 一个空白。

但是，您不需要特殊代码来处理此问题。要获取`String`as中的每个字符`String[]`，您需要使用此正则表达式：

```
String[] chars = input.split("(?<=.)"; 
```

这个正则表达式是*后面*的意思，意思是“在每个字符之后”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:31:51.970

您可以使用该`charAt()`方法做您所做的事情。

如果您按照自己的方式进行操作，则可能需要删除返回数组的第一个元素。一种方法是使用`Arrays.copyOfRange()`.

```
String[] newArr = Arrays.copyOfRange(oldArr, 1, oldArr.length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:40:02.927

如果你真的需要它是 String[] 类型，为什么不直接`String.toCharArray();`将该数组转换为`String[]` ，否则 char[] 看起来正是你想要做的，除了你不会在元素 0 中得到那些有趣的空字符串和9.

# c# - 通过 Socket 对对象进行 XML 序列化

> ID：16094137
> 
> 赞同：0
> 
> 时间：2013-04-18T22:29:13.693
> 
> 标签：c#, .net, tcp, xml-serialization, xml-deserialization

我的想法-> 客户端服务器系统，通过 TCP 套接字交换文本消息（字符串）。我希望客户端和服务器之间的协议基于 XML。而且因为套接字之间的信息是作为 发送的`byte`，所以我必须强制转换。所以这就是我所做的：`TheMessage`具有 type 属性的类`string`。我使用要作为对象属性发送的字符串来制作该类的对象，并使其从`Object`到`byte[]`through `XmlSerialization`。另一方面，我做反之亦然的过程。 *这就是我序列化并从客户端发送到服务器的方式：*

```
msg.Message = Console.ReadLine();
byte[] writeBuff = XmlRefacrotClient.ObjectToByteArray(msg);
Stream stm = client.GetStream();
stm.Write(writeBuff, 0, writeBuff.Length); 
```

*这是我用于序列化的方法：*

```
public static byte[] ObjectToByteArray(TheMessage obj)
{
    try
    {
        MemoryStream ms = new MemoryStream();
        XmlSerializer xmlS = new XmlSerializer(typeof(Message.TheMessage));
        XmlTextWriter xmlTW = new XmlTextWriter(ms, Encoding.UTF8);

        xmlS.Serialize(xmlTW, obj);
        ms = (MemoryStream)xmlTW.BaseStream;

        return ms.ToArray();
    }
    catch(Exception)
    {
        throw;
    }
} 
```

*这就是我在服务器端接收数据的方式：*

```
byte[] readBuff = new byte[1024];
s.Receive(readBuff);
String str = (XmlRefactorServer.ByteArrayToObject(readBuff)).ToString();

Console.WriteLine(str); 
```

*这是反序列化的方法：*

```
public static Object ByteArrayToObject(byte[] arr)
{
    try
    {
        XmlSerializer xmlS = new XmlSerializer(typeof(Message.TheMessage));
        MemoryStream ms = new MemoryStream();
        XmlTextWriter xmlTW = new XmlTextWriter(ms, Encoding.UTF8);

        return xmlS.Deserialize(ms);
    }
    catch(Exception)
    {
        throw;
    }
} 
```

一切都运行顺利，直到方法。我得到`return`的描述就行了。`ByteArrayToObject``InvalidOperationException``There is an error in XML document (0, 0).``return xmlS.Deserialize(ms);`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:42:22.863

尝试这个。干净多了：

```
 //---------------------------------------------------------------------
        public static Byte[] ObjectToByteArray<T>(T obj)
        {
            using (MemoryStream ms = new MemoryStream())
            {
                XmlSerializer xmlS = new XmlSerializer(typeof(T));
                xmlS.Serialize(ms, obj);

                return ms.ToArray();
            }
        }
        //---------------------------------------------------------------------
        public static T ByteArrayObject<T>(Byte[] bObj)
        {
            using (MemoryStream ms = new MemoryStream(bObj))
            {
                XmlSerializer xmlS = new XmlSerializer(typeof(TheMessage));
                return (T)xmlS.Deserialize(ms);
            }
        }
        //---------------------------------------------------------------------
        public static void Sending(Byte[] bData)
        {
            Stream stm = client.GetStream();

            // always write size first when using TCP
            Byte[] bSize = BitConverter.GetBytes(bData.Length);
            stm.Write(bSize, 0, bSize.Length);
            stm.Write(bData, 0, bData.Length);
        }

        //---------------------------------------------------------------------
        public static void Receiving(Byte[] bData)
        {
            Byte[] bSize = new Byte[sizeof(Int32)];
            s.Read(bSize, 0, bSize.Length);

            Byte[] bData = new Byte[BitConverter.ToInt32(bSize, 0)];
            s.Read(bData, 0, bData.Length);

            TheMessage m = ByteArrayObject<TheMessage>(bData);
        } 
```

# java - 如果语句没有按预期工作

> ID：16094139
> 
> 赞同：1
> 
> 时间：2013-04-18T22:29:23.447
> 
> 标签：java, android, if-statement, reversi

基本上，我目前正在尝试为 Android 制作一个黑白棋游戏，而我的 if 语句让我有点头疼，似乎如果条件适合不止一个，它只是通过其中一个语句的动作然后离开另一个。我的代码如下所示：

```
if (check[position] == 0
                            && (check[position - 8] == 2
                                    || check[position + 8] == 2
                                    || check[position + 1] == 2
                                    || check[position - 1] == 2
                                    || check[position - 9] == 2
                                    || check[position + 9] == 2
                                    || check[position - 7] == 2 || check[position + 7] == 2)) {

                        if (check[position + 8] == 2) {
                            for (int i = position; i < 56; i += 8) {
                                if (check[i] == 1) {
                                    for (int j = position; j < i; j += 8) {
                                        check[j] = 1;
                                    }
                                    playerno = 2;
                                    break;
                                } else
                                    break;
                            }
                        } else if (check[position - 8] == 2) {
                            for (int i = position; i > 8; i -= 8) {
                                if (check[i] == 1) {
                                    for (int j = position; j > i; j -= 8) {
                                        check[j] = 1;
                                    }
                                    playerno = 2;
                                    break;
                                } else
                                    break;
                            }
                        } else if (check[position + 1] == 2) {
                            for (int i = position; i < board.length; i++) {
                                if (check[i] == 1) {
                                    for (int j = position; j < i; j++) {
                                        check[j] = 1;
                                    }
                                    playerno = 2;
                                    break;
                                }
                                if (i == 7 || i == 15 || i == 23 || i == 31
                                        || i == 39 || i == 47 || i == 55
                                        || i == 63) {
                                    break;
                                }
                            }
                        } else if (check[position - 1] == 2) {
                            for (int i = position; i > 0; i--) {
                                if (check[i] == 1) {
                                    for (int j = position; j > i; j--) {
                                        check[j] = 1;
                                    }
                                    playerno = 2;
                                    break;
                                }
                                if (i == 0 || i == 8 || i == 16 || i == 24
                                        || i == 32 || i == 40 || i == 48
                                        || i == 56) {
                                    break;
                                }
                            }
                        } 
```

Check 只是一个 int 数组，它记录了哪个玩家在棋盘上持有该特定棋子 现在，由于某种原因，如果我的位置满足其中两个条件，它只会通过一个 if 语句，而且通常这会产生游戏将其视为无效的举动，我想知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:48:26.447

> 如果我的职位满足其中两个条件，它只会通过其中一个 if 语句

你指的是这个说法吗？

```
if (conditionA) {
  BlockA
} else if (conditionB) {
  BlockB
}  else if (conditionC) {
  BlockC
}  else if (conditionD) {
  BlockD
} 
```

如果你这样做，难怪只有一个 if 块被执行。只有第一个条件的块`true`被执行。

如果要允许执行多个块，请将其更改为：

```
if (conditionA) {
  BlockA
} 
if (conditionB) {
  BlockB
} 
if (conditionC) {
  BlockC
}
if (conditionD) {
  BlockD
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:32:42.960

首先，您的条件极其复杂且难以阅读。尝试简化它们。尝试将一个复杂的条件分解为几个更简单的表达式。并使用调试器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:56:08.277

AlexR 是对的，你的逻辑太复杂了，而且格式让你的代码非常难以阅读，从而很难调试。

我不会为您解决所有问题，但这里有一些建议的更改。大多数情况下，你应该把你的逻辑分解成一口大小的块。

编辑：根据我上面的评论，将板子实现为一个类：

```
class Board {
    private final int[] check = new int[BOARD_WIDTH*BOARD_HEIGHT];
    public Board() { for (int i=0; i < BOARD_WIDTH*BOARD_HEIGHT; check[i++] = 0); }
    public final int get(int x, int y) { return check[y*BOARD_WIDTH + x]; }
    public final void set(int x, int y, int val) { check[y*BOARD_WIDTH+x] = val; }

    /**
     * Return true if this square is free
     */
    public final boolean isFree(int x, int y) {
      if (x < 0 || x >= BOARD_WIDTH || y < 0 || y >= BOARD_HEIGHT) return false;
      int position = y*BOARD_WIDTH + x;
      return check[position] == 0;
    }

    /**
     * Return true if this square is occupied by opponent
     */
    public final boolean isOccupiedBy2(int x, int y) {
      if (x < 0 || x >= BOARD_WIDTH || y < 0 || y >= BOARD_HEIGHT) return false;
      int position = y*BOARD_WIDTH + x;
      return check[position] == 2;
    }

    /**
     * Return true if any neighboring square is occupied by opponent
     */
    final boolean isNeighborOccupied(int x, int y) {
      for (int i=x-1; i >= x+1; ++i)
        for (int j=y-1; j >= y+1; ++j)
          if ((i != x || j != y) && isOccupiedBy2(i,j)) return true;
      return false;
    }
    // etc.
} 
```

现在从那里重新编写上面的逻辑：

```
if (board.isFree(x,y) && board.isNeighborOccupied(x,y)) {
    if (board.isOccupiedBy2(x,y+1)) {
        ...
    }
    else if (board.isOccupiedBy2(x,y-1)) {
        ...
    }
    else if (board.isOccupiedBy2(x+1,y)) {
        ...
    }
    else if (board.isOccupiedBy2(x-1,y)) {
        ...
    }
} 
```

看看这是多么容易阅读？调试也会容易得多。

最后，看看 Eran 的帖子是否没有解决您的错误。这四个条件中只有一个会被执行。由于您只测试八个相邻方格中的四个，我猜您的意思是测试上、左、下、右，所以也许第二个“else”是一个错误。

# regex - 正则表达式使用 qoutes 获取 IP 地址

> ID：16094143
> 
> 赞同：0
> 
> 时间：2013-04-18T22:30:05.277
> 
> 标签：regex, web-applications

我有一个带有 ip 地址的文本文件，我需要提取文件中的所有 IP 地址并将它们保存到数据库中，IP 地址的格式如下：

```
'heres an IP' = '134.981.652.32' 
```

这是我用来查找 IP 地址的正则表达式：

```
"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$" 
```

这在查找没有 qoutes 的 IP 地址时效果很好，我需要知道如何在它们包含上述示例的引号时找到它们。（我没有选择修改文件中包含的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:32:28.737

添加引号并删除锚点：

```
"'(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])'" 
```

# android - 在 ActionBar 上使用 onNavigationItemSelected 的活动循环

> ID：16094149
> 
> 赞同：2
> 
> 时间：2013-04-18T22:30:31.217
> 
> 标签：android, android-fragments, android-activity, android-actionbar, android-listfragment

我一直在尝试编写一个具有 ActionBar 的活动，您可以在其中选择所需的视图。我创建了一个基本活动类，其中包含大部分 ActionBar 特定代码，以扩展到导航下拉微调器中的类。这是基类的代码。

```
 public class MainFlowActivity extends FragmentActivity implements ActionBar.OnNavigationListener {

    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

     protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.fragment_main);

         // Set up the action bar to show a dropdown list.
                final ActionBar actionBar = getActionBar();

                actionBar.setDisplayShowTitleEnabled(false);
                actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

            // Set up the dropdown list navigation in the action bar.
                actionBar.setListNavigationCallbacks(
                // Specify a SpinnerAdapter to populate the dropdown list.
                        new ArrayAdapter(getActionBarThemedContextCompat(),
                                android.R.layout.simple_spinner_dropdown_item,
                                android.R.id.text1, new String[] {
                                        getString(R.string.title_section1),
                                        getString(R.string.title_section2),
                                        getString(R.string.title_section3), }), this);

     }

     @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
        }

        @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        private Context getActionBarThemedContextCompat() {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
                return getActionBar().getThemedContext();
            } else {
                return this;
            }
        }

        @Override
        public void onRestoreInstanceState(Bundle savedInstanceState) {
            // Restore the previously serialized current dropdown position.
            if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
                getActionBar().setSelectedNavigationItem(savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
            }
        }

        @Override
        public void onSaveInstanceState(Bundle outState) {
            // Serialize the current dropdown position.
            outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar().getSelectedNavigationIndex());
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.

            getMenuInflater().inflate(R.menu.main, menu);

            return true;
        }

        @Override
        public boolean onNavigationItemSelected(int position, long id) {

            // When the given dropdown item is selected, show its contents in the
            // container view.

            switch (position){

            case 0: 
                startActivity(new Intent("com.example.portarius.mainflow.ITEMLISTACTIVITY"));
                return true;
            case 1:
                startActivity(new Intent("com.example.portarius.mainflow.TESTDUMMYLOGG"));
                return true;
            case 2:
                startActivity(new Intent("com.example.portarius.mainflow.TESTDUMMYKARTVIEW"));
                return true;

            default:
                return onNavigationItemSelected(position, id);
            }

        }

} 
```

这是继承此类的活动之一：

```
 /**
 * An activity representing a list of Items. This activity has different
 * presentations for handset and tablet-size devices. On handsets, the activity
 * presents a list of items, which when touched, lead to a
 * {@link ItemDetailActivity} representing item details. On tablets, the
 * activity presents the list of items and item details side-by-side using two
 * vertical panes.
 * 

 * The activity makes heavy use of fragments. The list of items is a
 * {@link ItemListFragment} and the item details (if present) is a
 * {@link ItemDetailFragment}.
 *  `* This activity also implements the required {@link ItemListFragment.Callbacks}
 * interface to listen for item selections.
 */
public class ItemListActivity extends MainFlowActivity implements
        ItemListFragment.Callbacks {

    /**
     * Whether or not the activity is in two-pane mode, i.e. running on a tablet
     * device.
     */
    private boolean mTwoPane;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_item_list);

        if (findViewById(R.id.item_detail_container) != null) {
            // The detail container view will be present only in the
            // large-screen layouts (res/values-large and
            // res/values-sw600dp). If this view is present, then the
            // activity should be in two-pane mode.
            mTwoPane = true;

            // In two-pane mode, list items should be given the
            // 'activated' state when touched.
            ((ItemListFragment) getSupportFragmentManager().findFragmentById(
                    R.id.item_list)).setActivateOnItemClick(true);
        }

        // TODO: If exposing deep links into your app, handle intents here.
    }

    /**
     * Callback method from {@link ItemListFragment.Callbacks} indicating that
     * the item with the given ID was selected.
     */
    @Override
    public void onItemSelected(String id) {
        if (mTwoPane) {
            // In two-pane mode, show the detail view in this activity by
            // adding or replacing the detail fragment using a
            // fragment transaction.
            Bundle arguments = new Bundle();
            arguments.putString(ItemDetailFragment.ARG_ITEM_ID, id);
            ItemDetailFragment fragment = new ItemDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.item_detail_container, fragment).commit();

        } else {
            // In single-pane mode, simply start the detail activity
            // for the selected item ID.
            Intent detailIntent = new Intent(this, ItemDetailActivity.class);
            detailIntent.putExtra(ItemDetailFragment.ARG_ITEM_ID, id);
            startActivity(detailIntent);
        }
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.

        getMenuInflater().inflate(R.menu.main, menu);

        return true;
    }
}` 
```

我怎样才能更有效地做到这一点？现在，当我启动其中一个 Activity 时，它会循环初始化位。它一直在循环中创建相同的活动，直到我按下菜单按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T14:16:54.707

像这样的东西：

```
 @Override
    public boolean onNavigationItemSelected(int position, long id) {

        // When the given dropdown item is selected, show its contents in the
        // container view.
        Intent currentIntent = this.getIntent();

        switch (position){

        case 0: 
            if (!currentIntent.getAction().equals("com.example.portarius.mainflow.ITEMLISTACTIVITY")) 
            {
                 startActivity(new Intent("com.example.portarius.mainflow.ITEMLISTACTIVITY"));
            }
            return true;
        case 1:
            if (!currentIntent.getAction().equals("com.example.portarius.mainflow.TESTDUMMYLOGG")) 
            {
                 startActivity(new Intent("com.example.portarius.mainflow.TESTDUMMYLOGG"));
            }
            return true;
        case 2:
            if (!currentIntent.getAction().equals("com.example.portarius.mainflow.TESTDUMMYKARTVIEW")) 
            {
            startActivity(new Intent("com.example.portarius.mainflow.TESTDUMMYKARTVIEW"));
            }
            return true;

        default:
            return onNavigationItemSelected(position, id);
        }

    } 
```

# javascript - FF/IE 中 iframe 的滚动宽度不一致

> ID：16094150
> 
> 赞同：5
> 
> 时间：2013-04-18T22:30:40.483
> 
> 标签：javascript, firefox, dom, iframe

我的页面中有一个 iframe，通过单击页面主体中的链接可以更改其内容。我正在尝试调整 iframe 的宽度以匹配内容，如下所示：

```
frame.contentDocument.body.scrollWidth 
```

这在 Chrome 中运行良好，但在 Firefox 和 IE 中，每次单击新链接时，我都会得到一个缩小的 iframe。FF 似乎每次点击都会减去 20-37px。

我用谷歌搜索并搜索了 Stack Overflow。我发现的一些[建议](https://stackoverflow.com/questions/14666931/why-scrollwidth-doesnt-work-in-this-case-in-firefox)与显示和溢出 CSS 属性有关。我对 CSS 进行了更改，但没有帮助。我还尝试了 FF 21 Beta，希望它在那里得到修复，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T00:21:39.740

由于您没有提供 jsFiddle，因此我无法告诉您您可能做错了什么，但是我尝试过尝试做您所描述的事情，并且我并没有真正遇到与您相同的任何问题正在经历。它似乎在您提到的所有浏览器中都能正常工作。前提是您确保在您`iframe`尝试获取. 这是为了确保保持文档的宽度，即使之前加载的文档比新加载的文档宽（在这种情况下，将保持之前文档的.`scrollWidth``iframe``0px``scrollWidth``scrollWidth``scrollWidth``width``iframe`

这是一个`[jsFiddle](http://jsfiddle.net/VWnQh/16/)`. 那里有一些用于测试和演示目的的随机化代码，对您来说重要的唯一位是：

```
var frame = document.getElementById("frame");

frame.onload = function () {
  $("#frame").css("width", '0px');
  $("#frame").css("width", frame.contentDocument.documentElement.scrollWidth + 'px');
} 
```

我在这里使用了一些 jQuery 来让自己更轻松，但您可能可以将其替换为您已经拥有的用于设置 的任何代码`width`，`iframe`而我使用`frame.contentDocument.documentElement.scrollWidth`的是`frame.contentDocument.body.scrollWidth`. 这确保我得到的是元素的宽度`html`而不是元素的宽度`body`，您的问题的一部分可能是文档上的`html`or`body`标记被加载到`iframe`have`margins`或`paddings`set 中。

**编辑：**

我做了更多的尝试，我*可以*得到你所描述的在 Firefox 和 Chrome 中发生的确切行为。如果我在读取之前没有将`width`的设置`iframe`为，则当前加载的文档的宽度小于之前加载的文档的宽度，并且我设置了. 看看行为的一个例子。（它发生在 Chrome 和 Firefox 中，只要设置为和设置为）。`0px``scrollWidth``overflow: visible``iframe``[here](http://jsfiddle.net/VWnQh/18/)``scrolling``yes``overflow``visible`

似乎如果我不重置 的`width`，`iframe`则`scrollWidth`保留`width`先前加载的文档的值减去垂直滚动条的宽度。那么，如果我每次都将 设置为`width`，`scrollWidth`并且新加载的文档比前一个文档小，则`width`的`iframe`减少的像素数量等于`width`垂直滚动条的 。

**结论：**一个明确的解决方法是在读取 的 之前将 的设置为`width`（或**任何小于或等于****将要加载的文档**的） ，这应该在加载新文档之后发生。`iframe``0px`**`minimum width`**`scrollWidth``iframe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T21:28:53.187

尝试使用`contentWindow`而不是`contentDocument`.

# html - 在 Jekyll 网站中显示类别的最佳方式是什么？

> ID：16094155
> 
> 赞同：0
> 
> 时间：2013-04-18T22:30:55.907
> 
> 标签：html, blogs, jekyll, octopress

我有一个使用 Jekyll 的小博客。现在我想为我的帖子布局添加更多功能。我想在每个帖子的顶部添加这一行：

```
Tagged with category1, category2, ... 
```

实现这一目标的最佳方法是什么。有人可以帮我处理我必须在我的 html 文件中添加的 Jekyll 代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T02:38:53.323

[使用液体过滤器](https://github.com/shopify/liquid/wiki/liquid-for-designers)非常容易。在您的`_layout/post.html`模板中，将此行添加到您想要输出的位置：

```
Tagged with {{ page.categories | join: ', ' }} 
```

这会将您的类别列表*加入*逗号分隔的字符串中。如果您使用插件设置按类别索引的存档，您可以获得更高级的类别并链接到类别。

确保您已`_posts/`使用[YAML Front Matter](https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter)语法将类别添加到您的个人文件中：

```
---
layout: post
title: Title
categories:
- cat1
- cat2
- etc...
--- 
```

# jquery - 如何覆盖 jquery 自动完成选择

> ID：16094158
> 
> 赞同：0
> 
> 时间：2013-04-18T22:31:03.317
> 
> 标签：jquery

我有一个文本区域。用户应该能够输入他自己的数据，并且应该能够添加从 jquery automcomplete 中选择的项目。但是当用户从 jquery 自动完成列表中选择项目时，它会用所选项目替换整个 textarea 数据。我怎样才能避免这种情况？

# knockout.js - KnockoutJS foreach 在远程加载的模式对话框中不起作用

> ID：16094160
> 
> 赞同：0
> 
> 时间：2013-04-18T22:31:14.030
> 
> 标签：knockout.js

我有一个远程模态对话框，一旦加载，它就会创建一个新模型，其中包含一些模态信息，如下所示：

```
var modalModel = {
    SessionId: viewModel.SessionId(),
    RetCols: ko.observableArray([])
};

$('#UploadModal').ajaxComplete(function (event, request, settings) {
    ko.applyBindings(modalModel, $('#zupload')[0]);
}); 
```

这很好用，我正在将会话 id 打印到模态，所以我知道信息在那里并且模型显示在 firebug 中。但是，我有以下函数可以进行 ajax 调用并将响应读入 observableArray RetCols。当我在页面上打印长度并且它显示它有项目时，这似乎正在工作，但我不能为我的生活 foreach 它。我没有看到这里有什么问题吗？这是ajax调用：

```
function uploadSubmit() {
$.ajax({
    url: '/Upload/UserSaveFileInfo/',
    type: 'post',
    async: false,
    data: ko.toJSON({
        UploadName: $("#uploadName").val(),
        UploadDescription: $("#uploadDescription").val(),
        Id:  $('#uploadId').val()
    }),
    contentType: 'application/json',
    success: function (result) {
        for (var i = 0; i < result.length; i++)
        {
            modalModel.RetCols.push({
                Id: result[i].Id,
                Header: result[i].Header,
                Values: result[i].Values,
                MatchedTo: result[i].MatchedTo,
                ColumnNumber: result[i].ColumnNumber
            });
        }
        alert(modalModel.RetCols().length);  
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log(data);
    }
});
} 
```

这是我的模态中不想工作的一点：

```
<span data-bind="text: modalModel.RetCols().length"></span>  <!-- this works! --> 

<!-- ko foreach: modalModel.RetCols -->
        <div class="control-group" >
            <label class="control-label">
                Column <span data-bind="text: $data.ColumnNumber"></span>
            </label>
            <div class="controls">
                <input data-bind="value: $data.MatchedTo" />
                <span class="help-block" data-bind="text: $data.Values"></span>
            </div>
        </div>
<!-- /ko --> 
```

任何帮助将不胜感激！！这是一个小提琴： http: [//jsfiddle.net/ZLBpu/154/](http://jsfiddle.net/ZLBpu/154/)由于模态的远程加载，它与上面描述的有点不同，但我或多或少地重复了正在发生的事情。

编辑：特别是，对 moveToModal 的 ajax 调用似乎是导致它爆炸的原因。这个小提琴在 ajax 调用中具有相同的功能，它的工作方式与我预期的一样：http: [//jsfiddle.net/valvemail/RJ8Vx/1/](http://jsfiddle.net/valvemail/RJ8Vx/1/) 。因此，尤其是 ajax 调用肯定有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:57:49.697

我认为您不需要输入“$data”。在 foreach 内的每个属性之前。

**编辑**

我让它在 jsFiddle[链接中工作](http://jsfiddle.net/sk5BW/)

使用这个 HTML：

```
<span data-bind="text: RetCols().length"></span>  <!-- this works! --> 

<!-- ko foreach: RetCols -->
    <div class="control-group" >
        <label class="control-label">
            Column <span data-bind="text: $data.ColumnNumber"></span>
        </label>
        <div class="controls">
            <input data-bind="value: $data.MatchedTo" />
            <span class="help-block" data-bind="text: $data.Values"></span>
        </div>
    </div>
<!-- /ko --> 
```

而这个JS：

```
var modalModel = {
    SessionId: 'a',
    RetCols: ko.observableArray([])
};

modalModel.RetCols.push({
    ColumnNumber: 1,
    MatchedTo: "mt",
    Values: "values"
});

ko.applyBindings(modalModel); 
```

**编辑 2**

我看了看你的小提琴。我认为问题在于 viewModel 已经绑定到您尝试绑定 modalModel 的 html。为了解决这个问题，我稍微重构了代码，使 modalModel 成为 viewModel 的一部分。然后我将 boolean observable 放在 modalModel 上，您可以切换到“绑定”模态。

我还将您插入的 html 放在 html 中的 ajax 调用中。如果绑定，我用淘汰赛包围它，这样你就不应该因为不存在的属性而出错。

[这是小提琴](http://jsfiddle.net/qfE6Q/1/)

# random - 有人可以解释为什么这个 document.write 会覆盖整个页面吗？

> ID：16094162
> 
> 赞同：0
> 
> 时间：2013-04-18T22:31:24.877
> 
> 标签：random, overwrite, document.write

这是代码；javascript

```
function Roll()
     // Results: displays a randomly selected image of a 6-sided die
     {
       var roll;

       roll = RandomInt(1, 6);

       if (roll == 1) {
         document.getElementById("die").src = 
             "die1.gif";
         document.write("<center><p><a href='bad.html'> Enter </a></p></center>");
       }
       else if (roll == 2) {
         document.getElementById("die").src = 
             "die2.gif";
         document.write("<center><p><a href='good.html'> Enter </a></p></center>");
       }
       else if (roll == 3) {
         document.getElementById("die").src = 
             "die3.gif";
         document.write("<center><p><a href='bad.html'> Enter </a></p></center>");
       }
       else if (roll == 4) {
         document.getElementById("die").src = 
             "die4.gif";
         document.write("<center><p><a href='good.html'> Enter </a></p></center>");
       }
       else if (roll == 5) {
         document.getElementById("die").src = 
             "die5.gif";
         document.write("<center><p><a href='bad.html'> Enter </a></p></center>");
       }
       else {
         document.getElementById("die").src = 
             "die6.gif";
         document.write("<center><p><a href='good.html'> Enter </a></p></center>");
       }
     } 
```

这里是 Jsfiddle [http://jsfiddle.net/seymorevenue/TcNF7/](http://jsfiddle.net/seymorevenue/TcNF7/)（虽然 document.write 似乎在那里不起作用，并且骰子图像也没有出现）我认为我并不真正理解文档。写语句，有没有更好的方法？我想要做的就是掷骰子并根据结果显示一个链接。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:38:42.673

我认为 document.write() 对网站进行了重大更改，并且在单击按钮后很少使用它，而是在网站加载时使用。

相反，使用这样的东西：

```
document.getElementByID('YourOutputDiv').innerHTML = 'Text to display on website'; 
```

# php - 我正在使用 jQuery 来让一些 div 在我的本地服务器上显示/隐藏。现在它在测试页面上工作正常但是当我每次使用时将它放入我的测试应用程序（用 PHP 和 HTML 编写） <a href="#" 创建一个钩子，它实际上也链接了 locahost 问问题 问问题 2013-04-18T22:31:57.150 261 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 jQuery 来让一些 div 在我的本地服务器上显示/隐藏。现在它在测试页面上工作正常但是当我每次使用时将它放入我的测试应用程序（用 PHP 和 HTML 编写） <a href="#" 创建一个钩子，它实际上也链接了 locahost/testsite/localhost# 什么可以将额外的 localhost# 添加到我的 URL 的末尾？ <script type="text/javascript" language="JavaScript"> function controlFooterNotes(v){ if(v==1) $("#footer_notes").show(50); else $("#footer_notes").hide(50); } $(document).ready(function(){ $("#show_footer_notes").click(function(){ controlFooterNotes(1); }); $("#hide_footer_notes").click(function(){ controlFooterNotes(0); }); }); </script> 和我使用的 html This is an example of the <a href="#" id="show_footer_notes">Click this link</a> <div id="footer_notes"> <a href="#" id="hide_footer_notes">Click here to hide this part.</a> </div> 您的“单击此链接”将 # 添加到 url。使用以下代码来防止它： $("#show_footer_notes").click(function(e){ controlFooterNotes(1); e.preventDefault(); }); phpjquery 4 4 回答 4 This answer is useful 1 您需要停止默认操作。 $(document).ready(function(){ $("#show_footer_notes").click(function(event){ event.preventDefault(); controlFooterNotes(1); }); $("#hide_footer_notes").click(function(event){ event.preventDefault(); controlFooterNotes(0); }); }); 于 2013-04-18T22:36:01.113 回答 This answer is useful 0 于 2013-04-18T22:35:16.267 回答 This answer is useful 0 e.preventDefault() 的替代方法，如果您不想使用它或不使用 JS 库，则可以替换 <a href="#">link</a> 为了 <a href="javascript:void(0);">link</a> 可能看起来不优雅，但它确实有效。 于 2013-04-18T23:00:00.180 回答 This answer is useful 0 您的“单击此链接”将 # 添加到 url。使用以下代码来防止它： $("#show_footer_notes").click(function(e){ controlFooterNotes(1); e.preventDefault(); }); 于 2013-04-18T22:34:55.653 回答 Related 1 javascript - JQuery Onclick 从跨度获取值并将其添加到输入值 4 sql - SQL：如何确保所有 SELECT 案例都被表示，即使不是所有案例都被执行？ 3 c# - 如何从任何 .net 类中获取所有公共属性和方法？ 1 java - 英镑符号（£ 或 ₤）等字符的 URI 编码问题 3 c# - 杂志/期刊类结构和/或设计模式 1 excel - 最后两行没有格式化，但被正确复制，没有理由 1 python - 从你的类属性制作__builtin__？ 3 ruby-on-rails - `should be_invalid` 和 `should_not be_valid` 之间有什么功能上的区别吗？ 2 php - 注册和登录最佳实践 2 eclipse-plugin - 将图像添加到标签建议 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16094167
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, jquery

我正在使用 jQuery 来让一些 div 在我的本地服务器上显示/隐藏。现在它在测试页面上工作正常但是当我每次使用时将它放入我的测试应用程序（用 PHP 和 HTML 编写）

```
<a href="#" 
```

创建一个钩子，它实际上也链接了 locahost/testsite/localhost#

什么可以将额外的 localhost# 添加到我的 URL 的末尾？

```
<script type="text/javascript" language="JavaScript">
        function controlFooterNotes(v){
                if(v==1) $("#footer_notes").show(50);
                else     $("#footer_notes").hide(50);
        }

        $(document).ready(function(){
                $("#show_footer_notes").click(function(){
                        controlFooterNotes(1);                      
                });
                $("#hide_footer_notes").click(function(){
                        controlFooterNotes(0);                      
                });
        });
</script> 
```

和我使用的 html

```
This is an example of the <a href="#" id="show_footer_notes">Click this link</a>
<div id="footer_notes">
        <a href="#" id="hide_footer_notes">Click here to hide this part.</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:36:01.113

您需要停止默认操作。

```
$(document).ready(function(){
  $("#show_footer_notes").click(function(event){
    event.preventDefault();
    controlFooterNotes(1);                      
  });
  $("#hide_footer_notes").click(function(event){
    event.preventDefault();
    controlFooterNotes(0);                      
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:35:16.267

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:00:00.180

e.preventDefault() 的替代方法，如果您不想使用它或不使用 JS 库，则可以替换

```
<a href="#">link</a> 
```

为了

```
<a href="javascript:void(0);">link</a> 
```

可能看起来不优雅，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:34:55.653

您的“单击此链接”将 # 添加到 url。使用以下代码来防止它：

```
 $("#show_footer_notes").click(function(e){
                    controlFooterNotes(1);          
                    e.preventDefault();            
            }); 
```

# perl - 在 Perl 中修改然后切片未知大小的二维数组

> ID：16094178
> 
> 赞同：5
> 
> 时间：2013-04-18T22:33:31.647
> 
> 标签：perl, multidimensional-array, foreach, slice

我知道这里已经涵盖了类似的主题，但是我遇到了一个问题，我认为这是由于我误解了数组切片是如何在 foreach 循环的上下文中插入的。我无法弄清楚我哪里出错了，所以我正在寻找一些见解。

我有一个行数可变的二维数组。例如目的：

```
@2DArray = (['str1', 1, 2, 'E', val1, val2, val3]
            ['str2', 3, 4, 'E', val4, val5, val6]
            ['str4', 5, 6, 'F', val7, val8, val9]) 
```

我想构建一个带有附加列的新数组，仅当原始数组的某些行在第 3 列中包含字符串“E”时才包含它们。此外，对于我希望合并到新数组中的行，我只想要列的一个子集，并且我希望该子集以不同的顺序排列。最终目标是生成下游脚本所需的正确格式的输出。

这是我的尝试：

```
my $projName = 'test';

my $i = 1;
my @Newarray
my @Newarray_element;
     foreach (@2DArray) {
         if  (${$_}[3] eq 'E') {
             ${$_}[3] = $i; 
             ${$_}[5] = '+'; 
             @Newarray_element = ("$projName$i", @$_[0,1,2,5,3], 'STR', 11, 11);
             $i++;
             push (@Newarray, \@Newarray_element);
         }

         next;
     }

print (join("\t", @$_), "\n") for @Newarray; 
```

但是，如果我这样做，我得到的是：

```
#(original) col nums:      0       1    2    5    3

                  test2    str2    3    4    +    2    STR    11    11
                  test2    str2    3    4    +    2    STR    11    11 
```

即，我的新数组将在原始数组中的每一行都有一行，在第 3 列中带有一个“E”，但每一行都填充了要由循环处理的最后一行的值。

我认为这个问题与在 foreach 循环中切片二维数组有关的原因是我知道我是否只是循环遍历一个二维数组，在第 3 列中找到所有带有“E”的行，修改其他列中的一些值对于这些行，然后将其返回到一个新数组，这一切都很好。也就是说，如果我改为这样做：

```
my @Newarray;
my $i = 1;
foreach (@2Darray) {
    if  (${$_}[3] eq "E") {
        ${$_}[3] = $i;
        ${$_}[5] = '+';
        $i++;
        push (@Newarray, \@$_);
    }
    next;   
}
print (join("\t", @$_), "\n") for @Newarray; 
```

我得到了我期望的输出：

```
 *            &
str1    1    2    1    val1    +    val3
str2    3    4    2    val4    +    val6 
```

其中标有 * 和 & 的列是修改后的第 3 列和第 5 列。让猛攻开始：我的新手自己哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:43:33.130

该变量`@Newarray_element`指向整个程序的相同内存空间，因此您在一次迭代中所做的更改会传播到您在分配中使用该变量的先前迭代。

两个可能的修复：

**一**。更改变量的范围，使其在每次迭代中使用不同的内存。改变

```
my @Newarray_element;
foreach (@2DArray) {
    ... 
```

至

```
foreach (@2DArray) {
    my @Newarray_element;
    ... 
```

甚至

```
foreach (@2DArray) {
    ...
    my @Newarray_element = ("$projName$i", @$_[0,1,2,5,3], 'STR', 11, 11); 
```

**二**：重用`@Newarray_element`但将其数据的*副本*分配给每一行`@Newarray`。改变

```
push (@Newarray, \@Newarray_element); 
```

至

```
push (@Newarray, [ @Newarray_element ]); 
```

后一个调用创建并附加一个新的匿名数组引用到`@Newarray`.

# regex - 电话号码的正则表达式

> ID：16094179
> 
> 赞同：0
> 
> 时间：2013-04-18T22:33:34.320
> 
> 标签：regex, preg-match

我正在尝试为电话号码做一个正则表达式。我正在使用命名捕获，所以希望我的正则表达式会更容易理解。

```
^(?<country_code>1|808)?(?<area_code>\d{3})?(?<local_number>\d{7})$ 
```

假设如下：

*   所有区号均为 3 位数
*   所有本地号码均为 7 位数字
*   只有 2 个国家代码：1 和 808

测试：

*   `12025551212`<-- 1 202 5551212
*   `2025551212`<-- 202 5551212
*   `8082025551212`<-- 808 202 5551212
*   `8085551212`<-- 这里有问题

最后一个测试的问题是正则表达式认为`808`是国家代码。虽然是，但在这个字符串中，`808`代表区号。我应该如何修改我的正则表达式，以便将 808 解释为区号而不是国家/地区代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:43:33.327

鉴于这些限制，您可以调整正则表达式以要求国家代码与区号配对。我已经突出显示了更改的位：

```
^(?:(?<country_code>1|808)?(?<area_code>\d{3}))?(?<local_number>\d{7})$
 ^^^                                          ^^ 
```

现在在国家代码和区号周围有一个非捕获组，如果该组完全存在，则需要区号组。

话虽如此，您所采取的方法不会在更普遍的基础上起作用。并非所有国家都使用三位数的区号和七位数的本地号码——事实上，并非所有国家都**使用**区号。（例如，格陵兰的电话号码是六位数，没有区号，因为该国只有大约 56,000 名居民。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:49:47.517

对您的问题最简单的直接答案可能是：

```
^(?<country_code>1|808)??(?<area_code>\d{3})?(?<local_number>\d{7})$ 
```

*不情愿*地使国家代码匹配0-1次。

但是，@Duskwuff 的答案更好，因为它需要存在区号才能匹配国家/地区代码，我认为这更正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:42:48.030

```
^(?:(?<country_code>1|808)?(?<area_code>\d{3}))?(?<local_number>\d{7})$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:42:55.010

使用这样的前瞻：

```
^(?<country_code>1|808(?=\d{10}))?(?<area_code>\d{3})?(?<local_number>\d{7})$ 
```

这将确保国家代码后始终有 10 位数字。

### 现场演示：[http ://www.rubular.com/r/SnPE3eyB3E](http://www.rubular.com/r/SnPE3eyB3E)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T22:45:29.147

问题是，如果您的号码有国家代码，它也必须带有区号。因此，它的长度必须为 13，这不会反映在您的正则表达式中。

将其更改为以下内容：

```
^((?<country_code>1|808)(?<area_code>\d{3})|(?<area_code>\d{3})?)(?<local_number>\d{7})$ 
```

第一个备选方案的长度为 4 或 6，第二个备选方案的长度为 0 或 3。因为您匹配完整的输入，所以最多一个备选方案可以匹配任何输入。

# c# - 从 C# 中的对象数组中获取最大值

> ID：16094183
> 
> 赞同：3
> 
> 时间：2013-04-18T22:33:52.373
> 
> 标签：c#

我有一个包含对象的数组，这些对象有一个字符串、一个整数和一个字符属性。

```
Person[] people = new Person[1]; //Declare the array of objects

[...] This code is irrelevant

Person person = new Person(name, age, gender); //This creates instance a new object
people.SetValue(person, i); //is just a variable which increase in a c
Array.Resize(ref people, people.Length + 1);  //Change array  size 
i++; // Autoincrement 
```

[...] 更多代码来填充有效的值

从存储在人员数组中的所有对象人员中，我想获取人员的年龄最大值（年龄属性是整数值）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T22:42:19.520

最简单的方法是使用 LINQ：

```
using System.Linq;

var maxVal = people.Max(x => x.Age); // get highest age
var person = people.First(x => x.Age == maxVal); // get someone with such an age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:46:57.020

我假设您的 Person 类看起来像这样：-

```
class Person
{
  public int Age { get; private set; }
  public string Name { get; private set; }
  public string Gender { get; private set; }

  // constructor etc
} 
```

**改进**

如果你有一个 Enumerable `Person`，即“people”，我建议你使用带有 IList 等接口的容器，即：-

```
IList<Person> people = new List<Person>(); 
```

因为这将使您不必手动调整阵列大小。

**解决方案**

要获得最大的年龄，您可以执行以下操作：-

```
var max = people.Max(p => p.Age); 
```

**进一步阅读**

这是一个 Linq 查询；更多信息可以在这里找到： -

[http://msdn.microsoft.com/en-gb/library/vstudio/bb397926.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/bb397926.aspx)

你可以用 linq 做很多“很酷”的事情，比如选择一个可枚举的年龄，即

```
var ages = people.Select(p => p.Age); 
```

这将返回一个包含列表中每个人的年龄的可枚举。如果您想要所有超过一定年龄的人，您可以使用`Where`，即：-

```
var above = people.Where(p => p.Age > 65); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T22:47:24.577

如果您每次添加新项目时都要调整数组大小，那么您真的不应该使用数组。这就是泛型`List`类的用途。你可以写：

```
List<Person> People = new List<Person>();
Person person = new Person(name, age, gender);
People.Add(person); 
```

`List`需要时负责调整后备数组的大小。它比每次添加项目时调整数组大小更容易和更有效。

要获得最大年龄，您可以使用其他答案中显示的 LINQ 表达式之一。如果您想要具有最大值的记录，则必须遍历列表：

```
Person maxItem = People[0];
foreach (Person person in People)
{
    if (person.Age > maxItem.Age)
    {
        maxItem = person;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T23:02:42.640

这样的事情会对你有用：

```
Person[] persons = {};
Person oldest = persons.Aggregate( (x,y) => x.Age > y.Age ? x : y ) ; 
```

或滚动您拥有：

```
static T FindMax<T>( this IEnumerable<T> items , Func<T,T,int> comparer  ) where T:class
{
  T max = null ;
  foreach ( T item in items )
  {
    if ( item == null ) { continue ; }
    if ( max == null ) { max = item ; continue ; }

    // check current item against max.
    // if current item is "greater than" the current max
    // replace it.
    int cc = comparer(item,max) ;
    if ( cc > 0 )
    {
      max = item ;
    }
  }
  return max ;
} 
```

用法：

```
Person[] persons = LoadPersons() ;
Person oldest = persons.FindMax<Person>( (x,y) => x.Age < y.Age ? -1 : x.Age > y.Age ? +1 : 0 ) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T02:24:23.507

如果列表相对较小（少于 1000 个对象），上述建议将起作用。这是因为上述所有方法都使用顺序搜索。出于性能目的（速度），应用 qsort 方法效率更高。例如：

```
class PersonAgeComparer : IComparer<Person>
{
    public Int32 Compare(Person x, Person y)
    {                
        if (x.Age > y.Age) return 1;
        if (x.Age < y.Age) return -1;

        return 0; // must be equal
    }
}

class Person
{
    public Int32 Age { get; set; }
}

static void Run1()
{
    Random rnd = new Random((Int32)DateTime.Now.Ticks);

    List<Person> persons = new List<Person>();
    for (Int32 i = 0; i < 100000; i++)
    {
        persons.Add(new Person() { Age = rnd.Next(100) });
    }

    persons.Sort(new PersonAgeComparer());

    // The oldest but you may have dups (same age)
    Person oldest = persons[persons.Count - 1];

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T22:50:24.620

我完全同意@dlev 留下的评论，因为您不应该使用传统的[`Arrays`](http://msdn.microsoft.com/en-gb/library/system.array%28v=vs.80%29.aspx)，而是使用[`List<T>`](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx)自动处理集合大小的调整。

此外，因为两者[`Array`](http://msdn.microsoft.com/en-gb/library/system.array%28v=vs.80%29.aspx)都[`List<T>`](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx)实现了 IEnumerable，所以您可以使用[LINQ](http://msdn.microsoft.com/en-gb/library/vstudio/bb397926.aspx)来操作您的元素，事实上，请查看您可用[的方法的完整列表](http://msdn.microsoft.com/en-us/library/ckzcawb8.aspx)。

针对您的场景的具体示例：

```
var maxVal = people.Max(x => x.Age);
var person = people.First(x => x.Age == maxVal); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-28T16:53:33.970

在 .NET 6.0 中，我们现在有一个新方法：

```
using System.Linq;

Person olderPerson = people.MaxBy(x => x.Age); 
```

如果需要，还有 MinBy。

# c# - 使添加表单上的方法对主表单可见

> ID：16094185
> 
> 赞同：1
> 
> 时间：2013-04-18T22:34:19.010
> 
> 标签：c#

我正在做一个模拟经营业务方面的课程项目。在主窗体上，用户可以单击一个按钮，将模拟向前移动一个月。在一个单独的表单上，用户可以做一些基本的事情，比如设置某些商品的销售额。这些销售应该在用户前进一个月后结束，但如果不打开该表单，我无法撤消销售。这引发了许多问题。有人可以解释一种方法，我可以以与主窗体不同的形式运行方法吗？

我尝试将方法公开并继续，

```
InventoryForm.checkSales(); 
```

但它没有看到 checkSales。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:53:23.910

*暗示这是 windows 形式*
*暗示这是你的程序的结构方式*

只要这些类在同一个[命名空间](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)中，它们就应该对彼此可见。

如果您有两种这样声明的表格：

*   表格1
*   表格2

并且您想从`Form2`在中声明的方法访问`Form1`，您必须创建一个新实例`Form1`或确保您的方法是静态的（通常是不好的做法，但它会发生，例如[Math Class](http://msdn.microsoft.com/en-ca/library/system.math.aspx)），以便您可以仅使用类名访问它. 您还可以创建一个事件并以另一种形式订阅它。

```
// Option 1 : (New Instance)

public class Form2()
{
   Form2_Load(object sender, EventArgs e)
   { 
     // Create new instance of Form1
     Form1 form1 = new Form1();
     form1.MyForm1Method();
   }
} 

//Option 2 : (Static)
 public class Form2()
{
   Form2_Load(object sender, EventArgs e)
   { 
     // Method is static in Form1 (The class would be static too)
     Form1.MyForm1Method();
   }
} 

// Option 3 (Event Subscribtion)

//Form1:

private void StartForm2Button_Click(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.SomethingHappened += Form2_SomethingHappened;
    form2.Show();
}

private Form2_SomethingHappened(object sender, EventArgs e)
{
    Form2 form2 = (Form2)sender;
    string data = form2.Data;
    // create node
    AddNode(node);
}

//Form2:

public event EventHandler SomethingHappened;

public string Data
{
   get { return textBoxData.Text; }
}

private void SomeButton_Click(object sender, EventArgs e)
{
    if (SomethingHappened != null)
        SomethingHappened(this, EventArgs.Empty);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-18T22:41:14.617

将 checkSales 方法声明为静态

```
 Public static void checkSales() ... 
```

# ssl - pip-3.3 SSL 验证错误，mac OSX 10.5.8

> ID：16094187
> 
> 赞同：2
> 
> 时间：2013-04-18T22:34:37.483
> 
> 标签：ssl, python-3.x, pip, easy-install, osx-leopard

尝试从 OSX 10.5.8 中的终端运行 pip-3.3 install numpy 时出现错误

这是有问题的错误：无法获取URL ...：

> [SSL: CERTIFICATE_VERIFY_FAILED] 证书验证失败 (_ssl.c:547)>

据我所知，谷歌或其他任何地方都没有这方面的信息。因此，任何人都可以提供的任何信息都会很好，因为手动安装软件包很痛苦。

点子版本：

来自 /Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pip-1.3.1-py3.3.egg 的 pip 1.3.1（python 3.3）

我的问题是：有谁知道导致此错误的原因以及如何解决？

我可以应要求提供您可能需要的任何其他信息。

* * *

```
/Library/Frameworks/Python.framework/Versions/3.3/bin/pip run on Thu Apr 18 17:$
Downloading/unpacking numpy

  Getting page https://pypi.python.org/simple/numpy/
  Could not fetch URL https://pypi.python.org/simple/numpy/: There was a proble$

  Will skip URL https://pypi.python.org/simple/numpy/ when looking for download$

  Getting page https://pypi.python.org/simple/
  Could not fetch URL https://pypi.python.org/simple/: There was a problem conf$

  Will skip URL https://pypi.python.org/simple/ when looking for download links$

  Cannot fetch index base URL https://pypi.python.org/simple/

  URLs to search for versions for numpy:
  * https://pypi.python.org/simple/numpy/
  Getting page https://pypi.python.org/simple/numpy/

    No distributions at all found for numpy
Storing complete log in /Users/codymallery/.pip/pip.log} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T19:35:35.157

Mac OSX 的 Python 版本似乎与 SSL 库的过时版本相关联，因此 pypi SSL 证书未通过某些检查。

快速解决方法是将 pip 降级到不使用 SSL 的版本：

```
easy_install pip==1.2.1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-24T13:02:28.783

由于您的证书不正确，请改用 https 或从浏览器或命令行导入并指定 pip：

```
pip --cert my-root.pem <args> 
```

^(如果您有 CER 格式的文件，则需要[将其转换为 PEM 文件](https://serverfault.com/q/254627/130437)。)

# c++ - 在读取 udp 之前查找 sockaddr 信息

> ID：16094192
> 
> 赞同：1
> 
> 时间：2013-04-18T22:34:52.247
> 
> 标签：c++, c, sockets

无论如何，我可以从传入的数据包中获取 sockaddr 信息，而无需先对数据进行实际的 recvfrom 操作吗？我只是想知道，因为您可以说有一些东西可以读取，例如民意调查或选择我想知道在实际读取发送的数据之前是否可以从中提取更多信息。我问这个是因为我有一个系统，其中每个单独的 ip/端口组合都有自己的小内部缓冲区，我们将分块消息放入其中，我需要知道以便将其放入正确的内部缓冲区中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:37:42.070

是的，通过向[`recvfrom`](http://pubs.opengroup.org/onlinepubs/7908799/xns/recvfrom.html)调用提供 MSG_PEEK 标志。

```
recvfrom(socket, buffer, 1, MSG_PEEK, &address, &address_len); 
```

这将使数据报完好无损，而不是将其删除。您当然可以为缓冲区大小指定一个较小的值，以减少不必要的读取开销。下次你做一个正常`recvfrom`的数据报将被正常删除。

```
recvfrom(socket, buffer, length, 0, &address, &address_len); // Do the actual read 
```

# html - 自下而上显示内联块元素，顶部有尾随元素

> ID：16094194
> 
> 赞同：3
> 
> 时间：2013-04-18T22:35:06.637
> 
> 标签：html, responsive-design, css

我有一个`<ul>`列表`display:inline-block`项 - 它们按预期显示，当它们到达行尾时会像段落中的文本一样环绕。[参见示例](http://jsfiddle.net/daCrosby/JkZsD/)，其中有 6 个元素，第一行 4 个，第二行 2 个。

我希望将尾随元素放在顶部而不是底部。以前面的示例为基础，如果有 6 个元素，我希望 2 在顶部，4 在底部。

这是我正在寻找[的元素的更新版本](http://jsfiddle.net/daCrosby/JkZsD/1/)`<ul>`，但是此解决方案使用多个元素，这不是一个选项，因为元素的数量会经常变化，我不能每次都对其进行硬编码，尤其是考虑到移动设备。

如果可能的话，我更喜欢非 JavaScript 解决方案。正如我所暗示的，它应该是一个适合所有页面宽度的响应式解决方案（如果它不总是顶部 2，底部 6，通常底部更多，顶部更少，则没问题）。

我最大的问题是在某些屏幕尺寸下，由于尺寸和位置，我的元素会形成倒置的金字塔形状，我认为正面朝上的金字塔会更可取。

## 对于视觉学习者

**什么是**

![在此处输入图像描述](https://i.stack.imgur.com/eREWi.jpg)

**应该是什么** ![在此处输入图像描述](https://i.stack.imgur.com/l2JgO.jpg)

## 相关示例代码

**HTML**

```
<ul>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
</ul> 
```

**CSS**

```
li{
    display:inline-block;
    list-style-type:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:55:12.373

为什么不颠倒 html 元素的顺序？无论如何，您可以使用 Js 反转顺序，如下所示： [jQuery reversing the order of child elements](https://stackoverflow.com/questions/5347839/jquery-reversing-the-order-of-child-elements)

或者您可以尝试使用 flexbox，尽管缺少对它的支持：http: [//caniuse.com/#search=flex](http://caniuse.com/#search=flex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:44:48.653

正如我的前辈所说，您在这里违背了事物的自然秩序；）但是...

根据内容的生成方式（CMS 等），您可以只计算元素并给第二个元素一个类，您可以使用该类添加右边距以占用该行。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T01:38:25.313

我能够通过 CSS 实现这一点。通过将位置设置为相对，并将 top 属性设置为 100%，元素将从下向上呈现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-08T03:48:31.470

你应该尝试：

```
li{
  display:inline-block;
  list-style-type:none;
}
```

```
<ul>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <br>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
    <li><img src="http://placehold.it/200x200" /></li>
</ul>
```

# php - 来自 php 的 jquery ajax 响应未定义

> ID：16094198
> 
> 赞同：0
> 
> 时间：2013-04-18T22:35:33.380
> 
> 标签：php, javascript, jquery, ajax

使用 ajax 获取表单以获取 php 响应时遇到问题。javascript 似乎是正确的，因为如果我删除 login_ajax.php 上的所有内容并且只使用以下内容，它就可以工作

```
echo 'CORRECT' 
//or 
echo 'INCORRECT' 
```

一旦我使用了真正的 php 代码，ajax 就不会得到 PHP 的任何响应。更奇怪的是，如果我删除

```
return false 
```

从 javascript 然后提交表单，我确实看到浏览器的 login_ajax.php 上显示了正确或错误。

HTML：

```
<form id="login" action='login_ajax.php' method="get">

    <label>Email: <input type="text" name="email" id="email" value="nano@nano.com"></label>
    <label>Password: <input type="text" name="password" id="password" value="x"></label>

    <input type="submit" value="login">
    <div id="straight_response">php response here</div>
    <div id="message">status</div>
</form> 
```

PHP：

```
if (isset($_GET['password'])) {
    $email = $_GET['email'];
    $password = $_GET['password'];
    $stored_pass = "123";

    if ($password == $stored_pass) {
        echo "CORRECT";
    } else {
        echo "INCORRECT";
    }
}
//Javascript works when using one of the two lines below instead of the code above
//echo 'INCORRECT';
//echo 'CORRECT' 
```

JAVASCRIPT：

```
$('#login').submit(function(){

var email;
    var password;

    email       = $('#email').val();
    password    = $('#password').val();

    var data = {};
    data.email  = email;
    data.password   = password;

    var options = {};
    options.dataType = 'text';
    options.type = 'get';
    options.url= 'login_ajax.php';
    options.success = function (response) {
    //  jQuery.trim(response);
        console.log(response.results);
        console.log(response.query);
        $('#always').text(response);

        if (response === 'CORRECT') {
            $('#message').text('you got it right');
            console.log("good combination");
        }
        else if (response === 'INCORRECT') {
            $('#message').text('sorry, try again');
            console.log("bad combination");
        }
    };

    $.ajax(options);
    return false;
});//#login function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:53:51.473

哦，天哪，我实际上花了 40 分钟试图从内到外理解您的问题，结果发现事实是**您没有通过 AJAX 将`data`您从表单收集的信息**传递给 PHP。

轻松修复，在拨打电话之前添加此行：

```
options.data = data; 
```

虽然，正如[文档所述](http://api.jquery.com/jQuery.ajax/)：

> 通常不需要直接调用此函数，因为有几个更高级别的替代方法，如`$.get()`和`.load()`可用且更易于使用。

在你的情况下，我认为`$.get()`效果一样好。**尽管**您可能想看看 JerrySeeger 在评论中所说的内容，但看起来使用`GET`密码可能代表一个巨大的安全漏洞，您也许应该使用 SSL。

# heroku - 如何更改 Heroku 夏令时设置

> ID：16094199
> 
> 赞同：1
> 
> 时间：2013-04-18T22:35:40.807
> 
> 标签：heroku, timezone, dst

我可以设法更改 Heroku 上的时区，但它仍然比我的本地时间少一小时。任何人都可以帮助如何在 Heroku 上设置 DST（夏令时）偏移量吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:20:02.690

Heroku 应用程序在普通的 unix 系统上运行，并且那里有所有的 zoneinfo 文件。我也相当确定它们是最新的。

就 unix 而言，您应该能够使用以下内容设置您的 TZ env var：

```
$ heroku config:set TZ=Europe/Berlin 
```

您可以使用以下命令查看有效的 zoneinfo 名称：

```
$ heroku run find /usr/share/zoneinfo/posix 
```

不过，一般来说，您会希望在 UTC 环境中运行您的应用程序，并在内部处理时区，可能在每个用户的基础上处理本地时间。

我怀疑这可能无法完全回答您的问题。您可能想要扩展您想要实现的具体目标以及您如何尝试实现它，以及您如何观察“比本地少一小时”的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-07T22:03:19.207

我在 Heroku 的 Symfony 项目中遇到了与 php 和 DateTime() 类似的问题。我意识到中欧夏季日光变化后的时差。即使在 heroku 设置时区也不能解决问题：

`$ heroku config:set TZ=Europe/Berlin`

当我在服务器端读出 phpinfo() 的 UTC 设置时，我决定更改 Heroku 的 php.ini 设置。这是 Heroku 的一篇文章：

[](https://devcenter.heroku.com/articles/custom-php-settings#php-runtime-settings)[https://devcenter.heroku.com/articles/custom-php-settings#php-runtime-settings](https://devcenter.heroku.com/articles/custom-php-settings#php-runtime-settings)

通过将*.user.ini*文件添加到您的 Web 根目录，您可以调整应用程序的设置。例如，通过添加 date.time 设置：

`date.timezone = Europe/Berlin`

我知道这不是全球使用的最佳解决方案，但到目前为止它仍然有效，而且我的 symfony 应用程序现在只对中欧很重要。

# sql-server - how clustered index implemented on view

> ID：16094204
> 
> 赞同：5
> 
> 时间：2013-04-18T22:36:25.553
> 
> 标签：sql-server, view, indexing, clustered-index, indexed-view

I can create clustered or non-clustered index on view and SQL SERVER says, we can have multiple non-clustered index (max 249), but only one clustered index exist on table or view. Because, records are sorted, where they physically stored and we can't have multiple sorting order. So, my question is, since View doesn't physically stored in database. Then, what if I create clustered index on view and base table already exist clustered index. How clustered index implemented on view ? How clustered index works and useful on view ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T01:04:21.467

视图只是一个没有具体化数据的存储查询，*除非*它有一个聚集索引。

在许多情况下，人们认为任何旧视图都可以通过添加聚集索引来“加速”。这种情况很少见。通常，您创建一个索引视图来预先聚合某些计算，例如 SUM 或 COUNT_BIG。如果您创建一个不聚合的索引视图，因此具有与基表相同的行数/页数，那么您没有取得任何成果（当然，像任何事情一样，也有例外 - 视图上的索引可能是例如，比基表更瘦，从而导致页面更少）。

顺便说一句，您不能在视图上创建非聚集索引，*除非*您首先创建聚集索引。您还应该记住，就像表上的索引一样，索引视图*不是*免费的。虽然它可能会加快某些查询，但 SQL Server 必须在工作负载的整个 DML 部分维护索引。

你真的应该阅读[像这样的文档](http://msdn.microsoft.com/en-us/library/dd171921%28v=sql.100%29.aspx)，它更详细地介绍了索引视图的性能优势，以及[这个](http://msdn.microsoft.com/en-us/library/ms191432.aspx)文档，其中记录了限制和限制等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T23:31:19.233

视图上的聚集索引基本上是一个新表，当引用的表发生更改时会自动更新。因此，您使用预先收集的数据购买了更快的访问时间，但您支付的存储使用量要高得多（在许多情况下是两倍）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-03T14:37:25.993

当我们向视图添加唯一聚集索引时，我们将其“物化”。换句话说，“虚拟表”保存在磁盘上，具有自己的页面结构，我们可以将其视为普通表。由索引视图定义的任何聚合现在都是预先计算的，并且任何连接都是预先连接的，因此引擎不再需要在执行时执行此工作。SQL Server 为索引视图创建不同于基础表的统计信息，以优化基数估计。

[您可以从此博客](https://www.red-gate.com/simple-talk/sql/learn-sql-server/sql-server-indexed-views-the-basics/)中阅读更多内容。

# python - i am trying to get a value from a .csv file in python and facing this error

> ID：16094205
> 
> 赞同：1
> 
> 时间：2013-04-18T22:36:27.240
> 
> 标签：python, csv, input

`ValueError: invalid literal for int() with base 10: '405,000'`

the code is as follows :

```
for d in csv.DictReader(open(c_name + '.csv'), delimiter=','):
    global d_value
    d_value = int(d['Debt Value']) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:38:39.887

`405,000`不是有效的`int`。您要么需要删除该逗号：

```
d_value = int(d['Debt Value'].replace(',', '')) 
```

或[使用`locale`模块](https://stackoverflow.com/a/2954231/464744)：

```
import locale

# You might need to set a locale
# locale.setlocale(locale.LC_ALL, '')

d_value = locale.atoi(d['Debt Value']) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:38:39.680

看起来您的值中有一个逗号，这就是您看到错误的原因。您可能希望通过执行以下操作来清理您的号码：

```
 d_value = int(d['Debt Value'].replace(",", "")) 
```

当您使用它时，最好在完成文件后关闭它们。您可以使用[with 语句](http://preshing.com/20110920/the-python-with-statement-by-example)来确保它会在您的块之后关闭。

```
with open(c_name + ".csv") as csvfile:
    for d in csv.DictReader(csvfile, delimiter=','):
        global d_value
        d_value = int(d['Debt Value'].replace(",", "")) 
```

# c# - UserControl 中的数据绑定问题

> ID：16094208
> 
> 赞同：0
> 
> 时间：2013-04-18T22:36:44.947
> 
> 标签：c#, wpf, data-binding

我正在开发一个执行应用程序。我的应用采用 MVVM。我正在尝试创建一个带有两个用户控件的窗口，其中一个用户控件包括一个从 viewmodel 获取其数据的数据网格。
我希望当应用程序运行时数据网格会自动填充我的默认值（私有文件）。但是存在绑定错误：System.Windows.Data 错误：4：无法使用引用“ElementName=windowView”找到绑定源。绑定表达式：路径=ActivePacket；数据项=空；目标元素是'DataGrid'（名称='dataGrid1'）；目标属性是“ItemsSource”（类型“IEnumerable”）

谢谢！

这是我的代码：

========= MainWindow.xaml =================

```
 <Window x:Class="Project.Abc.Try.MainWindow"
        x:Name="windowView"
        xmlns:local="clr-namespace:Project.Abc.Try"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="600">

    <Window.DataContext>
        <local:PayloadViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="78*" />
            <RowDefinition Height="233*" />
        </Grid.RowDefinitions>

        <local:CmdMenuView Grid.Row="0" Margin="6,6,3,6" />
        <local:PayloadView Grid.Row="1" Margin="6,6,3,6" />
    </Grid>
</Window> 
```

============ PayloadView.xaml ===========

```
 <UserControl x:Class="Project.Abc.Try.PayloadView"
             x:Name="PLview"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="199" d:DesignWidth="588" >

    <Grid Height="200" Width="580" >
        <!--<DataGrid AutoGenerateColumns="False" Height="45" HorizontalAlignment="Left" Margin="36,20,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="500" ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=ActivePacket}"> -->
        <DataGrid AutoGenerateColumns="False" Height="45" HorizontalAlignment="Left" Margin="36,20,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="500" ItemsSource="{Binding ElementName=windowView, Path=ActivePacket}">

                <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding PacketId, Mode=TwoWay}" Header="PacketID " Width="*" />
                <DataGridTextColumn Binding="{Binding PacketLength, Mode=TwoWay}" Header="PacketLength" Width="*" />
                <DataGridTextColumn Binding="{Binding Spare}" Header="Byte 6" Width="*" />
            </DataGrid.Columns>
        </DataGrid>
        <Button Content="Send" Command="{Binding Path=SendCommand}" Height="23" HorizontalAlignment="Left" Margin="310,122,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    </Grid>
</UserControl> 
```

=================== PayloadViewModel.cs ========================

```
namespace Project.Abc.Try
{
    public class PayloadViewModel : ObservableObject
    {
        // ......
        private CmdPacket _activePacket;
        public CmdPacket ActivePacket
        {
            get { return _activePacket; }
            set
            {
                if (value != _activePacket)
                {
                    _activePacket = value;
                    OnPropertyChanged("ActivePacket");
                }
            }
        }
        // .........
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:42:22.183

您必须将 分配`DataContext`给您的视图`MainWindow.xaml`：

```
<local:PayloadView ... DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}" /> 
```

在 中`PayloadView.xaml`，只需绑定到视图模型属性：

```
<DataGrid ... ItemsSource="{Binding ActivePacket}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:03:18.650

一些想法......如果除了 PayloadView 之外您不需要任何来自 PayloadViewModel 的任何东西，您可以直接在 PayloadView 的 DataContext 中绑定 PayloadViewModel，然后直接绑定到它。

```
<UserControl x:Class="Project.Abc.Try.PayloadView" ...>

    <UserControl.DataContext>
        <local:PayloadViewModel />
    </UserControl.DataContext>

    ...

    <DataGrid ... ItemsSource="{Binding ActivePacket}" />

    ...

</UserControl> 
```

另外，如果你想做 MVVM，你可能想考虑使用 Caliburn.Micro 如果你还没有。它自动将每个 View 的数据上下文绑定到其对应的 ViewModel，无需代码（即 PayloadView 将自动访问 PayloadViewModel 上的公共属性）。那么你只需要写：

```
<UserControl x:Class="Project.Abc.Try.PayloadView" ...>

    ...

    <DataGrid ... ItemsSource="{Binding ActivePacket}" />

    ...

</UserControl> 
```

这是 Caliburn.Micro 的一个很棒的教程：http: [//www.mindscapehq.com/blog/index.php/2012/01/12/caliburn-micro-part-1-getting-started/](http://www.mindscapehq.com/blog/index.php/2012/01/12/caliburn-micro-part-1-getting-started/)

希望这可以帮助。

# php - 无法让谷歌抓取 AJAX Hashbang 网站

> ID：16094212
> 
> 赞同：1
> 
> 时间：2013-04-18T22:36:59.973
> 
> 标签：php, ajax, seo, web-crawler, hashbang

我已经在一个项目上工作了一个多月，并且花了很长时间试图真正理解爬行 ajax 的来龙去脉。我建立了一个使用 .load() 和 '#!' 的网站 （我现在知道这是我的 sillt 但哦，好吧！）并且已经设置了 HTML 快照在什么时候生成？*逃跑*... 被要求。我已经向 Google 提交了一个站点地图，并阅读了他们的文档一千遍。

网站地址是[http://renewmywindows.com/](http://renewmywindows.com/)

如果我以谷歌的身份获取网站，它会为请求的页面返回正确的 html，但我在让谷歌抓取它时遇到了很多问题。

我有一种感觉，我只是忘记了做一件小事，这会让其余的事情都丢掉，但我一生都无法弄清楚它是什么......

任何帮助将不胜感激。

谢谢，

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:41:00.287

好吧，它看起来像[http://www.renewmywindows.com/#!home.php](http://www.renewmywindows.com/#!home.php)在谷歌索引中并且正在工作

你可以通过谷歌看到这个`site:renewmywindows.com`

它似乎确实有一些陈旧的数据？也许尝试重新提交您的站点地图？您在谷歌网站管理员工具中收到任何错误或警告吗？

此外，您可能想要：

1.  从站点地图中删除 404 页面
2.  关闭 php 错误[http://renewmywindows.com/?_escaped_fragment_=aabout-us.php](http://renewmywindows.com/?_escaped_fragment_=aabout-us.php)

# javascript - How to map a specific Google Fusion Table Map?

> ID：16094213
> 
> 赞同：0
> 
> 时间：2013-04-18T22:37:05.137
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

The "new" look for Google Fusion Tables allows you to create multiple "map" tabs (and others like "charts" and "summary"). My question is: how do you use Google Maps API to call a specific map tab you have created? For example, you may have a map tab you have designed with the following URL:

[https://www.google.com/fusiontables/data?docid=1InbiFbInR8OGcMgOngf3j2Bb2FTpEkZQuT1hNMo#map:id=4](https://www.google.com/fusiontables/data?docid=1InbiFbInR8OGcMgOngf3j2Bb2FTpEkZQuT1hNMo#map:id=4)

The fusion table id is 1InbiFbInR8OGcMgOngf3j2Bb2FTpEkZQuT1hNMo, and the map:id = 4\. So in Google Maps API, you can layer this table as:

```
crime = new google.maps.FusionTablesLayer({
    query: {
        select: 'Address',
        from: '1InbiFbInR8OGcMgOngf3j2Bb2FTpEkZQuT1hNMo'
    },
});
crime.setMap(map); 
```

But this will not apply any of the stylings or infowindows you may have done on your map tab. How do I tell Google Maps API to grab a specific map tab?

FYI, switching to "classic" view let's me apply a single map style to the fusion table that DOES get applied by the code above.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:55:14.307

您需要应用视图的`styleId`and `templateId`。单击特定选项卡->发布->获取 HTML 和 Javascript，您将获得所需的内容。

# android - 您将如何设计“描述”输入？

> ID：16094216
> 
> 赞同：0
> 
> 时间：2013-04-18T22:37:45.963
> 
> 标签：android, android-layout, user-interface, user-experience

目前我正在设计一个我将开发的应用程序。它在某种程度上是一个事件应用程序。

到目前为止，当您创建一个事件时，它会要求提供标题和描述，但我不确定如何设计它以使其看起来很酷并且用户可以理解。

![在此处输入图像描述](https://i.stack.imgur.com/SRial.png)

如您所见，标题有点明显，应该简短。但是Description（描述）应该很明显，它可以是更长的文本。

你们有什么想法可以帮助我吗？

我不知道这是否是问这个问题的最佳地点，但我已经看到了几个相关的问题，我认为应该适合。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:09:48.293

> 但是Description（描述）应该很明显，它可以是更长的文本。

我能想到的唯一优雅的方法是使 EditText 至少高 3 行并为其设置提示。这样用户可以看到，有足够的空间来写更长的描述。

```
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Type your Description in here"
    android:inputType="textMultiLine"
    android:lines="3" >
</EditText> 
```

![在此处输入图像描述](https://i.stack.imgur.com/X9XMk.png)

# jquery - 使用 jQuery 应用 CSS 样式

> ID：16094217
> 
> 赞同：0
> 
> 时间：2013-04-18T22:37:58.857
> 
> 标签：jquery, css

在 Site.css 我有这个：

```
tr {
background-color: #fff;
}
.alt {
background-color: #ccc;
} 
```

在我看来，我有这个：

```
$(document).ready(function() {
$('tr:even').addClass('alt');
});

<h2>Shakespeare's Plays</h2>
<table>

<tr >
<td>As You Like It</td>
<td>Comedy</td>
<td></td>
</tr>

<tr>
<td>All's Well that Ends Well</td>
<td>Comedy</td>
<td>1601</td>
</tr>

</table> 
```

但是我的偶数行没有样式......看起来都一样......我已经在我的项目中安装了jquery包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:01:39.613

确保您的页面中包含 jQuery。在您的脚本之前添加以下内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

# c - ld：不匹配的 ABI（不是 ELF 文件）无法编译

> ID：16094218
> 
> 赞同：0
> 
> 时间：2013-04-18T22:38:02.957
> 
> 标签：c, compilation, hp-ux, itanium

我有简单的 C hello world 程序，我想在 HP-UX ia64 11.31 上编译它，但出现以下错误

```
/* Hello World program */

#include<stdio.h>

main()
{
    printf("Hello World");
} 
```

```
cc -v +DD64 example
LPATH=/usr/lib/hpux64:/opt/langtools/lib/hpux64
 /usr/ccs/bin/ld -o a.out -u___exit -umain example -lc
ld: Mismatched ABI (not an ELF file) for example
Fatal error.
 removing /var/tmp/AAA003501 
```

# java - 如何在 Android 中发出警报，即播放警报音？

> ID：16094219
> 
> 赞同：0
> 
> 时间：2013-04-18T22:38:06.073
> 
> 标签：java, android, alarmmanager, ringtone

我想构建一个闹钟应用程序，但我不知道如何在闹钟响起时发出闹钟铃声。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:02:00.397

由于您的问题非常广泛且通用，因此我无法提供确切的代码，但我可以指出您需要做的事情。

您需要创建一个[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)来启动一个[Service](http://developer.android.com/reference/android/app/Service.html)。在服务中，您需要使用[MediaPlayer](http://developer.android.com/guide/topics/media/mediaplayer.html)播放声音。[媒体播放](http://developer.android.com/guide/topics/media/mediaplayer.html)链接还有一个关于在服务中播放声音的特定部分。要安排在特定时间触发 PendingIntent 并启动服务，请使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

# python - Python: Unzip a file to current working directory but not maintain directory structure in zip

> ID：16094229
> 
> 赞同：3
> 
> 时间：2013-04-18T22:38:42.153
> 
> 标签：python, zipfile

I have a zip file like this:

```
myArchive.zip
|
-folder1
   |
   --folder2
        |
        ---myimage.jpg 
```

When I try to extract **myimage.jpg**:

```
with zipfile.ZipFile('myArchive.zip', 'r') as zfile:
   zfile.extract('folder1/folder2/myimage.jpg') 
```

I will get **/folder1/folder2/myimage.jpg** in my currently working directory

But I just want **myimage.jpg** to be extracted to currently working directory, how can I do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:31:15.500

非常简单的解决方案或多或少是这样的：

```
with zipfile.ZipFile('myArchive.zip', 'r') as zfile:
    unpacked = open('myimage.jpg', 'w')
    unpacked.write(zfile.read('folder1/folder2/myimage.jpg'))
    unpacked.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T23:00:19.787

无需使用 extract 或 extractall，只需获取数据并将其写入您喜欢的任何文件即可。这是一个代码示例，可以满足您的要求：

```
import os, sys, time
import zipfile

ENC = 'cp437'
outdir = unicode(os.path.abspath('.'))
outzip = 'c:/1temp/timbersales.zip'
zf = zipfile.ZipFile(outzip, 'r')

for info in zf.infolist():
    fn, dtz = info.filename, info.date_time # , info.file_size

    # some zips have dirs listed as files. Catch
    # and bypass those.
    name = os.path.basename(fn)
    if not name:
        continue

    # get our filename converted from bytes to unicode
    fn_uni = fn.decode(ENC, 'replace')
    bn_uni = os.path.basename(fn_uni)

    # this method is about 15% faster than extractall, and 
    # preserves modify and access dates
    c = zf.open(fn)
    outfile = os.path.join(outdir, bn_uni)

    # try/except to avoid problems with locked files, etc
    # do in chunks to avoid memory problems
    chunk = 2**16
    try:
        with open(outfile, 'wb') as f:
            s = c.read(chunk)
            f.write(s)
            while not len(s) < chunk: 
                s = c.read(chunk)
                f.write(s)
        c.close()
        # set modify and access dates to that inside the zip
        dtout = time.mktime(dtz + (0, 0, -1))
        os.utime(outfile, (dtout, dtout))
    except IOError:
        c.close() 
```

此示例执行 zip 中的所有文件，但您可以轻松添加几行来检查特定文件。它还将覆盖工作目录中与被提取文件同名的所有文件。

# mysql - MySQL-PHP 获取并回显 NOW() 值？

> ID：16094232
> 
> 赞同：-3
> 
> 时间：2013-04-18T22:38:50.107
> 
> 标签：mysql

我需要获取我的数据库作为 NOW() 使用的当前时间并将其显示给用户。我怎样才能做到这一点？

用作`NOW()`什么？这个时间和日期是否与我的 PHP 配置有关，或者它们是数据库独有的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:00:38.987

```
<?php

$query  = "SELECT NOW() as `now`";
$result = $mysqli->query($query);
$row    = $result->fetch_array();
$now    = $row['now'];
echo "$now\n";

?> 
```

# opengl-es-2.0 - GLSL 着色器程序是如何在图形硬件管线上执行的？

> ID：16094234
> 
> 赞同：2
> 
> 时间：2013-04-18T22:39:04.457
> 
> 标签：opengl-es-2.0, glsles

随着我越来越多地玩弄 OpenGL ES 2.0 和 GLSL，我开始质疑着色器程序是如何在硬件上执行的。我很好地理解了顶点和片段着色器程序背后的概念，但是关于它们如何在金属上工作仍然很不清楚。在阅读有关 GPU 的信息时，我经常遇到术语管道，并且 GPU 具有给定数量的管道。

我了解管道的作用，它提供一组顶点（表示几何图元）并使用给定参数执行顶点着色器，并通过一些基于这些输出执行操作的固定功能硬件发送顶点着色器的输出。顶点着色器还输出在图元的每个片段上插值的值并输入到片段着色器中，从而使用通用算法轻松执行大量复杂的渲染。

但这是否意味着如果 GPU 有 n 条管道，那么在任何给定时刻，n 条管道中的每一条都可以执行单个几何图元的着色器程序的实例？

我一直在阅读 OpenGL ES 2.0 编程指南（根据 kindle 大约读了 60%），但也许我仍在不断发展的理解导致我错过了这个问题的答案。

我问这个问题的一个实际原因是关于应该或不应该在 CPU 而不是 GPU 上完成哪些工作。例如，如果我正在操作单个更新和渲染线程，那么在 CPU 上执行矩阵到矢量乘法是否明智，它必须在所有对象的一行中完成？或者将执行多个几何图元绘制的着色器程序外包给 GPU 会更好吗？

我正在优化一些代码，以使用 VBO 在屏幕上绘制许多四边形，而不是为每个四边形单独绘制调用。但由于这被认为是数组渲染，我需要将每个顶点的所有矩阵发送到 GPU，即使四边形的每 4 个顶点的 mvp 矩阵都是相同的，这可以被认为是对带宽的影响。但是，如果着色器程序是同时执行的，而不是在我的 CPU 上的渲染线程上一个接一个地执行，也许这是一个值得权衡的选择。但是我没有那种水平的专业知识可以说一种或另一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:04:08.483

我将在这里尝试回答我自己的问题，因为我找到了我正在使用的特定 GPU 的性能优化文档，即 PowerVR SGX 架构。该文档显示了着色器引擎内的几个多线程执行单元，所以我假设这就是术语管道的含义。也许这个术语在固定功能管道时代使用过。任何人都可以请随时纠正我。

关于我如何优化我的代码，我认为这是非常标准的做法，每个四边形由相同的主顶点表示，这些顶点根据对象的状态进行转换。对象维护一组矩阵，这些矩阵表示它们所经历的所有转换。发送到 GL 时，使用对象维护的矩阵转换主要顶点，并将 ise 顶点发送到顶点着色器。将 VP 矩阵作为统一发送，因为它是全局独立的。我现在看到无论如何都没有将矩阵作为属性发送到 GL 的方法，我想是由于带宽问题。

# css - How to expand a div to its content width WHEN it is larger than its parent?

> ID：16094239
> 
> 赞同：4
> 
> 时间：2013-04-18T22:39:31.500
> 
> 标签：css, html

I'm trying to build a carousel view. For that I have a parent div, representing the viewport, a content div, holding the items to be shown in the view, and an unknown number of divs, representing the items shown in the view.

```
<div id="viewport">
    <div id="content">
        <div class="item"></div>
        <div class="item"></div>
        <div class="item"></div>
        ...
    </div>
</div> 
```

The parent and the items size is known beforehand but I want the content size grow with the items. With the following CSS, the items are displayed inline as I want, but the content's width will expand only until it matches its parent width.

```
#viewport {
    position: absolute;
    width: 400px;
    height: 200px;
    overflow: hidden;
}

#content {
    white-space: nowrap;
}

.item {
    display: inline-block;
    width: 200px;
    height: 200px;
} 
```

How can I make the content div expand until it matches its children size? Here is a JSFiddle for what I'm saying: [http://jsfiddle.net/j4LnB/](http://jsfiddle.net/j4LnB/) (the red border is showing the content's size).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:44:23.737

您可以`display: inline-block;`在#content-div 上使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:45:12.467

使用`min-width`而不是`width`在视口 div 上应该可以解决问题。这允许内容 div 扩展到完整的子宽度。

```
#viewport {
   position: absolute;
   min-width: 400px;
   height: 200px; 
```

[http://jsfiddle.net/j4LnB/1/](http://jsfiddle.net/j4LnB/1/)

# php - Facebook PHP SDK 登录问题：它适用于某些网络，但不适用于其他网络

> ID：16094243
> 
> 赞同：1
> 
> 时间：2013-04-18T22:39:54.113
> 
> 标签：php, facebook, sdk, facebook-login

尝试使用 facebook SDK 在我的网站中登录用户时遇到一个奇怪的问题。在某些网络中，它始终可以正常工作，而在其他网络中，即使使用以前工作过的同一用户，登录也会完全失败。

只要它们在同一个网络中，似乎在不同的浏览器和 PC 上都是一致的。从我现在的位置，我可以使用 wifi 连接登录，但不能使用我的手机 3G 连接。

这是一个代码示例。一、登录页面重定向到facebook登录

```
require_once("facebook/src/facebook.php");

$facebook = new Facebook(array(
    'appId'  => $app_id,
    'secret' => $app_secret,
));
$loginUrl =$facebook->getLoginUrl(array(  
    'scope'        => 'email,publish_stream,user_birthday',
    'redirect_uri' => "http://www.websitelink.com/app/loginCompleta.php"
    ));
//}

 header("Location: " . $loginUrl); 
```

loginCompleta.php 文件中的相关代码是

```
 require_once("facebook/src/facebook.php");

 $facebook = new Facebook(array(
    'appId'  => $app_id,
    'secret' => $app_secret,
));
$user = $facebook->getUser();

print_r($user); 
```

就是这样。在某些网络上，$user 将拥有 facebook 用户的 id，而在其他网络中，该过程失败并且 $user 返回 0。使用相同的 facebook 登录，代码没有任何变化。

# python - 选择排序与插入排序的效率

> ID：16094244
> 
> 赞同：3
> 
> 时间：2013-04-18T22:40:01.610
> 
> 标签：python, sorting, time-complexity

我目前正在尝试在 python 中实现插入排序和选择排序。我的两个实现都有效。然而，当我对排序进行计时时，选择排序的执行速度始终比插入排序快 1.5 倍，尽管我的插入排序实现的比较次数大约是我的选择排序实现的一半。我似乎找不到原因。

```
def select_sort(data):
    for i in range(len(data)):
        minimum, index = None, i
        for j in range(i, len(data)):
            if minimum is None:
                minimum = data[j]
            if data[j] < minimum:
                minimum = data[j]
                index = j
        data[i], data[index] = data[index], data[i]
    return data

def insert_sort(data):
    for i in range(1, len(data)):
        for j in range(i, 0, -1):
            if data[j] >= data[j - 1]:
                break
            data[j], data[j - 1] = data[j - 1], data[j]
    return data

def time_sort(S):
    elapsed = []

    start = time()
    insert_sort(copy(S))
    elapsed.append(time() - start)

    start = time()
    select_sort(copy(S))
    elapsed.append(time() - start)

    return elapsed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:02:02.773

`insert_sort`O(N ² ) 交换，而`select_sort`N 交换。

交换在 中的外循环中`select_sort`，但在 中的内循环中`insert_sort`。

# javascript - 如何为http请求设置“日期”标头

> ID：16094248
> 
> 赞同：6
> 
> 时间：2013-04-18T22:40:31.893
> 
> 标签：javascript, date, http-headers, xmlhttprequest

我想为 http 请求设置标头。标题名称为“日期”

```
http_request.setRequestHeader("Date", headers.date); 
```

但是，当我看到请求在萤火虫中发出时。我没有看到请求标头日期。

我该如何设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T03:46:54.203

从 XMLHttpRequest 中，有一组无法设置的标头。查看[setRequestHeader()](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)的规范。 `Date`是这些标题之一。

此外，如果您查看[WebKit 源代码](http://trac.webkit.org/browser/trunk/Source/WebCore/xml/XMLHttpRequest.cpp?rev=105076)，您可以在实现中看到这一点。

```
bool XMLHttpRequest::isAllowedHTTPHeader(const String& name)
{
    initializeXMLHttpRequestStaticData();
    return !staticData->m_forbiddenRequestHeaders.contains(name) 
        && !name.startsWith(staticData->m_proxyHeaderPrefix, false)
        && !name.startsWith(staticData->m_secHeaderPrefix, false);
} 
```

# php - 将图像保存为 Doctrine2.3 blob 数据类型

> ID：16094254
> 
> 赞同：0
> 
> 时间：2013-04-18T22:40:57.507
> 
> 标签：php, doctrine-orm

我有一个类，我试图将图像存储为 blob 数据类型，使用 Doctrine2.3 作为 orm。

```
/**
 * @ORM\Column(type="blob")
 */
private $data; 
```

它[在这里](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html)说有一个名为 blob 的学说映射类型，它将 SQL BLOB 映射到 php 资源流。当我从类构建数据库时，一切正常。但是当我尝试像这样将 savedImage 对象插入数据库时

```
$image = new SavedImage();
$data = fread(fopen($_FILES['data']['tmp_name'], 'r'), filesize($_FILES['data']['tmp_name'])); 
$image ->setData($data);
$this->entityManager->persist($image );
$this->entityManager->flush(); 
```

我收到以下错误：

```
json_encode(); Invalid UTF-8 sequence in argument. 
```

我不确定这里出了什么问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T09:13:06.223

在 setData($data); 之前添加这一行

```
$data= mb_check_encoding($data, 'UTF-8') ? $data: utf8_encode($data); 
```

为此，[链接](http://www.johnro.net/2011/06/10/php-warning-json_encode-function-json-encode-invalid-utf-8-sequence-in-argument-in-god_i_hate_this-php/)形成了更多详细信息

# c - 当矩阵在C中实现为列表时重新排列矩阵行

> ID：16094256
> 
> 赞同：1
> 
> 时间：2013-04-18T22:40:59.943
> 
> 标签：c, list, matrix

我的任务是使用 C 给定两个简单规则重新排列矩阵的行。 1\. 如果最后一列中的数字为正，则应将行移到顶部。2\. 如果最后一列的数字为零，则该行应移至底部。

例如，如果我有 {{1,2,0},{4,5,-6},{7,8,9},{1,1,1}} 我会得到 {{1,1,1} ,{7,8,9},{4,5,-6},{1,2,0}}。

为此，我将矩阵实现为单链表，其中节点表示矩阵的行。然后我创建了一个名为“重新排列”的函数，它应该为我完成任务。除了第一行最后一列的数字为 0 时，我已经能够解决所有情况下的问题。那么我得到的只是 0。例如 {{0}{2}{3}} 或 { {1, 2, 0},{4, 5, 6}{7,8,9}} 都给出 0。如果有人可以查看我的代码并可能给我一些输入，我会非常高兴。这是我的代码：

```
typedef struct node node;
typedef struct list list;

struct list{
node* first;
node* last;
};

struct node{                                                               
  int* data;        
  node* next;       
};      

list* newList(int* data);   
static node* newNode(int* data);       
list* newList(int* data);                                              
void insertFirst(list* head, int* data);
void insertLast(list* head, int* data);
void rearrange(list* head,int rows, int cols);
void printList(list* head,int cols);

int main(){
int a[1] = {0};
int b[1] = {-2};
int c[1] = {-3};
//int d[1] = {-4}; // if we want more rows
//int e[1] = {-5};
//Create empty list
list* head = newList(a);
//Add rows
insertLast(head,b);
insertLast(head,c);
//insertLast(head,d);
//insertLast(head,e);
rearrange(head,3,1);
//Print all elements
printList(head,1);
return 0;
}

void printList(list* head,int cols){
int i;
node* currentEl = head->first;
while(currentEl != NULL) {
    for(i=0;i<cols;i++){
        printf("%d, ",currentEl->data[i]);
    }
    printf("\n");
    currentEl = currentEl->next;
}
}

void rearrange(list* head,int rows,int cols){
head->last->next = head->first;
node* currentEl = head->last;
node* nextEl = head->first;
node* temp;
int count = 1;

while(count != rows+1){
    int a = nextEl->data[cols-1];
    temp = nextEl->next;
    if(a>0 && count != 1){
        nextEl->next = head->first; 
        head->first = nextEl;
        currentEl->next = temp; 
    }else if(a==0 && head->first->data[cols-1] != 0){ 
        head->last->next = nextEl;
        head->last = nextEl;
        nextEl->next = NULL;
        currentEl->next = temp; 
     }else if(a==0 && head->first->data[cols-1] == 0){ // this needs to be changed
        head->last->next = nextEl;
        head->last = nextEl;
        nextEl->next = NULL;
        currentEl->next = temp;
     }else {
        currentEl = nextEl;
    }
    //nextEl = nextEl->next; 
    nextEl = currentEl->next;
    if(count == 1){
        head->last->next = NULL;
    }
    count++;
}

}

void insertFirst(list* head, int* data){
node* temp;
temp = newNode(data);
temp->next = head->first;
head->first = temp;

}

void insertLast(list* head, int* data){
node* temp;
temp = newNode(data);
head->last->next = temp;
head->last = temp;
}

static node* newNode(int* data){
node* new;
new = (node*)malloc(sizeof(node));
new->next = NULL;
new->data = data;
return new;
}

list* newList(int* data){
list* head;
node* node = newNode(data);
head = (list*)malloc(sizeof(list));
head->first = node;
head->last = node;
return head;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T06:35:55.407

不确定这是否是您需要的，但下面的代码将变成： `{{1,2,0},{4,5,-6},{7,8,9},{1,1,1}}`但是`{{1,1,1},{7,8,9},{4,5,-6},{1,2,0}}` 您需要将此 C# 代码转换为 C，并使用一维数组而不是二维数组。即，而不是`{{1,2,0},{4,5,-6},{7,8,9},{1,1,1}}`，你只会有`{1,2,0,4,5,-6,7,8,9,1,1,1}`。在`elementsPerGroup`你的情况下是3。

```
 private static byte[] ReverseArray(int elementsPerGroup, byte[] forwardsArray)
        {
            int length = forwardsArray.Length;
            byte[] reversedArray = new byte[length];

            int groupIdentifier = 0;

            for (int i = 0; i < length; i++)
            {
                if (i != 0 && i % elementsPerGroup == 0)
                {
                    groupIdentifier += 2 * elementsPerGroup;
                }
                int index = length - elementsPerGroup - groupIdentifier + i;
                reversedArray[i] = forwardsArray[index];
            }
            return reversedArray;
        } 
```

# c# - 如何根据用户输入进行计算

> ID：16094259
> 
> 赞同：0
> 
> 时间：2013-04-18T22:41:11.583
> 
> 标签：c#

这是我的代码块，我不知道如何让周长和体积执行计算。例如，当我为前 4 个参数输入 1,1,1,1 时，我得到 0, 0 表示体积和周长。

```
 if (packages == 1)
        {

            int width = 0, length = 0, height = 0, weight = 0;
            int volume = 0, girth = 0;
            int[] packageInfo = new int[6] { width, length, height, weight ,volume, girth };
            packageInfo[4] = height * width * length;
            packageInfo[5] = (2 * length + 2 * width);
            double packageSum = 0;

            for (int k = 0; k < 4; k++)
            {
                string line = Console.ReadLine();
                if (!int.TryParse(line, out packageInfo[k]))
                {
                    Console.WriteLine("Couldn't parse {0} - please enter integers", line);
                    k--;
                }
            }

            if(packageInfo[3] > 25)
            {
                packageSum = 0;
                Console.WriteLine("Package couldn't be shipped because of its size.");
            }
            if (volume > 4800)
            {
                packageSum = packageSum + 5.95;
            }

            if (volume > 9600)
            {
                packageSum = 0;
                Console.WriteLine("Package couldn't be shipped because of its size.");
            }

            foreach (var item in packageInfo)
                Console.WriteLine(item.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:50:02.403

您应该在获得用户输入后计算它们。以这种方式重新排列您的代码：

```
for (int k = 0; k < 4; k++)
            {
                string line = Console.ReadLine();
                if (!int.TryParse(line, out packageInfo[k]))
                {
                    Console.WriteLine("Couldn't parse {0} - please enter integers", line);
                    k--;
                }
            }

packageInfo[4] = packageInfo[0] * packageInfo[1] * packageInfo[2];
packageInfo[5] = (2 * packageInfo[0] + 2 * packageInfo[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:50:19.277

C# 中的变量与数学中的变量不同。据我所知，您希望在修改`packageInfo[4]`时得到更新`packageInfo[0], packageInfo[1], packageInfo[2]`。因为，在数学上，如果你将体积定义为高度*宽度*长度并且你修改了这些变量中的任何一个，那么体积就会改变。不幸的是，C# 中的“标准变量”只是一堆位。你读/写它。我不是很精确（我对语言不是那么精通），但是没有根据其他变量定义变量的概念（它们只能用某个值初始化，这可能是某个其他变量的值）。要创建这样的关系，需要语言结构来表示它们。

因此，您的代码当前所做的是：

*   初始化高度、长度、宽度等。
*   *将这些值复制*到数组中
*   当您从 中读取输入时`Console`，`packageInfo[0], packageInfo[1], packageInfo[2], packageInfo[3]`会进行修改。
*   数组中的所有值都没有关联/相互依赖。如果你修改`packageInfo[0]`它不会修改任何其他`int`的`packageInfo[]`

您可以通过以下方式模拟行为以使其更类似于数学：

```
private int _height;
private int _width;
private int _length;
private int Volume = 
{
    get { return _height * _width * _length };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:47:37.657

仔细查看您的代码。

首先，你这样做：

```
 int width = 0, length = 0, height = 0, weight = 0;
        int volume = 0, girth = 0;
        int[] packageInfo = new int[6] { width, length, height, weight ,volume, girth };
        packageInfo[4] = height * width * length;
        packageInfo[5] = (2 * length + 2 * width);
        double packageSum = 0; 
```

0 * 0 * 0 = 0。

2 * 0 + 2 * 0 = 0

然后，在计算出体积和周长*后*，您实际上会向用户查询输入：

```
 for (int k = 0; k < 4; k++)
        {
            string line = Console.ReadLine();
            if (!int.TryParse(line, out packageInfo[k]))
            {
                Console.WriteLine("Couldn't parse {0} - please enter integers", line);
                k--;
            }
        } 
```

# sql - 选定的 DOB 舍入到年份

> ID：16094260
> 
> 赞同：0
> 
> 时间：2013-04-18T22:41:13.413
> 
> 标签：sql, sql-server-2008, procedure, date

我有手续

```
create procedure sp_ChildrenOlderThan5Years
as
select clientid,firstName,MidInitial, LastName, address, city, 'AK' as 'State', zip,DATEDIFF(YEAR,dob,GETDATE()) as age
from Clients
where CategCode = 'CH' and StatusID in (1,2,6) and DATEDIFF(YEAR,dob,GETDATE())>6
go 
```

必须向我展示 6 岁以上的客户。但是我刚刚发现他们的年龄差不多，例如如果客户出生于 2007 年 7 月 20 日，它仍然会在列表中显示该客户，但他或她不是六岁。我知道中的问题`DATEDIFF(YEAR,dob,GETDATE())`，但不知道如何解决。
我只需要其中列出的年龄大于或等于 5 年零 10 个月的客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:46:26.187

由于您正在寻找年龄超过 5 岁零 10 个月（或相等）的人，请使用：

```
 datediff(month,dob,getdate()) >= 70 
```

# html - 在我的网站中呈现 URL 时如何避免双重 URL 编码？

> ID：16094265
> 
> 赞同：12
> 
> 时间：2013-04-18T22:41:33.603
> 
> 标签：html, urlencode, html-rendering

用户在文本输入中向我的网站提供正确转义的 URL 和原始 URL；例如，我认为这两个 URL 等效：

```
https://www.cool.com/cool%20beans
https://www.cool.com/cool beans 
```

现在我想`<a>`稍后在查看这些数据时将它们呈现为标签。我在编码给定文本和获取这些链接之间陷入困境：

```
<a href="https://www.cool.com/cool%2520beans">   <!-- This one is broken! -->
<a href="https://www.cool.com/cool%20beans"> 
```

或者不对其进行编码并得到这个：

```
<a href="https://www.cool.com/cool%20beans">
<a href="https://www.cool.com/cool beans">       <!-- This one is broken! --> 
```

从现代浏览器的用户体验角度来看，最好的出路是什么？我在对他们的输入进行解码传递，或者我上面列出的第二个选项，我们不编码`href`属性之间感到纠结。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T22:54:46.490

如果您想避免对链接进行双重编码，您可以`urldecode()`在两个链接上使用，然后`urlencode()`在解码诸如“ [https://www.cool.com/cool](https://www.cool.com/cool) beans”之类的 URL 时将返回相同的值，而解码“ [https://www.cool.com/cool%20beans](https://www.cool.com/cool%20beans) “将返回空间。这使两个链接都可以自由正确编码。

或者，可以使用`strpos()`函数扫描编码字符，例如

```
if ($pos = strpos($url, "%20") {
    //Encoded character found
} 
```

理想情况下，将扫描一组常见的编码字符，以代替“%20”

# c++ - STL C++ 中的容器

> ID：16094272
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:42:08.183
> 
> 标签：c++, c++11, stl, containers

对于 100 个元素，其中哪些容器：map、set、list、vector 将占用最低的内存空间？换句话说，当我们将 100 个元素 push_back 到容器 map、set、list 和 vector 时，其中哪一个会占用内存中的最低空间？例如 sizeof(int) 占用 4Bytes，sizeof(short) 占用 2Bytes，问题是这些容器中哪个占用的内存最低（最低的内存成本对我来说最重要）？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:25:20.520

通常，缩小以适应`vector`将具有任何序列容器的最低空间开销，因为除了一些指针和/或计数器之外，唯一的空间开销将是元素本身的空间（以及分配器使用的任何空间） ，这对于您描述的 STL 容器来说是不可避免的）。 `map`, `set`, 并且`list`都为每个添加的元素保存额外的指针。（并且 a`map`还需要与值类型一起保存键类型。）要学究起来，您实际上不能`push_back`进入 a`set`或 a `map`，尽管您可以`insert`进入它们。

另一方面，`vector`不适合收缩的 a 通常会被过度分配，通常在 1.5 左右，但可能高达所需空间的 2 倍（对于某些实现，可能更多），以分摊附加成本对它来说，而基于节点的容器，如`list`,`set`或`map`通常不会。

如果这是一个问题，您可能会考虑`deque`，它有一些单位开销（通常远小于每个元素一个指针），但对其过度分配有更严格的限制，它不会随大小线性增长序列。

但是，容器的空间开销通常不是用于决定容器（例如`vector`、`set`、`list`或）的主要标准`map`。使用模式的要求往往更为重要。例如，您是否需要能够在恒定时间内删除任意元素，或者不使迭代器或引用无效？如果是这样，`vector`是不合适的。您是否需要能够在不使迭代器或引用失效的情况下插入/追加？如果是这样，`vector`是不合适的。您是否需要有效的查找（尤其是与插入和删除混合）？如果是这样，`list`是不合适的，并且`vector`也可能不合适，除非重新排序序列对您的使用模式是可行的。您需要控制序列的顺序吗？如果是这样，`map`并且`set`将为您重新排序元素并且可能不合适。

# symfony - Symfony2/Doctrine2：一种保存（刷新）数据的方法，即使有些数据代表问题？

> ID：16094273
> 
> 赞同：0
> 
> 时间：2013-04-18T22:42:11.100
> 
> 标签：symfony, orm, doctrine

我有一些导入到 MySQL 数据库的 Excel 文件。Excel 文件很大，数据库也很大。问题是当我的脚本保留许多对象时，肯定有一些问题。因此，即使有一些问题，我也需要一种方法来刷新和存储数据。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:55:22.727

帮助确保数据完整性是 Doctrine 的部分目的。如果您遇到重复问题并且您不介意它们在数据库中，那么您应该能够在您的 Doctrine 模式中允许重复。

我倾向于绕过 Doctrine 并将数据直接导入数据库。您可能可以让最终用户在他们第一次尝试保存实体时修复其中的一些问题。

# java - JNLP、ProcessBuilder 和文件层次结构

> ID：16094275
> 
> 赞同：0
> 
> 时间：2013-04-18T22:42:19.963
> 
> 标签：java, java-web-start, processbuilder

这是图片：

我在以下层次结构中的一些 jar 和库中拆分了代码：

```
Main.jar
  ---lib
      |
      ------ Secondary.jar
      ------ Lib1.jar
      ------ Libx.jar 
```

Main.jar 中的主类调用 Secondary.jar 上的另一个主类，如下所示：

```
ArrayList<String> commands = new ArrayList<String>();
commands.add("java");
commands.add("-cp");
commands.add("lib"+System.getProperty("file.separator")
+Secondary.jar+System.getProperty("path.separator")+"lib");
commands.add("<Secondary Main class cannonical path>");
System.out.printl(commands.toString().replaceAll(",",""));
ProcessBuilder pb = new ProcessBuilder(commands);
pb.start(); 
```

当我从 IDE 和/或命令提示符（println 输出的命令）运行它时，它工作正常。从 javawebstart 运行时，该进程失败，因为它在类路径中找不到辅助主类。

我怀疑这与 JWS 如何处理下载的资源等有关。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:43:58.873

Sun 使小程序或 JWS 应用程序变得不可能。确定应用程序在本地文件系统上的位置。已安装。它不是任何应用程序。业务要知道。

# c++ - Why can the compiler find one of these operator overloads but not the other?

> ID：16094278
> 
> 赞同：2
> 
> 时间：2013-04-18T22:42:38.430
> 
> 标签：c++, qt, pointers, reference, operator-overloading

I am trying to serialize a custom class I have made, given a pointer to an instance of the class. This code fails to compile because it can't resolve the `operator<<(out, myObj)`.

```
QDataStream& operator<<(QDataStream &out, MyObj const *&m);
QDataStream& operator>>(QDataStream &in, MyObj *&m);

void MainWindow::serialize(QDataStream &out)
{
  MyObj *myObj = new MyObj();
  operator<<(out, myObj);
}

void MainWindow::deserialize(QDataStream &in)
{
  MyObj *myObj = new myObj();
  operator>>(in, myObj);
}

QDataStream &operator<<(QDataStream &out, MyObj const *&) { return out; }

QDataStream &operator>>(QDataStream &in, MyObj *&) { return in; } 
```

The compile error is as follows:

```
MainWindow.cpp:79:33: error: call of overloaded 'operator<<(QDataStream&, MyObj*&)' is ambiguous
MainWindow.cpp:79:33: note: candidates are:
../Qt5.0.1/5.0.1/gcc_64/include/QtCore/qchar.h:395:28: note: QDataStream& operator<<(QDataStream&, QChar) <near match>
../Qt5.0.1/5.0.1/gcc_64/include/QtCore/qchar.h:395:28: note:   no known conversion for argument 2 from 'MyObj*' to 'QChar'
... 
```

Interestingly, the compiler only fails to find the first operator overload. I am able to fix this by using object references rather than references to object pointers, but I am curious why this will not compile.

Why would the compiler be unable to find the implementation of the first operator?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:02:28.260

在您调用 to 时`operator<<`，您正试图将 a`MyObj*`转换为 a`MyObj const *&`。

乍一看，这看起来是有效的。毕竟，您正在*添加const-ness。*但是**C++ 不允许**。

考虑一下你的函数的这种可能的实现，看看为什么。

```
QDataStream &operator<<( QDataStream &out, MyObj const *& refptr )
{
   static const MyObj const_thing;
   refptr = &const_thing;
   return out;
} 
```

此代码将修改提供的（非常量）指针`MyObj *myObj`，使其现在指向一个**声明为 const**的对象。

**如果你想要那个特定的函数签名**你可以通过提供一个常量正确的指针来解决这个问题。

```
void serialize(QDataStream &out)
{
  MyObj *myObj = new MyObj();
  const MyObj *myConstObj = myObj; // THIS is the pointer that will be referenced
  operator<<(out, myConstObj);
} 
```

否则，请考虑仅删除引用。

```
QDataStream& operator<<(QDataStream &out, MyObj const *m); 
```

# apache - .htaccess 将子域重写为主域

> ID：16094281
> 
> 赞同：1
> 
> 时间：2013-04-18T22:42:50.040
> 
> 标签：apache, .htaccess, mod-rewrite

最近几个小时我一直在学习 .htaccess 重写。我一直没能把它弄好。我已经阅读了很多关于她的帖子，但无法解决我的问题。这是我的情况：

```
www.example.com 
```

重定向到

```
example.example2.com 
```

现在我想在 URL 中显示原始域。我有这个：

```
RewriteCond %{HTTP_HOST} ^example\.example2\.com/$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

这行不通。我仍然看到 example.example2.com 而不是 www.example.com

.htaccess 文件位于子域文件夹的顶层。

我应该再次指出，这对我来说是新的，这是我从网上找到的例子中得出的。有人能告诉我如何做到这一点吗？

非常感谢

**编辑：**

1.  我正在尝试安装 Drupal 多站点配置。我的问题似乎可以通过 .htaccess 指令解决，如此[处](http://groups.drupal.org/node/62738)和[此处](http://meinit.nl/nl/using-multiple-domains-with-drupal)所述。因此，我将其发布在这里，而不是 SO 的 Drupal 部分。Drupal 多站点配置的想法是将所有流量引导到分期付款，然后根据发出的请求进行区分。

2.  我无法直接控制从 www.example.com 到 example.example2.com 的重定向。我的托管公司提供直接重定向或通过框架。我可以在表格中检查任何一个。我不知道他们在做什么。通过*直接*重定向，URL 将从 更改`www.example.com`为`example.example2.com`。（现在是 Drupal 安装的位置）如果我选择*框架*，则 URL 保持不变（当然），但将鼠标悬停在链接上仍会显示 example.example2.com 身份。

3.  我没有从多站点配置开始。我将`example.exampl2.com`按照`www.example2.com/sites/www.example.com`多站点的说明进行移动。与此同时，该网站位于`example.example2.com`. 但这意味着我有两期要维护，这不是首选。所以我开始尝试`example.example2.com`看起来像`www.example.com`。那么至少游客永远不会注意到差异。

我现在有这个

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]
RewriteCond %{HTTP_HOST} ^example\.example2\.nl$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R] 
```

它会导致一个循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:54:34.620

**首先**，您的要求颠倒了。您可能希望重定向`example.example2.com`到`www.example.com`.

**您尝试做的第二件事**只有在 mod_proxy 支持下才能实现。启用 mod_proxy，`httpd.conf`然后启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^example\.example2\.com$ [NC]
RewriteRule ^ http://www.example.com%{REQUEST_URI} [L,P] 
```

请注意，`P`此处的标志用于 mod_rewrite 中的代理支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:24:21.867

您的 .htaccess 几乎是完美的。只有一个问题，`HTTP_HOST`只有主机，*没有*尾部斜杠`/`。[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)应该是

```
RewriteCond %{HTTP_HOST} ^example\.example2\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R] 
```

现在，有一个循环重写`www.example.com`来回`example.example2.com`。要打破这个无限循环，您必须添加一个终止条件，以停止规则。在规则前面加上

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

# linux - 目录的 Sed 错误

> ID：16094287
> 
> 赞同：3
> 
> 时间：2013-04-18T22:43:32.343
> 
> 标签：linux, bash, replace, sed, directory

我正在尝试使用 sed 替换文件上的某些目录。这就是我使用 sed 替换的方式。

`sed -i "s/location_apache/$CUSTOM_INSTALL_HOME/g" $apache_boing`

现在，问题来自`$CUSTOM_INSTALL_HOME`变量。因为是目录。
每次我尝试运行脚本时都会出现此错误。
sed: -e expression #1, char 22: unknown option to `s'
我知道这是因为`$CUSTOM_INSTALL_HOME`变量上缺少 \

这个问题有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:48:10.297

由于`$CUSTOM_INSTALL_HOME`有正斜杠，您可以在 sed`/`中使用不同的分隔符，如哈希：`#`

```
sed -i "s#location_apache#$CUSTOM_INSTALL_HOME#g" $apache_boing 
```

# c# - glXMakeCurrent give me Bad Match

> ID：16094292
> 
> 赞同：0
> 
> 时间：2013-04-18T22:43:44.313
> 
> 标签：c#, opengl, x11, opengl-3, glx

I'm having some trouble to have a rendering system working on both Windows and Linux platforms.

On Windows platform it works like a sharm, while on Linux my application terminates with the following exception:

> System.InvalidOperationException: context cannot be current ---> System.ComponentModel.Win32Exception: BadMatch (invalid parameter attributes) X error details: X event name: '' (0) Display: 0x8f17328 Resource ID: 4000011 Error code: 8 Major code: '' (135) Minor code: 5
> 
> at Derm.Render.RenderContext.MakeCurrent (IDeviceContext deviceContext, Boolean flag) at Derm.Render.RenderContext.CreateRenderContext (IDeviceContext deviceContext, Derm.Render.RenderContext hSharedContext, GLVersion version) Stacktrace:
> 
> at (wrapper managed-to-native) System.Windows.Forms.XplatUIX11.XFlush (intptr) at System.Windows.Forms.XplatUIX11.PostQuitMessage (int)
> 
> ...
> 
> at System.Windows.Forms.Control.CreateHandle () at System.Windows.Forms.Control.CreateControl()

I'm able to create a "simple" rendering context, using the following routine:

```
private static IntPtr CreateX11SimpleContext(IDeviceContext rDevice)
{
    XServerDeviceContext x11DeviceCtx = (XServerDeviceContext)rDevice;

    using (new Glx.XLock(x11DeviceCtx.Display)) {
        int[] attributes = new int[] {
            Glx.RENDER_TYPE, (int)Glx.RGBA_BIT,
            0
        };

        // Get basic visual

        unsafe {
            int[] choosenConfigCount = new int[1];
            IntPtr *choosenConfigs = Glx.ChooseFBConfig(x11DeviceCtx.Display, x11DeviceCtx.Screen, attributes, ref choosenConfigCount);

            if (choosenConfigCount[0] == 0)
                throw new InvalidOperationException("unable to find basic visual");

            IntPtr choosenConfig = *choosenConfigs;
            IntPtr visual = Glx.GetVisualFromFBConfig(x11DeviceCtx.Display, choosenConfig);

            x11DeviceCtx.XVisualInfo = (Glx.XVisualInfo)Marshal.PtrToStructure(visual, typeof(Glx.XVisualInfo));
            x11DeviceCtx.FBConfig = choosenConfig;

            Glx.XFree((IntPtr)choosenConfigs);
        }

        // Create direct context
        IntPtr rContext = Glx.CreateContext(x11DeviceCtx.Display, x11DeviceCtx.XVisualInfo, IntPtr.Zero, true);
        if (rContext == IntPtr.Zero) {
            // Fallback to not direct context
            rContext = Glx.CreateContext(x11DeviceCtx.Display, x11DeviceCtx.XVisualInfo, IntPtr.Zero, false);
        }

        if (rContext == IntPtr.Zero)
            throw new InvalidOperationException("unable to create context");

        return (rContext);
    }
} 
```

The problem I'm facing is that the above context is used for fetching the OpenGL informations (extensions, renderer, ...), and then is destroyed. Successively, I create a context using attributes:

```
XServerDeviceContext x11DeviceContext = (XServerDeviceContext)deviceContext;

using (Glx.XLock displayLock = new Glx.XLock(x11DeviceContext.Display)) {
    return (Glx.CreateContextAttribsARB(x11DeviceContext.Display, x11DeviceContext.FBConfig, sharedContext, true, attribsList));
} 
```

The context is created, but at the next `glXMakeCurrent` the X server send me the error in question (BadMatch).

I've suspected about the `CreateContextAttribsARB` arguments: `x11DeviceContext.Display` and `x11DeviceContext.FBConfig`. Infact, the "drawable" I'm using is actually a `System.Windows.Forms` control, provided by *Mono* implementation.

Here is some snippets showing how I initialize those variables:

How do I initialize `x11DeviceContext.Display`?

```
Type xplatui = Type.GetType("System.Windows.Forms.XplatUIX11, System.Windows.Forms");

Type xplatui = Type.GetType("System.Windows.Forms.XplatUIX11, System.Windows.Forms");

if (xplatui == null)
    throw new PlatformNotSupportedException("mono runtime version no supported");

// Get System.Windows.Forms display
mDisplay = (IntPtr)xplatui.GetField("DisplayHandle", System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.NonPublic).GetValue(null);
if (mDisplay == IntPtr.Zero)
    throw new InvalidOperationException("unable to connect to X server"); 
```

How do I initialize `x11DeviceContext.FBConfig`?

```
IntPtr* configs = Glx.GetFBConfigs(x11DeviceContext.Display, x11DeviceContext.Screen, out configsCount);

// Then, a value is selected using a custom seletcion algo, using GetFBConfigAttrib 
```

Sorry because I'm not able to give you a short example program, but the code base is very large and complex.

Do you have any idea to what it's going on?

* * *

EDIT:

Further investigations revealed that I can correctly render using specific visuals, otherwise I get a `BadMatch`. I can't say why, but I see my lines and triangles (but I need to swap even if the visual is not double buffered...).

Previously I got the `BadMatch` error because I was not aware of "not conformant" visual, indeed I selected one of them; however, most of the visual give me the error.

I've checked the `XplatUIX11` class of the Mono implementation, and actually open the display with `XOpenDisplay`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:12:13.660

> 你知道发生了什么吗？

只能猜测。对我来说，这个问题听起来好像上下文已经在其他一些线程中处于活动状态，并且 glXMakeCurrent 报告它无法使上下文处于活动状态，因此；OpenGL 上下文一次只能在一个线程中处于活动状态。

我也对什么感到困惑`Glx.XLock`（我只能猜测它是 XLockDisplay 的对应物，因为它需要一个显示参数）？您正在使用哪些 C# OpenGL 绑定，以便我可以阅读文档？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T19:35:57.597

我找到了解决方案。

我编写了一个单元测试，为每个视觉对象创建 OpenGL 上下文，并且我找到了区分导致`BadMatch`错误的视觉对象的变量：用于创建窗口的视觉对象的[深度。](http://tronche.com/gui/x/xlib/window/XCreateWindow.html)

具有 32 位深度的视觉效果会导致`BadMatch`错误。幸运的是，该驱动程序提供了具有 24 位深度的等效视觉效果，效果非常好。

使用 Mono 的[System.Windows.Forms.XPlatUIX11](http://searchcode.com/codesearch/view/26559668)实现，窗口由框架创建（在我的例子中是 UserControl）。由于它使用`CopyFromParent`常量，我的控件继承了视觉深度，限制了可能的视觉选择。

# javascript - Raphael.js 中的 RotateX

> ID：16094294
> 
> 赞同：0
> 
> 时间：2013-04-18T22:44:01.627
> 
> 标签：javascript, raphael

我在 Raphael 纸上绘制了一些元素，我需要旋转它们，使其看起来像围绕 X 轴旋转。我知道 Raphael 是一个 2D API 并且没有实现类似的东西，但我认为我可以以某种方式更改形状，以便它给人以 3D 旋转的印象。所以问题是：我应该如何在 Raphael.js 中实现 rotateX 或者是否有其他 API 可以用于此目的？

# java - 如何让这个数组乘法表工作

> ID：16094296
> 
> 赞同：1
> 
> 时间：2013-04-18T22:44:11.850
> 
> 标签：java, arrays, multiplication

**乘法表赋值**

我正在尝试分配用户输入数组大小并添加数字 1-数组大小，然后打印出列和行数组，但我认为我做得不太正确：

```
import java.util.Scanner;

public class  MultTable
{
    public static int[]rows;
    public static int[]cols;

    public static void main (String args[])
    {
        intro();
        getRows();
        getCols();
        fillRows();
        fillCols();
        printTable();
    }

    public static void intro()
    {
        System.out.print("Welcome to the Multiplication Table program!");
    }

    public static void getRows()
    {
        Scanner input=new Scanner (System.in);
        System.out.print("\nEnter number of row:");
        int sizerow=input.nextInt();
        int rows[]=new int[sizerow];
    }

    public static void getCols()
    {
        Scanner input=new Scanner(System.in);
        System.out.print("Enter number of columns:");
        int sizecol=input.nextInt();
        int cols[]=new int[sizecol];
    }

    public static void fillRows()
    {
        for(int i=1;i<=rows.length;i++)
        {
            int rows[]=new int[i];
        }
    }

    public static void fillCols()
    {
        for(int j=0;j<cols.length;j++)
        {
            int cols[]=new int[j];
        }
    }

    public static void printTable()
    {
        System.out.print("\n\nHere is your %dx%d multiplication table:");
        System.out.print(cols);
        System.out.print("--------");
        for(int i=1; i<=rows.length;i++)
        {
            for(int j=1;j<=cols.length;j++)
            {
                System.out.print(rows[i]*cols[j]);
            }
        }
    }
} 
```

它一直在说：

> MultTable.fillRows（MultTable.java:41）的线程“主”java.lang.NullPointerException异常在 MultTable.main（MultTable.java:13）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:22:51.027

这段代码有几个问题。首先，您得到的异常是因为`rows`当您尝试访问`length`in时为 null `fillRows()`。

```
for(int i=1;i<=rows.length;i++)
               ^^^^ 
```

这是因为在使用`int rows[]=new int[sizerow];`时`getRows()`，它正在初始化一个新的局部变量，仅对函数可见`getRows()`。你可能想这样做`rows = new int[sizerow];`。这将初始化上面声明的成员变量。对于 cols 也是如此。

`fillRows()`在和中的循环中进行了类似的错误分配`fillCols()`。对于那些，你可能想要做类似的事情`rows[i] = i + 1;`。

此外，请仔细检查所有循环的边界。其中一些从 1 开始，一些从 0 开始。其中一些使用`<= length`，一些`< length`。您可能希望从 0 开始并`< length`在所有这些上使用。

# ext.net - Creating Dynamic GridPanel with dynamic model field and Columns on button click in Ext.net

> ID：16094297
> 
> 赞同：0
> 
> 时间：2013-04-18T22:44:13.327
> 
> 标签：ext.net

//Hi,

//I am creating a dynamic grid with dynamic Column Model and dynamic grid columns. //while I am running below code it's throwing me javascript error "Compilation Error- //Expencted Identifier".

//Can anybody help me out. Thanks in advance.

// Page Designer

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default4.aspx.cs" Inherits="MiscExamples_Default4" %>
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <ext:ResourceManager runat="server" ID="ResourceManager1" />
        <ext:FormPanel ID="frm" runat="server" Frame="true" Width="550" Height="250" Padding="10">
        <Items>

            <ext:Button runat="server" ID="btnSearch" Text="Search" Icon="FeedMagnify" X="150"
                Y="10">
                <DirectEvents>
                    <Click OnEvent="btnSearch_Click" />
                </DirectEvents>
            </ext:Button>
        </Items>
    </ext:FormPanel>
        <ext:FormPanel ID="frmGrid" runat="server">
        <Items>

        </Items>
    </ext:FormPanel>
    <div>

    </div>
    </form>
</body>
</html> 
```

//Code-Behind

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using Ext.Net;

public partial class MiscExamples_Default4 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    private DataTable GetDataTable()
    {
        DataTable table = new DataTable();

        table.Columns.AddRange(new DataColumn[] {
            new DataColumn("Company")   { ColumnName = "Company",    DataType = typeof(string) },
            new DataColumn("Price")     { ColumnName = "Price",      DataType = typeof(double) },
            new DataColumn("Change")    { ColumnName = "Change",     DataType = typeof(double) },
            new DataColumn("PctChange") { ColumnName = "PctChange",  DataType = typeof(double) },
            new DataColumn("PctChange") { ColumnName = "LastChange", DataType = typeof(DateTime) }
        });

        foreach (object[] obj in this.Data)
        {
            table.Rows.Add(obj);
        }

        return table;
    }
    private object[] Data
    {
        get
        {
            DateTime now = DateTime.Now;

            return new object[]
            {
                new object[] { "3m Co", 71.72, 0.02, 0.03, now },
                new object[] { "Alcoa Inc", 29.01, 0.42, 1.47, now },
                new object[] { "Altria Group Inc", 83.81, 0.28, 0.34, now },
                new object[] { "American Express Company", 52.55, 0.01, 0.02, now },
                new object[] { "American International Group, Inc.", 64.13, 0.31, 0.49, now },
                new object[] { "AT&T Inc.", 31.61, -0.48, -1.54, now },
                new object[] { "Boeing Co.", 75.43, 0.53, 0.71, now },
                new object[] { "Caterpillar Inc.", 67.27, 0.92, 1.39, now },
                new object[] { "Citigroup, Inc.", 49.37, 0.02, 0.04, now },
                new object[] { "E.I. du Pont de Nemours and Company", 40.48, 0.51, 1.28, now },
                new object[] { "Exxon Mobil Corp", 68.1, -0.43, -0.64, now },
                new object[] { "General Electric Company", 34.14, -0.08, -0.23, now },
                new object[] { "General Motors Corporation", 30.27, 1.09, 3.74, now },
                new object[] { "Hewlett-Packard Co.", 36.53, -0.03, -0.08, now },
                new object[] { "Honeywell Intl Inc", 38.77, 0.05, 0.13, now },
                new object[] { "Intel Corporation", 19.88, 0.31, 1.58, now },
                new object[] { "International Business Machines", 81.41, 0.44, 0.54, now },
                new object[] { "Johnson & Johnson", 64.72, 0.06, 0.09, now },
                new object[] { "JP Morgan & Chase & Co", 45.73, 0.07, 0.15, now },
                new object[] { "McDonald\"s Corporation", 36.76, 0.86, 2.40, now },
                new object[] { "Merck & Co., Inc.", 40.96, 0.41, 1.01, now },
                new object[] { "Microsoft Corporation", 25.84, 0.14, 0.54, now },
                new object[] { "Pfizer Inc", 27.96, 0.4, 1.45, now },
                new object[] { "The Coca-Cola Company", 45.07, 0.26, 0.58, now },
                new object[] { "The Home Depot, Inc.", 34.64, 0.35, 1.02, now },
                new object[] { "The Procter & Gamble Company", 61.91, 0.01, 0.02, now },
                new object[] { "United Technologies Corporation", 63.26, 0.55, 0.88, now },
                new object[] { "Verizon Communications", 35.57, 0.39, 1.11, now },
                new object[] { "Wal-Mart Stores, Inc.", 45.45, 0.73, 1.63, now }
            };
        }
    }
    private GridPanel createDynamicGrid()
    {
        Store store1 = new Store();
        GridPanel grid = new GridPanel();
        Ext.Net.Model model = new Model();
        for (int i = 0; i < 2; i++)
        {
            ModelField modelField = new ModelField();
            if (i == 0)
                modelField.Name = "Company";
            else
                modelField.Name = "Price";

            model.Fields.Add(modelField);

        }

        store1.Model.Add(model);
        store1.DataSource = this.GetDataTable();
        store1.DataBind();
        grid.Store.Add(store1);
        grid.SelectionModel.Add(new RowSelectionModel { Mode = SelectionMode.Single });
        grid.ColumnModel.Columns.Add(new ColumnBase[] { 
            new Column 
            {
                Text = "Company",
                DataIndex = "Company",
                Flex = 1
            },
            new Column
            {
                Text = "Price",a
                DataIndex = "Price"

            }
        });
        return grid;
    }

    protected void btnSearch_Click(object sender, DirectEventArgs e)
    {
        createDynamicGrid().Render(this.frmGrid, RenderMode.AddTo);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:50:01.773

请删除这个：

```
store1.DataBind(); 
```

只需要更新现有的商店（已经呈现给客户端）。

# linux - PostgreSQL different versions

> ID：16094298
> 
> 赞同：4
> 
> 时间：2013-04-18T22:44:13.943
> 
> 标签：linux, postgresql, postgresql-9.2

I'm new with PostgreSQL and want to start working with it as the database for a web development. But on PostgreSQL website I have 4 active versions: 9.2, 9.1, 9.0 and 8.4.

Why does PostgreSQL have 4 active versions? What are the main differences between them? Should I go for the latest one?

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:04:32.267

**在这种情况下活跃**意味着它们仍在被维护；错误修复，安全修复。不再列出寿命终止/失去支持的事物。就是这样。

[您可以通过阅读版本策略](http://www.postgresql.org/support/versioning/)文档了解更多信息。

是的，如果您没有可能损坏的旧东西，则选择最新的是一个相当安全的选择。

# c++ - C++：如何在堆栈内存中创建一个指向我从中生成它的对象的对象？

> ID：16094299
> 
> 赞同：1
> 
> 时间：2013-04-18T22:44:19.253
> 
> 标签：c++, pointers

我有一个带有构造函数 Foo(Bar * b) 的类 Foo。我想要类 Bar 中的一个函数，它返回一个指向该 Bar 的 Foo。我尝试：

```
Foo& Bar::make_foo() {
  Foo f((Bar*)this);
  return f;
} 
```

但后来 G++ 告诉我：

```
error: variable ‘Foo f’ has initializer but incomplete type 
```

现在我知道这在堆内存中可以正常工作：

```
Foo* Bar::make_foo() {
  Foo * f = new Foo((Bar*)this);
  return f;
} 
```

* * *

编辑：显然问题是由于类定义不完整。但是，我仍然很好奇是否有适当的习语可以在堆栈内存中返回对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:53:31.337

无论如何，这段代码都是错误的，因为它在堆栈上返回一个对象，这意味着一旦您从函数返回，该空间可用于存储其他对象 - 这根本不会结束。

```
Foo& Bar::make_foo() {
  Foo f((Bar*)this);
  return f;
} 
```

只要按照`Bar`应有的方式声明，您就应该能够做到这一点 - 除了担心“您正在使用将被释放的堆栈空间”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:55:26.280

以下对我有用（[http://codepad.org/feWQYjtt](http://codepad.org/feWQYjtt)）。注意：我稍微改变了 的签名`make-foo`，返回本地对象的引用没有意义。

```
struct Bar;
struct Foo {
    Foo( Bar * ) {}
};

struct Bar {
    Foo make_foo() {     // Signature changed
        return Foo( this );
    }
};

int main() {
    Bar barObj;
    Foo fooObj = barObj.make_foo();
    (void) fooObj;
} 
```

# emacs - 全局行号是断断续续的——与全局空格冲突

> ID：16094303
> 
> 赞同：1
> 
> 时间：2013-04-18T22:44:33.037
> 
> 标签：emacs, aquamacs

我在我的 init.el`(global-linum-mode 1)`中`(global-whitespace-mode t)`定义了 Aquamacs 2.4。行号是间歇性的，会跳过在空行之后显示行号。禁用空格可以解决问题。有什么方法可以显示每一行的行号并启用空格？

也许有一个替代 linum.el 的方法非常相似？

在以下示例中，美元符号是一个没有文本的空行。

```
1  First line.
2  Second line.
3  $
   Fourth line.
5  $
   Sixth Line.
7  Seventh line.
8  $
   Ninth line. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:13:35.487

解决方案＃1——来自[http://www.emacswiki.org/LineNumbers](http://www.emacswiki.org/LineNumbers)（引用Michael Hoffman）——出于不同的原因发布在那里，但也解决了我的问题：

```
(eval-after-load 'linum
  '(progn
     (defface linum-leading-zero
       `((t :inherit 'linum
            :foreground ,(face-attribute 'linum :background nil t)))
       "Face for displaying leading zeroes for line numbers in display margin."
       :group 'linum)

     (defun linum-format-func (line)
       (let ((w (length
                 (number-to-string (count-lines (point-min) (point-max))))))
         (concat
          (propertize (make-string (- w (length (number-to-string line))) ?0)
                      'face 'linum-leading-zero)
          (propertize (number-to-string line) 'face 'linum))))

     (setq linum-format 'linum-format-func))) 
```

* * *

解决方案＃2：

```
(setq linum-format "%d") 
```

* * *

仅供参考＃A：

对于想知道如何解决各种空白颜色（和/或突出显示当前行）侵入为行号保留的左侧边距的相关问题的任何人，设置该区域的背景颜色可以解决问题。行号的前景和/或背景可以由用户定义。上面的解决方案一也可以通过在第 5 行的单词之后添加颜色定义来修改`foreground`- 例如，`:foreground "red", ...` 以下代码段是一个单独的行，可以在解决方案一中提到的整个解决方法之前或之后，并使用任何颜色进行修改用户希望：

```
(custom-set-faces '(linum ((t (:foreground "red" :background "white" :height 120 :family "Courier")))) ) 
```

仅供参考＃B：我修改了第一个解决方案的第13行以消除`0`并用一个普通的旧空格替换它，因为我不习惯看到前导零并且只是在寻找解决这个线程中描述的初始问题的解决方案。解决方案 2 似乎是左冲洗，解决方案 1 是冲洗右。只是个人喜好问题。毫无疑问，`linum-format`除了定义在`linum.el`.

# c# - LINQ anonymous type not giving the list I need

> ID：16094305
> 
> 赞同：5
> 
> 时间：2013-04-18T22:44:53.713
> 
> 标签：c#, asp.net-mvc, linq, anonymous-types

I'm in the process of doing a LINQ query of an object call `Recipe` that need to be ordered by it's score. In the beginning, I have a `IEnumberable` of type `Recipe` (already filtered with the search criteria) called `selectedRecipies`

Then, with the help of my friend google, I have done this query using an anonymous type:

```
var finalQuery = ((from h in db.StarRatings
                       where selectedRecipies.Any(sr => sr.IDRecipe == h.IDRecipe)
                     group h by new { h.IDRecipe } into hh
                     select new
                     {
                         hh.Key.IDRecipe,
                         Score = hh.Sum(s => s.Score)
                     }).OrderByDescending(i => i.Score)); 
```

And I think it work... My problem is that for my view, I need it to be of type `Recipe` and `finalQuery` seems to be of type `IEnumerable<'a>` where `a` is the anonymous type...

How can I get a `List<>` of type Recipe without disturbing the OrderByDescending?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:48:17.847

您需要创建一个，而不是创建匿名类型`Recipe`：

```
select new Recipe // Use constructor or object initiailizer here
                 {
                     ID = hh.Key.IDRecipe,
                     Score = hh.Sum(s => s.Score)
                 }).OrderByDescending(i => i.Score))
                 .ToList(); // To make your List<T> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T23:27:56.060

您应该创建一个新类`RecipeViewModel`（或`RecipeDto`）来捕获结果：

```
select new RecipeViewModel
 {
     hh.Key.IDRecipe,
     Score = hh.Sum(s => s.Score)
 }).OrderByDescending(i => i.Score)); 
```

但你说

> 我需要它是食谱类型

这让我怀疑您需要提供更多（或全部）数据`Recipe`。因此，您可能应该深刻地重构查询。如果是这样，您仍然不能使用`Recipe`该类本身，因为它没有`Score`属性：

```
from r in db.Recipes
where // .....  (do your filtering here)
select new RecipeViewModel
  {
      Id = r.Id,
      // ... more recipe properties
      Score = r.StarRatings.Sum(rating => rating.Score)
  } 
```

假设有一个导航属性Recipe.StarRatings。如果没有，您应该使用一个`join`声明来包含评级。（或引入导航属性）。

# floating-point - Test if two floats are zero without multiple tests

> ID：16094306
> 
> 赞同：2
> 
> 时间：2013-04-18T22:45:01.887
> 
> 标签：floating-point, equality, pseudocode, bitmask

Is there a clever expression trick to test if a float vec3 is axial (i.e. two zero components) without using multiple equality tests?

At first I thought of `if(abs(x)+abs(y)==0.0)` (pseudocode)... but of course each `abs` call probably does a branch/equality test.

I thought of masking each float's bytes together and testing the result, but IEEE FP has both positive and negative 0.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:30:47.670

不，没有一个聪明的方法来测试三个 IEEE-754 二进制浮点值中的两个是否为零而无需多次比较为零。

如果以下至少两项为真，则所需结果为真：

*   *x*的除符号位外的所有位都为零。
*   *除了符号位之外， y*的所有位都为零。
*   *z*的除符号位之外的所有位都为零。

在评估“所有位”标准之前，没有任何位运算可以帮助评估。任何失去相同值中位之间关系的按位运算都是无用的。本质上，您需要分别了解上述各项**。**但上述每一项都相当于与零进行浮点比较。

您可以考虑使用数学方法而不是按位计算： (| *x* |+| *y* |)•(| *y* |+| *z* |)•(| *z* |+| *x |) 从数学上讲，如果**x*中至少有两个，则为零, *y*和*z*为零。取绝对值不需要比较；它可以通过清除符号位来实现。所以上面可以实现为三个位清除操作（并且，在某些机器上，从浮点寄存器传输到通用寄存器并返回），三个浮点加法，两个乘法和一个比较。但是，乘法可能下溢（即使精确的数学结果不为零，也会产生零）或上溢（当第一次乘法产生无穷大并导致第二次乘法在需要零时产生 NaN 时会出现问题）。

在常见的现代处理器上进行比较并不昂贵，您通常不必担心避免它们。分支可能很昂贵，尽管您可能没有注意到这是例行代码。如果一个分支在你的应用程序中被证明是麻烦的，那么可能有特定于处理器的方法来缓解这个问题。可能有机器指令允许您将比较结果作为可以执行逻辑运算的值获得，然后您只需要一个分支指令。这不是您应该执行的优化，除非您已明确确定分支是您的应用程序中的一个重大问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T23:09:18.927

Eric Postpischil 正确地在我发布的代码中打了一个洞。它检查每个位是否最多出现在三个参数中的一个中。不幸的是，我想不出解决您问题的好方法。

不过，浮点绝对值可以（忽略 NaN）通过屏蔽符号位来实现，因此您可以使用它。此外，类似的比较`==`可以编译为有条件的移动，而不是分支。

# c# - C#/Windows MediaPlayer：处理按钮点击

> ID：16094307
> 
> 赞同：0
> 
> 时间：2013-04-18T22:45:03.893
> 
> 标签：c#, media-player

简单的问题：我有一个 AxWindowsMediaPlayer 组件，我想修改 OnPlayButtonClick 事件，该事件似乎不存在。有解决办法的想法吗？

应该是这样的：

```
private void OnPlayButtonClick() {
  MessageBox.Show('Hello World');
  if (wmPlayer.playState.ToString().Equals("wmppsPlaying"))
    wmPlayer.Ctlcontrols.pause();
  else
    wmPlayer.Ctlcontrols.play();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:49:39.093

您可以选择该控件并查看属性窗口并单击闪电，您将看到您可以为该控件订阅的所有事件。我认为您没有可以订阅的 playbuttonclick 事件，我认为您需要订阅 playstatechanged 并在那时检查播放状态并根据它的内容执行操作。你可以这样做：

```
private void axWindowsMediaPlayer1_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
    {
        MessageBox.Show(e.newState.ToString());
    } 
```

或者您可以创建自定义按钮来执行播放、暂停、停止功能并执行这些按钮的事件处理程序中需要的任何操作。

# android - 如何创建服务检测新联系人添加

> ID：16094308
> 
> 赞同：0
> 
> 时间：2013-04-18T22:45:05.330
> 
> 标签：android, contentobserver

我找到了很多代码来检测 noveaux 添加联系人

例如

```
public class ContactsObserver extends ContentObserver {
private final static String TAG = ContactsObserver.class.getSimpleName();

private Context ctx;
private List<ContactsChangeListener> listeners = new ArrayList<ContactsChangeListener>();

private ContactsObserver(Context ctx) {
    super(new Handler());
    this.ctx = ctx.getApplicationContext();
    ctx.getContentResolver()
        .registerContentObserver(
                ContactsContract.Contacts.CONTENT_URI,  // uri
                false,                                  // notifyForDescendents
                this);                                  // observer
}

@Override
public void onChange(boolean selfChange) {
    Log.i(TAG, "Contacs change");
    for(ContactsChangeListener l : listeners){
        l.onContactsChange();
    }
}

@Override
public boolean deliverSelfNotifications() {
    return false; // set to true does not change anything...
}

public static ContactsObserver register(Context ctx){
    Log.d(TAG, "register");
    return new ContactsObserver(ctx);
}

public void unregister(){
    Log.d(TAG, "unregister");
    ctx.getContentResolver().unregisterContentObserver(this);
}

public void addContactsChangeListener(ContactsChangeListener l){
    listeners.add(l);
}

public interface ContactsChangeListener{
    void onContactsChange();
}
} 
```

但是此代码与活动相关联，

我认为应用程序在打开时可以工作，但我希望服务使用 ContentObserver

是什么取代了这段代码的执行

```
getContentResolver()
                .registerContentObserver(
                        ContactsContract.Contacts.CONTENT_URI, true,
                        new MyCOntentObserver()); 
```

放入服务方法“OnStart”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T06:59:39.833

使用以下方式注册服务：

```
getApplication().getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true,new MyCOntentObserver()); 
```

# php - 如何从字符串末尾删除字符直到达到某个字符？

> ID：16094311
> 
> 赞同：1
> 
> 时间：2013-04-18T22:45:28.927
> 
> 标签：php

我正在尝试从字符串末尾删除字母，直到字符串以某些字符结尾。

我有如下字符串：

```
$filename=test1/test.jpeg;
$filename2=project/test2/test1112.jpeg;

// The file name length could vary. 
```

我想获取文件夹，因此值将是`test1`或`project/test2`

我努力了

```
$folder = substr($filename,-4) 
```

但那是静态的。我如何动态地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:52:02.750

你需要使用 php 的[dirname](http://pk1.php.net/manual/en/function.dirname.php)函数

```
$filename = 'test1/test.jpeg';
$filename2 = 'project/test2/test1112.jpeg';

var_dump(dirname($filename));
var_dump(dirname($filename2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:51:52.310

可能会更快

```
$folder = substr($filename, 0, strrpos('/')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T22:52:20.823

如果它是您要查找的特定文件名，那么 PHP 的内置函数可能`dirname()`就是[您想要](http://ie1.php.net/manual/en/function.dirname.php)的。

对于所提出的问题的更通用的答案，当然可以通过字符串向后工作，`substr()`直到您到达某个字符。

这是一个通用的“从字符串末尾删除字符直到我到达某个字符”函数：

```
<?php

$str = 'This is a few words in some sort of order; it makes some sort of sense.';

function find_to_last_char($str, $char) {
  $reversed_string = strrev($str);
  $char_pos = strpos($reversed_string, $char);
  if ($char_pos === false) return $str; // character not present
  $trim = substr($reversed_string, $char_pos);
  return strrev($trim);
}

echo find_to_last_char($str, ';'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T22:49:57.367

您可以使用数组通过 / 分割字符串

```
$file_parts_ary = explode("/", $filename); 
```

如果数组中的最后一个元素是文件名，那么您知道前面的所有元素都是路径。您可以再次组合它们或拉出一个特定的。

```
$file_path_ary = array_pop($file_parts_ary);   // remove the filename
$file_path = implode("/", $file_path_ary);  // Put the rest of the path back together 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T22:53:53.017

[PHP pathinfo 函数](http://php.net/manual/en/function.pathinfo.php)是您正在寻找的。这是基于您的代码的示例：

```
<?php
    $filenames = array(
        'test1/test.jpeg',
        'project/test2/test1112.jpeg'
    );

    foreach ($filenames as $filename) {
        echo pathinfo($filename, PATHINFO_DIRNAME) . "\n";
    } 
```

导致：

```
 test1
    project/test2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T22:51:03.233

PHP 有一个名为 strrpos 的函数，它返回字符串中元素的最后一次出现。所以在那之后你可以使用 substr($strin,0,strrpos("/"))

好的？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T22:49:41.373

反转字符串，删除第一个斜杠之前的所有内容，然后重新反转它以获得没有文件名的原始字符串。

# algorithm - 如何平滑随机分布？

> ID：16094318
> 
> 赞同：3
> 
> 时间：2013-04-18T22:45:57.553
> 
> 标签：algorithm, math, random, distribution, random-sample

我正在尝试随机化游戏中角色的外观，但使用他们的名字作为种子。因此，如果您在游戏中遇到“鲍勃”，他将始终拥有相同的头发/眼睛等。

现在我只是从他们的名字中生成一个数字（通过添加所有的字符代码），然后使用模数来决定他们有什么选项。

示例：Bob 的种子是 276 (66 + 111 + 98)。276% 的发型数量（40 种）导致 36 种。

这很好，但对于 350 多个名称的列表，分布如下所示：

```
hair style: 0 / # of people using it: 15
hair style: 1 / # of people using it: 8
hair style: 2 / # of people using it: 4
hair style: 3 / # of people using it: 5
hair style: 4 / # of people using it: 7
hair style: 5 / # of people using it: 5
hair style: 6 / # of people using it: 7
hair style: 7 / # of people using it: 14
hair style: 8 / # of people using it: 12
hair style: 9 / # of people using it: 6
hair style: 10 / # of people using it: 7
hair style: 11 / # of people using it: 2
hair style: 12 / # of people using it: 7
hair style: 13 / # of people using it: 10
hair style: 14 / # of people using it: 11
hair style: 15 / # of people using it: 7
hair style: 16 / # of people using it: 12
hair style: 17 / # of people using it: 7
hair style: 18 / # of people using it: 6
hair style: 19 / # of people using it: 10
hair style: 20 / # of people using it: 5
hair style: 21 / # of people using it: 10
hair style: 22 / # of people using it: 11
hair style: 23 / # of people using it: 3
hair style: 24 / # of people using it: 6
hair style: 25 / # of people using it: 8
hair style: 26 / # of people using it: 5
hair style: 27 / # of people using it: 11
hair style: 28 / # of people using it: 10
hair style: 29 / # of people using it: 6
hair style: 30 / # of people using it: 13
hair style: 31 / # of people using it: 11
hair style: 32 / # of people using it: 10
hair style: 33 / # of people using it: 12
hair style: 34 / # of people using it: 3
hair style: 35 / # of people using it: 11
hair style: 36 / # of people using it: 9
hair style: 37 / # of people using it: 4
hair style: 38 / # of people using it: 10
hair style: 39 / # of people using it: 15 
```

分布不是很顺利，到处都是（不足为奇）。我会遇到很多发型 #0 的人，而几乎没有发型 #11 的人。

我怎样才能把它弄平一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:56:42.253

如果您使用真正的散列函数而不是仅仅对 ASCII/Unicode 代码点求和，您可能会有更好的运气。 [该`djb2`函数](http://www.cse.yorku.ca/~oz/hash.html)对于 ASCII 输入非常流行：

```
unsigned long hash(unsigned char *str) {
    unsigned long hash = 5381;
    int c;

    while (c = *str++)
        hash = ((hash << 5) + hash) + c; /* hash * 33 + c */

    return hash;
} 
```

所以，例如，

```
unsigned long hairStyle = hash(characterName) % kHairStyleCount; 
```

另请参阅[什么是英语单词的好散列函数？](https://stackoverflow.com/q/7700400/77567)

# android - 片段类中的滑动菜单

> ID：16094320
> 
> 赞同：2
> 
> 时间：2013-04-18T22:46:17.737
> 
> 标签：android, android-fragments, slidingmenu

我正在尝试在片段类中使用 jfeinstein10 SlidingMenu。

```
public class ConversionFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.activity_conversion, container, false);

        super.onCreate(savedInstanceState);

        SlidingMenu menu = new SlidingMenu(BaseActivity.context);
        menu.setMode(SlidingMenu.LEFT);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
        menu.attachToActivity((Activity) BaseActivity.context, SlidingMenu.SLIDING_WINDOW);
        menu.setMenu(R.layout.list);

        ListView lv = (ListView) rootView.findViewById(R.id.listView1);
        String[] values = new String[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(rootView.getContext().getApplicationContext(),
              android.R.layout.simple_list_item_1, android.R.id.text1, values);
        lv.setAdapter(adapter);

        return rootView;
    }
} 
```

和我的 list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

我在`lv.setAdapter(adapter);`这可能是什么原因得到一个空点异常？

这甚至是使用 jfeinstein10 SlidingMenu 的正确方法吗？

```
04-18 19:15:36.345: D/myapp(19089): java.lang.Exception 
04-18 19:15:36.345: D/myapp(19089):     at com.example.app1.ConversionFragment.onCreateView(ConversionFragment.java:44)
04-18 19:15:36.345: D/myapp(19089):     at android.app.Fragment.performCreateView(Fragment.java:1695)
04-18 19:15:36.345: D/myapp(19089):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
04-18 19:15:36.345: D/myapp(19089):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
04-18 19:15:36.345: D/myapp(19089):     at android.app.BackStackRecord.run(BackStackRecord.java:682)
04-18 19:15:36.345: D/myapp(19089):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
04-18 19:15:36.345: D/myapp(19089):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:441)
04-18 19:15:36.345: D/myapp(19089):     at android.os.Handler.handleCallback(Handler.java:725)
04-18 19:15:36.345: D/myapp(19089):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 19:15:36.345: D/myapp(19089):     at android.os.Looper.loop(Looper.java:137)
04-18 19:15:36.345: D/myapp(19089):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-18 19:15:36.345: D/myapp(19089):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 19:15:36.345: D/myapp(19089):     at java.lang.reflect.Method.invoke(Method.java:511)
04-18 19:15:36.345: D/myapp(19089):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-18 19:15:36.345: D/myapp(19089):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-18 19:15:36.345: D/myapp(19089):     at dalvik.system.NativeStart.main(Native Method)
04-18 19:15:38.001: D/AndroidRuntime(19089): Shutting down VM   
04-18 19:15:38.001: W/dalvikvm(19089): threadid=1: thread exiting with uncaught exception (group=0x41e8b930)    
04-18 19:15:38.025: E/AndroidRuntime(19089): FATAL EXCEPTION: main  
04-18 19:15:38.025: E/AndroidRuntime(19089): java.lang.NullPointerException 
04-18 19:15:38.025: E/AndroidRuntime(19089):    at com.example.app1.ConversionFragment.onCreateView(ConversionFragment.java:45)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.Fragment.performCreateView(Fragment.java:1695)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.BackStackRecord.run(BackStackRecord.java:682)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:441)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.os.Handler.handleCallback(Handler.java:725)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.os.Looper.loop(Looper.java:137)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at java.lang.reflect.Method.invoke(Method.java:511)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-18 19:15:38.025: E/AndroidRuntime(19089):    at dalvik.system.NativeStart.main(Native Method)
04-18 19:15:38.040: W/ActivityManager(389):   Force finishing activity com.example.app1/.BaseFragment 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:46:11.223

您似乎无法正确引用滑动菜单左侧使用的 ListView。问题是您要求错误的视图（rootView）找到您的列表，返回一个空引用。您应该自己膨胀菜单视图，然后在膨胀的视图上调用 findViewById() ，如下所示：

```
...
View left = inflater.inflate(R.layout.list,null,false);
...
menu.setMenu(left);
...
ListView lv = (ListView) left.findViewById(R.id.listView1);
... 
```

无论如何，我认为您的代码中还有另外几个错误。如果你想在你的片段中使用滑动菜单，你应该使用菜单作为 onCreateView 方法的返回值。出于同样的原因，您不应该将菜单附加到整个活动，因此您应该删除相关的代码行。

# javascript - 如何使动态创建的字段/元素成为必需？

> ID：16094321
> 
> 赞同：0
> 
> 时间：2013-04-18T22:46:22.290
> 
> 标签：javascript, dom

我的尝试是：

```
 -- new field id and name: fruit
     var cellText = document.createElement('input');
     cellText.type = 'text';
     cellText.id = 'fruit';
     cellText.name = 'fruit';
     cellText.required = true;
     cellText.message = "Please enter something for the newly created Fruit field"; 
```

使用适用于 Windows 的 Firefox 19 和 Chrome 26 进行测试，均无效。它的正确语法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:50:39.243

你可以试试`cellText.required = "required";`

# android - API 级别 8 的 ICS 样式 EditText

> ID：16094324
> 
> 赞同：1
> 
> 时间：2013-04-18T22:46:47.120
> 
> 标签：android, android-edittext, android-holo-everywhere

如何为 ICS 中带有 Holo 主题的 EditText 设置样式，以使其与 API 级别 8 的设备兼容。

我尝试了以下代码，但它与 API 8 不兼容。

```
<EditText
        android:id="@+id/editText1"
        style="@android:style/Widget.Holo.EditText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T22:49:40.200

您可以使用[HoloEveryWhere](https://github.com/Prototik/HoloEverywhere)。

或者你可以这样做：

```
<style name="MyTheme" parent="@android:style/Theme">
    <item name="android:editTextBackground">@drawable/my_edittext</item>
</style> 
```

my_edittext.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_window_focused="false" android:state_enabled="true" android:drawable="@drawable/textfield_default_holo_light" />
    <item android:state_window_focused="false" android:state_enabled="false" android:drawable="@drawable/textfield_disabled_holo_light" />
    <item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/textfield_activated_holo_light" />
    <item android:state_enabled="true" android:state_activated="true" android:drawable="@drawable/textfield_focused_holo_light" />
    <item android:state_enabled="true" android:drawable="@drawable/textfield_default_holo_light" />
    <item android:state_focused="true" android:drawable="@drawable/textfield_disabled_focused_holo_light" />
    <item android:drawable="@drawable/textfield_disabled_holo_light" />
</selector> 
```

您可以在 SDK 文件夹中找到上述可绘制对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:51:49.267

自己创建类似的设计。您可以使用 api 16 的资源。您可以在 /android-sdks/platforms/android-16/data/res/ 文件夹中找到这些资源

# ios - 设置按钮的图像

> ID：16094327
> 
> 赞同：0
> 
> 时间：2013-04-18T22:47:14.277
> 
> 标签：ios, objective-c, cocoa-touch, uibutton, deprecated

我通常使用以下方法更改按钮的图像：`[Button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];`我今天才注意到此代码已被弃用。更改按钮图像的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:26:49.830

问题解决了。你不会相信我花了这么长时间才找到解决方案……实际上，我的代码是这样的：

`//Changes the icon image`

`[Button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];`

当我将光标放在单词图像之后时，我会收到一条 Quick Help Deprecated Code 消息。所以，我试着想办法纠正这个问题一段时间，然后我认为这可能是一个错误。所以起初，我只是在第一行之后添加了一个换行符，并将光标放在第二行。没有弃用代码消息。然后，我简单地删除了图像这个词。

`//Changes the icon`

`[Button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];`

没有弃用的代码消息...</p>

为了隔离这一点，我试图只保留图像这个词：

`//image`

`[Button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];`

已弃用的代码消息。

更好的是：删除所有内容并仅保留： `//image`

已弃用的代码消息。它看起来很像一个错误……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:59:23.123

这是正确的语法，（假设您有一个`UIButton`名为 的实例`Button`）。该方法尚未被弃用。

# c# - 使用 Linq 关闭所有 MDI 子窗口

> ID：16094331
> 
> 赞同：3
> 
> 时间：2013-04-18T22:47:27.363
> 
> 标签：c#, winforms, linq, mdichild, mdiparent

我正在尝试使用以下循环

```
foreach (Form frm in this.MdiChildren)
{
    frm.Close();
} 
```

并将其转录为 Linq 表达式，如下所示：

```
this.MdiParent.MdiChildren.OfType<Form>().ToList().ForEach(x => x.Close()); 
```

但是这一行向我显示了`NullReferenceException`“对象引用未设置为对象的实例”

我究竟做错了什么？我是Linq的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:01:37.283

尝试这个：

```
this.MdiChildren.OfType<Form>().ToList().ForEach(x => x.Close()); 
```

除非您从其中一个孩子那里尝试该代码，否则在这种情况下您尝试您的代码

```
this.MdiParent.MdiChildren.OfType<Form>().ToList().ForEach(x => x.Close()); 
```

它也应该工作。

# javascript - 对javascript构造函数中的参数求和并返回总数

> ID：16094340
> 
> 赞同：0
> 
> 时间：2013-04-18T22:48:59.457
> 
> 标签：javascript

如果我有一个构造函数并且想要将参数值求和并输出到内部方法，我想我可以执行以下操作：

```
function Stats(a, b, c, d, e, f) {
    this.a = a;
    this.b = b;
    this.c = c; 
    this.d = d; 
    this.e = e; 
    this.f = f;
    var total = 0;
    var array = [a, b, c, d, e, f];
    var len = array.length;
    this.sum = function() {
        for(var i = 0; i < len; i++) {
            total += array[i];
        }
        return total;
    };
}
var output = new Stats(10, 25, 5, 84, 8, 44);
console.log(output); 
```

查看控制台时，“总计”为 0。

我确信我的逻辑完全失败了，所以如果你有如何改进这个（以及总和）的建议，我很乐意阅读它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:53:16.170

```
function Stats(){
    var sum = 0;
    for (var i = 0; i < arguments.length; i++) {
        sum += arguments[i];
    }
    return sum;
} 
```

Arguments 变量包含数组中函数的所有参数。

不知道你想在那里实现什么，但我认为在那里查看你的变量堆栈可能很有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:56:34.403

这可以缩写。

```
function Stats(var_args) {
  var sum = 0;
  // The arguments pseudo-array allows access to all the parameters.
  for (var i = 0, n = arguments.length; i < n; ++i) {
    // Use prefix + to coerce to a number so that += doesn't do
    // string concatenation.
    sum += +arguments[i];
  }
  // Set the sum property to be the value instead of a method
  // that computes the value.
  this.sum = sum;
}

var output = new Stats(10, 25, 5, 84, 8, 44);
// You can use a format string to see the object and a specific value.
console.log("output=%o, sum=%d", output, output.sum); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T00:10:14.787

我认为优化版本可以满足您的需求：

```
function Stats() {
    var _arguments = arguments;
    this.sum = function() {
        var i = _arguments.length;
        var result = 0;
        while (i--) {
            result += _arguments[i];
        }
        return result;
    };
}
var output = new Stats(10, 25, 5, 84, 8, 44);
console.log(output.sum()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T23:03:04.463

在[jsfiddle上可用](http://jsfiddle.net/Xotic750/pKtTx/)

```
function Stats(a, b, c, d, e, f) {
    this.a = a;
    this.b = b;
    this.c = c;
    this.d = d;
    this.e = e;
    this.f = f;

    this.sum = Array.prototype.reduce.call(arguments, function (x, y) {
        return x + y;
    }, 0);

}

var output = new Stats(10, 25, 5, 84, 8, 44);

console.log(output); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T22:51:27.413

您必须调用 sum - 输出是对象：

```
console.log(output.sum()); 
```

为了提高你的课程，如果我只想对它们求和，我会继续做一些更一般的事情，而不是限制我的参数数量：

```
 function Stats() {
        this.total = (function(args){
            var total = 0;
            for(var i = 0; i < args.length; i++) {
                total += args[i];
            }

            return total;
        })(arguments);
     }
var output = new Stats(10, 10, 5, 10, 10, 10,100,24,1000);

console.log(output.total); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T22:54:11.637

根据您编写代码的方式，您应该这样做

```
console.log(output.sum()); 
```

为了得到想要的输出

# c++ - 如何使用 VS C++ 6.0 在 C++ 应用程序中嵌入 Python 2.4？

> ID：16094343
> 
> 赞同：3
> 
> 时间：2013-04-18T22:49:30.710
> 
> 标签：c++, python, visual-c++, visual-studio-6

我收到此链接错误，使用 Python 2.4 和 MS VC++ 6：

```
Linking...
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__Py_Finalize
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyErr_Occurred
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyErr_Print
testPyEmb.obj : error LNK2001: unresolved external symbol _printf
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyInt_AsLong
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyObject_CallObject
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyTuple_SetItem
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyInt_FromLong
testPyEmb.obj : error LNK2001: unresolved external symbol _atoi
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyTuple_New
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyCallable_Check
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyObject_GetAttrString
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyImport_Import
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__PyString_FromString
testPyEmb.obj : error LNK2001: unresolved external symbol __imp__Py_Initialize
testPyEmb.obj : error LNK2001: unresolved external symbol _fprintf
testPyEmb.obj : error LNK2001: unresolved external symbol __iob 
```

将此添加到我的源文件没有帮助：

```
#undef _DEBUG 
```

我修改了 pyconfig.h 以禁用调试模式并强制使用 python24.lib 而不是 python24_d.lib，如下所示：http://tutorial.debashis.net/?p=57&cpage [=](http://tutorial.debashis.net/?p=57&cpage=1) 1 仍然是同样的错误。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-27T20:15:11.900

由于您说您正在链接 .lib，可能是您已经安装了 64 位版本的 Python，因此正在链接 64 位版本的 .lib 文件，但是您的构建配置是（我怀疑） 32 位。转到配置管理器并将其更改为 64 位。

希望这可以帮助。马吕斯。

# jquery - Jquery 日历禁用日期颜色

> ID：16094345
> 
> 赞同：1
> 
> 时间：2013-04-18T22:49:37.107
> 
> 标签：jquery, calendar

如何将 5 月禁用日期的背景颜色更改为红色？

```
<input id="iDate">

<script type='text/javascript'>
var unavailableDates = ["9-5-2013", "14-5-2013", "15-5-2013"];

function unavailable(date) {
dmy = date.getDate() + "-" + (date.getMonth() + 1) + "-" + date.getFullYear();
if ($.inArray(dmy, unavailableDates) == -1) {
    return [true, ""];
} else {
    return [false, "", "Unavailable"];
}
}

$(function() {
$("#iDate").datepicker({
    dateFormat: 'dd MM yy',
    beforeShowDay: unavailable
});

});
</script> 
```

[http://jsfiddle.net/JjPrU/178/](http://jsfiddle.net/JjPrU/178/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:27:13.763

```
.ui-datepicker td.ui-state-disabled>span{background:#c30;}
.ui-datepicker td.ui-state-disabled{opacity:100;} 
```

[http://jsfiddle.net/habo/JjPrU/179/](http://jsfiddle.net/habo/JjPrU/179/)

# html - 如何将div内的段落放在一行中？

> ID：16094348
> 
> 赞同：2
> 
> 时间：2013-04-18T22:49:45.883
> 
> 标签：html, css

我正在尝试将段落文本放入`div`其中并以单行显示。如果文本长于指定宽度，则不应转到第二行（div 之外）。我尝试了 CSS 中的所有内容，使用过`text-overflow`但`white-space`没有任何成功。这是我的html的一部分：

```
 <li>
    <a href="#" id="searchLink">

        <div id="searchDiv">
            <img id="searchImg" src="" />
            <p id="searchedProductName">
            </p>
        </div>
    </a>
</li> 
```

如果我使用 jQuery 文本在 paragraf 中放置一些较长的文本，则使用 2 行，（超出 div）我的 CSS：

```
 #searchDiv {
    z-index: 1000;
    width: 600px;
    height: 50px;
    background-color: white;

}
   #searchImg {
    width: 50px;
    height: 50px;
}

#searchedProductName {
     text-overflow: ellipsis; /* will make [...] at the end */
width: 370px; /* change to your preferences */
white-space: nowrap; /* paragraph to one line */
overflow:hidden; /* older browsers */
} 
```

我用新更新的 CSS 解决了显示行的问题，但 paragragh 仍然超出`div`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:08:13.453

放

```
overflow: hidden; 
```

在 SearchDiv 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:13:09.530

添加`float:left`到您的图像和`display:inline-block`容器 div。

```
#searchDiv {
  z-index: 1000;
  width: 600px;
  height: 50px;
  display:inline-block;
}
#searchImg {
  width: 50px;
  height: 50px;
  float:left;
} 
```

[JS 小提琴演示](http://jsfiddle.net/fMvLp/1/)

# windows - [：Cygwin Shell 脚本上的参数太多

> ID：16094356
> 
> 赞同：1
> 
> 时间：2013-04-18T22:50:04.163
> 
> 标签：windows, bash, shell, ssh, cygwin

我继承了一些为进行自动化性能测试而编写的 shell 脚本，而没有任何 shell 脚本知识。我浏览了一些指南并使用了该语言，直到我可以完成我的项目。它大部分进展顺利，但我被困在我绝对无法在其他任何地方找到答案的事情上。

部分旧代码 ssh 进入测试中使用的服务器，并以脚本作为参数。我需要这个脚本在 Windows 和 Linux 上做不同的事情。到目前为止，我最好的解决方案是在 uname -a 的输出中对 Cygwin 进行 grep，如果找到，则执行 Windows 代码。

不幸的是，脚本在通过 ssh 传递时以及在 Windows 系统上通过 Cygwin 执行时都会失败。

```
#!/bin/bash
if [ `uname -a | grep "Cygwin"` ]; then
    echo "ARRGG WINDOWS!"
else
    echo "Some Linux command."
fi 
```

产量：

./test.sh：第 2 行：[：参数太多

然后分支到非 Windows 逻辑。在我尝试过的任何 Linux 发行版上，同样的事情似乎运行良好。

我剩下三个问题。为什么我会遇到这个异常，除了谷歌搜索之外，还有什么好方法可以让我回答像这样的超特定问题（shell 脚本、Cygwin、ssh 和一个错误之间的交叉点），还有更好、更规范的方法吗？测试平台？

感谢您抽出宝贵时间，我很乐意提供任何有帮助的其他信息。

麻烦的条款被逐字复制，其余的都是为了SO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:00:57.687

Cygwin 上的输出`uname -a`将是许多单词，包括`Cygwin`. 每个单词都将是`test`(aka `[`) 的一个参数。因此投诉。你可能想要：

```
case "$(uname -a)" in
(*Cygwin*) echo "Oh bother!";;
(*)        echo "Phew!";;
esac 
```

或者：

```
if [ -n "$(uname -a | grep Cygwin)" ]
then echo "Oh bother!"
else echo "Phew!"
fi 
```

或者：

```
if [ $(uname) = Cygwin ]
then echo "Oh bother!"
else echo "Phew!"
fi 
```

这获得了 Cygwin 或 Linux——或者 Mac OS X 上的 Darwin，以及 AIX、Solaris、HP-UX 上的等效名称——并且避免了多参数问题，并且只运行一个命令而不是两个命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:59:34.097

我试过你的命令，它在 bash 4.2.37 上执行没有错误。

它也可以在没有方括号或反引号的情况下工作 -`if`测试下一个命令的返回码......您可以使用该`test`命令，它也可以拼写`[`，但它也可以与返回码`grep`或什至`:`which总是正确的。

```
#!/bin/bash
if uname -a | grep Cygwin > /dev/null; then
     echo "ARRGG WINDOWS!"
else
     echo "Some Linux command."
fi 
```

请注意， Linux 下`$OSTYPE`还有一个 bash 环境变量。`linux-gnu`

这里有一个深入的讨论：[Detect the OS from a Bash script](https://stackoverflow.com/questions/394230/detect-the-os-from-a-bash-script)

# php - 正则表达式全局从字符串中提取子字符串

> ID：16094360
> 
> 赞同：1
> 
> 时间：2013-04-18T22:50:18.870
> 
> 标签：php, regex

我正在尝试从标准 Oracle 连接字符串中提取 FQDN 和端口号。我已经想出了如何单独提取 FQDN 和 PORT，但我正在寻找一个 php 正则表达式，它可以让我同时提取所有 FQDN 和 PORT。

示例连接字符串：

```
(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN1)(PORT=1234))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN2)(PORT=5678))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN3)(PORT=9012))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN4)(PORT=3456)))(CONNECT_DATA=(SERVICE_NAME=STUFF))) 
```

我的预期结果将是一个数组：

```
[0][0] => FQDN1, [0][1] => 1234, 
[1][0] => FQDN2, [1][1] => 5678, 
[2][0] => FQDN3, [2][1] => 9012, 
[3][0] => FQDN4, [3][1] => 3456 
```

你们的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:00:12.927

您可以像这样使用 preg_match_all ：

```
if (preg_match_all('~HOST=([^)\s]+).*?PORT=([^)\s]+)~', $str, $arr))
   print_r($arr); 
```

### 现场演示：http: [//ideone.com/btmeao](http://ideone.com/btmeao)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:03:09.543

```
$str="(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN1)(PORT=1234))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN2)(PORT=5678))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN3)(PORT=9012))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN4)(PORT=3456)))(CONNECT_DATA=(SERVICE_NAME=STUFF)))";
preg_match_all('/\(HOST=(FQDN\d)\)\(PORT=(\d+)\)/', $str, $matches, PREG_SET_ORDER);
foreach($matches as $k=>$match)
    array_shift($matches[$k]); 
```

使用 PREG_SET_ORDER 以您想要的方式排列它们。然后 array_shift 敲掉完整的匹配。

[http://ideone.com/yN07yP](http://ideone.com/yN07yP)

只要有可能，您应该阅读文档：

[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:32:06.447

尝试这个：

```
$subject = <<<LOD
(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN1)(PORT=1234))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN2)(PORT=5678))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN3)(PORT=9012))(ADDRESS=(PROTOCOL=TCP)(HOST=FQDN4)(PORT=3456)))(CONNECT_DATA=(SERVICE_NAME=STUFF)))
LOD;

$pattern = '~\(HOST=([^)]+)\)\(PORT=(\d+)\)~';

preg_match_all($pattern, $subject, $matches, PREG_SET_ORDER);

// removes the whole match (index 0) for each result to only let the capture groups
foreach ($matches as &$match) {
    array_shift($match);
} 
```

# mysql - SQL - 查询按组选择的控制记录

> ID：16094362
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:50:21.707
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

我想在表上使用“group by”执行查询，但想对将为每个组选择的记录应用 3 条规则。这可能吗？使用 Mysql SGBD。

```
idMatch  Country  VideoType VideoId
1        Pt       High      vidZbr  
1        Pt       High      vidXpto
1        Pt       low       vioptr
1        Pt       normal    vidfff
2        Pt       low       vidfgg
2        Pt       normal    vid
3        Pt       low       videop 
```

**例子：**

```
SELECT * FROM videos_extended where country = 'Pt' group by idMatch; 
```

**分组规则的所需结果：（**如果存在则添加视频类型“高”，如果存在则添加视频类型“正常”，如果此“idMatch”组所有其他方法均失败，则添加“低”）

```
idMatch  Country  VideoType VideoId
1        Pt       High      vidZbr
2        Pt       normal    vid
3        Pt       low       videop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:37:34.663

这将为该行选择两行：“1”、“Pt”、“High”。如果您指定如何选择 VideoId，则可以改进它：

```
select *
from videos_extended video inner join
(
    select idMatch, Country, 
       min(case VideoType 
           when 'high' then 1 
           when 'normal' then 2
           when 'low' then 3
           else 4 
         end
       ) rank
    from videos_extended
    group by idMatch, Country
) maxType
on maxType.idMatch = video.idMatch 
   and maxType.Country = video.Country
   and maxType.rank = (
      case video.VideoType 
         when 'high' then 1 
         when 'normal' then 2
         when 'low' then 3
         else 4 
      end
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:24:49.160

如果 VideoType 是整数会更好，否则您可以使用 CASE 或此查询：

```
SELECT idMatch, Country, VideoType, MAX(VideoId) AS MVidId FROM videos_extended INNER JOIN (SELECT idMatch AS idm, MIN(SUBSTRING(VideoType, 3, 1)) AS vv FROM videos_extended GROUP BY idMatch, Country) AS T ON idMatch = idm AND SUBSTRING(VideoType, 3, 1) = vv GROUP BY idMatch, Country, VideoType 
```

# php - 选择父节点的所有子节点，其中属性 = xml 文件中的值

> ID：16094372
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:50:49.050
> 
> 标签：php, xml

我需要以下 xml 搜索的帮助。我无法弄清楚如何从按属性搜索的 xml 文件中搜索所有子节点。详情如下。

## 这是我的 XML 文件

```
<?xml version="1.0"?>
<systemConfigs>
    <systemConfig cnfId="1">
        <moduleName>Module 1</moduleName>
        <channeles ch="1">
            <channelName>Channel 1 of Module 1</channelName>
            <channelType>myFunc 1</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 1</eu>
            <custScale>myFunc 1</custScale>
            <rawMin>myFunc 1</rawMin>
            <rawMax>myFunc 1</rawMax>
        </channeles>
        <channeles ch="2">
            <channelName>Channel 2 of Module 1</channelName>
            <channelType>myFunc 2</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 2</eu>
            <custScale>myFunc 2</custScale>
            <rawMin>myFunc 2</rawMin>
            <rawMax>myFunc 2</rawMax>
        </channeles>
    </systemConfig>
    <systemConfig cnfId="2">
        <moduleName>Module 2</moduleName>
    <channeles ch="3">
        <channelName>Channel 1 of Module 2</channelName>
            <channelType>myFunc 1</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 1</eu>
            <custScale>myFunc 1</custScale>
            <rawMin>myFunc 1</rawMin>
            <rawMax>myFunc 1</rawMax>
        </channeles>
        <channeles ch="4">
            <channelName>Channel 2 of Module 2</channelName>
            <channelType>myFunc 2</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 2</eu>
            <custScale>myFunc 2</custScale>
            <rawMin>myFunc 2</rawMin>
            <rawMax>myFunc 2</rawMax>
    </channeles>
    </systemConfig>
    <systemConfig cnfId="3">
        <moduleName>NI DAQmx Task</moduleName>
        <channeles ch="5">
            <channelName>my Voltage</channelName>
            <channelFunc>conFig</channelFunc>
            <channelType>thermo</channelType>
            <eu>EF</eu>
            <custScale>custPol</custScale>
            <rawMin>1</rawMin>
            <rawMax>10</rawMax>
            </channeles>
    </systemConfig>
</systemConfigs> 
```

示例：我需要通过属性 ch=4 从上述 xml 中搜索所有数据我该怎么做？

```
<channeles ch="4">
    <channelName>Channel 2 of Module 2</channelName>
    <channelType>myFunc 2</channelType>
    <channelFunc>conFig</channelFunc>
    <eu>myFunc 2</eu>
    <custScale>myFunc 2</custScale>
    <rawMin>myFunc 2</rawMin>
    <rawMax>myFunc 2</rawMax>
</channeles> 
```

我真的被困在这里，请任何人帮我举个例子。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T23:13:00.833

你去：

```
$xml = '<?xml version="1.0"?>
<systemConfigs>
    <systemConfig cnfId="1">
        <moduleName>Module 1</moduleName>
            <channeles ch="1">
                <channelName>Channel 1 of Module 1</channelName>
                <channelType>myFunc 1</channelType>
                <channelFunc>conFig</channelFunc>
                <eu>myFunc 1</eu>
                <custScale>myFunc 1</custScale>
                <rawMin>myFunc 1</rawMin>
                <rawMax>myFunc 1</rawMax>
            </channeles>
            <channeles ch="2">
                <channelName>Channel 2 of Module 1</channelName>
                <channelType>myFunc 2</channelType>
                <channelFunc>conFig</channelFunc>
                <eu>myFunc 2</eu>
                <custScale>myFunc 2</custScale>
                <rawMin>myFunc 2</rawMin>
                <rawMax>myFunc 2</rawMax>
            </channeles>
        </systemConfig>
    <systemConfig cnfId="2">
        <moduleName>Module 2</moduleName>
    <channeles ch="3">
        <channelName>Channel 1 of Module 2</channelName>
            <channelType>myFunc 1</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 1</eu>
            <custScale>myFunc 1</custScale>
            <rawMin>myFunc 1</rawMin>
            <rawMax>myFunc 1</rawMax>
        </channeles>
        <channeles ch="4">
            <channelName>Channel 2 of Module 2</channelName>
            <channelType>myFunc 2</channelType>
            <channelFunc>conFig</channelFunc>
            <eu>myFunc 2</eu>
            <custScale>myFunc 2</custScale>
            <rawMin>myFunc 2</rawMin>
            <rawMax>myFunc 2</rawMax>
    </channeles>
    </systemConfig>
    <systemConfig cnfId="3">
        <moduleName>NI DAQmx Task</moduleName>
        <channeles ch="5">
            <channelName>my Voltage</channelName>
            <channelFunc>conFig</channelFunc>
            <channelType>thermo</channelType>
            <eu>EF</eu>
            <custScale>custPol</custScale>
            <rawMin>1</rawMin>
            <rawMax>10</rawMax>
            </channeles>
    </systemConfig>
</systemConfigs>';

$doc = new DOMDocument();

 $doc->loadXML($xml);

$selector = new DOMXPath($doc);
$list = $selector->query('//channeles[@ch="4"]');
$node = $list->item(0);

echo($doc->saveXML($node)); 
```

# spring - 使用 H2 DB 进行 Spring/Hibernate 集成测试

> ID：16094375
> 
> 赞同：0
> 
> 时间：2013-04-18T22:51:03.650
> 
> 标签：spring, hibernate, integration-testing, h2

我正在构建一个 Spring/Hibernate/Postgres api，它工作正常。我想在内存中使用 H2 DB 编写集成测试。我知道如何创建 test-applicationContext。但是我在创建表格时遇到了一些问题。

```
<bean id="dataSource"
class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="org.h2.Driver" />
<property name="url" value="jdbc:h2:mem:processdb;INIT=RUNSCRIPT FROM 'classpath:create.sql'" 
        />
</bean> 
```

现在 create.sql 有一个 sql 查询来创建所需的模式和表。但是 Hiberate 应该处理它，我认为我不必使用查询来创建表，hibernate 应该从模型注释中处理它？我在我的 persistence.xml 中定义了所有内容，但最后它说找不到表“用户”。任何人都可以建议我如何在集成测试中创建表或指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:25:25.783

您缺少 jdbc 连接字符串上的 close_delay 标志。没有这个 H2 每次释放最后一个连接时都会关闭数据库。因此，架构丢失是您在创建后直接出现的情况。

```
jdbc:h2:mem:processdb;DB_CLOSE_DELAY=-1 
```

# c++ - 返回对临时常量差异的引用

> ID：16094377
> 
> 赞同：1
> 
> 时间：2013-04-18T22:51:14.773
> 
> 标签：c++, reference, constants, temporary

当以下代码由 g++ 或 clang++ 编译时，我收到警告“返回对临时对象的引用”（g++）和“返回对本地临时对象的引用”（clang++）。

有人能告诉我为什么会`getData_warning`出现这些警告，而`getData_nowarning`没有吗？

```
struct Geom {
    int * data;
};

// Not ideal because one can change the pointed to value
int * const & getData_nowarning (Geom const & geom) {
    return geom.data;
}

// Ideal because one cannot change the pointed to value.
int const * const & getData_warning (Geom const & geom) {
    return geom.data;    //   <-------------------  WARNING HERE
}

void test () {
    Geom const geom = { new int(0) };

    int * data1 = getData_nowarning(geom);

    int const * data2 = getData_warning(geom);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:57:49.807

因为 的类型`geom.data`是`int*`，所以不能通过对 的引用来引用它`int const*`。为了引用一个`int const*`，首先你需要一个`int const*`。所以必须有一个转换，所以必须创建一个新类型的新指针，所以它必须是一个临时的。

您是否需要函数的调用者能够更改 geom 对象中的指针指向的内容？似乎不是，因为您正在使指针本身为 const。因此，只需删除引用，您就可以保留 const。

# rally - 在 Rally 中为用户故事创建编辑弹出链接

> ID：16094378
> 
> 赞同：1
> 
> 时间：2013-04-18T22:51:15.993
> 
> 标签：rally

我之前使用 JavaScript API 为 Rally 中的 TestCases 和其他项目创建了编辑链接，使用：

```
var editTestCase = function(objectID) {
            rally.sdk.util.Navigation.popupEditPage("/testcase/" + objectID);
}; 
```

但是，当我尝试为用户故事做类似的事情时，我无法正确创建链接。我认为这是因为我不知道要使用的项目名称（即替换测试用例的字符串。我尝试了 userStory 和 userstory 以及 oid，但这些都不起作用。

我正在尝试使用代码调用此函数：

```
<a href="#" onclick="editUserStory(' + objectID + ');"><img src="https://rally1.rallydev.com/slm/images/icon_edit.gif"></a> 
```

我已检查并且我的 objectID 值已初始化，并且是用户故事的有效且正确的对象 ID。

当我尝试以这种方式创建链接时，URL 的主干显示

```
https://rally1.rallydev.com/slm/null/edit.sp? 
```

而当我从其他地方点击编辑链接时（为了清楚起见，我删除了查询字符串）：

```
https://rally1.rallydev.com/slm/ar/edit.sp? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:30:37.563

在 Web 服务对象模型中，用户故事是分层需求。因此：

`rally.sdk.util.Navigation.popupEditPage("/hierarchicalrequirement/" + objectID);`

应该为您解决问题。

# ajax - JQuery：等待任何事件完成

> ID：16094380
> 
> 赞同：0
> 
> 时间：2013-04-18T22:51:22.077
> 
> 标签：ajax, jquery

我有以下代码和元素，

```
 function refreshcontent(){
              //refresh content ajax query
   }

 $("#contentpage").on("submit","#fileuploadform",function(event){

        refreshcontent();

  }); 

  <form id="fileuploadform" action="fileupload" METHOD="POST" enctype=multipart/form-data target="_blank" >
  <input type="file" name="myfile"/>
  <input type="submit" value="upload"/>
  </form>
  <div id="contentpage"> </div> 
```

我希望在我的表单完全提交后刷新我的内容页面。我知道 setInterval 函数，我可以在一段时间后使用它来调用 ajax 刷新，但问题是我的文件大小不是恒定的，它可能会有所不同，提交表单所需的时间可能会有所不同..我也没有使用 ajax 提交表单（如果是这样，我可以使用成功处理程序完成）

有什么解决方案可以解决这个问题，我们可以等到我的表单提交吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T22:58:55.590

你曾经尝试过 Promise 吗？

[http://api.jquery.com/promise/](http://api.jquery.com/promise/)

# javascript - AngularJS：如何在链接函数中将元素移出范围

> ID：16094383
> 
> 赞同：1
> 
> 时间：2013-04-18T22:51:38.407
> 
> 标签：javascript, angularjs, angularjs-directive

我有一个指令从控制器中获取一个名为 stuff 的属性的 JSON 数组。那部分工作正常。我现在要做的是创建一个链接函数，该函数将使用该数组的长度并允许我重复 TR 和 TD 元素来制作一个格式良好的表格。我在 Stack 上找到了一个很好的例子，但我遇到的问题是我无法从链接函数中的 stuff 属性中获取任何内容。我只是不确定。

控制器：

```
function itemControl($http, $scope) {
  $http.get('doc/products.json').success(function (prodata) {
    $scope.data = prodata;
  });
} 
```

指示

```
app.directive("showcase", function () {
  return {
    restrict: "A",
    template: '<table>' + 
               '<colgroup span="2"></colgroup>' + 
                '<tr ng-repeat="items in stuff">' + 
                '<td>' + 
                 '<a  ng-href="{{items.SRC}}" Title="{{items.name}}" colorbox>' + 
                 '<img ng-src="{{items.SRC}}"></a>' + 
                '</td></tr></table>',
    scope: {
      stuff: "="
    },
    link: function (scope) {
      alert(scope.stuff);
    }

  };
}); 
```

HTML

```
<div ng-controller="itemControl">
  <div showcase stuff="data"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:51:35.363

因为数据是从外部 JSON 文件加载的，所以在创建“展示”实例时它不可用。为了赶上这个时间，你可以使用 scope.$watch

[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)

看看这个：

[http://www.plnkr.co/edit/YdYVEWbmcUZZhUBs01pI](http://www.plnkr.co/edit/YdYVEWbmcUZZhUBs01pI)

# openssl - EVP_CIPHER* 来命名

> ID：16094389
> 
> 赞同：3
> 
> 时间：2013-04-18T22:52:19.403
> 
> 标签：openssl, libcrypto, evp-cipher

我有一个`EVP_CIPHER*`by using `EVP_get_cipherbyname("AES-256-CTR")`，现在我想找到一种方法从`EVP_CIPHER*`后面恢复到原始名称，在本例中为“AES-256-CTR”。

在 libcrypto 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:34:37.090

请在[此处](https://github.com/openssl/openssl/blob/master/include/openssl/evp.h)查看 EVP_CIPHER_name 。看看它是否可以解决您的目的。

# ms-access - MS Access - 基本关系错误

> ID：16094390
> 
> 赞同：0
> 
> 时间：2013-04-18T22:52:20.590
> 
> 标签：ms-access, relationships

我正在尝试创建一个理论汽车租赁公司的简单数据库。下图显示了我目前拥有的关系。

![在此处输入图像描述](https://i.stack.imgur.com/wNOfM.jpg)

但是，当我尝试将不止一辆车分配给一个客户时，我收到以下错误消息：

![在此处输入图像描述](https://i.stack.imgur.com/5p2Ur.jpg)

如果有人可以告诉我为什么会出现这种情况以及要改变什么，我会非常感激，如果需要更多信息来解决这个问题，请询问！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:02:48.210

`CustomerID`是一个主键，并且在你的第二行被复制。主键必须是唯一的。

您已经在客户和预订之间建立了一对一的关系。这意味着每个客户可能只有一个预订，每个预订可能只有一个客户。这就是为什么您必须复制它`CustomerID`才能添加另一辆车的预订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:00:58.390

你的ER图错了。假设您想要零，一个客户 --> 许多汽车，那么正确的模式是将 0,1 的外键插入到 Many 的表中。

所以你的 Cars 表应该有一个 CustomerId 的外键。

正常情况下，客户表根本不应该了解 Cars。

编辑：查看需求/模型，这可能是多对多的。即随着时间的推移，许多客户租了一辆车或多辆汽车。在这种情况下，为了保持正常，您需要一个联结表 - 例如，汽车-客户有两个主键 CustomerId 和 CarId。这也是您放置有关该关系的信息的地方，例如租用日期等。

# c++ - 使用地图类型会产生 gcc 错误：“for”之前的预期 unqualified-id

> ID：16094392
> 
> 赞同：0
> 
> 时间：2013-04-18T22:52:25.233
> 
> 标签：c++, gcc, map, bitset

我是 linux 新手，在 Ubuntu 虚拟盒环境中使用终端。我无法弄清楚这些错误发生的原因和原因，而且它们似乎与缺少的 ';' 不匹配 或#define 冲突。

以下是我从 gcc 编译器得到的错误：

```
my_predictor.h:82:42: error: template argument 2 is invalid
my_predictor.h:82:42: error: template argument 4 is invalid
my_predictor.h:84:9: error: expected unqualified-id before ‘for’
my_predictor.h:84:23: error: ‘g’ does not name a type
my_predictor.h:84:44: error: ‘g’ does not name a type
my_predictor.h:91:42: error: template argument 2 is invalid
my_predictor.h:91:42: error: template argument 4 is invalid
my_predictor.h:93:9: error: expected unqualified-id before ‘for’
my_predictor.h:93:23: error: ‘f’ does not name a type
my_predictor.h:93:39: error: ‘f’ does not name a type
my_predictor.h: In member function ‘virtual branch_update* local_predictor::predict(branch_info&)’:
my_predictor.h:107:57: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:111:40: error: invalid types ‘int[int]’ for array subscript
my_predictor.h: In member function ‘virtual void local_predictor::update(branch_update*, bool, unsigned int)’:
my_predictor.h:121:62: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:124:46: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:125:33: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:127:41: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:128:29: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:131:33: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:132:30: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:135:33: error: invalid types ‘int[int]’ for array subscript
my_predictor.h:136:30: error: invalid types ‘int[int]’ for array subscript 
```

我认为关键问题在于 Map 构造的声明和初始化，其中包含一个索引键，然后是一个 bitset 对象，它是一串位。似乎使用数组 [] 操作创建了后来的错误（从我在 cplusplus.com/reference/map 站点上找到的内容应该是有效的）。

这是我的代码：

```
1:// my_predictor.h
// This file contains a sample gshare_predictor class.
// It is a simple 32,768-entry gshare with a history length of 15.

5:#include <bitset>
#include <map>
7:using namespace std;

64:class local_predictor : public branch_predictor {
65:public:
#define LHBITLEN 10
#define PREDCNTR 2
#define LOCHISTTABLERNG 4096
#define LOCPREDRNG 1024
70:     local_update u;
        branch_info bcopy;

        // otherwise ints, where each will be multiplied by 10, then add 1 if taken/true. Initial test case to change if 10 bits long already

75:     // ?correct location? Bit array of length 10 for local history table value entries
        bitset<LHBITLEN> lhthistval; 
        bitset<PREDCNTR> lpcounter;

        // initialize to 0's 
80:       // lhthistval.reset();

        std::map<int, (bitset<LHBITLEN>) > lochisttab;
        //map<int, (bitset<10>) > lht;
        for (int g=0; g < LOCHISTTABLERNG; g++) {
85:            //const int j = g;
            lochisttab[g] = lhthistval.reset();
            //lht.insert(pair<int, (bitset<LHBITLEN>)>(j, lhthistval.reset()));
        }

90:
    std::map<int, (bitset<PREDCNTR>) > locprediction;
    //map<int, (bitset<2>) > locpredict;
    for (int f=0; f < LOCPREDRNG; f++) {
        //const int j = f;
95:        //locpredict.insert(pair<int, (bitset<PREDCNTR>)>(j,lpcounter.reset()));
        locprediction[f] = lpcounter.reset();
    }

100:    local_predictor (void) {
    }

    branch_update *predict (branch_info & b) {
        bcopy = b;
105:        // address for locpredict based on value by modulus (remainder) of branch address divide by 4096
        int braddr = static_cast<int>(b.address % LOCHISTTABLERNG);
        bitset<LHBITLEN> address = lochisttab[braddr];
        // safe and compiler allow since it is only 10 bits long max?
        int indx = static_cast<int>(address.to_ulong());
110:        // use the MSB or Pos 1 in 2 bit array to set boolean Take/Don't
        bool take = locprediction[indx].test(1);
        u.direction_prediction (take);
        u.target_prediction (0);
        return &u;
115:    }

    void update (branch_update *u, bool taken, unsigned int target) {

        if (bcopy.br_flags & BR_CONDITIONAL) {
120:            int lhtaddress = bcopy.address % LOCHISTTABLERNG;
            bitset<LHBITLEN> addr = lochisttab[lhtaddress];
            int indx = static_cast<int>(addr.to_ulong());
            for (int i=1; i < LHBITLEN; i++) {
                bool prval = lochisttab[lhtaddress].test(i-1);
125:                lochisttab[lhtaddress].set(i,prval);
            }
            bool prev = locprediction[indx].test(0);
            locprediction[indx].set(1,prev);

130:            if (taken) {
                lochisttab[lhtaddress].set(0);
                locprediction[indx].set(0);
            }
            else {
135:                lochisttab[lhtaddress].reset(0);
                locprediction[indx].reset(0);
            }
        }
    }

}; 
```

编辑：我最初对 map 声明的 bitset 参数没有任何附加条件。编译器给出了第一个错误“'for'之前的预期不合格ID”。模板参数错误来自括号（但我认为这是结果，因为最终可能理解了 bitset 数据类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:01:12.410

我猜周围的虚假括号`(bitset<LHBITLEN>)`82 行的虚假括号是问题所在——它们可能会导致编译器尝试将其解析为模板值参数而不是类型参数，然后在尝试恢复时感到困惑。

像这样的一连串错误通常是这种情况，只有第一个是相关的，并告诉您问题所在。后面的那些是由于编译器在尝试恢复有意义的上下文以继续进行时丢弃了太多的标记，对它正在查看的内容感到困惑。它可能扔掉了`>`and`;`并认为当它看到时它仍在尝试解析模板参数列表`for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:11:35.207

这是您需要的语法：

```
`map<int, bitset<10> > intBitsetMap;  //Note the space between the two: > >` 
```

# android - 对象类型的 onCreate(bundle) 方法未定义

> ID：16094394
> 
> 赞同：0
> 
> 时间：2013-04-18T22:52:33.767
> 
> 标签：android, super

嗨，我是 android dev 的新手，以下代码给出错误 1) 对象类型的 onCreate(bundle) 方法未定义 2) DisplayMessageActivity 类型的方法 onCreate(bundle) 必须被覆盖或实现我正在使用的超类型方法 super .onCreate 但它给了我这个错误？

```
 public class DisplayMessageActivity {

        @SuppressLint("NewApi")
        @Override
        protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);

                // Get the message from the intent
                Intent intent = getIntent();
                String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

                        // Create the text view
                TextView textView = new TextView(null);
                textView.setTextSize(40);
                textView.setText(message);

                // Set the text view as the activity layout
                setContentView(textView);

            // Make sure we're running on Honeycomb or higher to use ActionBar APIs
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                // Show the Up button in the action bar.
                ((Object) getActionBar()).setDisplayHomeAsUpEnabled(true);
            }
    }
        private void setContentView(TextView textView) {
            // TODO Auto-generated method stub

        }
        private Intent getIntent() {
            // TODO Auto-generated method stub
            return null;
        }
        private Object getActionBar() {
            // TODO Auto-generated method stub
            return null;
        }
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
            }
            return super.onOptionsItemSelected(item);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:53:32.290

您忘记扩展 Activity 类。

```
public class DisplayMessageActivity extends Activity 
```

如果要创建 Activity，则必须将 Activity 扩展为超类。要了解有关活动基础的更多信息，请参阅此处的[文档](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:19:07.623

@StinePike 的答案解决了您的直接问题。但是您还需要阅读有关[Intent](http://developer.android.com/reference/android/content/Intent.html)的信息。这些基本上只是一种发送消息的方式。这是一个隐含的动作，它不会启动某事，而是告诉某事该做什么以及如何处理某些数据。我这样说是因为我相信你被误导了，因为你有一个名为`getIntent()`. 这不需要是你的类中的一个函数，但如果它`Activity`以`Intent`.

假设您开始点`Activity`赞：

```
Intent intent = new Intent(MyActivity.this, NextActivity.class);  // MyActivity is the Activity you are currently in and NextActivity is the Activity you are starting
intent.putExtra("people", "Fred");  // This isn't necessary but a way to pass data. I put "Fred" but this could be a String variable or something else
startActivity(intent); 
```

`NextActivity`你可能会这样做：

```
@Override
public void onCreate(Bundle bundle)
{
    Intent recIntent = getIntent();  // this gets the intent information sent from MyActivity
    String data = recIntent.getStringExtra("people");  // data now equals  the String Fred
} 
```

您无需创建名为 的函数`getIntent()`，它是本机函数。因此，当您使用时`getIntent()`，最好检查一下是否`null`不是`Activity`以`Intent`. 也许是发射器`Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T09:57:51.130

**改变：** `protected void onCreate(Bundle savedInstanceState)`

**至：** `public void onCreate(Bundle savedInstanceState)`

我正在研究相同的教程。我直接从教程中复制了代码并运行了应用程序（有效）。所以开始检查差异，这是我发现的唯一一个。

希望能帮助到你！

编码快乐！！

# xcode - 如何 CFRelease 必须返回的 CGEventRef？

> ID：16094398
> 
> 赞同：3
> 
> 时间：2013-04-18T22:53:12.223
> 
> 标签：xcode, macos, automatic-ref-counting, macos-carbon, core-foundation

我`CGEventRef`以两种方式拦截 s：

*   返回值`NULL`杀死事件
*   为事件分配新的`CGEventRef`通过`CGEventCreateKeyboardEvent()`

Xcode 的分析器告诉我在创建新事件时可能存在泄漏。但我需要返回那个新事件，所以我不能`CFRelease`在那里。

*   这个 Xcode 错误有效吗？

*   我应该在哪里正确`CFRelease`设置我创建的新 CGEventRef？

*   在 null 和 new 事件的情况下，我不知道是否需要释放事件的以前的值。

*   将“新”附加到方法名称是解决此问题的正确方法吗？对于我创建新事件的情况，我认为可能是这样。但是其他情况呢？

.

```
- (CGEventRef)modifySomeKeyboardEvents:(CGEventRef)event {

    CGKeyCode keycode = (CGKeyCode)CGEventGetIntegerValueField(event, kCGKeyboardEventKeycode);
    NSLog(@"keycode: %d", keycode);

    switch (keycode) {
        case 0:
            NSLog(@"pressed 'a'");
            //Kill the event
            event = NULL;

            //Is a `CFRelease` of some kind needed here, to release the previous value?

            break;

        case 38:
            NSLog(@"pressed 'h'");

            //Send different character:
            CGEventSourceRef eventSource = CGEventSourceCreate(kCGEventSourceStateHIDSystemState);
            CGEventRef newKeyEvent = CGEventCreateKeyboardEvent(eventSource, 1, true);
            CGEventSetIntegerValueField(newKeyEvent, kCGKeyboardEventKeycode, 51); // keycode '51' = backspace
            CFRelease(eventSource);

            event = newKeyEvent;

            //Can't CFRelease here, but somewhere?
            //CFRelease(newKeyEvent);

            break;

        default:
            break;
    }

    //Xcode error: "Potential leak of an object stored in newKeyEvent"
    return event;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:35:04.750

[`CGEventTapCallback`文件](https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH1g-BBCHIIJJ)说[_](https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH1g-BBCHIIJJ)

> 新事件传回事件系统后，新事件将与原事件一起发布。

因此，您*不*负责发布新事件或旧事件。

分析仪不知道这一点，所以你需要告诉它。您可以通过在方法名称`new`的**开头**放置分析器来使分析器静音，但使用 可能会更清楚`copy`，这也会使警告静音：

```
- (CGEventRef)copyOrModifyKeyboardEvent:(CGEventRef)event { 
```

（我想`newOrModifiedKeyboardEvent:`也可以。）

我相信分析器也应该标记这一点，因为当您仅返回输入事件时，它现在无法返回 +1 引用计数。但在我的测试中，它没有。Xcode 4.6.2 分析器没有给我这个方法的警告：

```
- (CGEventRef)copyOrModifyEvent:(CGEventRef)event {
    CGEventRef newEvent;
    if (CGEventGetIntegerValueField(event, kCGKeyboardEventKeycode) == 38) {
        newEvent = CGEventCreate(NULL);
    } else {
        newEvent = event;
    }
    return newEvent;
} 
```

# java - 如何将 Raster 转换为 RenderedImage

> ID：16094401
> 
> 赞同：1
> 
> 时间：2013-04-18T22:53:20.617
> 
> 标签：java, image, raster

我制作了屏幕快照并尝试获取图像的一部分，当我尝试将其保存到文件时它不起作用。很乐意得到任何建议

```
Rectangle Rect = new Rectangle(10, 10, 50, 50);
File file = new File("D:\\output.png");
RenderedImage renderedImage = SwingFXUtils.fromFXImage(browser.snapshot(null, null), null);
try {
    ImageIO.write((RenderedImage) renderedImage.getData(Rect),"png",file);
                 } catch (IOException ex { Logger.getLogger(JavaFXApplication3.class.getName()).log(Level.SEVERE, null, ex);
                 } 
```

所以在这里我终于得到了它并且它有效

```
 File file = new File("D:\\output.png");
                 BufferedImage image = SwingFXUtils.fromFXImage(browser.snapshot(null,   null), null);
                 try {
                     ImageIO.write(image.getSubimage(100, 100, 50, 50) , "png", file);
                 } catch (IOException ex) {
                     Logger.getLogger(JavaFXApplication3.class.getName()).log(Level.SEVERE, null, ex);
                 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:25:34.073

我的猜测是，您无法`Raster`将从方法中检索到的内容`.getData()`转换为图像。虽然在技术上应该可以获取光栅，将其转换为 a`WritableRaster`并将其包装在 a 中`RenderedImage`，但我建议您基本上复制图像的一部分。快速[SSCE](http://sscce.org/)：

```
import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.*;
import java.io.File;

public class Test {

    public static void main(String[] args) throws Exception {
        BufferedImage original = new BufferedImage(100, 100, BufferedImage.TYPE_3BYTE_BGR);
        // Crop away 10 pixels pixels and only copy 40 * 40 (the width and height of the copy-image)
        BufferedImage copy     = original.getSubimage(10, 10, 50, 50);

        ImageIO.write(copy, "png", new File("Test.png"));
    }

} 
```

这对我有用，所以如果您遇到更多麻烦，您可能会考虑确保正确获取输入。如果您的问题是程序“卡住”了，请先使用虚拟图像尝试上述代码。

希望有帮助:-)

编辑：我不知道有一个名为 getSubimage 的方法，所以我用该方法替换了上面的代码。感谢安德鲁·汤普森。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:55:19.910

一旦应用程序。有一个参考`BufferedImage`，只需使用该`subImage(Rectangle)`方法创建较小的图像。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.*;

class ScreenSubImage {

    public static void main(String[] args) throws Exception {
        Robot robot = new Robot();
        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
        BufferedImage image = robot.createScreenCapture(new Rectangle(d));
        BufferedImage sub = image.getSubimage(0, 0, 400, 400);
        File f = new File("SubImage.png");
        ImageIO.write(sub, "png", f);
        final ImageIcon im = new ImageIcon(f.toURI().toURL());

        Runnable r = new Runnable() {

            @Override
            public void run() {
                JOptionPane.showMessageDialog(null, new JLabel(im));
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# javascript - 浏览器呈现网页的顺序是什么？为什么脚本阻塞会成为一个问题？

> ID：16094408
> 
> 赞同：2
> 
> 时间：2013-04-18T22:53:46.017
> 
> 标签：javascript, browser, rendering

考虑以下场景：

```
<h1>Hello!</h1>
<script src="cool1.js"></script>
<script src="cool2.js"></script>
<h2>Goodbye!</h2>
<img src="boat.gif" alt="Big Boat"> 
```

何时`cool1.js`下载是否意味着`Hello!`已显示但在下载并执行`Goodbye!`之前不会显示`cool1.js`？
什么时候`cool2.js`下载（我知道 JavaScript 是单线程的，所以它必须等待`cool1.js`完成执行）？什么时候`boat.gif`下载和显示？

[作者在这里](http://www.nczonline.net/blog/2010/08/10/what-is-a-non-blocking-script/)声称：

> 浏览器只能在任何特定时间点执行 JavaScript 或呈现 UI……想想当页面下载到浏览器时会发生什么。该页面在下载时已开始呈现，然后遇到一个标签。此时，浏览器将无法继续渲染，因为 JavaScript 可能会影响 UI，因此它会等待。

我不明白这是因为 JavaScript 不能修改它之前的内容吗？
例如，如果`cool1.js`将里面的内容更改为`<h1>`“Good day”怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:15:04.393

脚本块是一个问题，因为它会延迟（或延迟）位于 HTML 文件中脚本之后的页面元素的可见性，从而延迟那些后面的页面元素对查看者可见的时间，并使显示整个页面的时间更长。

在这个块中：

```
<h1>Hello!</h1>
<script src="cool1.js"></script>
<script src="cool2.js"></script>
<h2>Goodbye!</h2>
<img src="boat.gif" alt="Big Boat"> 
```

以下是您可以总结的内容：

1.  是的，浏览器在下载和运行内联脚本时会阻止页面的进一步呈现。
2.  将`<h1>Hello!</h1>`在 DOM 中并且在`cool1.js`脚本运行之前可用。
3.  该`cool1.js`脚本将在之前运行，`cool2.js`并且两者都将在 DOM 的其余部分可用之前运行。
4.  两个脚本文件的下载和执行将延迟位于它们之后的网页其余部分的可见性。这就是为什么建议在您的内容之后放置尽可能多的 javascript 或使用某种延迟加载，以便您的内容可以尽快显示而无需等待脚本运行。
5.  Javascript 在显示之前无法修改您页面中的内容。如果脚本在内容之后，那么在 javascript 可以修改之前，内容可能已经显示。在这种情况下，脚本可以修改内容，但它可能已经以修改前的状态显示。如果脚本在内容之前，则内容尚未在 DOM 中供脚本修改。这方面的一个技巧是最初隐藏内容（通过内联样式或 CSS 规则），以便 javascript 可以对其进行修改，然后使其可见。
6.  智能浏览器将同时下载cool1.js、cool2.js（甚至可能还有boat.gif），但受限于浏览器的连接限制。但是，cool2.js 直到cool1.js 运行后才会运行，而boat.gif 直到cool2.js 运行后才会被放入DOM。
7.  `boat.gif`可以与其他下载并行下载（这取决于浏览器），但直到运行一段时间后才会显示`cool2.js`。较旧的浏览器可能在运行之前甚至不会开始下载它`cool2.js`。

因此，就性能优化网站的一般建议而言：

1.  在页面内容之后加载尽可能多的脚本，或者在它们上使用延迟或异步加载。这将防止您的内容在这些脚本等待加载和运行时被阻塞。
2.  在整个站点中使用通用脚本文件，以便浏览器可以有效地缓存它们。
3.  尽可能将多个脚本文件合并为一个更大的最小化脚本文件，因为下载单个脚本文件比下载两个脚本文件更快。

`async`有关使用or`defer`属性加载脚本的许多详细信息，请参见相关问题的答案：[加载和执行脚本的顺序](https://stackoverflow.com/questions/8996852/load-and-execute-order-of-scripts/8996894#8996894)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:18:02.850

JFriend00 已经有一个很好的答案，但我留下我的答案来回答你问题的另一部分：'为什么脚本阻塞会成为一个问题？

在下载外部 javascript 之前，页面上的渲染会停止，这*可能*会因为人们放弃等待而失去您的流量。

相反，*有时*异步加载远程 Javascript 是个好主意，这样页面可以继续呈现，代码在后台下载。

要点是，您需要考虑何时需要特定脚本并相应地放置/加载/执行它们（并且异步会使这变得更加困难，因为您可能需要将外部文件中的函数推迟到页面呈现之前运行，有关如何处理此问题的示例，请参见此[页面）。](http://www.electrictoolbox.com/load-javascript-files-asynchronously/)

# php - 如何更改 !isset 语句

> ID：16094409
> 
> 赞同：3
> 
> 时间：2013-04-18T22:53:51.817
> 
> 标签：php, mysql

我有一个带有以下代码的 php 页面。MySQL 查询工作正常，但我尝试添加一个不起作用的 IF 语句。该`if(!isset($result))`语句应该捕获表仅包含 FUTURE 日期时间值的情况。我显然没有正确使用它，或者我应该使用其他东西 - 比如`if(empty())`？

```
<?php

include 'quantitytest_config.php';

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
  or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("grace59_countdown",$dbhandle) 
  or die("Could not select countdown");

//execute the SQL query and return records
$result = mysql_query(
    "SELECT items 
    FROM cases 
    WHERE datetime<=NOW()
    Limit 1 ");

// check if there are only future dates in Database
if(!isset($result)){
    echo "9999";
} else {

//fetch tha data from the database
while ($row = mysql_fetch_array($result)) {
   echo "Quantity:".$row{'items'}."<br>";
}
}
//close the connection
mysql_close($dbhandle);
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:55:23.290

您正在寻找：

```
if(mysql_num_rows($result) == 0){
   echo "9999";
} else { 
```

文档：[http ://www.php.net/manual/en/function.mysql-num-rows.php](http://www.php.net/manual/en/function.mysql-num-rows.php)

当您这样说时，您为 $result 分配了一个值，`$result = mysql_query`即使没有找到任何行，该变量现在也已设置，因此`isset()`无济于事。

但是你真的不应该使用 mysql_* 函数。而是照顾准备好的语句。PDO 或 mysqli。进一步阅读可以在这里找到：[http](http://www.php.net/manual/en/function.mysql-query.php) ://www.php.net/manual/en/function.mysql-query.php （红框）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:57:58.417

从[文档](http://www.php.net/manual/en/function.isset.php)中：

> isset - 如果 var 存在并且值不是 NULL，则返回 TRUE，否则返回 FALSE。

但`$result`如果查询没有结果，这将是一个有效的 MySQL 资源 - 事件。

从[文档](http://www.php.net/manual/en/function.mysql-query.php)：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

用于[`mysql_num_results()`](http://www.php.net/manual/en/function.mysql-num-rows.php)检测结果集是否为空：

```
if(mysql_num_rows($result) == 0) {
    echo 'no results';
} 
```

* * *

进一步注意，您不应将 mysql_* 函数用于新代码，因为 PHP 开发人员已将扩展标记为弃用。使用[`PDO`](http://www.php.net/manual/en/book.pdo.php)或[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:08:04.733

不要忘记`mysql_query`可以返回`false`，所以：

```
if($result){
    if(mysql_num_rows($result) == 0){
        echo "9999";
    }
} 
```

# mysql - 拥有一个包含来自其他 3 个数据库的信息的大型数据库的最佳实践是什么？

> ID：16094411
> 
> 赞同：2
> 
> 时间：2013-04-18T22:54:03.507
> 
> 标签：mysql, integration

问题是我有3个不同来源的信息相似的数据库，都是Mysql数据库。出于顺序和效率的原因，我只需要一个可以查询的实时数据的数据库源。你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:58:39.790

您可以通过复制将您需要在大数据库中查询的所有表设置为其他 3 个数据的副本。如果您在不同的机器上有数据，则链接的问题根本不起作用（“数据库”有点模棱两可，因为它可能意味着模式或机器）。如果您要聚合来自多台机器的数据，我个人会选择复制路线。你可以在这里准备更多关于复制的信息：http: [//dev.mysql.com/doc/refman/5.5/en/replication.html](http://dev.mysql.com/doc/refman/5.5/en/replication.html)

如果您在一台机器上有多个模式需要查询，那么答案很简单，在上面的链接问题中。

# asp.net-mvc-3 - Need Help Understanding MVC Code Statementes

> ID：16094421
> 
> 赞同：0
> 
> 时间：2013-04-18T22:55:04.687
> 
> 标签：asp.net-mvc-3, c#-4.0

I have a large MVC project that I am trying to find all the different pieces / parts. Some of the stuff has been straight forward such as the controllers folder has......the controllers in it. The model folder and view folder their respective files. Now my MVC knowledge is rusty but I do vaguely remember html.partial. So the following line:

```
@Html.Partial("Head") 
```

Head would be the partial view name and indeed I find a cshtml view by the name Head. So I then run across this line:

```
@Html.Widget("head_html_tag") 
```

and I would have expected to find the widget zone "head_html_tag" but a global search in the entire project comes up empty.

So where / how does this widget get generated so I can look at the code that renders it? I understand this question may be rather difficult because you can't go through the project for me. So what I am really needing is to know generally about widgets. Are they going to be located in a class file and generated on the fly? Are they in views or perhaps, although I doubt it, a part of the model?

Please if you think this question dumb enough to down vote it then let me know what an idiot I am with the answer along with your down vote.

Thank You JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:57:26.640

Widgets is not a standard part of MVC.

You could check if the project has built an infrastructure for widgets or maybe if you have some referenced assemblies or NuGet packages for that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:59:37.183

If you install a tool like ReSharper you can hit CTRL-Click on the Widget method to go to definition. If it isn't a 3rd party package it could be an extension method on the `HtmlHelper` class within your project.

# node.js - 在 Jade 中使用 HTML 是否被认为是不好的做法？

> ID：16094423
> 
> 赞同：35
> 
> 时间：2013-04-18T22:55:06.027
> 
> 标签：node.js, express, pug, template-engine

Jade 看起来像一个很酷的模板引擎，我想我会在下一个项目中使用它。但是，某些语法对我来说没有意义。

你这样做会得到什么：

```
ul
  li
    a(href="#book-a") Book A 
```

代替：

```
<ul>
  <li><a href="#book-a">Book A</a></li>
</ul> 
```

我了解您节省了一些打字，但对我来说似乎不太可读。我在 Jade 的现场演示中注意到常规 html 直接通过翻译。那么做这样的事情会被认为是不好的做法：

```
<div class="someClass">    
  <h3> #{book.name} </h3>
</div> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-18T23:59:41.840

## 背景

实际上，jade/pug 语法通过使用 3 种语法允许纯 HTML（或任何其他纯文本），正如您[在项目网站上的参考资料](https://pugjs.org/language/plain-text.html)中看到的那样。

**点语法**（也称为“[标记中的块](https://pugjs.org/language/plain-text.html)”）

```
ul.
  <li><a href="#book-a">Book A</a></li>
  <li><a href="#book-b">Book B</a></li> 
```

**管道语法**（也称为“[管道文本](https://pugjs.org/language/plain-text.html)”）

```
ul
  | <li><a href="#book-a">Book A</a></li>
  | <li><a href="#book-b">Book B</a></li> 
```

**标记语法**（也称为“ [Inline in a Tag](https://pugjs.org/language/plain-text.html) ”）、*“只需在标记后放置一些内容”*，也可以做到这一点

```
ul
  li <a href="#book-a">Book A</a> 
```

这将呈现

```
<ul><li><a href="#book-a">Book A</a></li></ul> 
```

## 问题

回到你的问题，你的样本

```
<div class="someClass">    
  <h3> #{book.name} </h3>
</div> 
```

可以写成

```
.someClass
  h3= book.name 
```

我认为这更具可读性，因此在这种情况下，您应该考虑编写原始 HTML 的不好的做法，但并非总是如此。

## 国际海事组织

IMO，常识是最好的做法。也许我会考虑使用 HTML 的原始块在页面上插入小部件，即 youtube 视频或自定义谷歌地图 <iframe>。

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.es/maps/ms?msa=0&amp;msid=217708588685721440865.0004d1d4faefdd11adf39&amp;ie=UTF8&amp;ll=43.167638,-7.838262&amp;spn=1.010793,0.991384&amp;t=m&amp;output=embed"></iframe>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_Vkm2nMM3-Q" frameborder="0" allowfullscreen></iframe> 
```

如上所述，这里使用[属性语法](https://github.com/visionmedia/jade/blob/master/jade.md#attributes)没有意义。结果几乎相同，并且更快地离开原始 html。

```
iframe(width="425", height="350", frameborder="0", scrolling="no", marginheight="0", marginwidth="0" src="https://maps.google.es/maps/ms?msa=0&amp;msid=217708588685721440865.0004d1d4faefdd11adf39&amp;ie=UTF8&amp;ll=43.167638,-7.838262&amp;spn=1.010793,0.991384&amp;t=m&amp;output=embed")

iframe(width="420", height="315", src="http://www.youtube.com/embed/_Vkm2nMM3-Q", frameborder="0", allowfullscreen) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-30T16:53:13.980

Jade 现在为嵌套标签提供内联语法：

```
a: img 
```

变成

```
<a><img/></a> 
```

取自[官方文档](http://jade-lang.com/reference/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-13T03:32:58.707

您也可以使用以下方法将纯 html 用作您的视图引擎。

```
app.set('views', path.join(__dirname, '/path/to/your/folder'));
app.set("view options", {layout: false});
app.engine('html', function(path, opt, fn) {
  fs.readFile(path, 'utf-8', function(error, str) {
      if (error)
          return str;
      return fn(null, str);
  }); 
```

});

# opencv - IplImage 到 Mat 引用计数

> ID：16094427
> 
> 赞同：0
> 
> 时间：2013-04-18T22:55:25.780
> 
> 标签：opencv

我正在编写的代码有一些问题，我正在尝试`bwlabel`用 C++ 进行操作。而且我遇到了一些内存释放问题，我不知道为什么，因为我尝试按照[OpenCV 教程](http://docs.opencv.org/doc/tutorials/core/interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html)中的文档进行操作。似乎是变量的变量`refcount`proper有问题`Mat`。

这是我的代码：

```
void VideoSeg::bwlabel(IplImage *srce, IplImage *out)
{

    namedWindow( "wndNameOut", CV_GUI_NORMAL );
    cvConvertScale(srce,srce,255.);
    Ptr<IplImage> srcx = srce; 

    Mat src(srcx);

    imshow( "wndNameOut", src);            //The image is succesfully plotted
    SimpleBlobDetector blobDetector( params );
    blobDetector.create("SimpleBlob");

    blobDetector.detect(src, keyPoints );  // The problem appears in this line

    for(int i=0; i<keyPoints.size(); i++ )
    {
        cv::floodFill(src,keyPoints[i].pt, Scalar::all((i+1)*255/(keyPoints.size()+1)));
    }

    IplImage outx = src;
    //http://docs.opencv.org/doc/tutorials/core/interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html
    (*out) = outx;

    cout << "Keypoints " << keyPoints.size() << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:13:11.467

首先，尝试只使用 C++ 或 C 风格。你正在混合两者，它并不是很好。

`cvConvertScale`, `Mat`,`IplImage`等等。仅`cv::Mat`在可能的情况下使用并`cv::`仅发挥作用。

你有什么消息错误？

# c# - C# 对象的 32 位散列函数

> ID：16094429
> 
> 赞同：2
> 
> 时间：2013-04-18T22:55:28.023
> 
> 标签：c#, hash, gethashcode

我希望在我的所有类中覆盖对象的 GetHashCode() 方法。此方法返回一个 Int32。我所知道的所有加密哈希函数的返回值都不适合 32 位整数。我想尽可能地避免碰撞。我应该截断像 SHA-whatever 这样的安全散列，还是使用 32 位散列？如果使用 32 位散列，最好使用什么 32 位散列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T01:33:12.280

只是给大家一点信息。跨不同 .NET 平台的 GetHashCode() 有所不同。例如：.NET 2.0 中的 "Hello".GetHashCode() 与 .NET 4.0 中的 "Hello".GetHashCode() 产生不同的结果。因此，为什么不能使用 .NET 开箱即用地序列化 HashTable 或字典。

实现您自己的哈希算法可提供跨平台的一致性。只是让你知道，你不想低于 Int32。我的建议是坚持使用 Int64（长）。这样你就有更少的冲突，这是散列的目标:) 这是我几年前写的一个库。每个哈希算法都有其优点和缺点（速度与最少碰撞）。此特定版本使用字符串作为输入，但您可以根据需要对其进行修改：

```
static public class StringHash
    {
        //---------------------------------------------------------------------
        static public Int64 RSHash(String str)
        {
            const Int32 b = 378551;
            Int32 a = 63689;
            Int64 hash = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = hash * a + str[i];
                a = a * b;
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 JSHash(String str)
        {
            Int64 hash = 1315423911;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash ^= ((hash << 5) + str[i] + (hash >> 2));
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 ELFHash(String str)
        {
            Int64 hash = 0;
            Int64 x = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = (hash << 4) + str[i];

                if ((x = hash & 0xF0000000L) != 0)
                {
                    hash ^= (x >> 24);
                }
                hash &= ~x;
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 BKDRHash(String str)
        {
            const Int64 seed = 131; // 31 131 1313 13131 131313 etc..
            Int64 hash = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = (hash * seed) + str[i];
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 SDBMHash(String str)
        {
            Int64 hash = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = str[i] + (hash << 6) + (hash << 16) - hash;
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 DJBHash(String str)
        {
            Int64 hash = 5381;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = ((hash << 5) + hash) + str[i];
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 DEKHash(String str)
        {
            Int64 hash = str.Length;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = ((hash << 5) ^ (hash >> 27)) ^ str[i];
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 BPHash(String str)
        {
            Int64 hash = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash = hash << 7 ^ str[i];
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 FNVHash(String str)
        {
            Int64 fnv_prime = 0x811C9DC5;
            Int64 hash = 0;

            for (Int32 i = 0; i < str.Length; i++)
            {
                hash *= fnv_prime;
                hash ^= str[i];
            }

            return hash;
        }
        //---------------------------------------------------------------------
        static public Int64 APHash(String str)
        {
            Int64 hash = 0xAAAAAAAA;

            for (Int32 i = 0; i < str.Length; i++)
            {
                if ((i & 1) == 0)
                {
                    hash ^= ((hash << 7) ^ str[i] * (hash >> 3));
                }
                else
                {
                    hash ^= (~((hash << 11) + str[i] ^ (hash >> 5)));
                }
            }

            return hash;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T01:16:52.327

Eric Lippert 创建了一篇关于如何正确实现 GetHashCode() 方法的[精彩博客文章。](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)您需要记住 GetHashCode() 的目的是将对象放入哈希表中。将它用于此目的意味着您将更可能希望在未来某个时间遍历它或对其进行排序。如果您使用加密函数来执行此操作，您的迭代或排序过程将运行得非常慢。加密功能旨在保护数据，而不是唯一标识它们。通读 Eric Lippert 的博文。它会帮助你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T00:23:11.837

您**可以**`GetHashCode`通过截断 SHA 哈希来实现。但你可能不应该。

的目的`GetHashCode`是允许将对象插入到[哈希表](http://en.wikipedia.org/wiki/Hash_table)中。哈希表的目的是优化搜索：平均而言，在哈希表中找到一个键只需要 O(1) 时间，而对于树来说是 O(log n)，对于未排序的列表来说是 O(n)。

您确实希望您的`GetHashCode`方法最大限度地减少冲突，以防止您的哈希表查找退化为 O(n) 时间。但是您也希望它们快速，因为哈希表的全部意义在于优化。如果您的哈希码需要很长时间来计算，您不妨将数据存储在`List`.

加密哈希很慢。它们通常是这样*设计*的，以阻止暴力攻击。这使得它们不适合与`GetHashCode`.

那么，*应该*如何实施`GetHashCode`呢？一种简单且常用的方法就是对`Equals`函数中使用的所有成员变量进行异或运算。

```
struct Complex
{
    double real;
    double imag;

    public override int GetHashCode()
    {
        return real.GetHashCode() ^ imag.GetHashCode();
    }

    // ...
} 
```

另一种适用于类数组对象的简单方法是[多项式哈希函数](http://sunilsavanur.wordpress.com/2012/08/14/polynomial-hash-function-for-dictionary-words/)。

```
class MyClass
{
    int[] data;

    public override int GetHashCode()
    {
        int result = 0;

        foreach (int n in data)
        {
            result = result * 41 + n;
        }

        return result;
    }

    // ...
} 
```

如果您的类包含大量要散列的数据，您可能希望将散列码保存在成员变量中并在构造期间预先计算它，以便`GetHashCode()`可以使用该变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T23:00:33.737

哈希值的宽度越短，发生冲突的可能性就越大。由于`Int32`最多存储 4294967296 个不同的值，因此您需要考虑这是否会为您的目的保留足够独特的值 - 这取决于这是用于安全性还是身份检查。

我对您为什么要覆盖感兴趣`GetHashCode()`，该值是否必须适合 32 位？如果是，为什么？

# awk - 每隔一行变成一列

> ID：16094431
> 
> 赞同：1
> 
> 时间：2013-04-18T22:55:44.353
> 
> 标签：awk

我正在重新格式化一些丑陋的数据，这些数据以 xml 和各种其他垃圾形式开始并归结为这一点，但我无法完成这项工作。

我想转：

```
 BPSD-41 
    Admin Summary: Page does not finish loading

    BPSD-49 
    Mobile: Activity Section: Does not finish loading

    BPSD-50 
    Fix bug in staging 
```

进入这个：

```
 BPSD-41 : Admin Summary: Page does not finish loading

    BPSD-49 : Mobile: Activity Section: Does not finish loading

    BPSD-50 : Fix bug in staging 
```

我敢打赌有一个非常优雅的 awk 解决方案，但我找不到它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:02:51.823

您可以执行以下操作

```
BEGIN {
    flag = 0;
}

{
    if (flag == 0) {
        save = $0;
        flag = 1;
    } else {
        printf("%s : %s\n", save, $0);
        flag = 0;
    }
} 
```

请注意，我尚未对此进行测试，但应该可以使用一些接近的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:12:00.003

这是一个跳过空行的单行

```
/[^\r\n]/{ printf("%s%s", $0, i++ % 2 ? "\n" : " : "); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:06:32.337

您可以使用此 awk 命令连接 2 行：

```
awk 'NF>0{printf $0; getline; print $0}' inFile 
```

或使用 sed：

```
sed -i.bak 'N;s/\n/\;/' inFIle 
```

# moovweb - 重新混合的问题 TechCrunch

> ID：16094432
> 
> 赞同：2
> 
> 时间：2013-04-18T22:55:45.010
> 
> 标签：moovweb, tritium

在浏览有关如何重新混合网站的示例教程（我选择了 TechCrunch）时，我注意到了图像转换：

```
$$("img") {
  attribute("src", "http://www.montessoricats.com/buddha-scottish-fold-its-magic.jpg")
} 
```

似乎只应用了一些图像。看：

[上页 - 不完全转换](http://screencast.com/t/nw2V0XgaB)

其他文章的折叠下方的一些被转换为猫图像。主要内容没有。

[下页 - 不完全转换](http://screencast.com/t/VUlQS2YjQA18)

我最初的预感是，转换似乎只适用于 TechCrunch 的首屏内容，但这被后一个截图揭穿了。

我将如何解决这个问题，或者我做错了什么，或者这是 TechCrunch 如何提供其内容以及 Moovweb 如何获取该内容的缺点，这样在混音器执行它时它可能不可用?

所有的见解都赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:36:02.803

因此，我认为如果您尝试禁用 JavaScript 并重新加载页面，您可能会对正在发生的事情有所了解。

您会注意到相当数量的图像没有加载！由于这些图像是通过 JavaScript 添加的，因此当您更改所有`<img>`元素的 src 属性时，它们实际上并不存在（因为 JavaScript 由客户端执行）。

如果您也想更改这些元素，则可能取决于它们的服务方式。如果发出正确的 AJAX 请求来获取这些图像，那也将通过 Moovweb，您可以使用 Content-Type 和 URL 路径捕获它们，然后相应地修改它们。如果它们在那里被硬编码以被注入，您可能需要添加自己的 JavaScript 在图像加载脚本之后运行以更改它们。您可以使用 Tritium 在主体底部轻松插入脚本。

# applescript - appA 是否需要授权才能执行启动 appB 的 AppleScript？

> ID：16094435
> 
> 赞同：2
> 
> 时间：2013-04-18T22:55:46.797
> 
> 标签：applescript, code-signing, entitlements, osx-gatekeeper

我们有两个签名的 Mac OS X 应用程序（我们开发的——非“应用商店”应用程序）。appA 运行一个 Applescript（来自一个 .scpt 文件），它向 appB 发送一条消息以启动和搜索一些文本。

这在 OS X 10.6 上完美运行。

在 OS X 10.7 和 10.8 上，我得到了不同的行为：当 appA 运行 Applescript 时，appB 不会启动。但是，如果 appB 已在运行，则 appB 会收到 appA 的消息，并处理请求的搜索。

这似乎是一个沙盒问题：当我们向终端发出此命令时：

```
sudo spctl --master-disable 
```

…然后重新启动，Applescript 在 10.8 上启动 appB 也没有问题。在 10.7 上，appB 仍不会启动。

我们是否需要临时授权才能执行 AppleScript 脚本（或发送 AppleEvents）到我们的其他应用程序？这两个应用程序都是使用 codesign 手动签名的。这些权利是否从开发者关系中获得并通过协同设计应用？

appA 获取 AppleScript 并通过以下函数执行它：

```
OpenDefaultComponent(), OSALoad(), AEBuildAppleEvent(), OSAExecuteEvent() 
```

正在执行的 AppleScript 是：

```
on lookup(search_phrase)

tell application "appB"
activate
lookup (search_phrase)
end tell
end lookup

property ASDScriptUniqueIdentifier : "Lookup.scpt" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:23:22.900

我不知道，但如果 appB 是 Applescript（真的是*脚本*，而不是应用程序），你可以。

然后你可以使用（在 AppA 中）：

```
set AppB to load script alias "path:to:app:B"
set scriptResult to AppB's theaction() --Change theaction to your needs 
```

这样，您会将 appB 加载到 appA 中，从而导致 appA 实际执行该操作。

# php - 在 Windows 中使用 PHP 和 Postgre 开发 Webapp 与在 Linux 中开发 Webapp 是一样的吗？

> ID：16094442
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:56:17.223
> 
> 标签：php, linux, windows, postgresql, ubuntu

我必须为我正在实习的公司开发一个网络应用程序。

他们要求我使用 PHP 和 PostgreSQL 开发它。（这就是他们做事的方式，我通常使用mysql）

那里的大多数计算机都有 Ubuntu。说我疯了，但我喜欢在 Windows 中开发网站...

那么，如果我在 Windows 中使用 PHP 和 PostgreSQL 开发网站，它会在 Ubuntu 中正常运行吗？

我只需要担心大多数浏览器都支持它吗？

您的回复、提示和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:57:38.910

> 那么，如果我在 Windows 中使用 PHP 和 PostgreSQL 开发网站，它会在 Ubuntu 中正常运行吗？

*也许*。

> 我只需要担心大多数浏览器都支持它吗？

*大概*。

提示：在您的 Windows 计算机上虚拟化一个 Ubuntu 机器，然后开发环境与生产环境相同。这是您通常的目标。如果应用程序很简单，通常不需要这样做，但是当您使用不同的数据库服务器时，这可能已经是可行的方法了。请记住，在 linux 下，很多东西在 PHP 世界中比 windows 下运行得更好，尤其是扩展情况要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:15:28.640

有些事情可能会有所不同。只需在您的 windows 机器上开发它并在 ubuntu 机器/VM 上测试它。

如果您遇到任何在 Windows 上没有出现的错误，php.net 上可能有解决方案（另请阅读评论）

还要确保托管应用程序的每台机器都具有相同的（主要）php 版本。

我也在windows上开发。我的做法是将我所做的一切都保存到 debian linux 机器上的网络共享中。然后我将浏览器指向 debian linux 机器上的网络服务器，以便在 linux 环境中进行测试。您可以使用 ftp 或 sftpserver 而不是 samba 共享。大多数 IDE 支持上传到 (s)ftp

# ruby-on-rails - 在 Rails 中未调用自定义 to_json

> ID：16094443
> 
> 赞同：1
> 
> 时间：2013-04-18T22:56:22.690
> 
> 标签：ruby-on-rails, json

# 模型

```
def to_json
  p 'ppp'
  p UNDISPLAYABLE_SIGNS
  if sign.in? UNDISPLAYABLE_SIGNS
    {code: code}
  else
    super
  end
end 
```

# 控制器

```
 render json: {currency: @currency, savedInUser: true} 
```

ppp 没有打印在服务器控制台中，我怎么能自定义我的 JSON 响应，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:59:35.017

是 as_json 不是 to_json

```
def as_json
  p 'ppp'
  p UNDISPLAYABLE_SIGNS
  if sign.in? UNDISPLAYABLE_SIGNS
    {code: code}
  else
    super
  end
end 
```

# java - 输出二维数组的问题...？

> ID：16094448
> 
> 赞同：0
> 
> 时间：2013-04-18T22:56:43.860
> 
> 标签：java, arrays, list, dimensional

这是一个计划的开始，该计划将来自四个不同班级的学生及其成绩组织起来。最终我会添加平均值等等。然而，目前我在“studentListField”中输出成绩时遇到问题——见下文……在“addButton”之后。我对 java 和我用来构建这个的特定程序 (netbeans) 很陌生，因此我要求指导和帮助。**

```
package studentgrades;

import org.jdesktop.application.Action;
import org.jdesktop.application.ResourceMap;
import org.jdesktop.application.SingleFrameApplication;
import org.jdesktop.application.FrameView;
import org.jdesktop.application.TaskMonitor;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.Timer;
import javax.swing.Icon;
import javax.swing.JDialog;
import javax.swing.JFrame;

/**
 * The application's main frame.
 */
public class StudentGradesView extends FrameView {

    **//This the all important array...you can list up to 5 students and list 4 test marks of each student.**
    int[][]aryStudent = new int [5][4];

    public StudentGradesView(SingleFrameApplication app) {

****// between here is just a bunch of stuff that was automatically added from when I built the GUI** 

}
    private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    System.exit(0);
    }                                          

    private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          

        **// left "[]" is the student... right "[]" holds the grades...
        // test1Field (1-4) is a JTextField where you input the test grade...I hope that was clear with the name I gave it...**
        aryStudent[0][0] = Integer.parseInt(test1Field.getText());
        aryStudent[0][1] = Integer.parseInt(test2Field.getText());
        aryStudent[0][2] = Integer.parseInt(test3Field.getText());
        aryStudent[0][3] = Integer.parseInt(test4Field.getText());

        aryStudent[1][0] = Integer.parseInt(test1Field.getText());
        aryStudent[1][1] = Integer.parseInt(test2Field.getText());
        aryStudent[1][2] = Integer.parseInt(test3Field.getText());
        aryStudent[1][3] = Integer.parseInt(test4Field.getText());

        aryStudent[2][0] = Integer.parseInt(test1Field.getText());
        aryStudent[2][1] = Integer.parseInt(test2Field.getText());
        aryStudent[2][2] = Integer.parseInt(test3Field.getText());
        aryStudent[2][3] = Integer.parseInt(test4Field.getText());

        aryStudent[3][0] = Integer.parseInt(test1Field.getText());
        aryStudent[3][1] = Integer.parseInt(test2Field.getText());
        aryStudent[3][2] = Integer.parseInt(test3Field.getText());
        aryStudent[3][3] = Integer.parseInt(test4Field.getText());

        aryStudent[4][0] = Integer.parseInt(test1Field.getText());
        aryStudent[4][1] = Integer.parseInt(test2Field.getText());
        aryStudent[4][2] = Integer.parseInt(test3Field.getText());
        aryStudent[4][3] = Integer.parseInt(test4Field.getText());

        aryStudent[5][0] = Integer.parseInt(test1Field.getText());
        aryStudent[5][1] = Integer.parseInt(test2Field.getText());
        aryStudent[5][2] = Integer.parseInt(test3Field.getText());
        aryStudent[5][3] = Integer.parseInt(test4Field.getText());

        int student = 5;
        int marks = 4;

        for (int x=0; x < student ; x++) {
            for (int y=0; y < marks ; y++) {
                **//And if it did work it should output this along with the test scores...At least I hoped it would...**
                studentListField.setText(aryStudent[x][y] + "");
            }
            //System.out.println("");

            /**
             * This was the errors that came up...
             * 
             Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 5
             at studentgrades.StudentGradesView.addButtonActionPerformed(StudentGradesView.java:405)
             at studentgrades.StudentGradesView.access$800(StudentGradesView.java:22)
             at studentgrades.StudentGradesView$4.actionPerformed(StudentGradesView.java:182)
             at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
             at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
             at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
             at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
             at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
             at java.awt.Component.processMouseEvent(Component.java:6505)
             */
        }
    }                                         

    // Variables declaration - do not modify                     
    private javax.swing.JButton addButton;
    private javax.swing.JButton exitButton;
    private javax.swing.JTextField firstNameField;
    private javax.swing.JLabel firstNameLabel;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JTextField jTextField6;
    private javax.swing.JTextField lastNameField;
    private javax.swing.JLabel lastNameLabel;
    private javax.swing.JButton listButton;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JProgressBar progressBar;
    private javax.swing.JLabel statusAnimationLabel;
    private javax.swing.JLabel statusMessageLabel;
    private javax.swing.JPanel statusPanel;
    private javax.swing.JTextField studentListField;
    private javax.swing.JTextField test1Field;
    private javax.swing.JTextField test2Field;
    private javax.swing.JTextField test3Field;
    private javax.swing.JTextField test4Field;
    private javax.swing.JLabel titleLabel;
    // End of variables declaration                   

    private final Timer messageTimer;
    private final Timer busyIconTimer;
    private final Icon idleIcon;
    private final Icon[] busyIcons = new Icon[15];
    private int busyIconIndex = 0;

    private JDialog aboutBox;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:01:54.520

您已将数组的大小定义`int[][]aryStudent = new int [5][4];`为 5，并且您将从 0 变为 5（即 6）

```
aryStudent[5][0] = Integer.parseInt(test1Field.getText());
aryStudent[5][1] = Integer.parseInt(test2Field.getText());
aryStudent[5][2] = Integer.parseInt(test3Field.getText());
aryStudent[5][3] = Integer.parseInt(test4Field.getText()); 
```

正如评论中所建议的，使用`ArrayList`. an 的优点`ArrayList`是它们的大小会动态增长，因此您不必担心最大大小。

或者，恕我直言，最好的方法是使用一个`HashMap` 示例：

```
HashMap<Integer, Integer> studentsMarks = new HashMap<Integer, Integer>();
//To insert
studentsMarks.put(//key, //value);
//To retrive
studentMarks.get(//key); 
```

# javascript - 用谷歌图表映射选举数据

> ID：16094449
> 
> 赞同：1
> 
> 时间：2013-04-18T22:56:49.067
> 
> 标签：javascript, charts, google-visualization

我需要在谷歌地理地图中绘制上一次**委内瑞拉总统选举的结果。**

我正在尝试将两位市长候选人的结果放在同一张图表中，但 Google Chart 似乎无法做到这一点。

我正在尝试重现[Google Code Playground](https://code.google.com/apis/ajax/playground/#geo_map)上显示的示例， 使用选项`options['region'] = 'VE';`将限制地图设置为我的国家和我所在地区的 [ISO 3166](http://en.wikipedia.org/wiki/ISO_3166-2%3aVE)城市代码，但仍然无法在同一张地图上显示两组数据。这是我正在使用的[数据。](http://www.eleccionesvenezuela.com/noticia-mapa-politico-electoral-venezuela-14-abril-594.html)

样本数据将是：

```
 function drawVisualization() {
  var data_candidate_a = google.visualization.arrayToDataTable([
            ['Ciudad', 'Result','Label'],
            ['VE-A', 200,'CARACAS'],
            ['VE-B', 300,'AMAZONAS'],
            ['VE-C', 400,'BOLIVAR'],
            ['VE-C', 500,'BARINAS'],
            ['VE-D', 600,'ANZOATEGUI'],
            ['VE-E', 700,'MIRANDA']
          ]);

   var data_candidate_b = google.visualization.arrayToDataTable([
                ['Ciudad', 'Result','Label'],
                ['VE-A', 100,'CARACAS'],
                ['VE-B', 150,'AMAZONAS'],
                ['VE-C', 200,'BOLIVAR'],
                ['VE-C', 600,'BARINAS'],
                ['VE-D', 300,'ANZOATEGUI'],
                ['VE-E', 800,'MIRANDA']
              ]);

  var geomap = new google.visualization.GeoMap(
      document.getElementById('visualization'));
  var options = {};
  options["region"] = "VE";
  geomap.draw(data_candidate_a, options);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:53:22.633

**问题#1：**你的图表上不能有一个“标签”列——谷歌不喜欢它。

**解决方案#1：**使用`{v: 'value', f: 'format'}`技巧在鼠标悬停时显示城市名称（您的 C 列标签）。

**问题 #2：**您没有显示州级边界。

**解决方案#2：**您需要为`resolution: 'provinces'`

我在下面重新创建了您的图表的工作版本（使用 GeoChart 而不是 GeoMap，它可能也适用于 GeoMap，但 GeoChart 通常更易于访问，因为它不使用闪存）：

```
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Ciudad');
  data.addColumn('number', 'result');
  data.addRows([
    [{v: 'VE-A', f: 'CARACAS'}, 200],
    [{v: 'VE-B', f: 'AMAZONAS'}, 300],
    [{v: 'VE-C', f: 'BOLIVAR'}, 400],
    [{v: 'VE-C', f: 'BARINAS'}, 500],
    [{v: 'VE-D', f: 'ANZOATEGUI'}, 600],
    [{v: 'VE-E', f: 'MIRANDA'}, 700]
  ]);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));

  var options = {
    region: "VE",
    resolution: "provinces"
  };

  geochart.draw(data, options);
} 
```

# bayesian - OpenBUGS - 未定义变量

> ID：16094450
> 
> 赞同：1
> 
> 时间：2013-04-17T16:18:42.317
> 
> 标签：bayesian, openbugs

我在 OpenBUGS 中使用以下代码进行分析：

```
model
{
for(i in 1:467)
{
probit(p[i])<-gamma0+gamma1*drug[i]+gamma2*CD41[i]
R[i]~dbern(p[i])
junk[i]<-ID[i]
}
gamma0~dnorm(0,.0001)
gamma1~dnorm(0,.0001)
gamma2~dnorm(0,.0001)
}
ID[] drug[] CD41[] R[]
1   0   114 NA
2   1   40  NA
3   1   12  0
4   0   15  0
....
END 
```

我收到以下错误：未定义变量 CD41[]。我不知道如何解决这个问题，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:11:31.697

你确定你将向量变量`CD41`正确地传递给你的dataList吗？

`CD41<-as.vector(CD41)`如果正在使用 R，请在将其传递给 OpenBUGS 之前尝试调用。请记住，对于 BUG 和 R，1 列矩阵和向量是不同的东西。

# java - 自动装配任务发送到 Spring TaskExecutor

> ID：16094452
> 
> 赞同：14
> 
> 时间：2013-04-18T22:56:59.303
> 
> 标签：java, spring

你怎么会有一个实现 Runnable 并自动提交给 springs TaskExecutor 的类？

例如，我有一个任务：

```
public class MyTask implements Runnable {

    @Autowired private MyRepository myRepository;

    @Override
    public void run() {
        myRepository.doSomething();
    }
} 
```

还有一个向spring TaskExecutor 发送任务的服务：

```
@Service
public class MyService {

    @Autowired private TaskExecutor taskExecutor;

    public void someMethod() {

        MyTask myTask = new MyTask();
        taskExecutor.execute(myTask);

    }

} 
```

我知道这些字段没有被自动连接，因为 MyTask 正在使用 new MyTask() 进行实例化。但是，我该如何解决这个问题？我应该访问 Spring 的 ApplicationContext 并通过它创建 bean 吗？您将如何在 Web 应用程序环境中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T00:10:30.027

尝试

```
public class MyTask implements Runnable {
    private MyRepository myRepository;

    public MyTask(MyRepository myRepository) {
         this.myRepository = myRepository;
    }

    @Override
    public void run() {
        myRepository.doSomething();
    }
}

@Service
public class MyService {
    @Autowired private TaskExecutor taskExecutor;
    @Autowired private MyRepository myRepository;

    public void someMethod() {
        MyTask myTask = new MyTask(myRepository);
        taskExecutor.execute(myTask);
    }
} 
```

或者您可以声明 MyTask 的 scope = "prototype" 并将 MyService 更改为

```
@Service
public class MyService {
    @Autowired private ApplicationContext ctx;

    public void someMethod() {
        MyTask myTask = ctx.getBean(MyTask.class);
        taskExecutor.execute(myTask);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T00:36:43.550

使用 Spring 至少有两种好方法可以做到这一点。首先，[@Configurable](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-using-aspectj)注解。使用这意味着对 AspectJ 的依赖，但它允许您注入不受 Spring 管理的 bean（即，您正在使用 new 运算符）。这将涉及使用 @Configurable 注释 MyTask，并在您的 Spring 配置中添加几行，如链接中所述。

```
@Configurable
public class MyTask implements Runnable { ... }

@Service
public class MyService {
   @Autowired private TaskExecutor taskExecutor;

   public void someMethod() {

     // AspectJ would jump in here and inject MyTask transparently
     MyTask myTask = new MyTask();
     taskExecutor.execute(myTask);

} 
```

}

第二种方法将涉及使用 Spring 的 ServiceLocatorFactoryBean 特性来创建原型 bean。[这在JavaDoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/ServiceLocatorFactoryBean.html)中得到了最好的解释，但在这种情况下，您将像任何其他 bean 一样将 TaskFactory 注入您的 @Service 注释类，然后执行以下操作：

```
@Service
public class MyService {
  @Autowired private TaskExecutor taskExecutor;
  @Autowired private MyRepository myRepository;
  @Autowired private TaskFactory taskFactory;

public void someMethod() {
    MyTask myTask = taskFactory.getTask("myTask")
    taskExecutor.execute(myTask);
} 
```

}

MyTask 已经被注入到您的存储库中，因为您可以在 XML 映射中配置它。我每天都使用这两种方法，但我倾向于使用第二种方法，因为它更易于阅读，并通过确保开发人员不做不易测试的事情来帮助他们保持诚实，坦率地说，它更多对不经意的观察者来说很清楚。

# .net - 结合IObservable > 进入 IList

> ID：16094453
> 
> 赞同：2
> 
> 时间：2013-04-18T22:57:20.953
> 
> 标签：.net, c#-4.0, system.reactive

我将传入连接公开为：

```
IObservable<double> 
```

每次建立新连接时，我都会通过以下方式通知它：

```
IObservable<IObservable<double>> m_IncomingConnections; 
```

我的问题是我想建立一个我可以用来做的操作员

```
IObservable<IList<double>> m_joined = m_IncomingConnections.JoinAll(); 
```

所以假设一开始我有三个传入连接，m_joined observable 将推送具有三个元素的列表。

```
|--a1----a2----------a3-------
|b1---b2----b3--b4---------b5-
|---c1----c2---c3--c4--------- 
```

结果：

```
>[a1,b1,c1]
>[a1,b2,c1]
>[a2,b2,c1]
>[a2,b2,c2]
>[a2,b3,c2] 
```

你明白了，但是如果有新的连接进来，我希望数组在新连接推送新值后立即变为 4 大小。

所有这一切都是为了让我现在可以使用

```
m_joined.Select(vv => vv.Average()); 
```

每次推入新值时流式传输所有流的平均值。

关于为 Rx 实现这样的扩展有什么建议吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:09:44.270

主要问题是将可观察的列表转换为可观察的列表。

```
IObservable<List<T>> CombineNLatest<T>(List<IObservable<T>> list){

    return list
        .Aggregate
            ( Observable.Return(new List<T>())
            , (a, n) => Observable.CombineLatest
                ( a
                , b
                , (l, e) => l.Concat(e).ToList()));
} 
```

类似的东西虽然我没有测试过。现在你有这个问题，你需要建立你的列表>

```
IObservable<List<IObservable<T>> 
CollectList<T>
(this IObservable<IObservable<T>> input)
{
    var initial = new List<IObservable<T>>();
    return Observable.Create(observer => {

        return input.Subscribe( o => {

            initial.Append(o);
            observer.OnNext(initial);

        }

    });
} 
```

再次没有经过测试，但我希望总体思路很清楚。现在将它们链接在一起

```
IObservable<IObservable<T>> input = ...;
IObservable<IObservable<List<T>>> intermediate = input
   .CollectList()
   .Select( list => CombineNLatest(list) );

IObservable<List<T>> final = intermediate.Switch(); 
```

# android - 带有对象 ArrayAdapter 的自定义微调器无法获取资源

> ID：16094457
> 
> 赞同：1
> 
> 时间：2013-04-18T22:57:40.057
> 
> 标签：android, android-arrayadapter, android-spinner

我正在使用[此处的教程](http://adanware.blogspot.com/2012/03/android-custom-spinner-with-custom.html)来创建自定义微调器。当我复制课程（页面中途）时`CountryAdapter`，eclipse无法识别`getResources()`

```
myFlag.setBackgroundDrawable(getResources().getDrawable(item.getCountryFlag())); 
```

有谁知道解决这个问题？基本上，我还能如何获得可绘制对象？我正在复制下面的课程

```
public class CountryAdapter extends ArrayAdapter<CountryInfo>
    {
        private Activity context;
        ArrayList<CountryInfo> data = null;

        public CountryAdapter(Activity context, int resource, ArrayList<CountryInfo> data)
        {
            super(context, resource, data);
            this.context = context;
            this.data = data;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {   // Ordinary view in Spinner, we use android.R.layout.simple_spinner_item
            return super.getView(position, convertView, parent);   
        }

        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent)
        {   // This view starts when we click the spinner.
            View row = convertView;
            if(row == null)
            {
                LayoutInflater inflater = context.getLayoutInflater();
                row = inflater.inflate(R.layout.spinner_layout, parent, false);
            }

            CountryInfo item = data.get(position);

            if(item != null)
            {   // Parse the data from each object and set it.
                ImageView myFlag = (ImageView) row.findViewById(R.id.imageIcon);
                TextView myCountry = (TextView) row.findViewById(R.id.countryName);
                if(myFlag != null)
                {
                    myFlag.setBackgroundDrawable(getResources().getDrawable(item.getCountryFlag()));
                }
                if(myCountry != null)
                    myCountry.setText(item.getCountryName());

            }

            return row;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:04:46.393

该`getResources()`方法在类中不可用`ArrayAdapter`，它实际上来自`Context`（在本例中是您的 Activity 类，因为它扩展了 Context）。由于您已获得对 Activity 的引用，请尝试`context.getResources()`改用。

# git - 是否可以从 Git 获得一个简单的数字修订号？

> ID：16094463
> 
> 赞同：2
> 
> 时间：2013-04-18T22:58:09.197
> 
> 标签：git, continuous-integration, teamcity

我正在将我的 VCS 从 Subversion 迁移到 Git。当我使用 Subversion 时，我曾经使用 Subversion 修订号作为我的程序集版本的最后一个组件。在 TeamCity 中，我将其用作内部`%build.vcs.number%`版本号格式的一部分，并在编译之前使用“AssemblyInfo Patcher”（或有时是 MSBuild 社区任务）使用版本号更新我的 AssemblyVersion 属性。这一切都运作良好，并且可以轻松地将任何给定的程序集追溯到确切的源版本。

不幸的是，在 Git 中，不再有修订号。相反，我们有不能在 AssemblyVersion 中使用的长十六进制哈希码。到目前为止，这是我对改用 Git 感到遗憾的一件事。

有没有办法从 Git 中检索一个简单的数字版本标识符，我可以在我的构建配置中使用，如上所述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:03:36.857

[`git describe`](http://kernel.org/pub/software/scm/git/docs/git-describe.html) 是我找到的最接近修订号的。它给你

*   最后一个标签的名称
*   自该标签以来的提交次数
*   提交 SHA

```
$ git clone git://github.com/antirez/redis

$ cd redis

$ git describe
with-deprecated-diskstore-2853-g5a526c2 
```

或者如果你只想要号码

```
$ git describe | awk '$0=$--NF' FS=-
2853 
```

# node.js - Mongoose 按对象的对象值排序

> ID：16094468
> 
> 赞同：3
> 
> 时间：2013-04-18T22:58:39.473
> 
> 标签：node.js, mongodb, mongoose

我一直在编写一个小型节点应用程序，部分查询是按对象的喜欢数排序，如下所示：

```
likes      : { num: { type: Number, default: 0 }, IDs:[Number]... 
```

和排序查询：

```
Object.find().sort({likes : 'desc'};).execFind(function(err, confessions){... 
```

这不按喜欢的数量排序（就像我想要的那样），而是按最近喜欢的对象排序。

我将如何按 likes.num 排序？我似乎无法让它工作......

编辑：继承人要求的 mongo 文档

```
{ __v: 0,
    _id: 51703a470ef8e60000000002,
    name: 'Name',
    text: ' this is a fresh submission for  mongo to hold',
    comments: { commentData: [], num: 0 },
    removed: false,
    time: Thu Apr 18 2013 11:24:07 GMT-0700 (PDT),
    likes: { IDs: [ 100001810858894 ], num: 1 },
    dislikes: { IDs: [ 100001810858894 ], num: 1 } } 
```

编辑：继承人整个查询

```
exports.index = function (req, res) {
console.log(req.user);
var sortParams;
var sort = req.params.sortingMethod;
console.log(sort);
if (sort == 'newest'){
     sortParams = { time : 'asc'};
} else if (sort == 'oldest'){
     sortParams = { time : 'desc'};
} else if (sort == 'likes'){
     sortParams = {likes.num : 'desc'};
} else if (sort == 'dislikes'){
     sortParams = {dislikes.num :'desc'};
} else {
     sortParams = { time : 'desc'};
}

console.log(sortParams);

Confession.find().sort(sortParams).execFind(function(err, confessions){... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T02:00:10.543

答案是将查询参数用 Linda Quin 建议的引号括起来

```
sortParams = {'likes.num' : 'desc'}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:15:16.390

您将获得按对象值排序的结果 - 问题是对象是完整的 JSON 文档。您真正想要的是按对象中特定字段的值排序，在您的情况下为“likes.num”

引号将包含在查询中：

```
 {"likes.num":-1} 
```

# node.js - Mocha 测试不启动 selenium 浏览器

> ID：16094472
> 
> 赞同：0
> 
> 时间：2013-04-18T22:59:19.497
> 
> 标签：node.js, selenium, mocha.js

我想用 Mocha+Selenium 来测试一个 webapp。我已经安装了 WebDriverJS（通过 npm install webdriverjs）和 Mocha（通过 npm install mocha）。

当我通过节点（节点 test.js）运行此代码时，会打开一个新的浏览器窗口并加载我要测试的页面

```
var assert = require("assert");
var selenium_server="10.222.33.187",
    server_under_test="http://xxx.com/";
var webdriverjs = require('webdriverjs');

var client=webdriverjs.remote({
    host:selenium_server,
    port:4444,
});
client.init()
    .url(server_under_test); 
```

如果我通过 Mocha (mocha test.js) 运行此代码，它不会启动新的浏览器。测试通过，无需启动浏览器

```
var assert = require("assert");
var selenium_server="10.222.33.187",
    server_under_test="http://trapspotter.com/alpha/";
var webdriverjs = require('webdriverjs');

before(function() {
    var client=webdriverjs.remote({
        host:selenium_server,
        port:4444,
    });
    client.init()
        .url(server_under_test);
});

describe("test", function() {
    it("should pass", function() {
        assert(true);
    });
}); 
```

关于为什么 Mocha 测试不启动浏览器的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:01:07.547

我通过将 done 传递给 url() 来解决问题

```
describe("test", function() {
    before(function(done) {
        client.init()
            .url(server_under_test, done);
    });
    it("should pass", function() {
        assert(true);
    });
}); 
```

# php - SimpleXMLElement special chars in xml

> ID：16094480
> 
> 赞同：0
> 
> 时间：2013-04-18T22:59:48.563
> 
> 标签：php, xml, simplexml

I'm creating a XML object using PHP SimpleXMLElement

I have the full XML in `$RAWResponse`, so I use

```
$oXMLResponse = new SimpleXMLElement($RAWresponse); 
```

The XML I'm getting comes from a webservice. I detected the XML contains invalid chars, as '&' for instance.

There are a lot of posts about this issue but none works. I tried htmlentities() but this escapes every char, including the '<' and '>' opening and enclosing the XML Elements.

Finally I used this function :

```
$some_special_chars = array("&");
$replacement_chars  = array("&amp;");
$RAWresponse    = str_replace($some_special_chars, $replacement_chars, $RAWresponse);

$oXMLResponse = new SimpleXMLElement($RAWresponse); 
```

This works but it's a stupid solution, because it will break if I get any other special char. Is there a better solution? I cant understand why SimpleXMLElement breaks, it should only show a warning or something.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:24:41.017

This is not possible using PHP's built in SimpleXML extension (Or even the DOM extension). You must either replace all invalid characters with their proper entities or request that the web-service provider return valid XML.

# c# - 传递具有类型约束定义的特定父类的子类作为参数

> ID：16094481
> 
> 赞同：1
> 
> 时间：2013-04-18T22:59:49.580
> 
> 标签：c#, parent, argument-passing, type-constraints

我正在尝试创建一个方法，其中传递一个必须实现需要类型约束的特定类的参数。我将能够放置一个泛型类型 costraint 参数。

这是我的问题的一个场景：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    public class TestClass
    {
        public void TestMethod(SharedClass<???> obj)
        {
            //DoSomething
        }

        public void Main()
        {
            TestMethod(new FixedClass1()); //Work if TestMethod(SharedClass<FixedInterface1> obj)
            TestMethod(new FixedClass2()); //Work if TestMethod(SharedClass<FixedInterface2> obj)
        }
    }

    public class FixedClass1 : SharedClass<FixedInterface1> { }

    public class FixedClass2 : SharedClass<FixedInterface2> { }

    public class SharedClass<T> where T : class { }

    public interface FixedInterface1 { }

    public interface FixedInterface2 { }

} 
```

感谢所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:31:41.097

这是你想做的吗...

```
public void TestMethod<T>(SharedClass<T> obj) where T : class
{
    //DoSomething
} 
```

# javafx-2 - 在 JavaFX/FXML 中创建灵活的 3 框布局的最佳方法

> ID：16094482
> 
> 赞同：5
> 
> 时间：2013-04-18T22:59:51.577
> 
> 标签：javafx-2, fxml

我想在 JavaFX/FXML 中创建一个灵活的 3 框布局。一张图片描述得最好，就像下面这样：

![首选结果](https://i.stack.imgur.com/KtZ1g.jpg)

如您所见，主要部分应包含三个可调整大小的框。所有这些盒子都应该有一个首选的尺寸。

因此代码如下所示（简化代码）。

```
<BorderPane>
  <top>
    <VBox>
      <!-- menubar stuff -->
    </VBox>
  </top>
  <center>
    <!-- ACTUAL CONTENT HERE -->
  </center>
  <bottom>
    <!-- toolbar stuff -->
  </bottom>
</BorderPane> 
```

这里最好的方法是什么？两个嵌套`SplitPane`的 s?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T23:56:39.153

> 这里最好的方法是什么？两个嵌套的拆分窗格？

是的，我会那样做。

![地图编辑器](https://i.stack.imgur.com/JU8Zj.png)

要获得上面的模拟布局，请尝试在[SceneBuilder 1.1 early access](http://www.oracle.com/technetwork/java/javafx/tools/index.html)中打开以下 fxml 。

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<BorderPane id="BorderPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="400.0" xmlns:fx="http://javafx.com/fxml">
  <bottom>
    <Label alignment="CENTER" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" style="-fx-background-color: linear-gradient(to bottom, paleturquoise, azure, paleturquoise);&#10;" text="(56, 32)" textAlignment="LEFT" BorderPane.alignment="CENTER" />
  </bottom>
  <center>
    <SplitPane dividerPositions="0.3492462311557789" focusTraversable="true" prefHeight="160.0" prefWidth="200.0">
      <items>
        <SplitPane id="SplitPane" dividerPositions="0.6088328075709779" orientation="VERTICAL">
          <items>
            <TabPane prefHeight="200.0" prefWidth="200.0" side="BOTTOM" tabClosingPolicy="UNAVAILABLE">
              <tabs>
                <Tab text="A">
                  <content>
                    <TilePane prefHeight="200.0" prefWidth="200.0" style="-fx-background-color: lavender;&#10;" />
                  </content>
                </Tab>
                <Tab text="B">
                  <content>
                    <TilePane prefHeight="200.0" prefWidth="200.0" />
                  </content>
                </Tab>
                <Tab text="C">
                  <content>
                    <TilePane prefHeight="200.0" prefWidth="200.0" />
                  </content>
                </Tab>
                <Tab text="D">
                  <content>
                    <TilePane prefHeight="200.0" prefWidth="200.0" />
                  </content>
                </Tab>
                <Tab text="E">
                  <content>
                    <TilePane prefHeight="200.0" prefWidth="200.0" />
                  </content>
                </Tab>
              </tabs>
            </TabPane>
            <TreeView prefHeight="200.0" prefWidth="200.0" />
          </items>
        </SplitPane>
        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="80.0" prefWidth="50.0" style="-fx-background-color: palegreen;" />
      </items>
    </SplitPane>
  </center>
  <top>
    <VBox prefHeight="-1.0" prefWidth="-1.0">
      <children>
        <MenuBar>
          <menus>
            <Menu mnemonicParsing="false" text="File">
              <items>
                <MenuItem mnemonicParsing="false" text="Close" />
              </items>
            </Menu>
            <Menu mnemonicParsing="false" text="Edit">
              <items>
                <MenuItem mnemonicParsing="false" text="Delete" />
              </items>
            </Menu>
            <Menu mnemonicParsing="false" text="Help">
              <items>
                <MenuItem mnemonicParsing="false" text="About" />
              </items>
            </Menu>
          </menus>
        </MenuBar>
        <ToolBar>
          <items>
            <Button mnemonicParsing="false" style="-fx-graphic: url('http://icons.iconarchive.com/icons/custom-icon-design/pretty-office-9/24/open-file-icon.png');" text="" />
            <Button mnemonicParsing="false" style="-fx-graphic: url('http://icons.iconarchive.com/icons/custom-icon-design/pretty-office-7/24/Save-icon.png');" text="" />
          </items>
        </ToolBar>
      </children>
    </VBox>
  </top>
</BorderPane> 
```

# python - matplotlib BrokenBarHcollection 在时间序列中遮盖星期日

> ID：16094483
> 
> 赞同：0
> 
> 时间：2013-04-18T22:59:53.267
> 
> 标签：python, matplotlib

我有一个日期时间列表，想遮蔽所有的星期天。我正在输入一个`pandas.DateTimeIndex`时间跨度，它是一个`np.datetime64`对象列表

```
def ShadeSunday(subplot,timespan):
    timelist = [date2num(time) for time in timespan]
    dayofweek = [int(datetime.date.weekday(time.to_datetime())) for time in timespan]
    collection = collections.BrokenBarHCollection.span_where(Weekdates, ymin=0, ymax=80000, where=dayofweek>5, facecolor='b', alpha='.05')
    subplot.add_collection(collection) 
```

`datetime.date.weekday`正在返回一个整数（例如 6 代表星期日），所以我有一个 x 值的时间列表和一个对应的一周中某天的整数值列表。`BrokenBarHCollection.span_where`引发类型错误：

```
"TypeError: 'bool' object is not iterable" for the arguement 'where=dayofweek>5' 
```

我查看了一些示例，但无法弄清楚如何让 'where= ' 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:46:08.807

我认为这应该可以解决您遇到的错误（很难说，因为我无法在不知道您输入的情况下测试您发布的代码）

```
def ShadeSunday(subplot,timespan):
    timelist = [date2num(time) for time in timespan]
    dayofweek_bool = [int(datetime.date.weekday(time.to_datetime())) > 5 for time in timespan]
    collection = collections.BrokenBarHCollection.span_where(Weekdates, ymin=0, ymax=80000, where=dayofweek_bool, facecolor='b', alpha='.05')
    subplot.add_collection(collection) 
```

您在这里遇到的问题是列表不广播布尔比较（但`numpy.array`确实如此）。`[1, 2, 3] > 322`在 REPL 环境中 运行。

# python - 如何检测骨架化图像中圆圈中的段数？

> ID：16094485
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:59:57.470
> 
> 标签：python, opencv, image-processing, mathematical-morphology, scikit-image

我绘制了 2,4 或 6 个直径的车轮骨架图像。我也有分支点坐标。

我想到了两种检测不同车轮的方法：

1.  计算圆圈内的黑色区域
2.  计算绘制的直径

在这两种情况下，我都不知道如何实现它们。

![轮子 1](https://i.stack.imgur.com/ojLMB.jpg) ![轮子 2](https://i.stack.imgur.com/y8YBi.jpg) ![轮子 3](https://i.stack.imgur.com/3uEjc.jpg) ![轮子 4](https://i.stack.imgur.com/ooN6s.jpg) ![轮5](https://i.stack.imgur.com/N3Mpd.jpg)

如您所见，车轮并不是完美的镂空，因此更难检测差异。

这是我用于骨架化的代码：

首先我对图像进行二值化，然后膨胀然后骨架化。

```
from skimage import io
import scipy
from skimage import morphology
import cv2
from scipy import ndimage as nd
import mahotas as mah
import pymorph as pm
import pymorph

complete_path = "wheel1.jpg"
gray = cv2.imread(complete_path,0)
print(gray.shape)
cv2.imshow('graybin',gray)
cv2.waitKey()

ret,thresh = cv2.threshold(gray,127,255,cv2.THRESH_BINARY_INV) 
imgbnbin = thresh
print("shape imgbnbin")
print(imgbnbin.shape)
cv2.imshow('binaria',imgbnbin)
cv2.waitKey()

element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
graydilate = cv2.dilate(imgbnbin, element) #imgbnbin
graydilate = cv2.dilate(graydilate, element)
#graydilate = cv2.erode(graydilate, element)

cv2.imshow('dilate',graydilate)
cv2.waitKey()   

#SKELETONIZE
out = morphology.skeletonize(graydilate>0)
skel = out.astype(float)
cv2.imshow('scikitimage',skel)
cv2.waitKey()
io.imsave('wheel.jpg', skel)    
sk = skel
print(sk.shape) 
```

原始图像：

![轮子 1](https://i.stack.imgur.com/ANG8p.jpg) ![轮子 2](https://i.stack.imgur.com/z0Qqg.jpg) ![轮子 3](https://i.stack.imgur.com/B8ASe.jpg) ![轮子 4](https://i.stack.imgur.com/kl4vi.jpg) ![轮5](https://i.stack.imgur.com/JgP3X.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:10:37.077

您还可以应用膨胀来连接几乎接触的线，并使用[洪水填充](http://en.wikipedia.org/wiki/Flood_fill)算法来识别隔间

# c# - 使用换行面板模板强制中断项目控件

> ID：16094489
> 
> 赞同：1
> 
> 时间：2013-04-18T23:00:10.707
> 
> 标签：c#, wpf, xaml, itemscontrol, wrappanel

我有一个有趣的问题，我一直在尝试解决。基本上我有一个项目控件，它使用 a`WrapPanel`来`ItemsPanel`模拟从几个绑定字符串构建的段落。但是，有时我需要强制中断，例如当我开始一个新段落时，但是在其中插入中断`TextBlock` `DateTemplate`实际上并没有在父换行面板中插入中断。这是代码：

```
<ItemsControl ItemsSource="{Binding Fragments}" >
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock
                TextWrapping="Wrap"
                Text="{Binding}"/> <!--If this text has a break it won't 
                                        propagate that break to the wrap panel,
                                        but instead just in this text block which
                                        causes the formatting to look wrong-->
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这是片段的简单定义，它将显示我在说什么：

```
Fragments = new ObservableCollection<string>();
Fragments.Add("This is");
Fragments.Add("the first line, ");
Fragments.Add("it is very long and will drift to the ");
Fragments.Add("second line naturally since it is controlled by a wrap panel");
Fragments.Add("\n\r This I want to force to the line below where the line above ends");
Fragments.Add("rapid \n\r new \n\r lines"); 
```

![在此处输入图像描述](https://i.stack.imgur.com/AmQDA.png)

我希望它作为段落继续连接，但在遇到手动中断时尊重它们。像这样：

```
这是第一行，很长，会飘到第二行
自然是因为它是由一个环绕面板控制的。
我想强制到上面的线结束的下面的线。
迅速的
新的
线条
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:46:01.710

我会放弃 ItemsControl 并改用文本块的 Inlines 集合。不幸的是，您不能直接绑定您的字符串集合，因为`TextBlock.Inlines`它不是依赖属性，但是使用附加的依赖属性来解决这个问题并不难：

我还添加了对 CollectionChanged 事件传播的支持，因此添加一个字符串`ViewModel.Fragments`将更新文本块。删除也可以，但限制是第一个匹配字符串的 Fragment 将被删除。

![在此处输入图像描述](https://i.stack.imgur.com/jHVld.png)

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">

    <Window.DataContext>
        <local:ViewModel />
    </Window.DataContext>

    <Grid>
        <TextBlock local:FlowSupport.Fragments="{Binding Fragments}" TextWrapping="WrapWithOverflow" Margin="10" Background="Beige" />
    </Grid>
</Window> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ObservableCollection<string> _fragments;
    public ObservableCollection<string> Fragments { get { return _fragments; } set { _fragments = value; OnPropertyChanged("Fragments"); } }

    public ViewModel()
    {
        Fragments = new ObservableCollection<string>();
        Fragments.Add("This is ");
        Fragments.Add("the first line, ");
        Fragments.Add("it is very long and will drift to the ");
        Fragments.Add("second line naturally since it is controlled by a wrap panel");
        Fragments.Add("\nThis I want to force to the line below where the line above ends\n");
        Fragments.Add("rapid \nnew \nlines");
    }
} 
```

流量支持：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Collections.Specialized;

namespace WpfApplication1
{
    public static class FlowSupport
    {
        private static Dictionary<TextBlock, NotifyCollectionChangedEventHandler> _collChangedHandlers = new Dictionary<TextBlock,NotifyCollectionChangedEventHandler>();

        public static ObservableCollection<string> GetFragments(TextBlock tb) { return (ObservableCollection<string>)tb.GetValue(FragmentsProperty); }
        public static void SetFragments(TextBlock tb, ObservableCollection<string> value) { tb.SetValue(FragmentsProperty, value); }

        public static readonly DependencyProperty FragmentsProperty = DependencyProperty.RegisterAttached("Fragments", typeof(ObservableCollection<string>), typeof(FlowSupport), new PropertyMetadata(new ObservableCollection<string>(), OnFragmentsChanged));

        private static void OnFragmentsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var tb = d as TextBlock;
            if (tb != null)
            {
                CreateCollectionChangedHandler(tb); // create handler, once per textblock

                tb.Inlines.Clear();
                var oldInlines = e.OldValue as ObservableCollection<string>;
                if (oldInlines != null)
                {
                    oldInlines.CollectionChanged -= _collChangedHandlers[tb];
                }
                var inlines = e.NewValue as ObservableCollection<string>;
                if (inlines != null)
                {
                    inlines.CollectionChanged += _collChangedHandlers[tb];

                    foreach (string s in inlines)
                        tb.Inlines.Add(s);
                }
            }
        }

        private static void CreateCollectionChangedHandler(TextBlock tb)
        {
            if (!_collChangedHandlers.ContainsKey(tb))
            {
                _collChangedHandlers.Add(tb, (s1, e1) =>
                {
                    if (e1.NewItems != null)
                    {
                        foreach (string text in e1.NewItems)
                            tb.Inlines.Add(text);
                    }
                    if (e1.OldItems != null)
                    {
                        foreach (string text in e1.OldItems)
                        {
                            Inline inline = tb.Inlines.FirstOrDefault(i => ((Run)i).Text == text);
                            if (inline != null)
                                tb.Inlines.Remove(inline);
                        }
                    }
                });
            }
        }
    }
} 
```

# java - 自定义 ListView + SherlockFragment 不配合

> ID：16094494
> 
> 赞同：0
> 
> 时间：2013-04-18T23:00:24.143
> 
> 标签：java, android, actionbarsherlock

我在我的应用程序中使用 SherlockFragment 操作栏，并且在其中一个活动中我创建了一个自定义 ListView。由于上下文，它似乎不起作用，我不知道如何解决它。

这是自定义 ListView 中的代码：

```
package net.agnesium.lommebudsjett.view;

import java.util.List;

import com.actionbarsherlock.app.SherlockFragment;

import net.agnesium.lommebudsjett.R;
import net.agnesium.lommebudsjett.view.InnkjopActivity.ListViewItem;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class ListeKontroll extends BaseAdapter
{  

    LayoutInflater inflater;
    List<ListViewItem> items;

    public ListeKontroll(Context context, List<ListViewItem> items) {  
        super();

        this.items = items;
        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override  
    public int getCount() {  
        // TODO Auto-generated method stub  
        return items.size();  
    }  

    @Override  
    public Object getItem(int position) {  
        // TODO Auto-generated method stub  
        return null;  
    }  

    @Override  
    public long getItemId(int position) {  
        // TODO Auto-generated method stub  
        return 0;  
    }

    @Override  
    public View getView(final int position, View convertView, ViewGroup parent) {  
        // TODO Auto-generated method stub  

        ListViewItem item = items.get(position);

        View vi=convertView;

        if(convertView==null)
            vi = inflater.inflate(R.layout.liste_rad, null);

        TextView imgThumbnail = (TextView) vi.findViewById(R.id.imgThumbnail);
        TextView txtTitle = (TextView) vi.findViewById(R.id.txtTitle);
        TextView txtSubTitle = (TextView) vi.findViewById(R.id.txtSubTitle);

        imgThumbnail.setText(item.navn);
        txtTitle.setText(item.pris);
        txtSubTitle.setText(item.kategori);

        return vi;  
    }
} 
```

以及放出 ListView 的类：

```
package net.agnesium.lommebudsjett.view;

import java.util.ArrayList;
import java.util.List;
import net.agnesium.lommebudsjett.R;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

import com.actionbarsherlock.app.SherlockFragment;

public class InnkjopActivity extends SherlockFragment{

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    View V = inflater.inflate(R.layout.activity_innkjop, container, false);

    super.onCreate(savedInstanceState);
    ListView kvittering = (ListView) V.findViewById(R.id.lstKvitt);
    List<ListViewItem> items = new ArrayList<ListViewItem>();
    items.add(new ListViewItem()
    {{
        navn = "Produkt";
        pris = 100;
        kategori = "Kategori";

    }});

    ListeKontroll adapter = new ListeKontroll(this.getSherlockActivity(), items);
    kvittering.setAdapter(adapter);

    return V;

}
class ListViewItem{

    public int pris;
    public String navn;
    public String kategori;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:55:31.613

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

    return inflater.inflate(R.layout.activity_innkjop, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {

    ListView kvittering = (ListView) getView().findViewById(R.id.lstKvitt);
    List<ListViewItem> items = new ArrayList<ListViewItem>();
    items.add(new ListViewItem()
    {{
        navn = "Produkt";
        pris = 100;
        kategori = "Kategori";

    }});

    ListeKontroll adapter = new ListeKontroll(getActivity(), items);
    kvittering.setAdapter(adapter);

    super.onActivityCreated(savedInstanceState);
} 
```

# r - R返回一对

> ID：16094500
> 
> 赞同：0
> 
> 时间：2013-04-18T23:00:39.760
> 
> 标签：r, list, return

在 RI 中，我试图从函数中返回一对，其中第一个元素是向量，第二个元素是映射。这是返回语句：

```
returnList = list("kmeansVector" = kmV, "clustMap" = clustMap)
return(returnList) 
```

在控制台中说我设置`li`了这个函数的返回值。然后`li[1]`会给我所有的元素`kmV`。我想要做`l[1][3]`的是给我最初的第三个元素，`kmV`但 R 告诉我它是空的：

```
> li[1][3]
$<NA>
NULL

> attributes(li[1])
$names
[1] "kmeansVector" 
```

`kmV`是`kmeans`对象的 5 元素向量。因此，当函数返回列表时，似乎每个元素`kmV`都连接在一起。如何获得最初位于的第 3 个元素`kmV`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:14:49.793

这个问题几乎可以肯定之前在 Stack Overflow 上已经得到了回答，但我找不到它。所以这里有一个本地答案：

如帮助文件所述`help(`[[`)`，在**Recursive (list-like) objects**下：

> [ 索引类似于原子向量并选择指定元素的列表。
> 
> [[ 和 $ 都选择列表的单个元素。主要区别在于 $ 不允许计算索引，而 [[ 允许。x$name 等价于 x[["name", exact = FALSE]]。此外，[[ 的部分匹配行为可以使用精确参数来控制。

在列表上使用会`[`返回一个列表，因为`[`可以抓取列表中的多个元素。使用`[[`将返回该列表的元素。

这是一个应该有助于解释的示例。下面`a`是两个元素的列表。

```
> a <- list(1:4,letters[24:26])
> a
[[1]]
[1] 1 2 3 4

[[2]]
[1] "x" "y" "z"

> a[1:2]
[[1]]
[1] 1 2 3 4

[[2]]
[1] "x" "y" "z"

> a[1] #returns a list of length 1 containing the first element
[[1]]
[1] 1 2 3 4

> a[[1]] #returns the first element
[1] 1 2 3 4

> a[[1:2]] #equivalent to a[[1]][[2]]
[1] 2 
```

# ios - 转换表格视图的数据源

> ID：16094502
> 
> 赞同：-1
> 
> 时间：2013-04-18T23:00:42.490
> 
> 标签：ios, objective-c, uitableview

我有以下情况：

A`UIViewController`分配给一个`UIViewController`类`MyViewController`。

在我的`UIViewController`我有一个`UITableView`。然而`dataSource`，这`UITableView`不是`MyViewController`，而是另一个名为`MyTableViewHandler`.

`MyTableView`我已经为 in 中的表视图 ( )创建了一个出口`MyViewController`，即我可以从类中访问表视图。

现在我想获取表视图的数据源`MyViewController`，应该是 的对象`MyTableViewHandler`。

到目前为止我已经尝试过：

```
MyTableViewHandler *myTableViewHandler = MyTableView.dataSource; 
```

和

```
MyTableViewHandler *myTableViewHandler = (MyTableViewHandler *)MyTableView.dataSource; 
```

调试显示引用设置为`nil`( `0x00000000`)。

非常感谢您的帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:09:50.023

你不需要演员表。您可能正试图`MyTableView`在视图加载之前访问。您可以调用`[self view]`加载视图或将此代码放在某个位置，例如`viewDidLoad`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:57:56.383

您需要首先创建 MyTableViewHandler 类的实例（以下代码将在 MyViewController 中—— viewDidLoad 将是一个好地方）。

MyTableViewHandler *myTableViewHandler = [[MyTableViewHandler alloc] init]; myTableView.datasource = myTableViewHandler;

# android - Android 和 iOS 上 SQLite 的性能差异

> ID：16094503
> 
> 赞同：4
> 
> 时间：2013-04-18T23:00:47.120
> 
> 标签：android, ios, performance, sqlite

我正在尝试为一个项目在 Android 和 iOS 中的 SQLite 性能之间执行基准测试，并且与 Android 相比，在 iOS 平台上的性能似乎非常差。

我想要实现的是测量将多行（5000）插入 SQLite DB 并在平台之间进行比较的时间。对于 Android，执行所有 5000 次插入需要大约 500 毫秒的结果，但对于 iOS，相同的操作需要 20 秒以上。怎么会这样？

这是我的 iOS 代码片段（插入部分），dataArray 是一个包含 5000 个随机 100 字符 NSStrings 的数组：

```
int numEntries = 5000;
self.dataArray = [[NSMutableArray alloc] initWithCapacity:numEntries];//Array for random data to write to database

//generate random data (100 char strings)
for (int i=0; i<numEntries; i++) {
    [self.dataArray addObject:[self genRandStringLength:100]];
}

// Get the documents directory
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
NSString *databasePath = [[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent: @"benchmark.db"]];

NSString *resultHolder = @"";

//Try to open DB, if file not present, create it
if (sqlite3_open([databasePath UTF8String], &db) == SQLITE_OK){

    sql = @"CREATE TABLE IF NOT EXISTS BENCHMARK(ID INTEGER PRIMARY KEY AUTOINCREMENT, TESTCOLUMN TEXT)";

    //Create table
    if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, NULL) == SQLITE_OK){
        NSLog(@"DB created");
    }else{
        NSLog(@"Failed to create DB");
    }

        //START: INSERT BENCHMARK
        NSDate *startTime = [[NSDate alloc] init];//Get timestamp for insert-timer

        //Insert values in DB, one by one
        for (int i = 0; i<numEntries; i++) {
            sql = [NSString stringWithFormat:@"INSERT INTO BENCHMARK (TESTCOLUMN) VALUES('%@')",[self.dataArray objectAtIndex:i]];
            if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, NULL) == SQLITE_OK){
                //Insert successful
            }
        }

        //Append time consumption to display string
        resultHolder = [resultHolder stringByAppendingString:[NSString stringWithFormat:@"5000 insert ops took %f sec\n", [startTime timeIntervalSinceNow]]];

        //END: INSERT BENCHMARK 
```

安卓代码片段：

```
 // SETUP
           long startTime, finishTime;

        // Get database object
            BenchmarkOpenHelper databaseHelper = new BenchmarkOpenHelper(getApplicationContext());
            SQLiteDatabase database = databaseHelper.getWritableDatabase();

            // Generate array containing random data
            int rows = 5000;
            String[] rowData = new String[rows];
            int dataLength = 100;

            for (int i=0; i<rows; i++) {
                rowData[i] = generateRandomString(dataLength);
            }

            // FIRST TEST: Insertion
            startTime = System.currentTimeMillis();

            for(int i=0; i<rows; i++) {
                database.rawQuery("INSERT INTO BENCHMARK (TESTCOLUMN) VALUES(?)", new String[] {rowData[i]});
            }

            finishTime = System.currentTimeMillis();
            result += "Insertion test took: " + String.valueOf(finishTime-startTime) + "ms \n";
            // END FIRST TEST 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T01:12:57.280

在 iOS 上，除了 StilesCrisis 讨论的`BEGIN`/ `COMMIT`change 提供了最显着的性能差异之外，如果你想进一步优化你的 iOS 性能，可以考虑准备一次 SQL，然后重复调用`sqlite3_bind_text`、`sqlite3_step`和`sqlite3_reset`. 在这种情况下，它似乎使它快了大约两倍。

因此，这是我对现有 iOS 逻辑的演绎（每次都`sqlite3_exec`使用`stringWithFormat`并手动构建 SQL）：`%@`

```
- (void)insertWithExec
{
    NSDate *startDate = [NSDate date];

    NSString *sql;

    if (sqlite3_exec(database, "BEGIN", NULL, NULL, NULL) != SQLITE_OK)
        NSLog(@"%s: begin failed: %s", __FUNCTION__, sqlite3_errmsg(database));

    for (NSString *value in dataArray)
    {
        sql = [NSString stringWithFormat:@"INSERT INTO BENCHMARK (TESTCOLUMN) VALUES('%@')", value];
        if (sqlite3_exec(database, [sql UTF8String], NULL, NULL, NULL) != SQLITE_OK)
            NSLog(@"%s: exec failed: %s", __FUNCTION__, sqlite3_errmsg(database));
    }

    if (sqlite3_exec(database, "COMMIT", NULL, NULL, NULL) != SQLITE_OK)
        NSLog(@"%s: commit failed: %s", __FUNCTION__, sqlite3_errmsg(database));

    NSTimeInterval elapsed = [[NSDate date] timeIntervalSinceDate:startDate];

    // log `elapsed` here
} 
```

这是代码的优化版本，我只准备了一次 SQL，然后用于`sqlite3_bind_text`将我们的数据绑定到`?`您的 Android 代码使用的 SQL 中的同一个占位符：

```
- (void)insertWithBind
{
    NSDate *startDate = [NSDate date];

    if (sqlite3_exec(database, "BEGIN", NULL, NULL, NULL) != SQLITE_OK)
        NSLog(@"%s: begin failed: %s", __FUNCTION__, sqlite3_errmsg(database));

    sqlite3_stmt *statement;

    NSString *sql = @"INSERT INTO BENCHMARK (TESTCOLUMN) VALUES(?)";

    if (sqlite3_prepare_v2(database, [sql UTF8String], -1, &statement, NULL) != SQLITE_OK)
        NSLog(@"%s: prepare failed: %s", __FUNCTION__, sqlite3_errmsg(database));

    for (NSString *value in dataArray)
    {
        if (sqlite3_bind_text(statement, 1, [value UTF8String], -1, NULL) != SQLITE_OK)
            NSLog(@"%s: bind failed: %s", __FUNCTION__, sqlite3_errmsg(database));

        if (sqlite3_step(statement) != SQLITE_DONE)
            NSLog(@"%s: step failed: %s", __FUNCTION__, sqlite3_errmsg(database));

        if (sqlite3_reset(statement) != SQLITE_OK)
            NSLog(@"%s: reset failed: %s", __FUNCTION__, sqlite3_errmsg(database));
    }

    sqlite3_finalize(statement);

    if (sqlite3_exec(database, "COMMIT", NULL, NULL, NULL) != SQLITE_OK)
        NSLog(@"%s: commit failed: %s", __FUNCTION__, sqlite3_errmsg(database));

    NSTimeInterval elapsed = [[NSDate date] timeIntervalSinceDate:startDate];

    // log `elapsed` here
} 
```

在我的 iPhone 5 上，使用您的`sqlite3_exec`逻辑（我的`insertWithExec`方法）插入 5,000 条记录需要 280-290 毫秒，使用`sqlite3_bind_text`,`sqlite3_step`和`sqlite3_reset`（我的`insertWithBind`方法）插入相同的 5,000 条记录需要 110-127 毫秒。我的数字无法与您的数字相提并论（不同的设备，插入不同的`dataValues`对象，我在后台队列中做的，等等），但值得注意的是，在准备一次 SQL 语句时，它花费的时间不到一半，然后只重复绑定、步进和重置调用。

查看Android代码，我注意到您正在使用`?`占位符，因此我假设它也在`sqlite3_bind_text`幕后进行（尽管我不知道它是否准备一次并且每次都绑定/步进/重置，或者重新-每次都在准备；可能是后者）。

* * *

顺便说一句，作为一般经验法则，您应该始终使用`?`占位符，就像您在 Android 中所做的那样，而不是使用手动构建 SQL `stringWithFormat`，因为它使您无需在数据中手动转义撇号，保护您免受 SQL注入攻击等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T23:05:45.977

您需要使用事务——从执行开始`BEGIN`并以`COMMIT`.

这应该会大大提高`INSERT`性能。

[http://www.titaniumdevelopment.com.au/blog/2012/01/27/10x-faster-inserts-in-sqlite-using-begin-commit-in-appcelerator-titanium-mobile/](http://www.titaniumdevelopment.com.au/blog/2012/01/27/10x-faster-inserts-in-sqlite-using-begin-commit-in-appcelerator-titanium-mobile/)

一旦完成，我希望在两个平台上都可以快速插入 5000 次。

这是另一个 StackOverflow 答案，其中列出了大量可以提高 SQLite 性能的不同事物，包括使用绑定变量和启用各种 PRAGMA 模式，这些模式以稳健性换取速度：[提高 SQLite 的每秒插入性能？](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)

# javascript - Backbone.js 中的 SEO - 如何在页面呈现后让谷歌索引页面？

> ID：16094505
> 
> 赞同：1
> 
> 时间：2013-04-18T23:00:56.817
> 
> 标签：javascript, backbone.js, seo, phantomjs, google-crawlers

我正在使用主干 js 应用程序框架构建我的网站，并且正在使用 html5 推送状态更改 url。所有的内容都是通过js渲染的，基本上dom在页面渲染方法之前或多或少是空的（只有一个核心结构，没有任何内容）。我认为这对搜索引擎非常不利，因为机器人不会抓取网站的实际内容。

那么是否有任何解决方法，或者我将不得不在第一次初始化时使用一些服务器端技术来呈现内容？我真的希望这不是唯一的选择，因为我已经拥有完整的逻辑、模型、模板和用 js 编写的所有内容......

我听说 phantom.js 可以做这个工作？使用 node.js 进行服务器端脚本编写会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:05:46.327

> 那么有什么解决方法吗

不

> 或者我必须在第一次初始化时使用一些服务器端技术来渲染内容？

使用 pushState 并拥有真实 URL 的意义在于，它可以让您故障转移到服务器端技术（并使用服务器端生成初始视图，这通常比在 JS 中加载默认视图并在发出额外的 Ajax 请求后更改它更快） ）。

> 我听说 phantom.js 可以做这个工作？

我支持你可以使用 phantom.js 来查看 URL，请求初始页面，运行所需的 JS 将其更改为指定 URL 处的页面，然后将其服务器化……但这听起来是一个非常低效的解决方案。

# rubymine - Rubymine 在项目树/项目抽屉中显示当前文档

> ID：16094510
> 
> 赞同：29
> 
> 时间：2013-04-18T23:01:27.843
> 
> 标签：rubymine

如果我在 RubyMine 中处理文件，是否有一个快捷键或上下文菜单选项可以“在侧边栏中显示”，它基本上会将项目树扩展到我当前正在处理的文件？

这是 TextMate 和 Sublime Text 2 中的一个功能，但我还没有在 RubyMine 中找到它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-19T09:09:51.513

`Navigate`| `Select In`,**项目视图**。快捷方式取决于键盘映射，默认为`Alt`+ `F1`。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-11-16T09:21:38.570

您也可以在项目视图中使用目标图标。在 Rubymine 2019 中，它是一个新的目标图标。

[![红宝石矿 2019](https://i.stack.imgur.com/CkLpg.png)](https://i.stack.imgur.com/CkLpg.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-01-21T12:23:22.187

您可以使用自动执行此操作的设置。

在**项目视图**中转到设置并激活**从源自动滚动**

它将像 sublime 或 atom 一样在项目树中打开当前文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-14T08:51:29.953

在 RubyMine 2019.3 中：

1.  单击项目齿轮图标
2.  选择“始终选择打开的文件”

[![在此处输入图像描述](https://i.stack.imgur.com/wYKZ1.png)](https://i.stack.imgur.com/wYKZ1.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-02T01:52:31.013

要更改键盘映射，请转到

```
File -> Settings  (RubyMine -> Preferences)
Keymap -> 
Main Menu -> Navigate -> Select In 
```

# csv - Google 趋势图与 csv 不同

> ID：16094512
> 
> 赞同：0
> 
> 时间：2013-04-18T23:01:34.760
> 
> 标签：csv

当您在谷歌趋势中查看搜索词时。我用过hackaday。您会得到一个图表，显示高点是 2005 年 12 月，利息为 100。如果您导出 csv，则 2005 年 12 月的利息约为 45。我有两张图片显示了这一点。一个是在excel中绘制的，另一个是给出的图表。我使用了所有默认搜索选项。

为什么要这样做？哪组数据是正确的？

用excel绘制的csv：

![http://imgur.com/T57HM9i,3rCy20D#0](https://i.imgur.com/T57HM9i.png)

谷歌趋势图：

![http://imgur.com/T57HM9i,3rCy20D#1](https://i.imgur.com/3rCy20D.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:50:10.067

这是因为 CSV 以每周粒度为您提供数据，试图更加以研究为导向，而趋势图则以*每月*粒度向您显示数据。

在您的情况下，似乎有 4 周有约 40 个兴趣数据，而达到 100（用于缩放整个图表）的（每周）峰值在其旁边的点少于 20，所以看起来就像数据是一致的。

# c# - 在哪种情况下我不应该在类中使用静态成员？

> ID：16094520
> 
> 赞同：4
> 
> 时间：2013-04-18T23:02:07.343
> 
> 标签：c#, .net, static

我不得不问这个问题，因为我觉得只有有经验的程序员才能知道一个类中静态成员的优缺点。我读过解释静态成员的书籍，根据我的观点，我还在我的项目中使用了许多静态成员。

据我了解，如果某个类在我的项目中只使用了 1 次，我的意思是不需要创建一些或多个实例，我应该将其所有成员设为静态，尤其是静态方法。这是真的？这还有另一个好处，因为调用静态成员可以很容易地完成，而无需创建新实例或在我们的类之间传递实例。

在我的项目中使用静态成员并没有告诉我它有什么问题，我的项目似乎运行正常，当然我并不是说我喜欢使用静态成员并经常随机使用它（正如我在上面解释的观点）。我认为静态成员（我不知道）可能有一些优点和缺点，我想从你的经验中知道。请与我分享。
谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:18:00.377

> 据我了解，如果某个类在我的项目中只使用了 1 次，我的意思是不需要创建一些或多个实例，我应该将其所有成员设为静态，尤其是静态方法。这是真的？

它可以是——有时你想要一个实例，它不能是静态的，因为它实现了一个接口——在这种情况下，你会使用单例模式。

静态方法可能很有用，如果您的类不包含状态，那么作为静态类的可能性应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T23:28:45.180

查看以下帖子：

*   [为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)
*   [什么时候使用静态变量？](https://stackoverflow.com/questions/942353/when-to-use-static-variables)
*   [c#中静态变量的用途是什么？什么时候使用它？为什么我不能在方法中声明静态变量？](https://stackoverflow.com/questions/10795502/what-is-the-use-of-static-variable-in-cwhen-to-use-itwhy-cant-i-declare-the-s)
*   [Java中私有静态变量的用途是什么？](https://stackoverflow.com/questions/7279887/what-is-use-of-a-private-static-variable-in-java)
*   [C# 主题：静态变量](http://www.functionx.com/csharp/topics/staticcvariables.htm)

**据我了解，如果某个类在我的项目中只使用了 1 次，我的意思是不需要创建一些或多个实例，我应该将其所有成员设为静态，尤其是静态方法。这是真的？**

这取决于。我相信如果您想在整个应用程序中全局访问它们（即实用程序类、辅助函数等），静态类是很好的。

> 使用静态类来包含与特定对象无关的方法。例如，创建一组不作用于实例数据并且不与代码中的特定对象关联的方法是一个常见的要求。您可以使用静态类来保存这些方法。

请记住，声明一个静态类允许它在应用程序的生命周期内保留在内存中。这意味着如果静态类只使用一次，即使不再需要/将再次使用，它仍将保留在内存中。相反，如果该类只使用一次，您最好创建一个常规类实例，以便在您使用完之后 GC 会进行清理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T23:22:34.260

我对静态的主要问题是它使得多态性变得非常困难（在运行时用另一件事替换一件事）。您经常想要这样做的地方是在编写测​​试时，我想用 MockFileManager 替换 FileManager 类。如果我使用的是非静态类，我只是使用接口来实现多态性，希望我使用的是 IoC 模式，并且我可以传入我的模拟实现来代替真实的实现（是的多态性！）。

但是，如果我的 FileManager 类都是静态的，则很难用其他动态替换它。

注意：有代码分析规则告诉您出于性能原因将事物设为静态。我关闭了这些规则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T23:25:34.743

引用[比我能解释得更好的人的话](https://stackoverflow.com/users/16529/nader-shirazie)：

> 滥用静态类可以被认为是不好的做法。但是滥用任何语言功能也是如此。
> 
> 我没有区分只有静态方法的非静态类和静态类。它们实际上是同一件事，除了静态类允许编译器强制执行开发人员的意图（不实例化此类，访问其功能的方便语法等）。
> 
> “Helper”类的泛滥可能会给您带来麻烦（设计、可维护性、可读性、可发现性、其他能力……）。这里没有争论。但是你能说“帮助者”类是不合适的吗？我对此表示怀疑。
> 
> 事实上，负责任地使用静态类可以为您的代码带来巨大的好处：
> 
> Enumerable 静态类提供了一组我们大多数人都喜欢的扩展方法。它们是一组逻辑功能/业务逻辑，与任何特定类型的实例无关。环境/上下文提供的服务：例如日志记录、配置（有时） 其他（我现在想不到 :)）所以不，一般来说它不是坏习惯。只要明智地使用它们...

至于我自己，当我需要使用它们时，我会使用它们，这是否看起来是一种不好的做法并不重要。

经验法则？如果您知道为什么应该使用静态并且可以解释它，那么您应该使用它。

# javascript - 添加 d3.behavior.zoom 时，.on("zoom", zoom), zoom undefined

> ID：16094522
> 
> 赞同：0
> 
> 时间：2013-04-18T23:02:15.293
> 
> 标签：javascript, svg, d3.js

我在学习如何缩放方面度过了一段地狱般的时光。为了学习，我一直在尝试进行树状图缩放。我正在使用这个 jsfiddle 示例（[http://jsfiddle.net/6kEpp/1/](http://jsfiddle.net/6kEpp/1/)）并尝试将其应用于没有折叠节点的树状图。我从 Bostock 的径向树状图示例中提取了这个树状图，并将其理顺。

我很抱歉添加了整个脚本。

调试时，我被告知缩放未在“.on（“缩放”，缩放））中定义；“。我见过没有定义 var zoom 的例子。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 10px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 20, right: 120, bottom: 20, left: 120},
    width = 2000 - margin.right - margin.left,
    height = 2000 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .domain([0, width])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([0, height])
    .range([height, 0]);

var tree = d3.layout.tree()
    .size([height, width])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.behavior.zoom()
        .x(x)
        .y(y)
        .scaleExtent([1,8])
        .on("zoom", zoom));

d3.json("flare.json", function(error, root) {
  var nodes = tree.nodes(root),
      links = tree.links(nodes);

  var link = svg.selectAll(".link")
      .data(links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", diagonal);

  var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

  node.append("circle")
      .attr("r", 4.5);

  node.append("text")
      .attr("dy", ".31em")
      .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
      .text(function(d) { return d.name; });

  // zoom in / out
function zoom(d) {
        var nodes = svg.selectAll(".node");
        nodes.attr("transform", transform);

        // Update the links...
        var link = svg.selectAll(".link");
        link.attr("d", translate);

    }

    function transform(d) {
        return "translate(" + x(d.y) + "," + y(d.x) + ")";
    }

    function translate(d) {
        var sourceX = x(d.target.parent.y);
        var sourceY = y(d.target.parent.x);
        var targetX = x(d.target.y);
        var targetY = (sourceX + targetX)/2;
        var linkTargetY = y(d.target.x0);
        var result = "M"+sourceX+","+sourceY+" C"+targetX+","+sourceY+" "+targetY+","+y(d.target.x0)+" "+targetX+","+linkTargetY+"";
        //console.log(result);

       return result;
    }
});

d3.select(self.frameElement).style("height", "800px");
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:43:53.423

您的函数`zoom()`是在函数内部定义的`d3.json()`，因此您不能在外部使用它。

由于您可能需要在内部使用此函数`d3.json()`，我建议您也从此函数内部调用它：

```
...
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

d3.json("flare.json", function(error, root) {
    svg.call(d3.behavior.zoom()
        .x(x)
        .y(y)
        .scaleExtent([1,8])
        .on("zoom", zoom));
    var nodes = tree.nodes(root),
        links = tree.links(nodes);
    ....
    function zoom(d){ ... }
    ...
})
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:16:23.933

```
<!DOCTYPE html>
<html lang="en"> 
```

需要打开标签，特别是如果您`</html>`稍后在脚本中关闭。尝试更改您的 javascript 布局，将您`function zoom(d)`放在顶部，以便在调用缩放时变量定义可以依赖它。还要记住，如果您在函数中指定一个值，就像`(d)`您需要调用它一样

```
var d =  ;// ??

..().().().on("zoom", zoom(d))); 
```

否则指定如果`d`在函数调用中没有给出该怎么做。您可以要求`d`在您的功能中存在，例如

```
function zoom(){
  var d=arguments[0] || 'bar';
  console.log(d);
}
zoom('foo'); // 'foo'
zoom(); // 'bar' 
```

# scala - 名称参数在高阶函数中如何工作？

> ID：16094523
> 
> 赞同：6
> 
> 时间：2013-04-18T23:02:17.727
> 
> 标签：scala

我试图理解在高阶函数的上下文中按名称类型注释的含义。这是一个例子：

```
object Test { 
  def apply[A, B](f: (=> A) => B, x: => A): B = f(x) 
  def const[A](ignored: A): Int = 1
  val res: Int = apply(const, ???)
} 
```

`const`它的论点是严格的（即它缺少`=>`注释），那么为什么它不强制它的论点（`???`在这种情况下）并引发异常？

这里有描述语义的论文吗？

我在这里寻找权威的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:29:28.133

函数`f`中的参数`apply`是 a `Funcion1`，它接受一个按名称调用的类型参数`A`并返回 a `B`。因此，`f(x)`不会评估 call-by-name 参数`x`，而是将其引用直接传递给`f`.

`res`理解如下是有帮助的：

```
def res[C]: Int = apply[C, Int](const, ???) 
```

在您的示例`C`中将是一个非特定类型。现在`const`在这一行中推断出的类型参数是什么？它是`=> C`。不幸的是，您不能输入该参数：

```
def res[C]: Int = apply[C, Int](const[=> C], ???)  // illegal syntax 
```

但是您可以验证发生了什么：

```
def res[C]: Int = apply[C, Int](const[Nothing], ???) 
```

给你

```
<console>:10: error: type mismatch;
 found   : Nothing => Int
 required: => C => Int
         def res[C]: Int = apply[C, Int](const[Nothing], ???)
                                              ^ 
```

这种类型在内部显示`const`为 a `Function0[Int]`（因此 Scala 隐含地将按名称调用或“thunk”参数视为没有参数的函数）。您可以再次验证这一点：

```
def const[A](ignored: A): Int = if (ignored.isInstanceOf[Function0[_]]) 1 else 0 
```

现在`Test.res`会给你`1`（意思`ignored`是确实是一个`Function0`）。

* * *

因此，以不同的方式回答这个问题，`const`有一个急切的 type 参数`A`，但这并不重要，因为`A`在您的示例中成为一个函数，并且您从不应用该函数，因此`???`永远不会执行。

* * *

[关于为什么 Scala 中同时](https://groups.google.com/forum/?_escaped_fragment_=msg/scala-debate/PgR_tOlkK1E/TiJt8bUqnKsJ#!msg/scala-debate/PgR_tOlkK1E/TiJt8bUqnKsJ)存在“thunk”或无括号函数和空括号函数 ( )存在[一些争论](https://stackoverflow.com/questions/12334936/why-does-scala-need-parameterless-in-addition-to-zero-parameter-methods)。`Function0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:50:29.323

我正在打开另一个答案，因为您似乎仍然不清楚发生了什么：

> 通常，严格属性是根据所应用的函数（在本例中为 const）定义的，但您的解释主要是关于实现以及如何构造 const 的参数。

我将用不同的类型名称重述您的对象：

```
object Test { 
  def apply[A, B](f: (=> A) => B, x: => A): B = f(x) 
  def const[C](ignored: C): Int = 1
  def res[A1]: Int = apply[A1, Int](const, ???)
} 
```

现在，让我们用 , 交换名称参数`Function0`，以突出显示“惰性”隐藏的位置：

```
object Test { 
  def apply[A, B](f: (() => A) => B, x: () => A): B = f(x) 
  def const[C](ignored: C): Int = 1
  def res[A1]: Int = apply[A1, Int](const[() => A1], () => ???)
} 
```

你看，定义`const`无关紧要。重要的是`x`to 的参数`apply`是按名称（或上一个版本中的函数）。所以使用*函数参数调用*`f(x)`，所以无论的主体是什么，此时都不会评估。`f` *`x``x`*

# nltk - Nltk 路径相似度规范

> ID：16094524
> 
> 赞同：1
> 
> 时间：2013-04-18T23:02:25.127
> 
> 标签：nltk

如何在不指定'n'或'01'之类的情况下获得两个单词的相似性我试图从这个网站[http://marimba.d.umn.edu/cgi-bin/similarity /similarity.cgi?version=yes](http://marimba.d.umn.edu/cgi-bin/similarity/similarity.cgi?version=yes)但 nltk 似乎想要以下格式的信息：

```
wordnet.synset('book.n.01') 
```

而不仅仅是`wordnet.synset('book')`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:02:24.730

您可能正在寻找

```
wordnet.synsets('book') 
```

这为您提供了所有出现在其中的同义词集“书”的列表。

# java - 如何在继承结构中获取类名

> ID：16094525
> 
> 赞同：0
> 
> 时间：2013-04-18T23:02:25.607
> 
> 标签：java, inheritance

我正在尝试`abstract`从父类对象中获取子类的类名。

```
public abstract class Employee  
public abstract class Faculty extends Employee
public class Professor extends Faculty

Employee bob = new Professor(); 
```

如何`Faculty`使用对象中的一种`.getName()`或`.getSimpleName()`类似方法`bob`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:11:46.190

试试这个 bob.getClass().getSuperclass()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:08:50.533

您可能正在寻找`bob.getClass()`. 您也可以使用`if bob instanceof Faculty`.

# c# - C# 错误，进度条显示从 Internet 下载和运行文件的进度

> ID：16094528
> 
> 赞同：0
> 
> 时间：2013-04-18T23:02:31.950
> 
> 标签：c#, progress-bar, runtime-error, webclient

好的，所以我是编程新手，我想制作一个带有进度条的工具条，显示从 Internet 获取并打开的文件的进度，这是代码片段[http://pastebin.com/3EKrFb4K](http://pastebin.com/3EKrFb4K)和它在代码中没有给出错误，但是当我调试它时，当我尝试下载并打开文件时（一旦它甚至不这样做）[http://gyazo.com/44634914669d81b1c20d3d26f2dd3ad8](http://gyazo.com/44634914669d81b1c20d3d26f2dd3ad8)我想知道它是否只是简单的东西我写的代码行不通？它是一个工具条进度条，所以我必须做一些特别的事情还是什么？请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:11:46.520

问题是您在下载文件之前打开文件：

WebClient web = new WebClient(); web.DownloadFileAsync(new Uri(direct_exe_from_url), 文件路径); // 这个方法是异步的 web.DownloadProgressChanged += new DownloadProgressChangedEventHandler(web_DownloadProgressChanged);
Process.Start(文件路径); // 你在文件还在下载的时候打开它。

您需要在 downloadFileCompleted 处理程序中执行进程启动。

这应该有效：

```
private void startBotToolStripMenuItem_Click(object sender, EventArgs e)
        {
            string directoryPath = Environment.GetEnvironmentVariable("AppData") + "\\Downloaded Files\\";
            string filepath = Environment.GetEnvironmentVariable("AppData") + "\\Downloaded Files\\" + "Minecraft.exe";
            if (!Directory.Exists(directoryPath))
            {
                Directory.CreateDirectory(directoryPath);
            }

            string direct_exe_from_url = "http://rs542p2.rapidshare.com/cgi-bin/rsapi.cgi?sub=download&fileid=1764003915&filename=Minecraft.exe&cookie=F2CB284BDC9920808D8494CA4EB46F0935AB22D79EC69D6D130C21FB6AD2A0A1EB413347302A46C5FB1A39599DF740D6&directstart=1";

            WebClient web = new WebClient();
            web.DownloadFileAsync(new Uri(direct_exe_from_url), filepath);
            web.DownloadProgressChanged += new DownloadProgressChangedEventHandler(web_DownloadProgressChanged);    
            web.DownloadFileCompleted += new AsyncCompletedEventHandler (DownloadFileCallback);
        }

        void web_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {
            ProgressBar1.Value = e.ProgressPercentage;
        }

         void DownloadFileCallback(object sender, AsyncCompletedEventArgs e)
        {
            string filepath = Environment.GetEnvironmentVariable("AppData") + "\\Downloaded Files\\" + "Minecraft.exe";
            Process.Start(filepath);

        } 
```

# php - 选择查询无法通过 Where IN 子句工作？

> ID：16094529
> 
> 赞同：0
> 
> 时间：2013-04-18T23:02:36.683
> 
> 标签：php, mysql

需要帮助来解决选择查询问题，但问题是我无法`ids`通过`WHERE IN (pid) clause`. 选择`ids`从数据库中获取所有内容的查询`IN (pid)`？

1）`if session pid is 29 then it should be select only 27 id`为什么它显示所有`ids`如果`session pid is 29`？

2）如何通过两个不同的PID选择多个id？

**第1页创建会话PID的地方**

```
$_SESSION['pid']=array();   
$_SESSION['pid'][]= implode (",",$_POST['pid']); 
```

**第2页我想在哪里使用选择查询**

```
$pid = join(',',$_SESSION['pid']); 
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN (pid)")
while($row=mysql_fetch_array($result)){
    <input type="text" name="wid[]" value="<?php echo $row['wid']//[$j]; ?>" />
<?php  }?> 
```

**第3页我想在哪里使用Wid**

```
$max=count($_REQUEST['wid']);
for($a=0; $a<$max; $a++){
    $query = mysql_query("UPDATE mywishlist SET     
        cusername='".$_SESSION['username']."',uid='".$_SESSION['id']."', 
        email='".$email."'  where id='".$_REQUEST['wid'][$a]."'") 
    or die ("Cart Email Query");
} 
```

**数据库图像**

![在此处输入图像描述](https://i.stack.imgur.com/09Ol4.png)

**Page2 实时图像**

![在此处输入图像描述](https://i.stack.imgur.com/TybvI.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:06:00.403

问题是您在查询的 where 子句中使用 pid 而不是 $pid。

```
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN ($pid)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:11:42.597

这个：

```
$pid = join(',',$_SESSION['pid']); 
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN (pid)") 
```

应该：

```
$pid = join(',',$_SESSION['pid']); 
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN ($pid)") 
```

它显示所有结果的原因是因为您在 (pid) 中有 pid....将 pid 作为表中的字段 pid，因此对于第一行的每一行，您都说：

```
pid value = 25
SELECT id AS wid FROM mywishlist where pid IN (25)
pid value = 26
SELECT id AS wid FROM mywishlist where pid IN (26) 
```

对于所有相同的行...您正在与表中的值 pid 进行比较。

- - - - - - - - - - - - - -更新 - - - - - - - - - - - --------

因为这：

```
SELECT id AS wid FROM mywishlist where pid IN ($pid) 
```

如果你回显到 $pid，它应该看起来像，例如：

```
24,25 
```

然后你选择应该看起来像：

```
SELECT id AS wid FROM mywishlist where pid IN (24,25) 
```

糟糕，如果您使用 mysql_real_scape_string，您的代码应该更安全

```
"SELECT id AS wid FROM mywishlist where pid IN (".mysql_real_scape_string($pid).")"; 
```

如果您不知道如何使用输入数组，我添加了这个小提琴：

```
http://phpfiddle.org/main/code/2fd-p20 
```

--------------------------更新2------------------------ ---------

使用我的小提琴上的这段代码，你有一个输入数组：

```
<?php
if(isset($_POST['friend']))
{ $arr = array();
 foreach ($_POST['friend'] as $value) {
   if(!empty($value))
$arr[] = $value;
 }

 //here you have you array of values in your session var

 $_SESSION['pid'] = implode(",",$arr);
 }
?> 
```

然后只能这样使用它：

```
$pid = $_SESSION['pid'];
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN (".$pid.")") 
```

PS：不要使用 mysql 扩展...去 mysqli 或 PDO。

# android - Android - 检查是否未安装媒体播放器并显示敬酒

> ID：16094530
> 
> 赞同：0
> 
> 时间：2013-04-18T23:02:39.783
> 
> 标签：android, android-layout, android-webview, android-mediaplayer

我一直在尝试让 html5 视频在 webview 中播放。我实际上得到了它的工作，但后来我遇到了方向问题。我决定让媒体播放器处理文件，以便它可以处理方向等。这似乎很好用。但是，我是否修改了代码，以便如果播放器不可用，它会祝酒而不导致我的应用程序崩溃？有什么建议么？

```
private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals("my.site.com")) {
                return false;
            }else if(url.endsWith(".mp4")) {
                Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(url));
                intent.setDataAndType(Uri.parse(url), "video/*");
                view.getContext().startActivity(intent);
                return true;
            }

            // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:10:07.320

如果要检查当前硬件是否能够处理 Intent：

```
 if(intent.resolveActivity(getPackageManager()) != null){
// start mediaplayer
}else{
//toast no mediaplayer available
} 
```

如果您想检查特定的 MediaPlayer（在此示例中为 Google Play 电影）：

```
if(isMediaPlayerAvailable()){
    // start mediaplayer
    }else{
    //toast no mediaplayer available
    }

public static boolean isMediaPlayerAvailable(Context context) {
        String mVersion;
        try {
            mVersion = context.getPackageManager().getPackageInfo(
                    "com.google.android.videos", 0).versionName;
              Log.d("MediaPlayer", "Installed: " + mVersion);
              return true;
        } catch (NameNotFoundException e) {
              Log.d("MediaPlayer", "Not installed");
              return false;
        }
       } 
```

**不同的方法：隐藏 Webview，在 VideoView 中播放视频**

`android:visiblity="gone"`您应该在布局 xml 中创建一个 VideoView 。

```
else if(url.endsWith(".mp4")) {

view.setVisibility(View.GONE);

   VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
   myVideoView.setVisibility(View.VISIBILE);
   myVideoView.setVideoURI(Uri.parse(url));
   myVideoView.setMediaController(new MediaController(this));
   myVideoView.requestFocus();
   myVideoView.start();
            } 
```

您还应该查看可以添加到 VideoView 的不同侦听器，以在视频播放完毕或无法加载时恢复可见性更改。

[VideoView & Fullscreen & Orientation changes - Android](https://stackoverflow.com/questions/11422725/videoview-fullscreen-orientation-changes-android)提供了如何在方向更改后在同一位置恢复播放的答案。

# java - Spring MVC 将数据返回到多选列表框

> ID：16094534
> 
> 赞同：1
> 
> 时间：2013-04-18T23:03:02.187
> 
> 标签：java, spring-mvc, data-binding, multi-select

我有两个 html 列表框，我从数据库中填充一个选择框和一个多选框。我无法将列表对象返回到多选列表框中，而是出现错误。下面是我的代码：

**列表框 1**

这得到了集合并得到了很好的数据：

```
<form:select path=""
id="dbvictims" title="Victims Of Crime" class="victimLst">
<form:options items="${dbvictims.dbvictimList}"
itemValue="socialSecurityNumber" itemLabel="name" />
</form:select> 
```

**第二个列表框（多选）**

```
<form:select
path="victims" id="victims" title="Victims Of Crime"
multiple="multiple" class="victimLst">
<form:options items="${victimList}"
itemValue="socialSecurityNumber" itemLabel="name" />
</form:select> 
```

**数据库**

两个列表框都使用相同的 jdbc 函数来获取它们的数据，我在 List getVictimList() 中放置了一条消息，它甚至没有第二次进入该函数。当页面是 GET 时，它在视图显示之前从服务器返回时访问该函数，再次访问该函数以在第二个列表中显示设置数据。即使功能是分开的，同样的问题仍然存在。

```
 public List<Citizens> getVictimList() throws Exception{
        String sql ="SELECT socialSecurityNumber,UCASE(CONCAT(fname ,CONCAT(' ', lname)))as name FROM TBLCITIZENS WHERE citizenTypeId = 3";//victims - 3

        List<Citizens> victimList = new ArrayList<Citizens>();

        List<Map<String, Object>> rows = getJdbcTemplate().queryForList(sql);
        for(Map<String, Object> row :rows){
            Citizens acitizen = new Citizens();
            acitizen.setName((String)row.get("name"));
            acitizen.setSocialSecurityNumber((Integer)row.get("socialSecurityNumber"));
            victimList.add(acitizen);
        }
        return victimList;
    } 
```

**控制器：**

如果使用 myVictimList 实例变量设置第二个列表框，则 html 不会被呈现并且页面为空白。

```
myVictimList.put("dbvictimList",this.citizenManager.getListOfVictims());

Map<String, Object> myVictimList = new HashMap<String, Object>();

//this gets set in a GET function - code above ist list box gets set before the second. The second gets set when return from the server after a POST

model.addAttribute("dbvictims", myVictimList);

model.addAttribute("victimList",this.crimeManager.getVictimList());

return new ModelAndView("crime_registration"); 
```

**错误：**

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.StackOverflowError
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:972)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

java.lang.StackOverflowError    com.crimetrack.service.CrimeManager.getVictimList(CrimeManager.java:47)     com.crimetrack.service.CrimeManager.getVictimList(CrimeManager.java:47)     com.crimetrack.service.CrimeManager.getVictimList(CrimeManager.java:47) ........
19236 [http-bio-8084-exec-4] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in WebApplicationContext for namespace 'crimetrack-servlet': ServletRequestHandledEvent: url=[/crimeTrack/getCrime/8.htm]; client=[127.0.0.1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[156ms]; status=[failed: org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.StackOverflowError]
19236 [http-bio-8084-exec-4] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/crimeTrack/getCrime/8.htm]; client=[127.0.0.1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[156ms]; status=[failed: org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.StackOverflowError] 
```

**萤火虫**

```
"NetworkError: 500 Internal Server Error - http://localhost:8084/crimeTrack/getCrime/8.htm" 
```

# node.js - 检查redis变量是否在nodejs中外部更改

> ID：16094537
> 
> 赞同：0
> 
> 时间：2013-04-18T23:03:23.530
> 
> 标签：node.js, redis

我需要检查 redis 值是否已被另一个进程更改，如果已更改则返回它的值，如果没有则返回 false。

我相信手表功能可能是为此而设计的，但我很难理解如何实现它，因为无论变量是否更改，手表总是返回 OK。

这是我现在所拥有的，但这总是返回变量，即使没有改变。

```
function changed(){
    client.watch("tally", function (err,reply) {
        if(reply=="OK") client.get("tally", function(err, reply) { console.log(reply);});
        else console.log('nochange');
    });
    var x = setTimeout(function(){ changed(); },1000);  
}

changed(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:52:22.780

Watch 总是返回 OK；请参阅[http://redis.io/commands/watch](http://redis.io/commands/watch) - 它仅与 MULTI/EXEC（事务）结合使用以检查 EXEC 返回值。

您可以像这样监视/轮询 Redis 键值：

```
var redis = require('redis');
var client = redis.createClient();

var keytracker;
function changed() {

    client.get("tally", function(err, reply) {
        if (err)
            console.log('A Problem with Redis: ' + err);

        if (reply == keytracker) {
            console.log('nochange');
        } else {
            keytracker = reply;
            console.log(reply);
        }
    });

    setTimeout(function() { changed(); }, 1000);
}

changed(); 
```

# ruby-on-rails - 如何从数组中拉出两个间隔

> ID：16094538
> 
> 赞同：1
> 
> 时间：2013-04-18T23:03:26.660
> 
> 标签：ruby-on-rails, arrays

```
@photos = @user.photos[0..2, 4..6] if @user.avatar == 3 
```

这种语法似乎不起作用。我不能将很多参数放入像 [1,2,3,4] 这样的数组中吗？或 [1, 4..6]？

出于某种原因，我收到错误无法将范围转换为整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:21:52.540

如果参数是一个范围，Ruby 不允许您将多个参数传递给 []。

你可以在这里使用这个丑陋的东西：

```
@photos = @user.photos
@photos = @photos[0..2] + @photos[4..6] if @user.avatar == 3 
```

但你最好使用：

```
@photos = @user.photos
@photos.delete_at 3 
```

删除第三个元素。

干杯，

# ruby-on-rails - Ruby on rails 找不到 coffee-script.js

> ID：16094541
> 
> 赞同：0
> 
> 时间：2013-04-18T23:03:55.390
> 
> 标签：ruby-on-rails, ruby, coffeescript

我在 Rails 项目上做了一个新的 ruby​​，昨天我做了同样的事情，一切正常。今天我创建了一个新项目再做一次，它不起作用。它说该文件不存在。我从 railsinstaller.org 重新安装了 ruby​​ on rails，但它仍然无法正常工作。

有什么我需要做的吗？

当我运行 127.0.0.1:3000/statuses 我得到这个

```
No such file or directory - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-source-1.6.2/lib/coffee_script/coffee-script.js
      (in c:/treebook/app/assets/javascripts/statuses.js.coffee)

    Extracted source (around line #6):

    3: <head>
    4:   <title>Treebook</title>
    5:   <%= stylesheet_link_tag    "application", :media => "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8: </head>
    9: <body> 
```

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:39:41.630

检查您是否已添加

```
//= require_tree . 
```

在您的 application.js 中，如果未添加，请添加它。

要不然

如果您想在布局中包含所有 js，请在“application.html.erb”中执行以下操作：

```
<%= javascript_include_tag :all %> 
```

有关 javascript_include_tag 的更多信息，请参阅[rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper/JavascriptTagHelpers.html#method-i-javascript_include_tag)。

# java - 片段启动时 OnClickListeners 未触发

> ID：16094544
> 
> 赞同：0
> 
> 时间：2013-04-18T23:04:08.913
> 
> 标签：java, android, facebook-android-sdk, android-annotations

我已经竭尽全力试图解决这个问题。我正在构建一个带有 facebook 登录的应用程序。我正在使用 Android Facebook SDK 3.0，并且该过程完美无缺。问题出现在屏幕上的其他按钮上。当我在 OnCreate 中有此代码时，它们没有触发

```
 if(savedInstanceState == null) {
            // Add the fragment on initial activity setup
            mainFragment = new FacebookFragment();
            getSupportFragmentManager()
            .beginTransaction()
            .add(android.R.id.content, mainFragment)
            .commit();
        } else {
            // Or set the fragment from restored state info
            mainFragment = (FacebookFragment) getSupportFragmentManager()
            .findFragmentById(android.R.id.content);
        } 
```

使用我使用的 androidannotations

```
 @ViewById Button login_butt,reg_butt;
 @Click
 void login_butt(){
    login();
 }
 @Click
 void reg_butt(){
    startActivity(new Intent(LoginActivity.this,RegisterActivity_.class));
 } 
```

这与我在下面发布的代码相同。我已经尝试了两种方法，但都失败了

我的听众是

```
login_butt.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            login();
        }
    });
    reg_butt.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            startActivity(new Intent(LoginActivity.this,RegisterActivity_.class));
        }
    }); 
```

起初我认为问题出在我正在使用的 androidannotations 中，但是当删除时，同样的问题出现了。

我的按钮 XML 是

```
 <com.facebook.widget.LoginButton
    android:id="@+id/authButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" />
 <Button
    android:id="@+id/reg_butt"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/password_enter"
    android:background="@drawable/register_select" />

<Button
    android:id="@+id/login_butt"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/reg_butt"
    android:layout_alignBottom="@+id/reg_butt"
    android:layout_alignParentLeft="true"
    android:background="@drawable/login_select" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:13:44.770

您的按钮在哪个组件中？根据您的解释，我认为它们在片段中。那么，你有`@EFragment`这个类的注释吗？

此外，您应该以[AndroidAnnotation 方式](https://github.com/excilys/androidannotations/wiki/Enhance-Fragments)启动您的片段以启用该组件的库，并在您的按钮上注册侦听器。

# unix - 如何从 0 分钟以外的时间开始每 5 分钟运行一次 cron 作业？

> ID：16094545
> 
> 赞同：81
> 
> 时间：2013-04-18T23:04:20.363
> 
> 标签：unix, cron

我想让脚本每 5 分钟运行一次，假设从 13:02 开始，这样我可以每 5 分钟运行另一个脚本，但从 13:04 开始，所以第二个脚本在第一个作业开始后两分钟运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-04-18T23:11:32.217

### 语法 1

```
*/5+2 * * * * 1st-script
*/5+4 * * * * 2nd-script 
```

为了将来参考，请查看这个在线[Cron Job Generator](https://www.generateit.net/cron-job/)。

### 语法 2

由于有几份报告称该`+`语法在 Ubuntu 14.04 上不起作用，因此这里有一个变体：

```
2-59/5 * * * * 1st-script
4-59/5 * * * * 2nd-script 
```

这将导致第一个脚本每 5 分钟运行一次，从每小时开始时偏移 2 分钟开始，而第二个脚本的行为相同，偏移量为 4 分钟。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-18T23:20:42.470

或者

```
*/5 * * * * sleep 120; ( first_script.sh & ) ; sleep 120 ; second_script.sh 
```

这种方法的好处是您可以让 crontab 在分钟边界以外的时间（例如一小时后 30 秒）开始执行任务

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T23:11:49.020

```
*/5+1 * * * * first_script.sh 
```

每五分钟运行一次，但偏移一分钟

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-11T10:03:09.197

我需要类似的东西 - 从一小时的第三分钟开始每 5 分钟执行一次脚本。我对上述解决方案表示怀疑（因为网站 crontab.guru 让我相信语法无效），所以我的同事告诉我直接像这样指定分钟数：

3,8,13,18,23,28,33,38,43,48,53,58 * * * *

它的具体会议记录清单。

# mysql - Phonegap 数据库存储

> ID：16094548
> 
> 赞同：0
> 
> 时间：2013-04-18T23:04:31.137
> 
> 标签：mysql, sqlite, cordova

在 phonegap 文档中它指出：

> “此方法将创建一个新的 SQL Lite 数据库”

这是不使用传统 SQL 的唯一提示，但 SQL Lite 与 sqlite 不同吗？

我要运行的代码是使用 mySQL，我已经在 sqlite 中对其进行了测试，但它不会以相同的方式工作，所以如果我不得不重写它会很烦人！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:46:36.463

With PhoneGap, you always get SQLite, which *is* a traditional SQL engine. (There are very few [differences](http://www.sqlite.org/omitted.html) to the SQL standard.)

With MySQL, you have more [differences](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html), and it is likely that you have used some of its non-traditional [extensions](http://dev.mysql.com/doc/refman/5.5/en/extensions-to-ansi.html).

If you do want to use your MySQL-specific code in PhoneGap, your only choice is to rewrite it.

# java - GWT 对象序列化

> ID：16094550
> 
> 赞同：1
> 
> 时间：2013-04-18T23:04:36.813
> 
> 标签：java, mysql, gwt, serializable

我正在尝试从我的 mysql 数据库返回一个 arrayList 以在 GWT cellList 中使用，但我遇到了序列化问题。

> 类型 'com.cbs.ioma.client.Order' 未包含在可由此 SerializationPolicy 序列化的类型集中，或者无法加载其 Class 对象。出于安全考虑，此类型不会被序列化。: instance = Order [orderNumber=1001, orderer=test, assembler=1, dateCompleted=1969-12-31, dateSubmitted=1969-12-31, notes=rer, isComplete=假，类型=错误]

我有一个班级订单，但是当我尝试将其更改为

> `public class Order implements java.io.Serializable`

程序崩溃并且没有显示错误消息。我对 GWT 内部的序列化了解不多，那么我将如何序列化一个类以在 GWT 中使用？我相信我在 service 和 serviceAync 类中有正确的函数名称。谢谢。

编辑：我将在这里添加更多内容。我尝试更改订单类以实现 isSerializable，然后出现此错误

> 12:55:49.793 [错误] [ioma] 未捕获的异常已转义
> 
> java.lang.ClassCastException: com.cbs.ioma.client.Order 无法在 com.google.gwt.text.shared.SimpleSafeHtmlRenderer.render(SimpleSafeHtmlRenderer.java:1) 中转换为 java.lang.String。 gwt.cell.client.AbstractSafeHtmlCell.render(AbstractSafeHtmlCell.java:80) 在 com.google.gwt.user.cellview.client.CellList.renderRowValues(CellList.java:527) 在 com.google.gwt.user.cellview。 client.AbstractHasData$View.renderRowValues(AbstractHasData.java:337) 在 com.google.gwt.user.cellview.client.AbstractHasData$View.replaceAllChildren(AbstractHasData.java:239) 在 com.google.gwt.user.cellview。 client.HasDataPresenter.resolvePendingState(HasDataPresenter.java:1351) 在 com.google.gwt.user.cellview.client.HasDataPresenter.access$3(HasDataPresenter.java:1062) 在 com.google.gwt.user.cellview.client。HasDataPresenter$2.execute(HasDataPresenter.java:984) 在 com.google.gwt.core.client.impl.SchedulerImpl$Task$.executeScheduled$(SchedulerImpl.java:50) 在 com.google.gwt.core.client.impl .SchedulerImpl.runScheduledTasks(SchedulerImpl.java:228) 在 com.google.gwt.core.client.impl.SchedulerImpl.flushFinallyCommands(SchedulerImpl.java:327) 在 com.google.gwt.core.client.impl.Impl.exit (Impl.java:266) 在 com.google.gwt.core.client.impl.Impl.entry0(Impl.java:257) 在 sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke （未知来源）在 java.lang.reflect.Method.invoke（未知来源）在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103) 在 com.google.gwt.dev.shell。 MethodDispatch.invoke(MethodDispatch.java:71) 在 com。com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 上 com.google.gwt.dev.shell 上的 google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)。 BrowserChannelServer.processConnection(BrowserChannelServer.java:547) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source)

我不确定它为什么要将订单强制转换为字符串。我觉得我在这里缺少关于序列化的一些基本知识，有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:07:50.630

尝试实现[IsSerializable](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/rpc/IsSerializable.html)而不是 Serializable。但总的来说，您的代码应该可以工作。这个错误有时会发生（在调试期间），但在大多数情况下，它在重新编译后会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:10:36.610

In order to allow your data types to be transferred from/to client to/from server using `GWT-RPC`, you need to mark them as *serializable* by implementing either the `IsSerializable` or `Serializable` interface. You also have to ensure the serializability of the class fields (except final/transient fields, which will not be serialized at all) and the presence of a default zero-arg constructor (or none at all).

EDIT: Serialization of final fields is actually under [review](http://code.google.com/p/google-web-toolkit/issues/detail?id=1054).

If, for some reason, you cannot meet those requirements, you need to use `DTO`s filled with your object data, in order to transport them to/from the client/server. Or you can try to implement your own [custom serializer](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideCustomSerialization) for that class.

Take a look at the [docs for GWT serialization](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes) and to the [java.io.Serializable support](https://developers.google.com/web-toolkit/doc/latest/FAQ_Server#Does_the_GWT_RPC_system_support_the_use_of_java.io.Serializable) if you want. And also clean all *.gwt.rpc files in your war dir, to force the re-creaton of the serialization policy.

# db2 - 在 SAS 中创建 DB2 表会添加缺失值

> ID：16094551
> 
> 赞同：1
> 
> 时间：2013-04-18T23:04:41.120
> 
> 标签：db2, odbc, sas

当我尝试将成员列表上传到我们的 DB2 服务器时遇到了这个问题，并创建了一个最小示例来解释这个问题。

为了将 SAS 9.2 中本地创建的数据表连接到我们的 DB2 数据仓库中的表（通过与 ODBC 驱动程序的连接进行访问），我的过程是将这些本地表放在包含索赔。这样做的主要目的是过滤出上传列表中包含 member_ID 的声明列表。

如果本地数据的第一行中存在缺失值（有时成员可能没有一条标识信息），则本地端的数据在上传到 DB2 模式时会丢失几个非缺失值。我附上了一个带有非敏感信息的玩具示例以突出问题。

```
PROC IMPORT OUT= WORK.druglist DATAFILE= "C:\Users\caden2\Desktop\druglist.xls" 
DBMS=EXCEL REPLACE; 
RANGE="'Tab 4# Asthma Meds$'"; 
RUN;

DATA for_clinical;
SET druglist(KEEP= Drug_Class Drug_Type Generic GPI);
IF _N_ = 4 THEN DELETE;
IF _N_ <= 10;
IF _N_ = 1 THEN DO;
    Drug_Class=''; 
    Drug_Type='';
    Generic='';
    END;
RUN;

libname clinic odbc user=XXX password=XXX dsn=DWName schema=DWSchema autocommit=yes;

PROC SQL;
DROP TABLE clinic.caden_test;
CREATE TABLE clinic.caden_test AS
    SELECT * FROM for_clinical;
QUIT; 
```

PROC IMPORT 和 Data 步骤只是将数据转换为我需要的形式，应该没有任何问题。临床图书馆是使用我的凭据通过与我们的数据仓库的 ODBC 连接创建的。下面的截图显示了本地机器和临床服务器上数据集的前后对比（注意第一行有一些缺失）。我没有发布日志。可怕的是，我的日志没有提供任何错误的迹象。

![在此处输入图像描述](https://i.stack.imgur.com/942Uf.jpg)

这是 DB2、SAS 还是 SAS 和 DB2 组合的问题？我无法复制从本地到本地或 DB2 到 DB2 的问题。此外，删除的值始终以对角线形式出现。对于更广泛的数据（超过 4 个变量），它从随机行开始，并沿对角线向上和向右进行，直到到达最后一列。

为了解决 BellevueBob 在评论中的担忧，即不是 Viewtable 搞砸了，这里是临床数据的 PROC FREQ 的输出，表明确实存在缺失。![在此处输入图像描述](https://i.stack.imgur.com/ognnh.jpg)

BellevueBob 的答案适用于缺少数据是字符的情况，但以相同的方式创建数据表，但使用数字数据，该解决方案不像处理字符数据那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:41:29.080

尝试使用`NULLCHAR=NO`数据集选项：

```
PROC SQL;
   DROP TABLE clinic.caden_test;
   CREATE TABLE clinic.caden_test(NULLCHAR=NO) AS
   SELECT * FROM for_clinical3;
QUIT; 
```

这是**[一个 SAS 参考](http://support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a001371592.htm)**。

我已经有一段时间没有使用 DB2 并且不知道如何通过 ODBC 创建表。但是，我还将研究其他可用的数据集选项，特别是`DBCREATE_TABLE_OPTS`和`DBTYPE`，它允许您显式定义表索引和列类型。

**编辑：**根据 OP 评论更正答案。

该`NULLCHAR=NO`选项告诉 SAS 在插入缺失值时向数据库发送一个空白字符，而不是将值设置为 NULL。虽然这可行，但它可能值得 SAS 使用说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:55:07.223

我通常不喜欢回答我自己的问题，但我认为这可能是有人可能会偶然发现的问题。

我联系了 SAS 技术支持，措辞与这个问题几乎相同，这是他们的回答：

> 这看起来像以下 SAS 说明中记录的驱动程序缓冲问题：
> 
> [http://support.sas.com/kb/38/214.html](http://support.sas.com/kb/38/214.html)
> 
> 如果 insertbuff 修复它，那么您可能希望了解有关获取 IBM Db2 ODBC 驱动程序的信息。让我知道这是否不是问题。

对于我的原始示例，解决方案就像在原始 libname 语句中添加一个附加选项一样简单。代替

```
libname clinic odbc user=XXX password=XXX dsn=DWName schema=DWSchema autocommit=yes; 
```

新的声明将是

```
libname clinic odbc user=XXX password=XXX dsn=DWName schema=DWSchema insertbuff=1 autocommit=yes; 
```

此修复适用于数字和字符数据。幸运的是，这种极端情况问题似乎只适用于 DB2。

# git - 防止在 git 裸仓库中创建新分支

> ID：16094552
> 
> 赞同：0
> 
> 时间：2013-04-18T23:04:45.900
> 
> 标签：git, git-branch, githooks

我们有我们的主要裸仓库，它有一个钩子，应该将特定分支推送到另一个远程裸仓库。另一个 repo 应该只有一个分支。post-receive 挂钩检查当前提交是否在特定分支上（使用 git rev-parse specific_branch_name），如果是，则执行以下操作：

```
 git push ssh://git@remote/path/to/repo 
```

现在我们做了一些愚蠢的事情并推送了一个新分支（与特定分支在同一个提交上）。钩子推动了这个，并在另一个遥控器上创建了一个新分支。

现在显然我们需要从另一个远程删除该分支。但是我想知道如何让另一个远程拒绝创建新分支（它应该只有一个特定的分支而没有其他分支）。有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:28:01.200

您可以使用[`update`hook](https://www.kernel.org/pub/software/scm/git/docs/githooks.html#update)来实现：

> 这个钩子由远程存储库上的 git-receive-pack 调用，当在本地存储库上完成 git push 时会发生这种情况。就在更新远程存储库上的 ref 之前，会调用更新挂钩。它的退出状态决定了 ref 更新的成功或失败。
> 
> 钩子对每个要更新的 ref 执行一次，并接受三个参数：
> 
> *   正在更新的 ref 的名称，
> *   存储在 ref 中的旧对象名称，
> *   以及要存储在 ref 中的新对象名。
> 
> 更新挂钩的零退出允许更新 ref。以非零状态退出会阻止 git-receive-pack 更新该引用。

只需检查分支名称是否正确，否则拒绝更新。

# python - 如何在 Python 中构建具有多个变量和多个选项的随机项？

> ID：16094556
> 
> 赞同：0
> 
> 时间：2013-04-18T23:05:07.460
> 
> 标签：python, function, python-3.x

为了完成以下任务，我应该查看 Python 文档的哪个区域：

```
npc_gender = ["Male","Female"]
npc_age = # trying to do random integer within a range say 18-80
npc_name_male = ["Arnold","Bob","Charles","David","Edward"]
npc_name_female = ["Annie","Barbara","Courtney","Danielle","Ellen"]
""" Obviously, the names are gender specific for an if/else statement :) """
npc_weight = # trying to figure out how to do range...not sure yet, but still variable.
npc_height = # same a weight...not sure yet.

def create_npc():
    if npc_gender == "Male"
        # select (automatically) one of the npc_name_male[#:] and store.
        return npc_name_male[#:]
    elif npc_gender == "Female"
        # select (automatically) one of the npc_name_female[#:] and store.
    else:
        return 
```

现在我很困惑......基本上，我希望程序从已经存储在变量中的一系列参数中为我创建一个角色......

我是否朝着正确的方向前进？提前致谢。

对搅拌机的回应：

```
import random
npc_gender = ["Male","Female"]

def create_npc():
    npc_gender_choice = random.choice(npc_gender)
    print(npc_gender_choice)

create_npc() 
```

我这样做了，它帮助我理解。我将继续努力，直到我完成所有工作，然后更新帖子。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:07:54.700

您可以使用`random.choice()`获取随机元素：

```
import random

...

choice = random.choice(npc_name_male) 
```

# python - numpy 获取值为真的索引

> ID：16094563
> 
> 赞同：141
> 
> 时间：2013-04-18T23:05:51.980
> 
> 标签：python, numpy, matrix

```
>>> ex=np.arange(30)
>>> e=np.reshape(ex,[3,10])
>>> e
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24, 25, 26, 27, 28, 29]])
>>> e>15
array([[False, False, False, False, False, False, False, False, False,
        False],
       [False, False, False, False, False, False,  True,  True,  True,
         True],
       [ True,  True,  True,  True,  True,  True,  True,  True,  True,
         True]], dtype=bool) 
```

我需要找到具有 true 的行或`e`值大于 15 的行。我可以使用 for 循环进行迭代，但是，我想知道 numpy 是否可以更有效地做到这一点？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-04-18T23:38:20.983

要获取至少一项大于 15 的行号：

```
>>> np.where(np.any(e>15, axis=1))
(array([1, 2], dtype=int64),) 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2014-02-16T18:34:49.347

您可以使用该[`nonzero`](https://numpy.org/doc/stable/reference/generated/numpy.nonzero.html)功能。它返回给定输入的非零索引。

**简单的方法**

```
>>> (e > 15).nonzero()

(array([1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]), array([6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9])) 
```

要更清晰地查看索引，请使用`transpose`以下方法：

```
>>> numpy.transpose((e>15).nonzero())

[[1 6]
 [1 7]
 [1 8]
 [1 9]
 [2 0]
 ... 
```

**不错的方式**

```
>>> numpy.nonzero(e > 15)

(array([1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]), array([6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9])) 
```

或干净的方式：

```
>>> numpy.transpose(numpy.nonzero(e > 15))

[[1 6]
 [1 7]
 [1 8]
 [1 9]
 [2 0]
 ... 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2019-09-01T04:23:21.150

**一种简单而干净的方法：**用于`np.argwhere`按元素对索引进行分组，而不是像中的维度`np.nonzero(a)`（即，`np.argwhere`为每个非零元素返回一行）。

```
>>> a = np.arange(10)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> np.argwhere(a>4)
array([[5],
       [6],
       [7],
       [8],
       [9]]) 
```

`np.argwhere(a)`几乎与 相同`np.transpose(np.nonzero(a))`，但它为 0 维数组生成正确形状的结果。

**注意：**您不能使用`a(np.argwhere(a>4))`来获取 中的相应值`a`。推荐的方法是使用`a[(a>4).astype(bool)]`or`a[(a>4) != 0]`而不是`a[np.nonzero(a>4)]`正确处理 0-d 数组。有关更多详细信息，请参阅[文档](https://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html#numpy.nonzero)。从以下示例中可以看出，`a[(a>4).astype(bool)]`并且`a[(a>4) != 0]`可以简化为`a[a>4]`.

**另一个例子：**

```
>>> a = np.array([5,-15,-8,-5,10])
>>> a
array([  5, -15,  -8,  -5,  10])
>>> a > 4
array([ True, False, False, False,  True])
>>> a[a > 4]
array([ 5, 10])
>>> a = np.add.outer(a,a)
>>> a
array([[ 10, -10,  -3,   0,  15],
       [-10, -30, -23, -20,  -5],
       [ -3, -23, -16, -13,   2],
       [  0, -20, -13, -10,   5],
       [ 15,  -5,   2,   5,  20]])
>>> a = np.argwhere(a>4)
>>> a
array([[0, 0],
       [0, 4],
       [3, 4],
       [4, 0],
       [4, 3],
       [4, 4]])
>>> for i,j in a: print(i,j)
... 
0 0
0 4
3 4
4 0
4 3
4 4
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T20:15:00.840

当您只需要行 idx 时，我更喜欢`np.flatnonzero(arr)`该选项。有效，但它返回一个元组而不是一个数组。相当于。`nonzero()``arr.nonzero()``flatnonzero()``np.nonzero(np.ravel(arr))[0]`

如评论中所述，`np.where()`NumPy 文档不鼓励这样做。

# json - Google Fusion Tables - 获取地理编码地址的纬度和经度

> ID：16094565
> 
> 赞同：1
> 
> 时间：2013-04-18T23:05:59.573
> 
> 标签：json, google-fusion-tables

我有多个带有“LOCATION”类型的地理编码地址列的 Google Fusion 表。我想在执行 SQL 查询时返回这些列的纬度和经度结果。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:47:03.243

不，这是不可能的。如果要从表中检索该信息，则需要在外部对其进行地理编码并将地理坐标包含在表中。

# c++ - 如果您不使用删除，内存是否会在函数结束时释放？

> ID：16094568
> 
> 赞同：3
> 
> 时间：2013-04-18T23:06:05.467
> 
> 标签：c++, memory, new-operator, delete-operator

假设您有如下功能：

```
void foo()
{
  char* pt = new char[10];
  //do stuff with pt
} 
```

由于指针是在本地创建的，一旦函数终止，内存会被释放吗？或者你真的需要用来`delete[]`释放内存吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T23:16:08.800

分配有`new`/的内存`new[]`具有*动态存储持续时间。*`delete`在用户显式调用/之前，它们不会被释放`delete[]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T23:08:12.390

如果您使用“new”或“new[]”而不使用某种智能指针类，则**不会**自动释放内存。您需要适当地调用“delete”或“delete[]”来释放它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:08:43.130

不 - 这是内存泄漏。每个都`new`应该有一个对应的`delete`（并且每个都`new[]`应该有一个对应的`delete[]`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T23:13:28.470

是的，你肯定需要`delete[]`. 它可能在同一个函数中或其他地方（如果您选择返回`pt`）。

如果您使用容器，例如`vector`，那么您不会

```
std::vector< char > pt( 10 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T23:07:32.433

你真的需要使用`delete[]`.

# redis - Redis 中嵌套结构的替代方案？

> ID：16094574
> 
> 赞同：3
> 
> 时间：2013-04-18T23:07:06.150
> 
> 标签：redis

我经常遇到这样的情况：我要存储的信息比 Redis 的任何简单数据结构都更复杂。我仍然想使用 Redis，但我想知道人们在理想情况下想要使用嵌套结构时是否有任何标准替代方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T06:55:05.947

你基本上有两种策略：

*   您可以序列化您的复杂对象并将它们存储为字符串。我们建议将 json 或 msgpack 用于序列化格式。这很容易从大多数客户端语言进行操作。如果需要服务器端访问，那么服务器端 Lua 脚本可以轻松地对此类对象进行编码/解码，因为 Redis 是使用 msgpack 和对 Lua 的 json 支持进行编译的。

*   您可以将对象拆分为不同的键。您可以存储几个键，例如 user:id、user:id:address_list、user:id:document_lists 等...... EXEC 块可用于保证数据的一致性，并聚合往返。

请参阅此答案中的一个简单示例：

[LPUSH 命令是否适用于从 JSON 初始化的记录？](https://stackoverflow.com/questions/10396764/will-the-lpush-command-work-on-a-record-that-was-initialized-from-json/10397318#10397318)

最后，Redis 不是面向文档的数据库。如果您确实有很多复杂的文档，也许 MongoDB、ArangoDB、CouchDB、Couchbase 等解决方案可以更好地为您服务......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-09T14:39:14.500

当需要修改对象时，将复杂对象序列化为字符串，并将字符串保存到Redis，效率非常低。由于您必须将字符串取回客户端，将其反序列化为对象，对其进行修改，再次将其序列化为字符串，然后将其保存回 Redis。太多的工作...

现在是 2019 年，有一些新的 Redis 模块可以使 Redis 支持嵌套数据结构，例如[RedisJSON](https://github.com/RedisJSON/RedisJSON)、[redis-protobuf](https://github.com/sewenew/redis-protobuf)。

*免责声明*：我是 redis-protobuf 的作者，所以我会在这个模块上给出一些例子。*redis-protobuf*也比*RedisJSON*更快，内存效率更高，因为它使用文本格式以外的二进制格式来序列化/反序列化数据。

首先，您需要以[Protobuf 格式](https://developers.google.com/protocol-buffers/)定义嵌套数据结构并将其保存到本地文件：

```
syntax = "proto3";

message SubMsg {
    string s = 1;
    int32 i = 2;
}

message Msg {
    int32 i = 1;
    SubMsg sub = 2;
    repeated int32 arr = 3;
} 
```

*然后在redis.conf*中使用以下配置加载模块：

```
loadmodule /path/to/libredis-protobuf.so --dir proto-directory 
```

之后，您可以读写嵌套数据结构：

```
PB.SET key Msg '{"i" : 1, "sub" : {"s" : "string", "i" : 2}, "arr" : [1, 2, 3]}'
PB.SET key Msg.i 10
PB.GET key Msg.i
PB.SET key Msg.sub.s redis-protobuf
PB.GET key Msg.sub.s
PB.SET key Msg.arr[0] 2
PB.GET key Msg.arr[0] 
```

请查看[文档](https://github.com/sewenew/redis-protobuf)以获取详细信息。如果您对 redis-protobuf 有任何问题，请随时[告诉我](https://github.com/sewenew/redis-protobuf/issues)。

# javascript - Javascript Internet Explorer 兼容性，未定义函数

> ID：16094575
> 
> 赞同：1
> 
> 时间：2013-04-18T23:07:07.390
> 
> 标签：javascript, internet-explorer, google-chrome, firefox, compatibility

我有点麻烦，我创建了一个简单的网页来下载目录，我使用 javascript 来简化它，选择用户选择他们想要的目录，javascript 函数更新图像中的链接，以便用户可以下载不同的格式问题是，它在firefox和chrome中工作正常，但iexplore只是说“actLink未定义”（翻译自西班牙语actLink no esta definido）和actLink它是组合框更改时调用的函数，这就是我所拥有的：

**调用函数的代码：**

```
 <td align="center"><form id="form1" name="form1" method="post" action="">
<select name="cata_sel" id="cata_sel" onchange="actLink()">
  <option value="0" selected="selected">Seleccione el Catálogo...</option>
  <option value="Dependencia">Dependencias</option>
  <option value="Doc_of">Documentos Oficiales</option>
  <option value="EntidadFed">Entidades Federativas</option>
  <option value="Estado_Civil">Estado Civil</option>
  <option value="Grado_Escolar">Grado Escolar</option>
  <option value="Grado_Estudio">Grado de Estudio</option>
  <option value="LocYCP">Localidades y Codigos Postales</option>
  <option value="Municipio">Municipios</option>
  <option value="Nacionalidades">Nacionalidades</option>
  <option value="parentesco">Parentescos</option>
  <option value="Programas">Programas de Gobierno</option>
  <option value="Regiones">Regiones</option>
</select></label>
</form></td> 
```

**在 html 的 head 部分中定义的脚本**

```
<script src="fnc1_0.js">
//<!--
window.onload = function(){//Ocultar todo el contenido
show_hide('descargas',0);
}

function actLink()
{
    if($('cata_sel').value!=0)
    {
    show_hide('descargas',0);
    $('dl_pdf').href="cat_dl/Cat_"+$('cata_sel').value+".pdf"
    $('dl_csv').href="cat_dl/Cat_"+$('cata_sel').value+".csv"
    $('dl_txt').href="cat_dl/Cat_"+$('cata_sel').value+".txt"
    $('dl_xls').href="cat_dl/Cat_"+$('cata_sel').value+".xls"
    $('dl_pdft').href="cat_dl/Cat_"+$('cata_sel').value+".pdf"
    $('dl_csvt').href="cat_dl/Cat_"+$('cata_sel').value+".csv"
    $('dl_txtt').href="cat_dl/Cat_"+$('cata_sel').value+".txt"
    $('dl_xlst').href="cat_dl/Cat_"+$('cata_sel').value+".xls"
    show_hide('descargas',1);
    }
    else
    show_hide('descargas',0);
}
//-->
</script> 
```

**'dl_****' 元素是目录的链接。看起来像这样：***

 *```
<td><a id="dl_pdf" href="cat_dl/Cat_Dependencia.pdf" target="_blank"><img src="images/pdf-icon_resize.png" width="128" height="128" /></a></td> 
```

the fnc1_0.js has a function to show/hide elements and a '$' named to substitute the getElementById() notation here it is if you need it:

```
function show_hide(id,act)
{//muestra u oculta divs, act=0:oculta,1:muestra,2:intermitente
//alert(id);
switch(act)
{
case 0:
$(id).style.display ='none'
break
case 1:
$(id).style.display ='block'
break
case 2:
$(id).style.display = ($(id).style.display == 'none') ? 'block' : 'none'; //damos un       atributo display:none que oculta el div
break
}
}

function $(variable)//reemplaza al getElementbyid
{
return document.getElementById(variable);
} 
```

thats pretty much it, dont know whats wrong ie explore keeps saying that actLink its not defined whenever i select a catalog from the list!! please...hope you can help me!!!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:10:44.900

I think you problem is that you have code in a script tag that has a source, put your code in a script tag without the src attribute.

```
<script src="fnc1_0.js"></script>
<script>
//<!--
window.onload = function(){//Ocultar todo el contenido
show_hide('descargas',0);
}

function actLink()
{
    if($('cata_sel').value!=0)
    {
    show_hide('descargas',0);
    $('dl_pdf').href="cat_dl/Cat_"+$('cata_sel').value+".pdf"
    $('dl_csv').href="cat_dl/Cat_"+$('cata_sel').value+".csv"
    $('dl_txt').href="cat_dl/Cat_"+$('cata_sel').value+".txt"
    $('dl_xls').href="cat_dl/Cat_"+$('cata_sel').value+".xls"
    $('dl_pdft').href="cat_dl/Cat_"+$('cata_sel').value+".pdf"
    $('dl_csvt').href="cat_dl/Cat_"+$('cata_sel').value+".csv"
    $('dl_txtt').href="cat_dl/Cat_"+$('cata_sel').value+".txt"
    $('dl_xlst').href="cat_dl/Cat_"+$('cata_sel').value+".xls"
    show_hide('descargas',1);
    }
    else
    show_hide('descargas',0);
}
//-->
</script> 
```*

# c# - 如何处理无限重复的小数？

> ID：16094577
> 
> 赞同：10
> 
> 时间：2013-04-18T23:07:20.097
> 
> 标签：c#, rounding, rounding-error

当除法导致无限重复的数字时，该数字显然会被截断以适应小数的大小。所以像 1/3 这样的东西变成像 0.3333333333333333333 这样的东西。如果我们将该数字乘以 3，我们会得到类似 0.999999999999999999 的结果，而不是保留分数的真实值时得到的 1。

这是 MSDN 关于十进制的文章中的代码示例：

```
decimal dividend = Decimal.One;
decimal divisor = 3;
// The following displays 0.9999999999999999999999999999 to the console
Console.WriteLine(dividend/divisor * divisor); 
```

当将值 0.9999999999999999999 与 1 进行比较以获得相等性时，这会导致问题。如果没有精度损失，它们将是相等的，但是在这种情况下，比较当然会导致错误。

人们通常如何处理这个问题？除了为每次比较定义一些误差范围之外，还有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:31:11.397

这是一个非常古老且广为人知的数值计算问题。您已经说过您正在寻找一种解决方案，而不是为每次比较定义一些误差范围。我想到的一种方法是先在内存中构建数学表达式树，然后再进行计算。有了这个，我们可以在进行计算之前使用一些已知的规则进行一些简化。规则如：

*   如果分数的分子和分母不为零，则删除它们中的相等数字
*   一个数的平方根就是这个数本身
*   ...

因此，我们可以存储一个`Fraction(1, 3)`. 然后我们可以像这样定义所有其他表达式来构建表达式而不是进行计算。最后我们可以先用上面的规则简化表达式，然后计算结果。

我简单地搜索了网络以找到执行此操作的库，但还没有找到。但我确信可以为其他语言/平台甚至 .NET 找到一些。

请注意，上述方法最终只会产生更好的结果，但并未解决数值计算本质中固有的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T23:43:00.150

正如您所提到的，使用浮点数的计算结果必须“拟合”到浮点表示中。这就是为什么精确比较不是一个好主意的原因——需要一定的容忍度。因此`x == y`，`Math.Abs(x - y) < tolerance`应该使用 ,。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:34:41.013

欢迎来到浮点运算的痛苦。

当然，您真正想要的是有理数类和库。这是 C# 中的一个开始，虽然我不知道它有多完整（可能不是很完整）：

[http://www.codeproject.com/Articles/88980/Rational-Numbers-NET-4-0-Version-Rational-Computin](http://www.codeproject.com/Articles/88980/Rational-Numbers-NET-4-0-Version-Rational-Computin)

C/C++ 中有一些，但同样，不知道它们有多有用/完整。

对于浮点数：

看看一些资源。首先，David Goldberg 的经典著作《每个计算机科学家都应该知道的关于浮点运算的知识》。这是摘要：

> 浮点运算被许多人认为是深奥的学科。这是相当令人惊讶的，因为浮点在计算机系统中无处不在：几乎每种语言都有浮点数据类型；从个人电脑到超级计算机的计算机都有浮点加速器；大多数编译器将不时被要求编译浮点算法；几乎每个操作系统都必须响应浮点异常，例如溢出。本文介绍了对计算机系统设计者有直接影响的浮点方面的教程。它从浮点表示和舍入误差的背景开始，继续讨论 IEEE 浮点标准，最后以计算机系统构建者如何更好地支持浮点的示例结束。

您可以从以下几个地方免费下载该论文的编辑版本：

*   [Citeseer 有几个下载链接](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.6768)
*   原始版本位于[http://perso.ens-lyon.fr/jean-michel.muller/goldberg.pdf](http://perso.ens-lyon.fr/jean-michel.muller/goldberg.pdf)
*   可以在以下位置找到经过编辑的版本
    *   [https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf](https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf)
    *   [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) 以及其他地方。

此外，原件应该在带有所有书籍的大砖房中随时可用。完整的引用是

> 大卫·戈德堡。1991\. 每个计算机科学家都应该知道的关于浮点运算的知识。ACM 计算。生存。23，1（1991 年 3 月），5-48。DOI=10.1145/103162.103163 [http://doi.acm.org/10.1145/103162.103163](http://doi.acm.org/10.1145/103162.103163)

然后看看这些资源：

*   [浮点指南](http://floating-point-gui.de/)，特别是[“比较”](http://floating-point-gui.de/errors/comparison/)
*   [比较浮点数，2012 年版。](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)
*   [浮点文章存档](http://randomascii.wordpress.com/category/floating-point/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T23:42:43.017

如果您按照我[评论](http://www.codeproject.com/Articles/11971/Fractions-in-C)的方式进行，那么将其存储到数据库中也不会成为问题。您可以将其以分数类型存储在数据库中。请参阅 UDT。

# c# - 在 ItemsPage 中下载图像时显示 ProgressRing

> ID：16094579
> 
> 赞同：0
> 
> 时间：2013-04-18T23:07:40.577
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我有一个 ItemsPage。当用户导航时，应用程序会下载一些图像。我想在每个人身上看到 ProgressRing。

我的 GridView 模板

```
<GridView.ItemTemplate>
  <DataTemplate>
    <Grid HorizontalAlignment="Left"
          Width="150"
          Height="230">
      <Canvas>
        <ProgressRing x:Name="imageProgress"
                      Canvas.ZIndex="10"
                      Width="100"
                      Height="100"
                      HorizontalAlignment="Left"
                      Grid.Column="0" />
        <Image x:Name="FilmImage"
               Source="{Binding Image}"
               Stretch="UniformToFill"
               AutomationProperties.Name="{Binding Title}" />
      </Canvas>
      <StackPanel VerticalAlignment="Bottom"
                  Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
        <TextBlock Text="{Binding Title}"
                   Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}"
                   Style="{StaticResource TitleTextStyle}"
                   Height="60"
                   Margin="15,0,15,0" />
        <TextBlock Text="{Binding Subtitle}"
                   Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}"
                   Style="{StaticResource CaptionTextStyle}"
                   TextWrapping="NoWrap"
                   Margin="15,0,15,10" />
      </StackPanel>
    </Grid>
  </DataTemplate>
</GridView.ItemTemplate> 
```

我的.cs

```
 public sealed partial class AllCinemas : LayoutAwarePage
    {
protected async override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {

            FeedAllCinemas allCinemas = new FeedAllCinemas();
            allCinemas.GetAllCinemas("", "");
            this.DefaultViewModel["Items"] = allCinemas.Cinemas;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:11:12.600

请查看这篇很棒的博客文章，这正是您想要的：[Windows 8（或通常是 XAML）：加载带有进度/回退内容的图像](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2013/03/20/windows-8-or-xaml-generally-loading-images-with-progress-fallback-content.aspx)

![在此处输入图像描述](https://i.stack.imgur.com/eFKCa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T01:43:53.170

请检查这个线程，它包含一个解决方案：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/536a3d52-0c9f-4875-8ad5-991a9eab17c8/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/536a3d52-0c9f-4875-8ad5-991a9eab17c8/)

# iphone - 如何在最终应用中包含所有内容

> ID：16094585
> 
> 赞同：2
> 
> 时间：2013-04-18T23:08:24.547
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我有一个项目正在使用我创建的 2 个静态库，我们称它们为 libraryA 和 libraryB 以及一个 Bundle。

主项目使用 libraryA、libraryB 和 bundle，libraryA 也调用 libraryB 和 bundle。

每个静态库、包和主项目都是通过在 Xcode 中启动一个新项目来创建的。最后一个要创建的项目是 MyProject.xcodeproj。创建该项目后，我将 libraryA.xcodeproj、libraryB.xcodeproj 和 myBundle.xcodeproj 拖到其中并以如下方式结束：

![在此处输入图像描述](https://i.stack.imgur.com/lYoov.png)

一切都很好地编译和运行，但在 MyProject.app 中检查，我发现它不包含 myBundle 中的资源文件。是的，myBundle.bundle 处于 MyProject 的“复制包资源”阶段以及目标依赖项上。

顺便说一句，请解释我应该如何为这个项目的所有部分设置构建阶段的“目标依赖项”、“将二进制文件与库链接”和“复制捆绑资源”部分，以便最终的应用程序包含所有内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:54:47.883

Target Dependencies 仅表示在当前目标构建之前将首先执行哪些其他目标。如果您想在编译主项目之前对库和捆绑包进行更改，请确保包含这些目标中的每一个。如果您从依赖项中删除它们，该项目仍然可以正常构建，当您想要添加更改时，您只需要手动构建库的项目。

与二进制库的链接应该同时显示 libraryA 和 B。它将引用该库的最新构建版本，因此结合目标依赖项，您的 MyProject 应用程序将拥有对您的库的所有最新更改。

如果您的 MyProject 应用程序运行良好，那么您可能做的一切都正确。如果您可以引用静态库中的类而不会出现链接器错误，那么这些类已正确链接。如果来自 myBundle 的资源显示在应用程序的 UI 中，那么它也被正确复制。

如果您缺少捆绑包中的文件，请查看您的 MyBundle 项目并确保其 Copy Bundle Resources 部分显示您想要包含的文件。

# image - codeigniter 文件上传与其他元素

> ID：16094587
> 
> 赞同：0
> 
> 时间：2013-04-18T23:08:28.627
> 
> 标签：image, forms, codeigniter, file-upload

我有一个带有表格的页面。表单上有一个下拉列表和一些输入框和一个文件上传。如果我尝试提交我的页面，我会得到一个空白页面，并显示错误“不存在的类：上传”。我还没有使用文件上传。

这是我的输入文件类型：

```
<tr><td>Image: </td></tr>
<tr><td><input type="file" name="image" size="20" /></td></tr> 
```

我已经阅读了 CI 文件上传类，您需要一个 form_open_multipart('upload'); 那么我将只拥有该表格还是必须在我的情况下做其他事情？因为我在该表单上有其他输入类型？

这是我的控制器的一些代码：

```
$subject = htmlspecialchars(trim($this->input->post('subject')));
$message = htmlspecialchars(trim($this->input->post('message')));
$image = $this->input->post('image');

$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '100';
$config['max_width'] = '1024';
$config['max_height'] = '768';
$this->load->library('upload', $config);

if (!$this->upload->do_upload($image)) {          
    $data['fout'] = $this->upload->display_errors();
    $this->annuleren($soort, $data);
} else {
    $data['upload'] =  $this->upload->data();
}

$id = $this->message_model->insert($message, $subject, $image);

redirect('infoscreen/dashboard', 'refresh'); 
```

我还在“源文件”下创建了一个“上传”文件夹。我可能在做一些愚蠢的事情。有人可以帮助我并告诉我我做错了什么以及如何解决它吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:14:52.310

编辑：首先加载上传库：

```
$this->load->library('upload'); 
```

另一个问题在于您引用了错误的文件。

这一行是不必要的：

```
$image = $this->input->post('image'); // <- remove this line 
```

相反，只需使用：

```
if (!$this->upload->do_upload('image')) { 
```

默认情况下，CodeIgniter 正在查找名为“userfile”的文件输入，但如果不存在，则需要添加`'image'`到这样的`do_upload()`方法中。

然后你有这条线：

```
$id = $this->message_model->insert($message, $subject, $image); 
```

我不确定您认为`$image`变量中应该包含什么，但如果上传成功，您可以从以下位置附加数据`$data['upload']`：

```
$id = $this->message_model->insert($message, $subject, $data['upload'][file_name]); // <- gets the filename 
```

完整参考：http: [//ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

另外要回答您的第二个问题，多部分表单类型具有其他输入字段/类型不是问题。

# git - Git双向合并

> ID：16094589
> 
> 赞同：2
> 
> 时间：2013-04-18T23:08:44.863
> 
> 标签：git, merge, git-merge

我想知道处理这个 git 场景的最佳方法：

Git repo a：CoreProduct

Git repo b：SpecificCustomerProduct，它是从 a

到目前为止，我们一直在对 a 和 b 进行不同的更改，并且只将 a 合并到 b。到目前为止一切都很好 - 特定产品正在从我们的 CorePoduct 获得功能

现在，我们已经在 b 中完成了*一些*提交，我们希望重新回到 a 中（并且 a 中的新内容也需要像往常一样归结为 b）

问题：让这些特定的提交从 b 到 a 的最佳方式是什么，以使我们从 a 到 b 的更常规的合并尽可能轻松地向前推进？

问题：如果我们从头开始做这个，你会怎么做？

我正在考虑从 b 中挑选提交到 b 上的临时分支，然后将该分支“拉取”到 a，但我担心这会影响未来从 a 到 b 的合并。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:08:16.090

假设你的 repo 有这样的结构：

```
... --- A1(branch_A)
         \
          \
... ------ B1(branch_B) 
```

我的建议是：

(1) 以防万一，先用`git branch bak_A branch_A`and备份你的分支`git branch bak_B branch_B`。

(2) `git checkout branch_A`，进行修改（通过挑选或合并，任何你想要的）然后提交，你会得到一个像这样的 A2 （B1 和 A2 之间的边缘可能不存在，没关系）：

```
... --- A1 --- A2(branch_A)
         \    /
          \  /
... ------ B1(branch_B) 
```

(3) `git checkout branch_B`，那么`git commit-tree branch_B^{tree} -p branch_B -p branch_A -m "<commit messages>" | xargs -I {} git merge {}`，你会得到：

```
... --- A1 --- A2(branch_A)
         \    / \
          \  /   \
... ------ B1 --- B2(branch_B) 
```

其中 B1 和 B2 的内容相同。

(4) 现在你可以像以前一样继续你的开发了。`git branch -f branch_A bak_A`如果出现任何问题，您可以通过和恢复您的分支`git branch -f branch_B bak_B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T00:40:08.377

为了使将来的事情尽可能轻松，请确保 B 是最新的与来自通孔的更改`merge`或`rebase`然后执行与 A 相反的过程。 `cherry-pick`这不是一个好主意，因为这会创建一个新的提交 sha不会在历史中共享，并且可能会在未来造成麻烦。

从 B 到 A做 a`merge`是最简单的方法，并且可以让事情顺利进行。历史将显示来自 B 的提交，它不应该引起任何问题。

# eclipse - ADT 和 jdts - 使用 SQL Server 2012 进行配置

> ID：16094592
> 
> 赞同：2
> 
> 时间：2013-04-18T23:09:08.607
> 
> 标签：eclipse, sql-server-2012, adt, jtds

我正在尝试让 ADT 包 (Eclipse) 连接到 SQL-Server 2012 数据库。

这是我通过 SQL Explorer 尝试的：

![在此处输入图像描述](https://i.stack.imgur.com/LM4GA.png)

我收到了这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/8rd76.png)

我有一个名为“admin”的用户，其密码（我正确地提供给 jtds）。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:49:47.607

看起来您的 SQL-Server 未配置为允许远程连接。

看看这个答案：[https ://stackoverflow.com/a/11278115/1430055](https://stackoverflow.com/a/11278115/1430055)

还要检查正确的[身份验证模式](http://www.hosting.com/support/windows-vps/remotesqlexp)。

# ios6 - UIACollection 视图总细胞计数问题

> ID：16094595
> 
> 赞同：0
> 
> 时间：2013-04-18T23:09:33.933
> 
> 标签：ios6, uicollectionview, ios-ui-automation, uicollectionviewcell

我正在为一个应用程序开发 UIAutomation，并在为应用程序上的集合视图收集单元格时遇到一些问题。

当我`collectionView.cells()`在 javascript 中为 UIAutomation 执行操作时，我只返回可见的单元格，但是当我向下滚动浏览应用程序时，集合视图中确实有更多单元格。

有人遇到过同样的问题吗？有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:26:34.413

我认为这与我在这里给出的答案有关（[UIACollectionView 单元格与 visibleCells](https://stackoverflow.com/questions/13789905/uiacollectionview-cells-vs-visiblecells/13793922#13793922)）。出于某种原因，集合视图仅列出可见单元格。文档不正确。

# excel - Excel VBA 将值分配给用户定义函数的命名范围失败错误 1004

> ID：16094600
> 
> 赞同：1
> 
> 时间：2013-04-18T23:10:02.397
> 
> 标签：excel, range, named, vba

我在模块中有一个功能。函数定义如下：

```
Public Function CourseSetup(ByVal SROfferId As Integer) as string 
```

调用该函数时，以下行失败：

```
Worksheets("CourseEvaluation").Range("CourseName").value = "1234" 
```

失败并出现错误 1004。

子（宏）中的同一行有效。`CourseName`是一个名为 ranged 的​​单元格。获取上述范围的值是可行的。

在即时窗口中：

```
?Worksheets("CourseEvaluation").Range("CourseName").value 
```

返回范围内的当前值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:23:32.170

从工作表调用的函数*不能*操作除了输入公式的活动单元格之外的工作表对象。

这保留了公式中的依赖关系，防止循环引用错误等。

**作为一般规则**，使用子例程来操作对象，并使用公式来返回值（无论是单元格引用还是变量）。

一个例外是从子例程中调用的 UDF*可以*操作*工作*表对象，但这可能不是一个好习惯。将您的函数限制为将值返回到变量/单元格，并使用子例程来操作对象。

**进一步阅读：**

[使 Excel 函数影响“其他”单元格](https://stackoverflow.com/questions/201261/making-excel-functions-affect-other-cells)

[http://www.excelforum.com/excel-programming-vba-macros/477157-changeing-cell-values-from-within-udf.html](http://www.excelforum.com/excel-programming-vba-macros/477157-changing-cell-values-from-within-udf.html)

[http://www.ozgrid.com/Excel/free-training/ExcelVBA1/excelvba1lesson21.htm](http://www.ozgrid.com/Excel/free-training/ExcelVBA1/excelvba1lesson21.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:05:37.417

从单元格调用的用户定义函数只能将值返回到调用它们的单元格。因此，您的 UDF 不允许将值写入定义的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-09T18:23:49.183

几天前我遇到了这个问题并找到了这个答案。从函数转换为子解决了这个问题。但是，如果我在即时窗口中调用该函数，它会按预期执行。觉得这很奇怪。

# twitter-bootstrap - 使用引导模式和循环2在Firefox中不受限制的图像

> ID：16094603
> 
> 赞同：2
> 
> 时间：2013-04-18T23:10:17.010
> 
> 标签：twitter-bootstrap, modal-dialog, jquery-cycle2

我正在尝试在引导模式中放置一个简单的幻灯片。我正在使用 Cycle2 进行图像转换。这在 chrome 和 safari 中运行良好，包括移动设备。问题是图像不受 Firefox 和 IE 中模态窗口大小的限制。当我只有图像时它可以工作，但是当我用文本内容将图像包装在 div 层中时，它就会爆炸。我有 2 个只显示图像的小提琴，第二个也显示内容。

只是图片： http: [//jsfiddle.net/GswZ2/1/](http://jsfiddle.net/GswZ2/1/)（适用于所有浏览器）

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     <h3 id="myModalLabel">Modal header</h3>

</div>
<div class="modal-body">
    <div class="cycle-slideshow">
        <img src="http://www.hdwallpapersfan.com/wp-content/uploads/2013/02/kate-upton-2013.jpg" />
        <img src="http://content.clearchannel.com/cc-common/mlib/790/03/790_1364298792.jpg" />
        <img src="http://de.wallpapersus.com/wallpapers/2012/07/Kate-Upton-Lingerie-2-1050x1680.jpg" />
    </div>
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
</div> 
```

带有内容和图像： http: [//jsfiddle.net/aFmS9/4/](http://jsfiddle.net/aFmS9/4/)（不适用于 IE 和 FF）

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     <h3 id="myModalLabel">Modal header</h3>

</div>
<div class="modal-body">
    <div class="cycle-slideshow" data-slides="> div">
        <div>
            <img src="http://www.hdwallpapersfan.com/wp-content/uploads/2013/02/kate-upton-2013.jpg" />
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec magna nunc, euismod luctus fermentum at, pulvinar vitae odio. Pellentesque in aliquet leo. Vivamus placerat quam ac leo ornare interdum.</p>
        </div>
        <div>
            <img src="http://content.clearchannel.com/cc-common/mlib/790/03/790_1364298792.jpg" />
            <p>ALorem ipsum dolor sit amet, consectetur adipiscing elit. Donec magna nunc, euismod luctus fermentum at, pulvinar vitae odio. Pellentesque in aliquet leo. Vivamus placerat quam ac leo ornare interdum.</p>
        </div>
        <div>
            <img src="http://de.wallpapersus.com/wallpapers/2012/07/Kate-Upton-Lingerie-2-1050x1680.jpg" />
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec magna nunc, euismod luctus fermentum at, pulvinar vitae odio. Pellentesque in aliquet leo. Vivamus placerat quam ac leo ornare interdum.</p>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
</div> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-30T20:55:14.030

将“img-responsive”类添加到您的图像中。

# git - 除了“无法重新打包”之外没有其他 git 错误，我是一个 git noob

> ID：16094604
> 
> 赞同：2
> 
> 时间：2013-04-18T23:10:27.973
> 
> 标签：git

我尝试在我们的主 git 存储库中运行垃圾收集，它说“错误：无法运行重新打包”，但我没有看到任何其他错误消息来帮助我确定问题。“git fsck”和“git fsck --strict”都愉快地完成，没有错误，但“git gc”和“git gc --agressive”都以：

```
%> git gc
Counting objects: 120867, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (58692/58692), done.
error: failed to run repack 57/120867) 
```

有足够的内存和磁盘空间。我们正在使用 git 1.7.11

我不是很了解 git，但与此问题有关的其他问题似乎有一个特定的文件被提及并需要手动修复。我没有看到其他错误，也不知道如何继续修复它，如果它变得复杂，可能会使用带有解释或指向 git 主题的小词来提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:00:54.177

我想通了，也许这会对其他人有所帮助。

我最终设置 GIT_TRACE=1 并运行“git gc”，它在唯一错误之前运行的最后一个命令是：

```
trace: built-in: git 'pack-objects' '--keep-true-parents' '--honor-pack-keep' '--non-empty' '--all' '--reflog' '--unpack-unreachable=2.weeks.ago' '--local' '--delta-base-offset' '/db/sds14/user2/cwolf/cg_sandbox/.git/objects/pack/.tmp-24230-pack' 
```

手动运行该命令可以了解实际错误：

```
%> git 'pack-objects' '--keep-true-parents' '--honor-pack-keep' '--non-empty' '--all' '--reflog' '--unpack-unreachable=2.weeks.ago' '--local' '--delta-base-offset' '/db/sds14/user2/cwolf/cg_sandbox/.git/objects/pack/.tmp-24230-pack'
Counting objects: 120986, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (58821/58821), done.
Filesize limit exceeded 
```

“无限文件大小”是让“git gc”再次工作所需要的。我不知道为什么这个系统错误在以另一种方式运行时对我隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-03T21:42:46.287

我遇到了类似的情况，只是“无法运行重新打包”（覆盖“计数对象（#/#）”）并且没有其他错误消息；就我而言，所要做的就是使用该`--aggressive`选项来进行`git gc`工作（尽管没有该选项之后它仍然失败）

这是在 Windows 10 上；git 版本 2.19.0.windows.1

# java - 需要网络上机器的特定 IP 地址

> ID：16094606
> 
> 赞同：0
> 
> 时间：2013-04-18T23:10:38.747
> 
> 标签：java, networking

我的代码需要插入运行它的机器的 IP 地址。我这样做是通过，

```
InetAddress IP = InetAddress.getLocalHost();
String hostAddress = IP.getHostAddress().trim();
//insert ip into DB 
```

现在我的客户正确地告诉我，当在不同的机器上测试这段代码时，所有插入的 ip 都是 127.0.0.1。我知道机器是网络，因此返回本地主机 ip。

但如何解决这个问题？我需要单个盒子的唯一 IP 地址。

# android - 解析日期时出现异常

> ID：16094609
> 
> 赞同：-2
> 
> 时间：2013-04-18T23:10:44.590
> 
> 标签：android

我从 web 服务获取日期时间，实际上是从 sqlserver 数据库中提取数据，问题是当我尝试将字符串转换为日期时出现解析异常：

这是我的代码：

```
String tschedule = json.getString("ScheduledFor");
String tduration = json.getString("Duration");
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
SimpleDateFormat dateFormat1 = new SimpleDateFormat("HH:mm:ss");

Date schedule = new Date();
Date duration = new Date();

try
{
schedule = dateFormat.parse(tschedule); //exception here, tschedule="2013-04-12T11:25:26.703"  
duration = dateFormat1.parse(tduration);//or exception here, tduration="03:10:00"
}
catch(Exception ex)
{
Log.e("MEETINGS SERVICE", "Parse exception: " + ex.getMessage());
} 
```

**更新**：Logcat 输出：04-18 18:54:48.690：E/MEETINGS SERVICE(8601)：DateParse 异常：无法解析日期：2013-04-12T11:25:26.703

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:04:57.613

你错过了小数秒（粗体部分）：

> DateParse 异常：无法解析的日期：2013-04-12T11:25:26 **.703**

确保更改您的模式以包括以下内容：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS"); 
```

# sql - 左连接产生内连接结果 - PostgreSQL

> ID：16094611
> 
> 赞同：1
> 
> 时间：2013-04-18T23:10:58.713
> 
> 标签：sql, postgresql, left-join, greatest-n-per-group

我希望从零星发生的事件日志中获取值，并在事件之间的所有日期扩展这些值。例如：

一个完整的系列可能看起来像......

```
2013-01-01
2013-01-02
2013-01-03
2013-01-04
2013-01-05 
```

但是事件日志看起来像......

```
2013-01-01 | value_1
2013-01-04 | value_2 
```

期望的最终结果如下...

```
2013-01-01 | value 1
2013-01-02 | value 1
2013-01-03 | value 1
2013-01-04 | value 2
2013-01-05 | value 2 
```

作为解决方案，我正在尝试生成完整系列的日期，将选择性事件日志日期左连接到该完整系列，然后用所需的值填充 NULL 值，但我遇到了左连接的问题产生内部连接结果。

```
select 
days.date, 
e.value
from
--Generate table for dates
    (select  
    row_number() over (), 
    generate_series::date as date
    from
        generate_series('2009-01-01',current_date + interval '100 days',interval '1 day')) days
--Combine actual change log 
left join
    (select 
    value,
    event_date 
    from event_table 
    where type = 'desired_type') e
        on days.date = e.event_date 
```

我的结果集不是包含完整日期的 1669 行，而是只有几个 e.value，而是每个非 NULL days.date、e.value 组合只有一行。在视觉上，而不是...

```
2009-01-01 | value 1
2009-01-02 | NULL
2009-01-03 | NULL
2009-01-04 | value 2
2009-01-05 | NULL
... 
```

...我越来越...

```
2009-01-01 | value 1
2009-01-04 | value 2
... 
```

我希望这是一个内部连接，而不是从几天到 e 的左连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:43:38.497

`LEFT JOIN`应该只是工作。

您可以在很大程度上简化整个查询：

```
SELECT d.day, e.value
FROM  (
   SELECT rn, '2009-01-01'::date + rn AS day
   FROM   generate_series(0, (now()::date - '2009-01-01'::date) + 100) AS g(rn)
   ) d
LEFT JOIN event_table e ON e.event_date = d.day AND e.type = 'desired_type' 
```

然而，就在几天前，有人问了一个**非常相似的问题**。它有很多很好的答案（包括我可能添加的）。您将在此处找到问题的*完整解决方案*：
[如何使用这种不寻常的匹配条件编写连接？](https://stackoverflow.com/questions/15861543/how-do-i-write-a-join-with-this-unusual-matching-criteria)

# java - 线程“main”中的异常错误 java.util.InputMismatchException

> ID：16094613
> 
> 赞同：1
> 
> 时间：2013-04-18T23:11:15.233
> 
> 标签：java

我正在为我的 java 类做我的实验室，我这样做了，但无论我如何尝试修复它，我都会不断收到错误。我知道这个问题`case 1`在我的`switch`声明中。我尝试重新排序 infiles 并添加`inFile.nextLine();`到列表的开头、结尾和中间，但这也不起作用

这是错误：

```
Exception in thread "main" java.util.InputMismatchException
        at java.util.Scanner.throwFor(Scanner.java:840)
        at java.util.Scanner.next(Scanner.java:1461)
        at java.util.Scanner.nextInt(Scanner.java:2091)
        at java.util.Scanner.nextInt(Scanner.java:2050)
        at Lab6.main(Lab6.java:73) 
```

这是我的代码：

```
 import java.util.Scanner;
    import java.io.*;

    public class Lab6
    {
       public static int menu()
       {
               int ans;

               System.out.println("Please chose an option");

               System.out.println("1.Class Average");
               System.out.println("2.Student Average");
               System.out.println("3.Standard Deviation");
               System.out.println("4.Letter grades");
               System.out.println("5.Minimum/Maximum");
               System.out.println("6.Locate : ");
               System.out.println("7.Locate All students where the difference  between exam1 and exam2>15%");
               System.out.println("8.Histogram");
               System.out.println("9.Update data");
               System.out.println("10.Quit");

               Scanner keyboard = new Scanner (System.in);

               ans=keyboard.nextInt();

               return ans;

       }

       public static void main (String[] args)throws IOException
       {
            //variables
            int choice;
            int testno;
            int test1,
                test2;
            int NewScore;
            int count;
            int sum1,
                sum2;
            int avg1,
                avg2;
            String name;

            //get choice

            Scanner keyboard = new Scanner (System.in);

            choice=menu();

            File myFile = new File("lab6_indata.txt");
            Scanner inFile = new Scanner(myFile);

            switch(choice)
            {
                case 1:
                    System.out.println("You Chose Class Average\n");
                    count=1;
                    sum1=0;
                    sum2=0;
                    avg1=0;
                    avg2=0;
                    while(count<=25)
                    {
                        test1=inFile.nextInt();
                        test2=inFile.nextInt();

                        sum1=sum1 + test1;
                        sum2=sum2 + test2;
                        count ++;
                    }
                    avg1 = sum1 / count;
                    avg2 = sum2 / count;

                    System.out.println("Class Average Test 1:"+ avg1);
                    System.out.println("Class Average Test 2:"+ avg2);

                    break;

                case 2:
                    System.out.println("You Chose Student Average");
                    break;

                case 3:
                    System.out.println("You Chose Standard Deviation");
                    break;

                case 4:
                    System.out.println("You Chose Letter grades");
                    break;

                case 5:
                    System.out.println("You Chose Minimum/Maximum");
                    break;

                case 6:
                    System.out.println("You Chose Locate : ");
                    break;

                case 7:
                    System.out.println("You Chose Locate All students where the difference between exam1 and exam2>15%");
                    break;

                case 8:
                    System.out.println("You Chose Histogram");
                    break;

                case 9:
                    System.out.println("You Chose Update data");
                    System.out.println("Please Enter Name");
                    name=keyboard.nextLine();
                    System.out.println("Are you updating test number 1 or 2?");
                    testno=keyboard.nextInt();
                    System.out.println("What is the new score?");
                    NewScore=keyboard.nextInt();
                    break;

                case 10:
                    System.out.println("Program Ended");
                    break;

                default:
                    System.out.println("Error: Invaild option");
                    break;

            }

            inFile.close();

       }

} 
```

这是我的 inFile：

```
*Robert     70  82
*Joel       64  50  
*Alice      98  95
*Jasmine    76  92
*Larry      42  69
*Elizabeth  79  85
*Frank      75  66
*Christine  20  36
*Alex       0   52
*Ariel      84  81
*Luis       65  77
*Nicole     40  89
*Mitch      90  94
*Randy      88  86
*Tammy      91  84
*Sarah      78  71
*Samuel     80  66
*Lauren     55  63
*Deanna     97  99
*Mathew     100 87
*Justin     68  76
*Beth       96  95
*Rebecca    85  83
*Paul       44  65
*Lucy       34  56 
```

也许我的 inFile 需要采用不同的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:15:44.370

每行中的第一个标记是 a`String`所以需要在读取任何整数之前使用

```
String studentName = inFile.next();
test1 = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:18:24.000

来自[javadocs](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/InputMismatchException.html)：

> 由 Scanner 抛出以指示检索到的令牌与预期类型的​​模式不匹配，或者令牌超出预期类型的​​范围。

可能是您的输入格式不正确，并且 java 无法比较具有不同格式的两个事物，例如 an`int`和 a `string`。

# python - python socket recv() 和信号

> ID：16094618
> 
> 赞同：6
> 
> 时间：2013-04-18T23:11:42.470
> 
> 标签：python, sockets, signals, alarm

我有一个简单的（非线程）脚本，它在套接字上侦听数据，分析它并在内部使用`SIGALRM`'s 在预定义的计时器内部发送电子邮件。

问题是在`recv()`循环期间，出现的`SIGALRM`似乎引发了

```
socket.error: [Errno 4] Interrupted system call 
```

并因此终止程序。

我可以用 try/except 块包装`recv()`，但我想知道在此期间我是否会丢失任何数据，或者缓冲区是否会防止丢失。

```
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.bind((host, port))
while True:
    try:
        data = s.recv(2048)
    except socket.error, e:
        pass
    yield data
s.close()
return 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T23:34:39.963

在 C 中处理这个问题的标准方法是循环`EINTR`. 而且，虽然这在 Python 中*不应该*是必需的，但确实如此。

您的代码非常接近处理此问题的惯用方式，除了两件事：

*   您不想忽略*所有*错误，只需`EINTR`.
*   以这种方式忽略错误后，您不能`yield data`这样做，因为您将重新生成前一个数据包（如果有）或引发 a `NameError`（如果这是第一次通过循环）。

所以：

```
while True:
    try:
        data = s.recv(2048)
    except socket.error, e:
        if e.errno != errno.EINTR:
            raise
    else:
        yield data 
```

* * *

那么，为什么你必须这样做呢？

POSIX 几乎允许任何系统调用针对某些类型的临时故障（包括被信号中断）返回 EINTR。许多 POSIX 平台都这样做。预期的应用程序行为是重试（如果您正在尝试阻塞调用）或返回循环（如果您在电平触发反应器内）。[这篇博客文章](http://www.250bpm.com/blog:12)很好地解释了为什么 POSIX 以这种方式工作。（这是事后的理由，绝对不是实际的理由……）另请参阅[glibc 文档](http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html)。

与大多数脚本语言一样，Python 应该在`EINTR`内部封装所有易于调用的调用，因此您不必考虑这一点（除非您使用第三方 C 扩展）。但不幸的是，它有错误。发现并修复的最新案例集在[issue 9867](http://bugs.python.org/issue9867)和[issue 12268](http://bugs.python.org/issue12268)中。

即使他们最终掌握了一切，这也只有在您可以依赖足够新的 Python 版本时才会有所帮助。鉴于您使用的是 2.6 之前的样式`except`语法，并且最新的修复进入了一些 2.7.x 和 3.2.x 错误修复版本，这可能对您不起作用。

* * *

还有其他方法可以解决这个问题，但它们更复杂，更不便携。例如，您可以将阻塞替换`recv`为阻塞`pselect`和非阻塞`recv`，将 a`pipe`与套接字一起添加到 fd 集中，将所有信号处理程序替换为仅写入（一个字节）到该管道的函数，然后移动将实际的信号处理代码放入事件循环中。然后，在某些平台上，您将永远无法获得`EINTR`. 但这可能不是您想在 Python 中采用的方法。

# iphone - 如何判断 iOS 中的简单 png 动画何时完成？

> ID：16094625
> 
> 赞同：0
> 
> 时间：2013-04-18T23:11:57.990
> 
> 标签：iphone, ios, ipad, uiimageview

这是经典动画，但我需要知道它何时真正完成。谢谢

```
UIImageView* campFireView = [[UIImageView alloc] initWithFrame:self.view.frame];
campFireView.frame = CGRectMake(255.0f,0.0f,512.0f,384.0f);

campFireView.animationImages = [NSArray arrayWithObjects:
  [UIImage imageNamed:@"wish_launch_up_low_00000.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00001.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00002.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00003.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00004.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00005.png"],
  ,nil];

  campFireView.animationDuration = 0;
  campFireView.animationRepeatCount = 1;

  [campFireView startAnimating];

  [self.view addSubview:campFireView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:43:34.053

检测 UIImageView 动画很痛苦.. 但如果你不介意混乱，你可以做这样的事情..

```
UIImageView* campFireView = [[UIImageView alloc] initWithFrame:self.view.frame];
campFireView.frame = CGRectMake(255.0f,0.0f,512.0f,384.0f);

campFireView.animationImages = [NSArray arrayWithObjects:
  [UIImage imageNamed:@"wish_launch_up_low_00000.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00001.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00002.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00003.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00004.png"],
  [UIImage imageNamed:@"wish_launch_up_low_00005.png"],
  ,nil];

  campFireView.animationDuration = 4;  // <--- I changed the duration.. 
  campFireView.animationRepeatCount = 1;

  [campFireView startAnimating];

  [self.view addSubview:campFireView]; 
```

...

```
 // detect it with timer
  [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(onTimer) userInfo:nil repeats:YES];

-(void)OnTimer {
    if ( [campFireView isAnimating] )
    {
        // still animating
    }
    else
    {
        // Animating done
    }

} 
```

这只是一个示例，但如果您的动画持续时间小于计时器，您可以使用计时器对其进行检查以验证 isAnimating ...

但是，有很多选项可以为其他 UIImageView 设置动画...

# xamarin.ios - 无法连接到 Mac Build Host - 加载 xcode 信息时出错

> ID：16094629
> 
> 赞同：3
> 
> 时间：2013-04-18T23:12:46.570
> 
> 标签：xamarin.ios, xamarin, xamarin-studio

随着主题的出现，我无法连接到我的 mac 构建主机。它在本周早些时候工作（我认为有更新）。我也无法从 Xamarin 工作室运行 iOS 应用程序（我认为这与 Xamarin 连接到 Xcode 有关，因为当我尝试从 Xamarin 工作室运行时，我收到一条消息说代码尚未构建）

我尝试重新安装 xamarin.ios 以及 xcode。

当我运行时，`telnet localhost 5000`我收到以下消息（暗示问题出在 xcode 上）

```
Error: Error loading Xcode information for prefix '/Applications/Xcode.app/Contents/Developer'
Exception: Exception type: System.FormatException
Input string was not in the correct format at System.Int32.Parse (System.String s [0x00000] in <filename unknown>:0 
at MonoTouch.Tools.Frameworks.AppleSdkSettings.Init () [0x00000] in <filename unknown>:0 
System.ApplicationException: Apple SDK developer root not specified.
at MonoTouch.Tools.Frameworks.MonoTouchFrameworks.Init () [0x00000] in <filename unknown>:0 
at Mtb.Application.MainClass.Init () [0x00000] in <filename unknown>:0 
at Mtb.Application.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
Exception: Exception type: System.ApplicationException
Apple SDK developer root not specified.
at MonoTouch.Tools.Frameworks.MonoTouchFrameworks.Init () [0x00000] in <filename unknown>:0 
at Mtb.Application.MainClass.Init () [0x00000] in <filename unknown>:0 
at Mtb.Application.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
Error: Unknown error occurred.
Connection closed by foreign host. 
```

有没有其他人遇到过这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:14:54.317

`XCode`4.6.2 （还）不适用于 Xamarin Studio。[从https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)重新安装 4.6.1 。

这就是我在这里解决同样问题的方式

# sql - 满足这些要求的可能的 sybase/ansi transact sql 查询

> ID：16094632
> 
> 赞同：0
> 
> 时间：2013-04-18T23:13:07.703
> 
> 标签：sql, tsql, sybase

我正在尝试找出以下问题（对于 sybase）的事务处理 sql，这是我的问题。给定以下表格和数据：

表：bank_rating

```
| bank_name | agency   |
| BankA     | Marvel   |
| BankA     | Sullivan |
| BankA     | Fargo    |
| BankB     | Marvel   |
| BankB     | Fargo    | 
```

表：agent_rating

```
| agency | rating |
| Marvel | 1      |
| Short  | 1      |
| Fargo  | 2      | 
```

我需要执行以下操作。

用数据填充新表（示例如下）：

表：结果表

```
| bank_name | agency |
| BankA     | Marvel | 
```

这样：

*   我总是选择评级最低的机构。
*   如果两个机构的评级相同，则按字母顺序选择第一个机构。

我正在努力解决的问题是如何选择评级最低的机构，但如果评级相同，则按字母顺序选择第一个。

给定 sybase 的预期数据库，这个问题的事务处理 sql 是什么？

感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:19:03.890

尝试这个：

```
Select * from
(
  select b.bank_name, a.agency,
  rank() over (partition by b.bank_name order by a.rating, b.agency) rnk
  from bank_rating b
  inner join agency_rating a on b.agency = a.agency
)
where rnk = 1 
```

要创建新表，您可以执行

```
Select bank_name, agency into result_table from
(
  select b.bank_name, a.agency,
  rank() over (partition by b.bank_name order by a.rating, b.agency) rnk
  from bank_rating b
  inner join agency_rating a on b.agency = a.agency
)
where rnk = 1 
```

插入现有表

```
insert into result_table(bank_name, agency)
Select bank_name, agency from
(
  select b.bank_name, a.agency,
  rank() over (partition by b.bank_name order by a.rating, b.agency) rnk
  from bank_rating b
  inner join agency_rating a on b.agency = a.agency
)
where rnk = 1 
```

不使用窗口函数：

```
select bank_name, a.agency
from bank_rating b
outer apply (select top 1 y.agency
             from  bank_rating y
             inner join agency_rating x on y.agency = x.agency
             where y.bank_name = b.bank_name
             order by x.rating, x.agency) a 
```

# mysql - 使用 MySQL 时 WebBrick 服务器无法启动

> ID：16094634
> 
> 赞同：1
> 
> 时间：2013-04-18T23:13:10.030
> 
> 标签：mysql, ruby-on-rails, ruby, homebrew

我是 Rails 新手，当我尝试创建这样的新应用程序时：

```
$ rails new app_one -d mysql 
```

它安装并且一切都按预期工作。但是，如果我尝试在启用 MySQL 的本地服务器上运行它，它就不起作用。

```
> /Users/matthewpoplin/.rvm/gems/ruby-2.0.0-p0/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': Access denied for user 'root'@'localhost' (using password: NO) (Mysql2::Error) 
```

我正在使用 Rails 版本 3.2.13、Ruby 版本 2.0.0p0、MySQL 版本 5.6.10 和 Homebrew 0.9.4。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:22:27.363

您是否确保 Rails`database.yml`文件中数据库的所有用户名、密码等信息都是正确的？

通过查看输出中的这一行：

```
 Access denied for user 'root'@'localhost' (using password: NO) 
```

您的密码可能未在 Rails 数据库设置文件中设置。`database.yml`仔细检查您的设置文件 可能是个好主意。*（或者，这可能是您要使用的数据库用户名和密码的问题。）*

并附注以供将来参考：*如果可能，将来使用“root”以外的其他数据库用户可能会更好。*

# web - 域缺少 www 的 DNS CNAME

> ID：16094637
> 
> 赞同：0
> 
> 时间：2013-04-18T23:13:18.827
> 
> 标签：web, dns, cname

我遇到了一个无法使用 www 打开但没有 www 也可以工作的网站的问题。

www 和非 www 站点显示不同的 IP 地址。我知道 wwww 缺少 DNS CNAME。但情况是我正在为一个几天没有联系的客户工作。因此，我无法获取域登录详细信息来修改 CNAME。我尝试在 .htacess 中编写重定向规则，但它没有显示任何效果。

有没有其他方法可以解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:50:16.650

您需要的规则是（在 www 域的根目录中）。非 www 域的根不需要 .htaccess 即可工作（但可能稍后）。

```
 RewriteCond %{HTTP_HOST} ^www\.example\.com [NC]
 RewriteRule ^(.*)$ http://example.com/$1 [L,R=301] 
```

了解更多：[通用 htaccess 将 www 重定向到非 www](https://stackoverflow.com/questions/234723/generic-htaccess-redirect-www-to-non-www)

一旦您的客户回来，快点，将 www 和非 www 指向同一个托管空间，并确定哪个是突出的，如果您同时列出 www 和非 www，google 将不喜欢。只需上述规则，反之亦然。另请记住，通过更改域或破坏路由，您可能会失去排名。

# jquery - jQuery .animate.hover.stop 不工作

> ID：16094641
> 
> 赞同：0
> 
> 时间：2013-04-18T23:13:44.740
> 
> 标签：jquery, hover, mouseover, ticker

我试图让我的代码在用户悬停在它上面时停止，然后在它没有被悬停时重新开始。

```
$(function() {
    var ticker = function() {

        $('#Youtube .socialist:first').hover(function() {
            $("#Youtube .socialist:first").stop();
        });

        setTimeout(function(){
            $('#Youtube .socialist:first').animate( {marginTop: '-230px'}, 800, function()
            {
                $(this).detach().appendTo('#Youtube').removeAttr('style');
            });
            ticker();
        }, 5000);
    };
    ticker();
}); 
```

如果我将鼠标悬停在它的动画上，上面的代码会停止它，但没有其他时间。它也不会继续停止动画，就好像我在第一次停止后保持悬停状态一样，它会在下一次超时时重新开始。

我怎样才能让它在悬停时停止*滴答作响*并在没有悬停时重新开始？

**编辑：**添加 CSS & HTML + 新 JS

**JS：**

```
$(function() {
  $('#Youtube').on('hover', '.socialist:first', function() {
    clearTimeout(ticker);
  }, goTicker);

  goTicker();
});

var ticker; 

function goTicker() {
  ticker = setTimeout(function() {
    $('#Youtube .socialist:first').animate( {marginTop: '-230px'}, 800, function() {
      $(this).appendTo('#Youtube').removeAttr('style');
      goTicker();
    });
  }, 5000);
} 
```

**HTML：**

```
<html>
<head>

    <title>Consept</title>

<!-- JQuery --->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<!-- App Resorces --->
    <link href="stylesheets/jquery.socialist.css" rel="stylesheet" />
    <script src='javascript/jquery.socialist.min.js'></script>

<!-- Main Scripts --->
    <script type="text/javascript" src="javascript/scripts.js"></script>

<!-- Main Styles --->
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />

</head>
<body>
    <section id="AppBox">
        <div class="AppList">
            <div id="Youtube" class="App Note">
            </div> <!-- Youtube -->
        </div>
    </section>
</body>
</html> 
```

**CSS：**

```
body {
    margin:0;
    background-position:50% 50%;
    background-image:url('http://oracle/tests/newdesign/images/BG.jpg');
}
#AppBox{
    position:fixed;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:0;
}
.AppList {
    position:absolute;
    height:100%;
    width:100%;
    margin:0;
    padding:0;
}
.App {
    position:absolute;
    display:block;
    margin:5px;
    padding:0;
    box-shadow:0 0 5px 1px black;
    color:#FFFFFF;
    cursor:move;
}
#Youtube {
    overflow:hidden;
    background:linear-gradient(to bottom, #AF2B26 0px, #942422 100%) repeat scroll 0 0 #AF2B26;
}
.Note {
    height:230px;
    width:230px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:23:58.707

这就是你想要的：

```
$(function() {
  $('#Youtube').on('hover', '.socialist:first', function() {
    clearTimeout(ticker);
  }, goTicker);

  goTicker();
});

var ticker; 

function goTicker() {
  ticker = setTimeout(function() {
    $('#Youtube .socialist:first').animate( {marginTop: '-230px'}, 800, function() {
      $(this).appendTo('#Youtube').removeAttr('style');
      goTicker();
    });
  }, 5000);
} 
```

# python - XML 格式在新行中显示属性（Python）

> ID：16094645
> 
> 赞同：-1
> 
> 时间：2013-04-18T23:14:40.090
> 
> 标签：python, xml

我正在尝试将 XML 节点的属性分解为单独的行。输入是一个字符串，如：

```
<computer color="read" brand="Dell" version="T430" description="2013 new style" /> 
```

我用 , 一个空格分割字符串`，但由于描述中有一些空格，所以没有成功。我使用 Python 生成 XML 代码。`

 `谁能向我解释如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:20:51.940

由于您的 XML 代码格式正确，因此引号只能作为属性值的分隔符出现在此处。因此，您可以先用引号切断字符串，然后通过交替分隔符重新连接它们：每个奇数将是一个引号，每个偶数将是一个引号和一个换行符。

例如，如果`a`包含您的输入字符串，则此代码将起作用：

```
'"'.join(map(lambda x:'\n'+x if x.startswith(' ') else x, a.split('"'))) 
```

（它还使用了这样一个事实，即您需要换行符，其中引号后跟一个额外的空格）。或者，如果您出于某种原因不喜欢 lambda 函数；）

```
'"'.join(['\n'+x if x.startswith(' ') else x for x in a.split('"')]) 
````

# asp.net - Web API 嵌套资源在 IIS8 下失败

> ID：16094646
> 
> 赞同：1
> 
> 时间：2013-04-18T23:14:40.323
> 
> 标签：asp.net, iis, asp.net-web-api, iis-8

我有一个相当简单的 Web API 项目，在 WebApiConfig.cs 的默认路由下有以下路由：

```
config.Routes.MapHttpRoute(
   name: "ChildApi",
   routeTemplate: "api/{parentController}/{parentId}/{controller}/{id}",
   defaults: new { id = RouteParameter.Optional }
); 
```

这可以在 VS2012 开发服务器下正常运行并导航到我的测试 URI ( `/api/team/1/entries/2013-04-19`) 返回正确的结果。一旦我发布它并尝试使用 IIS8 访问相同的 URI，我会收到以下 404 错误：

```
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable.

Most likely causes:
The directory or file specified does not exist on the Web server.
The URL contains a typographical error.
A custom filter or module, such as URLScan, restricts access to the file.

Things you can try:
Create the content on the Web server.
Review the browser URL.
Create a tracing rule to track failed requests for this HTTP status code and see which module is calling SetStatus. For more information about creating a tracing rule for failed requests, click here.

Detailed Error Information:
Module     IIS Web Core
Notification       MapRequestHandler
Handler    StaticFile
Error Code     0x80070002 
```

所有非嵌套路由（例如`/api/team/1`）工作正常，但似乎这个特定的路由被解释为一个静态文件，而 IIS 正试图这样提供它？以前有没有其他人看到/解决过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:18:59.027

好吧，所以这很尴尬......

我在 WebApiConfig.cs 中设置了我的路由，如下所示：

```
config.Routes.MapHttpRoute(
   name: "ChildApi",
   routeTemplate: "api/{parentController}/{parentId}/{controller}/{id}",
   defaults: new { id = RouteParameter.Optional }
); 
```

然后，我继续以应用程序名称“api”将我已发布的项目添加到 IIS。这（现在显然）意味着我应该使用的 URL 是`/api/api/team/1/entries/2013-04-19`.

如下更改我的路线现在解决了我的问题：

```
config.Routes.MapHttpRoute(
   name: "ChildApi",
   routeTemplate: "{parentController}/{parentId}/{controller}/{id}",
   defaults: new { id = RouteParameter.Optional }
); 
```

我认为这种混淆是由于这条路线在调试模式下工作正常（好像 VS2012 开发服务器`/api`从 URL 中删除了第一个）。

# c# - 在 asp.net/mvc 的控制器内的操作中将标头添加到 http 响应

> ID：16094652
> 
> 赞同：15
> 
> 时间：2013-04-18T23:14:56.573
> 
> 标签：c#, asp.net-mvc, response, httpcontext

我正在将数据从服务器流式传输到客户端以使用`filestream.write`. 在这种情况下，我可以下载该文件，但它在我的浏览器中没有显示为下载。“另存为”的弹出窗口都不会出现，“下载栏”也不会出现在“下载”部分。环顾四周，我想我需要在响应标头中包含“某物”，以告诉浏览器此响应有附件。我也想设置cookie。为了做到这一点，这就是我正在做的事情：

```
 [HttpContext.Current.Response.AppendHeader("Content-Disposition","attachment;filename=" & name)]
    public ActionResult Download(string name)
    {
          // some more code to get data in inputstream.

          using (FileStream fs = System.IO.File.OpenWrite(TargetFile))
            {
                byte[] buffer = new byte[SegmentSize];
                int bytesRead;
                while ((bytesRead = inputStream.Read(buffer, 0, SegmentSize)) > 0)
                {
                    fs.WriteAsync(buffer, 0, bytesRead);
                }
            }
        }
        return RedirectToAction("Index");
    } 
```

我收到错误消息：“System.web.httpcontext.current 是一个属性，被用作一种类型。”

我是否在正确的位置更新标题？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T23:23:21.823

是的，你做错了试试这个，你应该在你的动作中添加标题，而不是作为属性标题添加到你的方法中。

```
HttpContext.Current.Response.AppendHeader("Content-Disposition","attachment;filename=" & name) 
```

或者

```
Request.RequestContext.HttpContext.Response.AddHeader("Content-Disposition", "Attachment;filename=" & name) 
```

***更新*** 据我所知，您正在对您的控制器/动作进行 ajax 调用，这将无法通过直接调用动作来下载文件。您可以通过这种方式实现它。

```
public void Download(string name)
        {
//your logic. Sample code follows. You need to write your stream to the response.

            var filestream = System.IO.File.ReadAllBytes(@"path/sourcefilename.pdf");
            var stream = new MemoryStream(filestream);
            stream.WriteTo(Response.OutputStream);
            Response.AddHeader("Content-Disposition", "Attachment;filename=targetFileName.pdf");
            Response.ContentType = "application/pdf";
        } 
```

或者

```
 public FileStreamResult Download(string name)
    {
        var filestream = System.IO.File.ReadAllBytes(@"path/sourcefilename.pdf");
        var stream = new MemoryStream(filestream);

        return new FileStreamResult(stream, "application/pdf")
        {
            FileDownloadName = "targetfilename.pdf"
        };
    } 
```

在您的 JS 按钮单击中，您可以执行与此类似的操作。

```
 $('#btnDownload').click(function () {
            window.location.href = "controller/download?name=yourargument";
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T23:24:50.133

请看[这里](http://www.mikesdotnetting.com/Article/125/ASP.NET-MVC-Uploading-and-Downloading-Files)。

以下摘自参考网站。

```
public FileStreamResult StreamFileFromDisk()
{
    string path = AppDomain.CurrentDomain.BaseDirectory + "uploads/";
    string fileName = "test.txt";
    return File(new FileStream(path + fileName, FileMode.Open), "text/plain", fileName);
} 
```

编辑1：

从我们的好 ol' SO 中添加一些您可能更感兴趣的东西。[您可以在此处](https://stackoverflow.com/questions/5826649/returning-a-file-to-view-download-in-mvc)查看完整的详细信息。

```
public ActionResult Download()
{
    var document = ...
    var cd = new System.Net.Mime.ContentDisposition
    {
        // for example foo.bak
        FileName = document.FileName, 

        // always prompt the user for downloading, set to true if you want 
        // the browser to try to show the file inline
        Inline = false, 
    };
    Response.AppendHeader("Content-Disposition", cd.ToString());
    return File(document.Data, document.ContentType);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:26:10.557

改变：

```
return RedirectToAction("Index"); 
```

至：

```
return File(fs, "your/content-type", "filename"); 
```

并将 return 语句移动到您的 using 语句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T21:45:41.160

过去，我建立了一个白名单，以允许某些域对我的网站进行 iframe。请记住 Google 用于 iframe 网站的图像缓存。

```
static HashSet<string> frameWhiteList = new HashSet<string> { "www.domain.com",
                                                    "mysub.domain.tld",
                                                    "partner.domain.tld" };

    protected void EnforceFrameSecurity()
    {
        var framer = Request.UrlReferrer;
        string frameOptionsValue = "SAMEORIGIN";

        if (framer != null)
        {
            if (frameWhiteList.Contains(framer.Host))
            {
                frameOptionsValue = string.Format("ALLOW-FROM {0}", framer.Host);
            }

        }

        if (string.IsNullOrEmpty(HttpContext.Current.Response.Headers["X-FRAME-OPTIONS"]))
        {
            HttpContext.Current.Response.AppendHeader("X-FRAME-OPTIONS", frameOptionsValue);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-14T12:57:38.810

```
public FileResult DownloadDocument(string id)
        {
            if (!string.IsNullOrEmpty(id))
            {
                try
                {
                    var fileId = Guid.Parse(id);

                var myFile = AppModel.MyFiles.SingleOrDefault(x => x.Id == fileId);

                if (myFile != null)
                {
                    byte[] fileBytes = myFile.FileData;
                    return File(fileBytes, System.Net.Mime.MediaTypeNames.Application.Octet, myFile.FileName);
                }
            }
            catch
            {
            }
        }

        return null;
    } 
```

# android - 使用 setTextColor() 以编程方式设置 Android TextView 文本颜色会导致 android:duplicateParentState 无效

> ID：16094654
> 
> 赞同：7
> 
> 时间：2013-04-18T23:15:07.420
> 
> 标签：android, textview, textcolor

我有一个简单文本项目的列表视图。这些项目中的 TextView 看起来像这样（它包含在 a 中`RelativeLayout`）：

```
<TextView
  android:id="@+id/text_language_name"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentLeft="true"
  android:layout_centerVertical="true"
  android:duplicateParentState="true"
  android:textSize="16sp"
  android:textStyle="bold" /> 
```

我想对文本使用以下颜色状态选择器，我称之为“dark_list_text_states.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="@android:color/white"/>
    <item android:color="@color/dark_list_text"/>

</selector> 
```

通常，当然，我可以将其设置为`android:textColor`xml 中的属性，但在这种情况下，我需要使用此选择器（“blue_text_states.xml”）以编程方式将一个特定项目设置为不同的颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="@android:color/white"/>
    <item android:color="@color/selected_blue"/>

</selector> 
```

所以我在适配器中设置了文本颜色（`language_name`并`selected`在代码前面定义）：

```
 TextView text_language_name = (TextView)view.findViewById(R.id.text_language_name);
        if (text_language_name != null) {
            text_language_name.setText(language_name);
            int text_color = selected
                           ? getResources().getColor(R.color.blue_text_states)
                           : getResources().getColor(R.color.dark_list_text_states);
            text_language_name.setTextColor(text_color);
            text_language_name.setDuplicateParentStateEnabled(true);
        } 
```

这很好用，除了一个问题：单击项目时文本颜色不会改变。即使我`setDuplicateParentStateEnabled(true)`在 之后立即调用该项目`setTextColor()`，该设置也被完全忽略。

我已经通过注释掉设置文本颜色的 Java 代码并将其设置在 xml 中进行了测试，并且选择器工作得很好。但是，如果我以编程方式设置 textColor，则完全无法复制父状态。

有没有人见过这个？是否有解决方法，或者这只是我必须忍受的 Android 错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T23:19:44.983

好的，发现我的错误了。我应该使用`getResources().getColorStateList()`而不是`getResources().getColor()`. 把这个留给其他犯同样错误的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T13:16:23.907

从colors.xml：`textview.setTextColor(getResources().getColor(R.color.your_color));`

从安卓系统：`textview.setTextColor(Color.BLACK);`

享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T08:13:57.353

getColor() 已弃用

```
textViewObject.setTextColor(ContextCompat.getColor(context,R.color.white)) 
```

# grails - 如何使用 POST 方法（rest 插件 - grails）？

> ID：16094656
> 
> 赞同：0
> 
> 时间：2013-04-18T23:15:19.650
> 
> 标签：grails, grails-plugin

我正在使用 grails 插件： [REST 客户端设施](http://grails.org/plugin/rest) 我可以使用 Get like this 方法（代码来自 grails rest 插件页面）：

```
withHttp(uri: "http://www.google.com") {
   def html = get(path : '/search', query : [q:'Groovy'])
   assert html.HEAD.size() == 1
   assert html.BODY.size() == 1
} 
```

有谁知道如何使用 Post 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:28:01.270

您可以参考[HTTPBuilder POST](http://groovy.codehaus.org/modules/http-builder/doc/post.html)。

# php - Zimbra Preauth 无法在实时服务器上运行

> ID：16094659
> 
> 赞同：0
> 
> 时间：2013-04-18T23:15:43.877
> 
> 标签：php, authentication, portal, zimbra

我正在创建一个门户网站，用户可以从我们的 Zimbra 邮件服务器中提取他们的电子邮件并显示在门户网站上，但是，我在使用 Zimbra Preauth 时遇到了一些奇怪的问题。本质上，preauth 在我的 LocalHost 上完美运行，但是当从实时服务器访问时，它会给出 HTTP 500 错误。我怀疑这是与构成 preauth url 一部分的时间戳有关的问题。*“访问 /service/preauth 时出现问题。原因：对于输入字符串：“1.365843887E 12”*我用于生成 preauth URL 的代码如下所示：

```
 $PREAUTH_KEY = [My Key];
            $WEB_MAIL_PREAUTH_URL = "http://myserver/service/preauth";

            $timestamp=time()*1000;

            $preauthToken = hash_hmac("sha1",$email."|name|0|".$timestamp,$PREAUTH_KEY);
            $preauthURL = $WEB_MAIL_PREAUTH_URL."?account=".$email."&by=name&timestamp=".$timestamp."&expires=0&preauth=".$preauthToken."&redirectURL=/zimbra/h/"; 
```

`$timestamp`通过将“错误”值分配给上面的变量，我能够在我的 LocalHost 开发机器上重新创建问题。那么，在实时服务器上工作时可能导致 Zimbra 预授权“中断”的可能原因是什么？谢谢。

# c# - 在 C# 中利用 Factory 中的对象编写扩展方法

> ID：16094661
> 
> 赞同：2
> 
> 时间：2013-04-18T23:16:07.960
> 
> 标签：c#, design-patterns, extension-methods, factory-pattern

我面临一个关于如何将源自工厂的对象正确集成到扩展方法中的设计问题。

假设我有对象 Foo，我通过像 TopLevelStatic.GetFoo() 这样的工厂方法获得 Foo。Foo 有一个有价值的功能框架，再次作为工厂实现。

```
Foo.GetBar();
Foo.GetBaz();
Foo.GetBaz().GetBiz(); 
```

假设我想围绕需要 Foo 的对象编写一堆扩展方法，例如：

```
public static MyObj ToMyObj(this Biz biz, Foo foo){      
    return new MyObj(biz + foo.GetBar());
} 
```

现在我发现自己遇到的问题是，我正在编写的几乎所有扩展方法都需要 Foo 以某种能力，这让我质疑扩展是否应该将 Foo 作为顶级对象而不是逻辑位置像 Biz 这样的相关对象（MyObj 与 Biz 有一些业务逻辑关系）。

我只是将 Foo 传递给我的所有扩展方法吗？那感觉不对。我如何有效地对一个我无法控制其生命周期的对象进行静态处理。如果 _self 尚未由其他代码设置，那么实现引发 GetInstance 异常的单例在语义上是否可以？由于没有构造函数或包含扩展方法的实际对象，因此有没有办法使用 DI 执行此操作

# java - 在 Eclipse 中右键单击项目或文件时不显示查找错误

> ID：16094668
> 
> 赞同：1
> 
> 时间：2013-04-18T23:16:54.347
> 
> 标签：java, junit, eclipse-plugin, findbugs

我有 Eclipse 4.2.1，我刚刚下载了 find bug。它显示在显示视图中，并且市场说它已安装，但是当我右键单击整个项目或单个 Junit 测试用例时，该选项不存在。我查看了查找错误首选项，没有看到任何有用的信息。有什么想法吗？不用右键还能用吗？（我正在尝试按照教程进行操作，但我被困在右键单击步骤中）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:34:24.137

我不知道是否有人会像我一样遇到这种情况，但以防万一它可以帮助某人，我会回答这个问题。

问题出在我正在处理的项目上，由于某种原因，当我使用 svn 签出时，它没有作为 java 项目下载，因此发现错误对它不起作用。我再次签出项目，它作为一个java项目正常签出，我没有问题

# html - 如何添加“在 facebook / twitter 上像我们一样”按钮

> ID：16094673
> 
> 赞同：-2
> 
> 时间：2013-04-18T23:17:38.900
> 
> 标签：html, facebook-like, twitter-follow

我有一个博客类型的网站，我想在每个页面的底部添加一行按钮，上面写着“在 facebook 上点赞我们”和“在 twitter 上关注我们”。我该怎么做呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:20:19.347

我与这些人没有任何关系，但他们有一个非常简单的解决方案并提供免费分析，我没有在博客中使用它们，但我已经在我的网页上实现了它们：

[添加这个](http://www.addthis.com)

# python - sha512 哈希是否可以以 64 个零开头？

> ID：16094676
> 
> 赞同：0
> 
> 时间：2013-04-18T23:17:54.703
> 
> 标签：python, hash, cryptography, sha512

我只是在考虑在哈希中重复的数字，我想知道是否有可能 sha512 哈希的一半由 64 个连续的零组成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:10:27.650

正如克里斯所说 - 你应该有同样的机会得到这样的散列作为任何其他散列。所以这个概率是 1 / 2^64。

如果您想找到这样的哈希，您可以希望有人已经找到它并将其放入[**彩虹表**](http://en.wikipedia.org/wiki/Rainbow_table)中。我试图在[这里](http://crackstation.net/)找到这样的哈希，但失败了:)

您也可以自己尝试一下。我尝试了这样一个幼稚的脚本：

```
import random
import string
import hashlib
import datetime
s=string.lowercase+string.digits
random.seed(datetime.datetime.utcnow())

while 1:
    x = ''.join([random.choice(s) for a in range(random.randint(2,1024))])
    if hashlib.sha512(x).hexdigest().startswith('0000000000000000'):
        print x
        exit() 
```

但后来我突然想到，我的机会仍然很小。所以.. 算法必须做的预期迭代次数是 2^64。我的机器进行了 100000 次迭代

```
real    1m7.762s
user    1m5.908s
sys     0m0.123s 
```

所以迭代的时间是 0.0006776 秒。

总而言之-在没有优化的情况下，在我的机器上获得结果大约需要 396357000*年。*

好吧，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:30:16.443

它与任何其他哈希值一样可能，或者应该是。

# c# - WPF复选框双向绑定不起作用

> ID：16094679
> 
> 赞同：15
> 
> 时间：2013-04-18T23:18:02.727
> 
> 标签：c#, wpf, xaml, checkbox, binding

我有

```
 <DataGridCheckBoxColumn 
     Binding="{Binding Path=Foo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
 /> 
```

和

```
 public bool Foo{ get; set; } 
```

Checking/Unchecking sets `Foo`，但`Foo`代码中的设置不会更改 Checkbox 状态。有什么建议吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T23:33:08.830

当您将`PropertyChanged`Foo 设置为`DataContext`. 通常，它看起来像：

```
public class ViewModel : INotifyPropertyChanged
{
    private bool _foo;

    public bool Foo
    {
        get { return _foo; }
        set
        {
            _foo = value;
            OnPropertyChanged("Foo");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        var propertyChanged = PropertyChanged;
        if (propertyChanged != null)
        {
            propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

如果您调用`Foo = someNewvalue`，该`PropertyChanged`事件将被引发并且您的 UI 应该被更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T16:18:12.793

我花了几个小时寻找这个问题的完整答案。我猜有些人认为搜索这个问题的其他人知道基础知识——有时我们不知道。通常缺少有关设置表单数据上下文的一个非常重要的部分：

```
 public YourFormConstructor()
    {
        InitializeComponent();
        DataContext = this;                 // <-- critical!!
    } 
```

我的复选框控件是在 xaml 文件中设置的，如下所示：

```
<CheckBox x:Name="chkSelectAll" IsChecked="{Binding chkSelectAllProp, Mode=TwoWay}" HorizontalAlignment="Left"/> 
```

"Path=" 和 "UpdateSourceTrigger=..." 部分似乎是可选的，所以我将它们排除在外。

我在 ListView 标题列中使用此复选框。当有人选中或取消选中复选框时，我希望 ListView 中的所有项目也被选中或取消选中（选择/取消选择所有功能）。我在示例中保留了该代码（作为“可选逻辑”），但您的复选框值逻辑（如果有）将替换它。

The ListView contents are set by browsing for a file, and when a new file is selected, code sets the ListView ItemsSource and the CheckBox is checked (selecting all the new ListView items), which is why this two-way operation is required. 此示例中不存在该部分代码。

xaml.cs 文件中处理 CheckBox 的代码如下所示：

```
 // backing value
    private bool chkSelectAllVal;

    // property interchange
    public bool chkSelectAllProp
    {
        get { return chkSelectAllVal; }
        set
        {
            // if not changed, return
            if (value == chkSelectAllVal)
            {
                return;
            }
            // optional logic
            if (value)
            {
                listViewLocations.SelectAll();
            }
            else
            {
                listViewLocations.UnselectAll();
            }
            // end optional logic
            // set backing value
            chkSelectAllVal = value;
            // notify control of change
            OnPropertyChanged("chkSelectAllProp");
        }
    }

    // object to handle raising event
    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event
    protected void OnPropertyChanged(string name)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));
    } 
```

# angularjs - 点击时angularjs替换整个div

> ID：16094685
> 
> 赞同：0
> 
> 时间：2013-04-18T23:18:50.587
> 
> 标签：angularjs

假设我有一个

```
<div class="leftbar">
 <div class="leftcontent>
 This is leftbar
 </div>
</div> 
```

和一个右栏

```
<div class="rightbar">
 <div class="rightcontent">     
 This is rightbar
 <button>I have a button here</button>
 </div>
</div> 
```

单击右栏按钮时，我想从任何地方获取数据，然后将整个`div left content`替换`div right content`为`new div with {{data}}`

我还没有尝试任何东西，因为我不知道如何开始。而且我也知道我们可以通过使用共享服务并将值传递给其他人来做到这一点，`ng-controller`但我的问题是如何在不导航到另一个 url 的情况下替换整个 div。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:51:13.667

ngShow 对于您描述的那种交换很有用。

```
<div class="leftbar">
    <div class="leftcontent" ng-show="!clicked">
        This is leftbar
    </div>
    <div class="newleftcontent" ng-show="clicked">
        {{data}}
    </div>
</div>

<div class="rightbar">
    <div class="rightcontent">     
        This is rightbar
        <button ng-click="clicked=1">I have a button here</button>
    </div>
</div> 
```

您暗示这两个区域可能由不同的控制器运行。如果是这种情况，那么，是的，您应该创建一个服务来处理 和 的值，`clicked`以便`data`可以在两个控制器之间注入和共享它。您可能想澄清您的问题以获得更具体的帮助。

# javascript - Javascript 错误检查错误。（表单验证）

> ID：16094689
> 
> 赞同：0
> 
> 时间：2013-04-18T23:19:10.057
> 
> 标签：javascript, html

我正在尝试验证表单中的多个字段。在大多数情况下，我的代码似乎可以工作，但经过进一步测试，我发现了一些奇怪的行为。无论出于何种原因，如果最后一个字段有效，我的表单似乎会通过，在这种情况下，所有其他错误检查都将被忽略。另外请注意，我的消息似乎没有更新，在错误提交后，再次提交时出现不同的错误。谁能向我解释为什么会发生这种情况？

这是我的提交按钮。

```
<button type="submit" onclick="return validateRegistrationForm()" >
    Register
</button> 
```

脚本：

```
function validateRegistrationForm()
{
    return validateUsername(), validatePassword(), validateConfirmPassword();
}

function validateUsername()
{
    var x=document.forms["registration"]["userName"].value;if (x == null || x == "")
    {
        document.getElementById("usernameWarnings").innerHTML = "Username is Required!";
        return false;
    }
    else if (x.length < 6 || x.lenth > 10)
    {
        document.getElementById("usernameWarnings").innerHTML = "Must be Between 6 to 10 Characters!";
        return false;
    }
    else
    {
        return true;
    }
}

function validatePassword()
{
    var y=document.forms["registration"]["userPassword"].value;
    if (y == null || y == "")
    {
        document.getElementById("passwordWarnings").innerHTML = "Password is Required!";
        return false;
    }
    else if (y.length < 6 || y.lenth > 10)
    {
        document.getElementById("passwordWarnings").innerHTML = "Must be Between 6 to 10 Characters!";
        return false;
    }
    else
    {
        return true;
    }
}
function validateConfirmPassword()
{
    var y=document.forms["registration"]["userPassword"].value;
    var k=document.forms["registration"]["cUserPassword"].value;
    if (k == null || k == "")
    {
        document.getElementById("confirmPasswordWarnings").innerHTML = "Confirm Password is Required!";
        return false;
    }
    else if (y != k)
    {
        document.getElementById("confirmPasswordWarnings").innerHTML = "Passwords not the same";
        return false;
    }
    else
    {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:23:26.103

我想你想要：

```
return validateUsername() && validatePassword() && validateConfirmPassword(); 
```

`&&`s 是确保满足所有条件所必需的。

更新

并非所有错误消息都会显示，因为 javascript “短路”了`&&`运算符。这意味着如果左侧的`&&`计算结果为`false`，则右侧甚至不会运行（因为保证操作的输出`false`在该点）。以下是确保它们全部执行的方法：

```
function validateRegistrationForm() {
    var valid = true;
    valid = validateUsername() && valid;
    valid = validatePassword() && valid;
    valid = validateConfirmPassword() && valid;
    return valid;
} 
```

# java - JFrame背景颜色不会改变？

> ID：16094692
> 
> 赞同：0
> 
> 时间：2013-04-18T23:19:39.250
> 
> 标签：java, swing, jframe

所以，我试图显示一个简单的 JFrame 但我无法更改背景颜色？做了一些搜索，他们都建议使用我拥有的 useContentPane。

```
 import java.awt.*;

import javax.swing.*; 

public class Login {

     public static void main(String[] args) {

         createWindow();

         } 

    private static void createWindow() {
        JFrame frame = new JFrame("Login System");
        frame.getContentPane().setBackground(Color.darkGray);
        frame.setSize(350, 350);    
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextField username = new JTextField();
        frame.add(username);
        frame.setVisible(true);
    }

} 
```

JFrame 大小有效，但背景无效，TextField 无效，对此非常新。有任何想法吗？感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:22:23.460

代码工作正常。问题是您的文本字段占据了整个框架。尝试：

```
//frame.add(username);
frame.add(username, BorderLayout.NORTH); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-16T11:42:04.017

您的代码的问题是您的文本字段覆盖了整个 jframe

一种方法是在设计视图中减小文本字段的大小，然后在代码中添加这一行

**getContentPane().setBackground(Color.BLACK);**

# entity-framework - 如何避免使用为实体框架生成代码的 Microsoft 自定义工具？

> ID：16094694
> 
> 赞同：0
> 
> 时间：2013-04-18T23:19:45.217
> 
> 标签：entity-framework, orm, code-generation, poco, mapping-by-code

微软倾向于提供在 Visual Studio 中生成代码的自定义工具并不总是吸引我。对于实体框架，我想避免使用 Db 上下文模板或创建 edmx 文件。

我不喜欢在 Visual Studio 中生成代码的 Microsoft 自定义工具的原因有很多：

1) 实体框架配置数据库的连接字符串有一些丑陋的元数据代码

2) 当我需要更改日期模型时，我必须更改 edmx 视觉文件。当我想更改数据模型时，我不喜欢将控制权交给某种可视化工具。这似乎是“我无法控制的”？

请告诉我如何手动编码 POCO，以及它们相应的按代码映射来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:23:57.157

您将需要使用实体框架“代码优先”的方法。有许多教程对此进行了深入探讨。看看[这里](http://codefirst.codeplex.com/)

# android - 如何将选定的列表视图项目转移到另一个列表视图

> ID：16094697
> 
> 赞同：0
> 
> 时间：2013-04-18T23:19:52.930
> 
> 标签：android, listviewitem

到目前为止，我已经完成了从 ListView 中选择我想要的数据并使用以下代码打开下一个活动的困难。

```
 list.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> listView, View view, 
             int position, long id) {
           // Get the cursor, positioned to the corresponding row in the result set
           Cursor cursor = (Cursor) listView.getItemAtPosition(position);

           String playerName = 
            cursor.getString(cursor.getColumnIndexOrThrow("Player_Name"));
           Toast.makeText(getApplicationContext(),
             playerName, Toast.LENGTH_SHORT).show();
           Intent in = new Intent(context, PlayerStatsActivity.class);
           in.putExtra ("Name", playerName);
           startActivity(in);
         finish();
           }
      }); 
```

PlayerStatsActivity 类

```
 public void onCreate (Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.statseditor);
     dbHelper = new PlayerStatsDatabase(this);
      dbHelper.open();
     Bundle extras = getIntent().getExtras();
     if(extras !=null){
         String value = extras.getString("Name");
     }
      //Clean all data
    //  dbHelper.deleteAllStats();
      //Add some data
      //dbHelper.insertSomeCountries();

      //Generate ListView from SQLite Database
      //displayListView();
    // list = getListView();
     String PlayerNameText = extras.getString("Name");
     btnSave2 = (Button) findViewById(R.id.btnSaveStats);
     btnClear = (Button) findViewById(R.id.btnClearStats);
    txtGoalsScored = (EditText) findViewById(R.id.txtGoal);
    txtMinutesPlayed = (EditText) findViewById(R.id.txtMinPlayed);
    txtSubstituteIn = (EditText) findViewById(R.id.txtSubIn);
    txtSubstituteOut = (EditText) findViewById(R.id.txtSubOut);
    radioSubIn = (RadioButton) findViewById (R.id.rdoSubIn);
    radioSubOut = (RadioButton) findViewById (R.id.rdoSubOut);
    playerRating = (RatingBar) findViewById (R.id.ratingBar1);
    playerName = (TextView) findViewById (R.id.textView1);
    playerName.setText(PlayerNameText); 
```

我希望`playerName`从上一个活动中选择的字符串显示在`playerName TextView`. 以上是我尝试过但`PlayerNameText`返回空值的方法。

我已经有了

```
 String value = extras.getString("name");
     } 
```

这应该得到我的 playerName String 我只需要调用我的 playerName textfeild 我想但不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:28:39.567

在您的第一个活动中，您正在设置

> in.putExtra("名字", playerName);

在您尝试访问的其他活动中

> 字符串值 = extras.getString("name");

一个名称以大写 N 开头，另一个名称以大写 N 开头。使它们都相同。

编辑二：

在 in.putExtra ("Name", playerName); 之前试试这个 看看你是否在节省价值。然后在日志中看到你说的是 Player name，而不仅仅是 null。

Log.d("TAG", "Value: "+ playerName);

# c# - 搜索方法产生错误

> ID：16094703
> 
> 赞同：1
> 
> 时间：2013-04-18T23:20:58.187
> 
> 标签：c#, asp.net-mvc, search, int

我需要通过 int 类型的“CourseID”在数据库中搜索“Courses”。我有一个简单的搜索视图表单，它只有一个文本字段“CourseID”：

```
<% using (Html.BeginForm())
   { %>
    <%= Html.AntiForgeryToken() %>
    <fieldset>
        <legend> Search By Course ID#:</legend>
            <label for="CourseID">Enter Course ID#:</label>
            <%= Html.TextBox("CourseID", Model.CourseID) %>
            <%= Html.ValidationMessage("CourseID", "*") %>
    </fieldset>
    <p>
        <input type="submit" value="Submit" />
    </p>
<% }%> 
```

在 Controller 类中，我有一个 SearchCourse 操作方法：

```
// GET: /SearchCourse
    [Authorize(Roles = "Administrator")]
    public ActionResult SearchCourse(int courseID)
    {

        return View(new SearchCourse(
            new List<Courses>().AsQueryable(), courseID));
    }

    // 
```

当我运行应用程序时，我收到一条错误消息：

> “/”应用程序中的服务器错误。参数字典包含“Certifications.Controllers.SearchCourseController”中方法“System.Web.Mvc.ActionResult SearchCourse(Int32)”的不可为空类型“System.Int32”的参数“courseID”的空条目。要使参数可选，其类型应该是引用类型或 Nullable 类型。参数名称：参数

请帮助我理解代码中有什么问题。如果我将参数从“int”类型更改为“string”类型，则不会出现此错误。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:29:37.147

如果您使用的是 MVC 应用程序附带的默认路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

它没有将视图和客户端中的值映射到`clientID`操作中的原因是路由中的 url 参数与操作中的参数名称不匹配。他们一定是一对。

将参数更改为：

```
public ActionResult SearchCourse(int id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:30:43.013

这样做的原因是您认为某些方式没有发送您键入的 courseID。将其更改为以下

```
 <% Html.EditorFor(model=> Model.CourseID)%> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T23:24:47.503

似乎 NULL 值已传递给 courseID 参数，这会导致错误，因为 int 不可为空。

改成

```
 public ActionResult SearchCourse(int? courseID) 
```

请注意，这实际上是您问题的答案。你的问题是

> “请帮助我理解代码中的错误。如果我将参数从“int”类型更改为“string”类型，我不会出现此错误。”

# dataset - 从 imdb 获取电影标题数据集

> ID：16094704
> 
> 赞同：1
> 
> 时间：2013-04-18T23:21:09.803
> 
> 标签：dataset, imdb

我想要用于学术研究工作的电影标题数据集。我从 facebook 收集了不同的赞。我想从用户的喜欢中过滤电影。IMDB 拥有庞大的电影收藏。[我从http://www.imdb.com/interfaces](http://www.imdb.com/interfaces)下载电影列表。但名单很小。列表中缺少许多电影。我下载了**movies.list.gz** (24mb)。如何找到 imdb 的完整电影名称列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T11:43:45.033

我以前使用过 IMDB 的数据集进行学术研究。

解压**movies.list.gz**后，你会得到一个大约120 MB 和2600000 多部电影的文件，这对我来说似乎是相当数量的电影，呵呵。

提示：如果您尝试将 IMDB 的数据与您可能拥有的其他电影数据集集成，请下载“aka-titles.list.gz”文件，因为它包含电影标题的不同变体。

# php - 使用 CodeIgniter 进行导航

> ID：16094708
> 
> 赞同：2
> 
> 时间：2013-04-18T23:21:24.910
> 
> 标签：php, codeigniter

我正在寻找关于导航如何在 CI 中工作的解释。

基本上，我有一个带有一些链接的顶部导航，并希望连接到它们。我只做过这个

```
<a href="somelink.html">Some Link</a> 
```

我知道您通过控制器然后在 a 标签的 href 部分中运行，但我的似乎没有工作，所以我显然做错了什么。

以我的产品页面为例。

```
<a href ="user/products">Products</a> 
```

然后它在“用户”控制器中的功能

```
 public function products() {

    $data['title']='Products';
    $this->load->view ('header_view', $data);
    $this->load->view ('products.php', $data);
    $this->load->view ('footer_view', $data);
} 
```

结果是“在服务器上找不到对象”错误消息。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:55:31.920

如果您尚未[从 URL中](http://ellislab.com/codeigniter/user-guide/general/urls.html)[删除`index.php`](http://ellislab.com/codeigniter/user-guide/general/urls.html)，则需要将其包含在相对链接中。

生成控制器/函数链接的最简单方法可能是使用 CodeIgniter 的[URL Helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)。

*   该`site_url()`函数将返回您在配置中指定的站点 URL，以及您的*索引页*和*url 后缀*，也如您的配置中设置的那样。如果您想在*用户*控制器中创建*产品*功能的 URL，则：

     *```
    <a href ="<?php echo site_url("user/products"); ?>">Products</a> 
    ```* 
**   您也可以使用该`anchor()`功能。（也在 CodeIgniter 的 URL 助手中。）

    ```
    echo anchor('user/products', 'Products'); 
    ```* 

 *使用这些函数很有用，因为如果您的站点的 URL 要更改，您只需在*config中更改***一次**，因为这些函数将确保您的链接将反映此更改。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:23:02.280

您的控制器名称是**user**？

**用户/产品**通常意味着 没有自定义路由的**控制器名称/功能**

你的控制器文件

```
class User extends CI_Controll
{
        function products()
        {
            // codes
        }

} 
```

在您的头文件中路由到**products(function)**。视图/header.php

```
<a href="<?php echo base_url('user/prouducts') ?>">View Products</a> 
```

并将在每一页上工作**

# python - Python2.7 argparse 需要一个或两个选项

> ID：16094710
> 
> 赞同：2
> 
> 时间：2013-04-18T23:21:29.693
> 
> 标签：python, python-2.7, command-line-arguments, argparse

我正在尝试编写一个脚本，当用户选择使用一个选项（比如--foo）时，他们需要使用另一个选项（比如--bar）。此外，如果他们不选择 --foo 选项，则不需要 --bar 选项。我发现的最接近的是 add_subparsers() 方法，但具体来说似乎不是用于选项。

如果有的话，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:28:36.763

我发现这种类型的东西对于 argparse 来说太复杂了，无法自己处理。我所做的是这样的：

```
parser = argparse.ArgumentParser()
parser.add_argument("--foo", action='store_true', help="Foos something. Must use --bar if --foo is used.")
parser.add_argument("--bar", action='store_true', help="Bars something.")

parsed_args = parser.parse_args()

if parsed_args.foo and not parsed_args.bar:
    sys.stderr.write("ERROR: Must use --bar if using --foo\n")
    parser.print_help()
    sys.exit(1) 
```

# apache - 使用 httpd.conf 将所有流量重定向到一个子目录

> ID：16094711
> 
> 赞同：0
> 
> 时间：2013-04-18T23:21:48.643
> 
> 标签：apache, redirect, httpd.conf

我的`httpd.conf`服务器上配置了一个包含许多域的文件。我需要将一个网站上的旧目录重定向到一个新目录。

基本上，当用户访问 dir 中的任何页面时`domain.com.au/store`，我希望它们被重定向到`domain.com.au/shop`.

我不希望重定向包含旧的网络路径，所以任何旧的 URL 只需要重定向到`domain.com.au/shop`页面，而不是`/shop/old_webpath`.

我已经尝试了许多来自网络的重定向条目，似乎没有一个可以正常工作，因为它们都重定向到`/shop/old_webpath`，而不仅仅是`/shop`.

任何 apache 头脑都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:06:02.497

`.htaccess`在文件中试试这个：

```
Options +FollowSymLinks -MultiViews

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^store/(.*)$ \/shop
</IfModule> 
```

更新 apache 配置中的虚拟主机`domain.com.au`：

```
<VirtualHost *:80>
    # ...
    <Directory "[your_path]">
        # ...
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{HTTP_HOST} ^domain\.com\.au$ [NC]
        RewriteRule ^store/(.*)$ \/shop
    </Directory>
</VirtualHost> 
```

# c++ - 如何一一擦除 STL deque 的所有元素？

> ID：16094713
> 
> 赞同：0
> 
> 时间：2013-04-18T23:22:12.303
> 
> 标签：c++, stl, iterator

我面临一个与在迭代 STL 列表时擦除元素有关的奇怪问题。我知道擦除元素会使迭代器无效的事实。所以，要么

`"testQueue.erase(it++);"`或者`"it = testQueue.erase(it);"`

应该使用。

为了简化我的问题，我尝试在迭代列表时删除所有元素。但是，当使用前一种机制时，我遇到了 Segfault。

下面是完整的代码供您参考。

```
#include <iostream>
#include <queue>
#include <string>

int main()
{
    std::string d1 = "d1";
    std::string d2 = "d2";
    std::string d3 = "d3";

    std::deque<std::string> testQueue;
    testQueue.push_back(d1);
    testQueue.push_back(d2);
    testQueue.push_back(d3);

    std::deque<std::string>::iterator it = testQueue.begin();
    for(; it!=testQueue.end(); ++it){
        std::cout << (*it) << std::endl;
    }

    std::cout << "========" << std::endl;

    it = testQueue.begin();
    while(it!=testQueue.end()){
        testQueue.erase(it++); // This causes Segfault
        //it = testQueue.erase(it); // This one works just fine.
    }
    std::cout << "========" << std::endl;
    std::cout << "========" << std::endl;
    std::cout << "========" << std::endl;
    std::cout << "========" << std::endl;
    std::cout << "========" << std::endl;

    it = testQueue.begin();
    for(; it!=testQueue.end(); ++it){
        std::cout << (*it) << std::endl;
    }

    return 0;
} 
```

我对为什么后增量方法不起作用一无所知。请注意，最终目标不是使用这种方法来擦除所有元素。但是，我想了解我提到的两种方法有什么区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T23:28:30.130

不同容器的迭代器失效规则不同。

对于`std::deque::erase`：

> **所有**迭代器和引用都无效，除非被擦除的成员位于双端队列的末端（前面或后面）（在这种情况下，只有迭代器和对被擦除成员的引用无效）[23.2.1.3/4]

您收到一个段错误，`testQueue.erase(it++)`因为由 生成的迭代器`it++`也*已*失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:26:25.493

因为[从](http://en.cppreference.com/w/cpp/container/deque/erase)`std::deque`. _ 你应该使用：

```
while(it!=testQueue.end()){
    it = testQueue.erase(it);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:27:55.577

[`std::deque::erase`](http://en.cppreference.com/w/cpp/container/deque/erase)擦除迭代器指向的元素，并返回一个迭代器，该迭代器指向擦除后的元素。它还会使给定的迭代器无效，因此您只需将其分配为“继续”。

这就是为什么它有效：

```
while(it!=testQueue.end()){
    it = testQueue.erase(it);
} 
```

但是，如果您对迭代器进行后递增并将其传递给擦除，则元素将被擦除，*然后*（旧）迭代器被复制并递增。由于旧的迭代器变得无效，因此增加的迭代器也是如此。

要清除整个双端队列（您似乎想要这样做），还有[`clear()`](http://en.cppreference.com/w/cpp/container/deque/clear)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T23:30:45.773

既然你总是只是擦除第一个元素，为什么不让生活变得更简单：

```
while (!your_list.empty())
    your_list.erase(your_list.begin()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T23:34:49.323

`testQueue.erase(it++);`

这等于这个

`testQueue.erase(it);`

`it++;`

但是“it”什么都没有，因为它被删除了，不能增加。

# php - 我的 php 注销功能在 IE 或 FF 中不起作用。在 Chrome 中运行良好

> ID：16094716
> 
> 赞同：0
> 
> 时间：2013-04-18T23:22:26.917
> 
> 标签：php, internet-explorer, firefox

这是整个注销文件的代码。当我单击菜单上的注销链接时，它在 FF 或 IE 中什么也不做……只是刷新页面。

```
<?php

  if (isset($_COOKIE['id'])) {

      setcookie('id', '', time() - 3600);
      setcookie('username', '', time() - 3600);
  }

  // Redirect to the home page
  $home_url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/index.php';
  header('Location: ' . $home_url);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:26:27.937

试试这个，看看你真正的结局。

```
<?php

  if (isset($_COOKIE['id'])) {

      setcookie('id', 'bluefish', time() - 3600);
      setcookie('username', 'joe', time() - 3600);
      $home_url = 'http://' . $_SERVER['HTTP_HOST'] 
                . dirname($_SERVER['PHP_SELF']) . '/cookie_was_set.php'; 

  } else {

      setcookie('id', 'deadfish', time() + 3600);
      setcookie('username', 'joe', time() + 3600);
      $home_url = 'http://' . $_SERVER['HTTP_HOST'] 
                . dirname($_SERVER['PHP_SELF']) . '/index.php';

  }

  // Redirect to the home page
  header('Location: ' . $home_url);
?> 
```

如果你总是登陆 index.php，这意味着页面试图设置 cookie 但没有成功。因此，您的浏览器不允许您设置 cookie。否则，它将向后设置 cookie 时间，并将您弹回丢失的页面。

# unix - 简单的 UNIX 案例陈述

> ID：16094719
> 
> 赞同：0
> 
> 时间：2013-04-18T23:22:29.870
> 
> 标签：unix, if-statement, case

我试图让用户能够输入“i”或“v”并有不同的消息回显

这是我的代码：

```
 while getopts :iv opt
 do
   case $opt in
           i)  interactive=true ;;
           v)  verbose=true ;;
          \?) echo "$0: invalid option --'$OPTARG'"
               exit  ;;
      esac
 done
 shift $(($OPTIND - 1)) 
```

到目前为止它有效，但我不确定如何在这个循环之外调用它。

我应该使用 if 循环吗？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:29:05.697

确保您不继承环境变量`interactive`并将`verbose`它们设置为循环之前的值。

```
interactive=false
verbose=false
while getopts :iv opt
do ...
done 
```

您显示的代码将识别命令行选项`-i`或其`-v`组合，并相应地设置变量。

`$interactive`然后，您可以根据和的值使循环后的代码执行不同的操作`$verbose`。请注意，这些测试假定变量设置为`true`or `false`(strings); 如果变量为空，它们将无法正常工作。

```
if [ $interactive = true ]
then read line
     ...process $line...
fi

if [ $verbose = true ]
then echo "Talking more than usual..."
fi 
```

等等。

我不确定“如何在这个循环之外调用它”是什么意思。

# vim - vim 映射到 0、$ 和 ^ 的令人惊讶的行为

> ID：16094724
> 
> 赞同：1
> 
> 时间：2013-04-18T23:23:11.227
> 
> 标签：vim

0、$ 和 ^ 键离我使用它们的频率很远，所以我想我应该将它们重新映射到 H、L 和 U（分别），如下所示：

```
nnoremap H 0     " start of line
nnoremap L $     " end of line
nnoremap U ^     " first non-blank character 
```

但 H 和 U 并没有做我所期望的，而是将光标放在一行的第 6 个字符处，而 L 将光标移动到下面一行的第 5 个或第 4 个字符处。发生了什么，可以修复吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:27:37.453

nnoremap 认为您想要映射`H`到`0 " start of line`. 它不将`"`视为评论的开始。

您应该将注释移到另一行。

```
" start of line
nnoremap H 0
" end of line 
nnoremap L $
" first non-blank character 
nnoremap U ^ 
```

# excel - 如何在 MS Excel 2010 的单元格中删除除“前”3 个字符之外的所有字符？

> ID：16094730
> 
> 赞同：3
> 
> 时间：2013-04-18T23:23:53.637
> 
> 标签：excel, excel-formula

如何在 Excel 2010 中删除单元格中除前 3 个字符之外的所有字符？我有一列数据需要删除所有内容，除了前 3 个字符外，它可以是 6 个字符，最多 30 个字符。没有一个字符是相同的，因此查找和替换将不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T23:26:26.393

把它放在B1并复制下来。我假设数据在 Col A 中。

```
=LEFT(A1,3) 
```

# excel - 向 cfspreadsheet 输出添加文本/额外查询

> ID：16094738
> 
> 赞同：0
> 
> 时间：2013-04-18T23:24:47.477
> 
> 标签：excel, coldfusion, cfspreadsheet

我在 Microsoft Windows Server 2008 R2 数据中心 - SP 1 上运行 Coldfusion 10 和 SQL Server 2012 数据源。

我在页面上有一个 cfspreadsheet 标记，如下所示：

```
<cfinvoke component="assetdata" method="getAllNames" searchString ="#url.searchoption#" returnVariable="result">

<cfspreadsheet 
    action = "write" 
    query="result" 
    filename="#filename#" 
    overwrite="true">
<div>Your spreadsheet is ready. You may download it <a href="search_results.xls">here</a>.</div</div> 
```

除了将查询输出到电子表格之外，我想做的是将如下查询结果添加到它的底部：

正在使用的计算机总数：110

要更换的计算机总数：62

已更换计算机总数：8

每个在绘制信息的页面上都有自己的选择语句。这可以用cfspreadsheet完成吗？还是我被锁定在每张纸上只使用一个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:57:29.347

> 这可以用cfspreadsheet完成吗？

不可以。该`write`操作只接受一个查询。但是，您始终可以将工作表读入变量。然后使用[SpreadSheetAddRow](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-67ad.html)将附加值附加到该工作表。

顺便说一句，您还可以直接从变量流式传输电子表格。请注意，这可能会占用更多资源。

```
<cfheader name="Content-Disposition" value="attachment; filename=someFile.xls" />
<cfcontent type="application/vnd.msexcel" 
        variable="#spreadSheetReadBinary(yourSpreadSheetObject)#" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:30:53.950

你没有被任何东西锁定。有多种方法可以将数据放入电子表格。Leigh 为您提供了指向 ColdFusion 提供的可用功能之一的链接。

大多数（如果不是全部）可用于将数据输出到网页的方法都可用于将数据输出到电子表格。下面是一些用数据填充工作表第 1 列的示例代码。稍后其他查询填充标题行，以及使用数据

```
<cfloop query="DrugsByCategory">
<cfscript>
SpreadsheetAddRow(Workbook, "", RowNumber, 1);
SpreadSheetSetCellValue(Workbook, 
DrugsByCategory.Item[DrugsByCategory.currentrow], RowNumber, 1);

if (DrugsByCategory.type[DrugsByCategory.currentrow] == "Category"){
SpreadsheetFormatCell(Workbook, CategoryFormat, RowNumber, 1); 
StartOfDrugRange = RowNumber + 1;  
}
else if (DrugsByCategory.type[DrugsByCategory.currentrow] == "Summary"){
SpreadsheetFormatCell(Workbook, SummaryFormat, RowNumber, 1); 
EndOfDrugRange = RowNumber - 1;
}
</cfscript>
<!--- get data for each drug, and then the summary --->
<cfif DrugsByCategory.type[DrugsByCategory.currentrow] is "Category">
code for this condition
<cfelseif DrugsByCategory.type[DrugsByCategory.currentrow] is "Drug">
Code for this condition
<cfelseif DrugsByCategory.type[DrugsByCategory.currentrow] is "Summary">
code for this condition
</cfif>  

<cfset RowNumber ++>
</cfloop>
<cfset SpreadSheetAddFreezePane(Workbook, 1, 3)> 
```

不要沉迷于这个例子的不雅。关键是，如果您不限制自己，您可以使用电子表格功能做很多事情。

# php - 向新的主机 php 表单添加额外的变量

> ID：16094740
> 
> 赞同：0
> 
> 时间：2013-04-18T23:24:47.787
> 
> 标签：php, forms

我只是想在我的网站上设置一个新的电子邮件表单，我已经设法让它从表单中获取电子邮件、评论和名称，并在用户按下提交时将它们发送到我指定的电子邮件地址 - 我的问题我如何添加额外的字段让我们说车辆登记和电话号码？

我假设我会使用相同的属性但使用不同的 id 向表单添加另外 2 个字段，然后编辑 send-mail.php 文件并将这两个新变量添加到 send-mail.php 文件中已有的变量旁边，即电子邮件变量和名称变量和评论变量。

这是我想出的代码，因为它现在仍然有效，但我没有收到发送到我的电子邮件的所有信息，它缺少 2 个新变量....

```
 <!-- form -->
                <script type="text/javascript" src="js/form-validation.js"></script>
                <form id="contactForm" action="#" method="post">
                    <h2 class="heading">Contact us using this form</h2>
                    <p>If you have any queries at all or just want to get rid of your car as soon as possible then just leave us the requested details on the form below, press send and a member of our team will get back to you soon.</p>
                    <fieldset>
                        <div>
                            <input name="name"  id="name" type="text" class="form-poshytip" title="Enter your full name" />
                            <label>Name</label>
                        </div>
                        <div>
                            <input name="email"  id="email" type="text" class="form-poshytip" title="Enter your email address" />
                            <label>Email</label>
                        </div>
                        <div>

                            <input name="reg"  id="reg" type="text" class="form-poshytip" title="Enter your vehicle registration" />
                            <label>Vehicle Registration</label>
                        </div>
                        <div>

                            <input name="phone"  id="phone" type="text" class="form-poshytip" title="Enter your phone number" />
                            <label>Phone Number</label>
                        </div>
                        <div>
                            <textarea  name="comments"  id="comments" rows="5" cols="20" class="form-poshytip" title="Enter your comments"></textarea>
                        </div>

                        <!-- send mail configuration -->
                        <input type="hidden" value="enquiries@scrapyourmotor.com" name="to" id="to" />
                        <input type="hidden" value="ScrapYourMotor FORM" name="subject" id="subject" />
                        <input type="hidden" value="send-mail.php" name="sendMailUrl" id="sendMailUrl" />
                        <!-- ENDS send mail configuration -->

                        <p><input type="button" value="Send" name="submit" id="submit" /> <span id="error" class="warning">Message</span></p>
                    </fieldset>

                </form>
                <p id="sent-form-msg" class="success">Form data sent. Thanks for your comments.</p>
                <!-- ENDS form --> 
```

和 php 文件....

```
 <?php
                //vars
                $subject = $_POST['subject'];
                $to = explode(',', $_POST['to'] );

                $from = $_POST['email'];

                //data
                $msg = "NAME: "  .$_POST['name']    ."<br>\n";
                $msg .= "EMAIL: "  .$_POST['email']    ."<br>\n";
                $msg .= "REG: "  .$_POST['reg']    ."<br>\n";
                $msg .= "PHONE: "  .$_POST['phone']    ."<br>\n";
                $msg .= "COMMENTS: "  .$_POST['comments']    ."<br>\n";

                //Headers
                $headers  = "MIME-Version: 1.0\r\n";
                $headers .= "Content-type: text/html; charset=UTF-8\r\n";
                $headers .= "From: <".$from. ">" ;

                //send for each mail
                foreach($to as $mail){
                   mail($mail, $subject, $msg, $headers);
                }

                ?> 
```

我哪里错了？这是我在电子邮件中得到的输出：

NAME：我发送的名字

EMAIL：我发送的电子邮件

车辆登记：（这里什么都没有？）

电话号码：（这里什么都没有？）

评论：我发送的评论

感谢任何帮助的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:06:53.097

啊，我真傻，我忘了用 2 个新变量更新 form-validation.js 文件:) ...

```
 // reg
    var reg = $("input#reg").val();
    if(reg == ""){
        $("#error").fadeIn().text("Reg required");
        $("input#reg").focus();
        return false;
    }

    // comments
    var comments = $("#comments").val();

    // phone
    var phone = $("#phone").val(); 
```

# c# - Visual Studio 2012 启动时参考版本无效

> ID：16094743
> 
> 赞同：0
> 
> 时间：2013-04-18T23:25:07.400
> 
> 标签：c#, .net, unit-testing, visual-studio-2012, gac

我最近在我现有的 .net 网站项目中添加了一个单元测试项目。我写了一些单元测试，一切正常。我们在开发过程中添加了第三方测试套件，并获得了一个参考 dll 以包含在我们的测试项目中（我已经这样做了）。

但是第三方dll需要Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 10.1.0.0版本，而我的测试项目是10.0.0.0版本。我切换了版本（右键单击VS中的References文件夹，选中一个框，取消选中另一个框）。现在测试项目编译，单元测试运行。

第二天，当我启动 VS 并加载项目时，它无法编译 - 与我之前使用错误版本的单元测试框架 dll 的错误相同。

如何强制版本为 10.1.0.0？我什至在参考属性上设置了 Specific Version = True，我尝试将目标框架设置为 4 和 4.5，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:43:11.033

这实际上是由我们的供应商解决的 - 提供了旧版本的 dll -> 针对旧版本的 .NET 编译。通过让他们用 .NET 4.5 编译它来解决。

# html - 单击页面 div 被选中并变为蓝色

> ID：16094746
> 
> 赞同：0
> 
> 时间：2013-04-18T23:25:26.257
> 
> 标签：html, css, mouse

这确实是一个模糊的问题，对此我深表歉意。我正在构建一个显示/隐藏一些 div 的应用程序。应用中有多个视图。

在我开始随机单击的某些视图中，某些 div 被选中（显示为默认浏览器蓝色选择），这真的很烦人。在某些观点中，这种行为似乎没有发生。我想知道这可能是什么原因。

（因为我不知道原因，所以很难创建一个 jsfiddle 或其他东西来重现这种情况）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:37:35.590

我认为您在谈论默认的文本选择颜色。试一试：

```
::selection {
    background: transparent;
} 
```

我不知道浏览器对 ::selection 的支持是什么样的，恐怕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:29:03.603

在 CSS 中：

```
a, img {  
 border-style: none;
} 
```

我假设您的 div 通过元素附加了 javascript？

# c# - 将 DATETIME 从 C# 插入 Oracle DB 时，格式代码出现两次错误

> ID：16094747
> 
> 赞同：4
> 
> 时间：2013-04-18T23:25:26.630
> 
> 标签：c#, oracle, datetime, insert-query

我面临以下查询的 oracle 错误

**插入查询：**

```
INSERT INTO WINBACK_REFERRAL_CODES
  (REFERRAL_CODE, IS_DELETED,  CREATED_BY, 
   CREATED_DT,
   MODIFIED_BY,
   MODIFIED_DT, DELETED_BY,  DELETED_DT)
values
  ('sfsdfsd',     'N',         'LA\a03789',
   To_date('4/18/2013 3:57:47 PM','MM/DD/YYYY HH12:MI:SS AM'),
   '',
   To_date('','MM/DD/YYYY HH12:MI:SS AM'),
   '',
   To_date('4/18/2013 3:57:47 PM','MM/DD/YYYY HH12:MM:SS AM')); 
```

**错误信息：**

有人可以帮我解决这个问题。我正在尝试以这种格式**4/18/2013 3:57:47 PM**将日期和时间插入到 oracle DB。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T00:14:01.483

`To_date('4/18/2013 3:57:47 PM','MM/DD/YYYY HH12:MM:SS AM')`应该重写为`To_date('4/18/2013 3:57:47 PM','MM/DD/YYYY HH12:MI:SS AM')`. 注意从 MM 到 MI 的变化。

# objective-c - 使用 initWithBitmapDataPlanes 创建 NSImage 时的 Cocoa 内存管理

> ID：16094748
> 
> 赞同：6
> 
> 时间：2013-04-18T23:25:28.757
> 
> 标签：objective-c, cocoa, nsimage

我正在从 24 位 RGB 数据的 unsigned char * 创建一个 NSImage，如下所示：

```
NSBitmapImageRep *bitmap = [[NSBitmapImageRep alloc]
                            initWithBitmapDataPlanes:(unsigned char **)&data
                            pixelsWide:gWidth
                            pixelsHigh:gHeight
                            bitsPerSample:8
                            samplesPerPixel:3
                            hasAlpha:NO
                            isPlanar:NO
                            colorSpaceName:NSCalibratedRGBColorSpace
                            bytesPerRow:gWidth*3
                            bitsPerPixel:24];

NSImage *img = [[NSImage alloc] initWithSize:NSMakeSize(gWidth, gHeight)];
[img addRepresentation:bitmap]; 
```

我遇到的问题是我后来向“数据”写了更多的东西，我知道 NSImage 没有复制它。我这么说是因为如果我稍后将所有 0 写入我的数据缓冲区，那么图像就会全黑。

我在 Objective C 上苦苦挣扎，所以如果这是微不足道的，请耐心等待。

如果我制作“数据”的本地副本并且从不释放它，那么一切都会很好，但显然会泄漏：

```
unsigned char *copy_of_data = new unsigned char[len];
memcpy(copy_of_data, data, len); 
```

我怎么能：

(1) 让 initWithBitmapDataPlanes 创建自己的副本并处理释放？

或者（2）在图像不再需要它之后，在适当的时候自己释放数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T05:37:11.913

传递参数可能是最简单`NULL`的。`planes`然后，在图像代表被分配和初始化后，向它索取它`-bitmapData`并将您的数据复制到其中。文档中建议使用此方法：

> 如果 planes 为 NULL 或 NULL 指针数组，则此方法分配足够的内存来保存其他参数描述的图像。**然后，您可以获得指向该内存的指针（使用 getPixel:atX:y: 或 bitmapData 方法）并填写图像数据。**在这种情况下，分配的内存将属于该对象，并在它被释放时被释放。

重点补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T00:14:24.877

根据[此处的文档](http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSBitmapImageRep_Class/Reference/Reference.html)，如果平面数据在您传入时有效，`NSBitmapImageRep`则不会获得平面数据的所有权。（“当对象本身被释放时，它不会尝试释放缓冲区。”）。

所以你自己一个人。最简单的方法是将指向数据的指针与指向图像代表的指针放在一起，当一个被释放时，释放另一个。（即，如果它们作为 ivars 保存或临时使用。）如果您使用 GC，这可能会更难。

最干净的是，您还可以创建一个小型包装类，它同时拥有图像表示对象和数据指针，并在该对象的`-finalize`（或`-dealloc`）中摆脱数据缓冲区。

# objective-c - 将 MKPolygon 转换为 UIBezierPath

> ID：16094751
> 
> 赞同：1
> 
> 时间：2013-04-18T23:25:40.693
> 
> 标签：objective-c, uibezierpath, mkpolygon

有没有办法将 a 转换`MKPolygon`为 a `UIBezierPath`？我有一个`MKPolygon`使用纬度和经度坐标来组成它的点。这些纬度/经度坐标如何转换为 a 上的坐标`UIView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:53:49.543

```
MKPolygon *myPolygon;

MKPolygonView *polygonView = [[MKPolygonView alloc] initWithPolygon:myPolygon];

UIBezierPath *myBezierPath = [UIBezierPath bezierPathWithCGPath:polygonView.path]; 
```

# javascript - 比较多个数组的单个值

> ID：16094756
> 
> 赞同：1
> 
> 时间：2013-04-18T23:26:11.413
> 
> 标签：javascript, arrays, object, comparison

你好，这是我第一次在这个网站上发帖，所以我会尽量说清楚。

我正在使用 javaScript 创建一个 Battleship 游戏来生成随机船舶放置。我为游戏板（X 和 Y）创建了两个数组，创建了一个生成随机放置的类，以及一个用于不同船只的对象数组，如下所示......

```
// game board
var xAxis = ["a","b","c","d","e","f","g","h","i","j"];
var yAxis = [1,2,3,4,5,6,7,8,9,10];

// Location Class decleration //

function Location (size,name){
//// Parameters ///////////////////////////////////////////
    this.size = size;
    this.name = name;    
//// Class functions //////////////////////////////////////

// sets the ship to a random position
this.shipPosition = function(){
    var orientation = Math.random();        
    var area = [];
    if (orientation < 0.5){
        x = Math.floor(Math.random()*(xAxis.length-size+1));
        y = Math.floor(Math.random()*(yAxis.length));
        for (i=x; i < (size + x); i++){
            area.push([xAxis[i],yAxis[y]]);
        }
    } else {
        x = Math.floor(Math.random()*(xAxis.length));
        y = Math.floor(Math.random()*(yAxis.length-size+1));
        for (i=y; i < (size + y); i++){
            area.push([xAxis[x],yAxis[i]]);
        }
    }
    return area;
};
///// Stored variables /////////////////////////////////////////

//stores position
    var positionArray = this.shipPosition();
//assigns value to each element in array for checking 
//and makes the private value public. ex. a = ['h',1]      
    var a = positionArray[0];
    var b = positionArray[1];
    var c = positionArray[2];
    var d = positionArray[3];
    var e = positionArray[4];
    this.getA = a;    
    this.getB = b;        
    this.getC = c;
    this.getD = d;
    this.getE = e;

// locator console logging function

    this.whereIs = function(){
        console.log(this.name);
        console.log("ship size is "+ size);    
        console.log("-- X - Y --");
        console.log(a);
        console.log(b);
        if (size > 2){console.log(c);}
        if (size > 3){console.log(d);}
        if (size > 4){console.log(e);}
        console.log("    ***********************************     ");
    };
}
//ship array
var computerShip = new Array();
computerShip[0] = new Location(2, "SHIP 1");
computerShip[1] = new Location(3, "SHIP 2");
computerShip[2] = new Location(3, "SHIP 3");
computerShip[3] = new Location(4, "SHIP 4");
computerShip[4] = new Location(5, "SHIP 5");

//used to call whereIs method for each ship

var genetateComputerShip = function(){
    for(i=0; i<computerShip.length; i++){          
        computerShip[i].whereIs();        
    }
};    
genetateComputerShip(); 
```

如何检查船舶数组的每个值以检查重叠？我尝试了多种方法，但在挑选元素或找到一种轻松交叉引用它们的方法时遇到了麻烦。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:14:38.457

我对您的代码进行了一些更改，以维护全局“板”概念，该概念表示为多维数组。请参阅此处的代码：

[http://jsfiddle.net/mchail/ytwyS/1/](http://jsfiddle.net/mchail/ytwyS/1/)

点击“运行”后，检查浏览器的 javascript 控制台，您应该会在每艘船放置的全板末尾看到打印输出。我修改`shipPosition`（现在称为`setShipPosition`）以在放置船之前检查板上的冲突。

顺便说一句，干得好！

更新

修改了 jsfiddle 以将电路板也打印到屏幕上。继续点击“运行”以查看更多随机生成的板。

# php - xpath 在关闭之前无法将样式分配给不包含属性但包含另一个标签的标签

> ID：16094758
> 
> 赞同：0
> 
> 时间：2013-04-18T23:26:14.897
> 
> 标签：php, dom, xpath

**大家好！**

我是一门课程的学生，正在尝试创造一些东西。我一直在尝试改变 '<'li'>' 的样式，它包含一个 '<'span'>' 标签，其余的 '<'li'>' 标签应该保持原样。这就是我到目前为止的方式：

```
<?php
$html = <<< HTML
<ul>
    <li><span style="font-weight:bold;color:white;">foo</span></li>
    <li style="color: brown;"><a href="#bar">bar span</a></li>
    <li><span><a href="#baz">baz</a></span></li>
</ul>
HTML;
$dom = new DOMDocument;
$dom->loadHTML($html);
$xp = new DOMXpath($dom);
foreach ($xp->query('//li[not(@style)]/span[not(@style)]') as $node) {
    $node->setAttribute('style', 'font-weight:bold; background:black;');
}
echo $dom->saveHTML($dom->getElementsByTagName('ul')->item(0)); 

?> 
```

**所以这导致：**

```
<ul>
<li><span style="font-weight:bold;color:white;">foo</span></li>
    <li style="color: brown;"><a href="#bar">bar span</a></li>
    <li><span style="font-weight:bold; background:black;"><a href="#baz">baz</a></span></li>
</ul> 
```

**我需要实现的是：**

```
<ul>
<li><span style="font-weight:bold;color:white;">foo</span></li>
    <li style="color: brown;"><a href="#bar">bar span</a></li>
    <li style="font-weight:bold; background:black;"><span><a href="#baz">baz</a></span></li>
</ul> 
```

所以我想设计 li 而不是跨度！

请帮助学习者，只是尝试了很多，无法找到解决方法。

这是正确的方法吗？？？

```
<?php
$url ='http://3d.te.ua/xpath/ria.html';
$html = file_get_contents($url);
$dom = new DOMDocument;
$dom->loadHTML($html);
$xp = new DOMXpath($dom);
foreach ($xp->query('//li[not(@style)]/span[not(@style)]') as $node) {
    $node->parentNode->setAttribute('style', 'font-weight:bold; background:black;');
}
echo $dom->saveHTML($dom->getElementsByTagName('ul')->item(0)); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:32:57.570

用于`/..`选择父节点：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xp = new DOMXpath($dom);
foreach ($xp->query('//li[not(@style)]/span[not(@style)]/..') as $node) {
    $node->setAttribute('style', 'font-weight:bold; background:black;');
}
echo $dom->saveHTML($dom->getElementsByTagName('ul')->item(0)); 
```

# bash - 在 Ubuntu 启动时运行挂载脚本

> ID：16094761
> 
> 赞同：1
> 
> 时间：2013-04-18T23:26:30.167
> 
> 标签：bash, ubuntu, ubuntu-12.04, startup, expect

我有这个脚本可以在 Ubuntu 中自动挂载我的 BoxCryptor 文件夹（Dropbox 加密）。当我从命令行运行它时一切正常，但是......当我将它放在我的“启动应用程序”中时它不起作用。

boxcryptor-automount.sh 的内容

```
#!/usr/bin/expect
sleep 3
set timeout 1
spawn encfs /home/j/Dropbox/Encrypted.bc/ /home/j/BoxCryptor
expect 'EncFS Password:'
send "mypassword\r"
interact 
```

Ubuntu 启动应用程序中的命令行：

```
/usr/bin/expect /home/j/boxcryptor-auto/boxcryptor-automount.sh 
```

有任何想法吗？我将它列在启动应用程序列表的最后（我将 az 放在名称前面，以为它可能需要最后运行，但这没有帮助）。顺便说一句，它的 Ubuntu 12.04。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T17:37:03.827

好的，所以我遇到的问题是密码中的特殊字符被视为纯文本，例如需要为 '\$' 的 '$'

# angularjs - AngularJS：如何保证 $broadcast/$emit 仅在处理程序设置后触发

> ID：16094763
> 
> 赞同：0
> 
> 时间：2013-04-18T23:26:37.243
> 
> 标签：angularjs

[这是一个可能人为的例子的jsfiddle](http://jsfiddle.net/eze123/ADukg/2378/)

```
$scope.dataLoaded = function (){
  var response = "payload";
  $scope.$broadcast("dataLoaded", response);
  console.log("broadcasted");
}

// will not work if setup after message broadcasted
$scope.$on("dataLoaded", $scope.setData); 
```

基本问题是：在异步应用程序中，无法保证数据加载顺序。我们可以依靠 $broadcast/$emit 来管理数据加载吗？

那么，我们如何保证处理程序将接收广播消息，以及是否有任何关于事件触发和处理的最佳实践，这样它就不会变得太混乱。

如果不是，有什么替代方案（例如，可能推迟/承诺）？

谢谢

# c# - C# Oracle 转换为批量上传

> ID：16094765
> 
> 赞同：0
> 
> 时间：2013-04-18T23:26:53.613
> 
> 标签：c#, oracle, plsql

我有现有的 c# 代码，我想将其转换为批量插入。

我想使用数组绑定，但我所有的数据都保存在字符串列表中。将此 oracle 存储过程调用转换为处理批量插入的最佳方法是什么？

这是代码

```
 for (int i = 0; i < listSize.Count(); i++)
              {
              using (OracleCommand cmd = new OracleCommand())
              {
                OracleConnection conn;
                conn = new OracleConnection(ConnectionStringOracle);

                cmd.CommandText = "package.insertR";
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Connection = conn;
                cmd.Parameters.Add(new OracleParameter("oRetValue", OracleDbType.Varchar2, 10)).Direction = ParameterDirection.Output;
                cmd.Parameters.Add(new OracleParameter("firstList", OracleDbType.Varchar2, 32767));
                cmd.Parameters["firstList"].Value = rd.fl[i];
                cmd.Parameters.Add(new OracleParameter("secondList", OracleDbType.Varchar2, 32767));
                cmd.Parameters["secondList"].Value = rd.sl[i];
                conn.Open();
                try
                {
                    cmd.ExecuteNonQuery();
                }
                  conn.Close();
               } 
```

plsql 中的示例插入是

```
 PROCEDURE insertr(
      oRetValue OUT varchar2,
      firstListIN   varchar2,           
      secondList IN   varchar2,) AS
BEGIN
 insert into tablename (first1,second1)
values (firstList,secondList);
 END insertr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:01:39.207

```
 using (OracleCommand cmd = new OracleCommand())
          {
            OracleConnection conn;
            conn = new OracleConnection(ConnectionStringOracle);
            cmd.ArrayBindCount = listSize.Count();
            cmd.CommandText = "package.insertR";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = conn;
            cmd.Parameters.Add(new OracleParameter(":firstList", OracleDbType.Varchar2, 32767));
            cmd.Parameters[":firstList"].Value = rd.fl.ToArray();
            cmd.Parameters.Add(new OracleParameter(":secondList", OracleDbType.Varchar2, 32767));
            cmd.Parameters[":secondList"].Value = rd.sl.ToArray();
            conn.Open();
            try
            {
                cmd.ExecuteNonQuery();
            }
              conn.Close(); 
```

# mysql - 如何获取 TADOQuery 中字段的长度？

> ID：16094766
> 
> 赞同：0
> 
> 时间：2013-04-18T23:27:07.687
> 
> 标签：mysql, delphi, delphi-7

例如，我可以获取某个字段的值。但是有可能找出字段的长度吗？

```
MyQuery.Fields[0].Value; // contains the value of the field 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:12:09.483

字段大小可以取自 Field.Size，如果此值为 0 Size，则它是您使用 Field.Datasize 的固定类型。

简短的例子：

```
uses TypInfo;

Procedure DisplayFieldInfos(DS:TDataset;List:TStrings);
var
 i:Integer;
 Function GetSize(F:Tfield):Integer;
  begin
    Result := F.Size;
    if Result=0 then Result := F.DataSize;
  end;
begin
  for I := 0 to DS.FieldCount - 1 do
      begin  // display Fieldname [Datatype] : Size
        List.Add(Format('%s [%s] :  %d',
                [
                DS.Fields[i].FieldName,
                GetEnumName(TypeInfo(TFieldType), integer(DS.Fields[i].Datatype)),
                GetSize(DS.Fields[i])
                ]));
      end;
end;

procedure TForm6.Button1Click(Sender: TObject);
begin
 DisplayFieldInfos(ADS,Memo1.Lines)
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:34:10.977

看一眼

```
ADOQuery1.FieldDefList.FieldDefs[0].Size 
```

看看这是否能给你你正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:45:44.333

可以直接从 MySQL 中查询信息

```
SELECT column_name, column_type, character_maximum_length 
FROM information_schema.columns
WHERE table_name = '...'
  AND table_schema = '...' 
```

只需提供`table_name`and `table_schema`，它将返回所有列及其长度（至少是字符串列的长度）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-22T04:56:35.450

这段代码对我有用：

```
My_Query.Close;
My_Query.SQL.Text :='select * From My_Table';
My_Query.Open;

Edit1.Text:= IntToStr(My_Query.FieldByName('My_Field').Size); 
```

# r - R 中的 MWTP 与价格的显着正变量 - 意外结果

> ID：16094770
> 
> 赞同：0
> 
> 时间：2013-04-18T23:27:31.933
> 
> 标签：r, statistics, choice, cran

我正在使用 R 中的 support.CEs 包进行选择实验。我正在尝试计算边际支付意愿（MWTP）。

该软件包似乎相对较新，我已经查看了 CRAN 文档以及在此处找到的文章：

[R中的选择实验](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDkQFjAA&url=http%3A%2F%2Fwww.jstatsoft.org%2Fv50%2Fc02%2Fpaper&ei=MH1wUaT0HKKoiQKIvYH4BQ&usg=AFQjCNF3sM3BR3gQZzMgxia0WbX_gW50Yg&sig2=3J_4DbNXxH4-SopLQdBdtQ&bvm=bv.45373924,d.cGE)

正如 R 文章中的选择实验（Aizaki，2012，第 18-19 页）中的示例所示，clogit 结果中具有正系数的变量也具有正 MWTP。

我刚刚完成了一项选择实验调查，在查看结果时，很明显受访者愿意为有机产品支付更多费用。Organic 变量的系数显着为正，但 MWTP 结果显示该属性的 MWTP 为负。

![](https://i.stack.imgur.com/qraIK.png)

我怀疑这要么是由于 ASC 的系数为负，要么是由于价格显示为显着正值（一个不寻常的结果，但考虑到观众，这并不完全令人惊讶）。

我知道 Organic 变量应该具有正的 MWTP，因为它具有正系数。有没有人能够帮助理解这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:36:59.960

WTP 计算只是属性系数与（负）价格系数的比率。例如有机 MWTP = -4.4918/5.7862 = -0.7762953。

理论上，价格需要有一个负号，然后 MWTP 反映了价格和正值属性之间的权衡。正的价格系数会给你负的 MWTP。

顺便说一句：这不是 R 问题，而是（可能）您的数据和结果解释的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-13T17:08:26.070

增长是指数级的。如果我们假设增长等于n；这意味着响应支付需求的能力正在增加。如果我们将 b3X3i+y 的总和作为 r^2 调整后的值，我们会得到一个正值。价格也在积极上涨。负系数来自两个n；即事件数-n=232-696=-464。我的问题是当 p=1 时会发生什么？正如我从表中看到的，它表明 p=1 已被堵塞。命令 mwtp

# javascript - 我如何确定哪些其他 JS 文件正在干扰我关心的文件？

> ID：16094772
> 
> 赞同：0
> 
> 时间：2013-04-18T23:27:47.970
> 
> 标签：javascript, jquery, ruby-on-rails, heroku, asset-pipeline

我有一个具有`checkout from billing`功能的页面 - 基本上触发了一些 JS。

你可以[在这里查看](http://apt-605.herokuapp.com/products/20)。

选择 Blue & Small 并将其添加到您的购物车。

然后去结账。

输入一些虚拟数据，然后按“从计费中复制”。它行不通。但是，如果您刷新页面并再次执行该过程......它将起作用。

此外，您会注意到在第一次使用时，“运输方式”下拉菜单不起作用。但是，一旦你刷新，它确实如此。

我在控制台中尝试了负责此功能的 JS，它在第一次加载时运行良好。所以我知道代码是正确的（它试图选择的所有字段都是正确的，等等）。

我到底该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:19:33.100

我能够验证您网站上的行为，并使其在页面的第一次加载时工作，只需稍作调整。我认为加载顺序是问题的核心。

在页面加载后，我可以通过重新运行 piggyback.js 文件中的第一行来使其工作。

这是显示问题和快速修复的快速[截屏视频。](http://screencast.com/t/1gKUH83nx1)

如果您可以在加载结束时运行此部分，我认为这会为您解决问题。

更新 1：您也可以关闭“继续结帐”按钮上的 turbolinks。当我将 data-no-turbolink="true" 添加到链接中，然后单击时，页面没有被涡轮加载，而是作为整页刷新加载。然后复制运输功能按预期工作。

更新 2：真正的问题很可能是您的 js 代码没有触发，因为它只需要一个 dom 就绪事件。您可以在 turbolinks 加载它时触发它，使用 page:load 事件，[如此处所述](http://srbiv.github.io/2013/04/06/rails-4-my-first-run-in-with-turbolinks.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:12:05.700

所以这就是正在发生的事情......

在购物车页面上，`http://apt-605.herokuapp.com/checkout/cart`您有“继续结帐”按钮，有一些 javascript 连接到所有锚标记，使用锚标记的 href 发出 ajax 请求，然后用从 ajax 接收的内容替换文档的内容称呼。

这是做什么的，新内容不会像新页面那样加载，头部永远不会渲染，而 piggybak js 永远不会加载。

您可以在购物车页面上验证这一点，让 firebug 保持打开状态，切换到 net 选项卡。现在，当您单击 Proceed to checkout 时，您会注意到发出了 XHR 请求 get `checkout`，并且结帐页面加载时没有刷新 net 选项卡。您也不会在 net 选项卡中看到 puiggybak js 加载。

所以基本上你必须弄清楚你在购物车页面上使用的将自己附加到所有锚标签的 js，我的猜测将是一个提供开箱即用的 ajaxified 导航的库。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T08:36:52.227

我同意@Austin

剧本 `<script src="/assets/piggybak/piggybak-application-1d1707f6934602bfae8e3a33d27a4a9b.js" type="text/javascript"></script>`

最初加载页面时不会被调用，当您重新加载页面时，此链接会动态插入其中，您必须编写一些代码来处理该问题，如果可能，请显示该代码，以便我们进一步帮助您...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T23:44:43.393

你在内容中进行ajaxing吗？

你的头不见了

```
<script src="/assets/piggybak/piggybak-application-1d1707f6934602bfae8e3a33d27a4a9b.js" type="text/javascript"></script> 
```

首次加载页面时的 javascript 文件。

# ruby-on-rails - Rails by Example (by Michael Hartl)，第 9.23 课重定向将不起作用

> ID：16094773
> 
> 赞同：1
> 
> 时间：2013-04-18T23:27:48.350
> 
> 标签：ruby-on-rails, ruby, authentication, login, railstutorial.org

我正在关注第 9 课的重定向，但重定向不起作用！我按照信中的代码无济于事。

[这是我在在线教程中的位置](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-friendly_forwarding)

[这是应用程序的当前 Github](https://github.com/alaingoldman/sample_app)

这个想法是 - 如果用户注销并单击受保护的页面（例如用户编辑页面），他将被发送到登录页面。（因为您在注销时不应被允许编辑任何内容。）之后他登录然后返回到他之前单击的受保护页面（与转到个人资料页面相反。）

这应该适用于本教程的当前部分，但它没有。如果有帮助，我已经包含了 rspec 和失败。

**失败：**

```
1) Authentication authorization for non-signed-in users when attempting to visit a protected page after signing in should render the desired protected page

 Failure/Error: page.should have_selector('title', text: 'Edit user')
   expected css "title" with text "Edit user" to return something

 # ./spec/requests/authentication_pages_spec.rb:65:in `block (6 levels) in <top (required)>' 
```

**authentication_pages_spec.rb**

```
require 'spec_helper'

describe "Authentication" do
  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

        describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
        end  
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        fill_in "Email",    with: user.email.upcase
        fill_in "Password", with: user.password
        click_button "Sign in"
    end

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
  end
end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end

          describe "when signing in again" do
            before do
              delete signout_path
              visit signin_path
              fill_in "Email",    with: user.email
              fill_in "Password", with: user.password
              click_button "Sign in"
            end

            it "should render the default (profile) page" do
              page.should have_selector('title', text: user.name) 
            end
          end
        end
      end
      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end

  end
end 
```

**session_Controller.rb**

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

**用户控制器.rb**

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def edit
    # @user = User.find(params[:id])
  end

  def update
      if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

**session_helper.rb**

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

**编辑.htmnl.erb**

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

**编辑** **开发日志**

```
 Started POST "/sessions" for 127.0.0.1 at 2013-    04-17 22:20:22 -0400    
Processing by SessionsController#create as HTML    
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"aEDz4BcEpiAI+CQXcb6Fz8SHTP30NSqHZlzn4w1GvuQ=", "session"=>{"email"=>"alain.goldman@gmail.com", "password"=>    "[FILTERED]"}, "commit"=>"Sign in"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'alain.goldman@gmail.com' LIMIT 1
Redirected to http://localhost:3000/users/1
Completed 302 Found in 451ms (ActiveRecord: 0.2ms)

Started GET "/users/1" for 127.0.0.1 at 2013-04-17 22:20:22 -0400
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered users/show.html.erb within layouts/application (1.1ms)
  Rendered layouts/_shim.html.erb (0.1ms)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'sIGAbFoWQKYG0cjXhK5nWg' LIMIT 1
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 195ms (Views: 192.9ms | ActiveRecord: 0.5ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:38:47.440

哦，我看到的最明显的事情是您的会话控制器（在创建方法中），需要更改为使用 redirect_back_or。那可能会解决它。

# php - 显示输入的 1 个或多个关键字的结果的搜索栏

> ID：16094775
> 
> 赞同：0
> 
> 时间：2013-04-18T23:27:55.740
> 
> 标签：php, search, wordpress, buddypress, searchbar

标题可能看起来有点误导......我的意思是，例如，如果我要输入 3 个关键字是一个搜索栏（我们将它们称为 X、Y、Z），而不是显示结果的搜索查询有：

> **X 和 Y 和 Z**

我想要：

> **X 和/或 Y 和/或 Z**

我的搜索栏是 buddypress 在 wordpress 上默认给出的，所以我不会把代码放在这里，因为它很长，并且充满了 wordpress 特定的参数/变量。但作为一个一般概念，我将如何改变这一点？改变这种情况的功能是什么？

附注：这个搜索栏，就像我见过的大多数一样，创建以下形式的 URL：

> **[http://example.com/?s=X%20Y%20Z](http://example.com/?s=X%20Y%20Z)**

如果代码以不同的方式解释它，我正在寻找的更改是否会改变 URL 的形式，或者 URL 是否会保持不变？

提前谢谢了！

# knockout.js - 如何将可观察对象限制为仅是 Knockout.js 中的一组特定值？

> ID：16094777
> 
> 赞同：0
> 
> 时间：2013-04-18T23:27:59.060
> 
> 标签：knockout.js, knockout-validation

我将以下输入类型绑定到视图模型中可观察的“页面”。

```
<input type="text" data-bind="value: page"/> 
```

用户可以在文本输入中输入任何值，但如果值在值列表中，我只希望绑定发生在我的模型中。我查看了敲除验证框架并构建了适当的扩展来引发错误，但我找不到确保模型中的“页面”属性不更新的方法。

有没有其他人在使用 Knockout.js 时遇到过这种情况？

谢谢！-鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:50:40.637

你应该能够通过扩展你的 observable 来做到这一点。

文档位于[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

以下是可能满足您需求的示例：

```
ko.extenders.allowedValues = function (target, valuesArray) {
    var result = ko.computed({
        read: target,
        write: function (newValue) {
            if (valuesArray.indexOf(newValue) !== -1) {
                target(newValue);
            } else {
                //handle the user inputting a value not allowed here
            }
        }
    });

    result(target());
    return result;
}; 
```

然后你会像这样创建 observable：

```
var page = ko.observable().extend({ 
    allowedValues: [ /* place the allowed values in this array */] }); 
```

# css - 如果内容溢出，有一个需要滚动的固定位置 div

> ID：16094785
> 
> 赞同：191
> 
> 时间：2013-04-18T23:28:58.247
> 
> 标签：css, scroll, css-position, overflow

我实际上有两个问题，但让我们先解决主要问题，因为我相信另一个更容易解决。

我在菜单的滚动左侧有一个固定位置的 div。右侧是可以正确滚动的标准 div。问题是，当浏览器视口太小而看不到整个菜单时.. 没有办法让它滚动我能找到的（至少不能用 css）。我尝试在 css 中使用不同的溢出，但没有任何东西可以使 div 滚动。包含菜单的 div 设置为 min-height:100% 和 position:fixed.. 这两个属性我都需要保留。

包含*菜单*的 div位于另一个绝对定位且高度设置为 100% 的包装器 div 内。

如果内容对于 div 来说太高，我怎样才能让它垂直滚动？

这导致我遇到另一个问题，我不希望显示滚动条..但我想我可能已经有了答案（只是它还不起作用，因为我无法让 div 滚动开始）。

有什么解决办法吗？也许需要javascript？（我对此知之甚少）

[JS 小提琴示例](http://jsfiddle.net/csdigitaldesign/NDx47/)

以及导致问题的相关代码（因为在这里发布整个内容太长了）：

```
.fixed-content {
    min-height:100%;
    position:fixed;
    overflow-y:scroll;
    overflow-x:hidden;
} 
```

还尝试添加 height:100% 只是为了看看这是否是一个问题，但它也不起作用......固定高度也没有，例如 600px。

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2013-08-21T20:01:18.563

使用的问题`height:100%`是它将是 100% 的页面而不是 100% 的窗口（正如您可能期望的那样）。这将导致您看到的问题，因为非固定内容足够长，可以包含 100% 高度的固定内容，而无需滚动条。浏览器不知道/关心您实际上不能向下滚动该栏以查看它

你可以用它`fixed`来完成你想做的事情。

```
.fixed-content {
    top: 0;
    bottom:0;
    position:fixed;
    overflow-y:scroll;
    overflow-x:hidden;
} 
```

你小提琴的这个叉子显示了我的修复：http: [//jsfiddle.net/strider820/84AsW/1/](http://jsfiddle.net/strider820/84AsW/1/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-02-07T02:07:09.947

这里的解决方案对我不起作用，因为我正在设计反应组件。

对侧边栏有用的是

```
.sidebar{
position: sticky;
top: 0;
} 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-08-22T13:29:37.450

一般来说，固定部分应该设置`width`,`height`和`top`,`bottom`属性，否则它不会识别它的大小和位置。

`z-index`如果使用的框是 body 的直接子并且有邻居，那么检查和属性是有意义的`top, left`，因为它们可能会相互重叠，这可能会影响滚动内容时的鼠标悬停。

`body`以下是与移动导航一起使用的内容框（标签的直接子代）的解决方案。

```
.fixed-content {
    position: fixed;
    top: 0;
    bottom:0;

    width: 100vw; /* viewport width */
    height: 100vh; /* viewport height */
    overflow-y: scroll;
    overflow-x: hidden;
} 
```

希望它可以帮助任何人。谢谢！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-18T23:46:04.767

这是两个修复程序。

首先，关于固定侧边栏，您需要给它一个高度以使其溢出：

HTML 代码：

```
<div id="sidebar">Menu</div>
<div id="content">Text</div> 
```

CSS 代码：

```
body {font:76%/150% Arial, Helvetica, sans-serif; color:#666; width:100%; height:100%;}
#sidebar {position:fixed; top:0; left:0; width:20%; height:100%; background:#EEE; overflow:auto;}
#content {width:80%; padding-left:20%;}

@media screen and (max-height:200px){
    #sidebar {color:blue; font-size:50%;}
} 
```

现场示例：http: [//jsfiddle.net/RWxGX/3/](http://jsfiddle.net/RWxGX/3/)

如果您的内容超出了 div 的高度，则不可能没有滚动条。这就是为什么我添加了屏幕高度的媒体查询。也许您可以针对短屏幕尺寸调整样式，这样就不需要出现滚动了。

干杯，伊格纳西奥

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-08T13:42:47.047

为任何想要做类似但**水平**方向的事情的人留下答案，就像我想要的那样。

[像下面这样调整@strider820](https://stackoverflow.com/users/2337423/strider820)的答案会产生神奇的效果：

```
.fixed-content {        //comments showing what I replaced.
    left:0;             //top: 0;
    right:0;            //bottom:0;
    position:fixed;
    overflow-y:hidden;  //overflow-y:scroll;
    overflow-x:auto;    //overflow-x:hidden;
} 
```

而已。还要检查@train使用 over 解释[的](https://stackoverflow.com/users/2581016/train)此[评论](https://stackoverflow.com/questions/16094785/have-a-fixed-position-div-that-needs-to-scroll-if-content-overflows#comment33858792_18366583)。`overflow:auto``overflow:scroll`

# design-patterns - 删除从另一个聚合引用的对象

> ID：16094786
> 
> 赞同：0
> 
> 时间：2013-04-18T23:29:00.907
> 
> 标签：design-patterns, domain-driven-design

Jimmy Nilsson 的 Applying DDD and Patterns book 中的一个例子： ![订单聚合和产品实体](https://i.stack.imgur.com/FOHKQ.jpg)

假设我想删除某个**OrderLine**引用的**Product** ，我的意思是从数据库中删除，为什么？可能是系统运行时间长，用户想清理一些旧**产品**，如何解决？ 对于那些可能已经读过这本书的人来说，另一个问题是，为什么作者选择不像他为**客户**实体那样对**产品进行快照？**

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:43:16.490

由于订单实际上是不可变事件，因此从数据库中删除产品不应影响该产品的现有订单。将适用的产品数据直接复制到订单行项目中通常是个好主意——这可能是 Jimmy 书中所说的“快照”，但我不确定。此外，如果您使用的是关系数据库并且对产品 ID 有外键约束，那么您应该避免删除产品或移除约束。******

# css - Eclipse / Zend Studio CSS 类和 ID 的自动完成

> ID：16094790
> 
> 赞同：1
> 
> 时间：2013-04-18T23:29:27.730
> 
> 标签：css, eclipse, autocomplete, zend-studio

我将**Zend Studio**用于我的 PHP 项目，它非常适合 PHP 开发，但有时我需要脱离模型和控制器并**深入查看视图**（在我的例子中是 *.phtml 文件）。

我成功地在整个工作区中启用了 Javascript 自动完成，并安装了对 jQuery 自动完成的 jQuery 支持，我发现内置了 HTML 自动完成。

现在的问题是：**如何在 Zend Studio 中启用 CSS 类和 Ids 自动完成功能？**

想象一下，您有一个包含所有 css 类/id 的**.css**文件，并且您想`makeItBig`在**div**中使用该类。

之前的div： `<div> Your big content </div>`

之后的div： `<div class="makeItBig"> Your big content </div>`

如何在键入类名时获得**自动补**全，而不必打开 css 文件来查找类的确切名称？

PS：*我不打算切换到另一个编辑器。*

PPS*我在 Mac OSX Mountain Lion 上使用 Zend Studio 10*

# c# - MTOM 可以用于 xs:string 数据类型吗

> ID：16094792
> 
> 赞同：1
> 
> 时间：2013-04-18T23:29:31.893
> 
> 标签：c#, .net, wcf, mtom

我已经[按照我找到的教程](http://mstecharchitect.blogspot.ca/2009/01/wcf-with-mtom-message-encoding.html)使用 MTOM 实现了原型 WCF 服务。

只要在我的 WCF 服务中接收/返回的任何对象中的数据类型是 byte[]，它在 wsdl 中转换为 xs:base64Binary，.net SOAP 框架就会利用 MTOM 并将该数据的内容作为附加 mime 部分中的原始二进制文件。效果很棒！

我的问题是，在我的实际实现中，我正在处理一个我无法更改的模式，它的数据类型为 string[]：

> 公共抽象部分类 BIN : ANY {
> 
> ```
> ...
> 
> /// <remarks/>
> [System.Xml.Serialization.XmlTextAttribute()]
> public string[] Text {
>     get {
>         return this.textField;
>     }
>     set {
>         this.textField = value;
>     }
> } 
> ```

在我的情况下，Text 属性（或元素的内容，当以 xml 形式存在时）将是大型二进制数据，我想使用 MTOM 功能将其作为原始二进制文件放入其他 mime 部分，而不是 base64编码它......这可能吗？

# ruby-on-rails - Redis 连接是否在 Rails 中共享？

> ID：16094794
> 
> 赞同：4
> 
> 时间：2013-04-18T23:29:37.333
> 
> 标签：ruby-on-rails, ruby, redis

在我的 Rails 应用程序中，我有一个创建 Redis 连接的初始化程序：

```
$redis = Redis.new(:host => 'localhost', :port => 6379, :db => 3) 
```

我的问题是：这个连接是为这个应用程序的所有工作人员共享的，还是每次我使用 $redis 时每个工作线程都会创建自己的连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T09:51:51.640

您可以尝试使用 gem `connection_pool`，它是任何网络客户端的通用池。

宝石文件：

```
gem 'connection_pool' 
```

初始化程序/redis.rb：

```
require 'connection_pool'

conf = YAML.load(File.read(File.join('config','redis.yml')))
redis_config = conf[Rails.env.to_s]

Redis.current = ConnectionPool.new(size: 10, timeout: 5) do 
  Redis.new host: redis_config['host'], port: redis_config['port'], db: redis_config['db']
end 
```

配置/redis.yml

```
development:
  host: localhost
  port: 6379
  db: 0
test:
  host: localhost
  port: 6379
  db: 15
production:
  host: localhost
  port: 6379
  db: 0 
```

然后，在您的代码中：

```
Redis.current.with do |conn|
  value = conn.get('foo')
  conn.sadd('bar', 1)
end 
```

在`with`块内，`conn`将包含来自池的 Redis 对象。当块正常退出或抛出异常时，它将返回到池中。

# php - AS3 获取变量，但无法访问

> ID：16094796
> 
> 赞同：0
> 
> 时间：2013-04-18T23:29:46.850
> 
> 标签：php, actionscript-3

我正在尝试将一些用户数据从 PHP 获取到 AS3。

当我在 AS3 中执行我的代码时，我得到了这个：`&levelUser=5&livesUser=5`它很好，这是我想要传输的所有数据

但是当我尝试只获取一个变量时，我得到了这个错误：

```
ReferenceError: Error #1069: Property livesUser not found on String and there is no default value.
at petRush_fla::MainTimeline/serverResponse()
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.net::URLLoader/onComplete() 
```

而且我不知道这是谁发生的，我把我的代码留在这里：

```
 function conectToServer() {
    //Conectamos al servidor
    loadingNum.text = "Connection to server...";

    var zahtjev:URLRequest=new URLRequest("getUserInfo.php");
    var loader:URLLoader = new URLLoader();
    loader.addEventListener(Event.COMPLETE, serverResponse);
    loader.load(zahtjev);

}

var livesVar:String;

function serverResponse(e:Event):void {
    trace(e.target.data.livesUser);
    gotoAndStop(2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:41:27.153

返回的数据是一个字符串，您需要像这样创建一个 URLVariables 实例：

```
function serverResponse(e:Event):void {
    var myVariables:URLVariables = new URLVariables(e.target.data);
    trace(myVariables.livesUser);
    gotoAndStop(2);
} 
```

另外我应该注意你的字符串不应该以 a 开头`&`，它应该是：

`levelUser=5&livesUser=5`

# regex - Oracle 正则表达式中不平衡的 `^` 和 `$` 锚点

> ID：16094798
> 
> 赞同：14
> 
> 时间：2013-04-18T23:29:59.857
> 
> 标签：regex, oracle

为什么在某些情况下，字符串开始锚的数量不等于字符串结束锚的数量？

```
regexp_count(chr(10)||'A'||chr(10)||'B', '^') = 2
regexp_count(chr(10)||'A'||chr(10)||'B', '$') = 1 
```

* * *

**UPD：**
在多线模式下，不平衡具有相反的方向：

```
regexp_count(chr(10)||'A'||chr(10)||'B', '^', 1, 'mn') = 1 
regexp_count(chr(10)||'A'||chr(10)||'B', '$', 1, 'mn') = 3 
```

[小提琴](http://www.sqlfiddle.com/#!4/d41d8/9961)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T11:02:20.137

经过调查，Oracle 支持部门得出结论认为这个问题是一个错误。

错误 16707134：REGEXP_COUNT 模式“^”和新行意外行为

# python - python字符串中的单引号和双引号

> ID：16094809
> 
> 赞同：2
> 
> 时间：2013-04-18T23:30:46.717
> 
> 标签：python, linux

我想调用一个 python 函数`pexpect.spawn(cmd)`，其中 cmd 是一个字符串，如下所示：

```
ssh -t kity@192.199.61.205 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"' 
```

IP地址总是在变化，所以它是这样的：

```
ssh -t kity@%s 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"' %host_ip 
```

有几个`'`and `"`，我很茫然如何处理，所以基本上，它是关于如何处理python字符串中的转义以及当有可变子字符串时，如何处理它

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T23:33:30.433

你可以使用三引号：

```
"""ssh -t kity@{0} 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"'""".format(ip_address) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:59:18.747

Cameron Sparr 已经给出了通用的答案。

但在您的具体情况下，您可能不需要这个。

[`pexpect.spawn`](http://pexpect.sourceforge.net/pexpect.html#spawn)接受命令和参数字符串*或*命令字符串和单独的参数字符串列表。对于其他库中的大多数类似方法（如标准库`subprocess`模块中的所有内容）也是如此。

因此，您只需要将每个参数变成一个字符串，如下所示：

```
pexpect.spawn('ssh', ['-t', 'kity@192.199.61.205', 'sudo nohup bash -c "./tcp_sender > /dev/null 2>&1 &"']) 
```

实际上，正是出于这个原因，文档特别建议了这一点：

> 第二种形式的 spawn（传递参数列表）在您希望生成命令并将其自己的参数列表传递给它的情况下很有用。这可以使语法更清晰。

当然，在您的情况下，您实际上是在生成一个带有参数列表的命令……其中一个本身就是要生成的命令和参数列表（`sudo`），依此类推（`nohup`, `bash`，最后`tcp_sender`)，显然`pexpect`只能帮助完成这些步骤中的第一步。幸运的是，在这种情况下，这就是您所需要的。

如果您*确实*需要更多，那里有一些库可以从参数列表中生成 POSIX 样式的引用字符串（基本上[`shlex`](http://docs.python.org/2/library/shlex.html)与我最终自己重写了它……实际上并没有那么复杂（基本上，只需将所有内容都转义然后引用所有参数）。但希望你永远不必这样做。

# c - 使用 C-if 条件实现 cd 系统调用

> ID：16094814
> 
> 赞同：13
> 
> 时间：2013-04-18T23:31:05.623
> 
> 标签：c, cd

这是使用 C 实现 cd 系统调用的代码。此代码的问题是它没有进入`if`条件 `if(strcmp(buffer,"cd") == 0)` ，我不明白为什么。

```
#include<sys/stat.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include<dirent.h>
#include<error.h>

#define BUFFERSIZE 20
int main(){

char *args[80]; 
char buffer[BUFFERSIZE];
char *prompt = "OS";
char *a = ">";
printf("%s%s",prompt,a); 
fgets(buffer, BUFFERSIZE, stdin);  

char *tok; 
tok = strtok (buffer," ");

while(buffer != NULL){ 
   buffer[strlen(buffer)-1] = '\0';  
   pid_t pid;
   pid = fork();
   if(pid < 0){
      fprintf(stderr, "Fork failed");
      return 1;
   }
   else if(pid == 0){

       if(strcmp(buffer,"cd") == 0){
         tok = strtok(NULL,"\n");
         cd(tok);
       }
       printf("%s%s",prompt,a); 
       fgets(buffer, BUFFERSIZE, stdin);
   }
   else{
     wait(NULL);
   }
}
return 0;
}

int cd(char *pth){
   char path[1000];
   strcpy(path,pth);

   static char *prompt = "OS";
   static char *a = ">";
   char *token;

   char cwd[256]; 
   getcwd(cwd,sizeof(cwd));

   strcat(cwd,"/"); 
   strcat(cwd,path);
   chdir(cwd);    

   printf("%s-%s%s",prompt,path,a);
   return 0;
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-07T09:50:37.740

根据其他人的建议更新了逻辑。

这里**不需要子进程**。如果您想要多任务处理，请使用线程。`Child process may be required for process running in background.`

以下程序对我有用：

```
#include <stdio.h>

#include <sys/stat.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <dirent.h>
//#include <error.h>

int hasPrefix(char const *, char const *);
int cd(char *pth);

#define BUFFERSIZE 200
int main(){

    char buffer[BUFFERSIZE];
    char *prompt = "OS";
    char *a = ">";

    char *tok;
    tok = strtok (buffer," ");

    while(buffer != NULL){
        bzero(buffer, BUFFERSIZE);
        printf("%s%s",prompt,a);
        fgets(buffer, BUFFERSIZE, stdin);
        if(hasPrefix(buffer,"cd") == 0){
            tok = strchr(buffer,' '); //use something more powerful
            if(tok) {
                char *tempTok = tok + 1;
                tok = tempTok;
                char *locationOfNewLine = strchr(tok, '\n');
                if(locationOfNewLine) {
                    *locationOfNewLine = '\0';
                }
                cd(tok);
            }
        }else{
            system("ls"); //for testing the CWD/PWD
        }
    }
    return 0;
}

int hasPrefix(char const *p, char const *q)
{
    int i = 0;
    for(i = 0;q[i];i++)
    {
        if(p[i] != q[i])
            return -1;
    }
    return 0;
}

int cd(char *pth){
    char path[BUFFERSIZE];
    strcpy(path,pth);

    char cwd[BUFFERSIZE];
    if(pth[0] != '/')
    {// true for the dir in cwd
        getcwd(cwd,sizeof(cwd));
        strcat(cwd,"/");
        strcat(cwd,path);
        chdir(cwd);
    }else{//true for dir w.r.t. /
        chdir(pth);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-11T22:51:50.527

利用

```
...
if(strncmp(buffer,"cd",2) == 0){
... 
```

反而。它适用于比较任意长度的前缀。它还限制了字符串大小。无需建立自己的比较例程。

您在代码的其他地方还有其他问题，但可以单独解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-08T19:32:48.777

我认为问题是因为这条线：

```
buffer[strlen(buffer)-1] = '\0'; 
```

这会将 的最后一个字符替换为`buffer`空字符。所以如果`buffer`包含`"cd"`，它现在只包含`"c"`（因为空字符是 C 中的字符串终止符）。

这条语句似乎没有任何必要，只需将其删除即可。

# android - 以编程方式在 Android 上登录 Facebook（Session.isOpened 始终返回 false）

> ID：16094820
> 
> 赞同：0
> 
> 时间：2013-04-18T23:31:30.783
> 
> 标签：android, android-facebook

我在以编程方式登录时遇到问题，登录后，当我希望用户发布某些内容时，当我检查 isOpened() 的活动会话时，它返回 false，所以我无法发出任何请求......

这是登录代码：

```
public void login()
{
    Session session = Session.getActiveSession();

    if (session == null) 
    {
        session = new Session.Builder(ResourceManager.getInstance().getMainActivity()).build();
        Session.setActiveSession(session);
    }

    if (!session.isOpened()) 
    {
        Session.OpenRequest openRequest = new Session.OpenRequest(ResourceManager.getInstance().getMainActivity());
        openRequest.setPermissions(PERMISSIONS);
        openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
        session.openForPublish(openRequest);
    }
} 
```

这是我检查是否可以使用会话的代码：

```
public void post()
{
    Session session = Session.getActiveSession();
    if (session != null) 
    {
        // This returns always false, so it never goes in...
        if (session.isOpened())
        {
            postStatus(String pStatus);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T06:41:25.190

尝试检查您之前在 facebook 中设置的键值。键值或任何设置的错误集成会使 facebook 函数变得奇怪或返回意外结果。

同样的情况在这里：[post](https://stackoverflow.com/questions/16176832/ifsession-isopen-facebook-login-on-android-always-returning-false)

# javascript - 如何在不使用 parseInt 的情况下检查数字是否不是字符串？

> ID：16094822
> 
> 赞同：-5
> 
> 时间：2013-04-18T23:31:35.217
> 
> 标签：javascript, jquery

更新：

找到解决方案：

```
isNaN(your_number) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:35:03.770

我假设您有一些分隔符，例如字符串中的逗号，告诉您每个数组元素的结束位置和下一个元素的开始位置。如果是这种情况，您可以使用[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)拆分它。

然后您可以将结果数组[字符串化为JSON：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

```
var somestring = 'blah,bleh,foo,bar,hah!';
var json = JSON.stringify(somestring.split(',')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T23:35:12.817

你的意思是这样吗？

`var temp = [$('#myID option:selected').val()];`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T23:38:57.507

如果您只想将单个字符串值放入数组中，您可以这样做：

```
var yourArray = [$('#myID').val()]; 
```

> '如果我没有从表单的选择框中选择任何东西，那么它应该返回一个空数组，而不是一个空值'

如果我正确理解了您的陈述，那么当没有选择值时您需要一个空数组，否则您需要一个包含该值的数组。您可以通过执行以下操作来实现：

```
var v = $('#myID').val(),
    yourArray = v !== null? [v] : []; 
```

然后，您可以使用将您的数组转换为 JSON`JSON.stringify`

```
var json = JSON.stringify(yourArray);` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T23:34:00.383

我不太确定您要在这里完成什么，但是您可以尝试以下操作：

```
var temp = new Array();
temp.push($('#myID').val()); 
```

顺便说一句，对于使用方法 val() 进行选择，您实际上得到了选择的选项。

你也可以试试：

```
var temp = [$('#myID').val()]; 
```

这通过在 [] 中分配值将变量 temp 初始化为数组。

# java - 标题超过 150 个字符，关于 JTextField 和 JPanel

> ID：16094825
> 
> 赞同：-2
> 
> 时间：2013-04-18T23:32:01.780
> 
> 标签：java, swing, jframe, jpanel, jtextfield

将是标题：当我取消注释第 40 行时，为什么 JTextField 会消失，如何将 Ellipse2D.double 球添加到 JPanel，还有比 JPanel 更好的使用方法。

我正在尝试制作一个基本游戏，您可以在其中使用 WASD 键来移动球。输入在 JTextField 中，当我添加 JPanel 时它就消失了。在那之后，我将如何将球添加到 JPanel。另外，JPanel 是用于绘制图像的地方吗？

代码：

```
import javax.swing.*;
import javax.swing.JFrame;
import javax.swing.JTextField;
import java.awt.*;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;
import java.awt.geom.*;
import java.util.Timer;
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.event.*;
@SuppressWarnings({ "serial" })
public class WASD extends JFrame implements KeyListener{
  Ellipse2D.Double ball = new Ellipse2D.Double(10,10,10,10);
    int ballx = 100;
    int bally = 100;
    JTextField typingArea;
    public static void main(String[] args){ 
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
    private static void createAndShowGUI(){
        WASD frame = new WASD("frame");
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

        frame.addComponentsToPane();

        frame.pack();
        frame.setVisible(true);
    }
    private void addComponentsToPane(){
        typingArea = new JTextField(20);
        add(typingArea);
        typingArea.addKeyListener(this);
        JPanel drawingArea = new JPanel();
        add(drawingArea); // Line 40
    }
    public WASD(String name){
        super(name);
    }
    public void keyPressed(KeyEvent e) {
        System.out.println("Hello");
    }
    public void keyReleased(KeyEvent e) {
        System.out.println("Goodbye.");
    }

    public void keyTyped(KeyEvent e) {
        System.out.println("Are you still there?");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:35:50.083

> 当我取消注释第 40 行时，为什么 JTextField 会消失

因为`JFrame`使用 a`BorderLayout`作为其默认布局管理器。通过添加面板，您可以有效地删除文本字段并将其替换为面板

查看

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

更多细节...

> 另外，JPanel 是用于绘制图像的地方吗？

是`JPanel`的（可能）是开始定制绘画的最佳场所。

查看...

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

更多细节

> 我正在尝试制作一个基本游戏，您可以在其中使用 WASD 键来移动球

`JTextField`不是控制它的最佳选择，请参阅[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# html - 选择文本时浏览器默认的背景颜色是什么？

> ID：16094837
> 
> 赞同：39
> 
> 时间：2013-04-18T23:33:56.417
> 
> 标签：html, css

当您在网页中选择文本时，背景会变为默认的蓝色。这种蓝色有什么确切的颜色代码？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-18T23:43:47.027

1.  Safari 6.0.3 Mac ^* :`#B4D5FE`
2.  铬 26.0.1410.65 Mac ^*：`#ACCEF7`
3.  火狐 19.0 Mac ^* :`#B4D5FF`
4.  铬 26.0.1410.64 m Windows 8 ^+：`#3297FD`
5.  火狐 20.0.1 Windows 8 ^+：`#3399FF`
6.  Safari 5.1.7 Windows 8 ^+：`#3298FD`
7.  Internet Explorer 10.0.4 Windows 8 ^+：`#3399FF`

^*[使用适用于 Mac 的 ColorSnapper找到] ^+[使用适用于 Windows 的 ColorSchemer 找到]

这是该信息的屏幕截图，十六进制颜色代码以相同颜色突出显示：

> [![以相同颜色突出显示的十六进制颜色代码的屏幕截图](https://i.stack.imgur.com/OtwZo.png)](https://i.stack.imgur.com/OtwZo.png)

* * *

然而，这将是一个永无止境的清单，因为每个...

1.  浏览器
2.  操作系统
3.  浏览器版本（可能）

...会有不同的颜色。此外，从 CSS3 开始，您可以使用以下方法更改颜色：

```
::selection{
    background-color:#000;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-18T23:39:29.723

[::selection CSS 伪元素](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aselection)将规则应用于已被用户突出显示（例如，用鼠标或其他定点设备选择）的文档部分。

默认值取决于您使用的浏览器。它通常在附近的某个地方`#3297fd`。

您可以像这样更改它：

```
/* draw any selected text yellow on red background */
::-moz-selection { color: gold;  background: red; }
::selection      { color: gold;  background: red; } 

/* draw selected text in a paragraph white on black */
p::-moz-selection { color: white;  background: black; }
p::selection      { color: white;  background: black; } 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-18T23:38:42.650

选择背景颜色？这与浏览器没有任何关系，它是一个操作系统设置（并且通常是可定制的）。如果您真的想知道机器上的特定蓝色，请将其截屏并在任何可让您检查颜色的图形程序中打开它。

# ruby-on-rails-3 - Rails 3：多态条件查询

> ID：16094844
> 
> 赞同：0
> 
> 时间：2013-04-18T23:34:48.657
> 
> 标签：ruby-on-rails-3, squeel

我有以下型号：

```
class Notification < ActiveRecord::Base

belongs_to :notificatable, polymorphic: true

end

class BounceEmailNotification < ActiveRecord::Bas

has_one :notification, :as => :notificatable, :dependent => :destroy

end

class UserNotifierEmailNotification < ActiveRecord::Base

has_one :notification, :as => :notificatable, :dependent => :destroy

end 
```

如您所见，通知可以是“退回电子邮件通知”或“用户通知电子邮件通知”类型。该`BounceEmailNotification`模型具有事件字符串属性。如果我想检索具有特定事件值的所有用户通知电子邮件通知和所有退回电子邮件通知，该`created_at`怎么办？

像这样的东西（使用squeel）：

```
(Notification.joins{ notificatable(BounceEmailNotification) }.where('bounce_email_notifications.event' => 'error') + Notification.joins { notificatable(UserNotifierEmailNotification) }).sort_by { |n| n.created_at } 
```

会工作，但我不想使用 Ruby 来订购通知。我能做些什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:40:40.713

试试这个。

```
Notification.joins('left outer join bounce_email_notifications on notifications.notificatable_id = bounce_email_notifications.id and notificatable_type = "BounceEmailNotification"').
where("bounce_email_notifications.event = ? or notificatable_type = ?",'error',UserNotifierEmailNotification.to_s).
order('notifications.created_at') 
```

这是使用活动记录 3.2，但我想它应该在 rails 3 中工作。

我没有使用 squeel 不能对如何将它与 squeel 一起使用发表太多评论，但这可以给你一个简短的想法。

在 squeel 中，我想出了使用 squeel[文档创建的类似（未测试）的东西](https://github.com/ernie/squeel)

```
Notification.notificatable{notable(BounceEmailNotification).outer}. where{
         { ('bounce_email_notifications.event'=>'error') | (:notificatable_type=>UserNotifierEmailNotification.to_s) } 
```

概念步骤

1.  在bounce_email_notifications 上左加入以获得所有bounce_email_notifications 和非bounce_email_notifications 通知结果

2.  检查所有 UserNotifierEmailNotification 记录的bounce_email_notifications.event = event
    或notificatable_type = 'UserNotifierEmailNotification'

3.  按通知排序记录。创建于

希望这可以帮助。

# javascript - jQuery 怎么可能看起来既是对象又是对象调用的方法？

> ID：16094848
> 
> 赞同：0
> 
> 时间：2013-04-18T23:34:59.057
> 
> 标签：javascript, jquery

[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow)有一个针对不支持它的浏览器调用的 API 对象的变通方法（[通过此人的 github](http://mths.be/unsafewindow)）

```
var unsafeWindow = (function() {
    var e1 = document.createElement('p')
    e1.setAttribute('onclick', 'return window;');
    return e1.onclick();
})();

// If the current document uses a JavaScript library, you can use it in
// your user script like this:
console.log(unsafeWindow.jQuery); 
```

如果`unsafeWindow`是一个对象（或者在这种情况下是一个旨在模仿对象的函数），它怎么能像这样使用`$ = unsafeWindow.jQuery`？我知道这是您将函数映射到`$`而不是`$`简单的 jQuery 别名的方式，但我只是对为什么感到困惑，因为我认为`jQuery`它本身是一个对象，并且在这里被调用，就像一个方法一样。

*编辑：感谢您的回答，我希望我能“勾选”你们所有人，感谢您的帮助！*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:41:55.237

在 javascript 中，函数是对象！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T23:45:57.177

不要让`.`眼罩蒙住你。`object.something`正在获取`something`可以是任何东西（函数、变量、对象、值..）的属性，同时`object.something()`正在应用该方法`something`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:41:27.193

当您这样做时，`$ = unsafeWindow.jQuery`您将 jQuery 对象分配给 $ 就像您正确指出的那样。您没有调用任何函数。在 javascript 中调用函数需要`()`在末尾添加一个括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T23:41:49.140

Jquery 是一个带有附加方法的构造函数。当用作 时`$.each()`，您只是调用`each()`附加到函数（对象）的方法。当你使用`$()`时，它会调用一个 internal`new jQuery()`并返回它，让你可以访问它的原型方法。

# xml - 编译 custom.pll 时出错

> ID：16094853
> 
> 赞同：0
> 
> 时间：2013-04-18T23:35:23.343
> 
> 标签：xml, oracle

编译 custom.pll 时出现以下错误

CUSTOM 上的编译错误：PL/SQL ERROR 707 at line 1, column 10 unsupported construction or internal error [2602]

在下面的 SQL 语句中发生错误：

```
SELECT EXTRACT (VALUE (d), 'tokenize/token/text()').getstringval ()
INTO ls_token
FROM TABLE (XMLSEQUENCE (EXTRACT (XMLTYPE.createxml (t_respond),
                                '/tokenize',
                                NULL
                               )
                      )
         ) d; 
```

这是我想在 custom.pll 中添加的以下功能

```
FUNCTION Xxwv_token (p_no IN VARCHAR2)
RETURN VARCHAR2
IS
  soap_request VARCHAR2 (30000);
  soap_respond VARCHAR2 (30000);
  http_req     utl_http.req;
  http_resp    utl_http.resp;
  launch_url   VARCHAR2 (240);
BEGIN
    BEGIN
        SELECT fpov.profile_option_value
        INTO   launch_url
        FROM   fnd_profile_options fpo,
               fnd_profile_option_values fpov
        WHERE  fpo.profile_option_name = 'TEST WEBSERVICE CALL'
               AND fpov.profile_option_id = fpo.profile_option_id;
    EXCEPTION
        WHEN OTHERS THEN
          fnd_message.Set_string ('Profile Setup for URL : '
                                  || SQLERRM);

          fnd_message.Show ();
    END;

    http_req := utl_http.Begin_request (launch_url, 'POST', 'HTTP/1.1');  
    utl_http.Set_header (http_req, 'Content-Type', 'text/xml');    
    utl_http.Set_header (http_req, 'Content-Length', Length (soap_request));   
    utl_http.Set_header (http_req, 'SOAPAction', '');    
    utl_http.Write_text (http_req, soap_request);

    http_resp := utl_http.Get_response (http_req);   
    utl_http.Read_text (http_resp, soap_respond);    
    utl_http.End_response (http_resp);

    SELECT EXTRACT (VALUE (d), 'tokenize/token/text()').getstringval ()
    INTO ls_token
    FROM TABLE (XMLSEQUENCE (EXTRACT (XMLTYPE.createxml (t_respond),
                                    '/tokenize',
                                    NULL
                                   )
                          )
             ) d;

    RETURN '1234567890';
EXCEPTION
  WHEN OTHERS THEN
             --fnd_message.set_string ('Error : '||SQLERRM);
             --fnd_message.show();
             RETURN '9876543210';
END xxwv_token; 
```

# jquery - 如何使用 jQueryUI 调整大小来强制 div 最小大小 - 不允许面板移动？

> ID：16094856
> 
> 赞同：0
> 
> 时间：2013-04-18T23:35:54.003
> 
> 标签：jquery, css, jquery-ui, resizable

我正在为[此处](http://talks.golang.org/2012/concurrency.slide#1)演示的 Go 语言（这不是 Go 问题）的[演示工具](http://code.google.com/p/go.talks/present/)进行扩展。

当前，当在演示文稿中运行可运行的代码片段时，会显示固定大小的输出面板，例如[此处](http://talks.golang.org/2012/concurrency.slide#12)（您可以单击该页面上的“运行”按钮以在片段中运行 Go 代码 - 在服务器端执行）。我有一个更改列表，允许 jquery-ui 从 N、W 和 NW 句柄调整面板的大小。这都很好。这是执行此操作的相关代码和CSS：

play.js（片段）：

```
 function init(code) {
    var id = getId();

    var output = document.createElement('div');
    var outpre = document.createElement('pre');
    var stopFunc;

    $(output).resizable({handles: "n,w,nw"});

    function onKill() {
      if (stopFunc) {
        stopFunc();
      }
    }

    function onRun() {
      onKill();
      outpre.innerHTML = "";
      output.style.display = "block";

    ... more 
```

样式.css（片段）：

```
/* Code */
div.code {
  outline: 0px solid transparent;
}
div.playground {
  position: relative;
}
div.output {
  position: absolute;
  left: 50%;
  top: 50%;
  right: 40px;
  bottom: 40px;
  background: #202020;
  padding: 5px 10px;
  z-index: 2;

  border-radius: 10px;
  -o-border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;

}
div.output pre {
  margin: 0;
  padding: 0;
  background: none;
  border: none;
  width: 100%;
  height: 100%;
  overflow: auto;
}
div.output .stdout, div.output pre {
  color: #e6e6e6;
}
div.output .stderr, div.output .error {
  color: rgb(244, 74, 63);
}
div.output .system, div.output .exit {
  color: rgb(255, 209, 77)
}
.buttons {
  position: relative;
  float: right;
  top: -60px;
  right: 10px;
}
div.output .buttons {
  position: absolute;
  float: none;
  top: auto;
  right: 5px;
  bottom: 5px;
}

/* Output resize details */
.ui-resizable-handle {
  position: absolute;
}
.ui-resizable-n {
  cursor: n-resize;
  height: 7px;
  width: 100%;
  top: -5px;
  left: 0;
}
.ui-resizable-w {
  cursor: w-resize;
  width: 7px;
  left: -5px;
  top: 0;
  height: 100%;
}
.ui-resizable-nw {
  cursor: nw-resize;
  width: 9px;
  height: 9px;
  left: -5px;
  top: -5px;
} 
```

除了一个问题之外，这几乎可以满足我的所有需求：我想为输出面板指定最小尺寸，以便控制按钮始终被面板包围。我可以使用 div.output 中的 min-height 和 min-width CSS 属性来实现这一点，除了这些属性通过移动面板的底部/右侧边缘来强制最小值。

如何在保持底部和右侧边缘位于其原始位置的同时指定最小高度和宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:28:05.110

您可以对按钮使用相对绝对定位。因此，您可以将`<pre>`标签的最小高度设置为比输出框的最小高度小 36 像素。然后，将按钮的 div 定位到输出 div 中您想要的任何位置。

> div.输出{
> 位置：相对；
> }
> 
> div.buttons {
> 位置：绝对；
> 底部：0；
> 右：150px；
> }

# dns - 将 URL 直接指向虚拟服务器中的 GlassFish 应用程序

> ID：16094858
> 
> 赞同：0
> 
> 时间：2013-04-18T23:36:39.380
> 
> 标签：dns, glassfish, hosting, virtual-server

我们有一个带有 DNS 管理功能的域名。我们还有一个在 GlassFish 服务器中开发的 Web 应用程序，该服务器托管在虚拟服务器中，路径为

```
http://198.98.103.233:8080/pemis/ 
```

当有人键入域名时，我想直接到该应用程序的主页。浏览页面后，我们必须能够看到

```
http://www.pemis.lk/faces/public.xhtml 
```

在浏览器中而不是

```
http://198.98.103.233:8080/pemis/faces/public.xhtml 
```

我们如何配置它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:42:19.570

您需要将应用程序安装为 Glassfish 中的根应用程序，如此[处](http://alexismp.wordpress.com/2007/08/30/glassfish-tip-have-your-application-be-the-root-application/)所述。但这并不难：

```
asadmin deploy --contextroot "/" your-webapp.war 
```

`sun-web.xml`或`glassfish-web.xml`根据您使用的 Glassfish 版本在 或 中设置 context-root 属性。

要更改 Glassfish 侦听的端口，您需要修改 HTTP 侦听器配置。在默认安装中，您需要更改 http-listener-1 的端口。您可以使用控制台执行此操作。但也可以直接编辑域的 domain.xml：

```
<network-listeners>
  <network-listener port="80" protocol="http-listener-1" transport="tcp" name="http-listener-1" thread-pool="http-thread-pool"></network-listener>
  ... 
</network-listeners> 
```

最后，要`www.pemis.lk`指向该服务器，您需要一个指向该服务器所连接地址的 DNS 条目。具体操作方法取决于向您出售域名的公司，他们通常有在线工具允许您输入或修改名称-地址映射。如有疑问，最好通过电话或邮件与他们联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T19:13:08.357

我在同一条路上，并且由于您没有发布您找到的解决方案（如果您找到了），我将在此处为面临此问题的任何人添加一些未来参考。

我将把这个问题分成两部分：消除 host:port 和更改 URL 的行为方式。

我对第一个没有完整的响应，但是如果您选择在端口 80 上侦听，按照 HTML 标准，您将抑制 URL 上的端口，获得您想要的一半解决方案。

第二部分，更改 URL 行为和/或缩短它可以通过使用 apache 中的 mod_rewrite 或 Tuckey 的 URL 重写过滤器 ( [http://www.tukey.org/urlrewrite/](http://www.tuckey.org/urlrewrite/) ) 来实现。使用 URL Rewrite 的谷歌搜索可以为您提供更深入的解释，并且网站上有一个指南。

但是，如果您找到了答案，您应该用答案更新您的问题。

# entity-framework - 为 1-1 关系连接到父表的 IN 过滤器生成的查询两次

> ID：16094860
> 
> 赞同：0
> 
> 时间：2013-04-18T23:36:46.950
> 
> 标签：entity-framework, sql-server-2008-r2

我遇到了这个问题，并用 AdventureWorks2008R2 复制了它以使其更容易。基本上，我想为 IN 值列表过滤父表，我认为它会生成这种类型的查询，但它不会。

```
SELECT * FROM SalesOrderDetail where EXISTS( select * from SalesOrderHeader where d.id=h.id and rowguid IN ('asdf', 'fff', 'weee' ) 
```

**任何想法如何更改 LINQ 语句以仅查询 Header 一次？**

（忽略我在 Guids 上匹配的事实 - 它实际上是整数；我只是在 EF 中快速寻找一个 1-1 表，因为那是问题发生的时候，我碰巧找到了这些）

```
var guidsToFind = new Guid[] { Guid.NewGuid(), Guid.NewGuid(), Guid.NewGuid()};
AdventureWorks2008R2Entities context = new AdventureWorks2008R2Entities();
var g = context.People.Where(p => guidsToFind.Contains(p.BusinessEntity.rowguid)).ToList(); 
```

这会产生以下更昂贵的查询：

```
SELECT [Extent1].[BusinessEntityID] AS [BusinessEntityID], 
[Extent1].[PersonType] AS [PersonType], 
[Extent1].[NameStyle] AS [NameStyle], 
[Extent1].[Title] AS [Title], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[MiddleName] AS [MiddleName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[Suffix] AS [Suffix], 
[Extent1].[EmailPromotion] AS [EmailPromotion], 
[Extent1].[AdditionalContactInfo] AS [AdditionalContactInfo], 
[Extent1].[Demographics] AS [Demographics], 
[Extent1].[rowguid] AS [rowguid], 
[Extent1].[ModifiedDate] AS [ModifiedDate]
FROM   [Person].[Person] AS [Extent1]
INNER JOIN [Person].[BusinessEntity] AS [Extent2] ON [Extent1].[BusinessEntityID] = [Extent2].[BusinessEntityID]
LEFT OUTER JOIN [Person].[BusinessEntity] AS [Extent3] ON [Extent1].[BusinessEntityID] = [Extent3].[BusinessEntityID]
WHERE [Extent2].[rowguid] = cast('b95b63f9-6304-4626-8e70-0bd2b73b6b0f' as uniqueidentifier) OR [Extent3].[rowguid] IN (cast('f917a037-b86b-4911-95f4-4afc17433086' as uniqueidentifier),cast('3188557d-5df9-40b3-90ae-f83deee2be05' as uniqueidentifier)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:17:29.683

真的很奇怪。看起来像 LINQ 限制。

我现在没有可以尝试的系统，但是如果您首先根据提供的 guid 获得 BusinessEntityId 值的列表，然后获得这样的人

```
var g = context.People.Where(p => businessEntityIdList.Contains(p.BusinessEntityId)).ToList(); 
```

不再有额外不必要的连接的理由。

如果可行，您可以尝试将 to 步骤组合到一个 LINQ 表达式中，以查看分隔是否保持不变。

# java - Java 正则表达式模式连接模式

> ID：16094874
> 
> 赞同：2
> 
> 时间：2013-04-18T23:37:42.580
> 
> 标签：java, regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:13:40.223

假设您想要*完全*匹配（即`tomato`不匹配`omat`），那么您需要将每个包装在and`p_i`之间，然后加入它们。`(?=^(?:``)$)`

如果你想要*不精确*的匹配（`tomato`确实匹配`omat`），那么你需要在and`p_i`之间包装每个，然后加入它们。请注意，在这种情况下，可能会发生灾难性的回溯。`(?=.*?(?:``))`

`.*`在这两种情况下，如果你想吃这个词，你可以在加入之后添加（记住，前瞻匹配空字符串）。

**解释**

在确切的情况下，外部被包裹在一个前瞻中，因此没有字符被吃掉。内部是锚点`^`，并且`$`（这提供了准确性）围绕非捕获组。非捕获组是这样，如果您在其中一个的上层有 or 表达式`p_i`，则锚点将应用于整个组而不是第一个表达式。

不精确的情况是完全一样的，除了锚定，我们吃字符直到我们到达匹配位置。

[您可以在www.debuggex.com](http://www.debuggex.com/?re=%28?=%5E%28?%3aa.%2aa%29%24%29%28?=%5E%28?%3a.%2afalfa%29%29.%2a&flags=&str=alfalfa)上查看详细示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:24:51.753

```
private static String combineRE(String p1, String p2){
    int groups1 = 0, groups2=0;
    StringBuilder newP = new StringBuilder("(?=");
    newP.append(p1);
    newP.append("$)(?=");

    Pattern capturingGroup = Pattern.compile("(?<!\\\\)(\\\\\\\\)*\\((?!\\?)");
    Matcher m = capturingGroup.matcher(p1);
    while(m.find()) groups1 ++;

    m = capturingGroup.matcher(p2);

    while(m.find()) groups2 ++;
    String new2 = p2;

    for(int i=1; i<=groups2; i++)
        new2 = new2.replaceAll("(?<!\\\\)\\\\"+i, "\\\\" + (i+groups1));

    newP.append(new2);
    newP.append("$).*");
    return newP.toString();
} 
```

此函数使用基本结构`(?=p1$)(?=p2$).*`，同时在第二个模式中重新计算编号的反向引用。它使用正则表达式来计算每个模式中捕获组开启者的数量（未转义`(`的 s 后不跟 a `?`），然后在将第二个模式放入结果模式之前更新第二个模式中的反向引用。我已经用 ideone 搭建了一个测试环境：请添加所有你能想到的测试用例，但我认为这回答了你的问题。

[http://ideone.com/Wm8cRc](http://ideone.com/Wm8cRc)

第 2 轮：

没有好的方法可以生成一个将`find()`子字符串匹配两个模式的模式。`(?=p1(?<p2)).*(?<(?=p1)p2)`在放弃并编写算法之前，我短暂地玩弄了其他此类废话。首先，我稍微修改了之前的 CombineRE：

```
private static String combineRE(String p1, String p2, boolean anchors){
    int groups1 = 0, groups2=0;
    StringBuilder newP = new StringBuilder((anchors)?"^(?=":"(?=");
    newP.append(p1);
    if (anchors) newP.append('$');
    newP.append(")(?=");

    Pattern capturingGroup = Pattern.compile("(?<!\\\\)(\\\\\\\\)*\\((?!\\?)");
    Matcher m = capturingGroup.matcher(p1);
    while(m.find()) groups1 ++;

    m = capturingGroup.matcher(p2);

    while(m.find()) groups2 ++;
    String new2 = p2;

    for(int i=1; i<=groups2; i++)
        new2 = new2.replaceAll("(?<!\\\\)\\\\"+i, "\\\\" + (i+groups1));

    newP.append(new2);
    if (anchors) newP.append('$');
    newP.append(')');
    if (anchors) newP.append(".*");
    return newP.toString();
} 
```

您会看到它现在支持可选锚点。我在我的新功能中使用了这个功能：

```
private static String[] findAllCombinedRE(String p1, String p2, String haystack, boolean overlap){
    ArrayList<String> toReturn = new ArrayList<String>();
    Pattern pCombo = Pattern.compile(combineRE(p1,p2, false));
    String pComboMatch = combineRE(p1,p2, true);
    Matcher m = pCombo.matcher(haystack);
    int s = 0;
    while (m.find(s)){
        String match = haystack.substring(m.start());
        s = m.start()+1;
        for (int i=match.length(); i>0; i--){
            String sMatch = match.substring(0,i);
            if (Pattern.matches(pComboMatch, sMatch)){
                toReturn.add(sMatch);
                /**
                 *  Note that at this point we can caluclute match
                 *  object like Information:
                 *  
                 *  group() = sMatch;
                 *  start() = m.start();
                 *  end() = m.start() + i;
                 *  
                 *  If it so suited us, we could pass this information
                 *  back in a wrapped object.
                 */
                if (!overlap){
                    s = m.start()+i;
                    break;
                }
            }
        }
    }
    return toReturn.toArray(new String[]{});
} 
```

它使用两个正则表达式的无锚版本来查找所有可能匹配的字符串，然后一次删除一个字母，直到字符串与锚版本匹配。它还包括一个布尔值来控制重叠匹配。

[http://ideone.com/CBoBN5](http://ideone.com/CBoBN5) 效果很好。

# node.js - 如何为 graphicsmagick 配置 JPEG 委托？

> ID：16094875
> 
> 赞同：4
> 
> 时间：2013-04-18T23:37:58.843
> 
> 标签：node.js, imagemagick, jpeg, graphicsmagick

我想将图像裁剪到指定的像素区域。我想使用`gm`来自[https://github.com/aheckmann/gm](https://github.com/aheckmann/gm)的模块。我正在运行 Linux Mint 13 和 node.js v0.9.4pre。

我遇到了一个听起来像 graphicsmagick 不知道 jpegs 的错误：

```
Error: Command failed: gm convert: No decode delegate for this image format (./assets/images/temp/2aadd4379e1cf2b59429994270db2a8a.jpg) 
```

果然，`gm convert -list formats`没有显示 jpeg 代表：

```
<snip>
     IPTC P  rw-  IPTC Newsphoto
 IPTCTEXT P  rw-  IPTC Newsphoto text format
IPTCWTEXT P  rw-  IPTC Newsphoto text format
      K25 S  r--  Kodak Photo RAW
<snip> 
```

graphicsmagick 有一个[ftp 文件夹](ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/delegates/)，其中包含代表的源代码（带有[自述](ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/delegates/README.txt)文件。）所以我下载、解压缩并`jpegsrc.v6b.tar.gz`按照源文件随附的安装文档中的建议进行安装。

我很确定已安装 jpeg 库`cjpeg`，`djpeg`也许还有其他东西。但是`make uninstall`，我没有发现或发现。我还没有尝试在这个上安装任何其他版本的 jpeg 库。安装 jpeg 库后，我卸载并重建了 graphicsmagick。

仍然没有列出 JPEG 代表`gm convert -list formats`。

我正在从 Imagemagick 迁移，即使没有安装这个库，它在调整 jpeg 大小时也没有任何问题。

**我必须怎么做才能让 graphicsmagic 处理 jpeg？**

* * *

这是我调用 gm 的方式：

```
 var gmagic = require('gm');
    gmagic(cfg.tmpPath)
    .crop(h,w,x0,y0)
    .write(cfg.croppedPath, function(err){
      if(err){ done(err) } 
        else { done(null, cfg.croppedPath) };
    }); 
```

以下是我用来安装 jpeg 库和 graphicsmagick 的命令：

```
$ cd ~/source
$ wget http://www.ijg.org/files/jpegsrc.v6b.tar.gz
$ tar -xzvf jpegsrc.v6b.tar.gz
$ cd jpeg-6b
$ ./configure
$ make
$ sudo make install

$ cd ~/source
$ wget ftp://ftp.graphicsmagick.org/pub/GraphicsMagick/1.3/GraphicsMagick-1.3.18.tar.xz
$ tar -xJvf GraphicsMagick-1.3.18.tar.xz
$ cd GraphicsMagick-1.3.18
$ ./configure
$ make
$ sudo make install

$ npm install gm 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:11:46.840

我通过告诉 gm 库使用 imagemagick 二进制文件而不是默认的 graphicsmagic 二进制文件找到了一个成功的解决方法：

```
var gmagic   = require('gm');
var imagic   = gmagic.subClass({imageMagick: true});
...
imagic(cfg.tmpPath)
.crop(h,w,x0,y0)
.write(cfg.croppedPath, function(err, stdout, stderr, command){
  if(err){ next(err) }
  else { next(null, raft) };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:37:55.353

鉴于您使用的是 Linux Mint，GraphicsMagick 查找 libjpeg 的最佳解决方案是安装 libjpeg 开发包（libjpeg-dev），重新运行 GraphicsMagick 配置脚本，重新构建并安装。确保为支持您感兴趣的其他格式的库添加 -dev 包。

如果要使用从源代码安装的 libjpeg，则需要将选项 LDFLAGS=-L/usr/local/lib CPPFLAGS=-I/usr/local/include 添加到 GraphicsMagick 配置脚本调用。请注意，Linux Mint 可能带有与 jpeg 6b 不同的 libjpeg（例如 jpeg 8 或 libjpeg turbo），并且最好不要在系统上拥有重复的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T09:24:22.533

我意识到这严格来说是一个 Linux 问题，但也许这会对某人有所帮助......

在 Mac 上，我改用 HomeBrew。只需运行这 3 行（这`chown`行对我来说是必要的，你可能想先不试试）：

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
sudo chown -R $USER:admin /usr/local
brew install graphicsmagick 
```

如果它抱怨 jpeg 库被取消链接，运行`brew doctor`+ 按照说明链接任何丢失的“桶”。

如果有些事情搞砸了，你想重新开始（见[https://stackoverflow.com/a/17846596/188926](https://stackoverflow.com/a/17846596/188926)）：

```
brew uninstall imagemagick graphicsmagick libpng jpeg
brew cleanup -s
brew install graphicsmagick 
```

# android - android从pageviewer获取当前位图

> ID：16094879
> 
> 赞同：0
> 
> 时间：2013-04-18T23:38:29.573
> 
> 标签：android, view, android-viewpager, universal

我试图通过 getchildat(index) 从 pageviewer 获取当前视图，然后从视图中获取位图，但它总是返回 null 我从 MyPageChangeListener 获取我的索引，我试图设置索引的手动值但仍然返回 null

```
public class ImagePagerActivity extends Activity {

private static final String STATE_POSITION = "STATE_POSITION";
DisplayImageOptions options1;
public static ViewPager pager;
ImageLoader imageLoader;
InputStream inputStream2;
List<String> lol;
private Bitmap bitmapz;
int pagerPosition;
int positions;
 boolean _isJustAfterResume = false;
 int zpositions;
 int width;
 int height;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fullimage);

     Intent i = getIntent();
    List<String> lol = i.getStringArrayListExtra("lol");
    this.lol = lol;
     pagerPosition = i.getExtras().getInt("id");

    if (savedInstanceState != null) {
        pagerPosition = savedInstanceState.getInt(STATE_POSITION);
    }

         options1 = new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.ic_stub)
        .showImageOnFail(R.drawable.ic_stub)
        .resetViewBeforeLoading()
        .cacheOnDisc()
        .imageScaleType(ImageScaleType.EXACTLY)
        .bitmapConfig(Bitmap.Config.RGB_565)
        .displayer(new FadeInBitmapDisplayer(300))
        .build();
         ImagePagerAdapter imagePagerAdapter = new ImagePagerAdapter(lol);

    pager = (ViewPager) findViewById(R.id.myfivepanelpager);
    pager.setAdapter(imagePagerAdapter);
    pager.setCurrentItem(pagerPosition);
     registerForContextMenu(pager);

      View child  = pager.getChildAt(zpositions); // always returns null
         ImageView currentImageView = (ImageView) child.findViewById(R.id.image1);
         BitmapDrawable bd = (BitmapDrawable) currentImageView.getDrawable();
         Bitmap bmp = bd.getBitmap();

     pager.setOnPageChangeListener(new MyPageChangeListener(){

        @Override
        public void onPageSelected(int position) {

            super.onPageSelected(position);
        }

     });

}

   private class ImagePagerAdapter extends PagerAdapter {
    private List<String>  images;
    private LayoutInflater inflater;
    private ImageLoader imageLoader;
    private int nposition;
    private Bitmap zBitmap;
    private View imageLayout;
    ViewPager viewPager;

    ImagePagerAdapter(List<String> lol) {

        this.images = lol;
        inflater = getLayoutInflater();
          ImageLoader imageLoader = ImageLoader.getInstance();
            this.imageLoader = imageLoader;
    }
    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }
    @Override
    public void finishUpdate(View container) {
    }
    @Override
    public int getCount() {
        return images.size();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
         viewPager = (ViewPager) container;

        View imageLayout = inflater.inflate(R.layout.item_pager_image, container, false);
        this.imageLayout = imageLayout;
        ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image1);
         String imString = images.get(position);
            String imageUria = "assets://"+imString;
            this.nposition = position;
            imageLoader.displayImage(imageUria, imageView, options1 );

            viewPager.addView(imageLayout, 0);

        return imageLayout;
    }

    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    public Parcelable saveState() {
        return null;
    }

    public void startUpdate(View container) {
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T15:19:21.837

```
 imageLoader.loadImage(lol.get(pager.getCurrentItem())), new SimpleImageLoadingListener(){
        @Override
        public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {

            Bitmap bmp = loadedImage;

            //do whatever you want 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T09:59:57.893

```
getBitmapFromView(pager.getChildAt(1));//will return bitmap   

public static Bitmap getBitmapFromView(View view) {
        Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view
                .getHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(returnedBitmap);
        Drawable bgDrawable = view.getBackground();
        if (bgDrawable != null)
            bgDrawable.draw(canvas);
        else
            // if we unable to get background drawable then we will set white color as wallpaper
            canvas.drawColor(Color.WHITE);
        view.draw(canvas);
        return returnedBitmap;
    } 
```

# javascript - 在表中使用 innerhtml 调用

> ID：16094884
> 
> 赞同：0
> 
> 时间：2013-04-18T23:38:54.103
> 
> 标签：javascript, html, innerhtml

我正在尝试使用 innerHTML 将动态图像放置在我页面上的表格的一行中。图像正在显示，但是由于某种原因它浮动到表格的顶部。有什么方法可以确保它保持在我所在的行中。以下是一些代码片段：

在 JavaScript 中：

document.getElementById("myResults").innerHTML = "";

在 html 中：

```
<td class="label"><label for="description">Description:</td>

                                        </tr>
                                        <tr>
                                        <td class="label">
                                            <div class ="<?php echo form_row_class("bio") ?>" >
                                            <div class="styled_textarea">
                                                <textarea type="text" id="bio" onfocus="this.value=''; setbg('#f0f7f8');" onblur="setbg('white')" name="bio" value="<?php echo h($_POST['bio']); ?>" rows="10"></textarea>
                                            </div>
                                            </div>
                                        </td>

                                        </tr>

                                        <tr>
                                        <td class="label"><label for="image"><div class="vspace2em"></div>Image:</label></td>
                                        </tr>
                                        <tr>
                                        <td class="label">

<a id="edit_image"></a>
<div class="row">
<div class="span10 offset1">
<div id="editpane">
<button class="btn btn-large btn-primary openbutton" type="button">Open an Image</button>
</div>
</div>
</div>

                                        </td>

                                        <td>

                                            <?php if($current_user2): ?>

                                                <?php if($current_user2['filepicker'] != ''): ?>

                                                    <img src="<?php echo $current_user2['filepicker'];?>">

                                                <?php endif; ?>

                                            <?php endif; ?>

                                        </td>
                                        </tr>

                                        <tr>

                                         <div id="myResults"></div>

                                        </tr> 
```

ETC...

由于某种原因，使用innerHTML 调用的图像会浮动到表格的顶部，而没有出现在我所在的位置。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:47:05.217

如果您正确格式化 HTML 表格，阅读起来会更清晰。从第一眼我看出你有

```
<tr>
    <div id="myResults"></div>
</tr> 
```

`myResults` is your relevant div. The problem is you dont have any `<td>` elements inside the `<tr>`. I think your code should look like this.

```
<tr>
    <td>
        <div id="myResults"></div>
    </td>
</tr> 
```

This should give you the desired result.

# c# - 会话变量保持为空

> ID：16094888
> 
> 赞同：1
> 
> 时间：2013-04-18T23:39:24.527
> 
> 标签：c#, asp.net-mvc

我有一个 MVC 项目，在其中我需要在视图之间传递一个变量。我正在尝试使用会话变量来执行此操作，但是当我尝试设置它时它保持为空。我究竟做错了什么？所有这些代码都在我的控制器中。

```
 public string searchQ
    {
        get { return (string)Session["searchQ"]; }
        set { Session["searchQ"] = ""; }
    }

    public ActionResult Index()
    {
        Session["InitialLoad"] = "Yes";
        return View();
    }

    [HttpPost]
    public ActionResult Index(string heatSearch)
    {
        ViewBag.SearchKey = heatSearch;
        searchQ= heatSearch;
        return View();
    }

    public ActionResult Index_Perm()
    {
        ViewBag.SearchKey = searchQ;

        return View();
    } 
```

目标是在视图之间传递该搜索键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:40:45.440

问题出在您的属性设置器中。

```
public string searchQ
{
    get { return (string)Session["searchQ"]; }
    set { Session["searchQ"] = ""; }
} 
```

这将始终为会话变量分配一个空字符串。

它应该如下所示：

```
public string searchQ
{
    get { return (string)Session["searchQ"]; }
    set { Session["searchQ"] = value; }
} 
```

# sql - 在 FROM 子句中列出表与 INNER JOIN 基本相同吗？

> ID：16094892
> 
> 赞同：0
> 
> 时间：2013-04-18T23:39:41.997
> 
> 标签：sql, oracle, join

假设我有这两个表：

```
User
===============
  UserID
  Username
  Job

UserInfo
===============
  UserID
  UserInfo1
  UserInfo2 
```

以下两个 sql 语句是否相同（在 Oracle 11g 上）？

```
SELECT * FROM User, UserInfo
WHERE UserInfo.UserID = User.UserID 
```

和

```
SELECT * FROM User
INNER JOIN UserInfo ON UserInfo.UserID = User.UserID 
```

请解释/详细说明 FROM [table list] 语法。我不明白那里发生了什么......如果有多个 UserInfos，它会返回所有这些吗？还是只匹配每个用户的第一个？如果用户没有任何用户信息，他们会从结果中省略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:45:16.203

这两个查询都在 INNER JOIN 中执行，这将返回两个表之间的所有匹配行。

如果您的`user`表包含单个`UserId`但`UserInfo`表包含 4 行相同的`userId`，那么您将返回 4 行。由于您有多个匹配的行，因此您返回*所有*匹配的行，而不是第一个。

如果要返回表`Users`中没有匹配行的`UserInfo`，则必须使用`LEFT JOIN`：

```
SELECT * 
FROM User
LEFT JOIN UserInfo 
  ON UserInfo.UserID = User.UserID 
```

LEFT JOIN 将返回`UserInfo`表中匹配的行以及不匹配的行。不匹配的行将返回一个`null`值`UserInfo`。

# javascript - jQuery Ajax 获取数据语法错误，无法识别的表达式：

> ID：16094897
> 
> 赞同：5
> 
> 时间：2013-04-18T23:40:22.523
> 
> 标签：javascript, jquery, ajax, http-get

使用最新的 jQuery (1.9.0)，我很困惑为什么这段代码不起作用：

```
$.testAjaxFilter = function() {

    var base = this;

    // get faq categories
    var currentFaqCategories = $('#category-list ul li a');

    // loop through each faq category link and bind a click event to each
    if ( typeof currentFaqCategories !== 'undefined') {

        $.each(currentFaqCategories, function(index, category) {

            $(category).click( function(e) {
                $(e.target).getFaqList();
                return false;
            });

        });

    }

    // GET faq list elements from category link
    $.fn.getFaqList = function() {

        $.get($(this[0]).attr('href'), function(data) {

            base.addFaqSectionToPage( $(data).find('section.faq-page #content-column') );

        });

    };

    // add new faq section to current page
    this.addFaqSectionToPage = function(faqSection) {

        // remove old faq section
        var currentFaqSection = $('section.faq-page #content-column');

        currentFaqSection.empty();
        currentFaqSection.append(faqSection);

    };

};

$.testAjaxFilter(); 
```

在查看控制台时，单击其中一个类别链接时，GET 会在其响应中检索整个页面，但随后会出现语法错误，无法识别的表达式：（列出检索到的页面中的所有 HTML）。所以，出现了问题`$.fn.getFaqList`，可能是使用`$(data)`?

有什么明显的我做错了吗？任何帮助将不胜感激。我对 AJAX 的东西不是很精通。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T13:55:33.887

感谢 Musa 指出这一点。我会奖励你作为正确答案......但我想我不能对评论这样做:(

我不得不更换：

```
$(data).find 
```

有了这个：

```
$($.parseHTML(data)).find 
```

我之前根据其他 Stackoverflow 答案尝试过类似的方法，但我没有正确执行它，所以我一直收到错误消息。对于需要更清楚地了解该问题的任何人，这些答案可能会有所帮助：

[Ajax响应上的JQuery无法识别的表达式](https://stackoverflow.com/questions/14667441/jquery-unrecognized-expression-on-ajax-response)

[jQuery + 客户端模板 =“语法错误，无法识别的表达式”](https://stackoverflow.com/questions/14347611/jquery-1-9-client-side-template-syntax-error-unrecognized-expression)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T01:00:47.250

语法错误可能在这里：

```
if ( typeof currentFaqCategories !== 'undefined') { 
```

应该是：

```
if ( typeof currentFaqCategories != 'undefined') { 
```

# visual-studio - 使用 32 位服务启动 64 位版本的 cscript

> ID：16094899
> 
> 赞同：0
> 
> 时间：2013-04-18T23:40:40.207
> 
> 标签：visual-studio, service, wow64

所以我想要完成的是总是开始。本机操作系统版本中的 cscript.exe。因此，当我的脚本运行时，我可以访问正确的系统文件，并且不会被重定向到 syswow64 regestry/files。

因此，根据 msdn 文档，我可以在 64 位系统上运行 32 位应用程序时使用 sysnative 来获取真正的 system32 文件夹。但是脚本无法找到 cscript.exe 文件。所以问题是我做错了什么？我主要是一个蟒蛇人，所以我可能会做出一个愚蠢的假设。

这被编译成一个 32 位的服务，所以它可以部署在任何 Windows 操作系统上（理论上）

如果重要，请运行 VisualStudio 2010

还是我完全从头到尾处理问题？

```
Public Class Service1

Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. This method should set things
    ' in motion so your service can do its work.
    'Prvents windows from redirecting us to the wow64 folder instead of system32.

    ' Don' run if settings file is gone
    If My.Computer.FileSystem.FileExists("C:\Settings.vbs") Then

        'If we are running in wow64(32bit windows files) mode switch to native 64 bit vbscript
        If My.Computer.FileSystem.DirectoryExists("%systemroot%\sys­native") Then
            Process.Start("%systemroot%\sys­native\cscript.exe", "C:\Main.vbs")
        Else
            Process.Start("%systemroot%\system32\cscript.exe", "C:\Main.vbs")

        End If

    End If
End Sub

Protected Overrides Sub OnStop()
    ' Add code here to perform any tear-down necessary to stop your service.
End Sub

End Class 
```

基本上问题是如何让 cscript 在 64 位模式而不是 32 位模式下运行，所以只有这一行。

Process.Start("%systemroot%\system32\cscript.exe", "C:\Main.vbs")

在 64 位系统上运行时，它会更改为 C:\Windows\SysWOW64。

但停留在 32 位系统上，它停留在 C:\Windows\system32。

我也试过这个：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365744%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365744%28v=vs.85%29.aspx)

但我无法弄清楚如何让它发挥作用。在 vb 应用程序中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:46:36.633

Answer over there

Option Infer On

Option Strict On

Imports System.IO Module Module1 Sub Main() Dim f As String = "" If IntPtr.Size = 4 Then f = Path.Combine(Environment.ExpandEnvironmentVariables("%windir%"), "sysnative") MsgBox("Running on X86") Else f = Environment.GetFolderPath(Environment.SpecialFolder.System) MsgBox("Running on X64") End If Dim wscript As String = Path.Combine(f, "wscript.exe") Dim psi = New ProcessStartInfo psi.FileName = wscript psi.Arguments = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "CheckPlatform.vbs") Dim p As New Process p.StartInfo = psi p.Start() End Sub End Module

[http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/48bc23b5-798f-4cea-ae33-060a0d66506b](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/48bc23b5-798f-4cea-ae33-060a0d66506b)

# spock - 使用 Spock 进行演示

> ID：16094906
> 
> 赞同：2
> 
> 时间：2013-04-18T23:41:33.580
> 
> 标签：spock

下周我将在 Spock 上做一个演示，作为演示的一部分，我需要做一个演示。我之前在一个项目中使用过 Spock，但大约一年左右没有使用它。

演示需要不仅仅是“hello world”类型的演示。我正在寻找可以使用 Spock 演示的很酷的东西的想法……有什么想法吗？

我现在唯一拥有的是 Spock 网站的“入门”部分中包含的基本示例。

```
def "length of Spock's and his friends' names"() {
    expect:
    name.size() == length

    where:
    name << ["Kirk", "Spock", "Scotty"]
    length << [4,5,6]
    /*
    name     | length
    "Spock"  | 5
    "Kirk"   | 4
    "Scotty" | 6
    */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:50:27.113

用于端到端测试和单元测试的相同工具。由于它基于 groovy，您可以利用 spock 提供您自己的简单的基于特定领域的 dsl 自动化框架。作为 CI 的一部分，我使用这个框架运行了大约 5000 个自动化测试。

用于验收测试

1.  使用权力断言关注解释失败断言的难易程度
2.  BDD with given-when-then
3.  数据驱动规范和展开
4.  商业友好的报告
5.  [通过与Geb](http://www.gebish.org/)结合实现强大的 UI 自动化

用于单元和集成测试

1.  基于交互的测试和模拟
2.  由于 groovy 好东西而简化了 xml 等测试

[从他们的文档](http://spockframework.org/spock/docs/)中获得更多想法

# hadoop - 如何在命令行上运行 PigUnit

> ID：16094907
> 
> 赞同：0
> 
> 时间：2013-04-18T23:41:37.823
> 
> 标签：hadoop, apache-pig

我不清楚如何在命令行上运行 PigUnit。我看过一些文档，其中提到了与 JUnit 的一些交互，但我对此没有太多经验。

那么，如果我在同一个文件夹中有 pigunit.jar、junit.jar 和我的 PigUnitTests.jar，我如何在命令行上运行 PigUnit？

使用 pig-0.10.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:24:18.233

您实际上想运行 jUnit，因此假设您的 jar 位于当前目录中，请使用：

```
java -cp ./pigunit.jar:./junit.jar:./PigUnitTests.jar org.junit.runner.JUnitCore <Your.Test.ClassName> 
```

# c# - 如何在 XAML/C# 中设计类似于 Stock Sports 应用程序中的 Appbar

> ID：16094912
> 
> 赞同：-2
> 
> 时间：2013-04-18T23:41:51.660
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

![股票体育应用](https://i.stack.imgur.com/cQxHP.png)

我正在尝试创建用于导航的应用栏，例如 Windows 8 附带的股票运动应用程序。有人可以指导我如何在 XAML/C# 中执行此操作吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:31:58.313

AppBar 控件只是一个容器。

您可以使用 AppBar 控件设置 Page.BottomAppBar 和 Page.TopAppBar 属性。

然后，您可以在此 AppBar 中放置（几乎）您想要的任何控件。考虑到您要实现的目标，我建议您创建一个自定义按钮模板。

现在，如果您想知道如何实现其中的特定部分，您应该准确提出您的问题。如果您不知道从哪里开始重现此 AppBar，我建议您在尝试执行此操作之前找到另一个练习。

# java - Java 线程执行然后被多次中断

> ID：16094922
> 
> 赞同：0
> 
> 时间：2013-04-18T23:43:18.260
> 
> 标签：java, multithreading

我有一个奇怪的问题，我有一个线程用于侦听套接字上的传入消息。线程是全局声明的，但在方法listen() 中实例化。这允许我从另一种方法 stopListen() 中断它，该方法第一次运行良好，但是当第二次调用 listen() 和 stopListen() 时，它似乎没有被中断。注释为“做一些事情”的代码在第二次等待传入消息后仍会执行。下面是代码的精简版。

```
public class Con {
    private Thread listen;

    public void listen() {
        listen = new Thread(new Runnable() {
            @Override
            public void run() {
                while (!Thread.interrupted()) {
                    //Wait for an incoming message
                    if (!Thread.interrupted()){
                        //Do some stuff
                    }
                }
            }
        });
        listen.start();
    }

    public void stopListen() {
        listen.interrupt();
    }
} 
```

我知道拥有一个变量和一个称为同一事物的方法有点奇怪。这应该工作还是我不能多次使用全局变量来中断线程？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:59:54.873

我看到的主要问题是[`interrupted()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupted%28%29)它将重置中断标志（请参阅链接的文档），这意味着下一次调用`interrupted()`将返回 false ，除非它再次被中断。相反，使用`isInterrupted()`which 不会清除标志！

此外，正如 chr 所说，如果您启动多个线程（`listen()`多次调用），您将只能中断最新的线程。在这种情况下，创建一个`List`线程并将它们全部中断（或仅列表中的第一个并将其从列表中删除，或者您想要的任何功能）。

# bash - Bash 脚本无法读取整个文件

> ID：16094925
> 
> 赞同：0
> 
> 时间：2013-04-18T23:43:24.850
> 
> 标签：bash, while-loop

我有一个用于备份一组文件夹/文件的 bash 脚本。该脚本循环通过预先配置的文件来确定如何复制文件夹/文件。

我面临的问题是脚本在处理第一个“文件”条目（第二列值）后退出 while 循环。

这是脚本。

```
#!/bin/bash

sudo crontab -l > /home/ipaccess/crontab.txt

DATE=`date +%m-%d-%Y`

TARGETDIR="/exports/backup/Web-Server/$DATE/"
BACKUPLIST="/home/ipaccess/backup/backuplist"
ssh 172.29.32.246 mkdir -p $TARGETDIR
scp -r /home/ipaccess/crontab.txt 172.29.32.246:$TARGETDIR

cat $BACKUPLIST

while read dir type args
do
   echo "Processing [$dir $type $args]"
   echo "Directory: $dir"
   echo "Element type: $type"

   if [ $type = "folder" ] ; then
        echo "Source: $args"
        echo "Transfering $args to 172.29.32.246:$TARGETDIR$dir"
        scp -r $args 172.29.32.246:$TARGETDIR
   fi
   if [ $type = "file" ] ; then
        # Create folders first
        echo "Creating $TARGETDIR$dir"
        ssh 172.29.32.246 mkdir -p $TARGETDIR$dir
        scp $args 172.29.32.246:$TARGETDIR$dir
   fi
   echo "Finished processing $dir $type $args"
   echo "Next entry.."
done<$BACKUPLIST
echo "Backup complete." 
```

这是预配置的文件（备份列表）

```
html/GS folder /var/www/html/GS/css
html/GS folder /var/www/html/GS/images
html/GS file /var/www/html/GS/*.html
html/GS file /var/www/html/GS/*.inc
html/GS file /var/www/html/GS/*.png
html/GS file /var/www/html/GS/*.mysql
html/GS file /var/www/html/GS/ac-db
html/HC file /var/www/html/HC/*.php
html/HC file /var/www/html/HC/*.html
html/HC file /var/www/html/HC/images
html/HC file /var/www/html/HC/PM/*.php
html/HC/PM file /var/www/html/HC/PM/jsapi
html/HourlyKpi file /var/www/html/HourlyKpi/*.php
html/KPI folder /var/www/html/KPI
html/KpiQuery folder /var/www/html/KpiQuery
html/wordpress/ folder /var/www/html/wordpress
usr/local/apache2/conf file /usr/local/apache2/conf/httpd.conf
cgi-bin folder /var/www/cgi-bin
html/GS file /var/www/html/GS/*.php 
```

这是脚本的输出

```
Processing [html/GS file /var/www/html/GS/*.html]
+ echo 'Directory: html/GS'
Directory: html/GS
+ echo 'Element type: file'
Element type: file
+ '[' file = folder ']'
+ '[' file = file ']'
+ echo 'Creating /exports/backup/Web-Server/04-18-2013/html/GS'
Creating /exports/backup/Web-Server/04-18-2013/html/GS
+ ssh 172.29.32.246 mkdir -p /exports/backup/Web-Server/04-18-2013/html/GS
+ scp /var/www/html/GS/gs.html /var/www/html/GS/login_header.html /var/www/html/GS/nologin_header.html /var/www/html/GS/overlaynal.html /var/www/html/GS/tab-test.html 172.29.32.246:/exports/backup/Web-Server/04-18-2013/html/GS
gs.html                                                                                            100% 3204     3.1KB/s   00:0
login_header.html                                                                                  100%  418     0.4KB/s   00:0
nologin_header.html                                                                                100%  464     0.5KB/s   00:0
overlay-external.html                                                                              100% 2308     2.3KB/s   00:0
tab-test.html                                                                                      100% 1573     1.5KB/s   00:0
+ echo 'Finished processing html/GS file /var/www/html/GS/*.html'
Finished processing html/GS file /var/www/html/GS/*.html
+ echo 'Next entry..'
Next entry..
+ read dir type args
+ echo 'Backup complete.'
Backup complete. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:16:56.663

循环中的调用`ssh`从标准输入读取，即使您给它的命令不使用标准输入。使用`-n`选项：

```
ssh -n 172.29.32.246 mkdir -p $TARGETDIR$dir 
```

将标准输入从`/dev/null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:37:59.540

循环内的某些东西（几乎可以肯定`ssh`）在第一个循环期间读取文件的其余部分。您可以重定向`ssh`的输入（with`< /dev/null`或其`-n`选项），但循环中的其他内容可能会从 stdin 读取（我*认为* `scp`从未尝试从 stdin 读取密码，但我可能是错的）。

在这种情况下，我喜欢做的是`read`通过标准输入以外的方式将文件的内容传递给命令。我倾向于为此使用文件描述符#3，因为它几乎没有用于其他任何东西，因此循环内的任何东西都不太可能会弄乱它。为此，只需使用`3<filename`将文件提供给 fd3，并`read -u3`从中读取：

```
while read -u3 dir type args
do
    echo "Processing [$dir $type $args]"
    ...
done 3<$BACKUPLIST 
```

# c# - 在同一个线程（无线程池）中同步运行任务并超时

> ID：16094926
> 
> 赞同：0
> 
> 时间：2013-04-18T23:43:25.417
> 
> 标签：c#, task-parallel-library, async-await, c#-5.0, continuations

我想使用 Task<> 类型，但不是使用 TPL，而是使用 .NET4.5/C#async。

事情是，我对我的案例有一些要求：

*   我希望任务同步运行（有些人推荐`RunSynchronously()`，其他人`Wait()`，还有其他人`ContinueWith(_, TaskContinuationOptions.ExecuteSynchronously)`，这里哪一个足够？）。
*   我希望任务在**同一个线程**中运行（所以，根本不使用线程池）。
*   我希望任务在某个**超时**过去后停止，并抛出异常。

对于后者，我认为我需要`Task.Delay()`，但我不确定如何将它与前两个要求结合起来。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:35:40.550

该答案基于@svick 的评论。

我将假设您希望该方法的所有“工作”与调用者在同一个线程上完成，但是您不介意线程池线程是否用于取消目的（I'我假设这是因为您提到`Task.Delay`哪个将`Timer`在计时器触发时使用哪个将使用线程池线程。

也就是说，不需要`Task`，因为当方法返回时，您会确定 Task 已完成。只是一个带有超时的常规方法就可以了：

```
static void DoSomethingOrThrowAfterTimeout(int millisecondsTimeout)
{
    CancellationTokenSource cts = new CancellationTokenSource(millisecondsTimeout);
    CancellationToken ct = cts.Token;
    // do some work
    ct.ThrowIfCancellationRequested();
    // do more work
    ct.ThrowIfCancellationRequested();
    // repeat until done.
} 
```

显然，通过这种使用协作取消的方法，该方法不会在超时时*完全*超时，因为它取决于您可以将方法中的工作拆分到多小。

如果您想避免使用另一个线程（`CancellationTokenSource`对于`ct.ThrowIfCancellationRequested()`上面用到了。

# mysql - Rails 3.2 - 无法连接到本地 MySQL

> ID：16094932
> 
> 赞同：1
> 
> 时间：2013-04-18T23:43:50.170
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, osx-lion

当我运行应用程序时，我会收到以下错误消息：

```
/Users/adam/.rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error) 
```

如果我尝试跑步

```
mysqladmin variables | grep socket 
```

结果是：

```
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)' 
```

我很确定我正在使用 Rails 3.2 和 MySQL，但现在没有。我在 Mac OS Lion 上运行，你能帮我看看我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:48:00.360

`ps aux | grep mysqld`在终端中输入并查看除了 grep 命令之外是否显示任何内容。如果没有，你的 mysql 服务器没有运行。否则尝试`mysqld start`在终端中输入，看看你是否无法启动你的 sql server。

编辑：对不起，在 OSX 上启动它的命令应该是`mysql.server start`

# php - WordPress 页面模板中的 PHP 代码不执行

> ID：16094933
> 
> 赞同：0
> 
> 时间：2013-04-18T23:43:58.510
> 
> 标签：php, wordpress

谁能告诉我为什么wordpress“页面模板”中的这段代码不执行？

'Echo' 似乎可以工作，但所有的 'include' 和 'print_r()' 和其他功能都没有。这个确切的代码适用于我的家庭服务器，但不适用于 wordpress 托管网站：

```
<?php

/**
 * Template Name: fbshares
 *
 * A custom page template for displaying all posts.
 *
 * The "Template Name:" bit above allows this to be selectable
 * from a dropdown menu on the edit page screen.
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */

get_header(); ?>

<div id="container">
<div id="content" role="main" class="fullpagejoel">

 <?php 
    echo "x";
    $url = "http://www.google.com";

    $social = array(
        'twitter' => 'http://cdn.api.twitter.com/1/urls/count.json?url=',
        'facebook' => 'https://graph.facebook.com/',
        'stumbleupon' => 'http://www.stumbleupon.com/services/1.01/badge.getinfo?url='
    );

    $json = file_get_contents($social['twitter'].$url, false);
    $a = json_decode($json, true);
    $r['twitter'] = $a['count'];

    print_r($a);
    echo count($a).' [OK]';

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:27:04.293

没有足够的代表发表评论，但您检查过来源吗？WordPress 无声无息地死去，但源代码中经常有一些东西。

简短的回答是，是的，您可以在模板中执行您想要的任何 php。我只是将它复制粘贴到我们测试服务器上的 WordPress 模板中，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:11:44.353

我刚刚发现了问题。在逐项调试之后，问题是WordPress不允许你运行`file_get_contents`，而是你必须`wp_remote_get`像这样使用：

```
GOOD: $json = wp_remote_get( $social['twitter'].$url );
BAD: $json = file_get_contents($social['twitter'].$url, false); 
```

我只是浪费了一整天的时间，所以我希望它可以帮助别人。

# css - float:right 在使用内部样式表而不是内联样式时在 chrome 和 safari 中的行为不同

> ID：16094935
> 
> 赞同：2
> 
> 时间：2013-04-18T23:44:20.433
> 
> 标签：css, cross-browser

我正在研究一个关于制作可配置下拉菜单的示例，从[这里](http://www.jankoatwarpspeed.com/wp-content/uploads/examples/reinventing-drop-down/#)。它仍在进行中，但我试图保持干净，并将我的内联样式声明移动到 html 文件头部的内部样式表中。

[这是一个小提琴](http://jsfiddle.net/3xbcF/)。

奇怪的是 html 的第 9 行，这里显示为第二个跨度行：

```
<dl id="sample" class="dropdown">
    <dt><a href="#" class="uiwidgetcontent uiborderall" style="width: 200px;">
        <span>Please select the country</span>
        <span class="ui-icon ui-icon-triangle-1-s" style="float:right;"></span>
    </a></dt> 
```

正如我所期望的那样，这在所有浏览器中都可以正常工作。但是在标题的样式中，我把同样的东西放在了`span:last-child`一行中。（我将整个样式部分留作上下文）：

```
 .uiborderall {
        border-radius: 18px;
    }
    .uiwidgetcontent {
        background-color: #abc;
    }
    .dropdown dd, .dropdown dt, .dropdown ul { margin: 0px; padding: 0px; }
    .dropdown dd { position: relative; }
    .dropdown a, .dropdown a:visited { text-decoration: none; outline: none; display: inline-block;}
    .dropdown dt a:hover, .dropdown dt a:focus { color: #5d4617; border: 1px solid #5d4617;}
    .dropdown dt a {display: inline-block; border: 1px solid #d4ca9a;}
    .dropdown dt a span:first-child {cursor: pointer; padding: 5px; display: inline-block; }
    .dropdown dt a span:last-child {cursor: pointer; float: right; margin-right: 10px; }
    .dropdown dd ul { display:none; left:0px;  position:absolute; top:1px; width:auto; min-width:170px; list-style:none; }
    .dropdown span.value { display:none;}
    .dropdown dd ul li a { padding:5px; display:block;}
    .dropdown dd ul li a:hover {} 
```

我应该能够从`<span>`元素中删除内联样式，它应该回退到内部样式表。在 Firefox 和 IE 中，这可以正常工作。但是，在 Chrome 和 Safari 中，当我这样做时，`float: right`来自内部样式表的似乎被忽略了。对于它的价值，至少在 chrome 中，`float:right`仍然设置在适当的跨度上。渲染器似乎只是忽略了它。

有没有办法让我`float:right`在四大浏览器的样式表中使用，或者我必须将它内联在元素中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:00:20.483

您不需要将元素放在`float`您希望它浮动的内容之前吗？

我颠倒了你`:first-child`和`:last-child`css 样式，颠倒了你的跨度的顺序，并删除了内联样式，它可以工作：http: [//jsfiddle.net/3xbcF/1/](http://jsfiddle.net/3xbcF/1/)

```
<dl id="sample" class="dropdown"> <dt><a href="#" class="uiwidgetcontent uiborderall" style="width: 200px;">
        <span class="ui-icon ui-icon-triangle-1-s"></span>
        <span>Please select the country</span>
    </a></dt> 
```

CSS：

```
.dropdown dt a span:last-child {
    cursor: pointer;
    padding: 5px;
    display: inline-block;
}
.dropdown dt a span:first-child {
    cursor: pointer;
    float: right;
    margin-right: 10px;
} 
```

# c - 强制转换为文件指针

> ID：16094936
> 
> 赞同：1
> 
> 时间：2013-04-18T23:44:23.857
> 
> 标签：c, fuse, file-pointer

我正在设置 FUSE 文件系统，我需要获取指向任何打开文件的文件指针，以便在它们被写入时对其进行加密。FUSE 系统使用一个特殊的结构。该结构的组件之一称为 fh，其类型为 uint64_t。当打开一个文件时，它会被捕获在一个 int 变量中，如以下代码所示：

```
/* File open operation */
int bb_open(const char *path, struct fuse_file_info *fi)
{
    int fd;   
    fd = open(path, fi->flags);
    fi->fh = fd;
    return fd;
} 
```

这个 fi 结构在 write 函数中可供我使用，我希望我可以使用它来创建一个文件指针，我可以将它传递给我的加密函数。这是我目前设置的 write 函数的代码：

```
/* Write data to an open file */
int bb_write(const char *path, const char *buf, size_t size, off_t offset,
         struct fuse_file_info *fi)
{
    char* password;
    FILE* fp;
    //malloc and instantiate password
    fp = (FILE*) fi->fh; //my lame attempt to get a file pointer
    return encrypt(<inpFilePtr>, <outFilePtr>, 1, password);
} 
```

最后，我的加密函数的签名是这样的：

```
extern int encrypt(FILE* in, FILE* out, int action, char* key_str); 
```

我想把那个 fi->fh 变量变成一个文件指针，这样我就可以把它用作我的输入文件指针参数。由于它最初是由“打开”操作创建的，因此似乎应该有一种方法可以做到这一点，但我无法使其工作。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:46:50.260

文件描述符和`FILE *`指针不是一回事。指针是指向 C 实现提供的不透明类型的`FILE *`指针 - 处理`FILE *`( `fopen`, `fread`, `fwrite`,`fclose`等) 的 API 是标准 C 的一部分。另一方面，文件描述符是使用 POSIX 系统调用操作的（`open`, `read`, `write`, `close`, 等）通常用于实现 C 级抽象。

幸运的是，有一些功能可以让您从另一个中获取一个。在您的情况下，您将希望使用从文件描述符[`fdopen(3)`](http://www.manpagez.com/man/3/fdopen/)中获取 a 。`FILE *`如果你想走另一条路，你会想研究[`fileno(3)`](http://www.manpagez.com/man/3/fileno/).

# asp.net-mvc - 如何在项目和版本控制中以 DRY 和自动化的方式指示构建版本？

> ID：16094937
> 
> 赞同：0
> 
> 时间：2013-04-18T23:44:24.363
> 
> 标签：asp.net-mvc, git, version-control

我想为我的构建器指定一个版本，即版本：101，它既在我的项目中，也在我的版本控制 (GIT) 的注释中。

这是为了确保如果我需要更改生产中部署的代码，我可以从项目中找到该代码的版本号，并将其与 GIT 修订版相匹配，然后将其签出以进行修改并重新部署。

我正在使用 ASP.NET MVC 。有谁知道这样做的好方法吗？我想要它 DRY IE 我在代码中标记版本号，然后 GIT 将其拾取或其他东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:38:46.693

如果我正确理解了您的问题，您希望您的二进制文件在某处具有版本号。我假设您正在使用带注释的标签进行版本控制。对于一个 C++ 项目，我做了这样的事情：

创建一个运行命令的预构建脚本[`git describe`](https://www.kernel.org/pub/software/scm/git/docs/git-describe.html)（如果您也将标签用于其他目的，则附加`--match "v[0-9]*"`）并吐出一个您可以在项目中使用的文件。对于我的项目，这是“gitversion.h”，它具有以下内容：

```
#define VERSION "v1.2.3-5-g472ac4f" 
```

该文件应该在您的`.gitignore`文件中，您不希望它最终出现在存储库中。

然后像往常一样在您的构建中使用该文件。

# java - build-impl.xml:913 执行失败，错误代码为 1 J2ME

> ID：16094938
> 
> 赞同：0
> 
> 时间：2013-04-18T23:44:26.887
> 
> 标签：java, java-me

我有 J2ME 问题我使用 x32 java，当我运行它时出现错误

Root/NetBeansProjects\mApp2\nbproject\build-impl.xml:913：执行失败，错误代码为 1。

```
 <nb-run jadfile="${dist.dir}/${dist.jad}" jarfile="${dist.dir}/${dist.jar}" jadurl="${dist.jad.url}" device="${platform.device}" platformhome="${platform.home}" platformtype="${platform.type}" execmethod="${run.method}" securitydomain="${evaluated.run.security.domain}" commandline="${platform.runcommandline}" classpath="${platform.bootclasspath}:${dist.dir}/${dist.jar}" cmdoptions="${run.cmd.options}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T09:54:59.617

我有 Windows 7 - 64 位，我遇到了这个问题“执行失败，错误代码 1”。
它存在的原因如下

1.  模拟器未配置
2.  未安装 SDK
3.  （或者可能是我不知道的其他原因）

所以我刚刚安装了 Java ME SDK 3.4（[在此处下载](http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html)）- 32 位和插件全部可用，我很高兴。

# php - 基于两个表中的变量是否匹配的 switch 语句

> ID：16094939
> 
> 赞同：0
> 
> 时间：2013-04-18T23:44:32.433
> 
> 标签：php, mysql

所以我有一个 switch 语句，我想根据一个表中的 id 是否在另一个表中具有匹配的外键来显示一种或另一种形式。

到目前为止，我尝试过的是将一个 while 语句嵌套到另一个不起作用的语句中。

```
$subresult = mysqli_query($con,"SELECT * FROM tags GROUP BY tag");
$subresult2 = mysqli_query($con,"SELECT * FROM tag_subscribe WHERE uid = $uid");

while ($row = mysqli_fetch_array($subresult)) {
    $tid = $row['tid'];

    while ($row2 = mysqli_fetch_array($subresult2)) {
        $tid2 = $row2['tid'];
    }
    if ($tid2 == $tid) {
        $subbedup = 'yes';
    } else {
        $subbedup = 'no';
    }

    switch ($subbedup) {
    case ('yes'):
        echo "alternate html form goes here because $tid2 == $tid";
        break;
    case ('no'):
        echo "html form goes here";
        break;
    }
} 
```

所以当这段代码运行时，它只返回开关“no”，除了它会返回一个开关“yes”，它恰好是包含外键的第二个表的最后一条记录。当我考虑它时，这是有道理的，因为它会一直运行这个循环，直到它用完表中的记录。因此，我花了大约 6 分钟的时间到达这一点，并且在过去的 6 个小时里，我一直在试图让它正常工作，但没有任何运气。

所以再一次，SO的好人，救救我！谢谢，麻烦您了 ：）

所以我的问题是：这将如何正确完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T00:16:38.003

我不太确定你的数据库结构，所以我会即兴发挥。

给定这些示例表和列：

```
tags
id name

tag_subscriptions
user_id tag_id 
```

下面的查询将遍历所有标签。每个标签都包含一个`subscribed`设置为“是”或“否”的列，具体取决于当前用户是否订阅了该特定标签。

```
$sql="SELECT t.`id`, t.`name`, IF (ISNULL(ts.`tag_id`),'no','yes') AS `subscribed`
  FROM `tags` t
  LEFT JOIN `tag_subscriptions` ts ON (ts.`user_id`=$uid AND ts.`tag_id`=t.`id`)
  WHERE 1;" 
```

然后遍历所有标签：

```
$q=mysql_query($sql) or die(mysql_error());

while ($row=mysql_fetch_assoc($q)) {
    switch ($row['subscribed']) {
      case 'yes'
        // user is subscribed to this tag
        break;
      default:
        // user is not subscribed to this tag
    }
} 
```

我认为（希望）这更接近你正在寻找的东西。

[http://sqlfiddle.com/#!2/58684/1/0](http://sqlfiddle.com/#!2/58684/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T00:28:07.137

很抱歉，我所知道的那样使用 PDO，您可以肯定地将这个想法转换为 MYSQLi。

```
$db = new PDO($hostname,$username,$password);

$arraySubTags = array();

$query = "SELECT tagID FROM tag_subscribe WHERE uid = :uid";
$statement = $db->prepare($query);
$statement->bindValue(':uid', $uid);
$statement->execute();
$subscribedTags = $statement->fetchAll(PDO::FETCH_ASSOC); //or loop with a while using fetch()
$statement->closeCursor();

foreach($subscribedTags as $sTag)
{
    array_push($arraySubTags,$sTag);
}

$query = "SELECT * FROM tags GROUP BY tag";
$statement = $db->prepare($query);
$statement->execute();
$allTags = $statement->fetchAll(PDO::FETCH_ASSOC); //or loop with a while using fetch()
$statement->closeCursor();

foreach($allTags as $tag)
{
    if(in_array($tag['tagID'], $arraySubTags))
    {
        echo "person is subscribed";
    }else{ echo "person not subscribed";}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:04:01.437

此代码仅检查检查的最后一个标签是否已订阅 - 要检查每个您需要将 switch 语句移动到外部 while 循环中的标签，位于为当前标签设置 $subbedup 变量的 if..else 位之后。

或者，如果您出于某种原因需要将开关分开，您可以使 $subbedup 成为一个数组，由标签 id 索引。

# javascript - AngularJS 控制器的生命周期是什么？

> ID：16094940
> 
> 赞同：203
> 
> 时间：2013-04-18T23:44:33.500
> 
> 标签：javascript, angularjs

有人可以澄清一下AngularJS控制器的生命周期是什么吗？

*   控制器是单例，还是按需创建/销毁？
*   如果是后者，是什么触发了控制器的创建/销毁？

考虑下面的例子：

```
var demoApp = angular.module('demo')
  .config(function($routeProvider, $locationProvider) {
    $routeProvider
      .when('/home', {templateUrl: '/home.html', controller: 'HomeCtrl'})
      .when('/users',{templateUrl: '/users.html', controller: 'UsersCtrl'})
      .when('/users/:userId', {templateUrl: '/userEditor.html', controller: 'UserEditorCtrl'});
  });

demoApp.controller('UserEditorCtrl', function($scope, $routeParams, UserResource) {
  $scope.user = UserResource.get({id: $routeParams.userId});
}); 
```

例如：

在上面的示例中，当我导航到 时`/users/1`，加载了用户 1，并设置为`$scope`.

然后，当我导航到 时`/users/2`，会加载用户 2。是`UserEditorCtrl`重复使用同一个实例，还是创建了一个新实例？

*   如果是新实例，是什么触发了第一个实例的销毁？
*   如果它被重复使用，它是如何工作的？（即，加载数据的方法似乎在创建控制器时运行）

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2013-04-19T03:10:54.850

好吧，实际上问题是`ngView`控制器的生命周期是什么。

控制器不是单例。任何人都可以创建一个新的控制器并且它们永远不会被自动销毁。事实是，它通常绑定到其底层范围的生命周期。每当其作用域被销毁时，控制器不会自动销毁。然而，在破坏了一个底层作用域之后，它的控制器就没有用了（至少，按照设计，它应该是）。

回答您的具体问题，每次导航发生时，`ngView`指令（以及`ngController`指令）总是会[创建一个新控制器和一个新范围。](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngView.js#L201-L206)最后[一个作用域也将被销毁](https://github.com/angular/angular.js/blob/65f5e856a161e7c91b9ebde1360242dc704d0510/src/ngRoute/directive/ngView.js#L179)。

生命周期“事件”非常简单。您的**“创建事件”**是控制器本身的构造。只需运行您的代码。要知道它何时变得无用（**“破坏事件”**），请听范围`$destroy`事件：

```
$scope.$on('$destroy', function iVeBeenDismissed() {
  // say goodbye to your controller here
  // release resources, cancel request...
}) 
```

具体来说`ngView`，您可以通过范围事件知道内容何时加载`$viewContentLoaded`：

```
$scope.$on('$viewContentLoaded', function readyToTrick() {
  // say hello to your new content here
  // BUT NEVER TOUCHES THE DOM FROM A CONTROLLER
}); 
```

[这是一个带有概念证明的 Plunker](http://plnkr.co/edit/ZddQ5W?p=preview)（打开你的控制台窗口）。

# entity-framework-4 - EF Code First 和 Linq to Entities，如何一次性填充嵌套对象？

> ID：16094941
> 
> 赞同：0
> 
> 时间：2013-04-18T23:44:41.423
> 
> 标签：entity-framework-4, code-first

我知道那里有类似的问题，这个问题几乎相同[如何创建和填充嵌套的 ViewModel，](https://stackoverflow.com/questions/4066467/how-to-create-and-populate-a-nested-viewmodel-well)但它不能解决我的问题。

我使用 EF Code First 和 LINQ to Entities。这些是我的一些实体

```
 public class Application
{
    public int ApplicationID { get; set; }
    public int ApplicationTypeID { get; set; }
    public int MembershipTypeID { get; set; }
    public string MailTo { get; set; }
    public DateTime ApplicationDate { get; set; }
    public int PersonID { get; set; }

    .......

    public virtual Person Person { get; set; }

    .......

    public virtual PaymentType PaymentType { get; set; }
}  

    public class Person
{
    public int PersonID { get; set; }
    public int? OrganisationID { get; set; }
    public int? HomeAddressID { get; set; }
    public int? WorkAddressID { get; set; }
    public string Title { get; set; }
    public string Initials { get; set; }
    public string Forename { get; set; }
    public string Surname { get; set; }
    public string JobTitle { get; set; }
    public string Department { get; set; }
    public string Phone { get; set; }
    public string Fax { get; set; }
    public string Email { get; set; }
    public bool NoInhouseMail { get; set; }
    public bool NoThirdPartyMail { get; set; }
    public DateTime Created { get; set; }
    public DateTime? Updated { get; set; }

    public virtual Address HomeAddress { get; set; }
    public virtual Address WorkAddress { get; set; }
    public virtual Organisation Organisation { get; set; }

    public virtual ICollection<PersonAttribute> PersonAttributes { get; set; }
    public virtual ICollection<Email> Emails { get; set; }
}

{
public class Address
{
    public int AddressID { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Town { get; set; }
    public string Region { get; set; }
    public string Postcode { get; set; }
    public string CountryCode { get; set; }
    public DateTime Created { get; set; }
    public DateTime? Updated { get; set; }

    public virtual Country Country { get; set; }
} 
```

这就是它们的映射方式

```
public ApplicationEntityTypeConfiguration()
    {
        //Mapping
        this.HasKey(ap => ap.ApplicationID);
        this.Property(ap => ap.ApplicationID)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(ap => ap.WorldPayID)
            .HasColumnType("bigint");

        this.Property(ap => ap.Processed)
            .HasColumnType("smalldatetime");

        this.Property(ap => ap.Exported)
            .HasColumnType("smalldatetime");

        //Relationships
        this.HasRequired(ap => ap.MembershipType)
            .WithMany()
            .HasForeignKey(ap => ap.MembershipTypeID);

        this.HasRequired(ap => ap.ApplicationType)
            .WithMany()
            .HasForeignKey(ap => ap.ApplicationTypeID);

        this.HasOptional(ap => ap.WorldPayStatus)
            .WithMany()
            .HasForeignKey(ap => ap.WorldPayStatusCode);

        this.HasRequired(ap => ap.PaymentType)
            .WithMany()
            .HasForeignKey(ap => ap.PaymentTypeID);

        this.HasRequired(ap => ap.Person)
            .WithMany()
            .HasForeignKey(ap => ap.PersonID);

        this.HasRequired(ap => ap.InvoiceAddress)
            .WithMany()
            .HasForeignKey(ap => ap.InvoiceAddressID);
    }
}

public class PersonEntityTypeConfiguration : EntityTypeConfiguration<Person>
{
    public PersonEntityTypeConfiguration()
    {
        this.HasKey(p => p.PersonID);
        this.Property(p => p.PersonID)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(p => p.Created)
            .HasColumnType("smalldatetime");

        this.Property(p => p.Updated)
            .HasColumnType("smalldatetime");

        //Relationships
        this.HasRequired(p => p.Organisation)
            .WithMany()
            .HasForeignKey(p => p.OrganisationID);

        this.HasRequired(p => p.HomeAddress)
            .WithMany()
            .HasForeignKey(p => p.HomeAddressID);

        this.HasRequired(p => p.WorkAddress)
            .WithMany()
            .HasForeignKey(p => p.WorkAddressID);
    }
}

public class AddressEntityTypeConfiguration : EntityTypeConfiguration<Address>
{

    public AddressEntityTypeConfiguration()
    {
        this.HasKey(a => a.AddressID);
        this.Property(a => a.AddressID)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(a => a.Created)
            .HasColumnType("smalldatetime");

        this.Property(a => a.Updated)
            .HasColumnType("smalldatetime");

        //Relationships))))
        this.HasRequired(a => a.Country)
            .WithMany()
            .HasForeignKey(a => a.CountryCode)
            .WillCascadeOnDelete(false);

    }

} 
```

这是我要填充的类的结构

```
public class OrganisationEmailMessageData
{
    public string ApplicationType { get; set; }
    public int ApplicationId { get; set; }
    public string PaymentType { get; set; }
    public string MembershipType { get; set; }
    public double Price { get; set; }
    public string FullName { get; set; }
    public string JobTitle { get; set; }
    public string Department { get; set; }
    public string Organisation { get; set; }
    public AddressEmailData HomeAddress { get; set; }
    public AddressEmailData WorkAddress { get; set; }
    public AddressEmailData InvoiceAddress { get; set; }
    public string PublicArea { get; set; }
    public string[] AreasOfInterest { get; set; }
}

public class AddressEmailData
{
    public bool Selected { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Address3 { get; set; }
    public string Address4 { get; set; }
    public string Town { get; set; }
    public string Region { get; set; }
    public string PostalCode { get; set; }
    public string Country { get; set; }
} 
```

这是我试图一次性填充 OrganisationEmailMessageData 类型的对象的方式，

```
 using (var db = _databaseFactory.GetDatabase())
        {
            var messageData = (from a in db.Applications
                           where a.ApplicationID == applicationId
                           select new OrganisationEmailMessageData
                                      {
                                        ApplicationType = a.ApplicationType.EmailMessage,
                                        ApplicationId = a.ApplicationID,
                                        PaymentType = a.PaymentType.Type,
                                        MembershipType = a.MembershipType.Type,
                                        Price = a.MembershipType.Price,
                                        FullName = a.Person.Title + " " + a.Person.Forename + " " + a.Person.Surname,
                                        JobTitle = a.Person.JobTitle,
                                        Department = a.Person.Department ?? string.Empty,
                                        Organisation = a.Person.Organisation != null
                                                            ? a.Person.Organisation.Name
                                                            : string.Empty,
                                        HomeAddress = a.Person.HomeAddressID.HasValue
                                                        ? ( from add in db.Addresses
                                                            where add.AddressID == a.Person.HomeAddressID.Value
                                                            select new AddressEmailData
                                                                        {
                                                                            Address1 = add.Address1,
                                                                            Address2 = add.Address2,
                                                                            Address3 = add.Address3,
                                                                            Address4 = add.Address4,
                                                                            Region = add.Region,
                                                                            Town = add.Town,
                                                                            PostalCode = add.Postcode,
                                                                            Country = add.Country.Name
                                                                        }).Single()
                                                        : null,
                                        WorkAddress = a.Person.WorkAddressID.HasValue
                                                        ? (from add in db.Addresses
                                                            where add.AddressID == a.Person.WorkAddressID.Value
                                                            select new AddressEmailData
                                                                        {
                                                                            Address1 = add.Address1,
                                                                            Address2 = add.Address2,
                                                                            Address3 = add.Address3,
                                                                            Address4 = add.Address4,
                                                                            Region = add.Region,
                                                                            Town = add.Town,
                                                                            PostalCode = add.Postcode,
                                                                            Country = add.Country.Name
                                                                        }).Single()
                                                        : null,
                                        InvoiceAddress = (from add in db.Addresses
                                                        where add.AddressID == a.InvoiceAddressID
                                                        select new AddressEmailData
                                                                    {
                                                                        Address1 = add.Address1,
                                                                        Address2 = add.Address2,
                                                                        Address3 = add.Address3,
                                                                        Address4 = add.Address4,
                                                                        Region = add.Region,
                                                                        Town = add.Town,
                                                                        PostalCode = add.Postcode,
                                                                        Country = add.Country.Name
                                                                    }).Single(),

                                        PublicArea = a.Person.PersonAttributes.Select(att => att.Attribute.Parent.Value).FirstOrDefault(),
                                        AreasOfInterest = a.Person.PersonAttributes.Select(att => att.Attribute.Value).ToArray()
                                      }
                         ).SingleOrDefault(); 
```

当我使用 LINQ to SQL 时，我之前在其他应用程序中这样做过，但是当我运行应用程序时使用 LINQ to Entities 我收到此错误

```
Unable to create a constant value of type 'Namespace.Model.Entities.Address'. Only primitive types ('such as Int32, String, and Guid') are supported in this context. 
```

模型有什么问题吗？因为这是在抱怨地址实体。[我在如何创建和填充嵌套 ViewModel](https://stackoverflow.com/questions/4066467/how-to-create-and-populate-a-nested-viewmodel-well)
的顶部发布的问题的解决方案是删除嵌套集合的 ToList() 方法调用，但这不适用于 Single() 方法调用。 任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:40:45.330

问题在于您在同一个 LINQ 查询中将 LINQ to Entities 与 LINQ to 对象混合在一起。我看到的最简单的解决方法是，您首先使用一个 LINQ 查询从数据库中获取结果，然后将结果投影到第二个 LINQ 查询中的所需对象中。

```
//LINQ TO Entities - DbQuery
var dbResults = (from a in db.Applications
                       where a.ApplicationID == applicationId
             select a).ToList();

//LINQ To Objects-- project results from Db into required object
var messageData = (from a in dbResults 
                select new OrganisationEmailMessageData
                                  {
                                    ApplicationType = a.ApplicationType.EmailMessage,
                                    ApplicationId = a.ApplicationID,
                                    PaymentType = a.PaymentType.Type,
                                    MembershipType = a.MembershipType.Type,
                                    Price = a.MembershipType.Price,
                                    FullName = a.Person.Title + " " + a.Person.Forename + " " + a.Person.Surname,
                                    JobTitle = a.Person.JobTitle,
                                    Department = a.Person.Department ?? string.Empty,
                                    Organisation = a.Person.Organisation != null
                                                        ? a.Person.Organisation.Name
                                                        : string.Empty,
                                    HomeAddress = a.Person.HomeAddressID.HasValue
                                                    ? ( from add in db.Addresses
                                                        where add.AddressID == a.Person.HomeAddressID.Value
                                                        select new AddressEmailData
                                                                    {
                                                                        Address1 = add.Address1,
                                                                        Address2 = add.Address2,
                                                                        Address3 = add.Address3,
                                                                        Address4 = add.Address4,
                                                                        Region = add.Region,
                                                                        Town = add.Town,
                                                                        PostalCode = add.Postcode,
                                                                        Country = add.Country.Name
                                                                    }).Single()
                                                    : null,
                                    WorkAddress = a.Person.WorkAddressID.HasValue
                                                    ? (from add in db.Addresses
                                                        where add.AddressID == a.Person.WorkAddressID.Value
                                                        select new AddressEmailData
                                                                    {
                                                                        Address1 = add.Address1,
                                                                        Address2 = add.Address2,
                                                                        Address3 = add.Address3,
                                                                        Address4 = add.Address4,
                                                                        Region = add.Region,
                                                                        Town = add.Town,
                                                                        PostalCode = add.Postcode,
                                                                        Country = add.Country.Name
                                                                    }).Single()
                                                    : null,
                                    InvoiceAddress = (from add in db.Addresses
                                                    where add.AddressID == a.InvoiceAddressID
                                                    select new AddressEmailData
                                                                {
                                                                    Address1 = add.Address1,
                                                                    Address2 = add.Address2,
                                                                    Address3 = add.Address3,
                                                                    Address4 = add.Address4,
                                                                    Region = add.Region,
                                                                    Town = add.Town,
                                                                    PostalCode = add.Postcode,
                                                                    Country = add.Country.Name
                                                                }).Single(),

                                    PublicArea = a.Person.PersonAttributes.Select(att => att.Attribute.Parent.Value).FirstOrDefault(),
                                    AreasOfInterest = a.Person.PersonAttributes.Select(att => att.Attribute.Value).ToArray()
                                  }
                     ).SingleOrDefault(); 
```

# mysql - CakePHP 中的身份验证和 ID

> ID：16094943
> 
> 赞同：0
> 
> 时间：2013-04-18T23:44:44.623
> 
> 标签：mysql, cakephp, authentication, web-applications, dependencies

我的朋友用 CakePHP 构建了一个大表单应用程序。它有一个名为“Player”的中心模型和一堆表格和模型，代表表单中不同类别的问题。她让我帮助实施 Auth，我们遇到了一些麻烦。根据 Cake 网站上的简单身份验证教程，我能够将用户和播放器链接在一起，但我无法在与播放器相关的表上实现身份验证。问题出现在应用程序的“添加”类部分。在我实现之前，添加函数看起来像这样：

```
public function name( $id =null) //Create the TEAM team name ,type
{

        $this->Team->create();  
        //$this->request->data['Team']['user_id'] = $this->Auth->user('id'); 
        if ($this->Team->save($this->request->data)) 
        {
            $idt=$this->Team->id;       
            $this->Session->setFlash(__('The Team' .$idt . ' has been saved'));

            $this->redirect(array('action' => 'position', $idt));
        } 
        else 
        {
            $this->Session->setFlash(__('The Team could not be saved. Please, try again.'));
        }   
        $players = $this->Team->Player->find('list' , array('conditions' => array('Player.id' => $id)));
        $this->set(compact('players'));

} 
```

提交后，将创建一个团队并设置 player_id。但是，当我取消注释读取用户 ID 的注释行时，玩家 ID 不会写入数据库，这会扰乱每个后续插入。所有表都有一个 user_id 和 player_id 列，尽管 user 没有 player_id 列。真的不知道这些有多相关，但这里是模型中的关联：

用户

```
public $hasOne = array(
    'Player' => array(
        'className' => 'Player',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )); 
```

播放器

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

public $hasMany = array(
    'ContIllnessDetail' => array(
        'className' => 'ContIllnessDetail',
        'foreignKey' => 'player_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'ContInjuryDetail' => array(
        'className' => 'ContInjuryDetail',
        'foreignKey' => 'player_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'NewIllnessDetail' => array(
        'className' => 'NewIllnessDetail',
        'foreignKey' => 'player_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'NewInjuryDetail' => array(
        'className' => 'NewInjuryDetail',
        'foreignKey' => 'player_id',
        'dependent' => false,
        'conditions' => '', 
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'PreviousInjuryDetail' => array(
        'className' => 'PreviousInjuryDetail',
        'foreignKey' => 'player_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

和团队

```
public $hasOne = array(

    'TrainingDetail' => array( 
        'className' => 'TrainingDetail',
        'foreignKey' => 'team_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

public $belongsTo = array(
    'Player' => array(
        'className' => 'Player',
        'foreignKey' => 'player_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

我还按照 Auth 教程将 isOwnedBy 方法复制到了每个模型中。有人对我如何解决这个问题有任何建议吗？

# requirejs - 如何在不更改 index.html 的情况下集成杏仁

> ID：16094946
> 
> 赞同：2
> 
> 时间：2013-04-18T23:45:08.863
> 
> 标签：requirejs, bundling-and-minification, r.js, almond

我有这个 build.js 文件：

```
({
    appDir: './',
    baseUrl: './js',
    dir: './dist',
    modules: [
        {
            name: 'main'
        }
    ]
}) 
```

在我的 index.html 中，我有：

```
<script data-main="js/main" src="js/lib/require/require.js"></script> 
```

当我使用以下方法优化应用程序时：

```
node r.js -o build.js 
```

所有 app 目录都复制到 dist 目录中。这种方法真的很方便，因为我不需要做任何更改，并且可以在优化后立即部署项目。

问题是我的代码使用 require.js 会导致开销。我怎样才能整合杏仁？我仍然将 app 目录复制到 dist 目录中，但我不想在每次优化调用后编辑我的 index.html。
有没有办法整合杏仁？

# ruby-on-rails - 如何在不下载的情况下使用其 URL 检查文件是否存在？

> ID：16094949
> 
> 赞同：22
> 
> 时间：2013-04-18T23:45:25.800
> 
> 标签：ruby-on-rails, ruby, http

我需要编写代码，通过检查文件的 URL 来确定文件是否存在。

目前我实现了这个：

```
error_code = 400;
response = Net::HTTP.get_response(URI(url));
return response.code.to_i < error_code; 
```

但是，它不能正常工作，因为每次下载文件时，如果我有大文件或很多文件，这真的很慢。

如何在不下载文件的情况下确定远程端是否存在文件？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-19T00:30:06.233

如果你想使用 Net::HTTP 那么你可以这样做：

```
uri = URI(url)

request = Net::HTTP.new uri.host
response= request.request_head uri.path
return response.code.to_i == 200 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T23:59:45.513

做这样的事情

```
require "rest-client"

begin
  exists = RestClient.head("http://google.com").code == 200
rescue RestClient::Exception => error
  exists = (error.http_code != 404) 
end 
```

然后“存在”是一个布尔值，取决于它是否存在。这只会获取标题信息，而不是文件，因此对于小文件或大文件应该是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T01:02:38.453

我会这样写：

```
require 'net/http'

ERROR_CODE = 400

response = Net::HTTP.start('www.example.net', 80) do |http|
  http.request_head('/index.html') 
end

puts response.code.to_i < ERROR_CODE 
```

哪个输出`true`，因为我得到`302`了`response.code`.

# matlab - 尝试访问 L1(1,4)；索引超出范围，因为 size(L1)=[0,0]？

> ID：16094950
> 
> 赞同：1
> 
> 时间：2013-04-18T23:45:31.053
> 
> 标签：matlab, file, parsing, gps

我正在运行这段代码并试图解析它，但它给了我这个错误：

尝试访问 L1(1,4)；索引超出范围，因为 size(L1)=[0,0]。

这是我用作源的文本文件的示例（tle 2009），您可以将其复制并粘贴为文本文件，然后运行下面的代码。当我绝望时，我会感谢你的帮助。太感谢了

```
1 32790U 08021H   09001.16229234  .00000278  00000-0  42282-4 0  2397
2 32790 097.9691 066.3073 0014889 210.0082 150.0281 14.81422378 36693
1 32790U 08021H   09002.17545217 -.00000097  00000-0 -54482-5 0  2400
2 32790 097.9693 067.3149 0015060 206.2003 153.8437 14.81421045 36843
1 32790U 08021H   09003.18861152 -.00000056  00000-0 -30988-6 0  2413
2 32790 097.9691 068.3223 0015301 202.5601 157.4939 14.81421032 36995
1 32790U 08021H   09004.20176971  .00000327  00000-0  48542-4 0  2428
2 32790 097.9692 069.3304 0015360 199.1526 160.9109 14.81422711 37140
1 32790U 08021H   09005.21492806  .00000366  00000-0  53567-4 0  2435
2 32790 097.9688 070.3376 0015282 196.0531 164.0195 14.81423660 37291
1 32790U 08021H   09006.43071783  .00000265  00000-0  40677-4 0  2444 
```

-

```
%%
clc;
clear all;
mu = 398600;             % Standard gravitational parameter for the earth
fname = 'tle 2009.txt';      % TLE file name 
% Open the TLE file and read TLE elements
fprintf('a[km]    e    inc[deg]    RAAN[deg]  w[deg]   M[deg]  T[min]  h_p[km]    h_a[km]\n\n ')
fid = fopen(fname, 'rb');
i = 1;
OE2=[];
while ~feof(fid)
L1 = fscanf(fid,'%d%6d%*c%5d%*c%f%f%f%5d%*c%*d%5d%*c%*d%d%4d',[1,9]);
L2 = fscanf(fid,'%d%6d%f%f%f%f%f%11f',[1,9]);

%epoch = L1(1,4)*24*3600;        % Epoch Date and Julian Date Fraction
Db    = L1(1,5);                % Ballistic Coefficient
inc(i)= L2(1,3);                % Inclination [deg]
RAAN(i) = L2(1,4);              % Right Ascension of the Ascending Node [deg]
e(i)  = L2(1,5)/1e7;            % Eccentricity 
w(i)  = L2(1,6);                % Argument of periapsis [deg]
M(i)  = L2(1,7);                % Mean anomaly [deg]
n     = L2(1,8);                % Mean motion [Revs per day]
% Orbital parametres
a(i) = (mu/(n*2*pi/(24*3600))^2)^(1/3);       % Semi-major axis [km]    
T(i) = 2*pi*sqrt(a(i)^3/mu)/60;               % Period in [min]
Re = 6371; 
h_p(i) = (1 - e(i))*a(i) - Re;                % Perigee Altitude [km]
h_a(i) = (1 + e(i))*a(i) - Re;                % Apogee Altitude [km]
% Orbital Elements  
OE = [a(i) e(i) inc(i) RAAN(i) w(i) M(i) T(i) h_p(i) h_a(i)];
OE2 = [OE2;a(i) e(i) inc(i) RAAN(i) w(i) M(i) T(i) h_p(i) h_a(i)];
fprintf('%4.2f  %7.7f   %4.4f  %4.4f   %4.4f  %4.4f  %4.2f  %4.2f  %4.2f \n', OE);
i = i+1;
end
%fclose(fid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:15:54.430

问题是您的文本文件中有奇数行。通过这个 while 循环，您正在阅读 2 行。因此，当您在最后一行时，L1 已填充，但 L2 未填充。

您必须更改循环以在偶数行处停止，或者在像这样处理之前创建一个条件

```
while ~feof(fid)
L1 = fscanf(fid,'%d%6d%*c%5d%*c%f%f%f%5d%*c%*d%5d%*c%*d%d%4d',[1,9]);
L2 = fscanf(fid,'%d%6d%f%f%f%f%f%11f',[1,9]);

if(L2)    
     %epoch = L1(1,4)*24*3600;        % Epoch Date and Julian Date Fraction
     Db    = L1(1,5);                % Ballistic Coefficient
     ...
end 
```

# ruby-on-rails-3 - Minitest 类定义？

> ID：16094952
> 
> 赞同：1
> 
> 时间：2013-04-18T23:45:52.117
> 
> 标签：ruby-on-rails-3, minitest

在 minitest_helper.rb 我看到 minitest 类定义为：

```
MiniTest::Rails::Spec 
```

或者

```
MiniTest::Spec 
```

这些定义有什么区别？我还注意到基本类的设置位置......例如

```
MiniTest::Spec::TYPES.last[1] = MiniTest::Rails::Spec 
```

这有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-08T18:45:25.943

`MiniTest::Rails::Spec`用于测试 Rails 站点，在 minitest 中使用类似 rspec 的 dsl。`MiniTest::Spec`只是像 minitest 这样的普通 rspec，没有额外的 rails 功能。

最后一行是向标准 MiniTest::Spec 添加 rails 匹配器。源中有一条评论解释它：[https ://github.com/seattlerb/minitest/blob/master/lib/minitest/spec.rb#L97](https://github.com/seattlerb/minitest/blob/master/lib/minitest/spec.rb#L97)

# c# - 如何显示 Servicestack api 站点的“封面页”/重定向到另一个网站

> ID：16094965
> 
> 赞同：2
> 
> 时间：2013-04-18T23:47:06.780
> 
> 标签：c#, .net, asp.net-mvc, servicestack

我们有一个使用 servicestack 构建的“webapi”站点，一切都很好

现在浏览该站点会打开 ~/metadata 页面

是否可以选择显示自定义存根页面 - 请访问 www.abc.com 的主站点

或者更好的是，将浏览器重定向到 www.abc.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:11:52.823

在**EndpointHostConfig**中，您可以设置 MetadataRedirectPath 和 DefaultRedirectPath。但是，查看源代码 MetadataRedirectPath 和 DefaultRedirectPath 都**需要一个相对 url**。

如果您需要更多控制或想要重定向到外部站点，那么您**可以拦截整个请求**。因此，在您的特定情况下，您可以执行以下操作：

在 AppHost 配置中

```
SetConfig(new EndpointHostConfig
{
    RawHttpHandlers =
    {
         httpReq => httpReq.PathInfo == "/metadata" ? 
            new RedirectHttpHandler { AbsoluteUrl = "http://www.abc.com" } 
            : null
     },
}); 
```

**编辑：更改代码以反映神话建议。**

# ios - 如何在通讯簿联系人上设置即时消息属性？

> ID：16094970
> 
> 赞同：0
> 
> 时间：2013-04-18T23:47:48.623
> 
> 标签：ios, ios6, ios6.1

我尝试使用以下代码来设置要添加到通讯簿的新联系人的 AIM 和 Skype 属性：

```
ABRecordRef record = ABPersonCreate();
CFErrorRef an_error = NULL;

ABMutableMultiValueRef multi_aim = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(multi_aim, @"ExampleNick", kABPersonInstantMessageServiceAIM, NULL);
ABRecordSetValue(record, kABPersonInstantMessageProperty, multi_aim, &an_error);

ABMutableMultiValueRef multi_skype = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(multi_skype, @"example.nick", kABPersonInstantMessageServiceSkype, NULL);
ABRecordSetValue(record, kABPersonInstantMessageProperty, multi_skype, &an_error);

if (an_error != NULL) {
    NSLog(@"Error while creating person");
}

CFErrorRef error = NULL;
ABAddressBookRef address_book = ABAddressBookCreateWithOptions(NULL, &error);
ABAddressBookRequestAccessWithCompletion(address_book, ^(bool granted, CFErrorRef error) {
    if (!granted) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Unable to access address book"
                                                       delegate:self
                                              cancelButtonTitle:nil
                                              otherButtonTitles:nil];
        [alert show];
    } else {
        BOOL is_added = ABAddressBookAddRecord(address_book, record, &error);

        if (is_added) {
            NSLog(@"Address book entry added");
        } else {
            NSLog(@"ERROR adding address book entry: %@", error);
        }

        error = NULL;

        BOOL is_saved = ABAddressBookSave(address_book, &error);

        if (is_saved) {
            NSLog(@"Saved address book");
        } else {
            NSLog(@"ERROR saving address book: %@", error);
        }
    }

    CFRelease(record);
    CFRelease(multi_aim);
    CFRelease(multi_skype);
    CFRelease(address_book);
}); 
```

（我还添加了名字和姓氏，但为了简洁起见，将其排除在示例之外）

当记录被添加时，除了 AIM 和 Skype 字段之外的所有内容都会被填充。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T12:57:07.243

Instant 是 kABMultiDictionaryPropertyType 类型的多值属性。将一个 Skype id 插入 ABRecordRef 的片段如下所示。您可以在一个 ABRecordRef 中插入多个瞬间。

```
 ABRecordRef record = ABPersonCreate();
    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
        (NSString*)kABPersonInstantMessageServiceSkype, (NSString*)kABPersonInstantMessageServiceKey,
        @"YourSkypeIDGoesHere", (NSString*)kABPersonInstantMessageUsernameKey, 
        nil
    ];
    CFStringRef label = NULL; // in this case 'IM' will be set. But you could use something like = CFSTR("Personal IM");
    CFErrorRef error = NULL;
    ABMutableMultiValueRef values =  ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
    BOOL didAdd = ABMultiValueAddValueAndLabel(values, (__bridge CFTypeRef)(dictionary), label, NULL);
    BOOL didSet = ABRecordSetValue(record, kABPersonInstantMessageProperty, values, &error);
    if (!didAdd || !didSet) {
        CFStringRef errorDescription = CFErrorCopyDescription(error);
        NSLog(@"%s error %@ while inserting multi dictionary property %@ into ABRecordRef", __FUNCTION__, dictionary, errorDescription);
        CFRelease(errorDescription);
    }
    CFRelease(values); 
```

# wordpress - 使用 Wordpress 元框插件为图像创建删除确认

> ID：16094976
> 
> 赞同：1
> 
> 时间：2013-04-18T23:48:28.393
> 
> 标签：wordpress, meta, meta-boxes

我正在为 Wordpress 使用 Meta Box 插件。我可以在 cms 中成功创建字段供用户上传图像。我想以两种方式扩展它：

首先，当用户从图片库中删除图片时，我想要一个删除确认

这是代码：

```
$meta_boxes[] = array(
    'id' => 'project_media',                  
    'title' => 'Project Media',    
    'pages' => array( 'project' ),       
    'context' => 'normal',                
    'priority' => 'high',                

    'fields' => array( 
     array(
      'name' => 'Media Gallery',
      'desc' => 'Images should be sized to 983px x 661px',
      'id' => $prefix . 'project_media_gallery',
      'type' => 'image'
    )
); 
```

这会在自定义帖子类型中创建上传功能，用户可以在其中将图像添加到幻灯片。问题是如果用户不小心单击了删除按钮，则无法确认它是否已被删除。我可以通过函数扩展插件并在单击此按钮时调用警报吗？不涉及编辑 WP 核心的东西？

其次，基本功能要求用户从本地机器上传图像。有没有办法为此利用媒体库？

甚至不知道如何开始解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T14:34:02.190

To answer the first question

> First, I would like a delete confirmation when users remove an image from the image gallery

You can do that by calling a custom script file from the functions.php.

```
function alert_delete() {
    if(is_admin()){
        wp_register_script( 'alert_delete', get_bloginfo('template_url'). '/js/alert_delete.js', array('jquery'));
        wp_enqueue_script('alert_delete');
    }   
} 
```

and create a file named alert_delete.js in the js directory of your theme.

**alert_delete.js:**

```
// admin delete check

jQuery(document).ready(function(){
    jQuery(".rwmb-delete-file").click(function() {
        if (!confirm("Are you sure? This process cannot be undone.")){
            return false;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T21:48:52.437

回答第二个问题...

> 其次，基本功能要求用户从本地机器上传图像。有没有办法为此利用媒体库？

首先获取最新版本的[Meta Box 插件](http://www.deluxeblogtips.com/meta-box/)。

然后改变

```
'type' => 'image' 
```

至

```
'type' => 'image_advanced' 
```

这将允许您从现有的媒体库或计算机中的新文件上传。

# memory-management - CUDA：线程可以创建所有数据的单独副本吗？

> ID：16094977
> 
> 赞同：0
> 
> 时间：2013-04-18T23:48:40.487
> 
> 标签：memory-management, cuda, thread-synchronization

我有一个非常基本的问题，在浏览文件后我无法理解。我在执行我的一个项目时遇到了这个问题，因为我得到的输出完全损坏了，我相信问题要么出在内存分配上，要么出在线程同步上。好的，问题是：每个线程都可以创建传递给内核函数的所有变量和指针的单独副本吗？或者它只是创建变量的副本，但我们传递该内存的指针在所有线程之间共享。例如

```
int main()
{
  const int DC4_SIZE = 3;
  const int DC4_BYTES = DC4_SIZE * sizeof(float);
  float * dDC4_in;
  float * dDC4_out;
  float hDC4_out[DC4_SIZE];
  float hDC4_out[DC4_SIZE];

  gpuErrchk(cudaMalloc((void**) &dDC4_in, DC4_BYTES));
  gpuErrchk(cudaMalloc((void**) &dDC4_out, DC4_BYTES));
  // dc4 initialization function on host which allocates some values to DC4[] array

  gpuErrchk(cudaMemcpy(dDC4_in, hDC4_in, DC4_BYTES, cudaMemcpyHostToDevice));
  mykernel<<<10,128>>>(VolDepth,dDC4_in);
  cudaMemcpy(hDC4_out, dDC4_out, DC4_BYTES, cudaMemcpyDeviceToHost);
}

__global__ void mykernel(float VolDepth,float * dDC4_in,float * dDC4_out)
{
    for(int index =0 to end)
      dDC4_out[index]=dDC4_in[index] * VolDepth;
} 
```

所以我将 dDC4_in 和 dDC4_out 指针传递给 GPU，其中 dDC4_in 用一些值初始化并计算 dDC4_out 并复制回主机，所以我的所有 1280 个线程都将具有单独的 dDC4_in/out 副本，或者它们都将在 GPU 上的相同副本上工作覆盖其他线程的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:15:10.177

全局内存由网格中的所有线程共享。您传递给内核的参数（您已分配`cudaMalloc`）在全局内存空间中。

线程确实有自己的内存（本地内存），但在您的示例中`dDC4_in`并由`dDC4_out`您的所有线程共享。

作为一般性的失败（取自[CUDA 最佳实践](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#device-memory-spaces)文档）：

![在此处输入图像描述](https://i.stack.imgur.com/XSc08.png)

在 DRAM 方面：本地内存（和寄存器）是每个线程的，共享内存是每个块的，全局、常量和纹理是每个网格的。

此外，可以在主机上读取和修改全局/常量/纹理内存，而本地和共享内存仅在内核运行期间存在。也就是说，如果您在本地或共享内存中有一些重要信息并且您的内核完成了，那么该内存将被回收并且您的信息会丢失。此外，这意味着从主机获取数据到内核的唯一方法是通过全局/常量/纹理内存。

无论如何，就您而言，建议如何修复代码有点困难，因为您根本没有考虑线程。不仅如此，在您发布的代码中，您只向内核传递了 2 个参数（它需要 3 个参数），因此您的结果有些不足也就不足为奇了。即使您的代码有效，您也会让每个线程从 0 循环到`end`并将其写入内存中的同一位置（这将被序列化，但您不知道哪个写入将是最后一个要通过的）。除了那个竞争条件，你让每个线程都做同样的计算；您的 1280 个线程中的每一个都将执行该 for 循环并执行相同的步骤。您必须决定线程到数据元素的映射，根据线程到元素的映射划分内核中的工作，并在此基础上执行计算。

例如，如果您有 1 个线程：1 个元素映射，

```
__global__ void mykernel(float VolDepth,float * dDC4_in,float * dDC4_out)
{
    int index = threadIdx.x + blockIdx.x*blockDim.x;
    dDC4_out[index]=dDC4_in[index] * VolDepth;
} 
```

当然，这也需要更改内核启动配置以拥有正确数量的线程，如果线程和元素不是精确的倍数，您将需要在内核中添加一些边界检查。

# php - AJAX 不能在本地主机上工作？

> ID：16094981
> 
> 赞同：-1
> 
> 时间：2013-04-18T23:49:57.677
> 
> 标签：php, javascript, ajax, xampp

我正在尝试使 AJAX 示例正常工作，但无法正常工作。我正在使用 xampp。代码似乎不起作用......顺便说一句，没有目录问题，我确定......我检查了一切......

费率.html

```
<html>

  <head>
    <script>
      function showUser(str) {
        if (str == "") {
          document.getElementById("txtHint").innerHTML = "";
          return;
        }
        if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
          xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == 4 & amp; & amp; xmlhttp.status == 200) {
            document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
          }
        }
        xmlhttp.open("GET", "getuser.php?q=" + str, true);
        xmlhttp.send();
      }
    </script>
  </head>

  <body id="top">
    <br />
    <div class="wrapper col3" style="background-image: url(); opacity: 0.7;">
      <?php include( "header.inc"); ?>
    </div>
    <br /><br /><br />
    <div class="wrapper col2">
      <?php include( "menu.inc"); ?>
    </div>
    <br /><br />
    <div class="wrapper col5">
       <h1>Rates</h1>

      <p>Please select an activity to view its rate at Casela. Rates available for both residents and non-residents.</p>
      <form>
        <select name="activity" onchange="showUser(this.value)">
          <option value="">Please select an actvity</option>
          <option value="1">Big Cats (Lions)</option>
          <option value="2">Big Cats (Tigers)</option>
        </select>
      </form>
      <div id="txtHint" style="padding: 20px;"></div>
    </div>
    <br /><br />
  </body>

</html> 
```

获取用户.php

```
<?php
$q = $_GET["q"];
$con = mysql_connect('localhost', 'root', 'password');
if (!$con) {
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("rates", $con);
$sql = "SELECT * FROM activities WHERE id = '" . $q . "'";
$result = mysql_query($sql);
echo "<table border='1'>
    <tr>
    <th>Activity</th>
    <th>Description</th>
    <th>Duration</th>
    <th>Restriction</th>
    <th>Resident</th>
    <th>Non-Resident</th>
    </tr>";
while ($row = mysql_fetch_array($result)) {
  echo "<tr>";
  echo "<td>" . $row['Activity'] . "</td>";
  echo "<td>" . $row['Decription'] . "</td>";
  echo "<td>" . $row['Duration'] . "</td>";
  echo "<td>" . $row['Restriction'] . "</td>";
  echo "<td>" . $row['Resident'] . "</td>";
  echo "<td>" . $row['NonResident'] . "</td>";
  echo "</tr>";
}
echo "</table>";
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T23:58:35.447

这一行：

```
if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) 
```

应该是这样的：

```
if (xmlhttp.readyState==4 && xmlhttp.status==200) 
```

# html - 覆盖 CSS 背景属性

> ID：16094983
> 
> 赞同：0
> 
> 时间：2013-04-18T23:50:01.137
> 
> 标签：html, css, background

我有一个容器，它通过为其分配一个类名来从全局 css 文件中继承一些设置。但是，当我尝试使用另一个类来更具体地设置背景时，没有任何变化。

我的 html 中有趣的部分：

```
 <html>
        <head>
            <link rel="stylesheet" type="text/css" href="/styles/global.css">
            <link rel="stylesheet" type="text/css" href="/styles/register.css">
        </head>
        <body class="class1 class2">
            <div>
                some content
            </div>
        </body>
    </html> 
```

以及用于全球的 CSS

```
 .class1 {
        /*Shadowing for 3D effect*/
        -moz-box-shadow:inset 0px 1px 2px 0px #caefab; /*pale green*/
        -webkit-box-shadow:inset 0px 1px 2px 0px #caefab; /*inner/outer, hz-offset, vert-offset, blur-rad, spread, color*/
        box-shadow:inset 0px 1px 2px 0px #caefab;
        /*Background gradient effect*/
        background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #46bf46), color-stop(1, #1d911d) ); /*dark green to light green*/
        background:-moz-linear-gradient( center top, #46bf46 5%, #1d911d 100% );
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#46bf46', endColorstr='#1d911d');
        /*Rounded corners*/
        -moz-border-radius:10px;
        -webkit-border-radius:10px;
        border-radius:10px;
        /*Border*/
        border:1px solid #46bf46;
        /*text settings*/
        color: white; /*like chalk*/
        text-decoration:none; /*this is default*/
        text-shadow:1px 1px 0px #777; /*hzoff vtoff blur color*//*gray makes letters pop out*/
        font-family:Verdana, sans-serif;
        font-size:20px;
        font-weight:bold;
    } 
```

最后是用于注册的 CSS

```
 .class2 {
        color: black;
        background-color: lightgray;
    } 
```

文本颜色完美覆盖，但我无法改变背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:55:43.340

CSS 上不存在文本颜色。是**颜色**。

关于背景，请尝试一起使用**背景**属性，而不仅仅是背景颜色。也许浏览器渐变会覆盖它。

# java - 使用 NetCDF Java 库读取 HDF5 数据集

> ID：16094988
> 
> 赞同：1
> 
> 时间：2013-04-18T23:50:50.777
> 
> 标签：java, dataset, hdf5, netcdf

我们在 HDF5 中获得了一些文件，其中包含*数据集*、表格数据，其中每一列都被命名并且可能是不同的数据类型（例如字符串类型的“作者”、无符号整数类型的“计数”等）我能找到的用于阅读 HDF5 的唯一纯 Java（即非 JNI）库是 NetCDF。

看来我可以使用 NetCDF 从 HDF5 数据集中读取单列数据`Variable`。但是有没有办法从数据集中读取整个数据表？NetCDF 的 HDF5 数据集是否仅仅是具有单维数组值的变量集合而不是表？

*编辑：让我进一步解释。*如果我在 HDFView 2.9 中打开一个 HDF5 文件，导航到“HDF5 复合数据集”项，然后选择“打开”，就会出现一个漂亮的小表格，其中“变量”显示为列标题，每一行都是由索引标记。例如，假设有一个整数 32 符号类型的“Foo”列和一个字符串类型的“Bar”列。

但是用于从这个“复合数据集”加载数据的 NetCDF API 似乎根本不像表格数据。我可以要求加载名为“Foo”的整个“变量”数组，并且“变量”似乎独立于“Bar”变量。这是否意味着“Foo”和“Bar”变量可以是不同长度的数组？

在表格中，我希望能够逐行访问事物。我可以说“给我一个包含第 5 行所有值的数组吗？” 好的，所以原始值和装箱等存在问题，但我可以要求返回整行的底层字节吗？我可以说“给我'Foo'列中第5行的值作为整数”吗？也许你说我真正想要请求的是“Foo”数组中的元素 5。所以我回到我原来的问题：**问题 1.**数据集的 NetCDF API 是否仅访问一组完全不相关的变量（可能具有单独的数组长度等），或者是否有一些 API 允许访问这个数据作为一个真实的表？

如果您仍然不了解表格视图和变量列表之间的区别，请考虑以下相关问题：**问题 2.**如何找到数据集表中的行数？我是否被迫迭代数据集中的所有变量并找到每个数组长度的最大值？

由于我正在查找变量的数组长度，这又带来了另一个问题：**问题 3。**如何在不读取整个数组的情况下找到数据集中变量的长度？如果我使用`netCDFFile.findVariable("/some/path/dataset.variable").getSize()`，这只是返回值`1`。直到我真正读取了整个数组（可能是很多兆字节！）`netCDFVariable.read().getSize()`，我才得到正确的长度！没有更有效的方法吗？

*答案：*答案原来是对[John Caron 答案](https://stackoverflow.com/a/16319887/421049)的详细阐述。由于某种原因，每个变量（列）都认为它是可变长度的，即使它的父结构（数据集/表）是固定长度的。要以更表格的方式处理一组变量，请获取对父级`Structure`（本身 a `Variable`）的引用，并询问其大小。该`Structure.getSize()`值将正确指示每个变量的长度——即使每个变量`Variable.getSize()`都会返回`1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T14:21:08.953

> 问题 1\. 用于数据集的 NetCDF API 是否仅访问一组完全不相关的变量（可能具有单独的数组长度等），还是有一些 API 允许将这些数据作为真实表访问？

NetCDF-Java 是一个低级库，其他应用程序在其上构建特定接口。HDFView 就是这样一个应用程序，尽管它不是基于 NetCDF-Java 构建的。你可以看看 Unidata 的 ToolsUI，它有一些检查结构数据的功能，虽然没有文档。

> 问题 2\. 如何查找数据集表中的行数？我是否被迫迭代数据集中的所有变量并找到每个数组长度的最大值？

结构可能看起来像

```
Structure {
  float fld1;
  int fld2;
  ...
} sname (200); 
```

所以它是一个结构数据数组（在本例中为一维）（在 HDF5 中也称为复合）。所以行数是

```
Varible snameV = ncfile.findVariable("sname");
long nrows = snameV.getSize(); 
```

> 问题3.如何在不读取整个数组的情况下找到数据集中变量的长度？如果我使用 netCDFFile.findVariable("/some/path/dataset.variable").getSize()，这只会返回值 1。直到我使用 netCDFVariable.read( ).getSize()

如果它是一个可变长度数组，那么你有：

```
Structure {
  float fld1;
  int fld2;
  ...
} sname (*); 
```

其中“*”表示“可变长度维度”。那么没有阅读就没有办法找出长度。我认为它是 HDF5 格式的“功能”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:36:53.277

NetCDF-Java 将使您能够访问 HDF5 文件中的所有数据。如果不是，它是一个错误，我们将修复。

是的，HDF5 中的数据集 == netCDF 中的变量。

如果数据集在 HDF5 中是“复合”类型，那么它将是 netCDF-Java 中的“结构”。

除非我能得到实际的文件，否则不能更具体。

约翰

# ruby-on-rails - 在 Rails 模型中进行正则表达式搜索的惯用方法？

> ID：16094991
> 
> 赞同：3
> 
> 时间：2013-04-18T23:51:24.273
> 
> 标签：ruby-on-rails, regex, activemodel

在我的 Rails 控制器中，我想对我的模型进行正则表达式搜索。我的谷歌搜索似乎表明我必须写如下内容：

```
Model.find( :all, :condition => ["field REGEXP '?' " , regex_str] ) 
```

这是相当讨厌的，因为它暗示了 MySQL 语法（我正在使用 Postgres）。

有没有一种更简洁的方法来强制 rails（在我的情况下为 4 个）在字段上进行正则表达式搜索？

我也更喜欢使用 using `where()`，因为它允许我将我的强参数（哈希）直接映射到查询。所以我想要的是：

```
Model.where( params, :match_by => { 'field': '~' } ) 
```

这将松散地转换为类似 (if params['field'] = 'regex_str')

```
select * from models where field ~ regex_str 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:11:23.887

不幸的是，没有惯用的方法来做到这一点。ActiveRecord 中没有对正则表达式的内置支持。除非每个数据库适配器都有特定于数据库的实现，并且并非所有数据库都支持正则表达式匹配，否则不可能高效地完成。那些不支持相同的语法（例如，Postgres 没有与 Ruby 的`Regexp`类相同的正则表达式语法）。

正如您在问题中所指出的，您必须使用 SQL 自行开发。然而，还有其他选择。

对于 Postgres 特定的解决方案，请查看[pg_search](http://pivotallabs.com/pg-search-how-i-learned-to-stop-worrying-and-love-postgresql-full-text-search/)，它使用 Postgres 的全文搜索功能。这非常快并且支持模糊搜索和一些模式匹配。

[elasticsearch](http://www.elasticsearch.org/)需要更多设置，但速度非常快，有一些不错的宝石可以让您的生活更轻松。这是[RailsCasts](http://railscasts.com/episodes/306-elasticsearch-part-1)的一集介绍它。它需要运行单独的服务器，但上手并不难，而且功能强大。仍然没有正则表达式，但值得一看。

如果您只是对单个字段进行一次性正则表达式搜索，那么 SQL 可能是您的最佳选择。

# php - 我的 MySQL 查询有什么问题？

> ID：16094992
> 
> 赞同：0
> 
> 时间：2013-04-18T23:51:26.440
> 
> 标签：php, mysql

所以，我有一个使用 ajax 发布到我的 php 文件的表单，并且成功了。但是下面的查询没有插入任何东西。有人可以帮我理解我做错了什么吗？

我的 php 文件：

```
<?php

include 'connect.php' ;

$type = mysql_real_escape_string($_POST['type']);

$title = mysql_real_escape_string($_POST['title']);

$content = mysql_real_escape_string($_POST['content']);

if ($type == 'Just Text') {

    mysql_query("INSERT INTO articles (title, type, thisisaninteger, content) VALUES ('".$title."', '".$type."', 0, '".$content."')")or die("MySQL Error: " . mysql_error());

}

?> 
```

我的connect.php：

```
<?php

$dbhost = "localhost"; 
$dbname = "example";
$dbuser = "test"; 
$dbpass = "test"; 

mysql_connect($dbhost, $dbuser, $dbpass) or die("MySQL Error: " . mysql_error());  
mysql_select_db($dbname) or die("MySQL Error: " . mysql_error());

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:00:58.310

如果您没有收到任何错误并且`INSERT`没有发生错误，则很可能是因为该`if`陈述不正确。验证`$type`实际匹配`Just Text`。

您还应该使用[*准备好的语句*](http://j.mp/T9hLWi)插入值，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您确定哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T00:01:39.503

首先，在 if 语句后回显“某事”，并使用您的 ajax 帖子调用数据。您可以确定您的 if 语句是否有效，然后尝试像这样格式化您的变量

```
mysql_query("INSERT INTO articles (title, type, thisisaninteger, content) VALUES ('$title', '$type', 0, '$content')")or die("MySQL Error: " . mysql_error()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T00:33:02.963

我只想投正式投票/建议，以支持切换到[参数化 SQL 语句](http://en.wikipedia.org/wiki/Prepared_statement)。尽管使用了 mysql_real_escape_string，但通过字符串连接将 SQL 语句连接在一起既没有必要也不是一个好主意。老实说，我发现一个准备好的语句比典型的字符串连接练习更容易阅读：

```
$stmt = $dbh->prepare("SELECT * FROM users WHERE USERNAME = ? AND PASSWORD = ?");
$stmt->execute(array($username, $password)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T00:24:59.377

好吧，这是我的一个愚蠢的错误。有些列我没有包括在内，并且没有为它们分配值。谢谢大家帮忙。

# c++ - 带字符串的 C++ 继承

> ID：16094993
> 
> 赞同：3
> 
> 时间：2013-04-18T23:51:43.383
> 
> 标签：c++, string, inheritance

所以我在继承上发现了这个问题，我试图弄清楚。这是需要的：

> 创建一个名为 strMetric 的类，它将提供有关字符串的信息。您应该提供一个默认构造函数和一个将字符串作为参数的重载构造函数。
> 
> 您的字符串度量类应具有以下功能
> 
> 一个名为 howLong 的方法，它返回字符串的长度
> 
> 一个名为 vowelCnt 的方法，它返回字符串中元音的数量
> 
> 一种称为 charSum 的方法，它返回字符串中所有字符的总和
> 
> 一个名为 upperCase 的方法，它返回大写字符的数量
> 
> 一个名为 lowerCase 的方法，它返回小写字符的数量
> 
> 您将使用 strMetric 类作为派生类，使用字符串类作为基类。
> 
> 笔记：
> 
> **不要创建自己的字符串类并从中派生。**您将使用属于 std 命名空间并在

我一直在解决这个问题，这就是我所拥有的，（现在我只研究其中一种方法，直到我弄清楚如何正确地做到这一点）

//// strmetric.h ////

```
#ifndef STRMETRIC
#define STRMETRIC
#include <string>
using namespace std;

class strMetric : public string
{
private:

        public:
        strMetric();
        strMetric(string &s);
        int howLong(string s);
};
#endif 
```

//// strmetric.cpp ////

```
#include "strmetric.h"

strMetric::strMetric()
    :string()
{
}
strMetric::strMetric(string &s)
    :string(s)
{
}

int strMetric::howLong(string s)
{ 
    return s.size();
} 
```

/////main.cpp////

```
#include <iostream>
#include "strmetric.h"

strMetric testRun("Hello There");

int main()
{

cout << "Here is the sentence being tested " << endl;
cout << endl;
cout << testRun << endl;
cout << endl;
cout << "String length " << endl;
cout << endl;
cout << testRun.length(testRun) << endl;
cout << endl;

} 
```

那么我这样做是正确的，还是我离基地很远？我很难理解这一点。如果我做错了，有人可以告诉我如何正确做，我不需要整个事情，只需要我开始的一部分，这样我就可以很好地了解我应该做什么，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:57:12.753

撇开不从容器继承的一般好建议，而*不是更喜欢**组合*，你仍然没有做对：方法（以及他们希望你定义的其他方法）应该对字符串本身进行操作，而不是在传入的字符串上：`std`*`howLong`*

 *```
int howLong(); // no args

int strMetric::howLong() {
    // Using "this" below is optional
    return this->size(); // remember, this *is* a string
} 
```

其余的方法将做同样的事情——它们*不会*接受字符串参数，`this`而是使用。

> 你怎么能使用 this-> 而不是加载字符串参数来执行其他方法？

其余方法没有什么不同 - 只需将字符串放入您自己的对象中。我几乎可以肯定，学习如何做到这一点是练习的重点。例如，要添加元音计数器，您可以执行以下操作：

```
int vowelCnt(); // again, no args

int strMetric:: vowelCnt() {
    int res = 0;
    for (int i = 0 ; i != this->size() ; i++) {
        char ch = (*this)[i]; // Yes, this works
        if (ch == 'a' || ch == 'u' || ch == ...) {
            res++;
        }
    }
    return res;
} 
```*

# excel - Excel 根据列中的重复值复制/粘贴

> ID：16094995
> 
> 赞同：-1
> 
> 时间：2013-04-18T23:52:10.343
> 
> 标签：excel

我需要一个代码来根据列中重复的单元格值复制/粘贴。请看下面的例子。如果 E1:E2 中存在重复，我想从 A2:B2 中获取值并粘贴到 C1:D1。然后循环浏览电子表格的其余部分。有任何想法吗？谢谢 ：-）

样本

```
A         B          C         D       E    
111      222                          ABC  
333      444                          ABC  
555      666                          DEF  
777      888                          DEF 
```

结果

```
A         B          C         D            E  
111      222        333       444          ABC  
333      444                               ABC  
555      666        777       888          DEF  
777      888                               DEF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:56:28.123

在单元格 C2 中：

```
 =if(e2=e3,a3,"") 
```

将此复制到 C 和 D 中的每个单元格。

# jakarta-ee - Websphere 中 JAAS 的默认实现是什么？

> ID：16094997
> 
> 赞同：1
> 
> 时间：2013-04-18T23:52:22.143
> 
> 标签：jakarta-ee, websphere, jaas

我想知道 Websphere 中 JAAS 的默认实现是什么？

**例如：**在 Websphere 中，当您为 DataSource 创建 JAAS 凭证时，凭证存储在哪里？我的意思是它使用什么样的存储，即：RDBMS、LDAP、纯文本文件……等等。所以必须有某种存储，JAAS api 必须连接到，以便在需要进行身份验证时检索数据源的凭据应用程序。

不确定我是否应该在这里使用**实现**这个词。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:07:56.367

您需要了解的有关 WebSphere 密码的所有信息都在[此 Infocenter Note](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_protplaintxt.html)中。

总之，WebSphere 对密码进行编码并将编码值存储在某个 XML 文件中。应用程序服务器包括一个编码器，但解码器在你身上。这种编码不被认为是一种适当的密码保护技术，有[几种方法可以破解它](http://webspherehacks.com/blog/?p=5)。

JAAS 编码的密码存储在这里：

```
profile_root/config/cells/cell_name/security.xml 
```

此答案的第一个链接中列出了凭据和相关 XML 文件的完整列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:56:02.977

“实施”是正确的词。

WebSphere 将其整个配置存储在配置文件目录内的一组 XML 文件（例如`server.xml`等`resources.xml`）中。JAAS 条目也存储在那里（当然密码是加密的）。

# php - Memcached 忽略 OPT 超时

> ID：16094998
> 
> 赞同：3
> 
> 时间：2013-04-18T23:52:27.160
> 
> 标签：php, memcached

调用 memcached->get( $key ) 的时间超过 30 秒，并引发致命异常。有点奇怪的场景，但基本上，我们拥有的环境有 4 台服务器运行 memcached 0.4，3 台运行 1.08。

这是例外

`Maximum execution time of 30 seconds exceeded in /docroot/www/library/lib/Core/Cache/Memcache.php on line 152`

行号更改为调用 memcache 连接的不同函数，但它们始终位于 a`replace`或 a上`get`。我检查了按键，它们都是字母数字。

该文件的第 152 行是

在运行 1.08 的服务器上，我试图设置它，以便在获取时有 3 秒的超时（这比它真正应该的要高，但没关系）

因此，我编写了一个简单的脚本来连接到一些 AWS memcache 实例，将超时设置为**一微秒**，并尝试让它缓存一个大值。

这是脚本

```
$cache = new Memcached();
$cache->addServers( $servers );
$cache->setOption( \Memcached::OPT_RECV_TIMEOUT, 1 );
$cache->->setOption( \Memcached::OPT_SEND_TIMEOUT, 5000 );

$key = sha1( microtime( true ) . rand( 0, 9999999999 ) );
$value = sha1( $key );
for( $i = 0; $i < 10000; $i++ ) {
        $value .= sha1( $value );
}
$cache->set( $key, $value, 120 );
echo "Value Set\n";
sleep( 5 );
$start = microtime( true );
var_dump( [ 'key' => $key, 'value' => sizeof( $cache->get( $key ) ) ] );
var_dump( $cache->getResultMessage() );
$end = microtime( true );
echo "Elapsed: " . ( $end - $start ) . "\n"; 
```

与，的输出`time php test.php`

```
Value Set
array(2) {
  ["key"]=>
  string(40) "c5c9da5ebef83a24da78cdd8bba61b0fa8473296"
  ["value"]=>
  int(1)
}
string(7) "SUCCESS"
Elapsed: 0.0075550079345703

real    0m14.326s
user    0m9.129s
sys 0m0.080s 
```

有人知道如何解决我的任何一个问题吗？非常感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:47:54.440

您是否尝试过使用持久连接？看起来您正在使用服务器池，因此请尝试以下简单操作：

```
$poolId = sha1(serialize($servers));
$cache = Memcached( $poolId );
if( sizeof( $cache->getServerList() ) === 0 ) {
    $cache->addServers( $servers );
} 
```

我遇到了一些奇怪的行为和随机的、难以产生致命错误的问题，而持久连接已经为我解决了这个问题。在这里找到我的解决方案和代码示例：[配置 PHP Memcached 客户端](http://blog.roundeights.com/36883753 "配置 PHP Memcached 客户端")

正如作者所说，认为这可能是问题所在：

> 在大型服务器场中，您需要确保正确配置连接池。否则，Memcached 有一个愉快地泄漏连接的坏习惯。