# StackOverflow 问答 15744000-15744999

# ruby - 子类中的ruby未初始化常量

> ID：15744000
> 
> 赞同：0
> 
> 时间：2013-04-01T13:01:46.537
> 
> 标签：ruby, constants

我不断收到此错误：未初始化的常量 A::MYCONST 我的代码看起来像

```
class A
  MYCONST = "myconst"
end

class B < A
 TEST = A::MYCONST
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:06:47.133

```
p RUBY_VERSION
class A
  MYCONST = "myconst"
end

class B < A
 p TEST = A::MYCONST
 p defined? TEST
end 
```

***输出：***

```
"2.0.0"
"myconst"
"constant" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:07:16.937

解释器抱怨是因为它期望`B::A::MYCONST`.

在类 B 中，在 line2 中定义的 const 可以由 any`::A::MYCONST`或 just引用`MYCONST`。

# .net - 正则表达式？回顾不消费

> ID：15744002
> 
> 赞同：1
> 
> 时间：2013-04-01T13:02:03.057
> 
> 标签：.net, regex, lookahead

向后看？不消耗**：**

正则表达式：

```
(?i)(?<=\bsubject:?).+$ 
```

文本：

主题： asdf adsf

匹配

**:** asdf adf

我不希望**:**包含在比赛中

如果我搜索：
主题 asdf adsf
它匹配：
asdf adsf
这就是我想要的行为
它似乎将 : 视为可选但不消耗

如果我只匹配主题：？它是贪婪的，包括**：**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:08:35.550

使用这个正则表达式`(?i)(?<=\bsubject:?)[^:].*$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:06:24.680

: 后面有一个问号，这将使冒号成为可选的。

```
(?i)(?<=\bsubject:).+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:07:08.750

这对我来说没问题：

`(?i)(?<=subject:).+$`

去掉多余的问号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:10:40.007

除非我误解了，否则我认为您不需要对此进行展望？

如果您只是在遵循以下内容`Subject`，那么这就是您的正则表达式：

`Subject\:?(.+)$`

如果您追求以下内容`Subject`，`subject`或者例如`suBject`，这就是您的正则表达式：

`(?i)Subject\:?(.+)$`

`\b`如果仍然有必要，请再次包含您的单词边界：

`\bSubject\:?(.+)$`或者`(?i)\bSubject\:?(.+)$`

因此，在 C#.NET 中：

```
Regex r = new Regex(@"(?i)Subject\:?(.+)$");

Match m = r.Match("Subject asdf asdf");
Console.WriteLine(m.Groups[1]);

m = r.Match("Subject: asdf asdf");
Console.WriteLine(m.Groups[1]); 

//Both output ' asdf asdf' - you might want to trim this.  
//Or add optional space \s? after the optional colon \:? in your regex. 
```

或者，与其依靠魔术常量与隐式编号的捕获组对齐，不如显式命名（和引用）该组：

```
string captureName = "yourcap";

Regex r = new Regex(@"(?i)Subject\:?(?<"+captureName+">.+)$");
Match m = r.Match("Subject asdf asdf");
Console.WriteLine(m.Groups[captureName]); 
```

# symfony - Twig Form Theming - form_label 类属性

> ID：15744012
> 
> 赞同：10
> 
> 时间：2013-04-01T13:02:42.013
> 
> 标签：symfony, twig

我一直在尝试覆盖 form_row Twig 扩展，以便可以呈现 Twitter Bootstrap 样式的行。一个 twitter boostrap 表单行应该如下所示：

```
<div class="control-group">
    <label class="control-label" for="idOfMainInput">Label Name:</label>
    <div class="controls">
        <input type="text" id="idOfMainInput" name="someDumbName">
    </div>
</div> 
```

基本树枝 div 样式 form_row 块在[此链接](https://github.com/symfony/symfony/blob/2.2/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)中定义如下：

```
{% block form_row %}
{% spaceless %}
    <div>
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% endspaceless %}
{% endblock form_row %} 
```

因此，我的想法是只放入必要的 div，并在必要时对类条目（即在主 div 中）进行硬编码，但将“attr”值传递给 form_label、form_errors 和 form_widget 部分。我现在已经取出了 form_errors，只是为了不深入研究它。这是我尝试过的：

```
{% form_theme form _self %}
{% block form_row %}
{% spaceless %}
<div class="control-group">
    {{ form_label(form, 'test label name', { 'attr': {'class': 'control-label'} }) }}
    <div class="controls">
    {{ form_widget(form) }}
    {{ form_errors(form) }}
    </div>
</div>
{% endspaceless %}
{% endblock form_row %} 
```

但是，问题在于，无论我尝试什么，form_label 扩展都不使用“控制标签”作为我的类（如果有现有的，它应该根据源代码附加它，比如“必需”）。这是我查看渲染页面的源时得到的结果：

```
<div class="control-group">
    <label for="form_rsa_id" class="required">test label name</label>
    <div class="controls">
        <input type="number" id="form_rsa_id" name="form[rsa_id]" required="required" />
    </div>
</div> 
```

正如您所看到的，class="required" 在那里并且取自基本表单对象属性，但它应该是 class="required control-label"，但它不是。

有点不知所措，因为文档（以及源代码）指出应该使用符号“form_label（视图，标签，变量）”。[链接到此处](http://symfony.com/doc/2.0/reference/forms/twig_reference.html#form-label-view-label-variables)的文档。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T14:52:55.117

我认为你需要使用`label_attr`而不是`attr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T12:08:13.877

对于仍然希望这样做的任何人，Symfony 2.6 附带了一个[Bootstrap 表单主题](http://symfony.com/blog/new-in-symfony-2-6-bootstrap-form-theme)，它将为您执行此操作。

# html - 使用 GWT 使用用户的网络摄像头捕获视频/图像

> ID：15744014
> 
> 赞同：5
> 
> 时间：2013-04-01T13:03:03.123
> 
> 标签：html, gwt, html5-video, webcam

我正在使用 GWT2.5 开发项目，我需要使用用户的网络摄像头来捕获图像/视频。在 GWT 中怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:30:37.743

GWT 2.5 带有一个名为[Elemental](https://developers.google.com/web-toolkit/articles/elemental)的新库，它被认为是浏览器 API 的包装器。它只适用于 chrome，但将来它可以支持更多浏览器。

如果您愿意在应用程序 chrome 中支持此功能，您可以查看[此示例](http://www.jooink.com/experiments/ElementalGetUserMediaDemo/)。演示的源代码在[googlecode](https://code.google.com/p/elemental-getusermedia-demo/)中。

如果您想支持其他浏览器，您可以将元素类作为基础并修改它们以匹配其他浏览器。

这是google I/O 2012 期间介绍元素的[视频](http://www.youtube.com/watch?v=VOf27ez_Hvg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:20:57.433

一个基于 GWT 的 API，用于从浏览器[捕获网络摄像头快照。](http://code.google.com/p/gwt-webcam/)此 API 是 jpegcam JavaScript 库的 GWT 包装器。

[示例和源代码。](http://gwt-webcam.googlecode.com/svn/trunk/)

希望有帮助。

# java - Java/Maven 编译失败（没有找到合适的构造函数）

> ID：15744015
> 
> 赞同：1
> 
> 时间：2013-04-01T13:03:06.247
> 
> 标签：java, maven, travis-ci

我遇到了一个奇怪的问题。
我在一个使用[ProcessBuilder Class](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)的项目上工作。
在我的本地机器（Java6 和 Java7 测试）上，我可以轻松地`mvn clean install`完成`mvn assembly:single`项目而不会出现任何错误。现在我想让项目由[travis-ci](https://travis-ci.org)构建并遇到以下错误

> 错误：找不到适合 ProcessBuilder(String) 的构造函数

[完整的日志文件在这里..](https://travis-ci.org/MultiServerControl/MineControl/jobs/4854648) 但[ProcessBuilder 的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder%28java.lang.String...%29)向我展示了该构造函数。
我的 .travis.yml 看起来像这样

> 语言：java
> 
> jdk：
> -oraclejdk7
> -openjdk6
> -openjdk7
> 
> after_success：-mvn
> 程序集：单个

任何想法为什么在 travis-ci 上构建失败？

谢谢， F481

**编辑：**
在本地，我也在使用 Maven 3，比如 travis-ci（travis doc：“Travis Java builder 将使用 Maven 3 来构建它。”）我的 pom.xml：[https ://github.com/MultiServerControl/MineControl/ blob/master/pom.xml](https://github.com/MultiServerControl/MineControl/blob/master/pom.xml)
和第一个错误的java代码：`this.processBuilder = new ProcessBuilder("");`
完整的类在[这里可用](https://github.com/MultiServerControl/MineControl/blob/master/src/main/java/com/multiservercontrol/minecontrol/ServerController.java)

**Edit2：** 我为maven编译指定了一个源和目标版本，如下所示：

```
<plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>3.0</version>
      <configuration>
          <source>1.7</source>
          <target>1.7</target>
      </configuration>
</plugin> 
```

现在构建适用于 JDK7：[https ://travis-ci.org/MultiServerControl/MineControl/jobs/5963859](https://travis-ci.org/MultiServerControl/MineControl/jobs/5963859)

但我不明白这种行为的原因。我也想为 JDK 5,6 构建项目。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:57:04.870

我指定了 maven 编译器插件的版本以及编译的源和目标版本，如下所示：

```
<plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>3.0</version>
      <configuration>
          <source>1.5</source>
          <target>1.5</target>
      </configuration>
</plugin> 
```

现在构建正在运行！非常感谢**NilsH**，他把我推向了正确的方向。

# android - android蓝牙聊天力在尝试将其作为服务运行时关闭

> ID：15744016
> 
> 赞同：0
> 
> 时间：2013-04-01T13:03:07.207
> 
> 标签：android, string, android-activity, message

我正在使用android sdk中的蓝牙聊天示例来发送和接收许多活动中的字符串，而不是通过修改服务来接收主要活动，但是当我这样做时，应用程序强制关闭。我只是想在连接到主要活动中的设备后使用发送和接收字符串函数。笔记：

我正在使用具有默认类的 sdk 7 的蓝牙聊天示例：Bluetoothchat、BluetoothchatService、Devicelistactivity 这是服务代码：

```
class myapp extends Application
{
private BluetoothChatService mBluetoothConnectedThread;
@Override
public void onCreate() {
    super.onCreate();
}
public BluetoothChatService getBluetoothConnectedThread() {
    return mBluetoothConnectedThread;
}
public void setBluetoothConnectedThread(BluetoothChatService mBluetoothConnectedThread) {
this.mBluetoothConnectedThread = mBluetoothConnectedThread;
}
} 
```

这就是我试图在其中发送字符串的活动：

```
 public class newtest extends Activity {
private BluetoothChatService myBluetoothConnectedThread;
@Override

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newtest);
    Button got=(Button)findViewById(R.id.button1);
    final myapp a=(myapp)getApplication();
          a.setBluetoothConnectedThread(myBluetoothConnectedThread);

    final byte[] d=new byte[]{127,-128,0}; 
    got.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            a.getBluetoothConnectedThread().write(d);       
        }
    });

}
} 
```

当我刚刚进入此活动时，应用程序将关闭。

对不起，我的代码中的间距问题，请尽可能多地帮助我，因为我没有从 stackoverflow 中的许多类似问题中受益。

这是我在 logcat 中得到的：

```
04-01 15:09:45.120: E/AndroidRuntime(16602): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.BluetoothChat/com.example.android.BluetoothChat.newtest}: java.lang.ClassCastException: android.app.Application
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1769)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1786)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.os.Looper.loop(Looper.java:130)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread.main(ActivityThread.java:3892)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at java.lang.reflect.Method.invoke(Method.java:507)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:642)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at dalvik.system.NativeStart.main(Native Method)
04-01 15:09:45.120: E/AndroidRuntime(16602): Caused by: java.lang.ClassCastException: android.app.Application
04-01 15:09:45.120: E/AndroidRuntime(16602):    at com.example.android.BluetoothChat.newtest.onCreate(newtest.java:18)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 15:09:45.120: E/AndroidRuntime(16602):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1733)
04-01 15:09:45.120: E/AndroidRuntime(16602):    ... 11 more 
```

我的清单：

```
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.android.BluetoothChat"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk minSdkVersion="6" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" />

<application android:label="@string/app_name"
             android:icon="@drawable/app_icon" >
             <application android:name="myapp" />
    <activity android:name=".BluetoothChat"
              android:label="@string/app_name"
              android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".t2"/>
     <activity android:name=".newtest"/>
    <activity android:name=".dup"/>
    <activity android:name=".DeviceListActivity"
              android:label="@string/select_device"
              android:theme="@android:style/Theme.Dialog"
              android:configChanges="orientation|keyboardHidden" />
</application>
</manifest> 
```

新的日志猫

```
04-01 19:24:52.199: E/AndroidRuntime(29443): FATAL EXCEPTION: main
04-01 19:24:52.199: E/AndroidRuntime(29443): java.lang.RuntimeException: Unable to start   activity
ComponentInfo{com.example.android.BluetoothChat/com.example.android.BluetoothChat.newtest}:  java.lang.NullPointerException
04-01 19:24:52.199: E/AndroidRuntime(29443):    at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1769)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1786)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.os.Looper.loop(Looper.java:130)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.app.ActivityThread.main(ActivityThread.java:3892)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at java.lang.reflect.Method.invoke(Method.java:507)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:642)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at dalvik.system.NativeStart.main(Native Method)
04-01 19:24:52.199: E/AndroidRuntime(29443): Caused by: java.lang.NullPointerException
04-01 19:24:52.199: E/AndroidRuntime(29443):    at  com.example.android.BluetoothChat.newtest.onCreate(newtest.java:23)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 19:24:52.199: E/AndroidRuntime(29443):    at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1733)
04-01 19:24:52.199: E/AndroidRuntime(29443):    ... 11 more 
```

更新的新测试类：

```
package com.example.android.BluetoothChat;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class newtest extends Activity {
  private BluetoothChatService myBluetoothConnectedThread;
@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newtest);
    Button got=(Button)findViewById(R.id.button1);

    MyApplication.getInstance().setBluetoothConnectedThread(myBluetoothConnectedThread);

    final byte[] d=new byte[]{127,-128,0}; 
    got.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            myBluetoothConnectedThread.write(d);           
            // TODO Auto-generated method stub
        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:43:34.700

您正在将 Application 对象转换为您的 Application wrapper `myapp`。检查[这个](https://stackoverflow.com/questions/4572338/extending-application-to-share-variables-globally "这个")问题并接受答案。

对于您的情况，您可以执行以下操作：

```
 public class MyApplication extends Application {
    private static MyApplication singleton;

    private BluetoothChatService mBluetoothConnectedThread;

    // Returns the application instance
    public static MyApplication getInstance() {
        return singleton;
    }

    public BluetoothChatService getBluetoothConnectedThread() {
        return mBluetoothConnectedThread;
    }

    public void setBluetoothConnectedThread(
            BluetoothChatService mBluetoothConnectedThread) {
        this.mBluetoothConnectedThread = mBluetoothConnectedThread;
    }

    public final void onCreate() {
        super.onCreate();
        singleton = this;
    }
} 
```

**更新：**

而不是调用：

```
final myapp a=(myapp)getApplication();
a.setBluetoothConnectedThread(myBluetoothConnectedThread); 
```

称呼

```
MyApplication.getInstance().setBluetoothConnectedThread(myBluetoothConnectedThread); 
```

在清单文件中更改：

```
<application android:label="@string/app_name"
         android:icon="@drawable/app_icon" >
         <application android:name="myapp" /> 
```

至

```
<application android:label="@string/app_name"
             android:icon="@drawable/app_icon" >
             <application android:name="com.example.android.MyApplication" /> 
```

# linux - 如何提取 filename.tar.gz 文件

> ID：15744023
> 
> 赞同：125
> 
> 时间：2013-04-01T13:03:22.753
> 
> 标签：linux, file, gzip, tar

我想提取一个名为`filename.tar.gz`.

使用`tar -xzvf filename.tar.gz`不会提取文件。它给出了这个错误：

```
gzip: stdin: not in gzip format
tar: Child returned status 1
tar: Error exit delayed from previous errors 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-04-01T13:13:21.447

如果`file filename.tar.gz`给出此消息：POSIX tar 存档，则存档是 tar，而不是 GZip 存档。

解压不带 tar 的 tar `z`，它仅用于 gzipped（压缩）：

```
mv filename.tar.gz filename.tar # optional
tar xvf filename.tar 
```

或者尝试一个通用的解包器，例如`unp`( [https://packages.qa.debian.org/u/unp.html](https://packages.qa.debian.org/u/unp.html) )，一个用于解包各种存档格式的脚本。

确定文件类型：

```
$ file ~/Downloads/filename.tbz2
/User/Name/Downloads/filename.tbz2: bzip2 compressed data, block size = 400k 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-01T13:08:16.867

据我所知，该命令是正确的，假设您的输入文件是一个有效的 gzipped tar 文件。你的输出表明它不是。如果您从 Internet 下载文件，您可能没有获得整个文件，请重试。

如果没有更多关于文件来源的知识，这里没有人能够给你一个具体的解决方案，只是有根据的猜测。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-23T16:14:13.687

我有同样的错误命令的结果：

```
file hadoop-2.7.2.tar.gz 
```

是`hadoop-2.7.2.tar.gz: HTML document, ASCII text`

由于下载或其他问题导致文件不是gzip格式的原因。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-13T11:38:03.957

使用“wget”命令下载的文件有时会发生这种情况。就在 10 分钟前，我试图从命令屏幕安装一些东西到服务器，同样的事情发生了。作为一种解决方案，我只是将 .tar.gz 文件从网上下载到我的机器，然后通过 FTP 将其上传到服务器。之后，“tar”命令按预期工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-30T12:07:24.383

内部将从环境变量中`tar xcvf <filename>`调用二进制文件来解压缩存档中的文件。有时第三方工具使用与二进制文件不兼容的自定义二进制文件。检查with中的二进制文件并确保调用了正确的二进制文件是个好主意。`gzip``PATH``tar``gzip``tar``gzip``PATH``which gzip``gzip`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T13:20:14.940

tar.gz 是 gzip 文件中的 tar 文件，因此首先您必须使用 解压缩 gzip 文件`gunzip -d filename.tar.gz`，然后使用`tar`解压缩它。但是，既然`gunzip`说它不是 gzip 格式，你可以用 来查看它是什么格式`file filename.tar.gz`，并使用适当的程序打开它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-19T17:20:22.453

检查以确保文件完整。如果您只下载了部分文件或文件存在重大问题，则可能会出现此错误消息。检查 MD5sum。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-31T20:33:59.320

您必须验证的另一种情况是您尝试解压缩的文件不是空的并且是有效的。

在我的情况下，我没有正确下载文件，经过仔细检查并确保我有正确的文件，我可以毫无问题地解压它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-15T08:41:07.320

所以，基本上看起来的`tar.gz`文件并不是它应该的格式。这可以使用`file`Linux 命令确定。例如，对于正版`.tgz`文件，命令输出如下：

```
root@f562353fc1ab:/app# file kafka_2.13-2.8.0.tgz 
kafka_2.13-2.8.0.tgz: gzip compressed data, from FAT filesystem (MS-DOS, OS/2, NT), original size modulo 2^32 75202560 
```

因此，您收到文件的来源并没有以正确的格式发送它。如果您`.tgz`从 URI 下载了所谓的文件，则 URI 可能是错误的。`.tgz`就我而言，我在提取 kafka 二进制文件（文件）时遇到了同样的问题。原来，URI`wget`不正确。至少对于 kafka，要从下载页面 ( [https://kafka.apache.org/downloads.html](https://kafka.apache.org/downloads.html) ) 获取正确的下载链接，我们必须遍历到由代表二进制文件的链接突出显示的页面。进入该页面后，我们将获得下载二进制文件的确切链接。此外，在下载期间，`wget`显示将下载的文件的类型。它将打印类似这样的内容来指示类型。

`Length: unspecified [text/html]`--> 不正确的 URI。

`Length: 71403603 (68M) [application/octet-stream]`--> 正确的 URI。

# css - @font-face 在 IE 中无法正确显示

> ID：15744026
> 
> 赞同：10
> 
> 时间：2013-04-01T13:03:40.937
> 
> 标签：css, internet-explorer, cross-browser, font-face, custom-font

我一直在寻找几个小时，问了朋友，但没有成功。所以我希望你们能帮助我。我的网站使用自定义字体，但 IE(10) 不支持我这样做的方式。我不知道它支持其他方法。这是我的：

```
 @font-face { font-family: shardee; src:url('fonts/Shardee.ttf'); } 
```

没有必要在 Internet Explorer 中使用自定义字体，但它会很好。

当 Internet Explorer 不知道该字体时，它会使用其默认字体。但问题是，自定义字体的字体大小是完美的，但 Internet Explorer 默认字体的字体太大了。我尝试使用特定于 IE 的 css 代码来修复它，但它根本不起作用。我正在为内部资源管理器使用以下 css 代码：

```
 <!--[if IE]>
      <style>
          #menu ul li{ font-size:15px; }
      </style>
    <![endif]--> 
```

我还尝试了一个外部样式表，它看起来像这样：

```
 <!--[if IE]>
      <link rel="stylesheet" type="text/css" href="<?php echo get_stylesheet_directory_uri() ?>/style/ie.css" />
    <![endif]--> 
```

我在 php 中使用的函数是一个 wordpress 函数，可以将您带到您的网站路径。如果您不使用 wordpress，则可以忘记该代码并将其留空。

问题不在于路径，路径是正确的。我在浏览器中查看了源代码，它显示了我在 ie.css 中的代码。ie.css 中的代码与上面完全相同，但没有标签等。

我希望你们能帮助我解决这个问题。据我所知，有两种解决方案。让 ie 特定的 css 工作，或者告诉我一种在 IE 中创建自定义字体的方法。我使用的是 Internet Explorer 版本 10。

[你可以在这里](http://test-sub.web-bart.nl)看到这个网站，但是一旦它被修复它就会消失，因为一旦它被修复我就不需要把它放在子域上。

亲切的问候，巴特·罗洛夫斯

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T13:17:17.420

**多种字体格式**

要支持广泛的浏览器，请使用字体的`.ttf,` `.woff`和`.eot`版本。

```
@font-face {
    font-family: 'shardee';
    src: url('fonts/Shardee.eot');
    src: url('fonts/Shardee.eot?#iefix')
             format('embedded-opentype'),
         url('fonts/Shardee.woff') format('woff'),
         url('fonts/Shardee.ttf') format('truetype');
} 
```

您可以使用[Font Squirrel](http://www.fontsquirrel.com/)之类的字体转换网站，将`.ttf`字体转换为`.woff`and `.eot`。

**DRM 误报**

正如@Jukka 指出的那样，TTF 文件存在法律问题，导致它无法在 Windows 中使用。在 IE 开发者控制台中，显示如下错误信息：

```
CSS3114: @font-face failed OpenType embedding permission check.
Permission must be Installable. 
```

[Shardee](http://www.dafont.com/shardee.font)似乎是一种带有[未知许可证类型](http://www.fontsquirrel.com/license/Shardee)的废弃字体。尽管使用这种字体可能是合法的，但 Windows 似乎要求每个 TTF 文件都有 DRM 信息，明确表明将其嵌入网页是合法的。IE 中的错误很可能是误报。

为了测试这一点，我采用了一种 TTF 字体，该字体已知是合法许可在网站上使用的。由于 DRM 错误，TTF 版本在 IE 中不起作用。这个例子绝对是一个误报。这就是为什么需要使用多种字体格式的原因之一，也是为什么像 TTF 这样的单一格式不能在所有浏览器上工作的原因之一。

虽然 Windows 不允许 IE 使用 TTF 文件，但 IE 仍然可以使用 WOFF 或 EOT 版本。当我在本地网络服务器上使用所有三种字体格式测试上述`@font-face`规则时，Shardee 字体在所有版本的 IE 中都正确呈现（尽管在 IE 开发者控制台中出现错误消息）。

尝试步骤：

1.  [将](http://www.fontsquirrel.com/)`.ttf`文件转换为`.woff`和`.eot`
2.  `.woff`将和文件上传到`.eot`与现有文件相同的目录`.ttf`。
3.  用上面的规则替换`@font-face`规则。我在它的初始版本中修正了几个错别字。

如果仍有问题，则可能是 Web 服务器设置有问题。相关问题：[IE9 阻止下载跨域网络字体](https://stackoverflow.com/q/5065362/1306809)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T20:53:37.563

**IE11：** 如果您`CSS3114`在开发工具中收到错误代码，则需要修改字体文件的第一位。这将允许 IE 安装字体。

**npm 模块：** 您可以使用`ttembed-js`npm 模块，它会为您进行修改。 [https://www.npmjs.com/package/tembed-js](https://www.npmjs.com/package/ttembed-js)

**用法：** `ttembed-js path/to/Shardee.ttf`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-26T12:17:17.153

通过在网上搜索，我发现了这个在线工具，它对 TTF 字体进行了修复，使其可以在 Explorer 中显示： [https ://www.andrebacklund.com/fontfixer.html](https://www.andrebacklund.com/fontfixer.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T13:44:49.000

所以问题显然是在 IE 10 上，元素内的菜单`id=menu`没有出现在声明的字体“shardee”中，而是出现在浏览器的默认字体中。这实际上使菜单可读。但从技术上讲，可以在控制台窗格中的开发人员工具（按 F12 进入）中看到解释。带有代码 CSS3114 的错误消息表明`@font-face`未通过嵌入使用权限的检查。

查看字体的使用权，如有可能，请联系版权持有人（推测为Bright Ideas）获取权利。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-17T23:14:51.450

[FontPrep](http://FontPrep.com)是 Mac OS X 的优秀 Web 字体生成器。它甚至可以创建 fonts.css

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-04T20:17:16.763

我遇到了同样的问题并运行了 F12。我所在的网站似乎在 IE10 中启用了兼容性视图。一旦我禁用兼容性查看显示的自定义字体。希望这可以帮助某人...

# maildir - 为什么 maildirs 需要 `new` 文件夹？

> ID：15744033
> 
> 赞同：2
> 
> 时间：2013-04-01T13:04:21.987
> 
> 标签：maildir

[我理解在maildir](http://cr.yp.to/proto/maildir.html)`tmp`中需要的原因：它可以在. 但是，为什么需要？`cur``new`

邮件不能`cur`直接用名字`<uniq>:`左右放入文件夹吗？一旦 MUA 想要添加标志，它就可以初始化该`uniq`部分。这可能会使事情变得（好吧，只是很小）更简单的编码。

# log4j - log4j 以编程方式为不同的包设置不同的日志文件

> ID：15744041
> 
> 赞同：1
> 
> 时间：2013-04-01T13:05:04.693
> 
> 标签：log4j

我知道如何在 log4j.properties 文件中为不同的包设置不同的日志文件，但我想以编程方式设置它们。

例如，如何以编程方式管理此配置？

```
log4j.appender.MyAppeder=org.apache.log4j.RollingFileAppender
log4j.appender.MyAppeder.File=${log}/mylog.log
log4j.appender.MyAppeder.layout=org.apache.log4j.PatternLayout
log4j.appender.MyAppeder.layout.ConversionPattern=%p %t %c - %m%n
log4j.logger.com.mypackage=DEBUG,MyAppeder 
```

# events - 在新的 Google Analytics (analytics.js) 设置中未跟踪事件

> ID：15744042
> 
> 赞同：61
> 
> 时间：2013-04-01T13:05:08.727
> 
> 标签：events, google-analytics, jquery, analytics.js

我有一个网站，我正在使用新的 Universal Analytics (analytics.js) 进行跟踪。使用以下代码片段，一切都已设置并正常工作（浏览量、推荐等）：

```
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39570713-1', 'site.com');
  ga('send', 'pageview');

</script> 
```

它位于`</head>`标签之前。

我正在使用 JQuery 来触发一个事件。我用警告消息测试了 JQuery，它被调用了，所以这不是问题。这是单击按钮时触发的代码段：

```
$('#submitButton').on('click', function() {
      ga('send', 'event', 'button', 'click', 'contact form');
    }); 
```

Analytics 的“事件”部分中没有显示任何内容。我不断点击按钮，即使来自不同的计算机，只是为了确保它不排除我的 IP 地址。因为谷歌提供的[分析文档](https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=en_US)没有提供很多解释，所以我在这里不知所措。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2016-11-23T10:23:18.447

如果您使用的是**Google 跟踪代码管理器**，并且还想通过代码触发一些事件，`ga('send'...)`这似乎还不够。您需要首先获取适当的分析对象：

```
if ("ga" in window) {
    tracker = ga.getAll()[0];
    if (tracker)
        tracker.send("event", "Test", "Test GA");
} 
```

请注意，这假设您只在您的网站上使用了一个 Google Analytics（分析）跟踪代码。如果您碰巧使用多个，则可能需要按名称或索引获取适当的一个。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-04-29T06:11:56.053

新版本的分析具有新的语法。替换下面的行；

```
ga('send', 'event', 'button', 'click', 'contact form'); 
```

有了这个;

```
gtag('event', 'click', {'event_category' : 'button',
  'event_label' : 'contact form'}); 
```

参考; [https://developers.google.com/analytics/devguides/collection/gtagjs/events](https://developers.google.com/analytics/devguides/collection/gtagjs/events)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-18T09:04:10.097

出于测试目的，您还可以使用 hitCallback 方法：

```
ga('send', {
  'hitType': 'event',         
  'eventCategory': 'button', 
  'eventAction': 'click',     
  'eventLabel': 'contact form',
  'hitCallback' : function () {
      alert("Event received");
   }
}); 
```

更新：缺少逗号。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-01-30T11:22:33.183

对于此刻的 GA... 在 SPA 中发送新页面对我来说最终看起来像这样：

```
if (window.ga){
    window.ga.getAll()[0].set('page', location);
    window.ga.getAll()[0].send('pageview')
} 
```

这准确地显示了 GA 报告中想要的内容，例如点击了新页面并且标题和所有内容都是正确的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-19T00:20:58.360

我有同样的问题。我必须创建一个新属性并选择“通用分析”而不是“经典分析”（它被标记为“测试版”）。现在事件被正确捕获。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-18T18:17:27.403

就我而言，问题是 uBlock Origin 阻止了分析脚本的加载。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-04-09T18:59:22.107

我遇到了同样的问题，我想我已经找到了解决方案，但它确实让我对 Universal Analytics 产生了不好的印象。

我必须做的是明确使用*同步*分析 API。因此，不要在标签中包含通常的代码段，而是`<head>`使用以下代码：

```
<script src="//www.google-analytics.com/analytics.js"></script>
<script>
  tracker = ga.create('UA-XXXXXXX-1', 'example.com');
  tracker.send('pageview');
</script> 
```

然后你像这样调用事件跟踪代码：

```
tracker.send('event', 'Category', 'Action', 'Label'); 
```

这将确保在用户导航到的页面开始加载之前将跟踪信标发送到 Google**并得到确认。**

这表明 Universal Analytics 需要某种额外的确认，而不是旧的`ga.js`分析代码所需的。因此，当您将事件附加到将用户带到另一个页面的单击时，无法发送该确认，因为浏览器已离开该页面并丢弃了当前的 javascript 执行堆栈。

也许这个问题特定于某些执行环境（我在 OSX Mountain Lion 上使用 Chrome 34），这可能解释了为什么更多开发人员没有注意到这个问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-18T01:53:03.310

今天我需要第一次设置分析，我发现自己遇到了同样的麻烦。

我发现处理多个跟踪器以避免 的最糟糕的方法`getAll()`是：

```
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-xxxxxx-y', 'auto', 'tracker');
ga('tracker.send', 'pageview');
ga('tracker.send', 'event', 'test', 'click', 'automaticEvent') 
```

请注意，您必须将“名称”传递给 create 方法，然后将事件发送到该跟踪器`ga([trackerName].send, ...)`

参考：[https ://developers.google.com/analytics/devguides/collection/analyticsjs/accessing-trackers](https://developers.google.com/analytics/devguides/collection/analyticsjs/accessing-trackers)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-08-18T20:35:07.577

如果有人试图向 Google Analytics 发送事件并想知道为什么`send`函数在没有任何明确提示的情况下什么都不做，我建议使用他们库的调试版本。它将在浏览器控制台中记录一些有用的提示。

与其从 https://www.google-analytics.com/analytics.js 获取脚本，不如从[https://www.google-analytics.com/analytics_debug.js](https://www.google-analytics.com/analytics.js)获取[脚本](https://www.google-analytics.com/analytics_debug.js)。我从他们的[文档](https://developers.google.com/analytics/devguides/collection/analyticsjs/debugging#the_debug_version_of_the_analyticsjs_library)中发现了这一点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-03T10:48:01.947

我看不出代码本身有什么问题。您是否尝试过使用替代事件跟踪？

```
ga('send', {
  'hitType': 'event',          // Required.
  'eventCategory': 'button',   // Required.
  'eventAction': 'click',      // Required.
  'eventLabel': 'contact form'
}); 
```

我还建议使用 GA Debug Chrome 插件测试该网站，它可以让您查看是否发送了跟踪信标。

到目前为止，Universal Analytics 的“官方”调试文档仍然缺失，但希望它会尽快添加，因为 ga_debug.js 提供了许多有用的方法来找出 Analytics 实现的问题......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-14T12:19:03.253

我有同样的问题，看起来事件被跟踪，但 GA 仪表板不允许浏览它们。这是我可以解释 GA 仪表板向我显示的“访问事件：1071”但“事件总数：0”的唯一方法。

**UPD** : 用 GA Chrome 调试，发现有问题；第一种方法不起作用（发送没有附加任何数据的事件），但第二种方法可以。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-21T17:44:24.763

您还应该考虑到，在 ga 脚本能够执行“发送”方法之前，在触发提交事件之后页面可能会重新加载。为避免这种情况，您可以使用“hitCallback”机制，即阻止提交，调用 ga send-method 并在回调中提交表单数据。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-15T10:32:03.007

我搞定了——我的例子是使用新的 Universal Analytics。

```
<script type="text/javascript">
    function sliderOnChange() {
    var period = window.convertDays(($("#PeriodSlider").slider("value")));
    var amount_of_credit = $("#AmountOfCreditSlider").slider("value");
    var gaEventInput = "£" + amount_of_credit + " for " + period;
    ga('send', 'event', 'slider', 'sliding', gaEventInput);
}
</script> 
```

1.  确保 Google Analytics / Google Tag Manager 过滤器不排除来自不同域的任何流量。（也许您正在测试它以使其使用不同的域工作）
2.  在 ga('create', 'UA-39570713-1', 'site.com') 中重新检查您的 GA id 和域；
3.  在 Google Analytics (GA) 中创建一个新的配置文件以进行测试，并在您在 GA 中定义的同一域中调试您的 html。
4.  在 GA 中将日期更改为今天 - 您可能还需要等待一段时间才能在 GA 中显示

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-27T14:39:42.233

我建议通过 GTM 发送 GTM 事件，`window.dataLayer.push({ event: 'EVENT_NAME', ...data })`并在 GTM 中创建触发器以触发将事件发送到 Google Analytics 的标签。您将通过 GTM 预览获得最佳调试体验，并且您将确保事件将从 GTM 发送到 GA，因为 GTM 会处理这些。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-05T12:54:18.323

onclick ga() 函数对我不起作用，我还在`<head>`部分添加了“analytics.js” -

```
<a mat-list-item routerLink='/dashboard' onclick="ga('send', 'event', 'Dashboard', 'Click', 'demoClick, 30);">
   <mat-icon color="accent">home</mat-icon>
   <span class="side-item">Dashboard</span>
</a> 
```

gtag() 函数对我来说工作正常，只有在部分中添加的“gtag.js” `<head>`，不需要或可以删除​​“analytics.js”-

```
<a mat-list-item routerLink='/dashboard' id="sideNavDashboard" onclick="gtag('event', 'Click', {'event_category':'Dashboard', 'event_label':'demoClick', 'value':'30'});">
   <mat-icon color="accent">home</mat-icon>
   <span class="side-item">Dashboard</span>
</a> 
```

结果（谷歌分析输出） -

[![在此处输入图像描述](https://i.stack.imgur.com/zklIu.png)](https://i.stack.imgur.com/zklIu.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-22T14:47:45.593

我看到了除事件（实时和报告）之外的所有内容。我的步骤包括：

*   打电话给谷歌，他们发现我的谷歌优化的 GTM 标记正在阻止所有事件发送到分析。
*   从谷歌标签管理器中删除了优化标签，事件开始在分析中弹出。

如果您遇到此问题，请尝试暂停一些标签。还将事件标签连接到某个目标。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-15T10:54:39.560

我正在使用 Vue.js，似乎我每次都必须创建 ga，即使它已经在窗口上创建：

```
ga('create', yourGtagId, 'auto');
ga('send', {}); 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2015-12-16T00:37:17.617

就我而言，它不起作用，因为我直接从文件系统加载了 HTML 文件。

**通过网络服务器加载页面就可以了。**

对于本地开发，像[https://github.com/tj/serve](https://github.com/tj/serve)这样的工具做得很好。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2013-06-18T20:23:00.770

我解决问题的唯一方法是回滚到以前版本的 Analytics（非测试版）：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39570713-2']);
  _gaq.push(['_setDomainName', 'optimino.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2013-10-11T09:13:24.927

您还可以使用我为新的 Universal Analytics 编写的 jquery 插件： [https ://github.com/pascalvgemert/jquery-analytics-event-tracking](https://github.com/pascalvgemert/jquery-analytics-event-tracking)

# sql - 将大量数据从 Oracle 中的表导出到平面文件

> ID：15744045
> 
> 赞同：0
> 
> 时间：2013-04-01T13:05:25.837
> 
> 标签：sql, oracle, batch-file

我正在使用 Oracle 11g。我的要求是比较两个不同数据库的数据。每个数据库中大约有 350 个表，在这 350 个表中，大约有 40 个表有超过 100 万条记录。对于数据比较，我编写了一个 perl 脚本来使用哈希进行比较，并用少量文件进行了测试。另外，尝试使用 unix awk 命令来检查性能，并在这个论坛上询问了 unix 解决方案并得到了很好的帮助。

现在我的问题是找出从表中提取数据到文件的最佳方法。
两个数据库都有相同数量的表，每个表在两个数据库中都有相同数量的列，即两个数据库中的布局完全相同。
我认为和搜索的选项是
1) 使用 sqlloader - 我认为在这种情况下性能会很差
2) 使用数据泵 - 不确定我是否可以使用数据泵通过 sql 提取几组列并加载到文本文件中
3)使用批量收集——同上。是否可以从每个表的列集中提取每个表。如果是，怎么做。还有什么表现。
4) sqlplus 或其他任何东西。我无法在我的机器上为此下载任何软件。

用于从每个表中为两个数据库选择一组列的基本 sql 可以轻松完成。我正在寻找将数据导出到平面文件的最佳方法。
请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:13:00.617

最便宜的基本方法（对于开发人员来说肯定是）是比较事物集合而不是文件的字符串评估。没有什么可以比数据库本身更快（并且代码更少）比较事物的集合。使用数据库链接和明智地使用 MINUS 和 INTERSECT 运算符是实现这一目标的非常有力的手段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:05:19.603

尝试使用下面的 SQL，这应该是最快的方法，因为您将在数据库中工作。通过其他数据库中的 DB 链接访问该表。

select * from (( select * from Table_In_Schema1 减去 select * from Table_In_Schema2) union all ( select * from Table_In_Schema2 减去 select * from Table_In_Schema1) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:02:45.943

您可以使用 DBMS_COMPARISON 在数据库中执行此操作。

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_comparison.htm#CHDHEFFJ](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_comparison.htm#CHDHEFFJ)

# asp.net - 如何在 Asp.NET MVC 中使用 RedirectToAction() 传递多个对象？

> ID：15744054
> 
> 赞同：11
> 
> 时间：2013-04-01T13:06:35.467
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想使用 redirectToAction() 方法传递多个对象。以下是我要重定向到的操作结果。

```
public ActionResult GetEmployees(Models.Department department, Models.Category category, Models.Role role)
        {  

return View();
} 
```

我想做类似下面的事情

```
public ActionResult test()
{
Models.Department dep = new Models.Department();
Models.Category cat.......etc

return RedirectToAction("GetEmployees", dep, cat, role); } 
```

任何帮助将不胜感激 - 谢谢

**更新**

我可以使用类似的东西吗

```
 Models.Department dep = new Models.Department() { DepId = employee.DepartmentId };
                    Models.Category cat = new Models.Category() { CatId = employee.JobCategoryId };
                    Models.Role title = new Models.Role() { RoleId = employee.JobTitleId };

            return RedirectToAction("GetEmployees", new { department = dep, category = cat, role = title }); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T13:20:16.433

您不能将对象传递给 RedirectToAction 方法。此方法旨在仅传递参数。因此，您需要在相应的 GET 请求中传递您想要发出的所有值：

```
return RedirectToAction("GetEmployees", new 
{
    DepId = dep.DepId,
    DepName = dep.DepName,
    CatId = cat.CatId,
    RoleId = role.RoleId,
    ... so on for each property you need
}); 
```

但更好的方法是只发送这些对象的 id：

```
return RedirectToAction("GetEmployees", new 
{
    DepId = dep.DepId,
    CatId = cat.CatId,
    RoleId = role.RoleId
}); 
```

然后在目标控制器操作中使用这些 id 从您的底层数据存储中检索实体：

```
public ActionResult GetEmployees(int depId, int catId, int roleId)
{
    var dep = repository.GetDep(depId);
    var cat = repository.GetCat(catId);
    var role = repository.GetRole(roleId);
    ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T14:50:13.793

这本身不是一个答案，但我一直看到与此类似的问题，这些问题归结为对 HTTP 工作原理的基本误解或缺乏理解。这不是批评，许多 Web 开发人员认为他们只需要知道 HTML、JavaScript 和 CSS 就可以创建一个网站，但他们忽略了真正了解其代码运行*平台的必要性。*这样看：在不了解目标平台（Windows、Mac、iOS、Android 等）的情况下，您不会坐下来开始编写应用程序。你*必须*知道每个人如何处理内存、垃圾收集、存储等，以便编写任何可以构成任何东西的东西。

这同样适用于网络。它是一个分布式平台，但仍然是一个平台，了解底层结构的工作原理很重要。我显然不会在这里详细说明这一点。有关 HTTP 和相关技术的整卷书。有关更多信息，我强烈建议您阅读[O'Reilly 的 HTTP: The Definitive Guide 之](https://rads.stackoverflow.com/amzn/click/com/1565925092)类的内容。

至于您的问题，HTTP 实现了各种“动词”，其中最常见的是 GET 和 POST。简单地说，GET 是对要返回的资源的非易失性请求，而 POST 是易失性的（将进行更改、删除资源等）。使用 GET 没有请求“正文”。一个请求可以由不同的部分组成，一个 URL、标头和正文。在 POST 中，发布的数据将构成请​​求正文，但 GET 没有发布的数据，因此没有请求正文。现在，再次，我们在这里简单地说。您可能想知道查询字符串。那不是“发布的数据”吗？从技术上讲，是的，它可以是，但从技术上讲，URL 中的任何内容（或者如果我们真的想要准确的话，就是 URI）是*现有的标识数据的一部分*资源。例如，当您在 Google 上进行搜索时，您的搜索查询将附加到搜索结果页面的 URI。这*是*发布的数据（您发布了查询），但不仅仅是数据，带有查询字符串的 URI 给出了与该确切查询相对应的资源的位置。输入相同查询的其他人将被发送到相同的 URL。

这有点切题，但重要的是要了解查询字符串不是传递不相关数据的方式。查询字符串是 URI 的一部分，因此使用两个不同查询字符串加载的确切页面是*两个*完全不同的资源。

继续前进，重定向不是某种特殊类型的请求（在由不同的 HTTP 动词表示的意义上）；它只是对客户端浏览器的一个指令，它应该向指定的 URL 发出另一个 GET 请求。您无法控制使用的动词：它始终是 GET。所以，你不能为了兜风而传递任何东西。如果您有将由被重定向到的 URI 表示的对象，那么显然您将使用 URI 路径和/或查询字符串传递检索它们所需的*标识*信息（id、slug 等）。如果存在与所表示的资源不直接相关的任何数据，则该数据必须进入某种其他类型的存储系统，例如会话。

# zooming - 在定义的缩放级别上显示/隐藏 kml

> ID：15744056
> 
> 赞同：0
> 
> 时间：2013-04-01T13:06:42.933
> 
> 标签：zooming, openlayers, kml

我正在尝试根据 OpenLayers 中的缩放级别隐藏/显示我自己的 kml 文件（多边形） - 当达到某个缩放级别时，应该隐藏一层并显示另一层。到目前为止，我找到了这个解决方案（[如何根据缩放级别加载图层？](https://stackoverflow.com/questions/10720670/openlayer-how-i-can-control-the-zoom)），但它似乎不适用于我的情况。我对 javascript 比较陌生，我不知道我是否正确使用了这个，我还对示例进行了一些更改：

```
map.events.register("zoomend", map, zoomChanged);   //inserted in function init()

function zoomChanged()
    {
      if (map.getZoom() == 18)
      {
      kml1.setVisibility (true);
      kml2.setVisibility (false);
      }
      else if (map.getZoom() == 19)
      {
      kml1.setVisibility (false);
      kml2.setVisibility (true);
      }
    } 
```

我还尝试了另一种隐藏 kml1 的解决方案，但在这种情况下，我的图层没有被绘制。LayerSwitcher 工作 - 图层在定义的缩放级别中不可选择，但在缩小时没有任何可见（当图层已经可选择时）：

```
var kml1 = new OpenLayers.Layer.Vector("prehled", 
                {minScale: 1000,},                                //1:1000
                {
                projection: map.displayProjection,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "kml/zahrada.kml",
                    format: new OpenLayers.Format.KML({
                        extractStyles: true,
                        extractAttributes: true,
                    })
                })
            });
    map.addLayer(kml1); 
```

感谢您对此的任何回应和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:29:44.923

尝试：

```
var kml1 = new OpenLayers.Layer.Vector("prehled", {
            minResolution: map.getResolutionForZoom(18), // or the desired maximum zoom
            projection: map.displayProjection,
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "kml/zahrada.kml",
                format: new OpenLayers.Format.KML({
                    extractStyles: true,
                    extractAttributes: true
                })
            })
        });
map.addLayer(kml1); 
```

```

# nhibernate - NHibernate：如何在投影中选择根实体

> ID：15744057
> 
> 赞同：5
> 
> 时间：2013-04-01T13:06:46.570
> 
> 标签：nhibernate, projection, nhibernate-criteria, rowcount, data-paging

Ayende 描述了一种非常好的获取页数的方法，以及单个查询中的特定数据页：

[http://ayende.com/blog/2334/paged-data-count-with-nhibernate-the-really-easy-way](http://ayende.com/blog/2334/paged-data-count-with-nhibernate-the-really-easy-way)

他的方法如下：

```
IList list = session.CreateQuery("select b, rowcount() from Blog b")
              .SetFirstResult(5)
              .SetMaxResults(10)
              .List(); 
```

唯一的问题是这个例子是在 HQL 中，我需要在 ICriteria 查询中做同样的事情。为了实现与 ICriteria 的等价物，我需要执行以下操作：

```
IList list = session.CreateCriteria<Blog>()
              .SetFirstResult(5)
              .SetMaxResults(10)
              .SetProjection(Projections.RootEntity(), Projections.SqlFunction("rowcount", NHibernateUtil.Int64))
              .List(); 
```

问题是没有 Projections.RootEntity() 这样的东西。有没有办法选择根实体作为投影列表中的投影之一？

是的，我知道我可以只使用 CriteriaTransform.TransformToRowCount() 但这需要执行两次查询 - 一次用于结果，一次用于行数。使用 Futures 可能会有所帮助，将其减少到一次往返，但它仍在 SQL Server 上执行两次查询。对于密集查询，这是不可接受的。我想避免开销，并在同一个查询中返回行数和结果。

基本问题是：使用 ICriteria，有没有办法同时选择根实体和其他投影？

编辑：一些相关链接：

[https://nhibernate.jira.com/browse/NH-1372?jql=text%20~%20%22entity%20projection%22](https://nhibernate.jira.com/browse/NH-1372?jql=text%20~%20%22entity%20projection%22)

[https://nhibernate.jira.com/browse/NH-928](https://nhibernate.jira.com/browse/NH-928)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T20:46:14.877

我实现了一个 RootEntityProjection。您可以尝试代码，您可以在以下位置找到该代码：[http](http://weblogs.asp.net/ricardoperes/archive/2014/03/06/custom-nhibernate-criteria-projections.aspx) ://weblogs.asp.net/ricardoperes/archive/2014/03/06/custom-nhibernate-criteria-projections.aspx 。让我知道它是否有帮助。

# c# - System.Convert.ToSingle(value) 总是抛出 FormatException

> ID：15744063
> 
> 赞同：0
> 
> 时间：2013-04-01T13:06:57.403
> 
> 标签：c#, formatexception

我有几个`strings`需要转换为`float`. 当我尝试这样做时，使用`System.Convert.ToSingle(MyString)`，我总是得到一个`FormatException`.

我什至尝试创建类似 , 的字符串`"12.123"`，以确保数字没问题，但我又遇到了异常。我的问题是，那么正确的格式是什么？字符串中的数字应该是什么格式？

我将转换的许多字符串之一的示例：50.105128

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:09:28.117

这可能取决于您系统的文化，可能设置为使用 a`,`作为分隔符。将格式设置为`InvariantCulture`将使用 a`.`作为分隔符。

```
Convert.ToSingle("12.123", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:09:32.350

这取决于文化，但您可以通过这种方式使用不变量：

```
Convert.ToSingle("0", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:09:15.993

Convert.ToSingle 对区域性敏感。在您机器上安装的文化中，小数分隔符可能与逗号不同，数字可能看起来像 50,105128

改用这个重载，它允许指定文化：

```
public static float ToSingle(
    Object value,
    IFormatProvider provider
) 
```

# android - 无法检查 sdcard 上的文件是否存在

> ID：15744064
> 
> 赞同：2
> 
> 时间：2013-04-01T13:07:01.013
> 
> 标签：android, file

我正在尝试简单检查文件是否存在。我在这里看到了类似的问题，但它们没有帮助。当我运行我的应用程序时，应用程序崩溃并且我收到消息“不幸的是，fileCheck1 已停止”。我在模拟器和智能手机上都遇到了这个错误。

我的代码：

```
package com.example.fileCheck1;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.widget.TextView;

import java.io.File;

public class MyActivity extends Activity {

    TextView msgText;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        msgText = (TextView) findViewById(R.id.textView);
        String Path = Environment.getExternalStorageDirectory().getPath()+"/ping.xml";
        File file = getBaseContext().getFileStreamPath(Path);
        if(file.exists()){
            msgText.setText("Found");
        }
        if(!file.exists()){
            msgText.setText("Not Found");
        }
    }
} 
```

在我的清单中，此类权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:13:37.450

我认为问题就在这里：

```
getBaseContext() 
```

它被分配到哪里**`NULL`**。你真的不需要这条线。你可以简单地实现你的目标

```
String path = Environment.getExternalStorageDirectory().getPath() + "/ping.xml";
File f = new File(path);
if (f.exists()) {
   // do your stuff
}
else {
  // do your stuff
} 
```

## 更新：

如果您或其他人拥有三星 Galaxy S3，请按照@Raghunandan 的回答，因为在这种情况下会`getExternalStorageDirectory()`返回内部存储器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T13:19:46.073

我有 android 4.1.2 的三星 Galaxy s3。我的内部手机内存命名为 sdcard0 和我的外部卡 extSdCard。

```
Environment.getExternalStorageDirectory() 
```

所以上面返回sdcard0的路径，它是手机内部存储器

所以得到你可以使用下面的实际路径

```
String externalpath = new String();
String internalpath = new String();

public  void getExternalMounts() {
Runtime runtime = Runtime.getRuntime();
try
{
Process proc = runtime.exec("mount");
InputStream is = proc.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
String line;

BufferedReader br = new BufferedReader(isr);
while ((line = br.readLine()) != null) {
    if (line.contains("secure")) continue;
    if (line.contains("asec")) continue;

    if (line.contains("fat")) {//external card
        String columns[] = line.split(" ");
        if (columns != null && columns.length > 1) {
            externalpath = externalpath.concat("*" + columns[1] + "\n");
        }
} 
        else if (line.contains("fuse")) {//internal storage
        String columns[] = line.split(" ");
        if (columns != null && columns.length > 1) {
            internalpath = internalpath.concat(columns[1] + "\n");
        }
    }
}
}
catch(Exception e)
{
    e.printStackTrace();
}
  System.out.println("Path  of sd card external............"+externalpath);
  System.out.println("Path  of internal memory............"+internalpath);
} 
```

一旦你得到路径

```
 File file = new File(internalpath+"/ping.xml");// internalpath or external path
    if(file.exists()){
        msgText.setText("Found");
    }
    else{
        msgText.setText("Not Found");
    } 
```

**更新 ：**

不推荐上述解决方案。可能效果不好。`Environment.getExternalStorageDirectory()`将始终返回外部存储的路径。在大多数情况下，它是一个 SD 卡。

从文档

> 公共静态文件getExternalStorageDirectory()
> 
> 在 API 级别 1 中添加 返回主外部存储目录。如果该目录已被用户安装在他们的计算机上、已从设备中删除或发生了其他问题，则该目录当前可能无法访问。您可以使用 getExternalStorageState() 确定其当前状态。
> 
> 注意：不要被这里的“外部”这个词弄糊涂了。最好将此目录视为媒体/共享存储。它是一个文件系统，可以保存相对大量的数据，并且在所有应用程序之间共享（不强制执行权限）。传统上这是一张 SD 卡，但它也可以作为设备中的内置存储实现，与受保护的内部存储不同，并且可以作为文件系统安装在计算机上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:14:59.737

检查这个：

```
 File file = new File(Environment.getExternalStorageDirectory()+"/ping.xml");
    if(file.exists()){
        msgText.setText("Found");
    }
    else{
        msgText.setText("Not Found");
    } 
```

# javascript - 如何使用 AppleScript 以编程方式关闭仪表板？

> ID：15744065
> 
> 赞同：1
> 
> 时间：2013-04-01T13:07:04.443
> 
> 标签：javascript, applescript

我正在开发一个小型仪表板小部件，允许用户打开系统首选项窗格。

打开首选项窗格没问题（但看起来很糟糕：p）

```
widget.system('osascript ' +
              '-e \'tell app "system preferences" to activate\'' +
              '-e \'<snip…&gt; open correct pane\'') 
```

问题是即使首选项窗格打开，仪表板也保持打开状态。

我找到了打开它的方法：

```
tell app "Dashboard" to launch 
```

但无法**关闭**它，`close`引发异常并且`quit`什么都不做：/

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:18:00.247

尝试：

```
tell application "Dashboard" to launch
delay 3
tell application "Finder" to activate 
```

或者也许是击键...

```
tell application "System Events" to key code 53 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T15:35:37.033

虽然发送密钥代码 111 对我有用，因为它可以打开和关闭仪表板，但它并不能真正让您控制状态。有时您希望能够关闭 Dashboard，但如果它已经关闭，您不想重新打开它（键码 111 可以）。

而是使用键码 27 或 ESCAPE：

```
tell application "System Events" to key code 27 
```

如果仪表板打开，它将关闭仪表板，但如果它已经关闭，则不应执行任何操作。

我在连接到电视的 Mac 上定期使用此技术，以便通过关闭仪表板并重新打开它来刷新仪表板小部件。

```
tell application "System Events" to key code 27
delay 3
tell application "Dashboard" to launch 
```

# android - CountDownTimerWithPause 的问题

> ID：15744070
> 
> 赞同：0
> 
> 时间：2013-04-01T13:07:13.363
> 
> 标签：android, timer, countdown

我正在尝试使用这个计时器，就像在这个问题上建议的那样：

[https://stackoverflow.com/questions/13806545/how-to-extend-countdown-timer-with-pause，](https://stackoverflow.com/questions/13806545/how-to-extend-countdown-timer-with-pause)

但没有按预期工作。暂停/恢复工作正常，但如果我取消并重新创建计时器，则计数从上次暂停时间开始。我需要从初始值开始。例如，计数器的初始值为 3 分钟。如果我在 2 分钟时暂停它，那么当我尝试再次创建它时，它会从 2 分钟开始。有什么帮助吗？

```
 public class MainActivity extends ButtonMethods implements OnClickListener {

    private CountDownTimerWithPause timerPausable = null;
    int milis = 180000;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

timerPausable = new CountDownTimerWithPause(milis, 1000, true)
{

            @Override
            public void onTick(long millisUntilFinished)
            {
                timer.setText("" + millisUntilFinished / 1000);
            }

            @Override
            public void onFinish()
            {
                timer.setText("180");
                DisableRandomButtons();
@Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.bNewWord:

                if(clicked == false){
                    clicked = true;
                    timerPausable.create();             
                }
                else{
                    clicked = false;
                    timerPausable.cancel();
                    timerPausable=null;
                    milis=180000;
                    timerPausable.create();
            }
             break;
             case R.id.imageView2:
        tapsound.start();
        if(isclicked == false){
            isclicked = true;
            timerPausable.pause();
                   }
        else{
            isclicked = false;
        timerPausable.resume();
            }
            break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:15:06.143

如果没有看到您的代码，很难说出您的确切问题是什么，但我所做的是调用`cancel()`我的计时器然后使其等于`null`重置它。我的有点不同，我处理它`onBackPressed()`

```
@Override
public void onBackPressed()
{
    super.onBackPressed();
    timer.cancel();          // timer is a reference to my inner CountDownTimer class
    timer = null;
    secs = 10;
} 
```

我想这就是你要找的。这个对我有用。

# sql - 在 sql-case 中更好地使用冗余子查询

> ID：15744084
> 
> 赞同：0
> 
> 时间：2013-04-01T13:08:22.680
> 
> 标签：sql, sql-server, case

我有一个关于 SQL 语句的问题：是否可以“定义一个子查询”以防万一。这听起来有点令人困惑，但是通过以下示例，我认为我的想法很清楚：

```
select 
 Column1,
 Column2,
 Case
    WHEN <BigSubquery> > 0 THEN <BigSubquery>
    ELSE 0
 END
from ... 
```

我该怎么做，或者我可以使用什么。我有这样一个查询，效果很好，但它是一个巨大的代码，不能用于维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:17:40.687

如果您使用子查询，则应将条件*放在*子查询中。例如，如果您有：

```
(select sum(x) from . . . ) 
```

然后做：

```
(select (case when sum(x) > 0 then sum(x) else 0 end) from . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:17:43.960

如果您将查询重写为

```
select 
   Column1,
   Column2,
   Case
       WHEN Column3 > 0 THEN Column3
       ELSE 0
   END
from 
(
    select 
        Column1,
        Column2,
        BigSubquery as Column3
    from ...
)
t 
```

然后你避免重复“BigSubquery”，但你确实复制了选择列表。

# spring - 错误运行spring程序-应用程序上下文错误

> ID：15744086
> 
> 赞同：0
> 
> 时间：2013-04-01T13:08:25.893
> 
> 标签：spring

我是 spring 新手，我正在尝试执行一个程序，但出现以下错误

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:273)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4350)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

我已将所有 jar 保存在 lib 中，我的 web.xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"   
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
<welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list> 
```

有人可以向我解释一下有什么问题吗？

# python - 使用 NumPy 和 PyQt4 重复显示随机噪声图像

> ID：15744087
> 
> 赞同：1
> 
> 时间：2013-04-01T13:08:28.697
> 
> 标签：python, numpy, pyqt, scipy

我无法重复使用 QTimer

1.  生成一个高×宽×3的numpy数组
2.  将 numpy 数组转换为 Qt 友好的图像，以及
3.  在 Qt 主窗口中显示图像

（最终图像不会是随机的。）

这是相关的代码。

```
import numpy as np
from scipy.misc.pilutil import toimage
from PIL.ImageQt import ImageQt

def nparrayToQPixmap(arrayImage):
    pilImage = toimage(arrayImage)
    qtImage = ImageQt(pilImage)
    qImage = QtGui.QImage(qtImage)
    qPixmap = QtGui.QPixmap(qImage)
    return qPixmap

class DetectionWidget(QtGui.QWidget):

    def __init__(self):

        super(DetectionWidget, self).__init__()
        self.timer = QtCore.QTimer()
        self.init_UI()

    def init_UI(self):

        self.setFixedSize(self.WIDTH, self.HEIGHT)
        self.label = QtGui.QLabel(self)
        self.label.resize(self.WIDTH, self.HEIGHT)

        self.timer.timeout.connect(self.onTimeout)

        self.timer.start(1000)

    def onTimeout(self):

        npImage = np.random.rand(self.HEIGHT, self.WIDTH, 3)
        qPixmap = nparrayToQPixmap(npImage)
        self.label.setPixmap(qPixmap) 
```

这将显示第一张图像，但 Python 在第二次迭代时出现分段错误`self.label.setPixmap(qPixmap)`。此外，即使我不更新标签而是使用 保存图像，它也会出现分段错误`qPixmap.save(...)`，这让我认为生成的 qPixmap 在第一次迭代后以某种方式损坏。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:40:37.010

这似乎是因为`QImage`to`QPixmap`转换中的错误。只要`QImage`格式正确，代码就可以工作..

```
qImage = QtGui.QImage(qtImage) 
```

变成

```
qImage = QtGui.QImage(qtImage).convertToFormat(QtGui.QImage.Format_ARGB32) 
```

# c# - ServiceStack：在存在时从目录提供静态文件？

> ID：15744093
> 
> 赞同：3
> 
> 时间：2013-04-01T13:08:55.407
> 
> 标签：c#, servicestack

我正在将我的独立本地 Web 服务器转换为使用 ServiceStack 来服务所有页面和资源。

我从这个问题中看到

[使用 servicestack 提供静态文件](https://stackoverflow.com/questions/12120276/serving-a-static-file-with-servicestack)

使用 Service Stack 很容易为单个静态文件提供服务。

在我自己开发的实现中，在检查 URL 是否与任何特定处理程序（相当于 ServiceStack 路由）匹配后，默认处理程序会检查其 HttpData 目录中的静态文件以匹配 URL。

如果该文件不存在，则会生成 404 错误。

如果没有其他服务匹配，使用 ServiceStack 从文件系统提供文件的最佳模式是什么？请注意，我在没有 IIS 的情况下以独立模式使用它。

这些文件可以是 HTML、PNG、JS 和少数其他内容类型。

注意：我看到 ServiceStack.Razor 包*可能*有助于我的要求，但我找不到它的文档。我将提出一个单独的问题。

*编辑*：我在这个问题中找到了参考

[使用 ServiceStack 为根路径“/”创建路由](https://stackoverflow.com/questions/13480673/create-route-for-root-path-with-servicestack)

表示

> 注册一个`IAppHost.CatchAllHandlers`- 这被称为不匹配的请求。

到目前为止，我还没有找到任何关于*如何*进行此注册的文档或示例。注意：我是独立运行的，所以它需要在 C# 中完成，而不是使用 XML。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T01:11:17.317

经过大量研究，我发现以下似乎有效。

# 配置

在`AppHost`构造函数中：

```
 CatchAllHandlers.Add(
                    (httpMethod, pathInfo, filePath) => 
                        Tims.Support.StaticFileHandler.Factory(
                            Params.Instance.HttpDataDir, 
                            "/", 
                            pathInfo
                    )
                ); 
```

# 工厂

检查文件是否存在，并返回适当的处理程序，如果不处理文件（因为它不存在），则返回 null。这很重要，这样其他 url（例如`/metadata`继续工作。

# 处理程序

实际处理程序的核心方法非常简单。`ProcessRequest`通过使用适当的资源类型覆盖和返回文件的字节，工作就完成了。为简单起见，此版本不包括任何用于缓存目的的日期处理。

# 示例代码

```
public class StaticFileHandler : EndpointHandlerBase
{
    protected static readonly Dictionary<string, string> ExtensionContentType;

    protected FileInfo fi;

    static StaticFileHandler()
    {
        ExtensionContentType = new Dictionary<string, string>       (StringComparer.InvariantCultureIgnoreCase) 
        {
            { ".text", "text/plain" },
            { ".js", "text/javascript" },
            { ".css", "text/css" },
            { ".html", "text/html" },
            { ".htm", "text/html" },
            { ".png", "image/png" },
            { ".ico", "image/x-icon" },
            { ".gif", "image/gif" },
            { ".bmp", "image/bmp" },
            { ".jpg", "image/jpeg" }
        };
    }

    public string BaseDirectory { protected set; get; }
    public string Prefix { protected set; get; }

    public StaticFileHandler(string baseDirectory, string prefix) 
    {            
        BaseDirectory = baseDirectory;
        Prefix = prefix;
    }

    private StaticFileHandler(FileInfo fi)
    {
        this.fi = fi;
    }

    public static StaticFileHandler Factory(string baseDirectory, string prefix, string pathInfo)
    {
        if (!pathInfo.StartsWith(prefix, StringComparison.InvariantCultureIgnoreCase))
        {
            return null;
        }

        var fn = baseDirectory + "/" + pathInfo.After(prefix.Length);

        var fi = new System.IO.FileInfo(fn);

        if (!fi.Exists)
        {
            return null;
        }

       return new StaticFileHandler(fi);
    }   

    public override void ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, string operationName)
    {
        using (var source = new System.IO.FileStream(fi.FullName, System.IO.FileMode.Open))
        {
            var bytes = source.ReadAllBytes();
            httpRes.OutputStream.Write(bytes, 0, bytes.Length);
        }

        // timeStamp = fi.LastWriteTime;                        

        httpRes.AddHeader("Date", DateTime.Now.ToString("R"));
        httpRes.AddHeader("Content-Type", ExtensionContentType.Safeget(fi.Extension) ?? "text/plain");                       
    }

    public override object CreateRequest(IHttpRequest request, string operationName)
    {
        return null;
    }

    public override object GetResponse(IHttpRequest httpReq, IHttpResponse httpRes, object request)
    {
        return null;
    }
} 
```

# c++ - 以后如何实例化数组的大小？

> ID：15744096
> 
> 赞同：2
> 
> 时间：2013-04-01T13:09:04.007
> 
> 标签：c++

假设我有一个名为的基类

```
Class Base {
public:
    std::string array[];
}; 
```

字符串数组的大小直到另一个类扩展它才决定，这样做的正确语法是什么？

EG，稍后在派生类中

```
Derived::Derived() {
    array[] = new array[40];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T13:10:55.233

如果你想使用 C 风格的数组，大小必须是固定的，并且**在编译时是已知的**。即使在这种情况下，您也可以改用更安全、零开销的`std::array<>`包装器。

*如果在编译时不*知道容器的大小，那么最好使用`std::vector`（或者`std::deque`在某些情况下，根据您在内存分配方面的要求）并避免通过原始指针进行手动内存管理，`new[]`并且`delete[]`：

```
#include <string> // For std::string
#include <vector> // For std::vector

class Base {
public:
    std::vector<std::string> myVector;
}; 
```

此外，这种设计不需要在`Derived`. 如果 的默认构造函数所做的`Derived`只是分配数组，那么现在您可以完全避免显式定义默认构造函数，并让编译器为您隐式生成一个 - 析构函数也是如此。

另外，我不鼓励您使用标准容器类的名称（如`array`）作为变量的名称。类似`myArray`（或`myVector`，如我上面的示例）是更合适的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T13:12:08.987

你没有。C++ 中的数组具有编译时固定大小。你不能只是根据自己的喜好调整它们的大小。

仅使用语言功能来做到这一点的糟糕方法是让您的成员成为`std::string*`：

```
std::string* array; 
```

然后动态分配一个s数组`std::string`，将指向第一个元素的指针分配给`array`：

```
Derived::Derived() {
    array = new std::string[40];
} 
```

做到这一点的好方法是使用库功能。标准库提供容器类型供您使用。尝试`std::vector<std::string>`：

```
std::vector<std::string> array; 
```

您可以将其初始化为包含 40 个字符串，如下所示：

```
Derived::Derived()
  : array(40)
{ } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T13:11:27.813

为什么不使用 a`std::vector<std::string>`这样您就不必担心尺寸了。容器在插入新东西时自动调整大小。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-01T13:11:29.920

使用字符串向量通常是更好的解决方案。

但这会起作用：

```
Class Base {
Public:
    std::string *array;
};
Derived::Derived() {
    array = new array[40];
} 
```

我要补充：

```
Class Base {
Public:
    std::string *arr;
    Base():arr(nullptr){}
    Base(sizr_t s):arr(new std::string[s]){}
    ~Base(){delete []arr;}
};
Derived::Derived():Base(40) {  } 
```

您可能需要编写复制/移动构造函数和赋值。派生不必了解太多。现在比较：

```
Class Base {
Public:
    std::vector<std::string> arr;
    Base(){}
    Base(sizr_t s):arr(s){}
}; 
```

所有其他特殊函数：析构函数、复制/移动构造函数和赋值由编译器生成。Derived 的构造函数仍然是： Derived::Derived():Base(40) { } 另外...您可能希望将 arr 设为私有或至少受保护？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T13:11:34.860

正确的语法是

```
std::vector<std::string> array; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T13:19:52.557

除了完成到死堆分配之外，您还可以静态调整它的大小，如下所示：

```
template <int N>
class Base
{
  public:
    std::string array[N];
};

class Derived : Base<40>
{ ... } 
```

优点：简单，避免（相对较慢）运行时的内存分配和清理的麻烦（智能数组指针或其他）。缺点： Base 的每个实例化都是不同的类型，这可能会导致更多的膨胀和更少的互操作性。

# c# - 在“系统”中找不到类型或命名空间名称“linq”

> ID：15744100
> 
> 赞同：0
> 
> 时间：2013-04-01T13:09:14.953
> 
> 标签：c#, msbuild

我试图了解使用 Microsoft Build Engine（也称为 MSBuild）构建 C# 项目的过程，但我遇到了问题。问题很简单，我想我只是不明白一些事情。

我编写了一个由 2 个 .cs 文件组成的简单程序。第一个文件是“MathOp.cs”。在这个文件中，我定义了 2 个函数：add(double num1, double num2) 和 multiply(doble, double); 第二个文件是“Program.cs”。在这里，我定义了两个变量，我将它们传递给添加放在 MathOp 文件中的函数并获取 rezult；这个程序是正确的。

然后我编写了一个简单的 msbuild 文件，在其中定义了要构建的任务和目标。当我在 Visual Studio 命令提示符下启动它时，我得到错误 cs0234：在系统命名空间中找不到类型或命名空间名称 Linq。最有趣的是我在 msbuild 文件中引用了 System.dll 等。如果我在 Program.cs 文件中评论 using 指令，这个错误就会消失。

```
<Project DefaultTargets="Compile"
xmlns="http://schemas.microsoft.com/developer/msbuild/2003" >
<PropertyGroup>
    <AssemblyInfo>Build</AssemblyInfo>
    <builtdir>Build\</builtdir>
</PropertyGroup>

<ItemGroup>
    <CSFile Include="msbuildTest\Program.cs"/>
    <CSFile Include="msbuildTest\Properties\AssemblyInfo.cs"/>
    <CSFile Include="msbuildTest\MathOp.cs"/>

    <Reference Include="System.dll"/>
    <Reference Include="System.Data.dll"/>
    <Reference Include="System.Drawing.dll"/>
    <Reference Include="System.Windows.Forms.dll"/>
    <Reference Include="System.XML.dll"/>
</ItemGroup>

<Target Name="PreBuild">
    <Exec Command="if not exist $(builtdir) md $(builtdir)"/>
</Target>

<Target Name="Compile" DependsOnTargets="PreBuild">
    <Csc Sources="@(CSFile)"
        References="@(Reference)"
        OutputAssembly="$(builtdir)$(MSBuildProjectName).exe"
        TargetType="exe"/>
</Target>

<Target Name="Clean" >
    <Exec Command="DEL $(builtdir)$(AssemblyInfo).exe"/>
</Target>
<Target Name="Rebuild" DependsOnTargets="Clean;Compile"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:02:43.223

在当前状态下，msbuild 将使用来自 .Net **2.0**的 CSC ，它对 Linq 一无所知。

解决问题的最简单方法是在 msbuild 项目中指定 4.0 版本，从而强制 msbuild 使用正确的 CSC 版本：

```
<Project ToolsVersion="4.0"
    DefaultTargets="Compile"
    xmlns="http://schemas.microsoft.com/developer/msbuild/2003" > 
```

# php - 狮身人面像搜索结果未显示值

> ID：15744102
> 
> 赞同：0
> 
> 时间：2013-04-01T13:09:20.910
> 
> 标签：php, centos, sphinx

我已经配置了狮身人面像中的所有内容并旋转了索引。但是当我搜索狮身人面像服务器（终端命令）时，它只显示匹配计数，如下所示，我不知道这个问题。

```
[root@phpsalzer server]# sudo search -i gplay 'Cut the Rope'
Sphinx 2.0.4-id64-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/etc/sphinx/sphinx.conf'...
index 'gplay': query 'Cut the Rope ': returned 2 matches of 2 total in 0.000 sec

displaying matches:
1\. document=6, weight=10515
2\. document=3, weight=9482

words:
1\. 'cut': 5 documents, 15 hits
2\. 'the': 72 documents, 2162 hits
3\. 'rope': 4 documents, 12 hits 
```

在上面的结果中，它没有显示文档值。请就这个问题向我提出建议。

注意：我在 CENTOS 上使用最新版本的 sphinx 运行 sphinx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:56:59.160

就像 Colin 提到的那样，sphinx 不存储被索引的原始文本 - 称为字段。由于未存储不能退回。

但是如果你想可以将它们存储在属性中，以避免不得不回到数据库中。

属性可以在结果集中返回

# paypal - 我使用哪些信息来测试使用 PayPal Payments Pro 的信用卡交易

> ID：15744104
> 
> 赞同：0
> 
> 时间：2013-04-01T13:09:22.943
> 
> 标签：paypal, paypal-sandbox

我花了大约一个小时试图找出在 PayPal 沙盒环境中测试信用卡交易的信息。无论我尝试什么，我都会收到“无法处理此交易的无效数据”。错误。我正在使用经典 API。

我在我的开发者帐户中使用 Visa 信用卡创建了一个个人验证帐户，但系统生成的信用卡信息产生了相同的错误。这是帐户的屏幕： [https ://www.evernote.com/shard/s141/sh/e2a7147c-9cfb-4587-814d-13fdd97d1c29/a1e3d97e505071d6f927a71195f06f2f](https://www.evernote.com/shard/s141/sh/e2a7147c-9cfb-4587-814d-13fdd97d1c29/a1e3d97e505071d6f927a71195f06f2f)

搜索后我发现这篇文章[https://www.x.com/developers/paypal/forums/paypal-sandbox/how-test-sandbox-paypal-using-pay-credit-card](https://www.x.com/developers/paypal/forums/paypal-sandbox/how-test-sandbox-paypal-using-pay-credit-card) 然后我登录到那个沙盒帐户，去了到 Profile > Credit/Debit Cards > Add a Card，选择 Visa，但信用卡号并没有像我希望的那样预先填充。这是一个屏幕： [https ://www.evernote.com/shard/s141/sh/5cfce2b8-da2f-4147-abf5-5d742995b3ca/6d6e1541cbb5809e0e14972d2d81f4bb](https://www.evernote.com/shard/s141/sh/5cfce2b8-da2f-4147-abf5-5d742995b3ca/6d6e1541cbb5809e0e14972d2d81f4bb)

我现在真的很茫然。任何帮助将非常感激 ：）

PS 我已经尝试过像 4444333322221111 这样的陈词滥调测试号码，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:34:25.357

尝试使用其中一些测试信用卡号。如果它仍然不起作用，您能否提供您发送的 API 请求，以及您返回的完整 API 响应，我会在我这边进行查找，看看是什么导致了问题。

Visa 测试卡号 - CVV2 可以使用 123，到期日期可以使用任何有效的未来日期。

4916064324171157
4916884530887530
4024007135477981
4556908617562966
4929631921286961
4916781542208590
4502888845652562
4532975922625589
4024007116051706
4485137169794373

# java - 将对象转换为整数或字符串的问题

> ID：15744105
> 
> 赞同：0
> 
> 时间：2013-04-01T13:09:25.167
> 
> 标签：java

我必须为控制台菜单应用程序实现一个接口 IExecutable。我正在实现的方法是：**Object execute(Object o);** 所以我显示菜单。我从控制台读取了一个可能是整数或字符串的菜单选项。在执行时我有这个错误： **java.lang.String 不能转换为 java.lang.Integer** 问题是哪种是进行这种转换的最佳方式。

控制台菜单.java

```
public Object execute(Object o) {
        show();
        o = read();
        try{
            int choice = Integer.parseInt((String) o); // error on this line
            IExecutable menuOption = getMenuOptions(choice);
            if(menuOption != null){
                o = menuOption.execute(o);
                return o;
            }
              } catch(Exception e){
            System.out.println("Invalid option"+ e.getMessage());       
        }

        return null;
    }

private static IExecutable getMenuOptions(int i){
    for(MenuOptions option :  options){
        if(option.getKey() == i && option.getIsActive()){
            return option;

        }
    }
    return null;
}

public static Object read(){
        String option = null;
        BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
        try {
                option = buffer.readLine();
                return option;

            } 
        catch (IOException e) {
            System.out.println("IOException " +e.getMessage());
        }
        return null;
    } 
```

主.java

```
public class Main {

    public static void main(String[] args) {
        Integer i = new Integer(1);
        ConsoleMenu menu = new ConsoleMenu("MATH OPERATIONS");
        menu.addMenuOption(new SubOption());
        menu.addMenuOption(new AddOption());
        i = (Integer) menu.execute(i);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:13:46.643

在您的错误行：

```
if (o != null && o instanceof Integer){
    Integer choice = (Integer)o;

    //complete here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:15:34.087

当您调用时，您假设 o 实际上是一个字符串`(String) o`

下面是从 Object 获取 String 或 Integer 对象的更具表现力的方式

```
String.class.cast(o);
Integer.class.cast(o); 
```

我认为为此，尽管您可能还必须使用`instanceOf`运算符来知道要执行上述哪个操作。instanceOf 不是这样做的好方法（请参阅[Is instanceof 被认为是不好的做法？如果是，在什么情况下 instanceof 仍然更可取？](https://stackoverflow.com/questions/2750714/is-instanceof-considered-bad-practice-if-so-under-what-circumstances-is-instan)），有些人会做任何事情来避免它。在您当前的设计中，我认为您必须包含一个 instanceOf 检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:19:42.590

> 我从控制台读取了一个可能是整数或字符串的菜单选项

如果用户可以输入 3 或 X 作为菜单选项，则不应将获得的值解析为整数。

如果您有 MenuOptions 的代码，请将其 key 属性更改为字符串而不是整数。如果您不这样做，则可能需要快速修复

```
private static IExecutable getMenuOptions(String i){
     for(MenuOptions option :  options){
        if(i.equals(option.getKey()+"")) && option.getIsActive()){
            return option;
        }
    }
    return null;
} 
```

可以称为

```
IExecutable menuOption = getMenuOptions((String) o); 
```

# php - 如何在 PHP 上对 SimpleXMLElement 进行排序

> ID：15744106
> 
> 赞同：3
> 
> 时间：2013-04-01T13:09:25.087
> 
> 标签：php, xml, sorting

我想知道如何使用 PHP 对简单的 XML 元素进行排序。是的，我找到了一些解决同一主题的线程——但我无法解决我的问题。

我要排序的 XML 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<cursos>
  <curso>
    <id>DRW</id>
    <nome>Design Responsivo</nome>
    <categoria>Web</categoria>
    <inicio>30/02/2013</inicio>
    <periodo>Sábados de manhã</periodo>
    <cargaHoraria>40h</cargaHoraria>
    <objetivos></objetivos>
  </curso>
  <curso>
    <id>MSQ</id>
    <nome>MySQL</nome>
    <categoria>Banco de dados</categoria>
    <inicio>30/03/2013</inicio>
    <periodo>Sábados de manhã</periodo>
    <cargaHoraria>20h</cargaHoraria>
    <objetivos></objetivos>
  </curso>
  <curso>
    <id>MBY</id>
    <nome>Iniciação à informática</nome>
    <categoria>Iniciantes e Usuários Av.</categoria>
    <inicio>30/04/2013</inicio>
    <periodo>Matutino 1</periodo>
    <cargaHoraria>80h</cargaHoraria>
    <objetivos></objetivos>
  </curso>
  <curso>
    <id>FCS</id>
    <nome>Desenvolvendo em C#</nome>
    <categoria>Desenvolvimento</categoria>
    <inicio>14/04/2013</inicio>
    <periodo>Domingo</periodo>
    <cargaHoraria>60h</cargaHoraria>
    <objetivos></objetivos>
  </curso>
  <curso>
    <id>MAY</id>
    <nome>Modelagem em Maya</nome>
    <categoria>Artes gráficas</categoria>
    <inicio>13/04/2013</inicio>
    <periodo>Sábado 08h:00-13h:00</periodo>
    <cargaHoraria>60h</cargaHoraria>
    <objetivos></objetivos>
  </curso>
</cursos> 
```

我找到[了这个](https://stackoverflow.com/questions/2119686/sorting-an-array-of-simplexml-objects)和[这个](https://stackoverflow.com/questions/3023029/php-sorting-issue-with-simplexml)解决方案，但是在多维 XML 数组上应用它的逻辑对我来说并不清楚。有人能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:30:47.080

使用 SimpleXML 进行排序没有真正简单的方法。您必须使用元素创建一个数组，对它们进行排序，然后重建 XML：

```
$d = simplexml_load_string($xml);
// turn into array
$e = array();
foreach ($d->curso as $curso) {
        $e[] = $curso;
}
// sort the array
usort($e, function($a, $b) {
        return $a->cargaHoraria - $b->cargaHoraria;
});
// put it back together
echo '<cursos>';
foreach ($e as $node) {
        echo $node->saveXML();
}
echo '</cursos>'; 
```

# c# - 如何通过c#将字符串传递给批处理文件以及批处理文件如何接受字符串参数？

> ID：15744118
> 
> 赞同：3
> 
> 时间：2013-04-01T13:10:26.657
> 
> 标签：c#, batch-file, command-line-arguments

我在 C# 项目中的场景是用户将路径传递`"c:\homedir\mydir"`给批处理文件，然后批处理文件应该接受此路径并在指定路径创建目录。

我不知道如何通过 c# 将字符串传递给批处理文件以及批处理文件将如何接受字符串并对其进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:17:59.633

创建一个流程并通过`StartInfo.Arguments`属性传递您的参数。

```
Process proc = new Process();
proc.StartInfo.FileName = //path to your BAT file
proc.StartInfo.Arguments = String.Format("{0}", @"C:\homedir\mydir");
//set the rest of the process settings
proc.Start(); 
```

这将加载您的 BAT 文件并传递您添加的任何参数。您的 BAT 文件可以使用`%1`第一个参数、`%2`第二个参数等访问参数...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:18:48.360

由于您没有向我们提供任何信息，因此我仅举一个这些主题的示例。

首先，您需要使用[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类包含`System.Diagnostics`命名空间。

> 提供对本地和远程进程的访问，并使您能够启动和停止本地系统进程。

带有批处理文件的示例：

```
 Process p = new Process();
 p.StartInfo.UseShellExecute = false;
 p.StartInfo.RedirectStandardOutput = true;
 p.StartInfo.FileName = "yourbatchfile.bat";
 p.Start(); 
```

对于传递参数，您可以使用[`ProcessStartInfo.Arguments`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments.aspx)属性。

> 获取或设置启动应用程序时要使用的命令行参数集。

# android - 将方形图像裁剪为圆形 - 以编程方式

> ID：15744119
> 
> 赞同：25
> 
> 时间：2013-04-01T13:10:30.860
> 
> 标签：android, image, android-canvas, crop

我正在寻找过去的一天，但没有成功。

我从 API 获取图像，然后使用以下代码将其下载到位图文件中。

```
private Bitmap DownloadImage(String URL) 
    {
        Bitmap bitmap = null;
        InputStream in = null;
        try 
        {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        }
        catch (IOException e1) 
        {
            e1.printStackTrace();
        }
        return bitmap;
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException 
    {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try 
        {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) 
            {
                in = httpConn.getInputStream();
            }
        }
        catch (Exception ex) 
        {
            throw new IOException("Error connecting");
        }
        return in;
    } 
```

我得到一个正方形的图像，我想裁剪四个角并使其成为圆形图像。有没有可能的方法来实现？

欢迎任何相关答案。提前致谢 。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-01-26T20:35:34.913

一旦检索到位图，[`RoundedBitmapDrawableFactory`](https://developer.android.com/reference/android/support/v4/graphics/drawable/RoundedBitmapDrawableFactory.html)就可以使用[`RoundedBitmapDrawable`](https://developer.android.com/reference/android/support/v4/graphics/drawable/RoundedBitmapDrawable.html)从[v4 支持库](http://developer.android.com/tools/support-library/features.html#v4)生成一个。然后`Drawable`可以将其应用于 a`ImageView`或直接绘制到 a `Canvas`。

```
// Create the RoundedBitmapDrawable.
RoundedBitmapDrawable roundDrawable = RoundedBitmapDrawableFactory.create(getResources(), bitmap);
roundDrawable.setCircular(true);

// Apply it to an ImageView.
ImageView imageView = (ImageView)findViewById(R.id.imageView);
imageView.setImageDrawable(roundDrawable);

// Alternatively, draw it to an canvas (e.g. in onDraw where a Canvas is available).
// setBounds since there's no View handling size and positioning.
roundDrawable.setBounds(left, top, right, bottom);
roundDrawable.draw(canvas); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-01T13:49:34.993

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        DrawingView dv = new DrawingView(this);
        setContentView(dv);
    }

    class DrawingView extends View {
        Bitmap bitmap;

        public DrawingView(Context context) {
            super(context);
            bitmap = BitmapFactory.decodeResource(context.getResources(),
                    R.drawable.glossy_overlay);

        }

        @Override
        public void onDraw(Canvas canvas) {
            Paint paint = new Paint();
            // paint.setColor(Color.CYAN);
            canvas.drawBitmap(getclip(), 30, 20, paint);
        }

        public Bitmap getclip() {
            Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
                    bitmap.getHeight(), Config.ARGB_8888);
            Canvas canvas = new Canvas(output);
            final int color = 0xff424242;
            final Paint paint = new Paint();
            final Rect rect = new Rect(0, 0, bitmap.getWidth(),
                    bitmap.getHeight());

            paint.setAntiAlias(true);
            canvas.drawARGB(0, 0, 0, 0);
            // paint.setColor(color);
            canvas.drawCircle(bitmap.getWidth() / 2,
                    bitmap.getHeight() / 2, bitmap.getWidth() / 2, paint);
            paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
            canvas.drawBitmap(bitmap, rect, rect, paint);
            return output;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-18T08:20:37.757

使用下面的函数在位图上画一个圆圈，然后将带圆圈的位图设置为 imageView

```
 public static Bitmap getClip(Bitmap bitmap) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
            bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        canvas.drawCircle(bitmap.getWidth() / 2f, bitmap.getHeight() / 2f,
            bitmap.getWidth() / 2f, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);
        return output;
    } 
```

注意：除数必须是浮点数

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-04T19:13:35.247

Roman Nurik 提出了一个非常直接的使用着色器来做类似的事情，带有一个自定义的可绘制对象。

我稍微更改了代码以制作椭圆形图像并进行了测试。效果和性能真的不错：

```
public  class StreamDrawable extends Drawable {
private static final boolean USE_VIGNETTE = true;

private final RectF mRect = new RectF();
private final BitmapShader mBitmapShader;
private final Paint mPaint;
private final int mMargin;

public StreamDrawable(Bitmap bitmap, int margin) {

    mBitmapShader = new BitmapShader(bitmap,
            Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setShader(mBitmapShader);

    mMargin = margin;
}

@Override
protected void onBoundsChange(Rect bounds) {
    super.onBoundsChange(bounds);
    mRect.set(mMargin, mMargin, bounds.width() - mMargin, bounds.height() - mMargin);

    if (USE_VIGNETTE) {
        RadialGradient vignette = new RadialGradient(
                mRect.centerX(), mRect.centerY() * 1.0f / 0.7f, mRect.centerX() * 1.3f,
                new int[] { 0, 0, 0x7f000000 }, new float[] { 0.0f, 0.7f, 1.0f },
                Shader.TileMode.CLAMP);

        Matrix oval = new Matrix();
        oval.setScale(1.0f, 0.7f);
        vignette.setLocalMatrix(oval);

        mPaint.setShader(
                new ComposeShader(mBitmapShader, vignette, PorterDuff.Mode.SRC_OVER));
    }
}

@Override
public void draw(Canvas canvas) {
    canvas.drawOval(mRect, mPaint);
}

@Override
public int getOpacity() {
    return PixelFormat.TRANSLUCENT;
}

@Override
public void setAlpha(int alpha) {
    mPaint.setAlpha(alpha);
}

@Override
public void setColorFilter(ColorFilter cf) {
    mPaint.setColorFilter(cf);
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T11:02:32.933

这可以简单地在 xml 中完成，请在此处查看我的答案： [https ://stackoverflow.com/a/18287979/665930](https://stackoverflow.com/a/18287979/665930)

```
<RelativeLayout
            android:id="@+id/icon_layout"
            android:layout_width="@dimen/icon_mask"
            android:layout_height="@dimen/icon_mask"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" >

            <ImageView
                android:id="@+id/icon"
                android:layout_width="@dimen/icon"
                android:layout_height="@dimen/icon"
                android:layout_centerInParent="true"
                android:scaleType="fitXY" >
            </ImageView>

            <ImageView
                android:id="@+id/icon_mask"
                android:layout_width="@dimen/icon_mask"
                android:layout_height="@dimen/icon_mask"
                android:layout_centerInParent="true"
                android:background="@drawable/circle"
                android:scaleType="fitXY" >
            </ImageView>

 </RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
    <gradient android:startColor="#00FFFFFF" android:endColor="#00FFFFFF"
        android:angle="270"/>
     <stroke android:width="10dp" android:color="#FFAAAAAA"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-19T15:24:21.383

我尝试了上面的解决方案，但没有一个对我有用。这是因为我的手机摄像头不拍摄方形图像，而只是拍摄矩形图像。因此，我在@actsai 解决方案中进行了一些更改，以始终采用次要尺寸，然后将图像裁剪成一个圆圈：

```
public static Bitmap getBitmapClip(Bitmap bitmap) {
    int maxLenth = bitmap.getWidth() <= bitmap.getHeight() ? bitmap.getWidth() : bitmap.getHeight();
    Bitmap output = Bitmap.createBitmap(maxLenth,
            maxLenth, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, maxLenth, maxLenth);

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    canvas.drawCircle(maxLenth / 2, maxLenth / 2,
            maxLenth / 2, paint);
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);
    return output;
} 
```

我使用以下比例属性用新的位图填充我的 ImageView：

```
<ImageView
    android:id="@+id/iv_photo"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:scaleType="fitXY" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-04T18:08:53.707

在寻找了很多答案之后，我想出了这个小技巧，它利用了 FrameLayout（将子视图叠加为堆栈）和椭圆形的笔画属性。这可以简单地在 XML 中完成，无需太多麻烦和第三方库。

1.  在 res/layout 目录下新建 Layout 资源文件“circle_image.xml”。
2.  在 circle_image.xml 中添加一个新的 FrameLayout 作为根视图。
3.  创建一个 ImageView（基础/背景）来保存您想要作为 FrameLayout 中的第一个子项裁剪的图像或图标。
4.  创建一个 ImageView（蒙版/前景）来保存将背景图像作为 FrameLayout 内的第二个/最后一个子元素的形状（椭圆形，其大小属性具有相同的高度和宽度）。

笔记：

我们这里的想法是排除圆圈周围的区域并显示圆圈内可见的图像内容）

5.  在 res/drawable 目录下新建 Drawable 资源文件“circle_mask.xml”。
6.  在 circle_mask.xml 中添加带有 android:shape="oval" 的新形状。
7.  为形状添加尺寸标签以指定高度和宽度必须相等（使其成为圆形）并应与其父 FrameLayout 匹配。
8.  为形状添加实心标签以指定圆内的透明度。10.为形状添加描边标签，这样就会有一个特定宽度（android：width）的环，其颜色由android：color属性指定。

笔记：

一种。stoke 标签中指定的颜色（描边颜色）是我们裁剪图像周围的**MaskColor/BackgroundColor 。**因为我希望这种颜色与作为 cardView 的基本视图的颜色相同。我使用了相同的颜色“白色”。

湾。宽度（笔画宽度）设置为一个很大的值，以至于它太厚了，中间有足够的空间容纳我们裁剪的图像。

C。在第 4 步中创建的 ImageView（顶部遮罩层）也通过指定一个比其父 FrameLayout 大得多的巨大尺寸来利用，使其扩展到 FrameLayout 尺寸之外。这用大笔画宽度环的颜色**填充**了我们感兴趣的区域。

circle_image.xml

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/icon_layout"
    android:layout_width="64dp"
    android:layout_height="64dp">

    <ImageView
        android:id="@+id/iv_profile_pic"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/ic_launcher_background"
        android:contentDescription="TODO"/>

    <ImageView
        android:layout_width="90dp"
        android:layout_height="90dp"
        android:layout_gravity="center"
        android:background="@drawable/circle"
        android:scaleType="fitXY" >
    </ImageView>
</FrameLayout> 
```

circle_mask.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <size android:width="64dp"
        android:height="64dp"/>
    <solid android:color="@android:color/transparent"/>
    <stroke
        android:width="18dp"
        android:color="@android:color/white" />
</shape> 
```

[![椭圆（圆形）形状和最终图像](https://i.stack.imgur.com/F0UsM.jpg)](https://i.stack.imgur.com/F0UsM.jpg)

# sql - Isolation level strategy for asp.net and sql server 2008

> ID：15744123
> 
> 赞同：0
> 
> 时间：2013-04-01T13:10:38.240
> 
> 标签：sql, sql-server-2008, ado.net

What should be ideal Isolation level strategy for asp.net and sql server 2008\. We use read-commited but it still hangs see ex below.

*   Table name - `Customers`
*   Isolation level - `Read Committed`

Transaction 1:

```
set transaction isolation level read committed
Begin Tran

UPDATE Customers
SET ordercount = 50 
WHERE id = 2

WAITFOR DELAY '000:00:20'
rollback tran 
```

Transaction 2:

```
set transaction isolation level read committed
Begin Tran

Select * From Customers 

Trans commited 
```

Transaction 2 hangs for 20 second!! How to handle this scenario?

Regards,

Chandan

# responsive-design - Getting Semantic Grids scss foundation 4 to work

> ID：15744125
> 
> 赞同：2
> 
> 时间：2013-04-01T13:10:42.310
> 
> 标签：responsive-design, sass, zurb-foundation

I have 3 sections that collapse under the default breakpoint but I do not know how to get it to collapse with my own css using scss.

default foundation grid that works well and collapses

```
 <div class="row">
  <div class="large-4 columns">...</div>
  <div class="large-4 columns">...</div>
  <div class="large-4 columns">...</div>
</div> 
```

I tried below out but but it doesn't seem to collapse

```
<div class="container">
  <div class="div1">...</div>
  <div class="div2">...</div>
  <div class="div3">...</div>
</div>

.container{
@include grid-row;

.div1 {
    @include grid-column(4);
}
.div2 {
    @include grid-column(4);
}
.div3 {
    @include grid-column(4);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:42:07.747

这是因为您正在为 grid-row 编写错误的 SCSS。

```
 @include grid-row(); 
```

不要使用@extend。这不是使用foundation4的方式... @extend 只是将您的样式填充到 .row 和 .column 中，这不是您想要做的，而是您想使用语义将这些样式以相反的方式粘贴到您的样式中代码，因此您可以稍后在 SCSS 中更改代码，并稍后更新。

以下是正确答案：

HTML

```
<div class="container">
  <div class="div1">...</div>
  <div class="div2">...</div>
  <div class="div3">...</div>
</div> 
```

SCSS

```
.container{
@include grid-row();

.div1, .div2, .div3 {
    @include grid-column(12);

    @media #{$medium-up} {
       @include grid-column(4);
    }

    @media #{$large-up} {
           @include grid-column(4);
    }
} 
```

}

注意：这是基础 5。您必须创建断点。如果您希望整个视图在移动设备中折叠或任何您想要的，您的移动断点应该有 12 列。这与

```
<div class="small-12 columns"> </div> 
```

如果你想要 4 列中等及以上你写：

```
<div class="small-12 medium-4 columns"> </div> 
```

所以要在没有帮助类的情况下写下这个，你可以这样写：

```
<div class="myclassname"> </div> 
```

SCSS代码是：

```
.myclassname {
    @include grid-column(12);

    @media #{$medium-up} {
       @include grid-column(4);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T11:49:26.377

我对此感到困惑，但后来发现这实际上是预期的行为。[这是来自官方 Foundation 网格文档](http://foundation.zurb.com/docs/components/grid.html)的引用：

> 我们将媒体查询排除在网格混合的代码之外。这将使您能够将 mixin 包含在您想要的任何断点中，让您完全控制。如果你想创建 10 个断点并在每个断点之间移动布局，无论如何。如果您只想使用默认断点，我们有相应的变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T02:31:20.097

请改用@extend。

```
 .container{
        @extend .grid;
        div{
            @extend .columns;
        }
    }
    .div1 {
        @extend .large-4;
    }
    .div2 {
        @extend .large-4;
    }
    .div3 {
        @extend .large-4;
    } 
```

我做了几个运行良好的混合，我认为这让它更容易： [https ://gist.github.com/jofralogo/5324278](https://gist.github.com/jofralogo/5324278)

# android - 三星 Galaxy Tab 2 7.0 API 级别/SDK 版本

> ID：15744126
> 
> 赞同：0
> 
> 时间：2013-04-01T13:10:43.580
> 
> 标签：android, api, sdk, android-emulator, tablet

我只是想知道三星 Galaxy Tab 2 7.0 的 API 级别或 SDK 版本是什么？希望你能帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:13:52.353

如果它仍在 Jellybean 4.1 上，那么它目前处于 API 级别 16。但由于我不知道它目前是否已升级，如果这是您的问题，我们可以从在线规范中得出结论。

[Galaxy Tab 2 7.0 更新](http://support.verizonwireless.com/pdf/system_update/galaxy-tab-2.pdf)

# c# - 如何将 radcombobox 添加到表格行单元格中的单元格

> ID：15744130
> 
> 赞同：1
> 
> 时间：2013-04-01T13:11:03.607
> 
> 标签：c#, asp.net, row, radcombobox

我正在尝试将 RadComboBox 添加到表格行单元格。我不能使用 table.row.cells.add(radcombobox) 因为它需要一个单元格对象。该表是以编程方式创建的。

```
protected override void Page_Init(object sender, EventArgs e) {
        base.Page_Init(sender, e);
        ConfigureTableColumns(DataContext, OperatingConditionsTable, node, segments);
        ConfigureTableRows(DataContext, OperatingConditionsTable, node, segments, inputs);
    }
private void ConfigureTableRows(CtalaDataContext context, Table table, Ctala.Entity.TreeNode reviewNode, IEnumerable<Ctala.Entity.TreeNode> segments, ILookup<string, OperatingConditionInput> inputsGroupedByCategory) {

        foreach (var category in inputsGroupedByCategory) {

            foreach (var input in category) {
                var row = new TableRow() {
                    CssClass = (altRow) ? "rgAltRow" : "rgRow"
                };
                table.Rows.Add(row);

                    var cell = new TableCell() {
                    Text = input.Name
                };
                row.Cells.Add(cell);

                var unitCell = new RadComboBox()
                {
                    ID = "Unit",
                    AllowCustomText = false
                };
                foreach (var item in input.Unit)
                {
                    unitCell.Items.AddRange(new RadComboBoxItem[] { new RadComboBoxItem(item) });
                }

                //cell = new TableCell()
                //{
                //    Text = input.Unit
                //};
                row.Controls.Add(unitCell);}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:40:38.760

请参阅[此链接](https://stackoverflow.com/questions/12216528/adding-and-maintaining-table-rows-and-cells-to-an-asp-net-table)。

要将 RadComboBox 添加到您的单元格：

```
RadComboBox comboBox = new RadComboBox
{
    ID = "Foo"
}

comboBox.Items.Add(new RadComboBoxItem((0).ToString(), "FirstItem"));

newCell.Controls.Add(comboBox); 
```

# c - Fork - Share list between forked process

> ID：15744132
> 
> 赞同：0
> 
> 时间：2013-04-01T13:11:06.863
> 
> 标签：c, fork, share

Im having troubles on figuring out how can I use a list I created between different processes. What I have is:

FileList.h - The list I created

```
#include "Node.h"
typedef struct FileList {
    struct Node *first;
    struct Node *last;
    int length;
} FileList;

void fl_initialize();
void fl_add(char name[], char up[], bool status);
void fl_edit(Node *n, char up[]);
void fl_remove (char name[]);
int fl_length();
void fl_clear();
void fl_print();
void fl_print_node(Node *n);
void fl_uncheck();
bool fl_clean_unchecked();
Node* fl_get(int pos);
Node* fl_find (char name[]); 
```

And in the FileList.cpp I create

```
FileList fl; 
```

And implement the prototyped functions.

I will simplify my main.cpp

```
#include "FileList.h"
int main (int argc, char *argv[]) {
    int r = fork();
    if (r == 0) {
        fl_initialize();
        call_function_that_add_list_elements();
        fl_print(); //List contains elements
    } else {
         waitpid(r, &status, WUNTRACED | WCONTINUED);
         if (WIFEXITED(status)) {
             fl_print(); //The list is empty (Is other list, probably);
             //another_function_that_should_keep_working_with_the_list();
         }
    }
} 
```

Why is this list not global once it is included as a header, therefore for father and children process, and how can I make it global?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:14:05.817

The process created by fork is a process and is not a thread. so you are talking about sharing list between process and not shared it between threads.

Sharing list between process directly is impossible. You have to use shared memory between proceess. You can use for example `mmap`

**Example** of how to use shared memory between process from [How to share memory between process fork()?](https://stackoverflow.com/questions/13274786/how-to-modify-a-global-variable-in-child-fork) :

You can use shared memory (`shm_open()`, `shm_unlink()`, `mmap()`, etc.).

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

static int *glob_var;

int main(void)
{
    glob_var = mmap(NULL, sizeof *glob_var, PROT_READ | PROT_WRITE, 
                    MAP_SHARED | MAP_ANONYMOUS, -1, 0);

    *glob_var = 1;

    if (fork() == 0) {
        *glob_var = 5;
        exit(EXIT_SUCCESS);
    } else {
        wait(NULL);
        printf("%d\n", *glob_var);
        munmap(glob_var, sizeof *glob_var);
    }
    return 0;
} 
```

# javascript - 在云中使用 DB sql 查询的 Chrome 扩展

> ID：15744133
> 
> 赞同：0
> 
> 时间：2013-04-01T13:11:13.920
> 
> 标签：javascript, json, model-view-controller, google-chrome-extension, cloud

我们想开发一个带有谷歌浏览器扩展的应用程序，它必须在云服务中执行查询密集型数据库。我有以下问题：

a) 可以使用 Chrome 扩展程序中的 javascript 来完成吗？b) 我明白我必须有一层应用程序逻辑，例如 MVC 控制器。还有哪些其他选择，哪一个更好？c) 考虑到响应速度很重要，最推荐哪种云服务（Oracle、Azure、Rackspace 等）？d) 建议和响应格式是 json？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:15:31.250

**a)**是的，可以使用 JavaScript 完成，您将向云上的服务器发送 AJAX 请求并返回响应。

**b)**哪一个更好可能会引起争论，最好的是，如果您检查选项并决定在您的特定用例中哪个更适合您自己。[以下是所有（大多数）](http://addyosmani.github.com/todomvc/) MV* JavaScript 框架的比较，以帮助您入门。

**c)**所有的云服务都有优点和缺点。我曾与 Azure 和 Heroku 合作，并取得了成功。这取决于您的需要，您使用的是什么服务器端语言？

**d）**您的响应的数据交换并不重要。JSON、XML、SEN 等等。JSON 非常标准，非常适合它，但是数据交换可以通过任何数据交换格式来完成。

# sphinx - How to Allow Special Characters(#,@,!,&,(,),%) as search keyword in Sphinx

> ID：15744134
> 
> 赞同：3
> 
> 时间：2013-04-01T13:11:19.353
> 
> 标签：sphinx

I have got struck with the implementation of allowing Special Characters(#,@,!,&,(,),%) as search keyword in Sphinx..

Please suggest me..

Below is the config file,

/* Starts */

```
source dbserver
{
    type                    =   mysql
    sql_host                =   localhost
    sql_user                =   root
    sql_pass                =   
    sql_db                  =   mydb
    #sql_sock               =   /var/run/mysqld/mysqld.sock
    sql_port                =   3306 
}

searchd
{
    listen                  =   localhost:3312
    # port                  =   9313
    log                     =                       /* some searchd.log path */
    query_log               =                   /* some query.log path */
    pid_file                =                   /* some searchd.pid path */
    max_matches             =   10000
    seamless_rotate         =   0
}

source  adsearch : mydbserver
{
    sql_query_post          = REPLACE INTO sph_tracker SELECT 1,'ad',CURRENT_TIMESTAMP;

    sql_ranged_throttle     = 1
    sql_attr_uint           = networkid
    sql_attr_uint           = folderid
    sql_attr_uint           = createdby
    sql_attr_uint           = status
    sql_attr_timestamp      = createdon
}

index index_adsearch
{
    source                  = adsearch
    path                    =           /* some path */
    morphology              = stem_en
    min_word_len            = 0
    #min_prefix_len         = 5
    min_infix_len           = 2
    enable_star             = 1
    preopen                 = 1
}

source delta_adsearch : adsearch
{
    sql_query   = DELETE FROM ad where status='Deleted' AND deleteflag='Y'                              
}

index delta_index_adsearch : index_adsearch
{
    source                  = delta_adsearch
    path                    =               /* some path */
}

source  tmplsearch : mydbserver
{
     sql_query_post         = REPLACE INTO sph_tracker SELECT 2,'template',CURRENT_TIMESTAMP;

    sql_ranged_throttle     = 1
    sql_attr_uint           = networkid
    sql_attr_uint           = industryid
    sql_attr_uint           = status
    sql_attr_timestamp      = createdon
    sql_attr_timestamp      = startdate
    sql_attr_timestamp      = enddate
    sql_attr_uint           = active
    sql_attr_uint   = primarysize
}

index index_tmplsearch
{
    source                  = tmplsearch
    path                    =               /* some path */
    morphology              = stem_en
    min_word_len            = 0
    #min_prefix_len         = 5
    min_infix_len           = 2
    enable_star             = 1
    preopen                 = 1
}

source delta_tmplsearch : tmplsearch
{
    sql_query   = DELETE FROM adtemplate where status='Deleted' AND deleteflag='Y'                              
}

index delta_index_tmplsearch : index_tmplsearch
{
    source                  = delta_tmplsearch
    path                    =               /* some path */
}

source  media_assets_search : mydbserver
{   
    #sql_query_post         = REPLACE INTO sph_tracker SELECT 3,'media',CURRENT_TIMESTAMP;

    sql_ranged_throttle     = 1
    sql_attr_uint           = networkid
    sql_attr_uint           = mediatype
    sql_attr_uint           = mediacat
    sql_attr_uint           = uploadedby
    sql_attr_uint           = active    
    sql_attr_uint           = industryid        
    sql_attr_timestamp      = uploaddate
    sql_attr_uint           = diskstore
}

index index_media_assets_search
{
    source                  = media_assets_search
    path                    =               /* some path */
    morphology              = stem_en
    min_word_len            = 0
    #min_prefix_len         = 5
    min_infix_len           = 2
    enable_star             = 1
    preopen                 = 1
}

source delta_media_assets_search : media_assets_search
{

}

index delta_index_media_assets_search : index_media_assets_search
{
    source                  = delta_media_assets_search
    path                    =                   /* some path */
} 
```

/* Ends */

Please have a look at this and suggest me..

Thanks,

Nagu..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:59:14.903

您需要将它们添加到 charset_table 配置中。

您可能还需要确保对查询进行转义以避免被误解为搜索语法。

虽然也确实阅读过 blend_chars

# javascript - 下载和打印 PDF 文档的链接（不含 PHP）

> ID：15744148
> 
> 赞同：-3
> 
> 时间：2013-04-01T13:12:09.310
> 
> 标签：javascript, pdf, hyperlink, download

你能帮我做两个不同的链接：一个启动打开/另存为pdf，另一个是打印对话框（例如在Adobe Reader应用程序中）

```
<a href="http://gasparean.com/resume.pdf">My Résumé</a> 
```

我的意思是，也许我需要以另一种方式将文件放在服务器上（例如，没有扩展名；请检查这里是如何完成的：http: [//gasparean.academia.edu/gasparean/CurriculumVitae](http://gasparean.academia.edu/gasparean/CurriculumVitae)

请注意，我使用的主机不支持 PHP，所以我需要一个没有该脚本的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:38:20.367

理想情况下，PHP 是最佳选择。如果您可以在您的服务器上使用 .htaccess 文件，或者您可以访问您的 Apache 配置文件，您可以在其中添加这一行：

```
AddType application/octet-stream .pdf 
```

注意：如果您在 .htaccess 中添加此内容，它将下载该目录中的任何 PDF ——如果您在 Apache 配置文件中设置此行，它将强制下载任何 PDF。

您可以使用 HTML5 下载属性，但目前仅在 Chrome 中真正有效...

```
<a href="http://gasparean.com/resume.pdf" download="resume">My Résumé</a> 
```

# ruby-on-rails - 无法在 faye 扩展中使用 current_user.id

> ID：15744149
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:12:13.627
> 
> 标签：ruby-on-rails, devise, faye

我正在使用设计和faye。我想跟踪所有在线用户。所以我想包括一个faye扩展。在 faye/faye_current_user.rb 中。当我在 faye_current_user.rb 中使用 current_user.id 时，它会抛出未定义的变量错误。

如果您有任何其他简单的方法来获取在线用户，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:50:45.963

问题是在 faye_current_user.rb 中的方法之前没有调用设计中的“current_user”方法。

一个可行的解决方案取决于该文件所在的位置以及在调用该文件中的方法之前如何设置 current_user。

# jqplot - Jqplot date line chart axis point not in corect position

> ID：15744150
> 
> 赞同：0
> 
> 时间：2013-04-01T13:12:16.013
> 
> 标签：jqplot

I'm used the following code to generate the jqplot line chart there is some issues occurred in y-axis point .the x-axis value 'feb,march,apr,may ' the first point showing correctly and other points are moving to between march and apr points.kindly refer the images for clarification .Please help me .Thank in advance

$(document).ready(function(){

```
 $.jqplot.config.enablePlugins = true;
var line1 = new Array(2);

var line1=[['2013-02-28',1756403],['2013-03-31',0],['2013-04-30',0]];
var line2 = new Array(2);
var line2=[['2013-02-28',107],['2013-03-31',0],['2013-04-30',0]];

    var plot1 = $.jqplot('chart', [line1,line2], {
 gridPadding:{right:35},
        axes:{
            xaxis:{
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                 tickOptions:{
                     formatString:'%b',
                     fontSize:'9pt',
                        fontFamily:'sans-serif',

                    tickInterval:'1 month'
},
  min:line1[0][0]

            },
            yaxis:{
                rendererOptions:{
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                    tickOptions:{
                        fontSize:'9pt',
                        fontFamily:'sans-serif',
                        formatString:'%i'

                    },
                    min: 1
            }
        },
        seriesColors: ["#49AD48", "#0BC2EF"],legend: {
        show: true
      },
        series:[{ lineWidth:4, markerOptions:{ style:'square' }, label: 'Actual'},{label: 'Plan' }],
         highlighter: {
        show: true,
        sizeAdjust: 7.5
      },
        cursor:{
            zoom:true,
            looseZoom: true,
            show:fals![enter image description here][1]e
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:40:06.107

我整个上午都在为此苦苦挣扎。虽然我的日期是由我的数据库动态生成的，但我将所有条目的时间默认为上午 8:00（如 jqplots 示例中所示）。

日期图不仅是日期，而且是时间敏感的。我的解决方案是将我所有绘图**的默认时间更改为上午 12:01**，现在它们在网格上排列。

如前所述，我使用 PHP 动态生成我的绘图数组，它们现在看起来像这样：

```
[chart1] => Array
    (
        [plots] => ['2013-04-02 12:01AM',11, 11], ['2013-04-03 12:01AM',95, 95], ['2013-04-19 12:01AM',325, 325], ['2013-04-22 12:01AM',90, 90], 
    ) 
```

# objective-c - Flip view controllers inside bigger view controller will flip the main view controller

> ID：15744152
> 
> 赞同：0
> 
> 时间：2013-04-01T13:12:16.910
> 
> 标签：objective-c, transition, viewflipper, flip

I want to flip a view controller which has smaller size than the screen. I am using *transitionFromViewController* but this would flip also the whole screen. And I want just the smaller view controller to be flipped.

First the login should be visible, after flipped the register view should be available!

My code is

```
- (void)showLogin {
    vcLogin = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
    [self.view addSubview:vcLogin.view];
    [self addChildViewController:vcLogin];

    if (IS_IPAD()) {
        vcLogin.view.center = self.view.center;
    }
}

- (void)showRegister {
    vcRegister = [[RegisterViewController alloc] initWithNibName:@"RegisterViewController" bundle:nil];
    [self.view addSubview:vcRegister.view];
    [self addChildViewController:vcRegister];

    if (IS_IPAD()) {
        vcRegister.view.center = self.view.center;
    }

    [vcLogin willMoveToParentViewController:nil];

    [self transitionFromViewController:vcLogin toViewController:vcRegister duration:0.5f options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{} completion:^(BOOL finished) {
        [vcLogin removeFromParentViewController];
        [vcRegister didMoveToParentViewController:self];
    }];
} 
```

I also tried with *[UIView transitionFromView:...]* but the result is the same! Any suggestions? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:43:10.393

你试过核心动画吗？您可能会使用类似下面的代码并拥有一个带有子视图的视图控制器。

```
 [UIView transitionFromView:viewOne
                        toView:viewTwo
                      duration:1.0f
                       options:UIViewAnimationOptionTransitionFlipFromRight | UIViewAnimationOptionShowHideTransitionViews
                    completion:(^(BOOL finished){
    })]; 
```

# mysql - 从 COALESCE 中减去

> ID：15744154
> 
> 赞同：1
> 
> 时间：2013-04-01T13:12:33.007
> 
> 标签：mysql, sql

我有一个看起来像这样的 SQL 查询：

```
SELECT 
COALESCE(field1, 0) AS field1, 
COALESCE(field2, 0) AS field2,
COALESCE(field3 - field1 - field2, 0) AS field
FROM ...

However the problem with it is that given say:

field1 = 1
field2 = 0
field3 = 2 
```

显示输出时，字段 3 显示 0，尽管 2 - 1 - 0 = 1。

COALESCE 用于我离开外部加入一些可能导致 Null 值的表。

如果 field3 为空，我也会有任何问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:13:43.750

独立进行合并：

```
SELECT COALESCE(field1, 0) AS field1, COALESCE(field2, 0) AS field2,
       COALESCE(field3, 0) - coalesce(field1, 0) - coalesce(field2, 0) AS field
FROM ... 
```

至于你的例子，我怀疑这`field2`实际上是`NULL`而不是 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:15:27.317

您不能使用在同一级别上给出的别名进行计算。您需要再次重复该函数或仅将主要计算包装在子查询中，

```
SELECT  field1, field2,
        field3 - (field1 + field2)
FROM
        (
            SELECT  COALESCE(field1, 0) AS field1, 
                    COALESCE(field2, 0) AS field2, 
                    COALESCE(field3, 0) field3
            FROM    TableName
        ) x 
```

原因是因为 SQL 操作的顺序如下：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

`ALIAS`在`SELECT`声明中给出，并且在它们创建的级别上无法访问。

# java - 检测方法时出现 Javaassist 源错误

> ID：15744161
> 
> 赞同：1
> 
> 时间：2013-04-01T13:12:46.233
> 
> 标签：java, reflection, instrumentation

我正在尝试在我的一个实体（com.xxx.entity.Order）中使用一种方法：

```
private String getLookupMethodString() {
    return new StringBuilder(
            "public java.lang.String lookupCustomValue(java.lang.String fieldName) throws java.lang.IllegalAccessException, java.lang.reflect.InvocationTargetException, java.beans.IntrospectionException {").append(
            "java.lang.String mappingFieldName =  \"value1\";").append(
            "com.xxx.entity.CustomFieldValue cfv = (com.xxx.entity.CustomFieldValue) new java.beans.PropertyDescriptor(\"customFieldValue\", getClass()).getReadMethod().invoke(this);").append(
            "return (java.lang.String) new java.beans.PropertyDescriptor(mappingFieldName, com.xxx.entity.CustomFieldValue.class).getReadMethod().invoke(cfv);}").toString();
}

public byte[] transform(ClassLoader clazzLoader, String className, Class<?> clazz, ProtectionDomain arg3, byte[] rawBytes) throws IllegalClassFormatException {
    CtClass cl = pool.makeClass(new java.io.ByteArrayInputStream(rawBytes));
    String lookupMethodString = getLookupMethodString();
    CtMethod lookupMethod = CtMethod.make(lookupMethodString, cl); // Error encountered at this line.
    cl.addMethod(lookupMethod);
} 
```

字段 customFieldValue 也已在此类中进行检测，因此我使用反射来获取其值。我在执行此操作时遇到的错误是：

```
[source error] invoke(com.xxx.entity.CustomFieldValue) not found in java.lang.reflect.Method 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:18:57.687

让它工作，问题在于调用方法的调用。当尝试调用第二个参数为 null 的调用方法时，它起作用了。（不太清楚为什么？）

```
return (java.lang.String) new java.beans.PropertyDescriptor(mappingFieldName, com.xxx.entity.CustomFieldValue.class).getReadMethod().invoke(cfv, null);}").toString(); 
```

# regex - 正则表达式从完整路径获取路径名

> ID：15744168
> 
> 赞同：0
> 
> 时间：2013-04-01T13:13:24.320
> 
> 标签：regex

谁能给我一些从完整路径获取路径的示例..例如

c:\aaa\bbb\c cc\file.exe

到

c:\aaa\bbb\c cc\

超过 1 个示例方法会很酷，但只能是正则表达式，这是针对一种称为 ICI 的语言，但它与 perl 和其他此类语言具有相似的正则表达式，这就是为什么我需要一些示例，至少一个会比另一个更好，并且我可以修改它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:15:59.647

组（1）会给你`c:\aaa\bbb\c cc`这个

```
(.*)\\\w*\. 
```

您可以使用

```
(.*\\)\w*\. 
```

如果你想捕捉最后一个`\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:20:07.037

这是一个逆正则表达式的基本示例（查找文件名）。只需在开始之前使用子字符串即可获取路径。

```
[\w]*[.][\w]*$ 
```

并且只有路径：

```
.*[\\] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:43:20.463

试试这个模式，它会帮助你充分

```
[^\\]+\\ 
```

# android - Activity SetContentView ResourcesNotFound Exception

> ID：15744170
> 
> 赞同：1
> 
> 时间：2013-04-01T13:13:35.510
> 
> 标签：android, android-layout, android-intent, android-contentprovider, android-resources

First of all before i wrote this question i had done my search a lot especially in this website but no solution is found. My problem is as the title says; **Just for one activity** in my program, this activity cant find resources.. Other than it, every activity can find it and works fine. I tried everything; "**Clean and rebuild**" ,"**Switch Workspace**" , adding "**com.myapp.R**" to top of the activity, **Redownload or Close/ReOpen Eclipse**" and many more.. I also checked the bug happens in menu folder in "main.xml" ">" instead "/>" anyway.... Please find a solution. Thanks

This is my activity;

```
import java.text.DecimalFormat;
import java.text.DecimalFormatSymbols;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Calculator extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculator);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    final DecimalFormat df = new DecimalFormat("0.00000",                               DecimalFormatSymbols.getInstance());
    DecimalFormatSymbols symbols = new DecimalFormatSymbols();
    symbols.setDecimalSeparator('.');
    df.setDecimalFormatSymbols(symbols);

    final EditText et = (EditText) findViewById(R.id.calc_me);
    final EditText et2 = (EditText) findViewById(R.id.calc_me2);
    Button copy = (Button) findViewById(R.id.buttonCopy);
    final TextView tv = (TextView) findViewById(R.id.calc_res);

    copy.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(tv.getText().toString().length() >=9)
            {
                String s = tv.getText().toString();
                s = s.substring(8,s.length());
                et.setText(s);
            }
        }
    }); 
```

This is my layout if needed

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:stretchColumns="*">

<TableRow android:layout_weight="1">
     <EditText
    android:id="@+id/calc_me" android:layout_width="match_parent"      android:layout_weight="1"
    android:layout_height="wrap_content" android:textSize="20sp" android:inputType="numberSigned|numberDecimal" />
    <EditText
    android:id="@+id/calc_me2"  android:layout_width="match_parent" android:layout_weight="1"
    android:layout_height="wrap_content" android:textSize="20sp" android:inputType="numberSigned|numberDecimal" />
 </TableRow>
<TableRow  android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_weight="1">
    <TextView android:id="@+id/calc_res" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_marginLeft="3dp"  android:layout_weight="2" android:textSize="20sp" android:text="Result: "/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonCopy" android:text="Copy"  android:layout_width="fill_parent"/>
</TableRow>
<TableRow  android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_weight="1">
    <Button android:layout_height="wrap_content" android:id="@+id/buttonSquare" android:text="√"  android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonPower" android:text="^" android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonPi" android:text="π"  android:layout_width="fill_parent"/>
</TableRow>
<TableRow  android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_weight="1">
    <Button android:layout_height="wrap_content" android:id="@+id/buttonSin" android:text="sin" android:layout_weight="1" android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonCos" android:text="cos" android:layout_weight="1" android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonTan" android:text="tan" android:layout_weight="1" android:layout_width="fill_parent"/>
</TableRow>
<TableRow  android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_weight="1">
    <Button android:layout_height="wrap_content" android:id="@+id/buttonPlus" android:text="+"  android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonMinus" android:text="-"  android:layout_width="fill_parent"/>
    <Button android:layout_height="wrap_content" android:id="@+id/buttonTimes" android:text="*" android:layout_width="fill_parent"/>
</TableRow>
<TableRow  android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_weight="1">
    <Button android:layout_height="wrap_content" android:layout_width="fill_parent"  android:id="@+id/buttonLog" android:text="Logb10"/>
    <Button android:layout_height="wrap_content" android:layout_width="fill_parent"  android:id="@+id/buttonE" android:text="e"/>
    <Button android:layout_height="wrap_content" android:layout_width="fill_parent"  android:id="@+id/buttonDivide" android:text="/"/>
</TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:38:31.767

嘿把这一行放在你的**xml**文件中。实际上你的 xml 文件有问题。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*" > 
```

经我测试工作完美。如果真的有帮助，请接受。

# php - Codeigniter + S3 - Image upload errors when tring putObject

> ID：15744172
> 
> 赞同：1
> 
> 时间：2013-04-01T13:13:36.447
> 
> 标签：php, codeigniter, amazon-s3

Im wondering if someone could give me a little help.

Im using CodeIgniter for my app .. and im also using the Amazon S3 library here -> [https://github.com/psugand/CodeIgniter-S3](https://github.com/psugand/CodeIgniter-S3)

Im using the following code to try to upload an image to my S3 account.

```
if ( $this->s3->putObject('filename.jpg', 'profile-images', 'images/filename.jpg, S3::ACL_PUBLIC_READ) ) {
    echo 'Ok';
} else {
    echo 'Fail';
} 
```

I am getting the following error back.

```
Message: S3::putObject(): [1] Protocol https not supported or disabled in libcurl 
```

Im wondering if anyone has come across this before?

Any help would be greatly appreciated.

Cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:02:17.923

创建一个名为 info.php 的脚本并将其`<?php phpinfo(); ?>.`保存在您网站的某个位置，以便您可以从浏览器访问它。

找到 curl 部分并检查支持哪些协议。如果 https 未列出，则 cURL 未使用 SSL 支持构建，您无法使用 https。

现在，如果 curl 不是使用 SSL 支持构建的，那么如果您在共享主机上，请请求您的主机重新编译 PHP，以便 PHP 和 curl 都使用 OpenSSL 支持构建，这样您就可以使用加密，否则您将需要找到另一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:55:41.997

似乎 cURL 扩展是在没有 https 支持的情况下编译的。如果您使用的是托管服务器，请询问他们是否可以在 cURL 中启用此协议，如果您正在运行自己的机器，只需重新编译 cURL 并支持 http 或安装相应的软件包。

# c# - Reading file in reverse

> ID：15744175
> 
> 赞同：0
> 
> 时间：2013-04-01T13:13:46.023
> 
> 标签：c#, filestream, reverse

Because BMP files are written from bottom to top (in terms of pixels), I need to read a BMP file in reverse (and get rid of the 54-byte header). My code so far:

```
public string createNoHeaderBMP(string curBMP)  //copies everything but the header    from the curBMP to the tempBMP
    {
        string tempBMP = "C:\\TEMP.bmp";

        Stream inStream = File.OpenRead(curBMP);
        BinaryReader br = new BinaryReader(inStream);

        byte[] fullBMP = new byte[(width * height * 3) + 138];
        byte[] buffer = new Byte[1];
        long bytesRead;
        long totalBytes = 0;

        while ((bytesRead = br.Read(buffer, 0, 1)) > 0)
        {
            fullBMP[fullBMP.Length - 1 - totalBytes] = buffer[0];
            totalBytes++;
        }

        FileStream fs = new FileStream(tempBMP, FileMode.Create, FileAccess.Write);
        fs.Write(fullBMP, 54, fullBMP.Length - 54);
        fs.Close();
        fs.Dispose();

        return tempBMP;
    } 
```

for some reason it fails to do the job completely, and this results in an image with part of the right side placed on the left. Why isn't it completely reversing the file? Also, these BMP files are very large (600MB), so I can't use a simple memorystream and do a seek and swap operation because I'll get the "Out of Memory" exception.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:42:49.230

我没有检查 BMP 规范，我对此一无所知。我只是假设你说的是真的。

大多数显示位图的程序只是读取标题以找出图像有多大，然后从上到下读取数据，而不是从下到上绘制位图。您还可以在大多数文件中查找。因此，您可以在其中使用`inStream`和查找，而无需将整个文件保存在内存中。

然后，如果您可以分配一个 600 MiB 的字节数组（即内存中的 600 MiB 结构），那么您肯定可以分配一个`MemoryStream`占用 600 MiB 内存空间的字节数组。或者，如果你得到一个`OutOfMemoryException`，那么无论你使用 a`byte[]`还是 a ，你都会得到它`MemoryStream`。后者更容易使用。

除非您意识到您还将每个像素的颜色从 RGB 格式（或目前的任何格式）反转为 BGR，否则您仅反转一切的想法将失败。而且我不确定 BMP 扫描线的方向，但如果它们从左到右运行，那么您的反转位图将使图像水平翻转。

将右侧图像的一部分显示在左侧的原因是因为您不能只反转位图的字节并期望它正确显示。此外，您可能在绘制时扫描线的长度错误。

此外，您说标头是 54 字节，但您将 138 字节添加到`fullBMP`. 检查你的常量：它们是否保证永远不会改变，然后让它们`const`. 他们可以改变吗？然后从位图中读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-09T15:50:32.650

[我在这里](https://stackoverflow.com/a/68319223/171846)发布了一个答案，用于反转大文件而不将其存储在 RAM 中。

你可以用它来做这样的事情（可能需要调整以获得正确的位图，如丹尼尔所说）：

```
using (var inputFile = File.OpenRead("input.bmp"))
using (var inputFileReversed = new ReverseStream(inputFile))
using (var outputFile = File.Open("output.bmp", FileMode.Create, FileAccess.Write))
{
    inputFile.Seek(headerSize, SeekOrigin.Begin); //skip the header
    inputFileReversed.CopyTo(outputFile);
} 
```

# c# - 使用 SolidColorBrush 填充矩形不起作用

> ID：15744178
> 
> 赞同：1
> 
> 时间：2013-04-01T13:13:50.547
> 
> 标签：c#, silverlight, windows-phone-7

我在将 a 分配给WP7 中对象`SolidColorBrush`的`Fill`属性时遇到问题。`Rectangle`

```
// sets the clock style (1-green, 2-blue, 3-red)
private void SetClockStyle(Int32 style)
{
    Color blue = new Color() { R = 0, G = 63, B = 216 };
    Color green = new Color() { R = 79, G = 255, B = 0 };
    Color red = new Color() { R = 255, G = 39, B = 0 };

    switch (style)
    {
        case 1:
            Fill(green);
            break;
        case 2:
            Fill(blue);
            break;
        case 3:
            Fill(red);
            break;
        default: 
            break;
    }
}

// sets a color
private void Fill(Color color)
{
    foreach (Rectangle rect in this.GetRectangles())
    {
        rect.Fill = new SolidColorBrush(color);
    }

    foreach (Rectangle rect in this.GetPoints())
    {
        rect.Fill = new SolidColorBrush(color);
    }
} 
```

当我调用`SetClockStyle(2)`程序流程很好时，会执行正确的部分。但是矩形没有填充（显示网格的背景颜色）。我尝试设置`Fill.Opacity`属性，但这并没有改变任何东西。我看不出问题出在哪里。通过 XAML设置`Fill`属性有效，但运行时的动态方法无效。

如何将特定颜色分配给对象的`Fill`属性`Rectangle`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:34:50.603

知道了。问题是 alpha 通道的默认值，设置为透明。使用这样的东西（注意添加的 A 值）：

```
Color red = new Color() { R = 255, G = 39, B = 0, A = 255 }; 
```

现在 alpha 通道设置为 255，这意味着不透明的纯色。

# java - Java JRadioButton

> ID：15744180
> 
> 赞同：0
> 
> 时间：2013-04-01T13:14:00.497
> 
> 标签：java, swing, jradiobutton

I have problem with this code when I click on file and click on new ,new panel comes to screen and when I want to change JRadioBox status to change Label status,Label status changes but also the panel goes away :(

```
public class MainClass {

    public static void main(String[] args) {
        new MainFrame();
    }
}

class Toolbar extends JPanel {

    private JRadioButton Status1;
    private JRadioButton Status2;
    private ButtonGroup radioButtonGroup;

    public Toolbar() {
        super();
        setLayout(new FlowLayout());
        Status1 = new JRadioButton("Status1");
        Status2 = new JRadioButton("Status2");

        radioButtonGroup = new ButtonGroup();
        radioButtonGroup.add(Status2);
        radioButtonGroup.add(Status1);

        Status1.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                MainFrame m = new MainFrame();
                m.l.setText("Status1");
            }
        });
        Status2.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                MainFrame m = new MainFrame();
                m.l.setText("Status2");
            }
        });

        add(Status1);
        add(Status2);
    }
}

 class Panel extends JPanel {

    public Panel() {
        super();
        setBackground(Color.MAGENTA);
    }

}

 class MenuBar extends JMenuBar {

    private JMenu menu;
    private JMenuItem fileItems;
    public boolean panel = false;

    public MenuBar() {
        super();
        menu = new JMenu("File");
        add(menu);
        fileItems = new JMenuItem("New");
        menu.add(fileItems);
        fileItems.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                MainFrame mf = new MainFrame();
                Panel p = new Panel();
                mf.addPanel(p);
                mf.add(new Toolbar(), BorderLayout.NORTH);
                repaint();
            }
        });
    }

}

 class MainFrame extends JFrame {

    public static JLabel l;
    public MainFrame() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(400, 400);
        l = new JLabel("No Status");
        add(l, BorderLayout.SOUTH);
        MenuBar mb = new MenuBar();
        setJMenuBar(mb);
        setVisible(true);
    }

    public void addPanel(Panel p) {
        add(p, BorderLayout.CENTER);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:25:48.770

停止到处制造新的 MainFrame。创建一次并在需要时维护它的句柄。

# jquery - jQuery/CSS Nav 不隐藏和水平位置的问题

> ID：15744181
> 
> 赞同：1
> 
> 时间：2013-04-01T13:14:02.323
> 
> 标签：jquery, css

更新：水平定位已解决，但仍然存在菜单不消失的问题。

更新的 JSFiddle：http: [//jsfiddle.net/trevoray/CrPdK/7/](http://jsfiddle.net/trevoray/CrPdK/7/)

我的导航遇到了两个无法解决的问题。任何人都可以看看并帮助我吗？

1.  水平位置。页面居中，所以我不知道确切的位置。我把它设为绝对，并认为它会基于它的父元素是绝对的，但它不起作用。无论用户的浏览器有多宽，我都需要水平位置始终相同。

2.  onmouseout 后菜单不会“隐藏”。似乎无法弄清楚如何让菜单始终如一地消失。

这是jsFiddle：

[http://jsfiddle.net/trevoray/CrPdK/2/](http://jsfiddle.net/trevoray/CrPdK/2/)

```
 #nav-about { z-index:4000; position:absolute; left:186px;  display:none;}
 #nav-meetings { z-index:4000; position:absolute; left:357px; display:none;}
 #nav-journal { z-index:4000; position:absolute; left:528px;  display:none;}
 #nav-goodstuff { z-index:4000; position:absolute; left:699px; display:none;}
 #nav-members { z-index:4000; position:absolute; left:819px; display:none;} 
```

![在此处输入图像描述](https://i.stack.imgur.com/efxs7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:26:29.107

更新了你的小提琴：

**演示**：http: [//jsfiddle.net/CrPdK/3/](http://jsfiddle.net/CrPdK/3/)

查看`mouseenter`and`mouseleave`函数，`#Meetings`并`#nav-meetings`为所有其他函数复制它。

不明白你的第一个要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:29:21.510

1.  相对于其父元素绝对定位元素。父元素需要`position: relative`

```
<div class="parent">
  <div class="absolute">
  </div>
</div> 
```

```
.parent { position: relative; }
.absolute { position: absolute; top: 10px; right; 20px } 
```

2\. 您已将`onmouseout`处理程序放到子菜单中。所以如果你用鼠标离开菜单点，什么都不会发生，如果你离开子菜单，子菜单会隐藏。

# 更新

我现在创建了一个工作示例：http: [//jsfiddle.net/VZ7qD/1](http://jsfiddle.net/VZ7qD/1)

注意事项：

1.  您实际上不需要 JavaScript。请参阅注释掉的最后一个 CSS 语句。这已经足够了，但是使用 CSS 显示时没有动画。（我个人觉得`slideDown`/`slideUp`比`show`btw 的默认动画更好。）
2.  JavaScript 将`mouseenter`/处理程序绑定到包含子菜单`mouseleave`的顶部导航元素。`li`子菜单是此项的子菜单`li`。
3.  我通过为所有元素应用一个灰色渐变来应用您的背景颜色和渐变，然后只向链接元素添加所需颜色的边框，而不是添加实际上是一种纯色的渐变区域。
4.  使用您的 ID 为所有子菜单中的链接定义自定义背景颜色（类似于顶部菜单项上的粗底边框）

# cassandra - How to set consistency level of column family using either cassandra-cli OR Hector

> ID：15744185
> 
> 赞同：2
> 
> 时间：2013-04-01T13:14:18.690
> 
> 标签：cassandra, hector

I cannot seem to find a way to do this. There is nothing in the documentation (except for CQL examples or thrift examples). Has anyone done this before? I want to set the consistency for read and write. Or even if you could tell me how do I pass the consistency level for each individual read / write, that would be great.

There exists a way to set the consistency level when the keyspace is created. But what about the case where the keyspace already exists and you want to update the consistency level for it. If it can't be done, then why is it so, since it should normally be available.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:52:23.303

Zanson 是正确的 - 一致性级别是在逐个查询的基础上确定的。因此，您执行的每个读取和写入查询都将指定其自己的一致性级别。我相信默认情况下这设置为 QUORUM。QUORUM 是根据 Keyspace 的复制因子计算的。

-> 复制因子在键空间级别定义。

-> 读/写一致性级别在查询点定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T07:49:46.883

这个问题在这里描述了[https://issues.apache.org/jira/browse/CASSANDRA-4734](https://issues.apache.org/jira/browse/CASSANDRA-4734) 他们删除了可用于设置每个请求的一致性级别（CL）（即在 CQL 中）。并决定将此设置在 Column Famaly (CF) 级别。

不幸的是:(

但是如果使用 php pro_cassandra - 你可以这样做：[https ://github.com/Orange-OpenSource/YACassandraPDO/issues/13](https://github.com/Orange-OpenSource/YACassandraPDO/issues/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:12:35.447

您想要更新复制因子。一致性级别是指单个查询。要从 cassandra-cli 更新复制因子，您需要使用“更新键空间”命令并更改策略选项。

```
UPDATE KEYSPACE demo WITH strategy_options = {replication_factor:1} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T10:15:46.687

您正在混淆一致性级别（指单个查询）和复制因子（在创建键空间时设置）。

要更改现有键空间的复制因子，请使用“alter keyspace”命令：

```
ALTER KEYSPACE demo WITH REPLICATION = {'class': 'SimpleStrategy', 'replication_factor': 1}; 
```

**资料来源：**

*   [更新复制因子 - Cassandra 1.2 的 CQL](http://docs.datastax.com/en/cql/3.0/cql/cql_using/update_ks_rf_t.html)
*   [更新复制因子 - Cassandra 2.0 和 2.1 的 CQL](http://docs.datastax.com/en/cql/3.1/cql/cql_using/update_ks_rf_t.html)

# php - Value in array getting un rounded

> ID：15744186
> 
> 赞同：0
> 
> 时间：2013-04-01T13:14:18.877
> 
> 标签：php, variables, rounding

Here is the code within a method of a class:

```
 $this->p($result);//die();
        $this->spreadSheet($result);  //die();
        $this->p($result);die(); 
```

Result of first print call(this->p)

```
Array
        (
            [0] => Array
                (
                    [BLOCK_ID] => 537-14547
                    [SawnOn] => Gang saw
                    [ORIG_VOLUME_BRUT] => 179.67
                    [ORIG_VOLUME_NET] => 103.38
                    [COUTS_TOTAUX] => 2413.92
                    [COUTS_TRANSPORT] => 0
                    [SLABCOUNT] => 20
                    [totalSlabVolume] => 117.48
                    [totalSurfaceArea] => 1127.78
                    [totalValue] => 9563.56
                    [RECEPTION_DATE] => 03/22/2013
                    [1st Quality] => 100
                    [Second Quality] => 0
                    [Standard Slab] => 0
                )

            [1] => Array
                (
                    [BLOCK_ID] => 618-11523
                    [SawnOn] => Gang saw
                    [ORIG_VOLUME_BRUT] => 241.46
                    [ORIG_VOLUME_NET] => 171
                    [COUTS_TOTAUX] => 11858.85
                    [COUTS_TRANSPORT] => 0
                    [SLABCOUNT] => 56
                    [totalSlabVolume] => 143.44
                    [totalSurfaceArea] => 2295.03
                    [totalValue] => 21687.43
                    [RECEPTION_DATE] => 03/29/2013
                    [1st Quality] => 91.07
                    [Second Quality] => 7.14
                    [Standard Slab] => 1.79
                )

            [2] => Array
                (
                    [BLOCK_ID] => 237-14593
                    [SawnOn] => Gang saw
                    [ORIG_VOLUME_BRUT] => 312.5
                    [ORIG_VOLUME_NET] => 260.23
                    [COUTS_TOTAUX] => 12061.66
                    [COUTS_TRANSPORT] => 0
                    [SLABCOUNT] => 40
                    [totalSlabVolume] => 160.27
                    [totalSurfaceArea] => 1538.55
                    [totalValue] => 14016.18
                    [RECEPTION_DATE] => 03/22/2013
                    [1st Quality] => 0
                    [Second Quality] => 17.5
                    [Standard Slab] => 82.5
                )

        ) 
```

Result of second print out:

```
Array
(
[0] => Array
    (
        [BLOCK_ID] => 537-14547
        [SawnOn] => Gang saw
        [ORIG_VOLUME_BRUT] => 179.67
        [ORIG_VOLUME_NET] => 103.38
        [COUTS_TOTAUX] => 2413.92
        [COUTS_TRANSPORT] => 0
        [SLABCOUNT] => 20
        [totalSlabVolume] => 117.48
        [totalSurfaceArea] => 1127.78
        [totalValue] => 9563.56
        [RECEPTION_DATE] => 03/22/2013
        [1st Quality] => 100
        [Second Quality] => 0
        [Standard Slab] => 0
    )

[1] => Array
    (
        [BLOCK_ID] => 618-11523
        [SawnOn] => Gang saw
        [ORIG_VOLUME_BRUT] => 241.46
        [ORIG_VOLUME_NET] => 171
        [COUTS_TOTAUX] => 11858.85
        [COUTS_TRANSPORT] => 0
        [SLABCOUNT] => 56
        [totalSlabVolume] => 143.44
        [totalSurfaceArea] => 2295.03
        [totalValue] => 21687.43
        [RECEPTION_DATE] => 03/29/2013
        [1st Quality] => 91.06999999999999
        [Second Quality] => 7.14
        [Standard Slab] => 1.79
    )

[2] => Array
    (
        [BLOCK_ID] => 237-14593
        [SawnOn] => Gang saw
        [ORIG_VOLUME_BRUT] => 312.5
        [ORIG_VOLUME_NET] => 260.23
        [COUTS_TOTAUX] => 12061.66
        [COUTS_TRANSPORT] => 0
        [SLABCOUNT] => 40
        [totalSlabVolume] => 160.27
        [totalSurfaceArea] => 1538.55
        [totalValue] => 14016.18
        [RECEPTION_DATE] => 03/22/2013
        [1st Quality] => 0
        [Second Quality] => 17.5
        [Standard Slab] => 82.5
    ) 
```

)

Now see the value for 1st quality in Array[1] of second output. It has changed from 91.07 to 91.0699999999. What could have possibly caused this?

Here is the code for the 2 methods called in the code above:

```
 function spreadSheet($blocks)
{
    $this->excel->getProperties()->setCreator("Maper")
        ->setLastModifiedBy("Maper")
        ->setTitle("Maper")
        ->setSubject("Maper")
        ->setDescription("Maper")
        ->setKeywords("Maper")
        ->setCategory("Maper");
     $i=1;
    $col='A';
    $columns = $this->tableHeadings;
    foreach ($columns as $column) {
        $this->excel->getActiveSheet()->setCellValue($col++ . $i, $column);
    }

    foreach($blocks as $columns)
    {
        $i++;
        $col = 'A';
        foreach($columns as $column)
        {
            if($col=='A')$sheetName=$column;
            $this->excel->getActiveSheet()->setCellValue($col++ . $i, $column);

        }
       $this->_addSheet($sheetName);
        $this->excel->getActiveSheet()->getCell('A'.$i)->getHyperlink()->setUrl("sheet://'".$sheetName."'!A1");

    }
    $this->excel->getActiveSheet()->setTitle('Blocks');
    $this->setStyles();
    //$this->_forceSpreadsheetDownload();
    $this->_saveSpreadsheet();

} 
```

the p method:

```
 function p($arr)
{
    echo"<pre>";
    print_r($arr);
    echo"</pre>";
} 
```

# javascript - HTML5 Canvas 贝塞尔曲线 - 背景不想加载

> ID：15744188
> 
> 赞同：0
> 
> 时间：2013-04-01T13:14:20.700
> 
> 标签：javascript, html, canvas, bezier, curves

有没有人可以帮我写剧本？参见[jsfiddle.net/7QmSz/3](http://jsfiddle.net/7QmSz/3)。

HTML：

```
<canvas id="canvas" height="1000" width="1000" class="bezier" style="cursor: default;"></canvas> 
```

CSS：

```
#canvas
{
    position: absolute;
    left: 100px;
    top: 100px;
    background-color: rgba(255, 255, 255, 0.1);
} 
```

JavaScript：

```
(function() {
    var canvas;
    var ctx; 
    var code; 
    var point;
    var style;
    var drag = null; 
    var dPoint;

    function Init(quadratic) {
        point = {
            p1: { x:50, y:100 },
            p2: { x:200, y:100 },
            p3: { x:50 , y:100 },
            p4: { x:200 , y:100 }
        };

        if (quadratic) {
            point.cp1 = { x: 50, y: 50 };
            point.cp3 = { x: 250, y: -110 };
        }
        else {
            point.cp1 = { x: 50, y: 10 };
            point.cp2 = { x: 200, y: 10 };
            point.cp3 = { x: 50, y: 190 };
            point.cp4 = { x: 200, y: 190 };
        }

        style = {
            curve:  { width: 2, color: "#C0C0C0" },
            cpline: { width: 1, color: "#C0C0C0" },
            point: { radius: 3, width: 1, color: "#C0C0C0", fill: "rgba(200,200,200,0.5)", arc1: 0, arc2: 2 * Math.PI },
        }

        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        canvas.onmousedown = DragStart;
        canvas.onmousemove = Dragging;
        canvas.onmouseup = canvas.onmouseout = DragEnd;

        DrawCanvas();
    }

    function DrawCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.lineWidth = style.cpline.width;
        ctx.strokeStyle = style.cpline.color;
        ctx.beginPath();
        ctx.moveTo(point.p1.x, point.p1.y);
        ctx.lineTo(point.cp1.x, point.cp1.y);
        if (point.cp2) {
            ctx.moveTo(point.p2.x, point.p2.y);
            ctx.lineTo(point.cp2.x, point.cp2.y);
        }
        else {
            ctx.lineTo(point.p2.x, point.p2.y);
        }
        ctx.stroke();

        ctx.lineWidth = style.cpline.width;
        ctx.strokeStyle = style.cpline.color;
        ctx.beginPath();
        ctx.moveTo(point.p3.x, point.p3.y);
        ctx.lineTo(point.cp3.x, point.cp3.y);
        if (point.cp2) {
            ctx.moveTo(point.p4.x, point.p4.y);
            ctx.lineTo(point.cp4.x, point.cp4.y);
        }
        else {
            ctx.lineTo(point.p4.x, point.p4.y);
        }
        ctx.stroke();

        ctx.lineWidth = style.curve.width;
        ctx.strokeStyle = style.curve.color;
        ctx.beginPath();
        ctx.moveTo(point.p1.x, point.p1.y);
        if (point.cp2) {
            ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
        }
        else {
            ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
        }
        var img = new Image();
        img.src = 'http://img201.imageshack.us/img201/5708/eyeq.jpg';
        var pattern = ctx.createPattern(img, 'repeat')
        ctx.globalAlpha = "1";
        ctx.fillStyle = pattern;
        ctx.fill();
        ctx.stroke();

        ctx.lineWidth = style.curve.width;
        ctx.strokeStyle = style.curve.color;
        ctx.beginPath();
        ctx.moveTo(point.p3.x, point.p3.y);
        if (point.cp3) {
            ctx.bezierCurveTo(point.cp3.x, point.cp3.y, point.cp4.x, point.cp4.y, point.p4.x, point.p4.y);
        }
        else {
            ctx.quadraticCurveTo(point.cp3.x, point.cp3.y, point.p4.x, point.p4.y);
        }
        var img = new Image();
        img.src = 'http://img201.imageshack.us/img201/5708/eyeq.jpg';
        var pattern = ctx.createPattern(img, 'repeat')
        ctx.globalAlpha = "1";
        ctx.fillStyle = pattern;
        ctx.fill();
        ctx.stroke();

        for (var p in point) {
            if(p == 'cp1' || p == 'cp2' || p == 'cp3' || p == 'cp4')
            {
                ctx.lineWidth = style.point.width;
                ctx.strokeStyle = style.point.color;
                ctx.fillStyle = style.point.fill;
                ctx.beginPath();
                ctx.arc(point[p].x, point[p].y, style.point.radius, style.point.arc1, style.point.arc2, true);
                ctx.fill();
                ctx.stroke();
            }
            else
            {
                ctx.lineWidth = style.point.width;
                ctx.strokeStyle = style.point.color;
                ctx.fillStyle = style.point.fill;
                ctx.beginPath();
                ctx.rect(point[p].x - 4,  point[p].y - 4, 7, 7);
                ctx.fill();
                ctx.stroke();
            }
        }
    }

    function DragStart(e) {
        e = MousePos(e);
        var dx, dy;
        for (var p in point) {
            dx = point[p].x - e.x;
            dy = point[p].y - e.y;
            if ((dx * dx) + (dy * dy) < style.point.radius * style.point.radius) {
                if(p == 'cp1' || p == 'cp2' || p == 'cp3' || p == 'cp4')
                {
                    drag = p;
                    dPoint = e;
                    canvas.style.cursor = "move";
                }
                return;
            }
        }
    }

    function Dragging(e) {
        if (drag) {
            e = MousePos(e);
            point[drag].x += e.x - dPoint.x;
            point[drag].y += e.y - dPoint.y;
            dPoint = e;
            DrawCanvas();
        }
    }

    function DragEnd(e) {
        drag = null;
        canvas.style.cursor = "default";
        DrawCanvas();
    }

    function MousePos(event) {
        event = (event ? event : window.event);
        return {
            x: event.pageX - canvas.offsetLeft,
            y: event.pageY - canvas.offsetTop
        }
    }

    canvas = document.getElementById("canvas");
    if (canvas.getContext) {
        ctx = canvas.getContext("2d");
        Init(canvas.className == "quadratic");
    }
})(); 
```

问题是当您第一次加载页面或刷新浏览器时，脚本不会加载背景图像。而是显示默认背景。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:43:05.180

您无需等待图像首先完成下载，因此当您的图像尚不可用时，画布将运行其其余代码。强制它首先加载，或者通过在`<img>`画布之前有一个带有图像 src 的元素，或者首先创建一个 Image()，给它一个 onload 处理程序，然后设置它的 src 属性，使用 onload 处理程序调用你的画布的代码。

# drop-down-menu - Bind Telerik DDL

> ID：15744191
> 
> 赞同：0
> 
> 时间：2013-04-01T13:14:33.470
> 
> 标签：drop-down-menu, telerik

I am trying to bind a Telerik DropDownList.

View Code:

```
<div>@( Html.Telerik().DropDownList()
         .Name("ddlCounty")
         .HtmlAttributes(new { style = "width:200px;" })
         .SelectedIndex(0)
         .BindTo(new SelectList((IEnumerable<MvcNew.Models.tbl_Country>)ViewData["ListCountries"], "Value", "Text"))                                        )
  </div> 
```

Controller Code:

```
List<SelectListItem> lst_Country = new List<SelectListItem>();
var Countries = (from m in DBContext.tbl_Countries
               select new SelectListItem{ Text = m.Country__Name.ToString(), Value = m.Country_ID.ToString() });
ViewBag.ListCountries = new SelectList(Countries);
 return View(); 
```

I am getting the below error
**Unable to cast object of type 'System.Web.Mvc.SelectList' to type 'System.Collections.Generic.IEnumerable`1[MvcNew.Models.tbl_Country]'.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:21:35.117

我已经更改了这样的代码并且它有效

```
 var clientIDs = DBContext.tbl_Countries  
        List<SelectListItem> items = new List<SelectListItem>();

        foreach (var t in clientIDs)
        {
            SelectListItem s = new SelectListItem();           
            s.Text = t.Country__Name.ToString();
            s.Value = t.Country__Name.ToString();
            items.Add(s);
        }

        ViewBag.ListCountries = items; 
```

# asp.net-mvc-3 - MVC3 C# 在取消时禁用验证消息

> ID：15744192
> 
> 赞同：1
> 
> 时间：2013-04-01T13:14:35.580
> 
> 标签：asp.net-mvc-3, validation

我有一个 MVC2 C# .Net Web 应用程序。我们使用 Domain 类属性 `[Required(ErrorMessage = "Start From is required.")]`和 HTML 中 的内置 MVC3 验证`@Html.ValidationMessageFor(model => model.StartFrom)`

但是，当我们使用取消按钮提交页面时，会触发验证，说明“需要从开始”，因此不会退出页面。如何禁用“取消”按钮上的验证？还是在不触发验证的情况下提交页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:22:01.760

我认为您需要覆盖提交按钮的默认行为，即您的情况下的取消按钮。

假设您有这样的取消按钮：

```
<input type="submit" id="btnCancel" value="cancel"/> 
```

现在编写 jQuery 来覆盖默认行为

```
$(function(){
    $('#btnCancel').click(function(e){
        e.preventDefault();
        //or you can return false from this method.
        //return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:40:04.020

我在 Stackoverflow 上找到了答案 :) [jQuery disable validation](https://stackoverflow.com/questions/203844/jquery-validation-plugin-disable-validation-for-specified-submit-buttons) 该链接中的前两个答案中的每一个都对我有用。@Karthik，感谢您的回答。它让我走上了正确的道路

答案1：

```
<input id = "theCancel" class="cancel" type="submit" value="Cancel" /> 
```

答案 2：

```
$(function () {
    $('#theCancel').click(function (e) {
        $("form").validate().cancelSubmit = true;
    });
}); 
```

我选择了答案 2 并将其放入我们的全局 js 文件中。我们所有的取消按钮的 id 都是“theCancel”

# ruby - 在任意位置设置哈希值

> ID：15744195
> 
> 赞同：1
> 
> 时间：2013-04-01T13:14:42.033
> 
> 标签：ruby

我正在开发一个应用程序，我想修改现有哈希的一部分，如下所示：

```
{a: {b: {c: 23}}} 
```

成为：

```
{a: {b: {c: [23]}}} 
```

但是，要设置的确切密钥是动态的，并且在散列中处于未知深度。有没有办法在给定键数组的哈希中设置一个值？我希望有类似的东西：

```
my_hash['a','b','c'] = new_value 
```

通过递归从任意深度获取值很简单，但是由于遍历是在数据的副本而不是引用上进行的，所以我不知道在遍历期间不重建整个数组的情况下设置值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:25:03.493

除了语法（`my_hash['a','b','c']`），以下将做你想要的

```
h = {a: {b: {c: { e: 23}}, d: 34}}
keys = ['a','b','c']

def replace_nested_value_by(h, keys, value)
  if keys.size > 1
    replace_nested_value_by(h[keys.first.to_sym], keys[1..-1], value)
  elsif keys.size == 1
    h[keys.first.to_sym] = value
  end
end

puts h
replace_nested_value_by(h, keys, 42)
puts h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:17:16.087

作为 toch 的答案的补充，并且超出了评论范围，我还建议这可能是一个使用的好地方`inject`：

```
def nested_replace(hash, *keys, last_key, value)
  result = keys.inject(hash) { |r, k| r[k] }
  result[last_key] = value
end

h = {a: {b: {c: [23]}}}
nested_replace h, :a, :b, :c, 42
puts h
# => {:a=>{:b=>{:c=>42}}} 
```

就个人而言，如果在查看递归之前有一种自然的方式来表达事物，我倾向于更喜欢 Ruby 的枚举器。

# php - php 两个自提交表单在一个页面上

> ID：15744198
> 
> 赞同：1
> 
> 时间：2013-04-01T13:14:46.783
> 
> 标签：php, forms, post

我有一个提交给自身以执行 php 操作的网页表单。我想在同一个网页中添加第二个表单，该表单也可以自行提交，但我没有找到适合我的设置的有效解决方案。这是我的网页的样子。

首先，它检查页面是否已经提交，如果已经提交，它会重定向到别处。

```
if($_SERVER['REQUEST_METHOD'] == "POST") {
header("Location: viewcustomers.php");
} 
```

接下来是表单本身。

```
<form id="addCustomer" method="POST" action=""> ..stuff.. </form> 
```

然后，最后是我的表单动作。

```
if('POST' == $_SERVER['REQUEST_METHOD']) {
..phpstuff..
} 
```

如何调整此表单操作（或添加另一个）以区分两种不同的表单？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:17:57.557

简单的！

```
<?php
    if(isset($_POST['action']) && $_POST['action'] == 'form1') {
        // Form 1
    } else if(isset($_POST['action']) && $_POST['action'] == 'form2') {
        // Form 2
    }
?>

<form action="#" method="post">

    <input type="hidden" name="action" value="form1" />
</form>

<form action="#" method="post">

    <input type="hidden" name="action" value="form2" />
</form> 
```

# javascript - Web 视图未返回正确的值

> ID：15744201
> 
> 赞同：-3
> 
> 时间：2013-04-01T13:15:01.530
> 
> 标签：javascript, android-webview

从 Web 视图使用 2.3.3 版，我得到的结果字符串为 1364311909

但是对于相同的 4.0 或更高版本，我得到 1.36431e+09 不同格式的字符串值

使用 Web View Android Frame Work 将值从 javascript 传递到 webview

与 JavaScript 一起使用的 Webview 启用：

```
myWebView.getSettings().setPluginState(PluginState.ON);
                        System.out.println("default encoding state is...."+myWebView.getSettings().getDefaultTextEncodingName());
                        myWebView.getSettings().setJavaScriptEnabled(true);

                        myWebView.loadUrl("the Url"); 
```

用于检索值的 JavaScript 代码是

```
public void changeIntent(final String updateId) {

        showToast(updateId);

         //* addToUpdatesId(updateId);
        Runnable runnable = new Runnable() {
            public void run() {
                // your code here
                Intent intent = new Intent(mContext,XXX.class);

                String allId= updateId;
                Global.setUpdateId(updateId);

                intent.putExtra(UPDATESID, allId);

                mContext.startActivity(intent);
            }
        };

        runOnUiThread(runnable); 

    } 
```

如何解决这个问题。请让我知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:31:38.503

我们已经解决了

Java Script 总是采用高精度值，它很好地在字符串的末尾添加了指数的力量

为了解决这个问题，在您传递的原始字符串中附加一个空字符串并返回一个字符串。像 String s= 原始字符串+""; 返回 s;

干杯......！！！！！！！！！！！

# c# - 自定义数据类型的非唯一元素

> ID：15744203
> 
> 赞同：0
> 
> 时间：2013-04-01T13:15:04.130
> 
> 标签：c#

我正在尝试获取自定义数据类型的唯一元素列表。我真的无法弄清楚为什么这不起作用。在下面的代码中，控件永远不会到达 Equals 实现。有人可以帮忙吗？

```
public class customobj : IEqualityComparer<customobj>
{
    public string str1;
    public string str2;

    public customobj(string s1, string s2)
    {
        this.str1 = s1; this.str2 = s2;
    }

    public bool Equals(customobj obj1, customobj obj2)
    {
        if ((obj1 == null) || (obj2 == null))
        {
            return false;
        }
        return ((obj1.str1.Equals(obj2.str1)) && (obj2.str2.Equals(obj2.str2)));

    }

    public int GetHashCode(customobj w)
    {
        if (w != null)
        {
            return ((w.str1.GetHashCode()) ^ (w.str2.GetHashCode()));
        }
        return 0;
    }
} 
```

下面是我试图检索列表的不同元素的部分。

```
List<customobj> templist = new List<customobj> { };

templist.Add(new customobj("10", "50"));
templist.Add(new customobj("10", "50"));
List<customobj> dist = templist.Distinct().ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:19:21.093

您的类不会覆盖对象类的基本 Equals() 并且`Distinct()`正在使用它。

尝试覆盖基本 Equals，并 `Equals(Rectangle obj1, Rectangle obj2)`从那里调用您的自定义。

此外，如果您想从类型比较器继承，请使用`IEquatable<T>`，但不要`IEqualityComparer<Rectangle>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:25:23.117

如果你想在 Rectangle 的类中实现 IEqualityComparer，你应该这样写：

```
List<Rectangle> dist = templist.Distinct(new Reclangle("","")).ToList(); 
```

通常它是通过一个 RectangleComparer 类来实现的：

```
class RectangleComparer : IEqualityComparer<Rectangle>
{
   public static IEqualityComparer<Rectangle> Instance { get {...} }
...
}

List<Rectangle> dist = templist.Distinct(RectangleComparer.Instance).ToList(); 
```

或覆盖 GetHashCode 和 Equals =)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:28:05.017

您正在实现错误的接口。您的类实现`IEqualityComparer<Rectangle>`，而不是`IEquatable<Rectangle>`。除非您*传入*`IEqualityComparer`to `Distinct`，否则它将使用（如果您的`IEquatable.Equals`类实现它）或`Object.Equals`.

```
public class Rectangle : IEquatable<Rectangle>
{
    public string width;
    public string height;

    public Rectangle(string s1, string s2)
    {
        this.width = s1; this.height = s2;
    }

    `IEquatable.Equals
    public bool Equals(Rectangle obj2)
    {
        if (obj2 == null)
        {
            return false;
        }
        return ((this.width.Equals(obj2.width)) && (this.height.Equals(obj2.height)));

    }

    `override of object.Equals
    public override bool Equals(Object(o2)
    {
       if(typeof(o2) == typeof(Rectangle))
           return ((Rectangle)this.Equals((Rectangle)o2);

       return false;
    } 

    'override of object.GetHashCode
    public override int GetHashCode()
    {
        return ((this.width.GetHashCode()) ^ (thisw.height.GetHashCode()));
    }
} 
```

`width`另外，您的and `height`are `string`s 而不是数字类型是否有特殊原因？这看起来很奇怪，并且可能导致奇怪的错误，例如假设`"100"`and`"0100"`和`" 100 "`是相等的，而实际上它们是不同的字符串并且将具有不同的哈希码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T13:23:18.423

```
bool Equals(Rectangle obj1, Rectangle obj2) 
```

是Object的静态方法，所以不能被覆盖。

您必须改写实例 Equals。

```
public override bool Equals(Object obj) {
    ...
} 
```

# php - 在另一个函数中从 Class 调用一个函数

> ID：15744209
> 
> 赞同：0
> 
> 时间：2013-04-01T13:15:29.490
> 
> 标签：php, oop

我想更好地了解对函数的调用如何在 OOP 中工作。我有以下示例：

```
class SomeClass {
    function __construct(){
        //run function do()
        //run function include()
        //run function run()
    }

    public function do($foo){
        //do some stuff
    }

    public function include(){
        require_once( CONSTANT . 'required.php' );
    }

    public function run(){
        required_func();
    }
}

$load_class = new SomeClass(); 
```

在 required.php 中：

```
function required_func(){

    $customerInfo = "info";
    $customer = $this -> do($customerInfo); //--> This isn't right
    return $customer;
} 
```

我想要做的是让 required_func() 使用 $customerInfo 运行 do()。所以本质上：如何从 require_once 文件中包含的另一个函数调用一个类公共函数？我什至在这里遥遥无期？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:21:41.710

$this 不在函数 required_func() 的范围内

```
class SomeClass {
    function __construct(){
        //run function do()
        //run function include()
        //run function run()
    }

    public function do($foo){
        //do some stuff
    }

    public function include(){
        require_once( CONSTANT . 'required.php' );
    }

    public function run(){
        required_func($this);
    }
}

$load_class = new SomeClass(); 
```

和

```
function required_func($customerObject){

    $customerInfo = "info";
    $customer = $customerObject->do($customerInfo);
    return $customer;
} 
```

# jquery - 如何转换 ASP.NET MVC 3 应用程序以使所有 Infragistics(Ignite UI) 控件工作？

> ID：15744212
> 
> 赞同：0
> 
> 时间：2013-04-01T13:15:39.967
> 
> 标签：jquery, infragistics

有人可以告诉我需要遵循的分步过程以使所有控件（Infragistics（Ignite UI））在 asp.net mvc3 应用程序中工作。在他们的网站上，他们提到了如何使用控件，但我没有找到如何转换。我在我的项目中添加了一个组合框控件。我收到错误.. 可能有些脚本没有被引用。令人惊讶的是，网格工作正常，但组合框中有错误。所以我需要知道我们需要参考的所有内容。

# php - codeigniter jquery的自动完成功能不起作用但没有错误

> ID：15744214
> 
> 赞同：0
> 
> 时间：2013-04-01T13:15:49.007
> 
> 标签：php, javascript, jquery, codeigniter, autocomplete

我是 javascript 新手，我尝试按照[本](http://www.codersmount.com/2012/09/jquery-ui-autocomplete-in-codeigniter-with-database/)教程进行操作。

我有一个文本框（输入），我想通过从 MySQL 加载一些数据来使用 jQuery 的自动完成功能。

这是我的控制器代码：

```
public function autocomplete() {
    if($this->input->post('txt_nama'))
        $this->absensi_m->get_umat($this->input->post('txt_nama'));

    /*if (isset($_GET['term'])){
        $q = strtolower($_GET['term']);
        $this->absensi_m->get_umat($q);
    }*/
} 
```

这是我的模型：

```
public function get_umat($word) {
    $this->db->select('nama', 'tanggal_lahir');
    $this->db->like('nama', $word);
    $query = $this->db->get('msumat');

    if($query->num_rows() > 0)
    {
        foreach($query->result_array() as $row)
        {
            $new_row['label'] = htmlentities(stripslashes($row['nama']));
            $new_row['value'] = htmlentities(stripslashes($row['tanggal_lahir']));
            //build array
            $row_set[] = $new_row;
        }
        echo json_encode($row_set);
    }
} 
```

这是我的javascript：

```
<script type="text/javascript">
        $(function(){
            $("#txt_nama").autocomplete({
                source: "autocomplete"
            });
        });
    </script> 
```

我尝试使用 firefox 的 firebug 和 GC 的开发工具检查 javascript，这就是我得到的：

```
<input type="text" id="txt_nama" name="txt_nama" class="ui-autocomplete-input" autocomplete="off"> 
```

请注意，**自动完成功能**已**关闭**。我想这是问题所在，所以我尝试通过添加以下代码来打开它：

```
$(document).ready(function() {
            $("#txt_nama").attr("autocomplete", "on");
        }); 
```

当我添加此代码时，**自动完成**元素已打开**，**但自动完成仍然**无法**正常工作。

我也尝试使用回声，但**我**的回声都不起作用：

```
if($query->num_rows() > 0)
    {
        echo num_rows();
        echo 'a';

        foreach($query->result_array() as $row)
        {
            $new_row['label'] = htmlentities(stripslashes($row['nama']));
            $new_row['value'] = htmlentities(stripslashes($row['tanggal_lahir']));
            //build array
            $row_set[] = $new_row;
        }
        echo json_encode($row_set);
        //return row_set;
    } 
```

我错过了什么？

**注意：** 我只是想知道`Routes`，它与这个错误有关吗？因为通常人们使用`controller/method`（`source:`JavaScript），但我不能这样做，因为生成的路由将有双控制器（`index.php/absensi/absensi/autocomplete`），所以我删除`controller`并只使用方法 ( `source: "absensi"`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:24:27.160

我相信您`source`错误地使用了该选项。从[文档](http://api.jqueryui.com/autocomplete/#option-source)：

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。

如果您打算`source`指向您的`autocomplete`函数，则需要提供控制器名称，就像它们在您链接的演示中一样：

```
source: "birds/get_birds" // path to the get_birds method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:23:43.033

**模型**

```
public function get_umat($word) {
    $this->db->select('nama', 'tanggal_lahir');
    $this->db->like('nama', $word);
    $query = $this->db->get('msumat');

    if($query->num_rows() > 0)
    {
        foreach($query->result_array() as $row)
        {
            $new_row['label'] = htmlentities(stripslashes($row['nama']));
            $new_row['value'] = htmlentities(stripslashes($row['tanggal_lahir']));
            //build array
            $row_set[] = $new_row;
        }
        return $row_set;
    }
} 
```

**控制器：**

```
public function autocomplete() {
    if($this->input->post('txt_nama'))
        echo json_encode($this->absensi_m->get_umat($this->input->post('txt_nama')));

} 
```

你应该放在`echo json_encode()`而`autocomplete()`不是放在模型中..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:14:02.860

这是答案：

1.  不要使用回声，它会破坏 jquery。

2.  使用`if (isset($_GET['term']))`代替`$this->input->post()`

3.  `source: "<?php echo site_url('absensi/autocomplete'); ?>"`在jquery中使用

# java - 如何从 Java 调用 linux 命令“source FILE_NAME”？

> ID：15744218
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:16:03.617
> 
> 标签：java, linux

其实我有两个命令：

1.  源文件名
2.  安装 ABCD

在执行第二个命令之前，我需要执行第一个。我绑定使用方法执行这两个命令`Runtime.getRuntime().exec(cmd)`，但是第二个命令失败了，因为它取决于第一个。我尝试了很多组合，但没有成功。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:34:21.790

您可能正在执行两个单独的 exec 命令，产生单独的进程，因此您在第一个进程中所做的任何事情对第二个进程都不可见。通过将所有命令放入脚本（bash、ksh 等）并从 Java 程序调用一次来解决此问题。

参数化您的脚本，以便您可以传递参数。

[这是编写第一个 shell 脚本](http://www.ibm.com/developerworks/aix/library/au-kornshellscripting/)的一些帮助

* * *

**[编辑]**正如@RNJ 所述，您可以查看使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)将环境变量传递给生成的每个进程。如果您可以提前指定要创建的文件的名称，这将很好。示例代码取自上面的 API 链接...

```
 ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");
 Map<String, String> env = pb.environment();
 env.put("VAR1", "myValue");
 env.remove("OTHERVAR");
 env.put("VAR2", env.get("VAR1") + "suffix");
 pb.directory(new File("myDir"));
 Process p = pb.start(); 
```

# iphone - 自动释放池页面损坏

> ID：15744219
> 
> 赞同：8
> 
> 时间：2013-04-01T13:16:04.667
> 
> 标签：iphone, ios, xcode, asihttprequest, nsautoreleasepool

每当我使用 ASIHTTPRequest 进行网络服务调用时，我都会随机出现以下崩溃：

```
autorelease pool page 0x9418000 corrupted  
  magic a1a1a100 4f545541 454c4552 21455341  
  pthread 0xb0103000 
```

我的代码是 ARC-fied 并使用 -fno-objc-arc 用于 ASIHTTP 类的 .m 文件。

有没有人对此有任何想法或以前是否有人遇到过这种问题？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T13:19:39.990

这可能表明您正在其他地方踩踏记忆。我会首先打开[内存诊断](https://developer.apple.com/library/mac/recipes/xcode_help-scheme_editor/Articles/SchemeDiagnostics.html)并查找错误。最可能导致此类错误的地方是 C 代码，尤其是在使用 C 数组或 C 字符串时。您可能在分配的内存之外写入，或者在释放内存后写入内存。

有时会出现会导致此类问题的[编译器错误，但这些错误非常罕见，我首先会强烈怀疑您的代码。](https://stackoverflow.com/questions/7843774/stack-corrupted-with-autoreleasepool-arc-compiled-with-llvm-3-0-fastest-sma)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T18:25:51.587

正如 Rob 指出的那样，这可能表明您在其他地方滥用内存。要从 Xcode 8 开始启用内存管理诊断：

*   单击 Xcode 中的方案菜单，然后选择底部的“编辑方案...”。
*   在运行步骤中，转到诊断选项卡。
*   在内存管理下，打开所有四个选项。我通常发现 Guard Malloc 可以发现最多的问题，但它们都是有用的。

# jsp - 如何在 JSP 中分页显示 Lucene indexsearcher 的结果

> ID：15744220
> 
> 赞同：0
> 
> 时间：2013-04-01T13:16:09.413
> 
> 标签：jsp, lucene, pagination

我在 JSP 中构建了一个 Web 界面，用户可以在其中键入她的查询，并且该界面记录用户的查询以及她的当前位置，并将这些作为参数传递给 Lucene 索引搜索器 SearchDB。现在我想在同一个 JSP 中按分页显示搜索结果。我在其他帖子的帮助下编写的JSP和Lucene索引搜索器的代码如下：

结果.jsp

```
 <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" import="java.util.*,java.io.*,parser.SearchDB,org.apache.lucene.analysis.*" %>
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
  <%! String myQuery; String city; String latitude; String longitude; %>
  <%
      myQuery=request.getParameter("myQuery");
      city=request.getParameter("city");
      latitude=request.getParameter("latitude");
      longitude=request.getParameter("longitude");
      Cookie cookies [] = request.getCookies();
      Cookie myCity=null;
      Cookie myLat=null;
      Cookie myLong=null;
      if(city!=null)
       {
         myCity=new Cookie("city",city);
         myCity.setMaxAge(365*24*60*60);
         response.addCookie(myCity);
         myLat=new Cookie("latitude",latitude);
         myLat.setMaxAge(365*24*60*60);
         response.addCookie(myLat);
         myLong=new Cookie("longitude",longitude);
         myLong.setMaxAge(365*24*60*60);
         response.addCookie(myLong);
       }
    else
       { 
         for (int i = 0; i < cookies.length; i++) 
         {   
               if (cookies[i].getName().equals("city"))
                  {
                    myCity=cookies[i];
                    city=myCity.getValue();
                  }
              else
                if(cookies[i].getName().equals("latitude"))
                 {
                      myLat=cookies[i];
                      latitude=myLat.getValue();
                 }
                else
                  if(cookies[i].getName().equals("longitude"))
                   {
                       myLong=cookies[i];
                       longitude=myLong.getValue();
                   }
             }
    }
  SearchDB s = new SearchDB();
  System.out.println("Query="+myQuery+" and City="+city);
  s.searchdb(myQuery, city);
%>

 <form name="frm" method="post" action="result.jsp">
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
   <td width="22%">&nbsp;</td>
   <td width="78%">&nbsp;</td>
   </tr>
   <tr>
   <td>&nbsp; </td>
   <td><input type="text" name="myQuery" placeholder="Type here"></td>
   </tr>
   <tr>
   <td>&nbsp;</td>
   <td><input type="submit" name="submit" value="Submit"></td>
   </tr>
   <tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
   </tr>
   </table>
   </form>
   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Insert title here</title>
   </head>
   <body>
   <p>Query phrase is : <%=myQuery%></p>
   <p>User's city : <%=city%></p>
   <p>User's latitude : <%=latitude%></p>
   <p>User's longitude : <%=longitude%></p>
   </body>
  </html> 
```

SearchDB.java

```
package parser;

public class SearchDB {

public void searchdb(String myQuery, String myCity) throws Exception
{
    System.out.println("Searching in the database ...");
    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);

    QueryParser cityQP = new QueryParser(Version.LUCENE_CURRENT, "city", analyzer);
    Query cityQuery = cityQP.parse(myCity);

    QueryParser titleQP = new QueryParser(Version.LUCENE_CURRENT, "title", analyzer);
    Query titleQuery = titleQP.parse(myQuery);

    BooleanQuery finalQuery = new BooleanQuery();
    finalQuery.add(cityQuery, Occur.MUST); must occur.
    finalQuery.add(titleQuery, Occur.MUST); 

    System.out.println("Final Query="+finalQuery.toString());

    Directory dir=FSDirectory.open(new File(path of index directory"));
    IndexSearcher searcher = new IndexSearcher(dir, true);
    TopDocs hits = searcher.search(finalQuery, 20);

    System.out.println("Number of hits="+hits.totalHits);
    for(ScoreDoc match : hits.scoreDocs)
    { 
       System.out.println(searcher.doc(match.doc).get("title")+" with score="+match.score);
       System.out.println("_______");
    }
    searcher.close();
    dir.close();
} 
```

}

我对 Lucene 和 JSP 都是新手。我不知道应该对上面的 JAVA 和 JSP 代码进行哪些更改，以便按分页方式显示结果。所以任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:03:27.377

您可以将最后获得的 ScoreDoc 传递给[IndexSearcher.searchAfter](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/search/IndexSearcher.html#searchAfter%28org.apache.lucene.search.ScoreDoc,%20org.apache.lucene.search.Query,%20int%29)，以获取下一组文档。因此，完成 for 循环后 match 的值应该是要传递给 SearchAfter 的 ScoreDoc。

如：

```
TopDocs hits = searcher.search(finalQuery, 20);
System.out.println("Number of hits="+hits.totalHits);

while(not done paging...) {
    ScoreDoc last;
    for(ScoreDoc match : hits.scoreDocs)
    { 
        System.out.println(searcher.doc(match.doc).get("title")+" with score="+match.score);
        System.out.println("_______");
        last = match;
    }
    hits = searcher.searchAfter(last, finalQuery, 20);
} 
```

# c# - Document.Protect 不起作用

> ID：15744221
> 
> 赞同：0
> 
> 时间：2013-04-01T13:16:10.707
> 
> 标签：c#, asp.net, ms-word, interop, export-to-word

嗨，我创建了一个 asp.net 应用程序，在其中我使用下面的代码片段将 asp:panel 转换为 word 文档。

```
 StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);

            tblMain.RenderControl(htw);

            if (strType.Equals("Save"))
            {
                string filename = DateTime.Now.ToString().Replace("/", "").Replace("-", "").Replace(":", "").Replace(" ", "") + ".doc";
                string strPath = Server.MapPath("Attachments") + "\\" + filename;
                StreamWriter sWriter = new StreamWriter(strPath);
                sWriter.Write(sw.ToString());
                sWriter.Close(); 
```

现在文件正在保存到指定的文件夹。之后，我正在获取相同的文件以附加密码以进行保护。我也使用了下面的代码。

```
Microsoft.Office.Interop.Word.ApplicationClass wordApp = new Microsoft.Office.Interop.Word.ApplicationClass();
                Microsoft.Office.Interop.Word.Document doc = null;
                object missing = System.Reflection.Missing.Value;
                object readOnly = false;
                object visible = true;
                object password = "123";
                object fileToOpen = strPath;

                try
                {
                    doc = wordApp.Documents.Open(ref fileToOpen, ref missing, ref readOnly, ref missing, ref missing,
                                                    ref missing, ref missing, ref password, ref missing, ref missing, ref missing,
                                                    ref visible, ref visible, ref missing, ref missing, ref missing);
                    doc.Activate();

                    doc.Protect(WdProtectionType.wdAllowOnlyComments,ref missing, ref password, ref missing, ref missing);
                    doc.SaveAs(ref fileToOpen, ref missing, ref missing, ref password, ref missing, ref password, ref missing, ref missing,
                               ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);

                }
                catch (Exception ex)
                {
                    // exception catching
                }
                finally
                {
                    doc.Close(ref missing, ref missing, ref missing);
                    wordApp.Quit(ref missing, ref missing, ref missing);
                } 
```

但它会将文件与一个名为 filename_files 的文件夹一起保存。

如果我删除该行`doc.Protect(WdProtectionType.wdAllowOnlyComments,ref missing, ref password, ref missing, ref missing);`

它将仅保存 doc 文件，但不附加密码。

任何想法？请帮我解决这个问题。邀请所有的建议。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T13:32:41.877

尝试这个：

检查是否有密码

```
 if(doc.HasPassword)
     doc.Protect(WdProtectionType.wdAllowOnlyReading,ref missing, ref password, ref missing, ref missing);
 else    
     doc.Protect(WdProtectionType.wdNoProtection,ref missing, ref password, ref missing, ref missing); 
```

# android - Android 4.2.2 上的新遗物

> ID：15744226
> 
> 赞同：0
> 
> 时间：2013-04-01T13:16:26.527
> 
> 标签：android, newrelic

因此，在 Windows 7 64 位的 android 上进行新的 relic 设置时出现错误。在我运行 setup.exe 并提供项目路径后，它会引发以下错误：

```
Unknown or invalid android build target: android - 16 
```

关于我做错了什么的任何想法？我已经更新了 SDK 和 java，但仍然没有。环境变量也都设置好了

这也发生在我放了我的令牌之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:26:53.333

如果您还没有，最好的办法是向 New Relic 支持提交票证：support@newrelic.com

关于您的具体问题 - 您可能想要验证`target`您的属性`project.properties`是`android-16`（没有空格！）。

如果更改没有帮助，请联系支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:02:50.267

我将 Eclipse 的 SDK 与 Windows 的 SDK 混淆了。您需要在 Eclipse 按钮​​上打开 SDK，而不是在 Windows 开始菜单上

# php - 在文件上传表单中预选文件

> ID：15744229
> 
> 赞同：1
> 
> 时间：2013-04-01T13:16:33.677
> 
> 标签：php, forms, joomla2.5

我在 Joomla 2.5 中有一个表格，有一个文件上传选项。我想从用户的本地系统中预先选择一个文件（即在他们的 C:\Windows\TEMP 目录中；它是由另一个应用程序以编程方式放置在那里的）。

如果用户可以查看它很好，我只需要它为他们选择这个特定的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:02:10.767

进一步审查后，大卫弗里奇是非常正确的。现代通用浏览器无法注入此信息，甚至无法建议。

# iphone - UIProgressView 不显示

> ID：15744230
> 
> 赞同：1
> 
> 时间：2013-04-01T13:16:37.383
> 
> 标签：iphone, ios, objective-c, xcode, opengl-es

我有一个 UIProgressView 我想在我的 GLKViewController 上运行，而其余的代码正在由 iOS 加载。我已将 UIProgressView 放入我的“viewDidLoad”方法中。在 viewDidLoad 方法加载所有代码之前，UIProgressView 不会显示。如何在调用 viewDidLoad 方法后立即显示 UIProgressView 并在 viewDidLoad 方法完成时结束？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Progress Bar
    [threadProgressView setProgress: 0.0];    
    [self performSelectorOnMainThread:@selector(updateProgressBar) withObject:nil waitUntilDone:NO];

    // Disbale iPhone from locking
    [[UIApplication sharedApplication] setIdleTimerDisabled: YES];

    // Set up context to use Open GL ES
    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    // Create a view to display the Open GL ES content
    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    /******** Default Settings **********/
    m_kf            = 0;                                    // The current keyframe ID.
    m_avPos         = GLKVector3Make(0.0f, 0.0f, -35.0f);   // Where to put the avata.
    m_camPos        = GLKVector3Make(0.0f, 10.0f, -35.0f);  // The camera orbits this point.
    m_camDist       = 30.0f;                                // Distance of camera from the orbit point.

    /******** Set up open gl ***********/
    [self setupGL];

    /********* TOUCH IMPLEMENTATION *********/

    // Pinch recongizer detects pinches and is used to zoom in/out
    UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchDetected:)];
    [self.view addGestureRecognizer:pinchRecognizer];

    // Pan recognizer, used to rotate around the x and y axis
    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panDetected:)];
    [self.view addGestureRecognizer:panRecognizer];

    /********* END TOUCH IMPLEMENTATION *********/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:32:14.157

> 如何在调用 viewDidLoad 方法后立即显示 UIProgressView 并在 viewDidLoad 方法完成时结束？

当`viewDidLoad`被调用时，视图还没有出现在屏幕上。之后`viewDidLoad`你会看到`viewWillAppear`然后`viewDidAppear`被调用。

而且，如果您长时间运行`viewDidLoad`，它将阻塞您的主线程，因此您的进度条将不会更新。
当你这样做：

```
 [self performSelectorOnMainThread:@selector(updateProgressBar) withObject:nil waitUntilDone:NO]; 
```

由于您在主线程上，因此指定`waitUntilDone`会将您的请求排队并稍后处理，可能在您`viewDidLoad`完成之后。

为了做你想做的事，你需要更多的异步代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:32:39.307

viewDidLoad 在主循环，主线程上执行。那是用户界面线程。结束后界面上的任何变化都不会显示出来。所以，这是正常的行为。

选择器 updateProgressBar 将在 viewDidLoad 在同一线程（主线程）上结束后执行。

仅使用 viewDidLoad 进行初始化，然后在后台线程上执行进程并在主线程（即接口线程）上执行 progressView 更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T13:57:16.507

在主线程（这是您的默认设置）上添加：

```
[[NSRunLoop currentRunLoop] runUntilDate: [NSDate distantPast]]; 
```

这将给主循环一个单一的镜头，然后返回到您的代码。

# mysql - MySQL JOIN 复杂性

> ID：15744231
> 
> 赞同：0
> 
> 时间：2013-04-01T13:16:39.973
> 
> 标签：mysql, sql, join

我正在使用 MySQL 5.5 并且有两个表 T1(ID, NAME) 和 T2(ID, MARKS)，以下是表中的数据。

T1的数据

```
ID NAME
1  A
2  B
3  C 
```

T2的数​​据

```
ID MARKS
1  40
5  60 
```

我想要以下结果集

```
ID NAME MARKS
1  A    40
2  B    0
3  C    0 
```

我们可以编写什么查询来完成上述结果集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:17:57.780

`LEFT JOIN`两张表：

```
SELECT
  t1.id,
  t1.name,
  IFNULL(t2.Marks, 0) AS Marks
FROM T1 
LEFT JOIN T2 ON t1.ID = t2.ID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/bcbb5/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T13:25:22.713

你应该`LEFT JOIN`为这种结果使用一个子句:-)

您的查询将如下所示：

```
SELECT 
    ID, 
    NAME, 
    COALESCE(MARKS, 0) AS MARKS
FROM T1
    LEFT JOIN T2 USING(ID) 
```

请注意，我使用该`USING`子句是为了获得比该子句更语义和更紧凑的语法`ON`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:18:09.920

在这种情况下，您需要使用`LEFT JOIN`连接两个表，因为不能保证`ID`on table`T1`将存在于 table 上`T2`。*检索在左侧*`LEFT JOIN`表中找到的所有行，无论它在*右侧*表中是否有匹配记录。

 **语句中的使用`COALESCE`是将`NULL`值转换为`0`. `NULL`列的值上存在的原因是因为表上的某些记录在表`T1`上没有匹配的记录，`T2`导致列为`T2.Marks`空。

```
SELECT  a.ID, a.Name, COALESCE(b.Marks, 0) Marks
FROM    T1 a
        LEFT JOIN T2 b
            ON a.ID = b.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2f2f2/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)**

# c# - devart dc.ExecuteQuery 返回未设置为对象实例的对象

> ID：15744233
> 
> 赞同：0
> 
> 时间：2013-04-01T13:16:44.933
> 
> 标签：c#, hyperlink, devart

我最近升级到 devart 7.5 并且一些功能无法正常工作。具体来说，我有一个返回 IEnumerable 的函数：

```
protected IEnumerable<BudgetTotals> getTotals(decimal groupId, decimal budgetId)
{
    using (SsinpatDataContext dc = new SsinpatDataContext())
    {
         object[] ids = new object[2] { groupId, budgetId };
         string sqlStr = "..."
         var query = dc.ExecuteQuery<BudgetTotals>(sqlStr, ids);
         return query;
    }
} 
```

至此，一切正常，返回变量 " `query`" 保存正确的值。
问题是调用`getTotals`对象时没有设置：

```
...
var query = getTotals(grpId,bdgId);
foreach(BudgetTotals bt in query)
{
    ...
} 
```

现在，当控制在 foreach 指令中到达“in”时，会抛出异常消息`"Object not set to an instance of an object"`，这让我感到困惑，因为

a）它工作正常，并且

b) 对象*被*设置在函数内`getTotals`。

我可以通过将返回值从`IEnumerable`to更改`BudgetTotals[]`并返回来解决问题`query.ToArray`。我试过了，它有效。这里的主要问题是所有其他返回 IEnumerable 的函数。

在彻底检查应用程序之前，我想了解导致从 devart 6.3 到 7.5 的行为差异的原因或原因。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:02:07.800

在“getTotals”函数中执行 ExecuteQuery 方法时，会为当前 DataContext 对象 (dc) 打开一个用于获取数据的实体读取器。退出“getTotals”函数中的“使用”块后，DataContext 对象 (dc) 被释放并关闭其所有实体读取器。因此，当您尝试读取 foreach 语句中的数据时，读取器已经关闭，并且发生了异常（我们已经更改了异常的文本，现在它将提供更多信息）。JIC：在旧版本中，关闭实体阅读器可能会出现一些问题。

# dynamics-crm-2011 - 是否可以以某种方式修改 MS CRM 2011 中的价值系统维护字段

> ID：15744243
> 
> 赞同：0
> 
> 时间：2013-04-01T13:17:26.013
> 
> 标签：dynamics-crm-2011

我正在尝试完成一项相当奇怪的任务。我需要更改实体`IsDefault`上的属性值，`Team`并在进行一些操作后将其返回。

我尝试使用 C# 插件、自定义工作流程步骤和 Web 界面更新该值，但是无论我使用哪个用户权限执行此操作，这似乎在任何情况下都是不允许的。系统没有显示异常，只是愉快地结束，没有错误消息。

直接更改字段值`MS SQL`确实有效，但我可能并不总是可以直接访问它，这绝对是最危险的方法，因为它不受技术支持。

这种情况有什么解决方法吗？有什么方法可以更新 MS CRM 2011 中的系统维护字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:44:12.630

当您创建业务单位时，CRM 会自动创建一个具有相同名称且属性`IsDefault`设置为 true 的默认团队。

这是设计使然，这样总有一个团队可以容纳来自业务部门的所有用户。

没有支持的方法来更改该值。

# python - python，两次插入同一行时测试不会失败

> ID：15744246
> 
> 赞同：1
> 
> 时间：2013-04-01T13:17:34.327
> 
> 标签：python, unit-testing, sqlalchemy

我的`PostgreSQL`桌子看起来像

```
 Table "public.categories"
   Column   |           Type           | Modifiers
------------+--------------------------+-----------
 uuid       | uuid                     | not null
 name       | character varying        | not null
 parent     | character varying        | not null
 created_on | timestamp with time zone | not null
Indexes:
    "categories_pkey" PRIMARY KEY, btree (uuid)
    "categories_name_parent_key" UNIQUE CONSTRAINT, btree (name, parent)
Referenced by:
    TABLE "transactions" CONSTRAINT "transactions_category_id_fkey" FOREIGN KEY (category_id) REFERENCES categories(uuid) 
```

有`unique(name, parent)`. 我`Test`的是

```
 def setUp(self):
        db.create_all()

    def session_commit(self):
        # noinspection PyBroadException
        try:
            db.session.commit()
        except:
            db.session.rollback()
        finally:
            pass
   def test_insert_same_category_twice(self):
        """
         category, parent relationship is unique
        """
        db.session.add(Category('test_insert_same_category_twice', 'parent1'))
        self.session_commit()
        self.assertEquals(1, len(db.session.query(Category).all()))
        db.session.add(Category('test_insert_same_category_twice', 'parent1')) # should fail
        self.session_commit()

    def tearDown(self):
        db.session.close()
        for tbl in reversed(db.metadata.sorted_tables):
            db.engine.execute(tbl.delete()) 
```

当我尝试在数据库中插入具有相同`name`和`parent`原因的新类别时，它应该会失败`UniqueConstraint`，但它不会

另外，当我在最后一行断言时（在上面的代码中省略）我在表中有多少条目

```
self.assertEquals(2, len(db.session.query(Category).all())) 
```

它失败

```
 self.assertEquals(2, len(db.session.query(Category).all()))
AssertionError: 2 != 1 
```

这意味着它会覆盖现有条目？

这里出了什么问题？

**更新**

根据@sr2222 的回答，我在以下方法中解决了该错误

```
def session_commit(self):
    # noinspection PyBroadException
    try:
        db.session.commit()
    except:
        db.session.rollback()
        raise # added error to propagate up
    finally:
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:51:21.487

您的`session_commit`函数在数据库提交周围有一个包罗万象的`except`块。除非回滚失败，否则这将始终通过。至于您的断言，由于您正在消除错误，因此您的提交静默失败，因此您找到的单行应该是原始的、未经编辑的条目。如果您想在验证中有条件地处理异常状态，则需要捕获并适当地处理它，而不仅仅是将其丢弃。

# php - 如何在 php 表单中添加自定义字段选项以进行动态值存储

> ID：15744248
> 
> 赞同：2
> 
> 时间：2013-04-01T13:17:42.563
> 
> 标签：php, ajax, dynamic

如何制作一个允许用户在动态填写数据库中的表单和数据更新时添加自定义字段的php表单。

我已经搜索了很多，但不幸的是我无法获得使用什么。我认为它可以使用 zend 或 yii 来实现，但我无法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:52:55.727

考虑到这一点：

```
<script language="javascript">
function addInput() {
document.getElementById('text').innerHTML += "Field: <input name='alldata[]' type='text' value='' /><br />";

}
</script>
</head>
<body>
<form name="form">
<input type="button" onclick="addInput()" name="add" value="Add input field" />
</form>
<div id="text">
</div> 
```

您可以像这样获取控制器中的所有字段：

```
<?php foreach($_POST['alldata'] as $row){
echo $row;
echo '<br />';
}?> 
```

当您传递名称为“alldata”的输入类型=文本数组时。

# android - NullPointerException 解析 JSON 数据

> ID：15744264
> 
> 赞同：1
> 
> 时间：2013-04-01T13:18:46.953
> 
> 标签：android, json

我正在尝试解析 JSON，我正在使用[这个示例](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。

在类解析器的示例中，没有使用辅助线程，我得到[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。

为了解决这个问题，我在 Asynctask 中引入了代码，但由于在线出现错误而无法正确传输数据：

`contacts = json.getJSONArray(TAG_CONTACTS);`

这是我正在使用的简单代码

**JSONParser.java**

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {
        new ParseJson().execute(url);
        return jObj;
    }

    private class ParseJson extends AsyncTask<String, Void, JSONObject>{

         protected JSONObject doInBackground(String... params) {
             // Making HTTP request
             try {
                 // defaultHttpClient
                 DefaultHttpClient httpClient = new DefaultHttpClient();
                 HttpPost httpPost = new HttpPost(params[0]);

                 HttpResponse httpResponse = httpClient.execute(httpPost);
                 HttpEntity httpEntity = httpResponse.getEntity();
                 is = httpEntity.getContent();           
             } catch (UnsupportedEncodingException e) {
                 e.printStackTrace();
             } catch (ClientProtocolException e) {
                 e.printStackTrace();
             } catch (IOException e) {
                 e.printStackTrace();
             }

             try {
                 BufferedReader reader = new BufferedReader(new InputStreamReader(
                         is, "iso-8859-1"), 8);
                 StringBuilder sb = new StringBuilder();
                 String line = null;
                 while ((line = reader.readLine()) != null) {
                     sb.append(line + "\n");
                 }
                 is.close();

                 json = sb.toString();
             } catch (Exception e) {
                 Log.e("Buffer Error", "Error converting result " + e.toString());
             }

             // try parse the string to a JSON object
             try {
                 jObj = new JSONObject(json);
             } catch (JSONException e) {
                 Log.e("JSON Parser", "Error parsing data " + e.toString());
             }

             // return JSON String
             return jObj;
         }
   }
} 
```

**MainActivity.java**

```
public class MainActivity extends Activity{
 // url to make request
private static String url = "http://api.androidhive.info/contacts/";

// JSON Node names
private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";

// contacts JSONArray
JSONArray contacts = null;
JSONObject json;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    new task().execute();
}

public void loadAreas(){
    try {

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);

            Log.e("TAG","ID: "+id+" - "+"NAME: "+name);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
}          

private class task extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {  
        try {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }
    @Override
    protected void onPostExecute(String result) {
        loadAreas();
    }

} 
```

}

**我的JSON数据**

```
{
    "contacts": [
        {
                "id": "c200",
                "name": "Ravi Tamada",
                "email": "ravi@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c201",
                "name": "Johnny Depp",
                "email": "johnny_depp@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c202",
                "name": "Leonardo Dicaprio",
                "email": "leonardo_dicaprio@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c203",
                "name": "John Wayne",
                "email": "john_wayne@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c204",
                "name": "Angelina Jolie",
                "email": "angelina_jolie@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "female",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c205",
                "name": "Dido",
                "email": "dido@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "female",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c206",
                "name": "Adele",
                "email": "adele@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "female",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c207",
                "name": "Hugh Jackman",
                "email": "hugh_jackman@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c208",
                "name": "Will Smith",
                "email": "will_smith@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c209",
                "name": "Clint Eastwood",
                "email": "clint_eastwood@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c2010",
                "name": "Barack Obama",
                "email": "barack_obama@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c2011",
                "name": "Kate Winslet",
                "email": "kate_winslet@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "female",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c2012",
                "name": "Eminem",
                "email": "eminem@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        }
    ]
} 
```

**日志猫**

```
04-01 16:06:48.414: W/dalvikvm(9151): threadid=11: thread exiting with uncaught exception (group=0x40d09930)
04-01 16:06:48.422: E/AndroidRuntime(9151): FATAL EXCEPTION: AsyncTask #1
04-01 16:06:48.422: E/AndroidRuntime(9151): java.lang.RuntimeException: An error occured while executing doInBackground()
04-01 16:06:48.422: E/AndroidRuntime(9151):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.lang.Thread.run(Thread.java:856)
04-01 16:06:48.422: E/AndroidRuntime(9151): Caused by: java.lang.NullPointerException
04-01 16:06:48.422: E/AndroidRuntime(9151):     at com.example.json_parser.MainActivity$task.doInBackground(MainActivity.java:63)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at com.example.json_parser.MainActivity$task.doInBackground(MainActivity.java:1)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-01 16:06:48.422: E/AndroidRuntime(9151):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-01 16:06:48.422: E/AndroidRuntime(9151):     ... 4 more
04-01 16:06:48.461: D/libEGL(9151): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-01 16:06:48.476: D/libEGL(9151): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-01 16:06:48.484: D/libEGL(9151): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-01 16:06:48.570: D/OpenGLRenderer(9151): Enabling debug mode 0
04-01 16:06:50.273: D/dalvikvm(9151): GC_CONCURRENT freed 182K, 3% free 8885K/9100K, paused 3ms+23ms, total 41ms 
```

我有那个问题？

我错误地返回 Json 对象？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:21:31.013

顾名思义，AsyncTask*异步*执行任务。这意味着它不会阻止执行，因此：

```
 JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url); 
```

您返回的`jParser.getJsonFromUrl(url)`值为 null。AsyncTask`doInBackground()`尚未执行。

您需要将解析代码移动到`doInBackground()`，然后将任何更新 UI 的代码移动到`onPostExecute()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:27:04.400

问题是您试图在后台线程完成工作之前使用您的对象。您应该使用 AsyncTask 的[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)方法，如下所示：

```
 @Override
        protected void onPostExecute(JSONObject result)
        {
            super.onPostExecute(result);
            // use your "result" JSONObject for whatever purposes, it's ready now
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:34:33.950

我猜这里的问题是您正在获取响应。`doInBackground`尝试将转换为的逻辑`JSONObject`与 doInBackground 分开

将类的返回类型更改`doInBackground`为并剪切此代码：`JSONParser``void`

```
 try {
                 BufferedReader reader = new BufferedReader(new InputStreamReader(
                         is, "iso-8859-1"), 8);
                 StringBuilder sb = new StringBuilder();
                 String line = null;
                 while ((line = reader.readLine()) != null) {
                     sb.append(line + "\n");
                 }
                 is.close();

                 json = sb.toString();
             } catch (Exception e) {
                 Log.e("Buffer Error", "Error converting result " + e.toString());
             }

             // try parse the string to a JSON object
             try {
                 jObj = new JSONObject(json);
             } catch (JSONException e) {
                 Log.e("JSON Parser", "Error parsing data " + e.toString());
             }

             // return JSON String
             return jObj; 
```

并将其放入并将其返回类型更改为`onPostExecute`JSONObject`ParseJson`

试试这个并恢复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:21:45.423

您正在尝试在启动异步操作后立即读取它的结果。

我建议您在活动中创建回调方法，以便`AsyncTask`在后台工作完成时通知活动。

像这样的东西：

```
// Callback interface
public interface JSONParserListener {
    void onEndGettingJSON(JSONObject resultJSONObject);
}

// In JSONParser class
public class JSONParser {
    private final JSONParserListener listener;

    public JSONParser(final JSONParserListener listener) {
         this.listener = listener;
    }

    // At the end of getting json just callback listener with result
    listener.onEndGettingJSON(jObj);
}

// Your activity should implement JSONParserListener
// Catch result in onEndGettingJSON() method

public class MainActivity extends Activity implements JSONParserListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // Your code...
        // Creating JSON Parser instance WITH CALLBACK LISTENER
        JSONParser jParser = new JSONParser(this);
        jParser.getJSONFromUrl(url);
    }

    // Callback handler
    public void onEndGettingJSON(final JSONObject resultJSON) {
        // Here you can do what you want with downloaded JSON :)
    }
} 
```

另外，我建议您将`JSONParser`类重命名为类似的名称，`JSONDowloadTask`因为当我看到名为的类时，`JSONParser`我认为它应该只解析 JSON 并将解析的实体返回给我，但您`JSONParser`实际上是 DOWNLOAD (O_o) JSON :)

# html - html-erb 文件中的 Ruby 问题

> ID：15744267
> 
> 赞同：3
> 
> 时间：2013-04-01T13:19:02.230
> 
> 标签：html, ruby-on-rails, ruby

我把它放在我的 erb 文件中

```
<% @user_friend.each do |friends| -%>
  <%= content_tag :p, :class => "popin" do %>
    friends.email
  <% end %>
<% end -%> 
```

我收到此错误消息：

```
compile error
/var/www/gitorious/app/views/campaigns/new.html.erb:25: syntax error, unexpected ')'
..._tag :p, :class =>"popin" do ).to_s); @output_buffer.concat ...
                              ^
/var/www/gitorious/app/views/campaigns/new.html.erb:28: syntax error, unexpected kEND, expecting ')'
;  end ... 
```

有人可以解释我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:27:48.190

`friends.email`是 ruby​​ 代码，你只需要像下面这样：

```
<% @user_friend.each do |friends| -%>
  <%= content_tag :p, friends.email，:class =>"popin" %>
<% end -%> 
```

# android - 在偏移滑动菜单后面

> ID：15744274
> 
> 赞同：1
> 
> 时间：2013-04-01T13:19:32.290
> 
> 标签：android, xml, slidingmenu

我正在使用 jfeinstein10 的滑动菜单。我有以下 xml 代码：

```
<com.slidingmenu.lib.SlidingMenu
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:sliding="http://schemas.android.com/apk/res-auto"
android:id="@+id/sliding_in"
android:layout_width="match_parent"
android:layout_height="match_parent"
sliding:viewBehind="@layout/activity_main"
sliding:viewAbove= "@layout/slidingcontent"
sliding:touchModeAbove="fullscreen"
sliding:selectorEnabled="true"
sliding:behindOffset="@dimen/slidingmenu"
/> 
```

@dimen 我创建了一个值为 100px 的新维度：

```
 <dimen name = "slidingmenu">100px</dimen> 
```

但是，当我运行项目时，滑动菜单会覆盖整个屏幕。如果我在 onCreate 中加入以下行，它会起作用：

`getSlidingMenu().setBehindOffset(100)`

如何在 xml 中指定整个布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T15:49:07.873

假设您有一个名为“dimens”的 xml 文件存储在“values”文件夹中。

```
<resources>

<!-- Default screen margins, per the Android Design guidelines. -->
<dimen name="slidingmenu_offset">160dp</dimen>
<dimen name="list_padding">10dp</dimen>
<dimen name="shadow_width">5dp</dimen>

<integer name="num_cols">1</integer>
</resources> 
```

然后你可以使用你的代码如下：

```
SlidingMenu sm = getSlidingMenu();
sm.setBehindOffsetRes(R.dimen.slidingmenu_offset); 
```

# c++ - C ++ mysql错误 - 未定义的参考

> ID：15744277
> 
> 赞同：0
> 
> 时间：2013-04-01T13:19:34.130
> 
> 标签：c++, mysql

我只包括

```
#include "include/mysql.h" 
```

并尝试连接我的 mysql 数据库

```
MYSQL_RES *result;
    MYSQL_ROW row;
    MYSQL *connection, mysql;
    int state;

    mysql_init(&mysql);
    connection = mysql_real_connect(&mysql,"localhost","root","pass","WorkerProject",0,0,0); 
```

我将文件包含在我的项目中。我使用eclipse并链接了项目preporties中的mysql bin、include和lib文件。但是，我在这两行中遇到错误：

```
mysql_init(&mysql);
        connection = mysql_real_connect(&mysql,"localhost","root","pass","WorkerProject",0,0,0); 
```

未定义的引用错误。为什么？

错误：

```
/home/mert/workspace1/Project484/Debug/../src/main.cpp:99: undefined reference to `mysql_init'
/home/mert/workspace1/Project484/Debug/../src/main.cpp:100: undefined reference to `mysql_real_connect' 
```

# android - 如何在其他类中显示列表视图？

> ID：15744281
> 
> 赞同：0
> 
> 时间：2013-04-01T13:19:44.790
> 
> 标签：android, json, listview, arraylist, android-lazyadapter

我制作了一个自定义动画滑动菜单（如 fb），我必须在子布局中插入一个列表视图。但是列表视图位于另一个类中，该类使用惰性适配器通过 json 进行解析。

这是我的主要活动

```
package com.android.appslu;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.util.Log;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.android.appslu.jsonparsing.JSONParsingActivity;

public class MainActivity extends Activity {

    private Button buttonSwitch;
private Button button1;
private View subLayout;
private View topLayout;
private ListView mylist;
private String ArrayList; // ={"Android","iPhone","BlackBerry","AndroidPeople"};
private Display display;
private View fakeLayout;
private AnimationListener AL;
// Values for after the animation
private int oldLeft;
private int oldTop;
private int newleft;
private int newTop;
private int screenWidth;
private int animToPostion;
// TODO change the name of the animToPostion for a better explanation.

private boolean menuOpen = false;

/** Called when the activity is first created. */
@SuppressLint("ResourceAsColor")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    buttonSwitch = (Button) findViewById(R.id.button);
    button1 = (Button) findViewById(R.id.button1);
    subLayout = findViewById(R.id.layout);
    topLayout = findViewById(R.id.layoutTwo);
    mylist = (ListView) findViewById(R.layout.list_item);
    fakeLayout = findViewById(R.id.fake_layouy);
    // TextView yourTextView = (TextView)findViewById(titleId);
    // yourTextView.setHighlightColor(R.color.red);

    // subViewListView.setAdapter((ListAdapter) new
    // ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 ,
    // ArrayList));
    // ListAdapter adapter = new SimpleAdapter(this,
    // mylist,R.layout.list_item, new String[]{TAG_NAME,TAG_URL}, new
    // int[]{R.id.name, R.id.url});

    display = getWindowManager().getDefaultDisplay();
    screenWidth = display.getWidth();
    int calcAnimationPosition = (screenWidth / 3);

    // Value where the onTop Layer has to animate
    // also the max width of the layout underneath
    // Set Layout params for subLayout according to calculation
    animToPostion = screenWidth - calcAnimationPosition;

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            animToPostion, LayoutParams.FILL_PARENT);
    subLayout.setLayoutParams(params);

    topLayout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                if (menuOpen == true) {
                    animSlideLeft();
                }
            }

            return false;
        }
    });

    buttonSwitch.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (menuOpen == false) {
                animSlideRight();

            } else if (menuOpen == true) {
                animSlideLeft();
            }
        }
    });

    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent newIntent = new Intent(MainActivity.this,   JSONParsingActivity.class);
            startActivity(newIntent);
        }
    });

    AL = new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            buttonSwitch.setClickable(false);
            topLayout.setEnabled(false);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            if (menuOpen == true) {
                Log.d("", "Open");
                topLayout.layout(oldLeft, oldTop,
                        oldLeft + topLayout.getMeasuredWidth(), oldTop
                                + topLayout.getMeasuredHeight());
                menuOpen = false;
                buttonSwitch.setClickable(true);
                topLayout.setEnabled(true);
            } else if (menuOpen == false) {
                Log.d("", "FALSE");
                topLayout.layout(newleft, newTop,
                        newleft + topLayout.getMeasuredWidth(), newTop
                                + topLayout.getMeasuredHeight());
                topLayout.setEnabled(true);
                menuOpen = true;
                buttonSwitch.setClickable(true);
            }
        }
    };
}

public void animSlideRight() {

    fakeLayout.setVisibility(View.VISIBLE);
    newleft = topLayout.getLeft() + animToPostion;
    newTop = topLayout.getTop();
    TranslateAnimation slideRight = new TranslateAnimation(0, newleft, 0, 0);
    slideRight.setDuration(500);
    slideRight.setFillEnabled(true);
    slideRight.setAnimationListener(AL);
    topLayout.startAnimation(slideRight);

}

public void animSlideLeft() {

    fakeLayout.setVisibility(View.GONE);
    oldLeft = topLayout.getLeft() - animToPostion;
    oldTop = topLayout.getTop();
    TranslateAnimation slideLeft = new TranslateAnimation(newleft, oldLeft,
            0, 0);
    slideLeft.setDuration(500);
    slideLeft.setFillEnabled(true);
    slideLeft.setAnimationListener(AL);
    topLayout.startAnimation(slideLeft);
}
}` 
```

JSONParsingActivity 是

```
package com.android.appslu.jsonparsing;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

import com.android.appslu.MainActivity;
import com.android.appslu.R;

public class JSONParsingActivity extends ListActivity {
private static String url = "http:EXAMPLE.COM";
// JSON Node names

private static final String TAG_CONTACTS = "Categories";
private static final String TAG_CATBOOK = "BuzzByappcategory";
private static final String TAG_APPS = "BuzzBysource";

static final String TAG_NAME = "CatName";
private static final String TAG_ID = "CatId";
static final String TAG_EMAIL = "CatIcon";
//private static final String TAG_PHONE_HOME = "home";

//  private static final String TAG_PHONE_OFFICE = "office";

    Bitmap image;
// contacts JSONArray
JSONObject catlist = null;
JSONArray catbook = null;
JSONArray catapps = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_item);

    // Hashmap for ListView

    ArrayList<HashMap<String, String>> catList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    Jparser jParser = new Jparser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONfromUrl(url);

    try {
        // Getting Array of Contacts
        catlist = json.getJSONObject(TAG_CONTACTS);

        catbook = catlist.getJSONArray(TAG_CATBOOK);
        // looping through All Contacts
        for(int i = 0; i < catbook.length(); i++){
            JSONObject c = catbook.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String email = c.getString(TAG_EMAIL);
//          String address = c.getString(TAG_ADDRESS);
    //      String gender = c.getString(TAG_GENDER);

            // Phone number is agin JSON Object
//              JSONObject phone = c.getJSONObject(TAG_PHONE);
//              String mobile = phone.getString(TAG_PHONE_MOBILE);
//              String home = phone.getString(TAG_PHONE_HOME);
//              String office = phone.getString(TAG_PHONE_OFFICE);
//              
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
    //      map.put(TAG_PHONE_MOBILE, mobile);

            // adding HashList to ArrayList
            catList.add(map);
        }

        catapps = catlist.getJSONArray(TAG_APPS);
        // looping through All Contacts
        for(int i = 0; i < catapps.length(); i++){
            JSONObject c = catapps.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String email = c.getString(TAG_EMAIL);
//          String address = c.getString(TAG_ADDRESS);
    //      String gender = c.getString(TAG_GENDER);

            // Phone number is agin JSON dObject
//              JSONObject phone = c.getJSONObject(TAG_PHONE);
//              String mobile = phone.getString(TAG_PHONE_MOBILE);
//              String home = phone.getString(TAG_PHONE_HOME);
//              String office = phone.getString(TAG_PHONE_OFFICE);
//              
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
    //      map.put(TAG_PHONE_MOBILE, mobile);

            // adding HashList to ArrayList
            catList.add(map);
        }

    } catch (JSONException e) {
        e.printStackTrace();

    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new LazyAdapter(this, catList);
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((ImageView) view.findViewById(R.id.email)).getTag().toString();
//              String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_EMAIL, cost);
            //in.putExtra(TAG_PHONE_MOBILE, description);
            startActivity(in);

        }
    });

//      Intent i=new Intent(JSONParsingActivity.this,MainActivity.class);
//         i.putStringArrayListExtra("key",arl);
//         startActivity(i);
//      

} 

} 
```

主要活动的xml是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<SurfaceView
    android:id="@+id/surfaceView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<RelativeLayout
    android:id="@+id/layout"
    android:layout_width="220dp"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/fake_layouy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone" >
    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <TextView 
            android:id="@+id/name_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
        <ImageView android:id="@+id/email_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
    </ListView>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/layoutTwo"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/scrollback"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="2dp"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/layoutThree"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/button" >
        </ListView>

        <Button
            android:id="@+id/button"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:text="slide" />

    </LinearLayout>
</RelativeLayout> 
```

我的问题是如何在 MainActivity 的子布局中显示来自 JSONParsingActivity 的列表视图。

我是android编程的新手..请帮助..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:42:50.557

`JSONParsingActivity` 用 ListFragment扩展你的。加载`JSONParsingActivity`您的主要活动。

**用代码更新**

```
FragmentManager fragmentManager = getFragmentManager()
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction(); 
```

然后，您可以使用 add() 方法添加片段，指定要添加的片段和插入片段的视图。

```
ExampleFragment fragment = new ExampleFragment();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit(); 
```

请[参考这个链接](http://developer.android.com/guide/components/fragments.html)，关于片段的一切都在这里解释。

这是您可以在片段中设置 UserInterface 的方式。第一个的解决方案 1。

```
public static class ExampleFragment extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.example_fragment, container, false);
}
} 
```

第二个问题的解决方案。

```
 LazyAdapter(getActivity(), ArrayList<HashMap<String,String>>) 
```

# windows-8 - 我需要通过在 windows8 中使用 linqtotwitter 库来检查用户是否经过身份验证

> ID：15744286
> 
> 赞同：1
> 
> 时间：2013-04-01T13:19:53.727
> 
> 标签：windows-8, linq-to-twitter

我需要使用 linqtotwitter 库验证用户是否成功通过身份验证到他/她的 Twitter 帐户。通常我能够通过打开 webview 登录到 twitter 帐户。但我无法找到他/她是否经过身份验证。这是我的代码。

```
 var auth = new WinRtAuthorizer
        {
            Credentials = new LocalDataCredentials
            {
                ConsumerKey = Constants.TWITTER_CONSUMERKEY,
                ConsumerSecret = Constants.TWITTER_CONSUMERSECRET
            },
            UseCompression = true,
            Callback = new Uri("http://linqtotwitter.codeplex.com/")
        };

        if (auth == null || !auth.IsAuthorized)
        {
            await auth.AuthorizeAsync();
        }

         twitterCtx = new TwitterContext(auth); 
```

我能够获取 twitter 上下文，但我无法找到登录是否成功。一旦用户成功，我需要打开弹出窗口。任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:17:40.153

您可以使用 Account/VerifyCredentials，如下所示：

```
 var accounts =
            from acct in twitterCtx.Account
            where acct.Type == AccountType.VerifyCredentials
            select acct; 
```

# iphone - iOS Autolayout - 如何在视图之间设置两个不同的距离，取决于屏幕高度

> ID：15744287
> 
> 赞同：36
> 
> 时间：2013-04-01T13:19:54.980
> 
> 标签：iphone, ios, ios6, autolayout

我知道我错过了一些东西，因为这必须是容易实现的。

我的问题是我的“加载屏幕”（即在启动后立即出现的那个）中有一个 UIImageView，其中包含两个不同的图像，分别用于 3.5 英寸和 4 英寸大小的屏幕。在该图像的某个位置，我放置了一个 UIActivityIndi​​cator，以告诉用户应用程序正在后台加载某些内容。两个图像的那个位置不一样，因为其中一个明显高于另一个，所以我想设置一个自动布局约束，允许我将活动指示器放在不同的高度，这取决于应用程序是否在iPhone 5 与否。

如果没有自动布局，我会将视图的 frame.origin.y 设置为 300（例如），然后在 ViewController 的 viewDidLoad 方法中，我会询问应用程序是否在 iPhone 5 中运行，所以我d 将值更改为例如 350。我不知道如何使用 Autolayout 执行此操作，我认为它必须非常简单。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-01T21:52:54.637

您可以在视图控制器上创建一个`NSLayoutConstraint`插座，并将该插座连接到您的 xib 或情节提要中活动指示器的 Y 约束。然后，将一个`updateViewContraints`方法添加到您的视图控制器并根据屏幕大小更新约束的常量。

[![将约束连接到出口](https://i.stack.imgur.com/BUwMv.gif)](https://i.stack.imgur.com/BUwMv.gif)

这是一个例子`updateViewConstraints`：

```
- (void)updateViewConstraints {
    [super updateViewConstraints];
    self.activityIndicatorYConstraint.constant =
        [UIScreen mainScreen].bounds.size.height > 480.0f ? 200 : 100;
} 
```

当然，您需要输入适当的值而不是`200`and `100`。您可能想要定义一些命名常量。另外，别忘了打电话`[super updateViewConstraints]`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-05-19T14:06:12.367

@Rob 的问题是你应该为每个约束做很多代码。所以要解决这个问题，只需`ConstraintLayout`在代码中添加类并修改 IB 中所需设备的约束常量值：

[![在此处输入图像描述](https://i.stack.imgur.com/mWG3K.png)](https://i.stack.imgur.com/mWG3K.png)

```
//
//  LayoutConstraint.swift
//  MyConstraintLayout
//
//  Created by Hamza Ghazouani on 19/05/2016.
//  Copyright © 2016 Hamza Ghazouani. All rights reserved.
//

import UIKit

@IBDesignable
class LayoutConstraint: NSLayoutConstraint {

    @IBInspectable
    var 3¨5_insh: CGFloat = 0 {
        didSet {
            if UIScreen.main.bounds.maxY == 480 {
                constant = 3¨5_insh
            }
        }
    }

    @IBInspectable
    var 4¨0_insh: CGFloat = 0 {
        didSet {
            if UIScreen.main.bounds.maxY == 568 {
                constant = 4¨0_insh
            }
        }
    }

    @IBInspectable
    var 4¨7_insh: CGFloat = 0 {
        didSet {
            if UIScreen.main.bounds.maxY == 667 {
                constant = 4¨7_insh
            }
        }
    }

    @IBInspectable
    var 5¨5_insh: CGFloat = 0 {
        didSet {
            if UIScreen.main.bounds.maxY == 736 {
                constant = 5¨5_insh
            }
        }
    }
} 
```

不要忘记继承你的类约束，`ConstraintLayout` 我将很快添加objective-c版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:30:18.210

自动布局中管理 UI 对象位置的基本工具是约束。约束描述了两个视图之间的几何关系。例如，您可能有一个约束：“进度条的右边缘连接到标签的左边缘，它们之间有 40 个空白点。”</p>

这意味着使用 AutoLayout 您不能根据 UIDevice 的模式进行有条件的位置设置，而是可以创建一个视图布局来修改自身，例如。该应用程序根据约束在 3.5' 全屏 (IPhone4) 或 4' 全屏 (IPhone5) 上运行。

因此，使用约束解决您的问题的选项：

1）在您的布局上找到一个视图，该视图可用于创建约束以相对定位进度条。（使用 CMD 按钮选择视图和进度条，然后使用 Editor/Pin/Vertical Spacing 菜单项在 2 个对象之间创建垂直约束）

2）创建一个绝对约束以将进度条的位置粘贴到屏幕边缘（保持空间）或居中

我发现这个关于 AutoLayout 的教程很有帮助，它也可能对你有益： [http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

请注意：自动布局仅适用于 IOS 6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T10:40:33.967

我通常总是尝试留在 Interface Builder 中设置约束。例如，如果您在 iPhone 4 和 6 上具有完全不同的布局，那么深入研究代码以获得更多控制通常很有用。

如前所述，您不能在 Interface Builder 中使用条件，这时将约束链接到您的视图控制器真的很方便。

以下是针对不同屏幕尺寸解决自动布局问题的 3 种方法的简短说明：http: [//candycode.io/how-to-set-up-different-auto-layout-constraints-for-different-screen-sizes/](http://candycode.io/how-to-set-up-different-auto-layout-constraints-for-different-screen-sizes/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-17T10:51:44.997

# 新方式，不写一行！

无需编写基于设备的条件，例如：-

```
if device == iPhoneSE { 
   constant = 44 
} else if device == iPhone6 {
   constant = 52
} 
```

我创建了一个库[Layout Helper](https://github.com/tryWabbit/Layout-Helper)，因此现在您无需编写任何代码即可更新每个设备的约束。

[![在此处输入图像描述](https://i.stack.imgur.com/LlfU2.png)](https://i.stack.imgur.com/LlfU2.png)

# 第1步

### 将 NSLayoutHelper 分配给您的约束

[![在此处输入图像描述](https://i.stack.imgur.com/yQ7J9.gif)](https://i.stack.imgur.com/yQ7J9.gif)

# 第2步

### 更新所需设备的约束

[![在此处输入图像描述](https://i.stack.imgur.com/OWZBh.gif)](https://i.stack.imgur.com/OWZBh.gif)

# 第 3 步

### 运行应用程序并查看 MAGIC

[![在此处输入图像描述](https://i.stack.imgur.com/HS0zy.gif)](https://i.stack.imgur.com/HS0zy.gif)

# javascript - 如何从以下 json 数组创建 Backbone 集合？

> ID：15744288
> 
> 赞同：0
> 
> 时间：2013-04-01T13:19:58.187
> 
> 标签：javascript, api, node.js, backbone.js, collections

我得到一个`JSON`包含用户的以下（/users.json）：

```
[
  [
    { "id": "43343", "project_id": "1", "username": "Amy" }
    { "id": "34244", "project_id": "1", "username": "Tommy" }
  ],
  [
    { "id": "76575", "project_id": "2", "username": "Izzy" }
    { "id": "13322", "project_id": "2", "username": "Sam" }
  ],
  { "id": "09983", "project_id": "3", "username": "Max" }
] 
```

当项目有一个用户时，我得到一个不在数组中的用户哈希。

我想与所有用户建立一个 Backbone 集合。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:52:44.830

您提供一组用户数组。因此，要在 init 方法中获取所有用户，您可以为其提供数据，但作为用户数组，即您将使用下划线 flatten 方法将这个原始数组数组展平一次：

`data = _(data).flatten(true);`

然后集合构造函数将本机理解您的 json 数组。

但也许您已经在 fetching 方法中进行了这种转换，这不是您面临的问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:29:40.090

如果您已经使用用户模型定义了一个集合（例如 userCollection），您应该能够简单地执行以下操作：

```
var col;
$.getJSON("/users.json", function(data) {
    col = new userCollection(data);
}); 
```

这更有可能在集合的 fetch 函数中完成，但这里的原则是您可以将对象数组传递给集合，它将所有从 json 到主干模型的编组。

# css - 页脚隐藏的内容 DIV

> ID：15744292
> 
> 赞同：2
> 
> 时间：2013-04-01T13:20:14.917
> 
> 标签：css, html

我注意到，当我的网页上有很长的文本时，即使向下滚动最大值，我也看不到全文。在此示例[http://jsfiddle.net/Grek/yYBE5/](http://jsfiddle.net/Grek/yYBE5/)中，看起来段落的结尾是隐藏的（在页脚后面？）。我该如何解决这个问题并让文本区域（DIV content-right）在页脚开始的地方停止？非常感谢

CSS：

```
@charset"UTF-8";
/* CSS Document */

Html, body {
    padding: 0;
    margin: 0;
    height: 100%;
    font-family: Tahoma, Geneva, sans-serif;
    background: rgb(255,255,255); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */

    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSI1MyUiIHN0b3AtY29sb3I9IiNmNmY2ZjYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZjdmN2Y3IiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%, rgba(255,255,255,1)), color-stop(53%, rgba(246,246,246,1)), color-stop(100%, rgba(247,247,247,1))); /* Chrome,Safari4+ */
    background: -webkit-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%); /* Opera 12+ */
    background: -ms-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%); /* IE10+ */
    background: radial-gradient(ellipse at center, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%); /* W3C */
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f7f7f7', GradientType=1 ); /* IE6-8 fallback on horizontal gradient */
}
#header {
    width: 100%;
    height: 60px;
    border-top: solid 4px #00539E;
}
#logo {
    position: absolute;
    left: 20px;
    top: 35px;
    color: #000;
    font-size: 20px;
}
#header-text {
    width: 400px;
    position: absolute;
    top: 70px;
    left: 20px;
    font-size: 12px;
    font-weight: 300;
    color: #333;
}
/* mainmenu */

#mainmenu {
    width: 100%;
    margin-right: 20px;
    /* min-height: 180px; */
    padding-bottom: 20px;
    margin-top: -52px;
    /* padding-top: -42px; */
    overflow: hidden;
}
#mainmenu ul {
    list-style: none;
    margin: 0;
    float: right;
    color: #FFF;
}
#mainmenu ul li {
    display: inline-block;
    float: left;
    width: 140px;
    line-height: 18px;
}
#mainmenu>ul>li {
    margin-left: 20px;
}
#mainmenu ul li a {
    font-size: 12px;
    display: block;
    text-decoration: none;
}
#mainmenu ul li a, #mainmenu ul ul:hover li a {
    color: #333;
    padding-left: 4px;
    letter-spacing: 1px;
    -moz-transition-property: all, -moz-transform;
    -moz-transition-duration: .4s, .4s, .4s, .4s;
    -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -ms-transition-property: all, -ms-transform;
    -ms-transition-duration: .4s, .4s, .4s, .4s;
    -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -o-transition-property: all, -o-transform;
    -o-transition-duration: .4s, .4s, .4s, .4s;
    -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -webkit-transition-property: all, -webkit-transform;
    -webkit-transition-duration: .4s, .4s, .4s, .4s;
    -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    transition-property: all, transform;
    transition-duration: .4s, .4s, .4s, .4s;
    transition-timing-function: ease-out, ease-in, linear, ease-in-out;
}
#mainmenu ul ul li a:hover, #mainmenu ul ul li.current-menu-item a {
    color: #005EBC;
    -moz-transition-property: all, -moz-transform;
    -moz-transition-duration: .4s, .4s, .4s, .4s;
    -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -ms-transition-property: all, -ms-transform;
    -ms-transition-duration: .4s, .4s, .4s, .4s;
    -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -o-transition-property: all, -o-transform;
    -o-transition-duration: .4s, .4s, .4s, .4s;
    -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -webkit-transition-property: all, -webkit-transform;
    -webkit-transition-duration: .4s, .4s, .4s, .4s;
    -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    transition-property: all, transform;
    transition-duration: .4s, .4s, .4s, .4s;
    transition-timing-function: ease-out, ease-in, linear, ease-in-out;
}
p {
    font-size: 13px;
    color: #333;
    font-weight: 300;
}
h1 {
    font-size: 30px;
    letter-spacing: 1px;
    color: #0064C5;/* display: inline-block; */
    margin-bottom: 0;
}
h2 {
    font-size: 22px;
    letter-spacing: 1px;
    color: #BBB;/* display: inline-block; */
    margin-bottom: 0;
}
H5 {
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 5px;
    padding-left: 4px;
    font-size: 11px;
    border-bottom: 1px dotted #666;
    background: rgb(29,115,196); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */

    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFkNzNjNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDY0YzUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(29,115,196,1)), color-stop(100%, rgba(0,100,197,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%); /* W3C */
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1d73c4', endColorstr='#0064c5', GradientType=0 ); /* IE6-8 */
}
div#content-left {
    float: left;
    width: 40%;
}
div#content-headline {
    float: right;
    width: 55%;
    padding-right: 50px;
    overflow: auto;
}
div#content-right {
    float: right;
    width: 55%;
    max-height: 60%;
    padding-right: 50px;
}
div#content-center {
    overflow: hidden;
}
/* footer */
#main_footer {
    clear:both;
    position: fixed;
    width:100%;
    background: #cfc8c0;
    height: 46px;
    overflow: hidden;
    display: block;
    bottom:0;
}
#main_footer #lien_hot_news {
    background: #e14242 url(pics/hot_news.gif) 50% 0 no-repeat;
    color: #fff;
    font: italic normal 24px Georgia, serif;
    text-decoration:none;
    height: 38px;
    width: 145px;
    padding-top: 8px;
    display: block;
    text-align: center;
    float: left;
}
#main_footer #lien_hot_news:hover {
    background-color: #e92c26;
}
#main_footer #dernier_tweet {
    float: left;
    margin-left: 11px;
    margin-top: 11px;
    background: #fff url(pics/dernier_tweet_gauche.gif) 0 0 no-repeat;
    position: relative;
}
#main_footer #dernier_tweet .lien_twitter {
    position: absolute;
    top: 0;
    left: 0;
    width: 30px;
    height: 24px;
    display: block;
}
#main_footer #dernier_tweet .inner {
    max-width: 550px;
    background: url(../images/picto/dernier_tweet_droite.gif) right 0 no-repeat;
    padding: 4px 15px 5px 53px;
    height: 15px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
#main_footer #dernier_tweet a {
    color: #75716c;
}
#main_footer #dernier_tweet a:hover {
    color: #444;
}
#main_footer #dernier_tweet .last_tweet {
    overflow: hidden;
}
#main_footer .autres_liens {
    position: absolute;
    right: 12px;
    top: 9px;
    font: italic normal 15px Georgia, serif;
    color: #95897c;
}
#main_footer .autres_liens .label {
    float: left;
    padding-right: 3px;
    padding-top: 5px;
}
#main_footer .autres_liens a {
    float: left;
    display: block;
    margin-left: 5px;
}
#main_footer .autres_liens a img {
    width: 28px;
    height: 28px;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:28:44.373

[http://jsfiddle.net/yYBE5/5/](http://jsfiddle.net/yYBE5/5/)

您的页脚位置固定，因此它会超出您的常规内容。我添加了一个内容容器并给它

```
#content_container {
    float: left;
    padding-bottom: 46px;
} 
```

显然边距底部在 Chrome 中不起作用，所以我将其更新为边距底部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:35:18.400

将 padding-bottom 添加到 body 将不起作用

**解决方案：**

更新黄教给出的小提琴。将 padding-bottom 添加到`content-container`div

**演示**：http: [//jsfiddle.net/yYBE5/4/](http://jsfiddle.net/yYBE5/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:23:35.477

```
<style>
#main_footer .autres_liens a img {
    width: 28px;
    height: 28px;
    display: block;
}
</style> 
```

宽度是你的罪魁祸首。将其删除，或将其容纳在应该存在的图像中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:35:00.330

取出`Max height`并放置`padding-bottom: 42px`

```
div#content-right {
float: right;
width: 55%;
padding-right: 50px;
padding-bottom: 42px;
} 
```

检查这个

[http://jsfiddle.net/yYBE5/3/](http://jsfiddle.net/yYBE5/3/)

# sql - SQL (TSQL) - 在另一列不为空的列中选择值？

> ID：15744294
> 
> 赞同：0
> 
> 时间：2013-04-01T13:20:30.957
> 
> 标签：sql, sql-server, tsql

我会保持简单 - 我想知道是否有一种好方法可以选择一列中的所有值，因为它在另一列中永远不会有空值。例如。

```
 A      B
-----  -----

  1      7
  2      7
NULL     7
  4      9
  1      9
  2      9 
```

从上面的集合中，我只想要 B 中的 9 而不是 7，因为 7 在 A 中有一个 NULL。显然我可以将它包装为子查询并使用 IN 子句等，但这已经是一个非常独特的集合的一部分，我正在寻找保持这种效率。

我应该注意，就我的目的而言，这只是一种单向比较......我只会在 B 中返回值并检查 A。

我想有一种简单的方法可以做到这一点，但我现在没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:21:43.733

你可以这样做：

```
select *
from t
where t.b not in (select b from t where a is null); 
```

如果您只想要不同的 b 值，那么您可以执行以下操作：

```
select b
from t
group by b
having sum(case when a is null then 1 else 0 end) = 0; 
```

最后，您可以使用窗口函数：

```
select a, b
from (select t.*,
             sum(case when a is null then 1 else 0 end) over (partition by b) as NullCnt
      from t
     ) t
where NullCnt = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:22:43.280

下面的查询只会在最终结果中输出一列。记录按列分组`B`并测试记录是否为*空*。当记录为*null*时，该组的值将每次增加 1。该`HAVING`子句仅过滤值为 的组`0`。

```
SELECT  B
FROM    TableName
GROUP   BY B
HAVING  SUM(CASE WHEN A IS NULL THEN 1 ELSE 0 END) = 0 
```

如果要从记录中获取所有行，可以使用 join。

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  B
            FROM    TableName
            GROUP   BY B
            HAVING  SUM(CASE WHEN A IS NULL THEN 1 ELSE 0 END) = 0
        ) b ON  a.b = b.b 
```

# java - java：如何确保客户不能同时预订两个会话

> ID：15744296
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:20:59.103
> 
> 标签：java, mysql

我有一个包含会话名称及其时间的 sql 数据库我在 j-list 中检索了会话名称并在 j-text 字段中检索了它们的时间

如果您不能同时预订两个会议，我希望有人帮助我解决逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:26:27.497

将会话时间和名称定义为在您的表中是唯一的，然后 MySQL 将注意不要同时创建两条记录。

像那样：

```
CREATE UNIQUE INDEX session_index ON your_table (session_time, session_name); 
```

在您的代码中，您需要处理 MySQL 抛出的异常，以防出现重复条目​​。

# vb.net - 正常 v 对服务的异步调用

> ID：15744298
> 
> 赞同：0
> 
> 时间：2013-04-01T13:21:07.787
> 
> 标签：vb.net, winforms, wcf

我在客户端应用程序上配置了 wcf 服务引用。它提供了一系列功能来检索和发送数据到基于 Web 的数据库。举个例子：

```
Function errorCodesGetAll(ByVal uname As String, ByVal pword As String) As String 
```

和

```
Function errorCodesGetAllAsync(ByVal uname As String, ByVal pword As String) As System.Threading.Tasks.Task(Of String) 
```

我知道我可以使用以下代码使用第一个函数填充富文本框：

```
 RichTextBox1.Text = getCountryList

 Private Function getCountryList() As String
    Dim svc As New ServiceReference2.ERSAPIServiceClient
    svc.Open
    Dim str As String = svc.errorCodesGetAll(username, password)
    svc.Close()
    Return str
End Function 
```

由于 WCF 对我来说仍然是一个非常新的领域，我想知道如何填充相同的富文本框，但这次使用 errorCodesGetAll 函数的 Async 变体？

感谢您就如何最好地使用异步变体提供任何建议或一般指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:28:45.157

当您在 UI 线程上时（例如，在`Click`表单中按钮的事件处理程序上）调用该方法的异步版本很有趣，因为这不会通过阻塞线程来“冻结”UI，等待网络调用完成。

由于您获得了返回结果的 *Async 方法，`Task<T>`因此我假设您使用的是 .NET Framework 4.5。如果是这种情况，您可以利用`Async`/`Await`关键字以相当简单的方式调用异步版本，同时仍然可以防止 UI 线程被阻塞。

```
Private Async Sub Button_Click(ByVal sender as Object, ByVal e as EventArgs)
    RichTextBox1.Text = Await getCountryList
End Sub

Private Async Function getCountryList() As Task(Of String)
    Dim svc As New ServiceReference2.ERSAPIServiceClient
    svc.Open
    Dim str As String = Await svc.errorCodesGetAllAsync(username, password)
    svc.Close()
    Return str
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:48:59.177

您的服务将公开“完成”事件以及异步方法，您需要处理该事件。

打开服务，连接事件并调用异步方法

```
 Private Sub GetCodes()

         Dim svc As New ServiceReference2.ERSAPIServiceClient
        AddHandler ServiceReference2.errorCodesGetAllCompleted, AddressOf errorCodesGetAllCompletedhandler
        ServiceReference2.errorCodesGetAllAsync()
        ServiceReference2.Close()

    End Sub 
```

处理事件。这将在服务返回时被调用。（通常我不会在方法末尾添加“处理程序”并将其命名为与事件完全相同，但我认为它可能有助于区分事件和处理程序）

```
 Private Sub errorCodesGetAllCompletedHandler(ByVal sender As Object, ByVal e As ServiceReference2.errorCodesGetAllEventArgs)

        If Not e.Result Is Nothing Then
            textbox.text = e.Result
        End If

    End Sub 
```

# haskell - 多个按钮表单导致无效参数错误

> ID：15744304
> 
> 赞同：1
> 
> 时间：2013-04-01T13:21:41.637
> 
> 标签：haskell, yesod

我想在工作的单子获取表单中添加另一个按钮，这会触发对整个表单的不同处理（例如论坛帖子表单中常见的预览和提交按钮）。

因此，我尝试遵循此答案中对[这个较旧问题](https://stackoverflow.com/questions/7051714/yesod-form-with-multiple-buttons)的建议：

首先，添加另一个命名输入按钮：

```
<input type="submit" name="preview" value="Preview"> 
```

二、添加对runInputGet的调用：

```
((res,widget),enc) <- runFormGet myform
isPreview <- runInputGet $ iopt boolField "preview"
... -- pre-processing the form input, i.e. basic error checks
case (isPreview,res') of
   (Just True, Just checkedRes) -> ... -- preview processing
   ( _       , Just checkedRes) -> ... -- proper processing 
```

不幸的是，它不起作用：每当我按下我的新按钮时，我都会得到一个无效的参数页面，说有一个无效的布尔值，其名称附加到第二个提交按钮。

与前面的问题不同的是，我使用的是 GET 表单而不是 POST from。但是，在我看来，我需要在原始表单中包含布尔字段，但是在原始单子表单中添加一个具有相同名称的可选布尔字段根本不会改变任何内容：

```
 _ <- mopt boolField ((String.fromString "preview") { fsName = "preview" }) Nothing 
```

（我不知道如何处理这个拖把的结果，因为我既不需要视图（不应该向用户显示额外的表单字段）也不需要结果（因为这是额外的 runInputGet 已经提供的））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:26:53.500

如果您查看[boolField](http://hackage.haskell.org/packages/archive/yesod-form/1.2.1.3/doc/html/src/Yesod-Form-Fields.html#boolField)的代码，您会发现它对值应该采用的格式有严格的要求。相反，您可能想要使用`textField`- 它接受任何内容 - 然后简单地测试该值是否在场。

# c# - 这就是我们如何创建像 Excel VBA 这样的结构化对象层次结构（对象模型）吗？

> ID：15744306
> 
> 赞同：0
> 
> 时间：2013-04-01T13:21:41.697
> 
> 标签：c#, c#-4.0

我想学习如何创建对象层次结构（如 excel vba 的）。我写了一些代码，想问一下这是否是正确的方法。另外，我想知道创建这种类型的对象结构是否会对性能产生重大影响。我将通过这种方式访问​​对象：

```
Hotel hotel = new Hotel();

int x = hotel.Rooms[1].Count; // just an example

int y = hotel.Rooms.Room.Count; // just an example

    class Hotel
    {
        private int i;
        public Hotel()
        {
            i = 10; // some prossessing to give the value of i. Lets say 10
        }
        public _Rooms Rooms
        {
            get { return new _Rooms(i); }
        }
    }
    class _Rooms
    {
        private int _i;
        public _Rooms(int i)
        {
            this._i = i;
        }
        public _Room this[int i]
        {
            get { return new _Room(_i); }
        }

        public _Room Room // _Room Property
        {
            get { return new _Room(this._i); }
        }
    }
    class _Room
    {
        private int _i;
        public _Room(int i)
        {
            // some prossessing to give the value of i. Lets say :
            _i = i + 10;
        }
        public int Count
        {

            get { _i = 15; return _i; }
        }
    } 
```

***这只是我想要实现的模型的一个简单示例。***

# c++ - 在 C++ 中是文字 0xffffffff int 还是 unsigned

> ID：15744310
> 
> 赞同：25
> 
> 时间：2013-04-01T13:21:51.410
> 
> 标签：c++, integer, literals

据此，没有类型后缀[的](http://en.cppreference.com/w/cpp/language/integer_literal)整数文字总是`int`s。但是，gcc 和 clang 都将`0xffffffff`（或任何显式设置符号位而不是使用 的文字`-`）解释为无符号。哪个是对的？（据此[编译](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)器是）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-01T13:25:27.150

根据 C++11 标准的第 2.14.2/2 段，

> 整数文字的类型是表 6 中可以表示其值的相应列表中的第一个。

表 6 报告对于十六进制常量，类型应为：

*   `int`; 或（如果不合适）
*   `unsigned int`; 或（如果不合适）
*   `long int`; 或（如果不合适）
*   `unsigned long int`; 或（如果不合适）
*   `long long int`; 或者
*   `unsigned long long int`.

假设您的实现有 32 位`int`，因为`0xffffffff`不适合`int`，它的类型应该是`unsigned int`. 对于 64 位的实现`int`，类型为`int`.

*请注意，如果您编写了与十进制*常量相同的文字，则类型只能是：

*   `int`; 或（如果不合适）
*   `long int`; 或（如果不合适）
*   `long long int`.

# java - 如何将从数据库表中获取的数据显示到列表视图中？

> ID：15744311
> 
> 赞同：0
> 
> 时间：2013-04-01T13:21:52.240
> 
> 标签：java, android

我的功能`SQLAdapter class`是

```
public ArrayList<Airline> getairlinedetails(String bookingdate) {

    Cursor curCalllog =db.rawQuery("SELECT * FROM "+ BOOK + 
            " WHERE " + date + 
            " BETWEEN '" + startdate + "' AND '" + enddate + "'", null);

    if (curCalllog != null) {
        if (curCalllog.moveToFirst()) {
            do {
                a=new Airline();
                //a.setBookingdate(curCalllog.getString(1));
                a.setPickupadd(curCalllog.getString(2));
                a.setCity(curCalllog.getString(3));
                a.setTrip(curCalllog.getString(4));
                a.setFdate(curCalllog.getString(5));
                a.setFtime(curCalllog.getString(6));
                a.setCdate(curCalllog.getString(7));
                a.setPtime(curCalllog.getString(8));
                a.setSeats(curCalllog.getInt(9));
                a.setAmount(curCalllog.getInt(10));

                update.add(a);
            } while (curCalllog.moveToNext());
        }
    }

    return update;
} 
```

M 在两个日期之间获取数据，我想将获取的数据显示到列表视图中，请帮助我如何做到这一点我是 android 开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:34:40.997

您可以使用 SimpleCursorAdapter 在 Listview 中显示数据库内容。创建 SimpleCursorAdapter 的实例并将 Cursor 对象传递给它。[参考](http://joesapps.blogspot.in/2011/02/customized-listview-data-display-in.html)这个链接

如果您想要自定义列表视图，您可以通过使用自定义适配器类扩展它来自定义 SimpleCursorAdapter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:37:31.117

你可以按照这个例子：

**DataManipulator.java** -helper 类

```
 //to retrieve data in a list
  public List<String[]> selectAll()
{

    List<String[]> list = new ArrayList<String[]>();
    Cursor cursor = db.query(TABLE_NAME, new String[] { "id","name","number","skypeId","address" },
            null, null, null, null, "name asc"); 

    int x=0;
    if (cursor.moveToFirst()) {
        do {
            String[] b1=new String[]{cursor.getString(0),cursor.getString(1),cursor.getString(2),cursor.getString(3),cursor.getString(4)};

            list.add(b1);

            x=x+1;
        } while (cursor.moveToNext());
    }
    if (cursor != null && !cursor.isClosed()) {
        cursor.close();
    } 
    cursor.close();

    return list;
} 
```

**CheckData.java** // 在列表视图中显示数据

```
 public class CheckData extends ListActivity  {     
TextView selection;
public int idToModify; 
DataManipulator dm;

List<String[]> list = new ArrayList<String[]>();
List<String[]> names2 =null ;
String[] stg1;
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);
      dm = new DataManipulator(this);
      names2 = dm.selectAll();

    stg1=new String[names2.size()]; 

    int x=0;
    String stg;

    for (String[] name : names2) {
        stg = name[1]+" - "+name[2]+ " - "+name[3]+" - "+name[4];

        stg1[x]=stg;
        x++;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(   
            this,android.R.layout.simple_list_item_1,   
            stg1);
    this.setListAdapter(adapter);
    selection=(TextView)findViewById(R.id.selection);

}      

public void onListItemClick(ListView parent, View v, int position, long id) {
    selection.setText(stg1[position]);
}

} 
```

点击此[链接](http://www.vogella.com/articles/AndroidSQLite/article.html)获取完整教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:34:21.510

我假设您正在从数据库中获取数据，并通过带有 Airline 对象的完整 ArrayList 获取数据。

现在要在 ListView 中显示数据`ArrayList<Airline>`，您必须通过扩展或来定义**自定义适配器类**。`BaseAdapter``ArrayAdapter`

给你：[如何为 ListView 定义自定义适配器？](https://www.google.co.in/search?q=android+custom+adapter+for+listview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:36:12.013

> 我想将获取的数据显示到列表视图中请帮助我如何做到这一点我是 android 开发的新手

最简单的方法是使用`ArrayAdapter`内置的`ListView's`行布局。

```
ListView list = (ListView) findViewById(R.id.yourList);
ArrayList<Airline> data = db.getairlinedetails("someString");
ArrayAdapter<Airline> adapter = new ArrayAdapter<Airline>(this, 
                                    android.R.layout.simple_list_item_1, data);

list.setAdapter(adapter); 
```

但既然这样，您还需要覆盖`toString()`您的 Airline 类中的方法。

**原因**是您`ArrayAdapter`会将每个子项（提供的航空公司列表）转换为字符串，如果您不覆盖 toString()，您将获得对象的默认字符串表示，但您可能需要显示航空公司的实例名称，以便您的方法看起来喜欢

```
@Override
public String toString() {
   return this.name;
} 
```

## 笔记：

这是简单的方法。但是，如果您想更好地控制 ListView 并创建自定义列表，我建议您创建自己的 ListAdapter 子类，例如 BaseAdapter 并定义自己的适配器。抱歉，我不会为您编写实现，因为它需要更多代码，但您可以在此处找到很好的示例：

*   [使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

*   [Android ListView、ListActivity 和 ListFragment - 教程](http://www.vogella.com/articles/AndroidListView/article.html)

*   [带有图像和文本的 Android 自定义 ListView](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# sql - .net sql 使用 addWithValue 插入多行

> ID：15744312
> 
> 赞同：0
> 
> 时间：2013-04-01T13:21:53.553
> 
> 标签：sql, vb.net, ado.net

拥有这段代码（我知道 for 循环中的打开/执行查询/关闭连接绝对是可怕的）。

```
Public Shared Sub salvarDatos(ByRef conexion As SqlConnection, ByRef datos As List(Of DatoBdReloj))

    For i = 0 To datos.Count - 1
        Dim laQuery As String = "Insert INTO MARCADASRELOJ  (COD_MAR_RELOJ,FECHA_RELOJ,HORA_RELOJ,MINUTOS_RELOJ,NRO_RELOJ,NRO_TARJ) " & _
                                "VALUES (@codMarReloj,@fechaReloj,@horaReloj,@minutosReloj,@nroReloj,@nroTarj)"

        Dim datoReloj As DatoBdReloj = datos.Item(i)

        Dim command As SqlCommand = New SqlCommand(laQuery, conexion)
        command.Parameters.AddWithValue("codMarReloj", datoReloj.tipoMarca)
        command.Parameters.AddWithValue("fechaReloj", datoReloj.fechaHoraMarcaDT)
        command.Parameters.AddWithValue("horaReloj", datoReloj.fechaHoraMarcaDT.Hour)
        command.Parameters.AddWithValue("minutosReloj", datoReloj.fechaHoraMarcaDT.Minute)
        command.Parameters.AddWithValue("nroReloj", datoReloj.idReloj)
        command.Parameters.AddWithValue("nroTarj", datoReloj.idUsuario)

        conexion.Open()
        command.ExecuteNonQuery()
        conexion.Close()
    Next
End Sub 
```

我对 .net 没有太多经验，但是对于我使用 AddWithValue 方法阅读的内容，我可以防止 sql 注入，并且根据“书”是正确的方法（如果我错了，请告诉我）。

使用“插入 xxx (x1,x2,x3) 值 ("val","val","val"),(...),(...)" 之类的句子来插入多行不是一种选择对我来说，因为我的数据库使用 sql 2005 运行。

无论是 sql 2005 还是 2008，我如何才能在 for 循环中消除可怕的打开/执行/关闭以插入多行，并且还可以通过使用 AddWithValue 方法来防止 sql 注入？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:50:06.850

您好，您可以使用 bulkinsert

代码：[BulkInserter](https://github.com/ronnieoverby/RonnieOverbyGrabBag/blob/master/BulkInserter.cs) [如何使用](https://github.com/ronnieoverby/RonnieOverbyGrabBag/wiki/Bulk-Inserter)

# java - Java Attach API 的限制和范围

> ID：15744315
> 
> 赞同：3
> 
> 时间：2013-04-01T13:22:01.397
> 
> 标签：java, jvm, classloader, bytecode

据我了解，Java 6 中引入的 Attach API 允许通过代理对在目标**JVM中运行的类进行进程间修改。**我的问题是：

1.  **这种策略是否仅限于目标JVM**尚未加载的类的检测？和
2.  这些转换的限制是什么？例如，只能修改现有方法的主体？还是可以更改类定义中的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:28:05.920

1.  您可以通过使用`ClassFileTransformer`. 但是，如果重新转换的方法具有活动堆栈帧，则这些活动帧将继续运行原始方法的字节码。重新转换的方法将用于新的调用。
2.  重新定义/重新转换可能会改变方法体、常量池和属性。重新定义/重新转换不得添加、删除或重命名字段或方法，更改方法的签名或更改继承。这些限制可能会在未来的版本中取消。在应用转换之前，不会检查、验证和安装类文件字节，如果结果字节有误，此方法将引发异常。

[Instrumentation](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html)接口的 javadoc包含您询问的大部分信息。

# database - OAuth2 服务器的范围值是什么？

> ID：15744319
> 
> 赞同：4
> 
> 时间：2013-04-01T13:22:26.453
> 
> 标签：database, api, authorization, oauth-2.0, scopes

我很难理解*范围*是如何工作的。

我在[这里](https://api.stackexchange.com/docs/authentication#scope)找到了一个描述[stackexchange api](http://api.stackexchange.com/)范围的小文本，但我需要更多关于它们如何工作的信息（不是特别是这个......）。有人可以给我一个概念吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:25:40.093

要授权应用程序，您需要调用 OAuth2 授权过程的 URL。这个 URL 在 API 的提供者文档中是“活的”。例如谷歌有这个网址：

`https://accounts.google.com/o/auth2/auth`

您还需要使用此链接指定一些查询参数：

*   `cliend_id`
*   `redirect_uri`
*   `scope`：您的应用程序请求访问的数据。这通常被指定为以空格分隔的字符串列表，尽管 Facebook 使用逗号分隔的字符串。的有效值`scope`应包含在 API 提供程序文档中。对于 Gougle Tasks，`scope`是`https://www.googleapis.com/auth/tasks`. 如果应用程序还需要访问 Google Docs，它会指定一个`scope`值`https://www.googleapis.com/auth/tasks` `https://docs.google.com/feeds`
*   `response_type`：`code`对于服务端web应用流程，表示`code`用户批准授权请求后，将向应用返回授权。
*   `state`：您的应用程序使用的唯一值，以防止对您的实现进行跨站点请求伪造 (CSRF) 攻击。该值应该是此特定请求的随机唯一字符串，不可猜测且在客户端中保密（可能在服务器端会话中）

```
// Generate random value for use as the 'state'.  Mitigates
// risk of CSRF attacks when this value is verified against the
// value returned from the OAuth provider with the authorization
// code.
$_SESSION['state'] = rand(0,999999999);

$authorizationUrlBase = 'https://accounts.google.com/o/oauth2/auth';
$redirectUriPath = '/oauth2callback.php';

// For example only.  A valid value for client_id needs to be obtained 
// for your environment from the Google APIs Console at 
// http://code.google.com/apis/console.
$queryParams = array(
  'client_id' => '240195362.apps.googleusercontent.com',
  'redirect_uri' => (isset($_SERVER['HTTPS'])?'https://':'http://') .
                   $_SERVER['HTTP_HOST'] . $redirectUriPath,
  'scope' => 'https://www.googleapis.com/auth/tasks',
  'response_type' => 'code',
  'state' => $_SESSION['state'],
  'approval_prompt' => 'force', // always request user consent
  'access_type' => 'offline' // obtain a refresh token
);

$goToUrl = $authorizationUrlBase . '?' . http_build_query($queryParams);

// Output a webpage directing users to the $goToUrl after 
// they click a "Let's Go" button
include 'access_request_template.php'; 
```

Google 授权服务器支持的 Web 服务器应用程序的查询字符串参数集如下：

[https://developers.google.com/accounts/docs/OAuth2WebServer?hl=el#formingtheurl](https://developers.google.com/accounts/docs/OAuth2WebServer?hl=el#formingtheurl)

# symfony - Symfony2 Doctrine2 问题与可选的一对一关系

> ID：15744323
> 
> 赞同：26
> 
> 时间：2013-04-01T13:22:46.990
> 
> 标签：symfony, orm, doctrine-orm, one-to-one

我对 Symfony2 中的 Doctrine2 和两个相关实体有疑问。

有一个用户实体*可以*（不是必须）引用一个包含传记等信息的用户元实体。

usermeta 是可选的，因为用户是由另一个系统导入的，而 usermeta 是在我的应用程序中管理的。

当然，我想将两者保存在一起，因此保存用户必须创建或更新用户元实体。

两者都由名为 aduserid 的列连接（两个表中的名称相同）。

我已经认识到，如果 usermeta 是可选引用，那么在这种情况下，拥有方应该是 usermeta，否则学说会加载用户并需要 usermeta 实体 - 但它并不总是存在。

请注意 User->setMeta.. 中的注释。

```
/**
 * User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 */
class User
{
/**
 * @var Usermeta
 * @ORM\OneToOne(targetEntity="Usermeta", mappedBy="user", cascade={"persist"})
 */
protected $meta;

public function getMeta()
{
    return $this->meta;
}

/**
 * 
 * @param Usermeta $metaValue 
 */
public function setMeta($metaValue)
{        
// I've tried setting the join-column-value here 
//  - but it's not getting persisted
// $metaValue->setAduserid($this->getAduserid());

// Then I've tried to set the user-object in Usermeta - but then 
//  it seems like Doctrine wants to update Usermeta and searches
//  for ValId names aduserid (in BasicEntityPersister->_prepareUpdateData) 
//  but only id is given -  so not luck here
// $metaValue->setUser($this);           

    $this->meta = $metaValue;
}

/**
 * @var integer
 *
 * @ORM\Column(name="rowid", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * Get rowid
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * @var integer
 *
 * @ORM\Column(name="ADuserid", type="integer", nullable=false)
 */
private $aduserid;

/**
 * Set aduserid
 *
 * @param integer $aduserid
 * @return User
 */
public function setAduserid($aduserid)
{
    $this->aduserid = $aduserid;

    return $this;
}

/**
 * Get aduserid
 *
 * @return integer 
 */
public function getAduserid()
{
    return $this->aduserid;
}

// some mor fields.... 
} 
```

和 Usermeta 类：

```
/**
 * Usermeta
 *
 * @ORM\Table(name="userMeta")
 * @ORM\Entity
 */
class Usermeta
{
/**
 * @ORM\OneToOne(targetEntity="User", inversedBy="meta")
 * @ORM\JoinColumn(name="ADuserid", referencedColumnName="ADuserid")
 */
protected $user;

public function getUser()
{
    return $this->$user;
}    

public function setUser($userObj)
{
    $this->user = $userObj;
}

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="ADuserid", type="integer", nullable=false)
 */
private $aduserid;

/**
 * Set aduserid
 *
 * @param integer $aduserid
 * @return User
 */
public function setAduserid($aduserid)
{
    $this->aduserid = $aduserid;

    return $this;
}

/**
 * Get aduserid
 *
 * @return integer 
 */
public function getAduserid()
{
    return $this->aduserid;
}
} 
```

控制器代码如下所示：

```
...

$userForm->bind($request);

    if($userForm->isValid()) {
        $em->persist($user);
        $em->flush();
    }
... 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-19T17:04:03.427

*Zdenek Machek*的评论几乎是正确的。正如您从 Doctrine2 文档中看到的那样，可为**空**的选项应该在连接注释 ( *@JoinColumn* ) 中，而不是在映射之一 ( *@OneToOne* ) 中。

**@JoinColumn 文档：**

> 此注释用于@ManyToOne、@OneToOne 字段中的关系上下文以及嵌套在@ManyToMany 内的@JoinTable 的上下文中。此注释不是必需的。如果未指定属性名称和referencedColumnName，则从表和主键名称推断。
> 
> *必需的属性：*
> 
> **name**：包含此关系的外键标识符的列名。在@JoinTable 的上下文中，它指定连接表中的列名。
> 
> **referencedColumnName**：用于连接此关系的主键标识符的名称。
> 
> *可选属性：*
> 
> **unique**：确定受影响实体之间的这种关系是否排他，并且应该在数据库约束级别上强制执行。默认为假。
> 
> ***nullable：确定是否需要相关实体，或者 null 是否是关系的允许状态。默认为真。***
> 
> **onDelete**：级联操作（数据库级）
> 
> **onUpdate**：级联动作（数据库级）
> 
> **columnDefinition**：在列名之后开始并指定完整（不可移植！）列定义的 DDL SQL 片段。此属性允许使用高级 RMDBS 功能。如果您需要稍微不同的列定义来连接列，例如关于 NULL/NOT NULL 默认值，则必须在 @JoinColumn 上使用此属性。但是默认情况下@Column 上的“columnDefinition”属性也会设置相关的@JoinColumn 的columnDefinition。这是使外键工作所必需的。

[http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#annref-joincolumn](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#annref-joincolumn)

**@OneToOne 文档：**

> @OneToOne 注释的工作方式几乎与 @ManyToOne 完全相同，但可以指定一个附加选项。使用目标实体表和主键列名称的 @JoinColumn 配置默认值也适用于此。
> 
> *必需的属性：*
> 
> **targetEntity**：被引用的目标实体的 FQCN。如果两个类都在同一个命名空间中，则可以是非限定类名。重要提示：没有前导反斜杠！
> 
> *可选属性：*
> 
> **级联**：级联选项
> 
> **fetch** : LAZY 或 EAGER 之一
> 
> **orphanRemoval**：布尔值，指定是否应由 Doctrine 删除孤儿、未连接到任何拥有实例的反向 OneToOne 实体。默认为假。
> 
> **inversedBy**：inversedBy 属性指定实体中作为关系反面的字段。

[http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#onetoone](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#onetoone)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-01T13:31:54.170

您为您的问题使用了错误的 Relation 类型。

您想要的是从**Usermeta**到**User的**[单向一对一](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#one-to-one-unidirectional)。

 ****双向一对一关系将意味着以下内容：

1.  用户必须有一个 Usermeta 对象。
2.  一个 Usermeta 对象必须有一个用户。

在您的情况下，您只是想要求第二个条件。

这确实意味着您只能从 Usermeta 中为用户补充水分，而不是相反。

不幸的是，学说[不支持零或一对多](https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/-nR4C2Nn-Mk)关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T16:10:17.013

我在尝试同样的事情时收到错误消息**“spl_object_hash() 期望参数 1 是对象，null 给定在...” 。**我试图定义一个双向`One to One`关系，而反转的值可以是`null`. 这给出了错误消息。去掉关系的反面就解决了这个问题。可惜`Zero or One to One`不支持关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T14:08:43.937

我希望我提交这个很晚的答案不会打扰任何人，但这是我解决这个问题的方法：

```
/**
 * @var Takeabyte\GripBundle\Entity\PDF
 * @ORM\OneToOne(targetEntity="Takeabyte\GripBundle\Entity\PDF", inversedBy="element", fetch="EAGER", orphanRemoval=true)
 */
protected $pdf = null; 
```

我添加`= null;`到属性声明中。我希望这对任何阅读本文的人有所帮助。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-08-14T04:08:51.347

阅读我自己的旧问题很有趣，因为我现在第一眼就看到了这个问题..

当谈到解决方案时，我认为教义只能处理名为“id”的 ID，但是...... aduserid 只是没有标记为 ID，它缺少 Id 注释，并且教义不能使用连接列的字段..

第二件事，Zdenek Machek 是对的：它必须被标记为可以为空。****

# xml - 如何排列具有从 xml 给出的坐标的图像？

> ID：15744326
> 
> 赞同：0
> 
> 时间：2013-04-01T13:23:06.320
> 
> 标签：xml, actionscript-3, flash

美好的一天，我有一个问题。我需要使用循环来安排从 XML 加载的图像。我应该如何加载带有坐标（x，y）的函数 loadData 图像和带有文本字段的描述？这是我的代码：

```
var xmlList:XMLList;
var urlLoader:URLLoader;
function Main():void 
    {
        urlLoader = new URLLoader();
        urlLoader.load(new URLRequest("images.xml"));
        urlLoader.addEventListener(Event.COMPLETE, loadData);

    }
function loadData(e:Event):void {

xml = new XML(urlLoader.data);
xmlList = xml.image;
for (var i:uint = 0; i < xmlList.length(); i ++ ) 
    {

   }} 
```

这是我的 XML：

```
<images>
<image>
    <title>First Picture</title>
    <file>images/pic1.jpg</file>
    <x>180</x>
    <url></url>
    <y>50</y>       
</image>
<image>
    <title>Second Picture</title>
    <file>images/pic2.jpg</file>
    <x>100</x>
    <y>100</y>
    <url></url>     
</image> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:33:28.507

查看您的代码，我建议您使用 TileList 来显示图像。然后，您可以构建一个自定义组件用作 itemRenderer 以获得您想要的结果。即使您不想使用列表来显示图像，您也必须创建一个自定义组件，以便您可以显示图像 + 文本并使用组件的 XY 属性将其定位在屏幕上。

基本上是这样的：

` var myComp:MyCustomComponent;

```
for (var i:uint = 0; i < xmlList.length(); i ++ ) 
{
   myComp = new MyCustomComponent();
   targetUI.addChild(myComp);
   myComp.text = xmlList..image[i].title;
   myComp.imgsrc = xmlList..image[i].file;
   myComp.x = xmlList..image[i].x;
   myComp.y = xmlList..image[i].y;
} 
```

`

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:09:19.417

您必须在函数 loadData 中为图像创建新的加载器

```
function loadData():void
{
     var imageLoader:Loader;
     for (var i:int = 0; i < xmlList.length();i++)
     {
          imageLoader = new Loader();
          imagePath:URLRequest = new URLRequest(xmlList[i].file);
          imageLoader.contentLoaderInfo.addEventListener(Event.Complete, loadCompleteHandler);
          imageLoader.load(imagePath);
}
function loadCompleteHandler(event:Eent):void
{
    var loaderInfoParams:LoaderInfo = event.currentTarget as LoaderInfo;
    var currentImage:Bitmap = event.currentTarget.content as Bitmap;

    addChild(currentImage);
} 
```

之后，使用 loaderInfoParams.url 找到加载图像的名称。并且，使用 xml 中加载图像的名称查找其他参数。或者你可以创建一个字典，键是图像名称，值是坐标和文本。

# php - Wordpress 上次修订日期

> ID：15744329
> 
> 赞同：0
> 
> 时间：2013-04-01T13:23:11.923
> 
> 标签：php, wordpress

我尝试添加带有最后修订日期的列，并使用此代码。这里有什么问题吗？问题是，它不起作用，但它没有给我任何错误消息

```
add_filter('manage_pages_columns', 'add_revised_column');
add_action('manage_pages_custom_column', 'echo_revised_column', 10, 2);

function add_revised_column($columns) {

$columns['revised'] = 'Revised';

return $columns;
}

function echo_revised_column($column, $id) {

if ('revised' == $column)
    echo get_post_field('post_modified', $id);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:37:48.427

有几点不对：

首先，你可能应该给你的函数名称加上一个唯一的前缀。例如，user2223698_add_revised_column。然后你的函数将不会与一些随机插件或主题发生冲突。

其次，对于您的 manage_pages_columns 过滤器，您可能想查看 [http://codex.wordpress.org/Plugin_API/Filter_Reference/manage_pages_columns](http://codex.wordpress.org/Plugin_API/Filter_Reference/manage_pages_columns) 以了解如何添加列。您需要提供文字标题。

第三，对我来说，您如何填充此列并不明显。您需要向 WordPress 数据库添加一些内容吗？

[http://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database](http://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:38:16.617

总的来说，这对我来说很好。我做了类似的事情，在管理媒体页面上添加媒体高度 x 宽度尺寸，我的代码模式基本相同。

但是：我建议您创建一个常量，并在整个过程中使用它来避免这个问题，例如：

```
DEFINE('COL_NAME_REVISED','revised');
...
$columns['COL_NAME_REVISED'] = 'Revision Info';
...
if (COL_NAME_REVISED == $column)
... 
```

**编辑**：之前回答说键名不匹配，但在重新访问这个问题时，我意识到它们并没有不匹配。因此，AFAIK OP 的代码是可以的。

# azure - Windows Azure 存储表中的事务和延续令牌

> ID：15744332
> 
> 赞同：0
> 
> 时间：2013-04-01T13:23:22.703
> 
> 标签：azure, transactions, token, azure-table-storage, continuation

在 Azure 存储表中检索 1200 个实体时触发了多少事务，并牢记延续令牌。

我已经读到“Windows Azure Tables 在单个请求中最多返回 1000 个实体，并在有更多结果（剩余 200 个实体）可用时返回一个**继续令牌。”** 请参阅（[http://blog.smarx.com/posts/windows-azure-tables-expect-continuation-tokens-seriously](http://blog.smarx.com/posts/windows-azure-tables-expect-continuation-tokens-seriously)）。

因为 Azure 是根据编号收费的。我们通过云执行的交易；我只想知道：在第 1000 个实体（行）结果之后返回 1200 个实体（行）和一个延续令牌的单个请求将执行多少个事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:56:00.187

> 在第 1000 个实体（行）结果之后返回 1200 个实体（行）和一个延续令牌的单个请求将执行多少个事务？

这实际上取决于。正如文档所述`Windows Azure Table returns up to a maximum of 1000 entities in a single request`。这意味着在您的情况下，最小事务数为 2，但最大事务数可能为 1200。这完全取决于数据的分区方式和存储帐户的负载。您拥有的分区越多，您每次请求收到的数据就越少，因此事务就越多。再次请求执行时间（服务器端）也需要考虑，因为如果执行时间超过分配的时间，服务将返回部分数据。

根据此处的文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179421.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179421.aspx)，如果一个或多个条件为真，您可以期待一个延续令牌：

1.  如果要返回的实体数量超过 1000。
2.  如果超过服务器超时间隔。
3.  如果查询跨越分区边界。

# android - 具有不同布局但片段类相同的 Viewpager 页面

> ID：15744333
> 
> 赞同：0
> 
> 时间：2013-04-01T13:23:28.153
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

使用 ViewPager，我正在编写一个指南，告诉用户如何使用我的应用程序。

这就是我当前添加/设置页面的方式：

```
 ...
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return new Guide_fragment();
        case 1:
            return new Guide_fragment_2();

        case 2,3,4 etc.

        default:
            return null;
        }
    }
            ... 
```

但是这样我必须为每个页面设置一个片段类，并且由于页面只是图像和文本，我认为这可能没有必要。

有没有一种方法可以对所有页面使用相同的片段类，然后为其分配不同的布局？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:33:24.713

> 有没有一种方法可以对所有页面使用相同的片段类，然后为其分配不同的布局？

当然。将数据传递到指示要显示的内容的片段中，通常通过工厂模式：

*   创建一个静态`newInstance()`方法，获取您通常可能传递给片段构造函数的数据

*   `newInstance()`获取这些参数，将它们放在 a 中`Bundle`，并`Bundle`通过`setArguments()`

*   您的片段在需要此数据时调用`getArguments()`以检索`Bundle`

这可确保您的数据在配置更改后仍然有效。

# ios - 如何将一个函数中的一个变量的内存感知到另一个函数

> ID：15744340
> 
> 赞同：0
> 
> 时间：2013-04-01T13:24:06.907
> 
> 标签：ios, objective-c, uisplitviewcontroller, ipad

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(WEPopoverController *)popoverController
{
          NSLog(@"inside split rotate");
    barButtonItem.title = NSLocalizedString(@"Master", @"Master");

    [[[[self.splitViewController.viewControllers objectAtIndex:1]topViewController]navigationItem ] setLeftBarButtonItem:barButtonItem animated:YES];

   // leftButtonItem=[[UIBarButtonItem alloc] init];

   leftButtonItem=barButtonItem;

     self.navigationItem.rightBarButtonItem.tintColor=[UIColor blackColor];
    self.navigationItem.leftBarButtonItem.tintColor=[UIColor blackColor];
    NSLog(@" bar buttn item =%@", barButtonItem);

    self.masterPopoverController = popoverController;
     NSLog(@" left buttn item =%@", leftButtonItem);
}

-(void)willRotateToInterfaceOrientation:  (UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    NSLog(@"\n INSIDE ORENATATION METHOD");
    NSString *nib=[self nibName];

    if ([nib isEqualToString:@"toDoTaskListAppDetailViewController_iPhone"])
    {

    }
    else if ([nib isEqualToString:@"toDoTaskListAppDetailViewController_iPad"])
    {
        if (toInterfaceOrientation == UIInterfaceOrientationPortrait)
        {
            //leftButtonItem=[[UIBarButtonItem alloc] init];

             NSLog(@"%@",leftButtonItem);
              self.navigationItem.leftBarButtonItem=leftButtonItem;

             //self.imageView.frame=CGRectMake(0.0,0.0, self.view.frame.size.width, self.view.frame.size.height);
                  }
        else if (toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft)
        {
            //leftButtonItem=[[UIBarButtonItem alloc] init];

             NSLog(@"%@",leftButtonItem);
            leftButtonItem=self.navigationItem.leftBarButtonItem;
                       self.navigationItem.leftBarButtonItem=nil;
            // self.imageView.frame=CGRectMake(0.0,0.0, self.view.frame.size.width, self.view.frame.size.height);
        }
        else if (toInterfaceOrientation==UIInterfaceOrientationLandscapeRight)
        {
            NSLog(@"%@",leftButtonItem);

           // leftButtonItem=[[UIBarButtonItem alloc] init];
           leftButtonItem=self.navigationItem.leftBarButtonItem;

            self.navigationItem.leftBarButtonItem=nil;
             //self.imageView.frame=CGRectMake(0.0,0.0, self.view.frame.size.width, self.view.frame.size.height);
        }
        else
        {
            //leftButtonItem=[[UIBarButtonItem alloc] init];

           NSLog(@"%@",leftButtonItem);

             self.navigationItem.leftBarButtonItem=leftButtonItem;

        }

    }

} 
```

在 splitViewController 函数中，分配给 leftButtonItem 的内存不会感知 willRotateToInterfaceOrientation 中的内存。leftButtonItem 是全局变量。

# mule - 通过 Mule 3 使用 HTTPS 访问 Web 应用程序

> ID：15744341
> 
> 赞同：0
> 
> 时间：2013-04-01T13:24:11.270
> 
> 标签：mule

我已将 Mule 部署为 Web 应用程序。我使用 Mule 通过 HTTPS 访问我的网络服务。为此，我在 Mule 上实现了 HTTPS，效果很好。

现在，我想集成另一个 Web 应用程序而不是 Web 服务，并希望使用在 Mule 上实现的相同 HTTPS，而不是在我的 Weblogic 服务器上再次实现 SSL。但是当我尝试时，尽管我的入站端点是 HTTPS，但 URL 会被重定向到我的出站 HTTP URL。

# javascript - Highcharts.js - 仅轴的背景颜色

> ID：15744343
> 
> 赞同：4
> 
> 时间：2013-04-01T13:24:19.240
> 
> 标签：javascript, css, charts, highcharts, highstock

提前感谢您的时间和帮助。

我正在使用 highcharts，只需要设置 x 和 y 轴的背景颜色。见附件：

![在此处输入图像描述](https://i.stack.imgur.com/XaS3Y.png)

所以我需要在 x 轴上设置一个与图表的深灰色不同的背景颜色（现在它们显然是相同的）

有谁知道这是否可行，如果可以，该怎么做？我已经广泛使用了 highcharts API [Highstock API](http://api.highcharts.com/highstock)，但找不到专门针对此的任何内容。

再次感谢您的时间和帮助！

富有的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:13:20.330

你试过了吗：

> ```
>  rendered a rectangle and positioned it to the bottom of the graph. 
> ```

```
chart.renderer.rect(0/*position on X-axis*/, 275/*position on Y-axis*/, 680/*width*/ , 25/*height*/, 00)
         .attr({
            'stroke-width': 0,
            stroke: '#888888',
            fill: '#888888',
            zIndex: 3
         })
         .add(); 
```

阅读更多：`highchart renderer`

x-asis 没有 backgroundColor[将背景颜色设置为 HighChart xAxis 标签](https://stackoverflow.com/questions/9608328/set-background-color-to-highchart-xaxis-labels)

希望这有帮助。

# c# - 在asp.net mvc 4中为http post请求创建侦听器

> ID：15744345
> 
> 赞同：0
> 
> 时间：2013-04-01T13:24:25.757
> 
> 标签：c#, api, asp.net-mvc-4, fax, interfax

我必须收到来自 interfax API 的“回电”。当 interfax 上的用户（拥有帐户）收到传真时，它会在必须能够接收 Http Post 请求的指定 URL 上向帐户持有人回叫。指南在此[接受通过回拨的传入传真通知](http://www.interfax.net/en/dev/rest/dev-guide/2985)。

我创建了一个控制器和动作“索引”作为

```
public string Index()
    {
        try
        {
            Ifax ifax = new Fax();
            ifax.UserId = Convert.ToString(Request.QueryString["userId"]);
            ifax.Id = Convert.ToInt32(Request.QueryString["id"]);
            ---
            ---
            ifax.Save()
         }
}
catch(Exception ex)
{
    //handle exception
}
    //Just saving to db 'true' or 'false', to know if callback receive.
    //SaveFlag();
} 
```

当我在我的 interfax 帐户中收到传真时，我会在我的网络服务器上收到回电。但问题是我没有得到数据。我得到每个变量为空或为空。我是否使用正确的方式从任何客户端 api 接收 http post 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:35:14.163

据我了解，Interfax 会向您的应用程序发送一个 Post 请求。因为它是一个发布请求，您应该能够读取发布的值 `Request["phoneNumber"]`

[如何从 HTTPPOST、字典或检索表单值？](https://stackoverflow.com/questions/5088450/simple-mvc3-question-how-to-retreive-form-values-from-httppost-dictionary-or)

# intellij-idea - Gradle 的 Intellij 上下文菜单

> ID：15744346
> 
> 赞同：2
> 
> 时间：2013-04-01T13:24:25.743
> 
> 标签：intellij-idea, gradle

刚刚将我的 gradle 项目放入 Intellij，当我右键单击项目名称时，有 gradle 选项。当我单击它时，它会尝试运行一个任务库，但它会出错。这是怎么回事？这是可配置的吗？

```
/bin/gradle-1.5/bin/gradle libs

FAILURE: Could not determine which tasks to execute.

* What went wrong:
Task 'libs' not found in root project 'bin'.

* Try:
Run gradle tasks to get a list of available tasks.

BUILD FAILED

Total time: 1.773 secs

Process finished with exit code 1 
```

想法？

# c# - WPF中不同元素类型的列表布局

> ID：15744348
> 
> 赞同：2
> 
> 时间：2013-04-01T13:24:31.780
> 
> 标签：c#, wpf

我需要修复一个包含不同类型元素的列表。每种类型都有自己的数据类型来表示每种类型的视图模型。以下代码适用于我，但由于某种原因，内部数据被截断为某个值（看起来像默认值）。我需要删除这个 trancation。

这就是我所拥有的。此代码在控件中，也可以放在列表中（可以加倍或加倍）。但我认为这无关紧要。

```
<ScrollViewer VerticalScrollBarVisibility="Visible">
            <ListView DockPanel.Dock="Top" Name="testCaseResultListView" 
                      ItemsSource="{Binding LogItems}" 
                      ItemContainerStyleSelector="{StaticResource fixSideViewLogItemStyleSelector}"
                      SelectionMode="Single"
                      >
            <ListView.View>
                <GridView x:Name="gridView2">
                    <GridView.ColumnHeaderContainerStyle>
                        <Style TargetType="{x:Type GridViewColumnHeader}">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </Style>
                    </GridView.ColumnHeaderContainerStyle>
                    <GridViewColumn CellTemplateSelector="{StaticResource fixSideViewLogItemTemplateSelector}"/>
                </GridView>
            </ListView.View>
        </ListView>
    </ScrollViewer>
</DockPanel> 
```

`fixSideViewLogItemTemplateSelector`并且`fixSideViewLogItemStyleSelector`是选择器，它们为`LogItems`. 常见的数据类型是一个有两列的网格，但这似乎也无关紧要——我试图在那里放一个文本框，但它仍然被截断。![我得到的例子](https://i.stack.imgur.com/KMZBf.png)

我希望将此列扩展到整个 gridView。当我设置列的宽度时，我看到列正在调整大小，但我希望它占据整个空间。这应该是有弹性的——如果我在窗口中放置一个控件，它应该占据整个窗口，并在调整窗口大小时正确调整大小（使用它的列）。如果我放置两个控件，它们应该将空间分成两半，并且在调整窗口大小时仍然应该调整大小。

任何帮助，提示？

**Upd** 这是我正在使用的模板示例。

```
 <DataTemplate x:Key="testCaseDataResultTemplate">
        <!-- Test case results -->
        <Grid Margin="50,0,0,0" HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <!--Test case result property-->
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <!--Is retry / Name-->
                <RowDefinition />
                <!--Test case number-->
                <RowDefinition />
                <!--Low limit-->
                <RowDefinition />
                <!--High limit-->
                <RowDefinition />
                <!--Measured-->
                <RowDefinition />
                <!--State-->
                <RowDefinition />
                <!--Test time-->
                <RowDefinition />
                <!--Comment-->
            </Grid.RowDefinitions>
            <!--Is retry / Name-->
            <Image Grid.Column="0" Grid.Row="0" 
                               Source="..\Resources\retry16.png" 
                               Stretch="None" HorizontalAlignment="Left" 
                               Visibility="{Binding Path=IsRetry, Converter={StaticResource boolToVisibilityConverter}}" />
            <TextBlock Text="fh fhgfhg fhfhfhgfhg fhgfhfhgfhgfhgfhgfhgfhgf hgfhgfhgfhgfhgfhg fhfhgfhgf hgfhgfhfhg fhfhgf rdederserswerv 2" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" TextWrapping="Wrap" MaxWidth="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}}"/>
            <!--Test case number-->
            <TextBlock Text="Number:" Grid.Column="0" Grid.Row="1" />
            <TextBlock Text="{Binding Path=TestCaseNumber}" Grid.Column="1" Grid.Row="1" />
            <!--Low limit-->
            <TextBlock Text="Low limit:" Grid.Column="0" Grid.Row="2" />
            <TextBlock Text="{Binding Path=TestCaseData.LimitData.LowLimit}" Grid.Column="1" Grid.Row="2" />
            <!--High limit-->
            <TextBlock Text="High limit: " Grid.Column="0" Grid.Row="3" />
            <TextBlock Text="{Binding Path=TestCaseData.LimitData.HighLimit}" Grid.Column="1" Grid.Row="3" />
            <!--Measured-->
            <TextBlock Text="Measured" Grid.Column="0" Grid.Row="4" />
            <TextBlock Text="{Binding Path=MeasuredValue, Converter={StaticResource valasaConverter}}" Grid.Column="1" Grid.Row="4" />
            <!--State-->
            <TextBlock Text="Passed: " Grid.Column="0" Grid.Row="5" />
            <TextBlock Text="{Binding Path=Passed}" Grid.Column="1" Grid.Row="5" />
            <!--Test time-->
            <TextBlock Text="Test time: " Grid.Column="0" Grid.Row="6" />
            <TextBlock Text="{Binding Path=TestTime, StringFormat={}{0:hh':'mm':'ss'.'ff}}" Grid.Column="1" Grid.Row="6" />
            <!--Comment-->
            <TextBlock Text="{Binding Path=ShortMessage}" 
                                   Grid.Column="0" Grid.Row="7" Grid.ColumnSpan="2"
                                   Visibility="{Binding Path=HasComment, Converter={StaticResource boolToVisibilityColConverter}}" 
                                   VerticalAlignment="Stretch" 
                                   MaxWidth="400" 
                                   TextAlignment="Center">
                            <TextBlock.ToolTip>
                            <StackPanel>
                                <TextBlock Text="{Binding Path=FullMessage}"/>
                            </StackPanel>
                            </TextBlock.ToolTip>
                        </TextBlock>
        </Grid>
    </DataTemplate> 
```

这有点混乱，但它非常简单。它有两列 - 标题和值。这些列与截断无关。

我也试过这个模板：

```
 <DataTemplate x:Key="testCaseDataResultTemplate">
    <TextBlock Text="Long long text goes here...... ->" HorizontalAlignment="Stretch"/>
 </DataTemplate> 
```

文本当然更长 :) 它仍然被截断，所以我责怪 listView/GridView，而不是内部模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:38:11.047

我认为这个问题可能是您需要`ListView.HorizontalContentAlignment`将`Stretch`. 此外，项目容器样式和项目模板必须具有`HorizontalAlignment`to`Stretch`和`Width`属性必须是`Auto`. 希望这个提示可以帮助...

**编辑**

* * *

另外我认为问题可能是 的宽度`GridViewColumn`，它将项目宽度固定为它自己的宽度。如果您使用的是单列，也许您可​​以将 更改`ListView`为 a`ListBox`或 an `ItemsControl`，这只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:46:31.367

我不知道您的模板是什么样子，但我看到了这样的问题，它通常与未换行的 TextBlock 和/或 TextBlock 的宽度长于其父级有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:18:06.417

不能说我解决了这个难题，但至少它按我的预期工作。我删除了整个定义，其中包含 GridView 和列，并将 ItemTemplateSelector 直接放在 ListView 中。

所以我的 ListView 现在看起来像这样：

```
 <ListView DockPanel.Dock="Top" Name="testCaseResultListView" 
                      ItemsSource="{Binding LogItems}" 
                      ItemContainerStyleSelector="{StaticResource fixSideViewLogItemStyleSelector}"
                      SelectionMode="Single"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"
                      ItemTemplateSelector="{StaticResource fixSideViewLogItemTemplateSelector}"> 
```

做到了！希望这对某人也有帮助。

# c# - 将数据从子表单传递到父表单

> ID：15744351
> 
> 赞同：0
> 
> 时间：2013-04-01T13:24:40.847
> 
> 标签：c#, multithreading, webbrowser-control

我在子窗体中有一个 Web 浏览器控件，它从显示的网页中捕获一些数据。我需要在浏览器表单中使用这些数据来传递给父表单，但不必启动它的新实例，因为它已经打开。

父表单需要从浏览器接收这些数据，并使用解析页面设置的变量更新一些文本框。

我在父表单中有这个：

```
private void browserToolStripMenuItem_Click(object sender, EventArgs e)
    {
        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(RunBrowser));
        t.SetApartmentState(ApartmentState.STA);
        t.Start(); 
    }

    public static void RunBrowser()
    {
        Application.Run(new BrowserForm());
    } 
```

我已经尝试了很多儿童形式的东西，但我根本无法让它发挥作用。我能得到的最好的方法是将变量传递给父级并通过 MessageBox 显示它，但它根本拒绝更新 TextBox。

顺便说一句，我现在已经连续尝试解决这个问题近 12 个小时，这是我在这里问的唯一原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:35:37.703

我终于解决了它，但不是以理想的方式。

在父母中，我这样打开它：

```
 private void BrowserToolStripButton_Click(object sender, EventArgs e)
    {    
        using (BrowserForm form = new BrowserForm())
        {
            form.ShowDialog(this);
        }
    } 
```

我在 Parent 中也有这个方法：

```
 public void SendStringsToParent(string s, string s2, string s3)
    {
        textBox.Text = s;
        textBox2.Text = s2;
        textBox3.Text = s3;
    } 
```

然后在子（浏览器）表单中我有这个：

```
 private void Button1_Click(object sender, EventArgs e)
    {
        string stringToSend = "sending these";
        string stringToSend2 = "strings to the";
        string stringToSend3 = "parent form";
        MainForm parent = (MainForm)this.Owner;
        parent.SendStringsToParent(stringToSend, stringToSend2, stringToSend3);
    } 
```

这是有效的，尽管我不得不解决它是一种模态形式的事实。如果有任何方法可以做到这一点，同时仍然可以完全控制这两种形式，我很想听听某人的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:31:46.640

请检查此方法..

但是，如果您要传递私人数据，这将没有帮助。

在您的浏览器页面中：

受保护的无效Button1_Click（对象发送者，EventArgs e）{

```
 string modulename = "Agile Software Development ";
      string url;

      url = "page2.aspx?module=" +modulename;
      Response.Redirect(url); 
```

}

在您的父页面中

string RetrievedValue;protected void Page_Load(object sender, EventArgs e) {

```
 this.TextBox1.Text = Request.QueryString["module"];

    //  RetrievedValue = this.TextBox1.Text; 
```

}

# java - 我用什么名字连接到java中的服务器套接字

> ID：15744353
> 
> 赞同：2
> 
> 时间：2013-04-01T13:24:45.180
> 
> 标签：java, sockets, networking, serversocket

我正在使用服务器套接字和套接字类在 java 中编写类似 telnet 的程序。这是我当前的客户端程序代码。用户输入服务器名称和他们想要连接的端口。

```
static Socket getSocket()
{
    while(true)
    {
        System.out.println("What server do you want to connect to on which port?");
        String info = sc.nextLine();
        String host = info.split(" ")[0];
        int port = Integer.parseInt(info.split(" ")[1]);

        try 
        {
            InetAddress ip = InetAddress.getByName(host);
            return new Socket(ip, port);
        } 
        catch (UnknownHostException e) 
        {
            System.err.println("The host is unknown.");
        }
        catch (IOException e) 
        {
            System.err.println("Network error.");
        }
    }
} 
```

我尝试在本地主机上连接，它工作正常。然后我尝试使用 ip 地址作为网络名称在远程计算机上与我的朋友连接，但它没有给出异常。我用什么名字连接到远程服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:28:36.487

你需要给你的朋友[你的**远程**IP 地址](http://www.whatismyip.com/)。

# java - java.lang.NoClassDefFoundError：无法初始化类 com.hp.hpl.jena.query.Query

> ID：15744355
> 
> 赞同：2
> 
> 时间：2013-04-01T13:24:50.460
> 
> 标签：java, eclipse, jsp, google-app-engine, jena

我正在玩一些 Jena 并在 Eclipse 中设置了一个 Java Google Web 应用程序项目。我下载了 Jena 2.0 库并将它们添加到项目的构建路径和`/war/WEB-INFO/lib/`文件夹中。

我的简单 servlet 尝试使用以下代码行实例化查询

```
...
Query query = QueryFactory.create(queryString);
... 
```

所以没有编译错误，正如我所说，Libarries 都在构建路径和 WEB-INF 下的 lib 文件夹中（在战争目录中。）

当我运行 webapp 并执行 servlet 时，我得到以下异常：

```
java.lang.NoClassDefFoundError: Could not initialize class com.hp.hpl.jena.query.Query
    at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:78)
    at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:52)
    at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:40)
    at nyx.servlets.PeripheralServlet.extractPlace(PeripheralServlet.java:102)
    at nyx.servlets.PeripheralServlet.doCreate(PeripheralServlet.java:83) 
```

servlet 类是 PeripheralServlet.java，方法**extractPlace**中的第 102 行是上面我尝试实例化 Query 对象的行。

谁能告诉我我的问题可能是什么？对我来说，它看起来像是缺少 jar 包含或该行上的某些内容，但正如我所说，我将所有 jar Jena 文件都包含到项目的构建路径和 WEB-INF 下的 lib 文件夹中。

非常感谢。

**编辑：**奇怪的是`QueryFactory`它实际上没有错误，并且两者`Query`都`QueryFactory`在同一个 Jena 包中，对吗？

**EDIT2：**从头开始重复该过程并确保只包含一次所需的罐子后，现在我得到以下异常：

```
java.lang.StackOverflowError
  at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
  at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
  at java.util.regex.Pattern$Branch.match(Pattern.java:4114)
  at java.util.regex.Pattern$Branch.match(Pattern.java:4112)
  at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
  at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
  at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
  at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
  at java.util.regex.Pattern$Start.match(Pattern.java:3055)
  at java.util.regex.Matcher.search(Matcher.java:1105)
  at java.util.regex.Matcher.find(Matcher.java:535)
  at com.google.appengine.tools.development.LocalEnvironment.getServerName(LocalEnvironment.java:302)
  at com.google.appengine.tools.development.DevAppServerImpl.getCurrentAppContext(DevAppServerImpl.java:372)
  ...
  at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:82)
  at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
  at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:704)
  at org.slf4j.impl.JCLLoggerFactory.getLogger(JCLLoggerFactory.java:64)
  ... 
```

如果我在此之后重新加载页面，我会再次得到原始异常。我一直在做一些研究，发现一些相关问题可以追溯到 2009 年，因此是 Jena 2.6 版。假设我们在 2013 年并且 Jena 已经发展到它的 2.10 版本，我猜它们不是那么相关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:33:14.333

将以下 jar 添加到`classpath`

[arq-2.8.1-SHAPSHOT.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/com/hp/hpl/jena/arq/2.8.1-SHAPSHOT/arq-2.8.1-SHAPSHOT.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T14:53:36.803

我有同样的问题`ModelFactory.createDefaultModel();` The jars come from the last Jena (2.11.0) and AppEngine 1.8.4 。

`XercesImpl`有问题，所以我从构建路径中删除了它。但是我仍然觉得很奇怪，错误是在运行时并且没有发出编译警告。

# asp.net-mvc - 无法使用 WWW::Mechanize 或 LWP::UserAgent 发布 ASP-NET 表单

> ID：15744365
> 
> 赞同：1
> 
> 时间：2013-04-01T13:25:46.870
> 
> 标签：asp.net-mvc, perl, web-crawler, www-mechanize, lwp-useragent

我需要自动提取产品目录，我们是授权经销商。这家公司是 Ingram Micro，规模很大，但他们没有提供简单的方法（如 Web 服务）来查询他们的目录和库存，所以到目前为止，我们每天都在使用 LWP::UserAgent 提取它，用于我们的在线商店数据库。

最近，他们更改了他们的网站，我无法检测到阻止我的 Perl 脚本成功登录的东西。如果我直接在浏览器上尝试，我会成功登录，但如果我尝试从 Perl 提交表单，我会再次获得登录页面（就像登录不成功）。

他们的网站是在 AspNet 上制作的，并且充满了 ASP 生成的隐藏表单字段。起初，我正在做自己的“蜘蛛”来获取登录页面，读取所有隐藏字段值并将它们与用户名和密码一起包含在我的 POST 登录请求中，但现在，在这个问题之后，我开始使用 WWW： :Mechanize 执行请求并正确自动执行该任务。

但是，不是 WWW::Mechanize 或 LWP::UserAgent 能够成功登录。

我什至尝试查看浏览器和服务器之间的确切 HTTP 对话，并在我的自动请求中包含相同的确切标头以及正确的 POST 内容，甚至这样做我从 Perl 登录不成功，从 Perl 登录成功浏览器。

我真的很绝望，我无法检测到问题，如果没有此目录更新，我们将无法运行商店。

您可以在此处查看登录页面：[https ://www.imstores.com/ingrammicromx/](https://www.imstores.com/ingrammicromx/)

请，如果有人有类似问题的经验，或者有人可以查看该页面并检测浏览器与 WWW::Mechanize 请求不同的原因，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:37:38.030

通常我用这种方式来测试有什么问题：

1.  清除浏览器中的所有 cookie
2.  禁用 Javascript
3.  打开登录页面
4.  尝试登录

如果您成功登录，则无需额外技巧即可使用 WWW::Mechanize 进行此操作，只是不要忘记`button => "submit_button_name"`像这样使用：

```
$mech->submit_form(
    with_fields => {
        login_field_field => $login,
        password_field_name => $password,
    },
    button => "submit_button_name",
); 
```

即使您无法从禁用 Javascript 的浏览器登录，您仍然可以使用 Mechanize 执行此操作，但您需要查看浏览器的 HTTP 请求（我为此使用 HTTPFox）并从 Mechanize 发出**完全相同的请求**（包括标头）。

# bitmap - 使用 vsync 进行双缓冲（与屏幕刷新率同步） - C# windows 窗体

> ID：15744366
> 
> 赞同：2
> 
> 时间：2013-04-01T13:25:47.237
> 
> 标签：bitmap, writeablebitmap, double-buffering, vsync, copymemory

我一直在尝试以每秒 60 次的速度更新 PictureBox 的 BMP，其线条模式会随着每次更新而改变。发生的情况是图像在屏幕刷新之间进行了部分更新。所以，你看到的是一种模式的一部分，也是下一种模式的一部分。每次屏幕刷新时，我都需要精确更新一次。理想情况下，我的目标是更新后缓冲区，然后将其复制到前缓冲区。我听说您可以在游戏中使用 vsync 来锁定前端缓冲区，以便屏幕仅在屏幕刷新后立即更新。如果我可以利用这种锁定，它可以让我在每次刷新时精确更新一次。但我还没有弄清楚该怎么做。

有任何想法吗？

我确实尝试在 Windows 窗体中使用 DoubleBuffering = true 属性。但它可能不适用于 PictureBox。我使用 CopyMemory（本机 dll 调用）将新模式复制到 PictureBox 中的位图中。

在上一段中，我还尝试使用具有相同技术的 WriteableBitmap，但由于某种原因，后缓冲区从未复制到前缓冲区，即使我按照其他人在堆栈交换中建议的方式进行了操作。我试了几个小时左右。使用该技术，图像从未在屏幕上更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:34:05.573

我找到了自己问题的解决方案。最好的方法是创建一个 XNA 2D 应用程序。我在我的显卡设置中强制使用 vsync。然后我在 XNA 应用程序中打开了这个属性。在游戏构造函数中，我使用了这个： this.IsFixedTimeStep = true;

```
public Game1()
{
    this.IsFixedTimeStep = true;
    this.TargetElapsedTime = new TimeSpan(0, 0, 0, 0, 1000 / 60);//60 times per second
    graphics = new GraphicsDeviceManager(this)
    {
        PreferredBackBufferWidth = 800,
        PreferredBackBufferHeight = 600,
        SynchronizeWithVerticalRetrace = true,
    };

    graphics.ApplyChanges();
    Content.RootDirectory = "Content";
} 
```

然后声明一个全局变量： bool _IsDirty = true; 并声明以下函数：

```
protected override bool BeginDraw()
{
    if (_IsDirty)
    {
        _IsDirty = false;
        base.BeginDraw();
        return true;
    }
    else
        return false;
}
protected override void EndDraw()
{
    if (!_IsDirty)
    {
        base.EndDraw();
        _IsDirty = true;
    }
}

protected override void Draw(GameTime gameTime)
{
    //graphics.GraphicsDevice.Clear(Color.Black);

    // Draw the sprite.
    spriteBatch.Begin();
    spriteBatch.Draw(textureImg, new Rectangle(0, 0, 800, 600), Color.White);
    spriteBatch.End();
    base.Draw(gameTime);
} 
```

# android - 纵向录制和播放视频

> ID：15744369
> 
> 赞同：1
> 
> 时间：2013-04-01T13:25:50.243
> 
> 标签：android, video-recording

大家好，我一直在尝试以纵向模式录制视频，并在上传到 AWS S3 后播放。但是视频总是以横向模式播放，即。视频顺时针旋转 90 度。然后我尝试通过将横向设置为录制活动来录制视频，但仍然发生同样的事情。在纵向录制时，我使用了预览显示方法将预览旋转 90 度，我知道它不会影响录制。但是当方向提示为 270 时，我能够在最新的 android 4.0 + 设备上纵向播放视频，但不能在其他版本上播放。我还需要在门户网站上播放相同的视频，我们正在使用[jw 播放器](http://www.longtailvideo.com/)用于在网络上播放视频。我还需要在 iOS 上播放相同的视频。那我怎么能做到这一点。任何帮助或想法将不胜感激。提前致谢。

`File file = new File(path, filename); mrec = new MediaRecorder(); mCamera.lock(); mCamera.unlock(); mrec.setCamera(mCamera); mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA); mrec.setAudioSource(MediaRecorder.AudioSource.MIC); mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); mrec.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP); mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); mrec.setVideoSize(320, 240); mrec.setPreviewDisplay(surfaceHolder.getSurface()); mrec.setOutputFile(path + filename); mrec.prepare();`

# macos - 如何在mac上更改文件的扩展文件属性？

> ID：15744371
> 
> 赞同：0
> 
> 时间：2013-04-01T13:26:00.353
> 
> 标签：macos, ls

我的macbook中有一些iOS项目，有一天我将它们复制到基于windows系统的电脑上，然后有一天我将它们复制回我的macbook，我发现这些项目无法运行。我用 Xcode 打开了其中一个项目，它说“构建成功”，但是即使模拟器正在运行，应用程序也无法部署在 iPhone 模拟器上！？！？！？！然后我使用“ls -l”命令检查文件，发现普通Xcode项目文件和新创建的Xcode项目文件之间的区别只是一个符号。

有问题的文件：

```
 drwx------+ 49 dingvimer  staff   1.6K 
```

普通文件：</p>

```
 drwx------@ 60 dingvimer  staff   2.0K 
```

如何将“+”符号更改为“@”并让项目正常运行？

我将感谢您帮助我解决问题的好意（^-^）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:22:12.080

您可以使用`ls -l@`查看扩展属性。它会向您显示类似的内容：

```
drwxr-xr-x@ 5 cody  staff  170 Mar 30 08:46 test.xcodeproj
LastUpgradeCheck      4 
```

LastUpgradeCheck - 是属性的名称（有时可能有 com.apple.blablabla 之类的东西），而 4 - 是值。
使用`xattr`命令设置/删除扩展属性。见`man xattr`（它很短，有一些例子）。
请注意，您可能需要修复整个项目目录。

# javascript - 如何通过 JS Post Back to Web 方法设置数组字符串？

> ID：15744373
> 
> 赞同：0
> 
> 时间：2013-04-01T13:26:25.297
> 
> 标签：javascript, asp.net, arrays, string, methods

如何在 ASP.NET 中使用 JS post 将数组字符串发送回 Web Method，代码示例如下：

```
function service() {
            var items = $('#jqxTree').jqxTree('getCheckedItems');
            //  var jsonText = JSON.stringify({ list: items });
            myData = {};
            for (index in items) {
                myData[index] = items[index].label;
            }
            $.ajax({
                type: "POST",
                url: "ServiceConfiguration.aspx/ProcessIndexes",
                data: "{'jsonValue': " + JSON.stringify(myData) + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                cache: false,
                success: function (msg) {

                }
            });
            //alert(items);
        } 
```

现在我正在尝试以下操作：

```
[WebMethod(EnableSession = true)]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public static void ProcessIndexes(List<string> jsonValue)
        {
            var serializer = new JavaScriptSerializer();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:30:59.400

自从我进入 .NET 领域以来已经有一段时间了，但是这样的事情应该可以工作：

```
$.ajax({
    type: "POST",
    url: "SomeForm.aspx/SomeWebMethod",
    data: JSON.stringify({ someValues: ["foo", "bar"] }),
    contentType: "application/json",
    dataType: "json",
    success: function(resp) {
        // handle success here
    },
    error: function() {
        // handle error here
    }
}); 
```

# javascript - 剔除单击复选框无法在 IE 中定义新的复选框状态

> ID：15744384
> 
> 赞同：0
> 
> 时间：2013-04-01T13:27:12.717
> 
> 标签：javascript, jquery, checkbox, knockout.js

我的页面上有下一个复选框，并且

```
<input type="checkbox" id="cbSelectAll" data-bind="click:modelAddrView.selectAllOnPage"> 
```

而且我的模型中有定义新复选框状态并进行一些操作的函数，但是我定义状态的方法在 IE 中不起作用`( $(event.toElement).is(':checked') return false )`。

```
self.selectAllOnPage = function (data, event) {
    var list = self.pageDataView();
    var operationSet = $(event.toElement).is(':checked');
    self.selectArray(list, operationSet);
    $("#addrList input:checkbox").attr("checked", $(event.toElement).is(':checked'));
    //self.selected(list);
    return true;
} 
```

如何使用 Knockout 以正确的方式定义新的复选框状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:48:36.330

我有发现问题需要使用 $(event.target)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:52:04.277

我还将您的 .attr 更改为 .prop 我有几个与 .attr 折旧直接相关的检查和单选按钮问题

# spray - 我应该如何使用不同的状态代码响应 Spray 中的 GET 请求？

> ID：15744392
> 
> 赞同：2
> 
> 时间：2013-04-01T13:27:51.357
> 
> 标签：spray

对于 POST 和 PUT 请求，我使用以下语法：

```
put {
  entity(as[CaseClass]) { entity =>
     returnsOption(entity).map(result => complete{(Created, result)})
       .getOrElse(complete{(NotFound, "I couldn't find the parent resource you're modifying")})
  }
} 
```

现在对于 GET 请求，我正在尝试做同样的事情，但我无法让它与我的 PUT 解决方案类似地工作。使用 GET 请求执行此操作的好方法是什么？

更新：我使用以下 hack 来解决这个问题：

```
(get & parameters('ignored.?)) {
  //TODO find a way to do this without ignored parameters
  (ingored:Option[String]) => {
     returnsOption().map(result => complete(result))
       .getOrElse(complete{(NotFound, "")})
  }
 } 
```

我希望使用`() =>`or可以实现类似的事情`ctx =>`，但这并不可行，因为它给编组带来了麻烦：

```
... could not find implicit value for evidence parameter of type spray.httpx.marshalling.Marshaller[(spray.http.StatusCodes.ClientError, String)]
    }).getOrElse(ctx.complete{(NotFound, "")})
                             ^ 
```

难道这与我使用spray-json的事实有关吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-06T05:11:02.397

例如，像这样使用*[HttpResponse](https://github.com/spray/spray/blob/master/spray-http/src/main/scala/spray/http/HttpMessage.scala#L225)*

```
complete{
  HttpResponse(StatusCodes.OK, HttpBody(ContentType(`text/html`), "test test: " + System.currentTimeMillis.toString))
} 
```

**更新：**我已经使用 Spray 有一段时间了。原来有更好的方法：

```
complete {
  StatusCodes.BandwidthLimitExceeded -> MyCustomObject("blah blah")
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T15:32:21.100

此代码应该可以工作：

```
get {
  ctx =>  
     ctx.complete(returnsOption())
 } 
```

如果一开始不使用`ctx =>`，您的代码可能只会在路由构建时执行。

在这里您可以找到一些解释：[了解 DSL 结构](http://spray.io/documentation/spray-routing/advanced-topics/understanding-dsl-structure/)

# ruby-on-rails - 如何调用写在我的模型中的数组

> ID：15744393
> 
> 赞同：0
> 
> 时间：2013-04-01T13:27:56.677
> 
> 标签：ruby-on-rails, arrays

大家好，我想在我的模型中创建一个数组，然后稍后从视图或助手中引用它。我该怎么做呢？

这是在我的事件模型中。用户可以为活动选择午餐类型（1,2,3）。在我看来，而不是硬编码三明治名称，这可能会改变，我认为我会将名称保留在一个地方（模型），然后根据选择的午餐类型引用名称。

```
SANDWICHES = { 1 => 'Turkey', 2 => 'Veggie', 3 => 'Roast Beef' } 
```

如何从我的应用程序中的另一个脚本（如视图或助手）调用它？

```
Event.SANDWICHES[1] does not work
event_obj.SANDWICHES[1] does not work 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:36:11.507

您所拥有的是一个常量，您需要使用`Event::SANDWICHES`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:48:57.393

您在这里描述的不是模型（以导轨方式），它只是一个常数。

如果您不想创建具有自己的数据库表的实际模型，则可以将其拉出到帮助程序中。

如`fillings_helper.rb`

```
def fillings
 %q{Turkey, Veggie, Roast Beef}
end 
```

然后，您可以通过传入填充物在视图中将其用于选择框

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

您需要在 Event 模型中设置一个文本字段来接受填充字符串。

从数据库规范化的角度来看，这不一定是最好的方法，但它会满足您的要求。

# css - CSS3下拉菜单-显示无/块的过渡？

> ID：15744395
> 
> 赞同：1
> 
> 时间：2013-04-01T13:28:02.693
> 
> 标签：css, drop-down-menu, menu, transition

我想基于以下 HTML/CSS 创建一个下拉菜单视图：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
        html * {
            margin: 0;
            padding: 0;
            }
        body {
            color: #FFF;
            }
        #panel, #content {
            position: absolute;
            top: 0;
            bottom: 0;
            }
        #panel {
            left: 0;
            width: 750px;
            background: #333;
            z-index: 100;
            padding-top: 200px;
            padding-left: 250px;
            }
        #content {
            background: #000;
            left: 250px;
            right: 0px;
            }
        #panel > nav {
            margin-bottom: 100px;
            }
    .Dropdown {
        position: relative; /* Has to be set, can be overriden */
        }
    .Dropdown > ul {
        position: absolute;
        display: none;
        list-style-type: none;
        }
    .Dropdown:hover > ul {
        display: block;
        }
    .Dropdown > ul, /* On the right by default */
    .Dropdown.Right > ul { /* Deploys on the right side of the label */
        top: 0;
        left: 100%;
        }
    .Dropdown.Bottom > ul { /* Deploys below the label */
        top: 100%;
        left: 0;
        }
    </style>
</head>
<body>
    <div id="panel">

        <nav class="Dropdown Right" style="width: 200px;"><!-- so it can appear on jsfiddle -->
            <div class="Label Parent">Label</div>
            <ul>
                <li>
                    <div class="Label">Entry</div>
                </li>
                <li>
                    <div class="Label">Entry</div>
                </li>
                <li>
                    <div class="Label">Entry</div>
                </li>
                <li>
                    <nav class="Dropdown Right">
                        <div class="Label Parent">Label</div>
                        <ul>
                            <li>
                                <div class="Label">Entry</div>
                            </li>
                            <li>
                                <nav class="Dropdown Right">
                                    <div class="Label Parent">Label</div>
                                    <ul>
                                        <li>
                                            <div class="Label">Entry</div>
                                        </li>
                                        <li>
                                            <div class="Label">Entry</div>
                                        </li>
                                        <li>
                                            <div class="Label">Entry</div>
                                        </li>
                                        <li>
                                            <div class="Label">Entry</div>
                                        </li>
                                    </ul>
                                </nav>
                            </li>
                            <li>
                                <div class="Label">Entry</div>
                            </li>
                            <li>
                                <div class="Label">Entry</div>
                            </li>
                        </ul>
                    </nav>
                </li>
            </ul>
        </nav>

    </div>
    <div id="content">
    </div>
</body> 
```

我希望开发人员能够扩展此下拉 CSS 以添加例如 0 和 1 不透明度之间的过渡。实际上，这段代码是不可能的，因为属性显示与转换冲突。由于该显示属性，在非悬停上添加不透明度 0 和在悬停上添加不透明度 1 将不起作用。我在这个网站的某个地方读到我可以使用 height 0 和 height auto 而不是 display none 和 display block （分别），但它也不起作用。请问有关于如何添加过渡的任何想法吗？谢谢你的帮助 ！

# extjs - ExtJS HTMLEditor 工具栏在达到指定高度后消失

> ID：15744397
> 
> 赞同：0
> 
> 时间：2013-04-01T13:28:18.723
> 
> 标签：extjs, html-editor

我正在使用 ExtJS HTMLEditor 并设置属性如下 -

```
{ xtype: "htmleditor", width: 500, height: 250} 
```

输入文本时，达到指定高度后，工具栏消失。我尝试删除高度和设置`autoHeight: true` ，但在这两种情况下，HTML 编辑器都不适合窗口（HTMLEditor 在里面`Ext.form.FormPanel`）。

任何有想法的人来解决它。

这是我的代码

```
Ext.onReady(function() {
    Ext.create('Ext.window.Window', {
        title: 'This is Title',
    resizable: false,
    modal: true,
    height: 300,
    width: 500,
    layout: 'fit',
    closeAction: 'hide',
        items: [
                    new Ext.form.FormPanel({
                    border: false,
                    autoHeight: true,
                items: [
                    {  allowBlank: false, xtype:     
                                    "htmleditor", height: 250, width: 600, anchor:'100%'}
                ]
            })
         ],
         buttons: [
        {text: 'Ok' },
        {text: 'Cancel'}
         ]
     }).show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:21:19.637

我已经解决了问题 - 添加`layout: 'fit'`到 Formpanel

```
Ext.onReady(function() {
    Ext.create('Ext.window.Window', {
        title: 'This is Title',
    resizable: false,
    modal: true,
    height: 300,
    width: 500,
    layout: 'fit',
    closeAction: 'hide',
        items: [
                    new Ext.form.FormPanel({
                    border: false,
                    layout: 'fit',   // This fixed the issue
                    items: [
                        {  allowBlank: false, 
                           xtype: "htmleditor", 
                           height: 250, 
                           width: 600
                        }
                    ]
            })
         ],
         buttons: [
                    {text: 'Ok' },
                    {text: 'Cancel'}
         ]
     }).show();
}); 
```

# maven - Maven：仅生成报告

> ID：15744400
> 
> 赞同：1
> 
> 时间：2013-04-01T13:28:26.507
> 
> 标签：maven, cobertura, pmd, surefire

我有这个 POM.xml

```
<reporting>
<plugins>
   <plugin>  
    <groupId>org.apache.maven.plugins</groupId>  
    <artifactId>maven-pmd-plugin</artifactId>  
    <version>3.0.1</version>  
    <reportSets>
      <reportSet>
        <reports>
          <report>pmd</report>
          <report>cpd</report>
        </reports>
      </reportSet>
    </reportSets>
 </plugin>

 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>cobertura-maven-plugin</artifactId>
    <version>2.5.2</version>
  </plugin>

   <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>2.14</version>
  </plugin>

</plugins> 
```

当我使用它时`mvn site`，它会为我生成一个完整的网站，但我想要的是只生成报告。

谁能通过提供完成这项工作的命令来帮助我？

# python - NumPy 矩阵加列向量

> ID：15744402
> 
> 赞同：6
> 
> 时间：2013-04-01T13:28:28.050
> 
> 标签：python, vector, matrix, numpy, linear-algebra

我正在使用`numpy.matrix`. 如果我添加一个`3x3`带有`1x3`或`3x1`向量的矩阵，我会得到一个`3x3`矩阵。

这不应该`undefined`吗？如果不是，对此有何解释？

例子：

```
a = np.matrix('1 1 1; 1 1 1; 1 1 1')
b = np.matrix('1 1 1')
a + b #or a + np.transpose(b) 
```

输出：

```
matrix([[2, 2, 2],
        [2, 2, 2],
        [2, 2, 2]]) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T13:30:53.530

这称为“广播”。从[手册](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)：

> 广播一词描述了 numpy 在算术运算期间如何处理具有不同形状的数组。受限于某些限制，较小的阵列在较大的阵列上“广播”，以便它们具有兼容的形状。广播提供了一种向量化数组操作的方法，以便循环在 C 而不是 Python 中发生。它在不制作不必要的数据副本的情况下做到这一点，并且通常会导致有效的算法实现。但是，在某些情况下，广播不是一个好主意，因为它会导致内存使用效率低下，从而减慢计算速度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T13:55:06.223

如果您确实希望将向量添加到矩阵中，您可以通过选择它应该去的地方来做到这一点：

```
In [155]: ma = np.matrix(
     ...:     [[ 1.,  1.,  1.],
     ...:      [ 1.,  1.,  1.],
     ...:      [ 1.,  1.,  1.]])

In [156]: mb = np.matrix([[1,2,3]])

In [157]: ma[1] += mb # second row

In [158]: ma
Out[158]: 
matrix([[ 1.,  1.,  1.],
        [ 2.,  3.,  4.],
        [ 1.,  1.,  1.]])

In [159]: ma[:,1] += mb.T # second column

In [160]: ma
Out[160]: 
matrix([[ 1.,  2.,  1.],
        [ 2.,  5.,  4.],
        [ 1.,  4.,  1.]]) 
```

但我想警告您没有`numpy.matrix`按照说明使用。实际上，您使用的`numpy.ndarray`是因为`np.ones`返回 an`ndarray`而不是 a `matrix`。

加法还是一样，但是创建了一些矩阵，你会发现它们的行为不同：

```
In [161]: ma*mb
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

ValueError: matrices are not aligned

In [162]: mb*ma
Out[162]: matrix([[ 6.,  6.,  6.]])

In [163]: ma*mb.T
Out[163]: 
matrix([[ 6.],
        [ 6.],
        [ 6.]])

In [164]: aa = np.ones((3,3))

In [165]: ab = np.arange(1,4)

In [166]: aa*ab
Out[166]: 
array([[ 1.,  2.,  3.],
       [ 1.,  2.,  3.],
       [ 1.,  2.,  3.]])

In [167]: ab*aa
Out[167]: 
array([[ 1.,  2.,  3.],
       [ 1.,  2.,  3.],
       [ 1.,  2.,  3.]]) 
```

# javascript - 遍历 DOM 树

> ID：15744410
> 
> 赞同：0
> 
> 时间：2013-04-01T13:29:21.413
> 
> 标签：javascript, html

我一直在研究用于拖放框的 JavaScript 代码，用户基本上可以将图像拖入下拉框，当他们拖动特定组合时，它会返回某种消息。例如，如果他们拖入 image1、image3 和 image5，它会返回一条消息。我一直在为此使用 DOM 树，但我不知道如何检查何时拖入多个图像。当一个图像如下所示时，我可以让它工作。任何帮助将一如既往地受到赞赏。

```
<html>
<head>
    <meta charset ="utf-8">
    <style type="text/css">
        #dragBox {width:400px; height:320px; margin:10px;padding:10px;border:1px solid #aaaaaa;}

        .thumbnails img 
        {
            height: 80px;
            border: 4px solid #555;
            padding: 1px;
            margin: 0 10px 10px 0;
        }

        .thumbnails img:hover 
        {
            border: 4px solid #00ccff;
            cursor:pointer;
        }

    </style>
    <script>
    function allowDrop(ev)
    {
        ev.preventDefault();
    }

    function drag(ev)
    {
        ev.dataTransfer.setData("Text",ev.target.id);
    }

    function drop(ev)
    {
        ev.preventDefault();

        var data = ev.dataTransfer.getData("Text");
        var theNode = document.getElementById(data);
        var nodeCopy = theNode.cloneNode(true);

        ev.target.appendChild(nodeCopy);

        if (data == "drag1")
        {
            foodOne();
        }

        //ev.target.removeChild(nodeCopy);

    }

    function foodOne()
    {
        alert("You choose Food One");
    }

    </script>
</head>
<body bgcolor="#333333">
<div class="gallery" align="center">
    <div class="thumbnails">
        <img id="drag1" src="foodOne.jpg" draggable="true" ondragstart="drag(event)"">
        <img id="drag2" src="foodTwo.jpg" draggable="true" ondragstart="drag(event)" >
        <img id="drag3" src="foodThree.jpg" draggable="true" ondragstart="drag(event)">
        <img id="drag4" src="foodFour.jpg" draggable="true" ondragstart="drag(event)">
        </br></br>
        <div id="dragBox" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div></br>

</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:37:08.143

甚至不确定是否存在多滴之类的东西。但是话又说回来，我没有做太多拖放的东西，也许用倍数你会得到一个事件数组？还是某个州说诸如留下出色的下降操作之类的东西？

因此，以我对此的有限了解，对我来说，合乎逻辑的解决方案是有一个类似结果数组的东西，你在每个 drop 上推送 id，然后是一个新函数来检查你的数组是否包含你正在寻找的组合。

# visual-studio-2012 - VS 2012 任务列表在 Typescript 中不起作用

> ID：15744412
> 
> 赞同：1
> 
> 时间：2013-04-01T13:29:33.333
> 
> 标签：visual-studio-2012, typescript, tasklist

有没有办法让任务列表在 Typescript 项目中工作？

它不识别任何“TODO”评论。只能创建用户任务。

**更新：**

我在[Codeplex 网站](http://typescript.codeplex.com/workitem/858)上提出了一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-12T11:53:04.427

MichaelS 打开的 Codeplex 错误的更新：错误已移至 GitHub：[任务列表令牌不兑现 #1942](https://github.com/Microsoft/TypeScript/issues/1942)并且仅针对 Visual Studio 2015 进行了修复。此外，开发人员没有计划将其集成到任何早期的 VS 版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:43:13.090

最好的办法是在 Codeplex 网站上提出一个错误，以便 TypeScript 团队可以将其分配给开发人员和发布。

[http://typescript.codeplex.com/](http://typescript.codeplex.com/)

# java - 使用 java swing 在 ImageIcon 代理中显示动画 gif

> ID：15744415
> 
> 赞同：1
> 
> 时间：2013-04-01T13:29:48.397
> 
> 标签：java, swing, jlabel, imageicon, animated

我曾经写过这个

```
JLabel label=new JLable(URL);
frame.getContentPane().add(label); 
```

它适用于动画 gif 图像

但是，当我想使用 imageProxy 从互联网加载 gif 时，它不起作用。

我的 imageProxy 是这个

```
public class ImageProxy implements Icon{
ImageIcon imageIcon;
URL imageURL;
Thread retrievalThread;
boolean retrieving =false;
public ImageProxy(URL url){
    imageURL = url;
}

public int getIconHeight() {skip}
public int getIconWidth() {skip}

@Override
public void paintIcon(final Component c, Graphics g, int x, int y) {
    System.out.println("paint");
    if(imageIcon !=null){
        imageIcon.paintIcon(c, g, x, y);
    }else{
        g.drawString("Loading image", x+10, y+80);
        if(!retrieving){
            retrieving =true;
            retrievalThread = new Thread(new Runnable(){
                public void run(){
                    try{
                        imageIcon = new ImageIcon(imageURL);
                        c.repaint();
                    }catch(Exception e){
                        e.printStackTrace();
                    }
                }
            });
            retrievalThread.start();
        }
    }
} 
```

}

它可以成功加载图像，但它不会自动刷新它图像我必须通过缩放框架来更改图像，每次我缩放它时都会更改一张图片

我阅读了文档，它说，在其他显示 gif 时我需要 setImageObsever 我尝试过，但不起作用。和 getImageObserver 没有代理打印 null 的 imageIcon 正常工作

我也尝试阅读源代码，但我不太明白。

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:03:44.950

问题的根源可能在于`ImageObserver`接口的实现`JLabel`：

```
public boolean imageUpdate(Image img, int infoflags,
               int x, int y, int w, int h) {
    // Don't use getDisabledIcon, will trigger creation of icon if icon
    // not set.
if (!isShowing() ||
        !SwingUtilities.doesIconReferenceImage(getIcon(), img) &&
        !SwingUtilities.doesIconReferenceImage(disabledIcon, img)) {

    return false;
}
return super.imageUpdate(img, infoflags, x, y, w, h);
} 
```

这是代码`SwingUtilities.doesIconReferenceImage`：

```
static boolean doesIconReferenceImage(Icon icon, Image image) {
Image iconImage = (icon != null && (icon instanceof ImageIcon)) ?
                   ((ImageIcon)icon).getImage() : null;
return (iconImage == image);
} 
```

如您所见，如果图标不是will be`ImageIcon`结果的实例，则甚至无需调用 super 的实现，该实现实际上负责调用以刷新动画图标的新框架。此外，返回意味着我们不再对更新感兴趣。 `imageUpdate()``false``repaint()``JLabel``false`

您可以扩展`JLabel`以克服此限制。`JLabel`这是overrides的一个非常简单的扩展`imageUpdate()`。为简单起见，此实现的实际代码`imageUpdate`取自`Component.imageUpdate()`, 只是`isInc`和`incRate`是常量：

```
public static class CustomLabel extends JLabel {
    private static final boolean isInc = true;
    private static final int incRate = 100;

    public CustomLabel(Icon image) {
        super(image);
    }

    @Override
    public boolean imageUpdate(Image img, int infoflags, int x, int y,
            int w, int h) {
        int rate = -1;
        if ((infoflags & (FRAMEBITS | ALLBITS)) != 0) {
            rate = 0;
        } else if ((infoflags & SOMEBITS) != 0) {
            if (isInc) {
                rate = incRate;
                if (rate < 0) {
                    rate = 0;
                }
            }
        }
        if (rate >= 0) {
            repaint(rate, 0, 0, getWidth(), getHeight());
        }
        return (infoflags & (ALLBITS | ABORT)) == 0;
    }
} 
```

您可以插入以添加在图像仍在加载时`imageUpdate()`显示*“正在加载图像”字符串的功能。*

我想知道代理的实现背后的真正原因是什么`ImageIcon`。如果您需要同步图像加载，您可以使用`ImageIO`API。

# java - 在 10x10 二维数组中完成的数学计算不正确

> ID：15744416
> 
> 赞同：0
> 
> 时间：2013-04-01T13:29:52.600
> 
> 标签：java, arrays

我设置了一个 10 x 10 的二维数组，每个插槽是 (x*y) 对应的位置。我正在尝试将第 3、5 和 7 列中的所有数字加到 cTotal 中，并将第 2、4 和 6 行中的所有数字加到 rTotal 中。我的编码看起来不错，但我似乎无法让它工作。有任何想法吗？

```
public static void arrayMath()
{
    int cTotal = 0;
    int rTotal = 0;
    //int tDiffValue = (rTotal - cTotal);

    int twodimarr[][] = new int[10][10];

    int row = 10; 
    int col = 10;
    int x = 0;
    int y = 0;

    for(x = 0; x < row; x++)
    {
        for(y = 0; y < col; y++)
        {
            twodimarr[x][y] = x*y;
        }
    }

    for(x = 0; x < row; x++)
        {
        for(y = 0; y < col; y++)
            {
            if( (x+y) < col )
            {
        //System.out.print( " " );
        }
    //System.out.print(" " + (twodimarr[x][y]));
    }
    //System.out.println();
    }

    for(x = 0; x < twodimarr.length; x++)     //Problems start down here.
      {
        for( y= 0; y<twodimarr.length; y++)
        {
            if(y == 2 || y == 4 || y == 6)
            {
            rTotal = ((rTotal + twodimarr[x][y]));
            }
        }
      }
      System.out.println("rTotal is " + rTotal + ".");

      for(x = 0; x < twodimarr.length; x++)
      {
          for(y = 0; y < twodimarr.length; y++)
          { 
             if(x == 3 || x == 5 || x == 7)
             {
             cTotal = ((cTotal + twodimarr[x][y]));
             }
          }
      }
      System.out.print("cTotal is " + cTotal + "."); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:53:50.453

x==3 不是第三列，而是第四列（0,1,2,3）。这意味着它是 3*0、3*1 等列，在这种情况下 675/540 数字是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:56:51.510

数组索引从 0 开始。要获得所需的行/列，您需要从要检查的数字中减去 1。对于第 2、4、6 行，检查 y == 1、3、5。对于第 3、5、7 列，检查 x == 2、4、6。

# iphone - UICollectionView 累积不同批次更新的动画

> ID：15744418
> 
> 赞同：4
> 
> 时间：2013-04-01T13:29:56.780
> 
> 标签：iphone, ios, objective-c, uicollectionview, uicollectionviewcell

我`UICollectionView`对不同批次更新的动画有疑问。我正在使用这段代码：

```
[collectionView performBatchUpdates:^{
    if (touched) {
        [collectionView deleteItemsAtIndexPaths:markedItems];
        [collectionView insertSections:newSec];
    } else {
        [collectionView deleteSections:newSec];
        [collectionView insertItemsAtIndexPaths:markedItems];
    }
} completion:nil]; 
```

这[是我正在尝试做的事情和问题的视频](http://db.tt/vBXOi2re)。这个想法是，当您触摸图像时，它会将其动画到顶部，作为新的主图像并淡化其他图像。问题是，当您返回并触摸其他图像时，它将为这个新触摸的图像**和**以前的图像设置动画。

我相信这是一个`UICollectionView`错误，我想不出任何解决方法。

如果需要，这是一个[示例项目。](http://db.tt/kOZpYxa1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:48:39.477

我联系了苹果。他们的工程师说这确实是 UIKit 中的一个错误，并且没有已知的解决方法，我应该等待下一个主要的 iOS 预览版本（iOS 7）来检查是否能解决问题。

# html - 使标签可点击以获得更大的区域

> ID：15744419
> 
> 赞同：0
> 
> 时间：2013-04-01T13:29:57.963
> 
> 标签：html, css

 我有一个菜单，我希望我的标签在悬停时可以在更大的区域上点击，基本上是菜单的宽度和高度。 

这是我现在拥有的代码：http: [//jsfiddle.net/uwJTC/14/](http://jsfiddle.net/uwJTC/14/)

**HTML**

```
<div id="box">
    <ul>
        <li><a href="#">Basic but good</a></li>
        <li><a href="#">This is a longer one</a></li>
        <li><a href="#">Shorter</a></li>
    </ul>
</div> 
```

**CSS**

```
#box ul { 
    width: 230px;
    height: 160px;
    float: right;
    margin: 0px 0 15px 900px;
    background:#999;
    list-style: none;
}

#box ul li {
    background: red;
    border: 1px solid #222;
}

#box ul li:hover {
    background: yellow;
}

#box ul li a {
    padding: 10px;
} 
```

我希望你知道我的意思。如果你不问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:32:40.550

像这样？[http://jsfiddle.net/Allendar/uwJTC/16/](http://jsfiddle.net/Allendar/uwJTC/16/)

```
#box ul li a {
    padding: 10px;
    display: block;
    width: 100%;
} 
```

# bash - 读取命令不等待输入

> ID：15744421
> 
> 赞同：22
> 
> 时间：2013-04-01T13:30:05.310
> 
> 标签：bash, wait, readline

我在 bash 中执行一个简单的脚本时遇到问题。脚本是这样的：

```
#! /bin/sh

read -p 'press  [ENTER]  to continue deleting line'
sudo sed -ie '$d' /home/hpccuser/.profile 
```

当我用 ./script 执行脚本时，输出是这样的：

```
press  [ENTER]  to continue deleting line./script: 3: read: arg count
[sudo] password for user 
```

我直接在终端中运行读取命令（从脚本复制并粘贴到终端），它工作正常；它等待 ENTER 被击中（就像暂停一样）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-01T13:34:04.620

因为您的脚本以`#!/bin/sh`而不是开头`#!/bin/bash`，所以不能保证您有可用的 bash 扩展（例如`read -p`），并且只能依赖符合标准的功能。

请参阅[相关标准文档](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/read.html)以获取保证存在于`read`.

在这种情况下，您可能需要两行，一条用于打印，另一条用于读取：

```
printf 'press [ENTER] to continue deleting...'
read _ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-10T09:36:41.103

您也可以使用 echo 命令执行此操作！：

```
 echo "press  [ENTER]  to continue deleting line"
    read continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T09:18:40.997

```
read -p " Ici mon texte " continue 
```

它适用于树莓派

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T10:15:06.227

似乎我参加聚会迟到了，但`echo -n "Your prompt" && sed 1q`在符合 POSIX 的 shell 上成功了。这将打印一个提示，并从 STDIN 中获取一行。

或者，您可以将该输入扩展为一个变量：

```
echo -n "Your prompt"
YOUR_VAR=$(sed 1q) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T06:22:47.923

如果您使用管道将内容重定向到您的函数/脚本，它将在子 shell 中运行您的命令并将 stdin ( `0`) 设置为管道，可以通过以下方式检查

```
$ ls -l /dev/fd/
lr-x------ 1 root root 64 May 27 14:08 0 -> pipe:[2033522138]
lrwx------ 1 root root 64 May 27 14:08 1 -> /dev/pts/11
lrwx------ 1 root root 64 May 27 14:08 2 -> /dev/pts/11
lr-x------ 1 root root 64 May 27 14:08 3 -> /proc/49806/fd 
```

如果您在该函数/脚本中调用 //... 命令，该`read`命令将立即返回从该管道读取的任何内容，因为标准输入已设置为该管道而不是 tty，这解释了为什么命令不等待输入. 在这种情况下，要让命令等待输入，您必须在调用命令之前将 stdin 恢复为 tty。`readarray``read``read``read``exec 0< /dev/tty``read`

# c# - 为 WCF 发布非 https 终结点 - Azure

> ID：15744423
> 
> 赞同：0
> 
> 时间：2013-04-01T13:30:11.340
> 
> 标签：c#, wcf, azure

如何为 WCF 添加非 https 端点？我的 WCF 是 Azure 项目中的一个 Web 角色。

我当前的端点是：

```
<bindings>
      <basicHttpBinding>
        <binding name="SecureBasic" proxyAddress="http://localhost:80">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service name="WebRoleUploadImages.UploadImages">
        <host>
          <baseAddresses>           
            <add baseAddress="http://localhost:80"/>
          </baseAddresses>
        </host>

        <endpoint address="WCFSecure" binding="basicHttpBinding" bindingConfiguration="SecureBasic"
          name="SecureHTTPSendpoint" contract="WebRoleUploadImages.IUploadImages"> </endpoint>       

      </service>
    </services> 
```

问题是我还没有 SSL 证书，所以我无法在没有 http 端点的情况下测试我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:42:31.770

这不是 azure 限制，而是 WCF 限制。基本身份验证以纯文本形式发送密码，并且在没有 SSL 认证的情况下这样做是一个非常糟糕的主意。如果它只是为了测试，你可以通过指定来欺骗它

```
<security mode="TransportCredentialOnly"> 
```

# javascript - ember-data 'live' 返回的数据在哪里？

> ID：15744424
> 
> 赞同：0
> 
> 时间：2013-04-01T13:30:14.733
> 
> 标签：javascript, ember.js, handlebars.js, ember-data

你们我有一个结构/程序问题要问你们。

所以我有一个非常简单的 ember 应用程序，尝试使用 ember-data，但我不确定我是否“做对了”。所以用户点击我的索引模板，我获取他们的位置坐标并对其进行编码（这部分有效）。然后在我的服务器上，我有一个存储以哈希坐标命名的“瓷砖”的数据库（如果我到达我的`#/tiles/H1A2S3H4E5D`路线，我会返回格式正确的 JSON）。

接下来我想发生什么，如果在第一页的底部向用户显示每个返回的图块（比如部分可能？如果把手这样做）。

如果我`DS.Model`将 Hash'd 线硬编码为`App.find(H1A2S3H4E5D)`; 我可以看到我的服务器正确响应了查询。但是，我似乎无法弄清楚如何访问返回的 JSON 对象，或者如何将其显示给用户。

我确实看过一些教程视频，但它们似乎都与旧路由器过时了。

主要想知道：
1\. 返回的信息在哪里`App.find()`；生活以及如何访问它？
2.构建模板/视图以处理此问题的“正确”方法是什么？
3.我应该如何将该id（哈希坐标）传递给`App.find`？作为全局变量？或者，还有更好的方法？

（对我来说）最大的问题似乎是我搜索的 id 直到用户第一次点击页面时才存在。（因为它是动态生成的）所以我不能在页面加载时抓住它。

*如果需要，我可以发布小提琴，但我正在寻找更多概念/指导性答案，而不是为我编写代码的人*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:21:17.530

我还在使用 Ember 学到很多东西，但这是我的理解。当您按照指南和教程进行操作时，您将拥有如下内容：

```
App.TileController = Ember.ObjectController.extend();

App.TileRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', App.Tile.find(MYHASH));
  }
}); 
```

它所做的是将特殊内容对象设置为结果。因此，由于我们声明了一个对象控制器，并使用参数调用 find，它知道需要一个单一的结果。`Tile`因此将加载遵循命名约定的视图和模板。在那里你可以访问 Tile 对象的属性：

```
<p>{{lat}}</p><p>{{lng}}</p> 
```

我不得不承认，有时这感觉有点神秘。它的核心在于命名约定。您需要非常具体地命名所有各种控制器、路由等。一旦确定，您就需要将您想要的数据绑定到控制器的内容。

1）除了“在内存中”的通用答案之外， .find() 调用会在您返回它的任何地方进行。一般来说，这是在控制器的“内容”属性上设置的。

2）我或多或少地回答了这个问题，但一般来说，你取你的路线的名字，并以此为基础。所以对于一条路线`TileRoute`，你有：

*   TileController = Ember.ObjectController.extend
*   平铺 = DS.Model.extend
*   TileView = Ember.View.extend
*   tile.handlebars

我通常将所有车把文件存储在模板/文件夹中。如果将它们嵌套得更深，只需在视图对象中指定路径：

```
App.TileView = Ember.View.extend({
  templateName: "tiles/show"
}); 
```

3）这真的取决于你的应用程序。一般来说，从 URL 中获取 id 或在函数中本地构建 id 更好。由于您正在对哈希进行编码，我想您是在一个函数中执行此操作，然后调用 find. 我为 Array 控制器做了一些类似的事情。

我不知道您在什么时候生成哈希，所以假设它是 onload。您应该能够在 setupController 函数中生成散列。

```
App.TileRoute = Ember.Route.extend({
  generateHashBasedOnCoords: function() {
    // ...
  },
  setupController: function(controller) {
    var MYHASH = this.generateHashBasedOnCoords();
    controller.set('content', App.Tile.find(MYHASH));
  }
}); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:28:33.840

我相信您可以利用 ember 中的数据绑定，基本上有一个用于切片的数组控制器，并将内容最初设置为一个空数组。然后我们返回您的响应，执行 App.find() 并使用返回的数据设置图块控制器的内容。这应该通过数据绑定更新视图。（非常高水平的反应）

数据本身存储在使用 ember 数据设置的存储中。您可以使用与模型方法 App.Tile.find() 等相同的方法访问它。它检查所需的数据是否在存储中，如果是，则返回数据，否则调用 api 以获取数据。

# javascript - 如何将 Google 日历和电子表格与脚本同步

> ID：15744425
> 
> 赞同：5
> 
> 时间：2013-04-01T13:30:15.457
> 
> 标签：javascript, google-apps-script, google-sheets, synchronization, google-calendar-api

我正在尝试创建一个 Google Apps 脚本，以使 Google 日历和云端硬盘上的“主电子表格”保持同步——这可能吗？我找到了这两个帖子：

*   [http://blog.ouseful.info/2010/03/04/maintaining-google-calendars-from-a-google-spreadsheet/](http://blog.ouseful.info/2010/03/04/maintaining-google-calendars-from-a-google-spreadsheet/)

*   [http://blog.ouseful.info/2010/03/05/grabbing-google-calendar-event-details-into-a-spreadsheet/](http://blog.ouseful.info/2010/03/05/grabbing-google-calendar-event-details-into-a-spreadsheet/)

我很确定这可以使用大量 if 语句和逻辑来完成，但也许有更简单的方法？

我最终只提供了以下简单的脚本。真正需要的只是添加基于两列的事件，而这将花费太长时间来开发。

```
function onOpen() {
  //spawns a menu with a button that triggers AddToCal
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{
    name : "Add event to calendar",
    functionName : "AddToCal"
  }];
  sheet.addMenu("Data To Calendar Plugin", entries);
};

function AddToCal(){

  //get the current row
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var cell = ss.getActiveCell();
  var R = cell.getRow();

  //grab values for current row to pass to calendar event
  var date_of_event = ss.getRange('G'+R).getValue();
  var date = new Date(date_of_event);
  var event_title = ss.getRange('A'+R).getValue();
  //access the calendar
  var cal = CalendarApp.getCalendarById('[IDREMOVED]');
  cal.createAllDayEvent(event_title,date);

  ss.toast("Event added to " + cal.getName());
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:19:19.257

是的，*可以*编写双向事件同步脚本，但这并不简单。您引用的那两个帖子具有可以重复使用的部分，但与您在实际同步中将面临的挑战相比，它们是非常基本的。您可能需要阅读使用 Google Apps 脚本来创建基于电子表格的日历条目（但不进行持续同步）[的活动预订系统。](http://mashe.hawksey.info/2010/03/using-google-apps-script-for-a-event-booking-system/)我过去曾[对该脚本](https://stackoverflow.com/a/14995676/1677912)进行过一些调试。

同步需要支持：

*   在任一位置创建事件
*   在任一位置修改事件详细信息（尽管您可以选择仅考虑事件详细信息的子集以进行简化）
*   删除任一位置的事件
*   复发，例如`CalendarEvent.getEventSeries()`处理（或选择避免）

这是您可以开始的伪代码：

```
Open Calendar, Read Calendar events into calArray (will all attributes you care for)
Open Spreadsheet, Read Spreadsheet events into sheetArray

For each event in calArray:
  Search for calEvent in sheetArray.
  If found, compare lastUpdated values.
    If equal, do nothing
    Otherwise copy most recently updated to least recently updated
    Continue with next event
  If not found then copy calEvent to new sheetEvent, including lastUpdated value.
  Continue with next event

For each event in the sheetArray (...that hasn't been handled yet)
  Similar logic above.

Write updated sheetArray to spreadsheet.
Write updated calEvents to calendar API (see note 1 below) 
```

笔记：

1.  对 calEvents 的所有更新都可以立即写入数组并写入日历 API，作为批量更新的替代方案。这将消除在本地跟踪更改的需要，尽管触摸 lastUpdated 值是一个好主意。

2.  您在读取 ​​calEvents 时会想要使用`CalendarEvent.getLastUpdated()`，并将类似的值存储在电子表格中（与`onEdit`触发器相关联）以方便比较。

3.  它将简化比较以记录`CalendarEvent.getId()`电子表格中的事件。您还`CalendarEvent.setTag(key,value)`可以将自定义元数据记录到日历中，例如指示源自电子表格或已与电子表格同步的事件。（这些标签无法通过 GCal UI 访问，因此只能通过脚本访问。）

4.  您应该考虑要处理的日期范围或事件数量，并限制脚本的范围。如果不这样做，您肯定会在实际操作中遇到执行时间限制。

5.  某些日历事件特征不适合在电子表格中轻松表达，例如：

    *   嘉宾名单
    *   提醒清单

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T18:18:40.163

正如在另一篇文章中提到的（感谢 Henrique），我花了一些时间——实际上正是它把我带到了 GAS——电子表格和日历之间的数据交换，主要是因为与我一起工作的人过去常常组织他们的时间安排（对于高中）在电子表格中，我必须照顾到谷歌日历的过渡。

一段时间后，尽管在线日历界面似乎更有效地创建事件，因此他们不再使用工作表到日历脚本！

另一方面，GCal 中的打印和演示选项非常有限，因此另一个方向仍然非常有用，我们一直在使用它！

我知道这似乎与原始问题无关，而且可能太荒谬了，但我只是想指出，在重新发明轮子之前，您应该彻底考虑您真正需要的东西......正如 Mogsdad 提到的，一些事件参数是在电子表格逻辑中不容易描述，最后它可能会变得比原始工具更复杂。

当我需要删除或编辑大量类似事件时，我使用双向数据传输开发的唯一真正有用的工具是“批量修改工具”。

例如，如果我们全年都需要更改老师的姓名，我会导入一些班级的所有活动，替换电子表格中的姓名并更新课程日历......这需要我 5 分钟，并且是很容易，但这些是非常具体的用例，我不确定它是否很常见。

无论如何，我不会称其为“同步”，因为它只需要一些时间并更改它们......我从未尝试使用日历来更新电子表格，根据我的经验，日历非常可靠，我认为它们作为原始数据源。正如我已经说过的，我们每周都会在电子表格中导入数据，仅用于打印和本地存档。

很抱歉这么长而且有点含糊的评论（那太长了，不适合正常的 500 chrs 评论；-）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T14:29:28.657

不，没有。尽管关于 Apps Script Calendar Service 的许多问题已经解决（时区、全天事件、查询等），但它仍然是一项相当复杂的任务。

我知道 Serge，在#google-apps-script 标签上[的 SO 中的最高贡献者](https://stackoverflow.com/users/1368381/serge-insas)，已经开发了相当多的涉及日历服务的[脚本。](https://sites.google.com/site/appsscriptexperiments/home)

但是我不知道在日历和电子表格之间进行了双向更新。这应该是一个艰难的过程。如果你曾经这样做，请善意分享:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-26T22:26:38.610

我编写了一个在 GCalendar 和 GSheet 之间同步的脚本。您可以按原样使用它，或者当然可以从中借用想法。每种方式都有用于复制事件的单独命令：[https ://github.com/Davepar/gcalendarsync](https://github.com/Davepar/gcalendarsync)

# asp.net - 在哪里放置共享的 mvc 部分视图？

> ID：15744426
> 
> 赞同：0
> 
> 时间：2013-04-01T13:30:17.530
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有一个分成多个控制器的应用程序。但是，可以在控制器之间共享许多视图。通常我可以将其包含在共享文件夹中，但我觉得有时这会变成一个污染文件夹，所有东西都被倾倒在那里。

那么对于局部视图，包含控制器之间共享视图的最佳和正常位置在哪里？我应该继续将它们包含在共享文件夹中，还是可以在同一文件夹中不存在的完整视图中引用部分视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T13:32:20.047

如果有太多子文件夹，则在 ~/Views/Shared 中创建子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:37:26.317

在共享中有像 MVC 母版页这样的文件。您可以在 View 文件夹中打开一个文件夹，称为 shared Views...

# backbone.js - 如何在模块之间共享模型

> ID：15744435
> 
> 赞同：1
> 
> 时间：2013-04-01T13:30:53.473
> 
> 标签：backbone.js, marionette

我正在尝试开发一个 Backbone Marionette 应用程序。我需要能够编辑模型，但我不知道如何将模型放入编辑表单。

我正在为应用程序中的每个“职责”使用模块。例如，一个用于列出用户的模块和另一个用于处理编辑用户的模块。

在 List 模块和 Edit 模块之间共享模型的最佳方式是什么？我需要支持以编程方式和使用路线打开编辑表单。

也感谢所有关于 Marionette 的 CRUD 的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:06:20.367

我建议您重新考虑将“列表”和“编辑”任务分成单独的模块。将模块视为构成单个可交付成果的一系列相关功能。你会在没有列出用户的情况下编辑用户吗？不见得。

关注点分离很重要，但这种分离仍然可以在您的模块中发生。例如，您已经确定了至少四种不同的事物，每种事物都有自己的职责，但与“用户”相关：

```
UserListView -> CollectionView
UserItemView -> ItemView
UserEditView -> Layout or ItemView
UserController -> Controller
UserRouter -> AppRouter 
```

开始简单：使用 UserListView 和 UserItemView、Backbone.Collection 和 Backbone.Model 创建一个模块。成功获取集合后，在 collectionView 中创建并显示。

# java - 如何在使用 createArrayOf() 方法时纠正“java.sql.SQLFeatureNotSupportedException”

> ID：15744437
> 
> 赞同：8
> 
> 时间：2013-04-01T13:30:53.547
> 
> 标签：java, mysql, jdbc

我的代码如下：

```
 PreparedStatement pstm = con.prepareStatement("insert into parameter(Parameter) values(?)");
        Array a = con.createArrayOf("TEXT",s1);
        pstm.setArray(1,a);
        pstm.executeUpdate(); 
```

堆栈跟踪如下：

```
 Exception in thread "main" java.sql.SQLFeatureNotSupportedException
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at com.mysql.jdbc.SQLError.notImplemented(SQLError.java:1329)
at com.mysql.jdbc.JDBC4Connection.createArrayOf(JDBC4Connection.java:56)
at project.Project.main(Project.java:295) 
```

请帮助我纠正这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:34:21.387

[http://docs.oracle.com/javase/6/docs/api/java/sql/SQLFeatureNotSupportedException.html](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLFeatureNotSupportedException.html)

这意味着您的mysql驱动程序无法执行该操作。要么使用不同的驱动程序/数据库，要么不使用该方法。

# javascript - 从 .done 返回值到 $this @ jquery ajax

> ID：15744441
> 
> 赞同：1
> 
> 时间：2013-04-01T13:31:03.923
> 
> 标签：javascript, jquery

```
control_td.each(function(){
$.ajax({
  url: 'control.php?udid='+$(this).attr('udid'),
  cache: false,
  async: true
}).done(function(data) {
  $(this).html(data);
});
}); 
```

但`$this`在`.done`子功能中不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T13:32:58.493

这是因为`this`在回调中没有引用元素项。

尝试关闭一个新值。

```
control_td.each(function(){
var $self = $(this); // magic here!
$.ajax({
  url: 'control.php?udid='+$(this).attr('udid'),
  cache: false,
  async: true
}).done(function(data) {
  $self.html(data);
});
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T13:33:19.410

试试这个：

```
control_td.each(function () {
    var $this = $(this);
    $.ajax({
        url: 'control.php?udid=' + $this.attr('udid'),
        cache: false,
        async: true
    }).done(function (data) {
        $this.html(data);
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T13:36:44.347

也可以设置的`context`选项`$.ajax`，***[勾选这个选项](http://api.jquery.com/jQuery.ajax/)***。

```
control_td.each(function(){
  $.ajax({
    url: 'control.php?udid='+$(this).attr('udid'),
    cache: false,
    async: true,
    context: this
  }).done(function(data) {
    $(this).html(data);
  });
}); 
```

# c++ - 访问共享内存进行读取时锁定

> ID：15744443
> 
> 赞同：4
> 
> 时间：2013-04-01T13:31:09.790
> 
> 标签：c++, c, multithreading

如果我以只读方式访问共享内存，以检查`if()`块的条件，我是否仍应锁定互斥锁？例如

```
mutex_lock();

if (var /* shared memory */) {

}

mutex_unlock(); 
```

是否需要在这里锁定和良好的做法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:33:29.040

如果您正在读取的变量可以同时写入，那么是的，您应该获取互斥锁上的锁。

如果您的编译器为您提供了必要的原语，您只能以原子方式阅读它；这可能是 C11 和 C++11 附带的原子特性，也可能是编译器提供的其他语言扩展。然后您可以将互斥锁获取移动到条件中，但是如果您等到测试之后获取互斥锁，那么其他人可能会在您测试它和获取互斥锁之间更改它：

```
if (example) {
    // "example" variable could be changed here by another thread.

    mutex_lock();

    // Now the condition might be false!

    mutex_unlock();
} 
```

因此，我建议在条件之前获取互斥锁，除非分析已将互斥锁获取确定为瓶颈。（并且在测试变量大于 CPU 寄存器的情况下——例如，32 位 CPU 上的 64 位数字——那么你甚至没有其他选择延迟互斥体获取原子获取或比较原语。）

# android - Fragment 对 mActivity 的引用在方向更改后变为空。片段状态维护无效

> ID：15744445
> 
> 赞同：4
> 
> 时间：2013-04-01T13:31:17.120
> 
> 标签：android, android-fragments, android-lifecycle, android-memory

我的应用程序由几个片段组成。到目前为止，我已经将它们的引用存储在自定义 Application 对象中，但我开始认为我做错了什么。

当我意识到我的片段对 mActivity 的所有引用在方向更改后都变为空时，我的问题就开始了。因此，当我在方向更改后调用 getActivity() 时，会引发 NullPointerException。我在调用 getActivity() 之前检查了我的片段的 onAttach() 是否被调用，但它仍然返回 null。

以下是我的 MainActivity 的剥离版本，它是我的应用程序中的唯一活动。

```
public class MainActivity extends BaseActivity implements OnItemClickListener,
        OnBackStackChangedListener, OnSlidingMenuActionListener {

    private ListView mSlidingMenuListView;
    private SlidingMenu mSlidingMenu;

    private boolean mMenuFragmentVisible;
    private boolean mContentFragmentVisible;
    private boolean mQuickAccessFragmentVisible;

    private FragmentManager mManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /*
         * Boolean variables indicating which of the 3 fragment slots are visible at a given time
         */
        mMenuFragmentVisible = findViewById(R.id.menuFragment) != null;
        mContentFragmentVisible = findViewById(R.id.contentFragment) != null;
        mQuickAccessFragmentVisible = findViewById(R.id.quickAccessFragment) != null;

        if(!savedInstanceState != null) {
            if(!mMenuFragmentVisible && mContentFragmentVisible) {
                setupSlidingMenu(true);
            } else if(mMenuFragmentVisible && mContentFragmentVisible) {
                setupSlidingMenu(false);
            }

            return;
        }

        mManager = getSupportFragmentManager();
        mManager.addOnBackStackChangedListener(this);

        final FragmentTransaction ft = mManager.beginTransaction();
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);

        if (!mMenuFragmentVisible && mContentFragmentVisible) {
            /*
             * Only the content fragment is visible, will enable sliding menu
             */
            setupSlidingMenu(true);
            onToggle();

            ft.replace(R.id.contentFragment, getCustomApplication().getSportsFragment(), SportsFragment.TAG);

        } else if (mMenuFragmentVisible && mContentFragmentVisible) {
            setupSlidingMenu(false);
            /*
             * Both menu and content fragments are visible
             */
            ft.replace(R.id.menuFragment, getCustomApplication().getMenuFragment(), MenuFragment.TAG);
            ft.replace(R.id.contentFragment, getCustomApplication().getSportsFragment(), SportsFragment.TAG);
        }

        if (mQuickAccessFragmentVisible) {
            /*
             * The quick access fragment is visible
             */
            ft.replace(R.id.quickAccessFragment, getCustomApplication().getQuickAccessFragment());
        }

        ft.commit();
    }

    private void setupSlidingMenu(boolean enable) {
        /*
         * if enable is true, enable sliding menu, if false
         * disable it
         */
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        // launch the fragment that was clicked from the menu
    }

    @Override
    public void onBackPressed() {
        // Will let the user press the back button when
        // the sliding menu is open to display the content.
        if (mSlidingMenu != null && mSlidingMenu.isMenuShowing()) {
            onShowContent();
        } else {
            super.onBackPressed();
        }
    }

    @Override
    public void onBackStackChanged() {
        /*
         * Change selected position when the back stack changes
         */
        if(mSlidingMenuListView != null) {
            mSlidingMenuListView.setItemChecked(getCustomApplication().getSelectedPosition(), true);    
        }
    }

    @Override
    public void onToggle() {
        if (mSlidingMenu != null) {
            mSlidingMenu.toggle();
        }
    }

    @Override
    public void onShowContent() {
        if (mSlidingMenu != null) {
            mSlidingMenu.showContent();
        }
    }
} 
```

以下是 CustomApplication 的剥离版本。我在这个实现背后的想法是保证在我的应用程序的整个生命周期中每个片段只有一个实例。

```
public class CustomApplication extends Application {

    private Fragment mSsportsFragment;
    private Fragment mCarsFragment;
    private Fragment mMusicFragment;
    private Fragment mMoviesFragment;

    public Fragment getSportsFragment() {
        if(mSsportsFragment == null) {
            mSsportsFragment = new SportsFragment();
        }

        return mSsportsFragment;
    }

    public Fragment getCarsFragment() {
        if(mCarsFragment == null) {
            mCarsFragment = new CarsFragment();
        }

        return mCarsFragment;
    }

    public Fragment getMusicFragment() {
        if(mMusicFragment == null) {
            mMusicFragment = new MusicFragment();
        }

        return mMusicFragment;
    }

    public Fragment getMoviesFragment() {
        if(mMoviesFragment == null) {
            mMoviesFragment = new MoviesFragment();
        }

        return mMoviesFragment;
    }
} 
```

我对如何最好地实现多个片段以及如何维护它们的状态的技巧非常感兴趣。供您参考，到目前为止，我的应用程序包含 15 个以上的片段。我做了一些研究，似乎 FragmentManager.findFragmentByTag() 是一个不错的选择，但我无法成功实现它。

我的实现似乎运行良好，除了 mActivity 引用在方向更改后变为空，这让我相信我也可能有一些内存泄漏问题。

如果您需要查看更多代码，请告诉我。我故意避免包含片段代码，因为我坚信问题与我的 Activity 和 Application 实现有关，但我可能错了。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T13:42:29.193

> 我在这个实现背后的想法是保证在我的应用程序的整个生命周期中每个片段只有一个实例

这可能是你的困难的一部分，如果不是全部的话。

在配置更改时， Android 将使用公共零参数构造函数**重新创建您的片段，以创建一个新实例。**因此，您的全局范围片段不会“保证每个片段的一个实例”。

请删除此自定义`Application`类。请让片段自然地重新创建，或者如果它们需要为单个活动的生命而存在，请使用`setRetainInstance(true)`. 不要尝试跨活动重用片段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T13:43:19.610

我看不到您在哪里使用对 mActivity 的引用。但不要引用它。始终使用 getActivity，因为可以在方向更改后重新创建 Activity。此外，永远不要通过 setter 或分配来设置片段的字段，总是使用 Bundle 和 Arguments

[实例化新 Android 片段的最佳实践](https://stackoverflow.com/questions/9245408/best-practice-for-instantiating-a-new-android-fragment)

您还可以使用 setRetainInstance(true) 在方向更改期间保留所有片段的成员。

[理解 Fragment 的 setRetainInstance(boolean)](https://stackoverflow.com/questions/11182180/understanding-fragments-setretaininstanceboolean)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-14T13:13:39.047

要解决此问题，您必须使用片段的 onAttach 方法提供的活动对象，以便在更改方向时重新创建片段，以便 onAttach 为您提供当前参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-30T18:04:16.253

您可以使用`onAttach(Context context)`这样的片段在片段中创建私有上下文变量

```
 @Override
public void onAttach(Context context) {
    this.context = context;
    super.onAttach(context);
} 
```

在改变方向时，onAttach 为您提供对上下文的新引用，如果您想引用活动，您可以将上下文类型转换为活动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-13T09:14:37.833

上下文也可以在片段中的 onCreate 内重新分配，因为当设备旋转时会调用 OnCreate

`private Context mContext; @Override public void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); //get new activity reference here mContext = getActivity(); }`

在整个片段中传递这个 mContext

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-29T01:50:07.727

如果您不... 应用程序类`setRetainInstance(true)`中`onCreate`的集合`List<Object>, Vector<Object>`将变为空。确保你`setRetainInstance(true)`让他们活着。

# java - 使用搜索服务器服务层与数据库层查找实体

> ID：15744448
> 
> 赞同：1
> 
> 时间：2013-04-01T13:31:47.123
> 
> 标签：java, spring, jakarta-ee, elasticsearch

如果您同时设置了搜索 api（使用 Elasticsearch）和存储库层（Spring JDBC），无论查询多么微不足道，您是否总是使用搜索 api？它比存储库版本灵活得多，但速度有点慢。例如：您会使用搜索 api 以某些创建者的名字获取所有汽车吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:54:34.470

似乎您有一个存储库和 ES，它们彼此相邻，具有一些重叠的查询功能

存储库（如果我们谈论的是 DDD 存储库）的优势在于为客户端提供接口，而不必知道您实际上如何在后端进行查询。

说一个回购实现： `getById(id)` `getByName(name)` `getByExample(JsonExample)` `getByFullText(text)`

使用您的主数据存储实现`getById`（也许）我会非常好。`getByName`（mysql、mongoDB、couchbase 或任何你用来喂 ES 的东西）

同时`getByFullText(text)`肯定会由 ES 实现，而且`getByExample(JsonExample)`可能也是如此。

关键是通过将实现置于存储库抽象之后，您的应用程序的其余部分不能/不应该关心您实际实现它的方式。

对您而言，这意味着，只需使用感觉自然的方式（`get all cars by some creators name`大概可以与 ES 和您的主数据存储一起使用）在您的存储库实现中。

顺便说一句：让多个不同的数据存储为您的查询提供服务的概念被称为：[Polyglot Persistance。](http://martinfowler.com/articles/nosql-intro.pdf)

# java - 如何在Android java中将jpg转换为pdf

> ID：15744454
> 
> 赞同：6
> 
> 时间：2013-04-01T13:32:19.860
> 
> 标签：java, android, pdf, pdf-generation

我想将几个 .jpg 文件（使用设备相机拍摄）转换为一个 .pdf 文件。我看到了很多工具，比如 iText、mupdf、PDFjet、pdjBox。

还有更简单的吗？（就像为 android 准备的 API 一样？）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:33:49.223

使用 iText 库将文本转换为 pdf。使用它来将图像转换为 pdf。

```
import java.io.*;
import com.lowagie.text.*;
import com.lowagie.text.pdf.*;
public class imagesPDF
{     
    public static void main(String arg[])throws Exception
    {                  
        Document document=new Document();
        PdfWriter.getInstance(document,new FileOutputStream("YourPDFHere.pdf"));
        document.open();
        Image image = Image.getInstance ("yourImageHere.jpg");
        document.add(new Paragraph("Your Heading for the Image Goes Here"));
        document.add(image);               
        document.close();
   }
} 
```

# orm - CF ORM：使用复合/FK过滤数据

> ID：15744461
> 
> 赞同：1
> 
> 时间：2013-04-01T13:32:42.397
> 
> 标签：orm, coldfusion

我在使用 ORM 过滤具有来自 tab2 的 FK 键的表 tab1 时遇到困难（tab1 与 tab2 具有多对一关系）。我想使用 fk 列过滤 tab1 中的数据。所以我使用了 var items= entityLoad("tab1",{fk_col_name=value_variable})。

现在我得到了错误：您试图取消引用类 java.lang.String 类型的标量变量作为具有成员的结构。

让我在下面分享我的解决方案，但如果有更好的选择，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:32:42.397

该解决方案像往常一样通过大量谷歌搜索铺平了道路。这似乎是因为 entityLoad() 是一个仅适用于已定义属性的便捷函数。对于 entityLoad()，breedid 不是属性。相反，Breed 是属性，属于 Breed 类型。为了解决这个问题，我们可以改用 HQL。

所以

参考： http: [//blog.nictunney.com/2011/02/coldfusion-orm-filtering-on-composite.html](http://blog.nictunney.com/2011/02/coldfusion-orm-filtering-on-composite.html)

# android - 启动画面未显示

> ID：15744463
> 
> 赞同：0
> 
> 时间：2013-04-01T13:32:45.470
> 
> 标签：android, android-layout, android-intent

我的活动 Splash 中有此代码。但是，问题是当我启动我的应用程序时它没有出现。这里的“错误步骤”可能是什么，我该怎么做才能对其进行排序？

```
public class Splash extends Activity {
    Handler handler;
    private long timeDelay = 2500;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);
        final Intent i = new Intent(this, Quotes.class);
        handler = new Handler(); 
        handler.postDelayed(new Runnable() { 
             public void run() { 
                 startActivity(i); 
                 finish();
             } 
        }, timeDelay); 
    }      

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.splash, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:59:27.027

将您的 Splash 活动设置为应用程序启动时的启动活动。在清单中添加以下代码。

```
 <activity android:launchMode="singleTop" android:name=".Splash">
            <intent-filter>
            <action android:name="android.intent.action.MAIN" /> 
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
 </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:47:18.537

在 mainfest 中设置启动画面活动

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="Packagename"
        android:versionCode="1"
        android:versionName="1.0" >

<application
        android:allowBackup="false"
        android:debuggable="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >

 <activity
            android:name=".SplashActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

       </activity>

</application> 
```

如果你的包是最新的，那么使用_这个 android:name=".SplashActivity" 否则把 android:name="Package name.SplashActivity"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:28:43.817

公共类 SplashActivity 扩展 Activity {

```
private static final int SPALSH_TIME = 5000;// 5 Seconds

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);        

    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {

            Intent intent = new Intent(SplashActivity.this,
                    MainTabActivity.class);
            startActivity(intent);
            SplashActivity.this.finish();

        }
    }, SPALSH_TIME);
}

@Override
public void onBackPressed() {
    SplashActivity.this.finish();
    super.onBackPressed();
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-03T09:48:45.350

**android:launchMode="singleTop"**

**android:theme="@style/SplashTheme"**

```
 <application
            android:name=".MainApplication"
            android:label="@string/app_name"
            android:icon="@mipmap/logo"
            android:allowBackup="false"
            android:theme="@style/SplashTheme">

<activity android:launchMode="singleTop" android:name=".Splash">
            <intent-filter>
            <action android:name="android.intent.action.MAIN" /> 
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
 </activity>

</application> 
```

**样式.xml**

```
<style name="SplashTheme" parent="Theme.AppCompat.NoActionBar">
        <item name="android:windowBackground">@drawable/background_splash</item>
    </style> 
```

**background_splash.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item
            android:drawable="@color/white"/>

    <item>
        <bitmap
            android:gravity="center"
            android:src="@drawable/background_768_1024"/>
    </item>

</layer-list> 
```

# xml - 如何通过属性值解析 SQL Server 中的 XML 节点

> ID：15744464
> 
> 赞同：0
> 
> 时间：2013-04-01T13:32:49.550
> 
> 标签：xml, xpath, xml-parsing, sql-server-2008-r2, sqlxml

最近我遇到了通过 T-SQL 脚本（在 SQL Server 2008 R2 中）解析 XML 文件的问题。

任务是检索特定日期的数据（指标）。我设法检索了所有日期的数据。

但我需要像这样表示它

```
|Date | Indicator_name | Indicator_value| 
```

使用`select`语句。

稍后我将在游标中使用此选择来根据从 XML 检索的数据更新几个表。

你能帮助使用 SQL 和 Xpath 来获得正确的输出吗？

我的代码：

```
declare @in as xml; --original document with indicators
--test data for xml  
 set @in='
<root>
 <org name="org1"/>
  <dates>
   <date id="7/1/2009">
    <indicator1 name="110_ii">0</indicator1>
    <indicator1 name="1120_ii">0</indicator1>
    <indicator1 name="1121_ii">0</indicator1>
    <indicator1 name="1122_ii">0</indicator1>
    <indicator1 name="120_ii">4388176</indicator1>
    <indicator1 name="135_ii">0</indicator1>
    <indicator1 name="140_ii">866212</indicator1>
    <indicator1 name="145_ii">0</indicator1>
    <indicator1 name="150_ii">860428</indicator1>
    <indicator1 name="190_ii">6114816</indicator1>
    <indicator1 name="210_ii">286254</indicator1>
    <indicator1 name="220_ii">110173</indicator1>
    <indicator1 name="240_ii">707265</indicator1>
    <indicator1 name="250_ii">30115</indicator1>
    <indicator1 name="260_ii">378524</indicator1>
    <indicator1 name="270_ii">119324</indicator1>
    <indicator1 name="290_ii">1631655</indicator1>
    <indicator1 name="300_ii">7746471</indicator1>
    <indicator1 name="410_ii">325194</indicator1>
    <indicator1 name="411_ii">655</indicator1>
    <indicator1 name="1340_ii">0</indicator1>
    <indicator1 name="420_ii">251639</indicator1>
    <indicator1 name="430_ii">0</indicator1>
    <indicator1 name="470_ii">4601840</indicator1>
    <indicator1 name="490_ii">5178018</indicator1>
    <indicator1 name="510_ii">1204181</indicator1>
    <indicator1 name="515_ii">285692</indicator1>
    <indicator1 name="1430_ii">0</indicator1>
    <indicator1 name="520_ii">113460</indicator1>
    <indicator1 name="590_ii">1603333</indicator1>
    <indicator1 name="610_ii">508631</indicator1>
    <indicator1 name="620_ii">456489</indicator1>
    <indicator1 name="640_ii">0</indicator1>
    <indicator1 name="650_ii">0</indicator1>
    <indicator1 name="660_ii">0</indicator1>
    <indicator1 name="690_ii">965120</indicator1>
    <indicator1 name="700_ii">7746471</indicator1>
    <indicator1 name="910_ii">245294</indicator1>
    <indicator1 name="911_ii">165164</indicator1>
    <indicator1 name="920_ii">194742</indicator1>
    <indicator1 name="930_ii">0</indicator1>
    <indicator1 name="940_ii">524989</indicator1>
    <indicator1 name="950_ii">0</indicator1>
    <indicator1 name="960_ii">3647627</indicator1>
    <indicator1 name="970_ii">5377</indicator1>
    <indicator1 name="980_ii">0</indicator1>
    <indicator1 name="990_ii">0</indicator1>
    <indicator2 name="f2_010">1639698</indicator2>
    <indicator2 name="f2_020">1207761</indicator2>
    <indicator2 name="nacenka">0</indicator2>
    <indicator2 name="f2_021">0</indicator2>
    <indicator2 name="f2_022">106342</indicator2>
    <indicator2 name="f2_023">0</indicator2>
    <indicator2 name="f2_024">0</indicator2>
    <indicator2 name="f2_025">0</indicator2>
    <indicator2 name="f2_029">431937</indicator2>
    <indicator2 name="f2_030">0</indicator2>
    <indicator2 name="f2_040">0</indicator2>
    <indicator2 name="f2_050">431937</indicator2>
    <indicator2 name="f2_080">15790</indicator2>
    <indicator2 name="f2_060">15798</indicator2>
    <indicator2 name="f2_070">36105</indicator2>
    <indicator2 name="f2_090">0</indicator2>
    <indicator2 name="f2_100">39647</indicator2>
    <indicator2 name="f2_140">387773</indicator2>
    <indicator2 name="f2_150">88393</indicator2>
    <indicator2 name="f2_2421">0</indicator2>
    <indicator2 name="f2_142">0</indicator2>
    <indicator2 name="f2_141">6380</indicator2>
    <indicator2 name="f2_151">0</indicator2>
    <indicator2 name="f2_190">305760</indicator2>
    <indicator2 name="f2_2510">0</indicator2>
    <indicator2 name="f2_2520">0</indicator2>
    <indicator2 name="f2_2500">0</indicator2>
    <indicator2 name="f2_202">0</indicator2>
    <indicator2 name="f2_2910">0</indicator2>
   </date>
   <date id="8/1/2009">
    <indicator1 name="110_ii">0</indicator1>
    <indicator1 name="1120_ii">0</indicator1>    
   </date>
  </dates>
 </root>'

--here I have the select that just returns all indicators name and values on all dates. 
--I guess that XPath is needed in where section smth like node(//date[@balans_date])='8/1/2009'

select 
     coalesce(t.c.value('(@name)[1]', 'varchar(max)'),'0') as indicator_name
     ,coalesce(t.c.value('(.)[1]', 'decimal(28,4)'),0) as indicator_value
from @in.nodes('/root/dates/date/*') t(c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:54:49.377

您可以在 xpath 中使用以下表达式来应用按日期过滤：

```
select 
     coalesce(t.c.value('(../@id)[1]', 'datetime'), 0) as indicator_date,
     coalesce(t.c.value('(@name)[1]', 'varchar(max)'),'0') as indicator_name,
     coalesce(t.c.value('(.)[1]', 'decimal(28,4)'),0) as indicator_value
from @in.nodes('/root/dates/date[@id="8/1/2009"]/*') t(c) 
```

# wordpress - 浮动多个li的左右

> ID：15744466
> 
> 赞同：12
> 
> 时间：2013-04-01T13:32:57.020
> 
> 标签：wordpress, css, html-lists

我正在尝试在 wordpress 中制作一个自定义侧边栏，我在 li 中拥有所有元素和信息，我想做的是尝试将总 li 的一半向左移动，一半向右移动......

我正在使用的是左右浮动/清除，这似乎不像我想要的那样工作......

**HTML结构：-**

```
<ul>
    <li class="left">Left</li>
    <li class="left">Left</li>
    <li class="left">Left</li>
    <li class="left">Left</li>
    <li class="left">Left</li>
    <li class="right">Right</li>
    <li class="right">Right</li>
    <li class="right">Right</li>
    <li class="right">Right</li>
    <li class="right">Right</li>
</ul> 
```

**CSS：-**

```
.left { float:left; width:50%; clear:left; }
.right { float:right; width:50%; clear:right } 
```

[jsFiddle](http://jsfiddle.net/Duejc/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T14:17:42.127

如果您愿意放弃您的列表样式光盘（取决于浏览器），您可以轻松地做到这一点，而无需浮动或修改您的标记。

[http://jsfiddle.net/Duejc/2/](http://jsfiddle.net/Duejc/2/)

```
ul {
    -webkit-columns: 2;
    -moz-columns: 2;
    columns: 2;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-01T13:37:29.107

你为什么不像这样刹车呢，视情况而定:)

```
<ul class="left">
    <li>Left</li>
    <li>Left</li>
    <li>Left</li>
    <li>Left</li>
    <li>Left</li>
</ul>

<ul class="right">

    <li>Right</li>
    <li>Right</li>
    <li>Right</li>
    <li>Right</li>
    <li>Right</li>
</ul>

.left{
float: left;
width: 50%; }

.right{
float: right;
width: 50%; } 
```

或者像@Xander 说的那样做:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-01T13:35:16.553

随机播放您的 HTML。当一个元素被`clear`编辑时，它会针对先前浮动的元素这样做；在您的情况下，这是清除第五个元素的第六个元素：

```
<ul>
    <li class="left">Left</li>
    <li class="right">Right</li>
    <li class="left">Left</li>
    <li class="right">Right</li>
    <li class="left">Left</li>
    <li class="right">Right</li>
    <li class="left">Left</li>
    <li class="right">Right</li>
    <li class="left">Left</li>
    <li class="right">Right</li>
</ul> 
```

[jsFiddle](http://jsfiddle.net/2G7DR/2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-16T21:49:06.327

用简单的标记和样式完成它 [http://codepen.io/ruinunes/pen/bpgpZV](http://codepen.io/ruinunes/pen/bpgpZV)

哈姆勒：

```
%ul.chat
  %li.stamp 
    Saturday
    %span 20:32
  %li.left Who is it?
  %li.right It's Little Nero's, sir. I have your pizza.
  %li.left Leave it on the doorstep and get the hell outta here
  %li.stamp 
    Saturday
    %span 20:33
  %li.right Okay, but what about the money?
  %li.left What money?
  %li.right Well, you have to pay for your pizza, sir.
  %li.left Is that a fact? How much do I owe you?
  %li.left Keep the change, ya filthy animal!
  %li.right Cheapskate. 
```

SCSS

```
ul.chat {
  font-family: sans-serif;
  list-style:none;
  margin: 0 auto;
  padding: 0;
  width: 50%;

  li {
    margin-bottom: 10px;
    display: inline-block;
    border-radius: 8px;
    padding: 10px;

    &.left { 
      background: #e3e3e3;
      float:left;
      margin-right: 50%;
      width:50%;
      border-top-left-radius: 0;
    }

    &.right {
      background: #6CCE66;
      color: #fff;
      float: right;
      width: 50%;
      border-top-right-radius: 0;
    }

    &.stamp {
      color: #666;
      font-size: 80%;
      text-align: center;
      width: 100%;
      span {
        color: #999;
      }
    }
  }

} 
```

# cassandra - Cassandra - 跨集群的唯一用户 ID

> ID：15744473
> 
> 赞同：0
> 
> 时间：2013-04-01T13:33:27.013
> 
> 标签：cassandra

目前我测试了一些数据库系统（NoSql），现在我用 Cassandra 测试了一些东西。没有像 MySQL 中那样自动增加用户 ID 的选项。现在的问题是，我如何在整个集群中生成 UUID？Facebook 在历史上也使用过 Cassandra，它们也生成了一个用户 ID（[https://developers.facebook.com/tools/explorer/?method=GET&path=me](https://developers.facebook.com/tools/explorer/?method=GET&path=me)）。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:28:55.113

您应该使用其中一种 UUID 类型 - UUIDType 或 TimeUUIDType。如果您希望能够按时间排序您的 ID，请使用 TimeUUIDType。如果您想先获取最新的，而不是最旧的，请将其包装在 ReversedType 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:20:49.333

唯一 id 只是计算机 mac（或者您可以使用主机名）加上该机器上唯一 id 的组合（在服务器重新启动时）。cassandra 的 PlayOrm 实际上使用 system.currenttimemillions 生成短 id，但在必要时添加了使其唯一的内容。TimeUUID 类型是 mac + time（加上一些 time 以使其在机器中唯一）。

院长

# ruby-on-rails - URI::InvalidURIError，而我正在使用 rspec+capybara 进行测试

> ID：15744476
> 
> 赞同：1
> 
> 时间：2013-04-01T13:33:30.073
> 
> 标签：ruby-on-rails, rspec

我正在使用 RSpec+capybara 进行测试，但出现错误：

```
Failure/Error: page.should have_selector('title', :text => "YourPos | About")
   expected  #has_selector?("title", {:text=>"YourPos | About"}) to return true, got false
 # ./spec/requests/static_pages_spec.rb:14:in `block (3 levels) in <top (required)>' 
```

还有我的 static_pages_spec.rb

```
require 'spec_helper'

describe "Static pages" do 

  describe "About page" do

    it "should have the title 'About' " do
        visit '/static_pages/about'
        page.should have_selector('title', :text => "YourPos | About")
    end
  end

end 
```

还有我的 app/views/static_pages/about.html.erb

```
<!DOCTYPE html>
<html>
    <head>
        <title>YourPos | About</title>
    </head>
    <body>
        <p>Find me in app/views/static_pages/home.html.erb</p>
    </body>
</html> 
```

希望有人能帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:41:16.440

尝试改变

```
visit 'static_pages/about' 
```

至

```
visit '/static_pages/about' 
```

# ios - 设置 UIScrollView 背景图片

> ID：15744478
> 
> 赞同：4
> 
> 时间：2013-04-01T13:33:36.960
> 
> 标签：ios, uiscrollview

我有一个滚动视图，它占据了视图的完整显示大小。我想将背景设置为静态图像。我不想平铺它，所以我认为我不能使用背景颜色。另外，我真的不希望它在滚动视图后面（将滚动视图设置为透明），因为我希望 bg 与滚动视图一起滚动。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T14:59:44.853

尝试将可耕作图像设置为背景颜色。

```
scrollView.backgroundColor = [UIColor colorWithPatternImage:[UIImage  imageNamed:@"tileableImage.png"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:39:57.320

只需添加一个与滚动视图的内容大小相同大小的 UIImageView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T10:27:42.353

当我们将图像设置为滚动视图作为背景时，它会使用滚动视图滚动。因此，不要将图像设置为背景，而是将图像设置为查看

```
 self.view.backgroundColor = UIColor(patternImage: UIImage(named: "bg.jpg")!) 
```

# drupal - 将网站从 6 迁移到 7

> ID：15744479
> 
> 赞同：1
> 
> 时间：2013-04-01T13:33:41.520
> 
> 标签：drupal

我是一名学生，我有一个客户项目，www.wac-stl.org 他们正在运行 Drupal 6。我需要将其升级到 Drupal 7 才能安装 CiviCRM。

做这个的最好方式是什么？如果你可以看一下这个网站，我认为这是一个非常基础的网站，所以你认为我升级会有什么问题吗？

另外，我只有对网站文件的 FTP 访问权限，我没有数据库访问权限。这对我来说会是个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T07:53:17.413

**选项 A：升级**

1.  定义：用D7代码代替D6代码；
2.  在 D7 上运行升级脚本
3.  数据库 仅适用于非常基本的网站 最喜欢您的旧网站

**选项 B：迁移**

1.  定义：使用新数据库从头开始安装新的 D7 站点；导入内容，
2.  浏览量、用户等
3.  清洁代码库
4.  旧内容可以省略
5.  重新调整 IA
6.  调整数据模型
7.  缺点：内容清理需要时间

**有可以使用的迁移工具**

1.  [功能](https://drupal.org/project/features)- 允许您将内容类型、用户和结构（例如分类法、图像样式等）导出到类似模块的包中 此处提供了出色的指南：http: [//drupal.org/node/580026](http://drupal.org/node/580026)

2.  [Feeds](https://drupal.org/project/feeds) - Feeds 是一个贡献模块，允许从 csv、xml 或 rss 格式导入和导出内容。访问提要项目页面了解更多信息。

3.  对于“节点内容”导出/导入，请使用“节点导出”模块。

有用的链接：

*   [升级过程](https://drupal.org/node/570162)

*   [将 D6 内容构建工具包 (CCK) 迁移到 D7 字段](https://drupal.org/node/1144136)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:14:26.993

将 drupal 站点从主要版本升级到下一个版本是一项具有挑战性的任务，无论所涉及的站点有多“基本”。您绝对应该在开发环境中的网站副本上执行此操作，并且只有在完全测试后才部署升级版本。

要做到这一点，您当然需要拥有该站点数据库的副本：如果您不能直接访问数据库服务器，您可以尝试一些可以帮助您做到这一点的模块之一（例如[http://drupal. org/project/dumper](http://drupal.org/project/dumper)）。

您需要彻底阅读升级指南（[http://drupal.org/documentation/upgrade/6/7](http://drupal.org/documentation/upgrade/6/7)并点击所有链接）。

而且，由于 CivicCRM 实际上有 Drupal 6 版本，您可能要考虑坚持使用 D6...

# arduino - ASF 中使用的函数，而不是 IODIR、IOSET、PORTD

> ID：15744483
> 
> 赞同：2
> 
> 时间：2013-04-01T13:34:01.230
> 
> 标签：arduino, microcontroller, atmel

我之前已经对微控制器进行了编程，并使用了 IODIR、IOSET、PORTD、DDRD 等指令。我现在使用的是具有 ATSAM3X8E Cortex M3 微控制器的 Arduino Due。我正在使用 Atmel Studio 6 对 Arduino Due 进行编程。我发现 SAM3X 微控制器不使用 IODIR、IOSET、PORTD。我现在的问题是，如果有人现在有什么功能对应于 IODIR、IOSET 和 PORTD。我也在使用 Atmel 软件框架 (ASF) 进行编程。

例如，您如何使用 Atmel 软件框架 (ASF) 执行此操作： PORTD &= ~(1 << RS);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T16:03:24.227

查看 sam/drivers/gpio 下 asf 中的 gpio 驱动程序。它包含类似`gpio_set_pin_high(PIN)`和`gpio_set_pin_low(PIN)`用于控制 IO 引脚的功能。

# android - 适用于 Android 的图像编辑库

> ID：15744487
> 
> 赞同：9
> 
> 时间：2013-04-01T13:34:20.400
> 
> 标签：android, graphics, bitmap

我有一个简单的 android 图像编辑应用程序的基本要求。显示图像后，用户必须能够设置图像的透明度，选择亮度，设置对比度。

为了完成这项任务，我尝试了以下库：- 1\. [JJIL](https://code.google.com/p/jjil/) 2\. Android 图像过滤 3\. [Aviary SDK](http://www.aviary.com/)

对于 JJIL，我在导入项目时遇到问题。对于 Android Image Filtering ，没有太多可用的文档。使用 Aviary 我可以实现这一点，但它具有 aviary 徽标，并且使用此 SDK，用户可以选择获取更多功能选项并导航到应用商店中的 aviary 应用程序。

这样做的更好方法是什么？我应该使用库还是应该使用原生 android 颜色类？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-27T12:15:11.957

*   如果您想使用**[OpenGL](https://github.com/cats-oss/android-gpuimage)** ，请使用 GPUImage （我知道的最快）

*   您可以使用使用纯**Java**（相对较慢）图像处理的[**Image Effect Pro 。**](https://github.com/yaa110/Effects-Pro)

***   您还可以尝试[**快速图像处理库**](https://github.com/chrisbatt/AndroidFastImageProcessing/tree/master/framework/FastImageProcessing/src/project/android/imageprocessing/filter)（基于 OpenGL）

    *   **[您可以从此处](https://sriramramani.wordpress.com/2012/11/20/reflected-image-view/)**和**[此处](https://xjaphx.wordpress.com/tag/processing/)**阅读有关图像处理的更多信息** 

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-27T11:42:34.147

作为我们 PhotoEditorSDK 产品套件的一部分，我们在 Img.ly 发布了适用于 Android 的图像编辑 SDK。它包括您提到的所有功能，并且易于[定制](https://docs.photoeditorsdk.com/guides/android/v6_6/customization/introduction)

[您可以在此处](https://github.com/imgly/imgly-sdk-android-demo)找到演示应用程序。您可以在开源项目中免费使用该库，但商业应用程序需要支付许可费。**

# python - 如何通过 USB 将数据从 Windows 发送到嵌入式 Linux

> ID：15744495
> 
> 赞同：2
> 
> 时间：2013-04-01T13:34:40.150
> 
> 标签：python, linux, windows, usb, pyserial

我的设置如下所示：运行 Windows 7 Professional 的 64 位机器连接到运行 Angstrom Linux 的 Beaglebone。

我目前正在通过 windows 框上的 putty 命令行控制 beaglebone。

我想做的是运行一个 OpenCV 脚本来提取一些视觉信息，在 windows 盒子上处理它，并通过（或另一个）USB 连接发送一些轻量级数据（例如，`True`或`False`，三元组等）到比格骨。

我的 OpenCV 程序使用 Python 绑定运行，所以我可以用 python 做的任何管道都会更好。我玩过 pyserial 以通过 COM 端口在 Windows 盒子上接收数据，所以看起来我可以在 Windows 端使用它......尽管在嵌入式 linux 前端完全丢失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:21:14.163

通常在 linux 前端，如果 USB 加密狗是正确的类型，你会看到类似 /dev/usbserial 或类似设备的东西。也许在插入电缆后检查 dmesg。（在 linux 上，您可以运行`find /dev | grep usb`以列出所有与 USB 相关的设备）

顺便说一句，我看到 beaglebone 有一个以太网端口，为什么不直接使用网络套接字呢？这一切都比在 USB 上重新发明协议更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:24:48.030

如果您想使用 python，请查看[PyUSB](http://sourceforge.net/apps/trac/pyusb/)，例如在[使用 PyUSB 通过 USB 发送数据](https://stackoverflow.com/questions/11313008/sending-data-via-usb-using-pyusb)中可以看到。一个相关的帖子是[Raspberry Pi 的 PyUSB](http://martinsant.net/?p=339)。

# java - 无法在eclipse中使用main方法执行扩展Thread的类

> ID：15744499
> 
> 赞同：-3
> 
> 时间：2013-04-01T13:34:59.840
> 
> 标签：java, eclipse, multithreading

无法在 Eclipse 中执行此操作。有什么特别的原因吗？eclipse 在启用执行选项之前会寻找任何特定的东西吗？如果执行下面的代码会产生什么结果？是“1”吗？

```
class A extends Thread {
    private int i;
    public void run(){i=1;}
    public static void main(String[] args) {
        A a = new A(); a.run();System.out.println(a.i);
    }
} 
```

编辑：只是玩继承和线程。这里没有测试特定的线程功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:41:36.913

您所要做的就是将您的课程设为公开

```
public class A extends Thread {
    private int i;
    public void run(){i=1;}
    public static void main(String[] args) {
        A a = new A(); a.run();System.out.println(a.i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:52:39.663

@Hussain 将您的课程公开是正确的，但我想我会为后代添加一些额外的信息。

*   正如您的代码现在所代表的那样，您没有在另一个线程中运行您的代码。您可以`extends Thread`从代码中删除它，它仍然可以正常工作。您`main`只是`run()`直接调用该方法，而不是调用任何线程魔术。

*   如果您确实希望您的代码在另一个线程中运行，那么您将需要添加`a.start();`以启动线程运行并`a.join();`等待它完成。在`start()`方法中，线程被分叉，`run()`方法被调用。

    ```
    A a = new A();
    // start the thread which calls run()
    a.start();
    // wait for the thread to finish
    a.join();
    System.out.println(a.i); 
    ```

*   最后，建议你`implements Runnable`和做相反`extends Thread`。所以你的代码看起来像：

    ```
    A a = new A();
    Thread thread = new Thread(a);
    // start the thread which calls run()
    thread.start();
    // wait for the thread to finish
    thread.join();
    System.out.println(a.i); 
    ```

*   如果您以前没有这样做过，我建议您阅读[有关线程的教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

# c# - 编辑删除并保存在流阅读器中 c#visual studio 2010

> ID：15744501
> 
> 赞同：0
> 
> 时间：2013-04-01T13:35:07.457
> 
> 标签：c#

我是编程新手，需要您的帮助。我正在使用 C# Visual Studio 2010，我需要能够从文件中读取数据并将数据显示到相关的文本框中。文本文件是足球队的列表，我必须显示、编辑、删除和保存文件。我做了一些研究，并使用 YouTube 创建了使用 Stream Readers 的程序，但他们没有做我想让他们做的事情。我了解流式阅读器如何读取数据，但在相关框中逐行显示数据时遇到困难 IE：团队名称、团队经理、团队体育场等。我已经为团队制作了下面列出的课程以及我遇到问题的表单代码。任何帮助将非常感激。

我的班级：使用系统的团队；使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；

```
namespace The_F.A__Soft130_Assignment_
{
    class Team
    {

        private string Name;
        private string League;
        private string Manager;
        private string Nickname;
        private string Stadium;        
        private int Position;
        private int Points;
        private int GamesPlayed;
        private int GoalDiff;
        private string Logo;
        private int NumberPlayers;

        // constructor

        public Team(string theName, string theLeague, string theManager,
                    string theNickname, string theStadium, string thePosition,
                    string thePoints, string theGamesPlayed,string theGoalDiff,
                    string theLogo, string theNumberPlayers)
        {
            Name = theName;
            League = theLeague;
            Manager = theManager;
            Nickname = theNickname;
            Stadium = theStadium;
            setPosition(thePosition);
            setPoints(thePoints);
            setGamesPlayed(theGamesPlayed);
            setGoalDiff(theGoalDiff);
            Logo = theLogo;
            setNumberPlayers(theNumberPlayers);
        }

        public Team(string theName, string theLeague, string theManager,
                    string theNickname, string theStadium,
                    string theLogo, string theNumberPlayers)
    {
        Name = theName;
        League = theLeague;
        Manager = theManager;
        Nickname = theNickname;
        Stadium = theStadium;
        Logo = theLogo;
        setNumberPlayers(theNumberPlayers);
    }

        //The getter methods
        public string getName()
        {
            return Name;
        }
        public string getLeague()
        {
            return League;
        }
        public string getManager()
        {
            return Manager;
        }
        public string getNickname()
        {
            return Nickname;
        }
        public string getStadium()
        {
            return Stadium;
        }

        public int getPosition()
        {
            return Position;
        }
        public int getPoints()
        {
            return Points;
        }
        public int getGamesPlayed()
        {
            return GamesPlayed;
        }
        public int getGoalDiff()
        {
            return GoalDiff;
        }
        public string getLogo()
        {
            return Logo;
        }
        public int getNumberPlayers()
        {
            return NumberPlayers;
        } 

        // all the Class setter methods
        public void setName(string theName)
        {
            Name = theName;
        }
        public void setLeague(string theLeague)
        {
            League = theLeague;
        }
        public void setManager(string theManager)
        {
            Manager = theManager;
        }
        public void setNickname(string theNickname)
        {
            Nickname = theNickname;
        }
        public void setStadium(string theStadium)
        {
            Stadium = theStadium;
        }

        public void setPosition(string thePosition)
            {
                try
            {
                Position = Convert.ToInt32(thePosition);
            }
            catch (FormatException e)
            {
                System.Windows.Forms.MessageBox.Show("Error:" + e.Message
                    + "Please input a valid of number");
            }
        }

        public void setPoints(string thePoints)
        {
            try
            {
                Points = Convert.ToInt32(thePoints);
            }
            catch (FormatException e)
            {
                System.Windows.Forms.MessageBox.Show("Error:" + e.Message
                    + "Please input a valid number");

            }
        }

        public void setGamesPlayed(string theGamesPlayed)
        {
            try
            {
                GamesPlayed = Convert.ToInt32(theGamesPlayed);
            }
            catch (FormatException e)
            {
                System.Windows.Forms.MessageBox.Show("Error:" + e.Message
                    + "Please in put valid number");

            }
        }

        public void setGoalDiff(string theGoalDiff)
        {
            try
            {
                GoalDiff = Convert.ToInt32(theGoalDiff);
            }
            catch (FormatException e)
            {
                System.Windows.Forms.MessageBox.Show("Error:" + e.Message
                    + "Please input valid number");
            }
        }

        public void setLogo(string theLogo)
        {
             Logo = theLogo;
        }

        public void setNumberPlayers(string theNumberPlayers)
        {
            try
            {
                NumberPlayers = Convert.ToInt32(theNumberPlayers);
            }
            catch (FormatException e)
            {
                System.Windows.Forms.MessageBox.Show("Error:" + e.Message
                    + "Please input Valid Number");
            }
        }
    }
}
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Collections;
using System.Text.RegularExpressions;

namespace The_F.A__Soft130_Assignment_
{
    public partial class frmEditTeam : Form
     {
        public frmEditTeam()
        {
            InitializationComponent();
        }

        private void InitializationComponent()
        {
            throw new NotImplementedException();
        }

        //EDIT Team --- EDIT Team --- EDIT Team --- EDIT Team --- EDIT Team --- EDIT   
        private void btnEdit_Click(object sender, EventArgs e)
        {
            bool allInputOK = false;
            League whichLeague = (League)frmFA.Leagues[frmFA.leagueSelected];

            //get inputs - Team ORDER = Author Title Year Copies Isbn
            string tempName = txtEditTeamName.Text;
            string tempLeague = txtEditTeamLeague.Text;
            string tempManager = txtEditTeamManager.Text;
            string tempNickname = txtEditTeamNickname.Text;
            string tempStadium = txtEditTeamStadium.Text;
            string templogo = txtEditTeamlogo.Text;

            int tempNoOfPlayers = txtEditTeamNoofPlayers.Text;
            int tempPosition;
            int tempPoints;
            int tempGamePlayed;
            int tempGoalDiff;
            //final validation check
            allInputOK = Utilities.notNullTextBox(txtEditTeamName, "Team name") &&     Utilities.notNullTextBox(txtEditTeamLeague, "Team league")
                    && Utilities.notNullTextBox(txtEditTeamManager, "Team manager") && Utilities.notNullTextBox(txtEditTeamNickname, "Team Nickname")
                    && Utilities.notNullTextBox(txtEditTeamStadium, "Team stadium") && Utilities.notNullTextBox(txtEditTeamlogo, "Team logo")
                    && Utilities.notNullTextBox(txtEditTeamNoofPlayers, "Team number of players") 
                    && Utilities.validNumber(txtTeamPosition, "The Teams Position")
                    && Utilities.validNumber(txtTeamPoints, " The Teams Points") && Utilities.validNumber(txtTeamGamesPlayed, "Games Played")
                    && Utilities.validNumber(txtTeamGoalDiff, " The Goal Differance");

        //create Team if all ok
        if (allInputOK)
        {
            Team temp = new Team(tempName, tempLeague, tempManager, tempNickname, tempStadium, tempPosition, tempPoints, tempGamePlayed, tempGoalDiff, templogo, tempNoOfPlayers);
            whichLeague.replaceTeam(whichLeague.getleagueAllTeams(), temp,frmFA.teamselected);

           Utilities.WriteAllLeagueTeams(frmFA.inputDataFile1, frmFA.Leagues);// update file
            MessageBox.Show("Success: Team " + tempName + " edited in " + whichLeague.getleagueName());//finish up
            resetForm();
        }
    }

    //LOAD Team DETAILS --- LOAD Team DETAILS --- LOAD Team DETAILS --- LOAD Team DETAILS --- 
    private void getTeamDetails()
    {
        //convert this to the corrcet team reference
        //int selected team = frmFA.Team Selected;
        int selectedTeam = frmFA.teamSelected;
        int selectedLeague = frmFA.leagueSelected;

        //GET Team               
        //starting out with access to all the leagues
        ArrayList allLeagues = frmFA.Leagues;
        //narrow it down to which League you want
        League currentLeague = (League)allLeagues[selectedLeague];
        //narrow it down to which Team you want form that League
        Team currentTeam = (Team)currentLeague.getleagueAllTeams()[selectedTeam];

        //get Team details
        txtEditTeamName.Text = currentTeam.getName();
        txtEditTeamManager = currentTeam.getManager();
        txtEditTeamStadium.Text = currentTeam.getStadium();
        txtEditTeamNoofPlayers.Text = currentTeam.getNoOfPlayers();
        txtEditTeamLeague.Text = currentTeam.getTeamLeague();
        txtEditTeamLogo.Text = currentTeam.getTeamlogo();

    }
    // event procedure
    private void btnHomeAdd_Team_Click(object sender, EventArgs e)
    {
        frmFA form = new frmFA(); form.Show();
        this.Hide();
    }
    private void btnRefreshClick(object sender, EventArgs e)
    {
        Refresh();
    }
    private void btnEditTeamUpdate_Click(object sender, EventArgs e)
    {
        frmEditTeam form = new frmEditTeam();
        form.Show();
        this.Hide();
    }

    private void txtEditTeamName_TextChanged(object sender, EventArgs e)
    {
        getTeamName();
    }

    private void txtEditTeamLeague_TextChanged(object sender, EventArgs e)
    {
        getTeamLeague();
    }

    private void txtEditTeamManager_TextChanged(object sender, EventArgs e)
    {
        getTeamManager();
    }

    private void txtEditTeamNickName_TextChanged(object sender, EventArgs e)
    {
        getTeamNickName();
    }

    private void txtEditTeamStadium_TextChanged(object sender, EventArgs e)
    {
        getTeamStadium();
    }
    private void txtEditTeamLogo_TextChanged(object sender, EventArgs e)
    {
        getLogo();
    }
    private void txtEditTeamNoofPlayers_TextChanged(object sender, EventArgs e)
    {
        getNoOfPlayers();
    }

    private void txtEditTeamNickname_TextChanged_1(object sender, EventArgs e)
    {
        getTeamNickname();
    }
    private void resetForm()
    {
        txtName.Text = "";
        txtLeague.Text = "";
        txtManager.Text = "";
        txtNickname.Text = "";
        txtStadium.Text = "";
        txtPosition.Text = "";
        txtPoints.Points = "";
        txtGamesPlayed.GamesPlayed = "";
        txtGoalDiff.GoalDiff = "";
        txtLogo.Logo = "";
        txtNoOfPlayers = "";
        txtName.Focus();
    }

    private void btnEditTeamUpdate_Click_1(object sender, EventArgs e)
    {

    }

    private void frmEditTeam_Load(object sender, EventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:58:40.877

这只是一个基本的大纲，但我会做什么，

*   使用 a`StreamReader`加载您的数据
*   在应用程序运行时使用您自己的类来管理您的数据
*   使用 a`StreamWriter`当您决定要保存数据时，您可能应该保存以响应某种按钮。

# javascript - 将html链接加载到div

> ID：15744503
> 
> 赞同：1
> 
> 时间：2013-04-01T13:35:13.743
> 
> 标签：javascript, html, hyperlink, load

我有一个 div 中的链接列表...当我单击链接时，我想在同一页面的另一个 div 中加载链接内容，这是我的代码：

```
<div>
 <div>
    <div style="padding-bottom:20px;">
       <center><img src="real.gif"></center>
    </div>
    <div>
       <div>
            <div style="padding-bottom:20px;">
                <a href="history.html"><h3>History of Club</h3></a>
            </div>
            <div style="padding-bottom:20px;">
                <a href=""><h3>Photos Gallery</h3></a>
            </div>
            <div style="padding-bottom:20px;">
                <a href=""><h3>Hall of Fame</h3></a>
            </div>
            <div style="padding-bottom:20px;">
                <a href=""><h3>History of Club</h3></a>
            </div>
      </div>
  </div>
</div>
<div id="linkcontent"></div> 
```

我可以通过一个非常简单的js函数来做到这一点吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:40:21.127

使用[Ajax](http://www.w3schools.com/ajax/)，我会推荐[jQuery ajax](http://api.jquery.com/jQuery.ajax/)来更新 div。

就像是：

```
 $("#mylink").click (function () {
        $.ajax({
           type: "POST", // or GET
           url: "mylink.php",//what ever link you want to load
           data: "someData=someThing&someMore=somethingElse",
           success: function(data){
                  $("#someElement").doSomething().
          }
     });
     return false; 
    }); 
```

# javascript - 使用 dojo 工具包的 RectangularRangeIndicator 指标格式

> ID：15744506
> 
> 赞同：1
> 
> 时间：2013-04-01T13:35:17.840
> 
> 标签：javascript, jquery, css, dojo

我正在尝试将 VerticalLinearGauge 与 RectangularRangeIndicator 一起使用，但我获得了三角形格式（红色和绿色），如下图所示。我想结果是一条大线，我使用了两个属性 endThickness 和 startThickness 但没有结果。

![在此处输入图像描述](https://i.stack.imgur.com/qn3uo.png)

请帮忙。

# java - 在 iReport 中为报表创建虚拟数据

> ID：15744508
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:35:21.527
> 
> 标签：java, jasper-reports, ireport, dummy-data

我的应用程序有一个报告模块，用户可以在其中选择模板，当用户选择模板时，它将出现在 jasper 查看器中并带有虚拟数据。但是当用户开始生成报告时，它将使用数据库中的数据。

本来有先用.properties文件的想法，但是有障碍，怎么知道报表不是由原始数据生成的？而在 .jrxml 文件中已经存在对数据库的查询，如果没有输入数据，它将显示空数据。

最佳解决方案如何？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:37:31.623

据我说，做一件事写静态查询： -

```
select 1,2,3,4....n 
```

因此，它将像报表中的静态数据一样工作，并且很容易更改查询并使其动态化。

在查询的地方写上面的查询。因此它将作为您的虚拟数据。

# iis-7 - 回收应用程序池会产生 401 错误

> ID：15744509
> 
> 赞同：0
> 
> 时间：2013-04-01T13:35:26.553
> 
> 标签：iis-7, virtual-directory, url-rewrite-module

我在 IIS 7 上使用重写模块。

当我重新启动应用程序池时，我得到一个需要身份验证的窗口，除了提供的任何凭据之外，当您单击取消时，它会转到 401 未经授权的页面。

重写规则将请求发送到虚拟目录 (_assets) 中的 ashx 页面。

我该如何解决这种奇怪的行为？

匿名已打开，它工作正常。

以下是我们使用的重写规则：

```
<rewrite>
    <rules>
        <rule name="Loader" patternSyntax="ECMAScript" stopProcessing="true">
            <match url="^[a-z0-9\-\/]*$" negate="false" />
  <action type="Rewrite" url="/_assets/includes/load.ashx?q={UrlEncode:{REQUEST_URI}}" appendQueryString="false" />
        </rule>
    </rules>
</rewrite> 
```

我可以通过转到`/.reset`. 这会导致 500 错误，然后该站点再次可用。

注意：我们的应用程序池每晚都会重新启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:46:05.740

I found a [forum post](http://forums.iis.net/post/1956461.aspx) that outlines a problem pretty similar to yours (it also outlines how they managed to fix it). Hopefully it helps you sort out the issue!

# sitecore - Sitecore 文件下载仅适用于管理员用户

> ID：15744510
> 
> 赞同：2
> 
> 时间：2013-04-01T13:35:32.640
> 
> 标签：sitecore, sitecore6

我有一个 Sitecore 6.4 设置，编辑器可以单击按钮生成 Word 文档。我正在将文件添加到媒体库，并且工作正常。编辑器将单击内容编辑器中的按钮，生成文件，生成媒体项目，然后内容编辑器将在媒体库中显示新项目，编辑器可以单击功能区或项目上的“下载”按钮下载它。但是，我的媒体库被不必要地填满了，所以我试图绕过媒体库。

我没有像以前那样将文件放在任意位置，而是将它放在临时目录中，如下所示：

```
wordOutputPath = Sitecore.IO.FileUtil.GetWorkFilename(Sitecore.Configuration.Settings.TempFolderPath, printItem.Name, ".docx");
File.Copy(wordTemplatePath, wordOutputPath);

WordprocessingDocument doc = WordprocessingDocument.Open(wordOutputPath, true); 
```

在我用内容“填充”文件后，我这样做：

```
Sitecore.Context.ClientPage.ClientResponse.Download(wordFilePath); 
```

现在，如果我以 Sitecore 管理员身份登录，我会看到浏览器的下载对话框并可以下载文件。但是，如果我以非管理员用户身份登录，我会得到一点点点击和呼呼声，可以说，文件已生成，但浏览器中永远不会出现保存文件对话框。我可以通过文件系统进入并查看并打开 Word 文档，它看起来不错。

我在 6.6 的 Sitecore 发行说明中发现了一些内容：

> 发布 Sitecore CMS 和 DMS 6.6.0 rev。130111（6.6.0 更新 3）
> 
> [...]
> 
> 各种各样的
> 
> ```
> Only Administrators were allowed to download files. (316774, 348557)
> 
>     This was a problem in several areas of the system, for example the Package Generator and the Export Language Wizard in the CMS. It also affected the Export Users Wizard in the ECM module. 
> ```

所以我尝试使用 SecurityDisabler（不再有方便的代码）和 UserSwitcher，如下所示：

```
using (new Sitecore.Security.Accounts.UserSwitcher(Sitecore.Security.Accounts.User.FromName("sitecore\admin", false)))
                    {
                        Sitecore.Context.ClientPage.ClientResponse.Download(wordFilePath);
                    } 
```

IUSR 和 IIS_IUSRS 帐户都对临时文件夹具有读取、列出和读取/执行权限，并且各个文件也显示这两个帐户的读取和读取/执行权限。

我可以做些什么来允许非管理员用户下载这些文件？6.6中修复的错误与它有什么关系吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T06:58:21.237

调用 Sitecore.Context.ClientPage.ClientResponse.Download() 方法将导致在 Web 浏览器中将下载命令发送回 Sitecore 客户端，然后再调用服务器执行它。这就是为什么在调用 Sitecore.Context.ClientPage.ClientResponse.Download() 方法之前使用安全切换器（或安全禁用器）没有效果的原因，因为仅管理员限制将应用于其他地方的下载。

如果你在你的 webroot 中搜索 sitecore\shell 目录，你会发现有一个名为 download.aspx 的文件。这应该是下载请求发送到的实际页面。这个 web 表单页面继承了 Sitecore.Shell.DownloadPage 类，所以如果你看一下这个类的实现，你会发现 OnLoad 方法是这样实现的：

```
protected override void OnLoad(EventArgs e)
{
    Assert.ArgumentNotNull(e, "e");
    base.OnLoad(e);
    string fileHandle = StringUtil.GetString(new string[] { base.Request.QueryString["file"] });
    bool flag = false;
    string filename = FileHandle.GetFilename(fileHandle);
    if (!string.IsNullOrEmpty(filename))
    {
        fileHandle = filename;
        flag = true;
    }
    if (!string.IsNullOrEmpty(fileHandle))
    {
        if (MediaManager.IsMediaUrl(fileHandle))
        {
            this.DownloadMediaFile(fileHandle);
        }
        else if (fileHandle.IndexOf("id=", StringComparison.OrdinalIgnoreCase) >= 0)
        {
            this.DownloadMediaById(fileHandle);
        }
        else if (flag || Context.IsAdministrator)
        {
            this.DownloadFile(fileHandle);
        }
    }
} 
```

如您所见，最后一个 if 块有一个 IsAdministrator 检查，这将是您的非管理员用户被阻止的地方。

虽然我还没有 100% 验证这是问题所在，但下载限制问题可以通过创建一个继承 Sitecore.Shell.DownloadPage 的新类并根据需要使用一些额外的安全检查覆盖 OnLoad 实现来解决。我建议您不要完全删除 IsAdministrator 检查，因为它的存在是有充分理由的。更新 download.aspx 中的 Inherits 属性，使其改为使用它。

# c++ - 带有换行符的 C++ OutputDebugStringW

> ID：15744511
> 
> 赞同：1
> 
> 时间：2013-04-01T13:35:34.433
> 
> 标签：c++, windows, outputdebugstring

我想在 OutputDebugStringW 上附加一个新行。

```
OutputDebugStringW(Item.pItem); 
```

pItem 是一个 LPCWSTR，而不是 wstring，所以我不能通过说 + "/n" 直接添加新行。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T13:37:25.787

只需在单独调用中输出换行符`OutputDebugStringW`：

```
OutputDebugStringW(Item.pItem);
OutputDebugStringW(L"\n"); 
```

如果由于某种原因您只想对 进行一次调用`OutputDebugStringW`，请先构建一个字符串：

```
std::wstringstream ss;
ss << Item.pItem << L"\n";
OutputDebugStringW(ss.str().c_str()); 
```

# sql - 如何使用同一表中的数据更新表？

> ID：15744512
> 
> 赞同：0
> 
> 时间：2013-04-01T13:35:43.530
> 
> 标签：sql, sql-server

SQL-Server中有一张表：

```
Track(
 id uniqueindeficater,
 Track geography,
 the_geom geometry
) 
```

现在我想获取 Track 列并将这些数据放入 the_geom 列，将其从地理数据类型转换为几何数据类型。像这样的东西：

```
GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) 
```

如何使用同一表中的数据更新列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:38:46.743

像这样的东西：

```
update
  Track
set
  the_geom = GEOMETRY::STGeomFromText(Track.STAsText(),4326) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:39:02.963

这不行吗？

```
update track
    set the_geom = GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) 
```

# c++ - 从现有图像中裁剪图像

> ID：15744520
> 
> 赞同：2
> 
> 时间：2013-04-01T13:36:17.133
> 
> 标签：c++, python, opencv, image-processing

我想从现有图像中裁剪出图像。我已经`98%`使用imagemagick拍摄了一张图像并在其上应用了单色阈值（这在openCV中可行吗？）

生成的图像是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/MKcXt.png)

现在从这张图片中，我想裁剪出另一张图片，以便最终图片如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/hMTnv.png)

**问题** 如何在 OpenCV 中做到这一点？请注意，我想裁剪图像的唯一原因是我可以使用[这个答案](https://stackoverflow.com/a/15699181/131194)来获取文本的一部分。如果不需要裁剪新图像，而只需专注于图像的黑色部分，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:32:20.370

如果顶部和底部的文本是您要[裁剪的区域，](https://stackoverflow.com/a/13533305/176769)如果它们始终位于同一位置，则解决方案很简单：**只需设置一个忽略这些区域的 ROI**：

```
#include <cv.h>
#include <highgui.h>

int main(int argc, char* argv[])
{
    cv::Mat img = cv::imread(argv[1]);
    if (img.empty())
    {
        std::cout << "!!! imread() failed to open target image" << std::endl;
        return -1;        
    }

    /* Set Region of Interest */

    int offset_x = 129;
    int offset_y = 129;

    cv::Rect roi;
    roi.x = offset_x;
    roi.y = offset_y;
    roi.width = img.size().width - (offset_x*2);
    roi.height = img.size().height - (offset_y*2);

    /* Crop the original image to the defined ROI */

    cv::Mat crop = img(roi);
    cv::imshow("crop", crop);
    cv::waitKey(0);

    cv::imwrite("noises_cropped.png", crop);

    return 0;
} 
```

**输出图像：**

![](https://i.stack.imgur.com/FUGgw.png)

如果您感兴趣的黑色矩形的位置不在固定位置，那么您可能需要检查**另一种方法**：使用[矩形检测技术](https://stackoverflow.com/a/8863060/176769)：

![](https://i.stack.imgur.com/ZoXBD.png)

在上面的输出中，您感兴趣的区域将是图像中第二[大的矩形](https://stackoverflow.com/a/13532779/176769)。

**附带说明一下**，如果您打算稍后隔离文本，一个简单的**[cv::erode()](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#erode)**可以消除该图像中的所有噪声，因此您只剩下*白框和文本*。另一种消除噪音的技术是使用[`cv::medianBlur()`](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=medianblur#medianblur). 你也可以探索[`cv::morphologyEx()`](http://docs.opencv.org/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html)做这个技巧：

```
cv::Mat kernel = cv::getStructuringElement(cv::MORPH_ELLIPSE, cv::Size(7, 7), cv::Point(3, 3));
cv::morphologyEx(src, src, cv::MORPH_ELLIPSE, kernel); 
```

[一个合适的解决方案甚至可能是这 3 个的组合。我已经在从 X 射线图像](https://stackoverflow.com/a/15726091/176769)中提取手骨中展示了一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:04:22.060

一个简单的解决方案：自上而下、自下而上、左右和左右扫描线。当行中的暗像素数量超过行中像素总数的 50% 时终止。这将为您提供 xmin、xmax、ymin、ymax 坐标来限制您的裁剪矩形。

# javascript - 使用javascript动态更改表行类名

> ID：15744522
> 
> 赞同：0
> 
> 时间：2013-04-01T13:36:19.463
> 
> 标签：javascript, html

点击添加按钮后，我又得到了一行。我需要通过识别前一行的类来相应地改变它的行类。如果上一行的类名是`odd`新创建的类名，则应`even`以此类推。我们如何通过使用 javascript 来做到这一点？我们如何修改现有代码来执行此操作或任何其他建议？
适当的`CSS`文件已准备好用于替代类名。当我从数据库中获取数据时，将创建交替的奇/偶行。但是当我点击添加按钮时，它总是取第一行类名，因为总是有第一行的克隆。除了类名外，我不担心克隆行。

```
<script>
function addRow(tableID) {
  var table = document.getElementById(tableID);
  if (!table) return;

  var newRow = table.rows[1].cloneNode(true);

  // Now get the inputs and modify their names 
  var inputs = newRow.getElementsByTagName('input');

  for (var i=0, iLen=inputs.length; i<iLen; i++) {
    // Update inputs[i]
  }
  // Add the new row to the tBody (required for IE)
  var tBody = table.tBodies[0];
  tBody.insertBefore(newRow, tBody.lastChild);
}

</script>

<table id="table1" border=1 class="display">
        <tr class="odd">
            <th>Operator ID</th>
            <th>Status</th>
        </tr>
        <tr class="odd">  
            <td>TestA</td>
            <td>ActiveA</td>
        </tr>
        <tr class="even">  
            <td>TestB</td>
            <td>ActiveB</td>
        </tr>
</table>
<input type="button" value="ADDROW" onclick=addRow("table1"); /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:38:27.973

为什么不直接使用正确的 CSS：

```
#table1 tr {
    /* odd row styles */
    /* also acts as fallback for really old browsers */
}
#table1 tr:nth-child(even) {
    /* even row styles */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:52:40.163

你可以简单地做这样的事情：

```
tr:nth-child(even) td {
    background-color: #ccc;
}
tr:nth-child(odd) td {
    background-color: #fff;
} 
```

[**在这里演示**](http://jsfiddle.net/6vVGp/)

# qt - 将图标添加到组合框项目，以便图标在右侧可见

> ID：15744526
> 
> 赞同：0
> 
> 时间：2013-04-01T13:36:32.783
> 
> 标签：qt

我正在开发一个应用程序，我需要在组合框弹出菜单中显示程序名称列表和相应的图标。

我尝试了以下事情：创建了从 QCombobox b 派生的自定义小部件。重新实现了showPopup()函数如下

```
void CMyComboBox::showPopup() 
{
    QComboBox::showPopup(); 
    mp_Popup = this->findChild<QFrame *>(); 
    mp_Popup->move( mp_Popup->x(), mp_Popup->y() - this->height() - mp_Popup->height() );
} 
```

C。将项目添加到组合框 QString Name = "XYZ"; QIcon icon("Sample.png");

```
 myComboBox->insertItem(0, icon, Name); 
```

问题是：当我使用上述方法插入时，它会在左侧插入图标（即图标后跟名称）。如何使图标出现在右侧（即，名字后跟图标）

问候桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:10:58.593

`QComboBox`用于`QAbstractModel`显示数据。您可以使用函数将标准模型替换为自定义模型`void QComboBox::setModel ( QAbstractItemModel * model )`。

图标相对于文本的位置通过样式选项控制。你应该这样做：

```
QStyleOptionViewItem option;
option.decorationAlignment = Qt::AlignRight | Qt::AlignVCenter;
option.decorationPosition = QStyleOptionViewItem::Top; 
```

# c# - 会话变量值在 Global.asax Session_end 中并不总是可用

> ID：15744530
> 
> 赞同：1
> 
> 时间：2013-04-01T13:36:48.457
> 
> 标签：c#, asp.net, session, global-asax

当用户登录网站时，我正在创建 5 个会话变量，其中包含一些与用户相关的值（例如`userid`等`roleid`）。基于存储在会话变量中的值之一，我必须更新数据库中的记录。为此，我在`Session_End()`Global.asax 事件中编写以下代码

```
if (Session["UserHistoryID"] != null)
        SessionUtility.UpdateDatabase(Convert.ToInt32(Session["UserHistoryID"])); 
```

这里的问题是当 Session 超时并`Session_End`触发`Session`变量`Session["UserHistoryID"]`时`NULL`，上述条件失败并且数据库中的记录没有更新。当在我的本地系统中测试它时它工作正常但是当我在生产服务器中测试它时，一些记录没有得到更新

为什么会这样？

有人请解释一下它是如何`Session_End`工作的。

我到处搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:17:08.037

我认为您可以获得该`Session`值的最早时间是在`Application_AcquireRequestState`此处提到的[Sessions 和 Global.asax](http://forums.asp.net/t/889130.aspx/1)之下，因此您可以在您的`Global.asax`

```
void Application_AcquireRequestState(object sender, EventArgs e)
    {
        if (System.Web.HttpContext.Current.Session != null)
        {
            if (Session["language"] != null)
            {
                Response.Write(Session["language"].ToString());
            }
        }
    } 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:56:47.337

如果我为要在 Session_End 事件中访问的每个会话值声明一个变量并将会话的值存储在此变量中并在我的功能中使用声明的变量它工作正常

```
void Session_End(object sender, EventArgs e)
{
   int var=0;
   if (Session["value"] != null)
   {
      var = Convert.ToInt32(Session["value"]);
      UpdateToDatabase(var);
   }
} 
```

# php - 从 javascript 中的 get 查询中传递变量

> ID：15744531
> 
> 赞同：0
> 
> 时间：2013-04-01T13:36:57.317
> 
> 标签：php, javascript, jquery, variables

我正在尝试`$.get`在 javascript 中传递 jQuery 之外的参数值。我读到我应该以某种方式在同步模式下做到这一点，但我找不到解决方案。

这是我的代码：

```
var flag;
var t = $.get("mutalyzer.php?id="+variation.value, function(data) {
    flag=data;
});
document.write(flag); 
```

结果我得到**未定义**的地方。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:37:57.663

写在回调函数里面

尝试这个

```
var t = $.get("mutalyzer.php?id="+variation.value, function(data) {
   //this is the callback function and runs when get gets  completed
   flag=data;
   document.write(flag); 
 }); 
```

# symfony - 我的自引用实体类有什么问题？

> ID：15744534
> 
> 赞同：1
> 
> 时间：2013-04-01T13:37:05.170
> 
> 标签：symfony, doctrine

映射的类别表如下所示：

```
id | parent_id | name 
```

和实体类：

```
class Category
{

/**
 * @ORM\Id
 */
protected $id;

/**
 * @ORM\Column(name="parent_id", type="integer") <-- if removed it works
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="children")
 * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
 */
protected $parent;

/**
 * @ORM\OneToMany(targetEntity="Category", mappedBy="parent")
 */
protected $children;

/**
 * @ORM\Column(name="name", type="string")
 */
protected $name;

/**
 * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
 */
protected $products;

public function __construct()
{
    $this->products = new ArrayCollection();
    $this->children = new ArrayCollection();
}

} 
```

在 Symfony 分析器中，我得到以下映射错误：

关联 Test\TestBundle\Entity\Category#children 是指未定义为关联的拥有方字段 Test\TestBundle\Entity\Category#parent。

关联 Test\TestBundle\Entity\Category#children 是指不存在的拥有方字段 Test\TestBundle\Entity\Category#parent。

还有一个错误通知：

```
Notice: Undefined index: parent in C:\inetpub\www\Symfony\vendor\doctrine\orm\lib\Doctrine\ORM\Persisters\BasicEntityPersister.php line 1575 
```

为什么？我的课基本上只是手册的复制/粘贴。

# **编辑：**

在我删除列名注释后，它可以工作（无论如何，名称默认为列名）：

```
* @ORM\Column(name="parent_id", type="integer") 
```

但为什么？在我的生产表中，列名可能会改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:46:26.053

看起来问题是`@ORM\Column`添加到`$parent`. 问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-14T09:52:53.500

`@ORM\Column`当您还定义类似的关系时，不应使用注释`@ORM\ManyToOne`。

在这种情况下，列的名称是自动计算的，或者（正如您已经做过的那样）您可以使用`@ORM\JoinColumn(...)`注释覆盖它。

# xcode - presentViewController 在 iPad 上向已释放实例错误发送消息

> ID：15744539
> 
> 赞同：0
> 
> 时间：2013-04-01T13:37:15.300
> 
> 标签：xcode, ipad

我有一个带有列表的集合视图控制器。我在新的视图控制器中打开一个项目：

```
self.detailController = [_theStoryboard  instantiateViewControllerWithIdentifier:@"DetailController"];
//init data
[self presentViewController:_detailController animated:YES completion:nil]; 
```

模态视图正确加载。但是，如果我关闭此视图并打开另一个项目，则会收到错误消息：

```
*** -[DetailViewController isKindOfClass:]: message sent to deallocated instance 0xb3e2200 
```

通过调试，我已经对视图控制器进行了 nslog 操作：

```
NSLog(@"controller:%@", _detailController);
[self presentViewController:_detailController animated:YES completion:nil]; 
```

输出：

```
controller:<DetailViewController: 0xb3e2200> //first item
controller:<DetailViewController: 0xa3d0a00> //second item
//error here, because it attempts to present the view controller at address 0xb3e2200, instead of the second item. 
```

任何人都可以就为什么会发生这种情况提供任何建议吗？这仅发生在 iPad 模拟器中，但出于某种原因也可以按预期用于 iPhone 版本......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:02:23.583

问题似乎源于 _detailController 的 UIModalPresentationStyle 是 FullScreen 的事实。我不确定这是否是一个 xCode 错误，或者我是否执行不正确，但是一旦我将视图更改为 CurrentContext，错误就停止发生了。

# php - 为什么 intval(042) 返回结果 34？这个怎么运作？

> ID：15744549
> 
> 赞同：0
> 
> 时间：2013-04-01T13:37:30.427
> 
> 标签：php

我尝试了解 intval() 的工作原理，其中一个示例是 intval(042) = 34。我知道默认基数是 10，那么为什么它返回 34 而不是 42。零在这个例子中扮演什么角色？

```
echo intval(042); //34
echo intval(42); //42 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T13:38:44.040

前导 0 告诉 php 将其解释为[octal/base 8](http://en.wikipedia.org/wiki/Octal)。

`042`八进制是`34`十进制。

[您可以在此处](http://php.net/manual/en/language.types.integer.php)找到 PHP 中其他整数格式的列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T13:40:21.213

以 为前缀的数字`0`被认为是八进制数（以 8 为基数）。`042[8] = 34[10]`

事实上，这与`intval`. 如果你只是写`echo 042;`你会得到`34`。

同样，您也可以用十六进制写数字。`echo 0xff;`给`255`.

而且，从 PHP 5.4 开始，您甚至可以用二进制写数字：`echo 0b1001;`给`9`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:39:42.560

因为数字前的 0 表示这个数字是八进制数，尝试将 42 从八进制转换为十进制，它会给你 34

我希望这对你有帮助，

# iphone - iOS - sizeWithFont 问题

> ID：15744563
> 
> 赞同：0
> 
> 时间：2013-04-01T13:38:09.783
> 
> 标签：iphone, ios, objective-c, ios6

我有文本“应用程序测试”。它看起来单元格中的行是

```
"Tesing of 
 Application" 
```

我想在文本中添加一个星号。例如

```
"Tesing of *
Application" 
```

但它显示在标签的宽度之后。我编写了以下代码。

```
CGSize maximumLabelSize = CGSizeMake(99999,9999);

CGSize textSize = [[_label text] sizeWithFont:_label.font
                                 constrainedToSize:maximumLabelSize                                          lineBreakMode:_label.lineBreakMode];

float startX = 2 + textSize.width;
label2.frame = CGRectMake(startX, label2.frame.origin.y, label2.frame.size.width, label2.frame.size.height); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:09:56.430

当您使用时，`constrainedToSize`您必须传递实际高度或实际宽度的尺寸。

假设您在`300px`宽度上有一个标签，并且您想根据必须使用的文本长度来制作高度`CGSizeMake(300,9999)`。在这种情况下，该`constrainedToSize`方法将返回您绘制该文本所需的高度。

为了获得宽度，您可以设置一个小的高度，例如`20px`获得绘制文本所需的宽度。

# vb.net - 添加对 Web 服务的引用不会生成任何类文件

> ID：15744564
> 
> 赞同：0
> 
> 时间：2013-04-01T13:38:12.540
> 
> 标签：vb.net, visual-studio-2010, web-services

我将我们的网站与第三方网站集成，并使用他们的网络服务进行身份验证。我将 Visual Studio 2010 与 Visual Basic 结合使用，我可以使用他们给我的 URL 来添加 Web 参考：

```
website -> add web reference -> URL -> Go -> add reference 
```

但是，在我这样做之后，我的文件结构中没有生成任何类文件来引用？

生成的文件有：

*   .discomap
    *   。迪斯科
    *   .wsdl
    *   .xsd
    *   .wsdl
    *   .xsd
    *   .xsd

我不知道它是否相关，但网络服务是使用 Visual Studio 2008 制作的。

我在网上看的每个教程都说要在成功添加引用后生成类文件。我只是读错了东西还是其他东西很糟糕？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:01:41.707

我最终不得不从 Visual Studio 命令行生成类文件。我用来添加 Web 引用的链接是命令行文本所需的链接。

这会生成两个文件，一个类文件和一个 output.config 文件。我必须将 output.config 文件与我的 web.config 文件结合起来，然后正确调用 web 服务。

# vb.net - 挂在datagridview上。填充大量数据

> ID：15744566
> 
> 赞同：0
> 
> 时间：2013-04-01T13:38:18.210
> 
> 标签：vb.net

您好我正在尝试用数据文件中的项目填充数据网格视图。代码停在 .fill 上。我在 excel（Microsoft 查询）中测试了查询，它在那里工作正常。我还通过添加一个仅在特定条目上接收的 WHERE 对其进行了测试（在我的 vb 代码中），这很好用。任何想法如何让它在我的应用程序中工作？代码如下，感谢您的帮助！

```
Dim dataAdapter As New Odbc.OdbcDataAdapter()

Private Sub ChangeSelect()

    Dim selectCommand As String = "SELECT CWIPH.CUST_NO, CWIPH.JOB_NO, CWIPH.JOB_NAME, CJCMS.JOB_DESC FROM { OJ CWIPH CWIPH INNER JOIN CJCMS CJCMS ON CWIPH.JOB_NO = CJCMS.JOB_NO }"

    accessDB(selectCommand)
End Sub

Private Sub accessDB(ByVal selectCommand As String)
    Dim JobConnectionString As String = "Dsn=Jake; provider=System.Data.Odbc"
    Dim cn As OdbcConnection = New OdbcConnection(JobConnectionString)
    Dim table As New DataTable()
    cn.Open()

    Dim cmd As New Odbc.OdbcCommand(selectCommand, cn)

    Me.dataAdapter = New Odbc.OdbcDataAdapter(cmd)

    With dgvWorkOrder

        .AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells

        .AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.ColumnHeader

        .AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.ColumnHeader

    End With

    Dim commandBuilder As New Odbc.OdbcCommandBuilder(Me.dataAdapter)

    Me.dataAdapter.Fill(table)
    Me.dgvWorkOrder.DataSource = table

    cn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:01:12.350

这篇文章帮助很大。[哪个更好：DataSet 还是 DataReader？](https://stackoverflow.com/questions/1083193/whats-better-dataset-or-datareader) 所以我最终改变了我的代码以使用数据阅读器，到目前为止一切都很好。

# cassandra - 使用 Astyanax 查询带有前缀的列不起作用

> ID：15744575
> 
> 赞同：1
> 
> 时间：2013-04-01T13:39:00.997
> 
> 标签：cassandra, astyanax

我有一个方案如下：

*   时间戳
*   设备编号
*   设备名称
*   设备所有者
*   设备位置

我使用 CQL 创建了这个列族，并将主键定义为`(TimeStamp,Device ID, Device Name)`. 通过一个可序列化的对象，该对象具有 DeviceID、名称和字段名称（存储`Device Owner`或`Device Location`）的字段。我使用 Astyanax 插入了一些记录。

根据我的理解，一行的列是通过组合创建的`Device ID`，`Device Name`字段名称作为列名称，值是该特定字段的值。因此，对于特定的时间戳和设备，列名将采用 pattern `(Device ID:Device Name: ...)`。

所以我相信我们可以使用这两个字段作为前缀来获取特定时间设备组合的所有条目。

我正在使用以下查询来获取结果：

```
 RowSliceQuery<String, ApBaseData> query = adu.keyspace
  .prepareQuery(columnFamily)
  .getKeySlice(timeStamp)
  .withColumnRange(new RangeBuilder()
   .setStart(deviceID+deviceName+"_\u00000")
   .setEnd(deviceID+deviceName+"_\uffff")
   .setLimit(batch_size)
   .build()); 
```

但是在执行上述查询时，我得到以下异常：

> BadRequestException：[主机=本地主机（127.0.0.1）：9160，延迟=6（6），尝试=1]InvalidRequestException（为什么：没有足够的字节来读取组件0的值）

@abhi 我在这个列族中可以拥有的数据如下：

```
 stime    |  devName  | devId | Owner | Location
  1361260800 | dev:01:02 |   1   | 1234  |    1  
  1361260800 | dev:02:03 |   2   | 34    |    2
  1361260800 | dev:05:06 |   1   | 12    |    1
  1361260800 | dev:03:02 |   2   | 56    |    3 
```

我为此使用的 java 可序列化 java 类是：

```
public class BaseData implements Serializable {
    private static final long serialVersionUID = 1L;
    @Component(ordinal = 0)
    private String devName;
    @Component(ordinal = 1)
    private int devID;
    @Component(ordinal = 2)
    private String field;
} 
```

按照上述类的结构，我可以将列族中的列视为： 列名：dev\:01\:02:1:location 列值：00000001

仅供参考，使用 astyanax 1.56.31

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:31:54.017

您可以将 PlayOrm 用于 cassandra（我听说最新的现在也在 mongodb 上工作）。使用它，您可以创建一个实体并将 @NoSqlPartitionByField 注释添加到 beginOfMonthTimestamp 和 deviceId 列，此外还有时间戳列。然后，您可以像这样查询分区

PARTITIONS s('time', :partitionId) select s from TABLE as s where s.deviceName='mike'

仅当您确定您的分区不会超过数百万时，才可以这样做。你可以有无限的分区。所以基本上，你可以使用 beginOfMonth 或 beginOfWeek ，这取决于东西进入系统的速度。有更多信息在

[http://buffalosw.com/wiki/playorm-documentation/](http://buffalosw.com/wiki/playorm-documentation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:53:05.757

这里有两件事，
1.您在设备 ID 中使用“：”，Cassandra 也将其用于复合列。因此，如果可以，请避免使用它。
2\. 根据您的测试数据，您的列名显示为“dev\:01\:02:1:location”，即 devicename+deviceid+location。但是，您在查询中给出了 deviceID+deviceName+"_\u00000" ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:15:59.870

为了克服这个问题，我改变了在表中存储数据的方式。我没有使用复合主键，而是更改了架构，以便只有单个主键和动态列。所以，现在我在 stime 上有主键，我的列名是由我的插入代码显式动态构造的。例如。"dev\:01\:02:1:location" 与以前相同，但这完全消除了对序列化对象的需求。到目前为止，这已经解决了我的问题。让我们看看它会带来什么问题。

# c - 在这种情况下如何获取 char 数组大小？

> ID：15744577
> 
> 赞同：3
> 
> 时间：2013-04-01T13:39:13.443
> 
> 标签：c, arrays, char, sizeof

我有这个疑问：在这种情况下如何获取 char 数组的大小：

```
#include<stdio.h>

void f(char * x)
{
printf("Size %d\n", sizeof(x)/sizeof(char));
}

main()
{
char x[5] = {'a', 'e', 'i', 'o', 'u'};
f(&x[0]);
} 
```

与我的预期相反，我收到 8 个而不是 5 个甚至 6 个。这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:41:26.300

`sizeof(x)`在您的代码中将返回指针的大小，而不是指向`char *x`的 char 数组的大小`x`

并且您的 64 位系统中的指针大小为 8。对于 32 位系统，指针的大小为 4

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T13:40:26.043

这里，`sizeof()`返回的是指针的大小，而不是原始数组的大小。

`f()`知道 指向的数组大小的唯一方法`char*`是调用者告诉它：

```
void f(char * x, size_t size)
{
   ...
}

main()
{
   char x[5] = {'a', 'e', 'i', 'o', 'u'};
   f(x, sizeof(x) / sizeof(x[0]));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:41:15.687

你不能。`sizeof`返回指针的大小。

将数组的大小存储在一个变量中并传递它。

我更喜欢这个：

```
void f(char *x, int size)
{
// ...
}

main()
{
  char x[5] = {'a', 'e', 'i', 'o', 'u'};
  f(x, 5);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:43:17.977

你这样理解

```
void f(char * x, int size_of_array)
{
printf("Size %d\n", size_of_array);
}

main()
{
char x[5] = {'a', 'e', 'i', 'o', 'u'};
f(&x[0], 5);
} 
```

一旦传递了一个数组，它就会衰减为该类型的指针，并且您失去了通过 sizeof 宏获取数组大小的能力。您需要传递元素的数量。如果您的数组是数字类型，您始终可以将数组的大小作为第一个元素传递：

```
void f(char * x)
{
printf("Size %d\n", x[0]);
}

main()
{
char x[6] = {6, 'a', 'e', 'i', 'o', 'u'};
f(&x[0]);
} 
```

但当然，在这种情况下，更新该元素以确保它符合您的期望会产生额外的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T13:46:41.103

`sizeof(x)`给你 char 指针的大小而不是数组的大小。`char *`是一个指向字符的指针。如果你这样做`char a = 'A';` `f(&a);`，它仍然有效。`char *`并非旨在仅指向 char 数组，因此`sizeof(x)`返回指针的大小而不是指向的内容。

# functional-programming - 可编译为本机代码的严格函数式语言

> ID：15744578
> 
> 赞同：1
> 
> 时间：2013-04-01T13:39:14.073
> 
> 标签：functional-programming

最近我开始研究函数式语言，以使我的应用程序的一些算法部分更可靠。当然，我碰到了 Haskell。但它的懒惰为我准备了太多的惊喜。有时简单的事情变得非常非常缓慢。

所以我想知道是否有一种语言可以用来编写函数式的小算法，但没有不必要的懒惰，这会导致更多的问题，然后有帮助。

程序应编译成Win32/64原生代码（最好是dll），并具有与C++相当的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:43:37.437

[OCaml](http://ocaml.org/)可能是最接近 Haskell 的，但它是严格且不纯的。[它是ML](https://en.wikipedia.org/wiki/ML_%28programming_language%29)的继任者。

OCaml、ML 和 Haskell 都可以在任何通用平台上编译为机器码。

不过，根据我的经验，一旦你了解它的工作原理，懒惰通常是一个很棒的功能。

# c++ - 静态提升/MT 发布？

> ID：15744585
> 
> 赞同：0
> 
> 时间：2013-04-01T13:39:50.400
> 
> 标签：c++, boost, static-libraries, boost-asio, mt

我使用以下命令编译并运行了 bjam 甚至 b2.exe：

**bjam --with-system --with-thread** ..etc

我的库文件为：

**libboost_system-vc110-mt-1_53.lib
libboost_system-vc110-mt-gd-1_53.lib**

问题是，一旦我声明了目录并将它们链接到我的项目中，它就会一直说**版本不匹配：在项目 /MTRelease 中找到 /MDRelease。**

是的，我的项目是静态链接的 /MT 版本，这就是我需要的，但 boost 给我带来了麻烦。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:39:24.747

这听起来像是版本问题。您收到的错误表明某些组件是使用一组库构建的，而其他组件是使用另一组库构建的。

如果您正在构建将此代码与不同类型的库一起使用的其他组件，例如 MT（多线程 - 无调试）或 MDd（dll 的多线程调试），那么您可能会收到此错误。如果您链接到错误的 Boost 库集，您也可能会收到此错误。您需要使用您在自己的代码中使用的相同类型的库进行构建。如果您使用的是 MTD，那么也可以使用 MTD 版本的 Boost 库进行构建。

要查看您的项目正在使用哪些库，请右键单击解决方案资源管理器窗口中的项目并选择属性。也可以从项目菜单中选择属性，但在执行此操作之前，请确保该项目中有一个文件作为当前文件在编辑窗口中打开。在运行时库下，您将看到您正在使用的库类型。如果项目类型是 dll，那么这个值真的应该设置为 MDd。要查看它是什么类型的项目，请单击属性下的链接器（或图书管理员）选项，如果输出文件是 dll，则项目类型是 dll。如果它说 library 或 exe，则项目分别是 library 或 exe。给定类型的所有项目都应该以相同的方式构建。例如，您不应该尝试混合和匹配发布和调试版本。如果您有正在构建的 exe，则使用用于构建项目库类型的任何库。要设置库，请在属性下选择配置属性/C/C++/代码生成/运行时库，然后从下拉框中选择一种类型。

如果所有项目的配置看起来都正确，请尝试从头开始重建。这可以通过右键单击项目并选择清理，然后选择重建来完成。

在运行 b2.exe 构建库时，我总是使用 -q 选项使其在遇到错误时停止。如果构建中有错误，有时很难看到它们，因为 b2 有相当多的输出。有关与 b2 关联的选项列表，请参阅此[链接](http://www.boost.org/boost-build2/doc/html/bbv2/overview/invocation.html)。

另请注意，文件 libboost_system-vc110-mt-1_53.lib 只能用于 VS 2012 项目。如果你没有使用 VS 2012，那么你需要做两件事。首先，您可能无法将 boost 1.53 或更高版本与 2012 之前的任何 Visual Studio 版本一起使用，因为 2012 是第一个最支持最新版本 C++ 标准的版本。因此，您可能不得不改用 1.52。您必须做的第二件事是在 b2 中指定您使用工具集选项使用的 Visual Studio 版本（例如 - --toolset=msvc-10.0 - 如果使用 VS 2010），以便构建正确的库为你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:17:55.373

您需要构建静态库。这可以解决问题：

bjam --build-type=完成

# java - 如何使用 Java 在 WebDriver 中单击图像按钮？

> ID：15744587
> 
> 赞同：-4
> 
> 时间：2013-04-01T13:39:53.560
> 
> 标签：java, javascript, webdriver, selenium-webdriver

按钮类型为图片，并附上HTML代码中的相关代码。我已经输入了所有数据并单击了*立即应用*按钮，它根本没有保存。但是当我尝试手动创建它时，它会在不到 15 秒内保存。

请找到随附的屏幕截图。![快速应用程序.jpg](https://i.stack.imgur.com/opHxK.jpg)

相同的相关代码：

```
//Navigating to Quick Application
driver.get(QAurl);
Thread.sleep(15000);
driver.findElement(By.id("DdlSalesPerson")).sendKeys("Swamy m Kumara");
driver.findElement(By.id("TxtFName")).sendKeys("Kumar");
driver.findElement(By.id("TxtLName")).sendKeys("Swamy");
driver.findElement(By.id("TxtAddress")).sendKeys("434, Main Road, Somajiguda");
driver.findElement(By.id("TxtZip")).sendKeys("79081");
driver.findElement(By.id("TxtSSN1")).sendKeys("881");
Thread.sleep(15000);
driver.findElement(By.id("TxtSSN2")).sendKeys("72");
driver.findElement(By.id("TxtSSN3")).sendKeys("4365");
Thread.sleep(5000);
driver.findElement(By.id("TxtDayPhone1")).sendKeys("963");
driver.findElement(By.id("TxtDayPhone2")).sendKeys("210");
driver.findElement(By.id("TxtDayPhone3")).sendKeys("5478");
Thread.sleep(5000);
driver.findElement(By.id("ChkIAgree")).click();
driver.findElement(By.id("TxtSignature")).sendKeys("Kumar Swamy");
Thread.sleep(5000);
System.out.println("Entered all the required fields");
//Reading the value in the image.
WebElement element = driver.findElement(By.id(OR.getProperty("FP_SImg_ID")));
String src = ((JavascriptExecutor)driver).executeScript("return arguments[0].attributes['src'].value;", element).toString();
img =src.split("=");
System.out.println("Value retrieved from the Image source: "+img[1]);
driver.findElement(By.id(OR.getProperty("FP_TxtSImg_ID"))).sendKeys(img[1]);
Thread.sleep(5000);
driver.findElement(By.id("TxtEmailId")).sendKeys("abc@abc.com");
driver.findElement(By.name("BtnSubmit")).click();
Thread.sleep(35000);
System.out.println("Successfully Applied from the QuickApp"); 
```

立即应用按钮的 HTML 代码：

```
<input id="BtnSubmit" type="image" style="height:33px;width:121px;border-width:0px;" 
onclick="javascript:return validateControls();" src="../Common/Images/HybridQA  
/apply_now.png" title="Submit Here" tabindex="45" name="BtnSubmit"> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:34:41.850

**您的代码中有 1 分 25 秒的 Thread.sleep() ......**

删除所有 thread.sleep()，如果您正在等待元素正确显示，请使用显式等待：

[http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)

以上面链接的页面为例：

```
WebDriverWait wait = new WebDriverWait(driver, 10);
WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id("someid"))); 
```

查看 ExpectedConditions 类以查看 selenium 中内置的可用条件，如果它们不满足您的需求，那么编写您自己的预期条件是微不足道的。

***- - - - - - - - - -编辑 - - - - - - - - - -***

作为记录，这个答案是针对下面引用的原始问题（您也可以查看原始问题的编辑历史来验证这一点）。

> # 在 Java 中使用 Webdriver 单击“立即应用”按钮后需要很长时间才能保存
> 
> 在 Java 中使用 Webdriver 单击“立即应用”按钮后需要很长时间才能保存。我已经输入了所有数据并单击了立即应用按钮，它根本没有保存。但是当我尝试手动创建它时，它会在不到 15 秒内保存。请找到随附的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:14:40.247

用这个，

```
driver.findElement(By.id("TxtEmailId")).sendKeys(Keys.ENTER); 
```

在这之后，

```
driver.findElement(By.id("TxtEmailId")).sendKeys("abc@abc.com"); 
```

并发表评论，

```
driver.findElement(By.name("BtnSubmit")).click(); 
```

所以你的代码看起来像，

```
driver.findElement(By.id("TxtEmailId")).sendKeys("abc@abc.com");
driver.findElement(By.id("TxtEmailId")).sendKeys(Keys.ENTER);
//driver.findElement(By.name("BtnSubmit")).click(); 
```

有时很难处理图像按钮，因为当输入所有必填字段时这些按钮会被激活。确保您填写了所有必填字段，并在表格中输入最后一个字段后按 Enter。首先尝试手动进行。不要点击按钮，而是在最后一个输入字段按回车，并使用与自动化相同的策略。

更新：

使用您自己的代码并将 Thread.sleep() 替换为以下方法。

称它为，

```
waitForElementToBePresent(By.id("DdlSalesPerson"), 15000); 
```

无论您作为参数传递什么，它都会等待下一个元素。如果找到则返回 true，否则返回 false。如果在给定时间内找到元素，它将立即返回 true 而不是等待给定时间。

```
public boolean waitForElementToBePresent(By by, int waitInMilliSeconds) throws Exception
    {
        WebDriver driver = getDriver();
        int wait = waitInMilliSeconds;
        int iterations  = (wait/250);
        long startmilliSec = System.currentTimeMillis();
        for (int i = 0; i < iterations; i++)
        {
            if((System.currentTimeMillis()-startmilliSec)>wait)
                return false;
            List<WebElement> elements = driver.findElements(by);
            if (elements != null && elements.size() > 0)
                return true;
            Thread.sleep(250);
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:24:49.550

这个问题可能有两个原因。

1.  一个来自“立即应用”按钮的 HTML 代码，我可以看到它显示为“input id='BtnSubmit'”，但在您的脚本中它写为 'driver.findElement(By.name("BtnSubmit")) 。点击（）;'。不应该是"driver.findElement(By.id("BtnSubmit")).click()"吗？'name' 必须替换为 'id'。

2.  在脚本结束时单击“BtnSubmit”，单击该按钮后会话可能会立即过期。当您使用新旧版本的 selenium 独立 jar 文件时，通常会出现此问题。请注意您仅使用最新版本，而不是旧版本的补充。

# svn - 使用 SVN 和 Bamboo CI 服务器的预提交阶段

> ID：15744598
> 
> 赞同：1
> 
> 时间：2013-04-01T13:40:22.823
> 
> 标签：svn, continuous-integration, bamboo

公司需要允许 QA 团队在提交完成之前评估产品的质量。

因此，在将新代码提交到存储库之前，我们需要能够在 CI 服务器（在我们的例子中是 Bamboo）上进行构建。

不允许本地构建，因为编译环境应该保持不变。

我知道 Team City CI 有这种可能性，但目前我们正在 Bamboo 上寻找这种可能性。

提前感谢您的帮助

**更新** 其他建议，例如从 svn 切换到 git，将允许这样的工作流程是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:59:17.717

我认为您将不得不变得复杂并在新分支上设置构建，该分支将在 QA 团队祝福后合并。

这听起来很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:24:55.793

在 Bamboo 4 中，您可以配置一个计划以从不稳定分支构建更改，然后添加一个手动阶段，QA 人员可以运行该阶段将这些更改合并到稳定分支。更多 @ [https://confluence.atlassian.com/display/BAMBOO/Using+plan+branches](https://confluence.atlassian.com/display/BAMBOO/Using+plan+branches)

不幸的是，我相信目前只有 Git 才能实现自动合并。

# sql - 选择具有唯一属性的行

> ID：15744602
> 
> 赞同：1
> 
> 时间：2013-04-01T13:40:30.970
> 
> 标签：sql, sql-server-2008

我有下表

```
ind_id      name                 value       date
----------- -------------------- ----------- ----------
1           a                    10          2010-01-01
1           a                    20          2010-01-02
1           a                    30          2010-01-03
2           b                    40          2010-01-01
2           b                    50          2010-01-02
2           b                    60          2010-01-03
2           b                    70          2010-01-04
3           c                    80          2010-01-01
3           c                    90          2010-01-02
3           c                    100         2010-01-03
3           c                    110         2010-01-04
3           c                    120         2010-01-05
4           d                    130         2010-01-05 
```

如何选择具有唯一`ind_id`属性的行？不管每一行肯定是什么`ind_id`。我需要一个结果集中的 4 行。我正在使用 SQL Server 2008。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:41:53.427

为此，您要使用 windows 功能：

```
select ind_id, name, value, date
from (select t.*, row_number() over (partition by ind_id order by (select NULL)) as seqnum
      from t
     ) t
where seqnum = 1; 
```

如果您只想要出现一次的那些，请使用：

```
select ind_id, name, value, date
from (select t.*, count(*) over (partition by ind_id) as NumInds
      from t
     ) t
where numInds = 1 
```

# python - 使用 post_save 保存在两个模型中

> ID：15744604
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:40:42.210
> 
> 标签：python, django, signals

我有一个问题：

我的应用程序中存在 3 个模型：

```
class Cliente(models.Model):
    #fields here ...

class Imovel(models.Model):
    #more fields and..
    dono = models.ForeignKey(Cliente)

class Captacao(models.Model):
    #here, have the fields of others models (Cliente and Imovel) 
```

我想通过模型“Captacao”填充模型“Cliente”和“Imovel”......我知道有 post_save，但我不知道如何做到这一点，将这些字段保存在每个相应的模型中。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:55:51.613

如果您还没有 Cliente，您可以使用 Imovel 数据创建他：

```
def save_in_other_models(sender, instance, created, **kwargs):
    cliente = Cliente.objects.create(
        name=instance.name,
        ident=instance.ident,
    )
    Imovel.objects.create(
        dono=cliente
    )

models.signals.post_save.connect(save_in_other_models, sender=Captacao) 
```

---------------- ** ---------------- ** -------------- -- ** ---------------- ** ---------------- ** ---------- ------ ** ---------

如果您已经拥有与 Captacao 相关的 Cliente 实例：

** 这将使用与您 Imovel 的 Cliente 关系创建一个新的 Imovel

```
def save_in_other_models(sender, instance, created, **kwargs):
    Imovel.objects.create(
        dono=instance.cliente
    )

models.signals.post_save.connect(save_in_other_models, sender=Captacao) 
```

# javascript - AngularJS 代码结构。他们有什么区别吗？

> ID：15744605
> 
> 赞同：0
> 
> 时间：2013-04-01T13:40:46.443
> 
> 标签：javascript, angularjs

angularJS的新手，我想知道下面代码之间的优缺点是什么？推荐使用哪个？

```
$routeProvider.when('foo', {
    templateUrl: 'foo.html',
    controller: fooCtrl

    function fooCtrl() {
        //something here
    }
}); 
```

或者

```
$routeProvider.when('foo', {
    templateUrl: 'foo.html'
});

app.controller("fooCtrl", function() {
    //something here
});

//in html
<div ng-controller="fooCtrl"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:09:17.587

我更喜欢第二种方法，并在开发我们的应用程序时使用它。这是一种优雅的编码方式，将您的路由配置、模块接线等与控制器分开。我们可以将 routes-config 写在一个主文件中，比如*app.coffee* [I use coffeescript] 定义如下

```
routesConfig = ($route) ->
    $route.when('/employees',
        {templateUrl: 'employee.employeeView.html'}) 
```

在此处定义 routesconfig 和接线模块 [例如：employee.employeeController]。

```
modules = ['employee.employeeController', 'user.userController'] 
```

您可以从这里创建、启动您的 Angular 应用程序，

```
m = angular.module('app', modules)
m.config['$route', routesConfig] 
```

现在您可以单独指定控制器，例如在*employeeController.coffee*

```
name = 'employee.employeeController'
mod = angular.module(name, [])
mod.controller(name, [
    '$scope'
    '$log'
    ($scope, $log) ->
          $scope.name = 'java' 
```

在您的视图中，说*employeeView.html*

```
<div ng-controller="employee.employeeController">
 <div class ="info">
  Name is {{name}} 
</div> 
```

基本上，我们将控制器、视图、应用程序配置彼此分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:57:02.447

要添加特定于您的问题的内容，

如果您使用第一种方法，那么您可能将控制器用作***Route Controller***，而在第二种方法中，它是***View Controller***。在这两种情况下，控制器都会为上述路由实例化。

例如，我有一个主页 index.html，我在基本的 html 模板中添加了许多视图（ *ng-view ）。*如果您在此模板中有两个不同的视图部分，例如“section1”和“section2”，并且它们中的每一个都包含在*ng-view*中，那么您可能需要两个不同的控制器，并且最好使用第二种方法来定义它们。使用这种类型的控制器用数据、函数、手表等初始化范围，并使用*ng-controller*在视图中引用控制器。

如果你有一个部分，比如说'section1' [表示主 html 页面]，它是通过封装 section1 和 section2 的 ng-view 包含的，那么该视图需要路由控制器。

不要将这两种方法用于单个视图/路由，因为它会导致为同一路由创建相同控制器的两个实例。

我想在这里添加两个链接，详细说明这个（你的查询）并解决这个查询（在两个地方定义控制器的问题）

[https://groups.google.com/forum/?fromgroups=#!topic/angular/52zE0ibOAgk](https://groups.google.com/forum/?fromgroups=#!topic/angular/52zE0ibOAgk)

[AngularJS 可以为单个 $broadcast 多次调用 $on 方法吗？](https://stackoverflow.com/questions/11591902/angularjs-can-a-on-method-be-called-more-than-once-for-a-single-broadcast?answertab=votes#tab-top)

# wordpress - 当我使用自定义分类法单身时，在 wp_list_categories 上添加 current_cat 类

> ID：15744615
> 
> 赞同：0
> 
> 时间：2013-04-01T13:41:46.520
> 
> 标签：wordpress, taxonomy, wp-list-categories

我在整个网络上搜索该答案。我使用 wp_list_categories 制作一个带有自定义分类法的子菜单，它运行良好，并在我浏览这些类别时放置 current-cat。

问题是，当我使用此菜单浏览单个帖子时，突出显示不再起作用。

对于该站点的博客部分，我使用以下代码突出显示 wp_list_categories() 上的当前类别：

```
function sgr_show_current_cat_on_single($output) {

global $post;

if( is_single() ) {

$categories = wp_get_post_categories($post->ID);

foreach( $categories as $catid ) {
  $cat = get_category($catid);
  if(preg_match('#cat-item-' . $cat->cat_ID . '#', $output)) {
    $output = str_replace('cat-item-'.$cat->cat_ID, 'cat-item-'.$cat->cat_ID . ' current-cat', $output);
  }

}

}
 return $output;
}

add_filter('wp_list_categories', 'sgr_show_current_cat_on_single'); 
```

但据我尝试，无法使其适用于按自定义分类法排序的单个帖子。：/ >我不知道如何自定义它。

甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T12:56:30.290

您需要使用`get_the_terms( $id, $taxonomy );`而不是`wp_get_post_categories();`获取自定义分类术语 ID。

您可以将分类名称硬编码到函数中，或者从`$args`您传入的`wp_list_categories( $args );`.

最终代码：

```
add_filter( 'wp_list_categories', 'sgr_show_current_cat_on_single', 10, 2 );

function sgr_show_current_cat_on_single( $output, $args ) {

  if ( is_single() ) :

    global $post;

    $terms = get_the_terms( $post->ID, $args['taxonomy'] );

    foreach( $terms as $term ) {

      if ( preg_match( '#cat-item-' . $term ->term_id . '#', $output ) ) {
        $output = str_replace('cat-item-'.$term ->term_id, 'cat-item-'.$term ->term_id . ' current-cat', $output);
      }

    }

  endif;

  return $output;

} 
```

# c++ - MFC 中的 MCI 设备错误

> ID：15744618
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:06.950
> 
> 标签：c++, mfc, mci

## MCI 错误

*指定的文件无法在指定的 MCI 设备上播放。文件可能已损坏、格式不正确或没有文件*

我使用以下代码创建设备并播放文件。

```
m_Path = _T("res\\phoneringing.mp3");
m_Video = MCIWndCreate(/*this->GetSafeHwnd()*/ m_hWnd,
AfxGetInstanceHandle(),WS_CHILD|WS_VISIBLE|MCIWNDF_NOMENU|MCIWNDF_NOPLAYBAR,m_Path); 
```

我观察到，当我的应用程序第二次使用 MCIWndCreate 创建设备时，它会引发此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:02:08.323

AFAIK 那些旧的“多媒体”API 仅适用于视频的 AVI 和音频的 WAV。您可能想要嵌入媒体播放器来完成您想做的事情。

# c# - 我必须对 SDK 版本 1.0 到最新版本的 Kinect 项目进行多少更改？

> ID：15744619
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:09.120
> 
> 标签：c#, kinect, kinect-sdk

我目前正在从事我的学长通过的关于 Kinect 的学校项目。我刚刚意识到 Kinect SDK 的版本是 1.0，而最新的是 1.7。我做了一些搜索，新旧版本不兼容。我应该安装最新版本吗？有没有不锻炼的风险？抱歉问了愚蠢的问题，截止日期快到了，我很恐慌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:53:04.657

SDK 1.0 和 1.5 之间对 SDK 的更改非常重要。除了命名空间更改（简单）之外，还对各种函数、枚举、回调、硬件访问以及所有这些内容的引用方式进行了一些更改。

最新的[Kinect for Windows SDK 文档](http://msdn.microsoft.com/en-us/library/hh855347.aspx)参考版本 1.5、1.6 和 1.7。

至少，您必须更新命名空间，并且必须通过代码来更新引用多个数据点的方式。`Joints`我想到了如何访问，但还有很多其他的。如果不知道您的应用程序做了什么，并且无法访问代码，就不可能准确地说出“需要多少更改”。

如果您仍然可以访问 SDK 1.0 并且它可以满足您的所有需求（对于学校项目），那么您当然可以坚持使用它。SDK 1.7 更加健壮和直接。更新到最新的 SDK 可能值得加分。

# iphone - 自定义分隔符图像在 UItableviewcell 中消失

> ID：15744620
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:13.630
> 
> 标签：iphone, ios, objective-c, uitableview

我正在 uitableview 单元格中加载自定义分隔符图像。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
   static NSString *CellID=@"Cell"
   MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SwitchCellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    UIImageview *aSwitch = [[UIImageview alloc] initWithImage:[UIImage imageNamed:@"divider.png"]];
    separator.frame = CGRectMake(0,50,320,1);
    [cell.contentView addSubview:seperator];

}

if(cell.height == 22)
{
   /// here i am setting frame for uiimageview
} 
```

但我得到分隔图像在滚动时仅消失 20 行中的一行。

你能帮忙解释一下为什么它会这样加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T12:17:18.737

如果您已将分隔符`UIImage`放在单元格的边界之外，并设置`cell.clipsToBounds = NO;`为显示分隔符图像，则分隔符图像可能会通过绘制下一个单元格而被隐藏。

当单元格在屏幕上绘制时，您无法控制它们的 z-index，这取决于您滚动的位置（从下到上，或从上到下）。

如果这确实是您的问题，您可以将分隔器放在电池框架内，或者如果您的分隔器足够薄，请使用：

```
[TableView setSeparatorColor:[UIColor colorWithPatternImage:[UIImage imageNamed:...]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:55:41.427

```
self.tblView=[[UITableView alloc] initWithFrame:CGRectMake(0,0,320,370) //set as u need
style:UITableViewStylePlain];
self.tblView.delegate=self;
self.tblView.dataSource=self;
[self.view addSubview:self.tblView];

UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 10)];//set as u ne
v.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"divider.png"]];
[self.tblView setTableHeaderView:v];
[self.tblView setTableFooterView:v];
[v release]; 
```

# android - 画布线故障

> ID：15744623
> 
> 赞同：2
> 
> 时间：2013-04-01T13:42:16.670
> 
> 标签：android, path, android-canvas, visual-glitch

当使用路径在画布上画一条线时，我遇到了一些小故障，如下图所示...我是 android 开发新手..我知道我犯了一些愚蠢的错误，我不知道它是什么...如果有人有一个想法帮助我..谢谢

![在此处输入图像描述](https://i.stack.imgur.com/3E9bM.png)

![在此处输入图像描述](https://i.stack.imgur.com/0KtA3.png)

我的路径代码是

```
 path.moveTo((this.pos/2),0);
              path.lineTo((this.pos/2),25);
              path.lineTo(this.pos,25);
              path.close();
              canvas.drawPath(path, ppaint); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:51:19.313

你可以只使用`canvas.drawLine(this.pos/2, 25, this.pos, 25, ppaint)`. drawPath() 在您的代码中按预期工作;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T19:04:00.747

你可以试试

```
ctx.beginPath();
ctx.moveTo((this.pos/2),0);
ctx.lineTo((this.pos/2),25);
ctx.lineTo(this.pos,25);
ctx.closePath();
ctx.strokeStyle = "Red";//border color here
ctx.stroke();
ctx.fillStyle = "blue";//fill color here
ctx.fill(); 
```

# r - 当我在 R 中使用 statConnector 尝试此操作时，R 库未加载

> ID：15744628
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:23.397
> 
> 标签：r

当我通过statconnector连接C#和R时，我可以访问R中stat库的基本功能。但是如果我加载一个 library()，我就不能调用它的任何函数。

我正在尝试的代码是：

```
rConn.SetSymbol("n1", 20);
rConn.Evaluate("library(dtw)");
rConn.Evaluate("x1<-rnorm(n1)");
rConn.Evaluate("x2<-rnorm(n1)");
rConn.Evaluate("Score<-dtw(x1,x2,keep.internals=TRUE)"); 
```

我得到的错误是当我运行最后一行时，即`rConn.Evaluate("Score<-dtw(x1,x2,keep.internals=TRUE)");`

我得到的错误是 -

```
There is no connection for this connection ID (Exception from HRESULT: 0x80040004 (OLE_E_NOCONNECTION)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T15:39:21.707

附加信息我发现在调用 10+ 个并发 statconnector 实例时收到了类似的错误。

返回值时的 .Evaluate 函数将在 10% 的计算中失败，并出现以下错误

```
There is no connection for this connection ID (Exception from HRESULT: 0x80040004 (OLE_E_NOCONNECTION))   
   at StatConnectorCommonLib.IStatConnector.Evaluate(String bstrExpression) 
```

我发现可行的解决方法是将结果存储在 R 中的变量中，并使用 .EvaluateNoReturn 和 .GetSymbol 来返回结果。

```
StatConnector rConn = new StatConnector();

rConn.Init("R");
rConn.SetSymbol("n1", 20);
rConn.Evaluate ("x1<-rnorm(n1)");
var o = rConn.GetSymbol ("x1");

foreach (double d in o)
    Console.WriteLine(d);

rConn.Close(); 
```

查看以下文章以获取我的来源和示例， [http://www.billbak.com/2010/11/accessing-r-from-clessons-learned/](http://www.billbak.com/2010/11/accessing-r-from-clessons-learned/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:45:59.673

您会发现，对于通过 StatConnector 调用的某些函数，您必须使用 .EvaluateNoReturn 而不是 .Evaluate。如果您认识到，如果您通过以下方式检查“Score”类（在 R 内），那么这是有道理的：

```
class(Score)
[1] "dtw" 
```

您会看到“Score”包含一个 dtw 对象。每当您使用 .Evaluate 时，都会隐含地调用具有返回值的函数。但是，C# 不知道如何处理 dtw 对象，因此您会收到一条时髦的错误消息，让您觉得很糟糕。尝试等效于 void 调用：

```
rConn.EvaluateNoReturn("Score<-dtw(x1,x2,keep.internals=TRUE)"); 
```

执行 dtw 应该没有错误。要将返回值返回到 C#，而在 R 中，请查看 names(Score) 以查看哪些变量可用，然后类似于

```
class(Score$normalizedDistance)
"numeric" 
```

了解如何为 C# 转换值，如下所示：

```
double myDist = (double)rConn.Evaluate("Score$normalizedDistance"); 
```

# javascript - 从控制器内触发 jQuery DOM 操作的正确方法是什么？

> ID：15744630
> 
> 赞同：7
> 
> 时间：2013-04-01T13:42:30.270
> 
> 标签：javascript, angularjs, angularjs-controller

所以我一直在阅读，从控制器中进行 jQuery 操作是不好的做法，但我不清楚为什么或如何纠正。

下面是来自 Youtube 教程的代码，即使是视频创作者的评论也是一个坏主意，但没有解释为什么并继续使用这种不良行为。

来自[https://www.youtube.com/watch?v=ilCH2Euobz0#t=553s](https://www.youtube.com/watch?v=ilCH2Euobz0#t=553s)：

```
$scope.delete = function() {
    var id = this.todo.Id;
    Todo.delete({id: id}, function() {
        $('todo_' + id).fadeOut();
    });
}; 
```

*解决方案*：

根据下面兰登的回答，我为自己的工作得出了以下工作代码，该代码略微源自上面的示例代码：

```
var ProjectListCtrl = function ($scope, Project) {
    $scope.projects = Project.query();
    $scope.delete = function() {
        var thisElem = this;
        var thisProject = thisElem.project;
        var id = thisProject.id;
        Project.delete({id: id}, function() {
            var idx = $scope.projects.indexOf(thisProject);
            if (idx !== -1) {
                thisElem.destroy('removeItem('+idx+')');
            }
        });
    }

    $scope.removeItem = function(idx) {
        $scope.projects.splice(idx, 1);
    }

}

app.directive('fadeOnDestroy', function() {
    return function(scope, elem) {
        scope.destroy = function(funcComplete) {
            elem.fadeOut({
                complete: function() {
                    scope.$apply(funcComplete)
                }
            });
        }
    }
}); 
```

这在几个方面与兰登的回答不同。我想避免在`ngClick`回调中添加参数，所以我将它存储在`thisProject`. 此外，示例和我的代码需要`destroy`从`$http`成功回调中调用，因此`this`不再相关，而是将单击的元素存储在`thisElem`.

**更新 2**：

进一步更新了我的解决方案，以反映 funcComplete 实际上并未修改原始 $scope。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T14:44:46.683

处理此问题的 Angular 方法是通过指令。我找到了一个完美的例子来涵盖你在下面问的内容，尽管它不像我想要的那样干净。这个想法是您创建一个用作 HTML 属性的指令。当元素绑定到控制器的范围时，该`link`函数被触发。该函数将元素淡入（完全可选）并公开一个destroy方法供您的控制器稍后调用。

更新：根据评论修改以实际影响范围。对解决方案并不感到兴奋，甚至更糟糕，因为原作者`complete.apply(scope)`在他的销毁回调中调用了，但没有`this`在回调函数内部使用。

更新 2：由于指令是使回调异步的指令，因此在此处使用可能是一个更好的主意`scope.$apply`，但请记住，如果您曾经在指令中使用隔离范围，这可能会变得很奇怪。

**[http://jsfiddle.net/langdonx/K4Kx8/114/](http://jsfiddle.net/langdonx/K4Kx8/114/)**

HTML：

```
<div ng-controller="MyCtrl">
  <ul>
      <li ng-repeat="item in items" fadey="500">
          {{item}}
          <a ng-click="clearItem(item)">X</a>
      </li>
  </ul>
  <hr />
  <button ng-click="items.push(items.length)">Add Item</button>    
</div> 
```

JavaScript：

```
var myApp = angular.module('myApp', []);

//myApp.directive('myDirective', function() {});
//myApp.factory('myService', function() {});

function MyCtrl($scope) {
    $scope.items = [0, 1, 2];

    $scope.clearItem = function(item) {
        var idx = $scope.items.indexOf(item);
        if (idx !== -1) {
            //injected into repeater scope by fadey directive
            this.destroy(function() {
                $scope.items.splice(idx, 1);
            });
        }
    };
}

myApp.directive('fadey', function() {
    return {
        restrict: 'A', // restricts the use of the directive (use it as an attribute)
        link: function(scope, elm, attrs) { // fires when the element is created and is linked to the scope of the parent controller
            var duration = parseInt(attrs.fadey);
            if (isNaN(duration)) {
                duration = 500;
            }
            elm = jQuery(elm);
            elm.hide();
            elm.fadeIn(duration)

            scope.destroy = function(complete) {
                elm.fadeOut(duration, function() {
                    scope.$apply(function() {
                        complete.$apply(scope);
                    });
                });
            };
        }
    };
}); 
```

至于为什么，我认为这只是为了分离关注点，也许是为了可用性。您的控制器应该关注数据流和业务逻辑，而不是界面操作。理想情况下，您的指令应该是为了可用性而编写的（就像`fadey`这里的情况一样 -- ed。注意：我不会称它为 fadey ;)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T19:53:16.017

这篇文章中显示的代码对我理解关系控制器 - 指令非常有帮助，但是它抛出了一个 js 错误。

```
TypeError: Object function (scope) {
  $scope.items.splice(idx, 1);
  console.log($scope.items)
} has no method '$apply' 
```

我稍微更新了指令，现在它对我有用：

```
function MyCtrl($scope) {
    $scope.items = [0, 1, 2, 3, 4, 5];

    $scope.clearItem = function(item) {
        var idx = $scope.items.indexOf(item);
        if (idx !== -1) {
            //injected into repeater scope by fadey directive
            this.destroy(function(scope) {

                $scope.items.splice(idx, 1);

                //this now shows the expected results
                console.log($scope.items)
            });
        }
    };
}

myApp.directive('fadey', function() {
    return {
        restrict: 'A', // restricts the use of the directive (use it as an attribute)
        // fires when the element is created and is linked to the scope of the parent controller
        link: function(scope, elm, attrs) { 
            var duration = parseInt(attrs.fadey);
            if (isNaN(duration)) {
                duration = 500;
            }
            elm = jQuery(elm);
            elm.hide();
            elm.fadeIn(duration)

            scope.destroy = function(complete) {
                elm.fadeOut(duration, function() {
                    scope.$apply(function() {
                        //note the change here 
                        complete(scope);
                    });
                });
            };
        }
    };
}); 
```

# c# - 动态依赖属性

> ID：15744634
> 
> 赞同：4
> 
> 时间：2013-04-01T13:42:41.430
> 
> 标签：c#, wpf, dependency-properties

我有一个类可以即时计算它的属性，例如：

```
class CircleArea
{
    public double Radius { get; set; }
    public double Area
    {
        get
        {
            return Radius * Radius * Math.PI;
        }
    }
} 
```

我通过执行以下操作使其成为 DependencyObject：

```
class CircleArea:
    DependencyObject
{
    public static readonly DependencyProperty RadiusProperty =
        DependencyProperty.Register("Radius", typeof(double), typeof(CircleArea));
    public double Radius
    {
        get { return (double)GetValue(RadiusProperty); }
        set
        {
            SetValue(RadiusProperty, value);
            CoerceValue(AreaProperty);
        }
    }

    internal static readonly DependencyPropertyKey AreaPropertyKey =
        DependencyProperty.RegisterReadOnly("Area", typeof(double), typeof(CircleArea), new PropertyMetadata(double.NaN));
    public static readonly DependencyProperty AreaProperty = AreaPropertyKey.DependencyProperty;
    public double Area
    {
        get
        {
            return Radius * Radius * Math.PI;
        }
    }
} 
```

然后我在 XAML 中有 2 个文本框，一个将 TwoWay 绑定到 Radius，另一个将 OneWay 绑定到 Area。

我应该怎么做才能对 Radius 的文本框进行编辑更新区域的文本框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:38:55.927

有几种方法可以做到这一点。

*   为简单起见，您可以实现`INotifyPropertyChanged`，使用 Area 的常规属性，然后在`OnDependencyPropertyChanged`for中触发事件`RadiusProperty`。
*   为了更复杂，您可以`AreaProperty`在 Radius 更改时私下使用密钥进行设置。你的财产看起来像这样。

    ```
    public static readonly DependencyProperty RadiusProperty = 
        DependencyProperty.Register(
            "Radius",  
            typeof(double), 
            typeof(CircleArea), 
            new FrameworkPropertyMetadata(0.0, OnRadiusChanged))

    private static void OnRadiusChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
         Area = Radius * Radius * Math.PI;
    }

    private static readonly DependencyPropertyKey AreaKey=
        DependencyProperty.RegisterReadOnly("Area", typeof(double)...
    public static readonly DependencyProperty AreaProperty = AreaKey.DependencyProperty;

    public Double Area
    {
        get
        {
            return (Double)GetValue(AreaProperty);
        }
        private set
        {
            SetValue(AreaKey, value);
        }
    } 
    ```

您仍然可以将单向绑定设置为`Area`.

# c++ - 函子作为函数参数失败

> ID：15744635
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:42.730
> 
> 标签：c++, function, functor, argument-passing

我尝试给一个函数一个函子，以便更灵活地调整我班级中的某些事情。这是一些代码：

```
struct BC {
    real operator()(real x, real y, real z) {
        return sin(2 * M_PI * x) * sin(2 * M_PI * y) * sin(2 * M_PI * z);
    }
};

int main() {
        // stuff
        subgrid.initBC(BC(), subdomain);
} 
```

这是文件 Subgrid.cpp 中 initBC 的定义：

```
template <class Fun> 
void Subgrid::initBC(Fun f, const Subdomain& subdomain) {
        f(1, 2, 3); // more or less, just simple usage like that

} 
```

以及 Subgrid.hpp 中的声明：

```
 template <class Fun> void initBC(Fun f, const Subdomain & subdomain ); 
```

尝试编译和链接它时，这是我得到的错误消息

```
Undefined symbols:
  "void Subgrid::initBC<BC>(BC, Subdomain const&)", referenced from:
      _main in main.o
ld: symbol(s) not found 
```

我不知道什么在这里不起作用。我认为这可能是由于一些模板问题，但我看不出它可能是什么。任何帮助表示赞赏，我希望代码片段就足够了，我认为所有其他代码都应该与这个问题无关

# selenium - 从 Selenium IDE 迁移到什么？

> ID：15744639
> 
> 赞同：1
> 
> 时间：2013-04-01T13:42:50.677
> 
> 标签：selenium, selenium-rc, selenium-ide

我的老板给了我以下工作：

*   三年前，一位前员工为我们的项目创建了 selenium 测试，并通过 eclipse 提交了它们
*   现在我必须更新测试，因为软件随着时间的推移而改变。
*   我创建了新的 IDE 测试，而不是编辑旧的。
*   我已通过项目文件夹中的 CVS 提交它们，并通过浏览器访问它们（selenium 在项目中有一些文件夹）
*   当我通过 IDE 运行这些测试时，它们运行良好，但是当我通过旧 selenium 安装中的 TEstRUNner 运行它们时，会出现很多错误。

我应该在项目文件夹中安装新版本的 Selenium，它应该是什么？

还是我应该只从 IDE 运行测试？（我在某处读到 TestRunner 将被弃用）

在 IDE 中进行的测试如何通过 Web Driver 运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T11:00:37.163

你看过[Selenium Builder](http://sebuilder.github.io/se-builder/)吗？它支持迁移现有脚本，与[Sauce Labs](http://saucelabs.com)配合得很好，还有一个 Jenkins 插件]( [https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Builder+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Builder+Plugin) ) 可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:09:33.923

使用 Selenium IDE 构建的测试是使用 Selenium RC (1.0) 构建的，而 selenium WebDriver 是 Selenium 2.0 的基础。Selenium 有一个用于此过渡的[迁移文档。](http://docs.seleniumhq.org/docs/appendix_migrating_from_rc_to_webdriver.jsp)在迁移到 Web Driver 时，您可能需要自己编写测试代码，而不是使用指向并单击 Selenium IDE。

此外，还有一种在 Selenium Web Driver 上使用 Selenium RC 代码的混合方法：http: [//docs.seleniumhq.org/docs/03_webdriver.jsp#alternative-back-ends-mixing-webdriver-and-rc-technologies](http://docs.seleniumhq.org/docs/03_webdriver.jsp#alternative-back-ends-mixing-webdriver-and-rc-technologies)

为了运行 Web Driver 测试，您需要有一个 selenium 服务器或本地浏览器来执行这些测试。一些例子是[SauceLabs](https://saucelabs.com/)，[Selenium Grid](http://selenium-grid.seleniumhq.org/)，一个独立的[Selenium Server](http://docs.seleniumhq.org/docs/03_webdriver.jsp#running-standalone-selenium-server-for-use-with-remotedrivers)，或者我相信你允许[Web Driver 直接控制](http://docs.seleniumhq.org/docs/03_webdriver.jsp#how-does-webdriver-drive-the-browser-compared-to-selenium-rc)计算机上的浏览器执行代码。

# text - 给定一个包含几十个单词的列表，我如何从数百个文本的语料库中找到最匹配的部分？

> ID：15744640
> 
> 赞同：2
> 
> 时间：2013-04-01T13:42:51.340
> 
> 标签：text, full-text-search, linguistics, corpus

假设我有一个包含 250 个单词的列表，其中可能包含自始至终的唯一条目，或者所有语法形式的一堆单词，或者特定语法形式的各种单词（例如，所有过去时）。我还有一个文本语料库，它被方便地分成了一个部分的数据库，每个部分可能有 150 个单词（也许我想在将来动态地确定这些部分，但我暂时不考虑它）。

我的问题是：*什么是从包含我的 250 个单词中的大部分的语料库中取出这些部分的有用方法？*

我查看了一些全文搜索引擎，例如 Lucene，但不确定它们是为处理长查询列表而构建的。布隆过滤器似乎也很有趣。我对 Perl 感觉最舒服，但如果 R​​uby 或 Python 有什么花哨的东西，我很乐意学习。在这一点上，性能不是问题。

这种程序的用例是在语言教学中，如果有各种各样的单词列表来反映学习者的不同程度的知识，并从原始来源快速找到合适的文本或示例，那就太好了。另外，我只是想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:40:40.117

实际上，我正在寻找的是文档比较。我[在 PostgreSQL 中找到了一种通过与给定文档的相似性对文本进行排名的方法](http://domas.monkus.lt/document-similarity-postgresql)。

# ios - 从通讯录问题中获取号码

> ID：15744641
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:54.063
> 
> 标签：ios, addressbook

我为此目的使用以下代码

```
 ABMultiValueRef phones = (ABMultiValueRef)ABRecordCopyValue(ref, kABPersonPhoneProperty);
        NSString* mobile=@"";
        NSString* mobileLabel;
        for (int i=0; i < ABMultiValueGetCount(phones); i++) {
            //NSString *phone = (NSString *)ABMultiValueCopyValueAtIndex(phones, i);
            //NSLog(@"%@", phone);
            mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel]) {
                NSLog(@"mobile:");
            } else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel]) {
                NSLog(@"iphone:");
            } else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhonePagerLabel]) {
                NSLog(@"pager:");
            }
            [mobile release];
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"%@", mobile);
            [_Phonearray addObject:mobile]; 
        } 
```

现在我的问题是_phonearray的nslog是这样的

_

```
Phonearray(
    "(658) 932-6593",
    "(654) 498-9878"
) 
```

但我想喜欢

```
_Phonearray(
    "6589326593",
    "6544989878"
) 
```

那么我应该在代码中做什么：？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:16:26.077

那么，您想从 ? 中删除所有非数字字符`mobile`？我在这里找到了一个方法：

[使用 NSCharacterSet 删除所有不需要的字符 - Thinbug](https://stackoverflow.com/a/9676003/1523962)

```
NSCharacterSet* charactersToRemove = [[NSCharacterSet decimalDigitCharacterSet] invertedSet] ;
mobile = [[mobile componentsSeparatedByCharactersInSet:charactersToRemove] componentsJoinedByString:@""] ; 
```

# bash - Bash：我有 2 个 .csv 格式的国家级数据集，想过滤它们以查找常见元素并绘制结果

> ID：15744642
> 
> 赞同：0
> 
> 时间：2013-04-01T13:42:54.087
> 
> 标签：bash, statistics

我从维基百科获取了两个关于一个国家的数据集，将它们粘贴到 LibreOffice calc 中并将它们保存为 .csv 文件。例如：

**第一个 .csv 文件：**

```
"Algeria", 76
"Angola", 100
...
"United Arab Emirates", 27 
```

**第二个 .csv 文件：**

```
"Algeria", .67
"Argentina", .45
...
"Zimbabwe", .57 
```

我想过滤两个 .csv 文件中具有数据点的国家/地区的列表（假设没有重复或替代拼写），匹配两个数据点（例如，阿尔及利亚的 76、.67）并输出一些基本的散点图，以获得快速的视觉想法他们的关系。

我尝试了很多不同的方法来解析文件，其中一些几乎可以工作，但由于对 awk、grep、bash 管道、gnuplot 等了解不够，我一直被绊倒。

我确信在 Python 或 Perl 或类似的语言中会更容易/更好地完成，我最终在 LibreOffice Calc 中使用了“查找”功能，但开始我想知道如何在 bash 中完成它。理想情况下，数据收集将通过解析 html 实现自动化，但有时您会在 pdf 表格等中获得这些数据集。

任何类型的指针都表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:18:43.363

我猜想，我制作了一个快速而肮脏的 perl 单行脚本，应该根据需要输出。我只花三五分钟。

```
$ perl -e 'while(<>){my @dt = split(/,/);chomp $dt[1]; my $tmp=`fgrep $dt[0] two.csv`; my @rs = split(/,/,$tmp);chomp $rs[1]; print $dt[0],$dt[1],$rs[1],"\n" }' one.csv 
```

输出 ：

```
"Algeria" 76 .67
"Angola" 100
"United Arab Emirates" 27 
```

我不处理错误，因此如果一个国家/地区不存在于 second.csv 文件中，它们将仅显示此信息，并且如果一个国家/地区仅存在于 second.csv 中，我也不会得到此信息。

有了这个输出，你应该能够使用 gnuplot 来做你想做的事。或者您可以在 Excel 或 OpenOffice Calc 上打开此文件。

我希望这会有所帮助。

# java - 打印拆分字符串

> ID：15744643
> 
> 赞同：1
> 
> 时间：2013-04-01T13:42:55.273
> 
> 标签：java, string, split

我正在尝试以以下格式打印我的字符串。`ua, login, login ---> ua, navigation, fault Average = 500 milliseconds`. 我将 2 个字符串存储到一个名为的字符串中`keyString`，并将其放入由`"|"`. 然后，当我迭代键集以获取我最初声明的格式时，我将其拆分，但它显示如下`---> ua, ctiq, export|ua, ctiq export, transfer Average = 600 milliseconds`。有任何想法吗？

```
 public static void ProcessLines(Map<String, NumberHolder> uaCount,String firstLine, String secondLine) throws ParseException
   {
    String [] arr1 = firstLine.split("-- ", 2);
    String [] arr2 = secondLine.split("-- ", 2);
    String str1 = arr1[1];
    String str2 = arr2[1];

    ......
    String keyString = str1 + "|" + str2;               
    NumberHolder hashValue = uaCount.get(keyString);
     if(hashValue == null)
     {
        hashValue = new NumberHolder();
        uaCount.put(keyString, hashValue);                      
     }
     hashValue.sumtime_in_milliseconds += diffMilliSeconds;
     hashValue.occurences++;

     public static class NumberHolder
     {
      public int occurences;
      public int sumtime_in_milliseconds;       
     } 
```

这是打印部分

```
 for(String str : uaCount.keySet())
    {
        String [] arr = str.split("|",2);

        long average = uaCount.get(str).sumtime_in_milliseconds / uaCount.get(str).occurences;

        //System.out.println(str);

        System.out.println(arr[0] + " ---> " + arr[1] + " Average = " + average + " milliseconds");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:53:17.570

`split`使用正则表达式匹配要拆分的地方，在“RegEx”中`|`表示 OR。要`|`用作文字，您需要将其转义`\`，在 String 中写为`"\\"`. 或者，您可以使用`[|]`. 尝试

```
str.split("\\|",2); 
```

# c# - 将日期转换为 DOS 日期

> ID：15744647
> 
> 赞同：0
> 
> 时间：2013-04-01T13:43:09.663
> 
> 标签：c#, datetime, dos

我在使用 DOS 日期格式时遇到问题。我需要转换：

```
从：
       2011 年 6 月 29 日
到：
       16093

```

我知道 16093 是正确的结果，但我怎样才能得到这个结果呢？

* * *

我可以将 DOS 日期整数值转换为可识别`DateTime`但不知道如何反转该过程。这就是我如何从 DOS 日期转换为`DateTime`：

```
var number = 16093;

var year = (number >> 9) + 1980;
var month = (number & 0x01e0) >> 5;
var day = number & 0x1F;
var date = new DateTime((int)year, (int)month, (int)day); 
```

这行得通。现在我需要扭转它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T14:13:08.603

让我教你如何钓鱼，并在此过程中解决你的问题。

1.  **我们有什么？**

    `DateTime`表示日期/时间组合的.NET 对象。

    ```
     DateTime dateTime = new DateTime(2011, 6, 29); 
    ```

2.  **我们想要什么？**

    符合规范的[DOS 日期/时间](https://web.archive.org/web/20180311003959/http://vsft.com./hal/dostime.htm)，但仅限于 16 位日期组件。时间分量被忽略。

3.  **我们需要什么？**

    自 1980 年以来的月份、月份和年份。让我们将它们作为无符号整数获取，并确保它们在适当的范围内。

    ```
     uint day = (uint)dateTime.Day;              // Between 1 and 31
     uint month = (uint)dateTime.Month;          // Between 1 and 12
     uint years = (uint)(dateTime.Year - 1980);  // From 1980 
    ```

    请注意，年份有 7 位，因此它可以表示从 1980 到 2107 的年份。超出该范围的任何内容都是无效的。由于`years`是无符号的，它不能表示负值。但是像 1970（减去 1980）这样的值将是 4294967286，因此它也超出了范围。

    ```
     if (years > 127)
         throw new ArgumentOutOfRangeException("Cannot represent the year."); 
    ```

4.  **我们如何结合它？**

    我们需要将所有值移动到结果整数中的适当位置。

    从一个全零整数开始。我们只需要低 16 位，但为方便起见，我们将在`uint`此处使用 an。

    ```
     uint dosDateTime = 0; 
    ```

    规范列出了每个值开始的位索引。但是由于我们忽略了时间部分（16 个最低有效位），我们需要从所有这些值中减去 16。

    天从第 16 位开始。我们将它向左移动 16 - 16 个位置（即不移动），我们可以将这些位与结果进行或。

    ```
     dosDateTime |= day << (16 - 16); 
    ```

    月份从第 21 位（减 16）开始，年份从第 25 位开始。

    ```
     dosDateTime |= minutes << (21 - 16);
     dosDateTime |= years << (25 - 16); 
    ```

    然后把它变成一个无符号的 16 位整数。它不会溢出。

    ```
     ushort result = unchecked((ushort)dosDateTime); 
    ```

5.  **我们如何把它放在一起？**

    将它们放在一起作为扩展方法：

    ```
     public static class DateTimeExtensions
     {
         public static ushort ToDosDateTime(this DateTime dateTime)
         {
             uint day = (uint)dateTime.Day;              // Between 1 and 31
             uint month = (uint)dateTime.Month;          // Between 1 and 12
             uint years = (uint)(dateTime.Year - 1980);  // From 1980

             if (years > 127)
                 throw new ArgumentOutOfRangeException("Cannot represent the year.");

             uint dosDateTime = 0;
             dosDateTime |= day << (16 - 16);
             dosDateTime |= month << (21 - 16);
             dosDateTime |= years << (25 - 16);

             return unchecked((ushort)dosDateTime);
         }
     } 
    ```

    当然你可以写得更简洁，但这清楚地表明了发生了什么。并且编译器将优化许多常量。

6.  **测试它**

    您应该编写一些单元测试以查看您的代码是否正常工作。但是这个快速测试验证了基本思想：

    ```
     static void Main(string[] args)
     {
         DateTime dateTime = new DateTime(2011, 6, 29);
         ushort dosDateTime = dateTime.ToDosDateTime();
         Console.WriteLine(dosDateTime);     // Prints: 16093
         Console.ReadLine();
     } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:46:23.587

看起来 .Net 框架不包含仅用于此目的的方法，但[知道 dos 时间格式](http://www.vsft.com/hal/dostime.htm)，通过一些位移，您可以编写自己的转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:12:36.237

这应该可以正常工作：

```
private static DateTime DosDateToDateTime(ushort dosdate)
{
    return new DateTime((dosdate >> 9) + 1980, (dosdate >> 5) & 0xF, dosdate & 0x1F);
} 
```

# makefile - 具有多个作业 -j 和子目录的 makefile

> ID：15744651
> 
> 赞同：1
> 
> 时间：2013-04-01T13:43:19.110
> 
> 标签：makefile

想象一下，您有一个包含要使用“make -c”构建的子目录的 make 文件。图像您有 4 个目标目录。4 个中的 3 个已完成，1 个需要运行。您使用以下命令运行整个 makefile：

```
使-j 4

```

有没有办法告诉makefile系统用 make -c -j 4 而不是 1 运行剩余的目标？如果缺少两个目标，我想为每个目标制作 -c -j 2 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:08:58.430

我将扩展 Beta 的（正确）答案。当您使用`-jN`. 同时，它们始终保证（假设至少有 N 个作业可能在所有 make 调用中运行），N 个作业将始终运行。

相反，假设您有 4 个目录与“有事做”，不知何故您可以先验地知道，因此不是调用 make 的一个实例`-j4`并让该 make 正常调用 4 个 submake，而是强制每个 submake用 调用`-j1`。现在假设第一个目录有 10 个过期的目标，第二个有 5 个，第三个有 20 个，第四个有 100 个过期的目标。起初，您有 4 个作业并行运行。然后，一旦构建了第二个目录的 5 个目标，您就只有 3 个并行运行的作业，然后是 2 个，然后对于第四个目录的其余构建，您一次只能构建一个目标，并且没有并行性。这可不太好。

相反，GNU make 的工作方式是所有四个 make 实例都在通信。当第二个目录完成后，它正在运行的作业可用于其他目录等。在构建结束时，第四个目录将同时并行构建四个作业。这更好。

也许如果您解释*了为什么*要这样做，这对我们构建答案会更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:17:01.870

自动制作手柄。从[手册](http://www.gnu.org/software/make/manual/make.html#Options_002fRecursion)：

> 如果您将 [-j] 设置为某个数值“N”并且您的操作系统支持它...父品牌和所有子品牌将进行通信以确保只有“N”个作业同时运行商场。

# android - 特定时间通知

> ID：15744654
> 
> 赞同：8
> 
> 时间：2013-04-01T13:43:26.070
> 
> 标签：android, notifications, alarmmanager

我在特定时间收到通知，请参阅我的代码：

```
//Create alarm manager
 AlarmManager alarmMgr0 = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

 //Create pending intent & register it to your alarm notifier class
 Intent intent0 = new Intent(this, AlarmReceiver_maandag_1e.class);
 intent0.putExtra("uur", "1e"); 
 PendingIntent pendingIntent0 = PendingIntent.getBroadcast(this, 0, intent0, 0);

 //set timer you want alarm to work (here I have set it to 8.30)
 Calendar timeOff9 = Calendar.getInstance();
 timeOff9.set(Calendar.HOUR_OF_DAY, 8);
 timeOff9.set(Calendar.MINUTE, 30);
 timeOff9.set(Calendar.SECOND, 0);

 //set that timer as a RTC Wakeup to alarm manager object
 alarmMgr0.set(AlarmManager.RTC_WAKEUP, timeOff9.getTimeInMillis(), pendingIntent0); 
```

除了一件事外，这很完美。

使用警报管理器将通知设置为 8:30 如果我在 8:30 之后启动应用程序，例如 9:00，通知仍然显示..

闹钟是否有可能在 8 点 30 分响，但不会更晚？

**编辑**

对于任何有同样问题的人，这里是解决方案：

把它放在你的广播接收器中：

```
long current_time = System.currentTimeMillis();

Calendar timeOff9 = Calendar.getInstance();
timeOff9.set(Calendar.HOUR_OF_DAY, 8);
timeOff9.set(Calendar.MINUTE, 35);
timeOff9.set(Calendar.SECOND, 0);

long limit_time = timeOff9.getTimeInMillis();

if (current_time > limit_time) {
    //nothing
} else {
    //show notification
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-21T06:10:44.517

你也可以试试这个报警管理器的方法：

```
public void setExact (int type, long triggerAtMillis, PendingIntent operation) 
```

但它需要 API 级别 19。

# java - j2objc 直接引用无法解析（使用 Maven 结构 /src/main/java ）

> ID：15744661
> 
> 赞同：2
> 
> 时间：2013-04-01T13:43:42.840
> 
> 标签：java, objective-c, maven

我必须 java 类 Currency.java 和 Price.java Price.java 使用 Currency.java，所以有一个参考。我无法转换两个 java 类，其中一个是指另一个。哪个是正确的命令语法？

到目前为止我尝试了什么：

如果我使用 j2objc 转换 Currency 工作正常。

```
j2objc --verbose -d objective-c -sourcepath src/path/to/the/package Currency.java 
```

如果我使用 j2objc 转换 Price.java（有或没有 Currency.java）我得到“货币无法解析”

```
terminal:
j2objc --verbose -d objective-c -sourcepath src/path/to/the/package Currency.java Price.java
translating Currency.java
time: read=0.005 compile=0.613 translate=0.222 write=0.077 total=0.917
translating Price.java
error: Price.java:39: Currency cannot be resolved
Translated 2 files: 1 errors, 0 warnings
```

我也尝试过使用包通配符 * 但我遇到了同样的问题：

```
j2objc --verbose -d objective-c -sourcepath src src/path/to/the/package/* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:54:07.367

我发现问题与 Maven 的 src/main/java 结构有关。

以下命令将起作用

```
j2objc -d objective-c -sourcepath src/main/java com/famenu/shared/model/menu/Currency.java com/famenu/shared/model/menu/Price.java 
```

而以下 2 个命令将不起作用：

```
j2objc -d objective-c -sourcepath src src/main/java/com/famenu/shared/model/menu/Currency.java csrc/main/java/com/famenu/shared/model/menu/Price.java

j2objc -d objective-c src/main/java/com/famenu/shared/model/menu/Currency.java src/main/java/com/famenu/shared/model/menu/Price.java 
```

这意味着必须指定 -sourcepath 选项并且必须指向包的目录结构开始的路径（包含文件夹 com 或 org... 的目录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:11:40.093

您是否尝试过在 eclipse 中使用该插件？它可以让你头疼。

[http://hsapkota.com.au/index.php/projects/20-j2objc-eclipse-plugin-howto](http://hsapkota.com.au/index.php/projects/20-j2objc-eclipse-plugin-howto)

这并不完美，因为他们不再维护代码。

# php - Codeigniter 包括不工作？

> ID：15744662
> 
> 赞同：1
> 
> 时间：2013-04-01T13:43:47.807
> 
> 标签：php, codeigniter, authentication

我觉得有一个非常明显的解决方案，但我只是没有看到它。我正在用 codeigniter 建立一个网站。

在我的视图目录中，我有两个文件夹：`template`& `auth`。

我正在尝试将目录中的标头包含到`template`目录中的 php 文件中`auth`。

我将它包括在顶部，一如既往`include '../template/header.php;'`

但我得到了错误：

> 消息：包括（../template/header.php）：无法打开流：没有这样的文件或目录
> 
> 文件名：auth/login.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:47:05.697

要包含任何文件，`CodeIgniter`您应该这样做：

```
$this->load->view('template/header'); 
```

您可以在此处阅读有关包含文件的更多信息`CodeIgniter`：

[如何在codeigniter的模型中包含文件？](https://stackoverflow.com/questions/8228141/how-to-include-a-file-inside-a-model-in-codeigniter)

# meteor - 有什么技术可以组织 Meteor 项目吗？

> ID：15744664
> 
> 赞同：0
> 
> 时间：2013-04-01T13:44:10.027
> 
> 标签：meteor

是否有任何技术/指南可以更好地组织（模块化） Meteor 项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:05:46.837

Meteor 这种方式非常灵活，您可以像 Thierry 所说的那样通过陨石使用自己的子包。我最喜欢的方法是将我的功能和里面的东西拆分`<template>`成多个 html 文件和 js 文件。每个视图/模板一个，例如

```
client/
 home.html (contains my html data in a <template name="home"> and any subtemplates
 home.js (contains my helpers & event handlers for home)
server
 server_methods.js (methods) 
 server_publish.js (publish functions) 
```

而对于更通用的东西，比如（`router.js`- 对于流星路由器），我让它们独立存在。它非常方便的流星只是将这些都收集起来而不告诉它，然后将它们发送给客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:04:07.903

我自己没有尝试过，但我计划尝试将陨石包作为我的主要项目的 git/mercurial 子模块。

# java - “Activity 已经泄露了窗口……那是最初添加的。” 视频加载失败引起的

> ID：15744666
> 
> 赞同：4
> 
> 时间：2013-04-01T13:44:33.920
> 
> 标签：java, android, android-sdk-2.3

我正在编写一个具有介绍视频的 android 应用程序，该视频是首先播放的 mp4 文件。用户可以触摸屏幕跳过它。

当我尝试在 android 模拟器上运行我的应用程序时，我得到一个“活动已泄漏窗口.. 最初添加”异常。在stackoverflow上有一篇关于它的大帖子说如果我的东西在完成后试图启动一个对话框。也许在我的情况下，播放器正在尝试启动一个对话框，说明播放器不支持我的视频格式。

好的..所以我只想跳过视频。没有它抛出错误和异常。

这是我的介绍活动：

```
package com.tuxin.findasmile;

import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
//import android.view.Menu; 
import android.view.MotionEvent;
import android.widget.VideoView;

public class IntroActivity extends Activity {

private VideoView video;
private boolean isMenuStarted=false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_intro);

    video = (VideoView) findViewById(R.id.videoView1);
    video.setOnErrorListener(new MediaPlayer.OnErrorListener() {

        public boolean onError(MediaPlayer mp, int what, int extra) {
            Intent menu = new Intent(IntroActivity.this,MenuActivity.class);
            startActivity(menu);
            finish();
            return false;
        }
    });
    video.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            if (!isMenuStarted) { 
                isMenuStarted=true;
            Intent menu = new  Intent(IntroActivity.this,MenuActivity.class);
            startActivity(menu);
            finish();
            }

        }
    });
    Uri videoUri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.seaofbuttons);
    video.setVideoURI(videoUri);
    video.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (video.isPlaying()) {
        video.stopPlayback();
    }
    if (!isMenuStarted) {
    isMenuStarted=true;
    Intent menu = new Intent(IntroActivity.this,MenuActivity.class);
    startActivity(menu);
    finish();
    }
    return false;

}

} 
```

我知道模拟器不支持视频。但我想支持手机不支持这种视频格式的情况。我不希望抛出异常。

```
04-01 16:32:38.675: E/WindowManager(533): Activity com.tuxin.findasmile.IntroActivity has     leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4052b9b0 that was originally added here
04-01 16:32:38.675: E/WindowManager(533): android.view.WindowLeaked: Activity com.tuxin.findasmile.IntroActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4052b9b0 that was originally added here
04-01 16:32:38.675: E/WindowManager(533):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
04-01 16:32:38.675: E/WindowManager(533):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-01 16:32:38.675: E/WindowManager(533):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-01 16:32:38.675: E/WindowManager(533):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-01 16:32:38.675: E/WindowManager(533):   at android.app.Dialog.show(Dialog.java:241)
04-01 16:32:38.675: E/WindowManager(533):   at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
04-01 16:32:38.675: E/WindowManager(533):   at android.widget.VideoView$4.onError(VideoView.java:386)
04-01 16:32:38.675: E/WindowManager(533):   at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1341)
04-01 16:32:38.675: E/WindowManager(533):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 16:32:38.675: E/WindowManager(533):   at android.os.Looper.loop(Looper.java:123)
04-01 16:32:38.675: E/WindowManager(533):   at android.app.ActivityThread.main(ActivityThread.java:3683)
04-01 16:32:38.675: E/WindowManager(533):   at java.lang.reflect.Method.invokeNative(Native Method)
04-01 16:32:38.675: E/WindowManager(533):   at java.lang.reflect.Method.invoke(Method.java:507)
04-01 16:32:38.675: E/WindowManager(533):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-01 16:32:38.675: E/WindowManager(533):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-01 16:32:38.675: E/WindowManager(533):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:58:59.347

尽管我认为这个问题的答案会很复杂。我需要做的就是在 onError 函数中返回 true。

问题是它试图显示一个对话框，其中包含无法查看视频的错误消息。我没有看到它，因为我已经转到下一个活动，所以这个对话框被泄露了，我看到了这个异常。

将 onError 返回从 false 更改为 true 将更改 VideoView 的行为，而不是创建带有消息的对话框，因此不会泄漏任何内容。

[Android 移除 videoview 弹出消息](https://stackoverflow.com/questions/11309412/android-remove-the-videoview-pop-up-message)

# jquery - 如何在动态crm 2011在线使用jquery？

> ID：15744668
> 
> 赞同：0
> 
> 时间：2013-04-01T13:44:46.000
> 
> 标签：jquery, dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics

有没有人使用 jquery 来控制表单的属性

我对在 Micrsoft CRM 2011 中以实体形式扩​​展 Textareas 感兴趣

我通过使用 jquery 找到了一些非常好的[解决方案](https://github.com/bgrins/ExpandingTextareas) 来解决我的问题，但我很困惑如何在 CRM 中使用 jquery 方法

我知道我必须创建一些包含 jquery 库的 Web 资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:53:47.620

这是一个将 jQuery 脚本文件设置为 Web 资源的示例。

[CRM 2011 中的 jQuery Web 资源](http://jlattimer.blogspot.com/2012/03/jquery-web-resource-in-crm-2011.html)

确保将脚本文件添加到表单时，对 jQuery 文件的引用列在使用 jQuery 方法的自定义脚本文件之前。

[在表单中使用 JavaScript Web 资源](http://jlattimer.blogspot.com/p/use-javascript-web-resource-in-your-form.html)

# asp.net - 基于浏览器的表单 POST 如何变成像 Button_OnClick 这样的服务器端事件

> ID：15744669
> 
> 赞同：1
> 
> 时间：2013-04-01T13:44:47.060
> 
> 标签：asp.net, .net

我在[What Great .NET Developers Ought To Know 中看到了这个问题——作者：Scott Hanselman](http://www.hanselman.com/blog/WhatGreatNETDevelopersOughtToKnowMoreNETInterviewQuestions.aspx)

我不太确定，但据我所知，按钮控件被呈现为 HTML，输入标签为提交（带有动态 ID）。当触发 POST 事件时，ASP.Net 使用动态生成的按钮 ID 并匹配 C# 端的相应按钮单击事件......

请让我知道，如果我的理解是正确的。认为它可能完全错误或断章取义。

更新：-

我做了一点谷歌，发现了[这个](http://forums.asp.net/t/1832994.aspx/1)链接，它声明为

> HTML 中的 ASP.NET Button 控件是一个 HTML 输入元素，其 type 属性设置为“提交”。HTML 中的提交按钮调用 POST，使用来自表单元素的 action 属性，对于 ASP.NET，它是当前页面。由于这是一个 POST，表单变量由表单元素中输入元素的所有值填充，包括提交按钮的值（名称）。当 POST 到达服务器并被 ASP.NET 解析时，它会确认 POST 是由提交按钮发起的，这会变成原始 ASP.NET Button 控件的 Click 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T12:11:21.807

您是否尝试过创建带有多个按钮的简单 ASP.NET 单页应用程序？您可以这样做，然后在浏览器中检查输出页面。您将看到隐藏字段 __EVENTTARGET，其按钮 id 的值用于提交，在每次回发时，此隐藏字段都会传输到服务器以及 __VIEWSTATE。也许这就是“答案”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T01:50:20.017

HTML 中的 ASP.NET Button 控件是一个 HTML 输入元素，其 type 属性设置为“提交”。HTML 中的提交按钮调用 POST，使用来自表单元素的 action 属性，对于 ASP.NET，它是当前页面。由于这是一个 POST，表单变量由表单元素中输入元素的所有值填充，包括提交按钮的值（名称）。当 POST 到达服务器并被 ASP.NET 解析时，它会确认 POST 是由提交按钮发起的，这变成了原始 ASP.NET Button 控件的 Click 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T23:05:15.737

在 .NET Web Forms 应用程序中，各种事件（通常是单击事件）将表单发送回服务器。该事件是诸如“Button1_OnClick”之类的消息，由事件委托绑定到方法（即事件处理程序）。

下面的代码示例有一个将方法`System.EventHandler`绑定到事件的对象。`Button1_OnClick``Button1.Click`

```
private void InitializeComponent()
{
    this.Load += new System.EventHandler(this.Page_Load);
    this.Button1.Click += new System.EventHandler(this.Button1_OnClick);
}

private void Button1_OnClick(object sender, System.EventArgs e)
{
} 
```

# sharepoint-2007 - 对任何字段的更改运行 SPD 工作流，除了一个？

> ID：15744677
> 
> 赞同：1
> 
> 时间：2013-04-01T13:45:39.127
> 
> 标签：sharepoint-2007, workflow, sharepoint-designer

我有一个自定义列表。列表中的每个项目都有 39 个字段/列需要填写，第 40 个字段由单独的工作流程填写。

如果任何字段发生更改，我需要触发另一个工作流程，除了一个。

为什么？因为该字段中有一个自定义 ID#，并且该字段在提交表单后被填充。因此，列表项总是会发生变化。因此，我需要一个工作流来在任何字段更改时触发，除了带有自定义 ID# 的字段。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:35:16.353

没有人能够回答这个问题，但我自己想通了。我在这里包括答案，以防其他人遇到此问题并发现它有帮助：

1.  创建一个您将从您的 SP 列表和 NewForm.aspx、EditForm.aspx 和 DispForm.aspx 中隐藏的新字段。
2.  使用 jQuery，像这样填充该隐藏字段：`$(":input[Title='fieldName']").val("1");`
3.  使用 SPD 工作流，检查该字段是否 = 1。如果是，则运行工作流。并且在该工作流程结束时将该字段设置为 0 - 这很重要。

# asp.net - Ajax 选项卡容器不可见

> ID：15744682
> 
> 赞同：0
> 
> 时间：2013-04-01T13:45:57.100
> 
> 标签：asp.net, ajax, tabcontainer

经过一天的谷歌搜索，我不得不问这个......这个问题已经被问了很多次，但似乎很少有人得到答案。为什么标签容器在页面加载时隐藏？有没有人有办法让它/保持可见？我正在使用工具包脚本管理器，我已经尝试删除工具包并再次添加...我的 HTML 代码很大，所以无法发布...所以我猜只允许 30000 个字符...

```
<asp:TabContainer ID="TabContainer1" runat="server" CssClass="ajax__tab_lightblue-theme"
                    ActiveTabIndex="0" Visible="true" OnClientActiveTabChanged="ClientFunction">
                    <asp:TabPanel runat="server" HeaderText="My Profile" ID="tbpnlMyProfile">
                        <HeaderTemplate>
                            My Profile
                        </HeaderTemplate>
                        <ContentTemplate>
                            <table style="width: 100%;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:18:33.393

尝试从选项卡容器中删除 OnClientActiveTabChanged 事件。如果脚本不存在，这可能会导致容器不出现。

编辑：

好的，所以我试图让您的代码正常工作。当然它不起作用，因为您使用的是 asp: 前缀而不是 ajaxToolkit: 前缀。尝试这个：

```
<ajaxToolkit:TabContainer ID="TabContainer1" runat="server" CssClass="ajax__tab_lightblue-theme"
                ActiveTabIndex="0" Visible="true" OnClientActiveTabChanged="ClientFunction">
                <asp:ajaxToolkit runat="server" HeaderText="My Profile" ID="tbpnlMyProfile">
                    <HeaderTemplate>
                        My Profile
                    </HeaderTemplate>
                    <ContentTemplate>
                    </ContentTemplate>
                </asp:ajaxToolkit>
        </asp:ajaxToolkit> 
```

编辑：

好的，我保证最后一次编辑。我仍然认为它是 OnClientActiveTabChanged 事件。当我删除该选项卡时，它会显示出来。当它在那里时，页面是空白的。复制并粘贴它：

```
<asp:TabContainer ID="TabContainer1" runat="server" CssClass="ajax__tab_lightblue-theme"
                ActiveTabIndex="0" Visible="true" >
                <asp:TabPanel runat="server" HeaderText="My Profile" ID="tbpnlMyProfile">
                    <HeaderTemplate>
                        My Profile
                    </HeaderTemplate>
                    <ContentTemplate>
                        <table style="width: 100%;"> 
```

# php - 在 Woocommerce 中以编程方式应用优惠券

> ID：15744689
> 
> 赞同：34
> 
> 时间：2013-04-01T13:46:23.027
> 
> 标签：php, wordpress, woocommerce, discount, coupon

在 Woocommerce 中，我试图找到一种方法，如果购物车中的重量超过 100 磅，则为整个客户的订单提供 10% 的折扣。我正在实现这一目标。对于下一步，我正在寻找一种通过functions.php 通过action/hook 以编程方式应用优惠券代码的方法。

看来我可以使用函数 woocommerce_ajax_apply_coupon 来执行此操作（[http://docs.woothemes.com/wc-apidocs/function-woocommerce_ajax_apply_coupon.html](http://docs.woothemes.com/wc-apidocs/function-woocommerce_ajax_apply_coupon.html)），但我不确定如何使用它。

到目前为止，我已经修改了 cart.php 以获得购物车中所有产品的总重量，我已经创建了一个应用折扣的优惠券（如果手动输入），我已经向 functions.php 添加了一些代码来检查重量并向用户显示消息。

编辑：部分代码被删除，完整的代码包含在下面的解决方案中。

* * *

感谢弗雷尼的指导。这是在满足条件时成功应用折扣券并在不再满足时将其删除的工作最终结果：

```
/* Mod: 10% Discount for weight greater than 100 lbs 
Works with code added to child theme: woocommerce/cart/cart.php lines 13 - 14: which gets $total_weight of cart:
        global $total_weight;
        $total_weight = $woocommerce->cart->cart_contents_weight;
*/
add_action('woocommerce_before_cart_table', 'discount_when_weight_greater_than_100');
function discount_when_weight_greater_than_100( ) {
    global $woocommerce;
    global $total_weight;
    if( $total_weight > 100 ) {
        $coupon_code = '999';
        if (!$woocommerce->cart->add_discount( sanitize_text_field( $coupon_code ))) {
            $woocommerce->show_messages();
        }
        echo '<div class="woocommerce_message"><strong>Your order is over 100 lbs so a 10% Discount has been Applied!</strong> Your total order weight is <strong>' . $total_weight . '</strong> lbs.</div>';
    }
}

/* Mod: Remove 10% Discount for weight less than or equal to 100 lbs */
add_action('woocommerce_before_cart_table', 'remove_coupon_if_weight_100_or_less');
function remove_coupon_if_weight_100_or_less( ) {
    global $woocommerce;
    global $total_weight;
    if( $total_weight <= 100 ) {
        $coupon_code = '999';
        $woocommerce->cart->get_applied_coupons();
        if (!$woocommerce->cart->remove_coupons( sanitize_text_field( $coupon_code ))) {
            $woocommerce->show_messages();
        }
        $woocommerce->cart->calculate_totals();
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-02T02:43:49.603

首先，创建一张折扣券（通过[http://docs.woothemes.com/document/create-a-coupon-programatically/](http://docs.woothemes.com/document/create-a-coupon-programatically/)）：

```
$coupon_code = 'UNIQUECODE'; // Code - perhaps generate this from the user ID + the order ID
$amount = '10'; // Amount
$discount_type = 'percent'; // Type: fixed_cart, percent, fixed_product, percent_product

$coupon = array(
    'post_title' => $coupon_code,
    'post_content' => '',
    'post_status' => 'publish',
    'post_author' => 1,
    'post_type'     => 'shop_coupon'
);    

$new_coupon_id = wp_insert_post( $coupon );

// Add meta
update_post_meta( $new_coupon_id, 'discount_type', $discount_type );
update_post_meta( $new_coupon_id, 'coupon_amount', $amount );
update_post_meta( $new_coupon_id, 'individual_use', 'no' );
update_post_meta( $new_coupon_id, 'product_ids', '' );
update_post_meta( $new_coupon_id, 'exclude_product_ids', '' );
update_post_meta( $new_coupon_id, 'usage_limit', '1' );
update_post_meta( $new_coupon_id, 'expiry_date', '' );
update_post_meta( $new_coupon_id, 'apply_before_tax', 'yes' );
update_post_meta( $new_coupon_id, 'free_shipping', 'no' ); 
```

然后将该优惠券应用于您的订单：

```
if (!$woocommerce->cart->add_discount( sanitize_text_field( $coupon_code )))
    $woocommerce->show_messages(); 
```

最后一个函数返回一个 BOOL 值：如果折扣成功，则为 TRUE，如果由于各种原因中的任何一个而失败，则为 FALSE。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-05T21:41:10.140

我使用了这个解决方案，但它包含 OP 编写的错误。如果用户跳过预览购物车并直接进入结帐表单，则不会应用优惠券。这是我的解决方案。

```
// Independence day 2013 coupon auto add
// Add coupon when user views cart before checkout (shipping calculation page).
add_action('woocommerce_before_cart_table', 'add_independence_day_2013_coupon_automatically');

// Add coupon when user views checkout page (would not be added otherwise, unless user views cart first).
add_action('woocommerce_before_checkout_form', 'add_independence_day_2013_coupon_automatically');

// Check if php function exists.  If it doesn't, create it.
if (!function_exists('add_independence_day_2013_coupon_automatically')) {

    function add_independence_day_2013_coupon_automatically() {

        global $woocommerce;
        $coupon_code = 'independencedaysale';
        $bc_coupon_start_date = '2013-06-30 17:00:00';
        $bc_coupon_end_date = '2013-07-08 06:59:59';

        // Only apply coupon between 12:00am on 7/1/2013 and 11:59pm on 7/7/2013 PST.
        if ((time() >= strtotime($bc_coupon_start_date)) &&
            (time() <= strtotime($bc_coupon_end_date))) {

            // If coupon has been already been added remove it.
            if ($woocommerce->cart->has_discount(sanitize_text_field($coupon_code))) {

                if (!$woocommerce->cart->remove_coupons(sanitize_text_field($coupon_code))) {

                    $woocommerce->show_messages();

                }

            }

            // Add coupon
            if (!$woocommerce->cart->add_discount(sanitize_text_field($coupon_code))) {

                $woocommerce->show_messages();

            } else {

                $woocommerce->clear_messages();
                $woocommerce->add_message('Independence day sale coupon (10%) automatically applied');
                $woocommerce->show_messages();

            }

            // Manually recalculate totals.  If you do not do this, a refresh is required before user will see updated totals when discount is removed.
            $woocommerce->cart->calculate_totals();

        } else {

            // Coupon is no longer valid, based on date.  Remove it.
            if ($woocommerce->cart->has_discount(sanitize_text_field($coupon_code))) {

                if ($woocommerce->cart->remove_coupons(sanitize_text_field($coupon_code))) {

                    $woocommerce->show_messages();

                }

                // Manually recalculate totals.  If you do not do this, a refresh is required before user will see updated totals when discount is removed.
                $woocommerce->cart->calculate_totals();

            }

        }

    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-26T09:27:19.233

> **自 Woocommerce 3 以来的**2017 / 2019****

 **一个挂钩函数中的以下紧凑代码将根据显示自定义消息的购物车总重量添加折扣（优惠券）。如果客户更改购物车项目，代码将检查购物车项目，如果购物车重量低于定义的重量，则删除折扣（优惠券）。

编码：

```
add_action('woocommerce_before_calculate_totals', 'discount_based_on_weight_threshold');
function discount_based_on_weight_threshold( $cart ) {
    if ( is_admin() && ! defined( 'DOING_AJAX' ) )
        return;

    if ( did_action( 'woocommerce_before_calculate_totals' ) >= 2 )
        return;

    // Your settings
    $coupon_code      = 'onweight10'; // Coupon code
    $weight_threshold = 100; // Total weight threshold

    // Initializing variables
    $total_weight     = $cart->get_cart_contents_weight();
    $applied_coupons  = $cart->get_applied_coupons();
    $coupon_code      = sanitize_text_field( $coupon_code );

    // Applying coupon
    if( ! in_array($coupon_code, $applied_coupons) && $total_weight >= $weight_threshold ){
        $cart->add_discount( $coupon_code );
        wc_clear_notices();
        wc_add_notice( sprintf(
            __("Your order is over %s so a %s Discount has been Applied! Your total order weight is %s.", "woocommerce"),
            wc_format_weight( $weight_threshold ), '10%', '<strong>' . wc_format_weight( $total_weight ) . '</strong>'
        ), "notice");
    }
    // Removing coupon
    elseif( in_array($coupon_code, $applied_coupons) && $total_weight < $weight_threshold ){
        $cart->remove_coupon( $coupon_code );
    }
} 
```

代码位于您的活动子主题（或活动主题）的 function.php 文件中。测试和工作。

[![在此处输入图像描述](https://i.stack.imgur.com/oF1ED.png)](https://i.stack.imgur.com/oF1ED.png)**

# php - 为什么我不能在函数后获取数组键值？

> ID：15744700
> 
> 赞同：2
> 
> 时间：2013-04-01T13:47:15.823
> 
> 标签：php, wordpress

我正在调用这个 WordPress 函数：

```
get_user_meta($user->ID, "user_address"); 
```

它返回数组，我不想将其放入变量中，而只是将其回显。

但这不起作用：

```
get_user_meta($user->ID, "user_address")[0]; 
```

为什么？有什么办法可以作为一个班轮做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:50:16.413

根据函数[引用](http://codex.wordpress.org/Function_Reference/get_user_meta)，您必须传递第三个参数`true`，以便它返回单个值。

```
get_user_meta($user->ID, "user_address",true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:50:27.977

在函数返回时立即解除对数组的引用是 PHP 5.4 中相对较新的特性。您很可能使用 5.3 或更早版本，在这种情况下，您无法立即访问函数调用返回的数组元素。

> 从 PHP 5.4 开始，可以直接对函数或方法调用的结果进行数组取消引用。以前只能使用临时变量。

[http://docs.php.net/manual/en/language.types.array.php](http://docs.php.net/manual/en/language.types.array.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:55:16.813

如果它是您需要的第一个元素：

```
echo array_shift(get_user_meta($user->ID, "user_address")); 
```

# drupal - 设置离线工作和上传到远程站点

> ID：15744701
> 
> 赞同：0
> 
> 时间：2013-04-01T13:47:17.497
> 
> 标签：drupal, editor, workflow

我目前正在使用 Komodo 编辑进行编码，并设置了我使用 MAMP 和本地安装的 Drupal 和 SASS 来离线构建我的网站。

一旦它准备好在线测试，我上传到远程站点。但是，然后我有时在远程站点上工作，有时在本地站点上工作，并发现了一些问题。

我没有在远程站点上使用 SASS，所以我在 CSS 文件中工作。我还没有代码中的所有 Drupal 面板，所以我不得不在远程站点上重建它们，并且我正在即时进行调整和更改。

我最终得到了两个略有不同的网站版本，并且需要跟踪我想要保留的两个版本的更改。我可以做些什么来清理我的工作流程？

如果我可以完全在本地工作，然后将其同步到远程环境，那就更好了。

使用Netbeans之类的东西，我想我可以运行该站点的本地副本，然后右键单击并将每个文件上传到远程服务器上，这样就有两个文件副本。

关于最干净的设置是什么，我可以提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:44:54.497

我有一个具有自己 ip 的实际开发服务器和一个具有自己 ip 的实时服务器，但它们都连接到同一个 mysql 服务器。设置了两个数据库，db1 和 db2。

我使用带有基本 sql 指令的 php 脚本来：

检查正在使用的数据库。备份该数据库（例如，db1）。同步数据库 将该数据库导入 db2。

完成后，我使用它：

```
cp webdb2.settings.php settings.php 
```

所以我总是有两个可用的数据库，如果出现问题，可以立即回滚（在本例中为 `cp webdb1.settings.php settings.php`：）。

这似乎是一个相当不错的系统。我只从事开发工作，然后通过上述过程将其推送到现场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:18:10.397

您可以做的最好的事情是离线工作，然后在必要时同步内容（主题/模块）。

如果您同时处理这两个问题，您可能会丢失数据或丢失对代码更改的跟踪。

# fedex - 如何计算 FedEx Smartpost 追踪号码的校验位

> ID：15744704
> 
> 赞同：1
> 
> 时间：2013-04-01T13:47:44.063
> 
> 标签：fedex, check-digit

FedEx Ground 的追踪号码有不同的数字：12、15、20、22。

12 位跟踪号码使用 mod 11 算法。其他人使用 mod 10 算法。

但最近我得到了一些 20 位数的 FedEx Smartpost 跟踪号码，这两种算法都无法识别。

那么，如何识别这些跟踪号？

样品跟踪号：7489999873402038xxxx 6129270107532465xxxx

* * *

我想通了。

见：http: [//images.fedex.com/us/software/pdf/FedEx_SmartPost_Job_Aid_v2600_06222012.pdf](http://images.fedex.com/us/software/pdf/FedEx_SmartPost_Job_Aid_v2600_06222012.pdf) [https://www.pdffiller.com/en/project/10655396.htm](https://www.pdffiller.com/en/project/10655396.htm)

22 位跟踪号码删除 2 位应用程序标识符（91 或 92）。我们需要在 mod 10 算法之前将应用程序标识符添加到跟踪号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:29:50.507

20 位代码需要在代码前加 91（旧）或 92（新）。预先挂起这些并应用 IMpb 标准使用的标准 mod-10 算法。

# ajax - 使用 AJAX/JSON 创建 highcharts 图表

> ID：15744709
> 
> 赞同：1
> 
> 时间：2013-04-01T13:48:21.093
> 
> 标签：ajax, json, highcharts, yql, highstock

我正在构建一个使用 Highcharts 库来显示单线系列图表的网站。我正在使用 AJAX 使用他们的 YQL 从 yahoo Finance 检索历史财务数据。

ajax 调用工作正常，例如我可以在控制台中查看返回的数据

`console.log( data.query.results.quote[0].Close );` 返回收盘价`457.84`

我现在如何使用这些数据构建单线系列图表？

我在任何地方都找不到关于如何使用 AJAX 数据创建图表的简单解释。

谢谢

编辑：我在 AJAX 中获取数据并且它工作正常，但是试图使图表与 JSON 一起工作是我遇到困难的地方。

这是我的代码目前的样子：http: [//jsfiddle.net/JbGvx/](http://jsfiddle.net/JbGvx/)

这是 HighStocks 网站上的演示代码：http: [//jsfiddle.net/xDhkz/](http://jsfiddle.net/xDhkz/)

我认为问题在于 AJAX 请求的日期格式。日期像这样返回 2013-02-25 但图表需要 JS 时间戳。有没有一种方法可以从 AJAX 中提取日期，使用 Date.UTC 进行转换，然后使用转换后的数据制作图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:24:43.090

如果您正在考虑股票数据，请考虑使用 HighStocks 而不是 HighCharts。它可以比 HighCharts 更快地处理许多数据点。

HighStocks 有一个例子，他们在这里异步提取 AJAX 数据（160 万点）：[http ://www.highcharts.com/stock/demo/lazy-loading](http://www.highcharts.com/stock/demo/lazy-loading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T15:30:42.433

```
var chartSeriesData = [];

var chartCategory = [];

$.each(response, function() {

  if(this.name!="TOTAL" && this.no!="0")
  {

    var series_name = this.name;
    var series_data = this.no;

    var series = [
      series_name,
      parseFloat(series_data)
    ];
    chartSeriesData.push(series);   

  }                   

});
//initialize options for highchart

var options = {
  chart: {
    plotBackgroundColor: null,
    plotBorderWidth: null,
    plotShadow: false
  },
  title: {
    text: 'SalesOrder '
  },
  tooltip: {
    pointFormat: '{series.name}: <b>{point.y}</b>'
  },
  plotOptions: {
    pie: {
      allowPointSelect: true,
      cursor: 'pointer',
      center:['60%','60%'],
      size:150
      ,
      dataLabels: {
        enabled: true,
        color: '#000000',
        distance: 40,
        connectorColor: '#000000',
        format: '<b>{point.name}</b>: {point.y} '
      }
    }
  },
  series: [{
    type: 'pie',
    name: 'Browser share',
    data:chartSeriesData //load array created from json
  }]
}

//options.series[0].setData(datavaluejson);
var chart= $('#container').highcharts(options); 
```

# java - 如何将过滤器设置为 AutoCompleteTextView？

> ID：15744715
> 
> 赞同：0
> 
> 时间：2013-04-01T13:48:38.267
> 
> 标签：java, android, adapter, autocompletetextview, textwatcher

我在arrayList allDoctorsAndSpecialities 中有一些数据。

在我的 Oncreate 方法中，我为我的 autotxt(AutoCompleteTextView) 设置了适配器和阈值 (3)

但是，我的问题是我不想显示在编辑文本中输入的字符串的下拉列表，例如“dr.”、“dr.”等。

以下是我尝试过的解决方案

1）代码：

```
autotxt.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }             

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            if(autotxt.getText().toString().equals("dr.")){
                autotxt.dismissDropDown();
            }
        }
    }); 
```

问题 - 它不能像 'Docname DocSurname' 这样的组合使用

2）[AutoCompleteTextView过滤问题](https://stackoverflow.com/questions/6570764/autocompletetextview-filter-problem)

问题 - 它不适用于我的问题

3)[在 Android 中扩展过滤器时如何使用 publishResults() 方法？](https://stackoverflow.com/questions/6067446/how-do-i-use-publishresults-method-when-extending-filters-in-android/11204620#11204620)

问题-我不明白如何为 performFiltering 方法设置约束

请建议我如何进行。提前致谢

# c# - 将 VB.Net Linq 转换为 C# Linq

> ID：15744716
> 
> 赞同：0
> 
> 时间：2013-04-01T13:48:42.067
> 
> 标签：c#, vb.net, linq

试图将以下 VB.net Linq 转换为 C# Linq

```
Dim query =
    From row In dt.AsEnumerable
    Group row By G = New With {.Price = row.Field(Of Double?)("price")}.Price,
                  New With {.Cat = row.Field(Of Integer?)("category")}.Cat
                 Into ProductGroups = Group 
```

我尝试了一些网站，但没有一个按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:44:51.977

在线转换器没有处理这个问题，所以这一定会让你感到沮丧。试试这个：

```
var query = from row in dt.AsEnumerable
            group row by new {Price = row.Field<double?>("price")}.Price, new {Cat = row.Field<int?>("category")}.Cat into g
            select new {G = g.Key, g}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:00:23.277

为了回答您的问题而不是为您转换它。确保在转换器中使用正确的语法。

这是您要转换的内容：

```
Dim query = _
From row In dt.AsEnumerable _
Group row By G = New With {.Price = row.Field(Of Double?)("price")}.Price, _
              New With {.Cat = row.Field(Of Integer?)("category")}.Cat _
             Into ProductGroups = Group 
```

即使在 VB2012 中不需要它，但在转换器中似乎仍然使用该`_`字符来指定该行上的语句不完整。

您现在可以使用[问题评论中列出的链接](http://developerfusion.com/tools/convert/vb-to-csharp)进行转换。

# javascript - 三.JS路径跨平面

> ID：15744717
> 
> 赞同：0
> 
> 时间：2013-04-01T13:48:47.470
> 
> 标签：javascript, three.js

我有一个非常简单的 Three.js 场景：[点击](http://jsfiddle.net/paulsidebottom/aQEdH/)

通过提供来自 2D 空间的一系列向量（从相机视图 0、0、200 绘制），例如，`{from:{x,:0, y:10}, to:{x:50,y:50}}`我希望能够在平面对象的面上绘制一条路径，就像下面的示例图像所示：

![在此处输入图像描述](https://i.stack.imgur.com/YkvmJ.jpg)

一般来说，我对 Three.JS/3D 相当陌生，并且已经查看了 Vector3 和路径对象，但承认我有点卡在从哪里开始 - 任何人都可以提供任何建议或理想情况下对我发布的 JSFiddle 进行简单更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:29:41.633

我已经更新了你的 JSFiddle 来做你想做的事（我认为）：http: [//jsfiddle.net/evgeni_popov/uBQnS/3/](http://jsfiddle.net/evgeni_popov/uBQnS/3/)

路径在`path`变量中。这些线是用 Z=1 绘制的，因此它们不会卡在 Z=0 处的平面中。

我已将您更改`MeshLamberMaterial`为，`MeshBasicMaterial`以便我们可以更好地看到线条。

# javascript - 在 JavaScript 中从父级调用子方法

> ID：15744720
> 
> 赞同：2
> 
> 时间：2013-04-01T13:48:57.847
> 
> 标签：javascript, inheritance, prototypal-inheritance

我有一个 JavaScript 类，我想通过创建一个子类来覆盖父方法。但是，我正在努力研究如何从父上下文中调用子方法。

这是我父母的精简版：

```
// "rules" is a global hash

function ForumFilter() {
    this.scanText = function(title, body) {
        // Save 'this' context, as each() overwrites it
        var that = this;
        // This is jQuery each()
        $.each(rules, function(ruleName, rule) {
            // rule.search is a regex
            var match = rule.search.test(body);
            if (match)
            {
                that.isPassed = false;
                // ** I'd like to call a child method here,
                // ** but it only calls the method in this class
                that.setRuleFailed(ruleName);
            }
        });
    }

    this.setRuleFailed = function(ruleName) {
        this.failedRules.push(ruleName);
    }
} 
```

这是我对孩子的尝试：

```
ForumFilterTest.prototype = new ForumFilter();
ForumFilterTest.prototype.setRuleFailed = function(ruleName) {
    // Call parent
    ForumFilter.setRuleFailed(ruleName);
    // Record that this one has triggered
    this.triggered.push(ruleName);
} 
```

这是我从子实例调用我的父方法：

```
var scanner = new ForumFilterTest();
scanner.scanText("Hello", "Hello"); 
```

因此， in `scanText`（仅存在于父级中）它可能会调用`setRuleFailed`，这应该调用版本 in `ForumFilterTest`，而版本又会调用它覆盖的类。因此，正如它的名字所暗示的那样，我试图向父级添加一个行为以进行测试，所以我当然希望`ForumFilter`在它自己实例化的情况下使用父方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:53:34.637

在更好地理解您的问题之后，这是我实际提出的更改。具体来说，您需要将`ForumFilter`方法移至其`prototype`. 这将允许`ForumFilterTest`方法显式引用`ForumFilter`方法。

**第 1 步：**将`ForumFilter`方法移至其`prototype`.

```
function ForumFilter() {}
ForumFilter.prototype.scanText = function(title, body) {
    // Save 'this' context, as each() overwrites it
    var that = this;
    // This is jQuery each()
    $.each(rules, function(ruleName, rule) {
        // rule.search is a regex
        var match = rule.search.test(body);
        if (match)
        {
            that.isPassed = false;
            // ** I'd like to call a child method here,
            // ** but it only calls the method in this class
            that.setRuleFailed(ruleName);
        }
    });
};
ForumFilter.prototype.setRuleFailed = function(ruleName) {
    this.failedRules.push(ruleName);
}; 
```

**第 2 步：**在需要时显式引用`ForumFilter`“父”方法：

```
// "child class" implementation
function ForumFilterTest() {}
ForumFilterTest.prototype = new ForumFilter();
ForumFilterTest.prototype.setRuleFailed = function(ruleName) {
    // Call parent
    ForumFilter.prototype.setRuleFailed.call(this, ruleName);
    // Record that this one has triggered
    this.triggered.push(ruleName);
}; 
```

# ruby-on-rails - 缺少 PG 标头（尝试使用 Brew 为 Rails 安装 Postgres gem）

> ID：15744722
> 
> 赞同：2
> 
> 时间：2013-04-01T13:49:08.873
> 
> 标签：ruby-on-rails, postgresql, osx-mountain-lion, pg

```
checking for libpq-fe.h... *** extconf.rb failed *** 
```

似乎是问题所在，它来自这条尾巴：

```
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /Users/elephanttrip/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/local/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我在 Mountain Lion Mac OS 上重现此问题的步骤是：

1.  `brew install postgresql`
2.  `env ARCHFLAGS="-arch x86_64" gem install pg`

我试图通过我的计算机查明不同的 pg_config。一个在 Brew 的地窖里，一个由 Brew cp'd to `/user/local`，另一个可能来自之前的下载。它们都不起作用。

**更新**

只是尝试在没有配置选项的情况下安装。并得到了一个大声笑：

```
ruby extconf.rb --without-pg-config
checking for pg_config... yes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:18:39.317

我开始想象我的问题与它所说的跟踪底部的 RVM 有关..：

```
"You need to download development tools" 
```

然后我做了：

```
$ rvm autolibs enable
$ rvm requirements 
```

然后我继续更新了我的红宝石（如果你不这样做，那么我建议你重新安装你当前的红宝石。*没有我不能这样做`autolibs enable`*）：

```
$ rvm install ruby-2.0.0-p0 
```

繁荣！解决了！！！！`(:D :D :D :D :D) x 1,000,000`

# ios - 有没有办法检索使用我的应用进行的应用内购买列表？

> ID：15744729
> 
> 赞同：0
> 
> 时间：2013-04-01T13:49:42.367
> 
> 标签：ios, in-app-purchase

假设有一个带有应用内购买的应用，它使用网络服务器来验证 Apple 的应用内购买并保存记录。假设 Web 服务器有错误并且没有正确处理购买验证。假设发现并修复了该错误。

Apple 是否提供任何类型的 API 来检索应用程序的购买列表，以便可以重新运行验证并将最终用户的购买记入信用？到目前为止，像“ios 应用内购买检索购买列表”这样的谷歌搜索并没有出现太多。

（是的，所说的应用程序应该已经记录了该信息，从而使对此类 API 的需求无效）。

编辑：要清楚，我正在寻找是否有办法从我的购买验证服务器执行此操作，而不涉及客户端设备。

# git - 如何从多个私有 GitHub 存储库触发 Jenkins 构建？

> ID：15744730
> 
> 赞同：1
> 
> 时间：2013-04-01T13:49:44.063
> 
> 标签：git, jenkins, continuous-integration, hudson

我有一个配置为构建多个项目的 Jenkins 盒子，这些项目在 GitHub 上私有托管。每个项目都被分配了自己的部署密钥，并通过[这个答案](https://stackoverflow.com/questions/5212304/authenticate-jenkins-ci-for-github-private-repository)`~/.ssh/config`中提到的别名。

但是，现在我正在尝试通过 GitHub 插件的 web 挂钩设置触发构建`https://user:pass@myci.example.com/github-webhook`，但看起来我遇到了问题，因为我的作业配置了诸如此类的存储库，`github-my-project:zacharydanger/my-project.git`并且插件无法识别它们，因为它正在尝试匹配它作为`git@github.com:zacharydanger/my-project.git`.

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:06:26.627

好吧。看起来没有*解决方法*，但是[这个关于管理部署密钥的 GitHub 支持页面](https://help.github.com/articles/managing-deploy-keys)说你可以创建一个用户帐户进行部署。因此，我已将 Jenkins 的默认公钥添加到帐户中，并授予它对需要构建的私有存储库的访问权限。

# c++ - 如何将 Mat 复制到 ROI？

> ID：15744731
> 
> 赞同：0
> 
> 时间：2013-04-01T13:49:47.003
> 
> 标签：c++, opencv

我对 OpenCV 完全陌生，我正在尝试使用 OpenCV 将像素缓冲区复制到屏幕的一部分。

我这样做：

```
//In the beginning I allocate the screen buffer and create a Mat for it
void initScreen(int screenWidth, int screenHeight) {

      pixels = new uint8_t[screenWidth*screenHeight*BITS_PER_PIXEL];
      screenMat = new Map(Size(screenWidth, screenHeight), PIXEL_FORMAT);
      screenMat->data = pixels
}

// Here I'm getting the pixel data to display on screen and coords where they should be displayed
void onDisplayPixels(int l, int t, int w, int h, void* newPixels) 
{
      // So I set a ROI at my screen Map
      Mat roi(screenMat, cv::Rect(l, t, w, h));

      // And I create a new Mat for the new pixels 
      Mat newPixelsMat(Size(w, h), newPixels, PIXELS_FMT);

      // Now I need to copy newPixelsMat to roi 
      **But how do I do that??**
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:13:55.187

只需像这样使用[Mat::copyTo()](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-copyto)：

```
newPixelsMat.copyTo(roi); 
```

# java - 在 Maven 中添加 Selenium-java-2.31.0 库后 Java 代码抛出异常

> ID：15744732
> 
> 赞同：0
> 
> 时间：2013-04-01T13:49:49.817
> 
> 标签：java, exception, maven-3, selenium-webdriver

我正在研究 Netbeans。我添加了一个库 selenium-java-2.31.0。但它显示异常。我添加了这个库所依赖的所有库。

我按照此[链接](http://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/2.31.0)在 netbeans 中添加库。

**我的代码：-**

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Iterator;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public static void main(String[] args) throws IOException, URISyntaxException {
        String url1 = "http://www.jabong.com/giordano-P6868-Black-Analog-Watch-183702.html";

        Document doc1 = Jsoup.connect(url1).get();

        WebDriver driver = new FirefoxDriver();
        driver.get(url1);  

        Elements tag_list = doc1.getAllElements();

        for( Element tag1 : tag_list ) {
            Point point=driver.findElement(By.id(tag1.id())).getLocation();  
            System.out.println("X Position : " + point.x);  
            System.out.println("Y Position : " + point.y);

        }
} 
```

**例外**

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/google/common/base/Function
    at template_matching.Template_matching.main(Template_matching.java:275)
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Function
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more
Java Result: 1
BUILD SUCCESSFUL (total time: 2 seconds) 
```

帮我解决这个问题。为什么会抛出这个异常？

**编辑 1**

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/json/JSONException
    at org.openqa.selenium.firefox.FirefoxProfile.<init>(FirefoxProfile.java:89)
    at org.openqa.selenium.firefox.FirefoxProfile.<init>(FirefoxProfile.java:79)
    at org.openqa.selenium.firefox.FirefoxProfile.<init>(FirefoxProfile.java:67)
    at org.openqa.selenium.firefox.FirefoxDriver.getProfile(FirefoxDriver.java:260)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:236)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:190)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
    at template_matching.Template_matching.main(Template_matching.java:275)
Caused by: java.lang.ClassNotFoundException: org.json.JSONException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 11 more
Java Result: 1 
```

**编辑 2**

现在我转向 maven，认为它会下载所有依赖库。但现在它显示了不同的错误。

![在此处输入图像描述](https://i.stack.imgur.com/rWMpU.jpg)

**编辑第 3 号**

由于它显示了 firefox 的一些问题，我用 Chrome 替换了 firefox。这次删除了先前的错误。但是一个新的出现了。请看这个。

![在此处输入图像描述](https://i.stack.imgur.com/v2P0O.jpg)

**编辑编号 4**

![在此处输入图像描述](https://i.stack.imgur.com/N18UZ.jpg)

**编辑第 5 号**

现在我再次转移到Firefox，并获得了页面，但它卡住了。为什么 ？

下面是我得到的错误快照。

![在此处输入图像描述](https://i.stack.imgur.com/Dfmdk.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:09:00.787

我相信您此时看到的问题是由于您传入了 driver.get("url1");

我认为您的意思是传入 driver.get(url1); （注意不要加引号）

稍微扩展一下，它抛出格式错误的 uri 异常的原因是传入的 uri (url1) 不包含任何协议 (http/https)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:07:28.030

我认为您可以创建一个 Maven 项目来解决与硒相关的依赖问题。

# c# - 在刻度中间停止计时器

> ID：15744736
> 
> 赞同：2
> 
> 时间：2013-04-01T13:50:05.427
> 
> 标签：c#, timer

我想停止计时器，但在滴答声的中间，在滴答声完成之前。但是当我使用一个按钮来停止计时器时，它只会在滴答声完成他的所有功能后才会停止。

我正在使用 4 个单选按钮和一个不断更改所选单选按钮的计时器。当我按下停止按钮时，我的计时器停止，我需要知道选择了哪个单选按钮，但计时器只是在滴答完成后停止，所以选定的单选按钮会改变。

代码是：

```
namespace teste_bola
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Int32 x = 1000;

        private void ini_Click(object sender, EventArgs e)
        {

            timer1.Enabled = true;
        }

        private void par_Click(object sender, EventArgs e)
        {
            timer1.Enabled = false;
        }
        private void t_Click(object sender, EventArgs e)
        {
            Int32 Intervalo = Convert.ToInt32(tb.Text);
            x = Intervalo;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            r3.Select();
            System.Threading.Thread.Sleep(x);
            r2.Select();
            System.Threading.Thread.Sleep(x);
            r1.Select();
            System.Threading.Thread.Sleep(x);
            r2.Select();
            System.Threading.Thread.Sleep(x);
            r3.Select();
            System.Threading.Thread.Sleep(x);
            r4.Select();
            System.Threading.Thread.Sleep(x);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:51:29.747

您可以引入一个标志`bool shouldStop`，在单击按钮时设置它，并从`Tick`处理程序中检查它。如果是真的，那么就退出该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:02:17.083

我没有遵循您在代码中尝试完成的操作，但在我看来，您没有正确使用计时器。

您应该执行以下操作：

在每个计时器上。勾选更改选定的单选框。

你实际上在做的是：

在每个计时器上。勾选所有单选框的更改，更改之间有时间间隔。

这意味着在第一个计时器超时时执行滴答代码。在第二个计时器超时时，第一个滴答作业尚未完成。

至少可以说，这将导致不稳定的行为。

我的建议。将单选按钮添加到 ArrayList。然后 cicle 在 Timer 刻度上的每个 ArrayList 项之间进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:58:05.083

尝试以下

```
private void timer1_Tick(object sender, EventArgs e)
    {
        r3.Select();
        System.Threading.Thread.Sleep(x);
        if(timer1.Enabled == false) return;
            r2.Select();
            System.Threading.Thread.Sleep(x);
            if(timer1.Enabled == false) return;
            r1.Select();
            System.Threading.Thread.Sleep(x);
            if(timer1.Enabled == false) return;
            r2.Select();
            System.Threading.Thread.Sleep(x);
            if(timer1.Enabled == false) return;
            r3.Select();
            System.Threading.Thread.Sleep(x);
            if(timer1.Enabled == false) return;
            r4.Select();
            System.Threading.Thread.Sleep(x);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:58:58.457

您可能会遇到这种行为，因为您的线程在执行 timer1_Tick 期间处于休眠状态，因此可能存在事件队列。

正如 alex 建议的那样，您可以添加一个标志，但您应该在每次睡眠后检查它，或者更好的是，将您的动画放在不同的线程中。

# entity-framework - 集成测试实体框架 CRD 操作

> ID：15744737
> 
> 赞同：0
> 
> 时间：2013-04-01T13:50:09.600
> 
> 标签：entity-framework, integration-testing, crud

使用实体框架时，我正在为集成测试而苦苦挣扎。

我在我的测试项目中使用测试数据为我的数据库播种，但我想知道您如何管理测试创建、更新和删除操作。

基本上我有我的测试数据，例如包含 5 个客户条目......我现在可以编写一些单元测试来获取基于这 5 个条目的数据。（例如，get all 将返回一个包含 5 个项目的集合）。

但是如果我有一个删除 1 个客户的测试，这意味着 GetAll 测试将期望 5 个客户，但只返回 4 个（如果此测试在删除测试之后执行）并且失败。

你如何解决这个问题？您是否在每次测试之前为您的测试指定特定顺序或重新设置数据库（但这听起来很糟糕？）...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T09:16:31.407

一个有效的方法是使用[Transaction Scope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)。如果在未调用 Complete 方法的情况下释放了范围，这基本上会包装所有 sql 调用并回滚更改。基本测试将如下所示。

```
public class TransactionalTestsBase
{
    private TransactionScope _scope;

    [TestInitialize]
    public void Initialize()
    {
        _scope = new TransactionScope();
    }

    [TestCleanup]
    public void TestCleanup()
    {
        _scope.Dispose();
    }

    [TestMethod]
    public void CrudAction()
    {
        var repo = new YourRepo();
        var client = ; // Make client
        repo.DeleteClient(client);
        Assert.AreEqual(4,repo.GetClients().Count());
    }
} 
```

理想情况下，您将从这个基础测试类继承而不是在其中编写测试。

测试版中仍有一些新的热度，我认为这将在未来对此有很大帮助。看看[努力](http://effort.codeplex.com/)

# sql - 选择唯一记录并在 rails 中显示为类别标题

> ID：15744741
> 
> 赞同：1
> 
> 时间：2013-04-01T13:50:18.913
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord, sql-order-by

我有一个在 PostgreSQL 上运行的 rails 3.2 应用程序，并且有一些我想在视图中显示的数据，这些数据以这种结构存储在数据库中：

```
+----+--------+------------------+--------------------+
| id | name   | sched_start_date | task               |
+----+--------+------------------+--------------------+
| 1  | "Ben"  | 2013-03-01       | "Check for debris" |
+----+--------+------------------+--------------------+
| 2  | "Toby" | 2013-03-02       | "Carry out Y1.1"   |
+----+--------+------------------+--------------------+
| 3  | "Toby" | 2013-03-03       | "Check oil seals"  |
+----+--------+------------------+--------------------+ 
```

我想显示每个名称的任务列表，以及按名称排序的名称`ASC`，`sched_start_date`它们应该看起来像......

```
本
2013-03-01 – 检查碎片

托比
2013-03-02 – 开展Y1.1
2013-03-03 – 检查油封

```

我开始采用的方法是对唯一名称运行查询并将它们排序`sched_start_date ASC`，然后对每个名称运行查询以获取它们的任务。

要获取唯一名称列表，SQL 应如下所示。

```
select * 
from (
   select distinct on (name) name, sched_start_date 
   from tasks
) p 
order by sched_start_date; 
```

我想知道这是否是正确的方法（查询唯一名称，然后为他们的所有任务运行另一个查询），或者是否有更好的 rails 方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:20:02.287

要像您描述的那样对数据进行排序，您可能希望在子句中使用`min()`as [window function ：](http://www.postgresql.org/docs/current/interactive/functions-window.html)`ORDER BY`

```
SELECT name, sched_start_date, task
FROM   tasks
ORDER  BY min(sched_start_date) OVER (PARTITION BY name), 1, 2, 3 
```

您的原始查询需要一个额外的`ORDER BY`项目来获取每个名称的最早日期：

```
SELECT DISTINCT ON (name) name, sched_start_date, task
FROM   tasks
ORDER  BY 1, 2, 3; 
```

我还添加了`task`( `3`) 作为打破关系的最后`ORDER BY`一项，以防每个日期有多个。

但输出仍按 排序`name`，而不是按排序`date`。

将所有数据填充到一列中的特殊格式有点复杂：

```
SELECT one_col
FROM  (
    WITH x AS (
        SELECT name, min(sched_start_date) AS min_start
        FROM   tasks
        GROUP  BY 1
        )
    SELECT 2 AS rnk, name
          ,sched_start_date::text || ' – ' || task AS one_col
          ,sched_start_date, min_start
    FROM   tasks
    JOIN   x USING (name)

    UNION ALL
    SELECT 1 AS rnk, name, name, NULL::date, min_start
    FROM   x

    ORDER  BY min_start, name, rnk, sched_start_date, task
    ) y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:54:45.273

假设您的模型中有关联，您将能够运行

```
@employees = Employee.order(:name, :sched_start_date, :task).includes(:tasks) 
```

然后你可以遍历它们：

```
@employees.each do |employee|
  employee.name
  employee.tasks.each do |task|
    task.name
  end
end 
```

这不会完全符合您的需求，但应该告诉您从哪里开始。

# asp.net - 带有 .asmx webservice 的单例模式 asp.net webproject

> ID：15744746
> 
> 赞同：0
> 
> 时间：2013-04-01T13:50:28.247
> 
> 标签：asp.net, web-services, singleton, asmx

我正在.net 项目中实现连接池我在我的asp.net 项目中有一个.asmx webservice，用于获取connectionID。我添加了一个类 TicketManager.cs 我使用下面的单例

```
 private static readonly TicketManager TicketManagerInstance=new TicketManager();
    public static TicketManager GetTicketManagerInstance()
    {
        return TicketManagerInstance;
    } 
```

.使用我的网络服务，我进行操作以获得票证。但是当我在 IIS 中部署这个项目时，我得到了不同的结果。我有一个网络方法来列出 USE 中的当前连接。当我尝试获取这个时。我在不同的请求上看到不同的结果.我怀疑我的单例类可能会被多次实例化。你能提出一些建议吗？我应该如何让它在多线程环境中工作？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-16T12:52:29.843

最后，我使用只有 1 个工作进程的应用程序池并将票证保存在数据库中

# mysql - 从表中插入缺失的记录

> ID：15744748
> 
> 赞同：0
> 
> 时间：2013-04-01T13:50:32.490
> 
> 标签：mysql

我有两个表`users` *(id, username, etc...)*和`user_contacts` *(id, userid, contactid, etc...)*。

鉴于我`user`的 id 为 84，为了将缺失的记录插入到84 与所有其他用户`user_contacts`相关联，最有效的查询是什么？`user`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:58:41.783

鉴于您最近的评论，那么这应该有效：

```
insert into user_contacts (userid, contactid)
select u.id, 84
from users u 
   left join user_contacts uc on u.id = uc.userid and uc.contactid = 84
where uc.id is null 
```

这将在 user_contacts 表中为当前没有联系人 ID 为 84 的行的每个用户插入一行。确保正确指定列。

或者，您可以使用`NOT IN`or `NOT EXISTS`。例如，

```
insert into user_contacts (userid, contactid)
select u.id, 84
from users u
where u.id not in (
    select userid 
    from user_contacts 
    where contactid = 84) 
```

# javascript - jQuery mouseenter() 和 mouseleave()

> ID：15744751
> 
> 赞同：0
> 
> 时间：2013-04-01T13:50:53.353
> 
> 标签：javascript, jquery, html, mouseenter, mouseleave

所以我得到了这个演示导航，它的侧面有一个小按钮，当你悬停按钮时，它会将菜单滑入窗口。虽然我已经让悬停工作，但现在当鼠标离开时，它仍然是打开的。如何解决这个问题？顺便说一句，我对 jQuery 很陌生

这是html：

```
<div id="demoNav">
    <button class="open"></button>
    <ul>
        <li><a href="index.html">Home Pagina</a></li>
        <li><a href="product.html">Product Pagina</a></li>
        <li><a href="bestel.html">Bestel Pagina</a></li>
    </ul>
</div> 
```

还有我的 jQuery：

```
$("#demoNav").mouseenter(function(){
       $("#demoNav").animate({marginLeft:'0px'}, 500)
}); 
```

如果您需要更多信息，请告诉我，我会提供更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:54:54.523

你实际上并没有告诉它再次隐藏。

也就是说，我想推荐这个 CSS 替代方案：

```
#demoNav {
    transition:margin-left 0.5s ease;
    -webkit-transition:margin-left 0.5s ease;
}
#demoNav:hover {
    margin-left:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:05:19.077

试试这个：

```
$("#demoNav").hover(

function () {
    $(this).animate({
        marginLeft: '0px'
    }, 500)
},

function () {
    $(this).animate({
        marginLeft: '50px'
    }, 500)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:54:07.700

添加 mouseleave 事件 -

```
$('#demoNav').mouseleave(function(){
   $("#demoNav").animate({marginLeft:'50px'}, 500)
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:54:10.380

使用 jQuery：

```
$("#demoNav").hover(function(){
    // do something when mouse hover           
},function(){
    //do some thing when mouseout
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T13:58:42.317

您编码`mouseenter`但忘记编码`mouseleave event`

在 jQuery 中添加这些行

```
$("#demoNav").mouseleave(function(){
       $("#demoNav").animate({'marginLeft':'50px'}, 500)
}); 
```

这里的工作示例：

[http://jsfiddle.net/EP6wR/](http://jsfiddle.net/EP6wR/)

但我会建议使用更清洁的悬停方法

```
syntax: $(selector).hover(handlerIn, handlerOut) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T14:23:20.423

可能这个解决方案有效

```
 $('#demoNav .open').on("mouseenter", function(){  $(this).parent().animate({marginLeft:'0px'}, 500); });
 $('#demoNav').on("mouseleave", function(){  $(this).animate({marginLeft:'50px'}, 500); }); 
```

这将在按钮悬停时激活窗格，但是当您离开 div 时，它会再次向左移动

# ruby - 在rspec中删除哈希数组中的元素

> ID：15744754
> 
> 赞同：0
> 
> 时间：2013-04-01T13:51:11.980
> 
> 标签：ruby, ruby-on-rails-3, rspec

这是我的 rspec 代码：-

```
 it "should match with valid address" do
    get :index, Devise.token_authentication_key => @user.authentication_token, business_id: @business2.id
    expect(response.status).to eq(200)
    expect(response.body).to eq([@location].to_json(LocationFinder::API_PARAMS.merge(:root => false)))
  end 
```

预期的：

```
 "[
   {
   \"address\":\"1120 Milky Way\",
   \"business_id\":1,
   \"city\":\"Cupertino\",
   \"latitude\":\"2.4\",
   \"longitude\":\"2.9\",
   \"name\":\"Joe's Diner\"
   }
  ]" 
```

得到：

```
 "[
   {
   \"address\":\"1120 Milky Way\",
   \"business_id\":1,
   \"city\":\"Cupertino\",
   \"latitude\":\"2.4\",
   \"longitude\":\"2.9\",
   \"name\":\"Joe's Diner\",
   \"distance\":712.7948793
   }
  ]" 
```

如何将“距离”字段删除到包含哈希值的数组中。所以我的测试会成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:00:40.873

`key`您可以使用该方法从该哈希中删除 a `delete`，例如：

```
require 'json'
a = "[
   {
   \"address\":\"1120 Milky Way\",
   \"business_id\":1,
   \"city\":\"Cupertino\",
   \"latitude\":\"2.4\",
   \"longitude\":\"2.9\",
   \"name\":\"Joe's Diner\",
   \"distance\":712.7948793
   }
  ]"

  a = JSON.parse(a)
  a[0].delete "distance"
  p a

  #output:

  # [{"address"=>"1120 Milky Way", "business_id"=>1, "city"=>"Cupertino", "latitude"=>"2.4", "longitude"=>"2.9", "name"=>"Joe's Diner"}] 
```

# wcf - 使用 Azure ACS 2.0 保护 WCF 4.5 服务

> ID：15744763
> 
> 赞同：1
> 
> 时间：2013-04-01T13:51:53.383
> 
> 标签：wcf, azure, acs, ws-federation, ws-trust

如何使用 Azure ACS 2.0 保护我的 WCF 4.5 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:43:08.670

这是一个基本教程：[WCF (SOAP) Service With Federated Authentication](http://social.technet.microsoft.com/wiki/contents/articles/4027.wcf-soap-service-with-federated-authentication.aspx)
然后您可以在此处查看 Dominick Baier 和 Brock Allen 的示例：[Thinktecture.IdentityModel.45](https://github.com/thinktecture/Thinktecture.IdentityModel.45/tree/master/Samples)。

您也可以尝试使用 Visual Studio 工具添加 STS 引用并将其指向 Azure ACS。对于客户端证书身份验证，AFAIK 端点 Uri 是这样的：

```
https://myacsnamespace.accesscontrol.windows.net/v2/wstrust/13/certificate 
```

更多示例位于此处：[Windows Azure AD 访问控制 (ACS) 代码示例](http://code.msdn.microsoft.com/Windows-Azure-AD-Access-0dcde385/sourcecode?fileId=71587&pathId=477793108)

如果您有问题，请考虑将它们作为单独且更具体的主题提出。

# java - 如何从网址下载图片？

> ID：15744766
> 
> 赞同：1
> 
> 时间：2013-04-01T13:52:05.343
> 
> 标签：java, android

我想从 reome URL 下载图像，但出现 SSL 错误

```
 String imgURL="http://whootin.s3.amazonaws.com/uploads/upload/0/0/23/82/Note_03_26_2013_01_10_55_68.jpg?AWSAccessKeyId=AKIAJF5QHW2P5ZLAGVDQ&Signature=Za4yG0YKS4%2FgoxSidFsZaAA8vWQ%3D&Expires=1364888750";

   final ImageView  ivCurrent;
   ivCurrent = (ImageView)findViewById(R.id.imageView1);

  // calling DownloadAndReadImage class to load and save image in sd card

     DownloadAndReadImage dImage= new DownloadAndReadImage(imgURL,1);

     ivCurrent.setImageBitmap(dImage.getBitmapImage()); 
```

错误：

```
javax.net.ssl.SSLException: Read error: ssl=0x19a4a0: I/O error during system call, Connection reset by peer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:59:09.817

您的问题毫无意义，因为我们对类一无所知`DownloadAndReadImage`，顺便说一句，我认为您需要在清单中添加这两个权限：

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

***PS 如果您正在寻找一个很棒的`ImageLoder`库，我建议您使用 Android Universal Image Loader：***

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:58:20.563

在我的项目中，我使用`InputStreams`以下方式下载图像并将其存储在 SD 卡中：

```
URL url = new URL(imageUrl);

InputStream input = url.openStream();

try {

    // The sdcard directory e.g. '/sdcard' can be used directly, or
    // more safely abstracted with getExternalStorageDirectory()
    String storagePath = Environment.getExternalStorageDirectory()
                                    .getAbsolutePath();

    int barIndex = imageUrl.indexOf("/");
    String path = imageUrl.substring(barIndex + 1) + ".jpg";

    String sdcardPath = storagePath + "/myapp/";

    File sdcardPathDir = new File(sdcardPath);

    sdcardPathDir.mkdirs();

    OutputStream output = new FileOutputStream(sdcardPath + imagemId + ".jpg");

    try {
        byte[] buffer = new byte[4 * 1024];
        int bytesRead = 0;
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
            output.write(buffer, 0, bytesRead);
        }
    } finally {
        output.close();
    }

} finally {
    input.close();
} 
```

正如@NullPointer 指出的那样，不要忘记检查清单文件：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:07:22.133

您正在连接到 HTTPS/HTTP URL，并且该站点提供的 SSL 证书不受您运行代码的设备的信任。

[建立对 Apache HTTP 客户端的信任](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)。

# c++ - X-Plane 以 3D 模式启动（插件 C/C++）

> ID：15744768
> 
> 赞同：1
> 
> 时间：2013-04-01T13:52:21.703
> 
> 标签：c++

我想以 3D 模式（3D 驾驶舱）启动 X-Plane 10，所以我创建了这个插件，但它不起作用。怎么了？我检查了 X-Plane 日志，插件加载成功。

```
/* This X-Plane plugin will enable 3D cockpit when X-Plane is started */

#pragma warning(disable: 4996) // Suppress warnings about unsafe operations in VS

#include <string.h>
#include <windows.h>
#include "XPLMDataAccess.h" // Required to get access to X-Plane data references

#if IBM
// Required if plugin is running on Windows
BOOL APIENTRY DllMain(HANDLE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)
{
    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        case DLL_THREAD_DETACH:
        case DLL_PROCESS_DETACH:
            break;
    }
    return TRUE;
}
#endif

/* This method is a part of the X-Plane plugin architecture. 
Will be executed when X-Plane loads the plugin. */
PLUGIN_API int XPluginStart(char* name, char* package, char* description) 
{
    // Describe our plugin to the X-Plane plugin system
    strcpy(name, "Enable3D");
    strcpy(package, "com.stackoverflow.enable3d");
    strcpy(description, "Enable 3D cockpit when X-Plane starts");

    // Contains the data reference file controlling the panel view
    XPLMDataRef panelRenderType = XPLMFindDataRef("sim/graphics/view/panel_render_type");

    // Set panel view to 3D cockpit
    XPLMSetDatai(panelRenderType, 2);

    // Initialization successful
    return 1;
}

/* This method is a part of the X-Plane plugin architecture.
Will be executed when X-Plane closes the plugin. */
PLUGIN_API void XPluginStop(void)
{
    // Do nothing
}

/* This method is a part of the X-Plane plugin architecture.
Will be executed when the user enables the plugin. */
PLUGIN_API int XPluginEnable(void)
{
    // Enabled successfully
    return 1;
}

/* This method is a part of the X-Plane plugin architecture.
Will be executed when the user disables the plugin. */
PLUGIN_API void XPluginDisable(void)
{
    // Do nothing
}

/* This method is a part of the X-Plane plugin architecture.
The method acts as a message handler. We don't have to do
anything here, but we must provide one. */
PLUGIN_API void XPluginReceiveMessage(XPLMPluginID caller, long message, void* param)
{
    // Do nothing
} 
```

根据文档，“sim/graphics/view/panel_render_type”数据引用应设置为 1 用于 2D 面板，2 用于 3D 面板，3 用于点亮 3D 面板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T16:40:38.817

并非 X-Plane 中的所有内容都可以通过 Datarefs 访问。

您可以从插件 SDK 进入按键/操纵杆按钮分配系统。

试试这个片段：

```
XPLMCommandOnce( XPLMFindCommand( "sim/view/3d_cockpit_cmd_look" ) ); 
```

结合这个“延迟初始化”代码：

[http://www.xsquawkbox.net/xpsdk/mediawiki/DeferredInitialization#Example](http://www.xsquawkbox.net/xpsdk/mediawiki/DeferredInitialization#Example)

结合使用时，您应该有一个启用 3D 驾驶舱模式的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T17:07:37.410

游戏有点晚了，但 DataRefs 表表明这`sim/graphics/view/panel_render_type`是不可写的。

我目前没有很好的解决方法：/

# crystal-reports - windows server 2012 无法加载水晶报表

> ID：15744771
> 
> 赞同：2
> 
> 时间：2013-04-01T13:52:38.713
> 
> 标签：crystal-reports, report

我创建了一个带有水晶报表的 Web 应用程序 .net 2008。我已将其部署在 windows server 2012 64 位操作系统中。服务器安装了 3.5 和 4.0 .net 框架。问题是，水晶报表没有显示在网页中。它不会抛出任何错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T10:04:43.710

在 windows server 2012 中，它运行 IIS 8。以前版本的水晶报表不支持 IIS8。要为 IIS 8 运行 Crystal 报表，您必须安装新的

> 水晶报告* *(v. 13.0.6.x)* *

在你的 win 服务器机器上。请查看以下链接以下载水晶报告。

[http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T13:12:33.167

请参阅以下文章。 [http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2012/10/16/report-appears-blank-in-browser-after-deploying-a-crystal-reportsnet- Web应用程序](http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2012/10/16/report-appears-blank-in-browser-after-deploying-a-crystal-reportsnet-web-application)

此外，请确保您使用的是受支持的浏览器版本。请参阅 CR for VS developer 版本支持的平台。 [http://scn.sap.com/docs/DOC-21990](http://scn.sap.com/docs/DOC-21990)

# jsf-2 - 文件下载后更新组件

> ID：15744778
> 
> 赞同：14
> 
> 时间：2013-04-01T13:52:43.900
> 
> 标签：jsf-2, primefaces, download

我正在使用 Primefaces TabView、CommandButton 和 FileDownload 下载日志文件。下载日志文件后，我想提供从服务器中删除日志内容的选项。

最初，删除日志文件按钮 (deleteEventLogButton) 被禁用，并有一个自定义标题说明“删除日志 - 需要导出”。导出日志后，应启用该按钮，并且标题应显示“删除日志”。

我遇到的问题是删除日志文件按钮仍然被禁用，即使在导出事件成功完成后，标题也显示为“删除日志 - 需要导出”。

我的猜测是 exportEventLogButton->Update="deleteEventLogButton" 在 fileDownload 值之前被调用。

导出日志后，我可以按“F5”并刷新页面，并启用 deleteEventLogButton 并显示正确的标题。

**JSF - 片段**

```
<p:tabView id="logView">
    <p:tab id="eventLogTab" title="Security Events">
        <p:panelGrid ...>

            <p:commandButton id="exportEventLogButton" icon="ui-icon-disk" styleClass="c25" ajax="false" title="Export Log" disabled="#{empty managedCmsLogsBean.eventLogEntityList}" update="deleteEventLogButton">
                <p:fileDownload value="#{managedCmsLogsBean.exportEventLogFiles()}"/>
            </p:commandButton>

            <p:commandButton id="deleteEventLogButton" icon="ui-icon-trash" styleClass="c25" ajax="false" title="#{managedCmsLogsBean.deleteEventLogCaption}" disabled="#{! managedCmsLogsBean.eventLogExported}" action="#{managedCmsLogsBean.clearEventLogs()}" update="eventLogTab" />    

        </p:panelGrid>

        <p:dataTable value="#{managedCmsLogsBean.eventLogEntityList}" ...>
            ...
        </p:dataTable>

    </p:tab>
</p:tabView> 
```

**支持 Bean - 片段**

```
private boolean eventLogExported;

public StreamedContent exportEventLogFiles() {
    eventLogExported = true;
    return logFileUtility.exportSecurityEventLog(eventLogEntityList, eventLogStartDate, eventLogStopDate);
}

public boolean isEventLogExported() {
    return eventLogExported;
}

public void setEventLogExported(boolean value) {
    eventLogExported = value;
}

public String getDeleteEventLogCaption() {
    return eventLogExported ? "Delete Logs" : "Delete Logs - Export Required";
} 
```

我尝试在 FileDownload 中移动更新事件，但没有任何区别。

```
<p:commandButton id="exportEventLogButton" icon="ui-icon-disk" styleClass="c25" ajax="false" title="Export Log" disabled="#{empty managedCmsLogsBean.eventLogEntityList}">
    <p:fileDownload value="#{managedCmsLogsBean.exportEventLogFiles()}">
        <p:ajax update="deleteEventLogButton"/>
    </p:fileDownload>
</p:commandButton> 
```

我已经搜索了几天，发现了许多与这个问题非常接近的问题......但没有任何帮助。:(

只是为了让事情变得非常清楚......我在出口方面没有问题。问题是导出完成后删除日志文件按钮未启用。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T14:23:54.417

`p:commandButton`在您的情况下是（必须是）非 AJAX 按钮（您通过添加`ajax="false"`属性来设置它）。在这种情况下，`update`属性和`p:ajax`标签没有任何意义（因为它们仅适用于 AJAX 请求）。当您下载文件时，您的应用程序会发送某种类型的流，您会看到“*保存文件*”对话框。您的页面未刷新。所以你必须使用`PrimeFaces.monitorDownload`来做到这一点：

```
<p:commandButton id="exportEventLogButton" 
                 icon="ui-icon-disk" 
                 styleClass="c25" 
                 ajax="false" 
                 title="Export Log" 
                 disabled="#{empty managedCmsLogsBean.eventLogEntityList}"
                 onclick="PrimeFaces.monitorDownload(null, stop)"> 
```

并添加将更新第二个按钮的停止功能：

```
<p:remoteCommand name="stop" update="deleteEventLogButton"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-09T05:22:10.750

正如[Balusc](http://[1]https://stackoverflow.com/users/157882/balusc)回答的那样，有[问题](https://stackoverflow.com/questions/3471880/jsf-how-to-refresh-a-page-after-download)（[修订版](https://stackoverflow.com/posts/3473394/revisions)），我们无法从一个请求中获得两次响应，下载后刷新页面，最好在下载链接（p：commandbutton）onclick 标记中使用以下 java 脚本。

例子：

```
<p:commandButton ajax="false" icon="ui-icon-arrowstop-1-s" onclick="setTimeout('location.reload();', 1000);" action="#{managedBean.downloadMethod}" /> 
```

这将在 1 秒后自动刷新页面，同时在刷新之前，您将获得下载文件，根据您的下载响应时间，增加该脚本中的秒数。**秒数不应小于下载响应时间。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-24T14:24:52.633

从 PrimeFaces 10，您可以下载**带有** `ajax="true"`. 这也允许您更新组件。

也可以看看：

*   [https://primefaces.github.io/primefaces/10_0_0/#/components/filedownload?id=ajax-downloading](https://primefaces.github.io/primefaces/10_0_0/#/components/filedownload?id=ajax-downloading)
*   [https://github.com/primefaces/primefaces/issues/5978](https://github.com/primefaces/primefaces/issues/5978)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T14:16:04.963

您是否尝试过将 eventLogExported/isEventLogExported 从 boolean 更改为 Boolean 或 String ？

# bash - BASH 检查今天是否是一个月的第一天

> ID：15744781
> 
> 赞同：16
> 
> 时间：2013-04-01T13:52:57.860
> 
> 标签：bash, date

我有一个 bash 脚本，如果它是每月的第一天，我需要它来满足一些条件。
我写了这段代码

```
ifStart=`date '+%d'`
if [$ifStart == 01]
then
test=`/bin/date --date='1 day ago' +'%Y-%m'`
echo $test
fi 
```

我希望它今天显示 2013-03，但我收到一条错误消息：
找不到第 2 行命令。

```
test=`/bin/date --date='1 day ago' +'%Y-%m'` 
```

这部分在没有 if 的情况下运行良好。
有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T13:57:36.450

未找到的命令实际上是由于您的 if 语句。你需要空格：

```
if [ $ifStart == 01 ] 
```

否则`[$ifStart`将被解释为命令。

# iphone - NSFileManager 中是否有任何方法可以仅获取某些字节范围的文件内容

> ID：15744788
> 
> 赞同：0
> 
> 时间：2013-04-01T13:53:54.790
> 
> 标签：iphone, ios, file-io, nsfilemanager, fseek

我有一些大小为 6.7GB 的文件，甚至更多（这些是视频文件）。我想将大块文件数据发送到我的服务器，所以我目前要做的是：

```
contents = [fileManager contentsAtPath:path];
if (mFileOffset<[contents length]) {
NSRange range = NSMakeRange(mFileOffset, (allowedSize>[contents length]?[contents length]:allowedSize);
contents =[contents subdataWithRange:range]; 
```

但是，这会产生内存问题：

```
malloc: *** mmap(size=616927232) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
APP(2700,0x4136000) malloc: *** mmap(size=616927232) failed (error code=12)
*** error: can't allocate region 
```

有没有办法让我只读取指定范围内的文件字节`fseek`？`c++`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:59:21.117

[NSFileHandle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html)中有一个方法可以同步读取指定字节数的数据。

```
-[NSFileHandle readDataOfLength:] 
```

寻求：

```
– offsetInFile
– seekToEndOfFile
– seekToFileOffset: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:07:31.093

`fseek`不是`C++`，它是一个`C`函数。相同的功能在`Obj-C`.

请注意，这`Obj-C`只是一层`C`，每个有效`C`代码也是有效`Obj-C`代码。

文件函数也被抽象为一个`Obj-C`类`NSFileHandle`。`fopen`但是，此类具有与,`fseek`等完全相同的功能`fclose`。

# html - 我可以调用一个末尾有空格的类名吗？

> ID：15744791
> 
> 赞同：0
> 
> 时间：2013-04-01T13:54:11.763
> 
> 标签：html, css

我正在尝试为以下课程调用课程：

```
class="content_list_link " 
```

我没有选择更正此实际来源的选项，并且需要能够设置该类的样式。

我试图将其称为 .content_list_link 和 a.content_list_link ，因为它在 a 标签中。

对此的任何意见将不胜感激。

解决的问题：[我可以调用一个末尾有空格的类名吗？](https://stackoverflow.com/questions/15744791/can-i-call-a-class-name-that-has-a-space-at-the-end-of-it#comment22372988_15744821)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:55:55.990

是的，空格只是分隔类。

这意味着您可以使用以下样式设置样式：

```
.content_list_link { } 
```

因为这就是类的名称。

可能是这样`class='content_list_link otherClass'`，然后您将看到如何设计其中一个或两者兼而有之。如果您在应用样式时遇到问题，那么问题出在其他地方。

# visual-c++ - 找不到“F1”键在应用程序中的工作原理

> ID：15744793
> 
> 赞同：1
> 
> 时间：2013-04-01T13:54:17.903
> 
> 标签：visual-c++, mfc

我的应用程序是在 MFC 中构建的。应用程序执行后，我需要打开 exe 提供的帮助文件。

但是当我按 F1 时，应用程序会给出一条错误消息，指出无法找到该文件。发生这种情况是因为不存在该名称的此类文件。

有人会想如何更改帮助文件本身的名称？好吧，那是做不到的，我也必须改变路径。

我想知道 F1 按钮的功能是如何工作的，在哪里可以找到相同的功能？

我正在使用 VC++ 6.0（我知道它很旧，但我坚持使用它）。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:59:00.783

要显示您的特定帮助文件，您必须覆盖`CWinApp::OnHelp`. 标准帮助文件的路径存储在`CWinApp::m_pszHelpFilePath`. 在此示例中，我使用自己的`m_path`变量。

```
void CMyApp::OnHelp() 
{
    ::HtmlHelp(((CMainFrame*)AfxGetMainWnd())->m_hWnd,m_path,HH_DISPLAY_TOPIC,NULL);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:59:13.817

如果我没记错的话，默认情况下它是由处理的，`CWinApp::OnHelp()`所以先看看你对应用程序类的覆盖，你可能会在`ON_COMMAND`那里找到处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-22T08:00:12.933

我有一个扩展类`CWinApp`，所以覆盖`OnHelp`函数是这样工作的：

在标题中：

```
class MyApp : public CWinApp
{
public:
    afx_msg void OnHelp();
} 
```

在 cpp 文件中：

```
BEGIN_MESSAGE_MAP(MyApp, CWinApp)
    ON_COMMAND(ID_HELP, MyApp::OnHelp)
END_MESSAGE_MAP()

void MyApp::OnHelp()
{
    // your own help function
} 
```

# json - 列表的隐式 json 读写

> ID：15744796
> 
> 赞同：1
> 
> 时间：2013-04-01T13:54:24.093
> 
> 标签：json, playframework, playframework-2.1, salat

我正在关注以下示例[https://github.com/leon/play-salat/tree/master/sample](https://github.com/leon/play-salat/tree/master/sample)。在我的数据模型中，我有列表，我尝试采用该模型。

我收到以下编译错误：

```
[error] /home/malte/workspace/bdt/app/models/Ballot.scala:26: No Json deserializer found        for type List[models.Position]. Try to implement an implicit Writes or Format for this type.
[error]         "positions" -> b.positions,
[error]                          ^
[error] /home/malte/workspace/bdt/app/models/Ballot.scala:33: No Json deserializer found for type List[models.Position]. Try to implement an implicit Reads or Format for this type.
[error]       (__ \ 'values).read[List[Position]]).map { l => l.getOrElse(Nil) } ~ 
```

对于“位置”类型，我有隐式读写，但是如何为 List[Position] 制作它？我的隐式读写：

```
implicit val ballotJsonWrite = new Writes[Ballot] {
  def writes(b: Ballot): JsValue = {
    Json.obj(
      "positions" -> b.positions,
      "title" -> b.title)
  }
}

implicit val ballotJsonRead = (
(__ \ 'positions).readNullable(
  (__ \ 'values).read[List[Position]]).map { l => l.getOrElse(Nil) } ~
  (__ \ 'title).read[String])(Ballot.apply _) 
```

对于我遵循[的为 List 集合创建隐式 json 读取的读取，输入 json 中可能缺少该读取](https://stackoverflow.com/questions/15489354/create-implicit-json-read-for-list-collection-which-might-be-missing-from-input)，但我得到了上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:21:47.913

实际上，现在我在最新版本的 salat 中发现了这一点。Json 自动用于在模型和 json 对象之间移动。我删除了整个部分，没有它运行顺利。

[https://github.com/novus/salat/wiki/JSON](https://github.com/novus/salat/wiki/JSON)

# c - 源文件找不到头文件

> ID：15744803
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:01.537
> 
> 标签：c, gcc, linker, ubuntu-12.04, header-files

我查看了这些链接：[This one](https://stackoverflow.com/questions/3667184/header-files-linked-to-from-header-file-not-found?lq=1) 和[This](https://stackoverflow.com/questions/2139920/gcc-cant-find-a-included-header?lq=1) 以及其他一些类似的链接。这里给出的答案都不是有效的工作方法。

我有两个源文件`a1.c`，`a2.c`两个头文件`a1.h`和`a2.h`. 我想在这两个文件中包含头文件（以及 a1.c 中的 a2.c，因为我需要从 a2.c 使用一个函数）

我已经包括

```
#include "a1.h"  
#include "a2.h" 
```

在 a1.c 的源文件中

我在 Ubuntu 上使用 GCC。并使用该命令`gcc a1.h -o a1.out -lm` ，但没有奏效。

我试过了

```
gcc -c -I/Home/Documents/ctests/ a1.c -o a1.out 
```

也

```
gcc -c a1.c -I/Home/Documents/ctests/ -o a1.out 
```

我的拼写也很好（无论如何，一个字母和一个数字作为文件名几乎没有任何错误的余地）。

此外，所有文件都在同一个文件夹中。

我知道这可能是一个微不足道的问题，但我被困在这个问题上，希望能得到任何帮助。就使用命令行而言，我对编程比较陌生，对 Linux 和 Unix 完全陌生。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:02:24.413

```
gcc -c 
```

告诉 gcc 将文件编译为对象（随处可见的 .o 文件）。稍后与其他一些 .o 文件链接到可执行文件。

因此，您要做的是分别编译这两个文件并稍后链接它们。像这样。

```
gcc -I"/Home/Documents/ctests/" -c a1.c
gcc -I"/Home/Documents/ctests/" -c a2.c

gcc -o myprogram a1.o a2.o 
```

或者只是同时编译和链接。

```
gcc -I"/Home/Documents/ctests/" a2.c a1.c -o myprogram 
```

然后像这样运行你的程序

```
path_to/myprogram 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:04:46.030

编译所有内容，并将其链接在一起。

如果所有文件都在一个目录中，这应该有效：

```
 gcc a1.c a2.c -o myapp 
```

如果要创建单独的目标文件，请执行以下操作：

```
 gcc -c a1.c a2.c 
```

然后，您可以链接在一起以创建应用程序：

```
 gcc a1.o a2.o -o myapp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:04:42.783

你的 gcc 命令应该是这样的

```
gcc -I/Home/Documents/ctests/ -o a1.out a1.c 
```

你必须像这样在你的文件中包含`a1.h`和`a2.h`头文件`a1.c`

```
#include "a1.h"
#include "a2.h" 
```

如果您正在调用某些函数，`a2.c`那么`a1.c`您必须以这种方式构建您的程序

```
gcc -I/Home/Documents/ctests/ -o a1.out a2.c a1.c 
```

# android - android中的Gcm设备注册问题

> ID：15744807
> 
> 赞同：4
> 
> 时间：2013-04-01T13:55:18.377
> 
> 标签：android, push-notification, google-cloud-messaging

目前我正在使用 android 中的推送通知。它工作正常。但我的问题是收到多个通知而不是单个通知。然后我检查我的设备注册表并发现一个奇怪的事实，每 30 分钟后我的设备 ID 正在更改，所以多个设备被抵制同一个user_id并一起获得通知数量。我不知道为什么会发生这种情况。我正在使用三星galaxy s2进行测试。请帮我 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:46:02.373

我不确定为什么您的注册 ID 每 30 分钟更改一次。也许如果您发布您的注册码，我就能告诉您。不管这个问题如何，您的服务器应该能够处理同一设备的多个注册。当您将注册 ID 发送到您的服务器时，请同时发送另一个由您的应用或您的服务器创建的唯一 ID，这样您就可以识别何时获得现有设备的新注册 ID，在这种情况下，您将用新的注册ID替换旧的注册ID。

您应该在服务器上做的另一件事是处理 gcm 服务器返回规范注册 id 的情况，在这种情况下，您应该将用于发送消息的 id 替换为规范注册 id。

# c# - Facebook 桌面身份验证弹出浏览器

> ID：15744814
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:30.853
> 
> 标签：c#, facebook, login, desktop

我正在用 C# 编写一个具有 Facebook 集成的桌面应用程序，并且我正在尝试弄清楚如何进行身份验证/登录。我想到了两种不同的方法：

**1.弹出*默认*浏览器**

*   用户可能在其默认浏览器上登录 Facebook。
*   代码：`System.Diagnostics.Process.Start("http://www.facebook.com/...");`
*   **问题/疑问：如何控制窗口位置和大小（例如，启动时不显示地址栏）？我可以在登录完成后销毁进程，甚至关闭窗口（如果从 javascript 完成，大多数浏览器不会提示关闭窗口吗？）？**

**2.弹出*特定*浏览器**

*   如果我查找默认浏览器，我可以将命令行标志传递给浏览器。`"..\chrome.exe" --app=http://www.facebook.com/...`
*   **问题**：如何设置窗口大小/位置？登录完成后如何关闭进程（假设我知道登录何时完成）？

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:14:14.900

在这种情况下非常有用的资源是[http://facebooksdk.net/](http://facebooksdk.net/)。早些时候，facebooksdk.net 上有一个桌面应用程序示例项目，但被删除了。你可以在这里看到它[https://github.com/MarkAureliy/facebook-winforms-sample-master](https://github.com/MarkAureliy/facebook-winforms-sample-master) 这个项目直接满足你的需求

# linux - linux中进程的网络使用情况

> ID：15744815
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:33.130
> 
> 标签：linux, network-monitoring

我想记录不同版本的 VNC 通过网络传输的总字节数。我的计划是启动 VNC 查看器，远程运行一个脚本，执行一些操作并显示一些图形，然后断开连接。

如何在 linux 中记录仅此一个进程的总网络使用情况？我不想衡量系统上发生的任何其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:06:58.827

您可以在不同的端口号上运行不同版本的 VNC 查看器，然后使用 tcpdump 等工具记录到这些端口的所有流量。

可能有某种方法可以记录每个进程的流量，但是通过端口进行记录更加明显和简单

使用 perl 添加/过滤的粗略示例

```
sudo tcpdump -li eth1 ' port 5900'|perl -ne 'print $c,"\n"; $c+=$1 if (/length (\d+)/);' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:28:58.383

你应该试试**`iftop`**Linux 命令。

```
$ sudo iftop -i eth0 -P
server.example.com:ssh     => client.example.com:51365         1.73kb  2.72kb  2.72kb 
```

使用过滤器的更优雅的方式：

```
$sudo iftop -i eth0 -f "dst port 22" 
```

# javascript - 如何在显示 div 时启用和禁用字段和表达式字段的必需验证组

> ID：15744816
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:41.013
> 
> 标签：javascript, jquery, asp.net, html

我的表单中有一个信用卡交易区域，我根据用户在单选按钮组中的选择隐藏和显示。在我的信用卡中，需要验证和验证组中的必需表达式。我想知道是否可以在 J Query 中启用和禁用此验证组方面获得一些帮助。提前感谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:01:42.317

我通常有一个类来指示是否应该验证一个字段，所以当一个应该验证的字段被隐藏时，只需删除该类。显示时再次添加。

一个更优雅的解决方案是禁用隐藏字段的验证：

```
$('myform').submit(function() {
    $('myform').find('validate:visible').forEach( ... );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:01:53.550

您可以使用 ASP.NET 内置的 JavaScript 函数来启用和禁用验证器

```
var validtorObject = document.getElementById('validtorObjectID');    
ValidatorEnable(validtorObject, false); 
```

这个 SO 答案为您提供了使用 JQuery 禁用验证组内所有控件的简单方法

[使用 jQuery 启用/禁用特定“ValidationGroup”中的 asp.net 验证器控件？](https://stackoverflow.com/questions/2158052/enable-disable-asp-net-validator-controls-within-a-specific-validationgroup-wi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:02:25.113

要禁用所需的验证器，您可以尝试

```
 ValidatorEnable(document.getElementById("<%=RequiredFieldValidatorID %>"), false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T17:19:56.350

您可以设置`CausesValidation="False"`

如果使用 asp.net 验证控件，CausesValidation 属性确定是否必须在单击按钮时执行验证。它可以是真或假。默认情况下为真。

它主要用于取消/重置按钮，我们不想执行任何类型的验证。

```
protected void radioButton_CheckedChanged(object sender, EventArgs e)
{
   creditCardTextbox.Attributes.Add("CausesValidation", "False");
} 
```

# debugging - Symfony 2 App调试模式错误

> ID：15744818
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:42.903
> 
> 标签：debugging, symfony

我正在尝试在 Symfony 网站中实现一个 twig 自定义错误页面（仅遵循说明书），但是当我关闭调试模式（通过 app.php 中的应用程序内核）时，整个应用程序从服务器收到错误 500。

当调试模式为真时，应用程序工作正常。

有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:15:58.607

检查服务器的错误日志，`app/logs/prod.log`您还会发现导致 500 错误的错误。有时清除缓存`rm -rf app/cache/prod`也有帮助。

# jquery - jQuery 悬停与 if/else 语句

> ID：15744819
> 
> 赞同：0
> 
> 时间：2013-04-01T13:55:48.067
> 
> 标签：jquery, if-statement, hover

我有一个我想使用的悬停状态，但只有当不透明度不是 0.65 时，这就是我所拥有的，但它不太有效，不确定如何更改它。提前感谢您的帮助。

```
$('.info_btn').hover(
  var jthis = this;
  if($('.info_btn').css('opacity') == 0.65) { }
  else {
    function() {
        $(jthis).css({
              "opacity": "0.7",
              "-moz-opacity": "0.7",
              "filter": "alpha(opacity = 70)"
        });
    }, function() {
        $(jthis).css({
              "opacity": "0.2",
              "-moz-opacity": "0.2",
              "filter": "alpha(opacity = 20)"
        });
    }
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:15:11.563

这仅将事件绑定到唯一`.info_btn`具有`opaticy == 0.65`. 如果你有很多`.info_btn`元素 很有用

```
 $('.info_btn').filter(function () {
           return parseFloat($(this).css('opacity')) == 0.65
        }).on({
              mouseover: function () {
                 $(this).css({
                    "opacity": "0.7",
                    "-moz-opacity": "0.7",
                    "filter": "alpha(opacity = 70)"
                 });
              },
              mouseout: function () {
                 $(this).css({
                    "opacity": "0.2",
                    "-moz-opacity": "0.2",
                    "filter": "alpha(opacity = 20)"
                 });
              }
           }); 
```

它让您将条件保持`opacity == 0.65`在一个地方，不会将事件附加到额外的`.info_btn`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:03:55.653

```
$('.info_btn').mouseover(function() {
     if($(this).css('opacity') == 0.65) { }
}); 
```

这就是您在问题中描述的所有内容。

mouseover 和 hover 有点像
[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)
[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# mysql - TIME_WAIT状态的mysql连接

> ID：15744823
> 
> 赞同：1
> 
> 时间：2013-04-01T13:56:01.363
> 
> 标签：mysql, connection, timeout, wait, pooling

我在服务器中面临一个问题，其中几个连接超时。以下是错误文件中的错误：-

```
130401  8:07:06 [Warning] Aborted connection 1111111to db: 'ABC' user: 'u1' host: '1.1.1.1' (Got timeout reading communication packets)
130401  8:10:44 [Warning] Aborted connection 1712056 to db: 'XYZ' user: 'u2' host: '2.2.2.2.' (Got an error reading communication packets) 
```

下面是配置

```
wait_timeout= 900
max_connections                         | 500
max_packet_size                           256M 
```

虽然历史最大连接数尚未超过 320，但我们使用命令看到许多连接处于 TIME_WAIT 中：

```
netstat -anlp | grep :3306 | grep TIME_WAIT -wc; date
299 
```

在应用程序端，如果客户端空闲超过 600 秒，客户端将关闭连接。

这意味着许多连接处于等待状态。同时，服务器不忙。这意味着它没有处于锁定状态。

有人可以帮我吗？提前谢谢。

斯里达尔。

# asp.net-mvc-3 - 用于 asp.net mvc 的 Telik 网格的开源替代品？

> ID：15744826
> 
> 赞同：13
> 
> 时间：2013-04-01T13:56:11.717
> 
> 标签：asp.net-mvc-3, datagrid, user-controls, open-source

我在一家没有预算支付控制费用的 IT 商店工作。是否有用于 mvc 的 Telerik 网格的开源替代方案？我想为我的页面提供丰富的数据网格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T13:59:05.847

还有[`MVCContrib.Grid`](http://mvccontrib.codeplex.com/wikipage?title=Grid)你可以看看的。

如果您正在寻找一个纯粹的客户端网格，那么它们有数以万计，例如[`jqGrid`](http://www.trirand.com/blog/)，，[`FuelUX datagrid`](http://exacttarget.github.com/fuelux/#datagrid)...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-16T11:35:29.700

**Grid.MVC**是一个开源的工作网格，具有**排序和分页功能**

（与 Telerik 不同，您不需要在控制器端更改任何内容，只需在您的视图中添加参考并使用即可。）

安装 nugget 包（[安装](https://www.nuget.org/packages/Grid.Mvc/)）

```
PM> Install-Package Grid.Mvc -Version 3.0.0 
```

在您的视图中，您可以自动创建如下列**（或自定义请参阅[用户指南](http://gridmvc.codeplex.com/wikipage?title=Quick%20Start&referringTitle=Home)）**

```
@using GridMvc.Html

@Html.Grid(Model).AutoGenerateColumns() 
```

**见[在线演示](http://gridmvc.azurewebsites.net/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T13:57:58.280

看看[Mvc Contrib Grid](http://mvccontrib.codeplex.com/wikipage?title=Grid)。我有很好的使用经验。

另一种选择是[Webgrid](http://www.webgrid.com/)。源代码在[Sourceforge中可用](http://sourceforge.net/projects/webgrid/)

# java - 从文本文件中读取数据的java程序

> ID：15744827
> 
> 赞同：-1
> 
> 时间：2013-04-01T13:56:19.403
> 
> 标签：java

```
date                 time               kg

12/10/2013        00.00.01              1   
13/11/2013        00.00.05              2   
17/12/2013        00.00.90              5   
21/12/2013        00.00.23              6   
27/12/2013        00.00.43              9 
```

我将这些数据保存在一个 txt 文件中。我想用java制作一个可以读取这些数据的程序。我已经编写了上面的代码，但我有错误。有人可以帮助我吗？数据之间有空间。

```
import java.io*;

public class ReadTextfile{
   public static void main (String[] args) {
      File file = new File ("test.txt");
      StringBuilder line = new StringBuilder();
      BufferedReader reader = null;

try {
    reader = new BufferedReader (new FileReader(file));
    String text = null;

    while ((text = reader.readLine()) !=null) {
           line.append(text)
               .append(System.getProperty ("line.separator"));
    }
    }
    catch (IOException e) {
      e.printStackTrace();
    catch (FileNotFoundException e) {
      e.printStackTrace();
   }finally {
    try {
        if (reader !=null){
            reader.close();
    }
    }
    catch (IOException e) {
      e.printStackTrace();
    }
    }
    System.out.println(line.toString());
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:06:47.667

男孩，你只是有一些语法问题

1：更换

```
import java.io* with import java.io.* 
```

2 : 照顾好你的捕捉体被正确启动和关闭

```
try
{
// your code
}
catch(Exception e)
{

} 
```

这是工作代码，比较你的程序

```
import java.io.*;

public class ReadTextfile{
   public static void main (String[] args) 
   {
      File file = new File ("C:/Users/hussain.a/Desktop/test.txt");
      StringBuilder line = new StringBuilder();
      BufferedReader reader = null;

try {
    reader = new BufferedReader (new FileReader(file));
    String text = null;

    while ((text = reader.readLine()) !=null) {
           line.append(text)
               .append(System.getProperty ("line.separator"));
    }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally 
   {
    try {
        if (reader !=null){
            reader.close();
    }
    }
    catch (IOException e) 
    {
      e.printStackTrace();
    }
    }
    System.out.println(line.toString());
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:03:23.213

```
catch (FileNotFoundException e) 
```

这是无法访问的代码，因为您在上面捕获了`IOException`.

请注意[：](http://docs.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html)

```
public class FileNotFoundException extends IOException 
```

你的代码不会编译。移除这个锁（你甚至没有关闭它..）

另一件事，如果这不是类型，则应替换`java.io*`为`import java.io.*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T21:22:22.720

我会采取以下方法：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class ReadTextFile
{
    public static void main(String[] args) throws FileNotFoundException
    {
        File file = new File("test.txt");
        Scanner scanner = new Scanner(file);
        List<Result> results = new ArrayList<Result>();

        while(scanner.hasNextLine())
        {
            String currentLine = scanner.nextLine();
            String [] resultArray = currentLine.split(" ");
            results.add(new Result(resultArray[0], resultArray[1], resultArray[2]));
        }
        scanner.close();
    }

    private static class Result
    {
        private String date;
        private String time;
        private String kg;

        public Result(String date, String time, String kg)
        {
            super();
            this.date = date;
            this.time = time;
            this.kg = kg;
        }

        public String getDate()
        {
            return date;
        }

        public String getTime()
        {
            return time;
        }

        public String getKg()
        {
            return kg;
        }
    }
} 
```

现在，您可以从您拥有的结果列表中提取您想要的任何信息。

因此，如果您想打印所有内容，可以执行以下操作：

```
for(Result singleResult : results)
{
    System.out.println(singleResult.getDate() + " " + singleResult.getTime() + " " + singleResult.getKg());
} 
```

你基本上可以对数据做任何你想做的事情。这种方法还允许您在创建 Result 对象之前将数据转换为不同的类型。

# twitter - Twitter 小部件无法在移动设备上运行

> ID：15744828
> 
> 赞同：0
> 
> 时间：2013-04-01T13:56:27.430
> 
> 标签：twitter

我有一些网站使用 blogger.js 和 twitterCallback2 脚本显示 twitter 提要。

twitter 提要在该网站的桌面版本上显示得很好，但在移动设备上却无法加载。我收到一条错误消息...

“加载资源失败：服务器响应状态为 404（未找到）| mobile.twitter.com/javascripts/blogger.js”

所以看起来它试图加载脚本的移动版本，但脚本不存在。

其他人有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:03:59.507

我们最近在我们的一些 Wordpress 网站上遇到了这个问题。链接`mobile.twitter.com/javascripts/blogger.js`应该只是`twitter.com/javascripts/blogger.js`

由于 twitter 有一个移动重定向，它不允许我们将此链接用于移动。所以我们制作了自己的 blogger.js

这是我们如何解决它的链接。希望这会有所帮助： [http ://www.clarkcommunications.ca/twitter-widget-not-working-on-mobile/](http://www.clarkcommunications.ca/twitter-widget-not-working-on-mobile/)

# vb.net - VB.NET 以管理员身份以编程方式登录

> ID：15744829
> 
> 赞同：0
> 
> 时间：2013-04-01T13:56:40.743
> 
> 标签：vb.net, admin, uac, rights

我面临一个很难解决的问题，我已经阅读了很多关于管理员权限 .NET 应用程序的问题，但几乎都是关于以管理员身份登录的 UAC 弹出消息。我想要的是：当我启动我的应用程序时，在运行所有代码之前要做的第一件事是以管理员身份登录以授予应用程序管理员权限而不向用户询问任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:38:31.197

The real question is why does your app need to run with elevated privileges? If you need that, you can use an application manifest to request elevation and then educate your users that they must confirm elevation. But you cannot bypass the UAC prompt, and this is by design.

[FAQ: Why can't I bypass the UAC prompt?](https://techcommunity.microsoft.com/t5/windows-blog-archive/faq-why-can-8217-t-i-bypass-the-uac-prompt/ba-p/701510)

Excerpt:

> If it were possible to mark an application to run with silently-elevated privileges, what would become of all those apps out there with LUA bugs? Answer: they'd all be marked to silently elevate. How would future software for Windows be written? Answer: To silently elevate. Nobody would actually fix their apps, and end-user applications will continue to require and run with full administrative permissions unnecessarily.

Bill

# sql-server - 在创建视图中设置日期

> ID：15744831
> 
> 赞同：0
> 
> 时间：2013-04-01T13:56:45.917
> 
> 标签：sql-server, stored-procedures

我正在尝试在 SQL Server 2008 R2 中创建视图。我需要输入当前日期作为导入完成的日期。这是我所拥有的：

```
SET NOCOUNT ON;
declare @SQL as varchar(4000)
        --@CD as date

--set @CD = convert(varchar(30), cast(getdate() as date), 110)

    -- Insert statements for procedure here
set @SQL = 'CREATE VIEW vw_GCS_Export
    As
    select division, [primary image id],[Item Number], [Brand Name],[Marketing Description],
    [Colours]as Colors,[Live Date],[Sample Type],substring([FileName],charindex('+ CHAR(39) + '_' + CHAR(39) +',[FileName],1)+1,CHARINDEX('+ CHAR(39) + '.' + CHAR(39) +',[FileName],1)-5) as BatchID,
    '+ CHAR(39) + '670' + CHAR(39) +' as Status, [Primary image ID] + '+ CHAR(39) + '_P' + CHAR(39) +' as [Shot Name],
    Cast(Null as varchar(50))as [Swatch/Variation],Cast(Null as varchar(50))as [Alternate Shot],[UserName],' + CAST(convert(date,Sysdatetime(),110)as varchar(10)) + ' as [Import Date],
    Cast(Null as varchar(50))as [Return Instructions],Cast(Null as varchar(50))as [Rush Request]
    from Sheet1$'

EXEC (@SQL)
select * from vw_GCS_Export 
```

当我得到结果时，字段 ImportDate 返回为 2008。我希望 04/01/2013 或类似的时间。我只需要将当前日期插入该字段。

我尝试了几种强制转换和转换组合，甚至尝试了一个返回当前日期和时间但没有运气的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:08:33.453

日期文字需要用单引号括起来，因此您需要使用围绕日期表达式的转义引号来修改您的 @SQL：

```
select ''' + CAST(convert(date,Sysdatetime(),110)as varchar(10)) + ''' as [Import Date]' 
```

# mysql - mySql 存储过程中的空白错误

> ID：15744835
> 
> 赞同：0
> 
> 时间：2013-04-01T13:57:05.057
> 
> 标签：mysql, mysqli

为了简单的测试目的，我正在尝试在 mySql 中编写一个简单的登录存储过程。我很困惑为什么它会出错。这是我的代码：

```
create procedure prLogin (IN userID varchar(20), IN pw varchar(20))

begin

select * from userlogin 
inner join users on userlogin.id = users.userid 
where userlogin.username = userID and userlogin.password = pw;

end 
```

正如我上面提到的，这段代码失败了，但没有提供关于原因的线索。谁能帮我？谢谢！薇薇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:01:19.237

我唯一能找到的是你没有改变你的分隔符，如果你不改变它，整个语句将在最后`;`发生在 line 上中断`a.password = pw;`。

```
DELIMITER $$
CREATE PROCEDURE prLogin (IN userID varchar(20), IN pw varchar(20))
BEGIN
    SELECT  a.*, b.*
    FROM    userlogin a
            INNER JOIN users b
                ON a.id = b.userid 
    WHERE   a.username = userID AND 
            a.password = pw;
END $$
DELIMITER ; 
```

通过更改分隔符的字符（*您想要的任何字符和我选择的字符都是`$$`*），语句将停止在新字符上，而不是在`;`.

# java - 通过 mbeans 暴露抽象类的属性

> ID：15744840
> 
> 赞同：1
> 
> 时间：2013-04-01T13:57:27.263
> 
> 标签：java, jconsole, mbeans

我有一个实现 mbean 接口的抽象类。我在界面中声明了 2 个 getter。当我运行代码时，使用 jconsole 我可以访问 2 个 getter，但我无法访问在抽象类中声明的 2 个属性。我该怎么做才能访问这些属性？

我已经完成了注册表 -

```
MBeanServer server = ManagementFactory.getPlatformMBeanServer();
ObjectName id = new ObjectName("pkgname:type=AbcMBean");
StandardMBean mbean = new StandardMBean(xyz, AbcMBean.class);
server.registerMBean(mbean, id); 
```

xyz 是抽象类 Abc 的对象

我已经在抽象类的一个函数中设置了属性的值。我没有使用任何二传手。

# matlab - matlab中simin命令的时间单位

> ID：15744842
> 
> 赞同：0
> 
> 时间：2013-04-01T13:57:29.810
> 
> 标签：matlab

谁能指导我matlab中simin命令的参数“时间跨度”的单位是什么。

```
 [t,x,y1, y2, ..., yn] = sim(model,timespan,options,ut) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:29:29.750

我认为您可以将其视为您选择的任何单位，前提是您使所有其他变量和参数与此选择一致。

例如，如果您正在建模一个简单的 DE，例如：

```
d2x/dt^2 = ax + b dx/dt + c 
```

您可以使用“x”以米为单位，“t”以秒为单位，这意味着“a”以秒^（-2）为单位，“b”以秒^（-1）为单位，“c”以米/秒为单位^ 2.

但是，如果您还以适当的单位给出了常数 a、b 和 c（以及初始条件），那么以 km 为单位的“x”和以年为单位的“t”也是完全有效的。

换句话说，在这样的动力系统中，与其说是单位对错的问题，不如说是单位一致或不一致的问题。

# ruby-on-rails - 缩放图像时出现 PaperClip 错误 NotIdentifiedByImageMagickError

> ID：15744843
> 
> 赞同：23
> 
> 时间：2013-04-01T13:57:31.177
> 
> 标签：ruby-on-rails, imagemagick, paperclip

几天来，我一直在努力解决这个问题。最近，我的图片上传器已停止正常工作。我已经调查了几种可能性，但没有一个建议的解决方案适用于我的情况。

错误信息是：

```
#<Paperclip::Errors::NotIdentifiedByImageMagickError:Paperclip::Errors::NotIdentifiedByImageMagickError> 
```

以下是详细信息：

*   Mac OS X 10.8.3
*   ImageMagick 6.8.4-4 2013-03-29
*   libtool => /usr/bin/libtool
*   导轨 3.2.13
*   红宝石 1.9.3p194

`development.rb`包含适当的路径（并且我已经验证使用它是正确的`which identify`）

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

`Gemfile.lock`（相关部分）

```
paperclip (3.4.1)
  activemodel (>= 3.0.0)
  activerecord (>= 3.0.0)
  activesupport (>= 3.0.0)
  cocaine (~> 0.5.0) 
```

模型（我正在更新一个教室对象，但图片位于位置模型中。`(Classroom has_one :location, :as => :locatable)`

模型`location.rb`

```
class Location < ActiveRecord::Base
  ## Paperclip method for uploading location images

  has_attached_file :picture, :styles => {:show => "1200x500#", :medium => "300x300#", :thumb => "100x100>"}, :convert_options => {:show => "-gravity center"}  
  has_attached_file :building_sign, :styles => { :show => ["1200x500#", :jpg], :medium => ["300x300#", :jpg], :thumb => ["100x100#", :jpg] }, :convert_options => {:show => "-gravity center"}
  belongs_to :locatable, :polymorphic => true
  belongs_to :location_type  
  validates :name,  :presence => true

  validates :latitude, :presence => true,
                       :length => {:within => 9..18},
                       :numericality => true
  validates :longitude, :presence => true,
                        :length => {:within => 9..18},
                        :numericality => true
end 
```

控制器`classrooms_controller.rb`

```
def update
  @classroom = Classroom.find_by_facility_code_heprod(params[:id].upcase)

  respond_to do |format|
    if @classroom.update_attributes(params[:classroom])
      format.html { redirect_to(@classroom, :notice => 'Classroom was successfully updated.') }
      format.xml  { head :ok }
    else
      format.html { render :action => "edit" }
      format.xml  { render :xml => @classroom.errors, :status => :unprocessable_entity }
    end
  end
end 
```

我试过的。

*   我确保图像名称很简单（USB2230.jpg），没有冒号。
*   我已将 ImageMagick 的版本更新到最新版本。
*   我还重新下载并重新安装了 10.8.3 的命令行工具（有人建议该问题可能与过时的 libtool 有关）。
*   我已经重启了电脑。
*   我尝试过 gem 版本的变体，包括

    ```
    # variation 1
    gem 'paperclip', '~> 2.8.0'
    gem "cocaine", "=0.3.2"

    # variation 2
    gem "paperclip", "~> 3.4.0"
    gem "cocaine", "= 0.4"

    # variation 3 (which is what is reflected in the included Gemfile.lock info above).
    gem "paperclip", "~> 3.4.0" 
    ```

如果我删除缩放，

```
:styles => {:show => "1200x500#", :medium => "300x300#", :thumb => "100x100>"},
:convert_options => {:show => "-gravity center"} 
```

上传有效，但我有点需要缩放;-)

谁能看到我缺少的东西？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-25T18:09:22.003

我们刚刚遇到了这个问题，结果是没有安装ghostscript的问题。我听取了 Scott Cornwell 的建议并取消了对错误的沉默，然后确定转换失败，因为 ghostscript 不可用。

```
 brew install ghostscript 
```

为我们解决了这个问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-28T23:53:27.590

我有同样的问题，虽然我的服务器在 Linux 上。无法确切告诉您如何操作，因为我没有要测试的 Mac，但希望这会为您指明正确的方向。

这适用于 ImageMagick 6.8.5-5、Paperclip 3.4.2、最新版本的可卡因、Rails 3.2.13：

我进入了 Paperclip gem 中的 geometry_detector_factory.rb 并注释掉了识别调用周围的两行：（*这一步不是必需的，只是解释我为确定问题所做的工作）*

```
#silence_stream(STDERR) do 
    Paperclip.run("identify", "-format '%wx%h,%[exif:orientation]' :file", :file => "#{path}[0]")
#end 
```

以及相应的“结束”语句。这使我在运行“识别”命令时可以在命令行上看到错误。

基本上错误说：“这种图像格式没有解码委托”

您可能可以查找该错误并将其弄清楚，但基本上我所做的是转到 usr/local/bin 并运行：（*也没有必要，除非您想查看已安装的内容）*

```
convert -list configure 
```

并寻找 DELEGATES 行。我有另一台运行 ImageMagick 的 Linux 服务器，在比较了两者之后，我意识到新的服务器只安装了 2 个代理。我能够运行：

```
yum install ImageMagick-devel 
```

然后用 make 重新编译 ImageMagick，make install 就可以了。

您还可以在 ImageMagick 站点上手动找到代理并一一安装，但该库对我来说几乎涵盖了它。

调试 ImageMagick？是不是没有人有时间这样做！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-17T11:03:25.860

在我的窗口开发环境中遇到问题，使用回形针 3.5.2、可卡因 0.5.3 和 ImageMagic 6.8.8。

解决方案是添加：

```
Paperclip.options[:command_path] = 'C:\Program Files\ImageMagick-6.8.8-Q16' 
```

到 config/environment/development.rb

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-27T21:29:34.373

我有类似的问题，但旧 PaperClip (3.0.2)。

就我而言，我用以下方法修复了它：

```
gem 'cocaine', '0.3.2' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-18T20:39:15.843

重新安装 libtool`brew install libtool`对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-03T07:28:41.433

我刚刚解决了这个问题。brew 创建一个名为 Cellar 的目录，/usr/local/Cellar 验证您是否没有两个 ImageMagick，我有一个名为 ImageMagick-Ruby182，因此，如果您运行 brew uninstall ImageMagick-Ruby182，以及正常的 imagemagick，并重新安装图像魔术。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T06:45:30.660

请更新回形针宝石和可卡因宝石的版本。设置 PaperClip 版本：3.4.1 设置可卡因版本：0.5。

我遇到了同样的问题，我的问题已经出现在回形针 gem github 问题中

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-14T01:39:45.740

您已经提到您尝试升级 ImageMagick，但我遇到了同样的问题并升级`ImageMagick 6.8.0-10 2013-03-03`为我修复了它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-26T17:47:01.960

与 image_magic 有同样的问题，它在生产中破坏了我们的回形针功能，但在开发中没有（很奇怪，我知道）。然而，即使在本地从我们的 gemfile 和 Gemfile.lock 中删除了 imagemagick（运行 bundle install 和所有这些东西），然后在 heroku 上部署回生产环境，错误仍然存​​在于生产环境中！（奇怪，我知道）。

最终成功的是运行：

```
$ heroku repo:purge_cache -a myAppName 
```

（取自：[https](https://github.com/heroku/heroku-repo#purge_cache) ://github.com/heroku/heroku-repo#purge_cache ）

当您部署应用程序时，Heroku 会缓存一些内容，例如您的资产和已安装的 gem，以加快部署速度。虽然这是一个很棒的功能，但它有时会产生副作用，在这种情况下，似乎有关 imagemagick gem 的某些东西“卡”在了生产的缓存中，这就是为什么清除为我们解决了这个问题（因为在清除之后，您的应用将在下一次部署时从头开始重建）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-16T11:33:12.037

[当我配置动态链接器运行时绑定以创建必要的链接并使用ldconfig 命令](http://linux.die.net/man/8/ldconfig)缓存到最新的共享库时，我遇到了同样的问题，并且我解决了它。

所以你需要使用以下命令：

```
sudo ldconfig /usr/local/lib 
```

[实际上，我建议使用how-to-install-image-magick-and-setup-paperclip](http://robmclarty.com/blog/how-to-install-image-magick-and-setup-paperclip)中的步骤重新安装 imagemagick 。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-21T00:29:47.657

仅作记录：

```
brew uninstall libtool
brew install libtool
brew uninstall jpeg
brew install jpeg
brew link --overwrite jpeg
brew unlink freetype && brew link freetype 
```

# lucene.net - Lucene.NET 与 Windows Azure

> ID：15744856
> 
> 赞同：1
> 
> 时间：2013-04-01T13:58:16.157
> 
> 标签：lucene.net, azure-blob-storage

我有一个托管在 Windows Azure 上的 ASP.NET MVC 4 站点。我需要在这个站点中进行全文搜索，所以我使用了 Lucene.NET。Lucene 使用 Windows Azure Blob 来存储索引文件。目前，查询需要很长时间（大约 1 分钟）。当我查看 Fiddler 时，我注意到有 285 个请求被发送到 Blob 存储。

我的 Blob 存储目前只有 10 个文件。最大的文件只有 177kb。我还注意到 Dispose 调用大约需要 20 秒。这是我的代码。我不觉得我在做任何太疯狂的事情

```
IndexWriter indexWriter = InitializeSearchIndex();
if (indexWriter != null)
{
  foreach (var result in cachedResults)
  {
    var document = new Document();
    document.Add(new Field("Name", result.Name, Field.Store.YES, Field.Index.NOT_ANALYZED));
    document.Add(new Field("ID", result.ID.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZED));
    document.Add(new Field("Description", result.Description, Field.Store.YES, Field.Index.NOT_ANALYZED));
    document.Add(new Field("LastActivity", result.LastActivity, Field.Store.YES, Field.Index.NOT_ANALYZED));
    indexWriter.AddDocument(document);
  }
  indexWriter.Dispose();
} 
```

同时，我不确定为什么要花这么长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:58:37.777

如果您的搜索集很小/有界，您可能想查看我编写的 Lucene.NET 目录的缓存（预览）版本 - 它会比基于 blob 的目录快得多：

[https://github.com/ajorkowski/AzureDataCacheDirectory](https://github.com/ajorkowski/AzureDataCacheDirectory)

当然......如果您希望拥有无限数量的文档等，这将不是最佳解决方案。

我知道 Lucene.NET 创建了一堆临时文件，然后将它们组合在一起......也许调用`.Optimise`或类似的东西可能会在它实际到达将它们推送到 blob 存储点之前组合所有临时文件（我认为这step 在较新的 Lucene.NET 版本中已过时...）

# javascript - 从主干集合设置fuelux datagrid源

> ID：15744861
> 
> 赞同：1
> 
> 时间：2013-04-01T13:58:40.163
> 
> 标签：javascript, datagrid, backbone.js-collections, fuelux

我正在尝试从我的骨干集合中设置fuelux 数据网格源。示例源在[https://github.com/ExactTarget/fuelux/tree/master/sample](https://github.com/ExactTarget/fuelux/tree/master/sample)上。

我累了喜欢

```
(function (root, factory) {
 if (typeof define === 'function' && define.amd) {
 define(factory);
 } else {
    root.sampleData = factory();
   }
}(this, function () {
return { 
          "geonames": new mycollection ///this will retrurn new collection array as in     example
   };
})); 
```

我的主干渲染包括以下代码来建立数据源

```
 var dataSource = new StaticDataSource({
            columns: [
                {
                    property: 'username',
                    label: 'Name',
                    sortable: true
                },
                {
                    property: 'username',
                    label: 'Country',
                    sortable: true
                },
            data: this.collection,
            delay: 250
        });
        $('#MyGrid').datagrid({
            dataSource: dataSource,
            stretchHeight: true
        }); 
```

我收到错误未定义静态数据源。

谁能给我解释一下？或者，如果你能帮助我对教程的任何参考，它很好地解释了如何从骨干集合中设置数据源数据，我将非常感激？在我看来，fuelux dosent 有很好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:20:07.960

[https://github.com/ExactTarget/fuelux/blob/master/sample/datasource.js](https://github.com/ExactTarget/fuelux/blob/master/sample/datasource.js)上的示例数据源允许您使用简单的 JavaScript 对象填充数据网格，您可以通过调用集合从 Backbone 集合中获取该`.toJSON()`对象. 然后，按如下方式实例化数据源：

[https://github.com/ExactTarget/fuelux/blob/master/index.html#L112-L138](https://github.com/ExactTarget/fuelux/blob/master/index.html#L112-L138)

（将列替换为您自己的网格所需的内容，并替换`data: sampleData.geonames`为`data: yourCollection.toJSON()`）

然后，您应该能够按如下方式实例化数据网格：

[https://github.com/ExactTarget/fuelux/blob/master/index.html#L144-L147](https://github.com/ExactTarget/fuelux/blob/master/index.html#L144-L147)

注意：这会对您的数据进行一次性快照并将其提供给数据网格。如果您希望您的数据网格支持针对您的 Backbone 集合的实时查询，那么只需提供一个对您的集合进行这些查询的数据源即可。数据源模式允许最终开发人员将数据网格连接到任何类型的数据提供者。这是另一个使用 Flickr API 的示例：http: [//dailyjs.com/2012/10/29/fuel-ux/](http://dailyjs.com/2012/10/29/fuel-ux/)

我不知道有任何专门针对 Backbone 的现有数据源示例，但如果有人没有击败我，我可能会创建一个 - 我也非常喜欢 Backbone。

# apache - 如何检查 .htaccess 中特定文件夹中是否存在文件？

> ID：15744865
> 
> 赞同：0
> 
> 时间：2013-04-01T13:58:46.447
> 
> 标签：apache, .htaccess, url, mod-rewrite, uri

这是我的代码，

```
RewriteCond %{DOCUMENT_ROOT}application/public%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}application/public%{REQUEST_URI} -d 
RewriteRule application/public/.* - [L] 
```

但是当我进入它时，`localhost/css/style.css`它是 404 页面，虽然`application/public/css/style.css`存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:29:53.130

我想你的意思是：

```
RewriteEngine On
RewriteBase /

RewriteRule ^application/public/.* - [L]

RewriteCond %{DOCUMENT_ROOT}/application/public%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/application/public%{REQUEST_URI} -d 
RewriteRule .* /application/public/$0 [L] 
```

当 url 以 . 开头时，第一个 rewriteRule 阻止执行以下规则`/application/public/`。它还可以防止多次应用以下规则，尽管在这种特定情况下不太可能发生这种情况。

当且仅当请求的文件名/目录存在于该文件夹中时，第二条规则（-set）将在内部将所有请求重定向到该`/application/public/`文件夹​​。

# excel - 复制范围内的多行

> ID：15744867
> 
> 赞同：0
> 
> 时间：2013-04-01T13:58:53.613
> 
> 标签：excel, vba

目前我有一个宏，它在另一个文档中查找并在存在值时复制一个偏移单元格。我已经有下面的代码（只有选择/复制偏移单元格的部分），但它只会复制一行。这对于我正在搜索的大多数项目都很好。有谁知道如何修改下面的代码以复制包含我搜索值的所有单元格？

```
For I = LBound(MyArr) To UBound(MyArr)

Set Rng = .Find(What:=MyArr(I), _
                        After:=.Cells(.Cells.Count), _
                        LookAt:=xlPart, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)

If Not Rng Is Nothing Then
            FirstAddress = Rng.Address
            Do
                'mark the cell in the column to the right if "Ron" is found
                Rng.Offset(0, 4).Select
                'Rng.Copy "A" & Rcount
                Set Rng = .FindNext(Rng)
            Loop While Not Rng Is Nothing And Rng.Address <> FirstAddress
            Selection.Copy (Rng)
        End If
    Next I
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:36:48.853

我建议的是 .Find 方法的循环。

所以你有一系列数据，即 MyArr 想象它的 50 个项目长。您想从 0 到 50 查找，直到找到您的项目。

假设您在第 8 位找到它。现在您进行另一次搜索，但这次是从第 9 项到第 50 项，看看您是否找到匹配项。如果你不知道，就没有更多了。如果您这样做，则重复上述操作，直到数组（范围）中的元素用完或没有更多匹配项为止。那有意义吗？

# python - 如何获取图像的类型（RGB 或 GREY）

> ID：15744880
> 
> 赞同：1
> 
> 时间：2013-04-01T13:59:22.363
> 
> 标签：python, gimp

我正在尝试使用 GIMP python 插件[Density Brush Fill](http://registry.gimp.org/node/25834)。在一个地方，它假设它被用于彩色图像，并在与灰度图像一起使用时崩溃：

```
self.layer=gimp.Layer( self.image,[...], RGBA_IMAGE, 100, NORMAL_MODE) 
```

修复会很容易，但是我还没有找到任何 API 文档`image`。如何获取图像的类型（颜色或灰度）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:50:49.543

在 GIMP Python 文档的[**图像对象**](http://www.gimp.org/docs/python/index.html#image_object)部分中，它提到了一个`image.base_type`听起来像你想要的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T10:53:14.797

如何获得频道数量？1,2,3,4 = 灰色,灰色,RGB,RGBA

但我必须承认我根本不知道频道是否有名称和/或频道的位置是否定义了内容或名称。

# java - 带有 JScrollPane 的面板 - 保持组件的首选高度

> ID：15744881
> 
> 赞同：0
> 
> 时间：2013-04-01T13:59:26.957
> 
> 标签：java, swing, jscrollpane, vertical-scrolling

我有一个带有 JScrollPane 的 mainPanel。这最初有一个内部具有固定高度的按钮。

mainPanel 的高度应固定为按钮高度的 3 倍。

因此，最初 mainPanel 应该是按钮和按钮下方的一些可用空间。

现在，我向 mainPanel 动态添加按钮，这些按钮必须垂直添加，并且在三个按钮之后必须启动滚动条。

我应该为 mainPanel 使用哪个布局管理器来实现此效果？

# java - 使用关键字 throws 声明抛出运行时异常

> ID：15744886
> 
> 赞同：5
> 
> 时间：2013-04-01T13:59:52.337
> 
> 标签：java, exception-handling

对我来说，这些代码

```
static int faktorial (int n) throws ArithmeticException {
  if ((n < 0) || (n > 31)) { 
    throw new ArithmeticException();
  } 
  if (n > 1) {
    return n * faktorial(n - 1);
  } 
  else {
    return 1;
  }    
} 
```

和没有相同的代码

```
throws ArithmeticException 
```

做同样的事情，当我使用以下代码时：

```
public static void main(String[] args) {
  try {
    int n;
    Scanner sc = new Scanner(System.in);  

    System.out.print("Insert integer number: ");        
    n = sc.nextInt();         
    System.out.println(n + "! = " + faktorial(n));
  }
  catch (InputMismatchException e) {
    System.out.println("Not an integer number!");
    e. printStackTrace();
  }
  catch (RuntimeException e) {
    System.out.println("Number is too big!");
    e. printStackTrace();
  }
} 
```

如果使用，有人可以描述我吗

```
 throws ArithmeticException 
```

在我的代码中有一些优势。

我也会欣赏一些使用关键字的好例子`throws`。非常感谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T14:01:04.903

由于[`ArithmeticException`](http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html)是[未经检查的异常](https://stackoverflow.com/questions/8104407/cant-java-unchecked-exceptions-be-handled-using-try-catch-block)，因此在`throws`规范中列出它对编译器而言没有任何影响。

尽管如此，我认为将`throws`规范保留用于文档目的是一个好主意。

也就是说，`ArithmeticException`当使用无效参数调用函数时可能不是正确的异常。使用[`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)会更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:03:49.913

上面的方法签名使用表达式`throws ArithmeticException`告诉此函数的用户该方法可能会引发此异常，他们应该知道并捕获它（如果他们想要 - “想要”只是因为这个异常没有被检查 - 并计划一个解决方法）案子）。

除了 ArithmeticException 不是在这种情况下使用的正确例外（从技术上讲，您可以使用其中任何一个）。更好的抛出异常是`IllegalArgumentException`因为它暗示传入的参数不正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T14:20:06.017

除了beeing 所说的，我发现还有一个好处可以帮助我编写代码。

Eclipse 可以使用该信息（使用 声明该方法`throws RuntimeException`）并（根据需要）添加**适当的**catch 子句。

让我们看看这个：

```
public static void main(String[] args) {
    test();
}

private static void test() {
    foo();
    bar();
    baz();
}

public static void foo() {

}

public static void bar() throws NullPointerException {

}

public static void baz() throws IllegalArgumentException {

} 
```

添加`try/ catch block`inside 方法`test`将导致：

```
private static void test() {
    try {
        foo();
        bar();
        baz();
    } catch (NullPointerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这很好，不是吗？但是，它仅适用于 1 级方法调用，因此它不会因多次捕获运行时异常而污染更高级别的抽象：

```
public static void main(String[] args) {
    try {
        test();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private static void test() {
    foo();
    bar();
    baz();
} 
```

这也很好。

无论如何，看到 javadoc 中的 throws 可能更重要:)

```
void Test.baz() throws IllegalArgumentException 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T14:12:53.470

由于 Java 没有提供简单的 True/False 标志来确定给定的异常是已[检查还是未检查](http://www.javapractices.com/topic/TopicAction.do?Id=129)，所以您需要了解您（作为程序员）必须处理哪些类型的异常（捕获或重新抛出）和您可以选择不处理（实际上忽略）。

特别是，整个`RunTimeException`类是未经检查的，并且`ArithmeticException`是它的子类。

# mysql - sql命令还是动态编程？

> ID：15744887
> 
> 赞同：0
> 
> 时间：2013-04-01T13:59:57.243
> 
> 标签：mysql, sql, dynamic-programming

假设我的数据库中有 1 GB 的数据。我想做这样的事情：

> 如果用户搜索一个句子，说“Hello world，我在这里。”，程序应该能够返回找到这个确切字符串的数据（行）以及具有相似文本的行，例如，“Hello world is a著名的字符串，我敢肯定！'。

我的问题是：哪一个会更有效——一个 sql 命令还是一个动态编程概念？

如果 sql 更高效，可以使用什么命令来做同样的事情？

我正在使用 mysql 5.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:11:26.700

您想使用 MySQL 的全文功能，[此处](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)记录了这些功能。

基本上，您需要的数据结构是倒排索引。对于每个单词，它包含该单词在所有文档中的位置。有了这些信息，你就可以开始把事情拼凑起来了。

在大多数情况下，您最好使用已建立的软件来执行此操作，而不是编写自己的软件。我不想阻止你，如果你真的想的话，但问题可能比你想象的要难。

# grails - 视图的 Grails 国际化

> ID：15744890
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:00:15.100
> 
> 标签：grails, internationalization, grails-2.0, grails-2.2

在 Grails 视图中，我需要根据用户选择的语言更改标签、按钮等的语言。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:33:08.053

我找到了解决我的问题的方法。

脚手架的一大优点是，将屏幕上的元素国际化是一件轻而易举的事！i18n 文件夹中已经为十几种语言提供了 Home 和 Create 的默认翻译。实体本身的名称（“产品”）及其属性可以通过以下约定来定义：[实体名称].label 和 [实体名称].[属性名称].label – 请参阅您的 Grails 安装 /src/grails/模板/脚手架文件夹。

看看我们如何将一些东西翻译成荷兰语，通过向 messages_nl.properties 添加一些键：

```
product.label=Product
product.name.label=Naam
product.status.label=Status 
```

这是链接（[http://tedvinke.wordpress.com/2012/08/22/grails-scaffolding-enums-and-i18n/](http://tedvinke.wordpress.com/2012/08/22/grails-scaffolding-enums-and-i18n/)）

# jasper-reports - 在 jasperreports 5.0 中替换 aspose JRPptExporterParameter.PPT_TEMPLATE_PRESENTATION

> ID：15744891
> 
> 赞同：0
> 
> 时间：2013-04-01T14:00:16.730
> 
> 标签：jasper-reports, export, powerpoint, aspose

我正在使用 jasperreports 和 aspose 库（来自 aspose 的 ppt 导出器）生成一个 ppt 报告。我正在尝试从项目中消除 aspose 并使用 jasperreports 5.0 中的 ppt 导出器。问题是目前生成的报告需要一个使用 aspose 添加的外部 .pot 文件：

```
com.aspose.slides.jasperreports.JRPptExporter exporter = new com.aspose.slides.jasperreports.JRPptExporter();
......
exporter.setParameter(com.aspose.slides.jasperreports.JRPptExporterParameter.PPT_TEMPLATE_PRESENTATION, pptTemplate);
exporter.exportReport(); 
```

我在 jasperreports 的 JRExporterParameter 中没有找到任何类似的参数，也找不到任何有效的解决方案。有没有使用外部 .pot 文件的方法？我正在考虑从 .pot 文件创建第二个 JasperPrint 对象，然后导出两个 JasperPrint 对象设置 JRExporterParameter.JASPER_PRINT_LIST

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:52:03.893

不确定这是否适合您，但我编写了一个基于 Apache POI 的自定义 PPTX 导出器（只有 pptx，不是二进制 ppt）。[POI 元素](http://poi.apache.org/apidocs/org/apache/poi/xslf/usermodel/XMLSlideShow.html#XMLSlideShow(java.io.InputStream))可以通过你自己的模板 pptx 来初始化（我的版本中还没有实现）。

[https://code.google.com/p/pptx-shape-exporter/](https://code.google.com/p/pptx-shape-exporter/)

如果您觉得这听起来很有趣，请给我留言。

# marionette - 木偶 CRUD 示例

> ID：15744892
> 
> 赞同：4
> 
> 时间：2013-04-01T14:00:21.293
> 
> 标签：marionette

我正在尝试开发一个 Backbone Marionette 应用程序，我需要知道如何以最佳方式执行 CRUD（创建、读取、更新和销毁）操作。我找不到任何解释这一点的资源（仅适用于 Backbone）。

有什么例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:17:05.677

Marionette 是 Backbone 之上的一个库，可以将其视为 jQuery 的 jQueryUI，旨在帮助您扩展应用程序，允许您对其进行模块化，其中包括避免您编写大量重复代码。所以不会有很多 CRUD 的例子，这些例子会试图证明木偶的好处。

但是我认为这两个教程会对您有所帮助。

[http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/) [http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-教程第 2 部分/](http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/)

[http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/](http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/) [http://davidsulc.com/blog/2012/05/13/tutorial-一个完整的骨干木偶应用程序第 2 部分/](http://davidsulc.com/blog/2012/05/13/tutorial-a-full-backbone-marionette-application-part-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-16T10:58:59.170

您可以在此处找到更高级的 CRUD 应用程序示例：

[https://github.com/nuragic/marionette-bootstrap](https://github.com/nuragic/marionette-bootstrap)

它（除其他外）说明了如何使用“模块”构建应用程序。

# android - XMPP 连接到服务器“正常”，但高级搜索不起作用

> ID：15744894
> 
> 赞同：0
> 
> 时间：2013-04-01T14:00:38.710
> 
> 标签：android, xmpp

我正在使用 XMPP 服务器创建聊天应用程序。一切都很好，我可以和其他人聊天。但是现在，我想显示来自 XMPP 服务器的所有用户名。所以我正在使用“UserSearchManager”类。

我看到我可以登录用户并且可以聊天。但我收到错误“服务不可用（503）”。

这是我的代码：-

```
String host = "115.xxx.xxx.xxx";
    String port = "5222";
    String service = "115.xxx.xxx.xxx";
    String username = "rawat";
    String password = "rawat"; 

    // Create a connection
    ConnectionConfiguration connConfig =
            new ConnectionConfiguration(host, Integer.parseInt(port),service);
    connConfig.setSASLAuthenticationEnabled(true);
    connection = new XMPPConnection(connConfig);

    try {
       connection.connect();

        Log.i("XMPPClient", "[SettingsDialog] Connected to " + connection.getHost());
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
        Log.e("XMPPClient", ex.toString());
        xmppClient.setConnection(null);
    }
    try {
        UserSearchManager search = new UserSearchManager(connection);  
        connection.login(username, password);
        Log.i("XMPPClient", "Logged in as " + connection.getUser());

        // Set the status to available
        Presence presence = new Presence(Presence.Type.available);
        connection.sendPacket(presence);
        xmppClient.setConnection(connection);

        Form searchForm = search.getSearchForm("search."+connection.getServiceName());

        Form answerForm = searchForm.createAnswerForm();  
        answerForm.setAnswer("Username", true);  

        answerForm.setAnswer("search", "test");  

        org.jivesoftware.smackx.ReportedData data = search.getSearchResults(answerForm,"search."+connection.getServiceName()); 
        System.out.println("data are "+data); 
```

----这条线---

```
 Form searchForm = 
search.getSearchForm("search."+connection.getServiceName()); 
```

给我空指针异常。

请高手看看。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T11:51:57.817

在您的活动中使用以下代码并按如下方式调用**configure(ProviderManager.getInstance());** 在登录您的连接之前

```
public static void configure(ProviderManager pm) {

    // Private Data Storage
    pm.addIQProvider("query", "jabber:iq:private",
            new PrivateDataManager.PrivateDataIQProvider());

    // Time
    try {
        pm.addIQProvider("query", "jabber:iq:time",
                Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        Log.w("TestClient",
                "Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    // Roster Exchange
    pm.addExtensionProvider("x", "jabber:x:roster",
            new RosterExchangeProvider());

    // Message Events
    pm.addExtensionProvider("x", "jabber:x:event",
            new MessageEventProvider());

    // Chat State
    pm.addExtensionProvider("active",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("composing",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("paused",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("inactive",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("gone",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    // XHTML
    pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im",
            new XHTMLExtensionProvider());

    // Group Chat Invitations
    pm.addExtensionProvider("x", "jabber:x:conference",
            new GroupChatInvitation.Provider());

    // Service Discovery # Items
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#items",
            new DiscoverItemsProvider());

    // Service Discovery # Info
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#info",
            new DiscoverInfoProvider());

    // Data Forms
    pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

    // MUC User
    pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user",
            new MUCUserProvider());

    // MUC Admin
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin",
            new MUCAdminProvider());

    // MUC Owner
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner",
            new MUCOwnerProvider());

    // Delayed Delivery
    pm.addExtensionProvider("x", "jabber:x:delay",
            new DelayInformationProvider());

    // Version
    try {
        pm.addIQProvider("query", "jabber:iq:version",
                Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        // Not sure what's happening here.
    }

    // VCard
    pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

    // Offline Message Requests
    pm.addIQProvider("offline", "http://jabber.org/protocol/offline",
            new OfflineMessageRequest.Provider());

    // Offline Message Indicator
    pm.addExtensionProvider("offline",
            "http://jabber.org/protocol/offline",
            new OfflineMessageInfo.Provider());

    // Last Activity
    pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

    // User Search
    pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

    // SharedGroupsInfo
    pm.addIQProvider("sharedgroup",
            "http://www.jivesoftware.org/protocol/sharedgroup",
            new SharedGroupsInfo.Provider());

    // JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses",
            "http://jabber.org/protocol/address",
            new MultipleAddressesProvider());

    // FileTransfer
    pm.addIQProvider("si", "http://jabber.org/protocol/si",
            new StreamInitiationProvider());

    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams",
            new BytestreamsProvider());

    // Privacy
    pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());
    pm.addIQProvider("command", "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider());
    pm.addExtensionProvider("malformed-action",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.MalformedActionError());
    pm.addExtensionProvider("bad-locale",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadLocaleError());
    pm.addExtensionProvider("bad-payload",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadPayloadError());
    pm.addExtensionProvider("bad-sessionid",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadSessionIDError());
    pm.addExtensionProvider("session-expired",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.SessionExpiredError());
} 
```

# c# - 用剃刀写双引号

> ID：15744896
> 
> 赞同：1
> 
> 时间：2013-04-01T14:00:46.873
> 
> 标签：c#, razor, asp.net-mvc-4

我是剃须刀的新手，我遇到了这个问题。怎么办？如果满足条件，我需要编写一个 id 属性。这是我尝试过的：

```
<select name="@LabelName" @if(LabelName.Contains("CHECK_STATUS")) { var id = "string\'"; @id }>//it prints string&#39;.

<select name="@LabelName" @if(LabelName.Contains("CHECK_STATUS")) { ViewBag.id = "id='check'"; @ViewBag.id }>//same problem id=&quoute;check&quoute; 
```

建议？我需要打印那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:03:29.807

你是怎么进入这个标签汤的（我猜，和其他人一样，你没有使用视图模型）？您拥有旨在生成下拉菜单的 HTML 帮助程序。你知道的，比如：

```
@Html.DropDownListFor() 
```

但是如果你想继续在汤里游泳，你可以使用三元运算符有条件地输出 id 属性：

```
<select name="@LabelName"@Html.Raw(LabelName.Contains("CHECK_STATUS") ? string.Format(" id=\"{0}\"", id) : "")> 
```

或者如果 id 在 ViewBag 中：

```
<select name="@LabelName"@Html.Raw(LabelName.Contains("CHECK_STATUS") ? string.Format(" id=\"{0}\"", ViewBag.id) : "")> 
```

请注意您应该如何使用 Html.Raw 帮助器来避免对值进行 HTML 编码（这是该`@`函数默认执行的操作）

# node.js - Connect/Express 中的“session”和“cookieSession”中间件有什么区别？

> ID：15744897
> 
> 赞同：49
> 
> 时间：2013-04-01T14:00:49.887
> 
> 标签：node.js, session, express, connect, middleware

Connect/Express 捆绑了两个与会话相关的中间件。有什么不同？我该如何选择？

我假设[会话中间件与](http://www.senchalabs.org/connect/session.html)[cookieSession](http://www.senchalabs.org/connect/cookieSession.html)中间件相同，但具有额外的存储机制。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-01T14:14:14.757

默认情况下，会话中间件使用内存存储实现[通用](http://www.senchalabs.org/connect/session.html#session)*会话*功能。不过，它允许您指定其他存储格式。

另一方面，cookieSession 中间件实现了cookie[支持](http://www.senchalabs.org/connect/cookieSession.html)*的*存储（也就是说，整个会话被序列化为 cookie，而不仅仅是一个会话密钥。它应该只在会话数据保持相对较小时使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-20T06:55:46.147

两个中间件都使用客户端 cookie 来维护用户的上下文，即*Session*。区别在于：

*   存储在 cookie 中的内容，以及
*   是否需要服务器端存储

下表比较[了 cookieSession 中间件](http://www.senchalabs.org/connect/cookieSession.html)和[会话中间件](http://www.senchalabs.org/connect/session.html)wrt Sessions：

```
+----------------+-----------------------+----------------------+
|                |   Client-side store   |   Server-side store  |
|                |        (cookie)       |  (in-memory, db ..)  |
+----------------+-----------------------+----------------------+
| Middleware     | Used?  |    Content   | Used? |    Content   |
+----------------+--------+--------------+-------+--------------+
| session        |   Yes  |  Session ID  |  Yes  | Session data |
+----------------+--------+--------------+-------+--------------+
| cookie-session |   Yes  | Session data |   No  |      N/A     |
+----------------+--------+--------------+-------+--------------+ 
```

[cookieSession 中间件](http://www.senchalabs.org/connect/cookieSession.html)更*简单*，因为它不需要任何额外的服务器端存储，即服务器保持完全无状态。[会话中间件](http://www.senchalabs.org/connect/session.html)需要服务器端存储。默认的基于内存的会话存储的一个明显限制是它在有多个服务器实例时不起作用。在这种情况下，将需要一个替代的共享存储（例如，数据库），这使得它相对复杂。但总的来说，会话​​中间件更常用，因为它更灵活（用于存储敏感数据或更大的有效负载等）

# java - Java - 等待流完成写入？

> ID：15744898
> 
> 赞同：5
> 
> 时间：2013-04-01T14:00:50.463
> 
> 标签：java, android, sockets, bytearray, outputstream

我有一个在java中运行的“服务器”，我通过字节数组将文件发送到一个“客户端”（android系统）。该功能工作正常，但我注意到当我尝试发送更大的文件（1MB +）时，它在关闭之前没有成功写入所有字节（例如：尝试发送 5mb，它只发送了 902 个字节）。有没有办法让代码在关闭流之前等待流完成写入？下面是代码和堆栈跟踪。本质上，发送消息方法在附加和发送文件时调用（在处理 GUI 的类中）。在这种情况下，我并没有尝试从客户端接收数据，只是将数据发送到客户端。

编辑：我知道我现在只有字节数组设置为 1MB。我有它 5MB，它仍然只写 <1MB。即使是 1MB，它仍然只写入 902 字节。

EDIT2：我在客户端发布了一些处理接收数据的代码。

```
public void sendMessage(File file) {
    if(mOut != null) {
        try {
            FileInputStream inStream = new FileInputStream(file);               
            byte[] message = new byte[1024 * 1024];
            inStream.read(message);
            mOut.write(message, 0, message.length);
            mOut.flush();
            inStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
    }
}

public void run() { 
    super.run();
    running = true;
    try {
        System.out.println("S: Connecting...");
        ServerSocket serverSocket = new ServerSocket(SERVERPORT);
        Socket client = serverSocket.accept();
        linked = true;
        System.out.println("S: Receiving...");

        try {
            mOut =client.getOutputStream();
            InputStream in = client.getInputStream();
            while(running) {
                byte[] message = new byte[1024 * 1024];
                 in.read(message);
                if(message != null && messageListener != null) {
                    messageListener.messageReceived(message);
                }
            }
        } catch (Exception ex) {
            System.out.println("S:Error");
            ex.printStackTrace();
        } finally {
            client.close();
            System.out.println("S:Done");
        }
    } catch (Exception ex) {
        System.out.println("S: Error");
        ex.printStackTrace();
    }

}
---------------------------------------------------------------------------
java.net.SocketException: Connection reset by peer: socket write error
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(Unknown Source)
at java.net.SocketOutputStream.write(Unknown Source)
at Server.sendMessage(Server.java:34)
at ServerBoard$2.actionPerformed(ServerBoard.java:57)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at Server.run(Server.java:58) 
```

这是客户端的代码片段。

```
 public void run() {
    mRun = true;
    serverMessage = new byte[1024 * 1024];
    try {
        InetAddress serverAddr = InetAddress.getByName(SERVERIP);
        Log.e("TCP Client", "C:Connecting...");
        Socket socket = new Socket(serverAddr, SERVERPORT);
        try {
            in = socket.getInputStream();
            while(mRun) {
                 in.read(serverMessage);
                if(serverMessage != null && mMessageListener != null) {
                    mMessageListener.messageReceived(new String(serverMessage));
            }
                serverMessage = null;
            }

            Log.e("RESPONSE FROM SERVER","S:Received Message: '" + serverMessage + "'");

        } catch(Exception ex) {
            Log.e("TCP","S: Error", ex);
        } finally {
            socket.close();
        }
    } catch(Exception ex) {
        Log.e("TCP","C: Error", ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:48:20.863

首先，JavaDoc 的[read](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)：

> 从输入流中读取一些字节并将它们存储到缓冲区数组 b. 实际读取的字节数以整数形式返回。在输入数据可用、检测到文件结尾或引发异常之前，此方法会一直阻塞。

由于源是一个套接字，它可能返回比预期更少的字节，即使缓冲区大小为 1 MByte，返回 902 KBytes 也是可以的。您必须循环直到流结束。

以下方法读取所有字节，而不是调用侦听器：

```
byte[] message = new byte[0]; 
byte[] buffer  = new byte[4096];
int    len;
while(( len = is.read( buffer )) > -1 ) {
   byte[] tmp = new byte[message.length+len];
   System.arraycopy( message, 0, tmp, 0, message.length );
   System.arraycopy( buffer , 0, tmp, message.length, len );
   message = tmp;
}
messageListener.messageReceived( message ); 
```

如您所见，发生了很多重新分配：您必须重新设计协议以首先发送文件的大小并分配一次接收缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:21:55.113

在完成读取之前，您将读取缓冲区设置为 null：

```
 in = socket.getInputStream();
 while(mRun) {
     in.read(serverMessage);
     if(serverMessage != null && mMessageListener != null) {
         mMessageListener.messageReceived(new String(serverMessage));
     }
     serverMessage = null;
} 
```

这将导致 NullPointerException 并且您的代码将关闭套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-15T14:37:09.823

设置`socket.setSendBufferSize(1024)`（您用来发送）还确保在接收时读取大块`1024`字节。

# android - 性能比较：AsyncTasks vs Threads

> ID：15744904
> 
> 赞同：6
> 
> 时间：2013-04-01T14:01:21.150
> 
> 标签：android, android-asynctask

在我的应用程序中，我必须调用一个完成一些繁重工作的方法（我能感觉到设备滞后）。为了避免这种情况，我创建了一个`AsyncTask`，它工作得非常好。

我也使用 a 和在这里实现了同样的事情`Thread`，它不会产生任何问题并且工作正常。

现在我的问题是哪一个性能更好 - `AsyncTask`或`Thread`.

我知道`AsyncTask`使用线程池来执行后台任务，但在我的情况下它只会被调用一次。所以我认为这不会造成任何问题。

有人可以对此有所了解。我应该使用哪个以获得更好的性能？

注意：两者都在我的活动中被调用，例如从 UI 线程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:58:05.223

> 有人可以对此有所了解。我应该使用哪个以获得更好的性能？

我想如果你想象一下当你启动一次原生 Thread 和 AsyncTask 时的情况，我认为性能不会有所不同。

如果您不想`USER`通过`UI`. 在这里，本机线程失败，因为它们与`UI`线程不同步，您无法使用它们执行 UI 操作。

另一方面，AsyncTask 将后台工作与 UI 工作相结合，并提供与 UI 同步的方法，并允许通过调用其生命周期的适当方法随时执行 UI 更新。

通常，如果某些任务持续时间超过 5 秒，您应该`USER`告知

*“正在后台工作，请等到它完成”*

当然，这可以通过两种不同的方式实现，但这在很大程度上取决于您的任务的性质 - 如果您需要显示任务的进度（已经下载了多少 MB，复制文件的数量并显示每个正在进行的对话框的名称等等）或者你不这样做（例如，仅使用开始和结束消息在“静默”中创建一些大数据结构）。

所以在我的回答结束时：

> 我应该使用哪个以获得更好的性能？

我认为您无法得到完全正确的答案，因为每个开发人员都有不同的经验，不同的编码风格。我如何提到，他们的表现没有什么不同。我认为它是相同的（如果您将读取 50 MB 文件，则读取本机线程和 AsyncTask 都不会更快）。这又取决于任务的性质和您的个人选择。

## 更新：

对于可以持续更长时间的任务，您还可以尝试考虑包`API`提供的工具[`java.util.concurrent`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)（ThreadPoolExecutor、FutureTask 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:25:05.013

异步任务也是线程。但是他们有一些实用方法可以很容易地处理小型后台任务并返回 UI 对其进行更改。性能将取决于您的具体用例。就哪一个总是更好做出绝对的陈述将是简单化和毫无意义的。

请注意，与线程相比，异步任务的主要优势在于异步任务提供了辅助方法，例如`onPreExecute()`、`doInBackground()`，这使得在`onProgressUpdate()`与`onPostExecute()`UI 交互（例如更新进度条）的同时执行简短的后台任务变得非常容易。这些类型的方法在通用线程中不可用。基本上，异步任务是内置 UI 交互组件的线程。是的，您也可以使用变通方法尝试从常规线程更新 UI，但异步任务是专门为此目的而构建的，您不必处理 Context如果你遵循它的抽象，泄漏等等。

创建异步任务是为了让开发人员的生活更轻松。

总结一下：

*   异步任务也是线程
*   异步任务可以在执行简短的后台任务时轻松与 UI 交互
*   两者本质上都不是更有效的。这取决于你想做什么。
*   好的经验法则：如果您在完成后台任务后需要返回/更新 UI，请使用异步任务。如果不这样做，请使用常规线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:17:23.493

最常见的用途`Thread`是短期任务，因为它们需要大量电力并且往往会耗尽电池并加热手机。由于相同的电池消耗
，通常使用的是冗长的任务。但是线程要强大得多，因为 AsyncTasks 内部使用线程本身，但您不必配置那么多。`AsyncTasks`

# html - HTML 和 CSS 浏览器兼容性问题

> ID：15744906
> 
> 赞同：0
> 
> 时间：2013-04-01T14:01:40.950
> 
> 标签：html, css, cross-browser

我最初在 Chrome 中创建了我的导航，结果完全符合我的需要。然后我发现 Mozilla Firefox 不会输出相同的结果，Member Action 和 Admin Related 下的下拉菜单将按照我的意愿垂直显示而不是水平显示。然而，我最大的失望是在 Internet Explorer 中测试导航，它甚至不会显示下拉菜单。我非常感谢有人检查以下代码和您的反馈，谢谢。

**通过更改 css 中的一行来**解决问题；****

 **# 导航 ul li {浮动：左；列表样式：无；}

HTML

```
<div id="navigationContainer"> 
<div id="navigation"> 
<ul>
<li class="borderleft"><a href="homepage.jsp">Home</a> </li>
<li><a href="Registration.jsp">Register</a> </li>
<li><a href="searchCar.jsp">Search cars</a></li>
<li><a href="DisplayAll.jsp">Display all cars</a></li> 
<li><a href="#">Member Actions</a>
<ul> <!-- Open drop down menu -->
<li class="bordertop"><a href="Login.jsp">Login</a></li> 
<li class="floatLeft"><a href="Member.jsp">Member Area</a></li>
<li><a href="ReserveCar.jsp">Reservation</a></li>

<li><a href="ContactUs.jsp">Contact us</a></li>
<li><a href="#">Admin Related</a>
<ul> 
<li class="bordertop"><a href="braking.html">Insert new car</a></li>
<li><a href="weather.html">Delete a car</a></li>
</ul> 
</li> 
</ul>
</div>
</div>

</BODY>
</HTML> 
```

CSS

```
* {padding: 0%; margin 0%; } /* Overwrites the browser stylesheet */

#navigationContainer {background:url(images/navi.png); width:100%;position: relative; white-space:nowrap; word-spacing:0; } 

#navigation {width:1200px; height:65px; position: relative; font-family: Arial; margin: 2px auto; font-size: 125%; } 

#navigation ul { list-style-type: none; } 

#navigation ul li {float: left; position: relative; } 

#navigation ul li a { border-right: 2px solid #e9e9e9; padding: 20px; 
display: block; margin: 0 auto; text-align: center; color: black; text-decoration: none; } 

#navigation ul li a:hover { background: blue; color: white; } 

#navigation ul li ul { display: none; } 

#navigation ul li:hover ul {display: block; position: absolute;   } 

#navigation ul li ul li {float:left; position:relative; }

#navigation ul li:hover ul li a { background: #12aeef; color: white; position:relative; margin: 0px auto; border-bottom: 1px solid white; border-right: 1px solid white; width: 119px; }

#navigation ul li:hover ul li a:hover { background: blue;} 

.bordertop { border-top: 1px solid white; } 
.borderleft { border-left: 2px solid #e9e9e9;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:21:11.320

试试这个 [http://jsfiddle.net/Vf3AJ/](http://jsfiddle.net/Vf3AJ/)

示例来自：[http ://www.cssnewbie.com/example/css-dropdown-menu/horizo​​ntal.html](http://www.cssnewbie.com/example/css-dropdown-menu/horizontal.html)

**编辑** 误读水平为垂直。在 IE10、FF 和 Chrome 中测试

附带说明：水平菜单存在严重问题，具体取决于查看器屏幕的宽度。

**CSS**

```
nav {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
}
nav li {
    list-style: none;
    float: left;
}
nav li a {
    display: block;
    padding: 3px 8px;
    text-transform: uppercase;
    text-decoration: none;
    color: #999;
    font-weight: bold;
}
nav li a:hover {
    background: blue;
    color: white;
}
nav li ul {
    display: none;
}
nav li:hover ul, nav li.hover ul {
    position: absolute;
    display: inline;
    left: 0;
    width: 100%;
    margin: 0;
    padding: 0;
}
nav li:hover li, nav li.hover li {
    float: left;
}
nav li:hover li a, navbar li.hover li a {
    color: #000;
}
nav li li a:hover {
    color: white;
} 
```

**HTML**

```
<div id="navigationContainer">
    <nav id="navigation">
        <ul>
            <li class="borderleft"><a href="homepage.jsp">Home</a> 
            </li>
            <li><a href="Registration.jsp">Register</a> 
            </li>
            <li><a href="searchCar.jsp">Search cars</a>

            </li>
            <li><a href="DisplayAll.jsp">Display all cars</a>

            </li>
            <li><a href="#">Member Actions</a>

                <ul>
                    <!-- Open drop down menu -->
                    <li class="bordertop"><a href="Login.jsp">Login</a>

                    </li>
                    <!-- A bordertop class is given to this listed element in order to style a top border for in in the external CSS file. -->
                    <li class="floatLeft"><a href="Member.jsp">Member Area</a>

                    </li>
                    <li><a href="ReserveCar.jsp">Reservation</a>

                    </li>
                </ul>
            </li>
            <li><a href="ContactUs.jsp">Contact us</a>

            </li>
            <li><a href="#">Admin Related</a>

                <ul>
                    <li class="bordertop"><a href="braking.html">Insert new car</a>

                    </li>
                    <li><a href="weather.html">Delete a car</a>

                    </li>
                </ul>
            </li>
        </ul>
    </nav>
</div> 
```**

# xcode - 共享 XCode 配置文件以在多台计算机上构建

> ID：15744912
> 
> 赞同：0
> 
> 时间：2013-04-01T14:01:58.737
> 
> 标签：xcode, provisioning-profile, ios-provisioning

我有一个 iOS 项目，我希望能够在两台不同的 Mac 上构建和签名，并在两台不同的 iPhone 上进行测试。我已将配置文件添加到第二台机器上的 Xcode Organizer，并为第二台 iPhone 添加了 UDID 以在该机器上“用于开发”。

现在配置文件在 XCode Organizer 中，但不能在 **XCode -> Build Settings -> Code Signing**中选择。当我尝试运行该项目时，我收到错误消息“未找到包含任何钥匙串签名证书的未过期配置文件”。

我已尝试删除并重新安装配置文件，但无法将其添加到 XCode 代码签名中。我还尝试通过 iTunes 同步第二部 iPhone 以在手机上安装配置文件，但没有成功。

如何在两台机器上使用相同的配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:28:52.300

要求他向您发送带有该配置文件的关联证书（作为 .p12 文件），通过双击该证书在密钥链访问中安装该证书，然后输入他在将证书导出为 .p12 文件时创建的密码。如果该配置文件是使用该证书制作的，您应该能够在构建设置中选择代码签名身份

# azure - 备份 Microsoft Azure 虚拟机

> ID：15744913
> 
> 赞同：6
> 
> 时间：2013-04-01T14:02:05.230
> 
> 标签：azure, backup, virtual-machine, rackspace, azure-virtual-machine

我目前有一个 Rackspace 云服务器，我想迁移到 Azure 虚拟机。我最近获得了一个 MSDN 订阅，它通过 Azure 免费为我提供一定级别的托管服务，我目前正在为 Rackspace 的该级别服务付费。

然而，关于 Rackspace 的好处之一是我可以安排 VM 映像的每晚/每周备份。在 Azure 上是否有任何机制可以做到这一点？我担心防止数据库损坏（即，如果有人运行 UPDATE 语句而忘记了 WHERE 子句怎么办）。Azure 有这种机制吗？

我知道虚拟机在本地 Azure 存储中存储为 .VHD 文件，但虚拟机映像为 127 gig。即使使用 FIOS 互联网，每晚下载也不会真正成为一种解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:40:56.120

您可以执行异步 blob 复制来制作 vhd 的物理副本。有关 REST API 的详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windowsazure/dd894037.aspx)。此操作在同一个数据中心内非常快（可能几秒钟？）。但是，您不需要进行原始 REST 调用：Azure 跨平台命令行界面中已经实现了一种方法，可[在此处](http://www.windowsazure.com/en-us/downloads/)获得。命令是：

`azure vm disk upload`

您还可以拍摄[blob 快照](http://msdn.microsoft.com/en-us/library/windowsazure/ee691971.aspx)，并稍后返回到以前的快照。快照是只读的（您可以稍后从中复制）并且最初不占用空间。但是，随着存储页面的更改，快照会增长。

但是有一个问题：为什么会有这么大的 VM 映像？您是否将 OS + 数据存储在同一个 vhd 上？如果是这样，安装一个单独的 Azure 驱动器（也存储在 Blob 存储中的 VHD 中）来存储数据并制作独立的副本/快照可能更有意义。

# css - 来自硬盘的 css 图像

> ID：15744919
> 
> 赞同：0
> 
> 时间：2013-04-01T14:02:25.177
> 
> 标签：css, image, load, workspace

我即将构建一个 GUI，我正在尝试通过 css 将图像加载为背景图像。我的 HTML 工作表几乎是空的，除了标题和我加载 GUI 的 div 容器，它是用 JAVA 和 Google Web Toolkit 构建的。

从互联网加载背景图像效果很好！

```
.Bild {
    background: url("http://developer.aldebaran-robotics.com/media/img/home/nao_h25.png")
    no-repeat
    center;
} 
```

但是现在我想从我的硬盘加载它，最好从项目中的文件夹中加载。结构如下所示：

工作区→项目→战争→css文件

工作区→项目→图像→image.png

我通过使用相对路径进行了尝试。我不确定我是否做得正确。它不起作用：

```
.Bild {
    background: url(/images/image.png)
    no-repeat
    center;
} 
```

我相信你能帮助我！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:06:32.400

您需要提供图像文件相对于 css 文件的路径让我们以您的目录结构为例：

```
workspace/
 project/
   war/
      cssfile.css
   images/
      image.png 
```

您相对于 css 文件的图像路径必须是

> ```
> ../images/image.png 
> ```

```
.Bild {
    background: url(../images/image.png)
    no-repeat
    center;
} 
```

这里：`..`表示当前目录之上的一个目录。您可以使用`../../`向上两个目录。

要找出相对路径，您需要向上导航到公共父目录，然后向下走到媒体文件的位置。在这种情况下，公共父目录是上一级的，因此`../`就足够了，然后向下走目录结构`images/image.png`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:06:38.110

语法没有错。所以问题一定出在路径上。通过以斜杠开头的网址`/`，

```
/images/image.png 
```

意味着绝对位置

```
http://some-host-name/images/image.png 
```

那是你的形象吗？

# java - 在未排序的二叉树中搜索字符串

> ID：15744925
> 
> 赞同：0
> 
> 时间：2013-04-01T14:03:09.270
> 
> 标签：java, binary-tree, binary-search-tree

我不确定我需要做什么来搜索存储在二叉树中的字符串。我已经编写了搜索方法，但我不太明白要传递什么。我需要先搜索字符串，然后再将其添加到树中。如果找到，我只需要增加节点对象内的计数器，而不是添加一个新的。顺便说一下，这棵树是未分类的。

我的问题是如何在添加之前搜索它？

```
System.out.println("Enter string to be stored");
stringValue = k.nextLine();
if (theString.isEmpty() == true) {
    node.add(stringValue, count);
} else {
    // I am not sure what to do here
    // How do I send the string to my search method?
    stringValue.treeSearch();
} 
```

* * *

```
public Node treeSearch(String s, TreeNode root){

    if(root.toString().equals(s)){

        return root;
    }
    if(left != null){

        left.treeSearch(s, root.left);
        if(root.toString().equals(s)){
            return root;
        }
    }
    if(right != null){

        right.treeSearch(s, root.right);
        if(root.toString().equals(s)){
            return root;
        }
    }else{
          return null;
            }
} 
```

* * *

我将搜索方法更新为此。

```
 public Node treeSearch(String s, Node root){

 if(root.toString().equals(s)){

    return root;
    }
    if(left != null){

       left.treeSearch(s, root.left);
       return root;
    }
    if(right != null){

      right.treeSearch(s, root.right);
          return root;
    }else{
         return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:20:15.807

搜索左右子树的方式存在错误。例如：

```
if (left != null) {
    left.treeSearch(s, root.left);
    if (root.toString().equals(s)) {
        return root;
    }
} 
```

所以......您搜索左子树，但忽略搜索结果并再次`s`与`root`......比较。

对右子树重复相同的模式。

（因为这闻起来像“学习练习”，所以我会让你找出解决办法。）

* * *

话虽如此，如果您不对二叉树的元素进行排序，那么它作为数据结构几乎毫无用处。您最好将元素存储在列表或数组中。（您的复杂性`treeSearch`是`O(N)`......就像搜索列表或数组一样。）

# c# - 从隐藏窗口运行进程

> ID：15744926
> 
> 赞同：0
> 
> 时间：2013-04-01T14:03:13.883
> 
> 标签：c#, windows, process

尝试从隐藏窗口运行进程时，我遇到了一个奇怪的问题 - 我运行的进程像我的进程一样在隐藏中运行，我做错了吗？我想运行不隐藏的子进程。

```
Process.Start(Path.GetTempPath() + "cleanup.exe", Path.GetDirectoryName(Application.StartupPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:07:31.423

您可以尝试创建一个`Process`类对象，如下所示：

```
Process objProcess = new Process();            
objProcess.StartInfo.UseShellExecute = false;
objProcess.StartInfo.RedirectStandardOutput = true;
objProcess.StartInfo.CreateNoWindow = true;
objProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

// Passing the batch file/exe name
objProcess.StartInfo.FileName = string.Format(strBatchFileName);

// Passing the argument
objProcess.StartInfo.Arguments = string.Format(strArgument);
try
{
 objProcess.Start();
}
catch
{
 throw new Exception("Batch file is not found for processing");
} 
```

# database - 数据库——提交事务计时问题

> ID：15744927
> 
> 赞同：0
> 
> 时间：2013-04-01T14:03:16.120
> 
> 标签：database

我真的很困惑提交事务如何需要一些时间来进行更新。

这是我正在尝试的场景：
1\. 提交事务（所有更新语句）
2\. 转到数据库并尝试获取更新

在这里，当我尝试获取更新时，有时我没有得到最新的更新。
有时我会得到旧版本的数据。

这里有更多细节：在事务中，我有两个更新语句说它在每次更新时将一个 int 字段更新 1 例如：在任何更新之前，我在 db 中有值 5 现在有两个更新的事务将使其变为 7。

提交事务后，我尝试使用连接对象和 PreparedStatement 来获取它。

我得到的结果是 6。不是 7。虽然当我在 DB 上看到 7 时。

因此，我进行了更多调试，并尝试跟踪数据库更新的时间戳和获取数据的时间戳。

令我惊讶的是，我获取数据的时间戳小于上次更新数据库的时间戳。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:03:53.223

就像其他人所说的那样，您的代码可能只会读取已提交的事务。也许您认为您提交了交易，而实际上您并没有。例如，您对 db 的查询可能是未提交的读取（从 x=some_value 和 ur 的表中选择 *）并且您的代码正在执行已提交的读取，这就是您看到不同值的原因。

# android - 如何以编程方式强制从 android 的列表视图中停止所有已检查的应用程序

> ID：15744928
> 
> 赞同：0
> 
> 时间：2013-04-01T14:03:21.173
> 
> 标签：android, kill-process

在下面给定的代码中，我想杀死（强制停止）所有检查的应用程序，但是在重新启动我的应用程序后，它再次显示这些被杀死的应用程序的名称。

我真的不知道他们是不是真的被杀了。为什么会这样？

```
kill.setOnClickListener(new OnClickListener() 
    {
      @Override
     public void onClick(View v) 
     {

                   //Killing selected Apps 

                    String savedapp;
            int code = 0;
            int count = lv.getAdapter().getCount();

            for (int j = 0; j < count; j++)
            {
                if (lv.isItemChecked(j))
                {
                    Intent ints = new Intent(Intent.ACTION_MAIN, null);
                    ints.addCategory(Intent.CATEGORY_LAUNCHER);

                    savedapp = lv.getItemAtPosition(j).toString();
                    nm.removeAll(nm);
                    // this.l = getListView();
                    // l.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
                    PackageManager pm = getApplicationContext().getPackageManager();

                    List<ResolveInfo> intentlist = pm.queryIntentActivities(ints, PackageManager.PERMISSION_GRANTED);

                    ActivityManager am1 = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);

                    List<RunningTaskInfo> processes = am1.getRunningTasks(Integer.MAX_VALUE);

                    if (processes != null) 
                    {
                        for (int i = 0; i < processes.size(); i++) {
                            String packageName = processes.get(i).topActivity
                                    .getPackageName();
                            RunningTaskInfo temp = processes.get(i);
                            try
                            {
                                pName = (String) pm.getApplicationLabel(pm
                                        .getApplicationInfo(packageName,
                                                PackageManager.GET_META_DATA));
                            } 
                            catch (NameNotFoundException e) 
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        //  int f = 0;
                            if (savedapp.equals(pName)) {
                                // finish(pm.);
                                code = intentlist.get(i).activityInfo
                                        .hashCode();
                                finishActivity(code);

                                am1.killBackgroundProcesses(packageName);
                                am1.restartPackage(packageName);
                                android.os.Process.killProcess(temp.id);

                                finishActivity(temp.id);

                                // Toast.makeText(this, packageName,
                                // Toast.LENGTH_SHORT).show();
                                //f = 1;
                            } 
                            else 
                            {
                                nm.add(pName.trim());
                            }

                        }

                    }
                }
            }
}
};//kill button close 
```

# java - 小程序未在tomcat中加载

> ID：15744935
> 
> 赞同：1
> 
> 时间：2013-04-01T14:03:57.807
> 
> 标签：java, tomcat, web-applications, applet, classnotfoundexception

我正在尝试通过tomcat中的webapp加载一个小程序。我有我的类文件，如果我在浏览器中用小程序打开 HMTL 文件，小程序就可以工作。但是，如果我尝试通过 tomcat 服务器打开相同的 HMTL 文件，它会显示`ClassNotFoundException`. 我不明白我在这里错过了什么。

我`applet.html`在 webapp 的根目录中有 HMTL 文件，在学生应用程序文件夹中有类文件和 jar 文件。我的小程序标签为

```
<--applet
  codebase="studentapp/" 
  code="studentapp.class" 
  width="450" height="450" 
  archive="studentapp.jar" /> 
```

当我打开文件时，小程序会识别类`applet.html`文件。但是当我尝试通过 tomcat 服务器打开它时`localhost:8080/student/applet.html`，它显示异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:01:44.153

嗯...

> 本地主机：8080/student/applet.html

我想你应该把你的 applet 学生文件夹放到 Tomcat webapps 文件夹中……:S 不管怎样，在问这类问题之前，请仔细阅读[Tomcat 部署规范](http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html)

* * *

报告这是否有用

# c++ - 使用代码块在 Windows 7 上运行 TBB 代码

> ID：15744936
> 
> 赞同：0
> 
> 时间：2013-04-01T14:03:59.323
> 
> 标签：c++, codeblocks, tbb

我已经为 Windows 7 安装了 TBB 设置并想在其中执行代码。我没有 Visual Studio 设置，我有代码块 IDE。我想在其中执行我的 TBB 代码。请帮助配置代码块。我已经完成了链接器设置，即我已经包含了这个路径中的库

C:\Program Files\Intel\Composer XE 2013\tbb\lib\ia32\

我已将搜索目录设置为

C:\Program Files\Intel\Composer XE 2013\tbb\include\tbb

当我编译它时仍然会给出错误 tbb/task_scheduler_init.h：没有这样的文件或目录。

谁能建议如何在 Windows 中运行 TBB 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:19:32.523

> 我已将搜索目录设置为
> 
> C:\Program Files\Intel\Composer XE 2013\tbb\include\tbb

从错误消息和您提供的文件位置非常清楚，您应该将搜索目录设置为

C:\Program Files\Intel\Composer XE 2013\tbb\include

# c# - 在 Visual Studio 2012 中添加对 JavaScript 项目的 WCF 引用

> ID：15744938
> 
> 赞同：0
> 
> 时间：2013-04-01T14:04:06.870
> 
> 标签：c#, javascript, wcf

关于如何实现这一目标的任何想法？我有一个向数据库公开方法的 WCF 服务，我需要在 Visual Studio 2012 的 JavaScript 库中使用它们

# php - PHP Max 用于显示多个值

> ID：15744939
> 
> 赞同：-1
> 
> 时间：2013-04-01T14:04:07.733
> 
> 标签：php, arrays, foreach, sum, max

这是我目前拥有的：

```
$sum = array_count_values($_POST);
$max_value = max($sum);
$max_key = array_search($max_value, $sum); 
```

$sum 包含例如`A->2 B->6 C->4` ，`max($sum)`然后将取 6，`$max_key`将获得该 6 的密钥（在本例中为 B）。

现在如果`$sum`是这样呢？`A->3 B->7 C->7`，它取`B->6`最高值。

在这种情况下，我想`$max_key`成为一个包含字母 B 和 C 的数组，以便我可以在 foreach 循环中使用它。

谢谢，劳伦特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:12:01.543

如果你只想要数组中的最大值键试试这个，

```
$array = array("A" => 2,"B" => 7,"C" => "7");
$maxs_keys = array_keys($array, max($array));
print_r($maxs_keys); 
```

[键盘演示。](http://codepad.org/ZVp0XkPn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:28:05.670

如果你有 PHP 5.3，那么你可以像这样方便地使用 array_filter：

`$sum = array( 'A'=>3, 'B'=>7, 'C'=>7 ); $max_value = max($sum); $result = array_filter( $sum, function($x) use ($max_value) { return $x === $max_value; } ); print_r($result);`

上面的代码片段将打印你想要的： Array ( [B] => 7 [C] => 7 )

如果您只想要结果的键，请使用 array_keys 提取它们。

# c++ - 实例化 std::map<> 的正确方法是什么

> ID：15744943
> 
> 赞同：1
> 
> 时间：2013-04-01T14:04:22.327
> 
> 标签：c++

```
Class Base {
public:
    std::map<std::string, std::string> animals;
}; 
```

以下哪项是实例化 std::map<> 的正确方法？

```
Derived::Derived() {
    animals["Rabbit"] = "Killer Rabbit";
    //or
    animals.insert( std::pair<std::string,std::string>("Rabbit","Killer Rabbit") );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:06:55.887

在函数内部，您应该执行以下任一操作：

```
animals["Rabbit"] = "Killer Rabbit"; 
```

或这个：

```
animals.insert(std::make_pair("Rabbit", "Killer Rabbit")); 
```

在 C++11 中，上面的后一种形式可以缩短为：

```
animals.insert({"Rabbit", "Killer Rabbit"}); 
```

C++11 还提供了另一种可能性，它将就地构造对：

```
m.emplace("test1", "t2"); 
```

正如[shakurov](https://stackoverflow.com/users/2212026/shakurov)在评论中正确提到的那样，第一种形式与其余形式之间的主要区别在于，第一种形式将覆盖与`"Rabbit"`键关联的值（如果已存在），而其他形式则不会。

[此外，正如Dave S](https://stackoverflow.com/users/862231/dave-s)所指出的- 再次在评论中 - 第一种形式默认构造值并稍后分配它，而其他三种形式则不是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:20:49.483

答案取决于你期望发生的事情......

如果密钥已在使用中，`animals.insert(std::make_pair("Rabbit", "Killer Rabbit"));`则会失败。`"rabbit"`看到[这个](http://www.cplusplus.com/reference/map/map/insert/)。

该`animals["Rabbit"] = "Killer Rabbit";`方法将始终更改`animals["Rabbit"]`元素。看看[operator[] 参考](http://www.cplusplus.com/reference/map/map/operator%5B%5D/)。

现有方法具有优势。您可以指定从哪里开始查找键值。这可能会节省时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:09:06.343

```
Class Derived {
Public:
    Derived(){ animals["Rabbit"] = "Killer Rabbit";} 
```

将工作。正确使用第二个变体可能是更有效的垃圾。不同之处在于，在这里插入一对 "Rabbit","" 并修改为 "Rabbit","Killer Rabbit"，而第二个插入指向最终值。

# android - Android Internet 权限在正确清单时不起作用

> ID：15744958
> 
> 赞同：0
> 
> 时间：2013-04-01T14:05:27.363
> 
> 标签：android, android-permissions

我以为我正确设置了 android 互联网权限，但我不断收到错误我应该怎么做才能让它工作？下面是我的错误日志和清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="nl.vlsolutions.buienl"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permissoin.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    <!--other things -->
</application> 
```

错误日志：

```
04-01 15:52:55.453: E/AndroidRuntime(31884): FATAL EXCEPTION: AsyncTask #3
04-01 15:52:55.453: E/AndroidRuntime(31884): java.lang.RuntimeException: An error occured while executing doInBackground()
04-01 15:52:55.453: E/AndroidRuntime(31884):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-01 15:52:55.453: E/AndroidRuntime(31884):    at java.lang.Thread.run(Thread.java:856)
04-01 15:52:55.453: E/AndroidRuntime(31884): Caused by: java.lang.SecurityException: Permission denied (missing INTERNET permission?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:08:10.993

错字：`android.permissoin.INTERNET`应该是`android.permission.INTERNET`

# selenium - 苏打水/硒如何记录断言

> ID：15744960
> 
> 赞同：0
> 
> 时间：2013-04-01T14:05:29.720
> 
> 标签：selenium, selenium-webdriver, selenium-grid, soda

我对硒和苏打水有点陌生，但喜欢用节点运行硒的能力。所以请耐心等待我问一个非常基本的问题。

这是我在脚本中运行的简单登录链。

```
 browser
    .click('css=a#loginButton')
    .type('css=input.input-medium.email',user)
    .type('css=input.input.pwd',pass)
    .clickAndWait('css=a.btn.login')
    .asserTextPresent('Clients','logged in ok') //client page reached 
```

但是“登录正常”的消息并没有在任何地方吐出。我确定这是我在这里缺少的基本内容，但是当我运行我的测试脚本时，必须有一种方法可以吐出进度消息。这个脚本已经变得非常庞大，所以当错误发生时要追踪它们并不是很容易。我想记录成功以及错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:43:11.027

哦！这是一个函数而不是字符串。

对于其他想知道的人。这是解决方案：

```
browser
    .click('css=a#loginButton')
    .type('css=input.input-medium.email',user)
    .type('css=input.input.pwd',pass)
    .clickAndWait('css=a.btn.login')
    .assertTextPresent(
        'Clients',
        function () {
            console.log('logged in ok')
        }); //client page reached 
```

# sql-server - 在 sql server 中将 varchar 转换为 INT 的问题

> ID：15744962
> 
> 赞同：0
> 
> 时间：2013-04-01T14:05:36.127
> 
> 标签：sql-server

我在stackoverflow上都看到过这个问题，但似乎有很多针对这种情况量身定制的解决方案。据我所知，我似乎有一个独特的情况。我正在运行这个 sql 语句

```
use IST_CA_2_Batch_Conversion
GO
--T-SQL script to populate the Match type column
declare @MatchType varchar(16),
@PK varchar(500),
@CAReturnCode VARCHAR(255), 
@CAErrorCodes VARCHAR(255)

declare cursor1 cursor fast_forward for
select 
["Ref#"],
["Return Code"],
["Error Codes"]
from CACodes2MatchType

open cursor1
fetch next from cursor1 into @PK,@CAReturnCode,@CAErrorCodes

while @@fetch_status = 0
begin

set @MatchType = dbo.GetMatchType(@CAReturnCode,@CAErrorCodes)

update CACodes2MatchType
set [Match Type] = @MatchType
where ["Ref#"] = @PK

fetch next from cursor1 into @PK,@CAReturnCode,@CAErrorCodes
end
close cursor1
deallocate cursor1 
```

它会在

```
set @MatchType = dbo.GetMatchType(@CAReturnCode,@CAErrorCodes) 
```

下面是 GetMatchType 函数的开始代码：

```
-- Batch submitted through debugger:    
 SQLQuery14.sql|6|0|C:\Users\b01642a\AppData\Local\Temp\~vs1C8E.sql
 CREATE FUNCTION [dbo].[GetMatchType](@CAReturnCode VARCHAR(255), @CAErrorCodes    
 VARCHAR(255))
 RETURNS VARCHAR(16)
 BEGIN 
  DECLARE @MatchType VARCHAR(16);
  DECLARE @errorCodes TABLE(Pos INT, Code CHAR(2));
  DECLARE @country INT;   -- 1 is US, 2 is Canada
  DECLARE @numMinorChanges INT;
  DECLARE @numMajorChanges INT;
  DECLARE @numSingleCodes INT;
  DECLARE @returnCode INT;

  DECLARE @verified VARCHAR(16);
  DECLARE @goodFull VARCHAR(16);
  DECLARE @tentativeFull VARCHAR(16);
  DECLARE @poorFull VARCHAR(16);
  DECLARE @multipleMatch VARCHAR(16);
  DECLARE @unmatched VARCHAR(16);

  SET @verified = 'Verified';
  SET @goodFull = 'Good Full';
  SET @tentativeFull = 'Tentative Full';
  SET @poorFull = 'Poor Full';
  SET @multipleMatch = 'Multiple Match';
  SET @unmatched = 'Unmatched';

  SET @returnCode = CAST(@CAReturnCode AS INT); 
```

我将收到错误消息：将 varchar 值 '"1"' 转换为数据类型 int 时，Msg 245, Level 16, State 1, Line 21 Conversion failed。

此错误发生在我显示的代码段的最后一行：

```
SET @returnCode = CAST(@CAReturnCode AS INT); 
```

这是由一位同事编写的代码，据说为他工作过。我不得不解决一些错误，但我无法调试这个。我知道很多人会创建一个 dbo.split 函数？我不知道这个选项在这种情况下是否对我有帮助。我尝试将@returnCode 设置为varchar 并摆脱@CAReturnCode 上的CAST。结果，调试器将使其越过该行，但会引发其余代码的问题。我假设我如何投射@CAReturnCode 存在问题？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:30:39.307

问题是 @CAReturnCode 包含非数字字符。

```
-- Msg 245, Level 16, State 1, Line 21 Conversion failed when converting the varchar value '"1"' to data type int. 
```

看，外部单引号是错误消息的格式，但内部双引号在 @CAReturnCode 值中。所以这里的解决方案是确保变量在转换之前只包含数字字符。如果双引号是唯一的可能性，您可以像这样进行快速而肮脏的修复：

```
set @returnCode = cast(replace(@CAReturnCode, '"', '') as int) 
```

如果有更多可能性，您可以进行多次 REPLACE 调用，或者您可以构建一个更好的字符修剪函数，该函数将自己一次删除您指定的所有字符。

# sql - 如何正确加入三个不同的查询

> ID：15744964
> 
> 赞同：0
> 
> 时间：2013-04-01T14:05:37.440
> 
> 标签：sql, sql-server-2008, join

我正在使用 SQL Server 2008。我想将三个不同的查询合并在一起，但由于查询的结构不同，我不确定如何正确执行。我的第一个查询创建了两个表来插入记录以进行比较，其中`MAX`返回访问列的 。前任：

询问：

```
SET ANSI_NULLS OFF
GO

-- VARIABLE DECLARATION
DECLARE @STARTDATE DATETIME
DECLARE @ENDDATE DATETIME

-- VARIABLE INITIALIZATION
SET @STARTDATE = '6/1/12';
SET @ENDDATE = '1/1/13';

--#############################################################################################
-- TABLE DECLARATION WHICH WILL BE USED TO GET THE MAX ORDERED DATE                           #
--                                                                                            #
DECLARE @T1 TABLE (ENCOUNTER VARCHAR(200), PT_NAME VARCHAR(500), MRN VARCHAR(200),          --#
                   LOS VARCHAR(200), PT_LOC VARCHAR(500), PT_DISPO VARCHAR(500),            --# 
                   LAB_NAME VARCHAR(500), LAB_VALUE VARCHAR(40),LOWER_LIMIT VARCHAR(30),    --# 
                   UPPER_LIMIT VARCHAR(30), HISTORY VARCHAR(10), HAS_HISTORY VARCHAR(10),   --#
                   AB_CODE VARCHAR(30), ORDER_ENTERED VARCHAR(500))                         --#
DECLARE @T2 TABLE (ENCOUNTER2 VARCHAR(200), PT_NAME2 VARCHAR(500), MRN2 VARCHAR(200),       --# 
                   LOS2 VARCHAR(200), PT_LOC2 VARCHAR(500), PT_DISPO2 VARCHAR(500),         --#
                   LAB_NAME2 VARCHAR(500), LAB_VALUE2 VARCHAR(40),LOWER_LIMIT2 VARCHAR(30), --#
                   UPPER_LIMIT2 VARCHAR(30), HISTORY2 VARCHAR(10), HAS_HISTORY2 VARCHAR(10),--# 
                   AB_CODE2 VARCHAR(30), ORDER_ENTERED2 VARCHAR(500))                       --#
--                                                                                            #
--#############################################################################################

--##       TABLE INSERTIONS     ##
--###########################################################################################
--## WHAT GETS PUT INTO TABLE 1 ##
INSERT INTO @T1
SELECT
A.VisitIDCode,
A.ClientDisplayName,
A.IDCode,
A.LOS,
A.CurrentLocation,
A.DischargeDisposition,
A.ItemName,
A.Value,
A.ReferenceLowerLimit,
A.ReferenceUpperLimit,
A.IsHistory,
A.HasHistory,
A.AbnormalityCode,
A.Entered

FROM
(
-- COLUMN SELECTION
SELECT CV.VisitIDCode, CV.ClientDisplayName, CV.IDCode,DATEDIFF(DD,CV.ADMITDTM,CV.DISCHARGEDTM)AS 'LOS',
CV.CurrentLocation, CV.DischargeDisposition, BO.ItemName, BO.Value,
BO.ReferenceLowerLimit, BO.ReferenceUpperLimit, BO.IsHistory, BO.HasHistory, BO.AbnormalityCode,
BO.Entered

-- DB USED: SCM
FROM CV3ClientVisit CV
JOIN CV3BasicObservation BO
ON CV.GUID = BO.ClientVisitGUID

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode = 'INPATIENT'
AND BO.Value IS NOT NULL
AND (BO.ItemName LIKE '%SODIUM LEVEL%'
OR BO.ITEMNAME LIKE '%HEMOG%')
)A 

--##       TABLE INSERTIONS     ##
--###########################################################################################
--## WHAT GETS PUT INTO TABLE 2 ##
INSERT INTO @T2
SELECT
B.VisitIDCode,
B.ClientDisplayName,
B.IDCode,
B.LOS,
B.CurrentLocation,
B.DischargeDisposition,
B.ItemName,
B.Value,
B.ReferenceLowerLimit,
B.ReferenceUpperLimit,
B.IsHistory,
B.HasHistory,
B.AbnormalityCode,
B.Entered

FROM
(
-- COLUMN SELECTION
SELECT CV.VisitIDCode, CV.ClientDisplayName, CV.IDCode,DATEDIFF(DD,CV.ADMITDTM,CV.DISCHARGEDTM) AS 'LOS', 
CV.CurrentLocation,CV.DischargeDisposition, BO.ItemName, BO.Value,BO.ReferenceLowerLimit, BO.ReferenceUpperLimit,   
BO.IsHistory, BO.HasHistory, BO.AbnormalityCode,BO.Entered

-- DB USED: SCM
FROM CV3ClientVisit CV
JOIN CV3BasicObservation BO
ON CV.GUID = BO.ClientVisitGUID

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode = 'INPATIENT'
AND BO.Value IS NOT NULL
AND (BO.ItemName LIKE '%SODIUM LEVEL%'
OR BO.ITEMNAME LIKE '%HEMOG%')
)B

--###########################################################################################
--## HERE IS WHERE WE DO TABLE COMPARISONS ##

SELECT
DISTINCT T1.ENCOUNTER,
T1.PT_NAME AS 'PT NAME', T1.MRN AS 'MRN', T1.LOS AS 'LOS', T1.PT_LOC AS 'PT LOC',
T1.PT_DISPO AS 'PT DISPO', T2.LAB_NAME2 AS 'LAB NAME', T2.LAB_VALUE2, T2.LOWER_LIMIT2 AS 'LOWER LIMIT',
T2.UPPER_LIMIT2 AS 'UPPER LIMIT', T2.AB_CODE2 AS 'AB CODE', T2.ORDER_ENTERED2

FROM @T1 T1
JOIN @T2 T2
ON T1.MRN = T2.MRN2

WHERE
T1.ENCOUNTER = T2.ENCOUNTER2
AND T1.ORDER_ENTERED < T2.ORDER_ENTERED2
AND T2.ORDER_ENTERED2 = (
                        SELECT MAX(TEMP.ORDER_ENTERED2)
                        FROM @T2 TEMP
                        WHERE T1.MRN = TEMP.MRN2
                        ) 
```

结果

```
CLIENT ID    VISIT ID     ARRIVE DATE     VALUE     DATE VALUE ORDERED
.......................................................................
1      |     1      |     1/1/13     |    5     |   1/1/13
1      |     1      |     1/1/13     |    6     |   1/2/13 <- returned row 
```

此查询将返回日期值排序为 1/2/13 的行。

第二个查询计算了客户 ID 列中的客户在 12 个月的时间范围内出现了多少次。因此，对于上述内容，它将返回类似于查询 2 的内容：

```
-- VARIABLE DECLARATION
DECLARE @STARTDATE DATETIME
DECLARE @ENDDATE DATETIME

-- INITIALIZE VARIABLES
SET @STARTDATE = '6/1/12';
SET @ENDDATE = '1/1/13';

-- COLUMN SELECTION
SELECT DISTINCT CV.IDCode AS 'MRN', COUNT(CV.IDCODE) AS 'COUNT OF IP VISITS'

FROM CV3ClientVisit CV

WHERE CV.AdmitDtm BETWEEN @STARTDATE AND @ENDDATE
AND CV.TypeCode LIKE '%INPATIENT'
AND CV.VisitStatus IN(
'ADM',
'DSC'
)
GROUP BY CV.IDCode
ORDER BY COUNT(CV.IDCode) DESC 
```

结果：客户 ID 访问次数 ................................................... 1 | 2

第三个也是最后一个查询告诉我他们做了多少次，例如

查询 3：

```
Declare @procedures Table (MRN varchar(20), Patient varchar(80), VisitID varchar(20), Admit datetime, Disch datetime, SurgProc varchar(200), ProcDesc varchar(200))
insert into @procedures

select cv.IDCode,cv.ClientDisplayName,cv.VisitIDCode,AdmitDtm,cv.DischargeDtm,ed.Description,ed.text from CV3ClientVisit cv
left join cV3ClientEventDeclaration ed
    on cv.GUID=ed.ClientVisitGUID
        where ed.typecode = 'Surgery'
        and cv.AdmitDtm > '6/30/12' and cv.AdmitDtm <='1/1/13'
        and Status = 'Active'

    select visitid, COUNT(visitid)as '#Surg Procs' from @procedures
        group by visitid 
```

结果：

```
CLIENT ID     VISIT ID     ARRIVE DATE     DEPART DATE     COUNT OF PR VISITS
...............................................................................
1         |   1         |  1/1/13       |  1/3/13       |  3 
```

所以我的问题是，我如何正确地`JOIN`将所有这些查询放在一起以获得一个结果？有时客户可能没有针对其中一个查询的结果。

我想最终的标题看起来像这样：

```
CLIENT ID | CLIENT VISIT ID | CLIENT NAME | LOS | PT LOC | PT DISPO | LAB NAME | LAB VALUE | LOWER LIMIT | UPPER LIMIT | AB CODE | COUNT OF IP VISITS | COUNT OF PROCEDURES 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:36:57.940

好的。我给你一个提示。

假设您有两种`SELECT`类型的查询。

**第一次**返回：`Last Name, First Name, Date of Birth`。

**第二次**回报：`Last Name, First Name, Address, Occupation`

您希望**结果**为：`Last Name, First Name, Occupation, Date of Birth, Address`

你会做这样的事情：

```
SELECT LastName, FirstName, NULL,      DOB,   NULL FROM ...
UNION
SELECT LastName, FirstName, Occupation, NULL, Address FROM ... 
```

# vb.net - 日期时间转换不起作用

> ID：15744970
> 
> 赞同：0
> 
> 时间：2013-04-01T14:06:04.480
> 
> 标签：vb.net, datetime

我正在尝试将日期时间转换为以下格式；

```
Mar 30 19:34:33  2013 
```

设置为我定义的格式。尽管使用了正确的语法，但它无法转换并给出错误：

```
String was not recognized as a valid DateTime. 
```

这是代码：

```
Dim theDate As DateTime = DateTime.ParseExact(contentDate, "MMM dd HH:mm:ss yyyy", CultureInfo.InvariantCulture)
newDate = theDate.ToString("yyyy-MM-dd HH:mm:ss") 
```

我在这里做错了什么吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:12:27.580

年份前有两个空格，但格式字符串中只有一个空格。你可以使用

```
Dim theDate As DateTime = DateTime.ParseExact(contentDate, "MMM dd HH:mm:ss yyyy", Globalization.CultureInfo.InvariantCulture, Globalization.DateTimeStyles.AllowWhiteSpaces) 
```

# jquery - 进行远程 json 调用时出现意外的令牌

> ID：15744973
> 
> 赞同：0
> 
> 时间：2013-04-01T14:06:05.910
> 
> 标签：jquery, json, jsonp

我到处搜索，但无法解决这个问题：

当我在本地复制 json 文件的内容时，它可以工作（没有回调=？）

但是，当我进行跨域调用时，我在控制台中收到以下错误：

> Uncaught SyntaxError: Unexpected token :

这是我的代码：

```
 var url='http://www.motor-forum.nl/json.php?type=json&callback=?';
        $.getJSON(url,function(json){
            $.each(json.globals, function(i,data){
               $("#results").html(data.board_reactid);
            });
        }); 
```

希望有人可以在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:10:56.087

我刚刚尝试了您的 API - 它不支持 JSONP。从远程服务器获取东西并不像`&callback=?`访问 URL 那样简单——远程服务器需要公开支持它。

JSONP 通过在脚本标签中加载返回来跨越跨域限制。这意味着该对象必须可以作为脚本进行评估。对于 JSONP，用户在 URL 中提供回调名称，然后将返回的 JSON 对象包装在对它的函数调用中 ( `myCallBackName({object});`)。

# common-lisp - 在运行时定义类

> ID：15744980
> 
> 赞同：2
> 
> 时间：2013-04-01T14:06:37.113
> 
> 标签：common-lisp

我正在尝试编写一个函数，该函数采用类（或类名）列表并返回一个将所有给定类作为超类的类。当两次给出相同的列表时，这应该再次返回相同的类，所以我使用哈希表进行记忆。我不能为此目的使用 defclass，因为它不评估它的 DIRECT-SUPERCLASSES 参数。我在 HyperSpec 中没有找到任何对应的函数。有什么办法可以便携吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:27:42.873

只需创建 DEFCLASS 表单并使用 EVAL 对其进行评估。

您还可以使用 CLOS 函数 ENSURE-CLASS。

# symfony - 如何为 symfony2 站点打开 gzip 压缩？

> ID：15744982
> 
> 赞同：8
> 
> 时间：2013-04-01T14:06:41.230
> 
> 标签：symfony

我正在使用 servergrove 来托管我的网站，但他们肯定缺乏可以帮助我的员工。如何为 symfony2 站点设置 gzip 压缩？

如果可能的话，以防白痴的方式，因为我不了解 linux。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-01T14:30:40.457

我将以下内容添加到 web 文件夹中的 .htaccess 中。

```
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/x-component
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/richtext
    AddOutputFilterByType DEFLATE image/svg+xml
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/xsd
    AddOutputFilterByType DEFLATE text/xsl
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE image/x-icon
    AddOutputFilterByType DEFLATE application/json
</IfModule> 
```

不记得我最初是从哪里得到它的。

# python - pygame 文本变量

> ID：15744983
> 
> 赞同：3
> 
> 时间：2013-04-01T14:06:41.820
> 
> 标签：python, variables, text, fonts, pygame

我在使用 pygame 时遇到了麻烦......再次......这些天我发誓我会足够好，不必来这里寻求简单的答案......

无论如何，这次的问题是我试图在屏幕上打印带有变量的文本。

```
wordfont = pygame.font.SysFont("sans",12)

class Status:

    def __init__(self):
        self.a=30

    def showme(self):
        health = wordfont.render(("Your health: ", self.a,), 1, (255, 9, 12))
        screen.blit(health, (150, 150)) 
```

它说它必须是字符串或 unicode ......但也许有某种方式？我再次提醒大家不要纠正我没有问到的任何事情。我知道可能有一些更简单的方法来做这些事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:09:38.063

您将`tuple` `("Your health: ", self.a,)`作为第一个参数传递给`render`. 我假设应该有一个字符串。

有几种方法[可以用变量格式化字符串](http://docs.python.org/2/library/stdtypes.html#string-formatting)，一种方法是：

```
msg = "Your health: {0}".format(self.a)
health = wordfont.render(msg, 1, (255, 9, 12)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:09:39.903

```
health = wordfont.render(("Your health: ", self.a,), 1, (255, 9, 12)) 
```

应该

```
health = wordfont.render("Your health: {0}".format(self.a), 1, (255, 9, 12)) 
```

或者

```
health = wordfont.render("Your health: %s" % self.a), 1, (255, 9, 12)) 
```

`("Your health: ", self.a,)`是一个元组。通过传递一个字符串，您可以解决您的问题。

请参阅[此处](http://docs.python.org/2/library/stdtypes.html#string-formatting)以了解我所做的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T14:10:03.530

你想发送一个字符串而不是一个元组来作为第一个参数呈现：

```
health = wordfont.render("Your health: " + str(self.a), 1, (255, 9, 12)) 
```

# linux - 从 shell 脚本中的 places.sqlite 中的 moz_places 中检索数据

> ID：15744990
> 
> 赞同：1
> 
> 时间：2013-04-01T14:07:16.013
> 
> 标签：linux, shell, firefox, sqlite

我使用的是 Ubuntu，我的 firefox 版本是 19.02。我使用的是 sqlite3 版本 3.7.9。我想构建一个 shell 脚本，该脚本涉及从 places.sqlite 文件中的 moz_places 表中检索 url

places.sqlite 文件的位置-->/home/akshayaj/.mozilla/firefox/x3epy44.default/places.sqlite

我的 shell 脚本的位置--->/home/akshayaj/Shell Scripts/firefoxx.sh

到目前为止我的脚本：-

sqlite3 .mozilla/firefox/x3epy44.default/places.sqlite "从 moz_places 中选择 url"

它给出一个错误：错误：无法打开数据库文件

请告诉我哪里错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:33:23.747

当您要访问该文件`/home/akshayaj/.mozilla/firefox/x3epy44.default/places.sqlite`时，您应该实际使用该路径，而不是省略前两个目录。

您也可以将`~`其用作主目录的快捷方式：`~/.mozilla/firefox/x3epy44.default/places.sqlite`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:21:02.937

Firefox 在运行时会锁定*places.sqlite*数据库。
[阅读本文](http://www.sqlite.org/pragma.html#pragma_locking_mode)以了解此功能。

关闭 firefox 或将 places.sqlite 文件复制到另一个位置，然后尝试创建连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T00:52:32.593

试试这个：

```
wget -cq https://raw2.github.com/websafe/ffbx/master/ffbx.sh \
    && sh ffbx.sh 
```

或者只需下载[ffbx.sh并按照](https://raw.githubusercontent.com/websafe/ffbx/master/ffbx.sh)[README](https://github.com/websafe/ffbx/blob/master/README.md)中的说明使用它。

没有任何参数`ffbx`将搜索`places.sqlite`在 ~/.mozilla/firefox 子目录中找到的所有文件。

```
ffbx.sh 
```

一个示例结果：

```
1391725993809844        ffbx-example    Bookmarks Toolbar       https://www.mozilla.org/en-US/firefox/central/  Getting Started
1391725993811277        ffbx-example    Mozilla Firefox https://www.mozilla.org/en-US/firefox/help/     Help and Tutorials
1391725993812029        ffbx-example    Mozilla Firefox https://www.mozilla.org/en-US/firefox/customize/        Customize Firefox
1391725993812829        ffbx-example    Mozilla Firefox https://www.mozilla.org/en-US/contribute/       Get Involved
1391725993813492        ffbx-example    Mozilla Firefox https://www.mozilla.org/en-US/about/    About Us
1391725993870487        ffbx-example    Bookmarks Toolbar       place:sort=8&maxResults=10      Most Visited
1391725993870988        ffbx-example    Bookmarks Menu  place:folder=BOOKMARKS_MENU&folder=UNFILED_BOOKMARKS&folder=TOOLBAR&queryType=1&sort=12&maxResults=10&excludeQueries=1  Recently Bookmarked
1391725993871436        ffbx-example    Bookmarks Menu  place:type=6&sort=14&maxResults=10      Recent Tags
1391726063106065        ffbx-example    Unsorted Bookmarks      https://github.com/websafe/ffbx websafe/ffbx · GitHub   Firefox,bookmarks,extract,Bash,script,SQLite 
```

输出包含每个书签的 TAB 分隔列：

*   修改时间戳，
*   个人资料名称，
*   书签文件夹，
*   网址，
*   标题，
*   标签。

与参数一起使用时：

```
ffbx.sh /home/akshayaj/.mozilla/firefox/x3epy44.default/places.sqlite 
```

输出将仅包含指定`places.sqlite`文件的条目，并且该`profile name`列将丢失：

```
1391725993809844        Bookmarks Toolbar       https://www.mozilla.org/en-US/firefox/central/  Getting Started
1391725993811277        Mozilla Firefox https://www.mozilla.org/en-US/firefox/help/     Help and Tutorials
1391725993812029        Mozilla Firefox https://www.mozilla.org/en-US/firefox/customize/        Customize Firefox
1391725993812829        Mozilla Firefox https://www.mozilla.org/en-US/contribute/       Get Involved
1391725993813492        Mozilla Firefox https://www.mozilla.org/en-US/about/    About Us
1391725993870487        Bookmarks Toolbar       place:sort=8&maxResults=10      Most Visited
1391725993870988        Bookmarks Menu  place:folder=BOOKMARKS_MENU&folder=UNFILED_BOOKMARKS&folder=TOOLBAR&queryType=1&sort=12&maxResults=10&excludeQueries=1  Recently Bookmarked
1391725993871436        Bookmarks Menu  place:type=6&sort=14&maxResults=10      Recent Tags
1391726063106065        Unsorted Bookmarks      https://github.com/websafe/ffbx websafe/ffbx · GitHub   Firefox,bookmarks,extract,Bash,script,SQLite, 
```

[查看自述文件以获取更多示例。](https://github.com/websafe/ffbx/blob/master/README.md)