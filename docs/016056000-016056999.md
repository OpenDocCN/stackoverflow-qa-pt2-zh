# StackOverflow 问答 16056000-16056999

# z3 - Z3 v4.3+ 是否支持非线性算术的量词消除

> ID：16056011
> 
> 赞同：1
> 
> 时间：2013-04-17T09:08:58.723
> 
> 标签：z3, nonlinear-functions, quantifiers

我找不到 Z3 完全支持哪种量词消除。我所拥有的是一个普遍量化的公式，一般来说是非线性项。我想获得一个等效的无量词公式。Z3可以吗？

谢谢，弗里德里希

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:45:58.893

Z3 对非线性算术的量词消除的支持非常有限。此外，默认情况下未启用它。这是一个关于如何启用它的示例，并展示了限制。它也可以[在这里](http://rise4fun.com/Z3/qqv1)在线获得。

```
(set-option :pp-max-depth 20) ;; set option for Z3 pretty printer
(declare-const a Real)
(assert (exists ((x Real)) (= (* x x) a )))
(apply qe)
(echo "enabling nonlinear support...")
(apply (! qe :qe-nonlinear true))
;; It is very limited, it will fail in the following example
(echo "trying a cubic polynomial...")
(assert (exists ((x Real)) (= (* x x x) a)))
(apply (! qe :qe-nonlinear true)) 
```

# asp.net-mvc - 不明白为什么我在加载页面时在 ASP MVC 中得到这个 nullReference 异常

> ID：16056012
> 
> 赞同：12
> 
> 时间：2013-04-17T09:09:01.833
> 
> 标签：asp.net-mvc, web, nullreferenceexception

我有一个 Web 应用程序在我的计算机上没有给我任何问题，但是当我将它部署到服务器时出现此错误。它没有给我任何要检查的源代码行，我也不知道为什么会发生

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

[No relevant source lines]

Source File: c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\a9dc635c\ccb3814\App_Web_item.cshtml.f0356b3c.uyw8roer.0.cs    Line: 0 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   ASP._Page__AssemblyResource_MyProject_Web_Mvc__Version_1_0_0_0__Culture_neutral__PublicKeyToken_null_Views_LeagueGlobal_Item_cshtml.Execute() in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\a9dc635c\ccb3814\App_Web_item.cshtml.f0356b3c.uyw8roer.0.cs:0
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +279
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +125
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +195
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +383
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +32
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +977396
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +977396
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +265
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +964636
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +67
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +53
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +53
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T16:41:06.607

我遇到了同样的问题。不幸的是，堆栈跟踪在这种情况下并不是很有帮助。在视图中肯定会发生异常，在我的情况下是什么：

```
@Model.SomeProperty.Trim() 
```

并且 Model.SomeProperty 为空。因为没有办法调试它；我推荐二分法：

*   将您的视图保存在其他地方
*   从您的视图中删除一个接一个的逻辑部分
*   每次删除后保存您的视图并重新测试
*   如果异常不再可重现，则 NullReferenceException 发生在您已删除的块中；因此将其添加回来并删除此块内的逻辑部分，直到您隔离导致异常的行

我知道它很蹩脚，但我没有找到其他方法 - 顺便说一句。这就是我在视图中做控制器工作所得到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T19:37:36.793

转到源文件的**第 0 行：**

c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\a9dc635c\ccb3814\App_Web_item.cshtml.f0356b3c.uyw8roer.0.cs

然后，使用它来查明代码块中发生异常的确切位置：

```
try
{
   ...
}
catch (NullReferenceException ex)
{
      ShowMessageBox("Error" + ex.Message);
} 
```

检查：

1.  您已经启动了您正在操作的变量。
2.  自将其部署到服务器后，您正在使用的变量并未变为**null 。**
3.  您没有使用范围之外的变量。

# java - 为 saveAllRequirements 抛出空指针异常

> ID：16056013
> 
> 赞同：0
> 
> 时间：2013-04-17T09:09:06.613
> 
> 标签：java, hibernate, maven-2

```
private IRequirementDao requirementDao;

@Override   
public void saveAllRequirements(List<Requirement> requirementsList) {
requirementDao.saveAllRequirements(requirementsList);
} 
```

对 saveAllRequirements 方法的调用抛出空指针异常，其中 IRequirementDao 是一个接口，其中一些方法如下所示

```
 public interface IRequirementDao {

        public void saveRequirement(Requirement requirement);
        public List<Requirement> getAllRequirementsCreatedBy(String createdBy);
        public List<Requirement> getAllRequirementsCreatedAfter(Date createdTs);
        public List<Requirement> getAllRequirementsForProject(long projectKey);
        public List<Requirement> getAllRequirementsAsofDt(Date asOfDt);
        public void saveAllRequirements(List<Requirement> requirementsList);
        public List<Requirement> getRequirementsWithTracebilityId(String tracebilityId);
    } 
```

请任何人都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:13:10.677

您已经声明了一个 type 的对象`IRequirementDao`，但根据您的代码，它既没有初始化也没有注入。

如果您正在使用某种依赖注入，例如 Spring 或 Java EE，您可以注释此字段以`@Resource`使其注入 - 前提是至少有一个此类可用的实现。

如果您不使用依赖注入，则需要通过`IRequirementDao`为您的字段分配一个实现来自己提供一个对象，如下所示：

```
this.requirementDao = new RequirementDaoImpl(); // or whatever the name of your DAO implementation. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:13:47.617

那是一个界面。您需要在一个类中实现该接口，然后`saveAllRequirements`从您的类中调用该方法。

要实现接口，请使用以下格式：

```
public class ClassA implements IRequirementDao{
} 
```

然后它将强制您在接口中编写每个方法的实现。然后在您的其他类中，您需要初始化实现接口的类：

```
public class ClassB {

    public ClassB{
         ClassA a = new ClassA();
    }

    public void saveAllRequirements(List<Requirement> requirementsList) {
        requirementDao.saveAllRequirements(requirementsList);
    }
} 
```

# c# - System.Threading.Tasks 中的 NullReferenceException 调用 HttpClient.GetAsync(url)

> ID：16056016
> 
> 赞同：17
> 
> 时间：2013-04-17T09:09:12.880
> 
> 标签：c#, async-await

我的 MVC 4.0 应用程序中有一个奇怪的问题。我使用 REST Web 服务（Amazon Associate）。我创建了一种方法，我可以在任何地方使用它。缩短版是这样的：

```
 private async Task<XElement> GetRequest(string url)
    {
        string myresponse;
        HttpResponseMessage response = null;
        HttpClient client = new HttpClient();            
        try
        {
            response = await client.GetAsync(url);
            myresponse = response.Content.ToString();
            if (myresponse.Contains("503"))
            {
                myTrace.WriteLine("503 Sleep.....");
                Thread.Sleep(3000); // looks like amazon us does not like fast requests....
                return await GetRequest(url); //restart after pausing....
            }
        }
        catch (TaskCanceledException ex)
        {
            myTrace.WriteLine("TaskCancelled From GetRequest: " + ex);
            return null;
        }

        catch (HttpRequestException ex)
        {
            myTrace.WriteLine("RequestException Sleep.....");
            Thread.Sleep(300000); // 5 minutes de pause 
        }

        catch (Exception ex)
        {
            myTrace.WriteLine("From GetRequest: " + ex);
            return null;
        }

        try
        {
            XElement content = await response.Content.ReadAsAsync<XElement>();
            response.Dispose();
            client.Dispose();
            return content;
        }
        catch (Exception)
        {
            return null;
        }
    } 
```

没什么特别的，它确实工作得很好....但是，现在，在特定的呼叫中，它会爆炸`client.GetAsync(url)`。起初我怀疑 url 中的某些内容是错误的，所以我从调试器会话中抓取它并将其直接粘贴到我的浏览器中，得到了预期的答案......

因此，URL 没有任何问题。做了一个小单元测试，使用相同的特定 URL 就可以了...

当它在调试器中爆炸时，很难看出有什么问题。（没有抛出异常！）。最后，我通过 IntelliTrace 看到有异常，似乎在`System.Threading.Tasks`. 很难确定，因为调用堆栈对于我的非专家眼来说有点令人困惑......

这是我从之前的代码中获得的调用堆栈：

```
>   System.Web.dll!System.Web.ThreadContext.AssociateWithCurrentThread(bool setImpersonationContext = {unknown})    C#
System.Web.dll!System.Web.HttpApplication.OnThreadEnterPrivate(bool setImpersonationContext = {unknown})    C#
System.Web.dll!System.Web.HttpApplication.OnThreadEnter()   C#
System.Web.dll!System.Web.HttpApplication.System.Web.Util.ISyncContext.Enter()  C#
System.Web.dll!System.Web.Util.SynchronizationHelper.SafeWrapCallback(System.Action action = {unknown}) C#
System.Web.dll!<>c__DisplayClass9.AnonymousMethod(System.Threading.Tasks.Task _ = {unknown})    C#
mscorlib.dll!System.Threading.Tasks.ContinuationTaskFromTask.InnerInvoke()  C#
mscorlib.dll!System.Threading.Tasks.Task.Execute()  C#
mscorlib.dll!System.Threading.Tasks.Task.ExecutionContextCallback(object obj = {unknown})   C#
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext = {unknown}, System.Threading.ContextCallback callback = {unknown}, object state = {unknown}, bool preserveSyncCtx = {unknown})   C#
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext = {unknown}, System.Threading.ContextCallback callback = {unknown}, object state = {unknown}, bool preserveSyncCtx = {unknown})   C#
mscorlib.dll!System.Threading.Tasks.Task.ExecuteWithThreadLocal(ref System.Threading.Tasks.Task currentTaskSlot = {unknown})    C#
mscorlib.dll!System.Threading.Tasks.Task.ExecuteEntry(bool bPreventDoubleExecution = {unknown}) C#
mscorlib.dll!System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() C#
mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch()    C#
mscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() C# 
```

无论如何，这看起来肯定与任务、异步、后台工作人员等有关......有没有一种好方法可以“清除”所有其他正在运行的任务，以避免这个问题？

谢谢你的帮助，伯纳德。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-12-04T02:45:16.143

添加到@kcar 的答案，我遇到了一个非常相似的问题，即代码路径上有多个等待，其中有一个未等待的方法，例如：

```
public async Task JsonResult BookThing(InputModel model)
{
    // Do some stuff
    thisIsAnAsyncMethod(Model model); // Fire and forget
    return Json(null);
}

protected async Task thisIsAnAsyncMethod(Model model)
{
    await oneThing();
    await anotherThing();
    await somethingElse();
} 
```

这导致等待随机失败而没有让我捕捉到异常 - 因为 TPL 试图重新加入一个已经被清空的上下文，所以它在 try/catch 之外抛出了 NullReferenceException。

这很难诊断。在生产环境中，您不会在 try/catch 中看到任何内容，而在 Visual Studio 中，计划重新加入原始上下文的 await 有点随机 - 这取决于 TaskScheduler 碰巧决定做什么。

如果您不想触发并忘记了明显的答案是等待异步方法 - 您将收到一个编译器警告，提醒您这样做。

如果您确实想解雇并忘记解决方案是显式启动一个新任务。[这个关于fire and forget Tasks的答案涵盖了](https://stackoverflow.com/a/20364016/176877)最好的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-17T19:01:45.353

从外观上看，您的代码可以在第一个 try 块的异常事件中休眠的线程之一被解决之前完成，因此在它们醒来 5 分钟后，没有原始线程可以重新加入，导致来自 AssociateWithCurrentThread 的 NullReferenceException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T22:38:39.230

当我得到上面显示的异常和调用堆栈时，这是因为我试图使用异步执行“一劳永逸”，这是一个非常糟糕的主意。我切换到为我想要的新线程旋转，并且崩溃消失了。

# php - 如何获得内在价值 我得到了需要使用 preg match all 提取超链接标签内的值的 html 内容。我尝试了以下但我没有得到任何数据。我包含了一个示例输入数据。你们能帮我修复这段代码并在 play.asp?ID=（例如：我想从 play.asp?ID= 12345获取这个值12345）前面打印所有 问问题 问问题 2013-04-17T09:09:23.127 4078 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. phpregexparsingpreg-match-all 4 5 回答 5 This answer is useful 2 $str = '<A HREF="http://www.somesite.com/play.asp?ID=12345&Selected_ID=&PhaseID=123" class="space"><span id="Img_1"></span></A>'; preg_match_all( '/<\s*A[^>]HREF="(.*?)"\s?(.*?)>/i', $str, $match); print_r( $match ); 试试这个。 于 2013-04-17T09:45:51.067 回答 This answer is useful 1 不！正则表达式是一种（不好的）文本处理方式。这不是文本，而是 HTML 源代码。处理它的工具称为 HTML 解析器。虽然 PHP 的 DOMDocument 也能够加载 HTML，但在极少数情况下它可能会出现故障。一个糟糕的正则表达式（你错误地认为还有其他的）会在页面中的几乎所有更改上出现故障。 于 2013-04-17T09:15:40.313 回答 This answer is useful 0 您不应该使用正则表达式来解析 HTML。 这是DOMDocument的解决方案： <?php $input = '<A HREF="http://www.somesite.com/play.asp?ID=12345&Selected_ID=&PhaseID=123" class="space"><span id="Img_1"></span></A>'; // Clean "&" element in href $cleanInput = str_replace('&','&amp;',$input); // Load HTML $domDocument = new DOMDocument(); $domDocument->loadHTML($cleanInput); // Retrieve <a /> tags $aTags = $domDocument->getElementsByTagName('a'); foreach($aTags as $aTag) { $href = $aTagA->getAttribute('href'); $url = parse_url($href); $vars = array(); parse_str($url['query'], $vars); var_dump($vars); } ?> 输出 ： array (size=3) 'ID' => string '12345' (length=5) 'Selected_ID' => string '' (length=0) 'PhaseID' => string '123' (length=3) 于 2013-04-17T09:43:44.283 回答 This answer is useful 0 这应该达到预期的结果。它是 HTML 解析器和内容提取功能的组合： function extractContents($string, $start, $end) { $pos = stripos($string, $start); $str = substr($string, $pos); $str_two = substr($str, strlen($start)); $second_pos = stripos($str_two, $end); $str_three = substr($str_two, 0, $second_pos); $extractedContents = trim($str_three); return $extractedContents; } include('simple_html_dom.php'); $html = file_get_html('http://siteyouwantlinksfrom.com'); $links = $html->find('a'); foreach($links as $link) { $playIDs[] = extractContents($link->href, 'play.asp?ID=', '&'); } print_r($playIDs); 你可以simple_html_dom.php从这里下载 于 2013-04-17T09:40:25.270 回答 This answer is useful 0 这还不够吗？ /<a href="(.*?)?"/I 编辑： 这似乎有效： '/<a href="(.*?)\?/i' 于 2013-04-17T09:13:49.303 回答 Related 0 caching - 带有 JSONP 对象的 Sensa Touch 1.1 仅第一次调用 1 winforms - Windows 窗体应用程序中按钮的按下和释放行为 3 android - 如何设置按钮以填充每一行的一半？ 3 c# - 来自不同线程的触发事件 2 android - 远程蓝牙 2 sql - 为什么在 JPA Hibernate 中更新查询；所有属性都在 SQL 中更新 1 amazon-web-services - 运行 Amazon EMR 作业时出现“文件不存在”错误 1 asp.net - 无法将 ScriptMananger 添加到页面而不会从自动生成的代码中获取错误给设计器 1 ruby-on-rails - Rails 3 - 在 file_column 插件中禁用文件名缓存 2 php - PHP 布尔搜索 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16056019
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, regex, parsing, preg-match-all

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:45:51.067

```
$str = '<A HREF="http://www.somesite.com/play.asp?ID=12345&Selected_ID=&PhaseID=123" class="space"><span id="Img_1"></span></A>';

preg_match_all( '/<\s*A[^>]HREF="(.*?)"\s?(.*?)>/i', $str, $match);
print_r( $match ); 
```

试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:15:40.313

不！正则表达式是一种（不好的）文本处理方式。这不是文本，而是 HTML 源代码。处理它的工具称为 HTML 解析器。虽然 PHP 的 DOMDocument 也能够加载 HTML，但在极少数情况下它可能会出现故障。一个糟糕的正则表达式（你错误地认为还有其他的）会在页面中的几乎所有更改上出现故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:43:44.283

您不应该使用正则表达式来解析 HTML。
这是**[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)**的解决方案：

```
<?php
    $input = '<A HREF="http://www.somesite.com/play.asp?ID=12345&Selected_ID=&PhaseID=123" class="space"><span id="Img_1"></span></A>';
    // Clean "&" element in href
    $cleanInput = str_replace('&','&amp;',$input);
    // Load HTML

    $domDocument = new DOMDocument();
    $domDocument->loadHTML($cleanInput);

    // Retrieve <a /> tags
    $aTags = $domDocument->getElementsByTagName('a');
    foreach($aTags as $aTag)
    {   

        $href = $aTagA->getAttribute('href');
        $url  =  parse_url($href);
        $vars = array();
        parse_str($url['query'], $vars);

        var_dump($vars);
    }
?> 
```

输出 ：

```
array (size=3)
  'ID' => string '12345' (length=5)
  'Selected_ID' => string '' (length=0)
  'PhaseID' => string '123' (length=3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:40:25.270

这应该达到预期的结果。它是 HTML 解析器和内容提取功能的组合：

```
function extractContents($string, $start, $end)
{
    $pos = stripos($string, $start);
    $str = substr($string, $pos);
    $str_two = substr($str, strlen($start));
    $second_pos = stripos($str_two, $end);
    $str_three = substr($str_two, 0, $second_pos);
    $extractedContents = trim($str_three);
    return $extractedContents;
}

include('simple_html_dom.php');
$html = file_get_html('http://siteyouwantlinksfrom.com');
$links = $html->find('a');
foreach($links as $link)
{
    $playIDs[] = extractContents($link->href, 'play.asp?ID=', '&');
}

print_r($playIDs); 
```

你可以`simple_html_dom.php`从[这里下载](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T09:13:49.303

这还不够吗？

```
/<a href="(.*?)?"/I 
```

编辑：

这似乎有效：

```
'/<a href="(.*?)\?/i' 
```

# c++ - 在 C++ 中运行 cmd 命令

> ID：16056021
> 
> 赞同：1
> 
> 时间：2013-04-17T09:09:27.560
> 
> 标签：c++, windows, cmd, dos

我正在尝试基于 C++ 进行文本冒险。我制作了包含每个路径的特定文件的文件夹。假设我从一个房间往南走，我需要进入一个名为“south”的文件夹。我在这里遇到问题，因为我不知道如何在 C++ 中更改像“cd .\south”这样的目录。请告诉我如何在 C++ 中更改目录。

我尝试使用：

```
system("cd .\\south") 
```

但它不会更改目录。我也在谷歌上搜索过，但它提供了另一个名为“ShellExecute”的函数的链接，我不知道如何使用。请帮助（我是一个完整的初学者）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:12:50.410

该`system`函数为命令创建一个新进程。这意味着任何目录更改都将是该新进程的本地。

您想要该[`_chdir`](http://msdn.microsoft.com/en-us/library/bf7fwze1%28v=vs.100%29.aspx)功能：

```
_chdir("south"); 
```

或者，您可以使用 WIN32 功能[`SetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx)。

**注意：** `_chdir`是 Windows CRT 函数名称，在 POSIX 系统（如 Linux 或 OSX）上是[`chdir`](http://pubs.opengroup.org/onlinepubs/009695399/functions/chdir.html)（不带前导下划线）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:26:23.437

**方向 1：** 简单地说，你要做的就是改变`current directory`. 为此，请阅读本文 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa363806(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363806(v=vs.85).aspx)

但是如果您的应用程序是多线程的。那么你需要小心。因为当前目录对整个应用程序是通用的，所以其他线程可能会更改应用程序`current directory`。

**方向2：** 如果你需要通过执行系统命令来做到这一点（我不知道天气是可能的）。然后您可以`&&`在 Windows 环境中执行多个系统命令。

例如：`system("cls && date && pause");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:33:00.347

您正在做的具体问题的答案已经给出。但是，我想知道您为什么要尝试更改当前目录以响应用户给出的命令。

也许你这样做是因为你想获得一些特定的知识，但是，要考虑到面对文本冒险的一般方式不是在计算机中创建文件夹，而是创建适当的结构。

您至少应该有以下课程：`Location`, `Object`,`Character`

您应该有位置和对象的向量，以便表示游戏中所有可能的位置和对象。

游戏角色还应该有一个他可以随身携带的物品列表（尽管您可以将其扩展到游戏中的其他角色）。

每个位置应该有一个：名称、描述和一个由十个位置组成的公共出口的向量，例如*north* , *south* , *east* , *west* , *ne* , *nw* , *se* , *sw* , *up*和*down*。在该向量内，您可以存储选择该出口时要走的位置编号。

最后，您需要解析玩家的输入，以便游戏能够理解命令。

当然，这是冒险的最低要求。您可以使用现有的系统，例如 Inform，但我不知道您是否正在尝试锻炼您的 C++ 技能。

请记住，您可以通过访问互动小说论坛寻求真正的冒险专家的帮助：

[http://www.intfiction.org/forum/](http://www.intfiction.org/forum/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:11:48.313

问题是每个`system`命令都将在单独的进程中执行，因此您的`cd`命令将起作用，但对下一个命令无效。

`chdir`如果您在 Linux/Unix 系统或Win32 API 上，您可以使用，`SetCurrentDirectory`但我不确定它是否真的是您想要做的。

# php - 如何从 MySQL 表中选择第 1 列和第 2 列值唯一的所有数据

> ID：16056023
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:09:28.817
> 
> 标签：php, mysql

我是 php 和 MySql 的新手，正在尝试编写一个 php 脚本来查询 MySQL 表。我花了几个小时搜索stackoverflow，但不太了解类似问题的一些答案，例如[如何从表中选择唯一值？](https://stackoverflow.com/questions/8219186/how-to-select-unique-values-from-a-table)和[MYSQL + 选择 2 列 - 1 是唯一的](https://stackoverflow.com/questions/9563193/mysql-select-2-columns-1-being-unique)

我有一个表，其中包含“位置”列和“地址”列以及其他一些列，其中包含有关位置等的其他信息。位置是例如商店的名称。地址栏包含该商店的街道地址。

一家商店有时在不同的地址有多个网点，我需要一个查询来显示表中的所有数据，如果地址是唯一的，该位置只会显示多次。

我有到数据库的 php 连接和数据库的选择工作，但需要有关 MySql 查询的帮助。

我在该位置上使用了 GROUP BY 函数，但所有地址都放在同一位置下。

这是我使用的，但只显示独特的位置。

```
<?php
mysql_connect("localhost","username","password");
mysql_select_db("dbname");
$sql=mysql_query("SELECT * from table GROUP BY location");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

如果地址是唯一的，我该如何进行查询以允许多次显示该位置？

提前谢谢你。。

不知道如何发布表结构，但这是我可以从 myphpadmin 得到的

```
**Column**      **Type**        **NULL**        **Comments**
_id              int(11)           No       auto_increment 
location         text              No       Shop Name 
address          text              No       Shop Address 
suburb           varchar(30)       No        
state            varchar(3)        No        
longitude        float             No       longitude 
latitude         float             No       latitude 
date             date              No        
time             time              No 
```

我所追求的是所有具有唯一地址的位置。某些位置将具有相同的名称和相同的地址，但某些位置将具有相同的名称但不同的地址。例如..如果表看起来像

```
**Location**     **Address**
Target           Pacific Fair
Kmart            Pacific Fair
Kmart            Robina
Kmart            Southport
Target           Pacific Fair
Target           Tweed City
Kmart            Pacific Fair
Best and Less    Pacific Fair 
```

我希望结果显示

```
**Location**     **Address**
Target           Pacific Fair
Target           Tweed City
Kmart            Pacific Fair
Kmart            Robina
Kmart            Southport
Best and Less    Pacific Fair 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:26:10.523

如果我正确理解您的问题，您需要按位置和地址进行分组：

```
SELECT location, address FROM table GROUP BY location, address 
```

或者您可以使用 DISTINCT：

```
SELECT DISTINCT location, address FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:13:17.587

我假设您的案例可能比数据中显示的要多。你可以在 col1 中有 NULL，你可以有只出现在 col1 或只出现在 col2 中的名称，等等。

```
SELECT a.name, c1.`count`, c2.`count`
FROM (SELECT col1 AS name FROM `Table` UNION SELECT col2 FROM `Table`) a
LEFT JOIN (SELECT col1, COUNT(*) AS `count` FROM `Table` GROUP BY col1) c1 
ON a.name = c1.col1
LEFT JOIN (SELECT col2, COUNT(*) AS `count` FROM `Table` GROUP BY col2) c2 
ON a.name = c2.col2; 
```

说明：派生表 a 是出现在任一列中的所有名称的并集。然后再制作两个派生表，每个表都有 col1 中的每个名称和出现次数的计数，然后是 col2 中名称的另一个类似的派生故事。

# facebook - 无法检索页面创建的事件

> ID：16056024
> 
> 赞同：0
> 
> 时间：2013-04-17T09:09:29.420
> 
> 标签：facebook, facebook-fql, facebook-access-token, user-permissions, facebook-events

我已经尝试了一切，图形，FQL，access_token 并授予了所有权限，多查询......现在我真的很累！有人可以告诉我如何检索由这样的页面创建的所有事件？[http://facebook.com/mammamiasantateresa](http://facebook.com/mammamiasantateresa) 我想知道为什么这个查询不起作用：

```
SELECT eid, name, description, location, pic_big, start_time, end_time, is_date_only FROM event WHERE creator = 229315807171062 
```

但是，使用此页面查询：205712556144006 (/fifteenonline) 只有一个事件，或者使用 Coldplay 的页面 15253175252 (/coldplay)，有很多事件，它才有效！我想知道为什么。几个星期没有人给我回应。拜托，这对我很重要。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:04:37.573

您的查询没问题，如果这是一个事件，它应该可以工作。但是您要查找的是墙上的帖子，而不是事件，并且可以通过在 Graph API 或 FQL 查询中的流中搜索来找到它：

图 API 请求：

[http://developers.facebook.com/tools/explorer?method=GET&path=229315807171062%2Ffeed](http://developers.facebook.com/tools/explorer?method=GET&path=229315807171062%2Ffeed)

FQL 查询请求（有 2 个字段，但无论如何这篇文章都在那里）：

[http://developers.facebook.com/tools/explorer?fql=SELECT%20message%2C%20updated_time%20FROM%20stream%20WHERE%20source_id%20%3D%20229315807171062](http://developers.facebook.com/tools/explorer?fql=SELECT%20message%2C%20updated_time%20FROM%20stream%20WHERE%20source_id%20%3D%20229315807171062)

# algorithm - 为 HMM 算法实现 alpha

> ID：16056025
> 
> 赞同：0
> 
> 时间：2013-04-17T09:09:30.143
> 
> 标签：algorithm, matlab

我正在研究在 Matlab 中实现 HMM 前向算法。我在编码 $\alpha_{j}(t)$ 时遇到了一些困难

1.  **初始化**$t <- ,$ $a_{ij}, b_{jk}$, 可见序列 $V^T, \alpha_j(0)$
2.  对于 $t <- t + 1$
3.  $\alpha_{j}(t) <-$ $ \sum^c_{1 = 1} \alpha_i(t - 1) a_{ij}b_{jk} v(t)$
4.  直到$t = T$
5.  **为最终状态返回**$P(V^T) <- \alpha_0(T)$
6.  **结尾**

我将如何实现 $\alpha_{j}(t)$ 的计算。当 $ a_{ij} = $ 转移概率矩阵 & $ b_{jk} =$ 发射矩阵 & $ v(t) = $ 观察符号

# maven - Maven 配置文件管理 - 在 POM 中禁用配置文件

> ID：16056029
> 
> 赞同：1
> 
> 时间：2013-04-17T09:09:46.077
> 
> 标签：maven, maven-3

有没有办法在 POM 中禁用活动配置文件？

否则我怎么能管理这样的配置

```
parentPOM
   |-- Parent Flex app POM
       |-- flexApp1 POM
       |      |-- App1-services POM
       |      |-- App1-flex-client POM
       |-- flexApp2 POM
              |-- App2-services POM
              |-- App2-flex-client POM 
```

我已经定义了一个集成测试配置文件，`Parent Flex app POM`其中指定了 flex 自动化依赖项（很多都包含在 swf 包装中，用于（并且仅用于）集成测试。问题是每个 flex 应用程序由 2 个模块组成，一个 flex 模块和一个 java 模块。当然，我不想将 flex 自动化库打包到 java 模块工件中。

正确的方法应该是像这样触发配置文件激活：

```
<activation>
    <property>
           <name>integrationTest</name>
    </property>
    <property>
        <name>packaging</name>
        <value>swf</value>
    </property>
 </activation> 
```

但是：maven 3 不支持多个激活属性 ( [http://jira.codehaus.org/browse/MNG-3328](http://jira.codehaus.org/browse/MNG-3328) ) 也不支持使用和运算符的多个条件 ( [http://jira.codehaus.org/browse/MNG-4565](http://jira.codehaus.org/browse/MNG-4565) ) ）。

所以我想通过在纯 java 模块的 pom.xml 中显式禁用配置文件来解决问题。但我没有找到办法。

我想避免集成 Maven 扩展。

请不要告诉我切换到gradle。

# python - pySnmp async 的反应与 sync 不同

> ID：16056030
> 
> 赞同：0
> 
> 时间：2013-04-17T09:09:48.507
> 
> 标签：python, pysnmp

我有 2 个几乎相同的方法调用，它们返回不同的结果

```
from pyasn1.type import univ
from pysnmp.entity.rfc3413.oneliner import cmdgen
def printResult(*result):
    print str(result)

print cmdgen.CommandGenerator().nextCmd(cmdgen.CommunityData('agent', 'public', 1), cmdgen.UdpTransportTarget(('172.16.1.15', 161)), (univ.ObjectIdentifier(("1.3.6.1.4.1.5528.100.4.1.1.1.10"),)))

getCmdGen = cmdgen.AsynCommandGenerator()
getCmdGen.nextCmd(cmdgen.CommunityData('agent', 'public', 1), cmdgen.UdpTransportTarget(('172.16.1.15', 161)), (univ.ObjectIdentifier(("1.3.6.1.4.1.5528.100.4.1.1.1.10")),), (printResult, (None,)))
getCmdGen.snmpEngine.transportDispatcher.runDispatcher() 
```

这打印出来：

```
(None, Integer('noError'), Integer(0), [[(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1095346743), Counter32(1095346743))], [(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1382714849), Counter32(1382714849))]])
(695125368, None, Integer('noError'), Integer(0), [[(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1095346743), Counter32(1095346743))]], None) 
```

如果您仔细观察，您会发现第一个正确返回 2 个项目，而第二个仅返回 1：

```
[[(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1095346743), Counter32(1095346743))], [(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1382714849), Counter32(1382714849))]] 
```

对比

```
[[(ObjectName(1.3.6.1.4.1.5528.100.4.1.1.1.10.1095346743), Counter32(1095346743))]] 
```

编辑。找出为什么我在某些情况下会出现奇怪的错误，但这并没有解决其余的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:59:39.860

如果回调函数没有返回任何内容，它将停止。仅当回调函数返回 1（或计算结果为 True 的值）时，才会请求下一个值。

# ruby - 用于管理文件的 Ruby 脚本

> ID：16056032
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:09:58.147
> 
> 标签：ruby, bash, file-management

我正在寻找可以执行以下操作的脚本：

我有一组普通文件，例如“myFile.log”，我想保留它们的当前状态。

我想将所有类型的文件`myFile.log.year-month-day-hour`放入 gzip 压缩的 tar 存档中，每天都有单独的子文件夹。

谁能指出我如何完成这项工作的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:48:21.223

如果你想对 Ruby 中的文件做任何有趣的事情，你需要

```
require 'fileutils' 
```

在 IRB 中查看您可以使用的方法

```
1.9.3-p327 :001 > require 'fileutils'
 => true
1.9.3-p327 :002 > File.methods.sort - Object.methods
 => [:absolute_path, :atime, :basename, :binread, :binwrite, :blockdev?, :chardev?, :chmod, :chown, :copy_stream, :ctime, :delete, :directory?, :dirname, :executable?, :executable_real?, :exist?, :exists?, :expand_path, :extname, :file?, :fnmatch, :fnmatch?, :for_fd, :foreach, :ftype, :grpowned?, :identical?, :join, :lchmod, :lchown, :link, :lstat, :mtime, :open, :owned?, :path, :pipe, :pipe?, :popen, :read, :readable?, :readable_real?, :readlines, :readlink, :realdirpath, :realpath, :rename, :select, :setgid?, :setuid?, :size, :size?, :socket?, :split, :stat, :sticky?, :symlink, :symlink?, :sysopen, :truncate, :try_convert, :umask, :unlink, :utime, :world_readable?, :world_writable?, :writable?, :writable_real?, :write, :zero?]
1.9.3-p327 :007 > FileUtils.methods.sort - Object.methods
 => [:cd, :chdir, :chmod, :chmod_R, :chown, :chown_R, :cmp, :collect_method, :commands, :compare_file, :compare_stream, :copy, :copy_entry, :copy_file, :copy_stream, :cp, :cp_r, :getwd, :have_option?, :identical?, :install, :link, :ln, :ln_s, :ln_sf, :makedirs, :mkdir, :mkdir_p, :mkpath, :move, :mv, :options, :options_of, :private_module_function, :pwd, :remove, :remove_dir, :remove_entry, :remove_entry_secure, :remove_file, :rm, :rm_f, :rm_r, :rm_rf, :rmdir, :rmtree, :safe_unlink, :symlink, :touch, :uptodate?]
1.9.3-p327 :013 > Dir.methods.sort - Object.methods
 => [:[], :chdir, :chroot, :delete, :entries, :exist?, :exists?, :foreach, :getwd, :glob, :home, :mkdir, :open, :pwd, :rmdir, :unlink] 
```

从 eg 开始`Dir.entries('/path')`，并使用 Ruby 的数组方法来处理列表，使用正则表达式来提取部分名称等

# c++ - 加载图形内容的线程

> ID：16056037
> 
> 赞同：2
> 
> 时间：2013-04-17T09:10:16.677
> 
> 标签：c++, linux, opengl, glx

我正在创建游戏引擎。在 Windows 上，我有两个线程和两个共享的上下文（使用 wglShareLists）。它工作得很好。当一个线程加载资源时，另一个线程正在渲染简单的加载屏幕。在 Linux 上没有 WGL，只有 glX。我不知道如何正确使用它。目前我的线程代码如下所示：

```
LinuxThread::LinuxThread() :
    handle_(0),
    running_(false),
    task_(0),
    useGraphicsContext_(0),
    threadContext_(0),
    threadDrawable_(0),
    dsp_(0)
{
}

LinuxThread::~LinuxThread() {
    finishTask();
    running_ = false;
    glXDestroyContext(dsp_, threadContext_);
}

ULONG LinuxThread::getId() {
    return static_cast<ULONG>(handle_);
}

void LinuxThread::start() {
    running_ = true;
    pthread_create(&handle_, 0, &LinuxThread::staticRun, (void*) this);
}

bool LinuxThread::isRunning() {
    return running_;
}

void LinuxThread::setGraphicsContext(bool state) {
    if (state) {
        Display* dsp = XOpenDisplay(0);
        threadDrawable_ = glXGetCurrentDrawable();
        GLint att[] = { GLX_RGBA, None };
        XVisualInfo* vi = glXChooseVisual(dsp, 0, att);
        GLXContext glc = glXGetCurrentContext();
        bool directlyToScreen = true; // False for x-server display.
        threadContext_ = glXCreateContext(dsp, vi, glc, directlyToScreen);
    }
    useGraphicsContext_ = state;
}

void LinuxThread::setTask(Task* task) {
//  if (useGraphicsContext_) {
//      task->run();
//      delete task;
//      return;
//  }
    finishTask();
    task_ = task;
}

bool LinuxThread::hasTask() {
    return task_ != 0;
}

void LinuxThread::finishTask() {
    while (task_ != 0) {
        usleep(1000);
    }
}

void LinuxThread::stop() {
    running_ = false;
}

void* LinuxThread::staticRun(void* thread) {
    return (void*) ((LinuxThread*) thread)->run();
}

int LinuxThread::run() {
    while (running_) {
        usleep(10000);
        if (task_ != 0) {
            if (useGraphicsContext_) {
                glXMakeCurrent(dsp_, threadDrawable_, threadContext_);
            }
            task_->run();
            if (useGraphicsContext_) {
                glFinish();
                glXMakeCurrent(dsp_, 0, 0);
            }
            delete task_;
            task_ = 0;
        }
    }
    return 1;
} 
```

它崩溃并显示如下错误消息：

```
nouveau: kernel rejected pushbuf: No such file or directory
nouveau: ch6: krec 0 pushes 1 bufs 14 relocs 0
nouveau: ch6: buf 00000000 00000002 00000006 00000006 00000000
nouveau: ch6: buf 00000001 00000010 00000002 00000002 00000000
nouveau: ch6: buf 00000002 0000000f 00000002 00000002 00000002
nouveau: ch6: buf 00000003 0000000e 00000002 00000000 00000002
nouveau: ch6: buf 00000004 00000007 00000002 00000002 00000002
nouveau: ch6: buf 00000005 0000000a 00000002 00000002 00000000
nouveau: ch6: buf 00000006 0000000b 00000002 00000002 00000000 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T18:50:04.830

I can't see a specific problem source, but the threading code complicates things a lot. In your shoes I would:

1.  Try setting `LIBGL_ALWAYS_SOFTWARE=y` before running, to make sure you're not hitting a problem in the nouveau driver. (This will use the internal Mesa Software renderer.)
2.  Extract your sharing code into a single thread, make sure it works, then move the known working code back to multiple threads as simply as possible.

# vba - 防止在excel中重复复制粘贴

> ID：16056038
> 
> 赞同：1
> 
> 时间：2013-04-17T09:10:19.720
> 
> 标签：vba, excel, copy-paste, validation

大家好，菜鸟又回来了。我正在将数据从一个工作表复制粘贴到另一个隐藏的工作表中，但如果不检查已粘贴的内容，则存在重复数据的危险。到目前为止，我所做的是在我要复制到的工作表中插入一个代码，以停止重复，但我现在遇到的复杂情况是验证是从头到尾检查整个列中的每一位数据，这是大约 5000< 个条目。B 列的报告日期对于属于同一月底的所有条目都是相同的。所以它会说 5000 个条目，其中 30/1/13....另一个有 28/02/13 等。理想情况下，我只想在 B 列中检查一次输入报告日期的位置，以及日期是否与我想复制，然后拒绝整个复制粘贴过程，而不是验证复制范围中的每个单独条目。这是我正在使用的代码。我希望我说得通，非常感谢你的帮助。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim r As Range
    Dim ans As String
    Const myCol As Long = 2

    If Intersect(Target, Columns(myCol)) Is Nothing Then Exit Sub

    Application.EnableEvents = False

    For Each r In Intersect(Target, Columns(myCol))
        If Application.CountIf(Columns(myCol), r.Value) > 1 Then
            MsgBox (r.Value & " already exsists")
            r.ClearContents
        End If
    Next
    Application.EnableEvents = True
End Sub 
```

* * *

那是我的代码，包括删除重复项，但它不起作用。我试过了

```
Sub LoadData_toTable()
Dim ws1LRow As Long, ws2LRow As Long
Dim ws1 As Worksheet, ws2 As Worksheet
Application.ScreenUpdating = False
Set ws1 = ThisWorkbook.Sheets("RAW DATA")
Set ws2 = ThisWorkbook.Sheets("DATA INPUT")
       With ws1
        ws1LRow = .Cells.Find(What:="*", _
                    After:=.Range("A1"), _
                    Lookat:=xlPart, _
                    LookIn:=xlFormulas, _
                    SearchOrder:=xlByRows, _
                    SearchDirection:=xlPrevious, _
                    MatchCase:=False).Row + 1

        End With
            With ws2
                    ws2LRow = .Range("G" & .Rows.Count).End(xlUp).Row
                    .Range("A2:AR" & ws2LRow).Copy
                    ws1.Range("A" & ws1LRow).PasteSpecial xlPasteValues
                    Application.CutCopyMode = False
                    Application.ScreenUpdating = True
            End With
                With ws1
                ws1.Range("A:A").RemoveDuplicates
            End With
            For Each WS In ThisWorkbook.Worksheets
        For Each PT In WS.PivotTables
            PT.RefreshTable
        Next PT
    Next WS

 MsgBox "Loading month's data complete!"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:43:39.130

一个非常长的计算时间解决方案是创建一个数组，其中仅包含不等于工作表中已有数据的数据（您必须迭代每个复制的元素并与隐藏工作表中的每个元素进行比较）。

否则，您可以以某种方式格式化重复的数据，然后迭代并删除除第一个数据之外的所有格式化数据（您将像以前一样重新格式化）。例子：

```
Selection.NumberFormat = "0.0 ""double"""  '<--- this could be made also with colors
Selection.FormatConditions.AddUniqueValues
Selection.FormatConditions(Selection.FormatConditions.count).SetFirstPriority
Selection.FormatConditions(1).DupeUnique = xlDuplicate
ExecuteExcel4Macro "(2,1,""0.0 ""double"""")"
Selection.FormatConditions(1).StopIfTrue = False 
```

然后在内部迭代

```
cells(x,y).select

if counted_formatted_data = 1 then
    Selection.NumberFormat = "0.0 " '<--- back to the previous formatting
else
    selection.delete
end if 
```

当然，如果您不选择任何内容就这样做会更好。

# django - Django ModelForm ChoiceField 不显示实例数据

> ID：16056045
> 
> 赞同：1
> 
> 时间：2013-04-17T09:10:31.523
> 
> 标签：django, django-forms

我有一`ModelForm`堂课，其中我将几个字段设置为`ChoiceField`. 对于我的一个观点，我想从我的`ModelForm`类中创建一个表单，该表单从数据库中的模型实例中提取（就像这样）：

```
form = MyModel(instance=model_instance) 
```

当我这样做然后在模板中呈现表单时，我注意到大多数字段都预先填充了从模型实例中提取的值，这正是我想要的。但是，这不是两个`ChoiceField`字段的情况。这些呈现为没有选择特定选项的下拉选择菜单。

奇怪的是，如果我没有`ChoiceField`在我的 ModelForm 类中将这两个字段定义为 -type，它们会呈现为 HTML 中的普通文本输入字段并使用数据库值进行预填充。但是当我定义它们以使它们在 HTML 中显示为选择选项输入字段时，没有预先选择任何内容。我可以更改它以便预先选择数据库中的值吗？

**编辑：**这里要求的是我的模型和表单的代码：

```
class App(models.Model):
    CODES = (
        (u'a',u'annual'),
        (u'm',u'monthly'),
        (u'w',u'weekly')
    )
    code = models.CharField(max_length=1, choices=CODES)
    start_time = models.TimeField(blank=True, null=True)
    end_time = models.TimeField(blank=True, null=True)

class AppForm(ModelForm):
    CODES = (
        (u'',u'Please select code'),
        (u'a',u'annual'),
        (u'm',u'monthly'),
        (u'w',u'weekly')
    )
    TIMES = (
        (u'00:00',u'All Day'),
        (u'12:00',u'Noon')
    )
    start_time = forms.ChoiceField(required=False, choices=TIMES)
    end_time = forms.ChoiceField(required=False, choices=TIMES)
    code = forms.ChoiceField(choices=CODES, label='Type')

    class Meta:
        model = App 
```

有趣的是，`code`当呈现为 HTML 时，字段具有预先选择的模型实例值。我想知道`choices`模型定义中的参数是否会有所不同？

**更新：**我刚刚注意到，如果我像这样拉起一个`App`实例`python manage.py shell`：

```
a = App.objects.get(id=16)
a.start_time 
```

我得到一个像`datetime.time(12, 0)`. 但是在 Django 管理员中，当我查看所有`App`实例时，它们都显示`(None)`在`start_time`和下`end_time`。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:00:23.860

响应您的更新：您的时间字符串与默认时间字符串 HH:MM 格式匹配。就像用户会在 12:00 手动从网站输入它们一样。这些值在模型保存时被解析并转化为时间（在真正验证时）。

当您加载模型时 - 当然，从对象加载的初始值与字段的 (models.TimeField) 类型匹配。

如果您将 TIMES 替换为

```
 (datetime.time(0,0),u'All Day'),
    (datetime.time(12,0),u'Noon') 
```

你的麻烦应该已经结束了。

艾伦

# jquery - Droppable 不会正确的位置

> ID：16056046
> 
> 赞同：1
> 
> 时间：2013-04-17T09:10:40.550
> 
> 标签：jquery, droppable

我创建了一个样式化的库存，并且由于我在 .css 中添加了样式，因此当将物品放回库存时，它们会低于现有物品并破坏我的盒子。我怎样才能解决这个问题？*（他们基本上会退出其中一个边界并进入一个新边界）*

[http://jsfiddle.net/BxPjC/](http://jsfiddle.net/BxPjC/)

**注意：**删除 itembox1、itembox3 和 itembox4 似乎可以修复它，但是我失去了我的样式。我可以用什么来替换用于样式的 div。

```
function itemInSpot(drag_item,spot)
{
var oldSpotItem = $(spot).find('img');
if(oldSpotItem.length>100) {
oldSpotItem.appendTo('.inventholding').draggable({ revert: 'invalid' });
}
var item = $('<img />');
item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot)    .draggable({ revert: 'invalid' });
drag_item.remove(); // remove the old object
}

 $(document).ready(function() {
  $("img").draggable({ revert: 'invalid'});

$(".inventholding").droppable()
$("#pricebox").droppable({ accept: '.price'})
$('#pricebox').droppable({ accept: '.price'});
$('#pricebox,#pricebox,.inventholding').bind('drop', function(ev,ui) {      itemInSpot(ui.draggable,this); });

$('#clone_button').click(function() {
    $('#clone_wrapper div:#pricebox')
        .clone()
    .append('')
    .appendTo($('#clone_wrapper'));
})
});

<div id="container">

<body>
    <div id="clone_wrapper">
        <div class="right">
            <div id="pricebox" style="background: none; width:153px; padding:1px; height:auto; margin 1px; border:1px solid black; 
float:left;">
                <select name="qty">
                    <option value="Each" selected>Each</option>
                    <option value="All"> All</option>
                    <option value="Any 2">Any 2</option>
                    <option value="Any 3">Any 3</option>
                </select>
                <input id="coin" type="text" id="text" name="text_name" style="width: 35px; style=" height: 21px; " maxlength=3 /></h6></div>
</div></div>

<button id="clone_button ">New</button></div>
<div id='inventrightside1'><div id='inventrightside2'><p1><img     src="http://kennenmen.netai.net/images/invent1.png "/></p>

<div class="inventholding " clear:both;">
                <div id="itembox1">
                    <div id="itembox3">
                        <div id="itembox4">
                            <img src="http://images.lasuni.com/icons/lionhat_red.png"   class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/duckring_pink.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/cowboyhat_gold.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/halo_pink.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/cakehat_strawberry.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/ninjaeyemask_pink.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/carnivalmask_blue.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/alienhead_purple.png" class="price" alt="" />
                            <img src="http://images.lasuni.com/icons/skullhead_white.png" class="price" alt="" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
</body>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:32:30.880

在您的 JS 中更改`.inventholding`为`#itembox4`

[http://jsfiddle.net/tzDXq/](http://jsfiddle.net/tzDXq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:24:31.847

[http://jsfiddle.net/hWabw/](http://jsfiddle.net/hWabw/)

```
 <div id="itembox1">
               <div id="itembox3">
                  <div id="itembox4">
                    ...
                  </div>
               </div>
            </div> 
```

我删除了项目框，现在它似乎可以工作了。

另一种方法是将最后一个项目框作为放置的目标。不是周围的容器。

# tfs - 在不同的 PC 上从 TFS 2012 Express 迁移到完整版

> ID：16056047
> 
> 赞同：0
> 
> 时间：2013-04-17T09:10:53.633
> 
> 标签：tfs

我正在为小型家庭项目运行 TFS 服务器... 2012 express 在 Windows 7 SP2 机器上。我现在正在升级到 Windows Server 2012 机器和完整版的 TFS 2012。有没有办法备份我当前的 TFS 设置，并将其恢复到我的新 PC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:28:38.257

本指南应向您展示如何从 express 升级到完整版本：http: [//msdn.microsoft.com/en-us/library/vstudio/jj620928.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj620928.aspx)

这描述了迁移到新硬件的细节：http: [//msdn.microsoft.com/en-us/library/vstudio/jj620930.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj620930.aspx)

# azure - 如何在具有 2 个不同区域的 Windows Azure 上设置连接的 VM

> ID：16056054
> 
> 赞同：2
> 
> 时间：2013-04-17T09:11:24.560
> 
> 标签：azure, azure-virtual-machine

[我浏览了Windows Azure 上虚拟机](http://weblogs.asp.net/scottgu/archive/2013/04/16/windows-azure-general-availability-of-infrastructure-as-a-service-iaas.aspx)的一般可用性的官方公告。所以我想在此移动我的客户的生产应用程序之一。在以下 2 个不同地区设置此应用程序的要求

基本上我们有两个来自澳大利亚和土耳其的人口统计数据，人们将从那里访问服务器，所以我们需要两台网络服务器，一个来自澳大利亚，另一个来自欧洲

**- 2 台带有 Window server 2008 r2 的 Web 服务器**

**- 将数据库服务器与 SQL 服务器分开**

**- 一个负载均衡器**

**查询**

**1)**哪些数据中心最适合上述地区？
**2）**我们不关心正常运行时间，而是关心
基于区域设置的性能，因此在 1 个 VM 上运行应用程序可以吗？
**3)**数据库应该托管在哪个区域，这样无论性能问题如何，两个 Web 服务器都可以顺利访问。它应该是什么区域？
**4）**我们可以设置负载平衡，一个url将请求传输到澳大利亚服务器，并将其他传输请求传输到欧洲服务器吗？
**5）**我已经计算了价格

*   2 VM（小）用于托管窗口服务器

*   1 vm (medium) 用于托管 sql server

*   35 GB 带宽
*   对开发人员的支持，这将花费我**大约 300 美元**，

我是否需要考虑除此之外的其他定价？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:56:44.323

至于最适合的数据中心，我建议使用 1\. 澳大利亚 - 东南亚 2\. 土耳其 - 西欧/北欧

现在是另一个问题.... 1\. 如果您正在查看区域设置的性能...那么您应该寻找设置 Windows Azure 流量管理器（基于性能）...这将为您提供基于最接近的最佳性能托管服务.... 2\. Windows Azure 流量管理器（基于循环）将满足对澳大利亚的一个请求和对欧洲的第二个请求的期望。注意：您可以设置以上两个之一，但不能同时设置。它不同于在区域内工作的负载平衡（阅读更多... [Azure VM 负载平衡与流量管理器](https://stackoverflow.com/questions/14546554/azure-vm-load-balancing-vs-traffic-manager)）

还有其他成本，例如交易成本、存储成本等。我建议您阅读 Microsoft Azure 成本模型了解详细信息。（阅读更多...... [http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)）

请记住，VM 可以循环使用……您还可以根据自己的要求探索云服务（Web 角色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T01:00:05.193

我怀疑通过在同一数据中心中拥有一台 SQL 数据库服务器和一台 Web 服务器，您会获得更多的性能改进，而不是让两台靠近您的客户的 Web 服务器都访问同一个数据库。Web 服务器和数据库之间的通信将比客户端和 Web 服务器之间的通信更多。然后，您可以选择最想让哪组客户满意，然后选择离他们最近的数据中心。如果您想让您的澳大利亚客户满意，那么您还有另一个选择，因为对于可以使用南十字电缆的新南威尔士州城市，他们从美国数据中心获得的响应时间比从亚洲数据中心获得的响应时间要短。

# asp.net-mvc - 使用 itextsharp 将带图像的 HTML 转换为 PDF 时出错

> ID：16056055
> 
> 赞同：0
> 
> 时间：2013-04-17T09:11:34.370
> 
> 标签：asp.net-mvc, itextsharp

在我的应用程序中，首先允许用户使用 CKEDITOR 创建 html 文档，其中用户可以创建 html 文档并可以插入图像、表单字段等。然后将生成的 HTML 文档转换为 PDF。如果 HTML 文档包含纯文本，则 PDF 文件会成功创建，但如果用户在其中插入图像则会出错。用于创建 PDF 文档的代码。

```
public ActionResult CreateFile(FormCollection data)
    {
        var filename = data["filename"];
        var htmlContent = data["content"];
        string sFilePath = Server.MapPath(_createdPDF + filename + ".html");
        htmlContent = htmlContent.Trim();
        if (!System.IO.File.Exists(sFilePath))
        {
            using (FileStream fs = new FileStream(sFilePath, FileMode.Create))
            {
                using (StreamWriter w = new StreamWriter(fs, Encoding.UTF8))
                {
                    w.Write(htmlContent);
                }
            }
            createPDF(sFilePath);
        }

        return View();
    }

    private MemoryStream createPDF(string sFilePath)
    {
        string filename = Path.GetFileNameWithoutExtension(sFilePath);
        string name = Server.MapPath(_createdPDF + filename + ".pdf");
        MemoryStream ms = new MemoryStream();
        TextReader tr = new StringReader(sFilePath);
        Document document = new Document(PageSize.A4, 30, 30, 30, 30);
        string urldir = Request.Url.GetLeftPart(UriPartial.Path);
        urldir = urldir.Substring(0, urldir.LastIndexOf("/") + 1);
        Response.Write(urldir);
        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(name, FileMode.Create));
        document.Open();
        string htmlText = "";
        StreamReader sr;
        sr = System.IO.File.OpenText(sFilePath);
        htmlText = sr.ReadToEnd();
        sr.Close();
        WebClient wc = new WebClient();
        Response.Write(htmlText);
        var props = new Dictionary<string, Object>();
        props["img_baseurl"] = @"C:\Documents and Settings\shubham\My Documents\visdatemplatemanger\visdatemplatemanger\";
        List<IElement> htmlarraylist = HTMLWorker.ParseToList(new StringReader(htmlText), null,props);
        for (int k = 0; k < htmlarraylist.Count; k++)
        {
            document.Add((IElement)htmlarraylist[k]);
        }
        document.Close();
        System.IO.File.Delete(sFilePath);
        UploadURL(name);
        return ms;
    } 
```

如果图像包含在 HTML 文档中，我得到的错误是：

```
Could not find a part of the path 'C:\Program Files\Common Files\Microsoft Shared\PDFimages\rectangle-shape.png'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:48:09.057

iTextSharp 将尝试为基于 HTTP 的文档解析相对图像，但从文件系统提供的图像需要提供绝对路径或为其搜索提供基础。

```
//Image search base, path will be concatenated directly so make sure it contains a trailing slash
var props = new Dictionary<string, Object>();
props["img_baseurl"] = @"c:\images\";

//Include the props from above
htmlarraylist = HTMLWorker.ParseToList(sr, null, props); 
```

# c# - 为包含图标的类创建多个实例时出现 OutOfMemoryException

> ID：16056057
> 
> 赞同：1
> 
> 时间：2013-04-17T09:11:38.423
> 
> 标签：c#, winforms

我有一个包含图像的类：

```
class AnyClass
{
    Image AnyImage;
    string AnyString;
} 
```

我有一个`OutOfMemoryException`当我创建这个类的 2000 多个实例时，我
要分配的图像`AnyClass`只有 3 个和图标大小。
这些实例将用作 ListView 的数据源。

有没有办法通过引用分配图像`AnyClass`？
或者处理这种情况的方式/模式是什么？

已编辑：
尚未测试代码，但这与正在执行的操作类似：

```
static void Main(string[] args)
{
    List<AnyClass> lst = new List<AnyClass>();
    for (int i = 0; i < 2000; i++)
    {
        lst.Add(new AnyClass() { AnyImage = ImageList.image1, AnyString = "test" });
    }
}

public class AnyClass
{
    public Image AnyImage;
    public string AnyString;
}

public class ImageList
{
    public static Image image1;
    public static Image image2;
    public static Image imgae3;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:40:48.693

我在我的资源项目中添加了一个示例图像，并且我编写了两个代码：

这个抛出一个内存异常：

```
List<AnyClass> lst = new List<AnyClass>();
for (int i = 0; i < 20000; i++)
{
    lst.Add(new AnyClass() { AnyImage = ConsoleApplication1.Properties.Resources.Image1, AnyString = "test" });
} 
```

这个没有：

```
var image1 = ConsoleApplication1.Properties.Resources.Image1;
List<AnyClass> lst = new List<AnyClass>();
for (int i = 0; i < 20000; i++)
{
    lst.Add(new AnyClass() { AnyImage = image1, AnyString = "test" });
} 
```

在任务管理器中，您可以看到第一个代码正在使用内存，除非没有更多。
第二个代码立即运行。

此外，您可以尝试以下代码：

```
var instance1 = ConsoleApplication1.Properties.Resources.Image1;
var instance2 = ConsoleApplication1.Properties.Resources.Image1;

Console.Write(instance1 == instance2); -- output false 
```

因此，如果您在项目的资源中使用图像，则必须先对其进行缓存，否则每次调用资源时都会创建图像的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:55:34.090

听起来这与 GDI+ 句柄有关，而不是内存。特别是，我希望您在完成后不会*处理*图像。由于`AnyClass`封装了图像，因此感觉`AnyClass`应该是`IDisposable`：

```
class AnyClass : IDisposable
{
    public void Dispose() {
        if(AnyImage != null) { AnyImage.Dispose(); AnyImage = null; }
    }
    Image AnyImage;
    string AnyString;
} 
```

然后你应该在处理完`using`这些实例后（最好是通过）处理它们。

这里的重点是每个都`Image`使用 GDI+ 句柄；该句柄在以下任一情况下被释放：

*   图像被*处理*（由您的代码，通常通过`using`）
*   图像*最终确定*（在垃圾收集期间/之后）

如果您有足够的内存，垃圾收集*将不会经常运行*，因此垃圾收集不会释放丢弃的句柄。这意味着您需要警惕在处理完每张图像后正确处理它。

不过，诀窍是知道您何时“完成”了图像。如果您处理`Image`UI 仍在使用的...坏事。

# sql - INNER JOIN 与第二个表中的位置

> ID：16056058
> 
> 赞同：0
> 
> 时间：2013-04-17T09:11:38.857
> 
> 标签：sql, inner-join

我正在运行一个`CodeIgniter`为游戏运行后端，其中用户信息和高分表保存在数据库中。每个用户只能以个人最好成绩进入高分，因此每个用户只有一个条目

现在我需要为客户导出该数据，以便他可以随机选择获胜者。基本上我想给他所有的用户数据加上用户积分和他在高分表中的位置。

我在弄清楚如何在高分表中获得位置时遇到问题。

假设我的用户表看起来像这样

```
user_table
| id|name|
|...| ...|

highscore_table
|id |user_id|points|
|...|  ...  |  ... | 
```

SQL语句，不包括高分位置，看起来像这样

```
SELECT user_table.id, name, points
FROM user_table
INNER JOIN highscore_table ON user_table.id = highscore_table.user_id
ORDER BY name 
```

导出的数据应如下所示

```
|id | name|points|hs_position|
|...| ... |  ... |    ...    | 
```

通常，当我请求高分时，我会做类似的事情，但对数据进行排序`points`. 这不是一个选择。

有人可以告诉我如何实现这一目标，引导我朝着正确的方向前进，还是简单明了地告诉我这是不可能的？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:19:41.757

> 我在弄清楚如何在高分表中获得位置时遇到问题。

如果您使用的是 SQL-Server，您可以使用`DENSE_RANK`HS-Rank 并`ROW_NUMBER`获取每个用户最高点的行：

```
WITH cte 
     AS (SELECT user_table.id, 
                name, 
                points, 
                hs_position=Dense_rank() 
                              OVER( 
                                ORDER BY points DESC), 
                Personalbest_Num=Row_number() 
                                   OVER( 
                                     partition BY id 
                                     ORDER BY points DESC) 
         FROM   user_table 
                INNER JOIN highscore_table 
                        ON user_table.id = highscore_table.user_id) 
SELECT id, 
       name, 
       points, 
       hs_position 
FROM   cte 
WHERE  personalbest_num = 1 
ORDER  BY hs_position ASC, 
          name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:38:07.623

如果您使用的 RDBMS 不支持排名函数（例如 SQLite），那么实现此目的的一种方法是通过子查询 - 如下所示：

```
SELECT u.id, u.name, h.points, 
       (select count(*) + 1
        from highscore_table h2 
        WHERE h2.points > h.points) hs_position
FROM user_table u
INNER JOIN highscore_table h ON u.id = h.user_id
ORDER BY u.name 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!5/79180/3)。

（如果您想要一个密集排名的高分，请更改`count(*) + 1`为`count(distinct h2.points) + 1`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:27:54.373

这是 MySQL 的解决方案：

```
SELECT user_table.id, name, points, hs_table.rank
FROM user_table
INNER JOIN 
(
  SELECT hs.*, IF(@prev != points, @pos:=@pos + 1, @pos) as rank
  , @prev:=points
  FROM highscore_table hs,
       (SELECT @pos:=0, @prev:=NULL) vars
  ORDER BY points DESC
) hs_table
 ON user_table.id = hs_table.user_id
ORDER BY name 
```

拥有相同分数的人将获得相同的排名。

# firefox - 谷歌地图无法在 Firefox 上通过 https 加载

> ID：16056065
> 
> 赞同：1
> 
> 时间：2013-04-17T09:11:56.577
> 
> 标签：firefox, google-maps-api-3, https

我们正在尝试通过 HTTPS 访问 Google 地图。

我们将 JSP 上的脚本修改为

```
script src="https://maps.googleapis.com/maps/api/js?client=<xxxx>&sensor=false" type="text/javascript" 
```

这似乎在 Chrome 和 IE8 中正常工作。但在 Firefox（V 19.0.2 和 11）中，存在一些问题。

具体来说，我们得到

> TypeError：google.maps.InfoWindow 不是构造函数

在 Firefox 控制台中，我认为这意味着 Google API 没有被正确访问。

对此问题有任何建议/解决方案吗？

**更多的：**

我们收到来自 googlemaps api 的 407 响应。具体来说，使用 Fiddler 请求看起来像：

```
CONNECT maps.googleapis.com:443 HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0
Proxy-Connection: keep-alive
Connection: keep-alive
Host: maps.googleapis.com 
```

响应看起来像：

```
HTTP/1.1 407 Proxy Authorization Required
Date: Mon, 22 Apr 2013 04:46:47 GMT
Proxy-Connection: keep-alive
Via: 1.1 XXXXX
Cache-Control: no-store
Content-Type: text/html
Content-Language: en
Proxy-Authenticate: NTLM
Proxy-Authenticate: Basic realm="Websense Content Gateway"
Content-Length: 322
Proxy-Support: Session-Based-Authentication

<HEAD><TITLE>Proxy Authorization Required</TITLE></HEAD>
<BODY BGCOLOR="white" FGCOLOR="black"><H1>Proxy Authorization Required</H1><HR>
<FONT FACE="Helvetica,Arial"><B>
Description: Authorization is required for access to this proxy</B></FONT>
<HR>
<!-- default "Proxy Authorization Required" response (407) -->
</BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T04:03:59.130

该死的..这是我公司的互联网代理的问题！我必须为我的应用程序（包括谷歌地图 API）使用的所有 URL 添加一个例外，它工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-25T02:19:49.227

在位置输入栏中通过 https 添加 google map api 的所有 url 以获取证书异常。

例如：
[https ://maps.googleapis.com](https://maps.googleapis.com)
[https://maps.gstatic.com](https://maps.gstatic.com)

“获取证书”然后“确认安全例外”
工具>高级>证书>查看证书>“服务器”选项卡>“添加例外...”

# matlab - 在数据集中搜索名称错误：未定义函数 'eq' 以获取类型为 'cell' 的输入参数

> ID：16056066
> 
> 赞同：1
> 
> 时间：2013-04-17T09:11:58.550
> 
> 标签：matlab

我加载了一个包含一些数据列的文件。第一行包含 ,CITY,YEAR2000 。

第一列有城市名称。其他列包含数字数据。

我正在尝试使用以下方法搜索特定城市：

```
data(data.CITY=='Athens',3:end) 
```

在哪里

`data = dataset('File','cities.txt','Delimiter',',')`

但我收到一个错误

```
Undefined function 'eq' for input arguments of type 'cell'. 
```

- - - - 更新 - - - - - - - - - - - - - - -

好的，使用：

```
data(find(strncmp(data.CITY,'Athens',length('Athens'))),3:end) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:21:10.213

您是否尝试过使用`strncmp`tangled with `find`？

我会这样使用它

```
find(strncmp(data.CITY,'ATHENS',length('ATHENS'))) 
```

**编辑**

其他可利用的机会包括`strfind`

```
strfind(data.CITY,'ATHENS') 
```

**编辑 2**

你也可以试试

```
data(ismember(data.CITY,'ATHENS'),3:end) 
```

这应该会导致您获得预期的结果（至少我猜是这样）。

**编辑 3** 鉴于您的最后一个请求，我将采用此解决方案：

```
inp = input('Name of the CITY: ','s')
Name of the City: ATHENS
data(find(strncmp(data.CITY,inp,length(inp))),3:end) 
```

# magento - 编辑客户时，created_at 列在 magento 中采用垃圾日期

> ID：16056067
> 
> 赞同：0
> 
> 时间：2013-04-17T09:12:03.023
> 
> 标签：magento, magento-1.6

我正在使用 Magento 1.6.1CE。我已将默认时区设置为澳大利亚/珀斯。我的服务器也在同一时区运行。

创建客户时，数据库中的 created_at 列和管理 html 中的客户自列没有问题。

但是，当编辑详细信息并更新保存时没有问题，但客户自列使用一些垃圾日期，例如 30/11/00-1 1:30:00 AM 或 01/01/1970 9:30:00 AM。因此，当我在数据库 created_at 中看到它显示 0000-00-00 00:00:00 时，我下次无法编辑它（显示异常处理已禁用）。

请让我知道如何解决这个问题。我是 Magento 编码的新手。

提前致谢…

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:45:12.257

我曾经有过类似的问题。这是因为 Magento 采用特定的日期格式，这取决于您的语言环境。

默认情况下，Magento 使用月/日/年格式。在您的情况下，Magento 似乎确实改变了日期和月份。因此，请确保“区域设置”和“时区”`System > Configuration > General > Locale Options`匹配。

如果它们匹配并且您仍然遇到此问题，那么您可以尝试重写客户编辑块或控制器操作。

# json - 如何用我自己的 json 实现替换 gwt json

> ID：16056073
> 
> 赞同：0
> 
> 时间：2013-04-17T09:12:34.100
> 
> 标签：json, gwt

**我需要在我的 gwt-project `com.google.gwt.json.client`包中找到一种方法来实现 json 实现，而不是在 GWT 中找到 json `com.google.gwt.json package`。**

在我的 GWT 项目中，我想使用自己编写的 json 实现并存储在我的项目中的一个包中，其路径与 GWT json 包的路径相同。

这个包里面的文件是`com.google.gwt.json.client`我自己实现的，在我的项目中保存在同一个包中，如何在项目中配置使用这些包而不是原来的。

任何有关此的建议将不胜感激。

谢谢大家..

**更新：为了更清楚地说明我在寻找什么：在 GWT 中使用 JSONUtils 进行解析时，使解析器使用我的项目`com.google.gwt.json`包中编写的 JSONObject，并在包中安装 GWT-json `com.google.gwt.json`。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:14:26.913

有时需要修改某些 GWT 核心类，因为要么需要修复问题，要么需要向它们添加新特性。

例如，要覆盖任何 GWT 实现类，`com.google.gwt.json.client.JSONObject`您只需在 src 文件夹中使用相同的路径复制和修改该类：`src/main/java/com/google/gwt/json/client/JSONObject.java`如果您使用的是 maven， `src/com/google/gwt/json/client/JSONObject.java`否则。

您唯一需要注意的是，您的`src`文件夹在您的类路径中比 gwt sdk 排在第一位，而使用 maven，默认情况下是这样。您还应该知道，当您更新 gwt 版本时，您可能需要更新您的实现。

如果您尝试覆盖的类的实例是使用`GWT.create()`调用在 GWT 中创建的，您可以用您自己的实现替换该类，并`<replace-with>`在`.gwt.xml`. 这种技术称为[延迟绑定](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)。情况并非如此，因为`JSONObject`通常使用`new`.

最后，< [super-source](https://developers.google.com/web-toolkit/doc/1.6/DevGuideOrganizingProjects) > 标记可用于在编译时覆盖任何类实现。尽管`super-source`旨在`jre`通过实现覆盖类`gwt`，但将 gwt 替换为其他 gwt 实现是可行的。在这种情况下，您必须将具有相同命名空间结构的修改后的类放在`super-source`标记指向的文件夹中。

# linux - 删除脚本只删除文件而不是文件夹

> ID：16056080
> 
> 赞同：2
> 
> 时间：2013-04-17T09:12:57.743
> 
> 标签：linux, bash, file-io, delete-directory

我有一个每周通过 cron 运行的脚本，该脚本会删除我的 Web 服务器上的大量临时文件，但我刚刚注意到该脚本并未删除仍占用空间的文件夹。

修改脚本以删除文件夹的最佳方法是什么？

```
find /my/path/ -type d –ctime +5 –exec rm -r {} \;

#!/bin/bash
# Deletes temp files older then 5 days
DOCS='/var/www/user/docs/temp'
SCRATCH='/var/www/user/temp/scratch'

if [ -d "$DOCS" ]; then
find $DOCSJS -type f -mtime +5 -exec rm -rf {} \; > /tmp/docs.txt
fi
if [ -d "$SCRATCH" ]; then
find $SCRATCH -type f -mtime +5 -exec rm -rf {} \; > /tmp/docs.txt
fi 
```

我的脚本实际上有 -rf 作为删除所有文件夹的标志。

需要注意的一点是，上面的文件夹是符号链接，`/mnt/sdb1/docs/js`并且`/mnt/sdb1/temp/scratch`- 脚本会跟随符号链接还是我应该将其硬编码到挂载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:25:19.640

您需要将其他选项传递给`rm`脚本中的命令。其实你需要`rm -rf`. 我建议去`man 1 rm`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:28:42.707

改变这个：

```
find $DOCSJS -type f -mtime +5 -exec rm 
```

到：

```
find $DOCSJS -type f -mtime +5 -exec rm -Rf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:52:18.420

改变这个

```
if [ -d "$SCRATCH" ]; then
find $SCRATCH -type f -mtime +5 -exec rm -rf {} \; > /tmp/docs.txt
fi 
```

进入

```
if [ -d "$SCRATCH" ]; then
find $SCRATCH -type d -mtime +5 -exec rm -rf {} \; > /tmp/docs.txt
fi 
```

`-type f`您只使用标志搜索文件；用于`-type d`目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:54:14.060

目前您无法删除目录，因为输出`find`仅限于文件。您应该删除此选项，以便将旧文件和目录都传递给`rm -rf`

```
find $DIR -mtime +5 -exec rm -rf {} \; 
```

这将保留其中包含新文件的旧目录（但它会删除旧文件），但会删除两者都是旧的文件和目录。

# javascript - 使用或不使用原型的区别：他们似乎做同样的事情

> ID：16056081
> 
> 赞同：1
> 
> 时间：2013-04-17T09:13:04.423
> 
> 标签：javascript

使用或不使用有什么区别`prototype`？他们显然也是这样做的。

与`prototype`：

```
function poligon(angles){
     this.angles = angles;
}
poligon.prototype.color = function(){ return "blue"; }

var mypol = new poligon(14);

alert(mypol.color()); 
```

没有`prototype`：

```
function poligon(angles){
     this.angles = angles;
}
poligon.color = function(){ return "blue"; }

var mypol = new poligon(12);

alert(poligon.color()); 
```

添加带有`prototype`和不带有它的“颜色”对象的真正含义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:18:00.793

是的，当引入 javascript 原型时，这并不总是很清楚。

如果您向原型添加一个方法，那么从该原型继承的每个对象都将从那时起具有此功能。在这种情况下，您的类/函数“poligon”可能是唯一从该原型继承的类。

当您声明一个新类型时，区别就出现了，例如，“矩形”，您为其声明`rectangle.prototype = poligon.prototype;`. 现在，您的矩形类将继承在 poligon**原型**中声明的所有方法，如果您只是将方法添加到“poligon”，则不会出现这种情况。

继承在 javascript 中的工作方式不同，并且在来自经典 OOP 语言时有时会非常混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:19:57.140

通过像您一样使用原型没有区别，但是当您创建从对象派生的新对象时，原型会派上用场`Poligon`。

```
Poligon.print = function() {};
new Poligon().print(); // Has no method print

Poligon.prototype.print = function() {};
new Poligon().print(); // Tah dah! 
```

# python - Def函数python：raw_input不存储

> ID：16056082
> 
> 赞同：1
> 
> 时间：2013-04-17T09:13:07.353
> 
> 标签：python, input, raw-input

我是python的新手。自从我 2013 年开始在大学学习以来，我一直在努力学习以了解 Python 是如何工作的。对不起，如果有点乱。

让我在下面展示我的问题。我有一些 def 函数看起来像：

```
def thread_1():
                a = input('Value UTS (100) = ')
                if a > 100:
                    print line2
                    d=raw_input('Dont higher than 100\. Input y to repeat : ') 
                    d='y'
                    if d=='y' :
                        thread_1()
                    return a

def thread_2():
                b = input('Value UAS (100) = ')
                if b > 100:
                    print line2
                    d=raw_input('Dont higher than 100\. Input y to repeat : ') 
                    d='y'
                    if d=='y' :
                        thread_2()
                    return b
def thread_3():                         
                c = input('Value Course (100) = ')
                if c > 100:
                    print line2
                    d=raw_input('Dont higher than 100\. Input y to repeat : ') 
                    d='y'
                    if d=='y' :
                        thread_3()
def thread_4():                                                          
                value_total = a*50/100+b*30/100+c*20/100 
```

这我的表达式 def 到程序列表中

```
if p==1:
            thread_1()
            thread_2()
            thread_3()
            thread_4() 
```

最后，我运行这个程序：只要我输入数字是好的，但最后程序显示错误代码如下：

```
Traceback (most recent call last):   File "ganjil-genap.py", line 71, in <module>
    thread_4()   File "ganjil-genap.py", line 36, in thread_4
    value_total = a*50/100+b*30/100+c*20/100 NameError: global name 'a' is not defined 
```

谁能让我知道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:30:31.747

您在 thread_1、thread_2 和 thread_3 上使用的变量 a、b 和 c 仅在这些函数内部定义。'a' 只在 thread_1 内定义，b 在 thread_2 内，c 在 thread_3 内定义，但它们不是主程序的全局变量。该声明

```
return a 
```

仅返回变量 a 的值。

你应该使变量全局化。我认为它应该是这样的：

```
a=0
def thread_1():
   global a
   a= raW_input.... 
```

这将使您的 a、b、c 变量成为全局变量。

然后在 thread_4() 中，a、b 和 c 应该作为函数的参数传递。

```
def thread_4(a,b,c): 
```

我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:15:05.213

您可能忘记了`thread_*`函数的参数。

例如，`thread_4`函数声明需要如下所示：

```
def thread_4(a, b, c):                                                          
    value_total = a*50/100+b*30/100+c*20/100 
```

您还必须在函数调用中为函数提供参数，例如：

```
if p==1:
    a=1, b=2, c=3   
    thread_1(a, b, c)
    thread_2(a, b, c)
    thread_3(a, b, c)
    thread_4(a, b, c) 
```

# ios - 如何在 iPad 上运行的 iPad 应用程序中访问 mac 文件（图像）

> ID：16056086
> 
> 赞同：0
> 
> 时间：2013-04-17T09:13:17.393
> 
> 标签：ios, xcode, ipad, xcode4, uiimageview

我对 Xcode 很陌生。我做了一个简单的应用程序，它在 UIImageView 中显示图像。我使用了以下代码：

```
- (IBAction)btnClicked:(id)sender {
[imgBox setImage:[UIImage imageNamed:@"DSC01522.jpg"]];
} 
```

通过创建一个新组“试用图像”并通过右键单击项目导航器将图像添加到其中，将图像复制到项目中。

我面临以下问题：当我在模拟器上运行应用程序时，我可以看到图像。但我在 iPad 上看不到它们。为什么会这样？任何人都可以向我解释或提供解释这些文件访问概念的链接。最后，我需要通过我的应用访问 iPad 图像。我是如何管理的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:25:51.703

1.  确保您的图像名称是准确的“DSC01522.jpg”。设备区分大小写。
2.  尝试[UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)来访问 iPad 的图像。

# python - 如何使用 django 为 ios 应用程序制作 API

> ID：16056096
> 
> 赞同：-3
> 
> 时间：2013-04-17T09:13:36.920
> 
> 标签：python, ios, django, web-services, web

我正在尝试制作与安装了 django 框架的服务器进行通信的 iOS 应用程序，所以我被问及如何使用 django 制作 API 来处理我的应用程序，例如使用 GET 或 POST 方法，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:19:45.097

django/python 有很多 REST 包检查[djangopackages.com](http://djangopackages.com)

我建议你看看[美味的派](http://django-tastypie.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:22:53.813

看这里：[http ://django-rest-framework.org/](http://django-rest-framework.org/)

该框架位于 django 之上，让您能够使用 RESTFULL 服务的强大功能。比你可以使用 GET/PUT 和 POST。

# sharepoint - 如何在 sharepoint 2010 中自动登录 owa Web 部件

> ID：16056099
> 
> 赞同：6
> 
> 时间：2013-04-17T09:13:41.630
> 
> 标签：sharepoint, sharepoint-2010, outlook, web-parts, outlook-web-app

我正在研究类似[同步电子邮件outlook2010和sharepoint2010的](https://stackoverflow.com/questions/11797453/how-to-sync-e-mail-outlook2010-and-sharepoint2010/11802597)东西和配置交换服务器我试过这个[Get Current User Inbox](https://stackoverflow.com/questions/2012539/how-to-show-current-users-inbox-in-sharepoint-2007)和其他类似的，但它没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T08:06:53.030

登录凭据是否与 Windows 相同？如果是这样，您是否正确配置了浏览器？请参阅[浏览器设置以进行自动登录](http://sharepointsolutions.blogspot.co.uk/2008/06/how-do-i-make-our-sharepoint-site-stop.html)

要登录，请尝试以下操作，从 OWAInboxPart 继承并在 OnInit 中使用当前用户创建邮箱名称，对于一些简单的问号似乎有效：

```
public class MyInbox : Microsoft.SharePoint.Portal.WebControls.OWAInboxPart
{
    protected override void OnInit(object sender, EventArgs e)
    {
        this.MailboxName = ?;
        base.OnInit (sender, e);
    }
} 
```

看看[这个关于如何获取当前用户邮箱的讨论](http://social.technet.microsoft.com/Forums/en-US/sharepointgeneralprevious/thread/cb9fee12-9d81-41e7-9665-420e1576ae38)。

# javascript - 使 Knockout applyBindings 将选择选项视为数字

> ID：16056103
> 
> 赞同：3
> 
> 时间：2013-04-17T09:13:47.710
> 
> 标签：javascript, html, knockout.js

我将 Knockout 与 html 选择/选项结合使用（请参阅[Fiddle](http://jsfiddle.net/hf5gb/)）：

```
<select data-bind="value: Width">
    <option>10</option>
    <option>100</option>
</select> 
```

调用`applyBindings`此选项时被视为字符串。这会导致不良影响。考虑以下示例：

```
function AreaViewModel() {
    var self = this;

    self.Width = ko.observable(10);
    self.Height = ko.observable(10);

    self.Area = ko.computed(function () {
        return self.Width() * self.Height();
    });
}

$(document).ready(function () {
    var viewModel = new AreaViewModel();

    ko.applyBindings(viewModel);
}); 
```

When`applyBindings`被调用，`self.Width`并`self.Height`从它们的初始值 10 类型转换为“10”，这导致计算函数的重新评估。

这在这里似乎没什么大不了的，但在一个更复杂的解决方案中，我有一个 PageSize 属性（每页 100 / 500 / 1000 行），当这个属性发生变化时会导致多个 AJAX 调用。

有哪些（花哨的）解决方案可以克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:32:32.433

你可以尝试类似的东西

```
self.Width = ko.observable(10);
self.Width.subscribe(function(newValue){
   if(typeof newValue === "string"){
       self.Width(parseInt(newValue));
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:08:30.870

您可以计算宽度并编写自己的“写入”和“读取”选项，如下所示：

```
var _width = ko.observable(10);
self.Width = ko.computed({
  read : function(){
     return _width;
  },
  write: function(value){
     if(typeof value === "string"){
        _width(parseInt(value));
     }
  } 
```

# python - Nonetype 对象没有属性 get_datos()

> ID：16056104
> 
> 赞同：0
> 
> 时间：2013-04-17T09:13:48.777
> 
> 标签：python, class, object, instance, nonetype

```
from node import *
from copy import deepcopy
import pygame
from PIL import Image

def buscar_solucion(inicio, solucion):

    visitados=[]
    nodo_i=Nodo(inicio)

    while nodo_i.get_datos() != solucion:

        nodo_i = deep_search(nodo_i,solucion,visitados)

    moves=[]
    moves.append(solucion)

    while nodo_i.get_padre() != None:
        pater=nodo_i.get_padre()
        moves.append(pater.get_datos())
        nodo_i=pater
    moves.reverse()
    print moves

 def operaciones_h(dades):
   r=[]
   i=0
   while dades[i] != dades[-1]:
      s=deepcopy(dades)
      s[i]=dades[i+1]
      s[i+1]=dades[i]
      r.append(Nodo(s))
      i+=1
   return r

def deep_search(ini,sol,visit):

    visit.append(ini.get_datos())

    if ini.get_datos() == sol:
        return ini

    else:
        hijos=operaciones_h(ini.get_datos())
        for hijo in hijos:
            if hijo.get_datos() not in visit:
                hijo.set_padre(ini)
                return deep_search(hijo,sol,visit) 
```

在创建 Class 的实例时，我遇到的问题在第 14 行`Nodo`。我得到的错误是：

```
AttributeError: 'NoneType' object has no attribute 'get_datos' 
```

该类在一个名为`node.py`. 问题可能出在导入中吗？或者在定义实例时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:19:42.677

问题出在你的`deep_search`函数中——它并不总是返回任何东西。例如，考虑如果`operaciones_h(ini.get_datos())`返回一个空列表会发生什么：`for hijo in hijos`永远不会进入循环。即便如此，如果所有 datos 都在 中`visit`，该`if`语句将永远不会是 True 并且您将永远不会点击 return 语句。在这两种情况下， 的值`deep_search`都是`None`。

您应该确保所有路径都`deep_search`以返回`Nodo`对象结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:20:19.173

在某些情况下`nodo_i = deep_search(nodo_i,solucion,visitados)`调用会返回`None`。里面`deep_search`有以下代码：

```
else:
    hijos=operaciones_h(ini.get_datos())
    for hijo in hijos:
        if hijo.get_datos() not in visit: 
```

如果`operaciones_h`返回一个空列表或者如果没有任何`hijo`值与您的`if`语句匹配，则该函数返回`None`并且您将看到您的异常。

# include - 这是什么增强功能（FORM USEREXIT_*），如何实现这样的增强功能

> ID：16056110
> 
> 赞同：1
> 
> 时间：2013-04-17T09:13:54.747
> 
> 标签：include, abap, subroutine, sap-erp

我有一个包含 RV60AFZZ 和一个表格 USEREXIT_NUMBER_RANGE。

在一个系统上，此表单包含一个附加项

```
*{   INSERT         ASDF555555                                      1
  "Custom code here...
  ....
*}   INSERT 
```

...在另一个系统中，表单仅包含 2 条注释行，没有 *{ INSERT 和 *} INSERT

我想知道如何在我的其他系统上实现这样的增强，或者更无聊：如何编写不在客户命名空间中的包含代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:36:50.860

如果您有机会在带有 Enhancement 包的 Netweaver 系统上工作，您可以通过使用隐式增强而不是请求对象键来修改此子例程来增强此用户出口表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:33:02.800

这不是增强，而是修改。不惜一切代价避免它，除非你真的别无选择。这是一条直通维修地狱的道路。

伪注释由[修改助手](http://help.sap.com/saphelp_nw04s/helpdata/en/60/d6ba5aceda11d1953a0000e82de14a/frameset.htm)生成。您可以将其关闭，但如果您这样做，有充分的理由准备被您的客户/同事开枪。:-)

# initialization - 在 C++ 中初始化 double 的最佳实践是什么？

> ID：16056111
> 
> 赞同：2
> 
> 时间：2013-04-17T09:13:56.317
> 
> 标签：initialization, double, nan

我在徘徊，这是初始化双精度的最佳做法。将其初始化为 0.0 还是 NaN 更好？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:20:10.693

我想说最好的做法就是初始化你的变量。你选择的值取决于你在做什么：如果你想检查你的变量的初始化，你选择一个在你的算法中不会发生（或唯一）的值（可以是 Nan, 0., -1., . ..)。

# objective-c - NSScrollView 重叠文本

> ID：16056114
> 
> 赞同：0
> 
> 时间：2013-04-17T09:14:03.553
> 
> 标签：objective-c, cocoa, nsscrollview

我有一个抽象的实现`NSView`来显示滚动文本视图。

我有一个长字符串显示在基于`NSView`. 一旦它开始滚动，线条就会相互重叠并变得不可读。在循环结束时，当它重新开始时，它将在屏幕上显示所有线条而没有重叠，并且一旦第一部分到达屏幕末尾，重叠就会在其余的绘图期间恢复。

关于我可以在这里解决的问题有什么想法吗？非常感谢。

最后

这是两个屏幕截图，一个是部分显示的文本没有重叠，这是在第一个循环的末尾，它代表文本的开头。

![在此处输入图像描述](https://i.stack.imgur.com/MvISA.jpg)

这是第二个屏幕截图，其中重叠很明显，并且与它显示大部分字符串的方式一致。

![在此处输入图像描述](https://i.stack.imgur.com/p9LOh.jpg)

这是滚动的代码，从 [iTunes Song Title Scrolling in Cocoa复制/粘贴](https://stackoverflow.com/questions/3232801/itunes-song-title-scrolling-in-cocoa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:16:16.167

由于 drawRect 被覆盖，它还必须清除背景，否则在它下面绘制的任何内容都会显示出来，并且（如您所见）以前的内容不会被删除。因此，在开始编写文本之前添加一个 [backgroundColor set] 调用和 NSRectFill。

# cassandra - Cassandra：获取列族的列名？

> ID：16056121
> 
> 赞同：5
> 
> 时间：2013-04-17T09:14:23.063
> 
> 标签：cassandra, cql, cql3

我想知道 CQL3 中是否有一个查询允许您获取具有静态模式的特定列族的列名？
提前致谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T11:44:58.773

**如果您想使用CQL3**获取特定表的列名，那么我想试试这个

`select * from system.schema_columns WHERE keyspace_name='#KS' AND columnfamily_name='#CF' allow filtering;`

注意： where 子句中的**keyspace_name**是可选的。它主要用于更好的过滤目的（例如，多个键空间中具有相同名称的表）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T09:41:35.280

您可以使用`system`键空间来执行此操作：

```
SELECT column_name FROM system.schema_columnfamilies 
  WHERE keyspace_name = 'testks' AND columnfamily_name = 'testcf'; 
```

cqlsh 中的输出（使用 cql3）：

```
 column_name
-------------
    password 
```

您可以使用以下方法计算列的键：

```
SELECT key_aliases FROM system.schema_columnfamilies WHERE keyspace_name='testks' 
AND columnfamily_name='testcf'; 
```

输出：

```
 key_aliases
--------------
 ["username"] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-02T22:15:59.587

根据我最近的测试，我们应该使用 schema_columns 而不是 schema_columnfamilies 来获取所有列名。**schema_columnfamilies**可用于获取表名。

1.  获取列名：

    ```
    SELECT column_name FROM system.schema_columns WHERE keyspace_name = 'KeySpaceName' AND columnfamily_name = 'TableName'; 
    ```

2.  获取列族名称，即表名：

    ```
    select columnfamily_name from system.schema_columnfamilies where keyspace_name='KeySpaceName'; 
    ```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-26T08:39:46.810

根据 Cassandra 3.x 的最新文档，以上所有答案都不起作用，现在显示列的查询将是这样的。

```
SELECT * FROM system_schema.columns WHERE keyspace_name = 'xxxx' AND table_name = 'xxx'; 
```

# ios - 从 dispatch_async 修改时 UIView 不变

> ID：16056124
> 
> 赞同：0
> 
> 时间：2013-04-17T09:14:36.780
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uiviewanimation

我有一个带有后置摄像头实时视图的子视图。将相机切换到前面时，我正在为其设置动画。因为我无法同步动画和切换，所以我用另一个纯黑色背景的视图覆盖了它。因为切换速度较慢，所以我想在执行切换后删除黑色子视图。但是当我这样做时，它不会消失。调试器显示我输入的所有 NSLog，当我在任何地方放置断点时，调试器甚至停止，因此代码是可以访问的。但是`UIView`根本没有修改，仍然保持黑色子视图。

**有趣的事实：**当我用顶部按钮关闭显示然后重新打开时，黑色视图消失了！

**代码：**

```
- (IBAction)cameraChanged:(id)sender {
NSLog(@"Camera changed");
UIView *animView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.videoPreviewView.frame.size.width, self.videoPreviewView.frame.size.height)];
animView.tag = 42;
[animView setBackgroundColor:[UIColor blackColor]];

[UIView transitionWithView:self.videoPreviewView duration:1.0
                    options:self.animate ? UIViewAnimationOptionTransitionFlipFromLeft:UIViewAnimationOptionTransitionFlipFromRight
                animations:^{
                    [self.videoPreviewView addSubview:animView];
                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul), ^{
                        [self.captureManager toggleCamera];
                        NSLog(@"Done toggling");
                        [self done];
                    });
                }
                completion:^(BOOL finished){
                    if (finished) {
                        //
                    }
                }];
self.animate = !self.animate;
}

- (void)done {
for (UIView *subview in [self.videoPreviewView subviews]) {
    NSLog(@"In for");
    if (subview.tag == 42) {
        NSLog(@"removing");
        [subview removeFromSuperview];
    }
}
} 
```

任何人都知道为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:25:36.163

UIView 更新应该在主线程上运行。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul), ^{
//BlahBlah
        dispatch_sync(dispatch_get_main_queue(), ^{
        //update your UIView
        });
    }); 
```

# http - DNS域重定向“堆叠”？

> ID：16056126
> 
> 赞同：0
> 
> 时间：2013-04-17T09:14:51.263
> 
> 标签：http, redirect, dns

我正在尝试管理我当前的域清单，我不希望它们只是根据请求生成连接错误或登陆注册商的默认页面。

是否可以将所有域重定向到某个域，然后将该域重定向到另一个域，并能够处理“堆栈”中的所有重定向请求？

```
Example:

Primary Domain (primary.com)

Landing Domain (landing.net) (redirected to primary.com)

Domain Inventory (all redirected to landing.net) 
```

我要问的是.. 随着我的整个库存进入该登陆域，我可以配置该登陆域的重定向以在请求中进行第二次重定向吗？

```
randominventorydomain.net => landing.net => whatever is specified for landing.net's redirection 
```

我想这将被称为双重重定向？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:39:24.387

如果两个重定向实际上都是 HTTP 3xx 重定向，那么landing.net HTTP 服务器可以读取“Referer”HTTP 标头，并将其值包含在 3xx 响应的“Location”标头中的 URL 参数中。

# mysql - MySQL Regexp，忽略括号内的字母

> ID：16056127
> 
> 赞同：1
> 
> 时间：2013-04-17T09:14:52.243
> 
> 标签：mysql, regex

我需要检查一个字符串是否包含所有大写字母。但是，它应该忽略括号内的任何内容。任何非字母也可以。

这些应该是真实的：

```
select binary  "ALL CAPS"         regexp "the expr"  from dual;
select binary  "CAPS (in paren)"  regexp "the expr"  from dual;
select binary  "ALL 1:,? CAPS "   regexp "the expr"  from dual; 
```

这应该是错误的：

```
select binary  "Not All CAps"     regexp "the expr"  from dual; 
```

我考虑过先进行替换以删除括号中的任何内容，但似乎没有办法用正则表达式进行替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:55:36.563

这允许括号对内的任何内容，仅在外部大写。

```
^[^a-z]*(\(.*\))?[^a-z]*$ 
```

编辑：缺少一些星号。

# d3.js - d3.js 条形图上的反转条

> ID：16056129
> 
> 赞同：0
> 
> 时间：2013-04-17T09:14:56.513
> 
> 标签：d3.js, bar-chart

我刚刚开始使用 D3.js，并且在将条形水平排列时遇到了问题。目前，它们指向下方。

```
var jsonRectangles = [
  { "x_axis": 10,  "y_axis": 0, "height": 65,  "width":20, "color": "green" },
  { "x_axis": 40,  "y_axis": 0, "height": 80,  "width":20, "color": "purple" },
  { "x_axis": 70,  "y_axis": 0, "height": 100, "width":20, "color": "orange" },
  { "x_axis": 100, "y_axis": 0, "height": 50,  "width":20, "color": "brown" },
  { "x_axis": 130, "y_axis": 0, "height": 66,  "width":20, "color": "black" },
  { "x_axis": 160, "y_axis": 0, "height": 68,  "width":20, "color": "red" }];

var svgContainer = d3.select("body")
        .append("svg")
        .attr("width", 500)
        .attr("height", 100);

var rectangles = svgContainer.selectAll("rect")
        .data(jsonRectangles)
       .enter()
        .append("rect");

var rectangleAttributes = rectangles
        .attr("x", function (d) { return d.x_axis; })
        .attr("y", function (d) { return d.y_axis; })
        .attr("height", function(d) { return height - y(d.weight); })
        .attr("width", function (d) { return d.width; })
        .style("fill", function(d) { return d.color; }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:29:13.487

SVG 中的 (0,0) 坐标位于左上角，因此您的 y 坐标在从顶部开始计数的意义上是“反转的”。这意味着您必须定位条形，以便它们从您要显示的 y 位置开始并延伸到轴。您的代码应该看起来像这样。

```
rectangles.attr("y", function (d) { return (heightOfGraph - y(d.height)); })
          .attr("height", function(d) { return y(d.height); }); 
```

一般来说，您不需要保存`rectangleAttributes`在变量中 - 它与`rectangles`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:30:18.320

在 D3 中，y 坐标上的 0 位于顶部而不是底部。您需要先将条形向下移动到您希望 y 轴原点所在的位置，然后将条形向上移动它们的高度以正确定位它们。

这是一个粗略的解决方案，但希望您能够使用（请参阅已更改的位的评论）：

```
var jsonRectangles = [
  { "x_axis": 10, "y_axis": 0, "height": 65, "width":20, "color" : "green" },
  { "x_axis": 40, "y_axis": 0, "height": 80, "width":20, "color" : "purple" },
  { "x_axis": 70, "y_axis": 0, "height": 100, "width":20, "color" : "orange" },
  { "x_axis": 100, "y_axis": 0, "height": 50, "width":20, "color" : "brown" },
  { "x_axis": 130, "y_axis": 0, "height": 66, "width":20, "color" : "black" },
  { "x_axis": 160, "y_axis": 0, "height": 68, "width":20, "color" : "red" }];

// height of the visualisation - used to translate the bars
var viz_height = 100;

var svgContainer = d3.select("body").append("svg")
                                    .attr("width", 500)
                                    // set using viz_height rather than a fixed number
                                    .attr("height", viz_height);

var rectangles = svgContainer.selectAll("rect")
                             .data(jsonRectangles)
                             .enter()
                             .append("rect");

var rectangleAttributes = rectangles
                          .attr("x", function (d) { return d.x_axis; })
                          // move the bars to the bottom of the chart (using
                          // viz_height), then move them back up by the height of
                          // the bar which moves them into palce
                          .attr("y", function (d) { return viz_height - y(d.height); })
                          .attr("height", function(d) { return y(d.height); })
                          .attr("width", function (d) { return d.width; })
                          .style("fill", function(d) { return d.color; }); 
```

![在此处输入图像描述](https://i.stack.imgur.com/2EUEP.png)

# encryption - 如何使用 OpenSSL 加密/解密文件？

> ID：16056135
> 
> 赞同：271
> 
> 时间：2013-04-17T09:15:05.503
> 
> 标签：encryption, openssl

我想使用一个密码加密和解密一个文件。

我如何使用 OpenSSL 来做到这一点？

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2013-04-17T09:24:06.173

> **安全警告**：AES-256-CBC 不提供经过[身份验证的加密](https://tonyarcieri.com/all-the-crypto-code-youve-ever-written-is-probably-broken)，并且容易受到[填充预言攻击](https://robertheaton.com/2013/07/29/padding-oracle-attack)。你应该使用类似[年龄](https://github.com/FiloSottile/age)的东西。

加密：

```
openssl aes-256-cbc -a -salt -pbkdf2 -in secrets.txt -out secrets.txt.enc 
```

解密：

```
openssl aes-256-cbc -d -a -pbkdf2 -in secrets.txt.enc -out secrets.txt.new 
```

[有关各种标志的更多详细信息](https://tombuntu.com/index.php/2007/12/12/simple-file-encryption-with-openssl/)

* * *

## 回答 #2

> 赞同：211
> 
> 时间：2015-07-22T02:24:17.470

## 简短的回答：

*您可能希望使用`gpg`而不是`openssl`因此请参阅此答案末尾的**“附加说明” 。**但是要使用以下方法回答问题`openssl`：*

**加密：**

```
openssl enc -aes-256-cbc -in un_encrypted.data -out encrypted.data 
```

**解密：**

```
openssl enc -d -aes-256-cbc -in encrypted.data -out un_encrypted.data 
```

*注意：加密或解密时会提示您输入密码。*

* * *

## 长答案：

您最好的信息来源`openssl enc`可能是：[https ://www.openssl.org/docs/man1.1.1/man1/enc.html](https://www.openssl.org/docs/man1.1.1/man1/enc.html)

**命令行：** `openssl enc`采用以下形式：

```
openssl enc -ciphername [-in filename] [-out filename] [-pass arg]
[-e] [-d] [-a/-base64] [-A] [-k password] [-kfile filename] 
[-K key] [-iv IV] [-S salt] [-salt] [-nosalt] [-z] [-md] [-p] [-P] 
[-bufsize number] [-nopad] [-debug] [-none] [-engine id] 
```

关于您的问题的最有用参数的解释：

```
-e
    Encrypt the input data: this is the default.

-d    
    Decrypt the input data.

-k <password>
    Only use this if you want to pass the password as an argument. 
    Usually you can leave this out and you will be prompted for a 
    password. The password is used to derive the actual key which 
    is used to encrypt your data. Using this parameter is typically
    not considered secure because your password appears in 
    plain-text on the command line and will likely be recorded in 
    bash history.

-kfile <filename>
    Read the password from the first line of <filename> instead of
    from the command line as above.

-a
    base64 process the data. This means that if encryption is taking 
    place the data is base64 encoded after encryption. If decryption 
    is set then the input data is base64 decoded before being 
    decrypted.
    You likely DON'T need to use this. This will likely increase the
    file size for non-text data. Only use this if you need to send 
    data in the form of text format via email etc.

-salt
    To use a salt (randomly generated) when encrypting. You always
    want to use a salt while encrypting. This parameter is actually
    redundant because a salt is used whether you use this or not 
    which is why it was not used in the "Short Answer" above!

-K key    
    The actual key to use: this must be represented as a string
    comprised only of hex digits. If only the key is specified, the
    IV must additionally be specified using the -iv option. When 
    both a key and a password are specified, the key given with the
    -K option will be used and the IV generated from the password 
    will be taken. It probably does not make much sense to specify 
    both key and password.

-iv IV
    The actual IV to use: this must be represented as a string 
    comprised only of hex digits. When only the key is specified 
    using the -K option, the IV must explicitly be defined. When a
    password is being specified using one of the other options, the 
    IV is generated from this password.

-md digest
    Use the specified digest to create the key from the passphrase.
    The default algorithm as of this writing is sha-256\. But this 
    has changed over time. It was md5 in the past. So you might want
    to specify this parameter every time to alleviate problems when
    moving your encrypted data from one system to another or when
    updating openssl to a newer version. 
```

* * *

## 补充说明：

尽管您已经特别询问了 OpenSSL，但您可能希望考虑使用 GPG 来代替基于本文[OpenSSL vs GPG 加密异地备份的加密目的？](https://stackoverflow.com/questions/28247821/openssl-vs-gpg-for-encrypting-off-site-backups)

要使用 GPG 执行相同操作，您可以使用以下命令：

**加密：**

```
gpg --output encrypted.data --symmetric --cipher-algo AES256 un_encrypted.data 
```

**解密：**

```
gpg --output un_encrypted.data --decrypt encrypted.data 
```

*注意：加密或解密时会提示您输入密码。*

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-04-17T09:29:42.823

**加密：**

```
openssl enc -in infile.txt -out encrypted.dat -e -aes256 -k symmetrickey 
```

**解密：**

```
openssl enc -in encrypted.dat -out outfile.txt -d -aes256 -k symmetrickey 
```

有关详细信息，请参阅[`openssl(1)`](https://www.openssl.org/docs/apps/openssl.html)文档。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2019-05-03T18:46:34.347

不要使用 OPENSSL 默认密钥派生。

目前接受的答案使用它，不再推荐和安全。

攻击者简单地暴力破解密钥是非常可行的。

[https://www.ietf.org/rfc/rfc2898.txt](https://www.ietf.org/rfc/rfc2898.txt)

> PBKDF1 应用一个散列函数，它应该是 MD2 [6]、MD5 [19] 或 SHA-1 [18]，以派生密钥。派生密钥的长度受哈希函数输出长度的限制，MD2 和 MD5 为 16 个八位字节，SHA-1 为 20 个八位字节。PBKDF1 与 PKCS #5 v1.5 中的密钥派生过程兼容。仅推荐 PBKDF1 与现有应用程序兼容，因为它生成的密钥对于某些应用程序可能不够大。
> 
> PBKDF2 应用伪随机函数（参见附录 B.1 中的示例）来派生密钥。派生密钥的长度基本上是无界的。（但是，派生密钥的最大有效搜索空间可能受到底层伪随机函数结构的限制。有关进一步讨论，请参见附录 B.1。）建议将 PBKDF2 用于新应用程序。

做这个：

`openssl enc -aes-256-cbc -pbkdf2 -iter 20000 -in hello -out hello.enc -k meow`

`openssl enc -d -aes-256-cbc -pbkdf2 -iter 20000 -in hello.enc -out hello.out`

**注意**：解密中的迭代必须与加密中的迭代相同。

迭代次数必须至少为 10000。这是关于迭代次数的一个很好的答案：[https ://security.stackexchange.com/a/3993](https://security.stackexchange.com/a/3993)

还有……我们这里有足够多的人推荐 GPG。阅读该死的问题。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-04-12T02:43:12.590

如其他答案中所述，以前版本的 openssl 使用弱密钥派生函数从密码中派生 AES 加密密钥。但是，openssl v1.1.1 支持更强大的密钥派生功能，其中密钥是使用`pbkdf2`随机生成的盐和多次迭代 sha256 散列（默认为 10,000）从密码中派生的。

要加密文件：

```
openssl aes-256-cbc -e -salt -pbkdf2 -iter 10000 -in plaintextfilename -out encryptedfilename 
```

要解密文件：

```
openssl aes-256-cbc -d -salt -pbkdf2 -iter 10000 -in encryptedfilename -out plaintextfilename 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-21T23:45:28.903

使用随机生成的公钥进行更新。

**加密：**

```
openssl enc -aes-256-cbc -a -salt -in {raw data} -out {encrypted data} -pass file:{random key} 
```

**解密：**

```
openssl enc -d -aes-256-cbc -in {ciphered data} -out {raw data} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-31T18:54:34.800

**加密：**

```
$ openssl bf < arquivo.txt > arquivo.txt.bf 
```

**解密：**

```
$ openssl bf -d < arquivo.txt.bf > arquivo.txt 
```

bf === CBC 模式下的河豚

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-08T02:22:10.243

请注意，OpenSSL CLI 使用弱非标准算法将密码转换为密钥，并且安装 GPG 会导致将各种文件添加到您的主目录并运行 gpg-agent 后台进程。如果您希望使用现有工具实现最大的可移植性和控制，您可以使用 PHP 或 Python 访问较低级别的 API，并直接传入完整的 AES 密钥和 IV。

通过 Bash 调用 PHP 示例：

```
IV='c2FtcGxlLWFlcy1pdjEyMw=='
KEY='Twsn8eh2w2HbVCF5zKArlY+Mv5ZwVyaGlk5QkeoSlmc='
INPUT=123456789023456

ENCRYPTED=$(php -r "print(openssl_encrypt('$INPUT','aes-256-ctr',base64_decode('$KEY'),OPENSSL_ZERO_PADDING,base64_decode('$IV')));")
echo '$ENCRYPTED='$ENCRYPTED
DECRYPTED=$(php -r "print(openssl_decrypt('$ENCRYPTED','aes-256-ctr',base64_decode('$KEY'),OPENSSL_ZERO_PADDING,base64_decode('$IV')));")
echo '$DECRYPTED='$DECRYPTED 
```

这输出：

```
$ENCRYPTED=nzRi252dayEsGXZOTPXW
$DECRYPTED=123456789023456 
```

您还可以使用 PHP 的`openssl_pbkdf2`函数将密码短语安全地转换为密钥。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-01T16:06:17.297

我在网上找到了一个开源程序，它使用 openssl 来加密和解密文件。它使用单个密码执行此操作。这个开源脚本的伟大之处在于它通过粉碎文件来删除原始的未加密文件。但危险的是，一旦原始未加密文件消失，您必须确保记住您的密码，否则他们将无法解密您的文件。

这是github上的链接

[https://github.com/EgbieAnderson1/linux_file_encryptor/blob/master/file_encrypt.py](https://github.com/EgbieAnderson1/linux_file_encryptor/blob/master/file_encrypt.py)

# java - DFT中的幅度谱

> ID：16056138
> 
> 赞同：1
> 
> 时间：2013-04-17T09:15:16.057
> 
> 标签：java, dft

我正在尝试用 Java 编写一个小的离散傅立叶变换，以在清晰的 400 Hz 正弦信号中找到幅度谱（1 秒为 pcm 有符号短）

所以首先我计算复数值的 DFT：

```
public void berechneDFT(int abtastwerte) {
        int i;

        int N = abtastwerte;
        ReX = new double[N/2+1];
        ImX = new double[N/2+1];

        TextFileOperator tfo = new TextFileOperator(file.substring(0, file.length()-4)+"_DFT.txt");

        try {
            tfo.openOutputStream();
            tfo.writeString("ReX      ImX\n");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        // real-Anteil berechnen
        for (i=0, ReX[i] = 0, ImX[i] = 0; i <= N/2; i++)
        {
            for(int n=0; n < N; n++)
            {
                ReX[i] += x[n] * Math.cos( (2.0 * Math.PI * n * i) / (double) N);
                ImX[i] += - (x[n] * Math.sin( (2.0 * Math.PI * n * i) / (double) N));
            }

            tfo.writeString(ReX[i] +" "+ImX[i]+"\n");
        }

        x = null;   
        tfo.closeOutputStream();    // flush

        System.out.println("Anteile berechnet.");
    } 
```

然后我尝试计算幅度谱：

```
public void berechneBetragsSpektrum() {

        int N = ReX.length;

        TextFileOperator tfo = new TextFileOperator("betragsspektrum_400hz.txt");
        try {
            tfo.openOutputStream();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        double powerAtFreq;
        int marker = 0;
        double maxPowerAtFreq = 0;

        for(int i=0; i < N; i++)
        {
            double A1 = ReX[i] * ReX[i];
            double A2 = ImX[i] * ImX[i];

            powerAtFreq = Math.sqrt(A1+A2);

            if(powerAtFreq > maxPowerAtFreq)
            {
                maxPowerAtFreq = powerAtFreq;
                marker = i;
            }

            tfo.writeString(powerAtFreq+"\n");
        }

        tfo.closeOutputStream();
        System.out.println("Stärkste Frequenz: "+(marker)+" Hz");
    } 
```

但由于某种原因，如果我选择检查所有 16000 个样本，我只能在“标记”中得到 400 Hz 的结果。但是如果我只选择 800 个样本，我是否也应该看到 400 Hz 的峰值，因为使用 800 我可以看到 800/2 = 400 Hz 作为最大频率？

我想代码一定有一些小问题，因为如果我选择 800 个样本，我会得到 20 Hz，对于 1600 个样本，我会得到 40 Hz，这始终是 1/40 * 采样率。

我到底错过了什么或做错了什么？结果很奇怪。。

请注意，如果我使用复数值进行逆 DFT，我可以再次重建音频信号！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T11:27:21.033

该问题的答案是，如果您计算傅立叶变换、幅度谱等，则索引显示需要计算为正确值的相对频率。

# java - 迭代结果集以根据需要创建对象

> ID：16056140
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:15:22.760
> 
> 标签：java, javabeans, resultset

![在此处输入图像描述](https://i.stack.imgur.com/r3Cfj.jpg)

大家好。我有以下结果集，现在我希望将其保存在 java bean 中。我有两个 java beans(pojo)。

```
public class Topic{
private int topic_id;
private String topic;
private List<SubTopic> subTopicList;

//getter setter
} 
```

和

```
public class SubTopic{
    private int sub_topic_id;
private String sub_topic;
//getter and setter
} 
```

现在我想设置我的`Topic`对象，使其包含一个主题和所有子主题的列表。但是我在迭代结果集时遇到问题。为了更清楚地说明一个包含心脏病学的主题对象应该有，

```
topic_id=73
topic=Cardiology
List<SubTopic> subTopic=//this includes id and name of SubTopic and SubTopic2 
```

同样的另一个对象应该是过敏、哮喘、免疫学。

```
ResultSet rs = pstmt.executeQuery();
//now how to iterate rs to create list of topic object in required way 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:20:19.460

使用地图存储您的主题：

```
Map<Long, Topic> topicsById = new HashMap<>();
while (rs.next()) {
    Long topicId = rs.getLong(1);
    String topicName = rs.getString(2);
    Long subTopicId = rs.getLong(3);
    String subTopicName = rs.getString(4);

    Topic topic = topicsById.get(topicId);
    if (topic == null) {
        topic = new Topic(topicId, topicName);
        topicsById.put(topicId, topic);
    }
    topic.addSubTopic(new SubTopic(subTopicId, subTopicName);
}
Collection<Topic> allTopics = topicsById.values(); 
```

# backbone.js - Backbone 1.0 版本中的 {silent:true}

> ID：16056145
> 
> 赞同：12
> 
> 时间：2013-04-17T09:15:40.260
> 
> 标签：backbone.js, backbone-events, backbone-model

我正在将我的主干版本从 0.9.2 更新到 1.0，但我遇到了一个问题。

模型未正确更新。它有延迟。以前我下面的代码完美地工作：

```
this.model({ attrib: true},{silent:true}); 
```

但更新后我删除了`{silent:true}`，一切正常。模型正确更新。

我在 Backbonejs.org 上读过类似的内容

*在更改上传递 {silent:true} 将不再延迟单个“change:attr”事件，而是完全静音。*

我不完全明白该声明的含义。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T09:25:51.903

关于您引用的文档的含义：

当您这样做时（我猜这`this.model`是一个错误）`this.set({attr: value}, {silent: true})`，所有更改事件都被**延迟**到下一个非静默更改。也就是说，如果你正在做`this.trigger('change')`（从 jQuery/Backbone 的最新版本开始，`this.change()`不再工作）或者`this.set('anotherAttr', anotherValue)`，一个`change:attr`事件就会被触发。

从 Backbone 1.0 开始，这种行为已经改变。当您使用静默标志时，您**不会再延迟**`change:attr`事件，而是将其完全**关闭**。

所以基本上，用一段代码来说明：

```
myModel.listenTo(myModel, 'change:attr', function() {alert();});
myModel.set('attr', true, {silent: true});
myModel.trigger('change');
// or myModel.set('anotherAttr', true); 
```

将在 Backbone 1.0 之前的版本中发出警报，但在 Backbone 1.0 中不会。

# java - 从 tomcat 服务运行 Windows 应用程序不显示窗口

> ID：16056150
> 
> 赞同：0
> 
> 时间：2013-04-17T09:15:45.570
> 
> 标签：java, windows, tomcat

我正在尝试运行 Windows 应用程序（带有 UI 和声音的窗口）。我已将 Tomcat 服务更改为使用与登录机器相同的 Windows 用户打开。当我运行它时，应用程序启动，我什至可以听到它的声音，但没有可见的窗口。我怎样才能解决这个问题？

# javascript - 将动态创建的内容保存到服务器并从那里加载

> ID：16056153
> 
> 赞同：0
> 
> 时间：2013-04-17T09:16:00.200
> 
> 标签：javascript, jquery, html, ajax, json

所以我有我正在制作的这个网页，它允许人们在页面上动态创建元素。而且我希望能够将这些元素保存到我的服务器，并且每当其他人重新加载该页面时，网页都会包含这些保存的元素。

我无论如何都不是一个好的网络程序员，所以用网络术语放轻松xD

用户创建的元素是嵌套的或列表。这些元素也可以随时删除。

因此，我正在阅读有关将它们保存为 JSON 的内容，但是我将如何将其作为我的 's 来做，大多数顶级的将具有相同的类。以前从未使用过 JSON，所以我是个真正的菜鸟。

每次添加/删除时，服务器文件是否会不断用全新的副本替换自己？

我想在不更新的情况下显示新元素方面获得一些帮助。在其他用户页面上。我读过 AJAX 实时更新，比如 APE，但不知道如何去做。（这并不是真正需要的，但会是一个不错的选择）

如果有人至少可以指导我一点，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:32:50.720

完成此操作的最佳方法是将对象属性保存到数据库中，但其他选项包括 XML 文件等。

通过数据库实现的过程是：

*   如果要将数据保存到数据库，则必须使用像 Php 或 Asp.net 这样的服务器端语言，因此第一步是要有一个数据库，然后在中间文件上建立与数据库的活动连接（可以说“数据.php'）

*   然后您需要对 data.php 文件进行编码，以便它可以接受输入（通常通过 GET 或 POST 方法）并将其保存到您的数据库中

*   然后你需要通过 AJAX 将你的数据（对象属性）传递给 data.php 并将它们保存到你的数据库中

*   在主文件上，您必须检查用户是否已经存在一些数据，如果是，则从数据库中获取它并相应地显示对象，否则将对象首选项设置为默认值

# android - 使用 android Google Maps API v2 作为离线图块的查看器：可能吗？

> ID：16056156
> 
> 赞同：11
> 
> 时间：2013-04-17T09:16:19.750
> 
> 标签：android, maps, offline, google-maps-android-api-2

Google 地图组件 (com.google.android.gms.maps.GoogleMap) 允许渲染自定义图块（OpenStreetMap 或其他）。这些图块可以在设备上并且可以离线使用，这就是我通过扩展 TileProvider 所做的。与以下内容一起执行此操作：

```
mMap.setMapType(GoogleMap.MAP_TYPE_NONE); 
```

我没有从谷歌地图服务器中提取任何数据，并且可以合理地预期该组件在没有互联网连接的情况下也能正常工作。（我在此强调，**我并不是要缓存 Google 的数据**；我正在使用独立于 Google 地图服务器的离线图块。）

我以为一切都很好，直到我意识到如果地图组件**在第一次执行时**设备处于脱机状态，它将无法工作。在这种情况下，我会收到一条消息：

> 加载地图失败。无法联系谷歌服务器

我想这背后的原因是谷歌的 API 密钥需要我的应用程序进行身份验证才能允许组件执行。

谁能确认这是正确的？我真正想确定的是，只要该组件在线执行一次，之后它就可以正常运行。我必须确保不存在需要组件稍后重新进行身份验证的超时问题，这基本上会使我的应用程序无用。这将需要我转向其他一些组件（例如 OS Android）。

对此的任何说明将不胜感激。即使被指向我希望从谷歌开发人员那里得到回复的渠道也会很有用。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T16:51:15.070

从 Google Play Services APK 的 3.0.27 开始，该问题已修复，只需联系服务器一次。您每次都会在 logcat 中看到错误，但它会起作用。

更多信息在这里： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4817](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4817)

在这里： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5017](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5017)

# c# - 我们如何为一个窗口创建一个单例实例？

> ID：16056161
> 
> 赞同：4
> 
> 时间：2013-04-17T09:16:22.843
> 
> 标签：c#, wpf, c#-4.0, singleton

我已经搜索了为 WPF 中的窗口创建单例对象。

```
public static Test DefInstance
{
    get
    {
        if (formDefInstance == null)  // formDefInstance.IsDisposed
        {
            initializingDefInstance = true;
            formDefInstance = new cas18();
            initializingDefInstance = false;
        }
        return formDefInstance;
    }
    set { formDefInstance = value; }
} 
```

但是`forDefInstance.IsDisposed`它不起作用并引发错误。

关于这个有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:18:03.463

我不知道这是否是您想要做的，但它对我有用：

```
private static MyWindow _defInstance;
public static MyWindow DefInstance
{
    get
    {
        if (null == _defInstance)
        {
            _defInstance = new MyWindow();
        }
        return _defInstance;
    }
 } 
```

在 MyWindow 代码中：

```
protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
{
    this.Visibility = Visibility.Hidden;
    e.Cancel = true;
} 
```

要使用它：

```
DefInstance.Show(); 
```

然后，只显示一个窗口，您使用窗口的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:34:04.903

我认为每个人都应该看看 Jon Skeet 的 C# In Depth 站点。如果只是为了阅读并永久地在他们的大脑中燃烧单例模式 a-la C#。

[http://cshapindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

在您的场景中，尝试实现这个（线程安全，非懒惰）：

```
public sealed class DefInstance
{
  private static readonly DefInstance instance = new DefInstance();
  static DefInstance()
  {
  }

  private DefInstance()
  {
  }

  public static DefInstance Instance
  {
    get
    {
      return instance;
    }
   }
} 
```

该站点中还有`Lazy<T>`该模式的实现和各种其他实现。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-18T14:28:28.387

您可以通过实现以下方法来实现这一点

```
private static volatile DefInstance instance;
private static object syncRoot = new Object();

private DefInstance() {}

public static DefInstance Instance
{
   get 
   {
      if (instance == null) 
      {
         lock (syncRoot) 
         {
            if (instance == null) 
               instance = new DefInstance();
         }
      }

      return instance;
   }
} 
```

# java - jsp:forward 标签转发到 Struts 2 动作

> ID：16056166
> 
> 赞同：6
> 
> 时间：2013-04-17T09:16:49.690
> 
> 标签：java, jsp, redirect, struts2, forward

我正在将一个 Struts 应用程序迁移到 Struts 2。它是四年前由 Struts 1.2 开发的。

**我的问题是：**

在我的JSP中，有这样一个语句：

```
<jsp:forward page="/a.do" /> 
```

它在 Struts 1 中运行良好，但在 Struts 2 中不起作用，当我访问这个 JSP 文件时它告诉我 HTTP 404 错误。

但是，如果我访问`http://localhost:8080/shell/a.do`，它运行良好。

我想知道原因，是不是因为向前动作不能被 Struts 2 过滤器捕获？( `org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter`)

那么前锋不能分派到 Struts 2 动作？

我的应用程序中有很多转发，如果转发不能在 Struts 2 中工作，它是使用重定向而不是转发的唯一解决方案吗？

其实这个问题是基于我的分析，原来的工作是显示网站的欢迎页面。如果我使用`jsp:forward`forwards to `a.do`，它不起作用。

我听从了 Roman 的建议，使用`result`而不是 forward。那么现在的问题是如何配置整个应用的默认动作呢？

我试过`<default-action-ref name="a"/>`了，但它只适用于未映射的操作，例如`http://localhost:8080/shell2/(some-unmapped-action).do`，它转到默认操作。但如果我不指定`".do"`.

当然这可以通过 url-rewrite 来完成，但我不想使用这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T07:35:42.923

包含struts标签库

```
<%@ taglib prefix="s" uri="/struts-tags" %> 
```

你可以简单地在你的jsp页面中写下一些动作

```
<s:action name="YourAction" namespace="/PackageNamespace" executeResult="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:26:07.683

从 Struts 1的概念`forward`转移到[调度程序结果](https://struts.apache.org/core-developers/dispatcher-result.html)的概念。您必须`forward`从应用程序中删除所有 s 并`result`改为创建 s。

# c# - 无法从传输连接读取数据：流读取器错误

> ID：16056167
> 
> 赞同：0
> 
> 时间：2013-04-17T09:16:59.803
> 
> 标签：c#, asp.net

以下代码引发错误：
*“无法从传输连接读取数据：连接已关闭。”-System.IO.IOException。*
该方法接收一个 URL 作为参数，执行它并从网络服务器获取响应。

在使用 Stream 读取响应时，`liBytesRead = lStream.Read(lBytes, 0, 128);`while 循环内的行会抛出引用的错误。

```
public bool GetFromUrl(ref string psUrl, ref string rsResult, ref int piTimeoutSeconds)
{
  System.Text.StringBuilder lStringB = new System.Text.StringBuilder();

try {
    WebRequest lWebRequest = WebRequest.Create(psUrl);
    int liTimeout = piTimeoutSeconds * 1000;

    lWebRequest.Timeout = liTimeout;

    WebResponse lWebResponse = lWebRequest.GetResponse;
    Stream lStream = default(Stream);
    lStream = lWebResponse.GetResponseStream;

    byte[] lBytes = new byte[129];
    int liBytesRead = lStream.Read(lBytes, 0, 128);
    System.Text.Encoding lEncode = System.Text.Encoding.GetEncoding("utf-8");

    while (liBytesRead > 0) {
        lStringB.Append(lEncode.GetString(lBytes, 0, liBytesRead));
        liBytesRead = lStream.Read(lBytes, 0, 128);
    }
    lStream.Close();

    rsResult = lStringB.ToString();
    return true;
} catch (System.IO.IOException e) {
    rsResult = e.ToString();
    return false;
}
} 
```

知道为什么会这样......
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:22:35.757

看起来网络服务器在连接完成之前关闭了连接。
尝试

```
HttpRequest.KeepAlive = false; 
HttpRequest.ProtocolVersion = HttpVersion.Version10; 
```

更多详情请参考：[http ://sysrc.code4beer.org/2009/06/30/webrequest-unable-to-read-from-transport/](http://sysrc.code4beer.org/2009/06/30/webrequest-unable-to-read-from-transport/)

# excel - Excel 2010 保护工作表不锁定复选框

> ID：16056172
> 
> 赞同：0
> 
> 时间：2013-04-17T09:17:23.890
> 
> 标签：excel, ms-office, excel-2010

我有一个带有包（列）/特征（行）选择矩阵的 excel 表。我在单个单元格中使用了复选框表单控件（开发人员选项卡），让客户选择什么产品中的功能。一切正常。

现在我想锁定这张表以防意外修改。

我尝试保护工作表，但复选框仍然打开以供选择或取消选择。

如何保护复选框以防止意外选中或取消选中（修改需要密码）？

抱歉，这里不允许附图片...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:28:44.130

确保复选框链接到一个单元格：

右键单击复选框 > 格式控制 > 控制 > 单元格链接

将复选框所指的单元格锁定，更改单元格本身的保护属性：

右键单击单元格>保护>取消选中锁定>按确定

现在保护工作表。

这应该停止对复选框控件的任何编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T21:25:26.387

将单元格中的文本格式化为与背景颜色相同的文本颜色，并且您看不到真假，但它仍然可以用于查找等。

# python - 使用 Python / Win32 选择和删除 Word 文档中存在的行

> ID：16056175
> 
> 赞同：2
> 
> 时间：2013-04-17T09:17:28.427
> 
> 标签：python, ms-word, pywin32, win32com

我正在尝试使用 python 和 win32 组件自动化 Word(2010) 文档（所有大多数 40-50 文档）。具体而言，需要选择行的一部分并将其全部替换为一些内容。例如，如果在原始文件中有“**标签：096-4296-05A** ”，我希望将其替换为“**标签：*_* __ *_* __ *_* ____** ”。仅当所有文件中存在的数字相同时，使用搜索和替换才有效，但实际上并非如此。所以在那种情况下，我想要一个通用的方法来执行这个任务。

所以我在想的是，如果我能以某种方式选择包含“ **Label 096-4296-05A** ”的行并将其删除，然后再次写一个新行，如“ **Label *_* __ *_* __ *_*** ”。

为此，我确实查看了@选择对象[http://msdn.microsoft.com/en-us/library/bb221235%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb221235%28v=office.12%29.aspx)和[http://msdn.microsoft.com/en- us/library/bb208865%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb208865%28v=office.12%29.aspx)甚至尝试为VB编写一些等效的python代码。

这是我到目前为止所写的：

...///

```
########################
#
#   Purpose : Replace all occurrences of `find_str` with `replace_str`
#             in `word_file
#
#######################

def delete_and_add_line(word_file, find_str, replace_str):
    wdFindContinue = 1
    wdReplaceAll = 2

    # Dispatch() attempts to do a GetObject() before creating a new one.
    # DispatchEx() just creates a new one.
    app = win32com.client.DispatchEx("Word.Application")

    app.Visible = 0
    app.DisplayAlerts = 0
    app.Documents.Open(IP_Directory_Dest + "\\" + word_file) ## (word_file)

    # expression.Execute(FindText, MatchCase, MatchWholeWord,
    #   MatchWildcards, MatchSoundsLike, MatchAllWordForms, Forward,
    #   Wrap, Format, ReplaceWith, Replace)
    app.Selection.Find.Execute(find_str, True, True, \
        False, False, False, True, \
        wdFindContinue, False, replace_str, wdReplaceAll)

    app.Selection.EndKey(Extend=win32com.client.constants.wdExtend)##.Select()

    # determine if the text is selected or not
    if (app.Selection.Type == win32com.client.constants.wdSelectionIP ):
        print 'Nothing is selected'
    else:
        print 'Text Selected '

    # to delete the selected line
    app.Selection.Delete()

    app.ActiveDocument.Close(SaveChanges=True)
    app.Quit() 
```

...///

当我执行此代码时，我发现 app.Selection.Find.Execute 能够成功找到并替换提供给它的文本。即使它打印“Text Selected”，这意味着选择了行尾的文本，但它永远不会删除选定的行。

另外，我不确定这是否是完全选择一行直到其结束的正确方法（使用 Select 与此会给我属性错误“AttributeError：'int' object has no attribute 'Select'”）

```
 **### **IS THIS THE CORRECT WAY TO SELECT A LINE TILL ITS END** ???**
   app.Selection.EndKey(Extend=win32com.client.constants.wdExtend)##.Select() 
```

如果我在这里遗漏了什么，请告诉我。欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:53:09.077

请注意，您正在执行函数“Selection.Find”获取的**所有**匹配项的替换，然后尝试**在最后一个匹配项之后**扩展选择，我认为这不是您想要的。由于 Word 不接受此常量 (wdExtend)，因此您扩展选择的方式也出现错误。

此外，最好将文档作为 finally 子句的一部分关闭，以避免将 Word 留在内存中处于未知状态。

我认为正确的解决方案是遍历文档中的所有段落，然后使用正则表达式来匹配和替换要替换的文本。正则表达式比单词 find 功能强大得多。您可以使用 Range 属性的 Text 属性访问段落的文本。就像是：

```
import win32com.client
import re

# This is the regular expression to match the text you are after
regexp = "Label: [0-9A-Z-]+"

def replace_label(word_file):
    app = win32com.client.DispatchEx("Word.Application")
    app.Visible = 0
    app.DisplayAlerts = 0
    app.Documents.Open("C:\\" + word_file)
    try:
        doc = app.ActiveDocument
        # Iterate over all the paragraphs
        for parNo in range(1,doc.Paragraphs.Count):
            paragraph = doc.Paragraphs(parNo)
            # Get the text of the paragraph.
            current_text = paragraph.Range.Text
            # Check if there is a match in the paragraph
            if re.search(regexp,current_text):
                # We found a match... do the replace
                paragraph.Range.Text = re.sub(regexp,"Label _______",current_text)
    finally:
        app.ActiveDocument.Close(SaveChanges=True)
        app.Quit() 
```

我不确定我建议的正则表达式，因此您可能需要对其进行调整。我所知道的正则表达式的最佳指南是：

[http://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm) 和 [http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

# node.js - node.js 将 socket.io 套接字传递给分叉进程

> ID：16056177
> 
> 赞同：6
> 
> 时间：2013-04-17T09:17:29.103
> 
> 标签：node.js, socket.io

我想知道是否有任何方法可以将 socket.io 套接字传递给 node.js 中的分叉进程，或者在分叉进程中重建 socket.io 套接字？

```
child = require("child_process").fork("worker.js")
io.sockets.on("connection", function(socket){
    child.send("socket", socket); //this definitely fails now
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-03T19:18:03.437

# 解决方案：使用 Redis

我相信你会很高兴知道**socket.io-redis的存在**

有了它，您将能够在代码的多个实例（进程或服务器）之间发送/接收事件（共享客户端）。[阅读更多：socket.io-redis (Github Repo.)](https://github.com/socketio/socket.io-redis)

有了这个，你可以扩展：

1.  **垂直**（增加每台机器的线程数）
2.  **水平** （在更多机器上部署更多“主人”）

[github上有一个示例应用程序](https://github.com/h4t0n/socket.io-redis-appsample)

> 这是一个非常简单的 Node.JS 客户端/服务器应用程序，展示了如何一起设置 Express.js、Socket.IO 1.x 和 socket.io-redis。
> 
> 这对于了解如何扩展需要多个服务器进程的 Socket.IO 实时应用程序非常有用。Redis 用作存储点（适配器），以便在不同的进程或服务器中运行多个 socket.io 实例，这些实例都可以相互广播和发送事件。

# c# - 不同数据库的可配置数据访问层

> ID：16056178
> 
> 赞同：1
> 
> 时间：2013-04-17T09:17:31.053
> 
> 标签：c#, asp.net, database, data-access-layer

我想为不同的数据库构建一个可配置的数据访问层。

我们正在开发一个产品（基于 Web 的应用程序），客户端可以选择 MS Access 或 Sql 作为后端数据库。

所以，我想开发一个数据访问层，这样如果一个客户端想要使用 MS Access 作为后端，那么我将使用内联查询（动态查询）进行数据访问，如果另一个客户端想要使用 Sql 作为后端，那么我将使用存储数据访问程序。

请帮我设计这种架构，它应该是可配置的。

在这里，我想要实现的是为模型和 DAL 设置单独的层；当我从 Page 调用 DAL 方法时，它应该根据数据库类型调用。

模型

*   员工
    *   ID
    *   姓名

达尔

*   EmployeeAccessDb（使用内联查询）

    *   得到所有
    *   获取ID
    *   插入
    *   更新
    *   删除
*   EmployeeSqlDb（使用存储过程）

    *   得到所有
    *   获取ID
    *   插入
    *   更新
    *   删除

页

*   ObjectDataSource SelectMethod="GetAll" TypeName=" < EmployeeAccessDb / EmployeeSqlDb >"
*   插入
*   更新
*   删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:44:18.207

我认为这不会涉及大量工作，但让您从这里开始是一种快速的方法，您可以扩展它：

1.  将需要一个代表您的不同提供者的枚举，即 SQL、Access 等
2.  可能称为 DataAccess 的类在构造函数中接受您的提供程序类型：

`public class DataAccess { private DbProviderFactory factory; private DbConnection connection;`

 ````
 public enum Provider
   { SQL, Access } 

   public DataAccess(Provider provider)
   {
        switch (provider)
        {
            case Provider.Ole:
                factory = DbProviderFactories.GetFactory("System.Data.OleDb");
                break;
            case Provider.Sql:
                factory = DbProviderFactories.GetFactory("System.Data.SqlClient");
                break;
        }
        this.connection = factory.CreateConnection();
   }

    public DbDataReader GetDataReader(string statement, params DbParameter[] parameters)
    {
        using (DbCommand command = factory.CreateCommand())
        {
            if (connection.State == ConnectionState.Closed)
            {
                connection.Open();
            }
            command.CommandText = statement;
            command.Connection = connection;
            parameters.ToList().ForEach(x => command.Parameters.Add(x));

            return command.ExecuteReader(CommandBehavior.CloseConnection);
        }
    }
} 
````  `每当您想创建命令或参数等时，您都可以使用工厂变量。

```
 DbCommand command = Factory.CreateCommand();
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = procedureName;
        command.Connection = connection; 
```

如果您想要更具体的 Access 自定义代码，那么您需要使用继承模型，但我想 SQL 和 Access 有共同的语法，即相同的 SELECT、INSERT 命令等？`

# redirect - playframework2 重定向仅在路由文件中定义

> ID：16056181
> 
> 赞同：1
> 
> 时间：2013-04-17T09:17:43.673
> 
> 标签：redirect, routes, playframework-2.0, playframework-2.1

如何通过仅更改 conf/routes 文件来定义重定向？

我有以下路线

```
GET     /a     controllers.Application.a(countryCode,nodeName) 
```

我只想将其更改为类似

```
GET     /a     controllers.Application.a(countryCode,nodeName)
GET     /b     /a
GET     /a/    /a 
```

这意味着每当我收到带有某些参数的 /b 或 /a/ 时，我只会重定向到 /a，它会在更改客户端浏览器中的 url 的同时处理它。

第二个更复杂的路由将用于

```
GET     /a/:countryCode/node/:nodeName     controllers.Application.a(countryCode,nodeName) 
```

我只想将其更改为类似

```
GET     /a/:countryCode/node/:nodeName     controllers.Application.a(countryCode,nodeName)
GET     /b     /a
GET     /a/    /a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:32:01.287

`GET /b controllers.Default.redirect(to = "/a")`

无耻插件：如果您想将所有路由从 重定向`/a/`到`/a`而不发疯，请查看我的项目[play-trailing-slash](https://github.com/mariussoutier/play-trailing-slash)。

# ruby-on-rails - 可变数据类型及其更改

> ID：16056186
> 
> 赞同：1
> 
> 时间：2013-04-17T09:18:06.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, types, numbers, type-conversion

我正在尝试找出某个变量的数据类型（它是 RoR 应用程序中数据库中的一列）。我想将其格式化为带有 2 位小数的数字，但我想先确定它是字符串还是整数。

*   我怎样才能知道？
*   我怎样才能改变它？（我需要吗）
*   无论原始文件是什么，如何将其格式化为两位小数？
*   解决这个问题的最佳方法是什么 - 在 css 中更改它？在js中？在变量类型中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:21:22.207

有关您的 2 位小数数字的格式，请参阅这篇文章[What is the best method of handling currency/money？](https://stackoverflow.com/questions/1019939/ruby-on-rails-best-method-of-handling-currency-money)

最好的办法是不改，直接用rails注册。

如果您必须将字符串更改为 2 位十进制数字，请使用以下命令创建迁移

*   添加列`my_decimal_number`
*   执行数据库查询以更新您的`my_string_number`表`my_decimal_number`
*   删除`my_string_number`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:20:58.223

*   数据类型在数据库模式 (schema.rb) 中指定
*   如果你想从 string -> integer 改变它，你必须写一个数据库迁移。
*   实现它的最佳方法可能是在视图助手中。（见[http://guides.rubyonrails.org/getting_started.html#view-helpers](http://guides.rubyonrails.org/getting_started.html#view-helpers)）

# php - Javascript 函数仅适用于其中的一些“alert()”

> ID：16056189
> 
> 赞同：0
> 
> 时间：2013-04-17T09:18:12.587
> 
> 标签：php, javascript, ajax

我正在尝试使用 Ajax (Javascript + php) 检查当用户将焦点更改为表单的另一个字段时用户名是否可用。我的函数只有在我有一些 alert() 时才起作用，如果我删除它们，这些函数就会停止工作。

另一个奇怪的是，`alert(requestObject.readyState);`它只显示状态 1。据我了解，它应该显示所有状态，或者至少也显示状态 4。

这是我的 javascript 代码，它位于 HTML 页面的标题中。

```
 var requestObject = false;
    function funcReceiveData()
    {
        alert(requestObject.readyState);
        if(requestObject.readyState == 4)
        {
            if(requestObject.status == 200)
            {
                var status = requestObject.responseText;
                if(status == "ok")
                {
                    document.getElementById('userValid').innerHTML = 'Valid user';
                }
                else
                {
                    document.getElementById('userValid').innerHTML = 'Choose another username';
                }
            }
        }
    }

if (window.XMLHttpRequest)
{
    requestObject = new XMLHttpRequest();
}
else if(window.ActiveXObject)
{
    requestObject = new ActiveXObject("Microsoft.XMLHTTP");
}

function checkUser()
{
    if(requestObject){
        requestObject.open("POST", "addUser.php", true);
        requestObject.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        var user = document.getElementById('username').value;
        var tobesent = "username=" + user;
        requestObject.send(tobesent);
        requestObject.onreadystatechange = funcReceiveData();
        alert(tobesent);
    }
} 
```

这是我的 HTML 代码的正文部分：

```
<BODY>
<form method="POST" action="addUser.php">
    <table>

        <tr>
            <td><strong>Username:</strong></td>
            <td><input type="text" name="username" size="25" onblur="checkUser();" id="username"></td>
            <td><i id='userValid'>bla</i>
        </tr>

        <tr valign="top">
            <td><strong>Password:</strong></td>
            <td><input type="password" name="password" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Frist name:</strong></td>
            <td><input type="text" name="Fname" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Last name:</strong></td>
            <td><input type="text" name="Lname" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Address line 1:</strong></td>
            <td><input type="text" name="address1" size="50"></td>
        </tr>

        <tr valign="top">
            <td><strong>Address line 2:</strong></td>
            <td><input type="text" name="address2" size="50"></td>
        </tr>

        <tr valign="top">
            <td><strong>City:</strong></td>
            <td><input type="text" name="city" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Postcode:</strong></td>
            <td><input type="text" name="postcode" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Phone:</strong></td>
            <td><input type="text" name="phone" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Mobile:</strong></td>
            <td><input type="text" name="mobile" size="25"></td>
        </tr>

        <tr valign="top">
            <td><strong>Email:</strong></td>
            <td><input type="text" name="email" size="25"></td>
        </tr>
        <tr>
            <td><input type="submit" value="Submit" /></td>
            <td><input type="reset" value="Clear" /></td>
        </tr>
    </table>
</form> 
```

我的 PHP 代码如下，这是一个非常愚蠢的代码，只是为了测试。之后我将检查数据库中的用户名。

```
<?php 
$user = $_POST['username'];
if($user == "Tiago")
    echo("ok");
else
    echo("Error");
?> 
```

我的页面托管在这个地址：[https ://devweb2012.cis.strath.ac.uk/~ntb13105/WAD/tests/Twig/FINAL/addUser.html](https://devweb2012.cis.strath.ac.uk/~ntb13105/WAD/tests/Twig/FINAL/addUser.html)

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:19:49.043

您正在*调用* `funcReceiveData`而不是将其用作`readyStateChange`事件处理程序。

它不起作用，因为此时 HTTP 请求还没有响应。在其中粘贴警报会延迟读取值的尝试，`requestObject.readyState`直到您单击“确定”，这对于响应到达而言足够长。

在发送请求之前删除`()`并分配事件处理程序。

```
requestObject.onreadystatechange = funcReceiveData;
requestObject.send(tobesent); 
```

# arrays - 从数据包中排列字节

> ID：16056190
> 
> 赞同：0
> 
> 时间：2013-04-17T09:18:12.997
> 
> 标签：arrays, byte

我做了一个小程序来读取我的mac地址，但我无法让读取看起来正确。现在我的输出看起来像 302545261200 但我希望它看起来像 00:12:26:45:25:30

这是我使用的代码片段

案例“MAC”：

```
 cmd = HexToByte(StrObytes);
                ser.Write(cmd, 0, cmd.Length);
                read_MAC = new byte[500];
                Thread.Sleep(500);
                ser.Read(read_MAC, 0, ser.BytesToRead);
                mac_bytes = new byte[6];
                int u = 0;
                for (int i = 8; i >= 3; i--)
                {
                    mac_bytes[u] = read_MAC[i];
                    u++;
                }

                textBox1.Text = ByteArrayToString(mac_bytes);
                break; 
```

# maven - 在多模块 Maven 构建中重用 ant-snippets

> ID：16056194
> 
> 赞同：3
> 
> 时间：2013-04-17T09:18:26.373
> 
> 标签：maven, ant

如何在多个项目中重用一个 ant 片段？可以说我的根目录中有以下内容`pom.xml`：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>gen-index</id>
            <phase>package</phase>
            <configuration>
                <target>
                    ... some non-trivial ant stuff here ...
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        <execution>
    </executions>
</plugin> 
```

如何为选定的子项目执行此 ant 代码段？我已经尝试将`<plugin>...</plugin>`上面的部分添加到`<pluginManagement>...`，但我不知道如何指定应该为哪些子项目运行 ant 片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T21:22:29.613

我假设您的目标实现的插件定义在父 pom.xml 的 pluginManagement 部分内

您的 ant 目标位于由“gen-index”标识的执行中。如果你在你的子项目中声明这样的东西应该可以工作（但这次不是在 pluginManagement 部分......！！！）：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>gen-index</id>
                <execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这将执行由具有相同标识符的父 pom 继承的目标。

我希望这对你有四个作用。我这样用过几次。。

有了这个星座，你可以在你的父 pom.xml 中的同一个插件中拥有多个。

我创建了一个带有工作示例的 GitHub 存储库：[https ://github.com/StefanHeimberg/stackoverflow-16056194](https://github.com/StefanHeimberg/stackoverflow-16056194)

# c++ - C++ 无法弄清楚如何从用户输入跳转到开关

> ID：16056195
> 
> 赞同：0
> 
> 时间：2013-04-17T09:18:28.753
> 
> 标签：c++, loops, switch-statement, do-while

好的，所以我正在编写一个控制台应用程序，它使用开关来显示产品和价格。但是，当用户输入产品编号时，我正在弄清楚如何让它跳入开关

这是代码：

```
using namespace std;

int main()
{
int productNum = 0;  
int quantityArray[5];
for (int i = 0; i < 5; ++i)
quantityArray[i] = 0;
char answer = ('y' || 'n' || 'e' || 'Y' || 'N' || 'E');
double priceArray[5] = { 2.98, 4.50, 9.98, 4.99, 6.87 };
double total1 = (quantityArray[0] * priceArray[0]);
double total2 = (quantityArray[1] * priceArray[1]);
double total3 = (quantityArray[2] * priceArray[2]);
double total4 = (quantityArray[3] * priceArray[3]);
double total5 = (quantityArray[4] * priceArray[4]);
double checkout = total1 + total2 + total3 + total4 + total5;

cout << "Please select a product number 1, 2, 3, 4, or 5" << endl;
cin >> productNum;
do
    {

       switch (productNum)
       {
       case '1':
           cout << "1 inch x 1 inch sticker is $" << priceArray[0] << endl;
       cout << "How many of these stickers would you like to purchase?" << endl;
        cin >> quantityArray[0];
              cout << "You have selected " << quantityArray[0] << "at the price of $" << priceArray[0] << endl;
              cout << "Is this correct?" << endl;
              cout << "Y for yes, N for no, E to checkout." << endl;
              cin >> answer;
       case '2':
              cout << "3 inch x 2 inch sticker is $" << priceArray[1] << endl;
              cout << "How many of these stickers would you like to purchase?" << endl;
              cin >> quantityArray[1];
              cout << "You have selected " << quantityArray[1] << "at the price of $" << priceArray[1] << endl;
              cout << "Is this correct?" << endl;
              cout << "Y for yes, N for no, E to checkout." << endl;
              cin >> answer;
       case '3':
              cout << "7 inch x 7 inch sticker is $" << priceArray[2] << endl;
              cout << "How many of these stickers would you like to purchase?" << endl;
              cin >> quantityArray[2];
              cout << "You have selected " << quantityArray[2] << "at the price of $" << priceArray[2] << endl;
              cout << "Is this correct?" << endl;
              cout << "Y for yes, N for no, E to checkout." << endl;
              cin >> answer;
       case '4':
              cout << "3 inch x 3 inch sticker is our current special at $" << priceArray[3] << endl;
              cout << "How many of these stickers would you like to purchase?" << endl;
              cin >> quantityArray[3];
              cout << "You have selected " << quantityArray[3] << "at the price of $" << priceArray[3] << endl;
              cout << "Is this correct?" << endl;
              cout << "Y for yes, N for no, E to checkout." << endl;
              cin >> answer;
       case '5':
              cout << "5 inch x 4 inch sticker is $" << priceArray[4] << endl;
              cout << "How many of these stickers would you like to purchase?" << endl;
              cin >> quantityArray[4];
              cout << "You have selected " << quantityArray[4] << "at the price of $" << priceArray[4] << endl;
              cout << "Is this correct?" << endl;
              cout << "Y for yes, N for no, E to checkout." << endl;
              cin >> answer;
                if (answer = 'y' || 'Y')
                {
                    break;
                }
                else if (answer = 'n' || 'N')
                {
                    cout << "Please select a qantity." << endl;
                }
                else if (answer = 'e' || 'E')
                {
                    cout << checkout << endl;
                }
       }
    }while (answer != 'e' || 'E'); 
```

}

我的书使用头文件来展示如何初始化 swtich，但它使用了多种方法。我很确定我可以在不使用标题的情况下将其纳入一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:28:29.933

您的 switch 语句是“错误的”，因为您读取了一个整数然后将其与字符进行比较，这并不意味着同一件事。除非您真的想进入下一个案例，否则您还应该`break;`在每个案例的末尾都有一个。`case`

像这样的代码：

```
 (answer = 'y' || 'Y') 
```

可以这样重写（以澄清它的作用）：

```
 ((answer = 'y') || 'Y') 
```

它在两个方面是错误的：首先`answer = 'y'`将变量设置`answer`为`'y'`（并将语句变为“真”，因为整个表达式的值`'y'`与零比较（这将使其为假） - 它不是零，所以语句在此处结束并执行 if 中的内容。您应该使用“等于”运算符`==`，而不是“赋值运算符”`=`来检查某些内容是否匹配。如果您解决了这个问题，并且`answer == 'y'`不是'true，那么第二部分`|| 'Y'`不会'根本不做你想做的事，而是检查是否`'Y'`为零（事实并非如此）。

要解决此问题，您需要使用`if (answer == 'y' || answer == 'Y')`和类似的。

同样适用于此`char answer = ('y' || 'n' || 'e' || 'Y' || 'N' || 'E');`，它将答案设置为`true`[or `1`]，因为值的逻辑或不为零 - 并且只会`'y'`被检查，因为 C 和 C++ 被定义为“一旦我们找到决定整个序列的东西就停止检查”。

我有两个建议： 1\. 一次只写一点代码。在继续下一步之前测试它是否有效。2\. 在编译器中启用警告。经常编译。这将帮助您在编写大量“错误”代码之前检测和修复问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:19:41.090

这是因为您将输入读取为整数，但案例是字符。

例如，*字符* `'1'`（在绝大多数计算机上）与*整数* `49`相同。

将大小写改为整数：

```
case 1:
    // ...

case 2:
    // ... 
```

等等

# c# - SMTP 是如何工作的，它是关于 smtp 服务器的本地端口还是远程端口？

> ID：16056196
> 
> 赞同：1
> 
> 时间：2013-04-17T09:18:29.780
> 
> 标签：c#, email

我用 C# 制作了一个使用免费 smtp 服务器或 Yahoo 和 gmail smtp 服务器工作的电子邮件客户端。我仍然不清楚 smtp 的端口和来龙去脉以及互联网的最终工作方式。

假设我使用 ISP 的 smtp 服务器通过电子邮件客户端或类似 Outlook 的电子邮件客户端发送邮件，那么我是否使用计算机的 25 端口并且服务器在 25 端口接收它？

在 C# 中是`smtpclient.port`我的计算机或 smtp 服务器的端口。另外，当我使用基于 Web 的客户端（如 Yahoo 或 gmail）时，smtp 及其端口 25 如何适合 web/http 使用端口 80 的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:21:10.057

端口`SmtpClient.Port`是要连接到服务器上的端口。

至于网络邮件客户端——网络服务器将连接到邮件服务器，而不是浏览器。也就是说，当您访问 yahoo 或 gmail 时，浏览器将使用端口 80 进行连接——服务器代码本身将使用适当的端口通过其网络连接到电子邮件服务器。

# c# - 这是在外壳扩展和用 C# 编写的应用程序之间进行通信的首选方式

> ID：16056202
> 
> 赞同：1
> 
> 时间：2013-04-17T09:18:54.300
> 
> 标签：c#, .net, com, shell-extensions

我在 C# 中编写了一个 shell 扩展，它显示了我自己的上下文菜单项 (FileExtensionMenu) 单击我的菜单项后，shell 扩展应该将选择的文件名提交给我可以使用此文件处理的主应用程序。

我的问题是扩展程序和应用程序之间的通信方式是哪种。或者我必须将程序逻辑转移到外壳扩展代码吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:32:06.910

您可以使用[`Windows Communication Foundation (WCF)`](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)来调用正在运行的应用程序中的方法。设置起来有些繁琐，但是一旦有了它，就可以很容易地通过 RPC 调用方法。

请注意，这些方法是从单独的线程中调用的，因此您需要在必要时将其编组到 UI 调用（使用`Control.Invoke()`或`Control.BeginInvoke()`用于 Windows 窗体）。

[请参阅此处了解详细信息](http://msdn.microsoft.com/en-us/library/dd456779.aspx)。

另外，[请参见此处的简单示例](http://weblogs.asp.net/ralfw/archive/2007/04/14/a-truely-simple-example-to-get-started-with-wcf.aspx)。正如亚当在下面所说，您将需要使用命名管道作为传输机制，因此在查看该示例时请记住，而不是

```
new NetTcpBinding(),
"net.tcp://localhost:8000"); 
```

你会有类似的东西：

```
new NetNamedPipeBinding(),
"net.pipe://localhost/YourServiceNameGoesHere" 
```

# c++ - Poco c++ Crypto 静态库使用在 XCode 构建时产生错误

> ID：16056203
> 
> 赞同：0
> 
> 时间：2013-04-17T09:18:55.453
> 
> 标签：c++, xcode, openssl, poco-libraries

当我尝试使用我之前使用的静态库（即 Foundation、Net 等）编译一个简单的测试项目时。一切正常，但是当我包含 Crypto 库时，我得到了很多错误，这可能是由 openssl 依赖引起的吗？我已将 openssl 包含文件夹和 Poco Foundation,Net,Crypto 以及 Foundation,Net,Crypto 的 .a 文件添加到 XCode 中的构建设置中

编码：

```
//ViewController.h
 #include <Poco/Crypto/CipherFactory.h>
 #include <Poco/Crypto/Cipher.h>
 #include <Poco/Crypto/CipherKey.h> 
```

在我的 ViewDidLoad 中：

```
//ViewController.mm
std::string headKey = "TESTSTRING";

// encode the string
CipherFactory& factory = CipherFactory::defaultFactory();
// Creates a 256-bit AES cipher
Cipher* pCipher = factory.createCipher(CipherKey("aes-256"));
std::string encrypted = pCipher->encryptString(headKey, Cipher::ENC_BASE64);
std::string decrypted = pCipher->decryptString(encrypted, Cipher::ENC_BASE64);
NSLog([NSString stringWithUTF8String:encrypted.c_str()]); 
```

错误消息：

```
 "_BIO_ctrl", referenced from:

  "_BIO_free", referenced from:

  "_BIO_new", referenced from:

  "_BIO_new_mem_buf", referenced from:

  "_BIO_s_file", referenced from:

  "_BIO_s_mem", referenced from:

  "_BN_bn2bin", referenced from:

  "_BN_free", referenced from:

  "_BN_new", referenced from:

  "_BN_num_bits", referenced from:

  "_BN_set_word", referenced from:

  "_CRYPTO_num_locks", referenced from:

  "_CRYPTO_set_dynlock_create_callback", referenced from:

  "_CRYPTO_set_dynlock_destroy_callback", referenced from:

  "_CRYPTO_set_dynlock_lock_callback", referenced from:

  "_CRYPTO_set_id_callback", referenced from:

  "_CRYPTO_set_locking_callback", referenced from:

  "_ERR_error_string", referenced from:

  "_ERR_free_strings", referenced from:

  "_ERR_get_error", referenced from:

  "_EVP_BytesToKey", referenced from:

  "_EVP_CIPHER_CTX_block_size", referenced from:

  "_EVP_CIPHER_CTX_cleanup", referenced from:

  "_EVP_CIPHER_CTX_set_padding", referenced from:

  "_EVP_CIPHER_block_size", referenced from:

  "_EVP_CIPHER_flags", referenced from:

  "_EVP_CIPHER_iv_length", referenced from:

  "_EVP_CIPHER_key_length", referenced from:

  "_EVP_CipherFinal_ex", referenced from:

  "_EVP_CipherInit", referenced from:

  "_EVP_CipherUpdate", referenced from:

  "_EVP_PKEY_get1_RSA", referenced from:

  "_EVP_cleanup", referenced from:

  "_EVP_des_ede3_cbc", referenced from:

  "_EVP_get_cipherbyname", referenced from:

  "_EVP_md5", referenced from:

  "_OPENSSL_add_all_algorithms_noconf", referenced from:

  "_OPENSSL_config", referenced from:

  "_PEM_read_bio_RSAPrivateKey", referenced from:

  "_PEM_read_bio_RSAPublicKey", referenced from:

  "_PEM_read_bio_RSA_PUBKEY", referenced from:

  "_PEM_write_bio_RSAPrivateKey", referenced from:

  "_PEM_write_bio_RSAPublicKey", referenced from:

  "_RAND_seed", referenced from:

  "_RSA_free", referenced from:

  "_RSA_generate_key_ex", referenced from:

  "_RSA_new", referenced from:

  "_RSA_private_decrypt", referenced from:

  "_RSA_public_encrypt", referenced from:

  "_RSA_size", referenced from:

  "_SSL_library_init", referenced from:

  "_SSL_load_error_strings", referenced from:

  "_X509_get_pubkey", referenced from:

  "Poco::Crypto::CipherKey::CipherKey(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:

  "std::istream::gcount() const", referenced from:

  "std::string::at(unsigned long) const", referenced from:

  "std::string::data() const", referenced from:

  "std::string::size() const", referenced from:

  "std::string::c_str() const", referenced from:

  "std::string::empty() const", referenced from:

  "std::string::length() const", referenced from:

  "std::string::operator[](unsigned long) const", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::gptr() const", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::pptr() const", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::eback() const", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::egptr() const", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::pbase() const", referenced from:

  "std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::str() const", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::good() const", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::rdbuf() const", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::operator void*() const", referenced from:

  "std::allocator<char>::std::allocator()", referenced from:

  "std::allocator<char>::~std::allocator()", referenced from:

  "std::istream::get(char&)", referenced from:

  "std::istream::get()", referenced from:

  "std::istream::read(char*, int)", referenced from:

  "std::istream::std::istream(std::basic_streambuf<char, std::char_traits<char> >*)", referenced from:

  "std::istream::~std::istream()", referenced from:

  "std::ostream::put(char)", referenced from:

  "std::ostream::write(char const*, int)", referenced from:

  "std::ostream::std::ostream(std::basic_streambuf<char, std::char_traits<char> >*)", referenced from:

  "std::ostream::~std::ostream()", referenced from:

  "std::ostream::operator<<(int)", referenced from:

  "std::string::append(char const*)", referenced from:

  "std::string::append(char const*, unsigned long)", referenced from:

  "std::string::append(std::string const&)", referenced from:

  "std::string::reserve(unsigned long)", referenced from:

  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)", referenced from:

  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&)", referenced from:

  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()", referenced from:

  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:

  "std::string::operator=(std::string const&)", referenced from:

  "std::string::operator+=(char)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::setg(char*, char*, char*)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::setp(char*, char*)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::sync()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::imbue(std::locale const&)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::pbump(int)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::sputc(char)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::uflow()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::sbumpc()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::setbuf(char*, int)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::xsgetn(char*, int)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, int)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::pubsync()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::seekoff(long long, std::_Ios_Seekdir, std::_Ios_Openmode)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::seekpos(std::fpos<__mbstate_t>, std::_Ios_Openmode)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::pbackfail(int)", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::showmanyc()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::basic_streambuf()", referenced from:

  "std::basic_streambuf<char, std::char_traits<char> >::~basic_streambuf()", referenced from:

  "std::basic_istringstream<char, std::char_traits<char>, std::allocator<char> >::basic_istringstream(std::string const&, std::_Ios_Openmode)", referenced from:

  "std::basic_istringstream<char, std::char_traits<char>, std::allocator<char> >::~basic_istringstream()", referenced from:

  "std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::basic_ostringstream(std::_Ios_Openmode)", referenced from:

  "std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::~basic_ostringstream()", referenced from:

  "std::ios_base::Init::Init()", referenced from:

  "std::ios_base::Init::~Init()", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::init(std::basic_streambuf<char, std::char_traits<char> >*)", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::basic_ios()", referenced from:

  "std::basic_ios<char, std::char_traits<char> >::~basic_ios()", referenced from:

  "std::_Rb_tree_decrement(std::_Rb_tree_node_base*)", referenced from:

  "std::_Rb_tree_increment(std::_Rb_tree_node_base*)", referenced from:

  "std::__throw_length_error(char const*)", referenced from:

  "std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)", referenced from:

  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:

  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char)", referenced from:

  "typeinfo for std::istream", referenced from:

  "typeinfo for std::ostream", referenced from:

  "typeinfo for std::basic_streambuf<char, std::char_traits<char> >", referenced from:

  "typeinfo for std::basic_ios<char, std::char_traits<char> >", referenced from:

  "non-virtual thunk to std::istream::~std::istream()", referenced from:

  "non-virtual thunk to std::ostream::~std::ostream()", referenced from:

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:28:08.123

问题实际上不在您的代码中。您需要使用`libcrypto.a`或`libssl.a`构建在完全相同的平台上。特别是如果您使用的是 iOS 模拟器，它将适用于设备`i386`或`arm6 or arm7`设备。所以，应该有平台特定的库。您可以从网站上获取此库代码并使用相同的架构进行编译，或者制作一个适用于多个平台的胖库。

# autohotkey - 如何使用 AutoHotKey 打开程序？

> ID：16056209
> 
> 赞同：0
> 
> 时间：2013-04-17T09:19:04.847
> 
> 标签：autohotkey, notepad

我有一个名为 Manual Crimp OPEN 的应用程序。在打开的那个应用程序上，我想按`F2`键盘上的 KEY 打开另一个名为 Rework Cables 的应用程序。但不是关闭它而是在两个应用程序之间切换？可以使用 AutoHotKey 吗？

任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:41:29.007

如果您的意思是像使用 [Alt]+[Tab] 那样切换。

不确定您对 AutoHotKey 的熟悉程度，但这是一个开始。

```
SetTitleMarchMode, 2

F2::
wingettitle, Title, A
IfInString, Title, Manual Crimp
{
  IfWinNotExist, Rework Cables
  {
    Run, C:\path\ReworkCables.exe
    WinWait, Rework Cables
  }
  WinActivate, Rework Cables
}
Else IfInString, Title, Rework Cables
  WinActivate, Manual Crimp OPEN
Else
  Send, {F2}
Return 
```

PS我没有测试代码...

# java - 如何使用 docx4j api 设置行距？

> ID：16056210
> 
> 赞同：0
> 
> 时间：2013-04-17T09:19:07.557
> 
> 标签：java, apache-poi, docx4j, hwpf

> 块引用

嗨，我正在尝试使用 docx4j api 将 doc 转换为 docx。我需要根据需要设置行距。

> 块引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:16:32.253

您可以使用以下修改：

```
@@ -20,23 +20,30 @@

 package org.docx4j.convert.in;

 import java.io.FileInputStream;
+import java.math.BigInteger;

 import org.apache.log4j.Logger;
 import org.apache.poi.hwpf.HWPFDocument;
 import org.apache.poi.hwpf.usermodel.CharacterRun;
+import org.apache.poi.hwpf.usermodel.LineSpacingDescriptor;
 import org.apache.poi.hwpf.usermodel.Paragraph;
 import org.apache.poi.hwpf.usermodel.Range;
 import org.apache.poi.hwpf.usermodel.Section;
 import org.apache.poi.hwpf.usermodel.Table;
 import org.apache.poi.hwpf.usermodel.TableCell;
 import org.apache.poi.hwpf.usermodel.TableRow;
+import org.docx4j.XmlUtils;
+import org.docx4j.jaxb.Context;
 import org.docx4j.openpackaging.io.SaveToZipFile;
 import org.docx4j.openpackaging.packages.WordprocessingMLPackage;
 import org.docx4j.openpackaging.parts.WordprocessingML.MainDocumentPart;
+import org.docx4j.wml.PPr;
+import org.docx4j.wml.PPrBase.Spacing;
+import org.docx4j.wml.STLineSpacingRule;

@@ -152,10 +161,26 @@ public class Doc {
            wmlP = documentPart.createStyledParagraphOfText( stripSpace(styleName), null);

        } else {
            wmlP = documentPart.createParagraphOfText(null);
        }
+       
+       LineSpacingDescriptor lsd = p.getLineSpacing();
+       if (lsd==null || lsd.isEmpty()) {
+           // do nothing
+       } else {
+           PPr pPr = wmlP.getPPr();
+           if (pPr==null) {
+               pPr = Context.getWmlObjectFactory().createPPr();
+               wmlP.setPPr(pPr);
+           }
+           Spacing spacing = Context.getWmlObjectFactory().createPPrBaseSpacing();
+           spacing.setLine(lsd._dyaLine);
+           spacing.setLineRule(STLineSpacingRule.AUTO);
+           pPr.setSpacing(spacing);
+       }
+ 
```

但 _dyaLine 不可见。

docx4j 依赖于 Apache POI 的 HWPF 来读取二进制 .doc，并且在 POI 中需要 _dyaLine 的 getter。

请注意，将文档导入 docx 是一个非常基本的概念证明，而不是其他任何东西。

如果您想将 doc 转换为 docx，保留一系列功能，我建议您通过 JODConverter 使用 LibreOffice/OpenOffice。

# django - django：有没有办法为内联指定标题

> ID：16056213
> 
> 赞同：0
> 
> 时间：2013-04-17T09:19:16.063
> 
> 标签：django, django-admin

我有这两个模型管理员：

```
class SingleImageInline(generic.GenericTabularInline):
  model = Image
  extra = 1
  max_num = 1
  can_delete = False

class SponsorAdmin(admin.ModelAdmin):
    fieldsets = [
      ('Basic Info', {
        'fields': ['name']
      }),
   ]
   list_display = ['name']
   search_fields = ['name']
 inlines = [SingleImageInline, ] 
```

`Sponsor`有一个`Image`名为`logo`. 具有表单的管理表单`SingleImageInline`已`Images`显示在其标题中，有没有办法可以将其更改为`Logo`，可能是这样的？

```
inlines = [(`Logo`, SingleImageInline), ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:26:29.910

你当然可以

```
class SingleImageInline(generic.GenericTabularInline):
   model = Image
   extra = 1
   max_num = 1
   can_delete = False
   verbose_name = "Logo"
   verbose_name_plural = "Logos" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:28:06.330

你可以给一个 verbose_name `SingleImageInline`：

```
class SingleImageInline(generic.GenericTabularInline):
  model = Image
  extra = 1
  max_num = 1
  can_delete = False
  verbose_name = "logo"
  verbose_name_plural = "logos" 
```

编辑

子类`SingleImageInline`，然后把verbose_name放在那里

```
class SingleImageInline(generic.GenericTabularInline):
  model = Image
  extra = 1
  max_num = 1
  can_delete = False

class SingleImageInlineOtherName(SingleimageInline):
  verbose_name = "logo"
  verbose_name_plural = "logos" # bit redundant as Django automatically adds 's' to plural names, but it's just for the purpose

class SponsorAdmin(admin.ModelAdmin):
    fieldsets = [
      ('Basic Info', {
        'fields': ['name']
      }),
   ]
   list_display = ['name']
   search_fields = ['name']
 inlines = [SingleImageInlineOtherName, ] # use the subclass here 
```

# c++ - 在读/写中使用 C++11 unordered_map 的最有效方法

> ID：16056214
> 
> 赞同：0
> 
> 时间：2013-04-17T09:19:23.023
> 
> 标签：c++, c++11, std, unordered-map

在我的程序的一部分中，我想更新一个给定的值`unordered_map`。问题可以这样简化：

```
#include <iostream>
#include <stdlib.h>
#include <unordered_map>
#include <string>
int main(int argc, char **argv) {
    std::unordered_map <unsigned long, int> map;
    unsigned long i = 1;
    std::string s;
    while (i != 0) {
        std::cout << "Give me an unsigned long" << std::endl;
        std::cin >> s;
        i = strtoul(s.c_str(), NULL, 0);
        if (map.find(i) == map.end()) map[i] = 1;
        else if (map[i] < static_cast<unsigned long>(-1)) map[i] += 1;
    }
} 
```

（当然，我的程序不存储用户输入数据，它仅用于说明目的。我的程序实际上将整数编码的字符串存储在 4 个字母的字母表上。我需要哈希而不是树来这样做。）

如您所见，我需要检查密钥的存在并更新它。由于我存储了超过 10 亿个整数，我想知道最有效的方法。

我看到了[这个相关的问题](https://stackoverflow.com/questions/6897737/using-the-operator-efficiently-with-c-unordered-map)，但它没有提到价值更新。

非常感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:33:35.210

```
int &value = map[key];
if (value != static_cast<unsigned long>(-1)) ++value; 
```

如果`key`地图中不存在，`value`则将值初始化为`0`，因此将采用`1`after increment 的正确值。

# java - 在 Java 中可以快速地重复读取/写入大量 int[] (BitSet) 数据到文件中吗？

> ID：16056215
> 
> 赞同：1
> 
> 时间：2013-04-17T09:19:28.643
> 
> 标签：java, database, performance, memory, filesystems

我的主程序如下所示（伪代码）：

```
public void main(String[] args) {

    // produce lots of int[] data which is stored inside a list of hashmaps
    List<HashMap<Integer, int[]>> dataArray1 = new
                                    ArrayList<HashMap<Integer, int[]>>();
    ...

    // create a new list of data, similar to dataArray1
    // now we will write into dataArray2 and read from dataArray1
    List<HashMap<Integer, int[]>> dataArray2 = new
                                    ArrayList<HashMap<Integer, int[]>>();
    while (true) {
        if (exitCondition) break;
        ...
        for index1, index2 in a set of indices {
            int[] a1 = dataArray1.get(index1).get(key1);
            int[] a2 = dataArray1.get(index2).get(key2);
            int[] b = intersect a1 and a2;
            int i = generateIndex(index1, index2);
            int key = generateKey(key1, key2);
            dataArray2.get(i).put(key, b);
        }
    }

    // now we can remove dataArray1
    dataArray1 = null;

    // create a new list of data, similar to dataArray2
    // now we will write into dataArray3 and read from dataArray2
    List<HashMap<Integer, int[]>> dataArray3 = new
                                    ArrayList<HashMap<Integer, int[]>>();
    while (true) {
        if (exitCondition) break;
        ...
        for index1, index2 in a set of indices {
            int[] a1 = dataArray2.get(index1).get(key1);
            int[] a2 = dataArray2.get(index2).get(key2);
            int[] b = intersect a1 and a2;
            int i = generateIndex(index1, index2);
            int key = generateKey(key1, key2);
            dataArray3.get(i).put(key, b);
        }
    }

    // now we can remove dataArray2
    dataArray2 = null;

    ...
    // and so on 20 times

} 
```

我的问题是，有些人在某些时候`dataArrayk`会`k > 1`变得很重（比如 20 Gb），因此不可能将其存储在内存中。我可以换上`int[]`，`BitSet`但这无济于事，内存消耗得更多。

解决方案是使用数据库或文件系统。你会推荐使用什么？我需要性能（时间执行），内存无所谓。如果您的经验是数据库，那么请推荐用于处理特定（哪个？）数据库的最快接口，无论是 bd4 (Berkeley db)、postgresql 还是其他。如果它说 FileSystem，那么请推荐最快的接口（文件库）。

至于读取和写入的统计信息：在我的代码的每个 while 循环中，我的`3`读取次数比写入次数多，例如：对于一级 k，我从`dataArray_k` `12000`时间读取并写入`dataArray_(k+1)` `4000`时间。

我可以将每个哈希图存储`List<HashMap<Integer, int[]>> dataArray1`在单独的文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:39:28.813

昨天我对不同 java io/nio 技术的读取性能进行了评估。事实证明，在 pc 上， with`Memory Map`提供的读取性能最好。此处包含代码的详细信息：[从二进制文件中读取大量 int 的最快方法](https://stackoverflow.com/questions/16022053/fastest-way-to-read-huge-number-of-int-from-binary-file)`java.nio``IntBuffer`

当然，事实证明，算法更改更有可能提高速度。例如，在您的情况下，考虑多维搜索结构，如四叉树或 R* 树，以减少对密切相关的生物数据的磁盘访问。

更新：正如我现在看到的代码，您似乎总是遍历所有值（这不是很清楚）。首先尝试使用一个短数组，它需要一半的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:36:19.983

老实说，用 Java 读取这么多数据可能会是一场噩梦。我只处理了多达 5 GB 的文本文件，这真的很慢而且很困难。您可以使用更接近操作系统的东西（sed、grep、find 等）。如果 Java 是**必须的**，那么我认为 NIO 包会比简单的文件更快

[看这里](https://stackoverflow.com/questions/1605332/java-nio-filechannel-versus-fileoutputstream-performance-usefulness)

# java - 在运行时更新 Jtable？

> ID：16056222
> 
> 赞同：1
> 
> 时间：2013-04-17T09:19:45.997
> 
> 标签：java, swing, jtable, add

我正在尝试`JTable`在用户编辑并在其中输入新值时更新 a，但出现转换错误。

到目前为止的编码：

```
import java.io.*;
import java.awt.*;
import java.util.*;
import javax.swing.*;
import java.awt.event.*;
import javax.swing.table.*;

 public class Stackq extends AbstractTableModel {
    Vector data;
    Vector columns;

    public Stackq() {
  String line;
  data = new Vector();
 columns = new Vector();
  int count = 0;

  try {
FileInputStream fis = new FileInputStream("D:/joy/text/registration.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fis));
StringTokenizer st1 = new StringTokenizer(br.readLine(), "\t");
while (st1.hasMoreTokens()) {
columns.addElement(st1.nextToken());
count++;
}
while ((line = br.readLine()) != null) {
StringTokenizer st2 = new StringTokenizer(line, "\t");
for (int i = 0; i < count; i++) {
    if (st2.hasMoreTokens())
    data.addElement(st2.nextToken());
    else
    data.addElement("");
 }
 }
 br.close();
 } catch (Exception e) {
 e.printStackTrace();
  }
   }

  public void setValueAt(Object value, int row, int col){
 ((Vector) data.get(row)).setElementAt(value, col);
 fireTableCellUpdated(row,col);
 }

 public boolean isCellEditable(int row, int col){
 //if (4 == col){
 return true;
 }
 //else {
// return false;
// }
 //}

 public void insertData(Object[] values){
 data.add(new Vector());
 for(int i =0; i<values.length; i++){
 ((Vector) data.get(data.size()-1)).add(values[i]);
       }
 fireTableDataChanged();
 }

 public void removeRow(int row){
 data.removeElementAt(row);
 fireTableDataChanged();
 }

    public int getRowCount() {
            return data.size() / getColumnCount();
    }

    public int getColumnCount() {
            return columns.size();
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
            return (String) data.elementAt((rowIndex * getColumnCount())
                            + columnIndex);
    }

      public String getColumnName(int i){
      return (String)columns.get(i);
         }

    public static void main(String s[]) {
           Stackq model = new Stackq();
            JTable table = new JTable();
            table.setModel(model);

           JScrollPane scrollpane = new JScrollPane(table);
            JPanel panel = new JPanel();
            panel.add(scrollpane);
            JFrame frame = new JFrame();
            frame.add(panel, "Center");
            frame.pack();
            frame.setVisible(true);

     }
   } 
```

错误信息：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Vector
        at Stackq.setValueAt(Stackq.java:45)
        at javax.swing.JTable.setValueAt(JTable.java:2709)
        at javax.swing.JTable.editingStopped(JTable.java:4711)
        at javax.swing.AbstractCellEditor.fireEditingStopped(AbstractCellEditor.java:125)
        at javax.swing.DefaultCellEditor$EditorDelegate.stopCellEditing(DefaultCellEditor.java:350)
        at javax.swing.DefaultCellEditor.stopCellEditing(DefaultCellEditor.java:215)
        at javax.swing.JTable$GenericEditor.stopCellEditing(JTable.java:5465)
        at javax.swing.plaf.basic.BasicTableUI$Handler.mousePressed(BasicTableUI.java:980)
        at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:263)
        at java.awt.Component.processMouseEvent(Component.java:6260)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3267) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:32:18.143

您的`data`实例是一个`Vector`. 在这条线上，

```
((Vector) data.get(row)).setElementAt(value, col); 
```

您从带有 的向量中获取单个元素`data.get(row)`，在您的情况下是一个字符串。现在您正试图将该字符串转换为`Vector`显然`(Vector)`不起作用的字符串。

你想保护一个向量中的一个向量来生成一个表格吗？也许定义通用向量的类型会帮助你找到你的问题，例如`Vector<Vector<String>> data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:30:16.430

这很容易解释，一方面，您用文件中的单个字符串填充数据向量。稍后在 setValueAt 中，您将向量的值视为另一个向量（因为您将字符串放入其中，所以它们不是）。

我建议您正确定义您的 Vector（取决于您实际想要的内容）。我猜你想要这个

```
Vector<String> data 
```

或者

```
Vector<Vector<String>> data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:34:58.000

您应该看到警告“矢量是原始类型...”

第一件事：

```
Vector data; 
```

应该

```
Vector<String> data; 
```

始终查看警告，它们的存在是有原因的。

第二件事：

Data 已经是持有 Strings 的 Vector 类型。您将数据的内容（它是一个字符串）转换为 Vector，这显然是行不通的。

```
((Vector) data.get(row)).setElementAt(value, col); 
```

应该

```
data.setElementAt(value, col); 
```

形成你的代码我会假设这也是错误的，因为看起来你想要一个矩阵结构。因此，您必须声明一个包含字符串类型向量的向量。

```
Vector<Vector<String>>data = null; 
```

然后你可以像这样访问它：

```
Vector<String>row = data.get(row);
String value = row.get(column); 
```

并尝试摆脱演员表。强制转换通常表明您的设计可能存在问题，并阻止解析器在编译时捕获错误。

# java - jFreeChart GroupedStackedBarRenderer 垂直模式下的子标签对齐

> ID：16056224
> 
> 赞同：1
> 
> 时间：2013-04-17T09:19:50.193
> 
> 标签：java, jfreechart

我在使用 jFreeChart（1.0.14，最新的 maven 版本）时遇到了一个小布局问题。由于图像在这里比文字更重要：

![样本输出](https://i.stack.imgur.com/ho2HC.png)

注意条形相对于子标签“A”、“B”、“C”、“D”的垂直位移。我不确定这是错误还是配置错误。请参阅下面附加的代码以进行复制。

此代码是从我当前的项目中取出的，因此其中可能有一些不必要的东西。

```
package de.test;

import java.awt.Color;
import java.awt.Font;
import java.awt.GradientPaint;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Map;
import java.util.Random;
import java.util.Set;
import java.util.TreeMap;
import java.util.TreeSet;

import javax.swing.JFrame;
import javax.swing.JMenuBar;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.CategoryLabelPosition;
import org.jfree.chart.axis.CategoryLabelPositions;
import org.jfree.chart.axis.CategoryLabelWidthType;
import org.jfree.chart.axis.SubCategoryAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.GroupedStackedBarRenderer;
import org.jfree.data.KeyToGroupMap;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.text.TextBlockAnchor;
import org.jfree.ui.RectangleAnchor;
import org.jfree.ui.TextAnchor;

public class MainFrame extends JFrame {
    private static final long serialVersionUID = 5309704066433738856L;
    private ChartPanel panel;

    public static void main(String[] args) {
    new MainFrame();
    }

    public MainFrame() {
    JMenuBar menuBar = new JMenuBar();

    setDefaultCloseOperation(EXIT_ON_CLOSE);

    JFreeChart chart = ChartFactory.createStackedBarChart("", "", "", null, PlotOrientation.HORIZONTAL, false, true, false);
    chart.setBackgroundPaint(getBackground());
    chart.setTextAntiAlias(true);
    panel = new ChartPanel(chart, 400, 400, 100, 100, 1000, 1000, true, false, false, true, false, false);

    Set<String> subCategories = new TreeSet<>();
    GroupedStackedBarRenderer groupedStackedBarRenderer = new GroupedStackedBarRenderer();
    groupedStackedBarRenderer.setDrawBarOutline(true);

    GradientPaint billPaint = new GradientPaint(0.0F, 0.0F, Color.GREEN.darker(), 0.0F, 0.0F, Color.GREEN);
    GradientPaint creditPaint = new GradientPaint(0.0F, 0.0F, Color.RED.darker(), 0.0F, 0.0F, Color.RED);

    SubCategoryAxis subCategoryAxis = new SubCategoryAxis(null);
    subCategoryAxis.setCategoryLabelPositions(CategoryLabelPositions.replaceLeftPosition( //
        subCategoryAxis.getCategoryLabelPositions(), //
        new CategoryLabelPosition(RectangleAnchor.CENTER, TextBlockAnchor.BOTTOM_CENTER, TextAnchor.BOTTOM_CENTER, -Math.PI / 2,
            CategoryLabelWidthType.CATEGORY, 1f)));
    subCategoryAxis.setMinorTickMarksVisible(false);
    subCategoryAxis.setAxisLineVisible(false);
    subCategoryAxis.setTickLabelFont(subCategoryAxis.getLabelFont().deriveFont(Font.BOLD));
    KeyToGroupMap keyToGroupMap = new KeyToGroupMap();

    Map<String, Map<String, Map<String, Double>>> map = generateRandomSet(new HashSet<>(Arrays.asList("ab", "cd", "ef", "gh")),
        new HashSet<>(Arrays.asList("A", "B", "C", "D")));
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();
    for (String employee : map.keySet()) {
        Map<String, Map<String, Double>> classMap = map.get(employee);
        for (String serviceClass : classMap.keySet()) {
        Map<String, Double> typeMap = classMap.get(serviceClass);
        subCategories.add(serviceClass.toString());
        Double billValue = typeMap.containsKey("RE") ? (Double) typeMap.get("RE") : 0D;
        Double creditNoteValue = typeMap.containsKey("GU") ? (Double) typeMap.get("GU") : 0D;
        Double effectiveValue = Math.max(0, billValue - creditNoteValue);
        dataset.addValue(effectiveValue, serviceClass + " (RE)", employee);
        dataset.addValue(creditNoteValue, serviceClass + " (GU)", employee);
        }
    }
    CategoryPlot categoryPlot = (CategoryPlot) panel.getChart().getPlot();
    categoryPlot.setDataset(dataset);
    categoryPlot.setDomainAxis(subCategoryAxis);
    categoryPlot.setRenderer(groupedStackedBarRenderer);

    int counter = 0;
    for (String subCategory : subCategories) {
        groupedStackedBarRenderer.setSeriesPaint(counter * 2, billPaint);
        groupedStackedBarRenderer.setSeriesPaint(counter++ * 2 + 1, creditPaint);
        keyToGroupMap.mapKeyToGroup(subCategory + " (RE)", subCategory);
        keyToGroupMap.mapKeyToGroup(subCategory + " (GU)", subCategory);
        subCategoryAxis.addSubCategory(subCategory);
    }
    groupedStackedBarRenderer.setSeriesToGroupMap(keyToGroupMap);

    setJMenuBar(menuBar);
    add(panel);

    setTitle("main.title");

    pack();
    setVisible(true);

    }

    private Map<String, Map<String, Map<String, Double>>> generateRandomSet(Set<String> emplNames, Set<String> subNames) {
    Random rnd = new Random();
    Map<String, Map<String, Map<String, Double>>> result = new TreeMap<>();
    for (String empl : emplNames) {
        Map<String, Map<String, Double>> emplData = new TreeMap<>();
        for (String sub : subNames) {
        Map<String, Double> subData = new TreeMap<>();
        subData.put("RE", rnd.nextDouble() * 1000 + 1000);
        subData.put("GU", rnd.nextDouble() * 1000);
        emplData.put(sub, subData);
        }
        result.put(empl, emplData);
    }
    return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:56:52.087

从源码中`new KeyToGroupMap()`可以看出，如果不指定默认组，则使用`"Default Group"`默认组。而这个隐含的默认组将被计入`getGroupCount()`函数中。

`GroupedStackedBarRenderer`将使用组数计算条形宽度、边距等。可能是在绘制条形图时添加了一个隐式组。因此标签未对齐条形。

**修复**：`A`创建时用作默认组`KeyToGroupMap`：`KeyToGroupMap keyToGroupMap = new KeyToGroupMap("A");`

顺便说一句，我不确定这是否是错误。

```
/**
 * Creates a new map with a default group named 'Default Group'.
 */
public KeyToGroupMap() {
    this("Default Group");
}

/**
 * Creates a new map with the specified default group.
 *
 * @param defaultGroup  the default group (<code>null</code> not permitted).
 */
public KeyToGroupMap(Comparable defaultGroup) {
    if (defaultGroup == null) {
        throw new IllegalArgumentException("Null 'defaultGroup' argument.");
    }
    this.defaultGroup = defaultGroup;
    this.groups = new ArrayList();
    this.keyToGroupMap = new HashMap();
}

/**
 * Returns the number of groups in the map.
 *
 * @return The number of groups in the map.
 */
public int getGroupCount() {
    return this.groups.size() + 1;
} 
```

# python - Python：模块化编程从圆半径中找到周长、直径和面积

> ID：16056234
> 
> 赞同：0
> 
> 时间：2013-04-17T09:20:15.037
> 
> 标签：python

我必须创建一个模块化程序，可以找出圆半径的直径、周长和面积。我敢肯定，你们中的许多人都可以从我老师给出的一个例子中注意到我有点想知道这一点。而不是人们指出我编码错误的事实，请您给我应该做什么的理由，以便我可以更好地理解这个概念。谢谢

```
def main():
    Radius = 0
    Diameter = 0
    Circumference = 0
    Area = 0

    Radius = GetRadius(Radius)
    Diameter = SetDiameter(Radius,Diameter)
    Circumference = SetCircumference(Radius,Circumference)
    Area = SetArea(Radius,Area)
    ShowResults(Radius,Diameter,Circumference,Area)

def GetRadius(myradius):
    myradius = float(input("Enter your radius: "))
    return myradius

def SetDiameter(myradius,mydiameter):
    mydiameter = myradius * 2
    return mydiameter

def SetCircumference(myradius,mycircumference):
    PIE = 3.14159
    mycircumference = 2 * PIE * myradius
    return mycircumference

def SetArea(myradius,myarea):
    PIE = 3.14159
    myarea = PIE * myradius ^ 2
    return myarea

def ShowResults(Radius,Diameter,Circumference,Area):
    print("The Diameter is",mydiameter)
    print("The Circumference is",mycircumference)
    print("The Area is",myarea)

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:36:38.503

`myarea = PIE * myradius ^ 2`

在 Python 中，幂运算符是`**`.

`myarea = PIE * myradius ** 2`

（事实上​​，不要指望 ^ 在编程语言中是幂运算。它通常是按位异或运算符。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:40:32.820

我建议的第一件事是从参数列表中删除要返回的参数：

```
def SetDiameter(myradius,mydiameter):
    mydiameter = myradius * 2
    return mydiameter 
```

应该

```
def SetDiameter(myradius):
    mydiameter = myradius * 2
    return mydiameter 
```

如果从函数返回值，则不需要将其包含在参数列表中。这对于理解 python 是如何工作的很重要。

我不知道你最初的作业是什么，但是提高你的技能和这个短程序的最好方法可能是增加一个循环课。您绝对应该阅读以下内容： http: [//docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

# php - 如何使用函数要求 php 文件不改变全局变量环境？

> ID：16056236
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:20:16.203
> 
> 标签：php

如何使用函数要求 php 文件不改变全局变量环境？
如果使用函数，并且在函数代码“require（xxx.php）”中，那么xxx.php中的所有变量都不再是全局变量。对于下面的示例，我想得到结果是“linjuming”，但是在 require_part() 函数中需要 oop.php，所以 echo $name 不再是“linjuming”。
请不要在 require_part 函数中使用全局 $name 。因为此函数是需要任何 php 文件的常用函数。其他 php 文件有自己的全局变量。我的代码在这里：

```
<?php
$name='linjuming';
class my_template{
    function require_part($part_name){
        if(file_exists($part_name.'php')){
            require($part_name.'php');
        }
    }
}

$tmp=new my_template();
$tmp->require_part('oop');

/*
    oop.php codes：
    <?php echo $name; ?>

    I want to run component php file and do not change the global environment;
    how to do that?

 */
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:34:24.870

从您注释掉的行看来，您似乎希望能够`$name`用作全局变量。

```
<?php 
    global $name;
    echo $name;
?> 
```

[在此处](http://php.net/manual/en/language.variables.scope.php)阅读有关变量范围的更多信息。

或者，您可以使用：

```
echo $this->name; 
```

# facebook-graph-api - 如何获得 Facebook 粉丝专页的创建者。

> ID：16056237
> 
> 赞同：1
> 
> 时间：2013-04-17T09:20:17.320
> 
> 标签：facebook-graph-api, facebook-fql

是否有可能获得粉丝名单，但按从前到后的顺序排列？我想看看某个页面的创建者是谁？

# javascript - jQuery，ajax 是否可以将脚本设置为 dataType？

> ID：16056245
> 
> 赞同：0
> 
> 时间：2013-04-17T09:20:42.743
> 
> 标签：javascript, jquery, ajax

此代码在 OSX 上工作但在 Win7 上不工作，给出“500 内部服务器错误”。我将 dataType 设置为 javascript、text、xml 等，但我的问题没有解决，无法得到响应。我必须在 Windows 上工作，因为我的 web 服务将从 mssql 获取数据。

```
$.ajax(
  {
    type: "POST",
    dataType: "script",
    url: "http://localhost:49292/Service1.asmx/HelloWorld",
    success: function() { console.log('successful access!!!'); },
    error: function() { console.log('error!!!!'); }
  }); 
```

# java - 在java中获取未来日期和当前日期之间的天数差异的问题

> ID：16056246
> 
> 赞同：3
> 
> 时间：2013-04-17T09:20:43.243
> 
> 标签：java, javascript

我需要从日历中选择一个未来的日期，假设我选择的日期是 2013 年 4 月 30 日。现在我想要的是将日期发送到服务器。在服务器端，我需要计算未来日期和当前日期之间的天数并将其发送到数据库。

问题是，当我在本地进行计算时（因为我的服务器和浏览器在同一个时区），它工作正常，但是当服务器与浏览器处于不同的时区时，天数的差异并没有像预期的那样出现。有人请帮助我如何解决时区问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:30:32.757

## 时差偏移

您应该使用一种格式来发送包含时区的数据。你可以：

1.  在 GMT 00 中使用不使用时区（自纪元以来的毫秒数）的 UNIX 时间，并在 java 端使用它

请参阅： [以秒为单位获取当前日期/时间](https://stackoverflow.com/questions/3830244/get-current-date-time-in-seconds)

2.  使用 ISO-8601 这是一个标准并且可以包括浏览器的时区，然后解析这个服务器端：

看：

*   [如何在 JavaScript 中输出 ISO 8601 格式的字符串？](https://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript)和
*   [将符合 ISO 8601 的字符串转换为 java.util.Date](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)

## 计算差异（使用 MS 和日历对象）

您需要使用日历对象。您创建一个日历对象并设置未来日期：例如[，如何将 Java.util.calendar 设置为未来的特定时间段](https://stackoverflow.com/questions/12649288/how-to-set-java-util-calendar-to-a-specific-time-period-in-the-future) 然后您可以通过将当前日期（如长）与返回的 long 相减来执行计算日历，除以 (1000*60*60*24)。

我在自己的应用程序中使用的一些代码来查找大于特定日期时间（午夜）的条目：

```
long currentTimeStamp = System.currentTimeMillis();
Calendar cal;
cal = Calendar.getInstance();
cal.setTime(new Date(currentTimeStamp));

//GET MS OF MIDNIGHT FROM BEGINNING OF THE DAY
cal.set(Calendar.HOUR_OF_DAY, 0); cal.set(Calendar.MINUTE, 0); cal.set(Calendar.SECOND, 0); cal.set(Calendar.MILLISECOND,0);
long midnight = cal.getTimeInMillis();
if(currentTimeStamp - midnight > (30*24*60*60*1000))break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:33:04.637

将两个日期转换为一个共同的时区，例如 GMT，然后计算差异。

# c++ - 在 Alt 选项卡上最小化 DirectX 10 窗口

> ID：16056248
> 
> 赞同：2
> 
> 时间：2013-04-17T09:20:49.493
> 
> 标签：c++, winapi, directx, directx-10

我一直在尝试让我的 DirectX 10 应用程序正确处理全屏的 alt 选项卡。当我从全屏切换选项卡时，应用程序会自动进入窗口模式。

我尝试听 WM_ACTIVATEAPP 手动最小化和最大化程序。它可以工作，但它破坏了程序中已经工作的其他功能（在全屏和窗口之间切换）。从 alt 选项卡恢复后，我第一次尝试退出全屏，黑屏闪烁并保持全屏，第二次触发 WM_ACTIVATEAPP 导致整个程序最小化而不是正确进入窗口模式.

下面是我正在使用的代码：

在 WM_SIZE 上：

```
mD3D->ResizeBuffers(width, height);
mBufferWidth = width;
mBufferHeight = height;
mViewport.SetViewportRect(0, 0, width, height);
mD3D->GetDevice()->RSSetViewports(1, &mViewport.GetViewport()); 
```

在 WM_ACTIVATEAPP 上：

```
if(wParam == TRUE && mSwapChainDesc.Windowed == FALSE)
{
  // Restore
  ChangeDisplaySettings(NULL, CDS_FULLSCREEN);
  mSwapChain->SetFullscreenState(TRUE, NULL);
  mSwapChainDesc.Windowed = FALSE;
  ResizeBuffers(mBufferWidth, mBufferHeight);
}
else if(wParam == FALSE && mSwapChainDesc.Windowed == FALSE)
{
  // Minimize
  ShowWindow(hwnd, SW_SHOWMINNOACTIVE);
  mSwapChain->SetFullscreenState(FALSE, NULL);
  ChangeDisplaySettings(NULL, 0);
} 
```

在切换窗口模式请求时：

```
if(mSwapChainDesc.Windowed)
{
  mSwapChain->SetFullscreenState(TRUE, NULL);
  mSwapChainDesc.Windowed = FALSE;
}
else
{
  mSwapChain->SetFullscreenState(FALSE, NULL);
  mSwapChainDesc.Windowed = TRUE;
}
ResizeBuffers(mBufferWidth, mBufferHeight); 
```

调整大小缓冲区：

```
mDevice->OMSetRenderTargets(0, 0, 0);

// Release all outstanding references to the swap chain's buffers.
mRenderTargetView->Release();

HRESULT hr;
// Preserve the existing buffer count and format.
// Automatically choose the width and height to match the client rect for HWNDs.
hr = mSwapChain->ResizeBuffers(1, width, height, DXGI_FORMAT_UNKNOWN, 0);

// Get buffer and create a render-target-view.
ID3D10Texture2D* pBuffer;
hr = mSwapChain->GetBuffer(0, __uuidof( ID3D10Texture2D), (void**) &pBuffer );

hr = mDevice->CreateRenderTargetView(pBuffer, NULL, &mRenderTargetView);
pBuffer->Release();

mDevice->OMSetRenderTargets(1, &mRenderTargetView, NULL );

// Set up the viewport.
D3D10_VIEWPORT vp;
vp.Width = width;
vp.Height = height;
vp.MinDepth = 0.0f;
vp.MaxDepth = 1.0f;
vp.TopLeftX = 0;
vp.TopLeftY = 0;
mDevice->RSSetViewports( 1, &vp ); 
```

如何最小化窗口并仍然保持使用 DirectX 10 在窗口和全屏之间切换的能力？

# gwt - GWT中Datagrid和CellTable的区别

> ID：16056249
> 
> 赞同：4
> 
> 时间：2013-04-17T09:20:52.790
> 
> 标签：gwt, datagrid, celltable

**Datagrid**和**Celltable 有**什么区别？

我知道以下主要差异

1.  Datagrid 提供**RequiresResize.onResize()**功能，而 celltable 不提供此功能
2.  Datagrid 标题是固定的，在滚动内容时不会移动。但我想知道这么大的差异是否足以让他们制作一个全新的小部件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:58:35.247

你列出的理由就足够了。它们在内部的工作方式类似，您可以在 Google 群组讨论中跟踪或多或少相同的信息 - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/PBhu6RtP4G8](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/PBhu6RtP4G8)

我们选择 DataGrid 是因为它与响应式设计配合得很好，滚动看起来很好地塞进了网格而不是外面。我确实觉得 CellTable 是多余的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T11:10:19.753

是的，这些和其他差异使得需要一个新的小部件。

DataGrid 被认为包含在`ProvidesResize`层次结构（[布局面板](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)）中，并且当您不将其放入小部件时，它明确要求设置固定宽度`ProvidesResize`。

如您所见，在 GWT 中，对于某些事情，同一个小部件有两种实现，具体取决于应用程序布局（基本或布局面板）。

# java - 在java中将接口类型（不实现类类型）作为参数传递

> ID：16056251
> 
> 赞同：3
> 
> 时间：2013-04-17T09:21:04.533
> 
> 标签：java, oop, class, methods, arguments

我正在开发一个“服务提供商”（非常类似于谷歌果汁）。它的工作是将任意 class_1 或接口映射到*可以实例化*的 *class_2*并实现 class_1（如果 class_1 是*interface*）或是/扩展 class_1（如果 class_1 不是接口）。

所以目前我有方法

```
public <T> void map(Class<T> key, Class<? extends T> service) 
```

代码的问题是我可以将接口类型映射到接口类型

```
ServiceProvider sp = new ServiceProvider();
sp.map(IParent.class, IChild.class); 
```

这完美地编译没有错误（IChild 扩展 IParent）。后来，当然，当我想：

```
IParent obj = sp.getService(IParent.class); //look for IParent mapping and instantiate the proper object 
```

我收到 java.lang.InstantiationException。

**所以问题是：**

如何声明 map() 方法，以使编译器检查第二个参数是*实现或扩展*第一个参数的类而不是接口？（**关键是得到编译时错误**。我已经知道如何在运行时检查这个）

谢谢。PS：是的 - 谷歌搜索了很多，几乎没有发现。

**UPD.：** 谢谢大家的时间。也许再多说几句这一切：目标是开发机制（ServiceProvider 类），这将帮助我避免应用程序中的紧密耦合、硬依赖。所以我开发/采用了以下理念：“如果你想交付一个‘单元’（一块*可重复使用的*software) -- 声明所有公共接口；实施是你的私事，我们根本不关心；如果有人想使用你的单元，他们应该在 1 之前从 ServiceProvider 请求它。在启动时，他们使用 sp.map(IYuorInterface.class, TheClassImplementingIt.class); 2\. IYuorInterface obj = sp.getService(IYuorInterface.class); 您有责任使 TheClassImplementingIt 类“可实例化”（构造函数、安全性、类不是抽象的等）；如果不是 - 获得运行时异常是完全可以的。

有什么好处？

很明显——在任何给定时间，任何其他开发人员都可以使用 ServiceProvider 重新实现 IYuorInterface 映射它，然后所有应用程序都将使用它，而无需更改一行代码。（需要时最简单的情况——单元测试）

所以我的观点/问题是：map() 方法中的第二个参数必须是 Class 类型，它代表一个类，而不是接口，它应该与第一个参数“分配兼容”。

换句话说，当我做 map(ISomeIterface.class, Something.class); Something的**对象**（实例）应该可以像这样使用：

```
ISomeIterface obj = sp.getService(ISomeIterface.class);
//or in other words, just for example -- the Something can be used like this:
ISomeIterface obj = new Something(); 
```

这就是为什么工厂，正如一些答案所建议的那样是不可接受的，ServiceProvider 类已经是一种“工厂”

* * *

..似乎Java的Class对象代表类和接口，在编译时无法区分是真正的类还是接口..

但无论如何——谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:30:50.227

您可以使用

```
public boolean isConcrete(Class<?> input)
{
    if (input.isInterface())
         return false;

    if (Modifier.isAbstract(input.getModifiers()))
         return false;

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:39:55.537

据我所知，如果`Class`对象表示可实例化的类，则无法在编译时检查。

即使在类的情况下，它也可能是抽象的，也可能缺少无参数构造函数。

作为替代方案，我建议您使用 Factory 对象而不是类本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:48:46.250

如果您可以传递工厂而不是第二个参数，该怎么办。

```
interface IInterface{
    void go();
}

class IInterfaceImpl implements IInterface{
    public void go(){}
}

interface Factory<T>{
    T createInstance();
}

class FactoryImpl implements Factory<IInterface>{

    @Override
    public IInterface createInstance() {
        //you need to return an instance of IInterface, which can only be a class
        return new IInterfaceImpl();
    }
} 
```

# php - 如何使用 Zend_Registry::getInstance

> ID：16056257
> 
> 赞同：0
> 
> 时间：2013-04-17T09:21:18.083
> 
> 标签：php

```
 <?php

        require_once('Zend/Registry.php'); 
        $registry = Zend_Registry::getInstance(); 
        $registry['name'] = 'Quentin Zervaas'; 
        echo sprintf('My name is %s', $registry['name']);

    ?> 
```

问题：这条线是什么意思？`$registry = Zend_Registry::getInstance();`以及如何使用这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:28:31.043

Zend_Registry 用作应用程序级存储，您可以在其中存储变量、对象或在应用程序执行期间需要的任何其他内容。

下面的语句使用单例模式返回 Zend_Registry 类的对象。

```
Zend_Registry::getInstance(); 
```

将值添加到注册表。

```
$registry = Zend_Registry::getInstance();
$registry->set('variableName', 'value');
or
Zend_Registry::set('variableName', $value); 
```

这就是你获得价值的方式

```
$registry = Zend_Registry::getInstance();
$registry->get('variableName');
or
Zend_Registry::get('variableName'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:24:29.073

getInstance() 方法返回单例注册表对象。此注册表对象是可迭代的，使存储在注册表中的所有值都易于访问。例如。

```
$registry = Zend_Registry::getInstance();

foreach ($registry as $index => $value) {
    echo "Registry index $index contains:\n";
    var_dump($value);
} 
```

# git - 如何快速修复旧版本的 git repo

> ID：16056258
> 
> 赞同：0
> 
> 时间：2013-04-17T09:21:21.457
> 
> 标签：git, repository

所以我在一个网站上工作，我通过 git push 从我的本地更新到服务器。（git推送开发/直播）。

我的问题是，目前我一直在对网站进行重大更改，但也出现了一些需要在实时网站上修复的错误。

如何在不推动整个本地存储库运行的情况下对实时站点进行小修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:03:28.463

您可以使用分支来修复错误，然后合并到主分支并在需要时推送到实时网站。

要创建一个新分支并立即打开它：（`git checkout -b branchname`当然，您可以键入任何名称而不是“branchname”）。

如果要更改分支，只需键入`git checkout`后跟要处理的分支的名称（主分支称为“master”）。

要将新分支合并到主分支，首先切换到主分支，如上所述 ( `git checkout master`)，然后键入`git merge branchname`. 当然，“branchname”将替换为您要合并的分支的实际名称。

更多信息可以参考这篇文章： http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

# android - Android Application.onCreate 长流程

> ID：16056260
> 
> 赞同：2
> 
> 时间：2013-04-17T09:21:22.550
> 
> 标签：android

我在应用程序启动期间有一个漫长的过程。我想在此过程中显示进度对话框。如果我的应用程序重新启动，我不知道将启动哪个活动。

是否有在重新启动应用程序期间显示进度对话框的好习惯？我想阻止任何活动初始化，直到过程完成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:37:03.447

您可以简单地添加一个加载活动，向用户显示带有**进度条**的背景，告诉他您正在加载内容。同时，您应该在**单独的线程**中加载数据（使用 AsyncTask/Loader 等），完成后，您可以启动所需的任何 Activity。

此外，如果必须加载您的数据，您还可以在将内容加载到服务中时显示该活动，**这样****它就**不会被轻易杀死。但是，尝试使用基本逻辑：

1 您的应用程序已打开 -> 您是否加载了数据？

2a（是）开始您的活动

2b（否）启动服务并显示进度

3 用户/系统关闭您的应用程序并重新打开它 -> 返回 1)

# javascript - 模板内的Jquery Knockout for / while循环

> ID：16056261
> 
> 赞同：4
> 
> 时间：2013-04-17T09:21:24.353
> 
> 标签：javascript, jquery, knockout.js

我想创建一个树结构表。

我有行的json数组。一行可以有其他子行。

```
[
   {
      "Name": "Row 1",
      "Depth": 1,
      "Rows": [{ "Name": "Row 1.1", "Depth": 2, "Rows": [] }]
   },
   {
      "Name":" Row 2",
      "Depth": 1,
      "Rows": []
   }
] 
```

我有一行（不起作用）的模板如下所示：

```
<script type="text/html" id="row-template">
   <tr>
       {{ for(var i = 1; i<= Depth; i++) { }}
          <td class='col'></td>
       {{/for}}

       <td data-bind="text: Name"></td>
   </tr>
</script> 
```

有没有办法在敲除模板中使用重复语句，这样我就可`n`以为每一行附加我需要的额外列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:54:25.317

我认为，从 MVVM 的角度来看，您过度使用了标记；所以，我的建议是：为什么不定义一个从 viewModel 返回元素数组的计算？

例如，视图模型

```
function MyViewModel() {
    var self = this;

    self.Depth= ko.observable(10);

   self.DepthRepeated= ko.computed(function(){
       var ret = [];
       for(var i =0; i<self.Depth(); i++)
        ret.push(i);//note: very dirty way to create/populate an array!..but it's just for PoC

       return ret;

   });
} 
```

html:

```
<div data-bind="foreach: DepthRepeated"></div> 
```

（当然，在html部分我插入了一个div，你会插入td/tr）

# javascript - 使用phonegap的facebook连接插件时无法调用未定义的拆分

> ID：16056262
> 
> 赞同：1
> 
> 时间：2013-04-17T09:21:35.537
> 
> 标签：javascript, facebook, phonegap-plugins

尝试调用 FB.login() 函数时遇到问题。

堆栈跟踪表明 facebook 连接插件已正确初始化，但是当我尝试调用登录函数时出现错误：Cannot call method 'split' of undefined at file:///android_asset/www/cdv-plugin-fb-连接.js:39

似乎第 39 行的 params 变量未定义。

我正在使用在 android 4.1.1 HTC one X 上开发的 cordova 2.6.0.js

```
04-17 11:07:18.804: I/CordovaLog(27283): Changing log level to DEBUG(3)
04-17 11:07:18.804: I/CordovaLog(27283): Found preference for useBrowserHistory=true
04-17 11:07:18.804: D/CordovaLog(27283): Found preference for useBrowserHistory=true
04-17 11:07:18.804: I/CordovaLog(27283): Found preference for exit-on-suspend=false
04-17 11:07:18.804: D/CordovaLog(27283): Found preference for exit-on-suspend=false
04-17 11:07:18.804: D/DroidGap(27283): DroidGap.onCreate()
04-17 11:07:19.499: D/JsMessageQueue(27283): Set native->JS mode to 2
04-17 11:07:19.519: D/DroidGap(27283): DroidGap.init()
04-17 11:07:19.559: D/CordovaWebView(27283): >>> loadUrl(file:///android_asset/www/login.html)
04-17 11:07:19.559: D/PluginManager(27283): init()
04-17 11:07:19.584: D/CordovaWebView(27283): >>> loadUrlNow()
04-17 11:07:19.584: D/DroidGap(27283): Resuming the App
04-17 11:07:19.664: D/SoftKeyboardDetect(27283): Ignore this event
04-17 11:07:19.879: E/(27283): file /data/data/com.nvidia.NvCPLSvc/files/driverlist.txt: not found!
04-17 11:07:19.879: I/(27283): Attempting to load EGL implementation /system/lib//egl/libEGL_tegra_impl
04-17 11:07:20.154: I/(27283): Loaded EGL implementation /system/lib//egl/libEGL_tegra_impl
04-17 11:07:20.569: I/(27283): Loading GLESv2 implementation /system/lib//egl/libGLESv2_tegra_impl
04-17 11:07:20.609: I/Choreographer(27283): Skipped 53 frames! The application may be doing too much work on its main thread.
04-17 11:07:21.059: W/dalvikvm(27283): disableGcForExternalAlloc: false
04-17 11:07:21.164: D/SoftKeyboardDetect(27283): Ignore this event
04-17 11:07:21.319: D/DroidGap(27283): onMessage(onPageStarted,file:///android_asset/www/login.html)
04-17 11:07:24.679: D/chromium(27283): Unknown chromium error: -6
04-17 11:07:24.689: D/Cordova(27283): onPageFinished(file:///android_asset/www/login.html)
04-17 11:07:24.689: D/Cordova(27283): Trying to fire onNativeReady
04-17 11:07:24.689: D/DroidGap(27283): onMessage(onNativeReady,null)
04-17 11:07:24.689: D/DroidGap(27283): onMessage(onPageFinished,file:///android_asset/www/login.html)
04-17 11:07:24.739: D/CordovaNetworkManager(27283): Connection Type: 3g
04-17 11:07:24.739: D/DroidGap(27283): onMessage(networkconnection,3g)
04-17 11:07:24.739: D/CordovaNetworkManager(27283): Connection Type: 3g
04-17 11:07:24.744: D/DroidGap(27283): onMessage(spinner,stop)
04-17 11:07:25.094: W/dalvikvm(27283): disableGcForExternalAlloc: false
04-17 11:07:26.699: D/ConnectPlugin(27283): init: Initializing plugin.
04-17 11:07:26.739: D/DroidGap(27283): onMessage(spinner,stop)
04-17 11:07:26.759: D/CordovaLog(27283): Cordova Facebook Connect plugin initialized successfully.
04-17 11:07:26.759: I/Web Console(27283): Cordova Facebook Connect plugin initialized successfully. at file:///android_asset/www/cdv-plugin-fb-connect.js:24
04-17 11:07:26.759: W/dalvikvm(27283): disableGcForExternalAlloc: false
04-17 11:07:28.004: D/CordovaLog(27283): Uncaught TypeError: Cannot call method 'split' of undefined
04-17 11:07:28.004: E/Web Console(27283): Uncaught TypeError: Cannot call method 'split' of undefined at file:///android_asset/www/cdv-plugin-fb-connect.js:39 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:37:24.590

好吧，没关系，我让它工作了。正如我从[这个线程](https://stackoverflow.com/questions/14637568/phonegap-plugin-facebook-connect-login-not-working?rq=1)中发现的那样，我在 FB.login() 调用中使用了错误的范围。

# ruby-on-rails - 尝试访问相关记录时未定义的方法

> ID：16056263
> 
> 赞同：2
> 
> 时间：2013-04-17T09:21:50.480
> 
> 标签：ruby-on-rails, activerecord

我收到此错误。

```
undefined method `email' for nil:NilClass 
```

当我尝试访问我的相关模型记录时，如下所示：

用户模型：

```
has_one :facility 
```

用户设施：

```
belongs_to :user 
```

设施控制器

```
@adminfacilities = Facility.all 
```

索引.html.erb

```
@adminfacilities.each do |facility|
  facility.user.email 
```

我只是不明白我在这里做错了什么。为什么我无法访问此类信息？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:28:48.730

正如 xdazz 所说，你`facility.user`是`nil`.

也许您应该在 Facility 模型中添加验证

```
validates_presence_of :user 
```

以及对破坏的依赖

```
belongs_to :user, :dependent => :destroy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:24:37.193

因为 some `facility.user`is `nil`，您可以使用：

```
@adminfacilities.each do |facility|
  facility.user.try(:email) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:40:52.217

您可能有一个`Facility`没有**在外**键中分配给它的用户，当`foreach`循环到达该设施时，它发现没有分配用户，因此，它无法返回您正在寻找的用户属性，在这种情况下, `email`.

**检查**您的数据库*Facility*表，可能会有`user_id`一个`nil`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:34:44.540

代码本身看起来不错。

我认为原因是您使用的是开发模式，并且没有创建正确的关联数据。

建议您再次检查数据，看看是否有设施记录没有user_id。

此外，强烈建议按照 ForgetTheNorm 所述添加验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:03:45.390

一些相应的设施没有用户，所以它返回零。

然后从用户表 u 或尝试访问电子邮件。所以它通过 nil:NilClass(User nilclass) 的异常

我们可以像这样写一些最好理解的代码

**设施.用户？facility.user.email : nil** # 如果用户返回，它将为用户提供服务，否则它将给用户电子邮件，否则返回 nil

（或者）

设施.user.try(:email)

# clojure - 与记录、协议和汇编有关的令人惊讶的行为

> ID：16056265
> 
> 赞同：11
> 
> 时间：2013-04-17T09:21:56.053
> 
> 标签：clojure

我遇到了一个对我来说有点令人惊讶的行为，似乎与 clojure 记录有关。

设置如下：

1.  一个命名空间定义了一种记录类型：

    ```
    (ns defrecordissue.arecord)

    (defrecord ARecord []) 
    ```

2.  另一个命名空间定义了一个协议，并将其扩展为 1 中定义的记录类型：

    ```
    (ns defrecordissue.aprotocol
      (:require [defrecordissue.arecord])
      (:import [defrecordissue.arecord ARecord]))

    (defprotocol AProtocol
      (afn [this]))

    (extend-protocol AProtocol
      ARecord
      (afn [this] 42)) 
    ```

3.  第三个命名空间构造记录的一个实例并调用记录上的协议函数。

    ```
    (ns defrecordissue.aot1
      (:require [defrecordissue.aprotocol]
                [defrecordissue.arecord]))

    (defrecordissue.aprotocol/afn (defrecordissue.arecord/->ARecord)) 
    ```

编译 defrecordissue.aot1 命名空间时，在我的情况下 using `lein compile defrecordissue.aot1`，编译失败并出现以下异常：

```
Exception in thread "main" java.lang.IllegalArgumentException: No implementation of method: :afn of protocol: #'defrecordissue.aprotocol/AProtocol found for class: defrecordissue.arecord.ARecord, compiling:(aot1.clj:5:1)
    at clojure.lang.Compiler$InvokeExpr.eval(Compiler.java:3463)
    at clojure.lang.Compiler.compile1(Compiler.java:7153)
    at clojure.lang.Compiler.compile(Compiler.java:7219)
    at clojure.lang.RT.compile(RT.java:398)
    at clojure.lang.RT.load(RT.java:438)
    at clojure.lang.RT.load(RT.java:411)
    at clojure.core$load$fn__5018.invoke(core.clj:5530)
    at clojure.core$load.doInvoke(core.clj:5529)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5336)
    at clojure.core$compile$fn__5023.invoke(core.clj:5541)
    at clojure.core$compile.invoke(core.clj:5540)
    at user$eval7.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6619)
    at clojure.lang.Compiler.eval(Compiler.java:6609)
    at clojure.lang.Compiler.eval(Compiler.java:6582)
    at clojure.core$eval.invoke(core.clj:2852)
    at clojure.main$eval_opt.invoke(main.clj:308)
    at clojure.main$initialize.invoke(main.clj:327)
    at clojure.main$null_opt.invoke(main.clj:362)
    at clojure.main$main.doInvoke(main.clj:440)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:419)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37)
Caused by: java.lang.IllegalArgumentException: No implementation of method: :afn of protocol: #'defrecordissue.aprotocol/AProtocol found for class: defrecordissue.arecord.ARecord
    at clojure.core$_cache_protocol_fn.invoke(core_deftype.clj:541)
    at defrecordissue.aprotocol$fn__40$G__35__45.invoke(aprotocol.clj:5)
    at clojure.lang.AFn.applyToHelper(AFn.java:161)
    at clojure.lang.AFn.applyTo(AFn.java:151)
    at clojure.lang.Compiler$InvokeExpr.eval(Compiler.java:3458)
    ... 25 more 
```

如果我更改 3) 直接构造记录类，如下所示：

```
(ns defrecordissue.aot2
  (:require [defrecordissue.aprotocol]
            [defrecordissue.arecord]))

(defrecordissue.aprotocol/afn (defrecordissue.arecord.ARecord.)) 
```

编译成功。

我怀疑这与 [http://dev.clojure.org/jira/browse/CLJ-371](http://dev.clojure.org/jira/browse/CLJ-371)有某种关系，但我不明白到底发生了什么。

我还应该补充一点，没有`lein clean`, 编译第二次成功，因为记录的类现在在类路径上可用。因此，我可以通过 AOT 编译定义记录类型的命名空间来解决这个问题。

我在 GitHub 上创建了一个简单的 leiningen 项目来说明问题，请参阅 README 以了解用法： [https ://github.com/ragnard/defrecordissue](https://github.com/ragnard/defrecordissue)

为什么我会看到这种行为，避免这种行为的正确方法是什么？

**更新**

我在 GitHub 存储库中添加了一个新分支，以更好地说明核心问题： [https ://github.com/ragnard/defrecordissue/tree/more-realistic/](https://github.com/ragnard/defrecordissue/tree/more-realistic/)

无论在何处（即在哪个命名空间中）构造记录实例，都会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:25:36.353

我可以用你的回购重现问题。以下是对我有用的三个解决方案：

1.  告诉`lein compile`编译更多命名空间：

    ```
    lein compile defrecordissue.aprotocol defrecordissue.arecord defrecordissue.aot1 
    ```

2.  放

    ```
    :aot [defrecordissue.aprotocol defrecordissue.arecord defrecordissue.aot1] 
    ```

    在`project.clj`.

3.  放

    ```
    :aot :all 
    ```

    在`project.clj`.

后两者可以`lein compile`完成`lein aot1`（在 2\. 的情况下）和两者`lein aot1`的工作`lein aot2`（在 3\. 的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T17:04:56.210

我一直遇到这个。这就是我想出的，它似乎工作：

```
(defmacro with-datatype
  [datatype & body]
  (let [last-dot (.lastIndexOf ^String (str datatype) ".")
        ns (-> datatype
               str
               (subs 0 last-dot)
               symbol)]
     `(do
        (require (quote ~ns))
        (import ~datatype)
        ~@body)))

(defmacro extend-type*
  [datatype & extensions]
  `(with-datatype ~datatype
     (extend-type ~datatype
       ~@extensions)))

(defmacro extend-protocol*
  [protocol & specs]
  (let [splitter (let [l (atom nil)]
                   #(if (symbol? %) (reset! l %) @l))
        specs (partition-by splitter specs)]
    `(do
       ~@(for [[datatype & extensions] specs]
           `(extend-type* ~datatype ~protocol ~@extensions))))) 
```

然后您只需将第二个代码块更改为：

```
(ns defrecordissue.aprotocol)

(defprotocol AProtocol
  (afn [this]))

(extend-protocol* AProtocol
  defrecordissue.arecord.ARecord
  (afn [this] 42)) 
```

也许不是最干净的解决方案，但您不必再 AOT 您的库。

# android - 哪些 Android 应用商店支持应用内购买（也称为应用内计费）？

> ID：16056266
> 
> 赞同：3
> 
> 时间：2013-04-17T09:21:56.413
> 
> 标签：android, in-app-purchase, in-app-billing

我的安卓游戏有应用内购买。它使用 Google Play IAB API 3.0。我想将它发布到其他 Android 应用商店。我了解我需要更改我的程序以支持他们的自定义 IAB API。哪些 Android 应用商店支持应用内计费 API？

到目前为止，我找到了以下四个为 Android 开发者提供应用内计费 API 的应用商店：

*   谷歌播放
*   亚马逊应用商店
*   三星应用程式
*   SK T店

NOOK 应用已与 Fortumo 合作，并通过其 API 提供应用内计费。

是否有任何其他提供应用内计费 API 的 Android 应用程序商店？

# gwt - 我可以在 GWT 的 UiBinder 样式定义中使用变量吗

> ID：16056268
> 
> 赞同：3
> 
> 时间：2013-04-17T09:22:10.273
> 
> 标签：gwt, uibinder

在以下示例中，来自文件 MessageView.ui.xml：

```
<ui:style>
    .polite {
      position:fixed;
      background-color:notice-background-color;
      top:1em;
      left:2em;
      white-space:nowrap;
      border-radius:.5em;}
</ui:style>

<g:PopupPanel styleName="{style.polite}">
    <g:HTML ui:field="message">Message goes here.</g:HTML>
</g:PopupPanel> 
```

我可以定义@notice-background-color 以便其他 UiBinder 文件也可以使用该定义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:07:40.627

是的你可以。将您的颜色定义为 static `String`：

```
package com.myproject.client.resource;

public class MyColors {
    public static String lightGreen = "#0bdc1a";
} 
```

并定义一个`@eval`变量：

```
<ui:style>
    @eval notice-background-color com.myproject.client.resource.MyColors.lightGreen;

    .polite {
      position:fixed;
      background-color:notice-background-color;
      top:1em;
      left:2em;
      white-space:nowrap;
      border-radius:.5em;}
</ui:style>

<g:PopupPanel styleName="{style.polite}">
    <g:HTML ui:field="message">Message goes here.</g:HTML>
</g:PopupPanel> 
```

# git - Nuget：包更新后如何不删除旧包？

> ID：16056269
> 
> 赞同：2
> 
> 时间：2013-04-17T09:22:11.590
> 
> 标签：git, module, nuget, nuget-package

几个月前，我们开始在我们的 ASP.NET MVC 项目中使用 Nuget。我们正在构建许多由多个可重用组件组成的应用程序。例如：

应用程序 A - 身份验证模块（带有 JavaScript/模板/控制器/POCO 的 nuget 包） - 支付模块（带有 JavaScript/模板/控制器/POCO 的 nuget 包）

应用程序 B - 身份验证模块（带有 JavaScript/模板/控制器/POCO 的 nuget 包）

但是我们的团队在过去几周增长了很多，我们在合并包时遇到了一些问题。每次我们更新一个包时，旧版本的包都会从包文件夹中删除。这很好，但是在合并/签入到 git 时会导致很多问题（我们使用 tortoiseGit）。例如：

开发人员 1 将应用程序 A 中的 Authentication 模块更新到 2.0 版并将其签入。开发人员 2 也在处理应用程序 A 并将 Authentication 模块更新到 2.1 版。开发人员 1 在开发人员 2 之前签入。当开发人员 2 从 git 提取最新更改并尝试签入他的更改时，他将在 nuget 包文件夹中遇到很多冲突，因为他的包文件夹中没有 2.0 版的文件（TortoiseGit错误：文件未找到）。现在，开发人员 1 必须在他的本地文件系统中创建包文件夹并将其标记为已删除，以便能够签入他的更改。

**如果 Nuget 不删除更新时的旧包文件夹，则此问题将得到解决。这可能吗？**在这种情况下，我们当然会手动清理 nuget 包文件夹中的旧包......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:57:06.350

听起来对您的团队来说更好的解决方案是不在版本控制中包含*packages*文件夹，而是[启用 package restore](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

[如果您使用 Nuget 2.7+，请访问此站点](http://docs.nuget.org/Consume/Package-Restore)

# java - mahout - 运行 grouplens 示例错误

> ID：16056273
> 
> 赞同：1
> 
> 时间：2013-04-17T09:22:37.687
> 
> 标签：java, apache, maven, mahout

[尝试在https://cwiki.apache.org/MAHOUT/recommendationexamples.html](https://cwiki.apache.org/MAHOUT/recommendationexamples.html)上运行以下教程的 grouplens 示例时出现错误

**我的参数：**

```
 windows 7 32bit,
    jdk 1.7
    maven 3.0.5
    svn checkout of http://svn.apache.org/repos/asf/mahout/trunk
    mahout v.0.8
    installation: mvn -DskipTest clean install 
```

我的猜测是我需要安装 cygwin，但在有人可以确认之前不想这样做。

**错误：**

```
mvn -e -q exec:java -Dexec.mainClass="org.apache.mahout.cf.taste.example.grouplens.GroupLe
nsRecommenderEvaluatorRunner" -Dexec.args="-i ratings.dat"
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project mahout: An exception occured while executing the Java class. org.apache.mahout.cf.
taste.example.grouplens.GroupLensRecommenderEvaluatorRunner -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project mahout: An exception occured while
 executing the Java class. org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommenderEvaluatorRunner
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommenderEvaluato
rRunner
        at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:352)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: java.lang.ClassNotFoundException: org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommenderEvaluatorRunner
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:285)
        at java.lang.Thread.run(Thread.java:722)
[ERROR]
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T09:11:30.550

我首先正确安装解决了这个问题，然后使用启动脚本`hadoop`启动 hadoop 实例。`*all.sh`

之后我安装了 mahout，`cd examples/`并运行了 abouve 命令，它工作了。

# css - 960 网格系统 - Internet Explorer 6 中的布局中断

> ID：16056274
> 
> 赞同：1
> 
> 时间：2013-04-17T09:22:39.127
> 
> 标签：css, internet-explorer-6

这是该页面的链接：

在 IE6 中查看该网站的索引页面时，我发现网页布局的特定部分中断。遗憾的是，我的经理希望该网站在 IE6 中保持其外观。“最新推文”和“联系我们”应该彼此水平排列，但 IE6 中“联系我们”显示在“最新推文”下方。我相信这个问题是由于这些`.grid`类应用了浮点数。但是，我已尝试在可能的情况下清除这些浮动。这是我的精简标记结构，其中布局正在破坏，包括我的清除。

```
<div class="grid_4 alpha">
    <h2 class="text250 margbottom NG">Latest Tweets</h2>
</div>  

<div class="grid_8 omega">
    <h2 class="text250 margbottom NG">Contact Us</h2>
    <div class="grid_4 alpha">  
        <!--content-->                  
    </div>
    <div class="grid_4 omega">
        <!--content-->  
    </div>  

    <div class="clear">&nbsp;</div> 

    <div class="grid_4 alpha">
        <!--content-->  
    </div>
    <div class="grid_4 omega">
        <!--content-->  
    </div>  

    <div class="clear">&nbsp;</div>     
</div>
<div class="clear">&nbsp;</div> 
```

这是该问题的图像：

# angularjs - 在加载阶段阻止动画（AngularJS）

> ID：16056275
> 
> 赞同：1
> 
> 时间：2013-04-17T09:22:40.250
> 
> 标签：angularjs, angularjs-animation

基于之前的问题，我决定升级到 Angular 1.1.4 并尝试使用动画系统。我在做我以前做过的事情时遇到了麻烦。当用户点击一个元素时，它会被添加到一个 ng-repeat 元素中。然后，该元素的动画将容器滚动到合适的位置以显示该元素。那部分工作正常。

有时我会替换所有元素并且我不希望发生滚动行为。以前，我通过在范围中放置一个变量并在我的自定义指令中查看该变量来管理它。然后我会在加载后设置一个超时来切换变量。现在使用动画系统，超时不再起作用。

我需要一种方法来在我的程序的某些活动期间打开/关闭动画的某些部分。我怎样才能做到这一点？

# android - 在android中设置自己的软键盘

> ID：16056282
> 
> 赞同：0
> 
> 时间：2013-04-17T09:23:09.253
> 
> 标签：android

我有一个大问题。这有可能为一个编辑文本设置键盘吗？我的意思是我安装了其他软键盘，并且我在设置中有这个键盘。现在我想点击复选框，我想看看我安装的那个键盘。我怎么能在代码中做到这一点？这个有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:26:08.930

出于安全原因，您无法以编程方式控制用户使用哪个键盘。

充其量，您可以制作一个类似于 View 应用程序的一部分的键盘，并在 EditText 上的 onTouch() 事件中显示/隐藏它。

# python - 基于多个键对字典列表进行排序并删除一些字典的最佳方法是什么

> ID：16056286
> 
> 赞同：0
> 
> 时间：2013-04-17T09:23:15.293
> 
> 标签：python, list, sorting, optimization, dictionary

根据多个键对字典列表进行排序并同时从输出中删除一些字典的最佳（时间）方法是什么？

我希望输出是所有字典的列表，其中`"protected":0`并按任意数量的其他键排序。

**数据**

```
[{"raffle_id":"81","created":"2013-01-07 19:47:57","instant":"1","protected":0,"expire":"never","ticket_price":"0.00050000",
"tickets_total":"10","tickets_sold":"1","my_tickets_count":"1"},
{"raffle_id":"83","created":"2013-01-07 19:49:20","instant":"0","protected":1,"expire":"4d 23h 59m","ticket_price":"0.01000000",
"tickets_total":"50","tickets_sold":"0","my_tickets_count":"0"}] 
```

**当前方法**

```
raffle_list = [raffle for raffle in raffle_list if raffle("protected") == "0"]

sorted_raffles = sorted(raffles_list, key = operator.itemgetter("ticket_price", "tickets_sold", "my_tickets_count", "tickets_total")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:24:30.573

我只能建议制作`raffle_list`一个生成器，但这可能/可能不会更快，具体取决于可用的数据和内存。例如。list comps 对于小型数据集更快，但生成器避免在内存中制作副本，这可能会提高大型数据集的速度，因为`sorted`也会制作副本：

```
(raffle for raffle in raffle_list if raffle("protected") == "0") 
```

# vhdl - 通用记录（通过 vhdl 2008 通用包尝试）

> ID：16056291
> 
> 赞同：2
> 
> 时间：2013-04-17T09:23:35.263
> 
> 标签：vhdl

我想为 component 编写一个库`C`，该组件在内部分为两个 supcomponents`c1`和`c2`，它们可以由泛型配置。子模块应通过记录连接，这取决于泛型。该记录也应在组件内使用。通常我会在 a 中实例化记录`package`，并在子组件的文件和组件的文件中使用包。由于它是通用的，我认为使用通用包（VHDL-2008）可能会提供解决方案。

问题是我还需要从子组件中访问记录。为此，我需要`use thePackage`，但是要使用通用包，我需要传递初始值（据我所知）。

所以我尝试了（注意：我在这里没有处理记录，我只是想从通用组件访问通用包，我在其中参数化（？）带有组件参数的包）：

```
entity genericPackagePart is
    generic(
        outputValue : integer
    );
    port(
        result: out integer
    );
end entity;

architecture behav of genericPackagePart is
    package test is new work.genericPackage
    generic map(
        genSize => outputValue
    );

    use work.test.all;
begin
    result <= dummy;  -- dummy is a constant from genericPackage set to the value genSize (generic parameter)
end architecture; 
```

但是我从modelsim收到以下错误：

```
** Error: (vcom-11) Could not find work.test.
** Error: genericPackagePart.vhd(17): (vcom-1195) Cannot find expanded name "work.test".
** Error: genericPackagePart.vhd(17): Unknown expanded name.
** Error: genericPackagePart.vhd(19): (vcom-1136) Unknown identifier "dummy".
** Error: genericPackagePart.vhd(20): VHDL Compiler exiting 
```

**更新：** 我尝试将其包装`genericPackagePart`在一个泛型包中，并使用泛型从该包中实例化 `genericPackage`，这也不起作用。

流程应该是：

*   Testbench => 实例化`genericPackagePart`并`genericPackage`使用通用参数
*   该记录可在测试台中从`genericPackage`
*   内部`genericPackagePart` `genericPackage`使用传递给的参数实例化`genericPackagePart`
*   记录在里面`genericPackagePart`

Modelsim 给出了 Errors （`test`是我给 in 的参数化实例起的名字`genericPackage`，`genericPackagePart`这是来自 的编译`genericPackagePart`）：

```
** Error: (vcom-11) Could not find work.test.
** Error: genericPackagePart.vhd(11): (vcom-1195) Cannot find expanded name "work.test".
** Error: genericPackagePart.vhd(11): Unknown expanded name.
** Error: genericPackagePart.vhd(13): near "entity": expecting END 
```

* * *

我查看了[Passing Generics to Record Port Types](https://stackoverflow.com/questions/7925361/passing-generics-to-record-port-types)但这并没有解决基于泛型的包实例化问题

* * *

为了完整起见，这里是包和测试台：

**包裹：**

```
package genericPackage is
    generic(genSize : integer := 1);

    constant dummy : integer := genSize;
end package; 
```

**试验台：**

```
package myGenericPackage is new work.genericPackage
generic map(
    genSize => 5
);

use work.myGenericPackage.all;

entity genericPackageTestbench is
end entity;

architecture testbench of genericPackageTestbench is
    signal testsignal : integer;
    signal testsignal2 : integer;
    signal dummy : integer := 12;

    component genericPackagePart is
    generic(
        outputValue : integer
    );
    port(
        result: out integer
    );
    end component;
begin
    test : process is
    begin
        wait for 20 ns;
        testsignal <= dummy;
        wait for 20 ns;
        testsignal <= work.myGenericPackage.dummy;
        wait;
    end process;

    testPart: genericPackagePart
        port map(result => testsignal2)
        generic map(outputValue => 128);
end architecture; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:50:19.943

我认为问题在于您的包`test`需要在实体区域而不是架构区域中定义：

```
package genericPackage is
    generic(genSize : integer := 1);
    constant dummy : integer := genSize;
end package;
entity genericPackagePart is
    generic(outputValue : integer);
    port(result : out integer);

    -- *** Generic package instantiated here ***
    package test is new work.genericPackage
       generic map(genSize => outputValue);

end entity;
architecture behav of genericPackagePart is
    use test.all;
begin
    result <= dummy;  -- dummy is from genericPackage (=genSize)
end architecture; 
```

这是我测试它的方式（基于您的测试平台）：

```
package myGenericPackage is new work.genericPackage
   generic map(genSize => 5);

use work.myGenericPackage.all;

entity genericPackageTestbench is
end entity;

architecture testbench of genericPackageTestbench is
    signal testsignal  : integer;
    signal testsignal2 : integer;
begin
    test : process is
    begin
        testsignal <= work.myGenericPackage.dummy;
        wait for 20 ns;

        assert testsignal = work.myGenericPackage.dummy 
            report "test signal should be work.myGenericPackage.dummy" 
            severity error;
        assert testsignal2 = 128 report "testsignal2 /= 128" severity error;
        report "testsignal = " & integer'image(testsignal);
        report "testsignal2 = " & integer'image(testsignal2);
        report "Finished";
        wait;
    end process;

    testPart : entity work.genericPackagePart
        generic map(outputValue => 128)
        port map(result         => testsignal2);
end architecture; 
```

使用 Modelsim 10.2 编译和仿真：

```
vcom -2008 genpacktest.vhd; vsim -c genericPackageTestbench -do "run -all; quit" 
```

其中报告：

```
# Loading std.standard
# Loading work.genericpackage
# Loading work.mygenericpackage
# Loading work.genericpackagetestbench(testbench)
# Loading work.genericpackagepart(behav)
# run -all 
# ** Note: Finished
#    Time: 20 ns  Iteration: 0  Instance: /genericpackagetestbench
# ** Note: testsignal = 5
#    Time: 20 ns  Iteration: 0  Instance: /genericpackagetestbench
# ** Note: testsignal2 = 128
#    Time: 20 ns  Iteration: 0  Instance: /genericpackagetestbench
#  quit 
```

# c# - SQLite，在我的表中插入变量（c#控制台应用程序）

> ID：16056294
> 
> 赞同：3
> 
> 时间：2013-04-17T09:23:49.450
> 
> 标签：c#, sql, .net, sql-server, sqlite

```
string TheName = "David";
string UserTable = "INSERT INTO USER (name) values (TheName)";
SQLiteCommand command2 = new SQLiteCommand(UserTable, m_dbConnection);
command2.ExecuteNonQuery(); 
```

我想知道是否可以在我的 SQLite 表中插入一个变量（如示例代码中的 TheName），如果它是你怎么能做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:28:46.803

您需要参数化查询：

```
command2.CommandText = "INSERT INTO User (name) VALUES(@param1)";
command2.CommandType = CommandType.Text;
command2.Parameters.Add(new SQLiteParameter("@param1", TheName)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:27:16.327

使用参数化查询：

```
string UserTable = "INSERT INTO USER (name) values ($TheName)";
command2.Parameters.AddWithValue("$TheName", TheName); 
```

[http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/](http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/)

# solr - HTTP 状态 404 - 路径中缺少核心名称

> ID：16056297
> 
> 赞同：0
> 
> 时间：2013-04-17T09:24:01.773
> 
> 标签：solr

我已经在 Windows 7 上安装了 apache solr-3.5。我可以看到 solr 的主页，但是在单击管理链接时，我得到 HTTP 状态 404 - 路径异常中缺少核心名称。我已经在 web 中输入了我的 solr 主页.xml 但我仍然遇到同样的错误

请给我一些解决方案

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T14:25:43.537

这肯定会帮助你。它谈到在 Windows Server 2008 上安装 Solr，但我已经使用相同的指南在 Win7 上安装了 Solr。它是我能找到的唯一详细资源。希望它可以帮助你和其他人。谢谢你

[http://www.nopaccelerate.com/wiki/installing-apache-solr/](http://www.nopaccelerate.com/wiki/installing-apache-solr/)

和

[http://www.nopaccelerate.com/wiki/configuring-apache-solr-to-use-with-nopaccelerate/](http://www.nopaccelerate.com/wiki/configuring-apache-solr-to-use-with-nopaccelerate/)

谢谢，一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:34:03.227

看看这个教程..

[在 Windows-7 上安装 SOLR（分步）](http://moderntone.blogspot.in/2013/02/step-by-step-tutorial-on-installation.html)

# python - Runge-Kutta RK4 不比 Verlet 好？

> ID：16056300
> 
> 赞同：6
> 
> 时间：2013-04-17T09:24:13.873
> 
> 标签：python, matplotlib, runge-kutta, verlet-integration

我只是在游戏中测试几种轨道动力学的集成方案。我在这里采用了恒定和自适应步骤的 RK4 [http://www.physics.buffalo.edu/phy410-505/2011/topic2/app1/index.html](http://www.physics.buffalo.edu/phy410-505/2011/topic2/app1/index.html)

我将它与简单的verlet集成（和欧拉，但它的性能非常差）进行了比较。看起来恒定步长的RK4并不比verlet好。具有自适应步长的 RK4 更好，但不是很多。我想知道我是不是做错了什么？或者说 RK4 比 verlet 优越得多是什么意思？

认为 Force 每 RK4 步骤评估 4 次，但每个 verlet 步骤仅评估 1 次。因此，为了获得相同的性能，我可以将 verlet 的 time_step 设置为小 4 倍。使用 4 倍更小的时间步长，verlet 比具有恒定步长的 RK4 更精确，并且几乎可以与具有附加步长的 RK4 相媲美。

见图片： [https ://lh4.googleusercontent.com/-I4wWQYV6o4g/UW5pK93WPVI/AAAAAAAAA7I/PHSsp2nEjx0/s800/kepler.png](https://lh4.googleusercontent.com/-I4wWQYV6o4g/UW5pK93WPVI/AAAAAAAAA7I/PHSsp2nEjx0/s800/kepler.png)

10T 表示 10 个轨道周期，后面的数字 48968,7920,48966 是需要的力评估数

python代码（使用pylab）如下：

```
from pylab import * 
import math

G_m1_plus_m2 = 4 * math.pi**2

ForceEvals = 0

def getForce(x,y):
    global ForceEvals
    ForceEvals += 1
    r = math.sqrt( x**2 + y**2 )
    A = - G_m1_plus_m2 / r**3
    return x*A,y*A

def equations(trv):
    x  = trv[0]; y  = trv[1]; vx = trv[2]; vy = trv[3];
    ax,ay = getForce(x,y)
    flow = array([ vx, vy, ax, ay ])
    return flow

def SimpleStep( x, dt, flow ):
    x += dt*flow(x)

def verletStep1( x, dt, flow ):
    ax,ay = getForce(x[0],x[1])
    vx   = x[2] + dt*ax; vy   = x[3] + dt*ay; 
    x[0]+= vx*dt;        x[1]+= vy*dt;
    x[2] = vx;        x[3] = vy;

def RK4_step(x, dt, flow):    # replaces x(t) by x(t + dt)
    k1 = dt * flow(x);     
    x_temp = x + k1 / 2;   k2 = dt * flow(x_temp)
    x_temp = x + k2 / 2;   k3 = dt * flow(x_temp)
    x_temp = x + k3    ;   k4 = dt * flow(x_temp)
    x += (k1 + 2*k2 + 2*k3 + k4) / 6

def RK4_adaptive_step(x, dt, flow, accuracy=1e-6):  # from Numerical Recipes
    SAFETY = 0.9; PGROW = -0.2; PSHRINK = -0.25;  ERRCON = 1.89E-4; TINY = 1.0E-30
    scale = flow(x)
    scale = abs(x) + abs(scale * dt) + TINY
    while True:
        x_half = x.copy();  RK4_step(x_half, dt/2, flow); RK4_step(x_half, dt/2, flow)
        x_full = x.copy();  RK4_step(x_full, dt  , flow)
        Delta = (x_half - x_full)
        error = max( abs(Delta[:] / scale[:]) ) / accuracy
        if error <= 1:
            break;
        dt_temp = SAFETY * dt * error**PSHRINK
        if dt >= 0:
            dt = max(dt_temp, 0.1 * dt)
        else:
            dt = min(dt_temp, 0.1 * dt)
        if abs(dt) == 0.0:
            raise OverflowError("step size underflow")
    if error > ERRCON:
        dt *= SAFETY * error**PGROW
    else:
        dt *= 5
    x[:] = x_half[:] + Delta[:] / 15
    return dt    

def integrate( trv0, dt, F, t_max, method='RK4', accuracy=1e-6 ):
    global ForceEvals
    ForceEvals = 0
    trv = trv0.copy()
    step = 0
    t = 0
    print "integrating with method: ",method," ... "
    while True:
        if method=='RK4adaptive':
            dt = RK4_adaptive_step(trv, dt, equations, accuracy)
        elif method=='RK4':
            RK4_step(trv, dt, equations)
        elif method=='Euler':
            SimpleStep(trv, dt, equations)
        elif method=='Verlet':
            verletStep1(trv, dt, equations)
        step += 1
        t+=dt
        F[:,step] = trv[:]
        if t > t_max:
            break
    print " step = ", step

# ============ MAIN PROGRAM BODY =========================

r_aphelion   = 1
eccentricity = 0.95
a = r_aphelion / (1 + eccentricity)
T = a**1.5
vy0 = math.sqrt(G_m1_plus_m2 * (2 / r_aphelion - 1 / a))
print " Semimajor axis a = ", a, " AU"
print " Period T = ", T, " yr"
print " v_y(0) = ", vy0, " AU/yr"
dt       = 0.0003
accuracy = 0.0001

#                 x        y     vx  vy
trv0 = array([ r_aphelion, 0,    0, vy0 ])             

def testMethod( trv0, dt, fT, n, method, style ):
    print " "
    F = zeros((4,n));
    integrate(trv0, dt, F, T*fT, method, accuracy);
    print "Periods ",fT," ForceEvals ",  ForceEvals
    plot(F[0],F[1], style ,label=method+" "+str(fT)+"T "+str(  ForceEvals ) ); 

testMethod( trv0, dt, 10, 20000  , 'RK4', '-' )
testMethod( trv0, dt, 10, 10000  , 'RK4adaptive', 'o-' )
testMethod( trv0, dt/4, 10, 100000, 'Verlet', '-' )
#testMethod( trv0, dt/160, 2, 1000000, 'Euler', '-' )

legend();
axis("equal")
savefig("kepler.png")
show(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-14T01:43:57.107

我知道这个问题现在已经很老了，但这实际上与其中一种方法相对于另一种方法的“优越性”无关，或者与您对它们的编程无关——它们只是擅长不同的事情。（所以不，这个答案实际上与代码无关。甚至与编程有关。更多的是关于数学，真的......）

Runge-Kutta 系列求解器非常擅长以相当高的精度解决几乎任何问题，并且在自适应方法的情况下，性能非常好。但是，它们不是[辛](http://en.wikipedia.org/wiki/Symplectic_integrator)的，这意味着它们在问题中不保存能量。

另一方面，Verlet 方法可能需要比 RK 方法小得多的步长以最小化解中的振荡，但该方法是辛的。

你的问题是节能；在任意转数之后，行星体的总能量（动能 + 势能）应该与初始条件下相同。这对于 Verlet 积分器是正确的（至少作为时间窗平均值），但对于 RK 系列的积分器则不会 - 随着时间的推移，RK 求解器将建立一个不会减少的误差，由于能量迷失在数值积分中。

为了验证这一点，请尝试在每个时间步保存系统中的总能量，并绘制它（您可能需要进行十次以上的旋转才能注意到差异）。RK 方法的能量将稳定下降，而 Verlet 方法将给出围绕恒定能量的振荡。

如果这是您需要解决的确切问题，我还推荐使用 Kepler 方程，它可以解析地解决这个问题。即使对于具有许多行星、卫星等的相当复杂的系统，行星际相互作用是如此微不足道，以至于您可以对每个物体及其旋转中心单独使用开普勒方程，而不会损失太多精度。但是，如果您正在编写游戏，您可能真的对其他问题感兴趣，这只是一个学习示例 - 在这种情况下，请阅读各种求解器系列的属性，然后选择一个适合你的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T20:43:00.390

我不知道我是否会回答你的具体问题，但这是我的想法。

您已经定义了一个非常简单的力模型。在这种情况下，保存一些步骤可能不会提高性能，因为在 RK4 中计算新步骤可能需要更长的时间。如果力模型比较复杂，带有自适应步长的 RK4 可以为您节省很多时间。从你的情节我认为 Verlet 也偏离了正确的解决方案，一个重复的椭圆。

对于轨道力学，您还可以尝试 RK7(8) 自适应积分器、Adams-Bashforth 多步法或 Gauss Jackson 方法。这是一篇展示其中一些方法的论文：http: [//drum.lib.umd.edu/bitstream/1903/2202/7/2004-berry-healy-jas.pdf](http://drum.lib.umd.edu/bitstream/1903/2202/7/2004-berry-healy-jas.pdf)

最后，如果你的力模型总是一个简单的中心力，就像这个例子一样，看看开普勒方程。解决它是精确的，快速的，你可以跳到任意时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:08:53.960

好的，最后，我使用了自适应 Runge-Kutta-Fehlberg (RKF45)。有趣的是，当我要求更高的精度（最佳为 1E-9 ）时，它更快（需要更少的步骤），因为在较低的精度（ <1e-6 ）下，解决方案是不稳定的，并且大量迭代被分散的步骤（步骤太长且不精确）。当我要求更好的精度（ 1E-12 ）时，它需要更多的步骤，因为时间步骤更短。

对于圆形轨道，精度可以降低到 (1e-5)，速度增益高达 3 倍，但是当我需要模拟高度偏心（椭圆轨道）时，我更喜欢保持安全的 1E-9 精度。

如果有人会解决类似问题，则有代码 [http://www.openprocessing.org/sketch/96977](http://www.openprocessing.org/sketch/96977) 它还显示了模拟一个时间单位的轨迹长度需要多少力评估

# java - 在 Mule 中调用一个类的 main 方法

> ID：16056301
> 
> 赞同：0
> 
> 时间：2013-04-17T09:24:15.693
> 
> 标签：java, automation, mule, invoke, main-method

我有一个 Java 类，每次运行程序时都会将数据写入文件。Java 类是在 Mule 项目中编写的，我想使用 mule 流来调用这个 Java 类。所以我的问题是 - 我如何在 Mule ESB 的 Flow 中调用/启动类的主要方法？整个目标是自动化这个过程。流程还有其他组件，调用 Java 类的 main 方法将成为流程的一部分。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:24:33.220

我能想到2个选择——

（1）制作一个组件并从那里调用您的任何其他类。或者，如果您可以将现有类修改为 Callable 并实现 onCall 方法并从那里调用您的业务方法。

```
<component class="com.test.TestClass" />

public class TestClass implements Callable {
public Object onCall(MuleEventContext eventContext) throws Exception {
        //call business method from here.
    }
} 
```

(2) 使用groovy进行java调用。

```
<scripting:component>
            <scripting:script engine="groovy">
                // Your java code here
            </scripting:script>
        </scripting:component> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:45:37.893

您可以添加一个 Java 组件并指定要调用的类，记住一件事，如果流程正在处理 bean，那么以 bean 作为参数的方法将像这样调用

```
public User process(User user) {
    //call your main method here
    return user;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T13:06:46.843

只需使用 Invoke 方法（Mule 包括：[https](https://docs.mulesoft.com/mule-user-guide/v/3.8/invoke-component-reference) ://docs.mulesoft.com/mule-user-guide/v/3.8/invoke-component-reference ）。虽然 Groovy 编写脚本通常不支持 Spring，并且如果您要运行的类是 SpringConnected（带有所有注释等），则您无法通过 Groovy 执行此操作（仅通过使用脚本控制）。

如此简单：`<invoke object-ref="DirectoryChecker" method="run" doc:name="Invoke DirectoryChecker"/>`完全足够了。

确保将`YouClass`其初始化为 bean。

```
<spring:bean id="YouClass" name="YouClass" class="you.package"/> 
```

就这样。

检查。它正在工作。

# ios - 如何解析不同的字符串日期

> ID：16056310
> 
> 赞同：0
> 
> 时间：2013-04-17T09:24:37.190
> 
> 标签：ios, xcode, nsdate, nsxmlparser, nsdateformatter

在我的应用程序中，我使用 NSXMLParser 来解析提要。我也有一个 pubDate，但有许多不同的字符串日期格式：

```
 1\. 2013-04-17T12:00:24
 2\. Wed, 17 Apr 2013 10:15 +0300
 3\. Wed, 17 Apr 2013 11:07:01 +0200
 4\. 11/04/2013 18:10:10 
```

这是我的代码：

```
 NSDateFormatter *inputFormatter = [[NSDateFormatter alloc]init];
    assert(inputFormatter != nil);
    NSLocale *loacle = [[NSLocale alloc]initWithLocaleIdentifier:@"en_US_POSIX"];
    assert(loacle != nil);

    [inputFormatter setLocale:loacle];
    [inputFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];

    [inputFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

   NSString *dateString = [NSString stringWithFormat:@"%@",currentPubDate];
   NSDate *inputDate = [inputFormatter dateFromString:dateString];

    NSLocale *hebrow = [[NSLocale alloc]initWithLocaleIdentifier:@"he_IL"];
    NSDateFormatter *outputFormatter = [[NSDateFormatter alloc]init];
    outputFormatter.locale = hebrow;
    [outputFormatter setDateStyle:NSDateFormatterFullStyle];
    [outputFormatter setTimeStyle:NSTimeZoneNameStyleShortStandard];
    NSString *outputDate = [outputFormatter stringFromDate:inputDate]; 
```

问题是：如何调整上述所有内容的日期格式？有什么功能还是我应该手动执行？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:41:21.117

这不是一个理想的解决方案，但应该可以工作，因为没有关于时区的任何信息的 dateString 是 UTC。

```
NSString *dateString = @"11/04/2013 18:10:10";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
NSLocale *enUSPOSIX = [[NSLocale alloc]initWithLocaleIdentifier:@"en_US_POSIX"];

[dateFormatter setLocale:enUSPOSIX];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *date = nil;
NSError *error = nil;
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeDate
                                                           error:&error];
NSArray *matches = [detector matchesInString:dateString
                                     options:0
                                       range:NSMakeRange(0, [dateString length])];
for (NSTextCheckingResult *match in matches) {

    if (match.date) {
        date = match.date;
        break;
    }
}

if (!date) {
    NSArray *dateFormats = @[@"yyyy-MM-dd'T'HH:mm:ss",
                             @"EEE, dd MMM yyyy HH:mm Z",
                             @"EEE, dd MMM yyyy HH:mm:ss Z",
                             @"dd/MM/yyyy HH:mm:ss"];

    for (NSString *dateFormat in dateFormats) {
        [dateFormatter setDateFormat:dateFormat];
        date = [dateFormatter dateFromString:dateString];
        if (date) {
            break;
        }
    }
}

NSLocale *hebrowLocale = [[NSLocale alloc]initWithLocaleIdentifier:@"he_IL"];
[dateFormatter setLocale:hebrowLocale];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
[dateFormatter setDateStyle:NSDateFormatterFullStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];

NSString *formattedDateString = [dateFormatter stringFromDate:date];
NSLog(@"DateString : %@",formattedDateString); 
```

# javascript - "javascript:;" 和有什么区别 和 href 属性中的“javascript:”？

> ID：16056312
> 
> 赞同：5
> 
> 时间：2013-04-17T09:24:40.160
> 
> 标签：javascript, html

"javascript:;" 和有什么区别 和锚`href`属性中的“javascript：”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T09:27:22.110

与空 Javascript 文件和仅带有`;`.

没有：

```
eval("");
//undefined
eval(";");
//undefined 
```

见[http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1](http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1)

> 当程序从左到右解析时，遇到输入令牌流的结尾，并且解析器无法将输入令牌流解析为单个完整的 ECMAScript 程序，则在末尾自动插入分号输入流。

因此，空文件将是一个无效的程序，然后自动插入分号，它就等于只有一个分号的程序。

我突然想到，这是另一个证明 JSON 不是 Javascript 子集的情况：空 JSON 无效：

```
JSON.parse("");
//SyntaxError: Unexpected end of input
eval("");
//undefined 
```

:P

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T09:26:34.000

`javascript:`表示可用于评估 JavaScript 的伪协议。因此，它后面的单个分号等于一个脚本，它只包含`;`一个空表达式，什么都不做。`javascript:`之后没有任何其他内容是一个空脚本，也什么都不做。在这两种情况下，返回值都很`undefined`重要，因为`javascript:`返回其他内容的 url 会导致页面内容被它返回的内容替换。

*但是，您根本*不应该使用`javascript:`url - 它们已被弃用。使用and 一个有用的 href 或者如果没有非 js 版本的链接。不过，请记住在这种情况下要防止默认事件。*`onclick``#`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:26:48.060

`javascript:`告诉有一个 javascript 语句来而不是另一个页面的链接。是`;`javascript 语句。但是，`;`不会执行任何操作，所以这是一个空操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:28:22.460

`javascript:;`带有`javascript:`和附加的分号。除此之外，没有任何区别。*

# php - 在 MAMP 上启用 PHP 信号量函数

> ID：16056316
> 
> 赞同：2
> 
> 时间：2013-04-17T09:25:09.600
> 
> 标签：php, mamp

我正在尝试使用以下教程创建消息队列；

[http://www.ebrueggeman.com/blog/creating-a-message-queue-in-php](http://www.ebrueggeman.com/blog/creating-a-message-queue-in-php)

我遇到的问题是我收到以下错误；

```
ErrorException [ Fatal Error ]: Call to undefined function msg_get_queue() 
```

我发现这是因为我的 PHP 安装缺少一些信号量函数，我应该使用以下参数 --enable-sysvmsg 重新编译我的 PHP 安装。

我在 Lion OSX 上运行 MAMP，实际上不知道从哪里开始。我在 MAMP 论坛上找不到任何有关如何执行此操作的信息或有关为 OSX 启用信号量功能的更多信息。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-23T09:52:13.837

正如您在问题中所说，您需要编译一个`Semaphore`启用的 php 版本。步骤是：

1.  下载`PHP`
2.  使用所需的 --enable-xxx 参数执行`./configure`（我使用的列表如下所述）。这并不容易，您可能还需要安装一些 brew 包（我需要安装`map-uw`和`libiodbc`）。
3.  执行`make`
4.  用新编译的版本替换`MAMP`版本

`./configure`我使用的参数：

```
./configure \
--prefix=/Applications/MAMP/bin/php/php5.4.45 \
--exec-prefix=/Applications/MAMP/bin/php/php5.4.45 \
--mandir=/usr/share/man \
--infodir=/usr/share/info \
--sysconfdir=/Applications/MAMP/bin/php/php5.4.45/conf \
--enable-cli \
--with-config-file-path=/Applications/MAMP/bin/php/php5.4.45/conf \
--with-libxml-dir=/Applications/MAMP/Library \
--with-openssl=/Applications/MAMP/Library \
--with-kerberos=/usr \
--with-zlib=/Applications/MAMP/Library \
--with-zlib-dir=/Applications/MAMP/Library \
--enable-bcmath \
--with-bz2=/Applications/MAMP/Library \
--enable-calendar \
--with-curl=/Applications/MAMP/Library \
--enable-dba \
--enable-exif \
--enable-ftp \
--with-gd \
--enable-gd-native-ttf \
--with-icu-dir=/Applications/MAMP/Library \
--with-iodbc=/Applications/MAMP/Library \
--enable-mbstring=all \
--enable-mbregex \
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--without-pear \
--with-pdo-mysql=mysqlnd \
--with-mysql-sock=/var/mysql/mysql.sock \
--enable-shmop \
--enable-soap \
--enable-pcntl \
--enable-sockets \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--enable-wddx \
--with-xmlrpc \
--with-iconv=/Applications/MAMP/Library \
--with-xsl=/Applications/MAMP/Library \
--enable-zip \
--with-kerberos \
--enable-intl \
--with-pcre-regex \
--with-freetype-dir=/Applications/MAMP/Library \
--with-jpeg-dir=/Applications/MAMP/Library \
--with-png-dir=/Applications/MAMP/Library \
--with-t1lib=/Applications/MAMP/Library \
--with-gettext=shared,/Applications/MAMP/Library \
--with-mcrypt=shared,/Applications/MAMP/Library \
--enable-opcache \
--enable-cgi \
--with-libexpat-dir=/Applications/MAMP/Library \
--with-mhash 
```

# javascript - javascript中的长数字日期格式

> ID：16056317
> 
> 赞同：0
> 
> 时间：2013-04-17T09:25:10.520
> 
> 标签：javascript, jquery, asp.net-mvc-4, kendo-ui

在我的应用程序中，我以 json 格式从控制器返回一些数据，当这些数据来自控制器时，我的 DateTime 字段具有下一个格式：`"/Date(1366146000000)/"` 在控制器中，发送前的此字段具有格式：`{4/17/2013 12:00:00 AM}`

Kendo Ui datepicker 显示该日期很好，但是当我想更新某个对象并且我不想用该日期更新字段时，解析时会出现一些问题。

当我更改日期时`kendo ui datepicker`，日期格式也会更改，但如果我不更改，它仍然具有那个长格式。也许有一些解决方案可以防止以这种格式返回，或者`("/Date(1366146000000)/")`以另一种格式从 kendo ui datePicker 返回该日期，例如：`"Wed Apr 17 00:00:00 UTC+0300 2013"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:53:23.643

**免责声明：**这可能不是最好的答案，但这对我有用。

> 如何将 13 位数字：“1366146000000”解析为格式：“Wed Apr 17 00:00:00 UTC+0300 2013”​​？

您将需要在我提出的解决方案中使用 jquery UI。我在某个地方得到了这个，我忘记了在哪里，所以我不能给那个人适当的信任。无论如何，这是我进行了微小改进的代码：

```
function getProperDate(date) {
    if (date == null) return null;
    return new Date(parseInt(date.substr(6)));
}
function getFormattedDate(dt, format) {
    return $.datepicker.formatDate(
        (format==null || format=='' ? 'M dd, yy' : format), 
        getProperDate(dt));
} 
```

然后，您可以将`1366146000000`预期为有效日期值的 传递给`getProperDate`。

# php - htaccess 中的规则冲突

> ID：16056318
> 
> 赞同：0
> 
> 时间：2013-04-17T09:25:11.920
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, rewrite

我正在与我的班级一起处理一个似乎不起作用的 htaccess 文件的项目。我有这个：

```
SetEnvIf Request_URI ^ root=/myroot/

RewriteRule ^(assets|inc) - [L]
RewriteRule ^section[/]?$ %{ENV:root}section/index    
RewriteRule ^section/function/(.*)$ %{ENV:root}index.php?type=section&action=function [L]
RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^section/(.*)$                      %{ENV:root}index.php?type=section&action=view [L]
RewriteRule ^index\.php$ - [L] 
```

其实我不明白的地方有三点：

如果我将 url 查询为`/section/function/`，我应该得到 /myroot/index.php?type=section&action=function 但我进入`localhost/section/function`浏览器，导致错误。url 是否双向翻译：myroot/index.php?type=section&action=function 在浏览器中显示为`/section/function/`. 如果我删除最后一行，我会得到空白错误页面，为什么会这样？

编辑 ：

如此符合 Olaf Dietsche 所说的，我将规则更改为

SetEnvIf Request_URI ^ root=/myroot/

```
RewriteRule ^(assets|inc) - [L]
RewriteRule ^section[/]?$ %{ENV:root}section/index    
RewriteRule ^section/function/(.*)$ %{ENV:root}?type=section&action=function [L]
RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^section/(.*)$                      %{ENV:root}?type=section&action=view [L]
RewriteRule ^index\.php$ - [L] 
```

但是当我单击时`<a href="section/somefunction"></a>`，我会看到一个页面`localhost/section/some function`。我真的不知道怎么回事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:43:30.747

首先，你必须有

```
RewriteEngine on 
```

在 .htaccess 中以使规则生效。

规则*重写*请求，但不*重定向*客户端。两者的区别在于

*   **rewrite**将另一个页面的内容发送给客户端，而不告诉客户端。客户端认为，它获得了请求页面的内容。
*   **重定向**向客户端发送另一个 URL，导致客户端使用此 URL 发出新请求。客户端知道（并显示在浏览器的栏中）它收到了另一个页面的内容。

如果要重定向客户端，必须[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)在`RewriteRule`

```
RewriteRule ^section/function/(.*)$ %{ENV:root}index.php?type=section&action=function [R,L] 
```

**更新**：

您必须在替换之前删除`%{ENV:root}`，因为 URL 是 eg`/index.php`而不是`/myroot/index.php`

```
RewriteRule ^section[/]?$ /section/index    
RewriteRule ^section/function/(.*)$ /index.php?type=section&action=function [L]
RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^section/(.*)$ /index.php?type=section&action=view [L]
RewriteRule ^index\.php$ - [L] 
```

# r - 运行命令的状态为 1

> ID：16056322
> 
> 赞同：2
> 
> 时间：2013-04-17T09:25:25.943
> 
> 标签：r

我试图在 R 2.15.2 中运行命令

```
rsaga.geoprocessor(lib="ta_channels", module=0, param=list(ELEVATION="DEMflt.sgrd", CHNLNTWRK=paste("channels", i, ".sgrd", sep=""), CHNLROUTE="channel_route.sgrd", SHAPES="channels.shp", INIT_GRID="DEMflt.sgrd", DIV_CELLS=3, MINLEN=40), show.output.on.console=FALSE) 
```

我不断收到这个警告：

```
 Warning message:
running command '"C:/Users/Nenad/Documents/R/win-library/2.15/RSAGA/SAGA-GIS/saga_cmd.exe" ta_preprocessor 2 -DEM "DEM1.sgrd" -RESULT "DEMflt.sgrd" -MINSLOPE "0.05"' had status 1 
```

我使用 Windows 8 并尝试以管理员身份运行 R。

知道有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-19T18:20:22.010

我知道它有多实际，但我一直在努力处理“***有状态 1*** ”警告。尤其是当我尝试使用`seasonal`包对`X13-ARIMA-SEATS`时间序列进行季节性分解时，这真的很烦人。该`seasonal::seas`命令不起作用，因为在命令中有一个停止条件，当使用 cmd.exe 运行某些东西时返回非零状态。虽然如前所述，“***状态 1*** ”不会阻止命令执行，但对于`seasonal`包它会阻止。

在我的情况下，问题是由 Windows 注册表（Win 10）中的一些错误引起的，进而`System cannot find the path specified`在启动 CMD.exe 或 PowerShell 时引起警告，这`R`也会在内部引起警告。所以要修复它：

1.  按`Win+R`-> 注册表编辑器
2.  在`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Command Processor`文件夹中清理*自动运行*记录的值（它应该是空的）
3.  *对自动运行*执行相同的操作`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor`

***在这些带有“ has status 1*** ”的令人讨厌的警告消失之后，seasonal::seas 开始完美运行。希望它对某人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T08:52:04.223

运行`system`命令`R`可能非常棘手。根据我的经验，只要退出代码不是`127`，那么命令就会运行，您可以使用命令中的`intern=TRUE`开关`system`来获得更详细的输出。如果您再次运行该命令，警告消息可能还包含一个`errmsg`属性以获取更多信息。hth

# java - 无法动态调整 JPanel 的大小

> ID：16056333
> 
> 赞同：0
> 
> 时间：2013-04-17T09:25:55.070
> 
> 标签：java, swing, jpanel, grouplayout

我正在使用`GroupLayout`并且我有一个`MainPanel`. 在那，我有一个页眉，一个页脚，2个其他`JPanel`s和一个按钮。

每当我单击该按钮时，我都想隐藏/显示**panel1 。**我正在使用**panel1**`setVisibility()`上的功能来做到这一点。**一切工作正常，但每当panel1**被隐藏时，我想调整**panel2**的大小以适应框架的宽度。

 ******我尝试使用`setSize()`and`setPreferredSize()`函数，然后在**mainPanel**`revalidate()`上使用and ，但它仍然不起作用。`repaint()`******

# c# - 请求的集合成员不存在，MS Word

> ID：16056337
> 
> 赞同：2
> 
> 时间：2013-04-17T09:26:12.763
> 
> 标签：c#, ms-word

我试图从 dotnetpearls.com 运行一个示例程序，起初该程序根本不起作用。

显然，我必须以管理员身份运行 VS Express 2012，然后才能启动应用程序对象。之后，下一次出错时，是我尝试从文档中打印出文本。错误发生在`string text = doc.Words[i].Text;`

```
using System;
using Microsoft.Office.Interop.Word;

namespace WordTestProgram
{
    class Program
    {
        static void Main(string[] args)
        {
          Application app = new Application();
          Document doc = app.Documents.Open("C:\\word.doc");

          int count = doc.Words.Count;
          for (int i = 0; i <= count; i++)
          {
               string text = doc.Words[i].Text;
               Console.WriteLine("Word {0} = {1}",i,text);
          }
          app.Quit();
      }
   }
} 
```

我知道我要从中提取数据的文档确实有 3 个单词和 3 个空格。所以它不是空的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T18:12:21.473

我自己找到了答案

代替：`int i = 0; i <= count; i++`

我应该做：`int i = 1; i <= count; i++`

显然数组中的成员 0 为空，程序无法处理。

# sharepoint - 如何将 Hadoop 与 SharePoint 集成？

> ID：16056340
> 
> 赞同：0
> 
> 时间：2013-04-17T09:26:15.593
> 
> 标签：sharepoint, hadoop, integration, bigdata, collaboration

由于我需要以更快的处理速度和更高的可扩展性来存储大量数据，所以我为此选择了 hadoop，但我也需要数据协作，我知道共享点是它的最佳候选者。

请让我知道如何将 sharepoint 与 hadoop 集成。
我知道用于 SQL 服务器与 Hadoop 集成的 SSIS，但我需要实时示例，因此我能够找到它的确切解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-21T15:21:04.887

设置 HDFS NFS 网关并复制 Sharepoint 文件。您还可以使用基本脚本将文件放入 HDFS。它需要使用可以访问 SharePoint 存储库和 HDFS 客户端的边缘节点。

HDFS NFS 网关：[https ://hadoop.apache.org/docs/r2.4.1/hadoop-project-dist/hadoop-hdfs/HdfsNfsGateway.html](https://hadoop.apache.org/docs/r2.4.1/hadoop-project-dist/hadoop-hdfs/HdfsNfsGateway.html)

HDFS PUT：[https ://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-common/FileSystemShell.html#put](https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-common/FileSystemShell.html#put)

如果您已经使用 HDP 并且它与 Ambari 一起安装，那么 HDFS NFS 网关只是通过 Ambari 添加的另一项服务。

# php - 是否有任何算法可以找到它们之间没有公共密钥的数组

> ID：16056345
> 
> 赞同：1
> 
> 时间：2013-04-17T09:26:27.637
> 
> 标签：php, arrays, math

```
$array1 = array (
    '1' => A,
    '2' => B,
    '3' => C
);

$array2 = array (
    '1' => A,
    '4' => B,
    '5' => D
);

$array3 = array (
    '5' => A,
    '6' => E,
    '7' => D
);

$array4 = array (
    '4' => A,
    '7' => B,
    '10' => C
); 
```

我想找出具有所有不同键的数组，而不是一个键在数组之间是通用的。

`$array1 - $array3, $array1 - $array4`是两个没有公共键的组合。算法的输出应该是这些组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:30:26.637

如果两个数组没有共同的键，那么

`count(array_intersect_key($a, $b))`应该`0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:44:54.710

要从两个数组中查找唯一键，您可以使用它

```
$newArray = array_diff_key($targetArray, $compArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:59:43.817

就像是：

```
function test() {
    $arrays = func_get_args();
    for($i = 0; $i < count($arrays); $i++) {
        if (($i + 1) == count($arrays))
        break;
        for($k = $i; $k < count($arrays); $k++) {
            if (count(array_intersect_key($arrays[$i], $arrays[$k])) == 0){
                var_dump($arrays[$i]);
                var_dump($arrays[$k]);
                printf('<hr />');
            }
        }   
    }
}
print_r(test($array1, $array2, $array3, $array4)); 
```

应该能解决你的问题。

# c# - 参数中的标签控制

> ID：16056346
> 
> 赞同：0
> 
> 时间：2013-04-17T09:26:28.780
> 
> 标签：c#, winforms, label

我正在尝试发送按摩并更改标签的颜色。

```
private void updateStatus(string massageText, Label label)
{
    txtStatus.Text = massageText;
    label.BackColor = Color.Red;
 } 
```

当我尝试应用它时；

```
updateStatus("Level-1 Complete", Label1);
updateStatus("Level-2 Complete", Label2); 
```

它给出了错误

> 'Taal.Form1.updateStatus(string, System.Windows.Forms.Label)' 的最佳重载方法匹配有一些无效参数 D:\Taal\Taal\Form1.cs"

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:44:09.653

试试看，下面的方法可以重用于任何表单控件

```
private void updateStatus(string massageText, System.Windows.Forms.Control control)
{
    txtStatus.Text = massageText;
    control.BackColor = Color.Red;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:47:08.360

实际上我的标签在状态栏上所以在评论的帮助下我已经纠正了它。谢谢

```
private void updateStatus(string massageText,ToolStripLabel label)
        {
            txtStatus.Text = massageText;
            label.BackColor = Color.Red;

        } 
```

# mysql - bash中的子shell MySQL查询

> ID：16056348
> 
> 赞同：0
> 
> 时间：2013-04-17T09:26:31.207
> 
> 标签：mysql, bash, shell, ubuntu, subshell

我正在尝试在 Ubuntu bash 中的循环中设置变量，该变量正在从数据库中获取记录集，但该变量设置为之前的值。这是一个代码：

```
#!/bin/bash
PREV_FILE_PATH="127"

while true
do
    echo "$PREV_FILE_PATH"
    mysql -h$DB_HOST -u $DB_USER -p$DB_PASS $DB_NAME --skip-column-names --default-character-set=UTF8  -e "here is a query" | while read "here is getting variables from recordset";

    do

    PREV_FILE_PATH="777"

    done

done 
```

这段代码每次都会打印：

> 127 127 127

但是当我替换这个块时-：

`mysql -h$DB_HOST -u $DB_USER -p$DB_PASS $DB_NAME --skip-column-names --default-character-set=UTF8 -e "here is a query" | while read "here is getting variables from recordset";`

`while true`在循环结束时使用 just and break 它可以正常工作并打印：

> 127 777 777 777

脚本创建一些子shell 并在该子shell 中运行该MySQL 查询。那么我应该怎么做才能让脚本改变那个变量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T04:15:11.303

正如您所指出的，问题是由于创建了一个子shell，该子shell 是由将`mysql`命令的输出通过管道传输到`while`循环引起的。一个简单的例子：

```
PREV_FILE_PATH=127
echo test | while read _; do
   PREV_FILE_PATH=777
done
echo $PREV_FILE_PATH
# output: 127 
```

由于您使用的是 BASH，因此您可以将`mysql`命令从管道移动到通过 STDIN[重定向](http://tldp.org/LDP/abs/html/redircb.html)馈送到循环的[替代进程](http://tldp.org/LDP/abs/html/process-sub.html)。使用前面的简单示例：`while`

```
PREV_FILE_PATH=127
while read _; do
   PREV_FILE_PATH=777
done < <(echo test)
echo $PREV_FILE_PATH
# output: 777 
```

因此，要修复您的代码，您需要以`mysql`与我在上面移动命令相同的方式移动`echo`命令：

```
while read "here is getting variables from recordset"
do
   PREV_FILE_PATH="777"
done < <(mysql -h$DB_HOST -u $DB_USER [..remaining options..]) 
```

请注意，进程替换 via`<()`是 BASH 主义，不符合 POSIX。

# sql-server - 在不分组的情况下重写“group by”LINQ

> ID：16056350
> 
> 赞同：1
> 
> 时间：2013-04-17T09:26:32.427
> 
> 标签：sql-server, linq, visual-studio-lightswitch

我正在开发一个 Lightswitch 应用程序，需要在屏幕上查看一些聚合数据。但是 LightSwitch 不支持“group by”和“sum”，所以我的问题是是否可以在不使用它的情况下重写它。

```
partial void RuleEntriesByUserSaveId_PreprocessQuery(int? UserSaveId, ref IQueryable<RuleEntry> query)
{
   query = query.Where(re => re.Revision == null || re.Revision == UserSaveId)
                .GroupBy(re => re.Key)
                .Select(g => g.FirstOrDefault(x => x.Revision != null) ?? g.First());
} 
```

我知道我可以制作 WCF RIA 服务并使用它，但我宁愿不陷入这种麻烦。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:24:56.573

深入研究这个问题，很明显**不能**在 PreprocessQuery 函数中进行分组。如果您需要聚合数据，则必须使用某种数据层抽象。我设法通过在[本指南](http://www.c-sharpcorner.com/UploadFile/raj1979/how-to-use-wcf-ria-service-in-lightswitch-2012/)中添加 WCF RIA 服务来做到这一点。它需要一些时间来理解，但最终绝对值得付出努力！

# javascript - Highcharts：如何减少标签宽度/高度

> ID：16056353
> 
> 赞同：1
> 
> 时间：2013-04-17T09:26:39.487
> 
> 标签：javascript, highcharts

我正在尝试减小栏的宽度。我通过使用 pointWidth 属性实现了同样的效果。但是，标签“1 page”前后的内边距过高。我想压缩类似于第二张图片的整个图表。

有人知道吗？

前：

![在此处输入图像描述](https://i.stack.imgur.com/4eWF9.png)

后：

![在此处输入图像描述](https://i.stack.imgur.com/WCMJ5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:31:07.633

尝试设置图表的高度：

chart: { type: 'bar', height: 250, // 这可以根据类别长度以及图表底部和顶部的一些默认边距来计算 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:35:20.730

您可以设置使用 pointPadding / groupPadding [http://api.highcharts.com/highcharts#plotOptions.bar.groupPadding](http://api.highcharts.com/highcharts#plotOptions.bar.groupPadding) [http://api.highcharts.com/highcharts#plotOptions.bar.pointPadding](http://api.highcharts.com/highcharts#plotOptions.bar.pointPadding)

# android - CGRect 类型的方法 intersects(CGRect, CGRect) 未定义

> ID：16056356
> 
> 赞同：2
> 
> 时间：2013-04-17T09:26:47.513
> 
> 标签：android, cocos2d-iphone

我正在使用cocos2d[教程](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)但是出现以下错误

> CGRect 类型的方法 intersects(CGRect, CGRect) 未定义

在这一行

```
 if (CGRect.intersects(projectileRect, targetRect))
                targetsToDelete.add(target); 
```

有没有`.jar`比[这](https://code.google.com/p/cocos2d-android-1/downloads/detail?name=cocos2d-android.jar&can=2&q)更新的问题或其他问题？因为据我所知，`CGRect.class`不包含该`intersects`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T03:19:55.167

请转到此链接[https://code.google.com/p/cocos2d-android-1/issues/detail?id=99](https://code.google.com/p/cocos2d-android-1/issues/detail?id=99) 并下载 Cocos2DSimpleGameTut1，然后将 **“Cocos2DSimpleGameTut1\Cocos2DSimpleGameTut1\src\org”**复制到您的**src**文件夹

我测试它的工作。

# ibm-mobilefirst - org.apache.http.conn.HttpHostConnectException：连接到 https://jazz.net 被拒绝

> ID：16056361
> 
> 赞同：0
> 
> 时间：2013-04-17T09:26:57.437
> 
> 标签：ibm-mobilefirst

我已经将我的工作灯从 5.0.5 升级到了 5.0.6。当我在 5.0.5 上工作时它运行良好，但是当我在更新版本的工作灯 5.0.6 中使用相同的代码时，它给了我这个错误

响应 [/apps/services/api/RTMLight/common/query] 成功：/- *secure- {"responseID":"2","errors":["运行时：Http 请求失败：org.apache.http.conn。 HttpHostConnectException: 连接到 https://jazz.net 被拒绝"],"isSuccessful":false,"warnings":[],"info":[]}* /

worklight.js（第 1112 行）

过程调用错误。运行时：Http 请求失败：org.apache.http.conn.HttpHostConnectException：连接到[https://jazz.net](https://jazz.net)被拒绝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:47:47.480

这听起来与 5.0.5 到 5.0.6 之间的任何升级问题无关。从错误消息来看，这似乎与连接问题更相关。

确保您的适配器的 connectionPolicy 使用值为 443 的端口子元素，如下所示：

```
<connectivity>
    <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
        <protocol>https</protocol>
        <domain>jazz.net</domain>
        <port>443</port>
</connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="2" />
</connectivity> 
```

# logging - 使用 .NET Trace，然后使用 NLog 或 log4net 等作为侦听器

> ID：16056362
> 
> 赞同：6
> 
> 时间：2013-04-17T09:27:09.257
> 
> 标签：logging, log4net, nlog, .net-trace

我想避免编写自己的通用日志接口，而是使用内置`Trace`功能，开始时不需要任何日志库。在我讨论日志库之前，我至少在输出窗口中已经有了我的跟踪信息，这在这个开发阶段已经足够了。

然后我想在我的应用程序中添加一个日志库，并`Trace`与一个监听器耦合，而不是编写任何更多的日志代码。

您对这个策略有什么看法，这些日志库或其他（如 Enterprise Library）的跟踪侦听器是否可以快速实施或可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:17:26.120

NLog 提供了一个 TraceListener，它将 Trace/TraceSource 语句路由到 NLog 日志记录系统。

[http://nlog-project.org/2010/09/02/routing-system-diagnostics-trace-and-system-diagnostics-tracesource-logs-through-nlog.html](http://nlog-project.org/2010/09/02/routing-system-diagnostics-trace-and-system-diagnostics-tracesource-logs-through-nlog.html)

AFAIK log4net 没有附带 TraceListener，但编写一个应该很容易：

[如何使用 log4net 记录跟踪消息？](https://stackoverflow.com/questions/515381/how-to-log-trace-messages-with-log4net)

此外，您没有问，但[Common.Logging](http://netcommon.sourceforge.net/)还提供了一种将日志消息（使用 Common.Logging 抽象 API）路由到 TraceListener 的方法，以及在 Common.Logging 支持的平台之间进行桥接。

请参阅此处的高级日志记录任务：

[http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html](http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html)

至于我对你的策略的看法......我认为这个策略似乎是合理的。我认为我会建议您考虑使用 TraceSources 而不是静态 Trace 对象。一个好处是您将拥有更精细的控制粒度（即打开/关闭一些 TraceSource 或将它们设置在不同的级别）。

# iphone - 探索 Sharepoint WebServices 以与 iPhone 集成

> ID：16056363
> 
> 赞同：2
> 
> 时间：2013-04-17T09:27:15.457
> 
> 标签：iphone, ios, sharepoint

我想将共享点服务与我的 iPhone 应用程序集成。我确实想探索 microsoft share point 提供的 Web 服务。我可以从哪里获得这些服务？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:31:06.533

我不确定，但您可以通过构造如下所示的 url 来获取 sharepoint 的服务列表。

```
http://yoursharepointhostname/_vti_bin/lists.asmx 
```

# ios - 创建一个 UIView 子类，它会根据其框架自动排列其子视图？

> ID：16056365
> 
> 赞同：0
> 
> 时间：2013-04-17T09:27:21.153
> 
> 标签：ios, objective-c, xcode, gridview, uiview

我有这样的要求 - 我必须创建一个 UIView 的子类（例如 MyView），其中它将有 4 个子视图（UIImageVeiws，UILabels）排列 2X2。当我创建我的 UIView 子类的对象（MyView 对象）并给出视图中的这 4 个子视图的默认框架应根据我正在传递的超级视图框架进行排列。

如果我调整或重新构建 MyView 对象框架，则 4 个子视图应根据我为其超级视图提供的新框架重新排列（大小、间距、原点）。

我面临实现这一目标的问题，任何人都可以帮助我如何实现这一目标。我的代码对于我的子类应该是通用的。即使我删除了 4 个子视图中的任何一个，其余 3 个视图也应该排列在其整个超级视图中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:51:13.120

您需要实现的方法是`-(void)layoutSubviews`.

每当您的视图框架发生变化时，以及在其他适当的时间，这将被自动调用。在此方法中，您可以访问父视图的大小并布局您拥有的各种子视图。

如果您需要在特定时间强制布局，例如在更改视图的某些属性后，您可以调用`[view setNeedsLayout]`.

# android - Android Google Maps：如何获取屏幕设备中当前显示的区域？

> ID：16056366
> 
> 赞同：18
> 
> 时间：2013-04-17T09:27:21.240
> 
> 标签：android, google-maps, coordinates

有没有办法获取设备上显示的当前区域的坐标？

背景是，我们想要显示“附近”的地方，这些地方存储在我们自己的数据库中。因此，假设用户查看以下地图剪辑：

![在此处输入图像描述](https://i.stack.imgur.com/k0akf.png)

**我们如何获得屏幕的经度/纬度**（或屏幕中间的点和覆盖所有内容的半径？）。请记住，地图的中心通常不是当前位置，因为用户可以移动卡片的中心！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-17T16:04:19.893

使用`map.getProjection().getVisibleRegion()`. 从`VisibleRegion`你可以得到`LatLngBounds`，这很容易使用。您也可以直接尝试使用可能是梯形的区域。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-21T15:44:10.933

我从几个回复中找到了 Google Map API v2 的解决方案：

[stackoverflow#1](https://stackoverflow.com/questions/14588829/travel-distance-between-two-lat-and-long)和 [stackoverflow#2](https://stackoverflow.com/questions/13904505/how-to-get-center-of-map-for-v2-android-maps)

[因此，需要从GoogleMap.OnCameraChangeListener](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener.html)接口实现 Activity

```
    私有静态最终 int REQUEST_CODE_GOOGLE_PLAY_SERVECES_ERROR = -1;
    私有静态最终双 EARTH_RADIOUS = 3958.75; //地球半径；
    私有静态最终 int METER_CONVERSION = 1609;
    私人谷歌地图 mGoogleMap；

    @覆盖
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layout);

        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(mContext);
        如果（状态！= ConnectionResult.SUCCESS）
        {
            对话框对话框 = GooglePlayServicesUtil.getErrorDialog（状态，活动，
                    REQUEST_CODE_GOOGLE_PLAY_SERVECES_ERROR）；
            对话框.show();
            mGoogleMap = null;
        }
        别的
        {
            mGoogleMap = ((SupportMapFragment) getFragmentManager().findFragmentById(
                    R.id.fragment_shops_layout_maps_fragment)).getMap();

            mGoogleMap.setOnCameraChangeListener(this);
        }
    }

```

监听器，在地图缩放时工作。确定在屏幕上显示的地图左下角、右下角、左上角和右上角的位置为LatLng。通过屏幕的最大边和两个点，我们可以得到地图中心的半径。

```
    @覆盖
    公共无效 onCameraChange(CameraPosition cameraPosition)
    {
        // 缩放监听器；
        浮动 zoomLevel = cameraPosition.zoom;
        VisibleRegion visibleRegion = mGoogleMap.getProjection().getVisibleRegion();
        LatLng nearLeft = visibleRegion.nearLeft;
        LatLng nearRight = visibleRegion.nearRight;
        LatLng farLeft = visibleRegion.farLeft;
        LatLng farRight = visibleRegion.farRight;
        double dist_w = distanceFrom(nearLeft.latitude, nearLeft.longitude, nearRight.latitude, nearRight.longitude);
        double dist_h = distanceFrom(farLeft.latitude, farLeft.longitude, farRight.latitude, farRight.longitude);
        Log.d("距离："，"距离宽度：" + dist_w +" 距离高度：" + dist_h);
    }

```

2 点之间的返回距离，以米为单位存储为 2 对位置；

```
    公共双距离从（双 lat1，双 lng1，双 lat2，双 lng2）
    {
        // 返回 2 个点之间的距离，存储为 2 对位置；
        双 dLat = Math.toRadians(lat2 - lat1);
        双 dLng = Math.toRadians(lng2 - lng1);
        双 a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(Math.toRadians(lat1))
                * Math.cos(Math.toRadians(lat2)) * Math.sin(dLng / 2) * Math.sin(dLng / 2);
        双 c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        双距离 = EARTH_RADIOUS * c;
        return new Double(dist * METER_CONVERSION).floatValue();
    }

```

如果你想获得区域半径，屏幕上显示的区域只需要除以 2。

我希望会有用！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-21T17:36:11.050

这会根据地图宽度计算以 km 为单位的无线电：

```
public double calculateVisibleRadius() {
    float[] distanceWidth = new float[1];
    VisibleRegion visibleRegion = map.getProjection().getVisibleRegion();
    LatLng farRight = visibleRegion.farRight;
    LatLng farLeft = visibleRegion.farLeft;
    LatLng nearRight = visibleRegion.nearRight;
    LatLng nearLeft = visibleRegion.nearLeft;
    //calculate the distance between left <-> right of map on screen
    Location.distanceBetween( (farLeft.latitude + nearLeft.latitude) / 2, farLeft.longitude, (farRight.latitude + nearRight.latitude) / 2, farRight.longitude, distanceWidth );
    // visible radius is / 2  and /1000 in Km:
     return distanceWidth[0] / 2 / 1000 ;
} 
```

# android - 如何知道 phonegap 应用程序中存在特定的包/应用程序

> ID：16056373
> 
> 赞同：1
> 
> 时间：2013-04-17T09:27:39.397
> 
> 标签：android, cordova, phonegap-build

我想知道我的设备中是否存在特定的包名称“com.android.abc”。我正在使用 Phonegap，我想通过 phonegap 内部 javascript 函数了解如何做到这一点。

预先感谢

科比

# node.js - Node.js + Socket.io 内存泄漏和最大监听器

> ID：16056379
> 
> 赞同：2
> 
> 时间：2013-04-17T09:27:50.213
> 
> 标签：node.js, socket.io

我是 node.js 初学者。尝试创建简单的聊天应用程序，但有问题。当页面快速刷新 10 次以上时，我有警告：

> （节点）警告：检测到可能的 EventEmitter 内存泄漏。增加了 11 位听众。使用emitter.setMaxListeners() 增加限制。

当我禁用 socket.io 时，此警告消失。所以，socket.io 有问题。如何增加 socket.io 的最大侦听器？或者也许是另一种解决方案？

代码：

```
var http = require('http')
fs = require('fs');

var server = http.createServer(function(req, response) {
    req.setMaxListeners(0);
    var pathname = __dirname + '/index.html'

    fs.readFile(pathname, "binary", function(err, file) {
        if (err) {
            response.writeHead(500, {'Content-Type': 'text/plain'});
            response.end(err);
        } else {
            response.writeHead(200, {'Content-Type': 'text/html'});
            response.write(file, "binary");
            response.end();
       }
    });
});

io = require('socket.io').listen(server);
server.listen(4567); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:28:24.373

我无法重现该问题，但试试这个：

```
io.setMaxListeners(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T17:14:25.563

在代码顶部尝试此操作以增加全局发射器限制

`require('events').EventEmitter.prototype._maxListeners = 100;`

# jquery - 如何仅为第三列 td 设置触发器，而不是网格中的所有 td？

> ID：16056385
> 
> 赞同：0
> 
> 时间：2013-04-17T09:28:13.350
> 
> 标签：jquery, jquery-ui

如何仅为第三列 td 设置触发器，而不是网格中的所有 td？我已经像这样设置了所有 td ：

```
my.contextMenu({
        trigger: '#Grid  td ',
        rightButton: true,
        menu: '#testMenu',
        callback: ctxCallback
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:43:59.677

试试这个：`'#Grid tr>td:nth-child(3n)'`

```
my.contextMenu({
    trigger: '#Grid tr>td:nth-child(3n)',
    rightButton: true,
    menu: '#testMenu',
    callback: ctxCallback
}); 
```

# css - 如何使链接每行一个链接，仅通过css在页脚中？

> ID：16056388
> 
> 赞同：3
> 
> 时间：2013-04-17T09:28:22.090
> 
> 标签：css

我不希望这些链接在网页上彼此相邻显示（仅在`<footer>`元素中，我希望每行一个链接并且我不想使用`<br>`：

```
<footer>
    <p>Copyright © 2013 </p>
    <a href="http://www.link.com/">link.com</a>
    <a href="http://www.link.com/">link.com</a>
    <a href="http://www.link.com/">link.com</a>
    <a href="http://www.link.com/">link.com</a>
    <a href="http://www.link.com/">link.com</a>
</footer> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:30:05.323

将`a`elements`display`属性设置为`block`，这将导致每个元素显示在自己的行上。

```
footer a{
   display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:30:05.250

您可以使它们成为块元素：

```
footer > a { display: block; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:30:49.557

```
a {
    display: block;
} 
```

要仅匹配特定链接，请使用例如`footer a { ... }`或向链接添加类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T09:32:18.377

将页脚标签的样式设置为“块”，这将导致它们占据整行。

```
footer a{
   display: block
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-11T14:02:58.403

```
display:block; float:left; clear:left; 
```

# ios - 在一个应用程序中使用 2 个几乎相同的 SDK

> ID：16056405
> 
> 赞同：0
> 
> 时间：2013-04-17T09:28:58.107
> 
> 标签：ios, xcode, xcode4.5

我收到了一个带有 SDK（*.h *.a 文件）的设备，并用它构建了一个小应用程序。现在我收到了一个执行*几乎*相同操作的新 SDK，并且 *.h 文件与第一个 sdk 相同。

第一个 SDK 用于进行一些测量，而第二个 SDK 则以不同的方式进行。我想比较一下结果。

问题是：我可以将两个 sdk 集成到同一个应用程序中吗？我需要做什么？

我希望我足够清楚。如果需要更多信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:38:56.043

据我了解，答案是否定的。

链接器需要在链接过程中设置函数指针。如果头文件相同，那也意味着函数的签名是相同的。链接器无法区分函数签名并为生成的二进制文件设置不同的函数指针。

# c# - 如何从同一视图执行 3 种不同的控制器方法

> ID：16056408
> 
> 赞同：1
> 
> 时间：2013-04-17T09:29:00.133
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我创建了一个`C# ASP.NET MVC`应用程序。在`Index`视图中，我添加了 3 个按钮，当单击每个按钮时，我想从`Index`控制器执行 3 个不同的功能。

位于主文件夹中的索引视图

```
@using (Html.BeginForm()) {

<input  type="submit" value="b1" />

 <input type="submit" value="b2" />
 <input type="submit" value="b3" />

} 
```

家庭控制器

```
public ActionResult Button1Click()
        {

            return View();
        }

public ActionResult Button3Click()
        {

            return View();
        }

public ActionResult Button2Click()
        {

            return View();
        } 
```

单击每个按钮时，我如何编写代码来执行正确的控制器方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:37:10.590

在 MVC 中，您需要删除将按钮单击链接到操作的 (Asp.Net) 想法。ASP.Net 是[事件驱动](http://en.wikipedia.org/wiki/Event-driven_programming)的 MVC，使用经典的[HTTP REST](https://en.wikipedia.org/wiki/Representational_state_transfer)方法。

所以按钮不是动作，是按钮`submit`动作。*提交*的操作由您的`form`. `POST`因此，使用[HTTP post](https://en.wikipedia.org/wiki/POST_%28HTTP%29)将您的表单数据发送到控制器。

现在还不清楚你想在这里实现什么。您似乎`view`从 each 返回不同的 s `action`。因此，使用 REST 理念，您应该是一个`GET`ing 而不是一个`POST`ing（您正在获取 HTML）。所以最简单的想法是把你的`input`( `submit`) 变成 Anchor 标签，即一个 HTTP GET：

```
@Html.ActionLink("Button1Click") 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:34:57.230

如果您要发布，那么您可以将每个按钮放在一个单独的`form`：

```
@using (Html.BeginForm("Button1Click","Index")) {
    <input  type="submit" value="b1" />
}
@using (Html.BeginForm("Button2Click","Index")) {
    <input  type="submit" value="b2" />
}
@using (Html.BeginForm("Button3Click","Index")) {
    <input  type="submit" value="b3" />
} 
```

如果没有要发布的数据，如您的方法所示，并且您仍然希望所有按钮都在同一个中，`form`那么您可以做一个 ajax 发布（虽然这没有意义，但是嘿，我是基于您的代码给出了您的问题），尽管您可能希望将按钮从提交更改为按钮（`input type="button"`）。

```
$("#b1").click(function(){
    $.post('/index/button1click', function() {
    });
});
$("#b2").click(function(){
    $.post('/index/button2click', function() {
    });
});
$("#b3").click(function(){
    $.post('/index/button3click', function() {
    });
}); 
```

如果你想做一个 GET 而不是一个帖子，那么只需替换`.post`为`.get`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:43:27.870

MVC 不像 Web 表单那样工作，其中您有一个 ButtonClick 事件。您想向控制器发布任何值吗？

如果没有，您可以使用可以像按钮一样设置样式的链接。使用内置 Html 扩展。

```
//For links
@Html.ActionLink("Button1Text","Button1Click")
@Html.ActionLink("Button2Text","Button2Click")
@Html.ActionLink("Button3Text","Button3Click")

//If you need more styling options
<a href="@Html.Action("Button1Click")" class="btn">Button1</a>
<a href="@Html.Action("Button2Click")" class="btn">Button2</a>
<a href="@Html.Action("Button2Click")" class="btn">Button3</a> 
```

这样，您的视图中就不需要任何 javascript 或多个表单。您必须在 CSS 文件中添加一些样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:39:53.833

在同一个表单中对不同按钮执行不同操作的一种简单方法是通过名称来区分按钮单击：

示例代码是：

**看法：**

```
@using (Html.BeginForm("MyMethod","Controller"))
{

<input  type="submit" value="b1" name="b1" />

 <input type="submit" value="b2" name="b2" />
 <input type="submit" value="b3" name="b3" />

} 
```

**控制器：**

```
 [HttpPost]
    public ActionResult MyMethod(string b1, string b2, string b3)
    {
        if (b1 != null)
        {
            return Button1Click();
        }
        else if (b2 != null)
        {
            return Button2Click();
        }
        else
        {
            return Button3Click();
        }
    }

    public ActionResult Button1Click()
    {

        return RedirectToAction("Index");
    }

    public ActionResult Button3Click()
    {

        return RedirectToAction("Index");
    }

    public ActionResult Button2Click()
    {

        return RedirectToAction("Index");
    } 
```

# dll - 如何在 Visual Foxpro 6 中使用 ActiveX DLL？

> ID：16056411
> 
> 赞同：0
> 
> 时间：2013-04-17T09:29:27.417
> 
> 标签：dll, com, activex, visual-foxpro

我有一个用 VB6 开发的 ActiveX COM DLL。如何在 Visual Foxpro 6 中使用它？

请用 Visual Foxpro 6 代码解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:53:33.617

尝试：

```
myObject = CREATEOBJECT("Project.Class")
myObject.RunMethod() 
```

# c++ - 如何自动化弹出模态 HTML 对话框的 IE webapp？

> ID：16056416
> 
> 赞同：11
> 
> 时间：2013-04-17T09:29:36.550
> 
> 标签：c++, internet-explorer, browser-automation, iwebbrowser2

[为清楚起见**再次修订**]

我有一个与网站交互的 C++ 程序。该站点是特定于 IE 的，我的程序也是如此。

我以普通方式连接到正在运行的 IE 实例（*进程外*——参见代码）。一旦获得`IWebBrowser2`，我就可以毫无问题地获得`IHTMLDocument2`并与各个`IHTMLElement`对象进行交互，填写字段并单击按钮。

但是，如果网页有调用[window.showModalDialog](http://msdn.microsoft.com/en-us/library/ie/ms536759%28v=vs.85%29.aspx)的 javascript ，我就会陷入困境：我需要与弹出窗口中的 HTML 元素进行交互，就像其他页面一样；但我似乎无法得到它的`IWebBrowser2`.

弹出窗口总是标题为“网页对话框”，并且是一个`Internet Explorer_TridentDlgFrame`包含`Internet Explorer_Server`. `Internet Explorer_Server`但是当它是一个普通的 IE 实例时，我无法从窗口中获取 IWebBrowser2 。

我可以得到`IHTMLDocument2Ptr`，但是当我尝试得到时，`IWebBrowser2`我得到了`HRESULT`of `E_NOINTERFACE`。

该代码是非常标准的东西，如果它是一个“普通”的 IE 窗口，它就可以正常工作

```
IHTMLDocument2Ptr pDoc;
LRESULT lRes;

/* hWndChild is an instance of class "Internet Explorer_Server" */

UINT nMsg = ::RegisterWindowMessage( "WM_HTML_GETOBJECT" );
::SendMessageTimeout( hWndChild, nMsg, 0L, 0L, SMTO_ABORTIFHUNG, 1000, 
    (DWORD*)&lRes );

LPFNOBJECTFROMLRESULT pfObjectFromLresult = 
    (LPFNOBJECTFROMLRESULT)::GetProcAddress( hInst, "ObjectFromLresult" );
if ( pfObjectFromLresult != NULL )
{
    HRESULT hr;
    hr = (*pfObjectFromLresult)( lRes, IID_IHTMLDocument, 0, (void**)&pDoc );
    if ( SUCCEEDED(hr) ) {
        IServiceProvider *pService;
        hr = pDoc->QueryInterface(IID_IServiceProvider, (void **) &pService);
        if ( SUCCEEDED(hr) )
        {
            hr = pService->QueryService(SID_SWebBrowserApp,
                IID_IWebBrowser2, (void **) &pBrowser);

            // This is where the problem occurs:
            // hr == E_NOINTERFACE
         }
    }
} 
```

万一重要，这是**Vista**和**IE8**。（我强调这一点是因为这两个都在我的代码库中引入了重大更改，这些更改在 XP/IE7 上运行良好。）

再一次，我的目标是获取每个`IHTMLElement`并与之交互。我无权访问我正在自动化的应用程序的源代码。

我正在考虑盲目地将击键发送到`Internet Explorer_Server`窗口，但宁愿不这样做。

**编辑添加：**

有人建议获取子窗口并向它们发送消息，但我很确定这不适用于`Internet Explorer_Server`; 根据 Spy++，没有任何子窗口。（这不是 IE 特定的。Java 小程序似乎也没有子窗口。）

**更新**

在评论中，Simon Maurer 说上面的代码对他有用，为了确保没有错别字，他非常慷慨地在[pastebin](http://pastebin.com/uj1nXG4S)上发布了一个完整的独立应用程序。当我使用他的代码时，它在同一个地方以同样的方式失败，我意识到他认为我想连接到**底层**页面，而不是弹出窗口。所以我编辑了上面的文字以消除这种歧义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:11:58.210

我不知道你为什么想要得到`IServiceProvider`或者`IWebBrowser2`你只是想要`IHTMLElement`'s。您可以通过调用`IHTMLDocument`'`get_all()`方法来获取它们。

此代码片段向您展示了它是如何工作的：

```
#include <Windows.h>
#include <mshtml.h>
#include <Exdisp.h>
#include <atlbase.h>
#include <SHLGUID.h>
#include <oleacc.h>
#include <comdef.h>
#include <tchar.h>

HRESULT EnumElements(HINSTANCE hOleAccInst, HWND child)
{
    HRESULT hr;

    UINT nMsg = ::RegisterWindowMessage(_T("WM_HTML_GETOBJECT"));
    LRESULT lRes = 0;
    ::SendMessageTimeout(child, nMsg, 0L, 0L, SMTO_ABORTIFHUNG, 1000, (PDWORD)&lRes);

    LPFNOBJECTFROMLRESULT pfObjectFromLresult = (LPFNOBJECTFROMLRESULT)::GetProcAddress(hOleAccInst, "ObjectFromLresult");
    if (pfObjectFromLresult == NULL)
        return S_FALSE;

    CComPtr<IHTMLDocument2> spDoc;
    hr = (*pfObjectFromLresult)(lRes, IID_IHTMLDocument2, 0, (void**)&spDoc);
    if (FAILED(hr)) return hr;

    CComPtr<IHTMLElementCollection> spElementCollection;
    hr = spDoc->get_all(&spElementCollection);
    if (FAILED(hr)) return hr;

    CComBSTR url;
    spDoc->get_URL(&url);
    printf("URL: %ws\n", url);

    long lElementCount;
    hr = spElementCollection->get_length(&lElementCount);
    if (FAILED(hr)) return hr;
    printf("Number of elements: %d", lElementCount);

    VARIANT vIndex; vIndex.vt = VT_I4;
    VARIANT vSubIndex; vSubIndex.vt = VT_I4; vSubIndex.lVal = 0;
    for (vIndex.lVal = 0; vIndex.lVal < lElementCount; vIndex.lVal++)
    {
        CComPtr<IDispatch> spDispatchElement;
        if (FAILED(spElementCollection->item(vIndex, vSubIndex, &spDispatchElement)))
            continue;
        CComPtr<IHTMLElement> spElement;
        if (FAILED(spDispatchElement->QueryInterface(IID_IHTMLElement, (void**)&spElement)))
            continue;
        CComBSTR tagName;
        if (SUCCEEDED(spElement->get_tagName(&tagName)))
        {
            printf("%ws\n", tagName);
        }
    }
    return S_OK;
}

int _tmain(int argc, _TCHAR* argv[])
{
    ::CoInitialize(NULL);
    HINSTANCE hInst = ::LoadLibrary(_T("OLEACC.DLL"));
    if (hInst != NULL)
    {
        HRESULT hr = EnumElements(hInst, (HWND)0x000F05E4);    // Handle to Internet Explorer_Server determined with Spy++ :)
        ::FreeLibrary(hInst);
    }
    ::CoUninitialize();
    return 0;
} 
```

上面的代码适用于两者：普通窗口或模态窗口，只需将正确的传递`HWND`给`SendMessageTimeout`函数。

**警告**我在这个例子中使用了一个硬编码的`HWND`值，如果你想测试它，你应该启动一个 IE 实例并使用 Spy++ 获取`HWND`窗口`Internet Explorer_Server`。

我还建议您使用[`CComPtr`](http://msdn.microsoft.com/nl-be/library/ezzw7k98%28v=vs.80%29.aspx)以避免内存泄漏。

# javascript - 没有 new 或 Object.create 的原型继承

> ID：16056422
> 
> 赞同：5
> 
> 时间：2013-04-17T09:29:55.553
> 
> 标签：javascript, inheritance, prototype-programming

有什么方法可以使对象从原型继承（1）不使用`new`，（2）不使用`Object.create`。（我怀疑 new 存在于`Object.create`方法中，但在 Firebug 控制台告诉我它是本机代码之后，我怀疑它是本机代码。）当我说“从原型继承”时，我指的是**真正的**JavaScript 原型继承（即，不仅仅是模仿它）。当我看到它时我就知道真正的继承（即`__proto__`属性存在，构造函数和原型之间存在循环引用，存在继承层次结构）。

我的问题归结为：即使'我们几乎没有新的'，是仅有的两种继承机制`new`和`Object.create`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:32:59.487

> [...] 是仅有的两种继承机制`new`和`Object.create`?

对，他们是。至少这些是您应该使用的唯一。

您*可以*直接分配给，*但*`__proto__`它还不是标准属性。更多信息：[MDN -](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/proto)。*[`__proto__`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/proto)*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:50:01.080

正如您可能知道的那样`new`，并`Object.create`做了一个我们无法调用的隐藏动作`setPrototype`。

```
Object.create = function(proto, properties) {
    var obj = {};
    setPrototype(obj, proto);
    Object.defineProperties(obj, properties);
    return obj;
}

function fakeNew(Constructor) {
    var obj = {};
    setPrototype(obj, Constructor.prototype);
    Constructor.call(obj);
    return obj;
} 
```

这不是“new 在 Object.create 中”或“Object.create 在 new 中”。两者都进行原型分配和其他操作。

实际上有一种方法可以实现`setPrototype`，但你肯定知道它不是标准的。

```
function setPrototype(obj, proto) {
    obj.__proto__ = proto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T12:24:26.363

为了避免使用`new`操作符，但仍然实例化一个继承自原型的对象（的原型`SomeClass`），一个简单的解决方案是构建一个外观构造函数（它`new`在幕后使用操作符）：

```
function SomeClassFacade() {
  return new SomeClass();
}

SomeClass.prototype = {
 /* ... */
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-04T12:39:04.227

从 ES6 开始，您也可以使用`Reflect.construct`，它的行为基本上类似于`new`运算符：

```
function Constructor() {}
var instance = Reflect.construct(Constructor, []);
Object.getPrototypeOf(instance); // Constructor.prototype 
```

如果你想要更接近 的东西`Object.create`，ES6 扩展类也可以创建继承，但只能来自构造函数或`null`：

```
var obj = (class extends null{}).prototype;
delete obj.constructor;
Object.getPrototypeOf(obj); // null 
```

```
function Constructor() {}
var obj = (class extends Constructor{}).prototype;
delete obj.constructor;
Object.getPrototypeOf(obj); // Constructor.prototype 
```*

# java - Android 使用 Runtime.getRuntime().exec 删除 USB 设备

> ID：16056435
> 
> 赞同：0
> 
> 时间：2013-04-17T09:30:21.393
> 
> 标签：java, android

我想通过使用删除 USB 存储

```
Process p = Runtime.getRuntime().
                   exec("vdc volume unmount /mnt/usb_storage/USB_DISK0") 
```

但是 p.waitFor() 返回 4。

那么有什么想法可以移除 USB 吗？

# cordova - PhoneGap Windows8 的自定义插件将调用 c# 代码

> ID：16056439
> 
> 赞同：1
> 
> 时间：2013-04-17T09:30:31.460
> 
> 标签：cordova, windows-8, phonegap-plugins, sensors

我想开发一个在 windows8 和 android 中显示传感器数据的应用程序。我将 phoneGap 用于某些传感器，但是，例如，气压计，phoneGAP 中没有实现。我想为cordova-windows8 开发一个插件。但是网上没有关于如何做到这一点的例子。我想调用将 Microsoft.codePack API 用于传感器的 c# 函数以显示气压计数据。ApiCodePack 使用 windows 7 API 作为传感器。 [http://archive.msdn.microsoft.com/WindowsAPICodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)

是否有任何选项可以为cordova-windows8开发一个调用c#代码的插件？一个示例应用程序将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:56:15.177

是的，当然你可以在电话间隙调用 C# 代码

您需要参考[插件开发](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)指南

计算器的示例插件

HTML 代码：calculator.html

```
<html>
  <head>
    <!-- meta name="viewport" content="width=device-width, height=device-height, user-scalable=yes, initial-scale=2.0, maximum-scale=4.0, minimum-scale=1.0" / -->
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/> <!-- ISO-8859-1 -->
    <title>Cordova</title>
    <link rel="stylesheet" href="master.css" type="text/css" media="screen"/>

    <script type="text/javascript" charset="utf-8" src="cordova-current.js"></script>

<script type="text/javascript" charset="utf-8">

    var deviceReady = false;

    /**
    * Function called when page has finished loading.
    */
    function init() {
        document.addEventListener("deviceready", function () {
            deviceReady = true;
            console.log("Device=" + device.platform + " " + device.version);
        }, false);
        window.setTimeout(function () {
            if (!deviceReady) {
                alert("Error: Cordova did not initialize.  Demo will not run correctly.");
            }
        }, 1000);
    }

    function calculateSum() {

        cordova.exec(
            function (res) {
                document.getElementById('res').innerHTML = res;
            },
            function (e) {
                console.log("Error occurred: " + e);
                document.getElementById('res').innerHTML = "Error occurred: " + e;
            },
            "Calculator", "sum",
            { x: document.getElementById('x').value, y: document.getElementById('y').value });
    };

</script>

  </head>
  <body onLoad="init();" id="stage" class="theme">

    <h1>Calculator</h1>
    <div id="info">
        <span class='tb-label'>X</span> <span id="Span1"></span>
        <input type="text" id="x" value="1" style="width:250px;height:20px;"/>
        <br/>
        <span class='tb-label'>Y</span> <span id="Span2"></span>
        <input type="text" id="y" value="2" style="width:250px;height:20px;"/>
        <br/>
        Sum: <span id="res"></span>
    </div>
    <h2>Action</h2>
    <a class="btn large" onclick="calculateSum();">Calculate</a>
    <h2> </h2><a href="index.html" class="backBtn">Back</a>
  </body>
</html> 
```

C# 代码：calculator.cs

```
using System.Runtime.Serialization;
using WPCordovaClassLib.Cordova;
using WPCordovaClassLib.Cordova.Commands;
using WPCordovaClassLib.Cordova.JSON;

namespace Cordova.Extension.Commands
{
    public class Calculator : BaseCommand
    {

        [DataContract]
        public class CalculateParameters
        {
            [DataMember]
            public double x { get; set; }
            [DataMember]
            public double y { get; set; }
        }

        public void sum(string args)
        {
            CalculateParameters calcParam = JsonHelper.Deserialize<CalculateParameters> (args);

            this.DispatchCommandResult(new PluginResult(PluginResult.Status.OK, calcParam.x + calcParam.y));
        }
    }
} 
```

享受 c# 的自定义插件

# android - 无法使用 Ant 从外部 jar 构建多个 Android dex 文件

> ID：16056442
> 
> 赞同：17
> 
> 时间：2013-04-17T09:30:48.077
> 
> 标签：android, ant, quickblox, antbuilder

我正在开发一个需要多个库（用于 Facebook、Google Maps v2 和 Quickblox 等）的 Android 应用程序，导致方法量溢出超过 64K 限制：

```
Unable to execute dex: method ID not in [0, 0xffff]: 65536
Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536 
```

因为我不能没有这些库，所以我寻找方法限制错误的解决方案。我从 Android 开发者那里找到了一篇很受欢迎的博客文章，其中推荐了源代码划分。（我正在谈论的博客条目可以在这里找到：[http](http://android-developers.blogspot.com.es/2011/07/custom-class-loading-in-dalvik.html) ://android-developers.blogspot.com.es/2011/07/custom-class-loading-in-dalvik.html ）。我一直在尝试这个解决方案，但没有成功。

我现在遇到的问题是，最多的代码不是在我的应用程序本身，而是在所需的库中，所以我必须将这些库分布在我必须在我的应用程序中加载的不同 dex 文件中。我对 Ant 的了解非常有限，我想知道的是我应该在我的 build.xml 文件中写什么，以使 dex 将每个库复制到我想要的位置：

```
 <!-- Primary dex to include my source code and some libraries. -->
            <copy todir="${out.classes.absolute.dir}.1" >
                <fileset dir="${out.classes.absolute.dir}" >

                ...

                </fileset>
            </copy>

            <!-- Secondary dex to include some other libraries. -->
            <copy todir="${out.classes.absolute.dir}.2" >
                <fileset dir="${out.classes.absolute.dir}" >

                ...  

                </fileset>
            </copy> 
```

任何帮助将不胜感激。在此先感谢，亲切的问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T04:22:42.093

到目前为止，我听到的关于这个问题的最佳答案是在优化模式 (proguard-android-optimize.txt) 中使用带有`-dontobfuscate`标志的 ProGuard，以从最终的 APK 中删除未使用的类和方法（不混淆它们）。然后，您可以使用 ProGuard mapping.txt 帮助您从您使用的库 JAR 中删除未使用的类（我不知道有什么好的工具可以做到这一点）。不幸的是，我认为 ProGuard 中没有自动执行此操作的功能。

ProGuard 仅在 Eclipse 中执行导出时运行，而不是在执行运行方式 -> Android 应用程序时运行。这意味着它无助于避免调试构建的限制，除非您使用自定义构建过程。ProGuard 的创建者建议使用它的商业兄弟[DexGuard](http://www.saikoa.com/dexguard)，它将在 Eclipse 中运行调试和发布版本。

强烈建议在发布版本中使用 ProGuard，因为它会减少您的代码大小、提高性能（例如通过内联代码），并且还会混淆您的源代码。确保您对最终的 APK 进行了足够的测试，因为它将与调试版本有很大不同。不幸的是，ProGuard 本身并不足以解决我的问题，所以我删除了我的一个 JAR 依赖项作为一种解决方法。

我使用以下命令检查了依赖 JAR 中的方法数量：

```
dx --dex --output=temp.dex library.jar
cat temp.dex | head -c 92 | tail -c 4 | hexdump -e '1/4 "%d\n"' 
```

我们最大的库的示例方法数量：

```
11222 guava-11.0.1.jar    
10452 aws-android-sdk-1.5.0-core.jar    
5761 org.restlet.jar    
5129 protobuf-java-2.4.1.jar    
2499 aws-android-sdk-1.5.0-s3.jar    
2024 ormlite-core-4.41.jar    
1145 gson-2.2.2.jar    
1716 google-http-client-1.11.0-beta.jar 
```

仅供参考，您可以使用 dexdump 检查 APK 中的方法数量（您可以在 SDK`build-tools`文件夹中找到，例如“Android Studio.app/sdk/build-tools/21.0.2/dexdump”）：

```
dexdump -f MyApp.apk | grep method_ids_size
method_ids_size     : 64295 
```

在我们的案例中，我们只使用 Guava 进行 YouTube 搜索，因此很容易消除这种依赖并给我们更多的喘息空间。

**更新：**我发现从大型 JAR 中去除未使用代码的最简单方法是在我的 Proguard 构建中使用 dex2jar，然后使用 JD-GUI 将最终 JAR 与我想要修剪的特定输入 JAR 进行比较。然后我删除了我知道被 Proguard 删除的顶级包。这使我可以从 aws-android-sdk-1.5.0-core.jar 中删除 >8000 个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T13:29:14.530

[ProGuard](http://proguard.sourceforge.net/)是一个源代码压缩工具，它会在打包您的应用程序时删除任何未使用/重复的类。因此，即使您使用所有这些外部 JAR，也不会 100% 使用其中的所有类，并且这些 JAR 中的许多可能在其中包含相同的类（例如 Log4J 等）。

[Proguard 内置于 dex](http://developer.android.com/tools/help/proguard.html)中。但是默认情况下它不会被激活，你必须在发布模式下运行ant，你可能还需要在project.properties中注释掉一行。

最有可能的是，ProGuard 最终可能会*删除*您的应用程序中使用的一些类。如果在编译 ProGuard 时出现类似 的错误，请在需要该类的情况下`class X not found`配置 ProGuard ：`proguard.cfg`

```
-keep public class <full path to the class that you need> 
```

查看 Android ProGuard 文档，看看启用 proguard 是否会减少 APK 中的（类和方法的）大小。

# android - SlidingFragmentActivity：如何使用不同的片段保存视图寻呼机的实例

> ID：16056449
> 
> 赞同：0
> 
> 时间：2013-04-17T09:31:06.963
> 
> 标签：android, actionbarsherlock, screen-orientation, viewpagerindicator

我正在使用 ABS 和 ViewPagerIndicatior。我的视图寻呼机中有三个带有自定义列表视图的片段，其中填充了自定义适配器。现在，当我将方向从陆地更改为港口或反之亦然时，当方向更改并重新创建视图时，onActivityCreated 会再次调用

主要活动：

```
public class MyActivity extends SlidingFragmentActivity implements     ViewPager.OnPageChangeListener{

protected SliderLeft sliderLeft;
protected SliderRight sliderRight;
ActionBar mActionBar;
ViewPager mViewPager;
TitlePageIndicator mPageIndicator;
FragmentPagerAdapter mPagerAdapter;
SubMenu subMenu1;
private Menu mainMenu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // set the Behind View
    setBehindContentView(R.layout.slider_menu_frame);

    // customize the SlidingMenu
    SlidingMenu sm = getSlidingMenu();
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadowleft);

    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    //int heightOfScreen = metrics.heightPixels;
    int width = metrics.widthPixels;

    sm.setBehindWidth(width / 2); //sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    setSlidingActionBarEnabled(true);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    mActionBar = getSupportActionBar();

    // set viewPager and viewPagerIndicator
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new FragmentPagerAdapter(getSupportFragmentManager());
    mViewPager.setOffscreenPageLimit(3);
    mViewPager.setAdapter(mPagerAdapter);
    mViewPager.setOnPageChangeListener(this);

    mPageIndicator = (TitlePageIndicator) findViewById(R.id.indicator);
    mPageIndicator.setOnPageChangeListener(this);
    mPageIndicator.setViewPager(mViewPager);
    mPageIndicator.setCurrentItem(1);

}

} 
```

我的应用程序的 UI 与 yahoo answer 应用程序相同。

视图寻呼机适配器是：

```
public class FragmentPagerAdapter extends FragmentStatePagerAdapter {

public FragmentPagerAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int i) {
    Fragment fragment = null;
    switch (i){
        case 0:
            Fragment_Review fragment_review = new Fragment_Review();
            Bundle args0 = new Bundle();
            args0.putInt(Fragment_Activities.ARG_OBJECT, i);
            fragment_review.setArguments(args0);
            fragment = fragment_review;
            break;
        case 1:
            Fragment fragment_activities = new Fragment_Activities();
            Bundle args1 = new Bundle();
            args1.putInt(Fragment_Activities.ARG_OBJECT, i);
            fragment_activities.setArguments(args1);
            fragment = fragment_activities;
            break;
        case 2:
            Fragment_Answer fragment_answerit = new Fragment_Answer();
            Bundle args2 = new Bundle();
            args2.putInt(Fragment_Activities.ARG_OBJECT, i);
            fragment_answerit.setArguments(args2);
            fragment = fragment_answerit;
            break;
    }
    return fragment;
}

@Override
public int getCount() {
    return 3;
}

@Override
public CharSequence getPageTitle(int position) {

    CharSequence pageTitle = "";

    switch (position){
        case 0:
            pageTitle = "tiile";
            break;
        case 1:
            pageTitle = "title";
            break;
        case 2:
            pageTitle = "tille";
            break;
    }

    return pageTitle;
}

} 
```

视图寻呼机内的所有片段都从 SherlockFragment 扩展。

```
public class Fragment_Review extends SherlockFragment implements PullToRefreshBase.OnRefreshListener<ListView> {

private List<Data> allData;
private CustomListAdapter customListAdapter;
private PullToRefreshListView mPullRefreshListView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.activity_ptr_list_fragment, container, false);
    mPullRefreshListView = (PullToRefreshListView) v.findViewById(R.id.pull_to_refresh_listview);
    progressBar = (ProgressBar) v.findViewById(R.id.progressBar);
    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    allData = new ArrayList<Data>();
    mPullRefreshListView.setMode(PullToRefreshBase.Mode.PULL_UP_TO_REFRESH);
    customListAdapter = new CustomListAdapter(getActivity(), allData);
    mPullRefreshListView.setOnRefreshListener(this);
    mPullRefreshListView.setAdapter(lazyQuestionListAdapter);
    new GetData().execute(getString(R.string.url) + "get_data.php");
}
} 
```

当从服务器接收数据时，适配器将被更新。

请指导我如何在方向更改中保存所有片段的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:39:44.933

像那样（在片段中）：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
    allData = new ArrayList<Data>();
    customListAdapter = new CustomListAdapter(getActivity(), allData);
}
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);
    mPullRefreshListView.setMode(PullToRefreshBase.Mode.PULL_UP_TO_REFRESH);
    mPullRefreshListView.setOnRefreshListener(this);
    mPullRefreshListView.setAdapter(lazyQuestionListAdapter);

    //ADD condition for load data from network (like only if adapter.isEmpty())
    new GetData().execute(getString(R.string.url) + "get_data.php");
} 
```

# installation - BizTalk Enterprise Single Sign-On Server 安装错误

> ID：16056454
> 
> 赞同：0
> 
> 时间：2013-04-17T09:31:21.470
> 
> 标签：installation, biztalk

我在我的机器上安装 BizTalk Server 2010 时遇到了一些问题。从 MSDN 下载安装程序，但遇到以下问题：

*显示带有文本的 MessageBox：以下平台组件安装失败，需要手动安装，然后才能继续安装： Enterprise Single Sign-On Server: Unspecified error 检查日志以获取详细信息。返回代码：1 === 记录停止：2013 年 4 月 17 日 09:55:15 ===*

搜索网络并没有真正帮助，反而引起了很多混乱。我在尝试安装时接受了所有默认设置，但它抱怨需要手动安装企业单点登录服务器？

我正在使用 Windows 7。

其他人遇到过这个问题吗？

在此先感谢，奥南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-11T23:04:37.880

在安装 BizTalk 2016 时，我只安装了 x86 版本的 Microsoft Visual C++ 2013 而**没有在 64 位机器上安装 x64 版本**时遇到了这个错误。

一旦我也安装了x64版本，错误没有出现，安装成功。

选择企业 SSO 功能时设置/安装向导中出现的错误/注释具有误导性，因为它只要求安装 x86 版本。

但是，列出 BizTalk 的先决条件的安装指南确实提到应该安装 Microsoft Visual C++ 2010 的 x86 和 x64 版本（或 2013，如果是 BizTalk 2016）可再发行软件包。

[https://msdn.microsoft.com/en-us/library/jj248697(v=bts.80).aspx](https://msdn.microsoft.com/en-us/library/jj248697(v=bts.80).aspx) [http://www.biztalkgurus.com/blogs/msft-biztalk-integration/biztalk-2013-installation- windows-server-2012-64 位错误/](http://www.biztalkgurus.com/blogs/msft-biztalk-integration/biztalk-2013-installation-error-on-windows-server-2012-64-bit/)

# html - 无线电输入默认检查受人尊敬

> ID：16056457
> 
> 赞同：1
> 
> 时间：2013-04-17T09:31:37.680
> 
> 标签：html, radio-button

我从 MVC 创建了这个单选按钮组：

```
<div class="editor-field">
  <input checked="True" id="1" name="CopyOrCut" type="radio" value="1" /> Copy
</div>
<div class="editor-field">
  <input checked="False" id="2" name="CopyOrCut" type="radio" value="2" /> Cut
</div> 
```

但值为 2 "CUT" 的收音机是经过预检查的收音机。我做错了什么吗？我没有发布 MVC 代码，因为这是一个 html 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:34:29.483

据我了解，最好不要在第二个输入中提到已选中的字段，或者干脆 make it `checked=""`。使用 True 和 False 不是定义检查的正确方法。更多信息请看这里：

[http://www.w3.org/TR/html-markup/input.checkbox.html](http://www.w3.org/TR/html-markup/input.checkbox.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:38:43.217

还有一种非常简单的方法可以做到这一点，只需使用这个：

```
<div class="editor-field">
 <input id="1" name="CopyOrCut" type="radio" value="1" checked> Copy
</div>
<div class="editor-field">
 <input id="2" name="CopyOrCut" type="radio" value="2" > Cut
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T09:32:59.283

要选中复选框，请将`checked`属性设置为`checked`。如果您不想选中复选框，请不要指定任何`checked`属性。

```
<div class="editor-field">
  <input checked="checked" id="1" name="CopyOrCut" type="radio" value="1" /> Copy
</div>
<div class="editor-field">
  <input id="2" name="CopyOrCut" type="radio" value="2" /> Cut
</div> 
```

# ruby-on-rails - Rails 使用 textarea 发送 AJAX 响应

> ID：16056458
> 
> 赞同：4
> 
> 时间：2013-04-17T09:31:38.533
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我正在使用以下表格：

```
<%= form_for(@document, :remote => true) do |f| %>

        <%= f.label :asset, "Document to Upload" %><br />
        <%= f.file_field :asset, :class => "behaves", "data-behave" => "passValueOnChange", "data-recipient" => "#campaign_document_name" %>

      <%= f.label :name, :class => 'required' %><br />
      <%= f.text_field :name, :required => true %>

    <%= f.submit "Upload Document", :class => "button" %>

<% end %> 
```

提交给以下控制器：

```
def create
@document = CampaignDocument.new(params[:campaign_document])
@campaign.documents << @document
  respond_to do |format|
    format.js
  end
end 
```

它应该返回以下内容`create.js.erb`：

```
 <%= remotipart_response do %>
  <% unless @document.errors.any? %>
    $('.tablewrapper').html( '<%= escape_javascript(render :partial=>'documents_table') %>' );
    alertify.success("File Updloaded");
  <% else %>
    <% @document.errors.each do |attr, msg|%>
    alertify.error("<%= msg %>",10000);
    <% end %>
  <% end %>
<% end %> 
```

但响应包含在`textare`标签中。这很奇怪：

```
<textarea data-type="text/javascript" response-code="200">
    $('.tablewrapper').html('{code for HTML ommited for brevity}');
    alertify.success(&quot;File Updloaded&quot;);
</textarea> 
```

*注意* 同一安装中的其他类似样式的 AJAX 函数不会以这种方式运行。

# javascript - 如何仅使用 JSP 和 javascript 显示浏览文件夹窗口（不浏览文件）？

> ID：16056459
> 
> 赞同：1
> 
> 时间：2013-04-17T09:31:55.590
> 
> 标签：javascript, jsp, directory

1.  我需要一个关于如何使用 JSP 和 Javascript 浏览文件夹（不是文件）的代码。
2.  我使用库查找用于浏览文件夹的 JAVA 代码，`JFileChooser`但我希望打开默认窗口（在浏览文件中打开）。
3.  我正在开发一个 webapp，它将根据路径扫描文件夹并生成输出。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:01:39.517

> 1.我需要一个如何使用 JSP 和 Javascript 浏览文件夹（不是文件）的代码。

由于安全原因，Javascript 无法访问文件系统，正如这个[答案和这个](https://stackoverflow.com/questions/371875/local-file-access-with-javascript "使用 javascript 访问本地文件")[答案](https://stackoverflow.com/questions/7517837/accessing-a-folder-to-list-play-clips-one-by-one "访问文件夹以逐个列出/播放剪辑")所说。

[因此，您必须按照此答案](https://stackoverflow.com/a/2235408/468763 "我如何访问本地文件系统的资源并从浏览器中操作它们") 中的建议使用 flash 或 java applet，[否则您将不得不等到[HTML5 File API](http://www.html5rocks.com/en/tutorials/file/filesystem/ "HTML5 文件系统 API 教程")成熟:-)]

但是，如果您的要求是您的用户（可能在应用程序中具有管理员权限）通过网络浏览器登录到网络应用程序并想要扫描（查看内容）服务器端的特定文件夹（其中部署了网络应用程序，而不是他自己机器上的文件系统），那么您可以使用此[答案](https://stackoverflow.com/questions/7331244/browsing-server-directory-with-javascript "使用 javascript 浏览服务器目录")中给出的建议，只是为了详细说明：

1.  在 JSP 中有`<form>`一个文本框（用于获取文件夹名称或完整路径），在提交此表单时，将向服务器发送请求。
2.  响应将是`List<String>`通过请求传递的特定文件夹中的文件列表 ()。
3.  您还可以通过 ajax 提交请求，在这种情况下，您将按照建议返回 JSONArray。
4.  现在在服务器上，获取从请求中获得的文件夹中的所有文件将是普通的 Java File API 东西。

很抱歉这么说，但我不认为你会得到一个现成的代码来做你想做的事，这不是事情在 SO 上的工作方式。

> 2.我寻找使用`JFileChooser`库浏览文件夹的JAVA代码

你说你正在构建一个网络应用程序，对吧？`JFileChooser`是一个 Swing 组件，据我所知不能在 JSP 中使用来实现您想要的。

> 3.我正在开发一个webapp，它将根据路径扫描文件夹并生成输出。

这些步骤在第 (1) 点中进行了说明。

希望这会有所帮助，并提供相关的提示和前进的方向。

# java - 以预期模式检查日期及其模式

> ID：16056460
> 
> 赞同：1
> 
> 时间：2013-04-17T09:31:55.890
> 
> 标签：java, date, datetimeoffset

我有一个日期，它应该是字符串中的模式。

```
//True
String date ="2012-10-12 12:01:10.10.150";
String pattern = "yyyy-MM-dd hh:mm:ss.SSS";

//False
String date ="2012-10-12 12:01:10.150";
String pattern = "yyyy-MM-dd hh:mm:ss"; 
```

现在，我想知道日期变量是否具有满足字符串中给定模式的正确日期。在上面的例子中，我展示的 True/False 是预期的结果。

我尝试过使用 SimpleDateFormat（如果它抛出 ParseException），但它不适用于第二个示例。

```
public boolean isValidDate(String date, String pattern) {
    if (date == null)
        return false;
    SimpleDateFormat dateFormat = new SimpleDateFormat(pattern);
    try {
        dateFormat.parse(date.trim());
    } catch (ParseException pe) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:42:47.537

我认为您需要同时使用正则表达式和 SimpleDateFormat 来实现您想要的

```
boolean validate(String date, String pattern) throws ParseException {
    String regex = pattern.replaceAll("\\w", "\\\\d").replace(".", "\\.");
    if (!date.matches(regex)) {
        return false;
    }
    SimpleDateFormat sdf = new SimpleDateFormat(pattern);
    sdf.setLenient(false);
    try {
        sdf.parse(date);
    } catch (Exception e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:36:32.577

用作`yyyy-MM-dd hh:mm:ss`第二个日期的模式。

```
String date = "2012-10-12 12:01:10";
String pattern = "yyyy-MM-dd hh:mm:ss";
SimpleDateFormat sdf = new SimpleDateFormat(pattern);
Date parse = sdf.parse(date); 
```

大写`S`字母代表第二个字符串没有的毫秒数。[请参阅 API](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:40:47.013

来自`SimpleDateFormat.parse()`Java 文档：

> ...解析不一定使用直到字符串末尾的所有字符...

这意味着如果您的日期比模式长，它仍然会产生一个有效的`Date`实例。反过来（例如您的第二个示例）该模式比给定的日期字符串更长（更详细），因此它不会产生`Date`. 将其用于第二个示例：

```
String pattern = "yyyy-MM-dd hh:mm:ss"; 
```

# c++ - 链接错误：不明确的 libboost*.lib 与 boost*.lib

> ID：16056461
> 
> 赞同：10
> 
> 时间：2013-04-17T09:31:58.247
> 
> 标签：c++, boost

我在我的项目中使用了 boost。我已经从这里下载了预编译的二进制文件[http://boost.teeks99.com/](http://boost.teeks99.com/)

链接时我收到这样的错误：

`Error 18 error LNK2005: "public: void __cdecl boost::thread::join(void)" (?join@thread@boost@@QEAAXXZ) already defined in boost_thread-vc110-mt-1_52.lib(boost_thread-vc110-mt-1_52.dll) C:\Oleg\projects\MBClient\FastNativeAdapter\libboost_thread-vc110-mt-1_52.lib(thread.obj) FastNativeAdapter`

为什么 boost 包含两个`lib`名称如此相似的名称，它们之间有什么区别？

*   libboost_thread-vc110-mt-1_52.lib
*   boost_thread-vc110-mt-1_52.lib

如何修复链接错误？

**upd**我自己编译了boost。我已将`boost_1_53_0\stage\lib`目录添加到链接器。该目录实际上包含“每个”文件的 3 个“副本”，例如：

*   boost_atomic-vc110-mt-1_53.dll
*   boost_atomic-vc110-mt-1_53.lib
*   libboost_atomic-vc110-mt-1_53.lib

所以很清楚编译器声称什么。不知何故，它无法理解要使用哪个版本的 lib 文件。它可能与静态/动态链接有关，但我仍然找不到解决方案。我确定我的问题很常见，所以我希望有人可以建议我该怎么做。

我试图从文件夹中删除所有“libboost *”文件，但后来收到这样的错误： `Error 15 error LNK1104: cannot open file 'libboost_date_time-vc110-mt-1_53.lib'`

我试图从文件夹中删除所有“boost*lib”文件，但随后我收到这样的错误： `Error 15 error LNK1104: cannot open file 'boost_thread-vc110-mt-1_53.lib'`

然后我复制`boost_thread-vc110-mt-1_53.lib`回来，我收到了很多这样的错误：

`Error 16 error LNK2005: "public: virtual __cdecl boost::detail::thread_data_base::~thread_data_base(void)" (??1thread_data_base@detail@boost@@UEAA@XZ) already defined in boost_thread-vc110-mt-1_53.lib(boost_thread-vc110-mt-1_53.dll)`

因此，当没有`boost_thread-vc110-mt-1_53.lib`编译器声称它丢失时，当有`boost_thread-vc110-mt-1_53.lib`编译器声称“函数已定义”时。可能不知何故我确实同时使用动态和静态链接或类似的东西？

**upd2**我已按照[此处](https://stackoverflow.com/questions/2520234/how-to-link-to-dynamic-boost-libs/3051417#3051417)`#define BOOST_ALL_DYN_LINK`的建议取消注释，现在代码编译！我正在调查其他一切是否正常。但是我不明白为什么我应该取消评论，所以欢迎评论。`#define BOOST_ALL_DYN_LINK`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T09:37:29.370

编辑：由于对帖子的编辑改变了情况，因此删除了初始声明。

基于[http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#library-naming](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#library-naming)（由 Igor R. 提供）：

libboost_thread-vc110-mt-1_52.lib 是静态库（不需要 DLL） boost_thread-vc110-mt-1_52.lib 是 DLL 的导入库

您只需要使用其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T15:08:51.723

`error LNK1104: cannot open file 'libboost_date_time-*.lib'`如果您遇到错误，请尝试另一个想法/解决方案：

在我们的项目中，我们包含该`boost/date_time.hpp`文件。我们在项目设置中定义常量 `BOOST_ALL_NO_LIB`而不是 BOOST_ALL_DYN_LINK 来告诉 boost 不要自动选择要链接的库。有关此选项的更多信息，请参阅 Boost[文档](http://www.boost.org/doc/libs/1_57_0/libs/config/doc/html/index.html#boost_config.configuring_boost_for_your_platform.user_settable_options)。

因此，您可以添加`BOOST_ALL_NO_LIB`Project Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions 并检查此链接器错误是否消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:59:49.380

我认为首先你需要纠正你的问题。你的意思是（我猜你已经知道和之间的`DLL`区别`LIB`）

*   libboost_thread-vc110-mt-1_52.lib
*   boost_thread-vc110-mt-1_52。**dll**

或者

*   libboost_thread-vc110-mt-1_52.lib
*   boost_thread-vc110-mt-1_52。**库**

无论如何，问题似乎在于您正在混合使用静态（`libboost_thread-vc110-mt-1_52.lib`）和共享（`boost_thread-vc110-mt-1_52.lib`）增强库。但是如果没有工作环境和平台细节，我就无法找到一个准确的解决方案。如果你在 工作`Visual Studio`，那么你可以去`right click on project file`> `properties`> `linker`> `input`>`ignore specific library`并在`libboost_thread-vc110-mt-1_52.lib`那里添加并尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:19:08.443

我自己问我的问题。需要取消注释#define BOOST_ALL_DYN_LINK（参考描述）

# multithreading - 具有 2 个线程的全局变量的最小值和最大值

> ID：16056462
> 
> 赞同：8
> 
> 时间：2013-04-17T09:31:58.630
> 
> 标签：multithreading

我有一个 for 循环
`int c = 0 ;
for(int i=0 ; i<100 ; i++)
c++;`

其中 C 是一个全局变量。如果我用 2 个线程运行此代码，如果我不锁定部分中的线程，
最小和最大最终值是多少？如何锁定？`C``c++`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-18T21:39:18.310

如果您将增量代码转换为程序集，它的伪代码将如下所示：

```
1-mov ax,mem[c]
2-inc ax
3-mov mem[c],ax 
```

如果我们有 2 个线程，请考虑这种情况：

```
thread 1: line 1
thread 2: line (1-2-3) for 99 times
thread 1: line (2-3)
thread 2: line 1
thread 1: line (1-2-3) for remaining 99 times
thread 2: line (2-3) for the last time 
```

现在*c*的值是 2 所以最小值是 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:43:31.993

假设`c=0`最初

最大将是`200`

如果每个线程`c++`在一次迭代中彼此相继执行，就会发生这种情况。

敏会是`100`

那是因为`c++`基本上是：

```
temp = c + 1 //line1
c = temp //line2 
```

假设第一个线程执行 line1，然后第二个线程在该迭代中执行 line `. The same value will be set. So`c `will only increase by`1`，即使 2 个线程尝试增加它。

在 Java 中，使其成为线程安全的：声明`c`为`AtomicInteger`并执行`c.addAndGet()`以递增它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:34:04.617

最小值：c+100 如果 Thread2 在 Thread1 覆盖之前复制 c。

最大值：c + 200 如果两个线程按顺序进行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:44:31.630

最小值为 c + 100。最大值为 c + 200。

当线程彼此相邻运行时，它们可能会在另一个线程更新之前同时采用相同的 c 值。在这种情况下，两者都会将 c 更新为相同的值。

如果这发生在最坏的情况下（循环函数的次数），则该值将仅更新该次数。

如果这永远不会发生（您最好的情况），例如线程没有同时运行，则该值将更新您希望它们的次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-05T14:25:09.167

**我的答案是最小 1 和最大 200。**

正如 Kibo 提到的，增量代码如下所示：
1-mov ax,mem[c]
2-inc ax
3-mov mem[c],ax

现在让我们用 for(int i=0 ; i<3 ; i++) 运行一个例子

T1 线 1 |==> ax = 0; 内存[c]=0；
T1 线 2 |==> ax = 1; 内存[c]=0；
T2 线 1 |==> ax = 0; 内存[c]=0；
T1 第 3 行 |==> ax = 0; 内存[c]=0；
T2 线 2 |==> ax = 1; 内存[c]=0；
T1 线 1 |==> ax = 0; 内存[c]=0；
T2 第 3 行 |==> ax = 0; 内存[c]=0；
T1 线 2 |==> ax = 1; 内存[c]=0；
T2 线 1 |==> ax = 0; 内存[c]=0；
T1 第 3 行 |==> ax = 0; 内存[c]=0；
T2 线 2 |==> ax = 1; 内存[c]=0；
T1 线 1 |==> ax = 0; 内存[c]=0；
T2 第 3 行 |==> ax = 0; 内存[c]=0；
T1 线 2 |==> ax = 1; 内存[c]=0；
T2 线 1 |==> ax = 0; 内存[c]=0；
T1 第 3 行 |==> ax = 0; 内存[c]=0；
T2 线 2 |==> ax = 1; 内存[c]=0；
T2 第 3 行 |==> ax = 1; 内存[c]=1；

同样适用于 i=200

# sql - 使用 cast 时在 sql 中执行算术运算

> ID：16056470
> 
> 赞同：0
> 
> 时间：2013-04-17T09:32:19.970
> 
> 标签：sql, sql-server, sql-server-2008, select, casting

我有工资表。在这个薪水字段中，我在单个列中添加了 Lacks 和数千。所以我想使用 select 语句。

**我的查询是**

```
SELECT TOP(10) 'INSERT INTO jobs(Budget) VALUES('+
CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, 
PATINDEX('%laks%', r.Budget))*100000 AS VARCHAR(50))
+ ',' +CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4,
patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000  AS 
VARCHAR(50))+')'
FROM dbo.requirementsdetailsfororganization r 
```

**输出**

```
INSERT INTO jobs(Budget) VALUES(0,85000)
INSERT INTO jobs(Budget) VALUES(200000,5000) 
```

在这里`I want to add lacks and thousands`，这意味着我要添加

*   0,85000 =85000

*   200000,5000=205000

    在上面的查询中。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:46:29.693

输出查询在将要加载的作业表中指定一列，称为预算。VALUES 子句包括两个值。这应该会引发以下错误：

```
Msg 110, Level 15, State 1, Line 1
There are fewer columns in the INSERT statement than values specified in the VALUES clause. The number of values in the VALUES clause must match the number of columns specified in the INSERT statement. 
```

如果您将代码更改为此，则插入将起作用。但是，它只会用数据填充两列，而不是将值相加：

```
SELECT TOP(10) 'INSERT INTO jobs(Budgetm Lacks) VALUES('+

CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000 AS VARCHAR(50))
      + ',' +CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4
     ,patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000  AS 
   VARCHAR(50))+')'
FROM dbo.requirementsdetailsfororganization r 
```

如果要将两列一起添加到 Total 列中，则可以使用以下代码：

```
SELECT TOP(10) 'INSERT INTO jobs(Budgetm Lacks) VALUES('+

CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000 AS VARCHAR(50))
      + ',' +CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4
     ,patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000  AS 
   VARCHAR(50)) + CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000 AS VARCHAR(50))
      + ' + ' +CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4
     ,patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000  AS 
       VARCHAR(50)) + ')'
FROM dbo.requirementsdetailsfororganization r 
```

这将用两列的总和填充第三列。如果您只是想用两列的总和来填充预算列并且没有单独的列，那么您只需在 VALUES 子句中将逗号更改为 + 号。

```
SELECT TOP(10) 'INSERT INTO jobs(Budget) VALUES('+

CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000 AS VARCHAR(50))
      + '+' +CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4
     ,patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000  AS     VARCHAR(50))+')'
FROM dbo.requirementsdetailsfororganization r 
```

# c - C 宏中的标记粘贴 (##) 反斜杠

> ID：16056472
> 
> 赞同：0
> 
> 时间：2013-04-17T09:32:24.610
> 
> 标签：c, macros

我正在努力制作一个像这样使用的宏：

BYTE_AS_STRING(0A);

扩展为：

"\x0A"

可能吗？

到目前为止，我已经尝试过：

```
#define STEP2(a)               #a
#define BYTE_AS_STRING(byte)   STEP2(\x##byte) 
```

和：

```
#define STEP3(a)               #a
#define STEP2(a, b)            STEP3(\##a##b)
#define BYTE_AS_STRING(byte)   STEP2(x, byte) 
```

没有成功。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:01:12.727

我要说我同意 Joachim Pileborg 的观点。

无论如何，这就是你需要的。您应该说将`cpp`您的宏参数视为一个字符串。

```
#include <stdio.h>

#define BYTE_AS_STRING(x)   "\\x" #x 

int main(void) {
    printf("print this : %s\n", BYTE_AS_STRING(0A));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:00:30.723

这似乎有效：

```
#define S(a)   #a
#define X(b)   S(\x##b)
#define BYTE_AS_STRING(c)   X(c)

#include <stdio.h>

int main(void)
{
    printf("%02x %s", (int)(BYTE_AS_STRING(0A)[0]), BYTE_AS_STRING(0A));
} 
```

预处理：

```
// ...
int main(void)
{
    printf("%x %s", (int)("\x0A"[0]), "\x0A");
} 
```

Hexdump 的输出符合预期：

```
$ ./a.out | hexdump -C
00000000  30 61 20 0a                                       |0a .| 
```

# sql - oracle如何从查询字符串中进行选择

> ID：16056473
> 
> 赞同：1
> 
> 时间：2013-04-17T09:32:27.457
> 
> 标签：sql, database, oracle, plsql, oracle10g

假设，我有一个包含查询字符串的字符串。

如何从 oracle 中的查询字符串中选择行？

我试过`execute immediate`了，但它什么也没返回。

```
declare 
    hello varchar(30000);
begin
    hello:='select * from test_table';
    execute immediate hello;    
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:44:01.143

您将使用动态游标。

这是一个例子`SQL*Plus`：

```
SQL> var dyn_cur refcursor
SQL> DECLARE
  2     l_sql_query VARCHAR2(1000);
  3  BEGIN
  4     -- complex function that returns a query:
  5     l_sql_query := 'SELECT 1, dummy FROM dual';
  6     OPEN :dyn_cur FOR l_sql_query;
  7  END;
  8  /

PL/SQL procedure successfully completed.

SQL> print dyn_cur

         1 DUM
---------- ---
         1 X 
```

您可以在 PL/SQL 过程和包中使用动态游标：

```
SQL> CREATE OR REPLACE PROCEDURE prc_dyn_cur(p_dyn_cursor OUT SYS_REFCURSOR) IS
  2  BEGIN
  3     OPEN p_dyn_cursor FOR 'SELECT 1, dummy FROM dual';
  4  END;
  5  /

Procedure created.

SQL> exec prc_dyn_cur(:dyn_cur);

PL/SQL procedure successfully completed.

SQL> print dyn_cur

         1 DUM
---------- ---
         1 X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:20:30.247

```
declare 
    hello varchar(30000);
    type tb is table of test_table$rowtype;
    mytb tb;
begin
    hello:='select * from test_table';
    execute immediate hello bulk collect into mytb;
    -- now you got all og youe data in the "array" mytb
end; 
```

请注意，此解决方案考虑到您知道要从哪个表中选择。另外，我认为您应该描述您要达到的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T11:40:04.957

```
CREATE OR REPLACE PROCEDURE query_executer (string_query IN VARCHAR)
IS
   c1 SYS_REFCURSOR;
   v_last_name employees.last_name%TYPE;    -- Selecting last_name
BEGIN
   OPEN c1 FOR string_query; -- Opening c1 for the select statement
   LOOP
      FETCH c1 INTO v_last_name;
      DBMS_OUTPUT.put_line (v_last_name);
      EXIT WHEN (C1%NOTFOUND);
   END LOOP;
END;

SET SERVEROUTPUT ON
EXECUTE query_executer('select last_name from employees'); 
```

**输出**

```
Procedure created.
Abel
Ande
Atkinso
PL/SQL procedure successfully completed. 
```

# javascript - 如何与空变量进行比较？

> ID：16056476
> 
> 赞同：3
> 
> 时间：2013-04-17T09:32:31.637
> 
> 标签：javascript, is-empty, appconkit

如果我将变量设置为 0，我会得到奇怪的行为，即与“”（空）的比较为真。如何检查变量是否真的为空？

```
tmp = 0;

if ( tmp != "")
{
    //do something - This is where the code goes.
}
else
{
   //isEmpty - I would expect to be here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:33:41.963

使用[严格的比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators) `===`和`!==`

使用`==`and `!=`（称为抽象比较运算符），

> 如果两个操作数的类型不同，JavaScript 会尝试将操作数转换为适当的类型以进行比较。

* * *

如果为空，则要检查变量是否尚未定义，请使用：

```
if (typeof tmp !== "undefined") {
    // it exists!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:34:29.130

你是什​​么意思`empty variable`？如果你的意思是一个空字符串，那么你应该使用`!==`它来检查它。

```
if (tmp !== "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:34:36.960

JavaScript 隐式地​​将值转换为其他类型。要检查类型，请使用`!==`运算符：

```
if ( tmp !== "") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:36:45.300

在 JavaScript 中，除了、 、`0`和`NaN`之外的所有内容都被认为是错误的。"" 被认为是.`undefined``false``null``true`

```
if (tmp) {

} 
```

如果变量包含除、、和之外的任何值，`if`则将执行上述操作。`0``NaN``undefined``false``null`

如果`tmp`是，`string`那么您可以使用以下代码：

```
if (tmp !== "") {

} 
```

`===`和`!==`运算符在不进行类型转换的情况下进行比较。

# actionscript-3 - 如何在不同的 SWF 中共享类代码？

> ID：16056477
> 
> 赞同：2
> 
> 时间：2013-04-17T09:32:36.563
> 
> 标签：actionscript-3, flash, swc

我正在做一个 Flash 项目。在项目中有很多独立的 FLA 文件，它们可能共享相同的公共类代码。澄清项目限制：

1.  我只能使用 Flash CS6 IDE **。**没有 Flash Builder 或 Flex 等现代工具，只有纯 Flash CS6 IDE。
2.  我必须分别将 FLA 导出到 SWF，以便每个 SWF 都包含公共类的 ABC 的副本。
3.  我有一个 loader.swf，它将所有其他 SWF 加载到同一个 ApplicationDomain 中。换句话说，SWF 中所有重复的 ABC 都将被忽略，因为 loader.swf 也已经涉及到它。

我的问题是：

1.  有什么方法可以将所有常见类预编译为 SWC 或 SWF，并且可以像 DLL 或 SO 一样使用它？
2.  如果是这样，我怎么能像我之前所说的那样仅通过 Flash CS6 IDE 创建这样的 SWC 或 SWF？
3.  如果我可以创建这样的 SWC 或 SWF，我应该如何使用它？例如如何更改我在 Flash CS6 IDE 中的配置？

老实说，我不知道我的想法是否有效。拜托，任何建议都会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:37:57.330

我找到了解决方案：

1.  创建一个将触及所有常见类的 FLA
2.  Exrpot FLA 我会得到两个文件：SWF 和 SWC
3.  在其他 FLA 中将 SWC 用作“外部库”
4.  使用 SWF 作为运行时共享库​​在运行时动态加载它

# php - Codeigniter 表单发布和验证

> ID：16056481
> 
> 赞同：5
> 
> 时间：2013-04-17T09:32:53.940
> 
> 标签：php, codeigniter

我不是专业人士，但知道我的 PHP 方式，我是 Codeigniter 的新手。

一直在阅读这些教程： http: [//net.tutsplus.com/articles/news/codeigniter-from-scratch-day-5-crud/](http://net.tutsplus.com/articles/news/codeigniter-from-scratch-day-5-crud/)

好的，所以我有一个列出用户的页面，单击用户名将转到编辑页面，该页面的 url 为：index.php/users/edit/1（其中 1 是用户 ID）

在编辑页面上是一个表单，这个表单包含几个部分，每个部分都是从数据库中的不同表中填充的。所以我的编辑控制器如下：

```
function edit() {

        //load model
        $this->load->model('users_model');

        //assign user data from DB 
        $data['data_user'] = $this->users_model->getUser($this->uri->segment(3));
        //get users Password, using username from above
        $data['data_user_password']= $this->users_model->getUserPassword($data['data_user'][0]->UserName);

        $data['page_content'] = 'pages/users_edit';
        $this->load->view('template/template', $data);
    } 
```

注意： `$data['data_user']`包含用户数据，如姓名、用户名、电子邮件 `$data['data_user_password']`包含来自不同表的用户密码

然后我可以在 users_edit.php 上填充表单，这一切都很好。我通过执行以下操作来访问这些数据：

```
if (is_array($data_user)) {
    foreach($data_user as $user) 
    {
        $userID         = $user->id;
        $userName       = $user->Name;
        $userUserName   = $user->UserName;
        $userMail       = $user->Mail;
        $userDepartment = $user->Department;
        $userWorkPhone  = $user->WorkPhone;
        $userHomePhone  = $user->HomePhone;
        $userMobile     = $user->Mobile;

    }
}
//user password
if (is_array($data_user_password)) {
    foreach($data_user_password as $user) 
    {
        $userPassword   = $user->value;
    }
}

Name: 
<?php echo form_input('name', set_value('name', $userName), 'id="name" class="inputLong"'); ?> 
```

当我发布时，我将数据发送到：index.php/users/update

到目前为止，我对此页面的控制器是：

```
function update() {

        echo '<pre>';
        print_r($_POST);
        echo '</pre>';
        //exit();

        $this->load->library('form_validation');

        $this->form_validation->set_rules('name', 'Name', 'trim|required');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('pages/users_edit');
        }
        else
        {
            $this->index();
        }

    } 
```

现在，我只是在表单 input=name id=name 的用户“name”上测试验证

我想我没有正确处理它的 if ($this->form_validation->run() == FALSE) 部分，如果表单包含数据，它会传递并重定向到索引，如果我将 name 留空，它要么不正确处理编辑页面，或者我不知道，有些事情不对。我认为这是因为页面正在使用 post 数组重新加载，而不是像我在函数 edit() 中那样传递 $data。

回到表单页面，它应该显示validation_errors，它显示：

**名称字段是必需的。**

这是正确的，但是，对于应该预填充的其余字段，它显示 PHP 错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: userUserName

Filename: pages/users_edit.php

Line Number: 50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:19:33.250

您可以在编辑功能中进行验证，而不是使用更新功能，这样，您的数据仍然可供您查看，如果验证有错误，codeigniter 将负责重新填充您的字段。如果验证正常，请执行下一步

```
function edit() {

    //load model
    $this->load->model('users_model');

    //assign user data from DB 
    $data['data_user'] = $this->users_model->getUser($this->uri->segment(3));
    //get users Password, using username from above
    $data['data_user_password']= $this->users_model->getUserPassword($data['data_user'][0]->UserName);

    $data['page_content'] = 'pages/users_edit';
    $this->load->view('template/template', $data);

    //is the form submitted
    if(form submit){
         if ($this->form_validation->run() == TRUE)
         {
             $this->index();
         }
         else
         {
         $this->load->view('pages/users_edit', $data);
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:45:18.543

```
$this->load->view('pages/users_edit'); 
```

在你的函数 update() 中，验证后你加载视图，但你没有将任何数据变量传递给它。因此，您没有可以在视图文件中访问的任何变量。

您必须以与函数 edit() 相同的方式设置变量：

```
$this->load->view('template/template', $data); 
```

目前没有设置变量 $data_user 所以你不能循环使用它..

# iphone - NSFetchedResults 控制器在更新 uitableview 时阻塞 UI

> ID：16056485
> 
> 赞同：2
> 
> 时间：2013-04-17T09:33:00.440
> 
> 标签：iphone, ios, uitableview, ios6, nsfetchedresultscontroller

使用 nsfetchedresultscontroller 更新 uitableview 会阻塞 ui，直到数据被加载。我需要避免它。你能建议避免它的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:42:24.653

在“Cocoa is My Girlfriend”网站上有一篇关于 Coredata 和 Threads 的非常好的文章。正是这个问题已经解决，可以在后台更新uitableview。

[http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:24:08.107

创建一个后台队列，然后将您的代码放入

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    // put NSFetchedResults code here
}); 
```

这将阻止用户界面

# css - 通过css将输入按钮的值放在按钮旁边

> ID：16056493
> 
> 赞同：0
> 
> 时间：2013-04-17T09:33:16.133
> 
> 标签：css, button

我想知道这是否可能：如果我有一个输入字段：

```
<input type="button" value="some value" class="icon-button" /> 
```

它具有渐变背景、边框、框阴影等样式。

我想让按钮像一个图标，它的所有样式和旁边的值文本。我想到了这样的事情，但没有奏效：

```
.icon-button{
    display:block;
    width: 25px;
    height: 25px;
/* gradients, borders, shadows, etc. */
   text-indent: 30px;
   overflow: visible;
} 
```

任何想法？我知道我可以用 javascript 解决它，但我想知道是否有 css 方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:46:16.483

我认为您不会使用输入来实现这一点（至少不是很整齐）。如果您可以修改您的标记以使用实际按钮提交，那么这[非常简单](http://jsfiddle.net/cherryflavourpez/ktZJg/)：

```
<button type="submit">Some value</button> 
```

CSS：

```
button {
    line-height: 25px;
    border: none;
    background: transparent;
    cursor: pointer;
}

button::before {
    content: '';
    display:inline-block;
    vertical-align: middle;
    width: 25px;
    height: 25px;
    margin-right: 3px;
/* gradients, borders, shadows, etc. */
    background: red;
} 
```

如果需要 IE7 支持，您可以使用`span`而不是生成的内容。这种方法不适用于`input`，因为它不能包含任何元素，也不能生成内容。

如果您*需要*使用输入，则可以通过将其包装在跨度中并对其进行样式设置来实现相同的目的。

# web-services - WSO2：我在哪里可以找到好的 Web 服务政策文档

> ID：16056495
> 
> 赞同：0
> 
> 时间：2013-04-17T09:33:16.863
> 
> 标签：web-services, wso2, policy

**我需要使用网络服务政策**

要为我发现（认为）应该使用 ws 策略的服务创建 SLA，并将其放入 wsdl 文件中。但我不知道怎么做？！

我在哪里可以找到一个很好的文档呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:25:32.147

您可以在服务仪表板中访问它们。

请也参考此文档链接。 [http://docs.wso2.org/wiki/display/AS510/WS-Policy+Implementation](http://docs.wso2.org/wiki/display/AS510/WS-Policy+Implementation)

![在此处输入图像描述](https://i.stack.imgur.com/ShnKY.png)

![在此处输入图像描述](https://i.stack.imgur.com/cMaHJ.png)

# yii-extensions - 如何对 Yii 中关系表中的字段进行排序？

> ID：16056496
> 
> 赞同：1
> 
> 时间：2013-04-17T09:33:19.337
> 
> 标签：yii-extensions, yii, yii-components, yii-events

我正在尝试使用 Yii 列表视图实现排序。我在列表视图中加入了 2 个名为 provider_favourite 和 service_request 的表。两个表中的字段和内容都列在列表视图中。但是排序只在 provider_favourite 表中起作用，而不是在 service_request 表中。如何对 service_request 表中的字段进行排序？我正在使用 csort 进行排序。我也试过 CGrid 视图。但同样的问题也发生在网格视图中..
我使用以下代码加入

```
 $criteria = new CDbCriteria;
    $criteria->select = 'favourite_notes,favourite, favourite_added_date,max_budget,preferred_location,service_name';
    $criteria->join = 'LEFT JOIN service_request AS s ON  service_request_id = favourite';
    $criteria->condition = 'favourite_type = 1';
    $sort=new CSort('ProviderFavourite');
 //        $sort->defaultOrder='s.max_budget ';
    $sort->applyOrder($criteria);
    $sort->attributes = array(
            'max_budget' => 'service_request.max_budget',
            'service_name' => 'service_request.service_name',
            'favourite_added_date'
    );
        $type = 2;
    $data = new CActiveDataProvider('ProviderFavourite', array('criteria' => $criteria, 'pagination' => array('pageSize' => 4),'sort'=>$sort
            ));
    $this->renderPartial('favourites', array(
        'ModelInstance' => ProviderFavourite::model()->findAll($criteria),
        'dataProvider' => $data, 'type' => $type, 'sort'=>$sort,
    )); 
```

并且还在列表视图中提供可排序的属性

```
 $this->widget('zii.widgets.CListView', array('dataProvider'=>$dataProvider,'itemView'=>'index_1',     
         'id'=>'request',
         'template' => '  {items}{pager}',
         'sortableAttributes'=>array('favourite_notes','max_budget','service_name')
 )); 
```

如果需要更多细节，我会提供。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:22:27.017

您必须指定实例的[attributes](http://www.yiiframework.com/doc/api/1.1/CSort#attributes-detail)属性。`$sort`默认情况下，只有[$modelClass](http://www.yiiframework.com/doc/api/1.1/CSort#modelClass-detail)（`ProviderFavourite`在您的情况下）的字段是可排序的。

我认为它可能看起来像这样（未经测试）：

```
$sort->attributes = array(
    'service_name' => array(
        'asc' => 's.service_name ASC',
        'desc' => 's.service_name DESC'
    ),
    // ...another sortable virtual attributes from service_request table
    "*"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:10:28.710

您不应该`CSort`在`$sort`. 将`CActiveDataProvider`已经为您提供正确的排序对象。执行此操作的方式是`$criteria`在配置排序属性之前应用排序条件。那是行不通的。

您应该尝试这样的简单设置：

```
$data = new CActiveDataProvider('ProviderFavourite', array(
    'criteria' => $criteria, 
    'pagination' => array('pageSize' => 4),
    'sort'=> array(
        'attributes' => array(
            'service_name' => array(
                'asc' => 's.service_name ASC',
                'desc' => 's.service_name DESC'
           ),
           // ...
    ),
)); 
```

如果您需要访问相关`CSort`对象（如果您使用`CGridView`or ，通常不会这样做`CListView`，因为它们会为您处理），那么您可以通过`$data->sort`.

# google-chrome-extension - 使用注册表静默安装 chrome 扩展

> ID：16056498
> 
> 赞同：2
> 
> 时间：2013-04-17T09:33:24.613
> 
> 标签：google-chrome-extension

出于某种原因，我无法让它工作。我正在遵循此处描述的确切程序 [http://developer.chrome.com/extensions/external_extensions.html#registry](http://developer.chrome.com/extensions/external_extensions.html#registry)

而且我仍然无法列出扩展名。如果我手动安装它，使用“添加解压扩展”就可以了。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T02:54:21.627

关于这个主题[的众多文章之一：](http://thenextweb.com/google/2012/12/21/google-chrome-25-will-disable-silent-extension-installation-kill-all-such-extensions-retroactively/)

> 谷歌周五宣布，它正在改变其在浏览器中静默安装扩展程序的立场。从 Chrome 25 开始，Windows 上的外部扩展部署选项将默认禁用，之前使用它们安装的所有扩展都将自动禁用。

最好将扩展提交到 Chrome 网上应用店。如果您真的想在店外安装，请考虑[内联安装](https://developers.google.com/chrome/web-store/docs/inline_installation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:58:23.240

我也一直在努力通过注册表安装插件。我成功地安装了一个插件而不添加 reg 密钥。并使用首选项文件。

我将扩展名提取到`Local\Google\Chrome\User Data\Default\Extensions\${ADDONID}\${VERSION}`

然后，我将我的扩展名直接添加到<-- 添加您的扩展名部分下的`Preferences`文件中。将首选项文件与您已安装插件的实例进行比较。并将其与全新安装的扩展目录一起复制到首选项文件中。它应该工作。`Local\Google\Chrome\User Data\Default``extensions` `settings` `${ADDONID}`

这个线程给了我一些方向： [https ://superuser.com/questions/462804/how-to-copy-an-extension-from-one-chrome-installation-to-another](https://superuser.com/questions/462804/how-to-copy-an-extension-from-one-chrome-installation-to-another)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-01T07:12:32.740

可以通过为策略添加注册表项轻松完成

HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Chrome\ExtensionInstallForcelist

在此创建字符串值：1：“;file:///.xml”

创建一个 xml 文件并使用以下数据更新 xml 文件

```
<?xml version='1.0' encoding='UTF-8'?>
<gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'>
<app appid='<<YOUR_EXTENSION_ID>>'>
<updatecheck codebase='<<CRX_FILE_LOCATION>>.crx' version='4.0'/>
</app>
</gupdate> 
```

就是这样......重新启动Chrome

# sql - 如何在具有许多条目的一列上使用 group by？

> ID：16056499
> 
> 赞同：4
> 
> 时间：2013-04-17T09:33:27.930
> 
> 标签：sql, sql-server, tsql, group-by

我想在有很多条目的一列上使用 group by

表_a

```
Name price
AAA  12
BBB  13
AAA  0
CCC  24
AAA  0
DDD  0 
```

现在我想知道`Name`哪个`Price`是`0`

但由于我有`AAA`3 次条目，我不能直接用条件编写简单的 sql `NOT Equal to 0`

请帮助我我想打印上面 table_a 的结果应该是

只是`D`因为它具有`0`as `price`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:35:11.560

我假设价格不能低于零：

```
SELECT Name
FROM TableName
GROUP BY Name
HAVING SUM(price) = 0 
```

或者只有一个价格的附加条件，即零

```
SELECT Name
FROM TableName
GROUP BY Name
HAVING COUNT(*) = 1 AND SUM(price) = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:36:16.843

您可以通过使用聚合函数`GROUP BY`和`HAVING`子句来实现这一点：

[**SQLFiddle 演示**](http://www.sqlfiddle.com/#!3/63d97/1)

```
SELECT name,SUM(price) as price
FROM table 
GROUP BY name
HAVING SUM(price) = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:36:11.123

```
select name,max(price) as price from table group by name having max(price) =0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T09:37:07.120

```
select name,max(price)
group by name
having max(price)=0 
```

# python-2.7 - 适用于 Windows 的 Dbus-Python

> ID：16056501
> 
> 赞同：4
> 
> 时间：2013-04-17T09:33:38.013
> 
> 标签：python-2.7, dbus

谁能告诉我在 windows 7 32 位上哪个是 dbus python 的最佳库？我正在使用 Python 2.7。

我下载了 dbus-python 的最新 zip 并使用它，但它给出了许多导入错误，例如无法导入 dbus.exceptions 和没有名为 _dbus_bindings 的模块。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-08T22:59:54.283

[我从https://dl.dropbox.com/u/19049582/dbus.zip](https://dl.dropbox.com/u/19049582/dbus.zip)下载的 zip 存档对我有用（最初链接自文章[http://poquitopicante.blogspot.it/2012/07/building-dbus -python-on-windows-with.html](http://poquitopicante.blogspot.it/2012/07/building-dbus-python-on-windows-with.html) )

1）您创建一个名为“C:\dbus”的文件夹并在其中复制文件夹“bin”和“etc”

2) 将“C:\dbus\bin”添加到环境变量“Path”中

3）复制（合并）“C:\Python27\Lib”中的3个文件夹“lib\dbus-1.0”、“lib\pkgconfig”和“lib\site-packages”

就这样。

# git - 合并两个 git 存储库历史

> ID：16056506
> 
> 赞同：5
> 
> 时间：2013-04-17T09:33:43.747
> 
> 标签：git, svn, cvs

我想将 cvs 和 svn 存储库合并到一个新的 git 存储库中，当然不会丢失历史记录。问题是 svn 回购是 cvs 回购历史的直接延续。有人刚刚创建了 svn repo，然后笨拙地添加了 cvs 的最后一个状态，没有保留任何历史记录。最新的资源在 svn 中。我不想保留旧的回购。

图形的历史：

```
CVS: A - B - C
SVN: D - E - F - G 
```

我想要的是：

```
GIT: A - B - C - D - E - F - G 
```

我用 cvs2git 从 cvs 制作了一个 git repo，从 svn 制作了另一个 git repo，如[http://john.albin.net/git/convert-subversion-to-git](http://john.albin.net/git/convert-subversion-to-git)`git svn clone`中所述，但只是不知道如何结合二。我这样做了：

```
git clone cvs.git
cd cvs
git remote add svn ../../svn.git
git fetch svn 
```

怎么办？`git merge -s ours svn/master`似乎做了我想做的事，但没有创造线性历史：

```
A - B - C - - - H'
               /
D - E - F - G / 
```

任何实验`git rebase`都没有让我到任何地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:58:30.457

用于[`.git/info/grafts`](https://git.wiki.kernel.org/index.php/GraftPoint)连接历史，然后`git filter-branch`使其永久化。有一些描述有人如何做到这一点： http: [//bugsquash.blogspot.co.uk/2010/03/stitching-git-histories.html](http://bugsquash.blogspot.co.uk/2010/03/stitching-git-histories.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:29:21.963

使用 kan 写的我想出了这个解决方案：

```
git clone cvs.git
cd cvs
git remote add svn ../../svn.git
git fetch svn 
```

用于`git log --all`查找未连接的历史记录：

```
...
|
* ab42f52 2011-09-14 06:03:07 +0000 |  [svnuser]
|
* 1985b93 2011-09-14 06:00:00 +0000 | Migration from CVS [svnuser]

* 12e0ed4 2011-09-14 05:58:10 +0000 | *** empty log message *** (HEAD, origin/master, origin/HEAD, master) [cvsuser]
|
* 5060a7f 2011-04-18 14:07:03 +0000 | *** empty log message *** [cvsuser]
|
... 
```

找到完整的 SHA1：

```
git show 1985b93
git show 12e0ed4 
```

创建嫁接：

```
echo 1985b9305ebc819e760f7ecf8e2abe7963eac055 12e0ed4c3dd75cec396a2d228825702eab73ba19 > .git/info/grafts 
```

现在历史是相互关联的，但还不是永久的：

```
|
* ab42f52 2011-09-14 06:03:07 +0000 |  [svnuser]
|
* 1985b93 2011-09-14 06:00:00 +0000 | Migration from CVS (grafted) [svnuser]
|
* 12e0ed4 2011-09-14 05:58:10 +0000 | *** empty log message *** (HEAD, origin/master, origin/HEAD, master) [cvsuser]
|
* 5060a7f 2011-04-18 14:07:03 +0000 | *** empty log message *** [cvsuser]
| 
```

使其永久化，如[http://bugsquash.blogspot.co.uk/2010/03/stitching-git-histories.html](http://bugsquash.blogspot.co.uk/2010/03/stitching-git-histories.html)所示：

```
git branch svnmaster svn/master
git filter-branch -- 12e0ed4c3dd75cec396a2d228825702eab73ba19..svnmaster 
```

这会创建新的提交，但也会留下原始的 svn 提交。 `git log --all`将显示它：

```
* 849278b 2013-04-15 16:31:44 +0000 | Java 6 in Eclipse.  Deployed. (svnmaster) [svnuser]
|
...
|
* c33f7cc 2011-09-14 06:03:07 +0000 |  [svnuser]
|
* 7acb3ed 2011-09-14 06:00:00 +0000 | Migration from CVS [svnuser]
|
| * b3d5413 2013-04-15 16:31:44 +0000 | Java 6 in Eclipse.  Deployed. (svn/master, refs/original/refs/heads/svnmaster) [svnuser]
| |
...
| |
| * ab42f52 2011-09-14 06:03:07 +0000 |  [svnuser]
| |
| * 1985b93 2011-09-14 06:00:00 +0000 | Migration from CVS (grafted) [svnuser]
|/
|
* 12e0ed4 2011-09-14 05:58:10 +0000 | *** empty log message *** (HEAD, origin/master, origin/HEAD, master) [cvsuser]
|
* 5060a7f 2011-04-18 14:07:03 +0000 | *** empty log message *** [cvsuser]
| 
```

移除嫁接，重复的历史将消失：

```
rm -r .git/info/grafts .git/refs/original 
```

清理：

```
git reset --hard svnmaster
git branch -D svnmaster 
```

并推动：

```
git push 
```

全部做完！

# android - 从 YouTube 视频预览

> ID：16056507
> 
> 赞同：3
> 
> 时间：2013-04-17T09:33:44.213
> 
> 标签：android, android-listview, youtube-api

我想开发一个在 ListView 中显示 YouTube 视频的应用程序。就像原始的 YouTube 应用程序一样，但没有视频加载。只有一个显示视频的 ListView，只需单击一下即可转到加载视频的 YouTube 应用程序。

但是如何在我的应用中显示视频预览？我可以使用 API 或其他技巧吗？我的第一个想法是我从每个视频中制作一个图像......但是..是的！:)

这是一个示例图像 ![在此处输入图像描述](https://i.stack.imgur.com/8vyOY.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T09:54:23.773

您可以向此地址发送 http 帖子：

```
http://www.youtube.com/oembed?url={complete youtube url}&format=json 
```

其中 {complete youtube url} 是视频的完整 url。

例如：

```
http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=AJ0sW7KOFhU&format=json 
```

应该回答你这个 JSON：

```
{
author_url: "http://www.youtube.com/user/neiljohnson666",
version: "1.0",
provider_name: "YouTube",
provider_url: "http://www.youtube.com/",
thumbnail_url: "http://i2.ytimg.com/vi/AJ0sW7KOFhU/hqdefault.jpg",
author_name: "Neil Johnson",
type: "video",
width: 480,
height: 270,
title: "Manowar - Warriors of the World HD",
thumbnail_width: 480,
html: "<iframe width="480" height="270" src="http://www.youtube.com/embed/AJ0sW7KOFhU?        feature=oembed" frameborder="0" allowfullscreen></iframe>",
thumbnail_height: 360
} 
```

因此 thumbnail_url 是您要查找的图像：

![那个 thumbnail_url](https://i.stack.imgur.com/Tu8ug.jpg)

希望有帮助，加油！

# opengl-es - OpenGL ES。给定路径上的纹理映射

> ID：16056508
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:33:50.647
> 
> 标签：opengl-es, path, texture-mapping

需要在给定路径上应用纹理。路径是一组点。

告诉我如何做或在哪里阅读有关如何在 Opengl ES 上做的信息？

![在此处输入图像描述](https://i.stack.imgur.com/qBOsu.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:16:48.400

我会认为你有足够的点让形状看起来足够好，否则你应该做一些插值来获得更多的点。

我建议您从这些点创建一个二维顶点数组（如果您愿意，可以创建一个矩形数组）。在每一点你需要2个顶点（v1，v2）：

```
vector position = currentPoint;
vector way = nextPoint - currentPoint;
vector normal = normalized(way.y, -way.x);

v1 = position + normal*(ropeWidth*.5);
v1 = position - normal*(ropeWidth*.5); 
```

您可能会将其放在一个`for`循环中，您还需要设置纹理坐标，其中 X 始终设置为 1.0 和 -1.0，Y 用于迭代器`i`，因为`i/pointCount`（`i`需要浮动）

此时，您可能只需绑定纹理并绘制三角形条。

# vba - Excel VBA复制到空白行

> ID：16056511
> 
> 赞同：2
> 
> 时间：2013-04-17T09:33:56.903
> 
> 标签：vba, excel

我在使用 VBA 子例程时遇到了一些困难，该子例程获取在 Excel 工作簿的第一张工作表上输入的信息 - “条目”，并将其粘贴到同一工作簿 - “数据库”内的单独工作表中。我需要的是将数据添加到数据库的下一个空行。

我很欣赏这是一个很常见的问题，但我一直在谷歌上寻找今天早上最好的部分，但不能完全理解！到目前为止我管理的代码将复制数据，但总是会覆盖第一行：

```
Sub CopyDataToDatabase()

Application.ScreenUpdating = False

Dim r As Range
Set r = Sheets("Entry").Range("B6:M6")
For Each cell In r
    If IsEmpty(cell) Then
        MsgBox ("Error - all boxes must be filled in!")
        Cancel = True
        Exit Sub
        Exit For
    End If
Next

Dim NextRow As Range
Set NextRow = Sheets("Database").Range("A2:L2").End(xlUp).Offset(1, 0)
'  Set NextRow = Sheets("Database").Range("A" & Rows.Count).End(xlUp).Row + 1
Sheets("Entry").Range("B6:M6").Copy
NextRow.PasteSpecial (xlValues)

MsgBox ("Data added successfully!")

Sheets("Entry").Range("B6:M6").ClearContents

Application.CutCopyMode = False
Application.ScreenUpdating = True
End Sub 
```

Set NextRow 的注释是我尝试过的另一种方法，它不起作用（错误是“需要对象”）。

感谢您提供任何帮助，如果您能解释一下，那就更是如此 - 因为我对 VBA 有点陌生！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:40:58.920

您注释掉的行几乎是正确的方法。尝试这个

```
Set NextRow = Sheets("Database").Range("A" & Rows.Count).End(xlUp).Offset(1,0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:36:22.817

有 Sheet property `UsedRange`，但根据我的经验，它很容易出错。我总是这样做的方式是遍历行以找到第一个空行。

```
Dim iRow as integer
iRow = 1
Dim ws as Worksheet
Set ws = Worksheets("Database")
Do While ws.Cells(iRow, 1) <> ""
    iRow = iRow + 1
Loop 
```

一般来说，在编写 VBA 代码时，我会尽量避免模拟我作为用户使用 Excel 所做的事情（例如使用`Selection`对象或模拟按键）。

# r - 将日期格式转换为 ddmmyyyy

> ID：16056524
> 
> 赞同：0
> 
> 时间：2013-04-17T09:34:30.633
> 
> 标签：r, date, format

* * *

我有一组以日期为列的数据。当我打开 csv 文件时，我看到如下格式

```
22/02/2013 23:10    
22/02/2013 23:20   
23/02/2013 00:20   
22/02/2013 23:10   
22/02/2013 23:59 
```

但是当我阅读这个文件并打印出日期格式如下：

```
> head(tow$X22)
[1] "23:10 / 22-Feb" "23:20 / 22-Feb" "00:20 / 23-Feb" "23:10 / 22-Feb"
[5] "23:59 / 22-Feb" "23:15 / 22-Feb" 
```

我尝试使用我能找到的所有选项将这些数据转换为“ddmmyyyy”格式，如下所示：

```
 tow$X22 <- as.Date(as.character(tow$X22),format="%d-%m-%y")      
  tow$X22 <- strptime(tow$X22,"%d%m%Y")        
  tow$X22 <- strftime(tow$X22,"%d%m%Y")    
  tow$X22 <- strftime(as.character(tow$X22),"%d%m%Y")     
  tow$X22 <- as.Date(tow$X22,"%d%m%Y") 
```

但没有任何效果。结果都给出了 NA

请指教，我哪里出错了。

我的数据如下： X01 X02 X03 X04 X05 X06 X07 X08 X09 X10 X11 X12 X13 X14 X15 X16 X17 X18 X19 X20 X21 X22 TOW OUT EK0134--EK0705 NA C40---D02 4318 - TBL600 TOW OUT FM C40 TO HGR P 0010 A- NA 1 TOW OUT PUSH_TOW_OUT PUSH_TOW_OUT 22/02/2013 23:53 23/02/2013 00:21 星期六 23/02/2013 00:16 23/02/2013 00:21 5 完成 22/02/2013 22: 55 24/02/2013 02:30 24/02/2013 02:44 22/02/2013 23:10 拖出 EK0726--EK0650 NA E41---D03 4507 - TBL400 拖出 FM E41 TO HGR P 0001 A- 0008/0025 NA 1 TOW OUT PUSH_TOW_OUT PUSH_TOW_OUT 22/02/2013 23:55 23/02/2013 00:13 星期六 23/02/2013 00:08 23/02/2013 00:25 17 完成 22/02/2013 23 :19 24/02/2013 02:45 24/02/2013 02:59 22/02/2013 23:20 TOW IN EK0176--EK0658 NA D02---B24 4508 - TBL400 TOW IN D02 TO B24 P-0045 A - NA 1 TOW IN PUSH_TOW_DEP PUSH_TOW_DEP 23/02/2013 00:36 23/02/2013 01:18 星期六 23/02/2013 01:13 23/02/2013 01：26 13 完成 22/02/2013 23:48 23/02/2013 03:15 23/02/2013 03:25 23/02/2013 00:20 TOW OUT EK0383--EK0308 NA E26---A03 4507 - TBL400 TOW OUT FM E26 TO HGR P-0030 A- NA 1 TOW OUT PUSH_TOW_OUT PUSH_TOW_OUT 23/02/2013 00:43 23/02/2013 01:32 星期六 23/02/2013 00:46 23/02/2013 01:03 17 完成 22/02/2013 22:47 23/02/2013 11:20 23/02/2013 11:43 22/02/2013 23:10

我的代码如下：

```
tow <-read.csv(file.choose(),skip=3)   
tow<-subset(tow,tow[1]!="Special Task")   
#SPLITTING FLIGHT NUMBERS AND ADDING TO DATA FRAME
a<-data.frame(do.call(rbind,strsplit(as.character(tow$X02),"--")))
if(nrow(tow)!=nrow(a)) cat("ERROR IN FLIGHT NUMBERS *** PLEASE CHECK","\n")
names(a)<-c("Arr","Dep")
tow<-cbind(tow,a)

#IDENTIFYING & REMOVING COLUMNS WHICH ARE NOT HAVING ARRIVAL & DEPARTURE TIMES
 tow<-subset(tow,tow[20]!="")
 a<-data.frame(do.call(rbind,strsplit(as.character(tow$X20)," ")))
 if(nrow(tow)!=nrow(a)) cat("ERROR IN DEPARTURE DATE & TIME *** PLEASE CHECK","\n")
 names(a)<-c("DD","DT")
 tow<-cbind(tow,a)

tow<-subset(tow,tow[22]!="")
a<-data.frame(do.call(rbind,strsplit(as.character(tow$X22)," ")))
if(nrow(tow)!=nrow(a)) cat("ERROR IN ARRIVAL DATE & TIME *** PLEASE CHECK","\n")
names(a)<-c("DD","DT")
tow<-cbind(tow,a)

#IDENTIFYING & REMOVING COLUMNS WHICH ARE NOT HAVING ARRIVAL & DEPARTURE TIMES
tow<-subset(tow,tow[20]!="")
a<-data.frame(do.call(rbind,strsplit(as.character(tow$X20)," ")))
if(nrow(tow)!=nrow(a)) cat("ERROR IN DEPARTURE DATE & TIME *** PLEASE CHECK","\n")
names(a)<-c("DD","DT")
tow<-cbind(tow,a)

tow<-subset(tow,tow[22]!="")
a<-data.frame(do.call(rbind,strsplit(as.character(tow$X22)," ")))
if(nrow(tow)!=nrow(a)) cat("ERROR IN ARRIVAL DATE & TIME *** PLEASE CHECK","\n")
names(a)<-c("DD","DT")
tow<-cbind(tow,a) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:42:44.263

尝试这个：

```
df <- read.table(text=
"22/02/2013 23:10
22/02/2013 23:20
23/02/2013 00:20
22/02/2013 23:10
22/02/2013 23:59", stringsAsFactors=F)

strptime(df$V1, "%d/%m/%Y")
[1] "2013-02-22" "2013-02-22" "2013-02-23" "2013-02-22" "2013-02-22" 
```

# sql - SQL - 将多行中的数据放入单行

> ID：16056529
> 
> 赞同：9
> 
> 时间：2013-04-17T09:34:41.870
> 
> 标签：sql, sql-server, sql-server-2005

我有一个看起来类似于这里的表：

```
SetId       AppCode       AppEventId       EventId       FieldId       ValueData
2012/2013     1000         361616             16            1            UNI     
2012/2013     1000         361616             16            2            Isolation
2012/2013     1000         361616             16            3            DN
2012/2013     1050         378194             16            1            BUL
2012/2013     1050         378194             16            2            Isolation
2012/2013     1050         378194             16            3            RD 
```

当它们具有相同的 AppCode 时，我希望能够组合所有这些数据。

看起来像这样：

```
SetId       AppCode       AppEventId       EventId       ValueData1      ValueData2      ValueData3
2012/2013     1000         361616             16            UNI            Isolation        DN
2012/2013     1050         378194             16            BUL            Isolation        RD 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T09:53:36.977

尝试这个

```
 SELECT SetId, AppCode, AppEventId, EventId 
  ,max(CASE WHEN FieldId = 1 THEN ValueData END) AS ValueData1
  ,max(CASE WHEN FieldId = 2 THEN ValueData END) AS ValueData2
  ,max(CASE WHEN FieldId = 3 THEN ValueData END) AS ValueData3
   FROM Table_Name 
   GROUP BY SetId,AppCode,AppEventId,EventId 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T10:32:21.250

这可以通过应用从 SQL Server 2005 开始提供 的[PIVOT函数来完成。](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)

如果您有一个已知或设定数量的值要转换为列，那么您可以对查询进行硬编码：

```
select setid, appcode, appeventid,
  eventid,
  ValueData1, ValueData2, ValueData3
from
(
  select setid, appcode, appeventid,
    eventid,
    'ValueData'+cast(FieldId as varchar(10)) FieldId, 
    ValueData
  from yt
) d
pivot
(
  max(ValueData)
  for FieldId in (ValueData1, ValueData2, ValueData3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bc6cf/5)。

但是如果你有未知数量的值，那么你将需要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('ValueData'+cast(FieldId as varchar(10))) 
                    from yt
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT setid, appcode, appeventid,
                  eventid,' + @cols + ' 
            from 
            (
                select setid, appcode, appeventid,
                  eventid,
                  ''ValueData''+cast(FieldId as varchar(10)) FieldId, 
                  ValueData
                from yt
            ) x
            pivot 
            (
                max(ValueData)
                for FieldId in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bc6cf/7)。两个查询给出相同的结果：

```
|     SETID | APPCODE | APPEVENTID | EVENTID | VALUEDATA1 | VALUEDATA2 | VALUEDATA3 |
-------------------------------------------------------------------------------------
| 2012/2013 |    1000 |     361616 |      16 |        UNI |  Isolation |         DN |
| 2012/2013 |    1050 |     378194 |      16 |        BUL |  Isolation |         RD | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:37:40.303

**更新：**

改善答案 -

```
DECLARE @temp TABLE
(
        SetId VARCHAR(9)       
      , AppCode CHAR(4)      
      , AppEventId INT      
      , EventId INT      
      , FieldId TINYINT      
      , ValueData VARCHAR(50)
)

INSERT INTO @temp (SetId, AppCode, AppEventId, EventId, FieldId, ValueData)
VALUES 
    ('2012/2013',     '1000',         361616,             16,            1,            'UNI'),    
    ('2012/2013',     '1000',         361616,             16,            2,            'Isolation'),
    ('2012/2013',     '1000',         361616,             16,            3,            'DN'),
    ('2012/2013',     '1050',         378194,             16,            1,            'BUL'),
    ('2012/2013',     '1050',         378194,             16,            2,            'Isolation'),
    ('2012/2013',     '1050',         378194,             16,            3,            'RD')

;WITH tbl AS 
(
    SELECT  
            PK = t.SetId + t.AppCode + CAST(AppEventId AS VARCHAR(10)) + CAST(EventId AS VARCHAR(5))
          , t.SetId
          , t.AppCode
          , t.AppEventId
          , t.EventId
          , t.FieldId
          , t.ValueData
    FROM @temp t
) 
SELECT DISTINCT 
      t.SetId
    , t.AppCode
    , t.AppEventId
    , t.EventId
    , t2.ValueData
    , t3.ValueData
    , t4.ValueData
FROM tbl t
JOIN tbl t2 ON t.PK = t2.PK AND t2.FieldId = 1
JOIN tbl t3 ON t.PK = t3.PK AND t3.FieldId = 2
JOIN tbl t4 ON t.PK = t4.PK AND t4.FieldId = 3 
```

不优雅，但它有效 -

```
DECLARE @temp TABLE
(
        SetId VARCHAR(9)       
      , AppCode CHAR(4)      
      , AppEventId INT      
      , EventId INT      
      , FieldId TINYINT      
      , ValueData VARCHAR(50)
)

INSERT INTO @temp (SetId, AppCode, AppEventId, EventId, FieldId, ValueData)
VALUES 
    ('2012/2013',     '1000',         361616,             16,            1,            'UNI'),    
    ('2012/2013',     '1000',         361616,             16,            2,            'Isolation'),
    ('2012/2013',     '1000',         361616,             16,            3,            'DN'),
    ('2012/2013',     '1050',         378194,             16,            1,            'BUL'),
    ('2012/2013',     '1050',         378194,             16,            2,            'Isolation'),
    ('2012/2013',     '1050',         378194,             16,            3,            'RD')

SELECT  t.SetId
    ,   t.AppCode
    ,   t.AppEventId
    ,   t.EventId
    ,   t2.ValueData
    ,   t3.ValueData
    ,   t4.ValueData
FROM (
    SELECT  
          t.SetId
        , t.AppCode
        , t.AppEventId
        , t.EventId
        , FieldId1 = MAX(CASE WHEN t.FieldId = 1 THEN t.FieldId END)
        , FieldId2 = MAX(CASE WHEN t.FieldId = 2 THEN t.FieldId END)
        , FieldId3 = MAX(CASE WHEN t.FieldId = 3 THEN t.FieldId END)
    FROM @temp t
    GROUP BY 
          t.SetId
        , t.AppCode
        , t.AppEventId
        , t.EventId
) t
JOIN @temp t2 ON t.SetId = t2.SetId
        AND t.AppCode = t2.AppCode
        AND t.AppEventId = t2.AppEventId
        AND t.EventId = t2.EventId
        AND t2.FieldId = 1
JOIN @temp t3 ON t.SetId = t3.SetId
        AND t.AppCode = t3.AppCode
        AND t.AppEventId = t3.AppEventId
        AND t.EventId = t3.EventId
        AND t3.FieldId = 2
JOIN @temp t4 ON t.SetId = t4.SetId
        AND t.AppCode = t4.AppCode
        AND t.AppEventId = t4.AppEventId
        AND t.EventId = t4.EventId
        AND t4.FieldId = 3 
```

# perl - perl 包中的混乱

> ID：16056531
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:34:43.887
> 
> 标签：perl, package

我有两个文件，下面的文件是“Packages_module.pl”，

```
use pack_modules; 
$var = 1;
print "var is $var\n";
&pack_module::check_scope($var);
print "var is $var\n"; 
```

第二个文件是“pack_modules.pm”，代码如下

```
package pack_module;
use Exporter;
@ISA = qw/Exporter/;
@EXPORT = qw/$var/;
our ($var);
sub check_scope 
{
    $var = 3;
}
1; 
```

当我运行 pack_modules.pm 时，我得到了以下结果。

```
 var is 1
    ==========
    Using Module Subroutine:
    var is 1
    ========== 
```

第一次，'$var' 显然是 1，但第二次它再次给出 1 而不是 3。谁能告诉我为什么“pack_module”的值在“Packages_module”中不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:15:15.490

`use pack_modules`相当于`BEGIN { require pack_modules; pack_modules->import; }`

由于您的模块文件名为`pack_modules.pm`，因此该`require`步骤可以正常工作。

然后它调用`pack_modules->import`which 绝对什么都不做，因为该文件包含一个名为`pack_module`. `pack_module`如果您的主程序正在从`pack_modules`（带有“s”）导入符号，那么导出什么（没有最后的“s”）并不重要。

将模块文件中的第一行更改为`package pack_modules;`，将主程序中的子调用更改为`pack_modules::check_scope($var);`，它应该可以工作。（附带说明，不要在对用户定义函数的调用前加上`&`。这是 Perl 4 的保留，在 Perl 5 中不是必需的，并且具有您可能不打算调用的副作用。）

顺便说一句，如果你用 启动你的程序`use strict;`，它会给你一些关于这个问题的原因的额外线索，通过`Global symbol "$var" requires explicit package name`在你的主程序中抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:45:48.120

主要问题：

您不是在导出`$var`，而是`$var2`. 如果您 export `$var`，该值会改变。

此外，您使用`pack_moudles`，但包名为`pack_module`.

但是，还有一些更小的问题：您正在`check_scope`使用参数进行调用，但您从未在子例程的主体中检索参数。相反，您更改了全局变量的值`$var`。

# javascript - .each() 和 eval() 的问题

> ID：16056533
> 
> 赞同：1
> 
> 时间：2013-04-17T09:34:46.777
> 
> 标签：javascript, jquery, json, knockout.js, eval

我正在使用 Knockout 创建一个使用来自 json 对象的数据进行评估的方程式

```
var EqunCreated = ["Salary", "Tax", "Gross_Salary"];

$.each(EqunCreated, function (index, lhs) {
    var Equation = "self." + lhs + "=ko.computed(function(){ return self.Eqn() && eval(self.Eqn()).toFixed(2); })";
    console.log(eval("self." + lhs + "=ko.computed(function(){ return self.Eqn() && eval(self.Eqn()).toFixed(2); })"));
    console.log(lhs);
}); 
```

我这里有问题。得到错误

```
function h(){if(0<arguments.length)return"function"===typeof v?v.apply(d,arguments):j(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this;n||g();b.r.Wa(h);return l} 
```

但是，如果我评估`self.Eqn()`我会得到正确的答案。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:38:55.450

不太确定 self 是什么，但我认为您不需要使用 eval

```
var EqunCreated = ["Salary", "Tax", "Gross_Salary"];

$.each(EqunCreated, function (index, lhs) {
    var Equation = self[lhs] = ko.computed(function(){ return self.Eqn() && parseFloat(self.Eqn()).toFixed(2); });

    console.log(Equation());
}); 
```

# c - 为什么这个程序会导致溢出？

> ID：16056536
> 
> 赞同：3
> 
> 时间：2013-04-17T09:35:11.650
> 
> 标签：c

```
#include <stdio.h>
int main(void)
{
    char test = 0x80;
    printf("%c\n", test);  /* To remove the "unused" warning */
    return 0;
} 
```

我知道一个字符保证是**一个**字节。0x80 也是一个字节。那么为什么我会收到以下错误/警告？

> 错误：隐式常量转换溢出 [-Werror=overflow]

就我而言，这是一个错误，因为我将警告视为错误。

0x80 是出现此警告/错误的最小值。如果我将其更改为 0x7F，则可以正常编译。我使用带有“C99 strict”选项的[ideone.com来编译代码。](http://ideone.com/9G1SLT)它报告使用 gcc-4.7.2。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:36:14.330

该`char`类型在您的编译器中签名，因此即使它确实有 8 位信息，它也不能存储大于 127 (0x7f) 的值。

标头`<limits.h>`定义了允许您确定整数类型的符号和范围限制的宏，包括`char`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:48:10.193

变量 test 定义为 char，默认为有符号字符。范围为 0 ~ 127（7 位）。最后一位保留用于符号。可能错误是由于尝试打印具有负值的字符（0x80 = -128）。

尝试使用 unsigned char 进行测试并检查是否遇到相同的错误。

# .net - Google OAuth 2：Windows 商店应用程序中令牌请求的 bad_request 错误

> ID：16056544
> 
> 赞同：0
> 
> 时间：2013-04-17T09:35:28.833
> 
> 标签：.net, windows-runtime, google-api, oauth-2.0, windows-store-apps

我正在使用 google auth 从 Windows Store App 访问 GMail。我得到了成功的授权码，现在我正在尝试将其换成访问码。我按照 Google Gide 中针对已安装应用程序的描述发送了 POST 查询：[https](https://developers.google.com/accounts/docs/OAuth2InstalledApp) ://developers.google.com/accounts/docs/OAuth2InstalledApp 。feedler 捕获了我的 POST 查询：

```
POST https://accounts.google.com/o/oauth2/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: accounts.google.com
Content-Length: 193
Expect: 100-continue
Connection: Keep-Alive

code=4/_ynXWYzGSols1p7lzuVBc59iGhgo& client_id={my client_id obtained during application registration}   &     client_secret={ my client secret obtained during application registration encoded by Uri.EscapeDataString()}& redirect_uri={ urn:ietf:wg:oauth:2.0:oobencoded by Uri.EscapeDataString()} & grant_type=authorization_code 
```

服务器返回“（400）错误请求”。我的请求有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:42:37.017

不要诉诸`Uri.EscapeDataString()`价值观。如果您查看链接到的页面上的示例，它们也不会被转义。

这是我正在使用的代码片段：

```
var form = new Dictionary<string, string>
    {
        {"code", authenticationCode},
        {"client_id", Keys.ClientId},
        {"client_secret", Keys.ClientSecret},
        {"redirect_uri", "urn:ietf:wg:oauth:2.0:oob"},
        {"grant_type", "authorization_code"},
    };
var content = new FormUrlEncodedContent(form);

var client = new HttpClient();
var response = await client.PostAsync("https://accounts.google.com/o/oauth2/token", content);
var json = await response.Content.ReadAsStringAsync(); 
```

# ios - 获取所有玩此游戏的游戏中心好友

> ID：16056548
> 
> 赞同：2
> 
> 时间：2013-04-17T09:35:37.297
> 
> 标签：ios, objective-c, game-center

我想要一个本地玩家的所有朋友的列表，他们也玩我的游戏。

我想过在每个排行榜上查询每个朋友的分数，并找到不同的玩家：

```
GKLeaderboard *allScoresEver = [[GKLeaderboard alloc] init];
allScoresEver.playerScope = GKLeaderboardPlayerScopeFriendsOnly;
allScoresEver.range = NSMakeRange(1,100);
allScoresEver.category = nil;

[allScoresEver loadScoresWithCompletionHandler:^(NSArray *scores, NSError *error) {

        // filter out distinct players, favouring scores from our leaderboard
        ...
    }]; 
```

...但这似乎只返回本地玩家的最后报告分数，而不是每个排行榜的每个分数，由朋友过滤。[文档](https://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKLeaderboard_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLeaderboard/category)说将类别设置为 nil 应该返回“游戏之前报告的所有分数”。我想这意味着游戏的运行实例，而不是全球应用程序意义上的游戏？

关于获得我想要的结果的有效方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:38:49.257

尝试类似的代码，当类别设置为 时，我得到的不仅仅是本地玩家的结果`nil`，但我似乎只得到默认排行榜的结果。我认为这是有道理的，因为要求所有排行榜的所有结果最终可能会得到大量数据，但这不是文档会让你相信的。就个人而言，为了解决类似的问题，我只是询问一个排行榜，每个至少玩过一次的玩家都应该有一个条目，而不是每个排行榜。似乎奇怪的是，没有更好的方法来获取此信息，因为 Game Center 本身知道谁下载了该应用程序。

编辑：这似乎`range = NSMakeRange(1, 100);`是一个硬限制，考虑到你最多可以有 500 个朋友，这意味着这仍然不是一个有用的测试来让所有也玩游戏的朋友。但是，您可以使用 playerID 列表创建排行榜，因此：

```
GKLeaderboard *query = [[GKLeaderboard alloc] initWithPlayerIDs:[GKLocalPlayer localPlayer].friends]; 
```

将是处理它的一种方法。我已经用 500 个玩家 ID 加上最后我的朋友列表的虚拟数组对此进行了测试，它确实有效，但如果可以用 500 个实际朋友进行测试，我会感觉更好 - 我只是没有时间制作商场！

# vb.net - 在不按 F5 的情况下启动 VB.NET 应用程序

> ID：16056549
> 
> 赞同：0
> 
> 时间：2013-04-17T09:35:40.293
> 
> 标签：vb.net, visual-studio-2010

我在 VS 2010 中开发了一个小应用程序（使用 VB.NET）。我的应用程序与另一个 .exe 文件通信并共享信息。我希望我的应用程序在另一个 .exe 文件启动时开始运行。这可能吗？我听说过 VS 2010 中的附加到进程选项，它是如何工作的，它会满足我的要求吗？

关于，南门

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:40:10.550

附加到进程只会将调试器附加到已经运行的进程 - 它不会为您运行它。

您可以随时通过转到`bin`它所在的目录并运行它来启动另一个应用程序。

如果要自动执行此操作，可以查看`Build events`项目属性的选项卡并设置指向其他可执行文件的构建后事件。这将在构建完成后启动另一个可执行文件。

# c# - Webdriver C# 页面对象模型中的 AjaxElementLocatorFactory

> ID：16056550
> 
> 赞同：1
> 
> 时间：2013-04-17T09:35:44.873
> 
> 标签：c#, webdriver, selenium-webdriver

在 C# webdriver 中是否有与 AjaxElementLocatorFactory 等效的东西，我一直在搜索，并且一直在寻找与 java 相关的示例和文档。有人能告诉我在哪里可以找到文档，或者有人给我一个小例子，提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T23:27:53.533

经过一番挖掘，它似乎`AjaxElementLocatorFactory`是[`RetryingElementLocatorFactory`](https://github.com/SeleniumHQ/selenium/blob/master/dotnet/src/support/PageObjects/RetryingElementLocatorFactory.cs)在 API 的 .NET 版本中实现的。不幸的是，该实现尚未包含在任何 Nuget Selenium 包中。如果您立即需要它，可以考虑将这些类直接集成到您的项目中。

# inheritance - C#，存储/访问共享成员

> ID：16056551
> 
> 赞同：0
> 
> 时间：2013-04-17T09:35:46.667
> 
> 标签：inheritance

我希望有许多从基类派生的类似子类（单例）（最好是抽象的，因为不需要创建基类）。这些子类相互交互，最重要的是，我希望它们共享对特定数据池的引用（不是很多）。

这听起来像是一个常见的场景，但我不确定最好的设计是什么？也许我的脑子有点出问题了。

我认为没有必要将公共/共享成员从类结构中分离出来，但我不确定如何最好地存储/访问它。我想尽量避免传递它，尽管在功能上它可能是有意义的。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:44:44.477

我会避免按照建议使用静态。我发现在大多数情况下这是不好的做法（[你应该避免使用静态类吗？](https://stackoverflow.com/questions/1315086/should-you-avoid-static-classes)）。

另一种方法是创建一个 DataPool 类（和 IDataPool 接口），并将一个实例（只有一个实例）注入到您的单例中（单例类接受 IDataPool 参数）。

然后，此 DataPool 类将提供与池数据交互所需的所有方法，并保存数据本身。事实上，它抽象了访问数据的方式，因此很容易在你的单例类中重用。

您可以使用 IoC 容器来决定生命周期，或者使用 new 运算符在其他地方创建实例。

这样，也很容易模拟或替换数据池（例如在您的测试中）。

# mongodb - 如果分片键是小整数，则不会分发 Mongo 分片集合

> ID：16056553
> 
> 赞同：2
> 
> 时间：2013-04-17T09:35:47.440
> 
> 标签：mongodb, sharding, mongo-java

我们在 sharded mongo 环境中进行了模拟测试，但是如果 shard key 值为 small int，则集合没有分发，但如果 shard key 为 big int，则工作正常。请继续阅读...

用于从 mongos shell 插入记录的代码。

```
var shId = 15;
for (var i = 0; i < 100; i++) {
  if(i%50 == 0){
      shId = shId + 1;
  }
  db.Foo.insert( { shKeyId : shId , text:"this is a test" } );
} 
```

使用 shId = 15，Foo 集合拆分为两个分片不起作用。

环境：两个分片，每个分片具有 Primary1 和两个辅助 mongod 实例。Mongo 配置正在其中一个分片上运行。

通过 shKeyId 对 'Foo' 集合启用分片作为散列分片键。db.runCommand({ shardcollection : "test.Foo", key : {shKeyId : "hashed"}});

sh.status() 输出

```
mongos> sh.status();
--- Sharding Status --- 
  sharding version: {
    "_id" : 1,
    "version" : 3,
    "minCompatibleVersion" : 3,
    "currentVersion" : 4,
    "clusterId" : ObjectId("516ea48e979736fd306973c9")
}
  shards:
    {  "_id" : "mongo-perf-shrd1",  "host" : "mongo-perf-shrd1/sh1-prim-ip:27017,sh1-sec1-ip:27017,sh1-sec2-ip:27017" }
    {  "_id" : "mongo-perf-shrd2",  "host" : "mongo-perf-shrd2/sh2-prim-ip:27017,sh2-sec1-ip:27017,sh2-sec2-ip:27017" }
  databases:
    {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }

    {  "_id" : "test",  "partitioned" : true,  "primary" : "mongo-perf-shrd2" }
        test.Foo
            shard key: { "shKeyId" : "hashed" }
            chunks:
                mongo-perf-shrd2    2
                mongo-perf-shrd1    2
            { "shKeyId" : { "$minKey" : 1 } } -->> { "shKeyId" : NumberLong("-4611686018427387902") } on : mongo-perf-shrd2 { "t" : 2, "i" : 2 } 
            { "shKeyId" : NumberLong("-4611686018427387902") } -->> { "shKeyId" : NumberLong(0) } on : mongo-perf-shrd2 { "t" : 2, "i" : 3 } 
            { "shKeyId" : NumberLong(0) } -->> { "shKeyId" : NumberLong("4611686018427387902") } on : mongo-perf-shrd1 { "t" : 2, "i" : 4 } 
            { "shKeyId" : NumberLong("4611686018427387902") } -->> { "shKeyId" : { "$maxKey" : 1 } } on : mongo-perf-shrd1 { "t" : 2, "i" : 5 } 
```

**分片分布输出**

```
 mongos> db.Foo.getShardDistribution();

Shard mongo-perf-shrd1 at mongo-perf-shrd1/ip1:27017,ip2,ip3:27017
 data : 6KiB docs : 100 chunks : 2
 estimated data per chunk : 3KiB
 estimated docs per chunk : 50

Shard mongo-perf-shrd2 at mongo-perf-shrd2/ip4:27017,ip5:27017,ip6:27017
 data : 0B docs : 0 chunks : 2
 estimated data per chunk : 0B
 estimated docs per chunk : 0

Totals
 data : 6KiB docs : 100 chunks : 4
 Shard mongo-perf-shrd1 contains 100% data, 100% docs in cluster, avg obj size on shard : 64B
 Shard mongo-perf-shrd2 contains 0% data, 0% docs in cluster, avg obj size on shard : NaNGiB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:13:47.103

你只有单调的分片键，这不是好的解决方案： http: [//docs.mongodb.org/manual/core/sharded-cluster-internals/](http://docs.mongodb.org/manual/core/sharded-cluster-internals/)

对于刚刚模拟测试，足以默认选择 _id 字段的分片键

# firebird - 如何设置初始生成器值？

> ID：16056556
> 
> 赞同：1
> 
> 时间：2013-04-17T09:35:54.440
> 
> 标签：firebird

我需要将新的 Firebird 生成器/序列初始化为现有“旧”表的最大主键值。我尝试了以下但它不起作用，我收到错误“令牌未知 - 第 6 行，第 8 列选择”。我不能手动执行此操作，因为它必须在许多不同的数据库上执行。我正在使用火鸟 2.5.1。

根据[http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-execblock.html](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-execblock.html)这应该有效 - 我做错了什么？

```
set term #;  
execute block  
as  
declare i int = 0;  
begin  
   i = select max(ID) from OrganizationType_OLU;  
    alter sequence OrganizationType_OLU restart with :i;  
end  
#  
set term ;# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:37:11.910

一般来说，您可以使用[`ALTER SEQUENCE`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-ddl-sequence-alter)：

```
ALTER SEQUENCE sequence-name RESTART WITH <newval> 
```

或传统选项[`SET GENERATOR`](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-ddl-sequence-setgen)

```
SET GENERATOR generator-name TO <new-value> 
```

但是，您想从 an 中执行此操作，`EXECUTE BLOCK`并且您不能从 PSQL 代码执行 DDL 在 Firebird 中是不允许的。所以我想[rstrelba 的答案](https://stackoverflow.com/a/16056992/466862)可能是唯一可用的选择。

请注意，尽管序列在 Firebird 中的事务控制之外（它们是原子的），但请确保仅在您是唯一活动事务时运行它，否则您可能会将序列重置为无效值。

我强烈建议确保`ID`for`OrganizationType_OLU`始终按顺序生成，并且永远不允许用户为这些列指定值。这确保了序列值始终有效（即：不会太低，导致违反主键约束）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:54:44.920

```
set term #;
execute block    
as  
declare i int = 0;    
declare temp int = 0;
begin  
  i = (select max(id) from items);  
  temp = gen_id(GEN_ITEMS_ID,-(gen_id(GEN_ITEMS_ID,0))); ---set some_gen to 0  
  temp = gen_id(GEN_ITEMS_ID,:i);  --- set to i
end #  
set term ;# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-21T13:32:09.077

```
EXECUTE BLOCK
AS
DECLARE VARIABLE fMaxID INTEGER;
BEGIN
    SELECT COALESCE(MAX(id),0)
    FROM yourtable
    INTO :fMaxID ;

    EXECUTE STATEMENT('CREATE SEQUENCE YourSequence');
    EXECUTE STATEMENT('ALTER SEQUENCE YourSequence RESTART WITH '||CAST(:fMaxID AS VARCHAR(16)));
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:41:59.777

您得到 ( `Token unknown - line 6, column 8 select`) 的错误是因为如果您想[`select`用作表达式](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-psql-subquery-as-expr.html)，则必须将其括在括号中，例如

```
i = (select max(ID) from OrganizationType_OLU); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-09T15:44:55.303

**如果您不想使用`EXECUTE BLOCK`**或仍使用较旧的 Firebird 版本 (<2.0)，请尝试以下操作：

鉴于这`GEN_ITEMS_ID`是您的生成器名称，您可以通过以下 DML 语句设置初始生成器值：

```
SELECT GEN_ID(GEN_ITEMS_ID, 
  (select max(ID) from OrganizationType_OLU) 
  - GEN_ID(GEN_ITEMS_ID, 0)) FROM RDB$DATABASE; 
```

[在这里](https://stackoverflow.com/a/37004506/2306907)解释。

# c# - 泛型类继承问题

> ID：16056558
> 
> 赞同：1
> 
> 时间：2013-04-17T09:35:55.983
> 
> 标签：c#, oop, generics

我有以下情况：

```
class MyControl<T> : UserControl where T:TClass
{
    public T Field {}
    public event EventHandler<MyEventArgs<T>> MyEvent;
}
class DerControl1 : MyControl<ClassA> {}
class DerControl2 : MyControl<ClassB> {} 
```

我应该如何实现继承以拥有 DerControl1、DerControl2 的基类以访问 MyControl 的接口？

```
SomeBaseClass control = condition ? DerControl1 :DerControl2;
control.Field = null;
control.Enabled=false; 
```

SomeBaseClass 应该是什么类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:00:33.393

定义另一个非泛型接口`IMyControl`并显式实现它：

```
public interface IMyControl
{
    public TClass Field { get; set; }
    public bool Enabled { get; set; }
}

class MyControl<T> : UserControl, IMyControl where T:TClass
{
    public T Field { get; set; }
    TClass IMyControl.Field
    {
        get { return this.Field; }
        set { this.Field = (T)value; }
    }
    public event EventHandler<MyEventArgs<T>> MyEvent;
} 
```

您现在可以将派生控件转换为类型`IMyControl`并访问该`Field`属性`TClass`。尝试像其他任何东西一样返回违反了[协/逆变](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)（您可以返回 an`object`但在这种情况下最好返回 a `TClass`，因为类型约束已经存在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:45:23.150

您可以使用`UserControl`来访问该`Enabled`字段，但没有定义的通用类型`Field`。你不能放入`Field`一个通用的非泛型接口，因为它的类型是泛型的。

从 C# 4.0 开始，您可以使用`dynamic`以下方式：

```
dynamic control = condition ? DerControl1 :DerControl2;
control.Field = null;
control.Enabled=false; 
```

这可能会稍微慢一些，但它会编译并执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:55:20.280

用例不清楚。如果此代码：

```
control.Field = null;
control.Enabled=false; 
```

不会被放入泛型方法（或泛型类型的方法）中，而不是您根本不需要泛型：

```
class MyControl : UserControl where T:TClass
{
    public object Field {}
    public event EventHandler<MyEventArgs> MyEvent;
} 
```

否则，此代码将正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:20:04.723

使用您自己的问题，您不能只使用界面吗？

```
public interface IMyControl<T> where T:class
{
    T Field { get; set;}
    event EventHandler<MyEventArgs<T>> MyEvent;
}

public class MyControl<T> : UserControl, IMyControl<T> where T:class
{
    public T Field { get; set;}
    public event EventHandler<MyEventArgs<T>> MyEvent;       
} 
```

然后使用：

```
// (which equates to IMyControl control = ...)
var control = condition ? new MyControl<ClassA>() : new MyControl<ClassB>();
control.Field = null;
control.Enabled = false; 
```

这为您要使用的每个类型参数节省了多个类，因此鼓励代码重用并遵循多态性 (OOP)。

希望这有帮助！

**编辑**

好的——所以亚历克斯是对的，我不应该从臀部开火！经过一番调查，这似乎比我想象的要困难得多！所以我开始怀疑你问的是不是正确的方法。现在，是否是你想要的答案，我不知道，但这里是你思考的问题。

基本上，不要使用泛型。在这种情况下，生活真的很艰难！相反，隐藏在接口后面。下面的代码实现了与您在上面尝试的相同，但您现在将字段绑定到“具体”接口。但实际上，你想要这个——你应该知道行为和模式，否则，在我看来，你不知道你的系统应该做什么，因此你的要求有问题。无论如何，召唤结束，这里有一些代码！

```
public interface IMyClass
{
    int I { get; set; }
    string S { get; set; }
}

public interface IMyControl
{
    IMyClass Field { get; set; }
    event EventHandler<EventArgs> MyEvent;
}

public class MyControl : UserControl, IMyControl
{
    public MyControl(IMyClass field)
    {
        this.Field = field;
    }

    public IMyClass Field { get; set; }

    public event EventHandler<EventArgs> MyEvent;
}

public class MyClass1 : IMyClass
{
    public int I { get; set; }
    public string S { get; set; }

    public override string ToString()
    {
        return "I am a MyClass1!!!";
    }
}

public class MyClass2 : IMyClass
{
    public int I { get; set; }
    public string S { get; set; }

    public override string ToString()
    {
        return "I am a MyClass2!!!";
    }
}

var control = someCondition ? new MyControl(new MyClass1()) : new MyControl(new MyClass2()); 
```

# git - 如何为多个站点进行分支方法？

> ID：16056561
> 
> 赞同：2
> 
> 时间：2013-04-17T09:36:11.437
> 
> 标签：git, repository-pattern

我是 git 新手，想知道这种分支方法是否适合我们打算做的事情。

我们将拥有三个站点

*   prod.websitename.com - 实时站点
*   sandbox.websitename.com - 我们的客户可以使用的测试站点
*   dev.websitename.com - 用于在推送到实时站点之前开发和测试修补程序/功能的内部站点

我们打算做的是拥有一个为所有三个站点提供服务的集中式存储库。该存储库将具有三个分支：master、sandbox 和 development

然后我们将检查分支以更改文件并为每个站点拉/推更改。

对于更改，开发将被推送到主分支和沙箱分支。沙盒永远不会被推送到master。

这个可以吗？任何建议都将受到高度赞赏。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:15:07.233

它可以工作，前提是您的主要单一仓库是您可以推送的[裸仓库。](https://stackoverflow.com/a/738256/6309)

从那里，[接收后挂钩](https://stackoverflow.com/a/15930178/6309)可以触发相关的结帐，具体取决于已推送的分支（请参阅“[编写 git 接收后挂钩以处理特定分支](https://stackoverflow.com/a/13057643/6309)”）

```
#!/bin/bash
while read oldrev newrev refname
do
    branch=$(git rev-parse --symbolic --abbrev-ref $refname)
    if [ "master" == "$branch" ]; then
        # Do something
    fi
    if [ "sandbox" == "$branch" ]; then
        # Do something
    fi
    if [ "development" == "$branch" ]; then
        # Do something
    fi
done 
```

> 对于更改，开发将被推送到主分支和沙箱分支。沙盒永远不会被推送到master。

这不是最佳实践：您应该将您需要的内容合并`dev`到*本地*分支，然后将这些分支推送到唯一的远程仓库`master`。 定期 rebase也是一个好主意。`sandbox` *`dev``master`*

# java - EOF 寻找匹配的 `"' 错误

> ID：16056567
> 
> 赞同：3
> 
> 时间：2013-04-17T09:36:24.753
> 
> 标签：java, linux, runtime, eof

```
sh -c "cd /home/dipankar/NetBeansProjects/TransBench/Hindi;./mat" 
```

在 linux 终端中执行以下命令时，它可以完美执行。但是，当我尝试使用 java 运行时运行它时，它会给出以下错误：

```
ERROR>/home/dipankar/NetBeansProjects/TransBench/Hindi;./mat": -c: line 0: unexpected EOF while looking for matching `"'
ERROR>/home/dipankar/NetBeansProjects/TransBench/Hindi;./mat": -c: line 1: syntax error: unexpected end of file 
```

请帮助我是 linux 新手。

```
Runtime rt = Runtime.getRuntime();               
Process proc = rt.exec("sh -c \"cd /home/dipankar/NetBeansProjects/TransBench/Hindi;./mat\"");
proc.waitFor(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T09:51:53.423

鉴于标签和症状，我希望您使用的`exec`方法将命令作为单个`String`.

那是行不通的。问题是该方法使用一种非常简单的方案将命令字符串“解析”为命令名称和参数。它只是在有空格的地方分割字符串......忽略任何引用和任何其他 shell 内容。

您需要做的是使用带有`String[]`;的重载。例如

```
 ....exec(new String[]{
            "sh", 
            "-c", 
            "cd /home/dipankar/NetBeansProjects/TransBench/Hindi;./mat"
    }); 
```

# wpf - 将 Width 绑定到 ListBox 中带有图像的 ViewportWidth 时，水平滚动条是可见的

> ID：16056571
> 
> 赞同：2
> 
> 时间：2013-04-17T09:36:32.563
> 
> 标签：wpf, listbox, scrollbar, border

我想要实现的是在 WPF 窗口的最右侧创建带有框架的垂直照片列表。图像是绑定到 ObservableCollection 的数据，并且图像列表应该能够由用户使用 GridSplitter 调整大小。

当前代码如下：

```
 <ListBox Grid.Row="0" Grid.Column="2" Grid.RowSpan="3" ItemsSource="{Binding Sheet.Images}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Border Background="#CCC" BorderThickness="8" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ScrollViewer}}, Path=ViewportWidth}">
                    <Image Source="{Binding Contents}"/>
                </Border>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <GridSplitter Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" Width="2" Background="Transparent"/> 
```

它有一个问题 - 无论图像数量如何，水平滚动条始终可见，并且右边框的一部分被隐藏，除非通过滚动发现。当我绑定到 ActualWidth 时，问题更加明显，因为滚动条宽度没有从父容器宽度中减去。

如何创建这样一个垂直滚动条在需要时可见且水平滚动条从不可见的图像垂直列表，同时看到整个边框？

还有一个小问题：如何在两个连续图像的边界之间添加距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:01:01.543

我找到了解决这个问题的方法，虽然不是很优雅。由于某种原因，似乎 ViewportWidth 比报告的窄 2 个像素（或带图像的边框宽 2 个像素）。无论如何，我使用了可以在[这里](http://rachel53461.wordpress.com/2011/08/20/the-math-converter/)找到的 MathConverter 。

最终结果是：

```
 <ListBox Grid.Row="0" Grid.Column="2" Grid.RowSpan="3" ItemsSource="{Binding Sheet.Images}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="#CCC" BorderThickness="8" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ScrollViewer}},
                        Path=ViewportWidth,
                        Converter={converters:MathConverter},
                        ConverterParameter=@VALUE-2}">
                        <Image Source="{Binding Contents}"/>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
    </ListBox>

    <GridSplitter Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" Width="2" Background="Transparent"/> 
```

如果有人有更好的解决方案，或者至少说明为什么这 2 个像素首先会导致问题，请随时分享。

# python - python如何防止类被子类化？

> ID：16056574
> 
> 赞同：13
> 
> 时间：2013-04-17T09:36:42.960
> 
> 标签：python, subclass, final

[我在python 文档](http://docs.python.org/2/library/functions.html#bool)中遇到了以下内容：

> **布尔（[x]）**
> 
> 使用标准真值测试程序将值转换为布尔值。如果 x 为假或省略，则返回 False；否则返回 True。bool 也是一个类，它是 int 的子类。**类 bool 不能进一步子类化。**它的唯一实例是 False 和 True。

我这辈子从没想过 subclass `bool`，但我自然而然地立即尝试了它，果然：

```
>>> class Bool(bool):
    pass

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    class Bool(bool):
TypeError: Error when calling the metaclass bases
    type 'bool' is not an acceptable base type 
```

那么问题来了：这是怎么做到的？我可以应用相同的技术（或不同的技术）将我自己的类标记为`final`，即防止它们被子类化吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T09:42:06.847

该`bool`类型是在 C 中定义的，并且它的`tp_flags`插槽故意不包含[`Py_TPFLAGS_BASETYPE`flag](http://docs.python.org/2/c-api/typeobj.html#Py_TPFLAGS_BASETYPE)。

C 类型需要将自己*显式*标记为可子类化。

要为自定义 Python 类执行此操作，请使用元类：

```
class Final(type):
    def __new__(cls, name, bases, classdict):
        for b in bases:
            if isinstance(b, Final):
                raise TypeError("type '{0}' is not an acceptable base type".format(b.__name__))
        return type.__new__(cls, name, bases, dict(classdict))

class Foo:
    __metaclass__ = Final

class Bar(Foo):
    pass 
```

给出：

```
>>> class Bar(Foo):
...     pass
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in __new__
TypeError: type 'Foo' is not an acceptable base type 
```

# oracle-apex - 仅在顶点报告的某些行上显示“编辑”链接

> ID：16056575
> 
> 赞同：1
> 
> 时间：2013-04-17T09:36:44.007
> 
> 标签：oracle-apex

我有以下报告结构，显示全年产品的销售目标和销售额。
每个产品将有两行：显示销售额的行和显示 sales_target 的行。目前，我的报告在报告的每一行旁边都有一个编辑链接。有没有办法从 sales_target 行中删除编辑链接？

```
select 'red ball'"Product",'sales'"type",'1'"jan",'11'"feb",'31'"mar",'41'"apr",'61'"may",'15'"jun",'15'"jul",'1'"aug",'1'"sep",'21'"oct",'14'"nov",'61'"dec",'Edit' "Edit record" from dual 
```

我想我在某处写了一个条件，如果销售类型是销售而不是销售目标，则只在行上显示“编辑”链接？

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:14:13.807

通常我使用这样的东西：

1.  在“编辑列”->“列链接”->“链接属性”中添加以下字符串：

    ```
    类="#TYPE#"
    ```

2.  将此 CSS 样式添加到您的页面：

    ```
    .sales_target { 显示：无；}
    ```

您的链接将如下所示：

```
<a href="#" class="sales_target">sales_target_edit</a>
 or
<a href="#" class="sales">sales_edit</a> 
```

所有带有 class="sales_target" 的链接都将隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:26:13.913

在列上设置条件将导致该列显示或不显示整个列，而不是特定行。

一种可能的解决方案可能是通过 javascript 删除额外的列链接。刷新报表后，在动态操作中运行此代码。执行 javascript，在检查页面加载时执行。我给我的报告区域一个静态 ID，在代码中是“rStatic”。

```
$("#report_rStatic .report-standard td[headers='TYPE']").each(function(){
  if($(this).text()=='SALES'){
    $(this).closest('tr').find("td[headers='EDIT_RECORD'] a").remove();
  };
}); 
```

这将遍历`TYPE`列中的所有单元格，并且当类型为时`SALES`，它将删除`EDIT_RECORD`列中的锚标记。

# mysql - 当 If else 控制语句在查询窗口中时，MySQL 给出语法错误“unexpected IF”

> ID：16056578
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:36:53.807
> 
> 标签：mysql, if-statement, mysql-workbench

我之前使用的是 Microsoft SQL 服务器。我想在 MySQL 中使用一些控制语句，例如基本的“If else”。在查询窗口中给出以下命令时

```
IF  3 <>4 THEN
Select * from EntityList_Base;
END IF 
```

在 MySQL 工作台中，它说“意外的 IF”语法错误。谷歌结果给出`if else`了存储过程、触发器等内部使用的示例，如果不使用 Microsoft sql server 之类的存储过程，就不能在查询窗口中使用控制流语句吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:39:25.590

我建议您将条件移至`WHERE`查询的子句：

```
SELECT *
FROM EntityList_Base
WHERE 3<>4 AND other_conditions_here; 
```

如果条件为假，则查询将不返回任何行。

# r - 在另一个数组的基础上过滤一个数组

> ID：16056580
> 
> 赞同：0
> 
> 时间：2013-04-17T09:37:00.027
> 
> 标签：r

我有两个数组 'check' 和 'path' ，我希望只选择那些在路径中不存在的元素。我已经通过以下方式完成了，有没有更有效的方式来做到这一点？

```
check<-rbind(c(1,0),c(0,1),c(9,9))
path<-rbind(c(1,1),c(1,2),c(0,1),c(10,10))
new.check<-check[-(which(duplicated(rbind(path,check)))-nrow(path)),] 
```

setdiff() 没有解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:13:00.107

不是更有效，但更正确：

```
new.check <- check[ setdiff(1:nrow(check),(which(duplicated(rbind(path,check)))-nrow(path))),] 
```

`-`如果没有重复，使用索引将导致不正确的结果 - 比如说`check <- rbind(c(1,0),c(9,9))`

*编辑：*

或互换`path`并`check`用`rbind()``fromLast=TRUE`

```
new.check <- check[ setdiff(1:nrow(check),which(duplicated(rbind(check,path),fromLast=T))),] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:15:19.157

使用 setdiff 和 %in% 的另一种方法

```
# get the elements in check that are not present in path
elements <- setdiff(unique(as.vector(check)),unique(as.vector(path)))
# convert check to data frame to access columns by name
checkd <- data.frame(check)
# check if either column has the required elements - if yes, extract that row
checkd[checkd$X1 %in% elements | checkd$X2 %in% elements ,] 
```

# jquery - 使用 jquery 识别在多级列表中单击了哪个项目

> ID：16056583
> 
> 赞同：1
> 
> 时间：2013-04-17T09:37:04.680
> 
> 标签：jquery, list

我的 html 看起来像这样

```
<div class="row1">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>
</div>
<div class="row2">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>
</div>
<div class="row3">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>
</div> 
```

这是我的 jquery 来获取点击项目的索引：

```
$('li').click(function(){
 var ind = $(this).index();
 alert(ind);
}); 
```

这会提醒单击项目的索引。但是，row1、row2 和 row3 的项目 1 具有相同的索引。与 item2 和 item3 相同。这个，我可以理解，因为它属于不同的ul。我正在考虑为 3 ul 创建不同的点击侦听器。但是我在想你们是否有更好的主意来为所有项目创建一个监听器，这将为所有项目提供连续的索引号。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:47:17.780

您需要跟踪`<li>`元素列表，然后使用它来确定索引：

```
var $all_lis = $('li');

$all_lis.on('click', function() {
  var index = $all_lis.index(this);
  alert(index);
}); 
```

[**演示**](http://jsbin.com/ovolon/1/)

第一项将给出`0`，最后一项将给出`8`（即第 9 项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:40:28.990

您想获取所选`ul`元素的索引吗？尝试这个：

`var parentInd = $(this).parent().parent().index();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:39:19.537

`this`回调函数里面就是你想要的，被点击的项目。

# jquery - jQuery(' '， 属性）

> ID：16056588
> 
> 赞同：2
> 
> 时间：2013-04-17T09:37:12.067
> 
> 标签：jquery, properties, attributes

在创建这样的新对象时，是否有 jQuery 支持的属性/属性列表：

```
$('<div/>', {
// these are just examples
    "class": "myClass",
    text: "Hello World",
    click: function(){
        var el = $(this),
            offset = el.offset(),
            info = "L: " + offset.left + ", T: " + offset.top;
        el.text(info);
    }
}).appendTo('body'); 
```

[JSFiddle 示例](http://jsfiddle.net/aEQ7M/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:45:09.803

根据[文档](http://api.jquery.com/jQuery/#jQuery-html-attributes)，从 jQuery 1.8 开始，传递给的对象中的键`$()`可以是：

*   任何属性名称（例如`title`or `class`，但不是`className`，它是 DOM 属性，而不是属性），

*   任何事件类型（例如`change`或`click`），

*   `$.fn`由（例如`val`、`text`或什至 ）公开的任何方法的名称`on`，导致该方法应用于关联的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:44:19.547

我猜它支持特定元素的所有正常属性。

# css - 基于容器宽度的字体缩放

> ID：16056591
> 
> 赞同：1504
> 
> 时间：2013-04-17T09:37:18.587
> 
> 标签：css, responsive-design, font-size

我很难理解字体缩放。

我目前有一个正文`font-size`为 100% 的网站。100% 是什么？这似乎计算为 16 像素。

我的印象是 100% 会以某种方式指代浏览器窗口的大小，但显然不是因为无论窗口被调整到移动宽度还是完整的宽屏桌面，它总是 16 像素。

如何使网站上的文本相对于其容器进行缩放？我尝试使用`em`，但这也无法扩展。

我的理由是，当你调整大小时，我的菜单之类的东西会被压扁，所以我需要减少与容器宽度相关`px` `font-size`的`.menuItem`其他元素中的 。（例如，在大桌面上的菜单中，`22px`完美运行。向下移动到平板电脑宽度，`16px`更合适。）

我知道我可以添加断点，但我真的希望文本可以缩放*以及*有额外的断点，否则，我最终会在宽度每减少 100 像素时产生数百个断点来控制文本。

* * *

## 回答 #1

> 赞同：1697
> 
> 时间：2013-11-06T14:40:46.547

**编辑：如果容器不是主体**CSS Tricks 涵盖了*[Fitting Text to a Container](https://css-tricks.com/fitting-text-to-a-container/)*中的所有选项。

如果容器是主体，您正在寻找的是[Viewport-percentage lengths](http://dev.w3.org/csswg/css-values/#viewport-relative-lengths)：

> **视口百分比长度与**[初始包含块](https://www.w3.org/TR/CSS21/visudet.html#containing-block-details)的大小有关。当初始包含块的高度或宽度发生变化时，它们会相应地缩放。但是，当根元素上的溢出值为 auto 时，假定不存在任何滚动条。

这些值为：

*   `vw`（视口宽度的百分比）
*   `vh`（视口高度的百分比）
*   `vi`（根元素内联轴方向的视口大小的 1%）
*   `vb`（根元素块轴方向的视口大小的 1%）
*   `vmin`（或的较小`vw`者`vh`）
*   `vmax`（较大的或`vw`或`vh`）

1 v* 等于初始包含块的 1%。

使用它看起来像这样：

```
p {
    font-size: 4vw;
} 
```

如您所见，当视口宽度增加时， 也会增加，`font-size`而无需使用媒体查询。

这些值是一个大小单位，就像`px`or一样`em`，因此它们也可以用于调整其他元素的大小，例如宽度、边距或填充。

浏览器支持非常好，但您可能需要一个备用方案，例如：

```
p {
    font-size: 16px;
    font-size: 4vw;
} 
```

查看支持统计信息：[http](http://caniuse.com/#feat=viewport-units) ://caniuse.com/#feat=viewport-units 。

此外，查看 CSS-Tricks 以获得更广泛的外观：*[视口大小的排版](http://css-tricks.com/viewport-sized-typography/)*

这是一篇关于设置最小/最大尺寸和对尺寸进行更多控制的好文章：*[精确控制响应式排版](http://madebymike.com.au/writing/precise-control-responsive-typography/)*

这是一篇关于使用 calc() 设置大小以便文本填充视口的文章：http: [//codepen.io/CrocoDillon/pen/fBJxu](http://codepen.io/CrocoDillon/pen/fBJxu)

另外，请查看这篇文章，该文章也使用了一种称为“熔融引导”的技术来调整行高。*[CSS 中的领先地位](https://css-tricks.com/molten-leading-css/)*

* * *

## 回答 #2

> 赞同：391
> 
> 时间：2013-11-06T16:56:56.457

## But what if the container is not the viewport (body)?

This question is asked in a comment by Alex under [the accepted answer](https://stackoverflow.com/questions/16056591/font-scaling-based-on-width-of-container/19814948#19814948).

That fact does not mean `vw` cannot be used to some extent to size for that container. Now to see any variation at all one has to be assuming that the container in some way is flexible in size. Whether through a direct percentage `width` or through being 100% minus margins. The point becomes "moot" if the container is always set to, let's say, `200px` wide--then just set a `font-size` that works for that width.

**Example 1**

With a flexible width container, however, it must be realized that in some way the container is ***still being sized off the viewport***. As such, it is a matter of adjusting a `vw` setting based off that percentage size difference to the viewport, which means taking into account the sizing of parent wrappers. [**Take this example**](http://jsfiddle.net/T84wL/1/):

```
div {
    width: 50%;
    border: 1px solid black;
    margin: 20px;
    font-size: 16px;
    /* 100 = viewport width, as 1vw = 1/100th of that
       So if the container is 50% of viewport (as here)
       then factor that into how you want it to size.
       Let's say you like 5vw if it were the whole width,
       then for this container, size it at 2.5vw (5 * .5 [i.e. 50%])
    */
    font-size: 2.5vw;
} 
```

Assuming here the `div` is a child of the `body`, it is `50%` of that `100%` width, which is the viewport size in this basic case. Basically, you want to set a `vw` that is going to look good to you. As you can see in my comment in the above CSS content, you can "think" through that mathematically with respect to the full viewport size, but you don't *need* to do that. The text is going to "flex" with the container because the container is flexing with the viewport resizing. UPDATE: [here's an example of two differently sized containers](http://jsfiddle.net/T84wL/6/).

**Example 2**

You can help ensure viewport sizing by forcing the calculation based off that. [**Consider this example**](http://jsfiddle.net/T84wL/3/):

```
html {width: 100%;} /* Force 'html' to be viewport width */
body {width: 150%; } /* Overflow the body */

div {
    width: 50%;
    border: 1px solid black;
    margin: 20px;
    font-size: 16px;
    /* 100 = viewport width, as 1vw = 1/100th of that
       Here, the body is 150% of viewport, but the container is 50%
       of viewport, so both parents factor  into how you want it to size.
       Let's say you like 5vw if it were the whole width,
       then for this container, size it at 3.75vw
       (5 * 1.5 [i.e. 150%]) * .5 [i.e. 50%]
    */
    font-size: 3.75vw;
} 
```

The sizing is still based off viewport, but is in essence set up based off the container size itself.

## Should Size of the Container Change Dynamically...

If the sizing of the container element ended up changing dynamically its percentage relationship either via `@media` breakpoints or via JavaScript, then whatever the base "target" was would need recalculation to maintain the same "relationship" for text sizing.

Take example #1 above. If the `div` was switched to `25%` width by either `@media` or JavaScript, then at the same time, the `font-size` would need to adjust in either the media query or by JavaScript to the new calculation of `5vw * .25 = 1.25`. This would put the text size at the same size it would have been had the "width" of the original `50%` container been reduced by half from viewport sizing, but has now been reduced due to a change in its own percentage calculation.

**A Challenge**

With [the CSS3 `calc()` function](https://developer.mozilla.org/en-US/docs/Web/CSS/calc) in use, it would become difficult to adjust dynamically, as that function does not work for `font-size` purposes at this time. So you could not do a pure CSS 3 adjustment if your width is changing on `calc()`. Of course, a minor adjustment of width for margins may not be enough to warrant any change in `font-size`, so it may not matter.

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2015-06-18T16:47:30.207

## SVG的解决方案：

```
.resizeme {
  resize: both;
  margin: 0;
  padding: 0;
  height: 75px;
  width: 500px;
  background-color: lightblue;
  overflow: hidden;
}
```

```
<div class="resizeme">
  <svg
    width="100%"
    height="100%"
    viewBox="0 0 500 75"
    preserveAspectRatio="xMinYMid meet"
    style="background-color:green"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
        <text
          x="0"
          y="75"
          font-size="75"
          fill="black"
        >█Resize This█&lt;/text>
      </svg>
</div>
```

## 使用 SVG 和文本换行的解决方案`foreignObject`：

```
.resizeme {
  resize: both;
  margin: 0;
  padding: 0;
  height: 200px;
  width: 500px;
  background-color: lightblue;
  overflow: hidden;
}
```

```
<div class="resizeme">
  <svg
    width="100%"
    height="100%"
    viewBox="0 0 500 200"
    preserveAspectRatio="xMinYMin meet"
  >
      <foreignObject width="100%" height="100%" xmlns="http://www.w3.org/1999/xhtml">
        <div xmlns="http://www.w3.org/1999/xhtml" style="background-color:lightgreen;">
          <h1>heading</h1>
          <p>Resize the blue box.</p>
        </div>
      </foreignObject>
    </svg>
</div>
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2016-03-11T08:30:30.347

在我的一个项目中，我使用 vw 和 vh 之间的“混合”来根据我的需要调整字体大小，例如：

```
font-size: calc(3vw + 3vh); 
```

我知道这不能回答 OP 的问题，但也许它可以成为其他任何人的解决方案。

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2016-09-01T10:27:27.000

# 纯 CSS 解决方案`calc()`，包含 CSS 单元和数学

这正是 OP 所要求的，但可能会让某人开心。这个答案并不容易，需要在开发人员端进行一些研究。

我终于得到了一个使用`calc()`不同单元的纯 CSS 解决方案。您将需要对公式有一些基本的数学理解来计算`calc()`.

当我解决这个问题时，我必须得到一个全页宽度的响应式标题，并在 DOM 中填充一些父级。我将在这里使用我的价值观，用你自己的价值观代替它们。

## 对数学

你会需要：

*   在某些视口中很好地调整了比例。我使用了 320 像素，因此我得到了 24 像素高和 224 像素宽，所以比率是 9.333... 或 28 / 3
*   容器宽度，我有`padding: 3em`和全宽，所以这个到了`100wv - 2 * 3em`

X 是容器的宽度，所以用你自己的表达式替换它或调整值以获得整页文本。`R`是您将拥有的比率。您可以通过调整某些视口中的值、检查元素的宽度和高度并用您自己的值替换它们来获得它。此外，它是`width / heigth`;)

```
x = 100vw - 2 * 3em = 100vw - 6em
r = 224px/24px = 9.333... = 28 / 3

y = x / r
  = (100vw - 6em) / (28 / 3)
  = (100vw - 6em) * 3 / 28
  = (300vw - 18em) / 28
  = (75vw - 4.5rem) / 7 
```

砰！有效！我写

```
font-size: calc((75vw - 4.5rem) / 7) 
```

到我的标题，它在每个视口中都进行了很好的调整。

## 但它是如何工作的？

我们需要一些常量。`100vw`表示视口的全宽，我的目标是建立带有一些填充的全宽标题。

比例。在一个视口中获得宽度和高度让我可以使用比率，并且通过比率我知道在其他视口宽度中的高度应该是多少。手动计算它们会花费大量时间，并且至少会占用大量带宽，因此这不是一个好的答案。

## 结论

我想知道为什么没有人弄清楚这一点，有些人甚至说这不可能用 CSS 来修补。我不喜欢在调整元素时使用 JavaScript，所以我不接受 JavaScript（忘记 jQuery）的答案，而无需深入挖掘。总而言之，这很好，这是在网站设计中实现纯 CSS 的一步。

对于我的文本中的任何不寻常的约定，我深表歉意，我不是英语母语人士，而且对编写 Stack Overflow 答案也很陌生。

还应该注意的是，我们在某些浏览器中有邪恶的滚动条。例如，在使用 Firefox 时，我注意到这`100vw`意味着视口的全宽，在滚动条下延伸（内容无法展开！），因此全宽文本必须仔细设置边距，并且最好在许多浏览器和设备上进行测试。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2013-11-11T10:01:45.977

这个问题有一个很大的哲学。

最简单的做法是为 body 赋予一定的字体大小（我推荐 10），然后所有其他元素的字体都为`em`or `rem`。我会给你一个例子来理解这些单位。 `Em`总是相对于它的父母：

```
body{font-size: 10px;}
.menu{font-size: 2em;} /* That means 2*10 pixels  = 20 pixels */
.menu li{font-size: 1.5em;} /* That means 1.5*20 pixels = 30 pixels */ 
```

`Rem`总是相对于身体：

```
body{font-size: 10px;}
.menu{font-size: 2rem;} /* That means 2*10 pixels = 20 pixels */
.menu li{font-size: 1.5rem;} /* that means 1.5*10 pixels = 15 pixels */ 
```

然后你可以创建一个脚本来修改相对于你的容器宽度的字体大小。但这不是我推荐的。因为例如在一个 900 像素宽度的容器中，您将拥有一个`p`字体大小为 12 像素的元素。根据您的想法，这将成为一个 300 像素宽、4 像素字体大小的容器。必须有一个下限。

其他解决方案是使用媒体查询，以便您可以为不同的宽度设置字体。

但我推荐的解决方案是使用一个可以帮助您的 JavaScript 库。还有我目前发现的[fittext.js 。](http://fittextjs.com/)

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2014-01-07T09:43:49.033

这是功能：

```
document.body.setScaledFont = function(f) {
  var s = this.offsetWidth, fs = s * f;
  this.style.fontSize = fs + '%';
  return this
}; 
```

然后将所有文档子元素字体大小转换为`em`'s 或`%`.

然后将类似这样的内容添加到您的代码中以设置基本字体大小。

```
document.body.setScaledFont(0.35);
window.onresize = function() {
    document.body.setScaledFont(0.35);
} 
```

[http://jsfiddle.net/0tpvccjt/](http://jsfiddle.net/0tpvccjt/)

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2018-03-13T15:48:49.540

**有一种方法可以在*没有*JavaScript 的情况下做到这一点！**

您可以使用内联 SVG 图像。如果它是内联的，您可以在 SVG 上使用 CSS。您必须记住，使用此方法意味着您的 SVG 图像将响应其容器大小。

尝试使用以下解决方案...

### HTML

```
<div>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 360.96 358.98" >
      <text>SAVE $500</text>
  </svg>
</div> 
```

### CSS

```
div {
  width: 50%; /* Set your container width */
  height: 50%; /* Set your container height */

}

svg {
  width: 100%;
  height: auto;

}

text {
  transform: translate(40px, 202px);
  font-size: 62px;
  fill: #000;
} 
```

示例： [https ://jsfiddle.net/k8L4xLLa/32/](https://jsfiddle.net/k8L4xLLa/32/)

**想要更华丽的东西吗？**

SVG 图像还允许你用形状和垃圾做很酷的东西。看看这个可扩展文本的伟大用例......

[https://jsfiddle.net/k8L4xLLa/14/](https://jsfiddle.net/k8L4xLLa/14/)

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2015-04-12T19:22:28.423

这可能不是超级实用，但是如果您希望字体成为父级的直接功能，而无需任何 JavaScript 侦听/循环（间隔）来读取 div/page 的大小，有一种方法可以做到. 框架。

iframe 中的任何内容都会将 iframe 的大小视为视口的大小。所以诀窍是只制作一个 iframe，其宽度是您希望文本的最大宽度，其高度等于最大高度 * 特定文本的纵横比。

撇开视口单位不能同时出现在文本的父单位旁边的限制（例如，让 % 大小表现得像其他人一样），视口单位确实提供了一个非常强大的工具：能够获得最小/最大尺寸. 你不能在其他任何地方这样做 - 你不能说......让这个 div 的高度成为父 * 东西的宽度。

话虽如此，诀窍是使用 vmin，并设置 iframe 大小，以便 [fraction] * total height 当高度是限制尺寸时是一个很好的字体大小，而 [fraction] * total width 当宽度是限制维度。这就是为什么高度必须是宽度和纵横比的乘积。

对于我的特定示例，您有

```
.main iframe{
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: calc(3.5 * 100%);
  background: rgba(0, 0, 0, 0);
  border-style: none;
  transform: translate3d(-50%, -50%, 0);
} 
```

这种方法的小烦恼是您必须手动设置 iframe 的 CSS。如果附加整个 CSS 文件，则会占用许多文本区域的大量带宽。所以，我要做的是直接从我的 CSS 中附加我想要的规则。

```
var rule = document.styleSheets[1].rules[4];
var iDoc = document.querySelector('iframe').contentDocument;
iDoc.styleSheets[0].insertRule(rule.cssText); 
```

您可以编写小函数来获取 CSS 规则/所有会影响文本区域的 CSS 规则。

如果没有一些循环/监听 JavaScript，我想不出另一种方法来做到这一点。真正的解决方案是让浏览器提供一种方法来缩放文本作为父容器的功能，*并*提供相同的 vmin/vmax 类型功能。

JSFiddle： [https](https://jsfiddle.net/0jr7rrgm/3/) ://jsfiddle.net/0jr7rrgm/3/ （单击一次将红色方块锁定到鼠标，再次单击释放）

小提琴中的大部分 JavaScript 只是我的自定义点击拖动功能。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2017-08-06T12:54:38.107

使用`vw`, `em`& co. 肯定有效，但 IMO 它总是需要人工进行微调。

这是我刚刚根据@tnt-rox 的[回答](https://stackoverflow.com/a/20968345/2126442)编写的一个脚本，它试图自动化人类的触摸：

```
$('#controller').click(function(){
    $('h2').each(function(){
        var
            $el = $(this),
            max = $el.get(0),
            el = null
        ;
        max =
            max
            ? max.offsetWidth
            : 320
        ;
        $el.css({
            'font-size': '1em',
            'display': 'inline',
        });
        el = $el.get(0);

        el.get_float = function(){
            var
                fs = 0
            ;
            if (this.style && this.style.fontSize) {
                fs = parseFloat(this.style.fontSize.replace(/([\d\.]+)em/g, '$1'));
            }
            return fs;
        };

        el.bigger = function(){
            this.style.fontSize = (this.get_float() + 0.1) + 'em';
        };

        while (el.offsetWidth < max) {
            el.bigger();
        }

        // Finishing touch.
        $el.css({
            'font-size': ((el.get_float() -0.1) +'em'),
            'line-height': 'normal',
            'display': '',
        });
    });  // end of (each)
});    // end of (font scaling test)
```

```
div {
  width: 50%;
  background-color: tomato;
  font-family: 'Arial';
}

h2 {
  white-space: nowrap;
}

h2:nth-child(2) {
  font-style: italic;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input type="button" id="controller" value="Apply" />
<div>
  <h2>Lorem ipsum dolor</h2>
  <h2>Test String</h2>
  <h2>Sweet Concatenation</h2>
  <h2>Font Scaling</h2>
</div>
```

它基本上将字体大小减小到`1em`然后开始增加 0.1 直到达到最大宽度。

[JSFiddle](https://jsfiddle.net/ob3o8bhs/)

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-04-17T09:42:36.477

100% 是相对于基本字体大小的，如果您没有设置它，它将是浏览器的用户代理默认值。

为了获得您想要的效果，我将使用一段 JavaScript 代码来调整相对于窗口尺寸的基本字体大小。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-03-26T16:35:38.943

My own solution, jQuery-based, works by gradually increasing the font size until the container gets a big increase in height (meaning it got a line break).

It's pretty simple, but works fairly well, and it is very easy to use. You don't have to know *anything* about the font being used, everything is taken care of by the browser.

You can play with it on [http://jsfiddle.net/tubededentifrice/u5y15d0L/2/](http://jsfiddle.net/tubededentifrice/u5y15d0L/2/)

The magic happens here:

```
var setMaxTextSize=function(jElement) {
    // Get and set the font size into data for reuse upon resize
    var fontSize=parseInt(jElement.data(quickFitFontSizeData)) || parseInt(jElement.css("font-size"));
    jElement.data(quickFitFontSizeData, fontSize);

    // Gradually increase font size until the element gets a big increase in height (i.e. line break)
    var i = 0;
    var previousHeight;
    do
    {
        previousHeight=jElement.height();
        jElement.css("font-size", "" + (++fontSize) + "px");
    }
    while(i++ < 300 && jElement.height()-previousHeight < fontSize/2)

    // Finally, go back before the increase in height and set the element as resized by adding quickFitSetClass
    fontSize -= 1;
    jElement.addClass(quickFitSetClass).css("font-size", "" + fontSize + "px");

    return fontSize;
}; 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2019-12-02T19:17:34.043

从艺术上讲，如果您需要在相同宽度内放置两行或多行文本，而不管它们的字符数如何，那么您有很好的选择。

最好找到一个动态的解决方案，这样无论输入什么文本，我们都会得到一个很好的显示。

让我们看看我们如何接近。

```
var els     = document.querySelectorAll(".divtext"),
refWidth    = els[0].clientWidth,
refFontSize = parseFloat(window.getComputedStyle(els[0],null)
                               .getPropertyValue("font-size"));

els.forEach((el,i) => el.style.fontSize = refFontSize * refWidth / els[i].clientWidth + "px")
```

```
#container {
  display: inline-block;
  background-color: black;
  padding: 0.6vw 1.2vw;
}
.divtext {
  display: table;
  color: white;
  font-family: impact;
  font-size: 4.5vw;
}
```

```
<div id="container">
  <div class="divtext">THIS IS JUST AN</div>
  <div class="divtext">EXAMPLE</div>
  <div class="divtext">TO SHOW YOU WHAT</div>
  <div class="divtext">YOU WANT</div>
</div>
```

我们所做的只是获取第一行的宽度（`els[0].clientWidth`）和字体大小（`parseFloat(window.getComputedStyle(els[0],null).getPropertyValue("font-size"))`）作为参考，然后相应地计算后续行的字体大小。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-10-09T10:04:35.123

# 使用 CSS 变量

还没有人提到 CSS 变量，这种方法对我来说效果最好，所以：

假设您的页面上有一个列，它是移动用户屏幕宽度的 100%，但宽度为`max-width`800 像素，因此在桌面上，该列的两侧都有一些空间。将其放在页面顶部：

```
<script> document.documentElement.style.setProperty('--column-width', Math.min(window.innerWidth, 800)+'px'); </script> 
```

现在您可以使用该变量（而不是内置`vw`单位）来设置字体的大小。例如

```
p {
  font-size: calc( var(--column-width) / 100 );
} 
```

这不是*纯*CSS 方法，但非常接近。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2013-11-08T22:21:49.757

试试[http://simplefocus.com/flowtype/](http://simplefocus.com/flowtype/)。这是我用于我的网站的内容，并且效果很好。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2013-11-10T11:33:05.427

您可能正在寻找这样的东西：

[http://jsfiddle.net/sijav/dGsC9/4/](http://jsfiddle.net/sijav/dGsC9/4/)
[http://fiddle.jshell.net/sijav/dGsC9/4/show/](http://fiddle.jshell.net/sijav/dGsC9/4/show/)

我使用[了 flowtype](http://simplefocus.com/flowtype/)，它运行良好（但它是 JavaScript 而不是纯 CSS 解决方案）：

```
$('body').flowtype({
    minFont: 10,
    maxFont: 40,
    minimum: 500,
    maximum: 1200,
    fontRatio: 70
}); 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2013-08-01T11:30:31.587

在你的 CSS 中，尝试在底部添加这个，改变 320 像素的宽度，让你的设计开始崩溃：

```
@media only screen and (max-width: 320px) {
  body { font-size: 1em; }
} 
```

然后根据需要在“px”或“em”中给出字体大小。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2017-03-07T11:03:32.337

我准备了一个使用 CSS 转换而不是字体大小的简单缩放函数。您可以在任何容器内使用它，您不必设置媒体查询等 :)

博客文章： *[全宽 CSS 和 JS 可伸缩标题](https://blog.polarbits.co/2017/03/07/full-width-css-js-scalable-header/)*

编码：

```
function scaleHeader() {
  var scalable = document.querySelectorAll('.scale--js');
  var margin = 10;
  for (var i = 0; i < scalable.length; i++) {
    var scalableContainer = scalable[i].parentNode;
    scalable[i].style.transform = 'scale(1)';
    var scalableContainerWidth = scalableContainer.offsetWidth - margin;
    var scalableWidth = scalable[i].offsetWidth;
    scalable[i].style.transform = 'scale(' + scalableContainerWidth / scalableWidth + ')';
    scalableContainer.style.height = scalable[i].getBoundingClientRect().height + 'px';
  }
} 
```

工作演示： [https ://codepen.io/maciejkorsan/pen/BWLryj](https://codepen.io/maciejkorsan/pen/BWLryj)

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2016-10-30T14:52:22.887

[此 Web 组件](https://github.com/pomber/full-width-text)更改字体大小，以便内部文本宽度与容器宽度匹配。检查[演示](https://pomber.github.io/full-width-text/)。

你可以像这样使用它：

```
<full-width-text>Lorem Ipsum</full-width-text> 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2015-12-19T01:40:46.577

我的问题类似，但与标题内的缩放文本有关。我尝试了 Fit Font，但我需要切换压缩器以获得任何结果，因为它解决了一个稍微不同的问题，Text Flow 也是如此。

所以我写了我自己的小插件来减小字体大小以适应容器，假设你有`overflow: hidden`，`white-space: nowrap`这样即使将字体减小到最小也不允许显示完整的标题，它只会切断它可以显示的内容。

```
(function($) {

  // Reduces the size of text in the element to fit the parent.
  $.fn.reduceTextSize = function(options) {
    options = $.extend({
      minFontSize: 10
    }, options);

    function checkWidth(em) {
      var $em = $(em);
      var oldPosition = $em.css('position');
      $em.css('position', 'absolute');
      var width = $em.width();
      $em.css('position', oldPosition);
      return width;
    }

    return this.each(function(){
      var $this = $(this);
      var $parent = $this.parent();
      var prevFontSize;
      while (checkWidth($this) > $parent.width()) {
        var currentFontSize = parseInt($this.css('font-size').replace('px', ''));
        // Stop looping if min font size reached, or font size did not change last iteration.
        if (isNaN(currentFontSize) || currentFontSize <= options.minFontSize ||
            prevFontSize && prevFontSize == currentFontSize) {
          break;
        }
        prevFontSize = currentFontSize;
        $this.css('font-size', (currentFontSize - 1) + 'px');
      }
    });
  };
})(jQuery); 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2020-08-04T14:52:56.433

我非常沮丧地尝试实现类似紧凑的文本换行，所以我最终使用了一种基于画布的方法，但没有成功尝试其他方法。我的目标看起来像附件，结果（对我来说）非常困难。希望有一天我们会有一种简单的纯 CSS 方式来做这件事。这种方法的缺点是文本被视为更像图像，但对于某些用例来说这很好。

[https://codesandbox.io/s/create-a-canvas-tightly-holding-a-word-st2h1?file=/index.html](https://codesandbox.io/s/create-a-canvas-tightly-holding-a-word-st2h1?file=/index.html)

此图像是四个全出血画布的 CSS 网格布局的屏幕截图。

[![在此处输入图像描述](https://i.stack.imgur.com/jhnuV.png)](https://i.stack.imgur.com/jhnuV.png)

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2017-07-06T14:39:18.143

尝试使用[fitText](http://fittextjs.com/)插件，因为视口大小不是这个问题的解决方案。

只需添加库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

并通过设置文本系数来更改字体大小：

```
$("#text_div").fitText(0.8); 
```

您可以设置文本的最大值和最小值：

```
$("#text_div").fitText(0.8, { minFontSize: '12px', maxFontSize: '36px' }); 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2016-09-19T20:19:32.400

始终让您的**元素**具有此属性：

JavaScript：`element.style.fontSize = "100%";`

或者

CSS：`style = "font-size: 100%;"`

当你进入全屏时，你应该已经计算了一个**比例**变量（比例 > 1 或比例 = 1）。然后，全屏：

```
document.body.style.fontSize = (scale * 100) + "%"; 
```

它适用于很少的代码。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2018-01-12T21:11:19.930

这对我有用：

我尝试根据设置“font-size: 10px”获得的宽度/高度来近似字体大小。基本上，这个想法是“如果我有 20 像素宽和 11 像素高且 `font-size: 10px`，那么计算一个 50 像素宽和 30 像素高的容器的最大字体大小是多少？”

答案是双比例系统：

{ 20:10=50:X, 11:10=30:Y } = { X= (10*50)/20, Y= (10*30)/11 }

现在 X 是一个与宽度匹配的字体大小，而 Y 是一个与高度匹配的字体大小；取最小值

```
function getMaxFontSizeApprox(el){
    var fontSize = 10;
    var p = el.parentNode;

    var parent_h = p.offsetHeight ? p.offsetHeight : p.style.pixelHeight;
    if(!parent_h)
        parent_h = 0;

    var parent_w = p.offsetHeight ? p.offsetWidth : p.style.pixelWidth;
    if(!parent_w)
        parent_w = 0;

    el.style.fontSize = fontSize + "px";

    var el_h = el.offsetHeight ? el.offsetHeight : el.style.pixelHeight;
    if(!el_h)
        el_h = 0;

    var el_w = el.offsetHeight ? el.offsetWidth : el.style.pixelWidth;
    if(!el_w)
        el_w = 0;

    // 0.5 is the error on the measure that JavaScript does
    // if the real measure had been 12.49 px => JavaScript would have said 12px
    // so we think about the worst case when could have, we add 0.5 to 
    // compensate the round error
    var fs1 = (fontSize*(parent_w + 0.5))/(el_w + 0.5);
    var fs2 = (fontSize*(parent_h) + 0.5)/(el_h + 0.5);

    fontSize = Math.floor(Math.min(fs1,fs2));
    el.style.fontSize = fontSize + "px";
    return fontSize;
} 
```

注意：函数的参数必须是 span 元素或小于其父元素的元素，否则如果子元素和父元素具有相同的宽度/高度，则函数将失败。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2017-03-16T09:10:01.420

看看我的代码。它使那里的`font size smaller`任何`fit`东西。

但我认为这不会带来良好的用户体验

```
var containerWidth = $("#ui-id-2").width();
var items = $(".quickSearchAutocomplete .ui-menu-item");
var fontSize = 16;

items.each(function(){
    // Displaying a value depends sometimes on your case. You may make it block or inline-table instead of inline-block or whatever value that make the div take overflow width.
    $(this).css({"whiteSpace": "nowrap", "display": "inline-block"});
    while ($(this).width() > containerWidth){
         console.log("$(this).width()" + $(this).width() + "containerWidth" + containerWidth)
         $(this).css("font-size", fontSize -= 0.5);
    }
}); 
```

[![结果](https://i.stack.imgur.com/AIIPr.png)](https://i.stack.imgur.com/AIIPr.png)

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2017-10-17T07:22:34.020

对于动态文本，这个插件非常有用：

[http://freqdec.github.io/slabText/](http://freqdec.github.io/slabText/)

只需添加 CSS：

```
.slabtexted .slabtext
{
    display: -moz-inline-box;
    display: inline-block;
    white-space: nowrap;
}
.slabtextinactive .slabtext
{
    display: inline;
    white-space: normal;
    font-size: 1em !important;
    letter-spacing: inherit !important;
    word-spacing: inherit !important;
    *letter-spacing: normal !important;
    *word-spacing: normal !important;
}
.slabtextdone .slabtext
{
    display: block;
} 
```

和脚本：

```
$('#mydiv').slabText(); 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2019-08-21T12:13:55.117

### HTML

```
<div style="height:100px; width:200px;">
  <div id='qwe'>
    test
  </div>
</div> 
```

最大化字体大小的 JavaScript 代码：

```
var fontSize, maxHeight, maxWidth, textElement, parentElement;
textElement = document.getElementById('qwe');
parentElement = textElement.parentElement;    
maxHeight = parentElement.clientHeight;
maxWidth = parentElement.clientWidth;
fontSize = maxHeight;
var minFS = 3, maxFS = fontSize;
while (fontSize != minFS) {
  textElement.style.fontSize = `${fontSize}px`;
  if (textElement.offsetHeight < maxHeight && textElement.offsetWidth <= maxWidth) {
    minFS = fontSize;
  } else{
    maxFS = fontSize;
  }
  fontSize = Math.floor((minFS + maxFS)/2);
}
textElement.style.fontSize = `${minFS}px`; 
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2017-06-14T06:26:23.710

如果它对任何人都有帮助，这个线程中的大多数解决方案都是将文本包装成多行，形式 e。

但后来我发现了这个，它起作用了：

[https://github.com/chunksnbits/jquery-quickfit](https://github.com/chunksnbits/jquery-quickfit)

示例用法：

`$('.someText').quickfit({max:50,tolerance:.4})`

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2017-01-05T07:33:30.257

作为 JavaScript 后备（或您唯一的解决方案），您可以使用我的[jQuery Scalem 插件](https://thdoan.github.io/scalem/)`reference`，它允许您通过传递选项相对于父元素（容器）进行缩放。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-07-27T17:34:26.990

关于 CSS flex 属性，我没有看到任何答案，但它也非常有用。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2017-11-08T14:27:41.930

为了使字体大小适合它的容器，而不是窗口，请参阅`resizeFont()`我在这个问题中共享的功能（其他答案的组合，其中大部分已经在这里链接）。它是使用触发的`window.addEventListener('resize', resizeFont);`。

*[Vanilla JavaScript：调整字体大小以适应容器](https://stackoverflow.com/questions/47181524/vanilla-js-resize-font-awesome-to-fit-container)*

# JavaScript：

```
function resizeFont() {
  var elements  = document.getElementsByClassName('resize');
  console.log(elements);
  if (elements.length < 0) {
    return;
  }
  _len = elements.length;
  for (_i = 0; _i < _len; _i++) {
    var el = elements[_i];
    el.style.fontSize = "100%";
    for (var size = 100; el.scrollHeight > el.clientHeight; size -= 10) {
      el.style.fontSize = size + '%';
    }
  }
} 
```

您也许可以使用 vw/vh 作为后备，因此您可以使用 JavaScript 动态分配`em`或`rem`单位，确保在禁用 JavaScript 时字体确实缩放到窗口。

将`.resize`类应用于包含您希望缩放的文本的所有元素。

在添加窗口调整大小事件侦听器之前触发该函数。然后，任何不适合其容器的文本将在页面加载时按比例缩小，以及在调整大小时。

注意：默认值`font-size`必须设置为`em`或`rem`以`%`获得正确的结果。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2022-01-01T22:07:30.380

那这个呢？
将父级的字体大小设置为等于其宽度，然后使用百分比作为文本元素字体大小。

```
.element {
    width: 400px;
    font-size: 400px; /* equal to width */
}

.text {
    width: 10%;  /* will be 40px */
} 
```

当您处理图标时，我发现这非常容易，但也适用于文本。

```
/* start of styling */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.box {
  display: block;
  background: cornflowerblue;
  height: max-content;
  margin-bottom: 32px;
}

/* end of styling */

.box p {
  font-size: 20%;
}
```

```
<div class="box" style="width: 400px; font-size: 400px">
  <p>Text</p>
</div>

<div class="box" style="width: 128px; font-size: 128px">
  <p>Text</p>
</div>

<div class="box" style="width: 10vw; font-size: 10vw">
  <p>Text</p>
</div>

<div class="box" style="width: 64px; font-size: 64px">
  <p>Text</p>
</div>
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-09-11T14:49:27.803

直接媒体查询似乎是一种更简单、更易于理解的解决方案，可以根据可能是动态的容器大小调整字体大小。

下面将字体大小调整为容器的大小，无论容器是否缩放到视口的大小，或者是否达到其最大值。如果你有非 100% 宽的容器，你可以`vw`相应地调整。

```
.container {
    width: 100%;
    max-width: 600px;
}
.headline {
    font-size: 20vw;
}
.subhead {
    font-size: 5vw;
}
@media (min-width:600px) {
    .headline {
        font-size: 120px;
    }
    .subhead {
        font-size: 32px;
    }
} 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-09-16T00:12:39.493

纯CSS在某种程度上是可能的。

```
.auto-sized-text {
    content:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='1.3em' width='10em'><text x='0' y='0.9em' fill='red'>Here is a resizing text</text></svg>");

    background-color: rgba(0,0,0,0.06);
    animation: grow 2s infinite alternate both;
}

@keyframes grow {
  from { width: 100px; }
  to { width: 300px; }
}
```

```
<div class="auto-sized-text">
</div>
```

##### 解释

[`content`rule](https://developer.mozilla.org/en-US/docs/Web/CSS/content)设置元素的内容，它可以是图像的 URL，包括 SVG 图像。SVG 图像可以包含文本，所以基本上你有一个带有文本的背景图像，它会根据其父级的大小调整大小。您也可以使用`background-image`属性，但与`content`它不同的是它不会影响元素的布局，因此您需要定义父元素的大小。

这种方法的问题是，您需要在 SVG 中定义文本的颜色、大小和位置。他们不会从父母那里继承。但是你可以通过 Sass 和 Less 变得聪明。此解决方案也可能存在可访问性问题。

我不建议在任何地方使用它。但它在某些情况下应该相当有用。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2022-02-28T17:05:23.633

这是一个纯 CSS 解决方案，您承认断点是必要的，但也需要文本缩放：

> 我知道我可以添加断点，但我真的希望文本可以缩放以及有额外的断点，否则......

这是一种使用方法：

1.  [自定义属性](https://www.w3.org/TR/css-variables-1/#custom-property)
2.  断点的媒体查询
3.  [`clamp()`](https://www.w3.org/TR/css-values-4/#funcdef-clamp)（[2022 年 2 月的浏览器支持](https://caniuse.com/?search=clamp)率相当不错，达到 93%）
4.  [`calc()`](https://www.w3.org/TR/css-values-4/#calc-func)

如果可以使用*一个通用缩放因子*来控制每个屏幕容器内的**所有**`max-width`文本缩放，那么您需要做的就是按比例缩放自定义属性`max-width`，并将该因子应用于 1[计算](https://www.w3.org/TR/css-values-4/#calc-calculation)。

基本设置如下所示：

```
:root {
  --scaling-factor: 1
}

.parent {
  font-size: 30px
}

.largest {
  font-size: clamp(60%, calc(var(--scaling-factor) * 100%), 100%); 
}

.middle {
  font-size: clamp(60%, calc(var(--scaling-factor) * 85%), 100%); 
}

.smallest {
  font-size: clamp(60%, calc(var(--scaling-factor) * 70%), 100%); 
} 
```

然后嵌套您的媒体查询，如下所示（或您的断点所需的任何内容）：

```
@media (max-width: 1200px) {
  :root {
    --scaling-factor: 0.9
  }
  @media (max-width: 800px) {
    :root {
      --scaling-factor: 0.8
    }
    @media (max-width: 600px) {
      :root {
        --scaling-factor: 0.5 /* nope, because the font-size is floored at 60% thanks to clamp() */
      }
    }
  }
} 
```

这可以最大限度地减少您的媒体查询标记。

**优点**

1.  一个自定义属性控制所有缩放...无需为每个媒体断点添加多个声明
2.  的使用设置了应该是`clamp()`什么的下限，所以你确保你的文本**永远不会太小**（这里的下限是父母的 60% ）`font-size`**`font-size`**

 **请参阅[此 JSFiddle](https://jsfiddle.net/CSSBurner/kp03tz49/)以获取演示。调整窗口大小，直到最小宽度，段落都相同`font-size`。

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2016-06-28T04:34:28.473

如果问题是宽屏桌面上的字体太大，我认为最简单的 CSS 方法是这样的（假设包装器最大 1000 像素宽）

```
.specialText{
    font-size: 2.4vw;
}

@media only screen and (min-width: 1000px) {
    .specialText {
        width: 24px;
    }
} 
```

因此，对于小于容器最大宽度的任何屏幕，它都会自动调整大小，而当屏幕更宽时（几乎所有台式机和笔记本电脑），它会自动调整大小。

* * *

## 回答 #37

> 赞同：-2
> 
> 时间：2020-07-06T14:03:00.937

我刚刚创建[了一个演示](https://codepen.io/webdevelopers/pen/GRoQQaL)如何做到这一点。它使用`transform:scale()`一些监视元素调整大小的 JS 来实现这一点。很好地满足我的需求。

* * *

## 回答 #38

> 赞同：-2
> 
> 时间：2018-11-02T18:32:36.143

**但是如果容器不是视口（主体）呢？**

真正的答案在于**transform 属性**允许您通过倾斜、旋转、平移或缩放来直观地操作元素：

[https://css-tricks.com/almanac/properties/t/transform/](https://css-tricks.com/almanac/properties/t/transform/)**

# maven-3 - Jenkins 如何在 Cloudbees 中查找 maven 存储库？

> ID：16056593
> 
> 赞同：1
> 
> 时间：2013-04-17T09:37:22.710
> 
> 标签：maven-3, pom.xml, cloudbees

Cloudbees Jenkins 查找 maven 存储库的方式经常遇到问题。我们的项目还不成熟，所以我们在 Assembla 上使用私有存储库和外部 SVN。通常 jenkins 会查看公共 Cloudbees 和我们的私有存储库来解决依赖关系。但有时它会在公共回购中停止并且无法转移工件。

编辑：触发的工作 projectA 使用配置文件。此配置文件添加自定义属性以完成构建。我已将它们放在此文档之后的私有 settings.xml 中。

[http://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors](http://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors)

所以这似乎是在停用 cloudbees 默认配置文件。

此作业的一个示例未找到父 POM。Jenkins 能够将父 POM 部署到私有存储库。它启动了第二个工作（projectA）

```
Uploaded: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/1.2-SNAPSHOT/projectA-pom-1.2-20130416.155847-5.pom (5 KB at 79.0 KB/sec)
Downloading: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/maven-metadata.xml
Downloaded: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/maven-metadata.xml (285 B at 7.0 KB/sec)
Uploading: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/1.2-SNAPSHOT/maven-metadata.xml
Uploaded: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/1.2-SNAPSHOT/maven-metadata.xml (600 B at 9.2 KB/sec)
Uploading: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/maven-metadata.xml
Uploaded: https://repository-accountid.forge.cloudbees.com/snapshot/com/company/projectA-pom/maven-metadata.xml (285 B at 5.5 KB/sec)
[INFO] Deployment done in 0.62 sec
Triggering a new build of projectA #12 
```

第二个构建应该使用新的 POM 父级（或至少已经可用）。它在公共存储库中搜索并停在那里。也许这是 Maven 插件的临时问题（Maven 2 jenkins 插件或 Cloudbees maven 插件）

```
no change for https://subversion.assembla.com/svn/accountid.repo/projectA/trunk since the previous build
Parsing POMs
Failed to transfer Could not find metadata com.company:projectA-pom:1.2-SNAPSHOT/maven-metadata.xml in cloudbees-nexus-repository (http://repo.cloudbees.com/content/groups/public)
Failed to transfer Could not find artifact com.company:projectA-pom:pom:1.2-SNAPSHOT in cloudbees-nexus-repository (http://repo.cloudbees.com/content/groups/public)
ERROR: Failed to parse POMs
hudson.util.IOException2: remote file operation failed: /scratch/jenkins/workspace/projectA at hudson.remoting.Channel@2b842bd6:s-38976f5e
    at hudson.FilePath.act(FilePath.java:877)
    at hudson.FilePath.act(FilePath.java:863)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.parsePoms(MavenModuleSetBuild.java:910)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:654)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:510)
    at hudson.model.Run.execute(Run.java:1505)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: hudson.remoting.ProxyException: hudson.maven.MavenModuleSetBuild$MavenExecutionException: org.apache.maven.project.ProjectBuildingException: Some problems were encountered while processing the POMs:
[FATAL] Non-resolvable parent POM: Could not find artifact com.company:projectA-pom:pom:1.2-SNAPSHOT in cloudbees-nexus-repository (http://repo.cloudbees.com/content/groups/public) and 'parent.relativePath' points at wrong local POM @ line 14, column 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T14:50:32.067

您是否阅读过[CloudBees Private Maven Repository](http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository) wiki 页面？您可能需要配置自定义`settings.xml`.

# neo4j - 如何在 Neo4j 中终止当前长时间运行的查询

> ID：16056594
> 
> 赞同：36
> 
> 时间：2013-04-17T09:37:23.197
> 
> 标签：neo4j

如何在 Neo4j 中终止当前长时间运行的查询（无需重新启动服务器）？

我知道我们可以[为查询全局设置超时](https://groups.google.com/forum/#!topic/neo4j/5ec8FThLTeo)，但有时我想在服务器上执行繁重的查询/创建/更新，这可能需要一段时间......

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-15T17:10:06.243

在 >3.1 Enterprise 版本中可用

```
CALL dbms.listQueries()
CALL dbms.killQuery(queryId) 
```

管理员可能会“杀死他们”

还有

```
 :queries 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T08:12:22.513

2.2 版本在这方面有一些功能，但仍然没有你可以看到的监控工具，例如，其他客户端运行的查询，你只能杀死自己长时间运行的查询，通过 web ui 或 shell 执行。

[Neo4J 2.2 发行说明](http://neo4j.com/blog/neo4j-2-2-milestone-1-release/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T08:29:37.747

目前没有办法在 Neo4j 中中止查询。至少我在需要的时候没有找到任何东西，而且我搜索了很多次文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T10:26:15.963

我认为没有办法在 Neo4j 中中止查询。

有一种方法可以使用 Guard 自动终止长时间运行的查询（您可以选择最大操作数或超时）。发出了一些指令（无法立即找到，我需要运行）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-15T19:51:06.983

我发现在 shell 中按 CTRL-C 会终止查询（运行 V3.0.3）

# java - 交互列表对象内的对象

> ID：16056595
> 
> 赞同：0
> 
> 时间：2013-04-17T09:37:23.290
> 
> 标签：java, android

```
private List<Pair<String, List<ClassName>>> documents = 
                    new ArrayList<Pair<String, List<ClassName>>>(); 
```

我正在尝试迭代当前的列表对象，以便获得`ClassName.getId();`. 我的 ClassName 对象有一个 getId()，我需要显示它。我怎么会`iterate`这样`i can get the Id.`

我在看这个[http://developer.android.com/reference/android/util/Pair.html](http://developer.android.com/reference/android/util/Pair.html)，但无法从中得到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:40:52.067

你需要这个吗？

```
private List<Pair<String, List<ClassName>>> documents = 
                new ArrayList<Pair<String, List<ClassName>>>();

//...
for(Pair<String, List<ClassName>> pair : documents) {
    for(ClassName className : pair.second) {
        // do what you want with className
        className.getId();
        // blah blah blah
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:41:12.393

这应该做你想做的事：

```
for(Pair<String, List<ClassName>> doc : documents ) {
    for(ClassName object : doc.second) {
        object.getId();
    }
} 
```

# javascript - ASP .NET MVC4 日期选择器只有月份和年份

> ID：16056599
> 
> 赞同：1
> 
> 时间：2013-04-17T09:37:39.150
> 
> 标签：javascript, jquery, .net, asp.net-mvc, razor

我正在尝试制作一个仅显示年份和月份的日期选择器。

我在不同的地方看到了这个问题，但我测试过的所有解决方案都不起作用。

我按照这个例子：http: [//jsfiddle.net/bopperben/DBpJe/](http://jsfiddle.net/bopperben/DBpJe/)

这是我的 .cshtml 文件：

```
@using Site.Models
@{
    ViewBag.Title = "Rapports";
}

<script type="text/javascript">
    $(function() {
    $('.date-picker').datepicker( {
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,
    dateFormat: 'MM yy',
    onClose: function(dateText, inst) { 
        var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
        var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        $(this).datepicker('setDate', new Date(year, month, 1));
    }
    });
    });
</script>
<style type="text/css">
    .ui-datepicker-calendar {
    display: none;
    }
</style>

<h2>Rapports</h2>

<div>

    @using (Html.BeginForm()) {
        <input name="startDate" id="startDate" class="date-picker" />
        <input type="submit" value="Rechercher" />
    } 

</div> 
```

但是在我的页面中只有一个文本框，当我单击它时没有弹出任何内容。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:27:20.630

您是从 ASP.NET MVC4 互联网模板开始的吗？

我已经在上面尝试了你的代码，并让它在两个细节上工作。

我在部分脚本中添加了脚本标记（这将确保它在加载 jquery 后呈现）

```
@section scripts
{
    <script type="text/javascript">
        $(document).ready(function() {
            $('.date-picker').datepicker({
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                dateFormat: 'MM yy',
                onClose: function(dateText, inst) {
                    var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                    var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                    $(this).datepicker('setDate', new Date(year, month, 1));
                }
            });
        });
    </script>
} 
```

在 _Layout.cshtml 我添加了 jquerui 包（脚本和样式）（在页面中加载 jqueryui）

```
//In head tag
@Styles.Render("~/Content/css")
@Styles.Render("~/Content/themes/base/css")

//After closing footer tag

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")

@RenderSection("scripts", required: false) 
```

![截屏](https://i.stack.imgur.com/3dqei.png)

# java - 如何使用 Joda 将服务器时间转换为本地时间？

> ID：16056601
> 
> 赞同：0
> 
> 时间：2013-04-17T09:37:44.837
> 
> 标签：java, jodatime, localtime

我正在开发手机应用程序。因此，发布后的应用程序将为世界各地的所有用户做好准备。我需要用用户的本地时间调整服务器时间。我想也许 Joda（我正在使用的图书馆）能够做到这一点。我的问题是如何将服务器时间更改为用户本地时间。

服务器返回“ **2013-04-17T07:43:45Z** ”作为日期/时间。搜索互联网后，我可以成功地将其解析为“ **17 Apr 2013, 07:43 AM** ”。这是我的方法：

```
private String formatFanciedDate(String date) {
        date = date.substring(0 , date.length()-1); // Removing Z otherwise crash happens

        try {
            LocalDateTime dt1 = LocalDateTime.parse(date); // Like 2013-03-30T09:04:56.123
            return dt1.toString("dd MMM yyyy, HH:mm a");
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        }

        return "";
    } 
```

但是，这不是我的当地时间（正确的时间应该是下午 15:00 左右）。如何将这个时间更改为我的当地时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:53:17.900

您从输入中去除“Z”，但这是指定时区的位！Z 表示它是 UTC。如果没有这些信息，Joda 就无法理解输入。

我认为您正在寻找的是：

```
LocalDateTime local = new DateTime("2013-04-17T07:43:45Z").toLocalDateTime(); 
```

# wpf - WPF DropShadowEffect 打破按钮中的文本

> ID：16056604
> 
> 赞同：3
> 
> 时间：2013-04-17T09:37:56.223
> 
> 标签：wpf, xaml, button, user-interface, dropshadow

我已经为我的按钮定义了一种样式，其中包含使用阴影的深度。我在网上读到这有时会导致文本模糊，但可以通过使用以下方法在 WPF4 中解决：

```
TextOptions.TextFormattingMode="Display" 
```

但是，我的按钮中的文字并不模糊，但显示不正确，上面的代码没有改善显示效果。

带阴影： ![在此处输入图像描述](https://i.stack.imgur.com/hSeIY.png)

没有阴影：![在此处输入图像描述](https://i.stack.imgur.com/b7uRh.png)

阴影是在应用于按钮的样式中定义的。

```
<Style TargetType="Button" x:Key="RedButton">
    <Setter Property="SnapsToDevicePixels" Value="true" />
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="MinHeight" Value="25" />
    <Setter Property="MinWidth" Value="70" />
    <Setter Property="FontFamily" Value="Verdana" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border TextBlock.Foreground="{TemplateBinding Foreground}" x:Name="Border" CornerRadius="6" BorderThickness="1">
                    <Border.BorderBrush>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <LinearGradientBrush.GradientStops>
                                <GradientStopCollection>
                                    <GradientStop Color="{StaticResource DarkRedColor}" Offset="1.0" />
                                </GradientStopCollection>
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Border.BorderBrush>
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="{StaticResource LightRedColor}" Offset="0.5" />
                            <GradientStop Color="{StaticResource DarkRedColor}" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity=".50" ShadowDepth="4" RenderingBias="Quality" />
                    </Border.Effect>..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:52:12.843

认为这是因为`DropShadowEffect`试图适用于所有孩子，我猜这`ContentPresenter`是`Style`

尝试这个：

```
<Style x:Key="RedButton"
        TargetType="Button">
  ...
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Grid>
          <Border x:Name="Border"
                  BorderThickness="1"
                  CornerRadius="6"
                  TextBlock.Foreground="{TemplateBinding Foreground}">
            <Border.BorderBrush>
              <LinearGradientBrush StartPoint="0,0"
                                    EndPoint="0,1">
                <LinearGradientBrush.GradientStops>
                  <GradientStopCollection>
                    <GradientStop Offset="1.0"
                                  Color="{StaticResource DarkRedColor}" />
                  </GradientStopCollection>
                </LinearGradientBrush.GradientStops>
              </LinearGradientBrush>
            </Border.BorderBrush>
            <Border.Background>
              <LinearGradientBrush StartPoint="0.5,0"
                                    EndPoint="0.5,1">
                <GradientStop Offset="0.5"
                              Color="{StaticResource LightRedColor}" />
                <GradientStop Offset="1"
                              Color="{StaticResource DarkRedColor}" />
              </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
              <DropShadowEffect Opacity=".50"
                                RenderingBias="Quality"
                                ShadowDepth="4"
                                Color="Black" />
            </Border.Effect>
          </Border>
          <Border BorderThickness="1"
                  CornerRadius="6"
                  TextBlock.Foreground="{TemplateBinding Foreground}">
            <ContentPresenter />
          </Border>
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

# python - 如何有效地将图像从 C 进程传递到 Python 进程？

> ID：16056607
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:38:00.123
> 
> 标签：python, c, image, wxpython, ipc

## 目标

将图像从 C 进程快速传递到 Python 进程。

## 细节

C 进程是一个命令行工具，可生成光栅图像。Python 进程是一个 GUI 应用程序，它要求 C 工具生成图像，然后显示这些图像。因此，用户（在他的操作之后）等待图像在 GUI 中显示。

### 速度要求

目前使用的系统是由 C 应用程序将文件写入磁盘，然后由 Python 应用程序读回。图像的大小可能以像素为单位不同（但大约为 1000x1000）。当前格式是未压缩的，但是使用压缩格式传输也很慢。

通常，需要创建和显示多个图像，因此也可以应用一些并行方法。然而，并行化本身（以及压缩）并没有使传输更快。

### 平台和许可证

解决方案应该是跨平台的，尤其是 GNU/Linux、MS Windows 和 Mac OS X。

该项目在 GNU GPL 2 或更高版本下，因此该解决方案应该是兼容的。

### 图书馆

该解决方案不应带来新的大型依赖项，例如 boost 库。更小，系统或已经使用的库更受欢迎。

C 应用程序正在使用 cairo 库。除非确实需要，否则最好不要添加新的依赖项。在极端情况下，可以使用 ctypes 将 C 代码包装到 Python 脚本中，但这不是首选。

Python 应用程序使用 wxPython、ctypes 和 PIL。可以添加新的依赖项，并且可以（甚至）包含新的库（但依赖项越少越好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:52:14.893

那有多“慢”？如果你已经在使用库——比如 PIL 和 cairo——他们确实有优化的代码来处理图像。您的解决方案可以通过在内存中传输字段来优化，而不是先写入磁盘，然后重新读取它们 - 而且，通过不使用原始图像 - LZ 风格的压缩可以提高未压缩图像的速度 - 我认为“默认情况下，pcx" 或 "tiff" 可以使用此类压缩。（另一方面，PNG 压缩很慢）。

对于使用内存传输而不是通过磁盘，我认为您可以使用以下方法：创建一个使用“cython”的二进制模块，它将原始图像数据提供给 PIL Image 对象 - 并使用调用 cython0--reated 函数多处理，可能带有 concurrent.futures 的反向移植

Cython 是构建的必要条件，但不是运行此类模块的必要条件 - 我必须添加，因为依赖关系是一个问题。

无论如何，我认为您应该在花费大量时间之前准确地分析您的系统 - 我认为您无法获得更好的速度（如果图像处理步骤是，它可能会提高 200-300%轻 - 但如果这会将你的时间从 3 秒减少到 1 秒，你就不会那么好 - 从你的问题我推断你想要一个数量级的提升）。如果您还没有并行运行图像处理 C 程序，那么您当然应该为每个 CPU 内核生成至少一个这样的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:42:25.857

Given that...

> The C process is a command line tool...

...your options are quite limited. I answered a [similar question](https://stackoverflow.com/questions/15975714/create-image-object-from-image-stdout-output-of-external-program-in-python) quite recently, which uses pipes.

If you could replace the command line tool with a daemon process, you could avoid the overhead of creating a new process each time, and use something like sockets instead.

# python - 使用 django 在 python 中的 Lastfm 艺术家搜索器

> ID：16056614
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:38:15.740
> 
> 标签：python, django, last.fm

我必须使用带有 last.fm API 的 django 在 python 中创建一个简单的艺术家搜索器。我知道django使用了数据库，但是不知道怎么才能到达last.fm数据库，在哪里可以设置呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:50:18.623

你不需要将你的 Django 数据库直接连接到 last.fm，而且——事实上——你甚至不能这样做。相反，您需要使用 last.fm API 从他们的数据库中获取数据——您在问题中已经提到了这一点。

在高层次上，您需要做的是：

*   获取[last.fm 的 API 帐户](http://www.last.fm/api/account/create)
*   [从 last.fm API 文档 ( artist.search](http://www.last.fm/api/show/artist.search) )中找到您要调用的 API 方法
*   在你的 Python 脚本中调用这个方法（很可能是某个`views.py`方法）
*   从 API 调用返回并格式化结果（可能是 JSON 或直接呈现为 HTML 模板）

在实践中，你最终会得到类似的东西：

```
import requests

def lastfm_artist_search(request, artist_name):
    api_url = 'http://ws.audioscrobbler.com/2.0/'
    api_key = 'YOUR_LASTFM_API_KEY'
    url = api_url+'?method=artist.search&format=json&artist='+artist_name+'&api_key='+api_key
    data = requests.get(url)
    return HttpResponse(data.text) 
```

# javascript - 在javascript中实现查找分隔符位置是否存在问题

> ID：16056615
> 
> 赞同：0
> 
> 时间：2013-04-17T09:38:30.710
> 
> 标签：javascript, asp.net, vb.net

我有个问题。

我想知道如何找到分隔符的位置。

或者使用**DD / MM / YYYY**格式的日期，而不必强制使用斜线。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:46:57.367

您可以使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)或[lastIndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf)来查找分隔符位置。如果只是格式化日期的问题，请查看一些可用的日期库。

这里仅仅是少数：

[时刻](https://code.google.com/p/datejs/) [.js 日期.js](http://arshaw.com/xdate/) [xdate.js](http://momentjs.com/)

还有更多，只需 G* 搜索“javascript 日期库”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:02:10.973

I was wondering if there is any function or method that I return the system date in the format:

**10/12/2012** or **12/10/2012** or last **10:12:2012**

but not manually enter the slash, colon or dash.

# ibm-midrange - 如何防止用户在文本字段（字符类型）中输入特殊字符（如键盘中不可见的符号）？

> ID：16056616
> 
> 赞同：1
> 
> 时间：2013-04-17T09:38:31.697
> 
> 标签：ibm-midrange, rpgle, rpg

如何防止用户在 AS400 的文本字段（字符类型）中输入特殊字符（如键盘中不可见的符号）？显然，大多数时候 iseries/as400 在接受它并将其保存到文件中没有问题，但有时当数据在下游报告系统中处理时，它会在系统中因不同的错误而被拒绝。有没有办法防止入口点本身？

例如：在客户的地址字段中，最终用户从网页或文档中复制粘贴 (ctrl + c ctrl + v) 详细信息，导致输入垃圾字符或空值，这些字符在存储时没有问题，但后来在其他报告应用程序中出现问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T10:27:43.450

使用该函数验证屏幕字段，[`%CHECK`](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508823.htm)并在存在无效内容时显示错误。

```
D allow           C                   'ABCDEFGHIJKLMNOPQRSTUVWXYZ+
D                                      abcdefghijklmnopqrstuvwxyz+
D                                      0123456789'

/free
    if %check(allow:scrfld01) > 0;
        error = 1;
    endif; 
/end-free 
```

或者，您可以遍历屏幕字段，在保存记录之前删除允许的字符集中不存在的任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T01:45:07.303

Most issues related to invalid characters are listed here. You could use it on any character field with the %XLATE opcode. Example:

In your "D" specs use this...

```
 * Special Characters used for EBCDIC converision using CCSID 37       ----                
     * Invalid Control Characters not allowed in XML, including 
     * Plus CR and LF since ----                
     D RC              C                   Const(x'000102030B0C0D0E0F1011121316-                
     D                                     18191C1D1E1F2526272D2E2F32373C3D3F')                 
      * Blank characters to replace RC with in Xlate. 31 of them.           ----                
     D BC              C                   Const(                                               
     D                                     '                               ') 
```

And, in your code...

```
 MyText = %XLate(RC:BC,MyText); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:30:42.180

不确定您是在询问如何在接受数据的程序中找到字符，或者如何阻止所有程序写入此类数据。我假设是后者。

我知道可以肯定地做到这一点的唯一方法是使用触发程序。系统没有字段中允许/不允许的字符黑名单（无论如何您都不希望这样）。

希望只有少数表（文件）以这种方式与您相关，并且您可以编写一个触发器程序，为每个表附加 BEFORE_UPDATE 和 BEFORE_INSERT，检查相关字段以及：

> 更改它看到的任何控制字符（这通常是错误的形式）

```
 or

 > Fails the write, allowing the entry program to re-prompt the user (most 
   programmers do not properly handle errors - especially write errors - so 
   this solution is iffy) 
```

如果您有很多这样的文件，可以设置一个通用触发器，该触发器将使用检索字段 API 确定相关表的布局（表名是触发器的参数）。警惕性能下降。

# c++ - 释放锁定的内存是否会解锁相应的页面？

> ID：16056617
> 
> 赞同：1
> 
> 时间：2013-04-17T09:38:35.133
> 
> 标签：c++, c, unix, memory, posix

很清楚如何组合`mlockall()`并`malloc()`锁定进程在其生命周期内分配的所有页面。通过阅读文档，我不清楚释放**已经锁定**的内存是否意味着相应页面的自动解锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:47:49.970

如果`free`将内存返回给系统（即，它被分配`mmap`并将被释放`munmap`），那么当它被取消映射时，锁将自动被移除。这通常是大分配的情况。

如果`free`将内存返回到进程内管理的堆，则锁将保留。这通常是小分配的情况。

在 GNU/Linux 上，您可以使用;`mallopt`获取和设置分配阈值。`mmap`默认（至少在我的电脑上）是 128kb。在其他 Unix 风格上，`mmap`如果您需要那种级别的控制，您可能需要直接使用。

# javascript - 无论页面如何，Javascript都在后台运行功能

> ID：16056624
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:39:06.263
> 
> 标签：javascript, background

无论我在哪里，我都需要定期运行一个函数。这个函数会定期获取一些数据。

我认为这行不通：

```
function myFunc()
{
    //your code
}

//set the interval

setInterval(myFunc,2000) //this will run the function for every 2 sec. 
```

因为它只适用于我现在所在的页面，所以如果我转到另一个页面，功能将不再执行。我想编写一个函数，当用户位于索引页面时开始运行，然后定期调用，直到用户关闭页面。任何的想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:44:30.833

这在浏览器中使用 javascript 是不可能的。当您离开页面时，脚本将停止。您必须在初始化此定期更新的每个页面上包含一个脚本。或者您可以将您的应用程序重写为现在似乎很流行的“单页应用程序”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:46:10.680

您需要一个[后端应用程序](http://en.wikipedia.org/wiki/Front_and_back_ends)或[cron-job](http://en.wikipedia.org/wiki/Cron)来执行此操作。

另一种方法是制作一个仅 Ajax 的单页应用程序。我猜推特使用了那个模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:52:59.740

根据你在函数中所做的事情，你最好使用一个 JS Worker，它将作为一个新线程运行，并允许你在后台继续处理尽可能多的事情，而不必担心 JS 超时。

这里的要点是你的要求在 JS 中**几乎是不可能**的，除非你使用类似于 jQUery 的东西并将你的页面动态加载到一个 div 中？这意味着您仍然具有更改页面但浏览器仅加载数据的效果（视觉上）。

事实上，使用 jQuery 将内容加载到 DIV 中非常容易：

```
$('#elementoloadid").load("/path/to/load"); 
```

您可以在不使用 jQuery 的情况下实现这一点，但会花费您更长的时间。

# excel - Excel / 编辑器中的西里尔字母显示问号

> ID：16056627
> 
> 赞同：0
> 
> 时间：2013-04-17T09:39:15.103
> 
> 标签：excel, csv, utf-8

我的 webapp 生成一个包含西里尔符号的普通 UTF-8 编码的 CSV 文件。该文件在 python 中读取得很好，结果也显示在浏览器中。但是，当我在 Excel 或编辑器等程序中打开它时，西里尔符号会被普通的“????”替换。

我尝试添加西里尔字体并添加西里尔键盘，但没有解决问题。我正在用德语运行 Windows 7。有人有任何提示吗？

**更新**

该问题甚至发生在通常支持西里尔字母的俄罗斯笔记本电脑上。在一些论坛上，我读到了一些关于 windows 编码的东西——这可能是问题吗？

# xml - 如果 xml 文件格式不正确，Eclipse 不会在包资源管理器中显示错误图标

> ID：16056635
> 
> 赞同：0
> 
> 时间：2013-04-17T09:39:36.343
> 
> 标签：xml, eclipse, validation, package-explorer

对于格式不正确/无效的 xml 文件（在我保存文件之后），Eclipse 不会在包资源管理器中显示错误图标。这是预期的行为吗？我可以自定义吗？我无法在首选项中找到任何内容。我正在使用 Eclipse Indigo 3.7.2。

![在此处输入图像描述](https://i.stack.imgur.com/Sl18o.png)

更新：我需要从上下文对文件执行“验证”。验证完成后，包资源管理器中也会显示错误图标。这似乎不直观。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:13:43.267

检查是否启用了 XML 验证。右键单击项目 Properties->Validation->XML Syntax 或尝试 Window->Preferences->Xml->Xml Files->Validation

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:27:24.340

我找到了这个[教程](http://www.eclipse.org/webtools/community/tutorials/XMLValidation/XMLValidationTutorial.html)。显然，xml 验证过程必须从上下文菜单中手动触发，而不是项目构建过程的一部分。要更改此设置，请打开项目设置，导航到`Validation`并选中`Add Validation Builder to project`. 一旦您检查它，它将不再显示。相反，它是构建过程的一部分，可以`Validation`在选项卡中的项目设置中启用/禁用`Builder`。

# android - sendOrderedBroadcast resultReceiver 处理程序

> ID：16056636
> 
> 赞同：0
> 
> 时间：2013-04-17T09:39:39.813
> 
> 标签：android, handler, broadcast

我正在使用 sendOrderedBroadcast 收集一些数据。在 resultReceiver 我解析这个数据，但这个操作可能需要几秒钟。

现在 sendOrderedBroadcast 有这个“Handler scheduler”参数，这似乎是我需要的，但不幸的是我真的不知道如何使用它。我需要的是在不同的线程上处理 resultReceiver 。怎么做？

编辑：重新表述问题：在广播接收器中，我需要解析大量数据，构造视图对象并将它们添加到 ArrayList。这会阻止用户界面。如何在不阻塞 UI 的情况下做到这一点？...我可以创建新线程，但我不能从那里创建 View 对象...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:19:27.117

看起来你宁愿审查你的设计。

无论如何，视图对象的构建都需要在 UI 上完成。在那里完成的繁重工作量取决于您如何设计数据以在视点构建时可用。

`AsyncTask`当您收到结果时，您可以生成一个将解析数据的方法。从中返回另一个对象列表，这可能是一个精简版本 (DTO)，它将具有创建视图对象所需的属性。不要在 getter 中编写解析逻辑。保持简单。这将有助于减少阻塞 UI 的时间。

# android - android如何使用内存中的警报对话框创建新文件夹

> ID：16056640
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:39:50.470
> 
> 标签：android

我想在按钮单击时创建新文件夹，使用警报对话框以用户名命名并在目录上创建文件夹，[如图所示](http://www.google.com.pk/imgres?q=android%20create%20new%20folder%20on%20alert&start=129&sa=X&hl=en&biw=992&bih=598&tbm=isch&tbnid=i5cXrx_VTKjORM%3a&imgrefurl=http://www.techradar.com/news/phone-and-communications/mobile-phones/50-really-useful-android-tips-and-tricks-709569&docid=nQ6PcZ8zKCikZM&imgurl=http://cdn3.mos.techradar.com///classifications/gadgets/phones/mobile-phones/Android/androidtips/rename_folders-320-100.jpg&w=320&h=480&ei=QWxuUYioJMqOrge9xYDoBA&zoom=1&iact=hc&vpx=763&vpy=56&dur=546&hovh=275&hovw=183&tx=121&ty=135&page=7&tbnh=159&tbnw=110&ndsp=22&ved=1t:429,r:34,s:100,i:106)。

如何在对话框栏上创建新文件夹？

请告诉我我该怎么做？？我如何使用对话框创建新文件夹

这是我要在其中创建文件夹的文件路径：

```
File photos = new File(getFilesDir(),"photos");
   photos.mkdir(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:46:54.623

您创建文件夹的代码看起来是正确的。要从用户那里获取文件夹名称，您需要执行以下操作：

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);

alert.setTitle("Title");
alert.setMessage("Message");

// Set an EditText view to get user input 
final EditText input = new EditText(this);
alert.setView(input);

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
       String value = input.getText();
       // Do something with value!

       //This is where you would put your make directory code
       File photos = new File(getFilesDir(),value);
       photos.mkdir();
    }
});

alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
    }
});

alert.show(); 
```

[从http://www.androidsnippets.com/prompt-user-input-with-an-alertdialog](http://www.androidsnippets.com/prompt-user-input-with-an-alertdialog)修改的代码示例

在尝试创建新目录之前检查目录是否已经存在通常是一种很好的做法。为此，请替换您的创建目录代码

```
String value = "directory to create"
File photos = new File(getFilesDir(),value);

if(!photos.exists())
{
    if(photos.mkdir()) 
      {
       //directory is created;
      }
} 
```

# facebook - 强制用户在访问我的网站之前喜欢 FB 页面

> ID：16056643
> 
> 赞同：0
> 
> 时间：2013-04-17T09:39:54.373
> 
> 标签：facebook, web, facebook-like

作为我正在开发的网站的一部分，我有一个 Like Gate Page，我想使用它来强制我的网站访问者`like`在被重定向到网站主页之前按下按钮。

当 Liker 访问者返回 LIKE Gate 页面时，他/她应该被自动重定向到网站主页（他/她已经按了赞）。

重要的：

1.  在 Facebook 应用程序/页面选项卡中找不到包括点赞门在内的整个网站！

2.  在他/她可以按赞按钮之前要求用户登录是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:54:57.790

好吧，在您的网页中，您可以实现 Facebook 登录并获得用户的许可以查看他/她的[喜欢](http://developers.facebook.com/docs/reference/api/user/#likes)。从 Graph API 中获得点赞，查看您的页面是否在列表中，并根据该列表显示您的网页，或将用户重定向到您的 Facebook 页面。您将需要`user_likes`获得许可。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-17T13:33:23.733

通过使用 Facebook Javascript SDK 方法 FB.Event.subscribe、FB.getLoginStatus、FB.api、authResponse、pages.isFan、access.token 和 Javascript SDK 以及一点点 PHP SDK。我在这个博客中看到了一个几乎完美的网站集成、完全解释和免费：http: [//daneworx.blogspot.com/2014/02/how-to-force-users-to-like-your -page.html](http://daneworx.blogspot.com/2014/02/how-to-force-users-to-like-your-page.html)

# scala - 如何在 Scala 中对泛型类型进行模式匹配？

> ID：16056645
> 
> 赞同：30
> 
> 时间：2013-04-17T09:39:58.610
> 
> 标签：scala, pattern-matching, type-erasure

假设我们有一个泛型类`Container`：

```
case class Container[+A](value: A) 
```

然后，我们希望将 a`Container`与 a`Double`和 a`Container`进行模式匹配`Any`：

```
val double = Container(3.3)  
var container: Container[Any] = double 
```

为此，我们通常会写：

```
container match {  
  case c: Container[String] => println(c.value.toUpperCase)
  case c: Container[Double] => println(math.sqrt(c.value))  
  case _ => println("_")  
} 
```

但是，编译器给出了两个警告，前两种情况各一个。例如，第一个警告说：“类型模式 Container[String] 中的非变量类型参数 String 未选中，因为它已被擦除消除”。由于擦除，在运行时无法区分不同种类的容器，并且会匹配第一个catch。结果，类型的容器`Container[Double]`将与第一种情况相匹配，该情况捕获`Container[String]`对象，因此`toUpperCase`将在 a 上调​​用方法`Double`并`java.lang.ClassCastException`抛出 a。

如何匹配`Container`特定类型的参数化？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-17T10:04:47.980

一般来说，rarry 的答案是正确的，但对于您的情况，它可以简化，因为您的容器仅包含一个泛型类型的值，因此您可以直接匹配该值的类型：

```
container match {
  case Container(x: String) => println("string")
  case Container(x: Double) => println("double")
  case _ => println("w00t")
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-17T09:55:10.353

也许这会有所帮助

```
 def matchContainer[A: Manifest](c: Container[A]) = c match {
      case c: Container[String] if manifest <:< manifest[String] => println(c.value.toUpperCase)
      case c: Container[Double] if manifest <:< manifest[Double] => println(math.sqrt(c.value))
      case c: Container[_] => println("other")
    } 
```

**编辑：**

正如 Impredicative 所指出的，清单已被弃用。相反，您可以执行以下操作：

```
import reflect.runtime.universe._
def matchContainer[A: TypeTag](c: Container[A]) = c match {
      case c: Container[String] if typeOf[A] <:< typeOf[String] => println("string: " + c.value.toUpperCase)
      case c: Container[Double] if typeOf[A] <:< typeOf[Double] => println("double" + math.sqrt(c.value))
      case c: Container[_] => println("other")
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-17T09:39:58.610

一个可能的解决方法是使用`isInstanceOf`and `asInstanceOf`。

```
container match {  
  case Container(x) if x.isInstanceOf[String] =>  
    println(x.asInstanceOf[String].toUpperCase)  
  case Container(x) if x.isInstanceOf[Double] =>  
    println(math.sqrt(x.asInstanceOf[Double]))  
  case _ => println("_")  
} 
```

这行得通，但它看起来一点也不优雅。`isInstanceOf`Scala 的创建者Martin Odersky 教授说`asInstanceOf`应该避免这种情况。

正如 Rob Norris 指出的那样，在Coursera*的“Scala 函数式编程*”课程的论坛上，按类型匹配是一种不好的做法：`case foo: Bar => ...`. Scala 鼓励利用静态类型并避免在运行时检查类型。这与 Haskell/ML 世界的哲学是一致的。子句应该匹配*构造函数*，而不是匹配*类型*。`case`

 *为了解决`Container`匹配问题，可以为每种类型定义一个特殊的容器：

```
class Container[+A](val value: A)

case class StringContainer(override val value: String)
  extends Container(value)

case class DoubleContainer(override val value: Double)
  extends Container(value) 
```

现在将匹配*构造函数，而不是**类型*：

```
container match {
  case StringContainer(x) => println(x.toUpperCase)
  case DoubleContainer(x) => println(math.sqrt(x))
  case _ => println("_")
} 
```

显然，我们可以`unapply`在两个对象中定义方法，`StringContainer`并`DoubleContainer`使用与上面相同的匹配，而不是扩展`Container`类：

```
case class Container[+A](val value: A)

object StringContainer {
  def unapply(c: Container[String]): Option[String] = Some(c.value)
}

object DoubleContainer {
  def unapply(c: Container[Double]): Option[Double] = Some(c.value)
} 
```

但这又不起作用，因为 JVM 类型擦除。

可以在此处找到对 Rob Norris 帖子的引用，该帖子将我引向此答案：[https](https://class.coursera.org/progfun-002/forum/thread?thread_id=842#post-3567) ://class.coursera.org/progfun-002/forum/thread?thread_id=842#post-3567 。不幸的是，除非您注册了 Coursera 课程，否则您无法访问它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-14T16:32:47.770

注意：您还可以使用[Miles Sabin](https://github.com/milessabin)的[Shapeless 库](https://github.com/milessabin/shapeless)（[Miles 在 2012 年在这里提到](https://stackoverflow.com/a/8821911/6309)）。

[您可以在Jaakko Pallari](https://twitter.com/lepovirta)的“[在 Scala 中模式匹配泛型类型的方法](https://gist.github.com/jkpl/5279ee05cca8cc1ec452fc26ace5b68b)”中看到一个示例

> **`Typeable`是一个类型类，它提供将值从`Any`类型转换为特定类型**的能力。转换操作的
> 结果是一个值将包含成功转换的值，该值表示转换失败。`Option``Some``None`
> 
> `TypeCase`桥梁`Typeable`和模式匹配。`Typeable`它本质上是实例的提取器

```
import shapeless._

def extractCollection[T: Typeable](a: Any): Option[Iterable[T]] = {
  val list = TypeCase[List[T]]
  val set  = TypeCase[Set[T]]
  a match {
    case list(l) => Some(l)
    case set(s)  => Some(s)
    case _       => None
  }
}

val l1: Any = List(1, 2, 3)
val l2: Any = List[Int]()
val s:  Any = Set(1, 2, 3)

extractCollection[Int](l1)    // Some(List(1, 2, 3))
extractCollection[Int](s)     // Some(Set(1, 2, 3))
extractCollection[String](l1) // None
extractCollection[String](s)  // None
extractCollection[String](l2) // Some(List()) // Shouldn't this be None? We'll get back to this. 
```

> 虽然`Typeable`看起来它具有解决类型擦除的能力，但它仍然与任何其他运行时代码具有相同的行为。
> 这可以在前面代码示例的最后几行中看到，其中空列表被识别为字符串列表，即使它们被指定为整数列表。这是因为`Typeable`强制转换基于列表的值。如果列表为空，那么自然是一个有效的字符串列表和一个有效的整数列表（或任何其他列表）*

# c# - MS Word 2010 无法打开宏存储

> ID：16056655
> 
> 赞同：2
> 
> 时间：2013-04-17T09:40:41.597
> 
> 标签：c#, windows, ms-word

我正在使用 Word 模板创建 Word 文档

以下是代码

```
 Word.Document wordDoc = new Word.Document();
 wordDoc = wordApp.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref oMissing); 
```

我收到错误无法打开宏存储。我申请了 DCOM 安全权限和所有读/写权限。

我的服务器是 Windows 2008 Professional & IIS 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T12:11:31.033

该模板可能包含一个宏。您应该在 Word的*宏设置中设置**对 VBA 项目对象模型的信任访问。*请参阅[http://support.microsoft.com/kb/282830/en-us](http://support.microsoft.com/kb/282830/en-us)或[http://support.microsoft.com/kb/303872/en-us](http://support.microsoft.com/kb/303872/en-us)

 *请注意，有可能从 DCOM 更改此设置，但我没有让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T13:32:09.250

对我来说，它在通过主机名而不是 IP 地址访问时工作。模板位于网络共享上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T01:13:59.303

我已经看到从模板加载文档但模板不在“受信任”位置时发生此错误。在指定模板中有或没有宏时发生。*

# jquery - 展开选择下拉菜单

> ID：16056666
> 
> 赞同：22
> 
> 时间：2013-04-17T09:41:02.633
> 
> 标签：jquery

我正在尝试在单击链接时展开选择下拉列表。

```
<button type="button" id="btn">Click Me!</button> 
<select id='sel' name='sel'>
    <option>item 1</option>
    <option>item 2</option>
    <option>item 3</option>
    <option>item 4</option>
</select> 
```

和 JavaScript 如下。

```
$(document).ready(function() {
    $("#btn").click(function() {
       $("#sel").trigger('click');
    });
}); 
```

有任何想法吗...？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T09:44:57.680

您不能使用`.trigger`. 查看指向 jQuery 教程的[链接](http://learn.jquery.com/events/triggering-event-handlers/)，您似乎需要`.simulate`来自[jquery.simulate.js](https://github.com/eduardolundgren/jquery-simulate/blob/master/jquery.simulate.js)的方法。此外，下拉框的打开事件由`mousedown`not给出`click`。

**更新：**所以代码变成：

```
$(document).ready(function() {
    $("#btn").click(function() {
       $("#sel").simulate('mousedown');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-29T17:55:45.183

```
//https://stackoverflow.com/a/10844589/7926961
  function openDropdown(elementId) {
        function down() {
            var pos = $(this).offset(); // remember position
            var len = $(this).find("option").length;
                if(len > 20) {
                    len = 20;
                }

            $(this).css("position", "absolute");
            $(this).css("zIndex", 9999);
            $(this).offset(pos);   // reset position
            $(this).attr("size", len); // open dropdown
            $(this).unbind("focus", down);
            $(this).focus();
        }
        function up() {
            $(this).css("position", "static");
            $(this).attr("size", "1");  // close dropdown
            $(this).unbind("change", up);
            $(this).focus();
        }
        $("#" + elementId).focus(down).blur(up).focus();
    } 
```

演示：

[http://jsfiddle.net/XE73h/444/](http://jsfiddle.net/XE73h/444/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T09:54:58.570

我想找到解决这个问题的方法，我在 FF、chrome 和 Edge 中进行了测试。

> ## HTML

```
<select id="selecttest">
    <option value="1">one</option>
    <option value="2">two</option>
    <option value="3">free</option>
    <option value="4">four</option>
    <option value="5">five</option>
    <option value="6">six</option>
    <option value="7">seven</option>
    <option value="8">height</option>
    <option value="9">nine</option>
    <option value="10">ten</option>
    <option value="11">eleven</option>
    <option value="12">twelve</option>
    <option value="13">thirdteen</option>
</select>
<input type="button" value="testing" id="MyButton"/> 
```

> ## 查询

```
$('#MyButton').on("click",function(){
    $("#selecttest").attr("size", 8);
    $("#selecttest").css("position","fixed");
    $('#MyButton').css("margin-left", $("#selecttest").width() + 5);});
$('#selecttest').on("change",function(){
    $("#selecttest").attr("size", 1);}); 
```

[jsfiddle测试这个](https://jsfiddle.net/ahcxg0x0/3/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-17T09:52:18.863

试试这个

```
$(document).ready(function() {
    $("#btn").click(function() {

    document.getElementById('sel').size='2'  
    });
}); 
```

# php - 重命名 Rackspace 文件夹/容器

> ID：16056676
> 
> 赞同：2
> 
> 时间：2013-04-17T09:41:20.163
> 
> 标签：php, rackspace-cloud

我有来自 Rackspace 的 PHP 库。我们将所有文件保存在一个名为“数据”的容器中。在该容器内是文件的分层目录。

我可以重命名或移动对象，没问题（包装在我自己的类中）：

```
 $this->container->move_object_to('uploads/files/file.txt', 'data', 'uploads/files2/filecopy.txt'); 
```

但我不能对文件夹做同样的事情：

```
 $this->container->move_object_to('uploads/files', 'data', 'uploads/files2'); 
```

所以我想相反，我会将所有对象放在一个文件夹中并单独复制每个对象。但我只能在容器中获取对象：

```
 $container = $this->connection->get_container('data');
    $files = $container->list_objects(); 
```

这不起作用：

```
 $container = $this->connection->get_container('data/uploads');
    $files = $container->list_objects(); 
```

如何重命名文件夹？或者，将文件夹中的所有对象移动到新对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:30:07.913

这里的问题是容器内没有文件夹这样的东西。容器是最顶层的分组，在它之下只是一组对象。

您的对象的名称中有目录分隔符，因此可以在 URL 中以这种方式引用它们。实际上，它们只是名称中具有相似前缀的单个对象；它们实际上并未“按文件夹”分组。

我不是 PHP 程序员，但这里有一些伪代码（可能不准确）：

**编辑使用@magglass1 提供的功能**

```
$old_dir = "oldir/";
$new_dir = "newdir/";
$container = $this->connection->get_container('data');
$files = $container->list_objects(0, NULL, $old_dir);
foreach ($files as $file) {
    $new_filename = substr_replace($file, $new_dir, strpos($file, $old_dir), strlen($old_dir));
    $this->container->move_object_to($file, 'data', $new_filename);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:31:05.293

您可以通过在 list_objects() 调用中指定前缀来按伪文件夹列出对象。下面是函数的用法：

```
list_objects($limit=0, $marker=NULL, $prefix=NULL, $path=NULL) 
```

所以沿着这条线的东西应该起作用：

```
$container = $this->connection->get_container('data');
$files = $container->list_objects(0, NULL, 'uploads/'); 
```

然后，您将遍历并复制所有返回的对象。

-标记

# java - 如何同时（从不同的线程）将数据插入到一个 Android SQLite 数据库的不同表中？

> ID：16056680
> 
> 赞同：0
> 
> 时间：2013-04-17T09:41:23.810
> 
> 标签：java, android, multithreading, sqlite, android-sqlite

在我的 Android 应用程序中，我有带有 4 个表（实验室、医生、收入消息、结果消息）的 SQLite 数据库。该表的信息是通过使用`java.lang.Thread`并在检索信息之后从服务器检索到用于插入数据库启动的下一个线程。（`AsyncTask`对此很慢）以及一个线程可以在其他线程仍在插入数据时访问数据库的问题。但我没有不要只为一个线程锁定数据库并让其他线程等待（在这种情况下需要很多时间）。

所以问题是：我可以以某种方式允许不同的线程同时将数据插入不同的表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:43:38.383

使用[内容提供者](http://developer.android.com/guide/topics/providers/content-provider-creating.html)。那将解决问题！Content Provider 将为您处理同步表进程！
有一些解决方法，比如为 SQliteDatabaseHelper 使用单个实例，当我遇到像你这样的问题时，它从来没有工作过。
当我切换到 Content Provider 时，一切都很顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:56:06.737

建议跨所有线程（及其托管组件）使用单个[SQLiteDatabase对象来获得线程安全。](http://www.vogella.com/articles/AndroidSQLite/article.html)DBHelper 必须是单例，或者使用[ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html)来实现这个效果。

# c - 在 C 中使用 atoi() 解析具有二进制值的字符数组

> ID：16056683
> 
> 赞同：0
> 
> 时间：2013-04-17T09:41:32.477
> 
> 标签：c, string, type-conversion, atoi

我正在尝试将一串二进制字符转换为整数值。

例如：“100101101001”我将使用 for 循环将其分成四个段，然后将其存储在数组 [4] 中。但是，每当我使用函数 atoi() 时，我都会遇到一个问题，即如果字符串以“0”开头，它不能正确转换字符串。

一个例子是“1001” = 1001，但如果是 0110，它将被转换为 110，同样对于 0001，它只会出现 1。

这是我制作的代码：

```
for(i = 0; i < strlen(store); i++)
{
    bits[counter] = store [i];
    counter++;
    if(counter == 4)
    {   
        sscanf(bits, "%d", &testing);
        printf("%d\n", testing);
        counter = 0;
    }       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:44:25.113

该 [`atoi()`](http://linux.die.net/man/3/atoi)函数仅转换以 10 为底的十进制数。

您可以[`strtoul()`](http://linux.die.net/man/3/strtoul)通过指定`base`参数 2 来转换二进制数。无需“拆分”字符串，当然前导零也无关紧要（因为它们不应该， 00010 [2]等于 10 [2]） ：

```
const char *binary = "00010";
unsigned long value;
char *endp = NULL;

value = strtoul(binary, &endp, 2);
if(endp != NULL && *endp == '\0')
  printf("converted binary '%s' to integer %lu\n", binary, value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:44:30.147

`atoi()`从 char 数组转换为 int 而不是二进制

您可以使用以下功能

```
int chartobin(char *s, unsigned int *x) {
    int len = strlen(s), bit;
    *x = 0;
    if(len>32 || len<1) return -1;
    while(*s) {
        bit = (*s++ - '0');
        if((bit&(~1U))!=0) return -1;
        if (bit) *x += (1<<(len-1));
        len--;
    }
    return 0;
} 
```

经过测试，它可以工作

# winforms - Winforms数据绑定到数组中的元素

> ID：16056687
> 
> 赞同：1
> 
> 时间：2013-04-17T09:41:40.743
> 
> 标签：winforms

我有一个字符串数组，想用 Windows 窗体上的一些文本框绑定到这个数组

该数组有 5 个元素的固定长度，在我的表单上我有 5 个文本框，我想将 textbox1 绑定到字符串数组的元素 1，将 textbox2 绑定到字符串数组的元素 2，依此类推。

我该怎么做？甚至可能吗？

txtMonth1.DataBindings.Add(New Binding("Text", bsReport, "LabelName(0)", True)) txtMonth2.DataBindings.Add(New Binding("Text", bsReport, "LabelName(1)", True))等等等等

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:44:44.787

是的，您可以绑定`TextBoxes`到数组的各个元素。

如下所示：

```
txtMonth1.DataBindings.Add(New Binding("Text", bsReport[0], "LabelName(0)", True))  
txtMonth2.DataBindings.Add(New Binding("Text", bsReport[1], "LabelName(1)", True)) 
```

# ssas - CLASSIC：在 MDX 中按维度命名设置前 2

> ID：16056692
> 
> 赞同：1
> 
> 时间：2013-04-17T09:42:09.197
> 
> 标签：ssas, mdx, named

**SSAS 2012 多维**DW 有

*   措施：总行，
*   具有层次结构的维度：[部门] - [销售人员]。

我正在尝试按部门设置前 2 名销售人员。此代码示例在 SSMS 中为我​​提供了正确的结果：

```
 with set [f] as 
     Generate(
       { [Sales Person].[Hierarchy].[All] . children }, 
            [Sales Person].[Division].CurrentMember *
                TopCount(
                EXISTING  [Sales Person].[Sales Person Id].children 
                        ,2 
                ,[Measures].[Line Total] 
                )
            ) 
            SELECT [Measures].[Line Total]  ON COLUMNS,
              [f]
   ON ROWS  from     [Adventure Works] 
```

它工作正常。它会给我按部门排名前 2 名。但是，如果我想根据以前的 MDX 在多维数据集中创建命名集：

```
 create dynamic set CURRENTCUBE.[f] as Generate(
       { [Sales Person].[Hierarchy].[All] . children }, 
            [Sales Person].[Division].CurrentMember *
                TopCount(
                EXISTING  [Sales Person].[Sales Person Id].children 
                        ,2 
                ,[Measures].[Line Total] 
                )
            ) 
```

它不会给我任何错误，但这个命名集**不会显示**在浏览器中。计算选项卡中 MDX 代码的验证通过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:45:59.043

你说它不会在浏览器中显示，你给它分配了一个显示文件夹吗？如果没有，它可能不是您期望看到的地方。

您可以在 MDX 查询中使用它吗？

# c++ - 在 C++ 中使用 wait() 和 fork() 时出错

> ID：16056693
> 
> 赞同：4
> 
> 时间：2013-04-17T09:42:13.997
> 
> 标签：c++, c, fork, wait

我正在尝试在我的 C++ 代码中使用`wait()`和。`fork()`但我在编译阶段收到以下错误

```
../test/my_test.cpp: In member function 'void MYClass::myMethod()':
../test/my_test.cpp:98: error: no matching function for call to 'wait::wait(int*)'
/data/backfire/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib/gcc/i486-openwrt-linux-uclibc/4.1.2/../../../../i486-openwrt-linux-uclibc/sys-include/bits/waitstatus.h:68: note: candidates are: wait::wait()
/data/backfire/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib/gcc/i486-openwrt-linux-uclibc/4.1.2/../../../../i486-openwrt-linux-uclibc/sys-include/bits/waitstatus.h:68: note:                 wait::wait(const wait&) 
```

代码：

```
void MYClass::myMethod()
{
    pid_t pid;
    int status;
    if ((pid = fork()) < 0) {
       printf("error fork\n");
       return;
    }
    if (pid == 0) {
        /* cild*/
        ......
    }
    /*parent*/
    while (wait(&status) != pid);
} 
```

如何修复错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T10:06:02.553

该错误表明它试图创建一个名为 的类型的对象`wait`，从指针转换，而不是（如预期的那样）试图调用一个名为 的函数`wait`。

问题是您没有包含声明`wait`函数的标头。但是，`wait`在另一个头文件中定义了一个类型，因此，如果没有函数声明，编译器会假定您是这个意思。

解决方案，来自手册页`wait(2)`：

```
#include <sys/types.h>
#include <sys/wait.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:44:37.207

看起来像一个构造函数...尝试

```
 while (::wait(&status) != pid); 
```

使用 scope-operator 调用`wait`-function。如果这没有帮助，您有一个名称冲突，需要为您的类创建一个不同的命名空间。

```
namespace mywait{

  class MyClass {

  };

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:05:34.563

同意“bash.d”。如果您自己编写了“waitstatus.h”并且想要使用它，则需要将其包装在命名空间中。

如果没有，您可能想尝试包含 sys/wait.h 而不是 waitstatus.h

# javascript - 需要识别正则表达式中的不匹配字符

> ID：16056696
> 
> 赞同：1
> 
> 时间：2013-04-17T09:42:27.843
> 
> 标签：javascript, regex

当用户在保存内容之前提供“版本名称”时，我们使用正则表达式来测试“非法”字符。可接受的字符有：AZ、0-9 和空格。我们使用以下方法对此进行测试：

```
var version_name = document.getElementById('txtSaveVersionName').value;
if(version_name.search(/[^A-Za-z0-9\s]/)!= -1){ 
  alert("Warning illegal characters have been removed etc");
  version_name.replace(/[^A-Za-z0-9\s]/g,'');
  document.getElementById('txtSaveVersionName').value = version_name;
} 
```

当用户键入他们的版本名称时，这可以正常工作。然而，版本名称也可以从动态填充的选择框获取的数据中填充 - 从我们的系统加载的版本名称。

发生这种情况时，正则表达式会丢弃名称中的空格。所以“我的版本”变成了“我的版本”？当用户键入“我的版本”时，不会发生这种情况。

因此，从选择框中获取的值似乎包含一个看起来像空格但不是的字符。我已将此值从文本框中复制到一个 unicode 转换器 ( [http://rishida.net/tools/conversion/](http://rishida.net/tools/conversion/) ) 中，该转换器标识了基础值的字符，并且两组都报告为 0020 (空格)，但只有一个会引发异常??

有没有办法确定导致此问题的角色是什么？

任何想法都非常感谢！

干杯

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:15:58.410

尝试：

```
var str= getSelectBoxValue();
var rez = ""; 
for (var i=0;i<str.length;i++) 
    rez = rez+str[i]+"["+str.charCodeAt(i)+"]"; 

alert(rez); 
```

它应该以 Javascript 看到它们的方式为您提供字符串中所有字符的 unicode 值。当您从屏幕复制它时，可能是浏览器/操作系统出于某种原因将一些奇怪的 UTF 字符转换为常规的“0x20”字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:22:46.807

我注意到您的代码中有一个错误：

```
version_name.replace(/[^A-Za-z0-9\s]/g,''); 
```

应该

```
version_name = version_name.replace(/[^A-Za-z0-9\s]/g,''); 
```

当然，`replace`创建一个新字符串时，它不会修改现有字符串。

当您发现替换有时有效而有时无效时，我会怀疑您在一个地方正确地实现了这一点，而在另一个地方则不正确。

# n-gram - 如何计算 N-Grams

> ID：16056698
> 
> 赞同：0
> 
> 时间：2013-04-17T09:42:33.053
> 
> 标签：n-gram

我在试图弄清楚如何计算 n-gram 时遇到了一个问题。

我想知道在计算 n-gram（不是频率）时，可以交换公共元素的位置吗？

这些是几个例子：

（假设在开头和结尾添加了额外的符号）

1.

```
%Gorbachev%

%Gorbechyov% 
```

v_ 应该被视为一个共同的元素吗？

2.

```
%grew%

%ewgr% 
```

gr 和 ew 都应该被视为共同元素吗？

3.

```
%gladstone%

%astone% 
```

它应该从 e% 开始还是从 %a 开始？

# node.js - 知道最新版本的 Node.js 和 MongoDB 的最新教程吗？

> ID：16056700
> 
> 赞同：0
> 
> 时间：2013-04-17T09:42:39.907
> 
> 标签：node.js, mongodb

我一直在尝试来自谷歌搜索的 Node.js+MongoDB 教程和旧的 stackoverflow 答案，例如[http://dailyjs.com/tags.html#lmawa](http://dailyjs.com/tags.html#lmawa)、[http://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)和在线视频。由于这些教程已经过时了几年（这对于快速发展的 Node.js 来说已经过时了），我一直在努力弄清楚如何让它们工作，徒劳而痛苦。

你知道最近有哪些适用于最新版本的 Node.js 和 MongoDB 的教程吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:10:48.163

你看过：

*   GitHub[示例](https://github.com/mongodb/node-mongodb-native/tree/1.3-dev/examples)
*   在[浏览器中尝试](https://runnable.com/#mongodb/node-mongodb-native/server.js/launch)
*   综合[自述文件](https://github.com/mongodb/node-mongodb-native#readme)
*   官方[教程](http://mongodb.github.io/node-mongodb-native/#tutorials)
*   最后但并非最不重要的：[官方文档](http://mongodb.github.io/node-mongodb-native/)

所有这些资源都是最新的。

我知道 node.js 正在快速发展，有时文档会滞后，但这种情况下你应该没有任何问题。

另外：在官方文档中，您可以找到[一些其他资源](http://mongodb.github.io/node-mongodb-native/#external-tutorials)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:16:10.687

您没有提及您用于使用 mongodb 的任何特定模块。因此，首先要选择一个。如果您查看 joyent/node 模块页面，它会显示许多可用于使用 mongodb 的模块。

请查看页面：[https](https://github.com/joyent/node/wiki/modules#wiki-db-nosql-mongo) ://github.com/joyent/node/wiki/modules#wiki-db-nosql-mongo 。列出的大多数软件包都有适当的文档。你也可以在他们的页面上找到教程。最常用的两个是[mongodb](https://npmjs.org/package/mongodb)和[mongoose](https://npmjs.org/package/mongoose)。

### [mongodb](https://github.com/mongodb/node-mongodb-native)

它的文档[页面](http://mongodb.github.io/node-mongodb-native/)有

*   [教程](http://mongodb.github.io/node-mongodb-native/#tutorials)
*   [API 文档](http://mongodb.github.io/node-mongodb-native/#api-documentation)
*   [外部教程](http://mongodb.github.io/node-mongodb-native/#external-tutorials)
*   [关于 MongoDB 和 Node.js 不同主题的视频演示](http://mongodb.github.io/node-mongodb-native/#video-presentations-about-different-topics-around-the-mongodb-and-node-js)

### [猫鼬](https://github.com/learnboost/mongoose)

项目[页面](http://mongoosejs.com/)

*   [快速开始](http://mongoosejs.com/docs/index.html)
*   [API 文档](http://mongoosejs.com/docs/api.html)

# php - 如何使用 firebug 进行调试并显示单选按钮的值

> ID：16056702
> 
> 赞同：0
> 
> 时间：2013-04-17T09:42:46.250
> 
> 标签：php, javascript, jquery, firefox

我有如下所示的单选按钮。

```
 <div id="lensType">

                        <input type="radio"  name="design" style="vertical-align: middle"  value="1"/>
                        <label for="design">Single Vision</label><br/>

                        <input type="radio" name="design" style="vertical-align: middle" value="2" />
                        <label for="material" >Accommodative Support</label><br/>

                        <input type="radio"  name="design" style="vertical-align: middle"  value="3"/>
                        <label for="design">Bifocal</label> <br/>

                        <input type="radio"   name="design" style="vertical-align: middle" value="4" />
                        <label for="material" >Varifocal (Intermediate/Near)</label><br/>

                        <input type="radio"   name="design" style="vertical-align: middle" value="5"/>
                        <label for="material" >Varifocal (Distance/Near)</label>

                    </div> 
```

我正在做一个动态选择。我有发布值的 javascript 代码。似乎现在已发布供应商值。下面是我的脚本的代码。

```
 $(document).ready(function(){

     function populate() {
      fetch.doPost('getSupplier.php');
   }

 $('#lensType').change(populate);

  var fetch = function() {

 var counties = $('#county');

return {
doPost: function(src) {

$('#loading_county_drop_down').show(); // Show the Loading...
$('#county_drop_down').hide(); // Hide the drop down
$('#no_county_drop_down').hide(); // Hide the "no counties" message (if it's the case)

    if (src) $.post(src, { supplier: $('#lensType').val() }, this.getSupplier);

    else throw new Error('No source was passed !');
},

getSupplier: function(results) {
    if (!results) return;
    counties.html(results);

$('#loading_county_drop_down').hide(); // Hide the Loading...
$('#county_drop_down').show(); // Show the drop down
}   
  }
 }();

 populate();

 }); 
```

php代码：

```
<?php
  if(isSet($_POST['supplier'])) {

   include 'db.php';

  $stmt = $mysql->prepare("SELECT DISTINCT SupplierBrand FROM plastic WHERE          HeadingNo='".$_POST['supplier']."'");
  $stmt->execute();
  $stmt->bind_result($supplierBrand);

  while ($row = $stmt->fetch()) : ?>

 <option value="<?php echo $supplierBrand; ?>" width="100px"><?php echo $supplierBrand; ?></option> 
```

我的问题是，当我调试时，我注意到没有传递给 php 脚本的值，这使得选择为空。我试图通过让firebug输出console.log来跟踪或调试，但在这方面失败了。请协助处理此代码，该代码旨在显示单选按钮选择的动态列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:01:26.603

用于调试：

```
$('input[name="design"]').change(function(){ 
console.log($('#lensType').find("input:radio[name ='design']:checked").val());
}); 
```

别的：

```
$('#lensType').find("input:radio[name ='design']:checked").val(); 
```

代替

```
$('#lensType').val() 
```

你可能想用一个改变的函数来包装它，因为 onload 没有选择设计：

```
 $(document).ready(function(){
$('input[name="design"]').change(function(){ 
var design = $('input[name="design"]:checked').val();
     function populate() {
      fetch.doPost('getSupplier.php');
   }

 $('#lensType').change(populate);

  var fetch = function() {

 var counties = $('#county');

return {
doPost: function(src) {

$('#loading_county_drop_down').show(); // Show the Loading...
$('#county_drop_down').hide(); // Hide the drop down
$('#no_county_drop_down').hide(); // Hide the "no counties" message (if it's the case)

    if (src) $.post(src, { supplier: design }, this.getSupplier);

    else throw new Error('No source was passed !');
},

getSupplier: function(results) {
    if (!results) return;
    counties.html(results);

$('#loading_county_drop_down').hide(); // Hide the Loading...
$('#county_drop_down').show(); // Show the drop down
}   
  }
 }();

 populate();
});
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:56:32.363

在您的 javascript 中，您得到的是 div 的值，而不是单选按钮：

```
$('#lensType').val() <--- change that 
```

对于这样的事情：

```
$("#lensType input:radio[name='design']:checked").val() 
```

# java - 600 秒内无法报告状态。杀戮！在 hadoop 中报告进度

> ID：16056707
> 
> 赞同：12
> 
> 时间：2013-04-17T09:42:58.077
> 
> 标签：java, hadoop, mapreduce

我收到以下错误：

```
Task attempt_201304161625_0028_m_000000_0 failed to report status for 600 seconds. Killing! 
```

为我的地图工作。这个问题类似于[这个](https://stackoverflow.com/questions/5864589/how-to-fix-task-attempt-201104251139-0295-r-000006-0-failed-to-report-status-fo)、[这个](https://stackoverflow.com/questions/15281307/the-reduce-fails-due-to-task-attempt-failed-to-report-status-for-600-seconds-ki)和[这个](https://stackoverflow.com/questions/14496053/how-to-fake-task-reporting-in-hadoop-job)。但是，**我不想在 hadoop 杀死不报告进度的任务之前增加默认时间**，即

```
Configuration conf=new Configuration();
long milliSeconds = 1000*60*60;
conf.setLong("mapred.task.timeout", milliSeconds); 
```

`context.progress()`相反，我想使用`context.setStatus("Some Message")`或`context.getCounter(SOME_ENUM.PROGRESS).increment(1)`或类似的东西定期报告进度。但是，这仍然会导致作业被终止。这是我试图报告进度的代码片段。映射器：

```
protected void map(Key key, Value value, Context context) throws IOException, InterruptedException {

    //do some things
    Optimiser optimiser = new Optimiser();
    optimiser.optimiseFurther(<some parameters>, context);
    //more things
    context.write(newKey, newValue);
} 
```

Optimiser 类中的 optimiseFurther 方法：

```
public void optimiseFurther(<Some parameters>, TaskAttemptContext context) {

    int count = 0;
    while(something is true) {
        //optimise

        //try to report progress
        context.setStatus("Progressing:" + count);
        System.out.println("Optimise Progress:" + context.getStatus());
        context.progress();
        count++;
    }
} 
```

映射器的输出显示状态正在更新：

```
Optimise Progress:Progressing:0
Optimise Progress:Progressing:1
Optimise Progress:Progressing:2
... 
```

但是，在默认时间后，该作业仍会被终止。我是否以错误的方式使用上下文？为了成功报告进度，我还需要在工作设置中做些什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T09:00:12.930

这个问题与[Hadoop 0.20 中的一个错误有关，](https://issues.apache.org/jira/browse/MAPREDUCE-1905)即调用`context.setStatus()`和`context.progress()`未报告给底层框架（设置各种计数器的调用也不起作用）。有一个可用的补丁，所以更新到新版本的 Hadoop 应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T14:48:15.303

可能发生的情况是，您必须在 Reporter 本身上调用那些在 Context 中找到的进度方法，并且可能无法在上下文本身上调用它。

来自 Cloudera

**报告进度**

如果您的任务在 10 分钟内没有报告进度（请参阅 mapred.task.timeout 属性），那么它将被 Hadoop 杀死。大多数任务不会遇到这种情况，因为它们通过读取输入和写入输出来隐式报告进度。但是，某些不以这种方式处理记录的作业可能会违反此行为并导致其任务被终止。模拟就是一个很好的例子，因为它们在每个映射中执行大量 CPU 密集型处理，并且通常只在计算结束时写入结果。它们的编写方式应定期报告进度（比每 10 分钟更频繁）。这可以通过多种方式实现：

```
Call setStatus() on Reporter to set a human-readable description of
the task’s progress
Call incrCounter() on Reporter to increment a user counter
Call progress() on Reporter to tell Hadoop that your task is 
still there (and making progress) 
```

[Cloudera 提示](http://blog.cloudera.com/blog/2009/05/10-mapreduce-tips/)

```
public Context(Configuration conf, TaskAttemptID taskid,
               RecordReader<KEYIN,VALUEIN> reader,
               RecordWriter<KEYOUT,VALUEOUT> writer,
               OutputCommitter committer,
               StatusReporter reporter,
               InputSplit split) 
```

# javascript - Web Audio Api：与经过时间相关的频率

> ID：16056709
> 
> 赞同：1
> 
> 时间：2013-04-17T09:43:07.297
> 
> 标签：javascript, google-chrome, html5-audio, web-audio-api

我有一个获取音频的脚本。我想将该频率与歌曲的确切时间联系起来。我可以获取 webkitAudioContext currentTime 属性，但这并不准确，因为它在歌曲开始之前将声音保存在缓冲区中时开始计算时间。这是我的代码：

```
var context = new webkitAudioContext(); 
```

...

```
function drawSpectrogram(array) {
    // copy the current canvas onto the temp canvas
    var canvas = document.getElementById("canvas");

    tempCtx.drawImage(canvas, 0, 0, 800, 512);
    // iterate over the elements from the array
    for (var i = 0; i < array.length; i++) {
        // draw each pixel with the specific color
        var value = array[i];
        frequency = frequency + value + ";";
        time = time + Math.round((context.currentTime) * 1000000) / 1000000 + ";";               
        ctx.fillStyle = hot.getColor(value).hex();
        // draw the line at the right side of the canvas
        ctx.fillRect(800 - 1, 512 - i, 1, 1);
    } 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:52:53.920

`currentTime`在您准备开始播放之前保存值，并将该时间值用作您的“零时间”标记。每当您想知道音乐播放了多长时间时，请从该值中减去该时间值（表示设置花费了多长时间）`currentTime`。

```
var context = new webkitAudioContext();

// load media, place in buffer, etc...

var startTime = context.currentTime; // everything up to now has been setup

// begin playing...

var currentPlayingTime = context.currentTime - startTime; 
```

只需用于`context.currentTime - startTime`查找歌曲实际播放了多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:35:28.647

我不太确定你要做什么，但你可能想看看高分辨率时间 API：[http ://www.w3.org/TR/hr-time/](http://www.w3.org/TR/hr-time/)

您可以在您感兴趣的缓冲区上调用 .noteOn() 或 .start() 的同时获取当前时间，然后在 DrawSpectrogram 函数中确定执行所需操作的时间。

# php - jQuery 点击函数和回调数组

> ID：16056711
> 
> 赞同：0
> 
> 时间：2013-04-17T09:43:13.013
> 
> 标签：php, javascript, jquery

我是 jQuery 新手，对函数的理解有问题。

我有以下 HTML 代码结构：

```
<ul class="result">
   <li id="a"></li>
   <li></li> //will be added through a loop depending on input
</ul> 
```

这个jQuery代码：

```
$(document).ready(function() { //changes are possible when the page has fully loaded
    $('.inp').keyup(function() { //executes keyup function to the field class "inp"
        var inp = $(this).attr('value'); //sets a variable with the value of input from class="inp"
        $.post('ajax/file.php', {inp:inp}, function(data) { //posts that value to file.php as variable inp and executes the function (data) to this 
            $('.result').html(data);  //adds the returned result into HTML content as a first element in the set of class="result" => <li>

            $('.result li').click(function() { //executes click function when clicking li element
                var result_value = $(this).text(); //sets a variable and prepares something as text 
                $('.inp').attr('value', result_value); //fills value attribute of field class "inp" with the variable result_value
                $('.result').html(''); //???
            });
        });
    });
}); 
```

现在我的问题是什么`$('.result').html('');`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:02:22.730

JQuery .html() 属性设置它映射到的对象的 html，它具有与 javascript 属性 .innerHTML 相同的行为。

所以在你的场景中 $('.result').html(''); 将结果类元素的 html 设置为 null。

```
<ul class="result">
</ul> 
```

其次，您在“file.php”中使用了错误的方法，而是使用以下代码：

```
echo '<li>'.$row["name_1"].'</li>';
echo '<li>'.$row["name_2"].'</li>';
echo '<li>'.$row["name_3"].'</li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:04:51.333

`$('.result').html('');`清除 的内容`<ul class="result">`。

[http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:46:14.200

`$('.result').html('');`将 html 设置`.result`为空白字符串。

# c# - 如何在 asp.net 中的 Javascript 中设置页面加载和访问时的 HiddenField 值？

> ID：16056713
> 
> 赞同：0
> 
> 时间：2013-04-17T09:43:18.683
> 
> 标签：c#, asp.net, hidden-field

我有一个页面，其中包含使用 Javascript 显示特定文件夹（幻灯片放映）中的图像的图像控件。我已在页面加载时设置了 HiddenField 值的值，并希望使用 Javascript 访问这些值。但是，在页面加载上设置隐藏字段的值后，Javascript 中的隐藏字段的值显示为 NULL。

在 .aspx 页面中：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.4.1.min.js"></script>

</head>
     <script type="text/javascript">

         var folderNm = document.getElementById('<%#HiddenFieldFolderName.ClientID%>');
         var MaxIndex = document.getElementById('<%#HiddenFieldMaxIndex.ClientID%>');
         var mainImage = document.getElementById('mainImage');
         //mainImage.src = "Presentations/7/Slide1.GIF";
         //Initilize start value to 1 'For Slide1.GIF'
         var currentIndex = 1;

         //NOTE: Set this value to the number of slides you have in the presentation.
         //var maxIndex = 7;
         var maxIndex = MaxIndex;
         alert("Folder Name " + folderNm + "\n MaxIndex  " + MaxIndex);
         function swapImage(imageIndex) {
             //Check if we are at the last image already, return if we are.
             if (imageIndex > maxIndex) {
                 currentIndex = maxIndex;
                 return;
             }

             //Check if we are at the first image already, return if we are.
             if (imageIndex < 1) {
                 currentIndex = 1;
                 return;
             }

             currentIndex = imageIndex;
             //Otherwise update mainImage
             //document.getElementById("mainImage").src = 'PPT/GIFs/Slide' + currentIndex + '.GIF';
             document.getElementById("mainImage").src = 'Presentations/' + folderNm + '/' + 'Slide' + currentIndex + '.GIF';
             // document.getElementById("mainImage").src = 'Presentations/7/Slide' + currentIndex + '.GIF';
             return;
         }
    </script>
<body>
    <form id="form1" runat="server" >
        <div>
            <div>

               <%-- <img src="PPT/GIFs/Slide1.GIF" id="mainImage" name="mainImage" width="50%" height="50%" alt="">--%>
                <img  id="mainImage" name="mainImage" width="25%" height="25%" alt="">
            </div>
            <div>
                <a href="#" onclick="swapImage(0);">
                    <img src="/images/firstss.png" border="0" alt="First"></a>
                <a href="#" onclick="swapImage(currentIndex-1);">
                    <img src="/images/prev.png" border="0" alt="Previous"></a>
                <a href="#" onclick="swapImage(currentIndex+1);">
                    <img src="/images/nexts.png" border="0" alt="Next"></a>
                <a href="#" onclick="swapImage(maxIndex);">
                    <img src="/images/lasts.png" border="0" alt="Last"></a>
            </div>
            <div>
                <asp:HiddenField ID="HiddenFieldMaxIndex" runat="server" />
                <asp:HiddenField ID="HiddenFieldFolderName" runat="server" />

            </div>
        </div>
    </form>
</body>

</html> 
```

在 .aspx.cs 文件中：

```
protected void Page_Load(object sender, EventArgs e)
        {
            string foldername = string.Empty;
            if (Request.QueryString["di"] != null)
            {
                foldername = Request.QueryString["di"].ToString();
                HiddenFieldFolderName.Value = foldername;
                HiddenFieldMaxIndex.Value = Request.QueryString["Files"].ToString();
            }

    } 
```

此处，隐藏字段值在 alert() 框中显示为 null。帮助赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:46:31.803

你需要修改

```
<%#HiddenFieldFolderName.ClientID%> 
```

至

```
<%= HiddenFieldFolderName.ClientID %> 
```

`<%#HiddenFieldMaxIndex.ClientID%>`对See [ASP.NET 内联表达式](http://support.microsoft.com/kb/976112)和[这个问题](https://stackoverflow.com/questions/649428/asp-net-special-tags)做同样的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:57:55.870

您已经添加了对 的引用`jquery`，那么为什么不使用它呢？

```
var folderNm= $("#<%= HiddenFieldFolderName.ClientID %>").val();
var index= $("#<%= HiddenFieldMaxIndex.ClientID %>").val();

alert("Folder Name " + folderNm+ "\n MaxIndex  " + index); 
```

为别人做同样的事情。。

即使只使用上面也行不通，因为当您访问隐藏字段时，文档可能还没有准备好。

```
 var currentIndex = 1;
   var folderNm  = 0;
   var MaxIndex = 0;
   alert($("#<%= HiddenFieldFolderName.ClientID %>").val()); // this will return null

   // but when document ready you can get values, 
    $(document).ready(function () {
        folderNm= $("#<%= HiddenFieldFolderName.ClientID %>").val();
        MaxIndex= $("#<%= HiddenFieldMaxIndex.ClientID %>").val();
        alert("Folder Name " + folderNm+ "\n MaxIndex  " + MaxIndex); 
    }); 
```

如果您需要在不`jquery`将所有代码放入`swapImage`函数并检查的情况下进行检查，它将起作用。

REF：[jquery ID 选择器（“#id”）](http://api.jquery.com/id-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:49:38.457

如果您检查页面的来源，您是否看到隐藏的输入？

如果我是正确的（最近没有经常使用网络表单），内置 asp:HiddenField 不会将该字段放入生成的 HTML 中。因此，您的 javascript 函数找不到该字段并返回 null。

您可以使用 asp:TextBox 组件并使用 css (display:none;) 将其隐藏。这样，文本框在 HTML 中呈现，但对最终用户不可见（除非他正在通过页面源进行搜索）。您的 javascript 将找到控件并能够读取文本框的值。

尝试使用诸如 Firefox 的 Firebug 或 Chrome 的页面检查器之类的工具来处理此类错误。

# android - 从 sd 卡加载图像时 Gridview 显示白屏

> ID：16056714
> 
> 赞同：0
> 
> 时间：2013-04-17T09:43:22.497
> 
> 标签：android, android-gridview, android-gridlayout

我有一个 gridview 当这个活动加载它时显示一个白屏我检查了很多我不知道为什么会发生我正在显示图像的 gridview 并且这些图像来自 sd 卡。

**我的 oncreate 代码如下**

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    gridview = (GridView) findViewById(R.id.gridview);
    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
        {
            String pdfPath = Environment.getExternalStorageDirectory().toString() + "/ICA Faculty/";
            Toast.makeText(getApplicationContext(),pdfPath+((TextView) v.findViewById(R.id.hiddenPdfUrl)).getText(), Toast.LENGTH_SHORT).show();

            try {
                File file = new File(pdfPath+((TextView) v.findViewById(R.id.hiddenPdfUrl)).getText());
                Uri path = Uri.fromFile(file);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(path, "application/pdf");
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),"Sorry no PDF reader found.", Toast.LENGTH_SHORT).show();
            }
        }
    });

    File folder = new File(Environment.getExternalStorageDirectory() + "/ICA Faculty");

    db.open();
    c = db.getAllRecords();

    //If data exist in local database AND "ICA Faculty" folder exist 
    //Getting the sd card file name from local database
    if (c.moveToFirst() && folder.exists() && folder.listFiles() != null)
    {
        //This array list will help to create image
        imgUrl = new ArrayList<String>();
        pdfUrl = new ArrayList<String>();
                do 
                {          
                    imgUrl.add(c.getString(3));
                    pdfUrl.add(c.getString(2));

                }  while (c.moveToNext());

                ImageAdapter adapter = new ImageAdapter(MainActivity.this);
                gridview.setAdapter(adapter);
    }
    else
    {
        Toast.makeText(getApplicationContext(), "You need to sync to create your library.", Toast.LENGTH_LONG).show();
    }
    db.close();
}
   private class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private LayoutInflater mInflater;

    public ImageAdapter(Context c) {
        mContext = c;
        mInflater = LayoutInflater.from(c);
    }

    public int getCount() {
        return imgUrl.size();
        //return c.getCount();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        boolean result = ( position == 0 ) ? c.moveToFirst() : c.moveToNext();

        if (result)
        {
            if (convertView == null) 
            {             
                convertView = mInflater.inflate(R.layout.grid_row_view, null);
                holder = new ViewHolder();
                holder.ImgThumb  = (ImageView) convertView.findViewById(R.id.imgThumb);
                holder.Viewcover = (ImageView) convertView.findViewById(R.id.cover);
                holder.PdfUrl    = (TextView) convertView.findViewById(R.id.hiddenPdfUrl);
                convertView.setTag(holder);
            } 
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }

            String imagePath = Environment.getExternalStorageDirectory().toString() + "/ICA Faculty/";

            holder.ImgThumb.setImageDrawable(Drawable.createFromPath(imagePath + imgUrl.get(position)));
            holder.Viewcover.setImageResource(R.drawable.book_cover);
            holder.PdfUrl.setText(pdfUrl.get(position));

        }
        return convertView;
    }
    private class ViewHolder {
        ImageView ImgThumb;
        ImageView Viewcover;
        TextView PdfUrl;
    }
}

//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//=======================================================================================================================================
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
private ProgressDialog pDialog;
public static final int progress_bar_type = 0; 
String [] stringArrayPdfUrlForLocalDB;
String [] stringArrayBookId;

//-------------------------------------------------------------------------------------------
//Method for Sync
//-------------------------------------------------------------------------------------------
public void libSyc(View v) 
{
    db.open();
    Cursor c = db.getAllRecords();
    if (c.moveToFirst())
    {
        db.deleteAllRecord();
    }
    else{}

    new MyAsyncTask().execute("aa","dd");
}
//-------------------------------------------------------------------------------------------
//END Method for Sync
//-------------------------------------------------------------------------------------------

// Show Dialog
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type:
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Making your library. \nPlease wait ...");
        pDialog.setMax(100);
        pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.setCanceledOnTouchOutside(false);
        pDialog.show();
        return pDialog;
    default:
        return null;
    }
}

//Background Async Task to download file
class DownloadFileFromURL extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread
     * Show Progress Bar Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(progress_bar_type);
    }

    /**
     * Downloading file in background thread
     * */
    @Override
    protected String doInBackground(String... f_url) {
        int count;

        for(int i=0 ; i < f_url.length ; i++){

            try {
                URL url = new URL(f_url[i]);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 8192);

                String fpath = getFileName(f_url[i]);
                // Output stream to write file
                OutputStream output = new FileOutputStream("/sdcard/"+fpath);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress(""+(int)((total*100)/lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }
                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
        }
        return null;
    }

    /**
     * Updating progress bar
     * */
    protected void onProgressUpdate(String... progress) {
        // setting progress percentage
        pDialog.setProgress(Integer.parseInt(progress[0]));
    }

    /**
     * After completing background task
     * Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after the file was downloaded
                   //           dismissDialog(progress_bar_type);

        //save File Name, Image Name, Book ID to laocal DataBase
        try {
            if(stringArrayPdfUrlForLocalDB.length>0)
            {
                for(int i=0 ; i < stringArrayPdfUrlForLocalDB.length ; i++)
                {
                    //----------------------------------------------------------------
                    //Getting value from string array
                    //----------------------------------------------------------------
                    String fileName = getOnlyFileName(stringArrayPdfUrlForLocalDB[i]);
                    String imageName = getImageName(stringArrayPdfUrlForLocalDB[i]);
                    String BookId   = stringArrayBookId[i];

                    //Toast.makeText(getApplicationContext(), "File Name: "+fileName+"\nBookId: "+BookId, Toast.LENGTH_LONG).show();

                    //----------------------------------------------------------------
                    //Inserting each File Name, Image Name, Book ID to laocal DataBase
                    //----------------------------------------------------------------
                    db.open();        
                    long id = db.insertRecord(BookId, fileName + ".pdf", imageName);        
                    db.close();
                }
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Not getting any book form server.", Toast.LENGTH_SHORT).show();
            }

            //populate grid view

 //             ImageAdapter adapter = new ImageAdapter(MainActivity.this);
 //             gridview.setAdapter(adapter);
 //             adapter.notifyDataSetChanged();

            //Reloading activity
            Intent intent = getIntent();
            finish();
            startActivity(intent);

        } catch (Throwable e) {
            Toast.makeText(getApplicationContext(), ""+e, Toast.LENGTH_SHORT).show();
        }
    }

    public String getFileName(String wholePath)
    {
        String name=null;
        int start,end;
        start=wholePath.lastIndexOf('/');
        end=wholePath.length();     //lastIndexOf('.');
        name=wholePath.substring((start+1),end);
        //Creating a folder named ICA Faculty
        File directory = new File(Environment.getExternalStorageDirectory()+File.separator+"ICA Faculty");
        directory.mkdirs();

        name = "ICA Faculty/"+name;
        System.out.println("Start:"+start+"\t\tEnd:"+end+"\t\tName:"+name);
        return name;
    }

    public String getOnlyFileName(String wholePath)
    {
        String name=null;
        int start,end;
        start=wholePath.lastIndexOf('/');
        end=wholePath.lastIndexOf('.');
        name=wholePath.substring((start+1),end);

        return name;
    }

    public String getImageName(String wholePath)
    {
        String name=null;
        int start,end;
        start=wholePath.lastIndexOf('/');
        end=wholePath.length();     //lastIndexOf('.');
        name=wholePath.substring((start+1),end);
        //Creating a folder named ICA Faculty
        File directory = new File(Environment.getExternalStorageDirectory()+File.separator+"ICA Faculty");
        directory.mkdirs();

        return name;
    }

}

//===================================================================================================================================
//sending EmailAddress and Password to server
//===================================================================================================================================
 private class MyAsyncTask extends AsyncTask<String, Integer, Double>{

    String responseBody = null;
    @Override
    protected Double doInBackground(String... params) {
        // TODO Auto-generated method stub
        postData(params[0],params[1]);
        return null;
    }

    protected void onPostExecute(Double result){
        //Toast.makeText(getApplicationContext(), responseBody, Toast.LENGTH_SHORT).show();

        if(responseBody!=null)
        {
            processResponce(responseBody);
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Empty Responce.", Toast.LENGTH_LONG).show();
        }

    }
    protected void onProgressUpdate(Integer... progress){
    }

    public void postData(String emailId,String passwrd) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
                    //          HttpPost httppost = new 
        HttpPost httppost = new HttpPost("http://bumba27.byethost16.com/Ica%20Test/book_lib.xml");
        try {
            // Data that I am sending
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("EmailId", emailId));
            nameValuePairs.add(new BasicNameValuePair("Password", passwrd));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            responseBody = EntityUtils.toString(response.getEntity());

            Log.d("result", responseBody);
        } 
        catch (Throwable t ) {
            //Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_LONG).show();
            Log.d("Error Time of Login",t+"");
        } 
    }
}
//===================================================================================================================================
//END sending EmailAddress and Password to server 
//===================================================================================================================================

//===================================================================================================================================
//processing the XML got from server
//===================================================================================================================================
private void processResponce(String responceFromServer) 
{
    try {
        //saving the file as a xml
        FileOutputStream fOut = openFileOutput("loginData.xml",MODE_WORLD_READABLE);
        OutputStreamWriter osw = new OutputStreamWriter(fOut);
        osw.write(responceFromServer);
        osw.flush();
        osw.close();

        //reading the file as xml
        FileInputStream fIn = openFileInput("loginData.xml");
        InputStreamReader isr = new InputStreamReader(fIn);
        char[] inputBuffer = new char[responceFromServer.length()];
        isr.read(inputBuffer);
        String readString = new String(inputBuffer);

        //getting the xml Value as per child node form the saved xml
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputStream is = new ByteArrayInputStream(readString.getBytes("UTF-8"));
        Document doc = db.parse(is);

        NodeList root=doc.getElementsByTagName("root");
        String loginStatus = null;
        for (int i=0;i<root.getLength();i++) 
        {
            loginStatus = "" + ((Element)root.item(i)).getAttribute("status");
        }

        //If Email and Pass match with server
        if(loginStatus.equalsIgnoreCase("T"))
        {
            NodeList book=doc.getElementsByTagName("book");
            List<String> url = new ArrayList<String>();

            List<String> fileName = new ArrayList<String>();
            List<String> bkId = new ArrayList<String>();

            for (int i=0;i<book.getLength();i++) 
            {
                url.add(((Element)book.item(i)).getAttribute("bookImageUrl"));
                url.add(((Element)book.item(i)).getAttribute("pdfUrl"));

                //------------------------------------------------------------------------------------------------------------
                //Creating two list and storing image url, Book Id
                //Logic
                //This 2 list will be accessed and file name, pdf name, book id will be extracted from this 2 value and saved to local DB
                //------------------------------------------------------------------------------------------------------------
                fileName.add(((Element)book.item(i)).getAttribute("bookImageUrl"));
                bkId.add(((Element)book.item(i)).getAttribute("bookId"));
            }

            String [] stringArray = url.toArray(new String[url.size()]);

            //Array list is converted to String array
            stringArrayBookId = bkId.toArray(new String[bkId.size()]);
            stringArrayPdfUrlForLocalDB = fileName.toArray(new String[fileName.size()]);

                    //              Toast.makeText( getApplicationContext(),"List Value:\n"+stringArrayPdfUrlForLocalDB.length,Toast.LENGTH_LONG).show();
            new DownloadFileFromURL().execute(stringArray);
        }
        else if(loginStatus.equalsIgnoreCase("F"))
        {
            Toast.makeText( getApplicationContext(),"No Match found for this user",Toast.LENGTH_SHORT).show();
        }
    } 
    catch (Throwable t) 
    {
        Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_SHORT).show();
        Log.d("Error On Saving and reading", t+"");
    }

} 
```

**主要活动**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg"
tools:context=".MainActivity" >

<GridView
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="38sp"
    android:columnWidth="80dp"
    android:gravity="center"
    android:numColumns="4"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp"
    android:listSelector="#00000000" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="40sp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/background_title"
    android:orientation="vertical" >

    <RelativeLayout 
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/lib_logo1"
            android:layout_width="40sp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="4sp"
            android:src="@drawable/book" />

        <ImageView
            android:id="@+id/lib_logo2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/lib_logo1"
            android:src="@drawable/lib_icon" />

        <ImageView
            android:id="@+id/sync_img"
            android:layout_width="50sp"
            android:layout_height="50sp"
            android:src="@drawable/sync" 
            android:layout_alignParentRight="true"
            android:onClick="libSyc"/>

    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T12:42:02.723

您正在尝试使用 UI 线程直接在适配器中加载图像，尝试在 android 中使用延迟加载概念，在单独的线程中加载图像，这将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:10:46.443

我猜是 ImageAdapter 的问题

```
public Object getItem(int position) {
    return null;
} 
```

您需要返回给定位置的相应对象。返回近似对象。然后你的 GridView 包含的所有对象都是空的，所以这就是你变空（白屏）的原因。

# azure - 如何以编程方式删除或重命名 Azure Active Directory？

> ID：16056715
> 
> 赞同：14
> 
> 时间：2013-04-17T09:43:23.720
> 
> 标签：azure, active-directory, azure-active-directory

我不小心创建了名称错误的 Azure Active Directory。

使用管理控制台，我找不到纠正它的方法......我想知道是否有某种隐藏的 API 可以用来完成？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T11:36:14.217

一旦创建，您就不能删除 Windows Azure Active Directory。

这是服务的当前状态。恼人的部分是你也不能创建一个新的。希望我们很快就会看到至少“重命名”选项。

**更新**

大约在 2013 年 11 月（在最初的问答之后大约 6 个月！）Azure AD 的重命名被添加，并且可能将多个 Azure AD 加入到 Azure 订阅中。可以在[此博客文章](http://blogs.technet.com/b/ad/archive/2013/11/08/creating-and-managing-multiple-windows-azure-active-directories.aspx)中阅读更多详细信息。

2014 年 5 月左右（原问答后 1 年多！）添加了删除 Windows Azure Active Directory。可以在[此博客文章](http://www.edutech.me.uk/active-directory/how-to-delete-windows-azure-active-directory-waad/)中阅读更多详细信息。

截至 2014 年 9 月下旬（在最初的问答之后一年半多！）仍然没有 API 可以重命名或删除 AD。因此没有编程方式来执行这些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T07:22:10.003

删除目录功能最近已添加到门户中。尝试找到一个 powershell 或 api 来执行此操作，但似乎不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T07:55:14.447

如果您仍想更改它并且不需要以编程方式进行，您可以在[azure portal](https://manage.windowsazure.com)中进行。

几分钟前，我按照[本文中的说明进行了操作](http://blogs.technet.com/b/ad/archive/2013/11/08/creating-and-managing-multiple-windows-azure-active-directories.aspx)

> 要更改目录的名称，请打开管理门户，单击左侧导航栏中的 Active Directory，然后单击要重命名的目录的名称。
> 
> 然后，单击配置选项卡，在目录属性部分输入目录的新名称，然后单击屏幕底部命令栏中的保存按钮。

# android - AdapterView 中的触摸动画和 OnItemClick

> ID：16056718
> 
> 赞同：0
> 
> 时间：2013-04-17T09:43:30.110
> 
> 标签：android, animation, ontouchlistener, onitemclicklistener, android-adapterview

我有一个包含以下项目的网格：

[http://petromi.com/get/ba4a24f852.png](http://petromi.com/get/ba4a24f852.png)

当用户触摸它时，我想播放专辑封面的动画。为此，我创建了一个类：

```
class TouchAnimationHelper {
    ...

    public void setItemTouchAnimation(final View view) {
        view.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                int action = event.getAction();
                Log.d("Touch action: [%s]", action);

                if (action == MotionEvent.ACTION_DOWN) {
                    view.startAnimation(sDecAnimation);
                    return true;

                } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
                    if (action == MotionEvent.ACTION_UP) {
                        sIncAnimation.setAnimationListener(new Animation.AnimationListener() {
                            @Override
                            public void onAnimationStart(Animation animation) {
                            }

                            @Override
                            public void onAnimationEnd(Animation animation) {
                                sIncAnimation.setAnimationListener(null);
                                view.performClick();
                            }

                            @Override
                            public void onAnimationRepeat(Animation animation) {
                            }
                        });
                    }
                    view.startAnimation(sIncAnimation);
                    return true;
                }

                return false;
            }
        });
    }
} 
```

在适配器的`getView`方法中，我调用：

```
mTouchAnimationHelper.setItemTouchAnimation(view.findViewById(R.id.album_cover)); 
```

但结果并不完全是我想要的。触摸时动画正在工作。但是 Grid`onItemClick`没有被调用。只有在点击图像下方的文本时才会调用它。我怎样才能让它调用？

我尝试了一些解决方案，但没有成功：

1.  总是返回 false `onTouch`。但在这种情况下，没有其他触摸动作继续进行，没有播放动画。

2.  将附加参数传递给`setItemTouchAnimation`并调用 `adapterView.performItemClick(view, position, id)`而不是 `view.performClick()`. 但是在这种情况下，我遇到了奇怪的混乱：引发事件的项目 ID 与单击的项目 ID 不匹配。我还是不明白，为什么会这样。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:23:42.707

getview() 中的 OnTouch 事件返回 false 而不是 true。它适用于我的情况。希望它适用于你..

# oracle - XQUERY 在多个标签中选择不同的行

> ID：16056725
> 
> 赞同：1
> 
> 时间：2013-04-17T09:43:35.547
> 
> 标签：oracle, xquery, xmltype, xmltable

我在 oracle 中有一张桌子

```
create table MOVIE
(MOVIE_ID VARCHAR2(10 BYTE),
TITLE VARCHAR2(50 BYTE),
DIRECTOR VARCHAR2(50 BYTE),
WRITER VARCHAR2(50 BYTE),
GENRE VARCHAR2(50 BYTE),
RELEASE_DATE DATE,
RUNTIME NUMBER,
REVIEWS XMLTYPE); 
```

审查是 XML 类型

每条评论都有多个标签，`REVIEW(MORE THAN ONE TAG WITH A TAG)` 我有 25 条这样的评论，每个评论中都有多个评论标签

我想要在不同行中重复标签的 id

我写了以下查询

```
SELECT 
XMLQuery(
'for $i in distinct-values (/Reviews/REVIEW/ID)
return data($i)'
PASSING REVIEWS RETURNING CONTENT) ID
FROM MOVIE; 
```

如果在同一个 REVIEW 标记内，上面的查询给我输出为 M17 M18 M19。

我将所有三个放在一行中，我希望它们放在 3 个不同的行中。

```
M17
M18
M19 
```

知道查询有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:53:41.157

XMLTable() 与`MOVIE`表连接必须适用于**11g**：

```
select 
   m.movie_id,
   id_list.review_id
from 
  movie m,
  XMLTable(
    'for $i in distinct-values($param/Reviews/REVIEW/ID) return $i'
    passing m.reviews as "param"
    columns review_id varchar2(4000) path '//ID'
  ) id_list 
```

但是在**10g**`REVIEWS`的情况下，它会变得更难，因为这样的构造总是从第一个选择的记录中获得字段的值。多重集的技巧将不起作用并产生相同的结果（从第一条记录中获取值）。

通过将 XMLAgg() 的所有结果聚合到一条记录中，然后使用 XMLTable() 从该记录构建新数据集，我找到了**10g的唯一解决方案。**

```
select
  movie_id,
  review_id
from 
  XMLTable(
    '
      for $movie in $big_root/full_list/movie_entry,
          $review_id in $movie/ID
      return <row><movie_id>{data($movie/@movie_id)}</movie_id><review_id>{$id}</review_id></row> 
    '
    passing 
      (
        select 
          XMLElement("full_list", 
            XMLAgg(
              XMLElement("movie_entry",
                XMLAttributes(m.movie_id as "movie_id"),
                XMLQuery(
                  'for $i in distinct-values($param/Reviews/REVIEW/ID) return $i'
                   passing by value m.reviews as "param"
                   returning content
                ) 
              )
            )
          )
        from 
          movie m
      )
    as "big_root"
    columns 
      movie_id varchar2(4000) path '//row/movie_id',
      review_id varchar2(4000) path '//row/review_id'
  ) 
```

抱歉，我现在无法测试此查询，但希望它足以让您了解它的外观。

*PS如果有人可以解释Oracle 10g在加入从字段构造的XMLTable（）的情况下的这种行为，那就太好了：）*

# windows - 选取框进度条在 Powershell 中冻结

> ID：16056727
> 
> 赞同：0
> 
> 时间：2013-04-17T09:43:42.547
> 
> 标签：windows, powershell, progress-bar, jobs

我一直在使用 Powershell 一段时间，它不是理想的编程环境，但被我的程序卡住了。

我的程序是一个带有选取框进度条和搜索作业的 GUI。

我的程序的作用：在使用 Powershell 运行脚本后，如果模式为 MTA，它将以 STA 模式重新启动 Powershell。之后它会询问文件夹位置。输入文件夹位置后，它将开始搜索作业并在该位置搜索文件。每个文件都将存储到一个数组中。该数组将打印到 tempfile.txt 中，该文件将保存在您的桌面上。同时，工作是搜索文件，GUI 将显示一个带有选取框进度条的表单。

我的程序需要做什么：在搜索和存储文件完成工作后，它必须关闭表单。

我试过用 $formSearchingFiles.Close() 命令来做，但我注意到乔布斯无法关闭他们的“父”线程，所以这个工作将无法关闭表单。

我也尝试使用 Wait-Job cmdlet 来解决它，但随后选取框进度条将冻结，或者根本不会显示表单。

我在互联网上寻找了很多解决方案，但我找不到适合这个问题的解决方案。我在考虑多处理，但我不知道这在 Powershell 2.0 中是否可行（我仅限于 2.0 或更低版本）。

也不知道有没有办法让Search-Job通知主线程任务完成，这样主线程就可以继续执行程序，而不会冻结进度条。

我希望我已经对程序和我的问题进行了足够的解释。

```
# Get the path of the script
$scriptPath = ((Split-Path $script:MyInvocation.MyCommand.Path) + "\")
$scriptName = $MyInvocation.MyCommand.Name
$script = $scriptPath + $scriptName

# Check if powershell is running in STA(Single Threaded Apartment) or MTA(Multi Threaded Apartment) mode.
# If it is running in MTA mode then restart Powershell in STA mode.
if ([threading.thread]::CurrentThread.GetApartmentState() -eq "MTA") 
{
    Write-Host Restarting Powershell in STA mode
    & $env:SystemRoot\system32\WindowsPowerShell\v1.0\powershell.exe -sta "& {&'$script'}"
}
else
{
    $folderPath = $currentFolderLocation.Text
    $tempFile = $currentStagingLocation.Text
    $tempFile += "\fileArray.txt"

    function OnApplicationLoad {    
        return $true #return true for success or false for failure
    }

    function OnApplicationExit {
        $script:ExitCode = 0 #Set the exit code for the Packager
    }

    function Call-Searching_pff {
        [void][reflection.assembly]::Load("mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
        [void][reflection.assembly]::Load("System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
        [void][reflection.assembly]::Load("System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
        [void][reflection.assembly]::Load("System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")

        [System.Windows.Forms.Application]::EnableVisualStyles()
        $formSearchingFiles = New-Object 'System.Windows.Forms.Form'
        $label = New-Object 'System.Windows.Forms.Label'
        $progressbar = New-Object 'System.Windows.Forms.ProgressBar'
        $InitialFormWindowState = New-Object 'System.Windows.Forms.FormWindowState'

        $FormEvent_Load={

        $folderPath = &read-host "Enter path"
        $tempFile = (([Environment]::GetFolderPath("Desktop")) + "\tempfile.txt" )

            $SearchJob = Start-Job -scriptblock {
                param ($folderPath, $tempFile)
                $fileArray = @()
                # Get all files and folders under the specified path
                $items = Get-ChildItem -Path $folderPath -Recurse
                foreach ($item in $items)
                {
                    # Check if the item is a file or a folder
                    if (!($item.PSIsContainer)) 
                    {
                        # Extract path of file with path of entered folder
                        $extractedPath = $item.FullName
                        $extractedPath = $extractedPath.Replace($folderPath, "")
                        $fileArray += $extractedPath
                    }
                }
                # Save array in temporary file
                $fileArray | out-file $tempFile
                $formSearchingFiles.Close() #Does not work inside job :(

            } -ArgumentList @($folderPath, $tempFile)       
        }

        $Form_StateCorrection_Load=
        {
            #Correct the initial state of the form to prevent the .Net maximized form issue
            $formSearchingFiles.WindowState = $InitialFormWindowState
        }

        $Form_Cleanup_FormClosed=
        {
            #Remove all event handlers from the controls
            try
            {
                $formSearchingFiles.remove_Load($FormEvent_Load)
                $formSearchingFiles.remove_Load($Form_StateCorrection_Load)
                $formSearchingFiles.remove_FormClosed($Form_Cleanup_FormClosed)
            }
            catch [Exception]{ }
        }

        # formSearchingFiles
        $formSearchingFiles.Controls.Add($label)
        $formSearchingFiles.Controls.Add($progressbar)
        $formSearchingFiles.ClientSize = '394, 122'
        $formSearchingFiles.FormBorderStyle = 'FixedDialog'
        $formSearchingFiles.MaximizeBox = $False
        $formSearchingFiles.Name = "formSearchingFiles"
        $formSearchingFiles.StartPosition = 'CenterScreen'
        $formSearchingFiles.Text = "Compatibility Checker"
        $formSearchingFiles.add_Load($FormEvent_Load)

        # label
        $label.Location = '12, 27'
        $label.Name = "label"
        $label.Size = '368, 26'
        $label.TabIndex = 1
        $label.Text = "Searching for files, please wait.."
        $label.TextAlign = 'MiddleCenter'

        # progressbar
        $progressbar.Location = '12, 68'
        $progressbar.MarqueeAnimationSpeed = 40
        $progressbar.Name = "progressbar"
        $progressbar.Size = '370, 30'
        $progressbar.Style = 'Marquee'
        $progressbar.TabIndex = 0

        #Save the initial state of the form
        $InitialFormWindowState = $formSearchingFiles.WindowState
        #Init the OnLoad event to correct the initial state of the form
        $formSearchingFiles.add_Load($Form_StateCorrection_Load)
        #Clean up the control events
        $formSearchingFiles.add_FormClosed($Form_Cleanup_FormClosed)
        #Show the Form
        return $formSearchingFiles.ShowDialog()
    } #End Function

    #Call OnApplicationLoad to initialize
    if((OnApplicationLoad) -eq $true)
    {
        #Call the form
        Call-Searching_pff | Out-Null
        #Perform cleanup
        OnApplicationExit
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T21:26:22.857

我找到了解决我自己问题的方法。解决方案：**同步哈希表作为线程间的“通信纽带”**。

创建哈希表后，您可以向其中添加变量和对象。所有线程（您授予对哈希的访问权限）都可以读取/写入这些变量和对象。

**创建同步。哈希表：**

```
$syncHash = [hashtable]::Synchronized(@{})
#Where $syncHash is the name of your hash table 
```

**将变量和对象添加到哈希表：**

```
$syncHash.ProgressBar = $progressBar
#Create new variable ProgressBar in hash table and assign $progressBar to it 
```

**创建新线程并允许使用哈希表：**

```
$processRunspace =[runspacefactory]::CreateRunspace()
$processRunspace.ApartmentState = "STA"
$processRunspace.ThreadOptions = "ReuseThread"          
$processRunspace.Open()
$processRunspace.SessionStateProxy.SetVariable("syncHash",$syncHash)   

$psCmd = [PowerShell]::Create().AddScript({
     #Your Thread Code Here
})
$psCmd.Runspace = $processRunspace
$data = $psCmd.BeginInvoke() 
```

**从新线程更改 $progressBar 的值：**

```
$syncHash.ProgressBar.Value = 1 
```

* * *

感谢： http: [//learn-powershell.net/2012/10/14/powershell-and-wpf-writing-data-to-a-ui-from-a-different-runspace/](http://learn-powershell.net/2012/10/14/powershell-and-wpf-writing-data-to-a-ui-from-a-different-runspace/)

# php - 从 PHP 中的 .txt 文件中读取换行符

> ID：16056729
> 
> 赞同：1
> 
> 时间：2013-04-17T09:43:45.637
> 
> 标签：php, ajax, json

我正在尝试使用 PHP 读取一个 txt 文件，然后将该文本文件的内容回显为 JSON 格式，以通过 AJAX 请求发回。当 txt 文件不包含换行符/段落时，这对我来说很好，但在有的时候不行。

因此，我正在寻找一种方法来在返回文本文件的内容时在文本文件中搜索换行符，并将它们替换为 <br> 标记以插入 JSON。

目前我的代码看起来像这样......

```
$jsonFile = '{';
$projectName = $_POST["project"];

//directories
$videoDir = $_SERVER['DOCUMENT_ROOT'].'/malagnini/projects/'.$projectName.'/video/';
$audioDir = $_SERVER['DOCUMENT_ROOT'].'/malagnini/projects/'.$projectName.'/audio/';
$textData = file_get_contents($_SERVER['DOCUMENT_ROOT'].'/malagnini/projects/'.$projectName.'/description.txt', true);

//add text data to JSON
$jsonFile .= '"text":"'.$textData.'",';   

//add video paths to JSON
$j = 1;
if ($dirHandle = opendir($videoDir) ){
    while (($file = readdir($dirHandle)) !== FALSE){
        if (!is_dir($file)){
            $jsonFile .= '"video'.$j.'":"'.$file.'",';   
            $j++; 
        }

    }

};

//add audio paths to JSON
$jsonFile .= '"audio": {';
$i = 1;

if ($dirHandle = opendir($audioDir) ){
    while (($track = readdir($dirHandle)) !== FALSE){
        if (!is_dir($track)){
            $jsonFile .= '"track'.$i.'":"'.$track.'",';
            $i++;     
        }

    }

};

//echo JSON
$jsonFile = chop($jsonFile, ",");
$jsonFile .= '} }';
echo $jsonFile; 
```

所以文本数据是通过 var &textData 读入的，但是当它输出到 JSON 时，当 txt 文件中有换行符时，它不是有效的 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:46:15.203

> 因此，我正在寻找一种方法来在返回文本文件的内容时在文本文件中搜索换行符，并用 <br> 标记替换它们以插入 JSON。

我认为这就是你需要的：http: [//php.net/manual/fr/function.nl2br.php](http://php.net/manual/fr/function.nl2br.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:10:24.677

您不应该手动编译 json，为什么不使用所需的属性构建一个数组然后对其进行 json_encode 呢？

因此，您根本不必担心琴弦的内部组成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:47:19.400

将换行符转换为中断标记的最简单方法是简单地运行字符串`nl2br()`

# php - 如何正确“加入”这些表？

> ID：16056736
> 
> 赞同：0
> 
> 时间：2013-04-17T09:44:09.083
> 
> 标签：php, mysql, join

我有一张表用于存储本周的飞机检查时间表，它被称为`aircraft_sched`. 还有另外两个相关的，一个是`aircraft_sched_options`我需要对`JOIN`第一个表调用的，最后一个表是调用的`aircraft`。

`aircraft_sched`：

```
column 1: AC_Reg (VARCHAR)(10),(PK),(FK -> `aircraft` PK)
column 2: Sched_Day1 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 3: Sched_Day2 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 4: Sched_Day3 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 5: Sched_Day4 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 6: Sched_Day5 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 7: Sched_Day6 (INT)(1),(FK -> `aircraft_sched_options` PK)
column 8: Sched_Day7 (INT)(1),(FK -> `aircraft_sched_options` PK) 
```

`aircraft_sched_options`：

```
column 1: SchedOpt_ID (INT)(1),(PK)
column 2: SchedOpt_Name (VARCHAR)(10)
column 3: SchedOpt_Color (VARCHAR)(7), 
```

`aircraft`

```
column 1: AC_Reg (VARCHAR)(10),(PK)
column 2: AC_SN  (VARCHAR)(6)
column 3: AC_Year (VARCHAR)(4) 
```

当将新飞机添加到系统中时，我拥有它，因此它也将其添加到`aircraft_sched`表中。我不认为这是正确的方法，但现在就是这样。因此，`aircraft_sched`表格始终填充有 ，`AC_Reg`并且`Sched_DayX`单元格是与所选计划类型相对应的`0`for`NULL`或数字。`SchedOpt_ID`

我面临的问题是当我尝试`JOIN`从`Sched_DayX`列到`SchedOpt_ID`列时。当我只有`JOIN`一列时它有点工作，但如果我尝试做不止一列，那么该行就会从我的结果中消失。

这是我的“有点”工作的代码：

```
<?php
$sql = ("
          SELECT 
             * 
          FROM 
             aircraft_sched 
          INNER JOIN aircraft_sched_options AS aso1 
             ON aircraft_sched.Sched_Day1 = aso1.SchedOpt_ID
");

if(!$result_sql = $mysqli->query($sql))
{
    echo QueryCheck("getting the aircraft schedule ","from the aircraft sched",$mysqli) . "Error No: " .$mysqli->errno;
}

while($ACSched = $result_sql->fetch_assoc())
{
    echo "<tr>";
    echo "<td class=\"ACSched_Reg\">" . $ACSched['AC_Reg'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "<td align=\"center\" style=\"background:" . $ACSched['SchedOpt_Color'] . ";\">" . $ACSched['SchedOpt_Name'] . "</td>";
    echo "</tr>";
}
?> 
```

当我说它“有点”有效时，我的意思是它实际上显示了一些结果。它不起作用的原因是因为它在每个单元格中显示相同的结果，即使只有一天分配了计划类型。

当我将第二个添加`JOIN`到查询中时，如下所示：

```
$sql = ("
          SELECT 
            * 
          FROM 
            aircraft_sched 
          INNER JOIN aircraft_sched_options AS aso1 
            ON aircraft_sched.Sched_Day1 = aso1.SchedOpt_ID
          INNER JOIN aircraft_sched_options AS aso2 
            ON aircraft_sched.Sched_Day2 = aso2.SchedOpt_ID
 "); 
```

...然后它只是不返回任何有记录的行。

我一直在阅读`JOIN`s 以及它们是如何工作的，我能想到的解决问题的唯一方法是为每个表设置一个单独的表，`AC_Reg`以便将一周中的每一天设置为一`UNIQUE`列，但我不相信这是完成任务的最佳方式。

**编辑：**

以下是一些屏幕截图，以提供更好的视觉效果。

`aircraft_sched`：

![飞机计划](https://i.stack.imgur.com/pgAQw.jpg)

`aircraft_sched_options`：

![plane_sched_options](https://i.stack.imgur.com/inObZ.jpg)

我的代码：

![php代码](https://i.stack.imgur.com/rS7XB.jpg)

屏幕显示：

![屏幕上显示的内容](https://i.stack.imgur.com/xZYPg.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:36:19.223

`tbl_two` **如果我正确理解了您的问题，您需要为每**列加入表格`Day`：

```
SELECT 
    aircraft_sched.AC_SN,
    IF(
       aso1.SchedOpt_Name IS NULL OR aso1.SchedOpt_ID = 0, 
       '-', 
       aso1.SchedOpt_Name
    ) as option1,
    IF(
       aso2.SchedOpt_Name IS NULL OR aso2.SchedOpt_ID = 0, 
       '-', 
       aso2.SchedOpt_Name
    ) as option2
FROM 
    aircraft_sched 
LEFT JOIN aircraft_sched_options AS aso1 
    ON aircraft_sched.Sched_Day1 = aso1.SchedOpt_ID
LEFT JOIN aircraft_sched_options AS aso2 
    ON aircraft_sched.Sched_Day2 = aso2.SchedOpt_ID

.... 
```

**编辑：**我已经更新了查询并使用`LEFT JOIN`而不是`INNER JOIN`获取选项，因为正如您所说，有些可能是`NULL`

**更新：**删除连接`aircraft`并添加检查选项是否为空或 id 为 0`-`将显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:58:27.527

按照查询的逻辑，只有在 tbl_one 中具有 Day1 == Day2 == Day3 == ... == Day7 的行并且该值也等于 tbl_two.Day_ID 应该显示出来，这有帮助吗？

```
SELECT * FROM tbl_one INNER JOIN tbl_two
    ON tbl_one.Day1 = tbl_two.Day_ID 
WHERE 
      tbl_one.Day1 = tbl_one.Day2
  AND tbl_one.Day1 = tbl_one.Day3
  AND tbl_one.Day1 = tbl_one.Day4
  AND tbl_one.Day1 = tbl_one.Day5
  AND tbl_one.Day1 = tbl_one.Day6
  AND tbl_one.Day1 = tbl_one.Day7 
```

# php - MySQL - 如何知道行的自动递增 id

> ID：16056738
> 
> 赞同：0
> 
> 时间：2013-04-17T09:44:11.623
> 
> 标签：php, mysql, sql, database, auto-increment

我想将数据插入到带有我网站订单的 mysql 数据库中。

所以我将用户名和一个自动递增的订单号存储在数据库中。

问题是，我如何再次提取订单号。

我试过这个：

```
SELECT ordernumber FROM transactions WHERE..... 
```

如何完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:53:24.080

您可以使用

```
SELECT LAST_INSERT_ID(); 
```

[有关http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)的更多信息

请注意，在执行 SELECT 或 SET 等其他 SQL 语句后，您不能使用 C API 函数来检索 LAST_INSERT_ID(expr) 的值。因此，当您执行 INSERT 语句时，然后您执行

```
SELECT LAST_INSERT_ID(); 
```

它可以工作，但是当中间有其他语句时，它将返回 0，获得它的唯一方法如下所述。

另一种选择是对表格进行 DESC 排序并获取第一个数字

```
SELECT ordernumber FROM transactions ORDER By ordernumber DESC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:00:18.663

Another way is to run a query

```
select max(ordernumber) as lastordernumber from transactions; 
```

here, lastordernumber is the desired value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:51:13.250

```
$lastOrderNumber = mysql_insert_id();
$sql = "SELECT ordernumber FROM transactions WHERE ordernumber = $lastOrderNumber;"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:55:35.610

如其他答案所述，您应该使用 mysql_insert_id。

例如你可以使用这个：

```
$sql = "INSERT INTO table VALUES ('username')";
$result = mysql_query($sql);
echo "ID of last inserted record is: " . mysql_insert_id(); 
```

以上将输出：

```
ID of last inserted record is: (The ordernumber here) 
```

有关 mysql_insert_id 的更多信息，您可以查看[此处。](http://www.w3schools.com/php/func_mysql_insert_id.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T09:55:40.877

有一个函数可以知道当前连接中插入的最后一个 id 是什么

例如，在 inster 数据之后，您可以得到如下

```
mysql_query('INSERT INTO transactions  VALUES(\'b\')');

$id = mysql_insert_id(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T09:45:55.500

只需使用 mysql_insert_id 函数它会给你最后插入的 id。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T09:47:09.983

在插入查询执行代码后调用 mysql_insert_id() 函数

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T09:47:54.420

这取决于您使用什么方法将数据插入数据库。

对于 mysql_* 函数，您可以使用 mysql_insert_id() 函数。

对于 PDO 使用和 mysqli_*，请参阅此答案：[What is equivalent of mysql_insert_id(); 使用准备好的语句？](https://stackoverflow.com/questions/9753720/what-is-mysql-insert-id-using-prepared-statement)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T09:48:23.727

也可以使用 LAST_INSERT_ID() 或 mysql_insert_id

# c# - 所有 IP 地址上的 Mono 和 WCF Net.Tcp 绑定

> ID：16056746
> 
> 赞同：4
> 
> 时间：2013-04-17T09:44:23.437
> 
> 标签：c#, wcf, mono, net.tcp

如[本文](http://mel-green.com/2009/04/wcf-nettcp-binding-on-all-ip-addresses/)所述，在 .net 中，可以使用“地址”0 将 Web 服务绑定到所有 IP 地址。但是，这似乎不适用于 mono（版本 2.10.8.1）。

这是我的示例代码：

客户：

```
string ipAddressOfTheService = "192.168.0.23";
EndpointAddress address = new EndpointAddress(string.Format("net.tcp://{0}:8081/myService", ipAddressOfTheService));
NetTcpBinding binding = new NetTcpBinding();
ServiceProxy proxy = new ServiceProxy(binding, address);
if(proxy.CheckConnection())
{
    MessageBox.Show("Service is available");
}
else
{
    MessageBox.Show("Service is not available");
} 
```

服务代理：

```
public class ServiceProxy : ClientBase<IMyService>, IMyService
{
    public ServiceProxy(Binding binding, EndpointAddress address)
        : base(binding, address)
    {
    }

    public bool CheckConnection()
    {
        bool isConnected = false;
        try
        {
            isConnected = Channel.CheckConnection();
        }
        catch (Exception)
        {
        }
        return isConnected;
    }
} 
```

我的服务：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    bool CheckConnection();
} 
```

我的服务：

```
class MyService : IMyService
{
    public bool CheckConnection()
    {
        Console.WriteLine("Check requested!");
        return true;
    }
} 
```

服务主机：

```
class MyServiceHost
{
    static void Main(string[] args)
    {
        Uri baseAddress = new Uri(string.Format("net.tcp://0:8081/myService");
        using (ServiceHost host = new ServiceHost(typeof(MonitoringService), baseAddress))
        {
            NetTcpBinding binding = new NetTcpBinding();
            binding.Security.Mode = SecurityMode.None;

            host.AddServiceEndpoint(typeof(IMyService), binding, baseAddress);
            host.Open();
            Console.WriteLine("The service is ready at {0}", baseAddress);
            Console.WriteLine("Press <Enter> to stop the service.");
            Console.ReadLine();
            host.Close();
        }
    }
} 
```

如果我使用 .net 在 Windows PC 上运行此（服务和客户端），一切正常。
在我的 Linux 机器（Raspberry Pi，Debian soft-float）上，服务启动没有任何问题，但是客户端无法连接。
如果我使用其 IP 地址而不是“0”地址托管服务，则一切正常。

这只是单声道中的另一个错误还是我必须绑定到任何其他 IP 地址而不是 0？如果这是单声道中的错误，是否有任何解决方法？

*（顺便说一句，我仍在寻找解决 mono/net.tcp 端口共享问题的解决方法，如果有人可以在这里提供帮助 -> [net.tcp 端口共享和 mono](https://stackoverflow.com/questions/15948639/net-tcp-port-sharing-and-mono)）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:47:05.473

尝试使用`+`or`*`而不是`0`绑定到所有地址。

编辑：或尝试`0.0.0.0`

Edit2：看起来像 Mono 中的一个错误。您可以在[https://bugzilla.xamarin.com/index.cgi报告它](https://bugzilla.xamarin.com/index.cgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T04:03:54.190

我在 Ubuntu Server 16.04 LTS 和 Mono JIT 编译器版本 5.0.1.1（2017-02/5077205 Thu May 25 09:19:18 UTC 2017）中遇到了类似的问题。

我通过在中添加以下行来解决它`/etc/hosts`：

`0.0.0.0 IP4Any`

然后当然，将服务绑定到`IP4Any`.

# apache-zookeeper - Curator 何时以及为何抛出 ConnectionLossException？

> ID：16056751
> 
> 赞同：2
> 
> 时间：2013-04-17T09:44:33.223
> 
> 标签：apache-zookeeper, apache-curator

我使用 Curator 1.2.4，`ConnectionLossException`当我想监视一个 znode 以了解其子节点的更改时，我会不断收到。

然后我实现了一个像这样的观察者

```
public class CuratorChildWatcherImpl implements CuratorWatcher {

    private CuratorFramework client;

    public CuratorChildWatcherImpl(CuratorFramework client) {
        this.client = client;
    }

    @Override
    public void process(WatchedEvent event) throws Exception {
       List<String> children=client.getChildren().usingWatcher(this).forPath(event.getPath());
       // Do other stuff with the children znode.
    }
} 
```

`ConnectionLossException`如果`connectionTimeout`设置为 10 秒，则代码每 11 秒抛出一次。似乎例外是`connectionTimeout`加 1 秒。为什么？

我检查了源代码，发现 GetChildrenBuilderImpl 将调用 CuratorZookeeperClient 的 blockUntilConnectedOrTimeout 方法，该方法将每 1 秒检查一次连接状态。

```
2013-04-17 17:22:08 [ERROR]-[com.netflix.curator.ConnectionState.getZooKeeper(ConnectionState.java:97)] Connection timed out for connection string (...) and timeout (10000) / elapsed (10317913)
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
    at com.netflix.curator.ConnectionState.getZooKeeper(ConnectionState.java:94)
    at com.netflix.curator.CuratorZookeeperClient.getZooKeeper(CuratorZookeeperClient.java:107)
    at com.netflix.curator.framework.imps.CuratorFrameworkImpl.getZooKeeper(CuratorFrameworkImpl.java:413)
    at com.netflix.curator.framework.imps.GetChildrenBuilderImpl$3.call(GetChildrenBuilderImpl.java:213)
    at com.netflix.curator.framework.imps.GetChildrenBuilderImpl$3.call(GetChildrenBuilderImpl.java:202)
    at com.netflix.curator.RetryLoop.callWithRetry(RetryLoop.java:106)
    at com.netflix.curator.framework.imps.GetChildrenBuilderImpl.pathInForeground(GetChildrenBuilderImpl.java:198)
    at com.netflix.curator.framework.imps.GetChildrenBuilderImpl.forPath(GetChildrenBuilderImpl.java:190)
    at com.netflix.curator.framework.imps.GetChildrenBuilderImpl.forPath(GetChildrenBuilderImpl.java:37)
    at com.netflix.curator.framework.imps.NamespaceWatcher.process(NamespaceWatcher.java:56)
    at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:521) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-25T02:35:19.620

这是在 CURATOR-24 下跟踪的 ​​Curator/ZooKeeper 交互中的一个已知错误[。当前管理挂起的 ZK 句柄的方法需要改进](https://issues.apache.org/jira/browse/CURATOR-24)。它在 2.0.1-incubating 版本中得到修复。

# highcharts - 如何增加高图表中横向条形图之间的间距？

> ID：16056754
> 
> 赞同：1
> 
> 时间：2013-04-17T09:44:42.467
> 
> 标签：highcharts

我正在尝试增加此链接中图表之间的空间，但是我在 xAxis 和 pointWidth: 90/pointPadding: 0 中使用了 minPadding/maxPadding，但没有任何效果。在我看来，图表区域的顶部和底部存在强制间距，这导致了这种情况。 [http://jsfiddle.net/j7NMC/2/](http://jsfiddle.net/j7NMC/2/)

```
/*What i have tried */    
series:{
    pointWidth: 90,
    pointPadding: 0
}
xAxis: {minPadding:0, maxPadding:0,} 
```

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:04:17.507

我建议更改您的数据设置。使用 1 个系列和 3 个类别，而不是 3 个不同的系列：

```
series: [{
  data: [973,133,107]
}] 
```

示例：http: [//jsfiddle.net/j7NMC/4/](http://jsfiddle.net/j7NMC/4/)

这对你有什么作用：

1) 消除图表上浪费的空间

2) 通过将标签放在条形旁边的轴上，消除了对图例的需求（大大提高了图表的可用性，使用户更容易理解）

3) 消除了对条形的多种颜色的需要（大大提高了图表的可用性，使用户更容易理解）

编辑：{您可以尝试将 groupPadding 设置为 0 以删除一些空间，因为您显示的 3 系列已分组，因此正在添加额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:02:48.813

选项需要位于 plotOptions 的“bar”部分，并且您不需要 plotOptions 中的系列条目，例如：

```
 plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                },
                pointWidth: 10,
                pointPadding: 0
            }
 }, 
```

[http://jsfiddle.net/A8dpf/](http://jsfiddle.net/A8dpf/)

# c++ - C/C++ 无符号整数溢出

> ID：16056758
> 
> 赞同：22
> 
> 时间：2013-04-17T09:44:46.483
> 
> 标签：c++, c

我正在阅读有关整数安全性的文章。这是链接： http: [//ptgmedia.pearsoncmg.com/images/0321335724/samplechapter/seacord_ch05.pdf](http://ptgmedia.pearsoncmg.com/images/0321335724/samplechapter/seacord_ch05.pdf)

第166页说：

> 涉及无符号操作数的计算永远不会溢出，因为无法由生成的无符号整数类型表示的结果会以比结果类型可以表示的最大值大一的数字为模减少。

这是什么意思？感谢回复。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-17T09:47:36.463

这意味着价值“环绕”。

```
UINT_MAX + 1 == 0
UINT_MAX + 2 == 1
UINT_MAX + 3 == 2 
```

.. 等等

正如链接所说，这就像模运算符：[http ://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T09:48:37.597

### 没有溢出？

这里的“溢出”意味着“产生一个不适合操作数的值”。因为应用了算术模，所以值总是适合操作数，因此不会溢出。

换句话说，在溢出实际发生之前，C++ 已经截断了该值。

### 模数？

取一个值取模某个其他值意味着应用除法，然后取余数。

例如：

```
0 % 3 = 0  (0 / 3 = 0, remainder 0)
1 % 3 = 1  (1 / 3 = 0, remainder 1) 
2 % 3 = 2  (2 / 3 = 0, remainder 2)
3 % 3 = 0  (3 / 3 = 1, remainder 0)
4 % 3 = 1  (4 / 3 = 1, remainder 1)
5 % 3 = 2  (5 / 3 = 1, remainder 2)
6 % 3 = 0  (6 / 3 = 2, remainder 0)
... 
```

此模应用于无符号计算的结果，除数是该类型可以容纳的最大值。例如，如果最大值为 2^16=32768，则`32760 + 9 = (32760 + 9) % (32768+1) = 0`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T09:50:39.533

这意味着您无法更改`unsigned`计算的符号，但仍会产生意想不到的结果。假设我们有一个 8 位无符号值：

```
 uint8_t a = 42; 
```

我们再加上 240：

```
 a += 240; 
```

它不适合，所以你得到 26。

无符号数学在 C 和 C++ 中明确定义，其中有符号数学在技术上要么是未定义的，要么是依赖于实现的，或者是其他一些“你不会期望可能发生的事情”的措辞（我不知道确切的措辞，但结论是“你不应该依赖有符号整数值的溢出行为”）

# python - 使用 pygit2 提交时未跟踪的目录

> ID：16056759
> 
> 赞同：5
> 
> 时间：2013-04-17T09:44:52.063
> 
> 标签：python, git, libgit2, pygit2

我正在使用 pygit2 开发一个非裸存储库

```
index = repo.index
index.read()

# write in test/test.txt

index.add('test/test.txt')
treeid = index.write_tree()

repo.create_commit(
    'HEAD',
    author, committer,
    'test commit',
    treeid,
    [repo.head.oid]
) 
```

这是成功的，但是当我执行 a 时`git status`，我得到了这个：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    test/test.txt
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   test/ 
```

在 a 之后`git reset --hard`，一切都已修复。

有没有办法用 pygit 正确更新索引？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:01:19.413

您只是从内存索引中写出一棵树，而磁盘索引保持不变，因此在提交之后它处于与您执行任何操作之前相同的状态。

`index.write()`如果要将更改存储在磁盘上，则需要写出索引 ( )。

# google-maps - 使用 Google Maps API 刷新任何页面会导致 IE8 崩溃

> ID：16056760
> 
> 赞同：4
> 
> 时间：2013-04-17T09:44:51.840
> 
> 标签：google-maps, google-maps-api-3, internet-explorer-8

在过去的几天里，我们遇到了使用 Google Maps API V3 的网页问题。

最初我以为这是我们网站上的一个特定页面，并且至少花了一天时间试图找到原因。今天早上我发现它是我们网站上带有地图的任何页面，并且刚刚发现它是任何带有地图的网站上的任何页面。

我们在 Windows XP 上使用 IE8，问题是在带有地图的页面上刷新 IE8 崩溃。如果“启用自动崩溃恢复”在 Internet 选项/高级中打开，那么您将收到“气球”错误： **此选项卡已恢复 此网页的问题导致 Internet Explorer 关闭并重新打开选项卡。**

如果“启用自动崩溃恢复”处于关闭状态，则会出现通常的**“Internet Explorer 遇到问题需要关闭”**消息框，但单击“调试”只会关闭 IE。

这发生在 Google 的简单示例页面上，它会正常加载，按 F5 键，IE 会崩溃。 [https://developers.google.com/maps/documentation/javascript/examples/full/map-simple](https://developers.google.com/maps/documentation/javascript/examples/full/map-simple)

**这只发生在 Windows XP 上的 IE8 上。** XP 上的 IE7 和 Windows 7 上的 IE9 都很好，Firefox 和 Chrome 也一样。

其他人可以确认这一点，并知道如何解决吗？

谢谢，迈克

**更新：发现如果 XP 在带网络的安全模式下启动它可以正常工作**

# android - android扩展类与本机方法

> ID：16056765
> 
> 赞同：2
> 
> 时间：2013-04-17T09:45:03.790
> 
> 标签：android, inheritance, native, extends

我在[这里](https://stackoverflow.com/questions/10940502/is-it-possible-to-override-a-native-method-in-a-java-class-in-android-dalvik)和[这里](https://stackoverflow.com/questions/12744315/override-native-methods-in-android)看到你不能在 android 中重写本机方法，但我想知道我是否可以让一个类声明一些本机方法，然后用另一个类声明一些额外的本机方法来扩展它。

我的情况如下：

```
public class A{
    public native int aMethod();
}

public class B extends A{
    public native int bMethod();

    static {
        try{
            System.loadLibrary("MyNativeLibraryWithBothaMethodAndbMethod");
        }
        catch (java.lang.UnsatisfiedLinkError e){
            System.out.println (e);
        }
    }
}

public class MyActivity extends Activity {
    private B bClass;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        bClass = new B();
        bClass.aMethod();//Working fine
        bClass.bMethod();//UnsatisfiedLinkError

    }
} 
```

库加载没有问题，第一个方法被调用，但不是第二个。

如果我将 bMethod 从 B 移动到 A，一切正常。

将 System.loadlibrary() 从 B 移动到 A 似乎没有效果。

是否可以使用其他本地方法扩展 A 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:00:10.377

Ok, I just found the solution. The problem was in the .cpp file:

I edited the `MyNativeLibraryWithBothaMethodAndbMethod` file:

```
#include "my_package_name_A.h"
JNIEXPORT jint JNICALL Java_my_package_name_A_aMethod( ... ){ ... }
JNIEXPORT jint JNICALL Java_my_package_name_A_bMethod( ... ){ ... } 
```

with

```
#include "my_package_name_A.h"
JNIEXPORT jint JNICALL Java_my_package_name_A_aMethod( ... ){ ... }
JNIEXPORT jint JNICALL Java_my_package_name_B_bMethod( ... ){ ... } 
```

Note the "*B*" in the second signature.

# c# - 使用 EF WPF 创建登录页面

> ID：16056768
> 
> 赞同：0
> 
> 时间：2013-04-17T09:45:08.460
> 
> 标签：c#, wpf, entity-framework, data-binding, mvvm

我正在创建一个登录页面以使用户能够使用`WPF` `MVVM`应用程序。到目前为止，我正在使用`Entity Framework model`，连接到`SQL database`.

我有一张表，其中包含一些用户详细信息，例如用户名、密码、确认密码电子邮件和用户角色。

到目前为止，我已经创建了一个视图，该视图已经`bound`访问了我的视图模型中的某些属性（用户名和密码）。

我还有一个注册页面，允许用户拥有用户凭据（也有一些验证，所以只能有 1 个用户有名字，不能重复）。

显然，与您相比，`ASP.NET`您可以使用身份验证并以这种方式创建用户。我一直在关注一些如何创建登录页面的各种链接，但它们都不是我想要的。

但是，我不太确定我在做什么是正确的，从某种意义上说，我如何匹配数据库中的结果以允许用户登录？

这就是我到目前为止所做的；

```
public void CheckLogin()
{
     var user = context.Users.Where(i => i.UserID == this.UserID).FirstOrDefault();

     if (user != null )
     {
         MessageBox.Show("Unable to Login, incorrect credentials.");

     }
     else if (this.Username == user.Username || this.Password == user.Password)
     {
         MessageBox.Show("Successfully Logged in, " + user.Username + "");
     }
     else
     {
         MessageBox.Show("Unable to Login, incorrect credentials.");
     }
}

private ICommand showLoginCommand;
public ICommand ShowLoginCommand
{
    get
    {
        if (this.showLoginCommand == null)
        {
            this.showLoginCommand = new CommandBase(i => this.CheckLogin(), null);
        }
        return this.showLoginCommand;
    }
} 
```

XAML；

```
<TextBox Name="txtUserName" HorizontalAlignment="Left" Style="{StaticResource myErrorTemplate}"
                 Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}"/>

<PasswordBox HorizontalAlignment="Left" Name="txtPassword"
               behavior:PasswordBoxAssistant.Attach="True" 
               behavior:PasswordBoxAssistant.Password="{Binding Password, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}"/>

<Button Name="btnLogin" IsDefault="True" 
                    Command="{Binding ShowLoginCommand}"/> 
```

但是，当输入详细信息时，它似乎不起作用。谁能帮我创建一个 EF 语句来检查数据库中的用户并将其与从登录页面输入的用户名和密码相匹配？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:30:58.710

我认为代码中的 if 语句有些东西。当我查看代码时，它应该更像是：

```
if (user == null)
 {
     MessageBox.Show("Unable to Login, incorrect credentials.");

 }
 else if (this.Username == user.Username && this.Password == user.Password)
 {
     MessageBox.Show("Successfully Logged in, " + user.Username + "");
 }
 else
 {
     MessageBox.Show("Unable to Login, incorrect credentials.");
 } 
```

如果用户不存在，则显示消息，并且用户名**和**密码必须相同。

# enthought - 在没有主文件夹目录的 Linux 上安装 Canopy

> ID：16056775
> 
> 赞同：1
> 
> 时间：2013-04-17T09:45:18.737
> 
> 标签：enthought

使用安装程序安装 Enthought Canopy 1.0 时`.sh`，它会在我的主文件夹中放置很多东西，即使我选择了不同的安装位置。

其中一部分是一些目录`~/canopy`，其中包含用于脚本等的空文件夹。 - 好的，即使我也愿意为此选择不同的位置。

另一部分是`~/Enthought/Canopy_64bit`二进制文件和库。我不希望这些在我的（备份的）主目录中。

我如何将这些东西移到其他地方？我可以看到我的条目中有一个条目`~/.bash_profile`，至少还有一个`~/Enthought/Canopy_64bit/User/pyvenv.cfg`指向该位置的条目。但是还有更多吗？

这应该在安装过程中成为一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:04:31.117

尽管有一种方法可以做到这一点，但没有官方支持的方法。我们不愿意在堆栈溢出之类的公共存档中记录此解决方法。如果可以，请通过 Canopy 的帮助菜单向我们发送“建议”，我们将提供解决方法。

# javascript - 从后面的 ASP.net 代码调用 JavaScript 函数

> ID：16056777
> 
> 赞同：2
> 
> 时间：2013-04-17T09:45:26.300
> 
> 标签：javascript, asp.net, pageload

我正在尝试从 Code behind 中调用 JavaScript 函数，但到目前为止还没有运气。我尝试在`Page_Load`方法中添加以下片段。

我试过如下

```
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "foo", "alert('test22222')", true); 
```

也如下

```
Page.ClientScript.RegisterStartupScript(Type.GetType("System.String"), "addScript", "alert('test22222');", true); 
```

没有一个对我有用。我在这里有什么遗漏吗？我想在加载页面之前显示警报消息。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:57:29.803

你错过了一个; 在你的代码中。试试这个它对我有用。

但我会建议`ScriptManager.RegisterStartupScript`过度，`Page.ClientScript.RegisterStartupScript`因为第一个是为 AJAX 调用而设计的。这甚至适用于部分页面回发。

```
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "foo", "alert('test22222');", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:47:07.473

你可以在 page_prerender 事件中实现它

```
 protected void page_prerender( object sender, EventArgs e )
{
         your code here;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:54:53.357

这将起作用。您忘记了警报末尾的分号：

```
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "foo", "alert('test22222');", true); 
```

# android - 当项目中有链接时，ListView setOnItemClickListener 不会触发

> ID：16056778
> 
> 赞同：5
> 
> 时间：2013-04-17T09:45:35.947
> 
> 标签：android, twitter, android-listview

我正在努力将 Twitter 集成到一个应用程序中，虽然一切正常，`setOnItemClickListener()`但当我遇到`ListView` `item`中有一个链接时，我被难住了。当其中`item`没有链接（URL）时，它工作得很好。

单击 URL 本身会在浏览器中打开网页。

请参阅在帖子末尾添加的屏幕截图作为参考。

这是一种习惯`ListView`，采用`BaseAdapter`. 我不确定要放入哪段代码，但在被指向这里的人们可能需要的代码块时，我会立即添加它。

需要忽略项目中的链接（URL）背后的想法是提供一种功能，当用户点击一个时，它会显示推文的详细信息。类似于 Twitter Android 应用程序所做的事情。

那么我该怎么做才能`setOnItemClickListener()`忽略项目中的链接？

**更新：**

好的。所以我不确定它是否与这个问题相关，但是，结合 SO 的一些解决方案导致我进入[TweetLanes](https://github.com/chrislacy/TweetLanes)开源项目，我已经成功地完成了一些工作。但不幸的是，它并没有解决我的主要问题。

如何`setOnItemClickListener()`忽略项目中的链接，以便我可以单击它并在另一个活动中显示详细信息，但是，当我单击链接时，不会触发`setOnItemClickListener()`？我每次尝试都会得到部分解决方案。但有时，当我点击 a 时`link`，`setOnItemClickListener()`也会触发。

这是目前流程的样子：

![在此处输入图像描述](https://i.stack.imgur.com/kwwPC.png)

在前两个屏幕截图中，它可以正常工作。毕竟没有点击链接。

然而，在底部两个中，当我单击**@ibnlive**链接时，它会显示用户的个人资料 ( *@ibnlive* )。这部分来自 TweetLanes 源。问题是，点击监听器也被触发了。这是我正在尝试的解决方案之一。在这种情况下，我已将 注释掉`setOnItemClickListener()`并`OnClickListener()`在`TextView`. 这是迄今为止取得部分成功的一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:00:11.670

In order to support listItem's click events and supporting links inside records, you should set `android:descendantFocusability="blocksDescendants"` at the top-level layout of your list-record's xml.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:50:18.620

那是因为链接是可点击的，而listItem也是可点击的，所以在这里，链接成为焦点，因此listItem不能被点击。

你只需要设置：

设置所有项目`android:focusable="false"`

和`android:focusableInTouchMode="false"`列表项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:33:17.970

您可能想看看[babay 在 ListView 上的回答：TextView with LinkMovementMethod 使列表项不可点击？](https://stackoverflow.com/a/14093635/833622)

他提出了一个 TextView，它基本上通过引入不同的方式来解决这个问题`LinkMovementMethod`：

```
public static class LocalLinkMovementMethod extends LinkMovementMethod{
    static LocalLinkMovementMethod sInstance;

    public static LocalLinkMovementMethod getInstance() {
        if (sInstance == null)
            sInstance = new LocalLinkMovementMethod();

        return sInstance;
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) {
        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off, ClickableSpan.class);

            if (link.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    link[0].onClick(widget);
                } else if (action == MotionEvent.ACTION_DOWN) {
                    Selection.setSelection(buffer,
                            buffer.getSpanStart(link[0]),
                            buffer.getSpanEnd(link[0]));
                }

                if (widget instanceof TextViewFixTouchConsume){
                    ((TextViewFixTouchConsume) widget).linkHit = true;
                }
                return true;
            } else {
                Selection.removeSelection(buffer);
                Touch.onTouchEvent(widget, buffer, event);
                return false;
            }
        }
        return Touch.onTouchEvent(widget, buffer, event);
    }
} 
```

* * *

**解决方案~~未测试~~**

基于此，我建议您`TwitterLinkify.java`像这样修复文件（设置链接移动的函数）：

```
private static final void addLinkMovementMethod(TextView t) {
    MovementMethod m = t.getMovementMethod();

    if ((m == null) || !(m instanceof LocalLinkMovementMethod)) {
        if (t.getLinksClickable()) {
            t.setMovementMethod(LocalLinkMovementMethod.getInstance());
        }
    }
} 
```

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T05:40:48.057

您是否尝试过下一个代码（基于[此链接](https://stackoverflow.com/a/7525474/878126)）：

```
textView.setMovementMethod(null); 
```

?

* * *

编辑：这是一个可行的解决方案：

```
textView.setOnTouchListener(new OnTouchListener() 
    {
    @Override
    public boolean onTouch(final View v, final MotionEvent event) 
        {
        if (event.getAction() == MotionEvent.ACTION_UP)
          {
          // <=handle clicking here
          }
        return true;
        }
   }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T05:22:09.953

请看看这个。

```
text_url.setText(Html.fromHtml(url.toString().trim()));
        Linkify.addLinks(text_url, Linkify.ALL); 
```

这是我用来在列表视图中显示 url 的行。如果您在 getview 中执行上述操作，链接将自动变为蓝色并带有下划线。如果您单击该链接，它将自动打开浏览器。

希望这会帮助你。

**编辑**

嗨，看看这个编辑过的答案。我已经验证过了。它将打开正确的 url。希望这会帮助你。

```
 String url="www.google.com";
        String name="@sampleuser";  
     textview1.setText(Html.fromHtml("<a href='http://"+url+"'>http://"+name+"</a>")); 
     textview1.setMovementMethod(LinkMovementMethod.getInstance()); 
```

**编辑 2** 嗨，看看这个样本。希望这会帮助你 。

```
package com.example.listwithclick;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.text.Html;
import android.text.method.LinkMovementMethod;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {

    ListView listView1;
    Activity activity;
    ArrayList<String>urls=new ArrayList<String>();
    ArrayList<String>name=new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        activity=this;

        urls.add("www.google.com");
        name.add("@googleuser");

        urls.add("www.yahoo.com");
        name.add("@yahoouser");
        urls.add("www.facebook.com");
        name.add("@facebookuser");
        urls.add("www.linkedin.com");
        name.add("@linkedinuser");

        listView1=(ListView)findViewById(R.id.listView1);
        listView1.setAdapter(new MyAddapter(MainActivity.this));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
     class MyAddapter extends BaseAdapter {
            Context rContext;
            private LayoutInflater rInflater;

            public MyAddapter(Context c) {

                rInflater = LayoutInflater.from(c);

                rContext = c;

            }      

            public MyAddapter(Activity imagebinding) {
                // TODO Auto-generated constructor stub

                activity = imagebinding;        

                rContext = imagebinding;
                rInflater = LayoutInflater.from(imagebinding);
                rContext = imagebinding;
                rInflater = (LayoutInflater) activity
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub  

                return urls.size();
            }

            @Override
            public Object getItem(int arg0) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public View getView(final int position, View convertView,
                    ViewGroup parent) {
                // TODO Auto-generated method stub
                convertView = rInflater.inflate(R.layout.child, null);
                final MyDat mydat = new MyDat();                

                mydat.textview = (TextView) convertView.findViewById(R.id.textview_name);
                mydat.textview.setText(Html.fromHtml("<a href='http://"+urls.get(position).toString()+"'>"+name.get(position).toString()+"</a>")); 
                mydat.textview.setMovementMethod(LinkMovementMethod.getInstance());

                return convertView;
            }

            class MyDat {

                TextView  textview;

            }

        }

} 
```

# csv - 将 .sql3 和 csv 文件导入 mysql 工作台

> ID：16056782
> 
> 赞同：1
> 
> 时间：2013-04-17T09:45:49.173
> 
> 标签：csv, ubuntu-12.04, mysql-workbench

这可能是个愚蠢的问题。但我无法在任何地方找到这个问题的答案。

我有一个 .sql3 和一个 .csv 文件，我想使用这些文件中的任何一个在我的 mysql 工作台中导入功能。

现在我的mysql中没有任何表格和shemas

当我在我的工作台中导入我的 demo.csv 或 demo.sql3 文件时，它显示如下错误

第 1 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“SQLite 格式 3”附近使用正确的语法

我在ubuntu

谁能帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:46:09.717

将 csv 数据读入 MySQL [LOAD DATA](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)可能是最好的方法。MySQL WOrkbench 中有一个用于导入 CSV 数据的插件，但它需要现有的结果集。

# java - 关于通过 java drive api 下载文件

> ID：16056786
> 
> 赞同：0
> 
> 时间：2013-04-17T09:45:51.793
> 
> 标签：java, google-drive-api

我使用java驱动api中的“get”方法，我可以得到输入流。但是当我使用输入流创建文件时，我无法打开文件。它喜欢文件坏了。

```
private static String fileurl = "C:\\googletest\\drive\\";

public static void newFile(String filetitle, InputStream stream) throws IOException {
    String filepath = fileurl + filetitle;      
    BufferedInputStream bufferedInputStream=new BufferedInputStream(stream);
    byte[] buffer = new byte[bufferedInputStream.available()];

    File file = new File(filepath);
    if (!file.exists()) {
        file.getParentFile().mkdirs();

        BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(new FileOutputStream(filepath));
          while( bufferedInputStream.read(buffer) != -1) { 
              bufferedOutputStream.write(buffer);
      }  
          bufferedOutputStream.flush();
          bufferedOutputStream.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:05:07.003

首先，`C:\googletest\drive\`不是 URL。它是一个文件系统路径名。

接下来，以下内容可能不会像您认为的那样：

```
 byte[] buffer = new byte[bufferedInputStream.available()]; 
```

问题是`available()`调用可以返回零......对于非空流。返回的值`available()`是对当前可读取的字节数的*估计*......现在。这不一定是流长度......或与之相关的任何东西。事实上，某些设备的设备驱动程序*始终*返回零，即使有数据要读取。

最后，这是错误的：

```
 while( bufferedInputStream.read(buffer) != -1) { 
          bufferedOutputStream.write(buffer); 
```

您假设`read`返回`-1`意味着它*填充*了缓冲区。事实并非如此。任何一个`read`调用都可能返回部分已满的缓冲区。但是随后您将整个缓冲区内容写入输出流......包括先前读取的“垃圾”。

* * *

第二个和第三个问题中的一个或两个都可能导致文件损坏。事实上，第三个是*可能*的。

# html - 当给出屏幕尺寸重定向命令时允许用户访问主站点（HTML/.asp 经典）

> ID：16056791
> 
> 赞同：0
> 
> 时间：2013-04-17T09:46:09.390
> 
> 标签：html, redirect, mobile, asp-classic

我有使用 .asp 代码的主网站，并且我有一段代码根据用户的屏幕大小将用户重定向到移动网站。代码写在下面。

```
<script type="text/javascript">
<!--
if (screen.width <= 1024) {
document.location = "mobilewebsite.html";
}
//-->
</script> 
```

这很好用，我也有类似的东西。移动网站在页面的页脚有一个链接，如果他们愿意，他们可以选择返回桌面网站。但后来我意识到上面写在主网站上的代码会再次将用户重定向回移动网站。移动网站使用 HTML/CSS 制作，主网站使用 .asp 经典制作。我想知道是否有办法实现这一点，以便用户可以选择留在主网站上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:08:07.763

您可以在 Classic ASP 中使用会话对象来隐藏您的 javascript 重定向

例如

```
<% session("usemainsite") = Request("usemainsite")
if session("usemainsite") <> 1 then %>

<script type="text/javascript">
<!--
if (screen.width <= 1024) {
document.location = "mobilewebsite.html";
}
//-->
</script>

<% end if %> 
```

您可以在移动网站的链接中使用查询字符串值将会话对象设置为 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T00:01:41.657

而不是 request("cmd") 你需要把 request.querystring("cmd")

# python - Python win32com.client.Dispatch 循环遍历Word文档并导出为PDF；发生下一个循环时失败

> ID：16056793
> 
> 赞同：3
> 
> 时间：2013-04-17T09:46:11.413
> 
> 标签：python, pdf, docx, win32com, comtypes

基于此处的脚本：[.doc to pdf using python](https://stackoverflow.com/questions/6011115/doc-to-pdf-using-python)我有一个半工作脚本，可以将 .docx 文件从 C:\Export_to_pdf 导出到 pdf 到一个新文件夹中。

问题是它通过了前几个文件，然后失败了：

```
(-2147352567, 'Exception occurred.', (0, u'Microsoft Word', u'Command failed', u'wdmain11.chm', 36966, -2146824090), None) 
```

这显然是一个无用的一般错误消息。如果我使用 pdb 慢慢调试它，我可以遍历所有文件并成功导出。如果我还密切关注 Windows 任务管理器中的进程，我可以看到 WINWORD 启动然后在它应该的时候结束，但是对于较大的文件，内存使用需要更长的时间才能稳定下来。这让我认为，当 WINWORD 在 client.Dispatch 对象上调用下一个方法之前没有时间初始化或退出时，脚本会出错。

**win32com 或 comtypes 有没有办法识别并等待进程开始或完成？**

我的脚本：

```
import os
from win32com import client

folder = "C:\\Export_to_pdf"
file_type = 'docx'
out_folder = folder + "\\PDF"

os.chdir(folder)

if not os.path.exists(out_folder):
    print 'Creating output folder...'
    os.makedirs(out_folder)
    print out_folder, 'created.'
else:
    print out_folder, 'already exists.\n'

for files in os.listdir("."):
    if files.endswith(".docx"):
        print files

print '\n\n'

try:
    for files in os.listdir("."):
        if files.endswith(".docx"):
            out_name = files.replace(file_type, r"pdf")
            in_file = os.path.abspath(folder + "\\" + files)
            out_file = os.path.abspath(out_folder + "\\" + out_name)
            word = client.Dispatch("Word.Application")
            doc = word.Documents.Open(in_file)
            print 'Exporting', out_file
            doc.SaveAs(out_file, FileFormat=17)
            doc.Close()
            word.Quit()
except Exception, e:
    print e 
```

工作代码 - 只是用这个替换了 try 块。注意将 DispatchEx 语句移到 for 循环之外，并将 word.Quit() 移到 finally 语句以确保它关闭。

```
try:
    word = client.DispatchEx("Word.Application")
    for files in os.listdir("."):
        if files.endswith(".docx") or files.endswith('doc'):
            out_name = files.replace(file_type, r"pdf")
            in_file = os.path.abspath(folder + "\\" + files)
            out_file = os.path.abspath(out_folder + "\\" + out_name)
            doc = word.Documents.Open(in_file)
            print 'Exporting', out_file
            doc.SaveAs(out_file, FileFormat=17)
            doc.Close()
except Exception, e:
    print e
finally:
    word.Quit() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T19:53:10.530

这可能不是问题，但分派一个单独的单词实例然后在每次迭代中关闭它是不必要的，这可能是您看到的链内存问题的原因。您只需打开实例一次，在该实例中您可以打开和关闭您需要的所有文档。如下所示：

```
try:
    word = client.DispatchEx("Word.Application") # Using DispatchEx for an entirely new Word instance
    word.Visible = True # Added this in here so you can see what I'm talking about with the movement of the dispatch and Quit lines. 
    for files in os.listdir("."):
        if files.endswith(".docx"):
            out_name = files.replace(file_type, r"pdf")
            in_file = os.path.abspath(folder + "\\" + files)
            out_file = os.path.abspath(out_folder + "\\" + out_name)
            doc = word.Documents.Open(in_file)
            print 'Exporting', out_file
            doc.SaveAs(out_file, FileFormat=17)
            doc.Close()

    word.Quit()

except Exception, e: 
```

注意：在打开 win32com 实例和文件时要小心使用 try/except，就像打开它们一样，并且在关闭它之前发生错误，它不会关闭（因为它尚未到达该命令）。

此外，您可能需要考虑使用 DispatchEx 而不仅仅是 Dispatch。DispatchEx 打开一个新实例（一个全新的 .exe），而我相信仅使用 Dispatch 会尝试寻找一个打开的实例来锁定，但是这方面的文档是模糊的。如果实际上您想要多个实例（即在一个文件中打开一个文件，在另一个文件中打开一个文件），请使用 DispatchEx。

至于等待，当需要更多时间时，程序应该在这条线上等待，但我不知道。

哦！`word.Visible = True`如果您希望能够看到实际打开的实例和文件，也可以使用（可能有助于直观地查看问题，但在修复时将其关闭，因为它会减慢速度；-)）。

# nsis - 如何在默认情况下取消选中 NSIS 中的部分

> ID：16056799
> 
> 赞同：11
> 
> 时间：2013-04-17T09:46:21.793
> 
> 标签：nsis

我有一个 NSIS 安装程序，这里有一些用户可以选择安装的组件：

```
Section "Modules" SecModules
  SetOutPath "$INSTDIR"
  CreateDirectory $INSTDIR\modules
  ...
SectionEnd

Section "Freenode util" SecFreenode
  SetOutPath "$INSTDIR"
  CreateDirectory $INSTDIR\modules
  ...
SectionEnd 
```

如何使第二个未选中？默认情况下，它们都被选中

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T09:53:52.333

```
; unselected because it is /o
Section /o "Modules" SecModules
  SetOutPath "$INSTDIR"
  CreateDirectory $INSTDIR\modules
  ...
SectionEnd

; selected
Section "Freenode util" SecFreenode
  SetOutPath "$INSTDIR"
  CreateDirectory $INSTDIR\modules
  ...
SectionEnd 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T10:32:41.677

除了[Section /o](http://nsis.sourceforge.net/Reference/Section)，您还可以使用[SectionIn](http://nsis.sourceforge.net/Reference/SectionIn)来控制默认部分。[如果您有多个部分并且您计划提供多种安装类型（请参阅InstType](http://nsis.sourceforge.net/Reference/InstType)），则后者可能很有用。[最后，您可以使用SectionSetFlags](http://nsis.sourceforge.net/Reference/SectionSetFlags)根据逻辑控制部分的状态。

# c - 在 NUMA 机器上使用 CUDA 进行多 GPU 编程

> ID：16056800
> 
> 赞同：3
> 
> 时间：2013-04-17T09:46:22.210
> 
> 标签：c, multithreading, cuda, multi-gpu

我目前将算法移植到两个 GPU。硬件具有以下设置：

*   两个 CPU 作为一个 NUMA 系统，因此主内存被拆分到两个 NUMA 节点。
*   每个 GPU 都物理连接到其中一个 GPU。（每个 PCIe 控制器有一个 GPU）

我在主机上创建了两个线程来控制 GPU。每个线程都绑定到一个 NUMA 节点，即两个线程中的每一个都在一个 CPU 插槽上运行。如何确定 GPU 的数量以便我可以选择直接连接的 GPU 使用`cudaSetDevice()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:10:08.503

正如我在评论中提到的，这是一种 CPU GPU 亲和力。这是我一起破解的 bash 脚本。我相信它将在 RHEL/CentOS 6.x 操作系统上提供有用的结果。它可能无法在许多较旧的或其他 linux 发行版上正常工作。您可以像这样运行脚本：

```
./gpuaffinity > out.txt 
```

然后，您可以读取`out.txt`程序以确定哪些逻辑 CPU 内核对应于哪些 GPU。例如，在具有两个 6 核处理器和 4 个 GPU 的 NUMA Sandy Bridge 系统上，示例输出可能如下所示：

```
0     03f
1     03f
2     fc0
3     fc0 
```

该系统有 4 个 GPU，编号从 0 到 3。每个 GPU 编号后跟一个“核心掩码”。核心掩码对应于“接近”特定 GPU 的核心，表示为二进制掩码。因此，对于 GPU 0 和 1，系统中的前 6 个逻辑内核（03f 二进制掩码）最接近。对于 GPU 2 和 3，系统中的后 6 个逻辑内核（fc0 二进制掩码）最接近。

您可以在程序中读取文件，也可以使用脚本中说明的逻辑在程序中执行相同的功能。

您还可以像这样调用脚本：

```
./gpuaffinity -v 
```

这将给出更详细的输出。

这是 bash 脚本：

```
#!/bin/bash
#this script will output a listing of each GPU and it's CPU core affinity mask
file="/proc/driver/nvidia/gpus/0/information"
if [ ! -e $file ]; then
  echo "Unable to locate any GPUs!"
else
  gpu_num=0
  file="/proc/driver/nvidia/gpus/$gpu_num/information"
  if [ "-v" == "$1" ]; then echo "GPU:  CPU CORE AFFINITY MASK: PCI:"; fi
  while [ -e $file ]
  do
    line=`grep "Bus Location" $file | { read line; echo $line; }`
    pcibdf=${line:14}
    pcibd=${line:14:7}
    file2="/sys/class/pci_bus/$pcibd/cpuaffinity"
    read line2 < $file2
    if [ "-v" == "$1" ]; then
      echo " $gpu_num     $line2                  $pcibdf"
    else
      echo " $gpu_num     $line2 "
    fi
    gpu_num=`expr $gpu_num + 1`
    file="/proc/driver/nvidia/gpus/$gpu_num/information"
  done
fi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-02T01:18:26.893

nvidia-smi 工具可以告诉 NUMA 机器上的拓扑。

```
% nvidia-smi topo -m
        GPU0    GPU1    GPU2    GPU3    CPU Affinity
GPU0     X      PHB     SOC     SOC     0-5
GPU1    PHB      X      SOC     SOC     0-5
GPU2    SOC     SOC      X      PHB     6-11
GPU3    SOC     SOC     PHB      X      6-11

Legend:

  X   = Self
  SOC  = Connection traversing PCIe as well as the SMP link between CPU sockets(e.g. QPI)
  PHB  = Connection traversing PCIe as well as a PCIe Host Bridge (typically the CPU)
  PXB  = Connection traversing multiple PCIe switches (without traversing the PCIe Host Bridge)
  PIX  = Connection traversing a single PCIe switch
  NV#  = Connection traversing a bonded set of # NVLinks 
```

# jquery - 无法让 Nivo Slider 工作

> ID：16056801
> 
> 赞同：0
> 
> 时间：2013-04-17T09:46:25.513
> 
> 标签：jquery, html, nivo-slider

我似乎无法让 nivo 滑块工作。我已按照他们网站上的说明进行操作。

这是我的`index.html`。

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" type="text/css"/>
        <link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="jquery.nivo.slider.pack.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(window).load(function() {
                $('#slider').nivoSlider();
            });
        </script>
    </head>
    <body>
        <div class="slider-wrapper">
            <div id="slider" class="nivoSlider">
                <img src="images/nemo.jpg" alt="" />
                <a href="http://dev7studios.com"><img src="images/up.jpg" alt="" title="#htmlcaption" /></a>
                <img src="images/toystory.jpg" alt="" title="This is an example of a caption" />
                <img src="images/walle.jpg" alt="" />
            </div>
        </div>
        <div id="htmlcaption" class="nivo-html-caption">
            <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>.
        </div>
    </body>
</html> 
```

这是我的`style.css`。

```
.nivoSlider {
    position:relative;
    background:url(images/loading.gif) no-repeat 50% 50%;
}
.nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
}
.nivoSlider a {
    border:0;
    display:block;
} 
```

我不知道为什么它不起作用。我也尝试过引用最新版本的 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:19:56.340

当您使用 jquery 并且您不明白为什么它不起作用时，请使用 webdeveloper 工具。

如果您使用的是使用 firebug 插件，或者如果您使用 chrome，请使用检查元素工具。他们做什么他们会告诉你错误。通过这种方式，您可以了解正在发生的事情，并且可以提出更好的问题。

# c# - 如何在图像中定位对象？

> ID：16056812
> 
> 赞同：1
> 
> 时间：2013-04-17T09:46:50.803
> 
> 标签：c#, opencv, image-processing, aforge, emgucv

我有一张包含一组对象的黑白图像。我希望能够找到这些对象。我几乎可以肯定图像中的对象与我的集合中的样本大小相同，形状几乎完全相同。

这样做的一种方法是在图像上一个接一个地移动我的集合中的对象，直到我的图像中的像素与示例对象中的像素之间得到合理的匹配。我可以为此编写自己的代码，但我不想重新发明轮子。AForge 或 EMGU/OpenCV 中是否有任何东西可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:50:46.393

您可以使用 openCV 的 Match 模板功能。此函数采用模板“您的对象集”并将它们与您认为相同对象所在的图像进行比较。

[链接到关于 matchtemplate 的 opencv 文档](http://opencv.willowgarage.com/documentation/object_detection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:49:07.840

您在 openCV 中有[matchTemplate](http://docs.opencv.org/modules/imgproc/doc/object_detection.html?highlight=matchtemplate#matchtemplate)基本上可以按照您所说的进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:51:10.243

您应该使用匹配，请使用以下示例代码：

```
// Object_Matching_surf.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <opencv2/nonfree/features2d.hpp>
using namespace cv;
#include <stdio.h>
#include "stdafx.h"
#include <iostream>
#include"cv.h"
#include"highgui.h"
#include "opencv2/core/core.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"

using namespace cv;

int object_detection(Mat, Mat, char*);
Mat rotateImage(const Mat&, double);
int main()
{
    char inputImgName[50];
    char tmplateName[50];
    char outputImgName[50];

    for (int i=1; i<10; i++)
    {
        sprintf(inputImgName, "%s%d%s","C:/Matches1/img",i,".png");
        sprintf(tmplateName, "%s%d%s","C:/Matches1/gripper",i,".png");
        sprintf(outputImgName, "%s%d%s","C:/Matches1/matches_img",i,".png");

    Mat templateImage = imread(tmplateName);//, CV_LOAD_IMAGE_GRAYSCALE );

    Mat inputImage = imread(inputImgName);//, CV_LOAD_IMAGE_GRAYSCALE );
    char * outPutImage = outputImgName;

    object_detection (templateImage, inputImage, outPutImage);

    }

    //Resize the template image
    /*Mat newTemlate;
    resize(templateImage,newTemlate, Size(100,100));*/

    //Rotate the template
    /*Mat rotatedTemplate  = rotateImage(templateImage, 90.0);
    imwrite("C:/Matches0/rotated.jpg" ,rotatedTemplate);*/

    return 0;
}

int object_detection(Mat templateImage, Mat inputImage, char* outPutImage)
{
    //Detect the keypoints using SURF Detector
    int minHessian = 500;

    SiftFeatureDetector detector( minHessian );
    std::vector<KeyPoint> kp_object;

    detector.detect( templateImage, kp_object );

    //Calculate descriptors (feature vectors)
    SiftDescriptorExtractor extractor;
    Mat des_object;

    extractor.compute( templateImage, kp_object, des_object );

    FlannBasedMatcher matcher;

    std::vector<Point2f> obj_corners(4);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( templateImage.cols, 0 );
    obj_corners[2] = cvPoint( templateImage.cols, templateImage.rows );
    obj_corners[3] = cvPoint( 0, templateImage.rows );

        Mat des_image, img_matches;
        std::vector<KeyPoint> kp_image;
        std::vector<vector<DMatch > > matches;
        std::vector<DMatch > good_matches;
        std::vector<Point2f> obj;
        std::vector<Point2f> scene;
        std::vector<Point2f> scene_corners(4);
        Mat H;

        detector.detect( inputImage, kp_image );
        extractor.compute( inputImage, kp_image, des_image );

        matcher.knnMatch(des_object, des_image, matches, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }

        //Draw only "good" matches
        drawMatches( templateImage, kp_object, inputImage, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

        if (good_matches.size() >= 4)
        {
            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
            }

            H = findHomography( obj, scene, CV_RANSAC );

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( img_matches, scene_corners[0] + Point2f( templateImage.cols, 0), scene_corners[1] + Point2f( templateImage.cols, 0), Scalar(0, 255, 0), 4 );
            line( img_matches, scene_corners[1] + Point2f( templateImage.cols, 0), scene_corners[2] + Point2f( templateImage.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[2] + Point2f( templateImage.cols, 0), scene_corners[3] + Point2f( templateImage.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[3] + Point2f( templateImage.cols, 0), scene_corners[0] + Point2f( templateImage.cols, 0), Scalar( 0, 255, 0), 4 );
        }

        //Computing the center
        Point2f p1 = scene_corners[0] + Point2f( templateImage.cols, 0);
        Point2f p2 = scene_corners[1] + Point2f( templateImage.cols, 0);
        Point2f p3 = scene_corners[2] + Point2f( templateImage.cols, 0);
        Point2f p4 = scene_corners[3] + Point2f( templateImage.cols, 0);
        Point2f center = (p3*0.5+p1*0.5);

        char p1text[20];
        sprintf(p1text, "(%d,%d)",(int)p1.x, (int)p1.y );
        putText(img_matches, p1text, p1, FONT_HERSHEY_SIMPLEX, 0.3, cvScalar(255, 255, 255, 0));

        char p2text[20];
        sprintf(p2text, "(%d,%d)",(int)p2.x, (int)p2.y );
        putText(img_matches, p2text, p2, FONT_HERSHEY_SIMPLEX, 0.3, cvScalar(255, 255, 255, 0));

        char p3text[20];
        sprintf(p3text, "(%d,%d)",(int)p3.x, (int)p3.y );
        putText(img_matches, p3text, p3, FONT_HERSHEY_SIMPLEX, 0.3, cvScalar(255, 255, 255, 0));

        char p4text[20];
        sprintf(p4text, "(%d,%d)",(int)p4.x, (int)p4.y );
        putText(img_matches, p4text, p4, FONT_HERSHEY_SIMPLEX, 0.3, cvScalar(255, 255, 255, 0));

        char centertext[20];
        sprintf(centertext, "(%d,%d)",(int)center.x, (int)center.y );
        putText(img_matches, centertext, center, FONT_HERSHEY_SIMPLEX, 0.3, cvScalar(255, 0, 0, 250));

        system("pause");

        /* Save the image of matches */
        imwrite(outPutImage, img_matches);

    return 0;
} 
```

# liferay - Liferay MVCPortlet 连接 FORM actionURL 和 action

> ID：16056817
> 
> 赞同：2
> 
> 时间：2013-04-17T09:47:07.157
> 
> 标签：liferay, liferay-6

我是 Liferay 的新用户。我正在尝试将我的表单连接到`view.jsp`：

```
<portlet:actionURL name="addRule" var="addRuleURL"/>
<aui:form action="<%= addRuleURL.toString() %>" method="post">
    ..... 
```

使用`ActionUtil.java`（使用 Hibernate - Service Builder）中的操作：

```
@ProcessAction(name = "addRule")
public void addRule(ActionRequest request, ActionResponse response) 
```

但我不能，Eclipse 说：

```
java.lang.NoSuchMethodException: com.liferay.util.bridges.mvc.MVCPortlet.addRule(javax.portlet.ActionRequest, javax.portlet.ActionResponse) 
```

我该怎么做才能以正确的方式连接我的表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:57:25.117

我认为您遇到了这个问题，因为您没有将您的 portlet 包含在 中`portlet.xml`，因此 Liferay 最终使用了没有该`addRule`方法的默认 MVCPortlet 类。因此，请确保您`portlet.xml`的自定义 MVC portlet 中有类似的内容：

```
<portlet-name>yourmvcportlet</portlet-name>
<display-name>Your MVC Portlet</display-name>
<portlet-class>your.portlet.package.YourMVCPortlet</portlet-class>
<init-param>
  <name>view-jsp</name>
  <value>/jsp/view.jsp</value>
</init-param> 
```

# vba - 在 Ms-Access 中将标签放置在组合框上

> ID：16056819
> 
> 赞同：0
> 
> 时间：2013-04-17T09:47:07.547
> 
> 标签：vba, ms-access, combobox

背景：

我试图在 Ms-Access 中放置一个标签，该标签用作组合框上的按钮。用户将从组合框列表中进行选择，如果他们想删除他们的选择，他们可以单击标签以清除选择。

问题：

是否可以让标签显示在组合上方？似乎标签是在组合后面发送的，即使我专门将它发送到 from 等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:27:56.087

我不会创建覆盖标签来清除选择，而是创建一个实际的按钮。您将在设计模式下将按钮和组合框堆叠在一起，但在格式属性中将按钮可见性设置为“否”。假设您调用组合框“cmbSelect”和清除按钮“cmdClear”，使用以下命令显示选择组合框后的按钮：

```
Private Sub cmbSelect_AfterUpdate

Me.cmdClear.Visible = True

End Sub 
```

单击按钮后，以下代码将清除表中的数据：

```
Private Sub cmdClear_Click()

DoCmd.SetWarnings False

'Deletes record from your table
Dim Delete As String
Delete = "DELETE * FROM [TableName] WHERE (([TableName].KeyField)='" & KeyField & "')"
DoCmd.RunSQL Delete

DoCmd.SetWarnings True

End Sub 
```

您还可以通过对每个字段运行重新查询而不是使用删除字符串来重新查询表单。然后，您可以为“更新后”按钮构建代码，使按钮再次不可见，并允许您从组合框中选择一个新条目。有很多可能性，但这应该让你开始。如果您需要更多解释或帮助，请告诉我。

# extjs - 启用和禁用文本字段，以便用户有一个文本字段来在 extjs 中输入数据

> ID：16056826
> 
> 赞同：0
> 
> 时间：2013-04-17T09:47:26.730
> 
> 标签：extjs, extjs4, extjs-mvc

> **启用或禁用文本字段，以便用户只能启用一个文本字段来输入数据。**
> 
> 解释 ：

如果它们是两个文本字段：**textfield1**，**textfield2**。如果用户希望在**textfield1**中输入数据，则应该禁用**textfield2 。**在这种情况下：用户在**textfield1**中输入数据并希望输入**textfield2**而不是**textfield1 ，然后应该从****textfield1**中清除数据，并且应该禁用它并**启用 textfield2**。

> **示例代码**：我不知道使用哪些事件侦听器来获取此功能。

```
{
    xtype: 'textfield',
    width: 215,
    fieldLabel: 'Source1',
    id: 'textfield1',
    listeners: {

    }
}, {
    xtype: 'textfield',
    id: 'textfield2',
    width: 215,
    fieldLabel: 'Source2',
    listeners: {

    }
} 
```

> 请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:55:26.393

```
 Ext.require([
            'Ext.form.*'
        ]);

        Ext.onReady(function() {

            var formPanel = Ext.create('Ext.form.Panel', {
                frame: true,
                title: 'Form Fields',
                renderTo: Ext.getBody(),
                width: 340,
                bodyPadding: 5,

                fieldDefaults: {
                    labelAlign: 'left',
                    labelWidth: 90,
                    anchor: '100%'
                },

                items: [{
                        id: 'ftf1',
                        xtype: 'textfield',
                        name: 'textfield1',
                        fieldLabel: 'Text field1',
                        value: ''
                    },{
                        id: 'ftf2',
                        xtype: 'textfield',
                        name: 'textfield2',
                        fieldLabel: 'Text field2',
                        value: ''                            
                    }]
            });

            var ftf1 = Ext.getCmp('ftf1');
            ftf1.on('change', function(ftf1, newValue, oldValue, eOpts ) {
                if (newValue.valueOf()!='') {
                    Ext.getCmp('ftf2').disable();
                } else {
                    Ext.getCmp('ftf2').enable();
                }
            })
            var ftf2 = Ext.getCmp('ftf2');
            ftf2.on('change', function(ftf2, newValue, oldValue, eOpts ) {
                if (newValue.valueOf()!='') {
                    Ext.getCmp('ftf1').disable();
                } else {
                    Ext.getCmp('ftf1').enable();
                }
            })

        }); 
```

# scala - 为什么此代码与 Enumerator.fromFile 一起成功运行？

> ID：16056827
> 
> 赞同：3
> 
> 时间：2013-04-17T09:47:29.680
> 
> 标签：scala, playframework, playframework-2.0

我写的文件传输代码如下：

```
val fileContent: Enumerator[Array[Byte]] = Enumerator.fromFile(file)
val size = file.length.toString
file.delete // (1) THE FILE IS TEMPORARY SO SHOULD BE DELETED 
SimpleResult(
 header = ResponseHeader(200, Map(CONTENT_LENGTH -> size, CONTENT_TYPE -> "application/pdf")),
 body = fileContent) 
```

即使文件大小相当大（2.6 MB），此代码也能成功运行，但我很困惑，因为我对 .fromFile() 的理解是 fromCallBack() 的包装，而 SimpleResult 实际上读取了缓冲的文件，但文件是在此之前删除。

我的简单假设是 java.io.File.delete 等到块读取完成后文件被释放，但我从未听说过 Java File 类的过程，或者 .fromFile() 已经将所有行加载到 Enumerator例如，但我认为它违反了 fromCallBack() 规范。

有人知道这个机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:43:08.410

我猜你是在某种 Unix 系统上，例如 OSX 或 Linux。

在 Unix:y 系统上，您实际上可以删除打开的文件，任何文件系统条目都只是指向实际文件的链接，打开文件时获得的文件句柄也是如此。在删除最后一个指向它的链接之前，文件内容不会变得无法访问/删除。

因此：在您执行 file.delete 后，它将不再显示在文件系统中，但您仍然可以使用在 Enumerator.fromFile(file) 中创建的 InputStream 读取它，因为它创建了一个文件句柄。（在 Linux 上，您实际上可以通过特殊的 /proc 文件系统找到它，其中包含每个正在运行的进程的文件句柄）

在 Windows 上我认为你会得到一个错误，所以如果它要在多个平台上运行，你可能应该检查在 Windows 上测试你的 webapp。

# objective-c - 在 NSTask 中使用 launchctl

> ID：16056831
> 
> 赞同：4
> 
> 时间：2013-04-17T09:47:51.143
> 
> 标签：objective-c, macos, cocoa, nstask, launchd

我想`launchctl`从应用程序执行。

为此，我使用以下代码，

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/bin/launchctl"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"load ", @"/Users/XYZ/com.XYZ.plist", nil];
[task setArguments: arguments];

[task launch]; 
```

它给了我错误，`launchctl: unknown subcommand "load "`

但是，当我从终端运行命令时，它会正确执行

```
>launchctl load /Users/XYZ/com.XYZ.plist 
```

这里有什么区别，它如何工作 NSTask？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T09:49:25.817

删除`@"load "`.

数组中的每个对象都是任务的单个参数。无需添加空格来分隔参数（或引用参数）。

# d3.js - 可能的 d3 错误：dragend 在没有任何拖动事件的情况下触发

> ID：16056833
> 
> 赞同：3
> 
> 时间：2013-04-17T09:48:00.653
> 
> 标签：d3.js, dom, svg, drag-and-drop, dom-events

我正在使用 d3js 拖动行为。这是[演示](http://jsfiddle.net/epMdE/2/)。当我单击元素时，会触发“拖动”和“拖动”事件。即使我不尝试拖动它们，事件仍然会触发。我想在单击项目时调用其他一些函数。只有当我拖动项目时才应该触发拖动事件。那么如何在这里分离出拖动事件和点击事件。

```
function onDragDrop(dragHandler, dropHandler) {
    var drag = d3.behavior.drag();

drag.on("drag", dragHandler)
.on("dragend", dropHandler);
return drag;
}

  var d = [{ x: 20, y: 20 }];

    var g = d3.select("body").select("svg").data(d).append("g").attr("transform", function (d) { return        "translate(" + d.x + "," + d.y + ")"; })
     .call(onDragDrop(dragmove, dropHandler));

g.append("rect")
.attr("width", 40)
.attr("height", 40)
.attr("stroke", "red")
.attr("fill","transparent")
.attr("x", "20" )
.attr("y", "20")

g.append("text")
.text("Any Text")
.attr("x", "20" )
.attr("y", "20")

function dropHandler(d) {
    alert('dropped');
}

function dragmove(d) {
  alert('dragged');
  d.x += d3.event.dx;
  d.y += d3.event.dy;
  d3.select(this).attr("transform", "translate(" + d.x + "," + d.y + ")");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:49:01.463

## EDIT 3

This is in response to your alternate answer post. The fiddle you posted there does not accurately reflect the solution I was trying to describe. I updated it. The fiddle below should be an example of the correct way to differentiate click and "true" dragend events. Note that we are not using a "click" handler.

[http://jsfiddle.net/V92CF/](http://jsfiddle.net/V92CF/)

## EDIT 2

Ok, I posted this question on the d3 google group and got an answer from Jason Davies. The behavior we're seeing is the intended behavior, it's not a bug. A "click" is simply considered a trival (0 pixels moved) drag, but it is still a drag. Mike, the creator of d3, explains the reasoning here:

[https://github.com/mbostock/d3/pull/368](https://github.com/mbostock/d3/pull/368)

Hence the correct solution to your problem is the one I described as a hack before: You need to detect if a movement has actually been made inside your dragend handler, and then only trigger your logic if it has.

## EDIT

Please note my original answer below is wrong. I had misunderstood the problem. The comments below and my edit to the OP should clarify

## Original Post Below

The only problem here is using `alert`. I changed all the `alert`s to `console.log`s and it works fine:

[http://jsfiddle.net/TrWw3/](http://jsfiddle.net/TrWw3/)

I think it's getting confused with the alerts because as soon as you start dragging, it fires the alert box, which requires you to close it. But then by the time you've closed it the mouse has jumped, and something about the process is messing things up.

Anyway, console.log with chrome or firefox js console open will fix you up nice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:46:47.180

> **由于我没有得到预期的答案，所以我提供了一个替代方案来实现这一点。**希望有人对此有一些答案。再次感谢@jonah。如果您发现这方面的任何更新，请告诉我。这是执行此操作的[替代方法](http://jsfiddle.net/epMdE/3/)。

```
 var d = [{ x: 20, y: 20 }];
  var flag = false;

  var g = d3.select("svg").data(d).append("rect")
    .attr("width", 40)
    .attr("height", 40)
    .attr("stroke", "red")
    .attr("fill","transparent")
    .attr("x", "20" )
    .attr("y", "20")
    .on("click", function(){ console.log('clicked');})
   .call(d3.behavior.drag().on("drag", dragHandler).on("dragend", dropHandler))

 function dropHandler(d) {
       if(flag){
            console.log('dropped');
            flag = false;
        }}

 function dragHandler(d) {
        flag = true;
        console.log('dragged');
        d.x += d3.event.dx;
        d.y += d3.event.dy;
        d3.select(this).attr("transform", "translate(" + d.x + "," + d.y + ")");
    } 
```

# payment-gateway - 在 ccavenue 付款后订单未更新

> ID：16056835
> 
> 赞同：1
> 
> 时间：2013-04-17T09:48:09.440
> 
> 标签：payment-gateway, prestashop, ccavenue

我在我的`prestashop store Version 1.2.5.0`. 我的问题是信用卡交易成功后，返回网站时，购物车项目没有清除，订单也没有更新。我正在使用由 bluezeal.in 开发的 CCavenue 支付网关。在商家帐户设置中，我提供了退货页面 URL 作为 `http://myshop /modules/ccavenue/validation.php`我更新订单表的位置。在 ccavenue.php 页面中，我将返回 url 指定为`$Url ='http://'.htmlspecialchars($_SERVER['HTTP_HOST'], ENT_COMPAT, 'UTF-8').__PS_BASE_URI__.'modules/ccavenue/validation.php'`. 成功交易后，ccavenue 不会向我的 validation.php 页面返回任何内容。即`AuthDesc`，`Order_Id`等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:40:29.360

在商家帐户设置中重新生成密钥后，此问题得到解决。

# php - 如何在 php4 代码中使用 phpunit

> ID：16056838
> 
> 赞同：1
> 
> 时间：2013-04-17T09:48:17.510
> 
> 标签：php, phpunit

我有以下需要运行的示例测试代码（PHP4）`phpunit`：

```
<?php

require_once 'PHPUnit/Framework.php';

class RemoteConnectTest extends PHPUnit_Framework_TestCase
{
  public function setUp(){ }
  public function tearDown(){ }
  public function testConnectionIsValid()
  {
    $this->assertTrue(true);
  }
}
?> 
```

不运行`phpunit`：

```
PHP Fatal error:  require_once(): Failed opening required 'PHPUnit/Framework.php' ... 
```

我需要如何设置我的环境才能使其正常工作（Linux、Ubuntu 12.04）？我需要设置搜索路径吗？改变`php.ini`？我无法自行更改测试代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:44:40.520

答案是使用的版本之间不兼容。较新的版本`phpunit`确实有不同的内部设置（[请参阅此处的 3.7 示例](http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html)），这与旧`phpunit`版本不同。

需要“降级” `phpunit`，例如：

```
sudo pear uninstall phpunit/PHPUnit
sudo pear install phpunit/PHPUnit-3.2.8 
```

例如，安装 3.2.8 版。可以验证文件的存在`Framework.php`：

```
> ls /usr/share/php/PHPUnit
Extensions  Framework  Framework.php  Runner  TextUI  Util 
```

示例代码现在应该可以在调用时工作

```
phpunit SimpleTest.php 
```

（假设类和文件的名称相同[`php`当然不包括]）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:04:38.347

由于您可以从命令行运行 phpunit，因此您很可能已经安装了 PEAR 的源代码（或 composer，这不太可能）。但是框架的路径不在全局包含路径中（或在系统变量 PATH 中）。

PHPUnit 的路径通常在 PEAR 中。而 PEAR 通常在 php 安装附近。您始终可以在终端中使用全局文件搜索

`find / -name 'Framework.php' 2>/dev/null`

你要么需要要么

*   编辑 php.ini 并在 include_path 指令中添加 PHPUnit 的路径
*   require_once 绝对路径
*   使用自动加载（但这仅来自 PHP 5.3）

# sql - 我们可以使用游标进行 UPDATE 查询吗？

> ID：16056844
> 
> 赞同：0
> 
> 时间：2013-04-17T09:48:25.410
> 
> 标签：sql, oracle, dynamic-sql, bind-variables

我们也可以为 UPDATE 查询声明并打开一个游标，还是仅用于 SELECT 查询？

```
 EXEC SQL PREPARE S FROM :query;
   EXEC SQL DECLARE C CURSOR FOR S;
   DbUtilT::set_bind_variables(bind_dp,&paramList);
   EXEC SQL OPEN C USING DESCRIPTOR bind_dp;
   EXEC SQL WHENEVER NOT FOUND GOTO end_update_loop;
   EXEC SQL FETCH C USING DESCRIPTOR bind_dp;
   EXEC SQL COMMIT WORK; 
```

这样好吗？或者我们应该只对 SELECT 语句使用游标，那么我们如何执行 UPDATE 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:06:03.150

如果`query`是这样的：

```
SELECT id FROM mytable WHERE ... FOR UPDATE OF id 
```

那么你可以这样做：

```
...
EXEC SQL FETCH C USING DESCRIPTOR bind_dp;
EXEC SQL UPDATE mytable SET id = <something> WHERE CURRENT OF C; 
```

不过，我不太确定您的意思；您不必使用游标进行更新，您可以执行以下操作：

```
EXEC SQL UPDATE mytable SET id = <something> WHERE ...; 
```

...或等效的准备好的语句。

我完全误解了这个问题吗？

# magento - Google 跟踪代码管理器数据层实施和 Magento 商店

> ID：16056845
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:48:26.037
> 
> 标签：magento, google-analytics, e-commerce, google-tag-manager, data-layer

我正在尝试将 Magento 与 Google Tag Manager 连接起来，特别是为了在 Google Analytics 中跟踪交易和其他电子商务数据。

我安装了这个 GTM [Magento 扩展](http://www.magentocommerce.com/magento-connect/google-tag-manager-6455.html)，它有助于在正确的位置添加 GTM 片段并且 GTM 连接确实有效，但正如您在下面看到的事务数据未定义 - 因为在 GTM 片段之前没有声明任何数据层：

```
utmwv:5.4.1
utms:68
utmn:238730863
utmhn:127.0.0.1
utmt:tran
utmtid：未定义
utmtst：未定义
utmtto：未定义
utmttx：未定义
utmtsp：未定义
utmtci：未定义
utmtrg：未定义
utmtco：未定义
utmcs:UTF-8
utmsr:1280x800
utmvp:842x599
utmsc:24 位
utmul:en-us
utmje:1
utmfl:11.7 r700
utmdt:Magento Commerce
utmhid:1296887870
utmr:0
utmp:/magento/index.php/checkout/onepage/success/
...

```

我现在需要的是在 GTM 片段之前构建和声明 GTM 数据层到 /checkout/onepage/success 页面。问题是我对 Magento 很陌生，我不知道如何做到这一点，我正在寻找一些专门用于此类任务的帮助或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T03:02:21.400

如果您正在使用 magento 并且想要实施转化跟踪或电子商务跟踪，则不需要安装任何扩展程序。您可以在页脚中直接实现 GTM 容器代码 Magento 管理员或使用 FTP。

按照此链接获取总价值[http://www.notesonclick.com/blog/add-adwords-conversion-tracking-on-magento-with-conversion-value/](http://www.notesonclick.com/blog/add-adwords-conversion-tracking-on-magento-with-conversion-value/)

并在success.phtml中添加此代码

```
<?php $order = Mage::getModel('sales/order')->load(Mage::getSingleton('checkout/session')->getLastOrderId()); 
$subtotal = $order->getSubtotal();
$gtotal = $order->getGrandTotal();

?> 
<script>
  var dataLayer=window.dataLayer||[];
  dataLayer.push({'event':'order-placed','orderTotal':<?php echo $gtotal;?>,'orderSubTotal':<?php echo $subtotal;?>});
  </script>
```

对于电子商务跟踪，请关注[http://www.notesonclick.com/blog/add-google-analytics-ecommerce-tracking-in-magento/](http://www.notesonclick.com/blog/add-google-analytics-ecommerce-tracking-in-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T20:25:06.907

我使用通用分析的 Aromicon 扩展，它已经创建了基本的电子商务数据层变量，并且可以开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:00:34.500

为什么不在全局模板中包含 GTM 片段并根据 URI 触发给定标签？

# android - 如何从phonegap设置所有android警报对话框的字体大小

> ID：16056851
> 
> 赞同：1
> 
> 时间：2013-04-17T09:48:47.267
> 
> 标签：android, cordova, android-alertdialog, font-size

我在使用 Android 时遇到了一些困难。最近我在 Phonegap 中创建了一个应用程序，并在设备上启动了它。它可以工作，但在低分辨率下，警报对话框文本变为两行。我想删除它，我尝试在谷歌上搜索，我能找到的只是在 java 上设置 textview。我的项目没有 1 行 java 代码。所以我的问题是：如何从xml设置android上**所有**警报对话框的字体大小。保持中间，我已经从 css，android manifest 中尝试过。

# sql-server - 如何检查是否安装了 SQL Server 2012 共享管理对象 (SMO)

> ID：16056858
> 
> 赞同：1
> 
> 时间：2013-04-17T09:49:08.727
> 
> 标签：sql-server, smo

要配置安装助手，我必须检查是否已经安装了 SQL Server 2012 SMO。我找到了一些旧版本 SQL Server 的答案（例如[这里](https://stackoverflow.com/questions/42438/whats-the-best-way-to-detect-the-presence-of-smo)和[这里](https://stackoverflow.com/questions/8502047/how-to-find-if-sql-server-2008-management-objects-installed)）以及检查注册表项的解决方案，`HKEY_CLASSES_ROOT\Microsoft.SqlServer.Management.Smo.Database`但这对我不起作用。此注册表项在 Windows Vista 和 Windows 7 中不存在，我认为 SQL Server 2012 版有所更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:31:34.397

如果您正在检查已安装的组件，那么最好的办法是检查卸载注册表项。

在我的机器上，“Microsoft SQL Server 2012 Management Objects (x64)”的键值是这样的：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{43A5C316-9521-49C3-B9B6-FCE5E1005DF0} 
```

如果您需要，32 位版本可能有不同的密钥条目，但这是我在担任 SCCM 管理员时经常进行软件安装检查的方式。

编辑：由于微软似乎在每个版本都更改了卸载密钥，因此很难以这种方式跟踪安装，这里还有另一个密钥可能是一个很好的检查：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\SharedManagementObjects\CurrentVersion 
```

您可以检查它的值以查看它是否大于 11，如果不是（或不存在）则进行安装。

# python - 在 Eclipse 中调试 uWsgi 应用程序

> ID：16056865
> 
> 赞同：0
> 
> 时间：2013-04-17T09:49:28.560
> 
> 标签：python, eclipse, uwsgi

我想在 Eclipse 中调试一个 uWsgi 应用程序。有没有办法在 Eclipse 中创建运行配置文件，以便它可以将调试器附加到 uWsgi python 解释器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:41:08.443

通过使用[pydev 远程调试器](http://pydev.org/manual_adv_remote_debugger.html)找到了一些方法：

*   在您要调试的代码中`import pydevd`
*   在你想中断通话的时候`settrace`
*   启动你的 uwsgi 容器
*   启动 pydev 远程调试器（见链接）
*   在 uwsgi 中执行你的代码的 http 调用
*   et voile。打破。

代码：

```
import sys
sys.path.append("/path/to/eclipse indigo/plugins/org.python.pydev_2.7.0.2013032300/pysrc/")
import pydevd

def application(env, start_response):
    #break here
    pydevd.settrace() 
```

# wpf - WPF ComboBox 在 Ctrl+Z 上撤消异常（重点放在 SelectionChanged 上），为什么？

> ID：16056866
> 
> 赞同：0
> 
> 时间：2013-04-17T09:49:29.930
> 
> 标签：wpf, vb.net, .net-4.0, combobox, undo

那么，有人可以告诉我为什么在这些情况下会发生这种异常？

`Test Window`

```
<Window x:Class="MainWindow"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 Title="MainWindow" Height="350" Width="525">
  <StackPanel>
    <ComboBox
        Name="cmbTest"
        IsEditable="True"
        SelectionChanged="ComboBox_SelectionChanged">
    </ComboBox>
  </StackPanel>
</Window> 
```

`Code behind`

```
Class MainWindow

  Sub New()
    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    Dim source As New ObservableCollection(Of String)()
    source.Add("AAA")
    source.Add("BBB")
    source.Add("CCC")
    cmbTest.ItemsSource = source
  End Sub

  Private Sub ComboBox_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
    Keyboard.Focus(cmbTest)
  End Sub

End Class 
```

现在，如果您键入`AAA`然后`Ctrl`+ `Z`，`ComboBox`控制引发此异常：

> 撤消单元打开时无法撤消或重做。

有人可以解释为什么吗？！？怎么可能避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:39:13.717

“Undo 方法不适用于 KeyPress 或 TextChanged 事件。” 这让我以前。

来源：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.undo.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.undo.aspx)

# events - 将 ItemsControl 的任何/所有元素添加到 VisualTree 时是否触发了任何事件？

> ID：16056867
> 
> 赞同：0
> 
> 时间：2013-04-17T09:49:31.307
> 
> 标签：events, windows-runtime, winrt-xaml

`FrameworkElement.Loaded`当容器被添加到树时发生。

我需要根据添加到`ItemsControl`.

我*可以*连接到类似的事件`LayoutUpdated`，然后追踪后代，计算孩子的数量，但这是一项相当繁重的工作。

将 ItemsControl 的任何/所有数据绑定元素添加到 VisualTree 时是否触发了任何事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:12:44.980

您可以将 ItemsControl 子类化以获得获取项目的最佳性能：

```
public class CustomListView : ListView
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        var listViewItem = base.GetContainerForItemOverride();

        // process the ListViewItem

        return listViewItem;
    }
} 
```

# android - Box2d Cocos2d Android重力不起作用

> ID：16056878
> 
> 赞同：0
> 
> 时间：2013-04-17T09:50:08.223
> 
> 标签：android, box2d, cocos2d-android

我正在尝试为 Box2d、Cocos2d 和 Android 创建一个简单的测试。我所需要的只是将一个身体放在屏幕上，让它对重力做出反应。我到处看了看，有很好的非 Android 应用程序教程，但没有一个对 Android 工作有影响。任何人都可以帮忙吗？

这是我正在使用的代码。我拿了它，并从这里轻轻修改：[http ://www.expobrain.net/2012/05/12/box2d-physics-simulation-on-android/](http://www.expobrain.net/2012/05/12/box2d-physics-simulation-on-android/)

创造世界：

```
World world = new World(new Vec2(2.0f, 8.0f), false); 
```

这就是我创建身体的方式：

```
public void setupBallBody() {
    CGSize size = CCDirector.sharedDirector().winSize();
    CGPoint pos = CGPoint.make(size.width / 1.2f, size.height / 1.2f);

    // Create Dynamic Body
    BodyDef bodyDef = new BodyDef();

    bodyDef.type = BodyType.DYNAMIC;
    bodyDef.position.set(screenToWorld(pos));

    ballBody = world.createBody(bodyDef);
    MassData md = new MassData();
    md.mass = 5;
    ballBody.setMassData(md);        

    // Create Shape
    CircleShape ballShape = new CircleShape();

    ballShape.m_radius = SMILE_RADIUS;

    // Create fixture
    FixtureDef ballFixture = new FixtureDef();

    ballFixture.shape = ballShape;
    ballFixture.density = SMILE_DENSITY;
    ballFixture.friction = SMILE_FRICTION;
    ballFixture.restitution = SMILE_RESTITUTION;
    // Assign fixture to Body
    ballBody.createFixture(ballFixture);

    // Set sprite
    final CCSprite ballSprite = CCSprite.sprite("ball.jpg");
    ballSprite.setPosition(pos);
    addChild(ballSprite, 0);
    ballBody.setUserData(ballSprite);

} 
```

这是我的“tick”方法（我不确定它是否是重力工作的一部分，但为了完整起见，我将其包含在此处。）

```
public void tick(float dt) {
    synchronized (world) {
        world.step(1/60, 10, 10);
    }

    // Update sprites
    for (Body b = world.getBodyList(); b != null; b = b.getNext()) {

        if(b == ballBody) {
            CCSprite ballSprite = (CCSprite)ballBody.getUserData();
            if(ballSprite != null) {
                ballSprite.setPosition(worldToScreen(ballBody.getPosition())));     
                ballSprite.setRotation(-1.0f * (float)Math.toDegrees((ballBody.getAngle()))); 
            }
        }           
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:53:41.650

我的猜测是这条线可能是问题所在。-

```
world.step(1/60, 10, 10); 
```

`step`函数根据自上一步以来经过的时间处理身体位置。你正在做一个整数除法`1/60`，结果是`0`. 试试`1.0f / 60.0f`吧。

否则，您将告诉您的世界自上一步以来经过了 0 毫秒，因此物体将始终保持在其初始位置。

但是，对时间步进行“硬编码”并不是一个好习惯。您最好将接收时间的增量传递给您的世界。-

```
world.step(dt, 10, 10); 
```

此外，您可以简化您的循环以适用于任何`body`附加的`CCSprite`，像这样。-

```
for (Body b = world.getBodyList(); b != null; b = b.getNext()) {
    CCSprite sprite = (CCSprite)b.getUserData();
    if(sprite != null) {
        sprite.setPosition(worldToScreen(b.getPosition())));     
        sprite.setRotation(-1.0f * (float)Math.toDegrees((b.getAngle()))); 
    }           
} 
```

# windows - 通过网络提取 gzip 文件

> ID：16056879
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:50:09.727
> 
> 标签：windows, r, unzip, gunzip

我在 Windows 7 上使用 R.2.15.2，我无法解压缩`.gz`存储在网络上的文件。我也在使用`gnuwin32`（如果有帮助的话）

看到文件了，所以位置没问题

```
system("ls")
file1.bla.gz
file2.bla.gz
file3.bla.gz
...

R) unzip("./file1.bla.gz")
Message d'avis :
In unzip("./file1.bla.gz") :
erreur 1 lors de l'extraction d'un fichier zip

R) untar("./file1.bla.gz")
/usr/bin/tar: This does not look like a tar archive
/usr/bin/tar: Skipping to next header 
```

使用该功能`unzip`也不起作用，看起来它只是在处理`.zip`文件。不确定问题出在网络上还是我错误地调用它...

我怎样才能提取这个文件？

**编辑**：以下工作

```
system(" \"C:\\Program Files\\7-Zip\\7z.exe\" e -y file1.bla.gz") 
```

多亏了@Paul Hiemstra ， `gunzip`from`R.utils`更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:20:50.037

您可以使用`gzfile`来访问`gzip`压缩文件的内容，例如：

```
read.table(gzfile("/tmp/foo.csv.gz")) 
```

`foo.csv.gz`gzip 压缩的 csv 文件在哪里。[我在这篇文章](https://stackoverflow.com/questions/5764499/decompress-gz-file-using-r)中得到了@DirkEddelbuettel 的答案。

If your goal is to extract the file, you can use the `gunzip` function from the `R.utils` package. See [this](https://stat.ethz.ch/pipermail/r-help/2010-September/252896.html) R-help post.

# sql - 用于动态表单数据收集的数据库方法，适用于良好的报告和搜索

> ID：16056880
> 
> 赞同：0
> 
> 时间：2013-04-17T09:50:14.627
> 
> 标签：sql, mongodb, report, data-capture, nosql

我正在从事一个涉及收集动态表单数据的项目。这些表单是用户定义的（想想surveymonkey），因此无法为它们定义固定的模式。将为这些表格检索问题/答案方面的数据，然后将其存储到数据库中。报告/搜索此答案（过滤和聚合）至关重要。有两种可行的方法。

1.  使用 SQL 数据库并将每个字段数据存储为单独的行。然后通过 SQL 完成报告/搜索。我担心这会导致复杂的报告连接。

2.  使用像 MongoDB 这样的 NoSQL 数据库。这似乎非常适合存储动态数据，因为它是无模式的。但是，我不确定它的报告功能有多好。

目标用户学习 sql 似乎比定义 map/reduce 查询更容易。在 mongoDB 上构建用于报告/搜索的 UI 是多么容易。

简单的事情，例如 - 给出一组特定答案的用户列表。一段时间内有多少这样的用户等？

谢谢， 普吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:24:46.143

评论中已经提到过，但我会重申，您应该查看 Mongo 的 map/reduce 报告功能*和*聚合框架。

在 Couch 和 Mongo 中完成 map/reduce 后，我可以说它们非常相似。对于不熟悉它的开发人员来说，这绝对是一个入门障碍，但是一旦您获得了一些工作示例，这还不算太糟糕。

考虑一下 Mongo 可以将 map/reduce 作业输出到集合中，我发现这非常有用。这意味着您可以安排作业并定期运行它们，然后输出到您可以报告的地方。创建一个框架让开发人员编写简单的 Javascript map 和 reduce 函数，然后将它们插入以按计划运行并不难。

对于来自 SQL 的开发人员来说，聚合框架更容易理解。仍然是一个学习曲线，但不如 map/reduce 差。它更适合临时报告查询，并且在 Couch 中没有可比性。

您也许可以制作一个映射到聚合框架的报告 UI，但我不会尝试为 map/reduce 查询做类似的事情。

# java - EJB 注入时出现空指针异常

> ID：16056881
> 
> 赞同：3
> 
> 时间：2013-04-17T09:50:16.887
> 
> 标签：java, servlets, dependency-injection, ejb

我用一个无状态的 Ejb 编写了非常简单的 Web 应用程序，有趣的时刻出现在我实现接口时——ejb 依赖注入不起作用：

**web.xml**

```
<?xml version="1.0" ?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
  <display-name>Archetype Created Web Application</display-name>
    <servlet>
        <servlet-name>simpleController</servlet-name>
        <servlet-class>com.SimpleController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>simpleController</servlet-name>
        <url-pattern>*.job</url-pattern>
    </servlet-mapping>
</web-app> 
```

**小服务程序类**

```
package com;
import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class SimpleController extends HttpServlet {

    @EJB
    private SimpleBean bean;

    @Override
    protected void doPost (HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.getWriter().println(bean.getSomeString());
    }

    @Override
    protected void doGet (HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }
} 
```

**豆**

```
package com;

import javax.ejb.Stateless;

@Stateless
public class SimpleBean /*implements Simple*/ {
    public String getSomeString(){
        return "axaxaxa!";
    }
} 
```

**接口**

```
package com;

import javax.ejb.Remote;

//@Local
@Remote
public interface Simple {
    String getSomeString();
} 
```

因此，当我取消注释“implements Simple”时，我得到了 NullPointerException（在接口中带有 @Remote 或 @Local 注释），另一种情况下，我得到了“axaxaxa！”。为什么会发生？我读过 Ejb 类**必须**实现接口。

我使用 TommEEcas 应用服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:58:21.057

通过更改 bean 变量类型（改为接口类型而不是类类型）来解决问题

**带有 NullPointerException 的版本**

```
private SimpleBean bean; 
```

**工作版本**

```
private Simple bean; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-05T17:23:46.530

在您排除太多故障之前，只需尝试重新启动您的容器（即 GlassFish、JBoss 等）。

# windows-ce - Win CE 6.0 以太网读/写线程优先级

> ID：16056885
> 
> 赞同：0
> 
> 时间：2013-04-17T09:50:25.980
> 
> 标签：windows-ce, thread-priority

我正在使用 win CE 6.0，需要编辑负责从以太网读取和写入的线程的优先级。但是我找不到任何负责此目的的代码。你知道我在哪里可以找到它们吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T01:10:35.577

可以通过注册表修改中断服务线程的优先级。有关信息，请参阅[实时优先系统级别](http://msdn.microsoft.com/en-us/library/aa910702.aspx)。以太网适配器属于 NDIS（网络驱动程序接口规范）。

# android - PhoneGap + jQuery 安卓应用；ajax 请求在浏览器中运行，但不在手机或模拟器上

> ID：16056888
> 
> 赞同：1
> 
> 时间：2013-04-17T09:50:28.697
> 
> 标签：android, jquery, cordova, soap, basic-authentication

我正在开发一个必须从 Microsoft Dynamics NAV SOAP Web 服务加载数据的应用程序。当我在浏览器（IE9 或 Chrome v 26.0...）中运行代码时，代码会执行应有的操作。但是当我在 android 模拟器或真实设备（htc 感觉）上测试代码时，ajax 调用失败并且我得到 XMLHttpRequest 错误 0。

但是，我也可以从不同的 web 服务加载数据，而无需在 android 系统上进行基本身份验证。

我的白名单（位于 res/xml/config.xml）如下所示：

```
<access origin="*" />

<plugins>
    ... // all other possible plugins
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
</plugins> 
```

这里是代码：

```
function readTimeRecords(callback) {

var wsUrl = 'http://.../WS/CRONUS%20AG/Page/Time_Recording';

var soapMessage = '<?xml version="1.0" encoding="utf-8"?>' + 
'<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">' + 
    '<soap:Body>' + 
        '<ReadMultiple xmlns="urn:microsoft-dynamics-schemas/page/time_recording" >' +
            '<filter>' +
                '<Field>No</Field>' +
            '</filter>' +
            '<bookmarkKey />' +
            '<setSize>' +
                '5' +
            '</setSize>' +
        '</ReadMultiple>' +
     '</soap:Body> ' + 
 '</soap:Envelope>';

// enable cross site requests in IE
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;

$.ajax({
    url : wsUrl,
    type : "POST",
    dataType : "text",
    data : soapMessage,
    processData : false,
    contentType : "text/xml", 

    password : "passwd",
    username : "domain\\user",

    beforeSend : function(xhr) {
        xhr.setRequestHeader('SOAPAction', 'urn:microsoft-dynamics-schemas/page/time_recording');
    },
    success : function(msg) {
        ...     
        callback(record);
    },
    error : onError 
})  
}

function onError(XMLHttpRequest, textStatus, errorThrown) { 
    debugger;
    console.log("error: " + textStatus + ", errorThrown: " + errorThrown);
        // i just get the message error: error:
} 
```

有人知道如何解决这个问题吗？

使用的设置：jquery.mobile-1.3.0 jquery-19.1 cordova-2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:09:54.003

要使 CORS 工作，您的 Web 服务必须启用 CORS。这是一篇[很好的文章](http://www.html5rocks.com/en/tutorials/cors/)。如果您无法通过 CORS 启用您的服务，则另一种选择是使用 JSONP 而不是 JSON。

# spring - Spring Tool Suite 中的 Spring MVC 模板项目

> ID：16056891
> 
> 赞同：1
> 
> 时间：2013-04-17T09:50:37.400
> 
> 标签：spring, model-view-controller, spring-tool-suite

我正在关注教程[http://krams915.blogspot.ie/2011/01/spring-mvc-3-hibernate-annotations.html](http://krams915.blogspot.ie/2011/01/spring-mvc-3-hibernate-annotations.html)

当我在 URL 栏输入 localhost:8080/tutorial/krams/main/persons 时遇到问题。我不断收到 404 错误。我的顶级包是 org.krams.tutorial，我已将项目名称设置为 tutorial。

（我在 STS 中使用的是 Spring MVC 模板。我删除了 Home Controller.java 和 home.jsp。我不确定这是否有效果。Spring MVC 模板的目录结构与 Krams 教程不同。当我下载 Krams 项目并在 STS 中运行它工作正常，但我想自己从头开始）。希望有人可以帮助我！它非常令人沮丧！这是我的代码。

**根上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Activates various annotations to be detected in bean classes -->
    <context:annotation-config />

    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
     For example @Controller and @Service. Make sure to set the correct base-package-->
    <context:component-scan base-package="org.krams.tutorial" />

    <!-- Configures the annotation-driven Spring MVC Controller programming model.
    Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
    <mvc:annotation-driven /> 

    <!-- Load Hibernate related configuration -->
    <import resource="hibernate-context.xml" />

</beans> 
```

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="org.krams.tutorial" />

</beans:beans> 
```

**休眠上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            ">

    <context:property-placeholder location="/WEB-INF/spring/spring.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />   

    <!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
    <!-- See http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html -->                           
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/SessionFactory.html -->
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/Session.html -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
                 p:dataSource-ref="dataSource"
                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="org.krams.tutorial"/>

    <!-- Declare a datasource that has pooling capabilities-->   
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
                destroy-method="close"
                p:driverClass="${app.jdbc.driverClassName}"
                p:jdbcUrl="${app.jdbc.url}"
                p:user="${app.jdbc.username}"
                p:password="${app.jdbc.password}"
                p:acquireIncrement="5"
                p:idleConnectionTestPeriod="60"
                p:maxPoolSize="100"
                p:maxStatements="50"
                p:minPoolSize="10" />

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" 
                p:sessionFactory-ref="sessionFactory" />

</beans> 
```

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>
    <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">false</property>
    <!-- This will drop our existing database and re-create a new one.
            Existing data will be deleted! -->
    <property name="hbm2ddl.auto">create</property>
  </session-factory>
</hibernate-configuration> 
```

**spring.properties**

```
# database properties
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc:mysql://localhost/mydatabase
app.jdbc.username=root
app.jdbc.password=nbuser

#hibernate properties
hibernate.config=/WEB-INF/spring/hibernate.cfg.xml 
```

**主控制器.java**

```
package org.krams.tutorial.controller;

import java.util.List;

import javax.annotation.Resource;

import org.apache.log4j.Logger;
import org.krams.tutorial.domain.Person;
import org.krams.tutorial.service.PersonService;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

/**
 * Handles and retrieves person request
 */
@Controller
@RequestMapping("krams/main")
public class MainController {

    protected static Logger logger = Logger.getLogger("controller");

    @Resource(name="personService")
    private PersonService personService;

    /**
     * Handles and retrieves all persons and show it in a JSP page
     * 
     * @return the name of the JSP page
     */
    @RequestMapping(value = "/persons", method = RequestMethod.GET)
    public String getPersons(Model model) {

        logger.debug("Received request to show all persons");

        // Retrieve all persons by delegating the call to PersonService
        List<Person> persons = personService.getAll();

        // Attach persons to the Model
        model.addAttribute("persons", persons);

        // This will resolve to /WEB-INF/jsp/personspage.jsp
        return "personspage";
    }

    /**
     * Retrieves the add page
     * 
     * @return the name of the JSP page
     */
    @RequestMapping(value = "/persons/add", method = RequestMethod.GET)
    public String getAdd(Model model) {
        logger.debug("Received request to show add page");

        // Create new Person and add to model
        // This is the formBackingOBject
        model.addAttribute("personAttribute", new Person());

        // This will resolve to /WEB-INF/jsp/addpage.jsp
        return "addpage";
    }

    /**
     * Adds a new person by delegating the processing to PersonService.
     * Displays a confirmation JSP page
     * 
     * @return  the name of the JSP page
     */
    @RequestMapping(value = "/persons/add", method = RequestMethod.POST)
    public String add(@ModelAttribute("personAttribute") Person person) {
        logger.debug("Received request to add new person");

        // The "personAttribute" model has been passed to the controller from the JSP
        // We use the name "personAttribute" because the JSP uses that name

        // Call PersonService to do the actual adding
        personService.add(person);

        // This will resolve to /WEB-INF/jsp/addedpage.jsp
        return "addedpage";
    }

    /**
     * Deletes an existing person by delegating the processing to PersonService.
     * Displays a confirmation JSP page
     * 
     * @return  the name of the JSP page
     */
    @RequestMapping(value = "/persons/delete", method = RequestMethod.GET)
    public String delete(@RequestParam(value="id", required=true) Integer id, 
                                            Model model) {

        logger.debug("Received request to delete existing person");

        // Call PersonService to do the actual deleting
        personService.delete(id);

        // Add id reference to Model
        model.addAttribute("id", id);

        // This will resolve to /WEB-INF/jsp/deletedpage.jsp
        return "deletedpage";
    }

    /**
     * Retrieves the edit page
     * 
     * @return the name of the JSP page
     */
    @RequestMapping(value = "/persons/edit", method = RequestMethod.GET)
    public String getEdit(@RequestParam(value="id", required=true) Integer id,  
                                            Model model) {
        logger.debug("Received request to show edit page");

        // Retrieve existing Person and add to model
        // This is the formBackingOBject
        model.addAttribute("personAttribute", personService.get(id));

        // This will resolve to /WEB-INF/jsp/editpage.jsp
        return "editpage";
    }

    /**
     * Edits an existing person by delegating the processing to PersonService.
     * Displays a confirmation JSP page
     * 
     * @return  the name of the JSP page
     */
    @RequestMapping(value = "/persons/edit", method = RequestMethod.POST)
    public String saveEdit(@ModelAttribute("personAttribute") Person person, 
                                               @RequestParam(value="id", required=true) Integer id, 
                                                    Model model) {
        logger.debug("Received request to update person");

        // The "personAttribute" model has been passed to the controller from the JSP
        // We use the name "personAttribute" because the JSP uses that name

        // We manually assign the id because we disabled it in the JSP page
        // When a field is disabled it will not be included in the ModelAttribute
        person.setId(id);

        // Delegate to PersonService for editing
        personService.edit(person);

        // Add id reference to Model
        model.addAttribute("id", id);

        // This will resolve to /WEB-INF/jsp/editedpage.jsp
        return "editedpage";
    }

} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:40:35.883

查看您的日志，我可以看到您收到以下异常：

> 引起：java.lang.ClassNotFoundException：org.hibernate.cache.CacheProvider

快速浏览一下 Google 会导致[此处](https://stackoverflow.com/questions/7528862/exception-noclassdeffounderror-for-cacheprovider)出现一个 SO 线程，指出问题出在您可能与 spring 结合使用的休眠版本上。使用建议的 Factory 编辑 hibernate-context.xml 可能会解决您的问题。

# indexing - 禁止在 Robots.txt 中包含哈希的目录

> ID：16056905
> 
> 赞同：1
> 
> 时间：2013-04-17T09:51:22.453
> 
> 标签：indexing, web-crawler, bots, robots.txt, google-search-console

假设您要禁止目录 /#test/ （目录名称以哈希开头）

我尝试使用这条线：`Disallow: /#test/`

但是，这不起作用，因为在谷歌搜索后，我发现井号 (#) 是为 robots.txt 文件中的注释保留的，其中该行 # 之后的所有内容都将被忽略。

之后我尝试了

`Disallow: /\#test/`

和

```
Disallow: /"#test"/ 
```

但那些也没有用。

有人知道我应该使用什么语法吗？

**编辑：**顺便说一句，我正在使用谷歌网站管理员工具来测试机器人规则是否有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:59:54.793

`#`通常用作[fragment](http://en.wikipedia.org/wiki/Fragment_identifier)，因此您可能无法从浏览器访问它。

那为什么不`Disallow: /%23test/`呢？

# ios - 带有协议的 Obj-C 中缺少编译错误

> ID：16056908
> 
> 赞同：0
> 
> 时间：2013-04-17T09:51:32.353
> 
> 标签：ios, xcode, compilation, protocols

在我的记忆中，当一个协议方法没有实现时，XCode 会产生一个编译错误，但现在只是显示一个“警告”。

这有什么变化吗？是关于 XCode 配置的吗？当（必需）协议的方法未实现时，我想抛出编译错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:55:14.230

您应该将“将警告视为错误”构建设置设置为`Yes`：

![在此处输入图像描述](https://i.stack.imgur.com/iYETZ.png)

这也可以通过`-Werror`作为编译器参数传递来完成。

# jquery - AJAX JSON 仅加载一次，刷新时失败（仅在 IE7 和 8 中）

> ID：16056909
> 
> 赞同：0
> 
> 时间：2013-04-17T09:51:32.653
> 
> 标签：jquery, ajax, json, internet-explorer-8, internet-explorer-7

我有一个使用 Ajax 加载 JSON 内容的微型站点，它第一次在 IE7 和 IE8 中运行，但是如果我刷新这些浏览器它会失败，我已经签入了提琴手并且我没有收到任何错误。可能是某处的代码错误吗？

```
var firstBackgroundImage = new Image();
                firstBackgroundImage.src = "img/bg-img.jpg";        
                firstBackgroundImage.onload = function () {
                    $('#loading-image').hide();
                    $(".wrap").fadeIn(300);
                    loadContent();
                };

function loadContent(){ 
    $.ajax({
        url: "json/" + language + "/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        cache : false,
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showStartpage(data);
            showInfo(data);
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 

} 
```

没有出现“加载内容失败”警报，它只是显示了我的加载图像，可能存在任何可能的故障吗？有人遇到过同样的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:58:13.803

它第一次工作是因为 Internet Explorer 没有从缓存中加载图像，因此`load`事件在您`firstBackgroundImage.onload = ...`设置事件处理程序的行之后触发。但是，在随后的页面加载中，它使用的是图像的缓存版本，因此该`load`事件在您为其设置事件处理程序之前触发。

只需更改这两行的顺序。设置`load`事件处理程序，然后设置`src`图像的属性：

```
var firstBackgroundImage = new Image();
firstBackgroundImage.onload = function () {
    $('#loading-image').hide();
    $(".wrap").fadeIn(300);
    loadContent();
};
firstBackgroundImage.src = "img/bg-img.jpg"; 
```

# android - 如何为多个应用程序创建通用内容提供程序

> ID：16056912
> 
> 赞同：1
> 
> 时间：2013-04-17T09:51:41.323
> 
> 标签：android, sqlite, android-contentprovider

我有许多 android 应用程序，我需要所有这些应用程序通用的存储，但公共存储的创建应该从第一个使用/从设备启动的应用程序（应用程序列表中的第一个应用程序）动态创建。

例如，如果我们有名为 A、B、C 的应用程序。当启动 A 时，它应该检查 DB 是否存在，如果不存在则创建它。接下来启动B时，由于A已经创建了存储，B不需要创建它，它可以直接获取数据或将数据添加到公共存储中。内容提供商可以这样做吗？但是如何定义 URI ，我们不确定哪个应用程序会创建内容提供者。

# java - Java - 在巨型列表中添加和删除的最佳策略？

> ID：16056913
> 
> 赞同：5
> 
> 时间：2013-04-17T09:51:41.560
> 
> 标签：java, performance, list

使用**Java**。

我为一些计算等记录小对象，我只需要最后的 x 千个。所以我想将第一个释放给垃圾收集器。但是由于从 ArrayLists 中删除是昂贵的......

以下是重要的（不能改变）

*   没有数据库
*   对象是同一类型
*   每秒最多 50,000 个对象
*   性能很重要
*   快速迭代整个列表很重要
*   随机访问也很重要

这可以改变：

*   现在使用`ArrayList<MyObject>`
*   限制：100,000 个对象（停止记录，但必须继续）

我的猜测：

*   链表
*   环形缓冲区
*   ？？？

**我能做些什么来快速迭代并同时快速释放旧对象？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:09:01.567

## 一个办法

...**如果您需要恒定数量的最后一个元素**，只需使用数组作为环形缓冲区的基础。

*   单一分配

*   没有获取/放置/等。内联的方法开销

*   简单的

一个示例（可能无法编译，即时编写）实现：

```
class LastElementsStore<T> {
  Object[] arr;
  int size;
  int nextPutIndex;

  LastElementsStore(int size ) {
    arr = new Object[size];
    this.size = size;
  }

  void put(T elt) {
    arr[nextPutIndex] = elt;
    nextPutIndex++;
    if (nextPutIndex == size) {
      nextPutIndex = 0;
    }
  }

  // getters of your choice

} 
```

如果没有足够的元素，将返回空值。

如果需要订购它们，则从 nextPutIndex 开始，读到最后，然后转到 0 并继续阅读。

您可以完全控制内存，不会像 LinkedList 那样进行额外的节点分配，也不会像 ArrayList 那样调整大小。

**一旦达到限制，**旧对象就会自动释放。****

 **## 您的要求

*   没有数据库——完成，只是使用了一个数组

*   对象是同一类型——简单模板

*   每秒最多 50,000 个对象——如果一个数组不能处理它，Java 中什么也不能

*   性能很重要——如上所述，通过整个列表快速迭代访问数组时没有额外开销很重要——尽可能快的迭代

*   随机访问也很重要——数据是有序的，在/之后的第一个非空元素`nextPutIndex`是第一个可用的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:55:26.847

在不知道您的任何其他要求的情况下，某种类型的链表似乎是合适的。只需跟踪第一个元素（列表中的“头部”）和最后一个元素（“尾部”）。每个链接的元素引用下一个。添加到尾部，并从头部移除。

添加和删​​除将非常快（`O(1)`），并且迭代也将非常简单。

但是，如果您需要随机访问元素，则此解决方案的性能会很差。

**编辑**

由于您已添加需要随机访问，因此链接列表将不起作用。如果在任何给定时间的最大对象数是固定的，您可以使用一个`ArrayList`（或一个基本的 Java 数组）并将其视为一个环绕缓冲区。到达末尾后，从头开始替换对象，并跟踪表示列表逻辑开始的索引。（如果您使用基本数组，您还需要跟踪缓冲区中当前有多少元素——相当于`List.size()`）。

当您在缓冲区的开头替换对象时，旧对象将被自动释放并被垃圾收集（只要它们没有在其他地方引用）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T10:17:09.593

我会使用一个数组，并实现一个 RingBuffer。我已经这样做了，但是使用了许多单元测试来确保它始终有效。我没有找到适合我需要的环形缓冲区，也许你有更多的运气。**

# android - 罐子不匹配！修复你的依赖

> ID：16056914
> 
> 赞同：71
> 
> 时间：2013-04-17T09:51:45.393
> 
> 标签：android, eclipse, jar

### 重现步骤：

1.  创建一个安卓项目“MyApp”
2.  导入 ActionBarSherlock(ABS)、Directional ViewPager(DVP) 或任何其他使用 android 支持库的开源库。
3.  将库添加到项目“MyApp”

### 控制台日志：

```
[2013-04-17 14:27:12 - MyApp] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-04-17 14:27:12 - MyApp] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-04-17 14:27:12 - MyApp] All versions of the libraries must be the same at this time.
[2013-04-17 14:27:12 - MyApp] Versions found are:
[2013-04-17 14:27:12 - MyApp] Path: C:\Users\santhosh\My_Workspace\DVP_library\libs\android-support-v4.jar
[2013-04-17 14:27:12 - MyApp]   Length: 140011
[2013-04-17 14:27:12 - MyApp]   SHA-1: fc834ac8147bc4ed0b555f90f500a57d4232c448
[2013-04-17 14:27:12 - MyApp] Path: C:\Users\santhosh\My_Workspace\abs_library\libs\android-support-v4.jar
[2013-04-17 14:27:12 - MyApp]   Length: 271754
[2013-04-17 14:27:12 - MyApp]   SHA-1: 53307dc2bd2b69fd5533458ee11885f55807de4b
[2013-04-17 14:27:12 - MyApp] Jar mismatch! Fix your dependencies 
```

**我知道我想从 libs 文件夹中删除 android-support-v4.jar 并为所有人保留一份副本。但是，这并不能解决我的问题。**

当我尝试从**MyApp**删除 android-support-v4.jar 时，它给了我以下错误。

```
 Problems encountered while deleting resources.
 Could not delete 'C:\Users\santhosh\My_Workspace\MyApp\libs\android-support-v4.jar'. 
```

当我尝试从**ABS**删除 android-support-v4.jar 时，它给了我以下错误

```
 ????? cannot be resolved to a type error. 
```

我试图清理项目，修复项目属性。重启eclipse，再次构建，导入并添加。我试图将 libs 文件夹中的支持 jar 从一个库复制到另一个库。删除两个库中的支持 jar 并将其添加到 MyApp 项目中。没有什么对我有用。

**如果我尝试添加单个库，它工作正常。尝试将 2 个或更多库添加到单个项目时，我遇到了问题。**

在 MyApp 中添加两个库时出现错误：

```
The project was not built since its build path is incomplete. 
Cannot find the class file for android.support.v4.app.FragmentActivity. 
Fix the build path then try building this project MyApp Unknown Java Problem
The type android.support.v4.app.FragmentActivity cannot be resolved. It is indirectly referenced from required .class files MyActivity.java/MyApp/src/com/santhosh/myapp    line 10 Java Problem
Jar mismatch! Fix your dependencies MyApp Unknown Android Dependency Problem 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-30T13:15:57.800

不要在库中包含 android-support-v4，而是可以使用**构建路径菜单 > 添加外部 jar将其作为外部 jar 添加到项目中**

有时你必须清理你的项目。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-04T01:44:53.623

# 仅将库项目用于支持库

*从**ADT 22**开始，使用 Eclipse Juno*

我认为以上任何一个都不是最好的答案。我也不认为建议再`external jar`在 Eclipse 中使用该功能（AFAIK）。

相反，对我有用的是**创建一个单独的空库项目。**

然后使用 `Android tools`>`Add Support Library`获取您需要或想要的最新版本。

然后**从所有其他项目中删除支持库 jar**。

最后，对于每个需要它的项目，添加对新库项目的引用

`(project properties)`> `Android`> `(Library box)`>`Add...`

然后，您的所有项目将有一个单一的来源来使用和更新支持库。这也使 javadocs 更容易开始工作。

有关如何设置 javadocs 的信息，请参阅：

[如何将 javadoc 或源附加到 libs 文件夹中的 jar？](https://stackoverflow.com/questions/9873152/how-to-attach-javadoc-or-sources-to-jars-in-libs-folder)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-17T12:09:02.997

`android-support-v4.jar`从项目的 libs 文件夹中删除文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-17T09:53:50.353

Actionbarsherlock 里面有支持库。如果支持库也在您的主项目中，这可能会导致冲突。

`android-support-v4.jar`从项目的 libs 目录中删除。

也`android-support-v4.jar`从您的第二个库中删除，然后重试。

[Jar Mismatch 在依赖列表中找到 2 个版本的 android-support-v4.jar](https://stackoverflow.com/questions/12045568/jar-mismatch-found-2-versions-of-android-support-v4-jar-in-the-dependency-list)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-23T03:59:04.323

我同意 pjco。[最好的方法是developer.android.com](http://developer.android.com)教程中[Support Library Setup](http://developer.android.com/tools/support-library/setup.html#)中解释的官方方法。

然后，在 Eclipse **“包资源管理器”**中，展开您的主项目并从**“libs”文件夹中删除*****android-support-v4.jar***（如[Pratik Butani](https://stackoverflow.com/users/1318946/pratik-butani-androidbuts)[建议](https://stackoverflow.com/a/16059588/1318946)的那样）。

 **这对我有用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-11T09:40:49.603

1.  当您在应用程序中使用库项目并且两个项目都使用具有不同版本的相同 jar 时，会出现 Jar 不匹配，因此只需检查应用程序中附加的所有库项目。如果存在一些不匹配，则将其删除。

2.  如果上述过程不起作用，那么只需从构建路径中删除项目依赖项，然后再次添加库项目并构建应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T09:54:02.113

我相信您在库和应用程序中都需要您的支持包。但是，要解决此问题，请确保您在两个位置都有相同的文件（相同的校验和）。

只需从一个位置复制支持包文件并复制到另一个位置，然后清理+刷新您的库/项目，您就可以开始了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-23T05:44:10.543

我认为您创建了一个新工作区并使用他的 lib 正确导入所有项目，并`android-support-v4.jar`在 sdk 额外文件中的 adb bundle 中添加外部 jar。我认为它对你有用。希望一切顺利

并且还使用 android 支持库，它可能对您有所帮助，还可以更新您的 adt 包

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-20T12:16:48.240

在我的情况下，我的工作空间中有另一个目录，与我的项目中的 jar 文件相同。我没有创建该目录或其中的任何内容。我相信它是由 Eclipse 创建的。我刚刚删除了那个目录，它运行正常。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-06-01T19:12:19.120

**右键单击您的项目 -> Android 工具 -> 添加支持库****

# apache - 通过 apache 执行交互式 shell 脚本

> ID：16056915
> 
> 赞同：1
> 
> 时间：2013-04-17T09:51:52.593
> 
> 标签：apache, shell, input, execute

我有一个需要用户输入的 shell 脚本（“请选择 y/n：”等）

我希望通过网页执行此操作。

关于我如何做到这一点的任何想法？我试过 php shell_exec... 但它只是执行命令并且不提示输入。

不确定这是否可能......但任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:05:18.723

通常，用户输入将使用`HTML/Javascript`. 然后将输入发布到 URL（`PHP`例如脚本），然后处理输入并执行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:36:08.843

`enter code here`检查脚本以查看是否有任何标志强制脚本在没有用户输入的情况下运行。通常，您可以通过编写以下内容来提供帮助：

```
yourscript /h 
```

或者

```
yourscript --help 
```

可能有一个标志。在帮助中查找有关“强制”或“提示”的信息。如果不可用，如果您在 Linux/Unix 环境中，则可以创建一个新脚本，将输入发送到您的其他脚本。不确定这是否适用于 Windows。

这是一个非常简单的例子：

```
 echo y | yourscript 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T12:53:52.217

您可以这样做的唯一方法是以 HTML 的形式重新创建 CLI 工具的配置部分，例如：

```
<form method="POST" action="/foo.php">
  Please select:
      <input type="radio" name="yesno" value="1">yes
      <input type="radio" name="yesno" value="0">no
  Some other option:
      <input type="text" name"someoption">
</form> 
```

之后，您需要创建一个`foo.php`将使用 HEREDOC 处理输入部分的函数，例如：

```
<?php
    $aData = some_validation_and_data_preparation_method($_POST);

    $sCmd = implode("\n", $aData);

    $sOutput = shell_exec("./some_cli_tool << EOF
{$sCmd}
EOF");

    print $sOutput; 
```

注意实际的HEREDOC（即`EOF`标记之间）没有缩进。

# asp.net - 为实体框架编写集成测试

> ID：16056923
> 
> 赞同：3
> 
> 时间：2013-04-17T09:52:17.113
> 
> 标签：asp.net, .net, entity-framework-5, integration-testing, xunit

我们有一个巨大的应用程序，其中包含

*   Web 层 - MVC
*   服务层 - Web API
*   领域层
*   数据库层 - EF 5 代码优先

我们编写了数百个单元测试以避免进一步的问题。现在我们要针对数据库编写集成测试。

到目前为止，我们一直在使用 xUnit 进行单元测试。但我不确定我们如何才能继续前进，我有一些问题。

1.  您是否建议编写一种“从上到下”集成测试的方法。因此，编写一个使用 MVC 操作的测试方法，该操作遍历所有层并影响数据库或拆分为 Web - API、API - DB 等部分？
2.  我搜索了有关 Fixtures 的 xUnit，但找不到针对 Entity Framework 使用 IUseFixture 的示例。
3.  我们正在使用 Code First 迁移，所以我认为初始化数据库会很容易，因为所有迁移文件都在我们手中。但是我如何使用它们来创建测试数据库？
4.  我们的团队由多个开发人员组成，因此隔离他们每个人都很重要。我可以为此使用开发数据库服务器或本地数据库，但我再次找不到根据用户更改连接字符串的方法。

不是现在，而是在不久的将来，我们将使用 TFS 2012 构建运行这些测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T14:07:57.697

你应该试试努力

[http://efort.codeplex.com/](http://effort.codeplex.com/)

它通过在创建 DbContext 时提供特殊连接来为实体框架提供内存数据库。

它还可以使用 CSV 文件中的数据填充数据库。

# ios - iOS UIWebView You Tube Video thumbnail not resize on orientation changes in objective-c

> ID：16056924
> 
> 赞同：0
> 
> 时间：2013-04-17T09:52:17.223
> 
> 标签：ios, objective-c, uiwebview

我正在使用此代码加载视频`UIWebView`：

```
youTubeVideoHTML = @"<html><head>\
<body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";

videoWebView.delegate = self;
// Populate HTML with the URL and requested frame size
NSString *html = [NSString stringWithFormat:youTubeVideoHTML, videoURL, videoWebView.frame.size.width, videoWebView.frame.size.height];

// Load the html into the webview
[videoWebView loadHTMLString:html baseURL:nil];
[self.view addSubview:videoWebView]; 
```

它工作正常，但在方向改变时，它显示的宽度和高度与以前的方向相同。

如果我使用此代码：

```
NSString *html = [NSString stringWithFormat:youTubeVideoHTML, videoURL, videoWebView.frame.size.width, videoWebView.frame.size.height];

// Load the html into the webview
[videoWebView loadHTMLString:html baseURL:nil]; 
```

`willAnimateRotationToInterfaceOrientation`然后视频停止播放并重新加载 URL 。

有没有办法在不重新加载页面的情况下调整视频大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:05:32.167

这可能是因为您没有定义 body/html 大小，所以百分比不知道要调整到什么。有关更多详细信息，请参阅此帖子：

[高度：100% 不工作](https://stackoverflow.com/questions/7049875/height100-not-working)

# wpf - 具有模型类型和自动创建 ViewModel 的自定义 DependencyProperty

> ID：16056927
> 
> 赞同：1
> 
> 时间：2013-04-17T09:52:22.123
> 
> 标签：wpf, mvvm, viewmodel, dependency-properties

我有一个`DependencyProperty`模型的自定义 DP ( )。我的意思是 DP 的类型与模型的类型相同。

如果我给DP设置了一个Model，只要视图可以使用Model属性，一切都很好。

现在我到了需要引入 ViewModel 并且不想更改 DP 类型的地步。ViewModel 应该是 View 用户的隐藏实现细节。View 的用户应绑定 Model 而不是 ViewModel。我在很多地方通过注册 PropertyChangedEvent（在 DP 注册上）并`DataContext`直接在事件处理程序中设置内部控件来做到这一点。

在我看来，这似乎是一种常见的操作，我认为我这样做是一种蹩脚的方式。当 DP 绑定的 Model 发生变化并将其绑定到 View 中时，是否有更精简、更优雅的方式来创建 ViewModel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:17:11.243

是的，正如您在评论中提到的那样，您不需要 DP 来保存模型或视图模型，通常您会尽量避免在这种情况下编码，除非某些边缘情况出于任何原因需要它。使用 DP 来扩展控件/视图的功能，而不是存储模型或视图模型。

这是我通常遵循的逻辑：

假设我们有一个**模型**：MyModel，**视图**：ParentView、Child1View、Child2View

*   每个视图有 1 个虚拟机。因此我们有 3 个 VM 的 ParentViewModel、Child1ViewModel、...
*   在它的资源中声明父视图的`DataTemplate`子`DataType`视图`ViewModel`及其对应`Content`的`DataTemplate`子视图。

例子：

```
<DataTemplate DataType="{x:Type local:Child1ViewModel}">
  <local:Child1View />
</DataTemplate> 
```

*   现在在 ParentView 设置它`DataContext`是`local:ParentViewModel`
*   在 ParentViewModel 创建一个 Property(CurrentViewModel) 来保存 ChildModel。我使用 MVVM Light，因此我的属性类型通常`ViewModelBase`是我所有 ViewModel 的类型。
*   在 ParentView 中，将 ContentControl 的内容相应地绑定到此属性

例子：

```
<ContentControl Content="{Binding CurrentViewModel}" /> 
```

现在只需在 ParentViewModel 中切换此属性，您`ContentControl`就会得到相应的更新，您根本不需要添加任何 DP。

现在，如果 MyModel 实现 INPC 本身，在 MVVM Light 中可以通过让您的模型继承自`ObservableObject`（尽量不要`ViewModelBase`用作模型的基类。这只会令人困惑并增加混乱），您可以将模型公开为属性（ModelProperty ) 在您的 ViewModel 中

因此，在每个相应的视图中直接绑定到模型，你要做的就是像

```
<TextBlock Text="{Binding ModelProperty.TextBlockText}" /> 
```

现在因为模型实现了 INPC，如果在模型中进行更改，将自动反映在视图中。

就是这样，以后在相应部分添加功能时，请坐下来观察您的应用程序的发展

请注意，除此之外，如果您使用 Unity 之类的东西，您会获得依赖注入和排序，当您的应用程序增长时，这会进一步使生活变得更加轻松

# java - 有没有像地图这样的数据结构 ?

> ID：16056928
> 
> 赞同：4
> 
> 时间：2013-04-17T09:52:22.063
> 
> 标签：java, map

有时我需要将多个值存储到`Map`. 我知道解决此问题的几种方法，例如：

*   创建自己的`Map<K,V,W>`实现
    *   很难写，可以很容易地重用，如果需要更多的值就会出现问题
*   使用 n`Map<K,V>`
    *   易于实现，需要很多对象，密钥被保存很多次：如果你在某个地方删除一个密钥会发生什么？
*   使用 a`Map<K, Map<I, V>>`并使用第二个键存储值
    *   易于实现，在迭代时可能会出现问题（空值），还需要跟踪值键
*   创建一个存储`K, V, W, ...`和使用`List<MyStorageClass>`（或`Map<K, MyStorageClass>`） 的类
    *   似乎是一个不错的选择：易于实现，但可能需要实现许多接口（例如`Compareable`）
*   ...可能还有更多

但我想知道最佳实践 Java 方式是什么（是的，我知道：“这取决于”）？或者甚至有一个语言内置功能，我可以用它来减少实现工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T09:54:00.863

```
 Sometimes i need to store more than one value to a key in a Map 
```

那为什么不使用多图呢？[多图](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:54:03.133

[`MultiValueMap`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/util/MultiValueMap.html)从春天看。

# sql - 使用最大功能

> ID：16056935
> 
> 赞同：0
> 
> 时间：2013-04-17T09:52:35.240
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子：

```
TotalTimeTable
(date date,time time)

FinalListA
(date date, time time, A int, B int) 
```

我正在运行以下查询：

```
SELECT t1.date,
       t1.time,
       max(t2.time)
FROM TotalTimeTable t1,
     FinalListA t2
WHERE t2.date=t1.date
  AND t2.time <= t1.time
GROUP BY t1.date,
         t1.time
ORDER BY t1.date,
         t1.time 
```

有没有办法从同一个查询中 time = "max(t2.time)" 的 FinalListA 中提取 A 和 B？

总时间表：

```
date        time    
2006-01-01  9:30:01     
2006-01-01  9:30:02 
2006-01-01  9:30:03
2006-01-01  9:30:04
2006-01-01  9:30:05 
2006-01-01  9:30:06 
```

最终名单A：

```
date        time     A B
2006-01-01  9:28:01  1 4
2006-01-01  9:30:02  2 3
2006-01-01  9:30:04  4 7
2006-01-01  9:30:07  6 4
2006-01-01  9:30:10  8 9
2006-01-01  9:30:11  1 2 
```

预期结果是：

```
date        time     A B
2006-01-01  9:30:01  1 4
2006-01-01  9:30:02  2 3
2006-01-01  9:30:03  2 3
2006-01-01  9:30:04  4 7
2006-01-01  9:30:05  4 7
2006-01-01  9:30:06  4 7 
```

时间来自 TotalTimeTable FinalListA.time 不必在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:54:39.497

请试试：

```
SELECT t1.date,
       t1.time,
       (select top 1 t2.A from FinalListA t2 where t2.date=t1.date and t2.Time<=t1.Time order by t2.Time desc) A,
       (select top 1 t2.B from FinalListA t2 where t2.date=t1.date and t2.Time<=t1.Time order by t2.Time desc) B
FROM TotalTimeTable t1 
```

或使用左连接

```
select 
    x.date,
    x.Time,
    x.A,
    x.B
from(
    SELECT t1.*,
           t2.A,
           t2.B,
           ROW_NUMBER() over (PARTITION BY t1.date, t1.time order by t2.time desc) RNum
    FROM TotalTimeTable t1 left join
         FinalListA t2 on t1.date=t2.date and t2.Time<=t1.Time
)x where RNum=1 
```

或使用交叉应用

```
SELECT t1.date,
       t1.time, 
       x.*
FROM TotalTimeTable t1 cross apply (
SELECT TOP 1 t2.A, t2.B from FinalListA t2 where t2.date=t1.date and t2.Time<=t1.Time order by t2.Time desc)x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:03:06.190

使用交叉应用：

```
SELECT t1.date
   , t1.time
   , t2.time
   , t2.A
   , t2.B
FROM TotalTimeTable t1
CROSS APPLY (
 SELECT TOP(1)
  T2.time
 , T2.A
 , T2.B
FROM FinalListA t2
WHERE T2.date = T1.date
AND T2.time <= t1.time
ORDER BY T2.time DESC
) AS T2
ORDER BY t1.date,
     t1.time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:23:13.537

您可以将原始查询用作约束子查询（没有 ORDER BY）

```
SELECT t1.Date, t1.Time, t2.Time, t2.A, t2.B
FROM TotalTimeTable t1
INNER JOIN 
(
    SELECT t1.date,
           t1.time,
           maxt2Time = max(t2.time)
    FROM TotalTimeTable t1,
         FinalListA t2
    WHERE t2.date=t1.date
      AND t2.time <= t1.time
    GROUP BY t1.date,
             t1.time
) tmax
ON t1.Date = tmax.date AND t1.Time = tmax.Time
INNER JOIN FinalListA t2 ON t2.Date = tmax.Date AND t2.Time = tmax.maxt2Time 
```

# xpages - 在 XPage 中显示 IBM Connections 博客条目的列表

> ID：16056937
> 
> 赞同：0
> 
> 时间：2013-04-17T09:52:42.987
> 
> 标签：xpages, xpages-extlib, ibm-connections

一个多星期以来，我一直在尝试在 IBM Connections 的博客条目的 XPage 中显示一个列表。XPages 服务器和 Connections 服务器在同一个域中（例如，XPages 是通过 访问`intranet.mycompany.com`的，而 Connections 页面是通过 访问的`connections.mycompany.com`）。如果我在 Web 浏览器中登录其中一个，则无需再次登录即可访问另一个。管理员告诉我这是因为他们已将两者配置为使用相同的 ltpa 令牌。XPages 服务器运行安装了扩展库（版本 853.20121217-1354）的 Domino 8.5.3，而 Connections 服务器运行带有所有最新补丁的版本 4。两者都有使用 HTTPS 的证书。

我可以使用以下 URL 在我的 Web 浏览器中成功获取博客条目的 XML 列表：

`https://connections.mycompany.com/blogs/d33250c2-a80a-401c-b20d-d12d651b749c/feed/entries/atom?lang=en_gb&since=2013-03-02T08:30:00.000Z`

我的 XPage 有一个带有以下代码片段的数据视图：

```
<xe:dataView rows="10" id="dataView1"
            value="connectionsAtom1" columnTitles="true" var="entry"
            collapsibleDetail="true" detailsOnClient="true">
                    <xe:this.data>
                        <xe:connectionsData var="connectionsAtom1"
                            maxBlockCount="3" endpoint="connectionsLtpa">
                            <xe:this.serviceUrl>/blogs/d33250c2-a80a-401c-b20d-d12d651b749c/feed/entries/atom</xe:this.serviceUrl>
                            <xe:this.urlParameters>
                                <xe:urlParameter name="lang"
                                    value="en_gb">
                                </xe:urlParameter>
                                <xe:urlParameter name="since"
                                    value="2013-03-02T08:30:00.000Z">
                                </xe:urlParameter>
                            </xe:this.urlParameters>
                        </xe:connectionsData>
                    </xe:this.data> 
```

（注意：我在这里硬编码`serviceUrl`和`urlParameter`s 但它们实际上是在真实版本中计算的。）

当我在 Web 浏览器中打开此 XPage 时（是的，我已登录），我收到此错误：

`com.ibm.xsp.FacesExceptionEx: Error while reading the Connections entries`

我的问题是：我是否在浪费时间尝试使用`connectionsLtpa`端点？如果不是那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:00:20.950

不要重新发明轮子 :-) 解决这个问题的最简单方法是使用免费的[IBM Social Business Toolkit](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-92NHF9)。它带有您需要的所有代码和示例，并且专为此目的而设计。另外：如果您已登录，则您的浏览器有 LTPA 令牌，但没有服务器。要获取 LTPA 令牌，您应该能够使用[session.getSessionToken](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_GETSESSIONTOKEN_METHOD_SESSION_JAVA.html)然后在请求中重用它

# python - 如何在 Python 中执行 HTTP GET 操作？

> ID：16056939
> 
> 赞同：-5
> 
> 时间：2013-04-17T09:52:45.127
> 
> 标签：python

我希望我的代码将“请求 url”作为输入，并将输出作为“响应 XML”。这是我想用python来实现的。我不知道如何，因为我是 python 新手。虽然我知道如何在 Java 中做到这一点，并且为此我已经用 Java 开发了代码。因此，如果有人可以帮助我解决这个问题。

Java代码片段：

```
import java.net.*;    // import java packages.  
import java.io.*;
import java.net.URL;

public class API {
    public static void main(String[] args) throws Exception {
URL API = new URL("http:server//"); // Create a URL object 'API' that will locate the resources on remote server via HTTP protocol.
        URLConnection request = API.openConnection(); // Retrieve a URLConnection object 'request' that will establish http connection by using openConnection() method.
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    request.getInputStream())); // Create an Output stream ‘in’ that will call InputStreamReader to read the contents of the resources.
        String response;
        while ((response = in.readLine()) != null) // Write to Output stream until null.
            System.out.println(response); // prints the response on Console.
        in.close(); // Close Output stream.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:07:13.977

还有一个名为[requests](http://docs.python-requests.org/en/latest/)的不错的包，它使您在 Python 中的 http 需求变得更加容易。

对于获取请求，您将执行以下操作：

```
r = requests.get('http://www.example.com')
print(r.text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:55:16.657

```
from socket import *
s = socket()
s.connect(('example.com', 80))
s.send('GET / HTTP/1.1\r\n\r\n')
print s.recv(8192) 
```

?

或者：[http ://docs.python.org/2/library/urllib2.html](http://docs.python.org/2/library/urllib2.html)

```
import urllib2
f = urllib2.urlopen('http://www.python.org/')
print f.read(100) 
```

* * *

第一个选项可能需要更多标题项，例如：

```
from socket import *
s = socket()
s.connect(('example.com', 80))
s.send('GET / HTTP/1.1\r\nHost: example.com\r\nUser-Agent: MyScript\r\n\r\n')
print s.recv(8192) 
```

此外，我倾向于的第一个解决方案（因为，你做你想做的事，别无其他）要求你对 HTTP 协议有基本的了解。

例如，这是 HTTP 协议对 GET 请求的工作方式：

```
GET <url> HTTP/1.1<cr+lf>
<header-key>: <value><cr+lf>
<cr+lf> 
```

更多关于这里例如：[http ://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request)

# android - 片段内的自定义数字选择器

> ID：16056940
> 
> 赞同：2
> 
> 时间：2013-04-17T09:52:46.140
> 
> 标签：android, android-fragments, android-dialog, android-dialogfragment

请帮助我`NumberPicker`从[https://github.com/SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker)使用。我有片段，里面有按钮。单击按钮后，我想显示我的号码选择器（作为弹出窗口，而不是新屏幕）。所以我做了什么：我创造了`NumberPickerCustomDialog`

```
public class NumberPickerCustomDialog extends DialogFragment {
Context context;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // get context
    context = getActivity().getApplicationContext();
    // make dialog object
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // get the layout inflater
    LayoutInflater li = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // inflate our custom layout for the dialog to a View
    View view = li.inflate(R.layout.activity_dark, null);
    // inform the dialog it has a custom View
    builder.setView(view);
    // and if you need to call some method of the class
    NumberPicker np = (NumberPicker) view
            .findViewById(R.id.numberPicker);

    // create the dialog from the builder then show
    return builder.create();
} 
```

}

现在在我的片段中，单击按钮后，我尝试显示我的号码选择器：

```
FragmentManager fm = getFragmentManager();
            NumberPickerCustomDialog yourDialog = new NumberPickerCustomDialog();
            yourDialog.show(fm, "some_optional_tag"); 
```

我的布局看起来：

```
<?xml version="1.0" encoding="utf-8"?>
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:gravity="center">

<net.simonvt.numberpicker.NumberPicker
    android:id="@+id/numberPicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

我将库包含到项目中，复制了布局并出现错误：

```
04-17 11:33:28.264: E/AndroidRuntime(10891): FATAL EXCEPTION: main
04-17 11:33:28.264: E/AndroidRuntime(10891): android.view.InflateException: Binary XML file line #8: Error inflating class net.simonvt.numberpicker.NumberPicker
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at pl.package.jp.Me.NumberPickerCustomDialog.onCreateDialog(NumberPickerCustomDialog.java:26)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.DialogFragment.getLayoutInflater(DialogFragment.java:295)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-17 11:33:28.264: E/AndroidRuntime(10891):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:15:32.323

好的，我解决了这个问题。该库需要定义样式，即：

```
<style name="SampleTheme" parent="android:Theme">
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style>

<style name="SampleTheme.Light" parent="android:Theme.Light">
    <item name="numberPickerStyle">@style/NPWidget.Holo.Light.NumberPicker</item>
</style> 
```

在 AndroidManifest.xml 中，必须为要使用自定义数字选择器的活动定义样式：

```
<activity android:name=".Activity"
        android:theme="@style/SampleTheme.Light">

</activity> 
```

# java - java.lang.IllegalStateException：jboss 7.1.1 中的参数处理失败错误

> ID：16056941
> 
> 赞同：0
> 
> 时间：2013-04-17T09:52:48.773
> 
> 标签：java, ajax, jsp, jboss

> 8:46:12,814 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/ecmfi].[action]] (http--192.168.192.38-8080-4) Servlet 操作的 Servlet.service() 引发异常：java.lang.IllegalStateException：参数处理失败。在 org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:407) [jbossweb-7.0.13.Final.jar:] 在 org.apache.tomcat.util.http.Parameters.processParameters(Parameters. java:428) [jbossweb-7.0.13.Final.jar:] at org.apache.tomcat.util.http.Parameters.handleQueryParameters(Parameters.java:183) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.connector.Request.parseParameters(Request.java:2811) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.connector.Request.getParameterNames(Request.java:1333) [ jbossweb-7.0.13.Final.jar:] 在 org.apache.catalina。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T19:24:11.663

我在 JBoss / Spring 应用程序服务器上也遇到了这个异常。这是由于一个参数在表单中出现两次（同一路径的 2 次）。我建议确保表单中的所有字段以及提交的 URL 中的相应参数都是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:20:37.697

I had this same problem today and discovered that it was due to an bad URL parameter. One of my parameters had no name and no value:

[https://www.someurl.com?param1=A&param2=B&=&param3=c](https://www.someurl.com?param1=A&param2=B&=&param3=c)

Once I fixed the URL this error went away.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:51:46.520

我猜这是 JBOSS AS-7.1.1 的一个已知问题。

关注这些话题

[https://community.jboss.org/message/747210](https://community.jboss.org/message/747210)

[AS7-5143](https://issues.jboss.org/browse/AS7-5143)

到目前为止，唯一的解决方案似乎是降级到 JBoss AS 7.1.0。

# javascript - 沿链跳的有效算法

> ID：16056945
> 
> 赞同：0
> 
> 时间：2013-04-17T09:52:58.567
> 
> 标签：javascript, routing, chain

我在精神上陷入了以下问题：我需要一种有效的算法来沿着链创建可能的跃点。

“现实生活”情景如下：您有一条包含*n*个站点的路线。在这条路线上可以有不同的停靠模式，例如在*n=4*的路线上，在车站 1、3 和 4 有停靠点。

我认为这对于 Dijkstra 或 A* 等经典路由算法来说不算什么，但我非常肯定这很容易解决……但最有效的方法是什么？

创建这些集合的有效算法是什么？生成的行如下所示：

```
var sets = [
    stationCount2: [
        [0, 1]
    ],

    stationCount3: [
        [0, 2],
        [0, 1, 2]
    ],

    stationCount4: [
        [0, 3],
        [0, 1, 3],
        [0, 2, 3],
        [0, 1, 2, 3]
    ],

    stationCount5: [
        [0, 4],
        [0, 1, 4],
        [0, 2, 4],
        [0, 3, 4],
        [0, 1, 2, 4],
        [0, 1, 3, 4],
        [0, 2, 3, 4],
        [0, 1, 2, 3, 4]
    ]
]; 
```

或者有一个“已知”的算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:52:40.623

有一个包math_combinatoric：[http ://pear.php.net/package/Math_Combinatorics](http://pear.php.net/package/Math_Combinatorics)

# youtube-api - 视频维度“不支持查询”

> ID：16056948
> 
> 赞同：1
> 
> 时间：2013-04-17T09:53:10.190
> 
> 标签：youtube-api, user-activity, youtube-analytics

我对此处记录的 Youtube Analytics API 有疑问：

[https://developers.google.com/youtube/analytics/v1/content_owner_reports#Activity_Reports](https://developers.google.com/youtube/analytics/v1/content_owner_reports#Activity_Reports)

当我尝试通过 API 资源管理器执行此请求时，我检索到“400 错误请求”：

获取[https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3DUC-7h5ZrKE-igqZy31ZvFWGg&start-date=2012-01-31&end-date=2012-04-30&metrics=views&dimensions=video&key =](https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3DUC-7h5ZrKE-igqZy31ZvFWGg&start-date=2012-01-31&end-date=2012-04-30&metrics=views&dimensions=video&key=) {YOUR_API_KEY}

错误是：“不支持查询。请查看[https://developers.google.com/youtube/analytics/v1/available_reports](https://developers.google.com/youtube/analytics/v1/available_reports)上的文档以获取支持的查询列表。”

仅当我使用“视频”作为维度时才会出现错误（文档说“视频”是受支持的维度）。所有其他请求工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:34:49.383

我认为这个答案是针对同样的问题：

[无法使用 Youtube Analytics API 检索视频指标](https://stackoverflow.com/questions/12982845/unable-to-retrieve-video-metrics-using-youtube-analytics-api)

如果要运行维度=视频报告，则需要按观看次数降序排序，并且最多只能检索 10 个结果

# jpa - Openjpa cascade persist 将外键设置为 null

> ID：16056949
> 
> 赞同：0
> 
> 时间：2013-04-17T09:53:14.550
> 
> 标签：jpa, null, foreign-keys, cascade, persist

我有 2 个实体：*Routes*和*Hosts*。*Hosts*有一个 FK 字段 route_id 引用*Routes 的*PK，也称为 route_id。我创建对象*路由*并将*Hosts*对象添加到它的 hostsCollection。然后我坚持*Routes*对象。两个主键都正确生成，新的*Routes*记录没问题，但*Hosts*记录在 route_id 字段中有 NULL。我究竟做错了什么？

路线.java：

```
@Entity
public class Routes implements Serializable {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="ROUTE_ID")
    private long routeId;

    @Column(name="MSG_QUEUE_NAME")
    private String msgQueueName;

    @Column(name="RECEIPT_QUEUE_NAME")
    private String receiptQueueName;

    @Column(name="QM_NAME")
    private String qmName;

    @OneToMany(mappedBy="routeId", cascade={CascadeType.PERSIST,CascadeType.REMOVE})
    private Set<Hosts> hostsCollection;

    private static final long serialVersionUID = 1L;

    public Routes(String mqMgrName, String msgQName, String receiptQName, Set<Hosts> newHosts)
    {
        this.qmName = mqMgrName;
        this.msgQueueName = msgQName;
        this.receiptQueueName = receiptQName;
        this.hostsCollection = newHosts;
    }
    ...
} 
```

主机.java：

```
@Entity
public class Hosts implements Serializable {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="HOST_ID")
    private long hostId;

    @Column(name="HOST_NAME")
    private String hostName;

    @Column(name="KEEP_MSG")
    private String keepMsg;

    @Column(name="SEND_RCPT")
    private String sendRcpt;

    @ManyToOne(cascade=CascadeType.PERSIST)
    @JoinColumn(name="ROUTE_ID", referencedColumnName="ROUTE_ID")
    private Routes routeId;

    @OneToMany(mappedBy="hostId")
    private Set<Users> usersCollection;

    public Hosts(String hostName, String keepMsg, String sendRcpt)
    {
        this.hostName = hostName;
        this.keepMsg = keepMsg;
        this.sendRcpt = sendRcpt;
    }
    ...
} 
```

创建对象：

```
public String createNewHost()
{
    Set<Hosts> newHosts = new HashSet<Hosts>();
    Hosts newHost = new Hosts(this.hostName, this.keepMsg, this.sendRcpt);
    newHosts.add(newHost);
    Routes newRoute = new Routes(this.mqMgrName, this.msgQName, this.receiptQName, newHosts);
    dataBean.setCurrentRoute(newRoute);
    return "ok";
} 
```

持久对象：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void setCurrentRoute(Routes currentRoute) {
    em.persist(currentRoute);
    em.flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:19:37.123

在 Routes.hosts 上，您已映射过 =“routeId”，这意味着关系的拥有方是主机。

因此，除非您在 Host 上设置关系，否则它不会被持久化。

# xml - XSLT Select 将数据分组到两个不同的列表中

> ID：16056956
> 
> 赞同：2
> 
> 时间：2013-04-17T09:53:31.970
> 
> 标签：xml, xslt

这是另一个令人兴奋的人，也许对你来说很容易。

我有两个列表，一个是将 item-ids 连接到 group-ids 的映射，第二个是具有简单值的项目列表。我需要将项目值的数量累积到组总数。最初，这两个列表基于不同的 XML 文件。

```
<!-- List 1 mapping-->
<mapping>
    <sub id="1" item="a" group="a">
    <sub id="2" item="b" group="a">
    <sub id="3" item="d" group="b">
    <sub id="4" item="e" group="b">
    <sub id="5" item="f" group="c">
</mapping>

<!-- List 2 items -->
<items>
    <item id="a" val="OK"/> 
    <item id="b" val="ERROR"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="OK"/>
    <item id="f" val="OK"/>
</items> 
```

我目前的做法：

```
<xsl:variable name="failed-total">

<xsl:variable name="groups-total">
    <xsl:value-of select="count(mapping//sub[not(@group=preceding-sibling::sub/@group)])"/>
</xsl:variable>

<!--Selecting the unique groups of the first list:-->
<xsl:for-each select="mapping//sub[not(@group=preceding-sibling::sub/@group)]">
    <xsl:variable name="failed">
        <xsl:value-of select="items/item[@id=current()/@item and val='ERROR']"/>
    </xsl:variable>

<!-- TODO: add value of failed to failed-total value -->
</xsl:for-each> 
```

需要的输出：

```
Number of Groups: 3
Groups failed: 1 
```

将列表 2 更改为以下内容：

```
<!-- List 2 items -->
<items>
    <item id="a" val="ERROR"/> 
    <item id="b" val="ERROR"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="OK"/>
    <item id="f" val="OK"/>
</items> 
```

然后应该输出相同，因为项目 a 和 be 在同一组中：

```
Number of Groups: 3
Groups failed: 1 
```

欢迎任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:18:10.110

假设您提供的所有 XML 都在一个输入 XML 文档中（从您的问题中并不完全清楚），这应该可以工作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>
  <xsl:key name="kGroup" match="mapping/sub" use="@group" />
  <xsl:key name="kFailedItem" match="items/item[@val = 'ERROR']" use="@id" />

  <xsl:template match="/*">
    <xsl:variable name="distinctGroups"
                  select="mapping/sub[generate-id() = 
                                      generate-id(key('kGroup', @group)[1])]" />
    <xsl:variable name="failedGroups"
                  select="$distinctGroups[key('kGroup', @group)
                                            [key('kFailedItem', @item)]
                                         ]" />

    <xsl:value-of select="concat('Number of Groups: ', count($distinctGroups))"/>
    <xsl:text>&#xA;</xsl:text>
    <xsl:value-of select="concat('Groups Failed: ', count($failedGroups))"/>
  </xsl:template>

</xsl:stylesheet> 
```

在此输入上运行时：

```
<root>
  <!-- List 1 mapping-->
  <mapping>
    <sub id="1" item="a" group="a"/>
    <sub id="2" item="b" group="a"/>
    <sub id="3" item="d" group="b"/>
    <sub id="4" item="e" group="b"/>
    <sub id="5" item="f" group="c"/>
  </mapping>

  <!-- List 2 items -->
  <items>
    <item id="a" val="OK"/>
    <item id="b" val="ERROR"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="OK"/>
    <item id="f" val="OK"/>
  </items>
</root> 
```

结果是：

```
Number of Groups: 3
Groups Failed: 1 
```

`mapping`当和`items`元素存储在来自不同 XML 文档的单独变量中时，可以使用以下方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:exslt="http://exslt.org/common">
  <xsl:output method="text" indent="yes"/>

  <xsl:key name="kGroup" match="mapping/sub" use="@group" />

  <xsl:variable name="failedItems" select="$items/items/item[@val = 'ERROR']" />

  <xsl:template match="/">
    <!-- Jump into the $mappings variable context -->
    <xsl:apply-templates select="$mappings/mapping" />
  </xsl:template>

  <xsl:template match="mapping">
    <xsl:variable name="distinctGroups"
                  select="sub[generate-id() = 
                              generate-id(key('kGroup', @group)[1])]" />
    <xsl:variable name="failedGroups"
                  select="$distinctGroups
                             [key('kGroup', @group)/@item = $failedItems/@id]" />

    <xsl:value-of select="concat('Number of Groups: ', count($distinctGroups))"/>
    <xsl:text>&#xA;</xsl:text>
    <xsl:value-of select="concat('Groups Failed: ', count($failedGroups))"/>
  </xsl:template>

  <!-- NOTE: The definitions for the four variables below are just for
             demonstration purposes. In reality, I believe that your 
             $mappings and $items variables would be populated some
             other way. -->
  <xsl:variable name="mappingsNF">
    <mapping>
      <sub id="1" item="a" group="a"/>
      <sub id="2" item="b" group="a"/>
      <sub id="3" item="d" group="b"/>
      <sub id="4" item="e" group="b"/>
      <sub id="5" item="f" group="c"/>
    </mapping>
  </xsl:variable>
  <xsl:variable name="mappings" select="exslt:node-set($mappingsNF)" />

  <xsl:variable name="itemsNF">
    <items>
      <item id="a" val="OK"/>
      <item id="b" val="ERROR"/>
      <item id="c" val="OK"/>
      <item id="d" val="OK"/>
      <item id="e" val="OK"/>
      <item id="f" val="OK"/>
    </items>
  </xsl:variable>
  <xsl:variable name="items" select="exslt:node-set($itemsNF)" />
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T04:02:33.960

**这是一个简短的解决方案（只有一个模板），它从本地文件中读取 items.xml 文档**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kGroupByVal" match="@group" use="."/>

 <xsl:variable name="vItems" select=
  "document('file:///c:/temp/delete/items.xml')"/>

 <xsl:template match="/">
  <xsl:variable name="vGroups" select=
  "/*/*/@group
          [generate-id()=generate-id(key('kGroupByVal',.)[1])]"/>

  <xsl:variable name="vErrorIds" select=
    "$vItems/*/*[@val='ERROR']/@id"/>

  Number of groups: <xsl:value-of select="count($vGroups)"/>
  Groups failed: <xsl:value-of select=
  "count($vGroups[key('kGroupByVal',.)/../@item = $vErrorIds])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（映射）时：**

```
<mapping>
    <sub id="1" item="a" group="a"/>
    <sub id="2" item="b" group="a"/>
    <sub id="3" item="d" group="b"/>
    <sub id="4" item="e" group="b"/>
    <sub id="5" item="f" group="c"/>
</mapping> 
```

**第二个提供的 XML 文档（项目）在文件中`C:\temp\delete\items.xml`：**

```
<items>
    <item id="a" val="OK"/>
    <item id="b" val="ERROR"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="OK"/>
    <item id="f" val="OK"/>
</items> 
```

**产生了想要的正确结果：**

```
 Number of groups: 3
  Groups failed: 1 
```

**如果我们将 items.xml 文件修改为**：

```
<items>
    <item id="a" val="ERROR"/>
    <item id="b" val="ERROR"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="OK"/>
    <item id="f" val="OK"/>
</items> 
```

**然后再次产生正确的结果：**

```
 Number of groups: 3
  Groups failed: 1 
```

**如果我们将 items.xml 修改为：**

```
<items>
    <item id="a" val="ERROR"/>
    <item id="b" val="OK"/>
    <item id="c" val="OK"/>
    <item id="d" val="OK"/>
    <item id="e" val="ERROR"/>
    <item id="f" val="OK"/>
</items> 
```

**再次产生正确的结果：**

```
 Number of groups: 3
  Groups failed: 2 
```

# javascript - 重复指令 我的 javascript 代码有什么问题？

> ID：16056964
> 
> 赞同：0
> 
> 时间：2013-04-17T09:53:49.377
> 
> 标签：javascript, winjs

代码是示例，但结果似乎根本不合逻辑；这里的代码：

```
function lap_validation(event) {
    if (event.srcElement == document.getElementById("Suivant")) {
        console.log("Suivant fired " + event.srcElement);
        document.getElementById("msg").textContent = " Voulez vous vraiment passer à la lettre  suivante ?";
        console.log(document.getElementById("msg").textContent);
        var buyButton = document.getElementById("test");
        document.getElementById("confirmFlyout").winControl.show(buyButton);
        document.getElementById("no").addEventListener("click", function () {
                document.getElementById("confirmFlyout").winControl.hide();
                console.log("hide");

        }, false);
        document.getElementById("ok").addEventListener("click", function () {
            //next();
            //document.getElementById("confirmFlyout").winControl.hide();
            console.log("click on ok from flyout");
        }, false);

    }
} 
```

当我单击“Suivant”按钮时，当我第一次单击“确定”按钮时会出现一个弹出窗口我有这个输出：

```
Suivant fired [object HTMLButtonElement]
Voulez vous vraiment passer à la lettre  suivante ?
click on ok from flyout 
```

当我第二次点击时：

```
Suivant fired [object HTMLButtonElement]
Voulez vous vraiment passer à la lettre  suivante ?
click on ok from flyout
click on ok from flyout 
```

第三：

```
Suivant fired [object HTMLButtonElement]
 Voulez vous vraiment passer à la lettre  suivante ?
click on ok from flyout
click on ok from flyout
click on ok from flyout 
```

我不明白为什么它会重复 Flyout 按钮的指令（当我单击“否”按钮时也是如此）。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:49:16.673

您每次都在添加一个新的事件侦听器。最简单的解决方法是将...更改 `document.getElementById("ok").addEventListener("click", function () {...` 为 `document.getElementById("ok").onclick = function() {...`

addEventListener 的一大优势是它允许您添加多个事件侦听器。正如你在这里看到的那样，这可能会咬你一口。您每次都在添加一个新的事件侦听器。如果您改用 onclick，那么您每次都会*替换事件侦听器，因此 click 事件只会存在一个事件侦听器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:01:41.993

由于示例对每个输出都使用了 console.log() ，因此这种情况的解决方案很清楚：每次单击时`ok`都会调用`console.log("click on ok from flyout");`，从而将另一行写入控制台。

如果您的真实代码不使用console.log，请为我们提供一个示例——您的代码会按照应有的方式运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:13:46.937

使用 onclick 注册事件也有另一面。它可能会在更多涉及的应用程序中覆盖其他已注册的事件处理程序，然后最终追踪事件如何不进入某些流程。最好遵循`_initializeEventHandlers()`在 winjs 页面中使用方法的做法。从 onready 事件处理程序调用它并在此位置注册所有事件处理程序。如果在某些情况下需要（例如共享合约事件），请覆盖`unload()`方法以取消注册处理程序。

```
WinJS.UI.Pages.define('/pages/mypage/mypage.html',
{
    ready: function onready(element, options)
    {
        this.element = element;
        this.options = options;
        this._initialize();
    },
    _initialize: function initialize()
    {
        this._initializeEventHandlers();
    },
    _initializeEventHandlers: function initializeEventHandlers()
    {
        // all element with id can be access by the variable names 
        ok.addEventListener('click', this._onokclick.bind(this));
        no.addEventListener('click', this._onnoclick.bind(this));
    },
    _onxyz: function _onxyzhandler(event)
    {
        confirmFlyout.winControl.show(buyButton);
    },
    _onokclick: function onokclick(event)
    {
        console.log('ok button in flyout clicked');
    },
    _onnoclick: function onnoclick(event)
    {
        confirmFlyout.winControl.hide();
        console.log('no button in flyout clicked');
    }
}); 
```

# python - Python icalender 在 ORGANIZER 中因变音符号而窒息

> ID：16056966
> 
> 赞同：2
> 
> 时间：2013-04-17T09:53:51.057
> 
> 标签：python, character-encoding, icalendar

我正在尝试修复从 horde 获得的 ical 文件（重复事件在导入后两个小时内关闭）。因此，我编写了以下脚本，该脚本在 ical 文件的“ORGANIZER”标签中阻塞了变音符号：

```
#!/usr/bin/python

import sys
from icalendar import Calendar, Event
from datetime import timedelta

# reccurring events are off by two hours
reccurrence_timedelta=timedelta(hours=2)

# default
ical_file="test.ical"

# input file 
try:
    ical_file=sys.argv[1]
except IndexError:
    pass

cal = Calendar.from_ical(open(ical_file,'rb').read())
for component in cal.walk():
    if component.name == "VEVENT":
        try:
            component['rrule']
            dtstart = component.decoded('dtstart')
            dtend = component.decoded('dtend')
            new_dtstart=dtstart + reccurrence_timedelta
            new_dtend =dtend + reccurrence_timedelta
            new_cal=Calendar()
            new_cal.add('dtstart',new_dtstart)
            new_cal.add('dtend',new_dtend)
            component['dtstart']=new_cal['dtstart']
            component['dtend']=new_cal['dtend']
        except KeyError:
            pass

new_ics_filename = "corrected_" + ical_file
newics_file = open(new_ics_filename, 'wb')
cal_as_ical=cal.to_ical()
newics_file.write(cal_as_ical)
newics_file.close() 
```

以 utf-8 编码的 ical 文件是

```
BEGIN:VCALENDAR
VERSION:2.0
X-WR-CALNAME:Kalender von acme\, admin
PRODID:-//The Horde Project//Horde_iCalendar Library\, Horde 3.3.5//EN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:20130416T100000Z
DTEND:20130416T110000Z
DTSTAMP:20130416T092616Z
UID:20130416112341.10064jz0k4j7uem8@acmenet.de
CREATED:20130416T092341Z
LAST-MODIFIED:20130416T092341Z
SUMMARY:wichtiger termin 1
ORGANIZER;CN="acme, ädmin":mailto:adm-acme@mydomain.de
LOCATION:im büro
CLASS:PUBLIC
STATUS:CONFIRMED
TRANSP:OPAQUE
END:VEVENT
END:VCALENDAR 
```

错误是

```
No handlers could be found for logger "icalendar"
Traceback (most recent call last):
   File "./fix_horde_ical.py", line 48, in <module>
    cal_as_ical=cal.to_ical()
  File "/usr/local/lib/python2.7/dist-packages/icalendar-3.3-py2.7.egg/icalendar    /cal.py", line 485, in to_ical
    return self.content_lines().to_ical()
  File "/usr/local/lib/python2.7/dist-packages/icalendar-3.3-py2.7.egg/icalendar/cal.py", line 480, in content_lines
    contentlines.append(Contentline.from_parts((name, params, values)))
  File "/usr/local/lib/python2.7/dist-packages/icalendar-3.3-py2.7.egg/icalendar  /parser.py", line 510, in from_parts
    % (name, params, values))
ValueError: Property: 'ORGANIZER' Wrong values "Parameters({'CN': 'acme, \xc3\xa4dmin'})" or "'mailto:adm-acme@mydomain.de'" 
```

“LOCATION”标签中的元音变音似乎没有问题，但“ORGANIZER”的元音变音有问题。

从错误中可以看出，我使用的是 python 2.7 和 icalendar 3.3。我是否需要遍历每个 ORGANIZER 并删除非 ascii 字符？还是有更通用、更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:15:17.273

想我修好了：

```
--- parser.py.orig  2013-04-17 21:29:47.253235481 +0200
+++ parser.py   2013-04-17 22:04:44.323634292 +0200
@@ -296,7 +296,7 @@
     items = self.items()
     items.sort()  # To make doctests work
     for key, value in items:
-            value = paramVal(value)
+            value = paramVal(unicode(value, DEFAULT_ENCODING))
         result.append('%s=%s' % (key.upper(),
                                  value.encode(DEFAULT_ENCODING)))
     return ';'.join(result) 
```

另请参阅 github 上的问题： [https ://github.com/collective/icalendar/issues/101?source=c](https://github.com/collective/icalendar/issues/101?source=c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:23:42.687

这可能是由于 icalendar 中的错误而发生的。

据我所知，icalendar 最近刚刚被重构以处理 unicode 中的事情。它有一个编码测试套件，但显然不是很全面。具体来说，它不会测试`ORGANIZER;CN`样式中指定的编码（请参阅[https://github.com/collective/icalendar/blob/master/src/icalendar/tests/encoding.ics](https://github.com/collective/icalendar/blob/master/src/icalendar/tests/encoding.ics)）。

我建议[提出一个问题](https://github.com/collective/icalendar/issues)，看看它是如何解决的。

# php - PHP - 组合变量

> ID：16056967
> 
> 赞同：0
> 
> 时间：2013-04-17T09:53:51.367
> 
> 标签：php, variables

我正在编写一个多语言页面。

我有三个变量：

*   `$helper->namejob_de`（德语；来自数据库）
*   `$helper->namejob_en`（英语语言；来自数据库）
    和
*   `define("LANG", $TABS[$TABX]['lang']);`
    在`config.php`（包含“de”或“en”） 中定义语言

现在，如您所见，DB 内容以 _de 或 _en 结尾。

是否可以将这两个变量结合起来？

我试过了：

```
echo $$helper->namejob_.LANG 
```

但是，显然这行不通。对于两个变量的这种“合并”还有其他选择吗？

**编辑：**
阅读所有评论后，我决定重构我的数据库/代码。它真的很脏，所以我会尝试另一种选择。不管怎么说，还是要谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:58:29.500

你可以试试这个：

```
echo $helper->{"namejob_" . LANG}; 
```

它应该可以工作，但不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:03:35.717

看一个简约的例子

```
<?php
class x
{
    function __construct()
    {
        $this->x_1 = 1;
        $this->x_2 = 3;
    }
}

$x = new x();
$y=1;
echo $x->{"x_".$y};
?> 
```

您应该制作一个处理这种“肮脏”工作的类，在语言的构造函数中传递一个变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:56:43.960

您可以使用以下语法来执行此操作：`$var_{$language};`但是，您可能不想这样做。我建议使用数组或对象来封装这个问题。如果您必须组合字符串，您将永远无法找到它的设置位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:04:12.350

我认为除了使用两个不同的变量来存储两种不同的语言之外，您还可以使用两个具有相同变量名的语言文件。包括当前活动的语言文件。这种方法用于 oscommerce。

# c++ - c ++如何从图像中获取像素坐标？

> ID：16056970
> 
> 赞同：0
> 
> 时间：2013-04-17T09:53:54.977
> 
> 标签：c++, qt, coordinates, pixel

我在 C++ 中有一个图像，我想获取一个像素的坐标（相对于图像）点击它（我的图片可用并打开以点击它）。我不知道如何定义执行此操作所需的信号和插槽。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:05:42.407

有针对您的案例提供的活动。阅读[这篇文章](https://stackoverflow.com/questions/3449277/)以获取更多说明。

我假设您正在使用控件来显示源自 的图像`QWidget`，例如[`QImage`](http://qt-project.org/doc/qt-4.8/qimage.html)。 `QWidget`派生类可以处理鼠标事件，例如单击和发送[`QMouseEvent`](http://qt-project.org/doc/qt-4.8/qmouseevent.html). 这包含*相对于接收事件的小部件的**x*和*y*坐标。通过调用（返回 a ） 使用这些来读取像素值。*`QImage::pixel(x, y)``QRgb`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:16:58.277

```
eventFilter(QObject *obj, QEvent *event){
//blabla
if (event->type() == QEvent::MouseButtonPress) {
QMouseEvent* MouseEvGrip = (QMouseEvent*)event;
Point2f clickePixel((float)MouseEvGrip->x(), (float)MouseEvGrip->y());
//blabla
}
} 
```*

# jsf - 如何在支持组件中获取输入组件的提交值

> ID：16056972
> 
> 赞同：2
> 
> 时间：2013-04-17T09:53:59.663
> 
> 标签：jsf, jsf-2, composite-component

我制作了一个带有背衬的复合组件`UIInput`。它包含一个数字微调器。更改微调器时，新值不会发送到支持组件。

我已经简化了情况（似乎不需要支持，但是问题仍然存在）。

`Sytem.out.println`突出问题。

复合组件：

```
<cc:interface componentType="periodInput" >
    <cc:attribute name="value" type="org.joda.time.Period" />
</cc:interface>

<cc:implementation>
    <p:spinner id="count" min="0" binding="#{cc.countComponent}" converter="javax.faces.Integer" label="Every "/>
</cc:implementation> 
```

支持组件：

```
@FacesComponent("periodInput")
public class PeriodBacking extends UIInput implements NamingContainer {

    private UIInput countComponent;
    // And getter & setter.

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        Period period = (Period) getValue();
        if(period == null) {
            period = Period.weeks(1).withPeriodType(PeriodType.weeks());
        }
        int count;
        count = period.get(period.getFieldTypes()[0]);
        countComponent.setValue(count);
        super.encodeBegin(context);
    }

    @Override
    public Object getSubmittedValue() {
        return this;
    }

    @Override
    protected Object getConvertedValue(FacesContext context, Object newSubmittedValue) {
        // PROBLEM: Always prints out '1':
        System.out.println("Count: " + count); 
        int count = (Integer) countComponent.getValue();
        Period totalPeriod = new Period(0).withDays(count);
        return totalPeriod;
    }

    @Override
    public String getFamily() {
        return UINamingContainer.COMPONENT_FAMILY;
    }
} 
```

复合组件的使用方式如下：

```
<custom:Period value="#{cc.attrs.trackedproduct.samplePeriod}" /> 
```

豆中`trackedproduct`存在的地方。`@ViewScoped`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:23:34.413

```
int count = (Integer) countComponent.getValue(); 
```

您应该获得提交的值，而不是模型值。模型值此时（在转换/验证阶段）尚未被提交/转换/验证的值更新。

```
int count = Integer.valueOf((String) countComponent.getSubmittedValue()); 
```

* * *

**与具体问题**无关**`getSubmittedValue()`，您的和`getConvertedValue()`没有正确实施。这应该这样做：**

 **```
@Override
public Object getSubmittedValue() {
    return countComponent.getSubmittedValue();
}

@Override
protected Object getConvertedValue(FacesContext context, Object newSubmittedValue) {
    int count = Integer.valueOf((String) newSubmittedValue);
    Period totalPeriod = new Period(0).withDays(count);
    return totalPeriod;
} 
```

### 也可以看看：

*   [具有多个输入组件的复合组件](http://balusc.blogspot.com/2013/01/composite-component-with-multiple-input.html)- 包含有关如何正确编写此类支持组件的详细说明。**

# javascript - Javascript / jQuery：history.go(-1) 的任何事件？

> ID：16056977
> 
> 赞同：1
> 
> 时间：2013-04-17T09:54:05.107
> 
> 标签：javascript, jquery, forms, events, post

在我的表单服务器端验证中，我使用`history.go(-1);`在验证错误的情况下重定向回来。这种方式表单数据保留在那里，用户可以修复数据并重新提交表单。

在我使用验证码之前效果很好。如果用户提交了错误的验证码，服务器验证会使用`history.go(-1);`. 这样，页面实际上并没有重新加载，验证码图像也不会刷新。所以用户不断提交错误的验证码。

那么每次页面通过`history.go(-1);`. 这样我就可以调用一个函数来重新加载验证码图像。

我必须这样做，因为我的表单处理是在单独的服务器上完成的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:57:57.017

这[`window.onpopstate`](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)就是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:02:00.920

您的解决方案是使验证码图像不可缓存。您需要指示您的验证码脚本发送带有图像的响应标头，可以是过去的“过期”日期，也可以是无缓存日期。这样，浏览器将在每个 history.go(-1) 上重新加载验证码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:03:31.313

我认为你需要一个历史适配器：

```
History.Adapter.bind (window, 'statechange', function () {}); 
```

这将在每次历史状态更改时触发该功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T09:19:49.520

```
var url = location.href;
window.onpopstate = function(event) {
    if(url != location.href) {
        /*Your Function here
         * I'm using this to load the contentBox when user goes back or forward in  
         * browserhistory -- perfect for sites with ajax
         * works on all browser but u need Jquery. (Safari can't use window.location.href)
         * for functions to add dynamic params or removing them just ask ;)
         * define the url var to prevent function to fire on reload
         */
    }
}; 
```

# http - 预期但未收到 etag 时的响应代码？

> ID：16056980
> 
> 赞同：1
> 
> 时间：2013-04-17T09:54:19.740
> 
> 标签：http

如果服务器期望设置 ETag 标头但请求不包含它，则服务器发送的适当 HTTP 响应代码是什么？最合适的是 BAD REQUEST (400) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:00:47.493

[RFC 2616 中](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)的描述将状态**403**定义为“服务器理解请求，但拒绝执行它”。

由于明确由服务器解释*请求*被拒绝的原因，因此带有“所有请求必须包含 ETag 标头”的正文的 403 似乎是正确的响应。

RFC 中将状态 400 定义为由于“格式错误的语法”，这与接收您不喜欢外观的请求不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:57:16.113

如果您的意思是缺少*条件*请求标头字段（例如 If-None-Match），那么答案将是状态 428（请参阅[https://www.rfc-editor.org/rfc/rfc6585#section- 3](https://www.rfc-editor.org/rfc/rfc6585#section-3)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:39:56.763

它是有条件的 GET 吗？因为如果无法验证客户端缓存的有效性，那么带有完整正文的普通 200 OK 对我来说似乎完全合适。

# r - 替换频率图上的标签

> ID：16056987
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:54:38.187
> 
> 标签：r, plot

我绘制了一个可变性别的频率表，其编码如下：女性：2，男性：3。

在图中，我看到了 2 和 3，但我想放置“女性”和“男性”，而不更改 data.frame 中的值，因为它会占据更多位置。

我怎样才能做到这一点？

`plot(table4, main="Frequency table",xlab= "Gender", ylab="Country" )`

![在此处输入图像描述](https://i.stack.imgur.com/FYrgX.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:36:04.827

首先，制作了一些样本数据并用函数计算了频率表`table()`。

```
 df<-data.frame(Sex=sample(c(2,3),10,replace=TRUE),Country=sample(c(4,5),10,replace=TRUE))
 table4<-table(df)
 table4
   Country
Sex 4 5
  2 4 1
  3 2 3 
```

使用功能`str()`，您可以看到`table4`. `Sex`级别 2 和 3 存储为维度名称。因此，您可以使用功能`attr()`和选择替换它们`$Sex`。

```
 str(table4)
 'table' int [1:2, 1:2] 4 2 1 3
 - attr(*, "dimnames")=List of 2
  ..$ Sex    : chr [1:2] "2" "3"
  ..$ Country: chr [1:2] "4" "5"
 attr(table4,"dimnames")$Sex<-c("Female","Male") 
```

现在绘制更改`table4`的对象。

```
plot(table4,main="Frequency table",xlab= "Gender", ylab="Country" ) 
```

![在此处输入图像描述](https://i.stack.imgur.com/VjOwJ.png)

# mysql - 如何唯一标识规范一对多关系

> ID：16056991
> 
> 赞同：0
> 
> 时间：2013-04-17T09:54:41.653
> 
> 标签：mysql, database, sqlite, normalization, database-schema

我有一个数据库，其中有药物提醒和药物提醒有不同的时间表，这些时间表（一天两次）有不同的提醒发生（提醒到来的日期），所以都有一对多的关系。

```
 |----SCHEDULE1 ----|----OCCURRENCE1

                        |----SCHEDULE1 ----|----OCCURRENCE2

MEDICATION_REMINDER --- |----SCHEDULE2 ----|----OCCURRENCE1

                        |----SCHEDULE2 ----|----OCCURRENCE2 
```

现在我可以存储这些值

MEDICATION_REMINDER（MEDICATION_REMINDER_ID，OTHER_DETAILS）

SCHEDULE(MEDICATION_REMINDER_ID_FK,SCHEDULE_ID,TIMES) //PK是MEDICATION_REMINDER_ID_FK,SCHEDULE_ID

OCCURRENCE(SCHEDULE_ID_FK,OCCURRENCE_ID,DATE_TIME) //目前没有主键

现在无法唯一标识发生，例如

> M1 和 M2 有两个时间表 S1 (7:00 AM) 和 S2 (8:00 PM)，S1 有 3 次出现，例如 o1 ,o2 ,o3 和 S2 也有 3 次出现 o1 ,o2 ,o3

现在我的桌子是

```
MEDICATION_REMINDER
_____________________
M1
M2
_____________________

SCHEDULE
__________________
M1   S1    7:00AM
M1   S2    8:00PM
M2   S1    7:00AM
M2   S2    8:00PM
__________________

OCCURRENCE
__________________
S1    O1   21-04-13 7:00AM
S1    O2   22-04-13 7:00AM
S1    O3   23-04-13 7:00AM
S2    O1   21-04-13 9:00PM
S2    O2   22-04-13 9:00PM
S2    O3   23-04-13 9:00PM

S1    O1   21-04-13 7:00AM
S1    O2   22-04-13 7:00AM
S1    O3   23-04-13 7:00AM
S2    O1   21-04-13 9:00PM
S2    O2   22-04-13 9:00PM
S2    O3   23-04-13 9:00PM

__________________ 
```

如何唯一标识发生表行。将MEDICATION_REMINDER_ID存储在OCCURRENCE表中是否好。我不想这样做，因为 OCCURRENCE 表和 MEDICATION_REMINDER 没有直接关系。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:05:26.110

虽然 MEDICATION_REMINDER 和 OCCURRENCE 没有直接关系，但 OCCURRENCE 与 SCHEDULE 有直接关系。SCHEDULE的主键是MEDICATION_REMINDER_ID，SCHEDULE_ID，所以要建立SCHEDULE和OCCURRENCE的关系，需要两个表之间有外键关系。这意味着 SCHEDULE 的主键必须显示在 OCCURRENCE 中，因此 MEDICATION_REMINDER_ID 需要包含在 OCCURRENCE 中。这也提供了唯一标识 OCCURRENCE 实例的方法。