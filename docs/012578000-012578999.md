# StackOverflow 问答 12578000-12578999

# parsing - MS 项目解析器偏移量

> ID：12578004
> 
> 赞同：0
> 
> 时间：2012-09-25T07:18:55.140
> 
> 标签：parsing, ms-project

我需要有关 Microsoft Project 的帮助。我正在为 mpp 格式编写解析器，并且像 ole 容器一样读取它，但问题是我真的不知道存储中的偏移量。我很努力，但我找不到它们。目前我正在使用 2007 版 (12)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:25:01.150

I look after [MPXJ](http://mpxj.sf.net), which parses the MPP 8, 9, 12 and 14, file formats. You may find it helpful to look at the code used by MPXJ... and you may even find you can use MPXJ anyway rather than writing your own parser.

# iphone - 在box2d iphone中以touchesMoved方向对身体施加力

> ID：12578005
> 
> 赞同：0
> 
> 时间：2012-09-25T07:18:58.473
> 
> 标签：iphone, box2d

我是box2d的新手。我有一个问题，即

当我触摸身体并触摸移动（在触摸移动方法中我不想移动身体）到某个地方并触摸释放时。

在touchend中，我像这样施加力...

```
 b2Vec2 force = b2Vec2(0.0,15.0);

     ballBody->SetLinearVelocity(force); 
```

并以这种方式找出黑白触摸开始点到触摸结束点的角度

```
 float angleRadians = atan2(touchBegin.x - touchEnd.x, touchBegin.y - touchEnd.y);
    float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
    cocosAngle1 = -1 * angleDegrees; 
```

在那个时候，如何用 cocosAngle1（touchend 方向）对身体施加力。就像“Paper Toss”游戏中的纸一样。

如何在身体的触摸移动方向上施加力？...

请给我解释...

# java - java中if语句中的&和&&有什么区别？

> ID：12578012
> 
> 赞同：-7
> 
> 时间：2012-09-25T07:19:35.327
> 
> 标签：java, android

> **可能的重复：**
> [& 和 && 的差异](https://stackoverflow.com/questions/5564410/difference-in-and)

```
if (true && true) {
    System.out.println("test if");
}

if (true & true) {
    System.out.println("test if");
} 
```

两者都给出相同的输出。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T07:22:24.653

`&&`短路，而`&`没有。例子：

```
if (methodA() && methodB()) {
    ...
} 
```

在这种情况下，如果`methodA`已经返回 false，`methodB`则不会调用。形式上，如果您有一个表达式`a && b`,`b`仅在评估为 时才被`a`评估`true`。

除了明显的性能优势外，这对于`null`检查特别有用：

```
if (x != null && x.getSomeValue()) {
    ...
} 
```

如果你`&`在这里使用 as single ，`x.getSomeValue()`即使 are 也会被评估`x`，`null`导致异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:21:08.547

在第一种情况下，您不测试 if 的第二部分：`&&`运算符从左到右执行并在第一个`false`值处停止。

这在这种情况下可能很有用：

```
if (a!=null && a.doSomething()==23) { 
```

因为它可以防止 nullPointerException。

当您测试布尔条件时，请始终使用`&&`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:21:36.947

`&`是[位操作](http://en.wikipedia.org/wiki/Bitwise_operation#AND)

`&&`逻辑[链接两个布尔值](http://en.wikipedia.org/wiki/Logical_conjunction)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T07:21:59.530

请参阅： [http ://www.jguru.com/faq/view.jsp?EID=16530](http://www.jguru.com/faq/view.jsp?EID=16530)

> 这取决于参数的类型...
> 
> 对于整数参数，单个 & 符号 ("&") 是“按位与”运算符。除了两个布尔参数之外，没有为任何东西定义双与号（“&&”）。
> 
> 对于布尔参数，单与号构成（无条件）“逻辑与”运算符，而双与号（“&&”）是“条件逻辑与”运算符。也就是说，单 & 号总是计算两个参数，而双 & 号只有在第一个参数为真时才会计算第二个参数。
> 
> 对于所有其他参数类型和组合，应该会发生编译时错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:27:21.570

&& 是逻辑与。true && true 是真的，其他的都是假的。& 是按位与。(10 & 8) = 8

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T07:21:58.790

在 & 语句中，它将检查左侧和右侧语句。在 && 中，将仅检查语句的一侧（如果一侧为真，则不会检查另一侧）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T07:22:02.417

&& 是逻辑与

所以你要确保这两个陈述都是真实的。

& 是按位与运算符

看看这里：

[http://www.javaforstudents.co.uk/TrueFalse](http://www.javaforstudents.co.uk/TrueFalse)

# iphone - iPhone中的XML解析没有得到任何响应

> ID：12578018
> 
> 赞同：0
> 
> 时间：2012-09-25T07:20:05.650
> 
> 标签：iphone, xml-parsing, nsxmlparser

我需要从 WCF 服务调用 XML 文件并在 iPhone 中解析 XML 的内容。我可以调用服务 URL，但是在使用 NSXMLParser 解析时，我无法在 XML 中获得特定的属性值。我在 XCode 中使用 ViewController 应用程序。

我的 XML 文件是这样的：

```
<GetCompanyResponse xmlns="http://schemas.datacontract.org/2004/07/DomainModel" 
 xmlns:i="http://www.w3.org/2001/XMLSchema-    
 <CompanyList>
    <Company>
      <Id>b9ca2e32-ce88-4d72-99ce-9bc592511e85</Id>
    </Company>
 </CompanyList>

   NSString *urlString = [NSString stringWithFormat:@"http://192.168.0.107:8732/Design_Time_Addresses/IServices/

        AppointmentService/json/GetCompany";
        NSURL *jsonUrl =[NSURL URLWithString:urlString];
        NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:jsonUrl];
        [parser setDelegate:self];
        [parser setShouldProcessNamespaces:NO];
        [parser setShouldReportNamespacePrefixes:NO];
        [parser setShouldResolveExternalEntities:NO];

        [parser parse];
        [parser release];  

        - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
         namespaceURI:(NSString *)namespaceURI qualifiedName:
         (NSString *)qName attributes:(NSDictionary *)attributeDict
         {

           if ([elementName isEqualToString:@"Company"]) {
            NSString *name=[attributeDict objectForKey:@"Id"];

        }
        } 
```

但是当我检查 'name' 中的值时，它返回 nil。我不知道怎么了。我应该改变什么？如何获取 ID 属性的值？

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:27:14.660

id 不是名称的属性。将代码放入 didEndElement：在 .h 中定义 strVal NSString；

```
Inside found character:
{
   strVal=string;
}

Inside parserDidEndElement method:
     {

       if ([elementName isEqualToString:@"Id"]) {
        NSString *name=strVal;

    }
    } 
```

这对你有用。

# performance - NHibernate LINQ 查询性能，哪个代码片段更好？

> ID：12578019
> 
> 赞同：3
> 
> 时间：2012-09-25T07:20:07.250
> 
> 标签：performance, linq, fluent-nhibernate, benchmarking, queryover

这个问题是问以下两种方法中的哪一种更受鼓励（以及出于什么原因）？

我正在使用 C# 4.0 在 ServiceStack REST 应用程序中使用 FluentNHibernate，但这个问题对于 NHibernate LINQ 查询是普遍的。

是否更鼓励：

**（方法 1）**快速运行一个**简单**的查询，该查询返回与用户 ID 匹配的所有行：

```
// Query the User by id
var user = session.Get<User>(request.UserId); 
```

然后在返回的 List 上分别使用 LINQ 进一步缩小结果范围：

```
// 'User' contains a 'List<Location>'
var locations = user.Locations.Where(location =>
                        location.Timestamp >= (request.MinTimestamp.HasValue ? request.MinTimestamp.Value : 0) &&
                        location.Timestamp <= (request.MaxTimestamp.HasValue ? request.MaxTimestamp.Value : DateTime.Now.ToTimestamp()));

return locations; 
```

**（方法 2）或者**，是否更鼓励运行**更复杂**的查询，在单个查询中执行上述操作：

```
var locationsQuery = session.QueryOver<LocationModel>()
                        .Where(table => table.User.Id == request.UserId)
                        .And(table => table.Timestamp >= (request.MinTimestamp.HasValue ? request.MinTimestamp.Value : 0))
                        .And(table => table.Timestamp <= (request.MaxTimestamp.HasValue ? request.MaxTimestamp.Value : DateTime.Now.ToTimestamp()));

return locationsQuery.List(); 
```

**如果**我的目标是：

a) 更快的执行时间

* * *

**基准（修订）**

修订后的完整测试代码： http: [//pastebin.com/0ykKwcxX](http://pastebin.com/0ykKwcxX)

**基准输出：**

**方法 1**在**5000 次迭代**中花费了**147.291 秒**。

 ***查询最后迭代的结果：*
{时间戳= 1348659703485，纬度= 209.40000}
{时间戳= 1748659703486，Latitude = 179.55000，Vongitude = 209.55000}
{时间戳= 1348659703487，Latitude = 179.70000，Vongitude = 209.70000}
{时间戳= 1348659703488 , 纬度=179.85000, 经度=209.85000 }
{ 时间戳=1348659703489, 纬度=180.00000, 经度=210.00000 }

**方法 2**在**5000 次迭代**中花费了**133.728 秒**。

 ***查询最后迭代的结果：*
{时间戳= 1348659703485，纬度= 209.40000}
{时间戳= 1748659703486，Latitude = 179.55000，Vongitude = 209.55000}
{时间戳= 1348659703487，Latitude = 179.70000，Vongitude = 209.70000}
{时间戳= 1348659703488 , 纬度=179.85000, 经度=209.85000 }
{ 时间戳=1348659703489, 纬度=180.00000, 经度=210.00000 }

**差异：方法 2 快了大约 13.5 秒。**

* * *

b) 长期重复使用和稳定性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:54:57.103

如果您的目标是更快的执行时间，那么我认为第二种方法最好，因为它不会对用户实体进行不必要的加载。话虽如此，我不是 NHibernate 用户，所以不确定，并且可以肯定的是，如果重要的话，你应该进行一些测量的性能测试（“你不能改进你无法测量的东西” - 不记得是谁说的，但这是一个很好的格言）。

Ayende 写了很多值得一看的好 NHibernate 帖子（例如[http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id](http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id)）

When it comes to 'long term re-use and stability' this kind of depends how you're using this code. You could always refactor the query part so that your userid and timestamp filters are extension methods. See this post for an example: [http://lostechies.com/jimmybogard/2012/08/30/evolutionary-project-structure/](http://lostechies.com/jimmybogard/2012/08/30/evolutionary-project-structure/)****

# android - 从android的本机扩展加载地图活动时如何使flex控件可见？

> ID：12578020
> 
> 赞同：2
> 
> 时间：2012-09-25T07:20:09.647
> 
> 标签：android, android-layout, flex-mobile, air-native-extension

我被困在我想在底部显示按钮和标签等弹性控件以及在顶部显示原生 android 地图的地步。发生的情况是地图活动覆盖了整个屏幕。有没有办法像 IOS 那样设置地图视图的框架。还是有另一种方法可以让我在单个视图中显示 flex 控件以及本机 android 地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:04:27.847

您应该使用 xml.Place mapview 在此 xml 的顶部和底部的按钮创建位置图布局。

# android - 为什么从远程机器运行时，monkeyrunner 不工作？

> ID：12578021
> 
> 赞同：2
> 
> 时间：2012-09-25T07:20:11.990
> 
> 标签：android, python, centos, monkeyrunner, rpyc

我需要在远程机器上运行一个 monkeyrunner 脚本。我正在使用 python 来自动化它和 RPyC，以便我可以连接到其他机器，一切都在 CentOS 中运行。

下面写的是我使用的命令：

> 导入 rpyc
> 
> 导入子流程
> 
> conn = rpyc.classic.connect("192.XXX.XXX.XXX",XXXXX)
> 
> conn.execute ("打印'你好'")
> 
> subprocess.Popen("/opt/android-sdk/tools/monkeyrunner -v ALL
> 
> /opt/android-sdk/tools/MYSCRIPT.py", shell=True)

这是结果：

> 无法打开指定的脚本文件
> 
> 用法：monkeyrunner [选项] script_file
> 
> -s MonkeyServer IP 地址
> 
> -p MonkeyServer TCP 端口
> 
> -v MonkeyServer 日志记录级别

然后我意识到，如果你使用下面的命令，它就是在你的机器上运行命令。（例如：Popen 中的命令是“ls”，它会给你的结果是 LOCALHOST 当前目录中的文件和目录列表）因此，该命令是错误的。

> subprocess.Popen("/opt/android-sdk/tools/monkeyrunner -v ALL
> 
> /opt/android-sdk/tools/MYSCRIPT.py", shell=True)

所以我用这个替换了代码

> conn.modules.subprocess.Popen("/opt/android-sdk/tools/monkeyrunner -v ALL
> 
> /opt/android-sdk/tools/MYSCRIPT.py", shell=True)

并给我这个错误信息

> =======远程回溯=======回溯（最近一次调用最后）：文件“/usr/lib/python2.4/site-packages/rpyc-3.2.2-py2.4.egg /rpyc/core/protocol.py”，第 300 行，在 _dispatch_request res = self._HANDLERS[handler](self, *args) 文件“/usr/lib/python2.4/site-packages/rpyc-3.2.2- py2.4.egg/rpyc/core/protocol.py”，第 532 行，在 _handle_call 中返回 self._local_objects[oid](*args, **dict(kwargs)) 文件“/usr/lib/python2.4/subprocess .py”，第 542 行，在**init** errread，errwrite）文件“/usr/lib/python2.4/subprocess.py”，第 975 行，在 _execute_child 中引发 child_exception OSError：[Errno 2] 没有这样的文件或目录
> 
> ======= 本地异常 ======== Traceback（最近一次调用最后）：文件“”，第 1 行，在？文件“/usr/lib/python2.4/site-packages/rpyc-3.2.2-py2.4.egg/rpyc/core/netref.py”，第 196 行，**调用** 返回 syncreq(_self, consts.HANDLE_CALL, args, kwargs) 文件“/usr/lib/python2.4/site-packages/rpyc-3.2.2-py2.4.egg/rpyc/core/netref.py”，第 71 行，在 syncreq 返回 conn.sync_request( handler, oid, *args) 文件“/usr/lib/python2.4/site-packages/rpyc-3.2.2-py2.4.egg/rpyc/core/protocol.py”，第 438 行，在 sync_request raise obj OSError: [Errno 2] 没有这样的文件或目录

我认为它无法运行该文件，因为我没有管理员访问权限（因为我没有提供远程机器的用户名和密码）？

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:24:41.347

如我所见，您已经连接

```
conn = rpyc.classic.connect("192.XXX.XXX.XXX",XXXXX)
conn.execute ("print 'Hello'") 
```

尝试使用下一个命令：

```
subprocess.Popen("/opt/android-sdk/tools/monkeyrunner 
/opt/android-sdk/tools/MYSCRIPT.py", shell=True) 
```

代替：

```
subprocess.Popen("/opt/android-sdk/tools/monkeyrunner -v ALL
/opt/android-sdk/tools/MYSCRIPT.py", shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:08:37.933

尽管运行 ls，pwd 工作正常，但使用此函数运行 monekyrunner 不起作用。

> conn.modules.subprocess.Popen("/opt/android-sdk/tools/monkeyrunner -v ALL
> /opt/android-sdk/tools/MYSCRIPT.py", shell=True)

下面的代码块解决了我的问题：

> 导入 rpyc
> 
> 导入子进程
> 
> conn = rpyc.classic.connect("192.XXX.XXX.XXX",XXXXX)
> 
> conn.execute ("打印'你好'")
> 
> **conn.modules.os.popen("monkeyrunner -v ALL MYSCRIPT.py",)**

希望这对那些遇到与我相同问题的人有所帮助。

# .net - HttpClient 在 WinRT / Win8 中缺少响应标头

> ID：12578022
> 
> 赞同：2
> 
> 时间：2012-09-25T07:20:20.350
> 
> 标签：.net, windows-8, windows-runtime, dotnet-httpclient

我在 Windows 8 应用程序中使用 HttpClient，它似乎故意在响应中隐藏自定义标头。例如：

我们收到的响应有一个名为**“Sample-Header: 123”的自定义标头**

我希望响应内容中的标头包含值为“123”的“Sample-Header”

```
var client = new HttpClient();
var response = await client.GetAsync(uri);

string sample;
IEnumerable<string> values;

if (response.Content.Headers.TryGetValues("Sample-Header", out values))
{
   // This never happens!
   sample = values.First();
} 
```

即使我枚举了标题，我也永远找不到我们的自定义标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:36:50.140

行。显然，您可以使用两种不同的标头集合。以下代码有效：

```
var client = new HttpClient();
var response = await client.GetAsync(uri);

string sample;
IEnumerable<string> values;

if (response.Headers.TryGetValues("Sample-Header", out values))
{
   // This happens!
   sample = values.First();
} 
```

你看得到差别吗？内容标头与响应标头完全不同。

感谢微软的 Govind。

# jquery - 如何修复：默认大小在 jQuery 检测到宽度和高度之前显示，并且在我手动刷新之前不会调整大小

> ID：12578023
> 
> 赞同：0
> 
> 时间：2012-09-25T07:20:21.833
> 
> 标签：jquery, browser, processing, processing.js

我使用 processing.js 和 jQuery 以及下面的代码来检测浏览器的窗口大小

```
 void setup() {
    size( $(window).width(),$(window).height() ); 
```

**但是，默认大小是在jQuery成功检测到宽度和高度之前显示的，并且在我手动刷新浏览器之前不会调整大小**。</p>

我正在考虑**自动页面刷新**。

那么如何在文档加载后告诉计算机刷新页面呢？

顺便说一句，window.innerWidth，window.innerHeight与我在 jQuery 中看到**的一样**

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:36:39.893

在 jQuery 中，它应该显示如下分辨率：

```
alert($(window).width() + ' X ' + $(window).height()); 
```

无需刷新页面。对于调整大小，您可以使用

```
$(window).resize(function() {
 $('body').text($(window).width() + ' X ' + $(window).height());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:17:10.720

这在 P5 setup() 中对我有用：

```
size(window.innerWidth, window.innerHeight); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:47:47.767

我在这里回答了一个类似的问题：

[https://stackoverflow.com/a/12717983/1560583](https://stackoverflow.com/a/12717983/1560583)

我希望这会有所帮助，我已经在下面重新发布了答案：

以下是我使用 Zerb Foundation 3 响应式 Web 框架、Javascript、jQuery 和 Processing.js 解决此问题的方法。如果您想深入了解源代码，可以查看[Living Map Project 。](http://www.livingmapproject.com/)

在 javascript/jquery 中：

```
// handle page resizing
$(window).resize(function() {
var pjs = Processing.getInstanceById('livingmap');
pjs.resizeSketch(document.getElementById('div_p5canvas').offsetWidth,  document.getElementById('div_p5canvas').offsetHeight);
} ); 
```

在您的 .pde 处理 js 代码中（注意：使用 zurb 的基础 3、我定义的网格以及如何将其转换为像素，我觉得计算效果很好：

```
void resizeSketch(int w, int h) {
  if (w < 680) {
    size(w, floor(float(w)/680*610) - 30);
    } else size(680, 610 - 30);
} 
```

在您的 html 中：

```
<div class="flex-video widescreen" id="div_p5canvas"
<canvas id="livingmap" data-processing-sources="livingmap_2.pde" style="height:auto; width:auto; focus { outline: 0; }" tabindex="1"></canvas>
</div> 
```

# javascript - Coffeescript 重写函数

> ID：12578025
> 
> 赞同：0
> 
> 时间：2012-09-25T07:20:31.147
> 
> 标签：javascript, jquery, coffeescript, return, anonymous-function

我有一个必须从 Coffeescript 生成的函数：

```
$("#user-tabs ul").idTabs({
    click: function(id, all, container, settings) {
        alert(id);
    } 
}); 
```

所以，我写了以下咖啡脚本：

```
$("#user-tabs ul").idTabs ->
    click: (id, all, container, settings) ->
       alert(id)
       return 
```

但它不起作用。在输出（.js）中，我生成了以下代码：

```
$("#user-tabs ul").idTabs(function() {
  return {
    click: function(id, all, container, settings) {
      alert(id);
    }
  };
}); 
```

因此，click 函数编写正确，但它被一些“函数返回”闭包包裹。如何重写它以达到所需的代码（在最顶部）？是否可以 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:22:30.020

只是缩进对象，不要让它成为一个函数（做什么`->`）。

```
$("#user-tabs ul").idTabs
    click: (id, all, container, settings) ->
       alert(id)
       return 
```

[看到它](http://coffeescript.org/#try%3a%20%20%20%20%24%28%22#user-tabs%20ul%22%29.idTabs%0A%20%20%20%20%20%20%20%20click%3a%20%28id,%20all,%20container,%20settings%29%20-%3E%0A%20%20%20%20%20%20%20%20%20%20%20alert%28id%29%0A%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:23:02.627

删除*定义*函数的 -> （你只想*调用*它）：

```
$("#user-tabs ul").idTabs 
    click: (id, all, container, settings) ->
       alert(id)
       return 
```

# wcf - 如何动态生成 W SDL 文件并调用服务？

> ID：12578035
> 
> 赞同：0
> 
> 时间：2012-09-25T07:21:30.003
> 
> 标签：wcf, xsd, wsdl

我正在寻找 C# 中的示例，如何基于 XSD 文件以编程方式创建 WSDL 文件，其中 WSDL 文件包含 1 个主 XSD 文件，该文件包含几个对后续 XSD 文件的导入指令。之后，应根据创建的 WSDL 文件调用 WCF 服务。服务合同是已知的。

我在互联网上花了很多时间试图找到一些东西，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:29:46.993

.net sdk 附带一个名为 wsdl.exe 的程序，您可以使用 Process 类的方法调用该程序。

看到这个：

[http://msdn.microsoft.com/es-es/library/e8zac0ca.aspx](http://msdn.microsoft.com/es-es/library/e8zac0ca.aspx)

和这个：

[http://msdn.microsoft.com/en-us/library/7h3ystb6(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/7h3ystb6(v=vs.100).aspx)

# java - 如何获取 DateTime 对象的特定部分？

> ID：12578039
> 
> 赞同：0
> 
> 时间：2012-09-25T07:21:39.803
> 
> 标签：java, jodatime

我有一个存储当前时间的 DateTime 对象 DT。当我打印 DT 时，我希望它只打印时间部分，即 HH-MM-SS（H = 小时，M = 分钟，S = 秒）并忽略日期部分。

我怎样才能做到这一点 ？就此而言，是否甚至可以创建一个仅包含 HH-MM-SS 而与 date 无关的日期时间对象？如果这是真的，那么我可以简单地打印它而不是提取 HH-MM-SS 部分。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:23:37.133

如果你只想要时间，你应该使用 a[`LocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html)而不是 a `DateTime`。您可以使用[`DateTime.toLocalTime()`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#toLocalTime%28%29)来获取现有`DateTime`.

如果你真的想在*格式化*`DateTime`时保留但只显示时间部分，你可以创建一个只包含时间部分的模式，但我通常认为这是一种设计味道。*[`DateTimeFormatter`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:31:19.440

您可以使用 java.util.Date 包中的 Java 日期格式化程序。

像 ：

```
  日期 todaysDate = new java.util.Date();

  1\. // 将日期格式化为 yyyy-MM-dd HH:mm:ss 例如 2008-10-10 11:21:10
     SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
     字符串 formattedDate = formatter.format(todaysDate);

  2\. // 将日期格式化为 yyyy-MM-dd 例如 2008-10-10
     formatter = new SimpleDateFormat("yyyy-MM-dd");
     formattedDate = formatter.format(todaysDate);

  3\. // 将日期格式化为 MM/dd/yyyy 例如 10/10/2008
    formatter = new SimpleDateFormat("MM/dd/yyyy");
    formattedDate = formatter.format(todaysDate);

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:35:16.623

使用Java，您可以这样做

```
Date obj = new Date() ;
        System.out.println(new SimpleDateFormat("hh:mm:ss").format(obj)) ; 
```

但这可能是一个昂贵的电话。但是 jodatime 提供了 LocalTime ，您可以尝试一下。*

# php - Yii 枚举类型的使用方法

> ID：12578041
> 
> 赞同：0
> 
> 时间：2012-09-25T07:21:41.107
> 
> 标签：php, yii

如何通过代码示例使用 Yii 枚举。我已经经历了一些例子，但没有得到确切的，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:30:24.513

可以实例化两种类型的枚举：常规`Enums`和`DBEnums`. 不同之处在于`DBEnum`枚举值必须存在于数据库表中（a 的理想场景是数据库中`DBEnum`的枚举值）。在使用`DBEnum`值之前执行对数据库的检查。查看示例以获取更多信息

要阅读更多内容，请访问此[http://www.yiiframework.com/extension/enum/](http://www.yiiframework.com/extension/enum/)所有功劳都归功于之前的链接

# jquery - 在将其更改为图像之前如何不显示数字？（jQuery 计数器）

> ID：12578047
> 
> 赞同：0
> 
> 时间：2012-09-25T07:21:52.300
> 
> 标签：jquery, html, css

我正在使用漂亮的 jQuery 计数器，您可以在这里查看 - [https://github.com/sophilabs/jquery-counter](https://github.com/sophilabs/jquery-counter)，但我遇到了麻烦。

当页面有很多内容（图片、其他）时，在 Firefox 中它首先显示：

![](../Images/7abd31bd988078b1722d57a6dac8ffcb.png)

在它显示之后：

![](../Images/bea4c5fb56618b8adc0d750c0306cf76.png)

数字是一样的，但我的意思是它首先显示文本，然后显示图像。

只有额外的CSS是：

```
.counter_class 
{
  float: right;
  padding: 20px;
} 
```

和 HTML：

```
 <div class="counter_class">
  <span class="counter" data-direction="up" data-interval="1"
         data-format="999999" ><%= @counter %></span>
 </div> 
```

有人可以建议我如何在不损害性能的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:40:03.823

似乎您的内容被即时替换，如果您不希望您可以在 css 中隐藏您的 div 并在文档准备好的 jQuery 中显示它。

首先尝试类似`.counter_class { display: none; }`的操作，然后在您的 jquery 调用计数器`$('.counter_class').show();`或尝试以某种方式加速您的页面之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:52:06.013

你有几个选择：

*   将 CSS 文件放在 head 部分的顶部。
*   在显示页面之前预加载图像。
*   显示默认图片，加载图片后会被替换

祝你好运！

# javascript - 我可以删除 var 关键字吗

> ID：12578049
> 
> 赞同：1
> 
> 时间：2012-09-25T07:21:57.650
> 
> 标签：javascript, events, window, coordinates

以下代码取自“JavaScript by Example Second Edition”。

我认为代码

```
if (!e) var e = window.event; // Internet Explorer 
```

应该

```
if (!e) e = window.event; // Internet Explorer 
```

你怎么看？这样对吗？或者代码应该保持原样？

```
<html>
<head>
    <title>Mouse Coordinates</title>
    <script type="text/javascript">
        function getCoords(e) {
            var x = 0; // x and y positions
            var y = 0;
            if (!e) var e = window.event; // Internet Explorer
            if (e.pageX || e.pageY) { // Firefox
                x = e.pageX;
                y = e.pageY;
            }
            else if (e.clientX || e.clientY) {
                x = e.clientX + document.body.scrollLeft
              + document.documentElement.scrollLeft;
                y = e.clientY + document.body.scrollTop
                + document.documentElement.scrollTop;
            }
            // x and y contain the mouse position
            // relative to the document
            alert(x + ", " + y);
        }
    </script>
    </head>
        <body>
            <div style="background-color: aqua; position: absolute; top: 50px"
                onmouseover="return getCoords(event);">
                <h1>Mouse positions are relative to the document, not the
&lt;div&gt; container</h1>
            </div>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:24:57.500

代码是正确的，但没有`var`关键字也可以工作。

由于`e`是函数的形式参数（无论是否通过），因此无需声明它`var`。

在 MSIE`e`上没有传递，因此它被分配了全局`window.event`对象的值。

请注意，`var`关键字本身*不会*覆盖任何现有值，它仅用于在本地范围内*声明*变量。如果变量已经有一个值，那么“提升”将声明移动到作用域的顶部，但将任何赋值留在原来的位置。

一种更惯用的写法是：

```
 function getCoords(e) {
     e = e || window.event;
     ...
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:25:20.867

是的，您可以删除该函数内的 var 语句。

函数中的变量以两种方式在范围内声明，或者通过“var”关键字，或者通过定义为传递给函数的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:28:22.670

是的，我会删除`var`，因为它重新定义了已经在同一范围内建立的局部变量（因为它是函数的参数）。

结果应该是相同的，`var`只是多余的，但它会造成混乱。

另请注意，这`var`在 Javascript 中有点有趣，因为它出现在函数顶部或其他任何地方都没有关系，它总是会影响整个范围，甚至是它*之前*的代码：

```
x = 12;    // using the variable "before" it is declared works
var x = x + 1; 
```

我会在条件块中避免它（因为它太混乱了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:23:24.300

这`var`完全没有任何作用，可以在不影响任何浏览器中的任何内容的情况下删除。同名函数参数的存在意味着在局部函数范围内已经定义了一个同名的变量（即使它的值是`undefined`），在这种情况下`var`被指定为无操作。

既然如此，我建议将其删除，因为它的存在只会引起混乱。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T07:26:02.723

省略 var 关键字时，将在全局范围内创建变量。因此，当您在这种情况下省略 var 关键字时，您会创建一个全局变量 e，它可以被任何其他 javascript 函数读取和更改。考虑到“e”是一个非常常见的标识符，这可能会导致一些非常意想不到的错误。

通常，您应该始终使用 var 关键字。

# .htaccess - .htaccess 捕获当前 url 并将 url 作为查询字符串到页面

> ID：12578058
> 
> 赞同：3
> 
> 时间：2012-09-25T07:22:29.743
> 
> 标签：.htaccess, url-mapping

我想通过 .htaccess 捕获 url 并将该 url 作为查询字符串发送到页面，该页面将检查数据库中 url 的存在。

所以我的问题是我有一个带有 www.example.org 的旧站点，它有 4200 个旧链接，应该映射到新站点 www.example.net。

现在我创建了一个 url 映射器应用程序，其中旧站点 url (4200) 与新站点 url 映射。在这个 url mapper 应用程序中，我有一个 .htaccess，它将在将 url 发送到应用程序之前捕获它。现在，我想在这里捕获指向旧站点的用户点击的完整 URL，然后将 URL 发送到一个页面，其中查询字符串作为完整 URL，可以对照 (4200) 旧 URL 检查，然后重定向到新站点的相应页面。

我怎样才能做到这一点。在 .htaccess 中获取完整的 URL 并将其作为请求参数传递给页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T08:49:13.150

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/mapping_script.php
RewriteRule ^(.*)$ /mapping_script.php?url=http://%{HTTP_HOST}%{REQUEST_URI} [L,QSA] 
```

你会用`mapping_script.php`你的这个脚本被调用的任何东西来替换。如果您不需要`http://domain.name/`URL 的一部分，请`http://%{HTTP_HOST}`从规则的目标中删除。

# spring - 用于 Websphere 的带有 JPA 和 jndi 数据源的 Spring JTA 事务

> ID：12578061
> 
> 赞同：4
> 
> 时间：2012-09-25T07:22:35.897
> 
> 标签：spring, jta

我有多个数据源和一个配置了 JPA 的数据库。我正在使用 websphere 7。我希望将所有这些数据源配置为全局事务。我正在使用以下弹簧配置，但事务未按预期的全局事务工作。如果一个数据库出现故障，则另一个数据库将被提交，这不是单个全局事务。你能帮我在我做错的地方吗？

我有 2 个数据源，其中一个配置为 id="us_icfs_datasource"，另一个使用 JPA

```
<jee:jndi-lookup id="entityManagerFactory" jndi-name="persistence/persistenceUnit"/> 
    <bean id="pabpp" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager" />

<!-- Needed for @Transactional annotation -->
    <tx:annotation-driven/>

<jee:jndi-lookup id="US_ICFS_DATASORCE" 
        jndi-name="jdbc/financing_tools_docgen_txtmgr"
        cache="true"
        resource-ref="true"
        proxy-interface="javax.sql.DataSource" /> 
```

我还在 web.xml 中添加了以下代码

```
 <persistence-unit-ref>
    <persistence-unit-ref-name>persistence/persistenceUnit</persistence-unit-ref-name>
    <persistence-unit-name>persistenceUnit</persistence-unit-name>
  </persistence-unit-ref> 

  <persistence-context-ref>
    <persistence-context-ref-name>persistence/persistenceUnit</persistence-context-ref-name>
    <persistence-unit-name>persistenceUnit</persistence-unit-name>
  </persistence-context-ref> 
```

下面是我使用事务的代码

```
> @Transactional    public TemplateMapping addTemplateMapping(User user,
> TemplateMapping templateMapping)          throws
> TemplateMappingServiceException {         .... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:48:54.130

在 Websphere 上，您应该使用此 bean 连接到 Websphere 事务管理器：

```
<bean id="transactionManager"
     class="org.springframework.transaction.jta.WebSphereUowTransactionManager"/> 
```

另见这篇[文章](http://www.ibm.com/developerworks/websphere/techjournal/0609_alcott/0609_alcott.html)

编辑：

为了使用两阶段提交（即确保跨多个资源的一致性），您将需要使用 XA 数据源。有关详细信息，请参阅[本文](http://www.ibm.com/developerworks/websphere/library/techarticles/0407_woolf/0407_woolf.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:34:57.010

首先，参与全局事务的数据源必须是 javax.sql.XADataSource 类型。

您还必须将持久性单元中的事务类型设置为 JTA（而不是 RESOURCE_LOCAL）。

并且您需要通知您的 JPA 实现您想要进行全局事务。

# git - 获取任意 git 工作副本并与远程分支完全相同

> ID：12578062
> 
> 赞同：4
> 
> 时间：2012-09-25T07:22:44.307
> 
> 标签：git, version-control, git-clone, git-remote

假设我有一个从某个远程克隆的任意本地 git 工作目录。我想让本地 git 存储库与远程存储库完全相同，而不管本地目录自克隆以来发生了什么。我不想再做一个完整的克隆。

假设本地工作目录有：

*   其他未跟踪的文件
*   删除的文件
*   阶段性变化。
*   可能在某个任意分支上。
*   从远程克隆后有一堆提交

现在我想让这个本地存储库准确地反映远程。这是我当前的解决方案，但我不确定它是否涵盖所有情况以及是否有更简单的解决方案：

```
git stash
git clean -f -x -d
git checkout master
git fetch origin
git reset --hard origin/master
git pull origin master 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:28:58.713

以下命令集应使您进入与远程分支相同的状态：

```
git checkout -f master                # Check out the local 'master' branch
git fetch origin                      # Fetch the 'origin' remote
git reset --hard origin/master        # Reset all tracked files to remote state
git clean -dxff                       # Remove all non-tracked files 
```

请注意（出于显而易见的原因），这些命令具有潜在的破坏性 - 也就是说，任何被此覆盖且未保存在可通过其他方式访问的提交中的任何本地更改都将丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:13:20.113

```
git reset --hard 
```

将转储您所做的任何更改，包括您已暂存的任何更改。

```
git clean -xdf 
```

将删除工作目录中由于忽略或排除而导致 git 未跟踪的任何内容。

```
git checkout HEAD 
```

不会把你放在任何分支上，这样你就可以清理所有东西了。

```
git branch | xargs git branch -D 
```

将删除您所有的本地分支机构

```
git tag -l | xargs git tag -d 
```

将删除您的所有标签

```
git prune origin 
```

将摆脱不再在远程上的任何跟踪分支

```
git fetch 
```

将从您没有的遥控器获取任何分支和标签。您可以在此处停下来检查您想要使用的任何远程分支，同时使用以下命令创建本地分支

```
git checkout origin/master 
```

或者您可以创建本地分支，指向所有现有远程分支在您获取时指向的位置

```
git branch -r | xargs -n 1 git checkout 
```

# asp.net-mvc - asp.net call view 从另一个区域的视图

> ID：12578063
> 
> 赞同：1
> 
> 时间：2012-09-25T07:22:48.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, view, controller, area

所以我有一个带有树视图的视图。当您从树视图中选择一个节点时，树视图旁边应该会出现一个视图。这很简单。您只需从视图中调用控制器并将其加载到 div 中，如下所示：

```
 LoadUserControl('@Url.Action("ViewName", "Controller")', { 'parameter': parameter}, $("#div")); 
```

如果您正在调用的视图位于您当前工作的同一区域，这将非常有效。但是，当它位于另一个区域时，这将不起作用。当您拨打电话时，找不到您正在寻找的控制器。有人知道如何做到这一点吗？

我正在使用 asp.net mvc3、c#、jquery 和 html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:24:18.617

您可以在助手的`routeValues`参数中指定区域名称：`Url.Action`

```
var url = '@Url.Action("SomeAction", "SomeController", new { area = "AreaName" })';
LoadUserControl(url, { 'parameter': parameter}, $('#div')); 
```

# c++ - 如何避免文件扩展名超过三个字符的 CFileFind 误报？

> ID：12578065
> 
> 赞同：2
> 
> 时间：2012-09-25T07:22:53.563
> 
> 标签：c++, visual-c++, mfc, cfilefind

当我尝试调用`CFileFind.FindFile(_T("D://Folder//*.txt"))`时，当唯一的文件是“foobar.txta”时，该方法返回 true。

但是，我不希望文件 foobar.txta 包含在查找结果中。我怎么做到这一点？可能通过使用其他方法或其他 if ？我是 C++ 的新手 :))

注意：如果 exension 小于 3，则似乎不会发生此问题，例如，如果过滤器为“*.tx”且文件为“foobar.txt”，则该方法仍然（正确）返回 false。另外，[这里](http://www.experts-exchange.com/Programming/System/Windows__Programming/MFC/Q_26274078.html)似乎报告了这个问题，但似乎我需要付费才能看到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:01:10.750

这似乎是 CFindFile （或 Win32 API [FindFirstFile](http://msdn.microsoft.com/en-us/library/aa364418%28v=vs.85%29.aspx)）中的一个错误。但是您可以稍后通过调用 CFindFile::GetFileName 来确定真正的扩展名：

```
CFindFile finder;
BOOL bWorking = finder.FindFile(L"*.txt");

while (bWorking)
{
    bWorking = finder.FindNextFile();

    if (finder.GetFileName().Right(finder.GetFileName().ReverseFind(L'.')) != L".txt")
        // the file extension is not .txt
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:25:06.503

正如其他回答者所指出的，明显的错误是因为 Windows 文件具有 8.3 别名，导致“foobar.txta”被检测为“foobar.txt”。要确保 CFileFind 找到的文件确实与通配符模式匹配，请使用[“PathMatchSpec”](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773727%28v=vs.85%29.aspx)来验证 finder.GetNextFile() 返回的文件。`PathMatchSpec`似乎不受 8.3 别名的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:20:07.090

我希望这会奏效。

```
WIN32_FIND_DATA ffd;
    CStringList strFileNameList;
    CStringList strFileMask;
    int iCntFiles = 0;
    HANDLE          hFind     = INVALID_HANDLE_VALUE;
 CONST CHAR cszFileName[] = "test.txt";

 strFileMask = strFileName.Left(strFileName.Find(cszFileName)) + "*.txt";
    hFind          = FindFirstFile(strFileMask.GetBufferSetLength(strFileMask.GetLength()), &ffd);

    if (INVALID_HANDLE_VALUE == hFind) 
    {
        return;
    } 
    else
    {
        // List all the other files in the directory.
        strFileNameList.AddTail(ffd.cFileName);
        iCntFiles++;
        while (FindNextFile(hFind, &ffd) != 0) 
        {
            strFileNameList.AddTail(ffd.cFileName);
            iCntFiles++;
        }
} 
```

现在从现在保存的所有文本文件中`CStringList`可以提取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:56:29.673

这是向后兼容的常见 Windows 行为。没有“8.3”名称的文件可能有一个简短的同义词。即`"foobar.txta"`也称为。**_** `"foobar.txt"`如果您的意思确实只是`*.txt`，则必须手动检查结果。这些结果将使用长名称，因此您可以丢弃`*.txt?`文件

之后您可以使用 进行手动检查`PathMatchSpec("foobar.txta", "*.txt")`。请注意，尽管有名称，但此函数实际上仅适用于扩展匹配。不要期望任何东西，但`*.ext`要工作。

另请参阅[是否有不搜索短文件名的 Windows FindFirstFile/FindNextFile API 的替代方法？](https://stackoverflow.com/questions/8070224/is-there-an-alternative-to-the-windows-findfirstfile-findnextfile-api-that-doesn)

# django - 显示多个图像的问题

> ID：12578069
> 
> 赞同：1
> 
> 时间：2012-09-25T07:23:24.967
> 
> 标签：django, django-forms, django-uploads

我想显示存储在数据库中的图像。

如果我用这个。**查看**产品 = Upload_files.objects.get (id=1)

并以**形式**

```
<img src="/media/{{ form.image }}/" /> 
```

然后它将显示**id=1**的图像。但是，如果我想显示数据库中的所有图像，我应该怎么做。

我在视图中使用了这个（不确定它是否正确）

```
product = Upload_files.objects.all() 
```

但我不知道我应该在表单中写什么，以便显示所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:12:40.707

抓取他查看的所有产品，然后在模板中循环它们。

// 看法

```
products = Upload_files.objects.all() 
```

// 模板

```
{% for product in products %}
    <img src="/media/{{ product.image }}/" />
{% endfor %} 
```

# wpf - windows phone 中的数据绑定问题

> ID：12578072
> 
> 赞同：0
> 
> 时间：2012-09-25T07:23:38.093
> 
> 标签：wpf, silverlight, windows-phone-7, xaml, windows-phone

您好我正在尝试研究 windows phone 中的数据绑定属性。我用谷歌搜索了一些博客。从这些博客中了解到，我在 ListBox 中绑定了值。现在列表框显示了许多具有名称、数量、日期、图像属性的产品。但是现在我正在尝试这样做，如果单击列表中的任何产品，我想导航到其他页面并在那里显示产品详细信息。但是在该页面中，数据绑定不起作用。只是那些文本块什么也没显示。我在下面包含了我的代码。请帮助我在我的代码中找到问题。

**事务.cs**

```
public class Transaction
{
    public String Name { get; set; }
    public String Date { get; set; }
    public int Amount { get; set; }
    public String Type { get; set; }

    public Transaction(String name, String date, int amount,String type)
    {
        this.Name = name;
        this.Date = date;
        this.Amount = amount;
        this.Type = type;
    }
}

public class ShowItem 
{
    public String SelectedItemName { get; set; }
    public String SelectedItemImage { get; set; }
    public String SelectedItemDate { get; set; }
    public String SelectedItemAmount { get; set; }

    public ShowItem(String name, String date, String amount, String image)
    {
        this.SelectedItemName = name;
        this.SelectedItemDate = date;
        this.SelectedItemAmount = amount;
        this.SelectedItemImage = image;
    }
} 
```

**主页.xaml**

```
<Grid  Height="530" Grid.Row="1" VerticalAlignment="Top" Margin="0,30,0,0">
            <ListBox Margin="0,0,0,0" Name="TransactionList">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Button  Width="460" Height="150" BorderThickness="0" Click="user_click" Name="rowButton" Background="{Binding Color}" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal" Height="auto" Width="400">
                                    <Image Width="80" Height="80" Source="{Binding Type}"></Image>
                                    <StackPanel Orientation="Vertical" Height="150" Margin="20,0,0,0">
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Name :" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text="{Binding Name}" Height="40" ></TextBlock>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Date :" Height="40" ></TextBlock>
                                            <TextBlock Width="100" FontSize="22" Text="{Binding Date}" Height="40" ></TextBlock>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Amount :" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text="{Binding Amount}" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text=" $" Height="40" ></TextBlock>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

**MainPage.xaml.cs**

```
public partial class MainPage : PhoneApplicationPage
{
    string[] _dates = { "19/9/1984", "25/8/1952", "27/5/1992", "4/8/1975", "10/3/2000", "22/1/2002", "23/5/2012", "25/9/1963", "13/7/1999", "15/4/1936" };

string[] _imageList = { "69290979.png", "acrobat-reader-cs-4.png","azureus-1.png","ClothDolls_lnx-Icons-Colored_Blue_Doll_256x256.png-256x256.png","database-27.png",
                          "documents-folder-2.png", "Front_Row_Icon.png","gear-8.png","info-chat.png","itunes-6.png","nero-smart-start-1.png",
                          "network-2.png","picasa.png","quicktime-7-red.png","twitter-bird.png","wlm-1.png" };

    string[] _items = { "Television", "Radio", "Fridge", "Fan", "Light", "Cup", "Plate", "Dress", "Laptop", "Mobile" };
    int[] _prices = { 10, 15, 20, 25, 30, 5, 8, 15, 10, 20 };

    List<Transaction> transactionList;

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        Loaded += new RoutedEventHandler(MainPage_Loaded);
    }

 void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        int count = 50;
        String DefaultName = "";
        String DefaultDate = "";
        int DefaultAmount = 0;
        String DefaultImage = "";
        transactionList = new List<Transaction>();
        Random random = new Random();

        for (int i = 0; i < _items.Length; i++)
        {
            DefaultName = _items[i];
            DefaultDate = _dates[i];
            DefaultAmount = _prices[i];
            DefaultImage = "Images/" + _imageList[random.Next(0, _imageList.Length)];

            transactionList.Add(new Transaction(DefaultName, DefaultDate, DefaultAmount, DefaultImage));
        } 

        TransactionList.ItemsSource = transactionList;
   }

    private void user_click(object sender, RoutedEventArgs e)
    {
        var myData = ((Button)sender).DataContext as Transaction;
        NavigationService.Navigate(new Uri("/DisplayProduct.xaml?Name=" + myData.Name +"&Date=" + myData.Date + "&Amount=" + myData.Amount + "&Type=" + myData.Type, UriKind.Relative));
    }

} 
```

**显示产品.xaml**

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel Orientation="Vertical">
            <StackPanel HorizontalAlignment="Center">
                <Image Width="auto" Height="auto" Name="itemImage" Source="{Binding SelectedItemImage}"></Image>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <StackPanel Orientation="Vertical" Width="350" HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <TextBlock Text="Name : " Width="150" Height="70" FontSize="35"  Foreground="DarkSalmon"></TextBlock>
                        <TextBlock Name="itemName" Text="{Binding SelectedItemName}" Width="auto" Height="70" FontSize="35"></TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <TextBlock Text="Amount : " Width="150" Height="70" FontSize="35" Foreground="DarkSalmon"></TextBlock>
                        <TextBlock Name="itemPrice" Text="{Binding SelectedItemAmount}" Width="auto" Height="70" FontSize="35"></TextBlock>
                        <TextBlock Name="currency" Text="$" Width="auto" Height="70" FontSize="35"></TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <TextBlock Text="Date : " Width="150" Height="70" FontSize="35" Foreground="DarkSalmon"></TextBlock>
                        <TextBlock Name="itemDate" Text="{Binding SelectedItemDate}" Width="auto" Height="70" FontSize="35"></TextBlock>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </Grid> 
```

**DisplayProduct.xaml.cs**

```
public partial class DisplayProduct : PhoneApplicationPage
{
    public DisplayProduct()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(DisplayProduct_Loaded);
    }

    void DisplayProduct_Loaded(object sender, RoutedEventArgs e)
    {
        string name = NavigationContext.QueryString["Name"];
        string date = NavigationContext.QueryString["Date"];
        string amount = NavigationContext.QueryString["Amount"];
        string type = NavigationContext.QueryString["Type"];

        ShowItem showItemClass = new ShowItem(name, date, amount, type);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:47:38.667

```
void DisplayProduct_Loaded(object sender, RoutedEventArgs e)
{
    string name = NavigationContext.QueryString["Name"];
    string date = NavigationContext.QueryString["Date"];
    string amount = NavigationContext.QueryString["Amount"];
    string type = NavigationContext.QueryString["Type"];

    ShowItem showItemClass = new ShowItem(name, date, amount, type);
    DataContext = showItemClass;
} 
```

您忘记设置页面的[DataContext](https://stackoverflow.com/questions/7262137/what-is-datacontext-for)。它不知道应该从哪里获取要显示的数据。

# ftp-client - SampleFTPSample 代码中的 iOS 6 EXC_BAD_ACCESS

> ID：12578076
> 
> 赞同：3
> 
> 时间：2012-09-25T07:23:54.270
> 
> 标签：ftp-client, ios6

我运行从 iOS 开发者中心下载的 SampleFTPSample 源代码（iOS6.0 SDK，Xcode4.5）。 [SampleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)

作为图像，当我从 ftpServer 检索列表时，有时会出现 EXC_BAD_ACCESS 错误。我没有修改代码，我不知道为什么，我该如何修复它？

非常感谢。

![EXC_BAD_ACCESS 图1](../Images/30267b6fe927ac4540dfc497510a3422.png) ![EXC_BAD_ACCESS 图2](../Images/86999ff90e9ac8c0bb023678790eda6b.png) ![EXC_BAD_ACCESS 图 3](../Images/036d11327b73102ca9ce0c5da79fc032.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T02:28:55.433

通过在创建流后立即将 kCFStreamPropertyFTPAttemptPersistentConnection 属性设置为 false（使用 CFReadStreamCreateWithFTPURL）来执行此操作。这可能是这样的：

```
 success = [self.networkStream setProperty:(__bridge id) kCFBooleanFalse
    forKey:(__bridge NSString *) kCFStreamPropertyFTPAttemptPersistentConnection
];
assert(success); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:04:34.837

是啊！！我终于得到了解决方案。我在主线程完成后调用了 uialertview show。所以它现在不会崩溃。这是我的情况。所以没有确切的答案，但你也可以应用这个 peterlawn。可能对您也有用。！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:17:22.477

```
- (void)_startReceive:(NSString*) urlPath
{
BOOL                success;
NSURL *             url;
CFReadStreamRef     ftpStream;

assert(self.networkStream == nil);      // don't tap receive twice in a row!

// First get and check the URL.

if(urlPath != nil)
{
   ...url = FTP_URL here... 
}
success = (url != nil);
// If the URL is bogus, let the user know.  Otherwise kick off the connection.
if ( ! success) 
{
    [self _updateStatus:@"Invalid URL"];
} 
else 
{

    // Create the mutable data into which we will receive the listing.

    self.listData = [NSMutableData data];
    assert(self.listData != nil);

    // Open a CFFTPStream for the URL.

    ftpStream = CFReadStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) url);
    assert(ftpStream != NULL);

    self.networkStream = (__bridge NSInputStream *) ftpStream;

    success = [self.networkStream setProperty:(__bridge id) kCFBooleanFalse
    forKey:(__bridge NSString *) kCFStreamPropertyFTPAttemptPersistentConnection
               ];
    assert(success);

    self.networkStream.delegate = self;
    [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop]forMode:NSDefaultRunLoopMode];
    [self.networkStream open];

    // Have to release ftpStream to balance out the create.  self.networkStream 
    // has retained this for our persistent use.

    CFRelease(ftpStream);

    // Tell the UI we're receiving.

    [self _receiveDidStart];
} 
```

}

# magento - Magento：从指数中恢复价格数据。已保存虚假价格数据，但未编入索引

> ID：12578080
> 
> 赞同：0
> 
> 时间：2012-09-25T07:24:08.227
> 
> 标签：magento, magento-1.4

我希望我能够在这里正确描述问题，因为它非常复杂。我想你们是我最后的机会。

我们有大约。基于 600 个简单产品的 120 个配置产品。前几天，我们不小心用虚假价格覆盖了所有简单产品的价格。我们没有注意到前端的每个价格都还可以，它们没有被索引。

所以我们现在在前端有正确的价格，但在后端简单产品的价格是错误的。

有什么方法可以从索引前端获取价格并将它们写回后端？

直到我重新索引所有进程在前端都应该没问题。

有谁知道我可以做些什么来重新调整价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:17:27.120

如果你浏览数据库，应该有一个 catalog_product_flat_1 表——这基本上就是你的产品索引。您应该有所有产品属性（包括 SKU 和价格）的列，以便您可以导出此表，然后从 Magento 导出产品，然后相应地更新所有价格/SKU 并重新导入。或者复制 flat_1 表，然后编写一个 PHP 脚本来循环遍历它，更新所有价格，然后重新索引您的数据（当然，在检查它是否有效之后！）

# android - close() 从未在数据库上显式调用

> ID：12578081
> 
> 赞同：0
> 
> 时间：2012-09-25T07:24:12.547
> 
> 标签：android, database

我已经完成了没有崩溃的应用程序，但是我在我的 logcat 中得到了这些错误。当我回到第一个活动并从列表视图中选择项目时，它们会出现。我试图关闭游标和数据库。怎么了？

```
09-25 09:13:07.609: I/dalvikvm(1013): threadid=3: reacting to signal 3
09-25 09:13:07.759: I/dalvikvm(1013): Wrote stack traces to '/data/anr/traces.txt'
09-25 09:13:08.089: I/dalvikvm(1013): threadid=3: reacting to signal 3
09-25 09:13:08.160: I/dalvikvm(1013): Wrote stack traces to '/data/anr/traces.txt'
09-25 09:13:08.579: I/dalvikvm(1013): threadid=3: reacting to signal 3
09-25 09:13:08.629: I/dalvikvm(1013): Wrote stack traces to '/data/anr/traces.txt'
09-25 09:13:23.170: D/dalvikvm(1013): GC_CONCURRENT freed 516K, 6% free 10848K/11463K, paused 27ms+14ms
09-25 09:13:23.209: E/SQLiteDatabase(1013): close() was never explicitly called on database '/data/data/hr.punctum.LociranjePonudaProizvoda/databases/proizvodidb' 
09-25 09:13:23.209: E/SQLiteDatabase(1013): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at hr.punctum.LociranjePonudaProizvoda.ListaProizvoda.onCreate(ListaProizvoda.java:27)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.Activity.performCreate(Activity.java:4465)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.os.Looper.loop(Looper.java:137)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at java.lang.reflect.Method.invokeNative(Native Method)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at java.lang.reflect.Method.invoke(Method.java:511)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-25 09:13:23.209: E/SQLiteDatabase(1013):     at dalvik.system.NativeStart.main(Native Method)
09-25 09:13:23.230: E/System(1013): Uncaught exception thrown by finalizer
09-25 09:13:23.261: E/System(1013): java.lang.IllegalStateException: Don't have database lock!
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
09-25 09:13:23.261: E/System(1013):     at android.util.LruCache.trimToSize(LruCache.java:197)
09-25 09:13:23.261: E/System(1013):     at android.util.LruCache.evictAll(LruCache.java:285)
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
09-25 09:13:23.261: E/System(1013):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
09-25 09:13:23.261: E/System(1013):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
09-25 09:13:23.261: E/System(1013):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
09-25 09:13:23.261: E/System(1013):     at java.lang.Thread.run(Thread.java:856)
09-25 09:13:23.390: I/dalvikvm(1013): threadid=3: reacting to signal 3
09-25 09:13:23.409: I/dalvikvm(1013): Wrote stack traces to '/data/anr/traces.txt' 
```

**数据库助手.java**

```
package hr.punctum.LociranjePonudaProizvoda;

public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "proizvodidb";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        String sql = "CREATE TABLE IF NOT EXISTS proizvodi (" +
                        "_id INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                        "naziv TEXT, " +
                        "tvrtka TEXT, " +
                        "cijena TEXT, " +
                        "kategorija TEXT, " +
                        "telefonTvrtke TEXT, " +
                        "adresaTvrtke TEXT, " +
                        "latitude INTEGER, " +
                        "longitude INTEGER)";

        db.execSQL(sql);

        ContentValues values = new ContentValues();

        values.put("naziv", "Canon 5D mark III");
        values.put("tvrtka", "M-Computers");
        values.put("cijena", "27257kn");
        values.put("kategorija", "fotoaparati");
        values.put("telefonTvrtke", "01/3707800");
        values.put("adresaTvrtke", "Cankareva 3, Zagreb");
        values.put("latitude", 45813029);
        values.put("longitude", 15977894);
        db.insert("proizvodi", "tvrtka", values);

}
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS proizvodi");
        onCreate(db);

        db.close();
    } 
```

**ListaProizvoda.java**

```
package hr.punctum.LociranjePonudaProizvoda;

public class ListaProizvoda extends ListActivity {

    protected EditText searchText;
    protected SQLiteDatabase db;
    protected Cursor cursor;
    protected ListAdapter adapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        db = (new DatabaseHelper(this)).getWritableDatabase();
        searchText = (EditText) findViewById (R.id.searchText);

    }    

    @SuppressWarnings("deprecation")

    public void search(View view) {

        cursor = db.rawQuery("SELECT _id, naziv, tvrtka, cijena FROM proizvodi WHERE naziv LIKE ?", 
                        new String[]{searchText.getText().toString() + "%"}); 
        adapter = new SimpleCursorAdapter(this,R.layout.proizvodi_list_artikl,cursor,new String[] {"naziv", "tvrtka", "cijena"},new int[] {R.id.naziv, R.id.tvrtka, R.id.cijena});

        startManagingCursor(cursor);
        setListAdapter(adapter);

    }

    public void onListItemClick(ListView parent, View view, int position, long id) {

        Intent intent = new Intent(getApplicationContext(), DetaljiProizvoda.class);
        Cursor cursor = (Cursor) adapter.getItem(position);
        intent.putExtra("PROIZVODI_ID", cursor.getInt(cursor.getColumnIndex("_id")));
        startActivity(intent);

    }      

} 
```

**DetaljiProizvoda.java**

```
package hr.punctum.LociranjePonudaProizvoda;

public class DetaljiProizvoda extends Activity {

    protected TextView naziv;
    protected TextView kategorija;
    protected TextView tvrtka;
    protected TextView telefonTvrtke;
    protected TextView adresaTvrtke;
    protected int proizvodId;
    protected Cursor cursor; 
    protected ListAdapter adapter; 
    protected SQLiteDatabase db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detalji_proizvoda);

        proizvodId = getIntent().getIntExtra("PROIZVODI_ID", 0);
        db = (new DatabaseHelper(this)).getWritableDatabase();
        cursor = db.rawQuery("SELECT proizv._id, proizv.naziv, proizv.tvrtka, proizv.cijena, proizv.kategorija, proizv.telefonTvrtke, proizv.adresaTvrtke, proizv.latitude, proizv.longitude FROM proizvodi proizv LEFT OUTER JOIN proizvodi mgr ON proizv._id = mgr._id WHERE proizv._id = ?", 
                new String[]{""+proizvodId});

        if (cursor.getCount() == 1)
        {
            cursor.moveToFirst();

            naziv = (TextView) findViewById(R.id.naziv);
            naziv.setText(cursor.getString(cursor.getColumnIndex("naziv"))); 

            kategorija = (TextView) findViewById(R.id.kategorija);
            kategorija.setText(cursor.getString(cursor.getColumnIndex("kategorija")));

            tvrtka = (TextView) findViewById(R.id.tvrtka);
            tvrtka.setText(cursor.getString(cursor.getColumnIndex("tvrtka")));

            telefonTvrtke = (TextView) findViewById(R.id.telefonTvrtke);
            telefonTvrtke.setText(cursor.getString(cursor.getColumnIndex("telefonTvrtke")));

            adresaTvrtke = (TextView) findViewById(R.id.adresaTvrtke);
            adresaTvrtke.setText(cursor.getString(cursor.getColumnIndex("adresaTvrtke")));

        }             
    }

      public void changeActivity(View view) { 

            Intent intent = new Intent(getApplicationContext(), GMapsActivity.class);
            intent.putExtra("PROIZVODI_ID", cursor.getColumnIndex("_id"));
            intent.putExtra("PROIZVODI_LATITUDE", cursor.getInt(cursor.getColumnIndex("latitude")));
            intent.putExtra("PROIZVODI_LONGITUDE", cursor.getInt(cursor.getColumnIndex("longitude")));
            startActivity(intent);      

            cursor.close();
            db.close(); 

        }                  

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:32:09.853

关闭您的数据库`onStop()`或`onDestroy()`您的活动方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:27:32.723

你应该忘记了`database.close()`。请在您的案例中更改所有**database.open()并在成功操作后关闭数据库..**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:48:17.123

你最好将你的 DatabaseHelper 变成一个单例并在应用程序的生命周期内保持打开状态：-

```
DatabaseHelper helper = DatabaseHelper.getInstance(); 
```

这是一种常见的方法，因为您不必显式关闭数据库，而且由于 Android 是单用户环境，因此无需频繁打开和关闭数据库。

ContentProvider 实现作为单例持续存在，并且在提供程序 onCreate(...) 中创建 SqliteOpenHelper 的字段实例很常见，您可以在此处查看它的示例[http://developer.android.com/guide/topics/providers /content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

所以不管你决定管理你的数据库生命周期，考虑在某个地方保存一个实例以节省一些麻烦，特别是当你开始跨线程使用它时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:31:40.440

`onDestroy`在您的活动中关闭数据库

```
protected void onDestroy() 
{
    super.onDestroy();
    if (db != null) 
    {
        db.close();
    }
} 
```

并在 datahelper 类中添加 close 方法

```
public void close() {
        // NOTE: openHelper must now be a member of CallDataHelper;
        // you currently have it as a local in your constructor
        if (openHelper != null) {
            openHelper.close();
        }
    } 
```

# c# - 这个符号 {0} 的名称是什么？它是什么意思？

> ID：12578083
> 
> 赞同：0
> 
> 时间：2012-09-25T07:24:19.693
> 
> 标签：c#, asp.net

我找到了这个符号`{0}`，这个符号是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:27:30.850

它最常用作字符串格式化函数的一部分，这意味着（从零开始的）列表中的第一个参数应该替换它。例如：

```
var output = String.Format("{0},{1}", "Hello", "World") // Gives "Hello, World" 
```

字符串格式化是数据绑定中的常见元素，因此您也经常将其视为绑定表达式的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:27:17.233

它是一个字符串替换标记。

看看这个例子，它解释了这些符号的使用：

```
class Program
{
    static void Main()
    {
    string value1 = "Dot";
    string value2 = "Net";
    string value3 = "Perls";

    Console.WriteLine("{0}, {1}, {2}", // <-- This is called a format string.
        value1,                        // <-- These are substitutions.
        value2,
        value3);
    }
} 
```

这会导致输出：

> 点、网、Perls

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:27:28.307

它可用于[字符串格式化](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)：

```
DateTime dat = new DateTime(2012, 1, 17, 9, 30, 0); 
string city = "Chicago";
int temp = -16;
string output = String.Format("At {0} in {1}, the temperature was {2} degrees.",
                              dat, city, temp);
Console.WriteLine(output);
// The example displays the following output: 
//    At 1/17/2012 9:30:00 AM in Chicago, the temperature was -16 degrees. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:29:06.170

它是一个占位符（示例）：

```
int selectedItem = 1;

// Generate the output string
string output = string.Format("You selected item {0} from the list.", selectedItem);

Console.WriteLine(output);     // Outputs "You selected item 5 from the list." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:30:15.030

它是一个复合格式字符串中的从零开始的索引占位符，称为格式项。

在运行时，每个格式项都替换为参数列表中相应参数的字符串表示形式。如果参数的值为 null，则将其替换为`String.Empty`。

例如，以下对 Format(String, Object, Object, Object) 方法的调用包括一个具有三个格式项 {0}、{1} 和 {2} 的格式字符串，以及一个具有三个项的参数列表。

详细的格式化帮助可以在[http://msdn.microsoft.com/en-us/library/txafckwd.aspx找到](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

# java - 在 JAAS 中使用私有和公共凭证

> ID：12578087
> 
> 赞同：10
> 
> 时间：2012-09-25T07:24:41.847
> 
> 标签：java, jaas

在一次面试中，面试官问我为什么需要私人证书`JAAS`？
我们可以访问公共凭证和私有凭证，例如：

```
Set<Object> privateCredentials = subject.getPrivateCredentials();
Set<Object> publicCredentials = subject.getPublicCredentials(); 
```

(`privateCredentials`和`publicCredentials`) 都可以访问，访问方式相同。
那么，两种凭证的意义何在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:03:58.247

摘自 Theodore Shrader、Bruce A. Rich、Anthony J. Nadalin 的“Java 和 Internet 安全”一书：

> 由于争议更大，JAAS 设计者得出的结论是，委托人可能有某种身份证明，他们需要能够立即提供，这些身份证明可能包括敏感信息，所以一组公共凭证和一个一组私人凭据也被添加到主题中。由于凭证的内容在不同的身份验证机制中可能有很大差异，从简单的密码到指纹（到无穷大和更多），凭证的类型简单地保留为 java.lang.Obiect。Principal 和凭证之间的关系（如果有的话）留给特定 Principal 类（或者更可能是特定 LoginModule 类）的实现者作为练习。**从 JAAS 的角度来看，私有凭证和公共凭证之间的唯一区别是需要特定的 javax.security.auth.AuthPermission 才能访问私有凭证集**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:19:13.333

来自[JAAS 参考指南](http://download.java.net/jdk8/docs/technotes/guides/security/jaas/JAASRefGuide.html)：

> 为了遍历一组私有凭据，您需要`javax.security.auth.PrivateCredentialPermission`访问每个凭据。有关详细信息，请参阅[`PrivateCredentialPermission`](http://download.java.net/jdk8/docs/api/javax/security/auth/PrivateCredentialPermission.html)API 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:03:10.980

好吧，您通常根本*不需要*它们。我有一个相当大的 JAAS 系统，大约有 7 个 LoginModule，而且我根本不使用私有凭据。例如，如果您想存储用户的密码或私钥以供系统的其他部分检索，您将使用它们，但是没有必要这样做，这完全取决于您如何设计系统。我的态度是密码在 LDAP 中，它就在那里，而且我没有拥有私钥的用户。

但是，当您*确实*需要它们时，您需要将它们与公共凭据分开，因为它们是私有的，而不是公共的，init? 事实上，他们可以通过要求`PrivateCredentialPermissions`访问它们来进一步保护它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:15:56.133

根据我对 JAAS 的理解（以及对一般 SW 设计原则的更多理解）
，Subject 是一个实体，代表请求的来源，例如用户，并且由于 JAAS 是为各种授权/身份验证机制提供抽象 API，您还可以将主题视为某种抽象。

我将 JAAS 与 Krb5LoginModule 一起使用，例如，在我们的例子中，主体代表用户详细信息（用户名 + 领域 - 即 - “johndoe@ovirt.org”）。
用户可能拥有一组私有和公共凭据，具体取决于底层加密机制（我希望我在这里使用了正确的术语） - 例如，如果使用非对称密钥加密，您可以使用 getPublicCrendetials 来获取信息在公钥上。
getPrivateCredentials 将持有一组私钥，您可能需要特权才能获得该列表。
虽然我以前从未尝试过，但也许您可以使用 getPrivateCredentials 来获取私钥并将其用于数字签名？

我可以告诉你，我使用这些方法是为了获取 kerberos 票证，并获取有关其有效性（到期时间）的信息。我希望这能让您对为什么进行这种划分有更多的了解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T01:05:35.580

公共凭证可以自由地公开并在主题上传递。例子：

*   证书
*   公钥

私人凭据是秘密。由于主题对象可以拥有广泛的受众，因此需要隐藏这些对象以防止“外人”访问。API 提供了访问主题的私有凭证的限制，在其他答案中有详细说明。例子：

*   密码
*   私钥

# android - 在管理应用程序中禁用或删除强制停止

> ID：12578091
> 
> 赞同：2
> 
> 时间：2012-09-25T07:24:56.183
> 
> 标签：android, android-intent

做了一些研究，但无法获得有关禁用应用程序强制停止的详细信息。在 GOOGLE 上播放时，有一些应用程序，如 KASPERSKY PARENTAL CONTROL、Quick HEAL 等……它们禁用了 Force STOP。

关于如何做到这一点的任何线索？

任何帮助都会很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-05T21:51:22.767

取决于 ODM，如果他们有某种商业协议​​，他们会在 Android 设置应用程序代码中更改并禁用这些包的强制停止按钮。当然它也必须通过 CTS。我记得禁用了一个应用程序的卸载按钮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T17:01:18.473

如果处理器被占用，禁用“强制停止”将意味着用户只能从 Google Play 或设备设置中卸载应用程序（仅在禁用设备管理员时）以释放正在运行的进程以及潜在的内存泄漏。默认情况下，移动安全解决方案通常会坚持禁用“强制停止”，原因有一个 - 恶意软件确实可以“强制停止”病毒引擎，从而使 Android 设备容易受到感染。

此外，如果“强制停止”或“卸载”被禁用，安全应用程序将询问“设备管理员”（主要用于企业安全） - 用户可以通过 > 设置 > 安全 > 设备管理来停用设备管理 - 取消选中复选框。完成此操作后，您可以像往常一样从“设置”或 Play 商店“强制停止”或“卸载”该应用程序。:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-13T05:06:01.237

对于 s4，转到设置，然后向右滑动到“更多”，然后点击“应用程序管理器”，然后滑动查看哪些应用程序正在运行或停止。简单..不需要恢复你的手机家伙。..

# c# - SQL中是否有get-or-create（延迟加载？）习语？

> ID：12578094
> 
> 赞同：0
> 
> 时间：2012-09-25T07:25:08.857
> 
> 标签：c#, linq, sql-server-2008-r2

> **可能重复：**
> [SQL Server 上 INSERT OR UPDATE 的解决方案](https://stackoverflow.com/questions/108403/solutions-for-insert-or-update-on-sql-server)
> [检查一行是否存在，否则插入](https://stackoverflow.com/questions/639854/check-if-a-row-exists-otherwise-insert)

我正在使用 SQL Server 2008 R2、C# .NET 4.0（和 LINQ）。

我想在表中获取或创建一行，然后将一个字符串附加到其中一个列。

我想知道这种习语是否有最佳实践，或者 SQL 是否开箱即用？

怎么`transaction start -> select -> insert or update -> transaction end`看都不够优雅……

# sql - 如何从返回两个表的存储过程创建复杂类型

> ID：12578097
> 
> 赞同：1
> 
> 时间：2012-09-25T07:25:12.193
> 
> 标签：sql, entity-framework-4

如何从返回两个表并运行动态 SQL 的存储过程创建 EF 复杂类型？

REF：[如何从使用 exec() 的存储过程创建复杂类型？](https://stackoverflow.com/questions/3728148/how-to-create-a-complex-type-from-a-stored-procedure-that-uses-exec)

**更新：** 我在程序的开头添加了以下行

```
SET FMTONLY OFF 
```

现在我正在获取列信息，并且只能为第一个结果表创建复杂类型。

# magento - 在 Magento 中将项目（简单产品）与自定义变体和选项捆绑在一起

> ID：12578099
> 
> 赞同：2
> 
> 时间：2012-09-25T07:25:23.787
> 
> 标签：magento, magento-1.7

我正在尝试将具有自定义变体的简单产品作为项目添加到我的捆绑产品中。但是 Magento 不允许这样做。

> [http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)

有什么办法可以通过调整代码来添加带有自定义选项的简单产品作为 Bundle items 吗？

# objective-c - 如何转换 UIView 坐标以在 drawRect 中使用？

> ID：12578109
> 
> 赞同：1
> 
> 时间：2012-09-25T07:26:20.940
> 
> 标签：objective-c, ios, uiview, core-graphics, quartz-2d

我需要在自定义 UIView 上画一条线（即从左上角到右下角）。但是，据我所知，坐标系是不同的。

如何在这两个坐标系之间进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:58:38.923

只要我们谈论的 UIView 对象是其他一些 UIView 对象的子视图——很正常的情况——每个视图都相对于它的下一个超级视图定位。superview的左上角是(0,0)。

对于大多数可以正常工作的应用程序。在极少数情况下，可能需要将坐标从一个视图的子视图坐标系统转换到另一个视图的坐标系统。UIView 提供了方法

```
– convertPoint:toView:
– convertPoint:fromView:
– convertRect:toView:
– convertRect:fromView: 
```

对于这种用法。他们工作得很好。在使用它们之前，您应该重新考虑是否需要这样做，并评估您当前的视图层次结构是否可以使用重新设计。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:58:24.393

不管坐标系是什么，你为什么不直接画呢？不要关心坐标系。

# vb6 - 当我打开一个 VB6 项目时，我可以对所有打开的窗口做些什么吗？

> ID：12578111
> 
> 赞同：4
> 
> 时间：2012-09-25T07:26:24.293
> 
> 标签：vb6

每当我打开要转换为 VB.NET 的 VB6 项目时，IDE 都会打开无数个窗口。除了平铺它们以快速访问关闭按钮并一个一个关闭它们之外，我能做些什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:32:11.083

首先关闭VB6 IDE中的所有代码窗口，然后退出IDE。转到 VB6 项目所在的文件夹并找到具有 .vbw 文件扩展名的文件。将该文件标记为只读。这将防止 IDE 在您以后退出 IDE 时保存窗口配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T07:37:14.380

如果您将[MZ Toolkit](http://www.mztools.com/index.aspx)添加到您的 VB6 IDE，其中包括一个“关闭所有窗口”按钮（以及许多其他方便的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T20:28:24.397

我发现 .vbw 文件扩展名设置了只读属性位。我清除了表格现在已正确保存。

# mysql - mySQL 连接两个表中的每一个的 3 列

> ID：12578115
> 
> 赞同：1
> 
> 时间：2012-09-25T07:26:45.170
> 
> 标签：mysql

我正在尝试连接两个表中的数据，其中表 1 中的用户 ID 在表 2 中。我尝试了多种变体但没有运气，并在此主题上阅读了十几个关于 SO 的帖子。

表一中的数据有 id、username、rolerequest 和 appuserid。当表 1 中的 apperid 等于表 2 中的用户 ID 时，我正在选择最后三个项目并尝试加入表 2 中的 3 个项目。

这是我最近的尝试；

```
SELECT username, rolerequest, appuserid
FROM userrolespending 
LEFT JOIN  my_aspnet_membership.email,my_aspnet_membership.creationdate,my_aspnet_membership.lastlogindate
where my_aspnet_membership.userid = userrolespending.appuserid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:28:00.210

在这种情况下，您不需要使用`LEFT JOIN`，因为您只想返回`userid`两个表中都存在的内容。`INNER JOIN`返回`ID`所有表上都存在 或链接列的记录。

```
SELECT a.*, b.*       -- <== select the columns you want to appear
FROM userrolespending a
     INNER JOIN  my_aspnet_membership b
        ON a.appserid = b.userID 
```

或者准确地说，

```
SELECT a.username, a.rolerequest, a.appuserid,
       b.email,b.creationdate, b.lastlogindate
FROM userrolespending a
     INNER JOIN  my_aspnet_membership b
        ON a.appserid = b.userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:29:36.600

我认为这就是你需要的：

```
SELECT username, rolerequest, appuserid
FROM userrolespending 
LEFT JOIN  my_aspnet_membership
on my_aspnet_membership.userid = userrolespending.appuserid; 
```

# sql-server - SQL Server 每个记录 ID 的固定行数

> ID：12578119
> 
> 赞同：2
> 
> 时间：2012-09-25T07:26:53.517
> 
> 标签：sql-server, tsql

我有 2 张桌子，**Product**和**Pricing**。表**Product**是父表，而**Pricing**是子表。当我使用 Product 中的外键查询表 B 时，我想为每个外键生成 11 行，有或没有数据（空填充所有空行和列）

以下是我到目前为止的示例。不能正常工作，但基本上我的目标是，对于每个 ProductID，生成 11 行，用空值填充空行列

```
SELECT TOP 11
   row_number() over(order by TheCount desc) AS row_num,  PRODID,  packageID
FROM
    (
    select count(*) AS TheCount , PRODID ,max(PricingID) AS packageID
    from 
       Product left  outer  join   Pricing on PRODID = ProductID 
    group by PRODID
    UNION ALL
    SELECT TOP 11 -1, NULL, NULL, NULL, NULL, NUK
    FROM sys.columns
    ) T 
```

例如

```
 row_num        PRODID                                    PRICINGID                               COSBeginQty          COSColCode   COSTrade  COSTypeOfPrice  COSIsActive 
   1              A10D8642-F6DA-499E-9FC9-024FED104877      F82F533E-C1A0-4DC5-BB2C-06FFF2E59C18        2                 NULL              T2        A              1
   2              A10D8642-F6DA-499E-9FC9-024FED104877      372E6B36-F9D1-4EFA-8A15-08CE673EFFBA        12                NULL              T1        A              1
   3              A10D8642-F6DA-499E-9FC9-024FED104877      45E77A6F-DC2A-44BF-B6AE-0BE27BD2205F        7                 NULL              T2        A              1
   4              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   5              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   6              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   7              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   8              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   9              A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   10             A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL
   11             A10D8642-F6DA-499E-9FC9-024FED104877              NULL                                NULL              NULL              NULL      NULL       NULL 
```

这是一个[*SQLFiddle*](http://sqlfiddle.com/#!3/c7ca0/2)链接，它显示了我正在扩展的数据和一个工作查询，以便它扩展到第 11 个，即将 11 行显示为列。

使用 Damiens 示例代码，我已经能够将下面的代码放在一起。它可以将产品表中的元素交叉应用到定价表，但是，我更喜欢这样一种情况，即它不会将相同的 PricingID 应用于产品表中的所有 ProductID，而是仅应用于定价记录适用的特定 ProductId .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:26:33.430

您需要一个递归查询。像这样的东西：

```
;WITH tmp(i, tablename,total) AS(
SELECT ROW_NUMBER() OVER(PARTITION BY name ORDER BY name), CONVERT(varchar(MAX),name), (SELECT COUNT(*) FROM sys.columns WHERE object_id=t.object_id)
FROM sys.tables t
UNION ALL
SELECT i+1, tablename+' COPY '+CONVERT(varchar(4),i), total FROM tmp WHERE i <=20
)SELECT * FROM tmp ORDER BY 2, 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:40:44.430

基本方法是使用数字表`ROW_NUMBER()`和左连接：

```
select
    *
from
    sys.tables st
        cross join
    (select distinct number from master..spt_values where number between 1 and 11) n
        left join
    (select *,ROW_NUMBER() OVER (PARTITION BY object_id order by name) rn from sys.columns) sc
        on
            st.object_id = sc.object_id and
            sc.rn = n.number 
```

（这里，`spt_values`查询代替了数字表）

您应该能够在任何数据库中运行它并查看该方案通常如何工作。为每个父行`CROSS JOIN`创建 11 行。然后我们加入前 11 个孩子，使用 选择`ROW_NUMBER()`。

我没有您的数据，所以我没有尝试使用您现有的查询来编写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:39:50.597

+1 使用数字表...我没有数字表，所以我将使用值构造函数来创建一个例如（值构造在 sql server 2008+ 中工作）。

```
select TP.ProductID, TNum.num, Tprices.PriceID
from Product TP
INNER JOIN (select num from (values (1), (2), (3), (4), (5), (6), (7), (8), (9), (10), (11)) as T1(num)) TNum ON TNum.num BETWEEN 1 and 11
LEFT JOIN (select TP2.PriceID, ROW_NUMBER () OVER (PARTITION BY TP2.ProductID ORDER BY TP2.PriceID DESC) RowNum from Prices TP2) Tprices ON TNum.num = Tprices.RowNum 
```

# aem - CQ5 中的 I18n 使用情况

> ID：12578120
> 
> 赞同：1
> 
> 时间：2012-09-25T07:26:54.357
> 
> 标签：aem

我在 cq5.4 中将 i18n 添加到我的组件标题中。但是我无法将内容作者的语言偏好更改为 fr。如何做到这一点。有没有办法在 CQ5 中以所需语言更改网页内容。 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:18:07.677

为用户设置语言首选项：

1.  在欢迎屏幕中，单击用户按钮；启动用户管理和安全 UI；
2.  在左侧面板中，单击您要为其设置语言首选项的用户的名称；
3.  单击首选项选项卡；
4.  从语言下拉列表中进行选择；
5.  单击保存。

通常，国际化的 CQ5 网站直接在网站根目录下划分为特定语言的节点。查看 Geometrixx 示例站点，其中有 content/geometrixx/en、content/geometrixx/de、content/geometrixx/fr 等。

Feike Visser 有一篇关于[翻译工具](http://blogs.adobe.com/livecycle/2011/12/using-the-i18n-translator.html)的简短博客文章。在典型的本地开发环境中，该工具位于`http://localhost:4502/libs/cq/i18n/translator.html`.

# dns - 为不同的域指定不同的 DNS 服务器

> ID：12578121
> 
> 赞同：6
> 
> 时间：2012-09-25T07:26:55.267
> 
> 标签：dns, domain-name

我可以为多个域指定 DNS 服务器吗？例如，我知道有 3 个域的 DNS 服务器可以解析域名，所以我可以指定类似

```
b.com (domain)
u1.x1.y1.z1 (DNS server IP address which would resolve b.com)
l.m.n.o (default DNS server used if above DNS server unavailable)

c.com (domain)
u2.x2.y2.z2 (DNS server IP address which would resolve c.com)
l.m.n.o (default DNS server used if above DNS server unavailable)

d.com (domain)
u3.x3.y3.z3 (DNS server IP address which would resolve d.com)
l.m.n.o (default DNS server used if above DNS server unavailable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:11:10.443

请参考[https://github.com/whitekid/dnspost](https://github.com/whitekid/dnspost) 这提供了 max osx 的解析器功能。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-28T07:08:37.487

将以下帮助。在 /etc/resolv.conf 我将指定，

```
search b.com
nameserver u1.x1.y1.z1
search c.com
nameserver u2.x2.y2.z2
search d.com
nameserver u3.x3.y3.z3 
```

对于 d.com，将使用 NS u3.x3.y3.z3（其他 NS 即 u1.x1.y1.z1 和 u2.x2.y2.z2 不会用于 d.com）？如果输入域与上述任何给定域都不匹配，那么将使用本地名称服务器吗？如果上述名称服务器不可用或以 NO 响应，也将使用本地名称服务器？

# c++ - C ++复制具有多态性的对象

> ID：12578124
> 
> 赞同：1
> 
> 时间：2012-09-25T07:27:04.233
> 
> 标签：c++, object, copy, polymorphism

我想在 C++ 中复制对象。问题是我有具有多态性的派生类，如下面的伪代码所示：

```
class BaseCl { some virtual functions };
class DerivedClass : public BaseCl { ... }; 
```

...

```
BaseCl * b1 = new DerivedClass();
BaseCl * b2 = new "copy of b1"; (just pseudocode) 
```

问题是最后一行：

我想复制“BaseCl”类的对象，但由于多态性，副本必须与“DerivedClass”的原始对象一样。

最好的方法是什么？

非常感谢，任何帮助表示赞赏。

编辑：问题已解决：

插入：

```
virtual BaseCl *clone() = 0; 
```

在基类和

```
DerivedCl *clone() {return new DerivedCl(*this);} 
```

在派生类中。谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:30:24.993

您需要在 BaseC1 中定义一个用于克隆的函数。就像是：

```
class BaseCl
{
    virtual BaseCl* clone() {return new BaseC1(*this);}
};
class DerivedClass : public BaseCl
{
    virtual BaseCl* clone() {return new DerivedClass(*this);}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:33:58.120

运行时多态性的关键是操作必须在最派生的对象中实现，因为它知道执行它们所必须知道的一切。所有基都必须公开要由基指针调用的虚函数。

您可以在基础级别定义一个虚`BaseCl* clone()`函数，并将其重写为您的派生类`return new DerivedClass(*this)`

# sharepoint - 激活 Sharepoint 文档 ID 服务时更新文档时出现问题

> ID：12578126
> 
> 赞同：1
> 
> 时间：2012-09-25T07:27:05.047
> 
> 标签：sharepoint

我正在使用 sharepoint 2010 企业版。我已经激活了 Document ID 服务，它会在您上传时为每个文档生成一个文档 ID。当我第一次上传或保存文档时，它没有问题。它正在被拯救。我面临的问题是，当我打开上传的文档并编辑或更新它并再次保存它时，它会给出网络异常“基础连接已断开。连接过早关闭”。

我也尝试调试，发现响应没有标头。

我们试图在 Windows 应用程序中执行编辑和保存文档。

我们正在尝试通过创建 webrequest 来保存文档。

请提供您对此问题的想法。

请看下面的代码。

" WebUrl webUrl = UrlToWebUrl(destinationUri);

```
 System.Collections.Specialized.NameValueCollection methodData = new System.Collections.Specialized.NameValueCollection();

        // Add general request to stream
        methodData.Add("method","put document:" + GetServerExtensionsVersion(webUrl.SiteUrl));
        methodData.Add("service_name",""); 
        methodData.Add("put_option","overwrite,createdir,migrationsemantics"); 
        methodData.Add("keep_checked_out","false");

        HttpWebRequest req = StartWebRequest(GetAuthorURL(webUrl.SiteUrl), methodData);
        System.Net.ServicePointManager.SecurityProtocol = System.Net.SecurityProtocolType.Ssl3;
        System.IO.Stream reqStream = req.GetRequestStream();

        RemoveSourceControlProperties(properties);
        WriteDocumentData(reqStream, webUrl.FileUrl, file, properties);

        reqStream.Flush();
        reqStream.Close();

        HttpWebResponse response = (HttpWebResponse)req.GetResponse();
        try 
        {
            if (!PutDocumentResponseSuccess(GetResponseString(response)))
            {
                throw new FrontPageRPCException("Failed to save document.", destinationUri);
            }
        }
        finally
        {
            if (null != response) response.Close();
        }
    } 
```

"

# ios - 如何为不同的“视图”方案设计 iOS 通用应用程序？

> ID：12578140
> 
> 赞同：0
> 
> 时间：2012-09-25T07:27:41.460
> 
> 标签：ios, model-view-controller, ios-universal-app

我正在为 iPhone/iPad 构建一个通用的 iOS 配置应用程序。但 iPad 的布局（“视图”）与 iPhone 的布局大不相同。考虑到只有应用程序的外观（“视图”）改变了设备，我可以遵循的最有效的设计方法是什么？

我已经看过的东西

1.  我研究了一种策略，其中根据使用的设备加载不同的视图控制器。但考虑到“控件”在设备之间是相同的，并且只有应用程序的外观发生变化，这可能是一种矫枉过正的做法。

2.  使用函数根据需要自动调整视图框架的大小以布局视图。这对我没有多大帮助，因为不仅需要更改视图的大小，还需要根据设备完全加载不同的视图。

3.  保持 viewController 不变，但对 viewController 内部的视图进行不同的配置。现在这似乎是最好的方法，但应用程序有点重，从长远来看可能会变得非常混乱。或者有没有一种非常有效的方法来做到这一点？

有这方面的设计策略吗？或者有什么方法可以在优化工作的同时有效地完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:41:47.780

标准方法是为 iPhone 和 iPad 使用不同的 XIB 文件，如果您正确命名它们，平台将自动选择它们，例如`myview~iPhone.xib`和`myview~iPad.xib`.

您担心效率低下：我不会担心文件大小，因为编译后的 XIB 非常紧凑。

在我的应用程序中，我主要使用这种方法，使用一些代码片段来为每个平台添加或删除按钮。简单的视图可以设置为使用标准的 struts-and-glue 技术自动调整大小。

# c# - 如何更改 TextArea 的文本

> ID：12578142
> 
> 赞同：0
> 
> 时间：2012-09-25T07:27:51.723
> 
> 标签：c#, webforms, textarea

我想`TextArea`使用 C# 在 HTML 表单上设置 a 的值。我已经尝试过使用`InnerText`属性，但它不断引发异常：

> Esta propiedad no se admissione en este tipo de HtmlElement。”
> （此属性在此类 HtmlElement 中不被允许）

这是引发异常的行：

```
form.Document.GetElementById(row["nombreCampo"].ToString()).InnerText = 
    row["valorCampo"].ToString(); 
```

这是它周围的代码：

```
//recorro los formularios de la página
foreach (HtmlElement form in webBrowser1.Document.Forms)
{
    //recorro las filas del DataTable con los datos a autorellenar
    foreach (DataRow row in dt.Rows)
    {
        //si conincide el nombre del campo con el nombre del DataTable, autorelleno
        if ((form.Document.GetElementById(row["nombreCampo"].ToString())!=null))
        {
            //para que ignore las minúsculas/mayúsculas
            if (form.Document.GetElementById(row["nombreCampo"].ToString())
                .Name.Equals("description", StringComparison.OrdinalIgnoreCase)) 
            {
                form.Document.GetElementById(row["nombreCampo"].ToString())
                    .InnerText = row["valorCampo"].ToString();
            }
            else
            {
                form.Document.GetElementById(row["nombreCampo"].ToString())
                    .SetAttribute("value", row["valorCampo"].ToString());
            }
        }//fin if
    }//fin foreach interno
}//fin foreach externo 
```

我无法更改网页的结尾，所以这不是一个选择。

[已解决]：我试图访问错误的元素，因为有多个名为“description”的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:55:40.603

看看什么类型有这样的表达：

```
form.Document.GetElementById(row["nombreCampo"].ToString()) 
```

我认为这里需要演员表。

# cakephp - Cakephp 在服务器上找不到核心帮助程序：JqueryEngineHelper.php

> ID：12578145
> 
> 赞同：1
> 
> 时间：2012-09-25T07:27:57.623
> 
> 标签：cakephp

当我在我的语言环境机器上运行我的应用程序时，它工作正常，但是当我使用 cpanel 在我的服务器上运行它时，一切正常，当我使用 jquery 库使用 js helper 时，会发生以下错误

> 错误：找不到 jqueryEngineHelper。
> 
> 错误：在以下文件中创建类 jqueryEngineHelper：app/View/Helper/jqueryEngineHelper.php

```
<?php
class jqueryEngineHelper extends AppHelper {

} 
```

注意：所有文件都存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:45:53.713

它错误地寻找“jqueryEngineHelper”而不是“JqueryEngineHelper”，这很可能意味着您在控制器中指定帮助器时没有使用正确的大小写。确保你有`public $helpers = array('Js' => array('Jquery'));`“Jquery”而不是“jquery”的大写“J”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T07:49:21.143

尝试`App::uses()`加载帮助程序。

[http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-classes](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-classes)

CakePHP 文档中的示例：

```
App::uses('HtmlHelper', 'View/Helper'); 
```

你试试：

```
App::uses('jqueryEngineHelper', 'View/Helper'); 
```

编辑：

尝试将它放在代码的起始行的**AppController.php中。**

# wpf - 在 wpf 中显示扩展器一个低于另一个

> ID：12578146
> 
> 赞同：6
> 
> 时间：2012-09-25T07:27:59.440
> 
> 标签：wpf, expander

考虑将 2 个扩展器控件放置在另一个之下。如果一个扩展器控件折叠，则必须减小实际间隙（在扩展期间），并且另一个扩展器控件必须显示在第一个扩展器下方，没有间隙（在第一个和第二个扩展器之间）。如果第一个扩展器被扩展，那么第二个必须调整和显示。如何实现它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T08:21:34.870

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Expander>
        <TextBlock Text="expander 1 content" />
    </Expander>
    <Expander Grid.Row="1">
        <TextBlock Text="expander 2 content" />
    </Expander>
</Grid> 
```

将行高设置为“自动”时，行将自动调整其高度以适应内容。这意味着当您展开/折叠第一个扩展器时，第一行的高度会增加和缩小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:30:40.663

如果您只需要两个扩展器，并且当一个展开另一个折叠时，只需将它们的 IsExpanded 属性绑定在一起，这样一个与另一个相反

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication4="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <WpfApplication4:NotConverter x:Key="notConverter"/>
</Window.Resources>

<StackPanel Margin="12">
    <Expander Header="First" IsExpanded="{Binding IsExpanded, ElementName=expander2, Converter={StaticResource notConverter}}">
        <TextBlock Text="Hello"/>
    </Expander>
    <Expander Header="Second" Name="expander2">
        <TextBlock Text="World!"/>
    </Expander>
</StackPanel>
</Window> 
```

NotConverter.cs

```
public class NotConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return !((bool)value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return !((bool)value);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:44:51.620

使用`StackPanel`with`Orientation="Vertical"`作为包装器。这应该会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T20:57:53.160

您可以按照 Eirik 所说的去做，或者，您可以将扩展器放在堆栈面板上并指定扩展器网格的高度。这是一个 2 个视频系列，它将帮助您更好地使用 WPF 中的扩展器。 [https://www.youtube.com/watch?v=ajKPYZ1KZc4&list=PLWTyZJ_llht1-OGaFaG-6D-0vjW_V0rpg](https://www.youtube.com/watch?v=ajKPYZ1KZc4&list=PLWTyZJ_llht1-OGaFaG-6D-0vjW_V0rpg)

```
<StackPanel  Height="768" Width="500" HorizontalAlignment="Left">
        <Expander Header="Expande me" Background="Chocolate" FontSize="25">
            <Grid Height="200" Background="AntiqueWhite" Width="500">
                <Label Content="yay" Background="Aqua" Height="40" Width="90"/>
            </Grid> 
        </Expander>

        <Expander Header="Me too" Background="MediumAquamarine" FontSize="20">
            <Grid Height="200" Width="500" Background="Coral">
                <Label Content="Yay!!" Height="40" Width="100" Background="Khaki"/>
            </Grid>
        </Expander>
    </StackPanel> 
```

# forms - 设计中“表单元素”的通用名称是什么

> ID：12578148
> 
> 赞同：1
> 
> 时间：2012-09-25T07:28:12.630
> 
> 标签：forms, definition

表单和表单元素在应用程序设计中很常见。

所以我想必须有一个更准确地识别它的名称，并且指定任何类型的“表单元素”，它应该是一个组合框、一个输入、单选或复选框。

您在您的专业环境中使用或听到哪一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:32:26.060

使用了您提到的所有表单元素。但是表单和表单元素主要根据其功能命名。

例如：

如果您在表单上设计登录，则它简称为登录表单。类似的按钮或其他输入字段。

理想情况下，它应该不那么令人困惑，只要知道名称，就应该知道表单和表单元素的功能。

# wpf - 将整个选定的 DataGrid 行模板设置为 CellEditingTemplate

> ID：12578153
> 
> 赞同：0
> 
> 时间：2012-09-25T07:28:23.580
> 
> 标签：wpf, datagrid, selected, celltemplate, celleditingtemplate

我有一个关于 WPF DataGrid 的问题。为了 IDataErrorInfo 验证，我想将整个选定的行设置为编辑 - 我的意思是将每个单元格（在该行中）的数据模板从 CellTemplate 设置为 CellEditingTemplate。

例如，这是一列：

```
<DataGridTemplateColumn Header="Note">
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>                                    
            <TextBox Name="textBoxNote" Text="{Binding Note, ValidatesOnDataErrors=True}" />                                    
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Note}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这在 XAML 中是否可行（某种触发器）？我将如何在代码隐藏中做到这一点？我找到了具有两种不同样式作为资源的解决方案，然后在 Row_Selected 和 Row_Unselected 事件中以编程方式在它们之间切换，但我宁愿将现有的上述 XAML 代码用于列（具有单独的 CellTemplate 和 CellEditingTemplate）。

谁能指出我正确的方法？

提前致谢。最好的问候， DB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:37:10.813

好的，我没有设法将整行置于编辑模式，但我设法重新验证 IDataErrorInfo 对象 - 有点强制 IDataErrorInfo 验证。这就是我想在行的所有单元格上设置编辑模式的原因 - 将 CellEditingTemplate 中的控件绑定到具有 ValidateOnDataErrors = True 的对象属性。否则，我将新对象添加到 DataGrid，但属性（已编辑的除外）从未得到验证。

在我的所有模型对象（扩展 IDataErrorInfo）的超类中，我添加了这个方法：

```
public virtual void Revalidate() // never needed to override though
{
    Type type = this.GetType();

    // "touch" all of the properties of the object - this calls the indexer that checks
    // if property is valid and sets the object's Error property 
    foreach (PropertyInfo propertyInfo in type.GetProperties())
    {                
        var indexerProperty = this[propertyInfo.Name];
    }
} 
```

现在，当用户将新对象添加到 DataGrid 时，我手动调用 myNewObject.Revalidate() 方法来设置我在将对象保存到数据库之前检查的 Error 属性。

谢谢和问候， DB

# sql - 如何从一列更新一个 SQL 引用

> ID：12578166
> 
> 赞同：1
> 
> 时间：2012-09-25T07:29:23.343
> 
> 标签：sql, oracle

我有下表我需要 colE 中的所有值来更新到 colA 是否可以使用一个 SQL 来完成？

**表A**

```
colA    colB    colC    colD    colE
 a       b       x       y       z
 b       c       d       f       h
 c       d       f       w       v
 v       f       f       f       f 
```

`colA`用来自的值更新`colE`

**表A**

```
colA    colB    colC    colD    colE
 z       b       x       y       z
 h       c       d       f       h
 v       d       f       w       v
 f       f       f       f       f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:31:14.777

这太简单了：

```
update tableA set colA = colE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:31:21.000

尝试使用此代码：

```
update TableA
set colA = colE; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:32:41.763

像这样更新表

```
update tableA set 
colA = colE; 
```

它会根据需要更新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:33:36.777

更新 [表] 设置 [colA] = [colE]

应该对你有用:) 在实时数据之前尝试一些测试数据

# iphone - 如何对 UIImageView 中的像素进行排序？

> ID：12578170
> 
> 赞同：1
> 
> 时间：2012-09-25T07:29:43.560
> 
> 标签：iphone

我有一个 UIImageView，我想分析图像。分析器方法最能检测 5 个最常用的像素。我有两个类在其中实现像素：

第一课：

RGBA像素.h

```
@interface RGBAPixel : NSObject

   @property unsigned int reds;
   @property unsigned int greens;
   @property unsigned int blues;

@end 
```

第二类：Pixel.h

```
@interface Pixel : NSObject

   @property (nonatomic, strong) RGBAPixel *rgbpixel;
   @property unsigned int key;

@end 
```

RGBAPixels 包含像素红色、绿色和蓝色分量。

我使用 key 属性来计算图像中像素出现的次数。

分析方法：

```
-(IBAction)analyzeImage:(id)sender {

    UIImage * inImage = imageView.image;
    CGImageRef rawImageRef = inImage.CGImage;

    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(rawImageRef));
    const UInt8 *rawPixelData = CFDataGetBytePtr(data);

    NSUInteger imageHeight = CGImageGetHeight(rawImageRef);
    NSUInteger imageWidth  = CGImageGetWidth(rawImageRef);
    NSUInteger bytesPerRow = CGImageGetBytesPerRow(rawImageRef);
    NSUInteger stride = CGImageGetBitsPerPixel(rawImageRef) / 8;

    NSMutableArray *pixelsarray2 = [[NSMutableArray alloc] init];
    NSMutableArray *pixelsarray3 = [[NSMutableArray alloc] init];
    NSMutableArray *pixelsarray4 = [[NSMutableArray alloc] init];

    for (int row = 0; row < imageHeight; row++) {
        const UInt8 *rowPtr = rawPixelData + bytesPerRow * row;
        for (int column = 0; column < imageWidth; column++) {
            RGBAPixel *pixel = [[RGBAPixel alloc] init];
            pixel.reds = rowPtr[0];
            pixel.greens = rowPtr[1];
            pixel.blues = rowPtr[2];
            rowPtr += stride;
            Pixel *pix = [[Pixel alloc] init];
            pix.rgbpixel = pixel;
            pix.key = 1;
            [pixelsarray2 addObject:pixel];

            if (![pixelsarray3 containsObject:pixel]) {
             [pixelsarray2 addObject:pix];
             [pixelsarray3 addObject:pixel];

             }

             else {
             NSInteger index = [pixels3 indexOfObject:pixel];
             Pixel *helperPixel = [pixelsarray2 objectAtIndex:index];
             helperPixel.key ++;
             [pixelsarray4 addObject:helperPixel];
             helperPixel = nil;

             }
        }
    }

    NSArray *unsortedPixels = pixelsarray4;
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"key" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedPixels;
    sortedPixels = [unsortedPixels sortedArrayUsingDescriptors:sortDescriptors];

    Pixel *pix1 = [sortedPixels objectAtIndex:1];
    RGBAPixel *pixel1 = pix1.rgbpixel;
    NSLog(@"color1: %i %i %i:", pixel1.reds, pixel1.greens, pixel1.blues);
    UIColor *color1 = [[UIColor alloc]initWithRed:(pixel1.reds/255.0f) green:(pixel1.greens/255.0f) blue:(pixel1.blues/255.0f) alpha:1];

    Pixel *pix2 = [sortedPixels objectAtIndex:2];
    RGBAPixel *pixel2 = pix2.rgbpixel;
    NSLog(@"color2: %i %i %i:", pixel2.reds, pixel2.greens, pixel2.blues);
    UIColor *color2 = [[UIColor alloc]initWithRed:(pixel2.reds/255.0f) green:(pixel2.greens/255.0f) blue:(pixel2.blues/255.0f) alpha:1];

    Pixel *pix3 = [sortedPixels objectAtIndex:3];
    RGBAPixel *pixel3 = pix3.rgbpixel;
    NSLog(@"color3: %i %i %i:", pixel3.reds, pixel3.greens, pixel3.blues);
    UIColor *color3 = [[UIColor alloc]initWithRed:(pixel3.reds/255.0f) green:(pixel3.greens/255.0f) blue:(pixel3.blues/255.0f) alpha:1];

    Pixel *pix4 = [sortedPixels objectAtIndex:4];
    RGBAPixel *pixel4 = pix4.rgbpixel;
    NSLog(@"color4: %i %i %i:", pixel4.reds, pixel4.greens, pixel4.blues);
    UIColor *color4 = [[UIColor alloc]initWithRed:(pixel4.reds/255.0f) green:(pixel4.greens/255.0f) blue:(pixel4.blues/255.0f) alpha:1];

    Pixel *pix5 = [sortedPixels objectAtIndex:5];
    RGBAPixel *pixel5 = pix5.rgbpixel;
    NSLog(@"color5: %i %i %i:", pixel5.reds, pixel5.greens, pixel5.blues);
    UIColor *color5 = [[UIColor alloc]initWithRed:(pixel5.reds/255.0f) green:(pixel5.greens/255.0f) blue:(pixel5.blues/255.0f) alpha:1];

    colors = [[NSArray alloc] initWithObjects:color1,color2,color3,color4,color5, nil];

    myColors = colors;

    CFRelease(data);

} 
```

}

我的代码真的不起作用！提前致谢！

# perl - 在 perl 中合并哈希

> ID：12578172
> 
> 赞同：2
> 
> 时间：2012-09-25T07:29:51.783
> 
> 标签：perl

我正在尝试合并两个哈希。好吧，我可以合并，但输出不是我想要的：

这是我的代码：

```
my %friend_list = (
   Raj       => "Good friend",
   Rohit     => "new Friend",
   Sumit     => "Best Friend",
   Rohini    => "Fiend",
   Allahabad => "UttarPradesh",
);

my %city = (
    Bangalore => "Karnataka",
    Indore    => "MadhyaPradesh",
    Pune      => "Maharashtra",
    Allahabad => "UP",
);

my %friends_place = ();
my ($k, $v);
foreach my $ref (\%friend_list, \%city) {

    while (($k,$v) = each (%$ref)) {

        if (exists $ref{$k}) {

            print"Warning: Key is all ready there\n";
            next;
        } 
        $friends_place{$k} = $v;
    }  
}

while (($k,$v) = each (%friends_place)) {

    print "$k = $v \n";
} 
```

从这个 o/p 是

```
Raj=Good friend
Indore=MadhyaPradesh
Rohit=new Fiend
Bangalore=Karnataka
Allahabad=UttarPradesh
Sumit=Best Friend
Pune=Maharashtra
Rohini =Fiend 
```

但我想先打印**%friend_list**，然后再打印 % **city**。我想做的另一件事是，如果有任何重复的键，那么它应该给我一条警告消息。但它没有给我任何信息。正如我们在这里看到的，我们在两个哈希中都有阿拉哈巴德。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:48:48.637

尝试：

```
my %firend_list = (
   Raj       => "Good friend",
   Rohit     => "new Fiend",
   Sumit     => "Best Friend",
   Rohini    => "Fiend",
   Allahabad => "UttarPradesh",
);

my %city = (
    Bangalore => "Karnataka",
    Indore    => "MadhyaPradesh",
    Pune      => "Maharashtra",
    Allahabad => "UP",
);
#merging
my %friends_place = ( %friend_list, %city ); 
```

并且，对于警告：

```
foreach my $friend( keys %friend_list ){
 print"Warning: Key is all ready there\n" if $friend ~~ [ keys %city ];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:09:45.183

该行`if (exists $ref{$k}) {`是错误的，如果您将其放在`use strict; use warnings;`脚本的开头，您可以看到它。

此外，这一行应该是`if (exists $friends_place{$k}) {`产生关于重复键的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:51:57.323

由于哈希是无序的，您需要使用数组来存储排序：

```
my %friends_place = (%firend_list, %city);
my @friends_place_keyorder = ((keys %firend_list), (keys %city));
if ((scalar keys %friends_place) != (scalar @friends_place_keyorder)) {
    print 'duplicate key found';
}
foreach (@friends_place_keyorder) {
    print "$_ = $friends_place{$_}\n";
} 
```

**编辑**：我在 python 中的原始解决方案，出于历史目的留在这里：

由于哈希是无序的，您需要使用数组来存储排序。我不知道perl，所以下面的代码是python（翻译成perl应该相当简单）：

```
friend_list = ...
city = ...
friends_place = dict(friend_list.items() + city.items())
friends_place_keyorder = friend_list.keys() + city.keys()

# detect duplicate keys by checking their lengths
# if there is duplicate then the hash would be smaller than the list
if len(friends_place) != len(friends_place_keyorder): 
    print "duplicate key found"

# iterate through the list of keys instead of the hashes directly
for k in friends_place_keyorder:
    print k, friends_place[k] 
```

# jquery - 切换兄弟元素 jquery 的可见性

> ID：12578173
> 
> 赞同：2
> 
> 时间：2012-09-25T07:29:52.270
> 
> 标签：jquery, html, toggle

我在一个页面上有几个 div。每个 div 都有一个标题，我可以单击该标题来切换相应 div 的可见性。默认情况下，div 设置为`display:none`。

我已经`#ids`在每个 div 的点击功能中使用过，但是因为我在同一页面上有多个 div。我想使用一个`.class`，这样我就有一个类，因此一个控制可见性的函数。

我猜我需要使用`.parent`和`.sibling`类来做到这一点。

以下是我的代码的摘录：HTML：

```
<div> 
    <legend>
        <a id="show_table" class="show_table" href="#">
            <span id="plus_minus"></span>Div
        </a>
    </legend>
    <div class="toshow" id="toshow">Div to be shown</div>
</div> 
```

JS：

```
$('#show_table').click(function(){
    $("#toshow").slideToggle(); 
}) 
```

我认为要提高效率，这样我就不必为每个使用`#id`s 的 div 执行此操作，我想知道如何使用它的单个`.class`，可能是父级和兄弟级来完成此操作。

另外，我想在`plus_minus`跨度上有一个减号/加号切换功能。我使用个人也有同样的工作`ids`。我如何能够使用单个`.class`. 我尝试使用以下方法：

```
$('.div_show').click( function(){

$(this).parent().next().slideToggle();

if($(this).parent().next().is(':visible'){

$(this).closest('span').find('plus_minus').text('+');

}

else {

$(this).closest('span').find('plus_minus').text('-');

}

 }); 
```

但是，它似乎不起作用。

赞赏有关如何实现此 +/- 切换功能的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:32:36.840

为什么不试试这个

```
$('.show_table').click(function(){

    $(this).parent().next().slideToggle();

}) 
```

**更新代码**

因为您使用的是 SlideToggle，所以对 DOM 的更改不容易更新。所以您必须在它的回调函数中处理可见性问题。

试试这个代码

```
$('.show_table').click(function(){
      var $elem = $(this);
      $(this).parent().next().slideToggle('slow', function() {
          if($(this).is(':visible')){
             $elem.find('span').html('+');
          }
          else{
             $elem.find('span').html('-');
          }              
      });
}) 
```

[更新的小提琴](http://jsfiddle.net/sushanth009/5SCnf/12/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T07:37:02.583

```
$('#show_table').click(function(){
    $(this).parent().parent().find("div.toshow").slideToggle();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T07:32:33.547

您可以使用[`.parent()`](http://api.jquery.com/parent/)来获取`legend`元素，并[`.next()`](http://api.jquery.com/next/)获取以下兄弟（这是您的`div`）：

```
$(".show_table").click(function () {
    $(this).parent().next().slideToggle();
}); 
```

如果您的标记可能在结构上发生变化，您可以通过使用[`.closest()`](http://api.jquery.com/closest/)而不是`.parent()`，然后使用[`.find()`](http://api.jquery.com/find/)：

```
$(".show_table").click(function () {
    $(this).closest("div").find(".toshow").slideToggle();
}); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/96xqQ/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T07:33:57.480

你可以试试这个

```
$('.show_table').on('click', function(){
   $(this).closest('div').find(".toshow").slideToggle();

}) ; 
```

或者你可以在你的容器 div 上放置一个类作为标题和 div

```
<div class='container'> 
  <legend>
     <a id="show_table" class="show_table" href="#">
       <span id="plus_minus"></span>Div
     </a>
   </legend>

   <div class = "toshow" id = "toshow" >Div to be shown</div>

 </div> 
```

然后你可以试试这个

```
$('.show_table').on('click', function(){
   $(this).closest('.container').find(".toshow").slideToggle();

}) ; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T07:34:27.690

你可以试试这个：

```
$('.show_table').each(function(){
    $(this).parent().parent().find('.my-toggle-class').slideToggle(); 
}); 
```

# blackberry - 黑莓BrowserField白色空白页问题

> ID：12578176
> 
> 赞同：2
> 
> 时间：2012-09-25T07:30:02.240
> 
> 标签：blackberry, browserfield

您好我想在 BrowserField 中显示 html 内容。我使用代码 blove 来执行此操作，但我只看到白色的空白页面。

```
BrowserField demo = new BrowserField(); 
String res="<html><body><p>demo</p></body></html>"; 

demo.displayContent(res, "http://localhost"); 
```

有时它使用 css 字体正确显示我的页面，但有时它不显示任何内容。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:07:15.917

如果你看[一下这个黑莓示例](http://docs.blackberry.com/en/developers/deliverables/11958/Display_HTML_in_a_browser_field_825639_11.jsp)，

他们确保`add()`在调用**之前**`BrowserField`向其父级发送。`Manager` **`displayContent()`**

 **我不知道你是否只是省略了那行代码来缩短你的问题，如果你`add()`完全错过了对的调用，或者你是否把它放在**了**对`displayContent()`. 但是，请尝试按照 BlackBerry 示例中列出的顺序执行此操作，如果可行，请告诉我。

```
BrowserField demo = new BrowserField(); 
add(demo);
String res="<html><body><p>demo</p></body></html>"; 
demo.displayContent(res, "http://localhost"); 
```**

# c# - C# - 不时检查文件是否存在并从中读取

> ID：12578177
> 
> 赞同：1
> 
> 时间：2012-09-25T07:30:04.667
> 
> 标签：c#, multithreading, timer, windows-services

我创建了一个 Windows 服务，它会不时检查某个是否存在，如果存在，然后从中读取，将数据发送到服务器并将文件移动到另一个文件夹。一个文件的大小约为 1-3 Mb。

我想我会用`System.Threading.Timer`这里来检查文件是否存在。你怎么看呢？

还有一个问题。如果正在复制文件，则我的应用程序不得从中读取。它应该等到复制完成。只有在那之后，它必须从中读取并执行其他活动。

所以问题：

1）这是一个正确的决定`System.Threading.Timer`吗？

2) 我如何检查文件是否被复制并等到它完成？

3）我必须使用多线程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:31:47.230

> 我想我会用`System.Threading.Timer`这里来检查文件是否存在。你怎么看呢？

我想你可能会看一下这个[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类，它会在创建文件时通知你并引发一个事件，而不是使用一个不断轮询文件是否存在的 Timer。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:32:52.097

计时器非常昂贵。您可以使用`FileSystemWatcher`Which 监听文件系统更改通知并在目录或目录中的文件更改时引发事件。

```
// Create a new FileSystemWatcher and set its properties.
    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = /*path*/
    /* Watch for changes in LastAccess and LastWrite times, and
       the renaming of files or directories. */
    watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
       | NotifyFilters.FileName | NotifyFilters.DirectoryName;
    // Only watch text files.
    watcher.Filter = "*.txt";

    // Add event handlers.
    watcher.Changed += new FileSystemEventHandler(OnChanged);
    watcher.Created += new FileSystemEventHandler(OnChanged);
    watcher.Deleted += new FileSystemEventHandler(OnChanged);
    watcher.Renamed += new RenamedEventHandler(OnRenamed);

    // Begin watching.
    watcher.EnableRaisingEvents = true; 
```

那么这将是`OnChanged`方法：

```
 //This method is called when a file is created, changed, or deleted.
    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        //Show that a file has been created, changed, or deleted.
        WatcherChangeTypes wct = e.ChangeType;
        Console.WriteLine("File {0} {1}", e.FullPath, wct.ToString());
    } 
```

参考： [http ://devproconnections.com/net-framework/how-build-folder-watcher-service-c](http://devproconnections.com/net-framework/how-build-folder-watcher-service-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:43:52.570

我使用的常用方法是使用 FileSystemWatcher 监视文件夹（或相关 API，如果不是 .NET 托管），并尝试确保对源/目标文件夹执行的唯一操作是在文件夹之间移动/重命名在同一个物理驱动器上，然后删除。如果要添加文件，请将其打开/写入/刷新/关闭它到目标文件系统驱动器上的临时文件夹，然后才将其移动/重命名为正在监视的文件夹。至关重要的是，临时文件夹与目标文件夹位于同一物理驱动器上，这样它就可以在没有数据副本的情况下移动/重命名。

这在非托管系统上运行良好，没有在 C# 上尝试过，但没有看到任何不正常工作的理由。

其他涉及持续轮询和/或检查文件大小的解决方案充其量只是不方便、不灵活、浪费、混乱和延迟。

多线程 - 在任何远程文件系统上都可能是的。网络文件调用往往会在不可恢复性等方面有很长的超时时间，因此在发出错误/异常之前永远阻止调用者。如果您想完成其他任何事情，您可能应该放弃很多，除非您的用户可以容忍“沙漏应用程序”，窗口变得无响应、消失到后面、变灰并且操作系统提供关闭它们。

哦，还有一件事 - 最好在启动时进行清除。东西随时可能出错，所以在运行时清理临时文件夹等中的任何挥之不去的垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:07:01.237

我不会使用 FileSystemWatcher 它太脆弱了

[FileSystemWatcher 不适用于从 Windows 服务创建的文件](https://stackoverflow.com/questions/4798880/filesystemwatcher-does-not-work-on-files-created-from-windows-service)

我会将计时器设置为合理的滴答周期，您应该没问题。

一些示例代码

```
Timer_TicK()
{
 // remove tick event handler

 // do your processing

 // add back tick event handler
} 
```

如果您有大量的处理工作要做，这将防止发生多个滴答事件。在您发现由于性能问题需要使用它之前，我不会使用多线程。

在 C# 中，如果您在文件系统复制文件时尝试读取文件，您将收到异常。您将需要检查该异常或检查文件的属性（大小等）以了解何时完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-14T02:29:38.030

完整计时器示例，每次间隔发生时我都会启动新线程（您不必这样做，但这是一个很好的做法），它会检查文件是否存在并读取它，如果存在则将其删除：

```
using System;
using System.ServiceProcess;
using System.Threading;
using System.Timers;
using System.IO;

namespace MyNamespace
{
    public partial class Service1:  ServiceBase
    {
        Thread syncThread = null;
        System.Timers.Timer timer1;
        string filePath = @"C:\myfile.txt";
        int interval = 60000;  // 1 min -- adjust as necessary

        public Service1()
        {
           InitializeComponent();             
        }

        protected override void OnStart(string[] args)
        {
            timer1 = new System.Timers.Timer();
            timer1.Interval = interval;
            timer1.Enabled = true;
            timer1.Elapsed += new ElapsedEventHandler(timer1_Elapsed);
            timer1.Start();
        }
        protected override void OnStop()
        {
            syncThread.Abort();
            timer1.Stop();
        }
        protected void timer1_Elapsed(object sender, ElapsedEventArgs e)
        {
            syncThread = new Thread(new ThreadStart(doThread));
            syncThread.Start();
        }
        protected void doThread()
        {
            // whatever you put here, it will
            // run for each timer interval that elapses
            // in a separate thread, and each thread will
            // end when the processing in this function ends

            string fileContent = String.Empty;      

            if (File.Exists(filePath)
            {
                FileStream fs = new FileStream(filePath, FileMode.Open);
                StreamReader sr = new StreamReader(fs);
                fileContent = sr.ReadToEnd();
                sr.Close();
                fs.Close();
            } 

            if (fileContent != String.Empty)
            {
               // File was present... process the content...

               // Then I do this...
               File.Delete();
            }
        } 
    }
} 
```

我运行它没有任何问题。我更喜欢在每个时间间隔启动新线程，这样如果上一次运行尚未完成，它不会导致问题。走这条路，你有控制权，可以决定你的间隔是多少，你的过程并不总是在继续——只是服务。另一条路线，`FileSystemWatcher`它总是在可能的情况下监视和运行，并且您无法调整时间间隔，就像您可以使用计时器一样，以减少正在进行的事件/进程的数量，例如何时/如果文件是创建，然后快速修改和保存。

我看到的唯一缺点是必须自己检查文件属性，但这些检查很容易进行。如果您`File.Delete()`像我一样在处理后这样做，您只需`File.Exists(filePath)`要做，以了解文件是否已重新创建。如果您必须检查修改，您只需检查`DateTime lastModifed = File.GetLastWriteTime(filePath)`（参见[http://www.csharp-examples.net/file-creation-modification-time/](http://www.csharp-examples.net/file-creation-modification-time/)）与当前时间 + 您的时间间隔（应该是`DateTime lastRun = DateTime.Now.AddMilliseconds(interval)`）。如果`lastRun > lastModified`，您将不得不处理它。

# php - Symfony2 中 isGranted 的替代方案

> ID：12578182
> 
> 赞同：5
> 
> 时间：2012-09-25T07:30:16.747
> 
> 标签：php, symfony, roles

在我的应用程序中测试角色时，我发现`isGranted`了`SecurityContext`. 它工作得很好，但现在我需要检查不是当前用户的用户的角色，所以`isGranted`对我不起作用。

我一直在寻找，我找到了`hasRole`用户的功能，问题是这个功能没有在 Symfony 的层次结构树中查找，它只是在分配给用户的角色中查找。

`isGranted`那么，是否有一个函数可以像当前用户一样在层次结构树中查找用户的角色？

编辑

我找到了这个解决方案：

[如何使用 Symfony2 中的 AccessDecisionManager 对任意用户进行授权？](https://stackoverflow.com/questions/11288293/how-to-use-the-accessdecisionmanager-in-symfony2-for-authorization-of-arbitrary)

我实现了它并且它有效，问题是它需要`ContainerBuilder`并且我更喜欢不同的方法。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:43:49.480

基本上 AFAIK SecurityContext`Symfony\Component\Security\Core\Authentication\Token\TokenInterface`使用方法可以从哪里获取当前用户`getUser`。

如果用户令牌未经过身份验证，则`isGranted`首先尝试验证用户令牌，然后使用调用的类，该类`AccessDecisionManager`基本上遍历选民对象并调用它们（并且可以为此使用不同的策略）其中一个被调用的选民是`RoleHierarchyVoter`使用`Symfony\Component\Security\Core\Role\RoleHierarchy`.

所以回答你的问题：

我认为对于其他用户来说没有像 isGranted 这样的功能（或者不知道任何功能），但是您可以编写自己的服务来允许使用`security.role_hierarchy`（请注意这是私人服务）。

顺便说一句`hasRole`，大多数时候可能就足够了，所以也许你应该考虑一下你想做什么；）

# arrays - Delphi 如何解决带有指针（无类型）参数的重载函数？

> ID：12578185
> 
> 赞同：6
> 
> 时间：2012-09-25T07:30:24.493
> 
> 标签：arrays, delphi, pointers, overloading, overload-resolution

下面是几个重载的函数。尝试猜测其中哪个函数会被调用。

```
program Project2;
    {$APPTYPE CONSOLE}

uses
  Types, SysUtils;

procedure Some(const Buf); overload;
  begin
    Writeln('const-typeless')
  end;

//procedure Some(var Buf); overload;
//  begin
//    Writeln('var-typeless')
//  end;

//procedure Some(Buf :TByteDynArray); overload;
//  begin
//    Writeln('Byte dynamic array');
//  end;

procedure Some(Buf :array of Byte); overload;
  begin
    Writeln('Byte open array');
  end;

procedure Some(Buf :TArray<Byte>); overload;
  begin
    Writeln('TBytes AKA byte generic array');
  end;

//procedure Some(Buf :TBytes); overload;
//  begin
//    Writeln('TBytes AKA byte generic array');
//  end;

var p: pointer;

begin
  try
    { TODO -oUser -cConsole Main : Insert code here }
    WriteLn ('Calling overloaded procedure with Pointer parameter:');

    Write('  * nil: '); p := nil; Some(p);
    Write('  * garbage: '); p := Pointer(1); Some(p);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;

  ReadLn;
end. 
```

事实上，第二个被调用并在第二个调用时抛出 AV。鉴于旧的 VCL 模式使用`Pointer`和`Integer`可互换（例如`TList`and`TStrings.Objects`和`TWinControl.Tag`）可能会在相当常规的代码上导致意外的 AV。

*{$T+}*不会改变行为，所以德尔福认为`^Byte`不是`Pointer.`

但是声明`p: PInteger;`修复它。开放数组变体也不需要指针，并且与泛型数组变体不同地处理/命名。动态数组的名称修改与通用数组不同，因此两者都可以使用，但如果两者都未注释，则在调用站点会发生*模棱两可的重载错误。*但是，如果在禁用通用数组和未注释动态数组的情况下进行编译 - 会发生同样的奇怪行为。

为什么编译器在参数为 a 时解析为动态/通用数组`Pointer`，而在参数为时解析为无类型常量`PInteger`？

*   相关：[Delphi 如何解决带有整数参数的重载函数？](https://stackoverflow.com/questions/12526786)
*   相关：[为什么“字符串数组”的两个别名处理不同？](https://stackoverflow.com/questions/11029353)
*   相关：[QC 108978](http://qc.embarcadero.com/wc/qcmain.aspx?d=108978)
*   代码来自：[http ://www.sql.ru/forum/actualthread.aspx?tid=970289](http://www.sql.ru/forum/actualthread.aspx?tid=970289)

PS。已开[QC 109019](http://qc.embarcadero.com/wc/qcmain.aspx?d=109019)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:58:40.003

没有这方面的文档，所以我们能做的最好的就是戳编译器并尝试猜测其行为背后的原因。

现在，具有无类型参数的过程可以传递任何参数，而不管其类型如何。因此，任何合理的重载解决方案都必须最后考虑无类型参数，只有当它用尽了所有其他可能的候选者时。否则总是会被选中。

因此，可以解释行为。

*   当您的参数类型为 时`Pointer`，即与动态数组兼容的赋值。这意味着可以选择动态数组重载。
*   当您的参数是任何其他指针类型时，它与动态数组的赋值不兼容。因此，重载决议回退到最终可能的候选者，即无类型参数。

最终，这种行为归结为编译器认为`Pointer`与任何动态数组的赋值兼容的事实。这个陈述是事实很容易通过实验来证实，但是，我找不到它的文档。

# excel - 在 IE8 中打开具有数据透视表的 Excel 文件（扩展名为 .xml）

> ID：12578190
> 
> 赞同：0
> 
> 时间：2012-09-25T07:30:40.693
> 
> 标签：excel, internet-explorer-8

在我的 Web 应用程序中，可以下载动态生成的 Excel 文件。该文件有一个数据透视表。

现在当我用 chrome 下载它时，它只给了我“另存为”选项。

Firefox 确实给了我“用...打开”选项。我选择“使用 Excel 打开”，效果很好！

IE8 也有一个“打开”选项。当我单击“打开”时，它只会给出一个错误（参见：[http ://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/internet-explorer-and-excel-pivot-tables-trouble /dba6292f-3e67-41f0-937d-d92ddc339df7](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/internet-explorer-and-excel-pivot-tables-trouble/dba6292f-3e67-41f0-937d-d92ddc339df7) )

它与 IE 将临时文件的名称更改为 originalfilename[1] 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:10:41.377

我通过将文件放入 zip 来解决它。这样我可以选择“打开 zip”，它将列出 xml 文件，双击它，文件将完美打开，而无需将 excel 文件保存到您的桌面（或下载文件夹）:)

# android - 旋转时Android App崩溃

> ID：12578193
> 
> 赞同：1
> 
> 时间：2012-09-25T07:31:02.100
> 
> 标签：android, android-layout, rotation, android-asynctask, orientation

我将以下代码放入 manifest.xml

```
<activity android:name="CPohonApp" android:configChanges="keyboardHidden|orientation"></activity> 
```

这是我活动中的代码

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

但是当我旋转时应用程序仍然崩溃。

为什么会这样？

我使用 Android 2.3.3 API 10

谢谢你

编辑

这是我的原木猫

```
09-25 14:36:31.351: E/AndroidRuntime(334): FATAL EXCEPTION: main
09-25 14:36:31.351: E/AndroidRuntime(334): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.hdte.sawit/org.hdte.sawit.pohon.CPohonApp}: java.lang.NullPointerException
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2832)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.access$1600(ActivityThread.java:117)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.os.Looper.loop(Looper.java:123)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-25 14:36:31.351: E/AndroidRuntime(334):  at java.lang.reflect.Method.invokeNative(Native Method)
09-25 14:36:31.351: E/AndroidRuntime(334):  at java.lang.reflect.Method.invoke(Method.java:507)
09-25 14:36:31.351: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-25 14:36:31.351: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-25 14:36:31.351: E/AndroidRuntime(334):  at dalvik.system.NativeStart.main(Native Method)
09-25 14:36:31.351: E/AndroidRuntime(334): Caused by: java.lang.NullPointerException
09-25 14:36:31.351: E/AndroidRuntime(334):  at org.hdte.sawit.pohon.CPohonApp.createDialogSend(CPohonApp.java:277)
09-25 14:36:31.351: E/AndroidRuntime(334):  at org.hdte.sawit.pohon.CPohonApp.onCreateDialog(CPohonApp.java:299)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.Activity.onCreateDialog(Activity.java:2482)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.Activity.createDialog(Activity.java:882)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.Activity.restoreManagedDialogs(Activity.java:871)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.Activity.performRestoreInstanceState(Activity.java:817)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1096)
09-25 14:36:31.351: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1625)
09-25 14:36:31.351: E/AndroidRuntime(334):  ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:36:23.867

您应该使用 Dot(.) 引导您的活动名称。

```
<activity android:name=".CPohonApp" android:configChanges="keyboardHidden|orientation"></activity> 
```

或者，当您在 android 清单文件中声明它时，将完整的包名称与您的活动名称一起使用。

```
<activity android:name="yourpackagename.CPohonApp" android:configChanges="keyboardHidden|orientation"></activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:59:33.467

在每个活动标签中使用

```
<activity android:name=".example"  android:configChanges="orientation|keyboardHidden"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T15:41:51.373

在清单中添加此代码

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

完整的代码示例

```
 <activity
        android:name=".your activity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name" >
    </activity> 
```

# javascript - 隐藏复选框和标签

> ID：12578196
> 
> 赞同：1
> 
> 时间：2012-09-25T07:31:08.137
> 
> 标签：javascript, jquery, asp.net

场景：我在转发器中有一个 ul an li 和一个复选框和标签，它们一起形成了一个复选框列表。我有一个控制复选框行为的javascript文件。我成功地用 javascript 代码隐藏了复选框，但是当我试图隐藏标签时它不起作用。

我将发布代码 ASP.NET 以便更好地理解：

```
<asp:Repeater ID="Repeater1" runat="server" DataSource="<%# GetSecondAreas(CurrentLocationName) %>">
<HeaderTemplate>
<ul>
</HeaderTemplate>
<ItemTemplate>
<li class="area">
<input type="checkbox" class="category" value="<%# string.Concat(CurrentLocation.Area1,"| ", CurrentLocation.Area2)%>" />
<label>
<%#CurrentLocation.Area2%>
</label>
<asp:Repeater ID="Repeater2" runat="server" DataSource="<%# GetThirdAreas(CurrentLocation.Area2) %>">
<HeaderTemplate>
<ul>
</HeaderTemplate>
<ItemTemplate>
<li>
<input type="checkbox" class="category" value="<%#string.Concat(CurrentLocation.Area1,"| ", CurrentLocation.Area2,"| ", CurrentLocation.Area3)%>" />
<label id="last">
<%#CurrentLocation.Area3%>
</label>
</li>
</ItemTemplate>
<FooterTemplate>
</ul>
</FooterTemplate>
</asp:Repeater>
</li>
</ItemTemplate>
<FooterTemplate>
</ul>
</FooterTemplate>
</asp:Repeater> 
```

这是javascript代码：

```
function updateByArea(current) {
//If current is unchecked => uncheck all child checkboxes
if (current.attr("checked") == null || current.attr("checked") == "")
    $j(".area ul li input[value^='" + current.val() + "']:checked").removeAttr("checked").hide(); //checkbox
    $j('label[id="id_val"]').hide();
$j("#searchFilter .area>input:checkbox:checked").each(function (i, item) {
    $j(".area ul li input[value^='" + $j(item).val() + "']:not(:checked)").attr("checked", "checked").show(); //checkbox
    $j('label[id="id_val"]').show();
}); 
```

}

我在这里发布的是我为 id="last" 的标签所尝试的

问题：

我是否对标签的 javascript 代码进行了更正，所以当我勾选复选框以隐藏并同时显示复选框和标签时？

PS：在我现在拥有的代码上，它只隐藏了复选框。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:34:31.870

改变

```
.hide(); 
```

至

```
.parent().hide(); 
```

这将选择父级 [应该是 li] 并隐藏它。

# eclipse - Eclipse 选项卡重新定位

> ID：12578197
> 
> 赞同：71
> 
> 时间：2012-09-25T07:31:08.550
> 
> 标签：eclipse, tabs, eclipse-juno

我使用 Indigo 有一段时间了，现在尝试 Juno
有一点令人烦恼的区别：

在 Indigo 打开 10 个标签时

一个 | **乙**| C | D | Ĵ | H | G ....(F | T | S)

当前在 B 上
，当您再次选择选项卡 T 中显示的文件时，此选项卡（在**Indigo**上，这不是 Juno 上的问题）将像这样重新定位：

一个 | 乙| **T** | C | D | Ĵ | H ....（G | F | S）

这很有用，因为如果在 B 之后打开 T，这意味着它们应该组合在一起

在 Juno 上，它不会重新定位它们，而是您需要在选项卡列表中找到最新的文件

问：怎么设置回来？我在选项中搜索了带有“选项卡”的参数，但没有结果

编辑：在新版本中仍然相同（开普勒）

编辑：感谢 Paul 的回答，一个好的解决方案是在 eclipse 文件夹中搜索 .css 文件，例如在 e4-default-win7.css 中将 swt-mru-visible 属性设置为 true

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-01T14:43:19.100

默认情况下，Juno 不呈现您在 Indigo 中看到的 MRU（最近使用）选项卡行为（它从未完全正确地工作），而是使用编辑器文档顺序。

我相信您可以通过切换到经典主题`Preferences>General>Appearance`或编辑 CSS 来重新激活它。见[http://wiki.eclipse.org/Eclipse4/CSS](http://wiki.eclipse.org/Eclipse4/CSS)

```
.MPartStack {
    swt-mru-visible: true;
} 
```

不要忘记重新启动 Eclipse 以使其使用新参数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-26T06:54:40.057

显然这个选项是在 Eclipse Mars 4.5 中添加的：

窗口 -> 首选项 -> 常规 -> 外观 ->

> 溢出时的可见选项卡：
> 
> [X] 显示最近使用的标签

# ios - 逐帧动画 UIImageView

> ID：12578203
> 
> 赞同：4
> 
> 时间：2012-09-25T07:31:28.073
> 
> 标签：ios, animation, uiimageview, frame

我知道如何使用逐帧方法添加动画 UIImageView 但我的问题是关于如何动画 UIImageView**已经**添加到视图控制器故事板上作为 IBOutlet UIImageView 。

在这种和平的代码中会发生什么变化？！

```
NSArray *myImages = [NSArray arrayWithObjects:
                         [UIImage imageNamed:@"bookmark1.png"],
                         [UIImage imageNamed:@"bookmark2.png"],
                         [UIImage imageNamed:@"bookmark3.png"],
                         [UIImage imageNamed:@"bookmark4.png"],
                         [UIImage imageNamed:@"bookmark5.png"],nil];

    myAnimatedView = [UIImageView alloc];

   [myAnimatedView initWithFrame:CGRectMake(0, 0, 131, 125)];

    myAnimatedView.animationImages = myImages;

    myAnimatedView.animationDuration = 0.25;

    myAnimatedView.animationRepeatCount = 1;

    [myAnimatedView startAnimating];

    [self.navigationController.view addSubview:myAnimatedView]; 
```

我想在我的 viewController 上为这个图像设置动画

[http://imageshack.us/a/img717/3051/bookmarkl.gif](http://imageshack.us/a/img717/3051/bookmarkl.gif)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:50:53.890

它甚至更容易。首先，添加 .h 文件：

```
@property (nonatomic, retain) IBOutlet UIImageView *iV; 
```

之后，将此插座连接到情节提要上的实际 UIImageView。更改您的代码：

```
iV.animationImages = myImages;
iV.animationDuration = 0.25;
iV.animationRepeatCount = 1;
[iV startAnimating]; 
```

就这样。希望这有帮助

ps 是的，别忘了 iV = nil; in - (void)viewDidUnload 方法

UPD：添加

```
[self performSelector:@selector(animationDone) withObject:nil afterDelay:0.25]; 
```

After startAnimating call, and obviously added animationDone method:

```
- (void)animationDone {
    [iV stopAnimating];
    [iV setImage:[UIImage imageNamed:@"bookmark5.png"]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:40:49.380

好吧，它几乎是一样的。您不需要分配图像视图`[[UIImageView alloc] init]`，也不需要将其添加到 viewController。其余的都是一样的。

# php - PHP，多维数组：与月份中的日期相交的事件

> ID：12578207
> 
> 赞同：1
> 
> 时间：2012-09-25T07:31:46.367
> 
> 标签：php, arrays, multidimensional-array, arraylist

我想建立一个电影时间表。我有 $array1 包含电影标题和播放日期和时间：

```
array = 
    0: array = 
      Title: string = American Beauty
      Date: string = 25/09/2012
      Time: string = 15:00 - 16:20
    1: array = 
      Title: string = The Godfather 
      Date: string = 25/09/2012
      Time: string = 16:20 - 18:20
    2: array =
 Title: string = Pulp Fiction
Date: string = 26/09/2012
Time: string = 15:00 - 16:20 
```

我有 $array2 包含按星期一、星期二、星期三、星期四和星期五分组的月份中的日子（周末没有电影）

```
Array
(
    [1] => Array
        (
            [0] => 3
            [1] => 10
            [2] => 17
            [3] => 24
            [4] => 
        )

    [2] => Array
        (
            [0] => 4
            [1] => 11
            [2] => 18
            [3] => 25
            [4] => 
        )

    [3] => Array
        (
            [0] => 5
            [1] => 12
            [2] => 19
            [3] => 26
            [4] => 
        )

    [4] => Array
        (
            [0] => 6
            [1] => 13
            [2] => 20
            [3] => 27
            [4] => 
        )

    [5] => Array
        (
            [0] => 7
            [1] => 14
            [2] => 21
            [3] => 28
            [4] => 
        )

) 
```

我需要将这两个数组相交，这样我就可以在第 25 天下打印电影“美国美女”，也可以在第 25 天“教父”和第 26 天“低俗小说”下打印。

意思是我需要打印：

```
SEPTEMBER 2012

    Monday Tuesday                          Wednesday ....
    3        4                                  5

    10       11                                 12

    17       18                                 19

    24       25                                 26                    
           15:00-16:20 American Beauty       15:00-16:20 Pulp Fiction
           16:20-18:20 The Godfather 
```

到目前为止我的尝试：

```
foreach( $array1  as $key => $value ) 
{
    $theTime  = $value['Time'];
    $theTime  = explode("/", $theTime );
    $days[] = $theTime  [0];
    $months[] = $theTime  [1];
} 
```

所以我在数组 $days 中有所有的播出日，但从这里我不知道如何遵循，即使这种方法是正确的。

这是我获得 $array2 的方法：

```
$month = 9; 
$year = 2012;

for ($i = 1; $i <= 31; $i++) 
{
    $timestamp = mktime(0, 0, 0, $month , $i, $year);

    if (date("n", $timestamp) == $month ) 
    {
        $day = date("N", $timestamp);

        // Monday  1 to Friday 5 
        if ($day == 1 OR $day <= 5) {
            $array2[$day][] = date("j", $timestamp); 
        }
    }
} 
```

请帮忙，我卡住了。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:02:45.900

好的，您将遍历 $array1 并解析电影的日期。然后，如果您的日子在那里，您将查看 array2 内部

```
foreach($array1 as $movie){

    $movieDate = new DateTime($movie);
    //as you indexed $array2 with monday = 1 -> friday = 5 you can use the "w" format
    if(isset($array2[$movieDate->format("w"))){

        $array[$movieDate->format("j")][] = $movie;
    }
} 
```

我在你的输出数组中做了一些突变，它变成了：2012 年 9 月

```
Monday Tuesday                          Wednesday ....
3=>[]        4 =>[]                                 5=>[]

10=>[]       11    =>[]                             12=>[]

17=>[]       18   =>[]                              19=>[]

24 =>[]      25=>[                                 26   =>[                 
       15:00-16:20 American Beauty,       15:00-16:20 Pulp Fiction]
       16:20-18:20 The Godfather] 
```

# java - 无法实例化 RegionFactory

> ID：12578209
> 
> 赞同：8
> 
> 时间：2012-09-25T07:31:48.130
> 
> 标签：java, hibernate, jpa-2.0

我正在尝试启用二级缓存，但出现异常。

persistence.xml 中二级缓存的代码如下：

```
 <property name="hibernate.cache.use_second_level_cache" value="true"/>
            <property name="hibernate.cache.use_query_cache" value="true"/>
            <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.EhCache"/>
        </properties> 
```

异常的堆栈跟踪是：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.org.JPAUtil.<clinit>(JPAUtil.java:21)
    at com.org.Main.main(Main.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NoClassDefFoundError: net/sf/ehcache/CacheException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.getConstructor(Class.java:1674)
    at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:409)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:280)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2833)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2829)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1840)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:902)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)
    at com.org.JPAUtil.<clinit>(JPAUtil.java:17)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: net.sf.ehcache.CacheException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 20 more 
```

为ehcache添加jar后，我得到了异常

```
Caused by: org.hibernate.HibernateException: could not instantiate RegionFactory [org.hibernate.cache.EhCache]
at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:423)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:280)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2833)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2829)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1840)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:902)
... 10 more
Caused by: java.lang.InstantiationException: org.hibernate.cache.EhCache
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:419)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T04:29:46.643

代替：

```
<property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.EhCache"/> 
```

采用：

```
<property name="hibernate.cache.provider_class"  value="org.hibernate.cache.EhCacheProvider"/> 
```

例如，使用 Hibernate 4.x 以及 JAR 文件[hibernate-ehcache-4.3.10.Final.jar](https://mvnrepository.com/artifact/org.hibernate/hibernate-ehcache/4.3.10.Final)和[slf4j-api-1.6.1.jar](https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.6.1)，修改`persistence.xml`：

```
<properties>
  <!-- ... other properties ... -->
  <property name="hibernate.show_sql" value="false"/>
  <property name="hibernate.format_sql" value="false"/>
  <property name="hibernate.cache.use_second_level_cache" value="true"/>
  <property name="hibernate.cache.provider_class"  value="org.hibernate.cache.EhCacheProvider"/>
</properties> 
```

然后确保将`hibernate-ehcache-4.3.10.Final.jar`其`slf4j-api-1.6.1.jar`部署到 JBoss。

> 不包括. **_**`ehcache-core-2.4.3.jar`

现在您可以注释实体，例如：

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL, region = "region_name")
public class MyEntity implements Serializable {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:42:06.377

确保`Hibernate`和`ehcache`位于同一目录中。应用程序服务器 `lib`或您的应用程序`WEB-INF/lib`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:56:07.670

检查是否`ehcache-x.x.jar`在您的类路径中。在 Eclipse 中，您可以通过`right click your project -> build path -> configure build path`. 如果你错过了那个 jar，你可以从[这里](http://www.findjar.com/class/net/sf/ehcache/CacheException.html;jsessionid=89E972781727367385544AEB0519ED4B)下载。如果你使用的是 maven，你可以在你的 pom.xml 中加入以下依赖：

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache</artifactId>
    <version>2.6.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T09:27:19.660

在您的 persistence.xml 中使用以下属性。

```
<property name="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</property> 
```

它将解决问题。

# sql - 当查询已经在双引号内时，如何在 oracle 中用空格处理列名？

> ID：12578210
> 
> 赞同：2
> 
> 时间：2012-09-25T07:31:49.303
> 
> 标签：sql, oracle

我有一个这样的查询，它已经用双引号括起来了。

```
result = db.Query("SELECT ACTUAL_N_WELLS, TARGET_N_WELLS, YTD ACTUAL AS YTD_ACTUAL, 
YTD BUDGET AS YTD_BUDGET, (CONVERT(DATETIME,PERIOD,112)) AS DATES 
FROM DASH_GL_DRILLING_PERF
 WHERE ASSET_NAME='Bab & Gas Asset' 
AND (  to_date(DASH_GL_DRILLING_PERF.PERIOD,'yyyy/mm/dd') > 
(SELECT add_months(max(to_date(DASH_GL_DRILLING_PERF.PERIOD,'yyyy/mm/dd')),-3) 
from DASH_GL_DRILLING_PERF))"); 
```

在此列“YTD ACTUAL”和“YTD BUDGET”有空格，但由于查询已经在双引号内，我该如何写列名？在这种情况下如何转义双引号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:34:11.777

如果您使用`C#`,`Java`或`PHP`在此上，请使用反斜杠转义双引号`\`

```
result = db.Query("SELECT ACTUAL_N_WELLS, TARGET_N_WELLS, \"YTD ACTUAL\" AS YTD_ACTUAL...."); 
```

# iphone - 正确的 NSString 长度

> ID：12578213
> 
> 赞同：0
> 
> 时间：2012-09-25T07:32:05.413
> 
> 标签：iphone, objective-c, ios5, nsstring

我正在开发我的第一个 iPhone 应用程序，在该应用程序中我必须计算 NSString 的长度，我已经在 SO 上尝试了可用的方法和解决方案，但长度总是错误的。例如，对于字符串“test4”，NSString.length 返回 12，而它应该返回 5。

我尝试过 NSString 的 length 属性和 lengthOfBytesUsingEncoding 但都返回相同的结果。

任何帮助，将不胜感激。

**编辑**

```
NSString *string = @"test4";
[string lengthOfBytesUsingEncoding:NSUTF8StringEncoding]; // returns 12
string.length; // returns 12 
```

**完整代码**

```
+(NSString *)AES256Encrypt:(NSString *)data withKey:(NSString *)rawkey{

    rawkey = [NSString stringWithFormat:@"%@%@", @"123456789023456", rawkey];
    rawkey = [rawkey substringWithRange:NSMakeRange(0, 32)];

    NSData *key = [rawkey dataUsingEncoding:NSUTF8StringEncoding];
    NSData *iv = [key subdataWithRange:NSMakeRange(0, 16)];
    const char *bytes = [data cStringUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"%d", data.length); // prints 12
    data = [self encode:bytes length:data.length];

    NSData *rawData = [data dataUsingEncoding:NSUTF8StringEncoding];

    CCCryptorStatus status = kCCSuccess;

    NSData *encrypted = [rawData dataEncryptedUsingAlgorithm:kCCAlgorithmAES128 key:key initializationVector:iv options:kCCOptionPKCS7Padding error:&status];

    NSString *text = [encrypted base64EncodedString];
    return text;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:49:29.977

```
NSString *myString = @"test4";
int i =myString.length;
NSLog(@"Count =%d",i); 
```

哪个打印`Count = 5`

# yii - 无法将 yii 扩展添加到我的项目？

> ID：12578217
> 
> 赞同：3
> 
> 时间：2012-09-25T07:32:12.410
> 
> 标签：yii, yii-extensions

他们有什么*常用的方法*来**为我的 yii 项目添加扩展**吗？如何向我的 yii 添加扩展请解释**步骤**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:52:26.953

“**应用程序配置**”在安装扩展时起着重要作用。默认情况下，此配置将在一个 php 文件中（即 protected/config/main.php ）

*Yii 是一个框架，而不是一个应用程序* ......所以你需要自己编辑 php 代码。

1）有些人将扩展开发为 Yii 组件，您需要将这些扩展添加到“**组件**”配置中。

2）有些人开发扩展为 Yii 模块，你需要将这些模块添加到“**模块**”配置中。

3）有些人开发**行为**，你需要编辑你的控制器或模型类来添加这些行为。

还有许多其他类型的扩展...您需要遵循扩展开发人员提供的指南。

# c - 二维数组指针

> ID：12578218
> 
> 赞同：1
> 
> 时间：2012-09-25T07:32:18.737
> 
> 标签：c, pointers

任何人都可以解释这一点吗？

```
#include<stdio.h>

void FunPrinter(int *x)
{
 int i, j;
 for(i = 0; i < 4; i++, printf("\n"))
  for(j = 0; j < 5; j++)
   printf("%d\t",*x++);
}

int main()
{
 int x[][5] = {
        {17, 5, 87, 16, 99},
        {65, 74, 58, 36, 6},
        {30, 41, 50, 3, 54},
        {40, 63, 65, 43, 4}
       };
 int i, j;
 int **xptr = x;
 printf("Addr:%ld,Val:%ld,ValR:%ld",(long int)x,(long int)*x,(long int)**x);
 printf("\nInto Function\n");
 FunPrinter(&x[0][0]);
 printf("\nOut Function\n");
 for(i = 0; i < 4; i++, printf("\n"))
  for(j = 0; j < 5; j++)
   printf("%d\t",**xptr++);
 return 0;
} 
```

输出：

```
Addr:140734386077088,Val:140734386077088,ValR:17
Into Function
17  5   87  16  99  
65  74  58  36  6   
30  41  50  3   54  
40  63  65  43  4   

Out Function
Segmentation fault (core dumped) 
```

为什么直接寻址不起作用？我正在通过指针访问。我使用了双指针，但它不起作用。我也尝试使用单指针作为 xptr。但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:37:36.247

您遇到了分段错误，因为您正在迭代错误的指针（在最外层维度指针上）。该维度上只有 4 个有效块可以迭代（不是 20 个）。

在这里，`x`和`*x`（用于`%p`打印指针，而不是强制转换）是相同的值，因为它们都指向数组的开头（相同的地址），但指针运算不同（元素的大小不同）。您可以通过`x`可能需要将其转换为`int *`.

此外，您在`FunPrinter`- 将 2D 数组降级为 1D 数组中使用的方法不能保证有效，它确实涉及未定义的行为（尽管大多数合理的编译器都会很好地编译它）。

# ruby - 由于符号链接错误，无法在 Mac OSX 10.8.1 中安装 ruby -1.9.2

> ID：12578220
> 
> 赞同：3
> 
> 时间：2012-09-25T07:32:22.410
> 
> 标签：ruby, macos, gcc, installation, rvm

首先，我尝试了常见的 rvm 安装。

rvm 安装 1.9.2

但是，显示以下错误：

```
The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

然后我跑

```
rvm requirements 
```

并发现以下输出部分很有用

```
Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc. Instead they ship with llvm-gcc (to which gcc is a symlink) and clang, neither of which are supported for building Ruby. Xcode 4.1 was the last version to ship gcc, which was /usr/bin/gcc-4.2.

Xcode 4.1 and earlier:
- Ruby will build fine.

Xcode 4.2 and later (including Command Line Tools for Xcode):
- If you have gcc-4.2 (and friends) from an earlier Xcode version, Ruby will build fine.
- If you don't have gcc-4.2, you have two options to get it:
 * Install apple-gcc42 from Homebrew
 * Install osx-gcc-installer

Homebrew:
If you are using Homebrew, you can install the apple-gcc42 and required libraries from homebrew/dupes:
 brew update
 brew tap homebrew/dupes
 brew install autoconf automake apple-gcc42 
 rvm pkg install openssl

This can live side by side with an existing Xcode 4.2+ install or Command Line Tools for Xcode. 
```

所以我尝试了：

```
brew update
brew tap homebrew/dupes
brew install autoconf automake apple-gcc42 
```

但是，我收到以下错误

```
Warning: Could not link apple-gcc42\. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link apple-gcc42'
==> Summary
/usr/local/Cellar/apple-gcc42/4.2.1-5666.3: 104 files, 75M, built in 23 seconds
kanitw:shell.venturelab.com kanitw$ brew link apple-gcc42
Linking /usr/local/Cellar/apple-gcc42/4.2.1-5666.3... Warning: Could not link apple-gcc42\. Unlinking...
Error: Could not symlink file: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/include/gcc
/usr/local/include is not writable. You should change its permissions. 
```

我最好的解决方案是什么？我从某个地方记得我不应该将 sudo 与 brew 一起使用，因为我会搞砸整个安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T05:04:46.743

您可以更改 /usr/local 目录所有者

```
sudo chown -R `whoami` /usr/local 
```

但是，如果你安装了 mysql，你就可以修复它的所有者

```
sudo chown -R mysql:mysql /usr/local/mysql 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:23:31.140

您应该运行`brew doctor`然后相应地更改权限。可能还有其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:47:15.470

更改`/usr/local`目录的权限，然后重试。

# perl - 从用户输入获取数组

> ID：12578228
> 
> 赞同：1
> 
> 时间：2012-09-25T07:33:07.100
> 
> 标签：perl, parsing, eval

一个简短的问题：我想让我的脚本的用户可以输入任意数组，例如`"[1 .. 5]"`or `"[1, 2, 6, 9 .. 20]"`。目前，我只是`eval`给定的字符串（显然不是很安全！）并`perlcritic`给我一个 5 级警告。

我当前的代码：

```
my $arr = eval $patternData{"arr"};
unless ($arr) {
     # fixes <arr> values like "(1 .. 5)"
     $arr  = undef;
     @$arr = eval $patternData{"arr"};
} 
```

编辑：许多人都在问：这是一个“越多越好”的东西。我寻找一个既强大（就表现力而言）又简单（就调试、解析和编写输入而言）的解决方案。另外：它绝对必须支持范围（应轻松输入超过 100 个条目的数组）

而且 - 和往常一样 - 我忘了包括我的版本。5.8 是必须的，我正在使用需要 5.8 的 vSphere API（我`~~`非常想念！）

```
This is perl, v5.8.8 built for MSWin32-x86-multi-thread
(with 50 registered patches, see perl -V for more detail)

Copyright 1987-2006, Larry Wall

Binary build 820 [274739] provided by ActiveState http://www.ActiveState.com
Built Jan 23 2007 15:57:46 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:46:02.850

您与当前输入格式的关系如何？

一种解决方案可能是将格式“更改”为 JSON 并使用 JSON::XS 反序列化您的输入。`[1, 2, 3, 4]`仍然是有效的输入，但这不允许`[1, 2, 3, 4, 8 .. 10 ]`

在所有情况下，您当然需要验证输入数据是否具有正确的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:42:16.183

如果您的数组只允许数字，我会选择这种模式（易于解析）：

```
[1, 2, 3, 4] 
```

我进一步假设不会有嵌套数组，例如`[1, [2, 3]]`或尾随逗号`[1,]`。

然后我们只需剥离数组分隔符

```
my $line = <STDIN>;
$line =~ s/ ^\s*\[ | \]\s*$ //gx; 
```

并将数组拆分为 Perl 数组。我们可以通过`split`

```
my @array = split /,\s*/, $line; 
```

或通过提取所有数字

```
my @array = ($line =~ /(\d+)(?:,\s*|$)/g); 
```

该`split`解决方案还允许包含字符串，例如`[1, two, 3]`，而第二种解决方案更严格（因此可能更安全）。

在第二步中，您可以解析范围，例如通过

```
@array = map {
   ($_ =~ /^(-?[\d.]+)\s*\.\.\s*(-?[\d.]+)/)
   ? ($1 .. $2)
   : $_
} @array; 
```

如果您的数据结构变得更复杂（递归、引用），我强烈建议您使用[Regexp::Grammars](http://search.cpan.org/~dconway/Regexp-Grammars-1.021/lib/Regexp/Grammars.pm)编写解析器。这使您可以轻松解析递归结构以及几乎任何其他内容。

# javascript - 在 $.ajax 中调用类似于 $.get

> ID：12578237
> 
> 赞同：0
> 
> 时间：2012-09-25T07:33:37.230
> 
> 标签：javascript, ajax, jquery

我有以下代码：

```
$.get(url, {}, checkResponse) 
```

以及以下功能：

```
function checkResponse(content) {} 
```

这里的参数“content”是“get”的结果。我想实现`$.ajax`能够等待进程完成，然后再跳转到下一个代码块。我尝试了以下代码，但没有成功。

```
$.ajax({
    async: false,
    type: 'GET',
    url: url,
    success: function (data) {
        alert(data.toString());
        checkResponse(data);
    },
    error: function (data) {
        alert("error");
    }
}); 
```

这就是发生的事情，给出空字符串值的警报，`data.toString()`而它应该给我 url 页面内容，并且在它命中警报后它跳转到错误部分并显示警报“错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:56:59.447

根据评论部分的讨论，您正在尝试将跨域 AJAX 调用发送到 Internet 上的任意 url。由于浏览器内置的[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，这是不可能的。

可能的解决方法涉及使用[JSONP](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但由于您将向您无法控制的任意 url 发送请求，因此它们可能不是一个选项。在这种情况下，唯一*可行*的解​​决方案是让您编写一个服务器端脚本，该脚本将托管在您的域上，充当桥梁。该脚本将接收一个 url 作为参数并向该 url 发送一个 HTTP 请求以检索结果。然后它将简单地将结果返回给响应。最后，您将向您自己的服务器端脚本发送 AJAX 请求。

# c - 怎样把一个数改成能被8整除

> ID：12578239
> 
> 赞同：-5
> 
> 时间：2012-09-25T07:33:45.657
> 
> 标签：c, numbers

你能告诉我如何生成一个比可被 8 整除的输入数字更大的最小数字吗？（最好在 C 中）

有没有二的幂的一般解决方案？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:37:00.643

大于或等于输入且能被 8 整除的最小数：

```
return (input + 7) & ~7; 
```

大于输入且能被 8 整除的最小数：

```
return (input + 8) & ~7; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:35:41.007

尝试类似的东西

```
static inline int round_up_to_multiple_of_8 (int v)
{
   return (v|7)+1;
} 
```

这是有效的，因为 8 是 2 的幂，因此设置 3 个最低位会给出低于 8 的下一个倍数的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:37:12.787

r = x mod 8; x+r 是你的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:40:43.227

一般来说，你会这样做：

```
int roundUp(int input, int round)
{
    return input + round - (input % round);
} 
```

但是对于 8 的情况，其他解决方案通常会运行得更快。

# java - 无法更改 Base64 解码器中的密钥

> ID：12578244
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:34:10.117
> 
> 标签：java, encryption, cryptography, base64, des

我有一个预先编写的代码，用于加密给定的纯文本，反之亦然。

该类有 3 个方法，其中 2 个方法可分别用于加密和解密。

```
public class SqlCipherUtil {

    private Cipher ecipher;
    private Cipher dcipher;

    public String encryptString(String pStrPlainText) {

        try {
            generateKey();
            byte[] utf8 = pStrPlainText.getBytes("UTF8");
            byte[] enc = this.ecipher.doFinal(utf8);
            return new BASE64Encoder().encode(enc);

        } catch (Exception e) {
            e.printStackTrace();
        } 

        return null;
    }

    public String decryptString(String pStrCipherText){

        try {
            generateKey();
            byte[] dec = new BASE64Decoder().decodeBuffer(pStrCipherText);
            byte[] utf8 = this.dcipher.doFinal(dec);
            return new String(utf8, "UTF8");

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * This method is used to generate the encrypted key.
     */
    private void generateKey() {

        try {
            byte[] decodedStr = new BASE64Decoder().decodeBuffer("rA/LUdBA/hA=");
            SecretKey key = new SecretKeySpec(decodedStr, "DES");
            this.ecipher = Cipher.getInstance("DES");
            this.dcipher = Cipher.getInstance("DES");
            this.ecipher.init(1, key);
            this.dcipher.init(2, key);

        } catch (Exception e) {
            e.printStackTrace();
        } 
    }
} 
```

类中存在的键不能更改为 line 中的任何其他键`byte[] decodedStr = new BASE64Decoder().decodeBuffer("rA/LUdBA/hA=");`，并且它给出了异常。

```
java.security.InvalidKeyException: Invalid key length: 9 bytes
    at com.sun.crypto.provider.DESCipher.engineGetKeySize(DashoA13*..)
    at javax.crypto.Cipher.b(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..) 
```

我尝试了下面的代码，我在数组中得到了 8 个字节。

```
 public static void main(String[] args) throws IOException {
        byte[] decodedStr = new BASE64Decoder().decodeBuffer("rA/LUdBA/hA=");

        for(byte b : decodedStr){
            System.out.print(b);
            System.out.print(" ");
        }
    }

} 
```

键的任何其他组合将使字节数组大小大于 8 或小于 7。

获取字节数组大小 8 背后的概念是什么？

使用自定义组合键或我们自定义生成的键应该怎么做？

请回答这两个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:03:36.413

> 键的任何其他组合将使字节数组大小大于 8 或小于 7。

我不信。您可能添加或删除了错误的字符；或在错误的位置。见：[http ://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

是的，9 个字节不是 DES 的有效密钥长度。您可以简单地将其缩短到适当的长度。你确实得到了 9 个字节，因为你的 base64 字符串是 3x4 字符长，它将被解码为 3x3 = 9 个字符。修剪输出。

> 获取字节数组大小 8 背后的概念是什么？

DES 使用 56 位密钥。8 字节 = 64 位，因此有足够的位用于密钥。

> 使用自定义组合键或我们自定义生成的键应该怎么做？

让用户输入至少有 7 个字符（56 位）的密钥。我真的不明白你为什么在这个示例中使用 base64 - 可能只是因为你从某个地方复制了它？你只需要几个随机字节。获得这些的常用方法是从用户提供的任何输入构建散列并使用该散列中的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:23:50.950

如果您的目标是对字符串进行编码和解码，请使用`Base64`.

```
 public class PasswordCodecHandler {
        Base64 codec = null;

        public PasswordCodecHandler() {
            codec = new Base64();
        }

        public String encode(String password) {
            byte[] temp;
            String encodedPassword = null;
            temp = codec.encode(password.getBytes());
            encodedPassword = new String(temp);
            return encodedPassword;
        }

        public String decode(byte[] encodedPassword) {
            byte[] temp;
            String decodedPassword;
            temp = codec.decode(encodedPassword);
            decodedPassword = new String(temp);
            return decodedPassword;
        }

        public static void main(String[] args) {
            PasswordCodecHandler passwordCodecHandler = new PasswordCodecHandler();
            String s1 = passwordCodecHandler.encode("password");
            System.out.println(s1);

            String s2 = passwordCodecHandler.encode("admin");
            System.out.println(s2);

            String s3 = passwordCodecHandler.encode("administrator");
            System.out.println(s3);

            String s4 = passwordCodecHandler.encode("123456");
            System.out.println(s4);

        }
    } 
```

对于其他数据类型：可以`java.lang.OutOfMemoryError`根据您的内存分配大小

```
 /* Download apache common-io.xxx. jar*/

    public class CodecHandler {
        Base64 codec = null;

        public CodecHandler() {
            codec = new Base64();
        }

        public byte[] encode(byte[] decoded) {
            return codec.encode(decoded);
        }

        public byte[] decode(byte[] encoded) {
            return codec.decode(encoded);
        }

        public static void main(String[] args) throws IOException {
            File file = new File("D:/Test.mp4");
            byte[] fileByteArray = FileUtils.readFileToByteArray(file);
            CodecHandler codecHandler = new CodecHandler();
            byte[] encoded = codecHandler.encode(fileByteArray);
            System.out.println("Byte Size : " + encoded.length);
            byte[] decode = codecHandler.decode(encoded);
            FileUtils.writeByteArrayToFile(new File("C:/Test.mp4"), decode);

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T18:09:12.500

> 获取字节数组大小 8 背后的概念是什么？

您的新的基于 64 编码的密钥长度必须为 12 个字符，以一个且只有一个`=`字符结尾。

在 base-64 中，字符`=`是填充字符，它只能出现在编码字符串的末尾。Base-64 编码从每个 3 字节的输入块中输出一个 4 个字符的块。如果输入长度不是 3 的倍数，则填充最后一个块。

编码后的密钥“rA/LUdBA/hA=”中有12个字符，可以编码9个字节。但是最后一个字符是填充，这意味着最后一个字节应该被忽略，留下8个字节。

> 应该怎么做才能使用自定义组合键或我们自定义生成的键？

首先，您不应该使用 DES。它太虚弱和不安全。但总的来说，在 Java 中生成安全密钥的正确过程是使用[`KeyGenerator`](http://docs.oracle.com/javase/8/docs/api/javax/crypto/KeyGenerator.html)类。对于（不安全的）DES，您可以生成一个密钥并使用 base-64 对其进行编码，如下所示：

```
import java.util.Base64;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;

…

KeyGenerator gen = KeyGenerator.getInstance("DES");
gen.init(56);
SecretKey secret = gen.generateKey();
String b64 = Base64.getEncoder().encodeToString(secret.getEncoded());
System.out.println(b64); 
```

要使用密钥，请按如下方式对其进行解码：

```
import java.util.Base64;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeySpec;

…

SecretKey key = new SecretKeySpec(Base64.getDecoder().decode(b64), "DES"); 
```

# node.js - 在 node.js 中生成密码重置令牌

> ID：12578248
> 
> 赞同：10
> 
> 时间：2012-09-25T07:34:26.537
> 
> 标签：node.js, forgot-password

如何在 node.js 中生成可用于 url 的密码重置令牌？

我只需要生成令牌的方法：

```
user.reset_password_token = ???;
user.reset_password_expire = expire_date; 
```

编辑 - 这是解决方案：

```
user.reset_password_token = require('crypto').randomBytes(32).toString('hex'); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-25T10:15:53.830

我正在使用它来生成我的身份验证令牌：

```
require('crypto').randomBytes(32, function(ex, buf) {
    var token = buf.toString('hex');
}); 
```

[Crypto Node.js v0.8.9 手册和文档](http://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T06:22:38.340

```
function customToken() {
    var buffreValue = new Buffer(64);
    for (var i = 0; i < buffreValue.length; i++) {
        buffreValue[i] = Math.floor(Math.random() * 256);
    }
    var token = buffreValue.toString('base64');
    return token;
}
var getToken = customToken() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T04:35:03.523

在这种情况下，首先，您应该在**架构**上创建一个**实例方法**，因此，您的代码必须是这样的：

 **在编写此函数之前，您必须在架构中添加两个字段。

**1.passwordResetExpire**
**2.passwordResetToken**

**功能是：**

```
userSchema.methods.createPasswordResetToken = function () {
      const resetToken = crypto.randomBytes(32).toString('hex');
      this.passwordResetToken = crypto.createHash('sha256').update(resetToken).digest('hex');
      // Please note that you need to specify a time to expire this token. In this example is (10 min)
      this.passwordResetExpire = Date.now() + 10 * 60 * 1000;
      return resetToken;
    }; 
```**

# javascript - 在表格行中选中复选框时启用文本框

> ID：12578252
> 
> 赞同：0
> 
> 时间：2012-09-25T07:34:32.953
> 
> 标签：javascript, jquery

我`submit.cshtml`的是：

```
<table id="scDetails" class="table">
    <thead>
        <tr>
            <th>Item</th>
            <th>IsChecked</th>
            <th>Comment</th>
        </tr>
    </thead>
    <tbody>
        @Html.EditorFor(m => m.Fbacks)
    </tbody>
</table> 
```

EditorTemplate 用于 - `@Html.EditorFor(m => m.Fbacks)`(Fbacks.cshtml)

```
<tr>
  <td>@Html.HiddenFor(m => m.Item)
    @Html.DisplayFor(m => m.Item)
  </td>
  <td>@Html.CheckBoxFor(m => m.IsChecked)</td>
  <td>@Html.TextBoxFor(m => m.Comment)</td>
</tr> 
```

我需要的是：

当我选中复选框时，应该启用文本框，取消选中时，应该禁用文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:40:03.160

```
$("input[type='checkbox']").on("click", function() {
    $(this).parent().next().find("textarea").prop("disabled", ! this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:37:48.450

```
$('input[type=checkbox]').on('click', function() {
    var isChecked = $(this).is(':checked');

    $(this).parent().next().find('input[type="text"]').attr('disabled', !isChecked);
}); 

// OR

$('input[type=checkbox]').on('click', function() {
        var isChecked = $(this).is(':checked');

        $(this).parent().parent().find('input[type="text"]').attr('disabled', !isChecked);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:38:51.833

您应该将事件添加到复选框

```
$('#Fbacks').click (function ()
{
     var thisCheck = $(this);
     if (thischeck.is (':checked'))
     {
       $('#Comment').prop('disabled', true);
     }else{
       $('#Comment').prop('disabled', false);
     }
}); 
```

在这种情况下`@Html.EditorFor(m => m.Fbacks)` `id = 'Fbacks'`

# java - 无法使用 XSD 架构验证 XML

> ID：12578262
> 
> 赞同：1
> 
> 时间：2012-09-25T07:35:11.067
> 
> 标签：java, xml, xsd, sax

我是 XML 验证的新手。

我的 XSD 是

```
<xsd:complexType name="RootForm">
    <xsd:sequence>
        <xsd:element name="TRADE" type="RecordForm" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>

    <xsd:attribute name="ASOF_DATE" use="required">
        <xsd:simpleType>
            <xsd:restriction base="xsd:string">
                <xsd:pattern value="[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}"/>
            </xsd:restriction>
        </xsd:simpleType>
    </xsd:attribute>
    <xsd:attribute name="CREATE_DATE" use="required">
        <xsd:simpleType>
            <xsd:restriction base="xsd:string">
                <xsd:pattern value="[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}"/>
            </xsd:restriction>
        </xsd:simpleType>
    </xsd:attribute>
    <xsd:attribute name="RECORDS" type="xsd:integer" use="required"/>
</xsd:complexType> 
```

## 

我正在运行的代码是：

```
SAXParserFactory spf = SAXParserFactory.newInstance();
    spf.setNamespaceAware(true);
    spf.setValidating(true);
    InputSource i = new InputSource("X:/workspace/XMLValidation/src/xml/trades.xml");
    InputSource i1 = new InputSource("X:/workspace/XMLValidation/src/xml/transactions.xsd");
    SAXParser saxParser = spf.newSAXParser();
    saxParser.setProperty("http://java.sun.com/xml/jaxp/properties/schemaLanguage",  "http://www.w3.org/2001/XMLSchema");
    saxParser.setProperty("http://java.sun.com/xml/jaxp/properties/schemaSource", i1);
    XMLReader xmlReader = saxParser.getXMLReader();
   // xmlReader.setContentHandler(new SimpleErrorHandler());
    xmlReader.setErrorHandler(new SimpleErrorHandler());

    try {
        xmlReader.parse(i);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我得到以下异常：

```
src-resolve.4.2: Error resolving component 'RootForm'. It was detected that 'RootForm' is in namespace 'http://www.w3schools.com', but components from this namespace are not referenceable from schema document 'file:///X:/workspace/XMLValidation/src/xml/transactions.xsd'. If this is the incorrect namespace, perhaps the prefix of 'RootForm' needs to be changed. If this is the correct namespace, then an appropriate 'import' tag should be added to 'file:///X:/workspace/XMLValidation/src/xml/transactions.xsd'.
   Public ID: null
   System ID: file:///X:/workspace/XMLValidation/src/xml/transactions.xsd
   Line number: 6
   Column number: 52
   Message: src-resolve.4.2: Error resolving component 'RootForm'. It was detected that 'RootForm' is in namespace 'http://www.w3schools.com', but components from this namespace are not referenceable from schema document 'file:///X:/workspace/XMLValidation/src/xml/transactions.xsd'. If this is the incorrect namespace, perhaps the prefix of 'RootForm' needs to be changed. If this is the correct namespace, then an appropriate 'import' tag should be added to 'file:///X:/workspace/XMLValidation/src/xml/transactions.xsd'.
cvc-elt.1: Cannot find the declaration of element 'TRANSACTIONS'. 
```

谁能帮我在xsd文件中做错了什么

谢谢 Avnish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:06:34.453

这是我这边的正确答案，肯定会帮助您：

首先，您拥有的 xml 语法不正确，我已在此处更正：

```
<TRANSACTIONS xmlns="http://www.w3schools.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:noNamespaceSchemaLocation="./transactions.xsd" ASOF_DATE="6/10/2011"  CREATE_DATE="6/10/2011" RECORDS="1769"> 
<TRADE> 
<ACCRUAL_DT>
09/22/2012
</ACCRUAL_DT> 
<COUNTERPARTY_CODE>
US
</COUNTERPARTY_CODE> 
<CUSIP>
BRS87R7N9
</CUSIP> 
<DESC_INSTMT>
CFD COOKSON GROUP PLC
</DESC_INSTMT> 
<DESK/>
</TRADE> 
</TRANSACTIONS> 
```

现在简单地访问该站点：[http ://www.freeformatter.com/xsd-generator.html](http://www.freeformatter.com/xsd-generator.html)

输入上面提到的 XML，然后单击 Generate XSD Schema。因此，现在将生成架构，然后将其保存在本地磁盘中，然后运行下面的代码来检查和验证它​​！

```
package your_package name;
import java.io.File;
import java.io.IOException;
import javax.xml.XMLConstants;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;
import org.xml.sax.SAXException;

public class XMLValidator
{

public void validate() {
    File xmlFile = new File(Provide the xml file location (disk) in double quotes);
    File xsdFile = new File(Provide the xml file location (disk) in double quotes);
    boolean retStat = this.validateSchema(xmlFile, xsdFile);
    if(retStat){    
        System.out.println("Validated");
    }       
    else
        System.out.println("Not Valid");
}

private boolean validateSchema(File xml, File xsd){
    Schema schema = null;
    try{
        schema = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI).newSchema(xsd);
    }catch (SAXException e) {
        e.printStackTrace();
        return false;

    }catch(Exception fnEx){
        fnEx.printStackTrace();
        return false;
    }

    if(null != schema){
        Validator validator = schema.newValidator();

        try {
            validator.validate(new StreamSource(xml));
            return true;
        } catch (SAXException e) {
            return false;
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return false;
}

public static void main(String args[]){
    XMLValidator newObj=new XMLValidator();
    newObj.validate();
} 
```

}

并通过解决！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:11:44.223

应导入您正在使用的名称空间以区分 XML 中的元素。

这是重用 ComplexTypes 的 XSD：

```
<?xml version="1.0" encoding="utf-16"?>
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="TRANSACTIONS" type="RootForm" />
  <xsd:complexType name="RootForm">
    <xsd:sequence>
      <xsd:element name="TRADE" type="RecordForm" />
    </xsd:sequence>
    <xsd:attribute name="xsi:noNamespaceSchemaLocation" type="xsd:string" />
    <xsd:attribute name="ASOF_DATE" type="xsd:dateTime" />
    <xsd:attribute name="CREATE_DATE" type="xsd:dateTime" />
    <xsd:attribute name="RECORDS" type="xsd:int" />
  </xsd:complexType>
  <xsd:complexType name="RecordForm">
    <xsd:sequence>
      <xsd:element name="ACCRUAL_DT" type="xsd:dateTime" />
      <xsd:element name="COUNTERPARTY_CODE" type="xsd:string" />
      <xsd:element name="CUSIP" type="xsd:string" />
      <xsd:element name="DESC_INSTMT" type="xsd:string" />
      <xsd:element name="DESK" type="xsd:string" />
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:44:16.347

您能否分享您正在解析的 XML 文件？Trade 元素采用的“RecordForm”类型也未在模式中定义。尝试包括它并查看。应导入您正在使用的名称空间以区分 XML 中的元素。

# c# - 使用 c#.net 中的 Web 浏览器控件加载 pdf 文件中选定文本的自动副本

> ID：12578267
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:35:58.807
> 
> 标签：c#, asp.net

这就是我所做的：

1.  我在网络浏览器中加载了一个pdf文件，
2.  现在我想从该文件中选择文本并粘贴到文本框中。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:18:41.517

我很确定这将是非常困难的，如果不是不可能的话。

浏览器不会“运行”PDF，它充当 PDF 应用程序的主机，最终共享它的主窗口。之后，光标等的控制权传递给 PDF 应用程序，浏览器实际上不再知道其中发生了什么。如果正在使用的 PDF 应用程序公开了用于操作光标/文本选择的 COM 接口（值得怀疑），那么*可以*从客户端脚本针对这些接口编写脚本 - 但您将无法在该窗口中实际*运行*任何脚本，因为浏览器显示的是 PDF，而不是网页。

如果您将 Web 控件托管在 Windows 窗体应用程序上，这可能是可能的，但即便如此，我什至不知道从哪里开始。

如果您的目标是从 PDF 中提取文本，那么您最好通过 .Net PDF 库来推送它。一个快速的谷歌搜索会为您提供一些合适的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:57:51.967

如果您的 pdf 文件具有表单元素，则可以将文件提交到 url。检查此链接..它可能会有所帮助。 [PDF 可填写表单可以将自身发布到 HTTPS URL 吗？](https://stackoverflow.com/questions/4631008/can-a-pdf-fillable-form-post-itself-to-an-https-url)

# regex - 我想优化使用 IN 子句和 regex_str 函数的存储过程。我不确定我应该如何优化它？

> ID：12578269
> 
> 赞同：3
> 
> 时间：2012-09-25T07:36:04.970
> 
> 标签：regex, performance, oracle, plsql, query-optimization

我得到的响应时间约为 200 毫秒。我想进一步优化它。我怎样才能做到这一点？

```
CREATE OR REPLACE
PROCEDURE GETSTORES
(
LISTOFOFFERIDS IN VARCHAR2,
REF_OFFERS OUT TYPES.OFFER_RECORD_CURSOR
)
AS
BEGIN
  OPEN REF_OFFERS FOR
  SELECT
  /*+ PARALLEL(STORES 5) PARALLEL(MERCHANTOFFERS 5)*/
  MOFF.OFFERID,
  s.STOREID,
  S.LAT,
  s.LNG
  FROM
  MERCHANTOFFERS MOFF
  INNER JOIN STORES s ON MOFF.STOREID =S.STOREID
  WHERE
  MOFF.OFFERID IN
  (
    SELECT
      REGEXP_SUBSTR(LISTOFOFFERIDS,'[^,]+', 1, LEVEL)
    FROM
      DUAL CONNECT BY REGEXP_SUBSTR(LISTOFOFFERIDS, '[^,]+', 1, LEVEL) IS NOT NULL
  )
  ;
END
GETSTORES; 
```

我正在使用 regex_substr 从 LISTOFOFFERIDS 中的逗号分隔字符串中获取 OfferID 列表。我已经在 Stores 表的 STOREID 上创建了索引，但无济于事。如果速度更快，实现相同目标的新方法也很好。

相同的类型声明：

```
create or replace

    PACKAGE TYPES
    AS
    TYPE OFFER_RECORD
    IS
      RECORD(
      OFFER_ID MERCHANTOFFERS.OFFERID%TYPE,
      STORE_ID STORES.STOREID%TYPE,
      LAT STORES.LAT%TYPE,
      LNG STORES.LNG%TYPE
      );
    TYPE OFFER_RECORD_CURSOR
    IS
      REF
      CURSOR
        RETURN OFFER_RECORD;
      END
      TYPES; 
```

选择计划显示以下信息：

```
Plan hash value: 1501040938

-------------------------------------------------------------------------------------------------------------
| Id  | Operation                                  | Name           | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                           |                |   276 | 67620 |    17  (12)| 00:00:01 |
|*  1 |  HASH JOIN                                 |                |   276 | 67620 |    17  (12)| 00:00:01 |
|   2 |   NESTED LOOPS                             |                |       |       |            |          |
|   3 |    NESTED LOOPS                            |                |   276 | 61272 |     3  (34)| 00:00:01 |
|   4 |     VIEW                                   | VW_NSO_1       |     1 |   202 |     3  (34)| 00:00:01 |
|   5 |      HASH UNIQUE                           |                |     1 |       |     3  (34)| 00:00:01 |
|*  6 |       CONNECT BY WITHOUT FILTERING (UNIQUE)|                |       |       |            |          |
|   7 |        FAST DUAL                           |                |     1 |       |     2   (0)| 00:00:01 |
|*  8 |     INDEX RANGE SCAN                       | OFFERID_INDEX  |   276 |       |     0   (0)| 00:00:01 |
|   9 |    TABLE ACCESS BY INDEX ROWID             | MERCHANTOFFERS |   276 |  5520 |     0   (0)| 00:00:01 |
|  10 |   TABLE ACCESS FULL                        | STORES         |  9947 |   223K|    13   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - access("MERCHANTOFFERS"."STOREID"="STORES"."STOREID")
   6 - filter( REGEXP_SUBSTR ('M1-Off2,M2-Off5,M2-Off9,M5-Off4,M10-Off1,M1-Off3,M2-Off4,M3-Off2,M4-Of
              f6,M5-Off1,M6-Off1,M8-Off1,M7-Off3,M1-Off1,M2-Off1,M3-Off1,M3-Off4,M3-Off5,M3-Off6,M4-Off1,M4-Off7,M2
              -Off2,M3-Off3,M5-Off2,M7-Off1,M7-Off2,M1-Off7,M2-Off3,M3-Off7,M5-Off5,M4-Off2,M4-Off3,M4-Off5,M8-Off2
              ,M6-Off2,M1-Off5,M1-Off6,M1-Off9,M1-Off8,M2-Off6,M2-Off7,M4-Off4,M9-Off1,M6-Off4,M1-Off4,M1-Off10,M2-
              Off8,M3-Off8,M6-Off3,M5-Off3','[^,]+',1,LEVEL) IS NOT NULL)
   8 - access("MERCHANTOFFERS"."OFFERID"="$kkqu_col_1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:18:46.640

1.  如果您的服务器支持它（似乎您想要它），请将提示更改为`/*+ PARALLEL(S 8) PARALLEL(MOFF 8)*/`. 当您有别名时，您必须在提示中使用别名。
2.  您应该尝试 APC( `STORES(STOREID, LAT, LNG)`)建议的复合索引
3.  请回答问题：对于所提供的示例，您获得了多少不同的商店 ( `select count(distinct storeid) from (your_query)`) 以及 STORES 表中有多少家商店？( `Select count(*) from Stores`)?
4.  你用 分析过表格`dbms_stats.gather_table_stats`吗？
5.  我相信`connect by`查询不是问题。它在 0.02 秒内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:29:56.230

如果你看你解释计划，每个步骤的时间是相同的：没有明显的候选人可以专注于调整。

您发布的示例有 50 个 OFFERID 令牌。那是代表吗？他们映射到 276 家商店——这是一个代表性的比例吗？是否有任何优惠针对多个商店？

276 行约占行数的 2.7%，这是一个很小的 ​​sliver：但是，由于 STORES 似乎是一个非常紧凑的表，因此索引读取是否比全表扫描快是微不足道的。

要从数据库中榨取更多汁液，唯一显而易见的事情就是在 STORES(STOREID, LAT, LNG) 上建立一个复合索引；大概它不是一个看到很多 DML 的表，因此额外索引的开销不会太多。

最后一点：您的查询在 0.2 秒内执行。那么你希望它快多少呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:07:56.903

考虑在连接中删除正则表达式，以便连接可以快速发生。
如果连接列上有索引，则连接可能会从嵌套循环移动到某种散列连接。

一旦你有了那个结果集（希望行更少），然后用你的正则表达式过滤它。

您可能会发现 WITH 语句在这个场景中很有帮助。

事情就这样。（未经测试的例子）

```
WITH
base AS
(
    SELECT /*+ PARALLEL(STORES 5) PARALLEL(MERCHANTOFFERS 5) */
           moff.OFFERID,
              s.STOREID,
              s.LAT,
              s.LNG
    FROM MERCHANTOFFERS moff
    INNER JOIN STORES s 
    ON MOFF.STOREID = S.STOREID
),
offers AS
(
    SELECT REGEXP_SUBSTR(LISTOFOFFERIDS,'[^,]+', 1, LEVEL) offerid
    FROM DUAL 
    CONNECT BY REGEXP_SUBSTR(LISTOFOFFERIDS, '[^,]+', 1, LEVEL) IS NOT NULL
)
SELECT base.*
FROM base,
     offers
WHERE base.offerid = offers.offerid 
```

Oracle 可以将这两个视图执行到内存表中，然后连接。

没有担保人。您的里程可能会有所不同。你在寻找想法。这是一个想法。祝你好运。

如果我正确地记得提示章节，当您为表名命名时，您需要在提示中使用该别名。/*+ PARALLEL(s 5) PARALLEL(moff 5) */

我很好奇您为什么决定将值 5 作为提示。我的印象是甲骨文会根据系统负载和其他神秘情况为其选择最佳价值。

# linux - 充当代理的 IO Server

> ID：12578271
> 
> 赞同：0
> 
> 时间：2012-09-25T07:36:11.657
> 
> 标签：linux, linux-kernel, embedded-linux

您好我需要构建一个像代理一样的 IO 服务器。

Web 服务器与服务器（代理）对话以发出请求，例如可以控制哪些设备。例如。嵌入式系统.. 通过 rs232 或 USB 和以太网连接到服务器。

例如，网络服务器与设备 A 对话并要求执行 X。

服务器（代理）也与设备对话。当设备启动时，它会将自己注册到代理。我是设备 b，我的名字是 k，我准备好接受命令了。

我正在使用 debian linux，我需要知道如何才能使用它。

这需要创建内核设备吗？

非常感谢。

**编辑：我刚刚在**[http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)阅读了有关守护程序编程的信息。我在这里复制并粘贴了代码。

我写下了我将更改代码的哪一部分的评论。

```
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <unistd.h>
#include <syslog.h>
#include <string.h>

int main(void) { // change this to "int main(int argc,char *argv[])"

        /* Our process ID and Session ID */
        pid_t pid, sid;

        /* Fork off the parent process */
        pid = fork();
        if (pid < 0) {
                exit(EXIT_FAILURE);
        }
        /* If we got a good PID, then
           we can exit the parent process. */
        if (pid > 0) {
                exit(EXIT_SUCCESS);
        }

        /* Change the file mode mask */
        umask(0);

        /* Open any logs here */        

        /* Create a new SID for the child process */
        sid = setsid();
        if (sid < 0) {
                /* Log the failure */
                exit(EXIT_FAILURE);
        }

        /* Change the current working directory */
        if ((chdir("/")) < 0) {
                /* Log the failure */
                exit(EXIT_FAILURE);
        }

        /* Close out the standard file descriptors */
        close(STDIN_FILENO);
        close(STDOUT_FILENO);
        close(STDERR_FILENO);

        /* Daemon-specific initialization goes here */

        /* The Big Loop */
        while (1) {
           /* Do some task here ... */  // Device detect here. eg(/dev/ttyS0-usb-serial)

           sleep(30); /* wait 30 seconds */  // Instead of using 30 seconds here I plan on removing it and changing it with events like wake up when new device is plugged.
        }
   exit(EXIT_SUCCESS);
} 
```

这段代码

```
int main(void) 
```

改成这个

```
int main(int argc,char *argv[]) 
```

所以我可以从 debian 的命令行发送命令。

我将在 while 循环中添加这段代码 - 大循环

```
if(strcmp(argv[1], "status")==0){

    //check status of devices here  

    } 

if(new Device plugged){ // not real code. just to get the idea.
// register the device type and name.
} 
```

然后在 php.ini 中使用 shell_exec()。

```
<?php $output = shell_exec('daemon status'); echo "$output"; die; 
```

php 中的示例输出将是这样的：

```
Device Name |  Status

/dev/ttyS0  =  online
/dev/sample =  offline 
```

我想的可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:55:45.337

RS232、USB 和以太网连接的设备通常不需要新的驱动程序。

您只需要创建一个与设备对话的守护程序和一个在 Web 服务器上执行的 cgi，它通过 IPC 与守护程序对话并交换命令和结果。您可以尝试使用更简单的设备，即从 cgi 读取设备，但在这种情况下，您可能会面临高延迟并且不会对设备输入做出反应的风险。

话虽如此，问题的表述过于笼统，无法给出更多建议。这些设备有什么作用？您想使用哪些语言？

# c# - 如何将 ValueCollection 转换为 Dictionary？

> ID：12578272
> 
> 赞同：0
> 
> 时间：2012-09-25T07:36:12.390
> 
> 标签：c#, .net, dictionary

我有一个 type 的字典成员`Dictionary<string, Dictionary<string, List<SomeType>>>`。我想要的是从中获取嵌套字典 ie `Dictionary<string, List<SomeType>>`。我以为我会得到这个 using `myDict.Values`，但这实际上是返回`ValueCollection`而不是嵌套字典本身。

现在我正在尝试使用 ValueCollection.ToDictionary 函数来完成这项工作，但如果您已经做过类似的事情，请分享。

**更新** 我想返回嵌套字典

```
Dictionary<string, List<SomeType>> GetKeyPairValues()
{
  // get nested dictionary from this.myDict
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:38:23.470

> 我想要的是获得嵌套字典

```
return myDict.Values.ToDictionary(x => x.Keys, x => x.Values); 
```

根据您的评论，并查看 LINQ 表达式对此的复杂程度，为什么不直接使用基本的 for 循环，例如

```
Dictionary<string, List<SomeType>> GetKeyPairValues()
{
    foreach (var pair in dict)
    { 
        yield return pair.Value;
    }
} 
```

它也可能比使用 LINQ 更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:49:30.493

您需要使用`GroupBy`分组，`Key`然后将所有列表与相同的键合并：

```
 Dictionary<string, List<SomeType>> GetKeyPairValues()
 {
      return dic.Values.SelectMany(d => d)
                       .GroupBy(p => p.Key)
                       .ToDictionary(g => g.Key, 
                                     g => g.SelectMany(pair => pair.Value)
                                           .ToList());
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:40:50.730

试试这个：

```
var dictionary = new Dictionary<string, Dictionary<string, List<int>>>();//initialize your source dictionary
var mergedDictionary = dictionary.SelectMany(d => d.Value).ToDictionary(k=>k.Key, k=>k.Value); 
```

更新：使用 ToDictionary

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:40:29.650

实际上`Dictionary<>`实现了多个`Values`属性。如果你通过它使用它，`IDictionary<>`你会得到一个`ICollection<TValue>`

```
IDictionary<string, Dictionary<string, List<SomeType>>> dict = new Dictionary<string, Dictionary<string, List<SomeType>>>();
ICollection<Dictionary<string, List<SomeType>>> = dict.Values; 
```

# ios - IOS 动画不适用于我的动画块

> ID：12578275
> 
> 赞同：3
> 
> 时间：2012-09-25T07:36:32.537
> 
> 标签：ios

我试图让一个红色方块从视图顶部移动到视图底部的随机位置，然后在随机位置再次返回顶部。该应用程序从以下代码开始进入[super viewLoad]：

```
[redSquare setCenter:CGPointMake(25,25)]; 
```

（红色方块视图设置为 50 x 50，这将在左上角以红色方块启动应用程序）。

动画的第一部分效果很好 - 红色方块动画到页面底部的随机位置。但是，它会在没有动画的情况下跳到顶部的随机位置。请帮助我做错了什么或任何其他解决方案来帮助这个简单的动画。

```
 -(void)moving{

    [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
   int randomx = arc4random() % 295;
   [redSquare setCenter:CGPointMake(randomx,435)];

    } completion:^(BOOL finished) {

   [redSquare setCenter:CGPointMake(redSquare.frame.origin.x,25)];
   }];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:45:19.717

您的完成块只是设置新位置。您没有将其动画化回顶部：

试试这个，而不是

```
-(void)moving {

    [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
        int randomx = arc4random() % 295;
        [redSquare setCenter:CGPointMake(randomx,435)];
    } completion:^(BOOL finished) {
        [UIViewAnimateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
        [redSquare setCenter:CGPointMake(redSquare.frame.origin.x,25)];
        } completion: NULL
    }];

} 
```

**编辑添加**

确实，子级别会让人感到困惑，但是如果您将块与方法分开定义，则可以使生活变得简单并减少缩进。

例如，您可以将上面的内容重写为：

```
-(void)moving {

    workBlk_t animationBlock = ^ {
        int randomx = arc4random() % 295;
        [redSquare setCenter:CGPointMake(randomx,435)];
    };

    void (^completionBlock)(BOOL finished) = ^{
        [UIViewAnimateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
            [redSquare setCenter:CGPointMake(redSquare.frame.origin.x,25)];
        } completion : NULL
    };

    [UIView animateWithDuration:1.0 
                          delay:0.0 
                        options:UIViewAnimationCurveEaseIn 
                     animations:animationBlock 
                     completion:completionBlock
    }];

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T07:42:48.677

您应该在完成块中启动新动画，例如：

```
 completion:^(BOOL finished) {
          [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn      animations:^{
          int randomx = arc4random() % 295;
          [redSquare setCenter:CGPointMake(randomx,25)];

    } completion:^(BOOL finished) {

   }];
   }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:44:12.497

这部分完全符合您的描述：

```
completion:^(BOOL finished) {
   [redSquare setCenter:CGPointMake(redSquare.frame.origin.x,25)];
} 
```

即动画完成***后将***对象返回到屏幕顶部。这不会是动画的，它会在动画完成后发生，因此它是即时的。

动画完成后需要触发新的动画。

然而，创建多个嵌套动画块可能会变得有点混乱，最干净的方法是创建另一个动画方法，并在第一个动画完成时调用它，如下所示：

```
-(void) moveDown{
   [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
       int randomx = arc4random() % 295;
       [redSquare setCenter:CGPointMake(randomx,435)];

   } completion:^(BOOL finished) {
       // First animation completed
       [self moveBack];
   }];
}

-(void) moveBack{
   [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
       [redSquare setCenter:CGPointMake(redSquare.frame.origin.x,25)];
   } completion:^(BOOL finished) {
       // Second animation completed
   }];
} 
```

# ssrs-2008 - 即使过滤器返回 0 行，也显示列组中的所有列

> ID：12578280
> 
> 赞同：0
> 
> 时间：2012-09-25T07:36:53.517
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

假设我有一个格式如下的表格

```
Empmanager   Billable status(Billable, non billable, partial)   month
ali           billable                                            aug
ali           billable                                            aug
sana          non billable                                        aug 
```

假设我需要一个明智和每月明智的报告经理，以防我需要在 sana 作为 emp 经理和可计费状态的报告过滤我得到这样的报告

```
empmanager 
sana 
```

如果我需要一份在 ali 上过滤为 emp 经理和 billable 作为计费状态的报告，我会得到这样的报告

```
empmanager  billablestatus
ali          2 
```

在 sana 的情况下，不显示列计费状态，因为没有 sana 的计费员工数据。

**我需要生成报告，即使返回的数据没有任何内容，也会显示列组内的列。** 我希望我说清楚了.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:31:31.370

有两种方法可以做到这一点。
1) 将有另一个表存储您的员工及其状态。使用外部联接到您显示的经理和此表。并在查询中从主表中选择 Manager 名称。

2）这个有点像偷工减料。除了将它放在列名下，您还可以使用组标题来显示您传递的参数。

# arrays - 将大（ish）字节数组传递给 WCF 服务失败，所有最大属性都已最大化

> ID：12578291
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:37:30.813
> 
> 标签：arrays, wcf

我在 WCF 服务中调用一个方法并传递一个 DTO，该 DTO 具有包含文件内容的 byte[] 类型的属性。这可以正常工作，直到文件达到大约 3 MB，此时它会失败。我能找到的所有信息都在谈论将配置属性设置为更大的值，但我已经将所有内容都最大化了。这是来自我的 web ste 配置文件：

```
<bindings>
  <wsHttpBinding>
    <binding name="dxWsBinding" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None"  >
        <transport clientCredentialType="None" />
        <message establishSecurityContext="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<behaviors>
  <endpointBehaviors>
    <behavior name="UserContextClientBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <UserContextBehaviorExtension />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

这是来自我的网络服务配置文件：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="DefaultBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
    </behavior>
    <behavior name="ErrorLoggerBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <ErrorLogger logName="DXWcfErrorLog" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <wsHttpBinding>
    <binding name="dxWsBinding" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None"  >
        <transport clientCredentialType="None" />
        <message establishSecurityContext="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

请注意，我无意在生产中使用这些最大值，但我正在尽一切努力让它发挥作用。

当请求失败时，我的 Web 服务中看不到任何内容。我在两个配置文件中都试过这个：

```
<system.diagnostics>
  <trace autoflush="true">
    <listeners>
    </listeners>
  </trace>
  <sources>
    <source name="System.ServiceModel"
            switchValue="Information, ActivityTracing"
            propagateActivity="true">
      <listeners>
        <add name="sdt"
             type="System.Diagnostics.XmlWriterTraceListener"
             initializeData= "WcfDetailTrace.svclog" />
      </listeners>
    </source>
  </sources>
</system.diagnostics> 
```

但是当我打开 Web 服务日志文件时，根本没有请求失败的迹象。网站日志文件向我展示了我已经知道的内容。这是我在客户端（即网站）获得的信息：

```
2012-09-25 12:26:46,273 错误发生意外异常
System.ServiceModel.CommunicationException：接收对 http://localhost:52114/DocumentService.svc 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。---> System.Net.WebException：底层连接已关闭：接收时发生意外错误。---> System.IO.IOException: Unable to read data from the transport connection: 一个现有的连接被远程主机强行关闭。---> System.Net.Sockets.SocketException: 现有连接被远程主机强行关闭
在 System.Net.Sockets.Socket.Receive(Byte[] 缓冲区，Int32 偏移量，Int32 大小，SocketFlags socketFlags)
在 System.Net.Sockets.NetworkStream.Read（字节 [] 缓冲区，Int32 偏移量，Int32 大小）
--- 内部异常堆栈跟踪结束 ---
在 System.Net.Sockets.NetworkStream.Read（字节 [] 缓冲区，Int32 偏移量，Int32 大小）
在 System.Net.PooledStream.Read（字节 [] 缓冲区，Int32 偏移量，Int32 大小）
在 System.Net.Connection.SyncRead（HttpWebRequest 请求，布尔 userRetrievedStream，布尔 probeRead）
--- 内部异常堆栈跟踪结束 ---
在 System.Net.HttpWebRequest.GetResponse()
在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）
--- 内部异常堆栈跟踪结束 ---

服务器堆栈跟踪：
在 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException（WebException webException，HttpWebRequest 请求，HttpAbortReason abortReason）
在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）
在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时）
在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan 超时）
在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）
在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime 操作)
在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

在 [0] 处重新抛出异常：
在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage（IMessage reqMsg，IMessage retMsg）
在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（MessageData& msgData，Int32 类型）
在 SI.Doh.Aon.Service.Interface.IServiceBase`1.AddEntity(TDto dto)
在 SI.Doh.Aon.Web.Controllers.DocumentUploaderController.Upload(DocumentEditModel model, HttpPostedFileBase FileName) 在 C:\SVN Source\Department_Of_Health\Area_Of_Need\src\SI.Doh.Aon.Web\Controllers\DocumentUploaderController.cs:line 142
在 lambda_method（闭包，ControllerBase，对象 []）
在 System.Web.Mvc.ActionMethodDispatcher.Execute（ControllerBase 控制器，Object[] 参数）
在 System.Web.Mvc.ReflectedActionDescriptor.Execute（ControllerContext 控制器上下文，IDictionary`2 参数）
在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod（ControllerContext 控制器上下文，ActionDescriptor actionDescriptor，IDictionary`2 参数）
在 System.Web.Mvc.ControllerActionInvoker.c__DisplayClass15。
  b__12()
  在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter（IActionFilter 过滤器，ActionExecutingContext preContext，Func`1 延续）
  在 System.Web.Mvc.ControllerActionInvoker.c__DisplayClass15.c__DisplayClass17。
    b__14()
    在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters（ControllerContext 控制器上下文，IList`1 过滤器，ActionDescriptor actionDescriptor，IDictionary`2 参数）
    在 System.Web.Mvc.ControllerActionInvoker.InvokeAction（ControllerContext 控制器上下文，字符串 actionName）
    在 System.Web.Mvc.Controller.ExecuteCore()
    在 System.Web.Mvc.ControllerBase.Execute（RequestContext requestContext）
    在 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute（RequestContext requestContext）
    在 System.Web.Mvc.MvcHandler.c__DisplayClass6.c__DisplayClassb。
      b__5()
      在 System.Web.Mvc.Async.AsyncResultWrapper.c__DisplayClass1。
        b__0()
        在 System.Web.Mvc.Async.AsyncResultWrapper.c__DisplayClass8`1。
          b__7(IAsyncResult _)
          在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
          在 System.Web.Mvc.MvcHandler.c__DisplayClasse。
            b__d()
            在 System.Web.Mvc.SecurityUtil.b__0（操作 f）
   在 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust（操作动作）
   在 System.Web.Mvc.MvcHandler.EndProcessRequest（IAsyncResult asyncResult）
   在 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest（IAsyncResult 结果）
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，Boolean& completedSynchronously）

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:38:25.987

httpRuntime 属性中还有一个 maxRequestLength。

```
<system.web>
    <httpRuntime maxRequestLength="2097151" />
</system.web> 
```

# .net - 如果我们不使用 CLS，会出现什么问题？

> ID：12578293
> 
> 赞同：0
> 
> 时间：2012-09-25T07:37:35.277
> 
> 标签：.net, cls-compliant

我正在编写一个框架，我们希望它可以从 C#、C++、VB 中获得。目前我们对任何其他语言都没有限制。但是我们在使用 CLS 时遇到了一些问题（我们必须使用 unsign 等）。如果我们在这里不使用 CLS，你能给出一些实际出现的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:46:38.233

嗯，有很多关于[CLS 合规性](http://msdn.microsoft.com/en-us/library/12a7a7h3.aspx)的规则，而不仅仅是关于有符号/无符号类型的规则。您必须遵循或已经遇到问题的一个简单方法是：

> 要使两个标识符被认为是不同的，它们的区别必须不仅仅在于它们的大小写。

对于 C# 或 C++，您不需要它，但 Visual Basic 要求它是这样的。您还使用了“目前任何其他语言”一词。如果将来该列表有可能扩大，那么如果您现在强迫自己走 CLS 合规之路，您将为自己节省很多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:01:10.257

通常认为将程序集标记为 的良好做法，然后在不符合 CLS 的类型和成员上`CLSCompliant`使用该属性。`CLSCompliant(false)`

当然，如果程序集中的大多数类型不符合 CLS，则将程序集标记为不符合可能更有意义。

将其他语言问题最小化的一种方法是仅用 标记单个成员`CLSCompliant(false)`，并为每个此类成员提供符合 CLS 的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:55:27.820

CLS 定义了在任何符合 CLS 的语言中可用的功能子集。一些奇异的特性，如无符号原始类型，被排除在外，以使语言更容易满足 CLS。

只要您要使用的语言支持您要使用的数据类型，代码就不需要真正符合 CLS。如果您希望能够将代码标记为符合 CLS，则根本不能使用不受支持的类型。

在某些情况下，您可以使用更大的数据类型来处理无符号值，例如使用 an`Int64`来保存 an`UInt32`可以保存的任何值。

# mysql - 如何将 sum(field_name) 存储在 MySql Select 语句中的变量中？

> ID：12578298
> 
> 赞同：1
> 
> 时间：2012-09-25T07:38:05.513
> 
> 标签：mysql, variables, select

我正在尝试将特定字段的总和存储`@data := sum(field_name)`在 MySQL Select 语句中的变量中。

下面是我的查询的一个确切示例：

```
SELECT a.id, @data1:=sum(b.amount) amount, @data1 as returned_val
FROM tbl_table1 a 
LEFT JOIN tbl_table2 b ON b.acount_id=a.id
GROUP BY a.id 
```

请注意，我将 存储`sum(b.amount)`到一个变量`@data1`并尝试将其显示在另一行中，但从未像我期望的那样工作。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:52:50.123

不要在带有 GROUP BY 子句的 SELECT 语句中使用变量。

从文档中：

> 注意：在 SELECT 语句中，每个表达式仅在发送到客户端时才被计算。这意味着在 HAVING、GROUP BY 或 ORDER BY 子句中，您不能引用包含在 SELECT 列表中设置的变量的表达式。

使用子查询来实现这一点 -

```
SELECT t.id, @data1:=t.amount, @data1 AS returned_val FROM (
    SELECT a.id, SUM(b.amount) amount
    FROM tbl_table1 a 
    LEFT JOIN tbl_table2 b ON b.acount_id=a.id
    GROUP BY a.id
  ) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:47:01.300

您需要先声明变量。

```
SET @data1=0;

SELECT a.id, (@data1:=sum(b.amount)) as amount, @data1 as returned_val
FROM tbl_table1 a 
LEFT JOIN tbl_table2 b ON b.acount_id=a.id 
```

但是为什么需要 ，`returned_val`因为它的值与`amount`.

# java - IOException：网络适配器无法建立连接

> ID：12578299
> 
> 赞同：6
> 
> 时间：2012-09-25T07:38:14.887
> 
> 标签：java, oracle, jdbc

我们的生产环境开始时不时出现这个“网络适配器无法建立连接”的问题，我做了很多谷歌，在这里遇到了一些问题，但仍然没有得到解决方案。

以下是有关我们环境的一些信息：

1.  我们将 RAC 与 2 个 oracle 实例（版本 10.2.0.4）一起使用。
2.  我们有几个在 RAC 上运行的应用服务器 (JBoss AS5)。
3.  oracle-ds.xml 中的连接 url 是 "jdbc:oracle:thin:@(DESCRIPTION =(ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = db1_vip)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP )(HOST=db2_vip)(PORT = 1521))(LOAD_BALANCE = yes))(CONNECT_DATA=(SERVER = DEDICATED)(SERVICE_NAME = G1db)(FAILOVER_MODE =(TYPE =SELECT)(METHOD = BASIC)(RETRIES = 120)(延迟 = 5))))"
4.  我们将 db1_vip/db2_vip 以及 2 个 oracle 实例的实际 ip 添加到两个应用服务器的 /etc/hosts
5.  oracle实例和应用服务器之间有防火墙，但是我们在两个oracle实例上都打开了1521端口。

我们已经运行以下测试来检查网络或 Oracle TNS 监听器是否有任何问题：

1.  从应用服务器运行 ping 到两个 oracle 实例，一切正常，没有任何数据包丢失。
2.  从应用服务器远程登录 1521 端口到两个 oracle 实例，没有错。
3.  tnsping 也可以正常工作。
4.  我们检查了监听器日志，但没有发现任何有价值的东西。

最奇怪的是，这个错误在一个应用服务器上每小时发生大约 10 次，但在另一个应用服务器上每天只发生 1 或 2 次。

任何人都可以阐明这个错误吗？

谢谢

**[EDIT4]：我们在tnsping一个oracle实例时发现超时问题，所以我们将jdbc url更改为只连接一个实例，发现IOException再也没有发生过，所以我们认为问题与数据库有关，DBA团队将继续调查这个。**

[EDIT3]：我们做了以下尝试：

1.  禁用应用服务器和数据库服务器之间的防火墙
2.  使用 ip 而不是主机名
3.  使用wireshark检查是否有任何tcp数据包问题。

都没有成功，求大神帮忙~

[编辑]：错误堆栈跟踪：

```
java.sql.SQLException: Io Exception: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:207)
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:02:39.920

错误

> java.sql.SQLException：Io 异常：网络适配器无法建立连接

无关`Java/JDBC`。这是您在网络设置出现问题时遇到的错误。我的猜测，防火墙问题。您可以禁用它并查看错误是否仍然存在？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-10T14:11:59.627

编辑连接并测试它，虽然你的 tnsping 找到了！，如果使用 virtualbox（在适配器中检查全部允许），在我的情况下，错误是当我使用 ip，而不是使用 localhost

# javascript - 复选框和一个输入给出了太多的 if 和 else 语句，如何减少？

> ID：12578303
> 
> 赞同：0
> 
> 时间：2012-09-25T07:38:24.913
> 
> 标签：javascript, jquery, html

我有以下问题。

我有一个使用（html 和 javascript）构建的页面，其中包含 4 个复选框（午餐、晚餐、会议、休息）、一个输入字段（地名）和一个转到下一页按钮。这些复选框和输入字段都是可选的，也可以留空/未选中​​。

如果我单击按钮并转到下一页，将会有一个从 javascript 生成的来自硬编码 json 的列表：

```
var myData = [ {
                 "Name" : "Bla",
                 "Placename" : "Amsterdam",
                 "lunch" : "true"
               },
               {
                 "Name" : "Bla2",
                 "Placename" : "Paris", 
                 "lunch" : "false",
                 "diner" : "true"
               },
               {
                 "Name" : "Bla3",
                 "Placename" : "London",
                 "meet" : "false",
                 "diner" : "true"
               },
               {
                 "Name" : "Bla4",
                 "Placename" : "Berlin"
               }]; 
```

现在的想法是我检查选择了哪个复选框和/或插入了一个地名我这样做如下：

```
 if(placename == ""){ 
    check json without checking placename..
 }else{
   if( ((lunchCheckbox == checked) && (element.lunch == "true")) && (Placename == element.Place)){ } 
```

**但是这里的问题是现在会有很多 if 语句，有没有办法更好地做到这一点（用更少的语句）..**

我想过一个循环，但想知道是否有更好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:41:59.393

我暂时写下这段代码。我将语句数限制为两个。如果缺少一些东西，我会添加它。

**HTML：**

```
<div class="form">
  Lunch : <input type="checkbox" id="lunch" class="detail"/>
  Diner : <input type="checkbox" id="diner" class="detail"/>
  Meet : <input type="checkbox" id="meet" class="detail"/>
  Rest : <input type="checkbox" id="rest" class="detail"/>
  </br>
  Placename : <input type="text" id="placename" class="detail"/>
  </br></br>
  <button id="next">next</button>
  </br></br>
  response
  </br>
  <textarea rows="30" cols="30" id="response"></textarea>
</div> 
```

**JS：**

```
$(document).ready(function(){
    $("#next").click(function(){
        var json = {};

        $("input.detail").each(function(index, element){
          var el = $(element);

          if(el.attr("type") == "checkbox")
            json[el.attr("id")] = el.is(":checked");
          else if( el.attr("type") == "text" && el.val() != "")
              json[el.attr("id")] = el.val();
        });

        $("#response").val( JSON.stringify(json, undefined, 2) );
    });
}); 
```

[这里](http://jsfiddle.net/charlesjourdan/2fkzL/1/)有一个 Jsfiddle 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:47:28.207

是的，您可以对所有这些条件使用循环。但是，您仍然需要在数组或类似的情况下使用这些条件，因此如果您不能以编程方式构建它们，则对您当前的代码没有任何影响。请描述一种编程方式，以便我向您展示一些示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:49:14.257

我认为这将解决问题：

例如，如果您有四个名为：A、B、C、D 的复选框。然后一个解决方案是制作这些位.. 例如 A = 0 或 1 B = 0 或 1 等等.. 然后将这些位相互组合，然后你得到像 0000 这意味着 ABCD 都是错误的，或者 0001只有 D 是真的。之后，您可以将其保存为像 TotalBits = "0000" 这样的字符串。然后你也可以使用 json 参数 lunch="true" = 1 来执行此操作，并将总位数保存在 TotalBits2 中，例如，最后检查这些位是否相同，然后就可以了 :)

因此，例如，如果您对其进行编码...

```
var aBit;
var bBit;
var cBit;
var dBit;

if(a == true){aBit="1"};
if(b == true){bBit="1"};
if(c == true){cBit="1"};
if(d == true){dBit="1"};

var totalBits1 = a+b+c+d; //which results in "1111" 
```

然后午餐也一样，例如：

```
 var lunchBit;
 if(element.lunch == "true"){ lunchBit="1";};
 etcetera..

 var totalBits2 = lunchbit+dinerbit+.....; //which results in for example 1000.. 
```

最后检查是否 totalBits1 == totalBits2 然后产生结果..

# c# - 使用正确格式时不支持的格式

> ID：12578304
> 
> 赞同：0
> 
> 时间：2012-09-25T07:38:26.663
> 
> 标签：c#, file, format

我收到“NotSupportedExeption 未被用户代码处理 - 不支持指定的路径格式”错误，即使我按照要求使用字符串。

```
string path = folder + "/" + filename;

fileByte = File.ReadAllBytes(path); // error here 
```

知道问题是什么吗？

将代码编辑为此

```
string path = Path.Combine(folder, filename);

fileByte = File.ReadAllBytes(path); 
```

路径是“F:\Web\Opgaver\Skirmer\Hjemmesiden\BETA\Skirmer 17-04-2012\Skirmer 17-04-2012\Billeder\Galleri\F:\Web\Opgaver\Skirmer\Hjemmesiden\BETA\Skirmer 17 -04-2012\Skirmer 17-04-2012\Billeder\Galleri\2011\Vingsted\DSC_0001.JPG"

错误仍然发生。我看到的是 ReadAllBytes 需要一个显示路径的字符串，我得到了，但它仍然显示错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:41:06.110

不应`/`在路径中使用，因为斜杠在 Windows 中是无效字符。用于[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)创建它：

```
string path = Path.Combine(folder, filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:41:55.177

我认为您想使用反斜杠，或者更确切地说`Path.DirectorySeparatorChar`是返回正确分隔符的属性，而不管文件系统如何：

```
string path = folder + Path.DirectorySeparatorChar.ToString() + filename; 
```

或者您可以使用以下`Path.Combine`方法：

```
string path = Path.Combine(folder, filename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:41:17.470

变量的确切值是`path`多少？此外，您应该使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)将路径部分连接成完整路径。

作为`File.ReadAllBytes`状态的文档：

```
 NotSupportedException  - path is in an invalid format. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:41:36.127

您的路径格式不正确：

```
NotSupportedException  path is in an invalid format. 
```

[MSDN：system.io.file.readallbytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-17T09:07:48.450

如果您在编辑的问题中发布的路径确实是您尝试从中读取的路径，那么您收到异常的原因是因为路径中有两个冒号。驱动器号重复两次 ( `F:\...F:\...`)。

`folder`您最终选择该路径的原因完全取决于`filename`您对`Path.Combine()`. `folder`两者都不太可能`filename`从完整路径开始，因为在这种情况下`Path.Combine()`将`filename`作为组合路径返回。很可能您的`folder`变量已经包含基本路径的两个副本，带有两个驱动器号，因此有两个冒号，因此`NotSupportedExeption`在您调用`Path.Combine()`.

# c# - Framework 3.0 上的自动实现属性

> ID：12578305
> 
> 赞同：2
> 
> 时间：2012-09-25T07:38:40.767
> 
> 标签：c#, .net

阅读这篇文章，我认为自动属性适用于 .NET Framework 3.0，但一些同事认为这不是真的。他们是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:42:21.707

自动实现的属性根本不依赖于*框架*。它们只是*语言*的一部分。如果您使用的是支持 C# 3 和更高版本的编译器（并且您没有显式设置语言版本），那么您会很好，即使是针对 framework 2.0。

请参阅[我关于 C# 和 .NET 版本](http://csharpindepth.com/Articles/Chapter1/Versions.aspx)（需要更新）的文章，了解有关在针对 3.5 之前的框架版本（C# 3 首次附带的框架版本）时使用 C# 3 功能的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:41:35.497

它是语言的一部分，而不是框架。它是在 C# 3.0 中引入的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:40:34.843

它在 C# 3.0 和更高版本中受支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:50:40.460

.NET 框架 3.0 是对基类库的扩展，而不是其他任何东西。包括的核心语言没有变化。

C# 3.0 与 .NET 3.5 一起发布并包含自动属性。

对于 .NET 的两个版本，CLR 保持不变，因此使用 C# 3.0 或 2.0 编译器编译的任何代码都可以在相同的运行时上运行，因此您可以在针对运行时 2.0 版和 v3.0 时使用自动属性框架，只要您使用的编译器具有特定的语言功能。即 C# 3.0+

但是，如果您使用特定于 .NET 3.5 的库并针对安装了 .NET 3.0 的计算机，则需要确保这些库在您安装应用程序的计算机上可用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T07:40:51.233

不，根据 Habib 的链接 ( [http://msdn.microsoft.com/en-us/library/bb384054.aspx](http://msdn.microsoft.com/en-us/library/bb384054.aspx) )，在 .NET 3.0 中是可能的 - 默认情况下（并且几乎总是）在定位时使用 C# 3.0 .NET 3.0，根据 Jon 在[http://csharpindepth.com/Articles/Chapter1/Versions.aspx](http://csharpindepth.com/Articles/Chapter1/Versions.aspx)的链接。

不过我同意，没有必要在问答网站上问这个问题。您（或任何人）确实很容易发现。

# php - 使用 magento 将自定义的预期交货日期发送到 fedex api

> ID：12578314
> 
> 赞同：1
> 
> 时间：2012-09-25T07:39:50.137
> 
> 标签：php, magento, fedex

我正在研究 Magento 和 FedEx 的集成。[我使用ShipSync](http://www.illapps.com/)成功集成了 FedEx 和 Magento 。但是 FedEx 将出发日期与下订单的日期相同。那么有没有办法发送自定义出发日期或预计交货日期，以便我们可以自定义交货日期模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T16:54:36.727

ShipSync 需要进行调整，以允许自定义船舶或地面回家日期特定的交付日期。

# php - 在另一个页面中获取 magento 会话变量

> ID：12578318
> 
> 赞同：5
> 
> 时间：2012-09-25T07:39:59.923
> 
> 标签：php, session, magento

我在 magento 模态页面的会话中设置数组变量，并希望在另一个页面中检索，如 getuserdata.php 但不进入另一个页面。我设置变量并进入一页然后完全检索。

我的代码就像..

//第一页代码。

```
$session = Mage::getSingleton("core/session",  array("name"=>"frontend"));
$fldata = 'work for set data';
$session->setData("free_auth", $fldata); 
```

//另一个页面代码。

```
session_start();
require_once ("../../app/Mage.php");
umask(0);
Mage::app('default');
$session = Mage::getSingleton("core/session",  array("name"=>"frontend"));
$stl1 = $session->getData("free_auth"); 
```

任何人都可以帮助我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:14:10.053

如果我们在 Magento 中创建会话，那么我们只能在 Magento 文件中使用该会话，例如在 magento/app 文件夹中。如果要在您创建的外部文件中使用该会话，则必须首先在另一个 Magento 默认文件中获取会话，然后调用 jquery ajax 函数并通过它传递会话变量以将其获取到外部文件中。您还可以在不使用会话的情况下通过 ajax 传递变量。

像这样设置会话数据。

```
$fldata = 'work for set data';
Mage::getSingleton('core/session')->setMyCustomData($fldata); 
```

并获取这样的数据。

```
session_start();
$sessionfree = Mage::getSingleton('core/session', array('name' => 'frontend'));
$abcfree = $sessionfree->getMyCustomData(); 
```

# scala - 如何从 Scala 2.10 中的 ClassFileAnnotArg 中提取信息

> ID：12578321
> 
> 赞同：2
> 
> 时间：2012-09-25T07:40:14.933
> 
> 标签：scala, reflection, scala-2.10

我正在尝试使用 Scala 2.10M7 中的新反射 API 来提取构造函数参数的注释。注释是用 Java 编写的，因为我在运行时需要它们，当我尝试在 Scala 中执行它们时，我收到了一条警告，建议我使用 Java。

我已经成功地为每个构造函数参数和注释获得了一个符号......但我最终得到了 ClassFileAnnotArg 类型的东西（下面的代码中的 av）。我不确定如何处理这些。查看源代码/scaladocs 似乎我想拆分一些案例类，但我不知道该怎么做。

我不认为这个问题特定于构造函数 args 上的注释，但我想为它们使用更详细的 scala 反射，不能只使用 Java 注释反射机制。

```
import scala.reflect.runtime._
val ty = universe.typeOf[Test1]
val constructors = ty.member(universe.nme.CONSTRUCTOR)
for (constructor<-constructors.asTerm.alternatives.map{_.asMethod}) {
  println("Constructor = "+constructor)
  println("Overloaded = "+constructor.isOverloaded)
  for (pp<-constructor.params) {
    println("Constructor params")
    for (p<-pp) {
      println("  name="+p.name)
      println("  type="+p.typeSignature)
      for (a<-p.getAnnotations) {
        println("  annotation "+a.atp)
        for ((aname,av)<-a.assocs) {
          println("     "+aname.decoded+"="+av)
        }
      }
    }
  }
} 
```

有什么方法可以获取注释对象的实例（就像您在 Java 注释中所做的那样），或者您是否必须通过 getAnnotations / 检查它是你想要的 / 迭代 assocs / 检查它是你想要的/ 以某种方式将结果与预期类型匹配 / 得到结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:24:47.473

目前您无法获得注释对象的实例，尽管这是一个好主意。我会尽量在 RC1 之前把它挤进去。更新。糟糕，我们目前处于锁定状态。这将不得不等到 2.10.1：[https ://issues.scala-lang.org/browse/SI-6423](https://issues.scala-lang.org/browse/SI-6423)

`av`传统的方法是对`LiteralAnnotArg`, `ArrayAnnotArg`and进行模式匹配`NestedAnnotArg`（顺便说一句，这些名称将在 RC1 中更改为 just`LiteralArgument`和`ArrayArgument``NestedArgument）。

# java - 如何为win32配置rcp产品以在控制台上正确打印德语变音符号？

> ID：12578322
> 
> 赞同：2
> 
> 时间：2012-09-25T07:40:15.300
> 
> 标签：java, windows, encoding, console, eclipse-rcp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:47:33.130

Okay, I assume you are using `org.eclipse.ui.console.MessageConsole`, which extends IOConsole. If you take a look at the IOConsole class, there is a `getEncodingMethod()`, which return default encoding, which is taken from `WorkbenchEncoding.getWorkbenchDefaultEncoding();`, which is `System.getProperty("file.encoding", "UTF-8");`. So, you could try to set property "`file.encoding`" to desired encoding. Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:57:43.417

The easiest way of printing German umlauts to the console correctly is to use `System.console()` and the methods it provides.

Another way is to configure the encoding to be used externally, via a system property for example. Then the application has to use that encoding to create the necessary Writer, Readers and Streams. For Windows systems this encoding has to be `IBM850`.

The problem is that in Windows the default encoding `Cp1252` is used also for `System.out` and `System.in`. But the windows console uses `codepage 850` (a legacy from DOS times), which correspondents to the encoding `IBM850` in Java. Since `Cp1252`and `IBM850` are not compatible the characters get messed up.

# machine-learning - 为什么岭回归中的偏差项没有正则化？

> ID：12578336
> 
> 赞同：13
> 
> 时间：2012-09-25T07:40:56.490
> 
> 标签：machine-learning, classification

在大多数分类（例如逻辑/线性回归）中，偏差项在正则化时会被忽略。如果我们不对偏差项进行正则化，我们会得到更好的分类吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T08:13:49.933

例子：

```
Y = aX + b 
```

正则化是基于这样的想法，即过度拟合`Y`是由`a`“过度具体”引起的，可以说，这通常表现为`a`'s 元素的大值。

`b`只是抵消了这种关系，因此它的规模对这个问题并不重要。此外，如果出于某种原因需要较大的偏移量，则对其进行正则化将阻止找到正确的关系。

所以答案就在于此：in `Y = aX + b`，`a`乘以解释/自变量，`b`被添加到它。

# java - 为什么我不能使用 captureNetworkTraffic(""); 与 IE

> ID：12578340
> 
> 赞同：1
> 
> 时间：2012-09-25T07:41:20.827
> 
> 标签：java, selenium, junit, selenium-webdriver

我用

```
String trafficOutput = selenium.captureNetworkTraffic("json"); 
```

从浏览器获取响应头。我可以使用 Firefox 或 Google Chrome（两者都有响应标头）来执行此操作，但使用 Internet Explorer，则不会返回任何内容。

知道如何使用 IE 来做到这一点吗？我用的是IE9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-21T23:23:29.773

你不能。

该功能是在 Selenium 1 中为 Firefox 实现的 hack。如果您使用的是 Selenium 2，则根本不应该使用它（或 Selenium 1 API）。

相反，看看 BrowserMob 代理 - [http://bmp.lightbody.net](http://bmp.lightbody.net)

这是一个代理实现，因此可以与所有浏览器驱动程序一起使用，并且比 Selenium 1 hack 实现更有用。

# drupal - Drupal 查看多个排序标准

> ID：12578343
> 
> 赞同：2
> 
> 时间：2012-09-25T07:41:31.840
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-views

我在 drupal 中有多种内容类型，它们都使用不同的日期字段。一个是使用 blog_date 和第二个 post_date。当我将它们合并到一个视图中并尝试按多个排序标准进行排序时，它们总是按第一个排序。即，如果我首先按 blog_date 排序，所有博客类型的帖子都会出现，并且只有在该帖子类型的帖子之后才会遵循它们的排序标准。

是否可以将这两个数据字段合并为一个，然后全局排序节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T20:53:11.297

我找到了许多可能的解决方案并在此处进行了总结：[https ://drupal.org/node/2133879](https://drupal.org/node/2133879)

但是，这是一个我推荐的简单解决方案：

在自定义模块中，使用 hook_views_query_alter() 函数来更改排序条件以使用 CASE ... WHEN 在 orderby 条件中添加条件。一个很好的例子如下所示：

```
<?php
/**
 * Implementation of hook_views_query_alter().
 */
function MYMODULE_views_query_alter(&$view, &$query) {
  if ($view->name == 'view_name') {
    // Completely replace current orderby
    $query->orderby = array(" CASE
        WHEN node_data_field_dates_field_dates_value THEN node_data_field_dates_field_dates_value
        WHEN node_data_field_event_dates_field_event_dates_value THEN node_data_field_event_dates_field_event_dates_value
    END ASC ");
  }
}
?> 
```

示例来源：[https ://drupal.org/comment/6323288#comment-6323288](https://drupal.org/comment/6323288#comment-6323288)

# ruby-on-rails - Rails 应用程序中的内存不断增加

> ID：12578344
> 
> 赞同：11
> 
> 时间：2012-09-25T07:41:34.700
> 
> 标签：ruby-on-rails, memory, heroku

我最近推出了一个新的 Ruby on Rails 应用程序，它在开发模式下运行良好。启动后我一直在体验正在使用的内存不断增加：

![来自 New Relic、Dyno 内存使用情况的屏幕转储](../Images/461fad10bc208e70b84a6a2a00058786.png)

![更新：当这个来自 New Relic 的屏幕转储被拍摄时。 我已经安排了每小时重新启动一次网络测功机（两个网络测功机中的一个）。 因此，它没有达到 500Mb 的崩溃级别，实际上它有点像锯齿状图案。 这个问题根本没有解决，只是一些症状。 如您所见，早上并不那么忙，但下午更忙。](../Images/8d1227fb31b60a64719d112a61cac41a.png)

**更新**：当这个屏幕转储（下一个）来自 New Relic 时。我已经安排了每小时重新启动一次网络测功机（两个网络测功机中的一个）。因此，它没有达到 500Mb 的崩溃级别，实际上它有点像锯齿状图案。这个问题根本没有解决，只是一些症状。如您所见，早上并不那么忙，但下午更忙。我在 11.30 上传了一个小细节，即使它出现在统计数据中，它也不会影响问题。

还可以注意到，即使图表显示 AVG 内存，MIN 内存仍在不断增加。即使图表似乎在图表中暂时下降，最小内存保持不变或增加。MIN 内存永远不会减少！

该应用程序将（无需重新启动测功机）增加内存，直到达到 Heroku 的最大级别，并且应用程序因执行过期类型的错误而崩溃。

我不是一个优秀的程序员，但我之前做过一些应用程序，没有遇到过这类问题。

已执行故障排除

A. 我认为问题出在 application_controller 中的 before_filter 中（[应用程序控制器中的变量会导致 Rails 中的内存泄漏吗？](https://stackoverflow.com/questions/12561409/will-variables-in-application-controller-cause-a-memory-leak-in-rails/12577964)）但这不是问题。

B. 我安装了 oink 但它没有给出任何结果（根本）。它会创建一个 oink.log，但在我运行“heroku run oink -m log/oink.log”时不会给出任何结果，无论阈值是多少。

C. 我试过 bleak_house 但它已被弃用并且无法安装

D. 我在谷歌上搜索并阅读了该主题的大多数文章，但我并不聪明。

E. 我很想测试 memprof 但我无法安装它（我有 Ruby 1.9x 并且不知道如何将它降级到 1.8x）

我的问题：

Q1。我真正想知道的是每个请求都在增加的变量的名称，或者至少哪个控制器使用的内存最多。

Q2。下面代码中的控制器会增加内存吗？

```
related_feed_categories = []
@gift.tags.each do |tag|
  tag.category_connections.each do |cc|
    related_feed_categories << cc.category_from_feed
  end
end 
```

（对不起，由于某种原因，SO不会重新格式化代码以使其易于阅读）。

之后我是否需要用“related_feed_categories = nil”“杀死”related_feed_categories 或者垃圾收集器会处理这个问题？

Q3。我要寻找的主要内容是什么？现在我根本无法缩小范围。我不知道要深入研究代码的哪一部分，也不知道要查找什么。

Q4。万一我真的解决不了问题。是否有任何在线咨询服务可以发送我的代码并让他们找到问题？

谢谢！

**更新**。收到评论后，它可能与会话有关。这是我猜可能不好的代码的一部分：

```
# Create sessions for last generation
friend_data_arr = [@generator.age, @generator.price_low, @generator.price_high]
friend_positive_tags_arr = []
friend_negative_tags_arr = []
friend_positive_tags_arr << @positive_tags
friend_negative_tags_arr << @negative_tags    
session["last_generator"] = [friend_data_arr, friend_positive_tags_arr, friend_negative_tags_arr]

# Clean variables
friend_data_arr = nil
friend_positive_tags_arr = nil
friend_negative_tags_arr = nil 
```

它用于 generator#show 控制器。当通过我的礼物生成引擎生成了一些礼物时，我将输入保存在会话中（以防他们想在以后使用该信息）。我从不杀死或过期这些会话，以防万一这可能导致内存增加。

再次更新：我删除了这段代码，但内存仍然增加，所以我猜这部分不是它，但类似的代码可能会导致错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T14:13:30.223

这不太可能是我们的related_feed_categories 引起的。

您是否使用大量文件？

您将会话数据保留多长时间？看起来您有一个电子商务网站，您是否在会话中保存对象？

基本上，我认为是文件、会话或服务器崩溃时刷新的临时数据增加（memcache？）。

在半夜，我猜你的顾客少了。您可以在高峰时段发布相同的内存图表吗？

它可能与这个问题有关：[内存在一个空的 Rails 应用程序中无限增长](https://stackoverflow.com/questions/12397208/memory-grows-indefinitely-in-an-empty-rails-app?rq=1)

**更新 ：**

Rails 不会在客户端存储所有数据。我不记得默认存储，除非您选择 cookie::store，否则 rails 只会发送 session_id 之类的数据。

它们是关于会话的一些指南，ActiveRecord::SessionStore 似乎是性能目的的最佳选择。而且您不应该在会话中保留大型对象或机密数据。更多关于这里的会议：http: [//guides.rubyonrails.org/security.html#what-are-sessions](http://guides.rubyonrails.org/security.html#what-are-sessions)

在 2.9 部分，你有一个关于销毁会话的解释，在一段时间内未使用。

我建议您存储提供搜索结果的 url，而不是将对象存储在会话中。您甚至可以将其存储在数据库中，从而可以为您的客户节省少量研究，和/或默认加载最后使用的数据。

但是在这些阶段，我们仍然不能完全确定会议是罪魁祸首。为了确保这一点，您可以在测试服务器上尝试使用过期会话对您的应用程序进行压力测试。所以基本上，你创建了大量的会话，也许 20 分钟后 rails 不得不压制它们。如果您发现内存消耗有任何差异，它将缩小范围。

第一种情况：会话到期时内存显着下降，您知道这是与会话相关的。

第二种情况：内存以更快的速度增加，但在会话到期时不下降，您知道它与用户相关，但与会话无关。

第三种情况：没有任何变化（通常内存增加），所以你知道它不依赖于用户数量。但我不知道是什么原因造成的。

当我说压力测试时，我指的是大量会话，而不是真正的压力测试。您需要的会话数取决于您的平均用户数。如果您有 50 个用户，那么在您的应用程序崩溃之前，20 -30 个会话可能非常重要。因此，如果您手动拥有它们，请配置更高的过期时间限制。我们只是在寻找内存消耗的差异。

**更新 2：**

所以这很可能是内存泄漏。所以使用对象空间，它有一个 count_objects 方法，它将显示当前使用的所有对象。它应该缩小范围。当内存已经增加很多时使用它。

否则，你有 bleak_house，一个能够发现内存泄漏的 gem，仍然 ruby​​ 用于内存泄漏的工具不如 java 有效，但值得一试。

Github：[https ://github.com/evan/bleak_house](https://github.com/evan/bleak_house)

**更新 3**：

这可能是一种解释，这并不是真正的内存泄漏，但它会增加内存： [http ://www.tricksonrails.com/2010/06/avoid-memory-leaks-in-ruby-rails-code-and-protect-反对拒绝服务/](http://www.tricksonrails.com/2010/06/avoid-memory-leaks-in-ruby-rails-code-and-protect-against-denial-of-service/)

简而言之，符号会一直保存在内存中，直到您重新启动 ruby​​。因此，如果使用随机名称创建符号，内存将会增长，直到您的应用程序崩溃。Strings 不会发生这种情况，它们是 GCed。

有点旧，但对 ruby​​ 1.9.x 有效试试这个：Symbol.all_symbols.size

**更新 4：**

因此，您的符号可能是内存泄漏。现在我们仍然需要找到它发生的位置。使用 Symbol.all_symbols。它为您提供列表。我想你可以将它存储在某个地方，并与新数组进行比较，以查看添加了什么。

它可能是 i18n，也可能是像 i18n 这样以隐式方式生成的其他东西。但无论如何，这可能会生成名称中带有随机数据的符号。然后这些符号就再也不会使用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:44:32.180

假设`category_from_feed`返回一个字符串（或者可能是一个符号），增加 300MB 的幅度是不太可能的。您可以通过对此进行分析来粗略得出结论：

```
4_000_000.times {related_feed_categories << "Loooooooooooooong string" } 
```

此代码段会将内存使用量提高约 110MB。

我会查看读取文件然后不关闭它的数据库连接或方法。我可以看到它与提要有关，这可能意味着您可能正在使用 XML。这也可以作为一个起点。

* * *

将其发布为答案，因为这在评论中看起来很糟糕：/

# ruby-on-rails - 从其他 Rails 控制器操作访问线程

> ID：12578351
> 
> 赞同：0
> 
> 时间：2012-09-25T07:41:45.343
> 
> 标签：ruby-on-rails, ruby, multithreading

我正在开发一个应用程序，但目前我被困在使用 rails 的多线程上。

我有以下情况：当某些操作发生时（可能是在用户单击按钮之后或计划任务触发时），我正在启动一个单独的线程来解析一些网站，直到我必须接收 SMS - 继续解析的代码。此刻我制作了 Thread.stop。

SMS 代码作为对我的某些控制器的 POST 请求提供。所以我想将它传递给我停止的线程并继续它的工作。

但是我怎样才能访问该线程？

保持该线程链接的最佳位置在哪里？

那么如何处理多线程呢？可能会有很多线程和很多 SMS 请求的情况，我需要以某种方式将它们关联起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T19:24:12.920

出于所有实际目的，您不能，但您可以让其他线程“报告”其状态。

您可以使用 redis-objects 创建一个使用 redis 作为其标志的锁定对象，创建某种类型的计数器，或者只是 true、false 值存储。然后可以查询redis查看其他线程的对应状态，如果需要可以退出。

[https://github.com/nateware/redis-objects](https://github.com/nateware/redis-objects)

最酷的部分是它不仅适用于线程之间，而且适用于应用程序之间。

# c# - 在 wince 中将消息从一个进程发送到其他使用 winapi

> ID：12578352
> 
> 赞同：0
> 
> 时间：2012-09-25T07:41:46.243
> 
> 标签：c#, winapi, compact-framework, windows-ce

> **可能重复：**
> [在 Windows CE 中进行跨进程通信的最佳机制是什么？](https://stackoverflow.com/questions/946279/what-is-the-best-mechanism-for-communicating-cross-process-in-windows-ce)

我使用 .net cf 2.0 创建了两个应用程序。

而且我需要从一个应用程序向另一个应用程序发送一些消息\命令（当第二个应用程序收到此消息时，我想运行一些代码）。我怎样才能做到这一点只使用winapi。我不想使用 tcp 或 wcf，只使用 winapi。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:44:52.597

在以下链接中尝试 WM_COPYDATA ...它是一个 win32 api

[http://msdn.microsoft.com/en-us/library/ms649011.aspx](http://msdn.microsoft.com/en-us/library/ms649011.aspx)

也可以通过命名管道和 MSMQ 完成

# c# - 使用c#在记事本中实现字体菜单项

> ID：12578355
> 
> 赞同：-2
> 
> 时间：2012-09-25T07:41:55.503
> 
> 标签：c#, winforms

当我尝试在记事本中实现字体菜单项时，我没有更改文本，我的代码中是否有任何错误

这是我的代码

```
private void fontMenuItem_Click(object sender, EventArgs e)
{
    FontDialog objFontForm = new FontDialog();
    objFontForm.ShowDialog();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:46:08.843

这是取自[DotNetPearls的一个非常简单的示例](http://www.dotnetperls.com/fontdialog)

```
//Create FontDialog instance
FontDialog fontDialog1 = new FontDialog();
// Show the dialog.
DialogResult result = fontDialog1.ShowDialog();
// See if OK was pressed.
if (result == DialogResult.OK)
{
    // Get Font.
    Font font = fontDialog1.Font;
    // Set TextBox properties.
    this.textBox1.Text = string.Format("Font is: {0}", font.Name);
    this.textBox1.Font = font;
} 
```

# asp.net - MvcContrib 命名空间在视图中不可见

> ID：12578361
> 
> 赞同：0
> 
> 时间：2012-09-25T07:42:18.520
> 
> 标签：asp.net, xml, asp.net-mvc-3, mvccontrib

我使用 MvcContrib Portable Areas，一切正常，但我决定使用 MvcContrib Grid。我的解决方案的所有项目都引用了 MvcContrib.dll 和 MvcContrib.FluentHtml.dll。问题是 Views 看不到 MvcContrib 即使它被引用。

@using MvcContrib 结果是：“找不到类型或命名空间 MvcContrib”。在根（父）项目中一切正常。

我使用 .NET 4.0 和 MVC 3.0

我从可移植区域 Views 文件夹中引用了我的 Web.config。

```
<?xml version="1.0"?>
<configuration>
<configSections>
<sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
<section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
<section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
</sectionGroup>
</configSections>

<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="MvcContrib"/>
    <add namespace="MvcContrib.UI"/>
    <add namespace="MvcContrib.UI.Html"/>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Globalization" />
    <add namespace="Microsoft.Web.Mvc"/>
  </namespaces>
</pages>
</system.web.webPages.razor>

<appSettings>
  <add key="webpages:Enabled" value="false" />
</appSettings>

<system.web>
<httpHandlers>
  <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
</httpHandlers>
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

  </assemblies>
</compilation>

</system.web>

<system.webServer>
<validation validateIntegratedModeConfiguration="false" />

<handlers>
  <remove name="BlockViewHandler"/>
  <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
</handlers>
</system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:53:12.510

我遇到了同样的问题，我通过将 MVC Contrib 引用添加到我的**根**模块和**区域**模块**来**修复它！

此外，您可能需要将以下代码添加到`web.config`您使用此第三方组件的视图中。

```
<system.web.webPages.razor>
<host factoryType="..." />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
     <namespaces>
     <add namespace="MvcContrib"/>
     <add namespace="MvcContrib.UI.Grid"/>
     <add... 
```

我希望这会有所帮助

# jsp - 将数据添加到“multipart/data-form”对象

> ID：12578366
> 
> 赞同：0
> 
> 时间：2012-09-25T07:42:45.167
> 
> 标签：jsp, servlets

我在 JSP/servlet 应用程序中有一个“multipart/form-data”表单。此应用程序在 Apache tomcat 6.31 上加载。

我想知道的是我们可以将新数据添加到 servlet 中收到的表单对象吗？如果是，那怎么办？

就像是：

1.  JSP 页面有一个必须上传文件的表单。
2.  提交表单并在 servlet 中接收到数据后，我们需要向其添加用户 ID 和密码，我们无法在 UI 层中公开这些用户名和密码。然后使用新数据将该表单重新提交到另一个 JSP/Servlet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:47:49.103

我会这样做：

1.  Servlet 1 将收到多部分请求。
2.  我会装饰在 servlet 1 中收到的`HTTPServletRequest`using[`HttpServletRequestWrapper`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html)并在请求上调用“getParameter”时返回用户和密码。（请参阅[this](https://stackoverflow.com/questions/12553491/whats-wrong-with-httpservletresponseaddheader/12553564#12553564)以查看使用的示例装饰器`HttpServletRequest`）`HttpServletRequestWrapper`。
3.  RequestDispatcher.forward(decoratedRequest, response) 到将处理数据的 JSP/Servlet。

> 我想知道的是我们可以将新数据添加到 servlet 中收到的表单对象吗？

要回答这个问题，您通常可以拥有其他表单控件，如文本框、单选框、复选框等，以及某种形式的`FILE`控件`multipart/form-data`，以防万一您还没有意识到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:19:24.213

如果我正确理解您的要求，

您想在请求对象到达 servlet 后向它添加更多参数。

你可以这样做，

```
request.setAttribute("userId", "xyz");
request.setAttribute("password", "abc");
request.getRequestDispatcher("Path where you want to forward").forward(request, response); 
```

您可以在结果页面访问相同的属性。

# javascript - Javascript无法提取表中文本字段的值

> ID：12578370
> 
> 赞同：0
> 
> 时间：2012-09-25T07:43:03.913
> 
> 标签：javascript, textfield

我有一个有 n 行的表，第 8 和第 9 个单元格是可编辑的测试字段。我需要使用 Javascript 和 HTML DOM 提取这些字段的值。我尝试了不同的方法，但是每当我发出警报时，我都会得到   或什么都没有作为警报内容。

以下是创建语句：

```
//Input Fields
for(var i=1; i<=mmrows.length-3; i++)
{//mmrows is the source
    var input1 =document.createElement('input');
    var input2 =document.createElement('input');
    input1.setAttribute("type", "Text");
    input2.setAttribute("type", "Text");
    //input1.id='Inp1'.concat(i);// Tried to assign ID dynamically
    //input2.id='Inp2'.concat(i);
    input1.id='Inp1';
    input2.id='Inp2';
    input1.onkeypress=function(){
        return isNumberKey(arguments[0]);
    }//for validation

    var t1=document.createElement("td");
    t1.appendChild(input1);
    valrows[i+1].cells[8].appendChild(t1);  
    var t2=document.createElement("td");
    t2.appendChild(input2);

    valrows[i+1].cells[9].appendChild(t2);  
} 
```

我正在尝试在另一个函数中提取值并尝试以下操作：

```
var cells=document.getElementsByTagName('td');
alert(cells.length);
alert(cells[8].innerText);
alert(cells[8].innerHTML);

alert(trim(valrows[i].cells[8].innerHTML));
alert(trim(valrows[i].cells[9].innerHTML));

var str='Inp1'.concat(i);
var str1='Inp2'.concat(i);
alert(document.getElementsById(str).value); //Dynamic ID
alert(document.getElementsById(str1).value);

var tblcells = valrows[i].cells; 
alert(tblcells);
for(var j=0; j<tblcells.length; j++)
{
    alert(tblcells[j].firstElementChild.value);
} ​ 
```

请告诉我需要进行哪些更改才能获取文本字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:00:18.460

我已经解决了这个问题！实际上这是我自己的一个错误；我尝试通过说 getElement(s)ById 来访问文本值 - 不需要 s。

所以我能够通过使用循环变量 i 并在类似的循环中通过 getElementById 访问它来动态地将“id”分配给这些文本单元格。

谢谢！

# c++ - 从日期和时间中提取日期

> ID：12578372
> 
> 赞同：1
> 
> 时间：2012-09-25T07:43:13.413
> 
> 标签：c++, date, extract, tdatetime

我在 C++ Builder 中使用 VCL 表单应用程序。

如何从同时具有日期和时间的 TDateTime 对象中获取日期？

这是一个例子：

```
TDateTime test("25/09/2012 12:00am"); 
```

我在一个 TDateTime 对象之后，它只有以下信息：

```
"25/09/2012" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:49:35.547

您可以使用[`DateOf`](http://docwiki.embarcadero.com/VCL/2010/en/DateUtils.DateOf)

但是，请注意，它将返回`"25/09/2012 00:00"`的`TDateTime`类型包括时间，因此如果您确实需要`TDateTime`返回，则无法避免小时：分钟信息。

如果您想从中提取日/月/年信息，`TDateTime`可以使用[`DecodeDate`](http://docwiki.embarcadero.com/VCL/2010/en/SysUtils.DecodeDate)函数

# knockout.js - 在 Knockout.js 中转换 observable 的属性

> ID：12578373
> 
> 赞同：0
> 
> 时间：2012-09-25T07:43:15.837
> 
> 标签：knockout.js

我有一个`observableArray`使用`template`绑定绑定的记录。这工作正常。因为我想跟踪每条记录的变化，所以`observableArray`由`observable`s 组成。这也有效。

我现在想要的是将每条记录（即 each `observable`）的一些属性转换为不同的类型。

我应该如何进行？

通常，我可以使用 a `computed`，但在这种情况下，我不能将单个`computed`observable 添加到数组中，因为我需要多个。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:03:49.877

您可以向视图模型添加一个函数，该函数接受一个参数，该参数是可观察数组中的项目。绑定将在 a 内运行函数`dependentObservable`，因此任何访问了其值的可观察对象都将创建一个依赖项。

因此，例如，从[Ryan Niemeyer 的 jsFiddle](http://jsfiddle.net/rniemeyer/2pB9Y/)中，您可以使用以下标记：

```
type "one", "two", or "three": <input data-bind="value: text" /> 
<hr />
<ul data-bind="template: { name: 'itemTmpl', foreach: items }"></ul>

<script id="itemTmpl" type="text/html">
    <li data-bind="text: name, visible: viewModel.shouldThisBeVisible(name)"></li>
</script>​ 
```

.. 使用视图模型：

```
var viewModel = {
    text: ko.observable("one"),
    items: [{name: "one"}, {name: "two"}, {name: "three"}],
};

viewModel.shouldThisBeVisible = function(name) {
    return this.text() === name;
}.bind(viewModel);

ko.applyBindings(viewModel);​ 
```

关键位是函数接受参数的位置`'name'`。在您的情况下，这将是您可观察数组中的一个项目。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:28:04.610

这是一个使用视图模型包装 observableArray 的每个项目的解决方案。然后这个视图模型可以包含一个*计算*属性。

```
var ItemViewModel = function (value) {
    this.value = ko.observable(value);
    this.computedValue = ko.computed(function () {
        return this.value() * 2;        
    }, this);    
};

var ViewModel = function (list) {
    var self = this;
    self.list = ko.observableArray([]);                
    ko.utils.arrayForEach(list, function (value) {
         self.list.push(new ItemViewModel(value)); 
    });
};

ko.applyBindings(new ViewModel([1,2,3]));

<ul data-bind="foreach: list">
<li data-bind="text: computedValue"></li>
</ul> 
```

# c - C 编译错误 - 表达式必须具有常量值

> ID：12578375
> 
> 赞同：1
> 
> 时间：2012-09-25T07:43:36.643
> 
> 标签：c, arrays, compiler-errors

我从一个在 802.15.4 上实现 AES 的旧项目中获得了一个代码，它定义了这样的默认密钥：

```
static uint8_t default_key_source[8] = {0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}; 
```

然后定义一个以下列方式使用它的表：

```
uint8_t mac_key_table[34] =
{
    // KeyIdLookupList[1].LookupData : macDefaultKeySource || g_Sec_KeyIndex_1
    default_key_source[0], // LookupData[0]
    default_key_source[1], // LookupData[1]
    default_key_source[2], // LookupData[2]
    default_key_source[3], // LookupData[3]
    default_key_source[4], // LookupData[4]
    default_key_source[5], // LookupData[5]
    default_key_source[6], // LookupData[6]
...
} 
```

我在编译时收到“表达式必须有一个常量值”错误。这很奇怪，因为它曾经在不同的编译器上编译（不知道具体是哪个，但我使用的是用于 ARM 的 IAR 嵌入式工作台）

我尝试在 default_key_source 的静态声明之前添加 const。但这没有帮助，我知道编译器无法用变量初始化结构，但是这些变量是常量，那么这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:48:41.243

如果变量具有静态存储持续时间，C 要求您具有常量初始化程序。在您的情况下，`mac_key_table`数组是在文件范围内声明的，而在文件范围内声明的对象具有静态存储持续时间。

在 C 中，对象的值不被视为常量。您尝试添加`const`关键字，但在 C`const`中不将对象限定为*常量*，而是将其限定为*read-only*。

C 中常量表达式的示例是文字、带有文字的表达式或枚举成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:06:05.510

在 C 中处理这种情况的一种简单方法是使用宏，以确保您只需要在一个地方定义常量：

```
#define DEFAULT_KEY_SOURCE 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

// if you really need that variable
static default_key_source[8] = { DEFAULT_KEY_SOURCE };

uint8_t mac_key_table[34] =
{
  DEFAULT_KEY_SOURCE,
  ...
}; 
```

# math - 做x mod 1000000007的想法是什么？

> ID：12578376
> 
> 赞同：22
> 
> 时间：2012-09-25T07:43:46.807
> 
> 标签：math, modulo

在许多编程问题（例如一些 Project Euler 问题）中，我们被要求将答案报告为答案除以 1,000,000,007 后的余数。

为什么没有其他号码？

编辑：2 年后，这就是我所知道的：这个数字是一个大素数，并且对这样一个问题的任何答案都非常大，以至于报告一个余数是有意义的（因为这个数字对于本机数据类型来说可能太大了处理）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T08:00:55.533

让我扮演一个心灵感应者。1000...7 是质数，1000000007 是适合 32 位整数的最大数。由于素数[用于计算哈希](https://stackoverflow.com/questions/1145217/why-should-hash-functions-use-a-prime-number-modulus)（通过找到除以素数的余数），因此 1000000007 适合计算 32 位哈希。

# javascript - 如何从 Qt 调用 evaluateJavaScript() 函数？

> ID：12578377
> 
> 赞同：4
> 
> 时间：2012-09-25T07:43:48.463
> 
> 标签：javascript, qt, qwebview

我无法从 QT 调用 javascript 函数。

我正在使用下面的代码

QT代码：
`QWebFrame *frame = m_d->m_webView->page()->mainFrame();` `frame->evaluateJavaScript("displayhello()");`

```
 Here `displayhello()` is the `Javascript` function defined in the HTML file. 
```

HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="" />

<script type="text/javascript">
   function displaymessage(str)
   {
       alert(str);
   }
   function displayhello()
   {
       alert("Hello");
   }
</script>
</head>
<body>
<form>
<input type="button" value="Click me!" onClick="displayhello()">
</form>
</body>
</html> 
```

谁能给我任何指示为什么没有调用Javascript函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T14:01:18.400

我知道这篇文章很旧，但万一有人有同样的情况：

始终检查开发工具以查看 JavaScript 控制台告诉您的内容。您可以通过将此行添加到您的 QT 主功能来启用 devtools

```
QWebSettings::globalSettings()->setAttribute(QWebSettings::DeveloperExtrasEnabled, true); 
```

现在通过右键单击->检查，控制台，您会看到 JS 解释错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:05:48.357

`QVariant holdInformation = map->page()->mainFrame()->evaluateJavaScript (QString ("displayhello ()"));`

替换`map`为您想要的类名。

另外，尝试使用`onload`.
`<body onload = "displayhello()" topmargin = "0" leftmargin = "0">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:45:01.233

您应该在“onclick”中使用小写“c”：

```
<input type="button" value="Click me!" onclick="displayhello()"> 
```

# javascript - 按键时播放声音

> ID：12578379
> 
> 赞同：8
> 
> 时间：2012-09-25T07:43:56.217
> 
> 标签：javascript, html, audio

有人知道是否有任何预定义的方法可以为从键盘输入 HTML 表单的每个字母播放声音？

例如：在文本字段中，如果我输入 Y，网站会显示 Y，依此类推。

或者，最好的方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T07:47:24.883

播放声音很容易，也很容易为按键添加处理程序，但是没有预定义的方法来链接这两个操作，因此您必须键入自己的代码。

**1) 按键动作**

```
document.onkeydown = function() {
    ... 
```

**2）播放声音**

添加音频元素：

```
<audio id=alarm>
    <source src=sound/zbluejay.wav>
</audio> 
```

并执行它

```
document.getElementById('alarm').play(); 
```

例如，您可以构建一个将键码链接到声音元素 id 的地图：

```
var sounds = {
   88 : 'alarm', // key 'x'
   ...

};
document.onkeydown = function(e) {
    var soundId = sounds[e.keyCode];
    if (soundId) document.getElementById(soundId).play();
    else console.log("key not mapped : code is", e.keyCode);
} 
```

Yoy 可以在[这里找到键码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:45:30.030

您必须拥有所有字母的声音文件，并使用 JavaScript 在按钮按下事件上调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T02:15:35.893

我刚刚编写了一个快速脚本，可以为您将工作简化为仅 HTML。

```
(function(){
	var keyElements	= document.getElementsByTagName('keysound'),
		i			= keyElements.length,
		keys		= {};
	while (i--){
		var cur		= (keyElements[i].getAttribute('keys')||"").toString().split(''),
			v		= cur.length,
			audio	= keyElements[i].getAttribute('src'),
			caseinsensitive	= keyElements[i].getAttribute('anycase')!==null?true:false,
			regexp	= keyElements[i].getAttribute('regexp')!==null?true:false;
		if (audio){
			while (v--){
        cur[v] = caseinsensitive ? cur[v] : cur[v].toLowerCase();

				var src=!regexp?audio:
				audio.replace('${key}', cur[v])
				.replace('${code}', cur[v].charCodeAt(0));
				var ele = document.createElement('audio');
				ele.src = src;
				document.body.appendChild(ele);
				(keys[cur[v]] = keys[cur[v]] || []).push(
					ele
				);
				if (caseinsensitive) {

					(keys[cur[v].toUpperCase()] = keys[cur[v].toUpperCase()] || []).push(
						ele
					);
				}
			}
		}
	}
  console.log(keys);
	window.addEventListener('keydown',function(evt){
		var clist	= keys[evt.key] || [],
			clen	= clist.length;
		while (clen--){
			try { clist[clen].play() } catch(e) {}
		}
	});
})();
```

```
<!-- Demo code example -->
<keysound keys="0123456789abcdefghijklmnopqrstuvwxyz" regexp anycase src="https://the-peppester.github.io/styff/keys/${key}.mp3" />
<keysound keys="QWERTY" src="http://soundbible.com/mp3/Fart-Common-Everyday-Fart_Mike-Koenig.mp3" />
<keysound anycase keys="bnm,./;'[]-=+_()*&^%$#@!`~" src="http://soundbible.com/mp3/Iguana_Farts_In_A_Bathtub-Iguana_Farts-1423164123.mp3" />
<keysound anycase keys="asdfgh" src="http://soundbible.com/mp3/Uuuuuu-Paula-1357936016.mp3" />
```

# 文档

上面的脚本为 keysound 元素赋予了特殊含义，以允许您在用户按下某个键时播放声音。这些是特殊属性。

*   `anycase`
    *   使键不区分大小写
*   `keys=...`
    *   将播放此声音的键
*   `regexp`
    *   使得每个键的 URL 可以以类似正则表达式的方式不同，如下所示：
    *   `${key}`在 URL 中将被每个选定键的纯文本表示形式替换
    *   `${code}`在 URL 中将被替换为每个选定键的基 10 ASCII 键代码表示
*   `src=...`
    *   确定音频文件的 URL。受 regexp 属性影响

有关这些示例，请参阅演示。

# database - 将数据添加到 *.sdf 文件

> ID：12578385
> 
> 赞同：1
> 
> 时间：2012-09-25T07:44:35.657
> 
> 标签：database, windows-phone-7, sql-server-ce

我已经为 Windows 创建了一个应用程序，我在其中使用手机的 sqlite 作为数据库来存储数据。第一次在模拟器中测试应用程序（即重新安装应用程序）时，数据库的数据每次都会被擦除。

任何人都可以告诉我如何：

1.  在重新安装应用程序之前保存数据库的现有数据。
2.  手动修改 .sdf 文件（不使用应用程序）
3.  以其他方式保存数据，不受重新安装应用程序的影响。

更多有关将数据添加到 .sdf 文件的方法的信息不胜感激......

编辑：安装应用程序时是否可以在手机中浏览和编辑 .sdf 文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:50:21.303

如果您通过模拟器运行应用程序，则每次关闭模拟器时，应用程序及其组件都会被卸载。为防止这种情况，请不要在每次运行应用程序时关闭模拟器。保持模拟器打开，然后运行程序。

安装应用程序后，手机中的数据不会从数据库中删除，而是保留下来。

可以使用 Visual Studio 中的服务器资源管理器修改 SDF，添加到 SQL CE 3.5 的数据库连接并指向您的 sdf。您可以从那里修改数据。

您还可以使用独立存储资源管理器打开 SDF。[http://wp7explorer.codeplex.com/](http://wp7explorer.codeplex.com/)

# sharepoint - Sharepoint Designer 不保存在 ItemStyle.xsl（XSL 样式库）中所做的更改

> ID：12578386
> 
> 赞同：0
> 
> 时间：2012-09-25T07:44:45.217
> 
> 标签：sharepoint, xslt, sharepoint-2010, sharepoint-designer

我可以更改和保存所有内容，但是当我打开包含我的 newList 中的内容查询 Web 部件显示项目的站点时，webPart 样式没有更新。事实上，它使用了旧的 ItemStyle 文件（我认为是这样），我已经覆盖了几次。我认为这是设计师 WebSiteCache 的一个常见问题，但已经尝试过了，但什么也没做。我也在一个主要版本中签入，仍然是一样的。有趣的是，我办公室的其他人都可以正确显示所有内容:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:42:30.770

SharePoint 默认设置为在浏览器端缓存 css 和 javascript。因此，要查看内容查询 webpart 中的更改，请尝试 Ctr+F5。可能会解决你的问题。

# silverlight - 从 Silverlight 中的 UIElement 中删除焦点

> ID：12578387
> 
> 赞同：2
> 
> 时间：2012-09-25T07:44:49.887
> 
> 标签：silverlight, textbox, focus, uielement

你知道吗，我怎样才能以`UIElemnent`编程方式消除焦点？`TextBox`情况是：当我按下回车键时，我需要从 中移除焦点。我知道如何处理按键。请帮助我从`UIElement`Silverlight 中移除焦点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:31:48.293

如果您想在点击 Enter 后删除 ，`Focus`您`TextBox`可以调用另一个您想要在之后聚焦的 Control的[Focus()方法。](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.focus%28v=vs.95%29.aspx)

我认为除了聚焦另一个控件之外别无选择，因为您无法完全移除焦点。

# iphone - 如何对 NSArray 元素执行空检查？

> ID：12578395
> 
> 赞同：0
> 
> 时间：2012-09-25T07:45:15.797
> 
> 标签：iphone, nsarray

我正在开发一个应用程序，我想在其中显示数组值

但如果有任何机会数组值为空，那么如何检查它，因为我没有

想要打印为 null 的值，因为它显示 (null) 作为值。

即使已经执行 [NSNULL null] 但它似乎不起作用..

请帮助，

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:52:25.520

试试下面的代码：

```
NSArray *array = [NSArray arrayWithObjects:@"one", [NSNull null], @"three", nil];
for (id obj in array) {
    if (obj != [NSNull null]) {
        NSLog(@"obj = %@", obj);
    }
} 
```

我得到：

2012-09-25 15:50:48.182 测试[4996:11303] obj = 一

2012-09-25 15:50:48.184 测试[4996:11303] obj = 三

# eclipse - 如何防止 Eclipse 格式化程序弄乱带有文本符号的注释？

> ID：12578398
> 
> 赞同：26
> 
> 时间：2012-09-25T07:45:21.523
> 
> 标签：eclipse, formatting, comments

我有（Java）评论，例如：

```
/* 
 * The quick brown fox jumped over the lazy dog.
 *
 *
 * Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.
 */ 
```

Eclipse 自动格式化程序正确设置了注释行宽，但使它：

```
/*
 * The quick brown fox jumped over the lazy dog.
 * 
 * 
 * Notes: - The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy
 * dog. The quick brown fox jumped over the lazy dog. - The second quick brown fox jumped over the
 * lazy dog. The quick brown jumped over the lazy dog. The quick brown fox jumped over the lazy dog.
 */ 
```

我如何让代码格式化程序保持原样保留项目符号列表，同时仍然处理评论？

**备注**：

*   我不想关闭加入评论的行，因为我确实希望我的评论行适合最大长度。因此，关闭线路连接、关闭 Javadoc 注释的格式设置或暂时暂停自动格式化，都不是可接受的解决方案。
*   [可能相关的问题](https://stackoverflow.com/a/4232688/1593077)。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-20T10:23:04.740

[这个答案](https://stackoverflow.com/a/5466173/652895)说你在开头之后添加了一个连字符`/*`，即：

```
/*- 
 * The quick brown fox jumped over the lazy dog.
 *
 *
 * Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.
 */ 
```

这对我也有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-25T07:54:13.360

您的问题的答案可能与此处相同：[如何关闭 Java 代码某些部分的 Eclipse 代码格式化程序？](https://stackoverflow.com/questions/1820908/how-to-turn-off-the-eclipse-code-formatter-for-certain-sections-of-java-code)

从 Eclipse 3.6 开始，您可以使用

```
// @formatter:off
...
// @formatter:on 
```

禁用代码格式的注释。

*更新*：

或者，您也可以更改 Preferences 中的注释设置：在 Java/Code Style/Formatter 中编辑 formatter 设置，并检查 Comments 页面的以下设置：

*   启用 Javadoc 格式（常规设置）
*   缩进 Javadoc 标记（Javadoc 设置）

顺便说一句，这种手动列表不会转换为生成代码中的列表。出于这个原因，使用 html 列表可能是有意义的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-09-24T08:37:42.440

我知道这个问题很老，但我也看到没有人给出满意的答案。

**这解决了我的问题。**

去`Preference->Java->Code Style->Formatter`。在这里，转到您正在使用的任何格式化程序样式的编辑。在编辑对话框中，您将找到一个复选框*启用块注释格式*。取消选中此项。像我一样更改个人资料名称。申请并确定。你完成了。

请参考下图。 [![在此处输入图像描述](../Images/97ed933cd9d4cc5741ec5cd3226cdfaa.png)](https://i.stack.imgur.com/8Gpm3.png)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-25T11:17:44.113

您可以更改 Eclipse 如何格式化注释并对块注释进行特殊处理。

进入窗口-> 首选项。Java > 代码风格 > 格式化程序。单击“新建”以创建新模板。然后在“评论”选项卡下禁用块评论格式。

但是，这永远不会对块注释执行任何格式化。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-23T15:49:36.883

拿起 Bananeweizen 所说的，您还可以用`<pre></pre>`标签包装相关的评论块，将每个选项卡和空格保留在它的位置：

```
/* 
 * The quick brown fox jumped over the lazy dog.
 *
 *
 *<pre>Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown
 *   jumped over the lazy dog. The quick brown fox jumped over the lazy
 *   dog.</pre>
 */ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-26T16:31:47.997

在 Java 中有两种不同的注释：

*   块注释：它们没有标准格式，因此被格式化为浮动文本。
*   [JavaDoc 注释](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format)：它们具有共同的结构，它们的格式取决于注释中使用的布局标签（如`<br>`或`<p>`）。

在 JavaDoc 中，您的示例可以如下编写（并且格式如下所示）：

```
/**
 * The quick brown fox jumped over the lazy dog.
 * 
 * <p>
 * Notes:
 * <ul>
 * <li>The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown
 * fox jumped over the lazy dog.</li>
 * <li>The second quick brown fox jumped over the lazy dog. The quick brown jumped over the lazy dog. The quick
 * brown fox jumped over the lazy dog.</li>
 * </ul>
 * </p>
 */ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-15T02:46:00.047

具体来说，您要设置：

```
org.eclipse.jdt.core.formatter.comment.format_block_comments=false 
```

这可以在 Eclipse 设置中的某处访问，对于 VS Code，在项目的根目录中，您需要一个 .settings 目录，其中包含包含该行的“org.eclipse.jdt.core.prefs”文件。该文件将包含 VS 代码利用的所有 Eclipse 设置。此设置同样适用于使用 Eclipse 设置的其他编辑器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-30T08:32:49.450

怎么样：

```
/**
 * The quick brown fox jumped over the lazy dog.
 *
 * <p>Notes:
 * <li>The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.</li>
 * <li>The second quick brown fox jumped over the lazy dog. The quick brown jumped over the lazy dog. The quick brown fox jumped over the lazy dog.</li>
 */ 
```

然后在 Windows -> Preferences -> Java -> Code Style -> Formatter -> Edit... -> Comments 中打开“Format HTML tags”

这仍然会导致线宽断线。

**编辑：**

我使用了以下块注释：

```
/*
 * The quick brown fox jumped over the lazy dog.
 *
 * Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.
 */ 
```

我正在为 Java EE 使用 Eclipse Neon.3，我的 Formatter cor 注释设置为 150 的宽度，并选择了“从不加入行”。格式化此块注释会给我以下结果，我认为这是您可能想要的（尽管我知道您不想“从不加入行”）。

```
/*
 * The quick brown fox jumped over the lazy dog.
 *
 * Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The
 * quick brown fox jumped over the lazy dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown jumped over the lazy dog. The quick brown fox jumped over the lazy dog.
 * The quick brown fox jumped over the lazy dog.
 */ 
```

只有1个小问题。当我在第一个项目符号列表中添加更多文本然后再次格式化时，我得到以下结果。

```
/*
 * The quick brown fox jumped over the lazy dog.
 *
 * Notes:
 * - The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. The
 * SOME MORE TEXT TO WRAP
 * quick brown fox jumped over the lazy dog.
 * - The second quick brown fox jumped over the lazy dog. The quick brown jumped over the lazy dog. The quick brown fox jumped over the lazy dog.
 * The quick brown fox jumped over the lazy dog.
 */ 
```

那是因为我告诉格式化程序“不要加入行”。当我取消选择“从不加入行”时，我显然会得到与您相同的结果。

# javascript - 当我使用javascript单击它时如何获取相应的标签值

> ID：12578400
> 
> 赞同：3
> 
> 时间：2012-09-25T07:45:24.800
> 
> 标签：javascript, html, jsp

当我单击它以使用javascript跟随jsp时如何获取相应的标签值

这是我的jsp页面。

```
<%
for( int i = 0; i < sam.groupName.length; i++ ) {%>
<a href='JavaScript:validation();'>
   <img src='registerButton.jpg'>
   <label for='groupsId' id='labeld"+i+"'><%=sam.groupName[i]%>" </label>
 </a>
<% } %>

<script type="text/javascript">

 function validation(){
   alert("script");
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:52:47.637

```
<a href='#' onclick='validation(this)'> 
```

（这会将`<a>`元素作为第一个参数传递给`validation()`）

进而

```
function validation(anchor) {
    alert(anchor.getElementsByTagName("label")[0].textContent);
} 
```

# cron - * * * * cron 格式的文件

> ID：12578402
> 
> 赞同：0
> 
> 时间：2012-09-25T07:45:33.453
> 
> 标签：cron

我知道： `cron Minute Hour Day_of_the_Month Month_of_the_Year Day_of_the_Week`。我发现我的一个文件将 cron 设置为`* * * *`. `* * * *`将调用设置为 cron 的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:48:08.073

crontab 文件的格式要求是五个 *。因此，您要么缺少开始，要么缺少数字（或更复杂的表达式，例如 1、3、5）。如果该行是：

```
* * * * * do something 
```

它会每分钟运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:16:24.283

通常，设置为 * * * * 的文件意味着事件每分钟运行一次。

# c++ - 如何使用 boost zlib 流数据进行压缩

> ID：12578403
> 
> 赞同：4
> 
> 时间：2012-09-25T07:45:35.740
> 
> 标签：c++, boost, zlib

我有一台服务器并在其上接收来自另一台服务器的数据。此数据必须使用 zlib 压缩并通过套接字发送到第三个服务器。第三台服务器使用 gzip 解压缩数据。

我使用这个功能。

```
std::string compressData(const std::string &data)
{
   using namespace boost::iostreams;
   using namespace std;
   using namespace boost::archive::iterators;

   stringstream zippedOutputStream;
   filtering_ostream filteringStream;
   filteringStream.push(gzip_compressor());
   filteringStream.push(zippedOutputStream);
   stringstream stringStream;
   stringStream << data;
   boost::iostreams::copy(stringStream, filteringStream);

   return zippedOutputStream.str();
} 
```

第三台服务器一次接收两个或多个片段。它尝试使用 gzip 解压缩数据，但结果只是第一部分。其他部分不见了。我应该如何更改 compressData 函数来解决这个问题。

# nlp - 在 google-diff-match-patch 中进行 diff 时如何忽略某些字符？

> ID：12578408
> 
> 赞同：5
> 
> 时间：2012-09-25T07:46:14.800
> 
> 标签：nlp, diff, text-processing

我正在使用[google-diff-match-patch](https://code.google.com/p/google-diff-match-patch/)来比较自然语言中的纯文本。

如何让 google-diff-match-patch 忽略某些字符？（一些我不在乎的微小差异。）

例如，给定 text1：

```
give me a cup of bean-milk. Thanks. 
```

和文本2：

```
please give mom a cup of bean milk!  Thank you. 
```

（请注意，“谢谢”之前有两个空格字符。）

google-diff-match-patch 输出如下内容：

```
[please] give m(e)[om] a cup of bean(-)[ ]milk(.)[!] Thank(s)[ you]. 
```

似乎 google-diff-match-patch 只忽略不同数量的空格。

我怎样才能告诉 google-diff-match-patch 也忽略像这样的字符`[-.!]`？

预期的结果是

```
[please] give m(e)[om] a cup of bean-milk. Thank(s)[ you]. 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:22:45.553

google-diff-match-patch 可以输出元组列表

第一个元素指定它是插入 (1)、删除 (-1) 还是相等 (0)。第二个元素指定受影响的文本。

例如：

```
diff_main("Good dog", "Bad dog") => [(-1, "Goo"), (1, "Ba"), (0, "d dog")] 
```

因此我们只需要过滤这个列表。

Python中的示例代码：

```
Ignored_marks = re.compile('[ ,\.;:!\'"?-]+$')

def unmark_minor_diffs(diffs): #diffs are list of tuples produced by google-diff-match-patch

  cooked_diffs = []
  for (op, data) in diffs: 
  if not Ignored_marks.match(data):
    cooked_diffs.append((op, data))
  else:
    if op in (0, -1):
      cooked_diffs.append((0, data))
  return cooked_diffs 
```

# .net - 如何在 WCF 中启用带有 SSL wsHttpBinding 的会话

> ID：12578409
> 
> 赞同：13
> 
> 时间：2012-09-25T07:46:17.047
> 
> 标签：.net, wcf, session, ssl, https

我有一个启用了 wsHttpBindings 和 SSL 的 WCF 服务，但我想启用 WCF 会话。

将 SessionMode 更改为 required 后

```
SessionMode:=SessionMode.Required 
```

 我收到下面描述的错误。 

> 合同需要 Session，但 Binding 'WSHttpBinding' 不支持它或未正确配置以支持它。

这是我的示例应用程序。

**应用程序配置**

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>

      <system.web>
        <compilation debug="true" />
      </system.web>
      <!-- When deploying the service library project, the content of the config file must be added to the host's 
      app.config file. System.Configuration does not support config files for libraries. -->
      <system.serviceModel>

        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
        <client />
        <bindings>
          <wsHttpBinding>
            <binding name="NewBinding0" useDefaultWebProxy="false" allowCookies="true">
              <readerQuotas maxStringContentLength="10240" />
              <!--reliableSession enabled="true" /-->
              <security mode="Transport">
                <transport clientCredentialType="None" proxyCredentialType="None" >
                  <extendedProtectionPolicy policyEnforcement="Never" />
                </transport >
              </security>
            </binding>
          </wsHttpBinding>
        </bindings>
        <services>
          <service name="WcfServiceLib.TestService">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="NewBinding0"
              contract="WcfServiceLib.ITestService">
              <identity>
                <servicePrincipalName value="Local Network" />
              </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
            <host>
              <baseAddresses>
                <add baseAddress="https://test/TestService.svc" />
              </baseAddresses>
            </host>
          </service>
        </services>

        <behaviors>
          <serviceBehaviors>
            <behavior>
              <!-- To avoid disclosing metadata information, 
              set the value below to false and remove the metadata endpoint above before deployment -->
              <serviceMetadata httpsGetEnabled="True"/>
              <!-- To receive exception details in faults for debugging purposes, 
              set the value below to true.  Set to false before deployment 
              to avoid disclosing exception information -->
              <serviceDebug includeExceptionDetailInFaults="False" />
            </behavior>
          </serviceBehaviors>
        </behaviors>
      </system.serviceModel>

    </configuration> 
```

**ITestService.vb**

```
 <ServiceContract(SessionMode:=SessionMode.Required)>
    Public Interface ITestService

        <OperationContract(IsInitiating:=True, IsTerminating:=False)> _
        Function GetData(ByVal value As Integer) As String

    End Interface 
```

**测试服务.vb**

```
 <ServiceBehavior(InstanceContextMode:=InstanceContextMode.PerSession, _ 
    ReleaseServiceInstanceOnTransactionComplete:=False, _ 
    ConcurrencyMode:=ConcurrencyMode.Single)>
        Public Class TestService
            Implements ITestService

            Private _user As User

            <OperationBehavior(TransactionScopeRequired:=True)>
            Public Function GetData(ByVal value As Integer) As String _
 Implements ITestService.GetData

                If _user Is Nothing Then

                    _user = New User()
                    _user.userName = "User_" & value
                    _user.userPassword = "Pass_" & value

                    Return String.Format("You've entered: {0} , Username = {1} , Password = {2} ", _
                                         value, _user.userName, _user.userPassword)
                Else
                    Return String.Format("Username = {1} , Password = {2} ", _
                                    _user.userName, _user.userPassword)
                End If

            End Function

        End Class 
```

我尝试了所有可能的解决方案，我可以找到，但没有任何帮助。

一些启用*可靠会话*的建议，但它不适用于**ssl**（如果只有您有自定义绑定），其他建议使用**http**而不是**https**，但如果可能的话，我想使用我当前的配置启用 Sessions .

有什么方法可以实现这一目标吗？

非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T10:42:40.047

如果您想使用 wsHttpBinding 进行“会话”，则必须使用可靠消息传递或安全会话。（来源：[如何使用 wsHttpBidning 和 Transport only Security 启用 WCF 会话](https://stackoverflow.com/questions/2650738/how-to-enable-wcf-session-with-wshttpbidning-with-transport-only-security)）。

WSHttpBinding 支持会话，但前提是启用了安全性 (SecureConversation) 或可靠消息传递。如果您使用传输安全性，那么它不使用 WS-SecureConversation 并且默认情况下 WS-ReliableMessaging 处于关闭状态。因此 WSHttpBinding 用于会话的两种协议不可用。您要么需要使用消息安全性，要么需要打开可靠会话。（来源：[http](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/57b3453e-e7e8-4875-ba23-3be4fff080ea/) ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/57b3453e-e7e8-4875-ba23-3be4fff080ea/ ）。

我们在标准绑定中不允许 RM over Https，因为保护 RM 会话的方法是使用安全会话，而 Https 不提供会话。

我在这里找到了关于它的 msdn 简介：http: [//msdn2.microsoft.com/en-us/library/ms733136.aspx](http://msdn2.microsoft.com/en-us/library/ms733136.aspx) 简介是“唯一的例外是使用 HTTPS 时。SSL 会话未绑定到可靠会话。这造成了威胁，因为共享安全上下文（SSL 会话）的会话彼此之间没有受到保护；这可能是也可能不是真正的威胁，具体取决于应用程序。”</p>

但是，如果您确定没有威胁，您可以这样做。通过自定义绑定有一个 RM over HTTPS 示例[http://msdn2.microsoft.com/en-us/library/ms735116.aspx](http://msdn2.microsoft.com/en-us/library/ms735116.aspx)（来源：[http ://social.msdn.microsoft.com/forums/en-US/ wcf/thread/fb4e5e31-e9b0-4c24-856d-1c464bd0039c/](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/fb4e5e31-e9b0-4c24-856d-1c464bd0039c/)）。

总结您的可能性，您可以：

1 - 保留 wsHttpBinding，删除传输安全性并启用可靠消息传递

```
 <wsHttpBinding>
    <binding name="bindingConfig">
      <reliableSession enabled="true" />
      <security mode="None"/>
    </binding>
  </wsHttpBinding> 
```

但是你失去了 SSL 层，然后是你的安全性的一部分。

2 - 保留 wsHttpBinding，保持传输安全并添加消息认证

```
 <wsHttpBinding>
    <binding name="bindingConfig">
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding> 
```

您可以保留 SSL 安全层，但您的客户端必须提供凭据（任何形式），即使您不在服务端验证它们，仍然必须提供假的，因为 WCF 将拒绝任何未指定凭据的消息.

3 - 使用具有可靠消息传递和 HTTPS 传输的自定义绑定

```
 <customBinding>
    <binding name="bindingConfig">
      <reliableSession/>
      <httpsTransport/>
    </binding>
  </customBinding> 
```

除了 MSDN 中解释的威胁外，我看不出有任何不利之处，这取决于您的应用程序。

4 - 使用其他会话提供程序如果您的应用程序在 IIS 中热，您可以设置

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
```

并取决于

```
HttpContext.Current.Session 
```

为你的州。

或实施您自己的 cookie。

PS：请注意，对于所有这些 WCF 配置，我只测试了服务激活，而不是调用。

编辑：根据用户请求，`wsHttpBinding`使用`TransportWithMessageCredential`安全模式实现会话（我对 VB.NET 不太熟悉，所以请原谅我的语法）：

服务代码片段：

```
<ServiceContract(SessionMode:=SessionMode.Required)>
Public Interface IService1

    <OperationContract()> _
    Sub SetSessionValue(ByVal value As Integer)

    <OperationContract()> _
    Function GetSessionValue() As Nullable(Of Integer)

End Interface

<ServiceBehavior(InstanceContextMode:=InstanceContextMode.PerSession, 
    ConcurrencyMode:=ConcurrencyMode.Single)>
Public Class Service1
    Implements IService1

    Private _sessionValue As Nullable(Of Integer)

    Public Sub SetSessionValue(ByVal value As Integer) Implements IService1.SetSessionValue
        _sessionValue = value
    End Sub

    Public Function GetSessionValue() As Nullable(Of Integer) Implements IService1.GetSessionValue
        Return _sessionValue
    End Function
End Class

Public Class MyUserNamePasswordValidator
    Inherits System.IdentityModel.Selectors.UserNamePasswordValidator

    Public Overrides Sub Validate(userName As String, password As String)
        ' Credential validation logic
        Return ' Accept anything
    End Sub

End Class 
```

服务配置片段：

```
<system.serviceModel>
  <services>
    <service name="WcfService1.Service1" behaviorConfiguration="WcfService1.Service1Behavior">
      <endpoint address="" binding="wsHttpBinding" contract="WcfService1.IService1" bindingConfiguration="bindingConf"/>
      <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    </service>
  </services>
  <bindings>
    <wsHttpBinding>
      <binding name="bindingConf">
        <security mode="TransportWithMessageCredential">
          <message clientCredentialType="UserName"/>
        </security>
      </binding>
    </wsHttpBinding>
  </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior name="WcfService1.Service1Behavior">
        <serviceMetadata httpsGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false"/>
        <serviceCredentials>
          <userNameAuthentication 
            userNamePasswordValidationMode="Custom"
            customUserNamePasswordValidatorType="WcfService1.MyUserNamePasswordValidator, WcfService1"/>
        </serviceCredentials>
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

客户端测试代码片段：

```
Imports System.Threading.Tasks

Module Module1

    Sub Main()
        Parallel.For(0, 10, Sub(i) Test(i))
        Console.ReadLine()
    End Sub

    Sub Test(ByVal i As Integer)
        Dim client As ServiceReference1.Service1Client
        client = New ServiceReference1.Service1Client()
        client.ClientCredentials.UserName.UserName = "login"
        client.ClientCredentials.UserName.Password = "password"
        Console.WriteLine("Session N° {0} : Value set to {0}", i)
        client.SetSessionValue(i)
        Dim response As Nullable(Of Integer)
        response = client.GetSessionValue()
        Console.WriteLine("Session N° {0} : Value returned : {0}", response)
        client.Close()
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:23:17.770

默认情况下，WSHttpBinding 只允许安全会话。它是 WCF 的一个概念，与 Transport 无关。安全会话不是基于 https 的会话，而是具有相互身份验证的会话。这是通过增加消息安全性来实现的。

根据您的服务，您应该应用此配置

```
 <bindings>
      <wsHttpBinding>
        <binding name="wsHttpBindingConfig">
          <security mode="TransportWithMessageCredential">
            <!-- configure transport & message security here if needed-->
          </security>
        </binding>
      </wsHttpBinding>
    </bindings> 
```

在客户端，这是一个简单的单元测试

```
[TestMethod]
    public void TestSecuritySession()
    {
        //remove this is certificate is valid
        ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback((sender, certificate, chain, sslPolicyErrors) => { return true; });

        var binding = new WSHttpBinding();
        binding.Security = new WSHttpSecurity() { Mode = SecurityMode.TransportWithMessageCredential};
        ChannelFactory<ITestService> Factory = new ChannelFactory<ITestService>(binding, new EndpointAddress("https://localhost/TestService.svc"));

        Factory.Open();
        var channel = Factory.CreateChannel();

        //call service here

        (channel as IClientChannel).Close();

        Factory.Close();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:55:48.360

wsHttpBinding 需要reliableSession 来支持WCF 会话，而可靠会话需要自定义绑定来支持ssl。因此，据我所知，通过 ssl 和 wsHttpBinding 请求 WCF 会话似乎是不可能的。

# c++ - SDL 3d OpenGL：立方体上的纹理产生空白屏幕

> ID：12578410
> 
> 赞同：2
> 
> 时间：2012-09-25T07:46:25.533
> 
> 标签：c++, opengl, sdl, textures

我一直在尝试使用 SDL_image 和 OpenGL 将纹理加载到立方体上。由于某种原因，当我尝试使用纹理时，整个窗口都保持空白。通过注释掉我的纹理初始化调用，窗口将按应有的方式呈现，除了白色纹理。当我对 glEnable(GL_TEXTURE_2D) 的调用被注释掉时，这同样适用。我已经尝试了几个小时来解决这个问题，并且大部分人都在网上寻找是否有人提出了解决方案，但我没有尝试过任何工作。我只在下面发布了我的代码部分，如果需要更多，请告诉我。

OpenGL 初始化（glEnable(GL_TEXTURE_2D) 的顺序可能不正确）：

```
//Configures OpenGL for 3d rendering
//Needs to know the window height and width
void setUpOpenGL(int width, int height)
{
//Enable depth testing, necessary for 3d worlds
glEnable(GL_DEPTH_TEST);
glEnable(GL_TEXTURE_2D);

//Set the background colour to black
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
//Set the clear depth at 1m?
glClearDepth(1.0f);

//Configure the viewport, giving height and width
glViewport(0, 0, width, height);

//Clear the colour buffer
glClear(GL_COLOR_BUFFER_BIT);

//Initiate OpenGL for projection drawing
glMatrixMode(GL_PROJECTION);
//Load identity, purpose still unknown
glLoadIdentity();

//Initiate viewport as perspective, give the field of view, aspect ratio (width/height), minimum distance and maximum distance
gluPerspective(45.0f, (float)width / (float)height, 0.01f, 500.0f);

//Initiate OpenGL for model drawing, preparation for frame rendering
glMatrixMode(GL_MODELVIEW);
//Load identity again (identity matrix?)
glLoadIdentity();

//Set the shading model to smooth.  Other options feasable, but don't look as good
glShadeModel(GL_SMOOTH);
//For whatever reason, we need to state how to calculate depth.  Grouped under "Alpha Function"
glDepthFunc(GL_LEQUAL);

//Calculate perspective as "nicest"; "don't care" and "fastest" are other options
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

//Finished configuring OpenGL
return;
} 
```

这是我的 loadTexture 函数（errorCode 在整个函数中保持为 0，并且没有任何内容打印到 stderr）：

```
//Function to load textures from file.  Needs to know the filename / relative location.
//Load textures from file
int loadTexture(char *filename)
{
GLuint returnValue = -1;
SDL_Surface *image;
void *raw;
int width, height, bpp;
Uint8 *srcPixel, *dstPixel;
Uint32 truePixel;
GLenum errorCode;

image = IMG_Load(filename);

if(!image)
{
    fprintf(stderr, "Warning: Error loading image %s: %s\n", filename, IMG_GetError());
    return -2;
}

if(image->format->BytesPerPixel < 2)
{
    fprintf(stderr, "Warning: %s is a bad image, not true colour\n", filename);
    return -3;
}

width = image->w;
height = image->h;

raw = (void *)malloc(width * height * 4);
dstPixel = (Uint8 *)raw;

SDL_LockSurface(image);

bpp = image->format->BytesPerPixel;

for(int i = height - 1; i >= 0; i--)
{
    for(int j = 0; j < width; j++)
    {
        srcPixel = (Uint8 *)image->pixels + i * image->pitch + j * bpp;

        switch(bpp)
        {
        case 1:
            truePixel = *srcPixel;
            break;
        case 2:
            truePixel = *(Uint16 *)srcPixel;
            break;
        case 3:
            if(SDL_BYTEORDER == SDL_BIG_ENDIAN)
                truePixel = srcPixel[0] << 16 | srcPixel[1] << 8 | srcPixel[2];
            else
                truePixel = srcPixel[0] | srcPixel[1] << 8 | srcPixel[2] << 16;
            break;
        case 4:
            truePixel = *(Uint32 *)srcPixel;
            break;
        default:
            fprintf(stderr, "Warning: image BPP of %d in image %s unuseable\n", bpp, filename);
            SDL_UnlockSurface(image);
            SDL_FreeSurface(image);
            free(raw);
            return -4;
        }

        SDL_GetRGBA(truePixel, image->format, &(dstPixel[0]), &(dstPixel[1]), &(dstPixel[2]), &(dstPixel[3]));
        dstPixel++;
        dstPixel++;
        dstPixel++;
        dstPixel++;
    }
}

SDL_UnlockSurface(image);
SDL_FreeSurface(image);

while(glGetError());

glGenTextures(1, &returnValue);
glBindTexture(GL_TEXTURE_2D, returnValue);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR/*_MIPMAP_LINEAR*/);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
//glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE);

glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

glTexImage2D(GL_TEXTURE_2D, 0, 4, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, (Uint8 *)raw);

errorCode = glGetError();
if(errorCode)
{
    if(errorCode == GL_OUT_OF_MEMORY)
        fprintf(stderr, "Warning: Texture memory full while binding texture from image %s\n", filename);
    else
        fprintf(stderr, "OpenGL error while creating texture: %d", (int)errorCode);

    glDeleteTextures(1, &returnValue);
    free(raw);
    return -5;
}

//gluBuild2DMipmaps(GL_TEXTURE_2D, 4, width, height, GL_RGBA, GL_UNSIGNED_BYTE, (Uint8 *)raw);

errorCode = glGetError();
if(errorCode)
{
    if(errorCode == GL_OUT_OF_MEMORY)
        fprintf(stderr, "Warning: Texture memory full while building texture from image %s\n", filename);
    else
        fprintf(stderr, "OpenGL error while creating texture: %s", (int)errorCode);

    glDeleteTextures(1, &returnValue);
    free(raw);
    return -6;
}

return returnValue;
} 
```

最后，我的实际渲染代码。请注意，loadTexture 函数的返回值被复制到纹理数组的所有元素中（右、左、上、下、前、后（枚举））。

```
void cube::render(void)
{
float xMinOffset, xMaxOffset, yMinOffset, yMaxOffset, zMinOffset, zMaxOffset;
//getoffset(xMinOffset, xMaxOffset, yMinOffset, yMaxOffset, zMinOffset, zMaxOffset);

xMinOffset = yMinOffset = zMinOffset = 0.0f;
xMaxOffset = yMaxOffset = zMaxOffset = 1.0f;

//Positive x, or right
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(1.0f, 0.0f, 0.0f);
    glBindTexture(GL_TEXTURE_2D, texture[right]);

    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMinOffset);
    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMaxOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMinOffset);
}
glEnd();

//Negative x, or left
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(-1.0f, 0.0f, 0.0f);
    glBindTexture(GL_TEXTURE_2D, texture[left]);

    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMinOffset, yMinOffset, zMinOffset);
    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMinOffset, yMinOffset, zMaxOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMinOffset);
}
glEnd();

//Positive y, or top
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(0.0f, 1.0f, 0.0f);
    glBindTexture(GL_TEXTURE_2D, texture[top]);

    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMinOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMinOffset);
}
glEnd();

//Negative y, or bottom
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(0.0f, -1.0f, 0.0f);
    glBindTexture(GL_TEXTURE_2D, texture[bottom]);

    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMinOffset, yMinOffset, zMinOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMinOffset, yMinOffset, zMaxOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMaxOffset);
    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMinOffset);
}
glEnd();

//Positive z, or front
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(0.0f, 0.0f, 1.0f);
    glBindTexture(GL_TEXTURE_2D, texture[front]);

    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMinOffset, yMinOffset, zMaxOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMaxOffset);
    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMaxOffset);
}
glEnd();

//Negative z, or back
glBegin(GL_QUADS);
{
    glColor3f(1.0f, 1.0f, 1.0f);
    glNormal3f(0.0f, 0.0f, -1.0f);
    glBindTexture(GL_TEXTURE_2D, texture[back]);

    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(xMinOffset, yMinOffset, zMinOffset);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(xMinOffset, yMaxOffset, zMinOffset);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(xMaxOffset, yMaxOffset, zMinOffset);
    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(xMaxOffset, yMinOffset, zMinOffset);
}
glEnd();
} 
```

这里是渲染函数，以及其他一些与绘图相关的函数。请注意，initDisplayLists() 在初始化时被调用。

```
void redraw(void)
{
//Still has the data from the previous frame
//Clear the colour and depth buffers before rendering
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
//Load identity, purpose unknown
glLoadIdentity();

//Draw horizontal crosshair
glBegin(GL_LINES);
{
    //White colour
    glColor3f(1.0f, 1.0f, 1.0f);
    //x, y, z
    //Vertex2f would be ideal, but doesn't appear (min view distance for perspective?)
    glVertex3f(-0.0001f, 0.0f, -0.01f);
    glVertex3f(0.0001f, 0.0f, -0.01f);
}
glEnd();
//Draw vertical crosshair
glBegin(GL_LINES);
{
    //Also white
    glColor3f(1.0f, 1.0f, 1.0f);
    //Again: x, y, z
    glVertex3f(0.0f, -0.0001f, -0.01f);
    glVertex3f(0.0f, 0.0001f, -0.01f);
}
glEnd();

//Rotate on the x axis (pitch)
glRotatef(se::pl0.rX, 1.0f, 0.0f, 0.0f);
//Rotate viewport on the y axis (yaw)
glRotatef(se::pl0.rY, 0.0f, 1.0f, 0.0f);
//Translate the world by the negative of our coordinates
//Camera one way = objects the other...
glTranslatef(-se::pl0.x, -se::pl0.y, -se::pl0.z);

glCallList(1);

//Show the screen we have been calculating, preparing the screen we were showing for drawing
SDL_GL_SwapBuffers();
return;
}

void initDisplayLists(void)
{
glGenLists(1);

cube block = cube();

glNewList(1, GL_COMPILE);
{
    block.render();
}
glEndList();

return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:28:41.200

你可能应该加强你的错误检查（你不经常这样做）。

一方面，调用块是非法`glBindTexture`的`glBegin/glEnd`（它需要在 glBegin 之前进行）。修复这些非法调用，在渲染循环中添加一些额外的错误检查，看看是否能解决您的问题。

另外，不要这样做： `while(glGetError());`

如果您有错误，您至少应该抛出异常或记录它们，仅仅丢弃任何未解决的 OpenGL 错误并不是很聪明。一般来说，他们试图告诉你一些重要的事情。

# primefaces - 属性不起作用

> ID：12578411
> 
> 赞同：1
> 
> 时间：2012-09-25T07:46:28.847
> 
> 标签：primefaces

我正在使用以下代码生成素面 3 中的数据

```
<p:panelGrid id="table1">
    <p:row id="row1">
        <p:column id="column1">Column 1</p:column>
        <p:column id="column2">Column 2</p:column>
    </p:row>
</p:panelGrid> 
```

出现在 FF 中的结果表如下（取自浏览器的视图源）

```
<table role="grid" class="ui-panelgrid ui-widget" id="myform:table1">
<tbody>
    <tr role="row" class="ui-widget-content">
        <td role="gridcell">Column 1</td>
        <td role="gridcell">Column 2</td>
</tr>
</tbody>
</table> 
```

这里的属性 ID 仅适用于面板网格，它如何适用于行或列。标签文档还说它们支持 ID。请指导我在哪里犯错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:29:28.417

不确定，但是...

我认为如果你使用

```
<f:facet name="header">
    <h:outputText value="someText"/>
</f:facet> 
```

在您的列中，然后`id`将应用于您生成的`th`

一种解决方法可能是将 a 设置`styleclass`为您的`p:column`，这样它应该应用于您生成的`td`

上面所说的带有 jquery 选择器的内容应该足以访问表中的所有 td ......

同样，我想可能有更好的解决方案......

# java - 带类键的弱哈希映射

> ID：12578413
> 
> 赞同：5
> 
> 时间：2012-09-25T07:46:33.990
> 
> 标签：java, class, map

是否值得在用于缓存的弱哈希映射（WeakHashMap）中使用 Class 作为键？众所周知，类对象在程序启动时创建，并在程序结束时销毁。那么，这样做有什么意义还是我对此有一些误解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:48:26.030

当类加载器加载它时，加载一个类。如果 ClassLoader 被卸载，那么它的类也会被卸载。一个 ClassLoader 不能被卸载，直到它的所有类都可以被清理，所以如果你想卸载一个类加载器，使用一个 Weak 类集合是一个非常好的主意。

在一个简单的 Java Se 程序中，您可能有两个或三个类加载器，它们为您提供并在程序的整个生命周期中存在，您永远不需要考虑它们。

但是，如果您有像 Java EE 或 OSGi 这样的容器，它们可以在其自己的类加载器中加载每个应用程序或每个模块，从而允许即时安装、升级或删除它们（无需重新启动 JVM）

# image - 显示和打印图标的最佳图像格式

> ID：12578419
> 
> 赞同：3
> 
> 时间：2012-09-25T07:47:07.467
> 
> 标签：image, image-formats

我写的文字既要显示在屏幕上，又要打印成书。文本包含小图标，在屏幕上为 20x20 像素，但为了使其在打印中看起来更好，我使用 100x100 JPG 图像，缩放比例为 20%。尽管如此，在屏幕上它看起来并不是很好。是否有另一种图像格式可以在此设置中产生更好的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:51:29.710

如果您可以访问可以创建它的程序（例如 Linux 上的 Inkscape 或 Adob​​e Illustrator在 Windows 或 Mac 上）。

最好还是谨慎行事，并通过使图标也比必要的大，例如 200x200 来保证图标的未来性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:51:49.447

也许您应该尝试打印矢量图像。无论您是在 A6 还是 A1 上打印，质量都保持不变，因为整个图像是由计算而不是像素组成的。

无论如何，我建议你应该阅读这篇关于图像质量的文章：[http ://www.actionprintinginc.com/support12.php](http://www.actionprintinginc.com/support12.php)

让我知道它是否对您有帮助

# sparql - sparql 使用 wikiPageRedirects

> ID：12578427
> 
> 赞同：4
> 
> 时间：2012-09-25T07:47:48.860
> 
> 标签：sparql, dbpedia

我正在使用 sparql 来查找实体的位置。我有来自 dbpedia-spootlight 的 url，想为它们找到位置。所以我使用的查询是：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> 
PREFIX dbo: <http://dbpedia.org/ontology/> 
SELECT DISTINCT * 
WHERE { ?uri rdfs:label ?label . 
OPTIONAL { ?uri geo:lat ?lat . ?uri geo:long ?long } . 
OPTIONAL { ?uri dbpedia-owl:country ?dbpediaContry . ?dbpediaContry dbpprop:cctld ?ccTLD } . 
FILTER (?uri = <URL>  && lang(?label) = "en" ) } 
```

在我得到这个网址之前很好：http: [//dbpedia.org/resource/Valencia,_Spain](http://dbpedia.org/resource/Valencia,_Spain)。它有 wikiPageRedirects 到[http://dbpedia.org/resource/Valencia](http://dbpedia.org/resource/Valencia)，没有其他数据。我迷失了如何构建查询以检查带有重定向的案例。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:17:22.573

尝试更改查询的第一部分以使用`UNION`例如

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> 
PREFIX dbo: <http://dbpedia.org/ontology/> 
PREFIX dbp: <http://dbpedia.org/property/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT DISTINCT * 
WHERE
{ 
  { 
    ?uri rdfs:label ?label . 
  } 
  UNION 
  { 
    [] dbo:wikiPageRedirects ?uri .
    ?uri rdfs:label ?label .
  }
  OPTIONAL 
  { 
    ?uri geo:lat ?lat ;
         geo:long ?long 
  }
  OPTIONAL 
  {
    ?uri dbo:country ?dbpediaContry . 
    ?dbpediaContry dbp:cctld ?ccTLD 
  }
  FILTER (SAMETERM(?uri, <URL>)  && lang(?label) = "en" ) 
} 
```

这`UNION`允许您在应用其余查询之前通过重定向找到具有 URI 和具有 URI 的事物。请注意，我还更改了您`FILTER`的使用`SAMETERM()`，这应该会使查询更快。

一般来说，如果你有这种查询，你正在做那种 a`FILTER`来设置一个常量，我强烈建议只用而不是替换`?uri`变量的所有使用，`<URL>`这应该会看到更好的性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:53:23.540

嗯，我找到了解决方案，但我认为它并不完美。我添加了额外的列：

```
...
OPTIONAL { ?uri  dbpedia-owl:wikiPageRedirects ?red } .
OPTIONAL { ?red geo:lat ?rlat . ?red geo:long ?rlong } 
... 
```

但现在我还有 2 列要检查响应。

我尝试的另一种方法是：

```
...
OPTIONAL { ?uri  dbpedia-owl:wikiPageRedirects ?red } .
{?uri geo:lat ?lat . ?uri geo:long ?long}  UNION  { ?red geo:lat ?lat . ?red geo:long ?long }
... 
```

但是如果实体没有 geo:long & geo:lat 我有任何答案

那么，有人知道更好的解决方案吗？

# jquery - 带有移动文本的上滑框

> ID：12578428
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:48:04.850
> 
> 标签：jquery, text, slide

我正在寻找一个可以做类似事情的 jQuery 函数

![在此处输入图像描述](../Images/7bfd2b64feb7508c231e14f8e67ff9e8.png)

我实际上知道如何实现幻灯片本身，但不知道可以打开屏幕截图中显示的框的功能。

单击箭头字段后，箭头左侧显示的文本应向上滑动，变为粗体，并且一些其他内容应出现在现在可用的可用空间中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:23:48.713

这就是我现在能够创建的：

```
<html>
<head>
    <title>jQuery Animate Test</title>
    <style>
    .animatebox { width: 960px; margin: auto; height: 50px; background: grey; position: absolute; bottom: 250;}
    .hiddenstuff { opacity: 0; } 
    </style>
    <script src="jquery-1.8.2.js"></script>

</head>
<body>

<h1>Animate Test</h1>
<button id="animateUP">AnimateUP()</button><button id="animateDOWN">AnimateDOWN()</button>
<div class="animatebox">
<p>Lala Box</p>
<p class="hiddenstuff">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmo</p>
</div>

<script>

$("#animateUP").click(function () {
    $('.animatebox').animate ({
        height: '400px'
    }, 200 );

});

$("#animateUP").click(function () {
    $('.hiddenstuff').animate ({
        opacity: '1'
    }, 200 );
});

$("#animateDOWN").click(function () {
    $('.animatebox').animate ({
        height: '50px'
    }, 200 );

});

$("#animateDOWN").click(function () {
    $('.hiddenstuff').animate ({
        opacity: '0'
    }, 200 );
});

</script>

</body>
</html> 
```

这正是我所需要的，我对此感到有点自豪:) 我想做的下一件事是优化我的代码，因为我认为这不是实现类似事情的最佳方式:)

我必须做些什么来组合我的功能，例如：

```
$("#animateUP").click(function () {
    $('.animatebox').animate ({
        height: '400px'
    }, 200 );

});

$("#animateUP").click(function () {
    $('.hiddenstuff').animate ({
        opacity: '1'
    }, 200 );
}); 
```

对不起，我的英语不好 ：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:53:34.747

您可以将 animate() 函数与单击事件一起使用：

```
$('#arrow').click(function(){
     $('div.slidearea').animate({'height':'100px'}); // or how you want it
     $('#thing_to_hide').hide();
     $('thing_to_show').show();
     $('thing_to_get_fat').css({'font-weight':'700'});
}); 
```

当然，您需要将点击处理程序添加到每个幻灯片容器，也许使用 each() 函数......

# eclipse-rcp - 我们在 Eclipse RCP 中有 treegrid 吗？

> ID：12578434
> 
> 赞同：0
> 
> 时间：2012-09-25T07:48:19.763
> 
> 标签：eclipse-rcp, rcp

我想要 RCP 中的 TreeGrid 类组件或 TreeTable 组件的任何替代品？由于 TreeTable 已被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:45:39.003

看看[星云](http://www.eclipse.org/nebula/)小部件。Grid 小部件可能适合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:48:23.390

您可以将 TreeColumn 项添加到标准 SWT Tree 组件以提供多个列。那应该给你你想要的。

# sql - LEFT JOIN 不适用于计数

> ID：12578436
> 
> 赞同：2
> 
> 时间：2012-09-25T07:48:32.913
> 
> 标签：sql, count, group-by, ms-access-2007, left-join

我的查询有问题：

```
SELECT table1.Name,
       COUNT(*)  
FROM table1
LEFT JOIN table2 ON table2.Name_all = table1.Name
GROUP BY table1.Name 
```

它显示并计算 table1 中的名称。我想加入 table2 中不存在于 table1 中的所有名称。

也许有人知道我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:11:45.397

根据您的描述，您似乎是这个意思，这是一个与 table1 名称不匹配的 name_all 列表。

```
SELECT table2.Name_all
FROM table2
LEFT JOIN table1 ON table2.Name_all = table1.Name
WHERE table1.Name Is Null 
```

如果你也需要计数，你可以说：

```
SELECT table2.Name_all, Count(table2.Name_all) AS CountOf
FROM table2 
LEFT JOIN table1 ON table2.Name_all= table1.Name
WHERE table1.Name Is Null
GROUP BY table2.Name_all; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:54:55.510

试试这个

此查询将从表 1 和表 2 中获取通用名称。它还将从表 2 中获取表 1 中不存在的名称。

```
SELECT table1.Name,
       table2.Name,
       COUNT(*)  
FROM table2  
LEFT JOIN table1 
    ON table2.Name_all = table1.Name
GROUP BY table1.Name, table2.Name 
```

如果这行得通，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:07:23.153

我会做一个简单的`in`检查

```
SELECT table1.Name,
FROM table1
WHERE table1.Name In (SELECT table2.Name_all FROM table2)
GROUP BY table1.Name 
```

还有其他方法，但没有更多信息，这是一种简单的方法

# java - 在运行时更改应用程序的类？

> ID：12578438
> 
> 赞同：3
> 
> 时间：2012-09-25T07:48:36.063
> 
> 标签：java, jboss, classloader, application-server

我想在应用程序服务器上的应用程序处于活动状态时更改类。我正在使用 JBoss 5 和 JBoss 7。

*   我们可以在运行时更改类吗？
*   否则，我会取消部署并重新部署吗？
*   我需要在 JBoss 中配置什么？
*   哪个应用程序服务器支持该功能？
*   要获得此功能将需要编写自定义`ClassLoader`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:16:11.363

*   我们可以在运行时更改类吗？实际上，您可以卸载旧类并加载新类。

*   否则，我会取消部署并重新部署吗？您可以动态地执行此操作，而无需重新部署。但是，您可能知道 JBoss 和当今大多数应用程序服务器都支持热部署，这可能是您想要的：A_Quick_Tour-Hot-deployment_of_services_in_JBoss.html">https://access.redhat.com/knowledge/docs/en- US/JBoss_Enterprise_Web_Platform/5/html/Getting_Started_Guide/The_JBoss_Server_A_Quick_Tour-Hot-deployment_of_services_in_JBoss.html 但是请注意，部署方式与“更改课程”有很大不同。不仅如此，请阅读文档或写一个新问题，如果就是这样。

*   我需要在 JBoss 中配置什么？没什么，你应该在你的代码中做到这一点。此外，您将需要创建一些代码来从您想要放置最新版本的任何位置加载最新的 jar 文件。如果热部署对您来说已经足够了，您可以检查上面链接中的配置。

*   哪个应用程序服务器支持该功能？自定义类加载可以在任何应用程序服务器中完成，这是 Java 标准版的一个特性，您只依赖于您的编码能力。一些应用服务器，比如 JBoss，已经有一些内置的特性来帮助你完成这个任务。

*   要获得这个功能是否需要编写自定义的ClassLoader？除非应用服务器在您更改时动态加载模块的功能足以满足您的需求，否则您将需要实现自定义类加载器。通过使用类加载器，您可以从任何软件中以您选择的方式加载类的较新版本。例如，您可以从您的数据库或网站加载您的类的较新版本。

# c# - Socket.Receive 的大缓冲区是否会增加 WSAENOBUFS SocketError 的风险？

> ID：12578446
> 
> 赞同：1
> 
> 时间：2012-09-25T07:49:08.187
> 
> 标签：c#, windows, sockets, network-programming

我们收到操作系统无法分配更多 TCP 缓冲区 (SocketError=WSAENOBUFS) 的错误。这基本上是因为机器内存不足。

但我想知道是否可以通过使用非常大的缓冲区调用 Socket.Receive 来使这种情况变得更糟。当我们提供大缓冲区时，Windows 是否需要分配更多 TCP 缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:12:39.660

如果您提供大缓冲区，则提供。Windows 不必分配它：你做了。指定一个大于套接字接收缓冲区本身的缓冲区没有多大意义，因为它永远不会被填充。

# actionscript-3 - HTTPService 响应上的故障的 Flash AS3 原始内容不可用

> ID：12578448
> 
> 赞同：0
> 
> 时间：2012-09-25T07:49:10.507
> 
> 标签：actionscript-3, flash, apache-flex, air, flex3

我有一个 HTTPService 定义如下

```
<mx:HTTPService id="jsonServ" resultFormat="text" method="GET" useProxy="false"/> 
```

我使用 Flash 项目进行以下类型的调用：

*https://DOMAIN/json/Invoke?json={"CLASS":"FUNCTION", PARAMETERS}}*

结果工作正常，但故障没有原始内容和状态代码。空气在起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:22:21.227

这可能对应于[这里](https://www.ibm.com/developerworks/mydeveloperworks/blogs/joshuafox/entry/handling_http_errors_in_flex?lang=en)的这个：

另请查看：[http ://code.google.com/p/as3httpclientlib/](http://code.google.com/p/as3httpclientlib/)

# iis-7 - 无法使用 IIS 7 在 Windows Vista 上启动 WAMP 和 XAMPP 服务器

> ID：12578449
> 
> 赞同：0
> 
> 时间：2012-09-25T07:49:13.223
> 
> 标签：iis-7, windows-vista, xampp, wampserver

我在运行 Windows Vista 的 PC 上启动 WAMP 和 XAMPP 时遇到问题。也许是因为我也在 Microsoft Visual Studio 中编程并使用 IIS 7，所以 localhost（也被 WAMP 和 XAMP 使用）不可用，并且有几个进程阻止了 WAMP 和 XAMP 服务器的启动。

我找到了多种解决方案，但它们只是部分起作用。我结合了一些并提出了以下解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:49:13.223

我创建了两个 bat 文件（只需使用记事本并另存为 .bat）：

启动Apache.bat：

```
net stop MsDepSvc
net stop W3SVC
net start wampapache 
```

并停止Apache.bat：

```
net stop wampapache
net start MsDepSvc
net start W3SVC 
```

在启动 XAMPP 服务器的 WAMP 之前使用 startApache.bat 并在之后（或在您想再次使用 IIS7 之前）使用 stopApache.bat

# android - WebView iframe 忽略 frameborder="0"

> ID：12578452
> 
> 赞同：1
> 
> 时间：2012-09-25T07:49:26.390
> 
> 标签：android, html, android-layout, youtube, android-webview

我使用 webview 来显示 youtube 内容。出于某种原因，它为视频添加了一个帧。

有谁知道如何删除它？

我的代码是：

```
String data_html = "<iframe width=\"300\" height=\"162\" src=\"http://www.youtube.com/embed
/RbyBj-pmNwM\" frameborder=\"0\"></iframe>";
video.loadData(data_html, "text/html", null); 
```

这是我无法摆脱的白框示例：

![在此处输入图像描述](../Images/e6ca94fb5d6c28074129899416782cad.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T09:26:26.257

解决方案是使用完全构建的 html 页面：

```
String data_html = "<!DOCTYPE HTML> <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:og=\"http://opengraphprotocol.org/schema/\" xmlns:fb=\"http://www.facebook.com/2008/fbml\"> <head></head> <body style=\"margin:0 0 0 0; padding:0 0 0 0;\"> <iframe width=\"300\" height=\"162\" src=\"http://www.youtube.com/embed/RbyBj-pmNwM\" frameborder=\"0\"></iframe> </body> </html> "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:20:47.763

根据您的代码，您可以尝试：

```
frameborder=\"0\" framespacing=\"0\" 
```

# java - 如何在 JNA 中调用带有前导下划线和跟踪 @ 的方法

> ID：12578457
> 
> 赞同：2
> 
> 时间：2012-09-25T07:49:40.480
> 
> 标签：java, jna

我必须在 dll 中调用方法，但它们的名称类似于使用 Java Native Access 的 _setParameterX@12 和 _getParameterX@20。如何正确使用 FunctionMapper 或 StdCallFunctionMapper？如何调用这些函数？jna 文档对我来说有点模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:24:29.583

这些函数使用 stdcall 调用约定。后缀表示堆栈上传入参数的大小。

您应该使用`StdCallFunctionMapper`来自动生成适当的映射。创建类似于[W32API 选项](https://github.com/twall/jna/blob/master/src/com/sun/jna/win32/W32APIOptions.java)中使用的选项（那里的函数映射器会自动为 W32 API 函数选择 -W 或 -A 后缀）。将您的新选项映射传递给您的[`Native.loadLibrary`](http://twall.github.com/jna/3.4.1/javadoc/com/sun/jna/Native.html#loadLibrary%28java.lang.String,%20java.lang.Class,%20java.util.Map%29).

此外，确保实现`StdCallLibrary`接口，以便在调用函数时使用适当的调用约定。

# r - 矩阵的R dimnames，奇怪的行为

> ID：12578461
> 
> 赞同：3
> 
> 时间：2012-09-25T07:49:50.820
> 
> 标签：r

这是R中的错误还是有意义？

```
## works
aa <- matrix(nrow=1,ncol=2)
dimnames(aa)[[2]] <- c("a","b")
dimnames(aa)[[1]] <- c("c")

## does not work
bb <- matrix(nrow=1,ncol=2)
dimnames(bb)[[1]] <- c("c")
Error in dimnames(bb)[[1]] <- c("c") : 'dimnames' must be a list 
```

感谢您的解释！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T08:32:02.783

这是预期的行为。当您分配给对象元素的索引时，如果该元素不存在，R 将创建该元素。在您的示例中，“dimnames”不存在`aa`，因此 R 尝试根据您分配给它的内容创建“dimnames”。考虑为列表分配名为“a”、“b”和“c”的元素：

```
> L <- list()
> L$a[[1]] <- 5
> L$b[[3]] <- "foo"
> L$c[[4]] <- c(1,2,3)
> class(L$a)
[1] "numeric"
> class(L$b)
[1] "character"
> class(L$c)
[1] "list" 
```

现在说的问题`L$a[[1]] <- anything`是`L$a`还不存在。当一个元素不存在时会发生什么，R 只是创建了最简单的可以工作的元素类型。正如你所看到的，`L$a[[1]] <- 5`如果是一个数字向量是有意义`L$a`的，所以 R 使它成为一个数字向量。`L$b[[3]] <- "foo"`如果是数字向量没有意义`L$b`，但如果是字符向量就有意义`L$b`，所以这就是 R 创建的。但`L$c[[4]] <- c(1,2,3)`只有在`L$c`是一个列表时才会发生，所以在这种情况下你会得到一个列表。

在您的情况下，它会尝试`dimnames`根据该规则进行创建；所以它制作`dimnames(aa)`了一个列表，但它只制作`dimnames(bb)`了一个字符向量。但是`dimnames`有一个额外的限制，它必须是一个列表，所以它反对并且你得到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:25:13.897

你可以使用

```
dimnames(bb)[[1]] <- list("c") 
```

此命令会将名称指定为行名称。

我想这个错误是由于没有创建暗名列表。否则，如果您首先访问列表的第二部分 ( `[[2]]`)，则将创建列表。因此，您也可以`dimnames[[1]]`事后访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:31:17.633

我会按照错误所说的去做：

```
dimnames(bb)[[1]] <- list("c")
> bb
  [,1] [,2]
c   NA   NA 
```

什么也有效：

```
dimnames(bb)[[1]] <- "c" 
```

# wpf - WPF 设计时错误对象引用未设置为对象的实例

> ID：12578463
> 
> 赞同：6
> 
> 时间：2012-09-25T07:49:54.970
> 
> 标签：wpf, xaml, dependency-properties, observablecollection, design-time

好的，我厌倦了这个问题。

我正在尝试制作 UserControl，我可以在其中从 XAML 填充其内容。以前我创建了 ObservableCollection DependencyProperty。它在运行时工作，但在设计时出现错误：

**你调用的对象是空的。**

现在我做了更简单的版本：

```
public partial class UC : UserControl
{
    public UC()
    {
        Labels = new ObservableCollection<Label>();
        InitializeComponent();

        Labels.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Labels_CollectionChanged);
    }

    void Labels_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        foreach (Label uc in e.NewItems)
            Container.Children.Add(uc);
    }

    private ObservableCollection<Label> _lables = new ObservableCollection<Label>();

    public ObservableCollection<Label> Labels
    {
        get { return _lables; }
        set { _lables = value; }
    }
} 
```

这就是我喜欢使用 UserControll 的方式

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns:gsh="clr-namespace:WpfApplication1"  
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid Margin="0,0,0,30">
    <gsh:UC x:Name="uC1">
        <gsh:UC.Labels>
            <Label Content="qwerty1" />
            <Label Content="qwerty2" />
        </gsh:UC.Labels>
    </gsh:UC>
</Grid> 
```

但是它仍然在设计时给了我错误：

**你调用的对象是空的。**

所以，如果有人可以帮助我，请。

如何使我可以使用的 UserControl 像可以使用元素集合填充的本机控件一样？我试图在第二天找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T07:59:59.517

我通常在连接事件等之前检查我是否处于设计时间。

可能是您的 Container 在设计模式下为空。

```
public class Utils
{
    public static bool IsInDesignerMode
    {
        get
        {
            return ((bool)(DesignerProperties.IsInDesignModeProperty
                .GetMetadata(typeof(DependencyObject)).DefaultValue));
        }
    }

} 
```

也许在你的构造函数中你应该这样做..

```
public UC()    
{    
    InitializeComponent();    
    if (!Utils.IsInDesignerMode)
    {
        Labels = new ObservableCollection<Label>();    

        Labels.CollectionChanged += new         System.Collections.Specialized.NotifyCollectionChangedEventHandler(Labels_CollectionChanged);    
    }
} 
```

另一方面，虽然我认为你会更好地使用[ItemsControl](http://www.galasoft.ch/mydotnet/articles/article-2007041201.aspx)

# java - 谁调用了我的 Java 应用程序？

> ID：12578464
> 
> 赞同：1
> 
> 时间：2012-09-25T07:50:09.287
> 
> 标签：java, jar

假设我有一个捆绑为 jar ( `TestExec.jar`) 的 Java 应用程序。

当我想跟踪谁调用了我的应用程序时，就会出现问题，我的意思是作为独立应用程序，某些主体通过**命令行**调用（好像`java -jar TextExec.jar`），或者只是**双击**，或者可能是通过**计划任务（如在 windows 中）**。

所以我想......追踪那个......无论是通过**命令行还是双击或预定的任务**。

是否有任何设施或类似的东西:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:53:48.680

唯一的判断方法是基于命令行参数或环境。你也许可以间接地解决这个问题，但我建议添加一个特定的参数来告诉你的程序它应该如何表现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:55:34.107

假设你的 jar 有一个主类，并且你想通过调用它来跟踪谁使用了这个 jar，你可以通过以下方式之一获取用户信息：

*   从环境中使用`user.name`（非常不安全）
*   从底层操作系统获取用户的详细信息（使用 NTSystem/UnixSystem）
*   使用 Active Directory 或 Kerberos KDC 等目录服务器对用户进行身份验证。

获得用户的详细信息后，您可以将它们记录在某个公共位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:57:56.660

您可以创建使用不同参数值调用它的外部文件。例如，创建一个传递 src=bat 的批处理文件，而另一个创建 Windows 服务并使用 src=service 调用它的文件。如果不自己传递一些东西，我认为您无法分辨。

# mysql - 我们可以使用之前的查询输出进行查询吗

> ID：12578466
> 
> 赞同：0
> 
> 时间：2012-09-25T07:50:11.277
> 
> 标签：mysql

在 mysql 中我们可以使用之前的输出数据进行查询。IE。，

```
 select IPAddress,Sum(L2FramesSent),convert((min(datetime) div 500)*500, datetime) + INTERVAL 5 minute as endOfInterval from databasename.tablename  where datetime BETWEEN '2012-09-20 10:00:00' AND '2012-09-20 16:45:00' group by datetime div 500; 
```

通过上面的查询我得到了

```
+-----------+-------------------+---------------------+
| IPAddress | Sum(L2FramesSent) | endOfInterval       |
+-----------+-------------------+---------------------+
| moteid6   |            523791 | 2012-09-20 10:05:00 |
| moteid4   |            349555 | 2012-09-20 11:00:00 |
| moteid6   |            276358 | 2012-09-20 11:05:00 |
| moteid4   |            525457 | 2012-09-20 12:00:00 |
| moteid4   |            960010 | 2012-09-20 12:05:00 |
| moteid13  |           1263313 | 2012-09-20 12:10:00 |
| moteid12  |           1001343 | 2012-09-20 12:15:00 |
| moteid4   |            325904 | 2012-09-20 13:00:00 |
| moteid14  |            691390 | 2012-09-20 13:05:00 |
| moteid4   |           1028479 | 2012-09-20 15:40:00 |
| moteid12  |           1394286 | 2012-09-20 15:45:00 |
| moteid12  |           1336231 | 2012-09-20 15:50:00 |
| moteid6   |            263674 | 2012-09-20 15:55:00 |
+-----------+-------------------+---------------------+ 
```

现在我想要`difference`两行之间是否有可能得到它如果我给这个：

```
select (b.Sum(L2FramesSent) - a.Sum(L2FramesSent)),convert((min(a.datetime) div 500)*500, datetime) + INTERVAL 5 minute as endOfInterval from tablename.databasename a,tablename.databasename b where a.datetime BETWEEN '2012-09-12 11:00:00' AND '2012-09-12 17:05:00' group by a.datetime div 500; 
```

我收到错误 `ERROR 1630 (42000): FUNCTION b.Sum does not exist`。检查参考手册中的“函数名称解析和解析”部分

表名和数据库名都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:26:13.133

错误在这里：

```
select (b.Sum(L2FramesSent) - a.Sum(L2FramesSent)) 
```

尝试

```
select (Sum(b.L2FramesSent) - Sum(b.L2FramesSent)) 
```

反而

a 和 b 是您的表的别名，而 sum 是一个（通常可用的）函数。

# python - 安装 Shapely 时找不到 OSError geos_c

> ID：12578471
> 
> 赞同：26
> 
> 时间：2012-09-25T07:50:20.507
> 
> 标签：python, matplotlib-basemap, geos, shapely

我是使用 python 在地图上制作/绘图的新手，一直在尝试按照这篇博文生成世界地图 (http://sciblogs.co.nz/seeing-data/2011/08/12/plotting-geographic-带有python的世界地图上的数据/）。在这里遇到了一些事情：

1.  安装 Basemap（用于在地理投影上绘制数据的 Matplotlib 扩展）。

    ```
    from mpl_toolkits.basemap import Basemap
    Traceback (most recent call last):
    File "geos_demo.py", line 1, in <module>
    from mpl_toolkits.basemap import Basemap
    ImportError: No module named mpl_toolkits.basemap 
    ```

2.  安装Shapely，但出现如下错误[1]：

3.  然后我进入 geos.py 文件并将 geos.dll 的所有引用更改为 geos_c.dll，按照此处链接的建议：http: [//osgeo-org.1560.n6.nabble.com/osgeo4w-258- python-shapely-python-2-7-2-td4336816.html 的问题](http://osgeo-org.1560.n6.nabble.com/osgeo4w-258-Problems-with-python-shapely-python-2-7-2-td4336816.html)

4.  但是，会发生相同的错误 [1]。

我正在使用 Python 2.7.1 和 Mac OS 10.7.4。如果我可以提供更多信息，请告诉我，非常感谢社区提供的任何指导！谢谢！

[1]

```
 from shapely.geometry import Point
    Traceback (most recent call last): File "<stdin>", line 1, in <module>
    File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/geometry/__init__.py", line 4, in <module>
    from geo import box, shape, asShape, mapping
    File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/geometry/geo.py", line 5, in <module>
    from point import Point, asPoint
    File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/geometry/point.py", line 7, in <module>
    from shapely.coords import required
    File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/coords.py", line 8, in <module>
    from shapely.geos import lgeos
    File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/geos.py", line 59, in <module>
    _lgeos = load_dll('geos_c', fallbacks=alt_paths)
     File "/Users/Desktop/python/ENV/lib/python2.7/site-packages/shapely/geos.py", line 44, in load_dll
    libname, fallbacks or []))
    OSError: Could not find library geos_c or load any of its variants        ['/Library/Frameworks/GEOS.framework/Versions/Current/GEOS', '/opt/local/lib/libgeos_c.dylib'] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-02T00:30:50.217

对于问题 2-4，您必须在系统上安装 GEOS。如果您有自制软件，您可以执行以下操作：

`brew install geos`

如果没有，请在此处安装自制软件：http: [//mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-15T17:50:11.930

在 Ubuntu 上，要安装`GEOS`，这对我有用：

```
$ sudo apt-get install libgeos-dev 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-10-13T03:16:11.930

使用 OS X 10.11 (El Capitan) 和 Boxen，我必须这样做：

```
brew install geos
sudo mkdir /opt/local
sudo ln -s /opt/boxen/homebrew/lib /opt/local/lib 
```

让 Shapely`libgeos_c.dylib`在它愿意寻找的位置之一找到它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T08:02:31.253

问题似乎是您实际上还没有安装所需的模块。

Python 代码行，例如

```
from mpl_toolkits.basemap import Basemap 
```

是告诉您的脚本使用您需要已经安装的模块（或其他位 Python 代码）的导入语句。

对于提到的每个包（NumPy、Matplotlib、Basemap），您必须弄清楚如何在您的系统上安装它们。对于 NumPy 和 Matplotlib，这可能很复杂，因为它们需要编译。例如，[这些是 Numpy 指令](http://www.scipy.org/Installing_SciPy/Mac_OS_X)。

如果您只是想尝试使用该博客文章中的说明，那么您可以使用[PythonAnywhere 之类的服务，该服务已经安装了 numpy、matplotlib 和 basemap](https://www.pythonanywhere.com/batteries_included/)。（免责声明，我在 PythonAnywhere 工作......）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T12:10:13.380

在 Windows 10 上，python 3.6.5 64 位

*   安装[osgeo4w](https://trac.osgeo.org/osgeo4w/)
*   将安装的文件夹添加到 PATH 例如 C:\OSGeo4W64\bin （必须包含 geos_c.dll）
*   重启命令行

请享用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-18T15:21:32.047

我知道这是一个很老的问题，但是，作为[https://stackoverflow.com/a/12683010/597743](https://stackoverflow.com/a/12683010/597743)的替代方案，您可以使用 MacPorts 安装 geos 库：

```
port install geos 
```

MacPorts 的安装步骤如下所述：[https ://www.macports.org/install.php](https://www.macports.org/install.php)

# c++ - 将类对象作为参数传递给 boost::thread

> ID：12578473
> 
> 赞同：0
> 
> 时间：2012-09-25T07:50:49.943
> 
> 标签：c++, boost, boost-thread

我有一个名为“producer”的函数，它接受一个类对象作为参数。我正在尝试使用 boost::thread 为生产者创建线程。但是，由于我作为参数传递的类对象，它会导致错误。我无法弄清楚为什么它会出错。如果我删除函数参数并让它作为全局变量传入，它工作正常。下面是我的代码。

阻塞队列.h

```
#ifndef BLOCKINGQUEUE_H_
#define BLOCKINGQUEUE_H_

#include <queue>
#include <iostream>
#include <boost/thread.hpp>

template<class T>
class BlockingQueue
{
private:
    std::queue<T>               m_queBlockingQueue;
    boost::condition_variable   m_cvSignal;
    boost::mutex                m_mtxSync;

public:
    BlockingQueue();
    bool isEmpty();
    T& popElement();
    void pushElement(T nElement);
    virtual ~BlockingQueue();
};

template<class T>
BlockingQueue<T>::BlockingQueue()
{
}

template<class T>
bool BlockingQueue<T>::isEmpty()
{
    bool bEmpty;
    boost::mutex::scoped_lock lock(m_mtxSync);
    m_cvSignal.wait(lock);
    bEmpty = m_queBlockingQueue.empty();
    return bEmpty;
}

template<class T>
T& BlockingQueue<T>::popElement()
{
    boost::mutex::scoped_lock lock(m_mtxSync);
    while (m_queBlockingQueue.empty())
    {
        m_cvSignal.wait(lock);
    }
    T& nElement = m_queBlockingQueue.front();
    m_queBlockingQueue.pop();
    return nElement;
}

template<class T>
void BlockingQueue<T>::pushElement(T nElement)
{
    boost::mutex::scoped_lock lock(m_mtxSync);
    m_queBlockingQueue.push(nElement);
    m_cvSignal.notify_one();
}

template<class T>
BlockingQueue<T>::~BlockingQueue()
{
}

#endif /* BLOCKINGQUEUE_H_ */ 
```

主文件

```
#include "BlockingQueue.h"

#include <iostream>

using namespace std;

void producer (BlockingQueue<int>& blockingQueue)
{
    for (int i=0; i<100; i++)
    {
        cout<<"Producer about to push("<<i<<")..."<<endl;
        blockingQueue.pushElement(i);
        sleep(1);
    }
}

void consumer (BlockingQueue<int>& blockingQueue)
{
    for (int i=0; i<100; i++)
    {
        cout<<"Consumer received: "<<blockingQueue.popElement()<<endl;
        sleep(3);
    }
}

int main ()
{
    BlockingQueue<int> blockingQueue;
    cout<<"Program started..."<<endl;
    cout.flush();

    boost::thread tConsumer(consumer, blockingQueue);
    boost::thread tProducer(producer, blockingQueue);

    tProducer.join();
    tConsumer.join();

    return 0;
} 
```

我得到的错误是这样的：

1) 没有已知的参数 1 从 'const BlockingQueue' 到 'BlockingQueue&' 的转换 2) BlockingQueue::BlockingQueue(BlockingQueue&) 在这个上下文中 3) 没有匹配函数调用 'BlockingQueue::BlockingQueue(const BlockingQueue&)'</p >

我还有其他错误，例如： thread.hpp:148:47: 错误：初始化参数 1 of 'static boost::detail::thread_data_ptr boost::thread::make_thread_info(F) [with F = boost::_bi::bind_t& ), boost::_bi::list1 > > >, boost::detail::thread_data_ptr = boost::shared_ptr]'</p>

我的类中是否有一些函数（如复制构造函数等）丢失或什么。如果我使用我的代码来传递像 int 这样的原始数据类型，那么它可以正常工作。我的班级“BlockingQueue”有一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:59:36.383

如果要通过引用传递，则需要使用 boost::ref，或者只使用指针。boost::thread 按值复制，因此不能使用您的按引用传递函数。例如你可以这样做：

```
#include "BlockingQueue.h"

#include <iostream>

using namespace std;

void producer (boost::reference_wrapper<BlockingQueue<int>> blockingQueue)
{
    for (int i=0; i<100; i++)
    {
        cout<<"Producer about to push("<<i<<")..."<<endl;
        blockingQueue.get_pointer()->pushElement(i);
        sleep(1);
    }
}

void consumer (boost::reference_wrapper<BlockingQueue<int>> blockingQueue)
{
    for (int i=0; i<100; i++)
    {
        cout<<"Consumer received: "<<blockingQueue.get_pointer()->popElement()<<endl;
        sleep(3);
    }
}

int main ()
{
    BlockingQueue<int> blockingQueue;
    cout<<"Program started..."<<endl;
    cout.flush();

    boost::thread tConsumer(consumer, ref(blockingQueue));
    boost::thread tProducer(producer, ref(blockingQueue));

    tProducer.join();
    tConsumer.join();

    return 0;
} 
```

# wordpress - 页面内的 Wordpress 链接

> ID：12578474
> 
> 赞同：0
> 
> 时间：2012-09-25T07:50:50.897
> 
> 标签：wordpress

我正在尝试实现链接到我的 wordpress 页面的书签/内联页面。

我已经在 wordpress 页面编辑器中尝试了简单的规则。

```
<p id="name1">.....................</p> 
```

并使用以下链接调用它

```
<a href=#name1> Go to name1 </a> 
```

但它不起作用。尽管 URL 已更新为 #name1 后缀，但它仍位于同一位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:53:19.367

尝试：

```
<a href=#name1> Go to name1 </a>

<h1 name="name1"></h1>
<p>.....................</p> 
```

我个人建议锚定到标题，而不是段落，因为这有点混乱。

# android - 如何获取被触摸的位置？

> ID：12578478
> 
> 赞同：0
> 
> 时间：2012-09-25T07:51:07.840
> 
> 标签：android, cordova, cordova-2.0.0, google-maps-mobile

我制作了一个使用 phonegap 显示 Google 地图的示例 Android 应用程序。我想获取地图上被触摸的地方的位置。有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:42:32.670

它适用于 Android MapView 的解决方案，但我确信您在 PhoneGap 中也有类似的方法。
我认为您需要扩展 Overlay 类并覆盖 OnTap 方法。

```
@Override
public boolean onTap(GeoPoint p,MapView mapView){
Log.d("TOUCHED_PLACE", "Latitutde:"+p.getLatitudeE6()/1E6 + " Longitude:"+p.getLongitude()/1E6);

} 
```

更多信息： [https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay#onTap%28com.google.android.maps.GeoPoint,%20com.google.android。地图.MapView%29](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay#onTap%28com.google.android.maps.GeoPoint,%20com.google.android.maps.MapView%29)

:)

# java - 使用 Java 复制文件时的空结果

> ID：12578483
> 
> 赞同：1
> 
> 时间：2012-09-25T07:51:45.500
> 
> 标签：java, file, copy

我正在尝试使用我的应用程序将源文件夹复制到另一个文件夹来“重命名”一个文件夹。

但是......当我创建目标文件夹时，其中的文件是空的（0字节）。请注意，这只发生在我部署应用程序的 linux 机器上。不会在我的本地计算机上使用 Windows 发生。

我试过了

```
Files.copy(src, dest); 
```

并使用输入/输出流创建字节数组

```
byte[] buffer = new byte[1024]; 
```

结果相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:57:14.997

我不知道为什么Linux机器上会出现这个问题，Linux机器上运行的是什么VM和版本？

你可能想试试 apache commons-io FileUtils 它有 copyDirectory 方法，让生活更轻松。

[http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:58:47.477

如果您尝试重命名，那么您必须使用该方法`Files.move`。

但仍然`Files.copy`应该可以正常工作。如果您发布更多代码以找出问题，我会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:11:44.943

它本身`Files.copy`仅适用于文件而不适用于目录。

你必须使用`Files.walkFileTree`.

我为此编写了一些实用方法（该库是开源的）。

教程： [http ://softsmithy.sourceforge.net/lib/0.2/docs/tutorial/nio-file/index.html](http://softsmithy.sourceforge.net/lib/0.2/docs/tutorial/nio-file/index.html)

马文：

```
<dependency>   
    <groupId>org.softsmithy.lib</groupId>   
    <artifactId>softsmithy-lib-core</artifactId>   
    <version>0.2</version>    
</dependency> 
```

更多信息：

[http://puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html](http://puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html)

# wcf - 反序列化操作请求消息正文时出错？尝试更改 MaxNameTableCharCount 属性

> ID：12578492
> 
> 赞同：4
> 
> 时间：2012-09-25T07:52:26.953
> 
> 标签：wcf

我有一个包含 60 个操作合同的 WCF 服务。

当我尝试添加另一个操作合同时，我收到以下错误：

反序列化操作请求消息正文时出错

**回答：**

我将绑定配置的 MaxNameTableCharCount 属性更改为**32768**（默认为**16384**）。

它对我有用！

希望对你也有帮助！

# ubuntu - 如何在 Ubuntu 上安装 Boost

> ID：12578499
> 
> 赞同：600
> 
> 时间：2012-09-25T07:52:59.263
> 
> 标签：ubuntu, boost

我在 Ubuntu 上，我想安装 Boost。我试过了

```
sudo apt-get install boost 
```

但是没有这样的包。在 Ubuntu 上安装 Boost 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1032
> 
> 时间：2012-09-25T07:57:27.013

您可以使用`apt-get`命令（需要`sudo`）

```
sudo apt-get install libboost-all-dev 
```

或者你可以打电话

```
aptitude search boost 
```

找到您需要的软件包并使用`apt-get`命令安装它们。

* * *

## 回答 #2

> 赞同：227
> 
> 时间：2014-06-06T16:14:43.343

获取您需要的 Boost 版本。这适用于 1.55，但您可以自行更改或手动下载：

```
wget -O boost_1_55_0.tar.gz https://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz/download
tar xzvf boost_1_55_0.tar.gz
cd boost_1_55_0/ 
```

获取所需的库，主要`icu`用于`boost::regex`支持：

```
sudo apt-get update
sudo apt-get install build-essential g++ python-dev autotools-dev libicu-dev libbz2-dev libboost-all-dev 
```

Boost 的引导设置：

```
./bootstrap.sh --prefix=/usr/ 
```

然后构建它：

```
./b2 
```

并最终安装它：

```
sudo ./b2 install 
```

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2014-05-15T02:36:34.953

**使用以下示例在 Ubuntu 上安装 Boost `boost::array`：**

安装 libboost-all-dev 和 aptitude：

```
sudo apt install libboost-all-dev

sudo apt install aptitude

aptitude search boost 
```

然后将其粘贴到名为的 C++ 文件中`main.cpp`：

```
#include <iostream>
#include <boost/array.hpp>

using namespace std;
int main(){
  boost::array<int, 4> arr = {{1,2,3,4}};
  cout << "hi" << arr[0];
  return 0;
} 
```

像这样编译：

```
g++ -o s main.cpp 
```

像这样运行它：

```
./s 
```

程序打印：

```
hi1 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2016-12-21T22:13:05.037

获取您需要的 Boost 版本。这适用于 1.55，但您可以自行更改或手动下载[（Boost 下载页面）](https://www.boost.org/users/history/)：

```
wget -O boost_1_55_0.tar.gz https://sourceforge.net/projects/boost/files/boost/1.55​​.0/boost_1_55_0.tar.gz/download
tar xzvf boost_1_55_0.tar.gz
cd boost_1_55_0/
```

获取所需的库，主要是用于 boost::regex 支持的 icu：

```
sudo apt-get 更新
sudo apt-get install build-essential g++ python-dev autotools-dev libicu-dev libbz2-dev
```

Boost 的引导设置：

```
./bootstrap.sh --prefix=/usr/local
```

如果我们想要 MPI，那么我们需要在 user-config.jam 文件中设置标志：

```
user_configFile=`查找 $PWD -name user-config.jam`
回声“使用mpi；” >> $用户配置文件
```

求最大物理核心数：

```
n=`cat /proc/cpuinfo | grep "cpu 核心" | 独特 | awk '{打印 $NF}'`
```

并行安装boost：

```
sudo ./b2 --with=all -j $n install
```

假设您已经设置了*/usr/local/lib*。如果没有，您可以将其添加到您的*LD LIBRARY PATH*：

```
sudo sh -c 'echo "/usr/local/lib" >> /etc/ld.so.conf.d/local.conf'
```

重置 ldconfig：

```
须藤 ldconfig
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2018-06-14T21:49:42.230

通过子系统更新 Windows 10 Ubuntu 应用程序（也适用于标准 Ubuntu）：

您可能无法找到包裹。如果你这样做，永远不要害怕！PPA来了！

```
sudo add-apt-repository ppa:boost-latest/ppa
sudo apt-get update 
```

然后运行：

```
sudo apt-get install libboost-all-dev 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-11-01T11:37:59.117

**您可以使用以下命令在 ubuntu 上安装 boost：**

`sudo apt update`

`sudo apt install libboost-all-dev`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-14T14:59:37.220

通过在终端中输入以下命令来安装 libboost-all-dev

第1步

更新包存储库并获取最新的包信息。

```
sudo apt update -y 
```

第2步

使用 -y 标志安装包和依赖项。

```
sudo apt install -y libboost-all-dev 
```

现在您已经安装了 libboost-all-dev 源：[https ://linuxtutorial.me/ubuntu/focal/libboost-all-dev/](https://linuxtutorial.me/ubuntu/focal/libboost-all-dev/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-09-06T21:10:30.967

首先尝试以下方法：

```
$ sudo apt-get install libboost* 
```

您可能会收到类似于以下内容的错误消息，就像我一样：

```
E: Unable to correct problems, you have held broken packages. 
```

然后尝试安装以下包：

```
$ sudo apt-get install libboost-all-dev 
```

现在您可以使用 Boost 创建一个示例项目：

```
$ mkdir boost
$ cd boost/
$ cat > main.cpp & 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-23T02:56:25.450

实际上，在您的项目中使用 Boost 之前，您不需要“安装”或“编译”任何东西。您可以将 Boost 库下载并解压缩到您机器上的任何位置，通常类似于`/usr/local/`.

当你编译你的代码时，你可以通过`-I`. 例如，`g++ -I /usr/local/boost_1_59_0 xxx.hpp`。

# css - 用css将图像放在网格中

> ID：12578502
> 
> 赞同：3
> 
> 时间：2012-09-25T07:53:11.240
> 
> 标签：css, grid

无法弄清楚如何实现该结果（图像中的单独徽标）。也许有人可以帮忙。 ![在此处输入图像描述](../Images/3d9c75aa884d4b42b3423a8bd3bfcc49.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:03:07.967

也许是这样的

**HTML**

```
<div class="container">
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
    <div class="logo-box" />
</div> 
```

**CSS**

```
.container {
    width:980px;
    float:left;
}
.logo-box {
    width:245px;
    float:left;
    height:150px;
} 
```

您可以在元素中放置任何 HTML`img`标签或 CSS`background``.logo-box`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:40:41.920

刚刚为您做了一个快速演示。[**检查这个 JSFIDDLE**](http://jsfiddle.net/libinvbabu/Jp6TM/1/)

在这里，我使用背景图像来创建边框。只是调整它！

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:00:16.863

```
img{
   float:left;
} 
```

这将起作用（您也应该定义img的高度和宽度）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-29T08:16:09.630

这似乎是一个不错的解决方案：[http](http://unmatchedstyle.com/news/building-a-client-logo-grid-with-centered-elements.php) ://unmatchedstyle.com/news/building-a-client-logo-grid-with-centered-elements.php - 所有图像水平和垂直居中 - 易于响应 - 易于自定义特定的图像大小 - 似乎非常兼容跨浏览器，即使是旧的蹩脚 IE

HTML：

```
<article class="clients">
    <span></span><img src="images/img-logo2.png" alt="logo" />
</article>

<article class="clients">
    <span></span><img src="images/img-logo3.png" alt="logo" />
</article> 
```

CSS：

```
article.clients {
    float: left;
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    width: 203px;
    height: 150px;
    margin-right: 15px;
    margin-bottom: 15px;
    border: 1px solid #4d4d4d;
    -webkit-border-radius: 3px;
       -moz-border-radius: 3px;
                 border-radius: 3px;
}

article.clients * {
    vertical-align: middle;
}

article.clients span {
    display: inline-block;
    height: 100%;
    width: 1px;
} 
```

# windows-8 - 将事件侦听器添加到 ItemTemplate :: For XAML、C# 和 HTML、WINJS（Windows Metro 风格应用程序开发）中的控件

> ID：12578503
> 
> 赞同：1
> 
> 时间：2012-09-25T07:53:12.697
> 
> 标签：windows-8

我正在为 WinJS.UI.ListView 使用以下模板。

```
<div class="lst-item" data-win-control="WinJS.Binding.Template" id="plyListTemp">
        <span class="sng-name win-type-ellipsis" data-win-bind="textContent: title">Loreum ipsum</span>
        <a  style="color:red;">X</a>
        <strong class="pri_artist win-type-ellipsis" data-win-bind="textContent: primary_artist">A boy name goo</strong>
        <span class="time" data-win-bind="textContent: duration">06:44</span>
</div> 
```

现在我想在上面的模板`click`中指定一个监听器。`anchor (a)`我如何实现它。我知道 WinJS.UI.ListView 的 onItemInvoked 侦听器，并且我已经设置了它，但是我怎么知道用户点击了锚点？如何使用 XAML、C# 将事件侦听器添加到 itemTemplate 内的按钮以构建应用程序。

任何高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:04:48.450

您必须将 win-interactive 类与自定义模板渲染一起使用。本文最后讨论了使用模板渲染 - [http://msdn.microsoft.com/en-us/library/windows/apps/Hh781224.aspx#displaying_items_with_a_template_or_render_function](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781224.aspx#displaying_items_with_a_template_or_render_function)并且此示例应用程序展示了如何在场景中创建交互式模板项6 - [http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f](http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f)

# html - 使用掩码实现输入

> ID：12578507
> 
> 赞同：65
> 
> 时间：2012-09-25T07:53:34.317
> 
> 标签：html, date, input, mask, data-masking

我想为`input`接受日期的文本字段实现掩码。掩码值应直接显示在`input`.

像这样的东西：

```
<input type='text' value='____/__/__'> 
```

在该示例中，我将掩码写为一个值，但我的目的是让人们无需键入即可编写日期`/`或`-`分隔月、年和日。用户应该能够在显示的字段中输入数字，而掩码会在用户键入时自动强制执行格式。

我在其他网站上看到过这种行为，但我不知道它是如何工作的或如何自己实现它。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-02-27T20:31:15.107

输入掩码可以使用[`keyup`](https://developer.mozilla.org/en-US/docs/Web/Events/keyup)事件、、和属性的组合来实现。这是一个非常简单的实现，它可以完成您想要的一些操作。它当然不是完美的，但足以证明原理：[`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement) `value``selectionStart``selectionEnd`

```
Array.prototype.forEach.call(document.body.querySelectorAll("*[data-mask]"), applyDataMask);

function applyDataMask(field) {
    var mask = field.dataset.mask.split('');

    // For now, this just strips everything that's not a number
    function stripMask(maskedData) {
        function isDigit(char) {
            return /\d/.test(char);
        }
        return maskedData.split('').filter(isDigit);
    }

    // Replace `_` characters with characters from `data`
    function applyMask(data) {
        return mask.map(function(char) {
            if (char != '_') return char;
            if (data.length == 0) return char;
            return data.shift();
        }).join('')
    }

    function reapplyMask(data) {
        return applyMask(stripMask(data));
    }

    function changed() {   
        var oldStart = field.selectionStart;
        var oldEnd = field.selectionEnd;

        field.value = reapplyMask(field.value);

        field.selectionStart = oldStart;
        field.selectionEnd = oldEnd;
    }

    field.addEventListener('click', changed)
    field.addEventListener('keyup', changed)
}
```

```
ISO Date: <input type="text" value="____-__-__" data-mask="____-__-__"/><br/>
Telephone: <input type="text" value="(___) ___-____" data-mask="(___) ___-____"/><br/>
```

（[在 JSFiddle 中查看](http://jsfiddle.net/Ajedi32/pgsawnk3/)）

还有许多库可以执行此功能。一些例子包括：

*   [jquery.inputmask](https://github.com/RobinHerbots/jquery.inputmask)
*   [屏蔽输入插件](http://digitalbush.com/projects/masked-input-plugin/)
*   [Politespace](http://www.filamentgroup.com/lab/politespace.html)（提供输入掩码的替代方案）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-03-05T19:43:54.717

响应`input`事件而不是关键事件（如`keyup`）的解决方案将提供流畅的体验（没有摆动），并且在没有键盘（上下文菜单、鼠标拖动、其他设备...）的情况下进行更改时也可以工作。

下面的代码将查找同时具有`placeholder`属性和`data-slots`属性的输入元素。后者应在占位符中定义用作输入槽的字符，例如“_”。可以为可选`data-accept`属性提供一个正则表达式，该表达式定义在这样的槽中允许哪些字符。默认值为`\d`，即数字。

```
// This code empowers all input tags having a placeholder and data-slots attribute
document.addEventListener('DOMContentLoaded', () => {
    for (const el of document.querySelectorAll("[placeholder][data-slots]")) {
        const pattern = el.getAttribute("placeholder"),
            slots = new Set(el.dataset.slots || "_"),
            prev = (j => Array.from(pattern, (c,i) => slots.has(c)? j=i+1: j))(0),
            first = [...pattern].findIndex(c => slots.has(c)),
            accept = new RegExp(el.dataset.accept || "\\d", "g"),
            clean = input => {
                input = input.match(accept) || [];
                return Array.from(pattern, c =>
                    input[0] === c || slots.has(c) ? input.shift() || c : c
                );
            },
            format = () => {
                const [i, j] = [el.selectionStart, el.selectionEnd].map(i => {
                    i = clean(el.value.slice(0, i)).findIndex(c => slots.has(c));
                    return i<0? prev[prev.length-1]: back? prev[i-1] || first: i;
                });
                el.value = clean(el.value).join``;
                el.setSelectionRange(i, j);
                back = false;
            };
        let back = false;
        el.addEventListener("keydown", (e) => back = e.key === "Backspace");
        el.addEventListener("input", format);
        el.addEventListener("focus", format);
        el.addEventListener("blur", () => el.value === pattern && (el.value=""));
    }
});
```

```
[data-slots] { font-family: monospace }
```

```
<label>Date time: 
    <input placeholder="dd/mm/yyyy hh:mm" data-slots="dmyh">
</label><br>
<label>Telephone:
    <input placeholder="+1 (___) ___-____" data-slots="_">
</label><br>
<label>MAC Address:
    <input placeholder="XX:XX:XX:XX:XX:XX" data-slots="X" data-accept="[\dA-H]">
</label><br>
<label>Alphanumeric:
    <input placeholder="__-__-__-____" data-slots="_" data-accept="\w" size="13">
</label><br>
<label>Credit Card:
    <input placeholder=".... .... .... ...." data-slots="." data-accept="\d" size="19">
</label><br>
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-02-10T02:29:06.380

我使用以下原则进行了自己的实现：

1.  只允许输入数字。（按键事件）
2.  获取数组中的所有数字
3.  在循环中用数组中的数字替换掩码的每个“_”字符

欢迎改进。

```
/**
 * charCode [48,57]     Numbers 0 to 9
 * keyCode 46           "delete"
 * keyCode 9            "tab"
 * keyCode 13           "enter"
 * keyCode 116          "F5"
 * keyCode 8            "backscape"
 * keyCode 37,38,39,40  Arrows
 * keyCode 10           (LF)
 */
function validate_int(myEvento) {
  if ((myEvento.charCode >= 48 && myEvento.charCode <= 57) || myEvento.keyCode == 9 || myEvento.keyCode == 10 || myEvento.keyCode == 13 || myEvento.keyCode == 8 || myEvento.keyCode == 116 || myEvento.keyCode == 46 || (myEvento.keyCode <= 40 && myEvento.keyCode >= 37)) {
    dato = true;
  } else {
    dato = false;
  }
  return dato;
}

function phone_number_mask() {
  var myMask = "(___) ___-____";
  var myCaja = document.getElementById("phone");
  var myText = "";
  var myNumbers = [];
  var myOutPut = ""
  var theLastPos = 1;
  myText = myCaja.value;
  //get numbers
  for (var i = 0; i < myText.length; i++) {
    if (!isNaN(myText.charAt(i)) && myText.charAt(i) != " ") {
      myNumbers.push(myText.charAt(i));
    }
  }
  //write over mask
  for (var j = 0; j < myMask.length; j++) {
    if (myMask.charAt(j) == "_") { //replace "_" by a number 
      if (myNumbers.length == 0)
        myOutPut = myOutPut + myMask.charAt(j);
      else {
        myOutPut = myOutPut + myNumbers.shift();
        theLastPos = j + 1; //set caret position
      }
    } else {
      myOutPut = myOutPut + myMask.charAt(j);
    }
  }
  document.getElementById("phone").value = myOutPut;
  document.getElementById("phone").setSelectionRange(theLastPos, theLastPos);
}

document.getElementById("phone").onkeypress = validate_int;
document.getElementById("phone").onkeyup = phone_number_mask;
```

```
<input type="text" name="phone" id="phone" placeholder="(123) 456-7890" required="required" title="e.g (123) 456-7890" pattern="^\([0-9]{3}\)\s[0-9]{3}-[0-9]{4}$">
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-06-10T07:05:25.923

您也可以通过使用 JavaScript 的本机方法来实现这一点。它非常简单，不需要任何额外的库来导入。

```
<input type="text" name="date" placeholder="yyyy-mm-dd" onkeyup="
  var date = this.value;
  if (date.match(/^\d{4}$/) !== null) {
     this.value = date + '-';
  } else if (date.match(/^\d{4}\-\d{2}$/) !== null) {
     this.value = date + '-';
  }" maxlength="10"> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-06T12:18:40.617

你也可以试试我的实现，在输入内容时每次按键都没有延迟，并且完全支持退格和删除。

您可以在线尝试： [https ://jsfiddle.net/qmyo6a1h/1/](https://jsfiddle.net/qmyo6a1h/1/)

```
 <html>
    <style>
    input{
      font-family:'monospace';
    }
    </style>
    <body>
      <input type="text" id="phone" placeholder="123-5678-1234" title="123-5678-1234" input-mask="___-____-____">
      <input type="button" onClick="showValue_phone()" value="Show Value" />
      <input type="text" id="console_phone" />
      <script>
        function InputMask(element) {
          var self = this;

          self.element = element;

          self.mask = element.attributes["input-mask"].nodeValue;

          self.inputBuffer = "";

          self.cursorPosition = 0;

          self.bufferCursorPosition = 0;

          self.dataLength = getDataLength();

          function getDataLength() {
            var ret = 0;

            for (var i = 0; i < self.mask.length; i++) {
              if (self.mask.charAt(i) == "_") {
                ret++;
              }
            }

            return ret;
          }

          self.keyEventHandler = function (obj) {
            obj.preventDefault();

            self.updateBuffer(obj);
            self.manageCursor(obj);
            self.render();
            self.moveCursor();
          }

          self.updateBufferPosition = function () {
            var selectionStart = self.element.selectionStart;
            self.bufferCursorPosition = self.displayPosToBufferPos(selectionStart);
            console.log("self.bufferCursorPosition==" + self.bufferCursorPosition);
          }

          self.onClick = function () {
            self.updateBufferPosition();
          }

          self.updateBuffer = function (obj) {
            if (obj.keyCode == 8) {
              self.inputBuffer = self.inputBuffer.substring(0, self.bufferCursorPosition - 1) + self.inputBuffer.substring(self.bufferCursorPosition);
            }
            else if (obj.keyCode == 46) {
              self.inputBuffer = self.inputBuffer.substring(0, self.bufferCursorPosition) + self.inputBuffer.substring(self.bufferCursorPosition + 1);
            }
            else if (obj.keyCode >= 37 && obj.keyCode <= 40) {
              //do nothing on cursor keys.
            }
            else {
              var selectionStart = self.element.selectionStart;
              var bufferCursorPosition = self.displayPosToBufferPos(selectionStart);
              self.inputBuffer = self.inputBuffer.substring(0, bufferCursorPosition) + String.fromCharCode(obj.which) + self.inputBuffer.substring(bufferCursorPosition);
              if (self.inputBuffer.length > self.dataLength) {
                self.inputBuffer = self.inputBuffer.substring(0, self.dataLength);
              }
            }
          }

          self.manageCursor = function (obj) {
            console.log(obj.keyCode);
            if (obj.keyCode == 8) {
              self.bufferCursorPosition--;
            }
            else if (obj.keyCode == 46) {
              //do nothing on delete key.
            }
            else if (obj.keyCode >= 37 && obj.keyCode <= 40) {
              if (obj.keyCode == 37) {
                self.bufferCursorPosition--;
              }
              else if (obj.keyCode == 39) {
                self.bufferCursorPosition++;
              }
            }
            else {
              var bufferCursorPosition = self.displayPosToBufferPos(self.element.selectionStart);
              self.bufferCursorPosition = bufferCursorPosition + 1;
            }
          }

          self.setCursorByBuffer = function (bufferCursorPosition) {
            var displayCursorPos = self.bufferPosToDisplayPos(bufferCursorPosition);
            self.element.setSelectionRange(displayCursorPos, displayCursorPos);
          }

          self.moveCursor = function () {
            self.setCursorByBuffer(self.bufferCursorPosition);
          }

          self.render = function () {
            var bufferCopy = self.inputBuffer;
            var ret = {
              muskifiedValue: ""
            };

            var lastChar = 0;

            for (var i = 0; i < self.mask.length; i++) {
              if (self.mask.charAt(i) == "_" &&
                bufferCopy) {
                ret.muskifiedValue += bufferCopy.charAt(0);
                bufferCopy = bufferCopy.substr(1);
                lastChar = i;
              }
              else {
                ret.muskifiedValue += self.mask.charAt(i);
              }
            }

            self.element.value = ret.muskifiedValue;

          }

          self.preceedingMaskCharCount = function (displayCursorPos) {
            var lastCharIndex = 0;
            var ret = 0;

            for (var i = 0; i < self.element.value.length; i++) {
              if (self.element.value.charAt(i) == "_"
                || i > displayCursorPos - 1) {
                lastCharIndex = i;
                break;
              }
            }

            if (self.mask.charAt(lastCharIndex - 1) != "_") {
              var i = lastCharIndex - 1;
              while (self.mask.charAt(i) != "_") {
                i--;
                if (i < 0) break;
                ret++;
              }
            }

            return ret;
          }

          self.leadingMaskCharCount = function (displayIndex) {
            var ret = 0;

            for (var i = displayIndex; i >= 0; i--) {
              if (i >= self.mask.length) {
                continue;
              }
              if (self.mask.charAt(i) != "_") {
                ret++;
              }
            }

            return ret;
          }

          self.bufferPosToDisplayPos = function (bufferIndex) {
            var offset = 0;
            var indexInBuffer = 0;

            for (var i = 0; i < self.mask.length; i++) {
              if (indexInBuffer > bufferIndex) {
                break;
              }

              if (self.mask.charAt(i) != "_") {
                offset++;
                continue;
              }

              indexInBuffer++;
            }
            var ret = bufferIndex + offset;

            return ret;
          }

          self.displayPosToBufferPos = function (displayIndex) {
            var offset = 0;
            var indexInBuffer = 0;

            for (var i = 0; i < self.mask.length && i <= displayIndex; i++) {
              if (indexInBuffer >= self.inputBuffer.length) {
                break;
              }

              if (self.mask.charAt(i) != "_") {
                offset++;
                continue;
              }

              indexInBuffer++;
            }

            return displayIndex - offset;
          }

          self.getValue = function () {
            return this.inputBuffer;
          }
          self.element.onkeypress = self.keyEventHandler;
          self.element.onclick = self.onClick;
        }

        function InputMaskManager() {
          var self = this;

          self.instances = {};

          self.add = function (id) {
            var elem = document.getElementById(id);
            var maskInstance = new InputMask(elem);
            self.instances[id] = maskInstance;
          }

          self.getValue = function (id) {
            return self.instances[id].getValue();
          }

          document.onkeydown = function (obj) {
            if (obj.target.attributes["input-mask"]) {
              if (obj.keyCode == 8 ||
                obj.keyCode == 46 ||
                (obj.keyCode >= 37 && obj.keyCode <= 40)) {

                if (obj.keyCode == 8 || obj.keyCode == 46) {
                  obj.preventDefault();
                }

                //needs to broadcast to all instances here:
                var keys = Object.keys(self.instances);
                for (var i = 0; i < keys.length; i++) {
                  if (self.instances[keys[i]].element.id == obj.target.id) {
                    self.instances[keys[i]].keyEventHandler(obj);
                  }
                }
              }
            }
          }
        }

        //Initialize an instance of InputMaskManager and
        //add masker instances by passing in the DOM ids
        //of each HTML counterpart.
        var maskMgr = new InputMaskManager();
        maskMgr.add("phone");

        function showValue_phone() {
          //-------------------------------------------------------__Value_Here_____
          document.getElementById("console_phone").value = maskMgr.getValue("phone");
        }
      </script>
    </body>

    </html> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-31T20:18:36.660

我前段时间写了一个类似的解决方案。
当然它只是一个 PoC，可以进一步改进。

该解决方案涵盖以下功能：

*   无缝字符输入
*   图案定制
*   键入时进行实时验证
*   完整日期验证（包括每个月的正确日期和闰年考虑）
*   描述性错误，因此用户可以在无法输入字符时了解发生了什么
*   修复光标位置并防止选择
*   如果值为空，则显示占位符

```
const patternFreeChar = "_";
const dayValidator = [/^[0-3]$/, /^0[1-9]|[12]\d|3[01]$/];
const monthValidator = [/^[01]$/, /^0[1-9]|1[012]$/];
const yearValidator = [/^[12]$/, /^19|20$/, /^(19|20)\d$/, /^(19|20)\d\d$/];

/**
 * Validate a date as your type.
 * @param {string} date The date in the provided format as a string representation.
 * @param {string} format The format to use.
 * @throws {Error} When the date is invalid.
 */
function validateStartTypingDate(date, format='DDMMYYYY') {
  if ( !date ) return "";

  date = date.substr(0, 8);

  if ( !/^\d+$/.test(date) )
    throw new Error("Please type numbers only");

  const formatAsArray = format.split('');
  const dayIndex = formatAsArray.findIndex(c => c == 'D');
  const monthIndex = formatAsArray.findIndex(c => c == 'M');
  const yearIndex = formatAsArray.findIndex(c => c == 'Y');

  const dayStr = date.substr(dayIndex,2);
  const monthStr = date.substr(monthIndex,2);
  const yearStr = date.substr(yearIndex,4);

  if ( dayStr && !dayValidator[dayStr.length-1].test(dayStr) ) {
    switch (dayStr.length) {
      case 1:
        throw new Error("Day in month can start only with 0, 1, 2 or 3");
      case 2:
        throw new Error("Day in month must be in a range between 01 and 31");
    }
  }

  if ( monthStr && !monthValidator[monthStr.length-1].test(monthStr) ) {
    switch (monthStr.length) {
      case 1:
        throw new Error("Month can start only with 0 or 1");
      case 2:
        throw new Error("Month number must be in a range between 01 and 12");
    }
  }

  if ( yearStr && !yearValidator[yearStr.length-1].test(yearStr) ) {
    switch (yearStr.length) {
      case 1:
        throw new Error("We support only years between 1900 and 2099, so the full year can start only with 1 or 2");
      default:
        throw new Error("We support only years between 1900 and 2099, so the full year can start only with 19 or 20");
    }
  }

  const day = parseInt(dayStr);
  const month = parseInt(monthStr);
  const year = parseInt(yearStr);
  const monthName = new Date(0,month-1).toLocaleString('en-us',{month:'long'});

  if ( day > 30 && [4,6,9,11].includes(month) )
    throw new Error(`${monthName} have maximum 30 days`);

  if ( day > 29 && month === 2 )
    throw new Error(`${monthName} have maximum 29 days`);

  if ( date.length === 8 ) {
    if ( !isLeap(year) && month === 2 && day === 29 )
      throw new Error(`The year you are trying to enter (${year}) is not a leap year. Thus, in this year, ${monthName} can have maximum 28 days`);
  }

  return date;
}

/**
 * Check whether the given year is a leap year.
 */
function isLeap(year) {
  return new Date(year, 1, 29).getDate() === 29;
}

/**
 * Move cursor to the end of the provided input element.
 */
function moveCursorToEnd(el) {
  if (typeof el.selectionStart == "number") {
    el.selectionStart = el.selectionEnd = el.value.length;
  } else if (typeof el.createTextRange != "undefined") {
    el.focus();
    var range = el.createTextRange();
    range.collapse(false);
    range.select();
  }
}

/**
 * Move cursor to the end of the self input element.
 */
function selfMoveCursorToEnd() {
  return moveCursorToEnd(this);
}

const inputs = document.querySelectorAll("input");

inputs.forEach(input => {
  const { format, pattern } = input.dataset;
  input.addEventListener("keydown", function(event){
    event.preventDefault();
    document.getElementById("date-error-msg").innerText = "";

    // On digit pressed
    let inputMemory = this.dataset.inputMemory || "";

    if ( event.key.length === 1 ) {
      try {
        inputMemory = validateStartTypingDate(inputMemory + event.key, format);
      } catch (err) {
        document.getElementById("date-error-msg").innerText = err.message;
      }
    }

    // On backspace pressed
    if ( event.code === "Backspace" ) {
      inputMemory = inputMemory.slice(0, -1);
    }

    // Build an output using a pattern
    if ( this.dataset.inputMemory !== inputMemory ) {
      let output = pattern;
      for ( let i=0, digit; i<inputMemory.length, digit=inputMemory[i]; i++ ) {
        output = output.replace(patternFreeChar, digit);
      }
      this.dataset.inputMemory = inputMemory;
      this.value = output;
    }

    // Clean the value if the memory is empty
    if ( inputMemory === "" ) {
      this.value = "";
    }
  }, false);

  input.addEventListener('select', selfMoveCursorToEnd, false);
  input.addEventListener('mousedown', selfMoveCursorToEnd, false);
  input.addEventListener('mouseup', selfMoveCursorToEnd, false);
  input.addEventListener('click', selfMoveCursorToEnd, false);
});
```

```
input {
  width: 250px;
}
```

```
<div><input type="text" placeholder="DD/MM/YYYY" data-format="DDMMYYYY" data-pattern="__/__/____" /></div>
<div><input type="text" placeholder="MM/DD/YYYY" data-format="MMDDYYYY" data-pattern="__/__/____" /></div>
<div><input type="text" placeholder="YYYY-MM-DD" data-format="YYYYMMDD" data-pattern="____-__-__" /></div>
<div><input type="text" placeholder="Day: DD, Year: YYYY, Month: MM" data-format="DDYYYYMM" data-pattern="Day: __, Year: ____, Month: __" /></div>
<div id="date-error-msg"></div>
```

jsfiddle 的链接： [https ://jsfiddle.net/sm3xw61n/2/](https://jsfiddle.net/sm3xw61n/2/)

祝你好运！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-17T16:31:20.613

使用它来实现掩码：

[https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js](https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js)

```
<input id="phone_number" class="ant-input" type="text" placeholder="(XXX) XXX-XXXX" data-inputmask-mask="(999) 999-9999">

jQuery("#phone_number").inputmask({"mask": "(999) 999-9999"}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-14T14:28:19.683

我从这个线程决定中[实现了一个带掩码的输入](https://stackoverflow.com/questions/12578507/implement-an-input-with-a-mask/55010378#55010378)并将其调整为 IE10，并添加了 setter 和 getter 函数。

但我只测试了电话面具

```
$(document).ready(function(){
    var el_arr = document.querySelectorAll("[placeholder][data-slots]");
    for (var el_ind=0; el_ind < el_arr.length; el_ind++ ){
        var el = el_arr[el_ind];
        var pattern = el.getAttribute("placeholder"),
            slots = new Set(el.getAttribute("data-slots") || "_"),
            prev = function(j){return Array.from(pattern, function(c,i){ return slots.has(c)? j=i+1: j;});}(0),
            first = pattern.split('').findIndex(function(c){return slots.has(c);} ),
            accept = new RegExp(el.getAttribute("data-accept") || "\\d", "g"),
            clean = function(input){input = input.match(accept) || [];return Array.from(pattern, function(c){return input[0] === c || slots.has(c) ? input.shift() || c : c;});},
            format = function(){
                var elem = this;
                var i_j_arr = [el.selectionStart, el.selectionEnd].map(function(i){
                    i = clean(el.value.slice(0, i)).findIndex(function(c){ return slots.has(c);});
                    return i<0? prev[prev.length-1]: elem.back? prev[i-1] || first: i;
                });
                el.value = clean(el.value).join('');
                el.setSelectionRange(i_j_arr[0], i_j_arr[1]);
                this.back = false;
            },
            // sdo added
            get_masked_value = function(){
                var input = this.value;
                var ret=[];
                for(var k in pattern){
                    if ( !input[k] )break;
                    if( slots.has(pattern[k]) && input[k]!=pattern[k]){
                        ret.push(input[k]);
                    } 
                } 
                return ret.join('');
            },
            set_masked_value = function(input){
                var ret=[];
                var index_in_value = 0;
                for(var k in pattern){
                    if( slots.has(pattern[k]) && input[index_in_value]){
                        ret.push(input[index_in_value]);
                        index_in_value++;
                    }
                    else{
                        ret.push(pattern[k]);
                    }
                } 
                this.value = ret.join('');
            }                    
        ;
        el.get_masked_value = get_masked_value;
        el.set_masked_value = set_masked_value;
        el.back = false;
        el.addEventListener("keydown", function(event){ this.back = event.key === "Backspace";});
        el.addEventListener("input", format);
        el.addEventListener("focus", format);
        el.addEventListener("blur", function() { return el.value === pattern && (el.value=""); });
    }

}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-01T12:24:27.543

```
Array.prototype.forEach.call(document.body.querySelectorAll("*[data-mask]"), applyDataMask);

function applyDataMask(field) {
    var mask = field.dataset.mask.split('');

    // For now, this just strips everything that's not a number
    function stripMask(maskedData) {
        function isDigit(char) {
            return /\d/.test(char);
        }
        return maskedData.split('').filter(isDigit);
    }

    // Replace `_` characters with characters from `data`
    function applyMask(data) {
        return mask.map(function(char) {
            if (char != '_') return char;
            if (data.length == 0) return char;
            return data.shift();
        }).join('')
    }

    function reapplyMask(data) {
        return applyMask(stripMask(data));
    }

    function changed() {   
        var oldStart = field.selectionStart;
        var oldEnd = field.selectionEnd;

        field.value = reapplyMask(field.value);

        field.selectionStart = oldStart;
        field.selectionEnd = oldEnd;
    }

    field.addEventListener('click', changed)
    field.addEventListener('keyup', changed)
} 
```

```
Date: <input type="text" value="__-__-____" data-mask="__-__-____"/><br/>
Telephone: <input type="text" value="(___) ___-____" data-mask="(___) ___-____"/><br/> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-09T12:10:41.157

下面我描述一下我的方法。我在输入中设置事件`input`，以调用 Masking() 方法，该方法将返回我们插入的格式化字符串`input`。

html:

```
<input name="phone" pattern="+373 __ ___ ___" class="masked" required> 
```

JQ：这里我们在输入上设置事件：

```
$('.masked').on('input', function () {
    var input = $(this);
    input.val(Masking(input.val(), input.attr('pattern')));
}); 
```

JS：函数，按模式格式化字符串；

```
function Masking (value, pattern) {
var out = '';
var space = ' ';
var any = '_';

for (var i = 0, j = 0; j < value.length; i++, j++) {
    if (value[j] === pattern[i]) {
        out += value[j];
    }
    else if(pattern[i] === any && value[j] !== space) {
        out += value[j];
    }
    else if(pattern[i] === space && value[j] !== space) {
        out += space;
        j--;
    }
    else if(pattern[i] !== any && pattern[i] !== space) {
        out += pattern[i];
        j--;
    }
}

return out;
} 
```

# mysql - 日期时间比较mysql

> ID：12578512
> 
> 赞同：1
> 
> 时间：2012-09-25T07:54:01.503
> 
> 标签：mysql, datetime

我想在 MySQL 中做一个简单的日期和时间比较。像这样：

`IF( NOW() > Ticket.fixTime )`日期采用以下格式

```
IF(2012-09-25 08:47:25  >  2012-09-24 18:15:16) 
```

但是，这会返回错误的结果。

关于如何实现这一目标的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:58:59.863

你必须这样：

```
IF( TO_SECONDS(NOW()) > TO_SECONDS(Ticket.fixTime) ) 
```

### 解释

您可以使用[`TO_SECONDS`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_to-seconds)将时间转换为秒并进行比较。

```
IF('TO_SECONDS(2012-09-25 08:47:25') > TO_SECONDS('2012-09-24 18:15:16')) 
```

### 输出

输出是`binary`，即，要么`1`要么`0`：

```
mysql> SELECT TO_SECONDS('2012-09-25 08:47:25') > TO_SECONDS('2012-09-24 18:15:16');
+-----------------------------------------------------------------------+
| TO_SECONDS('2012-09-25 08:47:25') > TO_SECONDS('2012-09-24 18:15:16') |
+-----------------------------------------------------------------------+
|                                                                     1 |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT TO_SECONDS('2012-09-25 08:47:25') < TO_SECONDS('2012-09-24 18:15:16');
+-----------------------------------------------------------------------+
| TO_SECONDS('2012-09-25 08:47:25') < TO_SECONDS('2012-09-24 18:15:16') |
+-----------------------------------------------------------------------+
|                                                                     0 |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

### `IF`健康）状况

`IF`条件应该这样使用：

```
mysql> SELECT IF (TO_SECONDS('2012-09-25 08:47:25') < TO_SECONDS('2012-09-24 18:15:16'), 'True', 'False');
+---------------------------------------------------------------------------------------------+
| IF (TO_SECONDS('2012-09-25 08:47:25') < TO_SECONDS('2012-09-24 18:15:16'), 'True', 'False') |
+---------------------------------------------------------------------------------------------+
| False                                                                                       |
+---------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT IF (TO_SECONDS('2012-09-25 08:47:25') > TO_SECONDS('2012-09-24 18:15:16'), 'True', 'False');
+---------------------------------------------------------------------------------------------+
| IF (TO_SECONDS('2012-09-25 08:47:25') > TO_SECONDS('2012-09-24 18:15:16'), 'True', 'False') |
+---------------------------------------------------------------------------------------------+
| True                                                                                        |
+---------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:00:37.697

Mysql IF 语句用作

```
IF(condition, valueA, valueB) // valueA for condition is true otherwise valueB 
```

所以你应该像这样使用它：

```
SELECT IF(NOW() > Ticket.fixTime, 'what you want to show', 'i do not know')
FROM your_table 
```

或者你对 and 感到困惑`IF`，`where`你只是想要

```
SELECT * FROM your_table WHERE NOW() > Ticket.fixTime 
```

# http - PUT 参数如何传递给页面？

> ID：12578513
> 
> 赞同：23
> 
> 时间：2012-09-25T07:54:02.343
> 
> 标签：http, protocols, put

我找不到关于这个问题的准确答案：

PUT 发送的参数是在 URL 中还是在 HTTP 标头中传递？

我认为这是 HTTP 标头，但是当我使用 PUT 方法提交表单时，它会将参数附加到 URL ！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-25T07:54:47.080

> PUT 发送的参数是在 URL 中还是在 HTTP 标头中传递？

不是标题。它与 POST 相同 - 请求的 URL 或正文。唯一的区别是使用的 HTTP 动词，当然还有随之而来的语义（更新服务器上的资源）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:26:07.320

您的问题似乎与 HTML 表单有关。在这种情况下，答案是：它们不支持 PUT（浏览器仍然发送 POST 请求）。

如果不是关于 HTML 表单：这取决于您。例如，在 XmlHttpRequest 中，您可以同时使用两者。

# oracle - 如何使用第二个存储过程将 oracle 存储过程返回的结果集插入到另一个表中？

> ID：12578515
> 
> 赞同：0
> 
> 时间：2012-09-25T07:54:08.053
> 
> 标签：oracle, stored-procedures

我在 oracle 中有两个存储过程。

第一个存储过程`proc1`，从表中返回一些行`emp`。

在另一个存储过程`proc2`中，我需要调用`proc1`并将其结果集插入到另一个表中。

是否有可能做到这一点，或者有没有其他更好的方法来做到这一点？

```
-- this is proce_2
create or replace PROCEDURE FIND_EMPLOYEES 
(
  IN_REGION_ID IN NUMBER, 
  << more params >> ,   
  employee_cursor OUT SYS_REFCURSOR
) 
IS 

BEGIN    

    open employee_cursor for 

    select * from employee where <<some conditions>> ;  

END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:19:11.910

下面有两个示例将一行从复制`EMPLOYEES`到`EMPLOYEES_COPY`。我希望它会帮助你。

## 您可以使用`cursors`和`packages`：

```
DROP TABLE EMPLOYEES;
/
DROP TABLE EMPLOYEES_COPY; 
/
CREATE TABLE EMPLOYEES
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);

insert into EMPLOYEES values(1,'AA','BBB');
insert into EMPLOYEES values(2,'CC','GGG');
insert into EMPLOYEES values(3,'EEE','MMM');
insert into EMPLOYEES values(4,'FFF','ZZZ');
/
CREATE TABLE EMPLOYEES_COPY 
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);
/
CREATE OR REPLACE PACKAGE EMPLOYEE as 
type t_cursor is ref cursor;
procedure FIND(id_emp int, curEMPLOYEE out t_cursor);
procedure INSERT_COPY(id_emp int);
end EMPLOYEE;
/
CREATE OR REPLACE PACKAGE BODY EMPLOYEE as
  ---------------------------------------------
 procedure FIND(id_emp int,curEMPLOYEE out t_cursor) as
   begin
      open curEMPLOYEE  for SELECT id, FIRST_NAME, LAST_NAME
                           FROM   EMPLOYEES
                           WHERE id= id_emp;    
   end FIND;
 ---------------------------------------------
 procedure INSERT_COPY(id_emp int) as
   cur t_cursor;
   emp employees%rowtype;
   begin
      FIND(id_emp=>id_emp,curEMPLOYEE=>cur);
        LOOP
    FETCH cur INTO emp;
       EXIT WHEN cur%NOTFOUND;
       insert into EMPLOYEES_COPY
       values(emp.id,emp.FIRST_NAME,emp.LAST_NAME);
   END LOOP;
   end INSERT_COPY;   
end EMPLOYEE;
/ 
```

包非常有用，因为您可以对单个实体的功能进行分组。例如，我将针对员工的职能分组。

更多信息

*   [参考游标](http://www.oracle-base.com/articles/misc/using-ref-cursors-to-return-recordsets.php)
*   [套餐](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/09_packs.htm)

## 您还可以使用视图：

```
DROP TABLE tempEMPLOYEES;
/
DROP TABLE EMPLOYEES;
/
DROP TABLE EMPLOYEES_COPY; 
/
CREATE TABLE EMPLOYEES
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);

insert into EMPLOYEES
values(1,'AA','BBB');

insert into EMPLOYEES
values(2,'CC','GGG');

insert into EMPLOYEES
values(3,'EEE','MMM');

insert into EMPLOYEES
values(4,'FFF','ZZZ');
/

CREATE TABLE EMPLOYEES_COPY 
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);
/
CREATE GLOBAL TEMPORARY TABLE tempEMPLOYEES (
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
) ON COMMIT DELETE ROWS;
/

CREATE OR REPLACE PACKAGE EMPLOYEE as 
procedure INSERT_COPY(id_emp int);
end EMPLOYEE;
/
CREATE OR REPLACE PACKAGE BODY EMPLOYEE as
---------------------------------------------
 procedure COPY_TO_TEMP(id_emp int) as
   begin
     insert into tempEMPLOYEES
     SELECT id, FIRST_NAME, LAST_NAME
     FROM   EMPLOYEES
     WHERE id= id_emp;    
   end COPY_TO_TEMP;
 ---------------------------------------------
 procedure INSERT_COPY(id_emp int) as  
   begin
       COPY_TO_TEMP(id_emp);

       insert into EMPLOYEES_COPY
       SELECT id, FIRST_NAME, LAST_NAME
       FROM   tempEMPLOYEES;
       --WHERE id= id_emp;  <---You can add this If you need.

   end INSERT_COPY;

end EMPLOYEE;
/ 
```

[这](http://www.oracle-base.com/articles/8i/temporary-tables.php)是有关视​​图的更多信息。

您可以使用以下方法测试这两个示例：

```
DECLARE
  ID_EMP NUMBER;    
BEGIN
  ID_EMP := 4;
  EMPLOYEE.INSERT_COPY (  ID_EMP => ID_EMP) ;  
  commit;      
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:01:11.760

您可以将[REF CURSOR](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#i13057)用作常规[显式游标](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#CIHCAHJA)：

```
SQL> CREATE TABLE employee AS
  2  SELECT rownum id, 'XXX' name
  3    FROM DUAL CONNECT BY level <= 10;
Table created.

SQL> CREATE OR REPLACE PROCEDURE find_employees (
  2    emp_id NUMBER,
  3    employee_cursor OUT SYS_REFCURSOR
  4  ) IS
  5  BEGIN
  6      open employee_cursor for
  7      select * from employee WHERE id = emp_id;
  8  END;
  9  /

Procedure created.

SQL> CREATE OR REPLACE PROCEDURE do_something IS
  2     cc sys_refcursor;
  3     l employee%rowtype;
  4  BEGIN
  5     find_employees(1, cc);
  6     LOOP
  7        FETCH cc INTO l;
  8        EXIT WHEN cc%NOTFOUND;
  9        dbms_output.put_line(l.id||'-'||l.name);
 10     END LOOP;
 11  END;
 12  /
Procedure created.

SQL> EXEC do_something;
1-XXX 
```

# excel - excel求解器如何使用——简单的曲线拟合

> ID：12578519
> 
> 赞同：0
> 
> 时间：2012-09-25T07:54:21.947
> 
> 标签：excel, optimization, syntax, solver

我正在寻找一个使用 Excel 求解器的简单示例。

我有 Y 数据。我想为这些数据拟合一个模型“两个指数之和”。怎么写模型？设定的目标框和“更改值”中有什么？我使用的是 Office 2010。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:20:46.847

听起来您想使用 Solver 进行最小二乘曲线拟合？

基本示例：

将您的 X 值放在 Col A 中，将 Y 值放在 Col B 中（即测量值/观察值），然后在 Col C 中使用您的模型找到 Y 值。此模型必须包含您尝试使用求解器查找的参数。所以例如`=$G$1*exp(A1*$G$3) + $G$2*exp(A1*$G$4)`。这是具有 4 个参数的两个指数的总和。这些模型参数位于单元格 G1-G4 中，它们是您要解决的问题。在 Col D 中，您需要 Y-model 和 Y-observed so 的平方误差`=(B1-C1)^2`。然后在某个地方你需要对列 E 求和。这个总和是你的目标单元格。变化的值是包含您用于查找 Y 模型值（即 G1-G4）的参数的单元格，这些参数是您尝试求解的值。在这种情况下，您应该尝试最小化您的目标函数。

# java - jaxb如何按属性对元素进行排序？

> ID：12578521
> 
> 赞同：0
> 
> 时间：2012-09-25T07:54:31.393
> 
> 标签：java, xsd, jaxb

我有下一个 xml 方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema  xmlns:xs="http://www.w3.org/2001/XMLSchema"
        targetNamespace="http://www.example.com"
        xmlns="http://www.example.com"
        elementFormDefault="qualified">

    <xs:complexType name="TItem">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="id" type="xs:int" use="required"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:element name="Resource">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="item" type="TItem" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

基于该 xsd jaxb 生成 java 代码，我正在使用它创建下一个 xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Resource xmlns="http://www.example.com">
    <item id="10">asdf</item>
    <item id="2">some text</item>
    <item id="9">some item</item>
    <item id="14">vzxc</item>
</Resource> 
```

所以。我想生成带有按 id 排序的项目的 xml。所以应该是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Resource xmlns="http://www.example.com">
    <item id="2">some text</item>
    <item id="9">some item</item>
    <item id="10">asdf</item>
    <item id="14">vzxc</item>
</Resource> 
```

jaxb可以吗？

PS *id*不是唯一的 - 可能有很多 id="22" 的项目，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:41:19.413

尝试将您的更改`item`为`TreeSet`in`Resource`

```
@XmlRootElement(name = "Resource")
public class Resource {
    @XmlElement(required = true)
    protected Collection<TItem> item;
    ....
    public Collection<TItem> getItem() {
        if (item == null) {
            item = new TreeSet<TItem>(cmp);//cmp is an instance of Comparator<TItem>
        }
    return this.item;
} 
```

# c# - 使用来自 ASP.NET 网站的 c# 从默认电子邮件客户端（例如 Outlook，..）发送电子邮件

> ID：12578522
> 
> 赞同：1
> 
> 时间：2012-09-25T07:54:41.360
> 
> 标签：c#, asp.net, email, attachment

我正在做我的第一个项目，我需要添加一个函数作为 button_click 事件。函数应该打开默认电子邮件客户端的“发送新电子邮件”表单，为空，没有任何目的地、主题或正文，仅带有附件。

我在 stackoverflow 和 codeproject 上浏览了许多类似的教程，但无法解决。我发现类似的函数可以从代码中发送消息，但不仅仅是打开一个空的电子邮件表单并附加所需的文件。但无法成功修改。

我相信也有人在寻找这种解决方案。

到目前为止我尝试的是：

```
protected void btnSend_Click(object sender, EventArgs e)
{
    string value;
    value = lstpdfList.SelectedItem.Text;
    string file = "W:/" + value + ".pdf";

    MailMessage message = new MailMessage();
    Attachment data = new Attachment(file, MediaTypeNames.Application.Octet);
    ContentDisposition disposition = data.ContentDisposition;
    disposition.CreationDate = System.IO.File.GetCreationTime(file);
    disposition.ModificationDate = System.IO.File.GetLastWriteTime(file);
    disposition.ReadDate = System.IO.File.GetLastWriteTime(file);
    message.Attachments.Add(data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:22:08.370

您不能将 ASP.net 中的文件附加到 Outlook，这是一个安全问题。

如果您有权访问 Exchange Web 服务，则可以直接与 Exchange 交互以从该用户帐户发送带有附件等的电子邮件。

您可能必须委派对用于执行 ASP.NET 请求的用户帐户的访问权限才能成功与 Exchange Server 服务交互，您也可以使用 ASP.net 模拟。

在以下位置查看文档：

[http://msdn.microsoft.com/en-us/library/exchange/bb409286(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/bb409286(v=exchg.140).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T08:20:42.410

您无法通过 Web 应用程序在客户端自动执行 Outlook。而且您不应该在服务器上调用 Outlook。

但是，您可以做的是从 Web 服务器发送电子邮件，而不涉及 Outlook。

为此，只需按照[MSDN 上的示例进行`SmtpClient.Send()`](http://msdn.microsoft.com/en-us/library/swas0fwc.aspx).

这里还有一个以编程方式创建`MailMessage`带附件[的](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)示例。

```
public static void CreateTestMessage2(string server)
{
    string to = "jane@contoso.com";
    string from = "ben@contoso.com";
    MailMessage message = new MailMessage(from, to);
    message.Subject = "Using the new SMTP client.";
    message.Body = @"Using this new feature, you can send an e-mail message from an application very easily.";
    SmtpClient client = new SmtpClient(server);
    // Credentials are necessary if the server requires the client  
    // to authenticate before it will send e-mail on the client's behalf.
    client.UseDefaultCredentials = true;

    try 
    {
        client.Send(message);
    }  
    catch (Exception ex) 
    {
        Console.WriteLine("Exception caught in CreateTestMessage2(): {0}", ex.ToString() );           
    }              
} 
```

# c++ - 如何读取/分配指向 C++ 中结构数组的指针的元素

> ID：12578524
> 
> 赞同：1
> 
> 时间：2012-09-25T07:54:47.413
> 
> 标签：c++, arrays, pointers, struct, core-audio

在 iOS 核心音频中，API [AudioFileWritePackets](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html#//apple_ref/c/func/AudioFileWritePackets)的`inPacketDescriptions`参数定义为“指向音频数据的数据包描述数组的指针”。

它在方法签名中看起来像这样：
`const AudioStreamPacketDescription *inPacketDescriptions,`

现在 struct AudioStreamPacketDescription 定义如下：

```
struct  AudioStreamPacketDescription
{
    SInt64  mStartOffset;
    UInt32  mVariableFramesInPacket;
    UInt32  mDataByteSize;
};
typedef struct AudioStreamPacketDescription AudioStreamPacketDescription; 
```

我想知道如何创建和填充这样的“指向结构数组的指针”，甚至一旦给定变量，如何读取它。使用苹果的[speakHere](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html)示例，我在接收变量的位置放置了一个断点，并尝试将其所有内容转储到日志中。这是一个尝试示例：

```
void AQRecorder::printPacketDescriptionContents(const AudioStreamPacketDescription * inPacketDescriptions, UInt32 inNumberPackets)
{
    for (int i = 0; i < inNumberPackets; ++i)
    {
        NSLog(@"\n----------------\n");
        NSLog(@"this is packetDescriptionArray[%d].mStartOffset: %lld", i, (*inPacketDescriptions).mStartOffset);
        NSLog(@"this is packetDescriptionArray[%d].mVariableFramesInPacket: %lu", i, (*inPacketDescriptions).mVariableFramesInPacket);
        NSLog(@"this is packetDescriptionArray[%d].mDataByteSize: %lu", i, (*inPacketDescriptions).mDataByteSize);
        NSLog(@"\n----------------\n");   

    }        
} 
```

有任何想法吗？

**更新：**这是我试图弄乱它的示例日志..也许它可以帮助回答（注意在底部它一直显示为空..整个事情只是一个包是没有意义的零，因为它是一个由回调返回的变量，*应该*正确填充，还请注意它告诉我我返回的数据包数量..).. 如果我运行代码，`((const AudioStreamPacketDescription *)(inPacketDescriptions +i))->mDataByteSize)`我得到一个 EXC_BAD_ACCESS 错误

```
(lldb) po **(inPacketDescriptions)
error: indirection requires pointer operand ('const AudioStreamPacketDescription' invalid)
error: 1 errors parsing expression
(lldb) po *(inPacketDescriptions)
(AudioStreamPacketDescription) $1 = [no Objective-C description available]
(lldb) po *(inPacketDescriptions).mStartOffset
error: member reference type 'const AudioStreamPacketDescription *' is a pointer; maybe you meant to use '->'?
error: indirection requires pointer operand ('SInt64' (aka 'long long') invalid)
error: 2 errors parsing expression
(lldb) po (*inPacketDescriptions).mStartOffset
(SInt64) $2 = 0 <nil>

(lldb) po (const AudioStreamPacketDescription *)(inPacketDescriptions +1)
(const class AudioStreamPacketDescription *) $3 = 0x00000010 [no Objective-C description available]
(lldb) po (const AudioStreamPacketDescription *)(inPacketDescriptions +1)->mStartOffset
error: Execution was interrupted, reason: Attempted to dereference an invalid pointer..
The process has been returned to the state before execution.
(lldb) po ((const AudioStreamPacketDescription *)(inPacketDescriptions +1))->mStartOffset
(SInt64) $5 = 0 <nil>
(lldb) po ((const AudioStreamPacketDescription *)(inPacketDescriptions +1))->mDataByteSize
(UInt32) $6 = 0 <nil>
(lldb) po ((const AudioStreamPacketDescription *)(inPacketDescriptions +100))->mDataByteSize
(UInt32) $7 = 0 <nil>
(lldb) po ((const AudioStreamPacketDescription *)(inPacketDescriptions +500))->mDataByteSize
(UInt32) $8 = 0 <nil>

(lldb) po inPacketDescriptions[0].mStartOffset
error: parent failed to evaluate: parent is NULL
(lldb) 
```

这也是 XCode 检查器中的样子：![在此处输入图像描述](../Images/9201a8d93cd68b46c6ae5da1576701cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:57:22.960

声明一个数组`AudioStreamPacketDescription`：

```
AudioStreamPacketDescription descriptions[10];

/* Populate 'descriptions' */
descriptions[0].mVariableFramesInPacket = 4; /* For example. */ 
```

然后将其传递给函数：

```
/* 'a' is an instance of AQRecorder. */
a.printPacketDescriptionContents(descriptions, 10); 
```

当一个数组被传递给一个函数时，它会衰减到一个指针（指向数组的第一个元素）。

该示例`printPacketDescriptionContents()`仅访问数组`inNumberPackets`次的第一个元素：您需要访问每个元素：

```
NSLog(@"this is packetDescriptionArray[%d].mStartOffset: %lld",
      i,
      inPacketDescriptions[i].mStartOffset); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:29:50.900

我不记得您（客户）曾经填充过这个特定结构的实例。您将需要为这些结构创建*存储*，然后将其传递给多个调用，以便成功处理读取和写入音频数据。根据音频数据的存储方式，几种非 PCM 格式将需要此信息。

> 我想知道如何创建和填充这样的“指向结构数组的指针”，甚至一旦给定变量，如何读取它。

好吧，AudioFile I/O 和 AudioConvertor 接口中有一些 API 使用这种结构。基本上，您不会自己填充此类型。基本流程是这样的：

```
// this is not for PCM audio data
//
// we'll read up to 8 packets at a time:
const size_t MaxPacketsToRead(8);

// allocate MaxPacketsToRead ASPDs on the stack:
AudioStreamPacketDescription aspds[MaxPacketsToRead];

// audio file read function:
AudioFileID inAudioFile = ...;
Boolean inUseCache = ...;
UInt32 outNumBytes = ...;
AudioStreamPacketDescription* outPacketDescriptions(aspds);
SInt64 inStartingPacket = ...;
UInt32 ioNumPackets = MaxPacketsToRead; // << you may not get all the packets
                                        // you request, but this sets the
                                        // upper limit.
void* outBuffer = ...;

OSStatus result(AudioFileReadPackets(inAudioFile,
                                     inUseCache,
                                     &outNumBytes,
                                     outPacketDescriptions,
                                     inStartingPacket,
                                     &ioNumPackets,
                                     outBuffer
));

if (noErr != result) {
  ...uh-oh...
}

// *now* we know that we have ioNumPackets worth of valid ASPDs,
// populated by the reader. and we have the associated audio data
// in other parameters.
// we can now safely pass all this information off to a function which 
// reads the ASPDs, such as AudioFileWritePackets. 
```

*（更详细地了解 OP 的问题）*在许多情况下，您可以避免所有这些复杂性并简单地创建一个`ExtAudioFile`表示，并指定`kExtAudioFileProperty_ClientDataFormat`您的目标样本格式 - 然后 ExtAudioFile API 将代表您创建一个内部转换器，它将将任意类型的音频文件的输入转换为可用于播放样本数据的某些指定 PCM 表示。如果您想支持多种文件格式，那么在这个级别实现所有这些实际上是相当复杂的。ExtAudioFile 使得转换样本数据变得非常容易——如果这是一个选项并且它与您的流媒体场景很好地配合。

至于日志记录，从外观上看，您正在尝试打印 NULL 结构的字段。

# extjs4 - 在 extjs 4 中获取日期范围

> ID：12578525
> 
> 赞同：0
> 
> 时间：2012-09-25T07:54:51.330
> 
> 标签：extjs4

我正在处理 extJS4 中的应用程序，我需要输入 2 个值：开始日期和结束日期。

它们都需要一个 Ext.Date 对象。

[链接到日期对象](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Date)

我想要的是 startdate 是今天的日期减去 4 个月，enddate 应该是今天的日期加上 4 个月。有谁知道我怎么能做到这一点？

我也可以通过 ajax 调用来获取这些值。所以我可以在其他地方定义它们并为它们进行 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:07:03.233

在您链接的文档中有使用 Date.add 的示例：

```
var d = new Date(),
    eDate = Ext.Date,
    start = eDate.add(d, eDate.MONTH, -4),
    end = eDate.add(d, eDate.MONTH, 4); 
```

# stylus - stylus: --watch 自动重新编译错误的文件

> ID：12578531
> 
> 赞同：1
> 
> 时间：2012-09-25T07:55:01.910
> 
> 标签：stylus

就我而言，我有两个手写笔文件，包括一些 common.styl，如下所示：

```
- css/
- stylus/
   | - homepage.styl
   | - article.styl
   | - lib/
        | - common.styl 
```

主页样式

```
@import "lib/common.styl
// blah blah blah 
```

文章样式

```
@import "lib/common.styl
//blah blah blah 
```

当我设置`stylus -w stylus/ -o css/`和修改`common.styl`文件时，手写笔重新编译了`article.style`唯一的，`homepage.styl`已被忽略。

你们对此有什么想法吗？

先谢谢了。

# php - TCPDF 中锚点的自定义大小（宽度、高度）

> ID：12578540
> 
> 赞同：0
> 
> 时间：2012-09-25T07:55:37.303
> 
> 标签：php, html, anchor, tcpdf

我正在尝试创建一个具有自定义大小（宽度、高度）的锚点。基本上我想要有类似菜单的链接。

如果我将链接作为 html 放在具有自定义尺寸的单元格中，则锚在整个单元格上都不是活动的，只是在文本上......

我也尝试过 addHtmlLink() 但我再次“失败”了。

有谁知道如何做到这一点？

谢谢。

# javascript - 如何匹配字符串中的子字符串并在 Jquery 的 If 条件中相等？

> ID：12578547
> 
> 赞同：0
> 
> 时间：2012-09-25T07:56:12.500
> 
> 标签：javascript, jquery

大家好，我有一些部门和部门有一些这样的数据

```
 Department
           Casual shoe
           formal shoe
           sports shoe 
```

所以我想写一个 if 条件，我应该写一个这样的 if 条件

```
 <script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("/api/ProductLayout", function (data) {
            $.each(data, function (idx, ele) {
                $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
                $("#makeMeScrollable").append('<span>' + ele.ProductName + '</span><h4>' + ele.Price + '$' + '</h4>');
                if (ele.Department == "Shoes") {
                    alert(2);
                    //$(".img_main").empty();
                    $("<img/>").attr({ src: ele.ImageURL }).appendTo("#Watches");
                    $("#Watches").append('<span>' + ele.ProductName + '</span><h4>' + ele.Price + '$' + '</h4>');
                }
                else if (ele.Department = "Wallets") {
                    alert(3);
                    $("<img/>").attr({ src: ele.ImageURL }).appendTo("#BackPacks");
                    $("#BackPacks").append('<span>' + ele.ProductName + '</span><h4>' + ele.Price + '$' + '</h4>');
                }
                else if (ele.Department = "Belts") {
                    alert(4);
                    $("<img/>").attr({ src: ele.ImageURL }).appendTo("#Belts");
                    $("#Belts").append('<span>' + ele.ProductName + '</span><h4>' + ele.Price + '$' + '</h4>');
                }
             });
        });
    });      

</script> 
```

现在我想为鞋写一个 if 条件，如果（ele.Department == "Shoes"）我应该得到其中包含 "shoe" 的所有部门的数据，我可以为此写一个条件吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:05:35.637

回答您有关查找子字符串的问题..

我会尝试：

```
if(variableInQuestion.indexOf("shoes")!=-1)
{

} 
```

你的两个 if 条件使用 = not == 你可能想解决这个问题。

**更新：**

再看你的问题。。

```
"Formal shoes"
"Casual shoes" 
```

你有可能想要一种`endsWith("shoes")`方法吗？如果是这样： [JavaScript 中的 endsWith](https://stackoverflow.com/questions/280634/endswith-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:14:11.407

我认为您可以使用正则表达式：

这对*鞋子*不区分大小写进行测试。（也匹配“shoesprostore”）

```
if (/shoes/i.test(ele.Department)) {
} 
```

这测试**单词** *shoes*不区分大小写。（匹配“大鞋”和“小鞋”）（编辑 4）

```
if (/\bshoes\b/i.test(ele.Department)) {
} 
```

编辑：

这测试了**单词** *shoe*和*shoes*不区分大小写。

```
if (/\bshoes?\b/i.test(ele.Department)) {
} 
```

\b : 单词的开始和结束

? : 前一个字符可能出现也可能不出现

i（在第二个 / 之后）：不区分大小写

在这里查看更多[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

:)

编辑2：

感谢我的朋友 SandMan 纠正了语法不一致

编辑3：

也许您可以使用将正则表达式保存在全局范围内（在`$(document).ready(...)`语句之前）

`var shoeTest = /shoes/i;`然后

`if (shoeTest.test(...))`

# mysql - 计算连接表中的连续空行

> ID：12578551
> 
> 赞同：1
> 
> 时间：2012-09-25T07:56:31.330
> 
> 标签：mysql, sql, join

我有以下表格：

```
members:
----------------------------------------------
| member_id | member_name | member_join_date |
----------------------------------------------  

events:
-------------------------
| event_id | event_name |
-------------------------

event_dates:
--------------------------------------
| event_id | event_date | event_week |
--------------------------------------

attendance:
------------------------------------------------------------
| member_id | event_id | attendance_date | attendance_week |
------------------------------------------------------------ 
```

所以我有成员在某个时间加入了组织，他们可能会参加每周的活动（事件的发生由`event_dates`表监控）

我想要做的是让所有至少连续缺席 3 次的成员

我尽我所能，我认为我有查询的每个部分，但不知道如何将它们合并在一起。

获取他们可以参加的所有活动：

```
 SELECT
      m.member_id AS id,
      ed.event_id,
      ed.event_week
    FROM
      members AS m
      LEFT JOIN
        event_dates AS ed
        ON
          ed.event_date >= m.member_join_date 
```

获取他们实际参加的所有活动：

```
 SELECT
      m.member_id AS id,
      a.event_id
    FROM
      members AS m
      LEFT JOIN
        attendance AS a
        ON
          a.member_id = m.member_id 
```

如果我设法将两个查询合并为一个，则可能是这个问题的答案：

[连续非空值的计数](https://stackoverflow.com/questions/1321670/count-of-consecutive-not-null-values)

但这次我想计算`NULL`价值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:52:11.233

你可以试试下面：

```
select * from (select m.*,k.*, 
@rn := CASE WHEN bevent_id is null THEN @rn+1 ELSE 0 END AS rn
        from(
SELECT
      m.member_id AS id,
      ed.event_id  ,event_date  
    FROM
      members AS m
       left JOIN
        event_dates AS ed
        ON
          ed.event_date >= m.member_join_date) m
left join (SELECT
      m.member_id AS bid,
      a.event_id as bevent_id
    FROM
      members AS m
      LEFT JOIN
        attendance AS a
        ON
          a.member_id = m.member_id) k  on m.id=k.bid 
and m.event_id=k.bevent_id , (SELECT  @rn := 0) AS vars
order by m.id,m.event_date ) main
where rn>=3 
```

使用您提供的两个查询，我进行左连接以比较两个查询的结果。为了跟踪成员是否连续 3 次缺席，我使用 @rn 进行跟踪。

[SQL FIDDLE 在这里。](http://sqlfiddle.com/#!2/f73ad/35)

# jquery - InfoBubble 不填充 AJAX 调用

> ID：12578552
> 
> 赞同：1
> 
> 时间：2012-09-25T07:56:40.503
> 
> 标签：jquery, maps, infobubble

我有一个有趣的问题。当用户点击谷歌地图 V3 上的标记时，我正在使用 infoBubble 和 JQuery 来显示信息。如果我使用 infoBubble.addTab('tab info', data); 但如果我使用 infoBubble.setContent(content);

示例代码：

```
// some code here

infoBubble = new InfoBubble({
   maxWidth:  480,
   maxHeight: 250,
   borderRadius: 5,
   arrowSize: 15,
   borderWidth: 3,
   arrowPosition: 50,
   borderColor: '#D6D6D6'          
 });

$.post("/some/map/info", {id: this.get('id')}, function(data) {
          // alert (data);
          //infoBubble.addTab('Tab info', data);
          infoBubble.setContent(data);
  }); 
infoBubble.open(map, this);

// rest of the code 
```

此代码会打开信息窗口，但不会用内容填充它。如果我取消注释警告框，代码有效！不知道为什么。另外，如果我使用 addTab 函数，它也可以正常工作。我使用 FireBug 进行调试，所有变量和数据都正确填充，并且在调试模式下 - 它可以工作！一旦我退出调试并且没有警报，它就不起作用，显示空气泡。如果有人可以遮住一些光线，不胜感激。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T18:49:42.960

我知道这是一个老问题，但我刚刚遇到了同样的问题并找到了解决方案，所以我在这里为任何可能遇到这个问题的人发帖。

只需在 $.post() 函数中移动 infoBubble.open

```
$.post("/some/map/info", {id: this.get('id')}, function(data) {
      infoBubble.setContent(data);
      infoBubble.open(map, this);
}); 
```

# unit-testing - 即使实际值和预期值相同，FitNesse 值比较也会失败

> ID：12578554
> 
> 赞同：3
> 
> 时间：2012-09-25T07:56:42.110
> 
> 标签：unit-testing, fitnesse, fitsharp, dbfit

我在 SQL Server 中运行一个返回一些计算值的函数。当使用 dbFit 在 FitNesse 中测试结果时，它声称这些值不一样（请参见下面的屏幕截图）。

这些值作为浮点数返回，并且在比较所有小数时失败 - 即使它只显示两个。有没有办法限制比较的小数范围？

![不匹配的 FitNesse 值](../Images/5fc769ca1cb9da542925822c601e4a80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:02:21.060

您永远不应该比较浮点数，至少不应该严格比较。那是因为二进制系统的缺陷。

```
float a = 0.15 + 0.15
float b = 0.1 + 0.2
if(a == b) // can be false!
if(a >= b) // can also be false! 
```

由于实数中的有效数字是有限的，我们不能完美地存储实数。几乎总是有错误。尝试用二进制写 0.1！我们在屏幕上看到的 0.1 实际上只是一个近似值。这是一个广泛的主题，您可能想进入数值分析以获取详细信息。

在更一般的说明中，您可以在此处找到一些信息：[http ://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

至于你的问题：

您应该使用 ~= （大约相等）。您可以在这里找到更多信息：http: [//fitnesse.org/FitNesse.UserGuide.SliM.ValueComparisons](http://fitnesse.org/FitNesse.UserGuide.SliM.ValueComparisons)

# c# - 使用控制部件或视觉状态管理器，或两者兼而有之？

> ID：12578557
> 
> 赞同：2
> 
> 时间：2012-09-25T07:57:11.753
> 
> 标签：c#, wpf, custom-controls, visualstatemanager

我写了一个自定义控件。我目前有几个控件模板，它们都复制了很多用于显示/隐藏内容等的触发器。我正在尝试将其中一些功能移动到控件本身中以稍微整理模板，并且一直在阅读控制部分，和视觉状态管理器。

目前，该控件公开了一个属性，例如`IsExtraInfoShown`。控件模板在此属性上都有自己的触发器来显示/隐藏相应的区域。

在阅读了控制部分之后，这似乎非常适合。所有模板都有一个命名`PART_ExtraInfo`的，控件会根据需要显示/隐藏它。

但后来我读到了可视化状态管理器，这似乎推断我应该创建一个`ExtraInfoVisibility`组，并拥有模板可以定义的状态，并且可以操作 Blend 之类的编辑器`InfoShown`。`InfoHidden`

我应该使用哪个？或者可以同时使用两者？即，我隐藏/显示`PART_ExtraInfo`它是否存在，如果不是我`GotoState()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:26:05.027

似乎在使用 VisualStateManager 时，假设您也遵循**部件和状态模型**。在这种情况下，这个名字真的说明了一切。如果这还不够，那么通过 Web 上有关 VisualStateManger 的教程使用已定义的部件和状态会让人明白，这些部件不仅在使用状态时仍然相关，而且它们变得更加有用，因为它们指定了将被使用的元素控制以确定状态。有关如何使用的更多详细信息，请参阅[使用 VisualStateManager 的 Parts & States 模型（第 3 部分，共 4 部分）](http://scorbs.com/2008/06/23/parts-states-model-with-visualstatemanager-part-3-of-4/)。

就设置视觉状态的传统方法（例如使用事件处理程序中的触发器或代码）与部件和状态模型之间的重叠而言，建议似乎是，一旦您使用状态来管理您在状态组中定义的视觉概念，应避免使用触发器或直接设置代码来操纵这些值。

如果您想深入了解有关如何将 VisualStateManager 与我们熟悉的现有技术集成到 WPF 中的问题，我建议您阅读 Carole Snyder 的[The VisualStateManager and Triggers](http://blogs.msdn.com/b/wpfsdk/archive/2009/02/27/the-visualstatemanager-and-triggers.aspx)。那篇文章有一个有趣的引述，它帮助我解决了我遇到的一些问题。

> 控件作者应继续为视觉状态定义属性，即使他们使用 VisualStateManager 在其视觉状态之间进行转换。

# php - 如何使 PHP 执行停止，直到采取某些行动

> ID：12578558
> 
> 赞同：2
> 
> 时间：2012-09-25T07:57:13.497
> 
> 标签：php, javascript, ajax

我有一个 PHP 文件正在执行，它将条目插入数据库，当满足条件时（例如，$rows>500）我想停止执行，并出现两个按钮。

一个值为“继续”以继续执行脚本，从它停止的地方开始，另一个值为“取消”以删除通过脚本插入到现在的条目。

问题是我想不出一种方法来停止执行，显示两个按钮，然后根据我的选择采取行动。

我需要一些 Javascript 和 AJAX 吗？

提前致谢！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:04:28.400

您是否尝试过使用 exit(); 在脚本中？这会退出代码，从而停止它。对于继续，您可以存储您在会话中的位置。

```
$i = 0;
while () {

     if ($rows > 500) {
             echo '<div id="continueAction" class="someButton">Continue</div>';
             echo '<div class="someButton">Cancel</div>';
             $_SESSION['pos'] = $i;
             exit();
     }
     // Store some value in DB here
     $i++;
} 
```

然后通过 ajax 请求，您可以使用会话中存储的“pos”从上次中断的地方重新开始。

编辑：对于 ajax，您将需要一个 php 脚本和一种从您的按钮调用脚本的方法。我会为此使用jquery。由于您可能已经在您的网站上拥有它，您可以使用：

```
 $('#continueAction').click(function(){
      $.get('ajax/test.php', function(data) {
         $('.result').html(data);
      });
 }); 
```

它的作用是调用脚本 test.php 并将任何数据带回一个名为 data.. 的 javascript 变量中，然后将这些数据放入 .result 元素中。
根据您的应用程序类型，您将不得不稍微处理一下才能将数据放在需要的地方。但这应该让你进入正确的方向。

希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:04:53.470

像 m90 sais 你不能只使用 php。

使用可以回滚的类似事务的结构。如果满足条件，请进行 ajax 调用。向输出发送一些东西，接收响应，请求用户交互。继续进行新的调用并提交事务或回滚。

**编辑：**

使用 jQuery 的 ajax 调用的简单示例：

```
function runthescript(continue,rollback){
    $.ajax({
       type: "POST",
       url: "yourphpscript.php",
       data: {
         "isContinueing": (continue===true), 
         "isRollback": (rollback===true)
       },
       success: function(msg){
         if(msg === "calling for user interraction"){// replace this by Enum or something more performant this is just for illustration
              var answer = confirm("Want to continue?");
              if(answer){
                  runthescript(true, false);
              } else {
                  runthescript(false, true);
              }
         } else if(msg === "completed"){// replace this by Enum or something more performant this is just for illustration
              alert('completed');
         } else if(msg === "rolled back"){// replace this by Enum or something more performant this is just for illustration
              alert('rolled back');
         }
       }
     });
}
runthescript(); 
```

PHP 示例

```
<?php 
function checkStates(){
    if($rows>500){
         echo "calling for user interraction"; // replace this by Enum or something more performant this is just for illustration
         //exit(); //you can use exit if absolutely necessary, avoid if not needed.
    }
    if($finished_condition_is_met){
         echo "completed";// replace this by Enum or something more performant this is just for illustration
         //exit(); //you can use exit if absolutely necessary, avoid if not needed.
    }
}

if($_POST['isContinueing'] === true){
    //run some continuing php

    checkStates();

} else if($_POST['isRollback'] !== true){

    //run some rolling back code   
    echo "rolled back";// replace this by Enum or something more performant this is just for illustration
    //exit(); //you can use exit if absolutely necessary, avoid if not needed.

} else {

    //run some starting php

    checkStates();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:07:49.843

您必须以某种方式保存应用程序的状态，以便您可以恢复它，如果您要向客户端发送一些信息，例如包含两个按钮的表单，则 php 脚本将结束，或者如果它会不是，它仍然需要另一个请求来提交表单值（“继续”或“取消”）。

一种方法是 websockets 和 node.js。或者两个php脚本之间的好IPC。但是您最好的选择仍然是 AJAX。

只需让脚本返回一个状态代码，如“未完成”，并在发生这种情况时让 javascript 显示两个按钮，将您离开的位置保存在 a `session variable`、`echo "not done"`或`echo "{'status':'continue?'}";`然后 a`die();`

而在 javascript 中，只需询问用户下一步该做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:06:27.413

我能想到的最简单的解决方案是将 PHP 脚本一分为二，然后“继续”按钮调用第二个脚本来进行计算。

如果您测试请求参数，您甚至可以在一个脚本中完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:18:57.123

好的，让我试试这个。

```
if($rows>500)
{
    echo '<div id="cancel">Cancel</div>';
    echo '<div id="continue">Continue</div>';
    exit();
} 
```

然后在您的索引页面中包含 jquery 并具有以下内容：

```
$(document).ready(function() {
    $("#cancel").click(function() {

        var data_to_send = what you want to send

        $.ajax({
            type: "POST",  // might be too long to use GET
            url: "cancel.php", // script you want to carry out this action
            data: data_to_send,
            success: function(data) {
                $('#results').html('<p>Previously inserted rows have been deleted</p>');
                // data is just what cancel.php echos out
            }
        });
        return false;
    });

    $("#continue").click(function() {

        var data_to_send = what you want to send

        $.ajax({
                type: "POST",
                url: "continue.php",
                data: data_to_send,
                success: function(data) {
                    $('#results').html('<p>Continuing!</p>');
                }
        });
        return false;
    });
}); 
```

结果 div 可以是空的或隐藏的 div，用于输出 ajax 请求发生的情况，或者您可以选择将数据附加到现有 div。

我要做的唯一批评是将 div 替换为实际按钮，但它的工作原理相同，我只是更喜欢样式 div ...

# vba - 带有用户数据选择的excel图表

> ID：12578560
> 
> 赞同：2
> 
> 时间：2012-09-25T07:57:16.677
> 
> 标签：vba, excel, charts

我有这样的数据：

```
 Date         1st var     2nd var      ....  nth var    benchmark
  01.01.1999      1.1         2.03                3.1          1.7
  05.01.1999      1.2         2.01                3.07         1.5 
```

我需要执行以下操作：我想在同一张图表上绘制其中一个变量和基准。但我需要选择变量和日期范围的可能性，所以图表会自动更新。可以通过在单元格中输入限制或从下拉列表中选择来完成选择。

现在列长度是固定的（大约 1500 个值）。但是在这样做之后，我打算让它在插入新的数据行时自动更新。

我是新手，对 VBA 有一点了解。我使用 excel 图表管理器在一个图表上绘制了两个图表，但我不知道如何（或者甚至可能）添加数据选择。

1）是否可以只使用excel内置函数来做到这一点？如果是，我应该在 excel 或 VBA 中执行此操作吗？哪种方式更好？

2）如果写的答案太长或者最好的方法太复杂而我无法理解，你能告诉我参考吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:12:17.943

我建议您使用过滤器，因为您可以使用过滤后的数据绘制图表。您还可以为所有数据设置包含数据序列的图表，并通过隐藏数据表中的列来选择性地隐藏不需要的数据。

这些应该是最简单的尝试，它们会自动更新您的图表。

此外，您可能还想了解命名范围，因为它们简化了具有许多数据系列的图表的复杂性。

例如，试试这个：

制作一个包含两个数据系列的图表 - (data1,benchmarks),(data2,benchmarks) - 使用整个列。然后将您的数据过滤到所需的日期范围。然后用data2隐藏列。

*编辑*

当您拥有（太多）数据系列时，您可以创建选择性列的子集并将其用于您的图表。

使用此公式并将其与您的数据一起粘贴：

```
XZ2=INDEX(B2:XY2,1,$XZ$1) 
```

现在您的数据将位于 B 列和 XY 列之间，您可以通过设置 eg 来选择所需的列`XZ1 = 1`，在这种情况下将选择 coulmn B 并因此生成`XZ2=B2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T21:54:26.577

我写了一篇关于向用户呈现组合框（下拉菜单）的技术的博客，其中包含所有可能绘制的列的名称。仅绘制了其中一个，但用户可以使用组合来选择绘制哪一个。查看[Excel 中的交互式多折线图](http://peltiertech.com/WordPress/easier-interactive-multiple-line-chart/)。

# php - Yii 主题不起作用

> ID：12578566
> 
> 赞同：2
> 
> 时间：2012-09-25T07:57:29.313
> 
> 标签：php, yii, themes

我是一个新手，正在学习`yii`，但面临这个主题问题。我按照[这个](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming)url 并将所有内容复制`/protected/views`到`/themes/classic/views`. 也添加 `'theme'=>array( 'classic',) ,`到`/config/main.php`文件中，但`theme`没有被激活。我收到以下错误：

**致命错误：在第 587 行的 E:\Projects\yii\framework\web\CController.php 中的非对象上调用成员函数 getViewFile()。**

任何帮助将不胜感激。

问候费萨尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:26:40.117

您错误地将主题设置为数组而不是字符串。正确的配置是

```
'theme' => 'classic', 
```

解决此问题将解决该错误。

# facebook - Facebook：即使得到适当的许可，朋友的点赞/兴趣也会返回空白

> ID：12578567
> 
> 赞同：0
> 
> 时间：2012-09-25T07:57:34.137
> 
> 标签：facebook, facebook-graph-api, string

我正在尝试通过 Facebook Graph API 访问我朋友的喜欢。我的一些朋友喜欢正常获取，但大多数返回为空数组。

几点注意事项：

1.  我的应用具有所需的 friends_likes 权限
2.  我不做批处理请求
3.  正常访问 Facebook.com UI（不是通过 API）时，我可以看到这些朋友的点赞

有谁知道是什么导致我很多朋友的喜欢返回为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:07:26.280

# c# - 将 Stream 转换为 MemoryStream

> ID：12578570
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:58:15.683
> 
> 标签：c#, c#-4.0, stream, memorystream

我无法将我的 Stream 转换为 MemoryStream。我想这样做，因为我想删除我上传到 FTP 服务器的文件。当我尝试删除文件或将文件移动到另一个文件夹时，我收到一个异常，告诉我该文件正在被另一个进程使用。此应用程序的目的是将文件上传到 FTP 服务器，并将文件移动到存档文件夹。这是我的代码：

```
public void UploadLocalFiles(string folderName)
        {
            try
            {

                string localPath = @"\\Mobileconnect\filedrop_to_ssis\" + folderName;
                string[] files = Directory.GetFiles(localPath);
                string path;

                foreach (string filepath in files)
                {
                    string fileName = Path.GetFileName(filepath);
                    localFileNames = files;
                    reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp:......./inbox/" + fileName));
                    reqFTP.UsePassive = true;
                    reqFTP.UseBinary = true;
                    reqFTP.ServicePoint.ConnectionLimit = files.Length;
                    reqFTP.Credentials = new NetworkCredential("username", "password");
                    reqFTP.EnableSsl = true;
                    ServicePointManager.ServerCertificateValidationCallback = Certificate;
                    reqFTP.Method = WebRequestMethods.Ftp.UploadFile;

                    FileInfo fileInfo = new FileInfo(localPath + @"\" + fileName);
                    FileStream fileStream = fileInfo.OpenRead();

                    int bufferLength = 2048;
                    byte[] buffer = new byte[bufferLength];

                    Stream uploadStream = reqFTP.GetRequestStream();

                    int contentLength = fileStream.Read(buffer, 0, bufferLength);
                    var memoStream = new MemoryStream();
                    uploadStream.CopyTo(memoStream);
                    memoStream.ToArray();
                    uploadStream.Close();

                    while (contentLength != 0)
                    {
                        memoStream.Write(buffer, 0, bufferLength);
                        contentLength = fileStream.Read(buffer, 0, bufferLength);

                    }
                }

                reqFTP.Abort();
            }
            catch (Exception e)
            {
                Console.WriteLine("Error in GetLocalFileList method!!!!!" + e.Message);
            }

        } 
```

当我到达这行代码时：

```
 uploadStream.CopyTo(memoStream); 
```

我收到一个异常，告诉我这个 Stream 无法读取。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:05:34.373

`uploadStream.CopyTo(memoStream);`失败，因为您试图复制只写 FTP 请求流。我不确定您的代码在做什么（在一个地方进行许多复制/读取操作的方式），所以我不能推荐修复它的方法。

您`FileStream`也正在锁定文件。您的代码至少缺少`using`构造或`Close`调用对象。`Dispose``fileStream`

旁注：使用/为每个流手动`using`编写要容易得多（请注意，您的代码不会在出现异常时关闭流，因为您不会调用 close inside ）。`try``finally``finally`

# asp.net - 使用 Asp.Net 或 Asp.Net MVC 在浏览器中打开 Excel

> ID：12578573
> 
> 赞同：0
> 
> 时间：2012-09-25T07:58:24.227
> 
> 标签：asp.net, asp.net-mvc, excel

嗨，是否可以在浏览器中打开 Excel，用户可以在其中编辑和保存他的更改。但是不能拥有上述excel的本地副本吗？

谢谢

# animation - 如何将过渡添加到 CSS3 动画步骤

> ID：12578574
> 
> 赞同：1
> 
> 时间：2012-09-25T07:58:35.673
> 
> 标签：animation, css

我有一些图像，我想只使用 css 自动显示。我正在为此制作动画。这工作正常。

> [http://jsfiddle.net/vinnizworld/Sap24/](http://jsfiddle.net/vinnizworld/Sap24/)

但是我怎么能在动画的每个步骤中添加过渡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:36:40.710

```
@-webkit-keyframes move{
  0%{ margin-left: 0;  }
  10%{    margin-left: -440px;  }
  100%{    margin-left: -5440px;  }
} 
```

`from`和`to`是方便的关键字，但使用`%`您可以添加任意数量的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:51:30.313

你想要[http://jsfiddle.net/Sap24/2/](http://jsfiddle.net/Sap24/2/)吗？像这样写：

```
.img-wrapper{
            width: 9999px;
            margin-left: 0;
            z-index: -1;
            -webkit-animation:move 25s linear infinite;
        } 
```

# linux - 进程的命令行在进程的生命周期内是否应该保持不变？

> ID：12578576
> 
> 赞同：1
> 
> 时间：2012-09-25T07:58:54.920
> 
> 标签：linux, unix, process

在基于 linux（基于 unix）的系统中，所有进程都有所谓的`cmdline`. 可以在过程的生命周期内更改它吗？例如，`cmdline`使用一些进度/调试信息进行修改。
使用流程是否有任何限制/约定`cmdline`？

我为什么要问？在 out 项目中，为了监控特定的子系统，我们广泛使用`cmdline`对工人进行修改的方法。为了阅读`cmdlines`，我们使用 python 库 psutil。但是从某些版本开始，此实用程序开始缓存`cmdline`进程。我已经创建了关于它的错误，但其中一位作者声称，`cmdline`在进程的生命周期内不应更改（[链接到错误](http://code.google.com/p/psutil/issues/detail?id=331)）

有什么建议么？

谢谢。

**在更改下**更新**`cmdline`我不考虑更改进程的 exec 参数。我正在更改 proctitle (http://www.unix.com/man-page/FreeBSD/3/setproctitle/)**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:14:29.677

只有一种情况我会重命名命令的进程，在这种情况下，您使用 #!'d 子进程运行脚本，这使得使用 killall 很难快速找到它。

一个例子是运行一个名为 'foobar that's #!' 的 Python 脚本：

```
#!/usr/bin/python

... 
```

这将在 ps 中显示为

```
 0 18852 18810   0  1:09AM ttys006    0:03.50 /usr/bin/python -B ./foobar 
```

在这种情况下，重命名进程是有益的，因为它将与执行者的期望相匹配，如果事情变得疯狂，您可以快速发出 killall 而无需拿出放大镜。当我想让一个进程死掉时，我想让它死掉。

但是，在重命名线程的情况下呢？我用 celeryd 遇到了这个问题，发现它是无缘无故的，而且是不必要的“聪明”。我建议反对它。找到线程状态有用的论点是没有实际意义的，因为枚举进程和窥视每个人的 proc 结构以提取一点状态信息的成本比仅将其记录到 syslog 或 stdout/err 的成本要高得多。

如果您在 Linux 上并通过 /proc 文件系统进行枚举，我想它会更加昂贵。

您不应该更改它的论点，因为您“丢失”了有关程序如何启动的信息。我真的不同意这一点，因为至少对于 Linux，/proc//cmdline 默认限制为 4096我相信 - 进程参数的最大长度是 1024*1024 字节。（想想：ls -l /dir/with/100_thousand_files/*）

因此，您并不能真正保证拥有“真正的”命令行，也不应该期望它在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:04:14.950

我必须同意声称不应该改变它的人。命令行是程序的调用者作为参数提供给您的。你是不明智的。

如果您想为您的子进程提供*不同*的命令行参数，那么您可以“执行”它们。我不确定这是否是您所说的“工人”，您的问题在这个概念上有点模糊。

如果您（详细）解释您的*需求*是什么，而不是您如何尝试*实现*该需求，也许它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:41:55.657

进程唯一不变的是进程 ID。除此之外，任何事情都可以改变。例如，如果进程执行*exec*系统调用，代码和数据段会发生变化，命令行也会发生变化。

所有缓存系统都提高了速度，但某些数据必须实时更改，并且包括缓存在内的系统逻辑必须迎合它。**

# php - 在php中使用foreach函数问题

> ID：12578581
> 
> 赞同：-2
> 
> 时间：2012-09-25T07:59:06.213
> 
> 标签：php, mysql

我有这段代码可以让我获得一些 id

```
$sql_id_att="SELECT DISTINCT att_id FROM agenzia_pdv WHERE id_ag='$id_ag'";
$resultuserid_att=mysql_query($sql_id_att) or die(mysql_error());
while ($rows = mysql_fetch_array($resultuserid_att, MYSQL_ASSOC)) {

    $id_att=$rows['att_id'];
    echo $id_att;

} 
```

而这个我用来做 foreach 功能

```
foreach ($id_att as $attivita_id) {

    ?>
<form action="lista_attivita_ag_modifica.php?&id=<?php echo $attivita_id ; ?>" method="post" enctype="multipart/form-data">
 <input type="hidden" name="form_secret" id="form_secret" value="<?php echo $_SESSION['FORM_SECRET'];?>" />
<input type="submit" name="edit" value="<?php echo $row['attivita_da_promuovere']; ?>" />
</form>

<?php
    } 
```

我在这里做错了什么？它说：为 foreach 提供的参数无效但是当我打印 $id_att 它工作正常！谢谢

我有这两个数组：

```
 $attivita_name[]=$rows['attivita_da_promuovere'
 $id_att[]=$rows['att_id']; 
```

我如何使用 foreach 打印它们的内容，我的意思是我需要打印：

```
$attivita_name[0]| $id_att[0]
$attivita_name[1]| $id_att[1]
$attivita_name[2]| $id_att[2] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:01:34.557

你需要制作`$id_att`为数组

```
$sql_id_att="SELECT DISTINCT att_id FROM agenzia_pdv WHERE id_ag='$id_ag'";
$resultuserid_att=mysql_query($sql_id_att) or die(mysql_error());

$id_att = array();
$attivita_name = array();
while ($rows = mysql_fetch_array($resultuserid_att, MYSQL_ASSOC)) {
    $attivita_name[]=$rows['attivita_da_promuovere'];
    $id_att[]=$rows['att_id'];
    echo $rows['att_id'];
}

// then you can iterate $id_att using foreach loop here
$result_str = "";
for($i=0 ; $i < count($id_att) ; $i++) {
    $result_str .= $attivita_name[$i] . "|" . $id_att[$i] . "\n";
}
echo $result_str; 
```

# android - Webview 无法显示 url

> ID：12578582
> 
> 赞同：1
> 
> 时间：2012-09-25T07:59:09.697
> 
> 标签：android, webview

我已将 URL 链接从一个活动传递到另一个活动，但当我尝试在 webview 上启动它时，它显示“网页不可用”但 URL 是正确的！

PS：该网站是一个工作网络

```
 Intent intent = this.getIntent();
    String link = intent.getStringExtra("item");
    Log.d(link,"retrieved from search"); //retrieve URL from details page

    web = (WebView)findViewById(R.id.mywebview);
    web.loadUrl(link);

    web.getSettings().setJavaScriptEnabled(true);
    WebSettings ws = web.getSettings();

    ws.setUseWideViewPort(true);
    web.setInitialScale(39); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:52:11.523

您的链接应该是这样的：

```
web.loadUrl("http://www.accord-corp.com"); 
```

然后它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:45:53.623

对于旧版本的 Android (<11) 我使用

```
html = URLEncoder.encode(html).replaceAll("\\+"," "); 
```

它在较新的版本中已弃用，因此您可以对其进行检查

```
int sdk_version = android.os.Build.VERSION.SDK_INT; 

if (sdk_version < 11) // < Android 3.0
{
html = URLEncoder.encode(html).replaceAll("\\+"," ");
} 
```

我希望这会为你解决一些问题。

# orm - 加入请求：OneToMany + ManyToMany

> ID：12578584
> 
> 赞同：0
> 
> 时间：2012-09-25T07:59:14.460
> 
> 标签：orm, symfony, entity-relationship

我用一个比喻来让我的观点更容易理解。让我们想象一个图书馆。我们有书籍、书籍收藏和用户。书籍、收藏和用户是我的实体。

*   一个集合有很多书（OnetoMany，双向）
*   一本书可能已被多个用户阅读（多对多，双向）

我已经在三个实体之间建立了这些关系，到目前为止，它似乎还不错。

问题是：*如何显示给定收藏的图书列表，以及当前用户是否已阅读这些图书？*

我从这个请求书单开始；我不知道如何为用户添加子请求或类似的东西：

```
class CollectionRepository extends EntityRepository {
    public function getCollectionWithBooks($collectionName) {
        $qb = $this->createQueryBuilder('c')
           ->leftJoin('c.books', 'b')
           ->where('c.urlname = :collectionName')
                ->setParameter('collectionName', $collectionName)
           ->addSelect('b');

        return $qb->getQuery()
           ->getSingleResult();

    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:44:24.020

感谢 Coussinsky 找到了答案。

它终于比我预期的要简单得多:)

首先，我们需要链接到书籍的用户的 getter/setter。这可以通过使用控制台更新书籍实体来完成，例如：

```
php app/console doctrine:generate:entities appLibraryBundle:Book 
```

我们将有一个 getUsers() 方法返回一个 arrayCollection。

在树枝显示中，我们可以这样做：

```
{% for book in collectionWithBooks.books %}
    {% if app.user in book.users %}You have read this book.{% endif %}
{% endfor %} 
```

# database - Oracle SQLDeveloper 表名自动完成设置

> ID：12578591
> 
> 赞同：29
> 
> 时间：2012-09-25T07:59:36.560
> 
> 标签：database, oracle-sqldeveloper

我正在使用`Oracle SQLDeveloper 2.1.1.64`版本。表名自动完成没有发生。

检查了自动完成设置但徒劳无功。

有什么想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2017-01-25T09:11:03.403

虽然这篇文章很旧，但我仍然看到很多人无法获得真正的**自动完成**智能感知功能，因为一旦**自动完成值超过 10**，那么自动完成就不起作用，即在这种情况下你需要显式使用*CTRL+SPACE*来显示智能感知.

请按照步骤操作，以免您遇到此问题。

在进行此演示时，我使用的是[SQL Developer 4.2](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/sqldev-ea-42-3211401.html)。如果您在从过去升级到此版本的 SQL Developer 时遇到一些问题，那么您还需要将 JDK 更新到 1.8 或更高版本。

请按照以下步骤确保 SQL Developer 自动完成 (intellisense) 在所有情况下都能正常工作。

**第 1 步：**打开 SQL Developer 并转到**工具 -> 首选项**

**第 2 步：**选择**代码编辑器 -> 完成洞察**

**第 3 步：**确保您具有以下设置，如下面的快照所示

[![用于启用自动代码完成的快照](../Images/8d573e0b21590ae20359972e5a3ffde4.png)](https://i.stack.imgur.com/KNRZy.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T08:14:16.370

转到：`Tools > Preferences > Code Editor > Completion Insight`
并确保您的设置配置正确：

![在此处输入图像描述](../Images/f2b5f8f7037048e0124e7dd7003a4d27.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T13:31:38.637

SQL-Developer 可能无法在您的数据库上足够快地查找完成，因此不会显示它。您可以`CTRL-SPACE`尝试强制使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-05T17:36:37.303

如果没有任何效果，请打开一个新工作表。很多时候这是真正的问题。当前工作表已损坏

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-16T18:40:54.967

就我而言，版本 18.4.0.376 Build 376.1900 每次我有**任何**缺少终止分号或未注释掉的工作表语句（在我试图完成的语句之前）时，都会忽略 Ctrl-Shift 完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-02T11:58:15.523

工具 > 首选项 > 编辑器 > 自动替换检查已启用并创建定义文件。AutoReplace 定义文件格式应为**ssf = select * from** 并每行输入一项等。对于版本 8.0.1.1498

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-30T06:00:43.007

CTRL-SPACE 有效，但仅在智能感知下拉列表出现之前。我必须在它出现之前增加时间延迟，以便它在 4 秒后才会出现。这样，我有 4 秒的时间按 ctrl+space 来自动完成

# xpages - 计算字段以显示表单或视图的最新添加

> ID：12578593
> 
> 赞同：1
> 
> 时间：2012-09-25T07:59:44.460
> 
> 标签：xpages

我想找到一种方法来获取从另一个 nsf 文件（不是当前文件）添加到某个 Form(View) 的最新文档的 unid。

**编辑**

我用第一列 @Created 降序创建了一个视图

然后我尝试了：

```
var db:NotesDatabase = session.getDatabase("", "product/picture.nsf");
if (db == null) {
     return "Database not open";
} else {
     var unid = db.GetView("pictures4").getFirstDocument().getUniversalID();
     return unid;
} 
```

这给了我一个错误：

[TypeError] 在“lotus.domino.local.Database [静态 Java 接口包装器，lotus.domino.local.Database:lotus.domino.Database]”类型的对象上调用方法“GetView(string)”时出错

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:45:11.293

这里有几点。

1) 您收到的错误消息是在 NotesDatabase 中调用 GetView() 时出错。SSJS 中的方法区分大小写并且总是驼峰式。GetView() 方法不存在。你需要getView()。

2）如果数据库不在该位置，您的代码将引发错误。getDatabase(String, String) 返回一个未打开的 NotesDatabase 对象。要返回null，需要第三个参数，所以getDatabase(String, String, boolean) 使用false。查看有关该主题的 Domino Designer 帮助。

3) getDatabase("", "product/picture.nsf") may throw different results for XPiNC and web. In XPiNC I believe "" means local server - it does for @DbLookup. It's best to get into the practice of using getDatabase(database.getServer(), "product/picture.nsf").

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:06:25.653

接下来我建议：

1.  使视图的第一列（让我们将此视图称为“ByDate”）按“创建日期”降序排序。
2.  那么你需要做这样的事情：
    *   要获取最后一个文档 unid 的初始化数据库： session.getDatabase(server, filepath)
    *   var unid = NotesDatabase.GetView("ByDate").getFirstDocument().getUniversalID()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:07:55.370

有很多方法可以做到这一点

1.  使用数据库类的 getModifiedDocuments 方法来做到这一点
2.  根据创建日期在 db2 中进行搜索
3.  在 db2 中查找或创建一个视图，该视图包含该文档并按降序排序并使用 view.getFirstDocument()

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:09:32.297

在另一个 id 中查看以 desc 顺序显示所有相关文档的 UNID 使用 session.getDatabase() (http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesSession_sample_JavaScript_code_for_XPages#getDatabase)打开另一个数据库。打开视图并导航到视图中的第一个文档。您可以自行选择，是否使用 Viewnavigator 并通过读取列值或打开文档网并返回 UNID 来获取值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T11:39:02.060

你试过 var unid = db.getView("pictures4").getFirstDocument().getUniversalID(); 而不是 var unid = db.GetView("pictures4").getFirstDocument().getUniversalID(); ?

# javascript - Javascript websocket异步不休眠

> ID：12578596
> 
> 赞同：2
> 
> 时间：2012-09-25T07:59:45.947
> 
> 标签：javascript, asynchronous, websocket

我来自固件背景，主要用普通程序 C 编写代码。

目前，我需要一个 Web 浏览器通过专用 TCP 套接字连接到某些硬件，并以自定义协议格式交换数据。我们选择走 Websockets 路线，因为这项技术适用于新手机、PC 和平板电脑。

我的问题是 Javascript 没有真正的 Sleep() 函数。通常我们会这样做：

1.  发送一个消息。
2.  在硬件处理消息时休眠。
3.  获得响应并继续运行程序。

例如，我想将一些数据保存到硬件。

1.  在协议中发送数据。
2.  得到确认硬件保存数据的响应。
3.  如果成功发送消息A，否则发送一些消息B。

问题是第 3 步无法完成，因为没有睡眠。我已阅读有关 setTimeoutfunction() 的信息，但这并不能解决我的问题。让回调事件处理每个接收到的数据包并跳转到不同的函数似乎很混乱。另外，如果我在一个while循环中有很多发送，这对于回调函数来说似乎是不可能的？

我知道我的方法可能是错误的，但有人可以向我解释如何调整我的推理来处理这种情况吗？

任何意见或建议将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:10:54.733

即使 javascript 中有响应，您也不应该使用 sleep 来等待 Websocket 响应。使用 sleep 会挂起您的整个站点以等待套接字响应。例如，挂起我的意思是，没有来自用户的交互。

处理无休止的回调你需要先做一些设计，而不是到处乱扔。

执行此操作的规范方法是为（Web）socket 注册一个处理程序，当服务器向您发送消息时调用该处理程序。您的应用程序在内部记住它的状态（阅读有关状态机的信息）并知道如何处理此消息，在当前执行点。

顺便提一句。如果您的流程只是您写的询问服务器并等待响应，请考虑使用简单的 AJAX。WebSocket 旨在允许服务器在它（服务器）决定时将消息推送到接收器，而不仅仅是响应显式请求。AJAX 是为这个用例设计的，您可以同步调用它，这样即使没有睡眠也可以使您的程序线性化；）

# c# - 无法聚焦的表单 C#

> ID：12578599
> 
> 赞同：0
> 
> 时间：2012-09-25T08:00:03.060
> 
> 标签：c#, winapi

我需要在 C# 中创建不可聚焦的表单。在那个表格上会有按钮。按下该按钮后，我想将 System.Clipboard 的内容粘贴到光标所在的位置。这是我到目前为止所拥有的：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    const int WS_EX_NOACTIVATE = 0x08000000;
    const int WS_EX_TOPMOST = 0x00000008;
    const int WS_EX_TOOLWINDOW = 0x00000080;
    const int WM_MOUSEACTIVATE = 0x0021;
    const int WS_EX_WINDOWEDGE = 0x00000100;
    const int MA_NOACTIVATEANDEAT = 4;
    const int WM_NCHITTEST = 0x0084;
    //const int WM_ACTIVATEAPP = 0x001C;
    const int WS_THICKFRAME = 0x00040000;
    const int WS_CHILD = 0x40000000;
    const int WS_BORDER = 0x00800000;
    const int WS_DLGFRAME = 0x00400000;
    const int WS_CAPTION = WS_BORDER | WS_DLGFRAME;
    const int WS_SYSMENU = 0x00080000;

    protected override bool ShowWithoutActivation { get { return true; } }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams ret = base.CreateParams;
            ret.Style = WS_THICKFRAME |
               WS_CHILD | 
                WS_CAPTION | 
                WS_SYSMENU;
            ret.ExStyle |= WS_EX_NOACTIVATE | 
                WS_EX_TOOLWINDOW |
                WS_EX_TOPMOST | 
                WS_EX_WINDOWEDGE;
            ret.X = this.Location.X;
            ret.Y = this.Location.Y;
            return ret;
        }
    }

    private void simpleButton1_Click(object sender, EventArgs e)
    {
        Clipboard.SetText("text1 text2");
        SendKeys.SendWait("^v");
    }
} 
```

该表格不是我申请的主要表格。仅当焦点在我的应用程序中时，该代码才有效。如果我关注记事本或任何其他程序剪贴板内容不会粘贴到它。任何人都可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:57:51.673

当您的应用程序获得焦点时，将发送包含先前焦点窗口句柄的`WM_ACTIVATE`or消息。`WM_ACTIVATEAPP`然后，您可以使用 重新设置焦点`SetActiveWindow`。您仍然应该像往常一样收到点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:28:17.373

我认为首先你必须确定一个窗口来发送击键。

[我在 codeproject](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)找到了一个很好的示例，这里有很多问题：[1](https://stackoverflow.com/questions/3047375/simulating-key-press-c-sharp)和[其他](https://stackoverflow.com/search?q=send+key+to+window+C%23&submit=search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:24:26.063

学会正确地为你的问题命名。我相信您正在寻找剪贴板监视器片段。您必须注册您的应用程序才能拦截剪贴板更改的事件。

```
[DllImport("User32.dll", CharSet=CharSet.Auto)]
public static extern IntPtr SetClipboardViewer(IntPtr hWndNewViewer);

_ClipboardViewerNext = SetClipboardViewer(this.Handle);

protected override void WndProc(ref Message m)
{
    switch ((Win32.Msgs)m.Msg)
    {
        case Win32.Msgs.WM_DRAWCLIPBOARD:
        // Handle clipboard changed
        break;
        // ... 
   }
} 
```

请参阅[此答案](https://stackoverflow.com/a/621582/612717)和[本文](http://www.radsoftware.com.au/articles/clipboardmonitor.aspx)。

# python - 如果尝试读取其输出，Python 子进程会挂起

> ID：12578600
> 
> 赞同：1
> 
> 时间：2012-09-25T08:00:08.117
> 
> 标签：python, subprocess

我有一个用于执行外部进程的小实用程序功能。在某些情况下，当我尝试读取进程的输出时它会挂起。注释掉输出阅读行，它可以工作。

```
def execute(command, cwd):
    command = command.split(' ')
    process = Popen(command,
        stderr=STDOUT, stdout=PIPE,
        cwd = cwd)

    # WITHOUT THIS IT WORKS
    #for line in process.stdout:    
    #    log.info('executing %s for user %s: %s' % (command, user.username, line))

    # ANOTHER TRY AT READING THE OUTPUT. ALSO MAKES IT HANG
    #output = p.communicate()[0]
    #log.info('executing %s for user %s: %s' % (command, user.username, output))

    process.wait() 
```

有什么帮助吗？我需要输出以进行调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:12:28.037

我几年前开始使用[async_subprocess](http://code.activestate.com/recipes/440554-module-to-allow-asynchronous-subprocess-use-on-win/)并且从未回头。它也可以从 PyPI [here](http://pypi.python.org/pypi/async_subprocess/0.2.1)获得。

# django - Django 项目和 SVN 加载旧代码版本

> ID：12578602
> 
> 赞同：0
> 
> 时间：2012-09-25T08:00:16.700
> 
> 标签：django, svn

我无法解释它，但用于代码版本控制的 Django + SVN 每次我在我正在处理的网站上点击刷新时都会加载旧的错误版本的文件。

因此，如果我在 2 天前更改了文件中的某些内容（从那时起进行了大量提交），它现在就会显示出来。下次我点击刷新时，会出现一天前的另一个变化。

我正在使用：Django 1.4、Apache、SVN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:05:48.333

这与 SVN 无关，我使用 git 并且有同样的问题。Apache 会缓存一定数量的站点。

删除所有`*.pyc`文件并重新启动apache。

我设置了许多（Ubuntu）别名来帮助我做到这一点。

```
# Services
# Restart apache2
alias apre='sudo service apache2 graceful'

# Delete files
# Delete all *.pyc files
alias pydel='find . -type f -name "*.pyc" -exec rm -f {} \;'

# Combinations
# Delete all *.pyc files then restart apache2
alias pyre='pydel && apre' 
```

或者开发使用`runserver`，因为当您在 Django 项目中保存文件时，这将获取更改。

# types - 有通用的中文系统字体吗？

> ID：12578603
> 
> 赞同：3
> 
> 时间：2012-09-25T08:00:17.947
> 
> 标签：types, fonts, system, typography

我正在与一家中国品牌公司合作，想删除他们的一些图片链接并用字体替换它们。我很难找到有关中文字体可用性的权威来源。

有谁知道在 OSx 和 Windows 系统上推送的任何字体？我看过优质的英文字体比较，但想找到与中文相关的东西。如果我没有得到任何有希望的答案，我可能不得不自己做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:02:26.727

这是字体列表[http://en.wikipedia.org/wiki/List_of_CJK_fonts](http://en.wikipedia.org/wiki/List_of_CJK_fonts)

我可以告诉你，最流行的中文字体是 simsun，绝大多数用户都在 windows 上，我的意思是数量非常多。连买mac书的人都会在上面安装windows。我认为您应该查看 wiki 列表并选择您认为最好的一个。仅供参考，他们使用图像的原因是为了解决您没有面临的确切问题

# objective-c - iOS 6.0 地图中的最大缩放比例？

> ID：12578604
> 
> 赞同：4
> 
> 时间：2012-09-25T08:00:27.543
> 
> 标签：objective-c, mkmapview, zooming, ios6, ios6-maps

我一直在浏览 iOS 6.0 Map 文档，但我找不到任何方法来定义 MKMapView 的最大缩放。

有没有人找到办法做到这一点？我有一个适用于 5.1.1 地图的方法，但它会听`zoomScale`现代地图所没有的（使应用程序在新 iOS 中崩溃）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:48:49.317

您可以通过设置与地图关联的区域来设置缩放级别。请参阅 MKCoordinateRegion 和 MKCoordinateRegionMakeWithDistance。不过，我发现 MapKit 没有正确响应 Xcode 4.5 中的这些调用。似乎可能存在未记录的最大缩放级别，这使我无法使用定义的 API 获得正确的缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:44:48.627

故障是在地图提供者端发现的。谷歌地图缩放比例的限制被设置了，地图服务提供商本身没有太多警告。

# eclipse - 如何获取对象的 Eclipse 调试 ID？

> ID：12578608
> 
> 赞同：8
> 
> 时间：2012-09-25T08:00:48.960
> 
> 标签：eclipse, debugging, objectid

是否有可能以编程方式获取对象 ID，这在 Eclipse 的调试工具提示中可以看到？

![在此处输入图像描述](../Images/5bf593c5730d5799d456b738efd4dd2b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T08:55:39.223

这是来自 Eclipse 调试器的内部 ID，与 JVM 无关。

您可以查看[此问题](https://stackoverflow.com/questions/3289550/java-object-id-in-jvm)以获取更多信息以及检索它的可能方法。

# c# - XMLDocument，innerxml和outerxml的区别

> ID：12578609
> 
> 赞同：17
> 
> 时间：2012-09-25T08:00:52.653
> 
> 标签：c#, xml

> **OuterXml** - 获取表示当前节点及其所有子节点的 XML 标记。
> 
> **InnerXml** - 获取仅表示当前节点的子节点的 XML 标记。

但这`XMLDocument`真的重要吗？（结果方面，我知道这并不重要，但在逻辑上？）。

**例子：**

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("<book genre='novel' ISBN='1-861001-57-5'>" +
    "<title>Pride And Prejudice</title>" +
    "</book>");

string xmlresponse = doc.OuterXml;
string xmlresponse2 = doc.InnerXml; 
```

简而言之，尽管在上面的代码中两者`xmlresponse`和`xmlresponse2`都是相同的。我应该更喜欢使用`OuterXml`or`InnerXml`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-25T16:16:51.637

如果您试图找出为什么它们 OuterXml 和 InnerXml 对于 XmlDocument 是相同的：查看 XmlDocument 表示为节点的内容 - 它是整个 Xml 树的父级。但它本身并没有任何视觉表现——所以“我”+“儿童内容”因为它与“儿童内容”相同。

您可以编写基本代码来遍历 XmlNode + children 并传递 XmlDocument 以查看它为什么会这样：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("<?xml version='1.0' ?><root><item>test</item></root>");

Action<XmlNode, string> dump=null;
dump = (root, prefix) => {
  Console.WriteLine("{0}{1} = {2}", prefix, root.Name, root.Value); 
  foreach (XmlNode n in root.ChildNodes)
  {
    dump(n, "  " + prefix);
  }
};

dump(doc,""); 
```

输出显示 XmlDocument 在 XmlDocument 本身中没有任何东西具有视觉表示，并且具有文本表示的第一个节点是它的子节点：

```
#document = 
  xml = version="1.0"
  root = 
    item = 
      #text = test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T13:31:46.793

对于 InnerXml 等于 OuterXml 的情况，如果您想要 InnerXml，则可以使用以下解决方案：

```
// Create a new Xml doc object with root node as "NewRootNode" and 
// copy the inner content from old doc object using the LastChild.
                    XmlDocument doc = new XmlDocument("FileName");
                    XmlElement newRoot = docNew.CreateElement("NewRootNode");
                    docNew.AppendChild(newRoot);
// The below line solves the InnerXml equals the OuterXml Problem
                    newRoot.InnerXml = oldDoc.LastChild.InnerXml;
                    string xmlText = docNew.OuterXml; 
```

# android - 它无法释放 actionBar 的内存

> ID：12578611
> 
> 赞同：0
> 
> 时间：2012-09-25T08:01:04.400
> 
> 标签：android, memory, android-actionbar

我有一个导航模式 NAVIGATION_MODE_LIST 的操作栏。

```
 Resources recursos = this.getResources();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ArrayAdapter adaptador = new TipoPincelAdapter(this, R.layout.spinner_tipos_pinceles_layout, recursos.getStringArray(R.array.codigo_tipo_lapiz) );
    actionBar.setListNavigationCallbacks(adaptador, this); 
```

我完成（）活动。如果我在其他时间加载此活动，然后回来完成它，我会看到我有两个对 MAT 中操作栏的引用。

## 班级名称 | 浅堆 | 保留堆 | 百分比

> com.innovativeproject.firstletters.Lienzo1Activity @ 0xb5db4ec0 | 264 | 66.144 | 0,19% |- com.android.internal.widget.ActionBarView @ 0xb5d1bb58 |
> 600 | 21.416 | 0,06% | |- android.widget.Spinner @ 0xb5db3bd8 | 600 | 4.384 | 0,01% | | |- android.view.View[12] @ 0xb5d2c870
> | 64 | 2.640 | 0,01% | | |- android.graphics.drawable.StateListDrawable @ 0xb5ce05e8 |
> 88 | 第696章 0,00% | | |- android.widget.AbsSpinner$RecycleBin @ 0xb5ce08a8 |
> 16 | 168 | 0,00% | | |- android.view.InputEventConsistencyVerifier @ 0xb5ce0568 |
> 80 | 104 | 0,00% | | |- android.widget.LinearLayout$LayoutParams @ 0xb5ce0b60 |
> 56 | 56 | 0,00% | | |- android.view.animation.Transformation@0xb5ce0810 |
> 24 | 24 | 0,00% | | |- android.graphics.Rect @ 0xb5ce0888 | 24 | 24 |
> 0,00% | | |- android.graphics.Rect @ 0xb5ce08e0
> | 24 | 24 | 0,00% | | |- android.graphics.PointF @ 0xb5ce0860 |
> 16 | 16 | 0,00% | | |- android.view.ViewGroup$3 @ 0xb5ce0878 | 16 | 16 |
> 0,00% | | |- android.widget.AdapterView$SelectionNotifier @ 0xb5ce5720 | 16 | 16 | 0,00% | | '- 总计：11 个条目 |
> | | | |- com.android.internal.widget.ActionBarView$HomeView @ 0xb5db60e0|
> 第472章 3.944 | 0,01% | |- com.android.internal.widget.ActionBarView$HomeView @ 0xb5d10958|
> 第472章 3.360 | 0,01%

* * *

如何释放操作栏以避免增加内存？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:29:04.953

从源码来看，`ActionBarView`有两个属性type`HomeView`

```
private HomeView mHomeLayout;
private HomeView mExpandedHomeLayout; 
```

`HomeView`是一个内部类。这可能就是你所看到的，无论如何你都不应该担心你的视图“增加内存”，一旦它认为合适，视图就会被 android 销毁。

# checkbox - inputCheckBox 不会从 Apex 设置

> ID：12578617
> 
> 赞同：0
> 
> 时间：2012-09-25T08:01:35.517
> 
> 标签：checkbox, salesforce, apex-code

我创建了一个 apex:dynamicComponent ，它根据存储的数据创建复选框。

复选框的创建如下：

```
Component.Apex.inputCheckbox chkBox = new Component.Apex.inputCheckbox();
if (myMap.get(myList[i]) == true) 
    chkBox.selected = true; 
```

但是当我尝试显示我的 VF 页面时，它显示：

```
System.VisualforceException: Invalid value for property selected: java.lang.String cannot be cast to java.lang.Boolean 
```

我试图用不同的值设置“chkBox.selected”（例如字符串'true'）我无法保存我的控制器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:32:15.733

与其像上面那样创建一个顶点组件，为什么我们不像下面那样创建一个复选框组件

```
public Boolean chkBox{
    get{
        if(myMap.get(myList[i]) == true){
            return true;
        } 
            return false;            
    }
    set; 
```

在 Visualforce 页面上，我们可以编写如下

```
<apex:outputLabel value="Check Box Label"/>    <apex:inputCheckBox value="{!chkBox}"><apex:actionSupport event="onclick" rerender="TheBlock" status="showCredentialing" /> 
```

由于 VF 错误没有行号，因此错误也可能是由于视觉力页面上出现的其他一些输出字段错误。

我试图在visualforce页面中实现一个独立的Component.Apex.inputCheckbox。请尝试以下代码

**控制器**

```
 public class testcontroller {
        public Component.Apex.inputCheckbox chkBox { get; set; }
        public Component.Apex.inputCheckbox dyCheckbox; 
        public PageReference chkBox3() {
           this.chkBox = new Component.Apex.inputCheckbox();
           System.debug('Here is Test');
           this.chkBox.value = true;     
           return null; 
           }
        public String chkBox2 { get; set; }
        public testcontroller(){
           this.chkBox2 = 'false';
        }
        public Component.Apex.inputCheckbox getInputCheckbox() {
           Component.Apex.inputCheckbox dyCheckbox = new Component.Apex.inputCheckbox();
           dyCheckbox.value = 'true';
           return dyCheckbox;
           }
        } 
```

**视觉力量页面**

```
<apex:page controller="testcontroller">
  <!-- Begin Default Content REMOVE THIS -->
  <h1>Congratulations</h1>
  This is your new Page: test 
  <apex:form >
    <apex:outputLabel value="Check Box Label"/>   
     <apex:inputCheckBox value="{!chkBox2}"/>

              <apex:dynamicComponent componentValue="{!InputCheckbox}" />

     <apex:commandButton value="sd" action="{!chkBox3}" title="asdf"/> 
  </apex:form>

  <!-- End Default Content REMOVE THIS -->
</apex:page> 
```

# jquery - ios 6 uiwebview 在使用 jquery scrolltop 滚动页面时显示背景

> ID：12578618
> 
> 赞同：2
> 
> 时间：2012-09-25T08:01:37.523
> 
> 标签：jquery, ios, uiwebview, ios6, xcode4.5

我有一个网页显示在 UIWebView 中，它使用 jquery scrollTop（使用 1.6.4 版本的 jquery）在页面加载后将窗口滚动到指定位置。这适用于 4.5 之前的 xcode。在我使用 xcode 4.5 构建它之后，页面会在滚动之前暂时显示 UIWebView 的背景。

这仅在 ios6 中发生。有没有人遇到过 xcode 4.5 和 ios6 的类似问题？是否有任何新的 UIWebview API 可以用来阻止这种烦人的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:51:46.570

解决了这个问题，以下是解决方案，以防将来有人偶然发现此问题：

显然，在 iOS6 UIWebView 中，当您使用 jQuery ScrollTop 滚动页面的窗口或文档或正文时，UIWebview 会闪烁显示 UIWebview 的背景。解决这个问题的简单方法是，我们应该创建一个可滚动的 div(user overflow:auto) 并在其上使用 scrollTop。现在 scrollTop 将起作用，并使 div 滚动到您提供的正确位置，但令人惊讶的是，UIWebview 中可滚动 div 中的滚动将不平滑（读起来很糟糕），因此我们必须包含一个 CSS 标签（仅适用于ios5及以上）调用-webkit-overflow-scrolling: touch; 一切都神奇地起作用。

干杯！！

# database - 在 Access 中使用组合框值进行筛选

> ID：12578621
> 
> 赞同：0
> 
> 时间：2012-09-25T08:01:44.747
> 
> 标签：database, vba, ms-access

我有 2 个从表中填充的组合框，并允许用户从该表中选择产品以转换为较小的库存。我需要做的是根据组合框 1 中选择的产品代码部分过滤组合框 2 中的产品。这可能吗，有没有人有任何指示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:09:06.820

您应该能够将组合框 2 的绑定基于组合框 1 的选定值。更新组合框 2 的绑定，使其引用组合框 1，然后重新查询。

此链接[http://www.baldyweb.com/CascadingCombo.htm](http://www.baldyweb.com/CascadingCombo.htm)有几个方法可以帮助您入门。

# python - 如何将翻译后的 pypy/rpython 链接到外部 jvm 库？

> ID：12578622
> 
> 赞同：0
> 
> 时间：2012-09-25T08:02:03.043
> 
> 标签：python, jvm, pypy, rpython

我正在尝试使用 pypy 的翻译工具链将 RPython 代码编译到 JVM。

但是，有许多 CPython 库不受支持，例如 urllib.urlopen() 无法转换为 jvm。

我是否可以将 urllib.urlopen() 和 random.random() 之类的 jvm 翻译后端链接调用链接到我提供给它的 jvm/jar 实现，从 java 编译？

使我的 RPython 转换为 JVM 以实现用户对 Python 的期望的最佳方法是什么？

# deployment - Jboss 部署问题

> ID：12578624
> 
> 赞同：1
> 
> 时间：2012-09-25T08:02:06.303
> 
> 标签：deployment, jboss

嗨，伙计们，我对整个 jboss 世界有点陌生，我对 jboss 服务器没有问题，它的启动和停止都很好，但我的问题是尝试部署 2 个应用程序，一个称为 beaver，它连接到另一个称为 twine 的 Web 应用程序-实验室，beaver 不是 Web 应用程序，但 twinelab 应用程序需要它，我必须在 twine 之前部署 beaver 1st，但我失败了它向我发送错误消息，其中包含混乱的依赖关系在 ubuntu 环境中工作我有这个任务来部署它们启动 JBoss AS7。 .. ``root@neuwo:/# ========================================= ==================================

JBoss 引导环境

JBOSS_HOME：/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final

JAVA: 爪哇

```
JAVA_OPTS:  -server -XX:+UseCompressedOops -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

10:38:18,120 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
10:38:19,166 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
10:38:19,214 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
10:38:21,077 INFO  [org.xnio] XNIO Version 3.0.3.GA
10:38:21,077 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
10:38:21,089 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
10:38:21,097 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
10:38:21,170 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
10:38:21,173 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 30) JBAS016200: Activating ConfigAdmin Subsystem
10:38:21,175 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 35) JBAS010280: Activating Infinispan subsystem.
10:38:21,262 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 45) JBAS011800: Activating Naming Subsystem
10:38:21,262 INFO  [org.jboss.as.jacorb] (ServerService Thread Pool -- 36) JBAS016300: Activating JacORB Subsystem
10:38:21,264 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 47) JBAS011940: Activating OSGi Subsystem
10:38:21,266 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 51) JBAS013101: Activating Security Subsystem
10:38:21,387 INFO  [org.jboss.as.security] (MSC service thread 1-8) JBAS013100: Current PicketBox version=4.0.7.Final
10:38:21,388 INFO  [org.jboss.as.connector] (MSC service thread 1-3) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
10:38:21,615 INFO  [org.jboss.as.naming] (MSC service thread 1-5) JBAS011802: Starting Naming Service
10:38:21,657 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-6) JBAS015400: Bound mail session [java:jboss/mail/Default]
root@neuwo:/# 10:38:22,284 INFO  [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-8) live server is starting with configuration HornetQ Configuration (clustered=false,backup=false,sharedStore=true,journalDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingjournal,bindingsDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingbindings,largeMessagesDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messaginglargemessages,pagingDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingpaging)
10:38:22,358 INFO  [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-8) Waiting to obtain live lock
10:38:22,364 ERROR [org.apache.coyote.http11.Http11AprProtocol] (MSC service thread 1-5) Error initializing endpoint: java.lang.Exception: Socket bind failed: [98] Address already in use
    at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:584) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11AprProtocol.init(Http11AprProtocol.java:121) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.Connector.init(Connector.java:983) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:267) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]

10:38:22,460 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.web.connector.http: org.jboss.msc.service.StartException in service jboss.web.connector.http: JBAS018007: Error starting web connector
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:271)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]
Caused by: LifecycleException:  Protocol handler initialization failed: java.lang.Exception: Socket bind failed: [98] Address already in use
    at org.apache.catalina.connector.Connector.init(Connector.java:985)
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:267)
    ... 5 more

10:38:22,572 INFO  [org.hornetq.core.persistence.impl.journal.JournalStorageManager] (MSC service thread 1-8) Using NIO Journal
10:38:22,987 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-6) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/deployments
10:38:22,988 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment mysql-connector-java-5.1.21-bin.jar
10:38:22,991 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment beaver.ear
10:38:22,992 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment twine.ear
10:38:23,063 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC00001: Failed to start service jboss.serverManagement.controller.management.http: org.jboss.msc.service.StartException in service jboss.serverManagement.controller.management.http: Address already in use /84.234.78.173:9990
    at org.jboss.as.server.mgmt.HttpManagementService.start(HttpManagementService.java:210) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind0(Native Method) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:344) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:336) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74) [rt.jar:1.7.0_05]
    at org.jboss.sun.net.httpserver.ServerImpl.<init>(ServerImpl.java:144)
    at org.jboss.sun.net.httpserver.HttpServerImpl.<init>(HttpServerImpl.java:54)
    at org.jboss.sun.net.httpserver.DefaultHttpServerProvider.createHttpServer(DefaultHttpServerProvider.java:38)
    at org.jboss.com.sun.net.httpserver.HttpServer.create(HttpServer.java:147)
    at org.jboss.as.domain.http.server.ManagementHttpServer.create(ManagementHttpServer.java:145) [jboss-as-domain-http-interface-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.mgmt.HttpManagementService.start(HttpManagementService.java:177) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

10:38:23,065 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.remoting.server.management: org.jboss.msc.service.StartException in service jboss.remoting.server.management: JBAS017112: Address already in use /84.234.78.173:9999
    at org.jboss.as.remoting.AbstractStreamServerService.start(AbstractStreamServerService.java:109)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind0(Native Method) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:344) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:336) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:67) [rt.jar:1.7.0_05]
    at org.xnio.nio.NioXnioWorker.createTcpServer(NioXnioWorker.java:287)
    at org.xnio.XnioWorker.createStreamServer(XnioWorker.java:135)
    at org.jboss.remoting3.remote.RemoteConnectionProvider$ProviderInterface.createServer(RemoteConnectionProvider.java:209)
    at org.jboss.as.remoting.AbstractStreamServerService.start(AbstractStreamServerService.java:101)
    ... 5 more

10:38:23,064 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.remoting.server.remoting-connector: org.jboss.msc.service.StartException in service jboss.remoting.server.remoting-connector: JBAS017112: Address already in use neuwo.info/84.234.78.173:4447
    at org.jboss.as.remoting.AbstractStreamServerService.start(AbstractStreamServerService.java:109)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind0(Native Method) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:344) [rt.jar:1.7.0_05]
    at sun.nio.ch.Net.bind(Net.java:336) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74) [rt.jar:1.7.0_05]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:67) [rt.jar:1.7.0_05]
    at org.xnio.nio.NioXnioWorker.createTcpServer(NioXnioWorker.java:287)
    at org.xnio.XnioWorker.createStreamServer(XnioWorker.java:135)
    at org.jboss.remoting3.remote.RemoteConnectionProvider$ProviderInterface.createServer(RemoteConnectionProvider.java:209)
    at org.jboss.as.remoting.AbstractStreamServerService.start(AbstractStreamServerService.java:101)
    ... 5 more

root@neuwo:/# 10:38:27,973 INFO  [org.hornetq.core.server.impl.FileLockNodeManager] (MSC service thread 1-8) Waiting to obtain live lock
10:39:23,066 ERROR [org.jboss.as.controller.management-operation] (DeploymentScanner-threads - 2) Operation ("add") failed - address: ([("deployment" => "mysql-connector-java-5.1.21-bin.jar")]) - failure description: "Operation cancelled asynchronously"
10:39:23,067 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015052: Did not receive a response to the deployment operation within the allowed timeout period [60 seconds]. Check the server configuration file and the server logs to find more about the status of the deployment.
10:39:23,069 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015052: Did not receive a response to the deployment operation within the allowed timeout period [60 seconds]. Check the server configuration file and the server logs to find more about the status of the deployment.
10:39:23,074 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015052: Did not receive a response to the deployment operation within the allowed timeout period [60 seconds]. Check the server configuration file and the server logs to find more about the status of the deployment.
^C
root@neuwo:/# etc/init.d/jboss stop 
Stopping JBoss AS7...
{"outcome" => "success"}
root@neuwo:/# 10:40:49,521 INFO  [org.hornetq.core.server.impl.FileLockNodeManager] (MSC service thread 1-8) Live Server Obtained live lock
10:40:49,613 WARNING [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-8) Critical IO Error, shutting down the server. code=6, message=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingbindings/hornetq-bindings-1.bindings (Permission denied)
10:40:49,615 SEVERE [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-8) Failure in initialisation: java.io.FileNotFoundException: /usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingbindings/hornetq-bindings-1.bindings (Permission denied)
    at java.io.RandomAccessFile.open(Native Method) [rt.jar:1.7.0_05]
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233) [rt.jar:1.7.0_05]
    at org.hornetq.core.journal.impl.NIOSequentialFile.open(NIOSequentialFile.java:99) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.journal.impl.JournalImpl.orderFiles(JournalImpl.java:394) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.journal.impl.JournalImpl.load(JournalImpl.java:1884) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.journal.impl.JournalImpl.load(JournalImpl.java:1496) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.journal.impl.JournalImpl.load(JournalImpl.java:1480) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.persistence.impl.journal.JournalStorageManager.loadBindingJournal(JournalStorageManager.java:1500) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.server.impl.HornetQServerImpl.loadJournals(HornetQServerImpl.java:1548) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.server.impl.HornetQServerImpl.initialisePart2(HornetQServerImpl.java:1445) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.server.impl.HornetQServerImpl.access$1200(HornetQServerImpl.java:138) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.server.impl.HornetQServerImpl$SharedStoreLiveActivation.run(HornetQServerImpl.java:1919) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.server.impl.HornetQServerImpl.start(HornetQServerImpl.java:366) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.jms.server.impl.JMSServerManagerImpl.start(JMSServerManagerImpl.java:269) [hornetq-jms-2.2.13.Final.jar:]
    at org.jboss.as.messaging.jms.JMSService.start(JMSService.java:73) [jboss-as-messaging-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]

10:40:49,622 INFO  [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-8) HornetQ Server version 2.2.13.Final (HQ_2_2_13_FINAL_AS7, 122) [6d4a8cda-0180-11e2-8893-d710ffcfa3d4]) started
10:40:49,625 INFO  [org.hornetq.jms.server.impl.JMSServerManagerImpl] (MSC service thread 1-3) Caching command for createTopic for testTopic since the JMS Server is not active yet
10:40:49,626 INFO  [org.hornetq.jms.server.impl.JMSServerManagerImpl] (MSC service thread 1-1) Caching command for createConnectionFactory for RemoteConnectionFactory since the JMS Server is not active yet
10:40:49,628 INFO  [org.hornetq.jms.server.impl.JMSServerManagerImpl] (MSC service thread 1-6) Caching command for createConnectionFactory for InVmConnectionFactory since the JMS Server is not active yet
10:40:49,629 INFO  [org.hornetq.jms.server.impl.JMSServerManagerImpl] (MSC service thread 1-2) Caching command for createQueue for testQueue since the JMS Server is not active yet
10:40:49,723 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-6) JBAS010406: Registered connection factory java:/JmsXA
10:40:49,764 INFO  [org.hornetq.ra.HornetQResourceAdapter] (MSC service thread 1-6) HornetQ resource adaptor started
10:40:49,765 INFO  [org.jboss.as.connector.services.ResourceAdapterActivatorService$ResourceAdapterActivator] (MSC service thread 1-6) IJ020002: Deployed: file://RaActivatorhornetq-ra
10:40:49,770 INFO  [org.jboss.as.deployment.connector] (MSC service thread 1-5) JBAS010401: Bound JCA ConnectionFactory [java:/JmsXA]
10:40:50,984 INFO  [org.jboss.as.controller] (Controller Boot Thread) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.binding.jacorb (missing) dependents: [service jboss.jacorb.orb-service] 
      service jboss.binding.jacorb-ssl (missing) dependents: [service jboss.jacorb.orb-service] 
      service jboss.jdbc-driver.mysql (missing) dependents: [service jboss.data-source.java:jboss/datasources/BeaverDS, service jboss.data-source.java:jboss/datasources/TwineDS, service jboss.data-source.java:jboss/datasources/TwineMetricsDS] 
JBAS014777:   Services which failed to start:      service jboss.web.connector.http: org.jboss.msc.service.StartException in service jboss.web.connector.http: JBAS018007: Error starting web connector
      service jboss.serverManagement.controller.management.http: org.jboss.msc.service.StartException in service jboss.serverManagement.controller.management.http: Address already in use /84.234.78.173:9990
      service jboss.remoting.server.management: org.jboss.msc.service.StartException in service jboss.remoting.server.management: JBAS017112: Address already in use /84.234.78.173:9999
      service jboss.remoting.server.remoting-connector: org.jboss.msc.service.StartException in service jboss.remoting.server.remoting-connector: JBAS017112: Address already in use neuwo.info/84.234.78.173:4447

10:40:51,038 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015954: Admin console is not enabled
10:40:51,039 ERROR [org.jboss.as] (Controller Boot Thread) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 153496ms - Started 142 of 237 services (18 services failed or missing dependencies, 74 services are passive or on-demand)
root@neuwo:/# cd local/usr/
-bash: cd: local/usr/: No such file or directory
root@neuwo:/# ls
aquota.group  aquota.user  bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  sbin  selinux  srv  sys  tmp  usr  var
root@neuwo:/# 
root@neuwo:/# ls
aquota.group  aquota.user  bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  sbin  selinux  srv  sys  tmp  usr  var
root@neuwo:/# cd usr
root@neuwo:/usr# ls
bin  games  include  lib  lib64  local  sbin  share  src
root@neuwo:/usr# cd local
root@neuwo:/usr/local# ls
ant  bin  etc  games  gwt  gxt  include  jboss  jboss.7.1.1  jdk  jdk1.7.0_05  lib  man  sbin  share  skypekit  src
root@neuwo:/usr/local# cd jboss.7.1.1/jboss-as-7.1.1.Final/
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final# ls
LICENSE.txt  README.txt  appclient  bin  bundles  copyright.txt  docs  domain  jboss-modules.jar  jdbc  modules  standalone  welcome-content
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final# cd standalone/
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# ls
configuration  data  deployments  deploymentsls  lib  log  tmp  twine-1.0.0.jar
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# cd deployments
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/deployments# ls
README.txt  beaver.ear.failed    mysql-connector-java-5.1.21-bin.jar         mysql-connector-java-5.1.21-bin.jar.redeploy  twine.ear.failed
beaver.ear  beaver.ear.redeploy  mysql-connector-java-5.1.21-bin.jar.failed  twine.ear
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/deployments# cd ..
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# cd deploymentsls 
-bash: cd: deploymentsls: Not a directory
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# etc/init.d/jboss start
-bash: etc/init.d/jboss: No such file or directory
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# /etc/init.d/jboss start
Starting JBoss AS7...
root@neuwo:/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone# =========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /usr/local/jboss.7.1.1/jboss-as-7.1.1.Final

  JAVA: java

  JAVA_OPTS:  -server -XX:+UseCompressedOops -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

10:42:48,697 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
10:42:48,903 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
10:42:48,964 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
10:42:50,475 INFO  [org.xnio] XNIO Version 3.0.3.GA
10:42:50,476 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
10:42:50,484 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
10:42:50,491 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
10:42:50,571 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
10:42:50,575 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 30) JBAS016200: Activating ConfigAdmin Subsystem
10:42:50,579 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 35) JBAS010280: Activating Infinispan subsystem.
10:42:50,660 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 45) JBAS011800: Activating Naming Subsystem
10:42:50,662 INFO  [org.jboss.as.jacorb] (ServerService Thread Pool -- 36) JBAS016300: Activating JacORB Subsystem
10:42:50,665 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 51) JBAS013101: Activating Security Subsystem
10:42:50,665 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 47) JBAS011940: Activating OSGi Subsystem
10:42:50,672 INFO  [org.jboss.as.security] (MSC service thread 1-7) JBAS013100: Current PicketBox version=4.0.7.Final
10:42:50,796 INFO  [org.jboss.as.connector] (MSC service thread 1-5) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
10:42:51,090 INFO  [org.jboss.as.naming] (MSC service thread 1-5) JBAS011802: Starting Naming Service
10:42:51,157 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-6) JBAS015400: Bound mail session [java:jboss/mail/Default]
10:42:51,863 INFO  [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-3) live server is starting with configuration HornetQ Configuration (clustered=false,backup=false,sharedStore=true,journalDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingjournal,bindingsDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingbindings,largeMessagesDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messaginglargemessages,pagingDirectory=/usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/data/messagingpaging)
10:42:51,866 INFO  [org.hornetq.core.server.impl.HornetQServerImpl] (MSC service thread 1-3) Waiting to obtain live lock
10:42:51,961 INFO  [org.apache.coyote.http11.Http11AprProtocol] (MSC service thread 1-4) Starting Coyote HTTP/1.1 on http-neuwo.info-84.234.78.173-8080
10:42:51,976 INFO  [org.hornetq.core.persistence.impl.journal.JournalStorageManager] (MSC service thread 1-3) Using NIO Journal
10:42:52,268 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-8) JBAS015012: Started FileSystemDeploymentService for directory /usr/local/jboss.7.1.1/jboss-as-7.1.1.Final/standalone/deployments
10:42:52,270 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment mysql-connector-java-5.1.21-bin.jar
10:42:52,272 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment beaver.ear
10:42:52,476 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment twine.ear
10:42:52,479 INFO  [org.jboss.as.remoting] (MSC service thread 1-6) JBAS017100: Listening on neuwo.info/84.234.78.173:4447
10:42:52,479 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on /84.234.78.173:9999
10:42:52,789 WARN  [org.hornetq.jms.server.recovery.HornetQXAResourceWrapper] (Periodic Recovery) Can't connect to any hornetq server on recovery [XARecoveryConfig [hornetQConnectionFactory=HornetQConnectionFactory [serverLocator=ServerLocatorImpl [initialConnectors=[org-hornetq-core-remoting-impl-invm-InVMConnectorFactory?server-id=0], discoveryGroupConfiguration=null], clientID=null, dupsOKBatchSize=1048576, transactionBatchSize=1048576, readOnly=false], username=null, password=null]]
10:42:52,791 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_RMERR: javax.transaction.xa.XAException: Error trying to connect to any providers for xa recovery
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.getDelegate(HornetQXAResourceWrapper.java:275) [hornetq-jms-2.2.13.Final.jar:]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.recover(HornetQXAResourceWrapper.java:77) [hornetq-jms-2.2.13.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.xaRecovery(XARecoveryModule.java:503) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.resourceInitiatedRecoveryForRecoveryHelpers(XARecoveryModule.java:471) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.bottomUpRecovery(XARecoveryModule.java:385) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.periodicWorkSecondPass(XARecoveryModule.java:166) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.doWorkInternal(PeriodicRecovery.java:789) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.run(PeriodicRecovery.java:371) [jbossjts-4.16.2.Final.jar:]
Caused by: HornetQException[errorCode=2 message=null]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.connect(HornetQXAResourceWrapper.java:351) [hornetq-jms-2.2.13.Final.jar:]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.getDelegate(HornetQXAResourceWrapper.java:251) [hornetq-jms-2.2.13.Final.jar:]
... 7 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:29:39.910

控制台日志中的关键行是：

```
10:38:22,364 ERROR [org.apache.coyote.http11.Http11AprProtocol] (MSC service thread 1-5) Error initializing endpoint: java.lang.Exception: Socket bind failed: [98] Address already in use 
```

和

```
10:38:23,063 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC00001: Failed to start service jboss.serverManagement.controller.management.http: org.jboss.msc.service.StartException in service jboss.serverManagement.controller.management.http: Address already in use /84.234.78.173:9990 
```

和

```
10:38:23,065 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.remoting.server.management: org.jboss.msc.service.StartException in service jboss.remoting.server.management: JBAS017112: Address already in use /84.234.78.173:9999 
```

ETC...

检查以确保您运行的 JBoss 实例不超过一个，并且您没有在列出的端口上运行其他服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T00:15:32.970

也许这篇文章可以帮助你： [http ://www.kevinhoke.com/2012/07/25/deploymentscanner-timeouts-on-openshift-jboss-as7/](http://www.kevinhooke.com/2012/07/25/deploymentscanner-timeouts-on-openshift-jboss-as7/)

问候，

# asp.net-mvc - ASP.NET MVC：如何强制所有链接转到 1 页？

> ID：12578625
> 
> 赞同：7
> 
> 时间：2012-09-25T08:02:16.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-routing

我试图弄清楚如何创建路由配置，以便所有 URL 都转到相同的 VIEW（页面）。

当然，如果我现在这样做，例如

/产品/ID

然后这将查看 Products 控制器。

无论 URL 是什么，我都想始终转到我的 MainController 和相同的操作

这可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T08:05:40.097

这可以通过`catchAll`路线完成：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "CatchAll",
        "{*url}",
        new { controller = "Main", action = "Index" }
    );
} 
```

或者，您可以使用默认路由并将 catchAll 路由放在它之后，这样如果没有其他路由匹配，catchAll 路由将得到它

# css - 如何将禁用的 btn 背景颜色设置为启用？（引导程序）

> ID：12578626
> 
> 赞同：0
> 
> 时间：2012-09-25T08:02:23.573
> 
> 标签：css, twitter-bootstrap

我有这样的问题：我需要禁用 btn，当用户想要他点击某个链接并启用它时。

但是我不能让禁用的 btn 看起来像正常的 btn。我的意思是 - 无法设置正常的背景颜色。

这是 jsfiddle - [http://jsfiddle.net/KckU3/14/](http://jsfiddle.net/KckU3/14/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:12:10.717

简单的破解

```
.report:disabled{
    opacity: 1;
    background: #91b958;
    color : white;
}​ 
```

查看更新[的小提琴](http://jsfiddle.net/thujeevan/KckU3/15/)

# jquery - 用于 href 属性的 Jquery cookie

> ID：12578635
> 
> 赞同：0
> 
> 时间：2012-09-25T08:03:07.590
> 
> 标签：jquery, events, cookies, append

我有一个脚本允许使用 Jquery cookie 插件保存文本：[JsFiddle](http://jsfiddle.net/gd5rX/1/)

如您所见，由于事件而保存了 div(.jq-text) 的文本

```
$('.fields a').click(function(e){
          var text = $('#inputBox').val();
    ... 
```

在同一事件中，我附加了这样的链接：

```
$('<a href="' + text + '">' + text + '</a>').appendTo('.jq-text'); 
```

现在的问题是正在保存文本（刷新页面）但链接没有。那么这怎么可能，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:26:57.973

您为什么不尝试以下方法，但可能有更好的方法

```
$(document).ready(function() {
    var cookie = $.cookie('demoCookie');

    // If the cookie has been set in a previous page load, show it in the div directly:
    if (cookie){
        $('.jq-text').text(cookie).show();
        $('.jq-text').attr('href', cookie);
    }

    $('.fields a').click(function(e) {
        var text = $('#inputBox').val();

        // Setting a cookie with a seven day validity:
        $.cookie('demoCookie', text, {
            expires: 7,
            path: '/'
        });
        $('.jq-text').text(text).slideDown('slow');
        $('.jq-text').attr('href', text);
        e.preventDefault();
    });

    $('#form1').submit(function(e) {
        e.preventDefault();
    });
});​ 
```

看看更新的[小提琴](http://jsfiddle.net/thujeevan/gd5rX/5/)

# c++ - 消息框检测 YesNoCancel 按钮

> ID：12578642
> 
> 赞同：4
> 
> 时间：2012-09-25T08:03:41.447
> 
> 标签：c++, messagebox, vcl

我在 C++ Builder 中使用 VCL Forms 应用程序。我可以在一些代码中获得一些帮助，以显示带有 YesNoCancel 按钮的消息框，然后检测是否按下了是、否或取消按钮。

这是我的代码：

```
if(MessageBox(NULL, "Test message", "test title",  MB_YESNOCANCEL) == IDYES)
{

} 
```

我已经包括以下内容：

```
#include <windows.h> 
```

我收到以下错误：

E2034 无法将 'char const[13]' 转换为 'const wchar_t *'

E2342 参数“lpText”中的类型不匹配（需要“const wchar_t *”，得到“const char *”）

**更新**

这是我的代码：

```
const int result = MessageBox(NULL, L"You have " + integerNumberOfImportantAppointments + " important appointments. Do you wish to view them?", L"test title",  MB_YESNOCANCEL); 
```

值： integerNumberOfImportantAppointments 是一个整数。如何在消息框中显示它？

我收到以下错误：无效的指针添加。

另外，我可以选择消息框的图标吗？在这种情况下的一个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T09:03:20.323

干得好。您需要在调用中使用宽字符，`MessageBox`并且需要将结果存储在变量中，然后再确定下一步该做什么。

```
const int result = MessageBox(NULL, L"Test message", L"test title",  MB_YESNOCANCEL);

switch (result)
{
case IDYES:
    // Do something
    break;
case IDNO:
    // Do something
    break;
case IDCANCEL:
    // Do something
    break;
} 
```

**更新，以下问题编辑：**

```
// Format the message with your appointment count.
CString message;
message.Format(L"You have %d important appointments. Do you wish to view them?", integerNumberOfImportantAppointments);

// Show the message box with a question mark icon
const int result = MessageBox(NULL, message, L"test title",  MB_YESNOCANCEL | MB_ICONQUESTION); 
```

您应该阅读[MessageBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:15:13.100

我没有使用 C++ Builder 的经验，但您似乎正在使用 ANSI 字符串，其中需要 UNICODE（实际上是宽字符，但我们暂时忽略细节）字符串。尝试这个：

```
if(MessageBox(NULL, L"Test message", L"test title",  MB_YESNOCANCEL) == IDYES) 
```

更好的是，为了确保您的字符串符合您的应用程序设置，您可以使用：

```
if(MessageBox(NULL, _T("Test message"), _T("test title"),  MB_YESNOCANCEL) == IDYES) 
```

这将导致在 UNICODE 构建中使用宽 (wchar_t*) 字符串，在非 UNICODE 构建中使用窄 (char*) 字符串（请参阅[项目选项](http://docwiki.embarcadero.com/RADStudio/en/C++_%28Shared_Options%29)中的“_TCHAR 映射到”部分）

有关更多详细信息，请参见[此处](http://docwiki.embarcadero.com/RADStudio/en/TCHAR_Mapping)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:48:11.717

我不确定如何在 C++ Building 中执行此操作，但您需要启用我认为类似多位字符的功能，但您需要使用编译器检查文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-28T11:06:53.300

上面写的所有内容对于 VS 2015 来说可能已经过时了。就我而言

```
 MessageBox(NULL, L"Test message", L"test title",  MB_YESNOCANCEL); 
```

不起作用，因为第一个参数过多。错误输出是：

`to many arguments in functional call.`

如果我写：

```
const int result = MessageBox( L"Test message", L"test title",  MB_YESNOCANCEL); //Without NULL

switch (result)
{
case IDYES:
    // Do something
    break;
case IDNO:
    // Do something
    break;
case IDCANCEL:
    // Do something
    break;
} 
```

这将是工作！

# c - 不使用 << 或 >> 检查 32 位的符号位

> ID：12578650
> 
> 赞同：3
> 
> 时间：2012-09-25T08:03:59.447
> 
> 标签：c, bit, sign

我需要一种仅使用运算符在 32 位整数（最高有效位）中查找符号位的方法！~ & ^ | +。我只能使用最大为 0xFF 的常量，但可以构造更大的数字。它必须是内联代码，没有循环或条件

是的，这是一个作业，但这不是全部问题，它只是我需要检查的一个小案例。

我知道我可以通过执行 x>>31 来获得符号，这可以使用除法来完成，但这只会导致需要更多我无法使用的位移:(

操作员越少越好，因为我只允许 10 人完成整个问题，这只是一个小案例。

这是为了检查数字 x 是否等于 0x7FFFFFFF。我的代码现在读取的方式是 [(is x neg?) & (is x+1negative)]。如果 x 等于 0x7FFFFFFF 然后加 1 将溢出缓冲区导致 x 变为负数。但是这个逻辑只有在 x 事先不是负数的情况下才有效。因此是第一部分。

请帮帮我？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:43:59.940

测试符号位很困难；对于整个问题，我认为您正在寻找类似的东西

```
!((~x) ^ (x + 1)) 
```

这测试`~x`和`x + 1`是按位相同的，即相同的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:30:26.933

你可以使用工会吗？这与您的其他参数一致。小心检查处理器的字节顺序。这决定了数组索引应该是 0 还是 3。

```
typedef union
    {
    int integer;
    unsigned char byte[4];
    } IntSplitter;

IntSplitter a;
a.integer = ValueToBeTested + 1;
// now the value (a.byte[3]&0x80) returns 1 for neg or 0 for pos
// for example
if(a.byte[3]&0x80)
    // code if negative.. 
```

编辑：我已经说过字节序决定了索引应该是 0 还是 3。如果我弄错了，另一种方法仍然非常简单......实际上比我之前的例子容易得多。

```
#ifdef BIG_ENDIAN
typedef union
    {
    int integer;
    struct
        {
        unsigned IsNegative :1
        unsigned :7
        unsigned :8
        unsigned :8
        };
    }CheckNeg_t
#else
typedef union
    {
    int integer;
    struct
        {
        unsigned :8
        unsigned :8
        unsigned :7
        unsigned IsNegative :1
        };
    }CheckNeg_t
#endif

CheckNeg_t a;
a.integer = ValueToBeTested + 1;

if(a.IsNegative)
    // code if negative.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:53:55.417

```
#include <limits.h>

negative = !!(INT_MIN & number); 
```

# javascript - 检测已删除的嵌入推文

> ID：12578652
> 
> 赞同：0
> 
> 时间：2012-09-25T08:04:09.293
> 
> 标签：javascript, twitter, embed, tweets

如果您在网页上嵌入推文，而推文的作者随后删除了原始推文，则嵌入内容将继续显示在您的网页上，尽管会减去作者的头像和意图链接。

我想隐藏此类推文，或者可能向我的服务器发送调用以删除我数据库中的这些对象。我认为作者有删除的理由，并且可能希望不再显示该推文。

我不是 JavaScript 专业人士，所以我只是猜测[http://platform.twitter.com/widgets.js](http://platform.twitter.com/widgets.js)中有一些东西可以检测到这种情况，因此不会显示头像和链接。

我可以捕获它并使用它来隐藏嵌入或进行 ajax 调用吗？

我已经在页面上有 jQuery，如果有帮助的话。

[编辑] 另一件事：“实时”嵌入式推文包括

```
 <span class=avatar> 
```

包含图像。如果推文已被删除，则相同的跨度为空。这可以用 JavaScript 检测到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:02:39.550

我知道这很旧，但我遇到了类似的问题，我找到了解决方案。

我解决它的方法是使用应用于 oembed 中的块引用的 css 规则。如果你做这样的事情：

```
.container blockquote {
    display: none;
} 
```

基本上，widgets.js javascript 将自动删除此 css 规则，但仅适用于存在的推文，将不存在的推文保留为 display:none 并隐藏。

这似乎有点骇人听闻，但直到 twitter 为我们提供了一个稍微好一点的小部件 javascript api 之前，它似乎是一个不错的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T01:01:08.543

如果 Tweet 已被删除，blockquote 元素将保留，并且 iframe 的高度为 0。我通过 jQuery ajax 加载嵌入的 Tweets，并使用 $.getScript() 加载 widget.js。

```
jQuery.getScript('http://platform.twitter.com/widgets.js', function() {
    $('blockquote.twitter-tweet').remove();
}); 
```

# session - symfony2 会话自动启动

> ID：12578653
> 
> 赞同：2
> 
> 时间：2012-09-25T08:04:10.407
> 
> 标签：session, symfony

我想在登录之前不执行登录时开始会话。

我发现，当我在表单中使用 csrf 令牌时，它也会启动会话。

现在我禁用了 csrf 令牌，但系统也启动了一个会话。

symfony2 的哪些部分也在创建会话？

如何使用 xdebug 在我的应用程序中检测到正确的一方？我将断点放在 Session.class 中，但 xdebug 从未停止过这一点。

非常感谢你。

我正在使用 symfony 2.0。

这是我的 config.yml 部分

```
session:
    default_locale: %locale%
    lifetime: %session_lifetime%        
    path: /
    domain: %session_authdomain%            
    name: sid
    auto_start: false 
```

这是我的 security.yml

```
security:
encoders:        
    Danke\ForumBundle\Entity\Forumuser: sha512
    Danke\ForumBundle\Entity\Admin: sha512

role_hierarchy:
    ROLE_MODERATOR: [ROLE_MANAGE_DEAL, ROLE_MANAGE_COMMENT]
    ROLE_ADMIN: [ROLE_MODERATOR, ROLE_MANAGE_CATEGORY, ROLE_MANAGE_AFFILIATELINK, ROLE_MANAGE_FORUMUSER, ROLE_MANAGE_BADLINK, ROLE_MANAGE_BADWORD]
    ROLE_SUPERADMIN: [ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH,  ROLE_MANAGE_EXCLUSIVEDEAL, ROLE_MANAGE_ADMIN]

providers:
    forumuser:
        providers: u_email, u_username
    u_email:
      entity: { class: Danke\ForumBundle\Entity\Forumuser, property: email }
    u_username:
      entity: { class: Danke\ForumBundle\Entity\Forumuser, property: username }
    admin:
        providers: a_email, a_username
    a_email:
      entity: { class: Danke\ForumBundle\Entity\Admin, property: email }
    a_username:
      entity: { class: Danke\ForumBundle\Entity\Admin, property: username }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    admin:
      # since anonymous is allowed users will not be forced to login
      pattern:   /admin/
      form_login:
        provider: admin
        login_path:  /admin
        check_path:  /admin/login
        always_use_default_target_path: true
        default_target_path: /admin/deal
      anonymous: false
      logout:
            path:   /admin/logout
            target: /admin

    public:
      # since anonymous is allowed users will not be forced to login
      pattern:   ^/.*          
      form_login:
        provider: forumuser
        login_path:  /login
        check_path:  /login_check/form
        #default_target_path: has to be declard in AuthenticationHandler
        success_handler: danke.forum.listener.authenticationhandler
        failure_handler: danke.forum.listener.authenticationhandler
      anonymous: true
      logout: true

access_control:
  //some access Control pages 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:54:41.953

在您的公共防火墙中，禁用匿名身份验证，因为它需要会话来识别未登录的用户。

您可以替换为：

```
firewalls:
    public:
      # since anonymous is allowed users will not be forced to login
      pattern:   ^/.*   
      security: false 
```

# java - Javadocs 指定问题编号

> ID：12578655
> 
> 赞同：2
> 
> 时间：2012-09-25T08:04:16.120
> 
> 标签：java, comments, javadoc, issue-tracking

我遇到了一个问题，想更改我的 java 代码中的功能，例如 #41241。

**什么是正确的 Javadoc 注释来指定请求此更改的问题编号？**

只是将来我知道，为什么要更改/创建某个功能或行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:32:55.563

我不会将问题编号写入源代码。当由于多个问题而更改方法时，这可能会变得复杂......

我曾经将问题编号添加到 SVN 提交中，例如：*ISSUE-1234: added NPE check*。Eclipse 提供了有用的功能`Team -> Show Annotations`，它显示了 SVN 提交的每一行更改和提交注释。在我看来，这增加了作为 JavaDoc 中的注释的更多好处。

# image - 上传图片后，如何将单个图片制作成不同（优化）尺寸？

> ID：12578658
> 
> 赞同：1
> 
> 时间：2012-09-25T08:04:38.773
> 
> 标签：image, image-processing, asp.net-mvc-4

在这里我拿了这个，因为我正在发送给你，请看一次，请检查一次，这是做这项工作的正确方法

```
 UploadController  class file

 public class UploadController : ApiController
    {

    public async Task<HttpResponseMessage> Post()
    {
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        var uploadFolder = HostingEnvironment.MapPath("~/app_data");
        uploadFolder = Path.Combine(uploadFolder, DateTime.Now.ToString("yyyyMMddhhmmssfff"));
        Directory.CreateDirectory(uploadFolder);
        var streamProvider = new PreserveFilenameMultipartFileStreamProvider(uploadFolder);

        var parts = await Request.Content.ReadAsMultipartAsync(streamProvider);
        foreach (var uploadedFile in Directory.GetFiles(uploadFolder))
        {
            var thumbnail = Path.Combine(uploadFolder, "thumb-" + Path.GetFileName(uploadedFile));
            var medium = Path.Combine(uploadFolder, "medium-" + Path.GetFileName(uploadedFile));
            var large = Path.Combine(uploadFolder, "large-" + Path.GetFileName(uploadedFile));
            ImageTools.Resize(uploadedFile, thumbnail, 100, 100);
            ImageTools.Resize(uploadedFile, medium, 200, 200);
            ImageTools.Resize(uploadedFile, large, 300, 300);
        }

        return Request.CreateResponse(HttpStatusCode.Accepted); 
```

我在models文件夹中为imagetools制作了一个单独的文件

```
 public class imageTools
    {
        public static void Resize(string original, string output, int width, int height)
        {
            using (var image = Image.FromFile(original))
            using (var thumbnail = new Bitmap(width, height))
            using (var graphics = Graphics.FromImage(thumbnail))
            {
                graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
                graphics.SmoothingMode = SmoothingMode.HighQuality;
                graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
                graphics.CompositingQuality = CompositingQuality.HighQuality;

                graphics.DrawImage(image, 0, 0, width, height);

                ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
                EncoderParameters encoderParameters;
                encoderParameters = new EncoderParameters(1);
                encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
                thumbnail.Save(output, info[1], encoderParameters);
            }
        }
    } 
```

我又拿了一个文件名

```
 PreserveFilenameMultipartFileStreamProvider

    public class PreserveFilenameMultipartFileStreamProvider : MultipartFileStreamProvider
    {
        public PreserveFilenameMultipartFileStreamProvider(string rootPath)
            : base(rootPath)
        {
        }

        public override string GetLocalFileName(HttpContentHeaders headers)
        {
            return headers.ContentDisposition.FileName.Replace("\"", "");
        }
    } 
```

最后是我的布局页面

```
 @using (Html.BeginRouteForm("DefaultApi", new { httproute = "", controller = "images" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="image" multiple="multiple" accept="image/*" />
    <button type="submit">Upload</button>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:36:05.300

您可以使用[ImageResizer 包](http://www.hanselman.com/blog/NuGetPackageOfWeek11ImageResizerEnablesCleanClearImageResizingInASPNET.aspx)。或者您也可以[自己实现图像大小调整](http://keyvan.io/very-high-quality-image-resizing-in-net)。

* * *

更新：这是一个示例，您可以使用它来调整 Web API 控制器中上传的图像的大小。

您可以先编写一个使用 GDI+ 的 Resize 方法，如我链接到的上一篇文章所示：

```
public static class ImageTools
{
    public static void Resize(string original, string output, int width, int height)
    {
        using (var image = Image.FromFile(original))
        using (var thumbnail = new Bitmap(width, height))
        using (var graphics = Graphics.FromImage(thumbnail))
        {
            graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
            graphics.SmoothingMode = SmoothingMode.HighQuality;
            graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
            graphics.CompositingQuality = CompositingQuality.HighQuality;

            graphics.DrawImage(image, 0, 0, width, height);

            ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
            EncoderParameters encoderParameters;
            encoderParameters = new EncoderParameters(1);
            encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
            thumbnail.Save(output, info[1], encoderParameters);
        }
    }
} 
```

然后是一个自定义`MultipartFileStreamProvider`，它将保留最初上传的文件名：

```
public class PreserveFilenameMultipartFileStreamProvider : MultipartFileStreamProvider
{
    public PreserveFilenameMultipartFileStreamProvider(string rootPath): base(rootPath)
    {
    }

    public override string GetLocalFileName(HttpContentHeaders headers)
    {
        return headers.ContentDisposition.FileName.Replace("\"", "");
    }
} 
```

最后你可以有一个 API 控制器来接收上传的图像，将它们存储在`App_Data`文件夹中，并通过调整它们的大小来生成不同的格式：

```
public class ImagesController : ApiController
{
    public async Task<HttpResponseMessage> Post()
    {
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        var uploadFolder = HostingEnvironment.MapPath("~/app_data");
        uploadFolder = Path.Combine(uploadFolder, DateTime.Now.ToString("yyyyMMddhhmmssfff"));
        Directory.CreateDirectory(uploadFolder);
        var streamProvider = new PreserveFilenameMultipartFileStreamProvider(uploadFolder);

        await Request.Content.ReadAsMultipartAsync(streamProvider);
        foreach (var uploadedFile in Directory.GetFiles(uploadFolder))
        {
            var thumbnail = Path.Combine(uploadFolder, "thumb-" + Path.GetFileName(uploadedFile));
            var medium = Path.Combine(uploadFolder, "medium-" + Path.GetFileName(uploadedFile));
            var large = Path.Combine(uploadFolder, "large-" + Path.GetFileName(uploadedFile));
            ImageTools.Resize(uploadedFile, thumbnail, 100, 100);
            ImageTools.Resize(uploadedFile, medium, 200, 200);
            ImageTools.Resize(uploadedFile, large, 300, 300);
        }

        return Request.CreateResponse(HttpStatusCode.Accepted);
    }
} 
```

最后，您可以拥有一个允许用户上传图片的 HTML 表单：

```
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    @using (Html.BeginRouteForm("DefaultApi", new { httproute = "", controller = "images" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <input type="file" name="image" multiple="multiple" accept="image/*" />
        <button type="submit">Upload</button>
    }
</body>  
</html> 
```

* * *

更新 2：

看来您使用的是 .NET 4.0。这是`ImagesController`适用于 .NET 4.0 的修订版：

```
public class ImagesController : ApiController
{
    public Task<HttpResponseMessage> Post()
    {
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        var uploadFolder = HostingEnvironment.MapPath("~/app_data");
        uploadFolder = Path.Combine(uploadFolder, DateTime.Now.ToString("yyyyMMddhhmmssfff"));
        Directory.CreateDirectory(uploadFolder);
        var streamProvider = new PreserveFilenameMultipartFileStreamProvider(uploadFolder);

        return Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(t =>
        {
            foreach (var uploadedFile in Directory.GetFiles(uploadFolder))
            {
                var thumbnail = Path.Combine(uploadFolder, "thumb-" + Path.GetFileName(uploadedFile));
                var medium = Path.Combine(uploadFolder, "medium-" + Path.GetFileName(uploadedFile));
                var large = Path.Combine(uploadFolder, "large-" + Path.GetFileName(uploadedFile));
                ImageTools.Resize(uploadedFile, thumbnail, 100, 100);
                ImageTools.Resize(uploadedFile, medium, 200, 200);
                ImageTools.Resize(uploadedFile, large, 300, 300);
            }
            return Request.CreateResponse(HttpStatusCode.Accepted);
        });
    }
} 
```

# playframework - 如何在 playframework 1.2.x 中显示自定义 400 错误页面？

> ID：12578660
> 
> 赞同：5
> 
> 时间：2012-09-25T08:04:52.750
> 
> 标签：playframework, playframework-1.x

我的问题是我想对给定的请求给出一个错误的请求响应，但同时也为用户呈现一个非常漂亮的页面。如何在 playframework 1.2.x 中创建这样的模板？

谢谢， 瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:35:59.463

您只需在“views”包中创建一个名为“errors”的新包。

然后，您可以在“errors”包中创建名为“404.html”或“500.html”等的自定义错误页面。

# c# - 如何通过处置在 MVC4 和 WebApi 中设置依赖注入？

> ID：12578662
> 
> 赞同：1
> 
> 时间：2012-09-25T08:05:05.980
> 
> 标签：c#, dependency-injection, asp.net-mvc-4

随着 MVC4 的发布，现在 Http 命名空间中有 webapi 和 IDependencyResolver 接口，它为每个请求使用 IDependencyScope。这个dependencyScope 也会在每次请求后被释放。只需在应用程序启动中设置它并使用 GlobalConfiguration.Configuration 即可轻松设置。

这对于“普通”MVC 控制器是否也是可能的？是否有相似的界面，或者我只需要自己在我的控制器或服务中进行处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:17:52.597

Web API 包含这种作用域机制的原因是因为 HTTP 请求不能总是用作作用域，因为 Web API 可以在自托管环境中运行，这意味着没有`HttpContext.Current`.

另一方面，“普通”MVC 控制器将始终在 Web 环境中运行，因此总会有 HttpContext 可用，这意味着可以使用此机制作为定义范围的一种方式。这就是许多 IoC 容器提供的“按 Web 请求”生活方式所做的事情。换句话说，您的 MVC 应用程序不需要该范围，因为它们始终可以使用“每个 Web 请求”的生活方式。

# gwt - GWT：枚举列表抛出“无法反序列化响应”

> ID：12578664
> 
> 赞同：0
> 
> 时间：2012-09-25T08:05:22.660
> 
> 标签：gwt, enums, deserialization, gwt-rpc

我有一个简单的 POJO，它有一些属性，其中一个是枚举。这工作得很好，但是当我将枚举属性更改为枚举列表时，GWT 给了我一个序列化异常“无法反序列化响应”。

这有效：

```
public class Report implements Serializable, Comparable<Report> {

    private static final long serialVersionUID = 1L;

    private long id;
    //some more attributes, all serialize fine
    private ReportCategory category; // the enumeration 

    public ReportSVO(){
    }
        //.. generated getters and setters
} 
```

当我更改为时`private ReportCategory category;`，`private List<ReportCategory> categories;`我得到了（反）序列化异常。

出于预感，我将枚举更改为内部类： ( `public enum ReportCategory{...}`to `public class ReportCategory{ private Name categoryName; public enum Name{...}}`) 就像魔术一样，它可以工作。这个问题让我想到了两个问题：

1.  这是一个 GWT 错误吗？还是我错过了什么？
2.  有没有更好的方法来解决这个问题？

枚举本身不应该是一个问题，因为它以前工作过（并且枚举默认情况下是可序列化的）。此外，当我在其他 GWT 类上忘记了无参数构造函数或具有不可序列化的属性时，序列化异常消息如下所示：“com.google.gwt.user.client.rpc.SerializationException: Type '...'不包含在可以通过此 SerializationPolicy 序列化的类型集中.."

我正在使用 GWT 2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:30:53.737

事实证明，我的问题的原因是服务器端的 POJO 类（报告）与该类的编译到 Javascript 版本之间的不匹配。这是因为我更改了类并将其重新发布到服务器，但忘记重新编译客户端代码......

因此，在服务器端，该属性是一个列表，而在客户端，它仍然是一个枚举，反序列化当然会失败。

总而言之，这是一个面子，但我希望这个线程在未来对某人有所帮助。

# git - 我看不到我的远程分支

> ID：12578665
> 
> 赞同：6
> 
> 时间：2012-09-25T08:05:27.880
> 
> 标签：git

在等待系统管理员设置 gerrit 存储库时，我创建了自己的分支。他刚刚给我发了repo的地址。我将其设置为 origin 并以某种方式推送了我的最后一次提交。**克隆 repo 工作正常**，但`git branch -r`什么也不返回。这里发生了什么？

```
$ git init
# made some comits    
git config remote.origin.url ssh://gerrit.mm-sol.com/branchname

$ git push origin SH1-of-my-last-commit:master    
error: unable to push to unqualified destination: master    
The destination refspec neither matches an existing ref on the remote nor  
begins with refs/, and we are unable to guess a prefix based on the source ref.  
error: failed to push some refs to 'ssh://gerrit.mm-sol.com/apps/phone-shaker'  

$ git push origin master
Counting objects: 85, done.  
Delta compression using up to 4 threads.  
Compressing objects: 100% (85/85), done.  
Writing objects: 100% (85/85), 20.95 KiB, done.  
Total 85 (delta 49), reused 0 (delta 0)  
remote: Resolving deltas: 100% (49/49)   
remote: Updating references: 100% (1/1)  
To ssh://gerrit.mm-sol.com/branchname  
 * [new branch]      master -> master 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T09:03:02.693

试试这个：

```
git config remote.origin.fetch "+refs/heads/*:refs/remotes/origin/*"
git fetch origin 
```

然后再试`git branch -r`一次。

将来在设置遥控器时，最好使用以下命令而不是`git config`：

```
git remote add <remotename> <remoteurl> 
```

例如

```
git remote add origin ssh://gerrit.mm-sol.com/branchname 
```

这将自动设置`url`和`fetch`配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:08:41.550

尝试`git push -u origin master`

# android - 网络密集型操作Android

> ID：12578671
> 
> 赞同：0
> 
> 时间：2012-09-25T08:05:35.340
> 
> 标签：android, android-service

我有一个场景，我连续收到短信到我们的手机，现在我已经阅读了这些短信并将数据上传到网络服务。上传数据后，我必须再次上传相同的数据，以验证天气是否保存。

现在我写了一个类似这样的代码..
1）广播接收器将 SMS 保存到 DB（更新 UI 相同）
2）读取 DB 和上传服务，验证它。（使用意图服务，更新 UI 相同）。

以及其他用于发送短信的服务
1) Intentservice 用于检查服务器上的数据并基于它发送短信。
2）更新已保存短信的电话号码状态（更新服务器）。

现在我的问题是..如果我增加每秒接收短信的数量，我的应用程序会发疯，显示 ANR 这不是 logcat 中的错误，有时说 DB 未打开。**那么有人可以提出一个很好的设计模型来做同样的事情吗**

*注意：我已准备好所有代码，所以如果您想查看代码，请告诉我*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:55:56.753

我不明白你为什么两次上传相同的数据。您说您使用 HTTP 上传（我猜是 POST）。然后您的服务器将阻塞，尝试保存数据并返回一个字符串`OK`，例如成功或`KO`失败。

ANR 发生在[主线程阻塞](https://stackoverflow.com/a/9298268/315306)时，默认情况下`Service`s 和`BroadcastReceiver`s 都在该线程中运行。您可能想查看[官方的 Android 文档](http://developer.android.com/guide/components/processes-and-threads.html)。

关于整体设计，如果收到的短信数量很大，我建议每5分钟左右批量上传一次。您将所有消息放在一个队列中，每 5 分钟一个服务读取队列并上传其内容。这样可以节省大量开销（CPU、内存、带宽、时间），也许您可​​以跟上数据馈送的比例。

请记住，SMS 比 TCP 通信更轻量级，因此如果您的设备真的*连续*接收 SMS，您可能最终会遇到写入速度跟不上读取速度的情况，最终导致 CPU 饿死并杀死您的设备。系统。

# liferay - 使用另一个 portlet 上给出的静态 URL 下载上传到特定文件夹的文件会出现“找不到文件”错误

> ID：12578674
> 
> 赞同：0
> 
> 时间：2012-09-25T08:06:02.910
> 
> 标签：liferay, liferay-6

我为fileupload 创建了一个自定义portlet，以上传类型（.pdf、.doc、.txt、.docx）的文件。

之后，我创建了另一个 portlet，在其中我为这些文件提供了一个静态 URL 以供下载，但它显示`file not found`.

如果我重新启动服务器。文件已下载，并且在本地服务器中无需重新启动即可正常工作，但在实时服务器上我需要重新启动服务器，然后才下载文件。

```
<form action="http://localhost:8080/CompanySidePortlet-portlet/gulfdiceResumes/<%=jobpost.getResume()%>" method="post">
    <button style="BACKGROUND-COLOR: lightblue; WIDTH: 25%; HEIGHT: 26px">Download</button>
</form> 
```

这是供下载的表格。我已经`localhost`在现场提供了网址。

环境：Liferay 6.1 with Tomcat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:41:00.597

也许Tomcat在远程服务器启动时使用了某种CHMOD，你可以试试看 `File tempFile= File.createTempFile("tempTest", ".pdf");` 它给你什么

另外，那条路真的正确吗？

# c# - 自定义 xsd.exe 工具和区分大小写的 xml 序列化

> ID：12578677
> 
> 赞同：1
> 
> 时间：2012-09-25T08:06:06.870
> 
> 标签：c#, xml-serialization, xsd.exe, fpml

我有以下xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema
        targetNamespace="http://www.something.com/GetWrapRequest"
        elementFormDefault="qualified" attributeFormDefault="qualified" version="1.0"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:gwreq="http://www.something.com/GetWrapRequest">

    <xsd:element name="message" type="gwreq:Message">
        <xsd:annotation>
            <xsd:documentation>Complete message</xsd:documentation>
        </xsd:annotation>
    </xsd:element>
    <xsd:complexType name="Message">
        <!-- something here -->
    </xsd:complexType>
</xsd:schema> 
```

为了生成 C# 类，我使用来自[http://hosca.com/blog/post/2008/12/26/Generating-C-classes-from-FpML-Schema.aspx](http://hosca.com/blog/post/2008/12/26/Generating-C-classes-from-FpML-Schema.aspx)的修改代码我不能使用通常的 xsd.exe，因为我需要从 XML 命名空间创建 C# 命名空间，并且 xsd.exe 将所有类放置到一个 C# 命名空间。所以我找到了这段代码，并扩展了它以创建正确的命名空间。但是与将 xsd 转换为 CodeDom 相关的所有部分仍然是相同的。

我现在的问题是 xsd.exe 正在生成这个：

```
[System.Xml.Serialization.XmlRootAttribute("message", Namespace="http://www.something.com/GetWrapRequest", IsNullable=true)]
public partial class Message {} 
```

我的代码正在生成这个：

```
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://www.something.com/GetWrapRequest", IsNullable=true)]
public partial class Message {} 
```

如您所见，属性中缺少“m”较低的“消息”。而且因为我需要反序列化的 xml 也带有标签“message”，而“m”反序列化失败。

我该如何解决这个问题？我查看了 XmlSchemaImporter 和 XmlCodeExporter 的选项，但没有什么能解决问题。或者我可以以某种方式设置 XmlSerializer 来禁用区分大小写吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:58:32.547

因此，在潜入 Xsd2Code 源代码后，我发现了有趣的事情。我正在使用这两个循环来创建 xml 映射

```
foreach (XmlSchemaType schemaType in rootSchema.SchemaTypes.Values)
    xmlTypeMappings.Add(xmlSchemaImporter.ImportSchemaType(schemaType.QualifiedName));
foreach (XmlSchemaElement schemaElement in rootSchema.Elements.Values)
    xmlTypeMappings.Add(xmlSchemaImporter.ImportTypeMapping(schemaElement.QualifiedName)); 
```

但在 Xsd2Code 中，它们首先处理元素，然后处理模式类型。所以我只是将这些的顺序更改为这样的循环：

```
foreach (XmlSchemaElement schemaElement in rootSchema.Elements.Values)
    xmlTypeMappings.Add(xmlSchemaImporter.ImportTypeMapping(schemaElement.QualifiedName))
foreach (XmlSchemaType schemaType in rootSchema.SchemaTypes.Values)
    xmlTypeMappings.Add(xmlSchemaImporter.ImportSchemaType(schemaType.QualifiedName)); 
```

并生成具有元素名称“消息”的正确 XmlRootAttribute。

# ruby-on-rails - 将查询结果追加到最后的第一个查询结果

> ID：12578678
> 
> 赞同：2
> 
> 时间：2012-09-25T08:06:11.717
> 
> 标签：ruby-on-rails, postgresql

假设我在 postgresql 中有查询 1 和查询 2，那么我想要两个查询的组合结果，这样首先我将获得查询 1 的结果集，在结果集 1 的末尾，应该添加结果集 2。假设查询 1 结果集有 10 条记录，查询 2 有 5 条记录，那么顺序应该是 1 到 10 -- 第一个结果集 11 到 15 -- 第二个结果集

请提出建议，因为我很困惑，因为我的第一个查询包含 5 种数据的 order by。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:28:00.937

您可以将结果与`+`

```
resultC = resultA + resultB 
```

# powershell - 如何在 Powershell 中访问 try catch 范围内定义的变量

> ID：12578683
> 
> 赞同：2
> 
> 时间：2012-09-25T08:06:28.653
> 
> 标签：powershell

我有下面的一段代码，我试图访问在 try 中定义的变量，但它无法访问，可以做些什么来修复它。

```
 try{
       $X = get-X 
     }
  catch
     {
            Manage exception
     }

   write-host $X 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:37:47.977

我刚遇到这个，它看起来像一个错误。在 try 块之外声明变量并不能解决范围问题。一旦您离开，$a 的 try 块值就会重置为进入 try 块之前的值。因此，如果您想在执行 try{} 后访问 $a，您需要在 try {} 块中以 $global:a 的形式访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:13:49.597

`get-process`对我来说，这会像简单命令一样返回所有进程：

```
try
{
   $a = get-process
}
catch
{
    write-error "Some error occurred"
}

$a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:52:10.750

正如@Christian 所说，它应该可以按照您的方式正常工作。如果`$x`没有被填充，可能`Get-X`没有返回任何内容，或者正在发生错误。

您始终可以使用在顶部声明变量的模式：

```
$a = <default value, or $null>
try
{
   $a = get-process
}
catch
{
    write-error "Some error occurred"
}
$a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-25T00:29:32.793

让try语句真正捕捉到一个不存在的变量的Get-Variable失败。我不得不添加`-ErrorAction`开关。默认`ErrorAction`是继续，这不允许 try 语句捕获错误。

```
$testName = Get-Variable -Name $variableName -ErrorAction Stop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-05T16:33:27.663

我在先前的答案中添加了评论，但觉得有必要发布一个示例 Powershell 函数（在类的上下文中）来证明使用范围界定（`$private`在我的情况下）解决了这个问题：

```
[String[]] static GetSRVHostPort([String]$srvRecord) {
        [String] $private:myHost, $private:myPort
        try {
            $private:myHost, $private:myPort = Resolve-DnsName -Type 'srv' $srvRecord | ForEach-Object { $_.Name, $_.Port }
        } catch {
            Write-Output("Exception thrown whilst resolving DNS SRV record [$srvRecord]: $_")
        }
        return $private:myHost, $private:myPort
    } 
```

有关范围的更多详细信息：[https ://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_scopes?view=powershell-6#scope-modifiers](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_scopes?view=powershell-6#scope-modifiers)

# php - Div 类在 chrome 和 firefox 中显示，但在 IE 中不显示

> ID：12578685
> 
> 赞同：0
> 
> 时间：2012-09-25T08:06:48.630
> 
> 标签：php, css, internet-explorer, html, hover

有人可以帮我看看这个吗，我在[这里找到了类似的问题](https://stackoverflow.com/questions/10353655/div-displays-in-firefox-safari-chrome-etc-but-not-in-internet-explorer)

但我不明白它是如何工作的以及 poly-fill 是什么。

这是我网站的链接：

[http://mojogobbles.com.sg/cupcake-menu/](http://mojogobbles.com.sg/cupcake-menu/)

这是我对 div 类以及 html/php 的 css 编码

**CSS**

```
#f1{
 width: 100px;
 height: 50px;
 left: 370px;
 top: 450px;
 background:black;
 position: absolute;
 opacity:0;
 filter: alpha(opacity=0);
 float: left;
 -webkit-transition: 1s all;
 -moz-transition: 1s all;
 transition: 1s all;
 }
#f1:hover {
 background:url(images/flavours/f1.jpg);
 width: 320px;
 height: 320px;
 opacity:100;
 filter: alpha(opacity=100);
 float: left;
 position: absolute;
 } 
```

**HTML/PHP**

```
<div id="f1"></div> 
```

div 类没有出现在 IE 中，请帮忙！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:17:24.093

改变这个：

```
filter: alpha(opacity=1); 
```

进入

```
filter: alpha(opacity=100); 
```

在 Alpha 过滤器中使用时的不透明度范围是 0-100 ，因此您当前的设置等于 opacity: 0.01

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:17:20.793

不要`:hover`在 a 上使用伪类`DIV`，IE 很可能会完全忽略它 - 尝试使用`A`标签或附加到`onmouseover`and`onmouseout`事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:26:31.967

如果你`div:hover`在 IE 中使用代码，什么都不会发生。

这是因为 IE 只支持`<a>`标签的悬停伪。

在您的情况下，这不是什么大问题，因为很容易将链接设置为显示为块元素

```
a { display: block; width: 100px height: 50px; }
a:hover { change color etc here } 
```

否则，[Css hover](http://naarvoren.nl/artikel/hover/csshover.htc) htc 将有助于解决`div:hover`. 像下面这样导入HTC，

```
<!--[if IE]>
<style>
body { behavior:url("/csshover.htc");}
</style>
<![endif]--> 
```

对于跨浏览器过渡，[css3please 教程](http://css3please.com/)将为您提供帮助。

# php - PHP：对具有非常量键的多维数组进行排序

> ID：12578686
> 
> 赞同：1
> 
> 时间：2012-09-25T08:06:55.210
> 
> 标签：php, sorting, multidimensional-array

在 PHP 中，我有这种数组（对不起，这个大例子，但它是一个特定的排序）：

```
[0] => Array
    (
        [title] => 1
        [desc] => 2
    )
[1] => Array
    (
        [title] => 1
        [desc] => 3
    )
[2] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
    )
[3] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 11
    )
[4] => Array
    (
        [title] => 1
        [desc] => 3
        [content] => 9
    )
[5] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
        [tag] => 'foo'
    )
[6] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
        [tag] => 'bar'
    ) 
```

我想要这个输出：

```
[0] => Array
    (
        [title] => 1
        [desc] => 2
    )
[1] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
    )
[2] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
        [tag] => 'bar'
    )
[3] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 10
        [tag] => 'foo'
    )
[4] => Array
    (
        [title] => 1
        [desc] => 2
        [content] => 11
    )
[5] => Array
    (
        [title] => 1
        [desc] => 3
    )
[6] => Array
    (
        [title] => 1
        [desc] => 3
        [content] => 9
    ) 
```

不幸的是，`array_multisort()`不能对具有非常量键的数组进行排序：它只是忽略了所有数组......知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:09:23.780

我不清楚您要订购的确切标准，但您可以使用[`usort`](http://php.net/manual/en/function.usort.php)，为它提供一个定义比较的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:50:04.920

您可以使用为您的特殊需求量`usort`身定制的`cmp`功能，如以下代码：

```
usort($arr, "cmp");

function cmp($a, $b) {
    $array = array('title','desc','content','tag');
    foreach ($array as &$ar) {
        $ai = isset($a[$ar]);
        $bi = isset($b[$ar]);
        if ($ai && !$bi) {
            return 1;
        }
        if ($bi && !$ai) {
            return -1;
        }
        if (!$bi) {
            return 0;
        }
        if ($a[$ar] > $b[$ar]) {
            return 1;
        }
        if ($b[$ar] > $a[$ar]) {
            return -1;
        }
    }
    return 0;
} 
```

那应该做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:17:41.363

这是示例代码的排序：

```
function cmp ($a, $b) {
  if ($a['desc'] == $b['desc']) {
    if (!isset($a['content']) && !isset($b['content'])) {
      return 0;
    }
    else if (!isset($a['content'])) {
      return -1;
    }
    else if (!isset($b['content'])) {
      return 1;
    }
    else {
      if ($a['content'] == $b['content']) {
        if (!isset($a['tag'])) {
          return -1;
        }
        else if (!isset($b['tag'])) {
          return 1;
        }
        else {
          if ($a['tag'] == $b['tag']) {
            return 0;
          }
          else if ($a['tag'] < $b['tag']) {
            return -1;
          }
          else {
            return 1;
          }
        }
        return 0;
      }
      else if ($a['content'] < $b['content']) {
        return -1;
      }
      else {
        return 1;
      }
    }
    return 0;
  }
  else if ($a['desc'] < $b['desc']) {
    return -1;
  }
  else {
    return 1;
  }
}
usort($array, 'cmp'); 
```

感谢**@Nelson、@therefromhere 和 @xdazz**让我上场`usort()`：)

# java - 在可重入锁中等待条件

> ID：12578687
> 
> 赞同：31
> 
> 时间：2012-09-25T08:06:58.190
> 
> 标签：java, synchronization

以下代码取自 的[JavaDoc`Condition`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)：

```
class BoundedBuffer {
  final Lock lock = new ReentrantLock();
  final Condition notFull  = lock.newCondition(); 
  final Condition notEmpty = lock.newCondition(); 

  final Object[] items = new Object[100];
  int putptr, takeptr, count;

  public void put(Object x) throws InterruptedException {
    lock.lock();
    try {
      while (count == items.length) 
        notFull.await();
      items[putptr] = x; 
      if (++putptr == items.length) putptr = 0;
      ++count;
      notEmpty.signal();
    } finally {
      lock.unlock();
    }
  }

  public Object take() throws InterruptedException {
    lock.lock();
    try {
      while (count == 0) 
        notEmpty.await();
      Object x = items[takeptr]; 
      if (++takeptr == items.length) takeptr = 0;
      --count;
      notFull.signal();
      return x;
    } finally {
      lock.unlock();
    }
  } 
} 
```

想象一下 2 个线程，*Consumer*和*Producer*，一个使用`take`，一个`put`在`BoundedBuffer`.

假设*Consumer*首先运行`take()`，在其中他锁定了`lock`并且现在循环运行`notEmpty.await();`。

*现在Producer*怎么可能进入`put()`锁定`lock`已经由*Consumer*持有的方法？

我在这里想念什么？`lock`线程等待其条件之一时是否“临时释放” ？锁的可重入性究竟意味着什么*？*

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T08:09:52.230

两者都`Lock`允许`synchronized`一个线程在等待时放弃锁而另一个线程可以获得锁。要停止等待，线程必须重新获取锁。

注意：它们不会完全释放它，如果您进行堆栈跟踪，您可能会有多个线程似乎同时持有锁，但最多有一个线程将运行（其余线程将阻塞）

从[Condition.await()](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Condition.html#await--)

> 与此 Condition 关联的锁被自动释放，并且当前线程出于线程调度目的而被禁用并处于休眠状态，直到发生以下四种情况之一：
> 
> *   其他一些线程为此 Condition 调用 signal() 方法，当前线程恰好被选为要唤醒的线程；或者
> *   其他一些线程为此条件调用 signalAll() 方法；或者
> *   其他一些线程中断当前线程，支持中断线程挂起；或者
> *   发生“虚假唤醒”。
> 
> 在所有情况下，在此方法可以返回之前，当前线程必须重新获取与此条件关联的锁。当线程返回时，它保证持有这个锁

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T08:17:08.433

就重入而言，这意味着持有某个锁的线程可以再次重新获取同一个锁。如果不是这样，一个`synchronized`方法就不能调用`synchronized`同一个对象的另一个方法。

重新进入不涉及对您的问题的理解。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-28T19:06:58.713

我用单显示器测试了下面的代码，下面的代码总是表现更好 - 在 2 核机器上测试，条件性能平均低于 10-15%

```
 final Object sync = new Object();
  AtomicInteger add=new AtomicInteger();
  AtomicInteger remove=new AtomicInteger();
   final Object[] items = new Object[1];
   int putptr, takeptr, count;        

 public void add(Object x) throws InterruptedException {
       add.incrementAndGet();

     synchronized (sync) {

       while (count == items.length)
         sync.wait();
       items[putptr] = x;
       if (++putptr == items.length) putptr = 0;
       ++count;
       sync.notify();
        }
   }

   public Object remove() throws InterruptedException {
       remove.incrementAndGet();

     synchronized (sync) {

       while (count == 0)
         sync.wait();
       Object x = items[takeptr];
       if (++takeptr == items.length) takeptr = 0;
       --count;
       sync.notify();
       return x;

       }
   }

  public static void main(String[] args) {
    final BoundedBuffer bf=new BoundedBuffer();

    Thread put =new Thread(){
        public void run(){
        try {
            while(true)
            bf.add(new Object());
        } catch (InterruptedException e) {

        }
        }

    };
    put.start();

    Thread take= new Thread(){
        public void run(){
        try {
        while(true)
            bf.remove();
        } catch (InterruptedException e) {

        }
        }

    };
    take.start();

    try {
        Thread.sleep(1000L);
        put.interrupt();
        take.interrupt();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("add:"+bf.add);
    System.out.println("remove:"+bf.remove); 
```

# ruby-on-rails-3 - Rails 使用 Timezone 从纬度和经度获取时区

> ID：12578695
> 
> 赞同：1
> 
> 时间：2012-09-25T08:07:22.750
> 
> 标签：ruby-on-rails-3, timezone

我正在开发一个 Rails 应用程序，我想从纬度和经度获取**时区。**我在 stackoverflow 上搜索了这个，发现这个[链接](https://stackoverflow.com/questions/8349817/ruby-gem-for-finding-timezone-of-location)是最好的方法。

我安装了 gems **geokit**和**timezone**并尝试在我的控制台中实现相同的功能：

```
require 'geokit'
require 'timezone'
res = Geokit::Geocoders::GoogleGeocoder.geocode('140 Market St, San Francisco, CA')
timezone = Timezone::Zone.new(:latlon => res.ll) 
```

但我得到这个*错误*：

```
ArgumentError: wrong number of arguments (1 for 2) 
```

我检查了[Timezone](https://github.com/panthomakos/timezone)的文档。他们要求通过注册获得用户名。但是我还没有收到任何激活邮件。有人可以为此提出一些解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T09:59:04.427

看起来调用 Timezone::Zone.new(:latlon => res.ll) 不起作用（至少我得到了同样的错误）。我认为这是由于从 Google 返回的 res.ll 值的格式发生了变化。但是这个电话应该可以完成这项工作：

`Timezone::Zone.new(lat: res.lat, lon: res.lng)`

**但是**，首先确保您使用 GeoNames 创建一个帐户并[在此处](http://www.geonames.org/manageaccount)**激活**它。您还必须为时区 gem 创建和配置初始化程序。后者在这里描述：[timezone/lib/timezone/configure.rb](https://github.com/panthomakos/timezone/blob/34c94ea5679bc6fdaf3ba464bce0a3ef2d76e42e/lib/timezone/configure.rb)

# design-patterns - 以观察者模式发布初始状态

> ID：12578699
> 
> 赞同：5
> 
> 时间：2012-09-25T08:07:41.720
> 
> 标签：design-patterns, observer-pattern

在观察者模式中向新观察者发布“初始状态”是否有首选习惯用法？

大多数描述观察者模式的可用材料和示例都假设观察者对收到更改通知感兴趣，但不关心“初始状态”（观察者订阅更改时的当前状态）。

一种可能性是在订阅时将“初始”（当前）状态推送给新的观察者，例如：

```
public class MyObservable extends java.util.Observable
{
    public synchronized void addObserver(Observer observer)
    {
        super.addObserver(observer);

        // Push current state to this observer
        observer.update(this, currentState);
    }
} 
```

有更好/首选的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:37:15.723

并不真地。但通常在观察者层次结构的根部有一些配置文件或默认设置，因此当读取/设置这些事件时，初始级联事件将被触发。

棘手的一点是确保对所有设置进行分组，以便以“合法”的顺序设置可观察实体，或者至少按照您期望的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T13:16:57.153

我不知道它是否可以被认为是*首选*，
但在[Reactive Extensions](https://rx.codeplex.com/)的“hot observables”上下文中，使用了成语“ [Replay](http://www.introtorx.com/content/v1.0.10621.0/14_HotAndColdObservables.html#Replay) ”：

简短演示（C#）：

```
using System;
using System.Reactive.Linq;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      var observable = Observable.Interval(TimeSpan.FromSeconds(1))
        .Do(l => Console.WriteLine("Publishing {0}", l))  //side effect to show it is running
        .Replay(1);                                       // buffer the last entry

      Console.ReadKey();

      using (observable.Connect())                        // turn it "hot"
      {
        Console.ReadKey();

        observable.Subscribe(i => Console.WriteLine("OnNext #1: {0}", i));

        Console.ReadKey();

        using (observable.Subscribe(i => Console.WriteLine("OnNext #2: {0}", i)))
        {
          Console.ReadKey();
        }                                                 // unsubscribes #2 again

        Console.ReadKey();
      }                                                   // turn it "cold"

      Console.ReadKey();
    }
  }
} 
```

输出：

```
 Publishing 0
    Publishing 1
    Publishing 2
     OnNext #1: 2
    Publishing 3
    OnNext #1: 3
    Publishing 4
    OnNext #1: 4
    Publishing 5
    OnNext #1: 5
     OnNext #2: 5
    Publishing 6
    OnNext #1: 6
    OnNext #2: 6
    Publishing 7
    OnNext #1: 7
    OnNext #2: 7
    Publishing 8
    OnNext #1: 8
    OnNext #2: 8
     Publishing 9
    OnNext #1: 9
    Publishing 10
    OnNext #1: 10 
```

# git - git svn fetch on revisions 不对齐历史

> ID：12578702
> 
> 赞同：1
> 
> 时间：2012-09-25T08:07:51.017
> 
> 标签：git, git-svn

我正在尝试迁移一个非常大的 svn 存储库，最初我只是从修订版 13989 开始获取。

这让我有机会拥有一个非常棒的最新 git 镜像 - 但创建需要数周时间。

现在我想在那里获得完整的历史记录（即 r1-13989）并尝试这样做：

svn git fetch -r 0:13989

（如[Git svn clone 中所述：如何推迟获取修订历史记录](https://stackoverflow.com/questions/1554222/git-svn-clone-how-to-defer-fetch-of-revision-history)）

这似乎有效（它获取了 3 天），但之前的历史突然在 13989 结束的文件仍然有这个突然结束。

新获取的修订未与历史记录对齐。

除了必须再次开始执行完整的 giv svn init/fetch 之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:36:43.463

Git 提交 ID 是其内容的哈希。包括它的元数据，包括父 ID。因此，特定的提交永远不能修改它的历史。

Git 有一种机制来伪造父母提交。它被称为“嫁接”。（我不记得确切的细节；在文档中查找）。它只是本地的，因为自动共享将是一个安全问题。

它还具有重写整个历史记录的机制，即`filter-branch`命令。这将使用新的提交 ID 创建新的历史记录，其中包含您之前指定为移植物的父母。如果您要永久切换到 git 并且将停止提交颠覆，您可以继续使用 filter-branch 来应用嫁接。我不确定 git-svn 是否会在操作后工作（或如何修复它），因为它有一些额外的元数据。

# asp.net-mvc-3 - 使用 IOC 容器进行 MVC 3 表单身份验证

> ID：12578710
> 
> 赞同：0
> 
> 时间：2012-09-25T08:08:18.227
> 
> 标签：asp.net-mvc-3, forms-authentication, unity-container, custom-authentication

我在 ASP.NET MVC 3 项目中使用 IOC 容器实现表单身份验证时遇到问题。我们已经在数据库中存储了我们的用户信息，并且有很多自定义属性。

我有一个注册到 IOC 容器的用户定义接口，用于开发目的。该接口提供给每个控制器，因此控制器具有当前用户信息。

在我删除 Application_Start 中的虚拟用户注册之前，这一切都很好

我收到此错误： **当前类型 ...CurrentUserInformation.IUserInformation 是一个接口，无法构造。您是否缺少类型映射？**

我不想使用虚拟用户对象，因为我认为这不是最佳做法。

有人可以帮助我还是有更好的方法来进行这种自定义身份验证？

*编辑添加了一些代码*

基本控制器

```
public class BaseController : Controller
{
   private readonly IUserInformation _userInformation;
   public BaseController(IUserInformation userInformation)
   {
       _userInformation = userInformation
   }
} 
```

从 Application_Start 调用的引导程序初始化

```
public static void Initialise()
{
    var container = BuildUnityContainer();
    DependencyResolver.SetResolver(new UnityDependencyResolver(container));
}

private static IUnityContainer BuildUnityContainer()
{
    var container = new UnityContainer();

    //register all services en repositories

    //here i put my dummy user wich i want to remove
    container.RegisterInstance<IUserInformation>(
    new UserInformation
    {
        UserId = 1,
        ... 
    }); 

    return container;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:10:31.340

您可以使用 InjectionFactory：

```
container.RegisterType<IUserInformation, UserInformation>(

    // User information is destroyed when the request ends.
    //   You could use an HttpSessionLifetimeManager as well, if it fits your needs
    new HttpRequestLifetimeManager(), 

    new InjectionFactory(container => { 
          UserInformation userInfo = // TODO: build your userInformation from custom authentication
          return userInfo;
    })); 
```

# javascript - Kinetic.js - 图像未显示

> ID：12578712
> 
> 赞同：2
> 
> 时间：2012-09-25T08:08:29.160
> 
> 标签：javascript, image, kineticjs

我正在构建一个应该显示不同类型图表的应用程序。一个应该显示由用户所做的分数定位的两个或多个图像。好吧，这与问题无关。所以我写了一个 jQuery 插件，它通过 json 接收值来绘制图形。

该插件首先调用一个绘制图形线条的函数（工作），另一个函数在图形后面绘制网格（也工作）。

现在的问题：主要部分循环值数组并将 Kinetic.image 对象添加到一个层，该层被返回并添加到舞台。：

```
$.each(this.data, function(key, value) {
            $.each(value, function(secKey, secValue){
                secValue.X = Math.floor((secValue.X - minX) * scaleX) + xOffset;
                secValue.Y = Math.floor(yOffset + ((minY - secValue.Y) * scaleY));
                coords.push(secValue);
            });
        });

        $.each(coords, function(key, value){
            var imageObj = new Image();
            imageObj.src = value.image;
            imageObj.onload = function() {
                var image = new Kinetic.Image({
                    x: value.X,
                    y: value.Y,
                    image: imageObj,
                    width: 180,
                    height: 180
                });

            // add the shape to the layer
            pictures.add(image);

            };
        });

        return Array(pictures, popup); 
```

最后，呈现的页面有 4 个画布对象。而且当我使用 console.log() 时，舞台上有图形、网格、图片和弹出层，但没有显示的是图像。图像的来源是可用的。这个检查了好几遍。

有没有人暗示问题可能出在哪里。？

提前致谢。

马蒂亚斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T01:00:47.013

你确认 imageObj.onload 正在执行吗？由于浏览器缓存，在定义 imageObj onload 函数后设置 imageObj 的来源是标准做法。

接下来，您还需要确保在使用 layer.draw() 加载图像时重绘图层；回想一下，KineticJS 层不会在出于性能原因发生变化时自动重绘

# c# - windows和sql认证模式下连接sqlserver出错

> ID：12578717
> 
> 赞同：0
> 
> 时间：2012-09-25T08:08:51.310
> 
> 标签：c#, asp.net, sql-server-2005, c#-4.0

我有一个片段，当我使用带有跟随连接字符串的 windowsmode 时它可以正常工作

```
data source=.;database=xDB;integrated security=true; 
```

但我必须将其更改为 sql 和 windows 模式，我将其更改为

```
Data Source=.;Initial Catalog=xDB;User Id=krs;Password=12345; 
```

但出现以下错误

> 用户“krs”登录失败。用户未与受信任的 SQL Server 连接关联。

当将点（。）更改为（本地）时，会发生另一个错误

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

请帮助我，我是初学者，很困惑。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:22:31.563

您必须在 SQL Server 配置中启用命名管道和 TCP/IP。通过以下链接启用它

[http://www.triostechs.com/Microsoft-SQL-Server-2008/Microsoft-SQL-Server-2008-Enable-TCP/IP-or-Named-Pipes.html](http://www.triostechs.com/Microsoft-SQL-Server-2008/Microsoft-SQL-Server-2008-Enable-TCP/IP-or-Named-Pipes.html)

还要确保，只有一个 SQL Server 实例在运行。如果不止一个，只需验证您要连接的是哪一个。

# class - 如何在vb中为excel创建一个类

> ID：12578722
> 
> 赞同：1
> 
> 时间：2012-09-25T08:09:35.323
> 
> 标签：class, excel, vba

您好，我试图在 vb 中创建一个类，以及何时并尝试实例化该类没有任何值的类

```
Private lat As Double
Private lon As Double

Public Property Get Longitud() As Double

Longitud = lon

End Property
Public Property Get Latitud() As Double
Latitud = lat

End Property
Public Property Let Longitud(ByVal longi As Double)

Longitud = lon

End Property

Public Property Let Latitud(ByVal lati As Double)

Latitud = lat
End Property 
```

当我试图实例化时

```
Dim cord As Coordenadas
Set cord = New Coordenadas
cord.Latitud = 40.30416667
cord.Longitud = 0.22583333 
```

我看不到电源线有任何变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:56:43.267

您的 Let 属性未正确分配您作为参数传递的值。它应该如下：

```
Private lon As Double
'

Public Property Let Longitud(ByVal longi As Double)

    lon = longi

End Property 
```

`Let`应该将该值分配给您的私有变量（Lon），并`Get`应该检索存储在该变量中的值。

作为补充，如果你给你的私有财产一个特殊的后缀，它将对你有很大帮助。例如 pLon 和 pLat。这种方式更容易让您从参数和属性中识别变量。

# file-upload - 在某些事件中以编程方式上传 Extjs 4.1 文件

> ID：12578725
> 
> 赞同：0
> 
> 时间：2012-09-25T08:09:39.410
> 
> 标签：file-upload, customization, extjs4.1

我想使用 Extjs 4.1 文件上传控件上传文件。我的表单中有文件上传字段，它将对用户隐藏。但我有一个形象。如果用户双击该图像浏览文件对话框应显示为 Fileupload 控件的“浏览...”按钮。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:35:26.320

您的意思与煎茶示例中的完全一样吗？ [http://docs.sencha.com/ext-js/4-1/#!/example/form/file-upload.html](http://docs.sencha.com/ext-js/4-1/#!/example/form/file-upload.html)

![在此处输入图像描述](../Images/f3ebad52b4143317161142b25c5fde91.png)

**编辑**：使用[buttonOnly:true](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File-cfg-buttonOnly)配置选项隐藏文件输入字段，只保留上传按钮可见。

# iphone - 在上一个终点和下一个起点之间画一条线

> ID：12578729
> 
> 赞同：0
> 
> 时间：2012-09-25T08:09:57.780
> 
> 标签：iphone, objective-c, ios, xcode, core-graphics

我被困在这个问题上。我需要在上一个终点和下一个起点之间画一条线。我在两点之间画线的代码是

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef c=UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(c, 4.0);
    CGFloat red[4]={0.0f, 0.0f, 0.0f, 1.0f};
    CGContextSetStrokeColor(c, red);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 50.0f, 50.0f);
    CGContextAddLineToPoint(c, 100.0f, 100.0f);
    CGContextStrokePath(c) ;
} 
```

我怎样才能给出多个点，以便我可以像图表一样显示。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:40:50.787

顺便说一句，Apple 更喜欢您使用更高的 UIKit 方法而不是 Core Graphics 调用来绘制线条和曲线等简单的东西，因此您可以像这样重写您的方法：

```
[[UIColor redColor] setStroke];

UIBezierPath *linePath = [UIBezierPath bezierPath];

[linePath moveToPoint:CGPointMake(50.0, 50.0)];
[linePath addLineToPoint:CGPointMake(100.0, 100.0)];
[linePath setLineWidth:4.0];
[linePath stroke]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:28:07.447

只需添加更多`CGContextAddLineToPoint`通话

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef c=UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(c, 4.0);
    CGFloat red[4]={0.0f, 0.0f, 0.0f, 1.0f};
    CGContextSetStrokeColor(c, red);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 50.0f, 50.0f);
    CGContextAddLineToPoint(c, 100.0f, 100.0f);
    CGContextAddLineToPoint(c, 120.0f, 80.0f);
    CGContextAddLineToPoint(c, 140.0f, 120.0f);
    CGContextAddLineToPoint(c, 160.0f, 80.0f);
    ...

    CGContextStrokePath(c) ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:20:40.047

只需对您的代码进行一些更正：

```
-(void)drawLineFromPoint:(CGPoint)startPoint toPoint:(CGPoint)endPoint{
    UIGraphicsBeginImageContext(YOUR_IMAGEVIEW.image.size);
    [YOUR_IMAGEVIEW.image drawInRect:CGRectMake(0, 0, YOUR_IMAGEVIEW.image.size.width, YOUR_IMAGEVIEW.image.size.height)]; 
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), startPoint.x, startPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), endPoint.x, endPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    [YOUR_IMAGEVIEW setImage:UIGraphicsGetImageFromCurrentImageContext()];
    UIGraphicsEndImageContext();
} 
```

**YOUR_IMAGEVIEW 是您正在绘制的图像视图的出口。**

如您所见 - 您只需将起点和终点发送到此方法！像 1-2-3 一样简单。

编辑 1

如何使用它？声明一个全局 CGPoint “startPoint”；

然后说：

```
//___________________________________________________
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    startPoint = [touch locationInView:YOUR_IMAGEVIEW];
}
//___________________________________________________
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint nextPoint = [touch locationInView:YOUR_IMAGEVIEW];
    [self drawLineFromPoint:startPoint toPoint:nextPoint];
    startPoint = nextPoint;
} 
```

编辑 2

这是另一种表达观点的方法：

```
- (void)drawGraphMethod{
    NSMutableArray *pointsArr = [[[NSMutableArray alloc]init]autorelease];
    //now you should add the needed points to your array
    //I have no idea what graph do you have, so I just
    //put there some random points that will look like a graph
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(30.0, 10.0)]];
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(40.0, 26.0)]];
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(70.0, 55.0)]];
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(80.0, 88.0)]];
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(90.0, 33.0)]];
    [pointsArr addObject:[NSValue valueWithCGPoint:CGPointMake(130.0, 100.0)]];
    //well, you can store only objects, that's why I used NSValue.
    //it's not hard to cenvert it back

    //now parse the array
    for (int i = 0; i < pointsArr.count-1; i++) {
        CGPoint startPoint = [[pointsArr objectAtIndex:i] CGPointValue];
        CGPoint nextPoint = [[pointsArr objectAtIndex:i+1] CGPointValue];
        [self drawLineFromPoint:startPoint toPoint:nextPoint];
    }
} 
```

# php - 如何包含具有最高 id 的 php 文件？

> ID：12578732
> 
> 赞同：0
> 
> 时间：2012-09-25T08:10:10.723
> 
> 标签：php

所以，我想做的和[这个网站所做](http://www.boreme.com)的几乎一样，每个帖子都有一个 id，首先显示 id 最高的帖子，然后显示第二高的帖子，依此类推， ETC...

是不是类似的东西；

```
<a href="posting.php?id=<?php echo max(*something goes here*) ?> 
```

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:12:45.853

当您从数据库中获取数据时，这可能是您应该在 SQL 中执行的操作。`order by`您可以在查询中使用这样的语句很容易地做到这一点：

```
select 
    postID, 
    postTitle, 
    postAuthor 
from 
    posts 
where 
    someCondition=something 
order by 
    postID desc 
```

通过这种方式，您已经将数据从数据库中提取出来，而无需在 PHP 代码中进行任何排序或结构化——在这方面，数据库将比 PHP 更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:16:33.140

我认为您想显示最近 10 个帖子，所以您所拥有的就是获取按帖子 ID 排序的帖子，例如

```
SELECT * FROM posts order by post_id DESC limit 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:14:51.920

您链接到的网站不使用 PHP 生成 ID。他们从数据库中获取帖子并按日期降序排列。

如果你没有数据库，或者想用 PHP 来做，我猜你会这样做：

```
$idlist = array(1,2,3,4,5,6); // Array of IDs, grabbed from wherever.
rsort($idlist); // Sort the array in reverse order.
$idlist[0] // Grab the first in the array to have the biggest. 
```

# facebook - Facebook 应用程序 - {"error":{"message":"(#1) 创建共享时出错","type":"OAuthException","code":1}}

> ID：12578733
> 
> 赞同：0
> 
> 时间：2012-09-25T08:10:12.310
> 
> 标签：facebook, facebook-graph-api

当我的应用程序尝试在“朋友墙”上发布时，有时我会收到此错误：

```
{"error":
    {"message":"(#1) An error occured while creating the share",
     "type":"OAuthException",
     "code":1}
} 
```

我肯定拥有（并使用）长期`access_token`和`publish_stream`许可，实际上有时它有效，有时无效。

您对问题的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:04:34.607

在朋友的墙上发帖的功能已被弃用，并将在 90 天内删除（原因在这篇博文中描述：[https ://developers.facebook.com/blog/post/2012/10/10/growth-带有开放图的质量应用程序/](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)

虽然这不能直接回答您的问题，但确实没有实际意义，您应该采取另一种方法（也在帖子中描述）

# actionscript-3 - as3 从外部源触发事件

> ID：12578735
> 
> 赞同：0
> 
> 时间：2012-09-25T08:10:21.580
> 
> 标签：actionscript-3, tcp, air, osc

我正在构建一个 AIR 应用程序，它可以在一种播放列表中提示多个 swf。我需要从外部系统调用 swfs。我已尝试接收 OSC 消息，但在外部机器上运行的媒体服务器软件将接收但不发送 OSC。有一个更好的方法吗？我以前没有格式化原始 TCP，但这似乎是最好的选择，是吗？

编辑：

我在贸易展厅使用潘多拉魔盒媒体服务器......它被设置为运行视频、地图投影并为显示矩阵提供服务。它具有通过各种协议发送和接收消息的能力。主要问题是，我已经在考虑 OSC 的情况下编写了这个应用程序，因为它大量使用了 tuio 库。然而，潘多拉魔盒不会发送 OSC。我只是想找到另一种在 AS3 中接收 TCP 消息的方法。即，如果他们发送“1”会触发 SWF“1”等等......

# android - 页面图标不出现，只有页面标题 - android

> ID：12578739
> 
> 赞同：2
> 
> 时间：2012-09-25T08:10:38.703
> 
> 标签：android, viewpagerindicator

我正在使用`PageIndicator`with `ViewPager`，但只显示页面标题。页面图标不出现。有谁知道为什么？这是我的适配器。

```
class GoogleMusicAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    public GoogleMusicAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return CONTENT[position % CONTENT.length].toUpperCase();
    }

    @Override public int getIconResId(int index) {
      return ICONS[index];
    }

  @Override
    public int getCount() {
      return CONTENT.length;
    }
} 
```

我的适配器

```
public class FavouritePagerAdapter extends PagerAdapter implements
        IconPagerAdapter, ViewPager.OnPageChangeListener {
private static final int FAVOURITE_EPISODE_INDEX = 0;
private static final int FAVOURITE_SHOW_INDEX = 1;
private static final int NUMBER_OF_PAGES = 2;

private static final String[] FAVOURITE_TITLES = {
        Util.getApplicationContext().getString(
                R.string.favourite_title_episode),
        Util.getApplicationContext().getString(
                R.string.favourite_title_show) };

public static final String TAG_EMPTY_EPISODE = "emtpy_episode";
public static final String TAG_EMPTY_SHOW = "empty_show";
public static final String TAG_LOADING_EPISODE = "loading_epsiode";
public static final String TAG_LOADING_SHOW = "loading_show";

WeakReference<Activity> acitivity;
WeakReference<FavouriteFragment> favouriteFragment;
FavouriteEpisodeAdapter mFavouriteEpisodeAdapter;
FavouriteShowAdapter mFavouriteShowAdapter;

public FavouritePagerAdapter(FavouriteFragment fr, Activity a,
        ArrayList<EpisodeInfo> episode, ArrayList<ShowData> show) {
    super();
    this.favouriteFragment = new WeakReference<FavouriteFragment>(fr);
    this.acitivity = new WeakReference<Activity>(a);
    mFavouriteEpisodeAdapter = new FavouriteEpisodeAdapter(a,
            R.id.textView1, episode);
    mFavouriteShowAdapter = new FavouriteShowAdapter(a, R.id.textView1,
            show);
}

@Override
public CharSequence getPageTitle(int position) {
    Log.d("getPageTitle", FAVOURITE_TITLES[position]);
    return FAVOURITE_TITLES[position];

}

@Override
public int getIconResId(int index) {
    return R.drawable.ic_action_search;
}

@Override
public int getCount() {
    return NUMBER_OF_PAGES;
}

@Override
public Object instantiateItem(View container, int position) {
    View v = this.acitivity.get().getLayoutInflater()
            .inflate(R.layout.favourite_episode_fragment_layout, null);
    ListView list = (ListView) v.findViewById(R.id.listView1);

    TextView empty_text = (TextView) v.findViewById(R.id.empty);
    View loadingView = v.findViewById(R.id.loadingView);
    switch (position) {
    case FAVOURITE_EPISODE_INDEX:
        list.setAdapter(getmFavouriteEpisodeAdapter());
        empty_text.setText(Util.getApplicationContext().getString(
                R.string.favourite_empty_episode));
        empty_text.setTag(TAG_EMPTY_EPISODE);
        loadingView.setTag(TAG_LOADING_EPISODE);
        if (favouriteFragment.get().episodeInitialized.get()
                && getmFavouriteEpisodeAdapter().getCount() == 0) {
            loadingView.setVisibility(View.GONE);
            empty_text.setVisibility(View.VISIBLE);
        }
        break;
    case FAVOURITE_SHOW_INDEX:
        list.setAdapter(getmFavouriteShowAdapter());
        empty_text.setText(Util.getApplicationContext().getString(
                R.string.favourite_empty_show));
        empty_text.setTag(TAG_EMPTY_SHOW);
        loadingView.setTag(TAG_LOADING_SHOW);
        if (favouriteFragment.get().showInitialized.get()
                && getmFavouriteShowAdapter().getCount() == 0) {
            empty_text.setVisibility(View.VISIBLE);
            loadingView.setVisibility(View.GONE);

        }
        break;
    }
    ((ViewPager) container).addView(v, 0);
    if (((ViewPager) container).getCurrentItem() == 0) {
        favouriteFragment.get().loadEpisode();
    }

    return v;
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == arg1;
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    ((ViewPager) container).removeView((View) object);
}

public FavouriteEpisodeAdapter getmFavouriteEpisodeAdapter() {
    return mFavouriteEpisodeAdapter;
}

public void setmFavouriteEpisodeAdapter(
        FavouriteEpisodeAdapter mFavouriteEpisodeAdapter) {
    this.mFavouriteEpisodeAdapter = mFavouriteEpisodeAdapter;
}

public FavouriteShowAdapter getmFavouriteShowAdapter() {
    return mFavouriteShowAdapter;
}

public void setmFavouriteShowAdapter(
        FavouriteShowAdapter mFavouriteShowAdapter) {
    this.mFavouriteShowAdapter = mFavouriteShowAdapter;
}

@Override
public void onPageScrollStateChanged(int arg0) {

}

@Override
public void onPageScrolled(int arg0, float arg1, int arg2) {

}

@Override
public void onPageSelected(int arg0) {
    figureWhichToLoad(arg0);
}

private void figureWhichToLoad(int arg0) {
    try {
        switch (arg0) {
        case 0:// episode
            favouriteFragment.get().loadEpisode();
            break;
        case 1:// show
            favouriteFragment.get().loadShow();
            break;
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

}

# r - R计算数据框中的百分比值

> ID：12578741
> 
> 赞同：2
> 
> 时间：2012-09-25T08:10:48.033
> 
> 标签：r, data-analysis, frequency-distribution

我今天的问题是指我在 R 中处理的一个数据框。数据框的标题如下所示：String(unique), Integer N[0-23]

这 24 个整数值表示与一天中的每个小时相关联的字符串的频率。从逻辑上讲，每行中的 int 值总和等于字符串在数据中出现的频率。

问题是，我不需要字符串在某个小时的实际频率，而是该频率代表的百分比相对于所有行中整数值的总和。

我的讲师暗示 table() 可能是正确的 R 工具，但老实说，我不明白这应该如何帮助我。

如果一切都失败了，我会用 Java 计算它——尽管我真的很感谢你在 R 中提供的帮助。

感谢您到目前为止的阅读，并提前感谢您的帮助，

瑞奇福克斯

@@@@@@我是你的编辑，读给我@@@@@@

在詹姆斯的帮助下，我得到了以下[道具](http://dl.dropbox.com/u/13950025/Bilder/proptable.png)

问题是，每行的百分比总和为 100，但他们应该为整个表这样做。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:15:55.750

`prop.table`在包含值的 a 上使用`matrix`：

```
x <- data.frame(id=letters[1:3],val0=1:3,val1=4:6,val2=7:9)
prop.table(as.matrix(x[-1]),margin=1)
           val0      val1      val2
[1,] 0.08333333 0.3333333 0.5833333
[2,] 0.13333333 0.3333333 0.5333333
[3,] 0.16666667 0.3333333 0.5000000 
```

*编辑：*一个完整​​的工作示例：

```
tt=read.table("topichitsperhod.csv",sep=",",header=TRUE)  
tt=na.omit(tt[-1])
pt=prop.table(tt[-1],margin=NULL) 
```

第一列被省略了，因为它包含主题字符串。

# git - 当 TFS 不在本地时，我如何使用 Microsoft 的 Git-TF 1.0

> ID：12578742
> 
> 赞同：3
> 
> 时间：2012-09-25T08:10:56.603
> 
> 标签：git, tfs, git-tf

在
[TFS 商店中使用 Git](https://stackoverflow.com/questions/1687883/using-git-in-a-tfs-shop)之后，
阅读 Brian Harry 在 msdn 上的博客：http:
[//blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)并
浏览了 Ms 下载页面：
[http](http://www.microsoft.com/en-us/download/details.aspx?id=30474) ://www.microsoft.com/en-us/download/details.aspx?id=30474 ，

我不清楚是否可以将 Git-TF 1.0 与不在我的场所但可通过 VPN 访问的 TFS 一起使用。
如果现在不可能，我愿意接受解决方法；它应该允许我在团队中独立工作，而不是依赖其他成员将我的 Git 东西推送到 TFS。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:37:53.367

**tl;dr：** 是的，它应该可以工作，我每天都在 PPTP VPN 上使用它（而且我很少*使用*VPN。）

为了解释该博客文章中的含义：Team Foundation Server 团队区分了我们的“托管”或“云”服务（[Team Foundation Service](http://tfspreview.com)）和我们的“本地”产品（您安装在您的自己的计算机。）我们使用术语“本地”来表示您安装的 TFS 2012，即使它不在您的本地网络上，甚至不在您自己的数据中心中。

如果你很好奇，问题在于身份验证 - git-tf 没有 UI，因此无法打开 Web 浏览器来要求你在[tfspreview.com](http://tfspreview.com)上进行身份验证。我们需要添加对 Team Foundation Service 的支持以允许其他凭据。

这已经完成，[git-tf 现在可以对托管服务进行身份验证](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)。

如果您有问题，请[在 git-tf codeplex 网站](http://gittf.codeplex.com/)上提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:04:19.370

从第二个链接：

> ...它仅适用于本地 TFS 服务器 - 2008、2010 或 2012。但是我们正在努力增加对 Team Foundation Service 的支持，我希望它将在下一个 sprint 部署中可用。

听起来您可能必须等待下一个版本或使用[源代码](http://gittf.codeplex.com/)

# bash - 打印 & 符号

> ID：12578747
> 
> 赞同：1
> 
> 时间：2012-09-25T08:11:34.910
> 
> 标签：bash

我有一个 bash 脚本，它接受一个带有变量的 url 并将其写入文件，问题是 & 符号正在干扰并被解释为命令/控制字符。

在这种情况下，字符串在传递给脚本之前无法转义，我还没有找到任何方法来做到这一点。

```
if [ $1 ] ; then
    url=$1
    printf %q "$url" > "/somepath/somefile"
fi 
```

例如 $1 是 localhost?x=1&y=2&z=3

打印的只是第一个＆符号之前的部分：“localhost?x=1”

我也尝试过 echo 而不是 printf 但它完全一样？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:16:52.763

您的脚本很好，但您需要使用带引号的参数调用脚本：

```
./myscript.sh "localhost?x=1&y=2&z=3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:23:05.020

echo 和 print 都没有问题。问题是当您运行脚本时，它会在后台启动这两个作业。有关更多信息，您可以查看：[http](http://hacktux.com/bash/ampersand) ://hacktux.com/bash/ampersand 。您可以简单地使用撇号中的 'localhost?x=1&y=2&z=3' 来启动脚本，因此 bash 不会将 & 符号视为运算符，而是将其视为普通字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:14:53.613

引用东西。将所有`$1`s替换为`"$1"`s。并在您实际调用脚本时引用参数。

# html - 如何更改输入文件的按钮浏览的文本和颜色？

> ID：12578749
> 
> 赞同：3
> 
> 时间：2012-09-25T08:11:52.150
> 
> 标签：html, css

我将输入文件设计为：

```
 <input type="file" name="file" id="file" size="52"   /> 
```

![在此处输入图像描述](../Images/8e9fffce6add1a3a2c1dd48c795de45b.png)

我想更改按钮“浏览..”的文本和颜色。你能帮助我吗？谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:05:02.883

外观和功能都还可以，但这不是您真正期望的。认为这对你有帮助。

```
 <input type="text" id="fileName" readonly="readonly" >
 <div class="file_input_div" style="display: inline;">
 <input type="button" id="button" value="Open"/>
 <input type="file"  style="opacity:0; position:relative; left:-40px;"  onchange="javascript: document.getElementById ('fileName') . value = this.value"/>
 </div> 
```

**CSS**

```
​#button{
position: relative;
left:-1px;
background-color:#446655;
}​ 
```

[演示](http://jsfiddle.net/hrYn2/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:22:23.637

它取决于浏览器架构。你对此无能为力。

在stackoverflow上仍然有一些关于这个的讨论

你应该检查一下

访问[如何更改 <input type="file" /> 的按钮文本？](https://stackoverflow.com/questions/1944267/how-to-change-the-button-text-of-input-type-file)

希望这可以帮助

PS：从下次开始，请确保您没有发布重复的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:15:08.593

它是非常依赖于浏览器架构和操作系统的特性，并且无法更改。

### 使用覆盖

但是您可以在此之上覆盖其他元素并隐藏默认外观。你也可以使用一些插件来为你做这件事。

[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)就是这样一款插件。

**演示：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-25T12:18:34.017

请试试这个： [https ://codepen.io/claviska/pen/vAgmd](https://codepen.io/claviska/pen/vAgmd)

```
<div class="input-group">
            <label class="input-group-btn">
                <span class="btn btn-primary">
                    Browse&hellip; <input type="file" style="display: none;" multiple>
                </span>
            </label>
            <input type="text" class="form-control" readonly>
        </div>

$(function() {
 $(document).on('change', ':file', function() {
var input = $(this),
    numFiles = input.get(0).files ? input.get(0).files.length : 1,
    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
input.trigger('fileselect', [numFiles, label]);
});

 // We can watch for our custom `fileselect` event like this
$(document).ready( function() {
  $(':file').on('fileselect', function(event, numFiles, label) {

      var input = $(this).parents('.input-group').find(':text'),
          log = numFiles > 1 ? numFiles + ' files selected' : label;

      if( input.length ) {
          input.val(log);
      } else {
          if( log ) alert(log);
      }

  });
});

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T08:22:00.497

你可以在这里找到它：
[http](http://www.quirksmode.org/dom/inputfile.html)
://www.quirksmode.org/dom/inputfile.html 这篇文章太长了，不能在这里复制。

基本上，您将设计一个`input[type=text]`（用户将看到的），并`input[type=file] opacity = 0`在`input[type=text]`.

希望这能有所帮助。

仅对于 webkit 浏览器，您可以使用`CSS`属性`-webkit-appearance`清除默认样式并从头开始对其进行样式设置。

# asp.net-mvc-3 - 使用 Janrain/OneAll/LoginRadius 等自动登录

> ID：12578754
> 
> 赞同：1
> 
> 时间：2012-09-25T08:12:35.790
> 
> 标签：asp.net-mvc-3, authentication, facebook-authentication, janrain, loginradius

我计划允许用户使用他们的社交网络登录名登录到我正在开发的网站。可能使用多提供商服务之一，例如 Janrain、OneAll、LoginRadius。我想知道的是，如果我网站的用户在访问我的网站时已经登录了他们的社交网站，我该如何自动登录？我遇到的例子是goodreads.com。

我在 ASP.NET MVC3 中进行开发，但我欢迎任何关于我如何在任何技术甚至理论中进行此操作的解释/示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:34:41.283

我在 OneAll 工作，很高兴回答您的问题。

用户使用社交登录登录后，您在数据库中创建一个新帐户，登录该用户并设置一个 cookie。

当同一用户在几天后回来时，您检测到他有一个 cookie，您使用 cookie 信息自动记录他并刷新 cookie。

# java - 从 SOQL 查询中获取列的元数据

> ID：12578767
> 
> 赞同：0
> 
> 时间：2012-09-25T08:13:25.433
> 
> 标签：java, salesforce, metadata, wsc

我在 java 中有一个简单的 SOQL 查询，用于提取 Salesforce 标准对象，如下所示 -

`String soqlQuery = "SELECT FirstName, LastName FROM Contact";`

`QueryResult qr = connection.query(soqlQuery);`

我想获取对象字段的数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:16:01.083

我在下面编写了一个小函数，它将提供电话字段列表及其在您的 Salesforce ORG 的自定义或标准对象中出现的标签。我希望这可以帮助您编写代码的业务逻辑。

```
 public list<String> getFieldsForSelectedObject(){    
   selectedPhoneNumber = ''; //to reset home number field    
   list<String> fieldsName = new list<String>(); 
   selectedObject = 'Object Name' // This should have the object name for which we want to get the fields type
   schemaMap = Schema.getGlobalDescribe(); //Populating the schema map
   try{
       if(selectedObject != null || selectedObject != '' || selectedObject != '--Select Object--'){             
            Map<String, Schema.SObjectField> fieldMap = schemaMap.get(selectedObject).getDescribe().fields.getMap();        
            for(Schema.SObjectField sfield : fieldMap.Values()){
                schema.describefieldresult dfield = sfield.getDescribe();
                schema.Displaytype disfield= dfield.getType();
                system.debug('#######'  + dfield );       
                if(dfield.getType() == Schema.displayType.Phone){// Over here I am trying to findout all the PHONE Type fields in the object(Both Custom/Standard) 
                    fieldsName.add('Name:'+dfield.getName() +'  Label:'+ dfield.getLabel ());
                }   
            }
        }
    }catch(Exception ex){          
        apexPages.addMessage(new ApexPages.message(ApexPages.severity.ERROR,'There is no Phone or Fax Field Exist for selected Object!'));
    }           
    return fieldsName;
} 
```

字符串的示例输出列表::

名称：Home_Phone__c 标签：家庭电话 名称：Office_Phone__c 标签：办公电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-13T11:34:57.243

假设我们有以下`soql`.

`select FirstName,LastName from Contact limit 2`

对象中的查询结果`QueryResult`如下所示。

```
{
    [2]XmlObject
    {
        name={urn:partner.soap.sforce.com}records, value=null, children=
        [
            XmlObject{name={urn:sobject.partner.soap.sforce.com}type, value=Contact, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}Id, value=null, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}FirstName, value=Bill, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}LastName, value=Gates, children=[]}
        ]
    },
    XmlObject
    {
        name={urn:partner.soap.sforce.com}records, value=null, children=
        [
            XmlObject{name={urn:sobject.partner.soap.sforce.com}type, value=Contact, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}Id, value=null, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}FirstName, value=Alan, children=[]}, 
            XmlObject{name={urn:sobject.partner.soap.sforce.com}LastName, value=Donald, children=[]}
        ]
    },
} 
```

为了解析`QueryResult`并获取列名，我实现了以下方法，它将以逗号分隔的字符串返回列名。我已经提到了代码中的逻辑。

```
public String getColumnNames(QueryResult soqlResponse)
{       
    String columns = ""
    try
    {           
        // We are looping inorder to pick the 1st record from the QueryResult
        for (SObject record : soqlResponse.getRecords()) 
        {               
            Iterator<XmlObject> xmlList =  record.getChildren();
            int counterXml = 0;
            while(xmlList.hasNext())
            {
                XmlObject xObj = xmlList.next();
                // Since the 1st 2 nodes contains metadata of some other information, we are starting from the 3rd node only
                if(counterXml > 1)
                {                               
                    columns += xObj.getName().getLocalPart() + ",";                 
                }
                counterXml++;
            }
            // Since we can get the column names from the 1st record, we are breaking the loop after the data of 1st record is read
            break;
        }
        // We are removing the last comma in the string
        columns = columns.substring(0, columns.length() - 1);
    }
    catch(Exception ex)
    {

    }   
    return columns;
} 
```

# ios - 在 Xcode 中自定义地图叠加层

> ID：12578770
> 
> 赞同：0
> 
> 时间：2012-09-25T08:13:50.730
> 
> 标签：ios, xcode, mkmapview, overlay, customization

我有一个带有 2 个圆圈的 mapView。当我尝试定制大的时，小的似乎跟随大的。例如，如果我为大的自定义填充颜色，则较小的填充颜色相同。如何使较小的具有不同的颜色？注意：我使用可重用的标识符。谢谢..这是我的工作代码，但是当我尝试编辑我的小圆圈时，半径为 100 的圆圈没有。注意：这是我的工作代码，因为我尝试过的任何其他方法都失败了。

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay {
static NSString *CircleOverlayIdentifier = @"Circle";

_mapView.delegate = self;

if ([overlay isKindOfClass:[CircleOverlay class]]) {
    CircleOverlay *circleOverlay = (CircleOverlay *)overlay;

    MKCircleView *annotationView =
    (MKCircleView *)[mapView dequeueReusableAnnotationViewWithIdentifier:CircleOverlayIdentifier];

    if (!annotationView) {
        MKCircle *circle = [MKCircle
                            circleWithCenterCoordinate:circleOverlay.coordinate
                            radius:circleOverlay.radius];
        annotationView = [[MKCircleView alloc] initWithCircle:circle];
        //this one

    }

    if (overlay == self.targetOverlay) {
        //adjustable
        annotationView.fillColor = [UIColor colorWithRed:1.0f green:0.0f blue:0.0f alpha:0.3f];
        annotationView.strokeColor = [UIColor redColor];
        annotationView.lineWidth = 1.0f;
    } else {
        //fixed
        annotationView.fillColor = [UIColor colorWithWhite:0.3f alpha:0.3f];
        annotationView.strokeColor = [UIColor purpleColor];
        annotationView.lineWidth = 2.0f;

    }

    return annotationView;
}

return nil;
}

- (void)configureOverlay {
if (self.location) {
    [self.mapView removeAnnotations:[self.mapView annotations]];        
    [self.mapView removeOverlays:[self.mapView overlays]];

    CircleOverlay *overlaysmall = [[CircleOverlay alloc] initWithCoordinate:self.location.coordinate radius:100];
    [self.mapView addOverlay:overlaysmall];

    _targetOverlaySmall = overlaysmall;

    CircleOverlay *overlay = [[CircleOverlay alloc] initWithCoordinate:self.location.coordinate radius:self.radius];
    [self.mapView addOverlay:overlay];

    GeoQueryAnnotation *annotation = [[GeoQueryAnnotation alloc] initWithCoordinate:self.location.coordinate radius:self.radius];
    [self.mapView addAnnotation:annotation];

    [self updateLocations];
    }
} 
```

# php - 如何从 CSV 列创建句子

> ID：12578774
> 
> 赞同：3
> 
> 时间：2012-09-25T08:13:59.177
> 
> 标签：php, csv, input

我的目标是创建一个由三个随机单词组成的句子，这些单词将从 CSV 文件的列中提取。

我无法让 PHP 仅从正确的列中选择单词，因此第一列包含句子中的第一个单词，第二列仅包含中间单词，第三列仅包含最后一个单词。

**CSV 文件示例：**

```
my;horse;runs
your;chicken;sits
our;dog;barks 
```

**输出示例：**

```
My chicken barks. *reload*
Your horse sits. *reload*
Our dog runs. 
```

**到目前为止我的努力：**

```
<?php
$file = fopen('input.csv', 'r');
while (($line = fgetcsv($file, 1000, ";")) !== FALSE) {
  $x = array_rand($line);
  echo $line[$x] . "\n";
}
?> 
```

在此先感谢并原谅这个强烈的菜鸟，请。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:30:39.493

这会根据要求给出随机句子：

```
<?php
$file = fopen('input.csv', 'r');
// prepare token contained
$line = array();
// read csv file line by line
while (!feof($file))
    // fill single line into token container
    $line[] = fgetcsv($file, 1000, ";");
// construct a sentence by picking random words from columns
$sentence = sprintf("%s %s %s\n",
                    $line[rand(0,sizeof($line)-1)][0],
                    $line[rand(0,sizeof($line)-1)][1],
                    $line[rand(0,sizeof($line)-1)][2] );
// output sentence
echo $sentence;
?> 
```

但是它不是很有效，因为它首先将整个 csv 文件读入内存。所以它只适用于较小的 csv 文件（最多几百行）。对于较大的文件，您应该考虑首先选择随机行号并从文件中仅读取该行。这样做三次会给你三个单词，你可以从中构造你的句子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:26:58.550

**代码**

```
<?php

$csv = "my;horse;runs
your;chicken;sits
our;dog;barks";

$lines = explode( "\n", $csv );

foreach( $lines as $line ) {
    echo ucfirst( str_replace( ";", " ", trim( $line ) ) ) . "<br />";
}

?> 
```

**输出**

```
My horse runs
Your chicken sits
Our dog barks 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T08:31:35.430

我会将列排序到单独的数组中，然后选择一个随机索引。

```
<?php
    $file = fopen('input.csv', 'r');
    while (($line = fgetcsv($file, 1000, ";")) !== FALSE) {
        $column1[] = $line[0];
        $column2[] = $line[1];
        $column3[] = $line[2];
    }

    function pickWord($wordArray){
          $x = array_rand($wordArray);
          echo $wordArray[$x] . "\n";
    }

    pickWord($column1);
    pickWord($column2);
    pickWord($column3);
 ?> 
```

类似的东西

# php - jQuery 脚本破坏了另一个 JS 脚本

> ID：12578778
> 
> 赞同：0
> 
> 时间：2012-09-25T08:14:14.217
> 
> 标签：php, jquery

我有一个日历脚本，我从互联网上下来工作正常。最近，我尝试合并一个 jQuery 排序脚本，但我不能让两者一起工作。它是日历脚本或排序脚本有效。

我没有太多的 jQuery 经验。我已经尝试以多种方式更改顺序，更改 jQuery 版本并注释掉一堆 JS 脚本，但我仍然只能得到 get 或其中一个或没有一个工作。

该页面受密码保护，从数据库中提取的信息是私有的，但如果有帮助，我会尝试用虚拟数据创建一个单独的页面；但我希望这个错误是一个明显的错误。

这是页眉：

```
<head>
    <title>My Page</title>

<!-- css -->
    <link rel="stylesheet" type='text/css' href="stylesheets/datatable.css"/>
    <link href="stylesheets/pagination.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/jquery-ui-timepicker-addon.css" />
    <link rel="stylesheet" media="all" type="text/css" href="css/Aristo.css" />

<!-- scripts -->
    <!-- [if lte IE 8]>
    <script language="javascript" type="text/javascript" src="scripts/excanvas.js"></script> <![endif] -->

    <script type="text/javascript" src="js/jquery-latest.js"></script>

    <script type="text/javascript" src="scripts/jquery.datatables.js"></script>
    <script type="text/javascript" src="scripts/jquery.fullcalendar.js"></script>    
    <script type="text/javascript" src="scripts/jquery.placeholder.js"></script>
    <script type="text/javascript" src="scripts/jquery.accordion.js"></script>
    <script type="text/javascript" src="scripts/jquery.tabbed.js"></script>
    <script type="text/javascript" src="scripts/application.js"></script>

    <!-- If I enable this, the calendar works but the sorting script stops working:
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js"></script> -->

    <script type="text/javascript" src="js/jquery-ui-timepicker-addon.js"></script>
    <script type="text/javascript" src="js/jquery-ui-sliderAccess.js"></script>
</head> 
```

这里有明显的错误吗？我正在使用别人的 jQuery。让我知道是否有任何其他我可以添加的信息可能对此有所帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:18:12.220

问题是当您取消注释有问题的部分时，您正在加载 jQuery 库**两次**。这将导致第二个脚本覆盖*上面*`$`的插件已经附加的所有功能（它们的功能位于对象内部）。*`$`*

 *解决您的问题的简单方法：只加载一次 jQuery（最好通过 CDN），将原始库作为第一个脚本加载，然后加载其插件，然后加载您自己的脚本。

因此正确的顺序应该是：

```
<!-- Loading jQuery via Google -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

<!-- Loading jQuery scripts -->
<script type="text/javascript" src="scripts/jquery.datatables.js"></script>
<script type="text/javascript" src="js/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="js/jquery-ui-sliderAccess.js"></script>
<script type="text/javascript" src="scripts/jquery.fullcalendar.js"></script>
<script type="text/javascript" src="scripts/jquery.placeholder.js"></script>
<script type="text/javascript" src="scripts/jquery.accordion.js"></script>
<script type="text/javascript" src="scripts/jquery.tabbed.js"></script>

<script type="text/javascript" src="scripts/application.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:19:15.043

您的排序脚本和日历脚本使用 2 个不同版本的 jQuery。我假设您的排序脚本正在拉起的那个与日历之一（在您的代码中注释掉的那个）相冲突。具体来说：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script> 
```

和：

```
<script type="text/javascript" src="js/jquery-latest.js"></script> 
```

正在相互竞争。*

# selenium - 在网页上水平和垂直滚动表格

> ID：12578783
> 
> 赞同：0
> 
> 时间：2012-09-25T08:14:48.397
> 
> 标签：selenium, webdriver, selenium-webdriver

我在网页上有一张桌子。我想垂直和水平滚动它。但它不适合我。我尝试使用动作，但这也没有帮助。以下是我使用的操作代码

```
WebElement slider = driver.findElement(By.id(ID));
Actions builder = new Actions (driver);
builder.dragAndDropBy(slider, 30, 0).build().perform(); 
```

我也试过：

```
int height = slider.getSize().getHeight();
int width = slider.getSize().getWidth();
dragAndDrop = builder.clickAndHold(slider).moveByOffset(height,0).release().build(); 
```

奇怪的是，我分配滑块的任何值仅移动 6 行。

故事的HTML：

```
 <div id="pt1:pc1:md1::scroller" tabindex="-1" style="position: absolute; overflow: auto; z-index: 0; width: 770px; top: 46px; height: 187px; right: 0px;">
    <div style="width: 1260px; height: 6562px; visibility: hidden;"></div>
    </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:59:56.820

对于这些“瓶颈”（正如 Arek 在问题评论中描述的那样），请尝试 js 方法。对于我的 selenium 自动化项目，我编写了一组方法（使用 jsExecutor）。认为下面的想法应该对您有所帮助（提供的方法代码）：

```
public void jsClick(Strning cssSelector) {
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());
}

public String jsGetText(String cssSelector){
 JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssSelector+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString());

return res;
}

public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    } 
```

希望这对您有所帮助。

# compilation - 在 Ubuntu 上构建亮度 HDR

> ID：12578788
> 
> 赞同：1
> 
> 时间：2012-09-25T08:14:56.163
> 
> 标签：compilation, cmake, ubuntu-12.04, luminance

我正在关注亮度-hdr-2.3.0 的安装，在 Ubuntu 12.04 上构建，但我收到以下错误：

```
root@ben-laptop:/usr/src/luminance# cmake /usr/src/luminance-hdr-2.3.0/src
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
CMake Error at MainWindow/CMakeLists.txt:14 (QT4_WRAP_CPP):
Unnown CMake command "QT4_WRAP_CPP". 
```

有任何想法吗？

# machine-learning - 疾病命名实体识别

> ID：12578790
> 
> 赞同：6
> 
> 时间：2012-09-25T08:15:05.750
> 
> 标签：machine-learning, nlp, medical, named-entity-recognition

我有一堆描述疾病的文本文件。这些文件在大多数情况下都很短，而且通常只包含一个句子。这里给出一个例子：

> 原发性肺动脉高压是一种进行性疾病，其中最小的肺动脉广泛闭塞导致肺血管阻力增加，随后导致右心室衰竭。

我需要的是一个工具，它可以在句子中找到所有疾病术语（例如，在这种情况下为“肺动脉高压”）并将它们映射到像[MeSH](http://www.ncbi.nlm.nih.gov/mesh)这样的受控词汇表。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T03:08:17.467

以下是专门为医学文档解析设计的两个管道：

*   [Apache cTAKES](http://ctakes.apache.org)
*   [NLM 的元地图](http://metamap.nlm.nih.gov)

两者都使用统一医学语言系统 UMLS，因此要求您拥有（免费）许可证。两者都是 Java 并且或多或少易于设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:56:00.233

见[http://www.ebi.ac.uk/webservices/whatizit/info.jsf](http://www.ebi.ac.uk/webservices/whatizit/info.jsf)

> Whatizit 是一个文本处理系统，可让您对文本进行文本挖掘任务。任务由上述窗口下拉列表中的管道定义，文本可以粘贴到文本区域。

您也可以询问 biostars： http: [//www.biostars.org/show/questions/](http://www.biostars.org/show/questions/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-04T20:34:29.100

有很多工具可以做到这一点。一些流行的：

*   [NLTK](http://www.nltk.org/)（蟒蛇）
*   [灵管](http://alias-i.com/lingpipe/)(java)
*   [斯坦福 NER](http://nlp.stanford.edu/software/CRF-NER.shtml) (java)
*   [OpenCalais](http://www.opencalais.com/)（网络服务）
*   [伊利诺伊州 NER](http://cogcomp.cs.illinois.edu/page/software_view/4) (java)

它们中的大多数都带有一些预定义的模型，即它们已经在一些通用数据集（新闻文章等）上接受过训练。但是，您的文本非常具体，因此您可能希望首先构建一个语料库并重新训练其中一个工具，以便根据您的数据进行调整。

更简单地说，作为第一个测试，您可以尝试基于字典的方法：设计一个实体名称列表，并执行一些精确或近似匹配。例如，[LingPipe 的教程](http://alias-i.com/lingpipe/demos/tutorial/ne/read-me.html)中描述了这个操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-28T16:25:13.297

一个 bash 脚本，其中包含从疾病本体生成的词典作为示例： [https ://github.com/lasigeBioTM/MER](https://github.com/lasigeBioTM/MER)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-06T08:37:17.700

[Open Targets](http://www.targetvalidation.org/)有[一个模块](https://github.com/opentargets/library-beam)作为[LINK](https://link.opentargets.io/)的一部分。它不打算直接使用，因此可能需要一些黑客和修补，但它是我为 python 找到的最完整的医学 NER（命名实体识别）工具。有关更多信息，请阅读他们的[博客文章](http://blog.opentargets.org/link/)。

# java - 如何获取 Lucene TopDocs 中文档的唯一计数？

> ID：12578791
> 
> 赞同：1
> 
> 时间：2012-09-25T08:15:04.987
> 
> 标签：java, lucene

当我询问我的 TopDocs 对象的属性“totalHits”时，我得到了点击数。但我想知道找到了“多少”文件，而不是“总点击量”。

例子：

```
- document 1: field A: foo bar - field B: testjes
- document 2: field A: bar foo - field B: foo bar 
```

如果我在“foo”上搜索，当我询问“docs.totalHits”时会得到 3 个结果。但我想知道文件的数量，即 2。

我可以循环列表并将“文档 ID”保存在一个集合中。然后问一下Set的大小，但是Lucene是否支持更好的方法来解决这个问题？

约臣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:40:11.893

如此[处](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/TopDocsCollector.html#getTotalHits%28%29)所述，您可以从`TopDocCollector`using中检索它`getTotalHits()`。

**编辑：**例如

```
TopScoreDocCollector collector = TopScoreDocCollector.create(10, true);
searcher.search(query, collector);
TopDocs topDocs = collector.topDocs();
int numResults = collector.getTotalHits(); 
```

# objective-c - iOS：UIPasteboard 返回 NSData 数组而不是 iOS 6 上的 UIImages

> ID：12578797
> 
> 赞同：3
> 
> 时间：2012-09-25T08:15:39.713
> 
> 标签：objective-c, ios, ios6

我`UIPasteboard`用来访问复制的图像。

```
UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
NSArray *images = pasteBoard.images; 
```

它在 iOS 5 设备上运行良好，数组包含`UIImage`对象。在运行 iOS 6 的设备上，该数组包含`NSData`对象。是已知问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:00:21.963

是的，在看到你的问题后，我检查了一下，想知道`pasteBoard.images`返回的是`NSData`数组而不是`images`. 因此，为了从数据中获取这些图像，我使用了以下代码并成功获取了它们：

```
UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
NSArray *images = pasteBoard.images;
NSData *data = [images objectAtIndex:0];
UIImage *image = [[UIImage alloc]initWithData:data];
imageView.image = image; 
```

如果您复制了多个图像，则必须使用循环来获取所有图像。所以我认为这应该不是问题。

# linux - 获取服务器上 CVS 文件的当前 HEAD 版本

> ID：12578798
> 
> 赞同：0
> 
> 时间：2012-09-25T08:15:41.713
> 
> 标签：linux, cvs, rcs

使用该`rlog`命令我可以将提交日志分析到 CVS*服务器*本身的文件中（即直接访问以“ `,v`”结尾的文件）。没关系。

是否有类似的命令行实用程序将该文件的当前 HEAD 版本打印到标准输出？

我需要它用于将用 PHP 编写的自定义 CVS 状态实用程序（类似于[ViewVC](http://www.viewvc.org/)，但专门为某个存储库制作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:23:08.807

你可能想要`cvs log filename`. 不确定购买你可能需要先做`cvs update filename`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:03:26.077

要打印要签出的文件内容，只需使用`co -p filename`. 这将打印一个小标题，包括到 stderr 的修订号，以及到 stdout 的文件内容。

# regex - 正则表达式验证低于 170000 的值

> ID：12578802
> 
> 赞同：0
> 
> 时间：2012-09-25T08:15:53.453
> 
> 标签：regex, validation

嗨，我有一个小验证来检查值是否低于 170000，这是我尝试过的，但它有一些小问题。值范围为 0 - 170000

/^(?:[1-9]\d{0,4}|[1-6]\d{3}|170000)$/

请有人纠正并解释这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:17:50.940

为什么你需要正则表达式？

不能`if (value <= 170000 && value >= 0)`完成你的工作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:29:31.117

```
/^\D*(\d{1,5}|1[0-6]\d{4}|170000)\D*$/ 
```

这将检查整个字符串。否则，您需要微调正则表达式边界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:33:26.623

```
\b(\d{1,5})\b|\b([1][0123456]\d{4})\b|\b(170000)\b 
```

演示： [http ://regexr.com?328t5](http://regexr.com?328t5)

解释：

1.  `\b(\d{1,5})\b`: 匹配从 0 到 99999 的所有数字
2.  `\b([1][0123456]\d{3})\b`: 匹配 1 后跟 0 到 6，后跟任意 4 位数字，即 100000 到 169999

3.  `\b(170000)\b`: 匹配 170000

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T08:36:56.867

尽管如果可能的话最好避免使用正则表达式进行范围验证，但我认为您的问题在于您的第二个正则表达式段：

*   `[1-9]\d{0,4}`
*   `[1-6]\d{3}`
*   `170000`

第一个将处理长度为 1 到 5 的所有数字，因此第二个应处理`100000`最多（但不包括）`170000`（由第三段处理）的六位数字。

但是，它只处理四位数字（无论如何都已经由第一段处理）所以我怀疑它实际上应该是`1[0-6]\d{4}`.

换句话说，`/^(?:[1-9]\d{0,4}|1[0-6]\d{4}|170000)$/`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:36:15.877

这解决了它，在没有 RegExp 的情况下很容易解决 :) 其他发布 RegExp 进行验证的人也感谢他们。

```
Ext.apply(Ext.form.field.VTypes, {
    //  vtype validation function
    msrp: function(val, field) {
        if(val >= 0 && val <= 170000){
            return true;                
        }else{
            return bundle.getMsg('vl.locate.label.ntavalidmsrp');
        }
        return validMaxMSRPTest.test(val);
    },
    // vtype Text property: The error text to display when the validation function returns false
    msrpText: bundle.getMsg('vl.locate.label.ntavalidmsrp')
}); 
```

# eclipse - Eclipse 调试配置：在 GWT 项目上添加参数 #!e

> ID：12578805
> 
> 赞同：0
> 
> 时间：2012-09-25T08:16:09.630
> 
> 标签：eclipse, debugging, gwt, parameters, url-parameters

我正在使用 Eclipse Indigo 开发一个 GWT 项目。在调试时我需要设置这个 URL：（`http://127.0.0.1:8888/MySite.html#!e`编辑模式）

但相反，打开的是`http://127.0.0.1:8888/MySite.html`

如何在调试时添加此 #!e？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:22:58.207

->在eclipse中右键

->打开调试配置

-> 在参数选项卡选项下，写 Mysite.html#!e 而不是 Mysite.html

-remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -startupUrl **MySite.html#!e** -logLevel INFO -codeServerPort 9997 -port 8888 -war {项目目录路径}

# spring - Spring Security 3.1：注销后捕获会话过期

> ID：12578806
> 
> 赞同：1
> 
> 时间：2012-09-25T08:16:10.243
> 
> 标签：spring, spring-mvc, spring-security, logout, session-timeout

我正在使用 Java + Spring MVC + Hibernate + Spring Security 3.1 开发一个 webapp。当我注销而不是仅重定向到登录页面时，它会转到会话过期方法，因此它会显示登录页面但“会话已过期！” 信息...

这是security-context.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:debug />

    <!-- preauthentication -->    
    <security:global-method-security pre-post-annotations="enabled">
    </security:global-method-security>

   <security:http auto-config="false" use-expressions="true" entry-point-ref="http403EntryPoint" access-denied-page="/errores/accesodenegado">
        <security:intercept-url pattern="/" access="permitAll"/>
        <security:intercept-url pattern="/error.jsp" access="permitAll"/>
        <!-- Allow non-secure access to static resources  -->
        <security:intercept-url pattern="/resources/**" access="permitAll"/>
        <security:intercept-url pattern="/autenticacion/**" access="permitAll"/>
        <security:intercept-url pattern="/errores/**" access="permitAll"/>
        <!-- URLs que dependen de perfiles -->
        <security:intercept-url pattern="/gestion/facturas/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONSL')"/>
        <security:intercept-url pattern="/gestion/tarifas/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONSL')"/>
        <security:intercept-url pattern="/gestion/envios/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')"/>
        <security:intercept-url pattern="/gestion/perfiles/**" access="hasRole('ROLE_ADMIN')"/>
        <security:intercept-url pattern="/gestion/usuarios/**" access="hasRole('ROLE_ADMIN')"/>
        <security:intercept-url pattern="/consulta/**" access="hasAnyRole('ROLE_CONSL','ROLE_ADMIN','ROLE_S_CEN')"/>
        <security:intercept-url pattern="/importacion/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')"/>
        <!-- Pantalla a la que redirige el logout -->           
        <security:logout logout-success-url="/" delete-cookies="JSESSIONID"/>
        <!-- El session timeout lleva a la pantalla de login -->
        <security:session-management invalid-session-url="/errores/sesionexpirada" />
    </security:http>

    <bean id="http403EntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint">
    </bean>

    <bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
        <security:filter-chain-map path-type="ant">
            <security:filter-chain pattern="/**" filters="j2eePreAuthFilter"/>
        </security:filter-chain-map>
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref='preAuthenticatedAuthenticationProvider'/>
    </security:authentication-manager>

    <bean id="preAuthenticatedAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService" ref="preAuthenticatedUserDetailsService"/>
    </bean>

    <bean id="preAuthenticatedUserDetailsService"
            class="org.springframework.security.web.authentication.preauth.PreAuthenticatedGrantedAuthoritiesUserDetailsService"/>

    <bean id="j2eePreAuthFilter" class="es.myApp.security.MyAppUserJ2eePreAuthenticatedProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationDetailsSource" ref="authenticationDetailsSource"/>
        <property name="continueFilterChainOnUnsuccessfulAuthentication" value="false"/>
    </bean>

    <bean id="authenticationDetailsSource" class="org.springframework.security.web.authentication.preauth.j2ee.J2eeBasedPreAuthenticatedWebAuthenticationDetailsSource">
        <property name="mappableRolesRetriever" ref="j2eeMappableRolesRetriever"/>
        <property name="userRoles2GrantedAuthoritiesMapper" ref="j2eeUserRoles2GrantedAuthoritiesMapper"/>
    </bean>

    <bean id="j2eeMappableRolesRetriever" class="org.springframework.security.web.authentication.preauth.j2ee.WebXmlMappableAttributesRetriever">
    </bean>

    <bean id="j2eeUserRoles2GrantedAuthoritiesMapper" class="org.springframework.security.core.authority.mapping.SimpleAttributes2GrantedAuthoritiesMapper">
        <property name="attributePrefix" value="test"/>
    </bean>

</beans> 
```

注销按钮调用：

```
@Controller
@RequestMapping("/autenticacion")
public class AutenticacionController {

[...]

@RequestMapping(value = "salir")
    public String salir(Model model, HttpServletRequest request, HttpServletResponse response) {        
//      request.getSession().removeAttribute(Constantes.USUARIO_SESION);
//      request.getSession().invalidate();
        return "redirect:/j_spring_security_logout";
    }
} 
```

我尝试注释掉这些行并使用它们，但行为完全相同...... Constantes.USUARIO_SESION 将用户变量的名称存储在会话中。

登录方法执行，除其他外：

```
request.getSession().setAttribute(Constantes.USUARIO_SESION, usuario);

UserDetails userDetails = myAppUserDetailsService.loadUserByUsername(usuario.getLogin());
Authentication auth = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());
                            SecurityContextHolder.getContext().setAuthentication(auth); 
```

会话过期经历：

```
@RequestMapping("sesionexpirada")
    public String sesionExpirada(Model model, HttpServletRequest request, HttpServletResponse response) {
    MessageManager msgManager = new MessageManager();

    msgManager.addError("error.sesion.expirada");
    request.getSession().setAttribute("messageManager", msgManager);

    return "inicio";
} 
```

和 web.xml

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Aplicación Web MyApp</display-name>

    <!-- Define la localización de los ficheros de configuración de Spring -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/classes/applicationContext.xml
        </param-value>
    </context-param>

    <!-- Reads request input using UTF-8 encoding -->
    <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>myAppUserJ2eePreAuthenticatedProcessingFilter</filter-name>
        <filter-class>es.myApp.security.XiscoUserJ2eePreAuthenticatedProcessingFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>myAppUserJ2eePreAuthenticatedProcessingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Handles all requests into the application -->
    <servlet>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <servlet-class>es.myApp.controller.XiscoDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- del. welcome files -->
    <!-- useful for Servlet 3 container (Tomcat 7 and Jetty 6) -->
    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

    <!-- Página de error -->
    <error-page>
        <error-code>404</error-code>
        <location>/errores/error</location>
    </error-page>

    <!-- Tiempo de sesión -->
    <session-config>
        <session-timeout>15</session-timeout>
    </session-config>

    <listener>
        <listener-class>
          org.springframework.security.web.session.HttpSessionEventPublisher
        </listener-class>
    </listener>

    <!-- Referencia a recursos jndi WAS -->
    <resource-ref id="ResourceRef_MyApp>
        <res-ref-name>jdbc/myApp</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
    </resource-ref>

</web-app> 
```

我在 Tomcat 6 和 WAS 8.5 上对其进行了测试...

**编辑**：如果我摆脱 Spring Security 的注销并实现自己的注销，它将按预期工作：

我删除：`<security:logout logout-success-url="/" delete-cookies="JSESSIONID"/>`从 security-context.xml 并更改注销时调用的方法：

```
@RequestMapping("salir")
    public String salir(Model model, HttpServletRequest request, HttpServletResponse response) {        
        request.getSession().removeAttribute(Constantes.USUARIO_SESION);

        HttpSession session = request.getSession(false);
        if (session != null) {
            session.invalidate();
        }
        SecurityContextHolder.clearContext();

        return "inicio";
    } 
```

为什么它现在工作？这些代码行取自 Spring 的注销代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:52:52.213

你需要添加

```
 <security:session-management session-fixation-protection="none"/> 
```

给你`security:http`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:28:07.143

我不明白你想要完成什么。您编写了自己的控制器，使会话无效，然后重定向到 spring 安全注销 url。控制器是不必要的，直接使用 spring logout url 即可，默认情况下它会让你的 session 失效。如果您需要在注销时添加特殊行为，请编写您自己的 LogoutSuccessHandler 或扩展其中一个 spring 处理程序并将其添加到 LogoutFilter。

# asp.net-mvc - 实体框架代码优先迁移 NOCHECK 约束？

> ID：12578807
> 
> 赞同：1
> 
> 时间：2012-09-25T08:16:13.450
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-migrations

是否可以在没有检查约束的代码优先迁移中更改表？`Update-Database -Script`除了通过获取 SQL 脚本和修改 sql 语句之外，我还没有找到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:35:43.870

您可以尝试创建自己的`MigrationSqlGenerator`并将其与迁移一起使用（您可以在 中设置自定义 SQL 生成器） - 我认为在添加外键 = 覆盖后继承和添加`DbMigrationsConfiguration`应该足够了。`SqlServerMigrationSqlGenerator``NOCHECK``Generate(AddForeignKeyIperation operation)`

无论如何`NOCHECK`与EF一起使用是灾难的方式。如果您想拥有没有检查约束的数据库，请不要使用 EF，因为每次达到不一致时它都会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T19:29:30.093

在一次性情况下执行此操作的另一种方法是调用 SQL 以手动创建 FK，就像这样，从您的`Up()`方法中：

```
// AddForeignKey("dbo.EFElementGroupEntries", "ConstraintCode", "dbo.EFElementConstraints", "Code");
Sql(@"ALTER TABLE [dbo].[EFElementGroupEntries]  WITH NOCHECK 
        ADD CONSTRAINT[FK_dbo.EFElementGroupEntries_dbo.EFElementConstraints_ConstraintCode] FOREIGN KEY([ConstraintCode])
        REFERENCES[dbo].[EFElementConstraints]([Code])");
Sql(@"ALTER TABLE [dbo].[EFElementGroupEntries] CHECK CONSTRAINT [FK_dbo.EFElementGroupEntries_dbo.EFElementConstraints_ConstraintCode]"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-31T16:56:07.227

如果目标是创建所需的外键，但更新数据库由于现有数据而失败，只需分两个阶段进行。例如，假设我想在 PLAYER 类中为 TEAM 添加一个外键，以实现 1:m 关系，其中必须将所有玩家分配到一个团队。假设所有类都有整数标识主键... 1\. 将通常的两个属性添加到 PLAYER，但使用可为空的 int 作为外键。IE：

```
 public int? TeamID { get; set; }

    public virtual Team Team { get; set; } 
```

2.  添加迁移并更新数据库。所有 TeamID 值都将为空，但您可以创建关系。

    3.  接下来，修复您的数据，以便为每个玩家分配一个有效的 TeamID。如果您正在播种球员数据，您还需要在此处提供 TeamID 值。
    4.  修改 PLAYER 类，使 int 不再可以为空：

        公共 int TeamID { 获取；放; }

    5.  添加另一个迁移并再次更新数据库。你应该很高兴。

# php - Symfony 1.4（Doctrine 1.2.4）：有什么方法可以覆盖所有“Timestampable”吸气剂？

> ID：12578811
> 
> 赞同：2
> 
> 时间：2012-09-25T08:16:32.050
> 
> 标签：php, symfony1, doctrine, timestamp, overriding

在旧版本的 symfony (1.2) /w Propel 中，您可以只将自定义日期格式传递给带时间戳的 getter，例如：

```
$var->getCreatedAt('d.m.Y'); 
```

有没有办法让它与 symfony 1.4 /w Doctrine 一起工作 - 也许通过某种方式覆盖可时间戳字段的默认 getter（注意，我不想覆盖我所有模型类的 getter，这有点麻烦对我来说很脏）。

我看到默认日期格式是在 Timestampable.php 文件（类：Doctrine_Template_Timestampable）中设置的，但我没有进一步了解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:40:49.450

我认为这是 Propel 的一个功能，它没有集成在 Doctrine 中。太糟糕了。

使用 Doctrine，我使用 DateHelper：

```
<?php use_helper('Date') ?>

<?php echo format_date(
  $var->getCreatedAt(), 
  "d.m.Y"
) ?> 
```

如果你想在一个动作中使用它：

```
sfApplicationConfiguration::getActive()->loadHelpers(array('Date'));

$formattedDate = format_date(
  $var->getCreatedAt(), 
  "d.m.Y"
); 
```

# gridview - 以编程方式在 CGridView 中选择一行‎

> ID：12578818
> 
> 赞同：0
> 
> 时间：2012-09-25T08:16:58.367
> 
> 标签：gridview, yii

如何在 Yii 的 CGridview 中设置显示新记录的行的选择。

例如：添加新记录后，用户将被重定向到网格视图页面，其中显示所有记录。现在我想在 gridview 中将新记录显示为选中/突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:44:33.210

1.  加入 main.css

    ```
    .grid-view table.items tr.newrecord {
        background: none repeat scroll 0 0 #FF0000 !important; /* red color is new record */
    } 
    ```

2.  在消息模型中

    ```
    function isNeedSelection()
    {
        return (strtotime($this->created) > time() - 5*60); // 5 minutes
    } 
    ```

3.  在 CGridView 添加行 css 类表达式

    ```
    'rowCssClassExpression' => '$data->isNeedSelection()?"newrecord":$this->rowCssClass[$row%2]', 
    ```

# themes - Qooxdoo，设置所需文本字段的外观

> ID：12578822
> 
> 赞同：0
> 
> 时间：2012-09-25T08:17:23.623
> 
> 标签：themes, qooxdoo, appearance

我想为必填字段添加一些特定的样式，但我只想有一个外观 id。像国家这样的东西

```
MyAppareance: {
    style:function () {
        if (required) {
            // add some special styling
        }
    }
} 
```

我可以为此滥用状态，这是我想避免的。

我有办法访问在外观声明中设置样式的控件实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:13:43.547

显然没有方便的方法来访问正在设置样式的小部件。所以我使用状态来克服这个问题。

# websphere - Websphere：管理代理配置文件和部署配置文件之间的区别？

> ID：12578824
> 
> 赞同：2
> 
> 时间：2012-09-25T08:17:24.617
> 
> 标签：websphere, websphere-7

我正在按照 IBM 的红皮书建议安装 WAS 集群。
我需要从 Web Admin Console 管理服务器的部署和启动/停止。**部署**配置文件是否足够？还是我需要在每台机器上安装一个**管理代理配置文件？**（换句话说，我想知道管理配置文件和部署配置文件是否相互排斥，或者当安装在一起时，它们提供了一些我无法单独从部署配置文件获得的功能）。
非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T08:39:16.367

如果您尝试安装集群，则必须使用 Deployment Manager 配置文件。Deployment Manager 配置文件提供了管理单元的功能。在此单元中，您将添加节点，并使用这些节点上的服务器进程创建集群。为了使用这些特性，您必须使用 WebSphere Network Deployment (ND) 发行版。

管理代理可帮助您管理多个“基础”（独立）服务器。这些服务器没有集群功能，但更适合服务器群，或者例如开发人员机器。您可以在这些独立服务器上运行相同的应用程序，但这不会是一个真正的集群，因为您不会进行集中安装/卸载、负载平衡和开箱即用的故障转移。

# java - 对象化通用道 使用 Objectify4

> ID：12578827
> 
> 赞同：0
> 
> 时间：2012-09-25T08:17:48.647
> 
> 标签：java, google-app-engine, objectify

我想利用 Objectify4 的**新**功能，但是我的应用程序是构建的并且正在使用版本 3。我的应用程序主要构建在该`ObjectifyGenericDao`模式之上，并且 Objectify4 设计模式与此完全不同：

**ObjectifyGenericDao.java**

```
public class ObjectifyGenericDao<T> extends DAOBase
{

    static final int BAD_MODIFIERS = Modifier.FINAL | Modifier.STATIC | Modifier.TRANSIENT;

    static
    {
        // Register all your entity classes here
    }

    protected Class<T> clazz;

    /**
     * We've got to get the associated domain class somehow
     *
     * @param clazz
     */
    protected ObjectifyGenericDao(Class<T> clazz)
    {
        this.clazz = clazz;
    }

    public ObjectifyGenericDao(ObjectifyOpts opts) {
        super(opts);
        //this.clazz = clazz;
    }

    public Key<T> put(T entity)
    {
        return ofy().put(entity);
    }

    // TODO This code was modified
    // and need to be tested
    public List<Key<T>> putAll(Iterable<T> entities)
    {
        Map<Key<T>, T> map = ofy().put(entities);
        return new ArrayList<Key<T>>(map.keySet());
        //return ofy().put(entities);
    }

    public void delete(T entity)
    {
        ofy().delete(entity);
    }

    public void deleteKey(Key<T> entityKey)
    {
        ofy().delete(entityKey);
    }

    public void deleteAll(Iterable<T> entities)
    {
        ofy().delete(entities);
    }

    public void deleteKeys(Iterable<Key<T>> keys)
    {
        ofy().delete(keys);
    }

    public T get(Long id) throws EntityNotFoundException
    {
        return ofy().get(this.clazz, id);
    }

    public T get(String id) throws EntityNotFoundException
    {
        return ofy().get(this.clazz, id);
    }

    public T get(Key<T> key) throws EntityNotFoundException
    {
        return ofy().get(key);
    }

    /**
     * Convenience method to get all objects matching a single property
     *
     * @param propName
     * @param propValue
     * @return T matching Object
     */
    public T getByProperty(String propName, Object propValue)
    {
        Query<T> q = ofy().query(clazz);
        q.filter(propName, propValue);
        return q.get();
    }

    public List<T> listByProperty(String propName, Object propValue)
    {
        Query<T> q = ofy().query(clazz);
        q.filter(propName, propValue);
        return asList(q.fetch());
    }

    public List<Key<T>> listKeysByProperty(String propName, Object propValue)
    {
        Query<T> q = ofy().query(clazz);
        q.filter(propName, propValue);
        return asKeyList(q.fetchKeys());
    }

    public T getByExample(T exampleObj)
    {
        Query<T> queryByExample = buildQueryByExample(exampleObj);
        Iterable<T> iterableResults = queryByExample.fetch();
        Iterator<T> i = iterableResults.iterator();
        T obj = i.next();
        if (i.hasNext())
            throw new RuntimeException("Too many results");
        return obj;
    }

    public List<T> listByExample(T exampleObj)
    {
        Query<T> queryByExample = buildQueryByExample(exampleObj);
        return asList(queryByExample.fetch());
    }

    private List<T> asList(Iterable<T> iterable)
    {
        ArrayList<T> list = new ArrayList<T>();
        for (T t : iterable)
        {
            list.add(t);
        }
        return list;
    }

    private List<Key<T>> asKeyList(Iterable<Key<T>> iterableKeys)
    {
        ArrayList<Key<T>> keys = new ArrayList<Key<T>>();
        for (Key<T> key : iterableKeys)
        {
            keys.add(key);
        }
        return keys;
    }

    private Query<T> buildQueryByExample(T exampleObj)
    {
        Query<T> q = ofy().query(clazz);

        // Add all non-null properties to query filter
        for (Field field : clazz.getDeclaredFields())
        {
            // Ignore transient, embedded, array, and collection properties
            if (field.isAnnotationPresent(Transient.class)
                || (field.isAnnotationPresent(Embedded.class))
                || (field.getType().isArray())
                || (Collection.class.isAssignableFrom(field.getType()))
                || ((field.getModifiers() & BAD_MODIFIERS) != 0))
                continue;

            field.setAccessible(true);

            Object value;
            try
            {
                value = field.get(exampleObj);
            }
            catch (IllegalArgumentException e)
            {
                throw new RuntimeException(e);
            }
            catch (IllegalAccessException e)
            {
                throw new RuntimeException(e);
            }
            if (value != null)
            {
                q.filter(field.getName(), value);
            }
        }

        return q;
    }

    // Added, but may not be really useful
    public Query<T> query(String filter, String value) {
        Query<T> q = ofy().query(clazz).filter(filter, value);
        return q;

} 
```

Objectify4 的瓶颈在于它没有 DAOBase，因此迁移现有代码并不容易。

在使用 Objectify4 功能时如何拥有这种模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:46:48.423

如[Objectify Google Group](http://groups.google.com/group/objectify-appengine)中所述，只需删除`extends DAOBase`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:00:12.360

您可以在此处获取 OfyService 的代码： [https](https://code.google.com/p/objectify-appengine/wiki/BestPractices) ://code.google.com/p/objectify-appengine/wiki/BestPractices 在 ObjectifyGenericDao 添加静态导入，然后您可以使用以下方法：

```
 public Key<T> save(T entity){
    return ofy().save().entity(entity).now();
}

public void delete(T entity){
    ofy().delete().entity(entity);
}

public T get(Long id){
    return ofy().load().type(clazz).id(id).get();
} 
```

等等 ...

# ruby - 将字符串 ID 与 BSON::ObjectId 进行比较

> ID：12578828
> 
> 赞同：5
> 
> 时间：2012-09-25T08:17:49.300
> 
> 标签：ruby, arrays, mongodb, mongoid

我有一个由类型组成的数组，`BSON::ObjectId`我希望它与一些 ID 作为字符串进行比较。

```
if my_array_of_BSON_ObjectIds.include?(@my_id_as_a_string)
   # delete the item from the array
else
   # add the item to the array as a BSON::ObjectId
end 
```

这不起作用，因为类型不同，我可以把我的字符串变成一个`BSON::ObjectId`吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T08:20:42.433

带有 10gen 驱动程序的 Mongoid 2.x：

```
BSON::ObjectId.new('506144650ed4c08d84000001') 
```

带轻便摩托车的 Mongoid 3：

```
Moped::BSON::ObjectId.from_string('506144650ed4c08d84000001') 
```

Mongoid 4（轻便摩托车）/ Mongoid 5/6/7（mongo）：

```
BSON::ObjectId.from_string('506144650ed4c08d84000001') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T08:22:42.440

您可以将`BSON::ObjectId(@my_id_as_a_string)`您的 id 用于表示`BSON::ObjectId`

参考[http://api.mongodb.org/ruby/current/BSON.html#ObjectId-class_method](http://api.mongodb.org/ruby/current/BSON.html#ObjectId-class_method)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T10:12:33.197

```
collection.delete_one({"_id"=>BSON::ObjectId(params['id'])}) 
```

这对我有用，它成功地从数据库中删除了记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-18T05:48:16.357

有一个更短的方法：

```
BSON::ObjectId("id_here") 
```

但是对于您的情况，在比较之前将对象简单地映射到 id 会更容易：

```
if my_array_of_BSON_ObjectIds..map(&:to_s).include?(@my_id_as_a_string) 
```

# javascript - 我如何告诉 jslint 一个函数是外部的？

> ID：12578834
> 
> 赞同：0
> 
> 时间：2012-09-25T08:18:10.987
> 
> 标签：javascript

我有以下代码：

```
/*jslint browser: true*/
/*global $, jQuery*/

if (json.RowKey !== json.NewRowKey) {
   $("#row_" + row).attr('data-rk', json.RowKey);
   updateGridMeta(entity, json.PartitionKey, json.NewRowKey, row, obj.table);
   updateGridTitles();
} 
```

lint 报告在定义之前使用了 updateGridTitles。有没有办法在我的脚本顶部添加一些东西来告诉它不要报告这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:22:42.743

与您告诉 JSLint 的其他变量一样，它们是全局变量。

将其添加到此列表中：

```
/*global $, jQuery*/ 
```

这样的：

```
/*global $, jQuery, updateGridMeta */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:19:59.733

如果`updateGridTitles`稍后定义，您可以简单地添加

```
var updateGridTitles; 
```

到顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:22:25.727

您确实可以告诉 jslint 函数是全局的。在这里查看他们的文档：http: [//www.jslint.com/lint.html#global](http://www.jslint.com/lint.html#global) 和这里提出的另一个问题：[JSLint：在定义之前使用](https://stackoverflow.com/questions/9621162/jslint-was-used-before-it-was-defined)

# winforms - 如何将 WinForm GUI 转换为 PowerShell 脚本？

> ID：12578837
> 
> 赞同：1
> 
> 时间：2012-09-25T08:18:35.357
> 
> 标签：winforms, forms, user-interface, powershell, converter

众所周知，我们可以[编写一个 PowerShell 脚本来显示一个 windows 窗体](http://www.techotopia.com/index.php/Creating_GUIs_in_Windows_PowerShell_1.0_with_WinForms#A_Basic_Windows_PowerShell_GUI)。

是否有自动转换器将 WinForm 程序集或 *.designer.cs（设计师生成的 C# 代码）转换为 PowerShell 脚本？

有一个“PrimalForms 2011”社区版本，但它现在似乎被称为“PowerShell Studio 2012”并且有一个 45 天试用版。

还有其他选择吗？一个更简单的转换器还是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:50:10.720

我使用两种解决方案（很好地隐藏在网络上但仍然存在）来解决您的问题：

**首先**，您可以使用[Sapiens PrimalForms 社区版](http://www.sapien.com/downloads#Community%20Tools/32%20Bit/PrimalFormsCE.exe)（它是免费的，您只需登录 Sapiens 并下载）。此框架允许您以图形方式构建您的 DialogBox，然后生成 Windows 窗体的 PowerShell 代码（仍然可用，如图所示下面）。

![在此处输入图像描述](../Images/68dd982d0bf89a569d6b4d6db3a6173b.png)

**其次**，您有一个名为[PowerShell Form Converter](http://powershell-scripting.com/index.php?option=com_content&task=view&id=134&Itemid=71)的脚本，由 Arnaud Petitjean (11-05-2007) 编写。再次您必须注册，这篇文章是用法语写的，但您可以下载一个 Powershell 脚本，将 Windows 窗体从 .CS 文件转换为 PS1。就像在 Sapiens 编辑器中一样，转换被注释（这里是法语）以及编码事件的地方。

# google-app-engine - 有没有办法将文本搜索下载到本地主机开发服务器？

> ID：12578846
> 
> 赞同：0
> 
> 时间：2012-09-25T08:19:22.850
> 
> 标签：google-app-engine

现在在 Google App Engine 上，您可以通过 appcfg 命令将种类下载到 localhost 开发服务器，有没有办法将文本搜索索引下载到 localhost 开发服务器以进行本地测试和调试？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:14:28.130

暂时没有，抱歉。编写这样的应用程序并不难，但我们还没有工具。

# compiler-errors - VS 2012 RC 编译器问题

> ID：12578847
> 
> 赞同：1
> 
> 时间：2012-09-25T08:19:23.693
> 
> 标签：compiler-errors, windows-runtime, dependency-properties, converter

我们有 VS2012 RC 并收到许多实际上不是错误的错误。

问题是，当项目中出现错误时，我必须真正查看是哪个错误，因为当我解决真正的问题时，我会遇到大量错误，这些错误会运行得很好。

问题：

1) 成员 xxx 无法识别或不可访问（在 App.xaml 中，在已定义 Style 的用户控件上重新定义 DependencyProperty），例如：

```
<Style .... TargetType="MyControl">
     <Setter Property="MyCustomProperty" .... 
```

这里的问题是 DP 显然是公开的，但我对这个案子有几十个错误。

2) 转换器根本无法识别，同样在 app.xaml 文件中：

```
xmlns:converters="using:MyProject.Converters"

<converters:DebugConverter x:Name="DebugConverter" /> 
```

错误：命名空间中不存在名称 DebugConverter ...它实际上可以正常运行所有转换器，但仍然存在错误。

所有这些错误仅显示在错误列表中，在运行应用程序时不是问题，当您必须在 100 多个错误中找到一个真正的问题时，这只是一个大问题。

这里有什么建议吗？关闭文件/重新启动 VS 无济于事，重置 VS 上的设置也无济于事。

感谢您提前提出任何建议

# ios - 将二进制文件下载到文档目录 (IOS)。如何？

> ID：12578849
> 
> 赞同：0
> 
> 时间：2012-09-25T08:19:23.933
> 
> 标签：ios, xcode, url, download, binary

我想在我的 IPad-Documents-Directory 中存储一个二进制文件。

```
 - (void) connectionDidFinishLoading:(NSURLConnection *) connection
 NSString *txt = [[[NSString alloc] initWithData:responseData encoding: ?????] autorelease];
 //write to disk
 file = ...;
 [txt writeToFile:file atomically:NO encoding:??? error:NULL]; 
```

所以，现在我得到一个与原始文件不同的二进制文件。我假设，它是编码或 Bigendian / LittleEndian；如果我使用 Ascii 文件，则此方法可以正常工作。我该怎么办？不使用 NSString？什么编码？试了几个。没有工作。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:22:06.373

您可以（并且应该）将 NSData 对象直接保存到光盘上，而无需将其转换为 NSString：

```
[responseData writeToFile:file atomically:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:23:58.187

您将二进制数据存储在一个`NSString`对象中并将其写入文件系统，而我认为您应该将该二进制数据加载到一个`NSData`对象中，然后说：

```
[myNSDataObject writeToFile:myFilePath atomically:YES]; 
```

# security - howsecureismypassword.com 算法

> ID：12578851
> 
> 赞同：7
> 
> 时间：2012-09-25T08:19:33.217
> 
> 标签：security, passwords, cracking

有一个不错的网站[http://www.howsecureismypassword.net/](http://www.howsecureismypassword.net/)，它决定了破解密码需要多长时间。

我想要的是实现这样的功能，所以我需要一个算法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T08:49:35.053

了解常见的密码攻击向量将使您了解如何进行计算。当我们需要一个数字时，假设一台台式计算机每秒可以检查 40 亿 (4x10 ^(9 ) 个密码，这似乎)[是正确的](http://en.wikipedia.org/wiki/Password_strength#Password_guess_validation)。

重要的是要意识到攻击者很少尝试仅破解您的密码。相反，他们将拥有大量帐户的用户 ID，并且他们希望尝试破解尽可能多的用户 ID。因此，他们将大部分时间花在破解简单密码上，而不是为难密码所困扰是值得的。

## 0\. 非常明显的攻击

尝试输入用户 ID 作为密码。令人惊讶的是有多少人这样做。您的密码可以瞬间破解。

## 1.字典攻击

这很简单。攻击者只需要保留（例如）10 ^(6 个)最常用密码的列表，并检查每个密码一次。这可以在一秒钟内完成。如果您的密码在最常见的密码列表中，那么它可能几乎可以瞬间被破解。

## 2.蛮力

如果您的密码不在字典中，那么另一种选择是使用蛮力。使用此方法破解密码所需的时间取决于 (a) 密码的长度，以及 (b) 包含密码的符号集。一般公式是

```
timeTaken = (sizeOfSymbolSet ^ passwordLength) / (4*10^9)  # (seconds) 
```

例如，如果您的密码仅由小写字母组成，则符号集的大小为 26。下面列出了破解密码可能需要多长时间作为其长度的函数：

```
Length Time
     4   0.1 millisecs
     6   0.1 seconds
     8   1 minute
    10   10 hours
    12   9 months 
```

如果您使用所有小写和大写字母、数字和符号，则符号集更接近 100。破解密码所需的时间相应更长：

```
Length Time
     4   25 millisecs
     6   4 minutes
     8   28 days
    10   800 years
    12   8 million years 
```

不过，不要太自满！800 万年的数字假设您随机选择 12 个字母、数字和符号作为密码，即您的密码类似于

```
t8Qkx#rxZAM@
%Kuc;p8WHmFU
xDE!XE$rLGh4
KJdx2K8BS33K
HTaeCc&t46L; 
```

有多少人有这样的密码？

## 3\. 组合方法

这依赖于独创性和蛮力的结合。它是前两种方法的混合，依赖于常见的“密码约定”而不是常见的密码。

例如，许多人具有“字典单词后跟数字”形式的密码。牛津英语词典大约有 2x10 ^(5 个)单词，因此要生成“字典单词后跟数字”的所有组合，大约是 200 万个不同的密码，可以在一秒钟内再次轻松签入。

其他常见的比喻包括用看起来相似的符号替换字符 - `o`with `0`，`l`with `1`，`a`with`@`等。一旦你有一个字典单词列表，生成所有这些替换是微不足道的。猜测一下，您可能会将列表的长度增加 1000 倍，这仍然可以在一秒钟内检查。

我的猜测是，该网站使用了部分或全部这些方法的组合来计算破解密码需要多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T22:56:26.893

好吧，你永远不知道：这是今天发布的：

*   [http://www.leebutterman.com/passphrase-safety/](http://www.leebutterman.com/passphrase-safety/)

检查全部在 javascript 中完成。代码在 github 上可用

*   [http://github.com/lsb/text-entropy](http://github.com/lsb/text-entropy)
*   [https://github.com/lsb/text-entropy-api](https://github.com/lsb/text-entropy-api)

从[它的工作原理](http://www.leebutterman.com/passphrase-safety/how-it-works.html)页面我得到的印象是作者知道他在说什么。（您会想阅读它，他*编写*javascript 实现的方式本身就很有趣）

也许您可以借用一些见解，甚至是代码（欢迎分叉，我没有看到超出版权声明的许可）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:22:07.227

不，因为它取决于密码上使用的散列。但是，运行快速字典攻击、检查长度、大小写字母、数字和符号以及它们的常用组合（例如“123”）可以让您对密码的强度有所了解。

# sql-server - SQL Server Profiler 中的死锁图显示同一集群键上的互锁

> ID：12578853
> 
> 赞同：4
> 
> 时间：2012-09-25T08:19:34.653
> 
> 标签：sql-server, indexing, deadlock, sql-server-profiler

我正在尝试使用 SQL Server Profiler 确定死锁的原因。这是死锁图： ![死锁图](../Images/a3423ec771af59219adadbe7576f6848.png) 两个语句都是**插入**，然后`select scope_identity();` 实际上有 2 个并发进程在一个循环中重复执行**insert-select_identity**。

我期望的是*insert对**聚集索引*进行排他锁，而*select*对*非聚集索引*进行共享锁定，然后它们彼此等待释放各自的索引。

我看到的是两个进程都在等待相同的资源被释放——聚集索引。怎么会这样？特定的追索权应该属于一个过程或另一个过程。我在这里想念什么？提前感谢所有人。

编辑：是的，隔离级别是可序列化的。PS：可能，我对非聚集索引上的共享锁的假设是错误的，因为我的选择不包含`where`语句

Edit2：这是xml的一部分：

```
 <resource-list>
   <keylock hobtid="72057594148028416" dbid="29" objectname="<confidential>" indexname="PK_WP_Inbound_StockTransactionLine" id="lock9641700" mode="RangeS-S" associatedObjectId="72057594148028416">
    <owner-list>
     <owner id="process8e09288" mode="RangeS-S"/>
    </owner-list>
    <waiter-list>
     <waiter id="process991ce08" mode="RangeI-N" requestType="convert"/>
    </waiter-list>
   </keylock>
   <keylock hobtid="72057594148028416" dbid="29" objectname="<confidential>" indexname="PK_WP_Inbound_StockTransactionLine" id="lock9641700" mode="RangeS-S" associatedObjectId="72057594148028416">
    <owner-list>
     <owner id="process991ce08" mode="RangeS-S"/>
    </owner-list>
    <waiter-list>
     <waiter id="process8e09288" mode="RangeI-N" requestType="convert"/>
    </waiter-list>
   </keylock>
  </resource-list> 
```

据此，我认为这是**由 SERIALIZABLE 隔离引起的范围扫描**（谷歌搜索）。但是，我仍然不明白这是如何发生的，以及推荐的补救措施是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:31:03.497

考虑从访问同一记录的两个并行事务（T1 和 T2）调用以下代码。

```
Read LastRow
Insert AtLastRow 
```

假设上下文切换发生在`Read`. 所以操作顺序是

```
T1 Read LastRow
T2 Read LastRow
T2 Insert AtLastRow // This will wait for T1 to finish.
T1 Insert AtLastRow // This will wait for T2 to finish. Hence deadlock! 
```

以上读取将`Range S-S`锁定。最后插入也需要与其他事务持有的`Range I-N`现有锁不兼容。`Range S-S`因此它等待。

可以有多种方法来解决这个问题。

1.  使用已**提交的读取**作为整体隔离级别并且不可序列化。这将防止获取范围锁。
2.  **使用更新锁**(UPDLOCK)读取。这将排在第一位。因此，其他事务将在 Read 本身等待。
3.  **避免读取和插入/更新模式**。直接继续插入/更新，让它失败。

如果您有任何问题，请告诉我。

# sql-server - SQL Server 脚本分区

> ID：12578858
> 
> 赞同：0
> 
> 时间：2012-09-25T08:20:15.230
> 
> 标签：sql-server, database-partitioning

在网上和网上的书上看了一下，找不到我的问题的答案，所以就这样吧。

在进行其他人的设计时，我有几个表都绑定到相同的分区模式和分区函数。我希望执行会影响数亿行的拆分操作。

拆分没问题：

```
ALTER PARTITION SCHEME [ps_Scheme] NEXT USED [FG1]  ; 
ALTER PARTITION FUNCTION [pfcn_Function]() SPLIT RANGE (20120331) 
```

但是，我担心这会同时影响许多表并且不可取。

因此，我打算创建一个表的新副本并在一个新函数上进行拆分

```
CREATE PARTITION FUNCTION [pfcn_Function1](INT) 
AS RANGE RIGHT 
FOR VALUES 
(
 20090101, 20090130, 20090131, 20090201...etc
)

CREATE PARTITION SCHEME [ps_Scheme1] 
AS PARTITION [pfcn_Function1] TO 
([FG1], [FG2] etc

CREATE TABLE [dbo].[myTableCopy]
(
....
) ON ps_Scheme1 
```

然后我会切换我希望拆分的分区：

```
-- The partition numbers did not align because they are based on 2 different functions.
ALTER TABLE [Table] SWITCH PARTITION 173 TO [TableCopy] PARTITION 172 
```

最后我的问题是这可以自动化吗？您可以使用 SELECT INTO 在 SQL 中轻松制作表的副本，但我看不到如何自动对表进行分区，即 CREATE TABLE 语句末尾指向分区方案的位。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:23:50.157

在网上的书上找到这个：

> 您可以通过以下两种方式之一将现有的非分区表转换为分区表。
> 
> 一种方法是使用 CREATE INDEX 语句在表上创建分区聚集索引。此操作类似于在任何表上创建聚集索引，因为 SQL Server 实质上会删除该表并以聚集索引格式重新创建它。如果表已经应用了分区聚集索引，则可以删除索引并在分区方案上通过使用带有 DROP EXISTING = ON 子句的 CREATE INDEX 重建它

我认为这可能会解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:03:17.410

是的，您可以在自动化过程中切换分区。这是您可以自定义的代码示例。它由元数据表驱动。

```
CREATE TABLE [dbo].[PartitionTableSetup](
[Id] [int] IDENTITY(1,1) NOT NULL,
[TableName] [varchar](256) NULL,
[SwitchTable] [varchar](256) NULL,
[Partition] [int] NULL)

select @merge = (
Select N'' + com + '' from (
Select N' ALTER TABLE  '
+ TableName +
' SWITCH PARTITION 2 TO '
+ SwitchTable 
+ ' PARTITION 2 Truncate table ' 
+ SwitchTable as com
,value
,1 as ord
From (
SELECT convert(datetime,value) as value
,pt.TableName
,pt.SwitchTable
FROM sys.partition_range_values AS RV
JOIN sys.partition_functions AS PF 
ON RV.function_id = PF.function_id
Join dbo.[Partitions] pr 
On name = PartitionFunction
Join dbo.PartitionTableSetup pt 
On pt.[Partition] = pr.ID
WHERE datediff(d,convert(datetime,value),GETDATE()) > pr.[Range] -3
) a
Union all
Select N' ALTER PARTITION FUNCTION '
+ b.PartitionFunction 
+ '() MERGE RANGE ('''
+ Convert(nvarchar,value,121) 
+''')' as com
,value
,2 as ord
From (
SELECT convert(datetime,value) as value
,pr.PartitionFunction
FROM sys.partition_range_values AS RV
JOIN sys.partition_functions AS PF 
ON RV.function_id = PF.function_id
Join dbo.[Partitions] pr 
On name = PartitionFunction
WHERE datediff(d,convert(datetime,value),GETDATE()) > pr.[Range] -3
) b       
) c Order by value
, ord
for xml path ('')
)   
EXECUTE (@merge) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:55:47.417

它可以自动化，但我不确定是否值得。如果只是“几个”表，而不是数百个，那么最好只编写每个表的脚本，然后构建一个脚本来执行复制/拆分复制/切换/拆分源/切换。

[`sys.tables`](http://msdn.microsoft.com/en-us/library/ms187406.aspx)自动化这将涉及从/ [`sys.columns`](http://msdn.microsoft.com/en-us/library/ms176106.aspx)/ [`sys.indexes`](http://msdn.microsoft.com/en-us/library/ms173760.aspx)/[`sys.index_columns`](http://msdn.microsoft.com/en-us/library/ms175105.aspx)和其他类似视图动态构建临时表定义，包括所有索引。[与SMO Scripting](http://msdn.microsoft.com/en-us/library/ms162153.aspx)相同的方式。

# javascript - 从 javascript 检测浏览器自动完成设置

> ID：12578859
> 
> 赞同：0
> 
> 时间：2012-09-25T08:20:23.910
> 
> 标签：javascript, jquery

有什么办法，我们可以从客户端脚本检测自动完成的浏览器设置？不同的浏览器有不同的自动完成设置。

我想根据自动完成功能的客户端浏览器设置将 autocomplete="off" 添加到文本字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:56:34.537

你为什么不谷歌它我的朋友......

[http://help.dottoro.com/ljdwgiwh.php](http://help.dottoro.com/ljdwgiwh.php)

```
Example Code: 
```

用一些文本内容填写用户名和城市字段，然后提交表单。
之后，开始用相同的内容填充这些字段。将针对用户名字段显示一个自动完成窗口。

```
 <head>
    <script type="text/javascript">
        function DisableAutoComp () {
            var username = document.getElementById ("username");
            if ('autocomplete' in username) {
                username.autocomplete = "off";
            }
            else {
                    // Firefox
                username.setAttribute ("autocomplete", "off");
            }
        }
    </script>
</head>
<body>
    Fill the user name and city fields with some text content, and submit the form.<br />
    After that, start to fill these fields with the same content. An autocomplete window will displayed for to the user name field.
    <br /><br />
    <form method="post" action="#URL#">
        User name, with autocompletion:
        <input type="text" id="username" name="username" autocomplete="on" />
        <br />
        City, without autocompletion:
        <input type="text" name="city" autocomplete="off" />

        <br /><br />
        <input type="submit" value="Send" />
    </form>
    <br />
    <button onclick="DisableAutoComp ();">Disable autocompletion!</button>
</body> 
```

# struts2 - Struts 2如何将参数传递给动作

> ID：12578864
> 
> 赞同：1
> 
> 时间：2012-09-25T08:20:37.280
> 
> 标签：struts2, xwork

我使用 Struts 2 框架，我想像这样在我的操作中传递一个参数`localhost:8080/MyApp/ModifierMessage.action?id=9`。在我的 jsp 页面中，我有以下带有操作的文本：

```
<a href=\"/OCC/ModifierMessage.action\">Modifier</a> 
```

有人可以帮我在我的操作中添加动态 ID 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:29:49.050

使用`<s:url>`和`<s:a>`标记。例如，您的动态 id 被称为`dynamic_id`：

```
<s:url var="myUrl" action="ModifierMessage.action" namespace="/OCC">
    <s:param name="id">%{dynamic_id}</s:param>
</s:url>

<%-- The link --%>

<s:a href=%{#myUrl}>Modifier</s:a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:39:13.880

```
public class MyAction extends ActionSupport {
   private int id;

   public String execute() {
       ...
      this.id = 123;
      return SUCCESS; 
   }

   public int getId() { return this.id; }
   public void setId(int id) { this.id = id; }
   ...
} 
```

在上面的代码中，如果它返回 SUCCESS 那么浏览器将被转发到

```
/<app-prefix>/myNamespace/otherAction.action?id=123 
```

# backbone.js - Backbone.js 模型，有 2 个父节点

> ID：12578872
> 
> 赞同：0
> 
> 时间：2012-09-25T08:21:03.530
> 
> 标签：backbone.js, relationships

我想创建一个基于主干的页面，其中在类似表格的布局中有未定义数量的列和行。“表格”结构和单元格数据应保存到后端。

简化模型为：

排：

*   ID
*   标签

柱子：

*   ID
*   标签

细胞：

*   行ID
*   列 ID
*   价值

在这种情况下，一个单元格属于一行一列。

如果我动态添加行和列，单元格将如何知道它们的 rowID 和 columnId 是什么，尤其是在新添加的行+列尚未保存的情况下？

另一个问题是如何将一行单元格连接到一个行对象，同时将一列单元格连接到一个列对象？

提前谢谢您，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:08:43.203

我会忘记行和列的概念，只为单元格使用索引位置。

如果您有 C 列和 R 行，则位置 Column = 2 和 Row = 3 的单元格将位于位置 (3 - 1) * C + 2

这使您可以轻松处理不断变化的列数和行数。您还可以动态重新计算属于行或列的所有对象，然后创建对象和行列。

# objective-c - VoiceOver UIAccessibilityAnnouncementNotification 声音

> ID：12578873
> 
> 赞同：1
> 
> 时间：2012-09-25T08:21:04.780
> 
> 标签：objective-c, ios, accessibility

用于通过`UIAccessibilityPostNotification(UIAccessibilityAnnouncementNotification, string);`VoiceOver 宣布事情。这对于摘要等非常有用。

问题在于宣布输入/删除的文本，VoiceOver 在回显您输入的文本时使用更深的音调，而在您删除文本时使用更深的音调。文档提到无法控制语音的音调，是否可以在字符串中放入一些 unicode 字符或可以传递任何参数来执行此操作？

# iphone - 自定义滚动条 iOS

> ID：12578875
> 
> 赞同：0
> 
> 时间：2012-09-25T08:21:24.643
> 
> 标签：iphone, ios, ipad, uikit

我正在开发一个 iOS 应用程序，我想要一个类似滚动条的元素，它不附加到任何 UIScrollView 。现在我正在定制一个 UISlider 看起来像一个滚动条。我想知道是否有其他方法。

这是我正在尝试做的事情：
我正在制作 PDF 查看器，所以我在 PDF View 下面有这个滚动条。当您滚动它时，会出现一个包含目标页面预览的小弹出窗口。当您停止滚动时，它会变为该页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:25:03.180

实际上，您可以为此使用任何图像，但是您希望它具有样式，然后将其作为单独的实体添加到滚动视图中。

然后，您需要做的就是根据当前滚动量（根据 和 之间的差值计算）计算它的`contentOffset`位置`contentSize`。

过去，我已经能够使用这种方法获得一些非常独特的滚动视图集。

**编辑：**
您可以创建两个 UIImageViews 一个用于“跑步者”，一个用于“滚动图标”，如下所示：

![赛跑者](../Images/e9868a88a6aa89bfeaacd77249183440.png)

![图标](../Images/0fb167c2615e7fced8b333d8bd64b43d.png)

然后你可以把它们放在一起。

然后，您需要在此视图上获取某种算法来计算图标在跑步者上的位置。这可以通过计算 UIScrollView 的`contentOffset`和`contentSize`属性之间的差异来完成。

如果 contentSize 为 3000，当前 contentOffset 为 1500，则图标将位于跑步者的中心。

您可以将其添加到您的`scrollViewDidScroll`委托方法中。

然后，您需要对此进行反向编程，以便它也响应触摸，并且根据运行器上图标的位置，您可以确定在 UIScrollView 上导航到的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:32:23.613

您可能想查看[TimeScroller提供的类似效果](https://github.com/andrewroycarter/TimeScroller)

# c++ - Boost ASIO 库 - SSL - 无共享密码

> ID：12578882
> 
> 赞同：1
> 
> 时间：2012-09-25T08:21:57.690
> 
> 标签：c++, windows, ssl, boost-asio

我无法让 SSL 与 asio 库一起使用。

这就是我设置服务器部分的方式。

```
serverServicePtr->network_context->set_options(boost::asio::ssl::context::default_workarounds| boost::asio::ssl::context::no_sslv2 );
serverServicePtr->network_context->set_password_callback(boost::bind(&ServerService::GetPassword));
serverServicePtr->network_context->use_private_key_file("privkey.pem", boost::asio::ssl::context::pem);
...
clientSocket->handshake( boost::asio::ssl::stream_base::server ); 
```

客户部分：

```
boost::asio::ssl::context ctx(boost::asio::ssl::context::sslv23);
ctx.load_verify_file("pubkey.pem");

ctx.set_verify_mode(boost::asio::ssl::verify_peer);
ctx.set_verify_callback(boost::bind(&verify_certificate, _1, _2));  

boost::asio::ssl::stream<boost::asio::ip::tcp::socket> s(io_service, ctx);
boost::asio::connect(s.lowest_layer(), iterator);
s.lowest_layer().set_option(boost::asio::ip::tcp::no_delay(true));  
s.handshake(boost::asio::ssl::stream_base::client); 
```

握手失败。服务器说“握手：没有共享密码”，客户端只是说。该服务器拒绝客户端。

我的问题是，哪里出了问题？我错过了什么？也许，我生成的钥匙错了？如何为 asio 生成它们？

# javascript - 简单的水平滚动

> ID：12578887
> 
> 赞同：1
> 
> 时间：2012-09-25T08:22:08.430
> 
> 标签：javascript, jquery, scroll

是否可以在这里保留这样的简单功能：

```
$.fx.speeds.xslow = 1500;
function goToByScroll(id){
    $('html,body').animate({
        scrollTop: $("#"+id).offset().top
    },'slow');
} 
```

并使其用于水平滚动？我想在不使用大型水平插件的情况下保持这样的简单。我在想scrollLeft，但无法让它与偏移量一起使用......任何想法都会很棒！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:25:00.293

就像你说的，你可以使用 scrollLeft 来做到这一点：

```
function goToByScrollHoriz(id){
    $('html,body').animate({
        scrollLeft: $("#"+id).offset().left
    },'slow');
} 
```

请参阅[此小提琴](http://jsfiddle.net/qS2Ke/1/)以获取工作示例（确保在运行时页面上不显示 Div #3）。

# php - netbeans php远程服务器上传文件

> ID：12578888
> 
> 赞同：1
> 
> 时间：2012-09-25T08:22:09.373
> 
> 标签：php, netbeans, ftp

我是一名学生，netBean php 远程服务器的新手。我试图通过netbeans（运行时）将php文件上传到远程服务器。我确定运行配置中的所有内容，ftp 信息都是正确的，我有权将文件上传到该文件夹​​。

并出现此错误：消息提示：

`"Cannot logout from server *name. Reason 250 OK. Current directory: *dir name"`

日志：

```
Log in output window:
220---------- Welcome to Pure-FTPd [privsep] ----------
220-You are user number 17 of 500 allowed.
220-Local time is now 04:13\. Server port: 21.
220-This is a private system - No anonymous login
220 You will be disconnected after 3 minutes of inactivity.
USER a4514022
331 User a4514022 OK. Password required
PASS ******
230-OK. Current restricted directory is /
230-362 files used (3%) - authorized: 10000 files
230 2476 Kbytes used (0%) - authorized: 1536000 Kb
TYPE I
200 TYPE is now 8-bit binary
CWD /public_html
250 OK. Current directory is /public_html
CWD /public_html
250 OK. Current directory is /public_html 
```

# 概括

失败：文件 test.php 无法上传文件 test.php（未知原因）。运行时间：408 毫秒，传输：0 个文件，0 KB

我不明白发生了什么。如何解决？我用的是netbean 6.9.1，windows 7 和java ver 7 (build 1.7.0_05) platform 1.7 那些数字，不知道哪个是版本。我只是把所有这些都放在那里。看来我是很少遇到这个问题的人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T08:44:52.763

我知道你问过这个问题，可能你的问题已经解决了，但我为其他人写了这个；首先检查代理。工具>选项>代理设置，然后设置上“无代理”。应该会解决的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-07T12:43:46.250

我必须选择安全性较低的选项，例如加密：纯 FTP 选项才能使其适用于 GoDaddy 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T21:35:52.523

这个答案来得更晚。我也有错误并最终在这里搜索。

我的错误是我在用另一个阅读器（Netbeans 之外）编辑我想要下载的文件。换句话说，下载的文件无法保存到本地文件系统，因为打开的文件阻止了它。

# java - PDF to Image 转换大尺寸图片

> ID：12578889
> 
> 赞同：1
> 
> 时间：2012-09-25T08:22:09.993
> 
> 标签：java, pdf, icepdf

我正在使用下面的代码将 PDF 转换为 PNG 图像。

```
 Document document = new Document();
        try {
            document.setFile(myProjectPath);
            System.out.println("Parsed successfully...");
        } catch (PDFException ex) {
            System.out.println("Error parsing PDF document " + ex);
        } catch (PDFSecurityException ex) {
            System.out.println("Error encryption not supported " + ex);
        } catch (FileNotFoundException ex) {
            System.out.println("Error file not found " + ex);
        } catch (IOException ex) {
            System.out.println("Error handling PDF document " + ex);
        }

        // save page caputres to file.
        float scale = 1.0f;
        float rotation = 0f;

        // Paint each pages content to an image and write the image to file
        InputStream fis2 = null;
        File file = null;
        for (int i = 0; i < 1; i++) {
            BufferedImage image = (BufferedImage) document.getPageImage(i,
                    GraphicsRenderingHints.SCREEN,
                    Page.BOUNDARY_CROPBOX, rotation, scale);
            RenderedImage rendImage = image;
            // capture the page image to file
            try {
                System.out.println("\t capturing page " + i);
                file = new File(myProjectActualPath + "myImage.png");
                ImageIO.write(rendImage, "png", file);
                fis2 = new BufferedInputStream(new FileInputStream(myProjectActualPath + "myImage.png"));
            } catch (IOException ioe) {
                System.out.println("IOException :: " + ioe);
            } catch (Exception e) {
                System.out.println("Exception :: " + e);
            }
            image.flush();
        } 
```

`myProjectPath`是pdf文件的路径。

问题是我有大小为 305 KB 的 pdf 图像。当我使用上面的代码转换图像时，图像大小为 5.5 MB，这是出乎意料的。为什么会发生这种情况？有没有办法压缩这个？如果我得到压缩大小的解决方案（通过缩小像素大小），也可以。

**注意：**对于其他 pdf 文件，图像将达到 305 KB。一个 PDF 文件会发生这种情况，但不确定为什么会发生这种情况。

## 编辑 1

我正在使用 jar 文件作为

```
icepdf-core.jar
icepdf-viewer.jar 
```

我的进口是

```
import org.icepdf.core.exceptions.PDFException;
import org.icepdf.core.exceptions.PDFSecurityException;
import org.icepdf.core.pobjects.Document;
import org.icepdf.core.pobjects.Page;
import org.icepdf.core.util.GraphicsRenderingHints; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:27:21.930

您应该能够通过更改比例来更改文件的大小。PDF 通常比渲染图像小得多。它们可以表示渲染图像将使用大量字节来表示的文本和矢量图形。实际上，我对您的任何 png 都与 pdf 大小相同感到有些惊讶（除非 pdf 只是图片）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:46:39.897

您可以从 pdf 中提取图像（使用 PDFBox 的示例）：

```
 List<PDPage> pages = document.getDocumentCatalog().getAllPages();
    for(PDPage page : pages) {
        Map<String, PDXObjectImage> images = page.getResources().getImages();

        for(PDXObjectImage image : images.values()){
            //TODO: write image to disk
        }   
    } 
```

OR/AND 您可能希望将它们以 jpg 格式保存到磁盘，因为 jpg 比 png 更胜一筹。

你甚至可以通过调用来识别原始图像的格式并在写入磁盘时使用它：

```
image.getSuffix(); 
```

# ios - 在没有链接的情况下在 Facebook 墙上发帖？

> ID：12578892
> 
> 赞同：0
> 
> 时间：2012-09-25T08:22:15.647
> 
> 标签：ios, facebook

是否可以在不发布链接的情况下使用 FBDialogs 在 Facebook 墙上发帖？我只想发布没有图片或链接的短信。

当我尝试

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
    @"Message", @"name",
    @"Message", @"message",
    nil];

// Invoke the dialog
[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

它发布空帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:30:29.093

请执行下列操作：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
    @"Message", @"name",
    nil];

// Invoke the dialog
[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

也就是说，不要传入 message 参数，它将填充用户输入的任何内容。无论如何，预先填写消息字段是违反 Facebook 政策的。

# android - 如何在 webview 上检测滑动手势

> ID：12578895
> 
> 赞同：15
> 
> 时间：2012-09-25T08:22:26.287
> 
> 标签：android, webview, gesture, swipe

我正在开发一个简单的android应用程序，里面有a`RelativeLayout`和a `WebView`。

我必须检测仅在屏幕左侧 20% 的区域从下到上的滑动。因此，当用户从下到上在该空间中滑动时，我必须显示一个自定义对话框。

我尝试的是：

```
import android.app.Activity;
import android.view.MotionEvent;
import android.view.View;

public class ActivitySwipeDetector implements View.OnTouchListener {

    static final String logTag = "ActivitySwipeDetector";
    private Activity activity;
    static final int MIN_DISTANCE = 100;
    private float downY, upY;

    public ActivitySwipeDetector(Activity activity){
        this.activity = activity;
    }

    public void onRightToLeftSwipe(){

    }

    public void onLeftToRightSwipe(){

    }

    public void onTopToBottomSwipe(){

    }

    public void onBottomToTopSwipe(){
        System.out.println("BOTTOM TO TOP SWIPE DONE!");
    }

    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()){
        case MotionEvent.ACTION_DOWN: {
            downY = event.getY();
            return true;
        }
        case MotionEvent.ACTION_UP: {
            upY = event.getY();
            float deltaY = downY - upY;
            if(Math.abs(deltaY) > MIN_DISTANCE){
                if(deltaY > 0) { this.onBottomToTopSwipe(); return true; }
            }
            else {
                return false;
            }

            return true;
        }
        }
        return false;
    }

}

    layout = (RelativeLayout)this.findViewById(R.id.layout);
    layout.setOnTouchListener(activitySwipeDetector); 
```

但它什么也没做！

所以我尝试以这种方式创建自定义 webview：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.webkit.WebView;

public class MyWebView extends WebView {
    public MyWebView(Context context) {
        super(context);
    }
    public MyWebView(Context context,AttributeSet set){
        super(context,set);
    }

    @Override 
    public boolean onTouchEvent(MotionEvent evt) {   

        boolean consumed = super.onTouchEvent(evt); 
        if (isClickable()) { 
            switch (evt.getAction()) { 
            case MotionEvent.ACTION_DOWN:  
                lastTouchY = evt.getY();
                downTime = evt.getEventTime();
                hasMoved = false; 
                break; 
            case MotionEvent.ACTION_MOVE: 
                hasMoved = moved(evt); 
                break; 
            case MotionEvent.ACTION_UP: 
                float actualTouchY = evt.getY();
                long currentTime = evt.getEventTime();
                float difference = Math.abs(lastTouchY - actualTouchY);
                long time = currentTime - downTime;

                if ( (lastTouchY < actualTouchY) && (time < 220) && (difference > 100) ) {
                    System.out.println("SWIPE1");
                }
                if ( (lastTouchY > actualTouchY) && (time < 220) && (difference > 100) ) {
                    System.out.println("SWIPE2");
                }
                break; 
            } 
        } 
        return consumed || isClickable(); 
    } 
    long downTime;
    private float lastTouchY; 
    private boolean hasMoved = false; 
    private boolean moved(MotionEvent evt) { 
        return hasMoved || 
                Math.abs(evt.getY() - lastTouchY) > 10.0; 
    }

} 
```

但没有成功！！！有人能帮我吗？？谢谢！！！！！:)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T08:29:08.760

使用带有自定义 Web 视图的[GestureDetector ..](http://developer.android.com/reference/android/view/GestureDetector.html)

```
webView.setGestureDetector(new GestureDetector(new CustomeGestureDetector())); 
```

**手势检测器：**

```
private class CustomeGestureDetector extends SimpleOnGestureListener {      
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if(e1 == null || e2 == null) return false;
        if(e1.getPointerCount() > 1 || e2.getPointerCount() > 1) return false;
        else {
            try { // right to left swipe .. go to next page
                if(e1.getX() - e2.getX() > 100 && Math.abs(velocityX) > 800) {
                    //do your stuff
                    return true;
                } //left to right swipe .. go to prev page
                else if (e2.getX() - e1.getX() > 100 && Math.abs(velocityX) > 800) {
                    //do your stuff
                    return true;
                } //bottom to top, go to next document
                else if(e1.getY() - e2.getY() > 100 && Math.abs(velocityY) > 800 
                        && webView.getScrollY() >= webView.getScale() * (webView.getContentHeight() - webView.getHeight())) {
                    //do your stuff
                    return true;
                } //top to bottom, go to prev document
                else if (e2.getY() - e1.getY() > 100 && Math.abs(velocityY) > 800 ) {
                    //do your stuff
                    return true;
                } 
            } catch (Exception e) { // nothing
            }
            return false;
        }
    }
} 
```

**自定义网页视图：**

```
public final class CustomWebView extends WebView {

private GestureDetector gestureDetector;

/**
 * @param context
 * @param attrs
 * @param defStyle
 */
public CustomWebView(Context context) {
    super(context);
}

/**
 * @param context
 * @param attrs
 * @param defStyle
 */
public CustomWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

/**
 * @param context
 * @param attrs
 * @param defStyle
 */
public CustomWebView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

/* 
 * @see android.webkit.WebView#onScrollChanged(int, int, int, int)
 */
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
}

/* 
 * @see android.webkit.WebView#onTouchEvent(android.view.MotionEvent)
 */
@Override
public boolean onTouchEvent(MotionEvent ev) {
    return gestureDetector.onTouchEvent(ev) || super.onTouchEvent(ev);
}

public void setGestureDetector(GestureDetector gestureDetector) {
    this.gestureDetector = gestureDetector;
}
} 
```

正如Андрей Москвичёв所说：

它可以在不派生 WebView 类的情况下通过注册 touch listener:`webview.setOnTouchListener(new OnTouchListener() ...)`并从中调用来解决`gestureDetector.onTouchEvent(ev)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-29T17:19:07.103

'webView.setGestureDetector(new GestureDetector(' 解决方案已弃用。

下一个解决方案很容易实现。滚动，点击链接仍然有效。

1 - 将此添加到您的 webView：

```
webView.setOnTouchListener( new OnSwipeWebviewTouchListener( getActivity(), this)); 
```

'this' 意味着你的调用类实现了 TouchListener 接口方法。您可以通过 onSwipeRight() 和 onSwipeLeft() 方法实现您的导航。

2 - 使用这个 OnTouchListener：

```
public class OnSwipeWebviewTouchListener implements View.OnTouchListener {
    private final GestureDetector gestureDetector;
    public OnSwipeWebviewTouchListener(Context ctx, TouchListener touchListener) {
        gestureDetector = new GestureDetector(ctx, new GestureListener(touchListener));
    }
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return gestureDetector.onTouchEvent(event);
    }
    private final class GestureListener extends GestureDetector.SimpleOnGestureListener {
        private TouchListener touchListener;
        GestureListener(TouchListener touchListener) {
            super();
            this.touchListener = touchListener;
        }
        @Override
        public boolean onDown(MotionEvent e) {
            return false;  // THIS does the trick
        }
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    // You can customize these settings, so 30 is an example
                    if (Math.abs(diffX) > 30 && Math.abs(velocityX) > 30) {
                        if (diffX > 0) {
                            touchListener.onSwipeRight();
                        } else {
                            touchListener.onSwipeLeft();
                        }
                        result = true;
                    }
                } else {
                    result = false;
                }
            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }
} 
```

3 - TouchListner 的一个例子可能是：

```
public interface TouchListener  {
    default void onSwipeLeft() {
        Logger.d( "Swipe left");
    }
    default void onSwipeRight() {
        Logger.d( "Swipe right");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-28T00:20:12.060

我已经尝试了很多尝试来让这个 webview 和 swipe 工作。经过一番折腾，我写了一个简单有效的解决方案。

我使用以下两篇stackoverflow文章 [在WebView活动中编写代码Android左/右滑动手势......](https://stackoverflow.com/questions/21565131/android-left-right-swipe-gesture-in-webview-activity-with-clicking-on-links-and)以及 [Android中的Fling Gesture和Webview](https://stackoverflow.com/questions/4229177/fling-gesture-and-webview-in-android)

首先将项目设置为一个空项目，然后添加第一个代码。

```
import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;

import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.content.Context;
import android.view.MotionEvent;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        MyWebView webView = new MyWebView(this);
        setContentView(webView);

        //setContentView(R.layout.activity_main);
        //webView = findViewById(R.id.web);

        webView.setInitialScale(1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setLoadWithOverviewMode(true);
        webView.getSettings().setUseWideViewPort(true);
        webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webView.setScrollbarFadingEnabled(false);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setDomStorageEnabled(true);
        webView.setWebViewClient(new WebViewClient());
        webView.loadUrl("http://example.com");

    } 
```

然后你想创建一个自定义的 WebView。

```
 class MyWebView extends WebView {
            Context context;
            GestureDetector gd;
            public MyWebView mywebview;

            private static final int SWIPE_DISTANCE_THRESHOLD = 100;
            private static final int SWIPE_VELOCITY_THRESHOLD = 100;

            public MyWebView(Context context) {
                super(context);
                this.context = context;
                gd = new GestureDetector(context, sogl);
                mywebview = this;
            }

            @Override
            public boolean onTouchEvent(MotionEvent event) {
                gd.onTouchEvent(event);
                return super.onTouchEvent(event);
            }

            GestureDetector.SimpleOnGestureListener sogl = new SimpleOnGestureListener() {
                public boolean onDown(MotionEvent event) {
                    return true;
                }

                @Override
                public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
                    float distanceX = e2.getX() - e1.getX();
                    float distanceY = e2.getY() - e1.getY();
                    if (Math.abs(distanceX) > Math.abs(distanceY) && Math.abs(distanceX) > SWIPE_DISTANCE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (distanceX > 0) {
                            mywebview.goForward();
                            show_toast("swipe right");
                        }
                        else {
                            mywebview.goBack();
                            show_toast("swipe left");
                        }
                        return true;
                    }
                    return false;
                }

            };

            void show_toast(final String text) {
                Toast t = Toast.makeText(context, text, Toast.LENGTH_SHORT);
                t.show();
            }

        }

    @Override
    public void onBackPressed() {  // navigation bar
        webView.goBack();
        //super.onBackPressed();
    }

}   // END ... MainActivity extends AppCompatActivity 
```

我已经在他们的模拟器中的 android 2020.3.1 以及 android 手机和 webview 上运行了这段代码，并且左右滑动可以正常工作。这个版本的 onFling 方法可以更好地在页面中移动。

# android - 如何在单击按钮时动态添加editText并检索每个editText的值

> ID：12578901
> 
> 赞同：0
> 
> 时间：2012-09-25T08:22:51.173
> 
> 标签：android, android-edittext

我想在按钮单击（比如+）时将editText元素动态添加到我的布局中。就像在默认 android 联系人中添加新联系人时添加它们的方式一样。我还想将每个 editText 的内容检索到一个数组或类似的东西中。

我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:51:15.150

好的，这是如何做到的。

1.  使用所需的 EditText 的规范创建一个布局 .xml 文件

2.  在您的活动代码中，实例化一个 LayoutInflater，您可以使用 LayoutInflater.from(Context)

3.  使用充气机创建并返回您的 EditText 视图，根据需要存储它。layoutInflater 将要求提供一个 .xml 文件。

4.  将膨胀的视图添加到视图容器以使其显示在任何地方。

祝你好运

# html - IOS6 移动 web 应用缓存 HTML

> ID：12578902
> 
> 赞同：1
> 
> 时间：2012-09-25T08:22:51.997
> 
> 标签：html, ios6

我们在主屏幕上保存了一个移动网络应用程序。该应用程序使用带有 jquery mobile 的单页 HTML 文件进行编码。

在 iOS5 及以下版本中，设备不会缓存 index.html 文件，因此每次启动应用程序时，设备都会请求 HTML 页面。这非常重要，因为我们在服务器前面有另一个处理身份验证的应用程序，因此我们依赖 302 http 代码，它会导致重定向进行身份验证。如果成功，另一个重定向会返回到我们的 index.html 页面。

在 iOS6 中，尽管我们设置了无缓存控制标头，但 index.html 文件似乎已被缓存！这是一个问题，因为我们无法进行身份验证，因此当用户开始使用应用程序时，所有请求都会失败（它们未经身份验证）。

我似乎找不到任何关于这是否是 iOS6 中实现的功能的细节。有人对此有所了解吗？我知道他们对缓存有点疯狂（缓存帖子响应）......

注意：了解身份验证的解决方案并不理想，但我们目前无法更改。只是寻找关于苹果做了什么导致这个错误的参考！

**更新：**

在使用服务器正在响应的 Charles Web 调试代理后发现了一些有趣的东西，`Cache-Control:private`这意味着代理不会缓存，但浏览器会缓存。这就提出了一个问题，即 iOS 6 主屏幕移动网络应用程序现在是否真的正确处理了这个缓存控制？！？需要进一步调查我们的基础架构中的哪些硬件正在添加此缓存控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:05:00.440

我在基于 HTML5/JQM/Jersey 的应用程序中遇到了同样的问题。我将**cache-control**标头设置为**no-cache**，现在它似乎可以在大多数设备上运行，但在某些设备上仍然会间歇性地失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:08:20.723

我在我的应用程序中遇到了同样的问题，并发现您必须使用 Cache-control: no-cache 设置请求的标头，以避免 iOS6 缓存响应。

请查看以下链接：

[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:14:32.250

如果您使用：

```
Cache-Control:no-cache, no-store 
```

iOS6 不应该有任何方法来缓存 AJAX 调用。我怀疑iOS6实际上开始遵守规则并实施“Cache-control：private”，因为它最初是为了工作，而几乎所有其他浏览器都只是将其视为“no-cache”指令。

在使用 PHP 的 SAJAX 框架（设置为“私有”）时，我遇到了同样的问题。

# iphone - 无法在 xcode 中创建 iboutlet

> ID：12578903
> 
> 赞同：0
> 
> 时间：2012-09-25T08:22:55.203
> 
> 标签：iphone, xcode

我只想问为什么我不能创建一个iboutlet（例如UITableView）。我从我的不同项目中复制了一个 nib 文件，即 .h 和 .m 文件（因为我需要它们）。之后，我重命名了 .h、.m 和 nib 文件。然后当我要添加或连接 IBOutlets 到它时，我不能。为什么？有人知道如何解决吗？多谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:27:23.067

这是因为您需要提供 xib 引用的新类名（正如您所说的重命名它）

![在此处输入图像描述](../Images/01b0b842fbbdd0ade4d190c2bb7a66c0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:25:36.600

也许您忘记在 .xib 文件中更改类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:43:55.400

尝试按照以下步骤重命名 .h、.m 和 xib 文件。这将对您有所帮助。

1）转到头文件`eg. MyViewController.h.`

2）右键单击您的班级名称`eg. Right click on MyViewController.`

3) 选择重构-> 重命名。

4）写新名字`eg. MyViewController1`。

5) 预览和保存。

这将从任何地方重命名您`Old class name`的`New Class name`。

并且还要检查部分下的文件所有者的自定义类属性`Identity Inspector`是否与`New Class name`

# oracle - PL/SQL - 在流水线函数中立即执行

> ID：12578907
> 
> 赞同：2
> 
> 时间：2012-09-25T08:23:06.037
> 
> 标签：oracle, plsql, execute-immediate, pipelined-function

我想在我的流水线函数中执行动态查询并返回此查询的结果。是否有可能做到这一点？流水线函数方便我为我的应用程序实现良好的界面，因为它的行为就像一个表格。

功能：

```
CREATE OR REPLACE FUNCTION MyFunction(p_schema VARCHAR2) RETURN MyTableType Pipelined IS
v_query VARCHAR2(1000);
BEGIN
  v_query := 'SELECT * FROM TABLE ('||p_schema||'.somepackage.SomeFunction)'; --SomeFunction is another pipelined function
  EXECUTE IMMEDIATE v_query;
  --Results of the v_query are compatible with MyTableType's row type. But how to return them from pipelined function?
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:35:53.433

可以结合动态 SQL 和流水线函数，但返回类型将不是动态的：返回的列的数量和类型将是固定的。

您可以使用[`EXECUTE IMMEDIATE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BHCEBBAI)with `BULK COLLECT`（感谢[@be here now](https://stackoverflow.com/users/272864/be-here-now)）、[动态游标](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#i13057)或[`DBMS_SQL`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sql.htm#BABEDAHF)返回多行。这是一个带有动态光标的示例：

```
SQL> CREATE OR REPLACE PACKAGE pkg AS
  2     TYPE test_tab IS TABLE OF test%ROWTYPE;
  3     FUNCTION dynamic_cursor(l_where VARCHAR2) RETURN test_tab PIPELINED;
  4  END;
  5  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY pkg IS
  2     FUNCTION dynamic_cursor(l_where VARCHAR2) RETURN test_tab PIPELINED IS
  3        cc sys_refcursor;
  4        l_row test%ROWTYPE;
  5     BEGIN
  6        OPEN cc FOR 'SELECT * FROM test WHERE ' || l_where;
  7        LOOP
  8           FETCH cc INTO l_row;
  9           EXIT WHEN cc%NOTFOUND;
 10           PIPE ROW (l_row);
 11        END LOOP;
 12        RETURN;
 13     END;
 14  END;
 15  /

Package body created. 
```

我们称之为动态函数：

```
SQL> SELECT *
  2    FROM TABLE(pkg.dynamic_cursor('id <= 2'));

        ID DAT
---------- ---
         1 xxx
         2 xxx 
```

与动态 SQL 一样，请注意[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:29:39.767

我认为是这样的：

```
CREATE OR REPLACE FUNCTION MyFunction(par1 VARCHAR2, ...) RETURN MyTableType Pipelined IS
v_query VARCHAR2(1000);
l_result MyTableType;
BEGIN
  v_query := --My query created based on parameters
  EXECUTE IMMEDIATE v_query into l_result;

  pipe row(l_result);
END; 
```

仅当 v_query 返回 1 行时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T16:15:21.490

我无法得到@VincentMalgrat 的工作答案。但它非常接近。对我来说，这绝对是朝着正确方向的一大帮助。

这是我要工作的内容：

包裹

```
 CREATE OR REPLACE PACKAGE pkg AS
     TYPE test_row IS RECORD  ( test_name  VARCHAR2 (255), test_number number, test_date date );  
     TYPE test_tab IS TABLE OF test_row;
     FUNCTION dynamic_cursor(l_where VARCHAR2) RETURN test_tab PIPELINED;
   END; 
```

包体

```
 CREATE OR REPLACE PACKAGE BODY pkg IS
     FUNCTION dynamic_cursor(l_where VARCHAR2) RETURN test_tab PIPELINED IS
        cc sys_refcursor;
        l_row test_row;
     BEGIN
        OPEN cc FOR 'select name_column, number_column, date_column FROM my_table where number_column ='||l_where;
        LOOP
           FETCH cc INTO l_row;
           EXIT WHEN cc%NOTFOUND;
           PIPE ROW (l_row);
        END LOOP;
        RETURN;
     END;
  END; 
```

# python - django中业务逻辑和数据访问的分离

> ID：12578908
> 
> 赞同：575
> 
> 时间：2012-09-25T08:23:06.770
> 
> 标签：python, django, model-view-controller, data-access-layer, business-logic-layer

我正在用 Django 编写一个项目，我看到 80% 的代码都在文件中`models.py`。这段代码令人困惑，一段时间后，我不再理解真正发生的事情。

这是困扰我的问题：

1.  我发现我的模型级别（应该只负责处理来自数据库的数据）也发送电子邮件、通过 API 访问其他服务等，这很丑陋。
2.  另外，我发现将业务逻辑放在视图中是不可接受的，因为这样会变得难以控制。例如，在我的应用程序中，至少有三种方法可以创建 的新实例`User`，但从技术上讲，它应该统一创建它们。
3.  我并不总是注意到我的模型的方法和属性何时变得不确定以及何时产生副作用。

这是一个简单的例子。起初，`User`模型是这样的：

```
class User(db.Models):

    def get_present_name(self):
        return self.name or 'Anonymous'

    def activate(self):
        self.status = 'activated'
        self.save() 
```

久而久之，变成了这样：

```
class User(db.Models):

    def get_present_name(self): 
        # property became non-deterministic in terms of database
        # data is taken from another service by api
        return remote_api.request_user_name(self.uid) or 'Anonymous' 

    def activate(self):
        # method now has a side effect (send message to user)
        self.status = 'activated'
        self.save()
        send_mail('Your account is activated!', '…', [self.email]) 
```

我想要的是在我的代码中分离实体：

1.  **我的数据库的实体，持久性级别：我的应用程序保留了哪些数据？**
2.  **我的应用程序的实体，业务逻辑级别：我的应用程序做什么？**

实现这种可以在 Django 中应用的方法的良好实践是什么？

* * *

## 回答 #1

> 赞同：740
> 
> 时间：2012-10-12T10:59:06.263

您似乎在询问*数据模型*和*域模型*之间的区别——后者是您可以找到最终用户感知的业务逻辑和实体的地方，前者是您实际存储数据的地方。

此外，我将您问题的第三部分解释为：如何注意到未能将这些模型分开。

这是两个非常不同的概念，总是很难将它们分开。但是，有一些常见的模式和工具可用于此目的。

## 关于领域模型

您需要认识到的第一件事是您的域模型并不是真正的数据；它是关于诸如“激活该用户”、“停用该用户”、“当前激活了哪些用户？”和“该用户的名字是什么？”之类的*操作*和*问题。*用经典术语来说：它是关于*查询*和*命令*的。

## 在命令中思考

让我们从查看示例中的命令开始：“激活此用户”和“停用此用户”。命令的好处是它们可以很容易地用小的给定时间场景来表达：

> **给定**一个非活动用户
> **，当**管理员激活该用户
> **时**，该用户变为活动状态
> **，**并向该用户发送一封确认电子邮件，
> **并将**一个条目添加到系统日志中
> （等等）

这样的场景有助于查看单个命令如何影响基础设施的不同部分——在这种情况下，您的数据库（某种“活动”标志）、邮件服务器、系统日志等。

这样的场景也确实可以帮助您设置测试驱动的开发环境。

最后，在命令中思考确实可以帮助您创建面向任务的应用程序。您的用户会欣赏这一点 :-)

## 表达命令

Django 提供了两种简单的命令表达方式；它们都是有效的选择，混合使用这两种方法并不罕见。

### 服务层

@Hedde已经[描述了](https://stackoverflow.com/a/12579490/383793)*服务模块*。在这里，您定义了一个单独的模块，每个命令都表示为一个函数。

**服务.py**

```
def activate_user(user_id):
    user = User.objects.get(pk=user_id)

    # set active flag
    user.active = True
    user.save()

    # mail user
    send_mail(...)

    # etc etc 
```

### 使用表格

另一种方法是为每个命令使用 Django 表单。我更喜欢这种方法，因为它结合了多个密切相关的方面：

*   命令的执行（它做了什么？）
*   验证命令参数（可以这样做吗？）
*   命令的介绍（我该怎么做？）

**表格.py**

```
class ActivateUserForm(forms.Form):

    user_id = IntegerField(widget = UsernameSelectWidget, verbose_name="Select a user to activate")
    # the username select widget is not a standard Django widget, I just made it up

    def clean_user_id(self):
        user_id = self.cleaned_data['user_id']
        if User.objects.get(pk=user_id).active:
            raise ValidationError("This user cannot be activated")
        # you can also check authorizations etc. 
        return user_id

    def execute(self):
        """
        This is not a standard method in the forms API; it is intended to replace the 
        'extract-data-from-form-in-view-and-do-stuff' pattern by a more testable pattern. 
        """
        user_id = self.cleaned_data['user_id']

        user = User.objects.get(pk=user_id)

        # set active flag
        user.active = True
        user.save()

        # mail user
        send_mail(...)

        # etc etc 
```

## 在查询中思考

您的示例不包含任何查询，因此我冒昧地提出了一些有用的查询。我更喜欢使用术语“问题”，但查询是经典术语。有趣的查询是：“这个用户的名字是什么？”、“这个用户可以登录吗？”、“给我显示停用用户的列表”和“停用用户的地理分布是什么？”

在开始回答这些问题之前，您应该始终问自己这个问题，是这样的：

*   仅针对我的模板的*表示查询，和/或*
*   与执行我的命令相关的*业务逻辑查询，和/或*
*   报告*查询*。

呈现性查询仅用于改进用户界面。业务逻辑查询的答案直接影响命令的执行。报告查询仅用于分析目的，并且具有较宽松的时间限制。这些类别并不相互排斥。

另一个问题是：“我可以完全控制答案吗？” 例如，当查询用户名时（在此上下文中），我们无法控制结果，因为我们依赖于外部 API。

## 查询

Django 中最基本的查询是使用 Manager 对象：

```
User.objects.filter(active=True) 
```

当然，这仅在数据实际表示在您的数据模型中时才有效。这并非总是如此。在这些情况下，您可以考虑以下选项。

### 自定义标签和过滤器

第一个替代方案对于仅是展示性的查询很有用：自定义标签和模板过滤器。

**模板.html**

```
<h1>Welcome, {{ user|friendly_name }}</h1> 
```

**模板标签.py**

```
@register.filter
def friendly_name(user):
    return remote_api.get_cached_name(user.id) 
```

### 查询方法

如果您的查询不仅仅是展示性的，您可以将查询添加到您的**services.py**（如果您正在使用它），或者引入一个**queries.py**模块：

**查询.py**

```
def inactive_users():
    return User.objects.filter(active=False)

def users_called_publysher():
    for user in User.objects.all():
        if remote_api.get_cached_name(user.id) == "publysher":
            yield user 
```

### 代理模型

代理模型在业务逻辑和报告的上下文中非常有用。您基本上定义了模型的增强子集。您可以通过覆盖[`Manager.get_queryset()`](https://docs.djangoproject.com/en/2.0/topics/db/managers/#modifying-a-manager-s-initial-queryset)方法来覆盖 Manager 的基本 QuerySet。

**模型.py**

```
class InactiveUserManager(models.Manager):
    def get_queryset(self):
        query_set = super(InactiveUserManager, self).get_queryset()
        return query_set.filter(active=False)

class InactiveUser(User):
    """
    >>> for user in InactiveUser.objects.all():
    …        assert user.active is False 
    """

    objects = InactiveUserManager()
    class Meta:
        proxy = True 
```

### 查询模型

对于本质上复杂但经常执行的查询，可以使用查询模型。查询模型是一种非规范化形式，其中单个查询的相关数据存储在单独的模型中。诀窍当然是使非规范化模型与主模型保持同步。只有当更改完全在您的控制之下时，才能使用查询模型。

**模型.py**

```
class InactiveUserDistribution(models.Model):
    country = CharField(max_length=200)
    inactive_user_count = IntegerField(default=0) 
```

第一个选项是在您的命令中更新这些模型。如果这些模型仅由一两个命令更改，这将非常有用。

**表格.py**

```
class ActivateUserForm(forms.Form):
    # see above

    def execute(self):
        # see above
        query_model = InactiveUserDistribution.objects.get_or_create(country=user.country)
        query_model.inactive_user_count -= 1
        query_model.save() 
```

更好的选择是使用自定义信号。这些信号当然是由您的命令发出的。信号的优势在于您可以使多个查询模型与原始模型保持同步。此外，可以使用 Celery 或类似框架将信号处理卸载到后台任务。

**信号.py**

```
user_activated = Signal(providing_args = ['user'])
user_deactivated = Signal(providing_args = ['user']) 
```

**表格.py**

```
class ActivateUserForm(forms.Form):
    # see above

    def execute(self):
        # see above
        user_activated.send_robust(sender=self, user=user) 
```

**模型.py**

```
class InactiveUserDistribution(models.Model):
    # see above

@receiver(user_activated)
def on_user_activated(sender, **kwargs):
        user = kwargs['user']
        query_model = InactiveUserDistribution.objects.get_or_create(country=user.country)
        query_model.inactive_user_count -= 1
        query_model.save() 
```

## 保持清洁

使用这种方法时，很容易确定您的代码是否保持干净。只需遵循以下准则：

*   我的模型是否包含不仅仅管理数据库状态的方法？您应该提取一个命令。
*   我的模型是否包含不映射到数据库字段的属性？您应该提取一个查询。
*   我的模型是否引用了不是我的数据库的基础架构（例如邮件）？您应该提取一个命令。

视图也是如此（因为视图经常遇到同样的问题）。

*   我的视图是否主动管理数据库模型？您应该提取一个命令。

## 一些参考资料

[Django 文档：代理模型](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)

[Django 文档：信号](https://docs.djangoproject.com/en/dev/topics/signals/)

[架构：领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2012-09-25T08:58:21.457

我通常在视图和模型之间实现一个服务层。这就像您的项目的 API 一样，可以让您从直升机上清楚地了解正在发生的事情。我从我的一位同事那里继承了这种做法，他在 Java 项目 (JSF) 中经常使用这种分层技术，例如：

**模型.py**

```
class Book:
   author = models.ForeignKey(User)
   title = models.CharField(max_length=125)

   class Meta:
       app_label = "library" 
```

**服务.py**

```
from library.models import Book

def get_books(limit=None, **filters):
    """ simple service function for retrieving books can be widely extended """
    return Book.objects.filter(**filters)[:limit]  # list[:None] will return the entire list 
```

**视图.py**

```
from library.services import get_books

class BookListView(ListView):
    """ simple view, e.g. implement a _build and _apply filters function """
    queryset = get_books() 
```

> 请注意，我通常将模型、视图和服务带到模块级别，并根据项目的大小进一步分离

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2012-10-12T07:16:31.913

首先，[不要重复自己](https://docs.djangoproject.com/en/dev/misc/design-philosophies/)。

然后，请注意不要过度设计，有时这只是浪费时间，并使某人失去对重要事物的关注。不时复习[python之禅。](http://www.python.org/dev/peps/pep-0020/)

**看看活跃的项目**

*   更多人 = 更多需要妥善组织
*   [django 存储库](https://github.com/django/django)它们具有简单的结构。
*   [pip 存储库](https://github.com/pypa/pip)它们有一个简单的目录结构。
*   [织物存储库](https://github.com/fabric/fabric)也是一个不错的选择。

    *   您可以将所有模型放在`yourapp/models/logicalgroup.py`
*   eg `User`,`Group`相关模型可以下`yourapp/models/users.py`
*   例如`Poll`, `Question`, `Answer`... 可能会低于`yourapp/models/polls.py`
*   `__all__`在里面加载你需要的东西`yourapp/models/__init__.py`

[**更多关于 MVC**](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

*   模型是你的数据
    *   这包括您的实际数据
    *   这还包括您的会话/cookie/缓存/fs/索引数据
*   用户与控制器交互以操作模型
    *   这可能是一个 API，或者是一个保存/更新数据的视图
    *   这可以用`request.GET`/ `request.POST`...等进行调整
    *   也考虑**分页**或**过滤**。
*   数据更新视图
    *   模板获取数据并相应地格式化
    *   甚至没有模板的 API 也是视图的一部分；例如`tastypie`或`piston`
    *   这也应该考虑到中间件。

**利用[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/)/[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)**

*   如果您需要为每个请求完成一些工作，中间件是一种方法。
    *   例如添加时间戳
    *   例如更新有关页面点击量的指标
    *   例如填充缓存
*   如果您有总是重复出现用于格式化对象的代码片段，那么模板标签很好。
    *   例如活动标签/网址面包屑

**利用[模型管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)**

*   创建`User`可以进入`UserManager(models.Manager)`.
*   实例的血腥细节应该继续`models.Model`。
*   血淋淋的细节`queryset`可以进入`models.Manager`。
*   您可能想一次创建一个`User`，因此您可能认为它应该存在于模型本身上，但是在创建对象时，您可能没有所有详细信息：

例子：

```
class UserManager(models.Manager):
   def create_user(self, username, ...):
      # plain create
   def create_superuser(self, username, ...):
      # may set is_superuser field.
   def activate(self, username):
      # may use save() and send_mail()
   def activate_in_bulk(self, queryset):
      # may use queryset.update() instead of save()
      # may use send_mass_mail() instead of send_mail() 
```

**尽可能使用表格**

如果您有映射到模型的表单，则可以消除许多样板代码。[`ModelForm documentation`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)是相当不错的。如果您有很多自定义项（或者有时避免循环导入错误以用于更高级的用途），则将表单代码与模型代码分开可能会很好。

**尽可能使用[管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)**

*   例如`yourapp/management/commands/createsuperuser.py`
*   例如`yourapp/management/commands/activateinbulk.py`

**如果你有业务逻辑，你可以把它分开**

*   `django.contrib.auth` [使用 backends](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/)，就像 db 有一个后端...等等。
*   为您的业务逻辑添加一个`setting`（例如`AUTHENTICATION_BACKENDS`）
*   你可以使用`django.contrib.auth.backends.RemoteUserBackend`
*   你可以使用`yourapp.backends.remote_api.RemoteUserBackend`
*   你可以使用`yourapp.backends.memcached.RemoteUserBackend`
*   将困难的业务逻辑委托给后端
*   确保在输入/输出上设置正确的期望。
*   更改业务逻辑就像更改设置一样简单 :)

后端示例：

```
class User(db.Models):
    def get_present_name(self): 
        # property became not deterministic in terms of database
        # data is taken from another service by api
        return remote_api.request_user_name(self.uid) or 'Anonymous' 
```

可能变成：

```
class User(db.Models):
   def get_present_name(self):
      for backend in get_backends():
         try:
            return backend.get_present_name(self)
         except: # make pylint happy.
            pass
      return None 
```

**更多关于设计模式**

*   已经有一个关于[设计模式的好问题](https://stackoverflow.com/questions/606448/python-design-patterns)
*   [一个关于实用设计模式](http://blip.tv/oreilly-promos/practical-python-patterns-3965008)的非常好的视频
*   django 的后端明显使用了委托设计模式。

**更多关于接口边界**

*   您要使用的代码真的是模型的一部分吗？->`yourapp.models`
*   代码是业务逻辑的一部分吗？->`yourapp.vendor`
*   代码是通用工具/库的一部分吗？->`yourapp.libs`
*   代码是业务逻辑库的一部分吗？->`yourapp.libs.vendor`或`yourapp.vendor.libs`
*   这是一个很好的选择：你能独立测试你的代码吗？
    *   对很好 ：）
    *   不，你可能有接口问题
    *   当有明确的分离时，单元测试应该[使用模拟变得轻而易举](http://www.voidspace.org.uk/python/mock/)
*   分离合乎逻辑吗？
    *   对很好 ：）
    *   不，您可能无法单独测试这些逻辑概念。
*   你认为当你得到 10 倍的代码时你需要重构吗？
    *   是的，不好，不行，重构可能需要做很多工作
    *   不，这太棒了！

**简而言之，你可以有**

*   `yourapp/core/backends.py`
*   `yourapp/core/models/__init__.py`
*   `yourapp/core/models/users.py`
*   `yourapp/core/models/questions.py`
*   `yourapp/core/backends.py`
*   `yourapp/core/forms.py`
*   `yourapp/core/handlers.py`
*   `yourapp/core/management/commands/__init__.py`
*   `yourapp/core/management/commands/closepolls.py`
*   `yourapp/core/management/commands/removeduplicates.py`
*   `yourapp/core/middleware.py`
*   `yourapp/core/signals.py`
*   `yourapp/core/templatetags/__init__.py`
*   `yourapp/core/templatetags/polls_extras.py`
*   `yourapp/core/views/__init__.py`
*   `yourapp/core/views/users.py`
*   `yourapp/core/views/questions.py`
*   `yourapp/core/signals.py`
*   `yourapp/lib/utils.py`
*   `yourapp/lib/textanalysis.py`
*   `yourapp/lib/ratings.py`
*   `yourapp/vendor/backends.py`
*   `yourapp/vendor/morebusinesslogic.py`
*   `yourapp/vendor/handlers.py`
*   `yourapp/vendor/middleware.py`
*   `yourapp/vendor/signals.py`
*   `yourapp/tests/test_polls.py`
*   `yourapp/tests/test_questions.py`
*   `yourapp/tests/test_duplicates.py`
*   `yourapp/tests/test_ratings.py`

或任何其他对您有帮助的东西；找到**您需要的接口**和**边界**将对您有所帮助。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-09-25T14:40:12.050

Django 使用了一种稍微修改过的 MVC。Django 中没有“控制器”的概念。最接近的代理是“视图”，这往往会导致与 MVC 转换混淆，因为在 MVC 中，视图更像 Django 的“模板”。

在 Django 中，“模型”不仅仅是一个数据库抽象。在某些方面，它与 Django 的“视图”作为 MVC 的控制器共享职责。它包含与实例相关联的全部行为。如果该实例需要与外部 API 交互作为其行为的一部分，那么这仍然是模型代码。事实上，模型根本不需要与数据库交互，因此您可以想象模型完全作为外部 API 的交互层存在。这是一个更自由的“模型”概念。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-10-16T16:02:22.947

在 Django 中，MVC 结构正如 Chris Pratt 所说，与其他框架中使用的经典 MVC 模型不同，我认为这样做的主要原因是避免过于严格的应用程序结构，就像在其他 MVC 框架如 CakePHP 中发生的那样。

在 Django 中，MVC 的实现方式如下：

视图层一分为二。视图应该只用于管理 HTTP 请求，它们被调用并响应它们。视图与应用程序的其余部分（表单、模型表单、自定义类，在简单情况下直接与模型）进行通信。为了创建界面，我们使用模板。模板对 Django 来说是类似字符串的，它将一个上下文映射到它们中，并且这个上下文由应用程序传递给视图（当视图询问时）。

模型层提供封装、抽象、验证、智能并使您的数据面向对象（他们说有一天 DBMS 也会这样做）。这并不意味着你应该制作巨大的models.py文件（事实上，一个很好的建议是将你的模型分成不同的文件，将它们放入一个名为'models'的文件夹中，在其中创建一个'__init__.py'文件导入所有模型并最终使用 models.Model 类的属性“app_label”的文件夹）。模型应该将您从对数据的操作中抽象出来，它将使您的应用程序更简单。如果需要，您还应该为模型创建外部类，例如“工具”。您还可以在模型中使用遗产，将模型的 Meta 类的“抽象”属性设置为“真”。

剩下的在哪里？好吧，小型 Web 应用程序通常是一种数据接口，在某些小型程序情况下，使用视图来查询或插入数据就足够了。更常见的情况将使用 Forms 或 ModelForms，它们实际上是“控制器”。这只不过是一个常见问题的实用解决方案，而且是一个非常快速的解决方案。这是一个网站用来做的事情。

如果 Forms 不适合您，那么您应该创建自己的类来发挥作用，管理应用程序就是一个很好的例子：您可以阅读 ModelAmin 代码，这实际上是一个控制器。没有标准结构，我建议您检查现有的 Django 应用程序，这取决于每种情况。这就是 Django 开发人员的意图，您可以添加 xml 解析器类、API 连接器类、添加 Celery 用于执行任务、扭曲用于基于反应器的应用程序、仅使用 ORM、创建 Web 服务、修改管理应用程序等等。 .. 编写高质量的代码、是否尊重 MVC 哲学、使其基于模块并创建自己的抽象层是您的责任。它非常灵活。

我的建议：尽可能多地阅读代码，周围有很多 django 应用程序，但不要那么认真。每个案例都是不同的，模式和理论都有帮助，但并非总是如此，这是一个不精确的科学，django 只是为您提供了可以用来缓解一些痛苦的好工具（如管理界面、Web 表单验证、i18n、观察者模式实现等）前面提到的和其他的），但好的设计来自经验丰富的设计师。

PS.：使用身份验证应用程序（来自标准 django）中的“用户”类，您可以制作例如用户配置文件，或者至少阅读其代码，这对您的情况很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-27T08:00:23.987

一个老问题，但无论如何我想提供我的解决方案。它基于接受模型对象也需要一些额外的功能，而将其放置在*models.py*中很尴尬。繁重的业务逻辑可能会根据个人喜好单独编写，但我至少喜欢模型做与自己相关的所有事情。该解决方案还支持那些喜欢将所有逻辑放置在模型中的人。

因此，我设计**了一个 hack**，允许我将逻辑与模型定义分开，并且仍然从我的 IDE 中获得所有提示。

优点应该是显而易见的，但这列出了我观察到的一些：

*   数据库定义仍然如此 - 没有附加逻辑“垃圾”
*   与模型相关的逻辑都整齐地放在一个地方
*   所有服务（表单、REST、视图）都有一个逻辑访问点
*   **最重要的是：一旦我意识到我的***models.py*变得太杂乱并且不得不将逻辑分离出来，我就不必重写任何代码。分离是平滑和迭代的：我可以一次执行一个函数，或者整个类或整个models.py。

我一直在使用 Python 3.4 及更高版本以及 Django 1.8 及更高版本。

应用程序/模型.py

```
....
from app.logic.user import UserLogic

class User(models.Model, UserLogic):
    field1 = models.AnyField(....)
    ... field definitions ... 
```

应用程序/逻辑/user.py

```
if False:
    # This allows the IDE to know about the User model and its member fields
    from main.models import User

class UserLogic(object):
    def logic_function(self: 'User'):
        ... code with hinting working normally ... 
```

我唯一想不通的是如何让我的 IDE（在本例中为 PyCharm）识别 UserLogic 实际上是用户模型。但由于这显然是一个 hack，我很乐意接受总是为`self`参数指定类型的小麻烦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-21T21:40:50.330

我不得不同意你的看法。django 有很多可能性，但最好的起点是回顾[Django 的设计理念](https://docs.djangoproject.com/en/2.1/misc/design-philosophies/#design-philosophies)。

1.  从模型属性调用 API 并不理想，在视图中执行类似的操作似乎更有意义，并可能创建一个服务层来保持干燥。如果对 API 的调用是非阻塞的并且调用成本很高，那么将请求发送给服务工作者（从队列中消费的工作者）可能是有意义的。

2.  根据 Django 的设计理念，模型封装了“对象”的各个方面。因此，与该对象相关的所有业务逻辑都应该存在于那里：

> **包括所有相关的领域逻辑**
> 
> 模型应该按照 Martin Fowler 的 Active Record 设计模式封装“对象”的各个方面。

3.  您描述的副作用很明显，这里的逻辑可以更好地分解为查询集和管理器。这是一个例子：

    **模型.py**

    ```
    import datetime

    from djongo import models
    from django.db.models.query import QuerySet
    from django.contrib import admin
    from django.db import transaction

    class MyUser(models.Model):

        present_name = models.TextField(null=False, blank=True)
        status = models.TextField(null=False, blank=True)
        last_active = models.DateTimeField(auto_now=True, editable=False)

        # As mentioned you could put this in a template tag to pull it
        # from cache there. Depending on how it is used, it could be
        # retrieved from within the admin view or from a custom view
        # if that is the only place you will use it.
        #def get_present_name(self):
        #    # property became non-deterministic in terms of database
        #    # data is taken from another service by api
        #    return remote_api.request_user_name(self.uid) or 'Anonymous'

        # Moved to admin as an action
        # def activate(self):
        #     # method now has a side effect (send message to user)
        #     self.status = 'activated'
        #     self.save()
        #     # send email via email service
        #     #send_mail('Your account is activated!', '…', [self.email])

        class Meta:
            ordering = ['-id']  # Needed for DRF pagination

        def __unicode__(self):
            return '{}'.format(self.pk)

    class MyUserRegistrationQuerySet(QuerySet):

        def for_inactive_users(self):
            new_date = datetime.datetime.now() - datetime.timedelta(days=3*365)  # 3 Years ago
            return self.filter(last_active__lte=new_date.year)

        def by_user_id(self, user_ids):
            return self.filter(id__in=user_ids)

    class MyUserRegistrationManager(models.Manager):

        def get_query_set(self):
            return MyUserRegistrationQuerySet(self.model, using=self._db)

        def with_no_activity(self):
            return self.get_query_set().for_inactive_users() 
    ```

    **管理员.py**

    ```
    # Then in model admin

    class MyUserRegistrationAdmin(admin.ModelAdmin):
        actions = (
            'send_welcome_emails',
        )

        def send_activate_emails(self, request, queryset):
            rows_affected = 0
            for obj in queryset:
                with transaction.commit_on_success():
                    # send_email('welcome_email', request, obj) # send email via email service
                    obj.status = 'activated'
                    obj.save()
                    rows_affected += 1

            self.message_user(request, 'sent %d' % rows_affected)

    admin.site.register(MyUser, MyUserRegistrationAdmin) 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-16T21:07:10.133

我大多同意选择的答案（[https://stackoverflow.com/a/12857584/871392](https://stackoverflow.com/a/12857584/871392)），但想在“查询”部分添加选项。

可以为模型定义 QuerySet 类以进行过滤查询等。之后，您可以为模型的管理器代理此查询集类，就像内置的 Manager 和 QuerySet 类一样。

虽然，如果您必须查询多个数据模型来获得一个域模型，我认为将它放在单独的模块中似乎更合理，就像之前建议的那样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-02T11:57:45.150

关于利弊的不同选项的最全面的文章：

1.  想法#1：胖模特
2.  想法#2：将业务逻辑放入视图/表单中
3.  理念#3：服务
4.  想法#4：查询集/管理器
5.  结论

来源： [https ://sunscrapers.com/blog/where-to-put-business-logic-django/](https://sunscrapers.com/blog/where-to-put-business-logic-django/)

* * *

## 回答 #10

> 赞同：-8
> 
> 时间：2012-09-25T09:40:37.920

Django 旨在轻松用于交付网页。如果您对此不满意，也许您应该使用其他解决方案。

我正在模型上编写根操作或通用操作（以具有相同的界面）以及模型控制器上的其他操作。如果我需要其他模型的操作，我会导入它的控制器。

这种方法对我和我的应用程序的复杂性来说已经足够了。

Hedde 的回应是一个例子，展示了 django 和 python 本身的灵活性。

无论如何，非常有趣的问题！

# .net - 使用单个任务执行多项工作

> ID：12578909
> 
> 赞同：0
> 
> 时间：2012-09-25T08:23:07.277
> 
> 标签：.net, multithreading, task-parallel-library, thread-priority

我想将多个工作项安排到一个任务，即一个任务应该一个接一个地执行一个任务。我知道 .continuewith() 任务的功能。我的问题有两个部分：

第一个问题是我还想为该任务安排优先级，我正在使用 romkyn 在[这篇文章](https://stackoverflow.com/questions/3836584/lowering-priority-of-task-factory-startnew-thread)中建议的调度程序。

有什么方法可以让同一个任务在同一优先级下执行多项工作？

我正在生成超过 100 个任务，并以随机分配的优先级来安排它们，即最低、高于正常水平……最高。

在生成和执行阶段，如果生成了具有更高优先级的任务并且无法等待，我应该如何（a）知道和（b）取消正在使用 taskcancellationtoken 执行的任务？

现在，我使用一个简单的 for 循环和 taskfactory 来生成任务。

```
Task t = Task.Factory.StartNew(() =>
{
         //perform work1 here
 }, ct, TaskCreationOptions.None, PriorityScheduler.Lowest); 
```

# knockout.js - KnockOut JS，DOM 不反映到 observableArray

> ID：12578910
> 
> 赞同：1
> 
> 时间：2012-09-25T08:23:08.517
> 
> 标签：knockout.js

请参阅[此代码（原始版本）](http://jsfiddle.net/SimonYong/j8K29/2/)。

当我在我添加的选择文本框中输入某些内容时，我无法获得我的值更新。

它在我将一个对象推入 observableArray 后工作。[见这里（修改版）。](http://jsfiddle.net/SimonYong/j8K29/3/)

但我认为应该有一个解决方案让我直接使用像 Origin Version 这样的 observableArray，而不是像 Modified Version 这样将对象推送到数组。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:40:40.687

解决[foreach](https://github.com/SteveSanderson/knockout/issues/482)问题的黑客方法：http: [//jsfiddle.net/j8K29/7/](http://jsfiddle.net/j8K29/7/)

`ko.observable(ko.observable(""))`外部可观察对象被解包，`foreach`内部可观察对象仍然存在。

我还更改了您的`removeChoice`功能以反映此更改。

# graph - 图表列表，查找每个图表的图表大小和节点

> ID：12578913
> 
> 赞同：0
> 
> 时间：2012-09-25T08:23:27.257
> 
> 标签：graph, size, components

当给定顶点列表和边列表时，我们如何找到每个无向图的大小和节点？

边列表可以由许多可能的连通图组成，而不仅仅是一个。

例子：

顶点：

```
1,
2,
3,
4,
5 
```

边缘：

```
1 2,
1 3,
4 5 
```

结果是：

```
Size: 3 Vertices: 1, 2, 3
Size: 2 Vertices: 4, 5 
```

我几乎可以肯定这是一个非常普遍的问题，但它的名字已经让我忘记了。

# php - 如果构造仅显示其他值 - PHP

> ID：12578920
> 
> 赞同：1
> 
> 时间：2012-09-25T08:23:52.530
> 
> 标签：php

这是我的声明：

```
if($row_x['xfield']==$_POST['x1'] AND $row_x['yfield']==$_POST['y'])
{
   echo "ok";
}
else {
   echo "invalid";
} 
```

当两者不相等时，它必须显示'invalid' else，'ok'。但在这种情况下，无论它是否有效，它都会显示“无效”。

为什么有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:28:57.233

你说'当两者不相等'......暗示你想在比较中使用'！='而不是'=='。有关 &&，请参阅此 T/F 图表：

```
--------------
| X | && | Y |
--------------
| F | F  | F |
--------------
| F | F  | T |
--------------
| T | F  | F |
--------------
| T | T  | T |
-------------- 
```

X 语句必须为真且 Y 语句必须为真。在你的例子中

```
$row_x['xfield']==$_POST['x1'] 
```

必须是 TRUE 以及

```
$row_x['yfield']==$_POST['y'] 
```

但是，如果我阅读了您的问题，您将希望将两个语句都设为 FALSE 以显示“无效”。因此，您需要在每个语句中将 '==' 替换为 '!='。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:31:56.057

这是因为其中任何一个都不是真的或两者兼而有之

你正在使用 &&/AND 所以两者都必须匹配，因为你得到了 else 结果，这意味着它们中的任何一个都不相等或两者都不相等

您可以通过以下方法检查

```
if($row_x['xfield']==$_POST['x1']){
   echo ' xfiekd  is = to x1';
   if($row_x['yfield']==$_POST['y']){
     echo ' yfiekd  is = to y and aslo 1 is true';
   }else{ echo 'y is false' }

}
else{
   echo ' xfiekd  is = to x1' is false;
   if($row_x['yfield']==$_POST['y']){
     echo ' yfiekd  is = to y and aslo 1 is true';
   }else{ echo 'y is false' }

} 
```

如果函数体在至少一个条件为真时进入，您需要使用`||`而不是 AND

与 OR 之间的差异

AND的真值表

```
 a    b

true  true   = true
true  false  = false
false  false = false
false  true  = false 
```

OR的真值表

```
 a    b

true  true   = true
true  false  = true
false true   = true
false false  = true
true  false  = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:32:17.460

替换`AND`为`OR`，它会`ok`在至少一个相等时显示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:35:15.127

```
if($row_x['xfield']==$_POST['x1'] OR $row_x['yfield']==$_POST['y'])
{
   echo "ok";
}
else {
   echo "invalid";
} 
```

选择

```
if($row_x['xfield']!=$_POST['x1'] AND $row_x['yfield']!=$_POST['y'])
{
   echo "ok";
}
else {
   echo "invalid";
} 
```

# provisioning - Apache ACE - Simple folder based deployment / provisioning?

> ID：12578923
> 
> 赞同：1
> 
> 时间：2012-09-25T08:24:04.260
> 
> 标签：provisioning, apache-ace

I have many bundles (let's say hundreds) and it is quite difficult to specify relation between bundles+features-distrubutions in UI. Image, at first I define all relations between bundles, features and distribution. Than I want to update some bundles... it is almost impossible to find them in current implementation of UI. They are not groupped and one list of all bundles without any search bar is really hard to work with.

Is there any support for a file based solution. For example Apache ACE would watch a certain folder containing distribnution's bundles. When ever I make a change there, it would be propagate it to all targets.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:20:15.033

There is currently no file based solution that matches what you describe, however, I think there are still a couple of solutions that might help you:

1.  There are two types of associations between artifacts and features in ACE: static and dynamic ones. The latter can be of help to you, as they always automatically bind to the highest version of a bundle. So, once you've made all your associations, you can simply upload a set of newer bundles and the associations will adapt.
2.  There is also a REST API you can use to programmatically talk to ACE. You can use that to further automate your process.

That said, you have a valid point that it is difficult to keep an overview when there are a lot of artifacts in the first column. I would advise you to watch, or even contribute to the following issues that were all created to improve this situation:

*   [https://issues.apache.org/jira/browse/ACE-319](https://issues.apache.org/jira/browse/ACE-319)
*   [https://issues.apache.org/jira/browse/ACE-320](https://issues.apache.org/jira/browse/ACE-320)
*   [https://issues.apache.org/jira/browse/ACE-321](https://issues.apache.org/jira/browse/ACE-321)

# android - Android 上的奇怪共享偏好

> ID：12578925
> 
> 赞同：0
> 
> 时间：2012-09-25T08:24:19.283
> 
> 标签：android, android-fragments, sharedpreferences

我有 2 `Fragments`。`1st`用于计算，而`2nd`用于设置。

我使用`SharedPreference.Editor.commit()`on`onPause()`方法保存设置。到目前为止，储蓄没有问题。我面临的问题是检索`SharedPreference`我的`1st Fragment`. 每次按下`count`按钮时，我都会检索该值。第一次，我得到的值是更改之前的值（这是我面临的问题），我只会`count`在第二次或更多次检索/按下按钮时获得我保存的值。

我尝试更改设置，然后按下`home`按钮从外部终止应用程序（触发`onPause`方法），当我重新打开设置时，值确实更改为我定义的设置。所以，我确信设置在`onPause`触发时确实保存了。

我想知道这里出了什么问题。非常感谢任何帮助。

根据要求，这是我的保存代码`SettingFragment`：

```
@Override
public void onPause() {
        super.onPause();
        saveToPref();
    }

public void saveToPref() {
        SharedPreferences settings = getActivity().getSharedPreferences("mysettings", 0);
        Editor edit = settings.edit();
        edit.putString("begin", String.valueOf(ibegin)).putString("end", String.valueOf(iend)).commit();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:39:49.797

`SharedPreferences`在其他地方初始化你的对象，然后做一次——也许在`onCreate`. 您没有看到更改的原因是因为在`SharedPreferences`某处打开了不同的实例，具有相同的构造函数，并且这些实例的多个实例不会自动解析/合并。当您使用它时，将 Editor`edit`实例与`settings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:21:24.593

好的，我发现了我的问题。问题是`onPause()`只有当我开始另一个活动时才会触发（我开始了一个活动`onClick`）`Button count`。我更改了我的代码以`saveToPref()`通过覆盖`onPageSelected`我的`ViewPager`和`backPressed`我的`MainActivity`.

# jquery - 类型错误：$.post 不是函数

> ID：12578928
> 
> 赞同：1
> 
> 时间：2012-09-25T08:24:50.953
> 
> 标签：jquery, post, firebug

尝试在 firebug 中使用控制台执行 .post 方法调用时出现上述错误。

我的应用程序是内置在 flash 中的，它根据选择的过滤器进行搜索。我从 firebug 的 net 选项卡中复制了一个 post 调用并对其进行了编辑，以查看不同的调用会返回什么。从带有已编辑字符串的控制台选项卡给出了上述错误。在做 jquery.post 时，它说“未定义 jquery”。

编辑后的字符串“在语法上”是正确的。

任何人都可以通过告诉我如何使用带有自定义字符串的控制台进行后期通话来帮助我。

提前致谢。

编辑：我无权编辑最初编写的代码以获取当前应用程序。我所能做的就是查看它加载的驱动整个应用程序的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:25:51.380

在尝试使用它之前，您一定忘记引用 jquery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
    // here you can use $.post
</script> 
```

# php - 根据数据库中的名称从文件夹中获取图像（php）

> ID：12578933
> 
> 赞同：0
> 
> 时间：2012-09-25T08:25:24.627
> 
> 标签：php, html

我的文件夹中有一些图像。我已将图片的名称存储在数据库的表中。现在我想通过从表中进行选择来显示图片，如下所示：

```
$a=$_GET['nume'];

$c= "select * from angajati where afisare_angajat='".$a."'" ;
    $b = mysql_query($c);

    while($d = mysql_fetch_array($b)){
        echo "<img src='/wp-content/themes/veles/images/angajati/'.$d['afisare_angajat'].'' />";
    } 
```

但这似乎有一个问题：'.$d['afisare_angajat']。' ..如果我输入它显示的图片的名称，但如果我这样离开它，什么都不会显示..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:38:52.813

你应该这样做：

```
<?php
// I do not know what database system and API you are using
$pic_name = QueryPictureNameFromDB();

// Output html code to properly display the image
?>
<img src="<?php echo $pic_name; ?>" /> 
```

结果输出（在 html 中）如下所示：

```
<img src="myPic1234.png" /> 
```

您应该了解 PHP 可以输出任何形式的文本，并且客户端可能会以不同的方式解释该文本。在您的情况下，您正在使用 php 脚本创建 html。该html“文本”是客户端解释和看到的。因此，在您的 php 脚本中，您必须输出 html 来定义用户将看到的内容（本例中的图像）。

您查询图像名称的方式也不合适。在您的查询中，您已经知道您的图像名称是什么。你一定有这样的东西：

```
SELECT * FROM table WHERE id=required_img_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:30:54.923

使用[scandir](http://php.net/manual/en/function.scandir.php) 之类的函数从文件夹中获取文件名，您可能希望过滤它们以避免在数据库中查找其他文件类型。类似于以下内容。

```
/* open database connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "images");

/* check connection */
if (mysqli_connect_errno()) {
   printf("Connect failed: %s\n", mysqli_connect_error());
   exit();
}

/* set the directory for your image files */
$dir    = '/images';
/* get a list of all files in the directory */
$filenames = scandir($dir);

/* go through all filenames in the list */
foreach ($filename in $filenames){
   get_image_name($filename)
};   

/* function that prints the associated data for the given filename */

function get_image_name($filename){
   /* construct query for filename */
   $sql = "SELECT * from table WHERE name_image_from_table = '".$filename."'";
   /* run the query */
   if ($result = mysqli_query($link,$sql)){
       /* if the query went OK check if there was one result */
       if (mysqli_num_rows($result) == 1){
           /* put the result in an associative array with the column names as keys */
           $row = mysqli_fetch_assoc($result)
           /* output the html for displaying the image and its name */
           echo "<img src='".$dir."/".$filename."'/>".$row['ImageNameField']."<br/>";
       } 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:44:39.600

这是一个如何实现此目的的示例。从数据库中获取所有结果，将它们转换为关联数组，然后循环并输出名称。

```
<?php
    $getImagesSql = 'select * from table where name_image_from_table = name_image_from_folder';
    $getImagesQuery = mysql_query($getImagesSql);

    while($getImagesAssoc = mysql_fetch_assoc($getImagesQuery)){
        echo '<img src="/directory/goes/here/'.$getImagesAssoc['imageNameCol'].'" />';
    } 
```

# c - (((long)*(ptr)) << 1) >> 1;

> ID：12578934
> 
> 赞同：2
> 
> 时间：2012-09-25T08:25:29.700
> 
> 标签：c, linux, kernel

我的一个朋友问我这个问题，我不知道这个函数的含义。也许就像他们上面的注释一样`/* sign-extend to 32 bits */`。但我想知道这个函数如何实现角色“符号扩展至32位”的细节。

来自 Linux 内核的函数。谢谢大家。

就像@unwind 所说，函数的完整定义是这样的：

```
/* Convert a prel31 symbol to an absolute address */
#define prel31_to_addr(ptr)                         \
({                                                  \
    /* sign-extend to 32 bits */                    \
    long offset = (((long)*(ptr)) << 1) >> 1;       \
    (unsigned long)(ptr) + offset;                  \
}) 
```

它将在函数中使用：

```
int __init unwind_init(void)
{
    struct unwind_idx *idx;

    /* Convert the symbol addresses to absolute values */
    for (idx = __start_unwind_idx; idx < __stop_unwind_idx; idx++)
        idx->addr = prel31_to_addr(&idx->addr);

    pr_debug("unwind: ARM stack unwinding initialised\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:49:28.373

以这里调用它的地方[为例](http://lxr.free-electrons.com/source/arch/arm/kernel/unwind.c#L360)：

```
else if ((idx->insn & 0x80000000) == 0)
    /* prel31 to the unwind table */
    ctrl.insn = (unsigned long *)prel31_to_addr(&idx->insn); 
```

因此，我们知道`ptr`传入的取消引用对未设置最高（第 31 位）位的某个值。如果与*prel31*名称相关，则表示该值仅使用（低）31 位。

要将有符号的 31 位值转换为有符号的 32 位值，我们需要修复最高位：仍然只有 31个*有效*位，但负值应该设置最高位。设置最高位以匹配现有 31 位值的符号是*符号扩展*。

通过左移一位，丢弃现有的最高位；当我们再次右移时，最高位将被填充以保留符号（因此如果原始 31 位值为负，则它将为 1，否则为零）。

例如。解释为 31 位值 (-1) 时为负数，但`0x7FFFFFFF`解释*为*32 位值 (2,147,483,647) 时为*正数。*要获得与31 位版本*含义*相同的 32 位编码，我们：

*   左移以丢弃未使用的最高位：（`0x7FFFFFFF << 1 => 0xFFFFFFFE`现在是负 32 位值）
*   再次右移以恢复低 31 位中的原始模式，但根据符号填充最高位`0xFFFFFFFE >> 1 => 0xFFFFFFFF = -1`

* * *

请注意，此（符号扩展）行为是特定于平台的，但所有这些代码也是如此。要理解*为什么*这样做是有意义的（而不仅仅是*符号扩展*的含义，以及位模式会发生什么），您需要研究正在使用的寻址方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:48:55.913

我认为这就是它的作用：

`*ptr`包含一个带符号的 31 位值，符号位位于第 30 位（比 MSB 少一个），因此当您将其向左移动时，符号位变为第 31 位（MSB），当您将其移回右侧时，符号位将被“扩展”并显示在第 30 位和第 31 位。

简而言之：它将第 30 位复制到第 31 位。

# ruby - 如果运行 tls_start，EventMachine 是否会在 close_connection 上发出 close_notify？

> ID：12578935
> 
> 赞同：15
> 
> 时间：2012-09-25T08:25:32.853
> 
> 标签：ruby, ssl, eventmachine, ftps

我正在尝试基于 EventMachine 编写一个简单的 FTPS 服务器。

控制插座正常工作。使用数据套接字进行数据传输时，似乎一切正常（TLS 握手成功完成并接收到数据），但随后我收到一条错误消息。这是我在 Filezilla 中得到的：

```
Command:    LIST
Response:   150 Opening ASCII mode data connection for file list
Trace:  CFtpControlSocket::TransferParseResponse()
Trace:    code = 1
Trace:    state = 4
Trace:  CFtpControlSocket::SendNextCommand()
Trace:  CFtpControlSocket::TransferSend()
Trace:    state = 5
Trace:  CTransferSocket::OnConnect
Trace:  CTlsSocket::Handshake()
Trace:  gnutls_session_get_data on primary socket failed: -51
Trace:  CTlsSocket::ContinueHandshake()
Trace:  CTlsSocket::OnSend()
Trace:  CTlsSocket::OnSend()
Trace:  CTlsSocket::OnRead()
Trace:  CTlsSocket::ContinueHandshake()
Trace:  CTlsSocket::OnRead()
Trace:  CTlsSocket::ContinueHandshake()
Trace:  Handshake successful
Trace:  Cipher: AES-256-CBC, MAC: SHA1
Trace:  CTlsSocket::OnRead()
Trace:  CTransferSocket::OnConnect
Trace:  CTransferSocket::OnReceive(), m_transferMode=0
Listing:    -rwxrwxrwx 1 owner  group         1011 Dec 12 23:05 a.tmp
Trace:  CTlsSocket::Failure(-9, 0)
Error:  GnuTLS error -9: A TLS packet with unexpected length was received.
Status: Server did not properly shut down TLS connection
Error:  Could not read from transfer socket: ECONNABORTED - Connection aborted
Trace:  CTransferSocket::TransferEnd(3)
Trace:  CFtpControlSocket::OnReceive()
Response:   226 Closing data connection, sent 70 bytes
Trace:  CFtpControlSocket::TransferParseResponse()
Trace:    code = 2
Trace:    state = 5
Trace:  CFtpControlSocket::SendNextCommand()
Trace:  CFtpControlSocket::TransferSend()
Trace:    state = 8
Trace:  CFtpControlSocket::TransferEnd()
Trace:  CFtpControlSocket::ResetOperation(2)
Trace:  CControlSocket::ResetOperation(2)
Trace:  CFtpControlSocket::ParseSubcommandResult(2)
Trace:  CFtpControlSocket::ListSubcommandResult()
Trace:    state = 3
Trace:  CFtpControlSocket::ResetOperation(2)
Trace:  CControlSocket::ResetOperation(2)
Error:  Failed to retrieve directory listing
Trace:  CFileZillaEnginePrivate::ResetOperation(2) 
```

ftp-ssl 也会发出错误，尽管有些不同

```
--> LIST
150 Opening ASCII mode data connection for file list
===>START SSL connect on DATA
ftp: SSL_connect DATA error 0 - error:00000000:lib(0):func(0):reason(0)
226 Closing data connection, sent 70 bytes
421 Service not available, remote server has closed connection 
```

从我在网上发现的情况来看，我怀疑这种行为是因为 close_notify 在连接结束时没有发出？如果是这样，是否有任何已知的基于 Ruby 的解决方案（例如使用 OpenSSL::SSL::SSLSocket）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T20:28:57.513

答案很简短：不，如果运行 tls_start，EventMachine 不会在 close_connection 上发出 close_notify。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T01:47:57.117

我在阅读证书后发现 SSL '重新打开'一个连接，所以这里的解决方法是：

```
def receive_data bitOfData
if (self.class isSomeSortOfTLSreadingClass && bitOfData.length == 1) then
 @headBuff << bitOfData
 return
 end
 # TLS connection closes on first byte, then re-opens.
end 
```

# html - Firefox中的复选框样式问题

> ID：12578936
> 
> 赞同：2
> 
> 时间：2012-09-25T08:25:33.563
> 
> 标签：html, css

我用 CSS 修复了**复选框**的宽度和高度，它在 IE 浏览器中工作正常，但在 Mozila Firefox 中却不行

请访问此[链接](http://jsfiddle.net/avcreative/uYVVr/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:31:53.380

试试这个CSS：

```
input[type="checkbox"] {
    width:9px;
    height:9px;
    -moz-appearance: none;
} 
```

# mysql - 使用@rownum:=@rownum+1 AS rownum 枚举 SQL 中的每条记录

> ID：12578938
> 
> 赞同：2
> 
> 时间：2012-09-25T08:25:48.997
> 
> 标签：mysql, sql

我在 MySQL 中有这个查询

```
SELECT 
@rownum:=@rownum+1 AS rownum,
notifications_posts.from_user AS source,
notifications_posts.on_post_id AS destination,
notifications_posts.in_group_id,
groups.group_name AS group_name,
notifications_posts.on_post_id AS other_record_id,
user_info.first_name,
user_info.last_name,
user_info.user_id,
notifications_posts.date,
posts.title AS 'title',
user_rights.right AS 'right',
'article' AS notification_type
FROM notifications_posts
INNER
    JOIN user_info
    ON notifications_posts.from_user = user_info.user_id
INNER
    JOIN posts
    ON posts.id = notifications_posts.on_post_id
INNER
    JOIN groups
    ON groups.group_id = notifications_posts.in_group_id
INNER
    JOIN user_rights
    ON user_rights.group_id = notifications_posts.in_group_id AND user_rights.user_id = user_info.user_id 
```

我明白了

![在此处输入图像描述](../Images/cd3959e41dfbbc0b02d55fa9cce3c063.png)

为什么我`NULL`得到`rownum`？

其次，我需要按该 ID 对记录进行分组

```
GROUP BY rownum; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:44:25.867

我认为最好只对结果进行排序（在 MySQL 中），然后在应用程序中添加行号。如果你坚持：

**警告：**任何以这种方式使用变量的查询，都可能在 MySQL 的未来版本中被破坏。

```
SELECT 
    @rownum := @rownum+1 AS rownum,
    notifications_posts.from_user AS source,
    notifications_posts.on_post_id AS destination,
    notifications_posts.in_group_id,
    groups.group_name AS group_name,
    notifications_posts.on_post_id AS other_record_id,
    user_info.first_name,
    user_info.last_name,
    user_info.user_id,
    notifications_posts.date,
    posts.title AS 'title',
    user_rights.right AS 'right',
    'article' AS notification_type
FROM 
    (SELECT @rownum:=0) AS dummy                  -- initial value
CROSS 
    JOIN notifications_posts
INNER
    JOIN user_info
    ON notifications_posts.from_user = user_info.user_id
INNER
    JOIN posts
    ON posts.id = notifications_posts.on_post_id
INNER
    JOIN groups
    ON groups.group_id = notifications_posts.in_group_id
INNER
    JOIN user_rights
    ON user_rights.group_id = notifications_posts.in_group_id 
    AND user_rights.user_id = user_info.user_id 
ORDER BY                                         -- you need 
    whatever ;                                   -- ORDER BY clause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:27:55.437

您必须使用语句 (SELECT rownum:=0) r 初始化变量 @rownum

```
 select  @rownum:=@rownum+1 AS rownum,a.*
     from
     (SELECT 
       notifications_posts.from_user AS source,
       notifications_posts.on_post_id AS destination,
       notifications_posts.in_group_id,
       groups.group_name AS group_name,
       ........
       <remaining query>
       )a,(SELECT @rownum:=0) r 
```

**编辑**：所以你的完整查询应该是

```
SELECT 
@rownum:=@rownum+1 AS rownum,a.*
FROM
(
    SELECT
    notifications_posts.from_user AS source,
    notifications_posts.on_post_id AS destination,
    notifications_posts.in_group_id,
    groups.group_name AS group_name,
    notifications_posts.on_post_id AS other_record_id,
    user_info.first_name,
    user_info.last_name,
    user_info.user_id,
    notifications_posts.date,
    posts.title AS 'title',
    user_rights.right AS 'right',
    'article' AS notification_type
    FROM notifications_posts
    INNER
        JOIN user_info
        ON notifications_posts.from_user = user_info.user_id
    INNER
        JOIN posts
        ON posts.id = notifications_posts.on_post_id
    INNER
        JOIN groups
        ON groups.group_id = notifications_posts.in_group_id
    INNER
        JOIN user_rights
        ON user_rights.group_id = notifications_posts.in_group_id AND user_rights.user_id = user_info.user_id
)a, (SELECT @rownum:=0 )r 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:28:04.223

1.  在运行查询之前将 rownum 设置为 0。
2.  按 rownum 分组不会有任何区别 - 每行的 rownum 都会不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:28:19.773

```
SELECT @rownum:=0;
SELECT 
@rownum:=@rownum+1 AS rownum,
notifications_posts.from_user AS source,
notifications_posts.on_post_id AS destination,
notifications_posts.in_group_id,
groups.group_name AS group_name,
notifications_posts.on_post_id AS other_record_id,
user_info.first_name,
user_info.last_name,
user_info.user_id,
notifications_posts.date,
posts.title AS 'title',
user_rights.right AS 'right',
'article' AS notification_type
FROM notifications_posts
INNER
    JOIN user_info
    ON notifications_posts.from_user = user_info.user_id
INNER
    JOIN posts
    ON posts.id = notifications_posts.on_post_id
INNER
    JOIN groups
    ON groups.group_id = notifications_posts.in_group_id
INNER
    JOIN user_rights
    ON user_rights.group_id = notifications_posts.in_group_id AND user_rights.user_id = user_info.user_id; 
```

# java - 用java监控sql连接信息

> ID：12578939
> 
> 赞同：1
> 
> 时间：2012-09-25T08:25:49.457
> 
> 标签：java, mysql, jdbc, connection, monitoring

更新：我完全按照朋友建议的方式解决了这个问题。但我有点错过了一个事实，即我必须遵循 mysql 的协议才能获得结果。在 mysql 中，总是有一个初始握手包没有任何数据字段，因此您不会使用 getInputStream 获得任何数据。唯一的方法是在您自己的服务器中创建一个 mysql 连接并将结果发送到您的客户端。它工作得很好。谢谢大家

我想用java读取mysql连接信息。例如，我在端口 4444 上使用 java 创建了一个服务器套接字。然后我在端口 4444 上创建了一个 jdbc 连接。但它不起作用。我不知道为什么，甚至我也不知道这是否可能。这是服务器代码：

```
int portNr = 4444;
// Create a ServerSocket object to watch that port for clients
ServerSocket ss;
try {
    ss = new ServerSocket(portNr);

    System.out.println("starting...");

    // Here we loop indefinitely, just waiting for clients to connect
    while (true) {

        // accept() does not return until a client requests a connection
        // Now that a client has arrived, create an instance of our
        // special
        // thread subclass to respond to it.
        Socket clientSocket = null;
        try {
            clientSocket = ss.accept();

            System.err.println("heheh"+clientSocket);
            // PrintWriter out = new
            // PrintWriter(clientSocket.getOutputStream(), true);
            BufferedReader in = new BufferedReader(
                  new InputStreamReader(clientSocket.getInputStream()));
            String inputLine = in.readLine();
            System.err.println(inputLine)....;</i> 
```

它打印“hehehe”；但它不打印输入行。

这是我的连接代码：

```
public class messagetest
{
    // The JDBC Connector Class.
    private static final String dbClassName = "com.mysql.jdbc.Driver";

    private static final String CONNECTION =
                      "jdbc:mysql://127.0.0.1:4444/shadi";

    public static void main(String[] args) throws
                         Exception,SQLException
     {
        System.out.println(dbClassName);

        Class.forName(dbClassName);

        // Properties for user and password. Here the user and password are both 'paulr'
        Properties p = new Properties();
        p.put("user","--------");
        p.put("password","-------");

        System.err.println("after p");
        Connection c = DriverManager.getConnection(CONNECTION,p);

        System.err.println("client:"); 
```

它不打印“客户：”感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:28:12.177

您不能将自己的服务器绑定到与 DB-Server 实例相同的端口上。

如果你真的想像那样“监控”它，请使用一个小“中间人”：将数据库设置到另一个端口，比如 4445。然后在你的监视器中监听 4444，客户端将连接到并建立你自己的连接到4445。然后在两者之间转发输入和输出。

编辑：好的，我们清除了。忘记我回答的第一部分。

您的服务器在 4444 上运行，您的数据库在 3306 上运行。

因此，在您的监视器中，您需要两个连接：一个 Monitor-Client 和一个 Monitor-DB。您必须有两个线程读取每个线程并将其读取的内容写入另一个线程。

而且我不知道您是否会喜欢使用 readLine。为了检查正在发送的内容，我建议阅读字节......

# eclipse - 在 Eclipse 编辑器中集成外部荧光笔工具

> ID：12578941
> 
> 赞同：2
> 
> 时间：2012-09-25T08:25:54.433
> 
> 标签：eclipse, eclipse-plugin

好吧，这可能很容易，但我不知道合适的词来描述它，因此，谷歌它......

我有一个外部脚本，它**采用文件名**并输出：

```
/path/to/file.py:683:80: E501 line too long (85 characters)
/path/to/file.py:690:21: other error message
..etc.. 
```

现在，我知道**这种输出格式已被**其他非常简单的 IDE 广泛接受，例如 EditPlus。我不知道如何将它与 Eclipse 集成。

我希望这个脚本与我的编辑器窗口集成。我希望 Eclipse 在每次保存文件时在后台运行它，然后解析结果并标记脚本输出中出现的所有行。它应该看起来像这样：

![例子](../Images/6d5661c946ce82092b02448f428a04b3.png)

我怎样才能做到这一点？

*注意（对于那些知道我为什么需要它的人）：*我知道 PyDev 集成了一个 pep8.py 检查器，但这还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:26:53.170

好的，所以我自己实现了那个插件。我想我完全按照我的要求做。我使用一些粗鲁的正则表达式使其可配置。

[我在这里](https://github.com/wrygiel/eclipse-external-problem-marker)（GitHub）发布了代码和安装说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:19:17.657

您自己的运行脚本并检查其输出的插件可以从该输出创建标记。请参阅[http://www.eclipse.org/articles/Article-Mark%20My%20Words/mark-my-words.html](http://www.eclipse.org/articles/Article-Mark%20My%20Words/mark-my-words.html)。

# python - tkinter 中的 Gstreamer 网络摄像头视频源

> ID：12578943
> 
> 赞同：0
> 
> 时间：2012-09-25T08:26:00.090
> 
> 标签：python, tkinter, gstreamer

我正在编写一个程序来从网络摄像头获取视频源并将其显示在 Tkinter 窗口中。我编写了以下在 Ubuntu 12.04 上运行的代码。

```
#!/usr/bin/env python

import sys, os, gobject
from Tkinter import *
import pygst
pygst.require("0.10")
import gst

# Goto GUI Class
class Prototype(Frame):
    def __init__(self, parent):
        gobject.threads_init()
        Frame.__init__(self, parent)    

        # Parent Object
        self.parent = parent
        self.parent.title("WebCam")
        self.parent.geometry("640x560+0+0")
        self.parent.resizable(width=FALSE, height=FALSE)

        # Video Box
        self.movie_window = Canvas(self, width=640, height=480, bg="black")
        self.movie_window.pack(side=TOP, expand=YES, fill=BOTH)

        # Buttons Box
        self.ButtonBox = Frame(self, relief=RAISED, borderwidth=1)
        self.ButtonBox.pack(side=BOTTOM, expand=YES, fill=BOTH)

        self.closeButton = Button(self.ButtonBox, text="Close", command=self.quit)
        self.closeButton.pack(side=RIGHT, padx=5, pady=5)

        gotoButton = Button(self.ButtonBox, text="Start", command=self.start_stop)
        gotoButton.pack(side=RIGHT, padx=5, pady=5)

        # Set up the gstreamer pipeline
        self.player = gst.parse_launch ("v4l2src ! video/x-raw-yuv,width=640,height=480 ! ffmpegcolorspace ! xvimagesink")

        bus = self.player.get_bus()
        bus.add_signal_watch()
        bus.enable_sync_message_emission()
        bus.connect("message", self.on_message)
        bus.connect("sync-message::element", self.on_sync_message)

    def start_stop(self):
        if self.gotoButton["text"] == "Start":
            self.gotoButton["text"] = "Stop"
            self.player.set_state(gst.STATE_PLAYING)
        else:
            self.player.set_state(gst.STATE_NULL)
            self.gotoButton["text"] = "Start"

    def on_message(self, bus, message):
        t = message.type
        if t == gst.MESSAGE_EOS:
            self.player.set_state(gst.STATE_NULL)
            self.button.set_label("Start")
        elif t == gst.MESSAGE_ERROR:
            err, debug = message.parse_error()
            print "Error: %s" % err, debug
            self.player.set_state(gst.STATE_NULL)
            self.button.set_label("Start")

    def on_sync_message(self, bus, message):
        if message.structure is None:
            return
        message_name = message.structure.get_name()
        if message_name == "prepare-xwindow-id":
            # Assign the viewport
            imagesink = message.src
            imagesink.set_property("force-aspect-ratio", True)
            imagesink.set_xwindow_id(self.movie_window.window.xid)

def main():
    root = Tk()
    app = Prototype(root)
    app.pack(expand=YES, fill=BOTH)
    root.mainloop()  

if __name__ == '__main__':
     main() 
```

我的问题是程序运行时输出窗口中既没有显示 ButtonBox 也没有显示 VideoBox。我怎样才能解决这个问题？我确实查看了其他站点以寻找可能的解决方案（例如[http://pygstdocs.berlios.de/#projects](http://pygstdocs.berlios.de/#projects)或[Way to play video files in Tkinter?](https://stackoverflow.com/questions/7227162/way-to-play-video-files-in-tkinter)），但是他们对代码含义的信息非常有限。

在进行了建议的更改和其他一些更改以使按钮正常工作后，我意识到在运行程序时显示窗口与主窗口不同。使用 tkinter 时有没有办法让视频显示在主窗口中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:20:38.737

看起来您的原型类是一个 Tkinter 框架，但您似乎没有将它打包/放置在任何地方。

```
...
app = Prototype(root)
app.pack(expand=YES, fill=BOTH)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:58:06.083

我终于想出了这个问题的解决方案。我意识到错误出现在 imagesink.set_xwindow_id(self.movi​​e_window.window.xid) 行中

我改为 imagesink.set_xwindow_id(self.movi​​e_window.winfo_id())

错误是我使用了 window.xid，它是 gtk 小部件的属性。在 tkinter winfo_id() 返回 tkinter 小部件的窗口标识符。欲了解更多信息[http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.winfo_id-method](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.winfo_id-method)

# makefile - Makefile $(eval ...) ：当多个作业同时运行时的行为是什么？

> ID：12578944
> 
> 赞同：0
> 
> 时间：2012-09-25T08:25:59.687
> 
> 标签：makefile, gnu-make, jobs

我定义了以下规则：

```
$(OUTDIR)/%_sorted.bam:
    $(eval SAMPLE:=$(subst _sorted,,$(notdir $(basename $@))))
    (...) do something with $(SAMPLE) 
```

我可以安全地使用它（=它是规则的“局部变量”吗？）

```
make -j (number of jobs) 
```

或者变量 $(SAMPLE) 是否会被规则的每个（同时）调用替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:08:19.177

是的你可以。GNU make 在执行之前扩展了整个配方。作业服务器模式仅影响由 make 产生的子进程的执行，其他一切都是单线程的。

# javascript - 删除 span - 标签并将内容保留在父标签中

> ID：12578945
> 
> 赞同：3
> 
> 时间：2012-09-25T08:26:01.357
> 
> 标签：javascript, tags

我有例如这个：

```
<td "class=name">
    <span class="removed">one</span>
    <span class="added">two</span>
</td> 
```

或这个：

```
<td class=name> one
    <span class="removed">two</span>
    <span class="added">three</span>
</td> 
```

或这个：

```
<div>
    one
    <span class="added">two</span>
    three four 
    <span class="removed">five</span>
    six
</div> 
```

并想用 JavaScript（不带 JQuery）将其更改为：

```
<td "class=name">
    two
</td> 
```

或这个：

```
<td class=name> 
    one
    three
</td> 
```

或这个：

```
<div>
    one
    two
    three
    four
    six
</div> 
```

想不通。只发现了很多jquery的东西，比如replaceWith等，但需要纯javascript

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-04T19:36:51.970

这是最好和最简单的方法，只需要一行代码并使用 jQuery：

```
$('.added').contents().unwrap(); 
```

分解：

*   `$('.added')`= 选择具有类的元素`added`。
*   `.contents()`= 抓取选定元素内的文本。
*   `.unwrap()`= 展开文本，删除`<span>`和`</span>`标记，同时将内容保持在完全相同的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:32:46.530

如果您想要删除的所有跨度标签都有一个已删除或添加的类，并且使用该类测试它们不会影响您的任何其他 html，您可以尝试这个。

```
var spans = document.getElementsByTagName("span");

for(var i=0; i<spans.length;i++)
{
  if(spans[i].className == "added")
  {
     var container = spans[i].parentNode;
     var text = spans[i].innerHTML;
     container.innerHTML += text;
     container.removeChild(spans[i]);
  }
  else if(spans[i].className == "removed")
  {
      var container = spans[i].parentNode;
      container.removeChild(spans[i]);
  }
} 
```

否则，您可能需要通过 ID 或类名找到一种方法来获取 span 标签的容器并执行类似的操作。比如像这样

```
var myDiv = document.getElementById("myDiv");
var spans = myDiv.getElementsByTagName("span");   

for(var i=0; i<spans.length;i++)
{
  if(spans[i].className == "added")
  {
     var text = spans[i].innerHTML;
  }
  myDiv.innerHTML += text;
  myDiv.removeChild(spans[i]);
} 
```

希望这可以帮助

**编辑**

[在这里](http://robertnyman.com/2005/11/07/the-ultimate-getelementsbyclassname/)尝试了解如何使用`getElementsByClassName()`可能简化此代码的函数来实现此代码。`getElementsByTagName()`它返回一个可以迭代的数组。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-25T09:15:05.263

您可以使用以下代码删除任何 html 类：

```
<div id="target_div">one<span class="added">two</span>three four<span class="removed">five</span>six</div>

<script type="text/javascript">
function remove_html_tag(tag,target_div){
        var content=document.getElementById(target_div).innerHTML;
        var foundat=content.indexOf("<"+tag,foundat);
        while (foundat>-1){
            f2=content.indexOf(">",foundat);
            if (f2>-1) {content=content.substr(0,foundat)+content.substr(f2+1,content.length);}
            f2=content.indexOf("</"+tag+">",foundat);
            if (f2>-1){content=content.substr(0,f2)+content.substr(f2+3+tag.length,content.length);}
            foundat=content.indexOf("<"+tag,foundat);
        }document.getElementById(target_div).innerHTML=content;}
</script>

<a href="javascript:remove_html_tag('span','target_div')">Remove span tag</a> 
```

# php - ios In-App Purchase In-App Purchase 交易收据验证

> ID：12578949
> 
> 赞同：0
> 
> 时间：2012-09-25T08:26:07.813
> 
> 标签：php, iphone, web-services

成功购买后，我的应用程序将 transactionReceipt 发送到服务器，以便使用`https://buy.itunes.apple.com/verifyReceipt.`.

现在我执行以下操作。

1.  将密钥存储在数据库中
2.  如果收到的状态为 0 php 脚本，则向用户添加订阅。
3.  使密钥过期。，到目前为止还可以，但他现在的问题是

如果用户以某种方式提交了他用于其他购买的交易收据并发送到我们的服务器。如果发布到我们的服务器，它也验证为真， `https://buy.itunes.apple.com/verifyReceipt`这样他就可以免费获得另一个订阅。 **请帮助解决这个问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:33:44.987

[Apple在此处](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)提供有关此问题的文档。

基本上，verifyReceipt 响应包含一个`receipt`包含原始交易数据的字段。您需要检查此数据是否属于正确的购买，并确保客户没有两次购买。

# java - 游戏可以在netbeans上运行，但不能在jar文件中的netbeans之外运行？

> ID：12578951
> 
> 赞同：1
> 
> 时间：2012-09-24T22:03:57.307
> 
> 标签：java

我正在创建一个基本的“乒乓球”游戏。我已经完成了游戏，除了一些我需要删除的小故障。游戏在 netbeans 中运行完美，但如果我创建一个 jar 文件错误会导致它无法工作。我对java很陌生，但我相信这与我的代码寻找图像有关，但图像尚未加载。这是错误。我怎样才能让它在 jar 文件中的 netbeans 之外工作？

```
C:\Users\michael>java -jar "C:\Users\michael\Documents\NetBeansProjects\Pong\dis
t\Pong.jar"
Exception in thread "main" java.lang.NullPointerException
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at pong.BallMainMenu.<init>(BallMainMenu.java:19)
        at pong.Board.gameInit(Board.java:93)
        at pong.Board.addNotify(Board.java:86)
        at java.awt.Container.addNotify(Unknown Source)
        at javax.swing.JComponent.addNotify(Unknown Source)
        at java.awt.Container.addNotify(Unknown Source)
        at javax.swing.JComponent.addNotify(Unknown Source)
        at java.awt.Container.addNotify(Unknown Source)
        at javax.swing.JComponent.addNotify(Unknown Source)
        at javax.swing.JRootPane.addNotify(Unknown Source)
        at java.awt.Container.addNotify(Unknown Source)
        at java.awt.Window.addNotify(Unknown Source)
        at java.awt.Frame.addNotify(Unknown Source)
        at java.awt.Window.show(Unknown Source)
        at java.awt.Component.show(Unknown Source)
        at java.awt.Component.setVisible(Unknown Source)
        at java.awt.Window.setVisible(Unknown Source)
        at pong.Pong.<init>(Pong.java:16)
        at pong.Pong.main(Pong.java:23) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:35:38.597

我怀疑您正在编写相对于工作目录的文件 url，当您在 NetBeans 中执行它时可能会有所不同（取决于您从控制台运行它时的执行位置）。

例如，当从 netbeans 项目运行时，工作目录很可能是 C:\Users\michael\Documents\NetBeansProjects\Pong，在您的另一个示例中，工作目录的位置只是“C:\Users\michael\”

假设您正在从路径“myimages/test.jpg”加载图像。从 netbeans 运行时，这将变为 "C:\Users\michael\Documents\NetBeansProjects\Pong\myimages\test.jpg" ，在另一个示例中将变为 "C:\Users\michael\myimages\test.jpg" .

尝试使用以下方法来访问资源

```
getClass().getResource("/myimage/test.jpg"); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:50:41.680

您是否已将 Java JDK 和外部库（.jar 文件）添加到系统路径变量中？

当您使用 Netbeans 时，您可以使用此源[如何](http://netbeans.org/kb/docs/java/javase-deploy.html)正确使用 Netbeans 部署 Java 项目。要为 Java 设置系统路径，请查看[此](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)链接。它可能因您的平台而异；即Windows、MacOS等。

# c# - 如何暂停动态代理的拦截器？

> ID：12578953
> 
> 赞同：0
> 
> 时间：2012-09-25T08:26:27.377
> 
> 标签：c#, interceptor, castle-dynamicproxy, proxy-classes

我有一个用于我使用的服务的定时拦截器：

```
class TimingInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {                  
        var watch = new Stopwatch();
        watch.Start();
        try
        {
            invocation.Proceed();
        }
        finally
        {
            watch.Stop();

            PosLogFactory.Default.Verbose(
                 "{0} ms spent on calling {1}"
               , watch.Elapsed.TotalMilliseconds
               , invocation.Method.Name
               );
        }
    } 
```

我使用这个拦截器来获取有关我的服务调用持续时间的日志信息。

我只想在从应用程序的某个部分调用服务时拥有它。当从特定类调用服务时，是否有暂停拦截器日志的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:41:58.953

不，没有内置的方法可以做这样的事情。

# events - javafx - 如何禁用不是从用户触发的事件

> ID：12578957
> 
> 赞同：1
> 
> 时间：2012-09-25T08:26:33.100
> 
> 标签：events, javafx

我对 javafx 有一点问题。我添加了一个这样的更改监听器：

```
private final ChangeListener<String> pageItemSelected = new ChangeListener<String>()
{
@Override
public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue){
    pageGotSelected(newValue);
}
}; 
```

现在问题来了：如果我更改这样的页面项目：

```
 guiPageList.setValue(model.getCurrentTargetPage()); 
```

该事件也被触发（因为它通过用鼠标或键选择某些东西）被触发。有没有办法禁用事件触发或其他方式？我只需要事件，如果用户选择了元素，而不是如果我使用 setValue() 函数更改它......也许会消耗事件，但我不知道这会是什么类型的事件。

提前致谢！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T10:24:50.423

您可以暂时删除侦听器并再次添加它：

```
guiPageList.getSelectionModel().selectedItemProperty().removeListener(pageItemSelected);
guiPageList.setValue(model.getCurrentTargetPage());
guiPageList.getSelectionModel().selectedItemProperty().addListener(pageItemSelected); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T12:38:44.903

或者，您可以使用另一个侦听器实现来装饰侦听器，代码将类似于：

```
class InvalidationListenerEventBlocker implements InvalidationListener {
    InvalidationListener decoratedListener;
    boolean block;
    public void invalidated(Observable observable) {
        if(!block) {
            decoratedListener.invalidated(observable);
        }
    }
} 
```

为块布尔值添加一个设置器，并通过构造函数发送侦听器。将 block 设置为 true 以停止事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-15T15:41:29.897

这是一个非常老的问题，但我找到了一些我个人使用的解决方案，它是可重用的，不需要存储对侦听器的引用（但它需要对暴露/消音属性的引用）。

所以首先是概念：我们将创建 lambda ( `InvalidationListener`)，仅当上述暴露/消音属性设置为 true/false 时才会调用它。为此，我们将定义另一个提供描述行为的功能接口：

```
@FunctionalInterface
private interface ManageableInvalidationListener
extends InvalidationListener {

    public static InvalidationListener exposing(
            BooleanProperty expose,
            ManageableInvalidationListener listener) {
        return ob -> {
            if (expose.get()) {
                listener.invalidate(ob);
            }
        };
    }

    public static InvalidationListener muffling(
            BooleanProperty muffle,
            ManageableInvalidationListener listener) {
        return ob -> {
            if (!muffle.get()) {
                listener.invalidated(ob);
            }
        }
    }

    public abstract void invalidated(Observable ob);
} 
```

这个接口定义了我们将在代码中使用的两个静态方法。我们传递一个转向属性作为第一个参数（它将告诉是否应该调用侦听器）和要执行的实际实现，何时调用它。请注意，无需扩展`InvalidationListener`，但我想`ManageableInvalidationListener`与`InvalidationListener`.

因此，`exposing`如果我们需要创建一个（manageabale）侦听器，如果`expose`属性的值为`true`. 在其他情况下，我们将使用 来创建侦听器`muffling`，如果`true`转向属性意味着，嗯，消音通知。

如何使用它？

```
 //- Let's make life easier and import expose method statically
    import static ManageableInvalidationListener.exposing;

// ...

    //- This is the steering property.
    BooleanProperty notify = new SimpleBooleanProperty(true);

    //- This is our main property with the listener.
    ObjectProperty<Foobar> foobar = new SimpleObjectProperty<>();

    //- Let's say we are going to notify the listener, if the
    //  notify property is set to true.
    foobar.addListener(exposing(notify, ob -> {
        //- Here comes the InvalidListener code.
    })); 
```

然后在代码中的某处：

```
 //- Listener will be notified as usual.
    foobar.set(new Foobar());

    //- Now temporarily disable notifications.
    notify.set(false);
    //- The listener will not get the notification this time.
    foobar.set(new Foobar());
    //- Re-enable notifications.
    notify.set(true); 
```

希望这会有所帮助。您可以随意使用本文中的代码。

# android - 如何在android中使用GPS坐标检索当前位置？

> ID：12578958
> 
> 赞同：0
> 
> 时间：2012-09-25T08:26:36.197
> 
> 标签：android, gps, locationmanager, reverse-geocoding

我已经成功地以编程方式检索了 GPS 坐标，但我想从该坐标中同样跟踪实际位置（即浦那/班格洛尔/孟买），那么这应该怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:33:42.873

你会做反向地理编码：

```
Geocoder geocoder = new Geocoder(mContext, Locale.getDefault()); 
```

这是一个教程 [http://developer.android.com/training/basics/location/geocoding.html](http://developer.android.com/training/basics/location/geocoding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:34:26.033

你是说地址吧？看看： http:
[//mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

在页面底部，您有代码示例:)

# c# - 如何提高 TestApi 的 Keyboard.Type 方法的性能？

> ID：12578959
> 
> 赞同：0
> 
> 时间：2012-09-25T08:26:37.283
> 
> 标签：c#, microsoft-ui-automation

我正在使用[TestApi](http://testapi.codeplex.com/releases/view/60572)`Keyboard.Type`项目中的方法在文本框中输入字符串。

```
 /// <summary>
    /// Types the specified text.
    /// </summary>
    /// <remarks>
    /// Note that a combination of a combination of Key.Shift or Key.Capital and a Unicode point above 0xFE
    /// is not considered valid and will not result in the Unicode point being types without 
    /// applying of the modifier key.
    /// </remarks>
    /// <param name="text">The text to type.</param>
    public static void Type(string text)
    {
        foreach (char c in text)
        {
            // If code point is bigger than 8 bits, we are going for Unicode approach by setting wVk to 0.
            if (c > 0xFE)
            {
                SendKeyboardKey(c, true, false, true);
                SendKeyboardKey(c, false, false, true);
            }
            else
            {
                // We get the vKey value for the character via a Win32 API. We then use bit masks to pull the
                // upper and lower bytes to get the shift state and key information. We then use WPF KeyInterop
                // to go from the vKey key info into a System.Windows.Input.Key data structure. This work is
                // necessary because Key doesn't distinguish between upper and lower case, so we have to wrap
                // the key type inside a shift press/release if necessary.
                int vKeyValue = NativeMethods.VkKeyScan(c);
                bool keyIsShifted = (vKeyValue & NativeMethods.VKeyShiftMask) == NativeMethods.VKeyShiftMask;
                Key key = (Key)(vKeyValue & NativeMethods.VKeyCharMask);

                if (keyIsShifted)
                {
                    Type(key, new Key[] { Key.Shift });
                }
                else
                {
                    Type(key);
                }
            }
        }
    }

    private static void SendKeyboardKey(ushort key, bool isKeyDown, bool isExtended, bool isUnicode)
    {
        var input = new NativeMethods.INPUT();
        input.Type = NativeMethods.INPUT_KEYBOARD;
        if (!isKeyDown)
        {
            input.Data.Keyboard.dwFlags |= NativeMethods.KEYEVENTF_KEYUP;
        }

        if (isUnicode)
        {
            input.Data.Keyboard.dwFlags |= NativeMethods.KEYEVENTF_UNICODE;
            input.Data.Keyboard.wScan = key;
            input.Data.Keyboard.wVk = 0;
        }
        else
        {
            input.Data.Keyboard.wScan = 0;
            input.Data.Keyboard.wVk = key;
        }

        if (isExtended)
        {
            input.Data.Keyboard.dwFlags |= NativeMethods.KEYEVENTF_EXTENDEDKEY;
        }

        input.Data.Keyboard.time = 0;
        input.Data.Keyboard.dwExtraInfo = IntPtr.Zero;

        NativeMethods.SendInput(1, new NativeMethods.INPUT[] { input }, Marshal.SizeOf(input));
        Thread.Sleep(100);
    } 
```

它可以工作，但它输入文本相当慢。我想提高速度。理想情况下，它应该立即设置文本（考虑将文本粘贴到文本字段中）。

有没有一种简单的方法可以在 C# 中实现它（一次将文本字段的文本设置为某个字符串）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:45:18.773

找到了答案：

```
 private void setText(AutomationElement aEditableTextField, string aText)
    {
        ValuePattern pattern = aEditableTextField.GetCurrentPattern(ValuePattern.Pattern) as ValuePattern;

        if (pattern != null)
        {
            pattern.SetValue(aText);
        }
    } 
```

# c# - 如何传入带有泛型类型参数的 func？

> ID：12578965
> 
> 赞同：36
> 
> 时间：2012-09-25T08:26:56.593
> 
> 标签：c#, func

我喜欢将泛型类型转换器函数发送给一个方法，但我不知道该怎么做。

这是解释我想要实现的目标的无效语法，问题是我不知道如何将泛型类型与我的函数一起指定：

```
public void SomeUtility(Func<T><object,T> converter)
{
    var myType = converter<MyType>("foo");
} 
```

编辑（另见我在与劳伦斯的评论中的讨论）：通过“通用类型转换器”，我的意思是我想传递一个可以转换为任何强类型 <T> （不是对象）的转换器，所以我的下一行方法可以是：

```
var myOtherType = converter<MyOtherType>("foo"); 
```

我喜欢作为参数传递的委托看起来像这样：

```
private delegate TOutput myConverterDelegate<TOutput>(object objectToConvert); 
```

现在这更像是一种语法/ C# 探索，为了完成任务，我可能会使用接口来代替，但我确实希望这可以通过 func/delegate 来完成。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T08:31:47.117

您不能拥有泛型函数或操作的实例 - 所有类型参数都是预先定义的，并且不能由调用者重新定义。

一种简单的方法是通过依赖向下转换来完全避免多态性：

```
public void SomeUtility(Func<Type, object, object> converter)
{
    var myType = (MyType)converter(typeof(MyType), "foo");
} 
```

如果你想要类型安全，你需要将类型参数的定义推迟给调用者。您可以通过在接口中编写泛型方法来做到这一点：

```
public void SomeUtility(IConverter converter)
{
    var myType = converter.Convert<MyType>("foo");
}

interface IConverter
{
   T Convert<T>(object obj);
} 
```

**编辑：**

如果在调用站点知道“转换器类型”，并且只有这种类型将在实用方法中使用，那么您可以在该方法上定义一个泛型类型并使用它，就像其他海报所建议的那样。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T08:29:09.680

```
public void SomeUtility<T>(Func<object, T> converter)
{
    var myType = converter("foo");
} 
```

进而：

```
SomeUtility(arg => new MyType()); 
```

在这种情况下，泛型类型推断将起作用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T08:27:55.890

你也需要`SomeUtility`通用。这样做并修复语法给出：

```
public void SomeUtility<T>(Func<object,T> converter)
{
    var myType = converter("foo");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T08:30:31.360

您必须在编译时知道 T 类型才能使用它。T 可以在类级别或方法级别指定。

```
class SomeClass<T> {
    public void SomeUtility(Func<object, T> converter) {
        var myType = converter("foo"); // Already is the T-type that you specified.
    }
} 
```

或者

```
public void SomeUtility<T>(Func<object, T> converter) {
    var myType = converter("foo"); // Already is the T-type that you specified.
} 
```

# css - 使用 CSS3 减少内框阴影

> ID：12578971
> 
> 赞同：5
> 
> 时间：2012-09-25T08:27:24.707
> 
> 标签：css

我想知道是否（以及如何）一些如下图所示的文本阴影是可能的：

![在此处输入图像描述](../Images/981e795ddb3ebb5067f9aa89dbbff396.png)

阴影在几个列表元素上减少。我想根据悬停在哪个元素上为每个元素赋予不同的悬停类，但我什至不确定如何使用 CSS 获得这种减少的阴影。如果有人能够教我如何做到这一点，那就太酷了。如果你愿意，你可以使用我的[jsfiddle](http://jsfiddle.net/0xsven/rbz72/)代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T08:58:02.060

你可以试试这样的

# [演示](http://dabblet.com/gist/3780722)

（单击选项卡将其选中并查看阴影）

并使用`box-shadow`所选选项卡的伪元素获得效果。

应该看起来像这样

![win 7 上的 chrome 21](../Images/33e31994ed9524c7eca0ed7876ed1a42.png)

**HTML**：

```
<ul class='tabs'>
    <li><a href='#' tabindex='1'>1st tab</a></li>
    <!-- as many tabs as you would like -->
    <li><a href='#' tabindex='1'>aaand another tab</a></li>
</ul> 
```

相关**CSS**：

```
.tabs { overflow: hidden; margin-top: 7em; list-style: none; }
.tabs li { float: left; border-right: 1px dotted #222; }
.tabs a {
    display: block;
    position: relative;
    padding: 1em .66em;
    font: .66em/1.1 sans-serif;
    text-transform: uppercase;
    text-decoration: none;
}
.tabs a:focus {
    z-index: 3;
    outline: none;
    box-shadow: 0 -.5em 1.5em black;
    background: lemonchiffon;
}
.tabs a:focus:before, .tabs a:focus:after {
    position: absolute;
    bottom: -1px;
    width: 30em; height: 1px;
    box-shadow: 0 0 20px 1px black;
    content: '';
}
.tabs a:before {
    left: -30.5em;
    transform: rotate(-3deg);
    transform-origin: 100% 100%;
}
.tabs a:after {
    right: -30.5em;
    transform: rotate(3deg);
    transform-origin: 0 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:55:28.313

您可以增加 an`<li>`以使其位于 的整个宽度内`<ul>`，旋转它并给它一个阴影..

HTML：

```
 ...
    </li>
        <li class="shadow">1</li>
    </ul> 
```

CSS：

```
ul
{
    overflow: hidden;
    height: 50px;
}

li.shadow
{
    width: 100%;
    height: 100%;
    position: relative;
    top: 15px;
    box-shadow: 0px 0px 45px #000;
    -webkit-transform:rotate(-1deg);
} 
```

​</p>

[http://jsfiddle.net/Kyle_Sevenoaks/4Luet/1/](http://jsfiddle.net/Kyle_Sevenoaks/4Luet/1/)

# android - 连接免提装置时使用手机麦克风录制 Android 音频

> ID：12578972
> 
> 赞同：3
> 
> 时间：2012-09-25T08:27:25.067
> 
> 标签：android, audio-recording, microphone

当我将蓝牙免提连接到 Android 手机设备时，是否可以使用手机麦克风录制声音并在免提中听到？

我设法通过电话麦克风录制声音并在电话扬声器或耳机上听到它。但是当耳机有麦克风时，通常是免提的，它默认使用免提麦克风录制声音。我需要以某种方式静音免提麦克风并使用电话麦克风。在安卓中可以吗？

我还没有找到任何答案。在 android 开发人员中，Stackoverflow 无处可去。提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T13:57:34.490

您可以尝试使用 MediaRecorder.AudioSource.CAMCORDER 来录制音频。

根据 api-doc 它是

> *麦克风音频源与摄像头方向相同（如果可用），否则为主设备麦克风*

# django - Django：以基于模型的形式显示外部数据

> ID：12578973
> 
> 赞同：0
> 
> 时间：2012-09-25T08:27:30.260
> 
> 标签：django, django-forms

我有一些想要以基于模型的形式显示的外部数据 (SOAP)。

该模型：

```
class UserProfile(User):
    profile_email = models.EmailField()
    company_name = models.CharField()
    coc_number = models.CharField()
    gender = models.CharField()
#etc 
```

表格：

```
 class UserDetailsForm(forms.ModelForm):
        class Meta:
            model = UserProfile 
```

数据是一个字典：

```
u = {}
u['profile_email'] = 'monkey'
u['company_name'] = 'tiger'
u['coc_number'] = 'some number'
u['gender'] = 'M' 
```

我的问题是：将数据放入表单的最佳方式是什么？到目前为止我所拥有的：

```
form = UserDetailsForm(initial=u) 
```

这会生成一个包含所有数据的表单。1）但这是用外部数据填充模型库表单的正确方法吗？2）如何在选择选项中设置正确的值（例如选择国家）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:21:18.087

1.  是的，这是合适的方式。

2.  您需要在 dict 中为 select/choices 字段设置*值*，类似于方法 1。

例如：

```
COUNTRY_CHOICES = (
    ('IN', 'India'),
    ('US', 'USA'),
    )
    ....
    #model field 
    country = models.CharField(choices=COUNTRY_CHOICES)

# then set it in dict as
u = {}
u['country'] = 'IN'
u['profile_email'] = 'monkey'
u['company_name'] = 'tiger'
u['coc_number'] = 'some number'
u['gender'] = 'M'
... 
```

# ios - viewController.view.superview 为零

> ID：12578974
> 
> 赞同：2
> 
> 时间：2012-09-25T08:27:37.390
> 
> 标签：ios, uiscrollview, uipagecontrol

我正在尝试在我的项目中实现页面滚动功能。我为 iOS 5 开发，带有故事板（和 ARC）。这就是我在故事板中所做的：

![在此处输入图像描述](../Images/78f41b6a43ff85c186d7895b4479a9cf.png)

第一个 viewController（在左边）有一个 scrollView 和一个 pageControl。它的类被称为`GlobalDashboardViewController`，并继承自类`DashboardViewController`（继承自`UIViewController`）。其他 2 个控制器是带有标识符（*MainDashboard*和*SecondaryDashboard*）的简单 UIViewControllers。

在`GlobalDashboardViewController.m`中，只有一个 viewDidLoad，它获取 childViewControllers ：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"MainDashboard"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"SecondaryDashboard"]];
} 
```

`DashboardViewController.m`有点复杂。以下是最重要的方法：

```
- (void)viewDidLoad
{
    // Calling the viewDidLoad above to populate the childViewControllers array
    [super viewDidLoad];

    [self.scrollView setPagingEnabled:YES];
    [self.scrollView setScrollEnabled:YES];
    [self.scrollView setShowsHorizontalScrollIndicator:NO];
    [self.scrollView setShowsVerticalScrollIndicator:NO];
    [self.scrollView setDelegate:self];
}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.pageControl.currentPage = 0;
    _page = 0;
    [self.pageControl setNumberOfPages:[self.childViewControllers count]];

    UIViewController *viewController = [self.childViewControllers objectAtIndex:self.pageControl.currentPage];
    if (viewController.view.superview != nil) {
        [viewController viewWillAppear:animated];
    }

    self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [self.childViewControllers count], scrollView.frame.size.height);
} 
```

还有很多其他方法，但我认为它们不相关，因为这是我的问题：应用程序启动，我看到了 scrollView 和 pageControl。背景是深灰色的，因为我在*GlobalDashboard* viewController 中设置了它。我可以正确滚动，并且 pageControl 已更新。但我没有看到其他观点。*当我在if* in处放置断点`viewWillAppear`并查看时`viewController`，它的命名正确（`Dashboard Page 1`这是我在情节提要中给控制器的名称），但它的`_view`属性显示为*0x00000000*，如您在此处看到的：

![在此处输入图像描述](../Images/dae29243796a99c54624ea26503ad12d.png)

所以，我从来没有进入*if*，这是实际显示 viewControllers 的一些魔力发生的地方......

我的工作基于您可以在此处找到的示例项目：[PageViewController](https://github.com/wannabegeek/PageViewController)。当我运行它时，它运行良好。我不知道为什么我不能让它在我自己的项目中工作。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:32:23.800

您永远不会添加视图本身 ( `[self.view addSubview:/*Your child controller's view*/]`)。您链接到的项目`- (void)loadScrollViewWithPage:(int)page`在 PagerViewController.m中完成

# asp.net-mvc - 将字典转换为 SelectListItem VB.net 的列表

> ID：12578985
> 
> 赞同：0
> 
> 时间：2012-09-25T08:28:11.213
> 
> 标签：asp.net-mvc, vb.net

我通常用 C# 编程，但被要求在我当前的网站上使用 vb.net，我想知道如何将下面的 C# 代码转换为 vb.net 代码。

该代码将字典转换为 SelectListItem 的列表

```
return dic.Select(x => new SelectListItem() { Text = x.Value.ToString(), Value = x.Key.ToString(), Selected= EqualityComparer<T>.Default.Equals(x.Key, selectedKey) }); 
```

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:37:20.390

查询语法* 在 VB.NET 中通常更具可读性：

```
Dim result = From kv In dic
     Select New SelectListItem() With {
         .Text = kv.Value,
         .Value = kv.Key,
         .Selected = EqualityComparer(Of SelectListItem).Equals(kv.Key, selectedKey)
     } 
```

[* 它也比 C# 更简洁]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:31:46.063

```
return dic.Select(Function(x) New SelectListItem() With { .Text = x.Value.ToString(), .Value = x.Key.ToString(), .Selected = System.Collections.Generic.EqualityComparer(Of T).Default.Equals(x.Key, selectedKey) }) 
```

# java - 将 Domino 同步到 Active Directory

> ID：12578993
> 
> 赞同：0
> 
> 时间：2012-09-25T08:28:30.960
> 
> 标签：java, active-directory, lotus-domino

如何将用户和组从 Domino 同步到 Active Directory？目前我同步用户和组，但我无法将每个组的成员设置为 Active Directory 组。

这是我的代码：

```
ModificationItem member[] = new ModificationItem[user.length];
for (int i = 0; i < user.length; i++) {
    member[i] = new ModificationItem(
    DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(
        "member", userName));
}
ctx.modifyAttributes(groupName, member); 
```

我的组名是：`cn=groupA,cn=Users,dc=filenet,dc=com`。

我的会员名是：`cn=nameA,cn=users,dc=filenet,dc=com`。

当我运行它时，我得到一个命名异常。

# c# - WP7中带有按钮的Listpicker处于完整模式

> ID：12578999
> 
> 赞同：0
> 
> 时间：2012-09-25T08:29:05.307
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我在 listpicker 完整模式模板中放了一个按钮。我想要按下这个按钮。它只是调用我定义的事件。不作为 listpicker 上的正常点击并关闭 listpicker 的完整模式。

请看下面的截图。

![在此处输入图像描述](../Images/cf681d8e1cce54378040869d4a9173ef.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:49:13.880

要将按钮包含在 中`listPicker full mode`，您必须这样定义`data template`。[浏览此处](http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth)给出的 listPicker

```
 <DataTemplate x:Name="PickerFullModeItemTemplate"> 
            <StackPanel Orientation="Horizontal" Margin="16 21 0 20"> 
                <Button Click="event">
                    <Button.Content>
                         <StackPanel>
                              <Image Source="myImg.png"/>
                              <TextBlock Text="test"/>
                         </StackPanel>
                    </Button.Content>
                </Button>
            </StackPanel> 
        </DataTemplate> 
```

对于您需要的行为。通过处理`click event`按钮中的事件功能来尝试和测试。我想它应该工作。如果没有，那么您必须使用`popUp`而不是 listPicker。或者你必须`UserControl`在最坏的情况下定义你自己的。