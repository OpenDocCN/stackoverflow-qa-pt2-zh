# StackOverflow 问答 15720000-15720999

# html - IE9 中的 HTML5 音频

> ID：15720000
> 
> 赞同：1
> 
> 时间：2013-03-30T15:09:05.003
> 
> 标签：html, audio

我对 IE9+ 和 HTML5 音频标签有一个奇怪的问题。

看看这个网站：[https ://www.phasetrax.de/artist/Chryso/album/42/lipstick-of-the-reddest-color](https://www.phasetrax.de/artist/Chryso/album/42/lipstick-of-the-reddest-color)

在 Firefox、Chrome 和 Safari 中，它工作正常，但在 IE9+ 中，我只是得到一个带有红色标志的黑色字段，用于音频元素。

我还检查了 OGG 源的 HTML 标头，对我来说它看起来不错。

```
curl -k -I https://www.phasetrax.de//cdn/song/323/lipstick-of-the-reddest-color.ogg
HTTP/1.1 200 OK
Server: nginx/1.2.0
Date: Sat, 30 Mar 2013 14:59:50 GMT
Content-Type: application/octet-stream
Connection: keep-alive
Status: 200 OK
Content-Disposition: attachment; filename="01_Lipstick_Of_The_Reddest_Color.ogg"
Content-Transfer-Encoding: binary
Cache-Control: private
X-UA-Compatible: IE=Edge,chrome=1 
```

这是音频元素代码：

```
<audio controls autobuffer  id="pt_player_1">
<source class="mp3_src" src="https://www.phasetrax.de//cdn/song/323/lipstick-of-the-reddest-color.mp3">
<source class="ogg_src" src="https://www.phasetrax.de//cdn/song/323/lipstick-of-the-reddest-color.ogg">
  Your browser does not support the audio element. Get newest
  Firefox!
</audio> 
```

负责提供 ogg 的应用程序是带有 Unicorn 和 NGINX 的 Rails。

也许，任何人都知道在这种情况下 IE 出了什么问题.. 或者更好地说，我做错了什么？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:30:09.063

我尝试使用不同的音频，它可以正常工作。我认为您的音频比特率与此有关。尝试 128kbps 44khz 单声道。您可以通过反复试验尝试其他组合。

我使用格式工厂进行这些音频转换。

# c - Thermo Mini 打印机上的 C 文本换行

> ID：15720006
> 
> 赞同：0
> 
> 时间：2013-03-30T15:10:02.487
> 
> 标签：c, twitter, word-wrap, maxlength

我真的很想为我的一个项目提供帮助。我是一名平面设计专业的学生，​​几乎没有编程经验。我已经为 Thermo 迷你打印机创建了一个程序，它可以根据使用的特定主题标签识别在 Twitter 上发布的推文并自动打印它们。

但是，它基于 32 个字符的行长，并将单词分成两半，而不是将整个单词移动到另一行。我的一个朋友建议使用自动换行，但我在网上找不到任何可以帮助我的东西，而且我发现的大多数代码往往是用于 c++ 或 c#。

到目前为止的代码可以在下面找到：

```
// Build an ArrayList to hold all of the words that
// we get from the imported tweets

ArrayList<String> words = new ArrayList();
Twitter twitter;
import processing.serial.*;

Serial myPort;  // Create object from Serial class
int val;        // Data received from the serial port

void setup() {
    String portName = Serial.list()[0];
    myPort = new Serial(this, portName, 9600);
    //Set the size of the stage, and the background to black.
    size(550,550);
    background(0);
    smooth();

    //Make the twitter object and prepare the query
    twitter = new TwitterFactory(cb.build()).getInstance();
}

void draw() {

    Query query = new Query("#R.I.P");
    query.setRpp(1);

    //Try making the query request.
    try {
        QueryResult result = twitter.search(query);
        ArrayList tweets = (ArrayList) result.getTweets();

        for (int i = 0; i < tweets.size(); i++) {
            Tweet t = (Tweet) tweets.get(i);
            String user = t.getFromUser();
            String msg = t.getText();
            Date d = t.getCreatedAt();
            println("Tweet by " + user + " at " + d + ": " + msg);
            msg = msg.replace("\n"," ");
            myPort.write(msg+"\n");
        };
    }
    catch (TwitterException te) {
        println("Couldn't connect: " + te);
    };
    println("------------------------------------------------------");
    delay(20000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:15:43.577

既然你有线的长度，这并不难......

遍历字符串，一次一个字符。如果您看到一个空格，则将该位置保存为例如`last_space`。如果您的迭代超过了最大行长度，则转到该`last_space`位置并将空格转换为换行符，将位置计数器重置为零，然后从该位置重新开始。

* * *

也许实现它是这样的：

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

#define LINE_LENGTH 32

char text[256] = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer ac risus elit, id pellentesque magna. Curabitur tempor rutrum enim, sit amet interdum turpis venenatis vel. Praesent eu urna eros. Mauris sagittis tempor felis, ac feugiat est elementum sed. Praesent et augue in nibh pharetra egestas quis et lectus. Lorem ipsum.";

static void wrap(char *text, const int length)
{
    int last_space = 0;
    int counter = 0;

    for (int current = 0; text[current] != '\0'; current++, counter++)
    {
        if (isspace(text[current]))  // TODO: Add other delimiters here
            last_space = current;

        if (counter >= length)
        {
            text[last_space] = '\n';
            counter = 0;
        }
    }
}

int main(void)
{
    printf("Before wrap:\n%s\n", text);

    wrap(text, LINE_LENGTH);

    printf("\nAfter wrap:\n%s\n", text);

    return 0;
} 
```

重要提示：该函数修改作为参数`wrap`传入的缓冲区。`text`这意味着它不能处理文字字符串，因为它们是只读的。它通过用换行符替换空格来工作。如果您修改函数以添加多个字符，则更好的解决方案是（重新）分配一个足够大的新缓冲区以容纳修改后的字符串。

# javascript - 在 Google Chrome 上以复杂的帧结构（3 列，每列 3 行）逐帧写入

> ID：15720008
> 
> 赞同：0
> 
> 时间：2013-03-30T15:10:29.847
> 
> 标签：javascript, html, google-chrome, frames

我使用以下代码在 Mozilla 和 IE 中从一帧写入另一帧，并且运行良好：

```
top.framename.document.write("blablabla") 
```

但是，它不适用于 Google Chrome。

有人可以告诉我哪些代码在 Chrome 上可以完成这项任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:37:57.610

我已经将该站点部署到服务器上，奇怪的是它现在在 Chrome 上运行良好！所以这个问题似乎已经解决了——或者 Chrome 听到并迅速做出了回应。不管怎样，我很高兴！

# java - 使用 Java 仅搜索 Google 结果而不是 URL

> ID：15720009
> 
> 赞同：0
> 
> 时间：2013-03-30T15:10:36.350
> 
> 标签：java

我正在开发需要来自 Google 的结果的 java 应用程序。[所以我在这个页面搜索 Google Programmatically Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)的第一个答案中使用了帮助

通过成功运行这个程序，我得到了我得到结果的 URL，这没关系。

但我需要解释搜索查询而不是 URL。

那么如何从搜索的查询中获得结果答案，感谢您的帮助。

**Answer.java**是

```
public static void main(String[] args) throws Exception {
    String google = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=";
    String search = "stackoverflow";
    String charset = "UTF-8";

    URL url = new URL(google + URLEncoder.encode(search, charset));
    Reader reader = new InputStreamReader(url.openStream(), charset);
    GoogleResults results = new Gson().fromJson(reader, GoogleResults.class);

    // Show title and URL of 1st result.
    System.out.println(results.getResponseData().getResults().get(0).getTitle());
    System.out.println(results.getResponseData().getResults().get(0).getUrl());
} 
```

**GoogleResults.java**是

```
public class GoogleResults {

    private ResponseData responseData;
    public ResponseData getResponseData() { return responseData; }
    public void setResponseData(ResponseData responseData) { this.responseData = responseData; }
    public String toString() { return "ResponseData[" + responseData + "]"; }

    static class ResponseData {
        private List<Result> results;
        public List<Result> getResults() { return results; }
        public void setResults(List<Result> results) { this.results = results; }
        public String toString() { return "Results[" + results + "]"; }
    }

    static class Result {
        private String url;
        private String title;
        public String getUrl() { return url; }
        public String getTitle() { return title; }
        public void setUrl(String url) { this.url = url; }
        public void setTitle(String title) { this.title = title; }
        public String toString() { return "Result[url:" + url +",title:" + title + "]"; }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:52:20.487

If you paste the [search URL](http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=stackoverflow) in a browser, you can see how the JSON result is formatted. Your `GoogleResult` class maps properties from this JSON to properties in this class. To extract more information from the search result, you can just add the appropriate properties to your class, and it should be handled by the JSON parser transforming the JSON result to your `GoogleResult` class. So if `content` from the JSON result is the "explanation" you're looking for, your `Result` class would look like this:

```
static class Result {
    private String url;
    private String title;
    private String content;
    public String getUrl() { return url; }
    public String getTitle() { return title; }
    public String getContent() {return content; }
    public void setUrl(String url) { this.url = url; }
    public void setTitle(String title) { this.title = title; }
    public void setContent(String content) { this.content = content; }
    public String toString() { return "Result[url:" + url +",title:" + title + ",content:" + content + "]"; }
} 
```

Then you can use `result.getContent()` to get the description of the search result. You can use the same process to extract any data from the JSON result that you want.

# ios - 在 iOS 中，您可以在不调用“打开方式”菜单的情况下在另一个应用程序中打开文件吗？

> ID：15720012
> 
> 赞同：0
> 
> 时间：2013-03-30T15:10:47.357
> 
> 标签：ios, objective-c, uidocumentinteraction, uidocument

使用 UIDocumentInteractionController，我可以打开文件 URL 的“打开方式”菜单。如果只有一个应用程序可以处理（查看器/编辑器）该类型的文件，则会提供三个选项：

1.  查看器应用程序
2.  邮件
3.  复制

有没有一种方法可以在不打开“打开方式”菜单的情况下立即将文件发送到“查看器”应用程序？

请注意：文件类型是只有 1 个查看器应用程序可以处理的自定义文件类型。

# android - How properly handle server communication in Android:

> ID：15720022
> 
> 赞同：0
> 
> 时间：2013-03-30T15:11:42.327
> 
> 标签：android, session, android-asynctask

In my application I am working a lot with server communication and the deal is like this:

At first I have to make a call to a server to get a unique ID (`GUID`, or I think it's called `UUID` in java). after that I can perform other operations with the server while I have to send the received Id with my operation. the problem is that this session is valid for only 5 minutes of inactivity after that I need to get a new Id from the server.

So if the user quits the application and wasn't active then I just send him back to the log in screen to authenticate again and to receive a new unique Id from the server when he gets back to my application by overriding the `onResume` method in all of my `Activities`:

[How to start Login Activity if user wasn't active for 5 minutes:](https://stackoverflow.com/questions/15661557/how-to-start-login-activity-if-user-wasnt-active-for-5-minutes)

**The Question:** But what if the user using the application for 5 minutes and in this time he never makes any call to the server, his Id becomes invalid and the next his call to the server returns id invalid message.

So I could do some thing like this (pseudo-code):

```
class SessionInvalidAwareMethod(AsyncTask task)
{
    AsyncTask currentAsyncTask = task;
    AsyncTask authenticateAsyncTask;

    public SomeResult executeTask()
    {
        result = executeCurrentAsyncTask();
        if (result = sessionInvalid)
        { 
            executeAuthenticationTask()
            result = executeCurrentAsyncTask();
        }
        return result;
    }
} 
```

**The Problem:** But I would like to avoid the call to the server and getting the session invalid message. So I hold Date parameter in my application class that hold for me the last time I go my id from the server. how could I use it to decide depending on how much time has passed if I should run the current `AsyncTask` or run the `authenticateAsyncTask` first and only after it's finished I should run the current `AsyncTask` (`My problem is to do the second step in a synchronous way`)?

can some one explain to me what is the right way to handle this kind of situations overall?

Thanks for your help friends.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:45:36.737

I would make the server handle the session using cookies. It will have a login/logout calls in its API. The client will use the login/logout calls accoding to the app needs (i.e. Activity timeout). The client can get the login status from the cookie.

If you don't have control over the server sessions timeout, you can make a keep-alive service that will make an empty call to the server every <5 min and start/stop it from the app according to the app needs.

# asp.net - 问题是按钮的 OnClick 在更新数据库时工作得很好，但使用 LinkBut ton 没有效果

> ID：15720024
> 
> 赞同：0
> 
> 时间：2013-03-30T15:11:54.510
> 
> 标签：asp.net, database, button, onclick, linkbutton

//aspx页面中的LinkBut​​ton定义

```
<asp:LinkButton ID="linkUpdate" runat="server" OnClick="linkUpdate_Click">Update </asp:LinkButton> 
```

//linkUpdate_Click - 单击链接按钮时我想要执行的操作

```
protected void linkUpdate_Click(object sender, EventArgs e)
{

   string DeptName = txtName.Text;
   string Profile = txtProfile.Text;

   string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["connectionStringName"].ConnectionString;
   using (SqlConnection connection = new SqlConnection(connectionString))
   {
       string sql = "update Sectors set DeptName = '" + txtName.Text + "',Profile='" + txtProfile.Text + "' where DeptID =1";
       connection.Open();
       SqlCommand cmd = new SqlCommand(sql, connection);
       cmd.ExecuteNonQuery();
       Response.Redirect("Architecture.aspx");
       connection.Close();
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:18:48.290

```
<asp:linkbutton id="linkUpdate" runat="server" 
    text="Login" onclick="linkUpdate_Click"></asp:linkbutton> 
```

检查链接按钮中的**onclick="linkUpdate_Click"**事件

只需检查以下链接

[动态 LinkBut​​ton OnClick 事件在 ASP.Net 上不起作用](https://stackoverflow.com/questions/13106715/dynamic-linkbutton-onclick-event-not-working-on-asp-net)

[LinkBut​​ton 命令事件处理程序参数始终为字符串](https://stackoverflow.com/questions/735581/linkbutton-command-event-handler-args-always-strings)

# c# - 如何从 Windows 上的 Safari 获取当前 URL？

> ID：15720031
> 
> 赞同：0
> 
> 时间：2013-03-30T15:12:50.100
> 
> 标签：c#, delphi, winapi, safari, webbrowser-control

有什么方法可以接收在 Safari 的 Windows 版本中打开的网站地址？

我试图用 DDE 来获得它，也试图直接访问编辑控件，但无济于事。是否有一个 COM 接口可以做到这一点？

# extjs4 - ExtJs 4 网格选择模型

> ID：15720038
> 
> 赞同：1
> 
> 时间：2013-03-30T15:13:45.537
> 
> 标签：extjs4

我正在为我的网格使用 CheckboxModel。如何通过鼠标单击行（而不是复选框）禁用检查选定行。换句话说，如何通过单击行并单击复选框来分隔选择行？我知道 CheckboxModel 中的 checkOnly，但如果我启用它，我无法通过鼠标单击行来选择行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:59:18.877

> 似乎您走错了方向，如果您想分开行选择和复选框选择，则不要使用 CheckboxSelection 而是使用 RowSelection 和其渲染器将是复选框的列，因此复选框选择不会干扰行选择

要添加带有复选框的列，您需要使用 Ext.ux.CheckColumn 列并将其包含在列列表中，与该检查列关联的 dataIndex 应该是一个布尔值，它将存储该列的选中/未选中状态

```
var grid = Ext.create('Ext.grid.Panel', {
    columns: [{
        xtype: 'checkcolumn',
        header: 'Header',
        dataIndex: 'field'
    }]
}); 
```

并确保`Ext.ux`包含该库

**参考：**

1.  [https://stackoverflow.com/a/2431312/1237812](https://stackoverflow.com/a/2431312/1237812)
2.  [http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/cell-editing.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/cell-editing.html)
3.  [http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/cell-editing.js](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/cell-editing.js)
4.  [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn)

# python - （Python）使用“样式：隐藏”标签从网站上抓取数据？

> ID：15720039
> 
> 赞同：0
> 
> 时间：2013-03-30T15:13:57.917
> 
> 标签：python, css, web-scraping, web-crawler

我正在使用 Selenium 尝试从网站获取数据。但是我想要的数据存储在“隐藏”标签中，所以当我拉出源时它是不可见的。有没有办法解决这个问题？是否有不同类型的隐藏？

我认为它是隐藏的，因为我也在使用 Firebug，它可以在我试图抓取的页面上看到源代码，但它“灰色”了那个源，我读过这表明该源被隐藏使用 style:hidden 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:13:57.110

可能发生的情况是网站正在通过 JavaScript 和/或 XMLHttpRequest 或通过 CSS 加载附加数据。Firebug 会在完成后向您显示 DOM。使用 Webdriver，您可以引导浏览器加载页面并与之交互。一旦存在特定的用户交互，当提供一些附加信息时，就会出现问题。因此，缓解这种情况的一种方法是使用 webdriver 来引导浏览器并执行相同的操作序列，以便 DOM 会相应地发生变化。

您可能想要使用 CSS 来更改属性并使元素也可见。

鉴于您没有提供任何代码示例来说明您正在尝试做什么，因此准确地帮助您是不现实的。但是你会在官方文档中找到大量的 python 中的[webdriver 代码示例](http://docs.seleniumhq.org/docs/03_webdriver.jsp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T13:50:06.370

我使用 Selenium 抓取的具体原因之一是确保在我开始搜索内容之前，每个页面的 javascript 创建部分都已完全呈现。我使用这一行来等待我要加载的内容：

```
WebDriverWait(self.driver, 30).until(EC.presence_of_element_located((By.XPATH, my_xpath))) 
```

'30' 是一个 30 秒的等待计时器，如果超过此时间，则会发生 TimeoutException，因此您需要将其放入一个`try ... except:`块中。更改`my_xpath`以匹配您想要的标签。即使样式被标记为隐藏，Selenium 仍然可以看到它。

# c# - JQuery Dialog with Checkbox and Submit button in C#

> ID：15720042
> 
> 赞同：0
> 
> 时间：2013-03-30T15:14:05.270
> 
> 标签：c#, javascript, jquery, asp.net, validation

Basically I have a JQuery UI Dialog but I would need to integrate a checkbox and a submit button in it. Upon clicking the submit button to close the dialog, I would require the checkbox to be checked. It's the same concept as Terms&Condition.

Would anyone mind to share on how to do it/best approach? Been searching around but found nothing close.

Thanks.

```
<script type="text/javascript">
$(function() {
$("#dialog").dialog({
      autoOpen: true,
      closeOnEscape: false,
      resizable: false,
      draggable: false,
      height: 700,
      width: 700,
      modal: true,
      show: { effect: "fade", duration: 1000 }
      });
  });
  $(function() {
      $("#dialog").dialog({
          buttons: {
          Confirm: function() {
                  $(this).dialog("close");
              }
          }
      });
  }); 
```

```
<asp:CheckBox ID="CheckBox1" runat="server" />
  <asp:Button ID="Button2" runat="server" Text="Button" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:08:20.693

You can initially disable the submit button and then toggle whether it is enabled whenever the checkbox is checked:

```
$('#Button2').attr('disabled', true);

$("#dialog #CheckBox1").change(function() {
  $('#Button2').attr('disabled',!this.checked);
}); 
```

Also, I'm not very familiar with jQuery dialog's ability to insert buttons for you because all of the HTML I work with is pre-created by our designers and uses custom binding frameworks, but it looks like you are likewise using pre-generated asp.net HTML. If, so I don't think you would use the jQuery dialog to generate the buttons. Instead you would have code like:

```
$('#Button2').click(function() {
  // Submit code.  Possibly $.post() and $("#dialog").dialog('close')
  // or triggering the webform's postback.
}); 
```

# sql - 使用 RETURNING 而不显式命名列

> ID：15720046
> 
> 赞同：1
> 
> 时间：2013-03-30T15:14:25.240
> 
> 标签：sql, postgresql, database-design, sql-insert

我有一个包含多个列的表，并希望`INSERT`使用`RETURNING`. 不幸的是，在这种情况下，我似乎必须指定所有列

```
INSERT INTO "user" ( "id", ... ) VALUES ( DEFAULT, ... ) RETURNING "id" 
```

而不仅仅是做

```
INSERT INTO "user" VALUES ( DEFAULT, ... ) RETURNING "id" 
```

这使得查询非常长而且相当不可读。我可以在不指定每一列的情况下以某种方式返回 ID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:30:38.587

当然*可以*。您的第二个查询应该可以正常工作-前提是`id`实际上在表中具有第一个位置-我对此表示怀疑。

验证：

```
SELECT attnum
FROM   pg_attribute
WHERE  attrelid = '"user"'::regclass
AND    attname = 'id'; 
```

但这并不意味着你*应该*这样做。除了临时调用之外，只有少数情况下您不应该*将*列列表附加到`INSERT`命令中。

无论哪种方式，您都不应该使用像表名这样的[保留字。](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)`user`这是一个非常糟糕的主意。装填脚枪的经典案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:27:58.200

我无法重现该问题。我正在运行 PostgreSQL 9.1 版，创建了一个`users`包含列`id`和`name`.

然后我运行了这个查询：

`INSERT INTO users VALUES(DEFAULT,'jszobody') RETURNING id`

我`id`没有在 INSERT 查询中指定列就得到了回复。它似乎刚刚奏效。

你遇到了什么错误？什么版本的 PostgreSQL？您是否尝试过在这样一个非常简单的测试用例中重现，排除查询、默认值等的任何其他问题？

# hadoop - Hadoop Task progress

> ID：15720050
> 
> 赞同：1
> 
> 时间：2013-03-30T15:14:38.060
> 
> 标签：hadoop

I need to calculate the progress of each map task running on all nodes in a Hadoop cluster. I was thinking of dividing the size of the processed data by the size of the whole input data, but I am not sure how to get this information for a task.

I see that `TaskStatus` class has a method `getProgress()`, but there is no description for it. Does it provide the value that I need?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:35:28.697

For a map task, yes `getProgress()` returns how far the mapper has progressed through the input file. For reduce tasks, the calculation is less straightforward. [This article](http://answers.oreilly.com/topic/459-anatomy-of-a-mapreduce-job-run-with-hadoop/) has a pretty good explanation.

# php - 如何在解析网站时使用用户自己的 IP 地址

> ID：15720053
> 
> 赞同：1
> 
> 时间：2013-03-30T14:52:44.603
> 
> 标签：php

我使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)从另一个网站获取一些数据。它是一个在线摘要生成器工具。大问题是当我的服务器 IP 在每秒向源网站发送一百个请求并被阻止时，我如何在解析网站时使用用户自己的 IP 地址？
我知道使用带有简单 php html dom 解析器的代理，但这对我来说是另一个大问题。
请给我一些想法。谢谢 **您可能会在 phpfreaks 论坛上找到重复的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:59:51.470

你不能使用像 PHP 这样的服务器端编码。该请求需要您的 IP 地址，否则您的服务器将得不到响应！

要使用用户的 IP 发送内容，必须从用户的网络发送。这意味着在用户的浏览器中运行。Javascript 是最简单的方法，尽管 Java、Flash 和类似的插件都可以做到。

当然，您需要服务器上的答案，因此您需要编写从用户计算机请求数据的代码，以及将数据从用户计算机发送到服务器的代码。

# html - 使用 xtable 和 type = html 如何将类添加到特定的 td 标签

> ID：15720060
> 
> 赞同：6
> 
> 时间：2013-03-30T15:15:34.667
> 
> 标签：html, css, r, xtable, shiny

我正在尝试使用 xtable 在 html 中创建一个表格，但我需要向特定`td`标签添加一个类，因为我要做一个动画。问题是没有 xtable 我不能这样做，因为它太慢了。

可能我需要用 xtable 来表示这个。

```
myRenderTable<-function(){
  table = "<table>"
  for(i in 1:4862){
    table = paste(table,"<tr><td>",i,"</td>",sep="")
    for(j in 1:5){

      if(j == 5){
        table = paste(table,"<td class ='something'>",i+j,"</td>",sep="")  
      }
      else{
        table = paste(table,"<td>",i+j,"</td>",sep="")
      }
    }
    table = paste(table,"</tr><table>")
  }
  return(table)
} 
```

如果我使用 xtable 执行此操作，我的应用程序需要 15 秒，但如果我使用 myRederTable 函数执行此操作，我的应用程序需要 2 分钟，那么我该如何将此类放入`td`xtable 中。

我正在使用 R 和闪亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:48:22.530

问题是您正在增长一个字符串：每次附加到它时，都必须将其复制到新的内存位置。首先将数据构建为数组，然后再将其转换为 HTML 会更快。

```
# Sample data
n <- 4862
d <- matrix( 
  as.vector( outer( 0:5, 1:n, `+` ) ),
  nr = 10, nc = 6*n, byrow=TRUE
)
html_class <- ifelse( col(d) %% 6 == 0, " class='something'", "" )

# The <td>...</td> blocks
html <- paste( "<td", html_class, ">", d, "</td>", sep="" )
html <- matrix(html, nr=nrow(d), nc=ncol(d))

# The rows
html <- apply( html, 1, paste, collapse = " " )
html <- paste( "<tr>", html, "</tr>" )

# The table
html <- paste( html, collapse = "\n" )
html <- paste( "<table>", html, "</table>", sep="\n" ) 
```

# ios - iOS，有没有所有应用程序都可以看到的临时目录？

> ID：15720069
> 
> 赞同：0
> 
> 时间：2013-03-30T15:16:41.823
> 
> 标签：ios, objective-c, uidocumentinteraction

iOS 中是否有一个所有应用程序都可以访问的临时目录，以便在它们之间传递文件？

请注意：我了解 UIDocumentInteractionController 的“打开方式”菜单。我希望通过在 UIApplication 上调用 openURL 来传递文件。我试图不使用“打开方式”菜单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:24:37.960

不，没有。唯一共享的位置（在某种意义上）是照片库，每个应用程序都可以使用它来加载和保存图像（如果用户允许的话）。除此之外，每个应用程序只能访问其自己的 Documents、Library 等文件夹。

（当然我不是在谈论越狱设备。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:36:02.990

正如“Martin R”所指出的，在任何地方都没有可用于此目的的通用目录。

由于您可以控制这两个应用程序，因此您确实有一个解决方案可以让这两个应用程序共享文件和/或数据。这将需要更新两个应用程序以支持此功能。

解决方案涉及使用`UIPasteBoard`. 您可以使用通用粘贴板，也可以使用名为“私有”的粘贴板。如果您使用命名粘贴板，则两个应用程序需要就名称达成一致（或者可以在调用时将名称作为 URL 的一部分传递`openURL:`）。

`setData:forPasteBoardType:`在（命名或通用）粘贴板上调用源应用程序。然后源应用程序应该创建一个指向另一个应用程序的 URL。URL 应包含几个查询参数，其中包括粘贴板的名称（如果适用）以及用于设置数据的粘贴板类型。

当接收应用程序启动时，它会获取查询参数并使用这些参数来获取粘贴板，然后是具有正确类型的数据。

如果您需要传递的文件太大，此解决方案可能会出现问题。我已经将它用于数兆字节的文件。由于数据正在加载到内存中，因此数据量必须有上限。请在您希望传输的最大文件的真实设备上进行正确测试。

# javascript - 导致 javascript 或 javascripts 自动执行

> ID：15720070
> 
> 赞同：0
> 
> 时间：2013-03-30T15:17:10.037
> 
> 标签：javascript, php, html, wordpress, dom-events

您好我有一个脚本，它允许在访问页面并单击链接时进行下载。我想编辑一些东西，以便一旦单击链接，下载将按照指定的 Javascripts 开始，但随后它将开始下载并指向感谢页面。这是一个例子：

1.  网站访问者单击下载链接下载开始
2.  然后网站访问者会自动重定向到感谢页面

[通过检查页面http://www.mynetdownload.com/testdwld.html](http://www.mynetdownload.com/testdwld.html)的源代码，可以在此处找到页面示例和 Javascript 编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:28:39.813

一旦开始下载，“当前”页面就是正在下载的文件，因此您将无法再“控制”浏览器。

因此，您应该扭转这一点；

1.  网站访问者点击下载链接
2.  访客进入“谢谢”页面； *感谢您下载此文件。您的下载应该会自动开始。如果下载没有自动开始，请点击以下链接：[下载链接]*
3.  访问者被重定向到文件下载

*由于浏览器内*未显示“下载” ，因此在下载过程中感谢页面将保持可见。

重定向到文件下载可以通过您的常规 HTML 重定向标头完成`<head>`：

例如，要在 10 秒后开始下载（重定向）：

```
<meta http-equiv="refresh" content="10; url=http://example.com/downloads/file1.zip"> 
```

# javascript - 如何测试 angularjs 指令以监视函数调用？

> ID：15720072
> 
> 赞同：11
> 
> 时间：2013-03-30T15:17:21.233
> 
> 标签：javascript, unit-testing, angularjs, jasmine

下面的代码执行但抱怨 element.popover 没有被调用。我似乎无法弄清楚问题是什么。

提前感谢您的帮助。

**指示：**

```
angular.module('directives', []).

directive('popOver', function ($http) {

    return {
        restrict:'C',

        link: function (scope, element, attr) {
            element.bind('mouseover', function (e) {
                $http.get("someurl" + attr.chatid + ".json").success(function (data) {
                    element.popover({content: data.firstName + " " + data.lastName });
                });
            });
        }
    }
}) 
```

**茉莉花测试：**

```
'user strict'

describe('directives', function() {
    beforeEach(module('directives'));
    describe('popOver', function() {
    var $scope, compile, location,  $httpBackend, elm;

    beforeEach(inject(function($rootScope, $compile, _$httpBackend_) {
        $scope = $rootScope.$new();
        compile = $compile;
        $httpBackend = _$httpBackend_;
        elm = angular.element('<i class="pop-over" data-placement="top" data-chatid="testChatId" > </i>');
        compile(elm)($scope);

    }));

    it('should call element.popover()', function() {
        $httpBackend.expectGET('someurl/testChatId.json').
            respond([ {firstName: 'test', lastName: 'user'}]);

        spyOn(elm, 'popover').andCallThrough();

        elm.trigger('mouseover');
        $httpBackend.flush();

        expect(elm.popover).toHaveBeenCalled();
    });
  });
}); 
```

**输出：**

```
Chrome 26.0 (Mac) directives popOver should call element.popover() FAILED
Expected spy popover to have been called.
Error: Expected spy popover to have been called. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T20:38:38.857

## 更新：

我无法解决您的具体问题。主要是因为我无法获得角种子/它需要永远，但我认为我会让我的答案更完整。

一般有两种方法可以解决这个问题：

1.  监视由某些事件/中介触发的功能以外的功能
2.  在创建对象之前窥探函数的原型。换句话说：`spyOn(MyObjectNamespace.Class.prototype, 'functionToSpyOn')`

之后只是恢复，你应该没问题。

* * *

我对角度只是模糊熟悉，但遇到过类似的问题。

## 解决方案 1

您可以只分离出函数而不是匿名指定它。这有助于专门测试您的功能并避免所有有角度的东西。

## 解决方案 2

有时使用框架这是不可能的。这里的主要问题是您的间谍附加自身太晚，并且引用丢失或被覆盖。

测试：

```
describe('directives', function() {
    beforeEach(module('directives'));
    describe('popOver', function() {
    var $scope, compile, location,  $httpBackend, elm;

    beforeEach(inject(function($rootScope, $compile, _$httpBackend_) {
        $scope = $rootScope.$new();
        compile = $compile;
        $httpBackend = _$httpBackend_;
        elm = angular.element('<i class="pop-over" data-placement="top" data-chatid="testChatId" > </i>');
        compile(elm)($scope);

    }));

    it('should call element.popover()', function() {
        var popoverFunction = $.fn.popover;
        $httpBackend.expectGET('someurl/testChatId.json').
            respond([ {firstName: 'test', lastName: 'user'}]);

        spyOn($.fn, 'popover').andCallThrough();

        elm.trigger('mouseover');
        $httpBackend.flush();

        expect($.fn.popover).toHaveBeenCalled();
        //restore popover, use sinon's restore fn instead here
        $.fn.popover = popoverFunction
    });
  });
}); 
```

您可以将诗乃与茉莉花一起使用。Sinon 有一个 spy.restore 功能，可以为您摆脱第一行和最后一行。在我自己的测试中，我将第一行和间谍创建放在了 beforeEach 中，将恢复放在了 afterEach 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T15:32:26.137

我让它工作。
jquery和jquery popover js文件需要在测试时在angular.js之前加载。此顺序应在 testacular.conf.js 文件中指定。此外，http 的 url 缺少“/”。这是对我有用的代码：

* * *

```
angular.module('directives', []).

directive('popOver', function($http) {

  return {
    restrict: 'C',

    link: function(scope, element, attr) {
      element.bind('mouseover', function(e) {
        $http.get("someurl/" + attr.chatid + ".json").success(function(data) {
          element.popover({
            content: data.firstName + " " + data.lastName
          });
        });
      });
    }
  }
})

'user strict'

describe('directives', function() {
  beforeEach(module('directives'));
  describe('popOver', function() {
    var $scope, compile, location, $httpBackend, elm;

    beforeEach(inject(function($rootScope, $compile, _$httpBackend_) {
      $scope = $rootScope.$new();
      compile = $compile;
      $httpBackend = _$httpBackend_;
      elm = angular.element('<i class="pop-over" data-placement="top" data-chatid="testChatId" > </i>');
      compile(elm)($scope);

    }));

    it('should call element.popover()', function() {
      $httpBackend.expectGET('someurl/testChatId.json').
      respond([{
        firstName: 'test',
        lastName: 'user'
      }]);
      //spyOn(elm, 'popover').andCallThrough();
      spyOn($.fn, 'popover').andCallThrough();

      elm.trigger('mouseover');
      $httpBackend.flush();

      //expect(elm.popover).toHaveBeenCalled();
      expect($.fn.popover).toHaveBeenCalled();
    });
  });
}); 
```

# apache - Need apache rewrite rule assist

> ID：15720073
> 
> 赞同：0
> 
> 时间：2013-03-30T15:17:29.810
> 
> 标签：apache, .htaccess, rewrite

I need to add some rewrite rules to a website.

Here's the idea =>

Rewrite all non-subdomain traffic from

```
(http or https)://(www. or no www.)example.com/whatever
(http or https)://www.example.com/whatever 
```

(so basically, always force www.)

**Also** rewrite only this 1 sumbdomain =>

```
(http or https)://(www. or no www.)store.example.com/whatever
(http or https)://www.example.com/whatever 
```

Keep all other subdomains intact.

So far I have this =>

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com$
RewriteCond %{HTTP_HOST} ^store.example.com$
RewriteRule ^(.*)$ http%{ENV:askapache}://www.example.com/$1 [R=301,L] 
```

But it's not working as expected...

Any help would be appriciated.

Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:04:52.517

Enable mod_rewrite and .htaccess through `httpd.conf` and then put this code in your `.htaccess` under `DOCUMENT_ROOT` directory:

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(?:store\.)?example\.com$ [NC]
RewriteCond %{HTTPS}s on(s)|
RewriteRule ^ http%1://www.example.com%{REQUEST_URI} [R=301,L] 
```

# c# - Do You Use "Fake" Function Overloading In JavaScript?

> ID：15720074
> 
> 赞同：4
> 
> 时间：2013-03-30T15:17:33.043
> 
> 标签：c#, javascript, performance

In C# I might have an overloaded function like so:

```
public string OverLoad(string str1)                  {return str1;}
public string OverLoad(string str1, string str2)     {return str1+str2;} 
```

I know that JavaScript does not have built in support for overloaded functions, but does anyone work around this to still achieve overloaded function capabilities?

I am curious about:

1.) Effect on speed

2.) Reasons to use different function names vs. overloads

It seems you could check for the parameters being undefined or not and "fake" the capability in JavaScript. To me the ease of changing functions by only changing the number of parameters would be quite an advantage.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:23:47.490

In javascript there is a tendency to pass parameters are attributes of an object, ie there is one parameter which is an object, and thus you can specific anything, in any order. With this approach you can check for 'undefined's, and your function can behave according.

If you have rather large behaviour in different cases, you could extend this idea by splitting each case into a seperate function, which is then called by your main 'overloaded' function.

For example:

```
function a (params) {
    // do for a
}
function b () {
    // do for b
}
function main (obj) {
    if (typeof obj.someparam != 'undefined') {
        a(whatever-params);
    } else if (typeof obj.someotherparam != 'undefined') {
        b(whatever-params);
    }
} 
```

You could also use this same approach based on the number parameters, or number of arguements. You can read about using the arguments [here](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:23:06.197

`JavaScript` ***does not*** have a support for function overloading. Although it allowed you to pass a variable number of parameter.

You have to check inside `function` how many [`arguments`](https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference/Functions_and_function_scope/arguments) are passed and what are their types.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T15:40:05.343

This is so common that it is not even noted.

E.g., in JQuery, the [`on()`](http://api.jquery.com/on/) method has multiple call signatures:

```
.on( events [, selector ] [, data ], handler(eventObject) )
.on( events [, selector ] [, data ] ) 
```

A call to the first form looks like `$('sel').on('click', function(e){/*handler*/})`. A call to the second form looks like `$('sel').on({click: function(e){/*click handler*/}, mouseover: function(e){/*mouseover handler*/})`. Note that this demonstrates both "polymorphism" (i.e. arguments of different types) and "overloading" (i.e. optional arguments) in the Java/C# terminology.

Keyword arguments (simulated using a single object argument) are also common, e.g. [`$.ajax({settings})`](http://api.jquery.com/jQuery.ajax/).

So yes, this is done all over the place, but your referring to this as "overloading" is a category confusion. JS is neither staticly typed nor do its functions have a fixed number of function arguments. At call time you can supply as many or as few arguments as you want, regardless of what the function declares. You should view the argument list in the function declaration as a shorthand for array destructuring of the [`arguments` magic variable](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments) rather than as a fixed function signature.

The effect on speed is so minimal as to not even be a consideration.

As for when to do this vs when to use a separate function, that is entirely a program clarity and usability concern and probably subject to wide opinion.

# android - DES 加密 - 在调用 cipher.dofinal 时出现 badpadding 异常

> ID：15720077
> 
> 赞同：1
> 
> 时间：2013-03-30T15:17:42.667
> 
> 标签：android, encryption, apache-commons-codec

我有有效的 Java 代码。但在Android中，它不起作用。实际上我必须在java中加密一个字符串，通过https将它发送到android手机并在那里解密。我正在为 base64 使用 apache commons 编解码器。任何建议为什么我得到一个`BadPaddingException`？java和android的crypto.cipher是否不同

```
public class Cryptography {
private static final String CRYPTOGRAPHY_ALGO_DES = "DES";

private static Cipher cipher = null;
private static DESKeySpec keySpec = null;
private static SecretKeyFactory keyFactory = null;

public static String encrypt(String inputString, String commonKey)
        throws InvalidKeyException, IllegalBlockSizeException,
        BadPaddingException {

    String encryptedValue = "";
    SecretKey key = getSecretKey(commonKey);

    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] inputBytes = inputString.getBytes();
    byte[] outputBytes = cipher.doFinal(inputBytes);

    encryptedValue =  new String(Base64.encodeBase64(outputBytes));
    return encryptedValue;
}

public static String decrypt(String encryptedString, String commonKey)
    throws InvalidKeyException, IllegalBlockSizeException,
    BadPaddingException, IOException {

String decryptedValue = "";
encryptedString = encryptedString.replace(' ', '+');

SecretKey key = getSecretKey(commonKey);

cipher.init(Cipher.DECRYPT_MODE, key); 

byte[] decodeBytes=Base64.decodeBase64(encryptedString.getBytes());

cipher.update(decodeBytes);
byte[] recoveredBytes = cipher.doFinal( );
System.out.println(" recovered bytes\t" + recoveredBytes);
decryptedValue = new String(recoveredBytes);
System.out.println(" decryptedvalue **strong text**\t" + decryptedValue);
return decryptedValue;

}

private static SecretKey getSecretKey(String secretPassword) {
SecretKey key = null;
try {
    cipher = Cipher.getInstance(CRYPTOGRAPHY_ALGO_DES);
    keySpec = new DESKeySpec(secretPassword.getBytes("UTF8"));
    keyFactory = SecretKeyFactory.getInstance(CRYPTOGRAPHY_ALGO_DES);
    key = keyFactory.generateSecret(keySpec);
} catch (Exception e) {
    e.printStackTrace();
    System.out.println("Error in generating the secret Key");
}
return key;
}

} 
```

> 当我在java中执行所有这些函数时没有问题。但是当我在java中运行加密并在android中解密时，解密给出异常

# java - 如果条件不起作用

> ID：15720079
> 
> 赞同：1
> 
> 时间：2013-03-30T15:17:49.260
> 
> 标签：java, if-statement

我调用了这个程序`Main.java`，它从手机获取串行输入。问题是数字显示正确，但函数`BGMusicmaindc()`是在`if`条件下给出的（IE if `inputLine`is 1 play `BGMusicmaindc()`）。但它正在为所有按下的键播放音乐。如果找到，该`else`语句也给出错误说不。

注意：代码在`public synchronized void serialEvent(SerialPortEvent oEvent)`.

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;
import java.io.File;
import java.io.FileInputStream;
import java.lang.String;
import java.util.Enumeration;
import javax.swing.JOptionPane;
import sun.audio.AudioData;
import sun.audio.AudioDataStream;
import sun.audio.AudioPlayer;
import sun.audio.AudioStream;

public class Main implements SerialPortEventListener
{
    SerialPort serialPort;
        /** The port we're normally going to use. */
    private static final String PORT_NAMES[] = {
            "COM30", // Windows
    };
    /**
    * A BufferedReader which will be fed by a InputStreamReader
    * converting the bytes into characters
    * making the displayed results code page independent
    */
    public BufferedReader input;
    /** The output stream to the port */
    public OutputStream output;
    /** Milliseconds to block while waiting for port open */
    private static final int TIME_OUT = 2000;
    /** Default bits per second for COM port. */
    private static final int DATA_RATE = 9600;

    public void initialize() {
        CommPortIdentifier portId = null;
        Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();

        //First, Find an instance of serial port as set in PORT_NAMES.
        while (portEnum.hasMoreElements()) {
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
            for (String portName : PORT_NAMES) {
                if (currPortId.getName().equals(portName)) {
                    portId = currPortId;
                    break;
                }
            }
        }
        if (portId == null) {
            System.out.println("Could not find COM port.");
            return;
        }

        try {
            // open serial port, and use class name for the appName.
            serialPort = (SerialPort) portId.open(this.getClass().getName(),
                    TIME_OUT);

            // set port parameters
            serialPort.setSerialPortParams(DATA_RATE,
                    SerialPort.DATABITS_8,
                    SerialPort.STOPBITS_1,
                    SerialPort.PARITY_NONE);

            // open the streams
            input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
            output = serialPort.getOutputStream();

            // add event listeners
            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    /**
     * This should be called when you stop using the port.
     * This will prevent port locking on platforms like Linux.
     */
    public synchronized void close() {
        if (serialPort != null) {
            serialPort.removeEventListener();
            serialPort.close();
        }
    }

    /**
     * Handle an event on the serial port. Read the data and print it.
     */
        public static String inputLine;
    public synchronized void serialEvent(SerialPortEvent oEvent) {
        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
            try {
                inputLine=input.readLine();
                                System.out.println(inputLine);

                                if (Main.inputLine.equals("1"));
                        {
                           BGMusicmaindc();
                        }
else
    System.out.println("");
            }
                        catch (Exception e) {
            //  System.err.println(e.toString());

            }
        }
        // Ignore all the other eventTypes, but you should consider the other ones.
    }

        public void BGMusicmaindc() { //Plays the background music
            //make a new AudioPlayer.
              AudioPlayer mynewBackgroundPlayer = AudioPlayer.player;

              AudioDataStream myLooop = null;
            //use a try block in case the file doesn't exist.
              try {
              AudioStream mynewBackgroundMusic = new AudioStream(new FileInputStream(new File(getClass().getResource(
                      "welcome.wav").toURI())));
              AudioData mynewData = mynewBackgroundMusic.getData();
              myLooop = new AudioDataStream(mynewData);
              }
              catch(Exception error) {JOptionPane.showMessageDialog(null, "Invalid file!");}

              // play background music.
              mynewBackgroundPlayer.start(myLooop);
        }

    public static void main(String[] args) throws Exception {
        Main main = new Main();
        main.initialize();
        Thread t=new Thread() {
            public void run() {
                //the following line will keep this app alive for 1000 seconds,
                //waiting for events to occur and responding to them (printing incoming messages to console).
                try {Thread.sleep(1000000);} catch (InterruptedException ie) {}
            }
        };
        t.start();
        System.out.println("Started");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T15:20:04.473

`if`这是我在语句不起作用时看到的常见错误。删除`;`此条件语句中的，它应该按预期工作：

```
if (Main.inputLine.equals("1"));  // <---- remove that ;
{
    BGMusicmaindc();
} 
```

**注意**：您也可以使用简单的`if`陈述（我个人的喜好）：

```
if (Main.inputLine.equals("1")) BGMusicmaindc(); 
```

# scala - Scala 类型参数的隐式转换

> ID：15720081
> 
> 赞同：0
> 
> 时间：2013-03-30T15:17:53.030
> 
> 标签：scala, generics, implicit-conversion, type-parameter

我正在尝试创建一个可以将距离从一个单位转换为另一个单位的库。理想情况下，我能够以一个单位指定距离，当传递给需要不同单位的方法时，让 scala 编译器自动转换它。这是我到目前为止所拥有的：

```
abstract class BaseUnit(scale: Option[Double] = None) {
  def unit: String

  def scalingFactor: Double = scale match {
    case Some(factor) => factor
    case None => 1.0
  }
}

object Cm {
  implicit def inch2cm(inch: Inch):Cm = new Cm(Some(0.393 * inch.scalingFactor))
}

class Cm(scale: Option[Double] = None) extends BaseUnit(scale) {
  def unit: String = "cm"
}

object Inch {
  implicit def cm2inch(cm: Cm):Inch = new Inch(Some(2.54 * cm.scalingFactor))
}

class Inch(scale: Option[Double] = None) extends BaseUnit(scale) {
  def unit: String = "inch"
}

class Distance[A <: BaseUnit](val scalar: Double, val unit: A) {
  override def toString: String = (scalar*unit.scalingFactor)+unit.unit
}

def foo(x: Distance[Cm], y: Distance[Cm]): String = x.toString()+","+y.toString() 
```

在没有明确说明类型参数的情况下使用它似乎使 Scala 使用该`Nothing`类型：

```
val a = new Distance(10, new Inch)                                         

println(foo(a, a))                                                               

> scala test.scala

 found   : this.Distance[Nothing]                                   
 required: this.Distance[this.Cm]                                   
Note: Nothing <: this.Cm, but class Distance is invariant in type A.
You may wish to define A as +A instead. (SLS 4.5)                   
println(foo(a, a))                                                  
            ^                                                       
one error found 
```

遵循编译器的建议会导致 foo 返回`10.0inch,10.0inch`而不是预期的`3.93cm,3.93cm`.

如果我明确指定类型，编译器会发现差异，但仍然不会隐式地将一个转换为另一个。

```
val a = new Distance[Inch](10, new Inch)

println(foo(a, a))                      

// found   : this.Distance[this.Inch]    
// required: this.Distance[this.Cm]      
//  println(foo(a, a))                     
//              ^                          
//  one error found 
```

我做错了什么，还是编译器不允许这种隐式转换的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:31:14.420

你只需要

```
class Distance[A <: BaseUnit](val scalar: Double, val unit: A) { ... } 
```

so that the compiler has a reason to not make `A` too specific. Otherwise it's free to choose `Nothing` since it's not related to anything that you're doing.

Also, you know how to convert between units, but you haven't taught it how to convert between distances. You can:

```
implicit def convertDist[A <: BaseUnit, B <: BaseUnit](da: Distance[A])(implicit a2b: (A => B)): Distance[B] = new Distance[B](da.scalar, a2b(da.unit)) 
```

or something like that. (As you define it now, the conversions are backwards, incidentally.)

# eclipselink - JPA 多个数据库 - 简单示例/最佳模式？

> ID：15720083
> 
> 赞同：1
> 
> 时间：2013-03-30T15:18:09.713
> 
> 标签：eclipselink, java-ee-6, managed-bean, database-partitioning

我有 2 个我正在尝试在一个简单的 Java EE Web 应用程序中使用的 mySql 数据库。为了简化场景，模式是相同的，例如，让我们在每个模式中使用***Customer***表。

我正在尝试为两个数据库中的两个客户表确定将“联合”结果返回到我的界面的最佳方式。到目前为止，我已经将 eclipselink 分区作为一种可能的途径。

作为替代方案，有没有办法“合并”2个实体类/EJB/托管Bean的“内容”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:57:06.687

您必须决定要在哪一侧联合 2 个数据库 - 在数据库或应用程序一侧。

首先，您可以按照@Mark Robinson 的建议为应用程序提供统一的视图。在这种情况下，您可以使用任何可用的数据库机制，对于应用程序来说，它只是一个简单的新实体。

第二，您可以`PersistenceContext`在应用程序中使用 2 个不同的并从其中一个获取实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:41:06.173

如果模式是真正相同的，那么您*可能*能够摆脱使用分区，但这样做会有一些问题。

分区通常在技术边界（范围、校验和等）上进行切片。我怀疑这些是由于其他原因而被划分的（即，一个数据库中的 HR，另一个数据库中的工程）。这将导致分区出现问题，因为它不知道要查看哪个数据库或要写入哪个数据库。

在您的情况下，我建议您创建一个“联合”模式，将两个数据库中的数据导入到一个统一的数据库中。它并不完美，但它会给你一个合适的查询界面。您可能想查看 MySQL 是否具有类似于 Oracle 的远程接口功能。

# sql - should i separate table different types contents or not?

> ID：15720084
> 
> 赞同：0
> 
> 时间：2013-03-30T15:18:15.230
> 
> 标签：sql, sql-server, database-design, entity-relationship, normalization

I am working on an ASP.Net website documentation. The website looks like c-sharpcorner.com that enables users to post Articles, questions, job opportunities, job request. while i am designing the website's ER diagram, i gets confused should i put all user's types of posts(articles,quests,hobs....etc) in one table and just make a type attribute to differentiate between them or should i separate each post type in an separated entity.. what is better? it is the same for me, but i need an expert to advise me what is the best way to handle that issue. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:38:03.273

If your ER diagram is intended to depict a conceptual data model, you can use generalization/specialization to present the fact that a post is one of several different types of post.

If your diagram is intended to depict a logical data model, using the relational model of data, you have a design decision to make.

One alternative is presented under this tag : [single-table-inheritance](/questions/tagged/single-table-inheritance "show questions tagged 'single-table-inheritance'").

Another alternative is presented under this tag: [class-table-inheritance](/questions/tagged/class-table-inheritance "show questions tagged 'class-table-inheritance'").

If you choose the second alternative, and you want to enforce the one-to-one relationship between the general posts table and each specialized table, check out this tag: [shared-primary-key](/questions/tagged/shared-primary-key "show questions tagged 'shared-primary-key'").

In all three tags, the info tab spells out the details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:00:58.143

There is no out of the box answer for your question because it’s solution specific.

Ask yourself following questions and you’ll get the answer yourself.

How many null fields are going to exist in the table? If you have column that is going to be used for posts only that means that column will be null for all other answer types. If you have a have a lot of null values in your database than it’s not really a good design.

How likely is that requirements going to change over time and that you’ll need to customize or more post types? The more likely you’ll need to customize later the better you’ll go with the separate table for each post type.

What is the relative number of posts for each type? If you’re going to have 90% answers that are one type and only 10% for all other types then it might be a good idea to separate tables and avoid performance issues when working with the 10%...

Again, there is no right or wrong answer here. You need to analyze your specific solution some more to come up with what’s best for you specifically.

# c++ - 如何存储英语词典？

> ID：15720087
> 
> 赞同：3
> 
> 时间：2013-03-30T15:18:24.107
> 
> 标签：c++, arrays, dictionary, vector

我正在编写一个 C++ 程序，它可以读取英文字典（按顺序），而不是进一步处理。

第一步，我决定将所有内容读取到二维数组中。

```
string dictionary[x][y]; 
```

where`x`的大小仅为 26，代表 AZ，`y`用于保存与`x`变量相关的单词。

但我无法预测它的大小`y`并且它是可变的，所以我不知道如何做到这一点。

其次，我听说了一个叫`vector`. 我怎样才能用`vector`它来做上面的设计？例如，使用 2D Vector，并使用第一个维度承载第一个字母，第二个维度承载单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:31:27.880

您可以使用`multimap`with`char`和`string`。

例子：

```
#include <iostream>
#include <map>
#include <fstream>
#include <string>

using namespace std;

multimap<char,string> dictionary;

void printLetter(char ch)
{
    for (auto it=dictionary.equal_range(ch).first; it!=dictionary.equal_range(ch).second; ++it)
    {
        cout << it->second << endl;
    }
}

int main()
{
    fstream file;
    file.open("file.txt");
    //Read the data from the file
    while(!file.eof())
    {
        string temp;
        file >> temp;
        dictionary.insert(pair<char,string>(temp[0],temp));
    }

    file.close();
    //Print all
    for(auto i: dictionary)
    {
        cout << i.first << ":" << i.second << endl;
    }
    //Print words starting with specific letter
    printLetter('A');

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:33:16.003

要直接回答您的问题，您可以：

```
std::vector<string> dictionary[26]; 
```

`dictionary[4]`现在是`vector`（如可变长度数组）`strings`

但是有更好的方法来存储排序字典。如果您从不添加单词，则可以将整个内容放入 a`std::vector<std::string>`并使用`std::sort(dictionary.begin(), dictionary.end())`. 或者，如果您需要添加/删除单词并始终保持排序列表，您可以使用`std::set<std::string>`始终排序的 a（当您插入单词时，它会将其放在正确的位置）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T15:54:09.863

如果你的编译器支持一些 c++11 特性

```
#include <algorithm>
#include <iterator>
#include <string>
#include <vector>

int main()
{       
    std::vector<std::vector<std::string> > dictionary(26);
    //'a' part
    dictionary[0].push_back("alien");
    dictionary[0].push_back("amend");
    dictionary[0].push_back("apple");

    //.......
    //'z' part
    dictionary[25].push_back("zero");
    dictionary[25].push_back("zoo");

    //sort all of the words after insert
    for(auto &strs : dictionary){
        std::sort(std::begin(strs), std::end(strs));
    }

    //find the specific words of 'a'
    auto const it = std::equal_range(std::begin(dictionary[0]), std::end(dictionary[0]), "apple");
    if(it.first != it.second){
        std::cout<<*(it.first)<<std::endl;
    }else{
        std::cout<<"The word do not exist"<<std::endl;
    }           

    return 0;
} 
```

如果没有，那么代码会变得有点乏味

```
#include <algorithm>
#include <string>
#include <vector>

int main()
{       
    std::vector<std::vector<std::string> > dictionary(26);
    //'a' part
    dictionary[0].push_back("alien");
    dictionary[0].push_back("amend");
    dictionary[0].push_back("apple");

    //.......
    //'z' part
    dictionary[25].push_back("zero");
    dictionary[25].push_back("zoo");            

    //you could use std::for_each if you like, I choose for loop because I
    //don't like to write so many trivial functor
    typedef std::vector<std::vector<std::string> >::size_type size_type;
    size_type const size = dictionary.size();
    for(size_type i = 0; i != size; ++i){
       std::sort(dictionary[i].begin(), dictionary[i].end());
    }

    //find the specific words of 'a'
    typedef std::vector<std::string>::const_iterator StrIter;
    std::pair<StrIter, StrIter> it = std::equal_range(dictionary[0].begin(), dictionary[0].end(), "apple");
    if(it.first != it.second){
        std::cout<<*(it.first)<<std::endl;
    }else{
        std::cout<<"The word do not exist"<<std::endl;
    }    

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-10T08:16:47.237

您应该使用 Trie 数据结构来存储字典。 [这是 Trie 的 C 实现](http://simplestcodings.blogspot.in/2012/11/trie-implementation-in-c.html)。你可以轻松地为 C++ 工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T15:31:57.640

您可以使用向量数组：`std::vector<string> dictionary[26]`. 这背后的想法与您的第一个想法相同（除了使用`std::vector::push_back()`方法将单词添加到行中；））

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T15:33:29.083

你可以把字典放在

```
 std::vector<std::pair< string,std::vector<string> > > 
```

结构，以便每个向量元素将在向量中包含一个字符和单词列表。

# c# - 通过索引和纹理大小给定位置，我如何计算我的 hextiles 位置？

> ID：15720088
> 
> 赞同：2
> 
> 时间：2013-03-30T15:18:32.717
> 
> 标签：c#, xna

我正在尝试创建一个六边形地图，如下所示：

[http://files.slembcke.net/misc/procedural/hex_tiles.png](http://files.slembcke.net/misc/procedural/hex_tiles.png)

但是我的函数将列表中的图块 X(row) 和 Y(column) 索引转换为屏幕位置时遇到了一些问题：

```
 public static Vector2 GetDisplayCoordOfTile(GameTile t, Texture2D texture)
        {
            Vector2 screenPadding = new Vector2(2, 2);

            float ypos = (t.Column * (texture.Height + 2)) - (t.Row * texture.Height / (float)2) + screenPadding.Y;
            float xpos = (t.Row * (texture.Width)) + screenPadding.X;

            return new Vector2(xpos, ypos);
        } 
```

有没有人知道事情在哪里变得混乱，我不能让我的想法围绕这个想法，因为坐标系与常规数组中的思考不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:28:36.640

这里有一个很棒的关于如何绘制六边形地图的教程： [http ://www.xnaresources.com/default.asp?page=Tutorial:TileEngineSeries:3](http://www.xnaresources.com/default.asp?page=Tutorial:TileEngineSeries:3)

此外，您可能会在此处获得更多帮助，询问您的游戏开发相关问题：[https ://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)

# hash - 如何在冲突中从 HashTable 中检索数据？

> ID：15720093
> 
> 赞同：1
> 
> 时间：2013-03-30T15:19:18.723
> 
> 标签：hash, hashmap, hashtable, hashcode, hash-collision

据此，[在](http://en.wikipedia.org/wiki/Hash_table)哈希表中搜索的时间复杂度为 O(1)。

但是，如果发生碰撞，那么显然这应该是 O(1) + 一些东西。

我的问题是：

当你说

```
get(someKey) 
```

从散列表中，散列函数应用于 someKey，并直接从该位置检索数据。

但是想象一下[分离链接](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining)用于冲突解决。并想象 someKey 和 someOtherKey 在我们的散列函数应用于它们之后具有相同的输出。假设它是值“25”。

所以当我说

```
get(someKey) 
```

我将从位置“25”获取数据。这使它成为 O(1)。伟大的。

然而当我说

```
get(someOtherKey) 
```

现在**someOtherKey**链接到**someKey**所在的位置。

当对**someOtherKey**应用散列时，我得到 25。

**我如何获得我需要的价值？内部是什么？还有别的表吗？算法流程如何？是否有其他表用于存储所有碰撞？**

谢谢你。我希望我的问题很清楚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:50:59.837

有许多不同的数据结构可以用于处理冲突。这是一个很好的总结。[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)。

The hash function narrows the search down to a single `bucket` in the data structure. The bucket then contains another data structure for resolving collisions. It can be link to an array, where the keys are maintained in a sorted or unsorted order. The link might be to the first element in a linked list of keys, or to the root node of a b-tree. The important point is that the hashing function very quickly narrows down the scope of the search.

Once the scope is narrowed, some other less-efficient search can be useful to work through the collisions. It's all about the trade-offs. You want a hashing algorithm that gives a large enough range of hashes (and buckets) to minimize collisions, limited to how much memory you can afford. If the collisions are rare, a linear search through a linked list of collisions isn't bad. If there many collisions, then the efficiency of re-sizing arrays for the buckets becomes more important.

# ios - 如果我正在制作 NSObject 子类的副本，是否需要复制其类型为“UIViewAnimationOptions”和类型为 BOOL 的属性？如果是这样，怎么做？

> ID：15720094
> 
> 赞同：0
> 
> 时间：2013-03-30T15:19:22.017
> 
> 标签：ios, objective-c, protocols, copy-constructor, nsobject

我有自己的 NSObject 子类，我用它来实现 NSCopying 协议。在我的`copyWithZone`方法中，我正在复制属性和值，例如

```
myCopy.boolProp = self.boolProp; 
```

但我想知道我应该如何复制 UIViewAnimationOptions 类型和 BOOL 类型的属性，因为它们不是具有复制方法的对象。如果稍后在副本上更改属性的值，我不希望它们在原件上更改。

如何确保复制非对象值而不是引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:23:29.887

赋值足以复制 BOOL 和枚举值等原始值。*在 Objective-C中*获得对它们的引用的唯一方法是创建一个指向它们的指针并复制它。

换句话说，您的示例代码很好。

# python - Using .split() inside for loops in Python gives an error

> ID：15720095
> 
> 赞同：0
> 
> 时间：2013-03-30T15:19:25.303
> 
> 标签：python, list, for-loop, split

Using the following code:

```
def printformatted(statuses):
    for status in statuses:
        statusid, statussummary = status.split(",",1)
        print "\nSnapshot id: %s" % statusid
        print   "Summary:     %s" % statussummary
    print 
```

`printformatted("1,Some summary")` gives me the error `ValueError: need more than 1 value to unpack`, whereas `printformatted(["1,Some summary"])` does not. Why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:22:15.920

In the first case, you're passing a string, so `for status in statuses` iterates over the string, character by character, which is not what you want.

In the second case, you're passing a list, so `for status in statuses` iterates over its elements, first element being `"1,Some summary"`.

# java - 有没有比 RMI 更快的 Java 二进制协议？

> ID：15720099
> 
> 赞同：3
> 
> 时间：2013-03-30T15:19:50.097
> 
> 标签：java, networking, rmi, netty, binary-data

RMI 是二进制网络协议的王者（速度方面），还是有其他具有更高基准速度的协议？

是否可以使用像 Netty 这样的东西来构建我自己的更快的二进制 (TCP) 协议？我是网络新手，并试图围绕可用的各种库和框架进行思考。提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:49:14.813

RMI 的速度受两件事支配：

1.  默认 Java 序列化
2.  分布式垃圾收集

默认的 Java 序列化可能会非常臃肿。`Externalizale`您可以通过实现和执行自己的基本序列化来使您的对象序列化更加轻量级。这已经开始看起来像是在做一个自定义协议。

如果您的系统变大并包含许多 JVM，分布式垃圾收集可能会成为一个因素。DGC 涉及 JVM 交换消息，以提醒对方注意垃圾回收的对象。它可能会产生大量网络流量。

That said, RMI "out of the box" can be faster than other "out of the box" alternatives. For example, SOAP can be much less efficient on the wire and involves a much deeper and heavier network stack than RMI.

You can build a faster custom RPC than RMI, but if you rely on Java serialization, it probably won't be much faster because of point #1 above.

Finally, why do you want a faster protocol? Are you having problems with the speed of RMI? Are you looking to pick the fastest "out of the box" solution upfront? Keep in mind [The rules of Optimize Club](http://www.perlmonks.org/?node_id=962631).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:34:42.683

RMI 需要处理元数据，它使用反射。如果您实现基于 TCP 和 DataOutputStream / DataInputStream 的自定义协议，它可能比 RMI 更快。

假设我们有一个 RMI 服务

```
 Service srv = (Service) Naming.lookup(lookupString);
 srv.sayHi("Jack");
 srv.sayBye("Back"); 
```

我们也可以通过 TCP 连接直接发送命令和参数

```
 ObjectOutputStream out = ...
 out.write(0);  // 0 - Hi command 
 out.writeUTF("Jack");
 out.write(1);  // 1 - Bye command
 out.writeUTF("Jack"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:40:49.530

[协议缓冲区](https://code.google.com/p/protobuf/)是序列化 java 对象的最紧凑的方法之一。

根据您的需要，您可以将其与您自己的传输协议（原始 tcp 套接字、udp、http ..）相结合

# android - Imagebutton 显示 imagebutton 的 id 但不显示图像

> ID：15720100
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:19:56.147
> 
> 标签：android, eclipse, imagebutton

我正在尝试在图像按钮上显示图像。我指定了一个没有错误的源图像，但在图形布局中，我看到的是图像按钮的 id 而不是它的源。

这是xml：

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="196dp" >

    <imageTruck
        android:id="@+id/truck"
        android:layout_width="58dp"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        android:src="@drawable/img_4932_filtered"
        android:onClick="imageChangerTruck" />

    <imageCar
        android:id="@+id/car"
        android:layout_width="52dp"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        android:src="@drawable/img_3972_filtered"
        android:onClick="imageChangerCar" />

    <imageBoat
        android:id="@+id/boat"
        android:layout_width="57dp"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        android:src="@drawable/img_6993_filtered"
        android:onClick="imageChangerBoat" />

    <imageBus
        android:id="@+id/bus"
        android:layout_width="32dp"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        android:src="@drawable/img_3165"
        android:onClick="imageChangerBus" />

    <imageMotorcycle
        android:id="@+id/motorcycle"
        android:layout_width="27dp"
        android:layout_height="70dp"
        android:scaleType="centerCrop"
        android:src="@drawable/img_0081"
        android:onClick="imageChangerMotorcycle" />

</LinearLayout> 
```

在我将其放入线性布局之前，代码运行良好。没有显示错误消息，但每次运行时应用程序都会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:35:37.333

而不是`<imageMotorcycle>`标签它不应该是`<imageButton>`标签？和其他每个图像按钮？

# css - Rails/bootstrap - 尝试在跨度内居中元素，但在缩小视口时跨越中心

> ID：15720101
> 
> 赞同：0
> 
> 时间：2013-03-30T15:20:02.567
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我正在容器中的一组跨度中显示条目。我想要一个图像和几行文本以跨度为中心。这工作正常。当我减小窗口的水平尺寸时，所有跨度都在容器的中心排列。有没有办法防止这种情况发生。这是代码：

```
<div class="well" style="padding-bottom:20px">
<div class="container">
<% @novels.each do |novel| %>
    <div class="span3">
        <div align="center"><%= link_to image_tag(novel.cover_thumbnail_url), novel %>
        <br />
        <%= link_to novel.name, novel%><br />
        <%= novel.edition %>
        </div>
    </div>
<% end %>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:58:48.093

我对他们的症状有点模糊，但也许这会有所帮助。

您是否尝试将整个语句包装在中心或使用 style="margin:0 auto" 因为 center 已弃用

[div style="margin:0 auto"]你的内容在这里[/div]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:50:26.017

我不确定这是否是你想要的？

注意 each_slice 的使用，这将导致 span4 内每行有 3 行记录

```
<div class="well" style="padding-bottom:20px">
  <div class="container">

    <% @novels.each_slice(3) do |set| %><!-- NOTE: each_slice -->
      <div class="row">

        <% set.each do |novel| %>
          <div class="span4">
            <div style="text-align:center">
              <%= link_to image_tag(novel.cover_thumbnail_url), novel %>
              <br />
              <%= link_to novel.name, novel %>
              <br />
              <%= novel.edition %>
            </div><!-- end center -->
          </div><!-- end span4 -->
        <% end %><!-- end set.each -->

      </div><!-- end row -->
    <% end %>

  </div><!-- end container -->
</div><!-- end well --> 
```

您可能想要清理它以使用部分，使其更容易查看

# django - 具有基于类的视图的 Django 简单 REST

> ID：15720104
> 
> 赞同：0
> 
> 时间：2013-03-30T15:20:11.850
> 
> 标签：django

我是 Django 的新手，我正在寻找一种方法来使基于类的视图通过类中的几种方法响应 GET、POST、PUT、DELETE。例如

*   索引#GET
*   显示#GET
*   新#GET
*   编辑#GET
*   创建#POST
*   更新#PUT
*   删除#DELETE

我的主要原因是将我的代码组织在一个类中。目前我正在使用一个类来处理新的和创建操作，另一个来处理编辑和更新操作。这感觉有点笨拙。

我使用过 Spring、Symfony、Rails，它们都提供了一种简单的方法来做到这一点。Django 似乎有很多选项（tastypie，rest-framework），但我看不到任何支持这一点的选项。有没有办法支持这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:45:30.287

我并不完全肯定，但我认为您将 REST 术语与“在单个类中处理不同类型的请求”混为一谈。rest-framework 和 Tastypie 将启用资源定义、序列化和反序列化、django 模型之间的管道、资源的标准化 API。

另一方面，仅使用[基于 django 类的视图](http://ccbv.co.uk/)，您可以获得所需的内容：在由 X、Y、Z 混合组成的单个类中回答不同类型的请求，并将单个 URL 指向它，但这并没有t使其完全“休息”。

使用单个 CBV 似乎是个好主意，但请记住，随着视图变得越来越复杂，最初的笨拙肯定会以更耦合的方式重新出现。

编辑：也许[django-extra-views](https://github.com/AndrewIngram/django-extra-views)可以在某种程度上帮助你。

# javascript - 如何使引导按钮下拉菜单可以通过键盘选择

> ID：15720107
> 
> 赞同：19
> 
> 时间：2013-03-30T15:20:36.213
> 
> 标签：javascript, jquery, twitter-bootstrap

引导按钮下拉：http: [//twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

当我选择一个按钮下拉菜单时，我想使用键盘向上/向下在菜单项之间导航，然后按 Enter 选择一个，就像[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-25T12:07:01.353

**Bootstrap 原生支持键盘导航。**

只需将***role="menu"***添加到您的***下拉菜单中***

这是一个例子，只需保存为.html并进行测试

```
<html>
<head>
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="btn-group">
    <button class="btn btn-default">1</button>
    <button class="btn btn-default">2</button>
    <button class="btn btn-default">3</button>
  <div class="btn-group">
    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">menu</button>
      <ul class="dropdown-menu" role="menu">
        <li> <a href="#">one</a> </li>
        <li> <a href="#">two</a> </li>
        <li> <a href="#">three</a> </li>
      </ul>
    </div>
  </div>
</body>
</html> 
```

[http://jsfiddle.net/damphat/WJS9p/](http://jsfiddle.net/damphat/WJS9p/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-09T20:48:19.447

在某些情况下这可能不起作用的可能原因：

*   因为您使用 a`<div>`或 a `<span>`for `.dropdown-toggle`。让它成为一个`<button>`，它会工作。奇怪的是，即使是这种元素也不起作用：`span.btn.btn-default`.
*   确保您的`<a>`每个元素内部`<li>`都有一个属性，`href="#"`或者`href=""`通常定义了该属性。
*   确保你有`role="menu"`on`.dropdown-menu`元素。

# php - beginner - obtain the top 3 in sql (taking same total score into account)

> ID：15720109
> 
> 赞同：-2
> 
> 时间：2013-03-30T15:20:44.463
> 
> 标签：php, mysql, sql

Hi I am trying to obtain the top 3 ranking and pass them to php, and if total score of two ID's are the same, both have the same rank. I tried to use `limit 0, 3` and `rank()` but only get the the first 3 records without taking same total score into account.

```
╔════╦════════════╗
║ ID ║ TOTALSCORE ║
╠════╬════════════╣
║  7 ║         20 ║
║  4 ║         20 ║
║  6 ║         18 ║
║  9 ║         18 ║
║  1 ║         16 ║
╚════╩════════════╝ 
```

Then, the ranking should be

```
╔══════╦════╗
║ RANK ║ ID ║
╠══════╬════╣
║    1 ║  7 ║
║    1 ║  4 ║
║    2 ║  6 ║
║    2 ║  9 ║
║    3 ║  1 ║
╚══════╩════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:27:40.247

Since `MySQL` do not support `Window Function` like any RDBMS has, you can still simulate what `DENSE_RANK()` can do by using *user define variables*, eg

```
SELECT  a.ID, a.TotalScore, b.Rank
FROM    TableName a
        INNER JOIN
        (
            SELECT  TotalScore, @rn := @rn + 1 Rank
            FROM
                    (
                        SELECT  DISTINCT TotalScore
                        FROM    TableName
                    ) a, (SELECT @rn := 0) b
            ORDER   BY TotalScore DESC
        ) b ON  a.TotalScore = b.TotalScore
WHERE   Rank <= 3 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/76e2e2/5)
*   [SQLFiddle Demo (*Another Example*)](http://www.sqlfiddle.com/#!2/a3eaeb/2)

OUTPUT

```
╔════╦════════════╦══════╗
║ ID ║ TOTALSCORE ║ RANK ║
╠════╬════════════╬══════╣
║  7 ║         20 ║    1 ║
║  4 ║         20 ║    1 ║
║  6 ║         18 ║    2 ║
║  9 ║         18 ║    2 ║
║  1 ║         16 ║    3 ║
╚════╩════════════╩══════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:31:17.470

You can do this with a correlated subquery:

```
select t.id, t.totalscore,
       (select count(distinct t2.totalscore) from t2 where t2.totalscore >= t.totalscore
       ) as rank
from t 
```

One advantage is that this is standard SQL that should run on any database.

# c - How do I #define an unsigned char* string?

> ID：15720112
> 
> 赞同：6
> 
> 时间：2013-03-30T15:20:58.643
> 
> 标签：c, c-preprocessor, unsigned-char, signedness

I have following define in my code

```
#define PRODUCTNAME     "SomeName" 
```

and I want to send it with a function `com_reply(unsigned char* msg, uint16_t lenght)`.

Now I get a warning that my argument differs in signedness. I know what the problem is and also why `com_reply` uses `unsigned char*` instead of `char*`, I just want to know:

How can I define my string as an `unsigned char*` so I can use it throughout my program without getting warnings all over the place.

EDIT:

Strictly speaking I have more than one defines here and the main reason is that there is a `BANNER` define which consists of several other defines, like this:

```
#define PRODUCTNAME     "SomeName"
#define PRODUCTDATE     "2013-03-30"
#define BANNER          PRODUCTNAME " (" PRODUCTDATE ")" 
```

Should I create const variables and concatenate them at program start instead of using defines here?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T15:38:54.087

This should work:

```
#define PRODUCTNAME     ((const unsigned char *)"SomeName") 
```

# javascript - Jquery - Cycle Through Spans, Assigning Width From Array

> ID：15720113
> 
> 赞同：0
> 
> 时间：2013-03-30T15:21:09.390
> 
> 标签：javascript, jquery, each

Is there a way to cycle through spans and assign each one an array value.

For example:

I have an array that contains the values [45,50,106]. Is there a way to cycle through when hovering over and applying a span one of the array values. So the first span it comes across gets given the width 45\. The second span that it comes across gets given the value 50 and so on?

```
// Multi-Expanding Icon Version:      
var widths = [];
$("ul#navigation-three").children('li').children('span:nth-child(2)').each(function(){
    widths.push($(this).width());
});

$('ul#navigation-three').hoverIntent(function () {    
    // Assign each span:nth-child(2) with the widths from the array in order
},

function () 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:39:20.607

Based on your comment, I assume you mean something like:

```
var widths=[10,20,30];
$("ul#navigation-three > li").children('span:nth-child(2)').each(function(index){
       $(this).animate({"width":+widths[index]+"px"}, 0); 
}); 
```

I used the index parameter given the the `each()` function

# jquery - 提交后 jQuery 加载，带有 if 语句

> ID：15720118
> 
> 赞同：0
> 
> 时间：2013-03-30T15:22:28.687
> 
> 标签：jquery, if-statement, load, submit

我的问题：单击提交按钮后，文档没有从 else if 语句加载 nsfw.html（不要评判我！）：
Jsfiddle：[jsfiddle.net/tKeYf/](http://jsfiddle.net/tKeYf/)
但我想它在那里不起作用，所以我将它上传到我的主机：[这里](http://arnolds.co.nf/this)

HTML：

```
<form>
    <input placeholder="Age" maxlength="3" size="3" type="text">
    <input type="submit" value="Okay">
</form> 
```

JavaScript：

```
$(document).ready(function () {
    // verification
    $('title').html('jQuery`s working!');
    // submit
    $('input[type=submit]').click(function () {
        var a = $('input[type=text]').val();
        if (a == '') {
            alert('Enter Your Age!');
        } else if (a < 18) {
            alert('You Shall Not Pass!');
        } else if (a >= 18) {
            alert('Welcome Aboard!');

            // Here's the problem!
            $('html').load('nsfw.html');
        } else {
            alert('Age Is A Number!');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:49:55.867

好吧，它并没有改变什么，但我发现这很有帮助，但我想，那个 window.close() 不会工作：`else if (a >= 18) {
alert('Welcome Aboard!');
window.close();
window.open('nsfw.html')
}`

# python - python中的if命令-轮盘赌模拟器

> ID：15720119
> 
> 赞同：0
> 
> 时间：2013-03-30T15:22:38.200
> 
> 标签：python, if-statement, printing

我正在尝试请求具有最小、最大和特定增量的特定投注金额。当我运行以下代码时，程序会循环遍历数组中的每个元素，而不是停止。

```
from pylab import *
import random
bank = 20000
betrange=range(100,20100,100)    
print "Hello Kathy, welcome to the Golden Brighton casino. We have reserved a high roller table for your bank of 20,000\. How much would you like to bet per spin? The table has a 100 minimum bet with a maximum of 20,000."
print "The available legal bets are as follows:"
bet=raw_input("Place your bets please:") 
for i in range(len(betrange)):
    if betrange[i] == bet: 
       print bet,"Your bet has been accepted, can you make a million?"
       break
    else:
       print bet,"Please enter a legal bet. The table minimum is 100, with a maximum of 20000 in increments of 100." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:25:49.663

看起来您的代码作为表达式比循环更好：

```
if 100 <= bet <= 20000 and bet%100 == 0:
    print bet,"Your bet has been accepted"
else:
    print bet,"Please enter a valid bet" 
```

# python - Python os.pipe 与 multiprocessing.Pipe

> ID：15720120
> 
> 赞同：12
> 
> 时间：2013-03-30T15:22:39.550
> 
> 标签：python, multithreading, multiprocessing, pipe, communication

最近在研究Python中的并行编程工具。这是 os.pipe 和 multiprocessing.Pipe 之间的两个主要区别。（尽管使用它们的场合）

1.  os.pipe 是**单向**的，multiprocessing.Pipe 是**双向**的；
2.  当将东西放入管道/从管道接收东西时， os.pipe 使用**encode/decode**，而 multiprocessing.Pipe 使用**pickle/unpickle**

我想知道我的理解是否正确，还有其他区别吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-15T03:34:00.913

我相信你所说的一切都是正确的。

On Linux, `os.pipe` is just a Python interface for accessing traditional POSIX pipes. On Windows, it's implemented using `CreatePipe`. When you call it, you get two ordinary file descriptors back. It's unidirectional, and you just write bytes to it on one end that get buffered by the kernel until someone reads from the other side. It's fairly low-level, at least by Python standards.

`multiprocessing.Pipe` objects are much more high level interface, implemented using `multiprocessing.Connection` objects. On Linux, these are actually built on top of POSIX sockets, rather than POSIX pipes. On Windows, they're built using the `CreateNamedPipe` API. As you noted, `multiprocessing.Connection` objects can send/receive any picklable object, and will automatically handle the pickling/unpickling process, rather than just dealing with bytes. They're capable of being both bidirectional and unidirectional.

# javascript - 将 div 定位在同一位置

> ID：15720128
> 
> 赞同：0
> 
> 时间：2013-03-30T15:23:14.057
> 
> 标签：javascript

我正在尝试使用 javascript 显示隐藏图像。代码工作正常，但图像显示在不同的位置。现在我想在同一个地方显示和隐藏图像。

```
 <script type="text/javascript"> 
    function showImage()
    {

        if(document.getElementById('check').checked==true)
        {
            document.getElementById("image").style.visibility = 'visible'; 
            document.getElementById("images").style.visibility = 'hidden'; 
        }
        else if(document.getElementById('check').checked==false)
        {
            document.getElementById("image").style.visibility = 'hidden'; 
            document.getElementById("images").style.visibility = 'visible'; 
        }

    }
</script>
<body onload="showImage()">
    <font align="left">
    <input type="checkbox" id="check" onclick="showImage()" />
    Show Image

    <div class="checkboxes" id = "image" >
        <img  class = "jive-image" height="125" src ="Tulips.jpg ">
    </div>
    <div id="images">
        <img class = "jive-image" height="125" src="Desert.jpg">
    </div>
</body> 
```

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:25:45.583

这是因为你正在使用`visibility`. CSS 的`visibility`样式不影响页面流。就好像您将 设置`opacity`为 0。相反，您可能想要使用`display`.

```
function showImage() {
    if(document.getElementById('check').checked) {
        document.getElementById("image").style.display = 'block'; 
        document.getElementById("images").style.display = 'none'; 
    } else {
        document.getElementById("image").style.display = 'none'; 
        document.getElementById("images").style.display = 'block'; 
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:26:58.243

如果您使用该`display`样式，您可以从页面中删除图像，而不仅仅是像`visibility`. 这将意味着底部图像被向上推，因为第一个不再占用空间。设置`element.style.display`为`'block'`显示元素并`'none'`隐藏它。

[jsFiddle](http://jsfiddle.net/guMYw/)

```
function showImage() {
    if (document.getElementById('check').checked == true) {
        document.getElementById("image").style.display = 'block';
        document.getElementById("images").style.display = 'none';
    } else if (document.getElementById('check').checked == false) {
        document.getElementById("image").style.display = 'none';
        document.getElementById("images").style.display = 'block';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:27:35.920

而不是设置可见性，将显示设置为无或阻止。

# powershell - 如何抑制 PowerShell 中的溢出检查？

> ID：15720138
> 
> 赞同：7
> 
> 时间：2013-03-30T15:23:48.267
> 
> 标签：powershell, integer-overflow, unchecked, unchecked-conversion

PowerShell 似乎在算术运算和转换之后执行边界检查。例如，以下操作失败：

```
[byte]$a = 255
$a++

$a = [byte]256 
```

有没有办法强制溢出或类型转换，而无需通过模或 C# 和 Add-Type 进行手动计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-17T03:26:14.917

The behavior you want in PowerShell is achievable, though, it's a bit of a hack; and maybe there's a better way.

If you just want cryptographic functionality though, it's worth calling out, that there's a TON of that already built-in to the BCL, and it's fully accessible from PowerShell (MD5, SHA, RSA, X509, a ton of other stuff too).

But if you're dead set on performing unchecked arithmetic in PowerShell, this is a hack that should give you what you want (basically we're embedding C# code, and using the unchecked keyword):

```
$members = @' 
public static UInt32 ToUInt32(int value)
{
    unchecked
    {
        return (UInt32)value;
    }
}

public static byte ToByte(int value)
{
    unchecked
    {
        return (byte)value;
    }
}
'@;

$type = Add-Type -Name "Convert" -Namespace "Helpers" `
        -MemberDefinition $members -PassThru -ErrorAction SilentlyContinue; 
```

**Usage:**

```
PS C:\Some\Folder> [Helpers.Convert]::ToUInt32(-1);
4294967295

PS C:\Some\Folder> [Helpers.Convert]::ToByte(-1);
255

PS C:\Some\Folder> [Helpers.Convert]::ToByte(256);
0 
```

**Of Note:**

*   We're calling `[Helpers.Convert]::To...` and *not* `[System.Convert]::To...`.
*   If you need other methods, the actual C# methods will need to be inserted into the `$members` block at the top of the code.
*   If you run `Add-Type` multiple times in a row for the same `Namespace` and `Name` combination, in the same PowerShell session, it will fail; and you will be left with the previously registered type. -- I've added `-ErrorAction SilentlyContinue` to ignore this specific scenario. -- That way, you can dump this code into a .ps1 script, and call it every single time, before you use them methods, and they will always be present. -- But if you are modifying the C# code and retesting, you will want to change the type name after every change you make; it's kind of painful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:47:28.773

PowerShell 是一种脚本语言，而不是编程语言，它不支持许多高级技术，例如重载运算符（在这种情况下会很方便）。

要添加到您已经建议的内容，您可以捕获错误。

```
[byte]$a = 255
try {$a++} catch {$a=1} 
```

或者编写你自己的函数并在那里做一些模数的乐趣。

# javascript - 使用 jQuery 将外部 JSON 文件拉入 javascript 变量

> ID：15720140
> 
> 赞同：0
> 
> 时间：2013-03-30T15:23:52.300
> 
> 标签：javascript, jquery, json, twitter-bootstrap

我一直在构建 Twitter Bootstrap Typeahead 插件的一些示例代码。

在脚本的早期开发版本中，我包含了以下内容，几乎直接从示例中提取，并进行了一些完美的自定义；

```
$('.building_selector').typeahead({
    source: function (query, process) {
        buildings = [];
        map = {};   
        var data = [{"buildingNumber":"1","buildingDescription":"Building One"},{"buildingNumber":"2","buildingDescription":"Building Two"},{"buildingNumber":"3","buildingDescription":"Building Three"}];
        $.each(data, function (i, building) {
            map[building.buildingDescription] = building;
            buildings.push(building.buildingDescription);
        });
        process(buildings);
},
updater: function (item) {
    selectedBuilding = map[item].buildingNumber;
    return item;    
},
}); 
```

在实践中，当我将选项数组直接写入代码时，这并没有多大用处，所以我一直在研究读取写入 JSON 的外部文件。我创建了一个文件，其中仅包含数组如下；

```
[{"buildingNumber":"1","buildingDescription":"Building One"},
{"buildingNumber":"2","buildingDescription":"Building Two"},
{"buildingNumber":"3","buildingDescription":"Building Three"}] 
```

我现在尝试更新 Javascript 以包含加载远程文件的代码。我可以验证文件是否存在并且位于正确的相对位置。

```
$('.building_selector').typeahead({
    source: function (query, process) {
        buildings = [];
        map = {};
        var data = function () {
            $.ajax({
                'async': false,
                'global': false,
                'url': "../json/buildings",
                'dataType': "json",
                'success': function (result) {
                    data = result;
                }
             });
            return data;
        }(); 

    $.each(data, function (i, building) {
        map[building.buildingDescription] = building;
        buildings.push(building.buildingDescription);
    });

process(buildings);
    },

updater: function (item) {
    selectedBuilding = map[item].buildingNumber;
    return item;    
},
}); 
```

在运行页面时，所有元素似乎都按预期工作，并且控制台中没有任何内容出现，直到您在文本字段内单击并正在输入。每次按键后，什么都没有发生，但控制台中会产生以下内容；

> 未捕获的类型错误：无法读取未定义的属性“长度”[jquery.min.js:3]

任何尝试解决此问题的想法/想法/起点将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:45:19.023

首先，我建议你使用 $.getJSON 而不是 $.ajax（你可以节省很多不必要的代码行）。// 在此处查看 $.getJSON 文档：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

Second, you have to reference the data variable according to its scope (when calling data var inside the success function, the scope has changed and the data var is not found, that is why it's throwing "Cannot read 'leangth' of undefined"). You have to set a self reference variable that points to the data variable scope.

This will help:

```
$('.building_selector').typeahead({
    source: function (query, process) {
        var buildings = [];
        var map = {};
        var self = this; //This is a self reference to use in the nested function of $.getJSON

        $.getJSON('../json/buildings', function(data){
            if ($.isArray(data)) {
                $.each(data, function (i, building) {
                    self.map[building.buildingDescription] = building;
                    self.buildings.push(building.buildingDescription);
                });
                process(self.buildings);
            }
        });
    },

    updater: function (item) {
        selectedBuilding = map[item].buildingNumber; // This won't work. I'd suggest to move the map variable as part of the top level object.
        return item;    
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:42:17.863

I shall add a little explaination of the point I reached in the end, as it's quite a change;

As the content of the JSON file is dynamic, but doesn't need to be called on every keypress, I decided to import it once, using `$.getJSON` inside a `$document.ready()`. It then writes the content into a global variable, which can be loaded by the source function exactly as before.

Here's the code for reference;

```
$('.building_selector').typeahead({
    source: function (query, process) {
        buildings = [];
        map = {};   
        $.each(buildinglist, function (i, building) {
            map[building.buildingDescription] = building;
            buildings.push(building.buildingDescription);
        });
        process(buildings);
    },
    updater: function (item) {
        selectedBuilding = map[item].buildingNumber;
        return item;    
    },
});
var buildingList;
$(document).ready(function() {
    $.getJSON('../json/buildings/', function(json){
        buildinglist = json;
    });
}); 
```

# iphone - How to get values from one of the Attributes using NSPredicate in Core Data

> ID：15720141
> 
> 赞同：2
> 
> 时间：2013-03-30T15:23:58.427
> 
> 标签：iphone, ios, core-data, nspredicate

I had a project based on Core Data.And one of the Attributes there is called "date",I want to get values from that attribute,and values beginsWith the string "2013-03",but I can only get the latest value ,such as string "2013-03-30", How can I get all values begin with "2013-03" into NSArray?

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Database" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"date beginsWith %@",value];
[fetchRequest setPredicate:predicate];
NSSortDescriptor *sortDescription = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
[fetchRequest setSortDescriptors:@[sortDescription]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:46:16.260

I work it out by myself NSMutableArray *array = [[NSMutableArray alloc] init];

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Database" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"date beginsWith %@",value];
[fetchRequest setPredicate:predicate];
NSSortDescriptor *sortDescription = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
[fetchRequest setSortDescriptors:@[sortDescription]];

NSError *fetchError = nil;
NSArray *fetchArray = [self.managedObjectContext executeFetchRequest:fetchRequest error:&fetchError];

if ([fetchArray count] > 0)
{
    for (Database *fetchResult in fetchArray)
    {
        [array addObject:fetchResult.date];
    }
}
return array; 
```

# iphone - 如何从动画制作视频

> ID：15720148
> 
> 赞同：0
> 
> 时间：2013-03-30T15:24:42.193
> 
> 标签：iphone, ios, objective-c

我正在尝试从动画创建视频，或将动画导出到视频。我知道我们可以从 UIImage 数组创建视频，但是如何从 UIImageView 的动画创建视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:26:04.787

您必须手动执行此操作。基本上你必须使用 AVAssetWriter 来生成一部电影，你需要为它提供每一帧。因此，您必须确定每个帧的 UIImageView 的状态，而不是使用 CAAnimation，并将其写入 AVAsset。我希望这有帮助。

# php - 加载 PHP 文件并根据选择设置变量

> ID：15720151
> 
> 赞同：0
> 
> 时间：2013-03-30T15:25:00.813
> 
> 标签：php, jquery

我需要根据用户在一个或多个选择字段中选择的内容使用 jquery 加载 PHP 文件的内容。

我可以用...

```
$("#first-choice").change(function() {
    $("#second-choice").load("getter.php?choice=" + $("#first-choice").val() );
}); 
```

...创建变量“选择”以及何时由用户设置“第一选择”字段。

但是，如果我想使用基于两个下拉选择器的 2 个变量来设置变量“choice”（基于#first-choice 的选择）和choice2（基于#second-choice 的选择）。

所以我想加载一个类似 getter.php?choice=first-choice&choice2=second-choice 的 PHP 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:04:22.803

这就是我将如何处理这种情况..

不要将您的选择视为 id。对所有选择选项使用单个类，然后使用基于类的选择器将 .change() 绑定到所有选择。如果这样做，您可以迭代 X 个选择，将它们的 id 用作查询参数变量，并将它们的值用作每个查询值。我在 jsfiddle 上为您创建了一个快速演示。我还在下面为您发布了代码......

[这是我在 jsfiddle 上的演示](http://jsfiddle.net/nickadeemus2002/WVPxQ/)

```
 <div>
    <select class="php-options" id='first-choice' name='first-choice'>
         <option value='1-0'>choose</option>
        <option value='1-1'>1-1</option>
       <option value='1-2'>1-2</option>
        <option value='1-3'>1-3</option>
        <option value='1-4'>1-4</option>
      <option value='1-5'>1-5</option>
    </select>
</div>
<div>
    <select class="php-options" id='second-choice' name='second-choice'>
        <option value='2-0'>choose</option>
        <option value='2-1'>2-1</option>
       <option value='2-2'>2-2</option>
        <option value='2-3'>2-3</option>
        <option value='2-4'>2-4</option>
      <option value='2-5'>2-5</option>
    </select>
</div>
<div id="request-url"></div>

$(document).ready(function(){
//treat your select options with classes,
//bind change event on each select
$('.php-options').change(function(e){
    var urlValues = [],
        parameterArgs = "";
    //loop selects to build parameters
    $('.php-options').each(function(i,v){
        var optValue = $(this).val(),
            optId=$(this).attr('id'),
            parameter = ""+optId+"="+optValue;
        urlValues.push(parameter);
    });
    //build parameter string
     parameterArgs =urlValues.join("&");

    //output query
    $('#request-url').text('getter.php?'+parameterArgs);        
}); 
```

});

# algorithm - 查找 MST 的所有关键边

> ID：15720155
> 
> 赞同：8
> 
> 时间：2013-03-30T15:25:38.833
> 
> 标签：algorithm, graph-theory, graph-algorithm, minimum-spanning-tree

我从 Robert Sedgewick 的算法书中得到了这个问题。

> **临界边缘。**从图中删除会导致 MST 权重增加的 MST 边称为临界边。展示如何在与 E log E 成比例的时间内找到图中的所有关键边。注意：这个问题假设边权重不一定不同（否则 MST 中的所有边都是关键的）。

请提出解决此问题的算法。

我能想到的一种方法可以及时完成工作 EV 我的方法是运行 kruskal 算法。

但是每当我们遇到一条边，它在 MST 中的插入创建了一个循环，并且如果该循环已经包含具有相同边权重的边，那么，已经插入的边将不是关键边（否则所有其他 MST 边都是关键边） .

这个算法正确吗？我怎样才能扩展这个算法来及时完成 E log E 的工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T18:57:59.260

我认为您建议的边缘至关重要时的条件是正确的。但是没有必要实际找到一个循环并测试它的每个边缘。

The Kruskal algorithm adds edges in increasing weight order, so the sequence of edge additions can be broken into blocks of equal-weight edge additions. Within each equal-weight block, if there is more than one edge that joins the same two components, then all of these edges are non-critical, because any one of the other edges could be chosen instead. (I say they are *all* non-critical because we are not actually given a specific MST as part of the input -- if we were then this would identify a particular edge to call non-critical. The edge that Kruskal actually chooses is just an artefact of initial edge ordering or how sorting was implemented.)

But this is not quite sufficient: it might be that after adding all edges of weight 4 or less to the MST, we find that there are 3 weight-5 edges, connecting component pairs (1, 2), (2, 3) and (1, 3). Although no component pair is joined by more than 1 of these 3 edges, we only need (any) 2 of them -- using all 3 would create a cycle.

For each equal-weight block, having weight say w, what we actually need to do is (conceptually) create a new graph in which each component of the MST so far (i.e. using edges having weight < w) is a vertex, and there is an edge between 2 vertices whenever there is a weight-w edge between these components. (This may result in multi-edges.) We then run DFS on each component of this graph to find any cycles, and mark every edge belonging to such a cycle as non-critical. DFS takes O(nEdges) time, so the sum of the DFS times for each block (whose sizes sum to E) will be O(E).

Note that Kruskal's algorithm takes time O(Elog E), not O(E) as you seem to imply -- although people like Bernard Chazelle have gotten close to linear-time MST construction, TTBOMK no one has got there yet! :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T18:24:21.737

是的，你的算法是正确的。我们可以通过比较 Kruskal 算法的执行与类似的执行来证明，其中一些 MST 边 e 的成本变为无穷大。在第一次执行考虑 e 之前，两次执行都是相同的。在 e 之后，第一次执行的连通分量比第二次少一个。这种情况一直持续到边缘 e' 被认为在第二次执行中加入了 e 将具有的组件。由于边 e 是迄今为止构建的森林之间的唯一区别，因此它必须属于由 e' 创建的循环。在 e' 之后，执行做出相同的决定，森林中的不同之处在于第一个执行有 e，第二个执行有 e'。

实现此算法的一种方法是使用动态树，这是一种表示标记森林的数据结构。此 ADT 的一种配置支持以下**对数时间**方法。

*   MakeVertex() - 构造并返回一个新的顶点。
*   Link(u, c, v) - 顶点 u 和 v 不得连接。创建从顶点 u 到顶点 v 的无标记边，成本为 c。
*   Mark(u, v) - 顶点 u 和 v 必须是边 e 的端点。标记 e。
*   Connected(u, v) - 表示顶点 u 和 v 是否连接。
*   FindMax(u, v) - 顶点 u 和 v 必须连接。返回从 u 到 v 的唯一路径上具有最大成本的未标记边的端点以及该成本。该边的端点按照它们出现在路径上的顺序给出。

我没有声称这在实践中是一个很好的算法。动态树，如瑞士军刀，用途广泛但复杂，通常不是完成这项工作的最佳工具。我鼓励您考虑如何利用这样一个事实，即我们可以等到所有边缘都被处理后才能确定关键边缘是什么。

# css - 如何在没有（以JS为例）的情况下使矩阵动态调整到父宽度

> ID：15720156
> 
> 赞同：0
> 
> 时间：2013-03-30T15:25:41.167
> 
> 标签：css, matrix

请参阅此示例（[http://jsfiddle.net/cpSbH/2/](http://jsfiddle.net/cpSbH/2/)）并尝试调整窗口大小以了解我的意思 - 它正在调整边距以在一行上获得尽可能多的项目，同时也充分利用空间并避免一侧的间隙（或两者如果它会居中）。

没有javascript就可以实现吗？

谢谢

我写的代码：

HTML：

```
<div id="wrapper">
 <div class="item">item</div>
 ...
 <div class="item">item</div>
</div> 
```

JS：

```
$(window).resize(function(){
  var minMargin = 10;
  var width = $("#wrapper").innerWidth();
  var itemWidth = $('.item').outerWidth()+minMargin+minMargin

  var count = Math.floor(width/itemWidth)
  var space = width - (count*itemWidth);
  var margin = (space/(count));

  if(margin < minMargin) margin = minMargin;

  margin = Math.floor(margin/2);
  $('.item').css({'margin-left':margin,'margin-right':margin}); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:17:25.700

使用 flexbox 模型，您只需使用 CSS 即可实现所需的行为。主要问题将是浏览器兼容性。
你的 CSS 可能看起来像这样：

```
#wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around; /*or space-between*/
}
.item {
    flex: 1;
} 
```

在[这个答案](https://stackoverflow.com/a/14796479/931340)中，您有一些链接可以了解有关弹性模型的更多信息。

# jquery - Raphael SVG 路径上的鼠标悬停工具提示

> ID：15720159
> 
> 赞同：0
> 
> 时间：2013-03-30T15:25:49.403
> 
> 标签：jquery, svg, raphael

我使用 Raphael Sketchpad（Raphael 下的一个库）来绘制 SVG 路径。我想在路径上发生鼠标悬停事件时触发事件，但是我尝试了所有可以在此主题上找到的示例，但没有任何帮助，当我点击路径元素时，鼠标悬停事件没有触发，悬停我可以轻松附加将鼠标悬停在 SVG 容器的事件侦听器上，但这不是我想要实现的。

下面是呈现的 HTML 的片段

```
 <div id="sketchpad" style="-moz-user-select: text;">
            <div class="box" id="demo-mouse" style="-moz-user-select: text;">

                <div style="background-color: rgba(255, 255, 255, 0.3); cursor: crosshair; -moz-user-select: text;" id="canvas">
<svg height="750" version="1.1" width="1200" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; -moz-user-select: text;"><desc>Created with Raphaël 2.1.0</desc><defs/>
<path style="stroke-opacity: 1; stroke-linecap: round; stroke-linejoin: round;" fill="none" stroke="#000000" d="M287,226L311,259L337,280L349,287L359,294L378,309L396,318L399,320L405,323L406,325L408,328L409,328L410,329L411,329L413,326L414,320L416,296L418,280L418,267L420,233L423,220L427,208L430,186L432,177L432,174L432,160L432,157L432,150L430,139L429,134L429,129" stroke-opacity="1" stroke-width="1" stroke-linecap="round" text-anchor="" stroke-linejoin="round" transform="matrix(1,0,0,1,0,0)"/>
                </div>

            </div>
        </div> 
```

JS代码，放在一个document.ready里面：

```
$(document).ready(function () {
$("#sketchpad path").on("mouseover", function() {
   console.log("HIT"); // Nothing happens
})
}); 
```

有什么建议么？

我的目标是在鼠标碰到路径（如 QTip）时在鼠标位置上显示一个工具栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:03:47.207

试试这个

```
$("#sketchpad").on("mouseover", "path", function() {
   console.log("HIT");
}) 
```

甚至更好 - 使用 Raphael 的本机方法**Element.mouseover** [http://raphaeljs.com/reference.html#Element.mouseover](http://raphaeljs.com/reference.html#Element.mouseover)

# flash - 是否可以在 AIR 3.6 项目中的 SQLite 中的 1 个查询中将超过 500 行的数据添加到数据库中？

> ID：15720164
> 
> 赞同：0
> 
> 时间：2013-03-30T15:26:21.390
> 
> 标签：flash, sqlite, air, insert

我正在 Flash (AIR 3.6) 中创建 iPad 应用程序。我需要使用 SQLite 数据库引擎同步大量数据。我正在从服务器接收 JSON 格式的数据，需要将其转换为数据向量。

据我所知，Flash SQLite 引擎一次只允许 1 个 INSERT 进程，因此我决定在 1 个查询中添加尽可能多的内容。我将 UNION ALL 与 INSERT 一起使用，但我遇到了 500 个联合的限制，之后 SQLite 引擎拒绝合作。

因此，我必须创建一个结构，该结构最多可添加 500 个带有联合的插入并运行，直到所有数据都以这种方式插入。对于 2k+ 行，它循环大约 5 次。我试图逐个插入数据，但它花费了现在的 300 倍。

最后：在 AIR 3.6 项目中的 SQLite 中，是否可以在 1 次查询中将超过 500 行的数据添加到数据库中？

**编辑：**

在一个事务中使用许多 INSERT 似乎不起作用：

```
var sql:String = "";
sql +=  "INSERT INTO TablicaTestowa (formTypeId,name,timestamp) VALUES ('abc2','nazwa2','sg535');"
sql +=  "INSERT INTO TablicaTestowa (formTypeId,name,timestamp) VALUES ('abc3','nazwa3','gwt5htbsd');"
sql +=  "INSERT INTO TablicaTestowa (formTypeId,name,timestamp) VALUES ('abc4','nazwa4','frtgwh3jwdsed');"
createStmt.text = sql;
createStmt.addEventListener(SQLEvent.RESULT, createResult2);
createStmt.addEventListener(SQLErrorEvent.ERROR, createError2);
createStmt.execute(); 
```

仅添加第一个值（'abc2'、'nazwa2'、'sg535）。或者也许我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:37:28.433

您不需要使用单个`INSERT`查询；您可以将多个 s 包装`INSERT`到一个事务中以获得相似的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T14:02:24.693

当然可以 ！

```
public void putAll(Context context, LinkedList<HANDLEDOBJECT> objects) {
    if (objects.size() < 1 || objects.get(0) == null)
        return;
    Log.i("Database", "Starting to insert objects to " + getTableName());

    List<String> insertCommands = new ArrayList<String>();
    int t = 0;
    while (t < objects.size()) {
        int k = 0;
        StringBuilder sb = new StringBuilder();

        sb.append("INSERT OR REPLACE INTO ").append(getTableName())
                .append("('k', 'v') ");
        for (t = t + 0; t < objects.size() && k < 450; t++) {
            k++;
            if (t % 450 != 0)
                sb.append("UNION ");
            sb.append("SELECT " + objects.get(t).getId())
                    .append(" AS k, ")
                    .append("'"
                            + GsonSerializer.getInstance().toJson(
                                    objects.get(t), getHandledObjectType())
                            + "'").append(" AS v ");

        }

        insertCommands.add(sb.toString());
    }

    for (String insertCommand : insertCommands)
        SQLiteClient.getConnetion(context).execSQL(insertCommand);

    Log.i("Database", "Successfully inserted " + t + " objects to "
            + getTableName() + "!!!");
} 
```

# java - JButton 不适用于文本字段

> ID：15720165
> 
> 赞同：0
> 
> 时间：2013-03-30T15:26:21.687
> 
> 标签：java, swing, user-interface, jbutton, jtextfield

我在使用这个 GUI 时遇到了一些麻烦。我是制作 GUI 的新手，所以如果它是基本的东西，我很抱歉问。我似乎无法在谷歌的任何地方找到我的问题的答案。我遇到的问题是，当我单击任何一个按钮时，当任何一个文本字段为空时都会出现错误。到目前为止，这是我的代码

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JOptionPane;

public class MainGUI extends JFrame implements ActionListener{

ArrayList<Object> list;
JTextField name, surname, age, height, weight;
JComboBox<String> sportList, gender;
JButton btnSave;
JButton btnExit;
JButton btnclrtxt;

/**
 * @param args
 */
public MainGUI() {
    super("Adding members");
    this.setLayout(new BorderLayout());
    JPanel panel = new JPanel(new FlowLayout());
    name = new JTextField(10);
    surname = new JTextField(10);
    age = new JTextField(10);
    height = new JTextField(5);
    weight = new JTextField(10);
    gender = new JComboBox<String>(new String[] { "Male", "Female" });
    sportList = new JComboBox<String>(new String[] { "Football",
            "HandBall", "BasketBall", "Rugby", "Hockey", "Tennis" });

    panel.add(new JLabel("Name:"));
    panel.add(name);
    panel.add(new JLabel("Surname:"));
    panel.add(surname);
    panel.add(new JLabel("Age:"));
    panel.add(age);
    panel.add(new JLabel("Gender:"));
    panel.add(gender);
    panel.add(new JLabel("Height:"));
    panel.add(height);
    panel.add(new JLabel("Weight:"));
    panel.add(weight);
    panel.add(new JLabel("Sport Speciality:"));
    panel.add(sportList);

    btnSave = new JButton("Save member");
    panel.add(btnSave);
    btnSave.addActionListener(this);

    btnclrtxt = new JButton("Clear text");
    panel.add(btnclrtxt);
    btnclrtxt.addActionListener(this);

    btnExit = new JButton("Exit");
    panel.add(btnExit);
    btnExit.addActionListener(this);

    this.pack();
    this.add(panel);
    this.setSize(400, 300);
    this.setVisible(true);
    this.setLocationRelativeTo(null);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

public static void main(String[] args) {
    new MainGUI();
          }

public void actionPerformed(ActionEvent e) {

            String namestr = name.getText().toLowerCase();
    String surnameStr = surname.getText().toLowerCase();
    int ageNum = Integer.parseInt(age.getText().toLowerCase());
    double heightNum = Double.parseDouble(height.getText().toLowerCase());
    double weightNum = Double.parseDouble(weight.getText().toLowerCase());
    String sportsStr = sportList.getSelectedItem().toString();
    String genderStr = gender.getSelectedItem().toString();

              if(e.getSource()==btnSave)  {
        list = new ArrayList<Object>();
        list.add("Name is "+namestr);
        list.add("Surname is "+surnameStr);
        list.add("Age is "+ageNum);
        list.add("Height is "+heightNum);
        list.add("Weight is "+weightNum);
        list.add("Sport "+sportsStr);
        list.add("Gender "+genderStr);
        FileRead.writeFile(list);
        System.out.println("Done!");
                }

    if(e.getSource()==btnExit)  {
                dispose();
                                    System.exit(0);
                           }

    if(e.getSource()==btnclrtxt)  {
         name.setText("");
         surname.setText("");
         age.setText("");
         height.setText("");
         weight.setText("");
               }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:43:51.627

wotking，但你不测试 if `JTextField.isEmpty`，然后解析抛出正确的异常，而不是使用

*   `JFormattedTextField`使用`NumberFormatte`r，则默认值是 0（零）

*   `JSpinner`，`SpinnerNumberModel`则默认值是 0（零）

*   通过过滤非数字字符添加`DocumentFilter`到纯`JTextField`文本，但仍需要测试 if `JTextField.isEmpty(`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:45:01.597

我怀疑这是因为这些字段：

```
int ageNum = Integer.parseInt(age.getText().toLowerCase());
double heightNum = Double.parseDouble(height.getText().toLowerCase());
double weightNum = Double.parseDouble(weight.getText().toLowerCase()); 
```

如果这些字段中的任何一个为空或包含不正确的值，解析将抛出异常；确保检查它们是否包含（有效）值。例如，使用[JFormattedTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)。

# android - Android解析XML文件空指针异常

> ID：15720167
> 
> 赞同：0
> 
> 时间：2013-03-30T15:26:42.297
> 
> 标签：android, xml, parsing, nullpointerexception

我有一个读取 XML 文件、解析它并将单个元素加载到数组中的方法。代码本身在包含在 Activity 类中时可以工作。它需要从 2 个不同的活动中使用，因此我创建了一个实用程序类，以便我可以从所需的每个活动中调用一个副本。但是，当它从实用程序类运行时，我得到一个空点异常。这告诉我，我正在打破我能做什么以及从哪里做的规则。我怀疑这与对资源的访问有关，因为我还尝试访问字符串资源（仅作为测试），这也引发了 NPE。

这是实用程序类。第一个 Log.i 出现在 LogCat 中，但第二个没有。

```
class Utils extends MainActivity
{
String debugTag          = DEBUG_TAG + "/Utils";

public void loadRankFile() throws XmlPullParserException, IOException
{       
    int     eventType      = -1;
    boolean boolFoundRanks = false;
    int     intCounter     = 0;

    // this line appears in LogCat      
    Log.i(debugTag, "Inside loadRankFile utility.");

    // this line causes the NPE     
    XmlResourceParser scoutRanks = getResources().getXml(R.xml.scoutranks);

    // this line does not appear in LogCat      
    Log.i(debugTag, "xml file loaded");
.
.
.
} 
```

这是上面调用该方法的 Activity 的代码：

```
public class RankProgressActivity extends MainActivity
{
String debugTag          = DEBUG_TAG + "/RankProgressActivity";

Utils utilities = new Utils();

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rank_progress);

    try
    {
        initSelectScout();
        utilities.loadRankFile();
        initSelectRank();
    }
    catch (IOException e)
    {
        Log.i(debugTag, "Failure initializing Scout Progress activity items", e);
    }       
    catch (XmlPullParserException e)
    {
        Log.e(debugTag, "Rank file parse error.", e);
    }
.
.
.
} 
```

我确定我犯了一个典型的错误，但我没有看到它，而且我还没有找到指导。对于任何反馈，我们都表示感谢。我对 Java 和 Android 还很陌生，所以这对我来说是一次非常重要的学习经历。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:33:53.887

您的 Utils 类不应扩展[Activity](http://developer.android.com/reference/android/app/Activity.html)。活动是您面向用户的界面，这意味着当您想要向用户显示某种 UI 时，您需要实现一个活动。阅读[Activity](http://developer.android.com/reference/android/app/Activity.html)的文档。

您的 Utils 类应如下所示：

```
class Utils
{
    private static final String DEBUG_TAG = "Utils";

    public ArrayList<String> parseRankFile(Context context) throws XmlPullParserException, IOException
    {       
        ArrayList<String> scoutRanks = new ArrayList<String>();

        Log.i(DEBUG_TAG, "Inside loadRankFile utility.");
        XmlResourceParser scoutRanksParser = context.getResources().getXml(R.xml.scoutranks);
        Log.i(DEBUG_TAG, "xml file loaded");

        // do your parsing and populate the scoutRanks ArrayList

        return scoutRanks;
    }
} 
```

然后在您的 Activity 中，您将像这样调用 Utils 方法：

```
ArrayList<String> scoutRanks = Utils.parseRankFile(this); 
```

# android - 如何使用android根据传入的分机号码将呼叫转移到指定的电话号码？

> ID：15720168
> 
> 赞同：0
> 
> 时间：2013-03-30T15:26:46.157
> 
> 标签：android

这个问题听起来有点奇怪，也许不可能，但我确实需要做这样的事情，我需要一个便宜的解决方案。

我想做的是使用Android手机根据分机号码将来电转接到指定号码。虚拟现实有可能吗？我没有真正的分机，只有一个只有一个电话号码的 Android 设备，所以这就是我考虑分机号码的原因，我认为这是用手机识别目标号码的唯一方法。

样本：

```
My number: 00491234567
When user calls 00491234567-01 it will ring at 00490987654
When user calls 00491234567-02 it will ring at 00490456789 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:54:55.930

您所要求的需要由电话交换网络提供，而不是电话本身。

当有人拨打`00491234567-01`他们的电话时，该号码将被拒绝为格式错误，或者`-01`添加将被忽略并且不会通过呼叫控制协议发送。

# xml - 在 clojure 和 compojure 中缓存 xml 文件

> ID：15720172
> 
> 赞同：0
> 
> 时间：2013-03-30T15:27:06.137
> 
> 标签：xml, multithreading, caching, clojure, compojure

我有一个网络服务器正在运行`compojure`。Web 服务器从另一个服务器提供的 XML 文件中读取数据。我不想用请求轰炸文件的提供者，而且 XML 文件不会经常更改，所以我想我需要某种缓存。

我可以在本地存储 XML 文件并每*X*分钟刷新一次。另一种方法是在相同的时间间隔内重新解析原始文件并将文件存储在内存中？也许我可以使用`refs`或`atoms`为此？这个过程可能应该在不同的线程中运行。我将如何配置它？

将来我可能会拥有大量需要更新的 XML 文件。

哪种方法是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:13:44.727

我认为你可以从`core.memoize`图书馆开始：

[https://github.com/clojure/core.memoize](https://github.com/clojure/core.memoize)

稍后，您总是可以转移到更复杂且与 JVM 内存分离的东西 - 例如 Redis 或 memcached。

# javascript - 如何在不设置完整 url 地址的情况下转到同一服务器中的 url - JavaScript（带/不带）jQuery

> ID：15720175
> 
> 赞同：0
> 
> 时间：2013-03-30T15:27:38.753
> 
> 标签：javascript, jquery

我知道怎么去链接/url/地址，比如；

```
window.location = "www.example.com/index.html"; 
```

或者

```
document.location.href="www.example.com/index.html"; 
```

但是假设我想从 to 导航`index1.html`，`index2.html`我如何在不提供`www.example.com/`前缀的情况下实现这一点？请不要建议我设置`www.example.com/`一个全局变量/常量。地址可能会更改为`www.example2.com/subfolder1/subfolder2/`....`www.examplea.com/`上述方法仅适用于**根**页面。我的意思是`document.location.href="index.html";`，`rootdomain/index.html`即使我住在`rootdomain/section1/section2/somepage.html`. 但我想导航到`rootdomain/section1/section2/index.html`

我怎样才能通过只提供页面名称来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:31:08.850

如果`/`字符串的开头有 a，它将转到本地页面：

```
window.location = "/index.html" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:30:50.473

`window.location.pathname = 'index2.html';`

您也可以只在`document.location.href`.

可能更好的是`window.location.assign('index2.html');`。当您在 www.example.com/foo/.../index1.html 并且不想指定到达 www.example.com/foo/.../index2 的整个路径时，这尤其有用.html。

有关更多选项，请参阅[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:31:06.603

就像您不这样做一样，但使用相对路径：

```
document.location.href = '/index2.html'; //relative path 
```

# python - Python 的 isdigit() 方法对负数返回 False

> ID：15720176
> 
> 赞同：1
> 
> 时间：2013-03-30T15:27:39.920
> 
> 标签：python, integer

我有一个文本文件，我读到了一个列表。此列表包含整数和字符串。

例如，我的列表可能如下所示：

```
["name", "test", "1", "3", "-3", "name" ...] 
```

现在，我想使用`.isdigit()`方法或`isinstance()`函数将所有数字转换为整数。例如：

```
for i in range len(mylist):
    if mylist[i].isdigit():
        mylist[i] =  int(mylist[i]) 
```

问题是`"-3".isdigit()`例如会返回`False`. 有关规避问题并将负数字字符串转换为负整数的简单解决方案的任何提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T15:29:01.773

该方法仅测试*数字*，而`-`不是数字。如果要检测整数，则需要测试`int()`并捕获异常：`ValueError`

```
for i, value in enumerate(mylist):
    try:
        mylist[i] = int(value)
    except ValueError:
        pass  # not an integer 
```

换句话说，*不需要*显式测试；只需转换并捕获异常。请求宽恕而不是请求许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:29:39.073

尝试一下，如果失败则捕获异常：

```
try:
    return int(obj)
except ValueError:
    ... 
```

Python 认为*请求宽恕比请求许可更容易*。在你跳跃之前查看通常更慢，更难阅读，并且经常会引入竞争条件（不是在这种情况下，而是在一般情况下）。

此外，像这样就地修改列表是一个坏主意，因为在 Python 中通过索引访问很慢。相反，考虑使用这样的[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
def intify(obj):
    try:
        return int(obj)
    except ValueError:
        return obj

mylist_with_ints = [intify(obj) for obj in mylist] 
```

这将使用修改后的值创建一个新列表，并且更具可读性和效率。

请注意，由于我们只是将函数应用于列表的每个项目，`map()`因此在这里也可以很好地工作：

```
mylist_with_ints = map(intify, mylist) 
```

Note that if you need a list instead of an iterable in 3.x, you will want to wrap the map call in `list()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:29:57.483

The way to convert to integers is to try the conversion and be prepared for it to fail:

```
for i in range(len(mylist)):
    try:
        mylist[i] = int(mylist[i])
    except ValueError:
        pass 
```

# wpf - WPF DataGrid 显示多种类型

> ID：15720182
> 
> 赞同：5
> 
> 时间：2013-03-30T15:27:56.767
> 
> 标签：wpf, wpfdatagrid

在 WPF 数据网格中显示多种类型的数据的最佳方式是什么。例如类别和产品：

```
| 产品名称 | 说明 | 价格 |
--------------------------------------
IT - 类别
--------------------------------------
  监视器 - 类别
--------------------------------------
| 监视器 1 | ... | 100 美元 |
| 监视器 2 | ... | 99 美元 |
| 监视器 3 | ... | 120 美元 |
--------------------------------------
  硬盘 - 类别
--------------------------------------
| 硬盘 1 | ... | 50 美元 |
| 硬盘 2 | ... | 45 美元 |
--------------------------------------
电子类
--------------------------------------
 ...

```

我想显示在产品列的顶部，并更改类别的模板。我知道有一个单元格模板选择器，但是有没有办法为整行指定一个模板选择器？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:40:19.640

如果您`CollectionViewsource`为您的数据创建一个，您可以`PropertyGroupDescription`在集合中使用`GroupDescriptions`您希望的属性对所有数据进行分组。

然后在 中`DataGrid`您可以创建一个`GroupStyle`来显示一个`TextBlock`或一些东西来分隔您在 中的所有组`DataGrid`。

这是一个完整的工作演示，因为它比解释更容易展示:)

xml:

```
<Window x:Class="WpfApplication20.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="505" Width="525" Name="UI">

    <Window.Resources>

        <!--Create CollectionViewSource and set the property you want to group by-->
        <CollectionViewSource x:Key="MyItems" Source="{Binding Items, ElementName=UI}">
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Category" />
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource>
    </Window.Resources>

    <Grid>
        <DataGrid ItemsSource="{Binding Source={StaticResource MyItems}}">
            <DataGrid.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <!--Name property is the GroupName created by the CollectionViewSource-->
                                <TextBlock Text="{Binding Path=Name}" Margin="10,0,0,0" FontSize="18" FontWeight="Bold"/>
                            </StackPanel>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
            </DataGrid.GroupStyle>
        </DataGrid>
    </Grid>
</Window> 
```

代码：

```
namespace WpfApplication20
{
    public partial class MainWindow : Window
    {
        private ObservableCollection<MyDataObject> _items = new ObservableCollection<MyDataObject>();

        public MainWindow()
        {
            InitializeComponent();
            Items.Add(new MyDataObject { Category = "IT", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
            Items.Add(new MyDataObject { Category = "Monitors", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
            Items.Add(new MyDataObject { Category = "Monitors", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
            Items.Add(new MyDataObject { Category = "Monitors", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
            Items.Add(new MyDataObject { Category = "HDD", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
            Items.Add(new MyDataObject { Category = "HDD", ProductName = "Stackoverflow", Description = "Group", Price = "Demo" });
        }

        public ObservableCollection<MyDataObject> Items
        {
            get { return _items; }
            set { _items = value; }
        }
    }

    public class MyDataObject
    {
        public string Category { get; set; }
        public string ProductName { get; set; }
        public string Description { get; set; }
        public string Price { get; set; }
    }
} 
```

结果：

![在此处输入图像描述](../Images/a63c6f6cf370f04c6ff9cb16835ce04b.png)

# 增强

`GroupItem`在 中覆盖模板`DataGrid` `ContainerStyle`以使用可能是个好主意`Expander`，这样您就可以展开折叠组。

例子：

```
 <DataGrid ItemsSource="{Binding Source={StaticResource MyItems}}" CanUserAddRows="False">
        <DataGrid.GroupStyle>
            <GroupStyle>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander Name="expander">
                                        <Expander.Header>
                                            <StackPanel >
                                                <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                                <TextBlock Text="{Binding ItemCount, StringFormat={}Items: {0}}" FontSize="9" />
                                            </StackPanel>
                                        </Expander.Header>
                                        <ItemsPresenter />
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </DataGrid.GroupStyle>
    </DataGrid> 
```

结果：

![在此处输入图像描述](../Images/ab3d9e17d47e630720714a35460eeb8d.png)

# linux - 在 linux 上构建 Skia 时的问题

> ID：15720186
> 
> 赞同：0
> 
> 时间：2013-03-30T15:28:01.237
> 
> 标签：linux, android-ndk, java-native-interface, skia

[当我尝试通过本](http://sites.google.com/site/skiadocs/user-documentation)指南构建 Skia 时，请帮助我解决问题

它说：

```
/usr/bin/ld: cannot find -lfreetype 
/usr/bin/ld: cannot find -lfontconfig 
/usr/bin/ld: cannot find -lGL 
/usr/bin/ld: cannot find -lGLU 
/usr/bin/ld: cannot find -lX11 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:51:38.673

/usr/bin/ld 是链接器：它将您尝试编译的程序与现有库链接。在您的情况下，这些库将是名为 libfreetype.so、libfontconfig.so 等的文件。

您的问题可能是您的系统上不存在这些库。所以你必须安装它们。执行此操作的过程因您运行的 Linux 版本而异。

在基于 Redhat、CentOS 或 Fedora 的系统上，该过程将执行类似的操作

```
yum -y install "*freetype*" 
```

查看“yum list”的输出以找到确切的名称。如果您使用的是另一种类型的 Linux，也许其他人可以提供帮助。

# excel - VBA，如何使公式在 Excel 中可见

> ID：15720187
> 
> 赞同：0
> 
> 时间：2013-03-30T15:28:25.843
> 
> 标签：excel, vba, range, formula, cells

```
Dim n As Double
n = Sh.Range("B10").Value

Dim rate As Double
rate = (datefin - datedepart) / n

Cells(13, n + 3) = datefin

For y = n - 1 To x Step -1
Cells(13, y + 3) = datefin - rate
datefin = datefin - rate
Next y 
```

我有这个简单的循环，它将值从（由用户给出）开始并根据 a （也由用户给出的值计算）`for`将值放入 excel 中的单元格中。`n``rate`

我得到的输出值是正确的，但我想让我的公式在 excel 中可见。例如，如果我按下单元格，`D13`我希望它显示我使用的公式。`ActiveCell.Formula`我试图用or`ActiveCell.FormulaR1C1`函数来做，但因为`n`它并不总是一个特定的数字（因此在一个特定的单元格上）我找不到如何执行我想要的。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:43:21.410

通常，您会使用`.Formula`将公式附加到单元格，但是如果各个组件实际上并未包含在电子表格的其他单元格中，那么您将能够做的最好的事情是

```
Cells(13, y + 3).Formula = "=" & format(datefin) & " - " & format(rate) 
```

如果 datefin 为 9 且 rate 为 2，则将公式`"=9 - 2"`放入单元格中。

# php - 从表中选择前 50 行，但显示最旧到最新？

> ID：15720188
> 
> 赞同：0
> 
> 时间：2013-03-30T15:28:34.140
> 
> 标签：php, sql

有人可以建议如何解决这个问题吗？

我想从我的 SHOUTBOX 表中按 id 调用前 50 行，但按升序将它们显示在 div 中（最近的行（最新的）在底部）

例如;

最近的行是 id 200，我想调用第 150 - 200 行，将它们显示在 div 中；

150, 151, 152, . . 。ETC 。. 200 <<< DIV 中的最后一行

我的 PHP 代码目前看起来像这样；

```
$recall=mysql_query("SELECT *, DATE_FORMAT(timepost,'%H:%i:%s') as timepost FROM shoutbox ORDER BY id DESC LIMIT 50");

    while($comm=mysql_fetch_object($recall)){
      if ($comm->poster == "System"){
      print"<font color=#3399FF>$comm->timepost-<strong><a href='profile.php?viewuser=$comm->poster' target='iframecontent'><font color=#3399FF>$comm->poster</font></a></strong>: </font>";
    echo replace($comm->post);
    echo"<br>";
      } 
```

但它会在 div 中返回我的数据，例如；

200、199、198、. . 。ETC 。. 150 <<< DIV 中的最后一行

请问有人可以帮忙吗？

注意：我目前正在浏览我的所有页面并将所有 mySQL 查询转换为 PDO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:30:38.510

替换`ORDER BY id DESC`为`ORDER BY id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:32:14.673

For future reference, if you're converting to PDO there is the exact answer for reading backwards on this page without changing your query. [http://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php).

For now this will work:

```
SELECT *, DATE_FORMAT(timepost,'%H:%i:%s') AS timepost FROM (SELECT * FROM shoutbox ORDER BY id DESC LIMIT 50) AS foo ORDER BY id ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:36:43.483

Ok, try this:

```
$recall=mysql_query("SELECT *, DATE_FORMAT(timepost,'%H:%i:%s') as timepost FROM (SELECT * FROM shoutbox ORDER BY id DESC LIMIT 50) ORDER BY id ASC"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T15:30:59.967

You have wrong the order command, you have to put `ASC` instead of `DESC` Here is your correct query:

```
$recall=mysql_query("SELECT *, DATE_FORMAT(timepost,'%H:%i:%s') as timepost FROM shoutbox ORDER BY id ASC LIMIT 50");

    while($comm=mysql_fetch_object($recall)){
      if ($comm->poster == "System"){
      print"<font color=#3399FF>$comm->timepost-<strong><a href='profile.php?viewuser=$comm->poster' target='iframecontent'><font color=#3399FF>$comm->poster</font></a></strong>: </font>";
    echo replace($comm->post);
    echo"<br>";
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T15:31:21.507

Change your query to:

```
$recall = mysql_query("SELECT *, DATE_FORMAT(timepost,'%H:%i:%s') as timepost 
   FROM shoutbox ORDER BY id ASC LIMIT 50"); 
```

# c - Setting values to a struct is not working for me. (C)

> ID：15720193
> 
> 赞同：0
> 
> 时间：2013-03-30T15:29:11.613
> 
> 标签：c, matrix, setting

I created a typedef matrix:

```
typedef struct matrix {
int m;  
int n;
int **vrednosti;
} matrix ; 
```

and a function that creates a matrix:

```
matrix* create_matrix(int x, int y, int** val) 
```

but when I set the dimensions (m and n)

```
mat.n = x;
mat.m = y; 
```

only n gets actually set. When i print them out after setting them I get something like that

```
n = 3
m = -1717986919 
```

even though I set n = 3 and m = 3.

Full code:

```
typedef struct matrix {
int m;  
int n;
int **vrednosti;
} matrix ;

matrix* create_matrix(int x, int y, int** val){
matrix mat;
mat.n = x;
mat.m = y;
mat.vrednosti = val;
matrix* trol = &mat;
return trol;
}

int main(int argc, char* argv[]){
int n = *argv[1]-'0';
int m = *argv[2]-'0';

int i,j;
int** tab;
tab = (int**)malloc(n*sizeof(int*));
for(i=0; i<n; i++){
    tab[i] = (int*)malloc(m*sizeof(int));   
}

for(i=0; i<n; i++){
    for(j=0; j<m; j++){
        scanf("%d",&tab[i][j]);
    }
}

matrix* mat;
mat = create_matrix(n,m,tab);
printf("%d ",(*mat).n);
printf("%d ",(*mat).m);4

return 0; 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T15:31:02.120

It is most likely that you create a `matrix` object local to the function and return its address. The object does not exist beyond the scope of the function and gives you undefined behavior. Your implementation probably looks something like:

```
matrix* create_matrix(int x, int y, int** val)
{
       matrix mat;
       mat.n = x;
       mat.m = y;

       return &mat;
} 
```

There are a number of ways to solve the problem the basic of each of those rules is:

*   To increase the lifetime of the object(*who's address is returned*) even after the function exits.

The exact way depends on the functionality you want to achieve. Simplest being returning a object itself by value, or dynamically allocating the object.

# html - CSS - menu：元素宽度高度设置

> ID：15720197
> 
> 赞同：0
> 
> 时间：2013-03-30T15:29:35.103
> 
> 标签：html, css

 ![在此处输入图像描述](../Images/6e6ef95926461175bf45c0f665c84789.png)

我正在尝试解决这个问题几天。我无法将 Child1、2 和 3 放置在 25px 橙色点之间。父子菜单是基于 CSS 的`ul`菜单`li`，我在其中将其设置`<a>`为*内联块*并设置宽度和高度，但它仍然忽略这些参数。我对如何解决这个问题没有想法。提前谢谢你的帮助。 

由于代码的长度，我决定上传“完整”源代码： [source.zip](https://www.dropbox.com/s/ucc56le4bf8y8vd/source.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:35:32.777

问题是`<a>`子菜单上的标签具有`padding:15px`来自主菜单的标签。您需要将其设置为 0。然后您可以设置`line-height`元素的 以匹配橙色条`height`以使其垂直居中。

添加这个来修复它：

```
#header .cssMenuA a{
    padding:0;
    line-height:25px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:41:15.110

看起来 Child 1、2、3`a`标签应用了填充，这将它们向下推到橙色之外。看截图： ![截屏](../Images/fa4dbd899276fc03b7fbc95bd89219a4.png)

尝试从 a 标记中删除填充（bodystyle.css，第 78 行），然后仅将其重新应用到父菜单项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:36:11.450

`<a>`导航列表中的所有元素（包括）周围都有 15px 的填充`PARENT`，但这也适用于“孩子”。添加规则：

```
#header li li a {
    padding-top: 0;
} 
```

这可能看起来与您想要的不完全一样，因为`<a>`它设置为 25px 高，但字体比这小。还添加

```
#header li li a span {
    line-height: 25px;
} 
```

# php - Unable to access object attribute values using Twig in Symfony 2.2

> ID：15720201
> 
> 赞同：0
> 
> 时间：2013-03-30T15:29:41.763
> 
> 标签：php, oop, symfony, web, twig

I cannot access the objects properties using the Twig dot notation. For example, from looking at the object dump, I should be able to do image.copyright, which should print "Blue button near the Cayman Islands, Caribbean (© Lawson Wood/Aurora Photos)" for the first item.

The error message I get is

> Method "copyright" for object "SimpleXMLElement" does not exist in ARRaiDesignBundle:Default:wallpapers.html.twig at line 12

While dumping the object using dump(image) dumps each of the objects.

Controller class:

```
$host = 'http://www.bing.com';
$file = $host . '/HPImageArchive.aspx?format=xml&idx=0&n=10&mkt=en-US';
$xml = simplexml_load_file($file);

return $this->render('ARRaiDesignBundle:Default:wallpapers.html.twig', array('xml' => $xml, 'host' => $host)); 
```

wallpapers.html.twig file:

```
...
{% for image in xml %}
<p><pre>{{ image.copyright }}</pre></p>
{% endfor %}
... 
```

Object dump using dump(image) in Twig:

```
object(SimpleXMLElement)#268 (12) {
  ["startdate"]=>
  string(8) "20130330"
  ["fullstartdate"]=>
  string(12) "201303300000"
  ["enddate"]=>
  string(8) "20130331"
  ["url"]=>
  string(46) "/az/hprichbg/rb/BlueButton_EN-US1108621411.jpg"
  ["urlBase"]=>
  string(43) "/az/hprichbg/rb/BlueButton_EN-US10208337365"
  ["copyright"]=>
  string(77) "Blue button near the Cayman Islands, Caribbean (© Lawson Wood/Aurora Photos)"
  ["copyrightlink"]=>
  string(74) "http://www.bing.com/search?q=Blue+Button+%28Porpita+porpita%29&form=hpcapt"
  ["drk"]=>
  string(1) "1"
  ["top"]=>
  string(1) "1"
  ["bot"]=>
  string(1) "1"
... 
```

Can anyone suggest how to do this? I know I can use PHP rendering instead of Twig, but that's not a fix for me. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-16T10:52:12.137

with example php doc [http://www.php.net/manual/fr/simplexml.examples-basic.php](http://www.php.net/manual/fr/simplexml.examples-basic.php)
in twig, to get attribute 'type' from 'rating' item, use attributes (="@attributes") like :

```
{% for rating in movies.movie.rating %}
   {{ rating.attributes.type }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:00:46.313

It seems to me that your `SimpleXMLElement` does not have magic methods implemented. When you call in Twig `object.property` - it invokes `getProperty()` method of your `object`. Try do access property directly in Twig:

```
{{ image['copyright'] }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:14:56.003

This was happening due to Bing's werid XML structure, the last bit is not iterative friendly. With standard PHP it's fine, but with Twig, it doesn't catch the errors for the last element.

```
<images>
<image>...</image>
<image>...</image>
<image>...</image>
<image>...</image>
<image>...</image>
<image>...</image>
<image>...</image>
<image>...</image>
<tooltips>...</tooltips>
</images> 
```

To fix this, I just unset tooltips. "unset($xml->tooltips)"

Thanks @JaredFarrish for providing clean xml. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T06:35:17.233

I believe you have to proxy that object. Create a new object that wraps the SimpleXMLElement object and define a getCopyright() method.

```
class Element 
{
    protected $xmlElement;
    public function getCopyright() 
    {
        return $this->xmlElement->copyright;
    }
} 
```

# c# - 用 LINQ to Entity 结果填充数据表，以便我可以迭代它们

> ID：15720205
> 
> 赞同：0
> 
> 时间：2013-03-30T15:30:00.370
> 
> 标签：c#, linq-to-entities, entity-framework-5, asp.net-4.5

我一直在尝试用 LINQ 结果填充数据表，这样我就可以遍历 DT 并打印出所需的数据，但无论我如何尝试，它都无法将匿名类型转换为数据表。

我正在使用的 LINQ 是：

```
 using (var db = new SiteNavigation())
        {
            dtNavData=  (from n in db.Navigation
                         join st in db.SectionTranslations
                         on n.SectionID equals st.Section.SectionID
                         where n.Category == Category && st.CultureID == CultureID
                         orderby n.Position ascending
                         select new
                         {
                              LinkAddress = st.Section.Type + "/" + st.Section.RouteName,
                              st.Title
                          }).ToList();
        } 
```

有什么方法可以将结果放入数据表或任何其他对象中，以便我可以逐行处理数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:47:05.627

`DataTable`如果您只想遍历 linq 查询的结果，则不必创建

```
var myResult =  (from n in db.Navigation
                     join st in db.SectionTranslations
                     on n.SectionID equals st.Section.SectionID
                     where n.Category == Category && st.CultureID == CultureID
                     orderby n.Position ascending
                     select new
                     {
                          LinkAddress = st.Section.Type + "/" + st.Section.RouteName,
                          st.Title
                      }).ToList();

foreach(var item in myResult)
{
     string linkAddrs = item.LinkAddress;
     string title = item.Title;
} 
```

# javascript - 在 JavaScript 中修改对象的动态按钮

> ID：15720210
> 
> 赞同：0
> 
> 时间：2013-03-30T15:30:39.447
> 
> 标签：javascript, object, button, dynamic

因此，我有一个 div(D1)，它是从在不同 div(D2) 中声明的对象的字段动态填充的。那么是否可以在 D1 中有一个动态创建的按钮来修改 D1 中的放坡区域对象。
D2 中的对象：

```
var grades = new Array("88", "91", "75", "96");
var area1 = new GradingArea("Homework", 30, grades);
var area2 = new GradingArea("Classwork", 40, grades);
var gradingareas = new Array(area1, area2);

var course1 = new Course("CS1500", gradingareas, 85); 
```

在 D1 中填充是由一个函数完成的，其中在 maincourse 中传递了参数，并且有一个 for 循环，基本上是 toString 用于成绩，最后将修改 D1 的 HTML 以包括：

```
 function bringforward(maincourse){
    for(var i = 0;i<maincourse.gradingareas.length; i++){
     txt = "Accumulatedgrades" +"<button onclick=AddGrade(maincourse.gradingareas[i]);>" + "Add Grade" + "</button>"
    }
document.getElementById("currentclassareas").innerHTML=txt; //current class areas is a paragraph tag
    } 
```

累积成绩只是一个占位符，代表在别处计算的字符串

AddGrade 调用一个警告框来输入一个新值以通过推送添加到 maincourse 对象中的数组中。但我总是得到“maincourse.gradingareas[i] 未定义”，因为我认为它不会与 div 中的书面声明保持一致。我曾尝试使用 addElement(button) 并仅用一个函数包装 AddGrade，但都没有成功。任何建议，将不胜感激

# javascript - 按下按钮后加载闪光灯

> ID：15720212
> 
> 赞同：1
> 
> 时间：2013-03-30T15:30:42.280
> 
> 标签：javascript, css, flash

我正在用我的学校作业（dreamfoxgames.com）建立一个网站。

如果您单击一个名为“播放”的按钮，则会在 Flash 或统一插件中随游戏一起弹出一个弹出窗口/模式。我的问题是当访问者加载页面时，他们会自动加载 Flash 文件。这意味着音乐将开始播放，并且页面加载速度会很慢（所有这些游戏）。

有没有办法只在有人点击播放按钮后才加载 Flash 播放器？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:20:08.120

您可以使用[swfobject](https://code.google.com/p/swfobject/wiki/documentation)在 div 中加载 swf 内容。

假设您的 html 中有一个 div，如下所示

```
<!DOCTYPE html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script> 
    <script>
</head> 
<body>
      <div id="myContent">
        swf will be embedded here
      </div>
     <button onclick="playSwf()">Click to play swf</button>
</body>
</html> 
```

玩swf..

```
 <script type="text/javascript">
    function playSwf()
    {
       //Syntax  
       //swfobject.embedSWF(swfUrl, id, width, height, version,
      //                    expressInstallSwfurl, flashvars, params,
     //                     attributes, callbackFn)

         //optional parameters omitted
         swfobject.embedSWF("test.swf", "myContent", "400", "400","10"); 

    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:24:38.780

也可以使用嵌入元素来完成（不需要外部 api）：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    var flashEmbed = null;
    function startFlash() {
    if(flashEmbed != null) {
        document.getElementById("flashContainer").removeChild(flashEmbed);
    }
    flashEmbed = document.createElement("embed");
    document.getElementById("flashContainer").appendChild(flashEmbed);
    flashEmbed.src="Flashfile.swf";
    flashEmbed.type="application/x-shockwave-flash";
    }
</script>
</head>
<body>
<button onclick="startFlash()">start flash</button>
<div id="flashContainer"></div>
</body>
</html> 
```

# mfc - mfc remove default toolbar

> ID：15720225
> 
> 赞同：2
> 
> 时间：2013-03-30T15:31:32.017
> 
> 标签：mfc, fullscreen, toolbar, statusbar

I've making simple desktop game in mfc for school project, I've managed to make my app be full screen and to remove menu bar but I can't find out how to remove default built in toolbar from my app or status bar. I tried everything that came across my mind...is there some kind of get function to call from your CWnd object to retrieve toolbar and status bar?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:01:02.027

The creation of `ToolBar` and `StatusBar` is inside the `CMainFrame` class. You can easily remove them if you do not need them as follows:

```
int CMainFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CFrameWnd::OnCreate(lpCreateStruct) == -1)
    return -1;

    // *** creation of ToolBar starts, just remark/delete the whole block if you dont't want it
    if (!m_wndToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_TOP
        | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||
        !m_wndToolBar.LoadToolBar(IDR_MAINFRAME))
    {
        TRACE0("Failed to create toolbar\n");
        return -1;      // fail to create
    }
    // *** creation of ToolBar  ends -------------------------------------------------------

    // *** creation of StatusBar starts, just remark/delete the whole block if you dont't want it
    if (!m_wndStatusBar.Create(this) ||
        !m_wndStatusBar.SetIndicators(indicators,
          sizeof(indicators)/sizeof(UINT)))
    {
        TRACE0("Failed to create status bar\n");
        return -1;      // fail to create
    }
    // *** creation of StatusBar ends -------------------------------------------------------

    // *** you have to remark/delete these lines too, if you removed the ToolBar above
    m_wndToolBar.EnableDocking(CBRS_ALIGN_ANY);
    EnableDocking(CBRS_ALIGN_ANY);
    DockControlBar(&m_wndToolBar);
    // *** ToolBar extra ends -------------------------------------------------------

    return 0; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T16:36:59.900

`m_pMainWnd->SetMenu(NULL);` right before `m_pMainWnd->ShowWindow(SW_SHOW);` is called in the `APPLICATION_NAME.cpp` file.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T16:11:11.347

Go to your resource file, double click on it , locate the toolbar, right click on it and choose delete :)

![enter image description here](../Images/b7cc3a82196d45279c488753c7dcb827.png)

# java - Java JNI: This operation is only valid in the context of an app container

> ID：15720226
> 
> 赞同：1
> 
> 时间：2013-03-30T15:31:32.173
> 
> 标签：java, windows, java-native-interface

After failing to get JNI stuff working on the Mac, I decided to try on windows. I compiled my DLL, and put it in the `java.library.path`, just as I did on the Mac.

Now.. Java gives me this error:

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\path\to\dll\TheDll.dll: This operation is only valid in the context of an app container 
```

> This operation is only valid in the context of an app container

What? I've tried googling this, but nothing of relevance shows up. Weirdly, it worked on the Mac just fine.

What's the cause of this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T01:27:52.833

Turns out the error message was generated by Windows, and was caused by this bit of wackiness:

I was compiling as a Windows Store DLL rather than a Win32 DLL. Ridiculous, but at least I found the answer.

# php - 值未插入数据库 - 无警告或错误

> ID：15720234
> 
> 赞同：0
> 
> 时间：2013-03-30T15:32:27.703
> 
> 标签：php, sql, function

页面上的输出很好，没有错误或警告。它似乎应该将值插入数据库，但它没有。var_dump($result) 结果为“布尔假”。当我从命令行插入查询时，它可以工作。

功能：

```
 function handlePostForm(){
        date_default_timezone_set('UTC');
    if($_SERVER["REQUEST_METHOD"] == "POST"){
    if(isset($_POST['formSumbit']) && !empty($_POST['newheader']) && !empty($_POST['newpost']))
    {
       $varHeader = $_POST['newheader'];
       $varContent = $_POST['newpost'];
       $varDate = date('Y-m-d'); 
       $order ="INSERT INTO posts (header,content,post_date) VALUES      ('$varHeader','$varContent','$varDate')";
        $result = mysql_query($order);

    }

    else 
    echo "error";
    }
    } 
```

除了调用函数的 html 表单：

```
<?php include('post_func.php'); ?>
<title>new post</title>
</head>
    <body dir="rtl">
    <h1>new post</h1>
    <form method='post' action="<?php $_SERVER["PHP_SELF"]?>">
    header:
    <input type="text" name="newheader" maxlength="100" style="width:500px;">
    post:
    <textarea  <input type="text" name="newpost" maxlength="100" style="width:500px;  height:500px;"/></textarea>

    <input type="submit" name="formSumbit" value="sumbit" />
    </form>

    <?php

    handlePostForm();

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:07:45.677

要获取详细信息错误，您可以尝试在 mysql_query() 函数中使用连接处理程序并使用 mysql_insert_id 来确定您的插入。还要确保在 mysql_connection 之后使用 mysql_select_db() 函数来选择数据库。

以下将是应用上述内容后的代码：

```
 function handlePostForm(){
 global $conn;//YOur connection
    date_default_timezone_set('UTC');
if($_SERVER["REQUEST_METHOD"] == "POST"){
if(isset($_POST['formSumbit']) && !empty($_POST['newheader']) && !empty($_POST['newpost']))
{
   $varHeader = $_POST['newheader'];
   $varContent = $_POST['newpost'];
   $varDate = date('Y-m-d'); 
   $order ="INSERT INTO posts (header,content,post_date) VALUES      ('$varHeader','$varContent','$varDate')";
    $result = mysql_query($order ,$conn);

}

else 
echo "error";
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T18:04:24.840

```
if($_SERVER["REQUEST_METHOD"] == "POST"){
mysql_select_db("application", $con);
    mysql_query("INSERT INTO    program_info(prog_title,location,count,p_date,p_start,p_end,advisor_name,advisor_email,advisor_phone,stud1_name,stud1_email,stud1_phone,stud2_name,st
ud2_email,stud2_phone,program)
    VALUES ('$_POST[event_title]','$_POST[event_location]','$_POST[estimated_count]','','$_POST[event_starttime]','$_POST[event_endtime]','$_POST[advisor]','$_POST[advisor_email]','$_POST[phone]','$_POST[student1]','$_POST[student1_email]','$_POST[studentphone1]','$_POST[student2]','$_POST[student2_email]','$_POST[studentphone2]','$_POST[program])");
    $temp=$_POST['event_date'];
    echo $temp;
}else`
{ echo "error";
} 
```

# java - 延迟从同一个循环调用不同的方法

> ID：15720235
> 
> 赞同：1
> 
> 时间：2013-03-30T15:32:32.740
> 
> 标签：java, android, multithreading

如何在同一个循环中延迟调用不同的方法？

```
time 0: call A  
+100ms: call B  
+100ms: call C  
+100ms: call D  
...  
+100ms: call X  
stopLoop() 
```

我试过：

```
 Thread thread = new Thread() {
                @Override
                public void run() {
                    try {
                        while (true) {
                            call A();
                            sleep(100);
                            call B();
                            sleep(100);
                            call C();
                            sleep(100);
                            call D();
                            sleep(100);
                            call E();
                            sleep(100);

                            thread.stop(); ???
                        }
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            };
            thread.start(); 
```

除了 stop() 之外它正在工作，而且从同一个线程内部杀死一个线程看起来不合逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:34:23.487

Thread.interrupt() 是一种完全可以接受的方式。

[线程#interrupt()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)

> 中断这个线程。除非当前线程正在中断自己，这总是允许的，否则会调用该线程的 checkAccess 方法，这可能会导致抛出 SecurityException。
> 
> If this thread is blocked in an invocation of the wait(), wait(long), or wait(long, int) methods of the Object class, or of the join(), join(long), join(long, int), sleep(long), or sleep(long, int), methods of this class, then its interrupt status will be cleared and it will receive an InterruptedException.
> 
> If this thread is blocked in an I/O operation upon an interruptible channel then the channel will be closed, the thread's interrupt status will be set, and the thread will receive a ClosedByInterruptException.
> 
> If this thread is blocked in a Selector then the thread's interrupt status will be set and it will return immediately from the selection operation, possibly with a non-zero value, just as if the selector's wakeup method were invoked.
> 
> If none of the previous conditions hold then this thread's interrupt status will be set.
> 
> Interrupting a thread that is not alive need not have any effect.

[Why Are Thread.stop, Thread.suspend, Thread.resume and Runtime.runFinalizersOnExit Deprecated?](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)

Try something like this:

```
while (!Thread.currentThread().isInterrupted()) {
    //Call methods .
    Thread.currentThread().interrupt();
} 
```

# php - 我的 sql 代码在 mysql 中返回 7 行。但是，当我在 php 中检索它时，它返回一行。如何检索sql给出的php中的所有数据

> ID：15720252
> 
> 赞同：-3
> 
> 时间：2013-03-30T15:34:13.640
> 
> 标签：php, sql

我是初学者，以下是我的 sql 代码。

```
select temp1.service_number,temp1.serial_number, temp1.start_datetime, temp1.plate_number, text , temp1.staff_id
from (select t.service_number,t.serial_number, start_datetime, plate_number, staff_id
from trip t
where t.staff_id = 3685
and start_datetime between '2012-01-01' and '2013-12-01') as temp1
left outer join 
(select r.service_number, r.serial_number, r.text
from remark r) as temp2
on temp1.service_number = temp2.service_number and temp1.serial_number = temp2.serial_number; 
```

当我运行它时，它返回 7 行。但是，当我在 php 中使用该代码时，

```
$querytrip = "select temp1.service_number,temp1.serial_number, temp1.start_datetime, temp1.plate_number, temp2.text from (select t.service_number,t.serial_number, start_datetime, plate_number, staff_id from trip t where t.staff_id = '$staffid' and start_datetime between '$sdate' and '$edate') as temp1 left outer join (select r.service_number, r.serial_number, r.text from remark r) as temp2 on temp1.service_number = temp2.service_number and temp1.serial_number = temp2.serial_number";
            $resulttrip = mysql_query($querytrip); 
```

count($resulttrip) 返回 1。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:37:02.477

要获取行数，您需要[`mysql_num_rows($resulttrip)`](http://php.net/manual/en/function.mysql-num-rows.php)，而不是`count($resulttrip)`。要遍历每一行，您可以[`mysql_fetch_assoc`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)这样使用：

```
while ($result = mysql_fetch_assoc($resulttrip))
{
  echo $result['service_number'];
} 
```

您也可以使用[`mysql_fetch_array`](http://www.php.net/manual/en/function.mysql-fetch-array.php)and[`mysql_fetch_row`](http://www.php.net/manual/en/function.mysql-fetch-row.php)而不是`mysql_fetch_assoc`,

尽管您应该使用[`MySQL Improved Extension`](http://www.php.net/manual/en/book.mysqli.php)or [`PDO`](http://www.php.net/manual/en/book.pdo.php)。

# android - 从拨号盘获取按下的号码

> ID：15720260
> 
> 赞同：5
> 
> 时间：2013-03-30T15:34:52.133
> 
> 标签：android

我想在通话过程中从拨号盘获取号码

设想：

1.  假设A人打电话给B人。
2.  在通话过程中，A 人打开拨号盘并按一个数字，比如说数字 1

那么我怎样才能得到拨出的号码呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:38:43.993

> 在通话过程中从拨号盘获取号码：

要从拨出电话中获取号码，您需要注册一个`BroadcastReceiver`for `PHONE_STATE`Action。inside`onReceive`方法，您将检索为：

```
String outgoingNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER) 
```

如需更多帮助，您可以查看以下教程：

[操作 Android 的传入和传出呼叫教程](http://mfarhan133.wordpress.com/2010/10/15/manipulating-incoming-ougoing-calls-tutorial-for-android/)

# python - How to enable interaction between object in different modules

> ID：15720262
> 
> 赞同：0
> 
> 时间：2013-03-30T15:35:05.700
> 
> 标签：python, simpy

I am using SimPy, and I try to simulate a network.

This is my main module:

```
from SimPy.Simulation import *
import node0
import message0
import network0
reload (message0)
reload (node0)
reload(network0)
initialize()
topology=network0.Network()
activate(topology, topology.operate()) 
node1=node0.Node(1)
node1.interface.send(destination='node1')
simulate(until=25) 
```

I want an object of class message, which is activated by an object of class node, to interrrupt

```
class Message(Process):
    def arrive(self, destination, myEvent=delay):

        self.destination=destination
        self.interrupt(topology) 
```

an object of class `Network (topology)`.

But I'm getting an error:

```
NameError: global name 'topology' is not defined 
```

And I don't know how to make an object global. And if I type topology in python shell then it shows me object topology, so why can't message see it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:51:51.277

I'm pretty sure the issue is that your `Message` class is defined in a different module than where your `topology` variable is. So called "global" variables in Python are not really global (in the sense that there's just one global namespace), but just at the top of a specific module's namespace. So the global variable `topology` in your main module's namespace is not accessible as a global variable from a different module.

My suggestion for working around this by passing the topology value to the `Message` as a parameter to the `__init__` method. If the message is being created by something other than your own code (e.g. by your `Node` class), you might need to pass it around a bit more, so that it will be available when needed.

If that is not possible, you might be able to put the topology value in the namespace of a module that can be imported by your `Message` code. This can get messy though, as circular imports can break things if you're not careful.

# iphone - 带有停止运动的振荡 UIView (iOS)

> ID：15720266
> 
> 赞同：0
> 
> 时间：2013-03-30T15:35:17.463
> 
> 标签：iphone, ios, objective-c, core-animation

我需要一个带有振荡动画的视图来进入屏幕，最后，动画应该以自然的方式停止（减少振荡 - 钟摆效果）。我在屏幕上方添加了子视图，以便视图在需要时旋转到屏幕中。添加子视图的代码是：

```
myView.layer.anchorPoint = CGPointMake(1.0, 0.0);

[[self view] addSubview:myView];
[myView setHidden:YES];
// Rotate 75 degrees to hide it off screen
CGAffineTransform rotationTransform = CGAffineTransformIdentity;
rotationTransform = CGAffineTransformRotate(rotationTransform, DEGREES_RADIANS(75));
bannerView.transform = rotationTransform;
bannerView.center = CGPointMake(((self.view.bounds.size.width)/2.0), -5.0);

[self performSelector:@selector(animateSwing) withObject:nil afterDelay:3.0]; 
```

我试图实现这一点的方式是，视图应该旋转一个完整的半圆并向后旋转，然后旋转一个半圆，最后使用 EaseOut 动画曲线在所需的点停止。我的方法的代码`animateSwing()`如下：

```
- (void)animateSwing {
     NSLog(@"ANIMATING");
    [myView setHidden:NO];
    CGAffineTransform swingTransform = CGAffineTransformIdentity;
    swingTransform = CGAffineTransformRotate(swingTransform, DEGREES_RADIANS(-20));

    [UIView animateWithDuration:0.30
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     [UIView setAnimationRepeatCount:1.5];
                     [UIView setAnimationRepeatAutoreverses:YES];  
                     myView.transform = swingTransform;

                 }completion:^(BOOL finished){
                     [UIView animateWithDuration:0.10
                                           delay:0.0
                                         options:UIViewAnimationOptionCurveEaseOut
                                      animations:^{
                                          myView.transform = CGAffineTransformMakeRotation(DEGREES_RADIANS(0));
                                      }completion:^(BOOL Finished){

                                      }];

    }]; 
} 
```

由于某种原因，上面的代码不起作用。如果我不链接动画，代码将执行半圆例程。但是，如果我像上面那样链接动画，它只会在所需点周围振荡一点，然后突然结束。

请建议对此代码的修复**或**建议一种实现所需动画的方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:48:25.583

您想使用关键帧动画。我的书中实际上有一个“减少摇摆”动画的例子（[http://www.aeth.com/iOSBook/ch17.html#_keyframe_animation](http://www.apeth.com/iOSBook/ch17.html#_keyframe_animation)）：

```
CompassLayer* c = (CompassLayer*)self.compass.layer;
NSMutableArray* values = [NSMutableArray array];
[values addObject: @0.0f];
int direction = 1;
for (int i = 20; i < 60; i += 5, direction *= -1) { // alternate directions
    [values addObject: @(direction*M_PI/(float)i)];
}
[values addObject: @0.0f];
CAKeyframeAnimation* anim =
    [CAKeyframeAnimation animationWithKeyPath:@"transform"];
anim.values = values;
anim.additive = YES;
anim.valueFunction =
    [CAValueFunction functionWithName: kCAValueFunctionRotateZ];
[c.arrow addAnimation:anim forKey:nil]; 
```

当然，这与您尝试做的不同，但它应该让您开始。

# html - How to add multiple borders in bottom?

> ID：15720270
> 
> 赞同：0
> 
> 时间：2013-03-30T15:35:42.573
> 
> 标签：html, css

I want to add two extra bottom borders in a div so that it looks as attached image:

![enter image description here](../Images/53c8964d040a857a301db3571cf9b00c.png)

Do I need to add two additional empty div's for that? I have very basic markup:

```
<div class="box">
    main div
</div> 
```

Here's the basic demo: [http://jsfiddle.net/3TWtF/](http://jsfiddle.net/3TWtF/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:38:51.193

Yes, you'll need to add two `<div/>`s like so: [http://jsfiddle.net/UUDd3/](http://jsfiddle.net/UUDd3/) This will provide the most compatible solution.

Add the following HTML:

```
<div class="box2">
    &nbsp;
</div>
<div class="box3">
    &nbsp;
</div> 
```

And the following CSS:

```
.box2{
    border-left: 1px solid brown; 
    border-bottom: 1px solid brown; 
    border-right: 1px solid brown; 
    width: 480px;
    height: 10px;
    margin:0 10px;
}
.box3{
    border-left: 1px solid brown; 
    border-bottom: 1px solid brown; 
    border-right: 1px solid brown; 
    width: 460px;
    height: 10px;
    margin:0 20px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T15:40:00.450

You can do it without two extra `div`s but it will require dropping support for IE7 as you will need to use pseudo-elements.

[jsFiddle](http://jsfiddle.net/Tyriar/burar/)

![enter image description here](../Images/6c56872e8ed8d5ce5ff1d3839ad2a829.png)

```
.box{
    border: 1px solid brown; 
    width: 500px;
    height: 100px;
    position:relative;
}
.box:after {
    display:block;
    content:"";
    position:absolute;
    border:1px solid brown;
    width:400px;
    left:50px;
    top:100px;
    height:15px;
}
.box:before {
    display:block;
    content:"";
    position:absolute;
    border:1px solid brown;
    width:300px;
    left:100px;
    top:116px;
    height:15px;
} 
```

# sqlite - When to close SQLite database (using FMDB)

> ID：15720272
> 
> 赞同：6
> 
> 时间：2013-03-30T15:35:45.493
> 
> 标签：sqlite, fmdb

When should you close the connection to an SQLite database (using [db close] in FMDB)?

Right now I am closing it after running every batch of related queries, but should I rather close when my app closes? What are the pros/cons of doing either way?

Thanks

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-30T20:09:19.523

I'm the guy who wrote FMDB.

Keep it open unless you change your schema. That's the only reason to close it, and constantly re-opening it is a little hit on performance / battery life.

# python - 复制文件描述符时何时调用flush()？

> ID：15720273
> 
> 赞同：1
> 
> 时间：2013-03-30T15:35:47.750
> 
> 标签：python, io-redirection, torque

当我调用 python python-wrapped C++ 时，我有一个包装器来重定向输出。

基本思想是使用`dup`and `dup2`，这是我能够`printf`从 C++ 捕获输出的唯一方法。`flush()`只要我以交互方式运行作业，包装器就可以正常工作，无需调用，但是当我将作业发送到 TORQUE 批处理时，我再次得到不受欢迎的输出。

我的理解，部分来自[这个问题](https://stackoverflow.com/q/8804893/915501)，是一些适当的`flush()`电话应该解决这个问题，但他们到底需要去哪里？我应该在复制到临时文件*之前*刷新缓冲区吗？在复制回来之前？两个都？

* * *

我使用的包装如下：

```
class Filter(object): 
    """
    Workaround filter for annoying and worthless errors. 
    """
    def __init__(self, veto_words={'ClassTable'}): 
        self.veto_words = set(veto_words)
        self.temp = tempfile.NamedTemporaryFile()
    def __enter__(self): 
        sys.stdout.flush() # <--- NEEDED? 
        sys.stderr.flush() # <--- NEEDED? 
        self.old_out, self.old_err = os.dup(1), os.dup(2)
        os.dup2(self.temp.fileno(), 1)
        os.dup2(self.temp.fileno(), 2)
    def __exit__(self, exe_type, exe_val, tb): 
        sys.stdout.flush() # <--- NEEDED? 
        sys.stderr.flush() # <--- NEEDED? 
        os.dup2(self.old_out, 1)
        os.dup2(self.old_err, 2)
        self.temp.seek(0)
        for line in self.temp: 
            veto = set(line.split()) & self.veto_words
            if not veto: 
                sys.stderr.write(line) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:44:00.830

Python 在连接到 TTY 时应用行缓冲，否则需要更大的缓冲区。

`.flush()`将 Python 程序重定向到管道意味着没有 TTY 连接到流，即使在发送换行符时也必须使用。

您可以运行 Python`-u`以关闭`stdout`.

# c++ - 乘以 2 的效率

> ID：15720280
> 
> 赞同：2
> 
> 时间：2013-03-30T15:36:32.233
> 
> 标签：c++, allocation

我应该以几何方式分配内存并将初始大小设置为 1000。当它被填充时，它将扩展到 2000、4000 等等。

我的问题是：如果我将初始大小设置为 2 的乘积，即 1024，在效率或任何其他方面会有什么不同吗？

请不要谈论向量和分配的替代方法，这只是理论上的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T15:56:53.593

Andrew Koenig 在 1998 年的面向对象编程杂志上发表了一篇关于缓冲区增长策略的文章。不幸的是，我无法找到该文章的在线副本。

一般来说，指数增长优于固定增长。在指数增长中，1.6（或 1.5）的因子是优选的。Koenig 在一篇 usenet 帖子中谈到了原因

[http://groups.google.com/group/comp.lang.c++.moderated/msg/ba558b4924758e2e](http://groups.google.com/group/comp.lang.c++.moderated/msg/ba558b4924758e2e)？

> 偏爱 1.5 到 2 是有技术原因的——更具体地说，偏爱小于 (1+sqrt(5))/2 的值。
> 
> 假设您使用的是首次拟合内存分配器，并且您正在逐步附加到向量。然后每次重新分配时，分配新内存，复制元素，然后释放旧内存。这留下了一个空白，最终能够使用该内存会很好。如果向量增长太快，对于可用内存来说总是太大。事实证明，如果增长因子 >= (1+sqrt(5))/2，那么新的内存对于到目前为止已经留下的空洞来说总是太大了；如果它是 <(1+sqrt(5))/2，那么新的内存最终会适合。所以 1.5 足够小，可以让内存被回收。

PJ Plauger 的 STL 实现（由 MSVC 使用）`vector`基于上述使用 1.5。

The full thread where a lot of big C++ guys discuss it - [http://groups.google.com/group/comp.lang.c++.moderated/browse_frm/thread/6ac1ff5688d6289c/ba558b4924758e2e#ba558b4924758e2e](http://groups.google.com/group/comp.lang.c++.moderated/browse_frm/thread/6ac1ff5688d6289c/ba558b4924758e2e#ba558b4924758e2e)

Also there are a couple of articles which talk about Koenig's article in JOOP.

1) [http://www.gotw.ca/gotw/043.htm](http://www.gotw.ca/gotw/043.htm)

> For more information, see Andrew Koenig's column in the September 1998 issue of JOOP (Journal of Object-Oriented Programming). Koenig also shows why, again in general, the best growth factor is not 2 but probably about 1.5\.

2) [http://www10.informatik.uni-erlangen.de/Publications/TechnicalReports/TechRep09-11.pdf](http://www10.informatik.uni-erlangen.de/Publications/TechnicalReports/TechRep09-11.pdf)

> The growth policy enables the user to specify how a pointer vector grows in case it needs more elements. Although in most cases the optimal growth strategy suggested by Andrew Koenig [Koe98,Sut07] should provide the best performance for most scenarios, in some scenarios a dierent approach can still make a difference.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T15:43:32.590

我认为这与我使用和优化代码的系统无关。但是，这将非常依赖于您使用的操作系统和编译器。正如 NPE 建议的那样，最好的了解方法是一个简单的基准代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:49:07.673

问题是：为什么你认为使用 2 的幂会有所不同？根据操作系统、使用的内存分配器和其他一些因素，存在差异，唯一合理的方法是针对您的用例对其进行基准测试。

您想要测试的是：计算出您的系统每次分配有多少开销。在某些情况下，当您保留 2 的幂*减去开销*时，它可能对内存分配器有所帮助。例如，如果开销为 24 字节，则从 1024-24=1000 字节开始。如果需要增加，使用2048-24=2024字节等。

您还将运行具有许多不同分配的更长会话，以查看块大小是否会影响内存碎片。

当然，我不知道这是否（仍然）适用于您的系统。

# c# - Constant value and direct value in IF statement

> ID：15720290
> 
> 赞同：2
> 
> 时间：2013-03-30T15:37:04.470
> 
> 标签：c#, constants

```
if (myValue > ConstantValue + 1)
{
    // do some stuff
} 
```

Is `ConstantValue + 1` determined at compile time?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:45:34.690

Yes, it will be replaced during compilation:

C# Code:

```
if (value <= ConstValue)
    Console.WriteLine("Test1");

if (value <= ConstValue + 1)
    Console.WriteLine("Test2"); 
```

IL:

```
IL_000c: ldloc.0
IL_000d: ldc.i4.s 10
IL_000f: cgt
IL_0011: stloc.1
IL_0012: ldloc.1
IL_0013: brtrue.s IL_0020

IL_0015: ldstr "Test1"
IL_001a: call void [mscorlib]System.Console::WriteLine(string)
IL_001f: nop

IL_0020: ldloc.0
IL_0021: ldc.i4.s 11
IL_0023: cgt
IL_0025: stloc.1
IL_0026: ldloc.1
IL_0027: brtrue.s IL_0034

IL_0029: ldstr "Test2"
IL_002e: call void [mscorlib]System.Console::WriteLine(string)
IL_0033: nop 
```

`ConstValue` is declared as following:

```
public const int ConstValue = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:06:20.743

Yes, ConstantValue + 1 determined at compile time.

Example:

```
 static void Main(string[] args)
        {
            const int count = 1;
            int myValue = 3;
            if (myValue > count + 1)
            {
                Console.WriteLine(count);
            }
        } 
```

we can see this with reflector:

```
private static void Main(string[] args)
{
    int myValue = 3;
    if (myValue > 2)
    {
        Console.WriteLine(1);
    }
} 
```

# file - 无法打开任何 d 文件

> ID：15720294
> 
> 赞同：0
> 
> 时间：2013-03-30T15:37:36.243
> 
> 标签：file, monodevelop, d

我正在使用 Monodevelop 编写 D 程序，每当我打开文件时都会出现此[错误。](http://i.imgur.com/ZxpQpi1.png)有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:12:57.713

当用户拥有旧版本的 MonoDevelop（现在是[Xamarin Studio](http://www.xamarin.com)）时，这是一个常见问题。

你有两个解决方案：

1.  获取与您在工作站上安装的 MonoDevelop 版本一起使用的 Mono-D 版本。
2.  安装最新的 Xamarin Studio 版本和最新的 Mono-D。

如何执行 #1 有点棘手 - 您必须找到插件文件，然后按照“从文件安装”程序进行操作。它在 Mono-D 博客上的某处进行了解释，我相信有一个链接可以看到所有版本的页面......

# ruby-on-rails - 在 link_to 中保留参数的顺序

> ID：15720296
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:37:40.903
> 
> 标签：ruby-on-rails

我有一组参数用作过滤器来确定 ActiveRecord 对象的顺序。例如，我有以下内容。

```
>> params[:search][:order]             
{"priority"=>"DESC", "last_updated"=>"ASC"} 
```

我用`params[:search][:order]`在sql查询中确定顺序（不用担心sql注入，我只是用这些来构建顺序，并没有直接用在sql中）。我遇到的问题是我需要保留顺序。如果我在`link_to`,中使用它`last_updated`并`priority`切换会弄乱分页链接。我相信`url_for`用于`to_param`将此哈希转换为对 url 友好的等效项。

```
>> params[:search][:order].to_param    
"last_updated=ASC&priority=DESC" 
```

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:50:40.267

使用单独的数组来存储您需要的信息。

# ruby-on-rails - Add data to a unique, required column

> ID：15720298
> 
> 赞同：0
> 
> 时间：2013-03-30T15:37:45.187
> 
> 标签：ruby-on-rails, migration

I'm looking for the preferred way, and unique column to an existing table. I also want to add a unique index to the table. Before adding the index though, I obviously need to add data to the column to prevent the index creation from failing.

Here is the situation:

```
class AddUsernameToUsers < ActiveRecord::Migration
  def change
    add_column :users, :username, :string, null: false

    # Need Data here! And don't want to do something like this:
    # User.each { |u| u.update_attribute(:username, u.email }

    add_index  :users, :username, unique: true
  end
end 
```

I know using ruby code to populate the data is possible, there are lots of examples of that, but I keep reading that it isn't such a good idea. Are there any options other than something similar to the above?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:29:05.717

would the following work for your situation?

```
class AddUsernameToUsers < ActiveRecord::Migration
  def change
    add_column :users, :username, :string, null: true

    execute("UPDATE users SET username = email")
    change_column :users, :username, :string, null: false

    add_index  :users, :username, unique: true
  end
end 
```

# css - -webkit-linear-gradient w/ angle reversed in Safari

> ID：15720299
> 
> 赞同：1
> 
> 时间：2013-03-30T15:38:13.550
> 
> 标签：css, safari, angle, linear-gradients

On my way to finding a CSS solution to have an evenly colored element with angled beginning to avoid images I stumbled across this simple example: [http://dabblet.com/gist/1780333](http://dabblet.com/gist/1780333) . This one is working fine, even in IE of the latest, only Safari is reversing it completely, putting it to the end instead of the beginning AND turning the angle partly, at least in my live site it's not consistent. I have, of course, the same values for all browser versions.

Anybody an idea why it is so and what one can do - or an alternative solution without images to come up with an angled left side of an element?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T10:18:17.780

This isn't a bug - there were quite a few changes between the Working Draft and the Candidate Recommendation for the gradient syntax, one of which is the angle of the gradient:

![Gradient degrees syntax change](../Images/dc5cbfaeb39f378f0ae5354b13d9067c.png)

From the [IE Blog](http://blogs.msdn.com/b/ie/archive/2012/06/25/unprefixed-css3-gradients-in-ie10.aspx). Hence the unprefixed version requires a different `deg` value to the prefixed versions. The CR is much more logical (to me at least), with 0deg being a gradient line pointing to the top and increasing in a clockwise direction.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:35:59.070

I think you found a bug! Or at least Safari is interpreting the angles differently.

This isn't surprising as until pretty recently Safari used the `-webkit-gradient` syntax which is much less flexible. For example, it doesn't allow angles.

Still you can solve your problem by including the old syntax, which still works:

```
 background: -webkit-gradient(linear, 10% 100%, 0% 0%, color-stop(80%, #000000), color-stop(80%, transparent));
  background: -webkit-linear-gradient(60% 100%, #000000 80%, transparent 80%);
  background: -moz-linear-gradient(60% 100%, #000000 80%, transparent 80%);
  background: -o-linear-gradient(60% 100%, #000000 80%, transparent 80%);
  background: linear-gradient(60% 100%, #000000 80%, transparent 80%); 
```

[Demo](http://dabblet.com/gist/5277827)

# ruby-on-rails - How can I enable uniqueness validation when the submit string matched with existing lower case string?

> ID：15720300
> 
> 赞同：1
> 
> 时间：2013-03-30T15:38:32.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

When the user A submits `california`, it saves this as new record.
Then if the user B submits `California`, it saves this as new record, too.

I don't want that:( I want it recognize as the same string even when if it's in upper case or lower case.

Is it possible?

My current code is just like this.

**models/community.rb**

```
validates_uniqueness_of :name, :message => "is already existing. Please type something else!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:41:34.800

uniqueness validator has a `case_sensitive` option which you can set to `false`. More of it in the [documentation](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of).

# c# - 构造类的属性只能在构造函数中设置，但可以到任何地方？

> ID：15720306
> 
> 赞同：5
> 
> 时间：2013-03-30T15:39:09.437
> 
> 标签：c#, variables, properties, member

我正在尝试创建一个将值`a`作为构造函数中的参数的类。它有一个存储这个值的私有成员变量。之后不应更改该值。

这就是我所拥有的，它可以工作，但我认为这不是最好的解决方案：

```
internal class Foo
{
    private int a;
    public int A
    {
        get
        {
            return this.a;
        }
    }

    public Foo(int a)
    {
        this.a = a;
    }
} 
```

所以这种方式你不能`a`从类外部访问，并且`A`-property 只有一个 get 方法。但是，您仍然可以`a`从类内部进行更改，并使用仅返回一个变量而没有其他任何东西的属性感觉很愚蠢。

我这样做对吗，还是有办法改进我的代码/更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T15:41:07.937

另外声明你的私人领域[`readonly`](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)，你就在那里！

```
public class Foo
{
    public Foo(int bar)
    {
        this.bar = bar;
    }

    public int Bar
    {
        get
        {
            return bar;
        }
    }
    private readonly int bar;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-23T14:40:27.640

“在 C# 6 及更高版本中，[您可以像字段一样初始化自动实现的属性](https://msdn.microsoft.com/en-us/library/bb384054%28v=vs.140%29.aspx)”。就像您可以在构造函数中初始化`readonly`字段一样，您可以在构造函数中初始化仅获取自动实现的属性。因此，以下现在编译：

```
public class Class1
{
    public int A { get; }
    public Class1(int a)
    {
        A = a;
    }
} 
```

…以下会产生错误：

```
public class Class1
{
    public int A { get; }
    public Class1(int a)
    {
        A = a;
    }
    public void Mutate()
    {
        // Class1.cs(11,9,11,10): error CS0200: Property or indexer 'Class1.A' cannot be assigned to -- it is read only
        A++;
    }
} 
```

我喜欢它——你可以通过属性的接口/OOP 友好性获得字段初始化的简洁性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:42:38.553

```
internal class Foo
{
    private readonly int _a;
    public int A 
    { 
        get
        {
            return _a;
        }
    }

    public Foo(int a)
    {
        _a = a;
    }
} 
```

这应该这样做。

# .net - Visual Studio - 在设计视图中显示属性窗口但在代码视图中隐藏

> ID：15720309
> 
> 赞同：8
> 
> 时间：2013-03-30T15:39:51.690
> 
> 标签：.net, vb.net, visual-studio

每个人都在设计模式下使用“属性”窗口。当我们切换到代码视图时，我们不需要属性窗口。

从设计视图进入代码视图时是否可以自动隐藏属性窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-29T13:50:15.617

对于 vs2015：（也是 vs2017）

1.  菜单 > 工具 > 扩展和更新
2.  安装“视觉指挥官”。（现在您有了名为“VCmd”的新菜单）
3.  Menu > "VCmd" > Extensions ...（您将在右侧看到一个扩展窗格）
4.  在扩展窗格中按添加按钮。（新标签窗口将打开。）
5.  写一个扩展名。
6.  选择语言为 C#。
7.  粘贴以下代码：
8.  按保存。然后按编译。然后按安装

* * *

**edit2：**代码适用于 c# winforms + xamarin.android 项目。

```
using EnvDTE;
using EnvDTE80;
using System.Windows.Forms;
using System;

public class E: VisualCommanderExt.IExtension {
   private EnvDTE80.DTE2 DTE;
   private EnvDTE.WindowEvents windowEvents;

   public void SetSite(EnvDTE80.DTE2 DTE, Microsoft.VisualStudio.Shell.Package package) {
      this.DTE = DTE;
      DTE.Events.WindowEvents.WindowActivated += OnWindowActivated;
   }

   public void Close() {
      // DTE.Events.WindowEvents.WindowActivated -= OnWindowActivated;
   }

   private void OnWindowActivated(Window gotFocus, Window lostFocus) {
      //project_details();
      HidePropertiesWindowInCodeOrTextView(gotFocus);

    }

   public void HidePropertiesWindowInCodeOrTextView(Window gotFocus) {
      //System.Windows.MessageBox.Show(  gotFocus.Document.Name +"" );

      if (gotFocus.Document == null) return;
      var pwin = DTE.Windows.Item(Constants.vsWindowKindProperties);

      if (isAndroidProject()) 
      {
        pwin.AutoHides = !gotFocus.Caption.EndsWith(".axml");
      }else
      {
        pwin.AutoHides = !gotFocus.Caption.EndsWith(" [Design]");
      }

      //pwin.AutoHides = true;  // pwin.Activate();
   }

   public bool isAndroidProject() {
      if (DTE == null || DTE.ActiveWindow == null) return false;
      var cp = DTE.ActiveWindow.Project;
      var AndroidApp = System.IO.File.ReadAllText(cp.FullName).Contains("AndroidApplication");
      return AndroidApp;
   }

   // for debug , window,document names
   public void project_details() {
      try {
         if (DTE == null || DTE.ActiveWindow == null) return;

         var cp = DTE.ActiveWindow.Project;
         var ad = DTE.ActiveDocument; //Name Kind
         var av = DTE.ActiveWindow; // Caption Kind
         if (cp == null) return;

         var msgp = "aProj:" + (cp != null ? cp.FullName: "[no project for Window]") + "\r\n" 
         + "aDoc: " + ad.Name + ", " + ad.Kind + "\r\n" 
         + "aWin: " + av.Caption + ", " + av.Kind;

         MessageBox.Show(msgp, "ert4 -anbdapp" + isAndroidProject() );

      } catch(Exception ex) {
         MessageBox.Show(ex + "");
      }

   }

} 
```

# ruby-on-rails - 带有 ruby 的 vim omnicomplete 只能部分工作

> ID：15720313
> 
> 赞同：4
> 
> 时间：2013-03-30T15:40:15.937
> 
> 标签：ruby-on-rails, ruby, vim, intellisense, omnicomplete

我有 vim 7.2 的 +ruby 版本（也尝试使用 7.3 和自定义编译版本），但我只能让全功能（ctrl-x ctrl-o）在某些情况下工作。

例如，如果我有

```
class MegaGreeter
    attr_accessor :names

    def initialize(names = "world")
        @names = names
        if @names.nil?
            puts "hello #{@names}.each"
        end
    end
end 
```

omn​​icomplete 适用于`.each`，但不适用于`.nil`。此外，它不会自动完成任何`attr_`关键字。

我已经在禁用所有插件的情况下尝试过，再次启用所有插件。我也尝试过使用 vim-ruby 插件。我安装的插件有 AfterColors、CSApprox、surround、color_sample_pack、mimicpak、taglist。

我的 .vimrc 中有以下部分（如果需要，我可以发布整个 .vimrc）。我还将 VIM 用于 C++、JavaScript 和大约 1/2 打其他语言，因此其中一些语言也有全能的东西：

```
" ============================ "
"   CTAGS / OMNICOMPLETE
" ============================ "

" map <ctrl>+F12 to generate ctags for current folder:
map <C-F12> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<CR><CR>
" add current directory's generated tags file to available tags
set tags+=./projects/.tags
" toggle list view
map <F4> :TlistToggle<cr> 
" auto close omnicomplete options when exiting insert mode
autocmd InsertLeave * if pumvisible() == 0|pclose|endif
" configs for cpp
let OmniCpp_MayCompleteDot = 1 " autocomplete with .
let OmniCpp_MayCompleteArrow = 1 " autocomplete with ->
let OmniCpp_MayCompleteScope = 1 " autocomplete with ::
let OmniCpp_SelectFirstItem = 2 " select first item (but don't insert)
let OmniCpp_NamespaceSearch = 2 " search namespaces in this and included files
let OmniCpp_ShowPrototypeInAbbr = 1 " show function prototype (i.e. parameters) in popup window

if has("win32")
    let Tlist_Ctags_Cmd='c:\programs\ctags\ctags58\ctags.exe'
else
    if has("win32unix")
    let Tlist_Ctags_Cmd='/usr/bin/ctags.exe'
    else
    if has("unix")
        let Tlist_Ctags_Cmd='/usr/bin/ctags'
    endif
    endif
endif

" omnicomplete settings for the popout menu
setlocal omnifunc=syntaxcomplete#Complete
" makes list show longest matching item at top of list
set completeopt=menuone,longest
" makes enter select item
inoremap <expr> <CR>    pumvisible() ? "\<C-y>" : "\<CR>"
inoremap <expr> <Space> pumvisible() ? "\<C-y>" : "\<Space>"
inoremap <expr> <.> pumvisible() ? "\<C-y>" : "\<.>"
inoremap <expr> <S-CR>  pumvisible() ? "\<C-n>\<C-y>" : ""
"manual up/down with tab & shift+tab
inoremap <expr> <Tab>   pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <expr> <S-Tab> pumvisible() ? "\<C-p>" : ""
"allows for autoselect of first item in user complete list
inoremap <expr> <C-n> pumvisible() ? '<C-n>' : '<C-n><C-r>=pumvisible() ? "\<lt>Down>" : ""<CR>'
"allows autoselect of first item for omni complete
inoremap <expr> <leader>' pumvisible() ? '<C-n>' : '<C-x><C-o><C-n><C-p><C-r>=pumvisible() ? "\<lt>Down>" : ""<CR>'
" open omni completion menu closing previous if open and opening new menu without changing the text
inoremap <expr> <C-Space> (pumvisible() ? (col('.') > 1 ? '<Esc>i<Right>' : '<Esc>i') : '') .
            \ '<C-x><C-o><C-r>=pumvisible() ? "\<lt>C-n>\<lt>C-p>\<lt>Down>" : ""<CR>'
" open user completion menu closing previous if open and opening new menu without changing the text
inoremap <expr> <S-Space> (pumvisible() ? (col('.') > 1 ? '<Esc>i<Right>' : '<Esc>i') : '') .
            \ '<C-x><C-n><C-r>=pumvisible() ? "\<lt>C-n>\<lt>C-p>\<lt>Down>" : ""<CR>'

" autocomplete for commands; and put most likely at top using tab complete
" (like windows cmd)
set wildmenu
set wildmode=list:longest

" for ruby 
if has("autocmd")
    filetype indent on
    autocmd FileType cucumber,rspec,ruby set number
    autocmd FileType ruby,eruby set omnifunc=rubycomplete#Complete
    autocmd FileType ruby,eruby let g:rubycomplete_buffer_loading = 1
    autocmd FileType ruby,eruby let g:rubycomplete_rails = 1
    autocmd FileType ruby,eruby let g:rubycomplete_include_object = 1
    autocmd FileType ruby,eruby let g:rubycomplete_include_objectspace = 1
    autocmd FileType ruby,eruby let g:rubycomplete_classes_in_global = 1
else
    set autoindent
endif

" ruby requires bash --login; 
" This is to correct running cmd from vim via :!
if has("unix")
    set shell=/bin/bash\ -il
endif

"ruby end 
```

那么，有没有一种方法可以在omnicomplete 中获得对Ruby 的完全支持，如果可以的话怎么办？或者，这是omnicomplete 为Ruby 提供的最大功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T08:23:22.740

Vim 自动完成功能应该开箱即用，我不知道任何方法`.nil`，所以我不确定这是否是一个真正的问题。

然而，关于omnicompletion没有完成`attr_reader`等等，`setlocal omnifunc=syntaxcomplete#Complete`修复它，但是它应该进入a`ftplugin/ruby/my_custom_ruby_ftplugin.vim`而不是仅仅在你的vimrc中，或者如果你喜欢你可以把那个setl命令放在`autocmd FileType ruby setl omnifunc=syntaxcompelete#Complete`你的vimrc中的a中然后它应该可以工作如你所料。

# c# - 将这两个表达式组合成一个 LINQ 表达式

> ID：15720314
> 
> 赞同：1
> 
> 时间：2013-03-30T15:40:27.530
> 
> 标签：c#, html, linq, xpath, html-agility-pack

我正在使用`HTMLAgilityPack`来解析一些 html。`xpath`当使用和查询与 linq 查询相结合时，我得到了我期望的结果集。有没有办法可以将它们组合成一个 LINQ 查询？

```
var test = doc.DocumentNode.SelectNodes("//div[@class='product']");

foreach (var item in test)
{

    var result = from input in item.Descendants("span")
                 where input.Attributes["class"].Value == "Bold"
                 where input.InnerHtml.ToUpper() == "GetItem"
                 select input;   

    return result;           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:07:08.403

如果您想将所有跨度收集在一起（如果我正确地假设这就是您想要的）...

我首先将其转换为更流畅的符号（我发现`SelectMany`这种方式更容易掌握 - 但这只是我）

*（免责声明：我是从内存中写的，复制/粘贴你的代码 - 目前不是 VS - 你需要检查，如果有任何问题，让它写 - 但我认为我或多或少都可以）*

```
var test = doc.DocumentNode.SelectNodes("//div[@class='product']");
foreach(var item in test)
    item.Descendants("span").Where(input => input.Attributes["class"].Value == "Bold").Where(input => input.InnerHtml.ToUpper() == "GetItem").Select(input => input); 
```

最后...

```
var allSpans = doc.DocumentNode.SelectNodes("//div[@class='product']")
    .SelectMany(item => item.Descendants("span").Where(input => input.Attributes["class"].Value == "Bold").Where(input => input.InnerHtml.ToUpper() == "GetItem")); 
```

...或沿着这些思路

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:22:32.893

只是想向您展示在 Linq 中执行 SelectMany 的另一种方法。这是一种风格选择，SO 中的许多人更喜欢 .SelectMany 扩展方法，因为他们可以看到 Monad 如何应用于 IEnumerable。我更喜欢这种方法，因为它更接近函数式编程模型的做法。

```
return from product in doc.DocumentNode.SelectNodes("//div[@class='product']")
       from input in product.Descendants("span")
       where input.Attributes["class"].Value == "Bold"
       where input.InnerHtml.ToUpper() == "GetItem"
       select input; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:48:27.610

如果您真的想在一个查询中完成所有操作，您可以使用以下内容：

```
var result = doc.DocumentNode.SelectNodes("//div[@class='product']")
    .SelectMany(e => e.Descendants("span")
        .Where(x => x.Attributes["class"].Value == "Bold" && 
                    x.InnerHtml.ToUpper() == "GetItem"))
    .ToList();

return result; 
```

为了便于阅读，我建议将其隔开一点，更像这样：

```
var result = new List<SomeType>();
var nodes = doc.DocumentNode.SelectNodes("//div[@class='product']");

nodes.SelectMany(e => e.Descendants("span")
    .Where(x => x.Attributes["class"].Value == "Bold" && 
                x.InnerHtml.ToUpper() == "GetItem"));

return result.ToList(); 
```

该[`SelectMany()`](http://msdn.microsoft.com/en-au/library/system.linq.enumerable.selectmany.aspx)方法会将内部查询的结果展平为单个`IEnumerable<T>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T16:24:04.640

```
return (
    from result in 
        from item in doc.DocumentNode.SelectNodes("//div[@class='product']")
        from input in item.Descendants("span")
        where input.Attributes["class"].Value == "Bold"
        where input.InnerHtml.ToUpper() == "GetItem"
        select input
    select result
    ).First(); 
```

# java - 实现字计数器

> ID：15720315
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:40:34.437
> 
> 标签：java, collections, hashmap

我正在实施一个字计数器。对于每一个作品的出现，如果不存在，我会创建一个计数器，如果它已经存在，我会增加它的计数器值。我只是打算使用 HashMap 然后将 Integer 存储为值并增加它。我只是想确保没有一些花哨的课程可以进一步简化这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:29:25.487

如果您愿意使用常见的 3rd 方库，a[`HashBag`](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/bag/HashBag.html)会处理所有这些。请注意，API 揭示了一个底层[`MutableInteger`](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/bag/AbstractMapBag.MutableInteger.html)，这是一个明显的信号，表明它正在做你自己要做的事情。

下面是你如何使用它：

```
Iterable<String> words = ...;
Bag<String> counts = new HashBag<String>();
for (String word : words) {
  counts.add(word);
}
for (String word : counts.uniqueSet()) {
  int count = counts.getCount(word);
  System.out.println(word + "\t" + count);
} 
```

# c# - 为访问数据库运行更新查询时出错

> ID：15720316
> 
> 赞同：0
> 
> 时间：2013-03-30T15:40:37.930
> 
> 标签：c#

这是我的代码：

```
OleDbConnection con = new OleDbConnection("provider=microsoft.jet.oledb.4.0;data source=" + Application.StartupPath + "/shoping mall.mdb");
                con.Open();
                OleDbCommand cmd = new OleDbCommand("update RecordofItems set RecordofItems.Bill_no = " + textBox1.Text + ", RecordofItems.Received_from = '" + textBox62.Text + "', RecordofItems.Item_Code = " + textBox2.Text + ", RecordofItems.Quantity = " + textBox32.Text + ", RecordofItems.Sale_Rate = " + textBox47.Text + " where Item_Name = '" + textBox17.Text + "'", con);
                int x = 0;
                x = cmd.ExecuteNonQuery();
                if (x > 0)
                {
                    MessageBox.Show("record deleted" + x);
                }
                else
                {
                    MessageBox.Show("no record exixt");
                }
                con.Close(); 
```

我想更新具有 10 列的“RecordofItems”表中的选定列，但我只想更新 6 个选定列，当我运行查询时它显示错误“一个或多个所需参数没有值”怎么办？请尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:53:16.593

`No value given for one or more required parameters`当您放错单引号时，通常会出现错误。

试试这两个。

1.  尝试为您的数字数据库列分配一个数值，即使用以下内容更新您的查询：

    ```
    RecordofItems.Bill_no = " + Convert.ToInt32(textBox1.Text) + ",  
    RecordofItems.Item_Code = " + Convert.ToInt32(textBox2.Text) + ",    
    RecordofItems.Quantity = " + Convert.ToInt32(textBox32.Text) + ",     
    RecordofItems.Sale_Rate = " + Convert.ToInt32(textBox47.Text) + 
    ```

    或使用适用于您的列的任何合适的数字转换器。

2.  您的一个文本字段中可能有一个单引号，因此请尝试像这样替换/更新您的文本字段：

    ```
    RecordofItems.Received_from = '" + textBox62.Text.Replace("'","''") + "', 
    ```

所以基本上，用两个单引号替换单引号。

看看这些是否能解决您的问题。

另外，请注意，永远不要通过连接文本框（字符串）来创建您的 sql 查询。使用命令参数。他们将使您免于 sql 注入。

# mysql - MySQL JOIN 缺少正确的索引，表扫描

> ID：15720319
> 
> 赞同：0
> 
> 时间：2013-03-30T15:40:55.580
> 
> 标签：mysql, sql, database, join

我有这个简单的 JOIN：

```
SELECT my_table1.*,  
       TIME_FORMAT(time1, '%H:%i') AS time1,
       TIME_FORMAT(time2, '%H:%i') AS time2,
       TIME_FORMAT(time3, '%H:%i') AS time3,
       my_table2.*, 
       TIME_FORMAT(time2_saved, '%H:%i') AS time2_saved,
       TIME_FORMAT(time3_saved, '%H:%i') AS time3_saved,
       my_table3.device_id, my_table3.device_token,
       my_table3.device_language, my_table3.app_edition 
  FROM my_table1, my_table2, my_table3
 WHERE my_table1.flight_id = mytable_2.flight_id 
   AND my_table2.device_id = my_table3.device_id AND my_table3.app_edition = '1' 
```

正如 MySQL 报告的那样，这似乎效率低下。索引显然不是此查询的最佳选择。但是，所有表都有索引，但我缺少一些东西。

如果我在查询之前运行 EXPLAIN，MySQL 将返回以下内容：

```
1
SIMPLE
my_table2
ALL
flight_id,device_id
NULL
NULL
NULL
356

1
SIMPLE
my_table3
eq_ref
device_id
device_id
128
my_databasename.my_table2.device_id
1
Using where

1
SIMPLE
my_table1
ref
flight_id
flight_id
99
my_databasename.my_table2.flight_id
1
Using where 
```

（如果您更喜欢看到干净的桌子，请在此处查看实际屏幕截图：http: [//oi48.tinypic.com/20kov3d.jpg](http://oi48.tinypic.com/20kov3d.jpg)）

如您所见，第一行显示“ALL”类型，这意味着它使用全表扫描。我在这里失踪了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:12:31.533

首先，你应该学习正确的`join`语法，不要`,`在`from`子句中使用陈旧的东西。

我认为问题是`table3`。索引对于查询不是最优的。较好的指标是`table3(app_edition , device_id)`。您可以用这个重新尝试查询。

查询应写为：

```
SELECT my_table1.*,  
       TIME_FORMAT(time1, '%H:%i') AS time1,
       TIME_FORMAT(time2, '%H:%i') AS time2,
       TIME_FORMAT(time3, '%H:%i') AS time3,
       my_table2.*, 
       TIME_FORMAT(time2_saved, '%H:%i') AS time2_saved,
       TIME_FORMAT(time3_saved, '%H:%i') AS time3_saved,
       my_table3.device_id, my_table3.device_token,
       my_table3.device_language, my_table3.app_edition 
  FROM my_table1 join
       my_table2
       on my_table1.flight_id = mytable_2.flight_id join
       my_table3
       on my_table2.device_id = my_table3.device_id AND my_table3.app_edition = '1' 
```

但是，这可能不会影响优化策略。

# c# - 将输入文本从文本框检索到其他表单时出错

> ID：15720327
> 
> 赞同：0
> 
> 时间：2013-03-30T15:41:31.147
> 
> 标签：c#, textbox

我有一个登录表单“ `frmLog()`”，其中包含用户名和密码的文本框，现在我想从用户名文本框中获取输入文本。请参阅下面的代码，不要混淆我使用的是 mysql 数据库，因此其他语法代码并不重要。

这是登录表单“ `frmLog()`”

```
 private void button1_Click(object sender, EventArgs e)
        {
            ApareceCrudLib a = new ApareceCrudLib("localhost", "root", "", "cashieringdb");
            string user = txtLogin.Text;
            string pass = txtPassword.Text;
            string query = "SELECT * FROM register WHERE username='" + user + "' AND password=MD5('" + pass + "')";
            int result = a.Count(query);
            if (result == 1)
            {
                frmMain main = new frmMain();
                main.ShowDialog();
                this.Dispose();
            }
            else
            {
                MessageBox.Show("Login Failed! Try Again");
                txtLogin.Text = "";
                txtPassword.Text = "";
            }
        } 
```

这是我要检索代码“ `frmMain()`”的另一种形式。请参阅`public void dataLog()`这是我尝试从中获取输入值的代码部分`frmLog`。

```
private void frmMain_Load(object sender, EventArgs e)
{
    a = new ApareceCrudLib("localhost", "root", "", "cashieringdb");
    loadDataGridView_Main();
    dataLog();
}
public void loadDataGridView_Main()
{
    dgvMain.Rows.Clear();
    List<string>[] detailList = a.mysqlSelect("Select * From sales");
    for (int i = 0; i < detailList.Length; i++)
    {
        dgvMain.Rows.Add(detailList[i][0], detailList[i][1], detailList[i][2], detailList[i][3]);
    }
}
public void dataLog()
{
    frmLog kk = new frmLog();
    txtLog.Text= kk.txtLogin.ToString();
} 
```

这是错误的结果

![在此处输入图像描述](../Images/3bdcb1486441020de1d0e7763add57e8.png)

结果必须是`frmLog()`示例“client123”中的用户名。你觉得这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:45:26.403

`kk.txtLogin.ToString()`, returns a string that represents the current object. In this case your current object is `TextBox`.

Instead display the `TextBox`, you should show the `TextBox`'s value. Change that code to:

`kk.txtLogin.Text;`

**UPDATE**

If you want to display the `txtLogin` value from `frmLog` in `frmMain`, you can declare static variable in `frmLog` that store the `txtLogin` value.

in `frmLog`:

```
public static String LOGIN_USER = ""; 
```

Then in `button1_Click`:

```
 if (result == 1)
    {
      LOGIN_USER = txtLogin.Text;
      frmMain main = new frmMain();
      main.ShowDialog();
      this.Dispose();
    } 
```

in `frmMain_Load`:

```
 public void dataLog()
    {        
       txtLog.Text= frmLog.LOGIN_USER;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:47:20.557

In your datalog() Methode is the first error.

Replace:`txtLog.Text= kk.txtLogin.ToString();`

With:`txtLog.Text= kk.txtLogin.Text;`

In:

```
 public void dataLog()
 {
        frmLog kk = new frmLog();
        txtLog.Text= kk.txtLogin.ToString();
 } 
```

You create a new frmlog object without showing it, so the textbox is empty. You should retrieve the text from the text box after the user input.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:11:22.147

It is so because you are trying to read data from a new instance of your `frmLog();`

In you `frmMain`, do not write this :

`frmLog kk = new frmLog();`

instead create a public reference in your form class

`public frmLog kk;`

然后，在你的 frmLog 中，

```
frmMain main = new frmMain();
main.kk=this; 
main.ShowDialog(); 
```

这将以第二种形式创建对第一种形式的引用。

# android - Text Rendering in iOS App

> ID：15720331
> 
> 赞同：0
> 
> 时间：2013-03-30T15:42:02.647
> 
> 标签：android, c++, ios, text, rendering

I am curious on how text rendering in application like instaweather_or InstaPlace was done?

What library that they MIGHT/ COULD be using? Because they rendered the text with some complicated symbol, like the clouds symbol and etc. It even has a little bit of drop shadows below the text.

Any thoughts? Thank you..

Please view the image below (Screenshot of the appplication)

[http://img-ipad.lisisoft.com/img/1/6/1677-2-instaweather-pro.jpg](http://img-ipad.lisisoft.com/img/1/6/1677-2-instaweather-pro.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:22:52.603

They could be embedding a custom font. They could also not be text, but vector art of some kind. SVG or other. In short, this could be done lots of ways. It could be Core Text, it could be a UIWebView or something else

# scala - StackOverflowError during filtering a Scala stream

> ID：15720333
> 
> 赞同：0
> 
> 时间：2013-03-30T15:42:07.897
> 
> 标签：scala

I'm trying to filter a stream with a predicate, but when I try to convert the stream to a list that contains an element that the predicate returns `false` for, I receive an error.

```
def machine(n:Int) = if (n==0) List(0) else List(n/2,n/3,n/4)
def greater(n:Int) = machine(n).sum > n

val d: Stream[Int] = 2 #:: d.map(_+1).filterNot(greater)

scala> d.take(11).toList
res41: List[Int] = List(2,3,4,5,6,7,8,9,10,11)

//12 is the first number for which greater will return true
scala> d.take(12).toList
//Returns a ton of scala.collection.immutable.Stream errors 
```

Could someone please explain to me what exactly is going wrong here? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:48:30.223

The code works recursively. When you run out of items in your stream, recursion gets you nowhere, and eventually you run out of stack space. (What are you expecting to happen when you ask for more items than can possibly be in your stream because you filter out all the large ones? You should either get a stack overflow or non-termination (hang), right?)

# angularjs - Angular.JS: why can't the inputs be edited?

> ID：15720334
> 
> 赞同：9
> 
> 时间：2013-03-30T15:42:18.677
> 
> 标签：angularjs

This is a strange problem. The code is simple:

HTML code:

```
<body ng-controller="MainCtrl">
  <ul ng-repeat="name in names">
    <input type="text" ng-model="name" />
  </ul>
</body> 
```

Angular code:

```
app.controller('MainCtrl', function($scope) {
    $scope.names = ["aaa","bbb","ccc"];
}); 
```

The live demo url is: [http://plnkr.co/edit/2QFgRooeFUTgJOo223k9?p=preview](http://plnkr.co/edit/2QFgRooeFUTgJOo223k9?p=preview)

I do not understand why the input controls can not be edited, I can't type new characters or delete characters.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T15:57:58.197

This is a common issue due to scope inheritance . Each of your `names` is a primitive so `ng-repeat` makes it's own scope item that is not connected to original, however if each `names` is an object `ng-repeat` scope item will be a reference to original object

```
 [{name:"aaa"},{name:"bbb"},{name:"ccc"}]; 
```

Always use a `dot` in `ng-model` is a helpful rule of thumb

```
<div ng-repeat="item in names">
      <input type="text" ng-model="item.name"/>
    </div> 
```

[Working Plunker](http://plnkr.co/edit/bbzuZFBLyRAIoaMnZMmf?p=preview)

Read this article on angular github wiki for detailed explanaton:

[https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-22T23:54:10.387

Angular 'fixed' this in 1.1 with the track by $index. No need to change your model.

```
<div ng-repeat="item in names track by $index">
    <input type="text" ng-model="names[$index]" />
</div> 
```

[Plunker here](http://plnkr.co/edit/nMPsPmn4KcAonuG3hAkx?p=preview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T09:10:52.383

Late answer, but you should also be careful of typos, that angular will not warn you about:

```
<div ng-repeat="item in names track by $index" ng=if="names[$index] = 'John'">
    <input type="text" ng-model="names[$index]" />
</div> 
```

Note the single equals in the ng-if, that will not cause a warning or error, but the text will also be read only. Quite a hard one to spot if you are reading quickly.

It of course should be:

```
<div ng-repeat="item in names track by $index" ng-if="names[$index] == 'John'">
    <input type="text" ng-model="names[$index]" />
</div> 
```

# javascript - 'Failed to get tabs for debugging' when trying to debug NodeJs with chrome debugger for Eclipse

> ID：15720338
> 
> 赞同：3
> 
> 时间：2013-03-30T15:42:53.367
> 
> 标签：javascript, node.js, debugging, ubuntu, google-chrome-devtools

I have struggled this for couple of days without any success, please help me out.

What I am seeking is to find a better IDE for editing and debugging Node.js based JavaScript server code. I have successfully installed Eclipse IDE for JavaScript and followed link [https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger) installed Chrome debugger for Eclipse.However, when I tried to debug I encountered an error saying 'Failed to get tabs for debugging'![Debug error](../Images/acf8951596adf2915176240ba828d25e.png)

Here are the steps what I did:

1.  Installed Node.js v0.10.0
2.  Installed Eclipse IDE for JavaScript
3.  Installed Chrome debugger for Eclipse by following [https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)
4.  Create a debug configuration under WebKit Protocol (refer to bottom picture)
5.  Create a JavaScript project in Eclipse
6.  Create a JavaScript source file in the project
7.  Open a Ubuntu terminal and run the JavaScript source file: node debug test1.js
8.  In Eclipse try debug with the custom debug configuration and the error happens.
9.  PS: my Ubuntu is 12.04 64bit; NodeJs remote debug port is default 5858

Please help me on this, what did I missing from the steps?

![Eclipse debug configuration for Node.js](../Images/d5c6af0cfaa7e8bd91aee6333fc25f4f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:24:00.730

Step #4 is incorrect. Should be "Standalone V8 VM".

# c++ - Implementing endless map in memory

> ID：15720341
> 
> 赞同：4
> 
> 时间：2013-03-30T15:42:59.977
> 
> 标签：boost, c++, boost, maps

I will have to implement an endless 3D raster map in program memory. The map may or may NOT start at [0;0;0]. The map has Y coordinate limited by 255, others may be infinite. (yes, now, you may have guessed it is a Minecraft map)
I need to create some class which will have simple `McMap::getBlock(int x, short y, int z)` and `McMap::setBlock(int x, short y, int z)` method. Means I need to be able to both read and write the data. I also want to be able to **delete blocks** and so **free the memory**.
What should user for this purpose? I think the best solution would be some table with such structure:

```
int x|short y|int z|int block id|other values...
-----+-------+-----+------------+---------------
   55|     21|  666|           1| 
```

But how do I implement this with C++, without using real MySql (that would be real overkill)? Also, I don't want to **keep** the map when the program exits, so I want the data to be **inside** the programs memory.
Once more, consider that the map **is infinite** and so the coordinates may be **whatever**. Also do not forget that a **very distant** points may be mapped.
Also, a very important thing to note: I need to have an **effective way** to get block by X, Y and Z coordinates - I **don't** want to walk through all block to find one of them.
I have already included [boost](/questions/tagged/boost "show questions tagged 'boost'") library.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:27:17.260

You can decompose your map in chunks, like in minecraft. Each chunk is **W** * **H** * **L** (x y z) blocks. So, a chunk is just a 3d array. The best to do is to wrap it into a 1d array:

```
BlockType* chunk = new BlockType[W * H * L];
BlockType block = chunk[x + z * W + y * W * H]; 
```

This is to have a good memory management (and is a lot better than storing the whole possible map in an array). Note than accessing a block in a chunk is O(1) and here should be very fast.

Then, you can store your chunks. Each chunk is given 2d coordinates that are its id. The fastest (for access) should be a std::map:

```
std::map<ChunkCoord, ChunkType*> map; 
```

Access to block is fast. You need to get the chunk (a division should give you the chunk coords from point coords), then you get the block. Accessing a chunk is in O(log(numChunks)).

Creating a chunk is allocating memory and creating a new item in the map. You will still be limited by the amount of memory in the computer (infinity is not part of this world...), that's why minecraft-like games often save unused chunks to disk. Saving to disk is the only way to have a near-endless map.

The tricky point is to find good values for **W**, **H**, and **L**. For this, I'm afraid you will have to test and measure a lot...

*Note*: extending this idea leads to quadtrees. You can use them, but they may have too much memory overhead.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T16:42:25.710

I assume you probably wouldn't need to the have entire possible area of a Minecraft world in memory time because that would be incredibly huge (1024000000 KM^2). If you are just trying to keep the area that anyone would usually end up visiting during a game in memory I think it would be completely feasible to access it using STL (Standard template library).

Minecraft worlds are always loaded in game in chunks which are 16X16X255 blocks. You could store chunks in your program in a `std::map`. There are a few advantages to this method. The first is it allows representation of locations well beyond the playable area of the map based on the wiki entry for the [Far Lands](http://www.minecraftwiki.net/wiki/Far_Lands). It also allows for a sparse representation of the minecraft map that will very closely resemble how actual Minecraft maps are rendered. Only the chunks that you are using for your program are loaded in the `std::map` and hopefully keep memory usage reasonable. You would be able to represent any area no matter its location in the playable area of the total possible Minecraft map area.

To implement this you will just have to first create the world datatype:

```
using namespace std;
struct Block
{
     // Whatever information you care to store here...
};
typedef vector<block> Chunk;
typedef map<int, map<int, Chunk> > World; 
```

Then to access a single block:

```
Block McMap::getBlock(int x, short y, int z)
{
    const int WIDTH = 16; // You might want to store these constants elsewhere
    const int HEIGHT = 255;
    int chunkx = x / WIDTH;
    int chunkz = z / WIDTH;
    return yourWorld[chunkx][chunkz][x + z * WIDTH + y * HEIGHT * WIDTH];
} 
```

To erase a chunk:

```
void McMap::eraseChunk(int x, int z)
{
    if (yourWorld.find(x)) // Tests to make sure that row exists in the map.
        yourWorld[x].erase(z);
} 
```

Another benefit to using this method is that by creating a clever constructor for a chunk rather than just using a `typdedef` like I did you could automatically generate a chunk when you need to access a new chunk in the world `std::map` similar to how chunks are generated in Minecraft only when you visit them. Whenever you access an object that does not exist yet in a map it will call the default constructor for that object.

# iphone - for.....循环中的加速

> ID：15720343
> 
> 赞同：2
> 
> 时间：2013-03-30T15:43:05.540
> 
> 标签：iphone, objective-c, accelerometer

我有一个 for.... 循环，然后 UI 在循环中被阻塞。加速度计是否也被挡住了？

我在 viewDidLoad 中有以下代码

```
- (void)viewDidLoad{
    [super viewDidLoad];
    UIAccelerometer *accel = [UIAccelerometer sharedAccelerometer];
    accel.delegate = self;
    accel.updateInterval = 1.0f/60.0f;
 } 
```

再往下

```
- (void)accelerometer:(UIAccelerometer *)acel didAccelerate:(UIAcceleration *)acceleration {
    acc=acceleration.x;
} 
```

然后一个 IBAction 连接到一个启动循环的按钮

```
- (IBAction)doSomething {
    for (int n = 1; n<=100;n++) {
        // do someting in the loop
        NSLog(@"x: %g", acc);
     }
 } 
```

记录加速度计 x 值时，它仅在按下按钮时显示第一个值，并且在循环运行时不更新。相同的第一个值不断重复。有没有办法在循环中记录加速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:17:08.840

UIAccelerometer 似乎需要主线程，因此被 for...loop 阻塞。Core Motion 在对象中还有一个加速度计属性`CMMotionManager`，可以报告加速度，并且由于它是 Nike+ 使用的，因此可以更好地进行背景设置。有两种方法可以访问它 - 直接获取数据的拉取方法或回调。老实说，我只是尝试过，但无法让回调工作（主要是因为它需要 NSOperationQueue 并且我对此没有太多经验，所以我可能将它放在错误的队列中），但是如果你可以提取数据，你的方法似乎需要，然后这个工作：

```
CMMotionManager *motionManager = [[CMMotionManager alloc] init];
[motionManager startAccelerometerUpdates];

for (int i = 0; i < 10000; i++)
{
    NSLog(@"Acceleration: %f", motionManager.accelerometerData.acceleration.x);
} 
```

我刚刚在设备上尝试过，for...loop 中报告的值会随着当前加速度更新。

来源：[UIBackgroundModes 和 UIAccelerometer](https://stackoverflow.com/questions/9351961/uibackgroundmodes-and-uiaccelerometer)

# certificate - ActivIdentity ClientCache：每个会话与每个进程

> ID：15720344
> 
> 赞同：0
> 
> 时间：2013-03-30T15:43:13.343
> 
> 标签：certificate, cac

请确认我正确理解 CAC 的这些 ActivIdentity 概念。

`Per Session`：用户运行 IE 并点击需要 CAC 身份验证的 SSL 网页。他进行身份验证，然后……他进入了。如果用户打开另一个选项卡（另一个进程），并尝试访问同一个网站，那么他已经通过了身份验证。因此，他不需要重新进行身份验证。

`Per Process`：用户通过成功的 CAC PIN 验证打开第一个网页（同上）。现在，当他打开一个新选项卡来访问 SSL 网站时，他需要重新进行身份验证，因为他正在访问一个新进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:15:51.337

我假设您指的是**ActivClient PIN 缓存**设置？

**每个会话**是指整个 Windows 登录会话。 **每个进程**是指启动的每个 Windows 进程。

因此，如果 PIN 缓存设置为**每个会话**，那么一旦您输入卡的 PIN，它将被缓存 15 分钟（默认），以便在该 Windows 会话中请求卡操作的任何应用程序。因此，在 PIN 缓存超时之前，不会再次提示用户为任何应用程序输入 PIN。

在**Per Process**模式下，PIN 只为请求它的进程缓存。例如; 用户打开 IE 并使用 PIN 登录到 CAC 应用程序，然后 PIN 会为特定的 IEXPLORE.EXE 进程缓存 15 分钟（默认）。如果用户随后在 15 分钟窗口内打开 Outlook，并尝试使用 is 卡签署电子邮件，那么他将必须输入 PIN，因为它没有为 OUTLOOK.EXE 缓存。由于每个 IE 选项卡都会生成一个新进程，因此主体**应该**是相同的。

以下内容来自 ActivClient 管理指南：

> ActivClient PIN 缓存可配置为按会话（指 Windows 会话）或按进程（指 Windows 进程）应用。
> 
> 每会话模式（默认配置）允许用户的 Windows 会话中的所有进程共享相同的 PIN 缓存（即，无论会话期间使用什么应用程序，整个会话都需要一次用户身份验证）。
> 
> 在每个进程模式下，每个 Windows 进程的 PIN 缓存都是独立的（也就是说，用户需要在每个将使用该卡的进程中输入他们的 PIN 至少一次）。
> 
> 在这两种模式下，您都可以使用包含列表、排除列表和打开卡列表进一步自定义特定应用程序的 PIN 缓存行为

# python - 在 .add_argument 版本中插入变量

> ID：15720345
> 
> 赞同：0
> 
> 时间：2013-03-30T15:43:17.930
> 
> 标签：python, python-2.7

目前我使用

```
parser.add_argument('--version', action='version', version='%(prog)s 1.0') 
```

我想让'1.0'成为一个变量。

我尝试了各种没有运气的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:45:12.647

只需使用字符串格式：

```
version = '1.0'
parser.add_argument('--version', action='version', version='%(prog)s {}'.format(version)) 
```

您的程序版本在它的（简短，仅显示命令行帮助）生命周期内不会更改，因此您只需插入*一次*。

# android - 单击后，Android 首选项页面不显示，我该如何使其工作？

> ID：15720346
> 
> 赞同：0
> 
> 时间：2013-03-30T15:43:24.160
> 
> 标签：android, android-preferences

我正在尝试创建一个首选项页面，一旦选择了一个项目，它就会转到应用程序的首选项页面。当我单击该项目时，它不起作用。请有人可以帮我找出如何使这项工作？这是代码：

偏好 Java 文件：

```
public class UserSettingActivity extends PreferenceActivity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getFragmentManager().beginTransaction().replace(android.R.id.content, new MyPreferenceFragment()).commit();
    }

    public static class MyPreferenceFragment extends PreferenceFragment
    {
        @Override
        public void onCreate(final Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.preferences);
        }
    }

} 
```

Main Activity Java 文件特定代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    // Goes back to the home screen
    case R.id.item1:  Intent i = new Intent(this, UserSettingActivity.class);
    startActivity(i); 
```

首选项 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<EditTextPreference
    android:title="EditText"
    android:key="name"
    android:summary="Enter your name" />

<CheckBoxPreference 
    android:title="Vibrate"
    android:defaultValue="true"
    android:key="vibrateCheckbox"
    android:summary="Turn vibrate on or off"/>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:44:32.310

我认为这是因为您将错误的上下文传递给意图：

而不是这个：

```
case R.id.item1:  Intent i = new Intent(this, UserSettingActivity.class); 
```

写这个：

```
case R.id.item1:  Intent i = new Intent(yourActivityName.this, UserSettingActivity.class); 
```

# html - 使用分隔符/子标题创建可访问列表

> ID：15720347
> 
> 赞同：6
> 
> 时间：2013-03-30T15:43:28.103
> 
> 标签：html, accessibility

我正在尝试确定创建具有子标题（或组分隔符/可折叠标题，如果您愿意）的可访问手风琴/列表的最佳方法。

为了说明，这是默认的外观（示意图）：

![在此处输入图像描述](../Images/353d6c0b1064266ec1d01c3065408376.png)

有些项目是可点击的（并通过更改背景颜色和更改光标来提供提示），有些则不是（如“列表项目 13”）。

一些（或全部）子标题可能是可折叠的（稍后添加一些额外的提示）：

![在此处输入图像描述](../Images/ee68d1889068d653dcbe29bf29aa64a2.png)

现在，该结构可以通过几种可能的方式实现：

**选项 1\. 标准和可访问性见鬼去吧**

```
<ul>
  <div class="header"><a href="...">Header 1</div>
  <li><a href="...">List item 11</a></li>
  <li><a href="...">List item 12</a></li>
  <li><span>List item 13</span></li>
  <div class="header"><a href="...">Header 2</div>
  <li><a href="...">List item 21</a></li>
  <li><span>List item 22</span></li>
</ul> 
```

这个确实有效。它不可访问且未通过 HTML 验证，但它可以工作。

**选项 2\. 好吧，至少它通过了验证器**

```
<ul>
  <li class="header"><a href="...">Header 1</a></li>
  <li><a href="...">List item 11</a></li>
  <li><a href="...">List item 12</a></li>
  <li><span>List item 13</span></li>
  <li class="header"><a href="...">Header 2</a></li>
  <li><a href="...">List item 21</a></li>
  <li><span>List item 22</span></li>
</ul> 
```

这个通过验证并且在一定程度上可以访问，但不允许区分标题和常规可单击列表项（就屏幕阅读器而言）。

**选项 3\. TL;DR**

```
<ul>
  <li>
    <a class="header" href="...">Header 1</a>
    <ul>      
      <li><a href="...">List item 11</a></li>
      <li><a href="...">List item 12</a></li>
    </ul>
  </li>
  <li>
     <a class="header" href="...">Header 2</a>
     <ul>       
       <li><a href="javascript:;">List item 21</a></li>
       <li><span>List item 22</span></li>
     </ul>
  </li>
</ul> 
```

这一个，或者它的一些更深思熟虑的变体似乎就是那个。可访问，因为我认为外部或内部项目符号应该由屏幕阅读器正确读取并通过验证。

编码和维护只是更多的 PITA。从 JS 和 CSS 的角度来看，特别是如果它是一个旨在扩展和定制的插件。

所以问题是——如果有的话，上面哪一个会更好。或者，最终的手风琴/列表实现是什么？（根据我的经验，这可能是一个白日梦）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T18:23:53.580

第三种选择在可访问性方面远远胜过其他两种。如果手风琴/列表确实有很多内容，那么可能值得为每个列表项添加标题（`<h1>`、`<h2>`等）。这将为页面提供更多语义结构，这将有助于使用辅助技术的用户。

```
<h1>Some sections</h1>

<ul>
  <li>
    <h2><a class="header" href="...">Header 1</a></h2>
    <ul>      
      <li><a href="...">List item 11</a></li>
      <li><a href="...">List item 12</a></li>
    </ul>
  </li>
  <li>
     <h2><a class="header" href="...">Header 2</a></h2>
     <ul>       
       <li><a href="javascript:;">List item 21</a></li>
       <li>List item 22</li>
     </ul>
  </li>
</ul> 
```

由于其分层特性，第三个选项也是使用 JavaScript 设计和操作的最佳选择。

## 隐式切片

评论中有关于隐含和明确部分的讨论，所以我想我会解决它。我试图下载[HTML5 Outlier Chrome 扩展](https://chrome.google.com/webstore/detail/html5-outliner/afoibpobokebhgfnknfndkgemglggomo)来测试它，但不幸的是它似乎没有出现在栏中。这是我的理解：

HTML5 中的分段根元素是：

*   `<body>`
*   `<blockquote>`
*   `<details>`
*   `<fieldset>`
*   `<figure>`
*   `<td>`
*   `<nav>`
*   `<aside>`
*   `<footer>`
*   `<header>`

由于它们都不存在，因此这些部分对于标题元素的使用是隐含的，就像在 HTML4 中一样，因此上面标记的文档大纲如下所示：

1.  一些部分

    1.1。标题 1

    1.2\. 标题 2

这正是我们所期望和想要的。这是来自 unor 的评论

> 它在语法上是允许的。但这对于文档大纲来说将是一个问题：由标题引入的新部分的开始（→开头 li）仍然是前一部分的一部分。如果您使用节（或任何其他节元素）显式，则明确指定该节的开始和结束。

I believe he's saying that the `<li>` before '1.1\. Header 1' would be part of the section '1\. Some sections' which is true and I'm my opinion not a problem as the `<li>` should belong to the section above. The usage of a sectioning root element like `<section>` to explicitly define a section block would lead to very much the same result as we had previously:

```
<ul>
  <li>
    <section>
      <h2><a class="header" href="...">Header 1</a></h2>
      <ul>      
        <li><a href="...">List item 11</a></li>
        <li><a href="...">List item 12</a></li>
      </ul>
    </section>
  </li> 
```

I'm of the opinion (can't find a source) that implicit sectioning is just as 'scoped' as explicit sectioning would be. Since the document outline is a list the `</li>` after the `</section>` in the above would still be part of 1.1 Header 1 according to the document outline like this.

```
<!-- start 1\. Some sections -->
<h1>Some sections</h1>

<ul>
  <li>
    <section>
      <!-- start 1.1\. Header 1 -->
      <h2><a class="header" href="...">Header 1</a></h2>
      <ul>      
        <li><a href="...">List item 11</a></li>
        <li><a href="...">List item 12</a></li>
      </ul>
    </section>
  </li>
  <li>
    <!-- end 1.1\. Header 1 -->
    <section>
      <!-- start 1.2\. Header 2 -->
      <h2><a class="header" href="...">Header 2</a></h2>
      <ul>      
        <li><a href="javascript:;">List item 21</a></li>
        <li>List item 22</li>
      </ul>
    </section>
  </li>
</ul>

<!-- end 1\. Some sections --> 
```

也就是说，一旦你开始一个小节，你就不能结束它，直到你开始另一个节，所以`</li><li>`会被包含在 '1.1\. 标题 1' 也包含在其父节 '1\. 一些部分'。

## 参考

*   [Mozilla 开发人员 - 隐式切片](https://developer.mozilla.org/en-US/docs/HTML/Sections_and_Outlines_of_an_HTML5_document#Implicit_Sectioning)
*   [Smashing Magazine - HTML5 和文档大纲算法](http://coding.smashingmagazine.com/2011/08/16/html5-and-the-document-outlining-algorithm/)
*   [HTML5 医生 - 大纲](http://html5doctor.com/outlines/)

# java - When pressed Letter, Write the letter a Edittext

> ID：15720351
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:43:37.420
> 
> 标签：java, android, layout

I have a problem As it can be seen in the picture there are 3 Buttons and a EditText

![enter image description here](../Images/f04c0baa89692f953727fbb4c1174a9e.png)

Need to write in the box which button is pressed and write the corresponding character in the EditText. Just like a keyboard. Sorry for my bad English. Like this:

![enter image description here](../Images/ec547b7b4c3f29a4744b9c5efbbea13b.png)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:57:33.193

You should define a `StringBuilder`, then every time you press a button add that characted to the StringBuilder and update the content of EditText.

Just a quick snippet:

```
 StringBuilder s = new StringBuilder();
    EditText et = (EditText) findViewById(EDITTEXT_ID_PATH);

    Button button_q = (Button) findViewById(BUTTON_Q_ID_PATH);
    button_q.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                s.append("q");
                et.setText(s);
            }
        });

    Button button_e = (Button) findViewById(BUTTON_E_ID_PATH);
    button_e.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                s.append("e");
                et.setText(s);
            }
        });

    Button button_w = (Button) findViewById(BUTTON_W_ID_PATH);
    button_q.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                s.append("w");
                et.setText(s);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:04:01.920

You can also use switch case, here is the completed code

```
public class MainActivity extends Activity implements OnClickListener{
    EditText et1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button b1 = (Button)findViewById(R.id.button1);
        Button b2 = (Button)findViewById(R.id.button2);
        Button b3 = (Button)findViewById(R.id.button3);
        et1 = (EditText)findViewById(R.id.editText1);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()) {
            case R.id.button1:
                et1.append("Q");
                break;
            case R.id.button2:
                et1.append("E");
                break;
            case R.id.button3:
                et1.append("W");
                break;
            default:
                break;
            }
    }

} 
```

# node.js - 在继续主函数之前如何获取回调函数的结果？

> ID：15720352
> 
> 赞同：1
> 
> 时间：2013-03-30T15:43:43.560
> 
> 标签：node.js, callback, coffeescript, request

我使用递归函数来构造包含（URL、子项、数据）的 JSON 数据。我将此数据发送到我的图表（RGraph 库）以创建它。问题是在我的功能中`creer_json = (url, nom, recursif, recursif_max)`我遇到了问题。这是代码：

```
creer_json = (url, nom, recursif, recursif_max) ->
recursif--
resultat = {}
@tab = []
tableau = getBody(url,(error,message) ->
    @tab = getTab(message.body))
tab_children = []
tab_relation = []
indice = 0
id_enfant = 1
adresse = "<h1>Liens de "+url+"</h1>"
while indice < tab.length
    if (recursif == recursif_max-1)
        id_urlfils = id_enfant
    else
        id_urlfils = nom+"."+id_enfant
    adresse = adresse+" "+"<li>"+id_urlfils+" : "+"<a href="+tab[indice]+">"+tab[indice]+"</a></li>"
    indice++
    id_enfant++
tab_relation.push("<ul>"+adresse+"</ul>")
id_url = 1
i = 0
while i < tab.length
    if (recursif == recursif_max-1)
        id_urlfils = id_url
    else
        id_urlfils = nom+"."+id_url
    if recursif >= 0
        json2 = creer_json(tab[i], id_urlfils, recursif, recursif_max)
        tab_children.push(json2)
    i++
    id_url++
resultat = 
    id : nom
    name : nom
    children : tab_children
    data : { relation: tab_relation }
return resultat 
```

我的问题是我需要第四条指令的结果来继续主要功能：

```
tableau = getBody(url,(error,message) ->
    @tab = getTab(message.body)) 
```

@tab 包含网站的所有 URL，我必须循环它们以构造 JSON 数据。主要功能在没有@tab 的结果的情况下继续，我需要该数据！我的问题可能不清楚，所以如果您不明白，请随时问我。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:00:41.167

正如 Eru 所写：如果您需要异步调用的结果，则必须在回调中继续。您无法重新同步异步调用。这也意味着您不能从`creer_json`. 相反，如果您需要返回值，则必须添加一个回调参数来获取传递的返回值。更重要的是，由于`creer_json`将成为一个异步函数并且您递归调用它，因此这些递归调用需要带有回调。

# ios - 检查 NSUrl 重定向

> ID：15720355
> 
> 赞同：0
> 
> 时间：2013-03-30T15:43:54.560
> 
> 标签：ios, objective-c, xml, uiwebview, nsurlconnection

我有一个表格视图，其中列出了从 RSS 提要中提取的应用程序的招聘信息。不幸的是，相当多的已过期的职位发布仍然留在提要中。我的应用程序可以用来知道该职位不再发布（因为它使用链接转到职位发布页面）的唯一信息是，当您单击链接并推送 UIView 时，显示的链接已过期，并显示一条消息，对于给您带来的不便，我们深表歉意，但该职位的状态最近发生了变化。在较旧的帖子上，它不会加载（这些通常是以 docs.sitename.doc 开头的帖子），然后是“找不到文件”消息，没有注明的 URL 重定向链接。有没有什么直接的方法值得研究来过滤掉这些？至少到哪里我可以注意到职位已经过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:29:48.093

好的，这里有很多要处理的。

1.  重定向检测：如果您正在使用`NSURLConnection`，请查看[处理重定向和其他请求更改](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/urlloadingsystem/Articles/RequestChanges.html)。
2.  处理 RSS：当您将 RSS 中的数据加载到表中时，请测试链接。如果您同步执行此操作，则会导致更长的加载时间。如果您异步执行此操作，那么您最终会显示一些不好的结果，然后随着 URL 的处理而消失（很像 CoreData 更新）。

作为替代方案，看看您是否可以预处理 RSS。我不知道您可以访问哪些服务器工具，但让服务器读取 RSS 提要并删除无效条目可能值得您花时间。这将创建一个仅包含有效条目的新 RSS 提要（在您的服务器上）。

# php - 事务数据库中的多值属性

> ID：15720367
> 
> 赞同：0
> 
> 时间：2013-03-30T15:44:54.483
> 
> 标签：php, mysql, rdbms, database

我想为本地商店之一制作软件。我正在制作具有属性的交易表

```
tran_id, name ,mob_no, date_of_sale, date_of_payment(multivalued),product(multi),quantity(multi),total_amount,unpaid 
```

由于买方可以分期付款 date_of_payment 是多重价值的。还有其他更好的方法吗？如何在mysql中实现多值属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:49:10.407

所谓的“多值”字段打破了第一范式（1NF）。为此，您需要一张 1 米的桌子。阅读[http://web.archive.org/web/20110606025027/http://dev.mysql.com/tech-resources/articles/intro-to-normalization.html](http://web.archive.org/web/20110606025027/http://dev.mysql.com/tech-resources/articles/intro-to-normalization.html)和[http://www.databasedev.co .uk/database_normalization_process.html](http://www.databasedev.co.uk/database_normalization_process.html)，他们将开始向您展示如何开始设计数据库。

# javascript - 来自 json 的选项单一使用值 - Knockout JS

> ID：15720375
> 
> 赞同：0
> 
> 时间：2013-03-30T15:45:31.913
> 
> 标签：javascript, jquery, knockout.js

我有来自另一个视图模型的数据，我在下拉菜单中显示它。我需要其他视图模型中的每个选项每行都是唯一的，因此一旦用户将项目添加到列表中，该选项将不再可用。

这是工作小提琴：http: [//jsfiddle.net/QTUqD/9/](http://jsfiddle.net/QTUqD/9/)

```
 window.usrViewModel = new function () {
    var self = this;
    window.viewModel = self;

    self.list = ko.observableArray();
    self.pageSize = ko.observable(10);
    self.pageIndex = ko.observable(0);
    self.selectedItem = ko.observable();    
    self.extData = ko.observableArray();    
    extData = ExtListViewModel.list();

    self.edit = function (item) {
        if($('#usrForm').valid()) {
        self.selectedItem(item);
        }
    };

    self.cancel = function () {
        self.selectedItem(null);
    };

    self.add = function () {
        if($('#usrForm').valid()) {
        var newItem = new Users();
        self.list.push(newItem);
        self.selectedItem(newItem);
        self.moveToPage(self.maxPageIndex());
        };
    };
    self.remove = function (item) {

            if (confirm('Are you sure you wish to delete this item?')) {

                    self.list.remove(item);
                    if (self.pageIndex() > self.maxPageIndex()) {
                        self.moveToPage(self.maxPageIndex());
                    }

            }
            $('.error').hide();

    };
    self.save = function () {

        self.selectedItem(null);

    };

    self.templateToUse = function (item) {
        return self.selectedItem() === item ? 'editUsrs' : 'usrItems';
    };

    self.pagedList = ko.dependentObservable(function () {
        var size = self.pageSize();
        var start = self.pageIndex() * size;
        return self.list.slice(start, start + size);
    });
    self.maxPageIndex = ko.dependentObservable(function () {
        return Math.ceil(self.list().length / self.pageSize()) - 1;
    });
    self.previousPage = function () {
        if (self.pageIndex() > 0) {
            self.pageIndex(self.pageIndex() - 1);
        }
    };
    self.nextPage = function () {
        if (self.pageIndex() < self.maxPageIndex()) {
            self.pageIndex(self.pageIndex() + 1);
        }
    };
    self.allPages = ko.dependentObservable(function () {
        var pages = [];
        for (i = 0; i <= self.maxPageIndex() ; i++) {
            pages.push({ pageNumber: (i + 1) });
        }
        return pages;
    });
    self.moveToPage = function (index) {
        self.pageIndex(index);
    };

};

ko.applyBindings(usrViewModel, document.getElementById('usrForm'));

function Users(fname, lname, email, phone, access, usrExtVal){
    this.fname = ko.observable(fname);
    this.lname = ko.observable(lname);
    this.email = ko.observable(email);
    this.phone = ko.observable(phone);
    this.access = ko.observable(access);
    this.usrExtVal = ko.observableArray(usrExtVal);   
} 
```

* * *

```
<form id="usrForm">
<h2>Users</h2>
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Access</th>
            <th>Extension</th>
            <th style="width: 100px; text-align:right;" />
        </tr>
    </thead>
   <tbody data-bind=" template:{name:templateToUse, foreach: pagedList }"></tbody>
</table>
<p class="pull-right"><a class="btn btn-primary" data-bind="click: $root.add" href="#" title="edit"><i class="icon-plus"></i> Add Users</a></p>
<div class="pagination pull-left">
    <ul><li data-bind="css: { disabled: pageIndex() === 0 }"><a href="#" data-bind="click: previousPage">Previous</a></li></ul>
    <ul data-bind="foreach: allPages">
        <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex() + 1) }"><a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber-1); }"></a></li>
    </ul>
    <ul><li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li></ul>
</div>

<br clear="all" />
    <script id="usrItems" type="text/html">
   <tr>
        <td data-bind="text: fname"></td>
        <td data-bind="text: lname"></td>
        <td data-bind="text: email"></td>
        <td data-bind="text: phone"></td>
        <td data-bind="text: access"></td>
        <td data-bind="text: usrExtVal"></td>
        <td class="buttons">
            <a class="btn" data-bind="click: $root.edit" href="#" title="edit"><i class="icon-edit"></i></a>
            <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
        </td>
    </tr>
</script>

 <script id="editUsrs" type="text/html">
   <tr>
        <td><input data-errorposition="b" class="required" name="fname" data-bind="value: fname" /></td>
        <td><input data-errorposition="b" class="required" name="lname" data-bind="value: lname" /></td>
        <td><input data-errorposition="b" class="required" name="email" data-bind="value: email" /></td>
        <td><input data-errorposition="b" class="required" name="phone" data-bind="value: phone" /></td>
        <td><select data-bind="value: access"><option>Employee</option><option>Administrator</option><option>PBX Admin</option><option>Billing</option></select></td>
        <td><select data-bind="options: $root.extOptions, optionsText: 'extension', value: usrExtVal"></select></td>
        <td class="buttons">
            <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
            <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
        </td>
   </tr>
</script>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:55:08.323

我不确定这是否是您正在寻找的东西，但这里有一个小提琴，它根据已经使用的值计算可用值：

[http://jsfiddle.net/jearles/QTUqD/11/](http://jsfiddle.net/jearles/QTUqD/11/)

--

HTML

```
<select data-bind="options: $root.availableExtData, optionsText: 'extension', value: usrExtVal"></select> 
```

JS

```
self.availableExtData = ko.computed(function() {
    var inUse = [];
    if (!self.selectedItem()) return inUse;

    ko.utils.arrayForEach(self.list(), function(item) {
        if (inUse.indexOf(item.usrExtVal().extension) == -1 && self.selectedItem() != item) inUse.push(item.usrExtVal().extension);
    });

    return ko.utils.arrayFilter(self.extData(), function(item) {
        return inUse.indexOf(item.extension) == -1;
    });
}); 
```

--

该代码确保在编辑选择项时，它的当前值可用。此外，一旦所有可用值都有一行，我也不会显示添加按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:08:57.140

Make a computed observable with the available options, that filters away from the complete list (*extData*) those that have already been assigned to an item - except the one used by the selected item - and then bind the options of the select field to that computed instead of the full list.

# css - 1px 出现在特定情况下，我不明白为什么

> ID：15720379
> 
> 赞同：0
> 
> 时间：2013-03-30T15:45:48.943
> 
> 标签：css, twitter-bootstrap

我重现了与我的代码相同的模板，但我无法在 JsFiddle 上重现相同的错误

[http://jsfiddle.net/V9BDR/1/](http://jsfiddle.net/V9BDR/1/)

这是发生的事情：

在以下情况下，在整个垂直线（对于 的所有子级）中（红色边框右侧）的the`<img>`和 the之间会出现一个空格（大约 1px）：`border-right``<div id="page">``<div id="page">`

*   轴 Y 溢出。
*   `border-left-width`3px和6px、10px和13px、17px和20px之间有一个红色……

我真的不明白，特别是当红色边框左侧（我也可以找到具有右边框宽度的图案来擦除这个神秘像素）时，这个像素消失在一些规则的间隔之间。

我可以将我的边框从 5px 更改为 6px，这是这种像素消失的情况，但我真的很想了解我的代码中什么不是“稳定的”。

也许这些症状跟你说话！对不起，我无法在 jsFiddle 上重现它

**更新：**

这是我将窗口大小调整为智能手机分辨率时发生的精确截图（我使用了一张简单的白色图片`<img> src`）。

如果我回到桌面分辨率，我在图像和黑色边框之间只有 1px （对于每个不同宽度的窗口值，图像就像浮动一样）：

![漏洞](../Images/fd5ba0a663f7131025a206c21af20ddc.png)

我们可以看到，即使它的`<div>`父级（当前在控制台中选择）非常合适，图片也会越过边界。就像图像会打开一样`absolute position`，但它很好（在其父级上`inline-block`进行简单的应用）。`text-align: right`

# sql - Executing Generated Database Script is very fast in one machine and very slow in second machine?

> ID：15720381
> 
> 赞同：-2
> 
> 时间：2013-03-30T15:46:04.067
> 
> 标签：sql, sql-server, sql-server-2008, windows-server-2008

I am executing some script which will create a database with some table, SP and data. In my one PC(Windows 7, SQL SREVER R2) it takes 33 second to complete and in another PC(Server 2008, SQL SERVER R2) it takes nearly 20 minutes. Can someone tell me what will be issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:36:36.677

Assuming the script and the data inserted is 100% identical, then you probably should look out for environmental changes that might cause the problems. Those are the things i'd check:

1.  Is there CPU or memory difference in the prod server you're deploying on? if it has bad hardware then it might cause problems (for example, cheap VM on Windows Azure or EC2 would probably get worst performance than your dev computer, if you don't get enough CPU cycles). Are the overall performance good?
2.  Maybe there is an I/O problem in the prod server you're deploying to. Try using sqlio to benchmark the server and your dev machine (read here for instructions: [http://www.mssqltips.com/sqlservertip/2127/benchmarking-sql-server-io-with-sqlio/](http://www.mssqltips.com/sqlservertip/2127/benchmarking-sql-server-io-with-sqlio/)) I/O is very important thing while dealing with databases. BTW, how big is your DB? how much data are we talking about?
3.  If it's not hardware problem (1 or 2), then you might look for configuration issues. There are many possible configuration problems, but some of them are more likely than the others:

    3.1 Make sure your data and log files are in separated volumes, and you use a RAID level that good for what you're doing. RAID 10 is probably the best, but it's pricey. but, RAID 5 would cause, for example, decreasing in write performance.

    3.2 If you're creating the database for the first time, then you're probably allocating the data files and the log files. depending on the size of the files you're creating, it might be really heavy IO operation, unless you grant in the group policy to the sql server the permission called "**Perform Volume Maintenance Tasks**, which won't cause 0-ing the entire size

    3.3 Make sure you're using the same recovery model in the prod and in the dev machine. If you're using "Full" or "Bulk Logged" recovery model, and insert a lot of data, the size of the log file will grow. make sure you pre-allocate most of the size at advance and not causing multiple small auto-growth that could really affect performance.

If none of the above helped, try and give more information, including full hardware specification of the target server, the storage, the LUN's configuration and every change you did from the default sql server installation configuration.

Best of luck.

# javascript - 注入的 HTML 访问 Chrome API 和全局变量

> ID：15720383
> 
> 赞同：0
> 
> 时间：2013-03-30T15:46:08.787
> 
> 标签：javascript, google-chrome, google-chrome-extension, local-storage, html-injections

我正在开发一个 Chrome 扩展程序，而且我是这个过程的新手。我正在开发的扩展将 HTML 侧边栏注入页面，将 java-script 函数注入标题，然后让用户按下侧边栏上的按钮来创建/保存我的扩展数据。

但是，当我想保存信息时，我使用 localStorage，但是，localStorage 总是相对于当前网站保存。我如何使用 localStorage 来保存我们的扩展程序？

此外，我想在 chrome 扩展中使用一些全局 javascript 变量。这些属于哪里？我知道我目前无法从注入的 Javascript 访问它们。

我研究了消息传递，但遇到了一些麻烦。我不确定它在将 javascript 注入页面标题的范围内是如何工作的。我试过使用这个例子，但我的扩展似乎没有捕捉到这个消息。

```
// This function is called in the injected header javascript.
function sendToExtension() {
    setTimeout(function() {
    console.log('page javascript sending message');
    window.postMessage({ type: 'page_js_type',
        text: "Hello from the page's javascript!"},
        '*' /* targetOrigin: any */);
    }, 10);
}

// This is installed in a background script.
window.addEventListener('message', function(event) {
    console.log('content_script.js got message:', event);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:32:00.790

您必须使用 Chrome 的 sendMessage 函数和 onMessage 侦听器。见下文：

```
function sendToExtension() {
    console.log('Sending message');
    chrome.runtime.sendMessage({ext: "myExtension"}, function(response) {
      console.log(response.ack);
    });
}

// Listener - Put this in the background script to listen to all the events.
chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.ext) {
        console.log('Message received from ' + request.ext);
        sendResponse({ack:'received'}); // This send a response message to the requestor
    }
}); 
```

# php - Using PHP with charts and MySQL data

> ID：15720384
> 
> 赞同：0
> 
> 时间：2013-03-30T15:46:10.993
> 
> 标签：php, mysql, google-visualization

I'm using google charts to output a very simple pie chart

```
 google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Games', 'Number'],
      ['Win',     11],
      ['Lose',      2]
    ]);

    var options = {
      title: 'Win/Lose Ratio'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

However, in place of the values for Win and Lose, I want to pull 2 numbers out of my database. This doesn't need any kind of loop, just a way to reference 2 specific fields on a row instead of the values 11 and 2\. This is the SQL query I'm using to get those two values

```
$qry =("SELECT games_won, games_lost FROM Members where member_id = '".$_SESSION['SESS_MEMBER_ID']."'");
$result = mysql_query($qry);
$row = mysql_fetch_array($result);
$won = $row[games_won];
$lost = $row[games_lost]; 
```

Does anyone know how to do this?

I've had a look at a lot of other FAQ's on the subject but they all deal with a collection of values in the same field and looping through severals rows of data, as opposed to referencing specific entries in the database.

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:00:17.420

Have you tried this:

```
 google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Games', 'Number'],
      ['Win',     <?php echo($won); ?>],
      ['Lose',     <?php echo($lost); ?>]
    ]);

    var options = {
      title: 'Win/Lose Ratio'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

All you are doing is grabbing the values, then `echo`ing them out into your JavaScript. Please do note that I am not error checking, that is something you will need to think about when directly injecting values into HTML or JavaScript!

A better way of doing this is writing your code as a [RESTful API](https://en.wikipedia.org/wiki/Representational_state_transfer). Have your SQL code in a place that you can send a `member_id` as a `GET` request. That, in turn, can print out the games won/lost inside `JSON`. Than, you can preform an AJAX request and grab those values to populate your table (just reference the values inside the returned `JSON` as regular JavaScript variables).

# c++ - 命名空间“std”中没有名为“atomic”的类型

> ID：15720392
> 
> 赞同：19
> 
> 时间：2013-03-30T15:46:54.280
> 
> 标签：c++, xcode, c++11, std, atomic

为什么不

```
std::atomic<int> index; 
```

工作？

当前使用带有这些参数的 LLVM 3.1

```
C Language Dialect GNU [-std=gnu99]
C++ Language Dialect [-std=c++11]
C++ Standard Library libc++(LLVM C++ standard library with C++11 support) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-06T14:14:20.730

要使您的代码正常工作，需要满足以下几点：

1.  你需要`#include <atomic>`

2.  您需要将代码编译为 C++11 或 C++14（`-std=c++11`或`-std=c++14`（或`c++0x`对于较旧的编译器））

3.  您的编译器和标准库需要支持足够的 C++11 才能提供`atomic`( [http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html) )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-08T14:46:54.550

在我的 Makefile 中添加`-std=c++11`到 CXXFLAGS -> 这对我有用！

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2017-08-09T01:19:56.973

您需要将其编写为以下定义的变量。

```
 std::atomic<std::int> index; 
```

# xcode - 使应用程序以关闭时的大小和位置启动

> ID：15720399
> 
> 赞同：0
> 
> 时间：2013-03-30T15:47:34.750
> 
> 标签：xcode, cocoa

我目前正在创建一个应用程序，当它重新打开时，它需要具有与关闭前相同的大小和屏幕位置。

我希望这只是我没有注意到的界面生成器中的一个复选标记。

谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:51:15.217

您应该实施**Application Persistence**。

[在这里](http://oleb.net/blog/2011/07/whats-new-for-developers-in-lion-part-1/)阅读更多。

当用户注销时，Lion 为他们提供了在重新登录时将所有打开的应用程序恢复到当前状态的选项。要在您的应用程序中支持此功能，您必须为每个窗口确定是否应使用 -setRestorable: 方法保留其状态. 然后 Cocoa 将负责保存窗口及其关联窗口控制器的状态（大小、位置等），让您可以选择写出与窗口关联的自定义对象的附加状态信息。

要在重新启动时恢复应用程序的状态，每个窗口都必须通过 +restoreWindowWithIdentifier:state:completionHandler: 类方法（在 NSWindowRestoration 协议中定义）指定一个所谓的恢复类。然后恢复类负责实例化窗口及其关联对象（例如窗口控制器）。有关分步指南，请参阅 Mac OS X 应用程序编程指南中的用户界面保留主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:51:38.620

靠近一个复选框。设置窗口的框架自动保存名称。这是在应用程序的首选项（由 管理`NSWindow`）中命名一个值的键，在该首选项下存储和检索窗口的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:16:13.827

将大小和位置存储在 NSUserDefaults 中。例如，您将 cgpoint 存储在 Nsuserdefaults 中，如下所示

```
CGPoint *point=CGPointMake(34,67);
NSUserDefaults* def=[NSUserDefaults standardUserDefaults];
NSString* mypointstr=NSStringFromCGPoint(point);
[def SetObject:mypointstr:forkey:@"mypoint"]; 
```

下次启动应用程序时获取此信息

```
NSString* myprevstr=[def Objectforkey:@"mypoint"]
CGPoint* point=CGPointFromString(myprevstr); 
```

# android - Android：小布局和大布局

> ID：15720400
> 
> 赞同：0
> 
> 时间：2013-03-30T15:47:36.593
> 
> 标签：android, android-layout

我在 res/layout-large 和 res/layout-small 文件夹中创建了布局。当我尝试屏幕 5.1"WVGA 480x800、2.7"QVGA (240x320) 和 4.65" 720p (720*1280) 的模拟器时。它总是从 res/layout-small 中选择布局。请让我知道如何解决这个问题测试布局

# mysql - 如何获得“带计数的最后记录（MySql）”？

> ID：15720401
> 
> 赞同：0
> 
> 时间：2013-03-30T15:47:44.603
> 
> 标签：mysql, sql, select, greatest-n-per-group

我有一个名为“文章”的表。文章（id，文章，类别，标题）。我的表结构如下：

桌子 ：

```
+----+-------------------------+---------------+
| id | article| category       | title         |
+----+-------------------------+---------------+
| 1  | a1     | a              | ta1           |
| 2  | a2     | a              | ta2           |
| 3  | b1     | b              | tb1           |
| 4  | b2     | b              | tb2           |
| 5  | b3     | b              | tb3           |
| 6  | c1     | c              | tc1           |
| 7  | c2     | c              | tc2           |
| 8  | c3     | c              | tc3           |
+----+-------------------------+---------------+ 
```

一个“类别”可以有多个与之相关的“文章”，即多个文章可以属于同一类别。我必须在每个类别中找到最后输入的文章的完整记录。

```
SELECT id,article,category,title FROM articles
WHERE article IN(SELECT MAX(article) FROM articles GROUP BY category) 
```

此查询给出：

```
+----+-------------------------+-------+
| id | article| category       | title |
+----+-------------------------+-------+
| 2  | a2     | a              | ta2   |
| 5  | b3     | b              | tb3   |
| 8  | c3     | c              | tc3   |
+----+-------------------------+-------- 
```

现在连同这个输出，我必须在每个类别中找到 COUNT 篇文章。我需要的输出是：

```
+----+-------------------------+-------+-------+
| id | article| category       | title | Count |
+----+-------------------------+-------+-------+
| 2  | a2     | a              | ta2   | 2     |
| 5  | b3     | b              | tb3   | 3     |
| 8  | c3     | c              | tc3   | 3     |
+----+-------------------------+----------------+ 
```

帮我查询一下?????????/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:54:09.803

您可以使用单独的子查询计算最新文章并计算每个类别的总文章数，然后将子查询的结果连接回原始表以获取其他列，

```
SELECT  a.*, b.total_article
FROM    articles a
        INNER JOIN
        (
            SELECT  category, 
                    MAX(Article) last_article, 
                    COUNT(*) total_article
            FROM    articles
            GROUP   BY category
        ) b ON  a.category = b.category AND
                a.Article = b.last_article 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:19:33.800

我得到了我的输出使用：

```
SELECT a.id,
       a.title,
       a.article,
       a.category,
       b.LastArticle,
       b.TotalArticles
FROM article a
RIGHT JOIN
  (SELECT id,
          title,
          article,
          category,
          max(article) LastArticle,
          count(article) TotalArticles
   FROM article
   GROUP BY category) b ON b.LastArticle = a.article 
```

感谢那些试图提供帮助的人

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T15:52:16.713

尝试使用 MySQL[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)和[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/select.html).

尝试这个：

```
SELECT id, article, category, title, COUNT(1) count
FROM articles
GROUP BY category
ORDER BY id DESC 
```

这将返回每个类别的最高`id`值`category`以及每个类别的文章数量的结果。

# python - AttributeError：对象没有属性“json_args”

> ID：15720403
> 
> 赞同：0
> 
> 时间：2013-03-30T15:47:58.847
> 
> 标签：python, ios, json, tornado, afnetworking

我正在尝试使用 AFHTTPClient 连接龙卷风服务器。这是我来自客户的代码：

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self setDefaultHeader:@"User-Agent" value:@"Client"];

    [self setDefaultHeader:@"Accept" value:@"application/json"];
    self.parameterEncoding = AFJSONParameterEncoding; 
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

在服务器端，我将处理程序设置如下：

```
class BaseHandler(tornado.web.RequestHandler):
    @property
    def db(self):
        return self.application.db

    def prepare(self):
        if self.request.headers.get("Content-Type") == "application/json":
            self.json_args = tornado.escape.json_decode(self.request.body) 
```

然后构建了这个处理程序的子类：

```
class TimelineHandler(BaseHandler):
    def post(self):
        user_id = self.json_args.get("user_id")
        device_id = self.json_args.get("device_id")
        token = self.json_args.get("token")

        //do something with the request

        self.write(response) 
```

但是当我运行此代码时，它失败并显示以下错误消息：

```
HTTPRequest(protocol='http', host=<CORRECT URL HERE>, method='POST', uri='CORRECT URL HERE', version='HTTP/1.0', remote_ip='127.0.0.1', body='{"user_id":1,"device_id":"b9af8d9039ec1e527fecca70caf486e1","token":"36c9a0fe-2c4f-4273-9e12-0f855e05de87"}', headers={'Content-Length': '107', 'Accept-Language': 'en;q=1, fr;q=0.9, de;q=0.8, ja;q=0.7, nl;q=0.6, it;q=0.5', 'Accept-Encoding': 'gzip, deflate', 'X-Scheme': 'http', 'Host': 'CORRECT URL HERE', 'Accept': 'application/json', 'User-Agent': 'Client', 'Connection': 'close', 'X-Real-Ip': '58.246.153.177', **'Content-Type': 'application/json**; charset=utf-8'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 1077, in _execute
        *self.path_args, **self.path_kwargs)
      File "/server.py", line 128, in post
        user_id = self.json_args.get("user_id")
    **AttributeError: 'TimelineHandler' object has no attribute 'json_args'** 
```

奇怪的是，在请求标头中，它清楚地显示了 'Content-Type': 'application/json. 那么为什么处理程序仍然没有属性'json_args'？

我正在使用龙卷风 3.0。

如果您能给我任何建议，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:07:25.757

事实证明这是由 Content-Type 设置引起的：

在 BaseHandler 上：

```
def prepare(self):
         if self.request.headers.get("Content-Type") == "application/json":
             self.json_args = tornado.escape.json_decode(self.request.body) 
```

但实际上在请求头中：

'内容类型'：'应用程序/json；字符集=utf-8'

这个字符串根本不匹配。但即使在客户端设置 Content-Type = "application/json" 后，字符串仍会再次附加 "; charset=utf-8" 。我解决此问题的唯一方法是将 basehandler 代码更改为：

```
def prepare(self):
         if self.request.headers.get("Content-Type") == "application/json; charset=utf-8":
             self.json_args = tornado.escape.json_decode(self.request.body) 
```

它解决了我的问题。但是，有人知道“charset=utf-8”是从哪里来的吗？它是由 AFNetworking 自动设置的吗？

谢谢！

# php - OOP ~ PHP, Different Function methods?

> ID：15720404
> 
> 赞同：-2
> 
> 时间：2013-03-30T15:48:09.307
> 
> 标签：php

I have been reading over the manuals of a verity of different methods that can be used in a OOP Style development zone.

```
class Class{
    private function SortArrayByNoExample (){
            $ExampleArray = array ('Item_1', 'Item_3','Item_6','Item_5','Item_4','Item_2');
            Echo "Original Array: <br>";
            print_r($ExampleArray);
            Echo "<br><br><br>";
            echo "Sorted Array";
            natsort($ExampleArray);

            print_r($ExampleArray);
        }

        public function NaturalSort ($Arg1){
            if (!is_array($Arg1)){
                $this->SortArrayByNoExample();
            }else{
                natsort($Arg1);
                return $Arg1;
            }
} 
```

I have this current scenario, take this as an example.

I understand public functions can be accessed by:

```
$Foo = new Class();
$Foo->PublicFunctionName(); 
```

and Private function can only be accessed from within the class.

```
 public function NaturalSort ($Arg1){
        if (!is_array($Arg1)){
            $this->SortArrayByNoExample();
        } 
```

If these function perfectly on their own, why is their such methods as:

`Abstract`, `static`, `protected`.

Then there is extensions such as:

```
class AnotherClass extends Class {} 
```

^^ Why have this? Why can't you include the functions inside your original class.

My Overall question, is why would I use `Abstract`, `Static`, `Protected`, and `extends`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T16:06:32.353

You can easily understand why these things exist once you have more experience. You don't even need very much more experience.

For example the need for `extends` (subclassing) and thus all your other concepts is quite obvious once you consider this artificial example:

```
abstract class Animal {
    // there are no "animal objects", only specific kinds of animals
    // so this class is abstract
    function eat(){}  // animals all eat the same way
    // different animals move differently, so we can't implement "move"
    // however all animals move, so all subclasses must have a "move" method
    abstract function move()
    // (I'm straining things a bit here...)
    // No one can order an animal to sleep
    // An animal must sleep on its own
    protected function sleep(){}
    // note if this function were *private*, then the only the
    // Animal class code can call "sleep()", *not* any subclasses
    // Since a Dog and a Cat sleep at different times, we want them
    // to be able to decide when to call sleep(), too.
}

abstract class FourLeggedAnimal {
    // all four-legged animals move the same way
    // but "four-legged-animal" is still abstract
    function move() {}
}

class Dog extends FourLeggedAnimal {
    // only dogs bark
    function bark(){}
}

class Cat extends FourLeggedAnimal {
    // only cats meow
    function meow(){}
} 
```

(BTW, you should default to `protected` rather than `private` when you need a "not-`public`" method. I've never found a need for `private` in PHP.)

# java - 如何制作一组子对象

> ID：15720407
> 
> 赞同：0
> 
> 时间：2013-03-30T15:48:24.717
> 
> 标签：java, arrays, object, subclass

我有一个教授的作业，但我不知道如何正确创建对象数组。除了 Client 类之外，其他类都不能更改；界面也不能改。我应该能够从几个子类创建一个对象数组并能够访问所有方法。

这是我的错误报告：

```
MathewBorumP5.java:68: error: cannot find symbol
                    revenue = movies[x].calcRevenue();
                                       ^
symbol:   method calcRevenue()
location: class Movie
MathewBorumP5.java:70: error: cannot find symbol
                            movies[x].getYear(), movies[x].calcRevenue(),
                                                          ^
symbol:   method calcRevenue()
location: class Movie
MathewBorumP5.java:71: error: cannot find symbol
                            movies[x].calcProfit(revenue), movies[x].categor
y());
                                     ^
symbol:   method calcProfit(double)
location: class Movie
MathewBorumP5.java:71: error: cannot find symbol
                            movies[x].calcProfit(revenue), movies[x].categor
y());
                                                                    ^
symbol:   method category()
location: class Movie
MathewBorumP5.java:78: error: cannot find symbol
                    totalRevenue = totalRevenue + movies[x].calcRevenue();
                                                           ^
symbol:   method calcRevenue()
location: class Movie
MathewBorumP5.java:81: error: cannot find symbol
                    "%.3f million dollars.", Movie[0].getTotalMovies(), tota
lRevenue);
                                             ^
symbol:   variable Movie
location: class MathewBorumP5
6 errors 
```

**我的客户类：**

```
import java.util.Scanner;

public class MathewBorumP5 {
    public static void main(String[] args) {
        int choice;
        boolean restart = true;

        Scanner input = new Scanner(System.in);

        Movie[] movies = new Movie[6];
        movies[0] = new Animated("Beauty and the Beast", "Gary Trousdale", 1991,
            10.0, 5.0, 2.0);
        movies[1] = new Animated("Peter Pan", "Clyde Geronimi", 1953, 2.0, 1.2,
            .5);
        movies[2] = new Documentary("Planet Earth", "Alastair Fothergill", 2006,
            10, 20, 5);
        movies[3] = new Documentary("Drain the Ocean", "Steve Nichols", 2009, 9,
            2,3);
        movies[4] = new Drama("The Shawshank Redemption", "Frank Darabont",
            1994, 89, 7, 2);
        movies[5] = new Drama("The Godfather", "Francis Coppola", 1972, 10, 3,
            5);

        do {
            menu();
            System.out.print("Enter a number from 1 - 5: ");
            choice = input.nextInt();
            System.out.print("\n");

            switch(choice) {
                case 1:
                    item1(movies);
                    break;
                case 2:
                    item2(movies);
                    break;
                case 3:
                    break;
                case 4:
                    break;
                case 5:
                    restart = false;
                    break;
                default:
                    System.out.print("You didn't enter a number between 1"
                        + " and 5.\n");
                    break;
            }
        } while(restart == true);
    }

    public static void menu() {
        System.out.print("Warren Moore Movie Menu\n");
        System.out.print("1\. Show the list of movies in the array\n");
        System.out.print("2\. Display the total number of movies and the total" +
            " revenues\n");
        System.out.print("3\. Search movie by title\n");
        System.out.print("4\. Display movies sorted by profit in decreasing" +
            " order\n");
        System.out.print("5\. Exit\n");
    }

    public static void item1(Movie[] movies) {
        double revenue;
        System.out.printf("%-26s%-6s%-10s%-9s%-11s\n", "Title", "Year", 
        "Revenue", "Profit", "Category");
        for(int x = 0; x <= 6; x++) {
            revenue = movies[x].calcRevenue();              
                System.out.printf("%-26s%-6s%-10s%-9s%-11s\n", movies[x].getTitle(),
                movies[x].getYear(), movies[x].calcRevenue(),
                movies[x].calcProfit(revenue), movies[x].category());
        }
    }

    public static void item2(Movie[] movies) {
        double totalRevenue;
        for(int x = movies[0].getTotalMovies(); x > 0; x--) {
            totalRevenue = totalRevenue + movies[x].calcRevenue();
        }
        printf("The total number of moves is %d, and their total revenue is" +
            "%.3f million dollars.", Movie[0].getTotalMovies(), totalRevenue);
    }
} 
```

**我的超类：**

```
public class Movie {
    protected String title;
    protected String director;
    protected int year;
    protected double productionCost;
    private static int totalMovies = 0;

    public Movie() {
        totalMovies++;
    }
    public Movie(String newTitle, String newDirector, int newYear,
        double newCost) {
        totalMovies++;
        title = newTitle;
        director = newDirector;
        year = newYear;
        productionCost = newCost;
    }

    public int getTotalMovies() {
        return totalMovies;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String newTitle) {
        this.title = title;
    }

    public String getDirector() {
        return director;
    }

    public void setDirector(String director) {
        this.director = director;
    }

    public int getYear() {
        return year;
    }

    public void setYear(int year) {
        this.year = year;
    }

    public double getProductionCost() {
        return productionCost;
    }

    public void setProductionCost(double productionCost) {
        this.productionCost = productionCost;
    }

    public String toString() {
        return "";
    }
} 
```

类模板（我所有的类都基本相同）：

```
public class Animated extends Movie implements Profitable {
    private double rate;
    private double income;

    public Animated() {
        super();
    }

    public Animated(String title, String director, int year, double cost,
        double rate, double income) {
        super(title, director, year, cost);
        this.rate = rate;
        this.income = income;
    }

    public double getRate() {
        return rate;
    }

    public void setRate(double rate) {
        this.rate = rate;
    }

    public double getIncome() {
        return income;
    }

    public void setIncome(double income) {
        this.income = income;
    }

    public String category() {
        return "Animated";
    }

    public double calcRevenue() {
        return (income * rate);
    }

    public double calcProfit(double revenue) {
        return (revenue - super.productionCost);
    }

    public String toString() {
        return (super.toString() + "");
    }
} 
```

**我的界面：**

```
public interface Profitable {
    public abstract String category();
    public abstract double calcRevenue();
    public abstract double calcProfit(double revenue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T07:44:42.543

You need to add appropriate cast and test using instanceof.

```
revenue = movies[x].calcRevenue(); 
```

must be replaced by

```
if (movies[x] instanceof Profitable) {
  revenue = ((Profitable)movies[x]).calcRevenue();
} else {
  // decide what to do if movie if not profitable that is to say does not have the calcRevenue method
} 
```

# mysql - 我可以在 MySql 中同时按列名和 case 语句排序吗？

> ID：15720415
> 
> 赞同：0
> 
> 时间：2013-03-30T15:48:49.473
> 
> 标签：mysql, sql-order-by

我正在尝试按查询结果订购 2 件这样的事情

通过“reservationStatus”，然后根据 reservationStatus 的两个字段之一。

这是我的mysql代码

```
SELECT rs.reservationStatus,
DATE_FORMAT(rs.dateFrom, "%d-%m-%Y %h:%i %p") AS pickupTime,
DATE_FORMAT(rs.dateTo, "%d-%m-%Y %h:%i %p") AS dropoffTime,
cu.fullName,
ve.name FROM reservation AS rs 
INNER JOIN customers AS cu ON rs.CustomerID = cu.customerID
INNER JOIN vehicles AS ve ON rs.Vehicle_id = ve.Vehicles_id
WHERE  rs.dateFrom <= DATE_ADD(curdate() , INTERVAL 86399 SECOND) AND rs.reservationStatus IN (1,2)
ORDER BY  rs.reservationStatus, CASE WHEN rs.reservationStatus = 1 THEN rs.dateFrom ELSE rs.dateTo END ASC 
```

这给了我一个语法错误。但是，如果我删除 rs.reservationStatus，并将案例陈述留在那里，那么它就会运行，但我看不到按应有的顺序排列的结果。

我需要的是像这样对我的结果进行排序

如何让上面的查询正确运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:01:27.077

“CASE”表达式基于从其他列或列内容派生的表达式产生一些列结果。试试吧

```
SELECT 
 column1, 
 CASE WHEN ... THEN ... ELSE ... AS customcolumnname, 
 column2.sometable, 
 column3 .. 
FROM 
 mytable
ORDER BY 
 customcolumnname ASC, 
 column1 DESC 
```

或类似的。

# javascript - PubSub.js 多个订阅，或处理等待多个回调的不同方式

> ID：15720416
> 
> 赞同：1
> 
> 时间：2013-03-30T15:48:52.377
> 
> 标签：javascript

我试图找出处理这种情况的最佳方法。基本上我希望流程像这样工作：

1.) 从服务器获取配置数据（异步）

2.) 接收到配置数据后运行 doStuff()（异步）

3.) 在 doStuff() 完成后运行 postResults

目前我似乎使用 PubSub.js 让这个流程工作，但是我试图弄清楚如何将配置数据 (#1) 的结果提供给 postResults (#3)。虽然我似乎有使用 PubSub 的流程，但我不确定如何从 postResults (#3) 访问配置 (#1) 回调数据

这是代码摘要：

```
PubSub.subscribe('config', doStuff());
fetchConfigurations();

function fetchConfigurations () {
    var req = new XMLHttpRequest();
    var url = CONFIGURATION_SERVER_URL;
    req.onreadystatechange = function() {
        if (req.readyState == 4 && req.status == 200) {
            var configObject = eval('(' + req.responseText + ')');
            PubSub.publish('config', configObject);
        } else {
            console.log("Requesting config from server: " + url);
        }
    }
    req.open("GET", url, true);
    req.send(null);
}

function doStuff() {
    PubSub.subscribe('results', postResults);
    var results = {};   

        // do some async work...

    results['test1'] = "some message";
        results['test2'] = "another message";
        PubSub.publish('doStuff', results);
}

function postResults (doStuffId, doStuffData) {
    var req = new XMLHttpRequest();
    var url = TEST_RESULTS_URL; // I want to get this from the configObject is get in fetchConfigurations
    req.open("POST",url,true);
    req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    req.send(doStuffData['test1'] + doStuffData['test2']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:49:10.880

使用 promise 似乎比 pub/sub 更适合这个问题，这是我最终使用的实现：

[https://github.com/hemanshubhojak/PromiseJS](https://github.com/hemanshubhojak/PromiseJS)

# java - 我需要 super.super.method() -> 可能的设计缺陷？

> ID：15720422
> 
> 赞同：4
> 
> 时间：2013-03-30T15:49:15.787
> 
> 标签：java

我发现自己*需要*在 java 中调用 super.super.method()，这是不可能的。

我只是想知道我的设计是否存在设计缺陷？

课程：

```
package solvers.command;

/**
 *
 * @author student
 */
public abstract class Command {
    private boolean executed;   //executed state

    /**
     * Constructs a new Command object.
     * 
     * @modifies    this.executed = false
     */
    public Command() {
        this.executed = false;
    }

    /**
     * Executes this command.
     * 
     * @modifies executed = true
     * @pre {@code !executed}
     * @throws IllegalStateException if {@code executed}
     */
    public void execute() {
        if (executed) {
            throw new IllegalStateException("solvers.command.Command.execute: already executed");
        }
        executed = true;
    }

    /**
     * Undoes this command.
     * 
     * @modifies executed = false
     * @pre {@code executed}
     * @throws IllegalStateException if {@code !executed}
     */
    public void undo() {
        if (!executed) {
            throw new IllegalStateException("solvers.command.Command.undo: not executed yet");
        }
        executed = false;
    }

    /**
     * Returns the executed state
     * 
     * @return executed state
     */
    public boolean getExecuted() {
        return executed;
    }
}

package solvers.command;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

/**
 *
 * @author student
 */
public class CompoundCommand extends Command {
    List<Command> commands; //list of commands

    /**
     * Creates a new CompoundCommand.
     * 
     * @modifies this.commands is initialised
     */
    public CompoundCommand() {
        super();
        this.commands = new ArrayList<>();
    }

    /**
     * Adds a command to the list of commands.
     * 
     * @param command   The new command
     * @pre {@code command != null}
     * @throws IllegalArgumentException if {@code command == null}
     */
    public void add(final Command command) {
        if (command == null) {
            throw new IllegalArgumentException("solvers.command.CompoundCommand.add: "
                    + "command == null");
        }
        commands.add(command);
    }

    /**
     * Removes a command from the list of commands.
     * 
     * @param command   The command to be removed
     * @pre {@code command != null && commands.contains(command}
     * @throws IllegalArgumentException if {@code command == null || !commands.contains(command)}
     */
    public void remove(final Command command) {
        if (command == null) {
            throw new IllegalArgumentException("solvers.command.CompoundCommand.remove: "
                    + "command == null");
        }
        if (!commands.contains(command)) {
            throw new IllegalArgumentException("solvers.command.CompoundCommand.remove:"
                    + "command is not found in commands");
        }
        commands.remove(command);
    }

    /**
     * Returns if the list of commands is empty.
     * 
     * @return {@code commands.isEmpty()}
     */
    public boolean isEmpty() {
        return commands.isEmpty();
    }

    @Override
    public void execute() {
        super.execute();
        for (Command c : commands) {
            c.execute();
        }
    }

    @Override
    public void undo() {
        super.undo();
        Collections.reverse(commands);
        for (Command c : commands) {
            c.undo();
        }
        Collections.reverse(commands);
    }
}

package solvers.command;

/**
 *
 * @author student
 */
public class ExecutedCompoundCommand extends CompoundCommand {

    /**
     * Creates a new ExecutedCompoundCommand.
     */
    public ExecutedCompoundCommand() {
        super();
    }

    @Override
    public void add(final Command command) {
        if (!command.getExecuted()) {
            throw new IllegalStateException("solvers.command.ExecutedCompoundCommand.add: "
                    + "command has not been executed yet.");
        }
        super.add(command);
    }

    @Override
    public void execute() {
        super.super.execute(); /* Does not work obviously */
        for (Command c : commands) {
            if (!c.getExecuted()) {
                c.execute();
            }
        }
    }
} 
```

基本上我确实想要 Command 的安全性`execute()`，而我不希望执行`CompoundCommand`'execute() for `ExecutedCompoundCommand`，但我确实想只依赖`CompoundCommand`.

作为一名学生，在一个需要 javadoc 和单元测试的项目上工作，确实需要尽可能少的代码重复，因为它只会做更多的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:09:50.960

我认为这是一个设计缺陷。您可以应用模板方法模式 [GOF 325]

> 意图：在操作中定义算法的骨架，将一些步骤推迟到子类。模板方法让子类在不改变算法结构的情况下重新定义算法的某些步骤。

来自四种设计模式的帮派

您要确保执行某些步骤。因此，您将创建一个最终模板方法 execute() 并委托给 doExecute() 方法，该方法可以添加额外的逻辑并且需要由子类实现。

```
public final void execute() {
  importantOperation();
  runsAlways();
  doExecute();
}

public abstract void doExecute(); // Override in subclasses 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:13:35.043

有几种方法可以解决这个问题，最好的方法取决于你的意图。这里有几个建议：

创建一个新类 CommandList，它支持 add()、remove() 和 undo() 操作。

CompoundCommand 扩展了 Command 并具有一个 CommandList。

ExecutedCompoundCommand 扩展了 Command 并有一个 CommandList。

另一种选择是创建一个新的 Command 子类，它支持常用操作并继承 Command 的 execute() 方法。

CompoundCommand 将扩展它并覆盖只是执行。

ExecutedCompoundCommand 也会扩展它，因此它的 super.execute() 将是 Command execute()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T12:46:21.077

将委托模式用于通用功能而不是继承。如果你想使用继承，或者模板模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T15:59:19.390

看看[这里](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java "这里")。基本上它解释了为什么你永远不需要做你想做的事情。

正如链接中所引用的：

> 您不应该能够绕过父类的行为。有时能够绕过您自己的类的行为（尤其是在同一方法中）而不是您父母的行为是有意义的。

在链接中显示的示例中，所提出的论点是“中间”类可以说正在实现一些功能或有效性检查，这些功能或有效性检查将通过“跳过”层次结构中的一个类来绕过。

阅读[这篇](http://www.corejava.co.in/java-encapsulation.php)小文章，了解封装的好处。

# javascript - Android webview 性能慢

> ID：15720426
> 
> 赞同：6
> 
> 时间：2013-03-30T15:49:47.557
> 
> 标签：javascript, android

我正在用 javascript 编写游戏。这个应用程序在我的浏览器上运行良好（快速），但我在使用 android webview 运行它时遇到了一些麻烦。

1.  启动应用程序的时间需要 5 秒或更长时间（我认为这有点慢，但也许这很正常？）
2.  在游戏的菜单中，我有一个方法，例如：

    ```
    this.showCredits = function() {
    document.getElementById('core-credits-layer').style.display = 'block';
    document.getElementById('core-credits').style.display = 'block';
    var parent = this;

    $.ajax({
        url: 'content/credits.html',
        dataType: 'html',
        success: function(data, status, response) {
            var  now = new Date();
            var s = now.getSeconds()-parent.test.getSeconds();
            console.log('success ajax: '+s);
            document.getElementById('core-credits').scrollTop = 0;
            document.getElementById('core-credits').innerHTML = response.responseText;
            console.log('finished');
        },
        error: function() {
            console.error('failed fetch credits');  
        }
    });
    } 
    ```

    因此，控制台日志（“完成”，success() 中的最后一行）在单击菜单“credits”后立即出现。但在我看到 div #core-credits 之前可能需要 6 秒（或多或少）。在我的浏览器中，单击后我会立即看到#core-credits。但是第二次点击那个菜单点我在 1-2 秒后得到了 div。我现在不知道那是什么，我不这么认为，这是一个缓存的事情，因为我很快就进入了 success() 回调。

Java端：

```
 public void onCreate(Bundle savedInstanceState)
{
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Context context = this.getApplicationContext();

    SharedPreferences wmbPreference = PreferenceManager.getDefaultSharedPreferences(this);
    boolean isFirstRun = wmbPreference.getBoolean("FIRSTRUN", true);
    if(isFirstRun) {
        this.copyAudioFiles(context);
    }

    WebView mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setDomStorageEnabled(true);
    mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

    String data = context.getFilesDir().getPath();
    mWebView.getSettings().setDatabasePath(data+"data/"+this.getPackageName()+"/databases/");
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.setWebChromeClient(new WebChromeClient());
    String data_root = Environment.getExternalStorageDirectory()+"/"
        +this.getPackageName();
    mWebView.loadUrl("file:///android_asset/www/index.html?system=android&" +
        "data_root="+data_root);  
} 
```

我在 Eclipse 中的虚拟平板电脑设备和真正的华硕平板电脑上都有这个性能问题。

动画（jquery show('slow')）有时真的很慢或损坏。例如（这是一款纸牌游戏），玩家通过 show('slow') 动画变成 9 张牌，每 2 次或第 3 次我得到 3 或 8 张牌，但不是 9^^。

以上所有这些都在 chromium 或 firefox 等浏览器上运行良好。我正在使用 Android 4.1。

激活硬件加速没有帮助。有很多关于 webview 渲染问题的帖子，但只有硬件加速解决方案没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T16:42:43.910

在这种情况下忘记硬件加速 -[这是一个虚假的朋友](https://stackoverflow.com/questions/10014461/why-does-enabling-hardware-acceleration-in-css3-slow-down-performance)。在大多数情况下，它甚至比软件渲染还要慢。

但是有很多小事情可以优化：

### 编写更快的 javascript

*   `document.getElementById('core-credits')`在适用的情况下始终使用选择器缓存（在您的代码中应该只出现一次
*   分组/解耦（参见下一点或`setTimeout`直接使用）代码执行和 DOM 操作（这总是会触发对单个元素的重绘，或者 - 更糟糕的是 - 文档的重排）
*   在某些应用程序中，我看到使用[requestAnimationFrame Polyfill](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)进行 dom 操作的效果很好 - 不一定会导致更高的帧速率，但在我的情况下，它允许我正确“扔”一个 openlayers 地图（而不是设备只是不响应触摸移动）

### 对 Android 友好

*   就像 intel appframework（以前的 jqmobi ui）一样，大量使用 css3 转换而不是尝试 jquery 风格的“tick”动画
*   删除边界半径，而是使用透明的 png 方法
*   Android 上其他昂贵的渲染应该是：[`(-webkit-)box-shadow`](http://forum.jquery.com/topic/a-fix-for-low-android-performance-remove-box-shadow)、text-shadow 和各种渐变（同样可以换成老式 png）

希望这会有所帮助-将尝试详细说明。纠正信息，因为我目前在自己的应用程序中继续与 android webview 迟缓作斗争。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-04T10:08:45.953

在经历了在 Android 上使用 HTML5/JS 中的混​​合移动应用程序框架开发多个应用程序的过程之后，恐怕没有可以解决所有性能问题的灵丹妙药。一般来说，Javascript 性能不是问题，问题很频繁，甚至可能是对 DOM 的浪费性更改/修改以及过度使用 CSS3 效果，这会像 Android 上的 box-shadow 一样减慢 FPS。

可能有帮助的方法是使用 CrossWalk 作为您的 WebView 而不是库存的 WebView 组件。这意味着您可以在应用中获取最新版本的 Chrome，而无需依赖旧版本的系统 WebView 组件。您应该观察到性能和稳定性的改进，因为您可以获得对 WebKit 的软件改进的所有好处。

[https://crosswalk-project.org](https://crosswalk-project.org)

其次，考虑使用避免频繁更改 DOM 的框架，例如具有虚拟 DOM 的 React。

[http://facebook.github.io/react/](http://facebook.github.io/react/)

React 并不是唯一提供此功能的框架，还有其他解决方案旨在提供该领域的性能改进，例如 Famous。

[http://着名的.org](http://famous.org)

最后，选择你的框架来构建你的应用程序对我来说是最重要的一步。尽管在提高浏览器性能方面进行了所有投资，但它们在不同领域的性能各不相同，因此最好在一开始就对冲你的赌注，并选择适合你试图解决的问题的框架。

感谢您可能已经从这里继续前进，因此希望此建议对其他人有所帮助。

#lovejavascript，#hatebrowsers

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:40:02.510

您是否在清单中启用了硬件加速？： http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T21:05:43.170

对于动画，尝试将其添加到元素 css：

```
transform: translate3d(0,0,0);
-webkit-transform: translate3d(0,0,0); 
```

这是唯一对我的 webview 产生影响的 speedhack。但要注意不要过度使用它！[（您可以在本文](http://www.tricedesigns.com/2013/03/11/performance-ux-considerations-for-successful-phonegap-apps/)中阅读有关该 hack 的更多信息。）

我也建议做动画我的 css

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-04T13:10:42.173

浏览器必须在 Dom 更改中重新绘制 ui。它在台式机上对我们的影响不大，但确实会阻塞手机上的动画。您应该考虑使用 css3 转换，因为它们由 gpu 处理并且性能更高。如果您不介意使用 javascript 库，我建议您尝试一下 famo.us 它声称能够提供 60fps 的动画。这似乎是真的。

# jquery - multidraggable 不适用于 addclass

> ID：15720433
> 
> 赞同：0
> 
> 时间：2013-03-30T15:50:43.823
> 
> 标签：jquery, draggable, addclass

我正在尝试使用这个

```
<a href="https://github.com/someshwara/MultiDraggable">
multidraggable plug-in</a> 
```

对于 jQuery。我不想包含另一个要使用 addClass 拖动的元素。这没用。实际上，我只是编辑了 multidraggable github 页面上提供的示例，以查看它是否有效，遗憾的是它没有。

我把这个问题贴在

[jsfiddle](http://jsfiddle.net/nfgCj/)，让你们更了解它。

这是在拖动开始时使用 addClass 的特定部分

```
$(".d2").multiDraggable({ group: $(".d2"), startNative: function () {$("#addme").addClass("d2", 400, "duration")}, dragNative : function () {}}); 
```

我实际上打算将其用于我正在制作的单人纸牌游戏。当用户开始拖动可拖动卡片时，如果该卡片上堆叠有其他卡片，则它也应该包括这些卡片。我已经有这个问题一个星期了。

如果您有其他建议我应该做而不是这样做，我们将不胜感激。感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T18:14:01.587

我还尝试使用那个 multidraggable 插件，但从来没有完全让它工作。

`ui.multidraggable.js`从[这里](http://www.myphpetc.com/2009/11/jquery-ui-multiple-draggable-plugin.html)尝试。然后就这么简单

```
$('.myClass').multidraggable(); 
```

现在要回答您的问题，您可以通过两种方式添加元素：

*   利用`$('#myId').addClass('myClass');`
*   您可以按住 ctrl 单击元素并将其添加到组中。

希望这可以帮助。

# ruby - 如何忽略 sass 中的多行注释？

> ID：15720434
> 
> 赞同：8
> 
> 时间：2013-03-30T15:50:50.110
> 
> 标签：ruby, comments, sass

有没有办法让 sass 在生成 css 文件时忽略多行注释：

```
// these comments are ignored 
```

这些不是（仅在压缩模式下被忽略）：

```
/*
 * multiline comments
 *
 */ 
```

我在 Github 上找到了这张[票](https://github.com/nex3/sass/issues/338)，作者说：

> 如果你真的想要，你也可以对 Sass 进行猴子补丁以使 /* */ 评论静音。

但我不知道他所说的monkeypatch sass是什么意思，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T14:16:19.073

耶！我在回答这个问题时学习了猴子修补 SASS：

[Sass mixin 递归；@include 循环](https://stackoverflow.com/questions/15531004/)

现在我也可以帮你！

## 1) 安装指南针

要使此解决方案起作用，您需要[Compass](http://compass-style.org/)。安装它：

```
gem install compass 
```

## 2) 配置指南针

在项目的根目录中创建一个`compass.rb`文件并定义保存 SASS 和 CSS 代码的目录，例如：

```
css_dir = "stylesheets"
sass_dir = "sass" 
```

## 3）创建[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)

创建一个`remove-all-comments-monkey-patch.rb`在项目根目录中调用的文件：

```
class Sass::Tree::Visitors::Perform < Sass::Tree::Visitors::Base

  # Removes all comments completely
  def visit_comment(node)
    return []
  end

end 
```

## 4) 需要猴子补丁`config.rb`

在 中`config.rb`，添加：

```
# Removing all comments by applying a monkey patch to SASS compiler
require "./remove-all-comments-monkey-patch" 
```

## 5) 用 Compass 编译你的项目

用于`compass compile`将 SASS 编译成 CSS。您还可以使用`compass watch`Compass 命令行工具不断监视您的代码是否有更改并重新编译您修改的部分。

## 注意事项

这不会删除带有由 SASS 生成的行号的注释。要禁用它们，请注释掉该`line_comments = true`行`config.rb`或将其设置为 false。

要重新启用多行注释，只需注释掉需要猴子补丁的行并执行`compass clean`.

## 不要使用它！通过 Ctrl+/ 使用单行注释。

尽管此解决方案是可移植的，并且无需手动破解 SASS 代码即可适用于所有人，但您确实应该考虑使用允许使用单行注释将整个段落注释掉的 IDE。对我来说是`Ctrl`+ `/`。

在这里，我为您拍摄了一个简短的视频，以展示使用多行评论实际上比使用多行评论更快更有效：[http ://www.youtube.com/watch?feature=player_detailpage&v=DTyMAPZrwyc](http://www.youtube.com/watch?feature=player_detailpage&v=DTyMAPZrwyc)

行注释还可以让您在不破坏代码的情况下注释掉注释。

考虑您有以下代码：

```
foo

/* Bla bla */
bar

baz 
```

你需要把它全部注释掉。如果你用`/* */`...包裹它

```
/*foo

/* Bla bla */
bar

baz*/ 
```

...然后你打破了密码！现在你有一个以 开头`/*foo`和结尾的注释，`bla */`还有一个语法错误`baz*/`。

相反，只需选择整个代码并点击`Ctrl`+ `/`（前提是使用某些 IDE 或程序员的记事本），它会立即被注释掉：

```
//foo
//
///* Bla bla */
//bar
//
//baz 
```

当然，以后可以使用相同的热键取消注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T10:50:34.337

您可以将评论包装在未使用的 @mixin 中 - 这不是一个理想的修复方法，但它可以工作。

```
@mixin ignore {
    /*
      COMMENT
    */
} 
```

# iphone - 将 segue 展开到嵌入式视图控制器（容器视图的 VC）？

> ID：15720435
> 
> 赞同：4
> 
> 时间：2013-03-30T15:50:59.347
> 
> 标签：iphone, ios, xcode, storyboard, segue

我在导航控制器中有一个父 VC。Parent 在容器视图中嵌入了一个 Child VC（使用 embed segue）。子 VC 本身对输入 VC 执行 push segue - 这将父 VC 推开。

![在此处输入图像描述](../Images/8bd186e203c39da6a67ad1a91b639094.png)

问题是，当我的 Input VC 完成并想要放松回到 Child VC（这是推动它的那个，所以它应该处理答案）时，什么也没有发生。相反，当我向父母放松时（作为确保我做对一切的测试），一切正常。

换句话说，我要做的是照顾 Child VC 中连接的 IBAction 方法。

有没有办法放松到在嵌入式 VC 中实现的 IBAction？

# smtp - Debian Exim4 SMTP-AUTH 停止工作

> ID：15720443
> 
> 赞同：1
> 
> 时间：2013-03-30T15:51:35.453
> 
> 标签：smtp, debian, smtp-auth, exim4

我最近在我的 Debian Squeeze 服务器上出现了一个奇怪的问题。

我已经将 Exim4 配置为使用带有加密设置的 SMTP-AUTH 并在此机器上运行了很长时间，但现在它不起作用。

起初我以为可能是我的证书过期了，但事实并非如此，它们还能再用几年。

服务器似乎不再在端口 25 上侦听。

如果我尝试远程登录到端口 25，它会超时。

如果我在服务器上运行 netstat -tulpen，则端口 25 上没有任何监听。

我正在为 Exim4 使用 splitconf。

在 conf.d/main 我启用 MAIN_TLS_ENABLE=true

在 conf.d/auth/30_exim4-config_examples 我有以下

```
# Authenticate against local passwords using sasl2-bin
# Requires exim_uid to be a member of sasl group, see README.Debian.gz
plain_saslauthd_server:
   driver = plaintext
   public_name = PLAIN
   server_condition = ${if saslauthd{{$auth2}{$auth3}}{1}{0}}
   server_set_id = $auth2
   server_prompts = :
   .ifndef AUTH_SERVER_ALLOW_NOTLS_PASSWORDS
   server_advertise_condition = ${if eq{$tls_cipher}{}{}{*}}
   .endif
#
 login_saslauthd_server:
   driver = plaintext
   public_name = LOGIN
   server_prompts = "Username:: : Password::"
   # don't send system passwords over unencrypted connections
   server_condition = ${if saslauthd{{$auth1}{$auth2}}{1}{0}}
   server_set_id = $auth1
   .ifndef AUTH_SERVER_ALLOW_NOTLS_PASSWORDS
   server_advertise_condition = ${if eq{$tls_cipher}{}{}{*}}
   .endif 
```

如果我在服务器上运行此命令： swaks -a -tls -q HELO -s localhost -au A_USER_NAME -ap '<>'

I get this ... === Trying localhost:25... *** Error connecting 0.0.0.0 to localhost:25: *** IO::Socket::INET: connect: Connection refused

Can someone point me to some more advanced debugging techniques?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:17:45.717

OK. I figured it out.

Comcast blocks port 25\. I don't know why this is coming up now, unless they've recently started blocking it.

I had to change a line in /etc/default/exim4

From this

```
SMTPLISTENEROPTIONS='-oX 25 -oP /var/run/exim4/exim.pid' 
```

To this

```
SMTPLISTENEROPTIONS='-oX 465:25 -oP /var/run/exim4/exim.pid' 
```

I also added this to /etc/exim4/conf.d/main/03_exim4-config_tlsoptions

```
tls_on_connect_ports=465 
```

It's odd that this just popped up, unless a Debian package updated the /etc/default/exim4 file. It's confusing, but it's working. Hopefully this will be helpful to someone in the future.

Cheers.

# php - 使用 Laravel 的 HTTPful 库检索 JSON 响应

> ID：15720450
> 
> 赞同：2
> 
> 时间：2013-03-30T15:51:53.280
> 
> 标签：php, json, laravel, httpful

我目前正在使用 Mandrill 作为电子邮件发送/入站服务和 Laravel 3.x 构建一个电子邮件客户端（入站和出站发送）。

为了发送消息，我在我的邮件/撰写 POST 方法中使用以下代码将[HTTPful 包](http://bundles.laravel.com/bundle/httpful)与[Mandrill一起使用。](https://mandrillapp.com/api/docs/messages.html#method=send)

```
$url = 'https://mandrillapp.com/api/1.0/messages/send.json';
$data = array( 
  'key' => '{removedAPIkey}',
  'message' => array (
    'to'    =>  array( array( "email" => $_to ) ),
    'from_name'   =>  Auth::user()->name,
    'from_email'  =>  Auth::user()->email,
    'subject' =>  $_subject,
    'html'    =>  $_body
    ),
  'async' => true
        );

$request = Httpful::post($url)->sendsJson()->body($data)->send(); 
```

链接到上面格式更好的代码：http: [//paste.laravel.com/m79](http://paste.laravel.com/m79)

现在，据我从 API 日志中可以看出，请求已正确发出（使用预期的 JSON）并返回以下格式的响应：

```
[
  {
      "email": "test@test.com",
      "status": "queued",
      "_id": "longmessageID"
  }
] 
```

但是，我想要做的是访问来自请求的响应（特别是 _id 属性），它是 JSON 格式的。现在据我所知，HTTPful 类应该自动执行此操作（使用 json_decode()）。但是，访问：

```
$request->_id; 
```

不工作，我不完全确定如何获取这些数据（它是必需的，因此我可以为类似 postmaster 的功能记录软退回、硬退回和拒绝消息）

任何援助将不胜感激。

**编辑**

使用以下代码，会导致发送邮件但返回错误：

```
$url = 'https://mandrillapp.com/api/1.0/messages/send.json';
$data = array( 
  'key' => '{removedAPIkey}',
  'message' => array (
    'to'    =>  array( array( "email" => $_to ) ),
    'from_name'   =>  Auth::user()->name,
    'from_email'  =>  Auth::user()->email,
    'subject' =>  $_subject,
    'html'    =>  $_body
    ),
  'async' => true
        );

$request = Httpful::post($url)->sendsJson()->body($data)->send();

if ( $request[0]->status == "queued" ) {
    $success = true;
} 
```

导致抛出异常：`Cannot use object of type Httpful\Response as array`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:00:54.263

我必须说，非常感谢 Aiias 的帮助。我自己设法解决了这个问题（我一定花了好几个小时看这个）。对于任何想知道的人，HTTPful 包都有一个 body 数组，其中保存了响应。因此，下面的代码有效：

```
$url = 'https://mandrillapp.com/api/1.0/messages/send.json';
$data = array( 
  'key' => '{removedAPIkey}',
  'message' => array (
    'to'    =>  array( array( "email" => $_to ) ),
    'from_name'   =>  Auth::user()->name,
    'from_email'  =>  Auth::user()->email,
    'subject' =>  $_subject,
    'html'    =>  $_body
    ),
  'async' => true
        );

$request = Httpful::post($url)->sendsJson()->body($data)->send();

if ( $request->body[0]->status == "queued" ) {
    $success = true;
} 
```

Again, huge thanks to Aiias for clearing some major confusion up for me!

# jquery - clearInterval on hover and setInterval onmouseout

> ID：15720451
> 
> 赞同：1
> 
> 时间：2013-03-30T15:52:01.040
> 
> 标签：jquery, hover, carousel, setinterval, clearinterval

I have created a carousel that slides every 5 seconds automatically (as well as having manual buttons to move slides). I want to be able to pause the scrolling when the mouse is hovered over a slide, and resume when the mouse is no longer hovered.

So far my script will do all of the above.
However it won't start on page load, you have to hover over and then un-hover for it to start.

Here is my script:

```
jQuery('#viewport').hover(function () {
    window.clearInterval(timer);
}, function () {
    timer = window.setInterval(function () {
        jQuery('#next').trigger('click');
    }, 1000);
}); 
```

What can I do to get this to start sliding straight away?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T16:11:34.247

```
jQuery('#viewport').on({
    mouseenter: function() {
        clearInterval( $(this).data('timer') );
    },
    mouseleave: function() {
        $(this).data('timer', setInterval(function () {
            jQuery('#next').trigger('click');
        }, 1000));
    }
}).trigger('mouseleave'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:55:00.850

```
function nextSlide () {
   jQuery('#next').trigger('click');
} 

jQuery('#viewport').hover(function() {
  window.clearInterval(timer);    
}, function() {
  timer = window.setInterval(nextSlide, 1000);
});

nextSlide(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-30T15:54:15.980

Wrap everything inside

```
$(document).ready(function()
{
    // Your code there.
}); 
```

# java - 一旦声音停止播放，替换 android/Java 中的图像

> ID：15720453
> 
> 赞同：1
> 
> 时间：2013-03-30T15:52:05.223
> 
> 标签：java, android

我有一个应用程序可以替换图像并在单击按钮时播放声音，我要做的是在声音停止播放后恢复到原始图像。

我的按钮点击监听器：

```
 public void onClick(View v) {
        // Perform action on click
        Context context = getApplicationContext();
        CharSequence text = "Playing Theme";
        int duration = Toast.LENGTH_SHORT;

            //this is the replaced image while the sound is playing
        imgSheep.setImageResource(R.drawable.replacedimage);

        Toast.makeText(context, text, duration).show();
        playSound(R.drawable.sound);
    } 
```

我的声音播放功能：

```
//plays a sound file
private void playSound(int sFile) {
    //set up MediaPlayer   
    final int medFile = sFile;

    Thread thread = new Thread(new Runnable() {
        public void run() {
            playSound = MediaPlayer.create(getApplicationContext(), medFile);
            playSound.start();
        }
    });
    thread.start();
} 
```

我知道我可以使用如下方法：

```
mp.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                performOnEnd();
            }

            }); 
```

所以我可以这样：

```
 playSound.setOnCompletionListener(new OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer playSound) {
                         imgSheep.setImageResource(R.drawable.originalimage);
                }
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:04:39.643

你的问题是你的线程。在 playSound 中，您正在启动一个创建媒体播放器并播放声音的新线程。但是，您在 onCreate 中设置了 onCompletionListener。那里有一个竞争条件 - 如果新线程没有调度并且没有运行并在您点击该行之前设置 mediaPlayer 变量，您将因 NullPointerError 而崩溃。

我建议只是丢失线程。MediaPlayer 已经在后台播放并且不会挂起 UI 线程。

# android - 使用 LinearLayout 的四个按钮菜单

> ID：15720459
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:52:53.993
> 
> 标签：android, android-layout, android-linearlayout, android-layout-weight

我正在尝试创建一个菜单，该菜单将容纳四个彼此相邻的 ImageButton，并且大小是相对的，以支持不同的屏幕分辨率。

在菜单下方，我需要一个额外的小图像按钮。

下面是它在 Eclipse 中的外观：

[http://i.stack.imgur.com/QMvcs.jpg](http://i.stack.imgur.com/QMvcs.jpg)

这就是我构建它的方式`menu.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rlMain"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/abs__background_holo_dark"
    android:orientation="vertical"
    android:weightSum="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.95"
        android:orientation="vertical"
        android:weightSum="1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.5"
            android:orientation="horizontal"
            android:weightSum="1" >

            <ImageButton
                android:id="@+id/newsItem"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.5"
                android:onClick="NewsClicked" />

            <ImageButton
                android:id="@+id/imageItem"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.5"
                android:onClick="TeamsClicked" >
            </ImageButton>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.5"
            android:orientation="horizontal"
            android:weightSum="1" >

            <ImageButton
                android:id="@+id/chatItem"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.5"
                android:onClick="ChatClicked" >
            </ImageButton>

            <ImageButton
                android:id="@+id/teamItem"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.5"
                android:onClick="ImagesClicked" />
        </LinearLayout>
    </LinearLayout>

    <ImageButton
        android:layout_weight="0.05"
        android:id="@+id/orderDigital"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:onClick="DigitalClicked" />

</LinearLayout> 
```

但在我的手机上显示如下：

[http://i.stack.imgur.com/cyQoc.png](http://i.stack.imgur.com/cyQoc.png)

你能建议另一种方法来构建它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:09:54.670

问题解决了。我忘了还有另一个布局（母版页）实际上是主布局的父级，它的高度=包装内容

谢谢 ：）

# c# - 在不实例化页面的情况下调用网页的方法

> ID：15720460
> 
> 赞同：0
> 
> 时间：2013-03-30T15:53:01.577
> 
> 标签：c#, asp.net, webforms

在我的应用程序中，我们有一个 aspx 页面`frmwebform1`。`GetmyData()`这个页面有一个调用助手类的静态方法`HelperClass` 但是代码的问题是当我们调用该方法时`GetHelperData()`，在这个助手类中实例化`frmwebform1`以获取它的方法`FillGrid()`。问题是当它实例化我们`frmwebform1`正在失去价值时。`entityId``entityType`

有什么方法可以在`FillGrid()`不实例化`frmwebform1`页面的情况下调用该方法。不幸的是，我不能将`FillGrid()`方法设为静态，因为它会损害我们的数据。

感谢您提前提供帮助。

```
//frmwebform1.aspx.cs
public partial class frmwebform1 : System.Web.UI.Page 
{
    string entityId;
    string entityType;

    protected void Page_Load(object sender, EventArgs e)
     {
       if (Request.QueryString["entityId"] != null)
         {
           entityType = Request.QueryString["entityType"].ToString().ToUpper();
           entityId = Request.QueryString["entityId"].ToString();       
         }
       if (!IsPostBack)
         {
           grdMygrid.DataSource = FillGrid();
           grdMygrid.DataBind();
         }
    }
        public  DataTable FillGrid()
            {
                string server = HttpContext.Current.Session["Server"].ToString();
                string database = HttpContext.Current.Session["Database"].ToString();
                string usrID =HttpContext.Current.Session["user_ID"].ToString();
                Data tr = new getData(server, database, usrID);
                DataTable dt = tr.getAllEntities(entityId);

                return dt;
            }

        [WebMethod]      //AJAX page method
            public static List<class1> GetmyData()
            {
                HelperClass helper = new HelperClass();
                return helper.GetHelperData();
            }

 }

//Second Class

 public class HelperClass
    {
        public  List<class1> GetHelperData()
        {
            frmwebform1 form1 = new frmwebform1();
            DataTable dt = form1.FillGrid();

            List<class1> list = new List<class1>();
            class1 item;

            foreach (DataRow dr in dt.Rows)
            {
                item = new TaxHistory();
                item.txr_guid = dr["txr_guid"].ToString();                
                item.Amount = string.Format("{0}", dr["Amount"]);
                item.Email = dr["EmailAddress"].ToString();
                item.Date = dr["date"].ToString();
                item.user = dr["user"].ToString();                

                list.Add(item);
            }

            return list;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:47:10.783

从 Page 类中提取该方法，因为它显然不应该存在，因为它似乎具有不同的职责：

[我们如何确定对象在 OOP 中的职责？](https://stackoverflow.com/questions/6658629/how-do-we-determine-an-objects-responsibility-in-oop)

创建一个静态类并将该方法放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:56:37.433

将 FillGrid 方法设为静态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:38:06.493

而不是拥有从页面类中的数据库获取数据并从其他类调用它的方法并不是一件好事。如果您了解分层架构，则应该将该方法移至数据访问层并从页面方法调用该方法，这将返回您的 DataTable。

我希望这是有道理的:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T01:32:55.640

我使用了 Javascript 中的 PageMethods。这解决了我的问题。感谢您的所有回答。

# java - 代码持续很长时间 - 递归问题 - 我该如何解决？

> ID：15720461
> 
> 赞同：0
> 
> 时间：2013-03-30T15:53:03.890
> 
> 标签：java, recursion, overflow

我在我的类中使用了以下代码，目的是进行一轮递归（特别是在相同类型的对象中创建一个对象）。好吧，一轮递归现在就像是 200 轮递归......所以这搞砸了很多东西。以下代码是我调用递归的地方：

```
//Find Solute
    try{if(iterations == 0){ //RECONDITION::: iterations is equal to zero at start of program and is static!
        remaining = Whitespace.removePreceding(remaining);
        String unused = remaining.substring(0);
        InterpretInput solute = new InterpretInput(remaining);
        solute.begin();
        solute.fixSoluteAmount();
        soluteAmount = solute.getSolventAmount();
        isSolution = true;
        ++iterations;
    }}catch(Exception ex){
    }
    finally{
        System.out.println("Debugging point D");
        findNumber();
        fixSolventAmount();
        fixSoluteAmount();
    } 
```

您会在上面找到“调试点 D”，它被打印了很多次，因此它显然是在使用一堆对象进行递归之后，因此其余代码被搞砸了。我只需要有经验的人指出这是一次递归迭代的缺陷。

如果你需要整个课程，我也会复制/粘贴下面的内容，但它几乎有 200 行......所以是的......（我知道我不应该做那么长的课程，但这个对象需要很多东西它）。

```
import java.util.ArrayList; 
```

公共类解释输入{

```
/**
 * @param remaining - The string that was input, what's left to analyze
 */

/**  Variables  */

private String remaining; //The string input by the user, containing what's left to analyze
private static int iterations = 0;

//Solvent Info
private double solventAmount; //The amount of the solvent expressed as final in MOLES
private M solventAmountMeas; //The measurement used in solventAmount
private double solventConc; //The concentration of the solvent
private M solventConcMeas; //The measurement used in solventConc
private E[] solventCompound; //The compound of the solvent
private E[] water = {E.H, E.H, E.O};

//Solute Info
private double soluteAmount; //The amount of solute in the solution

//Type of Data
private boolean isElement = false; //Determines if the information input is only an element
private boolean hasAmount = false; //Determines if the information input has an amount of solvent
private boolean isSolution = false; //determines if the information input is a solution

private int identificationNumber;

/**  Constructor  */

public InterpretInput (String remain){
    remaining = remain;
}

/**  Mutator Methods  
 * @throws Exception */

public void begin() throws Exception{

    //Find Measurement
    FindMeasurements measureObject = new FindMeasurements(remaining);
    while (measureObject.exists() == true){
        measureObject.determineNumber();
        measureObject.determineMeasurement();
        double solventAmountTemp = measureObject.getAmount();
        M solventAmountMeasTemp = measureObject.getMeasurement();
        if( (solventAmountMeasTemp.getType()) == 3 ){
            isSolution = true;
            solventConc = solventAmountTemp;
            solventConcMeas = solventAmountMeasTemp;
        }else{      
            hasAmount = true;
            solventAmount = solventAmountTemp;
            solventAmountMeas = solventAmountMeasTemp;
        }
        remaining = measureObject.getRemaining();

    }

    //Find Compound
    FindCompound comp = new FindCompound(remaining);
    comp.getCompound();
    solventCompound = comp.getValue();
    remaining = comp.getRemaining();
    if (solventCompound.length == 1)
        isElement = true;

    //Find Solute
    try{if(iterations == 0){
        remaining = Whitespace.removePreceding(remaining);
        String unused = remaining.substring(0);
        InterpretInput solute = new InterpretInput(remaining);
        solute.begin();
        solute.fixSoluteAmount();
        soluteAmount = solute.getSolventAmount();
        isSolution = true;
        ++iterations;
    }}catch(Exception ex){
    }
    finally{
        System.out.println("Debugging point D");
        findNumber();
        fixSolventAmount();
        fixSoluteAmount();
    }
}

public void fixSoluteAmount() throws Exception {
    fixSolventAmount();
}

public void fixSolventAmount() throws Exception {
    switch (identificationNumber){ //VIEW findNumber TO SEE INDEX OF THESE CASES

        case 1:{
            //In this situation, there would be nothing to change to begin with
            break;
        }

        case 2:{
            //In this situation, there would be nothing to change to begin with
            break;
        }

        case 3:{
            solventAmount *= solventAmountMeas.ofBase();
            switch (solventAmountMeas.getType()){
                case 1:{ //volume
                    if (!solventCompound.equals(water))
                        throw new Exception();
                    else{
                        solventAmount *= 1000; //Convert 1000g for every 1L
                        double molarMass = 0;
                        for (E e : solventCompound)
                            molarMass += e.atomicMass();
                        solventAmount /= molarMass; //convert to moles
                    }
                }

                case 2:{ //mass
                    double molarMass = 0;
                    for (E e : solventCompound)
                        molarMass += e.atomicMass();
                    solventAmount /= molarMass; //convert to moles
                }
            }
        }

        case 4:{
            if(solventAmountMeas.equals(M.m)){
                throw new Exception(); //I AM TAKING OUT THIS FEATURE, IT WILL BE TOO DIFFICULT TO IMPLEMENT
                                       //BASICALLY, YOU CANNOT USE MOLALITY IN THIS PROGRAM ANYMORE
            }
        }

        case 5:{
            if(solventAmountMeas.equals(M.m))
                throw new Exception(); //I AM TAKING OUT THIS FEATURE, IT WILL BE TOO DIFFICULT TO IMPLEMENT
                                       //BASICALLY, YOU CANNOT USE MOLALITY IN THIS PROGRAM ANYMORE
            double molarMass = 0;
            for (E e : solventCompound)
                molarMass += e.atomicMass();
            solventAmount /= molarMass; //convert to moles
        }
    }
}

public void findNumber(){
    /**
     * 1 = Element
     * 2 = Compound
     * 3 = measured amount of compound
     * 4 = specific concentration of solution
     * 5 = Measured amount of specific concentration of solution
     * */

    if(isElement==true)
        identificationNumber = 1;
    else if(isSolution == false && hasAmount == false)
        identificationNumber = 2;
    else if(isSolution == false && hasAmount == true)
        identificationNumber = 3;
    else if(isSolution == true && hasAmount == false)
        identificationNumber = 4;
    else
        identificationNumber = 5;
}

/**  Accessory Methods  */

public double getSolventAmount(){
    return solventAmount;
}

public double getSoluteAmount(){
    return soluteAmount;
}

public double getConcentration(){
    return solventConc;
}

public E[] returnCompound(){
    return solventCompound;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:05:35.260

您的`Begin`函数似乎在增加`iterations`变量之前调用自己。这将导致无限递归。请参阅`HERE`下面代码中的注释。

```
//Find Solute
try{if(iterations == 0){
    remaining = Whitespace.removePreceding(remaining);
    String unused = remaining.substring(0);
    InterpretInput solute = new InterpretInput(remaining);

    // HERE - calls itself again, prior to incrementing
    // iterations variable
    solute.begin();

    solute.fixSoluteAmount();
    soluteAmount = solute.getSolventAmount();
    isSolution = true;

    // HERE - iterations is incremented, but too late
    ++iterations;
}}catch(Exception ex){
} 
```

要解决递归问题，您应该在调用`iterations`之前递增。`begin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:06:03.180

这里的代码很乱；弄清楚目标是什么有点困难。您要对 in 中的字符串做什么`InterpretInput`，为什么它采用如此复杂的解决方案（递归构建的对象）而不是循环甚至只是递归方法？

然而，除此之外，似乎没有任何方法可以让您的递归中断。它这样做的唯一有效方法是 if `iterations != 0`，这永远不会是真的，因为唯一的时间`iterations`增加是在递归调用之后。因此，我认为程序完全终止的唯一原因是堆栈溢出，但异常被空`catch`块捕获。尝试在该块中打印一些东西；我敢打赌，即使您不希望它发生，这也是代码的去向。

# symfony - Symfony2 Doctrine Extensions 从 YML 生成实体

> ID：15720464
> 
> 赞同：1
> 
> 时间：2013-03-30T15:53:20.487
> 
> 标签：symfony, doctrine-orm

我正在尝试使用 Doctrine Extensions 中的 Timestampable 行为，我安装了 StofDoctrineExtensionsBundle 来帮助我解决这个问题。但是当我制作我的 YML 方案并运行生成实体命令时，一切都运行没有错误，但是在生成的 php 类中没有出现 Gedmo/DoctrineExtensions 注释。我究竟做错了什么？

这是我用于制作简单问题跟踪器的 YML 文件（Issue.orm.yml）：

```
Theta\IssueTrackerBundle\Entity\Issue:
  type: entity
  table: issues
  id:
    id:
      type: integer
      generator:
        strategy: AUTO
  fields:
    category:
      type: string
      length: 16
    created_at:
      type: datetime
      gedmo:
        timestampable:
          on: create
    updated_at:
      type: datetime
      gedmo:
        timestampable:
          on: update
    closed_at:
      type: datetime
      gedmo:
        timestampable
    title:
      type: string
      length: 64
  oneToOne:
    user_id:
      targetEntity: ThetaUserBundle\User
    assigned_to:
      targetEntity: ThetaUserBundle\User 
```

这是生成的 php 类（Issue.php）：

```
namespace Theta\IssueTrackerBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Issue
 */
class Issue
{
    /**
     * @var integer
     */
    private $id;

    /**
     * @var string
     */
    private $category;

    /**
     * @var \DateTime
     */
    private $created_at;

    /**
     * @var \DateTime
     */
    private $updated_at;

    /**
     * @var \DateTime
     */
    private $closed_at;

    /**
     * @var string
     */
    private $title;

    /**
     * @var \ThetaUserBundle\User
     */
    private $user_id;

    /**
     * @var \ThetaUserBundle\User
     */
    private $assigned_to;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set category
     *
     * @param string $category
     * @return Issue
     */
    public function setCategory($category)
    {
        $this->category = $category;

        return $this;
    }

    /**
     * Get category
     *
     * @return string 
     */
    public function getCategory()
    {
        return $this->category;
    }

    /**
     * Set created_at
     *
     * @param \DateTime $createdAt
     * @return Issue
     */
    public function setCreatedAt($createdAt)
    {
        $this->created_at = $createdAt;

        return $this;
    }

    /**
     * Get created_at
     *
     * @return \DateTime 
     */
    public function getCreatedAt()
    {
        return $this->created_at;
    }

    /**
     * Set updated_at
     *
     * @param \DateTime $updatedAt
     * @return Issue
     */
    public function setUpdatedAt($updatedAt)
    {
        $this->updated_at = $updatedAt;

        return $this;
    }

    /**
     * Get updated_at
     *
     * @return \DateTime 
     */
    public function getUpdatedAt()
    {
        return $this->updated_at;
    }

    /**
     * Set closed_at
     *
     * @param \DateTime $closedAt
     * @return Issue
     */
    public function setClosedAt($closedAt)
    {
        $this->closed_at = $closedAt;

        return $this;
    }

    /**
     * Get closed_at
     *
     * @return \DateTime 
     */
    public function getClosedAt()
    {
        return $this->closed_at;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Issue
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set user_id
     *
     * @param \ThetaUserBundle\User $userId
     * @return Issue
     */
    public function setUserId(\ThetaUserBundle\User $userId = null)
    {
        $this->user_id = $userId;

        return $this;
    }

    /**
     * Get user_id
     *
     * @return \ThetaUserBundle\User 
     */
    public function getUserId()
    {
        return $this->user_id;
    }

    /**
     * Set assigned_to
     *
     * @param \ThetaUserBundle\User $assignedTo
     * @return Issue
     */
    public function setAssignedTo(\ThetaUserBundle\User $assignedTo = null)
    {
        $this->assigned_to = $assignedTo;

        return $this;
    }

    /**
     * Get assigned_to
     *
     * @return \ThetaUserBundle\User 
     */
    public function getAssignedTo()
    {
        return $this->assigned_to;
    }
} 
```

可时间戳的行为没有出现在 php 类中，我不明白为什么。我按照说明安装 StofDoctrineExtensionsBundle 的说明，它似乎安装正确，但它没有做任何事情。我正在使用 Symfony 2.2。

所以我的问题是：我是在期待不应该发生的事情，还是我做错了什么？

谢谢你的帮助。

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:34:18.507

不确定它对 StofDoctrineExtensions 的工作方式是否相同，但通常你需要将 lifecyccallbacks 放在你的 yml 中。

```
 lifecycleCallbacks:
        postPersist: doSomething
        # callback   # method in entity 
```

然后注释和方法名称将与此匹配。

# php - JSON PHP解析搜索API

> ID：15720468
> 
> 赞同：-3
> 
> 时间：2013-03-30T15:53:38.317
> 
> 标签：php, json

好的，我正在使用 Blekko 搜索 API：

[http://blekko.com/ws/?q=hello+%2Fjson](http://blekko.com/ws/?q=hello+%2Fjson)

我将如何解析它？

我没有从 PHP 解析 JSON 的经验，所以我很感激一些帮助，并且`json_decode()`文档未能为我解释所有内容，尤其是获取内部的数据`RESULT`。:) 你知道，[和]。

你能帮我指出正确的方向吗？:)

谢谢你们，你们都很有帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:59:28.810

这是访问 API 的代码。您应该在我留下评论的地方输入您自己的错误/意外结果处理。

```
$data = file_get_contents('http://blekko.com/ws/?q=hello+%2Fjson');

if(!empty($data)){

    $data = json_decode($data);

    if(!empty($data->ERROR)){

         // Error with API response.

    } else {

        $data = $data->RESULT;
        if(empty($data)){

            // No results.

        } else {

                // Uncomment the line below to see your data
                // echo '<pre>' . print_r($data) . '</pre>';

            foreach($data AS $key => $val){     
                echo $val->short_host . '<br />';
            }
        }
    }

} else {
    // Failed to retrieve data.
} 
```

# html - div 内的表 100 - 扩展到屏幕宽度，而不是 div

> ID：15720469
> 
> 赞同：0
> 
> 时间：2013-03-30T15:53:42.863
> 
> 标签：html, css

让我们看看这个布局：

```
<div style="float: left">
content1
</div>
<div style="float: left">
<table width="100%"><tr><td>dfsd</td></tr></table>
</div> 
```

然后会发生以下情况：表格转到新行，并且与屏幕一样宽。但它应该保持在前一个 div 旁边，并且与第二个 div 一样宽。如何解决这个问题？

编辑：左列固定为 200px 宽度。第二列应该是 100%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T21:11:22.293

我认为您的意思是第二列应该是页面其余部分的 100%，对吗？

不过，这完全取决于您要达到的目标。如果这对您的内容有意义，您可以创建一个环绕表：

```
<table class="table_surround">
   <tr>
       <td class="col1">content 1</td>
       <td>(table here)</td>
   </tr>
</table>

.table_surround { width:100%; }
.col1 { width:200px; } 
```

或者你可以使用绝对定位：

```
<div style="position:absolute; left:0; width:200px;" >content 1</div>
<div style="position:absolute; left:200px; right:0;" >table here</div> 
```

这是另一个不错的选择： [扩展 div 以获取剩余宽度](https://stackoverflow.com/questions/1260122/expand-div-to-take-remaining-width)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:58:27.087

给你的 DIV 一些宽度……比如：

```
<div style="float: left; width: 25%;">
    content1
</div>
<div style="float: left; width: 75%;">
    <table width="100%"><tr><td>dfsd</td></tr></table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:58:35.683

默认情况下，`<div>`s 将`width: 100%;`在 CSS 中设置为 (bar default margins/padding)，您需要手动更改它。

当没有空间容纳其他元素时，向左浮动将无济于事。

# android - ListFragment NullPointerException 错误

> ID：15720470
> 
> 赞同：1
> 
> 时间：2013-03-30T15:53:52.487
> 
> 标签：android, android-listview, nullpointerexception, android-arrayadapter, android-listfragment

我创建了一个用来填充**RSS**数据的**ListFragment 。**唯一的问题是我收到一个**NullPointerException**强制关闭我的应用程序。这是LogCat：

 ****```
03-30 15:43:44.584: E/AndroidRuntime(28703): at com.example.app.TestFragment$MyCustomAdapter.getView(TestFragment.java:157) 
```

该错误指向此代码：

```
listTitle.setText(feed.getList().get(position).getTitle()); 
```

从这个类；列表片段。

```
public final class TestFragment extends ListFragment {
private static final String KEY_CONTENT = "TestFragment:Content";

public static TestFragment newInstance(String content) {
    TestFragment fragment = new TestFragment();

    return fragment;
}

private RSSFeed myRssFeed = null;

private String mContent = "???";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if ((savedInstanceState != null)
            && savedInstanceState.containsKey(KEY_CONTENT)) {
        mContent = savedInstanceState.getString(KEY_CONTENT);
    }
}

private RSSFeed feed = null;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    fillData();
    return inflater.inflate(R.layout.list_fragment, container, false);

}

public void fillData() {

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();

    StrictMode.setThreadPolicy(policy);

    try {
        URL rssUrl = new URL("http://allthingsd.com/feed/");
        SAXParserFactory mySAXParserFactory = SAXParserFactory
                .newInstance();
        SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
        XMLReader myXMLReader = mySAXParser.getXMLReader();
        RSSHandler myRSSHandler = new RSSHandler();
        myXMLReader.setContentHandler(myRSSHandler);
        InputSource myInputSource = new InputSource(rssUrl.openStream());
        myXMLReader.parse(myInputSource);

        myRssFeed = myRSSHandler.getFeed();

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (myRssFeed != null) {
        /*
         * TextView feedTitle = (TextView) findViewById(R.id.feedtitle);
         * TextView feedDescribtion = (TextView)
         * findViewById(R.id.feeddescribtion); TextView feedPubdate =
         * (TextView) findViewById(R.id.feedpubdate); TextView feedLink =
         * (TextView) findViewById(R.id.feedlink);
         * feedTitle.setText(myRssFeed.getTitle());
         * feedDescribtion.setText(myRssFeed.getDescription());
         * feedPubdate.setText(myRssFeed.getPubdate());
         * feedLink.setText(myRssFeed.getLink());
         */
        MyCustomAdapter adapter = new MyCustomAdapter(getActivity(),
                R.layout.row, myRssFeed.getList());
        setListAdapter(adapter);

    }

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(KEY_CONTENT, mContent);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    /*
     * Intent intent = new Intent(this,ShowDetails.class); Bundle bundle =
     * new Bundle(); bundle.putString("keyTitle",
     * myRssFeed.getItem(position).getTitle());
     * bundle.putString("keyDescription",
     * myRssFeed.getItem(position).getDescription());
     * bundle.putString("keyLink", myRssFeed.getItem(position).getLink());
     * bundle.putString("keyPubdate",
     * myRssFeed.getItem(position).getPubdate()); intent.putExtras(bundle);
     * startActivity(intent);
     */

}

public class MyCustomAdapter extends ArrayAdapter<RSSItem> {

    public MyCustomAdapter(Context context, int textViewResourceId,
            List<RSSItem> list) {
        super(context, textViewResourceId, list);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = getActivity().getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent, false);
        }

        TextView listTitle = (TextView) row.findViewById(R.id.textView2);
        listTitle.setText(feed.getList().get(position).getTitle());
        TextView listPubdate = (TextView) row.findViewById(R.id.textView1);
        listPubdate.setText(myRssFeed.getList().get(position).getPubdate());

        if (position % 2 == 0) {
            listTitle.setBackgroundColor(0xff101010);
            listPubdate.setBackgroundColor(0xff101010);
        } else {
            listTitle.setBackgroundColor(0xff080808);
            listPubdate.setBackgroundColor(0xff080808);
        }

        return super.getView(position, convertView, parent);

    }
}

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:59:56.090

> 该错误指向此代码：
> 
> ```
> listTitle.setText(feed.getList().get(position).getTitle()); 
> ```

查找 NullPointerException 相对容易，只需检查您引用的每个变量。例如，我看不到你在哪里实例化`feed`，你在这里声明它：

```
private RSSFeed feed = null; 
```

但它永远不会收到除 之外的值`null`，在某个地方你需要这样的代码`feed = new RSSFeed();`......（你的意思是使用`myRSSFeed`吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:41:40.353

检查您的 row.xml id。这可能导致您的空指针。****

# ios - 自定义 UI 组件的超类是什么？

> ID：15720471
> 
> 赞同：0
> 
> 时间：2013-03-30T15:53:55.583
> 
> 标签：ios, objective-c, cocoa-touch, custom-controls

我需要创建一个满足以下条件的自定义 UI 组件：

*   它将包含 UIView、Labels、Button 和 TableView 的组合。
*   应该可以以编程方式对其进行实例化 - 或者 - 在 nib 编辑器中放置一个 UIView 并将检查器中的类更改为我的自定义组件类。（它会维护/保留放置的 UIView 中的主框架值）

我已经开始尝试它，我选择了 UIView 但它不处理 ..cellForRow... 单元格方法。另一方面，如果我使用 UIViewController，那么我在检查器中的类更改不起作用并且应用程序崩溃。

我应该选择哪一个 - UIView、UIviewController 或 NSObject？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:06:03.227

我会选择 UIViewController 或 UITableViewController，因为你说你有一个 tableView。如果你做一个 UIViewController，你可能必须在其中包含另一个 UITableViewController，使用 addChildViewController，如此[处所述](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

我相信您的应用程序崩溃的原因是您将类超类从 UIView 更改为 UIViewController，但在 Interface Builder 中您仍然只有一个 UIView 对象。您需要在 Interface Builder 中将其更改为 UIViewController，并选择您的类作为文件所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:21:25.847

如果您打算将其作为一个独立组件，并且所有逻辑都包含在控件中，那么我将它基于 UIViewController，就像 Apple 对 MFMailComposeViewController 所做的那样。如果您希望它是一个严格的视图，没有自己的内置逻辑，而是委托该逻辑，则使用 UIView 并将表视图方法委托给使用它的控制器。

# actionscript-3 - As3 gotoAndStop 在嵌套的 MovieClip

> ID：15720473
> 
> 赞同：0
> 
> 时间：2013-03-30T15:53:58.250
> 
> 标签：actionscript-3

我有电影剪辑怪物。（怪物数据类型是`MovieClip`） 在电影剪辑怪物中，我有电影剪辑的眼睛、嘴巴、腿、手。我需要告诉我的闪光灯类似`monster.mouth.gotoAndStop(2);`.

我怎样才能做到这一点 ？

谢谢你的答案。

代码：（嘴是我嘴电影剪辑的实例名称）

```
public function Monster() 
    {
        // constructor code
        var monsterAvatar : MonsterAvatar = new MonsterAvatar();
        addChild(monsterAvatar);

        monsterAvatar.x = 200;
        monsterAvatar.y = 170;

        monsterAvatar.Mouth.gotoAndStop(2);

    } 
```

# entity-framework - EF Code First migrations - how to add seed to my migration?

> ID：15720481
> 
> 赞同：0
> 
> 时间：2013-03-30T15:54:37.313
> 
> 标签：entity-framework, migration

I already have few migrations, and now I am adding another migration, but this time I want to add seed to it. I tried adding this near my Up() and Down() methods:

```
protected override void Seed(ScykDb context)
{
} 
```

But my compiler says I cannot do that. How can I add seed to my migration?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:04:14.613

Seed is not available per migration, only at the `DbContext` level.

You can easily get around it by adding a call to `Sql()` in your `Up()` method:

```
Sql("insert into ponies (col1, col2....."); 
```

# c# - DeleteFile 在 ContextMenu 中抛出 IsolatedStorageFileException

> ID：15720483
> 
> 赞同：0
> 
> 时间：2013-03-30T15:54:58.020
> 
> 标签：c#, windows-phone-7, isolatedstoragefile

在 Silverlight for Windows Phone (XAML / C#) 中编写一个 WP7.1 (Mango) 应用程序。我有一个我不能动摇的例外。我有一个 ListBox 显示一个`ObservableCollection<string>`显示 XML 文件的文件名的`IsolatedStorage`. Listbox 控件还包含`ContextMenu`来自 Windows Phone Toolkit 的一个。我用它从我的 ListBox 和磁盘中删除项目。

和我的`ContextMenu`删除方法正常工作......但是，如果在同一页面上没有导航，我创建一个新文件（我们称之为 File1）然后创建另一个文件（File2），如果我然后尝试删除 File1，该`IsolateStorageFile.DeleteFile`方法抛出一个异常，指出“访问独立存储时发生错误”，内部消息为 null。但是，如果我创建 File1，则创建 File2。然后删除 File2 然后 File1，它工作得很好！啊！

如果我离开页面或再次重新启动应用程序，我可以删除文件没有问题。

我已经剥离了代码，希望让它更容易阅读。

UI Binding Collection 字段在代码后面。

```
 ObservableCollection<string> Subjects; 
```

Click 事件调用 write 方法。

```
 private void Button_Click_AddNewSubject(object sender, RoutedEventArgs e)
    {
        if (TryWriteNewSubject(NewSubjectNameTextBox.Text))
        {
            ... Manipulate UI
        }
    } 
```

将文件添加到 IsoStore 和主题集合的方法。返回用于条件 UI 操作的布尔值。

```
 private bool TryWriteNewSubject(string subjectName)
    {
            ... file name error checking 

                using (var store = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    store.OpenFile(subjectName + ".xml", FileMode.CreateNew);
                    store.Dispose();
                }
                Subjects.Add(subjectName);
                return true;
            }
            else return false;
        }
        else return false;
    } 
```

ContextMenu 点击事件调用删除文件方法

```
 private void ContextMenuButton_Click(object sender, RoutedEventArgs e)
    {
        string subjectName = (sender as MenuItem).DataContext as string;
        DeleteFile(subjectName);
    } 
```

还有我的删除方法

```
 private void DeleteFile(string subjectName)
    {
            using (var store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                string fileName = subjectName + ".xml";
                store.DeleteFile(fileName);
                Subjects.Remove(subjectName);
            }
    } 
```

代码很简单，我只是不知道我错过了什么。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:12:34.997

你`IsolatedStorageFileStream`从[`OpenFile`](http://msdn.microsoft.com/en-us/library/cc190070%28v=vs.95%29.aspx). 您需要在其他操作可以操作它之前处理它。

顺便说一句，using 语句会为您调用 dispose，因此无需在`using`语句末尾调用 dispose。

# ios - 使用新的 NSDate 更新标签

> ID：15720486
> 
> 赞同：1
> 
> 时间：2013-03-30T15:55:10.540
> 
> 标签：ios, uilabel, nsdate, nstimer

我在 NSDate 中有今天的日期，我想在标签中显示这个 NSDate。每次秒数变化时，我都想用新的 NSDate 更改标签文本。我尝试使用 NSTimer，但它与 iPhone 时钟不同步。有什么具体的事情可以直接改变标签吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T16:07:14.107

您可以将属性计时器创建为：

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5f
                                         target:self
                                       selector:@selector(showTime)
                                       userInfo:NULL
                                        repeats:YES]; 
```

然后这个方法将每半秒调用一次。

```
- (void)showTime{
    NSDate *now=[NSDate date];
    NSDateFormatter *dateFormatter=[NSDateFormatter new];
    [dateFormatter setDateFormat:@"HH:mm:ss"];
    timeLabel.text=[dateFormatter stringFromDate:now];
} 
```

# iphone - 由于僵尸对象，使用自定义 UITableViewCell 向下滚动 UITableView 上的应用程序崩溃

> ID：15720488
> 
> 赞同：0
> 
> 时间：2013-03-30T15:55:31.443
> 
> 标签：iphone, ios, objective-c, ios5, automatic-ref-counting

我有这个代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"BSTGListCell";

    BSTGListCell *cell = (BSTGListCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"BSTGListCell" owner:self options:nil] objectAtIndex:0];
    }

    PFObject* currentEl = [self.tableData objectAtIndex:indexPath.row];

    cell.title.text = [currentEl objectForKey:@"Name"];
    cell.description.text = [currentEl objectForKey:@"Address"];
    return cell;
} 
```

向下滚动作为子视图添加的表视图时，我收到“发送到已释放实例的消息”。Zombie inspector 说被访问的对象被保留在这里：

```
cell = [[[NSBundle mainBundle] loadNibNamed:@"BSTGListCell" owner:self options:nil] objectAtIndex:0]; 
```

并且可能由 ARC 发布。为什么会发生这种情况，我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:04:18.397

你真的不应该这样做。从 nib 使用 cell 的方法是注册 nib，可能在 viewDidLoad 中，如下所示：

```
UINib *nib = [UINib nibWithNibName:@"BSTGListCell" bundle:nil];
[self.tableView registerNib:nib forCellReuseIdentifier:@"BSTGListCell"]; 
```

然后在你的 cellForRowAtIndexPath 中，使用 dequeueReusableCellWithIdentifier:forIndexPath: 并且没有 if(cell == nil) 子句。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    BSTGListCell *cell = (BSTGListCell *)[tableView dequeueReusableCellWithIdentifier:@"BSTGListCell" forIndexPath:indexPath];

    PFObject* currentEl = [self.tableData objectAtIndex:indexPath.row];

    cell.title.text = [currentEl objectForKey:@"Name"];
    cell.description.text = [currentEl objectForKey:@"Address"];
    return cell;
} 
```

The actual problem with your code is that loadNibNamed:owner:options, returns an array, and you have to get the one object out of that array before you assign it to cell. But, the way I showed is a more efficient way to do this anyway.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:04:22.087

My problem was something with the `dequeueReusableCell` line, i took it out [like this link did](https://groups.google.com/forum/?fromgroups=#!topic/iphonesdkdevelopment/Ln5qYKT8cl8) and mine works now

# javascript - How to ensure div doesn't close once it is opened unless the page is refreshed?

> ID：15720491
> 
> 赞同：0
> 
> 时间：2013-03-30T15:55:38.263
> 
> 标签：javascript, jquery

I'm building a map with dots. When you click each dot, it opens up a `<div>` with a form related to that dot.

Once you click the dot and the `<div>` opens, when you click a different dot it closes that `<div>` and the new form related to the recently clicked dot opens in `<div>`.

How can I have the `<div>` open once and never close unless the page is refreshed?

[Here is the code](http://pastebin.com/a3Ad4xQB)

```
<script type="text/javascript">

$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".dot").show();

    $('.dot').click(function(){
        $(".slidingDiv").slideToggle("slow");
    });

});

</script>

<script>
jQuery(function(){
         $('#showSingle').click(function(){
               $('.targetDiv').show();
        });
        $('.dot').click(function(){
              $('.targetDiv').hide();
              $('#div'+$(this).attr('target')).show();
        });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:00:46.657

When you first select a dot, the information appears. But when you select a different dot (or even the same one), the information box closes. This is because you are using [`.slideToggle()`](http://api.jquery.com/slideToggle/). You want to use [`slideDown()`](http://api.jquery.com/slideDown/) and `slideUp()`, because `slideToggle` will toggle it show/hidden depending on its current state.

I'm assuming if the user selects the already opened dot, you want to hide the information. The following code takes care of that by using [`hasClass()`](http://api.jquery.com/hasClass/) to determine if the selected dot also has the class of `selected`.

```
$('.dot').click(function(){
   //$(".slidingDiv").slideToggle("slow");
   if ($(this).hasClass("selected") {
       $(".slidingDiv").slideUp('slow');
   }
   else {
       $(".slidingDiv").slideDown('slow');
   }
}); 
```

-Read more about [jQuery effects](http://api.jquery.com/category/effects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:01:01.490

You can specify a separate class for dots that will open a div but will not close a target div, then just use that new class when assigning a click handler:

```
$('.dot2').click(function(){
    $('#div'+$(this).attr('target')).show();
}); 
```

# google-bigquery - Bigquery nested aggregations

> ID：15720494
> 
> 赞同：1
> 
> 时间：2013-03-30T15:56:00.930
> 
> 标签：google-bigquery

How can I filter a nested repeating record when using an aggregation function and WITHIN clause?

For example: I have a scheme where each record represents a person and each person has a nested childrens record. For each child I have name and age.

I can easily count the children for each person by using COUNT(children.name) WITHIN RECORD, but what if I want to count only the children with age>18?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:22:14.240

Try something along these lines:

```
SELECT SUM(cnt) FROM
  (SELECT MAX(IF(children.name > 18, 1, 0) WITHIN RECORD AS cnt FROM table1) 
```

# c# - WPF Styling child control based on parent command enabled

> ID：15720496
> 
> 赞同：0
> 
> 时间：2013-03-30T15:56:16.977
> 
> 标签：c#, wpf, button, styles, label

I just want to make the `Label` inside my `Button` template look disabled. Scoured the Internet and this seems like a simple task, what I'm doing wrong?

```
<Button Command="{Binding CommandProcess}">
    <StackPanel Orientation="Horizontal">
        <Image Source="Images\Cloud-Upload.png"/>

        <Label Content="Upload and Process" Foreground="White" VerticalAlignment="Center" FontWeight="Bold" FontSize="18.667" Margin="5,0,0,0">
            <Label.Style>
                <Style TargetType="Label">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource AncestorType={x:Type Button}}}" Value="False">
                            <Setter Property="Foreground" Value="Gray"></Setter>
                            <Setter Property="ToolTip" Value="Please select a record type for each file selected for processing"></Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Label.Style>
        </Label>
    </StackPanel>
</Button> 
```

`EDIT:` (*full code after using the answer by RV1987*)

```
<Button Command="{Binding CommandProcess}" x:Name="ProcessButton">
    <StackPanel Orientation="Horizontal">
        <Image Source="Images\Cloud-Upload.png"/>

        <Label Content="Upload and Process" VerticalAlignment="Center" FontWeight="Bold" FontSize="18.667" Margin="5,0,0,0">
            <Label.Style>
                <Style TargetType="Label">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=IsEnabled, ElementName=ProcessButton}" Value="True">
                            <Setter Property="Foreground" Value="White"></Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Path=IsEnabled, ElementName=ProcessButton}" Value="False">
                            <Setter Property="Foreground" Value="Gray"></Setter>
                            <Setter Property="ToolTip" Value="Please select a record type for each file selected for processing"></Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Label.Style>
        </Label>
    </StackPanel>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:58:51.657

Use `ElementName` instead. `RelativeSource = FindAncestor` won't work here since button does not lies in Visual Tree but instead its the sibling of StackPanel. Give `name to button` and use it in your binding using `ElementName` -

```
<Button Command="{Binding CommandProcess}" x:Name="MyButton"> 
```

and in DataTrigger -

```
<DataTrigger Binding="{Binding Path=IsEnabled, ElementName=MyButton}"
             Value="False">
   .....
</DataTrigger> 
```

`Visual Tree` structure for Label and Button is like this -

```
Label <--- StackPanel <--- StackPanel's Parent
Button <--- StackPanel's Parent 
```

As it can be seen Button is the sibling of StackPanel and it lies nowehere in the Visual tree of Label that's why `FindAncestor` won't get you to `Button`.

# xml-parsing - testng datprovider 上的空指针异常

> ID：15720504
> 
> 赞同：1
> 
> 时间：2013-03-30T15:56:56.310
> 
> 标签：xml-parsing, jaxb, testng, objectdataprovider

我遇到了一个奇怪的问题。让我解释一下：我从 xml 传递一组输入数据，然后使用 JAXB 解析 xml。然后使用 testng dataprovider 将此 java 对象传递给我的测试方法。以下是一些相关代码：Testdata xml：

```
<TestData>
<TestDetails>
    <testcasename>itemStatusTest</testcasename>
    <testcasedetails>App in SUPPRESSED Status</testcasedetails>
    <appid>28371</appid>
    <status>SUPPRESSED</status>
    <marketplace />
</TestDetails>
<TestDetails>
    <testcasename>itemStatusTest</testcasename>
    <testcasedetails>App in REVIEW Status</testcasedetails>
    <appid>22559</appid>
    <status>REVIEW</status>
    <marketplace />
</TestDetails>
</TestData> 
```

返回对象的方法：

```
private static Object[][] generateTestData(String dataProvider,TestCaseName tcName) throws Exception {

    Object[][] obj = null;
     try {
        JAXBContext jaxbContext = JAXBContext.newInstance(TestData.class);
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        TestData testData = (TestData) jaxbUnmarshaller
                .unmarshal(new FileInputStream(new File(dataProvider)
                        .getAbsoluteFile()));
        List<TestDetails> testcaseList = testData.getTestDetails();
        obj = new Object[testcaseList.size()][];
        for (int i = 0; i < testcaseList.size(); i++) {
            if (testcaseList
                    .get(i)
                    .getTestcasename()
                    .equalsIgnoreCase(tcName.testCaseName()))
                obj[i] = new Object[] { testcaseList.get(i) };
        }

    } catch (JAXBException e) {
        e.getMessage();
        return null;
    }
    return obj;
} 
```

和我的数据提供者：

```
@DataProvider(parallel = true, name = "TestData")
public Object[][] TestData() {
    try {
        Object obj[][]= IngestionTestHelper
                .generateTestDataForItemStatus(dataProvider);
        Reporter.log("Size "+obj.length, true);
        return obj;
    } catch (Exception e) {
        Reporter.log(
                "Either XML input is in wrong format or XML is not parsed correctly",
                true);
        return null;
    }

} 
```

到目前为止，一切都像魅力一样运作，我没有看到任何问题。

现在我正在为另一个测试用例编写另一个测试方法。为此，我在现有的 xml 中添加了以下内容，如下所示：

```
<TestDetails>
    <testcasename>itemWorkflowTest</testcasename>
    <testcasedetails>Validate workflow for iap</testcasedetails>
    <appid>26120</appid>
    <status />
    <marketplace />
</TestDetails> 
```

现在，一旦我在现有的 xml 中添加了它，我现有的测试方法就不起作用了。运行时出现以下异常：

```
java.lang.NullPointerException
at org.testng.internal.Invoker.injectParameters(Invoker.java:1333)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1203)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at org.testng.TestRunner.privateRun(TestRunner.java:767)
at org.testng.TestRunner.run(TestRunner.java:617)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1197)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
at org.testng.TestNG.run(TestNG.java:1030)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

如果我在 xml 中删除新添加的块，它就会开始工作。请有人帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:14:45.563

好吧，根据代码，如果我理解正确的话:)

当您添加第三个项目时，名称不同，您已经使用元素总数的大小初始化了 Object 数组，

obj = new Object[testcaseList.size()][];

但是您正在根据名称有选择地添加到数组中，因此尽管已经对 3 个对象进行了初始化，但数据仅对 2 个对象可用 - 这可能会导致 NPE..

```
List<TestDetails> testcaseList = testData.getTestDetails();
        obj = new Object[testcaseList.size()][];
        for (int i = 0; i < testcaseList.size(); i++) {
            if (testcaseList
                    .get(i)
                    .getTestcasename()
                    .equalsIgnoreCase(tcName.testCaseName()))
                obj[i] = new Object[] { testcaseList.get(i) };
        } 
```

# ruby-on-rails - 图像 src 在 Rails 中不起作用

> ID：15720506
> 
> 赞同：0
> 
> 时间：2013-03-30T15:57:09.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的haml文件：

```
%img{:class => 'thumbnail', :src => '/assets/images/filename.jpg'} 
```

它在 html 浏览器中正确输出：

```
<img class="thumbnail" src="/assets/images/filename.jpg"> 
```

但是图像不显示。这就是 Chrome 正在寻找的内容：

```
http://127.0.0.1:3000/assets/images/filename.jpg 
```

但是当我尝试访问该网址时，我会看到：

```
Routing Error
No route matches [GET] "/assets/images/filename.jpg"
Try running rake routes for more information on available routes.shown 
```

我应该在配置文件中添加一些东西吗？任何帮助将不胜感激，谢谢。

PS：我在开发环境中工作，所以我提供自己的静态文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T16:23:29.120

您应该使用`/assets/filename.jpg`没有`images`命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:34:40.157

你应该可以`= image_tag('filename.jpg', class: 'thumbnail')`在你的haml文件中做。

此外，您可以在添加路径之前检查是否有任何图像，只需转到浏览器并查看是否出现任何内容，例如：

```
http://127.0.0.1:3000/assets/images/filename.jpg

http://127.0.0.1:3000/assets/filename.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:08:59.550

我解决了我的问题。因为我使用的是 Rails 3.2 而这个版本使用了资产管道，所以你必须声明你想要公开的目录。您可以通过在 config/application.rb 文件中添加这一行来做到这一点：

```
config.assets.paths << Rails.root.join("path", "to", "dir", "from", "root") 
```

就我而言，我希望 medias/images/thumbnails 目录成为资产的一部分（媒体位于根级别），所以我只需添加：

```
config.assets.paths << Rails.root.join("medias", "images", "thumbnails") 
```

然后我可以在模板中访问它们，就像使用 src="/assets/filename.jpg" 的其他资产一样。这很实用，因为在我的情况下，我只想公开缩略图，而不是原始图片。

# visual-studio - Keeping just one db connection string for EntityFramework

> ID：15720511
> 
> 赞同：0
> 
> 时间：2013-03-30T15:57:16.350
> 
> 标签：visual-studio, entity-framework

I have a large number of tables in my database and I want to create multiple Entity Data Models. I want them all to reference the same connection string in either my web.config or app.config.

right now, when I go through the wizard in vs2012 to create each model, it seems to create a new configuration entry in my app.config with it's own credentails. Maybe somehow I'm not picking the right options?

What is a clean way to do this so I just have one connection string that is used for all my Entity Data Models?![enter image description here](../Images/d6e8d9e253194d19b629a8adf8956aac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:52:07.807

When you are developing using visual studio each model needs it's own connection string.

But your code does not need to use these connection strings. There is a constructor for the Context that allows you to send in a connection string. If you use this, you could have a single connection string in your app settings, which is used for all Contexts (models).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:57:37.370

Unfortunately each Entity data model (EDMX file) must have its own connection string because the connection string references XML files created from that model (that are those csdl, ssdl and msl things referenced in the connection string). If you want to have just one DB connection string you will have to build entity connection strings in your application.

# parsing - 使用本地路径解析 TXT 文件以将其复制到文件夹

> ID：15720527
> 
> 赞同：-1
> 
> 时间：2013-03-30T15:58:36.493
> 
> 标签：parsing, batch-file, copy, notepad

我一直在将“THE MOST AWESOME CAR CD EVER”最喜欢的歌曲复制到 txt 文件中。所有文件都是音乐的确切路径。现在我想解析 txt 并将它找到的内容复制到一个文件夹中......我批量不太流利，所以也许你可以帮助我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:13:43.210

```
@echo off
setlocal
for /f "usebackqdelims=" %%i in ("yourtextfilename.txt") do (
   ECHO XCOPY "%%i" "c:\yourdestfolder\"
) 
```

对于文件名中的每一行，其中文件名用双引号 ( )依次`usebackq`分配文件的每一行，并将该文件分配给`%%i``XCOPY``c:\yourdestfolder\`

**PROPOSED** XCOPY将回显到屏幕上。这是故意让您确保这是您想要做的。要**执行**，`XCOPY`只需删除`ECHO`它之前的关键字。如果“已复制 1 个文件”响应激怒了您，如果您想禁止该消息，请在`>nul` 后面添加。`"c:\yourdestfolder\"`

如果 "c:\yourdestfolder\" 尚不存在，它将由 XCOPY 创建。如果 "c:\yourdestfolder\" 中已有同名文件，XCOPY 将询问您是否要覆盖现有文件 - 这就是您可能*不想*隐藏消息的原因。

# javascript - Retrieving values from Execution Contexts in JavaScript

> ID：15720528
> 
> 赞同：0
> 
> 时间：2013-03-30T15:58:39.927
> 
> 标签：javascript, scope

```
var value = 10;

var outer_funct = function(){
    var value = 20;

    var inner_funct = function(){
        var value = 30;

        console.log(value); // logs 30
        console.log(window["outer_funct"]["value"]); // What I would like to log here is the value 20.
        console.log(window["value"]); // logs 10
    };

    inner_funct();
};

outer_funct(); 
```

I believe the reason the second log is returning undefined is because window["outer_funct"] refers to the function object, and the function object doesn't have a property "value" associated with it. Instead, what I would like to do is refer to the **execution context** when window["outer_funct"] is invoked. Is this possible to do within the execution context of inner_funct?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:06:35.017

> I believe the reason the second log is returning undefined is because window["outer_funct"] refers to the function object, and the function object doesn't have a property "value" associated with it.

Correct.

> Instead, what I would like to do is refer to the execution context when window["outer_funct"] is invoked. Is this possible to do within the execution context of inner_funct?

No, not with you having shadowed `value` (declared it in `inner_funct`). You have no way of getting to it with that symbol having been overridden like that. You could, of course, grab it into another symbol:

```
var value = 10;

var outer_funct = function(){
    var value = 20;

    var outer_value = value;

    var inner_funct = function(){
        var value = 30;

        console.log(value);        // logs 30
        console.log(outer_value);  // logs 20
        console.log(window.value); // logs 10
    };

    inner_funct();
};

outer_funct(); 
```

如果你*没有*隐藏它，那么你可以`value`在包含的上下文中引用它，例如：

```
var value1 = 10;

var outer_funct = function(){
    var value2 = 20;

    var inner_funct = function(){
        var value3 = 30;

        console.log(value3); // logs 30
        console.log(value2); // logs 20
        console.log(value1); // logs 10
    };

    inner_funct();
};

outer_funct(); 
```

值得注意的是，`window["value"]`返回原始代码的唯一原因`10`（顺便说一句，您也可以使用`window.value`）是`var value = 10;`在全局范围内。声明的所有变量都`var`成为全局对象的属性，在浏览器上通过引用它`window`（从技术上讲，`window`它本身只是全局对象上指向全局对象的属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:06:40.953

由于您提到的原因，您不能完全引用`value`使用。`window["outer_funct"]`你可以做的是这样的：

```
var value = 10;

var outer_funct = function(){
    var context = {// you can put multiple values in here
        value: 20;
    }

    var inner_funct = function(){
        var value = 30;

        console.log(value); // logs 30
        console.log(context.value); //logs 20
        console.log(window["value"]); // logs 10
    };

    inner_funct();
};

outer_funct(); 
```

Another way you can do it is if you haven't shadowed `value` inside `inner_funct`. If you don't have a variable named the same thing, you can log it and it will return `20`. But since you created another variable named `value` inside `inner_funct`, that will shadow the value of `value` in `outer_funct`.

I would also question why you would need to have three variables named exactly the same, across three scopes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:04:09.567

`var value = 30;` is a local variable in function `outer_funct`, it could not be accessed from outside of this function.

in your code, although `winodw["outer_funct"]["value"]` is written inside `inner_funct` but it acts as trying to access a local variable from out of `outer_funct` because by `window['outer_funct'] you are staying at the top level.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T16:06:57.570

No, it is absolutely impossible to access non-global shadowed variables in JavaScript.

You cannot get the execution context of a function as well, it is an implementation-dependent internal value ([specification type](http://es5.github.com/#x8)) - you are correct, your code was looking for properties on the function object.

Variables in the global scope could be accessed as properties of the global object (`window` in browser), but if you are shadowing a local variable your only choice is to rename your own variable that casts the shadow.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T16:09:21.367

Local variables are intended to be non-accessible, also because they can depend on the function execution (how could you access that variable if the function has never been executed?).

If you really need some trick, you can have a look at this:

```
var person = function () {
    // Private
    var name = "Robert";
    return {
        getName : function () {
            return name;
        },
        setName : function (newName) {
            name = newName;
        }
    };
}();
alert(person.name); // Undefined
alert(person.getName()); // "Robert"
person.setName("Robert Nyman");
alert(person.getName()); // "Robert Nyman" 
```

and notice that the function must be executed before you can use accessible methods.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T16:11:49.837

Variables don't become properties of the functions under which you define them. Excluding the `window` object (in the case where they are globally declared) there's no object off of which you can access a locally-defined variable. There are workarounds as suggested by the other answers, but they are still a testament to JavaScript's inability to perform such a task in the actual circumstance that you've shown us.

# php - 本地 apache 服务器上的奇怪 memcache 行为

> ID：15720531
> 
> 赞同：2
> 
> 时间：2013-03-30T15:58:51.903
> 
> 标签：php, ubuntu, memcached

我目前在本地部署我的 Web 服务 api 时遇到问题。我正在使用带有 PHP Memcache 扩展的 memcached。这是以下行为；

我有一个登录功能，首先使用以下代码检查用户信息是否在内存中；

```
$cache = Memcacher::get_instance()->load( 'user.' . $email); 
```

*   如果缓存存在，那么它将返回变量`$cache`为`true`.
*   如果缓存不存在，那么我将使用以下代码将其保存到内存中；

    `$cache = Memcacher::get_instance()->save( 'user.' . $login['value']['email'], $login);`

该参数`$login`是一个包含用户信息的关联数组。

将其保存到内存后，我尝试重新登录。但是，在我保存到 memcached 服务器 3-4 次之前，它不保存信息。

3-4登录后，我成功从缓存中获取登录信息。

谁能解释我这种奇怪的行为？是否有任何 memcached 配置变量来防止这种情况？

注意：我`sudo service memcached restart` 在 Ubuntu 上通过重新启动 memcached 来刷新内存

注意：Memcacher 是一个使用 PHP Memcache 扩展`set()`和`get()`功能的自定义模块

[注意：这是Memcacher](https://github.com/arascanakin/ariba/blob/master/library/memcache.class.php)的源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:36:20.513

您正在将数组与字符串连接起来。在某些情况下，$login 可能不是一个数组，因此您将开始接收您拥有的信息，因为串联将起作用。但是如果是数组，就无法将key保存在memcache中。你会收到一个通知，我猜你忽略了。

# css-frameworks - 如何安装和使用 Groundwork CSS

> ID：15720535
> 
> 赞同：0
> 
> 时间：2013-03-30T15:59:35.927
> 
> 标签：css-frameworks

我一直在寻找一些 CSS 框架，我真的很喜欢[Groundwork CSS](http://groundwork.sidereel.com/)框架的外观，因为它有一个很好的响应式布局。但是我下载了源代码，我有点迷路了。我习惯使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)并且我真的很喜欢它的文档（关于脚手架的说明对初学者很有帮助），我真的不知道如何使用 Groundwork。

如何开始使用 Groundwork CSS 框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:46:27.463

Groundwork 和 Bootstrap 一样，是一个 Web 开发框架，而不仅仅是一组 CSS 文档。它们都包括一组样式表、java 脚本文件、杂项图标等，以及一个或多个 HTML 文档，将它们组合在一起。安装很简单；下载框架，将文件夹重命名为“MyCoolNewSite”，开始编辑。

正如 Michal 所说，框架附带的“index/html”文档有很多内容可以帮助您入门。他们的网站上也有看起来非常可靠的文档，从这里开始： [http ://groundwork.sidereel.com/?url=grid](http://groundwork.sidereel.com/?url=grid)

该站点现在已更改为： http: [//groundworkcss.github.io/](http://groundworkcss.github.io/)

# php - 在 PHP 中获取一个空条目进行查询

> ID：15720538
> 
> 赞同：0
> 
> 时间：2013-03-30T16:00:03.910
> 
> 标签：php, mysql, sql

所以我希望能够从 MySQL 中获取信息。在我的 PHP 代码中，我以这种方式调用查询并回显信息：

```
$sql = "SELECT * FROM `person`";
$rs = $COMMON->executeQuery($sql, $_SERVER["SCRIPT_NAME"]);

while($row = mysql_fetch_row($rs)){
    echo ("Name: ".$row['name']."<br />";
    echo ("Gender: ".$row['gender']."<br />";
    echo ("Age: ".$row['age']."<br />";
}; 
```

但是，实际值`$row['name']`和其余部分是完全空白的。连一个空格都没有。虽然，当我像这样通过实际列索引调用它时`$row[1]`，它给了我正确的值。

因此，例如，假设这有三个人在桌子上。最终结果页面如下所示：

```
Name: 
Gender: 
Age: 
Name: 
Gender: 
Age:
Name: 
Gender: 
Age: 
```

我做错了什么吗？为什么它给我这个空字符串而不是查询值？

MySQL 数据库保存在 MyPHPAdmin 上。我不知道它是否有所作为。如果还有您认为必要的信息缺失，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T16:00:56.943

You need to be using [`mysql_fetch_assoc()`](http://us3.php.net/manual/en/function.mysql-fetch-assoc.php) instead of `mysql_fetch_row()`. `mysql_fetch_assoc()` returns an associative array of your results. `mysql_fetch_row()` returns a numerical array.

[Please, don't use `mysql_*` functions in new code](https://stackoverflow.com/questions/12859942). They are no longer maintained [and are officially deprecated](https://wiki.php.net/rfc/mysql_deprecation). See the [red box](http://uk.php.net/manual/en/function.mysql-connect.php)? Learn about [*prepared statements*](https://en.wikipedia.org/wiki/Prepared_statement) instead, and use [PDO](http://php.net/pdo) or [MySQLi](http://php.net/mysqli) - [this article](http://php.net/manual/en/mysqlinfo.api.choosing.php) will help you decide which. If you choose PDO, [here is a good tutorial](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:20:17.000

Change your code to:-

```
$sql = "SELECT * FROM `person`";
$rs = $COMMON->executeQuery($sql, $_SERVER["SCRIPT_NAME"]);

while($row = mysql_fetch_assoc($rs)){
echo ("Name: ".$row['name']."<br />";
echo ("Gender: ".$row['gender']."<br />";
echo ("Age: ".$row['age']."<br />";
}; 
```

mysql_fetch_assoc(), as the name implies it will return an associative array (with the column names as keys and the values as the row values).

# c++ - c++没有匹配函数从派生类调用基类方法

> ID：15720539
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:00:13.873
> 
> 标签：c++, derived-class, base-class, member-function-pointers

我有点困惑，因为 gcc 删除了一条消息错误

```
error: no matching function for call to ...
note: candidates are ... 
```

所以我似乎做了一个错误的函数调用。这是我从 gcc 真正得到的：

```
src/Services/UserService/UserService.cpp:17: error: no matching function for call to ‘Services::UserService::UserService::registerMethod(const char [6], Services::UserService::Request::LoginRequest* (Services::UserService::UserService::*)(std::map<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param> > >&))’
src/Services/UserService/../../Lib/Service/Service.hpp:47: note: candidates are: void Lib::service::Service::registerMethod(std::string, Lib::request::Request* (Lib::service::Service::*)(std::map<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param> > >&)) 
```

我有一个由**Services::UserService::UserService**派生的基类**Lib::service::Service**。我做了另一个由**Services::UserService::Request::LoginRequest**派生的基类**Lib::request::Request**

 ******基类 Lib::service::Service 实现了一个名为“registerMethod”的方法，该方法接受一个字符串和一个函数指针。

```
typedef Lib::request::Request* (Lib::service::Service::*FuncPtr)(map<string, Param>&);

...

void registerMethod(string MethodName, FuncPtr Func); 
```

所以，格式化 gcc 输出有点给了我这个：

要求的是：

```
Services::UserService::UserService::registerMethod(
    const char [6], 

    Services::UserService::Request::LoginRequest* (
        Services::UserService::UserService::*
    )(
        std::map<
            std::basic_string<char, std::char_traits<char>, std::allocator<char> >, 
            Lib::request::Param, 
            std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, 
            std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param> > 
        >&
    )
) 
```

gcc 说，一个（也是唯一一个 - 也是我想要使用的那个）候选人是：

```
void 
Lib::service::Service::registerMethod(
    std::string, 

    Lib::request::Request* (
        Lib::service::Service::*
    )(
        std::map<
            std::basic_string<char, std::char_traits<char>, std::allocator<char> >, 
            Lib::request::Param, 
            std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, 
            std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, Lib::request::Param> > 
        >&
    )
) 
```

因此，由于 Services::UserService::UserService 派生自 Lib::service::Service 和 Serices::UserService::Request::LoginRequest 派生自 Lib::request::Request 我认为这是我定义的函数来匹配基类，因此也可以将它们与派生类一起使用。

我在这里错在哪里？如果这有帮助，这里有更多代码；-)

**到目前为止感谢！**

最好的祝福，

塞巴斯蒂安

* * *

```
namespace Lib {
    namespace service {
        class Service;
    }
}

namespace Lib {
    namespace request {

        class Request {
        public:
            Request(Lib::service::Service *Owner);
            virtual ~Request();

            virtual void Execute() = 0;

            void join(Lib::Session::Session *session);

        protected:
            Lib::service::Service *module;
            Lib::Session::Session *session;
            map<string, Param> params;

        private:
        };
    }
}

typedef Lib::request::Request* (Lib::service::Service::*FuncPtr)(map<string, Param>&);

namespace Lib {
    namespace service {

        class Service {
        public:
            const string Name;

            Service();
            virtual ~Service();

            Request* Call(string MethodName, map<string, Param> &Params);

        protected:
            void registerMethod(string MethodName, FuncPtr Func);

        private:
            map<string, FuncPtr> methods;
        };
    }
} 
```

-

```
namespace Lib
{
    namespace service
    {

        Service::Service()
        {
        }

        Service::~Service()
        {
        }

        void Service::registerMethod(string MethodName, FuncPtr Func)
        {
            this->methods.insert(pair<string, FuncPtr>(MethodName, Func));
        }

        Request* Service::Call(string MethodName, map<string, Param> &Params)
        {
            FuncPtr Func;

            Func = this->methods[MethodName];
            Request *req = (*this.*Func)( Params );

            return req;
        }
    }
} 
```

-

```
namespace Services {
    namespace UserService {

        class UserService : public Lib::service::Service {
        public:
            const string Name;

            UserService();
            virtual ~UserService();

            LoginRequest* Login(map<string, Param> &params);
            LogoutRequest* Logout(map<string, Param> &params);
        private:

        };
    }
} 
```

-

```
namespace Services
{
    namespace UserService
    {

        UserService::UserService() : Name("UserModule")
        {
            this->registerMethod("Login", &UserService::Login);
            this->registerMethod("Logout", &UserService::Logout);
        }

        UserService::~UserService()
        {
        }

        LoginRequest* UserService::Login(map<string, Param> &params)
        {
            LoginRequest *request = new LoginRequest(this);

            //...

            return request;
        }

        LogoutRequest* UserService::Logout(map<string, Param> &params)
        {
            LogoutRequest *request = new LogoutRequest(this);

            //...

            return request;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:02:35.650

似乎您忘记`void`在方法的声明主体中添加一个。您有以下代码，在类中声明方法：

```
void registerMethod(string MethodName, FuncPtr Func); 
```

然后你必须`void`声明身体。

```
void Services::UserService::UserService::registerMethod( ...
^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:18:37.357

所以我终于自己解决了，感谢每一位贡献者。不，感谢那些没有阅读我的 Q 并认为他们必须判断我的努力的人。

但是，如果其他人遇到这种情况：

It was quite as I wrote in my initial post, the call was wrong. To work, there is a need to do a reinterpret_cast to the target function pointer. This works for the derived classes.

```
this->registerMethod("Login", reinterpret_cast<FuncPtr>(&UserService::Login)); 
```******

# django - ubuntu rabbitmq - 错误：无法连接到节点'rabbit@somename：nodedown

> ID：15720540
> 
> 赞同：10
> 
> 时间：2013-03-30T16:00:15.550
> 
> 标签：django, rabbitmq

我将芹菜用于需要rabbitmq的django。大约 4 或 5 个月前，它曾经运作良好。我再次尝试将它用于一个新项目，并在列出队列时遇到了 rabbitmq 的错误。

```
Listing queues ...
Error: unable to connect to node 'rabbit@somename': nodedown
diagnostics:
- nodes and their ports on 'somename': [{rabbitmqctl23014,44910}]
- current node: 'rabbitmqctl23014@somename'
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: XfMxei3DuB8GOZUm1vdUsg== 
```

解决方案是什么？如果没有好的解决方案，我可以卸载并重新安装 rabbitmq 吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-18T18:44:32.577

我显然已经将rabbit作为服务安装了，并且

```
sudo rabbitmqctl force_reset 
```

命令不起作用。

```
sudo service rabbitmq-server restart 
```

做了我需要的。

PS 我确定我是执行上一个命令的 root 用户

```
sudo su 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-25T03:24:57.587

如果您需要更改主机名：

```
sudo aptitude remove rabbitmq-server
sudo rm -fr /var/lib/rabbitmq/ 
```

设置新主机名：

```
hostname newhost 
```

在文件 /etc/hostname 中设置新值主机名

添加到文件 /etc/hosts

```
127.0.0.1 newhost 
```

安装rabbitmq：

```
sudo aptitude install rabbitmq-server 
```

完毕

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T12:59:07.350

使用以下命令检查服务器是否正在运行：

`sudo service rabbitmq-server status`

如果它说

> 所有运行节点的状态...
> 
> 具有 Pid 26995 的节点“rabbit@ubuntu”：
> 
> 运行完成。

它正在运行。

就我而言，我不小心用不同的用户运行了 rabbitmqctl 命令并得到了你提到的错误。

你可能已经用root安装了它，尝试运行

`sudo rabbitmqctl stop_app`

看看反应是什么。

（如果一切正常，请 `sudo rabbitmqctl start_app` 稍后运行）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-30T17:37:46.637

*   仔细检查您的 cookie 哈希文件是否相同
*   仔细检查您的机器名称 (uname) 是否与您的配置中所述的名称相同 - 这可能很棘手
*   并仔细检查您是否使用与安装它的用户相同的用户启动 rabbitmq。仅仅使用“sudo”是不行的。

# c - Measure execution time in C (on Windows)

> ID：15720542
> 
> 赞同：5
> 
> 时间：2013-03-30T16:00:37.953
> 
> 标签：c, windows, execution-time

Is there a better function or way to measure time than `clock()` function on Windows? I have a short operation and when I try `clock()` or `gettickcount()` it says it took 0.0 seconds. I need a way to measure it by miliseconds or nanoseconds.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T16:10:20.263

You can use `QueryPerformanceCounter` and `QueryPerformanceFrequency` :

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main(void)
{
    LARGE_INTEGER frequency;
    LARGE_INTEGER start;
    LARGE_INTEGER end;
    double interval;

    QueryPerformanceFrequency(&frequency);
    QueryPerformanceCounter(&start);

    // code to be measured

    QueryPerformanceCounter(&end);
    interval = (double) (end.QuadPart - start.QuadPart) / frequency.QuadPart;

    printf("%f\n", interval);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:10:08.243

You can use [QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx) combined with [QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx) to get nanosecond precision.

# r - 使用 stat_summary 用观察数注释图

> ID：15720545
> 
> 赞同：15
> 
> 时间：2013-03-30T16:00:48.067
> 
> 标签：r, graph, plot, ggplot2

如何使用变量在哪里`stat_summary`标记图？这是所需输出的示例：`n = x``x`

![在此处输入图像描述](../Images/bcd683766fb10712c989da2be5dd7df4.png)

我可以用这个相当低效的代码制作上面的情节：

```
nlabels <- sapply(1:length(unique(mtcars$cyl)), function(i) as.vector(t(as.data.frame(table(mtcars$cyl))[,2][[i]])))
ggplot(mtcars, aes(factor(cyl), mpg, label=rownames(mtcars))) +
  geom_boxplot(fill = "grey80", colour = "#3366FF") + 
  geom_text(aes(x = 1, y = median(mtcars$mpg[mtcars$cyl==sort(unique(mtcars$cyl))[1]]), label = paste0("n = ",nlabels[[1]]) )) +
  geom_text(aes(x = 2, y = median(mtcars$mpg[mtcars$cyl==sort(unique(mtcars$cyl))[2]]), label = paste0("n = ",nlabels[[2]]) )) +
  geom_text(aes(x = 3, y = median(mtcars$mpg[mtcars$cyl==sort(unique(mtcars$cyl))[3]]), label = paste0("n = ",nlabels[[3]]) )) 
```

这是对这个问题的跟进：[如何在 ggplot2 boxplot 中为每组添加多个观察值并使用组均值？](https://stackoverflow.com/q/15660829/1036500)我可以用它`stat_summary`来计算和显示观察的数量，但我无法找到一种方法来包含`n =`在`stat_summary`输出中。似乎`stat_summary`可能是进行此类标记的最有效方法，但欢迎使用其他方法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-30T16:23:55.687

您可以制作自己的函数以在`stat_summary()`. 这里`n_fun`计算 y 值的位置`median()`，然后将其添加`label=`到观察值的组成`n=`和数量。重要的是使用`data.frame()`而不是`c()`因为`paste0()`会产生字符但`y`值是数字，但`c()`会产生两个字符。然后在`stat_summary()`使用这个功能和`geom="text"`。这将确保每个 x 值的位置和标签仅来自该级别的数据。

```
n_fun <- function(x){
  return(data.frame(y = median(x), label = paste0("n = ",length(x))))
}

ggplot(mtcars, aes(factor(cyl), mpg, label=rownames(mtcars))) +
  geom_boxplot(fill = "grey80", colour = "#3366FF") + 
  stat_summary(fun.data = n_fun, geom = "text") 
```

![在此处输入图像描述](../Images/497ac3c224a628988df1f39652142e94.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T16:36:53.743

大多数东西`R`都是矢量化的，所以你可以利用它。

```
nlabels <- table(mtcars$cyl)

#  To create the median labels, you can use by
meds <- c(by(mtcars$mpg, mtcars$cyl, median))

ggplot(mtcars, aes(factor(cyl), mpg, label=rownames(mtcars))) +
   geom_boxplot(fill = "grey80", colour = "#3366FF") + 
   geom_text(data = data.frame(), aes(x = names(meds) , y = meds, 
            label = paste("n =", nlabels))) 
```

![箱形图](../Images/e864f885c7517996fcb7c449fd45b7ea.png)

* * *

### 关于`nlables`：

而不是你的`sapply`陈述，你可以简单地使用：

```
nlabels <- table(mtcars$cyl) 
```

请注意，您当前的代码正在使用上述内容，对其进行转换、转置，然后遍历每一行以逐个获取值，然后将它们重新组合成一个向量。

如果您真的希望它们作为无量纲整数向量，请使用`c()`

```
nlabels <- c(table(mtcars$cyl)) 
```

但当然，即使这样也不需要完成上述操作。

# ruby-on-rails - Multiple Projects in a single Rails Application for Heroku

> ID：15720546
> 
> 赞同：1
> 
> 时间：2013-03-30T16:00:51.007
> 
> 标签：ruby-on-rails, deployment, heroku, web-deployment-project

I am working on an Application with Rails 3 and MongoDb which will be deployed on Heroku. The application will fetch data from several APIs on the web and then perform analytics to generate meaningful insights.

However I want to have several sub-projects in this application. For example :

Project 'P1' which performs analytics for a Company C1 and with a look and feel customized (for now different text will do with same styling) for the company. This project should be accessible on p1.domain.com

Project 'P2' which performs analytics for a Company C2 and with a look and feel (for now just different text with same styling) customized for the company. This project should be accessible on p2.domain.com

Is this possible with Heroku? How should I go about it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:41:41.783

Andrzej is probably right. Make it one application with routes to subdomains. Check out Ryan Bates Railscast on this topic [http://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3).

Heroku allows subdomains as well, check out [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains). This is also answered by @jpwynn @ [https://stackoverflow.com/a/4872039/1792207](https://stackoverflow.com/a/4872039/1792207).

T.

# linux - 如何在搜索（查找）结果中列出所有目录中的文件？

> ID：15720551
> 
> 赞同：1
> 
> 时间：2013-03-30T16:01:16.003
> 
> 标签：linux, terminal

我有一个搜索结果的目录列表：

> $查找。-name 目录
> ./dir1
> ./dir1/dir1.1
> ./dir2

我怎样才能同时**ls**所有这些目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:03:41.060

使用 -R 标志。

```
user@box:~$ ls -R 
```

[您可以在此处](https://en.wikipedia.org/wiki/Ls#Behavior)查看所有其他标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:09:07.183

将您的命令输入`xargs ls`：

```
find . -name dir | xargs ls 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:24:20.543

您可以使用这些命令来执行此操作：

1)`find . -name "dir*" -exec ls {} \;`

2)`find . -name "dir*" | xargs ls`

# magento - 如何在 page.xml 中加载 topSearch？

> ID：15720552
> 
> 赞同：1
> 
> 时间：2013-03-30T16:01:42.893
> 
> 标签：magento

我是 Magento CE 的新手，我正在努力学习设计一个新主题。我已经开始研究默认的设计包。有一件事我无法理解：

这是 page.xml 中的标题部分：

```
<block type="page/html_header" name="header" as="header">
                <block type="page/template_links" name="top.links" as="topLinks"/>
                <block type="page/switch" name="store_language" as="store_language" template="page/switch/languages.phtml"/>
                <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
                    <label>Navigation Bar</label>
                    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml"/>
                </block>
                <block type="page/html_wrapper" name="top.container" as="topContainer" translate="label">
                    <label>Page Header</label>
                    <action method="setElementClass"><value>top-container</value></action>
                </block>
            </block> 
```

这是header.phtml：

```
<div class="header-container">
    <div class="header">
        <?php if ($this->getIsHomePage()):?>
        <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
        <?php else:?>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
        <?php endif?>
        <div class="quick-access">
            <?php echo $this->getChildHtml('topSearch') ?>
            <p class="welcome-msg"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p>
            <?php echo $this->getChildHtml('topLinks') ?>
            <?php echo $this->getChildHtml('store_language') ?>
        </div>
        <?php echo $this->getChildHtml('topContainer'); ?>
    </div>
</div>
<?php echo $this->getChildHtml('topMenu') ?> 
```

我无法理解为什么要加载 topSearch 块，即使它没有在 page.xml 的标头中声明为标头的子项。

谁能解释一下？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:07:13.127

在主题的 layout/catalogsearch.xml 中，您将看到这个：

```
<reference name="header">
     <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml"/>
</reference> 
```

The Catalogsearch is an own module in Magento's core. When digging deeper into magento and developing own modules/overriding core modules, you will notice that this is the normal way to add "dependent" things to the layout. When you disable the catalogsearch module, topSearch will not be added to the header anymore automatically.

Imagine if you would disable it, and the XML would still call for the block - the more modules you have, the more a mess it would be, as you would have to check all existing layout files every time you disable a module if it is somewhere in there.

**==UPDATE==**
Regarding your comment:
Magento as a whole mainly consists of modules in the three namespaces found in `app/code/`, namely `core`, `community` and `local`. While `community` and `local` are for extensions (in magento-language just another word for modules) installed via Magento Connect or built by yourself, the `core`-namespace contains the magento codebase. All of the modules make up a normal magento installation, but they are still "modules". They can be disabled individually, changed, overridden and so on.

If you want a list of modules installed in your store, I recommend this extension: [https://github.com/firegento/firegento-debug/](https://github.com/firegento/firegento-debug/)

If you want to know more about the magento structure, you should read Alan Storm's series at magentocommerce.com: [http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento), as well as everything else written by him ;)

There is also a list of all classes and functions used in magento-core: [http://docs.magentocommerce.com/](http://docs.magentocommerce.com/)

# java - @SuppressWarnings for the invocation of the varargs with un-cast null

> ID：15720554
> 
> 赞同：2
> 
> 时间：2013-03-30T16:02:27.607
> 
> 标签：java, junit4, variadic-functions, suppress-warnings

What string should I use in `@SuppressWarnings("....")` to remove the warning I get in this unit test of a method with varargs:

```
/**
 * Calling {@link #readFiles(String, String...)} with just one arg and a null
 * works, but you have to do a null check on the varargs in case it is null.
 */
@Test
public void callMethodWithOneArgAndNull() {
   readFiles("C:/Temp", null);
} 
```

Eclipse gives the following warning for this:

> The argument of type null should explicitly be cast to String[] for the invocation of the varargs method readFiles(String, String...) from type TestVarArgs. It could alternatively be cast to String for a varargs invocation

This is good; it is expected. I am also unit testing what happens when I cast the null.

But for the purposes of this single test, I want to suppress that specific warning, i.e. I don't want to use `@SuppressWarnings("all")`. I have tried every string mentioned in [this answer](https://stackoverflow.com/a/1206052/257233) to [What is the list of valid @SuppressWarnings warning names in Java?](https://stackoverflow.com/questions/1205995/what-is-the-list-of-valid-suppresswarnings-warning-names-in-java) and none of them seem to catch this warning.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:02:12.720

To my understanding, this is not a warning you can suppress with a specific annotation. You have to make an explicit cast to make the warning go away - or suppress all warnings.

Also, consider testing both possible casts, i.e. `(String[]) {null}` and `(String) null`, to make sure your method doesn't choke on "no files" nor on a "null filename" input.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-09T04:44:17.270

You can use @supresswarnings (unchecked) annotation.

# android - 本地网络中的设备发现

> ID：15720558
> 
> 赞同：8
> 
> 时间：2013-03-30T16:03:10.730
> 
> 标签：android, networking, discovery

我目前正在使用 SDK >= 16 开发一个 android 应用程序，它应该能够使用 WiFi 无线电在局域网中发现不同的 android 设备（后来也是 iOS 设备）。

我的第一个猜测是使用多播，结果证明它在我的三星 Galaxy S2 上不起作用：只有在从同一设备发送数据包时才会收到数据包。

我的第二个猜测是使用有限的 IP 地址范围主动扫描网络并等待正确的响应。不幸的是，这意味着网络使用 DHCP 来寻址 IP 地址。

以上解决方案似乎都不是完美的解决方案。

我目前的第一个猜测的解决方案：

```
public class MulticastReceiver extends AsyncTask<Activity, Integer, String> {

    private static final String host = "224.1.1.1";
    private static final int port = 5007;
    private static final String TAG = "MulticastReceiver";

    protected String doInBackground(Activity... activities) {
        WifiManager wm = (WifiManager)activities[0].getSystemService(Context.WIFI_SERVICE);
        WifiManager.MulticastLock multicastLock = wm.createMulticastLock("mydebuginfo");
        multicastLock.acquire();
        String message = "Nothing";

        if (multicastLock.isHeld()) {
            Log.i(TAG, "held multicast lock");
        }

        try {
            InetAddress addr = InetAddress.getByName(host);
            MulticastSocket socket = new MulticastSocket(port);
            socket.setTimeToLive(4);
            socket.setReuseAddress(true);
            socket.joinGroup(addr);

            byte[] buf = new byte[5];
            DatagramPacket recv = new DatagramPacket(buf, buf.length, addr, port);
            socket.receive(recv);
            message = new String(recv.getData());
            socket.leaveGroup(addr);
            socket.close();
        } catch (Exception e) {
            message = "ERROR " + e.toString();
        }

        multicastLock.release();

        return message;
    }
} 
```

此代码导致阻塞在线 socket.receive(recv); 如果我指定超时，我会收到超时异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:21:29.017

[在 API 14 之前](https://stackoverflow.com/questions/14007372/android-network-discovery-service-ish-before-api-14/14007960#14007960)检查我在非常相似的问题 Android Network Discovery Service (ish) 中的回答

我不相信多播在 Galaxy S2 上不起作用，前段时间当我编写一些网络应用程序时，我在许多设备上进行了几次测试，有些设备比较老，比如 G1，但也在 S2、S3 和 Galaxy Tab 10 上。

但是为了能够使用多播，您必须以编程方式启用它。

你用过这段代码吗？

```
WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
if(wifi != null){
WifiManager.MulticastLock lock = wifi.createMulticastLock("Log_Tag");
lock.acquire();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:06:27.307

查看[http://developer.android.com/training/connect-devices-wireless/index.html](http://developer.android.com/training/connect-devices-wirelessly/index.html) 它提到了两种查找本地服务的方法 - NSD 和 wifi direct。

# php - 避免在重用的 php 组件上重复执行代码

> ID：15720560
> 
> 赞同：0
> 
> 时间：2013-03-30T16:03:24.543
> 
> 标签：php, javascript, web-applications

我在我的 Web 应用程序的多个页面上使用通用工具栏（使用 php 包含）。

工具栏包含一些登录/注销功能。此外，在加载时，它会检查登录状态并相应地更新其 UI。基本流程是，它首先显示“正在检查登录”标签，然后一旦确定状态（使用 Facebook javascript API），它将标签更新为“登录”或“未登录”。这工作得很好。

当用户导航到另一个页面时，我的问题就出现了，该页面还包括工具栏。工具栏再次通过其加载状态检查，这意味着在每次导航时，它都会将工具栏更新为“检查登录”，直到它完成它的工作。

我该如何避免这种情况？请记住，状态检查部分有用 - 页面导航是重新检查状态的好时机，因为我不想假设用户仍然登录。但我想避免不断更新标签，或者以某种方式对用户隐藏它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:36:49.500

因此，如果我理解正确，您是在使用 Ajax 来查看用户是否已登录？通常，这将由您的 PHP 处理，以便页面到达预先呈现的工具栏上，说明用户是否已登录。

如果您的 javascript 仍然需要知道用户是否登录，您可以将隐藏的 JSON 嵌入到包含任何所需用户和登录信息的页面中。

# ruby-on-rails - 如何通过link_to传递参数？

> ID：15720561
> 
> 赞同：0
> 
> 时间：2013-03-30T16:03:24.850
> 
> 标签：ruby-on-rails

控制器

```
class FeedEntriesController < ApplicationController
  def index
    @search = FeedEntry.search(params[:search])
    @feed_entries = @search.page(params[:page])
    @app_keys = AppKey.all
  end
end 
```

我的 feed_entries/index.html.erb

```
<%= link_to "Stared", {:controller => "feed_entries", :action => "index", :search => ['is_star = ?', true] }%> 
```

feed_entries 表包含`is_star:boolean`属性。所以，我只想将参数 is_star == true 传递给 params[:search]。

但是上面的代码不起作用。请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:08:02.417

尝试

```
<%= link_to "Stared", {:controller => "feed_entries", :action => "index", :is_star => true } %? 
```

然后你应该能够使用在控制器中访问`params[:is_star]`

# html - 页脚未按预期运行

> ID：15720562
> 
> 赞同：3
> 
> 时间：2013-03-30T16:03:36.870
> 
> 标签：html, css

我在我的网页上设置了一个 30px 高度的白色页脚。出于某种原因，当我向下滚动页面时，页脚会比页脚高得多，并且文本部分（带有浅灰色背景的 div）与其重叠。你知道出了什么问题以及如何解决这个问题吗？Jsfiddle 在这里：http: [//jsfiddle.net/Grek/AdX3m/](http://jsfiddle.net/Grek/AdX3m/) 非常感谢

这是一个截图

![在此处输入图像描述](../Images/15fd5bae72371bd6598b06616d82f942.png)

CSS

```
 @charset"UTF-8";
/* CSS Document */
body:before {
    content: "";
    position: fixed;
    top: -10px;
    left: 0;
    width: 100%;
    height: 10px;
    -webkit-box-shadow: 0px 0px 10px rgba(0,0,0,.8);
    -moz-box-shadow: 0px 0px 10px rgba(0,0,0,.8);
    box-shadow: 0px 0px 10px rgba(0,0,0,.8);
    z-index: 100;
}
Html, body {
    padding: 0;
    margin: 0;
    height: 100%;
    font-family: 'Open Sans', sans-serif;
}
#header {
    width: 100%;
    height: 60px;
    border-bottom: 1px dotted #CCC;
    background: #F2F2F2;
}
#logo {
    position: absolute;
    left: 20px;
    top: 35px;
    color: #000;
    font-size: 20px;
}
#header-text {
    width: 400px;
    position: absolute;
    top: 70px;
    left: 20px;
    font-size: 12px;
    font-weight:300;
    color: #FFF;
}
#wrap {
    min-height: 100%;
    height: 100%;
    position: relative;
    background: #0063C3; /* Old browsers */
    background: -moz-linear-gradient(45deg, #0063C3 0%, #2E88C9 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left bottom, right top, color-stop(0%, #0063C3), color-stop(100%, #2E88C9)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(45deg, #0063C3 0%, #2E88C9 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(45deg, #0063C3 0%, #2E88C9 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(45deg, #0063C3 0%, #2E88C9 100%); /* IE10+ */
    background: linear-gradient(45deg, #0063C3 0%, #2E88C9 100%); /* W3C */
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0063C3', endColorstr='#2E88C9', GradientType=1 )
}

#footer {
    position: fixed; /* Force it to stick to the bottom*/
    width: 100%;
    bottom: 0;
    height: 30px;
    background: #fff;
}

/* mainmenu */

#mainmenu {
    width: 100%;
    /* min-height: 180px; */
    padding-bottom: 20px;
    margin-top: -42px; 
    /* padding-top: -42px; */
    overflow: hidden;
}
#mainmenu ul {
    list-style: none;
    margin: 0;
    float: right;
    color: #000;
}
#mainmenu ul li {
    display: inline-block;
    float: left;
    width: 140px;
    line-height: 20px;
}
#mainmenu>ul>li {
    margin-left: 20px;
}
#mainmenu ul li a {
    font-size: 12px;
    display: block;
    text-decoration: none;
}
#mainmenu ul li a, #mainmenu ul ul:hover li a {
    color: #fff;
    -moz-transition-property: all, -moz-transform;
    -moz-transition-duration: .4s, .4s, .4s, .4s;
    -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -ms-transition-property: all, -ms-transform;
    -ms-transition-duration: .4s, .4s, .4s, .4s;
    -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -o-transition-property: all, -o-transform;
    -o-transition-duration: .4s, .4s, .4s, .4s;
    -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -webkit-transition-property: all, -webkit-transform;
    -webkit-transition-duration: .4s, .4s, .4s, .4s;
    -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    transition-property: all, transform;
    transition-duration: .4s, .4s, .4s, .4s;
    transition-timing-function: ease-out, ease-in, linear, ease-in-out;
}
#mainmenu ul ul li a:hover, #mainmenu ul ul li.current-menu-item a {
    color: #005EBC;
    -moz-transition-property: all, -moz-transform;
    -moz-transition-duration: .4s, .4s, .4s, .4s;
    -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -ms-transition-property: all, -ms-transform;
    -ms-transition-duration: .4s, .4s, .4s, .4s;
    -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -o-transition-property: all, -o-transform;
    -o-transition-duration: .4s, .4s, .4s, .4s;
    -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    -webkit-transition-property: all, -webkit-transform;
    -webkit-transition-duration: .4s, .4s, .4s, .4s;
    -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
    transition-property: all, transform;
    transition-duration: .4s, .4s, .4s, .4s;
    transition-timing-function: ease-out, ease-in, linear, ease-in-out;
}
p {
    font-size: 13px;
    color: #fff;
    text-align:justify;
    font-weight:300;
}
h1 {
    font-size: 30px;
    color: #fff;
    /* display: inline-block; */
    }

H5 {
    text-transform: uppercase;
    margin-bottom: 5px;
}

div#content-left {
    float: left;
    width: 35%;
    background: lightblue;
}
div#content-right {
    float: right;
    width: 60%;
    padding-right: 50px;
    background:#ccc;
}
div#content-center {
    overflow: hidden;
} 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Document sans nom</title>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
<link href="normalize.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="prefixfree.min.js"></script>
</head>

<body>
<div id="wrap">
  <div id="header"></div>
  <div id="logo">My Name</div>
  <div id="mainmenu">
    <ul>
      <li>
        <h5>Menu I</h5>
        <ul>
          <li><a title="" href="">Biography</a> </li>
          <li><a title="" href="">Publications</a> </li>
        </ul>
      <li>
        <h5>Menu 2</h5>
        <ul>
          <li><a title="" href="">Demo</a> </li>
          <li><a title="" href="">Features</a> </li>
          <li><a title="" href="">Comparison</a> </li>
        </ul>
      </li>
      <li>
        <h5>Menu 3</h5>
        <ul>
          <li><a title="" href="">Item 1</a> </li>
          <li><a title="" href="">Item 2</a> </li>
          <li><a title="" href="">Item 3</a> </li>
        </ul>
      </li>
      <li>
        <h5>Menu 4</h5>
        <ul>
          <li><a title="" href="">ddfd</a> </li>
          <li><a title="" href="">dsfd</a> </li>
        </ul>
      </li>
    </ul>
  </div>
  <!-- END DIV Main Menu -->

    <div id="header-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut.</div>

    <div id="content-left">column1</div>
    <div id="content-right">
      <h1>Novitates autem si spem</h1>
      <p>Novitates autem si spem adferunt, ut tamquam in herbis non fallacibus
        fructus appareat, non sunt illae quidem repudiandae, vetustas tamen suo
        loco conservanda; maxima est enim vis vetustatis et consuetudinis. Quin
        in ipso equo, cuius modo feci mentionem, si nulla res impediat, nemo est,
        quin eo, quo consuevit, libentius utatur quam intractato et novo. Nec vero
        in hoc quod est animal, sed in iis etiam quae sunt inanima, consuetudo
        valet, cum locis ipsis delectemur, montuosis etiam et silvestribus, in
        quibus diutius commorati sumus.</p>
      <p>Duplexque isdem diebus acciderat malum, quod et Theophilum insontem atrox
        interceperat casus, et Serenianus dignus exsecratione cunctorum, innoxius,
        modo non reclamante publico vigore, discessit.</p>
      <p>Duplexque isdem diebus acciderat malum, quod et Theophilum insontem atrox
        interceperat casus, et Serenianus dignus exsecratione cunctorum, innoxius,
        modo non reclamante publico vigore, discessit.</p>
      <p>Ultima Syriarum est Palaestina per intervalla magna protenta, cultis abundans
        terris et nitidis et civitates habens quasdam egregias, nullam nulli cedentem
        sed sibi vicissim velut ad perpendiculum aemulas: Caesaream, quam ad honorem
        Octaviani principis exaedificavit Herodes, et Eleutheropolim et Neapolim
        itidemque Ascalonem Gazam aevo superiore exstructas.</p>
      <p>Itaque verae amicitiae difficillime reperiuntur in iis qui in honoribus
        reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calamitatum societates! Ad quas non est facile inventu qui descendant.
        Quamquam Ennius recte.</p>
              <p>Itaque verae amicitiae difficillime reperiuntur in iis qui in honoribus
        reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calamitatum societates! Ad quas non est facile inventu qui descendant.
        Quamquam Ennius recte.</p>
              <p>Itaque verae amicitiae difficillime reperiuntur in iis qui in honoribus
        reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calamitatum societates! Ad quas non est facile inventu qui descendant.         reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calami
        Quamquam Ennius recte.</p>
              <p>Ultima Syriarum est Palaestina per intervalla magna protenta, cultis abundans
        terris et nitidis et civitates habens quasdam egregias, nullam nulli cedentem
        sed sibi vicissim velut ad perpendiculum aemulas: Caesaream, quam ad honorem
        Octaviani principis exaedificavit Herodes, et Eleutheropolim et Neapolim
        itidemque Ascalonem Gazam aevo superiore exstructas.</p>
      <p>Itaque verae amicitiae difficillime reperiuntur in iis qui in honoribus
        reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calamitatum societates! Ad quas non est facile inventu qui descendant.
        Quamquam Ennius recte. END END END</p>
    </div>

  <div id="footer">Test Footer</div>
  <!-- END DIV Footer --> 
</div>
<!-- END DIV Wrap -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:15:33.703

从样式页脚中删除

```
position:fixed; 
```

或者如果您希望页脚粘在底部，请更改一些高度值或字体大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:54:19.227

当您向下滚动时，页脚的高度不会改变，它保持不变。问题在于您的元素高度，特别是`#wrap`，它会影响`background-color`您设置的样式......

除了在 中设置背景颜色样式`#wrap`，您可以尝试将它们设置为`body`

```
body { background: #0063C3; ... } 
```

这可能会解决您描述的问题。

# java - 如果在 JTable 中重复，则更新值

> ID：15720568
> 
> 赞同：2
> 
> 时间：2013-03-30T16:04:05.660
> 
> 标签：java, swing, jtable

我在检查`JTable`. 用户输入“产品代码”和“金额”，应用程序正在使用“产品代码”查找项目名称并添加到表值中。我想检查中的重复项`JTable`，但我不知道该怎么做。我希望用户选择例如代码：55 和金额 3，然后添加到`JTable`但如果用户再次输入 55 和金额 5，它​​正在添加另一行，我想要的是更新金额 3 + 5。

这就是我到目前为止所做的。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class StockBasket extends JPanel implements ActionListener {
    private JTable table;
    private Vector rows, columns;
    private DefaultTableModel tabModel;
    private JScrollPane scrollPane;
    private JButton addBtn, deleteBtn;
    private JPanel mainPanel, buttonPanel;
    private String productName;
    private String spinnerAmount;
    private int quantityDbInt;
    private int amountInt;
public StockBasket() {
    rows = new Vector();
    columns = new Vector();
    String[] columnNames = { "Amount to update", "Product name",
            "Total in stock after update" };
    addColumns(columnNames);

    tabModel = new DefaultTableModel();
    tabModel.setDataVector(rows, columns);

    table = new JTable(tabModel);
    table.changeSelection(0, 0, false, false);
    scrollPane = new JScrollPane(table);// ScrollPane
    scrollPane.setPreferredSize(new java.awt.Dimension(500, 200));

    buttonPanel = new JPanel();
    addBtn = new JButton("ADD TO UPDATE");
    deleteBtn = new JButton("DELETE");
    deleteBtn.setEnabled(false);

    buttonPanel.add(addBtn);
    buttonPanel.add(deleteBtn);

    addBtn.addActionListener(this);
    deleteBtn.addActionListener(this);

    mainPanel = new JPanel();
    mainPanel.setSize(450, 300);
    mainPanel.setLayout(new BorderLayout());
    mainPanel.add("Center", scrollPane);
    mainPanel.add("North", buttonPanel);
    add(mainPanel);
    setVisible(true);
}

public void actionPerformed(ActionEvent source) {
    if (source.getSource() == (JButton) addBtn) {
        addBtnChecks();
    } else if (source.getSource() == (JButton) deleteBtn) {
        deleteRow(table.getSelectedRow());
    }
}

private void addBtnChecks() {
    productName = new MyDatabase(3).getName();
    amountInt = Integer.parseInt(UpdateStock.getAmount().getValue()
            .toString());
    if (new MyDatabase(3).getQuantity() == null) {
        // if the answer from db is null do not parseInt
    } else {
        quantityDbInt = Integer.parseInt(new MyDatabase(3).getQuantity());
    }
    if (productName == null) {
        UpdateStock.getErrorMsg().setText("Enter correct code");

    } else if (amountInt == 0) {
        UpdateStock.getErrorMsg().setText("Please enter correct amount");

    } else {
        addRow();
        UpdateStock.getAmount().setValue(0);
        UpdateStock.getStockNo().setText("");
        UpdateStock.getErrorMsg().setText("");
        deleteBtn.setEnabled(true);
    }
}

private void addColumns(String[] colName) {
    for (int i = 0; i < colName.length; i++)
        columns.addElement(colName[i]);
}

private void addRow() {
    Vector r = new Vector();
    r = createNewElement();
    rows.addElement(r);
    table.addNotify();
}

private Vector createNewElement() {
    Vector t = new Vector();
    spinnerAmount = UpdateStock.getAmount().getValue().toString();
    int spinnerAmountInt = Integer.parseInt(spinnerAmount);
    // read product name from database
    productName = new MyDatabase(3).getName();
    // itemsInStock - get value from db and add amount added by user
    int itemsInStock = quantityDbInt + spinnerAmountInt;
    t.addElement(spinnerAmount);
    t.addElement(productName);
    t.addElement(itemsInStock);
    return t;
}

private void deleteRow(int index) {
    // makes the first row always selected
    table.changeSelection(0, 0, false, false);
    int size = tabModel.getRowCount();
    if (size == 1) { // can't delete when no items
        deleteBtn.setEnabled(false);
    }
    if (index != -1) { // At least one Row in Table
        rows.removeElementAt(index);
        table.addNotify();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:14:39.837

有很多方法可以做到这一点。最好的模型包括数据模型（带有数量的股票列表）和表格模型（以 JTable 理解的方式表达的适配器）之间的清晰分离。

`List<StockHolding>`从where开始，这`StockHolding`是一个超级简单的类，用于保存一行的数据。

```
public class StockHolding {
  private String product;
  private int quantity;
} 
```

（添加构造函数和getProduct/getQuantity）

现在，当您输入新产品+金额时...

```
addRequest(String product, int amount) {
  StockHolding holding = findInList(product, myList);
  if (holding == null) {
    myList.add(new StockHolding(product, amount));
  } else {
    holding.setQuantity(amount+holding.getQuantity());
  } 
```

完成这项工作的关键是根据这个列表来表达你的表模型。 `getRowCount()`返回`myList.size()`和单元格值分别`getValue(myList.get(rowNum), columnNum)`将`getValue()`列号映射到产品或数量。

这里的重要教训是，将 express-as-a-table 问题与 store-data 问题隔离开来，使每个问题都更容易解决。

# sql - 如何从子查询生成的结果中检索结果

> ID：15720577
> 
> 赞同：0
> 
> 时间：2013-03-30T16:04:47.003
> 
> 标签：sql, select

例如：

```
SELECT tb1.column1, tb1.column2
FROM table1 AS tb1
WHERE tb1.column1 = (SELECT tb2.column2 FROM table2 As tb2) 
```

但是……子查询可能有不止一个结果。如果有 3 个结果来自子查询，我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:06:28.437

用于`IN`此。

`IN`可以处理多个值，而`=`只能保存一个。

```
SELECT tb1.column1, tb1.column2
FROM table1 AS tb1
WHERE tb1.column1 IN (SELECT tb2.column2 FROM table2 As tb2) 
```

或者另一种方法是使用`JOIN`更优选的方法，

```
SELECT  DISTINCT tb1.column1, tb1.column2
FROM    table1 AS tb1
        INNER JOIN table2 b
            ON tb1.column1 = b.column2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:06:58.740

您需要使用`in`而不是`=`：

```
SELECT tb1.column1, tb1.column2
FROM table1 AS tb1
WHERE tb1.column1 in (SELECT tb2.column2 FROM table2 As tb2) 
```

# java - Add custom beans to Spring context

> ID：15720579
> 
> 赞同：5
> 
> 时间：2013-03-30T16:04:52.790
> 
> 标签：java, spring

I have some classes, with a custom annotation, that shouldn't be instantiated (abstract class, and it's just a subcomponents for a real beans). But on top of this classes, on runtime, on context initialization phase, I want to put extra beans into application context.

So, basically I need to scan classpath, process results, and introduce new beans into curent application context.

It seems that spring-mvc, spring-tasks and spring-integration are doing this (I tried to learn it from sources - no luck)

I found that I can create my own `BeanFactoryPostProcessor`, scan classpath and call `registerSingleton` for my custom bean. But I'm not sure that it's a good way for introducing new beans (seems that it's used only for postprocess of exising beans only). And I believe there are some Spring internal tools that I may reuse to simplify process.

What is a conventional way to introduce extra beans on Spring context initialization?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:44:43.963

Your observation is actually correct, [BeanFactoryPostProcessor](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html) is one of the two ways Spring provides a mechanism to modify the bean definition/instances before making them available to the application(the other is using [BeanPostProcessors](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html))

You can absolutely use BeanFactoryPostProcessors to add/modify bean definitions, here is one sample from Spring Integration codebase that adds a errorChannel if not explicitly specified by a user, you can probably use a similar code for registering your new beans:

```
 RootBeanDefinition errorChannelDef = new RootBeanDefinition();
    errorChannelDef.setBeanClassName(IntegrationNamespaceUtils.BASE_PACKAGE
            + ".channel.PublishSubscribeChannel");
    BeanDefinitionHolder errorChannelHolder = new BeanDefinitionHolder(errorChannelDef,
            IntegrationContextUtils.ERROR_CHANNEL_BEAN_NAME);
    BeanDefinitionReaderUtils.registerBeanDefinition(errorChannelHolder, registry); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:30:40.703

There are at least two ways to include custom annotated classes as bean definitions:

*   Annotate the custom annotation with @Component
*   Add a include filter with type annotation to `<context:component-scan/>`

for example:

```
<context:component-scan base-package="org.example">
        <context:include-filter type="annotation" expression="org.example.Annotation"/>
</context:component-scan> 
```

Then you can use a `BeanPostProcessor` to instantiate them, for example:

```
public class CustomAnnotationBeanPostProcessor extends InstantiationAwareBeanPostProcessorAdapter

         @Override
            public Object postProcessBeforeInstantiation(Class<?> beanClass, String beanName) throws BeansException {
                if (beanClass.isAnnotationPresent(org.example.Annotation.class)) {
                    Object bean  = createBeanInstance();
                    ...
                    return bean:
                }
                return null;
            } 
    } 
```

Or use a `BeanFactoryPostProcessor` to process the `ScannedGenericBeanDefinitions`.

See `AnnotationConfigUtils.registerAnnotationConfigProcessors()` for sample code of internal Spring annotation postprocessors.

# javascript - 为什么这个 Angular 控制器会抛出“错误：未知提供者：nProvider <- n”？

> ID：15720580
> 
> 赞同：16
> 
> 时间：2013-03-30T16:04:57.847
> 
> 标签：javascript, angularjs

[jsFiddle的代码](http://jsfiddle.net/TCT8n/1/)：

```
<div ng-app="">
    <div ng-controller="FirstCtrl">
        <input type="text" ng-model="data.message" />
        {{data.message + " world"}}
    </div>
</div>

function FirstCtrl($scope) {
    $scope.data = {
        message: "Hello"
    };
} 
```

我刚刚开始使用 Egghead.io 上的视频学习 Angular。接下来我被困在[约翰讨论控制器的第二个视频上](http://egghead.io/video/angularjs-controllers/)。它在他的视频中有效，在我的机器上失败了。

代码太基本了，我不知道是什么引发了这个错误：

```
> Error: Unknown provider: nProvider <- n
>     at Error (<anonymous>)
>     at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:29:36
>     at Object.c [as get] (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:26:310)
>     at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:29:121
>     at c (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:26:310)
>     at d (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:26:444)
>     at Object.instantiate (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:28:80)
>     at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:51:512
>     at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:43:67
>     at n (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js:7:43) 
```

如果我也使用 google CDN，则会引发此错误（从错误中，我认为这可能是 cdn 的错）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-31T22:13:35.347

原来问题是我的脚本正在被缩小，而缩小器正在更改 $scope 变量的名称。Angular.js 文档确实提到[了如何缩小 Angular 代码](http://docs.angularjs.org/tutorial/step_05)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:15:36.213

就您的小提琴而言，如果您将 AngularJS 的用法从“onLoad”更改为“No wrap - in '<head>”或“No wrap - in <body>”，它将正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T16:16:26.790

小提琴演示中唯一的问题是设置代码在负载处理程序中运行。

Anguar 在尝试解析 DOM 时找不到您的控制器功能

工作版本，只需`onload`在左上角更改

[http://jsfiddle.net/TCT8n/3/](http://jsfiddle.net/TCT8n/3/)

# rebol - Why does the rebol interpreter return different results?

> ID：15720581
> 
> 赞同：1
> 
> 时间：2013-03-30T16:05:03.403
> 
> 标签：rebol

Consider:

```
>> print max 5 6 7 8
6
== 8 
```

The documentation states that `max` only takes two arguments, so I understand the first line. But from the second line it looks like the interpreter is still able to find the max of an arbitrary number of args.

What's going on here? What is the difference between the two results returned? Is there a way to capture the second one?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T16:11:25.497

I don't really know Rebol but what I do notice is that you're using `print` inside of th REPL. The first output is from `print`, which is outputting the result of `max 5 6`. The second output is from the REPL, which is outputting the value of your whole expression — which is maybe just the last item in the list? If you changed the order of your inputs, I bet you would see a different result.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:13:10.357

**max** is an abbreviation for **maximum**. As @hobbs correctly guessed, it takes two arguments, and what you're seeing is just the evaluator's logic of turning the crank...and becoming equal to the last value in the expression. In this case you're not using that result, so the interpreter shows it to you with "==". But you could have assigned that whole expression to a variable (for instance).

What you were intending is something that gets the maximum value out of a series. In the DO dialect all functions have fixed arity, and the right way to design such a beast would be to make it take *one* argument...the series.

Such a thing does exist, though there isn't an abbreviation...

```
>> print maximum-of [5 6 7 8]
8 
```

# java - Make an email list, by entering only recipient names

> ID：15720583
> 
> 赞同：0
> 
> 时间：2013-03-30T16:05:30.250
> 
> 标签：java, email, names

I want to make a simple code, that prompts you to enter names, separated by comma or just a space, and when you click enter, to take every one word you entered, and put a @gmail.com at the end of it, how can I do it? That's what I have for now

```
 Scanner input = new Scanner(System.in);
    String mail = "@gmail.com";
    String names;
    System.out.println("Enter names: ");
    names = input.next();
    System.out.println(names + mail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:09:38.757

Not knowing what language this is, here's the pseudo-code:

```
names = input.next();
namesArray = names.split(" ") -- replace with your preferred delimiter
foreach name in namesArray
  print name + mail 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:35:18.460

This should be everything you asked for, if you put a list of names separated by commas it will loop through them, otherwise it will just print a single name.

```
 Scanner input = new Scanner(System.in);
    String mail = "@gmail.com";
    System.out.println("Enter names: ");
    String names = input.next();
    if(names.contains(",")) {
            for(String name : names.split(",")) {
                    System.out.println(name + mail);
            }
    } else {
            System.out.println(names + mail);
    } 
```

Hope that helps.

# .net - ComboBox 不显示现有的绑定数据

> ID：15720585
> 
> 赞同：0
> 
> 时间：2013-03-30T16:05:43.270
> 
> 标签：.net, wpf, xaml, combobox

如图所示，我在*DataGrid*中定义了一个*ComboBox*。*ComboBox*是包含和属性的自定义类的列表。是财产，是财产。绑定到*DataGrid*上的属性。（请注意，DataGrid*的*是一个视图。）*ComboBox*正确填充，并且*ComboBox*选择与属性的绑定也有效。一切都很好，适用于**新**数据。问题在于*`ItemsSource`*`CodePickList``Name``ID``DisplayMemberPath``Name``SelectedValuePath``ID``SelectedValue``GLCode` *`ItemsSource``ItemsSource`***`GLCode`**`ItemsSource`*数据网格。*ComboBox 的文本块只是空白。显然，当 ComboBox ItemsSource 加载时，ComboBox*无法*将*DataGrid*上的属性与*ComboBox*`GLCode`上的属性相匹配。这些属性属于同一类型。WinForms 处理这种情况，但我无法让它在 WPF 中工作。 *`ItemsSource``ID` *`ItemsSource`**********

 *****```
<DataGrid ItemsSource="{Binding EntityDetailsView.View}">
    <DataGrid.Columns>
        <DataGridTemplateColumn>
             <DataGridTemplateColumn.CellTemplate>
                 <DataTemplate>
                        <ComboBox ItemsSource="{BindingPath=DataContext.CodePickList, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                  DisplayMemberPath="Name" SelectedValuePath="ID" SelectedValue="{Binding GLCode, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                                  IsEditable="False" IsReadOnly="False"/>
                 </DataTemplate> 
             </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:45:25.040

事实证明，DataGrid 的 ItemsSource 中的 GLCode 来自数据库（通过实体框架）作为固定长度字符串（右填充）。ComboBox 的 ItemsSource 中的 ID 是一个普通的 C# 字符串。因此，值不匹配，现有数据不会显示。解决方案是在 ComboBox ItemsSource 中填充 ID 字符串。ComboBox 现在按预期工作。*****

# c++ - Why seekg does not work with getline?

> ID：15720586
> 
> 赞同：9
> 
> 时间：2013-03-30T16:05:47.557
> 
> 标签：c++, ifstream, getline, seekg

Seekg does not seem to work, when I reach EOF in myFile.

```
ifstream myFile("/path/file");
for(int i; i < 10; i++){
    myFile.seekg(0);//reset position in myFile
    while(getline(myFile, line)){
        doSomething
    }
} 
```

So, now I am opening input stream every loop:

```
for(int i; i < 10; i++){
    ifstream myFile("/path/file");//reset position in myFile
    while(getline(myFile, line)){
        doSomething
    }
} 
```

But I would rather seek to position 0\. How can I achieve that?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T16:06:38.693

Make sure you clear the error flags before the call to `myFile.seekg()`:

```
myFile.clear(); 
```

After the EOF flag has ben set, you will not be able to extract anything. You have to clear those flags to be able to extract again.

# jquery - 基于 Jquery Mobile List 创建一个数组

> ID：15720591
> 
> 赞同：1
> 
> 时间：2013-03-30T16:06:28.380
> 
> 标签：jquery, jquery-mobile, soundmanager2

我在 jQuery Mobile 中有一个列表。该列表将有一个 id 号和一个搜索查询号，例如

```
"<li><a href='./page.html?id=2' data-transition='slide' id=1>Name</a></li>"; 
```

和

```
"<li><a href='./page.html?id=10' data-transition='slide' id=2>Name</a></li>"; 
```

我从 ajax 回调创建此列表，因此它像这样打印在页面上`$('#list').html(data);`。

我想做的是将列表放在一个数组中，这样当用户单击其中一个列表选项时，它会根据搜索查询提取信息，或者`?id=2`用户可以单击按钮移动到下一个列表项是`id=2`。

因此搜索查询从数据库中获取正确的信息，但 id 是数组中的位置。

下面是填充列表的代码，它是来自 ajax 函数的回调

```
function trackscallback(rtndata) 
{ 

var data="";
for(j=0;j<=rtndata.length -1;j++)
{
    data = data + "<li><a href='./page.html?id="+rtndata[j].track_id+"' data-transition='slide' id="+rtndata[j].name+"><h3>" + rtndata[j].name + "</h3><p><strong>" + rtndata[j].a_name + "</strong></p><p>" + rtndata[j].genre+ "</p></a></li>";
}
$('#list').html(data);
$('#list').listview('refresh'); 
} 
```

因此，此代码将在我的 DOM 中创建一个列表，用户可以单击其中获取更多信息，或者在我的情况下播放 mp3。我遇到的问题是，这只能让用户一次播放一个 mp3。这意味着当 mp3 播放完毕后，用户必须返回列表以选择要播放的新 mp3。

我想要的是我想要的是，在用户完成播放后从列表中选择一个项目后，它会转到列表中的下一个项目并播放它。

我播放 mp3 的代码如下：

```
function playtrackcallback(rtndata) 
{ 
track = rtndata.artist_name + " " + "-" + " " + rtndata.track_name;
picture = "<img src='"+rtndata.track_art_url+"'/>";
playingSongId = rtndata.track_id;
$('#songPicture').html(picture);
$('#songName').text(track);
playSong(rtndata);
}

function playSong(rtndata) {
        //Stop the sound from playing
        soundManager.destroySound(mySound);

        //Save some variables
        playingSong = rtndata.track_id;

        //Create the sound and begin playing whenever!
        soundManager.createSound({
            id: mySound,
            url: rtndata.track_url,
            autoPlay: true,
            stream: true,
            onplay: function () {
                setPauseState(false);
                setPlayTime();
            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:59:19.067

**更新的答案**

在点击列表项之后创建一个包含所有链接的数组。

**[演示页面](http://jsfiddle.net/Palestinian/kX4su/)**

**标记**/*顽皮的按钮！*

```
<a class="next" data-role="button" href="" id="" data-inline="true">Next</a> 
```

**代码**

```
// Create Array
var links = [];

$('li').on('click', 'a', function (e) {

 // Find all links after the clicked link/list item
 var list = $(this).closest('li').nextAll('li').find('a');

 // Wipe array
 links = [];

 // Push href and id of each link
 if (list.length > 0) {
    $.each(list, function () {
        links.push({
            'href': $(this).attr('href'),
                'id': $(this).attr('id')
        });
    });
 }
});

// Next song button
$('a.next').on('click', function (e) {

 // Update (Next) button href and id
 if (links.length > 0) {
  var nexthref = links[0].href;
  var nextid = links[0].id;
  $('a.next').attr('href', nexthref);
  $('a.next').attr('id', nextid);

  // Remove used values from Array
  links.splice(0, 1);
}
 // Move to next song
 $.mobile.changePage($(this).attr('href'), {
    transition: 'flip'
 });
}); 
```

**控件**- 显示/隐藏“下一步”和“返回”按钮（*基于我的演示*）

```
// Last page
var lastpage = '#' + $('body').find('div[data-role="page"]').last()[0].id;

// Hide 'Next' button / Add button 'Back' button
$(document).on('pagebeforeshow', lastpage, function () {
 $('a.next').hide();
 $('[data-role=content]').append('<a class="last" data-role="button" href="#songs" data-inline="true">Back to Index</a>').trigger('create');
});

// Remove 'Back' button / show 'Next' button
$(document).on('pagebeforeshow', '#songs', function () {
 $('a.next').show();
 $('a.last').remove();
}); 
```

# python - python：不同包下同名的两个模块和类

> ID：15720593
> 
> 赞同：27
> 
> 时间：2013-03-30T16:06:31.073
> 
> 标签：python, python-3.x, package, python-import

我已经开始学习python并编写一个练习应用程序。目录结构看起来像

```
src
 |
 --ShutterDeck
    |
    --Helper
       |
       --User.py -> class User
    --Controller
       |
       --User.py -> class User 
```

该`src`目录位于`PYTHONPATH`. 在另一个文件中，可以说`main.py`，我想访问这两个`User`类。我该怎么做。

我尝试使用以下方法，但失败了：

```
import cherrypy
from ShutterDeck.Controller import User
from ShutterDeck.Helper import User

class Root:
  @cherrypy.expose
  def index(self):
    return 'Hello World'

u1=User.User()
u2=User.User() 
```

这当然是模棱两可的。我能想到的另一种（c++ 做它的方式）方式是

```
import cherrypy
from ShutterDeck import Controller
from ShutterDeck import Helper

class Root:

  @cherrypy.expose
  def index(self):
    return 'Hello World'

u1=Controller.User.User()
u2=Helper.User.User() 
```

但是当上面的脚本运行时，它给出了以下错误

```
u1=Controller.User.User()
AttributeError: 'module' object has no attribute 'User' 
```

我无法弄清楚为什么会出错？目录`ShutterDeck`，`Helper`并`Controller`在`__init__.py`其中。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-30T16:08:25.063

您希望导入`User`包`__init__.py`文件中的模块以使它们可用作属性。

所以在两者中`Helper/__init_.py`并`Controller/__init__.py`添加：

```
from . import User 
```

这使模块成为包的属性，您现在可以这样引用它。

或者，您必须完全导入模块本身：

```
import ShutterDeck.Controller.User
import ShutterDeck.Helper.User

u1=ShutterDeck.Controller.User.User()
u2=ShutterDeck.Helper.User.User() 
```

所以用他们的全名来称呼他们。

另一种选择是使用以下命令重命名导入的名称`as`：

```
from ShutterDeck.Controller import User as ControllerUser
from ShutterDeck.Helper import User as HelperUser

u1 = ControllerUser.User()
u2 = HelperUser.User() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T16:09:22.193

一种方法是：

```
import ShutterDeck.Controller.User
import ShutterDeck.Helper.User

cuser = ShutterDeck.Controller.User.User()
huser = ShutterDeck.Helper.User.User() 
```

你也可以这样做：

```
from ShutterDeck.Controller.User import User as ControllerUser
from ShutterDeck.Helper.User import User as HelperUser 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-26T11:54:09.147

这也可能有帮助（今天遇到类似的问题）：

```
ShutterDeck
├── Controller
│   ├── __init__.py
│   └── User.py
├── Helper
│   ├── __init__.py
│   └── User.py
└── __init__.py 
```

在`ShutterDeck/{Controller,Helper}/__init__.py`：

```
from .User import User 
```

进而：

```
>>> import ShutterDeck.Helper
>>> helperUser = ShutterDeck.Helper.User()
>>> helperUser
<ShutterDeck.Helper.User.User object at 0x1669b90>
>>> import ShutterDeck.Controller
>>> controllerUser = ShutterDeck.Controller.User()
>>> controllerUser
<ShutterDeck.Controller.User.User object at 0x1669c90> 
```

# skype4py - 来自 Skype 的意外回复

> ID：15720596
> 
> 赞同：1
> 
> 时间：2013-03-30T16:06:37.307
> 
> 标签：skype4py

skype4py 引发运行以下代码的异常：

```
def createChat():
   chat = skype.CreateChatWith('another.user')
   chat.SendMessage('Gonna add new.user.')
   chat.AddMembers(skype.User('new.user')) 
```

错误是：

```
SkypeError: [Errno 0] Unexpected reply from Skype, got [ALTER CHAT ADDMEMBERS], expected [ALTER CHAT #some.user/$another.user;newuserid ADDMEMBERS (...)] 
```

这让我觉得 Skype4Py/skype.py 中的 _DoCommand() 可能存在错误

该函数中的代码检查Skype api是否返回命令字符串，并且似乎返回命令字符串而没有发送参数。当然，在这种情况下，startswith() 不适用于测试返回字符串。

skype4py 还维护吗？这是一个错误还是amidoinitwrong？

# mysql - MySQL password encrypt validation

> ID：15720598
> 
> 赞同：0
> 
> 时间：2013-03-30T16:06:40.680
> 
> 标签：mysql, encode

```
insert into test(username,pwd) values('Jim',ENCODE('123456','Jim'));
select username from test where username='Jim' and pwd=ENCODE('123456','Jim')

insert into test(username,pwd) values('Ryan',SHA('123456'))
select username from test where username='Ryan' and pwd=SHA('123456')

insert into test(username,pwd) values('Jack',MD5('123456'))
select username from test where username='Jack' and pwd=MD5('123456') 
```

Why I can't get a right result by using `SHA` and `MD5`? Passwords are both 123456, but with different encryption methods I cannot get a right result.

The first can output "Jim" correctly. But the second and the third one cannot output "Ryan" or "Jack", the result set is `null`. Why? I want know how to validate a user by encrypted password.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:16:12.180

Could it be that you are doing something wrong ? Works fine for me.

[SQL Fiddle link with the queries](http://sqlfiddle.com/#!2/00700/3).

My hunch is that you are storing truncated versions of the hash.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:48:40.260

You need to change your field types as your 20-character `VARCHAR` field is truncating the hashes:

`MD5` produces a 32-character string so use `CHAR(32)`.

`SHA` produces a 64-character string so use `CHAR(64)`.

You should always use `CHAR` over `VARCHAR` when you know the length of input, for performance reasons (SQL knows how much to allocate).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T09:55:58.423

**Note Exploits for the MD5 and SHA-1 algorithms have become known. You may wish to consider using one of the other encryption functions described in this section instead, such as SHA2().**

[http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)

# mysql - 在mysql存储过程中连续执行的单个插入查询

> ID：15720611
> 
> 赞同：0
> 
> 时间：2013-03-30T16:07:39.510
> 
> 标签：mysql, sql, stored-procedures

我是mysql存储过程的新手。我在以下代码中遇到问题，其中前两个插入查询连续执行并在单次触发时插入高达 2100 的数据。需要一些帮助。

```
use database;
DELIMITER $$

CREATE PROCEDURE writer(
    IN timegenerated DATETIME,
    IN timereported DATETIME,
    IN syslogfacility smallint(6),
    IN syslogpriority smallint(6),
    IN HOSTNAME VARCHAR(255),
    IN tag VARCHAR(255),
    IN msg2 VARCHAR(255),
    IN msg3 VARCHAR(255),
    IN msg4 INT(11),
    IN msg5 VARCHAR(255),
    IN msg6 VARCHAR(255),
    IN msg7 VARCHAR(255), 
    IN msg8 VARCHAR(255),
    IN msg9 VARCHAR(255),
    IN msg10 VARCHAR(255),
    IN msg11 VARCHAR(255),
    IN msg12 VARCHAR(255),
    IN msg13 VARCHAR(255),
    IN msg14 VARCHAR(255),
    IN msg15 VARCHAR(255),
    IN msg16 VARCHAR(255),
    IN msg17 VARCHAR(255),
    IN msg18 VARCHAR(255))
BEGIN
    INSERT INTO `RAW_DATA` VALUES
      ( '','',timegenerated,timereported,
        syslogfacility,syslogpriority,HOSTNAME,tag,
        msg2,msg3,msg4,msg5,msg6,msg7,msg8,msg9,
        @site_name,msg11,msg12,msg13,msg14,
        msg15,msg16,msg17,msg18,''
      );

    INSERT INTO `SORTED_DATA` values(msg10,msg7,100)
      on duplicate key update hits=hits+1;  

    IF (msg14=0) THEN 
      INSERT INTO `UNCATEGORIZED_DATA`(`col1`, `col2`) VALUES (msg10,24);   
    ELSE            
      INSERT INTO `CATEGORIZED_DATA`(`col1`, `col2`) VALUES (msg10,25);
    END IF;         

END$$
DELIMITER ; 
```

试图分离数据并将其存储在不同的表中。

# mysql - MySQL 返回 NULL 而不是实际值

> ID：15720617
> 
> 赞同：0
> 
> 时间：2013-03-30T16:08:14.140
> 
> 标签：mysql, stored-procedures

我正在编写一个 MySQL 存储过程，它将选择一行，替换一些列值，然后更新该行。我的问题是 SELECT 语句没有获取所有值。也就是说，在 CLI 中具有值的列在我的存储过程中显示为 NULL。这是我的表定义：

```
Field           | Type        | Null | Key | Default           | Extra                       |
id              | int(11)     | NO   | PRI | NULL              | auto_increment              |
mac             | varchar(32) | YES  | UNI | NULL              
ip              | varchar(16) | YES  |     | NULL              
type            | varchar(16) | YES  |     | NULL              
location_id     | int(11)     | YES  |     | NULL              
name            | varchar(64) | YES  |     | NULL
manufacturer    | varchar(64) | YES  |     | NULL              
model           | varchar(64) | YES  |     | NULL              
serial_number   | varchar(64) | YES  |     | NULL              
owner           | int(11)     | YES  |     | NULL              
assigned_to     | int(11)     | YES  |     | NULL              
contact         | int(11)     | YES  |     | NULL              
admin           | int(11)     | YES  |     | NULL              
status          | int(11)     | YES  |     | NULL              
authorized      | tinyint(1)  | NO   |     | 0                 
authorized_by   | int(11)     | YES  |     | NULL              
date_authorized | datetime    | YES  |     | NULL              
date_first_seen | datetime    | YES  |     | NULL              
date_last_seen  | datetime    | YES  |     | NULL              
impact          | smallint(6) | YES  |     | NULL              
os_id           | int(11)     | YES  |     | NULL              
updated_at      | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP
org_unit_id     | int(11)     | NO   |     | NULL              
is_virtual      | tinyint(1)  | NO   |     | 0                 
notes           | text        | YES  |     | NULL 
```

这是我的代码的一部分：

```
CREATE PROCEDURE `updatehw`(mac varchar(32), ipaddr varchar(16), typ varchar(16),
                            loc int, name varchar(64), maker varchar(64),
                            model varchar(64), ser_no varchar(64), owner int,
                            assignee int, contact int, admin int, status int,
                            authorized tinyint, authorizer int, auth_date datetime,
                            impact smallint, os_id int, org int, virtual tinyint,
                            seen tinyint, notes text, 
                OUT error int, OUT error_text varchar(64))
   MODIFIES SQL DATA
proc_label: BEGIN
   Declare rc INT;
   Declare hw_mac varchar(32);
   Declare hw_ip varchar(16);
   Declare hw_type varchar(16);
   Declare hw_location_id INT;
   Declare hw_name varchar(64);
   Declare hw_manufacturer varchar(64);
   Declare hw_model varchar(64);
   Declare hw_serial_number varchar(64);
   Declare hw_owner INT;
   Declare hw_assigned_to INT;
   Declare hw_contact INT;
   Declare hw_admin INT;
   Declare hw_status INT;
   Declare hw_authorized tinyint;
   Declare hw_authorized_by INT;
   Declare hw_date_authorized, l_date_authorized DATETIME;
   Declare hw_date_first_seen DATETIME;
   Declare hw_date_last_seen DATETIME;
   Declare hw_impact smallint;
   Declare hw_os_id INT;
   Declare hw_updated_at timestamp;
   Declare hw_org_unit_id INT;
   Declare hw_is_virtual tinyint;
   Declare hw_notes text;

   Declare Exit Handler for SQLEXCEPTION
   BEGIN
      ROLLBACK;
      Set error = -99;
      Set error_text = 'SQL Exception detected';
   End;

   Set error = 0;
   Set error_text = NULL;
   insert into log (msg) values ("updateHW starting"); -- DEBUG

   Start Transaction;
   -- See if the row exists and lock it
   insert into log (msg) values (concat_ws('=','ipaddr',ipaddr)); -- DEBUG
   Select mac, ip, type, location_id, name, manufacturer,
          model, serial_number, owner, assigned_to, contact,
          admin, status, authorized, authorized_by,
          date_authorized, date_first_seen, date_last_seen,
          impact, os_id, org_unit_id, is_virtual, notes
     into hw_mac, hw_ip, hw_type, hw_location_id, hw_name, hw_manufacturer,
          hw_model, hw_serial_number, hw_owner, hw_assigned_to, hw_contact,
          hw_admin, hw_status, hw_authorized, hw_authorized_by,
          hw_date_authorized, hw_date_first_seen, hw_date_last_seen,
          hw_impact, hw_os_id, hw_org_unit_id, hw_is_virtual, hw_notes
     from hardware where ip=ipaddr
     lock in share mode;
   insert into log (msg) values (concat_ws(' ',"hw_owner after select is",hw_owner)); -- DEBUG
   insert into log (msg) values (concat_ws(' ',"hw_authorized_by after select is",hw_authorized_by)); -- DEBUG
   insert into log (msg) values (concat_ws(' ',"hw_authorized after select is",hex(hw_authorized))); -- DEBUG
   insert into log (msg) values (concat_ws(' ',"hw_is_virtual after select is",hex(hw_is_virtual))); -- DEBUG
   Select found_rows() into rc;
   If rc = 0 THEN
      set error = -11;
      set error_text = 'Entry not found';
      ROLLBACK;
      Leave proc_label;
   End if;
.
.
. 
```

CLI 说这是我的行的内容（我正在使用占位符值）：

```
 id: 22
            mac: mac
             ip: ip
           type: type2
    location_id: 1
           name: name
   manufacturer: maker
          model: model
  serial_number: serial
          owner: 1
    assigned_to: 1
        contact: 1
          admin: 1
         status: 1
     authorized: 0
  authorized_by: 1
date_authorized: 2013-03-20 08:46:16
date_first_seen: 2013-03-20 09:04:39
 date_last_seen: NULL
         impact: 0
          os_id: NULL
     updated_at: 2013-03-25 09:56:04
    org_unit_id: 1
     is_virtual: 1
          notes: Another note 
```

我的日志显示列 hw_authorized 和 hw_owner 被读取为 NULL 而不是实际值。

```
| 2013-03-25 13:12:23 |    NULL | updateHW starting                  |
| 2013-03-25 13:12:23 |    NULL | ipaddr=ip                          |
| 2013-03-25 13:12:23 |    NULL | hw_owner after select is           |
| 2013-03-25 13:12:23 |    NULL | hw_authorized_by after select is 1 |
| 2013-03-25 13:12:23 |    NULL | hw_authorized after select is      |
| 2013-03-25 13:12:23 |    NULL | hw_is_virtual after select is 1    | 
```

这是我的表的创建方式：

```
CREATE TABLE hardware (
id int(11) NOT NULL AUTO_INCREMENT,
mac varchar(32) DEFAULT NULL,
ip varchar(16) DEFAULT NULL,
type varchar(16) DEFAULT NULL,
location_id int(11) DEFAULT NULL,
name varchar(64) DEFAULT NULL,
manufacturer varchar(64) DEFAULT NULL,
model varchar(64) DEFAULT NULL,
serial_number varchar(64) DEFAULT NULL,
owner int(11) DEFAULT NULL,
assigned_to int(11) DEFAULT NULL,
contact int(11) DEFAULT NULL,
admin int(11) DEFAULT NULL,
status int(11) DEFAULT NULL,
authorized tinyint(1) NOT NULL DEFAULT 0,
authorized_by int(11) DEFAULT NULL,
date_authorized datetime DEFAULT NULL,
date_first_seen datetime DEFAULT NULL,
date_last_seen datetime DEFAULT NULL,
impact smallint(6) DEFAULT NULL,
os_id int(11) DEFAULT NULL,
updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
org_unit_id int(11) NOT NULL,
is_virtual tinyint(1) NOT NULL DEFAULT 0,
notes text,
PRIMARY KEY (id),
UNIQUE KEY hardware_idx (mac)
) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=latin1 
```

和一个示例插入：

```
Insert into hardware (mac, ip, type, location_id, name, manufacturer,
                  model, serial_number, owner, assigned_to, contact,
                  admin, status, authorized, authorized_by,
                  date_authorized, date_first_seen,
                  date_last_seen, impact, os_id, org_unit_id, 
                  is_virtual, notes)
          values ('mac','ip','type',1,'name','maker','model','serial',
                  1,1,1,1, 1, 0,
                  1, current_timestamp(), current_timestamp(), current_timestamp(),
                  0, NULL, 1, 1, "Test"); 
```

我究竟做错了什么？

我在 CentOS 6.4 上使用 MySql 5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:28:14.337

Problem resolved. Apparently, there are secret reserved words one cannot use in stored procedures. I renamed the 'authorized' column to 'is_authorized' and the SELECT statement returned the expected value.

FTR, the column names I had to change were: name, model, status, impact, and os_id.

BTW, I tried using ticks around these column names, but it didn't help.

# javascript - 负载悬停不起作用

> ID：15720623
> 
> 赞同：0
> 
> 时间：2013-03-30T16:08:44.950
> 
> 标签：javascript, jquery, html, events, hover

演示：http: [//jsbin.com/afixay/3/edit](http://jsbin.com/afixay/3/edit)

1) 将光标放在红色框上

2）不要移动光标，只需按 ctrl+r （页面应该重新加载）

3）你不会得到任何警报。

好吧，一旦您将其悬停/悬停回来，您就会收到警报。问题是，当光标放在页面加载时的红色框上时，`hover`不会触发事件（也没有`mouseenter`）。

我该如何解决？

我知道，浏览器的工作似乎是正确的，但我真的需要知道元素是否悬停，即使在页面加载时也是如此。

```
$(function() {
  function hovered(e){
      e.type == 'mouseenter' ? alert('on') : alert('off'); 
  }

  $('.box').hover(hovered);
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T16:54:18.680

您将无法做到这一点，无论如何都不能使用纯 JS。

1.  在触发事件之前，您无法在初始页面加载时手动获取鼠标位置。X 和 Y 位置为 0。因此无法判断鼠标是否已经在您的元素上方。

2.  No mouse events are fired until it moves. You could listen for mousemove to immediately respond, but that still doesn't give you what you want.

The [CSS trick](https://stackoverflow.com/questions/6586166/detect-mouse-hover-on-page-load-with-jquery) that was pointed out in the comments is the closest you'll get, but it's hardly a solid solution.

# google-app-engine - Authorization Authsub 中的签名密钥是什么

> ID：15720624
> 
> 赞同：1
> 
> 时间：2013-03-30T16:08:55.640
> 
> 标签：google-app-engine, method-signature, authsub

我想知道 Google Authsub 授权中的签名字符串是什么？我运行这个命令：

```
openssl req -x509 -nodes -days 365 -newkey rsa:1024 -sha1 -subj \
  '/C=US/ST=CA/L=Mountain View/CN=www.example.com' -keyout \
  myrsakey.pem -out /tmp/myrsacert.pem 
```

它正在创建两个文件：

*   myrsakey.pem
*   myrsacert.pem

我上传`myrsacert.pem`到这个链接[https://accounts.google.com/ManageDomains](https://accounts.google.com/ManageDomains) 现在我必须在我的请求中传递签名字符串。

myrsakey.pem 文件包含

```
-----BEGIN PRIVATE KEY-----
MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBANhMJPqDlFLX7p24
fBzgKywpQEky1chBrCT1HipKMfgKdgUeCbLHELWXpQQjdzHcsfMnHgHzaDZ4hHn7
m/VicrJVZkTdlz9ALBiyNss9Q4NZ+2n4OQtdfJ/374wSzQTqZwY/rrcHiPGt5+Cc
fJsU/CGqKbjcIWyYRc/yBYpQdcDJAgMBAAECgYEA1TLIyDzl+Hpq8v+jJns3UsIe
YYg//LHu0kbhwuF7O3hkOEsRWCyrJbMhrmCe3oEgzgFirJ2VvQsx2WLOqSKu1ZRs
RF4oY8njHIDZfP9dugRaxrEgDAfAS+oaO+5j2JMQPINH4xDTPj+G49venEsK2/HI
9MN0Ejk74I5c8mtfg7kCQQD5ykg+dn11cFfJSgtwa1IaGqQ1YyUSSZhhX7l13mX+
LHKsRkIYe3U0/a/S0K8sfmUB36+H0Mo0n+HGG0lcfXb3AkEA3ay1GKEwbdZ6cMJ3
BVJnqSnAHDq0fvBHV8OUN6/gDfdhy32L3FiiwGb8qe0isZNe8EDQ/4EMGazJgVO0
jTXWPwJAYzwNf2MrbGB5P6p+6OZ584zp95uvupgqRWT2FPGJq3SVCgPPdlJ1udue
4i2tqgt8rUXkQhyceFOcKkvk1S2y+QJBAKFnLPzf8IkpD0Gm9k5Tr9KF6bEkNWPv
w6JtbzAUyMiihPxLT1iC2Q3KbtGzLf2p1giMySAgcBUJsDaQIfhnaLUCQBKqU/kh
o7ayHFl3LoUqvonDUM0qRrKE4sBWllxokAELqnbEYfBZYZ7OuZlKXRG9pvDXs9cw
+wEv893hUIzt8QI=
-----END PRIVATE KEY----- 
```

并且 myrsacert.pem 文件包含内容

```
-----BEGIN CERTIFICATE-----
MIICfjCCAeegAwIBAgIJAK1oksGJKQQEMA0GCSqGSIb3DQEBBQUAMFgxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEkMCIG
A1UEAwwbd3d3Lm9uZW1vcmVkZW1vLmFwcHNwb3QuY29tMB4XDTEzMDMzMDE0Mjg0
OVoXDTE0MDMzMDE0Mjg0OVowWDELMAkGA1UEBhMCVVMxCzAJBgNVBAgMAkNBMRYw
FAYDVQQHDA1Nb3VudGFpbiBWaWV3MSQwIgYDVQQDDBt3d3cub25lbW9yZWRlbW8u
YXBwc3BvdC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBANhMJPqDlFLX
7p24fBzgKywpQEky1chBrCT1HipKMfgKdgUeCbLHELWXpQQjdzHcsfMnHgHzaDZ4
hHn7m/VicrJVZkTdlz9ALBiyNss9Q4NZ+2n4OQtdfJ/374wSzQTqZwY/rrcHiPGt
5+CcfJsU/CGqKbjcIWyYRc/yBYpQdcDJAgMBAAGjUDBOMB0GA1UdDgQWBBSWdZhm
3/DSpJYX90YR3QaK27sV8TAfBgNVHSMEGDAWgBSWdZhm3/DSpJYX90YR3QaK27sV
8TAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAGT0CVdFJYaHoYkNhird
Fb7MTNbPfg4BGEIgON4w0gnEgSsnPldX+E/RDKr6rKVoykQ3RadDl2QpqTODHLnO
nToC6BUt/rXQIoE9FrSV16Fx0dTRxIbWqaJCxsDkj2BXQ0FRHfW7nK2t3dbU+ImN
4IBNN1JoycHYSqDEuoiEPGC0
-----END CERTIFICATE----- 
```

现在我想知道当我们安全地签署 Austhsub 并获取会话令牌时字符串 sig 参数的值是什么。我正在关注此链接[https://developers.google.com/accounts/docs/AuthSub](https://developers.google.com/accounts/docs/AuthSub)，在最后一部分中，我不知道为 sig 参数分配什么值，请有人帮忙！

# c# - 更新已删除行和已分离行时有什么区别？

> ID：15720625
> 
> 赞同：0
> 
> 时间：2013-03-30T16:08:55.983
> 
> 标签：c#, database, datatable

删除 DataTable 中的一行时。

如果我使用`row.delete()`方法然后`DataAdapter.Update(DataTable)`。它抛出一个引用异常（不要注意到这一点）。

但是如果我使用`Rows.remove(row)`方法那么`DataAdapter.Update(DataTable)`。它不会抛出任何东西。

在这两种情况下，数据库中都没有任何变化。我知道在第一种情况下，该行被标记为已删除。在第二种情况下，它被标记为分离。

有人请向我解释 DataAdapter 在每种情况下的作用。

# php - 如何在 Windows 的 PHP wampserver 中使用 openlayer 配置 WFS 层

> ID：15720627
> 
> 赞同：1
> 
> 时间：2013-03-30T16:09:17.717
> 
> 标签：php, openlayers, geocoding, wampserver, geoserver

```
<script
src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js">
</script>
<script type="text/javascript">
function init() {
 var map = new OpenLayers.Map ("map", {
controls:[
new OpenLayers.Control.Navigation(),
new OpenLayers.Control.PanZoom()
]
} );

var openstreetmap = new OpenLayers.Layer.OSM();
var style = new OpenLayers.Style();
var rule= new OpenLayers.Rule({
filter: new OpenLayers.Filter.Comparison({
type: OpenLayers.Filter.Comparison.EQUAL_TO,
property: "district",
value: "1",
}),
symbolizer: {
fillColor: "#FF7144",
fillOpacity: 0.6,
strokeColor: "#FF0000",
strokeWidth: 2,
strokeDashstyle: "solid",
label: " ${district}",
labelAlign: "cc",
fontColor: "#000000",
fontOpacity: 1,
fontFamily: "Arial",
fontSize: 16,
fontWeight: "600"}
});
style.addRules([rule]);

var wfs_layer = new OpenLayers.Layer.Vector("fsa", {
strategies: [new OpenLayers.Strategy.BBOX()],
styleMap: style,
protocol: new OpenLayers.Protocol.WFS({
version: "1.1.0",
url: "http://localhost:8080/geoserver/wfs",
featurePrefix: "india",
featureNS :  "http://opengeo.org/india",
featureType: "india",
})
});
map.addLayers([openstreetmap,wfs_layer]);
var WGS84 = new OpenLayers.Projection("EPSG:4326");
var mapextent = new OpenLayers.Bounds(-123.294, 49.296, -122.953, 49.411).transform(WGS84,       map.getProjectionObject());
map.zoomToExtent(mapextent);
}
</script> 
```

此代码在 geoserver 中运行良好，但是当我在 wampserver(PHP) 中尝试此代码时，仅显示 WMS 层。我已经阅读了许多与在 OpenLayers 中添加 WFS 层相关的教程和堆栈溢出查询，但在我的情况下没有任何工作......我还尝试了 proxy.cgi 脚本以允许代理调用地理服务器，但它不起作用。CGI 代理脚本只能与 Python 一起使用还是也可以与 PHP 一起使用？

# php - 如何发送我在视图中不知道名称的变量？

> ID：15720630
> 
> 赞同：-2
> 
> 时间：2013-03-30T16:09:28.173
> 
> 标签：php, mysql, sql, codeigniter

我正在尝试使用 codeigniter 创建一个网站。我在数据库中有两个表。这些表是 Category(Category Name, Category_Id) 和 Item(Item_Name, Category_id)。现在，在我看来，我想在不同类别的不同表格中显示项目。

到目前为止，我已经想出了这个，但显然它不起作用。模型中的代码是这样的。

```
$query = 'select category_id as id, category_name as name from category;';
    $result = $this->db->query($query);
    $data['category'] = $result->result_array();
    foreach($data['category'] as $d)
    {
        $query = "select item_name as name from item where item_catagory_id = '{$d['id']}';";
        $result = $this->db->query($query);
        $data["{$d['id']}"] = $result->result_array();
    }
    $this->load->view('view', $data); 
```

视图中的代码是这样的。

```
<?php foreach($category as $c):?>
            <h2><?php echo $c['name']; ?></h2>
            <table>
                <tr>
                    <td>Item Name</td>
                </tr>
                <?php foreach($c['id'] as $d): ?>
                <tr>
                    <td><?php echo $d['name'];?></td>
                </tr>
                <?php endforeach;?>
            </table>
        <?php endforeach;?> 
```

但它说“为 foreach() 提供的参数无效”。它还说错误在这一行：

```
<?php foreach($c['id'] as $d): ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:52:35.310

如果我明白你想要完成什么，那么这就是你想要的：

改变

```
$data["{$d['id']}"] = $result->result_array(); 
```

到：

```
$d['items'] = $result->result_array(); 
```

然后在您看来，您只需像这样执行第二个 foreach ：

```
<?php foreach($c['items'] as $d): ?> 
```

这样，您就可以使用已知键将项目添加到类别本身。

# android - Can I avoid getView() calls when measuring a GridView?

> ID：15720631
> 
> 赞同：4
> 
> 时间：2013-03-30T16:09:30.780
> 
> 标签：android, android-gridview

In my `Activity` I have a `GridView` inflated from this XML layout:

```
<GridView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnWidth="@dimen/thumbnail_size"
    android:gravity="fill"
    android:horizontalSpacing="16dp"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth"
    android:verticalSpacing="16dp" /> 
```

The items inside it are `RelativeLayout`s, each set to a fixed height. While profiling my `Activity`, I noticed that when I enter an `ActionMode`, it causes a measure pass, which causes the `GridView` to be re-measured. The `GridView` in turn calls `getView()` on my adapter many times to measure all of the child views. This is unnecessary work, since (a) which children are visible hasn't changed, so it already has all the views it needs; and (b) none of the child views can change size.

I know that `ListView` and `GridView` have lots of tricks they can do to avoid work in easy cases, and this seems like the kind of special case they might have an optimization for. Is there something I can set on the `GridView` to help it realise there's no need to call `getView()` again here? Alternatively, can I go higher up the stack and avoid the measure pass completely when entering and leaving an `ActionMode`? Just to be clear, the behaviour of my adapter is correct, and the `getView()` calls aren't causing me a problem: I just want my app to burn fewer cycles.

**N.B.** Even if I set the items to have fixed width as well as height, and replace the `GridView` with the following, it doesn't change the number of `getView()` calls (but it does make my `Activity` ugly).

```
<GridView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:descendantFocusability="beforeDescendants"
    android:columnWidth="@dimen/thumbnail_size"
    android:horizontalSpacing="16dp"
    android:numColumns="3"
    android:stretchMode="none"
    android:verticalSpacing="16dp" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T10:50:17.123

Use ListView instead of GridView. Look at the implementation (API 16):

```
ListView.onMeasure(...) {
...
    if (mItemCount > 0 && (widthMode == MeasureSpec.UNSPECIFIED ||
            heightMode == MeasureSpec.UNSPECIFIED)) {
        final View child = obtainView(0, mIsScrap);
...
} 
```

and

```
GridView.onMeasure(...) {
...
    final int count = mItemCount;
    if (count > 0) {
        final View child = obtainView(0, mIsScrap);
...
} 
```

It looks like a bug.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T11:18:04.387

Some generic ways to make `GridView` perform better:

*   Most important: Make your `getView()` as fast as possible. For example, move any IO or heavy computation away from UI thread.

*   For measure/layout purposes, it seems that the view in position 0 is always requested. You can cache this view yourself to return it super fast in `getView()`.

*   Get rid of any possible `LinearLayout`s with `layout_weight` as each nesting level there doubles the number of measure/layout passes required.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T08:36:54.793

how about the next solution:

add a flag in the adapter that once set, in the getView(), it will return the convertView without any changes.

if the user has touched the listView, set the flag to false.

if something has caused the listView to change its size (for example the actionMode) , set it to true.

EDIT: you will have to check that everything seems to be in order - that each view still shows the same item that it has shown before. it's not just "return the convertView". it depends on what has occurred.

# objective-c - 按下按钮后如何将 UITextField 插入 UITableView

> ID：15720632
> 
> 赞同：0
> 
> 时间：2013-03-30T16:09:31.063
> 
> 标签：objective-c, uitableview, uitextfield

在主视图应用程序中，xcode 生成带有表格视图和加号按钮的就绪应用程序。我想将该按钮更改为添加一个新单元格，但不是默认情况下的日期。我想添加两个文本字段，例如 label->textfield、label->textfield。

在代码中我有这个：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self     action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
    self.detailViewController = (GCDetailViewController *) [[self.splitViewController.viewControllers lastObject] topViewController];
} 
```

和功能：

```
- (void)insertNewObject:(id)sender{    
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }    
    [_objects insertObject:[UITextField alloc] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:34:45.907

考虑这个问题的方法是模型-视图-控制器 (MVC)。 `_objects`是您的模型代表用户认为表中的任何内容。假设它是一个待办事项列表，那么对象可以是您创建的 NSObject 子类的数组，例如 TodoItem。

You would insert new TodoItems into `_objects`, then tell your table (the "View" in MVC) that it's model has changed. You can do that imprecisely using `reloadData`, or in a more targeted fashion as your code suggests, calling `insertRowsAtIndexPaths` - but that call must be sandwiched between tableView `beginUpdates` and `endUpdates`.

You can add textFields in code in your `cellForRowAtIndexPath`, or in the cell prototype in storyboard. Your table view datasource should always refer to objects... i.e. `numberOfRows` answers `self.objects.count`, `cellForRowAtIndexPath` gets:

```
TodoItem *item = [self.objects objectAtIndexPath:indexPath.row]; 
```

and uses that item's properties to initialize the textField's text. Also, incidentally, objects should be declared like this:

```
@property(strong,nonatomic) NSMutableArray *objects; 
```

...and your code should refer to `self.objects` almost everywhere (not _objects). Initializing it on the first insert is too late, because the table needs it to be valid right-away, as soon as it's visible. Usually, a good practice is a "lazy" init replacing the synthesized getter...

```
- (NSMutableArray *)objects {

    if (!_objects) {    // this one of just a few places where you should refer directly to the _objects
        _objects = [NSMutableArray array];
    }
    return _objects;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:16:54.960

You might find using the free Sensible TableView framework really helpful here. Here is some sample code to illustrate how you'd do this using the framework:

```
- (void)insertNewObject:(id)sender{ 
   SCTableViewSection *section = [self.tableViewModel sectionAtIndex:0];
   [section addCell:[SCTextFieldCell cellWithText:@"Enter Text"]];
} 
```

Comes in really handy for these types of situations.

# javascript - ajax后的图像execCommand

> ID：15720633
> 
> 赞同：0
> 
> 时间：2013-03-30T16:09:31.603
> 
> 标签：javascript, ajax, execcommand

我正在使用 WYSIWYG 编辑器并遇到使用 execCommand 处理图像的问题，以下是我的页面结构的简化示例：

```
<div id="buttons_panel"><input id="img_submit" type="button"/></div>

<div id="img_handle" style="display:none;">
<div id="ajax_upload"></div> /* AJAX IMG UPLOAD FROM */
<div id="images"></div> /* DIV FOR ALL UPLOADED IMAGES DISPLAY */
</div>

<iframe id="text_content"></iframe> 
```

我正在使用的简化的 JavaScript，基本上显示隐藏的 div 使用 ajax 上传图像并显示所有上传的图像：

```
<script>
$("#img_submit").click(function(){
$("#img_handle").show();

/* HANDLE IMG UPLOAD WITH AJAX AND RELOAD ALL IMAGES INTO #images DIV */
});
</script> 
```

现在，所有这些都可以正常工作 - 只要使用 ajax 上传新图像，我就会将其附加到图像 div：

```
function loadImgs(){
var loadImages="PATH/TO/URL"; 
$.post(loadImages, {request:"loadImages"}, function(response){
$("#images").append(response);
insert_img();
});
} 
```

然后，单击任一结果，我运行以下函数：

```
function insert_img(){$(".img_insert").click(function(){
var frame = document.getElementById('text_content'); frame.document.execCommand('InsertImage',false,"../PATH/TO/IMG"); 
});} 
```

现在，这里是 execCommand 拒绝在我得到的萤火虫中工作的地方：`"getElementById("text_content").document UNDEFIEND"`

我在该页面上运行的所有其他 execCommand 函数（例如：斜体粗体、字体颜色等）都可以工作，但在这里不行，有人可以帮我找出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:57:45.620

The standard way to get hold of the `document` object within an `<iframe>` element is via its `contentDocument` property rather than `document`. This isn't supported in some older browsers but in those you can use `contentWindow.document` instead.

So, the following will work in all browsers except those which do not support `contentDocument` or `contentWindow`, which in practice are not around today:

```
function getIframeDocument(iframeEl) {
    return iframeEl.contentDocument || iframeEl.contentWindow.document;
}

function insert_img(){
    $(".img_insert").click(function() {
        var frame = document.getElementById('text_content');
        getIframeDocument(frame).execCommand('InsertImage',false,"../PATH/TO/IMG");
    });
} 
```

# java - 找不到 RMI 编译器

> ID：15720634
> 
> 赞同：0
> 
> 时间：2013-03-30T16:09:36.583
> 
> 标签：java, eclipse, netbeans, rmi

我已经安装了最新的 java JDK jdk1.7.0_17，并且我正在 eclipse juno 上创建一个 RMI 应用程序，RMI 插件告诉我没有 RMI 编译器，因此它无法生成存根。我应该下载一个特定的JDK吗？

# css - Css 位置：固定代码破坏 div 位置

> ID：15720644
> 
> 赞同：0
> 
> 时间：2013-03-30T16:10:53.760
> 
> 标签：css, positioning

我有一个简单的 HTML 页面，它包含两个`div`垂直对齐的 s。由于 second ，该页面是可滚动的`div`。我希望第一个`div`的位置是固定的或不可滚动的，这样只有第二个`div`是可滚动的。我添加`position:fixed`到 first`div`的 css 但这次，第二个`div`放在 first 上`div`，所以第一个`div`消失在 second 下`div`。

CSS

```
body {
  width:1000px;
  height:100%;
  margin:0 auto;/*body ortalama*/
}

#div1 {
  height:300px;
  background-color:#00CC66;
}

#div2 {
  display:block;
  word-wrap:break-word;
  padding:30px;
  font-size:72px;
  background-color:#FF3;
} 
```

HTML

```
<div>
  <div id="div1"></div>
  <div id="div2">
    <p>
      <!--Content Here-->
    </p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:25:06.753

固定总是相对于父窗口，而不是元素。一旦位置设置为固定，它就会从文档流中取出。

固定定位是绝对定位的一个子类别。唯一的区别是对于一个固定定位的盒子，包含块是由视口建立的。

所以在第二个 div2 中添加这些

```
position:relative;
top:300px;    /*Bump it down by the height of div1;*/ 
```

希望能帮助到你;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:23:04.610

好的，这是另一种选择。它的布局有些不同，但应该可以完成工作。它使用 div1 上的绝对定位使其到达顶部，并使用百分比宽度来阻止它覆盖 div2 的滚动条。它并不完美，因此您可能需要稍微调整一下。

HTML

```
<body>
<div>
     <div id="div1">a</div>
    <div id="div2">
    <p>                               SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSDDDDDDDDDLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLDDDDDDDDDDDDDDDDDDDDDDDDDDDDDAMSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSDDDDDDDDDLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLDDDDDDDDDDDDDDDDDDDDDDDDDDDDD</p>
</div>
</div>

</body> 
```

CSS：

```
body{
    width:100%;
    height:100%;
    margin:0 auto;/*body ortalama*/
overflow:hidden;
}

#div1{
    height:300px;
    background-color:#00CC66;
position:absolute;
top:0;
width:97.5%;
}

#div2{
    display:block;
    word-wrap:break-word;
    padding:30px;
    font-size:72px;
    background-color:#FF3;
  overflow-y:auto;
  max-height:50px;

    padding-top:300px;
    } 
```

示例：http: [//jsfiddle.net/38xkn/6/](http://jsfiddle.net/38xkn/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:21:14.020

将此 css 添加到`#div2`（您需要指定高度，`#div2`否则滚动条将不知道从哪里开始）：

```
 overflow-y:auto;
  height:50px; 
```

请参阅此处的示例：http: [//jsfiddle.net/38xkn/1/](http://jsfiddle.net/38xkn/1/)（在您将宽度设置为 100 像素时先向右滚动`body`，然后您会看到 的滚动条`#div2`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T16:24:40.800

您应该添加一个高度并设置溢出自动而不是滚动，因为使用滚动您将始终拥有滚动条，即使内容小于指定高度也是如此。例如：

```
#div2 {
    background-color: #FFFF33;
    display: block;
    font-size: 72px;
    height: 200px;
    overflow: auto;
    padding: 30px;
    word-wrap: break-word;
} 
```

# c++ - 为存储库构造函数c ++分配内存

> ID：15720645
> 
> 赞同：1
> 
> 时间：2013-03-30T16:10:58.343
> 
> 标签：c++

如何在 C++ 中为存储库分配内存？

这是存储库类：

```
class Repository{

private:
    DynamicVector<Medicine> MedList;
}; 
```

当我在 C 中使用结构时，initRepository 函数（构造函数）看起来像这样：

```
Repository* initRepository()
{
    Repository* repo =(Repository*)malloc(sizeof(Repository));
    repo->MedList=createVector();
    return repo;
} 
```

但现在我想将 C 版本转换为 C++ 版本。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:12:38.547

你根本不需要做任何特别的事情。只需创建一个`Repository`对象：

```
Repository repo; 
```

这将调用隐式定义的默认（如，默认行为）默认（如，不带参数）构造函数 for `Repository`，这也将构造成员`MedList`。一旦你有了你的`Repository`对象，你就可以对它做任何你喜欢的事情。

如果你想用函数`MedList`的结果初始化成员`createVector`，你可以定义你自己的默认构造函数，如下所示：

```
class Repository {
  public:
    Repository()
      : MedList(createVector())
    { }
  private:
    DynamicVector<Medicine> MedList;
}; 
```

这使用成员初始化列表（之后的所有内容`:`）来初始化`MedList`.

# javascript - AlphaMaskFilter is not a constructor

> ID：15720653
> 
> 赞同：0
> 
> 时间：2013-03-30T16:11:40.930
> 
> 标签：javascript, easeljs

I believe I made a quite simple mistake but I stuck and couldn't solve it.

When I try to create and apply a filter with the following code, I am getting `TypeError: createjs.AlphaMaskFilter is not a constructor` error from Firebug Console for the 2nd line.

```
var worldMask = new createjs.Bitmap("world-mask.png");
var mask = new createjs.AlphaMaskFilter(worldMask.image);
this.layers.world = new createjs.Bitmap("world.jpg");
this.layers.world.filters = [mask];
this.layers.world.cache(0, 0, worldMask.image.width, worldMask.image.height); 
```

What I am trying to achieve is creating a transparent layer from a JPEG by masking it with a transparent PNG by the way.

**Solution :**

It seems EaselJS doesn't contain AlphaMaskFilter thing in the package. I've added it separately and voila.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:25:04.517

The minified version of EaseJS doesn't include several filters, including `AlphaMaskFilter`. You have to include them yourself:

> EaselJS comes with a number of pre-built filters. **Note that individual filters are not compiled into the minified version of EaselJS**. To use them, you must include them manually in the HTML. [[source]](http://www.createjs.com/Docs/EaselJS/classes/Filter.html)

# c# - Windows Phone 文字转语音

> ID：15720658
> 
> 赞同：0
> 
> 时间：2013-03-30T16:12:02.727
> 
> 标签：c#, windows-phone-7, text-to-speech

我正在尝试使用从 codeplex 获得的 WP 语​​音库，现在代码很好，没有错误，但是没有语音输出！

```
using wpSpeech;

namespace TalkForMe
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
           SpeechTTS spk;
           spk = new SpeechTTS ( textBox1.Text);
           spk.SpeakLanguage = "en";
           spk.SpeakText(textBox1.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:59:28.227

您的代码有一个非常小的错误。您为 SpeakTTS 创建了一个引用，但没有为它分配任何内存。像这样尝试并尝试。

```
SpeechTTS spk=new SpeakTTS(); 
```

# css - Radio button not working as I wish

> ID：15720667
> 
> 赞同：0
> 
> 时间：2013-03-30T16:12:49.273
> 
> 标签：css, radio-button

For my project, I have a series of radio buttons. This is going to work like a rating system, where they choose a rating on a place.

```
<div class="float-left">
  <label><input id="Rating" name="Rating" type="radio" value="1" />1</label>
</div>   
<div class="float-left">
  <label><input id="Rating" name="Rating" type="radio" value="2" />2</label>
</div>   
<div class="float-left">
  <label><input id="Rating" name="Rating" type="radio" value="3" />3</label>
</div>   
<div class="float-left">
  <label><input id="Rating" name="Rating" type="radio" value="4" />4</label>
</div>   
<div class="float-left">
  <label><input id="Rating" name="Rating" type="radio" value="5" />5</label>
</div> 
```

What is produced seems very strange to me The numbers and buttons are very far from each other.

![Radio Button Rating System](../Images/542253107bfd4622e5f5c54ef95bf736.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:19:07.943

It seems that you have width style for *all* `input` tags. Try to reset it for `input[type="radio"]`:

```
input[type="radio"] {
    width: initial;
} 
```

Before: [http://jsfiddle.net/Pgcmv/4/](http://jsfiddle.net/Pgcmv/4/)

After: [http://jsfiddle.net/Pgcmv/2/](http://jsfiddle.net/Pgcmv/2/)

**UPD**: In this case initial works only in Chrome 26, Firefox 16 and Safari 5 and does not work in Opera 12 and IE 10\. So you need to set some small value that will appropriate in your case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:19:13.323

I just set the labels to float left and the inputs to float left, then took the inputs outside of the labels to fix it:

My HTML:

```
<div class ="float-left "><input id="Rating" name="Rating" type="radio" value="1" /><label> 1</label></div>   
<div class ="float-left "><input id="Rating" name="Rating" type="radio" value="2" /> <label> 2</label></div>   
<div class ="float-left "><input id="Rating" name="Rating" type="radio" value="3" /><label> 3</label> </div>   
<div class ="float-left "><input id="Rating" name="Rating" type="radio" value="4" /><label> 4</label> </div>   
<div class ="float-left "><input id="Rating" name="Rating" type="radio" value="5" /><label> 5</label> </div> 
```

# python - 金字塔，按页设置 i18n

> ID：15720670
> 
> 赞同：1
> 
> 时间：2013-03-30T16:13:12.270
> 
> 标签：python, internationalization, pyramid

我有多种语言的页面......像这样：

*   / - > en,us,pt,es 并且默认是 US
*   /foo - > pt,en 并且默认是 PT
*   /bar -> pt，默认为 PT

在我拥有的数据库上：

```
 |--URL--|-Languages-|-defLang- 
    |  foo  |   pt,us   |    pt  
    |  bar  |    pt     |    pt 
```

在`__init__.py`我设置它是这样的：

```
tsf = TranslationStringFactory('myproject')

def add_renderer_globals(event):
    request = event['request']
    event['_'] = request.translate
    event['localizer'] = request.localizer

def add_localizer(event):
    request = event.request
    languages = ('en','us','es')
    deflang = 'pt'
    # CHECK current page
    if 'page' in request.matchdict:
        currentpage = DBSession.query(Pages).filter_by(url=request.matchdict['page']).first()
        #SET pages languages
        languages = currentpage.Languages.split(',')
        deflang = currentpage.defLang
    if not default_locale_negotiator(request):
        #set language
        request._LOCALE_ = request.accept_language.best_match(languages , deflang)
    localizer = get_localizer(request)
    request.lang = localizer.locale_name
    def auto_translate(string):
        return localizer.translate(self.tsf(string))
    request.localizer = localizer
    request.translate = auto_translate

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    engine = engine_from_config(settings, 'sqlalchemy.')
    DBSession.configure(bind=engine)
    Base.metadata.bind = engine
    session_factory = session_factory_from_settings(settings)
    config = Configurator(settings=settings)
    config.include('pyramid_mailer')
    config.set_session_factory(session_factory)
    config.add_static_view('static', 'static', cache_max_age=3600)
    config.add_subscriber(add_renderer_globals, BeforeRender)
    config.add_subscriber(add_localizer, ContextFound)
    config.add_translation_dirs('myproject:locale/')
    config.add_route('home', '/')
    config.add_route('page', '/{page}')

    config.scan()
    return config.make_wsgi_app() 
```

但这不起作用，只有家它工作正常

如果我缺少任何信息，请警告我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:02:54.753

在我看来，你正在寻找实际上你应该寻找的时候`'entity'`，给定你的路线。`request.matchdict``'page'``'/{page}'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:41:33.753

```
def add_localizer(event):
    request = event.request
    languages = ('en','us','es')
    deflang = 'pt'
    # CHECK current page
    if 'page' in request.matchdict:
        currentpage = DBSession.query(Pages).filter_by(url=request.matchdict['page']).first()
        #SET pages languages
        languages = currentpage.Languages.split(',')
        deflang = currentpage.defLang
    #-----  CHANGED   ----------------------
    dln = default_locale_negotiator(request)
    if not dln or dln not in languages:
        #set the default language 
        request._LOCALE_ = deflang
    localizer = get_localizer(request)
    request.lang = localizer.locale_name
    def auto_translate(string):
        return localizer.translate(self.tsf(string))
    request.localizer = localizer
    request.translate = auto_translate 
```

谢谢

# java - 如何浏览文件夹，然后在这些文件夹中写入每个文件？

> ID：15720673
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:13:43.030
> 
> 标签：java, file, directory

如何浏览文件夹，然后在这些文件夹中写入每个文件？如果文件夹中有一个文件夹，我们需要先浏览它，然后再返回旧目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:18:45.697

你只需要调用一个递归函数：

```
public void writeStuff(final File file) {
    if(file.isDirectory()) {
        for(final File childFile : file.listFiles()) {
            writeStuff(childFile);
        }
    } else {
        //do stuff with file
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:54:37.017

Oracle 提供了一个基于[FileVisitor界面的](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)[教程](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)，解释了如何进行操作。

# r - 基于对 R 中相邻列求和的条件子集（plyr 包？）

> ID：15720675
> 
> 赞同：0
> 
> 时间：2013-03-30T16:13:43.497
> 
> 标签：r, plyr, subset, inventory

我正在寻找一种更有效的方法来在 R 中创建子集。使用行 = 产品和列 = 时间的数据集，我想找到商品在第 1 周开始销售的那些行（产品），然后进行一个子集。然后对第 2 周做同样的事情，等等。

```
set.seed(4); d <- data.frame(
 product = seq(1:10),
 week1= sample(0:1,10,replace=TRUE), 
 week2= sample(0:3,10,replace=TRUE),
 week3=sample(0:5,10,replace=TRUE), 
 week4= sample(0:5,10,replace=TRUE),speed=sample(100:200,10),quality=sample(20:50,10)
) 
```

完整的数据框是 d。所以我需要知道两件事来找到所有的子集：1）前几周的销售额都是 ==0 ，然后 2）本周的销售额不为零。

任何子集都不应重叠，因为它们是按照产品首次进入市场时对产品进行分组的。

我找到了一个穷人的方法来做到这一点，但我知道必须有更好的方法！

低效的方式：

```
subset3<-d[d$week3 >0 & d$week2==0 & d$week1==0 ,]
subset4<-d[d$week4 >0 & d$week3 ==0 & d$week2==0 & d$week1==0,] 
```

效率稍高，但仍然很差

```
subset3<-d[d$week3 >0 & d$week2+d$week1==0 ,]
subset4<-d[d$week4 >0 & d$week3 + d$week2 + d$week1==0,] 
```

感觉我应该能够做这样的事情，但它不起作用：

```
subset4<-d[d$week4 >0 & sum(d$week1:d$week3) ==0, ] 
```

我不认为 ddply 或 apply 会在这里工作，但也许我错了？我需要的结果是 d 的子集，所有列，如下所示：

子集3=

```
product week1 week2 week3 week4 speed quality
   2     0     0     5     1   124      42
   3     0     0     3     5   155      45 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:04:03.847

你可以使用类似的东西：

```
d$weekstart <- apply(d[,-1],1,function(x) which(x>0)[1] ) 
```

这将确定每个产品的第一个非零销售周。然后，您可以使用此列拆分数据集，如下所示：

```
result <- split(d,d$weekstart) 
```

然后，您可以访问每个子集，例如：

```
result[[1]] 
```

将上述代码中的更改为`1`您想要访问的起始周将类似于拥有`subset1` `subset2`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:11:02.403

我希望我理解你试图做什么。这里尝试使用`rle`函数。我将它应用于每一行。（每个产品）。

```
ll <- apply(d,1,function(x){
  y <- rle(x)
  nn <- names(y$lengths[y$values ==0])
  vv <- y$lengths[y$values ==0]
  if(length(nn)==0)
    res <- data.frame(nbr=0,goodweek='week1')
  else
   res <- data.frame(nbr=vv,goodweek=nn)
})

do.call(rbind,ll)
       nbr goodweek
week3    2    week3  ## 2 bad weeks with 0 then week3 is good 0 0 value>0
week31   2    week3
3        0    week1
week4    1    week4
week2    1    week2
6        0    week1 ## all weeks are good
week41   1    week4
8        1          ## the last week is bad! I dont' know what to return here!
9        0    week1
week21   1    week2 
```

我在这里使用你的 d ：

```
d
   week1 week2 week3 week4
1      0     0     5     2
2      0     0     1     3
3      1     2     3     2
4      1     1     0     1
5      0     3     1     4
6      1     1     2     4
7      1     2     0     4
8      1     3     2     0
9      1     1     5     4
10     0     3     2     2 
```

# ruby-on-rails - 具有多态和所有者关系的 Rails 路线

> ID：15720677
> 
> 赞同：0
> 
> 时间：2013-03-30T16:14:10.850
> 
> 标签：ruby-on-rails, polymorphic-associations, rails-routing

我有一个 Rails 应用程序，`Users`可以在其中创建`Programs`和其他尚未到来的东西，我们会说`Plans`（假设地）。

`Users`还可以`like` `Programs`和`Plans`。（就像是多态的）

我试图找出路线，以便我可以看到`Programs`a`User`创建的所有东西 a `User` `likes`，或者只是`Programs`或只是`Plans`a `User` `likes`。我有这些路线，但这似乎不对。

```
resources :users, :only => [:index,:show] do
    resources :programs, :only => [:index]
    resources :likes, :only => [:index] do
        resources :programs, :only => [:index]
    end
end 
```

该路由需要`programs`一个`user` `likes`URL，例如：users/user_id/likes/like_id/program。

如何创建一个 URL，例如：users/user_id/likes/programs 并获取所有喜欢的程序。

I am using the [Socialization Gem](https://github.com/cmer/socialization) which has a method for "likeables_relation(Class)" which returns a relation of whatever class is requested. I just need help with the routing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:57:20.713

I've just tried with the following routes:

```
resources :users, :only => [:index,:show] do
  resources :programs, :only => [:index]
  resources :likes, :only => [:index] do
    collection do
      get :programs
    end
  end
end 
```

and the

```
http://localhost:3000/users/1/likes/programs 
```

works fine.

It required adding a new action 'programs' to the LikesController class.

This is what rake routes returns:

```
programs_user_likes GET /users/:user_id/likes/programs(.:format) likes#programs 
```

# google-plus - 如何在本地测试 google +1 按钮

> ID：15720679
> 
> 赞同：1
> 
> 时间：2013-03-30T16:14:18.143
> 
> 标签：google-plus

我只是在创建一个 html 文件来测试 google +1 按钮。我猜我的html没有部署在服务器上的问题。如何在本地计算机上测试 google+1 按钮。此代码不呈现任何内容。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Google+1</title>

<!-- <link rel="stylesheet" href="css/main.css" type="text/css" /> -->
<script type=”text/javascript” src=”http://apis.google.com/js/plusone.js”&gt;</script>
</head>

<body >

<g:plusone></g:plusone>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:19:06.957

我认为它无法完成，因为谷歌的 API 检查请求的来源，否则会存在许多安全漏洞。

为什么不上网查呢？只需将网站上传到其域并尝试从您的帐户 +1。

仅用于设计目的的另一个选项：下载 +1 按钮的图像并在离线版本中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:50:11.893

您可能只是在本地打开 HTML 文件。您可以在本地计算机上运行 Google+ 小部件，并且需要能够访问 Internet 才能加载外部脚本。您需要做的是启动 Web 服务器并从那里打开文件。这是由于 +1 代码需要对 JavaScript 的权限。

如果您在 Mac 上，您可以通过内置的 Apache 服务器（将文件复制到 /Library/WebServer/Documents 并导航到 localhost/filename.html）或通过在同一服务器中启动 Python Web 服务器来执行此操作使用以下命令将文件夹作为文件：

```
python -m SimpleHTTPServer 8000 
```

启动 Python Web 服务器后，您可以导航到 localhost 端口 8000。

If you are running on a Windows PC, you can find a number of web servers and install them, [WAMP](http://www.wampserver.com/en/) is a pretty simple option. Again, you would just install WAMP and then put your HTML file in the web/www folder that WAMP created and navigate there from localhost. You can also install Python and use the built-in web server as mentioned before.

# android - 无法让 Color.HSVToColor 在 Android 上工作

> ID：15720681
> 
> 赞同：3
> 
> 时间：2013-03-30T16:14:39.100
> 
> 标签：android, hsv

我派生了一个类`View`并实现了该`onDraw`方法，如下所示：

```
protected void onDraw( Canvas canvas )
{
    Paint p = new Paint();
    p.setColor( Color.HSVToColor( new float[]{ 1.f, 1.f, 1.f } ) );
    p.setStyle( Paint.Style.FILL );
    canvas.drawRect( area, p );
} 
```

我期待看到一个颜色不同的矩形，但屏幕保持白色，不管我为色调、值和饱和度尝试了哪些值。变量`area`是一个`RectF`。没关系，因为如果我将颜色设置为`Color.RED`，它会起作用。

Android 文档说明`Color.HSVToColor`：

> 将 HSV 组件转换为 ARGB 颜色。Alpha 设置为 0xFF。hsv[0] 是色调 [0 .. 360) hsv[1] 是饱和度 [0...1] hsv[2] 是值 [0...1] 如果 hsv 值超出范围，则它们被固定。

我尝试了很多色相/饱和度/数值组合，但屏幕始终保持空白。此外，我尝试了以下方法，结果相同：

```
float[] hsv = new float[ 3 ];
Color.colorToHSV( Color.RED, hsv );

Paint p = new Paint();
p.setColor( Color.HSVToColor( hsv ) );
p.setStyle( Paint.Style.FILL );
canvas.drawRect( area, p ); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T17:21:40.220

你的平局应该可以正常工作。除了平局之外，一定有一些东西丢失了，或者你做得不对。

```
mpaint.setColor( Color.HSVToColor( new float[]{ 1f, 1f, 1f } ) ); 
```

以上应将颜色设置为红色。

我所做的与您在 onDraw() 中所做的类似，只是我更改了值并且它可以工作。

```
public class FingerPaintActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
MyView mv= new MyView(this);
setContentView(mv);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}
class MyView extends View
{
    Context c;      
    private Paint mpaint;

public MyView(Context context) {
    super(context);
    c= context;
    mpaint= new Paint();
    //mpaint.setColor(Color.RED);
    mpaint.setColor( Color.HSVToColor( new float[]{ 0f, 0f, 0.5f } ) );
    mpaint.setStyle(Paint.Style.FILL);
 }

    @Override
    protected void onDraw(Canvas canvas) {
       canvas.drawRect(300, 100, 200, 300, mpaint);

    }
}
} 
```

[http://developer.android.com/reference/android/graphics/Color.html#HSVToColor%28int,%20float%5B%5D%29](http://developer.android.com/reference/android/graphics/Color.html#HSVToColor%28int,%20float%5B%5D%29)。

![在此处输入图像描述](../Images/8c147eb064c3c338f0ee5e47e8787e78.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-27T06:53:25.270

Color.HSVToColor 调用本机帮助函数，因此它在 Eclipse 或 Android Studio 上的预览模式下都不起作用。

这是该功能的来源：

```
public static int HSVToColor(int alpha, float hsv[]) {
    if (hsv.length < 3) {
        throw new RuntimeException("3 components required for hsv");
    }
    return nativeHSVToColor(alpha, hsv);
} 
```

查看**java.awt.Color**以获取将 RGB 转换为 HSV 并返回的 Java 代码。

[http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Color.java/?v=source](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Color.java/?v=source)

# php - 将关联数组传递给 PHP 中的函数

> ID：15720684
> 
> 赞同：8
> 
> 时间：2013-03-30T16:15:12.450
> 
> 标签：php, function, associative-array

我很想知道是否有某种方法可以使用关联数组来调用函数来声明参数。

例如，如果我有这个功能：

```
function test($hello, $world) {
    echo $hello . $world;
} 
```

有什么方法可以称之为做这样的事情吗？

```
call('test', array('hello' => 'First value', 'world' => 'Second value')); 
```

我熟悉使用`call_user_func`and `call_user_func_array`，但我正在寻找更通用的东西，当我不知道他们提前寻找什么参数时，我可以用它来调用各种方法。

编辑：这样做的原因是为 API 前端制作单个接口。我接受 JSON 并将其转换为数组。因此，我希望调用不同的方法并将 JSON 输入中的值传递给方法。因为我希望能够从这个接口调用各种不同的方法，所以我想要一种将参数传递给函数的方法，而不知道它们需要按什么顺序。我在想使用反射会给我带来我的结果米找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-04T15:32:20.203

使用 PHP 5.4+，这工作

```
function test($assocArr){
  foreach( $assocArr as $key=>$value ){
    echo $key . ' ' . $value . ' ';
  }
}

test(['hello'=>'world', 'lorem'=>'ipsum']); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T16:21:01.440

检查 php 手册中的[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)

另外，查找令牌运算符 (...)。这是一种在 PHP 中将可变参数与函数一起使用的方法。您可以声明如下内容：-

```
function func( ...$params)
{
    echo $params[0] . ',' . parama[1];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T16:21:41.297

您可以在函数[func_get_args()内部使用此函数](http://www.php.net/manual/ru/function.func-get-args.php)

所以，你可以像这样使用它：

```
function test() {
     $arg_list = func_get_args();
     echo $arg_list[0].' '.$arg_list[1]; 
}

test('hello', 'world'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-07T23:02:09.417

以下应该工作......

```
function test($hello, $world) {
  echo $hello . $world;
}

$callback = 'test'; <-- lambdas also work here, BTW

$parameters = array('hello' => 'First value', 'world' => 'Second value');

$reflection = new ReflectionFunction($callback);
$new_parameters = array();

foreach ($reflection->getParameters() as $parameter) {
  $new_parameters[] = $parameters[$parameter->name];
}

$parameters = $new_parameters;

call_user_func_array($callback, $parameters); 
```

# android - 编译应用程序时出错

> ID：15720697
> 
> 赞同：0
> 
> 时间：2013-03-30T16:16:20.510
> 
> 标签：android, sdk

我已按照所有步骤创建文件`main.xml`和`string.xml`，但在编译我的项目时出现错误。我尝试使用`Shift`++`Ctrl`和`O`...`Project -> Clean`

```
[03/30/2013 11:24:52 - Asteroid] W / ResourceType (3827): Bad XML block: header size 2270 or total size 148813088 is larger than data size 0
[03/30/2013 11:24:52 - Asteroid] / home / syra / workspace / Asteroid / res / menu / asteroide.xml: 3: error: Error: No resource found That matches the given name (at 'title' with value '@ string / action_settings'). 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:20:11.260

```
No resource found That matches the given name (at 'title' with value '@ string / action_settings'). 
```

只需打开`res/values/strings.xml`然后添加一个带有名称`action_settings`和适当文本的元素。

```
<string name="action_settings">Settings for this action</string> 
```

如果您认为这已经存在，请仔细检查两个名称的拼写。

# vhdl - VHDL infinite loop

> ID：15720698
> 
> 赞同：0
> 
> 时间：2013-03-30T16:16:22.010
> 
> 标签：vhdl, modelsim

I'm writing a small piece of code to take a 32 bit input and output 2 bits at a time. I believe I'm having infinite loop problems from the while loop, based on simulation attempts. Everything looks right to me, compared to other examples of loops I've looked at. Any clue what I could be doing wrong?

```
library ieee;
use ieee.std_logic_1164.all;

entity regA is 
port(mpcnd: in std_logic_vector(31 downto 0);
      clk: in std_logic;
      twobits: out std_logic_vector(1 downto 0));
end regA;

architecture behavior of regA is 
begin
process
variable count: integer;
begin
count := 0;
while (count < 32) loop
    if rising_edge(clk) then
    twobits(0) <= mpcnd(count);
    twobits(1) <= mpcnd(count+1);
    count := count + 2;
    end if;
end loop;
end process;
end behavior; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:27:52.847

for a process you need either a sensitivity list or a wait statement within. a (not synthesisable but simulatable) version of your process could look as follows:

```
process
    variable count: integer;
begin
    count := 0;
    while (count < 32) loop
    wait until rising_edge(clk);-- if rising_edge(clk) then
    twobits(0) <= mpcnd(count);
    twobits(1) <= mpcnd(count+1);
    count := count + 2;
--end if;
end loop;
end process; 
```

# python - 两个进程可以同时访问内存（：memory :）sqlite数据库吗？

> ID：15720700
> 
> 赞同：25
> 
> 时间：2013-03-30T16:16:39.167
> 
> 标签：python, sqlite

是否可以在一个进程中访问在另一个进程中创建的数据库？我试过：

**空闲 #1**

```
import sqlite3
conn = sqlite3.connect(':memory:')
c = conn.cursor()
c.execute("create table test(testcolumn)")
c.execute("insert into test values('helloooo')")
conn.commit()
conn.close() 
```

**空闲 #2**

```
import sqlite3
conn = sqlite3.connect(':memory:')
c = conn.cursor()
c.execute("select * from test") 
```

**错误：**

```
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    q = c.execute("select * from test")
sqlite3.OperationalError: no such table: test 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-30T16:35:45.887

不，他们永远无法从不同的进程访问相同的内存数据库。相反，一个新的连接`:memory:` *总是*会创建一个*新*的数据库。

从[SQLite 文档](http://www.sqlite.org/inmemorydb.html)：

> 每个 :memory: 数据库都彼此不同。因此，打开两个数据库连接，每个连接的文件名为“:memory:”，将创建两个独立的内存数据库。

这与磁盘数据库不同，在磁盘数据库中，使用相同的连接字符串创建多个连接意味着您正在连接到一个数据库。

如果您使用URI ，则可以在*一个进程中共享内存数据库：*`file::memory:?cache=shared`

```
conn = sqlite3.connect('file::memory:?cache=shared', uri=True) 
```

但这仍然无法从其他其他进程访问。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-07-28T13:13:28.280

我当然同意@Martijn，因为 doc 是这么说的，但是如果您专注于类似 unix 的系统，那么您可以利用共享内存：

如果您在`/dev/shm`文件夹中创建文件，则在那里创建的所有文件都直接映射到 RAM，因此您可以使用从两个不同的进程访问相同的数据库。

```
#/bin/bash
rm -f /dev/shm/test.db
time bash -c $'
FILE=/dev/shm/test.db
sqlite3 $FILE "create table if not exists tab(id int);"
sqlite3 $FILE "insert into tab values (1),(2)"
for i in 1 2 3 4; do sqlite3 $FILE "INSERT INTO tab (id) select (a.id+b.id+c.id)*abs(random()%1e7) from tab a, tab b, tab c limit 5e5"; done; #inserts at most 2'000'000 records to db.
sqlite3 $FILE "select count(*) from tab;"' 
```

需要这么多时间：

```
FILE=/dev/shm/test.db
real    0m0.927s
user    0m0.834s
sys 0m0.092s 
```

对于至少 200 万条记录，在 HDD 上执行相同的操作（这是相同的命令，但是`FILE=/tmp/test.db`）：

```
FILE=/tmp/test.db
real    0m2.309s
user    0m0.871s
sys 0m0.138s 
```

所以基本上这允许您从不同的进程访问相同的数据库（不会失去 r/w 速度）：

这是演示我在说什么的演示：

```
xterm -hold -e 'sqlite3 /dev/shm/testbin "create table tab(id int); insert into tab values (42),(1337);"' &
xterm -hold -e 'sqlite3 /dev/shm/testbin "insert into tab values (43),(1338); select * from tab;"' &
; 
```

# c++ - How to make bindings support for a scripting language

> ID：15720703
> 
> 赞同：1
> 
> 时间：2013-03-30T16:17:08.137
> 
> 标签：c++, binding, scripting, scripting-language

I'm making a scripting language with a bytecode machine in C++ just for fun. I plan to use it with an editor for a simple game. But I need to change scene nodes' positions, rotations etc within a script. This means I have to plan a bindining system. I don't know anything about bindings at all and how this has to be made. What are the main approaches and techniques for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:04:04.357

If you have a fixed number of primitive functions that you want to call from your scripting language, you can just add instructions in your VM for them. See for instance Betz, "Embedded languages", *Byte* **13** #12 (Nov 1988) 409–416 (if you can find a copy).

However, it is more flexible to bind the names at run time. For this, you need to implement an environment for holding global variables and functions and an API to register them from C. In all, a sizeable piece of design and work. See for instance how Lua handles this in [Passing a Language through the Eye of a Needle](http://queue.acm.org/detail.cfm?id=1983083).

# java - 使用组合框将多个元素添加到 ListModel

> ID：15720705
> 
> 赞同：0
> 
> 时间：2013-03-30T16:17:08.847
> 
> 标签：java, swing, jcombobox, jlist

我想添加多个元素来`JList`使用`JComboBox`. 当用户从 中选择一个项目时`JComboBox`，它应该添加到`JList`. 如果该项目已存在于列表消息中，则应弹出通知。我该怎么做呢？

```
private void cmbBagSizeItemStateChanged(java.awt.event.ItemEvent evt) {
    DefaultListModel listModel = new DefaultListModel();
    lstBagSize.setModel(listModel);

    if ((evt.getStateChange() == ItemEvent.SELECTED)) {
          if (listModel.getSize() != 0) {
                for (int i = 0; i < listModel.getSize(); i++) {
                      listModel.addElement(cmbBagSize.getModel().getSelectedItem());
                      break;
                }
          } else {
                listModel.addElement(cmbBagSize.getModel().getSelectedItem());
          }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:47:10.493

我设法找到了上述问题的解决方案。我使用名为 contains 的方法来检查是否存在任何重复项。

```
 DefaultListModel listModel = new DefaultListModel();

        if (listModel.contains(this.cmbBagSize.getSelectedItem())) {
              JOptionPane.showMessageDialog(null, "Duplicate");

        } else {

              listModel.addElement(this.cmbBagSize.getSelectedItem());
              this.lstBagSize.setModel(listModel);
        } 
```

# sql - sqlite combine select all from multiple columns

> ID：15720707
> 
> 赞同：1
> 
> 时间：2013-03-30T16:17:21.263
> 
> 标签：sql, select

How to combine many select queries into 1 statement in SQLite?

```
SELECT * FROM Table1 WHERE condition1
SELECT * FROM Table2 WHERE condition2
SELECT * FROM Table3 WHERE condition3
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:18:39.960

Use `UNION` to combine the results of the three queries.

`UNION` will remove duplicate leaving on unique rows on the final result. If you want to keep the duplicate rows, use `UNION ALL`.

```
SELECT * FROM Table1 WHERE condition1 
UNION
SELECT * FROM Table2 WHERE condition2 
UNION
SELECT * FROM Table3 WHERE condition3 
```

**caveat**: the number of columns (*as well as the data type*) must match on each select statement.

**UPDATE 1**

based on your comment below, You are looking for `JOIN`,

```
SELECT  a.*, b.*, c.*
FROM    table1 a
        INNER JOIN table2 b
            ON a.ColName = b.ColName
        INNER JOIN table3 c
            ON a.ColName = c.ColName
-- WHERE    .. add conditions here .. 
```

To further gain more knowledge about joins, kindly visit the link below:

*   [Visual Representation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T09:55:32.680

Your can also query also like SELECT * FROM users where bday > '1970-05-20' UNION ALL SELECT * FROM users where bday < '1970-01-20'

# php - 如何包装正确准备的语句并使用数组绑定实现 IN(?) 表达式？

> ID：15720709
> 
> 赞同：0
> 
> 时间：2013-03-30T16:18:01.490
> 
> 标签：php, mysql, sql, prepared-statement

我想使用这样的查询：

```
$sql = "SELECT `name` FROM `table` WHERE `id` IN (?)"; 
```

并绑定值数组

```
$sth = $pdo->prepare($sql);
$sth->execute(array(array('1', '2', '4'))); 
```

所以，我必须包装 PDO。如何实现这种行为并考虑所有的陷阱？

它必须考虑：

```
IN(?) with array values;
IN(?) with empty array;
NOT IN(?) with array values;
NOT IN(?) with empty array;
NOT (expr IN (?)) with array values;
NOT (expr IN (?)) with empty. 
```

问题变成了我们有一个空数组。在这种情况下，我可以使用简单的通配符将通配符替换为空。但是，如果我没有 IN(?) 和空数组，我必须做什么？

热点是使用`NOT IN (?)`空数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:33:18.377

> 问题变成了我们有一个空数组。

这是一个非常有趣的问题，我花了一些时间来调查。

在朋友的帮助下进行了一些非常有趣的辩论后，我得出结论，`NULL`如果数组为空，则将其传递给 IN() 语句。它做出了非常明智的行为，并且不会使查询失败。

但是，一个问题仍然悬而未决：

虽然`IN(NULL)`返回 FALSE 并且看起来很明智，`NOT IN(NULL)`返回... FALSE 再次！所以，你必须小心这种说法。

对于我自己的实现，我使用条件查询构建作为解决方法，`NOT IN()`仅在非空数组的情况下添加整个语句。它使逻辑更加可靠，尽管以额外的代码为代价：

```
$in = '';
if ($array) {
    $in = $db->parse(" AND col NOT IN(?a)", $array);
}
$data = $db->getAll("SELECT * FROM t WHERE name=?s ?p", $name, $in); 
```

（在直接 IN 的情况下将其与简明陈述进行比较）：

```
$data = $db->getAll("SELECT * FROM t WHERE name=?s AND col IN(?a)", $name, $in); 
```

如果数组为空，它将不返回任何行。

因此，我仍然愿意接受有关如何以`NOT IN`更优雅的方式解决问题的建议。

# serial-port - Serial output of ascii string giving higher voltage for more binary zeroes

> ID：15720713
> 
> 赞同：0
> 
> 时间：2013-03-30T16:18:40.117
> 
> 标签：serial-port, pyserial

I'm controlling a motor bridge via a serial port by using the voltage from the pins on the serial plug directly.

This would normally only give me the RTS and DTR pins to use (controllable through PySerial) as motor controls; however, if I send a string through the data out pin, I can generate enough voltage to control the motor bridge.

My question is-- Why do I get a higher voltage for characters with more binary zeroes in them? A string of "~" (01111110)gets me only 1.3 volts, 'Z' (01011010) gets about 2 volts, and "@" (01000000)clears the 3 volt threshold I need operate the motor bridge.

It's not really a problem, but I feel I'm missing something conceptually important here as I assumed it would be the opposite (more binary ones = higher voltage).

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T11:19:49.753

Hans Passant had the right answer: inverted outputs on RS-232\. I'm just putting it so this questions doesn't stay open.

# php - URL Wildcard Redirect via htaccess

> ID：15720716
> 
> 赞同：1
> 
> 时间：2013-03-30T16:18:56.020
> 
> 标签：php, html, .htaccess, web

How can I wildcard redirect urls that share the same url ending? I know if it's www.domain.com/page1/* you can redirect them all this way to a new destination url. However, what if I need to only redirect if it matches the ending of the url string only.

For example, how do I redirect all urls that have the word post_ad.html at the end of them?

So that www.domain.com/page1/feb/post_ad.html (all of these with post_ad.html at the end only) redirects to just wwww.domain.com/postnew.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:32:07.410

Enable mod_rewrite and .htaccess through `httpd.conf` and then put this code in your `.htaccess` under `DOCUMENT_ROOT` directory:

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule (^|/)post_ad\.html$ /postnew.html [L,NC,R=301] 
```

# c++ - 在C中按“a A b B c C”的顺序对字符串数组进行排序

> ID：15720717
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:19:03.223
> 
> 标签：c++, c, string, sorting

这是一个名为 sort_list_forward 的小函数

```
struct customer * sort_list_forward (struct customer * liste_)
{
    struct customer *pointer1, *pointer2;
    struct customer tmp;

    if (liste_!=NULL)
    {
        pointer1 = liste_;
        while(pointer1 != NULL)
        {
            pointer2 = pointer1->next;
            while(pointer2 != NULL)
            {

                if (strcmp(pointer1->name,pointer2->name) > 0)
                {
                    strcpy(tmp.name, pointer2->name);
                    strcpy(pointer2->name, pointer1->name);
                    strcpy(pointer1->name, tmp.name);
                }
                pointer2 = pointer2->next;
            }
            pointer1 = pointer1->next;
        }
        return liste_;
    }
    else
    {
        printf("sortnames: no elements avaiable");
        return NULL;
    }
} 
```

结构客户看起来像

```
typedef struct customer {
    char name[256];
    struct customer *next;
    struct customer *previous;
}; 
```

如果我使用这个函数，输出看起来像

```
Ann
Bernd
Hans
barbara
bart
berta
homer 
```

但我想要一个看起来像的输出

```
Ann
barbara
bart
berta
Bernd
homer
Hans 
```

a A b B c C d D ...

我搜索了8个多小时，但一无所获:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:22:20.323

而不是`strcmp`，使用排序规则比较您的字符串，方法是调用`strcoll`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:24:38.307

用作`strcasecmp`排序顺序是忽略单词的大小写。

# django - 如何使用 django 表单向导使步骤可选

> ID：15720722
> 
> 赞同：2
> 
> 时间：2013-03-30T16:19:27.230
> 
> 标签：django, django-formwizard

Django 表单向导有一个`condition_dict`允许在满足条件时跳过某些步骤。如果我们不想跳过一个步骤，而是让它成为可选的，该怎么办。换句话说，该步骤的表单仍将被呈现，但它同时具有提交按钮和跳过此步骤按钮。提交按钮将执行正常的表单验证，而跳过按钮将用户带到下一步。

django 1.4/1.5 中的表单向导甚至可以做到这一点吗？如果是这样，请给我一些指示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:31:41.960

如果您在相关表单上设置默认值或可为空的字段，则表单 clean 将通过，将表单设置为“可选”，不是吗？

# c# - 真正的随机不是真正的随机 我真的很困惑

> ID：15720723
> 
> 赞同：1
> 
> 时间：2013-03-30T16:19:59.260
> 
> 标签：c#, random

好吧，我测试了下面的方法。

生成`x`时间之间的随机数`0~x`，然后检查未生成的随机数。

我认为这将非常接近 100%。我的意思是`0~x`生成之间的所有数字。

但结果令人震惊。大约**36%**的数字**丢失了**。

我的随机函数不是真的随机吗？

在我的随机课程下面：

```
private static Random seedGenerator = new Random();

private static ThreadLocal<Random> random = 
    new ThreadLocal<Random>(SeededRandomFactory);

private static Random SeededRandomFactory()
{
    lock (seedGenerator)
        return new Random(seedGenerator.Next());
}

public static int GenerateRandomValueMin(int irRandValRange, int irMinValue)
{
    return random.Value.Next(irMinValue, irMinValue + irRandValRange);
} 
```

以下是结果：

```
在 0-10 之间，缺失数字计数：4，百分比：40%
在 0-100 之间，缺失数字计数：36，百分比：36%
在 0-1000 之间，缺失数字计数：369，百分比：36.9%
在 0-10000 之间，缺失数字计数：3674，百分比：36,74%
在 0-100000 之间，缺失数字计数：36583，百分比：36,58%
在 0-1000000 之间，缺失数字计数：367900，百分比：36,79%
在 0-10000000 之间，缺失数字计数：3678122，百分比：36,78%
在 0-100000000 之间，缺失数字计数：36797477，百分比：36.8%

```

这是我如何检查的代码：

```
File.WriteAllText("results.txt", "");

int irFirst = 10;

for (int i = 0; i < 8; i++)
{
    HashSet<int> hsGenerated = new HashSet<int>();

    for (int k = 0; k < irFirst; k++)
    {
        hsGenerated.Add(GenerateRandomValue.GenerateRandomValueMin(irFirst, 0));
    }

    int irNotFound = 0;
    for (int k = 0; k < irFirst; k++)
    {
        if (hsGenerated.Contains(k) == false)
            irNotFound++;
    }

    string srSonuc = 
        string.Format(
            "Between 0-{0}, missing numbers count: {1}, percent: {2}%", 
            irFirst, irNotFound,
            Math.Round((Convert.ToDouble(irNotFound)/Convert.ToDouble(irFirst))*100.0, 2).ToString()
            );

    using (StreamWriter w = File.AppendText("sonuclar.txt"))
    {
        w.WriteLine(srSonuc);
    }

    irFirst = irFirst * 10;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T16:39:47.290

As mentioned in the comments, your testing method is off.

You draw x times a number between 0 and x. The probability that a specific number is **not** drawn is:

![((x-1)/x)^x](../Images/8d5b242c97a5d00a21e0af55be62838a.png)

As x approaches infinity, p will go towards 1/e (or approx. 36.7879441%) And this is the number you are seeing in your results. Also, as x approaches infinity, you will observe this probability as outcome of your sample (Law of large numbers)

This has to do with probability. When you have a bowl with a red and a white marble. And you take one, put it back an take another one you *cannot* guarantee that you see both. You could take the red one twice. You are doing the same thing with more objects.

* * *

To elaborate on true true randomness:

> I would expect close to 99% percent instead of 64%. Or at least 90%+ percent. So you say this isn't possible with current technology

That is simple. Thanks to modern math, technology and my super powers I can tell you how to do that: You need more draws than numbers to choose from. The formula becomes:

![more math](../Images/a45e2ce6707362f1ff1c79f7941badf0.png)

where n is you desired percentage of missing numbers. For example if you are willing to accept 5% numbers missing, you must draw three times as many random numbers. For a 1% chance, you need to iterate 4.6 times the maximum number.

This math assumes a perfectly uniform random number generation.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T16:34:39.033

您的结果正是您通过替换采样的均匀分布所期望的结果。

考虑最简单的例子。你有一个硬币，扔了两次。所以我们假设我们是从一个均匀的离散分布中抽样的。

以 0.25 的等概率发生的可能结果是：

```
TT
TH
HT
HH 
```

As you can see, only two of the four outcomes have both heads and tails.

This is known as sampling with replacement. So, once we have sampled a tails, then we "put it back in the bag", and it could come out again on the next sample.

Now suppose we sample without replacement. In that case there are two possible outcomes:

```
TH
HT 
```

And as you see, each possible value appears exactly once.

Essentially your expectation for the results is not correct. As another example, suppose you toss a coin and it comes down tails. What do you expect will happen on the next toss. You are arguing that the coin must now come down heads. But that is clearly nonsense.

* * *

If you did want to sample without replacement, and it's not clear that's really what you want, then you do so with the [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T16:29:11.190

如果你想要 1 亿个唯一随机数，你可以这样做：

现在使用 Fisher-Yates suffle 算法：

```
List<int> numbers = new List<int>(100000000);
for (int i = 0; i < numbers.Capacity; i++)
{
    int rnd = random.Next(numbers.Count + 1);
    if (rnd == numbers.Count)
        numbers.Add(i);
    else
    {
        numbers.Add(numbers[rnd]);
        numbers[rnd] = i;
    }
} 
```

顺便说一句，您可以更快地计算 irNotFound：

```
int irNotFound = irFirst - hsGenerated.Count; 
```

祝你的任务好运。

# ruby - 如何将整数转换为它们的单词表示？

> ID：15720725
> 
> 赞同：3
> 
> 时间：2013-03-30T16:20:09.687
> 
> 标签：ruby

请告诉我 Ruby 中可以执行以下任务的函数：

*   “0”应该给我文本“零”

*   “5”应该给我文本“5”

*   “6”应该给我文本“6”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:31:45.490

看看[语言学](https://github.com/ged/linguistics)宝石。安装：

```
gem install linguistics 
```

然后运行：

```
require 'linguistics'
Linguistics.use(:en) #en for english
5.en.numwords #=> "five" 
```

这适用于你扔给它的任何数字。还值得一提的是，Linguistics 目前只包含一个英语模块，所以如果你需要 i18n，请不要使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:56:48.320

我喜欢[`numbers_and_words`](https://github.com/kslazarev/numbers_and_words)宝石。

```
require 'numbers_and_words'

ruby 2.0.0> 15432.to_words
=> "fifteen thousand four hundred thirty-two" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T18:15:51.980

我记得为此写了一个递归解决方案。如果不想使用任何宝石，请尝试一下 :)。

```
class Integer
  def in_words
    words_hash = {0=>"zero",1=>"one",2=>"two",3=>"three",4=>"four",5=>"five",6=>"six",7=>"seven",8=>"eight",9=>"nine",
                    10=>"ten",11=>"eleven",12=>"twelve",13=>"thirteen",14=>"fourteen",15=>"fifteen",16=>"sixteen",
                     17=>"seventeen", 18=>"eighteen",19=>"nineteen",
                    20=>"twenty",30=>"thirty",40=>"forty",50=>"fifty",60=>"sixty",70=>"seventy",80=>"eighty",90=>"ninety"}

    if words_hash.has_key?(self) 
      words_hash[self]
    elsif self >= 1000
      scale = [""," thousand"," million"," billion"," trillion"," quadrillion"]
      value = self.to_s.reverse.scan(/.{1,3}/)
        .inject([]) { |first_part,second_part| first_part << (second_part == "000" ? "" : second_part.reverse.to_i.in_words) }
      (value.each_with_index.map { |first_part,second_part| first_part == "" ? "" : first_part + scale[second_part] }-[""]).reverse.join(" ")

    elsif self <= 99
       return [words_hash[self - self%10],words_hash[self%10]].join(" ")
    else
      words_hash.merge!({ 100=>"hundred" })
      ([(self%100 < 20 ? self%100 : self.to_s[2].to_i), self.to_s[1].to_i*10, 100, self.to_s[0].to_i]-[0]-[10])
        .reverse.map { |num| words_hash[num] }.join(" ")
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T16:26:08.603

在谷歌上搜索humanize gem，或者你可以使用这样的哈希：

```
number_to_word = { 1 => "One", 2 => "Two", 3 => "Three", ...} 
```

然后像这样访问相应的文本：

```
text = number_to_word[1] # for accessing value of 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T16:21:46.287

```
mapper = {0 => "zero", 1 => "one", 2 => "two",... }
# and now you can use mapper to print the text version of a numer
print mapper[2] 
```

# android - android中的文本到语音异常行为

> ID：15720730
> 
> 赞同：3
> 
> 时间：2013-03-30T16:20:35.057
> 
> 标签：android, text-to-speech

我对文字转语音有一种奇怪的体验。

看我的代码：

```
Button b;
TextView title, body;
TextToSpeech tts;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.popups);
    b = (Button) findViewById(R.id.buttonok);
    title = (TextView) findViewById(R.id.textViewtitle);
    body = (TextView) findViewById(R.id.textViewbody);
    b.setText("ok");
    title.setText(Receive.address);
    body.setText(Receive.body);
    tts = new TextToSpeech(Popup.this, new TextToSpeech.OnInitListener() {

        public void onInit(int status) {
            // TODO Auto-generated method stub
            if (status != TextToSpeech.ERROR) {
                tts.setLanguage(Locale.US);
            }
        }
    });
            play();//this is not working??!!i don't know why
    b.performClick();//even this is not working
            /* but when i click this button it works??? how and why?*/
    b.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            play(); // Popup.this.finish();
        }
    });
}

private void play() {
    // TODO Auto-generated method stub
    tts.speak(Receive.body, TextToSpeech.QUEUE_FLUSH, null);

} 
```

只有当我单击按钮时，我的文本到语音才能正常工作，但每当我不单击此按钮并在普通代码中编写 tts.speak() 时，它就无法正常工作......为什么？

问候查理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:38:39.907

您必须等待`onInit`被呼叫才能开始`speak`。在您的代码中，您在声明之后立即调用 play() 。onInit 是一个回调，它需要一些时间才能被调用。如果您在按钮出现后立即单击按钮，有时它会失败，因为尚未调用 onInit。您应该有一个类成员`boolean mIsReady`并在**onInit 中将**其设置为 true 。在你的`play()`方法 中

```
private void play() {
// TODO Auto-generated method stub
if (mIsReady) {
tts.speak(Receive.body, TextToSpeech.QUEUE_FLUSH, null);
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:43:46.387

```
b.performClick();//even this is not working
        /* but when i click this button it works??? how and why?*/
b.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        play(); // Popup.this.finish();
    }
}); 
```

You are performing a click with `b.performClick()` before setting its `setOnClickListener`. Also, you are better off making such calls on the `onResume()` method. OnCreate is meant to be used to bind views and prepare the activity. The `onResume()` method will be called before showing the view to the user on the foreground so that would be the best place to put this code.

Take a look at the activity lifecycle.

![activity](../Images/4312da44b104ce6863710bebf1fb0d54.png)

# c# - 获得对相机胶卷 Windows Phone 8 的访问权限

> ID：15720731
> 
> 赞同：1
> 
> 时间：2013-03-30T16:20:42.463
> 
> 标签：c#, xaml, windows-phone-8

我在进入 Windows Phone 8 的相机胶卷文件夹时遇到问题。不幸的是，由于该项目是 MonoGame 项目，MediaLibrary 对象未实现，因此无法正常工作。我不得不直接点击相机胶卷文件夹，通过我得到一个

```
Access Denied 
```

结果出错。这个想法是，如果我将来知道文件的位置，我可以在用户使用该应用程序拍照后将其显示在我的应用程序的某些部分。代码如下：

```
StorageFile folder = await StorageFile.GetFileFromPathAsync("Pictures\\Camera Roll\\WP_20130227_001.jpg"); 
```

我也检查了：

```
ID_MEDIALIB_PHOTO 
```

我仍然收到错误。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T11:10:50.097

尝试使用 photochoosertask..

```
 PhotoChooserTask selectphoto = new PhotoChooserTask();
        selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
        selectphoto.Show(); 
```

这可能会有所帮助。

# asp.net - Reuse MVC4 login with MongoDB

> ID：15720733
> 
> 赞同：0
> 
> 时间：2013-03-30T16:20:56.863
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

I have made a MVC 4 site and want to reuse the login, but I dont want to use SQL, I want to use MongoDB, so using this guide [http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)

I have made a new membershipprovider [https://github.com/Mech0z/GoldSilverEarnings/blob/master/GoldSilverWebServer/Authentication/MongoDB/MongoMembershipProvider.cs](https://github.com/Mech0z/GoldSilverEarnings/blob/master/GoldSilverWebServer/Authentication/MongoDB/MongoMembershipProvider.cs)

And roleprovider [https://github.com/Mech0z/GoldSilverEarnings/blob/master/GoldSilverWebServer/Authentication/MongoDB/MongoRoleProvider.cs](https://github.com/Mech0z/GoldSilverEarnings/blob/master/GoldSilverWebServer/Authentication/MongoDB/MongoRoleProvider.cs)

I then have this Web.config

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
<configSections>
</configSections>
<connectionStrings>
<add name="MongoConnection" connectionString="mongodb://censored" />
</connectionStrings>
<appSettings>
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false"/>
<add key="webpages:Version" value="2.0.0.0" />
<add key="webpages:Enabled" value="false" />
<add key="PreserveLoginUrl" value="true" />
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>
<system.web>
<membership defaultProvider="AccountMembershipProvider">
  <providers>
    <add name="AccountMembershipProvider"
         type="GoldSilverWebServer.Authentication.MongoDB.MongoMembershipProvider" />
  </providers>
</membership>

<roleManager enabled="true" defaultProvider="AccountRoleProvider">
  <providers>
    <clear/>
    <add name="AccountRoleProvider"
         type="GoldSilverWebServer.Authentication.MongoDB.MongoRoleProvider" />
  </providers>
</roleManager>

<compilation debug="true" targetFramework="4.5" />
<httpRuntime targetFramework="4.5" />
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication>
<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
</system.web>
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers>
</system.webServer>
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="MongoDBSettings.Driver" publicKeyToken="f686731cfb9cc103" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.8.0.124" newVersion="1.8.0.124" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="MongoDBSettings.Bson" publicKeyToken="f686731cfb9cc103" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.8.0.124" newVersion="1.8.0.124" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="MongoDB.Driver" publicKeyToken="f686731cfb9cc103" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.8.0.124" newVersion="1.8.0.124" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="MongoDB.Bson" publicKeyToken="f686731cfb9cc103" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.8.0.124" newVersion="1.8.0.124" />
  </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

I get this error when I click "Login" ![enter image description here](../Images/997e5d0c0753156a9ca17c63945fd1ab.png) (Right click and copy image url to see full size)

Is it not possible to reuse the login system like this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:24:17.170

You change your MongoMembershipProvider to inherit from ExtendedMembershipProvider

```
public class MongoMembershipProvider : ExtendedMembershipProvider 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:35:15.887

Try this below code instead of websecurity.Login

```
if (Membership.ValidateUser(model.UserName, model.Password)) 
```

# javascript - Backbone: How To Bind A Model To A View

> ID：15720738
> 
> 赞同：1
> 
> 时间：2013-03-30T16:21:08.157
> 
> 标签：javascript, data-binding, backbone.js

So I have some objects extended from Backbone.js:

```
var MyModel = Backbone.Model.extend({});
var modelInstance = new MyModel();
var MyModelView = Backbone.View.extend({}); 
```

And I'm trying to figure out how to bind my Model to its corresponding View. How does one handle data-binding in Backbone?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:22:10.363

You pass your model instance into the view when creating it.

```
var modelView = new MyModelView({model: modelInstance}) 
```

From [the docs](http://backbonejs.org/#View-constructor):

```
When creating a new View, the options you pass — after being merged into any default 
options already present on the view — are attached to the view as this.options 
for future reference. There are several special options that, if passed, will be 
attached directly to the view: model, collection, el, id, className, tagName and attributes. 
```

# xml - Why does this XQuery (Mergesort) Code Snippet not work correct?

> ID：15720743
> 
> 赞同：0
> 
> 时间：2013-03-30T16:21:26.843
> 
> 标签：xml, xpath, merge, xquery, mergesort

While learning XQuery I'm trying to implement a merge sort.

For joining two already sorted sequences into one I wanted to implement a helper function called "merge".

It currently looks like this:

```
declare function local:merge($seq1 as xs:integer*, $seq2 as xs:integer*) as xs:integer*{

if(empty($seq1) and empty($seq2)) then ()
else if(empty($seq1)) then $seq2
else if(empty($seq2)) then $seq1
else

let $zahl1 := $seq1[1]
let $zahl2 := $seq2[2]

return 
if($zahl1 < $zahl2) then ($zahl1, local:merge(fn:subsequence($seq1,2), $seq2))
else if($zahl2 < $zahl1) then ($zahl2, local:merge($seq1, fn:subsequence($seq2,2)))
else ($zahl1, $zahl2, local:merge(fn:subsequence($seq1,2), fn:subsequence($seq2,2)))

}; 
```

I'm testing my code with this call:

```
local:merge((1,3,6,9,10), (1,2,4,6,8,11)) 
```

Somehow the result isn't always correct (under this is the result for the call from above):

```
 1 2 3 4 6 6 8 9 10 8 11 
```

The idea behind this was that I always check if the first number of a sequence is bigger or smaller than the one in the other sequence. I would then add the smaller number to my result, cut the sequence with the smaller number into a subsequence without the just added number and go again recursively.

The break condition are when either one of the two sequences is empty or both.

I can't see my mistake at the moment, perhaps it's something little that I'm overlooking.

Can you show me where I need to change my code that it works correct?

Thanks a lot for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:07:47.413

You have a copy/paste error in line 9 of the function, `let $zahl2 := $seq2[2]` should be `let $zahl2 := $seq2[1]`. The rest of your function works correctly.

You can however omit the check if both arguments are empty, because the next one returns `$seq2`, which is empty, too:

```
 if(empty($seq1)) then $seq2
  else if(empty($seq2)) then $seq1
  else
    let $zahl1 := $seq1[1]
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:14:06.197

Of course a far easier way to sort it is:

```
for $i in $sequence order by $i return $i 
```

# intellij-idea - PhpStorm/IntelliJ generate method from usage

> ID：15720748
> 
> 赞同：18
> 
> 时间：2013-03-30T16:21:48.017
> 
> 标签：intellij-idea, phpstorm

I'm looking for a generate method from usage. IntelliJ supports extract, rename etc. But if i write, for instance, $this->new_method($a) i would like to quickly generate this method in the same class. Does this exist or maybe there is a plugin for it?

Thanks for any help

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-30T20:24:30.523

1.  Place cursor on non existing method
2.  `Alt + Enter` (or wait and click on light bulb)
3.  Choose `Add method` from submenu.

![enter image description here](../Images/7b6bcc2d6c9a832ca0b298b040c54acb.png)

# php - 如何使用根目录中的 PHP 文件以及其他页面的相对路径？

> ID：15720752
> 
> 赞同：1
> 
> 时间：2013-03-30T16:22:23.487
> 
> 标签：php, html

前几天我问了这个问题： [如何从一个位置调用 DIV 中的 HTML？](https://stackoverflow.com/questions/15714842/how-can-i-call-html-inside-a-div-from-a-single-location)

我已经将它实施到我的网站中，但我遇到了一些问题。

我的组织结构是将每个页面放入自己的文件夹中。

所以我在根目录中有主要的 index.html 以及 CSS 和 PHP 头文件。

然后我将其他页面放在他们自己的文件夹中，这样我就可以摆脱 html/php 扩展名。

现在当我把

`<?php include('../includes/header.php'); ?>`

进入每个页面，链接都被破坏了，因为每个页面都需要不同的级别来访问根目录中的 PHP 文件。有些是 ./ 其他 ../ 或 ../../

我现在找到了一个修复方法，即使用完整路径名：

[http://mywebsite.com/trails/](http://mywebsite.com/trails/)等。

但我觉得有更好的方法来做到这一点。

我还考虑将标头 PHP 放在每个目录中，但我认为这违背了轻松编辑 1 个文件以全部更改它们的目的。

另一种想法是将所有内容都放在一个目录中，但我不想这样做。

那么我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T16:24:36.780

许多站点都有某种配置/引导文件，他们在其中放置了一个变量（实际上，通常是一个常量），它们定义了站点的文档根目录：

```
defined('DOC_ROOT') || define('DOC_ROOT', __DIR__); 
```

然后他们在包含他们的文件时使用它：

```
<?php include(DOC_ROOT . '/includes/header.php'); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T16:23:40.497

制作一个变量`($root)`或其他东西并使用 PHP 的[`realpath()`](http://php.net/manual/en/function.realpath.php).

然后执行以下操作：

```
<?php include ($root . '/includes/header.php'); ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T16:28:49.577

您可以使用[预定义变量](http://php.net/manual/en/language.constants.predefined.php) `__DIR__`或`__FILE__`定义您的变量：

```
define("MY_WEB_DIR", '/var/www/html');
include(MY_WEB_DIR . '/includes/header.php'); 
```

# ruby - Unable to activate rspec-2.12.0, because rspec-core-2.13.1 conflicts with rspec-core (~> 2.12.0)

> ID：15720754
> 
> 赞同：2
> 
> 时间：2013-03-30T16:22:41.997
> 
> 标签：ruby, testing, rspec

When I try to do `rspec rspec_001.rb` I get the above error

How can I get around the error and run tests?

contents of `rspec_001.rb`:

```
require 'rspec'

class Dummy < Object
end

describe "a test" do
end 
```

I can't seem to use `bundle exec rspec rspec_001.rb` as this is not a Rails project with a Gemfile.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:28:05.660

`gem update rspec` fixed this and now the spec runs ("No examples found." is ok, there aren't any) -

```
rspec rspec_001.rb
No examples found.

Finished in 0.00011 seconds
0 examples, 0 failures 
```

# jquery - toggle hiding main div on sub div

> ID：15720758
> 
> 赞同：1
> 
> 时间：2013-03-30T16:22:58.310
> 
> 标签：jquery

I have a main `<div>` `.main-drawer` and sub `<div>` `.main-hover-container` and on click the main `<div>` hides the sub `<div>` so far so good. Now the issue I am faced with is that the sub `<div>` has a URL link but on click it's triggering the toggle of the main `<div>`.

How can i exclude the `.main-hover-container` to not be effected on click so the link in the sub `<div>` can be clicked.

```
 <script type="text/javascript">
$(document).ready(function(){
    $(".main-drawer").toggle(function(){
    $(this).closest(".main-drawer").find('.main-hover-container').stop(true).fadeTo( "fast", 1.0);
    }, function(){      
    $(".main-hover-container").fadeOut( "fast" );
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:26:55.490

You can check if the source of event is child div then you can skip execution of funciton.

```
$(".main-drawer").toggle(function(event){
    if($(event.target).hasClass("main-hover-container"))
         return; 
    $(this).closest(".main-drawer").find('.main-hover-container').stop(true).fadeTo( "fast", 1.0);
    }, 
    function(){      
        if($(event.target).hasClass("main-hover-container"))
              return; 
        $(".main-hover-container").fadeOut( "fast" );
}); 
```

# rest - GWT 上的 RESTlet 无法检索不受启用 GWT 的服务器支持的 RESTful 资源

> ID：15720761
> 
> 赞同：1
> 
> 时间：2013-03-30T16:23:03.367
> 
> 标签：rest, gwt, restlet

我试图让 GWT+RESTlet 与 RESTful 服务进行通信，该服务不是“GWT 感知”的。

在 GWT 客户端上，我做了类似的事情

```
Reference ref = new Reference("http://localhost:8080/control/programs/");
ProgramListResourceProxy clientResource = GWT.create( ProgramListResourceProxy.class );
clientResource.setReference( proxyRef );
clientResource.setFollowingRedirects( true );
clientResource.accept( MediaType.APPLICATION_JSON  );
clientResource.accept( MediaType.APPLICATION_XML  );

ProgramListResourceProxy resource = RestClient.createProgramListResource();
resource.retrieve( new Result<ArrayList<ProgramRef>>()
{
    @Override
    public void onFailure( Throwable caught )
    {
        while( caught != null)
        {
            Window.alert( "Error retrieving programs.\n" + caught.getMessage() );
            caught = caught.getCause();
        }
    }

    @Override
    public void onSuccess( ArrayList<ProgramRef> result )
    {
        Window.alert( "Programs: " + result );
        programs = result;
        view.setRowData( toStringList( result ) );
    }
}); 
```

如果我从浏览器请求资源，我会得到

```
[{"name":"niclas","link":{"action":"GET","path":"/control/programs/niclas/"}}] 
```

正如预期的那样。

但是在 GWT 中执行上面的代码时，我收到弹出警报，告诉我有问题，并且在嵌套异常中是；

```
Error retrieving programs.
Can't parse the enclosed entity because of its media type. 
Expected <application/x-java-serialized-object+gwt> but was 
<application/json>. Make sure you have added the 
org.restlet.client.ext.gwt.jar file to your server. 
```

请求/响应中的 MediaTypes 匹配，流量看起来像这样。

要求;

```
GET /control/programs/ HTTP/1.1
Host: localhost:8080
Connection: keep-alive
Cache-Control: max-age=0
Accept: application/json, application/xml
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Referer: http://localhost:8080/connect/Connect.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

回复;

```
HTTP/1.1 200 OK
Date: Sat, 30 Mar 2013 15:46:04 GMT
Content-Type: application/json; charset=UTF-8
Date: Sat, 30 Mar 2013 15:46:04 GMT
Accept-Ranges: bytes
Server: Restlet-Framework/2.1.2
Vary: Accept-Charset, Accept-Encoding, Accept-Language, Accept
Transfer-Encoding: chunked

4E
[{"name":"niclas","link":{"method":"GET","path":"/control/programs/niclas/"}}] 
```

谁能解释为什么 Restlet 期待“application/x-java-serialized-object+gwt”而不是资源中的 set MediaType？

是否与使用 org.restlet.client.resource.ClientProxy 有关？如果是这样，还有其他方法可以使用 RESTlet 执行这些异步请求吗？

我正在使用 RESTlet 2.1.2 和 GWT 2.2.0。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:11:12.600

我通常将 JsonpRequestBuilder 与覆盖类型一起使用（在此示例中为 JsonVideoList）：

```
JsonpRequestBuilder builder = new JsonpRequestBuilder();
builder.requestObject(url, new AsyncCallback<JsonVideoList>() {
    @Override
    public void onFailure( Throwable exception) {
    }

    @Override
    public void onSuccess(JsonVideoList list) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:56:34.130

我在谷歌搜索你的问题时发现[了这个问题，这可能是连接的。](http://restlet.tigris.org/ds/viewMessage.do?dsForumId=4447&dsMessageId=2994486)

以下内容可能没有效率，但您也可以查看[restyGWT](http://restygwt.fusesource.org)进行休息调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:27:02.873

归根结底，这其中包含了几个问题，我想我最好分享一下我的发现；

1.  我没有意识到我有一个“同源”问题。这是通过在我的 Rest 服务器的 GWT 服务端口上使用透明代理解决的。这似乎也将 Rest 服务器的身份验证正确地转发到浏览器中的 GWT 应用程序。

2.  Restlet 在 Editions 中的包装似乎是一个非常好的主意。但是要让 IntelliJ IDEA 能够使用这些以及共享的 DTO 模块设置 GWT 调试环境真的很困难。我认为关于 Restlet 确定使用哪些内容类型以及不使用哪些内容类型的方式，我还有其他问题。一天结束时，我说服自己不要打扰共享的 DTO 库，而是；

    *   服务器端使用 Restlet 的 Jackson 扩展和 pojo 类作为 DTO。
    *   在 GWT 方面，我要求 Restlet 只处理 Representation 类型，并使用 GWT 中的 AutoBean 特性进行序列化。（见下文）

AutoBean 很棒；

```
public interface Program
{
    String getName();

    void setName( String name );

    List<Block> getBlocks();
    void setBlocks(List<Block> blocks);

    List<Connection> getConnections();
    void setConnections(List<Connection> connections );

    public static class Factory
    {
        public static Program make() {
            AutoBean<Program> ref = ModelFactory.instance.program();
            return ref.as();
        }

        public static String toJson(Program ref) {
            AutoBean<Program> bean = AutoBeanUtils.getAutoBean( ref );
            return AutoBeanCodex.encode( bean ).getPayload();
        }

        public static Program fromJson(String json) {
            AutoBean<Program> bean = AutoBeanCodex.decode( ModelFactory.instance, Program.class, json );
            return bean.as();
        }
    }
} 
```

为了使示例完整，我的 ModelFactory 具有这些的创建方法，这些方法也完全由 GWT 处理；

```
public interface ModelFactory extends AutoBeanFactory
{
    ModelFactory instance = GWT.create( ModelFactory.class );
    AutoBean<Program> program();
    AutoBean<ProgramRefList> programRefList();
    :
} 
```

一个不明显的问题是如何处理顶级 JSON 列表，因为 AutoBean 将 JSON 键与接口中的字段相匹配。但我发现了一个巧妙的小技巧，可以在以下同一程序的片段中看到；

```
public interface ProgramRefList
{
    List<ProgramRef> getList();

    public static class Factory
    {
        public static ProgramRefList make()
        {
            AutoBean<ProgramRefList> ref = ModelFactory.instance.programRefList();
            return ref.as();
        }

        public static String toJson( ProgramRefList ref )
        {
            AutoBean<ProgramRefList> bean = AutoBeanUtils.getAutoBean( ref );
            return AutoBeanCodex.encode( bean ).getPayload();
        }

        public static ProgramRefList fromJson( String json )
        {
            json = "{ \"list\": " + json + "}";
            AutoBean<ProgramRefList> bean = AutoBeanCodex.decode( ModelFactory.instance, ProgramRefList.class, json );
            return bean.as();
        }
    }
} 
```

顶级列表被伪造为具有单个键的另一个对象（在本例中为“列表”），然后可以从 getList() 方法访问该对象。

然后在 Rest 客户端代码中非常简单地使用它；

```
 ClientResource resource = RestClient.createProgramList( new Uniform()
    {
        @Override
        public void handle( Request request, Response response )
        {
            Logger.trace( this, "handle(" + request + "," + response + ")" );
            try
            {
                if( response.isEntityAvailable() )
                {
                    String jsonText = response.getEntity().getText();
                    programs = ProgramRefList.Factory.fromJson( jsonText );
                    ArrayList<String> rowData = toStringList( programs );
                    view.setRowData( rowData );
                }
            }
            catch( Exception e )
            {
                Logger.handleException( this, "loadProgramsList()", e );
            }
        }
    } );
    resource.get(); 
```

# javascript - 带有 javascript 和 css 的灯箱

> ID：15720762
> 
> 赞同：0
> 
> 时间：2013-03-30T16:23:07.433
> 
> 标签：javascript, html, css, lightbox

我试图创建一个灯箱，以便我必须在灯箱中打开一个表单。下面是我的 javascript、html 和 css 代码。一切正常。我唯一的问题是，如果我开始最大化或最小化资源管理器的窗口，包含表单的白色内容不会保持与我在开始时给出的相同的固定大小。我希望它保持我在开始时给它的大小而不改变大小，同时最小化或最大化窗口（我希望它就像灯箱在显示照片时使用 facebook）。任何想法如何做到这一点？

```
p><a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'"><img src="img/add.jpg"/></a></p>
    <div id="light" class="white_content">

<table border="0">
<td >
<fieldset style="width:530px; padding-left:5px; background-color:white " >
<h2><font color="#5D5D5D" size="2" face="caecilia-light', face="helvetica,arial,sans-serif" >
</br>
    School</br>
    <input name="school_1" type="text" size="73" value="<?php echo $user_data_profile_education['school_1'];     ?>"/>
    </br></br>
    Study</br>
    <input name="field_1" type="text" size="73" value="<?php echo $user_data_profile_education['field_1'];     ?>"/>
    </br></br>
    Specialized </br>
    <input name="specialized_subject_1" type="text" size="73" value="<?php echo $user_data_profile_education['specialized_subject_1'];     ?>"/>
    </br></br>
    Degree</br>
    <input name="degree_1" type="text" size="73" value="<?php echo $user_data_profile_education['degree_1'];     ?>"/>
    </br></br>
    Grade</br>
    <input name="grade_1" type="text" size="73" value="<?php echo $user_data_profile_education['grade_1'];     ?>"/>

        </h2></font>
    </fieldset>
 </td>
</table>

<a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'"> 
 </br><img src="img/done_editing.jpg"/> </a></div>
 <div id="fade" class="black_overlay"></div> 
```

这是我的 CSS ：

```
 .black_overlay{
        display: none;
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 220%;
        background-color: grey;
        z-index:1001;
        -moz-opacity: 0.8;
        opacity:.80;
        filter: alpha(opacity=80);
    }

    .white_content {
        display: none;
        position: absolute;
        top: 45%;
        left: 30%;
        width: 32%;
        height: 51%;
        padding: 30px;
        padding-left:50px;
        border: 5px solid green;
        background-color: white;
        z-index:1002;
        overflow: auto;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:40:55.000

看起来您使用百分比而不是固定单位来设置灯箱的大小。

试试这个：

```
.white_content {
  width: 320px;
  height: 480px;
} 
```

# python - Repeat a pattern while using re.sub

> ID：15720763
> 
> 赞同：0
> 
> 时间：2013-03-30T16:23:12.633
> 
> 标签：python, regex, python-3.x

I would like to modify a string that looks like this:

```
...some fruit names... ORANGE ...some fruit names... 
```

into something like this:

```
...some fruit names... ORANGE APPLE ...some fruit names... 
```

With `sed` I would do something like:

```
sed 's/ORANGE/& APPLE/' <<< $the_string 
```

However I don't know how to do this kind of thing with Python's `re` module. Is there a special sign which fonction is equivalent to the `&` of `sed` ? I haven't found anything like this in the documentation.

So far what I do is to extract the pattern `ORANGE` from the string (to get it's litteral form), append to it the string `APPLE`, and then substitute to `ORANGE` the string that I've formed. But it is very inefficient, and I would like to do the same thing with a single regexp.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:29:45.510

`re.sub('(ORANGE)',r' \1 APPLE', str)` will do it

# azure - 有什么方法可以监控 CloudStorageAccount (Azure SDK) 的数据使用情况

> ID：15720768
> 
> 赞同：1
> 
> 时间：2013-03-30T16:23:48.167
> 
> 标签：azure, azure-monitoring

是否有任何方法可以监控 Azure SDK 中 CloudStorageAccount 的数据使用情况？如果可能的话，还有请求的数量，因为这是定义价格的两件事。

我想展示一下使用我的应用程序的成本。

# wordpress - Bootstrap：带键盘控制的轮播

> ID：15720776
> 
> 赞同：2
> 
> 时间：2013-03-30T16:24:34.907
> 
> 标签：wordpress, twitter-bootstrap, keyboard, carousel

有没有人能够使用键盘控件实现 Twitter Bootstrap 轮播？我知道这将在下一个版本中实现，但现在我想知道你们中是否有人能够让它工作。

这是我当前的代码：

```
<script type="text/javascript">

  jQuery(document).keypress(function(event) {

  if (event.keyCode === RIGHT_ARROW) {
  $('a.carousel-control.right').trigger('click');

  }

  if (event.keyCode === LEFT_ARROW) {

  $('a.carousel-control.left').trigger('click');

  }

  });

</script> 
```

但我对此无能为力。有任何想法吗？

编辑：这是我正在运行的 Wordpress 代码...

```
 <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                        <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article" itemscope itemtype="http://schema.org/BlogPosting">

                            <?php if ( $post->post_type == 'portfolios' && $post->post_status == 'publish' ) {
                            $attachments = get_posts( array(

                            'post_type' => 'attachment',
                            'posts_per_page' => -1,
                            'post_parent' => $post->ID,
                            'exclude' => get_post_thumbnail_id(),
                            'orderby' => 'menu_order',
                            'order' => 'ASC'    
                                ) );

                            ?>

                            <?php if ( $attachments ) {  
                            $the_rest = array_slice($attachments, 0, 100);
                            ?>      

                            <div id="carousel-<?php the_ID(); ?>" class="featured-carousel carousel slide carousel-fade">

                                <div class="carousel-inner">

                                    <?php 
                                    global $post;
                                    $post_num = 0;  
                                    foreach( $the_rest as $attachment) :
                                    $image = wp_get_attachment_image_src( $attachment->ID, 'orion-thumb-900', false );
                                    $post_num++;
                                    ?>          

                                    <div class="item <?php if($post_num == 1){ echo 'active'; } ?>">
                                    <?php echo "<img src='" . $image[0] . "'>"; ?>  
                                      <div class="container">
                                      </div> <!-- /.container -->
                                    </div> <!-- /.item -->

                                    <?php endforeach; ?>          

                                    <?php } ?>

                                    <?php } ?>      

                                </div> <!-- /.carousel-inner -->

                                    <a class="left carousel-control" href="#carousel-<?php the_ID(); ?>" data-slide="prev">&lsaquo;</a>
                                    <a class="right carousel-control" href="#carousel-<?php the_ID(); ?>" data-slide="next">&rsaquo;</a>

                            </div> <!-- /.carousel -->

                                <section class="entry-content clearfix">

                                    <?php the_content(); ?>

                                    <?php orion_related_posts(); ?>

                                </section> <!-- end article section -->

                        </article> <!-- end article -->

                    <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-28T17:24:40.750

感谢那，

轮播事件和设备支持会更好 - 现在“点击”很糟糕！

```
 $(document).bind('keyup', function(e) {
        if(e.which == 39){
            $('.carousel').carousel('next');
        }
        else if(e.which == 37){
            $('.carousel').carousel('prev');
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T19:09:08.700

这是正确的代码，感谢 DavidChase 和 Flemingslone！

```
<script type="text/javascript">

jQuery(document).bind('keyup', function(e) {

  if (e.keyCode==39) {
      jQuery('a.carousel-control.right').trigger('click');
  }   

  else if(e.keyCode==37){
      jQuery('a.carousel-control.left').trigger('click');
  }

});

</script> 
```

# java - JTable 单元格未更新

> ID：15720782
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:24:47.767
> 
> 标签：java, swing, jtable, abstracttablemodel

我刚上高中，是编程新手。我正在处理我的第一个任务，但遇到了一个问题。我到处寻找，但没有找到任何帮助。我编写了一个接受输入并在 JTable 中输出数据的 gui。一切看起来都很好，只是当我输入新输入时表格没有更新，即先前显示的日期不会更改为新值。我怀疑下面显示的 AbstractTableModel 的实现是导致故障的原因，因为我只是不知道如何覆盖方法 isCellEditable 和 setValueAt。有人可以进行必要的更正并给我任何额外的信息来帮助我完成我的项目吗？如果您能尽快回复我，我将不胜感激。

附言。nh 和 vh 是整数数组，proc_1 和 proc_ 是字符串数组，并且表被添加到 jtabbedpane，如果这很重要的话......

```
public class TableModel extends AbstractTableModel  {
    int numRows;
    String colNames[] = { "NH", "Horse Names", "VH",
                          "Proc. I", "Proc. II" };
    TableModel()  {
        super();
        numRows = fnh;
    }   

    @Override
    public int getRowCount()  {
       return numRows;
    }

    @Override
    public int getColumnCount()  {
        return 5;
    }

    @Override
    public String getColumnName( int c ) {
        return colNames[c];
    }

    @Override
    public Object getValueAt( int r, int c )  {
        if ( c == 0 ) 
            return nh[r];
        else if ( c == 1 )
            return hNam[r];
        else if ( c == 2 )
            return vh[r] ;
        else if ( c == 3 )
            return proc_1[r];
        else 
            return proc_2[r];    
    }   

    @Override
    public boolean isCellEditable( int r, int c )  {
        return true;
    }

    @Override
    public void setValueAt( Object v, int r, int c )  {
        fireTableCellUpdated( r, c );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:27:40.193

*   您的`setValueAt(...)`方法在模型中没有设置任何值。它所做的只是触发通知方法，仅此而已。
*   此外，您的模型本质上是无用的，因为它没有数据“核心”，没有任何东西可以保存它应该保存的数据。通常这是一个集合，例如 ArrayList。
*   我认为您需要重新阅读 JTable 教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:30:28.877

这里你`setValueAt`应该看起来像

```
public void setValueAt( Object v, int r, int c )  {
    if ( c == 0 ) 
        nh[r] = (Integer)v;
    else if ( c == 1 )
        hNam[r] = (String)v;
    else if ( c == 2 )
        vh[r] = (Integer)v;
    else if ( c == 3 )
        proc_1[r] =(String)v;
    else 
        proc_2[r] =(String) v;
    fireTableCellUpdated( r, c );
} 
```

在您的项目完成后。`JTable`在 oracle 官方网站上阅读以完成教程。在那里，您将全面了解如何以`JTable`正确的方式使用。这是教程链接：[`How to use JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# ruby - Why does this regular expression return incorrect values?

> ID：15720787
> 
> 赞同：0
> 
> 时间：2013-03-30T16:25:22.543
> 
> 标签：ruby, regex

Say I have a string as follows:

```
"auto: true; server: false;" 
```

...and I want a regular expression to create a hash of these settings. I have the below code:

```
# class Configurer...
def spit(path = "", *args)
  spat = Hash.new
  if File.file?(path)
    # Parse file
  else
    args.each do |arg|
      begin
        if path.include? arg + ":"
          strip = path.match(/#{arg}:\s(.*);/)
          spat[arg] = strip[1]
        end
      rescue
        return "Error when parsing '#{arg}' in direct input."
      end
    end
  end
  spat
end 
```

When something like:

```
config = Configurer.new
puts config.spit("auto: true; server: false;", "auto", "server") 
```

...is ran, the output is an incorrect hash of:

```
# => {"auto"=>"true; server: false", "server"=>"false"} 
```

Why is that? When I [parse a file (line by line)](https://stackoverflow.com/questions/15703826/why-does-this-only-return-the-first-setting) and use the same regular expression I get the desired hash. Why is this not the case with this method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:29:36.940

Use a [non-greedy repetition](http://www.regular-expressions.info/repeat.html#greedy) instead:

```
/#{arg}:\s(.*?);/ 
```

# c# - 构建NHibernate查询抛出-从范围''引用的类型的变量'x'，但未定义

> ID：15720788
> 
> 赞同：1
> 
> 时间：2013-03-30T16:25:27.813
> 
> 标签：c#, asp.net-mvc, nhibernate

我正在构建一个查询以返回与过滤器值匹配的组件，但是当我尝试添加一个新过滤器时遇到了

> 从范围“”引用的“组件”类型的变量“c”，但未定义

我一直在缓慢地建立查询，并按照我的意愿进行以下工作

```
public ActionResult Index(string searchString, string typeFilter)
{

  Supplier supplierAlias = null;
  var query = Session.QueryOver<Component>()
                   .JoinAlias(x => x.Supplier, ()=> supplierAlias);

  if (!string.IsNullOrWhiteSpace(searchString))
      query = query.WhereRestrictionOn(c => c.Name)
                 .IsInsensitiveLike(String.Format("%{0}%", searchString));

  switch (sortOrder)
  {
      case "Component desc":
          query = query.OrderBy(c => c.Name).Desc;
          break;
      case "Type":
          query = query.OrderBy(c=>c.ComponentType).Asc;
          break;
      case "Type desc":
          query = query.OrderBy(c=>c.ComponentType).Desc;
          break;
      default:
          query = query.OrderBy(c => c.Name).Asc;
          break;
  }

  var result = query.List();
  return View(result);
} 
```

但是现在我想在其中添加用户选择`Type`要过滤的选项，其方式与`searchString`当前有条件地用于添加 Where 的方式相同。如果`typeFilter`给出了，那么在哪里添加另一个，但是当我尝试时，我会抛出异常。

I have tried with a `Where`, `WhereRestrictionOn` and `And` - I've also tried moving the `typeFilter` block above the `searchString` block but they all give the same result - which is the exception.

```
if (!string.IsNullOrWhiteSpace(typeFilter))
    query = query.And(c=>c.ComponentType.ToString() == typeFilter); 
```

the `ComponentType` is an enum that I want to allow the user to filter on.

**Edit (the answer)**
OK the answer was to use `Enum.Parse` as Rob G said; it is a bit 'fiddly' so I'm posting the **code that works** here because it's easier to read here than in a comment.

```
query = query.Where(c=> c.ComponentType == (Component.ComponentCode)Enum.Parse(typeof(Component.ComponentCode), typeFilter)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:36:55.377

Use Enum.TryParse

```
TheEnum enumType;
if (!string.IsNullOrWhiteSpace(typeFilter))
     query = query.And(c => Enum.TryParse<TheEnum>(typeFilter, out enumType) && enumType== c.ComponentType) 
```

# facebook - FACEBOOK O-AUTH 对话框在加载时自动打开

> ID：15720790
> 
> 赞同：0
> 
> 时间：2013-03-30T16:25:59.240
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有一个登录页面，我将在其中提供 facebook 登录的链接，但不幸的是，一旦我登陆登录页面，facebook oauth 对话框就会打开。我想要点击链接而不是页面加载。有什么帮助吗？

```
<p><a onclick='login(); return false;'>Login</a></p>
<script>

    // Additional JS functions here
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '3423243443', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow server to access session,
            xfbml: true, // enable XFBML and social plugins
            oauth: true // enable OAuth 2.0
            // channelUrl: 'http://www.yourdomain.com/channel.html' //custom channel
        });
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // connected
                alert("connected1"+response.authResponse.expiresIn);

            } else if (response.status === 'not_authorized') {
                // not_authorized
                login();
            } else {
                // not_logged_in
                alert("not logged in");
                login();
            }
        },true);

    };

    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

    /*function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                testAPI(response)
                // connected
                alert("connected2   "+response.authResponse);
            } else {
                // cancelled
                alert("cancelled");
                alert("cancelled"+response.authResponse);
            }
        });
    } ;

    function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.email + '.');
        });
    }  ;*/

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:30:36.183

因为您在每个页面加载时在 window.fbAsyncInit 中插入了调用登录函数的 FB.getLoginStatus。

您应该仅通过一个按钮触发 FB.getLoginStatus，并使用 onclick 触发器。

这是一个小例子： http: [//facebook.stackoverflow.com/a/15720747/2212966](http://facebook.stackoverflow.com/a/15720747/2212966)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T18:36:32.447

我用 jquery 按钮单击事件处理程序包装了我的。这是我的代码片段：

```
window.fbAsyncInit = function() {

      FB.init({
        appId      : 'my-app-id',//use your facebook appId in here
        status     : false,
        cookie     : true,
        xfbml      : true,
        version    : 'v2.2'
      });

      jQuery('#signUpWithFacebookButtonId').click(function(){
          FB.login(function(response) {
              if (response.status === 'connected') {
                console.log('Logged into your app and Facebook.');
              } else if (response.status === 'not_authorized') {
                console.log('The person is logged into Facebook, but not your app.');
              } else {
                console.log('The person is not logged into Facebook, so we are not sure if they are logged into this app or not.');
              }
          }, {scope: 'public_profile, email'});
      });

  };//end window.fbAsyncInit function 
```

# python - Python：按部分键对多级字典进行排序

> ID：15720793
> 
> 赞同：2
> 
> 时间：2013-03-30T16:26:31.160
> 
> 标签：python, date, sorting, dictionary, key

我有这样的字典：

```
{
   '28.10.11/D/text1/' : {key:value1},
   '27.01.11/D/text2/' : {key:value2},
   '07.11.12/D/text3/' : {key:value3}
} 
```

部分密钥基于日期，以“%d.%m.%Y”格式设置。需要按日期对所有字典键进行排序。值必须以相同的格式保存。例子：

```
{
   '27.01.11/D/text2/' : {key:value2},   
   '28.10.11/D/text1/' : {key:value1},
   '07.11.12/D/text3/' : {key:value3}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:35:46.740

您无法对标准字典进行排序，但可以对项目进行排序和显示。

```
from datetime import datetime

D = {'28.10.11/D/text1/' : {'key':'value1'},
     '27.01.11/D/text2/' : {'key':'value2'},
     '07.11.12/D/text3/' : {'key':'value3'}}

for k in sorted(D,key=lambda k: datetime.strptime(k[:8],"%d.%m.%y")):
    print(k,D[k]) 
```

输出：

```
27.01.11/D/text2/ {'key': 'value2'}
28.10.11/D/text1/ {'key': 'value1'}
07.11.12/D/text3/ {'key': 'value3'} 
```

如果要使用列表：

```
from datetime import datetime
from pprint import pprint

L = [('28.10.11/D/text1/' , {'key':'value1'}),
     ('27.01.11/D/text2/' , {'key':'value2'}),
     ('07.11.12/D/text3/' , {'key':'value3'})]

L.sort(key=lambda k: datetime.strptime(k[0][:8],"%d.%m.%y"))
pprint(L) 
```

输出：

```
[('27.01.11/D/text2/', {'key': 'value2'}),
 ('28.10.11/D/text1/', {'key': 'value1'}),
 ('07.11.12/D/text3/', {'key': 'value3'})] 
```

最后，如果您仍然想要字典行为，OrderedDict 会记住插入的顺序键，因此：

```
from collections import OrderedDict
from datetime import datetime
from pprint import pprint

D = {'28.10.11/D/text1/' : {'key':'value1'},
     '27.01.11/D/text2/' : {'key':'value2'},
     '07.11.12/D/text3/' : {'key':'value3'}}

OD = OrderedDict(sorted(D.items(),
                 key=lambda k: datetime.strptime(k[0][:8],"%d.%m.%y"))
pprint(OD) 
```

输出：

```
{'27.01.11/D/text2/': {'key': 'value2'},
 '28.10.11/D/text1/': {'key': 'value1'},
 '07.11.12/D/text3/': {'key': 'value3'}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:40:27.280

# 大纲

使用`sorted`带`key`参数的函数。编写`key`将字符串转换为 a 的函数`Datetime`，并根据`Datetime`.

# 代码

```
def remap_key(key):
    from datetime import datetime
    a = key.split('/')[0]
    return datetime.strptime(a, "%d.%m.%y") 
```

# 结果

```
>>> d = {
...    '27.01.11/D/text2/' : "a",   
...    '28.10.11/D/text1/' : "b",
...    '07.11.12/D/text3/' : "c"
... }
>>> 
>>> def remap_key(key):
...     from datetime import datetime
...     a = key.split('/')[0]
...     return datetime.strptime(a, "%d.%m.%y")
... 
>>> sorted(d, key=remap_key)
['27.01.11/D/text2/', '28.10.11/D/text1/', '07.11.12/D/text3/'] 
```

或排序`iteritems`：

```
>>> def remap_key(key_pair):
...     from datetime import datetime
...     key = key_pair[0]
...     a = key.split('/')[0]
...     return datetime.strptime(a, "%d.%m.%y")
... 
>>> sorted(d.iteritems(), key=remap_key)
[('27.01.11/D/text2/', 'a'), ('28.10.11/D/text1/', 'b'), ('07.11.12/D/text3/', 'c')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T16:49:25.483

作为另一种选择，您可以将[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)与 datetime 结合使用（如 hughdbrown 所述）：

```
>>> from collections import OrderedDict
>>> from datetime import datetime
>>> d = {
   '28.10.11/D/text1/' : {'key1':'value1'},
   '27.01.11/D/text2/' : {'key2':'value2'},
   '07.11.12/D/text3/' : {'key3':'value3'}
}
>>> OrderedDict(sorted(d.items(), key=lambda t: datetime.strptime(t[0][:8], "%d.%m.%y"))) 
```

The result:

```
OrderedDict([('27.01.11/D/text2/', {'key2': 'value2'}), ('28.10.11/D/text1/', {'key1': 'value1'}), ('07.11.12/D/text3/', {'key3': 'value3'})]) 
```

You'll get precisely the order you are looking for, and each part of the date will be compared to corresponding parts of other dates in a regular fashion.

# android - 在不同设备上访问相同的 android 日历事件

> ID：15720802
> 
> 赞同：0
> 
> 时间：2013-03-30T16:27:50.530
> 
> 标签：android, calendar

我正在编写一个应用程序，它使用日历提供程序 API 在 android 日历（谷歌日历）中创建、更新和删除事件。应该可以从不同的设备操纵该应用程序创建的事件。

根据[http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html) ，事件存储在设备上的一个表（CalendarContract.Events）中，EVENT_ID对应于表中的_ID字段。这个 EVENT_ID 是特定于设备的，这*似乎是合乎逻辑的。*

假设我的应用在“我的共享日历”的“设备 1”上创建了一个 ID 为 1 的事件“我的事件”。给定与共享日历同步的第二个设备，来自第一个设备的设备特定 EVENT_ID 1 在第二个设备上是无用的。

现在，我的问题是：如何在第二台设备上识别“我的活动”？这可以通过日历提供程序 API 实现，还是我必须使用谷歌日历 API？

# c# - 网络浏览器禁用所有音频输出 - 从在线广播到 youtube

> ID：15720803
> 
> 赞同：11
> 
> 时间：2013-03-30T16:27:51.860
> 
> 标签：c#, wpf, browser

我的浏览器：

XAML：

```
//...
xmlns:my="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
//...
<my:WindowsFormsHost Name="windowsFormsHost"/> 
```

C#背后的代码：

```
System.Windows.Forms.WebBrowser Browser = new System.Windows.Forms.WebBrowser();
windowsFormsHost.Child = Browser; 
```

我的问题是如何禁用所有音频输出。

我找到了这个：

C＃：

```
private const int Feature = 21; //FEATURE_DISABLE_NAVIGATION_SOUNDS
private const int SetFeatureOnProcess = 0x00000002;

[DllImport("urlmon.dll")]
[PreserveSig]
[return: MarshalAs(UnmanagedType.Error)]
static extern int CoInternetSetFeatureEnabled(int featureEntry,
  [MarshalAs(UnmanagedType.U4)] int dwFlags, 
  bool fEnable); 
```

很好，但是这段代码只禁用“点击”声音，所以在这种情况下它是无用的。

我只想让我的应用程序 100% 静音，完全没有声音。

我已经在这个网络浏览器中读到它需要通过 Windows 声音来完成，但我真的不能相信我不能在代码中做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-21T02:42:13.197

这是您可以轻松做到的方法。虽然不是特定于 WebBrowser，但可以满足您的要求：*我只希望我的应用程序 100% 静音，根本没有声音。*

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WinformsWB
{
    public partial class Form1 : Form
    {
        [DllImport("winmm.dll")]
        public static extern int waveOutGetVolume(IntPtr h, out uint dwVolume);

        [DllImport("winmm.dll")]
        public static extern int waveOutSetVolume(IntPtr h, uint dwVolume);

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // save the current volume
            uint _savedVolume;
            waveOutGetVolume(IntPtr.Zero, out _savedVolume);

            this.FormClosing += delegate 
            {
                // restore the volume upon exit
                waveOutSetVolume(IntPtr.Zero, _savedVolume);
            };

            // mute
            waveOutSetVolume(IntPtr.Zero, 0);
            this.webBrowser1.Navigate("http://youtube.com");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T18:39:16.900

您也可以尝试使用[DISPID_AMBIENT_DLCONTROL](http://msdn.microsoft.com/en-us/library/aa770041%28VS.85%29.aspx)

> DLCTL_DLIMAGES, DLCTL_VIDEOS, and DLCTL_BGSOUNDS: Images, videos, and background sounds will be downloaded from the server and displayed or played if these flags are set. They will not be downloaded and displayed if the flags are not set.

# joomla - 如何在 Joomla 中按月对文章进行分组

> ID：15720809
> 
> 赞同：1
> 
> 时间：2013-03-30T16:29:06.047
> 
> 标签：joomla, joomla2.5

如何获取按月分组的文章，如下所示：
1\. 一月
文章 1
文章 2
2\. 二月
文章 3
文章 4
...

没有硬编码默认的 joomla 组件和模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:17:53.473

您可以为每个月创建一个类别，然后将文章放在相应的类别中。

```
-Category YEAR
--Category January
---Article 1
---Article 2
--Category Ferbuary
---Article 1
---Article 2 
```

...等等

或者

您可以手动设置文章的创建日期（如果您不需要显示真实的创建日期），然后按创建日期对文章进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T22:44:55.767

You can put all your articles in a single category, add an "Articles Category" module, and then configure the grouping option to month.

See screenshot:

[![joomla date grouping](../Images/724c7d9eacd086b4d65d1154694c87bd.png)](https://i.stack.imgur.com/AaBrU.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:12:33.060

[http://extensions.joomla.org/extensions/news-display/articles-display/articles-structured-lists/10731](http://extensions.joomla.org/extensions/news-display/articles-display/articles-structured-lists/10731)

检查这个扩展它显示按年和月分组的文章（以层次结构呈现）

# java - 如何自动查找 Java 字节码中的相似之处？

> ID：15720810
> 
> 赞同：3
> 
> 时间：2013-03-30T16:29:09.537
> 
> 标签：java, bytecode

不确定标题是否是最具描述性的方式，但它与我能想到的一样具有描述性。

无论如何，关于这个问题。我想知道如何在字节码中找到相似之处。我的意思是很难正确解释（至少对我来说），所以我将举一个例子。

我有 aba.class 和 nhf.class。这些类是我制作的游戏中的混淆类。我提供了这个游戏的修改版本，它只是在某些地方进行了一些小的代码更改，但由于该游戏正在出售，因此每次有新的更新时都会重新混淆。我希望能够通过检查类的字节码有多相似来判断哪些类已更改为重新混淆中的内容。我知道这是可能的，但我不知道如何检查如何做到这一点。

是否有可以解析字节码并检查其相似程度的库、程序或其他东西，还是我必须自己编写？如果我必须自己写，我会很感激有人指出我正确的方向（或将我链接到可能有帮助的东西等）。

此外，我正在考虑使用代码而不是手动执行此操作，以防不明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T14:55:24.347

可以有一个更简单的解决方案：

我不知道您使用什么混淆器（可能是 Proguard），但它可能会生成一个映射，将混淆的类名映射到非混淆的类名。（如果没有，您可以切换到生成此类地图的 Produard。）

因此，您可以将混淆的类名转换为原始类名（反之亦然），前提是您拥有该版本的映射。

因此，您可以通过匹配原始类名从这两个映射中制作这样的映射。

# c# - Should I call Stop before reading ElapsedMilliseconds?

> ID：15720813
> 
> 赞同：33
> 
> 时间：2013-03-30T16:29:31.647
> 
> 标签：c#, stopwatch

Can I get the elapsed time since I have called `Start` on a stopwatch using `ElapsedMilliseconds` without calling `Stop`? I have searched a lot round the internet but only saw examples where `ElapsedMilliseconds` is called after `Stop`. Is this value filled on a call to `Stop` or is it always correct?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-30T16:30:39.477

> You can query the properties Elapsed, ElapsedMilliseconds, and ElapsedTicks while the Stopwatch instance is running or stopped. The elapsed time properties steadily increase while the Stopwatch is running; they remain constant when the instance is stopped.

— From [https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.elapsedmilliseconds#remarks](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.elapsedmilliseconds#remarks)

# parameters - 车把局部参数传递

> ID：15720815
> 
> 赞同：1
> 
> 时间：2013-03-30T16:29:37.133
> 
> 标签：parameters, handlebars.js, partials

我正在努力将参数传递给部分车把。我看到线程[通过车把部分](https://stackoverflow.com/questions/11523331/passing-variables-through-handlebars-partial)和[车把传递变量 - 是否可以部分访问父上下文？](https://stackoverflow.com/questions/9411538/handlebars-is-it-possible-to-access-parent-context-in-a-partial)但仍然无法使其工作。

我调用部分（部分称为事务）的html（在haml中）的相关位置如下所示：

```
{{#each totalsByDate}}
{{> transactions this}}
{{/each}} 
```

在部分中，我试图打印上下文，但总是得到“未定义”的上下文。

```
{{showParams this}} 
```

这里 showParams 只是一个辅助方法来记录传递的参数：

```
Handlebars.registerHelper('showParams', function(params) {
    console.log("HANDLEBARS params: ", params);
}); 
```

我认为在调用部分时传递“this”参数应该可以解决问题，但它似乎不起作用。

想法？

# android - Android中centerColor渐变的扩展宽度

> ID：15720820
> 
> 赞同：4
> 
> 时间：2013-03-30T16:29:53.603
> 
> 标签：android, android-layout

我有以下目前工作正常

```
<item>
    <shape android:shape="rectangle">
        <gradient android:startColor="#5790A6"
            android:endColor="#DC3626" android:angle="180"
            android:centerColor="#000000" />
    </shape>
</item> 
```

它创建一个具有 3 种颜色渐变的矩形。但是我正在尝试扩大黑色中心渐变的宽度，以便开始和结束颜色各占 5%。

从左到右。5% 红色，90% 黑色，5% 蓝色。

centerX 的使用只是看起来移动中心颜色，扩展开始/结束颜色。

有没有办法做到这一点？

# java - 如何在 jar 文件中获取类的名称？

> ID：15720822
> 
> 赞同：127
> 
> 时间：2013-03-30T16:30:15.747
> 
> 标签：java, file, class, jar, classloader

我有一个 JAR 文件，我需要获取此 JAR 文件中所有类的名称。我怎样才能做到这一点？

我在谷歌上搜索了一下，看到了一些关于 JarFile 或 Java 的东西，`ClassLoader`但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-03-30T16:39:04.593

您可以使用 Java`jar`工具。将 jar 文件的内容以 txt 文件形式列出，您可以看到 jar 中的所有类。

```
jar tvf jarfile.jar 
```

> -t 列出归档目录
> 
> -v 在标准输出上生成详细输出
> 
> -f 指定归档文件名

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-03-30T16:46:31.387

不幸的是，Java 没有提供一种简单的方法来列出“本机”JRE 中的类。这给您留下了两个选择： (a) 对于任何给定的 JAR 文件，您可以列出该 JAR 文件中的条目，找到这些`.class`文件，然后确定每个`.class`文件代表哪个 Java 类；或（b）您可以使用为您执行此操作的库。

## 选项 (a)：手动扫描 JAR 文件

在此选项中，我们将填写`classNames`包含在 .jar 文件中的所有 Java 类的列表`/path/to/jar/file.jar`。

```
List<String> classNames = new ArrayList<String>();
ZipInputStream zip = new ZipInputStream(new FileInputStream("/path/to/jar/file.jar"));
for (ZipEntry entry = zip.getNextEntry(); entry != null; entry = zip.getNextEntry()) {
    if (!entry.isDirectory() && entry.getName().endsWith(".class")) {
        // This ZipEntry represents a class. Now, what class does it represent?
        String className = entry.getName().replace('/', '.'); // including ".class"
        classNames.add(className.substring(0, className.length() - ".class".length()));
    }
} 
```

## 选项 (b)：使用专门的反射库

### 番石榴

[Guava](https://github.com/google/guava)[`ClassPath`](https://google.github.io/guava/releases/14.0/api/docs/com/google/common/reflect/ClassPath.html)至少从 14.0 开始就有，我一直使用并喜欢它。一件好事`ClassPath`是它不会加载它找到的类，这在您扫描大量类时很重要。

```
ClassPath cp=ClassPath.from(Thread.currentThread().getContextClassLoader());
for(ClassPath.ClassInfo info : cp.getTopLevelClassesRecurusive("my.package.name")) {
    // Do stuff with classes here...
} 
```

### 思考

我没有亲自使用[过 Reflections 库](https://github.com/ronmamo/reflections)，但它似乎很受欢迎。网站上提供了一些很好的示例，例如这种快速加载*任何*JAR 文件提供的包中的所有类的方法，这也可能对您的应用程序有用。

```
Reflections reflections = new Reflections("my.project.prefix");

Set<Class<? extends SomeType>> subTypes = reflections.getSubTypesOf(SomeType.class);

Set<Class<?>> annotated = reflections.getTypesAnnotatedWith(SomeAnnotation.class); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-10-24T18:17:59.433

也许您正在寻找`jar`命令来获取终端中的类列表，

```
$ jar tf ~/.m2/repository/org/apache/spark/spark-assembly/1.2.0-SNAPSHOT/spark-assembly-1.2.0-SNAPSHOT-hadoop1.0.4.jar 
META-INF/
META-INF/MANIFEST.MF
org/
org/apache/
org/apache/spark/
org/apache/spark/unused/
org/apache/spark/unused/UnusedStubClass.class
META-INF/maven/
META-INF/maven/org.spark-project.spark/
META-INF/maven/org.spark-project.spark/unused/
META-INF/maven/org.spark-project.spark/unused/pom.xml
META-INF/maven/org.spark-project.spark/unused/pom.properties
META-INF/NOTICE 
```

在哪里，

```
-t  list table of contents for archive
-f  specify archive file name 
```

或者，只需在结果上方 grep 即可`.class`仅查看 es

```
$ jar tf ~/.m2/repository/org/apache/spark/spark-assembly/1.2.0-SNAPSHOT/spark-assembly-1.2.0-SNAPSHOT-hadoop1.0.4.jar | grep .class
org/apache/spark/unused/UnusedStubClass.class 
```

要查看`class`es 的数量，

```
jar tvf launcher/target/usergrid-launcher-1.0-SNAPSHOT.jar | grep .class | wc -l
61079 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-22T22:02:08.203

这是我正在使用的黑客：

您可以`java`像这样使用 's 自动完成功能：

```
java -cp path_to.jar <Tab> 
```

这将为您提供可作为起始课程通过的课程列表。当然，尝试使用没有主文件的文件不会做任何事情，但是您可以看到`java`认为里面的类`.jar`被调用了什么。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-10-08T06:10:58.247

你可以试试：

```
jar tvf jarfile.jar 
```

仅当您的 jar 是可执行的，即在清单中您已将某个类定义为主类时，这才会有帮助

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-10-16T16:44:40.193

您可以使用

```
jar tf example.jar 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-02-21T11:05:00.663

下面的命令将列出**jar**文件的内容。

命令：- `unzip -l jarfilename.jar`。

样品 o/p :-

`Archive: hello-world.jar Length Date Time Name --------- ---------- ----- ---- 43161 10-18-2017 15:44 hello-world/com/ami/so/search/So.class 20531 10-18-2017 15:44 hello-world/com/ami/so/util/SoUtil.class --------- ------- 63692 2 files`

根据说明书`unzip`

> -l 列出归档文件（短格式）。打印指定文件的名称、未压缩文件大小和修改日期和时间，以及所有指定文件的总数。如果 UnZip 是在定义 OS2_EAS 的情况下编译的，则 -l 选项还会列出存储的 OS/2 扩展属性 (EA) 和 OS/2 访问控制列表 (ACL) 的大小列。此外，还会显示 zipfile 注释和单个文件注释（如果有）。如果文件是从单一大小写文件系统（例如，旧的 MS-DOS FAT 文件系统）归档的，并且给出了 -L 选项，则文件名将转换为小写字母并以插入符号 (^) 为前缀。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-07-09T02:59:10.090

Mac OS：在终端上：

```
vim <your jar location>

after jar gets opened, press / and pass your class name and hit enter 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-02-24T09:44:36.387

你可以试试这个：

```
unzip -v /your/jar.jar 
```

仅当您的 jar 是可执行的，即在清单中您已将某个类定义为主类时，这才会有帮助

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-06-05T23:44:02.383

使用这个 bash 脚本：

```
#!/bin/bash

for VARIABLE in *.jar
do
   jar -tf $VARIABLE |grep "\.class"|awk -v arch=$VARIABLE '{print arch ":" $4}'|sed 's/\//./g'|sed 's/\.\.//g'|sed 's/\.class//g'
done 
```

这将以以下形式列出目录中 jar 中的类：

```
file1.jar:fullyqualifiedclassName
file1.jar:fullyqualifiedclassName
file1.jar:fullyqualifiedclassName
file1.jar:fullyqualifiedclassName
file2.jar:fullyqualifiedclassName
file2.jar:fullyqualifiedclassName
file2.jar:fullyqualifiedclassName 
```

样本输出：

```
commons-io.jar:org.apache.commons.io.ByteOrderMark
commons-io.jar:org.apache.commons.io.Charsets
commons-io.jar:org.apache.commons.io.comparator.AbstractFileComparator
commons-io.jar:org.apache.commons.io.comparator.CompositeFileComparator
commons-io.jar:org.apache.commons.io.comparator.DefaultFileComparator
commons-io.jar:org.apache.commons.io.comparator.DirectoryFileComparator
commons-io.jar:org.apache.commons.io.comparator.ExtensionFileComparator
commons-io.jar:org.apache.commons.io.comparator.LastModifiedFileComparator 
```

在 Windows 中，您可以使用 powershell：

```
Get-ChildItem -File -Filter *.jar |
ForEach-Object{
    $filename = $_.Name
    Write-Host $filename
    $classes = jar -tf $_.Name |Select-String -Pattern '.class' -CaseSensitive -SimpleMatch
    ForEach($line in $classes) {
       write-host $filename":"(($line -replace "\.class", "") -replace "/", ".")
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-09T00:38:35.210

**解决方案描述**：Eclipse IDE 可以通过创建一个示例 java 项目并在项目构建路径中添加所有 jars 来使用

**以下步骤**：

1.  创建一个示例 Eclipse Java 项目。

2.  您在其构建路径中拥有的所有 jar

3.  CTRL+SHIFT+T 并键入完整的类名。

4.  结果将显示在窗口中，所有 jar 都具有该类。见附图。 ![在此处输入图像描述](../Images/371f79a6ff8cac99f82d964e03ac9242.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-20T05:48:36.837

windows cmd：如果您将所有 te jar 放在同一目录中并执行以下命令，这将起作用

```
for /r %i in (*) do ( jar tvf %i | find /I "search_string") 
```

# map - need clarity implementing interface GridTask

> ID：15720829
> 
> 赞同：0
> 
> 时间：2013-03-30T16:31:00.267
> 
> 标签：map, grid, reduce, gridgain

I need clarity in implementing reduce() and map() methods of GridTask,

How can we Pass arguments to these methods,

```
Map<? extends GridJob, GridNode> 
  map(List<GridNode> subgrid, T arg) throws GridException

R reduce(List<GridJobResult> results) throws GridException 
```

Specifically, I need to know, how to pass/ invoke reduce method, or if it is invoked implicitly, then how and what arguments are passed to it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:19:35.633

The arguments are passed from GridProjection.execute(...) method.

Every time a GridJob completes, its result is passed to GridTask.result(...) method. The reduce() method is invoked whenever all results from GridJobs are received. You can also force to reduce sooner by returning REDUCE policy form GridTask.result(...) method.

# algorithm - 最小化步骤以将糖果分发成一个圆圈

> ID：15720830
> 
> 赞同：6
> 
> 时间：2013-03-30T16:31:01.830
> 
> 标签：algorithm, optimization, complexity-theory

有`n`孩子围成一圈。他们每个人都有一些糖果（可能是负数、正数或零）。他们可以一次给邻居一个糖果。最终结果是，他们都应该在最少的步骤中拥有零糖果。

假设我们有 4 个孩子拿着`(-4, -2, 4, 2)`糖果，那么序列将是

1.  (-3, -2, 4, 1)
2.  (-2, -2, 4, 0)
3.  (-2, -1, 3, 0)
4.  (-2, 0, 2, 0)
5.  (-2, 1, 1, 0)
6.  (-2, 2, 0, 0)
7.  (-1, 1, 0, 0)
8.  ( 0, 0, 0, 0)

这是一个可能的答案，我必须找到最少的步骤数。

*   循环1：查找邻居是否有正糖果，然后将其给与负糖果的邻居，直到糖果数量等于0，然后将给定的糖果数量加到总和中。

*   循环2：查找邻居的邻居是否有正糖果，然后将其交给有负糖果的邻居，直到糖果数量等于0，然后加2（给和的糖果数量）。

*   等等。

我的解决方案的复杂性导致了 TLE。我能做些什么来降低复杂性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T18:55:37.717

我认为您不需要详细循环。将每个位置的糖果数量写为 X1、X2、X3、X4。假设 X1 从它的左边收到 k 个糖果（即，对于 X4）。在这之后它有 X1+k 个糖果，所以它必须把它传到它的右边。那么 X2 将有 X1 + X2 + k 糖果，所以它必须把它传递到它的右边。然后 X3 将有 X1 + X2 + X3 + k 糖果，所以它必须将它传递给 X4。我们知道 X4 通过了 k 颗糖果，并且这会检查（假设 X1 + X2 + X3 + X4 = 0，如果不是，则没有解决方案）。

这需要|k| + |X1 + k| + |X1 + X2 + k| + |X1 + X2 + X3 + k| 步数，所以如果我们猜测 k，我们就知道要走多少步。k的最佳值是多少？如果我们增加 k，如果有更多的 +ve 项 X1 + X2 + ... k，我们会增加总和，如果有更多的 -ve 项，则减少。因此，k 的最佳值是其中 |k|、|X1 + k|.. 项的恰好一半是 +ve 和恰好是一半 -ve，因为如果不是这种情况，我们可以增加或减少 k 以使情况更好 - 选择的 k 值是 - 0、X1、X1 + X2、X1 + X2 + X3 的中位数。

我已经为您的示例的 n=4 情况说明了这一点，但我希望您可以从中找出一般 n 的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T04:20:17.373

将 mcdowella的想法付诸实践（因为我花了一段时间才理解它，请参阅**此处**[了解](https://meta.stackexchange.com/questions/174313/create-a-new-answer-or-edit-an-existing-answer-if-the-existing-answer-could-be-c)有关此主题的一些手稿），使其看起来如下。主要见解是：

*   就像你可以拥有负面糖果一样，你也可以传递负面糖果
*   向一个方向传递负糖果基本上是向相反方向传递（正）糖果
*   无论孩子有多少糖果，每个人最终都会归零。

这个实现如下：选择一个任意的孩子开始（下图中的孩子A，我有5个孩子而不是4个），我们选择一个任意方向（在我们的例子中是逆时针方向），然后开始通过。每个孩子都必须摆脱所有糖果（正面或负面）才能归零。所以孩子 A 有`-2`糖果，所以我们把它传递给孩子 B。之后孩子 B 有 -5 糖果，所以我们把它传递给孩子 C。现在孩子 C 有 -4 糖果，然后把它传递给 D，依此类推。这是第二张图，所有糖果在 13 步中都为零。

![在此处输入图像描述](../Images/ba2a270e8306de9791838aa48c13fdf7.png)

发送者图不是最佳的。我们观察到在中心图中传递的所有糖果都是负数（保存 E->A 传递）并且**我们可以随意从第一次传递中添加或减去**：如果 A->B 传递而`+5`不是`-2`，那么所有传递将增加`7`，并且 E->A pass 将`7`不是 0，最后 A 仍然没有糖果。所以我们寻找一个数字，通过它我们可以调整所有通道，使所有通道的绝对值之和最小化。在最后一张图中，我们看到，如果我们将`+2`所有通道相加，则所有通道的绝对值之和为 7。作为说明，如果我们添加`+3`总和会更大。因此，我们寻求为所有通道添加一个常数，以最小化所有通道的绝对值之和。

PS 如果有人认为我不应该在这里重新讲述**mcdowella**的想法，我很乐意删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:56:20.753

一种适用于此的元方法是采用一种轮询算法并使其基于事件。我是什么意思？

维护一个循环链接列表，其中包含给予者（糖果 >0 的孩子）和接受者（糖果 <0 的孩子）。还维护一个优先级队列，其中包含每个相邻（在列表中，而不是在圆圈中）给予者-接受者对的条目，其关键是给予者和接受者之间的距离。

现在，不是一次增加一个距离，而是使用优先级队列来找出下一个发生的有趣事情。每次解决给予者-接受者对时，一个或两个孩子都会从列表中退出，这需要 O(1) 的簿记和队列插入。

# tomcat - 应用程序不会在 Tomcat 中打开

> ID：15720831
> 
> 赞同：0
> 
> 时间：2013-03-30T16:31:07.947
> 
> 标签：tomcat

我刚刚开始学习 Spring，我正在尝试通过阅读我买的一本书（“使用 Spring 框架开发企业 Java 应用程序”）来安装合适的环境，但我运气不佳。就测试而言，我已经安装并运行了所有东西：-Eclipse（Indigo）-Tomcat 7.0.35-SQL Server-Ant 1.8.4

我已经部署了我的项目，现在正在运行 tomcat。当我通过浏览器打开tomcat并进入管理器应用程序时，我可以看到我的项目并运行= true。但是当我点击它时，我得到“网页不可用”。我的任何控制台上都没有显示任何错误，而且由于我是新手，我不确定从哪里开始寻找解决方案。让我知道您需要哪些其他信息才能为我指明正确的方向。非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:41:41.423

catalina.out 说什么？应使用默认设置记录错误。否则您可能必须更改日志记录设置

# c# - 使用工具包：Windows Phone 8 中的TransitionService

> ID：15720832
> 
> 赞同：1
> 
> 时间：2013-03-30T16:31:11.077
> 
> 标签：c#, windows-phone-8, silverlight-toolkit

我是 Windows Phone 8 开发的新手，我想知道是否可以获得有关如何在应用程序中使用这段代码的更多信息：

```
<toolkit:TransitionService.NavigationInTransition>
     <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

我已经阅读了[http://phone.codeplex.com](http://phone.codeplex.com)上的一些示例，但是，它似乎只在标签使用 NavigateUri 属性时使用。

所以我的主要问题是：无论何时发生任何页面导航（即使在后端），是否都会执行此代码，还是必须在代码所在的前端部分实现？

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-03T06:03:55.547

我有同样的问题。[在这里](http://www.geekchamp.com/articles/wp7-transitions-in-depth--key-concepts-and-api)找到解决方案！

您需要做的是转向并改变`App.xaml.cs`方法。`RootFrame = new PhoneApplicationFrame();``RootFrame = new TransitionFrame();``InitializePhoneApplication()`

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:25:25.540

有页面：page1，page2。如果您不使用您在所有页面的xaml代码中发布的代码，则永远不会发生页面转换。

如果您在所有页面的 xaml 中使用代码：

```
case a: page1 -> page2\. 

<toolkit:NavigationOutTransition.Forward>
    <toolkit:TurnstileTransition Mode="ForwardOut"/>
</toolkit:NavigationOutTransition.Forward> 
```

此转换发生在 page1 中。

```
<toolkit:NavigationInTransition.Forward>
    <toolkit:TurnstileTransition Mode="ForwardIn"/>
</toolkit:NavigationInTransition.Forward> 
```

此转换发生在 page2 中。

```
case b: page2 -> page1 (back).

 <toolkit:NavigationOutTransition.Backward>
    <toolkit:TurnstileTransition Mode="BackwardOut"/>
 </toolkit:NavigationOutTransition.Backward> 
```

此转换发生在 page2 中。

```
<toolkit:NavigationInTransition.Backward>
    <toolkit:TurnstileTransition Mode="BackwardIn"/>
</toolkit:NavigationInTransition.Backward> 
```

此转换发生在 page1 中。

# php - zend framework 2 - replace default phprenderer strategy

> ID：15720834
> 
> 赞同：0
> 
> 时间：2013-03-30T16:31:22.627
> 
> 标签：php, zend-framework2

I'm starting to get into Zend Framework 2, and one of the things that I'd like to do is create an intercept that strips all the tabs out of template files before the view vars are inserted into them.

I gather that I'd have to implement my own render strategy, but I can't quite figure out how to replace the default one (phprenderer). Is it just a matter of setting a strategy of the same name with a higher value then the default one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:02:50.343

For reference, I've solved the issue by adding a Filter

```
namespace Application\Filter;

use Zend\Filter\FilterInterface;

class FilterMinifyHTML implements FilterInterface {

    public function filter($value) {

        return \Minify_HTML::minify($value, array(
            'cssMinifier' => array('Minify_CSS', 'minify'),
            'jsMinifier'  => array('JSMin', 'minify'),
        ));

    }

} 
```

And then applied the filter as such (within `PhpRenderStrategy.php`)

```
/**
 * Constructor
 *
 * @param  PhpRenderer $renderer
 */
public function __construct(PhpRenderer $renderer) {
    $this->renderer = $renderer;
    $filterChain = new FilterChain();
    $filterChain->attach(new FilterMinifyHTML());
    $this->renderer->setFilterChain($filterChain);
} 
```

# javascript - "if (fn) fn()" or "fn && fn()"

> ID：15720840
> 
> 赞同：7
> 
> 时间：2013-03-30T16:32:01.287
> 
> 标签：javascript

I've seen many times that `fn && fn()` is an optimization of `if (fn) fn()`.

My question are: why? and, what is the generated code for both solutions?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T16:35:37.163

The `&&` operator in JavaScript is *short-circuited*, meaning that if the left-hand side is `false`, the right-hand side isn't evaluated at all. That's why `fn && fn()` is safe even if `fn` is falsey (`null`, `undefined`, etc.).

The "code generated" will depend entirely on the JavaScript engine, but I'd expect it to be quite similar in both cases (the `&&` and the `if`).

It's not an "optimization" in the sense of running faster, but rather in the sense of being shorter to write (particularly so if, like me, you *never* leave `{}` off `if` statements). It has the downside of being *slightly* less clear to people who are new to the language, but it's an idiom quickly learned.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T16:34:05.890

So, by `if (fn) fn()`, you want make sure `fn` is existing before executing it. the `if` condition checks a Boolean value or expression, in JavaScript any falsy value could turn to a `false` value in the `if` Boolean checking condition. Falsy values could be:

*   false
*   null
*   undefined
*   The empty string ''
*   The number 0
*   The number NaN (yep, 'Not a Number' is a number, it is a special number)

any other value will be a truthy value.

So, if the `fn` is either a `null` or `undefined` value, the `if` checking will protect you from executing a non-function object.

By `fn && fn()`, you are doing the same: in JavaScript, Boolean expression is lazy checked which means if the first part, in an `&&` operation, is falsy then the second part would not be executed. So, with this feature, you could protect your code from executing a non-function object.

`fn && fn()` is not an optimized version of the other one in terms of performance but is a short version in written.

Both code snippets require a precondition: the function `fn` could be either not defined or an actual function object. If in your code, the `fn` has the possibility of being an object of other types, such as a string, you need add type check before executing, such as:

`if (fn instanceof Function) fn()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:37:25.843

In terms of optimization, IMHO, I would say its because its a better way of making it a one line if then, without having to sacrifice braces and compromising readability, but it wouldn't make the code execute any faster

# c++ - Boost.Multiprecision cpp_int - 转换成字节数组？

> ID：15720841
> 
> 赞同：6
> 
> 时间：2013-03-30T16:32:02.393
> 
> 标签：c++

[http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html)

我刚开始探索这个图书馆。似乎没有办法转换`cpp_int`成字节数组。

有人能看到这样的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:20:40.607

这是无证的方式。`cpp_int`的后端有`limbs()`成员函数。此函数返回内部字节数组值。

```
#include <iostream>
#include <boost/multiprecision/cpp_int.hpp>

namespace mp = boost::multiprecision;

int main()
{
    mp::cpp_int x("11111111112222222222333333333344444444445555555555");

    std::size_t size = x.backend().size();
    mp::limb_type* p = x.backend().limbs();

    for (std::size_t i = 0; i < size; ++i) {
        std::cout << *p << std::endl;
        ++p;
    }
} 
```

结果：

```
10517083452262317283
8115000988553056298
32652620859 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-25T22:38:21.713

[这是](https://www.boost.org/doc/libs/1_74_0/libs/multiprecision/doc/html/boost_multiprecision/tut/import_export.html)导出和导入 a `cpp_int`(and `cpp_float`) 的基础肢体数据的记录方式。从文档中给出的示例中，针对特定问题进行了精简：

```
#include <boost/multiprecision/cpp_int.hpp>
#include <vector>

using boost::multiprecision::cpp_int;

cpp_int i{"2837498273489289734982739482398426938568923658926938478923748"};

// export into 8-bit unsigned values, most significant bit first:
std::vector<unsigned char> bytes;

export_bits(i, std::back_inserter(bytes), 8); 
```

这种机制非常灵活，因为您可以将字节保存为其他整数类型（只需记住指定每个数组元素的位数），`import_bits`如果您需要`cpp_int`从反序列化序列中恢复 a ，这反过来也适用于 。

# c# - Entity Framework join 3 tables query error

> ID：15720849
> 
> 赞同：0
> 
> 时间：2013-03-30T16:32:48.140
> 
> 标签：c#, entity-framework

Error:

> Cannot convert method group 'ToList' to non-delegate type 'System.Collections.Generic.List'. Did you intend to invoke the method? D:\PROJECTS\CECB2013-03-26\CECB\cecb.Functions\ActivationCodeEmail.cs 102 20 cecb.Functions*

My code is

```
 List<Members> teamMembers = new List<Members>();

 var query = from c in cecbContext.Projects
             join b in cecbContext.TeamMembers on c.proj_team equals b.team_reference
             join d in cecbContext.Members on b.mem_reference equals d.mem_reference
             select new
                    {
                        d.mem_reference
                    };

    return query.ToList<Members>;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:35:41.707

You've forgotten the brackets after `ToList` - it's an ( extension ) method:

```
return query.ToList<Members>(); 
```

You have another problem, though - you trying to turn an `IQueryable<AnonymousType>` into a `List<Members>`.

If you create instances of `Members` in your `Select` clause, it will work and you will be able to omit the generic type parameter on `ToList()`

```
select new Members
{
  ...
};

return query.ToList(); // this will create a List<Members> 
```

# html - Include quotes in inline style

> ID：15720854
> 
> 赞同：1
> 
> 时间：2013-03-30T16:33:09.273
> 
> 标签：html, quotes

I have a class that I apply to a span to format it a bit different to show an action someone must take.

```
<p>Example of styling a <span style="background-color:#ccc; color:#066; font-weight:900; padding:0 8px;">Button</span> press.</p> 
```

This example shows an inline style but it will eventually be in a class. What I want to know is is it possible to add angle brackets around the text as part of the styling? I know that `<q>` can achieve this but I want this to be part of the styling information. Is this possible in anyway.

Many thanks for any help in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:46:07.423

Yes you can include brackets in your styles using pseudo-elements, it isn't supported by <= IE7 though (~4.5% market share last time I checked). This method uses pseudo-elements `:before` and `:after` to generate content based on CSS before and after the element respectively (while still remaining inside `.button`).

[jsFiddle](http://jsfiddle.net/Tyriar/qqe9b/1/)

![enter image description here](../Images/6f7f55ca8d538484559783fa30f4ac4b.png)

```
.button:before {
    content:"<";
}

.button:after {
    content:">";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:47:34.137

You can do this easily with the pseudo `:before` and `:after` and `content`.

```
span:before {
    content: "«";
}
span:after {
    content: "»";
} 
```

I also think that this would be more appropriate as a [`kbd`](http://www.w3.org/community/webed/wiki/HTML/Elements/kbd) element.

[http://jsfiddle.net/ExX66/](http://jsfiddle.net/ExX66/)

# javascript - 用 IE8 调试 Javascript

> ID：15720856
> 
> 赞同：0
> 
> 时间：2013-03-30T16:33:23.870
> 
> 标签：javascript, internet-explorer, debugging, internet-explorer-8, ie-developer-tools

我正在尝试在 IE8 中使用开发人员工具 javascript 调试器来尝试并弄清楚它是如何取消选中在运行 javascript 函数时选中的复选框（在包括 IE9/10 在内的任何其他浏览器中都没有问题），但是我无法理解如何正确使用调试器。

当我启用调试时，它会全屏打开窗口，所以当我设置`breakpoint`& 返回页面以运行该功能（通过浏览按钮上传文件时运行）时，我双击文件立即上传它需要我到调试屏幕 & 不会让我回到浏览器窗口。

如果我尝试停靠调试屏幕，它会出现一条消息“你想调试这个网页”，如果我点击是，它会再次使调试屏幕变大。

我究竟做错了什么？在脚本运行到该断点后，我需要能够检查复选框的状态，但似乎无法做到这一点。

# php - 如何手动修剪和重新启动 php-resque 工作人员

> ID：15720858
> 
> 赞同：3
> 
> 时间：2013-03-30T16:34:00.830
> 
> 标签：php, resque, composer-php, php-resque

php-Resque 的工作人员经常会在工作上卡住几天，最终所有的工作人员都卡住了，网站停止工作。`php-resque`库是使用 Composer 安装的。

**问题：**我想手动进行修剪。如何访问此功能`pruneDeadWorkers()`？如果发现死掉的工人，我该如何重新启动它们？

[查看源代码](https://github.com/chrisboulton/php-resque/blob/master/lib/Resque/Worker.php)

![在此处输入图像描述](../Images/69db882f3ece85c4bf17c6b9c073e186.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-03T19:47:43.200

要手动修剪工人，请包含 vendor/chrisboulton/php-resque/lib/Resque/Worker.php 文件，实例化一个 Worker，然后调用 pruneDeadWorkers();

```
<?php 
include 'vendor/chrisboulton/php-resque/lib/Resque/Worker.php'; // If you're not already using composer autoloader

$worker = new Worker('default'); // the argument doesn't matter
$worker->pruneDeadWorkers(); 
```

php-resque 没有提供重新启动工作人员的功能，请查看[fresque](https://github.com/kamisama/Fresque)。

为避免工人死亡，请使用 , 编译您的 php 以`pcntl_fork`在分叉中执行您的作业，并将它们与工人隔离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T11:28:21.433

首先找到工作人员列表： 这包含根据命令行中的[php-resque doc](http://kamisama.me/2012/10/12/background-jobs-with-php-and-resque-part-4-managing-worker/) 类型的`Resque_Worker::all();` 工作人员 ID

```
`kill workers id` 
```

# java - 如何将文本从控制台传递到文本编辑器

> ID：15720859
> 
> 赞同：0
> 
> 时间：2013-03-30T16:34:05.530
> 
> 标签：java, console

我正在使用 Java 开发一个拼写纠正程序。我正在使用 JNativeHook 库来监听全局键盘事件，然后为输入生成更正的单词。但是，我无法将此内容传递到焦点窗口（文本区域）。

有什么方法可以将我的文本从控制台传递到另一个应用程序（浏览器、文本编辑器等）？

*   操作系统：Linux
*   IDE：日食

# macos - Mac Terminal: How to view a microsoft word file? (It says it is binary)

> ID：15720874
> 
> 赞同：1
> 
> 时间：2013-03-30T16:35:49.483
> 
> 标签：macos, ms-word, terminal

So I was writing a paper on Microsoft Word and the file is corrupt now. I'm trying to see if I can open the file using vim, but it says it is binary. Is there any command or any way to convert it into text so that I can just `vim myfile.doc` and copy the text contents? I tried doing a `cp myfile.doc myfile.txt` to change the extension but it still says it's binary.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:39:24.900

A doc file is a proprietary format by Microsoft. Docx formats are xml based but neither can be read directly using a text editor. If your file is corrupt you're probably going to have a lot more luck try to find the autosave location or try and recover the document using the tool office provides. In future remember to back up your work ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:42:37.620

/usr/bin/strings may be helpful -- built-in to OS X. Hope you can recover your paper.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:38:22.503

You might try using Antiword to convert to .txt if it can still access the file properly.

[http://en.wikipedia.org/wiki/Antiword](http://en.wikipedia.org/wiki/Antiword)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T16:38:58.243

`.doc` or `.docx` is not a plane `txt` file. It has several formatting and a bit of binary and in `.docx` xml factor included.

You can go for [OpenOffice](http://www.openoffice.org/) which is Free.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T08:51:08.660

Word itself has an option to "Recover Text From Any File" which is worth trying if you haven't done so already. When you open the file in Word, if it doesn't recognise the format, you should see a conversion dialog and the option is in there. You might have to check the "Confirm conversion at open" option (e.g. "Word Preferences->General->Confirm conversion at open" on Mac Word 2011, "File->Options->Advanced->General->Confirm file format conversion on open" on Windows Word 2010\.

# apache - PHPMyAdmin 配置错误

> ID：15720875
> 
> 赞同：2
> 
> 时间：2013-03-30T16:35:50.443
> 
> 标签：apache, configuration, phpmyadmin, storage, config

打开 localhost/phpmyadmin 时出现以下错误。

```
The phpMyAdmin configuration storage is not completely configured, some extended features have been deactivated. To find out why click here.
Connection for controluser as defined in your configuration failed. 
```

我在几个网站上发现我应该创建一个名为“phpmyadmin”的数据库，然后创建一个应该拥有所有权限的用户。下面是我当前的配置文件：

```
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'MyGeneratedBlowFishThingieIsHere'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE      AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'HTTP';
$cfg['Servers'][$i]['user'] = 'root'; 
$cfg['Servers'][$i]['password'] = 'root';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';

/*
 * End of servers configuration
 */ 
```

尽管我已遵循这些说明，但我仍然遇到这些错误。我能做些什么来解决这些问题？

# javascript - 这种变量是什么 $variable

> ID：15720880
> 
> 赞同：0
> 
> 时间：2013-03-30T16:36:24.123
> 
> 标签：javascript, variables

我在一个网站中找到了一个使用如下变量的 JavaScript 文件：

```
var $variable 
```

是什么类型？谢谢，DGM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:38:14.453

`$`是一个常规符号，就像 JS 中的任何其他合法符号一样，也可以用作变量或变量的一部分：

```
var $ = {}; 
```

它也是[jQuery](http://jquery.com/)对象的标识符。这就是为什么你通常会看到以这种方式命名的变量代表 jQuery 对象：

```
var $variable = $('#element'); 
```

还有使用下划线符号[作为](http://underscorejs.org/#chain)`_`其根对象的 Underscore.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:38:17.347

它是一个完全正常的变量，以美元符号开头——在 JavaScript 中没有特殊含义。它是一个有效的标识符，就像下划线一样。

有时，以 $ 为前缀的变量名表明它们包含由`$`用作构造函数的库之一（例如 jQuery）创建的对象包装器；与“普通值”相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:40:43.907

Javascript 标识符必须以字母、下划线或美元符号开头。所以它只是一个变量。

$ 符号的预期用途是用于代码生成器，但一些库将其用于自己的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T16:41:16.470

在 javascript 变量名中使用 $ 是完全有效的。就我个人而言，我尽量避免这种情况，因为它可能与 jquery 对象或 php 变量混淆，这些对象或 php 变量可能会误入 javascript。

# coq - How do you make notations visible outside of a module signature in Coq?

> ID：15720888
> 
> 赞同：2
> 
> 时间：2013-03-30T16:36:57.167
> 
> 标签：coq, theorem-proving

I've defined a module signature in Coq that defines several notations. When I try to use these notations outside of the signature however, Coq fails. A simplified version of my code is given below. Any help would be appreciated.

```
Module Type Field_Axioms.

  Delimit Scope Field_scope with F.
  Open Scope Field_scope.

  Parameter Element : Set.

  Parameter addition : Element -> Element -> Element.

  Infix " + " := addition : Field_scope. (* ASSIGNS THE "+" OPERATOR TO SCOPE. *)

End Field_Axioms

Module Type Ordered_Field_Axioms.

  Declare Module Field : Field_Axioms.

  Print Scope Field_scope. (* SHOWS THAT THE SCOPE IS EMPTY. *)

End Ordered_Field_Axioms. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:07:34.763

You can replace:

```
Declare Module Field : Field_Axioms. 
```

with:

```
Declare Module Import Field : Field_Axioms. 
```

# android - Importing jfeinstein10's SlidingMenu Project

> ID：15720900
> 
> 赞同：0
> 
> 时间：2013-03-30T16:38:19.133
> 
> 标签：android, import, slidingmenu

I'm new to Android and I would like to try jfeinstein10's library which can be found here: [https://github.com/jfeinstein10/SlidingMenu/issues](https://github.com/jfeinstein10/SlidingMenu/issues)

Unfortunately I have problems importing the library. I checked [this](http://www.youtube.com/watch?v=OT76zDIeBe8) video out. I set the project's build path to the Google API. In the videos all the errors disappear. As minTargetSdk I selected Android 2.2\. (API 8), targetSdlVersion is 17. In my case I still have some errors in the SlidingMenu class:

1)HONEYCOMB cannot be resolved or is not a field

2)LAYER_TYPE_HARDWARE cannot be resolved or is not a field

3)LAYER_TYPE_NONE cannot be resolved or is not a field

4)The Method getLayerType() is undefined for the type View

5)The Method setLayerType(int, null) is undefined for the type View

Any suggestions how I can fix these issues? Thank you in advance

Cheers

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:41:53.007

I have the project build target (right mouse-click on project, then select properties, then Android) set to Google APIs v17.

I don't think you can set it to minTargetSdk of Android API 8.

# javascript - 使用 getJSON 返回 Excel 电子表格

> ID：15720905
> 
> 赞同：1
> 
> 时间：2013-03-30T16:38:43.607
> 
> 标签：javascript, jquery, json, excel, asp.net-mvc-4

所以我有这个方法：

```
public Microsoft.Office.Interop.Excel.Worksheet createDoc()
{
    try
    {       
        app = new Microsoft.Office.Interop.Excel.Application();
        app.Visible = true;
        workbook = app.Workbooks.Add(1);
        worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Sheets[1];
    }
    catch (Exception e)
    {
        Console.Write("Error");
    }
    finally
    {
    }
    return worksheet;
} 
```

我需要能够返回此工作表并将其附加到我认为的 html iframe 中。我在 Visual Studio 中使用 MVC4。这是迄今为止我用来获取 JSONResults 的代码，但我从来没有处理过这个问题。

```
 $.getJSON("/exceldocumentmethod", function (results) {
    }); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:48:34.200

您不应该为此使用 JSON。您应该有一个控制器操作，该操作将 Excel 文件直接返回到具有正确 Content-Type 和 Content-Disposition 标头的响应。然后将`src`的指向`iframe`这个控制器动作。不要使用任何`$.getJSON`方法，他们不会帮助你。

因此，例如，您可以拥有以下 iframe：

```
<iframe src="@Url.Action("ExcelDoc", "Home")"></iframe> 
```

您的 ExcelDoc 操作可能如下所示：

```
public ActionResult ExcelDoc()
{
    var doc = Server.MapPath("~/App_Data/example.xls");
    return File(doc, "application/vnd.ms-excel");
} 
```

对于 Excel2007 及更高版本的 .xlsx 文件，正确的 Content-Type 是`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`.

我还注意到您正在使用 Excel Interop 在服务器上动态生成文档。此库依赖于安装在服务器上的 Excel，并非设计用于 Web 应用程序（服务器环境）。不要使用它。如果要在服务器上动态生成 Excel 文件，可以使用[`Open XML SDK`](http://www.microsoft.com/en-us/download/details.aspx?id=5124). 下面[`example on MSDN`](http://msdn.microsoft.com/en-us/library/office/hh180830%28v=office.14%29.aspx)介绍如何使用此 SDK 生成 Excel 电子表格。

# javascript - 针对给定观察者位置将太阳路径投影到 Google 地图上

> ID：15720907
> 
> 赞同：1
> 
> 时间：2013-03-30T16:38:50.033
> 
> 标签：javascript, google-maps, math, coordinates, astronomy

我有以下详细信息列表

```
Latitude and Longitude,
Date/Time
Altitude and Azimuth 
```

我要做的是计算我计算中使用的相对纬度和经度，这样我就可以用 Google Maps V3 (JavaScript) 绘制一个椭圆

这是可能的还是我应该将我的纬度/经度转换为页面像素并这样做（但这不是我想要完成任务的方式）

[编辑]

我正在尝试根据单个观察者所看到的高度和方位角来收集纬度和经度坐标，因此我的地图上的一个点我想在一天/时间内可视化太阳的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:46:25.557

**更新**：与 Dave 聊天后，我相信以下方法可以将太阳位置准确投影到地图上。

这是投影的外观的快速草图。它（应该是）3D。我们希望将太阳向下投影到 2D 表面上，其中 x 和 y 是观察者的偏移量，z 是到投影太阳的距离：

![太阳投影图](../Images/c757129625a6387c24079d953b0fb24c.png)

已知：

*   地球到太阳的距离，S = 149,597,870,700 m
*   phi（太阳方位角）
*   θ（太阳高度）

我们真正想要的是 z（距离）和 phi（方位角）。phi 是已知的，所以我们需要 z。请记住，S 是巨大的，所以我们应该将它缩小到一个较小的数字，以便我们的坐标可以在地图上看到。只要我们保持新的 S 不变，这无关紧要。现在，要找到 z：

```
sin(theta) = z / S, therefore z = S * sin(theta) 
```

一旦我们有了距离 z 和方位 phi，我们就可以使用[可移动式的](http://www.movable-type.co.uk/scripts/latlong.html)这些方程来计算 lat/lng 坐标：

```
var lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
          Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) );

var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), 
                 Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2)); 
```

在哪里`d = distance traveled = our z`和`R = earth's radius = 6371000 (meters)`

那很简单！现在只需遍历所有太阳位置并将它们绘制在地图上。

以下是一些使用 S=1000 的快速结果：

```
Azimuth    altitude    z
110        5           87
150        20          342
180        70          939
210        20          342 
```

请注意，如果您正在处理非常大的距离，由于对地球建模的困难，这将不完全准确。

# ios - 为什么这个视图会神奇地改变大小？

> ID：15720908
> 
> 赞同：3
> 
> 时间：2013-03-30T16:38:50.100
> 
> 标签：ios, objective-c, cocoa-touch

我有一个带有 tableFooterView 的 tableView。

在 viewDidload 上：

```
 <UIView: 0x6c87a70; frame = (0 325; 320 3); autoresize = TM+BM; layer = <CALayer: 0x6c87aa0>>
  <UIImageView: 0x6c87b60; frame = (31 0; 257 3); autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x6c87ba0>> - table_pull_refresh_footer.png 
```

在 viewWillLayoutSubviews 我看到的是

```
<UIView: 0x6c87a70; frame = (0 325; 320 3); autoresize = TM+BM; layer = <CALayer: 0x6c87aa0>>
 <UIImageView: 0x6c87b60; frame = (31 0; 320 3); autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x6c87ba0>> - table_pull_refresh_footer.png 
```

那么为什么 UIImageView 突然变大了呢？parentView 根本不会改变大小。还是320 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:03:12.577

问题正如vikingosgundo所说。

我应该先调用 [super viewWillLayoutSubviews]

# silverlight - 我可以在 arcgis server silverlight api 中使用 ARCGIS SERVER 非池化服务吗？

> ID：15720913
> 
> 赞同：0
> 
> 时间：2013-03-30T16:39:21.340
> 
> 标签：silverlight, arcgis, arcgis-server

我正在使用 arcgis 服务器 silverlight api3.0

我需要使用一些非池化的 Arcgis server 10I 服务。有人可以解释我这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:03:15.493

10.1 中不提供非共用服务。请参阅“迁移服务”部分的 ArcGIS 帮助。

[迁移到 ArcGIS 10.1 for Server](http://resources.arcgis.com/en/help/main/10.1/index.html#//0154000002p0000000)

# ios - 如果附近有太多 Map Pins，则 MKMapView 聚类

> ID：15720919
> 
> 赞同：6
> 
> 时间：2013-03-30T16:39:49.103
> 
> 标签：ios, mkmapview, mapkit, mkannotation, mkannotationview

我想知道你们中是否有人知道一种方法（库、类别等）来集群 iOS MapAnnotations，如果它们中有很多在同一位置（例如，大约 10m 中有 4 个）。

放大并不重要，因为它们仍然重叠。我已经尝试过[https://github.com/applidium/ADClusterMapView](https://github.com/applidium/ADClusterMapView)（以及其他一些库），但它们都是为了在缩小场景中显示集群而设计的。放大时，它们都没有真正尊重注释之间的距离。

我正在开发一个带有离线数据库的应用程序，因此服务器端解决方案不是一个选项。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-25T09:55:52.063

您不再需要 3rd 方框架。iOS 11 具有原生集群支持。

你需要实现[`mapView:clusterAnnotationForMemberAnnotations:`](https://developer.apple.com/documentation/mapkit/mkmapviewdelegate/2867923-mapview?language=objc)方法。

在 Apple 示例中获取更多详细信息：[https ://developer.apple.com/sample-code/wwdc/2017/MapKit-Sample.zip](https://developer.apple.com/sample-code/wwdc/2017/MapKit-Sample.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T19:35:38.040

您应该查看[CCHMapClusterController](https://github.com/choefele/CCHMapClusterController)项目，看起来与您正在寻找的东西完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:30:47.723

一种替代方法是 MapBox iOS SDK，它是一个复制 MapKit 行为的开源 (BSD) 库。它同时进行注释聚类和离线地图图层。

[http://mapbox.com/mobile](http://mapbox.com/mobile)

# javascript - jquery ajax - resize of iframe of another page

> ID：15720921
> 
> 赞同：1
> 
> 时间：2013-03-30T16:40:01.120
> 
> 标签：javascript, jquery, html, ajax

I am just beginner with ajax and jquery but I am trying to achieve this:

1.  Page installation.html contains iframe with id="MyIframe" and src="step1.php"
2.  Page step1.php contains button that calls step2.php using ajax (successfully)
3.  Page step2.php need to has script, that will resize iframe of page installation.html (so the content of step2 will fit in)

So far , my script looks like this:

```
 <script>
    $(document).ready(function() {
        $.ajax({
            url: 'installation.html',
            type: 'get',
            success: function(data) {
                $(data).find('#MyIframe').height('1000px');
            },
        });
    });
    </script> 
```

But it doesn't work. Can you suggest a solution here? Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:57:00.337

By default jQuery uses `document` of current window as context - in your case it is `#MyIframe`. In this context there is no element with `#MyIframe` id. So you need to access your iframe from the top window's document:

```
<script>
$(document).ready(function() {
    $(window.top.document).find('#MyIframe').height('1000px');
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:08:51.667

From what I see, your code is not reflecting what you are trying to achieve at all. The description you gave suggest you have the following structure.

installation.html

```
<iframe id="MyIframe" src="step1.php"></iframe> 
```

step1.php

```
 button.click -> ajax GET step2.php -> resize #MyIframe 
```

It's unclear to me why you load the step2.php page using ajax, can't you just change the `src` attribute of `#MyIframe` to `step2.php` and then resize the frame?

in step1.php

```
<button id="next">Next</button>

<script>
    $('#next').click(function () {
        $('#MyIframe', window.top.document).attr('src', 'step2.php').height(1000);
    });
</script> 
```

If you need to POST values to step2.php, you could submit a form from `step1.php` instead of changing the src attribute of the iframe and use the same technique in step2.php to resize the top-level iframe.

# c# - How implement pinch zoom without preserving aspect ratio in windows runtime?

> ID：15720924
> 
> 赞同：0
> 
> 时间：2013-03-30T16:40:27.810
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml

I have a scrollviewer around a canvas object

```
<ScrollViewer>
  <Canvas x:Name="myCanvas"/>
</ScrollViewer> 
```

and I'm adding (lots of) inherited custom controls into the Canvas in the code allowing me to basically create an interactive diagram:

```
var myControl = new MyControl();
myControl.Height = 10;
myControl.Width = 20;
Canvas.SetLeft(myControl,5);
Canvas.SetTop(myControl,20);
this.myCanvas.Children.Add(myControl); 
```

The ScrollViewer allows me to pan and pinch zoom around this canvas of controls keeping the same aspect ratio quite nicely.

Is there any way to easily implement stretching using pinching i.e. zooming without maintaining aspect ratio?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:44:05.460

ScrollViewer doesn't support that. You would need to roll out your own implementation using pointer or manipulation events and RenderTransform.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T23:08:54.817

Something like this (basically implementing Filip's answer):

```
<Image x:Name="_image" Stretch="None" ManipulationDelta="OnManipulationDelta">
  <Image.RenderTransform>
    <CompositeTransform />
  </Image.RenderTransform>
</Image> 
```

And in the code-behind:

```
private void OnManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{
  var ct = (CompositeTransform)_image.RenderTransform;
  // Scale horizontal.
  ct.ScaleX *= e.Delta.Scale;
  // Scale vertical.
  ct.ScaleY *= e.Delta.Scale;
} 
```

You should only have one of the scaling statements above in your case.

# java - Java 线程可运行/可调用

> ID：15720927
> 
> 赞同：1
> 
> 时间：2013-03-30T16:40:46.763
> 
> 标签：java, multithreading

我目前的项目涉及通过各种 TCP 协议将网络流量发送到多个不同的主机。我计划将其设计为“插件”类型的设计，其中可以通过实现我的接口来编写不同协议的插件并在运行时添加。

下面是我的初始设计，我想从更有经验的开发人员那里得到一些具体的指导，特别是我是否以正确的方式进行线程化，以及如何与我的 Swing GUI “对话”。

我的 Main 类是我的 GUI，它扩展了 JFrame 并使用 Netbeans 创建。单击一个按钮，我想加载模块（在这种情况下是 SSH - 不用担心我已经完成的模块的加载）。

点击按钮的代码如下：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    Executor executor = Executors.newCachedThreadPool();    
    PluginWorker worker = new PluginWorker();
    executor.execute(worker);    
} 
```

那么首先，这个 Executor 是否需要给我的工人打电话？我可以在这里使用 SwingWorker 将执行从我的 Swing GUI 中移开吗？

以下代码是我的 PluginWorker 类，它是一个旨在启动网络探测线程的类，我不确定是否需要它？SwingWorker 可能适合这个？此外，任务数组列表的大小可以轻松达到 10,000，所以这就是我选择使用 invokeAll 函数的原因？什么是最佳实践？

```
public class PluginWorker implements Runnable {
    private final ExecutorService es = Executors.newFixedThreadPool(5);  
    private final Collection<GenericPlugin> tasks = new ArrayList<>();

    @Override
    public void run() {

        SshPlugin ssh = new SshPlugin();
        tasks.add(ssh);
        //tasks could easily be up to 10,000 in size, so thats why I have chosen to use the invokeAll function?

        try {            
            es.invokeAll(tasks);
        } catch (InterruptedException ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }
        es.shutdown();
    }    
} 
```

最后，我想要的 SshPlugin 可以由任何人编写，扩展了“GenericPlugin”，它实现了我的“Plugin”接口（所以我可以强制执行 getAuthor、getDescription 等函数）并实现“Callable”。这是必需的，因此我可以从 arraylist 运行 invokeAll。现在我担心我的插件被过度设计了，我真的需要从 GenericPlugin 扩展，我的 SSHPlugin 直接实现“插件”和“可调用”本身会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:52:44.517

您的问题的简短回答是：每当您与 GUI 交互并且一些后台任务要通过 GUI 中的持续更新来完成时，那么您应该使用`javax.swing.SwingWorker`. `javax.swing.SwingWorker`通过阅读本官方教程，您可以了解如何高效有效地使用[`Worker Threads and SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

# git - GIT 用途和目的

> ID：15720928
> 
> 赞同：0
> 
> 时间：2013-03-30T16:40:49.813
> 
> 标签：git

我的任务是在我们的课堂上解释和演示 GIT。我一直在关注[GIT Book](http://git-scm.com/book)以使 git 工作，并且我正在阅读其他教程。当我读得越来越多时，我变得非常困惑。教程中所说的一切似乎都非常技术性，学生很难理解哪些没有任何想法。

我们的教授给了我一个服务器访问权限。[我按照此处](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)所述的步骤设置我的服务器。我做了以下事情：

```
$ ssh myusername@myprofessorserver.com 
$ sudo adduser git
$ su git
$ cd
$ mkdir .ssh
$ ssh-keygen -t rsa -C "myemail@mailserver.com"
$ cat /home/git/.ssh/id_rsa.myusername.pub >> ~/.ssh/authorized_keys
$ cd /home/git
$ mkdir myfirstproject.git
$ cd myfirstproject.git
$ git --bare init
$ ls
$ ./   .bash_history  .bash_profile  devsite.git/  perl5/       public_html/ 
```

../ .bash_logout .bashrc .emacs public_ftp/ .ssh/

```
$ cd devsite.git
$ ls
$./  ../  branches/  config  description  HEAD  hooks/  info/  objects/  refs/ 
```

我不知道我的配置中还缺少什么让 git 工作。服务器正在运行到 Fedora。

我使用的是Windows PC，为了配置我的本地站点，我下载了文件msysgit.github.com/，我选择了“纯GIT用户，在google下载链接”。我只是运行安装并遵循所有步骤。我使用 NETBeans 作为我的 IDE。我按照 netbeans.org/kb/docs/ide/git.html 中的教程进行操作。但我只遵循了第 1 步，其余的步骤我无法使其工作。我被困在第 2 步。

知道我还需要做什么才能让 git 在我的本地和远程服务器上工作吗？我上面的步骤错过了什么？如果它是我的第一个项目，我还没有任何文件，我需要对我的服务器设置做什么？

我只需要在服务器中添加 2 个测试文件并向我的同学展示演示文件只有 index.html 和 welcomemessage.html 我的存储库和分支名称还为空

任何人对此事的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:05:05.690

这是设置裸（非工作）存储库所需的（部分）内容。但大多数时候我使用 git 只是为了版本控制，纯粹是在本地。即，跟踪我正在编写的某个程序或 LaTeX 文档源。没有共享，只有版本控制：

```
mkdir foo
cd foo
git init
# Hack away, commit, branch, ... 
```

其中一些我有几次（在我的笔记本电脑和上网本上）：

```
git clone git://laptop.example.com/home/vonbrand/myrepo
# Hack away
git push 
```

对于其他人，我在固定机器上设置了一个裸仓库（主要用于备份）。我通过 gitosis 与世界分享了一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:49:26.407

试一试本教程：

[http://www.rosipov.com/blog/create-gitolite-repository/](http://www.rosipov.com/blog/create-gitolite-repository/)

这是维护 git 存储库的最简单且不被弃用的方法。

# python - Python: My for loop doesn't iterate over all items in a list

> ID：15720929
> 
> 赞同：2
> 
> 时间：2013-03-30T16:40:54.233
> 
> 标签：python, list, for-loop, python-3.x

While following an online course about Python, we were encouraged to write a certain program ourselves. This was not for a mark, but only for practice. I don't want help solving the problem, but I need help as to why my code isn't doing what I thought it would be doing.

The (relevant) part of code is the following:

```
raw_restaurants = file.readlines()

print(raw_restaurants)

restaurants = []
information = []
for i in raw_restaurants:
    if len(information) < 5:
        information.append(i.strip())
    if len(information) ==  5:
        restaurants.append(information)
        information = [] 
```

And this is the list used. The original list is one created with file.readlines().

```
['Georgie Porgie\n', '87%\n', '$$$\n', 'Canadian,Pub Food\n', '\n', 
 'Queen St. Cafe\n', '82%\n', '$\n', 'Malaysian,Thai\n', '\n', 
 'Dumplings R Us\n', '71%\n', '$\n', 'Chinese\n', '\n', 
 'Mexican Grill\n', '85%\n', '$$\n', 'Mexican\n', '\n', 
 'Deep Fried Everything\n', '52%\n', '$\n', 'Pub Food\n'] 
```

The problem is that my function gives as output:

```
[['Georgie Porgie', '87%', '$$$', 'Canadian,Pub Food', ''], 
 ['Queen St. Cafe', '82%', '$', 'Malaysian,Thai', ''], 
 ['Dumplings R Us', '71%', '$', 'Chinese', ''], 
 ['Mexican Grill', '85%', '$$', 'Mexican', '']] 
```

Which means that the whole part about Deep Fried Everything has disseapeared. Anyone knows what I am doing wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T16:45:11.713

You only have *4* items past the empty line of the `Mexican Grill` entry, so the `if len(information) == 5:` test never becomes True.

Simply append `information` one more time if there are items in it:

```
for i in raw_restaurants:
    if len(information) < 5:
        information.append(i.strip())
    if len(information) ==  5:
        restaurants.append(information)
        information = []
if information:
    restaurants.append(information) 
```

# matlab - 在 Matlab 中编写 Mathematica 代码

> ID：15720939
> 
> 赞同：0
> 
> 时间：2013-03-30T16:42:12.963
> 
> 标签：matlab, wolfram-mathematica, matlab-figure, matlab-guide, mathematica-8

谁能告诉我该怎么做？我是 Matlab 和 Mathematica 的新手。我有我的数学编码。但是，当我在不同的时间运行它时，它会给出不同的结果。所以，我想在 Matlab 中运行它并验证我的结果。请任何人帮助我。真的很感激。这包含定义函数、参数图等。我确实通过 Matlab 找到了。但是，我无法理解如何在 Matlab 中编写相同的程序。

```
L1 = 40; 
L2 = 20; 
A2 = 4.1; 
D1 = 1.3; 
B1 = 10; 
D2 = 19.6; 
B2 = 56.6;

N1 = D2 + B2;      
N2 = D2 - B2; 
A21 = 4.1;
F1 = (D1 \[Pi]^2)/L^2 + (B1 \[Pi]^2)/L^2; 
F11 = F1 /. L -> L2; 
F2 = (D1 \[Pi]^2)/L^2 - (B1 \[Pi]^2)/L^2; 
\[Alpha] = D2^2 - B2^2; 
\[Beta] = ((2 \[Pi]^2)/L^2 (D1 D2 - B1 B2) - 2 E1 D2 - A2^2)/\[Alpha]; 
\[Gamma] = (E1 (E1 - 2 (D1 \[Pi]^2)/L^2) + F1 F2)/\[Alpha];
\[CurlyPhi] = \[Pi]/180*(0);(* input angle in deg*)

\[Kappa]p2 = (-\[Beta] + Sqrt[\[Beta]^2 - 4 \[Gamma]])/2;
\[Kappa]m2 = (-\[Beta] - Sqrt[\[Beta]^2 - 4 \[Gamma]])/2;
\[Kappa]0 = Sqrt[\[Kappa]p2 /. L -> L1];
\[Kappa]01 = Sqrt[-\[Kappa]p2 /. L -> L1];
q = Sqrt[-\[Kappa]m2 /. L -> L1];
q1 = Sqrt[-\[Kappa]p2 /. L -> L2];
q2 = Sqrt[-\[Kappa]m2 /. L -> L2];

(*-----------Electron density \[DoubleStruckCapitalR](\[Rho]) \
:--------------------- *)
R\[Rho] = \[DoubleStruckCapitalN]^2 (p1*Q1* 
    BesselJ[m, \[Kappa]0*\[Rho]] + 
    p2*l1*BesselI[m, q*\[Rho]])^2 + \[DoubleStruckCapitalN]^2 (p1*
         Q2 BesselJ[m + 1, \[Kappa]0*\[Rho]] + 
         p2* l2*BesselI[m + 1, q*\[Rho]])^2;

(*\[Rho]<R*)

R\[Rho]1 = \[DoubleStruckCapitalN]^2 (p3*\[CapitalLambda]1*
      BesselK[m, q1*\[Rho]] + 
     p4*\[Beta]1*
      BesselK[m, 
       q2*\[Rho]])^2 + \[DoubleStruckCapitalN]^2 \
(p3*\[CapitalLambda]2*BesselK[m + 1, q1*\[Rho]] + 
     p4*\[Beta]2*BesselK[m + 1, q2*\[Rho]])^2;(*\[Rho]>R*)

(*---------------Finding p1,p2,p3,p4 -----------------*)
(*
a1 p1+a2 p2+a3 p3==d1;
b1 p1 +b2 p2+b3 p3==d2;
c1 p1+c2 p2+c3 p3==d3;

Subscript[p, 1]=((Subscript[d, 3] Subscript[a, 3]-Subscript[c, 3] \
Subscript[d, 1])(Subscript[b, 2] Subscript[a, 3]-Subscript[b, 3] \
Subscript[a, 2])-(Subscript[d, 2] Subscript[a, 3]-Subscript[b, 3] \
Subscript[d, 1])(Subscript[c, 2] Subscript[a, 3]-Subscript[a, 2] \
Subscript[c, 3]))/((Subscript[c, 1] Subscript[a, 3]-Subscript[c, 3] \
Subscript[a, 1])(Subscript[b, 2] Subscript[a, 3]-Subscript[b, 3] \
Subscript[a, 2])-(Subscript[b, 1] Subscript[a, 3]-Subscript[b, 3] \
Subscript[a, 1])(Subscript[c, 2] Subscript[a, 3]-Subscript[a, 2] \
Subscript[c, 3]));
Subscript[p, 2]=(Subscript[d, 2] Subscript[a, 3]-Subscript[b, 3] \
Subscript[d, 1])/(Subscript[b, 2] Subscript[a, 3]-Subscript[b, 3] \
Subscript[a, 2])-Subscript[p, 1]((Subscript[b, 1] Subscript[a, \
3]-Subscript[b, 3] Subscript[a, 1])/(Subscript[b, 2] Subscript[a, \
3]-Subscript[b, 3] Subscript[a, 2]));
Subscript[p, 3]=Subscript[d, 1]/Subscript[a, 3]-Subscript[a, \
1]/Subscript[a, 3] Subscript[p, 1]-Subscript[a, 2]/Subscript[a, 3] \
Subscript[p, 2

];
Subscript[p, 4]=1;
*)

p1 = -((-b3 c2 d1 + b2 c3 d1 + a3 c2 d2 - a2 c3 d2 - a3 b2 d3 + 
   a2 b3 d3)/(
  a3 b2 c1 - a2 b3 c1 - a3 b1 c2 + a1 b3 c2 + a2 b1 c3 - a1 b2 c3));
p2 = -((b3 c1 d1 - b1 c3 d1 - a3 c1 d2 + a1 c3 d2 + a3 b1 d3 - 
    a1 b3 d3)/(
   a3 b2 c1 - a2 b3 c1 - a3 b1 c2 + a1 b3 c2 + a2 b1 c3 - a1 b2 c3));
p3 = -((-b2 c1 d1 + b1 c2 d1 + a2 c1 d2 - a1 c2 d2 - a2 b1 d3 + 
    a1 b2 d3)/(
   a3 b2 c1 - a2 b3 c1 - a3 b1 c2 + a1 b3 c2 + a2 b1 c3 - a1 b2 c3));
p4 = 1;

a1 = \[Kappa]0 BesselJ[m, \[Kappa]0 R];
a2 = q BesselI[m, q R];
a3 = q1 BesselK[m, q1 R];

b1 = ((F1 /. L -> L1) - E1 + N1 \[Kappa]0^2) BesselJ[
    m + 1, \[Kappa]0 R];
b2 = ((F1 /. L -> L1) - E1 - N1 q^2) BesselI[m + 1, q R];
b3 = -(F11 - E1 - N1 q1^2) BesselK[m + 1, q1 R];

c1 = \[Kappa]0^2 BesselJ[m + 1, \[Kappa]0 R];
c2 = -q^2 BesselI[m + 1, q R];
c3 = q1^2 BesselK[m + 1, q1 R];

d1 = -q2 BesselK[m, q2 R];
d2 = (F11 - E1 - N1 q2^2) BesselK[m + 1, q2 R];
d3 = -q2^2 BesselK[m + 1, q2 R];

(*------------Normalization constant---------------*)

\[DoubleStruckCapitalN] = 
 Sqrt[1/( 2 Pi \
\[DoubleStruckCapitalN]1)];(*1/(\[DoubleStruckCapitalN]^2 2 Pi)=\
\[DoubleStruckCapitalN]1*)

\[DoubleStruckCapitalN]1 = (p1^2*Q1^2*SJJ[m, \[Kappa]0]) + (2*p1*Q1*
    p2*l1*SJI[m, \[Kappa]0, q]) + (p2^2*l1^2*SII[m, q]) + (p1^2*Q2^2*
    SJJ[m + 1, \[Kappa]0]) + (2*p1*p2*Q2*l2*
    SJI[m + 1, \[Kappa]0, q]) + (p2^2*l2^2*
    SII[m + 1, q]) + (p3^2*\[CapitalLambda]1^2*SKK[m, q1]) + (2*p3*
    p4*\[CapitalLambda]1*\[Beta]1*
    SKKab[m, q1, q2]) + (p4^2*\[Beta]1^2*
    SKK[m, q2]) + (p3^2*\[CapitalLambda]2^2*SKK[m + 1, q1]) + (2*p3*
    p4*\[CapitalLambda]2*\[Beta]2*
    SKKab[m + 1, q1, q2]) + (p4^2*\[Beta]2^2*SKK[m + 1, q2]);

Q1 = -A2 \[Kappa]0;
Q2 = (F1 /. L -> L1) - E1 + N1 \[Kappa]0^2;

l1 = -A2 q;
l2 = (F1 /. L -> L1) - E1 - N1 q^2;

\[CapitalLambda]1 = A2 q1;
\[CapitalLambda]2 = F11 - E1 - N1 q1^2;

\[Beta]1 = A2 q2;
\[Beta]2 = F11 - E1 - N1 q2^2;

(*----------Defining the notations----------------*)

SJJ[m_, a_] := 
 1/2  R^2 (BesselJ[m, a R]^2 - 
    BesselJ[-1 + m, a R] BesselJ[m + 1, a R])
SJJab[m_, a_, b_] := 
 1/(b^2 - a^2) (a R BesselJ[m, b R ] BesselJ[m - 1, a R] - 
    b R BesselJ[m - 1, b R] BesselJ[m, a R])
SJI[m_, a_, b_] := 
 1/(b^2 + a^2) (-a R BesselI[m, b R ] BesselJ[m - 1, a R] + 
    b R BesselI[m - 1, b R] BesselJ[m, a R])

SII[m_, a_] := 
 1/2 R^2 (BesselI[m, a R]^2 - BesselI[m - 1, a R] BesselI[m + 1, a R])
SIIab[m_, a_, b_] := 
 1/(b^2 - a^2) (-a R BesselI[m, b R ] BesselI[m - 1, a R] + 
    b R BesselI[m - 1, b R] BesselI[m, a R])

SKK[m_, a_] := -(1/2)
    R^2 (BesselK[m, a R]^2 - BesselK[m - 1, a R] BesselK[m + 1, a R])
SKKab[m_, a_, 
  b_] := -(1/(
   a^2 - b^2)) (b R BesselK[m, a R ] BesselK[m - 1, b R] - 
    a R BesselK[m - 1, a R] BesselK[m, b R])

 m = 0;
R = 200;
E1 = {0.0888446, 0.153953, 0.24331};
Pm0R200 = 
 Plot[Piecewise[{{R\[Rho]*10^5, \[Rho] < R}, {R\[Rho]1*10^5, \[Rho] > 
      R}}], {\[Rho], 0, 250}, 
  AxesLabel -> {Style["\[Rho]", Bold, FontSize -> 18], 
    Style["|\[CapitalPsi](\[Rho])|\!\(\*SuperscriptBox[\(\\\ \), \
\(2\)]\) (*\!\(\*SuperscriptBox[\(10\), \(-5\)]\))", Bold, 
     FontSize -> 15]}, 
  BaseStyle -> {FontSize -> 15, FontWeight -> Plain, 
    FontFamily -> "Times New Roman"}, PlotRange -> Full, 
  ImageSize -> 700, PlotStyle -> Automatic, 
  PlotLabel -> 
   Style["\[DoubleStruckCapitalR](\[Rho]) vs \[Rho] : m=0 & R=200\
\[Angstrom]"]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:38:20.660

使用[`ToMatlab`](http://library.wolfram.com/infocenter/MathSource/577/)包您可以将*Mathematica*表达式转换为 MATLAB 等价物。但它可以转换在 MATLAB 中具有等价物的东西。

[在Mathematica.stackexchange](https://mathematica.stackexchange.com/questions/14035/is-it-possible-to-export-the-equations-from-mathematica-to-matlab)中有一个类似的问题。

我不认为将此代码转换为 MATLAB 对初学者来说太难了。MATLAB 有一个非常有用的文档，您可以参考上面的问题（关于在 MATLAB 中定义函数、贝塞尔函数等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:49:44.417

对于没有经验的 Matlab 用户来说，这似乎是一个相当大的挑战。Matlab 代码语法与 Mathematica 语法不同。在尝试编写如此困难的脚本之前，您应该尝试做一些更简单的事情来了解 Matlab 的工作原理。

Mathworks 在他们的网站上提供教程（我从未做过，但我认为值得一试）[http://www.mathworks.nl/academia/student_center/tutorials/launchpad.html](http://www.mathworks.nl/academia/student_center/tutorials/launchpad.html)

另外，我发现了mathematica和matlab语法之间的比较，也许它可以帮助[http://amath.colorado.edu/computing/mmm/syntaces.html](http://amath.colorado.edu/computing/mmm/syntaces.html)

# ruby-on-rails - Rails Format Date in Drop Down List in View

> ID：15720940
> 
> 赞同：2
> 
> 时间：2013-03-30T16:42:16.737
> 
> 标签：ruby-on-rails, select, tags

I could you some assistance formatting a date field in a drop-down list in a for in a view. My dates are showing with a time-stamp and I'd like them to show as "mm/dd/yyyy".

In my model I have a method selecting a date field from the table:

```
def self.get_event_dates
  event_dates = UgradRsvp.find_by_sql("select distinct event_date from admissions.ugrad_rsvps where event_date is not null order by event_date desc")
end 
```

We use Oracle as our db, so I also tried using to_char(event_date, 'MM/DD/YYYY') as event_date, but the dates in my drop-down still show with a time-stamp.

My view is a search form. Users will select a date and then see a report of all students signed up for an event on that event_date:

```
<%= select_tag "event_date", options_from_collection_for_select(UgradRsvp.get_event_dates, "event_date", "event_date") %> 
```

There are about eight dates in my table ugrad_rsvps. They are showing as, i.e: "2013-04-18 00:00:00 -0400" I'd like to have them show as "04/18/2013". I've tried using strftime("%m/%d/%Y"), but I just get errors on the line in my view for the drop-down (above).

Any ideas? Thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:35:06.620

In your model add the following method

```
 def event_date_formatted
    event_date.strftime("%m/%d/%Y")
  end 
```

Then you can simply use like so:

```
<%= select_tag "event_date", options_from_collection_for_select(UgradRsvp.get_event_dates, 'event_date', :event_date_formatted) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:08:16.707

I not try yet, but you can try to add method to Model like

```
class UgradRsvp < ActiveRecord::Base
    def event_date_text
        event_date.strftime("%d/%m/%Y")
    end
end 
```

and then call event_date_text as txt_method

```
<%= select_tag "event_date", options_from_collection_for_select(UgradRsvp.get_event_dates, "event_date", "event_date_text") %> 
```

# asp.net-mvc-4 - 为什么绑定到表中文本框的复杂类型列表不显示 MVC 4 中模型的更改？

> ID：15720942
> 
> 赞同：2
> 
> 时间：2013-03-30T16:42:33.733
> 
> 标签：asp.net-mvc-4

我遇到了一个看起来很简单的问题，但我一直无法找到解决方案。我创建了一个 ReportModel 对象，它是视图中的模型。ReportModel 包含一个 FinancialHistory 对象的列表。我使用默认绑定填充对象并在视图中的表单内的文本框表中显示它们（这可以正常工作）。然后，用户可以提交表单以从不同的数据源刷新 FinancialHistory 对象，用新结果替换之前列表中的内容。返回新结果时，我可以看到模型包含预期的新值，但是在呈现 HTML 时，仍然出现原始金额。如果新结果包含比原始列表更多的对象（如示例代码中所示），则添加的行会显示正确的值。所以，

以下是模型：

```
public class ReportModel
{
    public string AccountNumber { get; set; }
    public IList<FinancialHistory> FinancialHistories { get; set; } 
}

 public class FinancialHistory
{
    public FinancialHistory()
    {
        Id = Guid.Empty;
    }

    public Guid Id { get; set; }
    public DateTime TransactionDate { get; set; }
    public decimal TotalAmount { get; set; }
} 
```

在 Home/Index 视图中，我使用 HTML.TextBoxFor() 将列表中每个 FianancialHistory 对象的属性绑定到表中的文本框。这是索引视图：

```
@model SimpleExample.Models.ReportModel

<form id="FormSave" method="post" name="FormSave" action="/Home/Refresh">

@Html.LabelFor(model => model.AccountNumber) @Html.TextBoxFor(model => model.AccountNumber)

<table class="table" style="width: 95%">
    <tr>
        <td >Date</td>
        <td >Amount</td>
    </tr>

    @{
        if (Model.FinancialHistories != null)
        {                   
            for (int index = 0; index <= Model.FinancialHistories.Count - 1; index++)
            {              
            <tr>
                <td>@Html.TextBoxFor(model => model.FinancialHistories  [index].TransactionDate, "{0:MM/dd/yyyy}", new { @readonly = "true" })</td>
                <td>@Html.TextBoxFor(model => model.FinancialHistories[index].TotalAmount, "{0:#,#.00}", new { @readonly = "true" })</td>
                <td>@Html.HiddenFor(model => model.FinancialHistories[index].Id)</td>
            </tr>
            }
        }
     }

</table>
<input type="submit" id="submit" value="Refresh" class="submit" />
</form> 
```

对于这个例子，我在控制器中的操作方法非常简单。最初，Index 方法使用 2 个 FinancialHistory 对象填充列表。Refresh 方法用 3 个不同数量的新对象替换原来的 2 个对象。

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ReportModel reportModel = new ReportModel();

        reportModel.AccountNumber = "123456789";

        IList<FinancialHistory> financialHistories = new List<FinancialHistory>();
        financialHistories.Add(new FinancialHistory
                                    {
                                        Id = Guid.NewGuid(),
                                        TransactionDate = DateTime.Parse("3/1/2010"),
                                        TotalAmount = 1000.00M
                                    });

        financialHistories.Add(new FinancialHistory
                                    {
                                        Id = Guid.NewGuid(),
                                        TransactionDate = DateTime.Parse("4/1/2011"),
                                        TotalAmount = 2000.00M
                                    });

        reportModel.FinancialHistories = financialHistories;

        return View(reportModel);
    }

    public ActionResult Refresh(ReportModel reportModel)
    {
        FinancialHistoryRepository financialHistoryRepository = new FinancialHistoryRepository();

        IList<FinancialHistory> financialHistories = new List<FinancialHistory>();
        financialHistories.Add(new FinancialHistory
                                    {
                                        Id = Guid.Empty,
                                        TransactionDate = DateTime.Parse("3/1/2010"),
                                        TotalAmount = 1111.11M
                                    });
        financialHistories.Add(new FinancialHistory
                                    {
                                        Id = Guid.Empty,
                                        TransactionDate = DateTime.Parse("4/1/2011"),
                                        TotalAmount = 2222.22M
                                    });
        financialHistories.Add(new FinancialHistory
                                    {
                                        Id = Guid.Empty,
                                        TransactionDate = DateTime.Parse("5/1/2012"),
                                        TotalAmount = 3333.33M
                                    });

        reportModel.FinancialHistories = financialHistories;

        return View("Index",reportModel);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:02:25.113

That's how HTML helpers work and is by design. When rendering they are first looking in the ModelState for values and after that in the model. You are modifying the values of your model in the POST controller action, but the ModelState values still contain the old values which will be used. If you want to modify values of your model in a POST action you should remove the original values from the ModelState if you intend to redisplay the same view:

```
public ActionResult Refresh(ReportModel reportModel)
{
    // clear the original posted values so that they don't get picked up
    // by the helpers
    ModelState.Clear();

    FinancialHistoryRepository financialHistoryRepository = new FinancialHistoryRepository();
    ...
    return View("Index",reportModel);
} 
```

# c - 如何编写模块化网络代码？

> ID：15720943
> 
> 赞同：3
> 
> 时间：2013-03-30T16:42:34.230
> 
> 标签：c, networking, modularity

我有一个任务，我必须实现一些网络协议。该分配包括通过理想连接（不会丢失或损坏数据）和确实损坏数据的连接进行的通信。我想让它尽可能模块化，但我不知道该怎么做（一切似乎都如此交织在一起）。这是我必须做的事情的清单：

*   **滑动窗口**。该任务假设一个完美的连接。但是，我想抽象出这个细节（实现滑动窗口代码，以便处理连接质量是其他模块的责任）。
*   **用于不完美连接的Go-Back-N**协议。在这里，我想重用之前涉及滑动窗口的任务中的代码。
*   **选择性重复**。这听起来应该取代 Go-Back-N 模块，同时仍然在滑动窗口模块之上工作。
*   **错误检测**。这个看起来应该与我是否使用滑动窗口、Go-Back-N 或选择性重复无关。然而，我不知道如何将错误检查与消息接收分开。

也许我可以实现分层架构（受 OSI 模型的启发），但我不知道该怎么做。我需要朝着正确的方向轻推。

这些不同的模块应该如何相互交互？这样 Go-Back-N 或 Selective Repeat 的功能与我是否要填充数据链接（滑动窗口）无关，并且错误检查是在所有这些之上透明地完成的。

**编辑：**另一个困难是某些协议（Go-Back-N、选择性重复、滑动窗口）需要特定于该协议的状态，并且在 C 中没有实现有状态功能的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:12:15.733

也许你可以使用链式函数？

最初，您可以使用、和等`struct connection`字段。首先，您将使用处理理想连接的函数来填充它。`void (*write)(struct connection *con, char *buf, size_t len, void *data);``void *write_data;``int (*get_write_queue_size)(struct connection *con, void *data)``void *get_write_queue_size_data`

Then, for adding a sliding window, you would make a `struct sliding_window_connection` with all the fields from `struct connection` that you want to intercept. Then, you would move the old functions and data-pointers from the `struct connection` into the `struct sliding_window_connection`, replace the functions in the `struct connection` with the sliding window implementations and replace the data pointers in the `struct connection` with pointers to the `struct sliding_window_connection`. The new `write` could e.g. look somewhat like this:

```
void sliding_window_connection_write
      (struct connection *con, char *buf, size_t len, void *data) {
  struct sliding_window_connection *swcon = data;
  /* ... do magic for the sliding window ... */
  /* if we want the buffer to be sent now, call the lower layer like this: */
  swcon->write(con, buf, len, swcon->write_data);
} 
```

For stacking go-back-n or selective repeat on top, you would then add the go-back-n or selective repeat functions the same way.

For reading, you would basically do the same – let the data bubble up through the layers and maybe manipulate or interpret it on the way.

To make this work better, you might want to add a function similar to `write` that can be used by a layer (e.g. go-back-n) to signal a lower layer (e.g. the sliding window) for purposes like "hey, please resend bytes m->n, thanks".

As error detection would have to happen on a higher level than these things, you would have to add it after the other things – the later you add something, the higher its layer.

# dart - 文件夹在 dart 项目中有什么相关性？

> ID：15720947
> 
> 赞同：2
> 
> 时间：2013-03-30T16:43:18.117
> 
> 标签：dart, dart-editor, dart-pub

当我在 Dart 编辑器的 Dart 项目中创建子文件夹时，会立即在此子文件夹中创建一个包子文件夹。我没有在任何地方读到子文件夹对项目结构有特殊含义，但似乎它们确实如此。有人知道更多吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:58:44.253

package 子文件夹包含指向您的 Pub 包的符号链接。[您可以在http://pub.dartlang.org/doc/](http://pub.dartlang.org/doc/)阅读有关 Pub 和 Pub 包的更多信息。

当你启动一个非 web 项目时，编辑器会自动在你的 bin/ 和 test/ 目录中创建包目录（但不在你的 lib/ 目录中）。如果创建 web 项目，还会在 web/ 文件夹中创建一个包目录。

如果您在 pubspec.yaml 文件中添加 Pub 依赖项并运行`pub install`，您将看到包文件夹将包含指向您刚刚安装的 Pub 包的符号链接。如果你使用的是 Dart Editor，`pub install`一旦你修改了你的 pubspec,yaml 文件，它将自动运行。

如果您在包含这些自动生成的包文件夹之一的任何目录中创建子文件夹，则该子文件夹将获得自己的包目录。这样，无论您将代码嵌套在目录中的深度如何，您都可以访问您的 Pub 包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T03:50:05.793

谢伦的回答是正确的。我想补充一点，因为这个问题的标题是“Dart 项目中与文件夹有什么相关性？”

Dart 被设计成对网络非常友好。因为 web 上没有加载路径或类路径，所以 Dart 应用程序必须在不需要安装或预配置本地环境的情况下运行。

在 Dart 中将一个文件链接到另一个文件的唯一方法是通过 URI。这些 URI 可以是文件 URI，也可以是相对的。这意味着文件 A.dart 可以通过绝对或相对路径指向文件 B.dart。

所以，回答你的问题，Dart 应用程序的文件夹布局没有什么特别之处。只要您的 Dart 文件可以通过与网络上存在的相同类型的链接规则（想想`<a href="" or <link src=""`）引用其依赖项，该应用程序就会运行。

However, pub (the Dart dependency manager) does make a few assumptions about package and application layout. If certain conventions are followed, pub can manage symlinks for you so that it's easier to reference 3rd party dependencies. Do you need to use pub? Nope, you can manually copy files around or manually manage symlinks. But pub certainly does make it easier to use packages, given the constraints of Dart's design (no load path, no classpath).

# facebook - iOS: how to post to Facebook with the contents of a label, rather than static text

> ID：15720948
> 
> 赞同：0
> 
> 时间：2013-03-30T16:43:19.510
> 
> 标签：facebook, post, label, integration

I have an iOS project, where I have on a .xib page, a column of Labels consisting of text, and to the right of which, are a set of play buttons to play each audio, such as in the .m code:

```
-(IBAction)pushButton {
    NSString *path = [[NSBundle mainBundle] pathForResource:@"mysound" ofType:@"mp3"];
    if(theAudio)[theAudio release];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    theAudio.volume = 1.0;
    [theAudio play];
} 
```

To the right of the play button, I have a Post to Facebook button. I know that I can easily post static text to Facebook like so:

```
-(IBAction)ShareFB1 {
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    slComposeViewController = [[SLComposeViewController alloc] init];
    slComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [slComposeViewController setInitialText:@"My static text that has the contents of the label manually entered"];
    [slComposeViewController addURL:[NSURL URLWithString:@"http://stackoverflow.com"]];
    [self presentViewController:slComposeViewController animated:YES completion:NULL];
}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Facebook Account" message:@"There are no Facebook accounts confiured, configure or create accounts in Settings." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
} 
```

What I would like to do, is when the play button is pressed, I want to assign a variable to be equal to the text that is in the associated label. I imagine that should be easy enough. Then, I want to get rid of the individual Post to Facebook buttons to the right of the Play buttons, and I want to have an app bar button for single button access to post to Facebook, with the contents of the label, which would be assigned to the variable when one hits the play button. Having one Facebook button means having to dynamically assign the text to the variable be posted.

Does anyone know how to configure the code to post the contents of a label, or a variable, rather than static text? I have searched for a way to do this, but have not been successful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:46:24.280

What about using:

```
[slComposeViewController setInitialText:[NSString stringWithFormat:@"Your text no.%d here: %@",yourCounter, yourLabel.text]]; 
```

EDIT:

```
NSString  *posttofacebooktext=[mylabelname text];
[slComposeViewController setInitialText:[NSString stringWithFormat:@"Posting to Facebook: %@", posttofacebooktext]]; 
```

# android - Changing app requirements

> ID：15720949
> 
> 赞同：0
> 
> 时间：2013-03-30T16:43:19.493
> 
> 标签：android, android-manifest, google-play

How can I view and manage requirements of my app (API version is obvious and is in Manifest), but how about having GPS, phone module, and so on?

Can I publish in Google play same app but for example for phones with LTE (something like same app for different API)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T06:27:26.010

Using filters in your manifest (see links referenced below), you can use elements like `<uses-configuration>`, `<uses-feature>`, `<uses-library>`, and `<uses-sdk>` to specify which features your app requires in order to run.

You can publish your most "advanced" version of your app on Google Play and give it the highest `android:versionCode`, and then publish a "less-advanced" version with less filters and a lower `android:versionCode` value. Devices that Google Play thinks can utilize the most advanced version will receive that APK, and others will receive the lesser one.

Check these links for more information:

*   [http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)
*   [http://developer.android.com/google/play/filters.html](http://developer.android.com/google/play/filters.html)
*   [http://developer.android.com/google/play/publishing/multiple-apks.html](http://developer.android.com/google/play/publishing/multiple-apks.html)

# mysql - 文本与数值的 SQL BETWEEN

> ID：15720950
> 
> 赞同：15
> 
> 时间：2013-03-30T16:43:42.850
> 
> 标签：mysql, sql, numbers, varchar, between

`BETWEEN`在`WHERE`子句中用于选择两个值之间的数据范围。
如果我是正确的，是否排除范围的端点是 DBMS 特定的。
我无法理解以下内容：
如果我有一个值表并且我执行以下查询：

```
SELECT food_name 
    FROM health_foods 
    WHERE calories BETWEEN 33 AND 135;` 
```

查询作为结果行返回，**包括**卡路里 =33 和卡路里 =135（即**包括**范围端点）。

但如果我这样做：

```
SELECT food_name 
    FROM health_foods 
    WHERE food_name BETWEEN 'G' AND 'O'; 
```

我*没有*`food_name`以 .开头的行`O`。即范围的末尾被**排除在外**。
为了使查询按预期工作，我键入：

```
SELECT food_name 
    FROM health_foods 
    WHERE food_name BETWEEN 'G' AND 'P';` 
```

我的问题是为什么`BETWEEN`数字和文本数据有这样的差异？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-30T16:55:16.527

对于数字和字符串，Between 的操作方式完全相同。*包括*两个端点。这是 ANSI 标准的一部分，因此它是所有 SQL 方言的工作方式。

表达方式：

```
where num between 33 and 135 
```

当 num 为 135 时将匹配。当 number 为 135.00001 时将不匹配。

同样，表达式：

```
where food_name BETWEEN 'G' AND 'O' 
```

将匹配 'O'，但不匹配任何其他以 'O' 开头的字符串。

Once simple kludge is to use "~". This has the largest 7-bit ASCII value, so for English-language applications, it usually works well:

```
where food_name between 'G' and 'O~' 
```

You can also do various other things. Here are two ideas:

```
where left(food_name, 1) between 'G' and 'O'
where food_name >= 'G' and food_name < 'P' 
```

The important point, though, is that `between` works the same way regardless of data type.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T16:46:44.230

以“Orange”与“O”为例。字符串 'Orange' 显然不等于字符串 'O'，因为它更长，所以它必须更大，而不是小于。

你可以做 'Orange' < 'OZZZZZZZZZZZZZZ' 虽然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T16:45:55.833

试试这个`REGEX`

```
 WHERE  food_name REGEXP '^[G-O]'; 
```

这给了你所有以 G 开头的 food_name 直到那些以 O 开头的食物

[**在这里演示**](http://www.sqlfiddle.com/#!2/7f3f9/2)

# entity-framework - 如何首先使用 EF 代码将会员数据库附加到我自己的数据库？

> ID：15720952
> 
> 赞同：1
> 
> 时间：2013-03-30T16:43:56.267
> 
> 标签：entity-framework, asp.net-mvc-4, entity-framework-4, ef-code-first, asp.net-membership

谁能帮我解决这个问题：

好吧，我最近正在使用 ASP.NET MVC 4.5 构建一个 CMS，首先使用 Entity Framework Code，所以我的整个数据库都是即时创建的，现在的问题是我需要使用内置的 asp.net 会员数据库而不最终有两个数据库，一个用于用户和角色管理，一个用于 CMS 管理，那么我该如何解决这个问题，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:58:33.160

请点击下面的链接，如果您有任何其他问题，请告诉我。

[将 Asp.net 简单成员表作为实体框架模型的一部分](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)

# android - 直接将图像文件保存到Android相机胶卷目录？

> ID：15720953
> 
> 赞同：0
> 
> 时间：2013-03-30T16:43:58.573
> 
> 标签：android, air

有没有办法直接将图像保存到相机胶卷目录？我正在使用 CameraRoll.addBitmapData() 调用，但是它将 bitmapData 转换为 JPEG 并且所有透明度都丢失了。而且，图像被严重压缩。所以我想将透明的PNG保存到相机胶卷目录。

我正在使用 Adob​​e AIR 3.6 并在 Google Nexus 7 上的 Android 4.latest 上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:28:25.923

所以我能够成功地将图像保存到相机胶卷！现在的问题是本机 Android Image Gallery 应用程序无法识别我放在那里的任何图像，除非我重新启动设备。缩略图也有问题（它们显示不同的图像或只是黑色背景）。

这是我发现的：

*   **DCIM** – 此文件夹用于照片，并包含另一个名为**Camera**的文件夹，其中包含手机相机拍摄的所有照片和视频（由操作系统创建）
*   **下载**- 将根据下载文件的需要自动创建。[来源](http://www.lgforum.com/how_do_is/android-sd-card-folders)
*   **图片**- 不确定。

**什么不起作用**
图像库不会反映添加到目录中的新图像，直到设备重新启动。如上所述，缩略图也不正确。

我注意到在 Camera 目录中有一个 .ds_store 类型的文件和另一个缩略图目录。除了 DCIM / Camera 之外的其他目录似乎没有此文件。

**更新**
我发现相机胶卷不刷新是一个已知问题！我不知道这是否是唯一的 AIR 问题。但是添加图像后有一个扩展来刷新图像库。[http://extensionsforair.com/extensions/refresh-gallery/](http://extensionsforair.com/extensions/refresh-gallery/)。我没试过。

其他[帖子](https://stackoverflow.com/questions/8621514/how-to-know-where-on-the-sd-card-the-images-are-being-stored-dcim-camera-dcim)...

# arrays - VBA 数组和运算符

> ID：15720954
> 
> 赞同：0
> 
> 时间：2013-03-30T16:44:07.357
> 
> 标签：arrays, vb.net, excel, vba, bitwise-operators

我正在尝试在 VBA 中为 excel 编写几行代码，这是 VB.Net 版本的代码的样子。

```
 ThisVariable <<= 8

        Variable.Add(ThisVariable) 
```

如何在 VBA 中编写这些代码行？VBA 没有“<<=”运算符，也没有数组的 .Add 属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:57:20.420

对于第一个问题，VBA 没有内置位移，但您可以添加一个为您完成位移的函数。[试试这个。](http://www.excely.com/excel-vba/bit-shifting-function.shtml)

对于第二个问题，要增加数组大小，您必须使用 ReDim 命令。[这是相关信息。](http://msdn.microsoft.com/en-us/library/vstudio/w8k3cys2.aspx)

此外，您可以使用集合而不是数组。使用集合，您可以随意添加和删除其中的项目。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:58:56.050

`<<=`将数字左移 8 位二进制数字，即将数字乘以 256。要向数组添加内容，您可以重新调暗数组：

```
ThisVariable = ThisVariable * 256
Dim U As Long
Dim L As Long
L = LBound (Variable)
U = UBound (Variable)
ReDim Preserve Variable (L To U+1)
Variable (U+1) = ThisVariable 
```

请注意，为了添加元素而重新调整数组并不是很有效。您应该尝试找到另一种方法（例如，使用更大的数组并将“有效”元素的数量存储在计数器变量中——或者甚至为此创建一个类模块）。

# eclipse - 在 Eclipse 中，如何从另一个具有依赖项的项目中排除一个 Maven 项目的测试文件夹？

> ID：15720955
> 
> 赞同：1
> 
> 时间：2013-03-30T16:44:08.910
> 
> 标签：eclipse, maven, testing, m2e

我在同一个工作区中将两个 Maven 项目导入到 Eclipse 中。两者都有一个具有相同名称和包的类，但不同的实现和在每个项目中的不同位置。让我们调用这个类`com.namespace.Factory`

项目 A 在其测试文件夹下有 Factory，即：`/src/test/java/com/namespace/Factory.java`

项目 B 在其主要源文件夹下有 Factory，即：`/src/main/java/com/namespace/Factory.java`

还有一个项目 C 依赖于两者。项目 C 还使用项目 B 中的 Factory 进行一些单元测试。现在的问题是 Eclipse 无法编译 Project C，因为它无法区分两个工厂类。如果我在命令行中构建所有项目，它们就没有问题。

您会认为 Eclipse 会忽略 Project A Factory 类，因为它正在测试中。

我正在使用 m2e 插件。我目前的工作是设置 m2e 以不解决工作区中项目 C 的依赖关系。这会迫使它下载其中没有测试的 jar。但是，这意味着我在 A 或 B 中都有更改，我必须手动安装 A 或 B 将最新的 jar 推送到本地 repo，并更新项目 C 的依赖项以拉下最新的 jar。

有没有办法从项目 C 的构建路径中排除项目 A 测试文件夹，以便我可以继续解决工作区中的所有问题？感觉就像 Eclipse 正在破坏 maven 项目的基础。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:27:29.517

我认为您只是受上游错误影响的另一个用户：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=376616](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376616)

总结起来，错误报告讨论包括：

> JDT 只为每个 Eclipse 项目实现一个构建路径。这不太可能改变，因为这是基本的设计选择，许多 API 和实现细节都依赖于此。

好吧，但我猜这并不能真正回答你的问题。因此，我在这里看到了多种选择，具体取决于您对项目可能产生的影响：

*   要么尝试重命名其中一个类 => 名称将是唯一的
*   或者如果这些类包含基本相同的功能，则在项目之间使用依赖关系，甚至创建新的，其他 2 将依赖
*   这就是我现在想到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T13:37:43.933

也许你可以试试这个：在项目 A 的属性对话框中（通过右键单击项目然后单击属性到达那里），
单击左侧的部署程序集。
Eclipse 将显示所有源文件夹。
选择测试文件夹 (/test) 并单击删除。

# mongodb - 获取下一个和上一个文档

> ID：15720956
> 
> 赞同：1
> 
> 时间：2013-03-30T16:44:28.693
> 
> 标签：mongodb

在 mongo 集合中，我有一个单词列表（数百万个单词）。

```
{word:'a'}
{word:'b'}
{word:'x'}
{word:'y'}
{word:'z'} 
```

我需要获得一个单词的词汇相邻（下一个和上一个）。我正在寻找最有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:09:57.327

为什么不简单地执行两个查询？

第一个将查找具有 'word > "YOURWORD"' 的文档，按 'word' (asc) 排序，限制为 1，然后第二个将查找具有 'word < "YOUTWORD"' 的文档，按 'word' 排序(desc)，再次限制为 1。

我猜你在这个领域有一个索引，所以它应该是相当高效的。

这是一个代码示例：

```
var prev = db.words.find({"word": {$gt: "YOURWORD"}}).sort({"word": 1}).limit(1);
var next = db.words.find({"word": {$lt: "YOURWORD"}}).sort({"word": -1}).limit(1); 
```

# haskell - The Type signature lacks an appropriate binding [Haskell]

> ID：15720960
> 
> 赞同：4
> 
> 时间：2013-03-30T16:45:21.117
> 
> 标签：haskell, types, compilation

I have been googling around to find the answer, and even came to a few questions asked here. It seems that this is an ambiguous error and I can't figure out how to solve it in my instance.

The offending code is below:

```
pos :: (Eq a) => [a] -> a -> Int
pos [] _ = -1
pos (x:xs) y
| not $ elem y (x:xs) = -1
| x == y =  0
| otherwise = 1 + pos xs y

-- Get the same element from another range as one element of the first range.
refPos :: (Eq a) => [a] -> [b] -> a -> b
refPos r1 r2 e1 = r2 !! (r1 `pos` e1)

letterNumber :: (Eq a, Char a) => a -> Int 
lettNumber x = refPos ['a'..'z'] [0..25] x 
```

The text of the exact error is:

15:1 The type signature for letterNumber lacks an accompanying binding.

Originally the type signature I put was Char -> Int, but that didn't work (it said something about Eq, but I'm too new too Haskell to interpret it properly). So I changed the type signature to have an Eq class constraint. If someone can point out what is wrong or a workaround, it would be greatly appreciated as this is a doorstop problem to a project I'm working on.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:49:57.517

You provide a type signature for `letterNumber`, but then provide a binding for `lettNumber`. Note the missing `er`.

Just rename `lettNumber` to `letterNumber`, to match the spelling in the type signature.

* * *

Also, the correct type signature for `letterNumber` is

```
letterNumber :: Char -> Int 
```

# javascript - Transparent-gradient menu

> ID：15720963
> 
> 赞同：2
> 
> 时间：2013-03-30T16:45:39.067
> 
> 标签：javascript, jquery, html, css

I have a complex problem. I want to create a menu. At the same time just only 3 elements are visible, and 2 other, which are transparent-gradient. If I move the cursor in a transparent element, the list will scroll up or down. The menu menu have sub-levels, which have the same format as the main level.

Here is a sample: ![enter image description here](../Images/dfe4b5b496e91d820ea8d6ab0c13f0d6.png)

When it stop, it's okay. The first, and last displaying element's CSS set linear-gradient. When it move, i use jquery to animate the moving. But the result is not exactly I want. When it scroll, it looks like the whole list is moving, not scrolling. I want to use jQuery just the move animation, and the transparent gradient set the whole list, not for the list element.

I guess I should use mask for the list, but the background is transparent too. I run out from ideas.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:46:49.530

I solve it. I use "overflow:hidden" and svg mask. The sub-level is an other ul list, not include in the first level, and jquery set the display.

# javascript - javascript测试函数总是返回false

> ID：15720967
> 
> 赞同：0
> 
> 时间：2013-03-30T16:46:03.060
> 
> 标签：javascript, regex, testing

我不明白为什么在两个字符串相等时它给了我错误。

```
var str = 'https:\/\/monsite.com\/"onload="alert(1)"';
var patt = /https:\/\/monsite.com\/"onload="alert(1)"/i;
var result = patt.test(str);
document.write("Returned value: " + result); 
```

我是一个新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:50:18.043

您需要在正则表达式中转义括号，它们是特殊字符。

```
/https:\/\/monsite.com\/"onload="alert\(1\)"/ 
```

# ios - 我的 Cocos2d 2.0 游戏在真机上使用 Instruments 时崩溃

> ID：15720969
> 
> 赞同：0
> 
> 时间：2013-03-30T16:46:09.657
> 
> 标签：ios, xcode, cocos2d-iphone, instruments

我不明白为什么我的应用程序在使用 Instruments 时会在真实设备上崩溃。如果没有将 Instruments 附加到 APP 进程，则不会。最常见的原因是什么？

编辑：我在“配置文件”架构中将架构更改为发布（它被设置为构建）。这让游戏进入了第二个场景。但是问题仍然存在，因为它在几秒钟后崩溃。查看“分配”图，最大峰值为 18/20MB，似乎并没有那么高。我正在使用的 iPod touch 4 gen 上没有运行其他程序。

在下面的照片中，场景 1 用 1 标记，第二个用 2 标记。

![怎么了](../Images/7c8e7b7bd0a3afc25860af95a766b83d.png)

编辑 2： 我的仪器似乎使用了 60MB 的实际内存使用量[（就像这个用户一样）](https://stackoverflow.com/questions/6921074/what-does-the-dtmobileis-mean-for)：

![在此处输入图像描述](../Images/54e8f385dd09c6c0165383409adb2cab.png)

# javascript - cascading dropdown list on mvc4 not updating nor loading javascript file

> ID：15720975
> 
> 赞同：0
> 
> 时间：2013-03-30T16:46:43.103
> 
> 标签：javascript, asp.net, asp.net-mvc, cascadingdropdown

I'm currently trying to create a new set of cascading dropdown lists by following this tutorial : [http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)

problem is it doesnt work and I'm basically illiterate on javascript (currently I dont have the time to sit and learn it), somehow the dropdown lists are not working, only the first one shows the first hierarchy info.

This is what I've done:

First the controller:

Here's the index method:

```
public ActionResult Index()
    {
        var list = repo.GetParentEstablishments();

         ViewBag.Parent = (new SelectList(list.ToArray(),"EstablishmentId","Name"));
        return View();

    } 
```

Here's the method that's supposed to return the list of children for the selected father:

```
 [HttpPost]
    public ActionResult Children(int parentId)
    {
        var parents = repo.GetChildrenEstablishments(parentId);
        return Json(new SelectList(parents, "EstablishmentId", "Name"));
    } 
```

Here's the view for the index method:

```
@using (Html.BeginForm("Index", "Ticket", FormMethod.Post, new { id =     "ParentChildrenFormID", data_childrenListAction = @Url.Action("ChildrenList") }))
{
<fieldset>
    <legend> Parent/Children</legend>
    @Html.DropDownList("Parents", ViewBag.Parent as SelectList, "Select a Parent", new {id="ParentsID"})
    <div id="ChildrenDivId">
        <label for="Children">Children </label>
        <select id="ChildrenID" name="Children"></select>
    </div>
    <p>
        <input type ="submit" value="Submit" id="SubmitID" />
    </p>
 </fieldset>
}
<script src ="@Url.Content("~/Scripts/parentChildren.js")"></script> 
```

And finally here's the script file:

```
$(function () {

$('#ChildrenDivId').hide();
$('#SubmitID').hide();

$('#ParentsID').change(function () {
    var URL = $('#ParentChildrenFormID').data('childrenListAction');
    $.getJSON(URL + '/' + $('#ParentsID').val(), function (data) {
        var items = '<option>Select a Children</option>';
        $.each(data, function (i, child) {
            items += "<option value='" + child.value+ "'>" + child.Name + "</option>";
            // state.Value cannot contain ' character. We are OK because state.Value = cnt++;
        });
        $('#ChildrenID').html(items);
        $('#StatesDivID').show();

    });
});

$('#ChildrenID').change(function () {
    $('#SubmitID').show();
});
}); 
```

For what I've managed to understand from the javascript function, the div that has the label and dropdown for the children should appear hidden once the page is loaded and appear once the user selects a parent from the first list, currently this is not happening and instead everything shows up once the page is loaded. Also once I select a parent nothing happens on the second list, **I can infer from this that the javascrip file is not being executed on the users browser, why isn't it being executed? what am I doing wrong?**

Thank in advance, any help will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:28:03.410

You have an error on the following line

```
items += "<option value='" + child.value + "'>" + child.Name + "</option>"; 
```

Which should be:

```
items += "<option value='" + child.Value + "'>" + child.Text + "</option>"; 
```

Since your controller action is returning a `SelectList`, this class is an `IEnumerable<SelectListItem>` where `SelectListItem` has 2 properties called `Value` and `Text`.

There's also another issue with your code. You have used the folllowing to construct the url to your controller action:

```
URL + '/' + $('#ParentsID').val() 
```

which will result in an url of the form:

```
/SomeController/Children/123 
```

But the action argument of your `Children` action is called `parentId`. If you are using the default route setup, only an `{id}` parameter will be sent as part og of the uri path (that's the default route pattern: `{controller}/{action}/{id}` and not `{controller}/{action}/{parentid}`). So you should either change your route setup or pass the parentId parameter like this:

```
$.getJSON(URL, { parentId: $('#ParentsID').val() }, function (data) {
    ...
}); 
```

Yet another issue with your code is that your Children conrtoller action is decorated with the `[HttpPost]` attribute but the `$.getJSON` method sends a GET request. So it won't work. You could use the `$.post` method instead:

```
$.post(URL, { parentId: $('#ParentsID').val() }, function (data) {
    ...
}); 
```

Another issue is that you are showing the `StatesDivID` but your actual div that was hidden is `ChildrenDivId`. Make sure you are showing the proper element:

```
$('#ChildrenDivId').show(); 
```

Also make sure you have the jQuery script referenced before your `parentChildren.js` script. Right now you have included your script inside the view but cannot see jQuery being included. Maybe you have it in your _Layout.

I would recommend you using a javascript debugging tool such as FireBug or Chrome developer toolbar to analyze your javascript code.

# java - 根据选择的 Spinner 项目调用不同的方法 - Android

> ID：15720977
> 
> 赞同：2
> 
> 时间：2013-03-30T16:46:44.250
> 
> 标签：java, android, xml

我一直在查看[本教程](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)以了解如何使用 Spinners，但我现在被卡住了。

目前，当从微调器中选择一个项目时，会显示带有选项的吐司，我想做的是运行一个方法来设置所选国家的纬度和经度。

通过调用方法“SetLocationJapan”，“Set Location to Japan”按钮可以完美工作。我只想把这个过程放到微调器中，这样每当做出选择时，都会更新纬度和经度。

例如：如果在微调器中选择了日本 我想打电话`protected void setLocationJapan()` 如果选择了法国 我想打电话`protected void setLocationFrance()` 如果选择了印度 我想打电话`protected void setLocationIndia()`

要求的代码：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.StringReader;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;

public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public Button setLocationJapan;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;
    private Spinner spinner1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);

        addListenerOnSpinnerItemSelection();

        findViewById(R.id.my_button).setOnClickListener(this);
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                new MyLocationListener());

        setLocationJapan = (Button) findViewById(R.id.SetLocationJapan);
        getLocation = (Button) findViewById(R.id.GetLocation);
        LongCoord = (TextView) findViewById(R.id.LongCoord);
        LatCoord = (TextView) findViewById(R.id.LatCoord);

        getLocation.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // When GetLocation button is clicked the showCurrentLocation
                // function is ran
                showCurrentLocation();
            }

        });

        setLocationJapan.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // When SetLocation button is clicked the setCurrentLocation
                // function is ran
                setLocationJapan();
            }

        });
    }

    public void addListenerOnSpinnerItemSelection() {
        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    }

    protected void setLocationJapan() {
        // TODO Auto-generated method stub
        LatCoord.setText("35.4112");
        LongCoord.setText("135.8337");
    }

    protected void setLocationFrance() {
        // TODO Auto-generated method stub
        LatCoord.setText("65.4112");
        LongCoord.setText("85.8337");
    }

    protected void setLocationIndia() {
        // TODO Auto-generated method stub
        LatCoord.setText("21.4112");
        LongCoord.setText("105.8337");
    }

    protected void showCurrentLocation() {
        // TODO Auto-generated method stub
        // This is called to find current location based on GPS data and sends
        // this to LongCoord and LatCoord TextViewsw
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }

    @Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.my_button);
        b.setClickable(false);
        new LongRunningGetIO().execute();
    }

    private class LongRunningGetIO extends AsyncTask<Void, Void, String> {

        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            // Finds todays date and adds that into the URL
            Calendar c = Calendar.getInstance();
            System.out.println("Current time => " + c.getTime());
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(c.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            if (results != null) {
                try {

                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    InputSource s = new InputSource(new StringReader(results));
                    Document doc = dBuilder.parse(s);
                    doc.getDocumentElement().normalize();
                    TextView tvSunrise = (TextView) findViewById(R.id.Sunrise);
                    TextView tvSunset = (TextView) findViewById(R.id.Sunset);
                    tvSunrise.setText(doc.getElementsByTagName("sunrise")
                            .item(0).getTextContent());
                    tvSunset.setText(doc.getElementsByTagName("sunset").item(0)
                            .getTextContent());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            Button b = (Button) findViewById(R.id.my_button);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }   
} 
```

CustomOnItemSelectedListener.java

```
package richgrundy.learnphotography;

import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Toast;

public class CustomOnItemSelectedListener implements OnItemSelectedListener {

  public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) {
    Toast.makeText(parent.getContext(), 
        "You have changed to : " + parent.getItemAtPosition(pos).toString(),
        Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
  }

} 
```

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".SunriseSunset" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:entries="@array/country_arrays"
        android:padding="10dp" />

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Date:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/Date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Current Date"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Location:"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <Button
        android:id="@+id/GetLocation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Find Current Location" />

    <Button
        android:id="@+id/SetLocationJapan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Set Location to Japan" />

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/LatCoord"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp" />

        <TextView
            android:id="@+id/LongCoord"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp" />
    </LinearLayout>

    <Button
        android:id="@+id/my_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Calculate Sunrise/Sunset Time" />

    <TextView
        android:id="@+id/Sunrise"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="00:00:00"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/Sunset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="00:00:00"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

任何帮助将不胜感激，谢谢！

我很确定我需要`setLocationJapan()`在课堂内移动等，`CustomOnItemSelectedListener`但不知道如何从那里开始。

我更喜欢伪代码答案，所以如果可能的话，我可以自己解决这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:57:56.217

这有点脏，但是您可以将您的活动传递给`CustomOnSelectedListener`然后使用该活动调用这些方法。例子：

```
public class CustomOnSelectedListener extends implements OnItemSelectedListener {
    Activity mActivity;

    CustomOnSelectedListener(Activity mActivity) {
         this.mActivity = mActivity;
    }

    public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) {
         Toast.makeText(parent.getContext(), 
              "You have changed to : " + parent.getItemAtPosition(pos).toString(),
              Toast.LENGTH_SHORT).show();
         if (mActivity instanceof SunriseSunset) {
             SunriseSunset sunrise = (SunriseSunset) mActivity;
             switch (pos) {
                 case 1: // Assuming Japan is first on your list
                     sunrise.setLocationJapan();
                     break;
                 ... // fill in the rest here
             }
         }
    }

... // rest of CustomOnSelectedListener here

} 
```

但是，这意味着您的所有`setLocationJapan`,`setLocationIndia`等都必须从 更改`protected`为`public`才能`CustomOnSelectedListener`调用它们。此外，您现在必须像这样实例化`CustomOnSelectedListener`：

```
spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener(this)); 
```

# c - 使用 C 在 OpenGL 中绘制多个对象

> ID：15720979
> 
> 赞同：2
> 
> 时间：2013-03-30T16:46:51.923
> 
> 标签：c, opengl, graphics

我有一个[OpenGL](http://en.wikipedia.org/wiki/OpenGL)程序可以通过鼠标单击来绘制一个圆圈。该程序运行良好，除非当我尝试绘制多个圆圈时，前一个圆圈消失了。这是代码：

```
#include <GL/glut.h>
#include<math.h>
#include<stdio.h>
struct position
{
    float x;
    float y;
};
typedef struct position Position;

Position start;
Position finish;

void setPixel(int x, int y)
{
    glBegin(GL_POINTS);
    glVertex2f(x, y);
    glEnd();
}

void circle(int a0, int b0, int a1, int b1)
{
    int i, x, y, x1, y1, r, p;

    x1 = (a0+a1)/2;
    y1 = (b0+b1)/2;

    r = sqrt((((a1-x1)*(a1-x1))+((b1-y1)*(b1-y1))));

    p = (5/4-r);
    x = 0;
    y = r;
    while(x <= y)
    {
        setPixel( x+x1,  y+y1);
        setPixel( x+x1, -y+y1);
        setPixel(-x+x1, -y+y1);
        setPixel(-x+x1,  y+y1);
        setPixel( y+x1,  x+y1);
        setPixel( y+x1, -x+y1);
        setPixel(-y+x1, -x+y1);
        setPixel(-y+x1,  x+y1);

        x = x+1;
        if (p<0)
            p = p+2*x+1;
        else {
            y = y-1;
            p = p+2*x-2*y+1;
        }
    }
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glPushMatrix();

    circle(start.x, start.y, finish.x, finish.y);

    glPopMatrix();

    glutSwapBuffers();
}

void reshape( int w, int h)
{
    glViewport( 0, 0, w, h);
    glMatrixMode( GL_PROJECTION);
    glLoadIdentity();
    glOrtho( 0, w, h, 0, -1, 1);
}

void mouse(int button, int state, int x, int y)
{
    switch(button)
    {
        case GLUT_LEFT_BUTTON:

           if(state == GLUT_DOWN)
           {
               start.x = x; //x1
               start.y = y; //y1
           }

           if(state == GLUT_UP)
           {
               finish.x = x; //x2
               finish.y = y; //y2
           }
           break;

           glutPostRedisplay();
    }
}

void motion( int x, int y)
{
    finish.x = x;
    finish.y = y;
    glutPostRedisplay();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(640, 480);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("");
    glutMouseFunc(mouse);
    glutMotionFunc(motion);
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);

    glutMainLoop();
    return 0;
} 
```

如何同时显示多个图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:15:20.753

如果你想画多个东西，那就画多个东西。你只画一个圆圈。如果你改变那个圆圈的位置，它只会被画在一个不同的地方。

但是我真的不建议在 GL 中画这样的图。使用固定功能管道来绘制单个像素`GL_POINTS`是非常低效的。GL 并非设计为光栅绘图 API。

# java - 仅拆分 3 个字母的 StringBuilder

> ID：15720980
> 
> 赞同：-3
> 
> 时间：2013-03-30T16:46:56.707
> 
> 标签：java, android

我的`StringBuilder`：

```
StringBuilder s = new StringBuilder(); 
```

和输出：

```
s.toString() = "ABCDEFG" 
```

我只想要开头的3个字母。比如“ `ABC`”。我需要使用什么代码来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:48:04.460

String 和 StringBuilder 都有[`substring()`](https://developer.android.com/reference/java/lang/StringBuilder.html#substring%28int%29)方法。只需调用：

```
s.substring(0, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:55:21.173

使用 string.remove 方法

```
 string s = "ABCDEFG";
    s = s.Remove(3, 4) 
```

# winforms - 将 UI Listview 添加到我的并行进程会大大减慢速度

> ID：15720981
> 
> 赞同：1
> 
> 时间：2013-03-30T16:47:09.977
> 
> 标签：winforms, listview, task-parallel-library

我在后台保存了超过 100000 个文件，而且一切都很好，等等……我正在使用 tpl 库，真的让线程更容易。

我的问题：被要求为用户添加一些用户界面。我现在有 2 个列表视图

1.  "lvwInProcess" 列出所有正在处理的文件
2.  "lvwSaved" 列出所有已保存的文件

我不能使用“AddRange”，因为我一次更新一个，但是添加和删除一个项目会使我减慢 1000 倍

下面是一些简化的测试代码，给大家一个思路

```
 private void button1_Click(object sender, EventArgs e)
    {
        int count = 0;
        var parOpts = new ParallelOptions();
        string[] files = GetFiles();
        parOpts.MaxDegreeOfParallelism = Environment.ProcessorCount;
        Task t1 = Task.Factory.StartNew(() =>
                                            {
                                                Parallel.ForEach(files, parOpts, (file, loopState) =>
                                                {
                                                    count = Interlocked.Increment(ref count);
                                                    SaveFile(file, count);

                                                });
                                            });
    }

    private void SaveFile(string file, int count)
    {           
        // FileProcess.Save(file);

        //update listview but removing the file
        // from the processing listview and add to the Saved listview

        var item = new ListViewItem(Path.GetFileName(file));
        lvwInProcess.Invoke(new MethodInvoker(() => lvwInProcess.Items.Add(item)));
        lvwSaved.Invoke(new MethodInvoker(() => lvwSaved.Items.Remove(item)));
        lvwInProcess.Invoke(new MethodInvoker(() => lvwProcessing.Refresh()));
        lvwSaved.Invoke(new MethodInvoker(() => lvwSaved.Refresh()));
    } 
```

在添加和删除时无法使用 VirtualListView 我应该使用不同的控件吗？

以上可以改进吗？你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:34:25.627

在您的 ListViews 中有这么多项目，我肯定会在 Add/Refresh 方法周围使用 BeginUpdate 和 EndUpdate。这将减少一些 UI 的渲染时间。也可以使用 BeginInvoke() 来异步更新 UI。

# java - 使用 Kivy (Python) 在 Android 上录制视频

> ID：15720984
> 
> 赞同：2
> 
> 时间：2013-03-30T16:47:36.710
> 
> 标签：java, android, python, video, kivy

我正在尝试通过 Kivy ( [http://kivy.org/#home](http://kivy.org/#home) ) 录制视频，但不确定要使用什么方向或库。

目前我的相机小部件使用下面的代码，它可以让相机显示在屏幕上，但我不知道如何让它记录和保存视频文件。任何帮助是极大的赞赏！

```
class MyApp(App):
          # Function to take a screenshot
          def doscreenshot(self,*largs):
                Window.screenshot(name='screenshot%(counter)04d.jpg')

          def build(self):
                camwidget = Widget()  #Create a camera Widget
                cam = Camera()        #Get the camera
                cam=Camera(resolution=(640,480), size=(500,500))
                cam.play=True         #Start the camera
                camwidget.add_widget(cam)

                button=Button(text='screenshot',size_hint=(0.12,0.12))
                button.bind(on_press=self.doscreenshot)
                camwidget.add_widget(button)    #Add button to Camera Widget

                return camwidget

if __name__ == '__main__':
    MyApp().run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:07:22.313

Kivy 仅支持播放视频/相机小部件。框架中没有任何内容用于编码视频并将其保存到文件中。

尝试直接使用gstreamer，也许你会有更多的机会。

# c - Parent and child proc sync using signals

> ID：15720986
> 
> 赞同：1
> 
> 时间：2013-03-30T16:47:55.820
> 
> 标签：c, synchronization, signals, parent-child

I have some troubles: it is not clear for me how to synchronise parent and child processes using signals, and this code doesn't work. I thought that it should work like that: parent sends signal to child, child's `pause()` is end, child sends signal to parent, parent's `pause()` is end .. etc why it is not so?

```
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <sys/types.h>

void handler_cp() {
}

void handler_pc() {
}

void child_proc() {
    int i = 0;
    for (; i < 50; ++i) {
        pause();
        kill(getppid(), SIGUSR2);
    }

void parent_proc(pid_t ch) {
    int j = 0;
    for (; j < 50; ++j) {
        kill(ch, SIGUSR1);
        pause();
    }
}

int main(int argc, char* argv[]) {
    signal(SIGUSR1, handler_cp);
    signal(SIGUSR2, handler_pc);
    pid_t ch = fork();
    if (ch == 0)
        child_proc();
    else
        parent_proc(ch);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:11:45.730

The signal may arrive before `pause` is called, in which case it will deadlock. Using signals for synchronization is, in general, a very bad idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-01T12:25:05.803

In the child_proc method, reverse the lines as :

```
 kill(getppid(),SIGUSR2);
          pause(); 
```

This will wake the parent before the child goes to sleep.

# vb.net - VB.NET - 浏览堆叠面板向导样式

> ID：15720990
> 
> 赞同：1
> 
> 时间：2013-03-30T16:48:19.777
> 
> 标签：vb.net, panels

第一次在这里发帖。我有一个相对不好的问题 - 但我是新手，所以请耐心等待。

我正在为朋友编写一个简单的应用程序来跟踪一些日常问题/行为以进行报告。我试图使用几乎是一种向导风格，但我发现的向导示例要么是不必要的复杂，要么是过时的。

我所拥有的是一个 Windows 表单——为了争论——5个面板，彼此堆叠。每个面板都包含一组不同的控件（我无法完全重复使用所有控件或进入“模板”方向）。面板下方是 3 个按钮 - 取消、返回、下一步。

我想要做的就是使用 Next 和 Back 按钮在面板之间导航。即当我单击“下一步”时，单击事件从面板 A 设置变量值，然后将其隐藏并加载面板 B，然后下一步设置 B 的值并加载 C 等等。

我想我可以用某种数组或对象列表来做到这一点，但我不确定最好的方法。我在另一个论坛上问过，我得到的唯一答案是将按钮添加到面板中，并让它们专门用于将表单置于前后。这似乎非常低效，我知道有更好的方法来做到这一点。你们能对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:03:41.077

我个人会创建一个`List<Of Panel>`并将面板添加到它。然后使用一个整数并在 0 到 4 之间递增，`BringToFront`用于显示当前面板。像这样的东西。

```
Public Class Form1
    Dim myPanels As List(Of Panel) = New List(Of Panel)
    Dim count As Integer = 0

    Private Sub btnCancel_Click(sender As System.Object, e As System.EventArgs) Handles btnCancel.Click
        count = 0
        myPanels(count).BringToFront()
    End Sub

    Private Sub btnNext_Click(sender As System.Object, e As System.EventArgs) Handles btnNext.Click
        If count < 4 Then
            count += 1
        Else
            count = 0
        End If
        myPanels(count).BringToFront()
    End Sub

    Private Sub bntPrevious_Click(sender As System.Object, e As System.EventArgs) Handles btnPrevious.Click
        If count > 0 Then
            count -= 1
        Else
            count = 4
        End If
        myPanels(count).BringToFront()
    End Sub

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        myPanels.Add(Panel1)
        myPanels.Add(Panel2)
        myPanels.Add(Panel3)
        myPanels.Add(Panel4)
        myPanels.Add(Panel5)
        myPanels(count).BringToFront()

    End Sub
End Class 
```

# mysql - Get entries in order they were inserted without a primary key?

> ID：15720992
> 
> 赞同：0
> 
> 时间：2013-03-30T16:48:38.317
> 
> 标签：mysql

I am wondering if it is possible to query any database entries in order they were inserted without a primary key?

Is there a specification in the SQL which order the entries have on a query like this:

```
SELECT *
FROM tbl
LIMIT 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:50:00.470

There is not. There is no way to guarantee the row order of the records. You must use `ORDER BY`.

See [MySQL row order for "SELECT * FROM table_name;"](https://stackoverflow.com/questions/1949641/mysql-row-order-for-select-from-table-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:51:42.703

Without specifying `ORDER BY`, there is no guarantee that your columns will be returned in any particular order -- you should consider it to be random. The order depends on the engine; with MyISAM they will be returned in INSERT order unless there have been updates/deletes. With InnoDB, they will be ordered by the primary key.

If you want your columns to be sorted in a particular order, include an ordinal column / timestamp in the table definition and `ORDER BY` that.

# android - 有没有办法在 Google Play 应用商店中更改应用程序的名称？

> ID：15720994
> 
> 赞同：17
> 
> 时间：2013-03-30T16:49:13.677
> 
> 标签：android, google-play

去年我向应用商店提交了一个应用程序，几周前我发现这个名称被用于类似的东西。有没有办法更改应用程序的名称？

**更新**：
在 AIR 中，您的应用程序有一个应用程序描述符文件。在应用程序描述符文件中是 Android 清单。

在应用程序描述符文件中更改名称属性（保持 id 相同）：

```
<application xmlns="http://ns.adobe.com/air/application/3.6">

    <id>com.mycompany.myAppID</id>
    <filename>MyApplicationFile</filename>
    <name>My Application Name</name> 
```

**起初**我认为您需要更改 Android 特定部分中应用程序标签上的“android:label”属性，如下所示：

```
<android>
    <manifestAdditions><![CDATA[
        <manifest android:installLocation="auto">
            <uses-sdk android:targetSdkVersion="12"/>
            <uses-sdk android:minSdkVersion="8"/>
            <application android:label="My Application Name"></application>
        </manifest>
    ]]></manifestAdditions>
</android> 
```

但是当我这样做时，我会得到一个错误，“错误 404：Android 属性 android:label 不允许被覆盖”。我猜 AIR 编译器正在通过 name 属性设置该属性。

在设备上的 Android 中，名称已更改。但是，我还没有将它上传到 GooglePlay。我想我也需要在那里更改应用程序产品名称。

**更新**
答案：更改名称属性。

```
<application xmlns="http://ns.adobe.com/air/application/3.6">

    <id>com.mycompany.myAppID</id>
    <filename>MyApplicationFile</filename>
    <name>Application Name Can Change</name> 
```

您无法更改答案中提到的 ID，但可以更改名称。我更改了名称，创建了一个新版本，将其上传到 Google 应用商店，它已成功在 Google 应用商店中更改。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T06:26:38.497

是的，您可以随时更改名称，方法是更改​​ AndroidManifest.xml 文件中应用程序标签的 android:label 属性。

**但是，一旦您将应用程序上传到 Play 商店，您就无法更改包名称。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-27T06:51:25.127

事实证明，要更改应用程序的名称，我所要做的就是更改应用程序描述符文件中的 name 属性。

前：

```
<application xmlns="http://ns.adobe.com/air/application/3.6">

    <id>com.mycompany.myAppID</id>
    <filename>MyApplicationFile</filename>
    <name>My Application Name</name>

</application> 
```

后：

```
<application xmlns="http://ns.adobe.com/air/application/3.6">

    <id>com.mycompany.myAppID</id>
    <filename>MyApplicationFile</filename>
    <name>My Shiny New Application Name</name>

</application> 
```

我更改了名称，创建了一个新的构建和包，将其上传到 Google 应用商店并发布。上传几分钟后，我更改了 Google 应用商店列表的名称。当应用程序更改上线时，应用程序名称已更改。该应用程序可能处于草稿模式，但我想我是在更改商店名称之前意外发布的。无论哪种方式，它都已更新。

应用程序 ID 显示在某些位置和列表中，并且在将其提交到某些应用程序商店后，除了提交具有该 ID 的新应用程序外，您无法更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T16:53:53.863

如果您想更改应用名称，请查看[此链接。](https://stackoverflow.com/questions/5443304/how-to-change-an-android-apps-name)您还必须在 Google Play 上更新您的应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T17:29:58.557

我还不能发表评论，所以这是我的答案。上传第一个 APK 后，您将无法更改包的名称。

据我所知，您也无法从商店中删除应用程序。您只能停用 APK 并取消发布商品详情。据我所知，您不能删除它以允许您再次上传同名的包 o_0 - 考虑到我第一次拼错了我的包名，这对我来说有点问题：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-22T08:56:12.257

您无需重新上传您的包裹。`All apps -> select app -> store presence -> store listing`并更改标题

# list - 在谓词中包含另一个函数的过滤函数

> ID：15720998
> 
> 赞同：1
> 
> 时间：2013-03-30T16:49:36.377
> 
> 标签：list, haskell, filter

我有一个关于`filter`. 我怎样才能使我的函数（`manhattanDistance`）将获取列表中的每个元素并将其用于自身？你能解释一下它是如何实现的吗？

```
func :: [(Int,Int)] ->
        (Int, Int, [Char], [Char], [Char], [Char],
                   [Char], [Char], [Char], [Char]) ->
        [(Int,Int)]
func (x:xs) agent  = filter ((manhattanDistance x agentCoord(agent)) == 1) (x:xs) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:09:13.143

问题是您没有使用过滤器的 lambda 参数，而是引用了外部函数列表的头部。这是一个更正的版本：

```
func 
  :: [(Int, Int)] 
  -> (Int, Int, [Char], [Char], [Char], [Char], [Char], [Char], [Char], [Char]) 
  -> [(Int, Int)]
func xs agent = 
  filter (\e -> manhattanDistance e (agentCoord agent) == 1) xs 
```

顺便说一句，你拥有的那个元组应该被规范化为 ADT。使用如此庞大的元组通常被认为是一种不好的做法，并且通过函数签名的可读性，您可以了解原因。