# StackOverflow 问答 13752000-13752999

# node.js - 无法将此 Jade 转换为 EJS

> ID：13752003
> 
> 赞同：0
> 
> 时间：2012-12-06T20:31:35.813
> 
> 标签：node.js, express, pug, ejs

我正在尝试将[JShare](https://github.com/brooklynDev/JShare)模块用于 Node/Express。

Github 上给出的示例说：

> 接下来，您需要在布局文件中调用 JShare 辅助方法：

```
!!!
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    !{includeJShare()}
  body!= body 
```

所以，这个例子是在 Jade 中。我正在使用 EJS，并且对于我的生活，我无法弄清楚如何实现辅助方法......这看起来很简单，但我不确定**!{}**在 Jade 中做了什么，或者如何复制它在 EJS 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:22:12.090

`!{var}`是玉中的未转义插值。您应该能够通过执行以下操作在 ejs 中获得相同的东西：

```
<%- includeJShare() %> 
```

这应该写在`<script>`标签中。

**编辑**

如果 ejs 尝试解析，请向[https://github.com/brooklynDev/JShare/issues](https://github.com/brooklynDev/JShare/issues)`include` （或 ejs）提交补丁请求，同时进入 node_modules/JShare/jshare.js 并更改为 just然后使用你的ejs。`res.locals.includeJShare``res.locals.JShare``JShare()`

# ios - 是否可以在 iBooks 上的电子书中保存数据？

> ID：13752007
> 
> 赞同：0
> 
> 时间：2012-12-06T20:31:43.987
> 
> 标签：ios, ibooks

我必须为 iBooks 开发电子书，并且需要允许用户将数据保存到本地存储中以便在插入计算机时检索，或者将数据上传到某个地方的云，然后从网站检索。

我知道你可以在电子书中对非书本的东西做各种各样的事情，但我似乎找不到任何关于这种数据交换是否可行的信息。

# haskell - 带有 HashMap 的模棱两可的类型变量

> ID：13752014
> 
> 赞同：4
> 
> 时间：2012-12-06T20:32:14.183
> 
> 标签：haskell

我最近开始玩 haskell，在使用 HashMap 时遇到了一个问题，这个玩具示例可以说明这一点：

```
import Data.HashMap as HashMap

foo = HashMap.insert 42 53 HashMap.empty 
```

这是我在解释器中加载文件或编译文件时遇到的错误：

```
Prelude List HashMap> :load TypeError.hs
[1 of 1] Compiling Main             ( TypeError.hs, interpreted )

TypeError.hs:3:22:
    Ambiguous type variable `k0' in the constraints:
      (Num k0) arising from the literal `42' at TypeError.hs:3:22-23
      (Ord k0) arising from a use of `insert' at TypeError.hs:3:7-20
      (Data.Hashable.Hashable k0)
        arising from a use of `insert' at TypeError.hs:3:7-20
    Possible cause: the monomorphism restriction applied to the following:
      foo :: Map k0 Integer (bound at TypeError.hs:3:1)
    Probable fix: give these definition(s) an explicit type signature
                  or use -XNoMonomorphismRestriction
    In the first argument of `insert', namely `42'
    In the expression: insert 42 53 empty
    In an equation for `foo': foo = insert 42 53 empty
Failed, modules loaded: none.
Prelude List HashMap> 
```

但是，如果我直接在解释器中定义完全相同的函数，则不会出现错误：

```
Prelude List HashMap> let foo = HashMap.insert 42 53 HashMap.empty
Prelude List HashMap> 
```

有人对此有任何线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:42:08.987

原因是 ghci 使用扩展的默认规则，而编译器（默认）使用[语言报告中指定的默认规则](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)：

Num 类中的歧义是最常见的，因此 Haskell 提供了另一种解决它们的方法——使用默认声明：default (t1 , ... , tn) 其中 n ≥ 0，并且每个 ti 必须是 Num ti 持有的类型。在发现不明确类型的情况下，不明确类型变量 v 在以下情况下是可默认的：

*   v 仅出现在 C v 形式的约束中，其中 C 是一个类，并且
*   这些类中至少有一个是数字类（即 Num 或 Num 的子类），并且
*   所有这些类都在 Prelude 或标准库中定义

* * *

相关规则是，仅当所有涉及的类都在标准库中定义时，才会根据报告进行默认设置，但`Hashable`对键的约束涉及不满足该要求的类。

因此编译器拒绝它，因为它无法解析由键引起的模棱两可的类型变量，而 ghci 将其默认为`Integer`，因为如果涉及其他类，ghci 也会默认。

# javascript - 使用 Javascript 获取没有 ID 的 Div 的值（只有一个类）

> ID：13752019
> 
> 赞同：1
> 
> 时间：2012-12-06T20:32:28.103
> 
> 标签：javascript, element

我正在尝试使用 javascript 获取 div 的值。这个特殊的 div 元素没有 ID，它只有一个类。HTML 如下所示：

```
Some text I don't care about
<div id="wrapper">
<div class="class_I_dont_care_about">
    <div class="need_value_from_this_div">
        Value I Need to Get Using Javascript
    </div>
</div>
</div> 
```

我忘了指定“getbyelementclass”不是一个选项，因为它仅受 IE 9 和最新版本的 chrome、FF 和 opera 支持，所以我正在寻找更多“多浏览器”选项，如果在一切皆有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:34:01.937

```
var value = document.getElementsByClassName('need_value_from_this_div')[0].innerHTML; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:39:14.227

您可以使用`querySelectorAll()`

```
 var elem = document.querySelectorAll( '.' + class);
    var text = elem[0].innerHTML 
```

它甚至应该适用于**IE-8**

否则更好的选择将是`.getElementsByClassName()`

**[检查小提琴](http://jsfiddle.net/sushanth009/nkqC7/1/)**

```
var className = 'a';
var elems = getByClass(className);

for(var i =0;i<elems.length;i++){
    console.log(elems[i].innerHTML);
}

function getByClass(className){
    var elems = [];
    if(document.querySelectorAll){
        elems = document.querySelectorAll( '.' + className);
    }
    else{
        elems = document.getElementsByClassName( '.' + className);
    }       
    return elems;    
} 
```

# sql - 在列上选择具有 MAX() 值的行

> ID：13752023
> 
> 赞同：23
> 
> 时间：2012-12-06T20:32:43.860
> 
> 标签：sql, sql-server, tsql

我有一个非常简单的每月通讯数据集：

```
id  | Name          | PublishDate   | IsActive
1   |  Newsletter 1 | 10/15/2012    |     1
2   |  Newsletter 2 | 11/06/2012    |     1  
3   |  Newsletter 3 | 12/15/2012    |     0
4   |  Newsletter 4 | 1/19/2012     |     0 
```

等等。

PublishDate 是唯一的。

结果（基于上述）：

```
id  | Name          | PublishDate   | IsActive
2   |  Newsletter 2 | 11/06/2012    |     1 
```

我想要的很简单。我只想要 IsActive 和 PublishDate = MAX(PublishDate) 的 1 个时事通讯。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-06T20:41:28.480

```
select top 1 * from newsletters where IsActive = 1 order by PublishDate desc 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T20:42:25.213

您可以使用`row_number()`：

```
select id, name, publishdate, isactive
from
(
  select id, name, publishdate, isactive,
    row_number() over(order by publishdate desc) rn
  from table1
  where isactive = 1
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ae677/2)

您甚至可以使用选择`max()`日期的子查询：

```
select t1.*
from table1 t1
inner join
(
  select max(publishdate) pubdate
  from table1
  where isactive = 1
) t2
  on t1.publishdate = t2.pubdate 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ae677/4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T21:06:10.013

```
CREATE TABLE Tmax(Id INT,NAME VARCHAR(15),PublishedDate DATETIME,IsActive BIT)
INSERT INTO Tmax(Id,Name,PublishedDate,IsActive)
VALUES(1,'Newsletter 1','10/15/2012',1),(2,'Newsletter 2','11/06/2012',1),(3,'Newsletter 3','12/15/2012',0),(4,'Newsletter 4','1/19/2012',0)

SELECT * FROM Tmax

SELECT t.Id
        ,t.NAME
        ,t.PublishedDate
        ,t.IsActive
FROM Tmax AS t
    WHERE PublishedDate=
    (
        SELECT TOP 1 MAX(PublishedDate)
        FROM Tmax
        WHERE IsActive=1
    ) 
```

# php - 如何在使用php单击图像时将数据插入数据库

> ID：13752024
> 
> 赞同：0
> 
> 时间：2012-12-06T20:32:42.873
> 
> 标签：php, mysql, image, insert

我正在制作一个音乐网站。我有这个按钮图像，用于将歌曲添加到播放列表。如果用户单击该按钮，它应该将该歌曲详细信息输入到我的播放列表表中。我知道如何使用文本框向数据库提交信息。有人可以帮我写代码吗？ **单击图像/按钮的 IF 条件应该是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:39:49.063

有两种方法：

1) 使用常规的 HTML 表单。将表单包裹在您的按钮图像周围，在表单中放置一个带有歌曲详细信息的隐藏字段，例如`<input type="hidden" name="song" value="Where the streets have no name">`，当提交表单时，您将拥有该歌曲的详细信息。如果必须，请使用多个隐藏字段。

2) 稍微复杂一点，但最好使用 Ajax。您可以从图像 id 属性中收集歌曲详细信息，然后将其全部推送到 PHP 页面。

# jquery - 更新后计算的 Knockoutjs 不会重新计算

> ID：13752025
> 
> 赞同：2
> 
> 时间：2012-12-06T20:32:51.223
> 
> 标签：jquery, knockout.js, knockout-2.0, ko.observablearray, computed-observable

我正在使用一个可观察的“零件”数组，其中包含一个可观察的“Vol”。我目前有每个部分的音量以及显示的总量。当应用程序启动时，总​​金额被正确添加。但是，当我更改零件的体积时，不会重新计算总量。

HTML：

```
<ul>
    <li data-bind="foreach:  Parts">
        <input data-bind="value: Vol" />
<br/>
    </li>
</ul>

<br/>
<br/>
<span data-bind="text: fullVol "></span> 
```

Javascript：

```
 function Part (data) {

       var self = this;
        self.Vol= ko.observable(data.Vol);

    }

    function AppViewModel() {
       var self = this;

        self.Parts = ko.observableArray([new Part({"Vol": 1}), new Part({"Vol":2}), new Part({"Vol":3})]);
        self.fullVol = ko.computed(function() {
            var total = 0;
           $.each(self.Parts(), function() { total += (this.Vol() ) })
            return total;
        });
    }

ko.applyBindings(new AppViewModel()); 
```

这是我的 JsFiddle：http: [//jsfiddle.net/jwinstonaspen/Zmkew/6/](http://jsfiddle.net/jwinstonaspen/Zmkew/6/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:40:40.293

当您使用`value: Vol`绑定敲除时，不会将您的输入转换为整数，只是将用户输入的数据存储为字符串。

因此，您需要在计算总数之前将其解析为整数：

```
$.each(self.Parts(), function() { total += (parseInt(this.Vol()) ) }) 
```

一个固定的[小提琴](http://jsfiddle.net/nemesv/Zmkew/9/)。

现在，因为您正在进行解析，所以您不应该忘记处理用户输入非数字输入的情况。

但是，您可以轻松编写[自定义绑定处理程序](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)来抽象解析。

或者您可以使用`ko.extenders`. [该文档在此处](http://knockoutjs.com/documentation/extenders.html)也有一个示例。

# c# - 如何在没有 datarowview 的情况下更新 gridview 行？

> ID：13752026
> 
> 赞同：0
> 
> 时间：2012-12-06T20:32:51.127
> 
> 标签：c#, gridview, datarowview

在我的 RowDataBound 事件中，我想更新行值，但我无法将我的对象转换为 DataRowView。还有另一种方法来更新行列吗？

这就是我所拥有的。它不能将类型 Offer 转换为 DataRowView。

```
 /// <summary>
    /// Gridview Row Data Bound 
    /// </summary>
    protected void grdvOffers_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        // Converts the UTC date to PST timezone
        if (e.Row.RowType == DataControlRowType.DataRow)
        {            

            //DataRow row = ((DataRowView)e.Row.DataItem).Row;
            Offer row = ((Offer)e.Row.DataItem).Row;
            DateTime utcTime = row.Field<DateTime>("Created");
            DateTime dtUpdateDateTime = TimeZoneInfo.ConvertTimeFromUtc(utcTime, CFrmFunctions.GetPresetTimeZone());
            row.SetField<DateTime>("Created", dtUpdateDateTime);
        }
    }

 <asp:ObjectDataSource ID="objOfferDataSource" runat="server" SelectMethod="GetAllOffers"
        TypeName="CancelForms.Repositories.OfferRepo"></asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:32:00.457

我想到了。您可以修改对象并将其设置回来并进行数据绑定。下面展示了如何。

```
 /// <summary>
    /// Gridview Row Data Bound 
    /// </summary>
    protected void grdvOffers_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        // Converts the UTC date to PST timezone
        if (e.Row.RowType == DataControlRowType.DataRow)
        {  
            Offer offer = ((Offer)e.Row.DataItem);
            offer.Created = TimeZoneInfo.ConvertTimeFromUtc(offer.Created, CFrmFunctions.GetPresetTimeZone());
            e.Row.DataItem = offer;
            e.Row.DataBind();
        }
    } 
```

# jquery - 如何从下拉列表或链接访问谷歌地图多边形

> ID：13752027
> 
> 赞同：0
> 
> 时间：2012-12-06T20:32:51.380
> 
> 标签：jquery, google-maps, dom, google-maps-api-3, polygon

我用它们的名字创建了一些多边形和一个 html 列表。当鼠标悬停在列表中的名称上时，我想更改多边形的不透明度。

```
...
<li><a href="#" data-poly="polyID" class="hoverPoly">City</a></a>
...
$('.hoverPoly').live('onmouseover',function(){
    var polyName = $(this).attr('data-poly');
    // var gmap is reference to google map
    // I want find polygon with polyName
}) 
```

多边形设置为

```
function initialize(){
...
   var poly_444555 = new google.maps.Polygon({
       ...
       name:'polyID', // this is id for external access
   })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:26:23.940

[非常复杂的例子](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=Polygon_with_holesA.xml)

关键：

*   允许从全局上下文访问的多边形数组。

在侧边栏 HTML 中使用类似的内容（数组中的每个多边形一个）。当用户将鼠标悬停在元素上时，它会修改多边形的属性，将属性放回鼠标移出：

```
sidebarHtml += '<tr id="row'+i+'"><td onmouseover="kmlHighlightPoly('+i+');" onmouseout="kmlUnHighlightPoly('+i+');"><a href="javascript:kmlPlClick('+i+');">'+name+'</a> - <a href="javascript:kmlShowPlacemark('+i+');">show</a></td></tr>'; 
```

kmlHighlightPoly 方法当前更改多边形的颜色，但它也可以轻松更改不透明度。

```
function highlightPoly(poly, polynum) {
  google.maps.event.addListener(poly,"mouseover",function() {
    var rowElem = document.getElementById('row'+polynum);
    if (rowElem) rowElem.style.backgroundColor = "#FFFA5E";
    poly.setOptions(highlightOptions);
  });
  google.maps.event.addListener(poly,"mouseout",function() {
    var rowElem = document.getElementById('row'+polynum);
    if (rowElem) rowElem.style.backgroundColor = "#FFFFFF";
    poly.setOptions(poly.normalStyle);
  });
} 
```

# sql - Sql server 除以零问题

> ID：13752029
> 
> 赞同：-5
> 
> 时间：2012-12-06T20:32:59.193
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

请有人帮我解决这个问题：我有这个选择：

```
SELECT Cast(( Isnull(price, 0) + Isnull(notarycosts, 0)
              + Isnull(landtax, 0) + Isnull(othertaxes, 0)
              + Isnull(agentfee, 0) + Isnull(cadastralfee, 0)
              + Isnull(tabulationfee, 0)
              + Isnull(certsarcini, 0) ) / ( totalareasqm / 10000 * fixhist ) AS
                   DECIMAL(12, 4)) AS EurPerHa 
```

有时我得到一个除以零的错误，我的应用程序被阻止，直到我从数据库中删除最后一行。我能以某种方式解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:40:18.970

要么 要么`TotalAreaSqm`是`FixHist`0。由于我们不能除以零，当零存在时你的脚本应该做什么？

我通常会看到将其设为 NULL 或使用已知值使其工作的方法。我不知道安全值是多少。

## 使其为空方法

```
select cast((isnull(price,0)+isnull(notarycosts,0)+isnull(landtax,0)+isnull(othertaxes,0)+isnull(agentfee,0)+isnull(cadastralfee,0)+isnull(tabulationfee,0)+isnull(certsarcini,0))/(NULLIF(TotalAreaSqm, 0)/10000*NULLIF(FixHist, 0) as decimal(12,4)) as EurPerHa 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:36:21.460

检查`FixHist`并且`TotalAreaSqm`不是空值，也不是 0。

代码：

```
select CASE WHEN ISNULL(NULLIF(FixHist,0),0) !=0 
                 AND ISNULL(NULLIF(TotalAreaSqm,0),0) !=0
THEN
cast((isnull(price,0)+
isnull(notarycosts,0)+
isnull(landtax,0)+
isnull(othertaxes,0)+
isnull(agentfee,0)+
isnull(cadastralfee,0)+
isnull(tabulationfee,0)+
isnull(certsarcini,0))/(TotalAreaSqm/10000*FixHist) as decimal(12,4))
ELSE 0 END as EurPerHa 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:44:37.373

```
SELECT IIF( TotalAreaSqm*FixHist=0
            ,null
            , cast(
                    ( isnull(price,0)
                      + isnull(notarycosts,0)
                      + isnull(landtax,0)
                      + isnull(othertaxes,0)
                      + isnull(agentfee,0)
                      + isnull(cadastralfee,0)
                      + isnull(tabulationfee,0)
                      + isnull(certsarcini,0) 
                    )
                    /
                   (TotalAreaSqm / 10000 * FixHist ) 
               as decimal(12,4))
           ) as EurPerHa 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-06T20:38:54.617

```
( isnull(totalareasqm,1) / 10000 * isnull(fixhist,1) ) 
```

# java - 如何在本地时区将 javax.time.Instant 格式化为字符串？

> ID：13752031
> 
> 赞同：26
> 
> 时间：2012-12-06T20:33:26.340
> 
> 标签：java, datetime, formatting, timezone, jsr310

如何[`javax.time.Instant`](http://threeten.sourceforge.net/apidocs-2011-01-07/javax/time/Instant.html)在本地时区将 a 格式化为字符串？以下将 local 转换`Instant`为[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)，而不是我期望的本地时区。删除对的调用[`toLocalDateTime()`](http://threeten.sourceforge.net/apidocs/javax/time/calendar/ZonedDateTime.html#toLocalDateTime%28%29)也是如此。我怎样才能得到当地时间？

```
public String getDateTimeString( final Instant instant )
{
    checkNotNull( instant );
    DateTimeFormatterBuilder builder = new DateTimeFormatterBuilder();
    DateTimeFormatter formatter = builder.appendPattern( "yyyyMMddHHmmss" ).toFormatter();
    return formatter.print( ZonedDateTime.ofInstant( instant, TimeZone.UTC ).toLocalDateTime() );
} 
```

**注意：我们使用的是[JSR-310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)参考实现的旧版本[0.6.3 。](http://sourceforge.net/projects/threeten/files/threeten/0.6.3/jsr-310-ri-0.6.3.jar/download)**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-09T14:23:55.587

在即将完成的 JDK1.8 版本中回答这个问题

```
DateTimeFormatter formatter =
  DateTimeFormatter.ofPattern("yyyyMMddHHmmss").withZone(ZoneId.systemDefault());
return formatter.format(instant); 
```

关键是`Instant`没有任何时区信息。因此，它不能使用任何基于日期/时间字段的模式来格式化，例如“yyyyMMddHHmmss”。通过在 中`DateTimeFormatter`指定时区，格式化时将瞬间转换为指定的时区，使其能够正确输出。

另一种方法是转换为`ZonedDateTime`：

```
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyyMMddHHmmss");
return formatter.format(ZonedDateTime.ofInstant(instant, ZoneId.systemDefault())); 
```

这两种方法是等效的，但是如果我的数据对象是`Instant`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T20:39:31.930

您为什么希望它使用本地时区？您明确要求 UTC：

```
ZonedDateTime.ofInstant(instant, TimeZone.UTC) 
```

只需指定您的本地时区：

```
ZonedDateTime.ofInstant(instant, TimeZone.getDefault()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:24:46.060

**在您对我的回答投反对票之前，请注意该问题明确（并以粗体字表示）指的是 JSR-310 参考实现的旧版本*0.6.3 ！*我在 2012 年 12 月问过这个问题，早在 Java 8 和新的日期库到来之前！**

* * *

我放弃了 JSR-310 课程`DateTimeFormatter`，`ZonedDateTime`转而使用老式的`java.util.Date`和`java.text.SimpleDateFormat`：

```
public String getDateTimeString( final Instant instant )
{
    checkNotNull( instant );
    DateFormat format = new SimpleDateFormat( "yyyyMMddHHmmss" );
    Date date = new Date( instant.toEpochMillisLong() );
    return format.format( date );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-26T05:27:45.733

试试这个：

```
String dateTime = DateTimeFormatter.ISO_ZONED_DATE_TIME.format(
    ZonedDateTime.ofInstant(instant, ZoneId.systemDefault())
); 
```

这给出了：

```
2014-08-25T21:52:07-07:00[America/Los_Angeles] 
```

您可以使用除格式化程序以外`DateTimeFormatter.ISO_ZONED_DATE_TIME`的其他东西来更改格式。DateTimeFormatter 有一堆预定义的格式化程序，或者你可以定义自己的。

# sequelize.js - Sequelize 与外键的关联

> ID：13752034
> 
> 赞同：4
> 
> 时间：2012-12-06T20:33:31.910
> 
> 标签：sequelize.js

我在 Sequelize 中真的很想念这个。.hasMany 定义仅适用于 ID 上的映射。让我们以通常的项目/任务简单示例为例。让我们说一个项目有一个 VERSION 属性，并且应该与具有相同 VERSION 属性的任务相关联。

我需要一种方法来强制关系基于两个属性：ID 和 VERSION。

我坚信我们需要一种基于多个外键（称为复合键）进行关联的方法

在我的项目中，我必须向模型中添加一堆方法，以使用多个键替代 getTasks。

如果有人有建议，他是受欢迎的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:55:20.560

这也是我们项目中需要的东西。我们已经添加了我们需要的功能，并且每天都在我们的项目中使用它，但是该功能还没有经过全面测试，所以我们还没有提交拉取请求。

[但是，您可以在https://github.com/innofluence/sequelize/tree/newedge](https://github.com/innofluence/sequelize/tree/newedge)找到代码

`specs/associations/composite-key.spec.js`显示 API：

```
Article = sequelize.define('Article', {
  'title': Sequelize.STRING
}, {
  instanceMethods: {
    item_key: 'article'
  }        
});

Label = sequelize.define('Label', {
  'text': Sequelize.STRING
})

Label.hasMany(Article, {foreignKey: "label_id", joinTableName: "item_label" });
Article.hasMany(Label, {foreignKey:{ "item_id": "id", "item": "item_key" }, joinTableName: "item_label" }); 
```

在这个例子中，一篇文章可以有多个标签。连接表 ( `item_label`) 具有以下行：`id, item, item_id, label_id`。这里重要的是最后一行，它表明Label和Article之间的链接是一个复合键。外键以映射形式给出，其中键是连接表中的行，值是文章行中的值。您可以在此处看到 item_label 中的 item 映射到 item_key，这是 article 上的实例方法。这是因为所有文章都有key文章，所以不需要保存在db中。

我希望这对您有所帮助，如果您仍有疑问，请随时发布您的 sequelize 模型代码，我会尽力提供帮助 :-)

# php - Xdebug Profiler with Zend Server - 无输出/转储

> ID：13752035
> 
> 赞同：0
> 
> 时间：2012-12-06T20:33:34.327
> 
> 标签：php, profiling, xdebug, zend-server

我似乎无法让 Xdebug 从探查器中转出任何内容。Xdebug 本身工作得很好，但是分析器有问题，这些是我的`php.ini`设置：

-

```
[XDebug] 
xdebug.profiler_enable=0
xdebug.remote_enable=1 
xdebug.remote_port=9000 
xdebug.profiler_enable_trigger = 1
xdebug.profiler_output_dir="C:\Zend\ZendServer\tmp\xdebug-profiler"  
xdebug.profiler_output_name = "cachegrind.out.%t-%s" 
```

有没有人经历过，或者有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:36:11.487

看来Xdebug不会继续为你创建输出目录，我创建了`C:\Zend\ZendServer\tmp\xdebug-profiler`，现在问题已经解决了。

# javascript - 如何从 jQuery 中的变量中删除“（？）”？

> ID：13752036
> 
> 赞同：-3
> 
> 时间：2012-12-06T20:33:37.460
> 
> 标签：javascript, jquery

我正在尝试编写一些代码来查看变量的内容并删除“（？）”如果它在变量中。这 ”？” 可以是任何数字，但我想删除括号、它们之间的内容以及后面的空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:36:30.587

```
str = str.replace(/\(\d+\)\w/g, ""); 
```

如果你也想要小数：

```
str = str.replace(/\(\d+\.\d+\)\w/g, ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:41:01.663

这不是真正的 jQuery 问题，而是 JavaScript 问题。这是一个解决方案：

```
'23(56) 234'.replace(/\(\d+\)\s?/g, ''); 
```

这导致`23234`，因为我们匹配了一个`(`，后跟一个重复的数字 ( `\d+`)，然后是另一个`)`，然后是一个可选的空格 ( `\s`)。第二个参数表明我们将这个匹配的模式替换为空（`''`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T20:36:08.683

您正在寻找`replace`方法：

```
'foo(1)'.replace(/\(\d\)/, '') 
```

输出“富”

# iphone - 使用 iOS SDK 将图像上传到 pinterest 的任何方式，也许使用 fileURL？

> ID：13752039
> 
> 赞同：0
> 
> 时间：2012-12-06T20:33:41.187
> 
> 标签：iphone, objective-c, ios, uiwebview, pinterest

嗨，我正在尝试找到一种方法来使用 iOS SDK 将本地生成的图像发布/上传到 pinterest。

`UIWebView`鉴于没有公共 API 并尝试使用图像 url a`fileURLWithPath:`显然没有成功，我正在进行 pinterest 集成。

有谁知道这是否可以实现？

pinterest 应用程序显然允许您从相机胶卷上传/固定图像。

有没有办法在我的应用程序中嵌入这种功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:41:36.623

您将需要使用多部分/表单数据类型的请求进行发布。这是一个如何做到这一点的例子。 [https://forrst.com/posts/Mutlipart_Form_Data_and_image_sending-Vw3](https://forrst.com/posts/Mutlipart_Form_Data_and_image_sending-Vw3)

# javascript - 如何使用 selenium IDE 切换窗口？

> ID：13752043
> 
> 赞同：0
> 
> 时间：2012-12-06T20:33:54.297
> 
> 标签：javascript, selenium, popup, window, selenium-webdriver

这里的说明：

[http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_popup_in_selenium2.html](http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_popup_in_selenium2.html)

说“在 Selenium 2（WebDriver）中，测试弹出窗口涉及将驱动程序切换到弹出窗口，然后运行相应的操作。”

我正在使用 selenium IDE 来构建和运行我的测试用例。我究竟把上面的java代码放在哪里？

我不能自己修改源代码，但我可以在 Selenium 中做任何我想做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:18:16.967

链接中提到的代码 - 它是纯 Java。如果您想在窗口之间切换，则无需对站点 JavaScript 进行任何修改。您可以使用 WebDriver 库进行任何测试自动化。

`browser`是`WebDriver`类的一个实例，它有`switchTo()`方法。在其他绑定语言（C#、Ruby、Python）中，有用于相同目的的类似方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:30:21.143

**每当您单击打开新窗口的链接时，甚至当您通过自己的代码打开新窗口时**，您都可以使用链接中给出的代码来选择窗口并在该窗口中执行任何操作。

您与源代码无关。给出的代码将用于所有目的。

# ipython - 使用 python 模块内部的 ipython 魔法将其加载到笔记本中

> ID：13752047
> 
> 赞同：1
> 
> 时间：2012-12-06T20:34:26.213
> 
> 标签：ipython, ipython-notebook

我对 ipython 很陌生，并且仍在学习和喜欢它的功能。尝试编写具有常见任务的模块，以便笔记本用户可以加载我的自定义模块并节省键入常见代码。

这是一个示例 mymodule.ipy：

```
 import mymodule as mymod
    mymod.func():
       wd=%pwd
       return wd 
```

当我在笔记本中测试它时：

```
 import mymodule as my
    ---------------
    ImportError        Traceback (most recent call last)
    <ipython-input-1-1036e4702cf4> in <module>()
    ----> 1 import mymodule as my

    ImportError: No module named mymodule 
```

但是当我将模块文件重命名为 mymodule.py 时，模块加载失败并出现错误消息，表明它无法识别 pwd 魔法：

```
 File "mymodule.py", line 2
        wd=%pwd
           ^
    SyntaxError: invalid syntax 
```

我的问题是如何编写一个带有 ipython 魔法和其他 ipython 功能的模块，我可以从笔记本中加载这些模块？我的印象是我可以将 ipython 代码放入扩展名为 .ipy 的文件中，并可以从 ipython 加载它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:37:03.727

我的评论中指出的“%run mymodule.ipy”现在满足了我的需要。将其发布为关闭此问题的答案。如果您有“模块”方法，请随时发布更多信息。

# actionscript-3 - 需要应用程序域澄清

> ID：13752053
> 
> 赞同：3
> 
> 时间：2012-12-06T20:34:46.183
> 
> 标签：actionscript-3, flash, apache-flex

我需要对这个主题进行一些澄清，因为我刚刚遇到了将 swfs 加载到重用的加载器对象的问题。

所以假设我有 3 个 SWF。
Main.swf
childA.swf
childB.swf

Main.swf 中有一个加载器对象，可以重用 (myloader.load("childA.swf"))，并且 childA 或 childB swf 将通过用户交互加载。
两个子 swf 都有一个 com 包，该包中有一个名为 config 的类。
配置文件是两个名称相同的类的不同文件。
两个子 swf 还调度 Main 侦听的事件

现在我遇到的问题是，如果先加载 childA，然后在加载 childB 之后，它仍然会显示为 childA。基本上，无论哪个最先被加载到该装载机中，都会成为赢家。
这让我发疯了，因为我所做的任何事情都不会导致 swf 卸载。直到我找到以下代码。

```
var appDomain:ApplicationDomain = new ApplicationDomain();
var context:LoaderContext = new LoaderContext(false, appDomain);
_contentPanel.load(new URLRequest(str), context); 
```

我在某处谈论如何真正卸载 swf 的帖子上偶然发现了这段代码。显然，这也适用于如何真正加载 swf。
如您所见，在加载时创建了一个新的 appDomain 并将其分配给上下文。
这就像一个梦想，我现在可以整天加载和卸载。

我的困惑是孩子调度的事件仍然有效，当我认为 Main swf 不应该接收它时，因为它不在同一个 appDomain 中。
我的意思是不应该阻止事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:10:04.943

**卸载 SWF**

Loader 类提供`Loader.unload()`（或在 Flash Player 版本 10 之后 - `Loader.unloadAndStop()`）

**第二个加载的 SWF 被第一个覆盖的问题**

存储在`ApplicationDomain`s 中的对象由它们的类名存储，我想知道加载的 SWF（或其子级）的类名是否被覆盖。即使不是这样；为什么不为每个正在加载的对象使用一个新的 Loader 实例？

**主 SWF 如何从另一个应用程序域中获取两个子级**

主 SWF 将能够与新的（加载的）应用程序域一起工作，因为它们是主 SWF 的子域（请参阅 ApplicationDomain.parentDomain）。主 SWF 的域将是“系统域”，新实例将在其下方加载。

**从加载器中拆分加载的 SWF**

理想情况下，您希望能够访问与`Loader`. 您可以通过在加载后访问 SWF 的根 movieClip 并创建一个新实例来执行此操作

```
var rootClipClass:Class = ApplicationDomain.getDefinition("[InsertYourRootClipName]") as Class; 
var rootClip:MovieClip = new rootClipClass(); 
```

此时，您可以卸载加载程序并干净地使用您的新实例。

**进一步阅读**

*   [Loader.unload() 和 Loader.unloadAndStop() 之间的区别](http://helpx.adobe.com/flash/kb/flash-player-10-action-script.html)
*   [使用应用程序域 - Adob​​e Docs](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)
*   [加载器类参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)
*   [ApplicationDomain 类参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/ApplicationDomain.html)

# sql - 创建存储过程以删除没有值的行

> ID：13752054
> 
> 赞同：2
> 
> 时间：2012-12-06T20:34:46.383
> 
> 标签：sql, select, stored-procedures, inner-join, procedure

创建一个名为 sp_del_inactive_cust 的存储过程来删除没有订单的客户。存储过程应删除 1 行。

这是我正在使用的数据库。 [（来源：][[bcitwebdev.com](http://students.bcitwebdev.com/jlandon/school/1630/databasediagram.png)][）][![数据库图](../Images/2dca699c84564d69ea385e85bbef10be.png)](https://i.stack.imgur.com/Zrbdd.png)

我的直接想法是我需要对照订单表检查客户表。如果客户存在于客户表中但不存在于订单表中，这一定意味着他们没有在其客户 ID 下创建任何订单 ID。然后，如果客户没有任何订单，我必须删除他们。

我不确定如何编写这个问题的脚本。我需要帮助！请保持简单，因为我是第一学期的学生。

这是我尝试过的开始：

```
CREATE PROCEDURE     sp_del_inactive_cust
AS
SELECT               customers.customer_id,
                 orders.customer_id
FROM         customers
INNER JOIN           orders ON customers.customer_id=orders.customer_id
WHERE        /* customer_id is found in customers table but not in orders table */ 
```

然后我将执行该程序。

感谢 Michael Fredrickson 的帮助，这个问题得到了解答。

以下是删除所需 1 行的最终语句：

```
CREATE PROCEDURE        sp_del_inactive_cust
AS
DELETE                  customers
FROM                    customers
LEFT OUTER JOIN         orders ON customers.customer_id = orders.customer_id
WHERE                   orders.customer_id IS NULL;
GO

EXECUTE                 sp_del_inactive_cust;
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:37:19.387

```
CREATE PROCEDURE sp_del_inactive_cust

AS

DELETE TOP (1) c
FROM
    customers c
    LEFT OUTER JOIN orders o
        ON C.customer_id = o.customer_id
WHERE
    o.customer_id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:38:05.970

您将需要创建一个反加入来获取未下订单的客户，如下所示：

```
DELETE c FROM
FROM customers c LEFT JOIN orders o ON c.customer_id = o.customer_id
WHERE o.customer_id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:02:28.923

```
DELETE customers 
WHERE customer_id NOT IN (SELECT customer_id FROM Orders) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:44:30.153

I hate to just give you the answer so I will give you an example of the inverse and let you figure out the rest

here is an example

2 tables foo {foo_id, a, b, c} bar {bar_id, foo_Id, e, f, g}

If i want to delete all records from foo that appear in the bar table I would write

delete foo where foo_id in (select foo_id from bar)

look up the "in" keyword for a real explanation also there are always many ways of doing something and you might not get the proper grade in a class if you dont do things the way the teacher wants

# r - 如何从 HLOC 数据在 R 中创建箱线图

> ID：13752055
> 
> 赞同：0
> 
> 时间：2012-12-06T20:34:59.587
> 
> 标签：r, plot

假设这样的数据框：

```
 ACY.Open ACY.High ACY.Low ACY.Close
2007-01-03     6.58     7.15    6.58      6.99
2007-01-04     7.24     7.35    7.15      7.35
2007-01-05     7.39     7.55    7.25      7.45
2007-01-08     7.32     7.35    7.01      7.26
2007-01-09     7.15     7.50    7.15      7.16
2007-01-10     7.30     7.45    7.21      7.24 
```

如何创建一个箱线图，其中 wiskers 是高值和低值，盒子顶部和底部是打开和关闭值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:39:54.237

这些类型的图称为“烛台图”，您可以使用`quantmod::chartSeries`（或`quantmod::chart_Series`）轻松绘制它们。FWIW，看起来您的对象是由创建的`quantmod::getSymbols`，这意味着它是 xts 对象，而不是 data.frame。

# android - Android/Linux 线程加入超时

> ID：13752060
> 
> 赞同：2
> 
> 时间：2012-12-06T20:35:19.440
> 
> 标签：android, linux, multithreading, timer, pthread-join

是否有一个 pthreads API 调用可以做一些类似`pthread_join()`但有超时的事情？我正在寻找一个类似于 Windows WaitForSingleObject(HANDLE handle, int timeout) 函数的函数。我知道有一个`pthread_timedjoin()`电话，但这仅在某些版本的 Linux 上可用（绝对不是在 Android 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:45:23.703

不，没有用于定时 pthread_join() 的标准 API，而且在 Android 使用的仿生 C 库中也没有。尽管查看仿生源代码，但他们很容易实现 glibc 中可用的 pthread_timedjoin_np() API。

您可以做的是修改您的线程以在它完成并即将退出时发出 pthread_cond_t 信号。您想要在该线程上等待的其他线程在条件变量上执行 pthread_cond_timedwait() 。

# java - 用 guice 覆盖球衣资源

> ID：13752061
> 
> 赞同：2
> 
> 时间：2012-12-06T20:35:28.160
> 
> 标签：java, jersey, guice, guice-servlet

我正在寻找一种方法来覆盖与 GuiceServletContextListener 中的 guice 绑定的球衣资源。我正在尝试使用的代码：

```
//Define Jersey resource interface
@Path("/books/{key}")
public interface BookDocument {

    public BookDAO getDao();

    public void setDao(BookDAO dao);
}

//Define default implementation
public class BookImpl implements Book {

    @Override
    public BookDAO getDao() {
        return dao;
    }

    @Inject
    @Override
    public void setDao(BookDAO dao) {
        this.dao = dao;
    }
}

//User wants to inject his implementation, so he define it
public class BookUserImpl implements Book {

    @Override
    public BookDAO getDao() {
        return dao;
    }

    @Inject
    @Override
    public void setDao(BookDAO dao) {
        this.dao = dao;
    }
}

//Inject default implementation of resource
public class ApplicationResourcesModule extends AbstractModule
{
    @Override
    protected void configure()
    {
        bind(Book).to(BookImpl);
    }
}

//But user wants to inject his implementation, so he bind it in users AbstractModule
public class ApplicationResourcesModuleUser extends AbstractModule
{
    @Override
    protected void configure()
    {
        bind(Book).to(BookUserImpl);
    }
}

//Bind all resources
public class JerseyGuiceConfig extends GuiceServletContextListener
{
    @Override
    protected Injector getInjector()
    {
        //Override default binding by user bindings.
        return Guice.createInjector(Modules.override(new ApplicationResourcesModule()).with(new ApplicationResourcesModuleUser()), new JerseyServletModule());
    }
} 
```

但不幸的是，这不起作用，虽然我不能将球衣资源绑定到 guice 中，比如接口到实现，只能`bind(BookImpl.class)`工作。但是这样的绑定是不可能被覆盖的。如果我尝试覆盖`bind(BookImpl.class)`我`bind(BookUserImpl.class)`会得到一个错误`Conflicting URI templates. The URI template /books/{key} for root resource class.`，而 @Path 应该是唯一的。那么我的用例有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T08:00:05.757

我只是不想警告您 Modules.override 在 Guice.createInjector(Stage.PRODUCTION,...) 上不起作用，因此您应该小心地将其仅用于开发。您应该创建两个上下文侦听器并以某种方式（可以说是通过 maven 配置文件）设置 web.xml 并正确实现。

更好地使用：

```
//Inject default implementation of resource
public class MainModule extends AbstractModule
{
    @Override
    protected void configure()
    {
        if(currentStage().equals(Stage.PRODUCTION) {
          install(new ApplicationResourcesModuleUser());
        } else {
          install(new ApplicationResourcesModule());
        }
    }
}

//Bind all resources
public class JerseyGuiceConfigPROD extends GuiceServletContextListener
{
    @Override
    protected Injector getInjector()
    {
        //Override default binding by user bindings.
        return Guice.createInjector(Stage.PRODUCTION, new MainModule(), new JerseyServletModule());
    }
}

public class JerseyGuiceConfigDEV extends GuiceServletContextListener
{
    @Override
    protected Injector getInjector()
    {
        //Override default binding by user bindings.
        return Guice.createInjector(Stage.DEVELOPMENT, new MainModule(), new JerseyServletModule());
    }
} 
```

您可以使用 @ImplementedBy 注释到您的界面来说明默认实现应该是。因此，您不必显式绑定它，并且如果您绑定它，它将覆盖注释绑定。

```
@Path("/books/{key}")
@ImplementedBy(BookImpl.class)
public interface Book {

    public BookDAO getDao();

    @Inject //it is enough to put the injection here, i think
    public void setDao(BookDAO dao);
} 
```

我认为这个问题与 Book 和 Book 实现绑定无关，而是与将 servlet 绑定/注册到 Jersey 容器有关。您能否粘贴整个堆栈跟踪，guice 堆栈跟踪很冗长且非常有用。

# .net - 尝试在 Janus GridEx 控件中实现自定义分组

> ID：13752063
> 
> 赞同：0
> 
> 时间：2012-12-06T20:35:41.117
> 
> 标签：.net, vb.net, interface, janus, gridex

我正在尝试在 Janus GridEx 控件中实现自定义分组。我有一列包含 DateTime 数据，但是当我对该列进行分组时，我希望数据仅基于该数据的日期部分进行分组。

阅读 Janus 文档，看起来将 GroupComparer 添加到 Column 应该完成此操作：

```
' Code that sets up my Janus GridEx
...
...
grdResults.RootTable.Columns("DateDue").GroupComparer = New GroupByDateComparer()
...
... 
```

我的 IComparer 类...

```
Public Class GroupByDateComparer
    Implements IComparer
    Public Function Compare(a As Object, b As Object) As Integer _
                                      Implements IComparer.Compare
        Select Case DateDiff(DateInterval.Day, a.Date, b.Date)
            Case Is < 0
                Return -1
            Case 0
                Return 0
            Case Is > 0
                Return 1
        End Select
        Return 0
    End Function
End Class 
```

我的代码构建。我将新实例分配给 GroupComparer 的代码行运行。但是永远不会调用 Compare() 函数。

有没有人设法实现 Janus GridEx 控件的这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:36:22.490

我使用 Janus 已经有一段时间了（我想是 10 年了……），但我从来不用这种方法对日期列进行排序（我使用格式 dd/MM/yyyy）。第一点，如果数据类型是“日期”，无论您用于显示该日期的格式掩码如何，都会自动进行排序。但是，如果列的数据类型是“字符串”，那么将使用字母比较进行排序。

第二点属性 GroupComparer 用于对组而不是项目进行排序。假设您有一个复杂的分组规则，其组标题与排序无关，那么您可以创建一个 GroupComparer 以按照您想要的方式进行排序。

也许您可以开始仔细检查列的数据类型吗？

希望这有助于塞尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:49:48.003

好吧，我花了比它应该花的时间更长的时间。事实证明，比较器工作得很好，但它并没有“粘”在柱子上。我发现如果我检查它是否存在于 RootTableChanged 事件中，如果不存在则重新附加它一切正常......

```
Private Sub grdResults_RootTableChanged(sender As Object, e As EventArgs) _ 
                                        Handles grdResults.RootTableChanged

    If grdResults.RootTable.Columns.Contains("DateDue") AndAlso _ 
           grdResults.RootTable.Columns("DateDue").GroupComparer Is Nothing Then
        grdResults.RootTable.Columns("DateDue").GroupComparer = New GroupByDateComparer()
    End If
End Sub 
```

# entity-framework - Entity FrameWork CodeFirst- 表名

> ID：13752066
> 
> 赞同：-1
> 
> 时间：2012-12-06T20:36:00.860
> 
> 标签：entity-framework, datatable, ef-code-first, table-rename

嗨，我正在构建数据库，有几个表（产品、订单、客户），如果可以做到这一点，我很感兴趣，**每天根据订单表和当天的名称生成表**，因为订单表会有每天大约 1000 行或更多行，这会影响应用程序的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:39:51.977

1000 行不算什么。你用的是什么数据库？大多数现代数据库可以毫无问题地处理数百万行，只要您努力为表建立正确的索引。

根据您的评论，我假设您不了解数据库表索引。

> 数据库索引是一种数据结构，它以降低写入速度和增加存储空间为代价提高对数据库表的数据检索操作的速度。可以使用数据库表的一列或多列创建索引，为快速随机查找和有效访问有序记录提供基础。

来自[http://en.wikipedia.org/wiki/Database_index](http://en.wikipedia.org/wiki/Database_index)

您需要向数据库表中添加索引，以确保可以对它们进行最佳搜索。

您的建议是 IMO 的一个坏主意，这将使使用该应用程序变得痛苦。相反，如果您真的用大量数据填充此表，您可以考虑定期归档旧数据，但在您真正需要之前不要这样做。

# routing - Windows Server 2012 路由和远程访问安装失败

> ID：13752069
> 
> 赞同：1
> 
> 时间：2012-12-06T20:36:12.147
> 
> 标签：routing, installation, roles, windows-server-2012

我安装了 windows server 2012 和一个角色，路由和远程访问。
有两个大问题。

1) 这个角色，它希望启用 DirectAccess，但我找不到作为 DirectAccess 管理的任何东西。

2）在我想在管理中完成向导“启用和配置路由和远程访问”之前，它每次都失败并出现错误 80040154 类未注册。

在服务器上就是这个角色。以前什么都有。这是新的安装。

请。告诉我如何解决此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-25T22:48:31.120

实际上它是远程访问角色，我必须安装它。安装包包括 DirectAccess、VPN、Routing 等。在Server managmant中，只有控制台，但它的核心是我安装角色后安装的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T13:07:46.667

先尝试安装 NPS 角色：

启动服务器管理器 -> 添加角色 -> 网络保护服务

# python - 检测osx何时睡眠/从睡眠中恢复

> ID：13752070
> 
> 赞同：5
> 
> 时间：2012-12-06T20:36:18.933
> 
> 标签：python, c, macos

是否可以编写一个 python 程序（我认为它将作为守护进程运行）来检测 osx 何时进入睡眠状态以及何时从睡眠中恢复？

如果听起来我没有对此进行研究，我深表歉意——我已经脱离了我的舒适区，并且不确定我是否需要从 python 委托给用 C 编写的可以报告这一点的东西，或者那是不必要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:55:40.553

IOKit 中有一些工具可以做到这一点——具体来说，注册的回调`IORegisterForSystemPower()`将在系统睡眠之前和唤醒之后被调用。

您可能想查看[bb 的`sleepwatcher`daemon](http://www.bernhard-baehr.de/)，它可以在各种事件发生时调用您指定的命令，包括系统睡眠/唤醒，以及各种其他事件（显示睡眠/唤醒、系统空闲、关机...） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-28T08:34:27.443

Cocoa 开发者可以听听`NSWorkspaceDidWakeNotification`

```
- (void) receiveSleepNote: (NSNotification*) note
{
    NSLog(@"receiveSleepNote: %@", [note name]);
}

- (void) receiveWakeNote: (NSNotification*) note
{
    NSLog(@"receiveWakeNote: %@", [note name]);
}

- (void) fileNotifications
{
    //These notifications are filed on NSWorkspace's notification center, not the default
    // notification center. You will not receive sleep/wake notifications if you file
    //with the default notification center.
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver: self
            selector: @selector(receiveSleepNote:)
            name: NSWorkspaceWillSleepNotification object: NULL];

    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver: self
            selector: @selector(receiveWakeNote:)
            name: NSWorkspaceDidWakeNotification object: NULL];
} 
```

此示例代码摘自此处的 Apple 文档：[注册和取消注册睡眠和唤醒通知](https://developer.apple.com/library/mac/qa/qa1340/_index.html)

# android - 如何从程序中动态更改 SeekBar 的可绘制进度？

> ID：13752072
> 
> 赞同：2
> 
> 时间：2012-12-06T20:36:19.687
> 
> 标签：android

我想从程序中动态更改进度（而不是`SeekBar`背景）的颜色。`SeekBar`

使用`seekbar.setProgressDrawable(Drawable drawable)`只会改变`SeekBar`. 我见过的所有示例都使用了 XML 中的可绘制对象，它们在运行时是静态的。

颜色会根据某些用户活动而变化，我需要将其设置为搜索栏的可绘制进度。所以我在我的代码中编写自己的drawable。

在 XML 中，我们可以指定项目 ID（例如背景、进度等）来获取可绘制对象吗？如何在程序中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:43:28.120

您可以创建自定义 xml，然后以编程方式设置进度条的 setbackgrounddrawable，

myProgressBar.setProgressDrawable(R.drawable.progress_horizo​​ntal);

* **progress_horizo​​ntal.xml***

```
<item android:id="@android:id/background">
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#ff9d9e9d"
                    android:centerColor="#ff5a5d5a"
                    android:centerY="0.75"
                    android:endColor="#ff747674"
                    android:angle="270"
            />
        </shape>
    </item>

    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#80ffd300"
                        android:centerColor="#80ffb600"
                        android:centerY="0.75"
                        android:endColor="#a0ffcb00"
                        android:angle="270"
                />
            </shape>
        </clip>
    </item>

    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#ffffd300"
                        android:centerColor="#ffffb600"
                        android:centerY="0.75"
                        android:endColor="#ffffcb00"
                        android:angle="270"
                />
            </shape>
        </clip>
    </item> 
```

# html - 错误的 URL 语法？

> ID：13752079
> 
> 赞同：1
> 
> 时间：2012-12-06T20:36:40.260
> 
> 标签：html, jsp

在链接 href 属性中将一些 jsp url 与 bean 参数结合后，我得到了错误的表示。这里有什么问题？

这是代码：

```
<form method="post" action="<c:url value="/rest/categories/add/category/to/${categoriesBean.currentCategoryKey}"/>">
<table>
    <tr>
        <td>Parent :</td>
        <td id="parentKey"></td>
    </tr>
    <tr>
        <td>Name :</td>
        <td><input id="categoryName" type="text"/></td>
    </tr>
</table>
</form> 
```

附上演示文稿：

![附上演示文稿](../Images/82c767fc7b3b3f075df8bc3cd1ed886e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:38:22.430

这样做...不知道，`jsp`但这是第 1 行唯一的报价问题

```
<form method="post" action='<c:url value="/rest/categories/add/category/to/${categoriesBean.currentCategoryKey}"/>'‌​&gt; 
```

# php - jQuery ajax 请求回显 html 数据

> ID：13752086
> 
> 赞同：0
> 
> 时间：2012-12-06T20:37:16.500
> 
> 标签：php, jquery, html, ajax

我正在向我的 PHP 脚本发出 ajax 请求，该请求将回显一定数量的表（每次都不同），当用户单击 submit_form 按钮时，我希望将其包含在我的原始页面中。我的问题是如何让 Jquery 将此表显示到`table_layout`div 中？

## HTML：

```
<div id="table_layout"> </div> 
```

## 查询

```
$( ".submit_form" ).click(function( e ) {

          $.ajax({
          type : 'GET',
          url:  'draw_tables.php',
          dataType : 'html',
          data:  dataString ,
          error : function(XMLHttpRequest, textStatus, errorThrown) {
          alert('error'); },
          success : function(data) { //appendto.('#table_layout')   } 
          });    
          return false; 
          }) 
```

## PHP (draw_tables.php)

```
echo '<table>';
echo '<input type="text" name="ID">';
echo '<input type="text" name="CLASS">';
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:48:13.330

例如，您可以发出 ajax 请求并用它填充 div

```
 $.get("draw_tables.php", function(data) {
 $("#table_layout").html(data);
 }); 
```

这将使用来自 ajax 请求的数据填充您的`table_layout`id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:40:40.267

```
$('#table_layout').append(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:57:53.270

在成功回调中，您应该添加：

```
$('#table_layout').append(data); 
```

# c# - 反序列化 xml 元素字符串

> ID：13752092
> 
> 赞同：0
> 
> 时间：2012-12-06T20:37:48.733
> 
> 标签：c#, xml, string, deserialization

我有这个 XML 元素字符串：

```
<person name="jhon smith" birth="11/10/1988" username="ilearn" password="123"/> 
```

现在我想将其反序列化为其各自的对象：

```
public class CancelCardResponse
{
    public string name { get; set; }
    public string birth { get; set; }
    public string username { get; set; }
    public string password { get; set; }
} 
```

我正在使用与此类似的代码：

```
XmlSerializer deserializer = new XmlSerializer(typeof(Person));
StringReader reader = new StringReader(myxmlelementstring);

var a = deserializer.Deserialize(reader); // fail! 
```

错误说明如下：

> **System.InvalidOperationException** {" **XML 文档 (1,2) 中存在错误。** "}

是否可以像上面那样反序列化 XML 元素字符串？
有什么东西可以添加到我的 XML 元素字符串中以使用 C# 反序列化器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:50:42.973

试试这样：

```
public class person
{
    [XmlAttribute]
    public string name { get; set; }

    [XmlAttribute]
    public string birth { get; set; }

    [XmlAttribute]
    public string username { get; set; }

    [XmlAttribute]
    public string password { get; set; }
} 
```

我没有编译或测试它，自从我使用用户以来已经有一段时间了，`XmlSerializer`但这应该能让你到达那里或接近它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:52:58.493

将您的`CancelCardResponse`类重命名为`Person`并注释它的属性`[XmlAttribute("Attr Name as in XML")]`

# jquery - jquery 和 updatepanel 问题

> ID：13752093
> 
> 赞同：2
> 
> 时间：2012-12-06T20:37:58.530
> 
> 标签：jquery, asp.net

我有一个webpart，它有下拉列表和gridview，我在下拉列表和gridview周围使用updatepanel ..在gridview中，我有一个文本框作为日期选择器..当我进入该页面并单击文本框时，日期选择器出现，但只要我更改下拉列表中的项目，触发回发日期选择器永远不会回来。

这是我正在使用的 jquery 代码，如果我更改此代码更新面板根本不起作用。

```
<script type="text/javascript">
     var $ = jQuery.noConflict();
     $(function () {
         $('input[id*="txtftrNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
         $('input[id*="txtNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
         $('input[id*="txtftrQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
         $('input[id*="txtQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });

     });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:56:56.760

一旦更新面板执行异步回发，它就会擦除所有内容。你需要重新绑定

```
<script type="text/javascript">    

$(function () {
     BindEvents();
 }); 

function BindEvents() {

           var $ = jQuery.noConflict();

             $('input[id*="txtftrNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
             $('input[id*="txtNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
             $('input[id*="txtftrQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
             $('input[id*="txtQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
        }
</script> 
```

并在您的更新面板中再次像这样重新加载 jquery 事件

```
 <asp:UpdatePanel>
      <ContentTemplate
           <script type="text/javascript">
                          Sys.Application.add_load(BindEvents);
           </script>

           <!-- your stuff in the update panel -->
      </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:44:41.517

这应该有效。

```
var $ = jQuery.noConflict();
$(document).ready(function(){
   BindEventHandler();
});
$.ajaxStop(function(){
   BindEventHandler();
});

function BindEventHandler(){
$('input[id*="txtftrNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
         $('input[id*="txtNeededBy"]').datepicker({ dateFormat: 'dd-M-y', changeMonth: true, minDate: 0 });
         $('input[id*="txtftrQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
         $('input[id*="txtQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:53:33.163

试试这个方法

```
$(function(){
     Sys.WebForms.PageRequestManager.getInstance().add_endRequest(BindEventHandler);
     BindEventHandler();
}); 
```

# ios - 通过 iTunes 同步企业 .ipa 时发生 0xE8000007 错误

> ID：13752094
> 
> 赞同：-1
> 
> 时间：2012-12-06T20:37:57.643
> 
> 标签：ios, xcode, itunes

我有一个准备好进行企业测试的应用程序，但是如果我构建它的 .ipa 以进行分发，尝试同步它会在 iTunes 中出现错误，指出“由于发生未知错误 (0xE8000007)” .

如果我尝试通过 Xcode 管理器安装应用程序，我会收到一条错误消息，指出参数无效并且没有任何反应。我已经尝试了多种设备，并且发生了同样的事情。

让整个事情变得更加奇怪的是，如果我为存档进行构建并将 .app 从派生数据中提取出来，它就可以正常工作。我还尝试从构建.ipa 中获取.app 并使用它，但它给出了与.ipa 相同的错误。

有人熟悉这种情况吗？从我所看到的情况来看，这似乎是某种符号链接问题，但我不明白如果它使用 build 中的 .app 进行存档会发生这种情况。

（代码签名和权利也设置正确）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:42:12.583

终于解决了这个问题。

我有一个脚本，它在构建阶段通过运行脚本运行，它复制了一些派生数据（即其他包）。结果是，归档这些捆绑包时会出现在其他地方，从而创建断开的链接。应用程序仍然会构建，然后 iTunes 将不知道发生了什么。

无论如何，损坏的符号链接是我的问题......希望它可以帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:30:07.640

这是我使用 Stekenborg 的输入得出的结论：

```
#!/bin/sh

if [ "$CONFIGURATION" == "Release" ]; then
    echo "Copying for Release"
    cp -Rfv "${PROJECT_TEMP_DIR}/../UninstalledProducts/"*.bundle "$BUILT_PRODUCTS_DIR/$CONTENTS_FOLDER_PATH/"
else
    echo "Copying for Debug"
    cp -Rfv "$BUILT_PRODUCTS_DIR/"*.bundle "$BUILT_PRODUCTS_DIR/$CONTENTS_FOLDER_PATH/"
fi 
```

# java - 从列表中多选

> ID：13752098
> 
> 赞同：3
> 
> 时间：2012-12-06T20:38:13.087
> 
> 标签：java, swing, list

在我的 Java 应用程序中，我需要从列表中进行某种多选，除了这样的自我实现功能之外，还有其他方法吗：

```
private List<T> list = someListClass(); //Contains the data

public List<T> getByKey(Key key){
   List<T> returnList = someListClass();
   for(Element e : list){
      if(e.qualifiedBy(key)) returnList.add(e);
   }
   return returnList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:46:45.457

你的方法很好。

使用 Java8 lambdas，上面的代码会更容易编写：

```
public List<T> getByKey(Key key){
    return list.stream().filter(e -> e.qualifiedBy(key)).into(someListClass());
} 
```

但在那之前，你所拥有的是最简单的。

# wordpress - 点击不断重定向到同一页面

> ID：13752103
> 
> 赞同：0
> 
> 时间：2012-12-06T20:38:32.060
> 
> 标签：wordpress, hyperlink

我在本地开发一个 wordpress 网站，直到今天我登录网站首页并尝试点击它重定向同一页面的链接时，一切正常。我尝试撤消今天的所有代码更改，并尝试更新永久链接。 . 我禁用了所有插件但没有成功。知道这可能是什么原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:53:23.083

如果这发生在您的主页上，请查看 index.php。如果您的有问题的链接是使用 the_permalink() 生成的，那么至少您会知道问题就在那里。否则，请提供更多信息（源代码、发生这种情况的页面、是否发生在每个页面上的每个链接等）

# java - 捕获 Exception 类而不是 Exception 子类是不好的做法吗？

> ID：13752104
> 
> 赞同：0
> 
> 时间：2012-12-06T20:38:32.307
> 
> 标签：java

我有一个抛出异常子类的方法。如果我为每个异常子类执行相同的捕获功能，那么只捕获异常类是不好的做法，还是应该单独捕获每个异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:40:36.347

是的，这是不好的做法，因为它使 catch 块捕获不应捕获的运行时异常。

如果您使用 Java 7，则可以使用

```
catch (SomeException | SomeOtherException | YetAnotherException e) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:40:13.397

`Exception`始终建议捕获可能的异常（子类），而不是仅在一个catch 块中捕获所有异常。这是一个[参考](http://code.google.com/p/solidbase/wiki/ExceptionHandlingGuideline)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:17:45.730

**在某些时候，必须**处理异常。所以希望在应用程序中有一个地方可以处理（捕获）所有异常。通常，这是一个捕获意外异常的地方，以防止应用程序完全崩溃，而是提供一些恢复路径，以及向用户提供一些原谅消息。一般来说，在你的类中，处理预期的失败并信任你的类和方法提供给调用者的契约。例如，在通过 ID 字符串从数据库中获取记录的方法中，只捕获 SQL 异常，因为您的合同可能会明确表示不允许使用空 ID。将错误的输入异常返回给调用者，否则您最终可能会在错误的级别验证用户输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:41:01.557

如果您可以对代码抛出的任何意外异常（例如运行时异常）执行相同的功能，那很好。

否则，我建议捕获子类。

考虑一下如果您的代码的某些部分抛出了`NullPointerException`?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T20:42:18.703

是的，通过捕获 Exception 类来压制异常是不好的做法。异常旨在将问题报告传输给处理程序，这样做可能会隐藏严重错误。

# jquery-mobile - 带有 jQ m 的 FTlabs/FastClick 在 iOS 中不会减少 300 毫秒的点击

> ID：13752111
> 
> 赞同：0
> 
> 时间：2012-12-06T20:38:58.017
> 
> 标签：jquery-mobile, click, tap

我正在使用[FastClick](https://github.com/ftlabs/fastclick)库来减少用户单击 mobile-web jqm 页面中的锚元素后存在的 300 毫秒。

但是 300 毫秒仍然存在，

```
<script type="text/javascript" src="/assets/jquery_mobile_configuration.js?body=1"></script>
<script type="text/javascript" src="/assets/jquery.mobile.js?body=1"></script>
<script type="text/javascript" src="/assets/fastclick.js?body=1"></script>
<script type="text/javascript" src="/assets/fastclick_config.js?body=1"></script> 
```

fastclick_config.js ：

```
window.addEventListener('load', function() {
    new FastClick(document.body);
}, false); 
```

我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T08:44:26.143

我在别处读到你应该使用

```
window.addEventListener('load', function() {
    FastClick.attach(document.body);
}, false); 
```

# jquery - 每次鼠标点击以不同方式控制动画

> ID：13752113
> 
> 赞同：1
> 
> 时间：2012-12-06T20:39:02.727
> 
> 标签：jquery, click, controls, sprite

我想要一个角色，每次单击该角色时，它都会执行与上一次单击完全不同的操作。到目前为止，我已经为这个角色创建了大约 113 个帧。我可能会停在那里，或者我可能想在未来创建更多框架。关键是，我认为自己是一个初学者的 Web 开发人员，我想知道如何根据您点击我的角色的时间来给予我很好的控制。例如，这是我到目前为止的代码......

```
(function() {
var play_on_click = [70, 22, 21];
var play_index = 0;

$('#stacheguy2').click(function() {
    var current_play = play_on_click[play_index];

    play_index++;
    if (play_index > play_on_click.length-1) {
        play_index = 0;
    }

    $(this).sprite(fps: 30, no_of_frames: 113, play_frames: current_play});
});
})(); 
```

目前，这允许我执行以下操作：

第一次鼠标点击：播放前 70 帧 第二次鼠标点击：播放接下来的 22 帧 第三次鼠标点击：播放接下来的 21 帧

但是，我很想知道是否有可能，例如，允许角色在第三次鼠标单击时在屏幕上向右移动。如果该字符在第三次点击时也改变了它的 z-index 怎么办？

这种控制有可能吗？

如果您能提供一些建议，非常感谢您抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:01:47.177

我会在你的`play_on_click`数组中添加函数，然后检查当前索引的类型（可能是 int 或函数）。Javascript 很漂亮，因为它很容易做到：

```
(function() {
     var isFunction = function(obj) {
        return typeof(obj) == "function";
      };

     // Changing the array, adding a function at third step instead of int
     var play_on_click = [70, 22, function (){
         // Does any action on the guy, for example your zIndex stuff
         $('#stacheguy2').css('zIndex', 2);
         // return number of frames
         return 21 ;
     }];
     var play_index = 0;

     $('#stacheguy2').click(function() {
         var current_play = play_on_click[play_index];

         play_index++;
         if (play_index > play_on_click.length-1) {
            play_index = 0;
         }

         // If function 
         if ( isFunction ( current_play ) ) {
             // run function and get returned number of frames
             current_play = current_play () ;
         }
         $(this).sprite(fps: 30, no_of_frames: 113, play_frames: current_play});
     });
})(); 
```

# eclipse - Eclipse Android XML 文件冻结

> ID：13752122
> 
> 赞同：6
> 
> 时间：2012-12-06T20:39:50.997
> 
> 标签：eclipse

我对 Eclipse 有一个大问题。好吧，我有 100 个 Eclipse 问题（因为它是一个垃圾 IDE），但让我澄清一下。我正在做Android开发。每次我打开、关闭或保存 XML 文件时，Eclipse 都会冻结 5 分钟（并占用我系统的大部分 CPU）。我的 android 项目中的每个 XML 文件都会发生这种情况。这种情况整天都在发生。不用说，我已经失去了无数小时的开发时间，因为 Eclipse Foundation 无法制作出可靠的 IDE。事实上，我认为 Google 应该将 Eclipse Foundation 扔进垃圾堆，并为 Android 创建自己的专用 IDE ......但我离题了。

我已经在 Windows 上为我的工作区目录禁用了索引。我已经阅读了 StackOverflow 上关于如何优化 Eclipse.ini 文件的无数帖子。我都试过了。我已经多次重新安装 Eclipse。我有一台 Win 7 64 位机器，运行在具有 8GB RAM 的 i7 处理器上！！除了切换到基于 Linux 的发行版或购买新笔记本电脑之外，我不知道还能做什么。有人可以给我一个专业的建议吗？

谢谢你，伊戈尔

**更新** Android Studio 实现了我的愿望，我现在将它用作我唯一的 IDE。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T21:33:17.207

这似乎与Eclipse bugtracker 中报告的[#385272](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)相同的问题，许多人在编辑器之间切换时报告了 Eclipse Juno 中的性能问题，大多数人指出 XML 编辑器是最严重的违规者，有些人特别提到安卓。在该线程中，一位用户提出了一种[解决方法](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272#c184)：

> 将窗口-> 首选项切换到“经典主题”和“禁用动画”带来的速度几乎可以接受——我现在可以工作了。

不过，除此之外，似乎针对此问题的一些修复和其他修复可作为补丁提供，被跟踪为问题[#394588](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394588)。显然，安装补丁解决了至少[一个用户](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272#c222)的问题：

> 由于我安装了 Eclipse UI Juno SR1 优化（[注释 #212](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272#c212)），因此在选项卡之间切换要好得多。谢谢。

您可以按照补丁线程中[注释 #8](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394588#c8)中的安装说明进行操作，看看它是否对您有任何帮助。

**更新 (12-13-12):**

上述补丁现在可以通过 Eclipse 更新管理器安装。它们可以在 Eclipse 4.2 更新站点 ( [http://download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2) ) 的“Juno SR1 Patches”类别下找到。更多细节可以在 Eclipse wiki 上[找到](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)。

# ruby - AWS ruby gem 好像没有安装

> ID：13752124
> 
> 赞同：1
> 
> 时间：2012-12-06T20:39:53.323
> 
> 标签：ruby, amazon-web-services, gem, amazon-dynamodb

当我尝试运行一个非常小的程序时，该程序仅用于测试我是否可以连接到 amazon dynamoDB，我收到一个错误，好像我没有安装 aws gem...

我的代码如下：

```
require "AWS"

AWS.config(  access_key_id: ENV["coco"],
secret_access_key: ENV["xixi"]
)

DB = AWS::DynamoDB.new 
```

我有以下错误：

```
 reducer.rb:4:in `<main>': uninitialized constant AWS (NameError) 
```

如您在此处看到的，已安装 gem：

```
Bernardos-MacBook-Pro:cn bersimoes$ gem which aws
/Users/bersimoes/.rvm/gems/ruby-1.9.3-p286/gems/aws-2.6.0/lib/aws.rb 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:29:55.413

你拿错了宝石。你想得到[`aws-sdk`](https://rubygems.org/gems/aws-sdk)支持[`AWS::DynamoDB`。](https://github.com/aws/aws-sdk-ruby/blob/1.7.1/lib/aws/dynamo_db.rb#L111)安装：

```
gem install aws-sdk 
```

您可能需要卸载现有的`aws`gem 以确保加载正确的 gem（它们都有一个`aws.rb`文件）。或者，您可以在确保加载正确的 gem`gem 'aws-sdk'`之前在代码中使用。`require`另一种可能性是`require 'aws-sdk'`由于 gem[基本上将该文件提供为 alias](https://github.com/aws/aws-sdk-ruby/blob/1.7.1/lib/aws-sdk.rb)。

你也应该使用：

```
require 'aws' # note lower case 
```

这可能不会在 Mac 上引起问题，但如果您将代码移动到 Linux 等区分大小写的机器上，就会出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T22:49:24.387

如果您收到此错误并且安装了“aws-sdk”gem，则您可能**无意中升级到了 aws-sdk gem 的第 2 版**。版本 2 使用`Aws`命名空间，而不是`AWS`. 这允许在同一应用程序中使用版本 1 和版本 2。

有关更多信息，请参阅此[博客文章](http://ruby.awsblog.com/post/TxFKSK2QJE6RPZ/Upcoming-Stable-Release-of-AWS-SDK-for-Ruby-Version-2)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-06T07:51:11.917

是的，我刚刚遇到这个问题并解决了。这是因为 AWS 将他们的 gem 更新到了 2.0。如果根据他们发布的这篇文章将 gem 更新到 2.0，则需要不同的配置。

如果您想使用之前的版本，只需更改 Gemfile，如下所示：

宝石文件

宝石'aws-sdk'，'< 2.0'

# knockout.js - KnockoutJS 自定义绑定元素没有子元素？

> ID：13752127
> 
> 赞同：0
> 
> 时间：2012-12-06T20:39:59.543
> 
> 标签：knockout.js, custom-binding

我正在开发一个自定义绑定，它将获取现有值并将其插入到视图模型中。但是，我遇到了一个障碍，ko.bindingHandlers 中提供的元素似乎没有任何子元素。

这是 KnockoutJS 中的工作方式还是我遗漏了什么？

这是我的 HTML 标记：

```
<div data-bind="with: person, useInitValueFor: ['firstName', 'lastName']">
    <div data-bind="text: firstName">John</div>
    <div data-bind="text: lastName">Doe</div>
</div> 
```

这是我的 JS 代码：

```
ko.bindingHandlers.useInitValueFor = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var $elem = $(element);
        var value = ko.utils.unwrapObservable(valueAccessor());
        var allBindings = allBindingsAccessor();

        for (var i = 0; i < value.length; i++) {
            var c = value[i];
            var e = $elem.children('[data-bind*="' + c + '"]:first');
            alert(e.length); // This gives me 0
            if (e.length > 0) {
                var a = e.attr('data-bind').split(',');
                for (var j = 0; j < a.length; j++) {
                    var b = a[j].split(':');

                    switch (b[0]) {
                        case 'text':
                            allBindings.with[c](b[1]);
                            alert(allBindings.with[c]());
                            break;
                    }
                }
            }
        }
    }
};

function personViewModel() {
    this.person = {
        firstName: ko.observable(),
        lastName: ko.observable()
    };
}

$(document).ready(function() {
    var vm = new personViewModel();
    ko.applyBindings(vm);
}); 
```

您也可以在 jsFiddle 上看到它：http: [//jsfiddle.net/dzul1983/XjD3Y/1/](http://jsfiddle.net/dzul1983/XjD3Y/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:19:54.677

绑定的 init 函数`with`复制元素的子元素以用作“模板”。该`update`部分将当前数据应用于该“模板”。

所以，当你的绑定代码运行时，你就在`with`绑定`init`和`update`.

您的一种解决方案是在绑定之前列出您的`with`绑定。

# iphone - 如何在 iOS6 中使用谷歌地图 API

> ID：13752133
> 
> 赞同：-2
> 
> 时间：2012-12-06T20:40:24.440
> 
> 标签：iphone, google-maps, ios6

> **可能重复：**
> [我还能在 iOS 6 中使用谷歌地图吗](https://stackoverflow.com/questions/10992595/can-i-still-use-google-maps-in-ios-6)

是否有在 iOS6 中使用 Google Map API 或 Google Map 的替代方法。因为 iOS6 支持苹果地图，如果我有一个在当前版本中使用谷歌地图 api 的 iPhone 应用程序怎么办。如果我希望该应用程序在 iOS6 上运行，那么我必须将该地图从谷歌转换为苹果地图？我只是想问一下，我如何在 iOS6 中使用谷歌地图？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:51:13.690

您仍然可以使用 Google 地图，但是，使用 Google API 打开地图的任何链接都将在浏览器中打开，而不是在内置的地图视图中打开。

# javascript - 原型继承的差异，Firefox 与 Chrome

> ID：13752143
> 
> 赞同：6
> 
> 时间：2012-12-06T20:40:52.040
> 
> 标签：javascript

对于以下代码：

```
function Mammal(){
    this.hair = true;
    this.backbone = true;
    return this;
}

function Canine(){
    this.sound= 'woof';
    return this;
}
Canine.prototype = new Mammal(); 

function Dog(name){
    this.tail=true;
    this.name=name;
    return this; 
}
Dog.prototype = new Canine();

var aspen = new Dog('Aspen');

var aspenProto = aspen.__proto__ 
```

Firebug (Firefox) 想告诉我`aspenProto`的是`Mammal{}`，而 Chrome 说的是`Canine{}`.

谁能告诉我为什么它们显示不同，是否有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:12:50.903

事实（学分转到@IHateLazy）：

`aspenProto.constructor`是`Mammal`。这是因为`constructor`实际上是 Mammal.prototype 的一个属性，在方法创建时设置。`Canine.prototype.constructor` 不是`Canine`，因为原型（持有`constructor`财产）被 覆盖`new Mammal()`。

测试：

```
aspen.constructor = function Hello(){}; // aspen is Hello in Firebug,
                                        // Dog in Chrome
aspen.constructor.name = "test"         // still Hello in Firebug,
                                        // name is also Hello in both
aspen.constructor = function(){};       // aspen is Object in Firebug
aspen.constructor.name = "test"         // still Object in Firebug
aspen.constructor = null;               // still Object and Dog

({constructor: function Hello(){}})     // Hello in Firebug AND Chrome
({constructor: function (){}})          // Object in both (not surprisingly)
({constructor:{name:"Hi"}})             // "Object" in FB, "Hi" in Chrome

x={constructor:function(){})
x.constructor.name="Hello"              // x is Object in both

x=new Object()
x.constructor=function Hello(){}        // x is Hello in both

new (function(){})()                    // Object in both
new (function(){
  this.constructor=function Hello(){}
})()                                    // Hello in both 
```

结论：

Firebug 总是依赖对象自己的`constructor`属性来命名它。如果`constructor`是一个命名函数，它使用`constructor` `name`（不可写 - 感谢@IHateLazy）。如果该`constructor`属性是匿名函数或根本不是函数，那么 Firebug 会使用它`"Object"`。

Chrome 将每个对象的实际构造函数作为内部属性。*仅*当该属性不可访问（未构造对象）或为 Object 时，它才会查看对象的`constructor`属性。如果构造函数是命名函数，则它使用其内部存储的名称。如果构造函数不是函数或者是匿名的，它会使用该`name`属性。

# c# - 本地化 AssemblyInfo.cs

> ID：13752144
> 
> 赞同：14
> 
> 时间：2012-12-06T20:40:52.777
> 
> 标签：c#, .net

我的 AssemblyInfo 包含有关我的产品、公司等的信息。这些数据目前被硬编码在 cs 文件中：

```
[assembly: AssemblyCompany("My Company.")]
[assembly: AssemblyProduct("MyProduct")]
[assembly: AssemblyCopyright("Copyright © 2012 My Company, Inc. All Rights Reserved.")]
[assembly: AssemblyTrademark("MyProduct is a trademark of MyCompany Software.")]
[assembly: AssemblyCulture("")] 
```

我想本地化这些文本，但我无法执行以下操作：

```
[assembly: AssemblyCompany(Resources.MyConpany)] 
```

有没有解决的办法 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T02:16:24.177

是的，这是可能的。属性本身很少被关心语言的人阅读。但是，C# 编译器也使用它们来生成 /win32res 编译选项的默认版本。

这会影响您在资源管理器中查看装配属性时看到的内容，使用属性快捷菜单项并查看详细信息选项卡。Windows 在这里显示的**不是**程序集属性，它对托管程序集一无所知。您看到的是嵌入在程序集中的*非托管资源中的数据。*

您可以使用 Visual Studio 查看这些非托管资源的外观。使用 File + Open + File 并导航到示例 EXE 程序集。您将获得嵌入式资源的树状视图，典型的 .NET 程序应至少具有其中三个。一个图标，一个使程序 UAC 兼容的清单。还有一个版本资源，你关心的那个。打开该节点，您会看到 ID 为 1 的资源，标记为 [Neutral]。中性是资源的“以任何语言工作”版本。双击它打开编辑器（在 Express 中不起作用），您可以看到程序集属性如何映射到版本资源属性。

您需要做的是为这些非托管资源创建自己的版本，即使用多种语言的版本。这需要编写一个 .rc 文件，一个资源脚本，然后由 rc.exe 工具（非托管资源编译器）编译成一个 .res 文件。然后，您使用 Project + Properties，Application 选项卡，“Resource File”单选按钮告诉编译器它。

请注意，这有点痛苦且容易出错，rc.exe 是一个喜怒无常的工具，并且您确实失去了 AssemblyInfo.cs 与您在 Windows 中看到的内容之间的直接联系，它是一个维护项目。最好的方法是使用一个虚拟 C++ 项目并使用其内置的资源编辑器将其组合在一起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T22:12:17.017

即使不可能“直接”本地化您的 AssemblyInfo（例如`Resources.MyCompany`，如您的问题所示使用），您可以做的是在编译时生成完整的 AssemblyInfo，然后再进行实际编译。

以下是一些如何使用免费和开源的[MSBuild 社区任务](https://github.com/loresoft/msbuildtasks)执行此操作的示例：

*   [如何使用 MSBuild 更改 AssemblyProduct、AssemblyTitle？](https://stackoverflow.com/questions/3585444/how-can-i-change-assemblyproduct-assemblytitle-using-msbuild/3623673#3623673)
*   [使用 MSBuild 社区任务的示例构建文件](http://www.loresoft.com/projects/msbuildtasks/sample-build-file-using-msbuild-community-tasks/default.aspx)

这两个链接都显示了如何在一个单独的 MSBuild 文件中执行此操作，该文件被称为构建解决方案，但也可以将其直接放在 .csproj 文件中，这意味着`AssemblyInfo.cs`在 Visual Studio 中构建解决方案时甚至可以创建。

这是我的一个项目中的一个示例，如何做到这一点。
*（请注意，在这个例子中我没有生成整体`AssemblyInfo.cs`，而是一个只包含版本号的单独文件！）*

MSBuild 社区任务调用位于[.csproj 文件](https://bitbucket.org/christianspecht/missilesharp/src/3e6a8e77c2bcb1df8b9bb472e9d6969a44028bdb/src/MissileSharp/MissileSharp.csproj?at=default)中：

```
 <Target Name="BeforeBuild">
    <PropertyGroup>
      <ProdVer>0.0</ProdVer>
    </PropertyGroup>
    <PropertyGroup>
      <ProdVer Condition="'$(VersionNumber)' != ''">$(VersionNumber)</ProdVer>
    </PropertyGroup>
    <AssemblyInfo CodeLanguage="CS" OutputFile="AssemblyVersion.cs" AssemblyVersion="$(ProdVer)" AssemblyFileVersion="$(ProdVer)" />
  </Target> 
```

该`<AssemblyInfo ...`行调用 MSBuild 社区任务来创建一个文件`AssemblyVersion.cs`，版本号设置为`$(ProdVer)`.
`$(ProdVer)`之前设置为`0.0`几行，当有一个名为的环境变量`$(VersionNumber)`不为空时，`$(ProdVer)`设置为该值。
并`$(VersionNumber)`在调用我的构建脚本之前通过简单地调用`set VersionNumber=1.1`批处理文件进行设置。

这意味着在从 Visual Studio 构建时`AssemblyVersion.cs`使用版本号创建，在通过构建脚本构建时`0.0`使用真实版本号（在我的示例中）创建。`1.1`

当然，以这种方式将您的本地化公司信息放入程序集中比仅仅在`Resources.MyCompany`某个地方调用更多工作，但可以根据需要对 AssemblyInfo 进行本地化。

# java - 以编程方式调用 Google App 脚本和用户身份？

> ID：13752159
> 
> 赞同：0
> 
> 时间：2012-12-06T20:41:52.037
> 
> 标签：java, cookies, oauth, google-apps-script

Google 应用程序脚本可以部署为网络应用程序，并在您访问给定的 url 时触发。

当您以编程方式触发谷歌应用程序脚本（例如从谷歌引擎应用程序）时，您如何指定“用户上下文”？任何特殊的标头参数？

从浏览器可以无缝运行：您已登录您的 google 帐户，当您访问应用域上的 google 应用脚本时，它会在您的“用户上下文”中触发和执行。那是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:37:10.917

目前，您无法执行此操作。对不起！

# php - Zend fancybox 登录无法正常工作

> ID：13752161
> 
> 赞同：0
> 
> 时间：2012-12-06T20:42:06.463
> 
> 标签：php, javascript, jquery, zend-framework, fancybox

我在弹出登录表单中使用 zend 和 fancybox，但效果很好，问题出在我登录时。它重新加载fancybox，而不是当前的父页面。因此，当我登录时，它实际上在显示用户页面的登录表单框中。所以，我希望在提交时按下它与父页面而不是花式框一起记录。

这是我的代码：

javascript花式框：

```
$('a.iframe').fancybox({
        width   : 520, 
        height  : 300,
        type    : 'iframe',
        scrolling: 'no',
        centerOnScroll: 'true',
        onComplete: function() {
            $('#fancybox-frame').load(function() {
                $('#fancybox-content').height($(this).contents().find('body').height() + 0);
            });
        }
}); 
```

Zend 控制器：

```
public function loginFormAction()
{
    $this->_helper->layout()->disableLayout();
    //$this->_helper->viewRenderer->setNoRender(true);

    $email = $this->getRequest()->getParam('email');
    $password = $this->getRequest()->getParam('password');

    $loginForm = new Application_Form_UserLogin();
    if ($this->getRequest()->isPost())
    {
        /************ Login Form ************/
        if ($loginForm->isValid($this->getRequest()->getParams()))
        {
            $user = $this->_helper->model('Users')->createRow($loginForm->getValues()); 
            $user = $this->_helper->model('Users')->fetchRowByFields(array('email' => $email, 'hash' => $password));

            if($user) 
            {
                Zend_Session::rememberMe(86400 * 14);
                Zend_Auth::getInstance()->getStorage()->write($user);
                $this->getHelper('redirector')->gotoRoute(array(), 'invite');
                return;
            } 
            else {
                // Error message
                $this->view->errorMsg = "<b>password</b> - invalid, please try again! *";
            }               
        }
        else
        {
            // something
        }
    }
    $this->view->loginForm = $loginForm;
} 
```

html表单：

```
<body>  
    <div id="login" class="">
        <div id="login_lb_content">
            <h1 class="content_title colorset_orange">Login to your account</h1>
            <form action="" method="post" name="loginForm" id="login-form">
                <table><tr>
                    <td colspan="2" class="content_sub_title colorset_gray">Your email address</td>
                </tr><tr>
                    <td colspan="2"><input id="email" type="text" name="email" value="<?php echo $this->loginForm->email->getValue(); ?>" /></td>
                </tr><tr>
                    <td width="120" class="content_sub_title colorset_gray">Your password</td>
                    <td style="text-align:right;" class="colorset_gray small_font">(It was sent to your email address when you registered)</td>
                </tr><tr>
                    <td colspan="2"><input id="password" type="password" name="password" value="<?php echo $this->loginForm->password->getValue(); ?>" /></td>
                </tr><tr>                       
                    <td><a id="inline-retreive" href="#retreive" class="content_sub_title colorset_orange fblink">Retreive my password</a></td>
                    <td><input type="submit" id="btn_login" name="login" value="" /></td>
                </tr></table>

                <div id="login-error" style="color:red">
                <?php if ($this->loginForm->getErrors()): ?>
                    <?php foreach($this->loginForm->getMessages() as $field => $messages): ?>
                        <strong><?php echo $field; ?></strong>
                        <?php foreach($messages as $messageKey => $message): ?>
                            - <?php echo $message; ?><br />
                        <?php endforeach; ?>
                    <?php endforeach; ?>
                <?php endif; ?>
                <?php echo $this->errorMsg; ?><br />
                </div>

            </form>
        </div>
    </div><!-- END div[login panel] --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:33:19.923

实际上，它确实可以正常工作。它在fancybox 内刷新，因为它是一个`iframe`，它就像将表单嵌入到`iframe`标签中一样（只有iframe 将被重新加载，而不是父页面）

`parent.$.fancybox.close();`成功提交后，您需要使用表单中调用的方法....或者您可以`onsubmit`在表单标签中使用：

```
<form onsubmit="parent.$.fancybox.close();" ... 
```

...然后，在您的自定义脚本中添加选项：

```
"onClosed": function(){
  parent.location.reload(true);
} 
```

刷新父页面。

**注意**：我假设您使用的是 fancybox v1.3.4，因为上面代码中的 API 选项。

# python - SyntaxError：扫描字符串文字 Python 计算器时 EOL

> ID：13752166
> 
> 赞同：0
> 
> 时间：2012-12-06T20:42:25.097
> 
> 标签：python, python-3.x

这是我在 Python 3.3.0 中的计算器 这是我的程序...

```
import random
import math
a=int(input('Please enter your first number!: '))
x=int(input('Please enter your second number!: '))
menu='So what do you want me to do with these numbers? (Ps. Only put in the number)\n\
    1\. Do you want me to add the numbers together?\n\
    2\. Do you want me to subtract the numbers?\n\
    3\. Do you want me to multipy the numbers?\n\
    4\. Do you want me to divide the numbers?\n\
    5\. Do you want me to square the numbers?\n\
    6\. Do you want me to put one number to the power of the other?\n\
    7\. Do you want me to square root both numbers?\n\
    8\. Nothing but quit!\n\'
y=int(input(menu))
if y==1:
    print(str(a)+' + '+str(x)+' = '+str(a+x))
elif y==2:
    c=int(input('Which number will you subract from? 1\. '+str(a)+' or 2\. '+str(x)+'? (Remember only put 1 or 2) '))
    if c==1:
        print(str(a)+' - '+str(x)+' = '+str(a-x))
    elif c==2:
        print(str(x)+' - '+str(a)+' = '+str(x-a))
elif y==3:
    print(str(a)+' x '+str(x)+' = '+str(a*x))
elif y==4:
    d=int(input('Which number will you divide from? 1\. '+str(a)+' or 2\. '+str(x)+'? (Remember only put 1 or 2) '))
    if d==1:
        print(str(a)+' ÷ '+str(x)+' = '+str(a/x))
    elif d==2:
        print(str(x)+' ÷ '+str(a)+' = '+str(x-a))
elif y==5:
    b=int(input('Which number do you want to square? 1\. '+str(a)+' or 2\. '+str(x)+'? (Remember only put 1 or 2) '))
    if b==1:
        print(str(a)+' x '+str(a)+' = '+str(a*a))
    elif b==2:
        print(str(x)+' x '+str(x)+' = '+str(x*x))
elif y==6:
    e=int(input('Which number do you want to put the power to? 1\. '+str(a)+' or 2\. '+str(x)+'? (Remember only put 1 or 2) '))
    if e==1:
        print(str(a)+' to the power of '+str(x)+' = '+str(a**x))
    elif e==2:
        print(str(x)+' to the power of '+str(a)+' = '+str(x**a))
elif y==7:
    f=int(input('Which number do you want to square root? 1\. '+str(a)+' or 2\. '+str(x)+' or 3\. Both or 4\. Pick random? (Remember only put 1, 2, 3 or 4) '))
    if f==1:
        print('The square root of '+str(a)+' is '+sqrt(a))
    elif f==2:
        print('The square root of '+str(x)+' is '+sqrt(x))
    elif f==3:
        print('The square root of '+str(a)+' is '+sqrt(a)+' and the square root of '+str(x)+' is '+sqrt(x))
    elif f==4:
        print('Let me see! I pick...')
        g=random.randint(1,3)
        if g==1:
            print('The square root of '+str(a)+' is '+sqrt(a))
        elif g==2:
            print('The square root of '+str(x)+' is '+sqrt(x))
        elif g==3:
            print('The square root of '+str(a)+' is '+sqrt(a)+' and the square root of '+str(x)+' is '+sqrt(x))
elif y==8:
    print('Bye!!!')
elif y==69:
    print('Very mature!')
else:
    print('No command selected. Self destruction in T-10 seconds. 10... 9... 8... 7... 6... 5... 4... 3... 2... 1... 0... BOOM!')
    exit() 
```

这让我在第 26 行出现了问题，上面写着 +str(a)。')' 导致上述错误。请帮忙。我查看了[http://code.google.com/hosting/search?q=label%3aPython](http://code.google.com/hosting/search?q=label%3aPython)并没有提供有关扫描错误原因的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:50:02.207

假设您在此处发布的代码与您正在运行的代码相同，则实际问题更早，在第 13 行：

```
 8\. Nothing but quit!\n\' 
```

您永远不会关闭`menu`字符串，因为`\'`它不是字符串关闭引号，它是字符串中的文字字符。

事实上，当我运行它时，我得到：

```
 File "calc.py", line 13
    8\. Nothing but quit!\n\'
                           ^
SyntaxError: EOL while scanning string literal 
```

如果我解决了这个问题（通过删除多余的反斜杠），一切都运行良好——包括除法情况，这是第 26 行出现的地方。

因此，如果这不是您的实际错误，那么您显然已经解决了真正的问题并在此处粘贴代码的过程中添加了一个新问题……</p>

正如 Jakob Bowyer 所指出的，SO 语法高亮器实际上发现了同样的问题——例如，请注意第 14 行 ( `y=int(input(menu))`) 被高亮显示为字符串文字的一部分，而不是代码。如果你自己使用了一个不错的编辑器，if 会做类似的事情。

This is one reason you always want to use real multiline strings, rather than faking them with backslash continuation. (Another reason is that at some point, you will put a space after the backslash, which will break your code, despite being completely invisible to you. Then there's the fact that some syntax highlighters, and all human beings, get confused by backslash continuations in strings…)

# javascript - 在 ajax 完成之前运行的 switch 语句

> ID：13752169
> 
> 赞同：1
> 
> 时间：2012-12-06T20:42:39.827
> 
> 标签：javascript, ajax, performance, switch-statement

# 问题：

有没有办法暂停 javascript 直到 ajax 完成执行其成功功能？

### 相关代码：

```
function validateinput (name, parent, access)
{
    //we assume that the input does not exist
    exists = false;
    //validate with server, expected response is true or false
    $.post("AJAXURL", {action: "category", name: name, parent: parent}, 
    function (data, textStatus, xhr)
    {
        //if returned true, the entry does exist for that parent
        if (data == "true")
        {
            alert("AJAX");
            exists = true;
        }
        else
            exists = false;
    });

    switch (true)
    {
        //If the name field is blank (still displaying hint)
        case (name == 'Subcategory Name' || name == 'Category Name'):
            alert("Please enter a name");
            break;
        //if the name already exists for that parent
/*****/     case (exists == true):
            alert("SWITCH");
            break;
        //if the parent field is displaying hint, assume parent is blank
        case (parent == 'Parent Category'):
            parent = '';
            break;
        //if the usergroup field is blank, assume value of parent
        case (access == 'UserGroup Allowed To View'):
            //if parent is also blank, assume lowest level usergroup access
            if (parent == '')
                access = "UserGroupTicketWorkers";
            else
                    $.post("AJAXURL", {action: "specificcat", name: parent}, 
                function (data, textStatus, xhr)
                {
                    access = data['access'];
                }
                );
            break;

        default:
            return true;
    }
    return false;
} 
```

### 问题详细说明：

*   用户单击页面中的链接以触发此功能。
*   无论用户输入是否有错误，函数都会返回 true 或 false
*   当这段代码执行时，我在收到`alert("SWITCH");`之前收到`alert("AJAX");`（第二种情况的条件目前是正确的，我在调试中将其反转以弄清楚发生了什么）
*   我有一个临时解决方案，将第二种情况直接移动到默认值之前，但我的猜测是更快的计算机执行开关比较的速度可能比服务器提供响应的速度更快，因此不是永久解决方案。（除非它不能那样工作），并且如果我放入一个计时器来等待预设的时间，如果服务器运行速度比正常慢，则可能会出现同样的问题
*   我知道我没有从 ajax 调用中获取新值，因为有时间与服务器通信，所以，我的第一个想法是找到一种方法来暂停函数，直到 ajax 成功函数完成。
*   我不能将开关放在 ajax 调用中，因为这个函数需要返回一个值。

### 解析度

我使用了异步设置，它就像一个魅力。只需将我的代码从更改`$.post()`为`$.ajax()`并将其设置为发布

```
$.ajax(
{
    url: "plugins/actions/edittickets/libs/changetickets.php", 
    type: 'POST',
    data: 
    {
        action: "category", 
        name: name, 
        parent: parent
    }, 
    async: false,
    success: function (data, textStatus, xhr)
    {
        //if returned true, the entry does exist for that parent
        if (data == "true")
            exists = true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:54:35.273

尝试返回`exists`，如下所示。

```
function validateinput (name, parent, access)
{
    //we assume that the input does not exist
    var exists = false;
    //validate with server, expected response is true or false
    $.post("AJAXURL", {action: "category", name: name, parent: parent}, 
    function (data, textStatus, xhr)
    {
        //if returned true, the entry does exist for that parent
        if (data == "true")
        {
            alert("AJAX");
            exists = true;
        }
        else
            exists = false;

        switch (true)
        {
            //If the name field is blank (still displaying hint)
            case (name == 'Subcategory Name' || name == 'Category Name'):
                alert("Please enter a name");
                break;
            //if the name already exists for that parent
            case (exists == true):
                alert("SWITCH");
                break;
            //if the parent field is displaying hint, assume parent is blank
            case (parent == 'Parent Category'):
                parent = '';
                break;
            //if the usergroup field is blank, assume value of parent
            case (access == 'UserGroup Allowed To View'):
                //if parent is also blank, assume lowest level usergroup access
                if (parent == '')
                    access = "UserGroupTicketWorkers";
                else
                    $.post("AJAXURL", {action: "specificcat", name: parent}, 
                    function (data, textStatus, xhr) {
                        access = data['access'];
                    });
                break;

            default:
                exists = true;
        }
    });
    return exists;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:45:41.477

如果这是您真正想要的`'async':false`，您可以通过添加参数列表以同步方式发送 AJAX 查询。

有关更多信息，请参阅文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

但是正如其他人在评论中指出的那样，这不是 switch 的工作方式，因此您仍然必须了解 switch 语句并更改相应的代码。请参阅此处了解更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

# teamcity - TeamCity：如何将 zip 文件复制为具有不同名称的工件（而不是包含它）

> ID：13752170
> 
> 赞同：3
> 
> 时间：2012-12-06T20:42:40.283
> 
> 标签：teamcity

我的构建创建了一个 zip 文件，我想将其指定为构建工件，但有一个例外：我想在 zip 文件的名称中使用构建号。

就像是：

`foo/bar.zip => foo_v%build.number%.zip`

不幸的是，我最终得到的是 b 内的 bar.zip

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:02:14.963

根据我的评论：

在您的批处理文件中，而不是使用

```
set zipname = bar.zip 
```

你可以使用类似的东西

```
set zipname = foo_%build.number%.zip. 
```

如果 TeamCity 正在构建您的构建，那么您可以在 MSBuild 中使用`$(BUILD_NUMBER)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:52:31.790

看起来好的解决方法可能是让 TeamCity 为您压缩文件

# javascript - 我是疯了还是 jsFiddle 有问题？

> ID：13752174
> 
> 赞同：2
> 
> 时间：2012-12-06T20:43:03.693
> 
> 标签：javascript, jsfiddle

这是我的小调试警报。差点把我的显示器扔出窗外。仅查看突出显示的代码。到底在什么情况下会触发这样的警报？- [http://i.stack.imgur.com/nrf1x.png](http://i.stack.imgur.com/nrf1x.png)

这是完整的小提琴，但我认为这并不重要：http: [//jsfiddle.net/Timson/QqVrF/8/](http://jsfiddle.net/Timson/QqVrF/8/)

```
if (currLoad > maxload){
    alert("I am dumbass, I think that "+currLoad+' is more than '+maxload);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:46:35.683

变量有可能都是字符串吗？在 JavaScript 控制台中：

```
6 > 1000
  false

"6" > "1000"
  true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:48:59.597

尝试 ：

```
if (parseInt(currLoad) > parseInt(maxload)){
            alert("I am dumbass, I think that "+currLoad+' is more than '+maxload);
        } 
```

正如较早的答案所说，您可能正在比较字符串..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:50:07.000

您从表单输入中获取这些值，因此它们是字符串。比较字符串与数字不同，因此`"6" > "1000"`为真而`6 > 1000`为假。

如果您从表单输入中获得的每个数字应该是数字，则应该将其解析为数字。使用示例`parseInt`或`Number`函数。例如：`parseInt(currLoad, 10)`等。

# javascript - 强制 div 成为任何和所有网页的最顶层元素

> ID：13752175
> 
> 赞同：13
> 
> 时间：2012-12-06T20:43:10.380
> 
> 标签：javascript, html, css, google-chrome-extension

我目前正在为 Chrome 构建一个开源插件。它已经完成了——但我正在尝试解决一些错误。本质上，在任何和所有网页中移动的 div（注入到页面的 HTML 中）必须是最顶层的元素，以便它可见。这是通过 z-index @ 999 实现的。但是，在某些网页上，这不起作用！

在我的脑海中，当您在 code.google.com 登录时，菜单栏覆盖了我的 div。

无论 Web 开发人员做什么，我如何在注入时强制它成为最顶层？

这是我的 div 的 CSS：

```
#ezselected {
  -webkit-transition: all .2s ease-in-out;
  -moz-transition: all .2s ease-in-out;
  -o-transition: all .2s ease-in-out;
  -ms-transition: all .2s ease-in-out;
  transition: all .2s ease-in-out;
  position:absolute;
  border-radius: 15px;
  z-index: 999;
  -webkit-box-shadow: 0px 0px 15px 5px rgba(255, 255, 100, .80);
  -moz-box-shadow: 0px 0px 15px 5px rgba(255, 255, 100, .80);
  /*box-shadow: 0px 0px 15px 5px rgba(255, 255, 100, .80);*/
  pointer-events:none; /* Make click-able through the DIV (for example, if it's on top of something with an event with kb) */
} 
```

PS，我试过 !important 无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T21:23:02.430

您的 z-index 为 999。在这种情况下，您尝试覆盖的元素的 z-index（附加了 .menuDiv 类的元素）的 z-index 为 1001。999 绝不是最大 z-索引值浏览器允许，因此您注入的 div 仍将低于更高的 z 索引元素。

根据您收到的问题中的一条评论，请参阅[Z-INDEX 的最小值和最大值](https://stackoverflow.com/questions/491052/mininum-and-maximum-value-of-z-index)，以讨论允许的 z-index 值以及在尝试创建最大级别元素时使用的内容（通常为 +2147483647）。

如果你知道你不希望这个元素被任何东西覆盖（警告：除了可能的元素也使用相同的元素），使用：

```
z-index: 2147483647; 
```

如果您想保留一些灵活性，您可能会考虑使用稍微低一些的东西。您可能被竞争元素分层的几次可能是值得的。只要您的 z-index 值接近 Max，如果您不介意可能导致插件出现一些渲染问题，您还可以编写一些脚本来将高于您的 z-index 降低到低于您的 z-index。

如果您再次遇到类似情况，Chrome 有一个相当不错的内置检查工具：右键单击导致您出现问题的元素，检查元素，然后在右侧显示区域中展开“计算样式”。请注意，z-index 可能很难跟踪（即使“视图继承”打开）：您需要选择适当定位的 div/etc，而不是静态内部元素。只要继续退出嵌套，直到找到它。

# sql - 与 Sql Geometry 字段不同的棘手 sql

> ID：13752176
> 
> 赞同：4
> 
> 时间：2012-12-06T20:43:09.740
> 
> 标签：sql, sql-server, geometry, distinct

我有一个与该类型不兼容的 sql 语句，`Sql Geometry`因此我正在尝试对其进行修改以使其工作。

它的基本要点是这样的：

```
Select distinct A,B,C,D,SHAPE FROM TABLE1 UNION SELECT A,B,C,D,SHAPE FROM TABLE2 
```

因此，对两个不同（但相似）表的复杂不同语句的结果是联合的。

问题是`SQL Geometry`类型（SHAPE 字段）不能包含在不同的语句中，因为它不是可比较的类型。

我可以`SHAPE`从参与联合的两个子查询中删除该字段。但我想在解析这些子查询后取回它。`SHAPE`如果我知道 A 列的值，我可以获得该字段。

**所以我的问题是**：如何从两个子查询中的不同语句中删除一个字段，然后通过将其加入另一列 (A) 中将该字段（连同其余字段）返回结果集中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:06:18.330

您可以转换为 VARBINARY(MAX)，然后再转换回来。

```
create table tbl1 ( ID int, a int, b char(3), d geometry );
create table tbl2 ( ID int, a int, b char(3), d geometry, other float );
insert tbl1 (ID, a, b, d) values
    (1, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 150 0, 150 150, 0 150, 0 0))', 0)),
    (2, 3, 3, geometry::STGeomFromText('POLYGON ((0 0, 150 0, 150 150, 0 150, 0 0))', 0)),
    (3, 4, 3, geometry::STGeomFromText('POLYGON ((0 0, 150 0, 150 150, 0 150, 0 0))', 0)),
    (4, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 250 0, 150 150, 0 150, 0 0))', 0)),
    (5, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 350 0, 150 150, 0 150, 0 0))', 0))
insert tbl2 (ID, a, b, d) values
    (6, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 150 0, 150 150, 0 150, 0 0))', 0)), -- same as tbl1.ID=1
    (7, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 950 0, 150 150, 0 150, 0 0))', 0)),
    (8, 2, 3, geometry::STGeomFromText('POLYGON ((0 0, 350 0, 150 150, 0 150, 0 0))', 0)); -- same as tbl1.ID=5

SELECT A, B, cast(c as geometry) c
FROM
(
    Select A,B,cast(D as varbinary(max)) c FROM tbl1
    UNION
    SELECT A,B,cast(D as varbinary(max)) FROM tbl2
) X; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:22:48.083

```
CREATE VIEW GeometryView1 AS
  SELECT A,B,C,D,SHAPE AS tabId FROM TABLE1 
  UNION SELECT A,B,C,D,SHAPE FROM TABLE2;

CREATE VIEW GeometryView2 AS
  SELECT DISTINCT A,B,C,D FROM (
  SELECT A,B,C,D AS tabId FROM TABLE1 
  UNION SELECT A,B,C,D FROM TABLE2) x;

SELECT DISTINCT v2.A,v2.B,v2.C,v2.D,v1.SHAPE FROM GeometryView2 v2 , GeometryView1 v1
WHERE v2.A=v1.A AND v2.B=v1.B AND v2.C=v1.C AND v2.D=v1.D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:42:10.590

这行得通吗？

```
with cte as (
Select distinct A,B,C,D FROM TABLE1
)
select c.A,c.B,c.C,c.D,t.SHAPE 
FROM cte as c
inner join TABLE1 as t
   on c.A = t.A
UNION 
SELECT A,B,C,D,SHAPE FROM TABLE2 
```

# java - 如何在没有内存溢出的情况下检查图表中的所有周期？

> ID：13752179
> 
> 赞同：2
> 
> 时间：2012-12-06T20:43:13.867
> 
> 标签：java, scala, graph

其相邻列表中的图形示例：

```
> (K01196,List(K00700, K01178, K01187, K00688))
> (K00844,List(K01835, K01810))
> (K00700,List(K00688))
> (K01178,List(K01196, K01187))
> (K00706,List(K00693, K01210, K00963, K00697, K16055))
> (K01810,List(K00844, K01835))
> (K01193,List(K00844, K01210, K01187))
> (K00693,List(K01196, K00688, K00700))
> (K16055,List(K01194, K00693))
> (K01835,List(K00844, K00688, K01810, K00963))
> (K00963,List(K00688, K16055, K00693, K01835, K00697))
> (K00697,List(K16055, K00693))
> (K01187,List(K01178, K01210, K00844)) 
```

第二个例子（容易出现问题）：

```
from,to
YIL099W,YPR184W
YIL099W,YJL216C
YIL099W,YIL172C
YIL099W,YGR292W
YIL099W,YOL157C
YIL099W,YJL221C
YIL099W,YBR299W
YIL099W,YGR287C
YLR258W,YPR184W
YLR258W,YPR160W
YLR258W,YEL011W
YGR032W,YFR015C
YGR032W,YLR258W
YGR032W,YGR282C
YGR032W,YOR190W
YGR032W,YDR261C
YGR032W,YLR300W
YGR032W,YHL012W
YGR032W,YKL035W
YGR032W,YBR126C
YGR032W,YMR261C
YGR032W,YDR074W
YGR032W,YML100W
YKL127W,YFR053C
YKL127W,YGL253W
YKL127W,YCL040W
YKL127W,YPR160W
YKL127W,YBR196C
YKL127W,YHL012W
YKL127W,YKL035W
YBR126C,YMR261C
YBR126C,YDR074W
YBR126C,YML100W
YBR126C,YFR015C
YBR126C,YLR258W
YBR299W,YIL099W
YBR299W,YIR019C
YBR299W,YGR282C
YBR299W,YOR190W
YBR299W,YDR261C
YBR299W,YLR300W
YBR299W,YFR053C
YBR299W,YGL253W
YBR299W,YCL040W
YMR105C,YFR053C
YMR105C,YGL253W
YMR105C,YCL040W
YMR105C,YPR160W
YMR105C,YBR196C
YMR105C,YHL012W
YMR105C,YKL035W
YIR019C,YPR184W
YIR019C,YJL216C
YIR019C,YIL172C
YIR019C,YGR292W
YIR019C,YOL157C
YIR019C,YJL221C
YIR019C,YBR299W
YIR019C,YGR287C
YFR053C,YKL127W
YFR053C,YMR105C
YFR053C,YMR278W
YFR053C,YBR196C
YGR287C,YIL099W
YGR287C,YIR019C
YGR287C,YGR282C
YGR287C,YOR190W
YGR287C,YDR261C
YGR287C,YLR300W
YGR287C,YFR053C
YGR287C,YGL253W
YGR287C,YCL040W
YCL040W,YKL127W
YCL040W,YMR105C
YCL040W,YMR278W
YCL040W,YBR196C
YEL011W,YPR160W
YIL162W,YFR053C
YIL162W,YGL253W
YIL162W,YCL040W
YIL162W,YGR282C
YIL162W,YOR190W
YIL162W,YDR261C
YIL162W,YLR300W
YIL162W,YJL216C
YIL162W,YIL172C
YIL162W,YGR292W
YIL162W,YOL157C
YIL162W,YJL221C
YIL162W,YBR299W
YIL162W,YGR287C
YHL012W,YPR160W
YHL012W,YMR261C
YHL012W,YDR074W
YHL012W,YML100W
YHL012W,YFR015C
YHL012W,YLR258W
YHL012W,YKL127W
YHL012W,YMR105C
YHL012W,YMR278W
YHL012W,YBR126C
YLR342W,YFR015C
YLR342W,YLR258W
YLR342W,YGR282C
YLR342W,YOR190W
YLR342W,YDR261C
YLR342W,YLR300W
YLR342W,YHL012W
YLR342W,YKL035W
YLR342W,YBR126C
YLR342W,YMR261C
YLR342W,YDR074W
YLR342W,YML100W
YGL253W,YKL127W
YGL253W,YMR105C
YGL253W,YMR278W
YGL253W,YBR196C
YGR292W,YIL099W
YGR292W,YIR019C
YGR292W,YGR282C
YGR292W,YOR190W
YGR292W,YDR261C
YGR292W,YLR300W
YGR292W,YFR053C
YGR292W,YGL253W
YGR292W,YCL040W
YJL216C,YIL099W
YJL216C,YIR019C
YJL216C,YGR282C
YJL216C,YOR190W
YJL216C,YDR261C
YJL216C,YLR300W
YJL216C,YFR053C
YJL216C,YGL253W
YJL216C,YCL040W
YPR184W,YEL011W
YPR184W,YIL099W
YPR184W,YIR019C
YPR184W,YJL216C
YPR184W,YIL172C
YPR184W,YGR292W
YPR184W,YOL157C
YPR184W,YJL221C
YPR184W,YBR299W
YPR184W,YGR287C
YPR184W,YPR160W
YOL157C,YIL099W
YOL157C,YIR019C
YOL157C,YGR282C
YOL157C,YOR190W
YOL157C,YDR261C
YOL157C,YLR300W
YOL157C,YFR053C
YOL157C,YGL253W
YOL157C,YCL040W
YDR074W,YBR001C
YDR074W,YDR001C
YDR074W,YPR026W
YDR074W,YFR015C
YDR074W,YLR258W
YJL221C,YIL099W
YJL221C,YIR019C
YJL221C,YGR282C
YJL221C,YOR190W
YJL221C,YDR261C
YJL221C,YLR300W
YJL221C,YFR053C
YJL221C,YGL253W
YJL221C,YCL040W
YMR306W,YFR015C
YMR306W,YLR258W
YMR306W,YGR282C
YMR306W,YOR190W
YMR306W,YDR261C
YMR306W,YLR300W
YMR306W,YHL012W
YMR306W,YKL035W
YMR306W,YBR126C
YMR306W,YMR261C
YMR306W,YDR074W
YMR306W,YML100W
YIL172C,YIL099W
YIL172C,YIR019C
YIL172C,YGR282C
YIL172C,YOR190W
YIL172C,YDR261C
YIL172C,YLR300W
YIL172C,YFR053C
YIL172C,YGL253W
YIL172C,YCL040W
YBR196C,YFR053C
YBR196C,YGL253W
YBR196C,YCL040W
YBR196C,YKL127W
YBR196C,YMR105C
YBR196C,YMR278W
YML100W,YBR001C
YML100W,YDR001C
YML100W,YPR026W
YML100W,YFR015C
YML100W,YLR258W
YFR015C,YPR184W
YFR015C,YPR160W
YFR015C,YEL011W
YMR278W,YFR053C
YMR278W,YGL253W
YMR278W,YCL040W
YMR278W,YPR160W
YMR278W,YBR196C
YMR278W,YHL012W
YMR278W,YKL035W
YKL035W,YPR160W
YKL035W,YMR261C
YKL035W,YDR074W
YKL035W,YML100W
YKL035W,YFR015C
YKL035W,YLR258W
YKL035W,YKL127W
YKL035W,YMR105C
YKL035W,YMR278W
YKL035W,YBR126C
YMR261C,YBR001C
YMR261C,YDR001C
YMR261C,YPR026W
YMR261C,YFR015C
YMR261C,YLR258W 
```

相邻列表是使用默认值 List() 构建的。您可以使用以下函数加载边缘，它将返回一个相邻列表。

```
 def reader_AdjacentList(edgefile: String): Map[String, List[String]] = {
    val sourcefile = Source.fromFile(edgefile)
    val pat = """([A-Z]\w+),([A-Z]\w+)""".r
    sourcefile.getLines.:\(Map[String, List[String]]().withDefaultValue(List()))((line, maps) =>
      pat.findFirstMatchIn(line) match {
        case Some(pat(from, to)) => if (maps.contains(from)) maps.updated(from, maps(from).+:(to).distinct)
        else maps.+((from, List(to)))
        case None => maps
      })
  } 
```

下面的功能是检查给定起始节点和图形的所有循环：

```
def checkCycles(start: String, maps: Map[String, List[String]]): List[List[String]] = {
  def explore(node: String, visits: List[String]): List[List[String]] = {
    if (visits.contains(node)) List(visits.+:(node))
    else {
      if (maps(node).isEmpty) List()
      else {
        maps(node).flatMap(x => explore(x, visits.+:(node)))
      }
    }
  }
  explore(start, List())
} 
```

运行检查所有循环路径的程序如下（`adList`是开头相邻列表表示的图形）：

```
val cycles = adList.toList.flatMap(pair => checkCycles(pair._1, adList))

cycles.foreach(println) 
```

该程序适用于其他一些图形示例，例如上面给出的第一个示例，但不适用于第二个示例，尽管 eclipse 中的堆大小已设置为 4G，但它会给出以下错误。

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

有谁知道这个程序有什么问题，以及如何改进它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:25:58.950

在我的计算机上完全可以正常工作，无需更改有关堆空间的任何设置。长度为 818。我所做的`cycles`唯一更改是所有节点现在都是符号（因为我只是将您的人员复制到我的 IDE 中，这是让事情正常工作的最快方法），这根本不重要。

**更新** 由于第二个示例不容易复制和粘贴，因此我正在生成自己的更大规模示例，这是一个随机图，每个节点都有`n`节点和`k`边（删除了自环和重复边）。

```
val rand = new java.util.Random
val n = 50
val k = 4
val map = 0 until n map (i => {
  i -> ((0 until k) map (_ => rand.nextInt(n)) filter (_ != i) groupBy(identity) map (_._1) toList)
}) toMap 
```

对于`n=50`和`k=4`，有 124693 个“循环”（如您所定义）。我也试过`n=100`and `k=10`，似乎有太多的路径要计算，所以程序不会在几分钟内终止，但不会引发内存异常。

# php - 如何根据两个键值对数组键进行排序？

> ID：13752181
> 
> 赞同：0
> 
> 时间：2012-12-06T20:43:20.217
> 
> 标签：php

假设我需要在需要检查键值的数组中运行 for 循环。我想在不匹配的元素之前打印不匹配的数组元素。

因此，使用下面的数组（为清楚起见添加了额外的值），我希望它按如下方式打印。它需要匹配`current_tag`和`last_tag`值。如果它们不匹配，则需要在其他密钥之前打印该密钥。

**期望的结果**

```
TEST2

TEST1 
TEST3 
TEST4 
```

**大批**

```
array(2) {
    [0]=>
    array(3) {
        ["name"]=>
            string(3) "TEST1"
        ["current_tag"]=>
            string(13) "20121129_TEST1"
        ["last_tag"]=>
            string(13) "20121129_TEST1"
    }
    [1]=>
    array(3) {
        ["name"]=>
            string(3) "TEST2"
        ["current_tag"]=>
            string(13) "20121205_TEST2"
        ["last_tag"]=>
            string(13) "20121129_TEST2"
    }
    ...
    ...
    ...
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:51:18.463

我会`usort`使用自定义回调对数组进行排序。排序后，您可以打印每个`name`键。

```
usort($array, function($a, $b) {
    $match_a = $a['current_tag'] == $a['last_tag'];
    $match_b = $b['current_tag'] == $b['last_tag'];

    if ($match_a && $match_b) {
        return 0;
    } elseif ($match_a && !$match_b) {
        return 1;
    } elseif (!$match_a && $match_b) {
        return -1;
    }
});

array_walk($array, function($item) {
    echo $item['name'];
}); 
```

如果它的排序错误，只需切换 1 和 -1 返回值。

# android - 媒体播放器流 id3 推送

> ID：13752184
> 
> 赞同：2
> 
> 时间：2012-12-06T20:43:30.387
> 
> 标签：android, media-player

我正在尝试在 Android 上创建自己的 Radio 应用程序，当我尝试从实时 mp3 流中获取元数据时我很挣扎，所以问题是： `How to get Android MediaPlayer OnInfoListener notified when live stream meta data is changed and display it?`

我在这里找到了其他主题，说我可以使用这个`MEDIA_INFO_METADATA_UPDATE`，但它永远不会更新。这里是主题：[Android：MediaPlayer，如何获取音频流的属性？](https://stackoverflow.com/questions/4842842/android-mediaplayer-how-to-get-properties-of-an-audio-stream)

也许你们中的一些人已经解决了这个问题？

# java - 如何使用 x[]、y[]、z[] 使用 jzy3d 绘制等高线图

> ID：13752186
> 
> 赞同：1
> 
> 时间：2012-12-06T20:43:31.313
> 
> 标签：java, plot, 2d, contour

是否可以使用 jzy3d 库绘制具有特定坐标的 x[],y[],z[] 数组的填充轮廓？

# c# - 通过 httpwebrequest 从网站检索文档，不返回任何查询

> ID：13752187
> 
> 赞同：1
> 
> 时间：2012-12-06T20:43:42.120
> 
> 标签：c#, httpwebrequest

有一个公共网站，我想以编程方式检索一个文档，通过浏览器执行此操作运行良好，但通过代码执行此操作返回“NO Query”。

任何人都可以检查一下，我做错了什么，老实说我坚持了几天......

这是代码：

```
string fileUrl = @"http://docsonline.wto.org/imrd/directdoc.asp?DDFDocuments/t/G\SPS\NALB149.doc";
            Uri uri = new Uri(fileUrl);

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);

            using (HttpWebResponse webResponse = (HttpWebResponse)request.GetResponse())
            {

                using (Stream responseStream = webResponse.GetResponseStream())
                {
                    if (responseStream != null)
                    {
                        using (MemoryStream memoryStream = new MemoryStream())
                        {
                            byte[] buffer = new byte[8192];
                            int bytesRead;
                            while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
                            {
                                memoryStream.Write(buffer, 0, bytesRead);
                            }
                            memoryStream.Seek(0, SeekOrigin.Begin);

                            string fileName = fileUrl.Substring(fileUrl.LastIndexOf("/") + 1, fileUrl.Length - fileUrl.LastIndexOf("/") - 1).Replace(@"\", "_");

                            using (FileStream fileStream = System.IO.File.Create(@"C:\temp\" + fileName, (int)memoryStream.Length))
                            {
                                // Fill the bytes[] array with the stream data
                                byte[] bytesInStream = new byte[memoryStream.Length];
                                memoryStream.Read(bytesInStream, 0, (int)memoryStream.Length);

                                // Use FileStream object to write to the specified file
                                fileStream.Write(bytesInStream, 0, bytesInStream.Length);
                            }
                        }
                    }
                }
            } 
```

如您所见，有一个指向我要检索的文件的链接，有人可以尝试吗？

也许会比我有更多的运气......

等待答复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:58:38.000

好的，这里有两个问题：

1.  您需要一个用于请求的 cookie 容器：

    ```
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
    request.CookieContainer = new CookieContainer(); 
    ```

2.  您的路径包含由`System.Uri`类转义的反斜杠。结果，请求是针对 的`directdoc.asp?DDFDocuments/t/G%5CSPS%5CNALB149.doc`，它重定向到 404 错误。

要修复 #2，您需要将`dontEscape`参数传递给[构造`Uri`函数](http://msdn.microsoft.com/en-us/library/9zh9wcb3.aspx)：

```
Uri uri = new Uri(fileUrl, true); 
```

自 .NET 2.0 以来，此构造函数已被标记为过时，但它仍然有效。

完成这些更改后，您应该能够成功下载文档。

# java - 聊天客户端表情窗口JAVA

> ID：13752188
> 
> 赞同：0
> 
> 时间：2012-12-06T20:43:42.890
> 
> 标签：java, swing, popup, window, panel

我一直在努力创建一个聊天客户端（java swing），并且我刚刚使我的表情符号完全可用，但除了让用户输入“:)”之外，我想提供一个包含所有可用表情符号的弹出窗口。我正在寻找的是一种制作这样一个窗口的方法（例如像 Skype 的）。我该怎么做？我已经尝试过使用 JMenu，但它并没有达到我想要的效果。我想在输入文本区域附近放置一个小图像（可能是表情符号），单击它时，会弹出一个充满表情符号的正方形，然后在鼠标单击时在文本区域中输入例如“:)”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:46:00.810

这[`ListPanel`](https://stackoverflow.com/a/7620726/230513)可能很有用，因为`DefaultListCellRenderer`可以显示`Icon`.

![在此处输入图像描述](../Images/4a9a78523c9dc91b3fd39cc9340e1b7d.png)

```
Icon icon = UIManager.getIcon("html.pendingImage");
...
@Override
public Component getListCellRendererComponent(JList list, Object
    value, int index, boolean isSelected, boolean cellHasFocus) {
    JLabel label =  (JLabel) super.getListCellRendererComponent(
        list, value, index, isSelected, cellHasFocus);
    label.setBorder(BorderFactory.createEmptyBorder(N, N, N, N));
    label.setIcon(icon);
    label.setHorizontalTextPosition(JLabel.CENTER);
    label.setVerticalTextPosition(JLabel.BOTTOM);
    return label;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:00:23.737

在没有更多信息的情况下，我假设您真正想要的是一个没有窗口装饰（即边框和标题栏）且不显示在任务栏中的窗口。因此，我建议您查看[JWindow](http://docs.oracle.com/javase/6/docs/api/javax/swing/JWindow.html)文档，该文档正是这样做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:01:50.110

我想你的意思是这样的聊天窗口。在这种情况下，您将需要学习如何将组件相互叠加，在本例中是 jPanel 或嵌套在主 jFrame 内的 jLayeredPane。

![聊天](../Images/21d6b896e0b78725bd5b1009ab1ed493.png)

# c++ - 使用 doxygen 记录枚举值

> ID：13752191
> 
> 赞同：41
> 
> 时间：2012-12-06T20:43:51.090
> 
> 标签：c++, c++11, enums, doxygen

鉴于：

```
namespace Foo {
    class Foo {
    public:
        /// Foo enum, possible ways to foo
        enum class Foo {
            /// Foo it with an A
            A,
            /// Foo it with a B
            B,
            /// Foo it with a C
            C
        }
    }
} 
```

而使用 制作的默认 Doxyfile `doxygen -g`，我得到了这个：

![生成的文档](../Images/606eee65919e682548c31cce07e8ff9e.png)

如何获取记录的枚举值？我尝试将评论放在成员之前/之后，使用`///<`等，但无济于事。这可能只是 doxygen 中的一个错误吗？文档中的示例有效。（单击枚举的名称不会带我到任何地方）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-07T03:09:42.323

使用 Doxygen 1.8.2，以下两项都对我有用：

**使用`///`**

```
/// This is an enum class
enum class fooenum {
    FOO, ///< this is foo
    BAR, ///< this is bar
}; 
```

**使用`/*! ... */`**

```
/*! This is an enum class */
enum class fooenum {
    FOO, /*!< this is foo */
    BAR, /*!< this is bar */
}; 
```

![简要描述;简介](../Images/824dfb53ea99a6e2a869426a7d666982.png) ![详细说明](../Images/3fe979f31c5da4180e4d63c23532ebed.png)

[doxygen 更改日志](http://www.doxygen.nl/manual/changelog.html)说Doxygen 1.8.2 支持，`enum class`所以我怀疑你的命令中可能存在一些小的语法问题。您能否将您的命令与上述两个片段进行比较？

> 新的功能
> 
> 添加了对 C++11 的支持：
> 
> ```
> strongly typed enums, e.g.:
> enum class E 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-11T04:20:27.633

请注意，我个人讨厌有冗长的头文件（因为记录意味着编写至少 2 或 3 行文档，而不是一个字，所以我通常没有足够的简短内容）所以我更喜欢在 . .cpp 文件。

为此，您使用`\var`Doxygen 的功能。

所以标题是裸露的：

```
namespace Foo {
    class Foo {
    public:
        enum class Foo {
            A,
            B,
            C
        };
    };
} 
```

.cpp 文件有：

```
namespace Foo {

/** \enum Foo::Foo
 * \brief Foo enum, possible ways to foo
 *
 * All the necessary details about this enumeration.
 */

/** \var Foo::A
 * \brief Foo it with an A
 *
 * When you use A... etc.
 */

/** \var Foo::B
 * \brief Foo it with a B
 *
 * When you use B... etc.
 */

/** \var Foo::C
 * \brief Foo it with a C
 *
 * When you use C... etc.
 */

} 
```

这样，我就可以真正详细地记录这在我身上经常发生的事情。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-07T03:38:54.743

以下样式对我有用：

```
enum class Foo {
  /**Foo it with A*/
  A,
  /**Foo it with B*/
  B
} 
```

# android - 如何在android中旋转分区圆

> ID：13752193
> 
> 赞同：0
> 
> 时间：2012-12-06T20:43:50.760
> 
> 标签：android, android-layout

我在 android 中绘制了一个分区圆。我想知道有什么方法可以旋转那个圆圈。我从从以下链接获得的代码中绘制了圆圈，并对该代码进行了更改以在每个弧中绘制文本：
[如何在 android 中绘制带有分区的圆圈？](https://stackoverflow.com/questions/9205838/how-to-draw-circle-with-partitioned-in-android)

谁能帮我旋转那个圆圈。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:55:26.193

你可以旋转你`canvas`的：

```
canvas.save();
canvas.rotate(angleInDegrees);
// Do your drawing
canvas.restore(); 
```

如果您想绘制其他东西但不旋转，则必须保存并恢复您的画布。

# iphone - 如何在自定义 UITableViewCell 中增加 Label 的高度

> ID：13752196
> 
> 赞同：0
> 
> 时间：2012-12-06T20:44:00.183
> 
> 标签：iphone, uitableview

我创建了一个自定义 UITableViewCell ，并且从 xib 加载，所以现在文本可能是动态的，所以我希望 UILabel 的高度出现在自定义 UITableViewCell 动态中，

自定义 UITableViewCell 的代码是

```
 #import <UIKit/UIKit.h>

   @interface NarrativeCell : UITableViewCell
   @property(nonatomic,retain) IBOutlet UILabel *noteTitle;
   @property(nonatomic,retain) IBOutlet UILabel *noteDate;
   @property(nonatomic,retain) IBOutlet UILabel *noteDesc;
   @property(nonatomic,retain) IBOutlet UIImageView *sideImage;
   @property(nonatomic,retain) IBOutlet UIButton *imageButton;
   @property(nonatomic,retain) IBOutlet UIButton *audioStartButton; 
   @property(nonatomic,retain) IBOutlet UIButton *audioStopButton;

   @end 
```

这是代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

      static NSString *CellIdentifier = @"NarrativeCell";

    NarrativeCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil){
    NSLog(@"New Cell Made");

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"NarrativeCell" owner:nil options:nil];

    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[NarrativeCell class]])
        {
            cell = (NarrativeCell *)currentObject;
            break;
        }
    }
}
Narratives *n=(Narratives *)[tableArray objectAtIndex:indexPath.row];

CGRect newFrame = cell.noteDesc.frame;

NSLog(@"old %f",newFrame.size.height);
newFrame.size.height = expectedLabelSize.height;
//yourLabel.frame = newFrame;
NSLog(@"new %f",newFrame.size.height);
 newFrame.size.height = expectedLabelSize.height;

[cell.noteDesc setFrame:newFrame];
[cell.noteDesc setNumberOfLines:0];

[cell.noteDesc setText:n.cfcnl_note];

return cell;

} 
```

但不幸的是我无法调整高度

```
 [cell.noteDesc setFrame:newFrame]; 
```

我认为因为它是从 nib 文件加载的，请帮助我如何动态更改 UILabel 的高度呈现自定义 UITableViewCell（在 nib 中创建）。

/////////编辑

在这里查看 old 21.000000 new 42.000000 的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:40:50.633

看起来您的单元格比文本所需的要小。因此，您需要使用 heightForRowAtIndexpath 方法找到正确的单元格高度。如果您在单元格内有足够的空间来调整大小，您应该向我们展示您的 XIB 子视图层次结构，似乎您做错了什么（一些超级视图剪辑来限制您的标签）。

PS无论如何，这不是因为您使用的是界面生成器。

# objective-c - 在 applicationState != UIApplicationStateBackground 测试通过后收到 UIApplicationWillEnterForegroundNotification

> ID：13752197
> 
> 赞同：4
> 
> 时间：2012-12-06T20:44:08.023
> 
> 标签：objective-c, uikit, grand-central-dispatch

我正在编写一个使用 GCD 计时器源的 Objective-C 包装器。目标之一是让包装器在应用程序进入后台时管理暂停计时器源。

的[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW20)表明它应该用于`-[UIApplicationDelegate applicationDidEnterBackground:]`使计时器无效等；我对此的解释有些松散（也许这是我的问题的根源？），因为我正在暂停 GCD 计时器（`dispatch_suspend()`）以响应`UIApplicationDidEnterBackgroundNotification`）。

当包装器的实例被初始化时，它会检查`[UIApplication sharedApplication].applicationState != UIApplicationStateBackground`以确定 GCD 计时器源是否应该作为初始化序列的一部分最初恢复。它还注册`UIApplicationDidEnterBackgroundNotification`并`UIApplicationWillEnterForegroundNotification`用于暂停和恢复定时器源（分别）。

我观察到的问题是，似乎在某些情况下`[UIApplication sharedApplication].applicationState != UIApplicationStateBackground`通过了初始化期间的检查，以便恢复计时器源，***并且***收到的下一个通知是`UIApplicationWillEnterForegroundNotification`导致计时器源第二次恢复的情况。这会导致崩溃，因为计时器在第二次恢复时没有暂停。

我可以通过在本地跟踪应用程序状态并确认可能重复的转换来解决此问题，但我担心我可能做错了什么或可能存在错误（在实现中或在文档中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:48:18.623

这是应用程序状态的工作方式：

在初始启动时，

1.  应用程序：didFinishLaunchingWithOptions
2.  applicationDidBecomeActive

当你按下主页按钮时，

1.  applicationWillResignActive
2.  applicationDidEnterBackground

当您打开后台应用程序时，

1.  applicationWillEnterForeground
2.  applicationDidBecomeActive

打开 - （初始启动和打开后台应用程序） - 调用 applicationDidBecomeActive - 在此处初始化计时器。

隐藏或接听电话等 - applicationWillResignActive 被调用 - 在这里停止计时器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:19:01.467

因此，您可以采取以下措施更好地了解正在发生的事情：

在您的应用程序 main.m 中，添加以下内容：

```
 @interface GTTestObject : NSObject

 - (void)logNotification:(id)sender;
 @end

 @implementation GTTestObject

 - (void)logNotification:(id)sender {

     NSLog(@"%@", [(NSNotification *)sender name]);

 }
 @end

 int main(int argc, char *argv[])
 {
     @autoreleasepool {

         // I'm assuming you'd be using ARC...
         GTTestObject *obj = [[GTTestObject alloc] init];
         [[NSNotificationCenter defaultCenter] addObserver:obj selector:@selector(logNotification:) name:nil object:nil];

         return UIApplicationMain(argc, argv, nil, NSStringFromClass([GTAppDelegate class]));
     }
 } 
```

然后对于每个`MyAppDelegate.m`方法“...didFinishLaunching、...didEnterBackground 等” 添加这个：

```
 NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd)); 
```

现在您将能够看到顺序、时间戳和（可能）与同时发生的通知/委托调用的任何冲突。

您可能会在不同的测试中得到稍微不同的结果，因此请多次运行以确保。

对于示例运行，我每次都看到：

```
 2012-12-21 08:13:58.559 Gamerton[34158:c07] [GTAppDelegate application:didFinishLaunchingWithOptions:] state: UIApplicationStateInactive
 2012-12-21 08:13:58.560 Gamerton[34158:c07] UIApplicationDidFinishLaunchingNotification state: UIApplicationStateInactive

 ...

 2012-12-21 08:13:58.561 Gamerton[34158:c07] [GTAppDelegate applicationDidBecomeActive:] state: UIApplicationStateActive
 2012-12-21 08:13:58.561 Gamerton[34158:c07] UIApplicationDidBecomeActiveNotification state: UIApplicationStateActive

 ... Hit home button

 2012-12-21 08:16:08.227 Gamerton[34170:c07] [GTAppDelegate applicationWillResignActive:] state: UIApplicationStateActive
 2012-12-21 08:16:08.228 Gamerton[34170:c07] UIApplicationWillResignActiveNotification state: UIApplicationStateActive
 2012-12-21 08:16:08.229 Gamerton[34170:c07] UIApplicationSuspendedNotification state: UIApplicationStateBackground
 2012-12-21 08:16:08.229 Gamerton[34170:c07] [GTAppDelegate applicationDidEnterBackground:] state: UIApplicationStateBackground

 ... Reopen app

 2012-12-21 08:16:59.364 Gamerton[34170:c07] [GTAppDelegate applicationWillEnterForeground:] state: UIApplicationStateBackground
 2012-12-21 08:16:59.365 Gamerton[34170:c07] UIApplicationWillEnterForegroundNotification state: UIApplicationStateBackground
 2012-12-21 08:16:59.365 Gamerton[34170:c07] _UIApplicationDidRemoveDeactivationReasonNotification
 2012-12-21 08:16:59.366 Gamerton[34170:c07] [GTAppDelegate applicationDidBecomeActive:] state: UIApplicationStateActive
 2012-12-21 08:16:59.366 Gamerton[34170:c07] UIApplicationDidBecomeActiveNotification state: UIApplicationStateActive
 2012-12-21 08:16:59.366 Gamerton[34170:c07] UIApplicationResumedNotification state: UIApplicationStateActive
 2012-12-21 08:16:08.230 Gamerton[34170:c07] UIApplicationDidEnterBackgroundNotification state: UIApplicationStateActive 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:07:47.400

从 UIApplication 文档：

```
UIApplicationStateInactive
The application is running in the foreground but is not receiving events. 
This might happen as a result of an interruption or because the application
is transitioning to or from the background. 
```

因此，您的应用可能处于后台，很快将处于前台，但目前正在转换。

# ruby-on-rails-3 - Rails 通过 ActiveRecord::Relation 内部参数？

> ID：13752198
> 
> 赞同：0
> 
> 时间：2012-12-06T20:44:10.510
> 
> 标签：ruby-on-rails-3, performance

我正在向我的一个控制器操作发出 AJAX 获取请求，该控制器操作负责将 JSON 提供给一个 javascript 函数，该函数又根据我的视图内的数据生成一个 svg。

但是，我正在使用的数据也需要在视图内的表中表示，并且我不希望查询必须多次针对数据库运行，所以我想知道是否可以只执行对页面的初始请求的查询，然后在参数哈希下使用 AJAX 将其传递给我的另一个控制器？

为了简化问题，这里概述了当前的工作流程：

**页面请求 -> 查询 -> 查看服务 -> AJAX GET 请求 -> 查询 -> 生成 SVG**

我想要的是：

**页面请求 -> 查询 -> 查看服务 -> AJAX GET 请求 -> 生成 SVG**

我想我可以简单地将关系作为 AJAX 请求中的参数传递，而不是将关系作为 ActiveRecord::Relation 传递，而是将其作为字符串传递：

```
"#<ActiveRecord::Relation:0x00000009137fc8>":String 
```

我还尝试将其存储到会话中，例如：

```
session[:foo] = @bar 
```

但是我遇到了以下错误消息，这使我相信会话不能存储关系？

> **无法使用默认 proc 转储哈希**

这种工作流程的首选解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:59:32.490

这`ActiveRecord::Relation`是一个内部 Rails 对象，它不是 JavaScript 的“外部世界”所知道的。（理论上，你可以序列化它，然后反序列化它......但这只是一个坏主意:-)。所以不，这不是正确的方法。您可以在会话中保存对象本身（查询的结果，而不是 ActiveRecord::Relation），尽管这通常不是好的做法。

那么如何才能实现你想要的呢？

首先，Rails 倾向于缓存大多数数据库查询，因此在优化某些内容之前，请确保它需要优化。

假设确实如此，您似乎在做两件事：显示查询结果，然后发出不同的请求（AJAX 请求）来生成 SVG。这两种方法不是完全不同的吗（嗯，显然在某些方面相关），但形式不同，并且在不同的时间运行。这将提出两种不同的方法。

如果它们真的很接近——也就是说，你在第一个视图中有 90% 的内容，那么你也可以在第一个视图中添加一个隐藏字段或未显示的值，并在触发 AJAX 查询的 JS 中生成 SVG 所需的值的页面 (DOM)。

在某些情况下，我看到人们使用`data-`HTML 中的属性以更结构化的形式保存属性值，这种形式可以通过 JS 轻松访问，从而有效地将完整对象序列化为 HTML 中未显示的数据。

但在你这样做之前，请确保你正在优化需要优化的东西:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T14:09:19.163

you can do this :

var relation = '<%= @criteria.where_values_hash.to_json.html_safe %>'

Then you can send this relation var in the ajax request in "data"

# amazon-web-services - will an on demand ec2 instance with root device ebs restart normally?

> ID：13752204
> 
> 赞同：1
> 
> 时间：2012-12-06T20:44:19.467
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ebs

I'm new to AWS. I have a Maverick Ubuntu installed on demand instance with root device EBS. I have a Mysql database running. Now ubuntu displays I should restart for new updates to be installed.

1.  If I restart the system will it restart using root device EBS? Will there be any configuration or data losses?
2.  Which way should I backup the system?

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:57:51.987

不，由于您使用的是 EBS，因此不会有任何损失。要备份文件系统，您应该关闭 mysql，刷新文件系统，或者如果您使用支持它的文件系统，请使用 xfs_freeze 将其静默。

这个问题不太适合 SO，所以我希望它能够迁移到 Server Fault，这是搜索类似问题的好地方。

# c++ - g++ warn when double/float is converted to unsigned integer without using -Wconversion

> ID：13752205
> 
> 赞同：10
> 
> 时间：2012-12-06T20:44:19.333
> 
> 标签：c++, c, g++

> **Possible Duplicate:**
> [g++ -Wall not warning about double-> int cast](https://stackoverflow.com/questions/5553103/g-wall-not-warning-about-double-int-cast)

Per the question [here](https://stackoverflow.com/questions/10541200/casting-double-to-unsigned-int), direct conversion from double/float to unsigned integer is not portable. I found I had a few cases in my code where this happens and I would like to tell g++ to warn me if this occurs, but I can't find such an option. Does anyone know if there is an option to do this?

Note: I do see -Wconversion, but that also warns about all kinds of other conversions that I don't care about (like converting int to unsigned int, which is portable per the standard).

Edit: Here's a code example for which I would like to see a warning:

```
double dblNumber = -234;
unsigned long uintNumber = dblNumber; 
```

On one version of g++, this gives me an integer value of 0xFFFFFF16 (which is -234 in 2's complement) . On another it gives me 0\. Clearly the code is ambiguous, which is why it is understandably not considered portable.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:28:20.367

我知道您说您不想使用`-Wconversion`，但它会警告您关心的问题，并且至少在 g++ 4.5 中转换`long`为`unsigned long`（例如）时不会发出警告。对于它警告您正在执行合法所需转换的任何其他情况，*只需将其*转换为。您未来的维护者将非常感谢您明确表示正在进行已知的转换，而不是从代码上下文中猜测它是否是有意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:47:02.607

When a *float to int* implicit conversion is done, and the truncated value cannot fit the destination type, then the behaviour is undefined, as your example nicely illustrates it.

If the only tool provided by g++ is the *-Wconversion*, perhaps you should make your own tool to filter the warnings out to your convenience (I am thinking the usual *sed*, *awk*, *perl* or *php*, but it depends on the availability of these tools on your system, and maybe you can do something similar directly from your IDE if you use one).

You can also use [specific pragma directives](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html) of gcc to restrict conversion checks to specific files, or even specific code parts.

Any other programatic method used to pinpoint in your code where problematic conversions happen could certainly be used to insert explicit casts, which is the goal your should be aiming for.

# ios - Random parse issues

> ID：13752210
> 
> 赞同：0
> 
> 时间：2012-12-06T20:44:31.633
> 
> 标签：ios, xcode, parsing

My code was working fine then all of a sudden i got these 4 random parse issues... Can anyone help me out with whats happened?

Image below shows the issues.

[http://postimage.org/image/qu0gzsoe3/](http://postimage.org/image/qu0gzsoe3/)

Code is also below

```
 #import "ComputingProjectFirstViewController.h"

@interface ComputingProjectFirstViewController()

@end

@implementation ComputingProjectFirstViewController

@synthesize imageview = HomeImage;

- (void)viewDidLoad
{

    NSAssert(self.imageview, @"self.imageView is nil. Check your IBOutlet connections");

    imageArray = [NSArray arrayWithObjects:
                  [UIImage imageNamed:@"wide awake 0.jpg"],
                  [UIImage imageNamed:@"wide awake 1.jpg"],
                  [UIImage imageNamed:@"wide awake 2.jpg"],
                  [UIImage imageNamed:@"wide awake 3.jpg"],
                  [UIImage imageNamed:@"wide awake 4.jpg"],
                  [UIImage imageNamed:@"wide awake 5.jpg"],
                  [UIImage imageNamed:@"wide awake 6.jpg"],
                  nil];
                self.imageview.backgroundColor = [UIColor blackColor];
                  self.imageview.clipsToBounds = YES;

    int count = [imageArray count];
    for (int i = 0; i <count-1 ; i++)
    {
        UIImage *currentImage = [imageArray objectAtIndex: i];
        UIImage *nextImage = [imageArray objectAtIndex: i +1];
        self.imageview.image = [imageArray objectAtIndex: i];
        [self.view addSubview:self.imageview];
        CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
        crossFade.duration = 5.0;
        crossFade.fromValue = (__bridge id)(currentImage.CGImage);
        crossFade.toValue = (__bridge id)(nextImage.CGImage);
        [self.imageview.layer addAnimation:crossFade forKey:@"animateContents"];
        self.imageview.image = nextImage;

    }; 
```

.h file:

```
 #import <UIKit/UIKit.h> 
 #import <QuartzCore/QuartzCore.h>
 #import <MessageUI/MessageUI.h>

 @interface ComputingProjectFirstViewController :       UIViewController<MFMailComposeViewControllerDelegate>{
UIImageView* HomeImage;
NSArray *imageArray;

@property (nonatomic, retain) IBOutlet UIImageView* imageview;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:49:53.230

如果这就是您在方法末尾`viewDidLoad`缺少额外内容的全部内容，请在 for 循环结束时删除您的。应该是这样的 `}``viewDidLoad``;`

```
#import "ComputingProjectFirstViewController.h"

@interface ComputingProjectFirstViewController()

@end

@implementation ComputingProjectFirstViewController

@synthesize imageview = HomeImage;

- (void)viewDidLoad
{

    NSAssert(self.imageview, @"self.imageView is nil. Check your IBOutlet connections");

    imageArray = [NSArray arrayWithObjects:
                 [UIImage imageNamed:@"wide awake 0.jpg"],
                 [UIImage imageNamed:@"wide awake 1.jpg"],
                 [UIImage imageNamed:@"wide awake 2.jpg"],
                 [UIImage imageNamed:@"wide awake 3.jpg"],
                 [UIImage imageNamed:@"wide awake 4.jpg"],
                 [UIImage imageNamed:@"wide awake 5.jpg"],
                 [UIImage imageNamed:@"wide awake 6.jpg"],
                 nil];
                 self.imageview.backgroundColor = [UIColor blackColor];
                 self.imageview.clipsToBounds = YES;

    int count = [imageArray count];
    for (int i = 0; i <count-1 ; i++)
    {
        UIImage *currentImage = [imageArray objectAtIndex: i];
        UIImage *nextImage = [imageArray objectAtIndex: i +1];
        self.imageview.image = [imageArray objectAtIndex: i];
        [self.view addSubview:self.imageview];
        CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
        crossFade.duration = 5.0;
        crossFade.fromValue = (__bridge id)(currentImage.CGImage);
        crossFade.toValue = (__bridge id)(nextImage.CGImage);
        [self.imageview.layer addAnimation:crossFade forKey:@"animateContents"];
        self.imageview.image = nextImage;

    }
} 
```

同样在您的标题中，您缺少一个 `}`应该如下所示：

```
 #import <UIKit/UIKit.h> 
 #import <QuartzCore/QuartzCore.h>
 #import <MessageUI/MessageUI.h>

 @interface ComputingProjectFirstViewController : UIViewController<MFMailComposeViewControllerDelegate>{
    UIImageView* HomeImage;
    NSArray *imageArray;
 }

 @property (nonatomic, retain) IBOutlet UIImageView* imageview;

 @end 
```

# facebook - Sending web app invitation to Facebook friends and having the invitation be displayed in the friends' mobile Facebook app

> ID：13752211
> 
> 赞同：3
> 
> 时间：2012-12-06T20:44:33.690
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-c#-sdk, facebook-invite

I have a site that allows users to create private content, kind of like a blog post, and then grant access to that content to specific facebook friends. I'm struggling with figuring out how to do invitations to the facebook friends so that the user doesn't have to copy & paste their page URL and manually send it to their friends.

This is the workflow I am trying to implement:

1.  John creates a new blog post on my site by filling out the form and selecting facebook friends who can view it. Susan is one of the selected friends.

2.  John submits the form. My site saves the blog post and generates a unique URL for the new post's page.

3.  John is then presented with Facebook's App Request dialog UI which is populated with the friends he previously selected. John confirms the dialog UI.

4.  Facebook's API takes over from here and sends the App Requests to each friend (including Susan).

5.  Susan launches Facebook from her iPhone (not Facebook.com, but rather the native iPhone facebook app).

6.  Susan sees that she has a new notification in the Facebook app that displays the App Request. She also sees the App Request in her news feed.

7.  Susan clicks the link in the App Request and is taken to the unique URL of the blog post that she was invited to.

Every time John creates a blog post and invites friends, this entire workflow process repeats. So, if John creates 2 blog posts and invites Susan to both of them, then Susan should receive two separate invites each having a unique URL.

I've implemented the App Request UI dialog with this code (from the Facebook JavaScript SDK):

```
function sendRequestToRecipients() {
   FB.ui({method: 'apprequests',
      message: 'Check out my new blog post',
      to: '499802820,499802852'  //list of selected Friend IDs go here
   }, requestCallback);
} 
```

Now, the pieces that I can't figure out how to get working are these:

1.  When I try to use Facebook's App Request UI dialog, the invitation is only visible if the friend (Susan in the above example) goes to Facebook.com. It's not visible when she opens the Facebook iPhone app.

2.  I can't figure out how to send a unique URL with each App Request. It seems like the App Request UI dialog is designed to just send the URL to my registered facebook web app. For example, if my registered web app's URL is www.example.com, then that's what is used in the App Request. Instead, I need to be able to specify that the URL should be www.example.com/someRandomUniqueID

3.  It's critical that Susan's friends don't see the App Request post. It shouldn't show up as a timeline post or anything like that. Only Susan should be able to see her own App Request.

Is what I am trying to do even possible?

# ruby-on-rails - Mongoid 聚合 $match 与 Date 对象不起作用？

> ID：13752215
> 
> 赞同：1
> 
> 时间：2012-12-06T20:44:42.413
> 
> 标签：ruby-on-rails, ruby, mongodb, aggregation-framework, moped

我在具有以下结构的集合中有用户文档：

```
{ "_id" : ObjectId( "4fb54ef46d93b33b21003951" ),
  "activities" : [ 
    { "id" : ObjectId( "4fd66f9001e7fe9f03000065" ),
      "type" : "checkin",
      "date_time_created" : Date( 1339453328000 )}, 
    { "date_time_created" : Date( 1337351732000 ),
      "date_time_updated" : Date( 1337351952635 ),
      "id" : ObjectId( "4fb65e346d93b3fe77000000" )}
  ]
} 
```

我可以根据日期轻松查询这些文档：

```
User.where( 
  :activities => { 
    '$elemMatch' => {
      :date_time_created => { '$gte' => start_date, '$lt' => end_date }
    }
  } 
).length 
```

根据日志：

MOPED: 127.0.0.1:27017 COMMAND 数据库=db 命令={:count=>"users", :query=>{"activities"=>{"$elemMatch"=>{"date_time_created"=>{"$gte" =>2012-05-10 00:00:00 UTC，“$lt”=>2012-07-12 00:00:00 UTC}}}}}（0.5260 毫秒）

我以这种方式得到了我需要的结果。

但是，当我尝试基于相同的条件使用新的聚合函数和 $match 时：

```
User.collection.aggregate( [
  { "$match" => {
    :activities => {
      '$elemMatch' => {
        :date_time_created => { '$gte' => start_date, '$lt' => end_date }
      }
    }
  } }
]).length 
```

根据日志：

MOPED: 127.0.0.1:27017 COMMAND 数据库=db command={:aggregate=>"users", :pipeline=>[{"$match"=>{:activities=>{"$elemMatch"=>{"date_time_created" =>{"$gte"=>2012 年 5 月 10 日，星期四，"$lt"=>2012 年 7 月 12 日，星期四}}}}}]} (0.6049ms)

“start_date”和“end_date”是 Ruby Date 对象，在两个查询中基本相同。但是，当我查看日志时，它们会变成不同的格式。当我尝试使用 start_date.strftime("%Y-%m-%d") 之类的东西强制格式时，它仍然不起作用。

聚合管道中还有其他功能，但我把它们拿出来，我仍然得到错误。

如何让聚合函数在日期上匹配？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T21:06:20.250

以下测试使用聚合框架来近似查询的逻辑等效项。

首先 $unwind 数组，$match，然后 $group 使用 $addToSet 以防有多个匹配的数组元素。请注意，这是一个有损过程，但如果您只需要计数或 ID，这是可以接受的。

希望这会有所帮助。

测试/单元/user_test.rb

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  def setup
    User.delete_all
  end

  test "user aggregate" do
    User.create(
        activities: [
          { id: Moped::BSON::ObjectId("4fd66f9001e7fe9f03000065"),
            type: "checkin",
            date_time_created: Time.at(1339453328000) },
          { date_time_created: Time.at(1337351732000),
            date_time_updated: Time.at(1337351952635),
            id: Moped::BSON::ObjectId("4fb65e346d93b3fe77000000") }
        ]
    )
    start_date = Time.at(1339453328000)
    end_date = start_date + 24*60*60
    assert_equal(1, User.where(
        :activities => {
            '$elemMatch' => {
                :date_time_created => { '$gte' => start_date, '$lt' => end_date }
            }
        }
    ).length)
    assert_equal(1, User.collection.aggregate( [
        { '$unwind' => '$activities' },
        { '$match' => { '$and' => [
            { 'activities.date_time_created' => { '$gte' => start_date } },
            { 'activities.date_time_created' => { '$lt' => end_date } }
        ] } },
        { '$group' => { '_id' => '$_id', 'activities' => { '$addToSet' =>  '$activities' } } }
    ] ).length)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T17:51:14.780

正确的聚合类型匹配，如下所示：

```
{:$match=>{ :created_at=>{:$gte=>2017-03-07 00:36:30 +0700}}} 
```

这意味着您应该使用方法：

```
match_na = {
  '$match': {created_at: { '$gte': (Time.now-30.days) } }
} 
```

请注意：不要使用 Time.zone.now （因为输出将是另一种格式）。我很确定大约 100%。我需要3个小时。

再次：像这样制作日期或时间的格式：

```
2017-03-07 00:36:30 +0700 
```

不是这个：

```
Mon, 03 Apr 2017 00:34:14 ICT +07:00 
```

或者简单的方法：使用方法 mongoize

```
(Date.today - 30.days).mongoize 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T16:20:57.567

我找到[了这篇短文](https://coderwall.com/p/dtvvha/mongoid-modelname-collection-aggregate-method-with-match-by-dates)，对我有帮助。这是基本的代码示例 - 相比之下似乎非常简单：

```
Stat.collection.aggregate({
  '$match' => {
    '$and' => [
      { 'day' => { '$gte' => from.to_date.mongoize } },
      { 'day' => { '$lte' => to.to_date.mongoize } }
    ]
  },
}) 
```

向作者致敬！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-10T13:22:55.913

我对 ruby​​ 的了解不多，但如果你能粘贴 mongo shell，我可以提供帮助。

有一些提示： 1\. 你正在使用 elemMatch 所以你应该使用 $unwind 2\. 之后你尝试使用 $match

# reporting-services - 根据显示在单个选项卡表上的组的值有条件地隐藏列

> ID：13752218
> 
> 赞同：5
> 
> 时间：2012-12-06T20:45:03.500
> 
> 标签：reporting-services, scope, ssrs-2008, visibility

这个问题是关于如何根据显示在单个选项卡上的组的值有条件地隐藏列。它是对[这个问题](https://stackoverflow.com/questions/13426115/ssrs-how-to-hide-column-only-on-some-grouped-sheets/)的后续，但它确实是独立的。我正在使用 SSRS 2008 R2。

我的数据集由存储过程提供支持并返回与事件相关的数据。

```
EventID | Event Owner | Event Type | Location
E001    | Bob         | Meeting    | Conf Rm A
E002    | Jane        | eTraining  | 
E003    | Bob         | Training   | Conf Rm B
E004    | Phil        | eTraining  | 
E005    | Jane        | Meeting    | Conf Rm B
E006    | Phil        | Meeting    | Conf Rm A
E007    | Jane        | eTraining  | 
```

在我的报告中，我使用的是表格，而不是矩阵。我有一个最里面的 Detail 行，其中包含有关事件的详细信息，包括 EventID 和 Location 作为列。我根据几个属性对数据进行分组。明细行和标题行有一个单独的行组，这些组按事件所有者和事件类型 (GrpbyOwnerandType) 分配。组的每个实例之间都有一个分页符，这导致结果显示在报表服务器上的不同页面上，下载到 Excel 时显示在不同的选项卡上（最终目标）。因此，Excel 中的输出是这样的：

```
Tab 1 has E001 (Bob, Meeting) 
Tab 2 has E002 & E007 (Jane, eTraining)
Tab 3 has E003 (Bob, Training)
Tab 4 has E004 (Phil, eTraining)
Tab 5 has E005 (Jane, Meeting)
Tab 6 has E006 (Phil, Meeting) 
```

在选项卡 2 和 4 上，我想隐藏 Location 列，因为我觉得显示一个完全空白的列很傻，在给定事件类型的情况下没有意义。我尝试通过将*列可见性*设置为

```
=IIF(CountDistinct(Fields!EventLocation.Value, "GrpbyOwnerandType")= 0, True, False) 
```

您可以看到我在此处仅将范围指定为组 (GrpbyOwnerandType)。如果我不指定范围，那么测试显然会失败，因为数据集中至少有一行 EventLocation 不为 NULL。但是，当我在 IIF 条件范围内指定组时，报告预览失败并出现以下错误：

> tablix 'X' 的隐藏表达式具有对聚合函数无效的范围参数。范围参数必须设置为字符串常量，该常量等于包含组的名称、包含数据区域的名称或数据集的名称。

*我在该列的隐藏*属性上使用了相同的表达式，在这种情况下，报告不会出错，但我在 Tab 2 和 Tab 4 上留下了一个难看的白色列，因为没有数据。

那么，有什么方法可以让我隐藏一些但不是所有工作表上的位置列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:16:33.097

如果您将表达式调整为：

```
= IIF(CountDistinct(Fields!EventLocation.Value)= 0, True, False) 
```

...然后范围将被自动评估，并应该给你你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:50:38.867

我在 MSDN 上问了这个问题，并被告知这是不可能的。我相信这是真的。

我最终创建了两个不同的表，一个包含我想要的列，另一个没有列，我过滤每个表中的数据以包含支持的记录。

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ef1ddac4-329f-43eb-b3fd-c226e7624ff6](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ef1ddac4-329f-43eb-b3fd-c226e7624ff6)

# javascript - 将 jwPlayer 变量传递给 jquery

> ID：13752219
> 
> 赞同：3
> 
> 时间：2012-12-06T20:45:04.503
> 
> 标签：javascript, jquery, ajax, jwplayer

使用 jwplayer（最新和许可版本）我似乎无法将 getDuration() 的值传递给 jQuery 变量。以下函数关闭时数据未定义。

```
jwplayer('jwvideo').onPlay(function() { 
    videoLength = jwplayer().getDuration();
}); 
```

我已经尝试了所有可能的变化：

```
var test = videoLength; 
```

我唯一需要的是将'videoLength'传递给一个dataString，例如：

```
var dataString = 'address='+ address + '&mediaNr=' + mediaNr; 
```

我在这个网站上浏览了所有关于这个的问题。

因此，我非常需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:50:24.453

`videoLength`首先，在触发jwPlayer`onPlay`事件之前，您不会得到任何东西。

然后您需要正确管理变量范围。考虑阅读类似这个答案[的内容 - JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

我会做类似的事情：

```
<script>
var videoLength

jwplayer('jwvideo').onPlay(function() { 
    videoLength = jwplayer().getDuration();
});

console.log( videoLength )

</script> 
```

应该给你持续时间（给定 jwplayer().getDuration() 是正确的方法）。

# sql - 透视查询在哪里可以使用两个单独的日期对透视结果进行日期过滤？

> ID：13752224
> 
> 赞同：0
> 
> 时间：2012-12-06T20:45:21.477
> 
> 标签：sql, pivot

以下是我的查询：

```
select employid,deprtmnt,jobtitle,[H-RT],[H-OT]
from 
(                  
 SELECT employid,deprtmnt,jobtitle,chekdate,UNTSTOPY,Category                  
 FROM 
 (                  
   SELECT employid,deprtmnt,jobtitle,chekdate,UNTSTOPY,payrolcd as     category              
   FROM [upr30300]    
   where DEPRTMNT like '600%'          
 ) t                  
 where chekdate = '2012-03-09' and Category in ('H-RT','H-OT')                  
) d             
PIVOT
(
  SUM(UNTSTOPY) 
  FOR Category IN ([H-RT],[H-OT])
)p 
```

结果显示包含两个透视（H-RT 和 H-OT）的列。我可以按 chekdate 过滤并获得过滤器的结果，但我试图弄清楚如何获得两个显示 H-RT、H-OT 的 EXTRA 列，这将显示过滤后的 chekdate 加上 14 天。

我试图使用 dateadd 函数，但无法弄清楚如何获得 1 个结果集，其中包括....H-RT(period1),H-OT(period1),H-RT(period2),H-OT( period2)...有没有人知道如何完成这项工作的方向或想法？

先感谢您！

这是示例数据：

```
EMPLOYID    DEPRTMNT    JOBTITLE    H-RT    H-OT
ABC123          600-20  CA      77.78000    7.47000
ABC124          600-80  CSA     55.65000    0.58000
ABC125          600-70  RAA     77.68000    0.03000 
```

这是所需的数据：

```
EMPLOYID    DEPRTMNT    JOBTITLE    H-RT1   H-OT1      H-RT2      H-OT2
ABC123          600-20  CA      77.78000    7.47000    80.00      12.00
ABC124          600-80  CSA     55.65000    0.58000    74.00      16.00
ABC125          600-70  RAA     77.68000    0.03000    48.00       2.00 
```

所需的数据列 H-RT1,H-OT1 是 chekdate = '2012-03-09' 和列 H-RT2,H-OT2 将是 chekdate = '2012-03-09' + 14 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:19:30.567

您应该能够使用类似的东西：

```
select employid,
  deprtmnt,
  jobtitle,
  [H-RT_1],
  [H-OT_1], 
  [H-RT_2],
  [H-OT_2]
from 
(                  
 SELECT employid,
    deprtmnt,
    jobtitle,
    chekdate,
    UNTSTOPY,
    Category,
    case when chekdate = '2012-03-09' then Category+'_1' 
      when chekdate = dateadd(d, 14, '2012-03-09') then Category+'_2' end period
 FROM 
 (                  
   SELECT employid,
     deprtmnt,
     jobtitle,
     chekdate,
     UNTSTOPY,
     payrolcd as category              
   FROM [upr30300]    
   where DEPRTMNT like '600%'
 ) t                  
 where (chekdate = '2012-03-09' or chekdate = dateadd(d, 14, '2012-03-09'))
    and Category in ('H-RT','H-OT')                  
) d             
PIVOT
(
  SUM(UNTSTOPY) 
  FOR Category IN ([H-RT_1],[H-OT_1], [H-RT_2],[H-OT_2])
)p 
```

# jquery - 如何将 jQuery Datepicker 添加到 asp.net 页面上的图像

> ID：13752231
> 
> 赞同：0
> 
> 时间：2012-12-06T20:45:41.587
> 
> 标签：jquery, asp.net, jquery-ui

我刚刚成功地给我一个分配给输入的基本日期选择器：类型“文本”控件。下一个目标是在单击图像时将日期选择器分配给 showOn。图像可以在输入框的左侧或右侧。我可以在 aJax 控件中做到这一点，但我真的很想学习 jQuery，所以请指路！我还有 2 个其他输入框，我将重复相同的方法，所以启动并运行它会很甜蜜！到目前为止，这是我将日期选择器分配给控件的 jQuery

```
$(function () {
   $("input[id$='txtPreviousCutOff']").datepicker();
}); 
```

注意：我还想在该日期附加一个时间，我该怎么做？我想将 12:00:00 AM 附加到所选日期..我试过这个但它失败了:(

```
$(function () {
   var input = $("input[id$='txtPreviousCutOff']");
   input.val(input.val() + " " + "12:00:00 AM");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:50:18.677

Datepicker 插件具有第一部分的参数，来自文档：

```
$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true
    });
}); 
```

至于您的第二个问题，您可能会在 onClose() 事件上附加更多成功，实例和值被传递，因此您应该能够获取日期并将其附加到时间，然后将其附加到输入。还要确保您的 ASP.net 输入 ID 不是动态创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:47:35.837

您可以执行以下操作：

```
<input id='invdate' name='invdate' type='text'/>
<span style='padding:5px'><img id='dpimage' alt="img" src='calendar2.gif'></span>

$(function() {
  $("#invdate").datepicker();
  $("#dpimage").click(function () {
    $("#invdate").datepicker("show")
  });
}); 
```

[工作演示](http://jsfiddle.net/a3Jfq/)

# android - ListView内嵌套RelativeLayout中的垂直居中

> ID：13752232
> 
> 赞同：4
> 
> 时间：2012-12-06T20:45:46.013
> 
> 标签：android, listview, center, android-relativelayout, vertical-alignment

我尝试将两个 RelativeLayouts 嵌套为 ListView 的行，并将嵌套布局的内容垂直居中。无论我尝试了什么，我都无法让它工作：

![截屏：](../Images/c7d1ae3257ff2a3cd75cd9e9693015ac.png)

这是我的 XML 布局，我知道它有点乱（也尝试过 LinearLayouts 没有成功）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent" 
    android:descendantFocusability="blocksDescendants">
    <CheckBox
        android:id="@+id/check"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_centerVertical="true"
        android:layout_marginTop="2dp"
        />
    <TextView
        android:id="@+id/label"
        android:layout_toRightOf="@id/check"
        android:layout_toLeftOf="@+id/date_time_container"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_centerVertical="true"
        android:ellipsize="end"
        android:paddingLeft="6dp"
        android:paddingRight="6dp"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:bufferType="spannable">
    </TextView>
    <RelativeLayout
        android:id="@+id/date_time_container"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_centerVertical="true"
        android:background="@color/grey"
        >
        <TextView
            android:id="@+id/date_time"
            android:layout_toLeftOf="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:background="@color/green"
            android:layout_marginTop="2dp"
            android:bufferType="spannable"
            android:text="">
        </TextView>
        <ImageView
            android:id="@+id/icon"
            android:layout_toRightOf="@id/date_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="4dp"
            android:layout_marginRight="0dp"
            android:layout_marginTop="2dp"
            android:layout_centerVertical="true"
            android:src="@drawable/urgent" 
            android:contentDescription="@string/icon"/>

    </RelativeLayout>

</RelativeLayout> 
```

正如其他线程中所建议的那样，我已经确保在适配器中正确地膨胀行：

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.task_row, parent, false);         
} 
```

有任何想法吗？我敢肯定它一定是小事。谢谢！

**编辑：** 在 Eclipse 中，布局显示正确，似乎将布局嵌套在 ListView 行中会以某种方式弄乱布局： ![在此处输入图像描述](../Images/0c129bf841eb573b31fc0d69ef2efb9c.png)

**编辑 2：** 我以为我可以通过使用 EditText 得到某个地方。但是除非有办法让它看起来和 TextView 一样，否则我会回到绘图板:(

**编辑 3：** 我终于通过在 TextView 中使用 LinearLayout 和 android:gravity="center_vertical" 来解决它：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:descendantFocusability="blocksDescendants">
    <CheckBox
        android:id="@+id/check"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginTop="2dp"
        />
    <TextView
        android:id="@+id/label"
        android:layout_toRightOf="@id/check"
        android:layout_toLeftOf="@+id/date_time_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:ellipsize="end"
        android:paddingLeft="6dp"
        android:paddingRight="6dp"
        android:singleLine="true"
        android:text="Some text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:bufferType="spannable">
    </TextView>
    <LinearLayout
        android:id="@+id/date_time_container"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"

        android:background="@color/grey"
        >
         <TextView
             android:id="@+id/date_time"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:bufferType="spannable"
            android:singleLine="true"
            android:gravity="center_vertical"
            android:background="@color/green"
            android:text="20:00"
            android:textAppearance="?android:attr/textAppearanceSmall"
             />
        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/urgent" 
            android:contentDescription="@string/icon"/>

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:50:13.347

尝试将`layout_height`根内的视图设置`RelativeLayout`为`wrap_content`.

# c++ - 在 mac os x 的命令行中将 clang 与 libc++ 和 c++11 一起使用

> ID：13752233
> 
> 赞同：9
> 
> 时间：2012-12-06T20:45:49.957
> 
> 标签：c++, macos, c++11, clang, libc++

如果启用 c++11 和 libc++，我什至无法使用 clang 编译一个简单的 hello world。例如下面的代码

```
#include <iostream>

int main()
{
    std::cout << "Hello, World!" << std::endl;
    return 0;
} 
```

当我运行时从编译中产生以下输出`clang++ -std=c++11 -stdlib=libc++ main.cpp`

```
In file included from main.cpp:1:
In file included from /usr/bin/../lib/c++/v1/iostream:38:
In file included from /usr/bin/../lib/c++/v1/ios:216:
In file included from /usr/bin/../lib/c++/v1/__locale:15:
In file included from /usr/bin/../lib/c++/v1/string:434:
In file included from /usr/bin/../lib/c++/v1/algorithm:591:
/usr/bin/../lib/c++/v1/type_traits:165:12: error: unknown type name
      '_LIBCPP_CONSTEXPR'
    static _LIBCPP_CONSTEXPR const _Tp      value = __v;
           ^
/usr/bin/../lib/c++/v1/type_traits:165:30: error: expected member name or ';'
      after declaration specifiers
    static _LIBCPP_CONSTEXPR const _Tp      value = __v;
    ~~~~~~~~~~~~~~~~~~~~~~~~ ^
/usr/bin/../lib/c++/v1/type_traits:169:9: error: unknown type name
      '_LIBCPP_CONSTEXPR'
        _LIBCPP_CONSTEXPR operator value_type() const {return value;}
        ^
/usr/bin/../lib/c++/v1/type_traits:169:63: error: use of undeclared identifier
      'value'
        _LIBCPP_CONSTEXPR operator value_type() const {return value;}
                                                              ^
/usr/bin/../lib/c++/v1/type_traits:173:1: error: unknown type name
      '_LIBCPP_CONSTEXPR'
_LIBCPP_CONSTEXPR const _Tp integral_constant<_Tp, __v>::value;
^
/usr/bin/../lib/c++/v1/type_traits:173:19: error: expected unqualified-id
_LIBCPP_CONSTEXPR const _Tp integral_constant<_Tp, __v>::value;
                  ^
/usr/bin/../lib/c++/v1/type_traits:730:2: error: is_base_of not implemented.
#error is_base_of not implemented.
 ^
/usr/bin/../lib/c++/v1/type_traits:400:56: error: no member named 'value' in
      'std::__1::is_integral<void>'
    : public integral_constant<bool, is_integral<_Tp>::value      ||
                                     ~~~~~~~~~~~~~~~~~~^
/usr/bin/../lib/c++/v1/type_traits:941:19: note: in instantiation of template
      class 'std::__1::is_arithmetic<void>' requested here
                 (is_arithmetic<_A2>::value || is_void<_A2>::value) &&
                  ^
/usr/bin/../lib/c++/v1/type_traits:949:22: note: in instantiation of default
      argument for '__promote<type-parameter-0-0, void, void>' required here
    typedef typename __promote<_A1>::type __type1;
                     ^~~~~~~~~~~~~~
/usr/bin/../lib/c++/v1/type_traits:949:38: error: expected a qualified name
      after 'typename'
    typedef typename __promote<_A1>::type __type1;
                                     ^
/usr/bin/../lib/c++/v1/type_traits:949:42: error: expected ';' at end of
      declaration list
    typedef typename __promote<_A1>::type __type1;
                                         ^
/usr/bin/../lib/c++/v1/type_traits:941:39: error: no member named 'value' in
      'std::__1::is_arithmetic<void>'
                 (is_arithmetic<_A2>::value || is_void<_A2>::value) &&
                  ~~~~~~~~~~~~~~~~~~~~^
/usr/bin/../lib/c++/v1/type_traits:950:22: note: in instantiation of default
      argument for '__promote<type-parameter-0-1, void, void>' required here
    typedef typename __promote<_A2>::type __type2;
                     ^~~~~~~~~~~~~~
/usr/bin/../lib/c++/v1/type_traits:950:38: error: expected a qualified name
      after 'typename'
    typedef typename __promote<_A2>::type __type2;
                                     ^
/usr/bin/../lib/c++/v1/type_traits:950:42: error: expected ';' at end of
      declaration list
    typedef typename __promote<_A2>::type __type2;
                                         ^
/usr/bin/../lib/c++/v1/type_traits:941:39: error: no member named 'value' in
      'std::__1::is_arithmetic<void>'
                 (is_arithmetic<_A2>::value || is_void<_A2>::value) &&
                  ~~~~~~~~~~~~~~~~~~~~^
/usr/bin/../lib/c++/v1/type_traits:951:38: error: expected a qualified name
      after 'typename'
    typedef typename __promote<_A3>::type __type3;
                                     ^
/usr/bin/../lib/c++/v1/type_traits:951:42: error: expected ';' at end of
      declaration list
    typedef typename __promote<_A3>::type __type3;
                                         ^
/usr/bin/../lib/c++/v1/type_traits:953:22: error: use of undeclared identifier
      '__type1'
    typedef decltype(__type1() + __type2() + __type3()) type;
                     ^
/usr/bin/../lib/c++/v1/type_traits:953:34: error: use of undeclared identifier
      '__type2'
    typedef decltype(__type1() + __type2() + __type3()) type;
                                 ^
/usr/bin/../lib/c++/v1/type_traits:953:46: error: use of undeclared identifier
      '__type3'
    typedef decltype(__type1() + __type2() + __type3()) type;
                                             ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated. 
```

如果我使用 xcode 并设置 libc++ 和 c++11 支持的选项，代码将编译得很好。

感谢您的任何回复

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T21:01:38.250

您的命令行工具已过时。Xcode 4.4 附带 Clang 4.0。您需要 Xcode 4.5 附带的 Clang 4.1。安装 Xcode 后，您可以转到 Preferences 窗口，选择 Downloads 窗格和 Components 选项卡，然后有一个“Command Line Tools”条目。右侧会有一个按钮，上面写着“安装”。

![在此处输入图像描述](../Images/b491c3306579c15e092398879df5c0f9.png)

# internet-explorer - 在资源管理器窗口中创建具有随机时间和短语输入的循环

> ID：13752234
> 
> 赞同：1
> 
> 时间：2012-12-06T20:45:51.883
> 
> 标签：internet-explorer, loops, random

我不确定我在下面的脚本中做错了什么；不起作用。

我的目标是让我的脚本从找到一个我已经打开到我想要输入文本的页面的 IE 窗口开始。然后它将激活并最大化窗口，在指定位置输入文本，然后单击页面上的“发送”按钮。然后它会等待一段随机的时间并重复相同的文本输入和发送。

这是我第一次尝试脚本。我做错了什么？

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
#Warn  ; Recommended for catching common errors. 
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

Pause::Pause  
#q::ExitApp 

SetTitleMatchMode 2

IfWinExist, ahk_class IEFrame 
{
WinActivate  
WinMaximize 
}

random, sleeptime, 180000, 300000 
loop 
{ 

Click 101, 552 
Send text phrase goes here 
Click 86,638

sleep, %sleeptime% 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-31T00:59:50.003

我相信这个脚本几乎是完全正确的。
您只需要将行： 移动
`Pause::Pause`
`#q::ExitApp`
到底部。

第一个热键标签上方的任何行（在本例`Pause::Pause`中为 ，）将在脚本打开时运行，这些行称为自动执行部分。包括第一个热键标签在内的任何行都需要触发热键才能运行它们。

因此，`SetTitleMatchMode 2`需要向上移动代码（与向下移动`Pause`and`#q`行相同）以将其放入自动执行部分，或者需要在行上方添加新的热键标签`SetTitleMatchMode 2`以触发该代码块。

# linux - 如何从守护进程内部执行 rgvim？

> ID：13752237
> 
> 赞同：0
> 
> 时间：2012-12-06T20:46:03.007
> 
> 标签：linux, vim, file-descriptor

我有一些红宝石代码，它有以下内容

```
system("rgvim " + MY_FILE) 
```

这在终端上运行良好，但如果我使用 systemd 将此代码作为机架应用程序运行，系统调用将无法工作。我收到消息：

```
Dec 06 14:40:54 mypc config.ru[10211]: Vim: Warning: Output is not to a terminal
Dec 06 14:40:54 mypc config.ru[10211]: Vim: Warning: Input is not from a terminal 
```

我认为这是因为守护进程无权访问文件描述符。

**编辑** 一些评论者要求我的用例更具体的细节。这里是：我正在尝试使用`systemd`. 机架应用程序在代码中有上述系统调用，当我使用从终端运行它时工作正常

```
rack config.ru 
```

但是，当我使用 systemd 启动它时，如上所述，机架应用程序无法访问正确的文件描述符。在我看来，应该以某种方式映射当前的 X 显示和/或文件描述符`systemd`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:05:01.580

Vim 是一个交互式文本编辑器，它不能在没有附加终端的情况下使用；这就是警告的来源。

你可以尝试以*批处理模式*运行 Vim ；cp。`:help -s-ex`， 像这样：

```
vim -T dumb -n -es -S "commands.ex" "filespec" 
```

以下是使用的参数的摘要：

```
 -T dumb            Avoids errors in case the terminal detection goes wrong.
 -n                 No swapfile.
 -es                Ex mode + silent batch mode  -s-ex
                    Attention: Must be given in that order!
 -S  ...            Source script.
 filespec           The file to operate on. 
```

# html - 节点.js。发送包含图像的 html

> ID：13752239
> 
> 赞同：3
> 
> 时间：2012-12-06T20:46:05.153
> 
> 标签：html, node.js

我已经使用节点 js 构建了一个简单的服务器。我希望发送一个包含内部图像的 html。

好的，所以我知道如何发回一个 html 文件。而且我知道如何发回图像。

当我发送带有其中的 html 响应时`<img src = 'green2.jpg'>`，页面加载时图像损坏。

有任何想法吗？

相关代码：

```
var net = require ('net');
var url = require('url');
var fs = require('fs');

var server = net.createServer(function (socket) {
    socket.on('end', function() {
        console.log('server disconnected');
    });

    socket.on('data', function(data) {
        get();
    });

    var get = function (parse) {
        fs.readFile('example.html',  function(err, data) {
            if (err) throw err;
            socket.write('HTTP/1.0 200 OK\r\nDate: Fri, 31 Dec 1999 23:59:59 GMT\r\nContent-Type: text/html\r\n\r\n');
            socket.write(data);
            socket.end();
        });
    }
});

server.listen("8888"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T21:15:44.403

您当前的代码是这样说的：

*每当我收到任何请求时，请发送 example.html 的内容。*

如果有人要求 /whatever.jpg，他们将获得 example.html 的内容，这当然会向您显示损坏的图像。

如果您想使用 node.js 提供静态文件，您可能需要使用[Express.js](http://expressjs.com/guide.html)`express.static`之类的东西，它使用此处引用的中间件 自动处理它：http: [//expressjs.com/api.html#app.use](http://expressjs.com/api.html#app.use)

显然“使用快递”不是您问题的答案，但使用纯 node.js 对您的问题的答案是以下之一：

1.  安装一个像 node-static 这样的模块来处理像图像这样的静态文件。[教程在这里](http://www.sitepoint.com/serving-static-files-with-node-js/)
2.  使用 switch 语句`req.url`来确定服务器正在查找的文件，并使用类似于 your 的文件将其发送下来`fs.readFile('example.html')`，但也可以读取图像文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T21:12:30.117

问题是节点不知道您的图像，并且无法像普通 Web 服务器那样提供开箱即用的静态文件。使用[express](http://expressjs.com/)之类的框架使这变得容易得多。

# java - 如何强制应用卸载以更新？

> ID：13752240
> 
> 赞同：4
> 
> 时间：2012-12-06T20:46:15.587
> 
> 标签：java, android, certificate, google-play, code-signing

我犯了一个错误，显然只能通过卸载然后再次安装我的应用程序来解决。

我向用户发送了一条消息，但似乎没有人卸载它。

AFAIK，如果我更改证书文件，Play商店不会让我上传应用程序，显然我不想上传新应用程序。

有没有办法强制卸载才能更新？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:10:41.890

没有远程强制卸载的killswitch（那将是一场安全噩梦）。你*可以*做的是在Google Play上发布一个固定版本，等待用户升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T12:19:47.253

我不知道这是否可以帮助你，但我有同样的问题。我的解决方案是每次用户打开它时检查应用程序版本并将其与存储在 apache 服务器上的版本代码（在 checkversion.php 文件中）进行比较。如果版本不匹配，我会显示一个不可取消的对话框，要求用户去市场并下载更新。

这是一个示例（请记住，我使用[Volley 库](https://developer.android.com/training/volley/index.html)来处理连接）：

```
 public class UpdateManager {

        private Activity ac;
        private HashMap<String,String> params;

        public UpdateManager(Activity ac) {
            this.ac = ac;
        }

        public void checkForUpdates() {
            Log.d("UpdateManager","checkForUpdates() - Started...");

            params = new HashMap<String,String>();
            params.put("request","checkforupdates");
            try {
                params.put("versioncode", String.valueOf(ac.getPackageManager().getPackageInfo(ac.getPackageName(), 0).versionCode));
            } catch (NameNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (Helper.isInternetAvailable(ac)) { //this is a class i made to check internet connection availability
                checkAppVersion();
            } else { Log.d("UpdateManager","CheckForUpdates(): Impossible to update version due to lack of connection"); }
        }

        private void checkAppVersion() {
            Log.d("UpdateManager","checkAppVersion() - Request started...");

            JsonObjectRequest req = new JsonObjectRequest("http://yourserver/checkappversion.php", new JSONObject(params),
                    new Response.Listener<JSONObject>() {
                @Override
                public void onResponse(JSONObject response) {
                    if (response != null && response.has("result")) {
                        try {
                            Log.d("UpdateManager","checkAppVersion() - Request finished - Response: "+response.getString("result"));
                            if (response.getString("result").matches("updaterequested")) { //Update requested. Show the relative dialog
                                Log.d("UpdateManager","Update requested");

                                askUserForUpdate();
                            }
                            else if (response.getString("result").matches("current")) { //Same version. Do nothing 
                                Log.d("UpdateManager","Version is up to date");
                            }
                            else if (response.getString("result").matches("error")) { //You can return an error message if error occurred on server
                                Log.d("UpdateManager","checkappversion Error - "+response.getString("error"));
                            }

                            VolleyLog.v("Response:%n %s", response.toString(4));
                        } catch (JSONException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }, new Response.ErrorListener() {
                @Override
                public void onErrorResponse(VolleyError error) {
                    Log.e("UpdateManager","Volley Error - "+error.getMessage());
                }
            });
            req.setRetryPolicy(new DefaultRetryPolicy(60000,0,DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));
            ConnectionController.getInstance().addToRequestQueue(req);
        }

        public void askUserForUpdate() {
            final Dialog diag = new Dialog(ac);
            diag.requestWindowFeature(Window.FEATURE_NO_TITLE);
            diag.setContentView(R.layout.updatemanager_requestupdate_dialog);
            diag.setCancelable(false);
            diag.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
            TextView t = (TextView)diag.findViewById(R.id.requestupdate_dialog_main_text);
            ImageView im_ok = (ImageView)diag.findViewById(R.id.requestupdate_dialog_ok);
            ImageView im_canc = (ImageView)diag.findViewById(R.id.requestupdate_dialog_canc);
            t.setText(ac.getResources().getString(R.string.update_manager_askuserforupdate));
            im_canc.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    diag.dismiss();
                    ac.finish();
                }
            });
            im_ok.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse("market://details?id="+ac.getPackageName()));
                    diag.dismiss();
                    ac.startActivity(intent);
                    ac.finish();
                }
            });
            diag.show();
        }
    } 
```

然后，当您的主要活动（或登录活动）像这样开始时，您可以使用它：

```
 UpdateManager updateManager = new UpdateManager(MainActivity.this); //i assume MainActicity as the calling activity
     updateManager.checkForUpdates(); 
```

显然，这必须在应用程序代码中实现，所以第一次，您必须仅依靠用户手动升级它。但是，如果您将来遇到同样的问题，这会有所帮助。

这是我个人代码的摘录，因此您必须根据需要重新排列它。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T00:20:44.277

用户应该能够转到`Settings > Applications > Manage Applications`并选择要删除的应用程序。我从未见过无法以这种方式删除应用程序的情况，除非是需要根设备才能删除的内置应用程序。

# python - python：如何使用列表理解实现嵌套 for 循环？

> ID：13752241
> 
> 赞同：-2
> 
> 时间：2012-12-06T20:46:20.000
> 
> 标签：python, list-comprehension

我的代码是

```
montly_ratio = [0.046644865594960915, 0.060708276768318435, 0.07706787106693493, 0.09332535512669753, 0.10693770921153412, 0.11542007554770539, 0.11681104031351618, 0.11013791562902592, 0.09588202154576116, 0.07644396803642538, 0.056608936984611016, 0.044011964174509026]
len = 12

production_by_yr = [12129.0, 24197.0, 36205.0, 48152.0, 60038.0, 71863.0, 83628.0, 95331.0, 106974.0, 118556.0, 130077.0, 141538.0, 152938.0, 164277.0, 175555.0, 186772.0, 197929.0, 209024.0]
len = 18 
```

我想要做

```
for yr in production_by_yr:
    for month in montly_ratio:
        print yr * month, 
```

这会给我**216个**值

我通过列表理解做了同样的事情，如下所示：

```
[yr * month for yr in production_by_yr for month in montly_ratio] 
```

这给了我**216 个**值，例如

```
565.7555748012809, 736.3306889229343, 934.7562081708537, 1131.9432323317144, 1297.0474750266974, 1399.9300963181188, 1416.8011079626376, 1335.8627786644554, 1162.953039328537, 927.1888883138034, 686.6097966863471, 533.82111347262, 1128.6658128012693, 1468.9581729630013, 1864.8112762066244, 2258.1936180007, 2587.571749791491, 2792.8195680278272, 2826.476742466151, 2665.00714447554, 2320.0572753427828, 1849.7146945773848, 1369.7664482166329, 1064.957497130595, 1688.77735886556, 2197.943160396969, 2790.242271978379, 3378.844482362084, 3871.6797620035927, 4178.783835204674, 4229.1437145508535, 3987.543235348883, 3471.4085900642826, 2767.6538627587806, 2049.526563527842, 1593.4531629380992, 2246.043568128558, 2923.2249429480694, 3710.9721276150503, 4493.8025000607395, 5149.264573953791, 5557.70747777311, 5624.685213176431, 5303.360913368856, 4616.911101471491, 3680.9299488899546, 2725.8335336829896, 2119.2640989309584, 2800.464440590263, 3644.803520616302, 4627.000843116639, 5603.067671096666, 6420.326185642085, 6929.590495733136, 7013.101238342884, 6612.460178535458, 5756.564809564408, 4589.542952970907, 3398.687358682076, 2642.390305109173, 3352.0399762506763, 4362.678893401668, 5538.328418483145, 6706.6399954698645, 7684.8645970684765, 8294.432889084752, 8394.391790050213, 7914.841030848689, 6890.369714343034, 5493.492875001637, 4068.0880385251016, 3162.831781472742, 3900.8168199753914, 5076.911769580934, 6445.031921585634, 7804.612798535461, 8942.986745942175, 9652.350077903506, 9768.67367933873, 9210.61360822418, 8018.421697828914, 6392.856158950181, 4734.09218214905, 3680.6325399858406, 4446.701682033219, 5787.380732600564, 7346.9572166819735, 8896.799429583201, 10194.47875684476, 11003.111222038302, 11135.71328412781, 10499.55763483067, 9140.528995978957, 7287.4799168804675, 5396.586571679953, 4195.70455672012, 4989.787852155348, 6494.207199014097, 8244.258439514297, 9983.386539323341, 11439.55450519465, 12346.947161640237, 12495.74422649808, 11781.893386499418, 10256.883372836253, 8177.517036728568, 6055.6844249917785, 4708.135855603929, 5530.028685476186, 7197.33046054476, 9136.858522211536, 11064.280802400752, 12678.107053282638, 13683.74247663376, 13848.649695409224, 13057.510725314796, 11367.38894637926, 9062.891074526447, 6711.329133147544, 5217.882424673092, 6067.424181995731, 7896.750517192557, 10024.757464773695, 12139.482218815434, 13910.136401108723, 15013.497167018873, 15194.429690861243, 14326.409651276805, 12472.045716607974, 9943.602030274104, 7363.520696147247, 5724.94426392761, 6602.020986579578, 8592.528077234254, 10908.032335071835, 13209.084113922514, 15135.749486382116, 16336.326652871126, 16533.201023894453, 15588.700302301071, 13570.949565543942, 10819.726347939575, 8012.315722927874, 6229.365385331658, 7133.7724543621325, 9284.602432393085, 11786.606065234893, 14272.993162366865, 16354.839371393604, 17652.11551411497, 17864.846883468537, 16844.272540471964, 14664.00461116562, 11691.187583554824, 8657.65760455244, 6731.101776921061, 7662.678585343394, 9972.973582669048, 12660.478655262868, 15331.20936414849, 17567.40605614319, 18960.8637507504, 19189.367269583498, 18093.126365789492, 15751.210853473005, 12557.985737119852, 9299.546341020943, 7230.153438695819, 8188.739379523363, 10657.641528062142, 13529.65010515576, 16383.732719267384, 18773.44954063087, 20262.57136277742, 20506.762182239334, 19335.261778253644, 16832.5682924661, 13420.120808634658, 9937.981932333387, 7726.520370655932, 8711.95483690204, 11338.60626857237, 14394.12041491357, 17430.56322772355, 19972.96982485665, 21557.238350196032, 21817.031621436043, 20570.67877786443, 17908.076928144903, 14277.59279809924, 10572.964378489769, 8220.2025728014, 9232.37160234502, 12015.9285124765, 15253.966652407364, 18471.794214872116, 21166.073846529736, 22844.98013308178, 23120.292398213944, 21799.48750253747, 18977.83264253096, 15130.478149481638, 11204.550288427074, 8711.244057096397, 9749.89638612111, 12689.486843220993, 16109.034681895006, 19507.239030002824, 22352.54773023171, 24125.565871283572, 24416.310890492405, 23021.467676441513, 20041.64367158118, 15978.623974845777, 11832.626444271333, 9199.556799612574] 
```

所以我想**验证最后 12 个**数字

`production_yr = 209024.0 and ratio being same`我做到了

> > > [20924.0 *为在R R montly_ratio] [975.9971677089621，1270.259983100295，1612.5681342045464，1952.739730671019，2237.56462754214，2415.0496607601876，2444.1542075200123，2304.525746621738，2006.2354188235065，1599.5135871941645，1184.485397466001，920.9063383874269]

然后我意识到我使用嵌套 for 循环获得的数字非常大，可能不正确

```
9749.89638612111, 12689.486843220993, 16109.034681895006, 19507.239030002824, 22352.54773023171, 24125.565871283572, 24416.310890492405, 23021.467676441513, 20041.64367158118, 15978.623974845777, 11832.626444271333, 9199.556799612574 
```

我在这里没有做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:53:26.200

错误，但您的验证代码是错误的：

`209024.0`是正确的值，并且您使用了：

```
[20924.0 * r for r in montly_ratio]   
 ^^^^^ 
```

# jquery - jquery插件版本升级

> ID：13752243
> 
> 赞同：0
> 
> 时间：2012-12-06T20:46:31.877
> 
> 标签：jquery, jquery-ui

我们从这里使用[jquery 输入掩码](http://digitalbush.com/projects/masked-input-plugin)和一个在必要时设置和取消设置掩码的代码片段：

```
$('input.maskedInput').focus(function () {

        $(this).mask("999-999-9999");
    }).blur(function () {

        var numbers = $(this).val().replace(/-/g, '').replace(/_/g, '');
        $(this).val(numbers.toString()).unmask();
    }); 
```

这适用于 jquery 1.3.2，但是当升级到 1.8.2 时，当用户离开该字段且没有错误时，它会停止取消屏蔽。需要调整什么才能再次开始取消屏蔽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:22:06.120

问题是您删除`unmask`了另一个模糊处理程序中的插件附加的模糊处理程序（通过调用）。为了避免不可预知的行为，jQuery 在运行任何处理程序之前在本地保存对所有处理程序的引用。

1.  发生模糊。输入有 2 个模糊处理程序（你的和来自插件的）；
2.  jQuery 复制一组处理程序。
3.  您的处理程序似乎首先运行。它调用 unmask 删除第二个处理程序。但是调度循环内部仍然有一个引用。
4.  jQuery 运行第二个处理程序来恢复掩码。

我不知道为什么这段代码适用于 jq1.3.2。

为避免这种情况，您可以停止立即传播模糊事件。[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

```
.blur(function (ev) {
        var numbers = $(this).val().replace(/-/g, '').replace(/_/g, '');
        $(this).unmask();
        ev.stopImmediatePropagation();
        $(this).val(numbers);
    }) 
```

[http://jsfiddle.net/tarabyte/XgYSz/](http://jsfiddle.net/tarabyte/XgYSz/)

# ubuntu - Mono .net HTTP 500。错误

> ID：13752247
> 
> 赞同：3
> 
> 时间：2012-12-06T20:46:51.187
> 
> 标签：ubuntu, mono, apache2

我一直在尝试让 Mod Mono 在带有 apache2.2.22 的 Ubuntu 12.04.1 LTS 上运行

我已经尝试了两个星期，我只能得到一个错误 500 页。有人能帮我一下吗？

## 这是我的堆栈跟踪

运行 vbnc 时出错：找不到指定的文件

说明：HTTP 500。处理请求时出错。

堆栈跟踪：

System.SystemException: 运行 vbnc 时出错: 在 Microsoft.VisualBasic.VBCodeCompiler.CompileFromFileBatch (System.CodeDom.Compiler.CompilerParameters options, System.String[] fileNames) [0x00000] in :0 at Microsoft.VisualBasic.VBCodeCompiler 找不到指定的文件.CompileAssemblyFromFileBatch (System.CodeDom.Compiler.CompilerParameters options, System.String[] fileNames) [0x00000] in :0 at System.CodeDom.Compiler.CodeDomProvider.CompileAssemblyFromFile (System.CodeDom.Compiler.CompilerParameters options, System.String[]文件名）[0x00000] 在 System.Web.Compilation.AssemblyBuilder.BuildAssembly 的 0 中（System.Web.VirtualPath virtualPath，System.CodeDom.Compiler.CompilerParameters 选项）[0x00000] 在 System.Web.Compilation.AssemblyBuilder 的 0 中。 BuildAssembly (System.Web.VirtualPath virtualPath) [0x00000] in :0 at System.Web.Compilation.BuildManager.GenerateAssembly（System.Web.Compilation.AssemblyBuilder abuilder，System.Web.Compilation.BuildProviderGroup 组，System.Web.VirtualPath vp，布尔调试）[0x00000] 在 System.Web.Compilation.BuildManager 的 0 .BuildInner (System.Web.VirtualPath vp, Boolean debug) [0x00000] 在 System.Web.Compilation.BuildManager.Build (System.Web.VirtualPath vp) [0x00000] 在 System.Web.Compilation 的 0 中。 BuildManager.GetCompiledType (System.Web.VirtualPath virtualPath) [0x00000] in :0 在 System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath (System.Web.VirtualPath virtualPath, System.Type requiredBaseType) [0x00000] in :0 在 System.Web .UI.PageParser.GetCompiledPageInstance (System.String virtualPath, System.String inputFile, System.Web.HttpContext context) [0x00000] in :0 在 System.Web.UI。PageHandlerFactory.GetHandler (System.Web.HttpContext context, System.String requestType, System.String url, System.String path) [0x00000] in :0 at System.Web.HttpApplication.GetHandler (System.Web.HttpContext context, System. String url, Boolean ignoreContextHandler) [0x00000] in :0 at System.Web.HttpApplication.GetHandler (System.Web.HttpContext context, System.String url) [0x00000] in :0 at System.Web.HttpApplication+c__Iterator6.MoveNext ( ) [0x00000] 在 :00 在 System.Web.HttpApplication+c__Iterator6.MoveNext () [0x00000] in :00 在 System.Web.HttpApplication+c__Iterator6.MoveNext () [0x00000] in :0

版本信息：Mono 运行时版本：2.10.8.1（Debian 2.10.8.1-1ubuntu2.2）；ASP.NET 版本：4.0.30319.1

* * *

我的错误日志没有说明 mod_mono

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:59:34.737

显然您正在尝试运行使用 Visual Basic 编写的代码。为此，您需要`vbnc`安装编译器。查看 ubuntu 包，`vbnc`似乎在 12.04 中不可用，仅在 12.10 中可用（在[mono-vbnc 包](http://packages.ubuntu.com/quantal/mono-vbnc)中）。另请注意，据我所知，vbnc 仅支持 .NET 2.0。

如果您不需要 VB 支持，您可能已经可以使用了，只需使用 C# 页面进行测试。否则，您可以升级整个发行版，安装反向移植的单声道包或从源代码安装单声道。

# youtube-api - loadPlaylist 函数在 IFrame 播放器 API 的 Flash 模式下不起作用

> ID：13752248
> 
> 赞同：0
> 
> 时间：2012-12-06T20:46:51.500
> 
> 标签：youtube-api

**受影响的 API 名称：**
IFrame 播放器 API

**问题摘要：**
loadPlaylist() 函数在 IFrame 播放器 API 的 Flash 模式下不起作用。

**重现问题的步骤：**
请访问我为此错误创建的演示页面：http:
[//www.gilgoldshlager.com/youtube_bug.html](http://www.gilgoldshlager.com/youtube_bug.html)

**预期输出：**
能够在播放列表之间加载和切换。

**实际结果：**
无法在播放列表之间加载和切换。

**注意：**
我在我创建的错误演示页面中编写了所有重现步骤：http:
[//www.gilgoldshlager.com/youtube_bug.html](http://www.gilgoldshlager.com/youtube_bug.html)
请让我知道这是错误还是我做错了什么。

谢谢你，吉尔。

# php - 复选框默认为选中，除非用户未选中

> ID：13752249
> 
> 赞同：2
> 
> 时间：2012-12-06T20:46:56.023
> 
> 标签：php, forms, wordpress

如何更改下面的 php 以便检查初始视图，但如果用户取消选中并提交表单，则每次访问表单时都保持未选中状态（直到他们选择再次检查值）？

```
class My_Recent_Posts_Widget extends WP_Widget {

 function form( $instance ) {

     /* form code here...*/

    <input 
     type="checkbox" 
     class="checkbox" 
     id="<?php echo $this->get_field_id("excerpt"); ?>" 
     name="<?php echo $this->get_field_name("excerpt"); ?>"<?php checked( (bool) $instance["excerpt"], true ); ?> 
    />

    /* form code here...*/

   }
} 
```

**更新**：在输入字段中放置 check="checked" 不是我想要的。原因是每次用户点击取消选中它，提交后它总是回来选中。用户取消选中该选项后，在后续访问表单时应保持未选中状态。但是，使用 checked=checked 可确保默认状态始终为选中状态，无论用户之前是否取消选中此特定项目。

我只需要检查*默认*值，但如果用户已经取消选中它一次，我需要它坚持以便每次打开表单时都取消选中，直到他们选择自己检查它。我相信答案在于数据库中 $instance["excerpt"] 项的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:58:59.830

假设我们在这里谈论[WordPress](http://codex.wordpress.org/Function_Reference/checked)，您正在使用：

```
<?php checked( (bool) $instance["excerpt"], true ); ?> 
```

因此复选框将根据 的值进行检查`$instance["excerpt"]`。

您应该根据自己的需要修改条件，但如果不查看更多详细信息，我们很难做到这一点。

**编辑：**如果值存储在`$instance["excerpt"]`您应该确保新用户的数据库中的默认值是选中的值（`1`例如）。这样，只要用户不更改它，它就会保持选中状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:49:50.087

只需输入：`checked="checked"`

在您的输入标签内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T01:05:02.990

查看 Justin Tadlock 的这篇文章：[在 WordPress 2.8 中创建小部件的完整指南](http://justintadlock.com/archives/2009/05/26/the-complete-guide-to-creating-widgets-in-wordpress-28)。

在那里，您会看到在解析表单的参数时，您可以拥有`$defaults`：

```
function form( $instance ) {

    /* Set up some default widget settings. */
    $defaults = array( 
            'title'    => 'Example'
        ,   'name'     => 'John Doe'
        ,   'sex'      => 'male'
        ,   'show_sex' => true 
    );
    $instance = wp_parse_args( (array) $instance, $defaults ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:48:46.067

只需设置选中的属性

```
<input 
  type="checkbox" 
  class="checkbox" 
  checked="checked" 
  id="<?php echo $this->get_field_id("excerpt"); ?>"
  name="<?php echo $this->get_field_name("excerpt"); ?>"<?php checked( (bool) $instance["excerpt"], true ); ?>
/> 
```

# jquery - simple jquery length return bad value

> ID：13752251
> 
> 赞同：0
> 
> 时间：2012-12-06T20:46:56.663
> 
> 标签：jquery

it making me crazy, i'm probably stupid :)

Go to this link : [http://www.willbegood.com/lab/whatup/list2.php?categ=4](http://www.willbegood.com/lab/whatup/list2.php?categ=4)

Why to this page return "1", it should be return "4". There are 4 div whith the id equal to "liste-item", why it return only 1? My page is generated by a simple php query, is this the reason?

I have also tryed to test this with the same page but static (html) : same problem Check here : [http://www.willbegood.com/lab/whatup/list3.html](http://www.willbegood.com/lab/whatup/list3.html)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:47:49.807

You are only allowed one `id` element. That's probably why. Change it to `class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:47:53.013

You cannot duplicate ID. ID should be unique in a DOM and the jQuery selector would return only 1 which is the first element with `liste-item`.

Use class instead of ID.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T20:48:05.217

**页面中的**ID**`HTML`应该是唯一的。**

 **如果您按**ID**选择它，它将返回 ID 的第一次出现**。** 它不会再看下去了。

在这种情况下，最好将其替换为`class.`

替换`id="liste-item"` **为** `class="liste-item"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T20:50:19.710

您的问题是您在需要使用类的地方使用 id。根据定义，ID 必须是唯一的。当您在 jquery（或直接 JS）中按 Id 选择时，您只会得到一个元素。将您的 div 更改为

```
<div class='liste-item off'></div>
<div class='liste-item off'></div>
<div class='liste-item off'></div>
<div class='liste-item off'></div> 
```

你`alert($(".liste-item").length)` 可以在这里找到关于 id 和 class 选择器的 JS 教程：http: [//www.htmldog.com/guides/cssintermediate/classid/](http://www.htmldog.com/guides/cssintermediate/classid/)**

# jquery - jQuery sortable - move item between 2 connected lists keeping count

> ID：13752252
> 
> 赞同：3
> 
> 时间：2012-12-06T20:47:03.190
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

I have two list with 6 items, connectedWith a class of `.connectedSortable` When I move an item between the two lists, it gets appended to the target list, and removed from the source list. So now we have a list with 5 items, and a list with 7 items. How can the items remain 6 items per list, and we just move the top most in the target list to the first list (automatically rearranges itself in the same order as if it were one list)?

```
<ul class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
    <li class="ui-state-default">Item 6</li>
</ul>

<ul class="connectedSortable">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
    <li class="ui-state-default">Item 6</li>
</ul>

$( ".connectedSortable" ).sortable({
    connectWith: ".connectedSortable"
}).disableSelection(); 
```

**To clarify:** The number of lists may be 2 or more. But what I am after is the fixed number of 6 items per list and correct automatic rearrangement as sortable does if it were single list. An example is if you move item 3 from list1 to list2 after item 4, then the outcome should be this:

```
<ul class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
    <li class="ui-state-default">Item 6</li>
    <li class="ui-state-default">Item 1</li>
</ul>

<ul class="connectedSortable">
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 5</li>
    <li class="ui-state-default">Item 6</li>
</ul> 
```

[jsFiddle](http://jsfiddle.net/5RjV5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:59:07.443

您可以使用该`receive`选项执行此操作。下面的代码假设有多个`<ul>`元素，`id="ulX"`其中`X`是一个从 1 开始的整数序列：

```
$(function() {
    $( ".connectedSortable" ).sortable({
        connectWith: ".connectedSortable",
        receive: function (event, ui) {
             var targetul = $(ui.item).parent().attr("id");
             var targetno = parseInt(targetul.split("ul")[1]);
             var sourceul = $(ui.sender).attr("id");
             var sourceno = parseInt(sourceul.split("ul")[1]);

             if (sourceno > targetno)
                 rippleUp(targetno, sourceno);
             else
                 rippleDown(targetno, sourceno);

        }
    }).disableSelection();
});

function rippleUp(start, end) {
    for (var i=start;i<end;i++) {
         $("#ul"+i+" > li").last().prependTo("#ul"+(i+1));
    }
}

function rippleDown(start, end) {
    for (var i=start;i>end;i--) {
         $("#ul"+i+" > li").first().appendTo("#ul"+(i-1));
    }
} 
```

# mysql - Joining 6 MySQL tables for sports application

> ID：13752254
> 
> 赞同：1
> 
> 时间：2012-12-06T20:47:30.497
> 
> 标签：mysql

I'm creating a database that is going to be used for a sporting competition. To view the results of a game, I need to join six tables together:

*   Season s
*   Round r
*   Rounddetails rd
*   Match m
*   Matchdetails md
*   Game g

I want the select statement to return something like this:

g.gameid, g.pointsfor, g.pointsagainst, md.matchdetailsid, m.matchid, rd.rounddetailsid, r.roundid, s.seasonid

Could anyone help me write a MySQL statement that will return that?

Please click the link to view the tables

![a tables](../Images/92cf478b48cad345c0fce7751c9f400d.png)

EDIT: so far I have tried this query:

```
select
`s`.`seasonID` AS `seasonID`,
`r`.`roundID` AS `roundid`,
`rd`.`roundDetailsID` AS `roundDetailsID`,
`m`.`matchid` AS `matchid`,
`md`.`matchDetailsID` AS `matchDetailsID`,
`g`.`gameid` AS `gameid`,
`g`.`pointsfor` AS `pointsfor`,
`g`.`pointsagainst` AS `pointsagainst`
from (((((`season` `s` left join `round` `r` on((`s`.`SeasonID` = `r`.`SeasonID`)))
left join `rounddetails` `rd` on((`r`.`RoundID` = `rd`.`RoundID`)))
left join `match` `m` on((`rd`.`matchid` = `m`.`matchid`)))
left join `matchdetails` `md` on((`m`.`matchid` = `md`.`matchid`)))
left join `game` `g` on((`md`.`matchdetailsid` = `g`.`matchdetailsid`))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:55:23.870

```
SELECT DISTINCT g.gameid, g.pointsfor, g.pointsagainst, md.matchdetailsid, m.matchid, rd.rounddetailsid, r.roundid, s.seasonid
FROM Match AS m
INNER JOIN MatchDetails as md
ON Match.MatchId = MatchDetails.MatchId
INNER JOIN Game as g
ON MatchDetails.MatchDetailSid = MatchDetailSid
INNER JOIN RoundDetails as rd
ON Match.MatchId = RoundDetails.MatchId
INNER JOIN Round as r
ON Round.RoundId = RoundDetails.RoundId
INNER JOIN Season as s
ON Round.SeasonId = Season.SeasonId
WHERE MatchId = 1 
```

# php - 不能通过 spl_autoload_register 加载具有命名空间的 PHP 类？

> ID：13752256
> 
> 赞同：3
> 
> 时间：2012-12-06T20:47:37.137
> 
> 标签：php, namespaces, autoloader, spl-autoload-register

当在类中实现命名空间时，我在加载类`spl_autoload_register`时遇到问题。

下面的类，但是当**没有**`autoloader`使用命名空间时加载任何类都没有问题，

 **```
class autoloader
{
    /**
     * Set the property.
     */
    public $directory;
    public $recursive;

    /**
     * Receive the supplied data.
     * @string $directory
     * @array $recursive default: models
     */
    public function __construct($directory, $recursive = array('search' => 'models') ) 
    {
        # Store the data into the property.
        $this->directory = $directory;
        $this->recursive = $recursive;

        # When using spl_autoload_register() with class methods, it might seem that it can use only public methods, though it can use private/protected methods as well, if registered from inside the class:
        spl_autoload_register(array($this,'get_class'));

    }

    private function get_class($class_name)
    {
        # List all the class directories in the array.
        if ($this->recursive)
        {
            $array_directories =  self::get_recursive_directory($this->directory);
        }
        else
        {
            if (is_array($this->directory)) $array_directories =  $this->directory;
            else $array_directories =  array($this->directory);
        }

        # Set the class file name.
        $file_name = 'class_'.strtolower($class_name).'.php';

        # Loop the array.
        foreach($array_directories as $path_directory)
        {
            if(file_exists($path_directory.$file_name)) 
            {
                # There is no need to use include/require_once. Autoload is a fallback when the system can't find the class you are instantiating. 
                # If you've already included it once via an autoload then the system knows about it and won't run your autoload method again anyway. 
                # So, just use the regular include/require - they are faster.
                include $path_directory.$file_name;
            } 
        }

    }

    # However the memory consumption of this can be huge if you have a very large directory tree with only a few matches.
    # @source: http://stackoverflow.com/questions/9294543/search-and-list-specific-directories-only
    public function get_recursive_directory($directory)
    {
        # Create an object that allows us to iterate directories recursively.
        # Stolen from here: 
        # http://www.php.net/manual/en/class.recursivedirectoryiterator.php#102587
        $iterator = new RecursiveIteratorIterator
                    (
                        new RecursiveDirectoryIterator($directory),
                        RecursiveIteratorIterator::CHILD_FIRST
                    );

        # This will hold the result.
        $result = array();

        # Loop the directory contents.
        foreach ($iterator as $path) 
        {

            # If object is a directory and matches the search term ('models')...
            if ($path->isDir() && $path->getBasename() === $this->recursive['search']) 
            {

                # Add it to the result array.
                # Must replace the slash in the class - dunno why!
                $result[] = str_replace('\\', '/', $path).'/';
                //$result[] = (string) $path . '/';

            }

        }

        # Return the result in an array.
        return $result;
    }
} 
```

例如一个`tag`类，

```
namespace hello;

class tag extends \core
{
} 
```

现在通过类加载`autoloader`类，

```
# Autoload the classes from the specific folder.
$autoloader = new autoloader("C:/wamp/www/website/local/applications/master/sides/models/", $recursive = false);

# Instantiate the tag.
$tag = new hello\tag($connection); 
```

结果，

> **致命错误：第****7行的****C:\wamp\www\website\local\applications\master\sides\views\tags.php** 中找不到类 'hello\tag'

 **知道如何修复我的`autoloader`类，以便无论是否有命名空间，我都可以加载这些类？

**编辑：**

我保存类和类命名的文件夹，

```
C:\wamp\www\website\local\applications\master\sides\models\

class_tag.php
class_something.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:24:57.623

你的错误在于你的`get_class()`方法。`$class_name`包含完全限定的类名及其命名空间。在您的情况下，您必须从类名中删除名称空间。

```
$file_name = 'class_'.strtolower(array_pop(explode('\\', $class_name))).'.php'; 
```

我强烈建议使用[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准进行自动加载。如果您将使用任何库，它们很可能使用相同的标准，而您只有一个自动加载器。****

# nhibernate - Fluent NHibernate only cascade delete of association record

> ID：13752259
> 
> 赞同：1
> 
> 时间：2012-12-06T20:47:51.160
> 
> 标签：nhibernate, fluent-nhibernate

We're using NHibernate for our membership system. A `User` can be a member of many `Role`s and a `Role` can have many users.

When a `Role` or a `User` is deleted, it should only cascade the delete of the association record ("RoleUsers" table).

Deleting a `Role` works as expected. However, deleting a `User` does not delete the association record and as such fails due to a foreign key constraint.

My mapping on the `Role` side:

```
 HasManyToMany(r => r.Users)
            .Access.CamelCaseField()
            .Table("RoleUsers")
            .ParentKeyColumn("RoleId")
            .ChildKeyColumn("UserId")
            .AsSet(); 
```

Mapping on the `User` side:

```
 HasManyToMany(u => u.Roles)
            .Access.CamelCaseField()
            .Table("RoleUsers")
            .ParentKeyColumn("UserId")
            .ChildKeyColumn("RoleId")
            .Inverse(); // we'll add user to role, not role to user 
```

And the failing test:

```
 [Test]
    public void Deleting_user_should_not_delete_roles()
    {
        var user = new User("john@doe.com", "John", "Doe", "Secr3t");
        var role = new Role("Admin");
        role.AddUser(user);

        object id;
        using (var txn = Session.BeginTransaction())
        {
            id = Session.Save(user);
            Session.Save(role);
            txn.Commit();
        }

        Session.Clear();

        var fromDb = Session.Get<User>(id);

        using (var txn = Session.BeginTransaction())
        {
            Session.Delete(fromDb);
            txn.Commit();
        }

        Session.Query<Role>().Count().ShouldEqual(1);
    } 
```

I've tried every combination of `Cascade` on the user mapping and it either fails or deletes the association record AND the role (not what I want).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:19:48.573

**逆向**和**级联**是两个不同的概念。当然，两者**都**支持`<many-to-many>`关系。请参阅文档 6.8（几乎向下滚动到 6.9）

[http://nhibernate.info/doc/nh/en/index.html#collections-bidirectional](http://nhibernate.info/doc/nh/en/index.html#collections-bidirectional)

1）首先，我们可以去掉集合的**逆**设置。`User.Roles`这将理顺用户与角色的关系行为*，**并*在*用户*本身被删除之前强制将其删除。

2）其次。如果*User的**Roles*集合被标记为，**`inverse`**

 *```
HasManyToMany(u => u.Roles)
  ...
  .Inverse(); // we'll add user to role, not role to user 
```

删除任何*User*，将**永远不会**触发该对的删除。那是因为我们明确地说：*唯一关心这种关系的人是`Role`*.

因此，如果我们想继续您的场景：

> 。逆（）; **// 我们将用户添加到角色，而不是角色添加到用户**

我们应该保持一致。“我们将从角色中删除用户，而不是从用户中删除角色”：

```
[Test]
public void Deleting_user_should_not_delete_roles()
{
  var user = new User("john@doe.com", "John", "Doe", "Secr3t");
  var role = new Role("Admin");
  role.AddUser(user);

  object roleId;
  object id;
  using (var txn = Session.BeginTransaction())
  {
    id = Session.Save(user);
    roleId = Session.Save(role);
    txn.Commit();
  }

  Session.Clear();

  // take both from DB
  var userFromDb = Session.Get<User>(id);
  var roleFromDb = Session.Get<Role>(roleId);

  using (var txn = Session.BeginTransaction())
  {
     // HERE just remove the user from collection
     roleFromDb.Users.Remove(userFromDb);

     // all relations will be deleted
     Session.Save(roleFromDb);
     txn.Commit();
  }
  ... 
  // assertions
  // "John's" relation to Role "admin" is deleted
} 
```

*注意：* *3）在那里没有使用级联，但可以帮助减少 Session.Save(user)...*

### 编辑：扩展点 3)

**正如 Ben Foster 在评论中注意到的那样，**删除了用户。****

 **3）我们甚至应该允许完全`Role`管理它的*用户*集合。让我们介绍一下`casdace="all"` *(casdace="all-delete-orhpan" if User without any Role 应该被删除)*。现在我们只能通过 Role 对象添加/更新用户。

Role 的 Users 集合的映射应如下所示：

```
HasManyToMany(r => r.Users)
  .Access.CamelCaseField()
  .Table("RoleUsers")
  .ParentKeyColumn("RoleId")
  .ChildKeyColumn("UserId")
  //.Cascade.All(); // just save or update instance of users
  .Cascade.AllDeleteOrphan(); // will even delete User without any Role
  .AsSet(); 
```

有了逆和级联，我们可以调整测试：

```
[Test]
public void Deleting_user_should_not_delete_roles()
{
  var user = new User("john@doe.com", "John", "Doe", "Secr3t");
  var role = new Role("Admin");
  role.AddUser(user);

  object roleId;
  using (var txn = Session.BeginTransaction())
  {
     // I. no need to save user
     roleId = Session.Save(role);
     ... 
```

然后调用它来摆脱一个用户

```
...
using (var txn = Session.BeginTransaction())
{
  var user = Session.Get<User>(id);
  var roles = user.Roles.ToList();
  roles.ForEach(role => role.RemoveUser(user))
  // II. not only relations, but even the User is deleted
  // becuase updated roles triggered delete orhpan
  // (no Session.Update() call there)
  txn.Commit();
} 
```***

# spring - Hibernate JDBC connection blocking

> ID：13752261
> 
> 赞同：2
> 
> 时间：2012-12-06T20:47:54.740
> 
> 标签：spring, hibernate, jdbc

I'm using spring + hibernate + tomcat jdbc in my java application. I want to be able to handle connection problem when , for exemple, a database crash occur. The problem I got is that hibernate block on trying to get a jdbc connection (when for exemple the mysql is down) and never timeout making the http request hanging indefinitly.

Here's my hibernate config :

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
  <property name="dataSource">
    <ref bean="dataSource"/>
  </property>
  <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
         <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
         <prop key="hibernate.connection.release_mode">auto</prop>
     </props>
  </property>
  <property name="mappingResources">
    <list>
      <value>detection/model/conf/rules.hbm.xml</value>
</list>
  </property>
</bean> 
```

And my jdbc datasource config :

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">

    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="initialSize" value="10" />
    <property name="maxActive" value="100" />
    <property name="maxIdle" value="50" />
    <property name="minIdle" value="10" />
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="maxWait" value="2000"/>
    <property name="validationQuery" value="/*ping*/ SELECT 1"/>
    <property name="timeBetweenEvictionRunsMillis" value="2000"/>
    <property name="removeAbandonedTimeout" value="2000"/>
    <property name="removeAbandoned" value="true"/>
    <property name="validationInterval" value="5000"/>

 </bean> 
```

Is there any way to tell hibernate to timeout waiting for a connection after a certain time ?

**UPDATE :**

I switch to c3p0 but i got the same behavior, but i got more debug info with c3p0\. I can see that an exception is thrown but c3p0 seem to catch it and do nothing with it so the http request still hang till i restart the mysql server.

```
DEBUG 2012-12-07 09:07:46,994 : Opening Hibernate Session
DEBUG 2012-12-07 09:07:46,994 : opened session at timestamp: 13548892669
DEBUG 2012-12-07 09:07:46,994 : about to open PreparedStatement (open         PreparedStatements: 0, globally: 2)
DEBUG 2012-12-07 09:07:46,994 : opening JDBC connection
DEBUG 2012-12-07 09:07:46,994 : trace com.mchange.v2.resourcepool.BasicResourcePool@195b6aad [managed: 10, unused: 7, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@6b0ede6)
DEBUG 2012-12-07 09:07:46,994 : select rules0_.product as product2_, rules0_.rules as   rules2_, rules0_.type as type2_ from rules rules0_ where rules0_.product=? and rules0_.type=?
DEBUG 2012-12-07 09:07:46,995 : com.mchange.v2.c3p0.impl.NewPooledConnection@60487c5f handling a throwable.
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:29:09.340

终于用 c3p0 得到了我想要的行为。这是我使用的配置：

```
 <property name="acquireRetryDelay" value="5000"/>
    <property name="breakAfterAcquireFailure" value="true"/>
    <property name="checkoutTimeout" value="1"/>
    <property name="testConnectionOnCheckin" value="1" /> 
```

我认为关键属性是 breakAfterAcquireFailure ，它将正确地从池中删除断开的连接，而 idleCheck 测试在数据库关闭时不会关闭连接并无限期挂起。这使得 checkoutTimeout 正常工作，因为池得到了正确管理。恢复数据库后，连接提供程序也会正确重新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:13:03.867

此[SO Post](https://stackoverflow.com/questions/11406363/how-can-i-stop-database-retry-connection-using-c3po)描述了如何配置 C3PO 以在无法获取连接时引发异常。

# android - getting RSSI of Bluetooth connection with hcitool, crashing

> ID：13752264
> 
> 赞同：2
> 
> 时间：2012-12-06T20:48:03.227
> 
> 标签：android, bluetooth, bluez

I have read through many stackoverflow posts about the possibility of getting RSSI of a Bluetooth connection. It seems as though Android does not directly expose this through any API and that the only hope is to get straight to the bluez API.

Apparently, once you have a connection with a Bluetooth device, you can use hcitool to get the RSSI or link quality like:

```
hcitool rssi E8:06:88:2F:D1:4E 
```

However, whenever I try to do this using hcitool, I am getting segmentation faults:

```
130|shell@android:/system/bin # hcitool rssi E8:06:88:2F:D1:4E
RSSI return value: 0
[1] + Stopped (signal)     hcitool rssi E8:06:88:2F:D1:4E 
```

Even if I try to create a connection with hcitool, instead of the BluetoothAdapter:

```
130|shell@android:/system/bin # hcitool cc E8:06:88:2F:D1:4E
Can't create connection: I/O error 
```

I'm using this version of hcitool: [http://code.google.com/p/androidobex/downloads/detail?name=hcitool](http://code.google.com/p/androidobex/downloads/detail?name=hcitool)

However, it says its the "Android dev phone version" and I am clearly using something newer than a G1\. But, I can't find any other version of hcitool.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-06T06:55:31.220

欢迎来到俱乐部！我对 hcitool 有同样的问题。问题是错误的实现。

为每个命令分配一个结构 (cr)，稍后在 ioctl() cmd 中使用该结构。我查看了内核实现并意识到所需的字节数大于提供的字节数。

由于我目前无法对此进行修补，因此我为自己编写了一个简单的 so lib，它修改了每个 malloc() 调用以分配额外的 100 个字节作为安全裕度。然后不会发生崩溃：

```
#define _GNU_SOURCE

#include <stdio.h>
#include <dlfcn.h>

static void* (*real_malloc)(size_t)=NULL;

void *malloc(size_t size) {
    if (!real_malloc) {
        real_malloc = dlsym(RTLD_NEXT, "malloc");
    }

    return real_malloc(size + 100);
} 
```

使用以下行进行编译（或在必要时插入您的交叉编译器）：

```
gcc memsafe.c --shared -fPIC -O2 -ldl -o libmemsafe.so 
```

然后自己编写一个 bash 脚本来获取各种值：

```
#!/bin/bash

if [ ! -z "$1" ]; then
    export LD_PRELOAD="libmemsafe.so"
    hcitool cc $1
    hcitool rssi $1
    hcitool lq $1
    hcitool tpl $1 0
    hcitool tpl $1 1
else
    echo "Usage: $0 <btAddr>"
fi 
```

如果您可以自己编译 hcitool，请查找以下所有行：

```
cr = malloc(sizeof(*cr) + sizeof(struct hci_conn_info)); 
```

...并将它们更改为...

```
cr = malloc(sizeof(*cr) + sizeof(struct hci_conn_info) + 100); 
```

如果您关心估计正确的大小，请随时更正实施。

希望这个答案仍然有帮助或将来会帮助某人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:24:16.660

hcitool 源代码是 bluez 堆栈的一部分。您需要 Android NDK 针对正确版本的 linux 共享库进行编译。我已经下载了 4.0.4 的整个 android 源代码，它是一个巨大的 blob，但它确实有效。

# php - og：图像被忽略

> ID：13752267
> 
> 赞同：5
> 
> 时间：2012-12-06T20:48:04.887
> 
> 标签：php, javascript, html, facebook, fbconnect

我有问题。当我在 fb 上分享我的网站时，它不显示图像。我的代码：

```
 <meta property="og:title" content="Zapust.pl - życie granic wschodnich"/>
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://zapust.pl"/>
  <meta property="og:image" content="http://zapust.pl/assets/temp.png"/> 
```

我没有 app_id。JS代码：

```
 <script>function fbs_click() {u=location.href;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;}</script>
<a rel="nofollow" href="http://www.facebook.com/share.php?u=zapust.pl" onclick="return fbs_click()" target="_blank"><img src="/assets/share-fb-icon.gif"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:31:15.633

如有疑问，请使用[linter](http://developers.facebook.com/tools/debug/)

根据它，您的图像太小，高度和宽度必须至少为 200 像素。

# xml - 使用 Perl XML::Simple 读取、删除一些记录并写入相同的 XML 文件

> ID：13752270
> 
> 赞同：1
> 
> 时间：2012-12-06T20:48:25.840
> 
> 标签：xml, perl

我今天在工作中一直在努力解决这个问题。试图读入一个像下面这样的 XML 文件（我很快就输入了）。我有一个 CSV`show_id`代码文件。所以我读了它们并将它们放入哈希中。然后我使用[`XML::Simple`](https://metacpan.org/module/XML%3a%3aSimple).

然后，我比较下面`show_id`元素中的代码（如在线示例中那样使用数组进行循环，然后`$a = $data->{Element1}->{Element2}->{show_id}`找到它），看看我是否在哈希表上有匹配项。答对了。我让它工作没有问题。

因此，假设我将中间两个`Element2`元素的`show_id`值与`ABC11`和匹配`ABC12`。现在我需要编写一个匹配的新文件。所以我尝试这样做`XMLout`，但我似乎丢失了我读入的整个标签结构。

有什么方法可以读取下面的数据并删除记录`ABC10`，`ABC14`例如，以相同的格式拧出文件？让我知道这是否有意义。

我也只有在工作中安装`XML::Simple`。`XML::Parser`请帮忙！！！

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<main>
  <Element1>
    <Element2>
        <show/>
        <show_id>ABC10</show_id>
        <staring>
            <show_header>This is a test</show_header>
        </staring>
    </Element2>
        <Element2>
            <show/>
            <show_id>ABC11</show_id>
            <staring>
                <show_header>This is a test</show_header>
            </staring>
    </Element2>
        <Element2>
            <show/>
            <show_id>ABC12</show_id>
            <staring>
                <show_header>This is a test</show_header>
            </staring>
    </Element2>
        <Element2>
            <show/>
            <show_id>ABC14</show_id>
            <staring>
                <show_header>This is a test</show_header>
            </staring>
    </Element2>
  </Element1>
</main> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:50:13.847

如果您能够 [`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig) 安装，这是您可能更喜欢的解决方案。

```
use strict;
use warnings;

use XML::Twig;

my %keep = (
  ABC11 => 1,
  ABC12 => 1,
);

my $twig = XML::Twig->new(
  keep_spaces => 1,
  twig_handlers => { Element2 => \&Element2 }
);  

$twig->parsefile('data.xml');
$twig->print;

sub Element2 {
  my ($twig, $elem) = @_;
  my $show_id = $elem->first_child_text('show_id');
  $elem->delete unless $keep{$show_id};
} 
```

或者，如果您愿意 [`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML) ，那么这将起作用

```
use strict;
use warnings;

use XML::LibXML;

my %keep = (
  ABC11 => 1,
  ABC12 => 1,
);

my $xml = XML::LibXML->load_xml(location => 'data.xml');

for my $elem2 ($xml->findnodes('//Element2')) {
  my $show_id = $elem2->find('show_id');
  $elem2->parentNode->removeChild($elem2) unless $keep{$show_id};
}

print $xml->toString; 
```

这些程序的输出是相同的。

**输出**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<main>
  <Element1>

        <Element2>
            <show/>
            <show_id>ABC11</show_id>
            <staring>
                <show_header>This is a test</show_header>
            </staring>
    </Element2>
        <Element2>
            <show/>
            <show_id>ABC12</show_id>
            <staring>
                <show_header>This is a test</show_header>
            </staring>
    </Element2>

  </Element1>
</main> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:30:58.427

首先，摆脱废弃的元素：

```
$data->{Element1}{Element2} = [
  grep { $_->{show_id} =~ /^ABC1[12]$/ } @{$data->{Element1}{Element2}}
]; 
```

然后，以 XML 格式写出。（使用`NoAttr => 1`，哈希表示为嵌套元素而不是属性。）

```
print XMLout($data, NoAttr => 1, RootName => "main"); 
```

您可以传递`KeepRoot => 1`给 XMLin 和 XMLout 来处理根元素（“main”）而不是`RootName => 1`. 如果这样做，请使用`$data->{main}{Element1}{Element2}`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:31:29.463

如果您希望输出与输入相同，请不要使用 XML::Simple。这是使用[XML::Rules](http://search.cpan.org/perldoc?XML%3a%3aRules)的解决方案：

```
use strict;
use warnings;

use XML::Rules;

my @keep_these = qw(
  ABC11
  ABC12
);
my %keep; $keep{$_}++ for @keep_these;

my @rules = (
  Element2 => sub {
    my $id = $_[1]->{show_id}{_content};
    return unless $keep{$id};
    return $_[0] => $_[1];
  },
);
my $p = XML::Rules->new(
  style => 'filter',
  rules => \@rules,
  stripspaces => 3,
);

$p->filter(\*DATA, \*STDOUT);

__END__
<?xml version="1.0" encoding="ISO-8859-1"?>
<main>
  <Element1>
    <Element2>
etc. 
```

# javascript - 简单的 require.extensions 示例不起作用

> ID：13752272
> 
> 赞同：1
> 
> 时间：2012-12-06T20:48:29.890
> 
> 标签：javascript, node.js

module.extensions 似乎无法正常工作，[http:](http://nodejs.org/api/globals.html#globals_require_extensions) //nodejs.org/api/globals.html#globals_require_extensions 上给出的示例没有返回任何内容。

我正在使用 node@0.8.12 | linux | ia32

节点 js 文件（run.js）：

```
#!/usr/bin/env node
fs = require('fs');

    require.extensions['.jse'] = function(module, filename) {
      var content = fs.readFileSync(filename, 'utf8');
      module.exports = content;
    };

require('./0.jse')

// 
console.log(require('./0.jse')) 
```

jse 文件（0.jse）：

```
#! /usr/bin/env node
console.log('IT WORKS!') 
```

$ ls -al *.jse *.js

```
-rwxr-xr-x 1 alvaro alvaro  46 dic  6 17:26 0.jse
-rwxr-xr-x 1 alvaro alvaro 314 dic  6 17:32 run.js 
```

文件 --mime *.js *.jse

```
run.js: text/plain; charset=us-ascii
0.jse:  text/plain; charset=us-ascii 
```

$节点运行.js

它输出：

```
#! /usr/bin/env node
console.log('IT WORKS!') 
```

代替：

```
IT WORKS! 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:51:50.480

使用 module._compile(contents, filename) 结束编译。

因此，节点 js 文件（run.js）：

```
#!/usr/bin/env node
fs = require('fs');

    require.extensions['.jse'] = function(module, filename) {
      var content = fs.readFileSync(filename, 'utf8');
      return module._compile(content, filename);
    };

require('./0.jse') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-26T11:37:24.133

你不回来了`module`，见下文

```
require.extensions['.jse'] = function(module, filename) {
   var content = fs.readFileSync(filename, 'utf8');
   module.exports = content;
   return module; // Return module
}; 
```

# java - 如何为两个mysql和oracle定义routingdatasource？

> ID：13752273
> 
> 赞同：0
> 
> 时间：2012-12-06T20:48:33.623
> 
> 标签：java, mysql, oracle, spring, hibernate

我想为两个不同的数据库定义一个路由数据源：mysql 和 oracle

我已经定义了以下 config.xml

```
<bean id="dataSourceTarget" class="com.test.common.RoutingDataSource">
    <property name="targetDataSources">
        <map key-type="com.test.common.DataSourceType">
            <entry key="MY_SQL" value-ref="mySqlDataSource"/>
            <entry key="ORACLE" value-ref="oracleDataSource"/>
        </map>
    </property>
    <property name="defaultTargetDataSource" ref="mySqlDataSource"/>
</bean>

<bean id="mySqlDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
      destroy-method="close">
    <property name="driverClass" value="${jdbc.driver.classname}" />
    <property name="jdbcUrl" value="${mysql.url}" />
    <property name="user" value="${mysql.username}" />
    <property name="password" value="${mysql.password}" />
</bean>

<bean id="oracleDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
      destroy-method="close">
    <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
    <property name="jdbcUrl" value="${oracle.url}" />
    <property name="user" value="${oracle.user}" />
    <property name="password" value="${oracle.passw}" />
</bean> 
```

现在我可以定义会话工厂和事务管理器

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.use_sql_comments">true</prop>
        </props>
    </property>
</bean> 
```

但这是行不通的。我得到了

```
Caused by: java.lang.UnsupportedOperationException: The user must supply a JDBC connection 
```

此外，我必须为会话定义方言。但是如何根据它正在处理的数据源来定义它？

# asp.net-mvc - 用于字段可见性的自定义动态数据注释 c#

> ID：13752278
> 
> 赞同：1
> 
> 时间：2012-12-06T20:49:16.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在尝试创建一个 dataannotations 属性，该属性根据数据库中的设置控制字段可见性。该属性将在将由多个客户端使用的系统中使用。此外，该字段的可见性需要能够即时更改。我知道我可以在视图中的每个字段周围做一个 if 语句，但我试图避免这种情况并在视图模型中保持可见性控制，如下所示：

```
[Visible(FirstName)]
public string FirstName { get; set; } 
```

我尝试创建此自定义属性，该属性从名为 ResourceType 的资源类（使用 T4 生成并包含访问数据库所需的代码）的方法中获取值：

```
public class VisibleAttribute : Attribute, IMetadataAware
{
    /// <summary>
    /// Whether this field is visible
    /// </summary>
    public bool Hidden { get; set; }

    public VisibleAttribute(string theFieldName)
    {
        ResourceType resources = new ResourceType();
        Type _resourceType = typeof(ResourceType);

        MethodInfo getHidden = _resourceType.GetMethod("IsHidden");
        object[] requiredParams = new object[] { theFieldName };
        Hidden = (bool)getHidden.Invoke(resources, requiredParams);
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.ShowForEdit = !Hidden;
        metadata.HideSurroundingHtml = Hidden;
    }
} 
```

这是 ResourceType 类的摘录：

```
public class ResourceType
{

public const string Creditors_SecondaryCreditorsPayOffYesNo_Require = "Prop_Creditors_SecondaryCreditorsPayOffYesNo_Require";
    public static string Prop_FieldName_Require 
    { 
        get { return GetHiddenOption(FieldName) ? "true" : "false"; } 
    }

internal static bool GetHiddenOption(string fieldName)
{
    < < Logic here to get the option from the database > >
} 
```

我也尝试了相同的属性，但使用了以下构造函数：

```
public VisibleAttribute(string theFieldName)
    {
        ResourceType resources = new ResourceType();
        Type _resourceType = typeof(ResourceType);

        PropertyInfo getHidden = _resourceType.GetProperty(theFieldName);
        Hidden = (bool)getHidden.GetValue
    } 
```

这两次尝试的问题是，由于代码在构造函数中，它仅在 IIS 重置后第一次加载页面时运行。因此，如果没有其他 IIS 重置，我对可见性设置所做的任何进一步更改都不会反映出来。

我还尝试创建一个自定义 DataAnnotationsModelMetadataProvider 尝试仅在每个页面请求中加载一次设置：

```
public class EGTDataAnnotationsModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes, Type containerType, 
        Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var data = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);
        var visibleAttributeMetadata = attributes.SingleOrDefault(a => typeof(VisibleAttribute) == a.GetType());

        if (visibleAttributeMetadata != null)
        {
            VisibleAttribute visibleAttribte = (VisibleAttribute)visibleAttributeMetadata;

            if (!visibleAttribte.VisibleIsSet)
            {
                PropertyInfo getHidden = visibleAttribte.ResourceType.GetProperty("Prop_" + WebUtils.RemoveSectionNameSpace(visibleAttribte.SectionName) + "_" + visibleAttribte.FieldName + "_Hide");
                visibleAttribte.IsHidden = bool.Parse(getHidden.GetValue(null, null).ToString());

                data.HideSurroundingHtml = visibleAttribte.IsHidden;
                data.ShowForEdit = !visibleAttribte.IsHidden;

                visibleAttribte.VisibleIsSet = true;
            }
            else
            {
                data.HideSurroundingHtml = visibleAttribte.IsHidden;
                data.ShowForEdit = !visibleAttribte.IsHidden;
            }
        }

        return data;
    }
} 
```

我对 ModelMetadataProvider 的一个问题是 CreateMetadata 方法在单个请求期间针对单个字段运行多次。每次请求调用数据库 5-10 次以上以获取自请求开始以来未更改的设置是非常低效的代码，并且性能会大大降低。如果我尝试设置一个标志，表明我已经加载了设置，我会回到与上面相同的场景，直到 IIS 重置后我才看到设置更改。

我希望有人能给我一些关于我可以采用哪些方法来实时查看数据库更改的指示。还是我在尝试做不可能的事？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:51:49.913

您可以将元数据提供程序方法与仅缓存单个请求的值相结合。为此，您可以使用当前 HttpContext 中的 Items 字典。请注意这一点，因为[重定向会导致项目被清除](https://stackoverflow.com/questions/1134442/httpcontext-items-with-asp-net-mvc)：

```
string cacheKey = String.Format("IsVisible-{0}", propertyName)
if(!HttpContext.Current.Items.Contains(cacheKey))
    HttpContext.Current.Items[cacheKey] = //get setting from db

bool isVisible = (bool)HttpContext.Current.Items[cacheKey]; 
```

您还可以考虑使用[ASP .Net 缓存](https://stackoverflow.com/questions/385986/caching-in-asp-net-mvc)，以防您更喜欢不仅为当前请求缓存值（尽管您提到在元数据提供程序中您试图为每个请求加载一次设置）

# linux - 在 linux Mint 中使用 mercurial

> ID：13752279
> 
> 赞同：0
> 
> 时间：2012-12-06T20:49:24.110
> 
> 标签：linux, mercurial, linux-mint

我目前正在与 Mate 一起尝试 Linux Mint，我正在寻找一种解决方案来管理我的 mercurial repo。Tortoise-hg 似乎与 caja 不兼容。除了命令行，你的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:46:34.537

有关信息，tortoise-hg 作为 caja 扩展构建在 nautilus [http://wiki.mate-desktop.org/plugins](http://wiki.mate-desktop.org/plugins)

# grid - 如何将三角形标记添加到 SpreadsheetGear 网格的任何单元格角？

> ID：13752280
> 
> 赞同：2
> 
> 时间：2012-12-06T20:49:26.807
> 
> 标签：grid, spreadsheetgear

这是一个 SpreadsheetGear Grid 特定问题。我知道您可以向单元格添加评论，并且该单元格会自动在右上角获得红色三角形标记。但我需要在任何单元格角落添加一个小三角形（不同颜色）以表示一些特别的东西。有可能做到吗？

UPATE：这是我根据丹尼尔的建议在单元格的任何角落添加一个三角形的结果。

```
 public void AddTriangleShapeToCorner(IWorksheet worksheet, int row, int col, CellCorners cellCorner)
    {
        const double width = 5, height = 5;
        double xOffset = 0, yOffset = 0;

        IWorksheetWindowInfo windowInfo = worksheet.WindowInfo;

        if (cellCorner == CellCorners.TopRight || cellCorner == CellCorners.BottomRight)
        {
            col++;
            xOffset = width;
        }
        if (cellCorner == CellCorners.BottomLeft || cellCorner == CellCorners.BottomRight)
        {
            row++;
            yOffset = height;
        }
        double top = windowInfo.RowToPoints(row) - yOffset;
        double left = windowInfo.ColumnToPoints(col) - xOffset;

        IShape shape = worksheet.Shapes.AddShape(AutoShapeType.RightTriangle, left, top, width, height);
        shape.Line.Visible = false;         // line at top-left corner is not sharp, so turn it off.
        shape.Placement = Placement.Move;   // make the shape move with cell. NOTE: it doesn't work for top-right and bottom-right corners.
        if (cellCorner == CellCorners.TopLeft || cellCorner == CellCorners.TopRight)
            shape.VerticalFlip = true;
        if (cellCorner == CellCorners.TopRight || cellCorner == CellCorners.BottomRight)
            shape.HorizontalFlip = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:35:35.717

您可以使用 IShapes [AddShape](http://www.spreadsheetgear.com/support/help/spreadsheetgear.net.7.0/SpreadsheetGear2012.Core~SpreadsheetGear.Shapes.IShapes~AddShape.html)方法。对于类型，您可以使用 AutoShapeType.RightTriangle。

这是一个例子：

```
private void AddTriangleShape(SpreadsheetGear.IWorksheet worksheet, int iRow, int iCol)
{
  SpreadsheetGear.IWorksheetWindowInfo windowInfo = worksheet.WindowInfo;

  // Calculate the left, top, width and height of the button by 
  // converting row and column coordinates to points.  Use fractional 
  // values to get coordinates in between row and column boundaries.
  double left = windowInfo.ColumnToPoints(iCol);
  double top = windowInfo.RowToPoints(iRow + 0.5);
  double right = windowInfo.ColumnToPoints(iCol + 0.1);
  double bottom = windowInfo.RowToPoints(iRow + 0.9);
  double width = right - left;
  double height = bottom - top;

  worksheet.Shapes.AddShape(SpreadsheetGear.Shapes.AutoShapeType.RightTriangle, left, top, width, height);
} 
```

# api - 谷歌应用域中的谷歌驱动器已用空间报告

> ID：13752283
> 
> 赞同：3
> 
> 时间：2012-12-06T20:49:45.727
> 
> 标签：api, google-drive-api

任何人都知道是否可以获得每个用户的免费/已用谷歌驱动器空间的报告？类似于“帐户报告” [https://developers.google.com/google-apps/reporting/#accounts_report](https://developers.google.com/google-apps/reporting/#accounts_report)但适用于 Google 驱动器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:05:59.900

没有自动生成报告，但所有数据都可用。

您可以使用 Provisioning API 获取 Google Apps 实例中所有用户的列表： [https ://developers.google.com/google-apps/provisioning/#retrieving_organization_users_experimental](https://developers.google.com/google-apps/provisioning/#retrieving_organization_users_experimental)

您可以使用已被授予域范围权限的服务帐户作为每个用户对 Drive API 进行身份验证： [https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

最后，您可以使用 about() API 调用确定用户的当前使用情况以及他们的配额： [https ://developers.google.com/drive/v2/reference/about/get](https://developers.google.com/drive/v2/reference/about/get)

这将为您提供用户使用情况和配额的实时视图（而不是可能长达 24 小时过时的报告）

# javascript - 使用javascript在无序列表中定位项目

> ID：13752290
> 
> 赞同：1
> 
> 时间：2012-12-06T20:50:03.553
> 
> 标签：javascript, css, list, css-float

我有一个[演示](http://www.olmasigereken.com/demo2/)。我想对齐来自 javascript 左侧的红色箭头，如图[所示](http://i.stack.imgur.com/h4Rkj.jpg)。但我不知道我该怎么做。如果我添加`float:left;`内部`.ikinciSol ul li a`块箭头向左但破折号和其他部分被破坏。

```
 function ytplayer_render_playlist( )
  {
    var arrOfListNodes = Array.prototype.filter.call(document.getElementById('mylist').childNodes, function (e) {return e.tagName === 'LI';});
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {   
      var img = document.createElement( "img" );
      img.src = "track_arrow.gif";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 0 );
          };
        }
      )( i );
      a.appendChild( img );
      arrOfListNodes[i].insertBefore(a, arrOfListNodes[i].firstChild);
    }
  } 
```

我该如何修改这些部分？或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:10:20.293

摆脱 img 标签并修改您的列表元素：

```
ul li {
   list-style-image: url("track_arrow.gif");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:14:41.313

您可以将 替换为`div`标签`span`，因为无论如何您都将它们的显示设置为`inline`。这似乎可行，您也可以摆脱所有浮动属性：

[JSFiddle 示例代码](http://jsfiddle.net/2GkBa/)

# c# - 关于公共类中的公共方法的实例成员问题

> ID：13752293
> 
> 赞同：0
> 
> 时间：2012-12-06T20:50:06.593
> 
> 标签：c#, static-members

在公共课程内部：

```
 public static class LogReporting 
```

我有以下方法：

```
 public void RunTimerJobs()
    {
        SPAdministrationWebApplication centralAdmin = SPAdministrationWebApplication.Local;
        try
        {
            foreach (SPService service in centralAdmin.Farm.Services)
            {
                Guid traceGuid = new Guid("d3beda82-38f4-4bc7-874f-ad45cebc9b35");
                Guid eventGuid = new Guid("3ea057b3-0391-4c33-ac8d-412aecdda97d");

                var traceJob =
                    from jobDefinition in service.JobDefinitions
                    where jobDefinition.Id == traceGuid
                    select jobDefinition;

                if (traceJob != null && traceJob.Count() == 1)
                {
                    traceJob.First().RunNow();
                }

                var eventJob =
                    from jobDefinition in service.JobDefinitions
                    where jobDefinition.Id == eventGuid
                    select jobDefinition;

                if (eventJob != null && eventJob.Count() == 1)
                {
                    eventJob.First().RunNow();
                }
            }
        }
        catch (Exception ex)
        {
            //Loggers.SharePointLogger logger = new Loggers.SharePointLogger();
            //logger.WriteTrace(ex.Message, LogProduct.MonitoringView, LogTraceSeverity.Unexpected);
        } 
```

但是它不允许我编译引用`RunTimerJobs()`“不能在静态类中声明实例成员”据我所知，我声明的任何“实例成员”都不能标记为`static`，所以设置是否存在基本问题（即静态类）还是我错过了一些小片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:52:02.957

编译器在这里很清楚。您正在声明一个*静态*类，而静态类只能包含*静态*成员。所以这没关系：

```
public class NonStaticClass
{
    public void InstanceMethod() {}
} 
```

这没关系：

```
public static class StaticClass
{
    public static void StaticMethod() {}
} 
```

但这不是：

```
public static class StaticClass
{
    public void InstanceMethod() {}
} 
```

如果要声明实例成员，为什么要声明`LogReporting`为静态类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:52:06.887

当类标记为**static**时，*它的所有成员都应该是静态的*（不允许创建实例）。[您可以在msdn](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)上阅读有关静态类的更多信息。

因此，如果您想要实例（非静态）方法，请从类定义中删除**static**关键字：

```
public class LogReporting
{
     public void RunTimerJobs()
     {
         //...
     }
} 
```

在这种情况下，您应该创建`LogReporting`实例来调用您的方法：

```
LogReporting log = new LogReporting();
log.RunTimerJobs(); 
```

您的另一个选择 - 使您的方法**静态**：

```
public static class LogReporting
{
     public static void RunTimerJobs()
     {
         //...
     }
} 
```

在这种情况下，您不需要以下实例`LogReporting`：

```
LogReporting.RunTimerJobs(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T20:54:22.137

您的类是静态的，因此您不能拥有任何实例成员，因为您永远不会实例化该类。

为了能够使用`RunTimerJobs()`您需要创建类的方法`instance`，`LogReporting`即

```
LogReporting logReporting = new LogReporting();
logReporting.RunTimerJobs(); 
```

这显然不起作用，因为您的类被定义为`static`并且您**无法**创建它的实例。

制定您的方法`static`或`static`从您的声明中删除关键字`class`- 取决于您的要求。

我在您的方法中没有看到与实例相关的逻辑，因此*将*其标记为`static`.

**记住**

> 只要类没有标记为**static** ，类就可以具有实例成员和静态成员的混合。

**和**

> 只有当您知道所有成员（属性、方法等）也将是静态的时，才将类标记为静态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:52:11.070

你试过了吗：

`public static void RunTimerJobs()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T20:53:02.193

对于静态类，成员也必须是静态的。如果您无法将成员设为静态，那么您也必须将类设为非静态。

如果可以的话，使用非静态类通常是个好主意，因为静态类增加了单元测试的复杂性，因为它们不容易被模拟出来。当然，如果您有使用静态类的合法需求，那么请务必这样做。

# c++ - 在 C++ 中使用 RTTI 将对象转换为正确的类型

> ID：13752303
> 
> 赞同：3
> 
> 时间：2012-12-06T20:50:31.720
> 
> 标签：c++, rtti, type-erasure, dynamic-cast

我试图找出一种方法，在一些困难的条件下将子类的实例动态地转换为它的父类。

具体来说，我有一个看起来像这样的对象层次结构（我已经简化了很多，所以如果有些东西没有意义，可能是由于简化了）：

```
class Object {
public:
  virtual ~Object() {}
};

// shown just to give an idea of how Object is used
class IntObject: public Object {
protected:
  int value;
public:
  IntObject(int v) { value = v; }
  int getValue() { return value; }
};

template <class T>
class ObjectProxy: public Object {
protected:
  T *instance;
public:
   ObjectProxy(T *instance): instance(instance) {}  
   T *getInstance() { return instance; }
}; 
```

该类`ObjectProxy`本质上充当包装器，以允许在`Object`层次结构中使用其他类型。具体来说，它允许保留指向类实例的指针，并在稍后调用实例的方法时使用。例如，假设我有：

```
class Parent {
protected:
  int a;
public:
  Parent(int v) { a = v; }
  virtual ~Parent() {}
  void setA(int v) { a = v; }
  int getA() { return a; }
};

class Child: public Parent {
protected:
  int b;
public:
  Child(int v1, int v2): Parent(v1) { b = v2; }
  void setA(int v) { b = v; }
  int getB() { return b; }
}; 
```

我可能会在以下情况下使用它们：

```
template <typename C>
void callFn(std::list<Object *> &stack, std::function<void (C*)> fn) {
  Object *value = stack.front();
  stack.pop_front();

  ObjectProxy<C> *proxy = dynamic_cast<ObjectProxy<C> *>(value);
  if (proxy == nullptr) {
   throw std::runtime_error("dynamic cast failed");
  }

  fn(proxy->getInstance());
}

void doSomething(Parent *parent) {
  std::cout << "got: " << parent->getA() << std::endl;
}

int main() {
  std::list<Object *> stack;

  // this works
  stack.push_back(new ObjectProxy<Child>(new Child(1, 2)));
  callFn<Child>(stack, doSomething);

  // this will fail (can't dynamically cast ObjectProxy<Child> to ObjectProxy<Parent>)
  stack.push_back(new ObjectProxy<Child>(new Child(1, 2)));
  callFn<Parent>(stack, doSomething);   
} 
```

如上述注释中所述，此代码由于已知原因而失败。在示例代码中，很容易避免调用`callFn<Parent>(stack, doSomething)`. 但是，在我的真实代码中，我使用函数的签名来确定类型，如果它是父类的方法，它将自动用于模板参数。

我的问题是是否有任何方法可以从 ObjectProxy 类型的对象中实现动态转换。部分复杂性来自这样一个事实，即在 function`callFn`中，您只有 Parent 类型，而没有 child 类型。

我研究过使用类型擦除`boost::any`（即`ObjectProxy`停止模板化，而是使用），但在动态转换（是静态`boost::any instance`的）时仍然遇到问题。`boost::any_cast`我确实找到了[`dynamic_any`](https://github.com/bytemaster/Boost.DynamicAny)关于 SO 的提及，但还没有让它正常工作。

非常感谢您对问题的任何帮助或见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:18:34.213

动态转换失败是因为作为 ObjectProxy 实例化的类与 ObjectProxy 的参数化中给出的类型不共享相同的层次结构。我看到两种可能有帮助的方法。第一，您使给 ObjectProxy 的类型共享一个公共基类，并将动态转换从 ObjectProxy 移到实例上。

```
namespace approach2 {
struct object_t {
    virtual ~object_t() { }
};

struct required_base_t {
    virtual ~required_base_t() { }
};

class object_proxy_base_t : public object_t {
    required_base_t* instance_;
public:
    object_proxy_base_t(required_base_t* i) : instance_ (i) { }

    template <class T>
    T* cast_to() const
    {
        return dynamic_cast<T*>(instance_);
    }
};

template <class value_t>
class object_proxy_t : public object_proxy_base_t {
    value_t* instance_;
public:
    object_proxy_t(value_t* i)
    :   object_proxy_base_t (i),
        instance_ (i)
    {
    }
};

template <class value_t>
object_t* new_with_proxy(value_t const& value)
{
    return new object_proxy_t<value_t>(new value_t(value));
}

struct parent_t : required_base_t {
    virtual ~parent_t() { }
};

struct child_t : parent_t {
    virtual ~child_t() { }
};

void f()
{
    object_t* a = new_with_proxy(parent_t()); 
    object_t* b = new_with_proxy(child_t());

    std::cout
        << dynamic_cast<object_proxy_base_t*>(a)->cast_to<parent_t>() << '\n' // works
        << dynamic_cast<object_proxy_base_t*>(b)->cast_to<parent_t>() << '\n' // works
        ;
}

} 
```

如果您无法更改 ObjectProxy 使用的所有类型的基类，则无法使用此方法。这导致了第二个解决方案，在该解决方案中，您使 ObjectProxy 实例具有与用于参数化它的类型相同的层次结构。

```
namespace approach3 {
struct object_t {
    virtual ~object_t() { }
};

struct empty_t {
    template <class T>
    empty_t(T*) { }
};

template <class value_t>
class object_proxy_t : public virtual object_t {
    value_t* instance_;
public:
    object_proxy_t(value_t* i) : instance_ (i) { }
};

template <class value_t, class base_t>
class object_proxy_sub_t :
    public object_proxy_t<value_t>,
    public base_t {

public:
    object_proxy_sub_t(value_t* i)
    :   object_proxy_t<value_t>(i),
        base_t (i)
    {
    }
};

template <class base_t, class value_t>
object_t* new_with_proxy(value_t const& value)
{
    return new object_proxy_sub_t<value_t, base_t>(new value_t(value));
}

struct parent_t {
    virtual ~parent_t() { }
};

struct child_t : parent_t {
    virtual ~child_t() { }
};

void f()
{
    object_t* a = new_with_proxy<empty_t>(parent_t()); 
    object_t* b = new_with_proxy<object_proxy_t<parent_t> >(child_t());

    std::cout
        << dynamic_cast<object_proxy_t<parent_t>*>(a) << '\n' // works
        << dynamic_cast<object_proxy_t<parent_t>*>(b) << '\n' // works
        ;
}

} 
```

这种方法对所涉及的类型的要求较少，但意味着需要做更多的工作来保持层次结构同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:31:19.407

基于 Bowie Owen 的第一个答案，我意识到虽然给定的类型可能不会派生自同一个类（它是一个库），但我可以强制这种情况发生：

```
struct ObjectProxyBaseType {
    virtual ~ObjectProxyBaseType() {}
};

template <class T>
class ObjectProxyType: public ObjectProxyBaseType, public T {
public:
  // allow construction via parameters
  template <typename... Args>
  ObjectProxyType(Args &&... args): T(std::move(args)...) {}

  // or construction via copy constructor
  ObjectProxyType(T *t): T(*t) {}

  virtual ~ObjectProxyType() {}
}; 
```

因此，如果我有 Child 类，我可以创建 的实例`ObjectProxyType<Child>`，这会导致它也继承`ObjectProxyBaseType`。其余代码遵循 Bowie 的建议：

```
class ObjectProxy: public Object {
protected:
  ObjectProxyBaseType *instance;
public:
  template <typename T>
  ObjectProxy(ObjectProxyType<T> *i) {
    instance = i;
  }

  template <typename T>
  ObjectProxy(T *value) {
    instance = new ObjectProxyType<T>(value);
  }

  template <typename T>
  T *castTo() const {
    return dynamic_cast<T *>(instance);
  }
}; 
```

还有一个有效的代码示例：

```
int main() {
    std::list<Object *> stack;
    stack.push_back(new ObjectProxy(new Child(1, 2)));
    callFn<Child>(stack, doSomething);

    stack.push_back(new ObjectProxy(new Child(5, 6)));
    callFn<Parent>(stack, doSomething);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:16:21.493

我最近不得不做一些类似的事情。我使用了一种对我有用的方法，但在这种情况下可能不合适；使用你的自由裁量权。这取决于您（或扩展此代码的人，如果有的话）完全了解哪些层次结构将用作模板参数。

因此，假设这些层次结构如下：

```
   类 Parent1
   类 Child1：公共 Parent1
   类 Child11：公共 Child1
   ...
   类 Parent2
   Child2 类：公共 Parent2
   ...

```

然后你建立一个持有者类。这有点复杂，原因很简单——我的编译器不支持函数的默认模板参数，所以我使用辅助结构来启用 SFINAE。

此类需要能够保存属于所有层次结构的对象（通过基类指针）。

```
class TypeHolder
{
template<class T, class E=void>
struct GetHelper
{
    static T* Get(const TypeHolder* th) { return nullptr; }
            //you can actually add code here to deal with non-polymorphic types through this class as well, if desirable
};

template<class T>
struct GetHelper<T, typename std::enable_if<std::is_polymorphic<T>::value, void>::type>
{
    static T* Get(const TypeHolder* th)
    {
        switch(th->type)
        {
            case P1: return dynamic_cast<T*>(th->data.p1);
            case P2: return dynamic_cast<T*>(th->data.p2);
                            //and so on...
            default: return nullptr;
        }
    }
};

template<class T, class E=void>
struct SetHelper
{
    static void Set(T*, TypeHolder* th) { th->type = EMPTY; }
};

template<class T>
struct SetHelper<T, typename std::enable_if<std::is_polymorphic<T>::value, void>::type>
{
    static void Set(T* t, TypeHolder* th)
    {
        th->data.p1 = dynamic_cast<Parent1*>(t);
        if(th->data.p1) { th->type = P1; return; }

        th->data.p2 = dynamic_cast<Parent2*>(t);
        if(th->data.p2) { th->type = P2; return; }

                    //...and so on

        th->type = EMPTY;
    }
};

public:
TypeHolder(): type(EMPTY) { }

template<class T>
T* GetInstance() const
{
    return GetHelper<T>::Get(this);
}

template<class T>
void SetInstance(T* t)
{
    SetHelper<T>::Set(t, this);
}

private:
union
{
    Parent1* p1;
    Parent2* p2;
            //...and so on
} data;

enum
{
    EMPTY,
    P1,
    P2
            //...and so on
} type;
}; 
```

顺便说一句，我们需要 SFINAE 技巧的原因是因为 dynamic_casts，它不会在非多态类型上编译。

现在你需要做的就是*稍微*修改你的类:)

```
class ObjectProxyBase
{
public:
    virtual const TypeHolder& GetTypeHolder() const = 0;
};

template<class T>
class ObjectProxy: public Object, public ObjectProxyBase
{
    T* instance;

    static TypeHolder th; //or you can store this somewhere else, or make it a normal (but probably mutable) member
public:
    ObjectProxy(T* t): instance(t) { }

    T* getInstance() const { return instance; }

    const TypeHolder& GetTypeHolder() const { th.SetInstance(instance); return th; }

    //... and the rest of the class
};

template<class T>
TypeHolder ObjectProxy<T>::th; 
```

我希望这段代码实际上是正确的，因为我主要将它输入到浏览器窗口中（我使用了不同的名称）。

现在是最后一块：函数。

```
template <typename C>
void callFn(std::list<Object *> &stack, std::function<void (C*)> fn) {
    Object *value = stack.front();
    stack.pop_front();

    ObjectProxyBase *proxy = dynamic_cast<ObjectProxyBase *>(value);
    if (proxy == nullptr) {
        throw std::runtime_error("dynamic cast failed");
    }

    C* heldobj = proxy->GetTypeHolder().GetInstance<C>(); //I used to have a dynamic_cast here but it was unnecessary
    if (heldobj == nullptr) {
        throw std::runtime_error("object type mismatch");
    }

    fn(heldobj);
} 
```

您只需要对层次结构使用这种方法，在其他情况下仍然可以`dynamic_cast`直接使用 to （基本上，您需要同时尝试两种方法，看看是否成功）。`ObjectProxy`<C>`*`

我希望这至少有点帮助。

# wpf - VS 2012 挂起加载 XAML 设计器

> ID：13752306
> 
> 赞同：3
> 
> 时间：2012-12-06T20:50:41.660
> 
> 标签：wpf, visual-studio-2012

我们做 MVVM 并在我们的 WPF 项目中使用 DI。现在我们正在开发 VS 2012。每当我们打开视图（XAML 表单）时，XAML 设计器都会显示加载消息。然后，每当我们尝试更改 XAML 代码面板时，VS 就会挂起（虽然它在加载消息时被冻结）。XDesProc.exe 占用大约 13% 的 CPU（因为我有 8 个核心，所以它占用了 100% 的核心）。当我关闭它时，VS 会停止。但是，如果您更改 XAML 代码，则会再次重复该场景。

在同样的情况下，我们对 VS 2010 没有任何问题。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T04:07:13.220

此线程中描述了一种解决方法：

[Visual Studio 2012 在编辑 XAML 时挂起](https://stackoverflow.com/questions/17442527/visual-studio-2012-hangs-on-editing-xaml)

总而言之，您可以使 VS 不使用 XAML 设计器，而只需使用常规源编辑器：

1.  在解决方案资源管理器中右键单击 XAML 文件
2.  选择“打开方式...”
3.  选择“源代码（文本）编辑器”
4.  点击“设为默认值”
5.  点击确定
6.  你完成了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T10:03:42.820

我对我的一个观点有同样的问题。这不是一个真正的解决方案，但我注意到，当我注释掉 DataContext 属性时，cpu 负载消失了。

1.  打开 Xaml 文件（cpu 负载上升）
2.  使用 viewmodel 绑定注释掉 DataContext 属性
3.  在 TaskManager 中杀死 XDescProc.exe
4.  重新加载设计器（无 CPU 负载）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:19:23.393

尝试安装 Visual Studio [Update 1](http://www.microsoft.com/visualstudio/eng/visual-studio-update)的最新更新。如果更新后仍然存在，请将问题提交给[Microsoft Connect](https://connect.microsoft.com/VisualStudio)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T07:53:29.390

我们电脑的 VS2012 已经更新到更新 4，但它仍然挂在加载 XAML 设计器..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T10:10:44.217

请确保，如果您在构造函数中有任何代码或可能在设计器中执行的任何其他代码，您会检测到设计模式并且不执行该代码。

您可能正在连接到数据源，而设计人员可能对此感到窒息。

请参阅：[有没有办法检查 WPF 当前是否在设计模式下执行？](https://stackoverflow.com/questions/834283/is-there-a-way-to-check-if-wpf-is-currently-executing-in-design-mode-or-not)

# dojox.grid.datagrid - Dojox Datagrid，向每个单元格添加跨度以使 css nowrap 在 IE7 中工作

> ID：13752310
> 
> 赞同：0
> 
> 时间：2012-12-06T20:51:10.147
> 
> 标签：dojox.grid.datagrid

由于 td 元素上的 nowrap 似乎在 IE 中不起作用，请参阅[这个问题](https://stackoverflow.com/questions/5280521/css-white-space-nowrap-does-not-seems-to-work-in-ie?rq=1)，我迫切需要帮助如何在 Dojox Datagrid 中的每个单元格中添加一个带有 nowrap 的 span 元素，而无需定义字段格式化程序来完成此操作。

在这里查看 jsfiddle [http://jsfiddle.net/HkxHZ/4/](http://jsfiddle.net/HkxHZ/4/)

使用这个 css 我在 Chrome 和 FF 中得到了我想要的，即没有自动换行和溢出隐藏。但它在IE中不起作用..

```
<style type="text/css">

.dojoxGridRowTable {
    table-layout: fixed;
    width: 0px;}

.dojoxGrid .dojoxGridCell {
    text-align: left;
    overflow:hidden;
    white-space:nowrap;}

</style>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:20:54.250

这种方法就像自动调整大小一样，它将使 DataGrid 中每一列的宽度足够大，以显示您的数据而无需换行。

您应该做的是根据列描述中文本的 PX 大小和该列的数据计算网格布局的每一列的适当宽度。这应该在创建网格布局之前完成。

以下是如何获得以 px 为单位的正确宽度。将以下 html 添加到您的页面：css：

```
 #test
   {
   position: absolute;
   visibility: hidden;
   height: auto;
   width: auto;
   }

   <div id="test"></div> 
```

1) 获取 DataGrid 中使用的字体大小

2) 获取 div 对象并将字体大小设置为网格中使用的大小

```
 <div id="test"></div>

 var tst_item = window.document.getElementById("test");
 tst_item.style.fontSize = grid_fnt_sz; 
```

3) 将用于 DataGrid 的每个列描述和数据项放入隐藏的 div 中：

```
 tst_item.innerHTML = "Your data";
 var widthPX = (tst_item.clientWidth + 1); //Width of text in PX 
```

将此 widthPX 存储在每个列的数组中，仅保留为该列找到的最大宽度。

4) 在为网格创建布局时，将列的宽度设置为列描述和该列数据中的最大宽度。

此方法可确保每列的宽度足够大以显示您的数据而无需换行。根据您的需要，您可以调整逻辑来做您需要的事情。对于大量数据，这可能不可行。但是，它对我很有用。

# python - Python subprocess.Popen 挂起

> ID：13752312
> 
> 赞同：0
> 
> 时间：2012-12-06T20:51:12.147
> 
> 标签：python, subprocess, freeze

我查看了之前提出的问题，但没有找到类似的问题。我错过了一个，请告诉我，我很抱歉再次问同样的问题。

我正在调试执行以下代码（python 2.6）时出现 Popen 挂起的问题：

```
#!/usr/bin/env python
import subprocess
cmd = 'service drbd start'
rc  = subprocess.call(cmd.split(), stdout=subprocess.PIPE, stderr=subprocess.STDOUT) 
```

如果我改用“调用”阻塞方法，也会发生这种情况。此问题目前仅在此一个节点上发生。它运行 Suse SLES 11 SP1。

故障节点上的 strace 显示如下：

```
<snip>
fstat(5, {st_mode=S_IFREG|0644, st_size=22808, ...}) = 0
open("/usr/lib64/python2.6/lib-dynload/cStringIO.so", O_RDONLY) = 6
read(6, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\0\34\0\0\0\0\0\0"..., 832) =832
fstat(6, {st_mode=S_IFREG|0644, st_size=22808, ...}) = 0
mmap(NULL, 2117912, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 6, 0) = 0x7f0cd5987000
fadvise64(6, 0, 2117912, POSIX_FADV_WILLNEED) = 0
mprotect(0x7f0cd598b000, 2093056, PROT_NONE) = 0
mmap(0x7f0cd5b8a000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 6, 0x3000) = 0x7f0cd5b8a000
close(6)                                = 0
mprotect(0x7f0cd5b8a000, 4096, PROT_READ) = 0
close(5)                                = 0
close(4)                                = 0
getrlimit(RLIMIT_NOFILE, {rlim_cur=1024, rlim_max=1024}) = 0
close(3)                                = 0
pipe([3, 4])                            = 0
pipe([5, 6])                            = 0
fcntl(6, F_GETFD)                       = 0
fcntl(6, F_SETFD, FD_CLOEXEC)           = 0
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0cd793e9d0) = 27688
close(6)                                = 0
close(4)                                = 0
mmap(NULL, 1052672, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0cd5886000
read(5, "", 1048576)                    = 0
mremap(0x7f0cd5886000, 1052672, 4096, MREMAP_MAYMOVE) = 0x7f0cd5886000
close(5)                                = 0
munmap(0x7f0cd5886000, 4096)            = 0
fcntl(3, F_GETFL)                       = 0 (flags O_RDONLY)
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0cd794a000
lseek(3, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
munmap(0x7f0cd794a000, 4096)            = 0
wait4(27688, 
```

它就挂在这里。对应的流程是：

```
root     27688 27659  0 15:34 pts/2    00:00:00 /bin/sh /sbin/service drbd start
root     27690 27688  0 15:34 pts/2    00:00:00 /bin/bash /etc/init.d/drbd start 
```

以下是相同代码在另一个节点上的输出：

```
<snip>
fstat(5, {st_mode=S_IFREG|0644, st_size=22808, ...}) = 0
open("/usr/lib64/python2.6/lib-dynload/cStringIO.so", O_RDONLY) = 6
read(6, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\0\34\0\0\0\0\0\0"..., 832) = 832
fstat(6, {st_mode=S_IFREG|0644, st_size=22808, ...}) = 0
mmap(NULL, 2117912, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 6, 0) = 0x7f57b3833000
fadvise64(6, 0, 2117912, POSIX_FADV_WILLNEED) = 0
mprotect(0x7f57b3837000, 2093056, PROT_NONE) = 0
mmap(0x7f57b3a36000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 6, 0x3000) = 0x7f57b3a36000
close(6)                                = 0
mprotect(0x7f57b3a36000, 4096, PROT_READ) = 0
close(5)                                = 0
close(4)                                = 0
getrlimit(RLIMIT_NOFILE, {rlim_cur=1024, rlim_max=1024}) = 0
close(3)                                = 0
pipe([3, 4])                            = 0
pipe([5, 6])                            = 0
fcntl(6, F_GETFD)                       = 0
fcntl(6, F_SETFD, FD_CLOEXEC)           = 0
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f57b57ea9d0) = 32277
close(6)                                = 0
close(4)                                = 0
mmap(NULL, 1052672, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f57b3732000
read(5, "", 1048576)                    = 0
mremap(0x7f57b3732000, 1052672, 4096, MREMAP_MAYMOVE) = 0x7f57b3732000
close(5)                                = 0
munmap(0x7f57b3732000, 4096)            = 0
fcntl(3, F_GETFL)                       = 0 (flags O_RDONLY)
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f57b57f6000
lseek(3, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
munmap(0x7f57b57f6000, 4096)            = 0
wait4(32277, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 32277
--- SIGCHLD (Child exited) @ 0 (0) ---
close(3)                                = 0
rt_sigaction(SIGINT, {SIG_DFL, [], SA_RESTORER, 0x7f57b50386a0}, {0x7f57b52d88f8, [], SA_RESTORER, 0x7f57b50386a0}, 8) = 0
exit_group(0)                           = ? 
```

我无法弄清楚这个节点有什么问题？为什么这个命令挂在第一个节点上而不是第二个节点上（运行完全相同的操作系统和 python 版本）？

任何帮助将不胜感激。

先感谢您，

D.

PS。如果有人想要任一节点的完整 strace 输出，请告诉我。我只能在星期一之前让这台机器保持这种状态:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:26:18.103

使用是错误的`subprocess.call(...stdout=PIPE)`。这会将标准输出重定向到管道，但当前进程没有读取该管道，因此子进程将在输出超过 N 个字节的数据后阻塞（N 取决于操作系统）。

你想要的是`subprocess.check_output()`.

# javascript - JavaScript settimeout 函数的问题

> ID：13752324
> 
> 赞同：1
> 
> 时间：2012-12-06T20:51:49.523
> 
> 标签：javascript

我对 JavaScript 很陌生，似乎无法让 setTimeout 命令做任何事情。我知道这已经被问过很多次了，但是我花了两个小时查看以前的所有案例，但它仍然不适合我。这是我目前得到的：

```
<html>
    <script type="text/javascript">

    var i = 0;
    function aloop() {
        document.write(i);
        i++;
    }

    function afunction() {
        if (i <= 12) {
            setTimeout(aloop(), 1000);
            afunction();
        }
    }

    </script>

    <form>
    <input type=submit value="Click me!" onClick="afunction()">
</html> 
```

谁能告诉我我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:53:10.647

将函数传递给`setTimeout`，而不是函数调用的返回值。

```
setTimeout(aloop,1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:59:42.997

您没有描述什么不起作用，但我假设您希望`i`以 1000 毫秒的间隔写入。

做这个：

```
<html>
 <!-- you're missing your head tags -->

<head>
    <title> my page </title>

    <script type="text/javascript">
    var i=0;
    function aloop() {
          // don't use document.write after the DOM is loaded
        document.body.innerHTML = i;
        i++;
        afunction(); // do the next call here
    }
    function afunction() {
        if (i<=12) {
                 //     v---pass the function, don't call
            setTimeout(aloop,1000);

      //    afunction();  // remove this because it'll call it immediately
        }
    }
    </script>
</head>

<!-- you're missing your body tags -->
<body>
    <form>
        <input type=submit value="Click me!" onClick="afunction()">
    </form> <!-- you're missing your closing form tag --> 
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T20:53:25.247

问题是你*调用*你的函数而不是*排队*你的函数。

`setTimeout(aloop, 1000)` **不是** `setTimeout(aloop(), 1000);`

# yii - 使用 Cdbcriteria 的自定义查询

> ID：13752327
> 
> 赞同：0
> 
> 时间：2012-12-06T20:52:04.000
> 
> 标签：yii

如何使用 CDbCriteria 和 CActiveDataProvider 执行此查询？

```
'SELECT * FROM tbl_post where title LIKE %'.$title.'% ORDER BY title LIKE '.$title.' DESC , title LIKE '.$title.'% DESC' 
```

**更新：** 最后我写了这个：

```
$criteria = new CDbCriteria;
                    $criteria->addCondition('title LIKE :title');                        
                    $criteria->params = array(':title'=>'%'.$title.'%',':t1'=>$title,':t2'=>$title.'%');;
                    $criteria->order='title LIKE :t1 DESC , title LIKE :t2 DESC'; 
```

但我得到了错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: SELECT COUNT(*) FROM `tbl_post` `t` WHERE title LIKE :title 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:01:27.100

This can be achieved like this:

```
 $dataProvider=new CActiveDataProvider('tbl_post', array(
    'criteria'=>array(
    'condition'=>'title LIKE % '.$title.' %',
    'order'=>'title DESC',
    ),
   ));

    $dataProvider->getData(); 
```

also refer : [Help](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider)

Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:16:25.917

尝试使用 compare 子句，不确定您是否想要 'order by x like' ：

```
<?php
$criteria = new CDbCriteria;
$criteria->compare('title', $title, true);
$criteria->order = 'title DESC';
$dp = new CActiveDataprovider('posts', array(
  'criteria' => $criteria
)); 
```

# php - 无法在 PHP 中正确使用正则表达式

> ID：13752334
> 
> 赞同：1
> 
> 时间：2012-12-06T20:52:22.380
> 
> 标签：php, regex

我是正则表达式的新手，我正在使用正则表达式进行一些表单验证。但问题是大多数正则表达式都像

```
^(?=.{8})(?=.*[A-Z])(?=.*[a-z])(?=.*\d.*\d.*\d)(?=.*[^a-zA-Z\d].*[^a-zA-Z\d].*[^a-zA-Z\d])[-+%#a-zA-Z\d]+$ 
```

我用于密码验证的这个。对于其他表单验证，我在这里发现了很多这样的表达式。现在的问题是当我在我的代码中使用它们时，如下所示

```
if(preg_match('^(?=.{8})(?=.*[A-Z])(?=.*[a-z])(?=.*\d.*\d.*\d)(?=.*[^a-zA-Z\d].*[^a-zA-Z\d].*[^a-zA-Z\d])[-+%@#a-zA-Z\d]+$', $password)) 
```

我得到至少一个错误。大多数时候它显示错误没有结束分隔符或未知修饰符等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:55:52.230

您的表达式周围没有分隔符。

试试这个：

```
$pattern = '/^(?=.{8})(?=.*[A-Z])(?=.*[a-z])(?=.*\d.*\d.*\d)(?=.*[^a-zA-Z\d].*[^a-zA-Z\d].*[^a-zA-Z\d])[-+%#a-zA-Z\d]+$/';
preg_match ($pattern, $password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:44:13.463

直接回答：您的表达式没有分隔符。PCRE 抓取第一个字符并假设它是分隔符，并抛出错误，因为它在正则表达式的末尾`^`没有找到关闭。`^`

间接回答：就像 Andy-Lester 评论的那样，您的正则表达式过于复杂，对于任何不是正则表达式大师的人来说，几乎无法阅读。我使用以下更具可读性和可维护性的内容。

```
$req_regex = array(
    '/[A-Z]/',      //uppercase
    '/[a-z]/',      //lowercase
    '/[^A-Za-z]/'   //non-alpha
);

foreach($req_regex as $regex) {
    if( !preg_match($regex, $password) ) {
        return NULL;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:58:41.510

您给出的表达式的问题是表达式周围没有分隔符。

对于复杂的正则表达式，最好是零碎地构建它们。我发现 Firefox 的插件（https://addons.mozilla.org/en-us/firefox/addon/rext/）很有用。

# c++ - 如何将成员函数传递给采用函数指针的组合成员？

> ID：13752337
> 
> 赞同：0
> 
> 时间：2012-12-06T20:52:33.847
> 
> 标签：c++, composition, member-function-pointers

我有下面的类，它会为我评论的行产生此错误： 描述无效参数'候选者是：Eigen::Matrix Forward_Euler(double ( *)(double), double (* )(double), double (*)(double)) ' 当我试图寻找解决方案时，我感到很困惑。

Forward Euler 的签名是：

```
Eigen::MatrixXd Forward_Euler(double (*f)(double), double (*gleft)(double), double (*gright)(double)) 
```

我的课是：

```
class C
{
protected:
    A x;
    B y;
    double a;
    double b;
    Eigen::MatrixXd u;

public:
    double f(double x)
    {
        return a;
    }
    double gleft(double tau)
    {
        return b
    }
    double gright(double tau)
    {
        return a*b;
    }
    FD_Euro_Put(): x(), y(), a(0), b(0){}
    FD_Euro_Put(char y1, double y2, double y3, double y4, double x2,
            double x3, double x4, double x5, double x6, double x7):
            x(x1, x2, x3, x4, x5, x6, x7)
    {
        double Xleft = x1*x2;
        double Xright = x1*x3;
        double Tauf = x1*x1;
        double NN = floor((x1/x2);
        a = x1*x2 - 0.5;
        b = x1*x2 + 0.5;

        pde = HeatPDE(y1, NN, Xleft, Xright, Tauf, Alpha); //begin problem area
        u.resize(pde.N+1, pde.M+1); 
        if(fdtype == 'f')
            u = pde.Forward_Euler(&f, &gleft, &gright);
        else if(fdtype == 'b')
            u = pde.Backward_Euler(&f, &gleft, &gright);
        else if(fdtype == 'c')
            u = pde.Crank_Nicolson(&f, &gleft, &gright); //end problem area
        else
            cout << "Incorrect choice for finite difference type!" << endl;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:56:06.253

成员函数指针和函数指针不是一回事。成员函数指针的工作要困难得多，需要处理虚函数和`this`指针之类的事情。

但是看看你班上的函数！它们不是真正的对象函数，因为它们不使用对象中的任何内容。您可以将它们移出类或使它们`static`成为类的功能。如果您执行其中任何一项操作，则可以将它们用作函数指针。

我认为您必须使用类模板和静态函数。您可以提供参数作为模板参数。

# sql - 如何计算重叠的假期天数？

> ID：13752339
> 
> 赞同：0
> 
> 时间：2012-12-06T20:52:42.943
> 
> 标签：sql, sql-server-2008

我在 SQL Server 中有一个 Timesheet 表，用于存储人员角色

```
CREATE TABLE [dbo].[TimeSheetTable](
[pk_TimeSheetID] [bigint] IDENTITY(1,1) NOT NULL,
[fk_PersonelID] [int] NOT NULL,
[StartDate] [datetime] NOT NULL,
[EndDate] [datetime] NOT NULL,
[fk_RoleID] [int] NOT NULL,
[Comments] [nvarchar](2000) NULL,
[dateCreated] [datetime] NOT NULL,
[CreatedBy] [int] NULL, 
```

有时，员工可以休假，从 2012 年 10 月 28 日到 2012 年 11 月 2 日，有重叠的月份。在上面的示例中，员工在 10 月有 4 天，在 11 月有 3 天。

我的问题是编写一个查询来计算每个人休假的天数。如果结束日期超过月份，则不应计算在内。

```
SELECT TOP 1000 
  sum(DATEDIFF(day,startdate,EndDate))
FROM [db_ASCO_Personel].[dbo].[TimeSheetTable]
where fk_RoleID=51  /* how do I count leave days that over lap between two months*/ 
```

第 17 行 11 月有 1 天，12 月有 2 天（总共 3 天假期）。我如何计算每个员工仅 1 个月的休假天数？

## TimeSheetID StartDate EndDate RoleID Comments dateCreated CreatedBy

2012 年 8 月 6 日 15 日 2012 年 8 月 7 日 51 03:10.6 NULL 2012 年 8 月 1 日 16 日 2012 年 8 月 2 日 51 03:31.5 NULL 2012 年 11 月 29 日 17 日 2012 年 12 月 3 日 51 51:15.5 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:10:15.123

我只是抓取数据并用 c# 计算并放入一个新表中（或对这些值做任何需要做的事情）

但是，如果您可以确定假期时间**永远不会**超过一个月（例如开始时间是一月，结束时间永远不会晚于二月），那么您可以做一些其他事情

```
SELECT TOP 1000 CASE 
                  WHEN month(startDate) = month(enddate)
                     THEN sum(DATEDIFF(day,startdate,EndDate)) as daymonth1, 0 as daysmonth2
                  ELSE  sum(DATEDIFF(day,startdate,EndDate)) - day(enddate) as daymonth1,day(enddate) as daysmonth2 
                END
FROM [db_ASCO_Personel].[dbo].[TimeSheetTable]
where fk_RoleID=51 
```

检查该语法，因为我在这个 comp 上没有 ssms 来全面测试

编辑：对 powaga：除非我很愚蠢，否则他做了（只是不清楚）他说他想返回 4 和 3 而不是 7 ......他希望得到的天数是每月而不是天数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:10:50.857

您需要知道月份的开始和结束。像这样的东西：

```
with const as (
    select cast('2012-09-01' as date) as MonthStart, cast('2012-09-30' as date) as MonthEnd
   )
select sum(DATEDIFF(day,
                    (case when startdate < const.MonthStart then const.MonthStart else startdate end), 
                    (case when enddate > const.MonthEnd then const.MontEnd else ndDate end)
          )
FROM [db_ASCO_Personel].[dbo].[TimeSheetTable] tst cross join
     const
where fk_RoleID=51 and
      startdate <= const.MonthEnd and
      enddate >= const.MonthStart 
```

# c++ - 相当于 Visual Studio 中位集的 .Find_first 方法

> ID：13752340
> 
> 赞同：0
> 
> 时间：2012-12-06T20:52:44.407
> 
> 标签：c++, visual-studio, gcc, bitset

标题几乎概括了它。

在 gcc 中，您可以使用`.Find_first()`bitset 上的方法来获取第一个有效位的位置。Visual Studio 中是否有任何等价物？

我知道您可以`_BitScanForward64`在 Visual Studio 中使用来获取第一个有效位，但我使用大于 64 的位集，并且此方法仅适用于 64 位整数。

我也对 De Bruijn bit twiddling 方法不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:47:16.757

```
template<size_t N>
size_t highbit( bitset<N> const& bs ) {
  auto str = bs.template to_string< char, char_traits<char>, allocator<char> >();
  size_t retval = 0;
  for(auto it = str.begin(); it != str.end(); ++it, ++retval)
  {
    if (*it == '1')
      return retval;
  }
  return retval;
} 
```

No bit twiddling, as requested. Returns `N` if the bits are all zeros.

Personally, I would recommend bit twiddling instead.

# mysql - 在 MySQL 中跟踪数据更改（更新/删除）

> ID：13752343
> 
> 赞同：1
> 
> 时间：2012-12-06T20:52:52.457
> 
> 标签：mysql, data-tracing

我有一个数据库模式，其中用户数据使用外键引用存储，这些外键是管理员定义的。此外，有一些数据没有主键存储，但是我有其他约束来避免冗余和其他问题。

由于用户“更新”他们的信息时应用程序的要求，我必须从“更新”表中删除所有用户记录并再次重新插入所有用户记录。（我已经研究了所有其他选项）

现在由于我的搜索解决方案 (solr)，我需要跟踪对用户数据的更改（更新/删除）。我正计划将最后提交的数据与实时数据进行比较。我担心每 20 分钟左右运行一个存储过程会是多么可持续，有没有更好的方法来使用 SQL 跟踪数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:03:54.283

您可以创建一个更改表，其中包含与原始表相同的列以及另一个名为“UpdatedOn”的列。然后设置一个触发器，以便在更改原始表时将原始值写入此更改表。

示例：原始表：

```
Name | Address | City
Jane Doe | 1 Main St. | New York 
```

更改为原始表：

```
Name | Address | City
Jane Doe | 2 Smith St. | Dubuque 
```

...触发对更改表的插入：

```
Name | Address | City | UpdatedOn
Jane Doe | 1 Main St. | New York | 2012-01-01 
```

这里有关于在 mysql 中使用触发器的信息：http: [//dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

# c# - Open XML (Microsoft Word)：C# 表格对齐

> ID：13752347
> 
> 赞同：1
> 
> 时间：2012-12-06T20:53:00.417
> 
> 标签：c#, ms-word, openxml

如何在打开的 xml 中将我的表格对齐在 word 文档的中间？
这是我的代码，我想在中间对齐表格。

这是我的代码。我正在尝试使用 TableJustification，但它似乎不起作用

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Create(filepath, WordprocessingDocumentType.Document))
            {
                MainDocumentPart mainPart = wordDoc.AddMainDocumentPart();
                mainPart.Document = new Document();
                Body body = mainPart.Document.AppendChild(new Body());

                Run run = new Run();
                // Goes through all of the forms
                foreach (var form in forms)
                {

                    Table table = new Table();
                    // Initialize all of the table properties
                    TableProperties tblProp = new TableProperties(
                        new TableBorders(
                            new TopBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                            new LeftBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                            new RightBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                            new BottomBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 }
                        )

                    );

                    // Align the table to the center
                    TableJustification justs_center = new TableJustification() { Val = _____  };

                    table.AppendChild(justs_center);
                    table.AppendChild<TableProperties>(tblProp);

                    Paragraph para = body.AppendChild(new Paragraph());
                    Run run_header = para.AppendChild(new Run());
                    RunProperties runProps = run_header.AppendChild(new RunProperties(new Bold()));

                    string username = form.Username;
                    string proces_header = form.HeaderTitle;

                    run_header.AppendChild(new Text(proces_header + " | " + username));

                    for (int i = 0; i < form.FieldList.Count; i++)
                    {
                        if (!(form.FieldList[i].Token == "USR" || form.FieldList[i].Token == "SNT"))
                        {
                            TableRow tr = new TableRow();

                            TableCell header_cell = new TableCell();

                            header_cell.Append(new Paragraph(new Run(new Text(form.FieldList[i].Label + ": " + form.FieldList[i].Value))));

                            tr.Append(header_cell);
                            table.Append(tr);
                        }
                    }
                    wordDoc.MainDocumentPart.Document.Body.Append(table);

                }

                mainPart.Document.Save();
                wordDoc.Close();
                return "Success";
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:14:52.083

```
Table t = new Table(
    new TableProperties(
        ...
        new TableJustification() { Val =  TableRowAlignmentValues.Center},
        ...),
    new TableRow(...),
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-01T16:33:17.170

试图以接受的答案居中表格似乎不起作用。我还需要将中心对齐应用于所有行

```
var t = new Table();
var tableProps = new TableProperties();
tableProps.TableJustification = new TableJustification { Val = TableRowAlignmentValues.Center };
t.Append(tableProps);

var row = new TableRow();
var rowProps = new TableRowProperties();
rowProps.Append(new TableJustification { Val = TableRowAlignmentValues.Center });
row.Append(rowProps); 
```

使用 Open XML Productivity Tool 找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T08:53:00.933

实际上，您只需要将中心对齐应用于 TableRowProperties 中的所有行。即使您不在 TableProperties 中应用对齐方式，表格也将居中。如果有人知道，我很想知道在 TableRowProperties 中证明的目的是什么。

# solr - 如何在 Spring (Java) 中使用 Solr 和 myBatis 配置事务？

> ID：13752351
> 
> 赞同：0
> 
> 时间：2012-12-06T20:53:15.343
> 
> 标签：solr, transactions, mybatis, jta

我有一个 Java Spring 3.0 应用程序，它通过 myBatis 3.1 在数据库中插入数据，还使用 ​​DataImportHandler (DIH) 让 Solr 3.6.1 索引该数据库数据以及索引二进制文件附件。因此，如果以下任何一项失败，我希望有回滚更改的事务：

1) 3 次使用 myBatis 插入数据库

2) 3 个刀片的 solr DIH 索引

3）二进制文件的solr索引

我猜我需要使用 JTA，因为我有多个数据源，但我不知道如何在混合中使用 Solr 进行配置。如何才能做到这一点？任何演示如何完成此操作的在线参考资料也很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:46:36.233

我之前问过一个类似的 Solr 事务管理问题。以下链接会有所帮助。

[使用 solrj 进行 solr 事务管理](https://stackoverflow.com/questions/10805117/solr-transaction-management-using-solrj)

[SolrJ 线程安全](https://stackoverflow.com/questions/3371101/solrj-thread-safety/6737063#6737063)

希望这可以帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:44:45.753

您也可以尝试使用 替换索引的 DIH 更新，`HttpSolrServer`以便您可以使用弹簧`TransactionSynchronizationManager`

```
if (TransactionSynchronizationManager.isSynchronizationActive()) {
  TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {
    //... 
  });
} 
```

# c# - 使用 LINQ 的实体计数

> ID：13752357
> 
> 赞同：2
> 
> 时间：2012-12-06T20:53:32.820
> 
> 标签：c#, entity-framework, linq-to-entities

我有这个查询，它给了我一个用户所属的所有俱乐部的列表。有 3 个实体 User、Club、ClubMember。有一个多对多的关系，ClubMember 作为俱乐部和用户之间的关联。

```
 var clubs = db.Users
               .Where(u => u.UserName == User.Identity.Name)
               .SelectMany(u => u.ClubMembers)
               .Select(m => m.Club)
               .ToList(); 
```

在表格的每一行，我将包含一个链接，以显示俱乐部的其他成员。所以表格行看起来像这样；

```
Club1 - This is club one - "show all members"
Club2 - This is club two - "show all members" 
```

现在我想做的是包含在“显示所有成员”链接中，包括成员的数量，所以它看起来像这样。

```
Club1 - This is club one - "show all members (25)"
Club2 - This is club two - "show all members (14)" 
```

所以我的问题是如何修改查询以返回每个俱乐部的会员总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:59:29.530

可以肯定地说，在 Club 对象上也存在一个 ClubMembers 列表。因此，您的查询语句应该是这样的：

```
var clubs = db.Users
.Where(u => u.UserName == User.Identity.Name)
.SelectMany(u => u.ClubMembers)
.Select(m => new SomeType{ Club = m.Club, NumberOfMembers = m.Club.ClubMembers.Count()})
.ToList(); 
```

# visual-c++ - 使用Haversine公式计算两个城市的距离-如何处理负经度

> ID：13752360
> 
> 赞同：0
> 
> 时间：2012-12-06T20:53:37.857
> 
> 标签：visual-c++, distance, haversine

我将使用 Haversine 公式找到两个城市之间的距离。下面是VC++中的代码。

但我找不到点 (18.567367, -68.363431) 和 (33.636719,-84.428067) [第一个值是纬度，第二个是经度] 之间的距离。它给出了类似-1.#IND的东西。

你能告诉我如何处理这个问题吗？

下面是代码：

```
double deg2rad(double deg) {
  return (deg * pi / 180);
};

double TravelDistance(double lat1d, double lon1d, double lat2d, double lon2d) {
  double lat1r, lon1r, lat2r, lon2r, u, v,dblDistance;
  lat1r = deg2rad(lat1d);
  lon1r = deg2rad(lon1d);
  lat2r = deg2rad(lat2d);
  lon2r = deg2rad(lon2d);
  u = sin(lat2r - lat1r);
  v = sin(lon2r - lon1r);

 return ( 2.0 * earthRadiusKm * asin(sqrt(u * u + cos(lat1r) * cos(lat2r) * v * v)))}; 
```

预先感谢....！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:20:08.873

看着

[http://en.wikipedia.org/wiki/Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

看来您忘记在 u 和 v 的 sin() 参数中除以 2。

您得到的答案很可能是因为 sqrt 参数 < 0 或 asin 参数 > 1。

# node.js - VirtualBox CentOS机器上的node.js，没有连接？

> ID：13752362
> 
> 赞同：2
> 
> 时间：2012-12-06T20:53:48.577
> 
> 标签：node.js, centos, virtualbox, remote-debugging

我在 VirtualBox 机器中设置了一个 CentOS 6.3 Box，安装了 node.js 和 npm，并编写了一个示例“Hello World”应用程序，它侦听端口 8080 和 IP“192.168.10.132”（这是 CentOS 机器的 IP） . 服务器正常启动，但在我的主机（Mac OS X 10.0.7）上的 192.168.10.132:8080 下，我总是收到错误消息。

我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:56:52.670

通常我会遇到这样的问题，因为我没有在 iptables 中打开端口。

以下命令将端口添加到 iptables

```
iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT -m comment --comment "node.js port" 
```

然后确保保存您当前的配置。

```
service iptables save 
```

那么你需要重新启动 iptables

```
service iptables restart 
```

欲了解更多信息，请在此处查看 iptables 文档：[http ://wiki.centos.org/HowTos/Network/IPTables](http://wiki.centos.org/HowTos/Network/IPTables)

# asp.net-mvc-3 - ASP.NET MVC3 维护导航历史

> ID：13752365
> 
> 赞同：6
> 
> 时间：2012-12-06T20:54:03.960
> 
> 标签：asp.net-mvc-3

*上下文* 我的系统有许多相关实体，例如租户 -> 客户 -> 活动 -> 等...

每个实体都有一个“索引”视图，可以搜索、分页和链接到编辑/详细信息/删除。在每个实体的“详细信息”视图中，我有显示实体详细信息（只读）的选项卡以及用户可以搜索的任何子实体的附加选项卡，页面并具有指向编辑/详细信息/删除的链接。这允许用户“向下”导航树（可以这么说）。

*问题* 从树上下来是一种我无法弄清楚的治疗。

例如，转到 tentant -> Clients 选项卡。按名称搜索客户，然后单击该客户的“详细信息”链接。然后转到客户端 -> 广告系列，搜索一个广告系列，然后点击该广告系列的“编辑”。进行更改并提交表格。我可以通过“广告系列/索引”或“客户/详细信息 -> 广告系列选项卡”访问此“编辑”视图。那么如何维护这个导航历史呢？我正在开发的系统可以深入 6 个级别，我需要一些可以一直工作并再次备份的东西。如果我可以维护有关每个调用页面状态的详细信息，例如。搜索条件、页码、活动标签等都是理想的，但考虑到它的复杂性，我会很高兴回到正确的页面和标签。

最坏的情况是“用户”，可以通过 4 个不同的调用页面访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T21:20:44.193

您能否不将 URL 存储在（服务器端）数组中并在遍历树时将它们推入。当你回来时，你可以将它们一个一个地从阵列中“弹出”出来。如果用户按下后退按钮，您可以在执行操作时进行交叉检查，或者通过定时 JavaScript AJAX 调用将当前 URL 传递给服务器，这可能有助于保持数组最新。

# php - 将 PDO (InnoDB) 事务传递给新类

> ID：13752368
> 
> 赞同：1
> 
> 时间：2012-12-06T20:54:12.520
> 
> 标签：php, mysql, transactions, pdo, innodb

我有一个类可以爬取页面并从页面中收集信息。然后它开始一个事务并开始将信息添加到不同的表中（以确保所有或不更新所有信息，因为我遇到了多卷曲并不总是返回完整页面的一些问题）。然后，如果保存的内容是新的，则该类调用通知类，该类将这些通知保存到数据库并发送电子邮件。我希望保存在通知类中的信息作为原始事务的一部分包含在内，因此如果稍后出现故障，用户将不会收到通知。

我想我只需将当前的 pdo 句柄（带有打开的事务）传递给我的新通知类并从那里开始工作。当我使用这个 pdo 句柄插入行、回滚并从通知类退出脚本时，插入的行会粘在数据库中（即不回滚）。我确认在原类中使用相同pdo句柄插入的数据成功回滚。我想我会尝试在通知类中启动一个事务（尽管这对于应用程序的结构来说并不理想），但我得到了一个 PDOException 'There is already a active transaction'。

我不想（也不认为我需要）显示太多代码，但这就是正在发生的事情。爬行.php

```
$this->dbh; // connect
$this->dbh->beginTransaction();
$this->doStuff->execute(); // does rollback
$Notifications = new Notifications($id,$this->dbh); 
```

通知.php

```
function __construct($id,$dbh) {
   $this->dbh = $dbh;
   // $this->dbh->beginTransaction(); -- transaction already started
   $this->addRows->execute(); // does not roll back
   $this->dbh->rollBack();
   exit;
} 
```

**更新 1** 我尝试查询 'SET autocommit=0' 然后 'ROLLBACK' 但我得到了相同的结果。

**更新 2** 我使用以下代码检查通知类是否在事务中，并且毫不奇怪地输出“事务中”。

```
 if($this->dbh->inTransaction()) {
    echo 'in transaction';
 } 
```

**更新 3** 最终更新，希望如此。从 notification.php 发出的 PDO 查询插入到不同的 InnoDB 表中。这会是个问题吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:48:18.470

我一直在升级我的数据库结构并重写了很多后端代码，并且忘记将通知表从 MyISAM 更改为 InnoDB。感谢 BenjaminPaap 的帮助/兴趣。

抱歉浪费了问题。

# restkit - RestKit 0.20 — 创建新的 NSManagedObject 的首选方法是什么？

> ID：13752369
> 
> 赞同：8
> 
> 时间：2012-12-06T20:54:13.957
> 
> 标签：restkit, restkit-0.20

我很想知道在 RestKit 0.20 中创建新的 NSManagedObject 的最佳方法是什么？目前我的代码看起来像这样：

```
#pragma mark - navigation buttons

- (void)createButtonDidTouch
{
    // create new album object    
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    NSManagedObjectContext *parentContext = RKObjectManager.sharedManager.managedObjectStore.mainQueueManagedObjectContext;
    context.parentContext = parentContext;
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Album" inManagedObjectContext:parentContext];
    Album *newAlbum = [[Album alloc] initWithEntity:entityDescription insertIntoManagedObjectContext:context];

    // pass object to create view to manipulate
    AlbumCreateViewController *createViewController = [[AlbumCreateViewController alloc] initWithData:newAlbum];
    createViewController.delegate = self;
    createViewController.managedObjectContext = context;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:createViewController];
    navController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

    [self presentViewController:navController animated:YES completion:nil];
}

#pragma mark - create view controller delegate

- (void)createViewControllerDidSave:(NSManagedObject *)data
{
    // dismiss the create view controller and POST

    // FIXME: add restkit code to save the object
    NSLog(@"save the object...");

    NSDictionary *userInfo = [KeychainUtility load:@"userInfo"];
    NSString *path = [NSString stringWithFormat:@"/albums/add/%@/%@", userInfo[@"userID"], userInfo[@"apiKey"]];

    [RKObjectManager.sharedManager postObject:data path:path parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        operation.targetObject = data;
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"create album error: %@", error);
    }];

    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)createViewControllerDidCancel:(NSManagedObject *)data
{
    // dismiss the create view controller

    NSLog(@"delete the object...");
    // FIXME: add restkit code to delete the object

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我也很想知道我的职责是保存/删除这个对象。如果我通过 RestKit POST 到服务器，托管对象上下文是否保存？

如果我决定取消这个创建过程怎么办——删除这个对象的首选方法是什么？

基本上 RestKit 为我做了多少，我应该确保我在做什么。我还没有找到太多关于这方面的文档，并且想清楚地说明这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T21:18:16.157

当您为给定对象初始化一个`RKManagedObjectRequestOperation`对象时，RestKit 将为该对象获取一个永久对象 ID，然后创建一个子托管对象上下文，其父上下文是该对象插入的上下文。然后该操作执行 HTTP 请求以完成并获得响应。

如果响应成功并且响应的映射成功（注意映射发生在此私有子上下文中），则保存私有子上下文。调用的保存类型由属性的值确定`savesToPersistentStore`（参见[http://restkit.org/api/0.20.0/Classes/RKManagedObjectRequestOperation.html#//api/name/savesToPersistentStore](http://restkit.org/api/0.20.0/Classes/RKManagedObjectRequestOperation.html#//api/name/savesToPersistentStore)）。

当 时`YES`，上下文通过`NSManagedObjectContext`category 方法递归地一直保存到持久存储中`saveToPersistentStore`（请参阅[http://restkit.org/api/0.20.0/Categories/NSManagedObjectContext+RKAdditions.html](http://restkit.org/api/0.20.0/Categories/NSManagedObjectContext+RKAdditions.html)）。

当 时`NO`，上下文通过原始`[NSManagedObjectContext save:]` 消息保存，该消息将更改“推送”回父上下文。在您将它们保存回来之前，它们将保持在该上下文的本地。请记住，托管对象上下文父/子层次结构只要您在应用程序中创建即可。

如果 HTTP 请求失败或映射过程中出现错误，则不保存私有上下文并认为操作失败。这意味着不会将任何更改保存回原始 MOC，使您的对象图与开始操作之前一样（除了正在发送的对象，如果是临时的，现在具有永久对象 ID，但仍未保存）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:06:20.337

你这样做的方式应该有效（每次调用每个 VC 中的 MOC），但不是“推荐”的。

就像任何 Core Data 应用程序一样，Apple 建议的是“传递接力棒”风格。

> 嵌套上下文比以往任何时候都更重要的是，采用“传递接力棒”的方法来访问上下文（通过将上下文从一个视图控制器传递到下一个视图控制器）而不是直接从应用程序委托中检索它。

见这里：http: [//developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/_index.html](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/_index.html)

至于你的第二个问题，如果一切都很好地映射/设置，RestKit 应该在你的 api 调用成功后管理保存/更新你的核心数据堆栈。

来自 RK 的创造者布莱克：

> 如果您 POST 或 PUT 一个 Core Data 对象，RK 会为它获取一个永久对象 ID，然后创建一个辅助托管对象上下文，触发请求，并映射响应（如果可能）。如果响应和映射成功，它会根据 savesToPersistentStore 的值将其保存回父上下文或一直保存回持久存储（即保存到 SQLite）。

# c# - 动态创建接口成员

> ID：13752373
> 
> 赞同：0
> 
> 时间：2012-12-06T20:54:22.167
> 
> 标签：c#, reflection, mvp

我有一个视图，它实现了一个接口。

我正在尝试对此进行单元测试，但它变得很无聊......

声明是：

```
public interface IView : IBaseView
{
    TextBox ClientId { get; set; }
    TextBox ClientName { get; set; }
    Button SaveClient { get; set; }
    Button NextClient { get; set; }
    Button PreviousClient { get; set; }
    Button DiscardChanges {get;set;}
    bool ReadOnly { get; set;  }
    ListBox MyLittleList { get; set; }
}

    [Test]
    public void FirstSteps()
    {
        var sessionFactory = Substitute.For<ISessionFactory>();
        var session = Substitute.For<ISession>();
        var statelessSession = Substitute.For<IStatelessSession>();
        sessionFactory.OpenSession().Returns(session);
        sessionFactory.OpenStatelessSession().Returns(statelessSession);

        var view = Substitute.For<IView>();

        view.ClientId = new System.Windows.Forms.TextBox();
        view.ClientName = new System.Windows.Forms.TextBox();
        view.DiscardChanges = new System.Windows.Forms.Button();
        view.MyLittleList = new System.Windows.Forms.ListBox();
        view.NextClient = new System.Windows.Forms.Button();
        view.PreviousClient = new System.Windows.Forms.Button();
        view.ReadOnly = false;
        view.SaveClient = new System.Windows.Forms.Button();
    } 
```

有没有一种观点让我动态地做到这一点？

将 View 传递给一个方法，该方法将验证那里有什么并自动调用构造函数并设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:01:47.013

我不完全确定您在寻找什么，但也许这可能会有所帮助？：

```
public static void SetData<T>(T obj)
{
  foreach (var property in typeof(T).GetProperties())
    if (property.CanWrite && property.GetIndexParameters().Length == 0)
    {
      object val = null;

      //// Optionally some custom logic if you like:
      //if (property.PropertyType == typeof(string))
      //    val = "Jan-Peter Vos";
      //else

        val = Activator.CreateInstance(property.PropertyType);

      property.SetValue(obj, val, null);
    }
}

[Test]
public void FirstSteps()
{
  // .. Your code ..

  SetData(view);
} 
```

# user-interface - Web 应用程序的用户可拖动部分

> ID：13752376
> 
> 赞同：0
> 
> 时间：2012-12-06T20:54:32.810
> 
> 标签：user-interface, draggable, jsfiddle

我想知道如何复制可拖动的列/行分隔符的功能，例如在[http://jsfiddle.net/](http://jsfiddle.net/)上找到的。

这是建立在某个库之上的吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:22:47.893

jsfiddle 站点中的可拖动分隔符是使用 和 中的代码实现`jsfiddle.net/js/LayoutCM.js`的`jsfiddle.net/codemirror/js/codemirror.js`。

注意：SO 中的新代码更改使得直接链接到 jsfiddle 实现以解释它们如何实现某些东西真的很挑剔。

其他相关的 StackOverflow 问题包括

*   [通过拖动分隔处理程序调整元素大小](https://stackoverflow.com/questions/11061414/resize-elements-by-dragging-divider-handler)
*   [没有jquery ui的可拖动div](https://stackoverflow.com/questions/8569095/draggable-div-without-jquery-ui)
*   [什么是实现可拖动分隔的轻量级脚本 jquery 扩展？](https://stackoverflow.com/questions/10810850/what-is-a-lightweight-script-jquery-extension-that-implements-a-draggable-divide)

提供了各种项目的功能，包括 jquery 插件和其他 javascript 脚本

*   [jquery-分频器](https://github.com/weblinc/jquery-divider)
*   [jquery 拆分器](http://methvin.com/splitter/)
*   [分裂面](http://www.jools.net/projects/javascript/splitpanes/)
*   [jqueryui Resizable](http://jqueryui.com/resizable/)（作为组件实现）
*   [jqueryui Draggable](http://jqueryui.com/draggable/)（作为组件实现）
*   [mootools 分离器](http://verens.com/2007/07/25/a-few-splitter-enhancements/)
*   [yui resize](http://yuilibrary.com/yui/docs/resize/)（作为组件实现）
*   [jQuery分割平面](https://github.com/shagstrom/split-pane)

另请参阅其他资源，包括

*   [一个示例 jquery splitplane 实现](http://layout.jquery-dev.net/demos/simple.html)
*   [Google 闭包库中的示例拆分平面](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/splitpane.html)
*   [yui 示例中的拆分平面控制](http://skypoetsworld.blogspot.com/2007/09/splitpane-control-yui.html)

大多数人似乎使用现有的 jquery 插件或使用 Draggable 和 Resizable 组件制作自己的实现，例如代码参见提到的其他 StackOverflow 帖子。

# jquery - jQuery背景颜色动画怪异

> ID：13752384
> 
> 赞同：1
> 
> 时间：2012-12-06T20:54:58.583
> 
> 标签：jquery, css, jquery-animate, background-color

我有以下 javascript 函数，当将新文档添加到列表中时，该函数会闪烁链接的 bg 3 次。

这第一次工作正常，但随后对该函数的调用会导致闪烁变得混乱。越是被称为闪烁行为就越奇怪。

我在 IE8 和最新版本的 Chrome 中看到了相同的效果。

```
var highlightNew = function (control) {
    var item = $('li.new-document a.document-link', control);
    if (item.length > 0) {
        var highlightColor = '#ffa500';
        item.stop()
            .animate({ backgroundColor: highlightColor }, 'slow')
            .animate({ backgroundColor: 'transparent' }, 'slow')
            .animate({ backgroundColor: highlightColor }, 'slow')
            .animate({ backgroundColor: 'transparent' }, 'slow')
            .animate({ backgroundColor: highlightColor }, 'slow')
            .animate({ backgroundColor: 'transparent' }, 'slow');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:06:30.700

你有这个插件吗？

根据 jQuery 文档，您不能为背景颜色设置动画。jQuery 建议为此使用 jQuery.Color 插件。

jQuery 动画文档 - [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

jQuery 颜色插件 - [https://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

# objective-c - 核心绘图绘制一条直线 y 轴线，顶部有标签

> ID：13752386
> 
> 赞同：1
> 
> 时间：2012-12-06T20:55:03.230
> 
> 标签：objective-c, ios, core-plot

对于下面的图片

![在此处输入图像描述](../Images/c5a656acb08d68eb912d1f22db88183a.png)

有谁知道如何获得那些上面有数字的水平线？我所能做的就是给蜱虫本身和它们右边的数字上色。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:00:14.643

您需要使用`majorGridLineStyle`轴上的属性。还要检查`minorGridLineStyle`属性。您可以在 CPTestApp 中看到一个示例。有关更多详细信息，请查看[此谷歌论坛。](https://groups.google.com/forum/?fromgroups=#!topic/coreplot-discuss/J2o6cQVzVW0)

例如：-

```
CPTMutableLineStyle *yMajorGridLineStyle = [CPTLineStyle lineStyle]; 
yMajorGridLineStyle.lineCap = kCGLineCapRound; 
yMajorGridLineStyle.lineColor = CPTColor whiteColor]; 
yMajorGridLineStyle.lineWidth = 1.0; 

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet; 
CPTXYAxis *yAxis = axisSet.yAxis; 
yAxis.majorGridLineStyle = yMajorGridLineStyle; 
```

为了将数字移动到轴的右侧，您可以使用，

```
yAxis.tickDirection = CPTSignPositive;. 
```

还用，

```
yAxis.labelAlignment = CPTAlignmentBottom; 
```

# php - 显示目录内容的子域

> ID：13752387
> 
> 赞同：2
> 
> 时间：2012-12-06T20:55:06.117
> 
> 标签：php, .htaccess, mod-rewrite

我正在开发一个带有 htaccess 规则的网站。这是网址结构：

```
example.com
example.com/index.php/login
example.com/index.php/foo
demos.example.com 
```

对于上面的最后一个 url (demos.example)，我想显示 .htaccess 的内容`example.com/index.php/demos`，因此，我创建了一个 .htaccess 文件，如下所示：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?demos.example.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/demos [L] 
```

当我浏览`demos.example.com`索引页面时显示（example.com），因为没有发生任何事情。我希望我的解释很清楚。

*   我已阅读[此主题](https://stackoverflow.com/questions/10642426/htaccess-rewrite-subdomain-to-directory)，但此解决方案执行“浏览器重定向”，这不是想法。
*   使用[此示例](http://www.scriptygoddess.com/archives/2007/06/13/redirect-a-subdomain-to-a-directory-using-htaccess/)不会产生任何结果：显示的是索引而不是 index.php/demos

## 更新

如果我使用 .htaccess 如下：

```
RewriteCond %{HTTP_HOST} ^(www\.)?demos\.example\.com 
RewriteRule ^(.*)$ index.php/demos/$1 [L] 
```

...这使得浏览器显示一个`500 internal server error`. 查看日志，它会打印以下消息：

```
[Thu Dec 06 15:06:24 2012] [error] [client 201.192.30.254] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace., referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3112): [client 201.192.30.254] r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/demos/, referer: http://example.com/
[Thu Dec 06 15:06:24 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /, referer: http://example.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:53:47.423

试试这个：

```
RewriteCond %{HTTP_HOST} ^(www\.)?demos\.example\.com [NC]
RewriteRule ^(.*)$ http://example.com/index.php/demos/$1 [L] 
```

# php - 帖子中的联系表格 7 插件 shorcode

> ID：13752393
> 
> 赞同：0
> 
> 时间：2012-12-06T20:55:33.403
> 
> 标签：php, wordpress

我在帖子内容中放置了联系表 7 的简码，其中包含联系表的简码，并通过以下代码在主题上显示：

```
 <?php $post_id = 157;
  $queried_post = get_post($post_id);
  echo $queried_post->post_content; ?> 
```

但它显示相同的简码而不是联系表格。我正在使用小册子主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:13:59.027

你正试图以一种轮回的方式做到这一点。如果您试图通过将短代码放置在页面的编辑器中来仅呈现要呈现的表单，然后在模板文件中调用该页面的内容，则可以使用更简洁的内置函数来完成此操作。您不需要为了显示您的表单而从另一个页面获取内容。

将其放在您希望表单呈现的模板文件中：

`<?php echo do_shortcode([your_shortcode_here]) ?>`

不要忘记将您的简码放在“your_shortcode_here”的位置。

如果您确实需要从另一个页面中提取内容，则可以使用以下代码进行操作：

```
<?php
    $page_id = 157;
    $page_data = get_page($page_id);
    $content = apply_filters('the_content', $page_data->post_content);
    $title = $page_data->post_title; // Get title
    echo $content; // Output Content
?> 
```

只需确保页面 ID 与您要从中获取内容的页面匹配即可。

# objective-c - 新的 Facebook App 如何集成 App Store 页面？

> ID：13752395
> 
> 赞同：3
> 
> 时间：2012-12-06T20:55:45.967
> 
> 标签：objective-c, ios, ios6, app-store

几周以来，Facebook 在其 iOS 客户端中展示应用广告。当您单击它们时，App Store 应用程序详细信息页面**将作为 Facebook 应用程序内的模式视图控制器打开**。

我只知道如何通过 URL 打开 App Store 页面，但如何从您的应用程序内部显示 App Store 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T21:42:03.057

您正在寻找 SKStoreProductViewController。这是文档的链接:)

[https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/SKStoreProductViewController.html](https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/SKStoreProductViewController.html)

我还发现了这个有用的教程 :)

[http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class](http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class)

# solr - solr / lucene idf 分数

> ID：13752403
> 
> 赞同：5
> 
> 时间：2012-12-06T20:56:34.140
> 
> 标签：solr, lucene, scoring

我试图更好地了解 lucene 如何对我的搜索进行评分，以便我可以对我的搜索配置或文档内容进行必要的调整。

以下是分数细分的一部分。

产品：

```
 0.34472802 = queryWeight, product of:
        2.2 = boost
        7.880174 = idf(docFreq=48, maxDocs=47667)
        0.019884655 = queryNorm
      1.9700435 = fieldWeight in 14363, product of:
        1.0 = tf(freq=1.0), with freq of:
          1.0 = termFreq=1.0
        7.880174 = idf(docFreq=48, maxDocs=47667)
        0.25 = fieldNorm(doc=14363)
0.26806915 = (MATCH) max of:
  0.07832639 = (MATCH) weight(shortDescription:tires^1.1 in 14363) [DefaultSimilarity], result of:
    0.07832639 = score(doc=14363,freq=1.0 = termFreq=1.0 
```

我了解提升是如何计算的，因为这是我的配置值

但是 idf 是如何计算的（7.880174 = idf 值）。

根据lucene，idf公式为：idf(t) = 1 + log(numDocs/(docFreq+1))

我检查了核心管理控制台，发现我的 docFreq = maxDocs = 47667。

使用来自 lucene 的公式，我无法计算出预期的 7.880174。相反，我得到：idf = 3.988 = 1 + log(47667/(48+1))。

我的公式中是否缺少某些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T00:48:37.150

我认为您的`log`函数选择 10 作为基础，而在 lucene 中我们选择*e*作为基础。

```
log(47667/(48+1), 10) = 2.9880217397306
log(47667/(48+1), e) = 6.8801743154459 
```

`idf`lucene方法的源码为：

```
 public float idf(int docFreq, int numDocs) {
    return (float)(Math.log(numDocs/(double)(docFreq+1)) + 1.0);
  } 
```

如您所见，`idf`使用 Java`Math.log`进行计算`idf`，同时`Math.log`选择*e*作为`log`函数。有关详细信息，请参阅[Java Math api](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#log%28double%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:48:19.443

看起来lucene网站有错字。

[http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/Similarity.html](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/Similarity.html)

状态 1 + log(numDocs/(docFreq+1))

但它实际上是 1 + ln(numDocs/(docFreq+1))

# hibernate - Hibernate中的条件api查询不存在

> ID：13752405
> 
> 赞同：3
> 
> 时间：2012-12-06T20:56:41.297
> 
> 标签：hibernate, jpa, criteria-api, not-exists

我正在尝试编写查询，它返回未分配给路线的驱动程序列表。

我的数据库设置如下。

```
Route:
route_id
user_id//specified as driver

User:
user_id
role // need to select user, which is Driver role 
```

只有路线看到用户（司机），用户（司机）看不到路线。

这是我尝试编写这样的查询。

```
public List<User> getUnsignedDrivers(){
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();

    CriteriaQuery<User> query = criteriaBuilder.createQuery(User.class);
    Root<User> user = query.from(User.class);
    query.select(user);

    Subquery<Route> subquery = query.subquery(Route.class);
    Root<Route> subRootEntity = subquery.from(Route.class);
    Predicate correlatePredicate = criteriaBuilder.equal(subRootEntity.get("Route_.User"), user);
    subquery.where(correlatePredicate);
    query.where(criteriaBuilder.not(criteriaBuilder.exists(subquery)));

    TypedQuery<User> typedQuery = entityManager.createQuery(query);
    return typedQuery.getResultList();
} 
```

我是 jpa 的新手，所以这就是问题所在。

更具体地说，我需要选择具有角色驱动程序的用户，这些用户未设置为任何路线

我的实体设置如下：

```
 @Entity
public class Route {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

@OneToOne(fetch = FetchType.EAGER, cascade = {})
@JoinColumn(name = "user_id", nullable = true)
private User driver;
.....
@Entity
public class User {

public static enum Role {
    ADMIN, MANAGER, DRIVER;
}

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Enumerated(EnumType.STRING)
@Column(nullable = false)
private Role role; 
```

**更新：**当前查询

```
CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();

    CriteriaQuery<User> query = criteriaBuilder.createQuery(User.class);
    Root<User> user = query.from(User.class);
    Predicate predicateRole = criteriaBuilder.equal(user.get("role"), User.Role.DRIVER);
    query.where(predicateRole);
    query.select(user);

    Subquery<Route> subquery = query.subquery(Route.class);
    Root<Route> subRootEntity = subquery.from(Route.class);
    Predicate correlatePredicate = criteriaBuilder.equal(subRootEntity.get("driver"), user);
    subquery.where(correlatePredicate);
    query.where(criteriaBuilder.not(criteriaBuilder.exists(subquery)));

    TypedQuery<User> typedQuery = entityManager.createQuery(query);
    return typedQuery.getResultList(); 
```

问题依然存在

我得到这个例外：

```
java.lang.IllegalStateException: No explicit selection and an implicit one cold not be determined
at org.hibernate.ejb.criteria.QueryStructure.locateImplicitSelection(QueryStructure.java:296)
at org.hibernate.ejb.criteria.QueryStructure.render(QueryStructure.java:249)
at org.hibernate.ejb.criteria.CriteriaSubqueryImpl.render(CriteriaSubqueryImpl.java:282)
at org.hibernate.ejb.criteria.predicate.ExistsPredicate.render(ExistsPredicate.java:58)
at org.hibernate.ejb.criteria.QueryStructure.render(QueryStructure.java:258)
at org.hibernate.ejb.criteria.CriteriaQueryImpl.render(CriteriaQueryImpl.java:340)
at org.hibernate.ejb.criteria.CriteriaQueryCompiler.compile(CriteriaQueryCompiler.java:217)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:587)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy25.createQuery(Unknown Source) 
```

扔在这条线上`TypedQuery<User> typedQuery = entityManager.createQuery(query);`

**解决** 这个问题对我来说非常有效。我写了这个，因为我不能使用反向关系。

```
public List<User> getUnsignedDrivers(){
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();

    CriteriaQuery<User> query = criteriaBuilder.createQuery(User.class);
    Root<User> user = query.from(User.class);
    Predicate predicateRole = criteriaBuilder.equal(user.get("role"), User.Role.DRIVER);
    query.where(predicateRole);
    query.select(user);

    TypedQuery<User> typedQuery = entityManager.createQuery(query);
    List<User> allDrivers = typedQuery.getResultList();
    List<User> notAssignedDrivers = new ArrayList<User>();
    List<Route> haveDriverRoutes = getRouteWithNoDrives();
    for (User driver : allDrivers){
        if (!isDriverAssigned(haveDriverRoutes,driver.getId())){
            notAssignedDrivers.add(driver);
        }
    }
    return notAssignedDrivers;
}

private boolean isDriverAssigned(List<Route> haveDriverRoutes, long driverId){
    for(Route route : haveDriverRoutes){
        if (route.getDriver().getId() == driverId){
            return true;
        }
    }
    return false;
}

@SuppressWarnings("unchecked")
public List<Route> getRouteWithNoDrives() {
    Query query = entityManager.createQuery("SELECT o FROM " + type.getSimpleName() + " o WHERE o.driver != null");
    return  query.getResultList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:10:02.587

您缺少实体中的反向`OneToOne`关系：`User`

```
@OneToOne(mappedBy="driver")
private Route route; 
```

有关如何映射 OneToOne 关系的信息，请参阅[此链接。](http://en.wikibooks.org/wiki/Java_Persistence/OneToOne)

你在这部分有一个错误：`subRootEntity.get("Route_.User")`. 这不是一个有效的语法，并且您没有`User`在`Route`实体中调用的属性：该属性被调用`driver`（在阅读了您的最新编辑之后）。

您有 2 种方法来获取该[Path](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Path.html)表达式，或者使用：

```
Path<User> path = subRootEntity.get("driver");
// in a compact way: 
Predicate correlatePredicate = criteriaBuilder.equal(subRootEntity.get("driver"), user); 
```

或通过使用元模型：

```
Path<User> path = subRootEntity.get(Route_.driver);
// in a compact way: 
Predicate correlatePredicate = criteriaBuilder.equal(subRootEntity.get(Route_.driver), user); 
```

你似乎混合了这两种方法。有关使用 Metamodel 的更多信息，请参阅[本文](https://www.ibm.com/developerworks/java/library/j-typesafejpa/)。

查询的其余部分看起来是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T19:09:17.150

添加子查询的行应该返回一些东西。所以你应该改变： `query.where(criteriaBuilder.not(criteriaBuilder.exists(subquery)));`

到：

```
query.where(criteriaBuilder.not(criteriaBuilder.exists(subquery.select(subRootEntity)))); 
```

# paypal - 如何在 opencart 中找到我的 paypal pro api 字符串？

> ID：13752410
> 
> 赞同：1
> 
> 时间：2012-12-06T20:56:53.763
> 
> 标签：paypal, opencart

如何在 opencart 中找到我的 paypal pro api 字符串？我到处寻找，甚至在opencart论坛上发布了这个问题，但我没有得到一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:24:34.470

您是否正在尝试发出 API 请求？

这将帮助您：

[http://net.tutsplus.com/tutorials/php/how-to-process-credit-cards-with-paypal-payments-pro-using-php/](http://net.tutsplus.com/tutorials/php/how-to-process-credit-cards-with-paypal-payments-pro-using-php/)

如果您正在寻找您的 API 签名，请执行以下操作：

```
Login to your account at paypal.com
Choose Profile
Left Column..choose API Access
then
VIEW code generated.
User name , password and 56-character API Signature Code
should now show.. if it doesn't, delete and generate another 
OR
contact paypal for help. 
```

希望这可以帮助

# html - 试图通过引用 name 属性来设置 select 元素的样式？

> ID：13752415
> 
> 赞同：1
> 
> 时间：2012-12-06T20:57:11.747
> 
> 标签：html, forms

我正在尝试设置下拉菜单的样式，不幸的是它没有应用类。但是，它有一个名称属性。那么，可以通过引用 name 属性来设置下拉列表的样式吗？

```
<select name="ym_birthdate_month">
   <option value="" selected="selected">Month</option>
   <option value="01">January</option>
   <option value="02">February</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:02:30.577

是的，属性选择器是[CSS2 规范](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)的一部分。

```
select[name=ym_birthday_month] {
  // insert CSS here
} 
```

这将匹配名称属性为“ym_birthday_month”的任何内容。如果您需要它区分大小写（根据您的示例，我认为您不会这样做）：

```
select[name="ym_birthday_month"] {
    // insert CSS here
} 
```

# reporting-services - SSRS 和 BIDS 之间的子报表性能差异

> ID：13752416
> 
> 赞同：4
> 
> 时间：2012-12-06T20:57:12.803
> 
> 标签：reporting-services, bids

我在 SSRS 中有一份报告，其中包含两个子报告，但显示最终报告需要很长时间。根据 SSRS 执行日志，该报告在数据检索上花费了约 140 毫秒，在处理上花费了约 20 分钟，在渲染上花费了约 20 毫秒。如果我删除任何一个子报告（无论哪个子报告），处理时间都会下降到约 10 分钟。如果我删除两个子报告，时间会下降到 ~2 秒。很明显，我必须对子报告做点什么；可能会尝试将它们整合到主报告中。

执行日志中的“TimeDataRetrieval”统计数据是否代表报表和所有子报表的聚合数据检索时间，还是仅针对主报表（意味着子报表的数据检索时间实际上已添加到“TimeProcessing”统计信息中） ?

此外，当我在 BIDS (Visual Studio) 中运行主报告时，整个报告会在几秒钟内返回。为什么在 BIDS 中一个报表 + 2 个子报表会在几秒钟内完全呈现，而从报表服务器查看却需要大约 20 分钟？它们都在访问同一个 SQL DB（从 SSRS 服务器获取数据只需 140 毫秒），并且 SSRS/SQL 服务器应该有足够的能力（在不破坏 1% CPU 使用率的 8 核 VM 中运行）。

# php - SendGrid X-SMTPAPI 在发送到 sendgrid 的头请求文件中被忽略

> ID：13752422
> 
> 赞同：2
> 
> 时间：2012-12-06T20:57:25.933
> 
> 标签：php, api, cakephp, rest, sendgrid

下面是发送到 sendgrid 的标头和原始数据。我已经添加了发送出去的原始数据。请注意，第一个原始数据正在成功发送。当我将此数据发送到 sendgrid 时，它成功地将电子邮件发送出去。它不做的是隐藏电子邮件。因此收件人可以在该部分中看到其他人的电子邮件地址`to`。这是一个安全风险。

```
 POST /api/mail.send.json HTTP/1.1
    Host: sendgrid.com
    Connection: close
    User-Agent: CakePHP
    X-SMTPAPI: {"to":["add@hw.com","Yaz4302@coldmail.com","number25@gmail.com","rieks@amail.com"]}
    Content-Type: application/x-www-form-urlencoded
    Content-Length: 1746

    from=support%40workworktest.com&to%5B0%5D=admin%40hw.com&to%5B1%5D=Yaz02%40coldmail.com
&to%5B2%5D=number25%40amail.com&to%5B3%5D=rieks%40gmail.com&subject=Todays+Newest+Open+Projects
&html=%3C%21DOCTYPE+HTML+PUBLIC+%22-%2F%2FW3C%2F%2FDTD+HTML+4.0+Transitional%2F%2FEN%22%3E%0A%3Chtml%3E%0A%3Cbody%3E%0A%3Ca+href%3D%22http%3A%2F%2Fwww.hireremoteworkers.com%2F%22%3E%3Cimg+src%3D%22http%3A%2F%2Fwww.hireremoteworkers.com%2Fimg%2Fheaderbg.jpg%22+width%3D%22750px%22+height%3D%22200px%22+alt%3D%22%22+%2F%3E%3C%2Fa%3E%3Cbr%2F%3E%0A%3Cstyle+type%3D%22text%2Fcss%22%3E%0A%09.newest-table+%7B%0A%09%09width%3A500px%3B%0A%09%7D%0A%3C%2Fstyle%3E%0A%3Ch1%3ENewest+Open+Work%3C%2Fh1%3E%0AHere+are+todays+newest+open+work.%3Cbr%2F%3E%0A%3Ctable+style%3D%22width%3A100%25%3B%22%3E%3Ctr+style%3D%22background%3A%233F8D35%3Bcolor%3Awhite%3B%22%3E%3Ctd%3EProject+Name%3C%2Ftd%3E%3Ctd%3EMaximum+Budget%3C%2Ftd%3E%3Ctd%3EProject+Created%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%3Ca+href%3D%22http%3A%2F%2Fhireremoteworkers.com%2Fprojects%2Fview%2F50ba7257-bd20-4f19-a888-02d5323f2e01%22%3EGreat+New+Project%3C%2Fa%3E%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%24500.00%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E2012-12-01+16%3A10%3A47%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3C%2Ftr%3E%3Ctr%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%3Ca+href%3D%22http%3A%2F%2Fhireremoteworkers.com%2Fprojects%2Fview%2F50bf6573-d2ec-4107-a74c-29e8323f2e01%22%3EProject+64%3C%2Fa%3E%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%24500.00%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E2012-12-05+10%3A17%3A07%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3C%2Ftr%3E%3C%2Ftable%3E%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A&api_user=Y&api_key=Moment 
```

# 第二次尝试

在这次尝试中，我`to`从消息中删除了参数并将其添加到标题中，结果如下所示。请注意，这根本不起作用并引发异常。我将尝试捕获异常并将其发布。

```
POST /api/mail.send.json HTTP/1.1
Host: sendgrid.com
Connection: close
User-Agent: CakePHP
To: number@amail.com
X-SMTPAPI: {"to":["add@hw.com","Yaz4302@coldmail.com","number25@gmail.com","rieks@amail.com"]}
Content-Type: application/x-www-form-urlencoded
Content-Length: 1620

from=support%40workworktest.com&subject=Todays+Newest+Open+Projects&html=%3C%21DOCTYPE+HTML                                               +PUBLIC+%22-%2F%2FW3C%2F%2FDTD+HTML+4.0+Transitional%2F%2FEN%22%3E%0A%3Chtml%3E%0A%3Cbody%3E%0A%                                               3Ca+href%3D%22http%3A%2F%2Fwww.hireremoteworkers.com%2F%22%3E%3Cimg+src%3D%22http%3A%2F%2Fwww.hi                                               reremoteworkers.com%2Fimg%2Fheaderbg.jpg%22+width%3D%22750px%22+height%3D%22200px%22+alt%3D%22%2                                               2+%2F%3E%3C%2Fa%3E%3Cbr%2F%3E%0A%3Cstyle+type%3D%22text%2Fcss%22%3E%0A%09.newest-table+%7B%0A%09                                               %09width%3A500px%3B%0A%09%7D%0A%3C%2Fstyle%3E%0A%3Ch1%3ENewest+Open+Work%3C%2Fh1%3E%0AHere+are+t                                               odays+newest+open+work.%3Cbr%2F%3E%0A%3Ctable+style%3D%22width%3A100%25%3B%22%3E%3Ctr+style%3D%2                                               2background%3A%233F8D35%3Bcolor%3Awhite%3B%22%3E%3Ctd%3EProject+Name%3C%2Ftd%3E%3Ctd%3EMaximum+B                                               udget%3C%2Ftd%3E%3Ctd%3EProject+Created%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%0A%09%09%09%09%09%09%09%09                                               %3Ctd%3E%3Ca+href%3D%22http%3A%2F%2Fhireremoteworkers.com%2Fprojects%2Fview%2F50ba7257-bd20-4f19                                               -a888-02d5323f2e01%22%3EGreat+New+Project%3C%2Fa%3E%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3                                               E%24500.00%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E2012-12-01+16%3A10%3A47%3C%2Ftd%3E%0A%09                                               %09%09%09%09%09%09%09%3C%2Ftr%3E%3Ctr%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%3Ca+href%3D%22http%3                                               A%2F%2Fhireremoteworkers.com%2Fprojects%2Fview%2F50bf6573-d2ec-4107-a74c-29e8323f2e01%22%3EProje                                               ct+64%3C%2Fa%3E%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3Ctd%3E%24500.00%3C%2Ftd%3E%0A%09%09%09%09                                               %09%09%09%09%3Ctd%3E2012-12-05+10%3A17%3A07%3C%2Ftd%3E%0A%09%09%09%09%09%09%09%09%3C%2Ftr%3E%3C%                                               2Ftable%3E%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A&api_user=Y&api_key=Moment 
```

# 更新的代码

下面是我提供的代码...注意，提供的代码按提供的顺序处理代码。

# 实现的代码（这是在 cron 工作中）

```
 $controller =& new Controller();
    $email =& new SendgridComponent(null);
    $email->initialize($controller);
    $email->from    = "support@workworktest.com";
    $email->template = "newest_open";
    $email->sendAs = 'html';
    $email -> delivery = 'sendgrid';
    $controller->set('tableData',$tableData);
    $userEmails = array();
    $smtpapi = array();
    foreach($users as $user) {
        $smtpapi[] = $user['User']['email'];
    }           
    $email->to      = 'number@amail.com';
    $email->smtpapi = $smtpapi;
    $email->subject = 'Todays Newest Open Projects';
    $return = $email->send(); 
```

# 发送网格组件

在以下代码中，我更改了设置收件人电子邮件的方法中的`To`参数。`_sendgrid()`有人告诉我这个参数可以是任何电子邮件，sendgrid 会忽略它并寻找它，`X-SMTPAPI`如果它提供了。但相反，`X-SMTPAPI`参数被忽略了。http://www.opensource.org/licenses/mit-license.php MIT 许可证 */ App::import('Component', 'Email');

```
/**
 * SendgridComponent
 *
 * This component is used for sending email messages
 * using the Sendgrid API http://sendgridapp.com/
 *
 */
class SendgridComponent extends EmailComponent {

/**
 * Sendgrid API URI
 *
 * @var string
 * @access public
 */
    var $uri = 'https://sendgrid.com/';

/**
 * Sendgrid API Request URI
 *
 * @var string
 * @access public
 */
    var $request = 'api/mail.send.json';

/**
 * Sendgrid API Username
 *
 * @var string
 * @access public
 */
    var $username = null;

/**
 * Sendgrid API Password
 *
 * @var string
 * @access public
 */
    var $password = null;

/**
 * Sendgrid SMTPAPI 
 * for sending information to users without displaying their emails
 * @var string
 * @access public
 */
    var $smtpapi = null;

/**
 * Sendgrid Tag property
 *
 * @var string
 * @access public
 */
    var $tag = null;

/**
 * Sets Http Header Information after submission
 *
 * @var string
 * @access public
 */
    var $raw = null;

/**
 * Variable that holds Sendgrid connection
 *
 * @var resource
 * @access private
 */
    var $__sendgridConnection = null;

/**
 * Initialize component
 *
 * @param object $controller Instantiating controller
 * @access public
 */
    function initialize(&$controller, $settings = array()) {
        parent::initialize($controller, $settings);
        if (Configure::read('Sendgrid.username') !== null) {
            $this->username = Configure::read('Sendgrid.username');
        }
        if (Configure::read('Sendgrid.password') !== null) {
            $this->password = Configure::read('Sendgrid.password');
        }
    }

/**
 * Sends out email via Sendgrid
 *
 * @return bool Success
 * @access private
 */
    function _sendgrid() {
        App::import('Core', 'HttpSocket');

        // Setup connection
        $this->__sendgridConnection =& new HttpSocket();

        // Construct message
        $message = array();

        // From
        $message['from'] = $this->_formatAddress($this->from);
        if (!empty($this->fromname)) {
            $message['fromname'] = $this->fromname;
        }

        // To
        if (is_array($this->to)) {
            $message['to'] = array_map(array($this, '_formatAddress'), $this->to);
        } else {
                    //I altered this code to assign the 'to' value to the request header 
                    //instead of adding it to the message etc $message['to'] 
                    // OLD LINE:  $message['to'] = $this->_formatAddress($this->to);
            $this->__sendgridConnection->request['header']['To'] = $this->_formatAddress($this->to);//NEW LINE
            if (!empty($this->toname)) {
                $message['toname'] = $this->toname;
            }
        }
        // SMTPAPI : This was added by me to include X-SMTPAPI in the message header
        if(is_array($this->smtpapi) && $this->smtpapi) {
            $this->__sendgridConnection->request['header']['X-SMTPAPI'] = '{"to":[';
            foreach($this->smtpapi as $smtpapi) {
                $this->__sendgridConnection->request['header']['X-SMTPAPI'] .= '"'.$smtpapi.'",';
            }
            $this->__sendgridConnection->request['header']['X-SMTPAPI'] = substr_replace($this->__sendgridConnection->request['header']['X-SMTPAPI'] ,"",-1);
            $this->__sendgridConnection->request['header']['X-SMTPAPI'] .= ']}';
        }
        // Cc
        if (!empty($this->cc)) {
            if (is_array($this->cc)) {
                $message['cc'] = array_map(array($this, '_formatAddress'), $this->cc);
            } else {
                $message['cc'] = $this->_formatAddress($this->cc);
            }
        }

        // Bcc
        if (!empty($this->bcc)) {
            if (is_array($this->bcc)) {
                $message['bcc'] = array_map(array($this, '_formatAddress'), $this->bcc);
            } else {
                $message['bcc'] = $this->_formatAddress($this->bcc);
            }
        }

        // Subject
        $message['subject'] = $this->subject;

        // Tag
        if (!empty($this->tag)) {
            $message['Tag'] = $this->tag;
        }

        // HtmlBody
        if ($this->sendAs === 'html' || $this->sendAs === 'both') {
            $message['html'] = $this->htmlMessage;
        }

        // TextBody
        if ($this->sendAs === 'text' || $this->sendAs === 'both') {
            $message['text'] = strip_tags($this->textMessage);
        }

        // ReplyTo
        if (!empty($this->replyTo)) {
            $message['replyto'] = $this->_formatAddress($this->replyTo);
        }

        // Setup header
        $message['api_user'] = $this->username;
        $message['api_key'] = $this->password;

        // Send message
        $jsonInfo = json_decode($this->__sendgridConnection->post('https://sendgrid.com/api/mail.send.json', $message), true);
        $this->raw = $this->__sendgridConnection->request['raw'];
        debug($this->__sendgridConnection->request['header']);
        return $jsonInfo;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:06:06.400

从原始数据看来，您正在指定 SMTP 消息以及 X-SMTPAPI 标头中的收件人。您只想在 X-SMTPAPI 标头中指定它们。如果您发布生成 SMTP 消息的代码，我可以帮助确定问题可能出在哪里。

# mysql - 如何从 windows 命令提示符连接到 mysql 命令行

> ID：13752424
> 
> 赞同：58
> 
> 时间：2012-12-06T20:57:25.827
> 
> 标签：mysql, windows, command-prompt

我正在尝试从我的 Windows 提示符连接到 mysql 服务器命令行

我在 cmd 中写下一行，但出现错误。

```
cd C:\MYSQL\bin\ 
```

然后我执行

```
mysql.exe -u=root -p=admin 
```

但我收到这个错误

```
ERROR 1045: <28000>: Access denied for user 'root'@'localhost' <using password:YES> 
```

谢谢，

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-06T21:07:44.557

您的`cd`问题中的 无效（在此处引用它是因为您已将其删除一次，并且在发布此答案时它就在那里）：

```
cd CD:\MYSQL\bin\ 
```

你不能`cd`做`CD:\`任何事情，因为`CD:\`它不是 Windows 中的有效目录。将指示驱动器，但驱动器仅限于和`CD:`之间的单个字母。`A``Z`

如果您`\MYSQL\BIN`在 drive 上`C:`，那么您的命令需要是：

```
C:\>cd \MYSQL\Bin
C:\MYSQL\Bin>mysql -u root -p admin 
```

如果您还没有打开`C:`（您可以通过查看 cmd 窗口中的提示知道这一点），或者您的 MySQL 文件夹位于另一个驱动器上（例如，`D:`），请也更改为该驱动器：

```
C:\> cd /d D:\MYSQL\Bin
D:\MYSQL\Bin>mysql -u root -p admin 
```

`.exe`after`mysql`是可选的，因为`.exe`它是 Windows 上的可执行扩展。如果您键入`mysql`，Windows 将自动查找具有该名称的可执行文件并在找到时运行它。

请注意，在我的两个运行示例中`mysql`，都没有任何`=`迹象。您应该只使用`-p`没有密码，然后等待提示输入密码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-06T21:15:14.627

用这个 ：

```
mysql -u user_name -p  then press_enter_key 
```

然后输入密码

IE

```
line-1 : mysql -u root -p

line-2 : admin 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-03T18:17:13.097

`C:\Program Files\MySQL\MySQL Server 5.7\bin> mysql -u username -p`

然后它会要求输入密码。添加 db 用户时，输入您在安装期间为用户名设置的密码。 [![在给定的图像中 depp 是我的用户名](../Images/2f652b410c1fdacaa9331eebc9caf801.png)](https://i.stack.imgur.com/3o0R1.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-31T15:49:11.907

首先键入`cmd`然后将出现windows命令提示符：

```
PATH C:\XAMPP\MYSQL\BIN;%PATH%;
mysql -u root -p 
```

在哪里：

*   -u 是用户ID
*   -p 是密码，如果您不使用密码，请将其留空。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-06T20:59:52.510

您登录不正确；您不应在登录名中包含 =。因此，要登录，请键入：

```
mysql.exe -uroot -padmin 
```

如果这不起作用，那么您可能没有配置您的系统。如果是这样，那么这里有一个很好的 MySQL 提示入门教程：http: [//breakdesign.blogspot.com/2007/11/getting-started-with-php-and-mysql-in_11.html](http://breakdesign.blogspot.com/2007/11/getting-started-with-php-and-mysql-in_11.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-30T17:44:57.640

1.  从 MySQL 主目录启动您的 MySQL 服务器服务。你的一个是 C:\MYSQL\bin\ 所以在命令行中选择这个目录并输入： **NET START MySQL**
    （之后你可以打开 Windows 任务管理器并在进程选项卡中验证 **mysqld.exe** 进程正在运行。也许你的问题就在这里。 )
2.  类型： **mysql -u** *用户* **-p** [按回车]
3.  输入您的 *密码* [按Enter]

或制作一个**start.bat**文件：

1.  将 C:\MYSQL\bin\ 添加到您的 PATH
2.  写一个start.bat文件

**net start MySQL**

**mysql -u root -p**

祝你好运！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-05-29T15:10:36.463

请执行以下步骤

1.  首先，**使用 Administrator 打开命令提示符**。
2.  转到 MySQL 安装目录并在**命令提示符下**复制路径并过去， 例如：- C:\Program Files\MySQL\MySQL Server 5.7\bin>

3.  C:\Program Files\MySQL\MySQL Server 5.7\bin> **mysql -uroot -p** [-u 用户名 -p 密码]

4.  C:\Program Files\MySQL\MySQL Server 5.7\bin>mysql -uroot -p 输入密码：**** [此处输入密码]

![1 第一张图片](../Images/4cf2678abd876995ddbd5f683675dedd.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-09-16T13:55:59.410

为了更容易调用 MySQL 程序，您可以将 MySQL bin 目录的路径名添加到 Windows 系统 PATH 环境变量中：

在 Windows 桌面上，右键单击**我的电脑**图标，然后选择**属性**。

接下来从出现的系统属性菜单中选择高级选项卡，然后单击**环境变量**按钮。

在**System Variables**下，选择**Path**，然后单击 Edit 按钮。应出现“编辑系统变量”对话框。

将光标放在标记为变量值的空间中出现的文本末尾。（使用 End 键确保您的光标位于该空间中文本的最末尾。）然后输入 MySQL bin 目录的完整路径名（例如，`C:\Program Files\MySQL\MySQL Server 8.0\bin`）。

打开另一个终端，如果您使用 root 作为用户运行，则`mysql -u root -p`使用您创建的不同用户名。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-15T14:43:19.510

如果您知道您的用户名和密码，`mysql`只需登录即可。`windows`

打开你的命令提示符，对我来说用户名是`root`，密码是`password`

```
mysql -u root -p
Enter password: ********

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.7.11-log MySQL Community Server (GPL) 
```

希望对很多人有帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-01T13:20:39.667

我使用以下命令在 Windows 命令提示符下连接**MySQL Server 8.0 。**

```
C:\Program Files\MySQL\MySQL Server 8.0\bin>mysql -u root -p my_db
Enter password: **** 
```

**或者**

```
C:\Program Files\MySQL\MySQL Server 8.0\bin>mysql -u root -p my_db -h localhost
Enter password: **** 
```

这里**my_db**是模式名称。

[![在此处输入图像描述](../Images/ba0db40ab6499705de2a1ca5aa29733d.png)](https://i.stack.imgur.com/lQWZu.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-21T06:39:52.500

首先跳转到mysql的bin目录。您有两种连接方式

1) mysql -u root -p1234 (密码标志没有空格) 2) mysql -u root -p 询问时输入密码

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-23T10:02:09.393

如果您不在 C:/ 驱动器的确切根目录上，则首先使用 cd../.. 然后使用 query mysql -u username -p passsword

使用上面的行你可以访问 mysql 数据库。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-27T07:12:35.087

以下命令将连接到任何 MySQL 数据库

```
shell> mysql --host=localhost --user=myname --password=mypass mydb 
```

或者

```
shell> mysql -h localhost -u myname -pmypass mydb 
```

由于它以纯文本形式显示密码，因此您可以稍后根据提示输入密码。所以，命令如下

```
shell> mysql --host=localhost --user=myname --password mydb
shell> mysql -h localhost -u myname -p mydb 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-29T10:31:52.483

你必须继续安装 mysql 的路径是在驱动器 C: 上，那么你的命令需要是：

```
C:\Program Files\MySQL\MySQL Server 5.7\bin>mysql.exe -u root -p

OR

C:\>cd \MYSQL\Bin
C:\MYSQL\Bin>mysql -u root -p 
```

这将通过命令提示符询问您的 MySql 密码：

```
Enter password: ****** 
```

输入密码，您将获得 mysql 仪表板。

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4622
Server version: 5.7.14-log MySQL Community Server (GPL)

Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective 
```

拥有者。

```
Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-02T21:12:42.697

转到您的 MySQL 目录。就我而言，它...

```
cd C:\Program Files\MySQL\MySQL Server 8.0\bin
mysql -uroot -p 
```

> 无论您设置什么 MySQL 用户，root 都可以更改为您的用户。

它会询问您的密码。如果您有密码，请输入您的密码并按“Enter”，如果没有设置密码，只需按 Enter 即可。您将连接到 MySQL。

还有另一种方法可以直接连接到 MySQL，而无需每次都进入目录并输入命令。

创建一个 .bat 文件。首先，添加您的 MySQL 路径。在我的情况下，

```
cd C:\Program Files\MySQL\MySQL Server 8.0\bin 
```

然后添加这两行

```
net start MySQL 
mysql -u root -p 
```

如果您不想每次都输入密码，您可以简单地使用 -p 添加密码，例如 -proot（如果 root 是密码），但不建议这样做。

此外，如果您想连接到本地以外的其他主机（登台/生产服务器）。您也可以添加 -h22.345.80.09 例如 22.345.80.09 是您的服务器 ip。

```
net start MySQL 
mysql -u root -p -h22.345.80.0 
```

保存文件。只需双击打开并直接连接到 MySQL。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-07-20T08:51:46.300

在窗口终端上打开 mysql 的语法为：

mysql -u -p

例如 mysql -uroot -proot

其中： **-u**后跟您在安装时提供的数据库的用户名和 **-p**后跟密码

**假设**：假设 mysql bin 已经包含在路径环境变量中。如果不包含在路径中，您可以转到 mysql bin 文件夹，然后运行上面的命令。如果你想知道[如何设置路径环境](http://www.mysoftkey.com/java/path-and-classpath-in-java/)变量

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2014-12-11T10:51:00.557

如果您不想转到`bin`MySQL 的文件夹，那么另一种选择是将快捷方式放置`mysql.exe`到命令提示符 ( `C:\Users\"your user name">`) 的默认路径中，其中包含以下内容：

```
mysql -u(username) -p(password) 
```

# c# - Unity - 依赖项解析失败（未注册）

> ID：13752427
> 
> 赞同：3
> 
> 时间：2012-12-06T20:57:45.723
> 
> 标签：c#, unity-container

我在这行代码中遇到错误：

```
 using (IMaterialClient rawMaterialServiceProxy =
ServerUtility.Container.Resolve<IMaterialClient>()) 
```

错误：

> 依赖解析失败...当前类型xxx是一个接口，无法构造。您是否缺少类型映射？

我没有注册具体的 IMaterialClient。在我刚刚观看的 Pluralsight 视频中，他们说您不必注册每种类型，因为如果未指定，Unity 会找到实现。那改变了吗？我错过了什么吗？为什么不解决？运行此程序时，具有实际 IMaterialClient 实现的程序集位于 bin 文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:02:20.127

如果他们对 Unity 这么说，那他们就错了。Unity 将解析具体类型 ( `.Resolve<MyClass>`)，但必须通过将接口与具体类型相关联来显式注册接口。

有诸如[Unity Auto Registration](http://autoregistration.codeplex.com/)之类的扩展来提供这些功能；我对他们没有经验。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T21:10:42.440

我不知道 Unity 中的该功能。据我所知，它会很高兴地解决未注册的具体类型，但必须为任何抽象类型或接口注册一个具体类型。最好的办法是注册它：

```
ServerUtility.Container.RegisterType<IMaterialClient, ConcreteMaterialClient>(); 
```

# c# - asp.net, c# 与 mappath

> ID：13752432
> 
> 赞同：0
> 
> 时间：2012-12-06T20:58:07.593
> 
> 标签：c#, asp.net

我`E:\\DocumentManager\\Upload\\rzgtlxvmuolmhej4ibvyif2o.pdf`在数据库中已经有 10 行（如）。所以我有数据集来获取它，现在我想知道如何`E:\\DocumentManager\\Upload\\rzgtlxvmuolmhej4ibvyif2o.pdf`使用 aspx/c# 代码在 Web 上的浏览​​器 () 上显示/显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:59:41.157

MapPath 用于相对路径

对于绝对路径，只需按原样使用路径字符串

`Response.WriteFile("E:\...");`

# rest - 有没有快速发送帖子请求的方法？

> ID：13752433
> 
> 赞同：1
> 
> 时间：2012-12-06T20:58:19.943
> 
> 标签：rest, post, google-chrome-extension

我想测试我写的一个小 php 脚本，它接受 POST 请求。但是有没有办法在不编写 html 表单的情况下测试它。我尝试使用简单的 rest 客户端 chrome 扩展来做到这一点。但我不确定如何在其中进行 POST 请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T21:11:54.017

通过使用 Advanced REST Client，您可以发送一个 POST 请求，其中数据可以存储为表单数据（可能是最简单的）。

进入应用只需点击**第二个** `Form`标签，即可指定键值对。

这是应用程序的图像。

![高级休息客户端](../Images/ea1262915d85d777877ab794f35bcc10.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T21:04:22.360

我为此使用了一个非常好的 Chrome 扩展：REST 客户端或类似的。看看 chrome 市场，工具琳琅满目。

# java - Java 泛型和原始类型

> ID：13752436
> 
> 赞同：0
> 
> 时间：2012-12-06T20:58:36.007
> 
> 标签：java, generics, parameters, raw-types

当我以这种方式编写方法时。我收到这个警告：

> BaseEvent 是一个原始类型。对泛型 BaseEvent 的引用应该被参数化

```
@Override
public <T extends BaseEvent> void actionPerformed(T event) { ... } 
```

尽管警告标志很烦人，但代码仍然运行良好。当我以这种方式编写代码时，警告就会消失。

```
@Override
public <T> void actionPerformed(BaseEvent<T> event) { ... } 
```

对于上一条消息，它不能保证它是 BaseEvent 的子类。于是我又改了：

```
@Override
public <T extends EventObject> void actionPerformed(BaseEvent<T> event) { ... }

@Override
public <T extends BaseEvent<T>> void actionPerformed(BaseEvent<T> event) { ... } 
```

BaseEvent 类是我创建的扩展 EventOBject 的类

```
public abstract class BaseEvent<T> extends EventObject
{
    private String eventType;

    // Constructor
    public BaseEvent(Object source, String type) 
    {
        super(source);
        eventType = type;
    }

    public String getEventType()    { return eventType; }   
} 
```

所有方法似乎都可以正常工作。但我想知道哪个是更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:09:49.253

`T`你在哪里使用`BaseEvent`定义？通过以下方式定义它

```
public abstract class BaseEvent extends EventObject 
```

那么你不会收到警告

```
@Override
public void actionPerformed(BaseEvent event) { ... } 
```

**更新**

假设你`BaseEvent`真的需要参数化。然后写以下

```
@Override
public <T> void actionPerformed(BaseEvent<T> event) { ... } 
```

这将为您提供一个参数化的方法。

**更新 1**

`It doesn't guarantee that is a subClass of BaseEvent.`

确实如此。`<T>`是方法模板的参数。此参数根据定义转到`BaseEvent<T>`哪个子类`EventObject`。

**更新 2**

不要在学习开始时使用泛型。泛型仅用于额外的自我测试。使用原始类型。然后，当您开始感觉到它们时，您将正确地对它们进行参数化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:04:37.023

最好的解决方案是在编译时避免警告并保证您的类型安全。

如果 BaseEvent 中 T 的类型无关紧要，您不能只使用第一个并参数化 BaseEvent 吗？执行以下操作：

```
@Override
public <T extends BaseEvent<?>> void actionPerformed(T event) { ... } 
```

或者，看起来您的`BaseEvent`课程实际上并没有`T`用于任何事情 - 为什么会在那里？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:05:54.317

类型参数 T 从不在类定义中使用。您也许可以从以下位置删除类型参数`BaseEvent`：

```
public abstract class BaseEvent extends EventObject { ... } 
```

并且只定义没有类型参数的方法：

```
@Override
public void actionPerformed(BaseEvent event) { ... } 
```

# mysql - 如何一次在所有数据库上运行 sql 命令？

> ID：13752441
> 
> 赞同：3
> 
> 时间：2012-12-06T20:58:54.553
> 
> 标签：mysql, sql, wordpress, replace

我有大约 80 个 wordpress 博客，这些博客写了我的各种网站。我想为特定的文本字符串更新所有数据库中的所有帖子，在本例中为域名。

该脚本在一个数据库上运行良好，但我需要对所有数据库进行几处更改，这将花费太长时间。

我需要能够一次跨每个数据库运行这些命令，而不是一次运行一个数据库。

我的脚本，因为它目前在单个数据库上工作：

```
UPDATE wp_posts SET post_content = REPLACE(post_content, 'http://www.old-domain.com', 'http://mixudo.com'); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-16T13:13:43.800

尝试执行此查询：

```
SELECT CONCAT('UPDATE ', 
schema_name, '.\'wp_posts\' SET \'post_content\' = REPLACE(post_content, \'http://www.old-domain.com\', \'http://mixudo.com\');')
FROM information_schema.schemata
WHERE schema_name NOT IN ('information_schema','mysql','performance_schema','phpmyadmin', 'webauth'); 
```

然后重新执行结果。

来源：[https ://dba.stackexchange.com/a/20251](https://dba.stackexchange.com/a/20251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:03:07.597

1.  使用需要执行脚本的用户名/密码创建数据库名称列表
2.  对于此列表中的每个数据库，请执行以下操作：
3.  登录到该数据库并选择它
4.  在该数据库上运行脚本

这是安全完成任务的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:04:02.057

您可以使用 SHOW DATABASES 命令获取 mysql 服务器上的数据库列表。使用它作为输入，您可以使用任何语言编写 shell 脚本，该脚本将通过数据库列表进行 foreach()，并在每个数据库上运行 UPDATE 语句，方法是执行

```
use DBNAME; 
```

其中 DBNAME 是 foreach 中的变量。更新语句应该在所有数据库上都一样，因为我假设每个数据库都有相同的表集，每个表都有相同的表名。

就 Ed Heal 而言，这还假设您正在使用 root/admin 用户作为服务器，以便它有权更新所有表。

# datepicker - LightSwitch DatePicker 默认值

> ID：13752444
> 
> 赞同：4
> 
> 时间：2012-12-06T20:58:58.693
> 
> 标签：datepicker, default, visual-studio-lightswitch

在 LightSwitch 中，我的经验是，当查看空日期时，日期选择器将显示特定字段的最近查看日期。

例如：
1 我在列表和详细信息屏幕的一个详细信息页面上查看设置为“2012 年 5 月 1 日”的合同要约日期。
2\. 然后我转到另一个页面，其中 Contract Offer Date 为空
3\. 如果我调出日期选择器，它将选择 '5/1/2012' 开始。

有没有办法改变这种行为，所以如果日期为空，日期选择器将打开并选择当前日期？

谢谢你的帮助。

# mysql - 在重复中仅显示一次标题

> ID：13752445
> 
> 赞同：0
> 
> 时间：2012-12-06T20:59:18.770
> 
> 标签：mysql

我怎样才能在mysql中得到这个？我只想在重复中显示一次标题和 null

```
+-----------------------------+-------------+-------------+----------+
| title                       | created     | updated     | category |
+-----------------------------+---------------------+-----------------
| What If I Get Sick and Die? | 2008-12-30  | 2009-03-11  | angst    |
|                             | 2009-02-28  | NULL        | humor    |
|                             | 2009-03-02  | NULL        | advice   |
|                             | 2009-03-17  | NULL        | humor    |
| The Size of Our Galaxy      | 2009-04-03  | NULL        | science  |
|                             | 2009-03-02  | NULL        | advice   |
|                             | 2009-03-17  | NULL        | humor    |
|                             | 2009-04-03  | NULL        | science  |
+-----------------------------+---------------------+----------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:01:10.183

您可以使用以下查询来实现此目的：

```
SELECT CASE WHEN
(
    SELECT t1.id 
    FROM tablename t1 
    WHERE t1.title = t.title LIMIT 1
) = t.id THEN t.title
ELSE null END AS title
,t.created
,t.updated
,t.category
FROM tablename t 
```

# javascript - javascript：执行 appendChild(node) 然后尝试读取 node.clientWidth 失败

> ID：13752447
> 
> 赞同：3
> 
> 时间：2012-12-06T20:59:27.513
> 
> 标签：javascript, dom, appendchild

`appendChild()`我在使用 DOM方法 时遇到了问题。我创建一个节点，然后将此节点附加到父节点，然后我想读取`node.clientWidth`属性，但它返回 0，因为尚未绘制节点。这是我的代码：

```
var node = document.createElement('div');
node.textContent = 'some text';
parent.appendChild(node);
alert(node.clientWidth); //shows 0 
```

我尝试了节点上`onload`的`onshow`事件，但它们甚至没有被触发。我可以使用`setTimeout`它并且它正在工作，但这不是一个完美的解决方案。这个问题有好的解决方案吗？
对不起我的英语不好，非常感谢你！

**更新**：好的，我看到了我的问题。当时的父级没有附加到 DOM。抱歉，感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:02:30.570

如果您真的希望它在浏览器知道后立即为您提供 clientWidth，您可以这样做：

```
var node = document.createElement('div');
node.textContent = 'some text';
parent.appendChild(node);
var width = node.clientWidth;
while (width == 0) {
    width = node.clientWidth;
}
// stuff 
```

# flash - Flash CS6 中没有编译错误和警告

> ID：13752453
> 
> 赞同：-2
> 
> 时间：2012-12-06T20:59:41.117
> 
> 标签：flash, actionscript, flash-cs6

（请原谅我，我对 Flash 非常陌生）当我在 CS6 Pro 的 Flash 项目中创建 SWF 文件时（通过单击“测试项目”），我没有收到任何错误，也没有任何警告信息。无论actionscript代码是否正确都会创建SWF（如果代码不正确，SWF将无法正常工作，因此会受到代码更改的影响）。当我在 Flash 8 中执行相同操作时，我在输出选项卡中获得了编译错误信息，但在 CS6 中绝对没有...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:57:37.047

我必须打开 .fla 文件，然后选择“调试”。然后“编译器错误”窗口出现在“输出”窗口旁边。我现在只需单击“测试项目”，该窗口中就会出现所有错误。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T11:25:55.227

首先 - flash8 是 as2 而 cs6 是 as3。话虽如此，不要试图混合两种不同的东西。第二个是你的 Flash 的目标平台——你的目标是哪个 Flash Player 版本？Flash 播放器的目标版本决定了您可以使用哪些动作脚本功能。

# php - 带有 PHP MySQL 的 Ajax 函数不调用 php 页面

> ID：13752454
> 
> 赞同：0
> 
> 时间：2012-12-06T20:59:40.090
> 
> 标签：php, mysql, ajax

我有一个页面列出了来自 SQL 数据库的客户。它列出了他们留下的积分，我有一个按钮，我可以点击它来删除一个积分。完成的方式是，当您单击按钮时，它会调用一个 Ajax 函数，该函数运行一个 php 页面，该页面删除一个信用并在此之后回显该信用。

当我手动在 URL 中输入字符串时，php 页面工作正常，但 smy Ajax 函数一定是错误的。

这是带有表格的列表：

```
while ($data = mysql_fetch_object($result)) {
    print "<TR><TD>".$data->pass_name."</TD><TD><span id='credit'>".$data->credit_left."</span></TD><TD><form><input type='submit' value='- 1' onsubmit='removeOneCredit(pass_id=".$data->pass_id."&credit_left=".$data->credit_left.")'></form></TD></TR>\n";

} 
```

这是我的功能：

```
<script>
function removeOneCredit(str)
{
if (str=="")
  {
  document.getElementById("credit").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("credit").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","removeonecredit.php?"+str,true);
xmlhttp.send();
}
</script> 
```

我不确定为什么该功能不起作用。我知道 removeonecredit.php 正在做它的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:43:46.677

原来函数参数中的 = 是一个问题，我在这里发布了一个关于如何转义它的问题：[Javascript escape a equal sign PHP](https://stackoverflow.com/questions/13794271/javascript-escape-a-equal-sign-php)

# python - 需要帮助使用 Python 解析日志文件

> ID：13752458
> 
> 赞同：1
> 
> 时间：2012-12-06T20:59:46.500
> 
> 标签：python, if-statement, printing

我正在处理的 Python 脚本有问题，该脚本在日志文件中搜索文本字符串的出现，如果找到将它们打印到另一个文件，我尝试使用 break 但这会结束该过程，我最终得到另一个文件中只有一个条目，如果我不使用break，它将结束语句应用于所有不包含文本的行，基本上我想得到一个日志文件，其中包含所有出现的文本，如果源日志文件中的任何行中都没有出现文本我只想将一行打印到新日志文件中，说没有找到任何内容，这是我现在正在尝试的代码 -

```
with open("/var/log/syslog", "r") as vpnfile:
    for line in vpnfile:
        if "failed CHAP" in line:
            print (line,)
        elif "failed CHAP" not in line:    
            continue
        else:
            print ("Nadda") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:03:41.200

你是这个意思吗？

```
found = []
with open("/var/log/syslog", "r") as vpnfile:
    for line in vpnfile:
        if "failed CHAP" in line:
            found.append(line)
        # no need to check if "failed CHAP" is not in the line, since you
        # already know it's not there from the first test failing
if found:
    print(" ".join(found))
else:
    print("Nadda") 
```

# python - Python - 如何更改列表列表中的值？

> ID：13752461
> 
> 赞同：14
> 
> 时间：2012-12-06T20:59:52.167
> 
> 标签：python, python-2.7

我有一个列表列表，列表中的每个列表包含 5 个项目，如何更改列表中项目的值？我尝试了以下方法：

```
 for [itemnumber, ctype, x, y, delay] in execlist:
        if itemnumber == mynumber:
            ctype = myctype
            x = myx
            y = myy
            delay = mydelay 
```

最初我有一个元组列表，但我意识到我无法更改元组中的值，所以我切换到列表，但我仍然无法更改任何值。如果我从 for 循环中打印 ctype、x、y、delay、myctype、myx、myy 或 mydelay，则似乎一切正常，但如果我之后打印 execlist，我发现没有任何改变。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T21:09:06.540

问题是您正在创建列表的副本，然后修改副本。您要做的是修改原始列表。试试这个：

```
for i in range(len(execlist)):
    if execlist[i][0] == mynumber:
         execlist[i][1] = myctype
         execlist[i][2] = myx
         execlist[i][3] = myy
         execlist[i][4] = mydelay 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:08:33.500

您需要通过索引进行分配。假设您有一个列表列表，其中每个内部列表都有 5 个您描述的项目。如果您想遍历它们并更改每个内部列表中第二项的值，您可以执行以下操作：

```
l = [[0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14]]
for i in l:
    i[1] = "spam"

print l
(output) [[0, "spam", 2, 3, 4], [5, "spam", 7, 8, 9], [10, "spam", 12, 13, 14]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T21:08:41.187

你可以使用`enumerate()`：

```
for index, sublist in enumerate(execlist):
   if sublist[0] == mynumber:
       execlist[index][1] = myctype
       execlist[index][2] = myx
       execlist[index][3] = myy
       execlist[index][4] = mydelay
       # break 
```

您可以删除`#`if`execlist`最多包含一个子列表，其第一项可以等于`mynumber`; 否则，您将无用地循环遍历列表的其余部分。

如果`itemnumbers`事实上是独一无二的，你可能最好使用字典或至少一个`OrderedDict`，这取决于你打算对你的数据做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T21:08:36.603

变量解包似乎没有传递引用，而是复制了值。一个解决方案是这样做：

```
foo = [[1, "gggg"], [3, "zzzz"]]

for item in foo:
    item[0] = 2
    item[1] = "ffff"

print(foo)

>>>> [[2, 'ffff'], [2, 'ffff']] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:10:55.650

不要在列表中分配局部变量。在循环

```
for i in lis:
    i = 5 
```

只需将变量设置`i`为 5 并保持列表的实际内容不变。相反，您必须直接分配它：

```
for i in range(len(lis)):
     lis[i] = 5 
```

这同样适用于列表列表，尽管在这种情况下不必分配局部变量，因此您可以使用该`for...in`构造。

```
for i in listoflists:
     for i2 in range(len(i)):
          i[i2] = 5 #sets all items in all lists to 5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T21:21:13.967

更改在 中分配的变量`for`不会更改列表。这是一种相当易读的方法来做你想做的事：

```
execlist = [
    #itemnumber, ctype, x, y, delay
    [1, 2, 3, 4, 5],
    [6, 7, 8, 9, 10],
    [11, 12, 13, 14, 15],
]

mynumber, myctype, myx, myy, mydelay = 6, 100, 101, 102, 104

for i, sublist in enumerate(execlist):
   if sublist[0] == mynumber:
        execlist[i] = [mynumber, myctype, myx, myy, mydelay]

print execlist 
```

输出：

```
[[1, 2, 3, 4, 5], [6, 100, 101, 102, 104], [11, 12, 13, 14, 15]] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T21:22:29.743

迭代器变量是原始变量的副本（Python 本身没有引用的概念，尽管列表等结构是通过引用来引用的）。您需要执行以下操作：

```
for item in execlist:
    if item[0] == mynumber:
        item[1] = ctype
        item[2] = myx
        item[3] = myy
        item[4] = mydelay 
```

`item`它本身也是一个副本，但它是对原始嵌套列表的引用的副本，因此当您引用其元素时，原始列表会被更新。

这不方便，因为您没有名字；也许字典或类会是更方便的结构。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-28T19:49:44.767

这是我最近使用的一个例子，它是一个真正的心灵弯曲，但希望它可以帮助一些人！

pivot_peaks 是 pandas 数据帧的列表，其中一些是重复的。

```
# Create a new list with only a single entry for each item
new_list = []

for obj_index, obj in enumerate(pivot_peaks):
    add_new_frame = False

    if len(new_list) == 0:
        new_list.append(obj)
    else:
        for item in new_list:
            if item.equals(obj):
                add_new_frame = False
                break
            else:
                add_new_frame = True

        if add_new_frame == True:
            new_list.append(obj) 
```

# java - 使用 SmbFileInputStream

> ID：13752465
> 
> 赞同：0
> 
> 时间：2012-12-06T21:00:23.427
> 
> 标签：java, android, smb

> **可能重复：**
> [尝试使用 SmbFileInputStream](https://stackoverflow.com/questions/13871198/trying-to-use-smbfileinputstream)

这个问题已经被问了好几次，但他们没有帮助我。
我正在尝试使用 SmbFileInputStream 将我的 Android 连接到我的 PC，但应用程序中止且没有错误消息。
适用的代码如下所示：

```
SmbFileInputStream inFile = null;  
jcifs.Config.setProperty( "jcifs.netbios.wins", "192.168.2.2" ) }  
try {  inFile = new SmbFileInputStream( "smb://MIKE-PC/" );  }  
catch (SmbException e)          {  ListItems.add("SMB Error");  }  
catch (MalformedURLException e) {  ListItems.add("URL Error");  }  
catch (UnknownHostException e)  {  ListItems.add("Host Error");  } 
```

请注意，在我的 PC 上，192.168.2.2 = //MIKE-PC
而且我不在域中，只有本地网络。
当它中止时，它不会触发任何 catch 语句。
如果我注释掉 try/catch 块，它不会中止。

我尝试了上面的代码，不管有没有名字和密码，都没有奏效。

```
try {  inFile = new SmbFileInputStream( "smb://MIKE-PC_Network:123ABC@Mike-PC/" );  } 
```

我尝试使用文件夹名称而不是计算机名称，但它不起作用。

即使我没有给它网络名称或密码，我也能够使用另一个应用程序（不是 java）登录。
我怀疑我给它错误的网络信息。

我在上面的陈述中给了它正确的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:05:34.903

我需要结束这个问题。
上面的代码有一个明显的错字，我需要做更多的测试。
错字是 SmbFileInputStream 需要一个文件参数，而不是文件夹参数。但是，我更正的代码仍然不起作用，所以稍后我会在缩小范围时重新询问。

# jquery - 展开工具提示以显示更多内容

> ID：13752466
> 
> 赞同：0
> 
> 时间：2012-12-06T21:00:26.367
> 
> 标签：jquery

我有一个图标，上面有一个框，上面写着你好。当您将鼠标悬停在图标或框上时，我希望它展开并显示隐藏的文本（World on Hot Fiya！），就像阅读更多/阅读更少功能一样。我遇到的问题是，当框显示它时，它会覆盖图标，因为它会向下显示。我想知道我能做些什么，以便图标保持不变，并且框显示文本上升。

这是我正在使用的代码：

```
<div class="icon"><img src="icon.jpg"></div>
<div class="box">
  Hello
  <p>World on Hot Fiya</p>
</div>

$('.box p').addClass('is-hidden');

$('.box').hover(function() {
  $('.box p').removeClass('is-hidden').addClass('block');
}, function() {
  $('.box p').removeClass('block').addClass('is-hidden');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:44:08.610

****修改为包括评论请求****

这是我刚刚编写的一个插件，用于动态设置高度（基于它们的初始/自动高度） -

[http://jsfiddle.net/jmsessink/CTvMe/8/](http://jsfiddle.net/jmsessink/CTvMe/8/)

在准备好的 DOM 上调用函数，就像这样 -

```
$(function () {
    $('.box').tooltipSlider({tooltip:'.tool-tip', titleHeight:'20px'});
}); 
```

* * *

如上所示，此函数中的对象参数 tooltipSlider 是 -

```
.tooltipSlider(
    {
        tooltip: '(class that you want to be the tooltip)',
        titleHeight: '(initial height of tooltip above icon (non-hovered))px'
    }
); 
```

希望能为你涵盖它。

# javascript - 使用 MySQL 数据库中的 jQuery Flot 绘制数据

> ID：13752467
> 
> 赞同：1
> 
> 时间：2012-12-06T21:00:28.467
> 
> 标签：javascript, jquery, codeigniter, charts, flot

我试图让一个图表显示从 mysql 数据库生成的注册数据。数据格式似乎正确显示，但数据未绘制。请注意，我正在使用 CodeIgniter。

PHP：

```
public function graph_registrations()
    {
        $send = array();

        $i = 1;
        while($i <= 30){
            $startTime = mktime(0, 0, 0, date('m'), date('d')-$i, date('Y'));     
            $endTime = mktime(23, 59, 59, date('m'), date('d')-$i, date('Y'));
            $data = $this->admin_model->total_users_date($startTime, $endTime);
            $new = array(date("M j", $startTime), $data);
            $send[] = $new;
            $i++;
        }

        echo json_encode($send);
    } 
```

JS：

```
var jsonData = $.ajax({
          url: default_url+"admin/graph_registrations",
          dataType:"json",
          async: false
          }).responseText;

    console.log(jsonData);

    var graphData = [{
        // Visits
        data: jsonData,
        color: '#71c73e',
        points: { radius: 4, fillColor: '#71c73e' }
    }
];

    // Lines
$.plot($('#graph-lines'), graphData, {
    series: {
        points: {
            show: true,
            radius: 5
        },
        lines: {
            show: true
        },
        shadowSize: 0
    },
    grid: {
        color: '#646464',
        borderColor: 'transparent',
        borderWidth: 20,
        hoverable: true
    },
    xaxis: {
        tickColor: 'transparent',
        tickDecimals: 2
    },
    yaxis: {
        tickSize: 1000
    }
}); 
```

如果我手动硬编码数据，一切都会正常工作，但当我通过 ajax 获取数据时就不行。

这是 console.log(jsonData) 产生的：

```
[["Dec 5",0],["Dec 4",0],["Dec 3",0],["Dec 2",0],["Dec 1",0],["Nov 30",0],["Nov 29",0],["Nov 28",0],["Nov 27",0],["Nov 26",0],["Nov 25",0],["Nov 24",0],["Nov 23",0],["Nov 22",0],["Nov 21",0],["Nov 20",0],["Nov 19",0],["Nov 18",0],["Nov 17",0],["Nov 16",0],["Nov 15",0],["Nov 14",0],["Nov 13",0],["Nov 12",0],["Nov 11",0],["Nov 10",0],["Nov 9",1],["Nov 8",0],["Nov 7",0],["Nov 6",0]] 
```

我尝试在没有日期和简单数字的情况下进行操作，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:04:47.237

对我来说，您正试图在拥有数据之前绘制数据。我可以看到您正在使用“async:false”来等待数据加载我宁愿使用默认的“true”选项并将绘图函数放在 $.ajax 的“成功”回调中。

# python - 通过 rpy2 将符号值的 Python 列表传递给 R 图例调用

> ID：13752473
> 
> 赞同：1
> 
> 时间：2012-12-06T21:00:49.043
> 
> 标签：python, r, plot, legend, rpy2

我在尝试将 Python 列表传递给 R 图例调用以使用 rpy2 进行绘图时遇到问题。我从现有字典中生成文本名称及其对应符号的列表，如下所示：

```
 dataDict = {'data':{...},
                'symbols':{'xylem':14,'groundwater':17,'lagoon':16,'stream':15}}
    nameListForLegend = [name for name in dataDict["symbols"]]
    symbolListForLegend = [dataDict['symbols'][category] \
                           for category in dataDict['symbols']] 
```

nameListForLegend 变量在调用中起作用，但 symbolListForLegend 不起作用：

```
 r.legend(1.5, -42, nameListForLegend,
             pch = symbolListForLegend,cex=3,col="black",border = 0) 
```

我尝试将其作为 R 对象传递，并使用 hacky 解决方案，例如：

```
 #after converting each list element to a string
    symbolListString = ",".join(symbolListForLegend)
    symbolListForLegend = robjects.r('list('+symbolListString+')') 
```

全部返回：

```
 RRuntimeError: Error in plot.xy(xy.coords(x, y), type = type, ...) :invalid plotting symbol 
```

通常情况下，我在这里遗漏了一些简单的东西。任何对适当文档的帮助或指导将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:24.067

`symbolListForLegend`是一个 Python 列表，它没有直接转换为 R 对象（尽管它可以是具有默认命名元素的 R 列表）。R 函数需要一个向量。

尝试：

```
from rpy2.robjects.vectors import IntVector
symbolListForLegend = [dataDict['symbols'][category] \
                       for category in dataDict['symbols']
symbolVectorForLegend = IntVector(symbolListForLegend)
r.legend(1.5, -42, nameListForLegend,
         pch = symbolVectorForLegend, cex=3, col="black", border = 0) 
```

# xslt - 根据条件对xml节点进行排序

> ID：13752477
> 
> 赞同：0
> 
> 时间：2012-12-06T21:01:08.123
> 
> 标签：xslt

我有以下xml：

```
<Candidate:candidateInfo>
  <Candidate:name> AAA</Candidate:name>
  <Candidate:age>16</Candidate:age>
  <Candidate:sex>M</Candidate:sex>
</Candidate:candidateInfo>
<Candidate:candidateInfo>
  <Candidate:name> BBB</Candidate:name>
  <Candidate:age>28</Candidate:age>
  <Candidate:sex>F</Candidate:sex>
</Candidate:candidateInfo>
<Candidate:candidateInfo>
  <Candidate:name>CCC</Candidate:name>
  <Candidate:age>28</Candidate:age>
  <Candidate:sex>M</Candidate:sex>
</Candidate:candidateInfo> 
```

我需要按候选年龄的升序对节点进行排序。在 3 个排序值中，如果相应的年龄大于 18，我必须从中值（3 个中的第 2 个）元素填充所有信息。否则我有填充元素 3 中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:07:39.120

如果我正确理解了这个问题：

```
<xsl:template match="/">
    <xsl:apply-templates select="Candidate:candidateInfo[number(Candidate:age) > 18]">
        <xsl:sort-by select="number(Candidate:age)"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="Candidate:candidateInfo">
    <xsl:copy-of select="."/>
</xsl:template> 
```

此过滤器将删除 19 岁以下的所有候选信息元素。

# ssis - SSIS 派生列表达式

> ID：13752478
> 
> 赞同：3
> 
> 时间：2012-12-06T21:01:21.773
> 
> 标签：ssis, expression

从包含以下格式的年和月的列的平面文件中读取 --> “201212”。

我需要将它插入到 DATETIME2 列中，但首先我必须用“/”解析它并添加一个“01”作为日期。这样 201212 将变为 2012/12/01

我在派生列转换中的表达式如下所示：

```
(DT_DBTIMESTAMP2,0)((DT_WSTR,4)SUBSTRING(RptMthDTM,1,4) + "/" + (DT_WSTR,2)SUBSTRING(RptMthDTM,5,2) + "/" + "01") 
```

这似乎应该工作并且 SSIS 接受这一点（因为它可以解析表达式）但是在运行包时它会抛出一个完全无用的错误“尝试执行类型转换时发生错误”。连同它出现错误的列。

我没有构建这个包，它被抵押给我，我被告知让它工作。

在此先感谢互联网家庭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:46:04.883

DT_DBTIMESTAMP2 只能从特定的字符串格式转换：`yyyy-mm-dd hh:mm:ss[.fffffff]`

您可以改用此表达式：

```
(DT_DBTIMESTAMP2,0)((DT_WSTR,4)SUBSTRING(RptMthDTM,1,4) + "-" + (DT_WSTR,2)SUBSTRING(RptMthDTM,5,2) + "-" + "01 00:00:00") 
```

更多详细信息：[http://msdn.microsoft.com/en-us/library/ms141036.aspx][1]

# java - 为什么这段代码不抛出 NullPointerException

> ID：13752479
> 
> 赞同：12
> 
> 时间：2012-12-06T21:01:25.190
> 
> 标签：java, static, classloader, static-methods

我只是在和我的朋友讨论使用类名调用静态方法并尝试了这段代码，并希望它在运行时抛出 NPE。但事实证明它很有效。我只是想了解执行顺序。

```
public class One {

    public static void method() {
        System.out.println("in static one");
    }
}

public class Two {

    static One o;

    public static void main(String[] args) {
        o.method(); // expected NPE here, as o is null
    }
} 
```

**我知道应该使用它们的类名调用静态方法，我什至知道当我们使用实例调用静态方法时，IDE 会发出编译器警告**。但是我们也可以通过创建实例来调用它们，但是，我从未在这里创建过实例，`o`应该将其默认值设为 null，因此调用`o.method()`应该在运行时抛出 NPE，但事实并非如此。你们能否解释一下这段代码中的执行顺序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T21:13:13.713

它之所以有效，是因为重要的是该字段的*编译时类型。*`o`编译器将编译`o.method()`成与`One.method()`.

特别是，如果你有一个`Two`扩展类`One`，并且都声明了一个`static void method()`，那么

```
One x = new Two();
x.method(); // calls One.method(), not Two.method() 
```

有利于混淆目的，不太利于可维护性......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T21:04:03.603

`method`是静态的，所以它不关心`One`实例。

```
One o = null;
o.method(); 
```

是相同的：

```
One.method(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:05:34.490

**`static`方法或变量与类定义本身相关联**，而不与类实例相关联。因此，您`method()`在 上可用`o`，但理想情况下，您应该使用类名本身来调用它：

```
 One.method();//static way of calling static methods 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:07:08.963

因为您`static One o;`在函数外部声明`main`。您可以尝试在`main`函数内部声明它，甚至无法编译...

或者您可以将其声明为`One o = null`in `main`，然后它将被编译但它与`One.method()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:10:34.073

如果您会在开发环境（例如 Eclipse）中打开代码，而不是通过在此处显示代码来愚弄人们，它确实为斜体样式的静态方法提供代码格式，那么您会看到 checkstyle 声称“不要在实例上调用静态方法”。

所以应该是

```
One.method() 
```

代替

```
o.method() 
```

那么它为什么不崩溃就很清楚了！

# c++ - 虚拟继承，一个类就够了？

> ID：13752482
> 
> 赞同：10
> 
> 时间：2012-12-06T21:01:29.767
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

我了解虚拟继承的概念，但我无法在任何地方找到答案。假设您有继承类 B 和 C 的类 D。B 和 C 都继承类 A。因此您可以使 B 和 C 虚拟继承 A 以避免 A 的两个实例。但是您是否必须在 B 和 C 上都指定虚拟继承或者如果两者中的一个实际上继承了 A 而另一个没有，它是否已经只创建了一个 A 实例？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T21:06:12.130

他们都必须是`virtual`。从 C++11 10.1 [class.mi]/7 开始：

一个类可以同时具有给定类型的虚拟和非虚拟基类。

```
class B { /* ... */ };
class X : virtual public B { /* ... */ };
class Y : virtual public B { /* ... */ };
class Z : public B { /* ... */ };
class AA : public X, public Y, public Z { /* ... */ }; 
```

对于 class 的对象，类格中`AA`基类的所有虚拟出现对应于类型对象中的单个子对象，并且类格中的（非虚拟）基类的每隔一次出现对应于一对-在 type 的对象中具有不同的子对象。给定上面定义的类，类有两个类的子对象：'s和由and共享的虚拟对象，如下所示。`B``AA``B``AA``B``AA``B``AA``AA``AA``B``Z``B``B``X``Y`

![虚拟继承示例](../Images/a0c54c40030041c4704627a350220f61.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T21:11:29.603

您需要为 B 和 C 指定一个虚拟继承以拥有一个 A。否则，未使用虚拟继承的类将“共享”类 A。

这可以使一个人拥有以下内容：

![遗产](../Images/fb12645baad170075bbe3f4e44fe5d3b.png)

为什么要这样做是另一回事。

# .net - 编写异步单点触控代码

> ID：13752484
> 
> 赞同：4
> 
> 时间：2012-12-06T21:01:34.230
> 
> 标签：.net, asynchronous, xamarin.ios, task-parallel-library, azure-mobile-services

所以我有一个必须执行三个任务的方法。第一个任务必须在另外两个之前完成，可以并行执行。这就是我现在所拥有的（为简单起见进行了修改）

```
void facebookButtonClicked (object sender, EventArgs e)
        {
            View.Add (loadingOverlay);
            AppDelegate.MobileService = new MobileServiceClient ("myserverUrl", "myApiKey");
            var users= AppDelegate.MobileService.GetTable<User> ();
            var identities= AppDelegate.MobileService
                .GetTable ("Identities");
            AppDelegate.MobileService
                .LoginAsync (this, MobileServiceAuthenticationProvider.Facebook)
                    .ContinueWith (t => {
                if (t.Status == TaskStatus.RanToCompletion) {
                            AppDelegate.mobileServiceUser = t.Result;
                            var task1 = users.InsertAsync(new User{BirthDate = DateTime.Now});
                            var task2 = identities.ReadAsync("");
                            Task.Factory.ContinueWhenAll(new Task[]{task1,task2},_=>{
                                if(task1.Status==TaskStatus.RanToCompletion && task2.Status== TaskStatus.RanToCompletion)
                                {
                                    var token = task2.Result
                                        .GetArray()[0]
                                        .GetObject ()
                                        .GetNamedObject ("identities")
                                        .GetNamedObject ("facebook")
                                        .GetNamedString ("accessToken");    

                                SaveAuthorization (token);
                                NavigationController.PushViewController (new TabBarController (), false);
                                }
                            });             
                        }});
        } 
```

问题是（除了我是异步代码的新手）当它尝试执行“PushViewController”时，我得到：

> UIKit.UIKitThreadAccessException：UIKit 一致性错误：您正在调用只能从 UI 线程调用的 UIKit 方法

如何重构/修改此代码以修复它？请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T21:23:57.130

我调用 InvokeOnMainThread 并在我的异步方法中使用匿名函数。

```
InvokeOnMainThread(() => {  
    NavigationController.PushViewController (new TabBarController(), false);
}); 
```

如果由于某种原因你在一个静态类中（就像我一样），你可以这样做

```
new NSObject().InvokeOnMainThread(() => {   
    NavigationController.PushViewController (new TabBarController(), false);
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T21:07:10.953

看看 InvokeOnMainThread 或 BeginInvokeOnMainThread

[http://docs.xamarin.com/ios/Guides/Advanced_Topics/Threading#Developing_Responsive_Applications](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Threading#Developing_Responsive_Applications)

```
NavigationController.BeginInvokeOnMainThread (delegate { 
    NavigationController.PushViewController (new TabBarController (), false);
}); 
```

# flash - Adobe Flash Builder 中的数据绑定

> ID：13752485
> 
> 赞同：1
> 
> 时间：2012-12-06T21:01:36.703
> 
> 标签：flash, apache-flex, adobe, builder

我有一个应用程序，其中有 2 个对象： A`List`和 a `ComboBox`。在`List`我有一套物品。单击其中一个项目时，我希望`ComboBox's`更改这些项目。到目前为止我有这段代码，但我不知道从这里去哪里。

```
protected function list_changeHandler(event:IndexChangeEvent):void
        {
            if(list.selectedItem.stores == "Dodge")
            {

                //comboBox.?????
            }
        } 
```

我在项目中也设置了 Cold Fusion 的数据服务。我有一个商店列表，`Dodge Toyota Hyundai Mazda Nissan Jacksonville`填充`List`. 当用户选择商店时，需要过滤`Names`的数据有数百个。`ComboBox`例如，如果我选择`Dodge`商店，我希望组合框仅填充商店属性为 的用户`Dodge`。我怎么做？我希望这一切都有意义:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:59:34.367

我可以想到两种方法来处理这种情况。您选择哪个方向，取决于您的用例（我对此知之甚少）。

# 全部加载并过滤

您将所有可能出现在 ComboBox 中的项目列成一个大列表。您确保这些项目具有`parentId`属性。然后，当用户从列表中选择项目时，您可以使用此属性过滤项目。

```
private var comboboxItems:ArrayCollection;

override public function initialize():void {
    super.initialize();

    myService.getAllComboboxItems(setComboboxItems);
}

private function setComboboxItems(event:ResultEvent):void {
    combobox.dataprovider = comboboxItems = event.result as ArrayCollection;
    comboboxItems.filterFunction = isParentSelected;
}

private function isParentSelected(item:ComboboxItem):Boolean {
    return item.parentId = list.selectedItem.id;
}

protected function list_changeHandler(event:IndexChangeEvent):void {
    if (list.selectedItem.stores == "Dodge") {
        comboboxItems.refresh(); 
    }
} 
```

注意：这只是我正在编写的代码，所以它可能无法开箱即用，但它传达了这个想法。

# Load'm when you need'm

每次在 List 中选择一个项目时，进行服务调用以获取相应的 ComboBox 项目，并使用传入的结果设置 dataProvider。

```
protected function list_changeHandler(event:IndexChangeEvent):void {
    if (list.selectedItem.stores == "Dodge") {
        service.getComboBoxItemsByParentId(list.selectedItem.id, setComboboxItems); 
    }
}

private function setComboboxItems(event:ResultEvent):void {
    combobox.dataprovider = event.result as ArrayCollection;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:05:16.367

尝试更改组合框的数据提供程序，例如

```
protected function list_changeHandler(event:IndexChangeEvent):void
    {
        if(list.selectedItem.stores == "Dodge")
        {
            comboBox.dataProvider=array; 
            //or
            comboBox.dataProvider=xmlList;
        }
    } 
```

# mysql - mysql 选择查询的复选框

> ID：13752489
> 
> 赞同：0
> 
> 时间：2012-12-06T21:01:47.953
> 
> 标签：mysql

我正在尝试构建一个使用 html 表单中的复选框的查询。我不确定是否应该创建一个数组，但目前我只能从其中一个复选框中获得结果。

这是我的复选框设置。

```
<input type="checkbox" name="color[]" value="Black">Black
<input type="checkbox" name="color[]" value="Blue">Blue
<input type="checkbox" name="color[]" value="Brown">Brown
<input type="checkbox" name="color[]" value="Green">Green
<input type="checkbox" name="color[]" value="Grey">Grey
<input type="checkbox" name="color[]" value="Orange">Orange
<input type="checkbox" name="color[]" value="Pink">Pink
<input type="checkbox" name="color[]" value="Purple">Purple
<input type="checkbox" name="color[]" value="Red">Red
<input type="checkbox" name="color[]" value="Teal">Teal
<input type="checkbox" name="color[]" value="White">White
<input type="checkbox" name="color[]" value="Yellow">Yellow 
```

这是我的 php 和 mysql 查询

```
extract($_GET);

$Color =  $color[];

$query = "SELECT * FROM tblYarn WHERE Color ='".$Color."'";
$result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
```

我正在尝试按颜色选择纱线，一次只能获得一种颜色。

这是我的显示表代码

```
echo "<table>\n";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo "\t<tr>\n";
foreach ($line as $col_value) {
echo "\t\t<td>$col_value</td>\n";
}
echo "<td><img src=./images/$col_value border='3' ></td>";

echo "\t</tr>\n";
}
echo "</table>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:18:04.607

这应该有效：

```
extract($_GET);

$query = "SELECT * FROM tblYarn WHERE Color IN ('" . implode("','",$color) . "')";
$result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
```

# python - BigQuery 未准确返回结果

> ID：13752493
> 
> 赞同：2
> 
> 时间：2012-12-06T21:01:53.737
> 
> 标签：python, google-app-engine, google-api, google-bigquery

我正在使用 GoogleApp Engine，有时当我通过 JSON API 向 BigQuery 发送查询时，我会得到不正确的结果。它通常仅限于 BigQuery 中的一个表（我为每个创建的批处理作业创建一个新表）。当我在生产中遇到这个问题时，我会记录我提交的查询并尝试通过 BigQuery 仪表板运行它，该仪表板的运行时间比预期的要长，但会返回预期的结果。

响应中没有任何内容表明存在问题。`jobComplete`回来了，但`True`我看不到`rows`，只有`jobReference`, `schema`和`totalRows = 0`。

在这种情况下是否适合进行调用以获取作业结果，即使我应该期望当前调用返回结果？

相关代码：

```
http = httplib2.Http(memcache)
self.credentials = AppAssertionCredentials(scope='https://www.googleapis.com/auth/bigquery')
self.http = self.credentials.authorize(http=http)
self.service = build('bigquery','v2',http=self.http)
jobs = self.service.jobs()
result = jobs.query(projectId=settings.GOOGLE_APIS_PROJECT_ID,
                                body={'query': query}).execute() 
```

回复：

```
{u'totalRows': u'0', u'kind': u'bigquery#queryResponse', u'jobComplete': True, u'jobReference': {u'projectId': u'<REMOVED>', u'jobId': u'<REMOVED>'}, u'schema': {u'fields': [<REMOVED>]}} 
```

无论我尝试在生产中重新运行查询多少次，都会返回相同的结果（这可能是由于通过 memcache 完成的缓存将不正确的结果缓存为响应？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:20:36.020

问题是以下几种情况的混合：

1.  共享的 http 对象不是线程安全的！（https://developers.google.com/api-client-library/python/guide/thread_safety）。尽管 GAE 上使用 BigQuery 的大多数示例都使用共享的 httplib2 对象，但这是不正确的用法。只有凭证存储是线程安全的并且可以共享
2.  BigQuery 上的查询有 10 秒超时。

我正在使用共享的 http 对象和任务队列并行多次调用 BigQuery，并且查询需要 10 多秒才能完成。这就是为什么响应会在呼叫之间混合，结果不会像预期的那样。例如 - 我有时会收到对我的查询请求的发现响应

**修复：**

重新编写我的 BigQuery 客户端代码，以便在调用之间不共享 httplib2 对象，并将我的进程解耦以提交 BigQuery 作业以运行查询，而不是使用 query() 调用。在管理呼叫、检查状态和接收结果方面有更多的开销，但至少它现在可以工作并且响应是有意义的。

# android - iOS6、android和位置：固定和缩放

> ID：13752495
> 
> 赞同：1
> 
> 时间：2012-12-06T21:02:01.937
> 
> 标签：android, ios, css

我有一个具有以下配置的网站：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=5.0;minimum-scale=1.0;user-scalable=1;" /> 
```

和一个 div 元素

```
<div style="position:fixed;top:0;left:0;width:100%;height:40px;">Fixed Header Content</div> 
```

（您可以在此处找到示例：http: [//massmatics.de/demo/test.html](http://massmatics.de/demo/test.html)）

在 iOS 上观看此站点并进行缩放时，此元素的大小会增加，但会超出缩放区域。

在 android 上执行相同的操作时（在 Nexus 平板电脑上与 Android 4.x 测试）固定元素在缩放时消失，但当此操作完成后，它会在缩放区域显示为增加的版本。

我认为 chrome 的行为是正确的，但我现在的问题是：

有没有办法在 android 上获得与在 iOS 上相同的行为？

我问的原因是页面上有很多内容，在小型设备上查看时应该缩放，但在 Android 上，放大的固定元素占用了所有空间，因此缩放并不是真正的优势。

此致

更新：我在示例中添加了 position:fixed 的 JS 实现（我知道，性能很差，仅用于测试目的。） - 仍然与 position:fixed 的行为相同。是否有用户缩放页面的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:04:05.057

position:fixed 支持是去年在 iOS5 中添加的——根据我的经验，Android 处理这些元素的方式不一致。

我相信完成你想要做的事情的唯一可预测的方法是用 JavaScript 将它全部连接起来。可能不是您希望的答案，但 position:fixed 无论如何都很少是移动设备上的正确解决方案。

# objective-c - 加载plist时数组下标不是整数

> ID：13752496
> 
> 赞同：2
> 
> 时间：2012-12-06T21:02:05.500
> 
> 标签：objective-c, ios, nsmutablearray, plist, nsdictionary

我对 iOS / Objective C 非常陌生，但多年来我一直在使用多种不同的语言进行编程。

我们公司已对现有的 iOS 应用程序进行修改。现在我正在尝试加载一个 plist 文件并用它的内容填充一个 UITableView 。我的代码创建单元时出错，我不确定发生了什么。

这是我的 plist 文件，非常简单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <array>
        <dict>
            <key>title</key><string>Un</string>
            <key>subtitle</key><string>Subtitle</string>
        </dict>
        <dict>
            <key>title</key><string>Deux</string>
            <key>subtitle</key><string>Subtitle</string>
        </dict>
    </array>
</plist> 
```

这是我将 plist 文件加载到内存中的位置：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSString *plistCatPath = [[NSBundle mainBundle] pathForResource:@"resources" ofType:@"plist"];
    resources = [NSMutableArray arrayWithContentsOfFile:plistCatPath];
} 
```

这是我尝试访问属性的地方。我在编译时遇到错误的地方添加了注释：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int index = (int) indexPath.row;
    UITableViewCell *cell =[factory cellOfKind:@"cell" forTable:tableView];
    [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    UILabel *lblTitle = (UILabel*)[cell viewWithTag:2];
    UILabel *lblSubtitle = (UILabel*)[cell viewWithTag:3];
    NSDictionary *resource = resources[index]; // incompatible types in initialization
    NSString *row_title = resource[@"title"]; // array subscript is not an integer
    NSString *row_subtitle = resource[@"subtitle"]; // array subscript is not an integer
    [lblTitle setText: row_title];
    [lblSubtitle setText: row_subtitle];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:56:00.790

正如 H2CO3 所说，这种语法是对象下标的一部分，它是与 Xcode 4.4 和 4.5 一起发布的“现代 Objective-C”的一部分。

有关非数字下标的讨论，请访问[Objective-C Literals](http://clang.llvm.org/docs/ObjectiveCLiterals.html)站点并向下滚动到标题为“下标方法”（Apple 有时称之为“装箱语法”或“装箱语法”）的部分，你会看到它在那里讨论。我在答案的底部包含了其他参考资料。

第一个示例是**数组样式下标**，用于在数组中查找值：

```
NSArray *resources = ... // however it was defined
NSDictionary *resource = resources[index]; 
```

编译器将其转换为：

```
NSDictionary *resource = [resources objectAtIndexedSubscript:index]; 
```

如果您不想在您的机器上升级 Xcode（和编译器），您可以替换它，您可以简单地将数组样式的下标替换为传统`objectAtIndex`语法：

```
NSDictionary *resource = [resources objectAtIndex:index]; 
```

同样，您向我们展示的第二个示例是使用非数字下标。这是**字典式下标**：

```
NSString *row_title = resource[@"title"]; 
```

编译器将转换为：

```
NSString *row_title = [resource objectForKeyedSubscript:@"title"]; 
```

同样，如果您不想升级您的 Xcode（及其编译器），传统的等价物是：

```
NSString *row_title = [resource objectForKey:@"title"]; 
```

归根结底，也许你会很幸运，这种下标的使用`NSArray`仅限`NSDictionary`于这种方法。但是该项目已被重构为使用“Modern Objective-C”，您可能会看到其他 Modern Objective-C 构造，例如**数组文字**：

```
NSArray *array = @[@"one", @"two", @"three"]; 
```

如果您在此项目中的任何地方都有它，您的旧编译器将无法理解该数组文字语法，您必须将其替换为：

```
NSArray *array = [NSArray arrayWithObjects:@"one", @"two", @"three", nil]; 
```

同样，您可能会看到**字典文字**：

```
NSDictionary *dictionary = @{@"key1" : @"value1", @"key2" : @"value2"}; 
```

您必须将其替换为：

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"value1", @"key1", @"value2", @"key2", nil]; 
```

最后，您可能也有**数字文字**，例如：

```
NSNumber *number = @4;
NSNumber *done = @YES; 
```

这相当于

```
NSNumber *number = [NSNumber numberWithInt:4];
NSNumber *done = [NSNumber numberWithBool:YES]; 
```

根据您的项目有多少现代 Objective-C，您可能需要执行相当多的编辑。或者，如果您可以升级到 Xcode 4.5 或更高版本，您将能够顺利编译此代码。

Xcode 4.5 中还有很多其他非常有用的构造，包括新的`NSDictionary`枚举方法、类型化枚举、字符串文字等。你应该观看 Modern Objective-C 的 WWDC 2012 会议，这样你就会知道你在做什么坚持使用旧的编译器会错失良机，因此您也可以弄清楚如何破译您可能会在 Stack Overflow 或其他地方看到的现代 Objective-C 代码。

有关更多信息，请参阅：

*   [使用 Objective C 编程中数组讨论的](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/FoundationTypesandCollections/FoundationTypesandCollections.html#//apple_ref/doc/uid/TP40011210-CH7-SW13)“文字语法”部分
*   [LLVM 站点上的Objective-C 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)讨论
*   WWDC 2012[现代 Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)
*   WWDC 2012[迁移到现代 Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=413)
*   请参阅[Objective-C 功能可用性索引](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html)，以更好地了解哪些 Xcode 版本添加了哪些功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:25:05.397

这是因为显然您使用的旧编译器无法识别新的对象文字语法。如果您不想升级，请在`NSArray`和上使用适当的实例方法`NSDictionary`：

```
NSDictionary *resource = [resources objectAtIndex:index];
NSString *row_title = [resource objectForKey:@"title"];
NSString *row_subtitle = [resource objectForKey:@"subtitle"]; 
```

如果您选择这种方法，您将保持向后兼容性，这很好。

# r - 在 R 中，如何通过来自第二个数据帧的标识符选择一个数据帧中的条目行

> ID：13752502
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:02:27.143
> 
> 标签：r

> **可能重复：**
> [在 R 中，如何通过来自另一个 data.frame 的值对 data.frame 进行子集化？](https://stackoverflow.com/questions/9775972/in-r-how-do-i-subset-a-data-frame-by-values-from-another-data-frame)

我有两个data.frames。第一个 (df1) 是包含 100 个条目的单列，带有标题 - “名称”。第二个（df2）是一个数据框，其中包含数以万计条目的数百列元数据。df2 的第一列也有标题“名称”。

我只是想通过 df1 中找到的名称子集选择 df2 中的所有元数据。

请帮助这个新手 R 用户。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:08:54.900

您可以将 data.frame 与 %in% 一起使用，但如果您要查找数千个名称，它可能会很慢。

我建议使用 data.table，因为它对索引列进行排序，并且即使有数百万条记录也可以进行几乎瞬时的数据库连接。阅读 data.table 文档以获取更多信息。

假设你有一个大的 data.frame 和一个小的 data.frame：

```
library(data.table)
big <- data.frame(names=1:5, data=1:5)
small <- data.frame(names=c(1, 3, 6)) 
```

将它们变成 data.table 对象并将键列设置为名称。

```
big <- data.table(big, key='names')
small <- data.table(small, key='names') 
```

现在执行连接。data.table 中的 [] 允许一个 data.table 被另一个 data.table 的键列索引。在这种情况下，我们返回 big 的行也在 small 中，如果 small 中有名称但 big 中没有名称，则会丢失数据。

```
big[small]
#    names data
# 1:     1    1
# 2:     3    3
# 3:     6   NA 
```

# iphone - 使用 StoryBoards 时，我可以使用 presentViewController:animated:completion: 来呈现视图控制器吗？

> ID：13752505
> 
> 赞同：0
> 
> 时间：2012-12-06T21:02:32.483
> 
> 标签：iphone, ios, storyboard, segue

我想知道，当我使用故事板时，我是否仍然可以使用该方法呈现视图控制器`presentViewController:(UIViewController *) animated:(BOOL) completion:^(void)completion`？

还是我必须使用segues？

在我的项目中，有一个 VC 可以由 Hole 应用程序中的任何其他 VC 提供，所以如果我使用 segue，那么同一个 VC 会有大约 20 个 segue。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:05:50.890

那应该仍然有效。在调用该方法之前，您将使用`instantiateViewControllerWithIdentifier:`其故事板定义创建视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:35:48.920

您基本上可以将 StoryBoard ID 分配给要由任何其他 UIViewController 呈现的 UIViewController。

![故事板 ID](../Images/9175fd0a177d908f2d9a71fc91fbf529.png)

然后你必须在你希望它呈现它的 UIViewController 的 .h 文件的顶部导入 UIViewController 子类，例如我在这里有我想要呈现的 BaseViewController 和 InfoViewController：

```
#import <UIKit/UIKit.h>
#import "InfoViewController.h"

@interface BaseViewController : UIViewController
{
    InfoViewController *InfoViewController;
}

@property (nonatomic, strong) InfoViewController *InfoViewController; 
```

然后在 .m 文件中，您必须合成它并键入实现代码。我在这里使用了一个按钮来显示 InfoViewController 和一个名为*ShowInfoAction的**IBAction*。

 *```
 @synthesize InfoViewController = _InfoViewController;

    - (IBAction)ShowInfoAction:(id)sender {
        InfoViewController *InfoVC = [self.storyboard instantiateViewControllerWithIdentifier:@"GiveItAnIDHere"];
        [self presentViewController:InfoVC animated:YES completion:NULL];
    } 
```*

# python - 元组列表内容的简短概述

> ID：13752507
> 
> 赞同：2
> 
> 时间：2012-12-06T21:02:37.147
> 
> 标签：python, debugging, tuples

假设一个元组列表，其内容为任意长度：

```
quotes = [('Shakespeare', 'Piccard', 'Allen'),
          ("To be, or not to be", "Earl Grey, 60 degrees", "I feel that life is divided into the horrible and the miserable. That's the two categories. The horrible are like, I don't know, terminal cases, you know, and blind people, crippled. I don't know how they get through life. It's amazing to me. And the miserable is everyone else. So you should be thankful that you're miserable, because that's very lucky, to be miserable."),
          ('beer', 'tea', 'vodka')
         ] 
```

出于调试目的，我想输出列表的内容：

```
print str(quotes) 
```

但是，我只想要任何元组值的前 N ​​个字符，如果它像第三个引号一样长，我不需要整个内容。**我知道我可以编写一个函数来遍历列表，然后遍历每个元组并切片前 N 个字符，但是作为 Python，我怀疑有一种更简单、更短、更“Pythonic”的方式。**在那儿？

我不是在为当前示例寻找 XY 解决方案，它只是说明一点的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:14:02.253

不确定这是否足够pythonic，但仍然：

```
N = 10
map(lambda t: map(lambda s: s[:N], t), quotes) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:20:41.103

我会尝试子类化[`PrettyPrinter`](http://docs.python.org/2/library/pprint.html#pprint.PrettyPrinter)。浏览源代码，您想要覆盖的方法似乎是`format(self, object, context, maxlevels, level)`：

```
import pprint

class TruncatingPrettyPrinter(pprint.PrettyPrinter):
    def format(self, object, context, maxlevels, level):
        if isinstance(object, basestring):
            object = object[:72]+"..." # shorten strings to under 80 chars

        return pprint.PrettyPrinter.format(self, object, context, maxlevels, level)

TruncatingPrettyPrinter().pprint(quotes) 
```

这与包装和对齐结构并不*完全相同。*它也只截断原始对象图中的字符串，而不是任何其他结构的结果字符串表示，但它完成了基本工作（没有输出太宽）。`print str(quotes)``pprint`

# matlab - 将matlab矩阵分成几个相等的部分

> ID：13752511
> 
> 赞同：7
> 
> 时间：2012-12-06T21:03:01.497
> 
> 标签：matlab, matrix, k-means

我有一个大小矩阵`64500x17`。它表示检测到的 texton 特征，我必须使用这些特征来为`kmeans`.

我需要的是：

*   将此矩阵拆分为 5 个`12900x17`矩阵
*   找到方法
*   将这些连接成一个`5x17`矩阵以馈入 的起始参数`kmeans`。

我知道如何做几乎所有事情（`cat`,`kmeans`等），但我只是想找到一种方法将矩阵拆分为 5 个部分，或求和/除以所需的大小。

我被禁止过度使用 for 循环（由于效率），除非绝对必要。

我在其他问题中找不到任何相关的例子，所以如果已经回答，请多多包涵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:28:43.730

你可以使用`mat2cell`这个 oneliner

```
C = mat2cell(A, repmat(12900, 5, 1), 17); 
```

第二个参数`mat2cell`是矩阵的行拆分。

现在`C`是一个元胞数组：

```
C = 

[12900x17 double]
[12900x17 double]
[12900x17 double]
[12900x17 double]
[12900x17 double] 
```

并且可以将部分矩阵访问为

```
C{1} etc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:24:06.840

只需使用索引并将提取的矩阵存储在单元格中以便于处理：

```
data = rand(64500,17);
Nsubsets = 5;
Nsubsize = size(data,1)/Nsubsets;

splitted_data = cell(Nsubsets ,1);
splitted_data_means = cell(Nsubsets,1);

for ii=1:Nsubsets 
    splitted_data{ii} = data((ii-1)*Nsubsize + (1:Nsubsize),:);
    splitted_data_means{ii} = mean(splitted_data{ii});
end 
```

然后，您可以通过以下方式加入这些方式：

```
joined_means = cell2mat(splitted_data_means); 
```

或者只是为了使用单线：

```
joined_means = cell2mat(arrayfun(@(ii) mean(data((ii-1)*12900+(1:12900),:)),(1:5)','uni',false)); 
```

使用@angainor's 会更简单`mat2cell`：

```
joined_means = cell2mat(cellfun(@mean,mat2cell(data, 12900*ones(5,1), 17),'uni',false)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:17:56.953

要获取第一个子矩阵，请使用冒号：

```
A(1:12900,:) 
```

然后

```
A(12901:12900*2,:) 
```

等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-13T10:36:22.497

可能最快的解决方案是：

```
data = rand(64500,17);
Nsubsets = 5;
Nsubsize = size(data,1)/Nsubsets;
joined_means=squeeze(mean(reshape(data,Nsubsize,Nsubsets,size(data,2)),1)); 
```

拆分第一维和第二维，然后您可以计算每个 Nsubsets 元素的第一维的平均值。

# php - 如何查询简单机器论坛的主题流行度/评级

> ID：13752517
> 
> 赞同：3
> 
> 时间：2012-12-06T21:03:44.683
> 
> 标签：php, c++, html, simple-machines-forum

有没有办法（或 API）将远程 SMF 站点排队以获得特定时间范围内的热门/热门主题，比如过去 24 小时？如果没有，关于我如何跟踪这个的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:22:29.897

不确定这是否可能，但我知道 SMF 方面的“API”在哪里，可以让您调用最新的帖子。看看这个：[http ://wiki.simplemachines.org/smf/Using_SSI.php](http://wiki.simplemachines.org/smf/Using_SSI.php)

# maven - 如何更改maven java home

> ID：13752519
> 
> 赞同：83
> 
> 时间：2012-12-06T21:03:55.677
> 
> 标签：maven, java, openjdk

我想用sun jdk更改打开jdk的maven java home。我该怎么做 ？

```
root@ak-EasyNote-TM98:~# mvn -version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.6.0_24, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/java-6-openjdk-amd64/jre
Default locale: tr_TR, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-34-generic", arch: "amd64", family: "unix"

Edit: 
```

非常抱歉。我忘了写下面的代码：

```
root@ak-EasyNote-TM98:~$ java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

我的 java home 默认路径已经是 sun jdk。但是maven java home已经指向openjdk。我只想为 Maven 修复它。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-06T21:10:01.183

如果您在 Linux 中，请使用语法设置 JAVA_HOME `export JAVA_HOME=<path-to-java>`。实际上，它不仅适用于 Maven。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-06-16T14:42:40.017

我正在**使用 Mac**，上面的答案都没有帮助我。我发现 maven 从以下指定的路径加载自己的 JAVA_HOME：`~/.mavenrc`

我将文件的内容更改为：`JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home`

对于**Linux**，它看起来像：
`export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-04-23T19:53:53.140

为 MAVEN 强制使用特定 JVM 的最佳方法是创建由 mvn 脚本加载的系统范围文件。

该文件是`/etc/mavenrc`并且它必须声明一个`JAVA_HOME`指向您特定 JVM 的环境变量。

例子：

```
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 
```

如果文件存在，则加载它。

这是`mvn`脚本的摘录，以便理解：

```
  如果 [ -f /etc/mavenrc ] ; 然后
    . /etc/mavenrc
  菲

  如果 [ -f "$HOME/.mavenrc" ] ; 然后
    . “$HOME/.mavenrc”
  菲

```

或者，可以写入相同的内容`~/.mavenrc`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-02-13T10:05:35.237

如果您正在处理需要构建不同 Java 版本的多个项目，则无需`JAVA_HOME`为每个构建设置新的环境变量值。而是像这样执行 Maven：

```
JAVA_HOME=/path/to/your/jdk mvn clean install 
```

它将使用指定的 JDK 构建，但不会更改您的环境变量。

演示：

```
$ mvn -v
Apache Maven 3.6.0
Maven home: /usr/share/maven
Java version: 11.0.6, vendor: Ubuntu, runtime: /usr/lib/jvm/java-11-openjdk-amd64
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "4.15.0-72-generic", arch: "amd64", family: "unix"

$ JAVA_HOME=/opt/jdk1.8.0_201 mvn -v
Apache Maven 3.6.0
Maven home: /usr/share/maven
Java version: 1.8.0_201, vendor: Oracle Corporation, runtime: /opt/jdk1.8.0_201/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "4.15.0-72-generic", arch: "amd64", family: "unix"

$ export | grep JAVA_HOME
declare -x JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-16T05:04:34.707

上面有很大的帮助，但如果你有像我一样的环境，这就是我让它工作的方式。

*   运行一些 jdk、openjdk、oracle jdk 和几个版本。
*   通过 yum 安装 apache-maven，包是 apache-maven-3.2.1-1.el6.noarch

编辑这个文件/etc/profile.d/apache-maven.sh，如下，注意会影响整个系统。

```
$ cat /etc/profile.d/apache-maven.sh
MAVEN_HOME=/usr/share/apache-maven
M2_HOME=$MAVEN_HOME
PATH=$MAVEN_HOME/bin:$PATH
# change below to the jdk you want mvn to reference.
JAVA_HOME=/usr/java/jdk1.7.0_40/
export MAVEN_HOME
export M2_HOME
export PATH
export JAVA_HOME 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-24T11:54:54.130

即使您安装了 Oracle JDK，您的`$JAVA_HOME`变量也应该引用位于 JDK 根目录中的 JRE 的**路径**。有关更多详细信息，您可以参考[我对类似问题的其他回答](https://stackoverflow.com/a/31025631/795158)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-08T04:27:34.427

似乎是[https://askubuntu.com/questions/21131/how-to-correctly-remove-openjdk-and-jre-and-set-the-system-use-only-and-only-sun#的副本answer-21137](https://askubuntu.com/questions/21131/how-to-correctly-remove-openjdk-and-jre-and-set-the-system-use-only-and-only-sun#answer-21137)假设您使用的是 Ubuntu。

关键是使用命令`sudo update-java-alternatives -s java-6-sun`。任何依赖的命令`javac`都会受到影响，而不仅仅是 Maven。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-06T21:06:42.723

只需设置 JAVA_HOME 环境属性。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-18T14:24:38.810

我的 Ubuntu 服务器 14.04 上有两个 Java 版本：`java 1.7`和`java 1.8`.

我有一个项目需要使用`java 1.8`.

如果我使用检查我的 Java 版本`java -version`

我明白了

```
java version "1.8.0_144" 
```

但是当我这样做时，`mvn -version`我得到了：

```
Java version: 1.7.0_79, vendor: Oracle Corporation 
```

## 将 mvn 版本设置为`java8`

我这样做：

```
export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/ 
```

然后当我这样做时，`mvn -version`我得到：

```
Java version: 1.8.0_144, vendor: Oracle Corporation 
```

# python - Python逐行读取文件并打印以进行调试

> ID：13752523
> 
> 赞同：0
> 
> 时间：2012-12-06T21:04:12.477
> 
> 标签：python

我正在尝试逐行读取文件。这个文件有很多行。
每行的格式如下：

```
data:otherdata1
data:someotherdata2 
```

但出于调试目的，我使用了一个包含几行的文件，格式相同。
我正在尝试打印这些数据。

但我得到了错误：

```
print data.split(':')
         ^
SyntaxError: invalid syntax 
```

怎么了？我真的迷失了。

```
def process(data):
    print data.split(':') #printing for debug purposes
    return data

file = open("list.txt")
for line in file:
    process(line) 
```

是的，我添加了`import fileinput`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:06:47.363

您正在使用 Python3 和 Python2 语法。

在 Python3 中，[`print`是一个函数](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)，而不是一个语句。所以使用

```
print(data.split(':')) 
```

反而。

# complexity-theory - 使用 d-ary 堆实现 Dijkstra 算法

> ID：13752526
> 
> 赞同：1
> 
> 时间：2012-12-06T21:04:27.827
> 
> 标签：complexity-theory, time-complexity, dijkstra, asymptotic-complexity

正如您在此链接中看到的那样：[http](http://en.wikipedia.org/wiki/D-ary_heap#Applications) ://en.wikipedia.org/wiki/D-ary_heap#Applications 它在维基百科中说 d 的最佳选择是 d=m/n （它导致总时间复杂度为O(m logm/nn) )

在我看来，这个猜测是凭空捏造的。有没有一种简单的方法可以证明（甚至解释）这确实是最优的 d ？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:16:26.433

从解释本身中，您可以推断出您有 n 个删除 min 操作`O(d log(n)/log(d))`，每个操作都需要 m 个减少优先级操作`O(log(n)/log(d))`。那么合并的工作就是`(m*log(n)+n*d*log(n))/log(d)`。

如果填写建议的 d 值，则全局行为如所述`O(m*log(n)/log(d))`。如果您取任何其他 d，则其中一项大于平均值，从而导致复杂性增加。

# php - 如何使用 jQuery 发送帖子值？

> ID：13752528
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:04:36.227
> 
> 标签：php, jquery

如何将具有多个输入的表单数据发送到 php 脚本？使用 POST 方法。例如我有这样的形式：

```
<form action="register.php" method="POST" name="registerform">
    <span class="login">Nazwa użytkownika:</span>
    <input type="text" class="login" placeholder="twój login" name="username">
    <span class="login">E-mail</span>
    <input type="text" class="login" placeholder="twój email" name="email">
    <span class="login">Hasło</span>
    <input type="password" class="login" placeholder="twoje hasło" name="password">
    <span class="login">Powtórz Hasło</span>
    <input type="password" class="login" placeholder="powtórz hasło" name="repassword">
    <input type="submit" value="Rejestruj" class="button">
</form> 
```

如何将这一切发送到位于同一文件夹中的 register.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:07:09.767

```
<script type="text/javascript">
$(document).ready(function() {
    form = $('form[name="registerform"]');
    $.post(form.attr('action'), form.serialize());
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:06:16.253

使用 jquery.post()

这是[链接](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:05:44.320

您可以使用 serialize() 方法

```
var str = $('form[name="registerform"]').serialize(); 
```

然后使用 ajax 请求发送数据 `$.ajax` 或`$.post`

```
$.ajax({
   url: 'yoururl'
   type : 'post',
   data : str,
   success : function(data){

   } 
}) 
```

# python - 解析未知标签 xml 文件

> ID：13752534
> 
> 赞同：0
> 
> 时间：2012-12-06T21:05:12.833
> 
> 标签：python, sax

我试图解析一个 xml 文件。我的问题与此相同：

[使用python ElementTree解析未知元素的xml文件](https://stackoverflow.com/questions/8817283/parsing-an-xml-file-for-unknown-elements-using-python-elementtree)

我尝试了untubu的解决方案。

它工作得很好。但仅适用于具有单个标签的行

例如：

```
 <some_root_name>
<tag_x>bubbles</tag_x>
 </some_root_name> 
```

这很好用但是如果它是这样的：

```
src = '''\
<review type="review"><link>http://www.openlist.com/new-york-ny/mickey-mantles/27612417/?numReviews=178</link>
''' 
```

它失败了..我有很多这样的例子。我不想超出本机库的使用范围，因为在此之后我将在不同的计算机（prod env）上运行代码，并且我将不得不在那里设置库......它变得混乱......

有没有办法，我可以修改原来的解决方案来解决这个问题。谢谢。

上面链接的代码：

```
import xml.sax as sax
import xml.sax.handler as saxhandler
import pprint

class TagParser(saxhandler.ContentHandler):
    # http://docs.python.org/library/xml.sax.handler.html#contenthandler-objects
    def __init__(self):
        self.tags = {}
    def startElement(self, name, attrs):
        self.tag = name
    def endElement(self, name):
        if self.tag:
            self.tags[self.tag] = self.data
            self.tag = None
            self.data = None
    def characters(self, content):
        self.data = content

parser = TagParser()
src = '''\
<some_root_name>
    <tag_x>bubbles</tag_x>
    <tag_y>car</tag_y>
    <tag...>42</tag...>
</some_root_name>'''
sax.parseString(src, parser)
pprint.pprint(parser.tags) 
```

异常跟踪：

```
File "extract_xml.py", line 59, in unittest
  sax.parseString(src, parser)
File "C:\Python27\lib\xml\sax\__init__.py", line 49, in parseString
  parser.parse(inpsrc)
File "C:\Python27\lib\xml\sax\expatreader.py", line 107, in parse
  xmlreader.IncrementalParser.parse(self, source)
File "C:\Python27\lib\xml\sax\xmlreader.py", line 125, in parse
  self.close()
File "C:\Python27\lib\xml\sax\expatreader.py", line 217, in close
  self.feed("", isFinal = 1)
File "C:\Python27\lib\xml\sax\expatreader.py", line 211, in feed
  self._err_handler.fatalError(exc)
File "C:\Python27\lib\xml\sax\handler.py", line 38, in fatalError
  raise exception
xml.sax._exceptions.SAXParseException: <unknown>:2:4: no element found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:28:18.457

将`TagParser`数据`endElement`添加到`self.tags`.

`src`等于_

```
src = '''\
<review type="review"><link>http://www.openlist.com/new-york-ny/mickey-mantles/27612417/?numReviews=178</link></review>
''' 
```

`<review>`没有结束标签，`</review>`所以`endElement`永远不会被调用。

如果您将结束`</review>`标签添加到`src`：

```
src = '''\
<review type="review"><link>http://www.openlist.com/new-york-ny/mickey-mantles/27612417/?numReviews=178</link></review>
''' 
```

然后程序产生

```
{u'link': u'http://www.openlist.com/new-york-ny/mickey-mantles/27612417/?numReviews=178'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:31:17.973

这实际上工作得很好，尽管你的问题是这样说的：

```
parser = TagParser()
src = '''\
<some_root_name>
    <tag_x>bubbles</tag_x>
    <tag_y>car</tag_y>
    <tag...>42</tag...>
</some_root_name>'''
sax.parseString(src, parser)
pprint.pprint(parser.tags) 
```

`parser.tags`最终为：

```
{u'tag...': u'42', u'tag_x': u'bubbles', u'tag_y': u'car'} 
```

您的另一个示例确实失败了，但这仅仅是因为它不是有效的 XML：

```
src = '''<review type="review"><link>http://www.openlist.com/new-york-ny/mickey-mantles/27612417/?numReviews=178</link>'''
parser = TagParser()
sax.parseString(src, parser)
pprint.pprint(parser.tags) 
```

该`review`标记在您的源代码中永远不会关闭，因此这不是一个有效的 XML 片段，因此当您尝试解析它时会引发异常。

如果您的问题是从有效文档中提取不完整的片段，请不要这样做；获取整个`review`标签并对其进行解析，而不是尝试从中解析出一行。

如果您的问题是源数据实际上不是有效的 XML，则需要使用旨在处理损坏的 XML 的解析器，例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)；既不`ElementTree`也不`xml.sax`行。

# jquery - jQuery - Ajax 选择选项 Drupal 自定义表单'POST 错误 500'

> ID：13752535
> 
> 赞同：2
> 
> 时间：2012-12-06T21:05:19.173
> 
> 标签：jquery, ajax, drupal, drupal-forms

`enter code here`如何根据选择的其他选择选项值更新选择选项。

POST `http://localhost/drupal_site/form_elements`500（内部服务器错误）jquery.min.js:19 o.extend.ajax jquery.min.js:19（匿名函数）form_elements.js:17 --> `jQuery.ajax({` o.event.handle jquery.min.js:19 o.event.add.J

jQuery代码是：

```
$(document).ready(function(){

    jQuery("#edit-deptopsgt").change(function(){

        if($(this).val()!=""){
            var dato=$(this).val();

             jQuery.ajax({
                type:"POST",
                dataType:"html",
                url:"#",
                data:"id_depto="+dato+"&tarea=listProvincia", success:function(msg){
                    $("#edit-municipio").empty().removeAttr("disabled").append(msg);
                }
             });
        } 
        else {
            //$("#edit-municipio").empty().attr("disabled","disabled");
            //$("#ciudad").empty().attr("disabled","disabled");
        }

    }); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T18:28:28.650

在你的 ajax 回调为什么 url : '#' ？

如果你想使用 ajax 回调，那么你必须指定一个有效的 url。否则使用简单的 jquery 点击事件而不是 ajax 回调。

**示例 AJAX 回调：**

```
$.ajax({
                url: '/my_callback.php',
                type: 'post',
                dataType: 'json',
                data: {'email':'test@test.com'},
                    complete: function(response) {
                        resObj = $.parseJSON(response.responseText);
                        if(resObj.status == 'success') {
                           alert('Valid Email')
                        }
                        else {
                           alert('Invalid Email');
                        }
                    }
}); 
```

谢谢并恭祝安康

阿伦阿克

# c# - XNA、矢量数学和 GPU

> ID：13752539
> 
> 赞同：4
> 
> 时间：2012-12-06T21:05:37.843
> 
> 标签：c#, vector, xna, gpu

我正在考虑为 Windows Phone 和 Windows 8 RT 制作游戏。游戏的第一次迭代将使用 XNA 作为 UI。

但是由于我计划进行其他可能不使用 XNA 的迭代，所以我正在将我的核心游戏逻辑编写在可移植类库中。

我已经到了在核心游戏逻辑中计算矢量数学（精灵位置）的部分。

当我弄清楚这一点时，我的一位同事告诉我，我应该确保我在 GPU（而不是 CPU）上进行这些计算。

**那么，问题来了，如果我使用 XNA 矢量库进行矢量计算，它们会自动在 GPU 上完成吗？**

附带问题：如果不是，它们应该在 GPU 上完成吗？或者我可以在我的便携式类库中执行它们并让 CPU 运行它们吗？

**注意：**如果我需要让 XNA 执行它们以便我可以使用 GPU，那么从 XNA 将该功能注入到我的核心逻辑中并不难。我只是想知道这是否是我真正应该做的事情。

**注二：**我的游戏是2D游戏。它将计算坏人和射弹沿向量的运动。（这意味着这不是一个巨大的 3D 游戏。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:09:54.017

我认为你的同事弄错了。这只是在 GPU 上进行这种计算没有意义的两个原因：

第一个原因，很大程度上是因为首先将数据放到 GPU 上并不便宜。然后从 GPU*取回*数据*非常昂贵。*

 *#2 原因是 GPU 非常适合进行并行计算 - 也就是说 - 它对*大量*数据执行*相同*的操作。您将要进行的向量操作类型有很多*不同*的操作，适用于*中小型*数据量。

 ***因此，如果——比如说——你在 GPU 上做一个粒子系统，你会获得巨大的胜利。这是大量的同质数据，你对每个粒子执行相同的操作，所有数据都可以存在于 GPU 上。

甚至 XNA 的内置程序也在`SpriteBatch`CPU 上完成了大部分每个精灵的工作（除了最终的整体矩阵转换之外的所有工作）。虽然它可以在 GPU 上进行 per-sprite 变换（我认为它曾经在 XNA 3 中使用过），但它不能。这允许它减少发送 GPU 所需的数据量（性能优势），并使其更加灵活 - 因为它让顶点着色器免费供您自己使用。

这些都是使用 CPU 的重要原因。我会说它对 XNA 团队来说是否足够好 - 它对你来说已经足够好了 :)

* * *

现在，我*认为*您的同事可能的意思——而不是 GPU——是使用 SIMD 指令（在 CPU 上）进行矢量数学运算。

这些为您带来性能上的胜利。例如 - 添加矢量通常需要您添加 X 分量，然后是 Y 分量。使用 SIMD 允许 CPU 同时添加两个组件。

遗憾的是，微软的 .NET 运行时目前没有（这种）使用 SIMD 指令。不过，它[在 Mono](http://tirania.org/blog/archive/2008/Nov-03.html)中得到支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T02:34:07.730

> 那么，问题来了，如果我使用 XNA 矢量库进行矢量计算，它们会自动在 GPU 上完成吗？

使用 ILSpy 查看 XNA 中的 Vector 类会发现 XNA Vector 库不使用显卡进行矢量数学运算。****

# drupal - Drupal/Ubercart 中的 hook_alter uc_addresses 提交函数

> ID：13752549
> 
> 赞同：0
> 
> 时间：2012-12-06T21:06:07.050
> 
> 标签：drupal, ubercart, hook-form-alter

我正在尝试挂钩[uc_addresses](http://drupal.org/project/uc_addresses)提交功能，但它很快就变得非常混乱。请注意，这是在 Drupal 6 上运行的 Ubercart。所以我已经隔离了[uc_addresses.module](http://drupalcode.org/project/uc_addresses.git/blob/9b7ccecd76e34e502ab1b1c2b5a1f6f060b8b5de:/uc_addresses.pages.inc)中我感兴趣的代码：

```
function uc_addresses_get_address_form_submit($form, &$form_state) {
  global $user;

  $address_user = $form['stored_values']['#value']['user'];
  $address = $form['stored_values']['#value']['address'];
  $view = $form['stored_values']['#value']['view'];

  if ($form_state['clicked_button']['#value'] == t('Delete address')) {
      cache_clear_all();
      $form_state['redirect'] =
    array('user/'. $address_user->uid .'/addresses/' . $address->aid . '/delete');
  }
  else {
    if (!$address) {
      $address = new stdClass();
      $address->uid = $address_user->uid;
    }

    $valid = TRUE;
    foreach (element_children($form_state['values']['panes']) as $pane_id) {
      $func = _address_pane_data($pane_id, 'callback');
      $isvalid = $func('process', $address, $form_state['values']['panes'][$pane_id]);
      if ($isvalid === FALSE) {
    $_SESSION['expanded_panes'][] = $key;
    $valid = FALSE;
      }
    }
    if ($view == 'edit') { // Update database
      _uc_addresses_db_update_address($address);
    }
    elseif ($view == 'new' || $view == 'add') { // Insert into datebase
      _uc_addresses_db_add_address($address);
    }
    $form_state['redirect'] = array('user/'. $address_user->uid .'/addresses');
  }
} 
```

目标是复制数据库中提交的表单值的一部分。这本身可能是一个问题，因为我需要确保在将值写入表之后发生我的钩子。所以我的问题是，如果我希望在提交此表单后发生钩子函数，我的钩子函数应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:27:29.940

好吧，太愚蠢了，我没有意识到 uc_addresses 文档中有很大一部分是关于钩子的。[链接到文档](http://drupal.org/node/1340698)。在这种特定情况下，如果您想挂钩表单提交，我建议您使用`hook_uc_addresses_address_insert()`and `hook_uc_addresses_address_update()`。

# asp.net-mvc - 在 MVC 中发布表单时，如何让控制器打开一个带有结果的新窗口？

> ID：13752557
> 
> 赞同：1
> 
> 时间：2012-12-06T21:06:20.357
> 
> 标签：asp.net-mvc

```
@Html.ActionLink("pSearch", "Results", null, new {target="_blank"}) 
```

不起作用，因为它不会将表单数据发布到“结果”控制器操作，并且返回的只是 404 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:14:41.660

假设您使用的是默认路由：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

然后：

```
@Html.ActionLink("pSearch", "Results", null, new { target="_blank" }) 
```

将产生：

```
<a href="/Home/Results" target="_blank">pSearch</a> 
```

因此，如果您希望获得除 404 之外的任何其他内容，希望您在`Results`里面定义了一个动作`HomeController`，对吗？

像这样：

```
public class HomeController : Controller
{
    public ActionResult Results()
    {
        return View();
    }
} 
```

否则你真的不能期待超过 404 错误，对吗？

很明显，但可能值得一提的是，该操作将期望`~/Views/Home/Results.cshtml`或`~/Views/Home/Results.aspx`视图被定义。你已经在这个位置定义了它，不是吗？

# excel - 如何从活动单元格中选择未知范围？

> ID：13752558
> 
> 赞同：1
> 
> 时间：2012-12-06T21:06:22.783
> 
> 标签：excel, vba, select, dynamic, range

我有一个电子表格，其中包含数据块和空行。块的大小不同。我有一个公式可以自动填充原始数据，然后将其复制到其他空行，直到到达下一个块。我如何让它选择下一个数据块，以便我的循环可以工作，因为块的大小总是在变化？理想的是某种当前区域属性，它排除了活动单元格后面的数据，因为处于当前状态的循环在每次迭代结束时将活动单元格作为新块中的第一个单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:12:05.050

每当我必须循环一些需要从一个区域移动到另一个区域的东西时，我最终都会使用 Offset 的组合（如 Range(myRange).Offset(1,0) 中），通常是 .End 修改以确保我总是在范围的末端。例如（伪代码）。

```
Dim lastCell As Range
Dim neededCell As Range

Set lastCell = ActiveRange.End(xlDown) 'picks the last cell down
Set neededCell = lastCell.Offset(2, 0) returns the cell two rows down from the last cell in above range. 
```

警告，我这样做是出于我的想法，它可能需要一些调整才能真正起作用……此外，如果您需要朝这些方向前进，还有 xlLeft、xlRight 和 clUP。

此外，如果您需要选择一个新范围，只需通过偏移量选择一个范围即可。我的代码可能有点脏（还是新的），但这应该可以。

```
Dim bigRange as Range
Set bigRange = ActiveSheet.Range(neededCell.Address & ":" & _
    neededCell.Offset(20, 20).Address) 
```

如果你从“D5”处的needCell开始，那应该返回一个“D5：X25”的范围

# algorithm - K-Server 动态算法

> ID：13752564
> 
> 赞同：3
> 
> 时间：2012-12-06T21:06:50.897
> 
> 标签：algorithm, dynamic

我正在尝试使用动态算法为 3 台服务器获取[K-server 问题的最佳解决方案。](http://en.wikipedia.org/wiki/K-server_problem)这个想法是生成所有可能的排列并检查它们以找到最佳值。

我知道这是一个指数时间大 O 的慢排气搜索算法。无论如何，这就是我所拥有的，据我所知它应该可以工作，但它给了我错误的价值。

这里前 3 点是服务器。dist(x,y) 函数计算点 x 和 y 的笛卡尔距离。

```
void optimalSol()
{

int cost[10][10][10][10];
for(int l=3; l<=totalPoints; l++)
{
    for(int i=0; i<=l; i++)
    {
        for(int j=0; j<=l; j++)
        {
            for(int k=0; k<=l; k++)
            {
                int current_min=99999;
                //cost[i][j][k][l]=0;
                if((i!=l) && (j!=l) && (k!=l))
                    cost[i][j][k][l]=99999;
                else
                {

                    for(int m=0; m<=l; m++)
                    {
                        if(current_min > (cost[m][j][k][l-1] + dist(m, i)))
                        {
                            if(cost[m][j][k][l-1] + dist(m, i)>0)
                            current_min = cost[m][j][k][l-1] + dist(m, i);

                        }

                        else if(current_min > (cost[i][m][k][l-1] + dist(m,j)))
                        {
                            if(cost[i][m][k][l-1] + dist(m,j)>0)
                            current_min = cost[i][m][k][l-1] + dist(m,j);
                        }

                        else if(current_min > (cost[i][j][m][l-1] + dist(m,k)))
                        {
                            if(cost[i][j][m][l-1] + dist(m,k)>0)
                            current_min = cost[i][j][m][l-1] + dist(m,k);
                        }
                    }
                    cost[i][j][k][l] = current_min;
                }
            }
        }
    }
  }
  printCostTable(cost);
} 
```

# codeigniter - CodeIgniter，指向同一方法的多个 url 可能性

> ID：13752565
> 
> 赞同：0
> 
> 时间：2012-12-06T21:06:59.157
> 
> 标签：codeigniter, routes

我刚开始学习codeigniter，我注意到了。像这样写我自己的路线之后

```
$route['index'] = "front/index";
$route['page/(:any)'] = "front/page/$1";
$route['section/(:any)'] = "front/section/$1"; 
```

现在我可以使用旧路由和新路由访问方法和控制器。

现在可以使用 URL：

```
localhost/index
localhost/front/index
localhost/front/index.html 
```

指向同一位置的 url 太多，我想知道每个方法是否可以只有 1 个 url，在不使用外部代码的情况下限制所有其他方法。从代码点火器本身。

另外：这破坏了我使用 uri 类从 url 获取段的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:52:41.150

最简单的方法是将索引页面作为默认控制器的唯一（索引）功能，在您的情况下，

```
$route['default_controller'] = "front"; 
```

然后所有其他页面都有其他控制器及其相应的 URI 名称，那么您不需要任何路由，除了默认值。我通常会得到一些控制器，比如`page.php`, `news.php`, `blog.php`, `products.php`,`admin.php`等等。

# php - 使用 Greasemonkey 和 PHP 下载和上传

> ID：13752572
> 
> 赞同：1
> 
> 时间：2012-12-06T21:07:14.743
> 
> 标签：php, javascript, greasemonkey, binaryfiles

我需要将文件 (.zip) 从客户的第三方网站传输到我的网站。

**GM-Snippet**（注释掉其他尝试）

```
 GM_xmlhttpRequest({
    method: "GET",
    url: dlurl,
    timeout:0,
    onload: function(resp) {
    var conti=resp.responseText;

alert("goup");
GM_xmlhttpRequest({
    method: "POST",
    url: "http://absolut-fair.com/wbb_back/api.php?id=3",
    overrideMimeType: 'text/plain; charset=x-user-defined',
    data:"chk=1&data="+base64_encode(conti),
    headers: {
            "Content-Type": "application/x-www-form-urlencoded"
    },
    onload: function(resp) {
        var conti=resp.responseText;

        if(conti=="1") alert("upload erfolgreich");
        else alert(conti);
//.... 
```

**PHP 片段**

```
$name="test.txt";
uploadfile(base64_decode($_POST["data"]),detect_mime($name),$name); 
```

**问题**

当我尝试打开它们时，所有解码的文件都已损坏。问题是发送二进制数据。发送原始文本效果很好！

**//更新**

我刚刚下载了健康和无效的 zip 文件，看起来无效的文件处理了大量的空间来填充无用的代码段。所以我觉得base64不能完全编码/解码二进制数据。任何人有任何知识？

我附上来源的屏幕截图以使其清楚！

**有效文件：**

![有效文件](../Images/3bcb075512cff46087ec006d48e486ea.png)

**无效的：**

![无效的](../Images/805000ecb320340395119424f2d7d2df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:58:45.070

由于我无法在这里获得帮助，我向德国社区“gulli”的一位名叫“Kugelfisch23”的经验丰富的用户寻求帮助，并将这个主题发送给他。

现在我们解决了问题，我想为其他尝试通过 Greasemonkey 发送二进制文件并使用 PHP 接收它的用户提供更多信息。

**如果你也从事这种工作**，我建议先发送一个像[这样](http://foo23.fo.funpic.de/out.test)的小示例文件，因为它包含所有二进制字符。**因此，您将能够检查问题发生在哪里**，如果可能的话，最有可能的是编码/解码出错了。

* * *

**第一个问题**：接收二进制数据

正如您在开头的示例中看到的那样，我在发送二进制数据时覆盖了 mime 类型*，*但在接收时没有覆盖。因此，对象*responseText*仅包含 UTF-8 字符并损坏数据。=> 接收时也需要覆盖 MIME 类型。

```
GM_xmlhttpRequest({
    method: "GET",
    url: dlurl,
    timeout:0,
    overrideMimeType: 'text/plain; charset=x-user-defined',
    //... 
```

**第二个问题**：将二进制数据编码为base64

由于不可能简单地将二进制数据作为 POST 参数发送，因此需要对数据进行编码以使其可发送。在第一次尝试中，我使用[了这个](http://phpjs.org/functions/base64_encode/)base64_encode - 函数来编码我的数据。正如我后来发现的那样，此功能是否仅提供不足以发送二进制数据的转换，并且应该主要用于对文本进行编码。 [此函数](https://stackoverflow.com/a/7372816/1424378)（指函数`base64Encode(str)`，不要与 混淆`base64ArrayBuffer`）而是能够对二进制数据进行编码。

**第三个问题**：发送base64

通过 post 发送 base64 编码的结果是不够的，因为它包含许多 PHP-Endpoint 无法处理或转换为无效字符的字符。`encodeURIComponent`在发送之前使用base64-result。

**第四题**：接收与解码

尽管解码传入的数据相当简单，但我会为您提供我的片段。

```
if(empty($_POST["data"])) die("no data sent");  
$name="test.zip";
$binary=base64_decode($_POST["data"]); 
```

* * *

**结果**

Greasemonkey/JS

```
 var dlurl = "http://website.zip";
        GM_xmlhttpRequest({
            method: "GET",
            url: dlurl,
            overrideMimeType: 'text/plain; charset=x-user-defined',
            timeout:0,
            onload: function(resp) {
                var conti=resp.responseText;
                var encoded = encodeURIComponent(base64Encode(conti));
                GM_xmlhttpRequest({
                    method: "POST",
                    url: "http://absolut-fair.com/wbb_back/api.php?id=3",
                    overrideMimeType: 'text/plain; charset=x-user-defined',
                    data:"data="+encoded,
                    headers: {
                            "Content-Type": "application/x-www-form-urlencoded"
                        },
                    onload: function(resp) {
                     //... 
```

**PHP**

参见第 4 个问题的代码

# javascript - 为什么这个 JavaScript 事件没有被触发？

> ID：13752573
> 
> 赞同：0
> 
> 时间：2012-12-06T21:07:19.713
> 
> 标签：javascript, jquery

基本上如果有这个工作。它打开一个查询对话框

```
$("#opener").click(function() {
    $.ajax({
        url: "hello.php",
        success: function(data) {
            $("#dialog").html(data).dialog("open");
        }
    });

    $("#dialog").dialog({
        bgiframe: true,
        autoOpen: false,
        height: 400,
        width: 400,
        modal: true
    });
});​ 
```

我想从

```
onClick="callMyFuncion(withDetails); 
```

并且基本上使用 myDetails 发送一个 ajax 获取请求。这就是我正在尝试的

```
function getDayDetails(details) {
    $.ajax({
        type: "GET",
        data: details,
        url: "hello.php",
        success: function(data) {
            $("#dialog").html(data).dialog("open");
        }
    });

    $("#dialog").dialog({
        bgiframe: true,
        autoOpen: false,
        height: 400,
        width: 400,
        modal: true
    });
};​ 
```

并从这里调用它

```
<td class="everyday" onClick="getDayDetails(monthID=<?php echo $month; ?>&dayID=<?php echo $day_num; ?>&yearID=<?php echo $year; ?>);"> 
```

我是 Javascript/Jquery 的新手。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:23:32.560

我相信您选择使用内联 JavaScript，因为您无法将其动态化。

另一种方法是使用`data-*`属性来保存日期值。如下所示：

```
<td class="everyday"
    data-month="<?php echo $month; ?>"
    data-day="<?php echo $day_num; ?>"
    data-year="<?php echo $year; ?>">
  ...
</td> 
```

并继续使用该`.click()`函数而不是内联 JavaScript [如告知的那样]，应该更好地避免这种情况。

```
$("td.selector").click(function() {
  var data = $(this).data();
  $.ajax({
    type: "GET",
    url: "hello.php",
    data: { monthID: data.month, dayID: data.day, yearID: data.year },
    success: function(data) {
      $("#dialog").html(data).dialog("open");
    }
  });
});​ 
```

作为对象传递`data`的优点是 jQuery 会自动对参数进行编码。`$.ajax`

最后，您可以将`.dialog()`初始化移动到一个[`.ready()`](http://api.jquery.com/ready/)函数中。

```
$(document).ready(function() {
  $("#dialog").dialog({
    bgiframe: true,
    autoOpen: false,
    height: 400,
    width: 400,
    modal: true
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:10:19.580

Ajax 是**异步**的.. 所以它不会以这种方式工作 ..

尝试这个

```
$(function(){ // In the DOM ready
              // define the code for the dialog
    $("#dialog").dialog({
        bgiframe: true,
        autoOpen: false,
        height: 400,
        width: 400,
        modal: true
    });
});​

function getDayDetails(details) {
    $.ajax({
        type: "GET",
        data: details,
        url: "hello.php",
        success: function(data) {
            $("#dialog").html(data).dialog("open");
            // Add the new HTMl to the dialog and then open..
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:15:37.757

为了避免使用所有这些奇怪的 onClick spaggeti 代码，一个更好的方法是通过使用数据属性将参数包含在 DOM 中。例如，您的 td 可能变为：

```
<td data-day="Mon" data-month="june"> 
```

因此，您可以获取如下参数：

```
$('td').on('click', function() {
     var day = $(this).attr('data-day');
     //And so on 
     //Add them to a data object 
     var data = {}; 
     data.day = day; 
     //Fire your ajax submitting the data object, 

}); 
```

最后，由于 ajax 是异步的，您必须将对话代码放在成功回调中。

玩得开心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:12:25.020

PHP 生成的结果参数是一个字符串。所以你也应该用引号括起来。

```
<td class="everyday" onClick="getDayDetails('monthID=<?php echo $month; ?>&dayID=<?php echo $day_num; ?>&yearID=<?php echo $year; ?>');"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:12:41.033

如果我正确理解您的问题，那是因为`data`参数不正确。
它应该看起来像：

```
data: { monthID:monthValue, dayID:dayValue, yearID:yearhValue } 
```

# regex - Perl Regex 用于从文件中获取版本号

> ID：13752577
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:07:48.567
> 
> 标签：regex, perl

我有一个如下所示的文件：

```
app.version.code=1
app.version.major=1
app.version.minor=0
app.version.buildnumber=0 
```

我想运行一个将打印出的 Perl 脚本`<app.version.major>.<app.version.minor>.<app.version.buildnumber>`。在这种情况下，它将打印出 1.0.0。我现在对 Perl 非常生疏，无法创建正则表达式和脚本来给我这个。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:35:58.537

你可以使用这样的东西：

```
perl -F= -lane '$h{$F[0]}=$F[1]; 
  END { print join ".", @h{ glob "app.version.{major,minor,buildnumber}" } }' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:27:53.480

```
cat > ver.txt
app.version.code=1
app.version.major=1
app.version.minor=0
app.version.buildnumber=0
^d

cat> ver.pl
#!/usr/bin/perl -w

use strict;
use warnings;

my ($ma,$mi,$bi)=(0,0,0);
while(<>){ 
  if(/^app\.version\.(.*)$/) { 
    if( $1 =~ /^major=(\d+)$/ ){$ma=$1}
    elsif( $1 =~ /minor=(\d+)$/ ){$mi=$1}
    elsif( $1 =~ /buildnumber=(\d+)$/ ) {$bi=$1}
  }
} 

print "$ma.$mi.$bi\n";
^d

./ver.pl < ver.txt 
1.0.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:33:18.600

版本Xtrct.pl：

```
 #!/usr/bin/perl

    use strict;

    my $inFile = $ARGV[0];

    open(INHANDLE, "<$inFile") || die("Could not open file");

    my @fileLines = <INHANDLE>;

    my $fileText = join("", @fileLines);

    my $major;
    my $minor;
    my $build;

    if($fileText =~ m/app\.version\.major=(.+)\n/) { $major = $1; }

    if($fileText =~ m/app\.version\.minor=(.+)\n/) { $minor = $1; }

    if($fileText =~ m/app\.version\.buildnumber=(.+)\n/) { $build = $1; }

    my $version = $major.".".$minor.".".$build;

print "\nversion = ".$version;

    exit(0); 
```

假设您的数据位于名为 input.txt 的文件中，请运行：

```
VersionXtrct.pl input.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:33:29.583

在我之前的尝试中，我假设了非任意顺序。这应该按预期工作。

```
#!/usr/bin/env perl

use strict;
use warnings;

use 5.010;

my %version;

while (<DATA>) {
  given ($_) {
    $version{major}       = $1 when /app\.version\.major=(\d+)/;
    $version{minor}       = $1 when /app\.version\.minor=(\d+)/;
    $version{buildnumber} = $1 when /app\.version\.buildnumber=(\d+)/;
  }
}

say join ".", @version{qw/major minor buildnumber/};

__DATA__
app.version.code=1
app.version.major=1
app.version.minor=0
app.version.buildnumber=0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T07:17:24.003

这是另一种选择：

```
use strict;
use warnings;

my %ver;

while (<>) {
    $ver{$1} = $2 if /(major|minor|number)=(\d+)$/;
}

print "$ver{major}.$ver{minor}.$ver{number}\n"; 
```

数据集上的输出：

```
1.0.0 
```

# ruby - 尝试从 FTP 下载文件会导致“500 Illegal PORT command”错误

> ID：13752580
> 
> 赞同：16
> 
> 时间：2012-12-06T21:08:16.747
> 
> 标签：ruby, ftp, download

如果我在本地执行此操作，一切正常：

```
require 'net/ftp'

ftp=Net::FTP.new("myftpserver.com", "username", "password")

ftp.getbinaryfile("/myfile.zip","localfile.zip")
ftp.close 
```

如果我尝试在我正在使用的 Linux 服务器上执行它，结果是：

```
/usr/local/lib/ruby/1.9.1/net/ftp.rb:273:in `getresp': 500 Illegal
PORT command. (Net::FTPPermError)   from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:281:in `voidresp'  from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:304:in `block in voidcmd'  from
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'   from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:302:in `voidcmd'   from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:317:in `sendport'  from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:325:in `makeport'  from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:358:in `transfercmd'   from
/usr/local/lib/ruby/1.9.1/net/ftp.rb:420:in `block (2 levels) in
retrbinary'   from /usr/local/lib/ruby/1.9.1/net/ftp.rb:166:in
`with_binary'   from /usr/local/lib/ruby/1.9.1/net/ftp.rb:419:in `block
in retrbinary'  from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in
`mon_synchronize'   from /usr/local/lib/ruby/1.9.1/net/ftp.rb:418:in
`retrbinary'  from /usr/local/lib/ruby/1.9.1/net/ftp.rb:539:in
`getbinaryfile' 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-06T21:37:39.597

[我在http://www.ruby-forum.com/topic/161274](http://www.ruby-forum.com/topic/161274)找到了答案：

> 在防火墙之外，活动 ftp 无法在 NAT 设备后面工作。如果您告诉 Ftp 服务器您的地址是私有 IP 地址，例如 192.168.x（您在 nat 设备后面的网络上的地址），则 Ftp 服务器有时会说出非法端口命令

添加：

```
ftp.passive = true 
```

解决它。

# php - 如何解析浮动这个？

> ID：13752582
> 
> 赞同：1
> 
> 时间：2012-12-06T21:08:19.940
> 
> 标签：php, javascript, ajax

我有这个代码：

```
$wage = array();
foreach ($result3 as $row3) {
  $wage[] = '[' . floatval($row3['age']) . ',' . floatval($row3['point']) .']';
}
if ($userid == 0 ) {
  $age= "";
} else {
  $age = implode(',', $wage).",";
}
 echo json_encode("var2"=>$myvar ,"var3"=>$age));  // i didnt write var2 because is same as var3 
```

以上将输出类似`[4,2.3][5,6],[1.7,5],`

并且在 javascript 中，我通过具有 name 的 ajax 接收上面输出的这个值`var3`。

```
dataType: 'json' ,
success: function(response){
var age = response['var3'] ; 
..... 
```

所以问题是我怎么能`parseFloat`这个变量`age` ？

编辑 。如果我这样提醒 json

```
 alert (response); 
```

我得到 `[object Object]` // 注意小 o 和大 O

编辑2。使用的控制台日志

我明白了

```
 {"var2":"[2,5],[3.5,5],[6.5,6.5],[8,7],","var3":"[2,46],[3.5,61],[6.5,70],[8,71],","var4":"[2,32],[3.5,41],[6.5,42],[8,43],","var5":"[46,5],[61,5],[70,6.5],[71,7],"} 
```

这个返回值我想要`parseFloat`他们，因为你看到它们就像两个引号之间的字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:36:25.397

这是不正确的：

```
$wage[] = '[' . floatval($row3['age']) . ',' . floatval($row3['point']) .']'; 
```

您正在构建一个字符串，碰巧看起来像一个 javascript 数组定义，但它仍然只是一个字符串。当它得到 json_encoded 时，它会显示为

```
"[...,...]"
^--       ^-- string 
```

您需要在 PHP 中的所有阶段构建**NATIVE数据结构，例如**

```
$wage[] = array(floatval($row3['age']), floatval($row3['point'])); 
```

而不是本机和“类json”字符串的混搭。json_encode() 转换等效 Javascript 类型的**NATIVE数据类型。**由于您自己的 floatval 业务正在生成一个字符串，因此您将获得一个 json 编码的字符串，而不是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:28:05.023

你把这一切都弄错了。你不需要这样做；

```
foreach ($result3 as $row3) {
  $wage[] = '[' . floatval($row3['age']) . ',' . floatval($row3['point']) .']';
} 
```

也许你想要的是；

```
foreach ($result3 as $i => $row3) {
  $newRow = $row3;
  $newRow['age'] = intval($row3['age']);
  $newRow['point'] = floatval($row3['point']);
  $result3[$i] = $newRow;
} 
```

然后这样做；

```
// Create JSON data, assuming that $result3 is an array
$jsonData = json_encode($result3);

// This will give you a JSON string, output this and finish to ensure it IS the only thing output
echo $jsonData;
die; 
```

现在在您的 javascript 中，在您使用的任何浏览器中打开开发控制台，并在 javascript 中使用以下代码

```
console.log(response) 
```

这会将整个`response`变量输出到控制台，并使您能够调试如何从`response`var 中获取特定数据。

希望有帮助。

# c# - 使用 Outlook 错误发送电子邮件

> ID：13752587
> 
> 赞同：1
> 
> 时间：2012-12-06T21:08:36.947
> 
> 标签：c#

我正在尝试在我的 c# 应用程序中使用 Outlook 发送电子邮件，工作正常，但我一直收到这个烦人的弹出消息说，

“试图代表您发送电子邮件的程序”

如何删除此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:11:39.107

是的，这可以在您的 Outlook 版本的信任中心进行配置 - 您需要允许以编程方式访问。

有一个（大）警告，它会允许您 PC 上的恶意软件像您一样发送电子邮件，并且过去曾有蠕虫将此用作传播方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:14:21.540

您是否必须使用 Outlook API 来执行此操作 - 您可以使用 System.Net.Mail SmtpClient 代替它不会给您此消息

[作为 smtp 客户端发送邮件](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

# bash - 我想将文件 FTP（放入）到我在 Bash 中使用“查找”命令找到的目录中

> ID：13752592
> 
> 赞同：2
> 
> 时间：2012-12-06T21:08:57.320
> 
> 标签：bash, ftp, find, put

```
ftp -inv $HOST >> $TMPLOGFILE 2>&1 << ENDFTP
user $USER $PASS
binary
cd gpeh
lcd gpeh
put nameoffile *this is where I want the results of the "find" to go*
bye
ENDFTP 
```

上面是我用于 ftp 的代码，下面是一个示例查找脚本。

```
find ./gpeh 
```

所以基本上我想要做的是获取主机“gpeh”文件夹中的所有文件，然后将它们放入远程机器“gpeh”文件夹中。有时文件数为 1（嗯，在大多数情况下应该是 1，唯一的情况是如果前一小时的 ftp 失败，那么原始文件和新文件仍然存在这个小时添加），有时会更多。

如果我只是想说删除使用“查找”命令在 gpeh 文件夹中找到的文件，我可以使用

```
find ./gpeh | xargs delete "and whatever conditions here" 
```

但是我不能在 FTP 中做到这一点（或者我可以），所以我真的不知道该怎么做。

提前感谢他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:42:12.997

试试下面

```
#!/bin/bash
PUT_FILES=$(find . -name "*" -printf "put %p\n")

ftp -inv $HOST >> $TMPLOGFILE 2>&1 << ENDFTP
user $USER $PASS
binary
cd gpeh
lcd gpeh
$PUT_FILES
bye
ENDFTP 
```

**解释**

*   `find . -name "*" -printf "put %p\n"`在当前目录中的`.`任何名称文件`"*"`中，打印输出格式为`"put %p\n"`
*   `PUT_FILES=$(...)`将输出捕获到变量。
*   `$PUT_FILES`将通过 ftp 扩展和执行。

# css - 试图翻转三角形 css

> ID：13752593
> 
> 赞同：1
> 
> 时间：2012-12-06T21:09:00.327
> 
> 标签：css

一直试图跟随和玩这个小提琴：http: [//jsfiddle.net/bossy_nova/wBUW7/1/](http://jsfiddle.net/bossy_nova/wBUW7/1/)

我一直在寻找一种方法让这种三角形变成一个向下的三角形。玩了旋转，这并没有被证明是有用的。我错过了什么吗？

那么如何翻转这个箭头呢？感谢您提前提供帮助。

```
.triangle-with-shadow {
   width: 100px;
   height: 50px;
   position: relative;
   overflow: hidden;
   box-shadow: 0 0px 0px -2px rgba(0,0,0,0.5);
}
.triangle-with-shadow:after {
   content: "";
   position: absolute;
   width: 50px;
   height: 50px;
   background: #999;
   transform: rotate(45deg);
   -ms-transform:rotate(45deg); /* IE 9 */
   -moz-transform:rotate(45deg); /* Firefox */
   -webkit-transform:rotate(45deg); /* Safari and Chrome */
   -o-transform:rotate(45deg); /* Opera */
   top: 25px;
   left: 25px;
   box-shadow: -1px -1px 10px 0px rgba(0,0,0,0.5);
}​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:12:34.400

您的转换需要在您的主 CSS 中，而不是在`:after`状态中：

```
.triangle-with-shadow {
    width: 100px;
    height: 50px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 16px 10px -15px rgba(0,0,0,0.5);

    transform: rotate(180deg);
    -ms-transform:rotate(180deg); /* IE 9 */
    -moz-transform:rotate(180deg); /* Firefox */
    -webkit-transform:rotate(180deg); /* Safari and Chrome */
    -o-transform:rotate(180deg); /* Opera */
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:15:01.327

[从http://www.identifydesign.net/tutorials/css/triangles-circles/](http://www.identifydesign.net/tutorials/css/triangles-circles/)旋转一个三角形 360 度

```
<style type="text/css">

.triangle2{

width:0;
height:0;
border-top:20px solid #000;
border-left:20px solid transparent;
border-right:20px solid transparent;
-webkit-transform:rotate(360deg);

}

</style>

<div class="triangle"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:17:29.887

只需将旋转变换应用于主要元素。您还需要应用一些边距以将顶部边缘带回 JSFiddle 的视野。

```
.triangle-with-shadow {
   width: 100px;
   height: 50px;
   position: relative;
   overflow: hidden;
   box-shadow: 0 0px 0px -2px rgba(0,0,0,0.5);
   transform: rotate(180deg);
   -ms-transform:rotate(180deg); /* IE 9 */
   -moz-transform:rotate(180deg); /* Firefox */
   -webkit-transform:rotate(180deg); /* Safari and Chrome */
   -o-transform:rotate(180deg); /* Opera */
   margin-top: 15px;
}
.triangle-with-shadow:after {
   content: "";
   position: absolute;
   width: 50px;
   height: 50px;
   background: #999;
   transform: rotate(45deg);
   -ms-transform:rotate(45deg); /* IE 9 */
   -moz-transform:rotate(45deg); /* Firefox */
   -webkit-transform:rotate(45deg); /* Safari and Chrome */
   -o-transform:rotate(45deg); /* Opera */
   top: 25px;
   left: 25px;
   box-shadow: -1px -1px 10px 0px rgba(0,0,0,0.5);
}​ 
```

[JSFiddle](http://jsfiddle.net/wBUW7/25/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:23:08.373

您可以使用上述答案，也可以更改定位...

```
.triangle-with-shadow {
   width: 100px;
   height: 50px;
   position: relative;
   overflow: hidden;
   box-shadow: 0 -16px 10px -15px rgba(0,0,0,0.5);
}
.triangle-with-shadow:after {
   content: "";
   position: absolute;
   width: 50px;
   height: 50px;
   background: #999;
   transform: rotate(45deg);
   -ms-transform:rotate(45deg); /* IE 9 */
   -moz-transform:rotate(45deg); /* Firefox */
   -webkit-transform:rotate(45deg); /* Safari and Chrome */
   -o-transform:rotate(45deg); /* Opera */
   top: -25px;
   left: 25px;
   box-shadow: -1px -1px 10px 0px rgba(0,0,0,0.5);
}​ 
```

# intellij-idea - 是否可以通过网络浏览器远程编辑 IntellijIDEA 项目？

> ID：13752594
> 
> 赞同：3
> 
> 时间：2012-12-06T21:09:05.700
> 
> 标签：intellij-idea, remote-access

我正在寻找类似于 RStudio-server ( [r-studio](http://www.rstudio.com/ide/download/) ) 的东西，但用于 Java/Scala 编程。通过 Web 访问的 RStudio-server 与桌面版本相同。

考虑到我的问题是运行我的程序的本地资源稀缺，但远程计算机中有大量资源，可能还有其他等效的解决方案。

越无缝越好。如果我可以远程无缝地运行我的程序（输出就像它是本地的并且在 IDE 内部一样），那也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T18:58:45.710

它不是无缝的，但我只是设法使用正确的工作流程解决了问题：

在***本地***机器中：

1.  **在 IDEA 中**编辑文件****
***   [可选]**将**输出路径（如果有）设置为您最喜欢的*文件托管服务*（在我的情况下为*dropbox ）**   **使用您最喜欢的 VCS**提交（在我的情况下为***bzr*，它可能需要推送到远程机器）****

 ****在***远程***机器上：

1.  **用你最喜欢的 VCS**更新****
***   **使用您最喜欢的构建工具（在我的例子中为*sbt ）***编译和运行：****

     **```
    sbt 'run-main experiments.AtomicBombMain' 
    ```**** 

 ****[可选] 再次在***本地***机器中：

1.  [可选]在您喜欢的*文件托管服务*的共享文件夹的输出路径中**获取生成的文件**

 *链接自安装到编译的整个过程的更多详细信息： [sbt-intellij-idea-scala-debian-wheezy-how-to](http://neglectorientedprogramming.tumblr.com/post/68855288107/sbt-intellij-idea-scala-debian-wheezy-how-to-best)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:29:10.773

我最近开始使用[Chromoting](https://chrome.google.com/webstore/detail/chrome-remote-desktop/gbchcmhmhahfdphkhkmpfmihenigjmpp?hl=en)远程访问另一台具有 IntelliJ 的机器。这很方便，因为它内置在 chrome 中，我几乎可以在任何地方这样做，因为这些天每个人都有 Chrome。这是一个非常好的远程处理工具，但它仍然是远程处理，它有它的延迟和小问题（一些键盘快捷键没有发送通过并且这些选项还没有添加）。

只是一个尝试的想法。*********

# html - 在输入字段前添加图标而不中断表单的流程

> ID：13752600
> 
> 赞同：1
> 
> 时间：2012-12-06T21:09:34.930
> 
> 标签：html, css

好的，我有一个图标，当我把它放在输入前面时，它会将输入向右推 5 个像素左右，从而使字段失去视觉对齐。有没有我可以使用的样式：输入之前或可以使图标向左移动一点的样式？我的 HTML 看起来像这样：

```
<li>
 <label>Date</label>
 <img src="img/cal.png"/>
 <input type="text"/>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:16:17.913

可能来自标记中内联元素和回车之间的隐式空格。试试这个标记格式“技巧”

```
<li>
 <label>Date</label>
 <img src="img/cal.png"
 /><input type="text"/>
</li> 
```

或全部内联

```
<li><label>Date</label><img src="img/cal.png" /><input type="text"/></li> 
```

我制作了一个 JSFiddle 来[演示这一点](http://jsfiddle.net/8QJZa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:19:45.060

您可以调整文本框本身的大小：

```
<input type="text" style="width:40px" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:12:14.867

`img`在元素上添加 CSS 负边距：

```
<li>
   <label>Date</label>
   <img src="img/cal.png" style="margin-left: -5px;" />
   <input type="text"/>
  </li> 
```

# javascript - 使用javascript jQuery对具有属性的关联数组进行排序

> ID：13752601
> 
> 赞同：0
> 
> 时间：2012-12-06T21:09:42.867
> 
> 标签：javascript, jquery, arrays, associative-array

我有这个关联数组：

```
Arr =  {
     "ID1":{"Attr1":"b","Attr2":"5"},
     "ID2":{"Attr1":"d","Attr2":"2"},
     "ID3":{"Attr1":"h","Attr2":"8"}
     } 
```

我想用属性 2 按数字而不是按降序对 ID 进行排序以获得此结果：

```
Arr =  { 
     "ID3":{"Attr1":"h","Attr2":"8"}
     "ID1":{"Attr1":"b","Attr2":"5"},
     "ID2":{"Attr1":"d","Attr2":"2"},
     } 
```

如果这可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:13:00.220

```
Object.keys( Arr ).sort(function( a, b ) {
    return +Arr[ b ].Attr2 - +Arr[ a ].Attr2;
}).forEach(function( key ) { 
    console.log( key );
}); 
```

通过调用`Object.keys`and `Array.prototype.sort`，您至少可以对任何对象的*键进行排序。*这样，您可以按顺序访问这些*键/值*对。

上述代码段的输出是

```
ID3
ID1
ID2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:12:51.283

Javasript 没有关联数组——它是一个对象。而在 Javascript 中，对象属性的顺序并不能保证。因此，在开始对任何内容进行排序之前，您首先需要将数据转换为数组。

从那里，只需调用[`sort`](http://www.javascriptkit.com/javatutors/arraysort.shtml)数组即可。

# eclipse - 您将如何在 Eclipse 中创建一个永久的自定义键盘快捷键？

> ID：13752608
> 
> 赞同：1
> 
> 时间：2012-12-06T21:10:14.107
> 
> 标签：eclipse, keyboard-shortcuts

我找到了一种在 Eclipse 中制作自定义键盘快捷键的方法来替换

```
Run Ant build: Alt + Shift + X, Q 
```

我自己做了一个更简单的快捷方式，`Alt + F3`. 但是，当我退出程序时它会被删除。我怎样才能永久保留它？

# java - 如何从字符串中解析一个int？（爪哇）

> ID：13752609
> 
> 赞同：0
> 
> 时间：2012-12-06T21:10:14.357
> 
> 标签：java, java.util.scanner

我的输入看起来像这样。假设我试图在打印出一堆文本后提取两个数字。

```
abcdef
abcdef
abcdef
abcdef
123 456 
```

这是我尝试使用的伪代码。

```
input.useDelimiter(" "); //I've tried a lot of patterns to no avail.
while(!input.hasNextInt()){
    System.out.println(input.next());
}
System.out.println("Found Ints");
int posRow = input.nextInt();
System.out.println("posRow: "+posRow);
int posCol = input.nextInt();
System.out.println("posCol: "+posCol); 
```

我的输出最终为

```
abcdef
abcdef
abcdef
abcdef
123
Found Ints
posRow: 456
NoSuchElementException 
```

所以我假设问题是它正在读取文本的最后一行和第一个数字作为一个块而不是 int，因为没有空格。我试过使用 \r \n \r\n 等，但似乎无法弄清楚。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:05:52.640

尝试这个...

```
input.useDelimiter(Pattern.compile("\\s|\\n")); 
```

这将使用空格或换行符作为分隔符。

问题是使用空格作为分隔符会导致所有第一行，数字之间的空格成为一个被评估的项目。这不是一个整数。然后下一个是，但是你的最终 nextInt 没有更多了，因此是例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:57:32.323

我会使用`hasNextLine()`而不是`hasNextInt`，并且如果数字始终是最后一行，您可以单独拆分它。

这个怎么样？

```
input.useDelimiter(" ");
while(input.hasNextLine()){
    System.out.println(input.nextLine())
}
System.out.println("Found Ints");
int posRow = input.nextInt();
System.out.println("posRow: "+posRow);
int posCol = input.nextInt();
System.out.println("posCol: "+posCol); 
```

# ruby-on-rails - Rails 路由 - 获取表单并将结果发布到相同的 url

> ID：13752614
> 
> 赞同：0
> 
> 时间：2012-12-06T21:10:21.683
> 
> 标签：ruby-on-rails, json, routes

我有一个显示表单的页面/会话。

我想发布到自己，然后显示结果。

我的路线目前看起来像这样

```
 namespace :api do
  namespace :v1 do
    resources :users do
     match :all_users, :on => :collection, :as => "/users"
    end
    resources :sessions, :only => [ :index ]
    resources :user_info do
      match :user_info, :on => :collection
    end
    resources :user_schedule do
      match :user_schedule, :on => :collection
    end
end 
```

所以会话现在只显示索引，但我希望它同时响应 get 和 post 请求，如果它是 post 请求，则显示我的 json 结果。

最终，我希望所有其他路线都遵循相同的路线

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:25:47.210

利用

```
resource :sessions 
```

单数。这创造了单一的资源，如此[处所述](http://guides.rubyonrails.org/routing.html#singular-resources)

您仍然可以根据 http 方法在控制器中执行不同的操作，因此您可以选择在每种情况下要呈现的内容。

# msbuild - MSBuild 4.5 忽略项目依赖项

> ID：13752615
> 
> 赞同：10
> 
> 时间：2012-12-06T21:10:22.077
> 
> 标签：msbuild, .net-4.5

我有一个 VS2010 解决方案文件，其中包含 20 多个项目，其中一些项目依赖于解决方案中的其他项目。

我还为不同的目的设置了多个构建配置，但我已经减少了要构建的项目，只包含最少数量的项目。

例如，我有三个库（A、B 和 C）、一个网站项目和一个网站部署项目（VS2010）。该网站引用了库 A 和 B，而 B 又引用了 C。我的构建配置仅检查了网站和部署项目。当我从解决方案的属性中检查项目依赖项时，网站正确列出了库，并且 B 按预期显示了 C。

当我在 VS2010 中针对我的构建配置运行构建时，它完全可以正常工作，但是当我在指定我的配置的解决方案上运行 MSBuild 时（如下所示），它只会导致一堆错误。

`msbuild.exe mysolution.sln /t:Build /p:configuration=MyConfig`

这是我得到的错误示例：

`Services\IService.cs(11,63): error CS0246: The type or namespace name 'Priority' could not be found (are you missing a using directive or an assembly reference?)`

我注意到这发生在我的构建服务器（TeamCity v7.1.2）上，但我可以在多台机器上重现它，我将其缩小到 MSBuild 本身的问题。

它只是在我安装 .NET 4.5（和 2 个安全补丁）后才开始发生，所以我卸载了它，重新安装了 .NET 4.0（带有补丁），因为它也被删除了，然后尝试了相同的命令，它工作得很好。

这让我相信 .NET 4.5 在 MSBuild 中发生了一些变化或损坏，但他们的文档中似乎没有任何内容谈论这种变化。

MSBuild 4.5 文档：http: [//msdn.microsoft.com/en-us/library/hh162058.aspx](http://msdn.microsoft.com/en-us/library/hh162058.aspx)

我什至尝试过传递`BuildProjectDependencies=true`给 MSBuild，它指出它跳过了其他项目，因为它们没有在配置管理器中被选中，这是正确且有意的。

我让它与 MSBuild 4.5 一起工作的唯一方法是返回并选择被跳过的项目，但由于依赖链的实际解决方案有点复杂，我不想尝试管理每次我们使用新项目或依赖项更新解决方案时手动配置。它应该是自动的。

我在做什么有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T06:19:20.170

如果您仍然没有解决这个问题，让我们尝试一些盲拍：

1.  Msbuild 已确认错误，它有时会根据所遵循的依赖项生成错误的构建顺序。尝试构建的不是整个解决方案，而是您想要构建的确切项目`msbuild.exe YourWebsiteProject.csproj /t:Clean;Build /p:configuration=MyConfig`。问题仍然存在吗？

2.  确保 YourWebsiteProject 和您的库（B 和 C）具有正确的引用 - 在项目上，而不是在另一个项目文件夹中的 dll 上（修复该问题的最简单方法 - 从 B 引用中删除对 C 并重新添加它，只需确保您是添加项目引用而不是浏览到 bin\Debug 以获得非常 C.dll）。问题还在吗？

如果您可以提供详细甚至诊断性的 msbuild 日志（在开关 /ds /v:diag 之后添加到您的 msbuild 命令行，然后在某处共享 teamcity 完整构建日志或将命令行日志通过管道传输到文件）或一些我可以重现的示例项目集这种行为 - 它可以帮助解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T08:55:55.783

我想我会更新我之前的答案，因为我花了很多时间和精力来创建自己的解决方法来解决这个问题。解决方法比简单地解决问题要全面一些，但我试图既消除问题又使自己免受未来此类冲击的影响。

MSBuild 已从使用解决方案、配置或其他方式降级。MSBuild 只是被要求单独编译项目。发生这种情况的顺序由 Powershell 脚本计算，该脚本解析我们的解决方案和项目，以制定出最佳的即时构建执行计划。

关键（我认为您可能会发现有帮助）是以下片段：

**确定我的解决方案**

我在我的平台上有一个所有解决方案的列表，并且我基本上迭代了其中的每一个。

```
$buildPlan = (
@{
    solutions = (
        @{
            name      = "DataStorage"
            namespace = "Platform.Databases"
        },
        @{
            name      = "CoreFramework"
        },
        @{
            namespace = "Platform.Server"
            name      = "Application1"
        },
        @{
            namespace = "Platform.Server"
            name      = "Application2"
        },
        @{
            namespace = "Platform.Client"
            name      = "Application1"
        }
     )
}) 
```

我有一些逻辑可以帮助将其转化为实际的物理路径，但它非常符合我们的需求，所以我不会在这里列出。可以说，从这个列表中，我可以找到我需要解析的 .sln 文件。

***解析项目的解决方案文件***

对于每个解决方案，我都会阅读 .sln 文件并尝试提取其中包含的所有项目，我将在以后需要构建这些项目。

所以首先，确定我的所有项目

```
$solutionContent = Get-Content $solutionFile

$buildConfigurations += Get-Content $solutionFile | Select-String  "{([a-fA-F0-9]{8}-([a-fA-F0-9]{4}-){3}[a-fA-F0-9]{12})}\.(Release.*)\|Any CPU\.Build" | % {
        New-Object PSObject -Property @{
            Name = $_.matches[0].groups[3].value.replace("Release ","");
            Guid = $_.matches[0].groups[1].value
          }

    }  | Sort-Object Name,Guid -unique 
```

然后将其翻译成一个很好的项目列表，我可以稍后对其进行迭代。

```
$projectDefinitions = $solutionContent | 
      Select-String 'Project\(' |
        ForEach-Object {
          $projectParts = $_ -Split '[,=]' | ForEach-Object { $_.Trim('[ "{}]') };
          $configs = ($buildConfigurations | where  {$_.Guid -eq $projectParts[3]} | Select-Object Name)

          foreach ($config in $configs)
          {
              $santisiedConfig = if ([string]::IsNullOrEmpty($config.Name)){"Release"}else{$config.Name}
              if ($projectParts[1] -match "OurCompanyPrefix.")
              {
                  New-Object PSObject -Property @{
                    Name = $projectParts[1];
                    File = $projectParts[2];
                    Guid = $projectParts[3];
                    Config =  $santisiedConfig
                  }
              }
          }
    } 
```

**加载 Visual Studio 项目**

从我对解决方案文件的解析中，我现在有一个每个解决方案的项目列表，其中关键包含从解决方案根目录找到项目的相对文件路径。

```
$projectDefinition = [xml](Get-Content $csProjectFileName)
$ns = @{ e = "http://schemas.microsoft.com/developer/msbuild/2003" }
$references = @(); 
```

**1) 识别外部项目参考**

```
$references += Select-Xml -Xml $projectDefinition -XPath "//e:Project/e:ItemGroup/e:Reference" -Namespace $ns | % {$_.Node} | where {$_.Include -match "OurCompanyPrefix" -and $_.HintPath -notmatch "packages"}  | % {$_.Include} 
```

**2) 识别内部项目参考**

```
$references += Select-Xml -Xml $projectDefinition -XPath "//e:Project/e:ItemGroup/e:ProjectReference" -Namespace $ns | % { $_.Node.Name } 
```

**3) 遵循“构建后”事件作为外部参考**

```
$references += Select-Xml -Xml $projectDefinition -XPath "//e:Project/e:PropertyGroup/e:PostBuildEvent" -Namespace $ns | where {(!([String]::IsNullOrEmpty($_.Node.InnerText)))} | % {

            $postBuildEvents = $_.Node.InnerText.Split("`n")
            $projectsReferencedInPostBuildEvents = $postBuildEvents | Select-String "\(SolutionDir\)((\w|\.)*)" | % {$_.Matches[0].Groups[1].Value}
            if ($projectsReferencedInPostBuildEvents -ne $null)
            {
                Write-Output $projectsReferencedInPostBuildEvents | % { $matchedProject = $_; ($releaseConfiguation | ? {$_.File -match $matchedProject}).Name }  
            }

        } 
```

**而且，既然我们在这里，也可以获得一些基本的输出信息**

在迭代我要构建的项目列表时，这很方便，因为知道在哪里推送输出，或者在哪里找到依赖项的输出。

```
$assemblyName = (Select-Xml -Xml $projectDefinition -XPath "//e:Project/e:PropertyGroup/e:AssemblyName" -Namespace $ns).Node.InnerText
$outputPath  = (Select-Xml -Xml $projectDefinition -XPath "//e:Project/e:PropertyGroup[contains(@Condition,'Release|')]/e:OutputPath" -Namespace $ns).Node.InnerText 
```

***最后***

我们只需要确保我们没有任何重复项，所以我只记录这个特定代码项目的不同依赖项：

```
$dependendents = @();
if ($references -ne $null)
{
    $buildAction.project.dependencies += $references | where {(!([string]::IsNullOrEmpty($_))) -and ($_ -match "OurCompanyPrefix\.(.*)")} | % { $_.ToLower()} | Select -unique
} 
```

我希望这可以为您提供足够的信息来解析您的 SLN 和 PROJ 文件。我认为您将如何选择捕获和存储这些信息完全取决于您。

我正在写一篇关于此的相当深入的博客文章，其中将包含我上面没有提到的所有修饰和框架。这篇文章还没有准备好，但我会从之前的一篇文章中链接到它：http: [//automagik.piximo.me/2013/02/just-in-time-compilation.html](http://automagik.piximo.me/2013/02/just-in-time-compilation.html) - 因为微软的这个改变几乎使这项工作出轨！

干杯。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-05T16:46:29.137

在 .NET 4.5 中， C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets 中[OnlyReferenceAndBuildProjectsEnabledInSolutionConfiguration](http://msdn.microsoft.com/en-us/library/microsoft.build.tasks.assignprojectconfiguration.onlyreferenceandbuildprojectsenabledinsolutionconfiguration.aspx)属性的默认值已从 更改`false`为`true`。顾名思义，此属性会导致 MSBuild 忽略对从构建配置中排除的项目的引用。

（微软可能会做出此更改以响应[我针对 MSBuild 4.0 提交的 Connect 错误](https://connect.microsoft.com/VisualStudio/feedback/details/571428/msbuild-4-0-builds-projects-even-if-they-are-excluded-from-a-solution-configuration)，尽管我警告他们更改会破坏构建。）

解决方法很简单：将属性设置回每个项目`false`的第一`<PropertyGroup>`部分：

```
<PropertyGroup>
    ...
    <OnlyReferenceAndBuildProjectsEnabledInSolutionConfiguration>false</OnlyReferenceAndBuildProjectsEnabledInSolutionConfiguration>
</PropertyGroup> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T09:13:48.150

我遇到了完全相同的问题。从长远来看，我设法找到的两种变通方法都是不可接受的，但它们确实克服了最初的问题，即我们的构建过程使用新的 4.5 堆栈时会变旧。

1.  将项目引用与文件引用交换
2.  创建复合构建配置

我选择了#2，因为文件引用意味着开发人员会失去实时智能感知等。

复合配置很简单：

*   **发布服务器 ->**所有服务器项目
*   **发布消费者->** “发布服务器”+客户端项目

问题似乎是，如果一个项目未包含在当前/活动构建配置中，它将不会将其作为引用的依赖项包含在内。因此，通过将依赖项添加到配置中，项目至少可以编译。

两者都很丑，但至少它让我摆脱了困境。

马特

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-06T06:46:29.377

我发现 MSBuild 正在从解决方案构建项目，它们在 .sln 文件中声明的顺序。因此，如果您使用文本编辑器重新排序它们，您可以修复 MSBuild 的顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-02T14:59:52.000

我觉得这个问题有多种原因。我在这里尝试了大多数解决方案。我无法更改我们的构建服务器以使用 PS 脚本，因此该解决方案已失效。我无法尝试任何工作。

最后，我删除了我的解决方案并开始了一个新的解决方案。新的解决方案奏效了。在将损坏的解决方案与工作解决方案进行比较后，我发现原始解决方案缺少行。每个无法编译的依赖项都缺少这一行：

```
{A93FB559-F0DB-4F4D-9569-E676F59D6168}.Release|Any CPU.Build.0 = Release|Any CPU 
```

注意 1：GUID 将从依赖项更改为依赖项。

注意 2：您可以在解决方案文件的“GlobalSection(ProjectConfigurationPlatforms) = postSolution”部分下找到类似这样的行。

我的 build.proj 文件说使用“Any CPU”平台构建“Release”。因为 MSBuild 找不到这一行，所以它没有构建这个依赖项。这会导致“**错误 CS0246：找不到类型或命名空间**”消息。

如果您好奇，有人将此解决方案设置为“x86”平台（这对我们来说是错误的）。我将其更改为“任何 CPU”（以及其他一些更改）。Visual Studio 没有将相应的行添加到解决方案文件中。在 IDE 中一切正常，但 MSBuild 开始抛出错误。

# java - Mongodb + Java 驱动程序。按日期范围搜索

> ID：13752616
> 
> 赞同：5
> 
> 时间：2012-12-06T21:10:24.007
> 
> 标签：java, mongodb, date

这是我第一次使用带有 java 驱动程序的 Mongodb。我可以使用 javascript 和 Date() 对象通过命令行查询数据库，但是，我在使用驱动程序时遇到了问题。根据我的查询，任何人都可以看到问题所在吗？谢谢

```
 Date current = new Date();
            DBCollection coll = db.getCollection("messages");

            BasicDBObject query = new BasicDBObject("created_on", new BasicDBObject("$gte", new Date(current.getYear(), current.getMonth(), current.getDate())).
                    append("created_on", new BasicDBObject("$lt", new Date(current.getYear(), current.getMonth() - 1, current.getDate()))));

            System.out.println("Query: " + query);

            DBCursor cursor = coll.find(query); 
```

> 查询： { "created_on" : { "$gte" : { "$date" : "2012-12-06T05:00:00.000Z"} , "created_on" : { "$lt" : { "$date" : " 2012-11-06T05:00:00.000Z"}}}}

PS如果不是很明显，我正在尝试查找上个月内的所有记录。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T14:28:27.620

好像您正在构建错误的查询。请尝试以下方法：

```
BasicDBObject query = new BasicDBObject("created_on", //
                      new BasicDBObject("$gte", new DateTime().toDate()).append("$lt", new DateTime().toDate())); 
```

`Datetime`object 是一个在 java 中简化日期操作的库。你可以检查一下。 [http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

morphia 也是一个不错的 java 对象文档映射器 (ODM) 框架，用于通过 java 驱动程序使用 mongodb。它简化了通过 java 的查询。

[https://github.com/jmkgreen/morphia](https://github.com/jmkgreen/morphia)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:29:20.397

根据输出的查询，您正在寻找一个文档，其中的字段`created_on`也有一个名为 的子字段`created_on`。我认为不存在这样的文件。换句话说，您的查询格式不正确。

您的查询对象应如下所示：

```
BasicDBObject dateRange = new BasicDBObject ("$gte", new Date(current.getYear(), current.getMonth(), current.getDate());
dateRange.put("$lt", new Date(current.getYear(), current.getMonth() - 1, current.getDate());

BasicDBObject query = new BasicDBObject("created_on", dateRange); 
```

此外，作为侧边栏，您可能应该避免使用该类的三参数构造函数`java.util.Date`，因为它已被弃用。在 MongoDB Java 驱动程序中处理日期时，我通常使用`java.util.Calendar`类及其`getTime()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T23:28:22.840

我之前没有使用过mongo的Java驱动程序，但是您创建的查询似乎不正确。

```
Query: { "created_on" : { "$gte" : { "$date" : "2012-12-06T05:00:00.000Z"} , "created_on" : { "$lt" : { "$date" : "2012-11-06T05:00:00.000Z"}}}} 
```

查询实际上应该看起来像：

```
Query: { "created_on" : {$gte: start, $lt: end}} 
```

其中 start 和 end 是日期。似乎您第二次引用“created_on”是不必要的，实际上可能会破坏您的查询。

注意：我没有机会测试这个理论，但我正在从[http://cookbook.mongodb.org/patterns/date_range/](http://cookbook.mongodb.org/patterns/date_range/)工作，这似乎与手头的问题非常相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-25T13:32:22.993

Jodatime 库非常有用，请使用 DateTimeZone.UTC 作为 DateTime 的时区参数。设置时区后，您将获得准确的结果。试试这个

```
 Calendar cal = Calendar.getInstance();
    //get current year,month & day using Calender
    int year=cal.get(Calendar.YEAR);
    int monthNumber=cal.get(Calendar.MONTH);
    int dateNumber=cal.get(Calendar.DAY_OF_MONTH);
    monthNumber+=1;

    BasicDBObject query = new BasicDBObject("dateCreated",new BasicDBObject("$gte", new DateTime(year, monthNumber, dateNumber, 0, 0,DateTimeZone.UTC).toDate()).append("$lte",new DateTime(year, monthNumber, dateNumber, 23, 59,DateTimeZone.UTC).toDate()));

    System.out.println("formed query: "+query);

    DBCursor cursor = collection.find(query);
    while(cursor.hasNext())
    {
        System.out.println("found doc in given time range: "+cursor.next().toString());
    } 
```

# php - 锂（li3）定单和限价有很多相关数据

> ID：13752618
> 
> 赞同：2
> 
> 时间：2012-12-06T21:10:36.177
> 
> 标签：php, lithium

使用 Lithium 框架，我有两个模型类，Post 和 Image。它们通过 hasMany 关系关联。

```
//Post.php
class Post extends \lithium\data\Model {
    public $hasMany = array('Image');
} 
```

在我的 PostsController 中的一个查询中，我试图找到一个包含按顺序排序并有限制的图像的帖子。但是，图像上的顺序和限制选项被忽略了。这是我的查询的样子：

```
//PostsController.php
$post = Post::find('first', array(
    'with'=>array(
        'Image'=>array(
            'order'=>array('position'=>'ASC'),
            'limit'=>3
         )
     ),
    'conditions'=>array(
        'Post.id'=>'some-id-value'
    )
)); 
```

此特定查询返回包含所有相关图像的帖子，而不是按“位置”排序。例如，如果这篇文章有 10 张与之相关的图片，则所有 10 张图片都将随它一起返回，而不是仅返回 3 张，按位置排序。

一般来说，这个想法是我希望能够对模型的相关 hasMany 数据进行排序和限制。这是否可能与锂中的 hasMany 关系或 hasMany 无论如何总是返回所有相关数据？显然，我正在尝试的不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:28:53.933

以下是您如何使用`ORDER BY`锂关系...

```
$table1_table2 = Table1::find('all', array(
    'conditions' => array('Table1.foo' => 'bar'),
    'with' => array('Table2'),
    'order' => array('Table2.title'),
    'limit' => 3
)); 
```

请注意`'Table2.title'`which 会导致类似 ...

`SELECT ... ORDER BY Table2.title;`

在这种`ASC`情况下是隐含的，但您也可以通过 ASC 或 DESC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T10:00:23.603

您可以添加您需要的最终查询吗？据我所知，MySQL 根本无法在 JOIN 中进行限制和排序，只能在子查询中进行。

因此，在这种情况下，2 个请求优于 1 个连接：

首先`Post::find(...conditions...)`然后

```
$images = Image::find(array(
   'order' => array('post_id','position'),
   'limit' => 3,
   'conditions' => array(
        'post_id' => $array_of_post_id_from_first_query
   )
); 
```

# php - 从我的帐户发送邮件。不是虚拟主机

> ID：13752619
> 
> 赞同：0
> 
> 时间：2012-12-06T21:10:39.020
> 
> 标签：php, email, message

我收到了一个成功向我发送电子邮件的联系表。

这是摘录：

```
$_POST['message'] = wordwrap($_POST['message'], 70);
mail ('myemail@test.com', $_POST['subject'], $_POST['message'] , $_POST['email']);
echo "<div class='registertext'>Your email was succesfully sent to a member of the administration team. Please wait 24 hours for as to reply and ensure you check your junk mail!<br />To login please click <a href='login.php'>here</a></div>"; 
```

我遇到的问题是，电子邮件是从我的主机发送的。不是我想指定的电子邮件。我将如何克服这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:16:36.753

您可以使用将使用 SMTP 帐户的 PEAR 邮件。这是我使用的邮件表单中的一些代码

```
 $from = "Name <webmaster@domain.com>";
        $to = "Name <address@domain.com>";
        $subject = "Subject";
        $body = 'A message!';

        $host = "ssl://domain.com";
        $port = "465";
        $username = "username";
        $password = "password";

        $headers = array ('From' => $from,
                          'To' => $to,
                          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
                              array ('host' => $host,
                                     'port' => $port,
                                     'auth' => true,
                                     'username' => $username,
                                     'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
            echo("<p>" . $mail->getMessage() . "</p>");
        } else {
            echo("<p>Message successfully sent!</p>");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:14:25.043

您可以在电子邮件标题中指定它：

```
$recipient = "recipient@test.com";
    $from      = "You@yoursite.com";
    $replyTo   = "You@yoursite.com";
    $subject   = "Hi!";
    $text      = "<p>This is a test!<p>";

    $headers = "MIME-Version: 1.0\r\n"
      ."Content-Type: text/html; charset=utf-8\r\n"
      ."Content-Transfer-Encoding: 8bit\r\n"
      ."From: =?UTF-8?B?". base64_encode([Your Name]) ."?= <$from>\r\n"
      ."Reply-To: $replyTo\r\n"
      ."X-Mailer: PHP/". phpversion();

    //send it!
    if (mail($recipients, $subject, $text, $headers, "-f $from")){
        echo "sent";
        } else {
           echo "did not send";
        }; 
```

但很有可能它会被垃圾邮件过滤器捕获。在这种情况下，您最好的选择是使用一个 PHP 邮件库来处理 SMTP 电子邮件并使用您的实际帐户发送邮件（有几个包可以为您处理这个问题：[Pear Mail](http://pear.php.net/package/Mail/redirected)和[PHP Mailer](http://sourceforge.net/projects/phpmailer/)等。

# opencv - 标记跟踪+标记的透视扭曲

> ID：13752629
> 
> 赞同：2
> 
> 时间：2012-12-06T21:11:08.940
> 
> 标签：opencv, augmented-reality, artoolkit

我正在使用 ARToolKit+ 跟踪标记。我收到一个看起来差不多的模型视图矩阵。现在我想扭曲图像，使标记看起来就像我直视它时的样子。但无论我做什么，结果看起来都非常扭曲。我知道 ARToolKit 按列主要顺序存储 4x4 矩阵，所以我为 OpenCV 修复了它。

到目前为止我尝试的是：1）将顺序固定为行主要顺序 2）使用 cvInverse 计算逆（尽管转置 3x3 旋转部分 + 反转平移就足够了） 3）使用 cvPerspectiveWarp 矩阵

难道我做错了什么？

tl；博士：我想要这个：[https](https://www.youtube.com/watch?v=qZ-LU-C2p2Q) ://www.youtube.com/watch?v=qZ-LU-C2p2Q 我得到一些扭曲的线条和很多黑色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:44:53.343

您的问题是从 4x4 转换为 3x3。简短的回答是您想删除第 3 列和底行以制作 3x3，然后与您的相机矩阵进行预乘。有关更长的解释，请参见[此处](https://stackoverflow.com/questions/13100573/how-can-i-transform-an-image-using-matrices-r-and-t-extrinsic-parameters-matric/13106130#13106130)

**澄清** 您从 ARTK 获得的姿势代表从一个地方到另一个地方的转换。当我说“初始图像出现时没有旋转”时，我的意思是您的变换从没有围绕 x 或 y 轴旋转的初始状态变为当前状态。对于大多数增强现实应用程序来说，这是一个很好的假设，我提到它只是为了彻底。

至于为什么可以删除第 3 列。由于您正在变换平面，因此您的 z 坐标可以完全由您的 x 和 y 坐标表示，给定您的平面方程。如果我们假设最初没有旋转，那么您的初始 z 坐标是一个常数值。如果存在旋转，则 z 不是恒定的，但它会根据其平面方程在 x 和 y 中确定性地变化，该平面方程仍然可以用一个矩阵表示（尽管您不需要它）。由于在您的情况下，您的 4x4 变换可能表示从平放在 z = 0 处的标记到其当前位置的变换，因此 4x4 矩阵的第 3 列什么都不做（全部乘以 0），因此可以在不影响的情况下删除它结果。

简而言之：忘记旋转的东西，它比你需要的更复杂，只要意识到变换是从初始坐标到最终坐标，你的初始坐标总是

```
[x,y,0,1] 
```

这使您的第三列无关紧要。

**更新** 对不起！我刚刚重新阅读了您的问题，并意识到您只是想扭曲标记，使其看起来像一个直视，我陷入了描述从 4x4 到 3x3 的一般变换。您从 ARTK 获得的 4x4 变换不是使 Warker 变形的变换，而是将标记从原点移动到其最终位置的变换。像你问的那样对标记进行变形，过程类似，但会略有不同。我以前没有这样做过，但这是我的猜测。

首先，您需要在标记在世界空间中的位置与您希望它在变形后出现的位置之间进行 4x4 变换。现在转换从原点到标记位置。要将变换更改为从 z 轴上更远的某个点（例如 100）到标记位置，请定义变换。

```
initial_marker_pose = [1,0,0,0
                       0,1,0,0
                       0,0,1,100
                       0,0,0,1]; 
```

现在你有了从原点到你想要的“初始”位置的转换，以及从原点到“最终”位置的转换。简单地获得从初始到最终的转换

```
initial_to_final = origin_to_marker*initial_marker_pose.inv(); 
```

现在您将按照我给您的链接中概述的过程进行操作，在这种情况下，您的初始 zpos 不再是 0，而是 100。然后，当您完成后，您需要反转您的 3x3 矩阵。那是因为此过程将您从一个直接的视图带到由 ARTK 的姿势定义的视图，而您想要相反的。您将需要尝试初始 z 位置。它越小，去扭曲后你的标记就会越大。

希望这有效，对于您的问题感到困惑，我们深表歉意。

# jquery - jquery解析从服务器返回的td中的XML

> ID：13752631
> 
> 赞同：1
> 
> 时间：2012-12-06T21:11:10.297
> 
> 标签：jquery, xml

进行 ajax 调用以从服务器返回一些数据。数据返回如下：

```
<table border=1>
    <tr>
        <td>Field Name</td>
        <td>Field Value</td>
    </tr>
    <tr>
        <td>SuccessFlag</td>
        <td>True</td>
    </tr>
    <tr>
        <td>ResponseMessage</td>
        <td><?xml version="1.0" encoding="utf-16"?>
            <License>
                <CustomerID>Bob</CustomerID>
                <License>XXXX-XXXX-XXXX-XXXX-XXXX-XXXX-XXXX-XXXX</License>
                <Log>Created by lt@email.com on December 6, 2012, 1:09 pm Cancelled by b@email.com on December 6, 2012, 1:09 pm</Log>
                <ExpirationDate>2012-12-06</ExpirationDate>
            </License>
        </td>
    </tr>
</table> 
```

我能够像这样输出数据：

```
//ajax call stuff
success: function(data) {
    var answer = $(data).find("td:eq(3)").text();
    var message = $(data).find("td:eq(5)").text();
if (answer==="True") {
        $('input[type="text"], input[type="password"]').val("");
        $('#resultGenerate').show().html('<ul><li>' + message + '</li></ul>');
    } else {
        $('.processing').hide();
        $('input[type="text"], input[type="password"]').val("");
        $('#resultGenerate').show().html('<ul><li>' + answer + '</li><li>' + message +    
        '</ul>');
    }
} 
```

基本上我只是去表格的第 5 个 td 并输出消息。我需要重新格式化为表格或更结构良好的输出。我假设我会创建一个函数来解析每个标签和值对，然后运行该函数？需要一些帮助，一如既往地感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:19:13.110

一旦你有了你的文本，只需调用 parseXML 让 jQuery 把它变成一个你可以使用的对象：

```
var answer = $(data).find("td:eq(3)").text();
var message = $(data).find("td:eq(5)").html();
var xmlDoc = $.parseXML( message );
var $xml = $( xmlDoc );
// Now loop through the markup
$xml.each(function(){
    // Do something with the license
    alert($(this).text());
}); 
```

# gwt - GWT中的程序化CellTable排序不起作用

> ID：13752633
> 
> 赞同：5
> 
> 时间：2012-12-06T21:11:18.440
> 
> 标签：gwt, sorting, celltable

我在[这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable)使用 ListDataProvider 示例作为指南。根据提供的比较器，这些列按预期排序。我正在尝试以编程方式应用示例中在这一行中提到的排序：

```
// We know that the data is sorted alphabetically by default.
table.getColumnSortList().push(nameColumn); 
```

这是做什么的，它使单元格列看起来是用胡萝卜排序指示器排序的。但是，基础数据未排序。有没有办法让表格以编程方式实际应用排序。我想我可以将它与通过 Collections.sort() 实际对数据进行排序结合使用，但我想避免这种情况并在一个地方进行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T16:31:18.110

您可以使用很少的 exta 代码以编程方式对列应用排序。以下代码片段可以做到这一点 -

当你将数据设置到 cellTable 时，你必须像下面的代码那样初始化 ListHandler -

```
cellTable.addColumnSortHandler( createColumnSortHandler() );

private ListHandler<T> createColumnSortHandler()
{
     final ListHandler<T> listHandler = new ListHandler<T>(listDataProvider.getList());
     listHandler.setComparator( sortColumn, comparator );
     return listHandler;
} 
```

当您想触发 SortEvent 时，请执行以下代码片段 -

```
ColumnSortInfo columnSortInfo = new ColumnSortInfo( sortColumn, sortDirection );
cellTable.getColumnSortList().push( columnSortInfo );
ColumnSortEvent.fire( cellTable, cellTable.getColumnSortList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:24:51.080

您必须再次在网格上调用 setData .....

# search - Neo4j - 索引查找问题

> ID：13752640
> 
> 赞同：0
> 
> 时间：2012-12-06T21:11:40.937
> 
> 标签：search, indexing, neo4j, lucene

我试图在 neo4j shell 中将索引类型从精确设置为全文，所以我可以使用 lucene 查询进行不区分大小写的搜索。所以我使用了这个命令：

```
index --set-config Destination type fulltext 
```

但它没有用。仍然无法进行不区分大小写的搜索，因此需要更改一些其他值，例如 _blueprints:type 和 to_lower_case。那没有任何好处。

现在它以某种方式忽略了名称值的第一个字符（奇怪！）。因此，例如，如果我正在搜索“London”并且我输入“Lon”，它不会返回任何内容。但是如果我输入“ond”，它会返回节点。每个节点都一样。

我尝试将一切恢复正常。没有帮助。

我搞砸了什么？我错过了什么？

我正在使用 Everyman PHP 库与数据库进行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:42:52.307

我用“to_lower_case”属性创建了新索引。我认为这将解决我的问题，只需在将字符串插入查询之前将其转换为小写即可。它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:00:13.327

之后设置配置不会更新已经索引的值（我认为，正如 shell 所指出的那样）。如果您使用“to_lower_case=true”创建了索引，那么添加和查询会将值转换为小写。调用 Index#get 仍然需要您自己将其小写。

# javascript - 不带滚动条滚动

> ID：13752641
> 
> 赞同：4
> 
> 时间：2012-12-06T21:11:50.047
> 
> 标签：javascript, css, textarea, scrollbar, overflow

样品形式：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
* {font:13px arial; color:white;}
body {background:black;}
label {display:inline-block; width:50px;}
input, textarea {margin:0; border:1px solid red; padding:0; background:green;}
textarea {width:300px; height:100px;}
</style>
</head>
<body>
<form action="#">
<div><label for="entry_0">Name</label><input type="text" id="entry_0"></div>
<div><label for="entry_1">Email</label><input type="text" id="entry_1"></div>
<div><label for="entry_2">URL</label><input type="text" id="entry_2"></div>
<div id="parent"><textarea id="entry_3"></textarea></div>
<div><input type="submit" value="Submit"></div>
</form>
</body>
</html> 
```

我想删除/隐藏 textarea 滚动条，因为它与我的表单样式不匹配。我知道我可以使用 jQuery 插件来设置滚动条的样式，但是它们不能在不同的浏览器/系统中可靠地工作。要隐藏我可以使用的滚动条`textarea {width:300px; height:100px; overflow:hidden;}`，但它会完全阻止 Firefox 通过鼠标和键盘滚动。我还尝试了以下解决方法：

```
#parent {width:284px; height:102px; overflow:hidden;}
textarea {width:300px; height:100px; overflow-x:hidden; overflow-y:scroll;} 
```

如果我添加一些脚本来计算父分割宽度，它应该可以正常工作：

```
var textareaWidth = document.getElementById('entry_3').scrollWidth;
document.getElementById('parent').style.width = textareaWidth + 'px'; 
```

但无论如何，上述方法似乎不适用于 Chrome/Safari。
演示：http: [//jsfiddle.net/RainLover/snTaP/](http://jsfiddle.net/RainLover/snTaP/)

在 Chrome/Safari 中打开上面的演示 >> 在文本区域中插入一些文本 >> 突出显示/选择一行并将鼠标向右拖动，您将看到滚动条。或使用键盘键`Page Up`和`Page Down`。

任何更正或其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:10:24.347

哈克但似乎工作......

**使用`::after`伪元素**

```
#parent {width:302px; overflow:hidden; position: relative;}
textarea {width:300px; height:100px; overflow-x:hidden; overflow-y:scroll;}
textarea:focus {
    outline-offset: 0;
    outline-style: none;
}

#parent::after {
    position: absolute;
    width: 17px;
    top: 0;
    right: 0px;
    height: 102px;
    border-left:1px solid red;
    background-color: black;
    content: "";
    display: block;   
} 
```

[http://jsfiddle.net/tarabyte/snTaP/3/](http://jsfiddle.net/tarabyte/snTaP/3/)

**或使用额外的 div**

HTML：

```
<div id="parent">
  <textarea id="entry_3"></textarea>
  <div id="hidescroll"></div>
</div> 
```

CSS：

```
#parent {width:302px; overflow:hidden; position: relative;}
textarea {width:300px; height:100px; overflow-x:hidden; overflow-y:scroll;}
textarea:focus {
    outline-offset: 0;
    outline-style: none;
}
#hidescroll {
    position: absolute;
    width: 17px;
    top: 0;
    right: 0;
    z-index: 1000;
    height: 102px;
    border-left:1px solid red;
    background-color: black;
} 
```

[http://jsfiddle.net/tarabyte/snTaP/2/](http://jsfiddle.net/tarabyte/snTaP/2/)

# java - File.renameTo() 没有任何效果

> ID：13752645
> 
> 赞同：3
> 
> 时间：2012-12-06T21:11:57.753
> 
> 标签：java, file, formatting, rename

我希望能够重命名文件夹列表以删除不需要的字符（例如，点和双空格必须变成单个空格）。

单击 Gui 中的按钮后，您将看到一个带有正确格式名称的消息框，表明格式正确并且调用了该函数。当我查看我创建的测试文件夹时，名称没有改变（即使刷新后也没有）。使用硬编码字符串也不起作用。

我在看什么？

```
public void cleanFormat() {
    for (int i = 0; i < directories.size(); i++) {
        File currentDirectory = directories.get(i);
        for (File currentFile : currentDirectory.listFiles()) {
            String formattedName = "";
            formattedName = currentFile.getName().replace(".", " ");
            formattedName = formattedName.replace("  ", " ");
            currentFile.renameTo(new File(formattedName));
            JOptionPane.showMessageDialog(null, formattedName);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T21:29:08.823

对于未来的浏览器：这已通过 Assylias 的评论得到修复。您将在下面找到修复它的最终代码。

```
public void cleanFormat() {
    for (int i = 0; i < directories.size(); i++) {
        File currentDirectory = directories.get(i);
        for (File currentFile : currentDirectory.listFiles()) {
            String formattedName = "";
            formattedName = currentFile.getName().replace(".", " ");
            formattedName = formattedName.replace("  ", " ");
            Path source = currentFile.toPath();
            try {
                Files.move(source, source.resolveSibling(formattedName));
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:18:34.003

好吧，首先`File.renameTo`是尝试重命名同一文件系统上的文件。

以下来自[java文档](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)

```
Many aspects of the behavior of this method are inherently platform-dependent: 
The rename operation might not be able to move a file from one filesystem to 
another, it might not be atomic, and it might not succeed if a file with the 
destination abstract pathname already exists. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:23:30.417

首先检查返回值，File.renameTo 重命名成功则返回true；否则为假。例如，您不能在 Windows 上将文件从 c: 重命名/移动到 d:。最重要的是，改用 Java 7 的 java.nio.file.Files.move。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:27:18.677

对 getName() 的调用只返回文件名，而不返回任何目录信息。因此，您可能正在尝试将文件重命名为不同的目录。

尝试将包含目录添加到您传递给 rename 的文件对象中

```
currentFile.renameTo(new File(currentDirectory, formattedName)); 
```

也像其他人所说的那样，您应该检查 renameTo 的返回值，这可能是错误的，或者使用 Files 类中的新方法，我发现这些方法会抛出非常有用的 IOExceptions。

# c# - 如何使函数不关心 C# 中缺少的参数

> ID：13752646
> 
> 赞同：1
> 
> 时间：2012-12-06T21:11:57.480
> 
> 标签：c#, function, console-application

> **可能重复：**
> [如何在 C# 中使用可选参数？](https://stackoverflow.com/questions/199761/how-can-you-use-optional-parameters-in-c)

我正在做文字冒险，并使用我在网上找到的一些代码，我有打字机风格的打印。所以我在一个函数中有这个代码，除了传递代码来输入之外，我还试图传递类型之间的延迟。现在我的问题是我并不总是希望输入延迟参数，我尝试搜索 int 变量的默认值并查看是否使用 if 语句检查变量是否不是默认值以及是否不是默认的，它会使用传入的内容。除了它仍然不起作用，它仍然希望我传递一些东西。他们无论如何都要让它发挥作用吗？

对不起，如果我的问题令人困惑，我不是最擅长制作非令人困惑的句子......（看到了吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:14:32.950

您可以使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

```
public void MovePerson(int x, int y, int delay = 300) 
{

} 
```

在这里，在这个完全组成的函数中，如果您在调用函数时未指定值，您可以构建一个默认延迟，该延迟将设置为 300。

```
MovePerson(10, 20);  //Delay for 300
MovePerson(10, 20, 100); //Delay for 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:13:50.740

```
public void Task (String optional = "default") {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:15:43.303

只需使用默认参数

```
int Multiply (int a = 10, int b = 20)
{
    return a * b;
} 
```

或者你也可以重载一个函数

```
int Multiply ()
{
    return 10 * 20;
}
int Multiply (int a, int b)
{
    return a * b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:16:07.960

解决这个问题的传统方法是使用多个方法重载。这是一个例子：

```
public class Foo
{
    public void Bar(string value)
    {
        Console.WriteLine(value);
    }

    public void Bar()
    {
        Bar("I have no value :(");
    }
} 
```

您可以调用`Bar("hello world")`或只是调用`Bar()`，它将使用默认值。

C# 已经引入了语法糖来使这更容易，因为它是一种常见的模式，通过使用可选参数：

```
public void Bar(string value = "I have no value :(")
{
    Console.WriteLine(value);
} 
```

这最终将以（大约）相同的方式工作，但更容易输入。

# tomcat - Tomcat 控制台日志从我的应用程序中获取输出

> ID：13752647
> 
> 赞同：0
> 
> 时间：2012-12-06T21:11:57.710
> 
> 标签：tomcat, logging, axis2, tomcat7, java.util.logging

我正在使用 tomcat 7.0.32 并修改了我的 logging.properties 文件以按照此处的建议关闭控制台附加程序：

[http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Considerations_for_productive_usage](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Considerations_for_productive_usage)

我遇到的麻烦是我正在部署一个修改版本的axis2，其中包含我已经部署在其中的内部应用程序，并且仍在登录到控制台。

我想关闭它或至少限制它，因为有很多低级别的 DEBUG 级别日志似乎不依赖于 tomcat 使用的 logging.properties 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:59:58.483

只需从您的应用程序中删除 log4j JAR。

# maven - Maven：MAVEN_OPTS 中的 vm args 不起作用，但如果在命令行中指定了它们

> ID：13752656
> 
> 赞同：1
> 
> 时间：2012-12-06T21:12:32.303
> 
> 标签：maven, maven-3, maven-surefire-plugin, vmargs

我有一个由 surefire 运行的特定测试用例，当未设置此 vm arg 时该测试用例失败。

如果我运行，我能够成功通过测试：

```
mvn test -Dtest=TestClass -Djava.net.preferIPv4Stack=true 
```

这很好用。现在我想概括一下，以便为所有 maven 构建设置 vm arg。

在我的 .bashrc 我添加了

```
MAVEN_OPTS='-Djava.net.preferIPv4Stack=true' 
```

我已经通过回显设置了 env 变量来确认。不幸的是，这对我的测试用例没有影响。我错过了哪些其他会干扰这里的考虑因素？

谢谢！R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:47:29.987

Based on the [documentation](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine) you can give a supplemental configuration to the maven-surefire-plugin:

```
<configuration>
  <argLine>-Djava.net.preferIPv4Stack=true</argLine>
  ...
</configuration> 
```

# c++ - 为什么我不能参考删除我的节点

> ID：13752660
> 
> 赞同：-5
> 
> 时间：2012-12-06T21:12:47.963
> 
> 标签：c++

```
void deleteElement(LinkedListElement<char> *&pending)
{
    if (pending->Next) {
        char value = pending->Next->Data;
        pending->Data = value;
        LinkedListElement<char> *temp = pending->Next;
        pending->Next = pending->Next->Next;
        delete temp;
    }else{
        delete pending;
        pending = NULL;
    }
}

LinkedListElement<char> *l1 = new LinkedListElement<char>('a');
LinkedListElement<char> *l2 = new LinkedListElement<char>('b');
LinkedListElement<char> *l3 = new LinkedListElement<char>('a');
LinkedListElement<char> *l4 = new LinkedListElement<char>('c');
l1->setNext(l2); l2->setNext(l3); l3->setNext(l4);

printLinkedList(l1);
deleteElement(l4);
printLinkedList(l1); 
```

我想问的 C++ 中简单棘手的删除节点在 else 语句中，如果链表是 end ，那么我可以删除 end 本身。

但是两个打印功能，总是打印abac，第二种方式是abac。因为我只是通过引用传递参数，（&），我想如果我想删除 l4 我不需要更改 l3->Next，因为我可以将 l4 更改为 NULL，而 l3->Next 将是 NULL。

我尝试使用

```
delete pending; pending=NULL; 
```

为什么它不起作用，两个打印功能总是打印abac

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:46:06.710

You `delete l4`, but you never change `l3`, and it points to `l4`s memory (now deleted) which still contains the data ('c')

You need to

```
l3->setNext(NULL); 
```

to remove the element from the list (and you must still delete it of course)

To use the `deleteElement` function, you would need to change it to iterate through the list (Pseudo code):

```
void deleteElement( Element head , Element toBeDeleted)
{
    //are we deleting head (the first element of the list?) 
    //yes then head should be nulled, and delete as normal

    current = head ; ancestor = head;

    //scan through list (current becomes current->next until no more)
    //until we find toBeDeleted
    //maintain ancestor as we go 

    //if found set ancestor->next to current->next
    //delete toBeDeleted
} 
```

# java - Java：Selector.keys() 和 Selector.selectedKeys() 有什么区别？

> ID：13752664
> 
> 赞同：1
> 
> 时间：2012-12-06T21:13:00.287
> 
> 标签：java, selector, nio

Wat`Selector.keys()`和有什么不一样`Selector.selectedKeys()`？

Javadoc **keys** () "*返回此选择器的键集。该键集不可直接修改。只有在取消键并且取消注册其通道后，才会删除键。任何修改键集的尝试都将导致抛出 UnsupportedOperationException . 密钥集不是线程安全的。* "

Javadoc **selectedKeys** () *返回此选择器的选定键集。可以从所选密钥集中删除密钥，但不能直接将密钥添加到所选密钥集中。任何将对象添加到键集的尝试都将导致抛出 UnsupportedOperationException。selected-key 集不是线程安全的。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:32:03.120

当你创建一个选择器来使用它时，你需要注册一些键。这些进入密钥集。whenever one of these keys is selected then it is added to the selected keys set. 选定的键集将始终是键集的子集，但可能不是全部。

# bash - AWK 按分隔符和计数拆分文件

> ID：13752667
> 
> 赞同：1
> 
> 时间：2012-12-06T21:13:20.053
> 
> 标签：bash, unix, awk

我有一个 220mb 的大文件。该文件按水平行“---”分组。这是我到目前为止所拥有的：

```
 cat test.list | awk -v ORS="" -v RS="-------------------------------------------------------------------------------" '{print $0;}' 
```

如何每 1000 个匹配项打印到一个新文件？

还有另一种方法可以做到这一点吗？我查看了 split 和 csplit 但“----”行无法预测发生，因此我必须匹配它们，然后根据匹配数进行拆分。

我希望将输出文件分配到每个文件 1000 个匹配的组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:20:29.567

要将前 1000 条记录输出到`outputfile0`、下一个到`outputfile1`等，只需执行以下操作：

```
awk 'NR%1000 == 1{ file = "outputfile" i++ } { print > file }' ORS= RS=------ test.list 
```

（请注意，为简单起见，我截断了 RS 中的破折号。）'

不幸的是，使用`RS`超过单个字符的值会产生未指定的结果，因此上述方法不能解决。也许需要类似 twalberg 的解决方案：

```
awk '/^----$/ { if(!(c%1000)) count+=1; c+=1; next } 
    {print > ("outputfile"count)}' c=1 count=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:35:13.437

未经测试，但这些方面的东西可能会起作用：

```
awk 'BEGIN {fileno=1,matchcount=0}
     /^-------/ { if (++matchcount == 1000) { ++fileno; matchcount=0; } }
                { print $0 > "output_file_" fileno }' < test.list 
```

将所有这些都放入，说`split.awk`并使用可能会更清洁`awk -f split.awk test.list`......

# mysql - 如何将参数传递给 Coldfusion 的 SSRS 报告？

> ID：13752668
> 
> 赞同：1
> 
> 时间：2012-12-06T21:13:32.580
> 
> 标签：mysql, sql, coldfusion

我正在尝试将参数从coldfusion传递给SSRS报告。在我将参数传递给水晶报告之前，请参阅下面的代码。

```
<CFOUTPUT>
 <FORM NAME="MoveInSummaryByHouseReport"  action="//#crserver#/reports/MoveInSummaryByHouse.rpt" method="POST" TARGET="MoveInSummaryByHouseReport">
 <input type=hidden name="user0" value="#User#">
 <input type=hidden name="password0" value="#Password#">
 <INPUT TYPE="Hidden" name="prompt0" value="#HouseData.cName#">
   <INPUT TYPE="Hidden" NAME="prompt1" VALUE="#form.prompt1#">  
</FORM>
</CFOUTPUT> 
```

但是现在我必须将相同的参数传递给 SSRS 报告而不是水晶报告。我尝试在下面传递来自上述代码的**prompt0/prompt1**参数。它不起作用。SSRS 网址：[http ://vmdbprod02dev.alcco.com/ReportServer/Pages/ReportViewer.aspx?%2fTIPS4%2fMove-Ins+Summary+By+House&rc:Command=Render&rc:Parameters=false&Scope=House&Selection=](http://vmdbprod02dev.alcco.com/ReportServer/Pages/ReportViewer.aspx?%2fTIPS4%2fMove-Ins+Summary+By+House&rc:Command=Render&rc:Parameters=false&Scope=House&Selection=) **prompt0** &Period= **prompt1** &ResidencyType= 0

我如何将参数传递给 SSRS 报告.. 感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:50:50.603

我们有一个页面可以做到这一点。ColdFusion 页面执行它需要执行的任何操作，然后对包含 ssrs 报告的 asp 页面执行 cflocation。ColdFusion 变量作为 url 变量传递。

# android - 无法访问使用应用程序部署的扩展文件

> ID：13752671
> 
> 赞同：3
> 
> 时间：2012-12-06T21:13:44.503
> 
> 标签：android, actionscript-3, air, apk-expansion-files

我有一个用于在 Google Play 上部署的 AS3/AIR 应用程序。该应用程序附加了一个扩展文件。扩展文件名为“main.1000000.air.com.mycompany.myapp12.obb”，并与应用程序一起正确下载。

问题是我无法以任何方式访问扩展文件，例如：

```
File.applicationStorageDirectory.resolvePath('Android/obb/main.1000000.air.com.mycompany.myapp12.obb');
File.applicationStorageDirectory.resolvePath('/Android/obb/main.1000000.air.com.mycompany.myapp12.obb');
File.applicationStorageDirectory.resolvePath('main.1000000.air.com.mycompany.myapp12.obb');
File.applicationStorageDirectory.resolvePath('/main.1000000.air.com.mycompany.myapp12.obb'); 
```

和类似的变化。即使在 Windows 上开发时的路径似乎正确，我也无法访问该文件。部署后，我在 catch 块中使用提供的 File url 属性出现“未找到”错误：“app-storage:/Android/obb/main.1000000.air.com.mycompany.myapp12.obb”。几天来，我一直在寻找解决方案并尝试各种方法，但我被困住了。在华硕 EEE PAD 上开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:00:06.430

尝试这个：

```
var path : String = "Android/obb/air.com.mycompany.myappli";
var filename : String = "main.1000000.air.com.mycompany.myappli.obb";
var file : File = File.documentsDirectory.resolvePath(path + "/" + filename);
if (file.exists)
{ ... } 
```

希望这有帮助

# sql - GROUP BY 的唯一用户贡献返回的总数高于预期

> ID：13752678
> 
> 赞同：2
> 
> 时间：2012-12-06T21:14:05.513
> 
> 标签：sql

使用[Stack Exchange 数据资源管理器](https://data.stackexchange.com/ "数据.SE")，我试图找出 Stack Overflow 上排名前十的回答者是谁。这是我的查询：

```
SELECT TOP 10 COUNT (PostTypeId) postcount, OwnerUserId
FROM Posts
WHERE PostTypeId = '2' AND OwnerUserId IS NOT NULL
GROUP BY OwnerUserId
ORDER BY postcount DESC 
```

而且，这些是我的结果：

```
postcount OwnerUserId 
--------- ----------- 
23628     22656       
17505     29407       
12978     157882      
10863     34397       
10598     23354       
10560     17034       
9341      20862       
8600      115145      
7394      57695       
7073      1583 
```

问题是：用户 22656 是[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)，他的[个人资料显示他有 23,702 个答案](https://stackoverflow.com/users/22656/jon-skeet?tab=answers)。

我检查了其他人：[Darin Dimitrov](https://stackoverflow.com/users/29407/darin-dimitrov)是用户 29407。他的个人资料显示他有[17,525 个答案](https://stackoverflow.com/users/29407/darin-dimitrov?tab=answers)，而不仅仅是 17,505 个。其他人都同样偏斜。

为什么我得到错误的总数`postcount`？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:17:35.650

您在 Jon 的个人资料上看到更多答案，因为您有钻石并且看到他已删除的答案。

我看到“23,702 Answers”更接近您的查询报告的值。

其余的差异归结于数据浏览器不会每分钟更新一次，因此总是会报告较低的总数（当然，假设人们正在添加更多内容）。

# html - HTML/CSS：我怎样才能将'a href'元素浮动到左边而不离开它们所在的div元素？

> ID：13752679
> 
> 赞同：0
> 
> 时间：2012-12-06T21:14:08.460
> 
> 标签：html, css

我有以下代码用于演示：

```
<html>
    <head>
        <style type="text/css">
            a{
              display:block;
              float:left;
            }
            #linkDiv{
                border-style:solid;
            }
        </style>
    </head>
    <body>
        <div id="linkDiv">
            <a href="">test</a>
            <a href="">test</a>
            <a href="">test</a>
        </div>
    </body>
</html> 
```

我希望我的链接成为块，并且每个链接都相邻。没有`float:left`这就是我得到的：

![在此处输入图像描述](../Images/1778717ea939684cf876d3686d7627a8.png)

然而，当我使用`float:left`这是结果：

![在此处输入图像描述](../Images/d343c429ff58ccbabb25340d4293583c.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:18:37.710

您需要在父元素上使用“clearfix”：

```
overflow: hidden; 
```

或者

```
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:20:47.263

尝试

```
overflow: auto 
```

在包含`div`

或使用 clearfix hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:26:34.193

你可以把它添加到你的CSS：

```
#linkDiv {
    overflow:auto;
} 
```

但为什么不在你的 a 标签上使用内联块呢？

```
a {
    display:inline-block;
}
#linkDiv {
    border-style:solid;
}​ 
```

内联块元素看起来很像左浮动元素，但行为更像常规内联元素（通常更容易操作）。适用于所有浏览器 IE8+（IE7 有一个简单的 polyfill）。

几篇可能有用的文章：

*   [http://www.vanseodesign.com/css/inline-blocks/](http://www.vanseodesign.com/css/inline-blocks/)
*   [http://www.onderhond.com/blog/inline-block-vs-float](http://www.onderhond.com/blog/inline-block-vs-float)

# visual-studio - 设计视图中的 Visual Studio 2012 滚动问题

> ID：13752680
> 
> 赞同：1
> 
> 时间：2012-12-06T21:14:10.253
> 
> 标签：visual-studio, view, scroll

在使用母版页在 .aspx 中定位内容时，我失去了在 Visual Studio 2012 的设计视图中使用滚动条水平滚动的能力。该条显示为灰色，就像它被禁用一样。Altought，我仍然可以在浏览器中看到整个页面。

有谁知道解决这个问题的方法？谢谢

# c# - c#：如何使用默认空格+一组附加分隔符拆分字符串？

> ID：13752681
> 
> 赞同：2
> 
> 时间：2012-12-06T21:14:10.200
> 
> 标签：c#, string, split

我需要使用一组分隔符在 C# 中拆分字符串。这个集合应该包括默认的空格（即你在你时有效地得到的`String.Split(null, StringSplitOptions.RemoveEmptyEntries)`）加上我指定的一些额外的字符，比如'.'、','、';'等。所以如果我有一个由这些额外字符组成的 char 数组，如何向其中添加所有默认空格，以便将该扩展数组提供给`String.Split`？或者有没有更好的方法来使用我的自定义分隔符集 + 空格分割？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:15:42.180

[`string.Split`](http://msdn.microsoft.com/en-US/library/ms131448%28v=vs.110%29.aspx)如果您至少在 .NET 2.0 上，只需使用适当的重载：

```
char[] separator = new[] { ' ', '.', ',', ';' };
string[] parts = text.Split(separator, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

我想我因为不完整的答案而被否决了。OP 已经要求一种方法来分割所有空格（在我的电脑上是 25 个），但也被其他分隔符分割：

```
public static class StringExtensions
{
    static StringExtensions()
    {
        var whiteSpaceList = new List<char>();
        for (int i = char.MinValue; i <= char.MaxValue; i++)
        {
            char c = Convert.ToChar(i);
            if (char.IsWhiteSpace(c))
            {
                whiteSpaceList.Add(c);
            }
        }
        WhiteSpaces = whiteSpaceList.ToArray();
    }

    public static readonly char[] WhiteSpaces;
    public static string[] SplitWhiteSpacesAndMore(this string str, IEnumerable<char> otherDeleimiters, StringSplitOptions options = StringSplitOptions.None)
    {
        var separatorList = new List<char>(WhiteSpaces);
        separatorList.AddRange(otherDeleimiters);
        return str.Split(separatorList.ToArray(), options);
    }
} 
```

现在您可以通过这种方式使用此扩展方法：

```
string str = "word1 word2\tword3.word4,word5;word6";
char[] separator = { '.', ',', ';' };
string[] split = str.SplitWhiteSpacesAndMore(separator, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-03T20:15:00.593

正如您在请求中所述，上面的答案并未使用所有空白字符作为分隔符，仅使用程序指定的分隔符。在上面的解决方案示例中，这只是 SPACE，而不是 TAB、CR、LF 和所有其他 Unicode 定义的空白字符。

我还没有找到从字符串中检索默认空白字符的方法。但是，它们是在 Regex 中定义的，您可以使用它来代替 String。在您的情况下，将句点和逗号添加到正则表达式空白集中：

```
Regex regex = new Regex(@"[\s\.,]+");   // The "+" will remove blank entries
input = @"1.2 3, 4";
string[] tokens = regex.Split(input); 
```

会产生

```
tokens[0] "1"
tokens[1] "2"
tokens[2] "3"
tokens[3] "4" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:17:17.690

```
str.Split(" .,;".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-28T18:39:48.720

我使用类似以下的内容来确保我总是在拆分的默认空白字符上进行拆分：

```
public static string[] SplitOnWhitespaceAnd(this string value,
    char[] separator, StringSplitOptions options = StringSplitOptions.RemoveEmptyEntries)
    => value.Split().SelectMany(s => s.Split(separator, options)).ToArray(); 
```

请注意，为了与 Microsoft 的命名约定保持一致，您应该使用 WhiteSpace 而不是 Whitespace。

请参阅 Microsoft 的[Char.IsWhiteSpace](https://msdn.microsoft.com/en-us/library/t809ektx(v=vs.110).aspx "字符.IsWhiteSpace")文档以查看默认分割的空白字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:17:43.640

```
string[] splitSentence(string sentence)
{
     return sentence
     .Replace(",", " , ")
     .Replace(".", " . ")
     .Split(' ', StringSplitOptions.RemoveEmptyEntries)
} 
```

或者

```
string[] result = test.Split(new string[] {"\n", "\r\n"},
                     StringSplitOptions.RemoveEmptyEntries); 
```

# jquery - 使滑块全宽，但内容居中

> ID：13752683
> 
> 赞同：3
> 
> 时间：2012-12-06T21:14:17.613
> 
> 标签：jquery, html, css

我正在玩[http://www.slidesjs.com/](http://www.slidesjs.com/)滑块。试图使其全宽，但使当前幻灯片（slidescontent）全宽，但在容器（slidescenter）中有一个div，使其内容保持居中并设置宽度，这是我使用的代码：

```
<!doctype html>
    <head>
        <title>Title</title>

        <style type="text/css" media="screen">
            .slides_container {
                width:100%;
                height:270px;
            }
            .slides_container div {
                width:100%;
                height:270px;
                display:block;
            }
           .slidescontent {width:100%;}
           .slidescenter {width:990px;}
        </style>

        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="slides.js"></script>

        <script>
            $(function(){
                $("#slides").slides();
            });
        </script>
    </head>
    <body>
        <div id="slides">
            <div class="slides_container">
                <div class="slidescontent">
                  <div class="slidescenter">
                    Text 1
                  </div>
                </div>
                <div>
                    Text 2
                </div>
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
            </div>
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:11:50.800

我建议使用[Cycle](http://jquery.malsup.com/cycle)。[Slidesjs](http://www.slidesjs.com)正在添加不需要的 html ......导致一些问题

我在这个网站上做了一个居中的幻灯片：http: [//celebrationsnetwork.co.nz](http://celebrationsnetwork.co.nz)

通过使主容器设置宽度并居中（使用边距）来做到这一点

```
#slides {
    width: 570px;
    height: 270px;
    margin: 0 auto;
    overflow: hidden;
} 
```

并使幻灯片设置宽度：

```
#slides .slide {
    width: 570px;
    height: 270px;
}​ 
```

我在 Jsfiddle 上解决了你的问题：http: [//jsfiddle.net/3q8cX/4](http://jsfiddle.net/3q8cX/4)

任何问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:23:48.163

由于无法实际使用 slides.js（因为它指的是本地机器/服务器上的副本），所以很难判断发生了什么。您是否尝试过以标准方式将 .slidescenter 居中？

```
.slidescenter {
  width: 990px;
  margin: 0 auto;
} 
```

# forms - 表单中的多个文本字段不起作用

> ID：13752688
> 
> 赞同：2
> 
> 时间：2012-12-06T21:14:26.737
> 
> 标签：forms, api, drupal

我创建了一个包含多个文本字段的表单。文本字段从数据库中获取默认值。表格在表格中，但有些单元格消失了。这很奇怪，因为当我更改数据库中的某些值时，它们可能会出现。任何人都可以帮忙吗？

```
$matches = competition_entry_load(); 
    $form['namefield'] = array(
    '#type' => 'fieldset',
    '#title' => t('check'),
    '#collapsible' => TRUE,
    '#collapsed' => FALSE,
  );

  foreach ($matches as $key=>$entry) {
    $A1 = $entry->A1;   
    $AX = $entry->AX;
    $A2 = $entry->A2;
    $home_team = $entry->home_team;
    $away_team = $entry->away_team;

    $form['namefield'][$A1] = array(
    '#type' => 'textfield',
    '#default_value' => $A1,
    '#size' => 6,
    '#maxlength' => 6,
    '#prefix' => '<table border=0 cellspacing=30 celladding=30><tr><td><center>',
    '#suffix' => '</center></td>',
  ); 

    $form['namefield'][$AX] = array(
    '#type' => 'textfield',
    '#default_value' => $AX,
    '#size' => 4,
    '#maxlength' => 4,
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td>',
  ); 

    $form['namefield'][$A2] = array(
    '#type' => 'textfield',
    '#default_value' => $A2,
    '#title'=> t($A2),
    '#size' => 4,
    '#maxlength' => 4,
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td>',
  ); 

    $form['namefield'][$home_team] = array(
    '#type' => 'textfield',
    '#default_value' => $entry->home_team,
    '#size' => 15,
    '#maxlength' => 15,
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td>',
  ); 

    $form['namefield'][$away_team] = array(
    '#type' => 'textfield',
    '#default_value' => $entry->away_team,
    '#size' => 15,
    '#maxlength' => 15, 
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td>',
  );

    $form['namefield']['skorH_'.$home_team] = array(
    '#type' => 'textfield',
    '#size' => 1,
    '#maxlength' => 1,
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td>',
  ); 

    $form['namefield']['skorA_'.$home_team] = array(
    '#type' => 'textfield',
    '#size' => 1,
    '#maxlength' => 1,
    '#prefix' =>'<td><center>',
    '#suffix' => '</center></td></tr></table>',
  ); 
}

return $form;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:05:53.760

我认为错误在于您用作 $form 数组的键的变量值。如果在循环中 $A1、$A2 等的值在任何点重复，则这些值将被覆盖。看到 $A1、$A2 等的值是唯一的。

# javascript - JS 上的菜鸟——为什么 document.onclick 不能正常工作？

> ID：13752689
> 
> 赞同：2
> 
> 时间：2012-12-06T21:14:29.457
> 
> 标签：javascript, function, events, onclick, handler

我试图在单击链接时显示图片库，然后在单击浏览器窗口中的任何位置时消失。我可以更改与单击“galleryshow”元素相关的功能，这样如果我单击它，就会显示画廊，如果再次单击它，画廊就会消失；但是，如果我尝试这样做，以便在单击窗口（或文档）时画廊关闭，则什么也不会发生。

这是我的代码：

```
function gallerymake() {

    document.onclick = function () {gallerytake();};
   // document.getElementById("hoverage").onclick = function() {gallerytake();}; 
    document.getElementById("galleryhold").style.visibility="visible";
}

  function gallerytake(){
    document.getElementById("hoverage").onclick = function () {gallerymake();};
    document.getElementById("galleryhold").style.visibility="hidden";
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:57:22.943

freejosh 的回答有效。但是，`e.stopPropagation()`如果有其他处理程序使用事件委托，则调用可能会产生不希望的副作用，因为这些处理程序可能不会被调用。

事件处理的基础之一是它们不应该尽可能地影响或依赖其他处理程序，例如，如果您有两个按钮需要显示两个不同的 div。通过调用`e.stopPropagation()`，[单击其中一个弹出窗口不会隐藏另一个弹出窗口](https://stackoverflow.com/questions/10520436/javascript-event-propagation/10520915#10520915)。请参阅[document.click 继续切换菜单](https://stackoverflow.com/questions/13571457/document-click-keep-toggling-the-menu/13572270#13572270)以获取由于与灯箱事件处理程序发生冲突而无法正常工作的示例。因此，不影响任何其他代码的解决方案是安装一个文档单击处理程序，该处理程序仅在单击不是来自按钮或弹出窗口内时才起作用。

[http://jsfiddle.net/b4PXG/2/](http://jsfiddle.net/b4PXG/2/)

**HTML**

```
Here is my web page <button id="show-btn"> show popup</button>

<div id="modal" > I will show over everything <a href="http://google.com" target="_blank">Google</a></div>​ 
```

**JS**

```
var modal = document.getElementById('modal');
var btn = document.getElementById('show-btn');

btn.onclick = function() {
    modal.style.display = "block";   
};

document.onclick = function (e) {
    e = e || window.event;      
    var target = e.target || e.srcElement;
    if (target !== btn && (!target.contains(modal) || target !== modal)) {
        modal.style.display = 'none';
    }  
} 
```

您可以将此模式抽象为[创建文档点击处理程序的函数](http://jsfiddle.net/b4PXG/3/)

```
/**
 * Creates a handler that only gets called if the click is not within any 
 * of the given nodes
 * @param {Function} handler The function to call (with the event object as
 *        as its parameter)
 * @param {HTMLElement} exclude... If the click happens within any of these
 *        nodes, the handler won't be called
 * @return {function} A function that is suitable to be 
 *         bound to the document click handler
 */ 
function createDocClickHandler(handler /* [,exclude, exclude, ...] */) {
    var outerArgs = arguments;
    return function (e) {
        e = e || window.event;      
        var target = e.target || e.srcElement;
        // Only call the original handler if the click was outside all the excluded nodes
        var isWithinExcluded = false;
        for (var i=1; i < outerArgs.length; i++) {
            var excluded = outerArgs[i];
            if (target === excluded || excluded.contains(target)) {
                isWithinExcluded = true;
                break;
            }
        }

        if (!isWithinExcluded) {
            handler.call(this, e);
        }
    }
}

var modal = document.getElementById('modal');
var btn = document.getElementById('show-btn');

btn.onclick = function() {
    modal.style.display = "block";   
};

// Assign the handler that will hide the popup if the clicked
// happened outside of modal and btn       
document.onclick = createDocClickHandler(function (e) {
    modal.style.display = 'none';
}, modal, btn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:25:04.917

`document`每次单击`hoverage`元素时，您的单击事件都会冒泡，`gallerymake()` **因此** `gallerytake()`被调用。有关事件的说明，请参阅[此页面](http://www.quirksmode.org/js/events_order.html)。

为了防止这种使用`e.stopPropagation()`。[请参阅此小提琴以获取工作示例](http://jsfiddle.net/Wu6tV/)。

# java - 在列表视图中添加单个开关

> ID：13752690
> 
> 赞同：0
> 
> 时间：2012-12-06T21:14:30.133
> 
> 标签：java, android, listview, switch-statement, android-arrayadapter

我需要在我的 ListView 中添加一个开关（Android 4.0+），只是一个带有 ImageView Button 的开关，我已经看过很多教程，教在列表活动中添加多个视图，但我需要的只是一个选项有这个开关的列表。我知道我是否可以放一个按钮或 textView 我可以放一个开关在那里，但我不明白如何放一个按钮或任何视图而不在所有选项上重复整个相同的场景，至于我，我是ArrayAdapters 和 ListViews 的新手，但我需要学习这两个，以便以后可以使用它们！我需要的是这样的，例如：

```
______________________
Image  |  Switch 
______________________
Normal option
______________________
Button | Whatever view
_______________________
Normal option
_______________________
Checkable Option
_______________________ 
```

等等......所以如果你清楚，我想完全控制那里的每一个选项，这就是我需要和想要的。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:27:55.223

如果你打算通过listview来做，那么你可以通过明确`getView`适配器方法中的每个位置来做到这一点。这是一个例子：

```
public View getView(int position, View convertView, ViewGroup parent) {
        switch (position) {
        case 0:         
            // do image switch option
            // convertView = layout 0
            break;
        case 3:
            // do button whatever option
            // convertView = layout 3
            break;
        case 5:
            // do button whatever option
            // convertView = layout 5
            break;
        default:
            // do normal option
            // convertView = layout 1
            break;
        }
        return convertView;
    } 
```

* * *

`getView`是许多 android 适配器中返回视图的方法。当连接到 a`listView`时，它将被识别为为其每一行返回一个视图的方法。您看到的列表视图中的每一行都是该方法的一个执行实例的产物。您不会调用它：每当列表视图的行需要出现时，或者当行位置移出屏幕并返回时，或者当列表视图被刷新时，它都会自动调用，一般来说，只要列表视图行必须“制作” ”。您可以覆盖它，以便您可以自定义所需的特定外观。

`convertView`也是一种观点。**它是在 listview 适配器中运行的称为view-recycling**的并发机制的产物。想象一下，您有一个需要为游戏的购物菜单显示 1000 行的列表视图。一种传统的方法是，您只需为您的 in`getView`制作一个充满活力的 xml 的膨胀命令，然后编辑组件以显示项目差异。*所以*，这膨胀了 1000 倍（并且膨胀是一个昂贵的步骤，请注意），再加上所有必须在内存中并且只会阻塞垃圾收集器的东西。另外，如果您需要刷新某些内容以显示更改怎么办？你出去！现在有四核手机，但有更好的方法。

正确完成的列表视图实际上并不会一次产生 1000 个视图，而是一次只能在屏幕上显示 7 或 8 个视图。当列表视图的行*视图*滚动到手机屏幕的边界之外时，它还没有被抛出。这个并发机制运行，这个视图被保存并保存在标题下，`convertView`并作为下一次`getView`调用的参数传入。不（重新）使用它是一种可怕的浪费，因为基本上你有一个看起来像下一个 getView 调用中的下一行的视图，也许只有 textview 中的文本发生了变化或类似的东西，但你会无论如何都要进行另一次昂贵的通货膨胀。然后未使用的 convertView 知道它的第二次机会已被忽略，进入 GC，并且一切照旧。

上面的代码没有使用`convertView`，因为坦率地说，它没有在问题中被问到，但是使用起来非常简单。

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        // inflation step
        // convertView = inflation
    }

    // rest of code involving components of inflated view
    return convertView;
} 
```

首先，您检查那里是否没有任何东西，您可以想象这是第一次启动列表视图时，没有任何东西有机会被扔掉。然后才进行通货膨胀。下一次，getView 将满嘴都是用过的视图并将其插入（如果它被退回）。这是对您的列表视图性能最有利的操作，您可以立即执行此操作。

**但是**你应该知道这一点，这个网站上大约有一半的问题标记为 android 仅在这个问题上，不能保证 convertView 会在你想要的位置扑通一声，如果你向上滚动，就在下面，如果滚动，就在上面向下。只要确保你清楚地知道在什么位置上发生了什么，你就会没事的。有关此和其他 listview 专有技术的更多信息，请观看：[http](http://www.youtube.com/watch?v=wDBM6wVEO70) ://www.youtube.com/watch?v=wDBM6wVEO70 。

# jquery - 排列父 Div 以首先向左显示子 Div

> ID：13752692
> 
> 赞同：0
> 
> 时间：2012-12-06T21:14:32.310
> 
> 标签：jquery, position

我有一个 10000 像素的 DIV。在这个 DIV 中，我有各种 500px DIV，如下所示：

```
<div class="huge-div">
   <div class="some-div">
   <div class="some-div">
   <div class="new-div">
   <div class="new-div">
   <div class="new-div">
</div> 
```

我需要找到第一个具有“new-div”类的 DIV 并重新定位“huge-div”，以便它在浏览器/视图的左侧显示第一个“new-div”。

到目前为止，我可以找到第一个 DIV，将其添加一个新类（以更改其颜色），但不知道如何告诉它基于“new-div”将“huge-div”排列到左侧首次亮相。

```
$('.new-div').first().addClass('great').---line-up "huge-div" to the left---(); 
```

//

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:27:42.410

像这样？ [http://jsfiddle.net/8WYpW/1/](http://jsfiddle.net/8WYpW/1/)

添加一个包装器：

```
<div class="huge-div">
    <div class="wrapper">
       <div class="some-div">test</div>
       <div class="some-div">test</div>
       <div class="some-div great">great</div>
       <div class="some-div">test</div>
       <div class="some-div">test</div>
    </div>
</div> 
```

然后基于负边距定位：

```
$(function() {
    setTimeout(function() {        
        $('.huge-div').animate({marginLeft: -$('.great').offset().left});
    }, 1000);
}); 
```

## **编辑**

直接去那里使用 css 而不是动画：

```
$('.huge-div').css({marginLeft: -$('.great').offset().left}); 
```

# php - 打开和关闭 PHP 是否被认为是不好的做法？

> ID：13752698
> 
> 赞同：1
> 
> 时间：2012-12-06T21:14:48.310
> 
> 标签：php, javascript

我目前正在寻找一种插入`JavaScript`到我的 php 代码中的方法，但是，我不能在回声中做到这一点。我正在考虑使用以下解决方法：

```
<?php
   some code
?>

<script type="text/javascript>
   js things
</script>

<?php
   more code
?> 
```

但是，我有点担心打开和关闭`<?php`零件。这被认为是不好的做法，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T21:18:30.273

尽管我会警告您在混合不同的脚本类型时要节俭，但这在编程中是非常正常且可以接受的。如果您能找到解决方法，我会建议您这样做，但这比尝试从 PHP 回显 Javascript 要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T21:20:09.337

> 打开和关闭 PHP 是否被认为是不好的做法？

**不。**

当您开始时，您进入了*不良做法*的灰色区域：

*   `echo`通过,`print`等输出 HTML 的长时间运行的 PHP 块。
*   使用短的开放标签。
*   不要在结束标记前使用分号。

I encourage you to read about [php tags](http://php.net/manual/en/language.basic-syntax.phptags.php) and [instruction separation](http://php.net/manual/en/language.basic-syntax.instruction-separation.php).

In reference to JavaScript *bad practice* though, you may wish to separate your *behavior* from your *content* by using external JavaSCript (also more performant). [Read more.](https://stackoverflow.com/questions/138884/when-should-i-use-inline-vs-external-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:18:58.470

不，这不是坏习惯。您应该考虑到您的文档基本上是 HTML。所以 PHP 几乎“注入”了更多的东西。如果您没有关闭 PHP 而是使用它来输出相同的内容，那么您将做完全相同的事情，但会以更复杂的方式和更密集的处理器方式进行，因为 PHP 标记内的所有内容都必须进行解析。相反，这些标签之外的东西是纯HTML，不被解析，而是直接发送。所以这不是坏习惯。这是个好习惯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:18:54.107

不，这不对。尽管我更喜欢在顶部保留尽可能多的代码，以提高脚本的可读性和维护性。

莱昂

# iphone - 使用身份验证窗口创建 TabBarController 应用程序

> ID：13752701
> 
> 赞同：1
> 
> 时间：2012-12-06T21:14:53.387
> 
> 标签：iphone, objective-c, authentication, uitabbarcontroller

我是 Objective-C 编码的新手，因此我的问题是，

我正在编写一个首先需要登录到服务器的应用程序，如果成功，那么它应该显示带有多个选项卡的 TabBarController。

我想听听您对以下设计的评论：

我将情节提要与一个 TabBarController 一起使用，并与不同的选项卡（5 个选项卡）进行切换。对于身份验证窗口，我创建了一个 TableViewController，它*没有*通过 segue 连接到任何东西。

当应用程序在 MyAppDelegate 中启动时，我检查我的 KeyChain 是否包含凭据。如果是，那么我将 RootViewController 设置为 TabBarController，否则 - 我将 RootViewController 设置为 TableViewController，并在那里显示一个文本字段以允许用户输入凭据。

然后我将凭据保存到钥匙串并将 RootViewController 设置为 TabBarController 以打开不同的选项卡。

而已。

你怎么看待这件事？？是好还是有更好的方法来处理这种情况？

非常感谢您耐心阅读本文:-)

# unit-testing - QUnit 只运行第一个测试

> ID：13752715
> 
> 赞同：28
> 
> 时间：2012-12-06T21:16:02.733
> 
> 标签：unit-testing, qunit

在第一次之后，我无法让 QUnit 运行任何测试。为了确保我没有做一些奇怪的事情，我将代码缩减为尽可能基本。

```
test("A", function () {
    ok(true, "Test A");
});
test("B", function () {
    ok(true, "Test B");
}); 
```

测试 A 是唯一运行的。没有抛出错误或其他任何东西。

我的 HTML 文件看起来像这样。

```
<!DOCTYPE html>
<html>
<head>
   <title>Test title</title>
   <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.10.0.css">
</head>
<body>
   <div id="qunit"></div>
   <script src="http://code.jquery.com/qunit/qunit-1.10.0.js"></script>
   <script src="tests.js" type="text/javascript"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-06T22:01:57.840

发现了问题。就是这个！

`qunit.html?testNumber=1`

我想在某个时候我击中了`rerun`它，它忽略了其他测试！

另一个问题值得称赞，因为它为我指明了正确的方向。[QUnit 不会运行测试](https://stackoverflow.com/questions/13040167/qunit-wont-run-tests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T18:33:09.260

与 Mims H. Wright 的回答非常相似。

我还在失败的测试中点击“重新运行”，并将 testId 附加到我的 url，我没有注意到。

```
tests.html?testId=fb134038 
```

# imagemagick - 如何使用 Imagemagick 确定 GIF 的帧率？

> ID：13752717
> 
> 赞同：3
> 
> 时间：2012-12-06T21:16:08.920
> 
> 标签：imagemagick, gif, frame-rate

我正在使用 Imagemagick 将 gif 转换为相应的 jpg 系列，并且我试图确定每个 jpg 何时出现在一个系列中。

从[如何检测动画 GIF 每秒的滴答声？](https://stackoverflow.com/questions/3588658/how-do-i-detect-an-animated-gifs-ticks-per-second)：`identify -format "%T ticks: %f: Frame[%s] %m %wx%h %P%O %r %z-bit\n" tree.gif`

```
4 ticks:  tree.gif: Frame[0]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit
4 ticks:  tree.gif: Frame[1]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit
4 ticks:  tree.gif: Frame[2]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit
4 ticks:  tree.gif: Frame[3]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit
4 ticks:  tree.gif: Frame[4]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit
4 ticks:  tree.gif: Frame[5]  GIF 247x175 247x175+0+0 PseudoClassRGBMatte 8-bit 
```

并`identify tree.gif`给我

```
tree.gif[0] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.000
tree.gif[1] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.000
tree.gif[2] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.000
tree.gif[3] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.000
tree.gif[4] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.010
tree.gif[5] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.010
tree.gif[6] GIF 247x175 247x175+0+0 8-bit PseudoClass 256c 1.923MB 0.000u 0:00.010
... 
```

任何人都可以翻译这个输出，告诉我帧速率或每帧何时出现？如果您可以使用 RMagick 使其工作，则可以加分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T20:22:06.207

有并发症。首先，您需要使用`%T`and`%s`转义来查看帧号和延迟（以**厘秒**为单位），而不是 vanilla`identify`命令。其次，从一帧到下一帧的延迟各不相同，因此您需要准备好应对动画 GIF 从头到尾没有统一的“帧率”的情况。

这是一个示例命令：`identify -format "Frame %s: %Tcs\n" A.gif`

欲了解更多信息：

1.  [http://imagemagick.org/Usage/anim_basics/](http://imagemagick.org/Usage/anim_basics/)
2.  [http://imagemagick.org/script/escape.php](http://imagemagick.org/script/escape.php)

# java - 为什么移动我在 java 1.6se 中使用仿射变换的位置

> ID：13752718
> 
> 赞同：0
> 
> 时间：2012-12-06T21:16:10.843
> 
> 标签：java, affinetransform

我想缩放形状。

所以我在仿射变换中使用 setToScale 方法。

然后，不仅形状的长度是反式的，而且形状的起点也会移动

为什么？

```
public void initResize(int x, int y) {
    oldX = x;
    oldY = y;
}

public void resize(int x, int y) {
    double xratio = (double)(x - shape.getBounds().x) / (shape.getBounds().width);
    double yratio = (double)(y - shape.getBounds().y) / (shape.getBounds().height);

    af.setToScale(xratio, 1);
    shape = af.createTransformedShape(shape);
    anchor.resize(shape.getBounds());

    oldX = x;
    oldY = y;
} 
```

方法调用的顺序是 MousePress : initResize, MouseDrgged : resize

x,y 是鼠标坐标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:33:43.297

您必须对 AffineTransform 对象应用操作。在您的情况下，您想要扩展：

```
af.scale(xratio, 1); 
```

这个想法是将当前矩阵与表示比例的矩阵相乘。这就是组合变换的工作原理：通过矩阵相乘（注意！乘法的顺序很重要，矩阵相乘时 A*B != B*A 也很重要）。

这不是清除整个矩阵并在矩阵的默认线性比例模板之后插入比例值。

# database - Facebook 内容整理和非西方编码字符

> ID：13752719
> 
> 赞同：1
> 
> 时间：2012-12-06T21:16:11.940
> 
> 标签：database, internationalization, collation, complex-data-types

如果用户将一串阿拉伯语文本写入 facebook 评论并保存，那么数据存储的排序规则类型是什么？

我不相信他们使用 mysql 表来发表评论，但我刚刚使用 localhost mysql 表弄乱了这个主题，我在其中以二进制字符存储了一些阿拉伯语。

它将文本转换为一些可能转义的字符序列。但是一旦你保存了它，它就会保持这种状态。

如果您考虑 i18n，即使我将 facebook 设置为英文，输入其他非西方编码字符仍然可以正确保存和显示。

对他们如何实现这一目标有任何见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:37:12.457

第一的; 我不确定，但我不相信 MySQL 会为此发挥作用。

正确的做法是将其以 UTF-8 格式存储在*<some-system>*中。[我猜这也可能是 MySQL。]我不知道具体细节，但我确实相信 MySQL（以及 PHP 就这点而言**）并没有真正达到 UTF-8/Unicode 支持的水平，因此它们可能会出现一些“故障”。例如，您需要`set names=utf8`在打开连接后首先执行“”或一些疯狂的东西才能使 utf8 工作（这可能是您的测试不起作用的原因）。另外，我记得 MySQL 不支持 4 字节编码的 UTF-8 字符，最多只能支持 3 个字符。不知道目前是否属实，但我隐约记得一些关于它的事情。*[编辑]*应该[在 5.5+](http://forums.mysql.com/read.php?103,359419,359592#msg-359592)中修复 我不~~. [编辑] 他们应该需要[2 或 3 个字节](https://stackoverflow.com/a/4322296/215042)。~~

 ~~当我们遇到故障时：关于 PHP，我记得 strlen()[返回字节而不是实际字符](http://php.net/manual/en/function.strlen.php#109652)等内容。如果我没记错的话，它有一些 mb_XXX 函数（多字节字符串）应该更好地处理 UTF-8。*[编辑]*事实证明[确实如此](http://php.net/manual/en/ref.mbstring.php)。

我完全看不出 i18n 和将 facebook 设置为英语（或斯瓦希里语）会如何影响这一点。它只是界面中使用的语言（可能/可能影响日期时间格式等），与用户生成的内容无关。

哦，差点忘记了[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有借口！）-](http://www.joelonsoftware.com/articles/Unicode.html) link

** 之所以提到它，是因为它通常与 MySQL 密切相关。~~

# java - 替换大括号内的所有内容？

> ID：13752720
> 
> 赞同：1
> 
> 时间：2012-12-06T21:16:14.450
> 
> 标签：java, regex, replaceall

最后，我需要一个正则表达式，它基本上将我的电话号码转换为 E164 符合号码。至于现在我得到了这个：

```
result = s.replaceAll("[(*)|+| ]", ""); 
```

它可以很好地替换所有内容：空格、“+”符号以及大括号“()”。但它与大括号的内容不匹配，因此例如数字`+49 (0)11 111 11 11`将被替换为`49111111111`。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:20:45.670

你可以这样做，但是如果括号之间的不仅仅是一个零怎么办？

```
result = s.replaceAll("\\([^()]*\\)|[*+ ]+", ""); 
```

作为一个冗长的正则表达式：

```
result = s.replaceAll(
    "(?x)     # Allow comments in the regex.                     \n" +
    "\\(      # Either match a (                                 \n" +
    "[^()]*   # then any number of characters except parentheses \n" +
    "\\)      # then a ).                                        \n" +
    "|        # Or                                               \n" +
    "[*+\\ ]+ # Match one or more asterisks, pluses or spaces", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:22:31.147

```
[(*)|+| ] 
```

是一个字符类，匹配任何单个括号、星号、条形、加号或空格字符。摆脱方括号并使用类似的东西

```
s.replaceAll("\\(.*?\\)|\\D", ""); 
```

这将删除（包括）括号之间的任何内容，以及任何其他不是数字的内容。请注意，这不会很好地处理嵌套括号 - 它会吃掉从左括号到找到的第一个右括号的所有内容，因此会`(123(45)67)`变成`67`（不平衡的右括号被删除，因为它是 a `\D`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:23:23.240

[我认为您对角色类](http://www.regular-expressions.info/charclass.html)的魔力期望过高。首先，在字符类中，不要使用`|`. 它只是字符类将匹配的另一个字符。只需列出您想要包含的所有字符，而无需任何分隔符。

其次，字符类实际上只匹配单个字符。因此`(*)`，根据定义，在字符类内部只能做 remove `(`， or `*`（字面意思） or `)`。如果您 100% 确定您的输入永远不会有嵌套括号或不匹配的括号或其他内容，那么您可以执行以下操作：

```
"(?:\\([^)]\\)|\\D)+" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:26:44.730

你可以试试这个：`"(\\(\\d+\\))|\\+|\\s"`。删除括号和内容、加号和空格。

# c# - 从整数中获取第七位

> ID：13752726
> 
> 赞同：7
> 
> 时间：2012-12-06T21:16:28.343
> 
> 标签：c#, .net, algorithm, math

我有一个 10 位数的整数。我需要得到该整数的第 7 位。

我找到了一个数学解决方案来获得整数的第一位。

```
var myDigit = 2345346792;

var firstDigit = Math.Abs(myDigit);
while (firstDigit >= 10)
{
     firstDigit /= 10;
} 
```

如何从 myDigit 中获取第七位数字？我试图避免转换为字符串并执行子字符串。我想看看获得第七位数的数学版本。

任何人？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T21:21:55.980

```
var seventh_digit = ( myDigit/1000000 ) % 10; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T21:20:50.613

```
int getSeventhDigit(int number)
{
    while(number >= 10000000)
        number /= 10;

    return number % 10;
} 
```

这将采用 7 位或更少位数的最后一位数字。

对于 8 位或更多位的数字，它会除以 10，直到数字长到 7 位，然后取最后一位。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-06T22:28:27.137

没有 while 循环的数学解：

```
int myDigit = 2345346792;

var seventh = (myDigit / 1000000) % 10;

//result should be 5, your seventh digit from the right 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-09T00:16:11.907

更一般地，您可以从数字创建一个（从零开始的）数组：

```
uint myDigit = 2345346792;

int[] digits = new int[10];
for (int i = 9; i >= 0; i--)
{
    digits[i] = (int)(myDigit % 10);
    myDigit /= 10;
} 
```

这对于您希望进行的任何操作都应该很有用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-01T15:19:11.820

```
var nthDigit = (int)((number / Math.Pow(10, nth - 1)) % 10); 
```

`nth`数字的第 n 位数在哪里。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-06T21:27:33.497

假设“第零位”是最低有效位，您应该这样做：

```
 public static int nthDigit( int value , int n )
    {
        if ( n < 0 ) throw new ArgumentException();
        if ( value < 0 ) throw new ArgumentException() ;

        while ( n-- > 0 )
        {
            value /= 10 ;
        }

        int digit = value % 10 ;
        return digit ;
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-06T21:21:09.163

像这样的东西（C代码，但应该很容易移植）：

```
if (n < 1000000)
  return 0;        // no 7th digit
while (n > 9999999)
  n /= 10;         // now in the range [1,000,000..9,999,999]
return n % 10; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-30T21:50:16.107

这可能看起来已经过时了，但我想从一串数字中获取特定的数字，而这些解决方案中的大多数（以及我发现的其他解决方案）都缺乏。所以...我决定了一个解决方法并将数字转换为字符串，然后提取字符串的字符，将它们转换回 int。我知道这不是很有效，但是对于小型项目，我并不关心效率。

对于我的任务，我专门使用电话号码，所以这是我的代码：

```
long number = 5559876543;
string s = "" + number;

int areaCode = int.Parse(s.Substring(0, 3));
int prefix = int.Parse(s.Substring(3, 3));
int suffix = int.Parse(s.Substring(6, 4)); 
```

我希望这可以帮助任何寻找类似解决方案的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-13T23:03:31.060

```
public static int GetNthDigit(this int value, int digits)
{
    double mult = Math.Pow(10.0, digits);

    if (value >= mult)
    {
        while(value >= mult)
            value /= 10;

        return value % 10;
    }

    else
    {
        throw new ArgumentOutOfRangeException("Digits greater than value");
    }
} 
```

# asp.net - 如何在 asp.net 中使用 Google Drive 进行身份验证而不复制/粘贴身份验证令牌

> ID：13752727
> 
> 赞同：1
> 
> 时间：2012-12-06T21:16:30.177
> 
> 标签：asp.net, authorization, oauth-2.0

我正在尝试在我的 ASP 程序中获取 Google Drive 的授权代码。我从 Google API for .NET 示例中编写了一些代码，例如快速启动程序：

```
private static IAuthorizationState GetAuthorization(NativeApplicationClient arg){
    // Get the auth URL:
    IAuthorizationState state = new AuthorizationState(
         new[] {DriveService.Scopes.Drive.GetStringValue() });
    state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
    Uri authUri = arg.RequestUserAuthorization(state);

    //Request authorization from the user (by opening a browser window):
    Process.Start(authUri.ToString());
    Console.Write("  Authorization Code: ");
    string authCode = Console.ReadLine();
    Console.WriteLine();

    // Retrieve the access token by using the authorization code:
    return arg.ProcessUserAuthorization(authCode, state);
} 
```

我想通过打开一个弹出窗口来获取授权码，用户可以在此访问权限，在用户访问权限后，这将返回代码。

# asp.net - System.Drawing 命名空间不能在 Web 服务中使用

> ID：13752731
> 
> 赞同：0
> 
> 时间：2012-12-06T21:16:43.100
> 
> 标签：asp.net, web-services, system.drawing

我已经将 ac# 控制台应用程序放在一起，该应用程序运行一个旨在下载简单 pdf 文档的 Web 服务。我可以返回该对象，但是我似乎无法弄清楚如何将 pdf 对象保存到文件中。

```
ServiceName.ImageResponse responseObject = Response.GetDocument(12345);
MemoryStream ms = new MemoryStream(responseObject.Document);
//System.Drawing is the problem (namespace can't be used in a Web Service)
System.Drawing.Image Img = System.Drawing.Image.FromStream(ms);
Img.Save("c:\\saved.JPG"); 
```

这不是编译，因为我收到（System.Drawing 下的红色 squiqly 行和）以下错误：

*错误 1 ​​命名空间“系统”中不存在类型或命名空间名称“绘图”（您是否缺少程序集引用？）*

[http://msdn.microsoft.com/en-us/library/system.drawing.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)声明如下：

*注意事项注意事项 System.Drawing 命名空间中的类不支持在 Windows 或 ASP.NET 服务中使用。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。*

我只是想知道是否有其他方法。我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:46:31.280

投石机可能是正确的。检查以确保您确实完成了添加对所需 dll 的引用的工作。命名空间与 .dll 文件没有一对一的对应关系，这是值得的。

至于这个：

> 不支持在 Windows 或 ASP.NET 服务中使用 System.Drawing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。

我不确定，但我的猜测是 System.Drawing 命名空间中的几个组件期望进程可以访问[窗口站](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687096%28v=vs.85%29.aspx)、桌面等，这是您会看到运行时异常的地方. 我会赌一把，看看它是否有效（一旦你修复了编译错误）。他们在这里真正想说的是“如果这坏了不要打电话给我们”:)

# ruby-on-rails - 为什么我的模型有效？它不应该

> ID：13752732
> 
> 赞同：0
> 
> 时间：2012-12-06T21:16:48.267
> 
> 标签：ruby-on-rails, ruby, rspec

我尝试练习使用 Rspec 进行一些测试，但我有一个奇怪的行为。当我尝试让无效模型遵循红/绿/重构周期时，Rspec 看不到任何错误。

我想确保发布日期不能提前。

我的模型

```
class Release < ActiveRecord::Base
  belongs_to :game
  belongs_to :platform
  attr_accessible :date

  validates :date, presence: true
end 
```

我的规格文件

```
require 'spec_helper'

describe Release do
  before {@release = Release.new(date: Time.new(2001,2,3))}

  it{should respond_to :date}
  it{should respond_to :game}
  it{should respond_to :platform}

  describe "when date is not present" do
    before {@release.date = nil}
    it {should_not be_valid}
  end

  describe "when date is anterior" do
    before {@release.date = Time.now.prev_month}    
    it {should_not be_valid}
  end

end 
```

我的输出

```
.....

Finished in 0.04037 seconds
5 examples, 0 failures 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:28:01.277

当您编写时，`it { should_not be_valid }`您似乎认为接收者是`@release`（rspec 怎么知道？），但默认情况下，隐式对象是`describe`d 类的实例：

[https://www.relishapp.com/rspec/rspec-core/docs/subject/implicit-receiver](https://www.relishapp.com/rspec/rspec-core/docs/subject/implicit-receiver)

用于`subject { some_object }`明确的主题或`it { @release.should_not be_valid }`.

更多关于这个：

[http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:21:12.453

尝试：

```
it { @release.should_not be_valid} 
```

反而。

# wpf - 通过 xaml 中的数据绑定基于对象类型动态加载不同的 UserControl

> ID：13752733
> 
> 赞同：4
> 
> 时间：2012-12-06T21:16:54.117
> 
> 标签：wpf, xaml, data-binding

WPF 中是否有某种方式可以获得与`DataTemplateSelector`您相同的功能，但对于 UserControls？

假设我有一个 StackView，我想将一个 IEnumerable 对象绑定到该 StackView。我想做的是以某种方式有一个映射，对于绑定的 IEnumerable 中的每个对象类型，查看对象类型并确定要添加到 StackView 的 UserControl。

因此，给定三个类：

```
public class House : Building{}

public class Apartment : Building{}

public class Tent : Building{} 
```

每个类都继承自`Building`并定义了自己的类`UserControl`，我想设置`DataContext`为 an`IEnumerable<Building>`并以某种方式让 StackView 使用特定于类型的 UserControl 填充其子集。

我想用尽可能少的代码来做到这一点。数据绑定和 XAML 管道磁带越多越好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T21:47:11.950

您可以在 ; 中使用复杂的用户控件`DataTemplate`。只需声明`DataTemplate`为您的`UserControl`.

例子：

```
 <Window x:Class="WpfApplication4.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication4"
            Title="MainWindow" Height="300" Width="300" Name="UI" >
        <Window.Resources>
            <DataTemplate DataType="{x:Type local:House}" >
                <local:HouseUserControl DataContext="{Binding}"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type local:Apartment}">
                 <local:ApartmentUserControl DataContext="{Binding}"/>
            </DataTemplate>
        </Window.Resources>

        <Grid>
            <ListBox ItemsSource="{Binding ElementName=UI, Path=ListOfBuildings}" />
        </Grid>
    </Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:28:30.233

我不确定我是否看到了问题。只需在某处为资源中的每种类型创建 DataTemplates，WPF 就会自动使用它们来呈现每种类型。

# solr - 如何在空间搜索和常规查询之间结合执行 Solr OR 查询？

> ID：13752735
> 
> 赞同：1
> 
> 时间：2012-12-06T21:17:05.900
> 
> 标签：solr, geocoding, geospatial

Solr [SpatialSearch](http://wiki.apache.org/solr/SpatialSearch)文档提示您可以将空间函数`geodist()`与常规查询结合起来，但我无法确定这样做的正确语法。

特别是这条线（[在 geodist 部分](http://wiki.apache.org/solr/SpatialSearch#geodist_-_The_distance_function)）引起了我的注意：

> 或者您可以使用距离函数作为主要查询（**或它的一部分**）来获取作为文档分数的距离：
> 
> ...&q={!func}geodist()&sfield=store&pt=45.15,-93.85&sort=score asc

按照该页面上的商店库存示例，我想做的是“找到给定城市内或城市给定距离内的所有商店”。我可以很容易地分别完成两者，但很难将它们结合起来。

这是一个伪查询，有望阐明我正在尝试做的事情：

```
...&q=storecity:Buffalo OR {!func}geodist(store,45.15,-93.8)&d=5 
```

预期结果将是布法罗的每家商店，或布法罗 5 公里范围内的商店。该用例适用于非常大的城市，例如洛杉矶。如果我说洛杉矶 5 公里内的所有商店，它只会找到坐标 5 公里内的商店，所以寻找带有 a 的商店`storecity:"Los Angeles"`将包括丢失的结果。

对于奖励积分，我也很好奇我将如何得分以确保城市内的商店排名高于外面的商店 - 但这是次要的，可能我能弄清楚:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:15:35.757

您可以使用以下查询来获得预期的结果。

> ..&q=storecity:Buffalo OR _query_: "{!geofilt sfield=location pt=45.15,-93.8 d=5}"

# joomla - Joomla 2.5 JHtml::_('前端和 ie7 中的滑块

> ID：13752740
> 
> 赞同：0
> 
> 时间：2012-12-06T21:17:28.850
> 
> 标签：joomla, internet-explorer-7, slider

在这个问题上打破了我的头脑：

我正在使用 Joomla！2.5.8 和 Virtuemart 2.0.14，我正在加载 Joomla 内部幻灯片效果

`<?php echo JHtml::_('sliders.start', 'my-slider', array('useCookie'=>'0', 'startOffset'=>-1));`

进入前端。

它可以正常工作 - 除了在 IE7 中（我不再关心 IE6）。嗯，在 joomla-backend 中使用了相同的代码，并且它在 ie7 中工作。

链接查看：[http ://shop.restaurants-schoengruen.ch/weine.html](http://shop.restaurants-schoengruen.ch/weine.html)

可以在此处找到幻灯片，直接在添加到购物车按钮上方（在 den Warenkorb 中）：Detailinformationen zum Produkt

`jquery`顺便说一句：用（google-apis）尝试过；滑块工作得很好，但 vm-facebox 中的 add-to-cart-message 不再起作用。

我希望有人能给我一些帮助；为什么 joomla jhtml-slider 不能在前端的 ie7 上工作。

# openoffice.org - 如何检测并杀死楔入的 soffice.bin 进程？

> ID：13752742
> 
> 赞同：2
> 
> 时间：2012-12-06T21:17:32.327
> 
> 标签：openoffice.org, libreoffice

我正在使用 libreoffice/openoffice 作为无头进程来处理我通过 unoconv “提交”的服务器上的一些文档转换任务。有时，实际完成工作的进程 soffice.bin 似乎被卡住了。我尝试使用 strace 并看到在启动新的 unoconv 实例时，它们仍然连接并与 soffice 进程对话，只是在“坏”文档进入后没有其他任何事情发生。如果它只是检测到那个 soffice不再与传入的套接字对话，编写看门狗很容易。但这显然不是那么简单。任何想法如何判断事情何时向南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:59:43.317

这是我设置为 cron 作业的内容：

```
def monitor_unoconv
  retval = false
  target_dir = "/tmp/monitor_unoconv"
  begin
    Timeout::timeout(30) do
      FileUtils.mkdir_p(target_dir)
      FileUtils.cp(File.dirname(__FILE__) + "/../hello.odt", target_dir)
      Dir.chdir target_dir do
        retval = system("unoconv -f html hello.odt")
      end
    end
  rescue => e
    STDERR.puts "Caught error #{e.inspect}"
    retval = false
  end
  if !retval
    STDERR.puts "soffice process appears hung.  Killing it"
    STDERR.puts `killall soffice.bin`
    sleep 5
    STDERR.puts `killall -9 soffice.bin`
  end
end 
```

似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T06:14:31.540

问题可能与 soffice 多线程有关，因此解决技巧可能如下：

1.  使用 unoconv 作为服务。
2.  创建一个 init.d 脚本并作为守护进程启动。
3.  因此，unoconv 不会调用 soffice 来启动，而是 unoconv 作为服务将继续运行并维护它。
4.  创建启动进程文件如下：

# !/bin/sh

案例“$1”在

    开始）

        /usr/bin/unoconv --listener &

        ;;

    停止）

        killall soffice.bin

        ;;

    重新开始）

        killall soffice.bin

        睡觉 1

        /usr/bin/unoconv --listener &

        ;;

经社理事会

# linux - 以编程方式检查 Linux 时钟

> ID：13752748
> 
> 赞同：0
> 
> 时间：2012-12-06T21:17:42.873
> 
> 标签：linux

我在 JVM/Linux 上有一个生产系统，它依赖于`System.nanoTime`和`System.currentTimeMillis`. 我之前遇到过 NTP 完全搞砸了转换的情况，因此时钟的运行速度比实时快得多或慢得多（并且转换会影响上述两种 Java 方法）。

我怎样才能最好地监控它`nanoTime`并`currentTimeMillis`以接近正确的速度运行？我想定期测量这些方法中的增量，并将它们与同一时期的“已知”增量进行比较。什么是“已知”增量的可靠来源？C/C++ 解决方案很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:28:45.507

可靠的时间来源，尤其是在 VM 上，必须在机器外部。我假设您无法使用专门的硬件（如原子钟或 GPS 接收器），因此您的下一个最佳选择是 NTP。找到您附近的 NTP 服务器，通过系统时钟获取“之前”时间，通过 NTP 获取时间，然后读取时钟“之后”。将“之前”和“之后”的平均值与 NTP 值之间的差异进行比较。您不应该期望差异为零（您的网络延迟可能在两个方向上都不相同，等等）。随着时间的推移监控差异。我预计变化会降低趋势，但如果您看到趋势增加（或减少）并有任何程度的信心，那么您可能有一个混乱的时钟。

# facebook - Facebook 2 个不同的应用程序同一个域名

> ID：13752749
> 
> 赞同：0
> 
> 时间：2012-12-06T21:17:43.837
> 
> 标签：facebook, facebook-graph-api

该选项在每个应用程序的基本配置菜单上称为“应用程序域”。

我可以为 2 个不同的 Facebook 应用程序使用相同的域名 (example.com) 吗？

是否允许？我会有什么问题吗？

更多信息：我在两个应用程序上都使用 Facebook 登录方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:20:51.550

**是的你可以。**

购买通配符 SSL 证书`*.yourCoolDomain.com`（

```
app1.yourCoolDomain.com
app2.yourCoolDomain.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:07:01.343

最新的重大更改似乎存在一个 facebook 错误：

[“必须使用活动访问令牌”（2012 年 12 月）&& 为 Ajax 调用设置 Facebook 的 PHP-SDK 以获取用户 ID 的正确方法](https://stackoverflow.com/questions/13635991/an-active-access-token-must-be-used-dec-2012-the-proper-way-to-set-up-fac)

# javascript - JavaScript 在方法中使用构造函数参数，哪种方式有效？

> ID：13752752
> 
> 赞同：2
> 
> 时间：2012-12-06T21:17:59.637
> 
> 标签：javascript

我有这样的js对象：

```
var Dog = function(dogName) {
  this.bark = function() {
    console.log(dogName + " is barking");
  }
} 
```

和

```
var Dog = function(dogName) {
  this.dogName = dogName;
  this.bark = function() {
    console.log(this.dogName + " is barking");
  }
} 
```

我可以同时使用这两种方法：

```
var puppy = new Dog("Ringo");
puppy.bark(); 
```

我的问题是这两种方法之间有什么实际区别吗？将构造函数参数分配给更好`this.<field>`，还是我可以直接使用这些参数，因为它们可以被内部函数访问？两者都有什么特殊情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:19:52.253

最大的区别是参数`dogName`的功能范围是您声明的内联 - 它在功能上是私有的。此外，如果您通过实例（如小狗）更改值，它不会更改函数输出。

例如，如果我这样做：

`Dog.prototype.bark2 = function() { console.log(dogName); }`

这将失败，因为它超出了范围。但是添加它可以`this`让我访问，所以我可以做到`console.log(this.dogName)`。再说一次，这实际上是关于范围以及您希望如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:20:15.297

不同的是当你说

```
var puppy = new Dog("Ringo");
puppy.dogName = "George";
puppy.bark(); 
```

在第一种方法中，它仍将使用名称“Ringo”，而在第二种方法中，它将显示“George”。出于同样的原因，如果你试图说

```
var puppy = new Dog("Ringo");
console.log("created new puppy: " + puppy.dogName); 
```

这将适用于第二个版本，但不适用于第一个版本。因此，如果您的目标是`dogName`有效地将其设为私有，以便在初始化后无法访问或更改它，您应该采用第一种方法，否则始终采用第二种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:20:22.923

在第一个版本中，`dogName`是私有的 - 无法检查对象并找到该变量的值。调用可以推断`bark`，但不能直接看到；只有在该`function`表达式中声明的代码才能看到它。

在第二个版本中，`dogName`公开可见为`object.dogName`.

# c++ - 无法在 C++ 中定义结构数组

> ID：13752760
> 
> 赞同：0
> 
> 时间：2012-12-06T21:18:38.933
> 
> 标签：c++, arrays, structure

`ball`我以这种方式定义了结构：

```
struct ball
{
 _vector coordinates;
 _vector velocity;
 _vector acceleration;

 int border;
 int color;
 int radius;

 float mass;

 void step();
 void clear();
 void render();
}; 
```

（数据类型`_vector`之前定义过，它代表数学中的向量）

在 main 函数中，我想定义一个`ball`s 数组，所以我编写了以下代码：

```
int main(int argc, char** argv)
{
    struct ball balls[NO_BALLS];
.
.
.
} 
```

但是当我想编译代码时，我得到了这个错误：

> 没有匹配函数调用 `ball::ball()' 候选函数是：ball::ball(const ball&)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T21:20:52.860

如果您定义了复制构造函数`ball::ball(const ball&)`（您实际上已在代码中注释掉），则不会有编译器生成默认的默认构造函数。您的数组定义需要有一个默认构造函数才能工作（因为它默认初始化每个元素）。所以只需提供一个默认构造函数：`ball:ball() { }`. 您可能希望在此构造函数中初始化您的成员变量。

# objective-c - 对象在dealloc后没有释放

> ID：13752769
> 
> 赞同：0
> 
> 时间：2012-12-06T21:19:22.463
> 
> 标签：objective-c, ios, memory

Heapshots 显示对象没有被释放，同时日志显示 dealloc 被调用。我确实释放了所有属性并删除了 dealloc 中的所有超级视图。那么为什么内存仍然没有释放呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:20:37.353

您是否（假设您没有使用 ARC）在您的 dealloc 方法结束时调用 [super dealloc] ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:20:51.347

如果`dealloc`被调用，但是支持对象的内存没有被释放，有两种可能：

1.  你没有`[super dealloc]`在你的末尾调用`-dealloc`（仅适用于非 ARC 代码）
2.  您启用了僵尸。这可以通过 Instruments 中的复选框（在 ObjectAlloc 工具的配置中）或通过 Scheme 编辑器中的 Diagnostics 选项卡来完成。

# asp.net - ASP.NET 列表框样式 - 删除边框并添加底纹

> ID：13752770
> 
> 赞同：2
> 
> 时间：2012-12-06T21:19:23.937
> 
> 标签：asp.net, css, listbox, styling

所以我有一段时间做一些我认为应该如此简单的事情。

我有一个`<asp:ListBox />`要设置样式的元素，因为我认为默认值看起来很可怕，尤其是边框。

但似乎很少有属性在 CSS 中生效，最明显的是无法删除边框。

需要注意的是，我需要它在 IE8 和 IE7 中工作，而不仅仅是其他更现代的浏览器。

[这个示例站点](http://obout.com/ListBox/aspnet_live_styles.aspx)有漂亮的列表框元素，但我无法接近它们。

有什么想法吗？

继承人的HTML：

```
<asp:ListBox ID="ListBox1" runat="server" SelectionMode="Multiple" AutoPostBack="true"
    onselectedindexchanged="ListBox1_SelectedIndexChanged" CssClass="myListBox" >
    <asp:ListItem>ITEM 1</asp:ListItem>  
    <asp:ListItem>ITEM 2</asp:ListItem>  
    <asp:ListItem>ITEM 3</asp:ListItem>  
    <asp:ListItem>ITEM 4</asp:ListItem>  
</asp:ListBox> 
```

和CSS：

```
.myListBox
{
    border-style:none;
    border-width:0px;
    border: none;
    font-size:12pt;
    font-family:Verdana;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:55:23.163

您的 CSS 类中有错字

```
CssClass="myListbox" 
```

应该

```
CssClass="myListBox" 
```

然后您可以在实际选项上应用样式，即

```
.myListBox option {
    background-color: #FFFF00;
    color: #FF0000;
} 
```

尽管这在所有浏览器中都不会起作用。因此，您需要根据自己的需要进行调整，或者采取完全不同的方法，例如 3rd 方插件（查看 jquery ui 选项）或像 Peri 所说的那样构建自己的。

一种选择可能是[jQuery UI](http://www.quasipartikel.at/multiselect/) Multiselect ，您应该可以使用[Themeroller 对其](http://jqueryui.com/themeroller/)进行样式设置。

尽管您可能只想尝试自定义自己/不同的方法以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:24:26.027

示例站点没有使用列表框，它们只是使用 html 的无序列表。您可能无法实现他们使用 ASP.NET ListBox 控件所做的事情。您必须创建自己的控件并使其呈现您想要的方式。

# c++ - 使用条件语句在运行时选择不同的模板化矩阵类

> ID：13752773
> 
> 赞同：0
> 
> 时间：2012-12-06T21:19:36.930
> 
> 标签：c++, templates, pointers, eigen

我正在使用 Eigen 线性代数库（[链接](http://eigen.tuxfamily.org/dox/TutorialMatrixClass.html)）中的模板化 Matrix 类。Matrix 类采用三个名义模板参数：

```
Matrix<type, rows, cols> 
```

在上面，`type`是`double`或的一个例子`std::complex<double>`。此外，`rows`是行`cols`数， 是 Matrix 中的列数。

如下面的代码所示，我想做的是在运行时使用条件语句使用不同的模板化 Matrix 类。

想到的第一个解决方案可能是使用 void 指针。

```
#include <iostream>
#include <Eigen/Dense>
#include <complex>

using namespace Eigen;

int main()

{  
    // this flag is set at run-time, but it is only set here
    // in the code as an example
    int create_complex = 1;
    void *M;

        if(create_complex)
    {
        Matrix<std::complex<double>,3,3> m0;
        M = &m0;
    }
    else
    {
        Matrix<double,3,3> m0;
        M = &m0;
    }
    // de-reference pointer here and use it    

 return 0;
} 
```

尽管此代码可以编译，但`void *M`需要在使用前显式取消引用该指针。这很不方便，因为我必须为相同的程序逻辑编写不同的代码块。

我想知道这里是否可以应用类似于多态性的东西，我不必使用 void 指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:22:40.423

> 这很不方便

如果您将“不方便”读为“非法”，那么您就对了。

局部变量在其作用域结束时被销毁（即关闭`}`），因此您只剩下一个悬空指针。因此，当您尝试取消引用它时，您会遇到未定义的行为。

没有简单的方法可以做到这一点，因为`Matrix<std::complex<double>,3,3>`和`Matrix<double,3,3>`是完全不相关的类。我再说一遍。**它们是完全不相关的类**。

另一种方法是`Matrix`具有基本类型并且您有一个指向该类型的指针，但是您需要动态分配。就像是：

```
BaseMatrix* m;
if ()
    m = new Matrix<std::complex<double>,3,3>;
else 
    m = new Matrix<double,3,3>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:24:28.927

您可以根据矩阵类型将自己的函数编写为模板，并在条件句中调用不同版本的函数。

这是唯一的方法，因为模板用于在*编译*时生成代码。您*必须*在编译时生成所有代码路径，然后选择其中之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:26:22.413

您也应该模板化您的方法：

```
template<class T>
my_main() { 

   Matrix<T,3,3> m0;

   // ...

} 
```

**更新**

或者你可以定义你的类

```
#ifndef CREATE_COMPLEX
    typedef double MyClass;
#else
    typedef std::complex<double> MyClass;
#endif

main() { 

   Matrix<MyClass,3,3> m0;

   // ...

} 
```

您可以使用预处理器定义切换这些定义。

# java - 在只知道一半值的情况下查找数组的索引

> ID：13752777
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:19:45.717
> 
> 标签：java, arrays

```
sender.sendMessage("Your referal code is: " + codestring[ArrayUtils.indexOf(namestring, value )]); 
```

该值等于“名称”加上一个随机数，我如何在不知道该字符串数组的第二部分的情况下使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:21:50.800

遍历数组并检查`startsWith()`

```
for(int index = 0 ; index < array.length ; index ++){
  if(array[index].startsWith(key)){return index;}
}
return -1; // not found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:25:14.830

我不明白你问什么，但如果你试图找到一个字符串，只知道第一个字符，你可以使用正则表达式来检查，比如：

```
for(String string: arrayOfStrings){
     if(string.matches("beginningOfString^[1-9]")){
        // your code
     }
} 
```

# django - django 媒体目录的权限

> ID：13752778
> 
> 赞同：1
> 
> 时间：2012-12-06T21:19:49.383
> 
> 标签：django, macos

这可能是服务器故障的问题，但由于它涉及 django 应用程序，因此如下：

我有一个 django 应用程序，它允许通过文件上传字段将文件上传到媒体目录。

```
def content_file_name(instance, filename):
    return '/'.join([ instance.client, instance.job_number, instance.post_type + "_" + instance.post_round, instance.job_number + "-" + instance.cell_number, filename])

class PostEntry(models.Model):
        ...
        add_pdf = models.NullBooleanField()
        link_pdf = models.FileField(upload_to=content_file_name, blank=True, null=True)
        add_html = models.NullBooleanField()
        link_html = models.FileField(upload_to=content_file_name, blank=True, null=True)
        add_zip = models.NullBooleanField()
        link_zip = models.FileField(upload_to=content_file_name, blank=True, null=True)
        ... 
```

我还通过 ftp 将媒体目录提供给其他用户。尽管我已将媒体目录的权限设置为允许对其中的所有文件和子目录进行读取、写入和递归执行，但在我设置权限后，它仍然不允许对 django 创建的任何子目录进行 ftp 操作。也就是说，如果我通过 ftp 客户端访问我新创建的子目录（在我的媒体目录中），默认情况下，我没有权限将文件拖入或从所述目录中删除文件。

在设置中，我将 FILE_UPLOAD_PERMISSIONS 选项设置为 0644。正如我所料，它没有任何区别。有没有办法设置 django 以便它创建可以写入应用程序外部的目录？还是必须在操作系统级别设置此行为？

# knockout.js - 手动订阅的 beforeChange 具有奇怪的行为

> ID：13752779
> 
> 赞同：2
> 
> 时间：2012-12-06T21:19:50.210
> 
> 标签：knockout.js, coffeescript, ko.observablearray

在我的视图模型中有一个文件列表、文件类型和未使用的文件类型：

```
viewModel =
  files: ko.observableArray([
        new File({name: "A1", id: 1})
        new File({name: "B1", id: 2})
        new File({name: "C1", id: 3})
        new File({name: "D1", id: 4})
    ])
  types:  ko.observableArray(dataTypes)
  typesUnused: ko.observableArray(dataTypes) 
```

我创建了一个`File`类，并在其中创建了一个`type`属性。要填写未使用的文件类型列表，请订阅 beforeChange 和其他 afterChange`type`属性

```
class File
  constructor: (data) ->
    @name = data.name
    @id = data.id
    @type = ko.observable(null)

    # Updates array of types not used
    @type.subscribe ((oldValue) ->
      console.log "OLD: #{oldValue}"
      viewModel.typesUnused.remove (item) -> item is oldValue if oldValue
    ), @, "beforeChange"
    @type.subscribe (newValue) ->        
      console.log "NEW: #{newValue}"
      if newValue && viewModel.typesUnused.indexOf(newValue) < 0 
        viewModel.typesUnused.push newValue 
```

**想法**
想法是每当您更改文件类型时，都会在更改发生之前触发一个事件，并将旧类型添加到未使用的文件类型列表中。更改后将发生另一个事件，该事件将从未使用的类型列表中删除新类型。

**问题**

1.  所有文件都带有定义的文件类型数组中的第一种类型。在这种情况下，“jpeg”
2.  通过更改文件类型，所有其他人都会遭受更改！
3.  当您从列表中删除文件类型时`typesUnused`，`types`列表也可能会更改！

见：http: [//jsfiddle.net/4nyVE/2/](http://jsfiddle.net/4nyVE/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:12:34.607

您的问题是您的`types`和`typesUnused`使用相同的数组初始化`dataTypes`。当项目从中删除时也会`typesUnused`影响`types`，因为它们包含对同一数组的引用。

此时，其他选择中当前选择的选项不再有效（不再在 中`types`），因此将值设置为第一选择。

您最好的选择可能是`typesUnused`使用原始数组的副本进行初始化（这`myarray.slice(0)`是一种简单的复制方法），例如：

```
typesUnused: ko.observableArray(dataTypes.slice(0)) 
```

# ios - initWithNibName 帮助：尝试传递数据时返回空白屏幕

> ID：13752789
> 
> 赞同：0
> 
> 时间：2012-12-06T21:20:34.920
> 
> 标签：ios, xcode, view, nib

好的，所以我试图通过 AppDelegate 将字符串从一个视图控制器传递到另一个视图控制器。发生这种情况时，我想保持当前视图。

这是我目前用来执行此操作的代码的主体：

```
AppDelegate *dataCenter = (AppDelegate *)[[UIApplication sharedApplication] delegate];
MyMealViewController *vc = [[MyMealViewController alloc] initWithNibName:nil bundle:nil];

dataCenter.selectedMenuItem = recipeLabel.text;

[self presentViewController:vc animated:YES completion:NULL]; 
```

当我运行程序时，我能够确认字符串是否正确传递。但是，模拟器上的视图只是变黑。我认为这是因为 initWithNibName 设置为 nil。

所以我的问题是：我应该如何更改我的代码以使字符串仍然可以传递，但当前视图将继续显示在 iphone 上。有没有我可以编写的代码行来重新加载当前视图？

感谢您对这个问题的帮助。我是 xcode 的新手，所以我可能会犯一个非常基本的错误。请让我知道是否有任何其他信息有助于回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:33:45.823

**编辑：**看起来您想在第一个视图中显示食品列表。点击一个项目会打开一个详细视图。从该详细视图中，用户可以按下按钮将其添加到餐点中。最后，他们可以点击第一个视图上的按钮来打开餐点视图，其中应该包含他们选择的所有项目。

如果是这种情况，请在第一个视图控制器上保留一个数组，并确保细节（第二个）视图控制器在呈现时具有对第一个视图控制器的引用。这将让我们使用该数组。请注意，有更好的方法来构建它，但现在可以使用：

```
@interface FoodListViewController : UIViewController
@property (strong, nonatomic) NSMutableArray *foodItems
@end

@implementation FoodListViewController
- (void)showFoodItem
{
    FoodItemDetailViewController *detailViewController = [[FoodItemDetailViewController alloc] initWithNibName:nil bundle:nil];
    detailViewController.foodListController = self;
    [self presentModalViewController:detailViewController animated:YES];
}
@end 
```

显示详细视图后，点击“添加到餐点”按钮应将当前的“餐点项目”添加到数组中。在您的示例中，您使用的是字符串 - 如果您出于某种原因希望保留一个字符串数组，我将把它留给您。

```
@interface FoodItemDetailViewController : UIViewController
@property (nonatomic, weak) FoodItemsViewController *foodListController;
@end

@implementation FoodItemDetailViewController

- (IBAction)buttonTapped:(id)sender
{
    [self.foodListController.foodItems addObject:self.mealItem];
    // Update the UI to let the user know that the item was added to the meal
}

@end 
```

最后，当需要展示 MealDetailsViewController 时，只需将您正在构建的数组传递给它：

```
@interface MealDetailsViewController : UIViewController
@property (nonatomic, strong) NSArray *foodItems;
@end

@implementation MealDetailsViewController
    // Set foodItems before this view controller is presented, then use it to drive the
    // UITableView data source, or find some other way of displaying it.
@end 
```

如您所见，第二个和第三个视图控制器都由第一个呈现。视图控制器（几乎）总是形成一个层次结构——因此将数据保持在该层次结构的顶部（通过将其存储在 FoodListViewController 中）可以让您在呈现其他视图控制器时巧妙地将其传递到层次结构中。

# mysql - 使用 GUID/UUID 键优化 Innodb 表索引

> ID：13752799
> 
> 赞同：3
> 
> 时间：2012-12-06T21:20:51.677
> 
> 标签：mysql, indexing, innodb, clustered-index

我有一个基于 InnoDB 的模式，大约有 100 个表，大多数使用 GUID/UUID 作为主键。我是在我并不真正了解 UUID PK 对磁盘 IO 和碎片的影响的时候开始的，但我希望在处理服务器集群时避免使用单个密钥分配器的好处。我们目前没有处理大量的行，但我们会（数亿），我想为此做好准备。

现在我更好地理解了 InnoDB 中的索引，特别是主键的集群性质，我可以看到我的 UUID 从 DISK IO 角度来看是可伸缩性的糟糕选择，但我不想因为服务器而停止使用它们聚类要求。

接受/推荐的解决方案似乎是 Autoincrement PK (INT|BIGINT) 与唯一索引 UUID 键的混合。我的意图是为`ai_col`每个表添加一个新的第一列并将其分配为新的 PK，我正在从以下位置排队：

[http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)

然后，我将在我的 UUID 键上更新/重新创建一个新的“唯一”索引，并继续在我们的应用程序层中使用它们。

我的期望是，一旦完成，我基本上可以忽略`ai_col`和其他一切照常运行。InnoDB 将有一个相对较小的基于 int 的 PK，用于集群并附加到其他唯一索引。

**问题 1：**我是否正确假设在这个新场景中，我也可以吃蛋糕并吃掉它？

后续问题是关于较小的“关联”表，即只有两列，都是其他表的外键隐式连接它们。在这些情况下，我通常有两个索引，一个是唯一的两列索引，首先使用更频繁的列，然后是另一列上的第二个单索引。我知道这基本上是实际行数据的 2.5 倍，但它似乎确实有助于优化期间我们更复杂的查询，并且在较小的表上相对可接受。

这些关联表中的大多数将只是主表中记录数的一小部分，因为它们通常更具体，但是，在少数情况下，这些关联表的记录数是其外国父表的数倍，即可能数十亿.

**问题 2：**将数字 PK 也添加到这些表中是否是个好主意？我猜答案将类似于“Benchtest it”，但我只是在寻找有用的智慧块。

如果我显然误解了任何内容，或者您​​可以提供我可能没有考虑的见解，我也会非常感激！

非常感谢！

* * *

**编辑：**正如答案中所承诺的，我只是想跟进任何感兴趣的人......这个解决方案非常有效:) 读写性能全面提高，到目前为止，它已经测试了大约 60 亿个 i/o /月，不费吹灰之力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:00:03.037

在没有任何其他建议、确认或其他方式的情况下，我已经开始在我们的开发服务器上使用一些较少使用的表进行测试，但如果新的基于 AI 的 id 会影响我们的应用程序层，这些表也会受到影响。

到目前为止看起来不错，索引按预期执行，新表字段不需要对我们的应用程序层进行任何更改，我们基本上可以忽略它们。

我还没有进行任何彻底的台架测试来测试重负载下的实际磁盘 IO，但是从关于该主题的大量信息来看，我可以推测我们处于扩大规模的良好状态。

一旦这已经到位一段时间，我会跟进跟进，以防有人和我们在同一条船上。

# xml - SSED 删除多行 XML 代码

> ID：13752801
> 
> 赞同：2
> 
> 时间：2012-12-06T21:20:51.300
> 
> 标签：xml, scripting, batch-file, batch-processing, multiline

我正在尝试使用 SSED 从 XML 文件中删除多行。我可以删除 XML 文件中的某些单行，但我需要能够删除多行。

例如：

```
<tagnumberone>
   <tagInside>This must not be deleted</tagInside>
</tagnumberone>
<tagnumberone>
   <tagInside>This must be deleted</tagInside>
</tagnumberone>
<tagnumberone>
   <tagInside>This must not be deleted</tagInside>
</tagnumberone> 
```

那么这意味着我需要能够删除代码行 This must be deleted> 然后它也是外标记，以便我得到以下结果：

```
<tagnumberone>
   <tagInside>This must not be deleted</tagInside>
</tagnumberone>
<tagnumberone>
   <tagInside>This must not be deleted</tagInside>
</tagnumberone> 
```

我正在尝试使用以下 Super Sed 突击队： `ssed s:\<tagnumberone\>\<tagInside\>This must be deleted\<\/tagInside\>\<\/tagnumberone\>:: <file.xml >out.xmle`

这给了我以下错误：未终止的's'命令。

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:24:40.183

您可能忘记了“必须删除”中的空格。您是否尝试引用 ssed 参数？

```
ssed "s:\<tagnumberone\>\<tagInside\>This must be deleted\<\/tagInside\>\<\/tagnumberone\>::" <file.xml >out.xmle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:36:07.380

我找到了解决方案。实际上，我不知道它为什么起作用，但它仍然起作用。如果现在有人可以向我解释以下代码，那就太棒了：

```
ssed /<tagnumberone>/!b;N;N;/<tagnumberone>\s*\n\s*<tagInside>This must be deleted<\/tagInside>\s*\n\s*<\/tagnumberone>/d <oldFile >newFile 
```

谢谢！

# android - Android 上的多个同时 HTTP 请求

> ID：13752803
> 
> 赞同：0
> 
> 时间：2012-12-06T21:20:52.140
> 
> 标签：android, executorservice, apache-httpclient-4.x, executor, threadpoolexecutor

所以，我在 AsyncTask 中有下面的代码，并且想要调用 7 个不同的异步 HTTP 请求。一切正常，所有 7 个 execute() 方法同时启动（花几毫秒，这很棒）。

不幸的是，这种方法所花费的时间是大约。16 秒。如果我排除所有执行程序的内容并在原始工作程序 Asynctask 上调用 HTTP 下载方法，则需要 aprox。9 秒。因此，实际上按顺序而不是并发花费的时间更少。任何想法为什么会发生这种情况？也许服务器端的东西？也许是因为执行程序是在 Asynctask 上启动的？非常感谢 ！

```
 MyExecutor executor = new MyExecutor(7, 7, 40000, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>());
            executor.execute(new Runnable()
            {
                @Override
                public void run()
                {
                    try {downloadSplashScreenJsonData();}
                    catch (Exception e)
                    {
                        Log.e(TAG, "Could not download splashscreen data.");
                        e.printStackTrace();
                    }
                }
            });
            // after another 6 executor.execute() calls,
            executor.shutdown();
            executor.awaitTermination(40000, TimeUnit.MILLISECONDS); 

    class MyExecutor extends ThreadPoolExecutor
    {

    public MyExecutor(int corePoolSize, int maximumPoolSize,
            long keepAliveTime, TimeUnit unit,
            BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
        prestartAllCoreThreads();
        // TODO Auto-generated constructor stub

    }

    @Override
    public void execute(Runnable command) {
        super.execute(command);
        Log.e(TAG, "execute()");
        Log.e(TAG, "no of thr: " + getActiveCount());

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T15:36:10.783

当我回顾这件事时，我想补充一些信息。

首先，应用程序所需的用例非常迟钝且繁琐（但是，客户，您能做什么……）。所以就像 Joe 上面所说的那样，我现在不会在一百万年内下载 Asyncs 上的数据。如果可能的话，应该使用某种服务来下载所需的数据。

其次，我最终使用了 RoboSpice 库（它还提供缓存）而不是 Asyncs。它仍然不如在 Service 上运行，但它比准系统版本优化得更好。可能想检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:36:47.037

不知道，但我观察到：

1.  什么是restartAllCoreThreads，为什么要在构造函数中调用它？不要在需要线程之前启动线程（LinkedBlockingQueue<> 会节省空间）。
2.  你真的需要在 AsyncTask 中运行它吗？Threadpool 中的线程不在 UI 线程上运行，而在 UI 线程之外运行是 AsyncTask 的主要优势。如果您真的想在后台执行所有这些操作，请使用 IntentService。

# google-apps-script - 如何在电子表格的一列中的所有单元格上设置和保留验证规则

> ID：13752804
> 
> 赞同：0
> 
> 时间：2012-12-06T21:20:55.823
> 
> 标签：google-apps-script, google-docs, google-sheets

有没有办法在电子表格行中的每个单元格上设置和保留验证规则，即使用户插入或附加新行也是如此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:57:35.420

即使我有同样的问题，但最后找到了一个解决方案，这可能是您的问题的选择->为此，我使用了基于 onEdit 事件的脚本，如果发现超过所需的列，则每次检查总行数然后复制with 格式应用于工作表中的所有行和列。这样可以确保所有行都具有格式。

如果没有其他选择，你可以试试这个。祝你好运。

# html - 如何在 ASP.NET 页面上的 4 个点之间画线并填充？

> ID：13752806
> 
> 赞同：1
> 
> 时间：2012-12-06T21:21:08.043
> 
> 标签：html, gps, system.drawing

使用 GPS，我会知道很多土地的 4 个角的纬度/经度（我想它可能是 5 或 6 个多边形——尽管通常是矩形或平行四边形）。使用 DIV 标记（使用 runat=server），我可以标记 ASP.NET 页面上的点，从数据库中提取数据点。

但是，有没有一种方法可以让我基本上把它们变成形状？例如，我正在尝试在网页上绘制一个细分的平台。最终，我希望数据出现在鼠标悬停上，未售出的平台有不同的颜色，点击平台并导航到某个地方，等等）。

但现在，我只是想看看是否可以在页面上绘制形状。

非常感谢您的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:45:50.567

If you can count on your users having a modern browser, html5 `<canvas>` is probably what you want. You can just put a canvas on your page with
`<canvas id="myCanvas" width="200" height="100"></canvas>`

Then draw to it in javascript like so:

```
var c=document.getElementById("myCanvas");  
var ctx=c.getContext("2d");  
ctx.fillStyle = '#f00';    
ctx.beginPath();    
ctx.moveTo(0, 0);  
ctx.lineTo(0, 100);  
ctx.lineTo(50, 100);  
ctx.lineTo(50, 0);  
ctx.closePath();  
ctx.fill(); 
```

Adjust or add corners as needed.

# procmail - 如何将 Procmail 与 PHP 一起使用？

> ID：13752809
> 
> 赞同：0
> 
> 时间：2012-12-06T21:21:22.253
> 
> 标签：procmail

我正在尝试使用 procmail 将电子邮件发送到 PHP 脚本，因此该脚本将检查 MySQL 数据库并根据发件人电子邮件编辑主题行。我相信我有一个有效的 procmail 可以做到这一点：

```
:0:
* ^To:.*@barrett.com
! '/usr/local/bin/php-5.2 -f $HOME/ticket/emailcustcheck.php' 
```

但是，我不确定 procmail 是如何执行命令的。电子邮件如何传递给 PHP 脚本，因此，我如何在脚本中引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:26:45.110

管道到脚本的正确语法是

```
:0   # no lock file
* ^To:.*@barrett\.com
| /usr/local/bin/php-5.2 -f $HOME/ticket/emailcustcheck.php  # no quotes, use pipe 
```

该`!`操作将尝试转发到电子邮件地址，但当然，带有 PHP 解释器路径的长引号字符串不是有效的电子邮件地址。

如果你需要加锁（即不允许这个PHP脚本的两个实例同时运行），你需要命名一个锁文件；Procmail 无法在此处推断锁定文件名，因此您所做的锁定操作无论如何只会产生错误消息。如果您不确定，添加命名锁定文件是更安全的选择，但如果您没有并发问题（例如，脚本需要写入数据库而没有其他进程正在使用数据库），则不需要，并且可能会减慢处理速度。

条件正则表达式看起来也有些不精确，但我只能推测您可能希望在`Cc`mail 和 direct上触发`To:`。如果是这样，请在文档中查找`^TO_`宏。

脚本将消息作为其标准输入；它可能应该将所有输入行读取到一个数组中，或者拆分为两个数组，以便第一个空行之前的所有内容都进入“headers”数组，其余的进入“body”数组。或者也许 PHP 有一些类可以将电子邮件消息从标准输入读取到对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:24:06.483

```
:0 wf
* ^To:.*@barrett\.com
| /usr/local/bin/php-5.2 -f $HOME/ticket/emailcustcheck.php 
```

**f**告诉 procmail 您将过滤消息，即更改它。**w** 等待过滤器或程序完成并检查其退出代码。

如果您只想处理邮件正文，则必须添加标志**b** 如果您只想处理邮件标题，则必须添加标志**h**

# ruby - Rails 更改默认时区

> ID：13752810
> 
> 赞同：0
> 
> 时间：2012-12-06T21:21:26.390
> 
> 标签：ruby, ruby-on-rails-3, datetime, timezone, datetimeoffset

我正在尝试将 Rails 3.2.8 应用程序中的默认时区更改为 GMT+04:00，但我不知道该怎么做。以下解决方案对我不起作用：

```
config.time_zone = 'Moscow'
config.time_zone = "(GMT+04:00) Moscow"
config.active_record.default_timezone = 'Moscow'
config.active_record.default_timezone = :local 
```

我也在rails控制台中尝试了以下内容：

```
 ActiveSupport::TimeZone.all.map(&:name) 
```

它返回一个值列表，包括`"Moscow"`. `Time.zone`返回`(GMT+00:00) UTC`哪个不正确，应该是`(GMT+04:00) UTC`。然后我更改`Time.zone = "Moscow"`并`Time.now`返回了正确的值（... +0400）。

所以要修复它我只是使用了`Time.now + 4.hour`，但我还需要 datetime_select 来显示我的当地时间。`Time.now + 4.hour`不是正确的解决方案。

如何将默认时区设置为其本地值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:21:26.390

突然间，我已经定位了问题所在。我运行 Win7 并且我的 WEBrick 服务器显示正确的时间，但项目本身显示错误的时间。同时，我的生产服务器工作正常，所以很明显，问题出在操作系统上。 **UPD**：问题已解决。我应该在更改 application.rb 文件后重新启动 WEBrick 服务器。

# algorithm - 评估嵌套逻辑表达式的算法

> ID：13752813
> 
> 赞同：5
> 
> 时间：2012-12-06T21:21:30.383
> 
> 标签：algorithm, tree, conjunctive-normal-form, logical-tree

我有一个想要评估的逻辑表达式。表达式可以嵌套，由 T (True) 或 F (False) 和括号组成。括号“（”表示“逻辑或”。两个术语 TF 并排（或任何其他两个并排的组合）应为 ANDED（逻辑与）。

例如，表达式：

```
((TFT)T) = true 
```

我需要一个算法来解决这个问题。我想首先将表达式转换为析取或合取范式，然后我可以轻松地评估表达式。但是，我找不到使表达式标准化的算法。有什么建议么？谢谢你。

问题陈述可以在这里找到： [https ://icpcarchive.ecs.baylor.edu/index.php?option=com_onlinejudge&Itemid=2&category=378&page=show_problem&problem=2967](https://icpcarchive.ecs.baylor.edu/index.php?option=com_onlinejudge&Itemid=2&category=378&page=show_problem&problem=2967)

**编辑：**我误解了部分问题。在给定的逻辑表达式中，AND/OR 运算符与每个括号“(”交替出现。如果我们要用树来表示表达式，那么 AND/OR 运算符取决于子树的深度级别。但是，它是最初考虑到最深层次的树是与树。我的任务是可能通过构建树来评估给定的表达式。感谢下面的答案澄清了问题的正确要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:34:35.970

从左到右扫描字符串。每次看到左括号时，向堆栈结构添加一个新条目。当您看到右括号时，弹出堆栈中最顶部的条目，将其评估为 T 或 F，再次弹出堆栈，并将计算值附加到弹出的项。继续直到字符串的末尾，此时您将获得一个由 T 和 F 组成的字符串，并对其进行评估。

要计算一串 Ts 和 Fs，如果都是 T，则返回 T，否则返回 F。所以我们有...

```
evaluate(String expression)
 1\. subexpr = ""
 2\. for i := 1 to n do
 3\.     if expression[i] == "(" then
 4\.         stack.push(subexpr)
 5\.         subexpr = ""
 6\.     else if expression[i] == ")" then
 7\.         result = evaluateSimple(subexpr)
 8\.         subexpr = stack.pop() + result
 9\.     else subexpr += expression[i]
10\. return evaluate2(subexpr)

evaluate2(String expression)
 1\. for i := 1 to n do
 2\.     if expression[i] == "F" then return "F"
 3\. return "T" 
```

或者类似的事情应该这样做（编辑：事实上，即使被问到，这也不能正确回答问题；请参阅评论。别管这个了，因为它仍然可以让一个人朝着正确的方向前进）。请注意，您可以只有一个函数评估，它执行评估 2 所做的工作，但在第一个循环之后，并且仅限于 subexpr。这避免了通过不必要的副本，但你有更少的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:11:24.753

在查看了[原始问题](https://icpcarchive.ecs.baylor.edu/index.php?option=com_onlinejudge&Itemid=2&category=378&page=show_problem&problem=2967)之后，我认为您误解了它。

这个问题是关于一`AND/OR`棵树，其中**最深**层次的节点是`AND`节点。其他节点的逻辑操作员是由这个因素决定的——我们最初不知道它们是不是`AND`节点`OR`，我们只知道最深层次的节点是`AND`节点——所以下一个更高层次的节点是`OR`节点，下一个更高级别是`AND`节点，依此类推……逻辑操作符在树的不同深度之间**交换。**如果您查看`AND/OR`他们提供的示例树，这将变得很清楚。

我解决这个问题的方法是首先找出根节点的逻辑连接词。这可以通过对表达式进行一次扫描并跟踪括号的数量来完成。请注意，每个都`()`对应于树中的一个新节点（树的下一级）。例如，考虑以下表达式：

```
((F(TF))(TF)) 
```

当你走过这个表达式时，首先我们遇到 3 个左括号，2 个右括号，1 个左括号，最后是 2 个右括号。如果您在此步行期间的任何给定时间获取打开的最大括号数，它将是这`AND/OR`棵树的最大深度（`3`在上面的示例中）。

那么这是什么意思？如果树的深度是奇数，则根节点是一个`AND`节点，否则根是一个`OR`节点（因为连接词是交替的）。

一旦你知道了根节点的连接词，你就可以使用一个简单的基于堆栈的机器来评估这个表达式。我们需要记住，每次打开或关闭括号时，都需要翻转连接词。以下是上述表达式的求值方式：

```
AND |- (•(F(TF))(TF)) 
```

请注意，项目符号表示我们在表达式中的位置（如堆栈顶部）。然后我们继续如下：

```
OR  |- ((•F(TF))(TF))   // flipped the connective because we jumped a node
OR  |- ((F•(TF))(TF))   // nothing to evaluate on the current node, push F
AND |- ((F(•TF))(TF))
AND |- ((F(T•F))(TF))
AND |- ((F(TF•))(TF))
AND |- ((F(F•))(TF))    // Two booleans on top, T AND F = F (reduce)
OR  |- ((F(F)•)(TF))    // Jumped out of a node, flip the sign
OR  |- ((FF•)(TF))      // Completely evaluated node on top, (F) = F (reduce)
OR  |- ((F•)(TF))       // Two booleans on top, F OR F = F (reduce)
AND |- ((F)•(TF)) 
AND |- (F•(TF))
OR  |- (F(•TF))
OR  |- (F(T•F))
OR  |- (F(TF•))
OR  |- (F(T•))
AND |- (F(T)•)
AND |- (FT•)
AND |- (F•) 
```

所以你得到的最终答案是`F`。[这与shift-reduce 解析](http://en.wikipedia.org/wiki/Shift-reduce_parser)有一定关系，但这种情况下的减少取决于我们正在操作的 AST 的当前深度。我希望你能够将这个想法转化为代码（你需要一个堆栈和一个全局变量来跟踪当前有效的逻辑操作）。

最后，感谢您介绍该网站。您可能还喜欢[这个网站](http://acm.timus.ru/problemset.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:38:57.063

通过阅读您链接到的站点上的问题描述，我认为您可能误解了该问题。您是否需要“逻辑与”或“逻辑或”这些术语取决于您从根节点向下的层数。

您可以通过将表达式解析为语法树来轻松解决此问题，然后递归地遍历树，评估每个子表达式，直到您回到根节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T20:05:15.027

我使用与提到的不同的技术解决了这个问题。我得到了在线系统评委的接受。

在找出树的第一级的运算符之后（感谢@Asiri Rathnayake 的想法），我递归地构造表达式树。在构建过程中，我扫描字符串。如果字符是'('，那么我用当前的运算符值创建一个节点并将它添加到树中。然后，我交替运算符并进行更深的递归级别。如果字符是'T'，那么我创建一个值为“True”的节点，将其添加到树中并继续扫描。如果字符为“F”，那么我创建一个值为“False”的节点，将其添加到树中并继续扫描。最后，如果字符是')'，然后我返回到递归的上一级。

最后，我将完成表达式树。现在，我需要做的就是使用基本递归函数对树进行简单的评估。

下面是我的 C++ 代码：

```
#include<iostream>
#include<string>
#include<vector>
#include<algorithm>

using namespace std;

struct Node {

    char value;
    vector<Node*> children;
};

void ConstructTree (int &index, string X, Node *&node, int op)
{

    for(; index<X.size(); index++)
    {
        if(X[index]=='T')
        {
            Node *C= new Node;
            C->value='T';
            node->children.push_back(C);
        }

        else if(X[index]=='F')
        {
            Node* C= new Node;
            C->value='F';
            node->children.push_back(C);
        }

        else if(X[index]=='(')
        {
            if(op==0)
            {
                Node* C= new Node;
                C->value='O';
                node->children.push_back(C);
            }

            else
            {
                Node* C= new Node;
                C->value='A';
                node->children.push_back(C);
            }

            index++;
            ConstructTree(index,X,node->children[node->children.size()-1],1-op);
        }

        else
            return;
    }

}

bool evaluateTree(Node* node)
{
    if(node->value=='T')
        return true;
    else if(node->value=='F')
        return false;
    else if(node->value=='O')
    {
        for(int i=0; i<node->children.size(); i++)
            if(evaluateTree(node->children[i])==true)
                return true;

        return false;
    }

    else if(node->value=='A')
    {

        for(int i=0; i<node->children.size(); i++)
            if(evaluateTree(node->children[i])==false)
                return false;

        return true;
    }
}

int main()
{
    string X;
    int testCase=1;

    while(cin>>X)
    {
        if(X=="()")
            break;

        int index=0;

        int op=-1;

        int P=0;

        int max=0;
        for(int i=0; i<X.size(); i++)
        {
            if(X[i]=='(')
                P++;
            if(X[i]==')')
                P--;

            if(P>max)
                max=P;
        }

        if(max%2==0)
            op=0; //OR
        else
            op=1; //AND

        Node* root = new Node;

        if(op==0)
        root->value='O';
        else
        root->value='A';

        index++;
        ConstructTree(index,X,root,1-op);

        if(evaluateTree(root))
            cout<<testCase<<". true"<<endl;
        else
            cout<<testCase<<". false"<<endl;

        testCase++;
    }
} 
```

# django - 在 Django 中显示所有相关对象的内联表单

> ID：13752814
> 
> 赞同：3
> 
> 时间：2012-12-06T21:21:39.583
> 
> 标签：django, django-forms

我正在尝试创建一个灵活的应用程序来管理调查。我想要的是一个 显示与调查相关的所有问题、选项和后续问题的**视图。**我有以下型号：

```
class Survey(models.Model):
   title = models.CharField(max_length=300)

class Question(models.Model):
   question_text = models.CharField(max_length=300)
   belongs_to_survey = models.ForeignKey('Survey', related_name='questions') 
   follow_up_to_answer = models.ForeignKey('Question', null=True, related_name='follow_up_questions')

class Option(models.Model):
   answer_text = models.CharField(max_length=200)
   belongs_to_question = models.ForeignKey('Question', related_name='options') 
```

我研究了 inlineformset_factory，但这只允许“一级嵌套”。我所拥有的理论上是“无限的”

```
Survey -> Questions -> Options -> Follow-up-Questions -> Options --\
                                             ^\____________________/ 
```

难道我做错了什么？据我所见，这个问题应该很常见，但是 stackoverflow 和其他地方的问题数量表明并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:35:00.127

使用`inlineformset_factory`两次：

1.  显示`Question`实例`Survey`
2.  显示`Option`每个实例`Question`

`option_formset`然后，在模板中以实例的方式显示表单，在每个`form`.`question_formset`

# objective-c - 如何清除 NSFetchedResultsController？

> ID：13752815
> 
> 赞同：6
> 
> 时间：2012-12-06T21:21:40.200
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller

如果我执行带有返回对象的 NSFetchedResultsController 的提取，然后想要清除控制器，即 .fetchedObjects 是一个空数组，是否有可以调用的方法或者我必须执行另一个不返回的提取任何结果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T09:49:54.847

您可以将 fetched results 控制器的 fetch 请求设置为不返回任何内容：

```
self.fetchedResultsController.fetchRequest.predicate = 
   [NSPredicate  predicateWithValue:NO];
[self.fetchedResultsController performFetch:nil] 
```

现在`self.fetchedResultsController.fetchedObjects`应该返回一个空数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:49:28.197

这个问题没有多大意义。的`NSFetchedResultsController`数据是获取请求的结果。为了`fetchedObjects`为空，获取请求必须返回一个空集。这意味着没有满足获取请求的对象。如果有满足请求*的*对象，则`fetchedObjects`不会为空。您要问的内容相当于询问如何确保提取没有结果。

我什至不确定你为什么想要这个。如果您不再使用 fetch 的结果，只需删除`NSFetchedResultsController`. 如果您不再想要它的结果，为什么还要保留它呢？

# .htaccess - 需要 .htaccess 帮助

> ID：13752818
> 
> 赞同：1
> 
> 时间：2012-12-06T21:21:50.940
> 
> 标签：.htaccess

我们有一个现有的站点，我们称之为ourdomain.com。我们将内容从一个正在关闭的站点转移过来，我们称之为 legacydomain.com。我们将服务器上的旧域指向 /public_html/ 文件夹。

我需要的是一个 .htaccess，它将 legacydomain.com 或 legacydomain/anything-here 重定向到 ourdomain.com/legacydomain/ 没有附加到 URL 的任何其他内容。

但是，我还需要一些特定的 URL 来重定向到某些目的地，而且它们并不真正遵循模式。例如：

legacydomain.com/something.html 到 ourdomain.com/legacydomain/something.html

legacydomain.com/another.html 到 ourdomain.com/legacydomain/folder/another.html

这是我尝试过的：

```
RewriteCond %{HTTP_HOST} ^www\.legacydomain\.com$ [NC]
RewriteRule (.*) http://www.ourdomain.com/legacydomain/$1 [R=301,L]

Redirect 301 /something.html http://www.ourdomain.com/legacydomain/another.html 
```

它主要工作，但如果我访问 legacydomain.com/anything-here 它甚至不会尝试重写，它只是保持域相同并给出 404。而且我有一种感觉，即使它确实有效，有些东西像 legacydomain.com/anything-here/more-stuff 将被重写为我不想要的 ourdomain.com/legacydomain/anything-here/more-stuff 。

.htaccess 中唯一的另一件事是将非 www 重写为 www，以及标准的 WordPress 内容。任何指导将不胜感激。上面的所有内容都应该在示例前面有一个 http:// 和 www，但它不会让我发布那么多“链接”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:58:47.930

对于每个特定的重写，您需要两行，如下所示。根据您现有的配置，如果这不起作用，您可能需要在 RewriteRule 的开头在 something.html 前面添加一个斜杠。

```
RewriteCond %{HTTP_HOST} legacydomain.com
RewriteRule something.html http://ourdomain.com/legacydomain/something.html [R=301,L] 
```

然后你会使用一个包罗万象的一切。

```
RewriteCond %{HTTP_HOST} legacydomain.com
RewriteRule (.*) http://ourdomain.com/legacydomain/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:37:04.713

就个人而言，我会选择不使用 mod_rewrite 的最简单的解决方案。首先，只需将特定页面重定向到他们需要去的任何地方。

```
Redirect 301 /something.html http://ourdomain.com/legacydomain/something.html
Redirect 301 /another.html http://ourdomain.com/legacydomain/another.html 
```

然后，只需将其他所有内容重定向到基本 URL。

```
RedirectMatch 301 (.*) http://ourdomain.com/legacydomain/ 
```

这些必须放在`RewriteEngine on`语句之前的 .htaccess 文件中。

# types - 将一种类型的切片转换为等效类型的切片的优雅方法？

> ID：13752819
> 
> 赞同：3
> 
> 时间：2012-12-06T21:21:54.670
> 
> 标签：types, struct, go, slice

一个励志的例子：

实施各种调度“策略”，对作业列表进行排序。

```
type Job struct {
    weight int
    length int
}

// Given a slice of Jobs, re-order them.
type Strategy func([]Job) []Job

func Schedule(jobs []Job, strat Strategy) []Job {
    return strat(jobs)
} 
```

一个非常简单的策略是首先执行最短的作业（不管它们的权重/优先级）。

```
func MinCompletionTimes(job []Job) []Job {
    // Hmm...   
} 
```

好吧，这个策略无非就是对 job.length 进行排序，所以让我们使用 sort 包。定义一个自定义类型，并实现 sort.Interface...

```
type JobSlice []Job // Should probably be called MinCompletionTimesJobSlice

func (js JobSlice) Len() {
    return len(js)
}

func (js JobSlice) Less(i, j int) bool {
    return js[i].length < js[j].length
}

func (js JobSlice) Swap(i, j int) {
    js[i], js[j] = js[j], js[i]
} 
```

万岁，现在回到我们简单的策略......

```
func MinCompletionTimes(jobs []Job) []Job {
    sort.Sort([]JobSlice(jobs)) // cannot convert jobs (type []Job) to type []JobSlice
    return jobs
} 
```

呃……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:48:20.997

~~首先，`Jobs`即使您像`jobs []Jobs`.~~

我认为你`Job`的意思是因为错误状态`cannot convert jobs (type []Job)`，所以我假设当你这样做时`[]Jobs`，你的意思是`[]Job`。

* * *

~~如果是这样，那么有了这个， y~~你试图将一个切片转换`Job`为一个切片`JobSlice`，它的底层类型为`[]Job`。

```
[]JobSlice(jobs) // converting a slice of Job to a slice of slices of Job? 
```

换句话说，您正在尝试`[]Job`有效地转换为`[][]Job`. 相反，我认为您只是想将您的转换`[]Job`为`JobSlice`

```
JobSlice(jobs) 
```

* * *

所以拿出一堆代码，你可以看到这个转换是可以的。

```
type Job struct {
    weight int
    length int
}

type JobSlice []Job

func main() {
    x := []Job{{},{}}

    y := JobSlice(x)
    z := []Job(y)

    fmt.Println(x, y, z)
} 
```

# clojure - 从不同的命名空间运行嵌入式代码

> ID：13752821
> 
> 赞同：5
> 
> 时间：2012-12-06T21:22:00.830
> 
> 标签：clojure, namespaces

我经常想在另一个命名空间中运行一小段代码 - 例如可能是复制/粘贴的 DSL 代码片段，我想避免必须：

*   在我当前的命名空间声明中添加一堆`use`子句。这使得 ns 声明变得混乱，增加了额外的维护工作，有时还存在名称冲突的风险。
*   添加`require`子句并强制为所有内容添加名称空间限定符或别名。现在我的 DSL 代码更加混乱。

理想情况下，我希望能够执行以下操作：

```
(with-ns my.namespace
  (foo bar baz)) 
```

其中`foo`,`bar`可能是 中的符号`my.namespace`，但是`baz`是当前（封闭）命名空间中的符号。因此，代码在类似于“本地”命名空间的东西中运行，它在其范围内“使用” my-namespace，但不会影响周围的命名空间。

有没有标准/更好的方法来做到这一点？或者这是一件疯狂的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T04:45:58.850

试试这个：

```
(defmacro with-ns [[namespace symbols] & body]
  `(do (use '[~namespace :only ~symbols])
       (let [result# (do ~@body)]
         (doseq [sym# (map #(:name (meta (val %)))
                           (filter #(= (name '~namespace)
                                       (str (:ns (meta (val %)))))
                                   (ns-refers *ns*)))]
           (ns-unmap *ns* sym#))
         result#)))

(with-ns [clojure.string [split upper-case]]
  (split (upper-case "it works!") #" "))
-> ["IT" "WORKS!"] 
```

工作后，它会从当前 ns 中删除使用过的符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T04:32:47.597

这可以使用如下所示的宏来实现。

注意：在某些情况下它可能会中断，因为我只是通过一个简单的示例进行了尝试

```
;Some other ns
(ns hello)
(def h1 10) ;in hello
(def h2 11) ;in hello

;main ns in which executing code
(ns user)

(defmacro with-ns [target-ns body]
  (clojure.walk/postwalk
   (fn [val]
     (if (symbol? val)
       (if (resolve (symbol (str target-ns "/" val)))
         (symbol (str target-ns "/" val))
         val) val)) body))

(def u1 100) ;in user

(with-ns hello (do (+ h1 u1))) ;110 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:17:40.580

我最终在旧的 Clojure contrib 中找到了一个宏，它非常巧妙地完成了其中的一部分：

```
(defmacro with-ns
  "Evaluates body in another namespace.  ns is either a namespace
  object or a symbol.  This makes it possible to define functions in
  namespaces other than the current one."
  [ns & body]
  `(binding [*ns* (the-ns ~ns)]
     ~@(map (fn [form] `(eval '~form)) body))) 
```

# perl - Perl CGI::Session save_param 将所有参数保存为一个键下的数组

> ID：13752830
> 
> 赞同：0
> 
> 时间：2012-12-06T21:22:31.203
> 
> 标签：perl, cgi, cgi-application

我`CGI::Session`用来存储会话数据`CGI::Application`（特别是我`CGI::Session`通过`CGI::Application::Plugin::Session`模块使用）。在我的一种应用程序模式中，我这样做：

```
 my $self = shift;
    # Get CGI query object
    my $q = $self->query();
    $self->session->save_param($q); 
```

要将我的参数保存到会话数据中，但是在使用检索它们时，`$self->session->param('user')`我发现只有用户参数包含任何数据，即使其他参数正在发送到服务器端并且可以通过`$q->param()`从会话中检索到的用户参数访问参数数组，但是我希望这`$self->session->param('user')`将返回一个包含参数“用户”内容的字符串。
这种行为是预期的吗？
如果是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:11:23.263

我不确定我完全理解你的意思，但这看起来很奇怪。您没有按照[CGI::Session 文档](https://metacpan.org/module/CGI%3a%3aSession)所说的去做。您不能只保存 CGI 对象。您需要单独存储每个参数。

> ```
> # Storing data in the session:
> $session->param('f_name', 'Sherzod'); 
> ```

如果您只想将所有 CGI 参数存储在 Session 中，请执行以下操作：

```
# $q := CGI object
# $session := CGI::Session object

$session->param('foo', $q->param('foo'));
$session->param('bar', $q->param('bar')); 
```

或者你甚至可以为他们所有人这样做：

```
foreach my $key ($q->param) {
  $session->param($key, $q->param($key));
} 
```

# .net - 将来自同一主机的多个客户端连接到信号器服务器块

> ID：13752831
> 
> 赞同：12
> 
> 时间：2012-12-06T21:22:33.283
> 
> 标签：.net, real-time, signalr

作为我教育项目的一部分，我正在测试几种 .net 实时通信方法的性能。其中之一是信号器。出于这个原因，我有两个程序：

*   ServerHostApp - 带有 Microsoft.AspNet.SignalR.Hosting.Self.Server 的 WPF 应用程序，它公开了一个集线器。
*   ClientHostApp - 托管许多信号器客户端的 WPF 应用程序

程序的典型工作流程是：启动服务器-> 使用 ClientHostApp 连接一些客户端-> 运行测试。

如果它们都托管在同一台计算机上，则这些程序可以正常工作，但是如果尝试在不同的计算机上运行这些程序，则会出现问题。特别是，我无法从单个 ClientHostApp 实例连接多个客户端。

服务器代码：

```
 //starting up the server
public override void Start()
{
  string url = "http://*:9523/MessagingServiceHostWPF/";
  Server = new SignalR.Hosting.Self.Server(url);
  Server.MapHubs();
  Server.Start();
} 
```

. . .

```
//one of the methods inside the hub exposed by the server
    public DataContracts.ClientInfo AcknowledgeConnection(string handle)
    {
       ServerLogic.DataContracts.ClientInfo clientInfo = SignalRApplicationState.SingletonInstance.AddClient(handle, Context.ConnectionId);;
       return clientInfo;
     } 
```

客户端主机应用程序：

```
//starting many clients in a loop
foreach (var client in _clients)
{
  client.Start();
} 
```

. . .

```
//method inside the Client class
public async void Start()
{
  _hubConnection = new HubConnection(EndpointAddress);  
  _hubProxy = _hubConnection.CreateProxy("MessagingHub");

  await _hubConnection.Start().ContinueWith(task =>
    {
      _hubProxy.Invoke<ClientLogic.MyServices.ClientInfo>("AcknowledgeConnection", Handle).ContinueWith((t) =>
         {
              ClientInfo = t.Result;
              IsConnected = true;
         });  
     });
} 
```

如果我尝试从同一个 ClientHostApp 实例连接一个客户端 - 我成功了。但是，如果我尝试连接 2 个或更多客户端，则集线器上的 AcknowledgeConnection 方法永远不会执行，而 ClientHostApp 程序只是挂起而没有响应。奇怪的是，如果我在我的客户端机器上启动 Fiddler2，所有客户端都会连接起来，我可以运行我的测试。

你知道我在这里想念什么吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-07T00:11:40.043

我猜你在客户端应用程序中遇到了每个主机的默认网络连接限制。它不适用于 localhost，因此这很可能是您仅在跨多台机器运行时才体验它的原因。对于如何解决，您有一些选择：

## 基于代码

### 增加所有主机

在启动时设置`ServicePointManager.DefaultConnectionLimit = 10;`，这将为您提供与您正在与之通信的任何主机的 10 个出站连接。

### 为特定主机增加

在启动时使用`ServicePointManager.FindServicePoint(specificDomainUri).ConnectionLimit = 10`，这将为您提供 10 个仅到该特定 IP/域的出站连接。

## 基于配置

### 增加所有主机

配置以下内容以将与您正在与之通信的任何主机的出站连接增加到 10 个：

```
 <system.net>
     <connectionManagement>
         <add name="*" maxconnection="10" />
     </connectionManagement>
 </system.net> 
```

### 针对特定主机增加

配置以下内容以将仅与特定 IP/域的出站连接增加到 10 个：

```
 <system.net>
     <connectionManagement>
         <add name="somesubdomain.somedomain.com" maxconnection="10" />
     </connectionManagement>
 </system.net> 
```

# c++ - 为什么 sqlite3 不能与 NFS 一起使用？

> ID：13752835
> 
> 赞同：3
> 
> 时间：2012-12-06T21:22:47.243
> 
> 标签：c++, sqlite, nfs

我改用 sqlite3 而不是 MySQL，因为我必须在没有 mysql 的 PBS 系统上运行许多作业。当然，在我的机器上我没有 NFS，而 PBS 上存在 NFS。在花了很多时间切换到 sqlite3 之后，我去运行许多工作并且我损坏了我的数据库。当然，在 sqlite3 FAQ 中提到了 NFS，但是当我开始时，我什至没有想到这一点。

我可以在工作开始时复制数据库，但它会变成合并的噩梦！

出于这个简单的原因，我永远不会向我的任何同事推荐 sqlite：“sqlite 不起作用（在重要的机器上）”

我读过关于 NFS 没有达到标准的咆哮，这是他们的错。我尝试了一些解决方法，但正如[这篇文章](https://stackoverflow.com/questions/9907429/locking-sqlite-file-on-nfs-filesystem-possible)所暗示的那样，这是不可能的。

没有牺牲性能的解决方法吗？

那我该怎么办？试试其他的数据库软件？哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:57:00.347

您使用了错误的工具。根据这种经验说“我永远不会推荐 sqlite ...”有点像在你用它们敲钉子时说“我永远不会推荐玻璃瓶”。

您需要更准确地指定您的问题。我尝试在您问题的字里行间阅读给了我这样的信息：

您有许多节点通过一些未指定的路径工作，并产生输出。作业不交互，因为您说您可以复制数据库。所有作业的输出可以在完成后合并。你如何有效地产生合并的输出？

鉴于这个问题，这是我的建议：

让每个作业在结构化文件中生成其输出，每个作业都是唯一的。作业完成后，编写一个程序来解析每个文件并将其插入到 sqlite3 数据库中。这以它可以处理的方式使用 NFS（单个进程按顺序写入文件）并以同样合理的方式使用 sqlite3（单个进程写入本地文件系统上的数据库）。这避免了在运行作业时出现 NFS 锁定问题，并且应该提高吞吐量，因为您没有对 sqlite3 数据库的争用。

# xml - Chrome 说：资源解释为样式表，但使用 MIME 类型应用程序/xml 传输

> ID：13752836
> 
> 赞同：11
> 
> 时间：2012-12-06T21:22:51.383
> 
> 标签：xml, xslt

我有一个使用 XSL 文件设置样式的 XML 文件。在 Firefox 中打开 XML 文件时，我没有遇到任何问题（尽管奇怪的是，有时它只会在我点击“重新加载”后才会显示），但在 Chrome/Chromium 中我收到错误消息：

```
Resource interpreted as Stylesheet but transferred with MIME type application/xml 
```

文件在这里：http: [//jonreeve.com/test/mike/biblexml.xml](http://jonreeve.com/test/mike/biblexml.xml)

我不认为 XML/XSL 语法有任何不规则之处，而且链接似乎也都措辞正确。

此外，这似乎与这里所有看起来相似的问题都不相似，这些问题似乎正在处理 javascript 和其他应用程序。这只是纯 XML/XSL。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-06T13:25:20.830

**XSLT 1.0**规范明确指出 XSLT 的适当 MIME 类型是 text **/xml**和**application/xml**

> [MIME 媒体类型 text/xml 和 application/xml [RFC2376] 应该用于 XSLT 样式表。可能会专门为 XSLT 样式表注册媒体类型；如果是并且当它是，也可以使用该媒体类型。](http://www.w3.org/TR/xslt#section-Introduction)

在**[XSLT 2.0](http://www.w3.org/TR/xslt20/#xslt-media-type)**中，这已更改为**application/xslt+xml**。

但

> [在没有为 XSLT 样式表注册的媒体类型的情况下，一些供应商的产品采用了不同的约定，特别是 type=" **text/xsl** "。](http://www.w3.org/TR/xslt20/#embedded)

Chrome 32.0.1700.107 返回错误：

> 资源解释为样式表，但使用 MIME 类型**text/xml**传输；
> 
> 资源解释为样式表，但使用 MIME 类型**application/xml**传输；
> 
> 资源解释为样式表，但使用 MIME 类型**application/xslt+xml**传输；

**如果text/xsl**类型通过，Chrome 不会返回错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:34:12.420

XSLT 应该与 MIME 类型一起交付`application/xslt+xml`，而不是`application/xml`. 您应该配置您的服务器来执行此操作。您需要一个`.htaccess`包含该行的文件

```
AddType application/xslt+xml .xsl 
```

这会将扩展名`.xsl`与正确的 MIME 类型相关联。`.htaccess`如果您在 XSLT 的目录或父目录中已有文件，则可以添加该行。否则，创建这样的文件。

# c# - 在 wcf 服务中更改安全模式时出错

> ID：13752841
> 
> 赞同：0
> 
> 时间：2012-12-06T21:23:06.443
> 
> 标签：c#, wcf, wshttpbinding

我正在尝试使用 wshttpbinding 创建 wcf 服务，但是每当我更改安全模式时，无论我如何使用 google 的示例对其进行修改，它总是会出错

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true">
  <serviceActivations>
    <add relativeAddress="General.svc" service="SMJ.Services.GeneralService" />
  </serviceActivations>
</serviceHostingEnvironment>
<bindings>
  <wsHttpBinding>
    <binding closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
   maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" 
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16348"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="SMJ.Services.GeneralService" behaviorConfiguration="ServiceBehaviors" >
    <endpoint contract="SMJ.Services.IGeneralService" binding="wsHttpBinding"></endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors >
    <behavior name="ServiceBehaviors"  >
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

当我将安全模式更改为另一种时，它将显示此错误 **找不到与具有绑定 WSHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]。**

服务器是 IIS 7，但问题是我正在开发中

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:35:25.010

好的，我找到了使用 IIS Express 的解决方案，并在属性窗口的 Web 项目中将 SSL Enabled 设置为 true。谢谢你的建议

# python - 使用 os.path.exists 保护 exe 文件是个好主意吗？

> ID：13752844
> 
> 赞同：0
> 
> 时间：2012-12-06T21:23:11.877
> 
> 标签：python, file, exe

使用：

```
import os.path
os.path.exists (file_path) 
```

“保护”程序免受复制？

例如，在我们的主应用程序中，我们使用：

```
import os.path
os.path.exists ("c:\windows\mifile.dll") 
```

什么东西在哪里`mifile.dll`，当然还有另一个名字，比如`windriv.dll`用记事本保存的简单文本。

如果文件存在，则程序可以工作，如果不存在，则会显示一条警告消息，表明它是非法副本或其他东西。

安装程序时，我会正常安装包或可移植文件夹，然后手动将文件复制`mifile.dll`到`c:\windows`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:31:47.460

这不是最好的主意。

1.  很多人（比如我自己和可能的病毒程序）会查看 windows 目录并删除这样的内容。
2.  这种事情可能最好加密
3.  捕捉导入错误并不是最简单的事情
4.  如果您担心非法复制，那么很快就会有人发现这一点并且您拥有一个可以轻松复制和轻松分发的文件。
5.  对于逆向工程师来说，使用导入和错误输出将是一个巨大的危险信号
6.  如果不以管理员身份运行程序，则使用 UAC 可能无法访问此文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:15:34.877

不。

无论您最终采用哪种解决方案，“秘密握手安装技术”的一般概念基本上都是**破坏性**的。您正在有效地防止您的客户：

*   升级机器的操作系统
*   从备份恢复他们的系统
*   由于硬件故障，将您的服务移至新机器

客户*将*需要在未来几年内完成其中任何一项。当他们这样做时，您的程序将中断，他们将不知道为什么或如何修复它。鉴于您此时甚至可以与他们联系，请考虑一下当他们与您联系以解决问题时，这会让您看起来如何。

如果*我*发现一个分包商偷偷把自己介绍为这样的单点故障，我会非常愤怒。

*要么信任您的客户，获得您可以信任的新客户，要么寻求完全专业的非秘密 DRM 解决方案。*

# url-rewriting - Magento 管理员销售 > 订单 > 商品网址

> ID：13752847
> 
> 赞同：3
> 
> 时间：2012-12-06T21:23:22.617
> 
> 标签：url-rewriting, magento-1.5, magento

我正在尝试创建从我的帮助台软件到 magento 后端销售订单页面的链接。

Magento 将 url 构造为下面的示例，其中数字表示订单 ID。

/index.php/admin/sales_order/view/order_id/12394/ **_** _

但是，订单 ID 不等于订单号，因为计数中包括信用发票等。

是否有其他方法可以让我使用订单号链接到订单页面。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:37:12.640

magento中有2种订单号

1.  订单增量 ID
2.  订单 ID（主要在 magento 中使用内部）。

管理员使用订单 ID，而发票上的数字是订单增量 ID。

解决此问题的最快方法是创建一个自定义模块，该模块通过订单增量 ID 查找订单 ID，并使用订单 ID 重定向到视图页面。

在 /app/etc/modules/MageIgniter_OrderRedirect.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <MageIgniter_OrderRedirect>
      <active>true</active>
      <codePool>local</codePool>
    </MageIgniter_OrderRedirect>
  </modules>
</config> 
```

在 /app/code/local/MageIgniter/OrderRedirect/controllers/RedirectOrderController.php

```
<?php

class MageIgniter_OrderRedirect_RedirectOrderController extends Mage_Core_Controller_Front_Action
{
    public function viewAction(){

       $increment_id = Mage::app()->getRequest()->getParam('id');
       $order = Mage::getModel('sales/order')->loadByIncrementId($increment_id);
       $order_id = $order->getId();

       Mage::app()->getResponse()->setRedirect(Mage::helper('adminhtml')->getUrl("adminhtml/sales_order/view", array('order_id'=> $order_id)));
    }
 } 
```

在 /app/code/local/MageIgniter/OrderRedirect/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <MageIgniter_OrderRedirect>
      <version>0.1.0</version>
    </MageIgniter_OrderRedirect>
  </modules>
  <frontend>
    <routers>
        <orderredirect>
            <use>standard</use>
            <args>
                <module>MageIgniter_OrderRedirect</module>
                <frontName>orderredirect</frontName>
            </args>
        </orderredirect>
    </routers>
 </frontend>   
  <global>
    <helpers>
      <orderredirect>
        <class>MageIgniter_OrderRedirect_Helper</class>
      </orderredirect>
    </helpers>
  </global>
</config> 
```

网址

> www.site.com/orderredirect/redirectOrder/view/id/101512486

# asp.net - ASP.Net AJAX UpdatePanel 不适用于中继器和 RadioButtons

> ID：13752859
> 
> 赞同：0
> 
> 时间：2012-12-06T21:23:48.747
> 
> 标签：asp.net, ajax

我有一个中继器，其中每个项目中都包含一个单选按钮，并且整个站点都位于更新面板中。当我选择一个单选按钮时，整个页面都会重新加载。为什么不只是更新更新面板。我已将其简化为一个非常简单的示例，以避免混乱。代码在这里...

ASPX...

```
<asp:ScriptManager ID="SM1" runat="server" />
<asp:UpdatePanel ID="up1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Repeater runat="server" ID="history">
            <ItemTemplate>
                <asp:RadioButton runat="server" ID="radioButton" AutoPostBack="true" GroupName="HistoryGroup" OnCheckedChanged="RadioButton_CheckChanged" /><br />
            </ItemTemplate>
        </asp:Repeater>

        <p><asp:Literal runat="server" ID="output" /></p>
    </ContentTemplate>
</asp:UpdatePanel> 
```

代码...

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            List<int> list = new List<int>();
            for (int i = 0; i < 20; i++)
                list.Add(i);
            history.DataSource = list.ToArray();
            history.DataBind();
        }
    }

    protected void RadioButton_CheckChanged(Object sender, EventArgs e)
    {
        output.Text = DateTime.Now.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:34:26.793

在 RadioButton 上设置 ClientIDMode=Auto 应该可以修复它（这是一个臭名昭著的 .NET 错误，[http://connect.microsoft.com/VisualStudio/feedback/details/584991/clientidmode-static-in-updatepanel-fails-to-do-异步回发](http://connect.microsoft.com/VisualStudio/feedback/details/584991/clientidmode-static-in-updatepanel-fails-to-do-async-postback)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:27:21.953

请在 output.Text = DateTime.Now.ToString() 之后添加 up1.Update()。您的 RadioButton 不是 updatepanel 的触发器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:28:17.880

原来解决方案是从 RadioButton 中删除 GroupName。当我删除此标签时，它会异步触发并更新面板。我实际上并不需要这个标签（由于已知的错误，即 GroupName 在中继器中的 RadioButtons 上不起作用），因为我在单击事件中处理分组（即取消选中其他中继器项目中的任何其他同名 RadioButtons） .

# c# - WPF 库中的 MainWindow.ShowDialogue()

> ID：13752860
> 
> 赞同：0
> 
> 时间：2012-12-06T21:23:56.097
> 
> 标签：c#, wpf

我习惯于 Winforms，您可以在其中创建一个窗口并通过以下方式显示它：

`Window.ShowDialogue();`

我在`MainWindow.xaml`类库项目中使用默认值。我必须删除 App.xaml 文件才能完成转换。我想在一个简单的测试中启动主窗口。例如

```
 [TestMethod]
    public void RunPd()
    {            
        MainWindow window = new MainWindow();
        window.ShowDialogue();
    } 
```

Show/ShowDialogue() 不可用。我只有

`GetChildren<>, GetParents<>, InitializeComponent and LoadTree<>.`

如何显示 MainWindow.xaml？

更新

主窗口代码：

`public partial class MainWindow : Window`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:28:46.357

尝试`ShowDialog()`

```
 public void RunPd()
  {
      MainWindow window = new MainWindow();
      window.ShowDialog();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:40:26.713

我不确定这是否是问题（你的问题有点含糊）；但是，右键单击 VisualStudio 项目中的 xaml 文件，然后单击属性。然后确保“构建操作”设置为“页面”。

如果这已经设置，请也对此发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:41:37.373

我必须添加对 WindowsBase.dll、System.Xaml、PrentationCore 和 PrentationFramework 的引用。一旦我添加了这些引用，单元测试就起作用了。

好奇为什么我不需要在 Winforms 中添加这些程序集...？

# xml - SOAPUI 中的空请求标签

> ID：13752861
> 
> 赞同：2
> 
> 时间：2012-12-06T21:23:56.277
> 
> 标签：xml, web-services, wsdl, axis2, soapui

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
       <soapenv:Header/>
       <soapenv:Body>
          <xs:QueryProductionCalendarRequest/>
       </soapenv:Body>
    </soapenv:Envelope> 
```

当我在 SOAPUI 中加载 WSDL 时。请求似乎是空的。为什么这里没有显示请求元素。但是当我加载我在线下载的示例 WSDL 时。它如下所示：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsd="http://quickstart.samples/xsd">
   <soap:Header/>
   <soap:Body>
      <xsd:getPrice>
         <xsd:symbol>?</xsd:symbol>
      </xsd:getPrice>
   </soap:Body>
</soap:Envelope> 
```

有人可以向我解释这里发生了什么吗？以下是 WSDL：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:axis2="http://ws.apache.org/axis2" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://ws.apache.org/axis2">
    <wsdl:documentation>FlexisService</wsdl:documentation>
    <wsdl:types>
      <xs:element name="QueryProductionCalendarRequest" type="QueryProductionCalendarRequestType"/>
      <xs:complexType name="QueryProductionCalendarRequestType">
        <xs:sequence>
          <xs:element name="Plant" type="xs:string"/>
          <xs:element name="Line" type="xs:string"/>
          <xs:element name="StartDate" type="xs:date" minOccurs="0"/>
          <xs:element name="EndDate" type="xs:date" minOccurs="0"/>
        </xs:sequence>
      </xs:complexType>
      <xs:element name="QueryProductionCalendarResponse" type="QueryProductionCalendarResponseType"/>
      <xs:complexType name="QueryProductionCalendarResponseType">
        <xs:sequence>
          <xs:element name="Plant" type="xs:string"/>
          <xs:element name="Line" type="xs:string"/>
          <xs:element name="ProductionDayList" type="ProductionDayListType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionDayListType">
        <xs:sequence>
          <xs:element name="ProductionDay" type="ProductionDayType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionDayType">
        <xs:sequence>
          <xs:element name="ProductionDate" type="xs:date"/>
          <xs:element name="ProductionRate" type="xs:integer"/>
          <xs:element name="ProductionShiftList" type="ProductionShiftListType" minOccurs="0"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionShiftListType">
        <xs:sequence>
          <xs:element name="ProductionShift" type="ProductionShiftType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionShiftType">
        <xs:sequence>
          <xs:element name="Name" type="xs:string"/>
          <xs:element name="ShiftRate" type="xs:integer"/>
          <xs:element name="StartDateTime" type="xs:dateTime"/>
          <xs:element name="EndDateTime" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
    </wsdl:types>
    <wsdl:message name="QueryProductionCalendarRequestMessage">
      <wsdl:part name="parameters" element="xs:QueryProductionCalendarRequest"/>
    </wsdl:message>
    <wsdl:message name="QueryProductionCalendarResponseMessage">
      <wsdl:part name="parameters" element="xs:QueryProductionCalendarResponse"/>
    </wsdl:message>
    <wsdl:portType name="FlexisServicePortType">
        <wsdl:operation name="QueryProductionCalendar">
            <wsdl:input message="axis2:QueryProductionCalendarRequestMessage" wsaw:Action="urn:QueryProductionCalendar"/>
            <wsdl:output message="axis2:QueryProductionCalendarResponseMessage" wsaw:Action="urn:QueryProductionCalendarResponse"/>
        </wsdl:operation>    
    </wsdl:portType>
    <wsdl:binding name="FlexisServiceSoap11Binding" type="axis2:FlexisServicePortType">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="QueryProductionCalendar">
            <soap:operation soapAction="urn:QueryProductionCalendar" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="FlexisServiceSoap12Binding" type="axis2:FlexisServicePortType">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="QueryProductionCalendar">
            <soap12:operation soapAction="urn:QueryProductionCalendar" style="document"/>
            <wsdl:input>
                <soap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="FlexisServiceHttpBinding" type="axis2:FlexisServicePortType">
        <http:binding verb="POST"/>
        <wsdl:operation name="QueryProductionCalendar">
            <http:operation location="FlexisService/QueryProductionCalendar"/>
            <wsdl:input>
                <mime:content type="text/xml" part="QueryProductionCalendar"/>
            </wsdl:input>
            <wsdl:output>
                <mime:content type="text/xml" part="QueryProductionCalendar"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="FlexisService">
        <soap:address location='http://localhost:8080/axis2/services/FlexisService'/>
    </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:56:16.607

它应该关于 WSDL 文件。请检查

```
 <wsdl:message name="nameOfRequest"> 
```

WSDL 文件的一部分，并确保它包含所需的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:51:54.233

只需输入股票代码代替 ? 并提交请求。getPrice 听起来像是一个非常简单的请求，所以我真的不希望需要比股票代码更多的东西。

# cloud-foundry - 最新升级后在 vmc 推送上出现“未定义的方法'已更改？'”错误

> ID：13752863
> 
> 赞同：1
> 
> 时间：2012-12-06T21:23:59.250
> 
> 标签：cloud-foundry, vmc

升级到 vmc 0.4.4 后，我无法再推送我的 Sinatra 应用程序有任何已知的修复吗？

崩溃时间：2012-12-06 13:14:20 -0800

NoMethodError：未定义的方法“已更改？” 为了 ＃

vmc-0.4.4/lib/vmc/cli/app/push/sync.rb:13:in `display_changes' vmc-0.4.4/lib/vmc/cli/app/push.rb:89:in`sync_app' vmc-0.4.4/lib/vmc/cli/app/push.rb:80:in `push' mothership-0.3.4/lib/mothership/base.rb:61:in`run' Mothership- 0.3.4/lib/mothership/command.rb:68:in `block in invoke' manifests-vmc-plugin-0.4.17/lib/manifests-vmc-plugin/plugin.rb:113:in`call' manifests-vmc-plugin-0.4.17/lib/manifests-vmc-plugin/plugin.rb:113:in `block (2 levels) in <class:Manifests>' mothership-0.3.4/lib/mothership/callbacks.rb:74:in`with_filters' manifests-vmc-plugin- 0.4.17/lib/manifests-vmc-plugin/plugin.rb:112:in `block in <class:Manifests>' mothership-0.3.4/lib/mothership/command.rb:78:in`instance_exec' Mothership-0.3.4/lib/mothership/command.rb:78:in `block (2 levels) in invoke' mothership-0.3.4/lib/mothership/command.rb:82:in`instance_exec' Mothership-0.3.4/lib/mothership/ command.rb:82:in`invoke' mothership-0.3.4/lib/mothership/base.rb:50:in`执行'vmc-0.4.4/lib/vmc/cli.rb:106:in start'vmc `execute' mothership-0.3.4/lib/mothership.rb:45:in`-0.4.4/bin/vmc:11:in `<top (required)>' ruby-1.9.2-p290@main1.9/bin/vmc:23:in`load'ruby-1.9.2-p290 @main1.9/bin/vmc:23:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:59:58.307

如果您在使用 vmc 0.4.x 时遇到任何问题，我建议您安装旧版本 (0.3.23)。您可以完全删除 0.4.4，也可以使用以下语法调用特定版本（在本例中为 0.3.23）。

```
vmc _0.3.23_ <command> 
```

# asp.net - Entity Framework WebApi循环依赖序列化错误

> ID：13752866
> 
> 赞同：1
> 
> 时间：2012-12-06T21:24:11.240
> 
> 标签：asp.net, json, entity-framework, asp.net-web-api, circular-dependency

我想，我已经阅读了有关此错误的所有内容，并且尝试了所有内容。这是我的模型：

主要的：

```
public class Trip
{
    public int TripId { get; set; }
    public string Name { get; set; }
    public string ShortDescription { get; set; }
    public string Country { get; set; }
    public float BasicPrice { get; set; }
    public virtual ICollection<ApartmentType> ApartmentType { get; set; }
    public virtual ICollection<TransportMethod> TransportMethod { get; set; }
    public virtual ICollection<FeedingType> FeedingType { get; set; }
} 
```

公寓类型：

```
public class TransportMethod
{
    public int TransportMethodId { get; set; }
    public int TripId { get; set; }
    public string Name { get; set; }
    public float Price { get; set; }
} 
```

喂食类型：

```
public class FeedingType
{
    public int FeedingTypeId { get; set; }
    public int TripId { get; set; }
    public string Description { get; set; }
    public float Price { get; set; }
} 
```

运输类型：

```
public class TransportMethod
{
    public int TransportMethodId { get; set; }
    public int TripId { get; set; }
    public string Name { get; set; }
    public float Price { get; set; }
} 
```

序列化 Trip 实体时，出现循环依赖错误。我尝试过的事情：

1.  在 DbContext 中禁用延迟加载。
2.  添加 json.SerializerSettings.PreserveReferencesHandling=Newtonsoft.Json.PreserveReferencesHandling.All; 到 GLOBAL.asax

3.  在每个子实体中将装饰器 [IgnoreDataMember] 添加到 TripId。

4.  将此实体映射到不包含 ICollection 成员的 ViewModel。- 这行得通，但在某些时候我会想要将这些列表提供给客户。

我真的不知道发生了什么事。我错过了什么？我真的无法发现任何循环依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:27:18.683

您是否尝试将`[JsonIgnore]`属性添加到`TripId`子实体？

[http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonIgnoreAttribute.htm](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonIgnoreAttribute.htm)

或设置

`json.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;`

# windows - 在 Windows 中挂钩所有新进程和命令行参数

> ID：13752869
> 
> 赞同：1
> 
> 时间：2012-12-06T18:21:43.860
> 
> 标签：windows, process, hook

我想知道我的 IDE 运行哪些工具以及它使用哪些命令行参数。是否有提供此类信息的工具？

我可以制作一个应用程序，它可以每秒甚至更快地保存所有进程，但我仍然不确定它是否会挂钩所有内容。必须已经有一些工具可以更好地完成这项工作。就像挂钩操作系统调用`WinExec`or `CreateProcess(Ex)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:00:21.920

Sysinternals **[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)**可以记录进程事件等。它通过监视 Native API 调用来工作，因此无论程序使用哪个库函数，它都可以工作。

# javascript - jQuery Mobile - 当我使用数据属性时如何更改要应用的 css 类？

> ID：13752872
> 
> 赞同：3
> 
> 时间：2012-12-06T21:24:27.797
> 
> 标签：javascript, jquery, css, jquery-mobile, mobile

我正在使用 jQuery Mobile 构建一个移动应用程序。我正在尝试将自己的设计应用于它，到目前为止我做得很好，但我遇到了一个问题。

我正在尝试尽可能多地构建干净的 ui，因此我正在尝试消除阴影、渐变等。但是，当我放置`data-role="listview"`一个`<div>`元素时，它会自动为其放置一些 css 类，其中一个是 ui-shadow ，我不想将它用于我的列表视图。

到目前为止，我考虑过更改 jquery mobile 的 javascript 代码，但我认为这不是最佳实践。

如果我能得到你的想法，那就太棒了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:08:38.787

`data-*`您可以通过属性指定是否要在小部件上使用阴影（和其他东西） 。

 ~~~~```
<ul data-role="listview" data-shadow="false">
    ...
</ul> 
```~~  ~~创建 JSFiddle 测试后，我意识到 jQuery Mobile 不允许您通过选项从插入列表视图宽度中删除阴影，但是您可以使用大多数小部件（如按钮）执行此操作。这是一个演示：[http://jsfiddle .net/4VXfb/](http://jsfiddle.net/4VXfb/)

```
<a data-role="button" data-shadow="false" href="#">I'm a button without shadows.</a> 
```

在此处查看有关 jQuery Mobile 小部件选项的文档：http: [//jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:23:21.297

我们对 JQM 及其各自的 CSS 采取的做法是我们不接触这些文件，因为它们可以在新版本出现时更新。我们分别在 JQM 之后加载我们自己的自定义 JS 和 css 文件。在我们自己的文件中，我们指定了我们想要更改的特定定制项目，这些项目不能简单地由 HTML 标记中的属性处理。我们只是在其各自的位置重新定义类或函数。我希望这可以帮助您并让您继续前进，而无需实际接触 JQM 文件。~~~~

# email - Google Apps 脚本 - 基于单元格值的自动电子邮件

> ID：13752873
> 
> 赞同：2
> 
> 时间：2012-12-06T21:24:29.870
> 
> 标签：email, google-apps-script, google-sheets

在使用脚本时，我完全是个菜鸟，我正在寻求一些帮助，我借用并修改了一个以使用我的电子表格。

我正在寻找 H 列中的“需要订购”值，这将导致将电子邮件发送给收件人。我遇到的唯一问题是，每次更改该列中的值并且我的“需要订购”文本出现在该列中的其他单元格中时，都会发送一封电子邮件并且我的收件箱被淹没。如果列中的任何其他单元格已经存在“需要订购”值，有人可以帮我调整它以便它不会生成电子邮件吗？

感谢您提供的任何帮助。

这是我正在使用的：

```
function sendEmail(email_address, email_subject, email_message) {
  var status = ScriptProperties.getProperty('AlertStatus')+"";
  var value = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Vehicle Inventory").getRange( "H2:H100").getValues().toString();
  if (value.match("Need to Order" )&&status.match("")) { 
    ScriptProperties.setProperty('AlertStatus', '') 
    MailApp.sendEmail('username@gmail.com', 'Need to Order', 'Order more equipment.     Open the current version of your Google Document "test spreadsheet": ');
}
 else { 
    if (!value.match("Need to Order" )) 
    ScriptProperties.setProperty('AlertStatus', '') 
 }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T16:18:06.233

怎么改：

```
var value = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Vehicle Inventory").getRange( "H2:H100").getValues().toString(); 
```

至

```
var value = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Vehicle Inventory").getActiveCell().getValue().toString(); 
```

这样，您可以检查光标所在的当前单元格，而不是整个列。

# matlab - Matlab中矢量信号的相关性

> ID：13752874
> 
> 赞同：1
> 
> 时间：2012-12-06T21:24:33.063
> 
> 标签：matlab

我想在 Matlab 中计算向量（单信号）的相关性。到目前为止我知道，这应该是一个相关矩阵，但在 Matlab 中我没有找到给我一个矩阵的函数。Xcorr() 给出一个向量。因此，如果有人知道，我将不胜感激。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:03:01.650

您可能正在寻找以下`corrcoef`功能：

> ```
> corrcoef(rand(10,1),rand(10,1))
> 
> ans =
> 
>   1.0000   -0.2110
> 
>  -0.2110    1.0000 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:04:43.133

对于时间序列，相关性定义为向量。

也许你想要类似的东西：

A*(A.')

其中 A 是列向量。

# http-status-codes - 服务器是否必须在重定向之前执行操作？

> ID：13752877
> 
> 赞同：0
> 
> 时间：2012-12-06T21:24:34.180
> 
> 标签：http-status-codes, http-redirect, http-status-code-307, http-status-code-303

在[HTTP 303 是否可用于其他 HTTP 方法？](https://stackoverflow.com/questions/13635181/is-http-303-acceptable-for-other-http-methods)我们确定[HTTP 303](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-21#section-7.4.4)可用于其他 HTTP 方法。

[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式要求服务器在返回之前执行操作`HTTP 303`。`HTTP PUT`对于这种和`DELETE`其他类型的重定向是否也是如此？**重定向前是否需要服务器执行操作？**或者它是否可以假设客户端会根据需要在规范 URL 上重复请求？

当您考虑到重定向通常用于负载平衡这一事实时，这变得更加有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:28:37.957

引用[RESTful Web 服务](http://shop.oreilly.com/product/9780596529260.do)第 378 页：

> 303（“见其他”）
> 
> **请求已被处理**，但不是服务器发送响应文档，而是向客户端发送响应文档的 URI。这可能是静态状态消息的 URI，或者是一些更有趣的资源的 URI。

几页后...

> 307（“临时重定向”）
> 
> **请求尚未处理**，因为请求的资源不在本地：它位于某个其他 URI。客户端应将请求重新提交到另一个 URI。对于`GET`请求，唯一被请求的是服务器发送一个表示，这个状态码是相同的`to 303 (“See Other”)`。**对 a 做出良好响应****的典型情况是服务器想要将客户端发送到镜像站点。`307``GET`**但是对于`POST, PUT, and DELETE`请求，服务器应该采取一些行动来响应请求，这个状态码与`303`. A`303`回应`POST, PUT, or DELETE`表示操作已成功，但响应实体主体未与此请求一起发送。如果客户端想要响应实体主体，它需要`GET`向另一个 URI 发出请求。A`307`响应 a`POST, PUT, or DELETE`意味着服务器甚至还没有尝试执行该操作。客户端需要将整个请求重新提交到`Location`标头中的 URI。
> 
> 一个类比可能会有所帮助。您带着要开的处方去药房。A`303`是药剂师说“我们已经为您开药了。去下一个窗口取药。” A`307`是药剂师说“我们不能开那个处方。去隔壁的药店。”</p>

# ios - iOS 实现 Retina 图形

> ID：13752881
> 
> 赞同：0
> 
> 时间：2012-12-06T21:24:45.120
> 
> 标签：ios, retina-display

在情节提要或代码中，我是使用@2x 图像还是图像/背景字段中的普通图像？换句话说，它是放大小图形还是缩小大图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:29:15.873

您不使用@2x，但总是参考较小的分辨率。iOS 会在合适的时候选择@2x 版本。

# php - 使用 PHP 发送电子邮件表单内容而不加载新页面？

> ID：13752884
> 
> 赞同：1
> 
> 时间：2012-12-06T21:24:49.343
> 
> 标签：php, jquery, ajax, forms, submit

我正在创建一个向我发送电子邮件但不加载新页面的表单，它只是修改了同一页面上的一些 HTML 和 CSS 值。

我已经尝试实现它，它接近完成，它只是无法正常工作。单击提交后，它不会验证表单，它会加载 PHP 页面并说“谢谢...”，然后我收到一封电子邮件。如果您能帮助我理解和调试它，我将不胜感激。谢谢！

我可以确认 jQuery 已正确链接。我按以下顺序设置：

```
<html>
<head>
 <script> (link for jquery)
 <style>
 <script>
   validateForm() JavaScript
   jQuery
<body> (no loading functions via onload) 
```

HTML 表单：

```
<form  id='form' method='post' action='sendemail.php'>
                    Name: <br />
                    <input type="text" id="name" name="name" />
                    <br /><br />
                    Email: <br />
                    <input type="email" id="email" name="email" />
                    <br /><br />
                    Subject: <br />
                    <input type="text" id="subject" name="subject" />
                    <br /><br />

                    Comments: <br />
                    <textarea id="comments" name="comments" rows="10" cols="60"></textarea>
                    <br /><br />

                    <input type="image" src="..." name="myFormSubmitted" value="Submit" />        
                </form>
                <div id="formResponse"></div> 
```

PHP - sendmail.php：

```
<?php
if(isset($_POST['myFormSubmitted'])) {
    $message = '';

    // Construct the message
    $message .= <<<TEXT
        Name: {$_POST['name']}
        Email: {$_POST['email']}
    Subject: {$_POST['subject']}
    Comments: {$_POST['comments']}  
        {$checkString}
TEXT;

    $to = 'sendMeHere@example.com';
    $subject = $_POST['subject'];
    $from = $_POST['name'];
    $fromEmail = $_POST['email'];

    $header = 'From: ' . $from . '<' . $fromEmail . '>';

    // Send the email
    mail($to, $subject, $message, $header);

    echo 'Thank you for your Email. We will get in touch with you very soon.';
}
?> 
```

jQuery：

```
//On form submit, call validateForm, then post to PHP if validated
            $("#form").submit(function(e) {
                if (validateForm()) {
                    $.post( 
                        'sendemail.php', 
                        {
                            name: $('#name').val(), 
                            email: $('#email').val(), 
                            comments: $('#comments').val(), 
                            myFormSubmitted: 'yes'
                        }, 
                        function(data) {
                            $("#formResponse").html(data).fadeIn('100'); //Place echo in div
                            //Modify HTML & CSS here
                            $('#name, #email, #comments').val(''); //Clear the inputs - I don't understand this line
                        }, 
                        'text'
                    );
                }

                //Prevent event from bubbling
                e.preventDefault();
                e.stopPropagation();

                return false;
            }); 
```

JavaScript 验证函数：

```
 $(document).ready(function() {
            function validateForm() {
                var validName = false;
                var validEmail = false;
                var validSubject = false;
                var validComments = false;

                //Perform validation here...

if (validName && validEmail && validSubject && validComments) {
return true;
} else {
return false;
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T16:39:17.530

只是一种替代解决方案。您可以在 input[type=image] 的点击事件中提交触发表单提交。我还没有检查它，但希望它有效！

```
$('input[type=image]').click(function(e){
           e.preventDefault();
           $('#form').submit();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:14:32.560

删除 html 表单标签上的“action='sendemail.php'”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:28:14.487

您应该将您的 javascript 包装在一个准备好的事件处理程序中，如下所示：

```
$(document).ready(function() {
    // Your javascript here...
}); 
```

# sql - 如果不存在如何创建序列

> ID：13752885
> 
> 赞同：35
> 
> 时间：2012-12-06T21:24:53.420
> 
> 标签：sql, postgresql, database-design, plpgsql, postgresql-9.2

我尝试使用[Check if sequence exists in Postgres (plpgsql) 中的](https://stackoverflow.com/questions/11905868/check-if-sequence-exists-postgres-plpgsql)代码。

如果序列不存在，则创建序列。运行此代码两次会导致异常：

> 序列...已经存在。

仅当序列不存在时如何创建序列？

如果序列不存在，则不应写入任何消息并且不应发生错误，因此我无法在此问题的另一个答案中使用存储过程，因为如果序列存在，它每次都会将消息写入日志文件。

```
do $$
begin

SET search_path = '';
IF not EXISTS (SELECT * FROM pg_class
             WHERE relkind = 'S'
               AND oid::regclass::text = 'firma1.' || quote_ident('myseq'))
  THEN

SET search_path = firma1,public;

create sequence myseq;

END IF;

SET search_path = firma1,public;

end$$;

select nextval('myseq')::int as nr; 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-06T22:42:12.297

### Postgres 9.5 或更高版本

[`IF NOT EXISTS``CREATE SEQUENCE`](https://www.postgresql.org/docs/current/sql-createsequence.html)在 Postgres 9.5[中添加。](https://www.postgresql.org/docs/current/sql-createsequence.html)这就是现在的简单解决方案：

```
CREATE SEQUENCE IF NOT EXISTS myschema.myseq; 
```

但是无论如何都要考虑过时答案的细节......
你知道`serial`或`IDENTITY`列，对吧？

*   [自动递增表列](https://stackoverflow.com/questions/9875223/auto-increment-sql-function/9875517#9875517)

### Postgres 9.4 或更高版本

序列与其他几个类似表的对象共享名称空间。[手册：](https://www.postgresql.org/docs/current/sql-createsequence.html)

> 序列名称必须 与同一架构中的任何其他**序列、表、索引、视图或外部表的名称不同。**

大胆强调我的。所以分三种情况：

1.  名称不存在。*-> 创建序列。*
2.  存在同名序列。*-> 什么都不做？有输出吗？任何日志记录？*
3.  存在其他具有相同名称的冲突对象。 *-> 做点什么？有输出吗？任何日志记录？*

指定在任何一种情况下要做什么。`DO`语句可能如下所示：

```
DO
$do$
DECLARE
   _kind "char";
BEGIN
   SELECT relkind
   FROM   pg_class
   WHERE  oid = 'myschema.myseq'::regclass  -- sequence name, optionally schema-qualified
   INTO  _kind;

   IF NOT FOUND THEN       -- name is free
      CREATE SEQUENCE myschema.myseq;
   ELSIF _kind = 'S' THEN  -- sequence exists
      -- do nothing?
   ELSE                    -- object name exists for different kind
      -- do something!
   END IF;
END
$do$; 
```

[根据手册中的对象类型（`relkind`）`pg_class`](https://www.postgresql.org/docs/current/catalog-pg-class.html)：

> r = 普通表
> i = 索引
> S = 序列
> v = 视图
> m = 物化视图
> c = 复合类型
> t = TOAST 表
> f = 外部表

有关的：

*   [如何检查给定模式中是否存在表](https://stackoverflow.com/questions/20582500/how-to-check-if-a-table-exists-in-a-given-schema/24089729#24089729)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-05T02:21:57.380

我走了一条不同的路线：只捕获异常：

```
DO
$$
BEGIN
        CREATE SEQUENCE myseq;
EXCEPTION WHEN duplicate_table THEN
        -- do nothing, it's already there
END
$$ LANGUAGE plpgsql; 
```

这样做的一个好处是您不必担心当前的模式是什么。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-15T19:59:40.670

如果您不需要保留可能存在的序列，您可以删除它然后重新创建它：

```
DROP SEQUENCE IF EXISTS id_seq;
CREATE SEQUENCE id_seq; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-19T03:44:48.533

Postgres 没有，`CREATE SEQUENCE IF NOT EXISTS`并且如果表具有使用该序列的默认值，如果您只是删除该序列，您可能会收到错误：

> 错误：无法删除序列（sequence_name），因为其他对象依赖于它 SQL 状态：2BP01

对我来说，这个可以帮助：

```
ALTER TABLE <tablename> ALTER COLUMN id DROP DEFAULT;
DROP SEQUENCE IF EXISTS <sequence_name>;
CREATE sequence <sequence_name>; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T14:53:45.940

我有一个功能可以随时清理我的数据库应用程序中的所有表。它是动态构建的，但本质是删除每个表中的所有数据并重置序列。这是重置其中一个表的顺序的代码：

```
perform relname from pg_statio_all_sequences where relname = 'privileges_id_seq';
if found then
  select setval ('privileges_id_seq',1, false) into i_result;
end if; 
```

希望这可以帮助，

洛克

我用的是postgres 8.4，我看到你用的是9.2。可能会改变信息的存储位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T21:36:57.690

有关序列的信息可以从`information_schema.sequences`（[参考](http://www.postgresql.org/docs/9.2/interactive/infoschema-sequences.html)）检索

尝试这样的事情（未经测试）：

```
...
IF not EXISTS (SELECT * FROM information_schema.sequences
    WHERE sequence_schema = 'firma1' AND sequence_name = 'myseq') THEN
... 
```

# solr - Solr - 不返回完整的行

> ID：13752889
> 
> 赞同：2
> 
> 时间：2012-12-06T21:25:03.957
> 
> 标签：solr

我自己是 Solr 的新手。

我有以下两个问题：-

1.  我使用 Tomcat 6 和 Oracle 10g 作为数据库。索尔 4 . 当我在 tomcat 中部署 solr.war 时，在 tomcat 控制台中出现异常，找不到 dataimporthanler 类。我在我的 solr home 中指定了 solr home 和一个包含所有 jar 的 lib 目录。仍然为什么 solr war 期望将 jars 放在 solr.war lib 文件夹中？

2.  我已经用完全导入索引了实体。我在 Oracle 中有一个简单的数据库表。典型的 emp_id、emp_name、emp_dept。我已经定义了 data-config.xml，目前只有一个文档和实体。我已经相应地更新了 schema.xml。当我执行 /select 查询时。我在 xml/json 输出中只得到 emp_id。如何在回复中说出我想要的字段？

3.  我在数据库中有 2222222 行，我只有 10 行，如果我编辑配置 xml，那么只有我得到指定的行。我的数据库表可以增长，我如何获得完整的行？问题是，我不能说不需要行，这是没有意义的，因为随着事务的发生，行会不断增加。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:14:03.587

1.检查Solr Home中的lib目录是否**包含**文件。还要检查文件是否正确配置了 lib 目录。`apache-solr-dataimporthandler-x.y.z.jar``apache-solr-dataimporthandler-extras-x.y.z.jar``solrconfig.xml`

2.在文件中的字段定义中添加stored [=true 。](http://wiki.apache.org/solr/SchemaXml#Data_Types)`schema.xml`如果您不设置**stored=true**那么您的字段将不会显示在输出中。如果要返回某些字段，则可以使用[fl=fieldName](http://wiki.apache.org/solr/CommonQueryParameters#fl)查询选项。

3.当您设置**rows**参数时，它将返回那么多结果，但您也可以在结果中找到一个**numFound**字段，该字段显示通过给定查询找到的总行数。

# ruby-on-rails-3 - rails 按字段排序并从中间获取 10 个项目

> ID：13752893
> 
> 赞同：0
> 
> 时间：2012-12-06T21:25:35.557
> 
> 标签：ruby-on-rails-3

我已经建立了一个页面，以 desc 顺序显示评级列表。我想一次只显示 10 个项目。我如何只选择，比如有序数组中的 11-20 行。是否可以在查询本身中处理这个问题，还是我必须获取整个表格并筛选相关项目？

```
@pics = Rating.order('rating desc').limit(10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:28:08.620

在这种特定情况下，`.offset(10)`请在您当前的查询中使用。

一般来说，在谷歌上或在 SO 上搜索“rails pagination”。

# asp.net-mvc - Kendo UI ASP.Net 饼图分解部分

> ID：13752897
> 
> 赞同：0
> 
> 时间：2012-12-06T21:25:47.767
> 
> 标签：asp.net-mvc, vb.net, kendo-ui

我正在寻找带有分解部分的饼图的 C# 或 VB Razor 语法示例。我没有绑定单个字段，我使用的是...

```
.Series(Sub(series)
      series.Pie(Function(model) model.Id, Function(model) model.PriorityName).Overlay(ChartPieSeriesOverlay.None)
End Sub) _ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:12:18.507

通过 Telerik 的支持演示和支持，我已经解决了这个问题。希望有一天这对某人有所帮助。我向我的 ViewModel 添加了另一个参数，如果我希望图表的部分爆炸，它只传递一个布尔值。然后我将它作为 Model.Explosion 传递到下面的代码中。

```
 @(Html.Kendo().Chart(Of Core.UI.PieChartViewModel) _
        .Name("Chart_OpenItemsByPM") _
        .ChartArea(Function(c) c.Background("#fff")) _
        .HtmlAttributes(New With {.Style = "height:280px;width:90%;margin:0px auto;"}) _
        .Legend(Function(legend) legend.Position(ChartLegendPosition.Bottom)) _
        .DataSource(Function(ds) ds.Read(Function(r) r.Action("Chart_OpenItemsByPM", "Dashboard"))) _
        .Series(Sub(series)
                        series.Pie(Function(model) model.Id, Function(model) model.Priority

Name, Nothing, Function(model) model.Explosion).Overlay(ChartPieSeriesOverlay.None)
                    End Sub) _
            .SeriesColors("#c72e15", "#c78215", "#c7c115", "#156dc7") _
            .Tooltip(Function(tooltip) tooltip.Visible(True).Format("{0} Tickets"))
        ) 
```

# android - 未从回调 url 接收任何数据。我在Android中哪里出错了？

> ID：13752900
> 
> 赞同：0
> 
> 时间：2012-12-06T21:26:02.920
> 
> 标签：android

这是我的网址帖子：

```
 String urlParameters = "&consumer_key="+AppSession.getPocketConsumerKey()+"&client_secret="+AppSession.getPocketRedirectUri();
    String request = "https://getpocket.com/v3/oauth/request";
    URL url;
    try {

        url = new URL(request);
        HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();           
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setInstanceFollowRedirects(false); 
        connection.setRequestMethod("POST"); 
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
        connection.setRequestProperty("charset", "utf-8");
        connection.setRequestProperty("X-Accept","application/x-www-form-urlencoded");
        connection.setUseCaches (false);

        connection.connect();
        DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
        wr.writeBytes(urlParameters);
        Log.d("urlparmas",urlParameters);
        wr.flush();
        wr.close();

        InputStream is = connection.getInputStream();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line;
        StringBuffer response = new StringBuffer(); 
        while((line = rd.readLine()) != null) {
          response.append(line);
          response.append('\r');
        }
        rd.close();
        Log.d( "response",response.toString());

      } catch (Exception e) {

        e.printStackTrace();

      } 
```

我的重定向 Uri：MyApp://callback

```
<activity android:name="com.app.account.Register" android:launchMode="singleTask">
                <intent-filter>

     <action android:name="android.intent.action.VIEW" />
     <category android:name="android.intent.category.DEFAULT" />
     <category android:name="android.intent.category.BROWSABLE" />
     <data android:scheme="MyApp" android:host="callback"/>

                    </intent-filter>
            </activity> 
```

所以，我只是没有从回调 ​​url 得到任何回复。想知道我在代码中哪里出错了。

编辑：

```
InputStream is = connection.getInputStream();
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            String line;
            StringBuffer response = new StringBuffer(); 
            while((line = rd.readLine()) != null) {
              response.append(line);
              response.append('\r');
            }
            rd.close();
            Log.d( "response",response.toString()); 
```

这会产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:36:03.513

您可能需要设置请求类型，并指定您需要输入流。在尝试使用输入流之前，您还应该检查请求的响应代码。

您在下面发布的异常表明您的服务器使用自定义 ssl 证书导致出现问题。您可能需要创建 HttpsURLConnection 可以使用的本地 ssl 信任存储。[这篇博客文章](http://nelenkov.blogspot.com.au/2011/12/using-custom-certificate-trust-store-on.html)介绍了一些关于如何做到这一点的技术，一旦你完成了，你就可以从你的连接中使用它

就像是

```
HttpsURLConnection yc = (HttpsURLConnection)pocketUrl.openConnection();
yc.setDoInput(true);
yc.setRequestMethod("GET");
yc.setSSLSocketFactory(sslContext.getSocketFactory());
if (urlConnection.getResponseCode() != 200) {
    // handle error here
    final String responseMessage = yc.getResponseMessage();
    Log.e(TAG, "Failed Response: " + responseMessage);
    return;
}

BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream())); 
```

# c# - 无法确定表达式错误的序列化信息

> ID：13752901
> 
> 赞同：9
> 
> 时间：2012-12-06T21:26:07.220
> 
> 标签：c#, linq, mongodb

`Unable to determine the serialization information for the expression: (PlaceManager pm) => pm.FreePlaces.get_Item(index)`尝试从数据库（Mongo DB）中删除值时出现错误。

这是我的代码：

```
var result = _placeManager.Update(Query.EQ("_id", 0),
                             Update<PlaceManager>.Pull(pm => pm.FreePlaces[index], placeId)); 
```

这是`PlaceManager`课程：

```
public class PlaceManager
{
    [BsonId]
    public int Id { get; set; }

    public int CurrentSize { get; set; }
    public Dictionary<int, List<int>> FreePlaces { get; set; }

} 
```

# c# - 如何使用带有 EO PDF 的多列 HTML 布局管理分页符？

> ID：13752902
> 
> 赞同：0
> 
> 时间：2012-12-06T21:26:20.673
> 
> 标签：c#, html, pdf, pagination, multiple-columns

我有一个使用两列的简单 HTML 布局。示例标记（仅在 Chrome 中正确显示，可在[http://jsfiddle.net/MJzZE/](http://jsfiddle.net/MJzZE/)查看）：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

    <head>

        <meta charset="utf-8" />

        <title></title>

        <style type="text/css">

            *
            {
                margin: 0px;
                padding: 0px;
            }

            html
            {
                font-family: 'Open Sans';
                width: 8.5in;
                margin: 0px auto;
                background-color: #eee;
            }

            body
            {
                padding: 25px;
                background-color: #fff;
            }

            h1
            {
                color: red;
                border-top: solid 22px red;
                text-transform: uppercase;
                font-weight: bold;
                font-size: 38px;

            }

            h2
            {
                color: red;
                border-top: solid 6px red;
                font-size: 21px;
                text-transform: uppercase;
                font-weight: bold;
            }

            h2:first-child
            {
                font-size: 25px;
            }

            p
            {
                margin-bottom: 20px;
                font-size: 13px;
                line-height: 21px;
            }

            .content
            {
                -webkit-column-count: 2;
                column-count: 2;
                -webkit-column-gap: 30px;
                column-gap: 30px;
                clear: both;
            }

            .image
            {
                background-color: #444; 
                text-align: center;
                color: #fff;
                text-transform: uppercase;
                font-size: 30px;
            }

            .logo.image
            {
                float: right; 
                width: 300px; 
                height: 105px; 
                line-height: 105px;
                margin-top: -40px; 
                margin-bottom: 20px;
            }

            .inline.image
            {
                height: 300px; 
                line-height: 300px;
                display: inline-block; 
                width: 100%;
                margin-bottom: 20px;
            }

        </style>

    </head>

    <body>

        <h1>Title</h1>

        <div class="logo image">Logo</div>

        <div class="content">

            <h2>Introduction & Context</h2>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut
                non dui neque. Aliquam tortor libero, accumsan quis viverra
                egestas, consectetur at augue. Pellentesque metus erat,
                tincidunt aliquam tincidunt et, dapibus eget nisl. Vivamus sit
                amet ultricies arcu. In hac habitasse platea dictumst. Pellentesque
                non porta leo. non bibendum nisi. Lorem ipsum
                dolor sit amet, consectetur adipiscing elit. Ut non dui neque.
                Aliquam tortor libero, accumsan quis viverra egestas, consectetur
                at augue. Pellentesque metus erat, tincidunt aliquam
                tincidunt et, dapibus eget nisl. Vivamus sit amet ultricies arcu.
                In hac habitasse platea dictumst. Pellentesque non porta leo.
                non bibendum nisi.
            </p>

            <p>
                Pellentesque non porta leo. non bibendum nis, consectetur
                adipiscing elit. Ut non dui neque. Aliquam tortor libero, accumsan
                quis viverra egestas, consectetur at augue. Pellentesque
                metus erat, tincidunt aliquam tincidunt et, dapibus
                eget nisl. Vivamus sit amet ultricies arcu. In hac habitasse
                platea dictumst. Pellentesque non porta leo. non bibendum
                nisi. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Ut non dui neque. Aliquam tortor libero, accumsan quis viverra
                egestas, consectetur at augue. Pellentesque metus erat,
                tincidunt aliquam tincidunt et, dapibus eget nisl. Vivamus sit
                amet ultricies arcu. In hac habitasse platea dictumst.
            </p>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut
                non dui neque. Aliquam tortor libero, accumsan quis viverra
                egestas, consectetur at augue. Pellentesque metus erat,
                tincidunt aliquam tincidunt et, dapibus eget nisl. Vivamus sit
                amet ultricies arcu. In hac habitasse platea dictumst. Pellentesque
                non porta leo. non bibendum nisi. Lorem ipsum
                dolor sit amet, consectetur adipiscing elit. Ut non dui neque.
                Aliquam tortor libero, accumsan quis viverra egestas, consectetur
                at augue. Pellentesque metus erat, tincidunt aliquam
                tincidunt et, dapibus eget nisl. Vivamus sit amet ultricies arcu.
                In hac habitasse platea dictumst. Pellentesque non porta leo.
                non bibendum nisi.
            </p>

            <h2>The Problem</h2>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut non
                dui neque. Aliquam tortor libero, accumsan quis viverra egestas,
                consectetur at augue. Nullam a risus non tellus ultrices placerat ut
                ultrices lectus. Nam gravida venenatis ipsum eu malesuada. Fusce
                lobortis odio id mi eleifend consequat sit amet id felis. Pellentesque
                tempor pharetra odio quis interdum. Curabitur eleifend dolor at turpis
                lobortis porta. Nullam a risus non tellus ultrices placerat ut ultrices
                lectus. Nam gravida venenatis ipsum eu malesuada. Etiam quis
                aliquam lacus. In libero neque, fermentum quis laoreet in, fringilla vel
                ipsum. Donec ut augue quis neque aliquet venenatis vitae et dui.
            </p>

            <img class="inline image" />

            <p>
                Pellentesque tempor pharetra odio quis interdum. Curabitur eleifend
                dolor at turpis lobortis porta. Nullam a risus non tellus ultrices placerat
                ut ultrices lectus. Nam gravida venenatis ipsum eu malesuada.
                Etiam quis aliquam lacus. In libero neque, fermentum quis laoreet
                in, fringilla vel ipsum. Donec ut augue quis neque aliquet venenatis
                vitae et dui. Fusce lobortis odio id mi eleifend consequat sit amet id
                felis. Proin pharetra semper tincidunt. Lorem ipsum dolor sit amet,
                consectetur adipiscing elit. Ut non dui neque. Aliquam tortor libero,
                accumsan quis viverra egestas, consectetur at augue.
            </p>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut non
                dui neque. Aliquam tortor libero, accumsan quis viverra egestas,
                consectetur at augue. Nullam a risus non tellus ultrices placerat ut
                ultrices lectus. Nam gravida venenatis ipsum eu malesuada. Fusce
                lobortis odio id mi eleifend consequat sit amet id felis. Pellentesque
                tempor pharetra odio quis interdum. Curabitur eleifend dolor at turpis
                lobortis porta. Nullam a risus non tellus ultrices placerat ut ultrices
                lectus. Nam gravida venenatis ipsum eu malesuada. Etiam quis
                aliquam lacus. In libero neque, fermentum quis laoreet in, fringilla vel
                ipsum. Donec ut augue quis neque aliquet venenatis vitae et dui.
            </p>

            <p>
                Pellentesque tempor pharetra odio quis interdum. Curabitur eleifend
                dolor at turpis lobortis porta. Nullam a risus non tellus ultrices placerat
                ut ultrices lectus. Nam gravida venenatis ipsum eu malesuada.
                Etiam quis aliquam lacus. In libero neque, fermentum quis laoreet
                in, fringilla vel ipsum. Donec ut augue quis neque aliquet venenatis
                vitae et dui. Fusce lobortis odio id mi eleifend consequat sit amet id
                felis. Proin pharetra semper tincidunt. Lorem ipsum dolor sit amet.
            </p>

            <h2>Solution Selected</h2>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut non
                dui neque. Aliquam tortor libero, accumsan quis viverra egestas,
                consectetur at augue. Nullam a risus non tellus ultrices placerat ut
                ultrices lectus. Nam gravida venenatis ipsum eu malesuada. Fusce
                lobortis odio id mi eleifend consequat sit amet id felis. Pellentesque
                tempor pharetra odio quis interdum. Curabitur eleifend dolor at turpis
                lobortis porta. Nullam a risus non tellus ultrices placerat ut ultrices
                lectus. Nam gravida venenatis ipsum eu malesuada. Etiam quis
                aliquam lacus. In libero neque, fermentum quis laoreet in, fringilla vel
                ipsum. Donec ut augue quis neque aliquet venenatis vitae et dui.
            </p>

            <img class="inline image" />

            <p>
                Pellentesque tempor pharetra odio quis interdum. Curabitur eleifend
                dolor at turpis lobortis porta. Nullam a risus non tellus ultrices placerat
                ut ultrices lectus. Nam gravida venenatis ipsum eu malesuada.
                Etiam quis aliquam lacus. In libero neque, fermentum quis laoreet
                in, fringilla vel ipsum. Donec ut augue quis neque aliquet venenatis
                vitae et dui. Fusce lobortis odio id mi eleifend consequat sit amet id
                felis. Proin pharetra semper tincidunt. Lorem ipsum dolor sit amet,
                consectetur adipiscing elit. Ut non dui neque. Aliquam tortor libero,
                accumsan quis viverra egestas, consectetur at augue.
            </p>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut non
                dui neque. Aliquam tortor libero, accumsan quis viverra egestas,
                consectetur at augue. Nullam a risus non tellus ultrices placerat ut
                ultrices lectus. Nam gravida venenatis ipsum eu malesuada. Fusce
                lobortis odio id mi eleifend consequat sit amet id felis. Pellentesque
                tempor pharetra odio quis interdum. Curabitur eleifend dolor at turpis
                lobortis porta. Nullam a risus non tellus ultrices placerat ut ultrices
                lectus. Nam gravida venenatis ipsum eu malesuada. Etiam quis
                aliquam lacus. In libero neque, fermentum quis laoreet in, fringilla vel
                ipsum. Donec ut augue quis neque aliquet venenatis vitae et dui.
            </p>

            <p>
                Pellentesque tempor pharetra odio quis interdum. Curabitur eleifend
                dolor at turpis lobortis porta. Nullam a risus non tellus ultrices placerat
                ut ultrices lectus. Nam gravida venenatis ipsum eu malesuada.
                Etiam quis aliquam lacus. In libero neque, fermentum quis laoreet
                in, fringilla vel ipsum. Donec ut augue quis neque aliquet venenatis
                vitae et dui. Fusce lobortis odio id mi eleifend consequat sit amet id
                felis. Proin pharetra semper tincidunt. Lorem ipsum dolor sit amet.
            </p>

            <h2>Desired Outcome</h2>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut
                non dui neque. Aliquam tortor libero, accumsan quis viverra
                egestas, consectetur at augue. Pellentesque metus erat,
                tincidunt aliquam tincidunt et, dapibus eget nisl. Vivamus sit
                amet ultricies arcu. In hac habitasse platea dictumst. Pellentesque
                non porta leo. non bibendum nisi. Lorem ipsum
                dolor sit amet, consectetur adipiscing elit. Ut non dui neque.
                Aliquam tortor libero, accumsan quis viverra egestas, consectetur
                at augue. Pellentesque metus erat, tincidunt aliquam
                tincidunt et, dapibus eget nisl. Vivamus sit amet ultricies arcu.
                In hac habitasse platea dictumst. Pellentesque non porta leo.
                non bibendum nisi.
            </p>

            <p>
                Pellentesque non porta leo. non bibendum nis, consectetur
                adipiscing elit. Ut non dui neque. Aliquam tortor libero, accumsan
                quis viverra egestas, consectetur at augue. Pellentesque
                metus erat, tincidunt aliquam tincidunt et, dapibus
                eget nisl. Vivamus sit amet ultricies arcu. In hac habitasse
                platea dictumst. Pellentesque non porta leo. non bibendum
                nisi. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Ut non dui neque. Aliquam tortor libero, accumsan quis viverra
                egestas, consectetur at augue. Pellentesque metus erat,
                tincidunt aliquam tincidunt et, dapibus eget nisl. Vivamus sit
                amet ultricies arcu. In hac habitasse platea dictumst.
            </p>

        </div>

    </body>

</html> 
```

我需要在 C# Web 应用程序的服务器上将此 HTML 转换为 PDF。目前我正在尝试使用 Essential Objects PDF 组件，但我愿意考虑任何能够满足我需求的 .NET API。

此布局将代表 5 - 7 页的报告，因此必须有分页符。

直观地说，用户希望内容首先填充第 1 页的两列，然后是第 2 页的两列，依此类推。因此，第 2 页的第 1 列应该从第 1 页的第 2 列溢出开始。

但是 EO PDF 似乎只是制作了两个非常高的列（就像浏览器一样），然后在页面边界处对它们进行切片。效果是第 1 列的内容延伸到第 2 页，然后再回到第 1 页的第 2 列。

列的内容是用户提供的标记，因此在运行时会有所不同，不容易拆分，而且我不知道它最终会在页面上多大——所以我不知道我在哪里会放置手动分页符。

如果碰巧跨越页面边界，EO PDF 还会将诸如图像之类的元素一分为二。

两种效果都可以在[http://screencast.com/t/ojIPeamht看到](http://screencast.com/t/ojIPeamht)

这些问题似乎使 EO 无法跨页面进行多列布局。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:44:12.223

根据与 Essential Objects 支持的官方通信，实际上并不支持跨多个页面的 HTML 列，因为它们不能很好地指定。

相反，我能够使用 HtmlToPdf.Options.ColumnCount 和 HtmlToPdf.Options.ColumnGapWidth 选项以及多个绘图通道来完成工作。

# javascript - 使用 JavaScript 对 HTML 属性进行排序

> ID：13752904
> 
> 赞同：5
> 
> 时间：2012-12-06T21:26:24.393
> 
> 标签：javascript, html, regex

如何使用 JavaScript 对 HTML 属性进行排序？

我有这个 HTML：

```
<table>
    <tbody>
        <tr>
            <td>Cell 0,0</td>
            <td>Cell 1,0</td>
            <td>Cell 2,0</td>
        </tr>
        <tr>
            <td>Cell 0,1</td>
            <td rowspan="2" colspan="2">Cell 1,1
                <br>Cell 2,1
                <br>Cell 1,2
                <br>Cell 2,2</td>
        </tr>
        <tr>
            <td>Cell 0,2</td>
        </tr>
    </tbody>
</table> 
```

我想将所有元素中的所有属性按字母顺序排序。例如：

```
<td colspan="2" rowspan="2">Cell 1,1 
```

排序函数可以基于 HTML 字符串、jQuery 对象或节点（无论哪一个都没有关系）。

我需要这个的原因是因为我在 2 组 HTML 之间进行了差异（使用 JS，在浏览器中，在单元测试失败后），并且属性顺序使其失败。

所以我的问题是：

如何重新排序节点属性？或者如何重新排序 HTML 字符串中的属性？或者如何重新排序 jQuery 元素属性？

我还没有任何代码，因为我不确定哪种方法是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:50:01.260

不知道为什么需要使用 javascript 来执行此操作，但它很感兴趣。好的，根据[规范](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1780488922)：

> 实现 NamedNodeMap 接口的对象用于表示可以按名称访问的节点集合。注意 NamedNodeMap 不是从 NodeList 继承的；NamedNodeMaps 不以任何特定顺序维护。包含在实现 NamedNodeMap 的对象中的对象也可以通过序号索引访问，但这只是为了方便枚举 NamedNodeMap 的内容，并不意味着 DOM 指定了这些节点的顺序。

因此，您可以通过更改数字索引来订购，一段时间后，[我](http://jsbin.com/axocel/8/edit)的尝试在 Chrome 中运行流畅。

```
(function(){
  var xpath = '//table/tbody/tr[2]/td[2]',
      attrs = document.evaluate(xpath, document, null, XPathResult.ANY_TYPE, null),
      serializer = new XMLSerializer(),

      el = attrs.iterateNext(),
      act = el.attributes,

      i = act.length,
      _l = i,
      _nodeArr = [],
      _nodeArrKeys = [],
      name;

  console.log(serializer.serializeToString(el));

  for (i ;i--;) {
    name = act[i].nodeName;
    _nodeArr[name] = (act.removeNamedItem(name));
    _nodeArrKeys[i] = name;
  }

  _nodeArrKeys = _nodeArrKeys.sort();
  i++;

  for (i;_l>i;i++) {
    act.setNamedItem(_nodeArr[_nodeArrKeys[i]]);
  }

  console.log(serializer.serializeToString(el));
})(); 
```

控制台日志输出

```
<td zataa="123" bbbrowspan="2" cccattr="val" aaacolspan="2">Cell 1,1
                    <br>Cell 2,1
                    <br>Cell 1,2
                    <br>Cell 2,2</td>

<td aaacolspan="2" bbbrowspan="2" cccattr="val" zataa="123">Cell 1,1
                    <br>Cell 2,1
                    <br>Cell 1,2
                    <br>Cell 2,2</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:34:39.040

如果你真的必须...试试这个[小提琴](http://jsfiddle.net/anderslyman/MAudc/)。
我不得不说，我*真的很*好奇你为什么要这样做。

代码：

```
var elements = document.getElementsByTagName("*");
sortAttributes(elements);

//From: http://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects
function sortBy(field, reverse, primer) {
    var key = function(x) {
        return primer ? primer(x[field]) : x[field];
    };

    return function(a, b) {
        var A = key(a),
            B = key(b);
        return ((A < B) ? -1 : (A > B) ? +1 : 0) * [-1, 1][+ !! reverse];
    }
};

function sortAttributes(elements) {
    for (var j = 0; j < elements.length; j++) {
        var attributes = [];
        for (var i = 0; i < elements[j].attributes.length; i++) {
            attributes.push({
                'name': elements[j].attributes[i].name,
                'value': elements[j].attributes[i].value
            });
        }

        var sortedAttributes = attributes.sort(sortBy('name', true, function(a) {
            return a.toUpperCase();
        }));

        for (var i = 0; i < sortedAttributes.length; i++) {
            $(elements[j]).removeAttr(sortedAttributes[i]['name']);
        }

        for (var i = 0; i < sortedAttributes.length; i++) {
            $(elements[j]).attr(sortedAttributes[i]['name'], sortedAttributes[i]['value']);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:42:01.030

只需使用[Prettydiff](http://prettydiff.com/?m=beautify&l=html)。它会在美化您的 HTML 时按字母顺序对属性进行排序。它是用 JavaScript 编写的。

# heroku - 在 heroku 上管理多个 ssh 密钥

> ID：13752908
> 
> 赞同：4
> 
> 时间：2012-12-06T21:26:41.477
> 
> 标签：heroku, ssh

所以我有几个用于我拥有的其他帐户的 ssh 密钥。我现在需要能够在我的计算机上克隆一个 heroku 存储库。我创建了一个新的 ssh 密钥并使用 heroku keys:add 将其添加到我的 heroku 帐户。但是，当我尝试克隆存储库时，出现此错误： `Your key with fingerprint: .... is not authorized to access rural-visions. fatal: the remote end hung up unexpectedly`

我听说我需要在 .ssh 文件夹中创建一个配置文件，但我不知道该放什么。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T10:14:44.750

我有时不得不使用一堆heroku帐户，并且遇到了这个问题。这是我通常做的：

*   清晰的身份

    ```
    $ ssh-add -D 
    ```

*   *ssh-添加*当前帐户所需的密钥

    ```
    $ ssh-add ~/.ssh/an_account_key 
    ```

*   现在我可以推送到我的 heroku 应用程序

    ```
    $ git push heroku-remote master 
    ```

当然，这假设密钥已经添加到 heroku 帐户。你可以这样做：

```
$ heroku keys:add 
```

解决这个问题的正确方法是在*~/.ssh/config*中使用 SSH 配置，但这对我来说有点多，因为我只是偶尔切换帐户。

谷歌搜索 SSH 配置文件应该会得到很多结果，但这里有一些可能会有所帮助：

*   [SSH 配置 - 相同的主机但不同的密钥和用户名](https://superuser.com/questions/366649/ssh-config-same-host-but-different-keys-and-usernames)
*   [为给定域的 git push 指定 SSH 密钥](https://stackoverflow.com/questions/7927750/specify-an-ssh-key-for-git-push-without-using-ssh-config)
*   [使用 SSH 配置文件简化您的生活](http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/)

# c# - 带有前缀单词的 C# 字母排列

> ID：13752912
> 
> 赞同：-2
> 
> 时间：2012-12-06T21:27:10.160
> 
> 标签：c#, word, permutation

如何用前缀词排列 2 个字母？

像这样：

NAMEaa NAMEab NAMEac NAMEad NAMEae NAMEaf ... ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:34:08.940

```
for (char c1 = 'a'; c1 <= 'z'; c1++)
{
    for (char c2 = 'a'; c2 <= 'z'; c2++)
    {
        Console.WriteLine("NAME" + c1 + c2);
    }
} 
```

顺便说一句，那些不是[排列](http://en.wikipedia.org/wiki/Permutation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:32:54.850

您可以使用 LINQ 轻松获得所需的结果：

```
string prefix = "NAME";
string alphabet = "abcdefghijklmnopqrstuvwxyz";

IEnumerable<string> words = from x in alphabet
                            from y in alphabet
                            select prefix + x + y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:30:48.753

创建一个包含所有字母的数组并循环遍历它的索引两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T21:33:21.783

那不是排列，那是组合。

将您想要的字符放入字符串中：

```
string chars = "abcdefghijklmnopqrstuvwxyz"; 
```

可能的组合数量为：

```
int combinations = chars.Length * chars.Length; 
```

要获得特定组合（0 到组合-1）：

```
string str =
  "NAME" +
  chars.Substring(combination / chars.Length, 1) +
  chars.Substring(combination % chars.Length, 1); 
```

要获得所有组合，您只需遍历它们：

```
string chars = "abcdefghijklmnopqrstuvwxyz";
int combinations = chars.Length * chars.Length;
List<string> result = new List<string>();
for (int i = 0; i < combinations; i++) {
  result.Add(
    "NAME" +
    chars.Substring(combination / chars.Length, 1) +
    chars.Substring(combination % chars.Length, 1);
  );
} 
```

# ruby-on-rails-3 - Rails 从请求中获取单个值

> ID：13752913
> 
> 赞同：0
> 
> 时间：2012-12-06T21:27:14.097
> 
> 标签：ruby-on-rails-3, params, actioncontroller

在 Rails 中，Controller 中的 create 方法默认接收具有不同值的 HTTP 请求。默认情况下，新记录的创建方式如下：

```
@apo = Apo.new(params[:apo]) 
```

但是我怎样才能从这个参数哈希中访问单个值呢？

我想创建这样的东西：

```
@apo = Apo.new do |a|
        a.name = $someVariable
        a.value = $anotherVariable
        a.quantity = -> here i want to have one value which is in params[:apo]
        end 
```

你明白我在找什么吗？尝试了数百万种可能性，但它不起作用。

或者，是否有可能在视图中创建第二个参数哈希，它只保存这个值？

PS我不想使用JavaScript来做这个......

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:41:34.447

`params`是特殊的，由 Rails 为每个 HTTP 请求设置。它是表单中的哈希

```
{ :object => { :attrib1 => "value1", :attrib2 => "value2" ... }} 
```

所以你可以引用整个对象

```
params[:foo] 
```

以及单个属性（字段），例如

```
params[:foo][:bar] 
```

可以通过传递值的哈希值在一次调用中创建 ActiveRecord 模型，如您的第一个示例中所示。但是还有许多其他方法可以创建实例。你可以

```
def make_apo(some_value, another_value)
  apo = Apo.new
  apo.name = some_value
  apo.value = another_value
end 
```

这样的方法将返回 Apo 的一个实例。在您的情况下，如果您在 中有一些值`params`，请将上面的内容更改为接受`params`作为另一个参数，或者在调用时传递特定值。

```
def make_apo(some_value, another_value, quantity, passed_params)
  apo = Apo.new
  apo.name = some_value
  apo.value = another_value
  apo.quantity = passed_params[:apo][:quantity]
end 
```

但这都是一种非常不寻常的处理方式。所以不要只是这样做——更多的是解释正在发生的事情，而不是建议你这样做。

# iphone - 时事通讯：iPhone 客户端的图像大小

> ID：13752914
> 
> 赞同：1
> 
> 时间：2012-12-06T21:27:16.540
> 
> 标签：iphone, newsletter

当我发送包含超过 100kB 图像的时事通讯时，iPhone 邮件客户端只显示纯文本和图像，如 mime-attachment。只有当我点击下载完整消息按钮时，通讯才会显示为 HTML。

但我在其他时事通讯中没有看到这种行为。

是什么决定了何时显示图像或仅显示纯文本？

谢谢

# jquery - 试图向右滑动 ap 标签类

> ID：13752916
> 
> 赞同：0
> 
> 时间：2012-12-06T21:27:17.490
> 
> 标签：jquery, anchor, slide

我有以下不适合我的代码，我正在尝试将 ap 标签向左滑动，并在点击功能上显示动画

**jQuery**

```
$(document).ready(function(){
    $('.portfolio').click(function(){

     $('#rightcontent1').animate({width: '783px', height: '579px'}, 200);
     $('.homeText').hide("slide", { direction: "up" }, 1000);
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:07:37.540

hide() 语法不同，但在 animate()

你的功能：

```
 $('.homeText').hide("slide", { direction: "up" }, 1000); 
```

不起作用，因为您的 hide() 语法不正确。函数应该重写：

```
 $('.homeText').slideUp(1000); 
```

有关隐藏语法的更多信息，请参阅[http://api.jquery.com/hide/](http://api.jquery.com/hide/)。

# vim - 屏幕中的 vim：当我在屏幕会话中时，vim 不会突出显示语法

> ID：13752923
> 
> 赞同：1
> 
> 时间：2012-12-06T21:27:41.077
> 
> 标签：vim, gnu-screen

当我在屏幕会话中使用 vim 时，我看不到任何语言（例如 python、c++ 和 sh）的任何语法突出显示。行号虽然是彩色的。我确切地说我的终端（也在屏幕上）能够显示 256 种颜色方案（我使用此处找到的 256colors perl 脚本进行了测试：http: [//frexx.de/xterm-256-notes/](http://frexx.de/xterm-256-notes/)）。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:57:01.027

好的，这是问题/解决方案：我曾经使用 调用 vim `$vi`，确实：

```
$ which vi
alias vi='vim'
    /usr/bin/vim 
```

但：

```
$ screen
$ which vi
/bin/vi 
```

我刚刚了解到屏幕不会加载这个很棘手的系统级别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T08:58:31.530

我有这个问题。就我而言，我正在运行 brew 的屏幕版本。brew 不使用 ~/.screenrc 作为其启动文件。所以有两种解决方案。

1）在 brew_screen 期望的 screenrc 中设置您的术语。这可能是 /opt/etc/screenrc。我没有尝试过这种方法，所以我不确定。

2）为屏幕设置一个别名，将术语设置为您想要的。在这种情况下，screen-256color 就足够了。我在我的 bash_profile 中添加了以下行，它符号链接到我的 bashrc（mac 问题）：

```
alias screen='screen -T screen-256color' 
```

# python - 课程如何运作

> ID：13752925
> 
> 赞同：2
> 
> 时间：2012-12-06T21:27:49.130
> 
> 标签：python, class

我试图找出一个非常简单的问题，但我仍然不能完全理解一个类是如何工作的。例如，如果我想创建一个名为“Friend”的类，并带有一个名为“name”的属性，这是否意味着我必须先给出一个名为“name”的变量？那么我如何定义构造函数以允许“名称”的规范？这段代码是废话吗？提前感谢您的任何回复

```
class Friend:

    def __init__(self,name):
        self.set_name(name)

    def set_name(self,name):
        self.name=name

    def get_name(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T21:30:14.610

该代码并非胡说八道，因为它完成了您想要完成的工作。不过，它不是很pythonic。没有理由你应该使用 getter 或 setter。直接访问属性即可。喜欢

```
class Friend:

    def __init__(self,name):
        self.name = name 
```

你可以通过[实例化](http://docs.python.org/2/tutorial/classes.html#class-objects)你的类

`friend = Friend('jeremy')`

现在直接`name`访问

`print friend.name # jeremy`

有很多关于 python 类的知识，幸运的是 python 为你使用的任何版本提供了优秀的[文档](http://docs.python.org/2/tutorial/classes.html)。

在此示例中，要创建一个新朋友，您需要使用名称对其进行实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:31:06.117

您指的是默认关键字参数。您在示例中指定它的方式意味着`name`在构造函数中是必需的。使其默认的方式（并且能够在构造函数之后设置）如下所示：

```
class Friend(object):

    def __init__(self,name=''):
        self.name = name

    def set_name(self,name):
        self.name=name

    def get_name(self):
        return self.name 
```

现在您的类可以在没有名称的情况下实例化：

```
aFriend = Friend() 
```

正如评论中所建议的那样，为基本属性设置 setter 和 getter 并不是“被认为是 pythonic”。但是，如果该属性需要计算，那么您可以将其设为属性：

```
class Friend(object):

    def __init__(self, firstname='', lastname=''):
        self.firstname = firstname
        self.lastname = lastname

    @property
    def firstname(self):
        return self._first

    @firstname.setter
    def firstname(self, n):
        self._first = n.capitalize()

    @property
    def lastname(self):
        return self._last

    @lastname.setter
    def lastname(self, n):
        self._last = n.capitalize()        

    @property
    def fullname(self):
        return "{0} {1}".format(self.firstname, self.lastname)   

f = Friend('frank')
f.lastname = 'smith'

f.firstname
# 'Frank'

f.lastname
#'Smith'

f.fullname
#'Frank Smith' 
```

# sql - SQL Server 中的列到行

> ID：13752930
> 
> 赞同：1
> 
> 时间：2012-12-06T21:28:06.220
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我有一个查询返回一个如下所示的表：

```
Location | November | December | January | February | March | ... | October |
   CT        30         70         80         90       60             30
 etc. 
```

我希望它看起来像：

```
Location |   Month   | Value |
   CT       November    30
   CT       December    70
   CT       January     80
             ...
   CT       October     30 
```

它看起来像一个非透视表，但我没有将它变成那种形式，因为基表将月份作为列（这些值只是按位置分组的值的总和）。我已经看到很多行到列的问题，但我还没有找到一个好的列到行的答案，所以我希望有人能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:30:57.030

您将需要使用该`UNPIVOT`功能。这会转换列的值并将其转换为行：

```
select location, month, value
from <yourquery here>
unpivot
(
  value
  for month in (January, February, March, April, May, June, July, August,
                September, October, November, December)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ec474/2)

# r - 在 R / 模拟 R 控制台中解析多行表达式

> ID：13752933
> 
> 赞同：4
> 
> 时间：2012-12-06T21:28:15.013
> 
> 标签：r, parsing, console, eval

我想要一个 R 函数，它允许我模拟 R 控制台，不同之处在于表达式是在与全局环境不同的环境中评估的。（我想将它用于 R 中的另一种调试方法，该方法允许恢复调用函数的本地参数，然后通过简单地将函数代码逐步粘贴到模拟的 R 控制台中进行调试）。这是一个使用 parse 和 eval 并在中途完成工作的函数（按 Escape 时模拟控制台停止）：

```
my.console = function() {
  while(TRUE) {
    tryCatch({
      expr.out <- capture.output(eval(parse(prompt=": ")))
      if (length(expr.out)>0) {
        cat(expr.out,"\n")
      }
    }, error = function(e) {
      str = as.character(e)
      message(str)
    })
  }
}

console.env = new.env(parent=globalenv())
console.env$hello = "Hello World"
environment(my.console) <- console.env

my.console() 
```

然后可以在模拟控制台中评估简单的表达式，例如

```
: 5*5
[1] 25
: hello
[1] "Hello World" 
```

问题是我无法解析多行代码，例如，当从我的脚本粘贴 if 语句的开头时，将引发错误。

```
: if (TRUE) {
Error in parse(prompt = ": "): 2:0: unexpected end of input 
```

R 控制台意识到下一行将跟随更多代码并将提示更改为 +。我想知道是否还有具有类似行为的 parse 函数的变体。到目前为止，我唯一的想法是一种非常肮脏的方法来搜索错误消息中的子字符串“unexpected end of input”，如果发现它继续解析。但是，例如，由于某些 R 错误消息似乎取决于 R 运行的语言，因此我对这种方法并不满意。有谁知道我如何编写一个可以解析多行 R 代码的更好的模拟 R 控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T06:04:59.930

为什么不尝试将您的代码输入和`parse`命令分开，例如，

```
s <- scan(what="list", multi.line=TRUE)
for(i in 1:length(s)){
    capture.output(eval(parse(text=s)[i]))
    # etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:22:25.577

如果您想以交互方式逐步完成您的代码，您可以使用`browser()`带有 command的内置函数`n`，请参阅`?browser`. 示例使用：

```
f <- function(x) {
  # invoke interactive debugging
  browser()

  # rest of the function - by pressing 'n' while in browser mode, the expressions
  # will be executed one after another and you are able to explore the
  # intermediate values of variables etc. (as in standard R promt)
  y <- x^2
  [...]
} 
```

如果这不符合您的需求，您可以查看`browser`.

# vb.net - VB.net 如何从继承的类中复制对象

> ID：13752937
> 
> 赞同：0
> 
> 时间：2012-12-06T21:28:28.190
> 
> 标签：vb.net, object, copying

我有 ClassA 和一些成员数据 s1 和 s2 我也有 ClassB 继承 ClassA 并有自己的成员数据 s3 和 s4

现在我从 ClassA 实例化 ObjectA 并填充成员数据 s1 和 s2

接下来我从 ClassB 实例化 ObjectB。

问题：如何将 ObjectA 的成员数据复制到 ObjectB，而不必将每个 ObjectA 的成员数据复制到 ObjectB 的成员数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:26:35.537

如果您使用属性标记每个成员（例如，创建具有 TargetMember 属性的 MemberMapAttribute），那么您可以在源对象上使用反射来获取属性映射并进行复制。

# c# - C# - 变量未从另一个类设置

> ID：13752946
> 
> 赞同：-7
> 
> 时间：2012-12-06T21:28:59.920
> 
> 标签：c#, variables, console-application

我有一个要设置的变量，`Class1.SetVariable(variable);`但它不会返回我设置的变量。该变量将等于 0 中的另一个函数`Class2`，而不是我想要的 50。有任何想法吗？代码：

更新：

```
class Class1 {
    public int rndk = 0;

    public int Rndk {
        get { return this.rndk; }
        set { this.rndk = value; }
    }
}

class Class2 {
    public Class1 instance = new Class1();

    public Class2() {
        Load();
        Check();
    }

    public void Load() {
        instance.Rndk = 50;
        Console.WriteLine(instance.Rndk);
        // returns 50
    }

    public void Check() {
        Console.WriteLine(instance.Rndk);
        // returns 0
    }
} 
```

代码差不多就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:31:37.397

首先，在 C# 中，通常最好将其设为*Property*而不是带有“set 方法”的字段：

```
private int variable = 0;
public int Variable 
{ 
   get { return this.variable; }
   set { this.variable = value; }
} 
```

这本质上是两种方法，但包含在更好的语法中。

至于实际问题，我怀疑问题在于您的方法不在`Class1`该类的同一个实例上工作。确保您在`Class1`变量中使用相同的实例，而不是在每次方法调用时创建一个新实例。（您现有的代码没有说明实际问题。）

例如，通过上述更改，这将起作用：

```
public class Class2
{
    private Class1 instance1 = new Class1();

    public Class2()
    { 
        instance1.Variable = 50;
    }

    public void Print()
    {
         // Using the same instance - will print 50
        Console.WriteLine("Instance value is {0}", instance1.Variable);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:32:26.997

如果你想`Class1`成为“全局”，它必须是静态的：

`public static class Class1`

# c++ - g++ char NULL 错误

> ID：13752948
> 
> 赞同：-7
> 
> 时间：2012-12-06T21:29:04.460
> 
> 标签：c++, g++, type-conversion

我尝试使用 gcc 版本 4.3.2 20081105 (Red Hat 4.3.2-7) (GCC) 进行编译输入文件有一个 const char ：

```
#include <stdio.h>
#include <stdlib.h>
#include "textfile.h"
...
const char * vs=NULL;
vs = textRead("myfile.file");
const char * vv = vs;
free(vs); 
```

此字符变量用于主 cpp 程序，并将填充文本。

我在标题一函数 textRead 中使用从 myfile.file 加载数据

我收到了这个错误（我认为是演员转换），但不知道我在哪里犯了错误。

```
warning: deprecated conversion from string constant to ‘char*’
error: invalid conversion from ‘const void*’ to ‘void*’ 
```

第一个警告是关于 vs = textRead("myfile.file"); 第二个错误是关于免费（vs）；

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:48:11.813

第一个错误是因为您的 textRead() 函数很可能是这样声明的：

```
const char *textRead(char *) 
```

不推荐将字符串“myfile.file”（具有 type `const char *`）转换为`char *`自动。通过将 textRead 更改为接受 a`const char *`来修复它。

第二个错误......好吧，再一次，看看编译器告诉你什么：期待 a`void *`并且你正在传递它 a `const void *`：在这种情况下，`free`需要一个`void *`指针。你有一个`const char *`可以隐式转换为`const void *`. 但是`const void *`不能然后将其制成`void *`.

通过正确使用`const`正确返回来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:51:58.583

你还没有发布`textRead`函数的样子，所以我假设它的签名如下：

```
void *textRead( char *filename ); 
```

`textRead`正在读取要读取的文件的名称，它不需要（不应该）修改传递给它的字符串，因此更改`textRead`为

```
void *textRead( char const *filename ); 
```

如果您无法修改该功能，请将您的代码更改为

```
char filename[] = "myfile.file";
vs = textRead( filename ); 
```

about 的错误消息`free`非常不言自明，`free`需要 a`void *`并且您正在向它传递一个`const`指针。我看不出有什么理由`vs`需要 a`const char *`而不是 a `char *`。改变它，错误就会消失。

另外，我不明白你为什么要在 ing`vs`之前复制`free`它，但也许你没有发布发生在这两行之间的东西。

# php - PHP Fat Free Framework：当 GET 参数包含 URL 时失败

> ID：13752954
> 
> 赞同：2
> 
> 时间：2012-12-06T21:29:18.363
> 
> 标签：php, frameworks, fat-free-framework

我正在使用 Fat Free Framework，我想处理传入的请求，例如： [http ://example.com/api/method/?user_id=1&url=http://newsite.com](http://example.com/api/method/?user_id=1&url=http://newsite.com)

我使用该`F3::route`方法处理对此方法的 GET 请求，但出现以下错误：

```
parse_url(/method?user_id=1&url=http://newsite.com): Unable to parse URL 
```

我想我已经将此归结为 PHP 函数[在相对 URL](http://php.net/manual/en/function.parse-url.php)`parse_url()`上失败的问题。

任何想法如何让 F3 正确处理 GET 查询参数中的 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:40:18.717

我以前遇到过这个问题。如果您无法控制传入的 URL 未进行 url 编码，则可以在运行 F3 之前将其作为一个肮脏的黑客来执行，以消除参数中的斜杠：

```
$_SERVER['REQUEST_URI'] = str_replace('http://', 'http:', $_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:21:48.880

为什么不简化和使用`urlencode('http://www.google.com');`？？？

# php - BuddyPress，发布新故事时发送通知

> ID：13752956
> 
> 赞同：0
> 
> 时间：2012-12-06T21:29:24.357
> 
> 标签：php, mysql, wordpress, buddypress

我已经使用自定义配置文件字段设置 BuddyPress，其中列出了与我的网站相关的标签的复选框。

有没有办法在新帖子出现时根据他们的自定义配置文件字段选择向注册的 BuddyPress 用户发送自动通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:39:21.990

`save_post`钩子可以帮助你。

[http://codex.wordpress.org/Plugin_API/Action_Reference/save_post](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)

类似于以下内容：

```
function send_bp_message( $post_id ) 
{
  //verify post is not a revision
  if( wp_is_post_revision($post_id) )
  {
    return;
  }

  // get the user ids you want to notify
  global $bp, $wpdb;

  $custom_field_id = 1; // the profile field you want to check
  $custom_field_value = 'true'; // the value you're looking for

  $stmt = $wpdb->prepare("
    SELECT
      {$bp->profile->table_name_data}.user_id
    FROM
      {$bp->profile->table_name_data}
    LEFT JOIN
      {$bp->profile->table_name_fields} ON {$bp->profile->table_name_fields}.id = {$bp->profile->table_name_data}.field_id
    WHERE
      {$bp->profile->table_name_fields}.id = %d
    AND
      {$bp->profile->table_name_data}.value LIKE %s
  ", $custom_field_id, $custom_field_value);

  $recipient_ids = $wpdb->get_col($stmt); // array of matched user ids

  // send buddypress notification to matched user ids
  // (you could loop through $recipient_ids to send individual notifications)
  $msg_args = array(
    'sender_id' => 1, // 1 = admin
    'recipients' => $recipient_ids,
    'subject' => 'New post',
    'content' => 'A new post has been created...'
  );
  $thread_id = messages_new_message($message_args);        
}
add_action('save_post', 'send_bp_message'); 
```

# ruby-on-rails - OAuthException：此授权码已被使用 - Facebook

> ID：13752959
> 
> 赞同：8
> 
> 时间：2012-12-06T21:29:41.280
> 
> 标签：ruby-on-rails, facebook-graph-api, koala, koala-gem

Facebook 12 月 5 日的新版本似乎给我带来了一些问题。还有其他人收到此错误吗？

> Koala::Facebook::APIError (OAuthException: 此授权码已被使用。)

我能够 oauth，但是当我发出呼叫时，执行以下操作......我收到错误。即以下：

```
@friends = graph.get_object("/me/friends") 
```

这是 Facebook 更新：

> OAuth 授权代码的新安全限制 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

如果有人可以提供帮助，或者更具体地澄清 Facebook 更新的含义，那将非常有帮助。我正在使用 Rails Koala Gem 得到这个。

这里似乎有报道，但没有任何答案有帮助。

[http://developers.facebook.com/bugs/121266004701942?browse=search_50c113068fae60719135553](http://developers.facebook.com/bugs/121266004701942?browse=search_50c113068fae60719135553)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T23:14:24.670

他们的这种令人沮丧的变化 - 基本上你需要在每次加载 get_user_info_from_cookies 时缓存在会话中

```
 fb_user = session[:fb_info] || oauth.get_user_info_from_cookies(cookies)
  session[:fb_info] = fb_user
  session[:fb_token] = fb_user['access_token'] # is is the right one? 
```

不幸的是，有时它仍然会引发错误，因为它将是过期会话中的非常旧的代码。我将它包装在一个开始/救援块中，并要求用户单击以再次弹回 oauth（这将获得一个新令牌），或者尝试在没有 facebook / 等的情况下登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T07:23:23.947

你插入了 gemomniauth_facebook 吗？将以下代码放入 intializers/omniauth.rb 中。

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['app_id'], ENV['secret_id']
end 
```

# xml - XPath 和棘手的嵌套节点

> ID：13752964
> 
> 赞同：3
> 
> 时间：2012-12-06T21:29:58.347
> 
> 标签：xml, xpath

鉴于以下棘手的 XML：

```
<Type>
    <ID></ID>
    <Name></Name>
    <Child>
        <Type>
            <ID></ID>
            <Name></Name>
            <Child>
                <Type>
                    <ID></ID>
                    <Name></Name>
                    <Child>
                        <Type>
                            <ID></ID>
                            <Name></Name>
                            <Child>
                                <Type>
                                    <ID></ID>
                                    <Name>FIND ME</Name>
                                </Type>
                            </Child>
                        </Type>
                    </Child>
                </Type>
            </Child>
        </Type>
    </Child>
</Type> 
```

是否可以获得最深的类型名称字段？我试过这样的结构：

```
//*not(*) 
```

但没有结果..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:41:55.903

**I. 这个简短的 XPath 1.0 表达式**：

```
//*[not(../*/*)] 
```

**根据提供的 XML 文档进行评估时**：

```
<Type>
    <ID></ID>
    <Name></Name>
    <Child>
        <Type>
            <ID></ID>
            <Name></Name>
            <Child>
                <Type>
                    <ID></ID>
                    <Name></Name>
                    <Child>
                        <Type>
                            <ID></ID>
                            <Name></Name>
                            <Child>
                                <Type>
                                    <ID></ID>
                                    <Name>FIND ME</Name>
                                </Type>
                            </Child>
                        </Type>
                    </Child>
                </Type>
            </Child>
        </Type>
    </Child>
</Type> 
```

**选择这两个元素**：

```
<ID/>
<Name>FIND ME</Name> 
```

**因此，在您的情况下，产生所需结果的一个 XPath 表达式是：**

```
//*[not(../*/*)]/Name 
```

* * *

**二、当已知最大深度不大于给定数字时，选择具有最大深度的元素的通用 XPath 1.0 表达式**：

```
 //*[count(ancestor::*) >= 9]
   |
    //*[not(//*[count(ancestor::*) >= 9])]
                    [count(ancestor::*) = 8]
   |
    //*[not(//*[count(ancestor::*) >= 8])]
                    [count(ancestor::*) = 7]
   |
    //*[not(//*[count(ancestor::*) >= 7])]
                    [count(ancestor::*) = 6]
   |
    //*[not(//*[count(ancestor::*) >= 6])]
                    [count(ancestor::*) = 5]
   |
    //*[not(//*[count(ancestor::*) >= 5])]
                    [count(ancestor::*) = 4]
   |
    //*[not(//*[count(ancestor::*) >= 4])]
                    [count(ancestor::*) = 3]
   |
    //*[not(//*[count(ancestor::*) >= 3])]
                    [count(ancestor::*) = 2]
   |
    //*[not(//*[count(ancestor::*) >= 2])]
                    [count(ancestor::*) = 1]

   |
    /*[not(//*[count(ancestor::*) >= 1])] 
```

**虽然这看起来很长且笨拙，但 XML 文档的深度通常不超过 4-5 级，并且这种表达实际上是实用**的。

* * *

**三、通用 XPath 2.0 解决方案**：

```
//*[not(*) and count(ancestor::*) = max(//*/count(ancestor::*))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:20:41.870

试试这个 XPath：

```
//Type[not(descendant::Type)]/Name 
```

# java - java XML 等效于 flexjson.JSONDeserializer 和 flexjson.JSONSerializer

> ID：13752965
> 
> 赞同：0
> 
> 时间：2012-12-06T21:30:07.137
> 
> 标签：java, xml, json

我有一些使用 flexjson.JSONDeserializer 和 flexjson.JSONSerializer 的 Java 代码。（简单地说，JSONDeserializer 使用 JSON 字符串中的属性值对创建一个类实例，而 JSONSerializer 接受一个类实例并创建一个 JSON 字符串。）

现在我还需要对 XML 使用类似的东西，最好的匹配是什么，是否有类似的东西但性能更好？

简单的例子

```
class X {
    private Integer a;
    public void setA(Integer a);
    public Integer getA(); 
}

with json equal to {"a":1} I have the following
new JSONDeserializer<X>().use(null, X.class).deserialize(json);

with json equal to [{"a":1},{"a":2}]
new JSONDeserializer<List<X>>().use(null, ArrayList.class).use("values", X.class).deserialize(json); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:46:13.453

为了对 Java 对象与 XML 进行“哑”序列化/反序列化，最好的办法是使用[javax.xml.bind.JAXB](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/JAXB.html)类的静态方法。`marshal()`和`unmarshal()`方法应该提供与您使用 flexjson 的功能类似的功能。但是，我不能谈论性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:29:58.107

在这里编辑 [XStream 和 JAXB](http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-xstream.html) 的比较我仍然需要再次比较它们。结束编辑

[XStream](http://xstream.codehaus.org/)似乎比 JAXB 选项更容易，因为我也在处理 X 的集合

序列化代码很简单

```
return new XStream().toXML(collection); 
```

Maven依赖是

```
<dependency>
    <groupId>com.thoughtworks.xstream</groupId>
    <artifactId>xstream</artifactId>
    <version>1.4.3</version>
</dependency>
<dependency>
    <groupId>xmlpull</groupId>
    <artifactId>xmlpull</artifactId>
    <version>1.1.3.1</version>
</dependency> 
```

并在您的 java 文件中添加

```
import com.thoughtworks.xstream.XStream; 
```

# php - 您将如何确定 Magento 对象提供的所有可用参数？

> ID：13752967
> 
> 赞同：0
> 
> 时间：2012-12-06T21:30:33.403
> 
> 标签：php, magento, magic-methods

这是场景：您正在使用 magento 中的某个模型，并且您想知道哪些方法可用于检索 magento 中对象的各种参数。

让我们做一个例子：

```
$order = `Mage::getModel('sales/order')->loadByIncrementId($session->getLastRealOrderId());` 
```

在这个例子中，我们正在使用一个订单对象。

通过对各种主题的搜索，我发现这个特定对象有许多不同的方法可用，例如：

```
getCustomer()
getCustomerName()
getGrandTotal()
getId() 
```

我会假设（可能不正确）前 3 个示例方法实际上是在 mage_core_model_sales_order 类或其扩展的类之一中定义的**getId() 是一种特殊情况**。

它是一种自动魔术方法，与 __call() 魔术方法一起使用，即使该方法未在任何地方定义，也可以从对象返回数据。

**请解释 Magento 自动方法的命名约定**

**以及确定给定模型或集合中可用的所有可用自动方法的最简单方法是什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:47:01.597

简而言之（因为这在互联网上的其他各个地方都有记录），魔术方法用于设置和获取数据。这些电话

```
$this->setSomeThing('value');
$this->getSomeThing(); 
```

相当于这些调用

```
$this->setData('some_thing','value');
$this->getData('some_thing'); 
```

字符串`'some_thing'`是数据键。使用魔术方法设置和获取数据是这个键是 CamelCased 到 'SomeThing'。

您可以通过对“getData”的无参数调用查看**所有**数据属性（并因此派生魔术方法）

```
var_dump( $this->getData() ); 
```

`var_dump`如果您不使用，请小心`xDebug`，并且许多 Magento 对象太大和/或太圆而无法完全显示。如果你遇到这个问题，你可以用

```
var_dump( array_keys($this->getData()) ); 
```

这就是 Magento 中所有的神奇方法——获取和设置数据。

使用 varien 对象来解决这个问题，这是 Magento 中所有模型和块继承的对象。

```
$o = new Varien_Object;
$o->setData('foo','bar');
var_dump($o->getData('foo'));
var_dump($o->getFoo('foo'));
var_dump($o->getData()); 
```

最后要记住的一件事：如果一个对象的类定义了一个与魔术方法同名的方法，那么魔术方法将被忽略。有时，确定某个东西是魔术方法还是真正的方法的唯一方法是查看类定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:36:33.280

如果您需要以编程方式确定 PHP 类中可用的方法，有多种方法可供您使用。

如果您没有该类的实例，但可能只有类名，您可以使用 PHP 的反射功能： http: [//php.net/manual/en/book.reflection.php](http://php.net/manual/en/book.reflection.php)

或者，如果您实际上有一个类的实例，您可以`get_class_methods()`在该实例上使用该实例来获取当前范围内该实例可用的方法列表（包括已定义的魔术方法）。

# protocols - 无限循环findSuccessor？

> ID：13752968
> 
> 赞同：4
> 
> 时间：2012-12-06T21:30:38.490
> 
> 标签：protocols, p2p, chord

我目前正在处理 Chord 协议。

对于每个节点，有两个函数，`findSuccessor`它们`closestPrecedingNode`以伪代码的形式给出。

`findSuccessor`是：

```
n.findSuccessor(id)
  if(id is.in (n, successor])
    return successor;
  else
    n' = closestPrecedingNode(id);
    return n'.findSuccessor(id); 
```

`closestPrecedingNode`是：

```
n.closestPrecedingNode(id)
  for i = m downto 1
    if(finger[i] is.in (n, id))
      return finger[i];
  return n; 
```

创建节点时，其后继者最初设置为节点本身，其手指表为空。

现在我的问题是当只有一个节点时会发生什么，并且要求它提供除自己的 id 之外的*任何id。*然后`findSuccessor`运行`else`块并调用`closestPrecedingNode`. 由于手指表为空，节点本身返回到`findSuccessor`. 因此`n'`等于`n`。

之后，`findSuccessor`调用 on `n'`，这是对自身的递归调用。

然后我们有一个无限循环......或者我错过了什么？

*注意：伪代码取自[Chord: A Scalable Peer-to-peer Lookup Protocol for Internet Applications](http://pdos.csail.mit.edu/chord/papers/paper-ton.pdf)，第 5 页。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:07:36.353

“jchord”的实现者似乎同意你的观点，因为他将以下代码添加到`findSuccessor`：

```
if (this == successor) {
    return this;
} 
```

但似乎有一个更优雅的解决方案，更接近伪代码。当检查一个 ID 是否在区间内时（n，后继]（左排除，右包含），使检查循环。jDHTUQ 似乎这样做（从第 75 行开始。**警告：**非常丑陋的代码）：

[http://jdhtuq.svn.sourceforge.net/viewvc/jdhtuq/source_code/distributed_lookup_service/LookupService/src/co/edu/uniquindio/utils/hashing/Key.java?revision=63&view=markup](http://jdhtuq.svn.sourceforge.net/viewvc/jdhtuq/source_code/distributed_lookup_service/LookupService/src/co/edu/uniquindio/utils/hashing/Key.java?revision=63&view=markup)

恕我直言，以循环方式执行间隔检查似乎是正确的做法。您链接的论文说（第 4 页）：

> 符号 (a; b] 表示从（但不包括）a 顺时针移动直到到达（包括）b 所获得的 Chord 环段。

如果是单个节点，您将检查是否

```
id is.in (n, n] 
```

这应该会产生`true`，因为 id 位于紧随其后`n`并以 . 结尾的环内`n`。

# windows-installer - InstallShield CustomAction：如何加载托管依赖程序集

> ID：13752969
> 
> 赞同：4
> 
> 时间：2012-12-06T21:30:45.150
> 
> 标签：windows-installer, installshield

我有一个基本的 MSI InstallShield 安装，其中包含从二进制表运行的托管 EXE 自定义操作。我尝试了一个简单的测试，它只运行一个控制台并且工作正常。当我向 EXE 添加 .DLL 程序集引用时，它找不到 DLL。如何让 InstallShield 知道这个引用的程序集，以便它可以使用 EXE 加载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:12:41.367

自定义操作仅以临时名称将单个文件提取到临时位置。要使对 .dll 的依赖项起作用，它们都需要被提取，并且至少 .dll 必须具有预期的名称。`[SUPPORTDIR]\your.exe`通常，通过将两者都添加到“设置文件”并引用自定义操作，最容易做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-21T05:15:25.750

好吧，我将在 Installshield 2014 中添加有关它今天如何工作的详细信息。对于其他 installshield 版本，其他答案可能同样正确。我可以看到迈克尔的回答是从 2012 年开始的，从那时起很多事情都发生了变化。让我们来看看。

.Net 程序集可以有两种类型的依赖项：

1.  托管（用 C# 或 VB.Net 语言编写。OP 有这种特殊情况）
2.  非托管或本机（例如，通过 p/invoke 调用的 C++ dll）。您不会在 C# 项目中引用此类程序集，但它们会在运行时使用`DllImport`属性和定义明确的程序集搜索机制加载。

让我们了解 OP 的问题，即依赖托管程序集的情况：

仅供大家参考，installshield 内部有一个自己的数据库。因此，当您添加调用托管程序集中存在的方法的自定义操作（在您的 installshield 基本 MSI 项目中）时，自定义操作的所有属性都将作为记录放入`ISClrWrap`内部数据库表中，如下所示：

[![在此处输入图像描述](../Images/3287bfdf47a17e2fc15df00088de9674.png)](https://i.stack.imgur.com/mE88X.png)

现在 installshield 不提供任何用户界面或直接机制，我们可以在其中定义托管程序集的依赖项（您在 Visual Studio 的 C# 项目中作为引用添加的那些）。但是您可以更新此数据库表以反映相同的情况。您需要为该表中的每个新依赖项添加一条记录。对于名称列，您应该选择`Dependency0`第一个依赖项，`Dependency1`第二个依赖项，依此类推。请看下面的快照，了解我在按下顶部的新按钮以添加新记录后是如何完成的：

[![在此处输入图像描述](../Images/1b7962abf46ae12a00f1b51623fb8ad0.png)](https://i.stack.imgur.com/K19f9.png)

添加所有托管依赖项程序集后，表开始如下所示：

[![在此处输入图像描述](../Images/1f2d917e03ee04aa5af16130958729e3.png)](https://i.stack.imgur.com/uu54l.png)

而已。你从这里完成。剩下的留给 installshield。现在存在的方法`MyManagedAssembly.dll`将能够调用存在于安装过程中`MyManagedDependencyAssembly1.dll`或`MyManagedDependencyAssembly2.dll`安装过程中的方法。

**备注**：

1.  您不必将托管依赖程序集添加到支持文件（其路径由`[SUPPORTDIR]`属性表示）。installshield 如何在安装过程中管理托管依赖程序集的复制是其内部实现细节。
2.  您的 C# 项目（在自定义操作中使用）对核心 .NET 程序集的依赖项，这些程序集是 .NET 框架 FCL 例如等的一部分`System.dll`，`Systen.Core.dll`不需要添加到此表中。它们在 InstallShield 加载 CLR 以执行托管代码时默认加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:34:03.953

我找不到一种体面的方式来使用 .Net 自定义操作，让我可以做我想做的事情。我最终使用 WiX 的 DTF（部署工具基础）部分来创建程序集，并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-31T08:15:06.950

请将您的 DLL 作为依赖项添加到“isclrwrap”二进制表中。您可以从直接编辑器中找到该二进制表。这将解决您的问题。

# jquery - 将元素名称分配给变量？

> ID：13752972
> 
> 赞同：0
> 
> 时间：2012-12-06T21:30:52.433
> 
> 标签：jquery

这是我的示例 HTML：

```
<div name="John Doe"></div> 
```

**注意**：我知道所有关于 CSS 中的 ID 和类的信息。我完全知道它们的存在。但在这种情况下，我想知道当它是我要使用的名称值时该怎么办。

基本上，如何将 div 的名称（在本例中为“John Doe”）保存到变量中？

我可以使用以下代码成功访问它：

```
$(document).ready(function(){
    $('div[name="John Doe"]').click(function(){

    Do something;

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:38:18.997

您应该`data`为此使用属性

HTML：

```
<div data-name="John Doe">...</div> 
```

JS：

```
$(function(){
    $('div[data-name="John Doe"]').on('click', function() {
        var myNameVar = $(this).data('name'); // Here is your variable.
    });
}); 
```

[http://jsfiddle.net/6tatB/](http://jsfiddle.net/6tatB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:32:50.980

属性名称中不能有空格，但这会起作用

```
$(document).ready(function(){
    $('div[name="John Doe"]').click(function(){
        var divname = $(this).attr("name");
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:33:09.280

元素名称不能包含空格。我冒昧地添加了一个下划线：

```
$(document).ready(function(){
    $('div[name="John_Doe"]').click(function(){
        var divAttrName = $(this).attr('name').replace('_', ' ');;
    });
}; 
```

# c++ - 未解析的外部符号，在函数 _main 中引用

> ID：13752977
> 
> 赞同：0
> 
> 时间：2012-12-06T21:31:14.610
> 
> 标签：c++, unresolved-external

```
 #include <iostream>
    #include <iomanip>
    #include <string>

    using namespace std;

    const int numplayers = 10;
    const int numscores = 3;

    void playerNames(string[],int);
    void batsHits(int[][numscores],double[][numscores],int, int,string[]);
    void battingAverage(int[][numscores],double[][numscores],int,int);
    void displayStats(int[][numscores],double[][numscores],double[], string[], int, int);

    int main()
    {
        // Declaration and Initialization Statements
        int bats[numplayers][numscores];            //Players number of at bats
        double playerhits[numplayers][numscores];    //Players number of hits
        string playernames[numplayers];                //Players names
        double avgplayerscores[numplayers];            //Players average scores

        // Function Calls
        playerNames(playernames,numplayers);
        batsHits(bats, playerhits, numplayers,numscores,playernames);
        battingAverage(bats,playerhits,numplayers,numscores);
        displayStats(bats,playerhits,avgplayerscores,playernames,numplayers,numscores);
    }

    //Collects the baseball players names from user
    void playerNames(string playernames[], int numplayers)
    {
        int i;

        for(i=0;i<numplayers;i++)
        {
            cout << "Please enter Player #" << i+1 << "'s name: ";
            getline(cin,playernames[i]);
        }
    }

    //Gets the number at bats and hits for each player
    void batsHits(int bats [][numscores],double hits [][numscores], int numplayers, int numscore,string playernames[])
    {
        int i;
        int j;

        for(i=0;i<numplayers;i++)
        {
            for(j=0;j<numscores;j++)
            {
                cout << "Enter " << playernames[i] << "'s At Bats: " << endl;
                cin >> bats[i][j];
                cout << "Enter " << playernames[i] << "'s Hits: " << endl;
                cin >> hits[i][j];
            }
        }
    }

    //Calculates the batting average for each player
    void battingAverage(int bats[][numscores],double avgplayerscores[],int numplayers,int numscores)
    {
        int i = 0;
        int j = 0;
        double total = 0;

        for(i;i<numscores;i++)
        {
            for(j=0;j<numplayers;j++)
            {
                total+=bats[j][i];
            }
            avgplayerscores[i]=(total/(j+1)*1.0);
            total=0;
        }
    }

    //Displays the players stats and calculates the total number of hits and bats for the whole team.
    void displayStats(int bats[][numscores],double playerhits[][numscores],double avgplayerscores[],
                      string playernames[], int numplayers, int numscores)
    {
        int i = 0;
        int j = 0;
        double avgbats[10];
        double avghits[10];
        double total = 0;

        for(i;i<numscores;i++)
        {
            for(j=0;j<numplayers;j++)
            {
                total+=bats[j][i];
            }
            avgbats[i]=(total/(j+1)*1.0);
            total=0;
        }

        for(i;i<numscores;i++)
        {
            for(j=0;j<numplayers;j++)
            {
                total+=playerhits[j][i];
            }
            avghits[i]=(total/(j+1)*1.0);
            total=0;
        }

        cout << endl << endl;
        cout << "Player              AB              HITS              AVE"
             << endl;
        cout << playernames[0] << setw(17) << bats[0][0] << setw(17) 
             << playerhits[0][0] << setw(17)  
             << fixed << showpoint << setprecision(1) << avgplayerscores[0] << endl;

        cout << playernames[1] << setw(17) << bats[1][0] << setw(17)
             << playerhits[1][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[1] << endl;

        cout << playernames[2] << setw(17) << bats[2][0] << setw(17)
             << playerhits[2][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[2] << endl;

        cout << playernames[3] << setw(17) << bats[3][0] << setw(17)
             << playerhits[3][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[3] << endl;

        cout << playernames[4] << setw(17) << bats[4][0] << setw(17)
             << playerhits[4][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[4] << endl << endl;

        cout << playernames[5] << setw(17) << bats[5][0] << setw(17)
             << playerhits[5][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[0] << endl;

        cout << playernames[6] << setw(17) << bats[6][0] << setw(17)
             << playerhits[6][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[1] << endl;

        cout << playernames[7] << setw(17) << bats[7][0] << setw(17)
             << playerhits[7][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[2] << endl;

        cout << playernames[8] << setw(17) << bats[8][0] << setw(17)
             << playerhits[8][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[3] << endl;

        cout << playernames[9] << setw(17) << bats[9][0] << setw(17)
             << playerhits[9][0] << setw(17) 
             << fixed << showpoint << setprecision(1) << avgplayerscores[4] << endl << endl;

        cout << "Totals" << setw(14) << fixed << showpoint << setprecision(1) 
             << avgbats << setw(17) << avghits
             << setw(17) << endl << endl;
    } 
```

**错误 LNK2019：函数 _main 中引用的未解析的外部符号“void __cdecl battingAverage(int (* const)[3],double (* const)[3],int,int)”(?battingAverage@@YAXQAY02HQAY02NHH@Z)**

它显然必须处理 main 函数中的函数 battingAverage 调用，我在这里搜索了这个错误，试图将 c++ 编译器选项更改为“Console”，但没有帮助。请帮助大家，我确信这是一个小问题，但我很累试图解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:32:20.080

您的声明：

```
void battingAverage(int[][numscores],double[][numscores],int,int); 
```

你的定义：

```
void battingAverage(int bats[][numscores],double [],int numplayers,int  numscores) 
```

如您所见，第二个论点存在差异 - `double[][numscores]`vs `double[]`。所以你实际上是在定义一个完全不同的函数。

# php - Json 行分隔符问题

> ID：13752978
> 
> 赞同：0
> 
> 时间：2012-12-06T21:31:15.897
> 
> 标签：php, json

好的，我被困在这里我有一个从上面的代码给出的 json 输出

```
 $jsonurl = 'http://us.battle.net/api/d3/profile/'.$btag.'/';
$json = file_get_contents($jsonurl,0,null,null);
$json_output = json_decode($json); 
```

我可以使用例如检索数据

```
$json_output->code 
```

但是，我有一个特定的数据需要检索

```
$json_output->timePlayed->demon-hunter 
```

这个我无法检索，因为“恶魔猎人”旁边的“-”有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:36:16.463

是的，要么使用数组：

```
$json_output = json_decode($json, true);
$json_output['timePlayed']['demon-hunter']; 
```

或使用以下符号：

```
$json_output->timePlayed->{'demon-hunter'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:37:46.123

```
$type = 'demon-hunter';
$json_output->timePlayed->$type; 
```

# html - HTML5 File API 从服务器下载文件并将其保存在沙箱中

> ID：13752984
> 
> 赞同：29
> 
> 时间：2012-12-06T21:31:45.837
> 
> 标签：html, blob, fileapi, filesaver.js

我正在尝试了解 HTML5 API。我正在设计浏览器客户端需要从服务器下载多个文件的 Web 应用程序；用户将使用下载的文件和应用程序执行某些操作，而不是将状态保存在用户硬盘上。我知道浏览器只能将这些文件保存到其沙箱中，只要用户可以在第二次启动应用程序时检索这些文件就可以了。我应该使用 BlobBuilder 还是 FileSaver？我在这里有点迷路了。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-08T16:24:50.723

我将向您展示如何使用[XMLHttpRequest Level 2下载文件并使用](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html)[FileSystem API](http://dev.w3.org/2009/dap/file-system/pub/FileSystem/)或[FileSaver 接口](https://github.com/eligrey/FileSaver.js)保存它们。

##下载文件##

要下载文件，您将使用 XMLHttpRequest Level 2（又名 XHR2），它支持跨域请求、上传进度事件以及上传/下载二进制数据。在“ [XMLHttpRequest2 中的新技巧](http://www.html5rocks.com/en/tutorials/file/xhr2/)”一文中，有很多使用 XHR2 的示例。

要将文件下载为 blob，您只需指定`responseType`“blob”即可。您还可以使用“text”、“arraybuffer”或“document”类型。下面的函数下载 中的文件`url`并将其发送到`success`回调：

```
function downloadFile(url, success) {
    var xhr = new XMLHttpRequest(); 
    xhr.open('GET', url, true); 
    xhr.responseType = "blob";
    xhr.onreadystatechange = function () { 
        if (xhr.readyState == 4) {
            if (success) success(xhr.response);
        }
    };
    xhr.send(null);
} 
```

回调将`success`接收 Blob 实例作为参数，该实例可以稍后修改、保存和/或上传到服务器。

##使用文件系统 API 保存文件##

正如*Can i use...*网站[指出](http://caniuse.com/filesystem)的那样，支持 FileSystem API 的浏览器并不多。对于 Firefox [，有一个](https://hacks.mozilla.org/2012/07/why-no-filesystem-api-in-firefox/)缺乏支持的解释。因此，您将不得不使用 Chrome 来执行此操作。

首先，您必须请求一个存储空间，它可以是临时的，也可以是持久的。您可能希望拥有一个持久存储，在这种情况下，您将需要预先请求一个存储空间配额（[一些事实](http://updates.html5rocks.com/2011/11/Quota-Management-API-Fast-Facts)）：

```
window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
window.storageInfo = window.storageInfo || window.webkitStorageInfo;

// Request access to the file system
var fileSystem = null         // DOMFileSystem instance
    , fsType = PERSISTENT       // PERSISTENT vs. TEMPORARY storage 
    , fsSize = 10 * 1024 * 1024 // size (bytes) of needed space 
;

window.storageInfo.requestQuota(fsType, fsSize, function(gb) {
    window.requestFileSystem(fsType, gb, function(fs) {
        fileSystem = fs;
    }, errorHandler);
}, errorHandler); 
```

现在您可以访问文件系统，您可以从中保存和读取文件。下面的函数可以将指定路径中的 blob 保存到文件系统中：

```
function saveFile(data, path) {
    if (!fileSystem) return;

    fileSystem.root.getFile(path, {create: true}, function(fileEntry) {
        fileEntry.createWriter(function(writer) {
            writer.write(data);
        }, errorHandler);
    }, errorHandler);
} 
```

并通过其路径读取文件：

```
function readFile(path, success) {
    fileSystem.root.getFile(path, {}, function(fileEntry) {
        fileEntry.file(function(file) {
            var reader = new FileReader();

            reader.onloadend = function(e) {
                if (success) success(this.result);
            };

            reader.readAsText(file);
        }, errorHandler);
    }, errorHandler);
} 
```

除了`readAsText`方法之外，根据[FileReader API](http://dev.w3.org/2006/webapi/FileAPI/#dfn-filereader)可以调用`readAsArrayBuffer`和`readAsDataURL`.

##使用文件保护程序##

“[在客户端保存生成的文件](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)”一文很好地解释了这个 API 的使用。某些浏览器可能需要[FileSaver.js](https://github.com/eligrey/FileSaver.js)才能拥有该`saveAs`界面。

如果你将它与`downloadFile`函数一起使用，你可以有这样的东西：

```
downloadFile('image.png', function(blob) {
    saveAs(blob, "image.png");
}); 
```

当然，如果用户可以可视化图像，对其进行操作然后将其保存在他的驱动器中，那将更有意义。

###错误处理程序###

只是为了完成这个例子：

```
function errorHandler(e) {
    var msg = '';

    switch (e.code) {
        case FileError.QUOTA_EXCEEDED_ERR:
            msg = 'QUOTA_EXCEEDED_ERR';
            break;
        case FileError.NOT_FOUND_ERR:
            msg = 'NOT_FOUND_ERR';
            break;
        case FileError.SECURITY_ERR:
            msg = 'SECURITY_ERR';
            break;
        case FileError.INVALID_MODIFICATION_ERR:
            msg = 'INVALID_MODIFICATION_ERR';
            break;
        case FileError.INVALID_STATE_ERR:
            msg = 'INVALID_STATE_ERR';
            break;
        default:
            msg = 'Unknown Error';
            break;
    };

    console.log('Error: ' + msg);
} 
```

##有用的链接##

*   [在客户端保存生成的文件](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)
*   [探索文件系统 API](http://www.html5rocks.com/en/tutorials/file/filesystem/)
*   [XMLHttpRequest2 中的新技巧](http://www.html5rocks.com/en/tutorials/file/xhr2/)
*   [使用文件 API 在 JavaScript 中读取文件](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-24T02:48:51.030

如果您只支持 HTML5 浏览器，则可以使用“下载”属性。更多细节在这里：[http ://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T19:49:55.750

我的技巧是简单地将 IFRAME 附加一个指向您的多个下载的“src”属性。服务器站点应发送带有“处置：附件”标头的文件，然后客户端将尝试将文件存储在本地。唯一的“问题”是 IFRAME 将作为碎片留在您的 DOM 树中，直到用户离开或重新加载页面。使 IFRAME 不可见（例如 width=0；height=0；），您就可以开始了！所有浏览器。

# algorithm - 在文件中找到两行相同的行

> ID：13752986
> 
> 赞同：6
> 
> 时间：2012-12-06T21:31:48.520
> 
> 标签：algorithm, search

我在亚马逊的一次采访中被问到这个问题。

您有一个包含许多行的文件，但其中两行是相同的。找到那两条线。我给出了在 N^2 时间内运行的明显答案。然后我想出了一个使用哈希表的答案，但他们也不喜欢这个答案，因为他们说如果文件以千兆字节为单位，它就行不通。我想出的另一个答案不是将哈希结果存储在内存中，而是创建一个与哈希值同名的文件，并将具有相同哈希值的行存储在文件中。他们要么无法理解我的解决方案，要么他们不喜欢它。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:40:49.310

对于这个问题，我可以想到两类基本的解决方案：

1.  **概率内存解决方案。** 您可以尝试通过在主内存中存储文件行的摘要来解决此问题。然后，您可以在主内存中进行计算以识别可能的重复项，然后通过回顾磁盘检查每个可能的重复项。这些解决方案可能是最好的，因为它们具有低内存使用率、高效率和最小化磁盘访问。此类别中的解决方案包括

    1.  计算文件每一行的哈希值，然后存储哈希值。任何有哈希冲突的线都代表一对可能发生冲突的线，并且可以探索这些线​​。
    2.  使用布隆过滤器存储文件的所有行，然后只检查布隆过滤器中冲突的对。这本质上是 (1) 的变体，更节省空间。
2.  **确定性的磁盘解决方案**。您可以尝试使用磁盘上的整个数据集进行计算，将主内存用作临时暂存空间。这可以让您获得准确的答案，而不必将整个文件保存在内存中，但可能会更慢，除非您进行一些稍后的处理并且可以从重组数据中受益。此类别中的解决方案包括

    1.  使用外部排序算法（外部快速排序、外部基数排序等）对文件进行排序，然后对其进行线性搜索以查找一对重复元素。
    2.  构建一个磁盘上的数据结构，例如包含所有字符串的 B-tree，然后查询 B-tree。这需要大量的预处理时间，但会使以后对文件的操作更快。
    3.  将所有内容放入数据库并查询数据库。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:35:03.310

您可以使用布隆过滤器：

[http://en.wikipedia.org/wiki/Bloom_filter](http://en.wikipedia.org/wiki/Bloom_filter)

然后，您可以检测（几乎没有误报）重复的行并将其存储在内存中，然后再次浏览文件。

两次遍历文件，内存占用极少，美观

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:34:06.730

遍历线条并计算每条线的长度。你最终会得到类似的东西：

```
0: 4  
1: 6  
2: 10  
3: 4  
.... 
```

只比较那些长度相同的线。使用此类索引可以进一步优化（例如，不将所有内容存储在平面数组中，而是存储在某种树中，或其他任何东西中）。

顺便说一句，由于性能原因，您对文件的第二个想法可能会被拒绝。对硬盘进行频繁的随机 IO 通常是个坏主意：尝试在内存中尽可能多地存储。

# excel - Excel VBA：解冻工作簿对象工作表的窗格？

> ID：13752987
> 
> 赞同：3
> 
> 时间：2012-12-06T21:31:53.433
> 
> 标签：excel, vba

通常解冻窗格的代码是

```
ActiveWindow.FreezePanes = False 
```

但是假设我有 Workbook 类型的 sourceBook 和 String 类型的 sheetName。例如

```
sourceBook.sheets(sheetName) 
```

如何在不调用 ActiveWindow 之类的东西的情况下解冻该工作簿工作表上的窗格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:52:20.460

这将从给定工作簿的每个窗口的每个工作表中删除 FreezePanes，它还确保与运行代码之前相同的工作表处于活动状态：

```
Dim w As Window
Dim activews As Worksheet, ws As Worksheet
For Each w In sourceBook.Windows
    w.Activate
    If activews Is Nothing Then
        Set activews = w.ActiveSheet
    End If
    For Each wsv In w.SheetViews
        wsv.Sheet.Activate
        w.FreezePanes = False
    Next
    activews.Activate
    set activews = nothing
Next 
```

正如 Rick 所指出的，您不能在不激活窗口的情况下解冻窗格。但你不必打电话`ActiveWindow`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:46:22.627

Unfortunately Freeze Panes is a method of a window object, the sheet on which you want to apply it needs to be the activesheet. This means that you will have to select the cell on which you would like to freeze the panes on the active window only.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:53:29.810

将代码添加到工作表的激活事件（例如，这是 Sheet1 下的代码）

```
Option Explicit
Private Sub Worksheet_Activate()
    ActiveWindow.FreezePanes = False
End Sub 
```

# python - loadtxt 中的 usecols

> ID：13752988
> 
> 赞同：0
> 
> 时间：2012-12-06T21:31:59.970
> 
> 标签：python, numpy

我在多个问题中发现了这个错误，但它不是固定的或解释的。[使用 loadtxt 读取单个 str 列](https://stackoverflow.com/questions/11742156/reading-in-single-str-column-with-loadtxt)

我对以下行 ( `import numpy as np`)有疑问

```
 symbols = np.loadtxt('filename.csv',
               dtype={'names': ('ticker', 'year', 'month','day'),
                      'formats': ('S10','i4','i2','i2')},
                delimiter=',',skiprows=1, usecols=(0,)) 
```

有以下数据

```
ticker  year    month   day
GPD.TO  2010    8   16
HAO.V   2010    8   16
RDS.V   2010    8   16
MD.V    2010    8   16 
```

它给了我一个

```
IndexError: list index out of range 
```

当我在没有它的情况下运行该行时，`usecols`它可以正常工作并返回所有 4 列。

我在 google 和 Stackoverflow 上查看了许多其他问题，但没有回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:43:17.300

如果你想使用`usecols = (0,)`with`np.loadtxt`那么你必须改变`dtype`匹配：

```
import numpy as np
symbols = np.loadtxt('filename.csv',
                     dtype={'names': ('ticker', ),
                            'formats': ('S10',)},
                     delimiter=',',
                     skiprows=1,
                     usecols=(0,)
                     )
print(symbols) 
```

与`filename.csv`：

```
ticker,year,month,day
GPD.TO,2010,8,16
HAO.V,2010,8,16
RDS.V,2010,8,16
MD.V,2010,8,16 
```

产量

```
[('GPD.TO',) ('HAO.V',) ('RDS.V',) ('MD.V',)] 
```

* * *

或者，`np.genfromtxt`您不需要更改`dtype`：

```
symbols = np.genfromtxt('filename.csv',
                        dtype={'names': ('ticker', 'year', 'month','day'),
                               'formats': ('S10','i4','i2','i2')},                        
                        delimiter=',',
                        skiprows=1,
                        usecols=(0,)
                        ) 
```

也可以。

# plasticscm - 开发周期中塑料单片机的工作流程

> ID：13752991
> 
> 赞同：5
> 
> 时间：2012-12-06T21:32:12.897
> 
> 标签：plasticscm

我试图了解 Plasticscm 是否可以允许以下工作流程

1.  开发人员完成任务视图的工作后，他/她想将其提交给父流进行审核
2.  是否可以生成等待特定开发人员审核的文件列表？理想情况下，此列表应打印/存储在文件中。
3.  假设审查过程接受主存档中的更改，则必须使用在特定日期从所有接受的审查生成的二进制文件执行集成测试。是否可以从尚未正式成为存档一部分的源版本生成此类二进制文件？
4.  集成商用户能否成为唯一可以使用塑料 SCM 将更改提交到存档的用户？

感谢您所有的时间和精力。请原谅我的无知。我试图浏览相关文档，但找不到上述问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:53:23.107

我会尝试回答，尽管有些地方我不完全理解（第 3 点）。

“cm diff”命令将为您提供分支中添加、删除、移动和更改项目的列表。命令输出可以通过管道传输到文件。

如果您在公司中担任集成者角色，我建议您使用 Plastic SCM 中默认包含的代码审查功能。

Plastic SCM 还具有集成的安全系统，因此，您将能够确定将在某些分支中具有合并权限的用户。

# facebook - 当我将鼠标悬停在我的时间轴上发布的共享网页的链接时，为什么会有一个“添加应用程序”按钮？

> ID：13752994
> 
> 赞同：1
> 
> 时间：2012-12-06T21:32:14.837
> 
> 标签：facebook, share

我想为用户提供一种方法，让他能够在他的时间线中在 facebook 上共享我正在开发的某个网页（不是 facebook 页面）。就这么简单。

我尝试了很多东西，然后我终于通过创建一个 Facebook 应用程序让它工作了——但实际上并没有 Facebook 应用程序。我相信它会很有用，因此我可以跟踪洞察力，但除此之外，我没有理由拥有这个应用程序。分享帖上方框中的标题、描述和图像来自网站索引页面中的 Open Graph 标签，而不是来自与网页相关的 Facebook 应用程序的设置。

但是当我悬停共享网页帖子的链接时，我得到一个标有“添加应用程序”（“Adicionar Aplicativo”）的按钮，它不应该存在，因为没有实际的应用程序。

如果您看到示例，就会变得很清楚：

[http://d.pr/i/SIFs](http://d.pr/i/SIFs) - 有一个“添加应用程序”按钮，为什么？

[http://d.pr/i/sE8f](http://d.pr/i/sE8f) - 很好，没有按钮

这是两个网站，以完全相同的方式共享，它们具有相同的 Open Graph 元标记、相同的 JavaScript SDK 代码、相同的 FB 按钮代码，并且它们都与具有相同设置的 Facebook 应用程序相关联。

但是，其中只有一个显示“添加应用程序”按钮。为什么？？？？？？

最终，我希望当我悬停该链接时什么都没有发生。只需点击后进入网页。可能的？

非常感谢，我已经为此苦苦挣扎了几个小时。

# android - GCM 和 id 处理

> ID：13752995
> 
> 赞同：2
> 
> 时间：2012-12-06T21:32:17.563
> 
> 标签：android, google-cloud-messaging

我正在创建一个使用 Facebook 和 GCM 的应用程序。用户可以在多个设备上使用该应用程序，朋友可以使用他的 facebook id 向他发送 GCM 消息。

在我的服务器上，我有一个将 facebook id 映射到 gcm id 的表。该表不要求 facebook id 是唯一的，因此可以将消息发送到多个设备。

在文档中，它演示了在发送消息时处理错误的以下方法：

```
if (result.getMessageId() != null) {
 String canonicalRegId = result.getCanonicalRegistrationId();
 if (canonicalRegId != null) {
   //CASE 1
   // same device has more than on registration ID: update database
 }
} else {
 String error = result.getErrorCodeName();
 if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
   // CASE 2
   // application has been removed from device - unregister database
 }
} 
```

在`CASE 1`中，它说用规范注册 id 替换注册 id。但是我怎么知道要替换哪个注册 ID？假设接收器有 2 个设备，我有 2 个注册 ID 可供选择，但不知道应该选择哪一个。

在`CASE 2`中，也会出现同样的问题。我如何知道要从数据库中删除哪个注册 ID？

**编辑**
为清楚起见，这是我目前使用的代码：

```
List<String> gcmIds = getGCMIds(c, fbId);
if (gcmIds != null && !gcmIds.isEmpty()) {
    Sender sender = new Sender(Params.GOOGLE_API_KEY);
    Message message = new Message.Builder().addData("message", apiMessage.buildJSONString()).build();
    MulticastResult result = sender.send(message, gcmIds, 5);

    List<Result> results = result.getResults();
        /* Do something with the results */

    success = result.getFailure() == 0;
} else {
    success = false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:48:21.703

对于案例 1：来自[文档](http://developer.android.com/google/gcm/adv.html#canonical)：

> GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。

向设备列表发送消息时，结果列表的顺序相同。因此，您实际上可以只查找在与结果相同的索引处使用的 regID，然后在您的数据存储中替换该 registrationID。请记住*保留规范 ID*，因为这是最近注册的 ID。

对于案例 2：同样，删除位于同一索引处的 regID。

有关完整的示例实现，请查看与您正在实现的类似的发送调用的官方[演示代码。](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java#108)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:32:55.543

您可能想查看 GCM 响应格式文档：[https ://developer.android.com/google/gcm/gcm.html#response](https://developer.android.com/google/gcm/gcm.html#response)

具体这部分：

**结果**

> 表示已处理消息状态的对象数组。对象按照与请求相同的顺序列出（即，对于请求中的每个注册 ID，其结果在响应中的相同索引中列出），它们可以具有以下字段：
> 
> **message_id：**表示消息成功处理时的字符串。
> 
> **registration_id：**如果设置，则表示 GCM 处理了消息，但它具有该设备的另一个规范注册 ID，因此发件人应在以后的请求中替换 ID（否则可能会被拒绝）。如果请求中有错误，则永远不会设置此字段。
> 
> **错误：**描述在处理该收件人的消息时发生的错误的字符串。可能的值与上表中记录的值相同，加上“不可用”（意味着 GCM 服务器很忙，无法处理该特定收件人的消息，因此可以重试）。

而这部分：

> 如果设置了registration_id，则将原始ID 替换为服务器数据库中的新值（规范ID）。**注意原始ID不是结果的一部分，所以需要从请求中传入的registration_ids列表中获取（使用相同的索引）。**

因此，您需要更新的注册 ID 与您找到的规范 ID 位于同一索引（在您为消息创建的注册 ID 数组中）。

# visual-studio - 在 Visual Studio 中比较两个文件

> ID：13752998
> 
> 赞同：494
> 
> 时间：2012-12-06T21:32:33.563
> 
> 标签：visual-studio, file, compare, comparison, diff

我在 Visual Studio 2012 中看到了用于比较两个文件或一个文件的两个版本的新比较工具。我喜欢。但是当我试图找到它时，我找不到它，因为我不使用[TFS](https://en.wikipedia.org/wiki/Team_Foundation_Server)。

有没有一种方法可以将两个文件与 Visual Studio 中的内置功能（但没有 TFS）进行比较？

* * *

## 回答 #1

> 赞同：905
> 
> 时间：2013-07-15T21:59:57.540

您可以从 Visual Studio 开发人员命令提示符调用`devenv.exe /diff list1.txt list2.txt`，或者，如果 Visual Studio 实例已经在运行，您可以`Tools.DiffFiles`在*命令窗口*中键入，并使用方便的文件名完成：

![在 Visual Studio 命令窗口中使用 Tools.DiffFiles](../Images/e10f06aba354a503ee75ab4c8ffde96e.png)

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2017-08-16T13:14:13.577

受上述[Vladimir Reshetnikov 回答的](https://stackoverflow.com/questions/13752998/compare-two-files-in-visual-studio/17664677#17664677)启发，我找到了一种非常舒适的方法，您可以通过**拖放**或**“发送到”**上下文菜单立即将两个文件与 Visual Studio 进行比较。它只需要一点准备，你需要做一次，然后它就像瑞士军刀一样有用。

**Visual Studio**已经拥有您需要的一切，并且只需要一些配置步骤即可使其正常工作：

## 使用拖放比较文件

**准备：**

1.  使用您喜欢的文本编辑器创建一个新的**批处理文件。**键入以下内容：

    ```
    @echo off
    setlocal
    set vspath=C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE
    start "Compare files" /B /MIN "%vspath%\devenv.exe" /diff %2 %1 First:'%2' Second:'%1' 
    ```

    您可能会注意到我已经反转了批处理中的`%1`和`%2`参数。这是因为我注意到文件资源管理器将**第二个文件**作为第一个参数传递，然后将**第一个文件**作为第二个参数传递。

2.  将此代码保存为**`VS_FileCompare.cmd`**使用它，并`vspath`根据需要进行修改以匹配`devenv.exe`（取决于您当前使用的**Visual Studio 版本，请参见****脚注**^(*）)）

3.  要么创建一个名为**“文件比较”**的**快捷方式**并将其放在**桌面上**（如下面的动画中使用的那样），因此始终可以将文件拖放到其上或直接将批处理文件放在桌面上。就这样！**`VS_FileCompare.cmd`**

 ******用法：**

1.  通过+打开**Windows 资源管理器**`Win``E`

2.  在资源管理器中选择两个文件进行比较

3.  拖放它们，如下面的动画所示：

    [![拖放演示](../Images/59e46707f9752113f8bc4ef80d768792.png)](https://i.stack.imgur.com/GknSf.gif)

4.  几秒钟后（取决于 Visual Studio 的启动时间），结果将显示在 Visual Studio 中：

    [![Visual Studio 视图](../Images/332875eba245c102e692e8723f18e81a.png)](https://i.stack.imgur.com/8z0KJ.png)

**注意：**如果 Visual Studio 已打开，则不会造成任何损害。在这种情况下，它只会在 Visual Studio 的运行实例中打开一个新窗口。因此您可以比较多个文件对，但请确保您一次只选择了两个文件。

* * *

## 替代方式：SendTo 上下文菜单

这是使用上**`VS_FileCompare.cmd`**一节中提到的批处理文件的另一种方法。它允许使用上下文菜单的*发送到文件夹*来比较文件。

**准备：**

1.  为批处理文件创建一个快捷方式**“Compare2Files VS”****`VS_FileCompare.cmd`**并将其复制到**SendTo**文件夹中。通过+打开**Windows 资源管理器**`Win``E`
2.  通过进入文件资源管理器的地址栏打开**SendTo文件夹（如此**[处](https://www.howtogeek.com/howto/windows-vista/customize-the-windows-vista-send-to-menu/)所述）。然后，将准备好的快捷方式放入此文件夹。**`shell:sendto`**

**用法：**

1.  通过+打开**Windows 资源管理器**`Win``E`

2.  在资源管理器中选择两个文件进行比较

3.  假设批处理文件的快捷方式**`VS_FileCompare.cmd`**名为**"Compare2Files VS"**，您可以选择这两个文件，右键单击并选择**Send To → Compare2Files VS**调用比较，如下所示：

    [![发送至](../Images/f37c50edcbf992f6bcbd3544fdd1bf70.png)](https://i.stack.imgur.com/7hNFi.jpg)

4.  几秒钟后（取决于 Visual Studio 的启动时间），结果将显示在 Visual Studio 中：

    [![Visual Studio 视图](../Images/332875eba245c102e692e8723f18e81a.png)](https://i.stack.imgur.com/8z0KJ.png)

**提示：**如果您喜欢 SendTo 文件夹方法，您可以做更多事情 - 例如，您可以通过 SendTo 直接打开命令外壳，它以正确的路径（所选文件所在的路径）开始。看[这里，了解如何做到这一点](https://stackoverflow.com/a/62634731/1016343)。您甚至可以将它与脚本结合使用，从而[获得更高的权限](https://stackoverflow.com/a/12264592/1016343)，只需付出一点额外的努力。

* * *

**MSDN 参考资料：**

*   [差异窗口的使用](https://www.visualstudio.com/en-us/docs/tfvc/compare-files)
*   [Visual Studio 的 Diff 参数](https://msdn.microsoft.com/en-us/library/jj874068.aspx)

* * *

^(*)) **脚注：**因为`vsPath`（路径`DEVENV.exe`）因您的 Visual Studio 版本而异，所以我正在描述如何找到它（Windows 10）：

1.  在**Windows 开始菜单** [![Windows 图标小](../Images/1c1c43dddf18f8e9df2f6f9da0fe3907.png)](https://i.stack.imgur.com/GCpev.png)中，找到**Visual Studio 图标** [![Visual Studio 图标小](../Images/6da7273085105819d81b321727e3e4f6.png)](https://i.stack.imgur.com/HxqaR.png)

2.  右键单击以调出上下文菜单。选择*更多*→*打开文件位置*。
    Windows 资源管理器打开并突出显示 Visual Studio 快捷方式。

3.  右键单击 Visual Studio 并选择**属性**

4.  在属性对话框中，您可以在**“目标：”中找到路径**

    [![VS 属性](../Images/e32001cf8d3b97bf2cf99f557c2373e9.png)](https://i.stack.imgur.com/WUaSC.png)

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2012-12-06T22:29:12.940

您可以尝试[Visual Studio Gallery中的](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)[*VSCommands*](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)扩展。

最新[版本](http://vscommands.squaredinfinity.com/blog)允许您选择两个文件并进行比较：

![在此处输入图像描述](../Images/be4b5ced68fad015f0947fc13e6ae376.png)

![在此处输入图像描述](../Images/a05cd3239f3e6d97695da35197099b0b.png)

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2018-02-21T21:37:01.330

（命令窗口）（`Ctrl`+ `Alt`+ `A`）：

```
Tools.DiffFiles File1 File2 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2019-06-06T19:27:25.257

Visual Studio 扩展：[Mads Kristensen](https://twitter.com/mkristensen?lang=en)的[文件差异](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.FileDiffer)

[![比较文件截图](../Images/613a98186eaafb7eaadad3d4619eceaf.png)](https://i.stack.imgur.com/oF5kj.png)

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2012-12-06T21:38:43.443

我一直是[WinMerge](https://en.wikipedia.org/wiki/WinMerge)的粉丝，这是一个开源项目。你可以很容易地将它插入到 Visual Studio 中。

[http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/](http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/)

将告诉你如何做到这一点

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2013-06-12T07:25:35.390

还有一个名为[CompareFiles](http://visualstudiogallery.msdn.microsoft.com/56f99a33-46b9-4d9e-8145-900aaba9951d)的 Visual Studio 扩展，它只是将“比较文件”条目添加到*解决方案资源管理器*上下文菜单中。它调用内置的 Visual Studio 差异工具。

以防万一有人（比如我）不想安装像[VSCommands](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)这样的一体化扩展......

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2015-09-17T09:29:34.467

在 Visual Studio 2012、2013、2015 中，您也可以使用[Web Essentials](http://vswebessentials.com)来完成。只需右键单击文件，然后从上下文菜单 → *Web Essential* → *Diff selected files*：

[![在此处输入图像描述](../Images/31d92bd80140de15080b0f8ccdbf5318.png)](https://i.stack.imgur.com/I40Qx.jpg)

它也可以作为[单独的扩展](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.FileDiffer)使用。

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2018-07-21T19:51:10.757

对于 Visual Studio 2019，*文件差异*插件允许比较不同项目中的文件：

[![在此处输入图像描述](../Images/de4d5be38e45d1a5cb4f73e4c1d6de6b.png)](https://i.stack.imgur.com/RHC2E.png)

[![在此处输入图像描述](../Images/a84a5e691ce02467c991cf8d13082abc.png)](https://i.stack.imgur.com/RgIQc.png)

你可以从这里安装它：

[![在此处输入图像描述](../Images/55565c12deebaa087e6f834795653ea7.png)](https://i.stack.imgur.com/O6wFl.png)

老的：

~~对于 Visual Studio 2017，安装 *[FileComparer2017][4]*~~

问题是不能比较不同项目中的文件，但是可以复制同一个项目中的文件进行比较...

~~![文件差异](../Images/15f0143996bb682fa9212935b02d0fbb.png)~~

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2014-10-31T18:25:13.237

如果你安装了 Visual Studio，你也可以调用

```
"%VS110COMNTOOLS%..\IDE\vsdiffmerge.exe" "File1" "File2" 
```

或对于[Visual Studio 2013](https://en.wikipedia.org/wiki/Microsoft_Visual_Studio#2013)：

```
"%VS120COMNTOOLS%..\IDE\vsdiffmerge.exe" "File1" "File2" 
```

来源：*[使用 Visual Studio 作为本地文件的差异和合并工具](http://roadtoalm.com/2013/10/22/use-visual-studio-as-your-diff-and-merging-tool-for-local-files/)*

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2020-03-06T12:48:43.263

在 Visual Studio 中，可以使用 diff 调用`Command Window`，然后使用`Tools.DiffFiles`命令

1.  `Command Window`通过热键`Ctrl`+`W`或`A`菜单*View* → *Other Windows* → *Command Window*打开
**   输入命令`Tools.DiffFiles "FirstFile.cs" "SecondFile.cs"`*

 ** * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-05-05T14:59:40.023

我也有这个问题。没有 TFS，但我发现将[*文件类型与文件比较工具相关联*](http://msdn.microsoft.com/en-us/library/ms181446.aspx)的文章很有帮助。

具体来说，步骤 1b。

打开 Visual Studio 命令提示符并导航到*Common7/IDE*文件夹并键入

```
tf diff /configure 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-03T19:53:32.057

*Akhil Mittal 的File Comparer* Visual Studio 扩展是一个出色的轻量级工具，可以完成这项工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-19T07:04:06.933

要比较任意两个文件并将其合并到一个文件中，如果您安装了 Visual Studio（任何版本），可以按照以下步骤操作。

**步骤 1：**打开 Visual Studio 命令提示符。如果找不到 Visual Studio 命令提示符，请选择 Visual Studio 工具

开始 → Visual Studio 命令提示符

[![在此处输入图像描述](../Images/65566fb605c96042631013fdd9aad6aa.png)](https://i.stack.imgur.com/un1vj.jpg)

[![在此处输入图像描述](../Images/b89dd4bd406bfc8f6d2d66927b4f897f.png)](https://i.stack.imgur.com/gCSk9.jpg)

**第二步：**输入命令 vsdiffmerge.exe

如果您只需要比较，请忽略开关 /m。

**语法 1：**

```
vsdiffmerge <file1> <file2> <file1> <outputfile> /t /m 
```

**语法 2：**

```
vsdiffmerge <basefilename> <CompareFilename> <basefilename> <OutputFilename> /t /m 
```

**示例 1：**

```
vsdiffmerge test1.js test2.js test1.js output.js /t /m 
```

**示例 2：**

```
vsdiffmerge.exe "C:\Users\livingston\Downloads\wa\wa\Files\pre\Test.js" "C:\Users\livingston\Downloads\wa\wa\Files\Prod\Test.js" "C:\Users\livingston\Downloads\wa\wa\Files\pre\Test.js" "C:\Users\livingston\Downloads\wa\wa\Files\output\samp.js" /t /m 
```

[![在此处输入图像描述](../Images/bdce57b27380a37691b241b7548eee63.png)](https://i.stack.imgur.com/nNo6y.jpg)

**第三步：**合并文件

[![在此处输入图像描述](../Images/2f4e4ea28a1229c3367587f276274850.png)](https://i.stack.imgur.com/z97Bm.jpg)

请注意，如果该位置中不存在文件名，则**不会**打开比较器。

您也可以在进行比较之前美化文件。在 Visual Studio 中，`Ctrl`++ .`K``D`

网上有很多美容网站。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-03-02T13:37:24.253

使用本地化语言的 Visual Studio 时，您在 CommandWindow 中编写的命令也必须本地化。例如，我的 VS2019 是葡萄牙语，所以我必须编写以下命令：

Ferramentas.CompararArquivos

[![在此处输入图像描述](../Images/9a842e587b413abbc8d1e4bff869e88b.png)](https://i.stack.imgur.com/yQega.png)

您可以通过菜单 View > Other Windows > Command Window 或在我的情况下为 Exibir > Outras Janelas > Janela de Comando 显示命令窗口（在我的情况下为 Janela de Comando）

[![在此处输入图像描述](../Images/45d7173989e42d80c95dbba86dfe4797.png)](https://i.stack.imgur.com/NreLP.png)

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-09-15T14:42:23.953

我相信这是 Visual Studio 2012 更好的扩展之一。它被称为代码比较，可以在[这里](http://visualstudiogallery.msdn.microsoft.com/dace3633-0b51-4629-85d4-c59cdce5bb3b)找到。*****