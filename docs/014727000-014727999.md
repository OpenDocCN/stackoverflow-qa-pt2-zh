# StackOverflow 问答 14727000-14727999

# google-maps-api-3 - 谷歌天气库

> ID：14727002
> 
> 赞同：2
> 
> 时间：2013-02-06T10:40:45.753
> 
> 标签：google-maps-api-3, weather

我正在使用谷歌图书馆时间在地图上显示它。

我遇到的问题是显示的第一个窗口非常小，您必须滚动。如何控制此窗口的大小？

其次，我只想显示我给出的坐标的地图，并显示我想要的最少时间。我怎么做？

这是我在[这里](http://www.alarmaseguridad.com/)的代码：

```
 function generartiempo(36.745,-3.87665,'mapatiempo') {
            var mapOptions = {
          zoom: 11,
          center: new google.maps.LatLng(lat,lng,true),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var infowindow = new google.maps.InfoWindow();
        var map = new google.maps.Map(document.getElementById('mapatiempo'),
            mapOptions);

        var weatherLayer = new google.maps.weather.WeatherLayer({
          temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS,
          windSpeedUnit: google.maps.weather.WindSpeedUnit.KILOMETERS_PER_HOUR
        });

        weatherLayer.setMap(weatherLayer.getMap() ? null : map);

        var cloudLayer = new google.maps.weather.CloudLayer();
        cloudLayer.setMap(map);

    }
<div id="mapatiempo"></div>
#mapatiempo {
width: 268px;
height: 200px;
border: 1px solid #AAAAA8;
margin-bottom: 5px;
margin-top: 15px;
} 
```

任何人都可以帮忙吗？编辑示例： http: [//jsfiddle.net/webyseo/YW2K7/12/](http://jsfiddle.net/webyseo/YW2K7/12/) 解决方案？谢谢！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:48:40.073

没有选项来定义默认信息窗口的大小。而且infoWindow的大小受地图大小的限制，不能大，所以需要放大地图。

您可以做什么：使用自定义 infoWindow 覆盖默认 infoWindow 并自行定义内容，使其适合较小的 infoWindow

* * *

自定义 infoWindow 的示例代码：（假设变量包含`google.maps.Map`）

```
 //create the weatherLayer
    var weatherLayer = new google.maps.weather.WeatherLayer({
      temperatureUnits: google.maps.weather.TemperatureUnit.FAHRENHEIT,
      clickable:true,
      suppressInfoWindows:true
    });

    //create InfoWondow-instance
    var weatherWindow=new google.maps.InfoWindow();

    //observe click-event
    google.maps.event.addListener(weatherLayer,'click',function(e){

      //hide infoindow
      weatherWindow.close();

      var content  = document.createElement('ul'),
          weather  = e.featureDetails.forecast,
          unit     = '°'+e.featureDetails.temperatureUnit.toUpperCase();

        //merge current weather and forecast
        weather.push(e.featureDetails.current);

        //create some content(here a short summary)
        for(var i = 0; i<weather.length; ++i){
          var item = content.appendChild(document.createElement('li'))
                      .appendChild(document.createTextNode(''))
              w    = weather[i];
              item.data='['+w.shortDay+']'+w.description+
                        '('+w.low+unit+'/'+w.high+unit+')';

        }
        //set content and position of the infoWindow
        weatherWindow.setOptions({position:e.latLng,content:content});
        //...and open the infowindow
         weatherWindow.open(map);
    });
    weatherLayer.setMap(map); 
```

* * *

演示：http: [**//jsfiddle.net/doktormolle/pnAyD/**](http://jsfiddle.net/doktormolle/pnAyD/)

# c++ - c++ 替代宏用于编译时字符串文字连接

> ID：14727003
> 
> 赞同：0
> 
> 时间：2013-02-06T10:40:47.763
> 
> 标签：c++, c++03

我想在编译时连接多个字符串文字：

```
#include <iostream>

#define VAR0 "var0 text"
#define VAR1 "var1 text"
#define VAR2 "var2 text"

static const char* concat = "var0:" VAR0 " var1:" VAR1 " var2:" VAR2 ;

int main(int argc, char *argv[])
{
    std::cout << concat << std::endl;
    return(0);
} 
```

这一切都很好，但我宁愿使用常量表达式而不是宏。在 C++ 03 中是否有任何简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:48:19.153

只能连接*文字*。在 C++03 中无法连接通用常量 char 数组表达式。但是，可以连接`boost::mpl::string`来自[Boost.MPL的奇怪模板可憎](http://www.boost.org/libs/mpl/)

# mysql - 使用 varchar 中的日期对日期进行排序在使用 MM/DD/YYY 转换为日期时间时遇到问题

> ID：14727005
> 
> 赞同：1
> 
> 时间：2013-02-06T10:40:55.170
> 
> 标签：mysql, sql

当前日期时间转换存在问题“xl_date”的日期为 MM/DD/YYYY

示例查询：-

```
SELECT orders.*, 
  customer.id AS userid, 
  customer.login, 
  convert(datetime, orders.xl_date, 101) as ddates 
FROM orders 
LEFT JOIN customer 
ON orders.userid = customers.id 
WHERE 1 
ORDER BY ddates DESC LIMIT 0, 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:46:43.993

您需要使用[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_str-to-date)函数。例如 -

```
SELECT STR_TO_DATE(orders.xl_date, '%m/%d/%Y') AS as ddates FROM orders 
```

您的查询是 -

```
SELECT
  orders.*, 
  customer.id AS userid, 
  customer.login, 
  STR_TO_DATE(orders.xl_date, '%m/%d/%Y')as ddates 
FROM orders 
  LEFT JOIN customer 
    ON orders.userid = customers.id 
WHERE
  1 
ORDER BY
  ddates DESC
LIMIT 0, 30 
```

# android - 三星 Tab2 中的 SQLite 数据库（外部 Micro sd 卡）

> ID：14727006
> 
> 赞同：2
> 
> 时间：2013-02-06T10:40:58.937
> 
> 标签：android, sqlite

这些是我 SAMSUNG TAB2 中的内存。

1-`Internal`

2-`Sdcard`

3- **`**Extrenal_sdcard**`**（可移动内存）不要混淆`sdcard`和`Extrenal_sdcard`。

`Extrenal_sdcard`是`micro sd card`我们可以从标签中删除的。

我试图在**Extrenal_sdcard**（可移动）中创建 SQLite 数据库。

但我没有成功。

我试着像我们在`Sdcard`.

```
Environment.getExternalStorageState() +filename 
```

但对于**Extrenal_sdcard**（可移动）它不起作用。

**有没有可能我正在尝试做或不做。**

请帮助我。

不要提供与如何在 sdcard 中创建数据库相关的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:45:28.420

我没有尝试做你在那里描述的事情，但大概它可以完成并且可能工作 - 有一些警告。首先，外部存储（SD 卡）不安全，因此任何其他应用程序或用户都可以对其进行读/写。其次，正如您所指出的，当它被卸载时，数据库就会消失。

由于这些缺点，您可能最好尝试使用内部存储数据库（默认），它很小并且可能包含指向外部数据（如图像或文件）的指针——它们本身可以在外部存储上（并且在外部存储不可用时具有占位符或其他处理）。

不过，如果您想尝试它，最好覆盖[Context的](http://developer.android.com/reference/android/content/Context.html)[getDatabasePath](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)方法，例如使用您自己的[Application](http://developer.android.com/reference/android/app/Application.html)对象，然后将其传递给常规[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)。然后你就不必担心游标工厂（这是可选[的，正如消息来源所证实的](http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob_plain;f=core/java/android/database/sqlite/SQLiteDatabase.java;hb=HEAD)那样——所以如果你想走那条路，只需传递 null ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:23:16.570

我得到了答案。

我们需要为**外部 Micro SD 卡提供此路径。**

```
"/mnt/name_of_your_card/your_dbfile" 
```

例子：-

```
"/mnt/MyExternal_Card/My_database" 
```

感谢这个链接。

[如何获取适用于 Android 4.0+ 的外部 SD 卡路径？](https://stackoverflow.com/questions/11281010/how-can-i-get-external-sd-card-path-for-android-4-0)

# php - 如何设置表单字段的默认值 - Magento？

> ID：14727009
> 
> 赞同：3
> 
> 时间：2013-02-06T10:41:19.793
> 
> 标签：php, magento

我有一个管理表单字段（文本框），

```
$fieldset->addField('ajax_time_interval', 'text', array(
          'label'     => Mage::helper('dealroom')->__('Page Refresh Time Interval'),
          'class'     => 'required-entry',
          'required'  => true,
          'name'      => 'ajax_time_interval',
      )); 
```

我需要为此文本字段设置默认值。我试过，在里面设置'value' => '120'。但它不起作用。

```
$fieldset->addField('ajax_time_interval', 'text', array(
          'label'     => Mage::helper('dealroom')->__('Page Refresh Time Interval'),
          'class'     => 'required-entry',
          'required'  => true,
          'name'      => 'ajax_time_interval',
          'value'     => '120', 
      )); 
```

如何在该字段中设置默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-21T10:40:55.530

就我而言，`setValues()`函数覆盖了我为该字段设置的**“值” 。**

**原因：**

在我的`_prepareForm()`函数中，我将值设置如下：

```
$fieldset->addField('ajax_time_interval', 'text', array(
          'label'     => Mage::helper('dealroom')->__('Page Refresh Time Interval'),
          'class'     => 'required-entry',
          'required'  => true,
          'name'      => 'ajax_time_interval',
          'value'     => '120', 
      )); 
```

在`_prepareForm()`函数结束时，有以下代码行将重置表单值：

```
$form->setValues($model->getData()); 
```

**解决方案：**

功能前设置模型数据`setValues()`如下：

```
if (!$model->getId()) {
    $model->setData('ajax_time_interval', '120');
}
$form->setValues($model->getData()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T07:54:31.153

您可以通过在字段配置中添加“默认”属性来做到这一点。

```
$fieldset->addField('ajax_time_interval', 'text', array(
          'label'     => Mage::helper('dealroom')->__('Page Refresh Time Interval'),
          'class'     => 'required-entry',
          'required'  => true,
          'name'      => 'ajax_time_interval',
          'default'     => '120', 
      )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:45:34.383

去掉最后一个分号......

检查这个网站帮助我很多：

[http://www.excellencemagentoblog.com/magento-admin-form-field](http://www.excellencemagentoblog.com/magento-admin-form-field)

玻璃钢

# linux-kernel - 如何知道从用户空间传递的缓冲区大小？

> ID：14727012
> 
> 赞同：0
> 
> 时间：2013-02-06T10:41:23.817
> 
> 标签：linux-kernel, buffer, sizeof

我正在尝试为 linux 内核开发一个新的系统调用。此系统调用将在作为参数的用户缓冲区上写入信息，例如：

```
asmlinkage int new_syscall(..., char *buffer,...){...} 
```

在用户空间中，这个缓冲区被静态分配为：

```
char buffer[10000]; 
```

有一种方法（作为用户级别的 sizeof() ）可以知道整个缓冲区大小（在这种情况下为 10000）？我已经尝试过`strlen_user(buffer)`，但它返回了当前进入缓冲区的字符串的长度，所以如果缓冲区为空，它返回 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:53:23.213

您可以尝试传递包含缓冲区指针和缓冲区大小的结构。但同样的结构也应该在用户空间应用程序和内核的系统调用代码中定义。

```
struct new_struct
{
   void *p;  //set this pointer to your buffer...
   int size;
};
//from user-application...

int main()
{
   ....
   struct new_struct req_kernel;
   your_system_call_function(...,(void *)&req_kernel,...);
}
........................................................................................
      //this is inside your kernel...
     your_system_call(...,char __user optval,...)
     {
            .....
            struct new_struct req;
            if (copy_from_user(&req, optval, sizeof(req)))

            return -EFAULT;
            //now you have the address or pointer & size of the buffer
            //which you want in kernel with struct req...
    } 
```

# facebook - C#的facebook登录。用户的电子邮件不被退回

> ID：14727014
> 
> 赞同：0
> 
> 时间：2013-02-06T10:41:40.210
> 
> 标签：facebook, .net-3.5, facebook-javascript-sdk

```
<div id="fb-root">
</div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'myappid', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        // Additional initialization code here
        FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                // TODO: Handle the access token
                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                form.setAttribute("method", 'post');
                form.setAttribute("action", 'facebooklogin.aspx');

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        });
    };
    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script>
<div class="fb-login-button"  data-show-faces="false"
    data-width="400" data-max-rows="1">
</div> 
```

.cs 代码

```
 var accessToken = HttpContext.Current.Request["AccessToken"];
        var client = new FacebookClient(accessToken);
        var me = client.Get("me") as IDictionary<string, object>;
        string firstName = (string)me["first_name"];
        string lastName = me["last_name"].ToString();
        string id = me["id"].ToString();
        string email=me["email"].ToString(); 
```

可以获得其他值，除了`email`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:59:30.093

您尚未添加访问`email`.

将您的登录代码更改为：

```
<div class="fb-login-button" data-show-faces="false"
data-width="400" data-max-rows="1" scope="email"> 
```

# objective-c - objective-c 我不明白为什么使用 sprintf 引导程序会崩溃

> ID：14727024
> 
> 赞同：1
> 
> 时间：2013-02-06T10:41:53.987
> 
> 标签：objective-c, c, xcode4.5

```
-(void)InitWithPwd:(char *)pPwd
{

    char szResult[17];

    //generate md5 checksum
    CC_MD5(pPwd, strlen(pPwd),&szResult[0]);
    szResult[16] = 0;

    m_csPasswordHash[0]=0;

    for(int i = 0;i < 16;i++) 
    {

        char sz[3] = {'\0'};
        //crash in blow row. The first pass is ok. The third pass crash. 
        //I can't understand.
        sprintf(&sz[0],"%2.2x",szResult[i]);
        strcat(m_csPasswordHash,sz);
    }

    m_csPasswordHash[32] = 0;
    printf("pass:%s\n",m_csPasswordHash);
    m_ucPacketType = 1;

} 
```

我想得到密码的md5。但是上面的代码一次又一次地崩溃。我不明白为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:46:03.673

您的缓冲区 ( `sz`) 太小，导致`sprintf()`生成缓冲区溢出，从而导致未定义的行为，在您的情况下是崩溃。

请注意，`szResult[1]`当被视为一个负值时（在将-type 值`int`传递给 时会发生这种情况），这可能会导致忽略您的字段宽度和精度指令以格式化完整值。`char``sprintf()``sprintf()`

[这是一个显示此问题的示例](http://ideone.com/QNum5x)。示例代码是用 C 编写的，但这对于这种情况无关紧要。

这通过确保传入的数据被认为是无符号的来解决问题：

```
sprintf(sz, "%02x", (unsigned char) szResult[i]); 
```

# php - 使用 PHP 进行域名

> ID：14727025
> 
> 赞同：-1
> 
> 时间：2013-02-06T10:41:59.713
> 
> 标签：php, dns, subdomain

我有一个网站说 abc.com，并且在 abc.com/user 上访问了一个用户帐户。现在我想添加用户可以将他的网站说 user.com 链接到 abc.com/user 的功能。能否请您概述一下如何通过 php 动态完成此过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:49:32.953

1.  设置 DNS 以将主机名指向服务器
2.  设置服务器配置，使站点成为默认虚拟主机（因此，如果使用无法识别的域名来请求它，则会加载正确的站点）
3.  使用`$_SERVER['HTTP_HOST']`而不是路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:50:29.350

如果我理解正确 - 您希望进入 user.com 的人会看到来自 abc.com/user 的内容。

我建议检查`launchrock.com`他们是否确实这样做，并且它涉及添加一个 CNAME dns 记录，我记得，另一种方法是在 httpd 中创建一个代理标志规则（必须为此启用 mod_proxy），这样你就不会了不必重新启动服务器，您始终可以在 www 目录中使用 .htaccess。

如果您使用代理路由，动态执行此操作会很容易，因为您只需要在每次部署新站点时附加一个新的代理通行证，或者创建一个参数化规则，如常规 htaccess，就自动创建 DNS 记录而言，我'我确信这是可能的，也许诸如 godaddy 或 AWS 之类的 DNS 提供商有用于这类事情的 api，但还需要更多的研究。

# django - django softlayer 对象存储，我应该使用什么后端或包？

> ID：14727029
> 
> 赞同：0
> 
> 时间：2013-02-06T10:42:02.700
> 
> 标签：django, python-2.7, django-storage, cloud-storage

我正在使用 django，我想使用 SoftLayer 对象存储来存储我的 mp3 文件。[http://www.softlayer.com/cloudlayer/storage](http://www.softlayer.com/cloudlayer/storage)

我不知道我应该使用 django-storages ( [django-storages.readthedocs.org](http://django-storages.readthedocs.org/en/latest/) ) 中的哪个后端。以及如何告诉 django 在选择后端后查看 softlayer.com。

如果有人可以建议另一个 django 包，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:48:24.710

我选择了 RackSpace CloudStorage。我正在使用包[django-cumulus](https://github.com/richleland/django-cumulus) + [SoftLayer 对象存储](https://github.com/softlayer/softlayer-object-storage-python)python 库。在对 CloudFilesStorage 进行子类化并由于 softlayer api 差异而进行一些更改之后 - 它对我有用

# wix - Wix 安装了多种服务，我不知道有多少

> ID：14727030
> 
> 赞同：2
> 
> 时间：2013-02-06T10:42:04.660
> 
> 标签：wix

我需要安装我的 Windows 服务，并且至少有一个实例。用户决定他们将拥有多少服务。但我会采取哪种方法？

*   尝试使我的 ServiceInstall foreach 的 Windows 服务数量或通过 installutil 自定义安装它们？

然后我必须解决它不会安装重复项。但我可以制作一个包含要安装的服务名称的 xml 文件，然后从那里读取。

但是我读到人们不喜欢在 wix 中使用 foreach 因为它使事情变得更加复杂，而且有些人说 installutil 也不好。但是由于我不知道会有多少服务，所以我必须像这样解决它。

并且使用 installutil 我也不会回滚？

有谁知道另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:06:23.703

您可以运行自定义操作来修补您的 MSI，包括要安装的服务元素。这种方法允许您从任何地方读取服务名称，并根据需要安装尽可能多的服务。

尽管对于稍后阅读您的安装程序源代码的人来说，这将是非常重要的。老实说，我从未使用过这种方法。但它应该工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:34:28.133

我最终这样做了

```
public static void Main(string[] args)
    {
            if (System.Environment.UserInteractive)
            {
                string parameter = string.Concat(args);
                switch (parameter)
                {
                    case "install":
                        ManagedInstallerClass.InstallHelper(new string[] { Assembly.GetExecutingAssembly().Location });
                        break;
                    case "uninstall":
                        ManagedInstallerClass.InstallHelper(new string[] { "/u", Assembly.GetExecutingAssembly().Location });
                        break;
                }
            }
            else
            {
                ServiceBase.Run(new WindowsService());
            }
        }
    } 
```

使我的服务可自行安装和卸载，然后进行自定义操作以安装和卸载它们

# php - MySQL NOW() 返回 00:33:33 01/01/70

> ID：14727034
> 
> 赞同：0
> 
> 时间：2013-02-06T10:42:17.387
> 
> 标签：php, mysql, date, time

我的 PHP 中有以下代码：

```
mysql_query("INSERT INTO wp_surveys_completed (score,survey_name,user_id,survey_date)
                VALUES ('".$cr."','Mission Completed (SponsorPay)','".$userid."',NOW())
            "); 
```

当日期值 NOW() 添加到数据库时，它返回的不是当前日期和时间，而是始终相同的日期：“00:33:33 01/01/70”。

我的问题是：我该如何解决这个问题，所以它会输出日期和时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:16:07.833

更改列类型`survey_field`

```
ALTER TABLE  `table_name` CHANGE `column_name` DATETIME  DEFAULT NULL 
```

# wpf - 如何使用 WPF 和 WCF 发送和接收通知

> ID：14727035
> 
> 赞同：2
> 
> 时间：2013-02-06T10:42:19.667
> 
> 标签：wpf, wcf, wcf-data-services

我将 WPF 和 WCF 用于客户端服务器应用程序。但我有一个问题。

如何将客户端的任何更新通知给其他客户端。

1.  服务器(WCF)
2.  客户端1（WPF）
3.  客户端2（WPF）

如果 client1 输入任何新记录，立即通知发送到 client2。

请建议我完成这项完整任务的最佳方法。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:19:55.593

我们通过使用[WCF Duplex Services](http://msdn.microsoft.com/en-us/library/ms731064.aspx)实现了这样的要求。您可以通过谷歌搜索有关实现双工服务的足够信息。

基本上;

*   客户端在注册到双工服务时发送一个客户端标识符（为每个客户端唯一生成）。
*   当 WCF 服务更新数据时，向所有注册的客户端推送更新通知（包括通知源的客户端标识符）
*   客户端在收到通知时会检查发起者的标识符。丢弃由自身引起的通知。

几点注意事项：

*   您可以在推送通知负载中包含有关更新数据的所有内容，以了解更改类型或实体类型。
*   双工服务支持的不同绑定。如果客户端和服务在同一个网络中并且 .net 依赖性不成问题，则建议使用 nettcpbinding。[您可以从此处](http://msdn.microsoft.com/en-us/library/ms730879.aspx)或[此处](http://www.danrigsby.com/blog/index.php/2008/01/19/wcf-binding-comparision-list-and-supported-features-reference/)找到有关支持绑定类型的更多信息。

# powershell - PowerShell - 在远程机器上执行脚本给出错误

> ID：14727036
> 
> 赞同：6
> 
> 时间：2013-02-06T10:42:26.107
> 
> 标签：powershell, powershell-remoting

以下内容对我不起作用 -

```
%WINDIR%\System32\WindowsPowerShell\v1.0\powershell.exe -NoProfile -Noninteractive -command "& Invoke-Command -ComputerName "Spider_LT_86" -ScriptBlock { msiexec.exe /i "D:\3PDInstallers\ETLBackgroundWorkerSetup.msi" /qn /l*vx "D:\3PDInstallers\logs" }" 
```

我需要做的就是在远程机器上运行 msiexec。我假设运行脚本的用户需要访问远程机器。

即使计算机名称指向本地计算机，该脚本也不起作用（并且使用相同的登录用户运行 msiexec 可以正常工作，因此看起来不像权限问题） - 我已确保 WinRM 服务正在运行，而且我还禁用了防火墙以检查这是否是问题的原因，但到目前为止还没有运气。我在这里想念什么？

这是完整的错误，但它几乎列出了所有可能性 -

```
Connecting to remote server failed with the following error message : WinRM cannot process the request. The following error occured while using
Kerberos authentication: The network path was not found.
Possible causes are:
  -The user name or password specified are invalid.
  -Kerberos is used when no authentication method and no user name are specified.
  -Kerberos accepts domain user names, but not local user names.
  -The Service Principal Name (SPN) for the remote computer name and port does not exist.
  -The client and remote computers are in different domains and there is no trust between the two domains.
After checking for the above issues, try the following:
  -Check the Event Viewer for events related to authentication.
  -Change the authentication method; add the destination computer to the WinRM TrustedHosts configuration setting or use HTTPS transport.
Note that computers in the TrustedHosts list might not be authenticated.
   -For more information about WinRM configuration, run the following command: winrm help config. For more information, see the about_Remote_Troubleshooting He
lp topic.
    + CategoryInfo          : OpenError: (:) [], PSRemotingTransportException
    + FullyQualifiedErrorId : PSSessionStateBroken 
```

更新：

当我仅使用用户名使用 -Credentials 时，它会弹出一个登录窗口以获取我的密码，然后在输入密码时出现以下错误 - 用户确实具有管理员访问权限，所以我不知道出了什么问题。

这

[spider_lt_86] 连接到远程服务器失败并显示以下错误消息：访问被拒绝。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。+ CategoryInfo : OpenError: (:) [], PSRemotingTransportException + FullyQualifiedErrorId : PSSessionStateBroken

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:36:54.597

这更像是一种解决方法而不是答案，但是当您能够使用 wmi 时，为什么不尝试使用它创建远程进程呢？看看这里[http://www.lazywinadmin.com/2011/06/powershell-launchstart-process-on.html?m=1](http://www.lazywinadmin.com/2011/06/powershell-launchstart-process-on.html?m=1)

交换评论后，问题是您没有为远程主机提供具有管理权限的凭据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:41:36.787

您是否在计算机上设置了 TrustedHosts 以允许您连接到其他计算机？

在您尝试远程访问的计算机上运行此程序。

```
Set-Item  wsman::localhost\client\TrustedHosts *  
Restart-Service WinRm 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-26T20:06:26.287

有一点很清楚，错误消息“找不到网络路径”没有说明根本问题是什么。我在[Microsoft 论坛](https://social.technet.microsoft.com/Forums/windowsserver/en-US/78981c45-de6c-486d-b31e-1497f55dc9c4/winrm-the-network-path-was-not-found-help?forum=winserverpowershell "Microsoft 论坛中的帖子")上看到了一个帖子，其中一位受访者表示它曾经有效，但现在无效。那是我发现自己的地方。我确认我可以 ping 并且我可以通过网络查看共享，所以我知道网络部分可以正常工作。我重新启动了源服务器，但这似乎没有帮助。一旦我**重新启动目标服务器**，WinRM 错误就消失了，一切都重新开始工作。目前尚不清楚服务是否出现故障或行为不端，或者是否发生了不太明显的事情。重新启动后，我又遇到了一次失败（大约 20 次尝试），但随机失败在我们的环境中并不少见。

我会把它抛在脑后，以防它帮助别人。

# sql - Magento 创建表错误

> ID：14727037
> 
> 赞同：1
> 
> 时间：2013-02-06T10:42:27.957
> 
> 标签：sql, magento

我正在尝试运行一个脚本来在 Magento 中创建一个自定义表，但它给出了错误。这是我的脚本 -

```
<?php

    $installer = $this;
$installer->startSetup();
$installer->run("

-- DROP TABLE IF EXISTS {$this->getTable('module')};
CREATE TABLE {$this->getTable('module')} (
  'module_id' int(11) unsigned NOT NULL auto_increment,
  'cust_id' varchar(20) NOT NULL,
  PRIMARY KEY (`module_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
");
$installer->endSetup(); 
```

我的错误日志看起来像这样。

```
PDOException: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error     
in your SQL syntax; check the manual that corresponds to your MySQL server version for     
the right syntax to use near ''module_id' int(11) unsigned NOT NULL auto_increment,
'cust_id' varchar(20) NO' at line 3 in   
C:\wamp\www\magento\lib\Zend\Db\Statement\Pdo.php on line 228

Call Stack
/#TimeMemoryFunctionLocation
10.0019379872{main}(  )..\index.php:0
20.0114765224Mage::run(  )..\index.php:87
30.03492000528Mage_Core_Model_App->run(  )..\Mage.php:683
40.06713061480Mage_Core_Model_App->_initModules(  )..\App.php:343
51.13563312608Mage_Core_Model_Resource_Setup::applyAllUpdates(  )..\App.php:417
61.22758029488Mage_Core_Model_Resource_Setup->applyUpdates(  )..\Setup.php:235
71.22798027824Mage_Core_Model_Resource_Setup->_installResourceDb(  )..\Setup.php:327
81.22798027920Mage_Core_Model_Resource_Setup->_modifyResourceDb(  )..\Setup.php:421
91.23228033648include('C:\wamp\www\magento\app\code\community\module\sql\module_setup\mysql4-install-0.1.0.php' )..\Setup.php:624
101.23558112592Mage_Core_Model_Resource_Setup->run(  )..\mysql4-install-0.1.0.php:13
111.23558112592Varien_Db_Adapter_Pdo_Mysql->multiQuery(  )..\Setup.php:933
121.23558112592Varien_Db_Adapter_Pdo_Mysql->multi_query(  )..\Mysql.php:590) 
```

我正在运行 magento 1.7 和 mysql 版本 5.5.24。有什么线索吗？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:50:12.800

周围缺少花哨的报价`module_id`。使用这个查询，

```
DROP TABLE IF EXISTS {$this->getTable('module')};
CREATE TABLE {$this->getTable('module')} (
  `module_id` int(11) unsigned NOT NULL auto_increment,
  `cust_id` varchar(20) NOT NULL,
  PRIMARY KEY (`module_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# php - Laravel Eloquent：如何从连接表中仅获取某些列

> ID：14727038
> 
> 赞同：104
> 
> 时间：2013-02-06T10:42:40.233
> 
> 标签：php, laravel, eloquent

我在 Eloquent 中有 2 个连接表，即主题和用户。

**主题模型：**

```
public function user() {
  return $this->belongs_to('User');
} 
```

**用户模型：**

```
public function themes() {
  return $this->has_many('Theme');
} 
```

我的 Eloquent api 调用如下所示：

```
return Response::eloquent(Theme::with('user')->get()); 
```

它返回主题的所有列（很好），以及用户的所有列（不好）。我只需要用户模型中的“用户名”列，如何将查询限制为该列？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-04-25T02:37:47.050

更改模型以指定要选择的列：

```
public function user() {
  return $this->belongs_to('User')->select(array('id', 'username'));
} 
```

并且不要忘记包括您要加入的列。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-10-13T12:05:42.960

### 对于 Laravel >= 5.2

使用[->pluck()](https://laravel.com/docs/5.3/queries#retrieving-results)方法

```
$roles = DB::table('roles')->pluck('title'); 
```

> 如果您想检索包含单个列的值的数组，您可以使用 pluck 方法

* * *

### 对于 Laravel <= 5.1

使用[->lists()](https://laravel.com/docs/5.1/queries#retrieving-results)方法

```
$roles = DB::table('roles')->lists('title'); 
```

> 此方法将返回一个角色标题数组。您还可以为返回的数组指定自定义键列：

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-06-11T05:46:53.180

您可以在 get 参数中提供一个字段数组，如下所示：

```
return Response::eloquent(Theme::with('user')->get(array('user.username')); 
```

更新（对于 Laravel 5.2）从[docs](https://laravel.com/docs/5.2/queries#selects)，你可以这样做：

```
$response = DB::table('themes')
    ->select('themes.*', 'users.username')
    ->join('users', 'users.id', '=', 'themes.user_id')
    ->get(); 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-02-06T12:22:22.377

我知道，您要求 Eloquent，但您可以使用[Fluent Query Builder](http://laravel.com/docs/queries)

```
$data = DB::table('themes')
    ->join('users', 'users.id', '=', 'themes.user_id')
    ->get(array('themes.*', 'users.username')); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-02-16T15:46:23.410

我就是这样做的

```
$posts = Post::with(['category' => function($query){
        $query->select('id', 'name');
      }])->get(); 
```

user2317976 的第一个答案对我不起作用，我使用的是 laravel 5.1

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-04-25T04:28:36.040

另一种选择是利用`$hidden`模型上的属性来隐藏您不想显示的列。您可以动态定义此属性或在模型上设置默认值。

```
public static $hidden = array('password'); 
```

现在，当您返回 JSON 响应时，用户密码将被隐藏。

您也可以以类似的方式即时设置它。

```
User::$hidden = array('password'); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-06-30T13:06:14.243

与分页一起使用

```
$data = DB::table('themes')
->join('users', 'users.id', '=', 'themes.user_id')
->select('themes.*', 'users.username')
->paginate(6); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-10-22T02:52:47.250

user2317976 引入了一种很好的静态方法来选择相关表的列。

这是我发现的一个动态技巧，因此您可以在使用该模型时获得所需的任何内容：

```
return Response::eloquent(Theme::with(array('user' => function ($q) {
    $q->addSelect(array('id','username'))
}))->get(); 
```

我刚刚发现这个技巧也适用于 load() 。这非常方便。

```
$queriedTheme->load(array('user'=>function($q){$q->addSelect(..)}); 
```

确保您还包括目标表的键，否则它将无法找到它。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-03-03T05:46:20.217

这边走：

```
Post::with(array('user'=>function($query){
    $query->select('id','username');
}))->get(); 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-10-03T09:59:42.490

我知道这是一个老问题，但是如果您正在构建一个 API，就像问题的作者所做的那样，请使用输出转换器来执行此类任务。

Transofrmer 是实际数据库查询结果和控制器之间的一层。它允许轻松控制和修改将要输出给用户或 API 使用者的内容。

我推荐[Fractal](https://github.com/thephpleague/fractal)作为输出转换层的坚实基础。[您可以在此处](http://fractal.thephpleague.com/)阅读文档。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-07-17T16:57:27.547

在 Laravel 4 中，您可以通过在模型中添加以下内容来隐藏某些字段以防止返回。

```
protected $hidden = array('password','secret_field'); 
```

[http://laravel.com/docs/eloquent#converting-to-arrays-or-json](http://laravel.com/docs/eloquent#converting-to-arrays-or-json)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-01-20T15:16:44.070

在 Laravel 5.5 上，最简洁的方法是：

```
Theme::with('user:userid,name,address')->get() 
```

您添加一个冒号和您希望选择的字段，用逗号分隔，并且它们之间没有空格。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-10-05T09:35:44.683

**使用型号：**

```
Model::where('column','value')->get(['column1','column2','column3',...]); 
```

**使用查询生成器：**

```
DB::table('table_name')->where('column','value')->get(['column1','column2','column3',...]); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-14T10:50:41.300

If I good understood this what is returned is fine except you want to see only one column. If so this below should be much simpler:

```
return Response::eloquent(Theme::with('user')->get(['username'])); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-04T06:29:04.790

**#您可以从两个或三个不同的表中获取选定的列**

```
$users= DB::Table('profiles')->select('users.name','users.status','users.avatar','users.phone','profiles.user_id','profiles.full_name','profiles.email','profiles.experience','profiles.gender','profiles.profession','profiles.dob',)->join('users','profiles.user_id','=','users.id')
            ->paginate(10); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2013-02-06T12:32:12.693

签出， http: [//laravel.com/docs/database/eloquent#to-array](http://laravel.com/docs/database/eloquent#to-array)

您应该能够定义不希望在 api 中显示的列。

# ruby-on-rails - Rails 从一个邮件功能发送 2 封不同的电子邮件

> ID：14727042
> 
> 赞同：6
> 
> 时间：2013-02-06T10:42:56.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, actionmailer

我有必要这样做，因为这对我来说似乎是合乎逻辑的：

```
def notification(vehicle) 
   @vehicle = vehicle

   mail(:to => @vehicle.owner.email_address, :template_name => "n_o")
   mail(:to => @vehicle.booker.email_address, :template_name => "n_b") 
```

结尾

问题是：我只收到**最后**一封电子邮件。因此，在我上面的示例中，只有预订者会收到电子邮件，而不会向所有者发送任何内容。

问题是什么 ？如何解决？我应该创建两个单独的邮件功能，例如 notification_owner(vehicle) 和 notification_booker(vehicle)，还是有更简单的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:51:50.360

好的。所以，愚蠢的我，我忘了提到我正在处理delayed_jobs gem。所以，问题是，我忘了指定“.deliver！” 每个“邮件”功能后的操作。

所以，它应该是这样的：

```
mail(:to => @vehicle.owner.email_address, :template_name => "n_o").deliver!
mail(:to => @vehicle.booker.email_address, :template_name => "n_b").deliver! 
```

但还是。谢谢您的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:00:52.720

尝试：

```
def notification(vehicle,template_name) 
  @vehicle = vehicle
  mail(:to => @vehicle.owner.email_address, :template_name => template_name)
end

Mailer.notification(@vehicle,"n_o").deliver 
Mailer.notification(@vehicle,"n_b").deliver 
```

# arrays - 从 jsonarray 中删除元素

> ID：14727043
> 
> 赞同：0
> 
> 时间：2013-02-06T10:42:56.797
> 
> 标签：arrays

我的 JSONArray 是

```
[
{"name":"Test_1","address":"test1"},
{"name":"Test_2","address":"test2"},
{...},
...] 
```

我想删除第一个元素，即 JSONArray 在删除第一个元素后应该是这样的

```
[
{"name":"Test_2","address":"test2"},
{...},
...] 
```

我怎样才能在java中实现呢？您的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T09:17:00.957

假设您的数据位于名为 myJsonArray 的 org.json.simple.JSONArray 中，您可以使用 remove 方法简单地删除它：

```
myJsonArray.remove(0); 
```

然后，您可以使用 toJSONString() 方法从您的 jsonArray 附加到的 JSONObject 中检索字符串表示形式。

# typescript - String 和 string 类型有什么区别？

> ID：14727044
> 
> 赞同：402
> 
> 时间：2013-02-06T10:43:00.360
> 
> 标签：typescript

有人知道TypeScript`String`和`string`TypeScript 之间的区别吗？我是否正确假设它们应该是相同的？

```
var a: String = "test";
var b: string = "another test";
a = b;
b = a; // this gives a compiler error! 
```

当前版本的编译器说：

```
Type 'String' is not assignable to type 'string'.
  'string' is a primitive, but 'String' is a wrapper object.
     Prefer using 'string' when possible. 
```

那是一个错误吗？

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2013-02-06T11:04:06.760

这是一个显示差异的示例，这将有助于解释。

```
var s1 = new String("Avoid newing things where possible");
var s2 = "A string, in TypeScript of type 'string'";
var s3: string; 
```

`String`是 JavaScript 字符串类型，您*可以*使用它来创建新字符串。没有人这样做，因为在 JavaScript 中文字被认为更好，因此`s2`在上面的示例中创建了一个新字符串，而不使用`new`关键字，也没有显式使用`String`对象。

`string`是 TypeScript 字符串类型，可以用来输入变量、参数和返回值。

补充笔记...

目前（2013 年 2 月）两者`s1`和`s2`都是有效的 JavaScript。`s3`是有效的 TypeScript。

的使用`String`。您可能永远不需要使用它，字符串文字被普遍认为是初始化字符串的正确方法。在 JavaScript 中，使用对象字面量和数组字面量也被认为更好：

```
var arr = []; // not var arr = new Array();
var obj = {}; // not var obj = new Object(); 
```

如果你真的喜欢字符串，你可以在 TypeScript 中以两种方式之一使用它......

```
var str: String = new String("Hello world"); // Uses the JavaScript String object
var str: string = String("Hello World"); // Uses the TypeScript string type 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2016-01-25T13:19:16.903

这两种类型在 JavaScript 和 TypeScript 中是不同的——TypeScript 只是为我们提供了注释和检查类型的语法。

`String` refers to an object instance that has `String.prototype` in its prototype chain. You can get such an instance in various ways e.g. `new String('foo')` and `Object('foo')`. You can test for an instance of the `String` type with the `instanceof` operator, e.g. `myString instanceof String`.

`string` is one of JavaScript's primitive types, and `string` values are primarily created with literals e.g. `'foo'` and `"bar"`, and as the result type of various functions and operators. You can test for `string` type using `typeof myString === 'string'`.

The vast majority of the time, `string` is the type you should be using - almost all API interfaces that take or return strings will use it. All JS primitive types will be wrapped ([boxed](http://www.jisaacks.com/javascript-boxing/)) with their corresponding object types when using them as objects, e.g. accessing properties or calling methods. Since `String` is currently declared as an interface rather than a class in [TypeScript's core library](https://github.com/Microsoft/TypeScript/blob/v1.7.5/src/lib/core.d.ts#L263), structural typing means that `string` is considered a subtype of `String` which is why your first line passes compilation type checks.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-05-29T07:56:41.683

For quick readers:

**Don’t** ever **use** the types Number, **String**, Boolean, Symbol, or Object These types refer to non-primitive boxed objects that are almost never used appropriately in JavaScript code.

> source: [https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-07-19T12:33:59.397

In JavaScript strings can be either string primitive type or string objects. The following code shows the distinction:

```
var a: string = 'test'; // string literal
var b: String = new String('another test'); // string wrapper object

console.log(typeof a); // string
console.log(typeof b); // object 
```

Your error:

> Type 'String' is not assignable to type 'string'. 'string' is a primitive, but 'String' is a wrapper object. Prefer using 'string' when possible.

Is thrown by the TS compiler because you tried to assign the type `string` to a string object type (created via `new` keyword). The compiler is telling you that you should use the type `string` only for strings primitive types and you can't use this type to describe string object types.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-02-15T04:57:41.063

# TypeScript: `String` vs `string`

> Argument of type 'String' is not assignable to parameter of type 'string'.
> 
> 'string' is a primitive, but 'String' is a wrapper object.
> 
> Prefer using 'string' when possible.

## demo

> String Object

```
// error
class SVGStorageUtils {
  store: object;
  constructor(store: object) {
    this.store = store;
  }
  setData(key: String = ``, data: object) {
    sessionStorage.setItem(key, JSON.stringify(data));
  }
  getData(key: String = ``) {
    const obj = JSON.parse(sessionStorage.getItem(key));
  }
} 
```

> string primitive

```
// ok
class SVGStorageUtils {
  store: object;
  constructor(store: object) {
    this.store = store;
  }
  setData(key: string = ``, data: object) {
    sessionStorage.setItem(key, JSON.stringify(data));
  }
  getData(key: string = ``) {
    const obj = JSON.parse(sessionStorage.getItem(key));
  }
} 
```

[![enter image description here](../Images/3b42d36a973e4aaa04481f520c258633.png)](https://i.stack.imgur.com/pxtuE.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-07-21T23:15:07.807

# Simple answer:

*   `string` => is a type. e.g. console.log(typeof 'foo') // string
*   `String` => is an object with some methods to create and manipulate strings.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-07T12:39:11.520

*Based on my personal reference*

*   `string` is a type in JavaScript.
*   `String`; in JavaScript, all the strings are represented as an instance of `String class`. [Read this short article to learn a bit more about the String class](https://www.c-sharpcorner.com/blogs/working-with-string-class-properties-using-javascript1#:%7E:text=A%20string%20is%20a%20sequence,member%20of%20the%20global%20objects.)

**Prefer the `string` over the `String`**

# c# - 作为触发事件的原因的对象的命名约定是什么？

> ID：14727050
> 
> 赞同：0
> 
> 时间：2013-02-06T10:43:24.127
> 
> 标签：c#, .net, naming-conventions

想象一下，您有不同类型的对象。如果这些对象处于特定状态，则会创建 NotificationMessage。

如果您需要创建一个将返回作为 NotificationMessage 原因的对象的属性，您将如何命名此属性？

或者，如果我将其概括为一个命名约定：在命名一个作为触发事件的主要原因的变量时，命名约定是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:32:01.427

通常在被调用的事件中你会得到 Sender 对象：

```
private void button1_Click(object sender, System.EventArgs e) 
```

您可以使用 Sender 前缀，这样您就不会与 C# 的命名约定发生冲突。

# ruby-on-rails - 查找购买总和

> ID：14727051
> 
> 赞同：1
> 
> 时间：2013-02-06T10:43:24.547
> 
> 标签：ruby-on-rails, ruby, sum

每个`User`都有很多`Purchases`。我想找到前 28 天中每一天的总和。

```
t1 = Time.now - (28.days)
t2 = Time.now
@dailysum = Array.new(29)
(0..29).each do |i|
  @dailysum[i] = @user.purchases.where(:created_at => (Time.now-(i.day))..(Time.now-((i-1).days))).sum(:amount)
end 
```

这行得通，但我确信有更好的方法来解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:58:45.430

您需要传递一个`:group`选项来求和。该`:group`选项的值因您的数据库而异。我将提供一个 pg 和 mysql 版本。

```
# purchases.rb
def self.recent(num)
  where('created_at > ?', num.days.ago
end

# PG version
@user.purchases.recent.sum(:amount, group: "DATE_PART('year', purchases.created_at) || '-' || DATE_PART('month', purchases.created_at) || '-' || DATE_PART('day', purchases.created_at)")

# mysql version
@user.purchases.recent.sum(:amount, group: "DATE(purchases.created_at)") 
```

这将产生一个哈希，其中键是日期，值是购买的总和。

**与过去 28 天内每天的查询相比，这将减少 27 个查询**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:14:51.940

## /!\ 查看我的另一个（更好的）答案

此答案将计算过去 28 天的购买**总额**

阅读我的其他答案以计算过去 28 天的**总和。**

我为那些可能对此感兴趣的人保留了这个在线。

* * *

```
@user.purchases
    .where('created_at > ?', 28.days.ago) # retrieve all purchases within the last 28 days
    .sum(:amount)                         # get the sum of the amount column 
```

如果您想使用@andy 建议的范围：

```
# in purchase.rb
scope :recent, ->(d) { where('created_at > ?', d.days.ago) }

# then in you controller
@user.purchases
  .recent(28)          # retrieve all purchases within the last 28 days
  .sum(:amount)        # get the sum of the amount column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:20:55.820

现在我已经更好地理解了这个问题，这是第二次尝试。

脱离上下文很难做到这一点。

```
user.purchases
  .where('created_at > ?', 28.days.ago)
  .group_by { |p| p.created_at.to_date }
  .collect { |d, ps| [d, ps.sum { |p| p.amount }]  } 
```

这应该返回一个数组数组，其中包含每个日期和该日期的金额总和：

```
[
  ["Mon, 28 Jan 2013", 137],
  ["Tue, 29 Jan 2013", 49]
  ["Wed, 30 Jan 2013", 237]
] 
```

# php - PHP：多维数组foreach回显形式传递第三个值

> ID：14727055
> 
> 赞同：1
> 
> 时间：2013-02-06T10:43:28.667
> 
> 标签：php, arrays, forms, loops, foreach

嗨，我从多维数组中的表单值传递。我传递的值看起来像这样。第三个值是从 html 表单传递的。

```
<input type=\"text\" name=\"input[".$row[Id]."][".$record[Name]."][]\" size=\"2\" />

input[1][1][]
input[1][2][]
input[1][3][]
input[2][1][]
input[2][2][]
input[2][3][] 
```

然后我尝试寻找他们，但我被困住了。

```
foreach($_POST[input] as $name => $value){
    foreach($value as $inner_value =>$value){
        foreach($value as $inner_inner_value => $value){
            echo "Menu: {$name} submenu: {$inner_value} subsubmenu :{$inner_inner_value}\n<br><br>";
        }
    }
} 
```

它呼应了这一点：

```
Menu:1 submenu: 1 subsubmenu: 0
Menu:1 submenu: 2 subsubmenu: 0
Menu:1 submenu: 3 subsubmenu: 0
Menu:2 submenu: 1 subsubmenu: 0
Menu:2 submenu: 2 subsubmenu: 0
Menu:2 submenu: 3 subsubmenu: 0 
```

但我需要实现这一点

```
Menu:1 submenu: 1 subsubmenu: value entered into form field.
Menu:1 submenu: 2 subsubmenu: value entered into form field.
Menu:1 submenu: 3 subsubmenu: value entered into form field.
Menu:2 submenu: 1 subsubmenu: value entered into form field.
Menu:2 submenu: 2 subsubmenu: value entered into form field.
Menu:2 submenu: 3 subsubmenu: value entered into form field. 
```

第三个值是从 HTML 发布的，基本上我不知道如何使用表单将第三个值传递给数组。

```
<input type="text" name="input[THIS IS OK][THIS IS OK][value ENTERED in FORM FIELD???]" size="2" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:49:13.007

我不知道我是否知道您的问题是什么，但如果这是我认为这会解决的问题...如果您发布输入[这没问题] [这没问题]，并且第三维度是此输入的值输入帖子然后您应该更改输入元素的名称/ ID，就像

input[THIS IS OK][THIS IS OK] 当你发布你可以得到价值 $val= $_POST[input[".$i."][".$j."]"]; 和这个 $val将保留您想要的帖子或第三维度的值......并且您拥有它 $i-first 维度 $j-second 维度和 $val-third 维度？

那是你要找的吗？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:54:27.790

尝试一下：

```
protected $printString = '';
function magicRecursiveArrayRunner($someArray){
    if(is_array($someArray)){
        foreach($someArray as $key=>$value){
            if(is_array($value)){
                $this->printString .= "Menu ".$key;
                self::magicRecusiveArrayRunner($value);
            }else{
                $this->printString .= " submenu ".$key;
            }
        }
    }else{
         $this->printString .= " subsubmenu ".$key . '\br';
    }
} 
```

# sql-server - 无法从网络上的 PC 访问我的 WPF 应用程序中的数据库（.mdf 文件）

> ID：14727058
> 
> 赞同：1
> 
> 时间：2013-02-06T10:43:33.580
> 
> 标签：sql-server, wpf

我创建了一个连接到一些 sql 数据库表的 wpf 应用程序。当我在我的电脑上运行此应用程序时，一切正常，但是当我尝试从本地网络上的其他电脑上运行它时，出现错误：“文件（“文件名”）位于不受支持的网络路径上用于数据库文件”。

创建必须从共享公共数据库的本地网络上的某些 PC 运行的 WPF 应用程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:47:54.330

您是否考虑过数据库服务器、SQL Server、MySQL 或类似的东西？如果您真的想坚持使用基于文件的数据库（出于安全原因，我不建议这样做），那么您可以使用 SQLite 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:23:43.527

如果您启用了“命名管道”，您将只能从另一台 PC 连接到您的服务器（在这种情况下是您的 PC）实例。如果需要，您还可以启用 TCP\IP 等，但这可能是您收到错误的原因。

命名管道在 MSSQL 的 Compact 或 Free 版本中不可用。

具有适当版本的 MSSQL 的数据库服务器或 PC 是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:07:56.550

yepppp 解决了。感谢您的回答。我做了一些事情最终解决了我的问题： 1\. 从连接字符串中删除“uid=Tomer, pwd=, and pooling=False”。2\. 在防火墙中启用端口 1433（sql 端口）。3\. 如前所述，启用 TCP/IP 和“命名管道”。

非常感谢你的帮助。

# php - 集中式用户数据库

> ID：14727060
> 
> 赞同：2
> 
> 时间：2013-02-06T10:43:45.700
> 
> 标签：php, database, authentication

我想知道，大公司如何处理用户帐户并允许不同的应用程序访问它们。

例如，我的站点将具有用户将用于注册帐户的主站点、一个论坛和一个独立的桌面应用程序。

如何统一这 3 个系统，以便一个用户可以使用同一帐户登录所有 3 个系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:52:23.500

也许他们正在使用 LDAP（或操作系统特定的目录服务，即 Active Directory）？

基本上，您所做的是将有关用户的所有信息保存在 LDAP 目录中，然后配置其他软件以使用 LDAP。许多开源项目允许通过 LDAP 进行身份验证。

# java - AJAX：同时两个请求

> ID：14727061
> 
> 赞同：2
> 
> 时间：2013-02-06T10:43:59.787
> 
> 标签：java, jquery, html, ajax, servlets

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。

我是新手`AJAX`和`JQuery`。

我正在从我的`jsp`页面发送两个请求以`servlet`使用以下**代码：**

```
$(document).ready(function()
{
        var $ul = $(SALUTATION);
        $.get('MyServletName?action=cmbSALUTATION', function(responseJson) 
        {
            $.each(responseJson, function(index, item)
            { 
                $('<option>').text(item).appendTo($ul);
            });
        });
        setValSALUTATION(); 
});

function setValSALUTATION()
{
        $.get('ProfileContactsMain?action=cmbSALUTATIONValue', function(responseJson)
        {
            $.each(responseJson, function(index, item) 
            {
            $("#SALUTATION").val(item);
            });
        });
} 
```

第一个填充 html 中的值`combobox`，第二个设置`combobox`数据库中该记录的值。每次都会填充组合框，但不会每次都设置特定记录的值，有时会`setValSALUTATION()`在数据加载到组合框之前执行。

那么我的代码有什么问题吗？或者有没有更好的方法来做到这一点......

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:46:06.047

```
 $(document).ready(function()
    {
            var $ul = $(SALUTATION);
            $.get('MyServletName?action=cmbSALUTATION', function(responseJson) 
            {
                $.each(responseJson, function(index, item)
                { 
                    $('<option value=' + item +'>').text(item).appendTo($ul);
                });
 setValSALUTATION(); 
            });

    });

function setValSALUTATION()
{
        $.get('ProfileContactsMain?action=cmbSALUTATIONValue', function(responseJson)
        {
            $.each(responseJson, function(index, item) 
            {
            $("#SALUTATION").val(item);
            });
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:46:20.163

因为请求是异步的，所以您需要在第一个请求完成后发出第二个请求。为此，将函数调用放在第一个请求的回调中，如下所示：

```
$.get(
    'MyServletName?action=cmbSALUTATION', 
    function(responseJson) {
        $.each(responseJson, function(index, item) { 
            $('<option>').text(item).appendTo($ul);
        });
        setValSALUTATION(); // Note: inside callback, so it will execute 
                            // once DOM is in the proper state
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:49:17.627

AJAX 意思是“异步 Javascript”对，所以请求将是异步的，这意味着不能保证哪个会先执行。对于您的情况，您需要一个同步操作（一个调用应该在另一个调用之后，它们不是相互独立的）所以

尝试将您的代码更改为：

```
$.get('MyServletName?action=cmbSALUTATION', function(responseJson) 
{
   $.each(responseJson, function(index, item)
   { 
      $('<option>').text(item).appendTo($ul);
   });
   setValSALUTATION(); 
}); 
```

这将确保`setSalutation`仅在填充复选框后调用。

# javascript - 正则表达式 - 匹配类似 IRC 的参数？

> ID：14727065
> 
> 赞同：3
> 
> 时间：2013-02-06T10:44:12.333
> 
> 标签：javascript, regex, string-parsing

我正在寻找创建类似 IRC 的命令格式：

```
/commandname parameter1 "parameter 2" "parameter \"3\"" parameter"4 parameter\"5 
```

这将（理想情况下）给我一个参数列表：

```
parameter1
parameter 2
parameter "3"
parameter"4
parameter\"5 
```

现在从我所读的内容来看，这根本不是微不足道的，也可以用其他方法来完成。

想法？

下面是完成我需要的工作的 C# 代码：

```
public List<string> ParseIrcCommand(string command)
    {
        command = command.Trim();
        command = command.TrimStart(new char[] { '/' });
        command += ' ';

        List<string> Tokens = new List<string>();

        int tokenStart = 0;
        bool inQuotes = false;
        bool inToken = true;
        string currentToken = "";
        for (int i = tokenStart; i < command.Length; i++)
        {
            char currentChar = command[i];
            char nextChar = (i + 1 >= command.Length ? ' ' : command[i + 1]);

            if (!inQuotes && inToken && currentChar == ' ')
            {
                Tokens.Add(currentToken);
                currentToken = "";
                inToken = false;
                continue;
            }

            if (inQuotes && inToken && currentChar == '"')
            {
                Tokens.Add(currentToken);
                currentToken = "";
                inQuotes = false;
                inToken = false;
                if (nextChar == ' ') i++;
                continue;
            }

            if (inQuotes && inToken && currentChar == '\\' && nextChar == '"')
            {
                i++;
                currentToken += nextChar;
                continue;
            }

            if (!inToken && currentChar != ' ')
            {
                inToken = true;
                tokenStart = i;
                if (currentChar == '"')
                {
                    tokenStart++;
                    inQuotes = true;
                    continue;
                }
            }

            currentToken += currentChar;
        }

        return Tokens;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:46:07.223

您已经展示了您的代码 - 这很好，但您似乎没有考虑过这样解析命令是否合理：

*   首先，您的代码将允许命令名称和参数中包含换行符。如果您假设换行符永远不会出现，那将是合理的。
*   其次，`\`也需要像 一样进行转义，因为无法在参数末尾`"`指定单个而不引起任何混淆。`\`
*   第三，将命令名称以与参数相同的方式解析有点奇怪——命令名称通常是自行确定和固定的，因此不需要灵活的方式来指定它。

我想不出 JavaScript 中*通用*的单行解决方案。JavaScript 正则表达式缺少`\G`，它断言最后一个匹配边界。因此，我的解决方案将不得不处理字符串断言的开头`^`并在匹配令牌时切掉字符串。

（这里代码不多，主要是注释）

```
function parseCommand(str) {
    /*
     * Trim() in C# will trim off all whitespace characters
     * \s in JavaScript regex also match any whitespace character
     * However, the set of characters considered as whitespace might not be
     * equivalent
     * But you can be sure that \r, \n, \t, space (ASCII 32) are included.
     * 
     * However, allowing all those whitespace characters in the command
     * is questionable.
     */
    str = str.replace(/^\s*\//, "");

    /* Look-ahead (?!") is needed to prevent matching of quoted parameter with
     * missing closing quote
     * The look-ahead comes from the fact that your code does not backtrack
     * while the regex engine will backtrack. Possessive qualifier can prevent
     * backtracking, but it is not supported by JavaScript RegExp.
     *
     * We emulate the effect of \G by using ^ and repeatedly chomping off
     * the string.
     *
     * The regex will match 2 cases:
     * (?!")([^ ]+)
     * This will match non-quoted tokens, which are not allowed to 
     * contain spaces
     * The token is captured into capturing group 1
     *
     * "((?:[^\\"]|\\[\\"])*)"
     * This will match quoted tokens, which consists of 0 or more:
     * non-quote-or-backslash [^\\"] OR escaped quote \"
     * OR escaped backslash \\
     * The text inside the quote is captured into capturing group 2
     */
    var regex = /^ *(?:(?!")([^ ]+)|"((?:[^\\"]|\\[\\"])*)")/;
    var tokens = [];
    var arr;

    while ((arr = str.match(regex)) !== null) {
        if (arr[1] !== void 0) {
            // Non-space token
            tokens.push(arr[1]);
        } else {
            // Quoted token, needs extra processing to
            // convert escaped character back
            tokens.push(arr[2].replace(/\\([\\"])/g, '$1'));
        }

        // Remove the matched text
        str = str.substring(arr[0].length);
    }

    // Test that the leftover consists of only space characters
    if (/^ *$/.test(str)) {
        return tokens;
    } else {
        // The only way to reach here is opened quoted token
        // Your code returns the tokens successfully parsed
        // but I think it is better to show an error here.
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:31:37.560

我创建了一个与您编写的命令行匹配的简单正则表达式。

```
/\w+\s((("([^\\"]*\\")*[^\\"]*")|[^ ]+)(\b|\s+))+$ 
```

*   `/\w+\s`找到命令的第一部分
*   `(((`
*   `"([^\\"]*\\")*`查找以`"`不包含`\"`后跟`\"`一个或多次的任何字符串（因此允许`"something\"`，`"some\"thing\"`依此类推
*   `[^\\"]*"`后跟一个不包含`\`or的字符列表`"`，最后是一个`"`
*   `)|[^ ]+`这是另一种选择：查找任何非空格字符序列
*   `)`
*   `(\b|\s+)`所有跟随者由空格或单词边界
*   `)+$`一次或多次，每个命令一次，直到字符串结束

我担心这有时会失败，但我发布这个是为了表明有时参数具有基于重复的结构，例如查看`"something\"something\"something\"end"`重复结构在哪里`something\"`，你可以使用这个想法来构建你的正则表达式

# android - Android：使用 AsyncTask 连接互联网的异步进程

> ID：14727067
> 
> 赞同：0
> 
> 时间：2013-02-06T10:44:15.770
> 
> 标签：android, multithreading, android-activity, android-asynctask

对于我的 Android 应用程序，我需要从活动中调用网页，并等待从远程服务器收到响应。所以我想我需要使用一个新线程。我可以使用 AsynkTask 吗？我如何告诉我的活动它必须等待响应 AsynkTask 进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:56:42.647

是的，您可以使用`AsyncTask`

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)有一个名为的方法`onPostExecute()`，它可以让您知道您的后台进程何时完成，在这种情况下，从服务器加载数据。

[这](http://labs.makemachine.net/2010/05/android-asynctask-example/)是一个很好的教程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:47:07.337

检查[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

您可以使用回调来通知活动任务已完成检查[https://stackoverflow.com/a/13947857/1434631](https://stackoverflow.com/a/13947857/1434631)

# iphone - 在 iOS 中加密和解密密码

> ID：14727082
> 
> 赞同：1
> 
> 时间：2013-02-06T10:45:20.840
> 
> 标签：iphone, ios, security, ios5, ios6

我想在 iOS 中加密密码。

```
NSData *dataIn = [@"Now is the time for all good computers to come to the aid of their masters." dataUsingEncoding:NSASCIIStringEncoding];
NSMutableData *macOut = [NSMutableData dataWithLength:CC_SHA256_DIGEST_LENGTH];

CC_SHA256(dataIn.bytes, dataIn.length,  macOut.mutableBytes);

NSLog(@"dataIn: %@", dataIn);
NSLog(@"macOut: %@", macOut); 
```

我想用指定的键创建。有没有办法做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:48:18.470

你实际上并没有加密你的字符串，只使用 SHA2 散列。要使用真实密钥进行加密，您应该使用 CCCrypt() 进行实际加密。

我建议看：http: [//developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man3/CCCrypt.3cc.html](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man3/CCCrypt.3cc.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-22T04:29:51.853

使用OpenSSL库加解密： [https ://github.com/zeeshankhan/ZKOpenSSLPlay](https://github.com/zeeshankhan/ZKOpenSSLPlay)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T10:47:57.393

如果可以使用 NSString，你可以下载 NSString Additions。

好教程[在这里](http://web.archive.org/web/20130116155209/http://mobiledevelopertips.com/core-services/create-md5-hash-from-nsstring-nsdata-or-file.html)

# c# - 处理而不将输出写入控制台

> ID：14727083
> 
> 赞同：0
> 
> 时间：2013-02-06T10:45:21.883
> 
> 标签：c#, php, linux, mono

我有一个 PHP 脚本，它执行我的程序，我的程序启动另一个进程。但问题是，每次写入控制台输出时执行的 PHP 库存......我用 -A -m -d 参数测试了屏幕，但它没有打开进程（程序运行正常，但进程没有启动）。我不能用 C# 将输出写入控制台吗？或者如何忽略 PHP 并继续使用脚本？

比x好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T14:24:39.347

你可以用它`System.IO.Stream.Null`来做到这一点：

```
using System;
using System.IO;

Console.SetOut(new StreamWriter(Stream.Null)); 
```

# java - 你能编组一个没有父标签的对象吗？

> ID：14727084
> 
> 赞同：3
> 
> 时间：2013-02-06T10:45:26.790
> 
> 标签：java, jaxb

我有以下课程。编组时，我想省略标签“config”，可以吗？

```
@XmlRootElement(name = "config")
@XmlAccessorType(XmlAccessType.FIELD)
public static class Config {

        @XmlElement(name = "dry-run")
        protected Boolean dryRun;

        @XmlElementWrapper(name = "filters")
        @XmlElement(name = "filter")
        protected List<String> filters;

        public Boolean isDryRun() {
                return dryRun;
        }

        public void setDryRun(boolean dryRun) {
                this.dryRun = dryRun;
        }

        public List<String> getFilters() {
                return filters;
        }
} 
```

**例子：**

*电流输出：*

```
<Root>
  <config xmlns:wf="nspace">
    <dry-run>false</dry-run>
    <filters>
      <filter>
        myFilter
      </filter>
    </filters>
  </config>
</Root> 
```

*期望的输出：*

```
<Root>
    <dry-run>false</dry-run>
    <filters>
      <filter>
        myFilter
      </filter>
    </filters>
</Root> 
```

**更新：**

我只想知道“是否只能使用 JAXB 来完成？”。只需检查这个[问题（不是答案）](http://www.coderanch.com/t/129773/XML/Marshalling-JAXB-Parent-tag)，我不明白他是如何仅使用 JAXB 进行编组且未编写根元素的。这正是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:46:06.410

因此，您不想将对象编组到单个 XML 子树，而是编组到 XML 片段，即没有父级的兄弟姐妹列表。我相信 Jaxb 本身无法实现这一点。但是您可以序列化为某种中间形式并对其进行处理。例如，您可以创建自己的 SAX`ContentHandler`并拥有该处理程序计数深度，并且仅在非零嵌套深度处委托事件。

```
class NoRoot extends XMLFilterImpl {

  private int depth;

  @Override public void startDocument() throws SAXException
  {
    depth = 0;
  }

  @Override public void startElement(String uri, String localName,
                                     String qName, Attributes atts)
    throws SAXException
  {
    if (depth != 0) super.startElement(uri, localName, qName, atts);
    ++depth;
  }

  @Override public void endElement(String uri, String localName,
                                   String qName)
    throws SAXException
  {
    --depth;
    if (depth != 0) super.endElement(uri, localName, qName);
  }

} 
```

# windows - 使用 4 种不同的操作选项对文件夹中的所有文件运行 exe 文件

> ID：14727088
> 
> 赞同：-2
> 
> 时间：2013-02-06T10:45:31.360
> 
> 标签：windows, batch-file, dos

我想在一个文件夹中的所有文件上运行一个 exe 文件，它有 4 个不同的操作选项。所以每个文件都会产生 4 个不同的输出，我希望所有 4 个输出都有不同的名称。请在您的回复中详细说明，因为我不擅长编写脚本。问候！

好的，这是我想要自动化的示例代码：

```
 exefile -p1 1 -p2 2 -i inputfile.etc -o inputfile_12.etc 
  exefile -p1 3 -p2 4 -i inputfile.etc -o inputfile_34.etc 
  exefile -p1 5 -p2 6 -i inputfile.etc -o inputfile_56.etc 
  exefile -p1 7 -p2 8 -i inputfile.etc -o inputfile_78.etc 
```

脚本应该从文件夹中获取所有文件名，执行这些操作，并使用修改后的文件名保存输出。

谢谢！

你好，我需要改进一下。它应该读取文件夹中的所有文件（两个不同的扩展名）并匹配文件名以实现相似性但扩展名不同。每个文件都有一个非常相似的文件，但具有另一个扩展名。因此，两个匹配的文件名应该在两个可以传递给后续操作命令的变量中可用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:49:44.753

```
setlocal enabledelayedexpansion
set /a num=1
for %%a in (C:\folder\*.*) do (
exefile -p1 1 -p2 2 -i %%a -o %%~na!num!%%~xa
set /a num+=1
) 
```

# java - 检查特定模式

> ID：14727090
> 
> 赞同：1
> 
> 时间：2013-02-06T10:45:37.433
> 
> 标签：java, regex

我想检查一个字符串是否处于某种模式。

例如我想检查一个字符串是否匹配模式：2012-02-20。

IE: xxxx-xx-xx 当 x 是一个数字。

是否可以？有人说正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:46:50.640

使用这个正则表达式`\d{4}-\d{2}-\d{2}`

检查用途：

```
yourString.matches(regexString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:50:08.757

您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)解析方法来做到这一点：

```
final SimpleDateFormat format = new SimpleDateFormat("yyyy/MM/dd");

boolean matchesDateFormat(String date)
{
    try
    {
        format.parse(date);
        return true;
    }
    catch(ParseException e)
    {
        return false;
    }
} 
```

当然，如果您稍后继续解析日期，那么您可以跳过这个并尝试解析它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T10:51:30.020

如果要测试日期字符串是否为有效日期，最好使用`SimpleDateFormat`检查。不要使用正则表达式进行验证，月份是 13 怎么样？日期是 50？闰年？

一些例子：

```
public boolean isValidDate(String dateString) {
    SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
    try {
        df.parse(dateString);
        return true;
    } catch (ParseException e) {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T11:43:29.620

您可以使用@burning_LEGION 的正则表达式检查字符串是否遵循 4 位数字、一个破折号`-`、2 个数字、一个破折号和 2 个数字的确切格式。`-`但是，它不检查字符串是否代表有效日期。您可以指定`9999-99-99`，它将通过验证。

使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)是检查字符串是否为有效日期并且它遵循给定的表示格式的正确方法。SimpleDateFormat，除了[格式化一个日期](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)，也可以用来从字符串解析日期：[`parse(String)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)，[`parse(String, ParsePosition)`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)。

默认情况下， SimpleDateFormat 是**lenient**，这意味着它将允许无意义的日期，例如`2013-025-234`通过。使用[`setLenient(boolean lenient)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)to`false`将解决这个问题。

然而，另一个问题是它也会忽略任何在有效日期之后的垃圾数据（例如`2012-03-23garbage#$%$#%`）。设置 lenient 并不能解决这个问题。我们需要用`parse(String, ParsePosition)`方法检查最后一个位置。

```
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd");
// Make the parsing strict - otherwise, it is worse than regex solution
dateFormatter.setLenient(false); 

Date date = null;
ParsePosition pos = new ParsePosition(0);

date = dateFormatter.parse(inputString, pos);

if (date != null && pos.getIndex() == inputString.length()) {
    // These 3 points are ensured:
    // - The string only contains the date.
    // - The date follows the format strictly.
    // - And the date is a valid one.
} else {
    // Valid date but string contains other garbage
    // Or the string has invalid date or garbage
} 
```

`SimpleDateFormat`将允许`2013-1-5`通过，我认为这是一个合理的宽大处理。如果您不希望这样做，您可以在将字符串插入`parse`方法之前对正则表达式进行检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:29:34.310

您可以检查以下代码：

```
public void test() {
    String REG_EXP = "(\\d{4}-[0,1]?\\d{1}-[0,1,2,3]?\\d{1})"; //yyyy-mm-dd formate this can not check boundary condition something like this... 1981-02-30 
    String REG_EXP1 = "(\\d{4}-\\d{2}-\\d{2})"; // if u just want xxxx-xx-xx where x is number 
    String input = "date1 1981-09-06 wrong date 9999-22-22 date2 1981-9-09 date3 1981-11-1 date4"; 
    Pattern pattern = Pattern.compile(REG_EXP); 
    Matcher matcher = pattern.matcher(input); 
    while (matcher.find()) { 
       System.out.println(matcher.group());
    }
} 
```

# magento - 以编程方式创建 Magento 订单

> ID：14727091
> 
> 赞同：1
> 
> 时间：2013-02-06T10:45:44.430
> 
> 标签：magento, product

有没有一种方法可以在 Magento 中使用订单中定义的“自定义”产品创建订单。该订单不需要创建自定义产品。这些自定义产品将在创建订单时确定自定义价格和自定义产品标题。

因此，在创建订单时，我只需指定一些带有价格的自定义产品，然后将它们添加到订单中。

同样，产品不会在 Magento 中的任何地方定义，所以我只想说，我想在 9.99 处添加 xyz，在 1.99 处添加 zxy，也许我想在 3.99 处添加另一个 xyz。

订单将显示为，

xyz | 9.99

zxy | 1.99

xyz | 3.99

总计 | 15.97

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:32:17.427

以编程方式创建带有自定义产品的订单是可能的，这是一个示例代码：

```
<?php
require_once 'app/Mage.php';
umask(0);
Mage::app('admin');

$order = create();
echo $order;

function create()
{

        $storeId = 1;
        if (!$storeId) {
            $storeIds = Mage::app()->getWebsite($customer->getWebsiteId())->getStoreIds();
            reset($storeIds);
            $storeId = current($storeIds);
        }

        $order = Mage::getModel('sales/order')
                ->setState('new');

        $orderPayment = Mage::getModel('sales/order_payment')
              ->setStoreId($storeId)
              ->setCustomerPaymentId(0)
              ->setMethod('checkmo')
              ->setPo_number(' - ');
            $order->setPayment($orderPayment);

        $billingAddress = Mage::getModel('sales/order_address');
        $shippingAddress = Mage::getModel('sales/order_address');

        $order->setStoreId($storeId)
              ->setQuoteId(0)
              ->setGlobal_currency_code('EUR')
              ->setBase_currency_code('EUR')
              ->setStore_currency_code('EUR')
              ->setOrder_currency_code('EUR')
              ->setStatus($orderData['status']);

              // set Customer data
              $order->setCustomer_email('a@b.com')
              ->setCustomerFirstname('firstname')
              ->setCustomerLastname('lastname')
              ->setCustomer_is_guest(1);

              // set Billing Address
              $billingAddress
              ->setStoreId($storeId)
              ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_BILLING)
              ->setPrefix('mr')
              ->setFirstname('firstname')
              ->setLastname('lastname')
              ->setCompany('company')
              ->setStreet('street')
              ->setCity('city')
              ->setCountry_id('US')
              ->setPostcode('12345');

              $order->setBillingAddress($billingAddress);

              $shippingAddress
              ->setStoreId($storeId)
              ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_SHIPPING)
              ->setPrefix('mr')
              ->setFirstname('firstname')
              ->setLastname('lastname')
              ->setCompany('company')
              ->setStreet('street')
              ->setCity('city')
              ->setCountry_id('US')
              ->setPostcode('12345');

              $order->setShippingAddress($shippingAddress)
              ->setShipping_method('freeshipping_freeshipping')
              ->setShippingDescription('Free Shipping - Free');

                $orderItem = Mage::getModel('sales/order_item')
                    ->setStoreId(1)
                    ->setQuoteItemId(0)
                    ->setQuoteParentItemId(NULL)
                    ->setQtyBackordered(NULL)
                    ->setTotalQtyOrdered(10)
                    ->setQtyOrdered(10)
                    ->setName('custom product name')
                    ->setPrice(100)
                    ->setBasePrice(10)
                    ->setOriginalPrice(10)
                    ->setRowTotal(1000)
                    ->setBaseRowTotal(1000);

                    $order->addItem($orderItem);

                $order->setSubtotal(2000)
                    ->setSubtotalIncludingTax(2000)
                    ->setBaseSubtotal(2000)
                    ->setGrandTotal(2000)
                    ->setBaseGrandTotal(2000)
                    ->setTaxAmount(0)
                    ->setTotalQtyOrdered(10);

              $order->save();

    return $order;
} 
```

?>

# java - 显示带有 hashmap 的标签

> ID：14727093
> 
> 赞同：1
> 
> 时间：2013-02-06T10:45:50.200
> 
> 标签：java, jsp, struts2, displaytag

我正在创建一个表管理器。我已经用简单的 HTML 表标签实现了它。但现在我想使用显示标签来实现它。

基本上这整个页面是动态的，如果我在数据库中添加一个表，表值将以表格形式显示在页面上。

这里的问题是有很多使用显示标签的示例，`ArrayList`但没有使用`HashMap`.

我有一个`TreeMap`以行号作为键，值是另一个`ArrayList`对象。每个`ArrayList`代表一行。现在每个对象代表相应行的一个单元格。

如何使用显示标签以网格形式显示这些数据。

```
private TreeMap<Integer , ArrayList<TableColDataDO>> mpSelTableData; 
```

并且`TableColDataDO`是

```
private String columnName;
private String dataType;
private String columnValue;
private int rowNumber;

<display:table name="mpSelTableData.value" pagesize="3">
<display:column property="columnValue" title="columnName" sortable="true" />
</display:table> 
```

堆栈跟踪：

```
java.lang.Integer cannot be cast to java.lang.String 
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String 
```

堆栈跟踪

```
org.apache.jasper.JasperException: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String 
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:541)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445)
    org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
    org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
    org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:164)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Unknown Source)

java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String 
    java.lang.String.compareTo(Unknown Source)
    java.util.TreeMap.getEntry(Unknown Source)
    java.util.TreeMap.get(Unknown Source)
    org.displaytag.util.LookupUtil.getProperty(LookupUtil.java:259)
    org.displaytag.util.LookupUtil.getBeanProperty(LookupUtil.java:129)
    org.displaytag.util.LookupUtil.getBeanValue(LookupUtil.java:90)
    org.displaytag.tags.TemplateTag.evaluateExpression(TemplateTag.java:84)
    org.displaytag.tags.TableTag.initParameters(TableTag.java:932)
    org.displaytag.tags.TableTag.doStartTag(TableTag.java:767)
    org.apache.jsp.success_jsp._jspx_meth_display_005ftable_005f0(success_jsp.java:1334)
    org.apache.jsp.success_jsp._jspService(success_jsp.java:508)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445)
    org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
    org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
    org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:164)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)`
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process    (Http11Protocol.java:581)`
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:24:22.720

将整数转换为字符串时发生类转换异常。整数出现在以下结构中

```
TreeMap<Integer , ArrayList<TableColDataDO>> mpSelTableData; 
```

这就是错误的原因。

尝试将数据结构更改为

```
TreeMap<String, ArrayList<TableColDataDO>> mpSelTableData; 
```

# cakephp - webroot的绝对路径

> ID：14727099
> 
> 赞同：4
> 
> 时间：2013-02-06T10:46:13.690
> 
> 标签：cakephp, cakephp-2.0

对于电子邮件附件，我想获取到 webroot 文件夹的直接路径。像这样的东西：/var/www/vhosts/.../webroot

Cake 中是否有为此定义的常量或函数？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T10:51:25.327

`WWW_DIR`，它与其他一些有用的常量一起在 /app/webroot/index.php 中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-25T12:22:39.180

正如@almcnicoll 所说，在当前版本的 Cakephp (v > 2.x) 中，常数是：

```
WWW_ROOT 
```

# android - 仅从相机文件夹导入图像 (Android)

> ID：14727108
> 
> 赞同：0
> 
> 时间：2013-02-06T10:46:37.587
> 
> 标签：android

在我的应用程序中，我想仅显示来自 Gridview 中 Camera 文件夹的图像。我编写了以下代码来导入图像：-

```
String[] projection = { MediaStore.Images.Thumbnails._ID, };

        Cursor mImageCursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, null ); 

    if (mImageCursor != null)
    {

        mImageCursor.moveToFirst();

        for (int i = 0; i < mImageCursor.getCount(); i++)
        {
            Images im=new Images();
            int imageId = mImageCursor.getInt((mImageCursor.getColumnIndex( MediaStore.Images.Media._ID)));
            Bitmap bm = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), 
                    imageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
            im.setBitmap(bm);
            arrayOfImages.add(im);

            mImageCursor.moveToNext();
        }
    } 
```

但是此代码从图库中导入所有图像。但我只想从相机文件夹中导入图像。p

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:49:13.450

如果您只想要相机图像，您可以通过在存储桶名称上过滤相机图像来获取相机图像列表。在这种情况下，您可以阅读缩略图并将其显示在您自己的活动中并要求用户选择。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String[] projection = {
                MediaStore.Images.Media._ID, MediaStore.Images.Media.BUCKET_DISPLAY_NAME,
                MediaStore.Images.Media.DISPLAY_NAME
        };
        String selection = MediaStore.Images.Media.BUCKET_DISPLAY_NAME + " = ?";
        String[] selectionArgs = new String[] {
            "Camera"
        };
        Cursor mImageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                projection, selection, selectionArgs, null);

        while (mImageCursor.moveToNext()) {
            Log.d("TestActivity", mImageCursor.getString(1) + "    " + mImageCursor.getString(2));

        }
    } 
```

# wcf - 在 web.config 中为 tokenprovider 添加凭据

> ID：14727110
> 
> 赞同：0
> 
> 时间：2013-02-06T10:46:40.343
> 
> 标签：wcf, wcf-binding, servicebus

编辑：更多细节：

关于我的问题的更多信息：

我使用服务总线将异步事件发送到 WCF 服务。我有一个具有此配置的客户端：

```
<client>
  <endpoint address="sb://[Server].[Domain]/NameSpace/eventqueue"
    behaviorConfiguration="securityBehavior" binding="netMessagingBinding"
    bindingConfiguration="messagingBinding" contract="xxx.IEventQueueService"
    name="Subscriber" />
</client> 
```

请注意，它是我们自己域中的虚拟服务器。

这是行为和绑定配置：

```
<behavior name="securityBehavior">
          <transportClientEndpointBehavior>
            <tokenProvider>
              <windowsAuthentication>
                <stsUris>
                  <stsUri value="https://[Server].[Domain]:9355/[Namespace]" />
                </stsUris>
              </windowsAuthentication>
            </tokenProvider>
          </transportClientEndpointBehavior>
        </behavior>

      <netMessagingBinding>
        <binding name="messagingBinding" closeTimeout="00:03:00" openTimeout="00:03:00" receiveTimeout="00:03:00" sendTimeout="00:03:00" sessionIdleTimeout="00:01:00" prefetchCount="-1">
          <transportSettings batchFlushInterval="00:00:01" />
        </binding>
      </netMessagingBinding> 
```

我的 WCF 服务使用相同的配置：

```
<services>
  <service name="xxx.EventQueueService">
    <endpoint address="sb://[SERVER].[DOMAIN]/Namespace/eventqueue"
      behaviorConfiguration="securityBehavior" binding="netMessagingBinding"
      bindingConfiguration="messagingBinding" name="EventQueueClientService"
      contract="xxx.IEventQueueService" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/xxx.ExternalServices/EventQueueService" />
      </baseAddresses>
    </host>
  </service>

</services> 
```

如果我在我的开发计算机上运行我的项目，这非常有用。但是现在，我想将它部署到服务器上，就像我的服务总线一样。那失败了……

旧编辑：好的，我找到了这个网页：http: [//msdn.microsoft.com/en-us/library/microsoft.servicebus.configuration.windowselement.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.configuration.windowselement.aspx)

但这两个选项不起作用：

```
<windowsAuthentication userName="xxx" password="xxx" domain="xxx">

System.ArgumentNullException: Value cannot be null.
Parameter name: s
   at System.Convert.FromBase64String(String s)
   at Microsoft.ServiceBus.SharedSecretTokenProvider.DecodeSecret(String issuerSecret)
   at Microsoft.ServiceBus.Description.SharedSecretCredential.CreateTokenProvider()
   at Microsoft.ServiceBus.Description.TransportClientCredentialBase.get_TokenProvider()
   at Microsoft.ServiceBus.TransportClientEndpointBehavior.get_TokenProvider()
   at Microsoft.ServiceBus.Messaging.NetMessagingTransportBindingElement.CreateMessagingFactorySettings(BindingContext context)
   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusChannelListener`1..ctor(BindingContext context, NetMessagingTransportBindingElement transport)
   at Microsoft.ServiceBus.Messaging.NetMessagingTransportBindingElement.BuildChannelListener[TChannel](BindingContext context)
   at System.ServiceModel.Channels.Binding.BuildChannelListener[TChannel](Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, BindingParameterCollection parameters)
   at System.ServiceModel.Description.DispatcherBuilder.MaybeCreateListener(Boolean actuallyCreate, Type[] supportedChannels, Binding binding, BindingParameterCollection parameters, Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, ServiceThrottle throttle, IChannelListener& result, Boolean supportContextSession)
   at System.ServiceModel.Description.DispatcherBuilder.BuildChannelListener(StuffPerListenUriInfo stuff, ServiceHostBase serviceHost, Uri listenUri, ListenUriMode listenUriMode, Boolean supportContextSession, IChannelListener& result)
   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)
   at System.ServiceModel.ServiceHostBase.InitializeRuntime()
   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService(ServiceInfo info) 
```

和

```
<windowsAuthentication>

<userName value="xxx"> 
```

=> 属性“userName”不是 ConfigurationElement

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:14:13.330

找到了这个问题的解决方案。

部署应用程序时，请确保 IISPool 的所有者（或被模拟的用户）也是服务总线命名空间的 ManagedUsers 的成员。您可以使用 Get-SBNamespace -Name 检查。

将用户添加到命名空间：Set-SBNamespace -Name -ManageUsers

# c# - 将vb代码翻译成c#

> ID：14727114
> 
> 赞同：-2
> 
> 时间：2013-02-06T10:46:51.600
> 
> 标签：c#, asp.net, vb.net, code-translation

我有一些来自 4guysfromrolla 网站的代码，它提供了有关以具有管理员凭据的另一个用户身份登录的教程。

我已经完成了大部分工作，但是在将这部分代码从 VB 转换为 C# 时遇到了一些麻烦。我翻译困难的部分是第`if`一句话。

```
If Page.User.Identity IsNot Nothing AndAlso TypeOf Page.User.Identity Is FormsIdentity Then
   Dim ident As FormsIdentity = CType(Page.User.Identity, FormsIdentity)
   Dim ticket As FormsAuthenticationTicket = ident.Ticket
   Dim AdminUserName As String = ticket.UserData

   If Not String.IsNullOrEmpty(AdminUserName) Then
      'An Admin user is logged on as another user... 
      'The variable AdminUserName returns the Admin user's name
      'To get the currently logged on user's name, use Page.User.Identity.Name
   Else
      'The user logged on directly (the typical scenario)
   End If
End If 
```

如果有人能帮我翻译一下，我将不胜感激！这是页面检测用户是否确实是作为另一个用户登录的管理员的部分，因此我可以以编程方式显示一个带有提醒的面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:50:12.347

来自[http://converter.telerik.com/](http://converter.telerik.com/)：

```
if (Page.User.Identity != null && Page.User.Identity is FormsIdentity) {
    FormsIdentity ident = (FormsIdentity)Page.User.Identity;
    FormsAuthenticationTicket ticket = ident.Ticket;
    string AdminUserName = ticket.UserData;

    if (!string.IsNullOrEmpty(AdminUserName)) {
    //An Admin user is logged on as another user... 
    //The variable AdminUserName returns the Admin user's name
    //To get the currently logged on user's name, use Page.User.Identity.Name
    } else {
        //The user logged on directly (the typical scenario)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:50:32.527

```
if (Page.User.Identity != null && Page.User.Identity is FormsIdentity)
{
    ....
} 
```

我假设你对其余的没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:51:34.100

```
If Page.User.Identity IsNot Nothing AndAlso TypeOf Page.User.Identity Is FormsIdentity Then 
```

将会

```
if( Page.User.Identity != null && Page.User.Identity is FormsIdentity ) 
```

[`AndAlso`](http://msdn.microsoft.com/de-de/library/cb8x3kfz%28v=vs.80%29.aspx)只是一个[AND](http://msdn.microsoft.com/en-us/library/2a723cdk.aspx)运算符，仅在左侧为时才评估左侧`false`（C# 中的默认行为）。

要检查对象是否为空，请与 比较`null`，要检查对象是否属于某种类型，请使用[`is`](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:51:28.103

怎么样

```
if (Page.User.Identity != null && Page.User.Identity is FormsIdentity)
{
   var ident = (FormsIdentity)Page.User.Identity;
   var ticket  = ident.Ticket;
   var AdminUserName = ticket.UserData;

   if (!String.IsNullOrEmpty(AdminUserName))
   {
      'An Admin user is logged on as another user... 
      'The variable AdminUserName returns the Admin user's name
      'To get the currently logged on user's name, use Page.User.Identity.Name
   }
   else
   {
      'The user logged on directly (the typical scenario)
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:52:28.917

Stackoverflow 不是翻译服务，但是...

```
var fIdent = User.Identity as FormsIdentity;
if(fIdent != null)
{
    string adminUserName = fIdent.Ticket.UserData;
    if(!String.IsNullOrEmpty(adminUserName))
    {
        // an Admin user is logged on as another user... 
    }
    else
    {
        // the user logged on directly (the typical scenario)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T10:53:43.450

你要求我们做的基本上是教书`C#`。

正如我最初在评论中提到的，如果您不确定，请使用转换器。但是，在那之后，将您的代码中的差异与您的`VB.NET`代码进行比较`C#`并查看结构差异。

VB.NET

```
If True Then
  'Do Stuff
End If 
```

C＃

```
if(true){
 //Do stuff
} 
```

与上述不同的是，条件被包裹在`()`并且被替换为。你不应该直接拿出代码，阅读它然后比较它。然后尝试自己重新编写:)`then``end if``parenthesis`

# node.js - req.setTimeout 和 socket.setTimeout 有什么区别？

> ID：14727115
> 
> 赞同：5
> 
> 时间：2013-02-06T10:46:53.040
> 
> 标签：node.js, http, settimeout

我有两个选项可以为我的 http 请求设置超时。我不确定他们的区别。

第一个是：

```
req.setTimeout(2000,function () {
  req.abort();
  console.log("timeout");
  self.emit('pass',message);
}); 
```

第二个是：

```
req.on('socket', function (socket) {
  socket.setTimeout(2000);  
  socket.on('timeout', function() {
      req.abort();
      self.emit('pass',message);
  });
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T11:21:37.877

`socket.setTimeout`设置套接字的超时时间，例如实现 HTTP Keep-Alive。

`request.setTimeout``socket.setTimeout`一旦套接字被分配给请求并已连接，就会在内部调用。这在[文档](http://nodejs.org/api/http.html#http_request_settimeout_timeout_callback)中有所描述。

因此，没有区别，您可以选择走哪条路。当然，如果您手中已经有一个请求，您会坚持使用请求的`setTimeout`功能，而不是挖掘底层套接字。

# php - 如果 include() 是有条件的，即使条件不满足，PHP 是否会包含该文件？

> ID：14727116
> 
> 赞同：3
> 
> 时间：2013-02-06T10:46:55.297
> 
> 标签：php

这已经在我脑海中萦绕了很长一段时间，我想我应该寻求专家的答案。我想知道通过单个文件汇集所有 PHP 请求是否是一种糟糕的编程技术。我一直在开发一个网站，但不确定它是否会随着增长而扩展，因为我不能 100% 确定 PHP 如何处理该`include()`功能。

为了更好地解释我是如何构建我的准框架的，这里是我的根`.htaccess`文件的一个片段：

```
# > Standard Settings
RewriteEngine On

# Ignore all media requests
RewriteRule ^media/ - [L]

# Funnel all requests into model
RewriteRule ^(.*)$ _model.php [QSA] 
```

所以除了媒体目录中的内容之外的所有内容都被传递到这个单一的脚本中。

在里面`_model.php`我有我所有的输入清理、用户身份验证、从数据库中提取会话数据、设置任何全局变量（常用变量，如 $longTime、$longIP 等）。通过解释`$_SERVER["REQUEST_URI"]`变量来路由请求。

本质上，我有一个`switch()`选择要使用哪个模块的语句`include()`。我不明白的是：当PHP执行时，`include()`无论case指令是否为真，它都会执行每一个吗？

我担心以后我会有很多这些模块 - 如果 PHP 在运行时包含所有模块，它最终会占用太多的处理能力和 RAM ......

--

编辑：
我真的只是在问 PHP 是否会“读取”它可能必须包含的所有文件。我知道它实际上不应该执行代码。如果我的其中一个`include()`是一个需要很长时间处理的 2GB 文件，PHP 是否总是在执行之前读取该文件？

-- 编辑：
我发现了另一个类似的问题（在发布这个问题之前我做了很多搜索） [PHP 的 include/require 条件内的行为](https://stackoverflow.com/questions/3906627/php-behavior-of-include-require-inside-conditional)

我想我可以关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:52:33.610

不，PHP 将在到达代码片段的那一刻执行包含。

这一点非常重要，因为您可以直接让 php 包含文件和代码。例如

文件1：

```
<?php echo "Foo"; ?> 
```

文件2：

```
<?php
  echo "Before";
  include("File1");
  echo "After";
?> 
```

有时您的 PHP 处理器甚至在编译时都不知道要包含哪个文件。想象一下类似的东西`include("File".mt_rand(1,10));`。PHP 在到达 include 语句之前都不知道要包含的文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:55:01.380

> 即使条件不满足，PHP 会包含该文件吗？

不，`include`and`require`语句的解释和评估方式与其他 PHP 语句相同。PHP 不会在执行之前扫描脚本以查找包含项。

这可以通过一个简单的测试来验证：

```
if(false)
{
    include('does_not_exist.php');
} 
```

以上不会产生错误或警告。如果在执行之前读取了包含，您会看到如下警告：

> 警告：包括（does_not_exist.php）：无法打开流：没有这样的文件或目录...
> 
> 警告：include()：未能打开“does_not_exist.php”以包含...

# asp.net-mvc - for循环中的Asp.net Div标签

> ID：14727118
> 
> 赞同：2
> 
> 时间：2013-02-06T10:47:03.390
> 
> 标签：asp.net-mvc, html, for-loop, nested

是否可以在 asp.net 页面的 for 循环中包含 div 标签并动态分配其 id，以便我可以在 jquery 脚本中引用具有分配 id 的特定 div 标签。我想做下面的事情。

```
@for(var i = 0; i < projectCountGlobal; i++) 
{
    <div id="i" > // id should be assigned dynamically
        <div id="ProjectImage">

        </div>

        <div id="ProjectName">

        </div>

        <div id="Experts">
           <div id="ExpertImage">

           </div>
           <div id="ExpertName">

           </div>
        </div>
     </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:54:50.490

从代码片段看来，你正在做剃刀视图，所以你可以简单地这样做，

```
 <div id="@i" > 
```

这样就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:30:36.590

我可以使用以下代码片段执行此操作：

```
 $('.topopup').hover(function () {           
      for (var i = 0; i < 5; i++) {
          $('body').append('<div id=' + i + '>a</div>');
       }           
  }) 
```

//页面上的HTML代码

```
<body>
   <a href="#" class="topopup">Click Here </a>
   <div id="toPopup" style="display:none;">
   <div id="popup_content">Rahul Deshmukh</div>
   <div id="backgroundPopup"></div>
   <div id="containerDiv"></div>
   </div>
</body> 
```

在这里，我在 body 标记内添加 div，为此您还需要在 peoject 文件夹中添加 min.js，这里的“topopup”是一个锚标记，在鼠标悬停在该锚标记上时，我在 body 标记内添加 div。

# css - 使用边框时如何使布局相同

> ID：14727123
> 
> 赞同：2
> 
> 时间：2013-02-06T10:47:18.417
> 
> 标签：css

当我们使用边框时，它适用于元素之外。如果我创建 100px 宽度的 div 并添加 10px 边框而不是它的整体边框将是 120px 这就是为什么布局不好的原因，因为由于宽度导致的额外不需要的宽度会导致浮动和流体布局的问题

![在此处输入图像描述](../Images/29df910cde8824d8c7c4f8aef0cc8ab7.png)

解决这个问题如果我想创建带有 10px 边框的 100px div，我会创建 80px 和 10px 边框的 div，所以它的总宽度将为 100，但它不是我想要的，因为如果我只想更改边框或 div 的大小，我需要改变两者

有什么方法可以创建 div 100 px 并应用 10px 边框，总宽度将为 100px 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:52:59.833

有。您可以`box-sizing: border-box`在元素上使用，宽度（和高度）将按照 IE 在 quirksmode 中的方式计算。

有时它可能非常有用，但是学习普通盒子模型的工作原理并首先习惯使用它是很好的。

Fwiw 我已经建立了一个`box-sizing: border-box`默认使用*所有*元素的站点，实际上我不推荐它。部分是因为*我*真的习惯了普通的盒子模型，但主要是因为`box-sizing`在某些浏览器中仍然存在错误（我记得 FF 和百分比搞砸了）。

编辑：请注意，它在 IE<8 中不起作用。
Edit2：更多信息：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:28:58.303

这是通过将两个 div 放在彼此内部的 CSS2 / IE5,5/6 兼容解决方案经典地解决的：

```
<div class="size">
    <div class="border">
        Give me some border ;)
    </div>
</div> 
```

在 CSS 中，您使用*size* -div 设置大小和使用*border* -div 设置边框：

```
.size {width:200px; height:200px;}
.border {border:10px solid blue;} 
```

所以即使你只知道标准的盒子模型，你也可以解决这个问题。

![在此处输入图像描述](../Images/55ffdf2406ba36cb86e6c64c6c4cfae2.png)

请参阅[http://jsfiddle.net/6K2vS/](http://jsfiddle.net/6K2vS/)以获取此在线演示。

在一些非常旧的浏览器中，您有时甚至需要为外部元素设置一个零宽度边框才能使其正常工作。只需注意您是否在寻找一些向后兼容的解决方案。

# c++ - 从 Visual C++ 获取 ProcessName

> ID：14727124
> 
> 赞同：1
> 
> 时间：2013-02-06T10:47:20.483
> 
> 标签：c++, visual-c++

在 Visual C++ 中，我正在使用获取当前窗口的标题

```
::GetWindowText(wnd, str, 290);

strcpy(curr_wnd_txt, str); 
```

但是我怎样才能获得应用程序的进程名称，例如“Iexplore”用于使用 Internet Explorer，“Skype”用于带有磁贴“Skype - 用户名”的窗口，“Explorer”用于使用 Windows 资源管理器？

这是我尝试过的：

```
void CMainWndDlg::Monitor_ActiveWindowCaptions()
{
    HWND hwnd;
    DWORD process_id=0;
    GetWindowThreadProcessId(hwnd, &process_id);
    CString strEXEName = GetEXEName (process_id);
}

CString GetEXEName(DWORD dwProcessID)
{
DWORD aProcesses [1024], cbNeeded, cProcesses;
unsigned int i;

if (!EnumProcesses(aProcesses, sizeof(aProcesses), &cbNeeded))
    return "";

cProcesses = cbNeeded / sizeof(DWORD);

TCHAR szEXEName[MAX_PATH];
for (i = 0; i < cProcesses; i++)
{
    if (aProcesses [i] == dwProcessID)
    {
        HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION |
                          PROCESS_VM_READ, FALSE, dwProcessID);
        if (NULL != hProcess)
        {
            HMODULE hMod;
            DWORD cbNeeded;
            if(EnumProcessModules(hProcess, &hMod, 
                                  sizeof(hMod), &cbNeeded))
            {
                GetModuleBaseName(hProcess, hMod, szEXEName, 
                    sizeof(szEXEName)/sizeof(TCHAR));
                return CString (szEXEName);
            }
        }
    }    
}
return "";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:51:23.390

GetModuleFileName() 可用于检索当前进程的可执行文件的路径。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683197(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683197(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:52:05.747

您必须枚举窗口，获取进程句柄，然后从下面的函数中获取可执行文件的名称。

```
#include "psapi.h"
#pragma comment(lib, "psapi.lib")

CString GetEXEName(DWORD dwProcessID)
{
    DWORD aProcesses [1024], cbNeeded, cProcesses;
    unsigned int i;

    //Enumerate all processes
    if (!EnumProcesses(aProcesses, sizeof(aProcesses), &cbNeeded))
        return NULL;

    // Calculate how many process identifiers were returned.
    cProcesses = cbNeeded / sizeof(DWORD);

    TCHAR szEXEName[MAX_PATH];
    //Loop through all process to find the one that matches
    //the one we are looking for
    for (i = 0; i < cProcesses; i++)
    {
        if (aProcesses [i] == dwProcessID)
        {
            // Get a handle to the process
            HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION |
                              PROCESS_VM_READ, FALSE, dwProcessID);

            // Get the process name
            if (NULL != hProcess)
            {
                HMODULE hMod;
                DWORD cbNeeded;

                if(EnumProcessModules(hProcess, &hMod, 
                                      sizeof(hMod), &cbNeeded))
                {
                    //Get the name of the exe file
                    GetModuleBaseName(hProcess, hMod, szEXEName, 
                        sizeof(szEXEName)/sizeof(TCHAR));

                    return CString (szEXEName);
                }
            }
        }    
    }

    return NULL;
} 
```

参考这里： http: [//www.codeproject.com/Articles/14843/Finding-module-name-from-the-window-handle](http://www.codeproject.com/Articles/14843/Finding-module-name-from-the-window-handle)

# android - 模拟器上的Android数据库目录

> ID：14727125
> 
> 赞同：0
> 
> 时间：2013-02-06T10:47:23.150
> 
> 标签：android, database, directory, emulation

**您好，我在下面的 andorid 上创建了一个数据库类。**

```
public class Veritabani extends SQLiteOpenHelper {

    private static final String Veritabani_Adi = "Veritabanim";
    private static final int Veritabani_Version = 1;
    public Veritabani(Context context) {
    super(context, Veritabani_Adi, null, Veritabani_Version);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE ARKTABLE (id INTEGER PRIMARY KEY AUTOINCREMENT , ad TEXT, soyad TEXT);");  
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXIST OperatorTablosu");
    onCreate(db);
    }
}

**then i declare may Veritabani class in my activity as below.**

public class DictionaryActivity extends Activity {
    Spinner spnLanguage;
    Veritabani objdb;;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dictionary);
        spnLanguage=(Spinner)findViewById(R.id.spnLanguage);
        objdb=new Veritabani(this);
        spinnerfill();

    } 
```

我在 logcate 或控制台上没有异常。但是当我查看可能 data/data/myappp/ 时，我没有看到数据库目录。

我用的是安卓2.2版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:54:27.790

如果您使用的是 Eclipse，请检查**DDMS透视图。**在那里您可以轻松找到您的数据库是否已创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:57:34.790

**以下评论中提到的更新：**

```
You don't need to be on the DDMS perspective anymore, just open the File Explorer from Eclipse Window > Show View > Other... It seems the app doesn't need to be running even, I can browse around in different apps file contents. I'm running ADB version 1.0.29 
```

或者，您可以尝试旧方法：

在 Eclipse IDE 上打开 DDMS 透视图

**（窗口 > 打开透视图 > 其他 > DDMS）**

最重要的是：

**您的应用程序必须正在运行，这样您才能看到文件夹和文件的层次结构。**

然后在文件资源管理器选项卡中，您将遵循路径：

**数据 > 数据 > 你的包名 > 数据库 > 你的数据库文件。**

然后选择文件，点击屏幕右上角的软盘图标下载.db文件。如果要将数据库文件上传到模拟器，可以单击电话图标（在磁盘图标旁边）并选择要上传的文件。

如果你想查看 .db 文件的内容，我建议你使用 SQLite 数据库浏览器，你可以在这里下载。

**PS：如果你想从真机上查看数据库，你必须root你的手机。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:03:40.040

你想要**DDBMS**

1.  转到**mnt/sdcard/yourdatabase name** .它的数据库存储在 sdcard
2.  内存意味着**数据/你的包名/你的数据库名**

# javascript - 如何将 Title 属性添加到动态填充的 函数 dynAddOption(list, elementToBeAdded){ if( list.length > 0) { for(var index = 0; index < list.length; index ++){ elementToBeAdded.options[index + 1] = new Option(list[index ].description, list[index].id); } } } 如何给每个 &

> ID：14727126
> 
> 赞同：3
> 
> 时间：2013-02-06T10:47:23.727
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:51:31.027

从[这个问题](https://stackoverflow.com/questions/3249591/how-can-i-display-a-tooltip-on-an-html-option-tag)看来是有可能的，你只需要添加一个`title`属性。在这种情况下，这应该工作：

```
function dynAddOption(list, elementToBeAdded){
    if (list.length > 0) {
        for(var index = 0; index < list.length; index ++) {
            var opt = new Option(list[index].description, list[index].id);
            opt.title = 'Foo'; // < this is the tooltip
            elementToBeAdded.options[index + 1] = opt;
        }
    }
} 
```

# ruby-on-rails - datetime_select 上的限制分钟列表

> ID：14727127
> 
> 赞同：3
> 
> 时间：2013-02-06T10:47:24.690
> 
> 标签：ruby-on-rails, ruby

我在 Web 应用程序上使用 Rails。
我想知道是否可以告诉`datetime_select`在分钟下拉列表中只有两个选项？选项 00 和 30。

我有以下代码：

```
<p><label for="command_date_to_execute">Date to Run</label><br/>
<%= datetime_select 'command', 'date_to_run', :discard_minute => true  %>:
<%= select 'command', 'date_to_run', ['00', '30'] %>
</p> 
```

浏览器源代码产生：

```
<select id="command_date_to_run" name="command[date_to_run]">
<option value="00">00</option>
<option value="30">30</option>
</select> 
```

但我真正需要的是下面（在生成的 HTML 中使用 5i）：

```
<select id="command_date_to_execute_5i" name="command[date_to_execute(5i)]">
<option value="00">00</option>
<option value="30">30</option>
</select> 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:48:55.140

如果您只想为分钟显示值 00 和 30，您可以执行以下操作：

```
= f.datetime_select(:leave_end, :start_year => 2011, :ampm => true, :default => 0.days.from_now.in_time_zone(@timezone), :discard_minute => true) %span : 
= f.select('req_sess_start(5i)', ['00', '30']) 
```

由于（可能）未知变量 req_sess_start(5i)，这可能会导致页面验证异常。如果满足验证将起作用。

尽管不会引发异常，但以下内容会更好。

```
= f.datetime_select(:req_sess_start, :start_year => 2011, :ampm => true, :default => 0.days.from_now.in_time_zone(@timezone), :minute_step => 30) 
```

# c# - 如何在 ASP.net C# 中制作产品列表

> ID：14727132
> 
> 赞同：0
> 
> 时间：2013-02-06T10:47:36.863
> 
> 标签：c#, asp.net

如何在 ASP.net C# 中显示产品列表？我正在为我的论文创建电子商务网站我需要以这样的网格形式显示它>>[示例产品列表](http://pcx.com.ph/components/processors.html?p=2)，每页有限制示例每页 10 个产品，我需要你的帮助

![我的产品数据库](../Images/28e6e045076986242d04a5073404f5bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:55:21.970

我会使用`DataList`控件。[在这里](http://msdn.microsoft.com/en-us/library/bb498210.aspx#aspnett29basicdatalistcs_topic3)你可以找到一个很好的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:19:34.457

有不同的方法可以做到这一点。没有一个正确或正确的解决方案。这一切都取决于你在哪里工作很舒服。

你能告诉我们你已经做了什么吗？

现在关于过滤，您可以使用 GridView + DropDownList 的组合（其中 DDL 将用于过滤结果）。你可以在网上寻找一些很棒的教程。

我希望它对你有帮助。

# c# - 如果出现多次，则删除字符

> ID：14727133
> 
> 赞同：1
> 
> 时间：2013-02-06T10:47:45.517
> 
> 标签：c#, regex

我有一个用户给出的字符串。在用户输入后，我希望字符“ `-`”只出现一次，即使出现两次或更多。

`DF--JKIL-L`应该`DF-JKIL-L`

```
`DF-----JK-L-` should be `DF-JK-L-` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T10:55:47.210

一个简单的正则表达式应该可以解决问题：

```
string originalString = "DF-----JK-L-";
string replacedString = Regex.Replace(originalString, "-+", "-"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:51:18.447

您可以使用`Split`with option `StringSplitOptions.RemoveEmptyEntries`，然后`Join`再次：

```
 var result = string.Join("-", 
              input.Split(new[] {'-'}, StringSplitOptions.RemoveEmptyEntries)); 
```

# sql - 使用多个外键添加约束

> ID：14727134
> 
> 赞同：2
> 
> 时间：2013-02-06T10:47:46.530
> 
> 标签：sql, database, visual-studio-2010

我有一个用 Visual Studio 打开的 SQL 数据库，我需要向已经创建的表添加一些约束。我需要一个外键，它已经有来自第三个表的外键。为了更好地解释，

表`ANIMALI`需要来自表的外键，而表`GABBIA`中已经有来自表的外键`STANZA`。这是我想出的代码：

```
ALTER TABLE ANIMALE ADD CONSTRAINT REF_ANIMA_GABBI_FK FOREIGN KEY (n_stanza, n_gabbia) REFERENCES GABBIA(n_stanza, n_gabbia); 
```

这给了我一个错误，`n_stanza is a column id not valid`. 我认为这是因为该类的 ID`GABBIA`取自加入 n_gabbia 和 n_stanza，后者是 class 中的一个键`STANZA`。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:49:29.497

为了使您的 ALTER TABLE 语句按书面方式工作，两个表（不是*类*）“ANIMALE”和“GABBIA”都必须包含“n_stanza”和“n_gabbia”列。

此外，在“GABBIA”表中，“n_stanza”和“n_gabbia”这对列上必须存在主键约束或唯一约束。也就是说，您需要类似“GABBIA”`primary key (n_stanza, n_gabbia)`或`unique (n_stanza, n_gabbia)`“GABBIA”表中的内容。

# php - 使用 $output 创建超链接短代码？

> ID：14727136
> 
> 赞同：0
> 
> 时间：2013-02-06T10:47:54.157
> 
> 标签：php, html, wordpress, shortcode

我已经搜索了一段时间这个问题，也许它很简单，也可能不简单。我不知道如何让它工作。

我的目标结果将是一个与帖子元相关的超链接，具有类似的样式。

```
<a href="href_link" style="color: #e67300" rel="nofollow"> Check out the r_title here!</a> 
```

我的代码是：

```
<?php
$rtitle1 = get_post_meta($post->ID, 'r_title', true);
$rlink1 = get_post_meta($post->ID, 'href_link', true);
    function testfunction() {

    $output .= '<a href=\"'$rlink1'\" style=\"color: #e67300\" rel=\"nofollow\">';
    $output .= ' Check out the '$rtitle1' here!</a>';

    return $output;
    }
add_shortcode('shortcode', 'testfunction');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:01:24.687

您的代码有几个问题。

第一个问题是[字符串连接](http://en.wikipedia.org/wiki/Concatenation)。当您想将字符串粘合在一起时，您需要使用[连接运算符](http://php.net/manual/en/language.operators.string.php)（点：）`.`：

```
$end = 'a string';
$start = 'This is ';
$string = $start.$end; 
```

如果您只是将变量和字符串（或任何其他[标量类型](http://php.net/manual/en/language.types.intro.php)）并置，那么您将得到错误：

```
$end = 'a string';
$string = "This is "$end; // Error! 
```

第二个问题是您正在使用[全局范围内](http://php.net/manual/en/language.variables.scope.php)`$rtitle1`的两个变量 (和`$rlink1`) 。如果要在函数内使用全局变量，则需要在函数内将它们声明为全局变量：

```
$globalVar = 'test';
function test() {
  global $globalVar;
  echo $globalVar;
} 
```

第三个问题是您忘记了`)`函数的结尾右括号 , `get_post_meta()`：

```
$rtitle1 = get_post_meta($post->ID, 'r_title', true;
$rlink1 = get_post_meta($post->ID, 'href_link', true; 
```

它们应该是这样的：

```
$rtitle1 = get_post_meta($post->ID, 'r_title', true);
$rlink1 = get_post_meta($post->ID, 'href_link', true); 
```

在考虑寻求帮助之前，您应该查看收到的错误消息。如果您之前没有看到错误消息，请谷歌它。学习一些东西的最好方法是自己找到解决方案。当您尝试找到解决方案但找不到解决方案时，提出问题。

# c++ - QPlugin 路径和初始化

> ID：14727140
> 
> 赞同：2
> 
> 时间：2013-02-06T10:48:17.283
> 
> 标签：c++, qt

Qt 插件是否存在一种方法来确定它是静态初始化还是动态初始化？如果它是动态初始化的，插件是否有办法确定其动态库（.dll 或 .so）的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:27:54.840

在[QPluginLoader](http://doc.qt.digia.com/stable/qpluginloader.html)你有两个函数，你可以看看：

一种）`QObjectList QPluginLoader::staticInstances ()`

> 返回插件加载器持有的静态插件实例（根组件）的列表。

b)`QString fileName () const`

> 该属性保存插件的文件名。要可加载，文件的后缀必须是符合平台的可加载库的有效后缀，例如 Unix 上的 .so、Mac OS X 上的 .dylib 和 Windows 上的 .dll。可以使用 QLibrary::isLibrary() 来验证后缀。

不幸的是，如果您没有特定插件的插件加载器，那么您无能为力。插件不需要任何特殊的接口，它们可以直接从`QObject`. 导出插件`Q_EXPORT_PLUGIN2`只会声明`QObject`指向带有`qt_plugin_instance`前缀的插件实例的指针。

加载插件不会调用任何特定函数，所以我看不到将它提供给插件本身的方法。

但是，如果您愿意失去可移植性，您可以做一些事情：在 Windows 上，插件只是 dll，[由 Qt 通过标准 Windows 系统调用在内部](http://qt.gitorious.org/qt/qt/blobs/2f4093332db6c9057b82f9c5fababc9bc6cbeb32/src/corelib/plugin/qlibrary_win.cpp)访问（例如，它们是使用`LoadLibrary`函数加载的，指向过程的指针是使用`GetProcAddress`，并且它们是通过`FreeLibrary`调用发布的），因此您可以尝试[这种方法](http://www.codeproject.com/Articles/16598/Get-Your-DLL-s-Path-Name)（我还没有测试过，这是一个丑陋的黑客，但它可能会起作用）。

```
// near the top of your CPP file
EXTERN_C IMAGE_DOS_HEADER __ImageBase;

// and then, anywhere you need it:
LPTSTR  strDLLPath1 = new TCHAR[_MAX_PATH];
::GetModuleFileName((HINSTANCE)&__ImageBase, strDLLPath1, _MAX_PATH); 
```

> 似乎任何使用 VS2002（及更高版本）链接器编译的 EXE 或 DLL 都提供了一个名为 __ImageBase 的伪变量，它表示模块的 DOS 标头（所有 32 位二进制文​​件都有这个）。只需将此变量转换为 HINSTANCE，您就可以将其作为第一个参数传递给 GetModuleFileName()。

在 Unix 系统上，[插件是通过标准 dlopen() 系统调用加载的](http://qt.gitorious.org/qt/qt/blobs/2f4093332db6c9057b82f9c5fababc9bc6cbeb32/src/corelib/plugin/qlibrary_unix.cpp)，因此您可以使用[此处](https://stackoverflow.com/questions/1681060/library-path-when-dynamically-loaded)的解决方案。

# jquery - CSS 滚动 div

> ID：14727145
> 
> 赞同：0
> 
> 时间：2013-02-06T10:48:37.140
> 
> 标签：jquery, css, scroll

无论如何我可以让滚动的绿色 div 将黑色导航推到页面上而不是滚动到它的顶部？

这是我的示例，向下滚动页面，横幅将淡出并滚动：

[http://www.mharrisweb.co.uk/](http://www.mharrisweb.co.uk/)

jQuery 补充说：

```
jQuery(function($) {

  function scrollBanner() {
    //Get the scoll position of the page
    scrollPos = jQuery(this).scrollTop();

    //Scroll and fade out the banner text
    jQuery('.hero-unit').css({
      'margin-top' : -(scrollPos/3)+"px",
      'opacity' : 1-(scrollPos/300)
    });

    //Scroll the background of the banner
    jQuery('.fade').css({
      'background-position' : 'center ' + (-scrollPos/8)+"px"
    });    
  }

  jQuery(window).scroll(function() {        
    scrollBanner();        
  });` 
```

我想要和这个网站一样的效果：

[http://themetrust.com/demos/hero/](http://themetrust.com/demos/hero/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:18:33.353

也许您也可以添加`div.navbar-fixed-top`滚动行为？与`.hero-unit`. 所以他们会以相同的“速度”移动

# linux - 在 Linux 中对文件中的行进行洗牌的最快方法

> ID：14727151
> 
> 赞同：20
> 
> 时间：2013-02-06T10:48:57.057
> 
> 标签：linux, bash, unix

我想在 Linux 中随机播放一个包含数百万行字符串的大文件。我试过***'sort -R'***但它很慢（一个16M的大文件需要50分钟）。有没有更快的实用程序可以代替它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-04-02T20:23:02.387

使用`shuf`代替`sort -R`（[手册页](http://linux.die.net/man/1/shuf)）。

的缓慢可能`sort -R`是[由于它散列每一行](https://stackoverflow.com/questions/886237/how-can-i-randomize-the-lines-in-a-file-using-a-standard-tools-on-redhat-linux#comment24727933_9230946)。`shuf`只是做一个随机排列，所以它没有那个问题。

（这是在评论中提出的，但由于某种原因没有被任何人写成答案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T06:06:16.820

根据您的描述，50 分钟不是由实际的排序机制引起的。时间很可能花在等待`/dev/random`产生足够的熵上。

一种方法是使用外部随机数据源（例如[http://random.org](http://random.org)）以及[Schwartzian Transform](http://en.wikipedia.org/wiki/Schwartzian_transform)的变体。Schwartzian 变换将要排序的数据转换为嵌入了排序键的“丰富”数据。使用 key 对数据进行排序，然后丢弃 key。

将此应用于您的问题：

*   生成一个带有随机数的文本文件，每行 1 个，行数与要排序的文件相同。这可以在任何时候完成，在后台运行，在不同的服务器上运行，从 random.org 下载等等。关键是当你尝试排序时不会产生这种随机性。

*   使用以下命令创建文件的丰富版本`paste`：

    `paste random_number_file.txt string_data.txt > tmp_string_data.txt`

*   排序这个文件：

    `sort tmp_string_data.txt > sorted_tmp_string_data.txt`

*   删除随机数据：

    `cut -f2- sorted_tmp_string_data.txt > random_string_data.txt`

这是基本思想。我试过了，它确实有效，但我没有 1600 万行文本或 1600 万行随机数。您可能希望将其中一些步骤流水线化，而不是将其全部保存到磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-07T10:28:13.477

你可以试试我的工具：[HugeFileProcessor](https://github.com/mikhail-barg/huge-file-processor)。它能够在合理的时间内洗牌数百 GB 的文件。

以下是改组实施的详细信息。它需要指定*batchSize* - 写入输出时保留在 RAM 中的行数。越多越好（除非你的内存用完了），因为总洗牌时间是*(sourceFile 中的行数) / batchSize * (time to fully read sourceFile)*。请注意，该程序会**随机播放整个文件**，而不是每批。

算法如下。

1.  计算*sourceFile*中的行数。这只需逐行读取整个文件即可完成。[（请参阅此处](http://cc.davelozinski.com/c-sharp/fastest-way-to-read-text-files)的一些比较。）这​​也可以衡量读取整个文件一次需要多少时间。因此，我们可以估计进行一次完整的 shuffle 需要多少次，因为它需要*Ceil(linesCount / batchSize)*完整的文件读取。

2.  由于我们现在知道总*linesCount*，我们可以创建*linesCount*大小的索引数组并使用[Fisher-Yates](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle) （在代码中称为*orderArray ）对其进行洗牌。*这会给我们一个顺序，我们希望在一个打乱的文件中有行。请注意，这是整个文件的全局顺序，而不是每个批次或块或其​​他东西。

3.  现在是实际代码。我们需要按照刚刚计算的顺序从*sourceFile*中获取所有行，但是我们无法读取内存中的整个文件。所以我们只是拆分任务。

    *   我们将通过*sourceFile*读取所有行并仅将那些将在 orderArray 的第一个 batchSize 中的行存储*在*内存*中*。当我们得到所有这些行时，我们可以按要求的顺序将它们写入*outFile*，这是一个*batchSize* / *linesCount*完成的工作。
    ****   接下来，我们将一次又一次地重复整个过程，获取*orderArray*的下一部分，并为每个部分从头到尾读取*sourceFile*。最终整个*orderArray*都被处理了，我们就完成了。***

 ****为什么它有效？**

因为我们所做的只是从头到尾读取源文件。没有向前/向后搜索，这就是 HDD 喜欢的。文件根据内部 HDD 缓冲区、FS 块、CPU cahce 等以块的形式读取，并且所有内容都是按顺序读取的。

**一些数字**

在我的机器（Core i5、16GB RAM、Win8.1、HDD Toshiba DT01ACA200 2TB、NTFS）上，我能够使用3 500 000 的*batchSize在大约 5 小时内随机播放 132 GB（84 000 000 行）的文件。使用**batchSize* 2 000 000 大约需要 8 个小时。读取速度约为每秒 118000 行。**

# android - 从 soapobject 获取 anytype{}

> ID：14727152
> 
> 赞同：0
> 
> 时间：2013-02-06T10:49:05.317
> 
> 标签：android, web-services, authentication

我收到了来自 soapobject 的 anytype{} 响应。我正在尝试使用 Web 服务传递用户名和密码，但无法获得相同的用户名和密码。请任何身体帮助。

```
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://***.***.*.*/MObile/Logics.asmx";
private static final String LOGIN_METHOD = "CheckLogin";
private static final String SOAP_ACTION_LOGIN = "http://tempuri.org/CheckLogin";

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
    StrictMode.setThreadPolicy(policy);
    setContentView(R.layout.login_layout);

    Button signin = (Button) findViewById(R.id.btn_login);
    signin.setOnClickListener(this);

}   
        public void onClick(View v) {

            try {

            etxt_user = (EditText) findViewById(R.id.txt_username);
            etxt_password = (EditText)  findViewById(R.id.txt_password);

           String username = etxt_user.getText().toString();
           String password = etxt_password.getText().toString();

            result = (TextView)findViewById(R.id.tv);

            SoapObject request = new SoapObject(NAMESPACE, LOGIN_METHOD);

            request.addProperty("username",username);
            request.addProperty("password",password);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true; 
            envelope.setOutputSoapObject(request);

            Log.i("LoginDetail", "Username " + username + "Password " + password);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;

                 androidHttpTransport.call(SOAP_ACTION_LOGIN, envelope);

                 SoapObject resultString = (SoapObject)envelope.getResponse();

                 Log.i("OUTPUT", resultString.toString());
                 // getting output anytype{}

                if(){

                     }

                  else{

                      Toast.makeText(getApplicationContext(), "Wrong U & P", Toast.LENGTH_SHORT).show();

                  }*/

            }
            catch (Exception e) {

                e.printStackTrace();
                Toast.makeText(getApplicationContext(), " Network Exception : " + e
                                + "Please check network connectivity.", Toast.LENGTH_LONG).show();

            } 

        } 
```

}

我被这个问题困住了。我想如果用户名密码正确则转到下一个活动，如果错误则 toast.show()。

如何验证用户名和密码是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:07:36.517

尝试附加以下行：

`envelope.implicitTypes= false;`

后

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true; 
            envelope.setOutputSoapObject(request); 
```

# php - Zend 框架日志到数据库错误

> ID：14727159
> 
> 赞同：1
> 
> 时间：2013-02-06T10:49:30.257
> 
> 标签：php, zend-framework2

我正在尝试使用以下代码将从对 Paypal 的调用返回的 PHP 数据记录到数据库

```
$db = new Zend\Db\Adapter\Adapter(array(
'driver' => $config->database->adapter,
'database' => $config->database->params->dbname,
'username' => $config->database->params->username,
'password' => $config->database->params->password
));

$paypalLog = array(
'transactionId' => 'transactionId',
'transactionType'  => 'transactionType',
'paymentType'   => 'paymentType',
'orderTime' => 'orderTime',
'currencyCode' => 'currencyCode',
'feeAmt' => 'feeAmt',
'taxAmt' => 'taxAmt',
'paymentStatus' => 'paymentStatus',
'pendingReason' => 'pendingReason',
'reasonCode' => 'reasonCode'
);

$writer = new Zend\Log\Writer\Db($db, 'paypal', $paypalLog);
$logger = new Zend\Log\Logger();
$logger->addWriter($writer);
$logger->info($transactionId,
    $transactionType,
    $paymentType,
    $orderTime, 
    $currencyCode,
    $feeAmt,        
    $taxAmt,
    $paymentStatus,
    $pendingReason,
    $reasonCode);
?> 
```

我不断收到以下错误

```
Fatal error: Uncaught exception 'Zend\Log\Exception\InvalidArgumentException' with message '$extra must be an array or implement Traversable' in C:\xampp\htdocs\app\library\Zend\Log\Logger.php:236 Stack trace: #0 C:\xampp\htdocs\app\library\Zend\Log\Logger.php(333): Zend\Log\Logger->log(6, '2SH18664DB63910...', 'expresscheckout') #1 C:\xampp\htdocs\app\public\orderconfirm.php(124): Zend\Log\Logger->info('2SH18664DB63910...', 'expresscheckout', 'instant', '2013-02-06T10:4...', 'AUD', '0.52', '0.00', 'Completed', 'None', 'None') #2 {main} thrown in C:\xampp\htdocs\app\library\Zend\Log\Logger.php on line 236 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:16:39.447

您错误地使用了记录器。

它接受两个参数：

```
/**
 * @param string $message
 * @param array|Traversable $extra
 * @return Logger
 */
public function info($message, $extra = array())
{
    return $this->log(self::INFO, $message, $extra);
} 
```

您将 $transactionType 作为“额外”字段传递，该字段可能不是数组或可遍历对象。

试试这个，数组应该转换为日志文件的字符串：

```
$logger->info(paypalLog); 
// or convert it to a string before logging.. it
$logger->info(implode(',', $paypalLog)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:00:37.610

我通过构造一个包含“额外”信息的数组并发送它来完成这项工作。

```
$data = array(
        'transactionId' => $transactionId,
        'transactionType'  => $transactionType,
        'paymentType'   => $paymentType,
        'orderTime' => $orderTime,
        'amt' => $amt,
        'currencyCode' => $currencyCode,
        'feeAmt' => $feeAmt,
        'taxAmt' => $taxAmt,
        'paymentStatus' => $paymentStatus,
        'pendingReason' => $pendingReason,
        'reasonCode' => $reasonCode
        );

     $mapping = array(
        'message'   => 'message',
        'extra' => $data);

     $writer = new Zend\Log\Writer\Db($db, 'paypal', $paypalLog);
     $logger = new Zend\Log\Logger();
     $logger->addWriter($writer);
     $logger->info($mapping); 
```

# android - 安卓自动语言检测

> ID：14727163
> 
> 赞同：0
> 
> 时间：2013-02-06T10:49:34.047
> 
> 标签：android, eclipse, language-detection

我试过[这个](http://code.google.com/p/language-detection/)库，在堆栈溢出的一篇文章中建议，

我已将 lib 的 jar 添加到我的构建路径中，但我无法使用语言的配置文件初始化 DetectorFactory 类。

这是处理检测的类，如他们的一个示例中所建议的：

```
class LanguageDetector {
    public void init(String profileDirectory) throws LangDetectException {
        DetectorFactory.loadProfile(profileDirectory);
    }
    public String detect(String text) throws LangDetectException {
        Detector detector = DetectorFactory.create();
        detector.append(text);
        return detector.detect();
    }
    public ArrayList<Language> detectLangs(String text) throws LangDetectException {
        Detector detector = DetectorFactory.create();
        detector.append(text);
        return detector.getProbabilities();
    }
} 
```

所有语言配置文件都存储在 myProject/profiles 下。尝试实例化该类会使我的应用程序崩溃，而不会向 logcat 提供任何有用的消息

调用类（）：

```
 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        context = this.getActivity().getApplicationContext();
/*        LanguageDetector detector = null;
        try {
            detector.init("/waggle/profiles");
        } catch (LangDetectException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/
        new GetDataTask().execute(context);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T17:21:08.390

将方法更改`LanguageDetector`为静态：

```
class LanguageDetector {
    public static void init(String profileDirectory) throws LangDetectException {
        DetectorFactory.loadProfile(profileDirectory);
    }
    public static String detect(String text) throws LangDetectException {
        Detector detector = DetectorFactory.create();
        detector.append(text);
        return detector.detect();
    }
    public static ArrayList<Language> detectLangs(String text) throws LangDetectException {
        Detector detector = DetectorFactory.create();
        detector.append(text);
        return detector.getProbabilities();
    }
} 
```

并使用如下：

```
try {
    LanguageDetector.init("/waggle/profiles"); // <-- Are you sure the profiles are at this location???
} catch (LangDetectException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

String detectedLanguage = null;
try {
    detectedLanguage = LanguageDetector.detect("Dies ist ein Beispiel in Deutsch.");
} catch (LangDetectException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

if (detectedLanguage != null) {
    // Implement your logic here
} 
```

# tsql - T SQL case语句按参数主次排序

> ID：14727164
> 
> 赞同：5
> 
> 时间：2013-02-06T10:49:38.473
> 
> 标签：tsql, sql-order-by, case

我的 SQL 语句有问题：我使用 SELECT 语句，然后在使用 order by 时使用 CASE。

```
SELECT .....
ORDER BY
CASE WHEN @sort = 'ND' THEN name END DESC,
CASE WHEN @sort = 'NA' THEN name END,
CASE WHEN @sort = 'AD' THEN (isAuthorized)  END DESC,
CASE WHEN @sor = 'AA' THEN (isAuthorized) END 
```

isAuthorized 是一个 BIT 值，所以我想在那里使用二级订单。

我试过类似的东西：

```
SELECT .....
ORDER BY
CASE WHEN @sort = 'ND' THEN name END DESC,
CASE WHEN @sort = 'NA' THEN name END,
CASE WHEN @sort = 'AD' THEN (isAuthorized, name )  END DESC,
CASE WHEN @sort = 'AA' THEN (isAuthorized, name ) END 
```

但它不起作用。

我使用 SQL Server 2008。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:08:47.727

如果您想在使用此查询时先对结果集进行排序`name`，然后再对结果集进行排序：`isAuthorized``@sort = ND`

```
SELECT .....
ORDER BY
CASE WHEN @sort = 'ND' THEN name END DESC,
CASE WHEN @sort = 'ND' THEN isAuthorized END 
```

您可以组合`CASE`子句。我希望你明白了。

# c# - 在 aspose 中选择范围

> ID：14727170
> 
> 赞同：1
> 
> 时间：2013-02-06T10:49:46.563
> 
> 标签：c#, excel, aspose-cells, vba

你知道VBA代码的等价物吗：

```
Range(Selection, Selection.End(xlToRight)).Select 
```

在 Aspose.Cells 中。似乎只能选择整行中的最后一个单元格：

```
public Aspose.Cells.Cell EndCellInRow ( Int32 rowIndex ) 
```

或范围内右侧的最后一个单元格：

```
public Aspose.Cells.Cell EndCellInRow ( Int32 startRow, Int32 endRow, Int32 startColumn, Int32 endColumn ) 
```

但是你必须或多或少地知道你的桌子有多大。

我从 2009 年就发现了这个：[http](http://www.aspose.com/community/forums/permalink/196519/196405/showthread.aspx) ://www.aspose.com/community/forums/permalink/196519/196405/showthread.aspx但这并不能解决我的问题，因为我可能在水平和垂直方向上都有很多表格。我无法预测他们会在哪里。

Edit1：对不起，如果这是一个愚蠢的问题，但是 ctrl+shift+arrow 是一个如此常见的操作，我不敢相信它不会被实现，所以我确保我真的必须重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:21:52.800

Aspose.Cells 使用名为“Worksheet.ListObjects”的属性提供工作表中的表列表。'ListObjects' 是 'ListObject' 类型的集合，它表示 Excel 工作表中的表。这意味着如果一个工作表中有多个表，ListObjects 集合将非常方便地访问工作表中的每个表。每个“ListObject”又包含一个名为“DataRange”的属性，它指定表中的所有单元格。为方便起见，DataRange 可用于对表进行以下操作：

1.  在表格中的单元格上应用样式/格式
2.  获取数据值
3.  合并或移动 Range 中的单元格
4.  导出内容
5.  让枚举器遍历表格单元格

要从 DataRange 中选择单元格，您可以使用 DataRange 遍历以获取行中的所有单元格（这也可以为列完成）

对表格单元格应用任何操作，例如使用 Ctrl+Shift+Arrow 选择单元格后，可以使用如下工作簿对象执行：

```
Workbook workbook = new Workbook(new FileStream("book1.xls", FileMode.Open));

if (workbook.Worksheets[0].ListObjects.Count > 0)
{
     foreach (ListObject table in workbook.Worksheets[0].ListObjects)
     {
          Style st = new Style();
          st.BackgroundColor = System.Drawing.Color.Aqua;
          st.ForegroundColor = System.Drawing.Color.Black;

          st.Font.Name = "Agency FB";
          st.Font.Size = 16;
          st.Font.Color = System.Drawing.Color.DarkRed;

          StyleFlag stFlag = new StyleFlag();
          stFlag.All = true;

          table.DataRange.ApplyStyle(st, stFlag);
     }
}

workbook.Save("output.xls"); 
```

Aspose 文档中还有一些有价值的信息，关于表格样式和[在 ListObject 上应用格式](http://www.aspose.com/docs/display/cellsnet/Format+a+List+Object+%28Table%29)。为了在某​​个行或列中获取最后一个表格单元格，我相信这会有所帮助：

```
int iFirstRowIndex = table.DataRange.FirstRow;
int iFirstColumnIndex = table.DataRange.FirstColumn;

int iLastRowIndex = table.DataRange.RowCount + iFirstRowIndex;
int iLastColumnIndex = table.DataRange.ColumnCount + iFirstColumnIndex;

for (int rowIndex = 0; rowIndex < table.DataRange.RowCount; rowIndex++)
{
     //Get last cell in every row of table
     Cell cell = worksheet.Cells.EndCellInColumn(rowIndex + iFirstRowIndex, rowIndex + iFirstRowIndex, (short)iFirstColumnIndex, (short)(iLastColumnIndex - 1));

     //display cell value
     System.Console.WriteLine(cell.Value);
} 
```

# javascript - Backbone.js的基础知识

> ID：14727172
> 
> 赞同：-2
> 
> 时间：2013-02-06T10:49:55.970
> 
> 标签：javascript, backbone.js

我是backbone.js 的新手。谁能告诉我`<%= done ? 'checked="checked"' : '' %>`下面代码中的含义？

```
<div class="view">
  <input class="toggle" type="checkbox" <%= done ? 'checked="checked"' : '' %> />
  <label><%- title %></label>
  <a class="destroy"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:28:56.010

这用于将 HTML 转换为纯 js 代码。它是在您的页面中嵌入脚本，具有未知的内容类型，浏览器和搜索引擎会简单地忽略这些脚本。

例子 ：

```
<% if (done) { %>
<a id="clear-completed">Clear <%= done %> completed 
<%= done == 1 ? 'item' : 'items'    %></a>
<% } %>
<div class="todo-count"><b><%= remaining %></b> 
<%= remaining == 1 ? 'item' : 'items' %>   left</div>
</script> 
```

知识： [http ://backbonetutorials.com/](http://backbonetutorials.com/)

[http://backbonejs.org/](http://backbonejs.org/)

[http://ejohn.org/blog/javascript-micro-template/](http://ejohn.org/blog/javascript-micro-templating/)

研究以下教程以获得更多参考：检查 git hub 的 Src 代码：

[https://github.com/documentcloud/backbone](https://github.com/documentcloud/backbone)

# vim - 交换逗号分隔列表中的项目

> ID：14727173
> 
> 赞同：7
> 
> 时间：2013-02-06T10:49:58.503
> 
> 标签：vim

经常，例如，当我编写 Latex 代码时，我遇到了重新排列列表中以逗号分隔的项目的任务。如果两个项目都不在列表的开头或结尾，则可以快速完成此操作。但如果它们处于边缘，则必须特别注意分隔逗号。

作为一个例子考虑

```
\cite{GirR84, Tar00, Tem77}. 
```

vim 中是否有一种聪明的方法可以将例如最后一项放在前面或中间位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T00:04:55.700

我实际上制作了一个插件来处理类似的情况，称为[argumentative.vim](https://github.com/PeterRincker/vim-argumentative)。（对不起插头。）

Argumentative.vim 提供以下映射：

*   `[,`以及`],`将转到上一个或下一个参数的动议
*   `<,`并将`>,`论点左移或右移
*   `i,`和`a,`参数文本对象。例如`da,`，`ci,`或`yi,`

因此，使用此插件，您可以移动到有问题的论点，然后根据需要执行一次`<,`或`>,`多次。它也可以计数，例如`2>,`。

如果您安装了 Tim Pope 出色的[repeat.vim](https://github.com/tpope/vim-repeat)插件`<,`，并且`>,`可以使用该`.`命令进行重复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T10:58:08.317

我有以下映射`.vimrc`，我想我从[wikia 上的这个提示中](http://vim.wikia.com/wiki/Swapping_characters,_words_and_lines)得到了它们：

```
nnoremap <silent> gl "_yiw:s/\(\%#\w\+\)\(\_W\+\)\(\w\+\)/\3\2\1/<CR><c-o>/\w\+\_W\+<CR><c-l>
nnoremap <silent> gh "_yiw?\w\+\_W\+\%#<CR>:s/\(\%#\w\+\)\(\_W\+\)\(\w\+\)/\3\2\1/<CR><c-o><c-l> 
```

`gh`将光标下的单词向左和`gl`向右交换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T11:21:52.113

[从Vim Tips Wiki](http://vim.wikia.com/wiki/Swapping_characters,_words_and_lines)交换任意事物的另一种有趣方式：

```
:vnoremap <C-X> <Esc>`.``gvP``P 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-22T15:59:02.693

你可以试试 vim 插件[vim-swap](https://github.com/machakann/vim-swap)，非常强大和有用！

# java - sshxcute 验证失败 | 异常

> ID：14727177
> 
> 赞同：1
> 
> 时间：2013-02-06T10:50:10.160
> 
> 标签：java, unix, authentication, jsch

我使用 sshxcute 从 java 连接到 unix 服务器。
连接时出现以下错误：

> JschException：身份验证失败

请让我知道可能是什么问题。

这是我使用的伪代码：

```
SSHExec ssh= null;
ConnBean cb = new ConnBean("servername","username","password");
SSHExec.getInstance(cb)
ssh.connect();
ssh.disconnect(); 
```

另外请让我知道是什么原因造成的？

# tsql - T-SQL“插入触发器后”由存储过程调用

> ID：14727185
> 
> 赞同：0
> 
> 时间：2013-02-06T10:50:24.447
> 
> 标签：tsql, stored-procedures, triggers, sql-server-2012

我有一个存储过程，可以在表中插入记录，同时删除所有早于 20 分钟的记录。

我已经尝试对其进行优化，并且已经看到删除操作的成本很高。所以，我决定创建后插入触发器来执行删除操作。

看起来，它现在工作得更快了，但执行计划显示触发器中的“删除”语句 - 唯一的区别是现在删除语句具有“查询成本（相对于批处理）：0％”。

我的问题是，当程序插入记录时，它会立即返回结果还是等待插入后触发器完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:37:08.100

触发器与调用过程是同一事务的一部分，因此整个事务只有在触发器触发后才会完成，来自 MSDN：

> 触发器和触发它的语句被视为单个事务，可以从触发器内回滚。如果检测到严重错误（例如，磁盘空间不足），整个事务会自动回滚。

[MSDN - 了解 DML 触发器](http://msdn.microsoft.com/en-us/library/ms178110%28v=sql.105%29.aspx)

# javascript - 遍历一个困难的 List 项

> ID：14727186
> 
> 赞同：-2
> 
> 时间：2013-02-06T10:50:27.510
> 
> 标签：javascript, jquery

我正在尝试从列表项中获取数据，但无法弄清楚我该怎么做。我必须选择每个 li 的图像 src 和名称。

列表就像

```
<ul>
    <li>
        <ul>
            <li><img src="image.jpg" /></li>
            <li>Image Name</li>
            <li>Image Description</li>
        </ul>
    </li>
    <li>
        <ul>
            <li><img src="image-2.jpg" /></li>
            <li>Second Image Name</li>
            <li>Second Image Description</li>
        </ul>
    </li>
    <li>
        <ul>
            <li><img src="image-3.jpg" /></li>
            <li>Third Image Name</li>
            <li>Third Image Description</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T10:53:59.550

```
$("ul li ul").each(function() {
   var $current = $(this),
       imgSrc = $current.find("img").attr("src"),
       name = $current.find("li").eq(1).text();
   // do something with imgSrc and name of current item
}); 
```

演示：http: [//jsfiddle.net/xxYSv/](http://jsfiddle.net/xxYSv/)

# c# - 我将如何实现字典类型的队列 并在 C# 中迭代 /入队/出队

> ID：14727188
> 
> 赞同：2
> 
> 时间：2013-02-06T10:50:29.193
> 
> 标签：c#, types, dictionary, queue

我希望实现一个`Queue`类型`Dictionary<int, string>`并能够迭代/入队/出队。

最终需要的是一个`queue`of `int`, `string`，不管它采取什么形式。

到目前为止，我有类似的东西：

```
 private static Queue<Dictionary<int, string>> requestQueue = new Queue<Dictionary<int, string>>();

  foreach (KeyValuePair<int, string> dictionaryListItem in dictionaryList)
  {
      requestQueue.Enqueue( dictionaryListItem ); // error
  } 
```

但似乎无法加入上述队列。有人知道正确的语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:51:54.723

好吧，您有一个字典队列，但请尝试将单个字典值添加到您的队列中。

如果您确实想要一个字典队列，您应该像这样更改您的代码：

```
requestQueue.Enqueue(dictionaryList); 
```

如果您确实想要一个键值对队列，请将您的队列更改为：

```
Queue<KeyValuePair<int, string>> requestQueue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:13:53.770

简单的片段：

```
Queue<KeyValuePair<int, string>> queue = new Queue<KeyValuePair<int, string>>();
void Enqueue()
{
    queue.Enqueue(new KeyValuePair<int, string>(1, "One"));
    queue.Enqueue(new KeyValuePair<int, string>(2, "Two"));
    //..
}
void Dequeue()
{
    while (true)
    {
        var kvp = queue.Dequeue();
        Console.WriteLine(string.Format("key: {0}, value: {1}", kvp.Key, kvp.Value));
    }
    //..
} 
```

# android - 添加到布局时的 Listview 需求焦点

> ID：14727193
> 
> 赞同：0
> 
> 时间：2013-02-06T10:50:42.753
> 
> 标签：android, android-listview, android-linearlayout

我想将 ListView 添加到 LinearLayout。但是当应用程序启动时，它需要焦点并打开键盘。我不希望它那样做。

我已经尝试过 XML 和 Java 代码：

```
contentLayout = (LinearLayout)findViewById(R.id.contentView);
contentList = new ListView(this);
contentList.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
contentLayout.addView(contentList); 
```

XML

```
<ListView
     android:id="@+id/listView1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content">

</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:23:55.917

我觉得我问的问题有点不对。

但我发现，由于我有一个输入字段，系统总是希望专注于一个输入。所以我在Android Manifest 中将windowSoftInputMode 设置为stateHidden。

知道活动开始时键盘不会自动打开。

# actionscript-3 - 管理资源以最大程度地减少垃圾收集活动并提高性能

> ID：14727194
> 
> 赞同：1
> 
> 时间：2013-02-06T10:50:44.143
> 
> 标签：actionscript-3, garbage-collection

我正在开发一个图形设计、矢量绘图应用程序，当有变化时，它需要在每一帧中渲染数据。问题是，如果用户正在移动节点，那么每一帧都会发生变化。这不是少量数据的问题，而是当数据量超过少量数据时会严重减速。

原因是为了渲染，我执行计算并将数据存储在数组中。然后当负责计算的函数完成时，GC 会简单地丢弃数据，下次调用该函数时，我们会创建新数组和新数据。

在 C++ 中，我可能会在内存中分配空间并写入该空间（一遍又一遍）。我可能会以这种方式提高性能。在我们 GC 的语言中，我不能那样分配空间。我必须做一个丑陋的 hack，我将一个数组定义为一个类成员，然后一遍又一遍地从函数写入该数组，尽管该数组仅用于该一个函数并且不被该类的其他方法使用。

我的问题是，在使用 GC 的语言中重用内存空间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:35:49.637

对象池将是主要的，请参见此处： [Gotoandplay 教程](http://www.gotoandlearn.com/play.php?id=160)

还有 [关于 GC 的 10 个重要提示](http://jacksondunstan.com/articles/1675)

我还建议您阅读 Grant 对 Flash Player 中的垃圾收集系统的解释，它非常独特，了解 Flash 如何处理数据对于数据密集型脚本非常重要。

[本次演讲](http://blogs.adobe.com/aharui/2007/03/garbage_collection_and_memory.html)

# mysql - 根据 phpmyadmin 中的“主键”和“auto_increment”列对行进行排序

> ID：14727200
> 
> 赞同：0
> 
> 时间：2013-02-06T10:51:04.803
> 
> 标签：mysql, phpmyadmin

我希望 phpmyadmin 根据列返回升序排序的行，具有`primary key`和`auto_increment` （例如`id`）。

somethimes 我的 phpmyadmin 返回无序的行。有一些排序行的选项吗？这更具可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:14:26.367

默认情况下，phpMyAdmin 不执行任何排序，只显示存储在数据库中的行。有时行会“乱序”插入，但您可以解决此问题：

*   导航到有问题的表
*   点击“操作”
*   在左上角的“Alter table order by”下，选择您的密钥和您的订单，然后点击“开始”

这是您需要不时进行的持续维护工作，但它应该可以在很大程度上解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T16:13:21.983

在 phpMyAdmin 4.5.0 中，也可能在早期版本中，您可以像这样设置[$cfg['TablePrimaryKeyOrder']](http://docs.phpmyadmin.net/en/latest/config.html#cfg_TablePrimaryKeyOrder)配置：

```
$cfg['TablePrimaryKeyOrder'] = 'DESC' 
```

> 当没有外部定义排序顺序时，这定义了具有主键的表的默认排序顺序。可接受的值：['NONE', 'ASC', 'DESC']

如果表具有主键并且没有对其应用其他排序，则这将设置默认排序。

# sql - 火鸟自动增量问题

> ID：14727201
> 
> 赞同：3
> 
> 时间：2013-02-06T10:51:10.180
> 
> 标签：sql, firebird, firebird2.5

我通过以下代码创建了客户表：

```
CREATE TABLE CUSTOMERS (
ID INTEGER DEFAULT 1 NOT NULL,
"NAME" VARCHAR(30) CHARACTER SET UTF8 COLLATE UTF8,
"LASTNAME" VARCHAR(30) CHARACTER SET UTF8 COLLATE UTF8);

ALTER TABLE CUSTOMERS ADD PRIMARY KEY (ID);

SET TERM ^ ;

CREATE TRIGGER BI_CUSTOMERS_ID FOR CUSTOMERS
ACTIVE BEFORE INSERT
POSITION 1
AS
BEGIN
 IF (NEW.ID IS NULL) THEN
  NEW.ID = GEN_ID(CUSTOMERS_ID_GEN, 1);
END^

SET TERM ; ^ 
```

但是当我插入第二行时：

```
insert into Customers(Name,LastName) values('Hamed','Kamrava'); 
```

它得到以下错误：

```
Violation of PRIMARY or UNIQUE KEY constraint "INTEG_2" on table "CUSTOMERS". 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:56:13.967

`id`是具有默认值的主键`1`。

在第一条记录中，由于您没有明确提及 的值`id`，因此它已插入 1。但是您不能有任何其他记录，`id = 1`因为`id`它是主键。

使用语句：

```
insert into Customers(id, Name, LastName) values (2, 'Hamed', 'Kamrava'); 
```

这应该插入记录。如果您不想硬编码每一行的 ID 值，建议您[创建一个`sequence`](http://www.postgresql.org/docs/7.4/static/sql-createsequence.html)然后在插入期间使用，

```
insert into Customers(id, Name, LastName) values (nextval('<seq_name>'), <name>, <lastname>); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:01:26.950

由于您的触发代码是

```
 IF (NEW.ID IS NULL) THEN
  NEW.ID = GEN_ID(CUSTOMERS_ID_GEN, 1); 
```

并且，正如@Orangecrush 发布的那样，您将默认值设置为 1，永远不会生成唯一 ID。所以你应该尽量省略 ddl 中的默认值。

# linq-to-sql - 更改 IRepository 以支持 IQueryable（LINQtoSQL 查询）

> ID：14727202
> 
> 赞同：1
> 
> 时间：2013-02-06T10:51:14.077
> 
> 标签：linq-to-sql, dependency-injection, castle-windsor, iqueryable

我继承了一个系统，该系统使用 Castle Windsor IRepository 模式从 DAL 中抽象出来，即 LinqToSQL。

我可以看到的主要问题是 IRepository 只实现了 IEnumerable。因此，即使是最简单的查询也必须从数据表中加载所有数据，才能返回单个对象。

目前使用情况如下

```
using (IUnitOfWork context2 = IocServiceFactory.Resolve<IUnitOfWork>())
       {
           KpiFormDocumentEntry entry = context2.GetRepository<KpiFormDocumentEntry>().FindById(id, KpiFormDocumentEntry.LoadOptions.FormItem); 
```

这使用 lambda 过滤，就像这样

```
public static KpiFormDocumentEntry FindById(this IRepository<KpiFormDocumentEntry> source, int id, KpiFormDocumentEntry.LoadOptions loadOptions)
    {
        return source.Where( qi => qi.Id == id ).LoadWith( loadOptions ).FirstOrDefault();
    } 
```

所以它成为一个很好的扩展方法。

**我的问题是**，我怎样才能使用相同的接口/模式等，同时实现 IQueryable 以正确支持 LinqToSQL 并获得一些严重的性能改进？

IRepository 的当前实现/接口如下

```
public interface IRepository<T> : IEnumerable<T> where T : class
{

    void Add(T entity);

    void AddMany(IEnumerable<T> entities);

    void Delete(T entity);

    void DeleteMany(IEnumerable<T> entities);

    IEnumerable<T> All();

    IEnumerable<T> Find(Func<T, bool> predicate);

    T FindFirst(Func<T, bool> predicate);
} 
```

然后这是由像这样的 SqlClientRepository 实现的

```
public sealed class SqlClientRepository<T> : IRepository<T> where T : class
{
    private readonly Table<T> _source;

    internal SqlClientRepository(Table<T> source)
    {
        if( source == null ) throw new ArgumentNullException( "source", Gratte.Aurora.SHlib.labelText("All_TableIsNull",1) );
        _source = source;
    }

    //removed add delete etc 

    public IEnumerable<T> All()
    {
        return _source;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _source.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

**目前的问题**是，在上面的示例中，.Where 正在调用“GetEnumerator”，然后将所有行加载到内存中，然后查找我们需要的行。

如果我更改 IRepository 以实现 IQueryable，我将无法实现所需的三个方法，因为它们在 Table 类中不是公共的。

我想我应该将 SQLClientRepository 更改为这样定义

```
public sealed class SqlClientRepository<T> : IQueryable<T>, IRepository<T> where T : class 
```

然后实现必要的方法，但我不知道如何传递表达式等，因为它们是 Table 类的私有成员，就像这样

```
public override Type ElementType
    {
        get { return _source.ElementType; } //Won't work as ElementType is private
    }

    public override Expression Expression
    {
        get { return _source.Expression; } //Won't work as Expression is private
    }

    public override IQueryProvider Provider
    {
        get { return _source.Provider; } //Won't work as Provider is private
    } 
```

任何帮助都非常感谢将其从“加载后遍历数据库中的每一行”移动到“选择 x 其中 id=1”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:02:54.590

如果您想公开 linq，您可以停止使用存储库模式并直接使用 Linq2Sql。原因是每个 Linq To Sql 提供程序都有自己的自定义解决方案。因此，如果您公开 LINQ，您会得到一个泄漏的抽象。那么使用抽象层就没有意义了。

您有两个选择，而不是公开 LINQ：

1.  实现规范模式
2.  使用我在这里描述的存储库模式：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:23:19.213

因此，虽然它可能不再是一个真正的抽象，但重点是在不更新所有已编写的查询的情况下获得 linq to sql 的好处。

所以，我让 IRepository 实现了 IQueryable 而不是 IEnumerable。

然后在SqlClientRepository实现中，我可以调用AsQueryable()将Table强制转换为IQueryable，然后一切就好了，像这样。

现在到处有人写了 IRepository().Where(qi => qi.id = id) 或类似的东西，它实际上将 ID 传递给 sql server 并且只拉回一条记录，而不是全部，然后循环查找正确的一个。

```
/// <summary>Provides the ability to query and access entities within a SQL Server data store.</summary>
/// <typeparam name="T">The type of entity in the repository.</typeparam>
public sealed class SqlClientRepository<T> : IRepository<T> where T : class
{
    private readonly Table<T> _source;
    private readonly IQueryable<T> _sourceQuery;

    IQueryable<T> Query()
    {
        return (IQueryable<T>)_source;
    }

    public Type ElementType
    {
        get { return _sourceQuery.GetType(); }
    }

    public Expression Expression
    {
        get { return _sourceQuery.Expression; }
    }

    public IQueryProvider Provider
    {
        get { return _sourceQuery.Provider; }
    }

    /// <summary>Initializes a new instance of the <see cref="SqlClientRepository{T}"/> class.</summary>
    /// <param name="source">A <see cref="Table{T}"/> to a collection representing the entities from a SQL Server data store.</param>
    /// <exception cref="ArgumentNullException"><paramref name="source"/> is a <c>null</c> reference (<c>Nothing</c> in Visual Basic).</exception>
    internal SqlClientRepository(Table<T> source)
    {
        if( source == null ) throw new ArgumentNullException( "source", "All_TableIsNull" ) );
        _source = source;
        _sourceQuery = _source.AsQueryable();
    } 
```

# php - PHP 脚本没有从 Jquery/AJAX 运行？

> ID：14727203
> 
> 赞同：0
> 
> 时间：2013-02-06T10:51:15.200
> 
> 标签：php, javascript, ajax

我正在尝试使用 Jquery/Javascript 和 Ajax 将用户选中的 HTML 单选按钮值传递给 PHP 变量。

以下是 HTML/Javascript 的简化版本：

```
 $("input[name=bus_plan]").on('change', function(){
            var $postID = "=" + $('input:radio[name=bus_plan]:checked').val();
        $.ajax ({
            type: "GET",
            url: "product-group.php",
            data: {"postID" : $postID },
            success : function(data){
                        alert("done");
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                alert("problem: " + errorThrown);
            } 
        });
    }); 
```

ajax 调用显示成功（即有一个“完成”警报。）

这是product-group.php：

```
 <?php
            echo "hello world<br>";
            $postid = $_GET['postID']; 
            echo "The postID is ".$postid;
    ?> 
```

任何有助于理解/修复 product-group.php 似乎没有运行的事实将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:58:14.463

尝试使用 alert(data) 而不是 alert("done") 来查看 jQuery 是否收到正确的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:00:10.303

您的回声输出在“数据”变量中，就像 ajaxcall 的“返回”一样。

Tru alert(data) 或在某些 div 上附加数据内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:52:42.520

尝试像这样重写您的ajax调用-

```
$("input[name=bus_plan]").on('change', function(){
            var postID  = $('input:radio[name=bus_plan]:checked').val();
        $.ajax ({
            type: "GET",
            url: "product-group.php?postID="+postID,
            success : function(data){
                        alert("done");
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                alert("problem: " + errorThrown);
            } 
        });
    }); 
```

# aptana - Meteor aptana 和模板

> ID：14727212
> 
> 赞同：3
> 
> 时间：2013-02-06T10:51:29.023
> 
> 标签：aptana, meteor

我使用 aptana 在 windows 上使用流星进行编码（它有很好的 ota SSH/FTP 编辑，这就是我使用它的原因）。但是`<template>`标签是一项流星功能，因此在使用它们时会发出警告。

是否有更好的 Windows 编辑器来使用 SSH/FTP 处理我的文件？或者甚至是添加`<template>`到 aptana 的更好方法？

![在此处输入图像描述](../Images/639bdf8857dda5a4ce7db37e06dacc02.png)

警告具体是：

![在此处输入图像描述](../Images/1ff721cf2701bb823c03b2cde018657f.png)

因为模板封装了所有 html，所以所有内容都带有下划线！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:58:50.233

如果你去，`Window > Preferences > Aptana Studio > Validation`你可以通过各种验证器（HTML Syntax Validator 和 HTML Tidy Validator 可能与你相关）。

在 HTML Tidy 下，您可以单击“元素”并将“无法识别的元素”从“警告”更改为“信息”或“忽略”。

在 HTML 语法验证器中，您可以添加正则表达式来忽略错误，就像在[这个问题](https://stackoverflow.com/questions/1216762/how-to-let-eclipse-accept-the-canvas-tag)中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:32:11.213

[Sublime Text 2](http://www.sublimetext.com/2)是一个不错的 Javascript 代码编辑器。

虽然默认情况下它不支持 FTP，但您可以使用[此处](http://www.brentmountford.com/tutorials/sublime-text-2-sftp-setup-usage/)给出的说明进行配置。

希望能帮助到你。

# android - android从AsyncTask过滤结果

> ID：14727213
> 
> 赞同：0
> 
> 时间：2013-02-06T10:51:29.717
> 
> 标签：android, android-asynctask, progressdialog, android-alertdialog

有没有办法在`onPostExecute`方法内部过滤 AsyncTask 的结果？我打算显示一个 MultipleChoice-property AlertDialog.Builder 来过滤掉结果而不结束或关闭 ProgressDialog。

这是我想做的过程。

```
AsyncTask.onPreExecute
- show ProgressDialog
AsyncTask.doInBackground
- scan all files on `Environment.getExternalStorageDirectory().listFiles()`
AsyncTask.onPostExecute
- filter the result parameter (this can be passed to another method of the Activity class or the AsyncTask class)
  - display AlertDialog.Builder with multiple selection property (for example, file extension names)
  - wait to finish selection on the shown AlertDialog.Builder
  - display AlertDialog.Builder with multiple selection property (for example, file directories)
  - wait to finish selection on the shown AlertDialog.Builder
] // do something with the filtered result
] dismiss ProgressDialog 
```

* * *

2013 年 2 月 6 日更新：

*   更新过程由上述完成`AsyncTask`。
*   过滤过程可以作为另一种方法放置在 Activity 类文件中。

# java - 我正在尝试在 Java Swing 应用程序中嵌入 Gecko 或 WebKit

> ID：14727219
> 
> 赞同：1
> 
> 时间：2013-02-06T10:51:40.660
> 
> 标签：java, swing, webkit, browser, gecko

我正在尝试使用 Swing 用 Ja​​va 制作 Web 浏览器，但我似乎找不到嵌入 WebKit 或 Gecko 的任何好方法。我目前正在使用 JEditorPane.getPage() 但这对我来说毫无用处。我对Java不是很熟悉，这个月才开始学习。无论如何，如果可能的话，我希望它是独立于系统的。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:26:41.490

我目前正在使用 JavaFX 的 WebPane。这对我的需要很好。关？

# c# - 主 Windows 窗体中的线程抛出“内存不足”，为什么？

> ID：14727221
> 
> 赞同：0
> 
> 时间：2013-02-06T10:51:46.993
> 
> 标签：c#, multithreading, memory

我在 Visual Studio 的主窗体中遇到内存不足的问题，我不知道为什么，我需要在我的程序初始化时放置一个进度条，它适用于我的程序的其他形式，但不是主要形式，它给我一个内存不足的错误

这是主要的表单代码：

```
 public MainForm()
    {
        checkinstance();

        ProgressDialog progressDialog = new ProgressDialog();

        Thread backgroundThread = new Thread(
            new ThreadStart(() =>
            {
                progressDialog.SetIndeterminate(true);                  
                InitializeComponent();
                progressDialog.BeginInvoke(new Action(() => progressDialog.Close()));
            }
        ));

        backgroundThread.Start();
        progressDialog.ShowDialog();
    } 
```

ProgressDialog 是一个带有进度条的表单，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:54:41.333

我假设你的 UI 控件的初始化需要很多时间。这就是为什么您要放入`InitializeComponent`后台线程的原因。

但是，这将失败：
InitializeComponent 创建您的 UI 对象的实例。UI 对象只允许从 UI 线程调用。这通常是他们创建的线程。
结果是，在后台线程之外访问 UI 对象的每个代码都会导致异常。

您需要在这里采取完全不同的方法。*在启动主窗体并将该*代码放入后台线程时，您需要确定究竟需要这么长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:18:43.183

谢谢大家，我最终在处理程序中使用了 BackGroundWorker 和 ProgressBar，对于那些可能遇到同样问题的人来说，这些都是很棒的文章

[http://mycodelog.com/2010/02/11/busy/](http://mycodelog.com/2010/02/11/busy/)

[http://www.dotnetperls.com/progressbar]

[http://theraneman.blogspot.com.br/2011/02/did-you-wish-backgroundworker-had.html](http://theraneman.blogspot.com.br/2011/02/did-you-wish-backgroundworker-had.html)（特别是这里）

# java - Java中的实例变量仅在一行中

> ID：14727222
> 
> 赞同：1
> 
> 时间：2013-02-06T10:51:49.023
> 
> 标签：java, instance-variables

嗨 stackoverflow 成员，您知道为什么 Java 类中的实例变量必须仅在一行中声明，而不是在 2 中声明吗？例如：

```
String ring;
ring = "indeed"; 
```

它给出了编译错误。为什么不允许？像我在这个例子中那样做是没有意义的，但是使用该过程来初始化从超类继承的变量而不使用子类构造函数可能很有用。

例如：

```
class Ringo{
String ring;
}
class RingoStar extends Ringo{
ring = "That's how to play drums";
} 
```

显然它给出了编译错误。这就是重点，有谁知道为什么不允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:57:49.223

你可以用稍微不同的语法得到你想要的。考虑：

```
class Ringo{
 String ring;

 { 
  ring = "indeed";
 }
} 
```

我想您的问题的答案是 Java 语法不允许在类主体中包含任何语句。您需要使用如上所示的初始化程序块（请参阅[http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:58:45.193

如果您将作业用大括号括起来，这在技术上是可行的：

```
String ring;
{
    ring = "indeed";
} 
```

赋值在任何构造函数之前执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:08:21.183

声明和初始化是有区别的。声明是分配和寻址的东西。初始化是用信息填充内存。它必须用不同的语法和规则来表示。

语言也需要照顾美学。写Java的时候，我猜这就是对美学的需求。当 Pascal 的架构师重写 .NET C# 时，我猜他们的做法有所不同。从 Java 和 Pascal 学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:48:06.890

Java 文件有两个完全独立的方面：

*   声明，在编译时采取行动；
*   执行代码，在运行时执行。

单行如

```
private int x = 1; 
```

看起来这一切都与执行代码有关（“它创建了一个实例变量”），但实际上它具有两个方面，实际上它们在发挥作用的时间方面存在很大差异。在 Java 中，从来没有在运行时创建变量，例如在 Ruby 中。

当你牢记这一点时，你会产生正确的直觉，即前一行在本质上与

```
x = 1; 
```

在班级的中间。

# javascript - Javascript 可以调用 Django 方法/函数吗？

> ID：14727224
> 
> 赞同：4
> 
> 时间：2013-02-06T10:51:55.153
> 
> 标签：javascript, python, django, model-view-controller, jquery

想象一个带有计数器和两个按钮的简单页面。计数器显示的值是在模型字段中读取/存储的。我希望当我按下“绿色”按钮时计数器加一，当我按下“红色”按钮时计数器减一。实现这种行为的最佳方法是什么：

1.  按钮调用模型的方法（Django 方法）更新模型的字段（数据库写入）；刷新整个页面并更新计数器显示（读取 DB）。
2.  按钮调用更新计数器显示（JS/HTML）的javascript函数；在后台，调用模型的方法（Django 方法）来更新模型的字段（DB 写入）。
3.  还有另一种方式？

javascript代码可以调用Django函数吗？我是 Django 的新手（我按照教程直到第 4 部分）。我已经了解 MVC/MTV 概念和数据读/写/显示，但现在困扰我的是在我的页面上引入行为/交互性。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T10:57:35.900

浏览器端的 JavaScript 位于前端，而 Django 位于后端（服务器端）。前者既不能也不需要直接调用后者的函数。它们之间的接口通常是 Web 服务 API，即使用 Web 服务中定义的 URL 进行 AJAX 调用的浏览器，这些 URL 由 Django 提供支持。

更具体地说，JavaScript 将 HTTP 请求发送到 Web 服务器，然后 Django 的 URL 调度程序将请求 URL 映射到相应的 Django 视图（基于函数或基于类）。简而言之，一个典型的路线可以简化为：

JavaScript -> HTTP 请求 -> Django URL 调度程序（映射规则在 urls.py 或 urls/XXX.py 中）-> Django 视图函数（views.py 或 views/XXX.py）-> Django 表单（可选）-> Django 模型（可选）。

更多 Django 技术细节，您可以参考[Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)或[Practical django Projects](https://rads.stackoverflow.com/amzn/click/com/1590599969)。

最后一句话：即使 JavaScript 可以调用 Django 函数方法/函数，也应该避免。从 Web 服务的角度来看，Django 方法/函数只是实现细节，更容易发生变化（与 Web 服务 API 相比）。后端开发人员可能会更改函数名称，切换到 Django 以外的其他框架，甚至出于任何原因更改 Java、Ruby 或 PHP 等编程语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:15:42.890

JavaScript 在浏览器中运行，而 Django 在服务器上运行。浏览器使用 HTTP 与服务器通信。

[您可以使用XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest) API从 JavaScript 进行 HTTP 调用。（这通常称为 AJAX。）您可以向服务器上的 URL。

您设置 Django 以通过 urls.py 处理此 URL，我相信您从教程中知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:13:48.383

使用 AJAX、[jQuery](http://lethain.com/two-faced-django-part-5-jquery-ajax/)或[dajax](http://www.dajaxproject.com/)使其变得简单易用。

# android - Android：如何从外部存储中删除文件？

> ID：14727226
> 
> 赞同：8
> 
> 时间：2013-02-06T10:52:09.897
> 
> 标签：android

![在此处输入图像描述](../Images/ae76fbf41385f9e3976025acf4a9bbf2.png)

我正在实现一个在外部存储中生成和创建文件的应用程序。我怎样才能删除它？

## 编辑

我添加了以下代码，但我仍然遇到同样的问题。请参阅下面的代码：

```
String fullPath = "/mnt/sdcard/";
System.out.println(fullPath);
try{
    File file = new File(fullPath, "audio.mp3");
    if(file.exists()){
        boolean result = file.delete();
        System.out.println("Application able to delete the file and result is: " + result);
        // file.delete();
    }else{
        System.out.println("Application doesn't able to delete the file");
    }
}catch (Exception e){
    Log.e("App", "Exception while deleting file " + e.getMessage());
} 
```

在 LogCat 中，我让**Application 能够删除文件，结果是：false**。执行此操作后，我附上了我的屏幕截图。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T11:11:21.173

```
File file = new File(selectedFilePath);
boolean deleted = file.delete(); 
```

其中 selectedFilePath 是您要删除的文件的路径 - 例如：

```
/sdcard/YourCustomDirectory/ExampleFile.mp3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:13:18.723

这是另一种方法，只需传递您的目录名称即可删除其中的内容

前任`"/sdcard/abc/yourdata"`

```
public void deleteFiles(String path) {      
    File file = new File(path);

    if (file.exists()) {
        String deleteCmd = "rm -r " + path;
        Runtime runtime = Runtime.getRuntime();
        try {
            runtime.exec(deleteCmd);
        } catch (IOException e) {

        }
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-26T10:12:50.563

我想你忘了把写权限放在你的 AndroidManifest.xml 文件中，这就是 delete() 总是返回 false 的原因。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T11:16:11.157

尝试以下代码删除自动创建的文件，当您不知道它的存储位置时：

```
public void clearApplicationData() {
    File cache = getCacheDir();
    File appDir = new File(cache.getParent());
    if (appDir.exists()) {
        String[] children = appDir.list();
        for (String s : children) {
            if (!s.equals("lib")) {
                deleteDir(new File(appDir, s));
                Log.i("TAG",
                        "**************** File /data/data/APP_PACKAGE/" + s
                                + " DELETED *******************");
            }
        }
    }
}

public static boolean deleteDir(File dir) {
    if (dir != null && dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    return dir.delete();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-06T11:06:44.580

它非常简单：

```
File file = new File(YOUR_IMAGE_PATH).delete();
if(file.exists())
    file.delete(); 
```

希望它会帮助你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-06T11:24:27.407

试试这个，它会从外部存储中删除文件。

```
public void deleteFromExternalStorage(String fileName) {
    String fullPath = "/mnt/sdcard/";
    try
    {
        File file = new File(fullPath, fileName);
        if(file.exists())
            file.delete();
    }
    catch (Exception e)
    {
        Log.e("App", "Exception while deleting file " + e.getMessage());
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T11:05:38.907

```
File file = new File(selectedFilePath);
boolean deleted = file.delete(); 
```

路径将类似于：`/mnt/Pictures/SampleImage.png`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-06T11:06:16.660

```
public void deleteOnExit () 
```

安排此文件在 VM 正常终止时自动删除。

请注意，在 Android 上，应用程序生命周期不包括 VM 终止，因此调用此方法不会确保文件被删除。相反，您应该使用最合适的：

使用 finally 子句手动调用 delete()。维护您自己的要删除的文件集，并在应用程序生命周期的适当时间点对其进行处理。使用 Unix 技巧，在所有读取器和写入器打开文件后立即删除文件。没有新的读取器/写入器能够访问该文件，但所有现有的读取器/写入器仍然可以访问，直到最后一个关闭文件。

# android - Android：我如何刷新我的数据

> ID：14727228
> 
> 赞同：0
> 
> 时间：2013-02-06T10:52:15.683
> 
> 标签：android

我有一个`PopUpMenu`列表，当我单击菜单时，我应该*刷新*我的 Ui 并显示来自**数据库的***更新*数据。

 **```
public void DoAction(View v, Activity activity, final AlertDialog alert) 
{

        Context myContext = v.getContext();

        PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
        String result = popUpMenu.getMenuName();
        if (result != null && result.equalsIgnoreCase(myContext.getResources().getString(R.string.showdist))) 
        {
            showPopupSearchPref(myContext, activity);
        }    

        else if (result != null && result.equalsIgnoreCase(myContext.getResources().getString(R.string.syncnow))) 
        {

            Synchronization sync = new Synchronization(v.getContext());
            sync.initiatePushSync(Calendar.SECOND, 0);
            sync.initiatePullSync(Calendar.SECOND, 0);
            Constants.Data = ((myPreferences) myContext.getApplicationContext()).getAllAttractions(true,Constants.field, Constants.order);          
            activity.finish();
        }
}

public void initiatePullSync(int calenderType, int time)
{
        Calendar newTime = Calendar.getInstance();
        newTime.add(calenderType, time);
        Log.d(TAG, "Syncronisation Device - Cloud " + newTime.getTime());

        if(Constants.syncPull == null)
        {
            Constants.syncPull = new Intent(context, PullFavourite.class);
            Log.d(TAG, "Syncronisation Device - Cloud Creating New Intent");
        }

        PendingIntent sender = PendingIntent.getBroadcast(context, Constants.syncPullFavPlaceId, Constants.syncPull, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager am = (AlarmManager)context.getSystemService(context.ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, newTime.getTime().getTime(), sender);
        Log.d(TAG, "Syncronisation Device - Cloud Reschedule after " + time + calenderType);
} 
```

我的问题是当我*第一次*单击菜单时，**页面刷新但没有数据**，如果我*第二次*单击它**刷新并获取数据**.. 我很震惊任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:23:19.523

用于`yourView.invalidate()`刷新您的视图。`yourView`您要刷新的视图在哪里**

# javascript - 使用贝宝的澳大利亚在线购买申请的 GST 问题

> ID：14727235
> 
> 赞同：0
> 
> 时间：2013-02-06T10:52:32.423
> 
> 标签：javascript, ruby-on-rails, ruby, paypal

我正在建立一个在线视频应用程序来销售澳大利亚视频和其他视频，但我陷入了 GST（澳大利亚商品和服务税）的问题。据我所知，只有澳大利亚居民必须支付 GST。如果购买者是澳大利亚居民并且包括 10%，或者他们来自澳大利亚境外并且不支付任何额外费用，我将如何让 PayPal 测试？有没有解决这个问题？另外，当其他国家/地区有不同的税收和税率时会发生什么，例如新西兰的 12.5% 消费税？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:04:24.600

使用第三方来处理货币交易可能更容易，例如[http://www.paypal.com/](http://www.paypal.com/)但如果这对您不起作用，您可以考虑使用 GeoIP 解决方案，或者“我是澳大利亚居民”复选框。你可以考虑只向澳大利亚人营销。

# android - 如何将选定的值传递给另一个活动？

> ID：14727239
> 
> 赞同：1
> 
> 时间：2013-02-06T10:52:43.403
> 
> 标签：android, android-intent, arraylist

我是安卓新手。。

我面临意图问题..

我的问题是...我想将用户选择的值从一个活动的字符串数组列表传递给另一个活动...这些值是字符串..通过 JSON 从数据库获取。并且这些值存储在一个数组列表中。

现在我需要将值从一个活动传递到另一个活动..通过使用意图..

> ```
>  lvForDialog = (ListView) viewList.findViewById(R.id.List_view);
>         ArrayAdapter<String> adapter = (new ArrayAdapter<String>(Nexttopic.this, R.layout.row_topic, R.id.child_row,tnamelist));
>         lvForDialog.setAdapter(adapter);        
>         lvForDialog.setOnItemClickListener(new OnItemClickListener()
>     {
>              @Override
>              public void onItemClick(AdapterView<?> parent, View view, int position,long id)        
>           {            
>         Intent intent = new Intent(Nexttopic.this,Question.class);     
>     intent.putExtra(TAG_TOPICNAME, tname); 
> ```

我想将其传递`TAG_TOPICNAME`给另一个活动。用户选择哪个主题名称我想传递...

这该怎么做？

多谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:57:40.780

试试这个 ：

```
i.putExtra("Name", tname );
startActivity(i); 
```

在您的第一个活动中，然后您可以将下面的代码添加到您的第二个活动并获取您的数据。

```
Intent intent = getIntent();
String Name = intent.getExtras().getString("Name"); 
```

**编辑：**以此为例在 onitemclick 侦听器中获取所选项目

```
@Override public void onItemClick(AdapterView<?> arg0, View arg1,int position, long arg3)
{ 
    Cursor GettName = (Cursor)viewList.getItemAtPosition(position);//Get a Cursor from the selected position to access the selected Item
    String tname = GettName.getString(GettName.getColumnIndex(CustomerDBAdapter.KEY_TNAME)); // get approporiate String from that cursor
    i.putExtra("Name", tname );
    startActivity(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:57:53.203

您应该在下面几行之后调用`startActivity(learnintent);`代码中缺少的内容

```
Intent learnintent = new Intent(Nexttopic.this,Question.class);     
learnintent.putExtra(TAG_TOPICNAME, tname); 
```

我希望你`TAG_TOPICNAME`在使用它之前也定义了常量。

然后在`Question`活动中执行以下操作来访问该值。

```
String topicName = intent.getIntent().getStringExtra(TAG_TOPICNAME); 
```

这里`TAG_TOPICNAME`应该是我在之前的活动中分配的相同值，更好地定义 a`class Constants`并将这个 String 常量放在那里，并在两个地方使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:00:05.987

最简单的方法是将会话 ID 传递给您用于启动活动的意图中的注销活动：

```
Intent intent = new Intent(getBaseContext(), SignoutActivity.class);
intent.putExtra("EXTRA_SESSION_ID", sessionId);
startActivity(intent) 
```

Intents的[文档](http://developer.android.com/guide/components/intents-filters.html)有更多信息（查看标题为“Extras”的部分）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:00:40.780

您可以使用捆绑包传递值。您可以捆绑它并使用意图传递它。示例代码如下所示......

捆绑 = 新捆绑（）；data1 = Double.valueOf(myEditText.getText().toString());

```
 bundle.putDouble("data1", data1);

    Intent intent = new Intent(this, AnotherActivity.class);
    intent.putExtras(bundle);
    startActivity(intent);
    finish(); 
```

使其形成意图的示例

```
 Bundle b = getIntent().getExtras();
        noqs = b.getDouble("data1");
        mTvCat.setText("hhhhhh"+point+noqs); 
```

而且，如果它适合您，那么您可以将其存储在静态变量中。您可以从应用程序的任何位置访问它。

# svn - SVN 退出但在本地保留更改

> ID：14727241
> 
> 赞同：1
> 
> 时间：2013-02-06T10:52:46.433
> 
> 标签：svn, undo, revert, backout

使用 SVN 命令行，撤销已提交更改但将其保留在本地修订版中的最佳方法是什么？即我希望远程存储库的最终状态是上次提交之前的状态，并且我希望我的本地修订的最终状态具有被撤销的更改（这样我可以花一些时间修复然后重新提交)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:56:49.543

1.  在工作副本中反向合并不需要的变更集
2.  提交修订
3.  将 WC 更新为 HEAD-1 修订版（更改之前的 HEAD）。

# c - 从c中的文件读取

> ID：14727243
> 
> 赞同：1
> 
> 时间：2013-02-06T10:52:49.740
> 
> 标签：c

这段 C 代码的一部分困扰着我，我看不出我做错了什么。我不是想找人写完整的代码，因为这是我的家庭作业，但我真的很想知道我在这里做错了什么。所以这是主要的一部分：

```
FILE *fp,*fd;
fp=fopen("test1.txt","r");
if (fp==NULL)
    return -1;
fd=fopen("test2.txt","w");
if (fd==NULL)
    return -2;
while (fp != EOF){
    fread(fd,1,10,fp);
}
//read_copy(fp,fd);
fclose(fp);
fclose(fd);
return 0; 
```

而且我似乎无法弄清楚为什么它不起作用。像这样写的while，它进入了一个无限循环。如果我尝试放入一段`fscanf()`时间，它会给我`seg fault`。那么我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:54:38.057

该`fread()`函数只接受*一个*类型的参数`FILE *`。

您实际上是用文件中的数据覆盖了 C 库的内部文件表示。

请参阅任何[基本参考](http://linux.die.net/man/3/fread)以了解`fread()`. 您需要一个缓冲区，例如：

```
char buffer[1024];

fread(buffer, 1, sizeof buffer, fp); 
```

此外，您当然必须检查`fread()`. 此外，我建议使用比`fd`and更好的名称`fp`，它们非常不透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:21:57.673

这应该有帮助：[在 C 中，我应该如何读取文本文件并打印所有字符串](https://stackoverflow.com/questions/3463426/in-c-how-should-i-read-a-text-file-and-print-all-strings)

使用时

```
 fwrite(buf, 1, nread, stdout); 
```

stdout 是输出流。您可以使用文件流 ( FILE * ) 而不是标准输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:02:05.433

您需要将数据读入缓冲区并将其写出。就像是：

```
FILE *in, *out;
char buffer[SZ]; /* Define some size */
int nrd;

/* Do the whole dance opening files, etc */

while((nrd = fread(buffer, 1, SZ,  in)) > 0)
    fwrite(buffer, 1, nrd, out);

/* If nrd == 0 --> Reached EOF
   If nrd <  0 --> Some kind of error */ 
```

条件中的条件`while`尝试读取最多`SZ`字节并检查它的内容，`fwrite`写出读取的内容。检查手册页。

# jsf - 如何在 JSF 中加载动态资源？

> ID：14727247
> 
> 赞同：4
> 
> 时间：2013-02-06T10:53:01.250
> 
> 标签：jsf, resources

我想使用`h:outputScript`标签将动态资源（生成的 JavaScript，JSON 中的技术配置）加载为动态资源。我知道我可以通过编写自己的 servlet 并通过普通标记脚本加载它来做到这一点，因为我更喜欢加载资源的“JSF 方式”。

有可能吗，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:29:03.030

是的，这是可能的。您可以通过使用特定的资源库名称来实现这一点，并对其进行自定义[`ResourceHandler`](https://javaee.github.io/javaee-spec/javadocs/javax/faces/application/ResourceHandler.html)拦截，并[`Resource`](https://javaee.github.io/javaee-spec/javadocs/javax/faces/application/Resource.html)在请求特定库的资源时返回自定义。

例如

```
<h:outputScript library="dynamicJs" name="some.js" /> 
```

和

```
public class DynamicJsResourceHandler extends ResourceHandlerWrapper {

    public DynamicJsResourceHandler(ResourceHandler wrapped) {
        super(wrapped);
    }

    @Override
    public Resource createResource(String resourceName, String libraryName) {
        if ("dynamicJs".equals(libraryName)) {
            return new DynamicJsResource(resourceName);
        } else {
            return super.createResource(resourceName, libraryName);
        }
    }

} 
```

和

```
public class DynamicJsResource extends Resource {

    private String resourceName;

    public DynamicJsResource(String resourceName) {
        this.resourceName;
    }

    @Override
    public String getRequestPath() {
        // TODO: return "/context/javax.faces.resource/" + resourceName + ".xhtml?ln=dynamicJs";
    }

    @Override
    public URL getURL() {
        // TODO: return new URL("http://localhost:8080" + getRequestPath());
    }

    @Override
    public Map<String, String> getResponseHeaders() {
        // TODO: return desired HTTP response headers. 
    }

    @Override
    public InputStream getInputStream() throws IOException {
        // TODO: return InputStream by resourceName.
    }

    @Override
    public boolean userAgentNeedsUpdate(FacesContext context) {
        // TODO: return true when resource has been modified in server side.
    }

} 
```

要让它运行，请在 faces-config.xml 中按如下方式注册它：

```
<application>
    <resource-handler>com.example.DynamicJsResourceHandler</resource-handler>
</application> 
```

如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，那么您还可以保存样板代码并从其扩展，[`org.omnifaces.resourcehandler.DynamicResource`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/resourcehandler/DynamicResource.html)因此您只需要实现`getInputStream()`. 如果您不使用 OmniFaces，那么您始终可以使用它的[源代码](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/resourcehandler/DynamicResource.java)作为指导。

# android - 键盘出现时EditText失去焦点；需要触摸两次才能编辑

> ID：14727248
> 
> 赞同：34
> 
> 时间：2013-02-06T10:53:06.073
> 
> 标签：android, focus, android-edittext

我一直在设计一个包含可扩展列表的应用程序。在每个列表的末尾，一个空`EditText`的已准备好接收评论。我有以下问题；当我触摸 时`EditText`，屏幕会稍微调整大小（这不是问题，因为调整大小并不总是发生，这取决于我的布局和`EditText`int 列表的位置）并且出现软键盘。然而，在这些事件中，`EditText`失去焦点并且不会重新获得焦点。这很不方便，因为没有焦点，尽管键盘可用，但来自键盘的输入不会到达`EditText`. 一旦我再次触摸它，它`EditText`就会按预期运行。

它变得更加陌生。在键盘仍然显示的情况下，我可以触摸不同`EditText`的东西，同样的事情也会发生；它失去焦点。但是，一旦我通过了最初的失焦，我就可以在之前触摸`EditText`的 s 之间自由移动，而不会出现任何与焦距相关的问题。只有当我隐藏软键盘时，“状态”才会消失，我需要点击`EditText`s 两次才能编辑它们。

这是我的代码的摘录。首先，`empty_comment.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<EditText
    android:id="@+id/blank_box"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inputType="textCapSentences"
    android:imeOptions="actionDone"
    android:hint="@string/hint"
    android:layout_marginLeft="30dip" >
</EditText>
</LinearLayout> 
```

这是我使用相关布局的片段的摘录：

```
convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.comment_empty, null);
final EditText editText = (EditText) convertView.findViewById(R.id.blank_box);
editText.setOnEditorActionListener(new OnEditorActionListener()
{   
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
    {
        if(actionId == EditorInfo.IME_ACTION_DONE)
        {
            // Unrelated code
        }
        return true;
    }
}); 
```

我没有在我的清单文件中指定任何特定的输入，但如果认为有帮助，我可以提供它。

**更新：**

在 中添加一条线来`Activity`调整平底锅`android:windowSoftInputMode="adjustPan"`确实可以部分解决问题。它将当前的意外行为替换为`EditText`视图可能被软键盘隐藏的问题。

到目前为止，还没有找到理想的解决方案，但正在接近。查看已接受答案中的评论，它们可能对您有用！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-06T10:55:07.730

您需要更改您的 AndroidManifest.xml

添加`android:windowSoftInputMode="adjustPan"`包含列表视图的活动。这将解决您的问题。

```
<activity android:name=".MyEditTextInListView"
          android:label="@string/app_name"
          android:windowSoftInputMode="adjustPan"> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-07T05:47:46.483

一个解决方案是发布一个延迟的可运行文件，检查 EditText 视图是否仍然聚焦，如果不是，聚焦它。

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(final View v, boolean hasFocus) {
        if (hasFocus) {
            // Request focus in a short time because the
            // keyboard may steal it away.
            v.postDelayed(new Runnable() {
                @Override
                public void run() {
                    if (!v.hasFocus()) {
                        v.requestFocus();
                    }
                }
            }, 200);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T09:29:39.830

我有同样的问题......我通过扩展 EditText 解决了它。

我创建了一个 onClickListener，在这个方法中我得到了以下代码：

```
public OnClickListener clickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        EditTextInput.this.setFocusable(true);
        EditTextInput.this.setFocusableInTouchMode(true);
        EditTextInput.this.requestFocus();
    }
}; 
```

然后我将以下代码放在 onKeyPreIme 回调中。您必须扩展 EditText 才能访问它。

```
@Override
public boolean onKeyPreIme(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK & event.getAction() == KeyEvent.ACTION_UP) {
        EditTextInput.clearFocus();
        EditTextInput.this.setFocusable(false);
        EditTextInput.this.setFocusableInTouchMode(false);            
        return false;
    }
    return super.dispatchKeyEvent(event);
} 
```

我发现我必须切换可聚焦标志才能在第一次单击时调出键盘。希望这会有所帮助……对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T10:55:06.403

你可以尝试类似的东西：

```
editText.requestFocus(); 
```

你也可以这样设置：

```
android:windowSoftInputMode="stateHidden" 
```

在您的清单文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:57:50.053

您可以尝试以下代码到 android manifest.xml

将代码添加到 android manifest **android:windowSoftInputMode="adjustPan"**

并添加到 xml 布局

```
<EditText  
      android:background="#FFFFFF"
      android:capitalize="sentences"
      android:inputType="textVisiblePassword"
      android:layout_height="35px"
      >
      <requestFocus /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-21T21:47:15.527

除了`android:windowSoftInputMode="adjustPan"`，请尝试以下操作：

1.  设置`android:descendantFocusability="afterDescendants"`为您的`ListView`.
2.  设置`android:focusable="true"`和`android:focusableInTouchMode="true"`到您的`EditText`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-21T23:43:35.240

我遇到了这个问题，`android.support.design.widget.TextInputEditText`它通过改变清单中的标志顺序来解决：

```
android:windowSoftInputMode="stateHidden|adjustPan" 
```

至

```
android:windowSoftInputMode="adjustPan|stateHidden" 
```

# performance - 画布的 PlayN WebGL 性能

> ID：14727250
> 
> 赞同：0
> 
> 时间：2013-02-06T10:53:12.530
> 
> 标签：performance, webgl, playn

WebGL 真的很慢。

每帧 100 个精灵 - 好的，

每帧 1000 个精灵 - 需要优化，

10000 个精灵，fps 从 40 下降到 20fps。

我根本不需要 3D。我不需要滤镜、着色器、灯光和其他 3D 东西。我只需要快速的 2d 画布（没有像素平滑），能够渲染 png 和渲染形状以进行调试（线条、条形、圆形）。是否有可能从 PlayN 引擎中排除 WebGL 并切换到 HTML5 Canvas？（我想它会比 WebGL 快得多。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:00:39.300

这与 WebGL 无关。WebGL 速度很快。它也与 PlayN 无关。您要求使用 SUV 参加 Indy 500 比赛。SUV永远无法与专业赛车相提并论。但是，如果您必须在未知的地形上开车，带孩子去看足球比赛，并在回家的路上买杂货，那么 SUV 将是一个更好的选择。

在您描述的情况下，缓慢既不是 WebGL 调用也不是 Canvas.drawImage 调用，而是 PlayN 执行完整的仿射变换乘法来计算每帧上每个精灵的当前变换。这是你 99% 的时间想要的，因为大多数游戏一次在屏幕上的精灵少于 1000 个，并且更喜欢能够以任何他们喜欢的方式操纵这些精灵的灵活性。

如果您真的需要 10,000 个精灵，并且您不只是尝试将场景图引擎用作粒子系统，那么请使用`ImmediateLayer`图层并调用 Surface.drawImage 将图像绘制到需要的位置，并保持数学这将他们的位置确定到最低限度。

# python - 具有多个匹配项的opencv python MatchTemplate函数

> ID：14727255
> 
> 赞同：7
> 
> 时间：2013-02-06T10:53:27.200
> 
> 标签：python, opencv

我试图在大图中找到小图并使用 MatchTemplate()

```
img = cv2.imread("c:\picture.jpg")
template = cv2.imread("c:\template.jpg")

result = cv2.matchTemplate(img,template,cv2.TM_CCOEFF_NORMED)
y,x = np.unravel_index(result.argmax(), result.shape) 
```

工作正常我总是得到左上角的坐标，但这只是一点。如果我在大图上有多个匹配项，我如何才能获得所有匹配项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T12:36:09.413

就是这样：

```
result = cv2.matchTemplate(img, template, cv2.TM_SQDIFF)

#the get the best match fast use this:
(min_x, max_y, minloc, maxloc) = cv2.minMaxLoc(result)
(x,y) = minloc

#get all the matches:
result2 = np.reshape(result, result.shape[0]*result.shape[1])
sort = np.argsort(result2)
(y1, x1) = np.unravel_index(sort[0], result.shape) # best match
(y2, x2) = np.unravel_index(sort[1], result.shape) # second best match 
```

这是最快的方法，因为上面对所有匹配项进行了排序，甚至是完全错误的匹配项。如果性能对您很重要，您可以改用瓶颈的[partsort](http://berkeleyanalytics.com/bottleneck/reference.html#bottleneck.partsort)函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-23T03:49:16.373

@b_m 的答案会起作用，但它会找到太多匹配项。匹配过程在图像上滑动模板，在每个像素上进行比较。（或几乎每个像素。扫描区域因模板的大小而减小）。这意味着在一个好的匹配附近，你会得到很多其他的匹配，它们相差一个像素。如果你制作匹配结果的图像，你可以看到你得到了很多匹配。

```
import cv2
import numpy as np

image = cv2.imread('smiley.png', cv2.IMREAD_COLOR )
template = cv2.imread('template.png', cv2.IMREAD_COLOR)

h, w = template.shape[:2]

method = cv2.TM_CCOEFF_NORMED

threshold = 0.95

res = cv2.matchTemplate(image, template, method)
# min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)

cv2.imwrite('output.png', 255*res) 
```

输入图像：

[![在此处输入图像描述](../Images/1d1b29fb845fef9dc06e08b8e5e88eb0.png)](https://i.stack.imgur.com/L8WNY.png)

使用眼睛作为模板：

[![在此处输入图像描述](../Images/dc279f0623d26d0c1b778de44346e63e.png)](https://i.stack.imgur.com/K5u4w.png)

并查看输出。两只眼睛附近有很多白色像素。你会得到不少高分的答案：

[![在此处输入图像描述](../Images/b66d6928c17ccd53d547cf261b9b73c3.png)](https://i.stack.imgur.com/lklIa.png)

在同一图像中查找模板的多个副本的另一种方法是通过覆盖找到的区域来修改图像，然后再次匹配。但比这更好的是修改结果并重新运行`minMaxLoc`。[此答案](https://stackoverflow.com/a/58514954/9705687)中演示了这两种技术。

# java - 使用卡尔曼滤波器进行多点跟踪平滑？

> ID：14727256
> 
> 赞同：3
> 
> 时间：2013-02-06T10:53:28.833
> 
> 标签：java, geolocation, smoothing, kalman-filter

关于通过多点定位的飞机跟踪，我有以下问题：我们设法实现了一些算法，以使用 3 个或 4 个接收器基于多点定位计算飞机位置。问题是，这首歌看起来很“摇摇欲坠”（请参阅​​链接中的图片，抱歉，由于声誉问题，我无法在此处添加。）

[GPS 和 Mlat 轨道](https://plus.google.com/photos/107894238900143148035/albums/5841790104694880129?authkey=CPe-5-S3uJDreQ)

绿线是飞机在地面上的真实 GPS 轨迹，橙色是通过多点测量计算得出的轨迹（到达时间差，大约每秒一到两个位置）。GPS Track 仅供比较，未来可能无法使用。

什么是平滑轨道的好方法？我偶然发现了卡尔曼滤波器。我不是数学家，也不是机器人等方面的经验。这个级别的数学对我来说非常难以理解（我很高兴我能很好地管理多点定位）。Track 是通过封闭式算法计算的。也许切换到迭代算法也可能有帮助？

那么，对生成的多点定位本身实施卡尔曼滤波器是否有意义？或者在实际计算位置之前可能已经在 TDOA 值上？摇晃的外观会导致接收器站点出现轻微的测量误差，因此它可能有助于平滑/过滤 TDOA 值本身。

但是我仍然需要一个非常复杂的更新模型，因为飞机正在移动并且 TDOA 值取决于一个真实的飞机位置。我可以想象，平滑 Track 和平滑 TDOA 值的模型本身非常相似。如果不一样。

我们在 Java 中完成了所有这些工作，所以也许有一些可用的库可以让我们无需再次进行所有数学运算就可以开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:28:19.113

这是一个经典的跟踪问题，在这个问题上你会发现大量采用不同方法的科学文献。坏消息是，如果您找不到可以为您完成这项工作的库，您将不得不研究数学。

利用卡尔曼滤波器进入正确的方向，因为它可以从间接测量数据估计状态（位置、速度）。由于您的多文字是测量数据的非线性映射，因此您需要一个非线性估计器。

我对此类问题的标准推荐是无味卡尔曼滤波器，因为它的（相对）算法简单性和高鲁棒性。它还可以处理您的多文字，因为允许在一个时间步内进行多个不同的测量。至于卡尔曼滤波器，您还需要一个运动模型 - 一个简单的（线性）模型可能会完成这项工作，因为我假设您正在跟踪普通飞机（不是高度机动的喷气式战斗机）。不幸的是，我不知道任何适当的实现 - 有关如何有效实现的说明，请阅读（其背后的数学并不简单）：

Merwe, RVD & Wan, EA The square-root unscented Kalman filter for state and parameter-estimation in International Conference on Acoustics, Speech, and Signal Processing, 2001, 3461-3464

对于（低精度）快速而肮脏的解决方案，请为每个维度实施[FIR 低路径滤波器](http://en.wikipedia.org/wiki/Finite_impulse_response "FIR 滤波器")。您会在网络上找到可以为您生成代码的工具（例如[这里](http://www-users.cs.york.ac.uk/~fisher/mkfilter/trad.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:08:00.463

在快速浏览了卡尔曼滤波器的维基百科条目后，这似乎很有希望。

这是您可以考虑的另一个建议：

由于之前的测量，您可以估计飞机的位置、速度和方向。因此，对于任何新的测量，您都可以计算将平面移动到该位置所需的力是否现实。通过这种方式，您可以整理出误差较大的测量值。

# c# - C#复制字符串的子字符串，然后将其放在字符串的下一个单词之前

> ID：14727258
> 
> 赞同：2
> 
> 时间：2013-02-06T10:53:33.843
> 
> 标签：c#

我正在尝试复制字符串中每个单词的最后一个字符，然后将复制的字符放在下一个单词的第一个位置。例如，如果我输入字符串“The quick brown fox jumps over the lazy dog”，输出应该是“The equick kbrown nfox xjumps sover rthe elazy ydog”；

这是我到目前为止所拥有的：

```
string s = "The quick brown fox jumps over the lazy dog";

for (int a = 0; a < s.Length; a++)
{
    string b = s.Substring(a,1);
    if (b == " ")
    {
        string c = s.Substring(a - 1, 1);
        string d = s.Insert (a+1, c);
        Console.Write(d);                     
    }                
} 
```

结果是这样的： 敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色 nfox 跳过了懒惰的狗 敏捷的棕色狐狸 x 跳过了懒惰的狗 敏捷的棕色狐狸跳过了懒惰的狗棕色狐狸跳过懒惰的狗快速的棕色狐狸跳过懒惰的狗快速的棕色狐狸跳过懒惰的狗

我想要实现的是这个输出“The equick kbrown nfox xjumps sover rthe elazy ydog”

感谢所有顺便回答的人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:59:57.273

也许：

```
string[] words = "The quick brown fox jumps over the lazy dog".Split();
string res = String.Join(" ", words.Select((w, i) => i == 0 ? w : words[i-1].Last() + w)); 
```

[**演示**](http://ideone.com/lKLKqt)

```
The equick kbrown nfox xjumps sover rthe elazy ydog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:59:01.893

您创建一个新字符串 ( `d`)，在其中插入一个字符，打印它并忘记它。

你可以做什么：

*   将字符串拆分为单词
*   换个词
*   将它们组合成一个新字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:00:27.303

```
var words = s.Split(' ').Where(x=>x!="").ToArray();
var str = "";
var sb = new StringBuilder();
for(var i = 0; i< words.Lenght;i++)
{
    sb.Append(str);
    sb.Append(words[i]);
    sb.Append(" ");
    str = words[words.Lenght - 1].ToString();
}

var result = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:01:00.750

答案相对简单，您可以使用拆分字符串

```
string[] sArray = s.Split(new char[]{' '}); 
```

然后遍历数组

```
for (int i = 1; i < sArray.Length; i++)
{
    sArray[i] = sArray[i - 1].Substring(sArray[i - 1].Length) + sArray[i];
}
s = string.Join(" ", sArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T11:02:21.717

应该看起来像这样。

```
string S= "The quick brown fox jumps over the lazy dog";
                var splitString = S.Split(' ');
                string newS = splitString[0];
                for(int i=1;i<splitString.Length;i++)
                {
                    splitString[i] = splitString[0].ElementAt(splitString[0].Length) + splitString[i];
                    newS += " " + splitString[i];
                }
                Console.WriteLine(newS); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T11:05:58.193

那这个呢？

```
string s = "The quick brown fox jumps over the lazy dog";

char lastChar = default(char);
bool addLastChar = false;
var stringBuilder = new StringBuilder(s);
for (int i = 0; i < stringBuilder.Length; i++)
{
    var ch = stringBuilder[i];

    // TODO: consider using char.IsWhiteSpace(ch) method call.
    // Please note: it will return true for different whitespace characters (tabulation, line feed, carriage return, etc).
    if (ch == ' ')
    {
        addLastChar = true;
    }
    else
    {
        if (addLastChar)
        {
            stringBuilder.Insert(i, lastChar);
            addLastChar = false;
        }

        lastChar = ch;
    }
}

var result = stringBuilder.ToString(); 
```

该代码也适用于中间有多个空格的字符串，如下所示：

```
string s = "The    quick    brown   fox jumps over the lazy dog"; 
```

# javascript - 在调用外部脚本之前覆盖对象函数

> ID：14727262
> 
> 赞同：1
> 
> 时间：2013-02-06T10:53:49.693
> 
> 标签：javascript

我正在尝试编写 Greasemonkey 脚本或 Userscript 来修复网站中的错误，该错误处理对象的错误功能。我可以手动解决问题，方法是在生成函数原型的代码行添加断点，并使用 js 控制台手动覆盖函数原型。但是，我认为没有任何方法可以使用代码来做到这一点。外部脚本在 html 正文的末尾加载，但问题代码在同一脚本中执行。

有没有办法以某种方式将 javascript 代码注入页面，以便在创建此 Ft.prototype.J 时，我可以立即对其进行修改？问题是代码也被混淆和缩小了，所以我不确定它的一半是做什么的。

以下是代码的基本概要：

```
//What does this do?????
function A(a, b) {
    function c() {}
    c.prototype = b.prototype;
    a.f = b.prototype;
    a.prototype = new c;
    a.prototype.constructor = a
}

function Ft(a, b) {
    $.call(this, b);
    //some stuff
}
//doing something with jQuery?
A(Ft, $);
Ft.prototype.J = function (a) {
   //modifies the DOM content
};
//Code soon after that calls some object.J 
```

如果我将代码行添加`Ft.prototype.J = function() {} //my own function`到我的greasemonkey脚本中，它会按预期返回错误`Ft not defined`。但是，如果我在加载结束时执行该行，则损坏的函数已经运行，并且 DOM 已经被感染。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:08:42.187

我认为您可以使用 getter/setter 和 执行一些魔术[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)，因为该函数是全局声明的：

```
(function() {
    var Ft;
    function myJ() {
        // do whatever YOU want to do
    }
    Object.defineProperty(window, "Ft", { // use unsafeWindow in GM?
        configurable: true,
        enumerable: true,
        get: function() { return Ft; },
        set: function(n) {
            // Hah, we've catched the function declaration!
            Ft = n;

            // just making it non-writable would lead to an exception
            Object.defineProperty(Ft.prototype, "J", {
                get: function() { return myJ; },
                set: function() { /* ignore it! */ }
            });
        }
    });
})(); 
```

现在，如果有人执行您在问题中发布的代码，将调用设置器，您可以使用所需的值进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:13:09.910

不确定，但是您基本上可以编写一个计时器代码来检查 Ft 对象是否可用，然后修改函数，例如

```
var interval = setInterval(function() {
    if (Ft) {
       Ft.prototype.J = function() {} //my own function
       clearInterval(interval)
    }
}, 0); 
```

# google-chrome-extension - 注入多个内容脚本

> ID：14727263
> 
> 赞同：1
> 
> 时间：2013-02-06T10:53:50.973
> 
> 标签：google-chrome-extension

我有几个使用多个内容脚本的扩展。通过清单添加这些意味着它们在首次安装扩展程序时不可用（用户必须先刷新内容页面），因此扩展程序似乎不起作用，用户卸载它！

尝试了很多方法，但找不到注入多个 javascript 文件的方法。有没有人找到这样做的方法，或者提醒用户在运行扩展程序之前需要刷新事实页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:01:23.590

无需刷新页面，`chrome.tabs.executeScript`用于注入所有旧页面。

检查示例实现的工作版本。

# 示范

### 清单.json

注册后台页面并授予 Chrome 扩展程序的所有权限。

```
{
    "name": "Inject Code",
    "description": "http://stackoverflow.com/questions/14727263/inject-multiple-content-scripts",
    "manifest_version": 2,
    "version": "1",
    "permissions": [
        "<all_urls>",
        "tabs"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    }
} 
```

### 背景.js

使用查询 API 注入代码

```
document.addEventListener("DOMContentLoaded", function () {
    //Fetch all inactive completly loaded tabs or use your own query
    chrome.tabs.query({
        active: false,
        "status": "complete"
    }, function (tabs) {
        for (tab in tabs) { //It returns array of tabs
            chrome.tabs.executeScript(tabs[tab].id, {
                "file": "inject.js" //Inject Code
            });
        }
    });
}); 
```

### 注入.js

```
console.log("Injected.."); 
```

# 输出

您会看到注入脚本而无需刷新页面。

# 参考

*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:11:55.277

您使用动态脚本注入，请[参阅](http://developer.chrome.com/extensions/tabs.html#method-executeScript)

# arrays - 来自嵌套字典数组 Xcode 的数组

> ID：14727264
> 
> 赞同：0
> 
> 时间：2013-02-06T10:53:52.613
> 
> 标签：arrays, xcode, uitableview, nested, plist

我创建了一个如下的 plist 文件，所有部分都遵循相同的结构：

```
<array>
    <dict>
        <key>image</key>
        <string>gradient1.png</string>
        <key>name</key>
        <string>Section 1</string>
        <key>list</key>
        <array>
            <dict>
                <key>questionTitle</key>
                <string>How are you doing?</string>
                <key>questionInfo</key>
                <string>questionInfo1</string>
            </dict>
            <dict>
                <key>questionTitle</key>
                <string>What are you doing?</string>
                <key>questionInfo</key>
                <string>questionInfo2</string>
            </dict>
            <dict>
                <key>questionTitle</key>
                <string>Where are you going</string>
                <key>questionInfo</key>
                <string>questionInfo3</string>
            </dict>
        </array>
    </dict> 
```

我在嵌套表中使用它。我使用“名称”作为部分标题，并希望创建一个包含不同问题及其相关信息的新数组。

```
- (void) setCategoryArray
{
    NSURL *url = [[NSBundle mainBundle] URLForResource:@"QuestionList" withExtension:@"plist"];
    NSArray *mainArray = [[NSArray alloc] initWithContentsOfURL:url];
    NSMutableArray *categoryArray = [[NSMutableArray alloc] initWithCapacity:[mainArray count]];
    for (NSDictionary *dictionary in mainArray) {
        Category *category = [[Category alloc] init];
        category.name = [dictionary objectForKey:@"name"];
        category.list = [dictionary objectForKey:@"list"];
        questionList = category.list;
        NSLog(@"%@", questionList);
        category.image = [dictionary objectForKey:@"image"];
        [categoryArray addObject:category];
    }
    NSMutableArray *questionArray = [[NSMutableArray alloc] initWithCapacity:nil];
    for (NSDictionary *dictionary in questionList) {
        Category *question = [[Category alloc] init];
        question.questionTitle = [dictionary objectForKey:@"questionTitle"];
        question.questionInfo = [dictionary objectForKey:@"questionInfo"];
        [questionArray addObject:question];
    }
    self.categoryList = categoryArray;
    self.questionList = questionArray;

} 
```

认为这可能是我如何创建 questionArray 或我在表格标签中引用它的方式的问题（见下文），但我为每个单元格获得相同的条目（但它不是重复的第一个或最后一个条目）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SavedCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Category *question = (Category *)[self.questionList objectAtIndex:indexPath.section];
    UILabel *questionNameLabel = (UILabel *)[cell viewWithTag:101];
    questionNameLabel.text = question.questionTitle;

    return cell;
} 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:33:51.660

好的，我想我已经找到了你的问题。

您在第一个 for 循环中设置`questionList`为。`category.list`该 for 循环在`questionArray`循环运行之前完成（因此第二个 for 循环只会运行一个`questionList`- 最后一个）。

我认为您所追求的解决方案是将第二个 for 循环放在第一个循环中：

```
 for (NSDictionary *dictionary in mainArray) {
        Category *category = [[Category alloc] init];
        category.name = [dictionary objectForKey:@"name"];
        category.list = [dictionary objectForKey:@"list"];
        category.image = [dictionary objectForKey:@"image"];
        [categoryArray addObject:category];

        NSMutableArray *questionArray = [[NSMutableArray alloc] initWithCapacity:nil];
        for (NSDictionary *dictionary in category.list) {
            Category *question = [[Category alloc] init];
            question.questionTitle = [dictionary objectForKey:@"questionTitle"];
            question.questionInfo = [dictionary objectForKey:@"questionInfo"];
            [questionArray addObject:question];
        }
        [self.questionList addObject:questionArray];
    }
    self.categoryList = categoryArray; 
```

然后问题`cellForRowAtIndexPath`将是：

```
Category *question = (Category *)[[self.questionList objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]; 
```

我还没有对此进行测试，但希望它会起作用——或者使用一些 NSLog，让我们更接近一个可行的解决方案。

# node.js - 使用 Plates 更改 Google Analytics 代码

> ID：14727266
> 
> 赞同：1
> 
> 时间：2013-02-06T10:53:58.940
> 
> 标签：node.js, flatiron.js, plates

有没有办法使用 Plates 更改模板中包含的 Google Analytics 代码？

例如，对于以下模板：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script id="googleAnalytics">
        var _gaq=[['_setAccount','GA_ACCOUNT_CODE'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html> 
```

我想使用不同的`GA_ACCOUNT_CODE`根据代码运行的环境使用不同的。

板子可以做到这一点吗？如果不是，在 NodeJS 和 Flatiron 中解决这个问题的常用方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:29:00.507

Plates 的想法很棒，但远未完成。这是一个解决方案。

## 应用程序.js

var fs = 需要('fs'); var 盘子 = 要求（'盘子'）; var flatiron = require('flatiron'); var app = flatiron.app;

```
app.use(flatiron.plugins.http);

app.router.get('/', function(){
    var html = fs.readFileSync('index.html', 'utf-8');
    var map  = plates.Map();
    var data = {"GA_ACCOUNT_CODE": "YOUR_CODE_FROM_CONFIG"}

    map.where('data-ga').is('GA_ACCOUNT_CODE').insert('GA_ACCOUNT_CODE');
    html = plates.bind(html, data, map);
    this.res.html(html);
});

app.start(3000); 
```

## 索引.html

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script id="googleAnalytics" data-ga="GA_ACCOUNT_CODE">
            var GA_ACCOUNT_CODE = document.getElementById('googleAnalytics').getAttribute('data-ga');

            var _gaq=[['_setAccount',GA_ACCOUNT_CODE],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html> 
```

另一种方法就是这样的 string.replace() ：

```
var html = fs.readFileSync('index.html', 'utf-8');
html     = html.replace('GA_ACCOUNT_CODE', 'YOUR_CODE_FROM_CONFIG');

this.res.html(html); 
```

看看[cheerio](https://github.com/MatthewMueller/cheerio)以获得支持。它就像任何其他 css 选择器和 dom 操作前端库一样，只是后端。

# c++ - opencv 从缓冲区读取 jpeg 图像

> ID：14727267
> 
> 赞同：26
> 
> 时间：2013-02-06T10:53:59.440
> 
> 标签：c++, image, image-processing, opencv, jpeg

我有一个`unsigned char*`包含 jpeg 图像数据的缓冲区。我想使用 c++ 和 opencv 显示该图像。如果我做：

```
Mat img(Size(640, 480), CV_8UC3, data);
namedWindow("image", 1);
imShow("image", img); 
```

我得到一堆嘈杂的像素。

我想这是因为数据是 jpeg（带有标题）。因为这有效：

```
Mat imgbuf(Size(640, 480), CV_8UC3, data);
Mat img = imdecode(imgbuf, CV_LOAD_IMAGE_COLOR); 
```

但是我不能使用 imdecode 函数，因为它来自基于 GTK 2 的 highgui.h，在我的项目中我使用 GTK 3。

那么，如何显示缓冲区数据呢？有没有办法在opencv中解码jpeg图像而不是imdecode，如果这是问题的话。我真的不想用Qt重建opencv ...

还有其他建议吗？

（使用 Linux）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-07-11T20:51:48.663

我在网上看到很多对这个问题的回答说你应该直接调用 libjpeg 并绕过 OpenCV 的 imread() 例程。

这不是必需的！您可以使用 imdecode() 从内存中解码原始图像缓冲区。这样做的方法不直观，并且没有足够的文档来帮助人们第一次尝试这样做。

如果您有原始文件数据的指针/大小（fread() 直接来自 .jpg、.png、.tif、文件等...

```
int    nSize = ...       // Size of buffer
uchar* pcBuffer = ...    // Raw buffer data

// Create a Size(1, nSize) Mat object of 8-bit, single-byte elements
Mat rawData( 1, nSize, CV_8UC1, (void*)pcBuffer );

Mat decodedImage  =  imdecode( rawData /*, flags */ );
if ( decodedImage.data == NULL )   
{
    // Error reading raw image data
} 
```

就是这样！

希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T15:21:34.283

我已经使用[libjpeg API 文档](http://www.opensource.apple.com/source/tcl/tcl-20/tcl_ext/tkimg/tkimg/libjpeg/libjpeg.doc)`libjpeg`中“解压缩详细信息”下描述的标准过程解压缩了 JPEG 图像。

解压缩数据后，您可以使用它来构建`cv::Mat`. 请注意，解压后的图像是 RGB 格式，而 openCV 使用 BGR 格式，因此需要`cvtColor()`使用格式进行操作`CV_RGB2BGR`。

# android - Android：更改进度对话框文本

> ID：14727272
> 
> 赞同：7
> 
> 时间：2013-02-06T10:54:16.973
> 
> 标签：android, dialog, textview, progressdialog

是否可以更改 progressDialog 文本？

我的代码：

```
progressDialog = ProgressDialog.show(BackupActivity.this, "In progress", "test1");
                            new Thread() {
                                public void run() {
                                    try{
                                        sleep(10000);
                                            } catch (Exception e) {
                                                Log.e("tag", e.getMessage());
                                            } progressDialog.dismiss();
                                }
                            }.start();
                        }
                    });
                    selectExportsDialog = builder.create();
                }
                selectExportsDialog.show();
                break;          } 
```

我想在示例 10 秒后将 test1 更改为 test2。可能的？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T10:58:46.253

这工作正常：

```
runOnUiThread(changeText); 
```

使用该代码：

```
private Runnable changeText = new Runnable() {
    @Override
    public void run() {
        m_ProgressDialog.setMessage(myText);
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:05:35.100

**你可以试试这个：**

```
private class ProgressRunner extends AsyncTask<URL, Integer, Long>
    {
        protected void onPreExecute()
        {
            try    
            {
                dialog = new ProgressDialog(context);
                dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                dialog.setTitle("TITLE");
                dialog.setMessage("MY TEXT 1");
                dialog.setCancelable(false);
                dialog.setProgress(0);              
                dialog.setIndeterminate(false);
                dialog.show();              
            } 
            catch (Exception e)
            {               
                e.printStackTrace();
                dialog.dismiss();
            }
        }

        @Override
        protected void onCancelled() 
        {
            super.onCancelled();
            dialog.dismiss();           
        }

        @Override
        protected Long doInBackground(URL... params) 
        {   
            // process the code here
            dialog.setMessage("MY TEXT 2");
            return null;
        }

        protected void onProgressUpdate(Integer... progress)
        {           
            dialog.setProgress(progress[0]);
        }       

        protected void onPostExecute(Long result)
        {
            try 
            {                               
                dialog.dismiss();           

            } 
            catch (Exception e) 
            {               
                e.printStackTrace();
                finish();
            }       
        }   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T07:14:08.090

使用**setTitle**和**setMessage**方法

[**源码教程**](https://www.freakyjolly.com/show-progress-bar-with-text-and-title-in-android/)

```
// Method to show Progress bar
private void showProgressDialogWithTitle(String title,String substring) {
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    //Without this user can hide loader by tapping outside screen
    progressDialog.setCancelable(false);
    //Setting Title
    progressDialog.setTitle(title);
    progressDialog.setMessage(substring);
    progressDialog.show();

}

// Method to hide/ dismiss Progress bar
private void hideProgressDialogWithTitle() {
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.dismiss();
} 
```

# ajax - Ajax 注册 FOSUserBundle

> ID：14727278
> 
> 赞同：1
> 
> 时间：2013-02-06T10:54:38.767
> 
> 标签：ajax, symfony, registration, fosuserbundle

我正在尝试使用 FOSUserBundle 通过 AJAX 注册用户。

问题是表单中的名称值`fos_user_registration_form_[username]`不被 javascript 接受为数组。

```
<input type="text" id="fos_user_registration_form_username" name="fos_user_registration_form[username]" required="required" /> 
```

我该如何解决？

我可以将 FOSUserBUndle 中的 name 参数更改为`fos_user_registration_form_username`吗？

如何`fos_user_registration_form_[username]`在 Javascript 中创建具有值的数组？

```
$("#registerButton").click( function(){

             data = {
                 fos_user_registration_form_[username]:$("#name").val(), // HERE IS WHERE IT CRASHES, IN THE [username] field.
                 fos_user_registration_form_[email]:$("#email").val(),
                 fos_user_registration_form_[plainPassword]:$("#password").val(),
             };

             $.ajax({
                    type: "POST",
                    url: serviceURL,
                    asyn:false,
                    data: data,
                    dataType: "json",
                    success: function(res) {

                        alert("success"); // JUST FOR TEST

                    }
              }); 
```

我正在测试一个基本示例..

这有效（触发警报）

```
<script type="text/javascript">
        data = {
            fos_user_registration_form_username:"blabla"
        };
        alert(true);
</script> 
```

这不起作用：（不要触发警报）

```
<script type="text/javascript">
        data = {
            fos_user_registration_form_[username]:"blabla"
        };
        alert(true);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:30:56.150

要从输入字段中获取数据，您需要将`name_of_the_form_`+ 与`name_of_the_field`. 例如：

`fos_user_registration_form_`+ `username` =>`fos_user_registration_form_username`

* * *

```
data = {
fos_user_registration_form[username]:$("#fos_user_registration_form_username").val(), 
fos_user_registration_form[email]:$("#fos_user_registration_form_email").val(),
fos_user_registration_form[plainPassword]:$("#fos_user_registration_form_plainPassword").val(),
}; 
```

# iphone - 在 UIWebview 中加载 gif 图像 - iPhone

> ID：14727281
> 
> 赞同：1
> 
> 时间：2013-02-06T10:54:41.613
> 
> 标签：iphone, ios, uiwebview

当我在 iPhone 4.3 模拟器的 UIWebview 中加载 gif 图像时，会出现类似的错误

```
ImageIO: <ERROR> _CGImagePluginInitGIFmalformed GIF frame#0 (640 x 960) 
```

并且 gif 图像没有显示。谁能帮我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:03:57.583

现在在**iPhone**中，Apple 不支持`.gif`图像。
您可以使用其他类型的图像，例如 png、jpg..

如果你有一系列想要动画的图像，你可以使用 UIImageView 轻松完成：

```
UIImage *image1 = [UIImage imageNamed:@"image1.png"];
UIImage *image2 = [UIImage imageNamed:@"image2.png"];
UIImage *image3 = [UIImage imageNamed:@"image3.png"];

self.imageView.animationImages = [[NSArray alloc] initWithObjects:image1,image2,image3, nil];
self.imageView.animationRepeatCount = 7;
[self.imageView startAnimating]; 
```

# php - 从一个循环中获取帖子 ID，并从另一个循环中排除该帖子

> ID：14727284
> 
> 赞同：1
> 
> 时间：2013-02-06T10:54:52.643
> 
> 标签：php, wordpress, custom-post-type

我试图从第二个循环中排除该帖子，该帖子已在第一个循环中显示。

我创建了一个页面模板来显示最新的名为“灵感”的自定义帖子。

我创建了一个小部件来显示来自同一帖子类型的其他帖子，并在我创建的页面模板上使用了该小部件。

这是页面模板的代码：

```
<?php
/**
 * Template Name: Inspiratie
 *
 * A custom page template without sidebar.
 *
 * The "Template Name:" bit above allows this to be selectable
 * from a dropdown menu on the edit page screen.
 */
get_header(); ?>
<div id="container" class="seprator">
  <div id="content" class="inspiratie-area" role="main">
    <?php $inspiratiepage_query = new WP_Query('showposts=1&post_type=inspirations');  ?>
    <?php while ($inspiratiepage_query->have_posts()) : $inspiratiepage_query->the_post(); ?>
    <div class="inspiratie-box" id="inspiratie-<?php the_ID(); ?>">
      <h2 class="entry-title orange">
        <?php the_title(); ?>
      </h2>
      <?php the_content() ?>
      <div class="clear"></div>
    </div>
    <?php endwhile; // end of the loop. ?>
  </div>
</div>
<?php get_footer(); ?> 
```

下面是我创建的小部件的代码：

```
class Meer_Inspiratie extends WP_Widget {
    function Meer_Inspiratie() {
        $widget_ops = array('classname' => 'Meer_Inspiratie', 'description' => 'Display Inspiratie Posts' );
        $this->WP_Widget('Meer_Inspiratie', 'Inspiratie Post Widget', $widget_ops);
    }

    function widget($args, $instance) {
        extract($args, EXTR_SKIP);

        echo $before_widget;
        $title = $instance['title'];
        $items = $instance['items'];

        if(!empty($title))
        {
            echo $before_title;
                echo $title;
            echo $after_title;
        }

        if(!empty($items))
        { ?>
            <?php 

            $inspiratie_query = new WP_Query(   array(
                                    'post_type' => 'inspirations',
                                    'posts_per_page' =>  $items,
                                  'post__not_in'   => array(1),
                                    )
                                );  ?>

            <?php while ($inspiratie_query->have_posts()) : $inspiratie_query->the_post(); ?>
                <div class="inspiratie_query">
                    <p class="inspiratie_txt"><?php the_excerpt() ?></p>
                    <div class="inspiratie_img">
                        <?php if ( has_post_thumbnail() ) { the_post_thumbnail('inspiratie-product-thumb');}?>
                    </div>
                    <div class="inspiratie_quote">
                        <?php
                            echo '<blockquote class="inspiratie-quote">';
                            echo get_post_meta( get_the_ID(), 'my_specs_box_quote', true );
                            echo '</blockquote>';
                        ?>
                    </div>
                    <div class="clear"></div>
                    <a class="more-post" href="<?php the_permalink()?>">Lees meer</a>
                </div>

            <?php endwhile; // end of the loop. ?>

        <?php }

        echo $after_widget;
    }

    function update($new_instance, $old_instance) {
        $instance = $old_instance;
        $instance['items'] = strip_tags($new_instance['items']);
        $instance['title'] = $new_instance['title'];

        return $instance;
    }

    function form($instance) {
        $instance = wp_parse_args( (array) $instance, array( 'items' => '', 'title' => '') );
        $items = strip_tags($instance['items']);
        $title = $instance['title'];

?>      
            <p><label for="<?php echo $this->get_field_id('title'); ?>">Title: <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo esc_attr($title); ?>" /></label></p>

            <p><label for="<?php echo $this->get_field_id('items'); ?>">No. of Items: <input class="widefat" id="<?php echo $this->get_field_id('items'); ?>" name="<?php echo $this->get_field_name('items'); ?>" type="text" value="<?php echo esc_attr($items); ?>" /></label></p>

<?php
    }
}

register_widget('Meer_Inspiratie');

/**
*   End Inspiratie Post Widget
**/ 
```

我正在尝试从小部件中排除我当前在我的内容区域中的帖子..

预先感谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:13:58.193

dnt 知道您的侧边栏小部件从模板页面中调用的位置，但它在您拉出 1 个帖子的帖子的第一个循环下方调用 dden 尝试类似这样的操作

```
<?php 
$not_id=get_the_ID();
            $inspiratie_query = new WP_Query(   array(
                                    'post_type' => 'inspirations',
                                    'posts_per_page' =>  $items,
                                  'post__not_in'   => array($not_id),
                                    )
                                );  ?> 
```

没有检查代码。希望这对你有用

# java - 在java中使用正则表达式搜索字符串

> ID：14727295
> 
> 赞同：0
> 
> 时间：2013-02-06T10:55:15.947
> 
> 标签：java, regex, string, search, substring

我想知道如何检索字符串数组中存在的更多相似模式，而不管字符串长度和存在多少这样的相似模式..

例如：

> 哈利·詹姆斯·波特也被称为波特先生。波特在憔悴中非常有名。哈利·詹姆斯·波特也称波特先生。

我需要找到哈利詹姆波特和波特先生之间的内容：

输出应该是

1.  也被称为
2.  也被称为

谁能帮我吗？

这是我的代码：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;
public class RegexTestHarness {
    public static void main(String[] args){

        String regex = "Harry James Potter (.*?) Mr.Potter";

        String strToSearch = "Harry James Potter also known as Mr.Potter. Harry       James Potter is famous as  Mr. Potter";

        Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);

        Matcher matcher = pattern.matcher(strToSearch);

        while (matcher.find()) {

            System.out.println("Text is at "+matcher.group()+"::"+matcher.start()+"::     "+matcher.end());
            System.out.println(matcher.groupCount());

            System.out.println(matcher.group(1));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:02:50.957

此正则表达式将拾取“Harry James Potter”和“Mr.Potter”之间包含的任何内容：

```
Harry James Potter (.*?) Mr\.Potter 
```

[在这里](http://fiddle.re/ywxb)测试

根据您对 Regex 的实施，您可能需要检索结果组 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:12:56.420

确保在编写正则表达式字符串时避开 Mr.Potter 中的句点。此外，您的 strToSearch 中有随机空格，这会使您的正则表达式找不到您想要的。此代码生成您提供的示例。

```
try {
        String regex = "Harry James Potter (.*?) Mr\\.Potter";
        String strToSearch = "Harry James Potter also known as Mr.Potter. Potter is very famous in hagwards. Harry James Potter also called Mr.Potter.";
        Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);
        Matcher matcher = pattern.matcher(strToSearch);
        int start = 0;
        int count = 1;
        while (matcher.find(start)) {
            System.out.println(count + ". " + matcher.group(1));
            start = matcher.end();
            count++;
        }

    } catch(Exception ex) {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-25T15:50:31.347

```
 String s = "Harry James Potter also known as Mr.Potter . Potter is very famous in hagwards. Harry James Potter also called Mr.Potter.";
    Pattern pattern = Pattern.compile("(?<=Harry James Potter )(.*?)(?= Mr.Potter)");
    Matcher matcher = pattern.matcher(s);
    while (matcher.find()) {            
        System.out.println(matcher.group(1));
    } 
```

输出 ：

```
also known as
also called 
```

# java - 在 java 中创建一个独立的 gui 控制台，扩展基于提示的应用程序

> ID：14727297
> 
> 赞同：2
> 
> 时间：2013-02-06T10:55:18.110
> 
> 标签：java, swing, user-interface, stream, console

我有几个小应用程序，它们使用标准控制台来检索用户输入和显示消息 troughtout System.in 和 System.out。

现在我想实现一些从这些应用程序调用的基于 Swing 的类，它显示一个带有 2 个文本区域的框架，一个用于输入（与 System.in 相关联），另一个（不可编辑）显示消息（因此相关联到 System.out）。实际上我已经实现了所有，（实际上创建一个简单的基于摆动的 gui 并从事件调度程序线程启动它并不复杂，将所有内容导出为 jar 并将其作为库包含在原始项目中）。到目前为止，我遇到的唯一问题是将标准 System.in 和 System.out 交换为与 2 相关联的一些自定义问题`JTextArea`。实际上在线检查了一些解决方案，我最终得到了这几行代码：

我使用 2 PipedInputStream 和 PrintWriter：

```
 private final PipedInputStream inPipe = new PipedInputStream(); 
    private final PipedInputStream outPipe = new PipedInputStream(); 
    private PrintWriter inWriter; 
```

然后我交换流

```
 System.setIn(inPipe); 
    System.setOut(new PrintStream(new PipedOutputStream(outPipe), true)); 
    inWriter = new PrintWriter(new PipedOutputStream(inPipe), true); 
```

为了从outPipe 中检索数据，我使用`SwingWorker`其`doInBackgroud`方法troughtout a从outPipe`Scanner`中读取行并发布它们，以便将这些行字符串附加到不可编辑的JTextArea 中。同时`keyListener`检查`VK_ENTER`点击以从用作提示的 JTextField 中获取文本，一旦发生这种情况，文本将使用 System.out 本身显示，并且它有效地出现在先前的 JTextArea 中，因此上述 SwingWorker 有效，并且然后我在 inWriter（`PrintStream`与 System.in 相关的管道关联的对象）中写入了同一行文本，因此该行应该可以从原始应用程序中存在的 Reader 对象中读取。

不幸的是，这是代码中唯一不起作用的部分。事实上，一旦我启动新的 gui 控制台，然后更改流，原始应用程序将只显示它在 System.out 上打印的文本，但是当它想要读取用户编写的文本时，例如 troughtout 一个 BufferedReader 或一个Scanner 对象，没有任何反应，好像 in 流是空的。

我认为这是由于 SwingWorker doInBackground 方法中的 Scanner 造成的，因为当它读取 outPipe 上的下一行时，它也会清理流本身。有什么想法可以摆脱这个问题吗？我知道我可以编写新的方法来处理输入和输出，但我想保持这种非侵入性的方法，所以在不编辑原始代码的情况下，在原始应用程序主方法中创建 gui Console 对象的一部分。提前致谢。

**更新 1**

这是Console类，都在这里完成

```
public class Console extends JFrame implements KeyListener 
{

private JTextField prompt;
private JTextArea log;

private final PipedInputStream inPipe = new PipedInputStream(); 
private final PipedInputStream outPipe = new PipedInputStream(); 

private PrintWriter inWriter;

public Console(String title)
{
    super(title);

    System.setIn(inPipe); 

    try 
    {
        System.setOut(new PrintStream(new PipedOutputStream(outPipe), true)); 
        inWriter = new PrintWriter(new PipedOutputStream(inPipe), true); 
    }
    catch(IOException e) 
    {
        System.out.println("Error: " + e);
        return;
    }

    JPanel p = new JPanel();
    p.setLayout(null);
    log = new JTextArea();
    log.setEditable(false);
    log.setBounds(10, 10, 345, 250);
    p.add(log);
    prompt = new JTextField();
    prompt.setBounds(10, 270, 356, 80);
    prompt.addKeyListener(this);
    p.add(prompt);

    getContentPane().add(p);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
    setSize(392, 400);
    setLocationRelativeTo(null);

    (new SwingWorker<Void, String>() 
    { 
        protected Void doInBackground() throws Exception 
        { 
            Scanner s = new Scanner(outPipe);
            while (s.hasNextLine()) 
            {
                String line = s.nextLine();
                publish(line);
            }
            return null; 
        } 
        @Override 
        protected void process(java.util.List<String> chunks)
        { 
            for (String line : chunks) 
            {
                if (line.length() < 1)
                    continue;
                log.append(line.trim() + "\n"); 
            }
        } 
    }).execute(); 

}
    public void execute() 
{
    String text = prompt.getText();
    prompt.setText("");
    System.out.println(text); 
    inWriter.print(text.trim().replaceAll("\r\n", ""));
}

@Override
public void keyPressed(KeyEvent e)
{
    if (e.getKeyCode() == KeyEvent.VK_ENTER)
        execute();
}

@Override
public void keyReleased(KeyEvent e)
{
    if (e.getKeyCode() == KeyEvent.VK_ENTER)
        execute();

}

@Override
public void keyTyped(KeyEvent e)
{
    if (e.getKeyCode() == KeyEvent.VK_ENTER)
        execute();

}

// this is the method called from the original application
public static void setConsole(final String title) 
{
    EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            new Console(title);
            //System.out.println("somewhat");
        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:48:52.747

我自己找到了解决方案，实际上第一篇文章中发布的所有代码几乎都是正确的，问题在于从原始程序中读取 System.in，因为它是用一个`Scanner`对象完成的（但我用一个BufferedReader），它似乎与字符串终止有关，因为如果我使用简单的`System.in.read()`调用读取，我得到了正确的数据，当然是逐字符的。由于这两种`Scanner`方法和`read`一种都是 I/O 阻塞，我认为这与字符串的终止有关。因为当我在 InputStream 上写它时，我从任何 LF 和 CF 字符中清除了字符串，正如您在上面的代码中看到的那样，所以当`println`被调用时，只应该附加一个**\r\n 。**但是按字符读取结果字符我看到**\r\n\r\n**最后，所以我想它应该与字符串的结尾有关，即使我想不出正确的处理方法。我会通过更新的方式通知您，但是如果您有建议和/或反馈，他们显然会受到欢迎。

# game-physics - 球从曲面反弹

> ID：14727303
> 
> 赞同：1
> 
> 时间：2013-02-06T10:55:32.587
> 
> 标签：game-physics

我正在做一个 2D 球对墙碰撞/弹跳动画程序。我设法进行球对球碰撞，以及球对直线壁碰撞（两者都是弹性碰撞）。

我的问题是，我如何处理从曲面反弹的球的碰撞？例如，一个球在被困在一个圆圈中时弹跳（圆圈是墙）。

干杯

ps 我用的是c编程语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:12:40.923

基本原则始终是：

*   查明是否发生碰撞
*   找出碰撞的切线
*   将碰撞视为与线的碰撞

在圆-圆碰撞的情况下：

*   设为`r1`一个圆的半径（在 3d 中，球）
*   设为`r2`另一个圆的半径
*   让`d`他们的中心的距离
*   如果`d>r1+r2`，圆完全在彼此之外
*   如果`r1>r2+d`，则第二个圆完全在第一个圆内
*   如果`r2>r1+d`，第一个圆圈完全在最后一个圆圈内
*   否则，圆圈重叠：
    *   切线（在 3d 中，切平面）垂直于连接两个中心的线
    *   如果第一个圆不动，让切平面与第一个圆相切（以获得最佳效果）
    *   否则，切平面位置的最佳选择将取决于两个圆的质量（选择保持质心的位置）
    *   2d 中的圆永远不会从碰撞中获得角动量，除非通过摩擦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:10:21.597

恕我直言，当球被困在圆形墙内时，球的反射将像普通墙一样受到控制，因为墙和球之间的接触点可以忽略不计。唯一的变化是反射平面将与球和墙壁之间的接触点相切。因此，切线的角度在不同的碰撞点将不同，这将决定球的速度角。

我们可以通过将曲面视为一个半径等于曲面曲率的巨大球来处理凸曲面。所以，我们只是在计算 2 个球之间的碰撞。当然，在这种情况下，我们必须考虑表面的质量是无限的，并从弹性碰撞方程中推导出方程。

# dll - VC C++：构建的发行版中缺少 lib 文件

> ID：14727310
> 
> 赞同：0
> 
> 时间：2013-02-06T10:56:01.567
> 
> 标签：dll, visual-studio-2012

我在这里对 VS2012 有一个奇怪的行为。

我有一个带有导出定义文件的 C++ dll 项目。在 Debug built 一切都很好，生成了一个 dll 和一个 lib 文件。在 Release 中，只生成一个 dll 文件。

最好的汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:10:43.710

确保.def 文件在项目的Propert Pages 中的**配置属性|中指定。链接器 | 输入 | Debug 和 Release 配置中的模块定义文件**。

# oracle - 如何在 vb6 中将“全选”添加到组合中？

> ID：14727311
> 
> 赞同：0
> 
> 时间：2013-02-06T10:56:02.670
> 
> 标签：oracle, vb6

我写了这个函数来选择“全选”选项中的所有值

```
Private Function Not_Null()
   If CmbGrade.Text = "SELECT ALL" Then
      sql = "SELECT  A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.RUTNO FROM STUDENT_RECORD_DATABASE A,DIVISION B,HNM C WHERE A.DIVID=B.DIVID AND A.HID=C.HID AND GRADE IS NOT NULL"            
      SET rs = cn.Execute(sql)
   End If
End Function 
```

在命令单击调用此函数后

```
Private Sub CmdReport_Click()
   Dim STRp As String
   STRp = Not_Null()
   sql = "SELECT A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.RUTNO FROM STUDENT_RECORD_DATABASE A,DIVISION B,HNM C WHERE A.DIVID=B.DIVID AND A.HID=C.HID"
   Set rs = cn.Execute(sql)
   Set DataReport2.DataSource = rs
   DataReport2.Show
End Sub 
```

当我选择“全选”选项时，它不显示任何记录请帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:38:58.560

你正在执行并不重要`STRp = Not_Null()`，因为 (a)`Not_Null`不返回一个值，并且 (b) 即使你正在执行 a `SET rs`in `Not_Null`，那么即使假设你已经`rs`在你的模块或表单中的某个地方声明了，你'重新覆盖它的值`CmdReport_Click`。

试试这个：

```
Private Sub CmdReport_Click()
   sql = "SELECT A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.RUTNO FROM STUDENT_RECORD_DATABASE A,DIVISION B,HNM C WHERE A.DIVID=B.DIVID AND A.HID=C.HID AND GRADE ='" & CmbGrade.Text & "'"
   If CmbGrade.Text = "SELECT ALL" Then
      sql = "SELECT  A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.RUTNO FROM STUDENT_RECORD_DATABASE A,DIVISION B,HNM C WHERE A.DIVID=B.DIVID AND A.HID=C.HID AND GRADE IS NOT NULL"            
   End If
   Set rs = cn.Execute(sql)
   Set DataReport2.DataSource = rs
   DataReport2.Show
End Sub 
```

此外，很明显，您甚至对您的编程语言 (VB) 都缺乏最基本的了解。我强烈建议您先阅读一本关于该主题的介绍性书籍，或者在进一步学习之前搜索在线介绍性教程。

# c++ - C++ 如何使用 std::bind / std::function 引用模板函数

> ID：14727313
> 
> 赞同：18
> 
> 时间：2013-02-06T10:56:07.500
> 
> 标签：c++, c++11, callback, function-pointers, std-function

如果您有模板类或模板函数（或两者的组合），您如何绑定该函数（保留模板类型参数）？

在下面的一篇文章中，我得到了一些关于基本语法的帮助，以绑定到具有显式模板类型参数的函数，但在此过程中失去了提供模板类型参数的能力。

是否有可能让它工作，以便仍然可以为将来的调用提供模板类型参数？

清理了这段代码很多，但它显然不会编译，因为我找不到正确的语法，（有没有办法做到这一点）？

删除了“矢量”要求以简化这一点：

谢谢您的帮助！

```
#include <functional>
#include <vector>
#include <string>

/***************************************/
template <typename CommandTemplateType>
class Storage
{
  public:
   // No idea how to define this vector to allow Template Parameters
   // static std::vector<std::function<void<ParameterTemplateType>
   //     (std::shared_ptr<ParameterTemplateType>)>> Functions;

   // I really don't need the collection, a single member would kick start my research:
   static std::function<void<ParameterTemplateType>(std::shared_ptr<ParameterTemplateType>)> Function;

  template <typename ParameterTemplateType>
  static void Execute(ParameterTemplateType parameter)
  {
     // Look up index, or loop through all.. 
     // I am trying to invoke the bound function with a template param:
     // Functions[index]<ParameterTemplateType>(parameter);
     // preferably, just:  
     Function<ParameterTempalteType>(parameter); 
  }
};

/***************************************/
template <typename TemplateType>
class MyClass
{

   template <typename ParameterTemplateType>
   void MyFunction(ParameterTemplateType myParameter)
   {
     // Do something; 
   }

   MyClass()
   {
      std::string parameter = L"Test String";

      // Do not know how to include the 
      // template<typename ParameterTemplateType> definition to bind call.
      // Storage::Functions.push_back(
      //     std::bind(&MyClass::MyFunction<ParameterTemplateType>,
//        this, std::placeholders::_1));

     // Or just something like:
     Storage::Function = std::bind(&MyClass::MyFunction<ParameterTemplateType>,
                             this, std::placeholders::_1));

      /***************************************/
      // Call the bound function with an explicit parameter somehow:
      std::string parameter = L"Test String";          
      Storage::Execute<std::string>(parameter);

   }
}; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-16T20:17:34.003

关键问题是在 C++11 中你不能这样做：

```
// Doesn't compile
template <typename TemplateType>
static std::function<void(std::shared_ptr<TemplateType>)> Function; 
```

类和函数可以模板化，但成员属性不能。

“魔法”是：

```
/*******************************************************************/
// Define a Function Pointer in a Container
class Storage
{
   template <typename TemplateType>
   struct FunctionContainer {
       static std::function<void(std::shared_ptr<TemplateType>)> Function;
   };
};
/*******************************************************************/
// Initialize FunctionContainer's Static Function Pointer if using static pointer.
template <typename TemplateType>
std::function<void(std::shared_ptr<TemplateType>)> Storage
    ::FunctionContainer<TemplateType>::Function; 
```

然后，您可以将模板化函数绑定到此函数，例如：

```
// Bind Function Pointer in Container to a Local Function
class MyClass
{
   template <typename TemplateType>
   void MyFunction(std::shared_ptr<TemplateType> parameter)
   {
     // Do something.
     // You can make this templated or non-templated.
   }
   MyClass()
   {
     // If you really want, you can templatize std::string in the following:
     Storage::FunctionContainer<std::string>::Function 
       = std::bind(&MyFunction<std::string>, this, std::placeholders::_1);
   }
} 
```

您可以调用所有这些并提供一个模板化类型参数，如下所示：

```
//Invocation
std::shared_ptr<std::string> parameter;
parameter->get() = "Hello World".
Storage::FunctionContainer<std::string>::Function(parameter); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T12:28:44.397

模板参数`std::function`应该是模板类型替换完成*后函数的签名。*在您的情况下，既`TemplateType`不会`FunctionTemplateType`影响成员函数的签名，也不会影响`MyFunction`- 它总是会返回 a`std::string`并采用单个`std::string`参数。因此，`std::function`您要存储的`std::vector`应该是：

```
static std::vector<std::function<std::string(std::string)>> Functions; 
```

回想一下，成员函数有一个隐式的第一个参数`this`。您需要将 的第一个参数绑定`MyClass<...>::MyFunc<...>`到您希望调用它的对象。据推测，由于您在`MyClass`的构造函数中绑定函数，因此您希望对象成为该`MyClass`实例。这意味着你`push_back`应该看起来像这样：

```
Storage::Functions.push_back(
  std::bind(&MyClass<TemplateType>::MyFunction<int>, this,
    std::placeholders::_1)
); 
```

现在，被推入的函数`Functions`绑定到您的`MyClass`对象并接受一个 type 的参数`std::string`。您可以像这样调用这些函数之一：

```
Storage::Functions[0]("something"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T18:21:34.490

如果我理解你的话...... :)

你想做的事情是不可能的，因为对于 template<class T> void foo(T) 函数 foo<int>() 和 foo<double> 是不同的类型，你不能直接创建指向这两个函数的向量，因为载体是同质容器。

为了克服这个问题，我们可以使用 boost::variant<> 来存储指向不同类型函数的指针或存储函数的参数。

```
template<class T> void foo(T);
typedef boost::variant<void (*)(int), void (*)(double)> func_ptr_variant;
std::vector<func_ptr_variant> v;
v.push_back(foo<int>);
v.push_back(foo<double>);

typedef boost::variant<int, double> argument;
std::vector<void (*)(argument)) v;
v.push_back(foo);
v.push_back(bar);
// foo and bar are defined as void foo(argument a) and void bar(argument a) 
```

不幸的是，在任何情况下，您都需要在将函数模板插入容器之前对其进行实例化，因为 C++ 无法即时生成代码。我认为您可能知道该函数可能使用的所有可能类型的参数，因此这可能不是问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-06T11:18:31.097

MyClass 的 c-tor 对此一无所知`FunctionTemplateType`，这就是为什么它只能像这样 push_back*显式专门*化（抱歉，这是我的术语……我不知道正确的术语）

```
#include <functional>
#include <vector>
#include <string>

struct Storage
{
  // Have no idea what this signature should really be:
  static std::vector<std::function<void ()>> Functions;

};
std::vector<std::function<void ()>> Storage::Functions;

template <typename TemplateType>
class MyClass
{
   template <typename FunctionTemplateType>
   std::string MyFunction(std::string myParameter)
   {
     return "Hellö: " + myParameter;

   }
public:
   MyClass()
   {
      Storage::Functions.push_back(
          std::bind( & MyClass<TemplateType>::MyFunction<std::string>, this, "borisbn" )
//                                                       ^^^^^^^^^^^
      );
   }
};

int main() {
    MyClass<int> obj;
} 
```

[工作空间链接](http://liveworkspace.org/code/3HJpzJ%244)

# file - 用 Jmeter 比较两个 CSV 文件

> ID：14727314
> 
> 赞同：0
> 
> 时间：2013-02-06T10:56:08.463
> 
> 标签：file, csv, compare, jmeter

如何比较两个 CSV 文件并使用 jmeter 检索所有差异？

例如，如果我有 2 个这样的 csv 文件：

*   第一的：

    ```
    一个
    b
    C

    ```

*   第二：

    ```
    一个
     F
     b
     d
     C

    ```

我想捕捉这两个文件之间的差异。
我想在这里：`f`和`d`。

我怎么能用 Jmeter 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:44:15.153

JMeter 不是进行 diff 的正确工具。您应该在测试之前执行此操作并为此创建一个 CSV。

# django - django haystack 2.0 包含查询

> ID：14727318
> 
> 赞同：1
> 
> 时间：2013-02-06T10:56:18.133
> 
> 标签：django, solr, django-haystack

即使文档说 `The contains filter became the new default filter as of Haystack v2.X (the default in Haystack v1.X was exact). This changed because exact caused problems and was unintuitive for new people trying to use Haystack. contains is a much more natural usage.` [http://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html](http://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html)

我发现我的 Solr 返回`exact`匹配。

我尝试按照 django haystack 的建议对 SearchForm 进行子类化并覆盖`search`函数以使用 filter(content__contains=...)[如何在单词中找到子字符串？](https://stackoverflow.com/questions/11987177/django-haystack-how-do-i-find-substrings-in-words)
但它不起作用。

我该如何进行`contains`搜索？
使用[Django-Haystack 中建议的 Ngram 和 Solr 包含搜索](https://stackoverflow.com/questions/6337811/django-haystack-with-solr-contains-search)是唯一的方法吗？

如果这很重要，我正在使用 solr 3.6。

# r - 顶点中的 R iGraph 热图

> ID：14727321
> 
> 赞同：4
> 
> 时间：2013-02-06T10:56:30.630
> 
> 标签：r, vector, heatmap, igraph, vertex

我对 R 很陌生并且坚持一个问题。是否可以在顶点上打印热图`iGraph`？我知道我可以做一个彩色的正方形或圆形。但是一个小的热图是可能的吗？这是绘制我当前图表的代码：

```
 # create graph
graph <- graph.data.frame(network[,1:2])
vertex_names <- get.vertex.attribute(graph,"name")

# define node attributes
V(graph)$label.font <- 1
V(graph)$label.font[which(element_types[vertex_names,"type"]=="PRIMARIES")] <- 2
V(graph)$label.font[which(element_types[vertex_names,"type"]=="REACTION")] <- 2

V(graph)$label <- element_types[vertex_names,"label"]
V(graph)$color <- element_types[vertex_names,"color"]
V(graph)$size <- as.integer(element_types[vertex_names,"size"]*20)
V(graph)$label.cex <- element_types[vertex_names,"weight"]

V(graph)$frame.color <- "gray"
V(graph)$frame.color[which(element_types[vertex_names,"type"]=="PRIMARIES")] <- "white"
V(graph)$frame.color[which(element_types[vertex_names,"type"]=="PATHWAY")] <- "white"
V(graph)$frame.color[which(element_types[vertex_names,"type"]=="PRODUCTS")] <- "white"
V(graph)$frame.width <- 10

V(graph)$shape <- "square"
V(graph)$shape[which(element_types[vertex_names,"type"]=="REACTION")] <- "circle"

V(graph)$label.color <- "black"
V(graph)$label.color[which(element_types[vertex_names,"type"]=="PRIMARIES")] <- "darkred"
V(graph)$label.color[which(element_types[vertex_names,"type"]=="PATHWAY")] <- "darkgreen"
V(graph)$label.color[which(element_types[vertex_names,"type"]=="REACTION")] <- "darkorange3"

E(graph)$color <- "red"
E(graph)$color[which(network[,3]=="out")] <- "blue"
E(graph)$color[which(network[,3]=="external")] <- "darkgreen"
E(graph)$arrow.size <- 0.5

layout <- layout.auto(graph)
plot.igraph(graph,layout=layout,main=pathways[pathway_id,"COMMON-NAME"]) 
```

此外，我在列表中有可以绘制成热图的矩阵。这些矩阵如下所示：

```
[[1]]
     TotalSNP HighSNP ModerateSNP PromotorSNP
[1,]        1       0           0           1
[2,]        3       0           2           1
[3,]        5       0           2           3
[4,]        1       0           0           1
[5,]        7       0           4           3
[6,]        3       0           3           0
[7,]        4       0           1           3
[8,]        3       0           2           1

[[2]]
     TotalSNP HighSNP ModerateSNP PromotorSNP
[1,]        3       0           1           2
[2,]        0       0           0           0

[[3]]
     TotalSNP HighSNP ModerateSNP PromotorSNP
[1,]        0       0           0           0
[2,]        0       0           0           0 
```

有谁知道是否可以将这些矩阵绘制为顶点上的热图？

样本数据：

```
 FinalList <- list(structure(c(1, 3, 5, 1, 7, 3, 4, 3, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 2, 2, 0, 4, 3, 1, 2, 1, 1, 3, 1, 3, 0, 3, 1), .Dim = c(8L, 
4L), .Dimnames = list(NULL, c("TotalSNP", "HighSNP", "ModerateSNP", 
"PromotorSNP"))), structure(c(3, 0, 0, 0, 1, 0, 2, 0), .Dim = c(2L, 
4L), .Dimnames = list(NULL, c("TotalSNP", "HighSNP", "ModerateSNP", 
"PromotorSNP"))), structure(c(0, 0, 0, 0, 0, 0, 0, 0), .Dim = c(2L, 
4L), .Dimnames = list(NULL, c("TotalSNP", "HighSNP", "ModerateSNP", 
"PromotorSNP")))) 
```

矩阵的大小可以变化，它总是 4 列，但行数可以从 0 行到 10 行不等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:49:11.790

因此，正如我在上面的评论中所说，使用新的顶点形状 API 相对容易，尽管您需要了解一些技巧。igraph中有一些示例形状，我猜这些对我有帮助。

所以你需要定义一个函数来绘制你的顶点。它必须具有三个参数，矩阵中的坐标，要绘制的顶点（`NULL`表示所有顶点）和一个可用于查询 igraph 图形参数的函数对象。如果您有兴趣，请查看代码中的详细信息。如果您想更改热图的外观，只需更改`image()`为您喜欢的任何内容。

```
myheat <- function(coords, v=NULL, params) {
  colbar <- heat.colors(50)
  colbreaks <- seq(0, 1, length=length(colbar)+1)
  vertex.size <- 1/200 * params("vertex", "size")
  if (length(vertex.size) != 1 && !is.null(v)) {
    vertex.size <- vertex.size[v]
  }
  heat <- params("vertex", "heat")
  if (is.list(heat) && !is.null(v)) {
    heat <- heat[v]
  } else if (!is.null(v)) {
    heat <- list(heat)
  }
  mapply(coords[,1], coords[,2], vertex.size*2, heat,
         FUN=function(x, y, size, int) {
           stopifnot(is.matrix(int))
           nc <- ncol(int); nr <- nrow(int)
           xc <- seq(x, x+size/nc*(nc-1), length=nc)-size/nc*(nc-1)/2
           yc <- seq(y, y+size/nr*(nr-1), length=nr)-size/nr*(nr-1)/2
           image(xc, yc, int, add=TRUE, col=colbar, breaks=colbreaks)
         })
}

# OK, we add the new shape now, it will be called "heat", 
# and will have an extra vertex parameter, also called "heat". 
# This parameter gives the heatmap intensities. The shape will 
# clip as a square, ie. the edges will be cut at the boundary 
# of the heatmap.

add.vertex.shape("heat", clip=vertex.shapes("square")$clip, plot=myheat,
                 parameters=list(vertex.heat=matrix(0,3,3)))

# Some example data and random heatmaps

g <- graph.formula(A:B -+ C:D +- E)
randheat <- function() matrix(runif(9), 3)
heats <- lapply(1:vcount(g), function(x) randheat())

# Plot them

plot(g, vertex.shape="heat", vertex.heat=heats, vertex.size=50)

# You can mix various vertex shapes

par(mar=c(0,0,0,0)+.1)
plot(g, vertex.shape=c("heat", "heat", "sphere", "heat", "heat"),
     vertex.heat=heats, vertex.size=50) 
```

![阴谋](../Images/b07ae7bfe0d933dae65f18db36d02b83.png)

# language-agnostic - 通过 DN 一次从 LDAP 检索多个对象

> ID：14727324
> 
> 赞同：0
> 
> 时间：2013-02-06T10:56:39.303
> 
> 标签：language-agnostic, ldap

我有一个 DN 列表，出于性能原因，我想在一次访问 LDAP 服务器的过程中检索列表中每个 DN 的属性。

似乎无法通过 DN 搜索，即使用 DN 作为过滤器搜索

[在搜索过滤器中使用 DN](https://stackoverflow.com/questions/7472994/using-dn-in-search-filter)

[http://www.openldap.org/lists/openldap-software/200503/msg00520.html](http://www.openldap.org/lists/openldap-software/200503/msg00520.html)

....还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:48:39.530

你当然可以。

```
ldapsearch -h <ldaphost>  -b "cn=joe,dc=yourdoamin,dc=com" -s base -D cn=admin,dc=yourdomain,dc=com -W "(objectclass=*)" "*" 
```

将检索 DN 的所有用户属性：cn=joe,dc=yourdoamin,dc=com。

但是，对于列表，您需要对每个列表重复搜索。我们经常在 bash 脚本中执行此操作。

您可以使用过滤器来识别您需要的 DN 吗？

-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:59:33.610

似乎只有在 Active Directory 中才有可能。我所要做的就是按`distinguishedName`属性过滤，但是在我的测试中没有性能提升。

> Active Directory 包括每个对象的 distinctName 属性；该值是对象的 DN。以下示例详细说明了前面的示例，以在每个对象上包含一个 distinctName 值。

[http://msdn.microsoft.com/en-us/library/cc223167.aspx](http://msdn.microsoft.com/en-us/library/cc223167.aspx)

# magento - 如何在订单网格上获取发票 increment_id？(Magento 1.7)

> ID：14727325
> 
> 赞同：1
> 
> 时间：2013-02-06T10:56:40.137
> 
> 标签：magento, magento-1.7

我正在尝试从 sales_flat_invoice 表中获取 increment_id 以显示在我的订单网格中。

我已经设法做到了，但它只会显示已开票的订单。

总结一下，我想要做的是创建一个包含发票的 increment_id 的列（如果订单已经开票 - 如果没有，它应该是空白的）。

**使用的代码如下：**

在 _prepareCollection() 中：

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()
    ->join(
        array('address' => $collection->getTable("sales/order_address")),
        'main_table.entity_id = address.parent_id AND address.address_type = "shipping"',
        array('postcode')
    );
    //$collection->join('invoice', 'main_table.entity_id = invoice.order_id', 'increment_id as invoice_id');

    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

在 _prepareColumns() 中：

```
 $this->addColumn('invoice_id', array(
        'header' => 'Faktureret',
        'index' => 'invoice_id',
        'width' => '70px',
        'type' => 'text',
    )); 
```

谢谢，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T05:54:05.797

如果要在销售订单网格中添加发票 ID，则可以在 prepareCollection() 函数中使用以下代码作为

```
$collection->getSelect()->joinLeft('sales_flat_invoice', 'main_table.entity_id = sales_flat_invoice.order_id', 'increment_id as invoice_id');

```

通过使用以下代码，您将能够从销售订单网格中的当前订单 ID 获取发票 ID。在此之后添加列字段为

```
$this->addColumn('invoice_id',
        大批（
            'header'=> $this->__('Invoice Id'),
            '对齐' =>'正确',
            '类型=' => '文本',
            'index' => 'invoice_id',
        )
        );

```

有关更多信息，请在 [http://www.webtechnologycodes.com上关注我](http://www.webtechnologycodes.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:14:48.010

您需要进行 LEFT JOIN。使用->joinLeft。-> 加入对 ->joinInner 的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T06:03:39.613

从订单详细信息中获取发票详细信息。您可以使用

$_orders = $this->getOrders(); $_invoices = $_order->getInvoiceCollection();

# c - C - 将变量参数列表写入文件

> ID：14727327
> 
> 赞同：1
> 
> 时间：2013-02-06T10:56:42.867
> 
> 标签：c, printf, variadic-functions

我`va_list, va_start, va_end`用来玩类似 printf 的功能。

```
void test(char* format, ...)
{
    va_list argp;
    va_start(argp, format);
    vprintf(format, argp);
    va_end(argp);
} 
```

现在我想知道如何将所有这些参数写入`fwrite()`->之类的文件`vfwrite()`。有没有办法不实现我自己的 fwrite 函数来编写可变数量的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:59:14.703

是的，你想要[`vfprintf()`](http://linux.die.net/man/3/vfprintf)。

就像`vprintf()`但它接受 a`FILE *`作为它的第一个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:59:00.910

也许像[vfprintf 之](http://www.cplusplus.com/reference/cstdio/vfprintf/)类的东西？

# wamp - wampserver 主页仅从 localhost 可见

> ID：14727331
> 
> 赞同：3
> 
> 时间：2013-02-06T10:56:50.553
> 
> 标签：wamp, wampserver, windows-server

最近我在一台Windows机器上使用**WAMP**服务器搭建了一个服务器环境。一切都很好，但我有一个小问题：**每个人都可以访问 wampserver 主页，因此他们可以看到托管在同一服务器上的其他网页、服务器文件系统等**。

网页的 URL 格式如下：`hostname/project1`，`hostname/project2...`主要问题是，任何人都可以通过转到主机名的方向看到所有托管的项目，因为这将导致 wampserver 主页，我更喜欢这个主页只能在 windows 主机的 localhost 中访问。有没有办法做到这一点？我猜我需要修改配置文件中的一些参数，但我不知道哪些...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:42:59.080

If you intend to block access to all sites hosted on this computer from outside access, you can do this in your main apache configuration file at `<installation drive>/wamp/bin/apache/Apache<version number>/conf/httpd.conf`. .htaccess is more for per-site configurations, though it will certainly work if you put it in the main www directory.

To disallow outside access to the www folder (open by default) find the part of the apache configuration file (path shown above) that looks like:

```
<Directory "<installation drive>/wamp/www">
    # There will be comments here and some options like FollowSymLinks and AllowOverride
    Order Allow,Deny
    Allow from all
</Directory> 
```

And change it to:

```
<Directory "<installation drive>/wamp/www">
    # There will be comments here and some options like FollowSymLinks and AllowOverride
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

If your goal is not to block outside access to all of your sites, it would help to know more about your set up. And if your goal is only to block the 'localhost' page and still allow access to, say, 'localhost/site1' then this question may be a duplicate of [this](https://stackoverflow.com/questions/14204135/how-do-i-secure-my-wamp-so-only-localhost-can-access-root-directory).

**Edit:** As you point out, there is not a good resolution for the question I linked. Assuming you have your public sites set up as virtual hosts in a sub folder of the webroot like:

```
|-wamp_root
  |-www
    |-vhosts
      |-public_site_1
      |-public_site_2 
```

Then you can go back into your httpd.conf and add this below your /wamp/www/ rule:

```
<Directory "<installation drive>/wamp/www/vhosts/">
    # There will be comments here and some options like FollowSymLinks and AllowOverride
    Order Allow,Deny
    Allow from all
</Directory> 
```

This will allow anything in the www folder to be accessed only locally, and anything in the vhosts sub folder to be accessible outside. Again, remember to restart Apache whenever you change this file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:18:58.110

应该可以使用 windows 防火墙阻止其他用户。您也可以使用像这样的 .htaccess 文件：

```
Order deny,allow
Deny from all
Allow from 127.0.0.1 
```

您必须确保在 apache 配置`AllowOverride`中设置为`All`，并且 .htaccess 也将应用于所有子目录，否则您的项目仍然可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-12T01:21:16.533

看来（在我自己有点头疼之后），这个问题的答案很简单。

在 Windows 任务栏中，左键单击 WAMP 图标，然后单击“脱机”。

它似乎没有让整个网络服务器“离线”，只是根主页？并且您在 httpd.conf 文件中配置为可从外部访问的任何内容仍然存在，它们仍然可以访问。

注意：默认的 VHOST 仍然可以访问，例如 PHPINFO 和 PHPMYADMIN！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-15T18:20:37.863

这并不难。

1.  用notepad++编辑索引文件
2.  找到 &projectContents 行
3.  从 &projectContents 更改为 &project---Contents

然后项目标题消失。

# rest - OData 版本 2 和 3 的差异

> ID：14727332
> 
> 赞同：7
> 
> 时间：2013-02-06T10:57:00.407
> 
> 标签：rest, odata

OData 协议文档 ( [http://www.odata.org/documentation](http://www.odata.org/documentation) ) 描述了两个版本 - 2 和 3。

两个版本的核心区别是什么？

现有客户端库是否支持这两个版本，或者版本 2 是否被视为“旧版”？

换种说法 - 版本 2 客户端与版本 3 兼容吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T14:24:50.517

两个版本之间有很多不同之处。例如，OData v3 添加了对操作、函数、集​​合值、派生类型的导航属性和流属性的支持。它还为 JSON 引入了一种全新的序列化格式（“application/json”在两个版本中意味着完全不同的东西）。

当 OData 客户端向服务器发出请求时，它可以（并且应该）通过 MaxDataServiceVersion HTTP 标头指定它可以理解的最大协议版本。只理解 v2 协议的客户端将无法理解 v3 有效负载。

我认为我不会将 v2 称为“旧版”或不受支持，但各个服务器可以选择是否支持只能理解 v2（或 v1）的请求。我认为那里的许多现有客户都支持 v2 和 v3。我知道 WCF 数据服务客户端（桌面、Windows Phone、Windows 商店和 Silverlight）都支持这两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:10:47.210

除了先前的答案之外，请注意，某些客户端工具可能仍仅支持 OData v2 协议，因此如果您需要 v3 特定功能，则应确保您的客户端代码不受诸如自动生成的代理类之类的限制能够处理数组类型。

以下是服务器公开 v3 功能但无法使用它们的示例，因为 Visual Studio WCF 数据服务客户端代理生成器仅支持 v2：

[http://bloggingabout.net/blogs/vagif/archive/2012/12/16/using-odata-protocol-v3-with-mongodata-odata-provider.aspx](http://bloggingabout.net/blogs/vagif/archive/2012/12/16/using-odata-protocol-v3-with-mongodata-odata-provider.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T14:27:29.203

[您可以在开放数据协议 (OData) 规范](http://download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/%5BMS-ODATA%5D.pdf)的 pdf 中找到两个版本之间所有差异的列表。具体来说，变更日志位于“ *1.7 版本控制和能力协商*”部分

# objective-c - 是否有类似于 NSLevelIndicator 的自定义控件，具有反向着色？

> ID：14727342
> 
> 赞同：2
> 
> 时间：2013-02-06T10:57:39.223
> 
> 标签：objective-c, macos, cocoa, nscontrol, nslevelindicator

我需要一个类似于`NSLevelIndicator`in的控件`NSContinuousCapacityLevelIndicatorStyle`，但具有反向着色。使用`NSLevelIndicator`，颜色是这样的：绿色到警告级别，黄色从警告到严重级别，红色从严重级别开始。这适用于音量控制。但我有一个对应于油箱加注的值：我想要绿色表示满罐，黄色表示警告，红色表示空。我还没有找到任何改变颜色的方法`NSLevelIndicator`。

那么，在我开始编写自己的自定义控件之前，是否有一个`NSControl`可用的地方已经可以满足我的需求（当然我在询问之前搜索过，但无济于事）？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:25:04.400

子类化`NSLevelIndicator`并编写自己的`- (void)drawRect:(NSRect)theRect`

```
#import <Cocoa/Cocoa.h>

@interface PBLevelIndicator : NSLevelIndicator {

    unsigned int mPercent;
}

@end  

#import "PBLevelIndicator.h"

@implementation PBLevelIndicator
- (void)drawRect:(NSRect)theRect
{
    NSRect fillingRect = theRect;
    fillingRect.size.width = theRect.size.width*mPercent/100;   
    NSColor *indicatorColor;

    if( mPercent >= 99 )
    {
        indicatorColor = [NSColor greenColor];
    }
    else if (mPercent >50) 
    {
        indicatorColor = [NSColor yellowColor];
    }
    else
    {
        indicatorColor = [NSColor redColor];
    }
    [indicatorColor set];
    NSRectFill(fillingRect);
}

-(void) setPercentage:(unsigned int) inPercent
{
    mPercent = inPercent;
    [self setNeedsDisplay:YES];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-02T06:44:02.000

`NSLevelIndicator`（至少现在）如果您将警告级别设置为高于临界级别，则会自动为您执行此操作！

# php - 使用 PHP 重定向时出错

> ID：14727344
> 
> 赞同：0
> 
> 时间：2013-02-06T10:57:42.007
> 
> 标签：php, redirect, header

我有一个自我提交的表单，它也使用重定向到同一页面 `header("Location: http://tapmichiana.org/immigration-reform.php");exit;`

运行脚本时出现此错误`Warning: Cannot modify header information - headers already sent by (output started at /home/tapm777/public_html/includes/header.php:5) in /home/tapm777/public_html/immigration-reform.php on line 31`

**header.php 第 5 行**是`<title><?php echo @$title; ?></title>`

尽管

**移民改革.php 第 31 行**是`header("Location: http://tapmichiana.org/immigration-reform.php");`

请问我在哪里弄错了？谢谢。

# iphone - ios - 如何动态添加视图

> ID：14727346
> 
> 赞同：2
> 
> 时间：2013-02-06T10:57:46.723
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我是 ios 开发新手

我创建了一个函数名称列表，在单击按钮后调用它应该动态加载视图这是我的代码

```
-(IBAction)list:(id)sender{

UIView *listView=[[UIView alloc]initWithFrame:CGRectMake(0,0,1024,786)];

[self.view addSubview:listView];
} 
```

但它不会创建任何视图，但它会调用此函数，任何人都可以帮助我

谢谢。阿伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:09:15.447

尝试

```
listView.backgroundColor = [UIColor redColor]; 
```

如果您没有看到任何内容`self.view`，请检查

```
for(UIView *aView in self.view.subviews){
     NSLog("%@\n",aView);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:05:22.183

您的代码没有任何问题，它可以正常工作。你只需检查两件事

1.  在您的视图中添加一些背景颜色

    [`listView setBackgroundColor: [UIColor redColor]];`

2.  `IBAction`您的按钮连接 正确

如果你`redColor`的`View`意思`listView`是增加你的观点。

**编辑**

如果您想添加`UILabel`并`UIButton`在您的视图中

```
[listView addSubview:yourLabel];
[listView addSubview:yourButton]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:05:23.333

在 .h 中创建 listView 的属性

```
-(IBAction)list:(id)sender{
   self. listView = [[UIView alloc] initWithFrame:CGRectMake(0,0,1024,786)];
   [self. listView setHidden:NO];
   [self. listView setBackgroundColor:[UIColor grayColor]];
   [self.view addSubview:self.listView];
} 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:53:20.297

[自己。listView setBackgroundColor:[UIColor greenColor]]; 您的视图显示为绿色..如果不是显示，请检查与 -(IBAction) 方法的连接...

# c# - HTML 链接不是一个有效的文件夹...但它仍然有效？

> ID：14727349
> 
> 赞同：0
> 
> 时间：2013-02-06T10:57:53.003
> 
> 标签：c#, asp.net, asp.net-web-api

我在理解一些 HTML 时遇到了一些麻烦，希望 SO 可以帮助我弄清楚发生了什么，这样我将来就可以自己做这件事。

标记很简单：

```
<p>
  GET <a href="~/api/function">/api/function</a>: returns list of info from database.
</p> 
```

现在，这完全有效，我试图了解发生了什么。我的理解是，这将进入根目录，找到一个名为 api 的文件夹，找到一个名为 function 的函数并运行它。

问题是没有名为 api 的文件夹 - 那么这里会发生什么？我可以找到实际被调用以从数据库中检索项目的 C# 函数，但我无法弄清楚调用它的代码是如何构造的。我有一个扩展 DbContext 以检索信息的类，但我看不到它是如何被调用的，并且当我插入断点时它不在调用堆栈上。

任何人都可以给我一些关于我如何阐明这一点的信息吗？

（为这个非常笼统的问题道歉，当我开始了解实际发生的情况时，我将提供更多细节！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:04:15.410

实际上不需要`api`文件夹。它可以是一个简单的路由配置，将某个 URI 方案映射到某些文件。它甚至不必是文件，它可以是类上的方法。

例如，在 ASP.NET Web API 中，您拥有`ApiController`带有方法的类。在您的情况下，该方法将被调用`Function`或`GetFunction`类似。
路由配置将包含类似的内容：

```
routes.MapHttpRoute("SomeRoute",
                    "api/{action}",                           
                    new { controller = "YourController", action = "Index" }); 
```

有关详细信息，请参阅[ASP.NET Web API 中](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)的路由简介。

我建议您也阅读[有关 ASP.NET WebAPI 的整个系列](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:07:51.213

`"~/api/function"`不必是文件系统中的实际文件夹。它可以是您的网络服务器配置中定义的虚拟路径，例如`web.xml`在`tomcat`.

# python - Pyramid 路由匹配和查询参数

> ID：14727351
> 
> 赞同：5
> 
> 时间：2013-02-06T10:57:53.753
> 
> 标签：python, pyramid

我有一个 Pyramid Web 服务，代码示例如下：

查看声明：

```
@view_config(route_name="services/Prices/GetByTicker/")
def GET(request):
    ticker = request.GET('ticker')
    startDate = request.GET('startDate')
    endDate = request.GET('endDate')
    period = request.GET('period') 
```

路由：

```
config.add_route('services/Prices/GetByTicker/', 'services/Prices/GetByTicker/{ticker}/{startDate}/{endDate}/{period}') 
```

现在我知道这一切都搞砸了，但我不知道 Pyramid 的约定是什么。目前这可以工作，因为请求成功地路由到视图，但随后我得到一个“字典对象不可调用”异常。

URL 看起来很糟糕：

@root/services/Prices/GetByTicker/ticker=APPL/startDate=19981212/endDate=20121231/period=d

理想情况下，我希望能够使用类似以下的 URL：

@root/services/Prices/GetByTicker/?ticker=APPL&startDate=19981212&endDate=20121231&period=d

那里有任何 Pyramid bods 愿意花五分钟来解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T11:52:09.587

从您的示例代码中，我认为您使用的是[URL Dispatch](http://pylons.readthedocs.org/projects/pyramid/en/latest/narr/urldispatch.html#urldispatch-chapter)

所以应该是这样的

```
config.add_route('services/Prices/GetByTicker/', 'services/Prices/GetByTicker/') 
```

然后像这样的 URL：
@root/services/Prices/GetByTicker/?ticker=APPL&startDate=19981212&endDate=20121231&period=d
将匹配它

--edit--
您不必为 route_name 使用类似“services/Prices/GetByTicker”的名称，您可以获取 GET 参数使用`request.params['key']`
视图声明：

```
@view_config(route_name="services_Prices_GetByTicker")
def services_Prices_GetByTicker(request):
    ticker = request.params['ticker']
    startDate = request.params['startDate']
    endDate = request.params['endDate']
    period = request.params['period'] 
```

路由：

```
config.add_route('services_Prices_GetByTicker', 'services/Prices/GetByTicker/') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:30:09.013

查询字符串变成`request.GET`字典。您正在使用括号来调用字典，而不是通过括号访问项目。对于一个网址，如

> @root/services/Prices/GetByTicker/?ticker=APPL&startDate=19981212&endDate=20121231&period=d

```
request.GET['ticker'] # -> 'APPL' or an exception if not available
request.GET.get('ticker') # -> 'APPL' or None if not available
request.GET.get('ticker', 'foo') # -> 'APPL' or 'foo' if not available
request.GET.getall('ticker') # -> ['APPL'] or [] if not available 
```

`ticker`如果您希望提供多次，最后一个选项很有用。

`request.params`是和其中后者的组合，`request.GET`其中`request.POST`后者是表示表单上传中请求正文的字典。

无论如何，答案是`request.GET('ticker')`语法上不是我提到的选项之一，停止这样做。:-)

# jquery-ui - IE7 似乎忽略了一些 css 规则并且未能在手风琴中给出一些内容高度

> ID：14727362
> 
> 赞同：0
> 
> 时间：2013-02-06T10:58:33.593
> 
> 标签：jquery-ui, internet-explorer-7

我正在开发一个带有谷歌地图元素和一个基于 jquery UI 手风琴/标签的侧边栏的网页。在大多数现代浏览器中一切都运行良好，但我在使用 IE7 时遇到了一些问题。网页托管在这里：http: [//jeffandkelly.net/map](http://jeffandkelly.net/map)

页面中发生了很多事情；通常我会尝试创建一个 jsfiddle，但我无法让该站点在 IE7 中运行。我已经使用了许多特定于 IE7 的 hack，现在情况看起来好多了。但是，我仍然有一些问题。

我的侧边栏包含一个带有 2 个元素的 jquery UI 手风琴。在第二个元素中是一个 jquery UI 选项卡控件，每个选项卡内部都有几个`<div>`元素。正是这些元素在 IE7（左图）和 Chrome（右图）中表现不正确。

[ie7 与 chrome 页面渲染 http://jeffandkelly.net/map/ie7-vs-chrome.jpg](http://jeffandkelly.net/map/ie7-vs-chrome.jpg)

首先，我有一个 CSS 规则，应该隐藏这些元素的标题（“安全药物处置丢弃位置”文本）：

```
<h3 class="map-popup-header>Safe Medicine Disposal Drop Off Location</h3> 
```

CSS：

```
.poi-holder .map-popup-header {
    display: none;
} 
```

但 IE7 并不适用该规则。其次，IE7 隐藏了应该存在的内容（F12 工具显示元素在 DOM 中，但高度为 0）。

我们将不胜感激任何帮助，以及有关尝试的一些后续步骤的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:54:06.447

事实证明，代码存在多个问题。首先，IE7 要求表格在`<tbody>`动态创建内容时包含元素。因此，如果没有注释行，以下代码将无法工作。

```
var infoTable = document.createElement('table');
var infoTbody = document.createElement('tbody'); //required for IE7!!
var infoTr = document.createElement('tr');
var infoTextTd = document.createElement('td');
var infoPhotoTd = document.createElement('td');
infoDiv.appendChild(infoTable);
infoTable.appendChild(infoTbody);
infoTbody.appendChild(infoTr);
infoTr.appendChild(infoTextTd);
infoTr.appendChild(infoPhotoTd); 
```

其次，IE7 不会将 CSS 规则应用到使用`element.setAttribute('class', className)`. 它需要使用`element.className = className`.

```
var header = document.createElement('h3');
header.className = 'map-popup-header'; //works as expected in IE7
var header = document.createElement('h3');
header.setAttribute('class','map-popup-header'); //doesn't work in IE7 
```

希望这个答案可以帮助别人！

# iphone - 获取使用 iOS 的 Twitter 关注者

> ID：14727365
> 
> 赞同：0
> 
> 时间：2013-02-06T10:58:44.123
> 
> 标签：iphone, ios, twitter

我想知道是否有办法只获得那些使用 iOS 的推特追随者。或者，获取一个字段，指示关注者使用哪些设备。就像在 facebook 中一样，我们可以使用以下命令查询用户设备数组：“从用户那里选择设备......”。

目前我正在使用 REST API v1.1 来获取关注者。但无法确定他们的设备操作系统。有没有办法在推特上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:52:29.557

没有直接的方法，但每条推文都包含一个“来源”值，该值指示用户用于发布该推文的应用程序。

例如，我的这条推文是使用 iPhone 版 Twitter 发布的： [https ://api.twitter.com/1/statuses/show/299800258660151296.json?include_entities=true](https://api.twitter.com/1/statuses/show/299800258660151296.json?include_entities=true)

“源”值是：

```
"source": "<a href=\"http://twitter.com/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>", 
```

因此，在您的情况下，您应该首先获取关注者列表，然后从每个用户那里获取最后一条推文并检查“来源”值。

您将不得不编译一个 iOS 应用程序列表以匹配源。

此外，您将很快达到速率限制。

另一种方法是使用 Twitter 公共流 API，关注您要分析的用户并检查那里的源值。您不会以这种方式达到速率限制，但所有关注者可能需要一段时间才能发布推文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:58:47.450

不，目前 Twitter 没有提供任何可以为您提供使用 iOS 的关注者的 API。

您只能获取关注者列表，但无法确定他/她是否使用 iOS。

# nservicebus - NServiceBus - 将消息放回总线

> ID：14727370
> 
> 赞同：0
> 
> 时间：2013-02-06T10:58:52.330
> 
> 标签：nservicebus

我有一个处理消息的总线端点，但是我现在想在此处理程序内将另一条消息放回总线。

为此，我需要获取对总线的引用。

但是，如果我尝试以下操作：

```
public class ServerEndpoint: IWantToRunAtStartup
{
    public static IBus Bus { get; set; }

    public void Run()
    {
        int x = 5;

        Bus = NServiceBus.Configure.With()
            .DisableTimeoutManager()
            .Log4Net()
            .DefaultBuilder()
            .XmlSerializer()
            .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(false)
            .UnicastBus()
                .ImpersonateSender(false)
            .CreateBus()
            .Start();

    }

    public void Stop()
    {
    }
} 
```

然后我得到各种配置错误，即使我将 Unicast 和 Msmq 配置放在 app.config 中。

谁能给我指点，我希望这是一个相当简单的错误！

谢谢

邓肯

编辑：这是在服务器上。让我感到困惑的是，总线是在 web 应用程序上使用上面的代码在 global.asax App_Start() 方法中配置的。但是当试图在 ServerEndpoint（实际的“总线”dll，在主机内运行）中执行此操作时，这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:42:15.783

您为此使用依赖注入，请参阅[http://support.nservicebus.com/customer/portal/articles/862398-how-do-i-get-a-reference-to-ibus-in-my-message-handler-](http://support.nservicebus.com/customer/portal/articles/862398-how-do-i-get-a-reference-to-ibus-in-my-message-handler-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:58:58.657

感谢所有的反馈——我想在我能走路之前跑步。

从表面上看，要将消息发送到另一个端点，我需要设置一个不同的程序集（ServiceBus.Host）。

总线是使用 DI 自动创建的，所以这毕竟不是问题。

我观看了 Andreas Ohlund ( [http://pluralsight.com/training/Courses/TableOfContents/nservicebus](http://pluralsight.com/training/Courses/TableOfContents/nservicebus) ) 的精彩 Pluralsight 视频，并按照他在这里构建的示例进行操作（参见 BusStop - Billing Take 2）

# sql - sql 作为别名加入不起作用

> ID：14727373
> 
> 赞同：1
> 
> 时间：2013-02-06T10:59:07.727
> 
> 标签：sql, database, join, alias

我是 sql joins 新手。我有 5 年的项目。现在我必须部署它一些新的服务器。所以将它部署到其他服务器我面临一些 sql 问题。这是 qyery 。

```
SELECT DISTINCT d.*,DATE_FORMAT(d.downloads_updated, '%c/%d/%Y') AS updated,DATE_FORMAT(d.downloads_created, '%c/%d/%Y') AS created, s2.strings_english as title, s2.strings_english as description 
FROM strings s, downloads d,
 products_has_downloads pd 
inner JOIN strings s2 ON d.downloads_description = s.strings_id WHERE d.downloads_id = pd.downloads_id AND s.strings_id = d.downloads_title AND d.downloads_status = 'Live' AND d.downloads_level = 'Public'
 ORDER BY d.downloads_updated DESC LIMIT 5 
```

我收到这个错误

```
1054 - Unknown column 'd.downloads_description' in 'on clause' 
```

我还没有写这个 sql 查询。它在旧服务器上运行良好。

我是新加入和数据库。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:01:44.150

您正在混合使用不起作用的隐式和显式连接语法。

您具有以下隐式语法，其中表由逗号连接：

```
FROM strings s, downloads d, products_has_downloads pd 
```

该`JOIN`语法比逗号语法具有更高的优先级，因此子句中的别名`downloads`不可用。`ON`

尝试使用所有相同的语法。我将您的查询更改为仅使用显式`JOIN`语法：

```
SELECT DISTINCT d.*,
  DATE_FORMAT(d.downloads_updated, '%c/%d/%Y') AS updated,
  DATE_FORMAT(d.downloads_created, '%c/%d/%Y') AS created, 
s2.strings_english as title, 
s2.strings_english as description 
FROM strings s
INNER JOIN downloads d
  ON d.downloads_description = s.strings_id
INNER JOIN products_has_downloads pd 
  on d.downloads_id = pd.downloads_id
inner JOIN strings s2 
  on s2.strings_id = d.downloads_title
WHERE d.downloads_status = 'Live' 
  AND d.downloads_level = 'Public'
ORDER BY d.downloads_updated DESC 
LIMIT 5 
```

# grails - 如何将 Grails 添加到我的 cloudbees Jenkins 安装中？

> ID：14727379
> 
> 赞同：6
> 
> 时间：2013-02-06T10:59:20.257
> 
> 标签：grails, jenkins, cloudbees

我正在尝试按照此处的说明在 Cloudbees 的 Jenkins 服务上运行我的 Grails 构建：

[http://wiki.cloudbees.com/bin/view/DEV/Build+and+Deploy+Grails+application](http://wiki.cloudbees.com/bin/view/DEV/Build+and+Deploy+Grails+application)

但是，当我尝试从“Grails 安装”中为构建作业选择 Grails 安装时，除了“默认”选项外，下拉列表为空：

![在此处输入图像描述](../Images/1c157ac7cd725f4e7aa9372e99d34b11.png)

当我运行我的构建时，我收到以下错误消息，好像没有安装 Grials 实例：

```
java.io.IOException: Cannot run program "grails" (in directory "/scratch/jenkins/workspace/liza"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:709)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:934)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:901)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
    at java.lang.ProcessImpl.start(ProcessImpl.java:65)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 15 more 
```

难道我做错了什么？我需要以某种方式自己安装 Grails 吗？

我试过检查“使用 Grails 包装器”复选框，但我仍然遇到类似的问题：

```
[liza] $ /scratch/jenkins/workspace/liza/grailsw upgrade --non-interactive
FATAL: command execution failed
java.io.IOException: Cannot run program "/scratch/jenkins/workspace/liza/grailsw" (in directory "/scratch/jenkins/workspace/liza"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:17:08.980

“使用 Grails 包装器”将在这里为您提供帮助（假设您使用的是 Grails 2.1 或更高版本）。在您的应用程序中运行

```
grails wrapper 
```

[这将在您的应用程序中创建一个`grailsw`shell 脚本](http://grails.org/doc/latest/guide/commandLine.html#wrapper)和一些您需要签入的其他点点滴滴。这个包装脚本可以用来代替已安装的脚本`grails`，它会在第一次运行时下载自己的 Grails 副本。如果您告诉 Jenkins “使用 grails 包装器”，那么它将不需要在构建服务器上单独安装 Grails。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:26:05.713

如果您访问`/configure`您的 Jenkins 服务器，您应该会看到 Grails 安装列表。如果为空，可以添加一个；选择*Use Pre-Installed Grails on DEV@Cloud*并选择其中一个提供的版本（如果它们适合您的需要）；或者您可以选择*自动安装*并从公共镜像下载最近的构建。

如果这些事情没有解决，您可以随时打开支持票；如果有可以帮助其他人的解决方案，请参考此 SO 问题。

# iphone - iOS SDK 6.1 的 UITableView 与 iOS SDK 5.1 不兼容

> ID：14727380
> 
> 赞同：1
> 
> 时间：2013-02-06T10:59:21.440
> 
> 标签：iphone, uitableview, ios5.1, ios6.1

我`UITableView`在 XCode 4.6 中使用 iOS 6.1 SDK 创建了项目，并将目标 sdk 设置为 5.1，当应用程序调用函数`dequeueReusableCellWithIdentifier`时`cellForRowAtIndexPath`，应用程序抛出异常，模拟器是 5.1，在模拟器 6.x 上是可以的。

1： `[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]:`无法识别的选择器发送到实例

2：由于未捕获的异常而终止应用程序`NSInvalidArgumentException`，原因：`-[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]:`无法识别的选择器发送到实例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:22:11.987

**1\. dequeueReusableHeaderFooterViewWithIdentifier**
**可用性**
适用于 iOS 2.0 及更高版本。
**->**运行此功能所需的最低 iOS 版本为**iOS 2.0**

**2 .dequeueReusableCellWithIdentifier:forIndexPath:**
**可用性**
适用于 iOS 6.0 及更高版本。
**->**运行此功能所需的最低 iOS 版本为**iOS 6.0**

**编辑** 如果你想使用这个功能，你可以检查你当前的设备版本，然后实现这个

```
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
NSLog(@"curr version = %f",[currSysVer floatValue]);

if ([currSysVer floatValue] >= 6) {
    //iOS 6.0 and later code
    // dequeueReusableCellWithIdentifier:forIndexPath:
}
else{
    //dequeueReusableHeaderFooterViewWithIdentifier
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:07:23.233

如果您查看 Apple 文档，您会发现[`dequeueReusableCellWithIdentifier: forIndexPath:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier%3aforIndexPath%3a)iOS 6.0 附带了该文档。

这意味着如果您尝试在 iOS 5.X 设备上调用此方法，它将引发异常。

[如果可能的话，如果你使用旧的" `dequeueReusableCellWithIdentifier:`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier%3a)调用会更好。

这两个调用之间的一大区别是后者（旧的）*可以*返回 nil，在这种情况下，您需要分配/初始化一个新的可重用单元。

# php - 无法通过 curl 执行 url

> ID：14727383
> 
> 赞同：2
> 
> 时间：2013-02-06T10:59:42.723
> 
> 标签：php, curl

我无法通过 curl 执行 URL。但如果只是通过浏览器运行查询，它工作正常。我的代码是这样的：

```
$xmlData = "<Leads><row no='1'><FL val='First Name'>".$new_fname."</FL><FL val='Last Name'>".$new_lname."</FL><FL val='Email'>".$new_email."</FL><FL val='Phone'>".$new_ph_no."</FL></row></Leads>";
$xmlData = htmlentities($xmlData);
$ch = curl_init("https://crm.zoho.com/crm/private/xml/Leads/insertRecords?newFormat=1&authtoken=XXX&scope=crmapi&xmlData=".$xmlData);
curl_setopt($ch, CURLOPT_VERBOSE, 1);//standard i/o streams 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE);// Turn off the server and peer verification 
curl_setopt($ch, CURLOPT_SSL_CIPHER_LIST, 'rsa_rc4_128_sha'); //for godaddy server patch
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);//Set to return data to string ($response) 
curl_setopt($ch, CURLOPT_POST, 1);//Regular post 
$response = curl_exec($ch); 
curl_close($ch); 
```

你能告诉我问题出在哪里吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:53:31.957

以下代码应该可以工作：

```
$ch = curl_init("https://crm.zoho.com/crm/private/xml/Leads/insertRecords?newFormat=1&authtoken=XXX&scope=crmapi&xmlData=".$xmlData);

curl_setopt($ch, CURLOPT_VERBOSE, 1); 
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
// deactivate certificate checking 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);//Set to return data to string ($response) 
curl_setopt($ch, CURLOPT_POST, 1);//Regular post 
$response = curl_exec($ch); 

if(!$response) {
    echo curl_error($ch), PHP_EOL;
}
curl_close($ch); 
```

经过讨论评论后，我意识到问题在于您尚未在系统上安装 Thawte ssl 证书。你有两个选择：

*   安装[证书](https://www.thawte.com/roots/index.html)
*   使用禁用证书检查`CURLOPT_VERIFYPEER = FALSE`

我在示例中使用了第二种方法，只是为了展示如何使您的代码正常工作。对于生产系统，我建议您安装证书。

# css - CSS 的良好实践——每页一张？

> ID：14727385
> 
> 赞同：0
> 
> 时间：2013-02-06T11:00:02.080
> 
> 标签：css

问题很简单：我们有一个“主 CSS 文件”（母版页的相同概念）并且对于每个页面都有一个特定且唯一的 CSS 文件，这是一种很好的做法吗？

我问这个是因为我认为在一个不会使用它的页面上有非常不同的代码是没有用的——你们都能理解我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:04:35.663

从用户界面的角度...

在以下情况下使用单独的 CSS：

*   您有几乎独立的页面，其中包含不太常见的内容
*   您需要在不同的项目中重用特定页面

在以下情况下使用单个 CSS：

*   你有很多共同的风格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:02:52.970

使用一个主 CSS 文件比拥有一个主 CSS 文件和几个特定 CSS 文件的最大优势是

1.  您可以节省 HTTP 请求时间和资源。如果您有多个文件，则需要多次调用服务器并浪费元数据。
2.  一切都在一个地方，您可以更轻松地编辑它们。CSS 变得更易于管理您的网站。
3.  缓存有很大帮助。

主文件中多余的/未使用的样式规则可能太少而无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:04:08.873

在我看来，最好使用尽可能少的样式表 (css) 和 JavaScript 文件，以减少 HTTPS 请求的数量。

拥有一个大的 css 文件比拥有 5 个不同的文件更好，因为 css 文件很可能会在初始请求后缓存在用户的浏览器中，而缓存的 CSS 文件将在第一次请求后提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:04:53.427

是的，这是最佳实践，原因如下：

当用户加载您的网站时，他们将在第一次加载时下载单个 CSS 文件 - 此后，他们的浏览器将在您的主域下为您网站上的每个页面缓存该文件。这意味着不再需要从服务器加载 CSS 文件来浏览您的网站并加快页面加载速度。

如果您从代码结构的角度考虑分离问题，我鼓励您考虑一些 CSS 预编译器，例如[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/) ，它们可以让您以更好的方式构建代码。

# sql - 在特定表中进行更改时更新某些表

> ID：14727389
> 
> 赞同：1
> 
> 时间：2013-02-06T11:00:12.313
> 
> 标签：sql, sql-server-2005, triggers

这是我的示例数据库的数据库图：

![在此处输入图像描述](../Images/1de38c5cc04a00c591673128df6bbc36.png)

我想在***Table Trigger***的帮助下对***OrderDetails***表进行更改时更新***成分表***

 **但问题是***成分***表可能有一个或多个项目条目。我想更新***成分***表中与项目关联的所有条目。更多描述，请参见下面的算法：

对于当前*项目的****成分***中的每个***成分***：使用公式 更新***成分***表中的数量：公式***：*** 成分.数量 = 成分.数量 - (项目.数量 * 成分.数量)

 *****（整个想法是，每当添加/更新/删除 OrderID 的项目时，成分数量应按所提及的数量减少/增加）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:09:31.080

我们不会在 SQL 中迭代或循环（除非我们可以避免它）。我们描述*我们*想要发生的事情，并让 SQL 解决*如何*。

通常，我们也不*存储*我们可以计算的数据。我们总是可以计算已订购的每种成分的数量。（如果有另一个表格跟踪我们供应商的交货情况，也可以计算出来）。如果性能是一个问题，我们会考虑创建一个索引视图——它确实包含计算值，但 SQL Server 会自动维护它。

通过这种方式，您可以避免出现任何差异（例如，如果您的触发器被禁用）。

话虽如此，我认为您想要的触发器是：

```
create trigger T_OrderDetails
on OrderDetails
after insert,update,delete
as
begin
    update ing
    set Quantity = ing.Quantity - ((COALESCE(iod.Quantity,0) - COALESCE(dod.Quantity,0)) * i.Quantity)
    from
    inserted iod
        full outer join
    deleted dod
        on
            iod.ItemID = dod.ItemID
        inner join
    Ingredients i
        on
            i.ItemID = iod.ItemID or
            i.ItemID = dod.ItemID --Cope with OUTER join above
        inner join
    Ingredient ing
        on
            i.IngID = ing.IngID
end 
```*****

# algorithm - 对于霍夫曼代码，我应该避免以 0（零）开头的多位代码吗？

> ID：14727390
> 
> 赞同：1
> 
> 时间：2013-02-06T11:00:14.483
> 
> 标签：algorithm, greedy, huffman-code

当我使用霍夫曼贪心算法构造二叉树时，如果所有四个字母的概率相同，我会得到以下结果：

*   00
*   01
*   10
*   11

问题是，我的程序仅将 00 和 01 视为 0 和 1。我是否应该将从 0（零）开始的代码长度限制为 1（一）？应该使用什么数据类型来存储霍夫曼代码或其各个位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:29:45.357

如果您的“程序仅将 00 和 01 视为 0 和 1”，那么您的程序有错误。

对于四个等概率符号，代码确实是 00、01、10 和 11。这意味着您需要在解码时查找所有这些位。解码时，您首先拉左边的位。所以你得到一个 0。这意味着代码是 00 或 01。然后你拉下一位。这是一个 1。所以现在你有了完整的代码 01。你发出相应的符号，然后重新开始。

对于概率不相等且代码具有不同长度的更典型情况，更容易看到。考虑这段代码：

```
a - 0
b - 10
c - 110
d - 111 
```

要解码，您开始从流中提取位。第一位是 1。现在您知道它必须是 a、b、c 或 d。现在你拉另一个1。你把它降到c或d。你拉一个0，所以现在你知道它的d了。你从下一点开始。

在您开始拉位并缩小选择范围之前，您不知道代码的长度。解码后，您将知道代码的长度。

# tsql - 存储的 proc 日期过滤导致不返回任何记录

> ID：14727391
> 
> 赞同：0
> 
> 时间：2013-02-06T11:00:16.767
> 
> 标签：tsql

我有以下存储过程：

```
ALTER PROCEDURE [dbo].[GetErrorsByDate]
(
    @p_skip INT
   ,@p_take INT
   ,@p_orderBy VARCHAR(50) = 'TimestampDesc'
   ,@p_startDate SMALLDATETIME = NULL
   ,@p_endDate SMALLDATETIME = NULL
)
AS
BEGIN

    WITH pathAuditErrorLogCT AS
    (
        SELECT
          CASE
            WHEN @p_orderBy = 'TimestampAsc' THEN ROW_NUMBER() OVER (ORDER BY E.[Timestamp])
            WHEN @p_orderBy = 'TimestampDesc' THEN ROW_NUMBER() OVER (ORDER BY E.[Timestamp] DESC)                                         
            WHEN @p_orderBy = 'LogIdAsc' THEN ROW_NUMBER() OVER (ORDER BY E.LogId)
            WHEN @p_orderBy = 'LogIdDesc' THEN ROW_NUMBER() OVER (ORDER BY E.LogId DESC)                                 
            WHEN @p_orderBy = 'ReferrerUrlAsc' THEN ROW_NUMBER() OVER (ORDER BY E.ReferrerUrl)
            WHEN @p_orderBy = 'ReferrerUrlDesc' THEN ROW_NUMBER() OVER (ORDER BY E.ReferrerUrl DESC)                                    
          END AS RowNum
          ,E.Id
        FROM pathAuditErrorLog AS E   
        WHERE
          (E.[Timestamp] >= @p_startDate OR @p_startDate IS NULL)
        AND
          (E.[Timestamp] <= @p_endDate OR @p_endDate IS NULL)                     
    )                   
    SELECT
      E.Id
     ,E.Node
     ,E.HttpCode
     ,E.[Timestamp]
     ,E.[Version]
     ,E.LogID
     ,E.IsFrontEnd
     ,E.ReferrerUrl
     ,E.[Login]
     ,E.BrowserName
     ,E.BrowserVersion
     ,E.ErrorDetails
     ,E.ServerVariables
     ,E.StackTrace
    FROM pathAuditErrorLog AS E

    INNER JOIN pathAuditErrorLogCT AS pct ON pct.Id = E.Id

    WHERE pct.RowNum BETWEEN @p_skip + 1 AND (@p_skip + @p_take)

    ORDER BY RowNum
END 
```

这个想法是该过程从错误表中返回数据，但允许动态列排序、分页和日期过滤。我的问题是作为公用表表达式一部分的日期过滤。我无法让这个工作。

如果我删除日期过滤逻辑，那么 proc 工作正常。包含它，即使有预期的行，我也经常没有返回任何行。例如，如果我尝试：

```
exec GetErrorsByDate 0, 10, 'TimestampDesc', '2013-02-05' 
```

只给出开始日期，然后我得到一堆记录。但是，如果我这样做：

```
exec GetErrorsByDate 0, 10, 'TimestampDesc', '2013-02-05', '2013-02-05' 
```

通过开始和结束日期，我最终没有返回任何记录。这很奇怪，因为我预计第一个查询中的一些记录会出现在第二个查询中。

有人可以发现我做错了什么吗？

编辑：我已经应用了 AdaTheDev 的建议，它看起来更接近我的需要。但是，我发现了一种情况，建议的方法没有返回我的预期。如果我运行以下命令：

```
exec GetErrorsByDate 0, 10, 'TimestampDesc', '2013-01-01', '2013-01-03' 
```

我得到一个时间戳为的行`2013-01-02 13:29:00`。如果我运行这个：

```
exec GetErrorsByDate 0, 10, 'TimestampDesc', '2013-01-01', '2013-01-02' 
```

我没有返回任何行。我希望看到上一个查询中的一行被返回，因为它的时间戳确实落在 2013 年 1 月 2 日。我在这里误解了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:14:25.123

这只会返回`Timestamp`正好是 2013-02-05（即午夜）的记录，因此当天的记录将不包括在内（我假设它们都有关联的时间）。

如果您想包括它们，我会将条款更改为：

```
WHERE
          (e.[Timestamp] >= @p_startDate OR @p_startDate IS NULL)
        AND
          (e.[Timestamp] < @p_endDate OR @p_endDate IS NULL) 
```

（更改是 @p_enddate 子句现在只是`<`）

然后做：

```
exec GetErrorsByDate 0, 10, 'TimestampDesc', '2013-02-05', '2013-02-06' 
```

# c# - 列出表导致“数据库中的 CREATE TABLE 权限被拒绝”ASP.NET - MVC4

> ID：14727397
> 
> 赞同：11
> 
> 时间：2013-02-06T11:00:46.947
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, database-connection, database-permissions

我正在使用 ASP.NET MVC 4 - c# 连接到实时数据库，并列出结果，但是当我查看该页面时，它返回以下错误：

```
CREATE TABLE permission denied in database 'DatabaseName'.

Description: An unhandled exception occurred during the execution
of the current web request. Please review the stack trace for more
information about the error and where it
originated in the code.

Exception Details: System.Data.SqlClient.SqlException: CREATE TABLE
permission denied in database 'DatabaseName'.

Source Error: 

Line 16:         public ActionResult Index()
Line 17:         {
Line 18:             return View(db.AccControls.ToList());
Line 19:         }
Line 20 
```

控制器：

```
namespace TestDBCon.Controllers
{
    public class HomeController : Controller
    {
        private DataDbContext db = new DataDbContext();

        public ActionResult Index()
        {
            return View(db.AccControls.ToList());
        }

    }
} 
```

AccControl.cs（模型）

```
namespace TestDBCon.Models
{
    public class AccControl
    {
        public int ID { get; set; }
        public int ControlCode { get; set; }
        public string Nominal { get; set; }
        public string CostCentre { get; set; }
        public string Department { get; set; }
    }

    public class DataDbContext : DbContext
    {
        public DbSet<AccControl> AccControls { get; set; }
    }
} 
```

网络配置：

```
<add name="DataDbContext" connectionString="Data Source=***;initial catalog=***;integrated security=True;" providerName="System.Data.SqlClient" /> 
```

我不是想创建一个表？我只是想列出结果，所以我非常困惑。它必须与MVC有关吗？

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-04T22:02:16.253

我知道它已经过时了，但由于我遇到了同样的问题，而且我花了一段时间才找到解决方案……我决定分享这些信息。所以我必须做两件事来解决这个问题，第一是禁用迁移：

```
# Migrations/Configuration.cs
internal sealed class Configuration : DbMigrationsConfiguration<IntranetApplication.Models.MyDb1>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }
} 
```

然而这还不够，我还必须确保播种机不运行。您可以使用这段额外的代码取消它：

```
#Global.asax.cs
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    Database.SetInitializer<Models.MyDb1>(null);
    Database.SetInitializer<Models.MyDb2>(null);

    ...
} 
```

然后最后我现在可以使用 LINQ 执行 SELECT 并且只有读取访问权限

**EDIT**
根据 Lawrence 的建议，最好将它直接放在 DB Context Constructor 中。感谢您的提示，我更新了代码，现在看起来像这样：

```
public partial class MyDb1 : DbContext
{
    public MyDb1()
        : base("name=MyDb1Connection")
    {
        Database.SetInitializer<Models.MyDb1>(null);
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T11:06:14.523

您是否`web config`指向正确的数据库？

凭证是否正确？

如果您要使用实体框架`MVC4 WebSecutiy()`来处理用户的身份验证和授权，实体框架将在数据库中创建表。这可能会引发异常。

在这种情况下，您无法创建成员资格提供者所需的表，您需要将其从系统中排除。[在这里](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)看到这个。或者，创建一个新的 MVC4 项目并选择空模板，然后放入您需要的位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-14T16:49:21.997

在重构和重命名一些代码后，我遇到了类似的错误。问题是我的 C# 代码与数据库中的表名不匹配。

我在 C# 中的代码：

```
public virtual DbSet<MyTableName> 
```

以及 SQL Server 中的表名：

```
MyActualTableName 
```

由于表名不匹配（MyTableName ！= MyActualTableName），我得到了这个（误导性）错误：

> `Create TABLE permission denied in database MyDatabase`

我花了一段时间才看到我搞砸了，但匹配表名解决了错误。

# debugging - Visual Studio 2012 调试在调试会话期间停止（超时）

> ID：14727404
> 
> 赞同：2
> 
> 时间：2013-02-06T11:01:05.850
> 
> 标签：debugging, visual-studio-2012

当我在 VS2012 上调试时，当我在某个功能上保持空闲时，调试器“超时”并且突然调试器停止会话。
我怎么知道为什么会这样？
我可以查看调试器日志吗？

我试图将函数内容放在 try {} catch() {} 中，当它停止调试时，它没有捕获任何异常，只是停止了调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T05:53:09.480

正如丛旭评论的那样，代码中有递归调用。

# sql - 来自同一个表的嵌套值

> ID：14727406
> 
> 赞同：1
> 
> 时间：2013-02-06T11:01:07.170
> 
> 标签：sql

需要从同一表中检索值，其中一列中的值用作不同记录中的父 ID。这是在第三级完成的，这意味着一条记录中第一列的值用于第二列中的另一条记录，然后第二条记录中的第一列值用于另一条记录的第二列。对于这个第三级嵌套，我使用了以下查询：

```
SELECT C1.CALLCATEGORYDESCR AS "First", 
       C2.CALLCATEGORYDESCR AS "Second",
       C3.CALLCATEGORYDESCR AS "Third" 
FROM CALLCAT C1
JOIN CALLCAT C2
ON C1.CALLCATEGORY = C2.parent_id
JOIN CALLCAT C3
ON C2.CALLCATEGORY = C3.PARENT_ID
WHERE C3.ACTIVE = 1 
```

其中 CALLCATEGORY 是第一列，PARENT_ID 是第二列。

此查询工作正常，我得到了第三级嵌套的结果。但是我还需要查找仅嵌套在第二级的记录以及未嵌套的记录（它们的 callcategory 值不用作 parent_id）。基本上我需要更多的第二级嵌套查询并且没有嵌套，在没有嵌套的情况下，第三个输出列将具有 NULL 值，第二列和第三列将具有 NULL 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:08:40.877

你可以这样做`Union`：

```
SELECT C1.CALLCATEGORYDESCR AS "First", 
       C2.CALLCATEGORYDESCR AS "Second",
       C3.CALLCATEGORYDESCR AS "Third" 
FROM CALLCAT C1
JOIN CALLCAT C2
ON C1.CALLCATEGORY = C2.parent_id
JOIN CALLCAT C3
ON C2.CALLCATEGORY = C3.PARENT_ID
WHERE C3.ACTIVE = 1

UNION

SELECT C1.CALLCATEGORYDESCR AS "First", 
       C2.CALLCATEGORYDESCR AS "Second",
       null AS "Third" 
FROM CALLCAT C1
JOIN CALLCAT C2
ON C1.CALLCATEGORY = C2.parent_id
WHERE C2.ACTIVE = 1 and not exists 
(select 1 from callcat where parent_id = C2.CALLCATEGORY)

UNION

SELECT C1.CALLCATEGORYDESCR AS "First", 
       null AS "Second",
       null AS "Third" 
FROM CALLCAT C1
WHERE C1.ACTIVE = 1 and not exists 
(select 1 from callcat where parent_id = C1.CALLCATEGORY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:11:56.837

尝试左连接

```
SELECT C1.CALLCATEGORYDESCR AS "First", 
   C2.CALLCATEGORYDESCR AS "Second",
   C3.CALLCATEGORYDESCR AS "Third" 
FROM CALLCAT C1
LEFT JOIN CALLCAT C2
ON C1.CALLCATEGORY = C2.parent_id
LEFT JOIN CALLCAT C3
ON C2.CALLCATEGORY = C3.PARENT_ID
WHERE C3.ACTIVE = 1 
```

# android - 如何在android中的X和Y位置绘制或显示按钮？

> ID：14727407
> 
> 赞同：0
> 
> 时间：2013-02-06T11:01:08.410
> 
> 标签：android, android-layout, android-canvas

我是安卓新手。我想在屏幕上特定的 x 和 y 位置显示按钮。我有一个相对布局，我将背景图像放置到该相对布局现在我想在该图像上的特定 x 和 y 位置创建或绘制按钮，并且 X 和 Y 位置由我通过 XML 给出我有 5 个 X 和 Y位置。我用谷歌搜索了很多，但没有找到任何相关的解决方案，每个人都说使用 AbsoluteLayout 我们可以做到，但我不想使用 AbsoluteLayout。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:26:16.377

或者 ;

```
RelativeLayout yourRelativeLayout = (RelativeLayout) findViewById(R.id.relative_layout_1);

RelativeLayout.LayoutParams Params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
Params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
Params.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
Params.leftMargin = 25;
Params.topMargin = 25;    

Button newButton = new Button(this);

yourRelativeLayout.addView(newButton, Params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:16:18.803

您可以使用：**RelativeLayout.LayoutParams**

例如 ：

```
RelativeLayout.LayoutParams Params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
Params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
Button button1 = new Button(this);
button1.setLayoutParams(Params);

Params= new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
Params.addRule(RelativeLayout.RIGHT_OF, button1.getId());
Button button2 = new Button(this);
button2.setLayoutParams(Params); 
```

我希望这个答案可以帮助你...

# php - 将数据（POST 方法）从本地发送到服务器，通过 cURL 服务器接收 EMPTY RECORD

> ID：14727411
> 
> 赞同：0
> 
> 时间：2013-02-06T11:01:23.230
> 
> 标签：php, curl

我通过这种形式从本地电脑向服务器发送数据：

```
<form method="post" action="proses.php">
<input type="hidden" name="id"><br>
Tanggal <input type="text" name="tgl"><br>
Pesan <textarea name="isi" cols="29" rows="5"></textarea> <br>
Nomor Hp <input type="text" name="nope"><br>
<input type="submit" name="submit" value="Submit"> </form> 
```

这是代码proses.php

```
<?php
$id = $_POST['id'];
$tgl = $_POST['tgl'];
$isi = $_POST['isi']; $nope= $_POST['nope'];

$curlHandle = curl_init();
 curl_setopt($curlHandle, CURLOPT_URL, 'http://adibiken.com/SEM/kir.php');
curl_setopt($curlHandle, CURLOPT_POSTFIELDS, "id=".$id."&amp;tgl=".$tgl."&amp;isi=".$isi."&amp;nope=".$nope);
curl_setopt($curlHandle, CURLOPT_HEADER, 0);
curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curlHandle, CURLOPT_TIMEOUT,30);
curl_setopt($curlHandle, CURLOPT_POST, 1);
curl_exec($curlHandle);
curl_close($curlHandle); ?> 
```

这是 kir.php 的代码（在服务器中）

```
<?php $id = $_POST['id']; $tgl = $_POST['tgl']; $isi = $_POST['isi']; $nope = $_POST['nope'];
$quer = "INSERT INTO `adibiken_sem`.`inbox` (`id`,`tgl` ,`isi` ,`nope`)VALUES ( '$id','$tgl', '$isi', '$nope')";
mysql_query($quer); ?> 
```

**问题：数据已成功发送数据库服务器中的空记录...** 需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:11:54.957

不知道这是否是问题，但可以肯定

```
VALUES ( '$id','$tgl', '$isi', '$nope')" 
```

应该

```
VALUES ( '".$id."','".$tgl."', '".$isi."', '".$nope."')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:11:44.153

在文件“proses.php”中尝试使用“&”而不是“&”。同样在文件 kir.php （在 server 中）运行 print_r($_POST) 或将整个数组记录到某处以检查您是否收到正确的变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:29:09.947

使用 http_build_query(...) 从数组中形成 postfields。

```
$request = http_build_query($_POST);
...
curl_setopt($curlHandle, CURLOPT_POSTFIELDS,$request) 
```

如果您在 $_POST 数组中获得正确的值，那么您的 SQL 语法有问题。您可以尝试在 phpMyAdmin 或其他工具中执行您的查询并进行调试。MySQL 可能会触发错误，但您看不到它。您可以从 kir.php 获取任何输出，包括错误消息（在您的服务器上启用）：

```
$curResponse = curl_exec($curlHandle);
echo $curResponse; 
```

# php - Mysql范围内的INT（1）和INT（2）以及StoreData的限制？

> ID：14727414
> 
> 赞同：5
> 
> 时间：2013-02-06T11:01:29.750
> 
> 标签：php, mysql

在 Mysql 中：

`INT(1) = 2147483647`并存储 4 个字节，

那么`INT(2) = ?`存储`?`字节呢...

我在 INT(1) 中使用超过 2147483647 它不起作用！我也在 INT(2) 中使用了相同的值它不起作用？？为什么 ？

解决方案 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T18:43:54.907

可选的显示宽度说明符仅在使用**zerofill**时适用，与整数数据类型的内部大小（以字节为单位）无关。它始终是 4 个字节。

应用程序可以使用此可选显示宽度来显示宽度小于为列指定的宽度的整数值，方法是用空格向左填充它们。（也就是说，这个宽度存在于与结果集一起返回的元数据中。是否使用它取决于应用程序。）

这是[链接]（[http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)）

**更多示例**

> 如果存在表名，则删除表；
> 
> 创建表 tablename ( columnname int(4) unsigned zerofill not null default 0 );
> 
> 插入表名（列名）值（123），（456），（1234）；
> 
> 从表名中选择 *；

**输出**

0123

0456

1234

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T11:05:05.463

括号中的数字表示字段返回的位数。您可以在 INT(1) 中插入任何数字，但只能得到 0 到 9 之间的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T11:10:11.107

MySQL 中的 INT 始终是 4 字节数字。

INT类型的语法是INT(M)，其中M表示最大显示宽度；但并非所有 MySQL 客户端都支持此值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:26:06.417

您应该使用 BIGINT 来获取 8 个字节（请参阅[整数类型](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)）。括号中的数字仅表示最大显示宽度（请参阅[数字类型属性](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)）

# android - VerifyError - 验证者拒绝类

> ID：14727418
> 
> 赞同：9
> 
> 时间：2013-02-06T11:01:38.880
> 
> 标签：android, verifyerror

我正在为 2.2 ( `minSdkVersion=8`) 开发，突然我收到了这个错误：

```
arbitrarily rejecting large method (regs=75 count=28584)
rejected Lcom/Demo/Loyalty/SelectType;.onClick (Landroid/view/View;)V
Verifier rejected class Lcom/Demo/Loyalty/SelectType;
Class init failed in newInstance call (Lcom/Demo/Loyalty/SelectType;)

java.lang.VerifyError: com.Demo.Loyalty.SelectType
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1429)
at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

直到现在它工作正常。

注意：`SelectType`类有大约 16000 行代码，但我猜这并没有那么大。

我在网上搜索了很多，从答案中，我做了以下事情：

*   清理项目
*   重置亚行
*   重启模拟器/设备/eclipse
*   检查是否在构建路径中检查了第三方库字段

但我仍然收到该错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:42:36.303

您描述的步骤可能无济于事。

问题是，这不是 Dalvik 的问题。例如，在 Oracle Java VM 中使用了类似的验证器。简单的回答：*你的方法太复杂了*。你看到的错误主要是因为太多：

*   参数
*   局部变量
*   异常处理程序
*   代码说明

更准确地说，该问题已在此线程中进行了描述：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/4qNoIdBHYFc](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4qNoIdBHYFc)

去引用：

> (寄存器数 * 指令字数) 的值大于 2^21。(...) 它旨在防止验证程序膨胀应用程序的本机堆。

您还可以在此处看到类似的报告：[http](http://www.mentby.com/Group/android-developers/verifyerror-arbitrarily-rejecting-large-method.html) ://www.mentby.com/Group/android-developers/verifyerror-arbitrarily-rejecting-large-method.html ，其中包含有关如何解决问题的指示：

> 是的，Dalvik 编译器尝试为方法中的每个局部变量分配一个“寄存器”。它应该能够处理那么多，但显然不能。通过使它们成为实例变量，您消除了编译器“管理”它们的需要/愿望（并且还使该方法更小）。

因此，要解决它，您通常应该将大方法（可能`onClick()`？）分解成更小的部分。此外，将局部变量转换为类字段似乎可以帮助一些有同样问题的人。

# selenium - 如何测试地理 IP

> ID：14727424
> 
> 赞同：0
> 
> 时间：2013-02-06T11:01:54.187
> 
> 标签：selenium, ip, geo

大家好，我有一个测试站点，页面语言会根据国家 IP 更改，因此美国的人会用英语查看页面，而巴黎的人会用法语查看页面。所以我需要测试一下，网络页面语言根据国家/地区的IP更改。任何人都可以对此有任何想法请帮助...

我使用 Selenium Webdriver Java 进行自动化测试，但如果你有手动测试也分享它...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:03:58.173

您可以使用一些代理服务器（网络上维护着它们的列表）。

# symfony-1.4 - 使用 symfony 创建缩略图

> ID：14727425
> 
> 赞同：0
> 
> 时间：2013-02-06T11:01:56.760
> 
> 标签：symfony-1.4, thumbnails

我正在尝试上传并保存带有缩略图的图像。

图像本身`jpg`的大小`2481 wide`为`3508 high`

我正在使用以下插件[sfImageTransformPlugin](http://www.symfony-project.org/plugins/sfImageTransformPlugin)和以下代码：

```
$img->resize ( 150, null ); 
```

问题是，当它保存时，图像是：

`150 wide`和`3508 high`。

我认为该`null`参数意味着它将保持纵横比并相应地调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:08:25.913

尝试调用`resizeSimple`：

```
$img->resizeSimple(150, null); 
```

# android - Android如何创建堆栈类型的图像背景

> ID：14727426
> 
> 赞同：3
> 
> 时间：2013-02-06T11:01:58.987
> 
> 标签：android, android-layout, android-imageview, android-xml

我正在开发一个应用程序，我需要在其中创建相册并将它们显示在 GridView 中。现在我只是在没有任何背景的情况下显示它们，但我需要专辑封面的背景，以便它看起来像一堆照片。背景是这样的：

![在此处输入图像描述](../Images/5843e96f1d9a5682cb466f0302b0bf09.png)

我试过了，但没有奏效：

首先，我创建了一个这样的背景：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#FFFFFF" />

    <stroke
        android:width="1dp"
        android:color="#000000" />

    <padding
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp"
        android:top="1dp" />

</shape> 
```

然后我使用一个图层列表来绘制带有旋转的堆栈：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <rotate
        android:drawable="@drawable/thumb_bg"
        android:fromDegrees="90"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="100" />
    <rotate
        android:drawable="@drawable/thumb_bg"
        android:fromDegrees="90"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="110" />
    <rotate
        android:drawable="@drawable/thumb_bg"
        android:fromDegrees="90"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="120" />

</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T07:56:38.293

我使用位图来创建堆栈视图并将其显示在图像视图中。您可以基于此将位图保存为资源，然后将其添加到 gridview 中，或者在我认为的 getView 中的 gridview 适配器中使用它。

![在此处输入图像描述](../Images/4ecbbd858befe5f2d290f4499605a34d.png)

```
Bitmap m1c = BitmapFactory.decodeResource(getResources(), R.drawable.cat_13);
Bitmap m2c = BitmapFactory.decodeResource(getResources(), R.drawable.cat_13);

int w = m1c.getWidth();
int h = m1c.getHeight();

Matrix mtx = new Matrix();
mtx.postRotate(4);
Bitmap rotatedBMP = Bitmap.createBitmap(m1c, 0, 0, w, h, mtx, true);

Matrix mtx2 = new Matrix();
mtx2.postRotate(-4);

Bitmap rotatedBMP2 = Bitmap.createBitmap(m1c, 0, 0, w, h, mtx2, true);

Canvas comboImage = new Canvas(rotatedBMP);
comboImage.drawBitmap(rotatedBMP2, -10 , -10 , null);
comboImage.drawBitmap(m2c, 10 , 10 , null);

ImageView image = (ImageView) findViewById(R.id.imageView1);
image.setImageBitmap(rotatedBMP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:17:08.910

将您的相册拇指放在虚拟图像上（其中包含 2 或 3 张 diff allign 图像）。

# r - 在 R 中定义列表结构的问题

> ID：14727428
> 
> 赞同：0
> 
> 时间：2013-02-06T11:02:00.890
> 
> 标签：r, list

我有一个函数，它创建一个不同统计数据的列表，计算如下：

```
RiskStats = list(stdev,sharpe,downdev,sortino,maxDD,calmar,currDD)

> RiskStats
[[1]]
             Index
StdDev       3.2506

[[2]]
                                 Index
Annualized Sharpe Ratio (Rf=0%)      -1.2434

[[3]]
                                    Index
Downside Deviation (MAR = 0%)        3.194

[[4]]
                              Index
Sortino Ratio (MAR = 0%)      -1.2655

[[5]]
            Index
maxDD      -8.9467

[[6]]
                  Index
Calmar Ratio     -0.44846

[[7]]
                 Index
Current DD       -8.543 
```

我想为这个列表设置一个结构（7行1列），我们可以简单地写

```
dim(RiskStats) <- c(7,1) 
```

为什么在我们得到的某些结果 [List,1] 的结果中，而不是计算出的正确统计量？

```
 > RiskStats
                    Index
Annual volatility  3.2506      
Sharpe ratio       -1.2434     
Downside deviation 3.194       
Sortino ratio      -1.2655     
Maximum Drawdown   List,1      
Calmar ratio       -0.44846    
Current drawdown   List,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:49:59.123

使用这些数据

```
dput(RiskStats)
RiskStats <- list(structure(list(Index = 3.2506), .Names = "Index", row.names = "StdDev", class = "data.frame"), 
    structure(list(Index = -1.2434), .Names = "Index", row.names = "Annualized_Sharpe_Ratio_Rf", class = "data.frame"), 
    structure(list(Index = 3.194), .Names = "Index", row.names = "Downside_Deviation_MAR_0", class = "data.frame"), 
    structure(list(Index = -8.9467), .Names = "Index", row.names = "maxDD", class = "data.frame"), 
    structure(list(Index = -0.44846), .Names = "Index", row.names = "Calmar_Ratio", class = "data.frame"), 
    structure(list(Index = -8.543), .Names = "Index", row.names = "Current_DD", class = "data.frame")) 
```

您可以通过多种方式实现您的目标，以下是其中的一些：

```
# Alternative 1  (suggested by @Roman Luštrik)
do.call(rbind, RiskStats)  # I think this is the best one 

# Alternative 2
Reduce(rbind, RiskStats)

# Alternative 3
t(data.frame(lapply(RiskStats, t))) # It's not so good, but it works. 
```

无论您选择什么替代方案，您最终都会得到以下结果：

```
 Index
StdDev                      3.25060
Annualized_Sharpe_Ratio_Rf -1.24340
Downside_Deviation_MAR_0    3.19400
maxDD                      -8.94670
Calmar_Ratio               -0.44846
Current_DD                 -8.54300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:42:23.120

原因是因为回撤和最大回撤是列表本身，而其他可能是其他数据结构。

在这些元素上尝试 unlist() 。

# asp.net - 我开发了一个网站。我想知道在哪里提供启动页面 URL

> ID：14727431
> 
> 赞同：-5
> 
> 时间：2013-02-06T11:02:10.007
> 
> 标签：asp.net

我有一个疑问。我使用实体框架开发了一个网站。

我想知道在哪里给`URL`for `login page`?? 我的启动页面是我的**登录页面**

我想知道如何提供默认页面 URL。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:07:20.690

如果您使用身份验证，则使用 WebConfig，您可以定义 defaultUrl
ex。

```
<authentication mode="Forms">
  <forms loginUrl="member_login.aspx"
    defaultUrl="index.aspx" />
</authentication> 
```

# mysql - 免费的 MySQL Profiler

> ID：14727432
> 
> 赞同：6
> 
> 时间：2013-02-06T11:02:11.473
> 
> 标签：mysql

我的背景是 MS-SQL 而不是 MySQL，我正在努力弄清楚如何调试某些东西，

我需要确切地查看 Web 服务在 MySQL 数据库中执行的查询（实际上是插入），但是我找不到免费的 MS-SQL Profiler 等价物（我们没有预算）。有没有人有什么建议？

谢谢

伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:06:50.960

试试看：

```
mysql> SET profiling = 1;

mysql> SELECT * FROM {your_table}

mysql> SHOW PROFILES; 
```

或者

```
mysql> SHOW PROFILE; 
```

更多信息： [http ://dev.mysql.com/doc/refman/5.0/en/show-profile.html](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:12:55.377

您需要打开通用 SQL 日志 -[通用查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)。您可以指定记录查询的位置 - 表或文件。

# r - 如何将回归线添加到具有多个按因子进行颜色编码的数据系列的图中？

> ID：14727433
> 
> 赞同：4
> 
> 时间：2013-02-06T11:02:17.863
> 
> 标签：r, plot, ggplot2, regression

我希望将回归线添加到具有多个数据系列的图中，这些数据系列由一个因子进行颜色编码。使用 brewer.pal 调色板，我创建了一个图，其中数据点按因子 (plant$ID) 着色。下面是代码示例：

```
palette(brewer.pal(12,"Paired"))
plot(x=plant$TL, y=plant$d15N,  xlab="Total length (mm)", ylab="d15N", col=plant$ID, pch=16)
legend(locator(1), legend=levels(factor(plant$ID)), text.col="black", pch=16, col=c(brewer.pal(12,"Paired")), cex=0.6) 
```

有没有一种简单的方法可以为每个不同的数据系列（因子）添加线性回归线？我还希望根据植物$ID 为线条着色？

我可以通过将每个数据系列分别添加到绘图中然后使用 abline 函数（如下所示）来实现这一点，但在有多个数据系列的情况下，匹配颜色可能非常耗时。

```
plot(y=plant$d15N[plant$ID=="Sm"], x=plant$TL[plant$ID=="Sm"], xlab="Total length (mm)", ylab="d15N", col="green", pch=16, xlim=c(50,300), ylim=c(8,15))
points(y=plant$d15N[plant$ID=="Md"], x=plant$TL[plant$ID=="Md"], type="p", pch=16, col="blue")
points(y=plant$d15N[plant$ID=="Lg"], x=plant$TL[plant$ID=="Lg"], type="p", pch=16, col="orange")
abline(lm(plant$d15N[plant$ID=="Sm"]~plant$TL[plant$ID=="Sm"]), col="green")
abline(lm(plant$d15N[plant$ID=="Md"]~plant$TL[plant$ID=="Md"]), col="blue")
abline(lm(plant$d15N[plant$ID=="Lg"]~plant$TL[plant$ID=="Lg"]), col="orange")
legend.text<-c("Sm","Md","Lg")
legend(locator(1), legend=legend.text, col=c("green", "blue", "orange"), pch=16, bty="n", cex=0.7) 
```

一定有更快的方法！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T12:12:08.867

或者您使用`ggplot2`并让它完成所有艰苦的工作。不幸的是，您的示例不可重现，因此我必须自己创建一些：

```
plant = data.frame(d15N = runif(1000), 
                   TL = runif(1000), 
                   ID = sample(c("Sm","Md","Lg"), size = 1000, replace = TRUE))
plant = within(plant, {
          d15N[ID == "Sm"] = d15N[ID == "Sm"] + 0.5
          d15N[ID == "Lg"] = d15N[ID == "Lg"] - 0.5
  })

> head(plant)
        d15N         TL ID
1  0.6445164 0.14393597 Sm
2  0.2098778 0.62502205 Lg
3 -0.1599300 0.85331376 Lg
4 -0.3173119 0.60537491 Lg
5  0.8197111 0.01176013 Sm
6  1.0374742 0.68668317 Sm 
```

诀窍是使用`geom_smooth`计算`lm`并绘制它的几何图形。因为我们使用`color = ID`，`ggplot2`知道它需要对中的每个唯一 ID 做全图`ID`。

```
library(ggplot2)
ggplot(plant, aes(x = TL, y = d15N, color = ID)) + 
   geom_point() + geom_smooth(method = "lm") 
```

![在此处输入图像描述](../Images/e1898926fef6825cba32121c635fd020.png)

# sql - 如何使用 INNER JOIN 将两个字段合并为单个字段

> ID：14727440
> 
> 赞同：0
> 
> 时间：2013-02-06T11:02:53.197
> 
> 标签：sql, sql-server-2008

我有两张桌子。

```
**EmployeeInfo**
   EmployeeName varchar(50)
   EmailAddress varchar(100)
   BranchID     int

**BranchInfo**
   BranchID  int
   opMgr     varchar(100)
   BranchMgr varchar(100) 
```

我想要一个存储过程，如果我将电子邮件地址作为参数传递，它应该将 branchinfo 表中的 OpMgr 和 BranchMgr 列显示到 EmployeeInfo 相关分支的单个列中。我正在尝试编写以下内容，但没有运气，因为我遇到了多部分错误。

```
SELECT  BranchInfo.OpMgr FROM  EmployeesInfo 
UNION
SELECT BranchInfo.BranchMgr FROM EmployeesInfo 
INNER JOIN BranchInfo ON EmployeesInfo.BranchID = BranchInfo.BranchID
WHERE AND EMPLOYEESINFO.EMAILADDRESS='john.d@mydomain.com' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:07:17.487

尝试这个：

```
SELECT
    E.EmployeeName,
    E.EmailAddress,
    B.BranchID,
    B.BranchMgr + ' ' + B.opMgr ColName
FROM EmployeesInfo E
    INNER JOIN BranchInfo B
        ON E.BranchID = B.BranchID
WHERE E.EMAILADDRESS='john.d@mydomain.com' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:46:56.353

> 它应该将 branchinfo 表中的 OpMgr 和 BranchMgr 列显示到EmployeeInfo 相关分支的**单个列中**

```
DECLARE @opMgr VARCHAR(100), @BranchMgr VARCHAR(100)

SELECT @opMgr  = b.opMgr, @BranchMgr =  b.BranchMgr
FROM EmployeeInfo e
JOIN BranchInfo b ON e.BranchID = b.BranchID
WHERE e.EMAILADDRESS='john.d@mydomain.com'

SELECT details 
FROM ( VALUES (@opMgr),(@BranchMgr)) 
AS t(details) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:06:31.730

你可以`JOIN`这样

```
SELECT b.opMgr + b.BranchMgr as Branch
FROM EmployeeInfo e
JOIN BranchInfo b ON b.BranchID = BranchID
WHERE e.EMAILADDRESS='john.d@mydomain.com' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:07:32.313

尝试这个，

```
SELECT BranchInfo.OpMgr, BranchInfo.BranchMgr
  FROM EmployeesInfo
 INNER JOIN BranchInfo ON EmployeesInfo.BranchID = BranchInfo.BranchID
 WHERE AND EMPLOYEESINFO.EMAILADDRESS = 'john.d@mydomain.com' 
```

# android - Android：在实现 AnimationListener 时动画正在重复

> ID：14727446
> 
> 赞同：1
> 
> 时间：2013-02-06T11:03:13.207
> 
> 标签：android, android-animation

在我的 Android 应用程序中，我想在另一个 View 动画完成后在 View 上启动一个动画。所以我使用了AnimationListener并使用了override方法onAnimationEnd()。但问题是当第一个视图的动画完成时，第一个和第二个视图都开始动画。这意味着第一个视图与第二个动画重复它的动画。

```
 final Animation anim = AnimationUtils.loadAnimation(Home.this,R.anim.myanimation);
    anim.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }
        @Override
        public void onAnimationEnd(Animation animation) {

                image_2.startAnimation(anim);
            }

                    @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }});
   image_1.startAnimation(anim); 
```

我希望 image_2 的动画将在 image_1 的动画之后开始。但是 image_1 不会重复它的动画。动画将按顺序发生。怎么做？

我的动画代码如下：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"   android:interpolator="@android:anim/accelerate_interpolator"    android:fillEnabled="true"  android:fillAfter="true"   android:startOffset="5000">

        <scale android:fromXScale="1.0" android:toXScale="0.0"   android:fromYScale="1.0"    android:toYScale="1.0"      android:pivotX="100%"  android:duration="8000"   />

    </set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:13:39.637

这是因为您应该需要实现两个侦听器。当您最初调用 image2 动画时，动画会发生，并且在动画侦听器结束后动画会再次发生，因此动画将发生两次。因此，为两个图像视图设置两个侦听器和两个单独的动画可能会解决您的问题。 .

# wpf - 如何将 WPF 画布（或类似）绑定到行列表

> ID：14727447
> 
> 赞同：0
> 
> 时间：2013-02-06T11:03:16.503
> 
> 标签：wpf, canvas, binding, line, observablecollection

我有一个`DataGrid`可能包含 1000 行的行。我想在它的侧面有一个大约 15 像素宽的窄画布面板，以显示与`DataGrid`.

就像是 ：

![在此处输入图像描述](../Images/e8775e15c437a7c9d3fd3c7088afba59.png)

示例问题：我知道 1400 行中的第 5、60、700 行有错误。如何以编程方式将画布项目设置为线条，同时将它们拆分，以便它们与`DataGrid`. IE。60到700之间会有很大的距离。

我知道我可以通过某种比例来做到这一点。即如果画布的高度是 500，我可以做 1400/500 = 比率。然后，如果我想绘制第 700 行，我只需将其除以比率。

我想知道我该怎么做：

1.  从后面的代码中添加行，但更好地绑定到某种`ObservableCollection`行。
2.  `canvas`如何为每行指定距顶部的高度。

# regex - Notepad++ RegEx：在一个巨大的文本文件中搜索多个单词

> ID：14727448
> 
> 赞同：7
> 
> 时间：2013-02-06T11:03:16.513
> 
> 标签：regex, notepad++

我有一个包含大约 4000 行文本的文本文件。我需要搜索“那里”和“何时”这两个词。我尝试了一些正则表达式类型的东西，但它们都做错了或者根本没有被检测到。那么我将如何搜索这两个词，它会显示这两个词的所有匹配项？

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T11:06:32.953

使用这个正则表达式

`(there|when)`

并确保您启用了“正则表达式”单选按钮。

你也可以使用

`there|when`

如果您不需要使用参考进行搜索和替换。

# tcl - 将 csh 表达式更改为 tcl

> ID：14727449
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:03:19.413
> 
> 标签：tcl, csh

我需要将以下代码从 shell 更改为 tcl。

```
if (!$?OSTYPE && $?OSREV && $?HOST))then 
```

我需要知道如何组合所有和条件，然后在 tcl 中否定组合结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:23:52.283

在 csh 中，`$?FOO`是一个布尔值，表示是否`FOO`设置了环境变量。在 Tcl 中，您使用[`[info exists ::env(FOO)]`](http://www.tcl.tk/man/tcl8.6/TclCmd/info.htm#M14)来表示相同的东西（当然，其他变量也可以通过这种方式进行测试，前提是您可以命名它们）。[其他](http://www.tcl.tk/man/tcl8.6/TclCmd/expr.htm)一切都更加[相似](http://www.tcl.tk/man/tcl8.6/TclCmd/if.htm) 。

# linux - 如何查找安装在 ubuntu 中的软件版本

> ID：14727450
> 
> 赞同：7
> 
> 时间：2013-02-06T11:03:31.590
> 
> 标签：linux, shell, ubuntu, command-line, ubuntu-12.04

我可以在控制台中使用任何通用命令，例如如何查找 mysql 版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T11:19:11.910

您可以使用`dpkg`获取该信息：

```
dpkg -l mysql-server | grep -E "^ii" | tr -s ' ' | cut -d' ' -f3 
```

这将为您提供`mysql-server`软件包的安装版本。

如果一个包没有安装，它会打印出“No packages found matching mysql-server”。反而。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T11:05:36.130

几乎所有可以在命令行中运行的程序都有一个`--version`选项。

例如：

```
git --version
ls --version 
```

不过，它们的输出格式远不及标准。有些使解析更容易，有些（通常）包含一些关于许可证的信息。

# jquery - 带有选择摘要的逐步复选框过程

> ID：14727451
> 
> 赞同：1
> 
> 时间：2013-02-06T11:03:35.047
> 
> 标签：jquery, wordpress

我正在尝试创建一个 3 步流程，其中有人通过复选框在第 1 步和第 2 步中选择他们想要的项目，然后在第三步中显示这些选择的摘要。

这就是我的 html 的设置方式：

```
<form id="customisesystem" method="post" action="">
  <div id="first-step">
    <div class="steps">
      <p><b>Step 1 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area">
      <div id="customise-title">
        <p><b>1\. Hardware &amp; software options</b> <span>Please choose one or more of the following</span></p>
      </div>
      <div id="customise-area">
        <?php $posts = get_field('options');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p>
            <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
            Select</p>
          <div class="clear"></div>
        </div>
        <?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
      </div>
    </div>
  </div>
  <!-- end first-step -->

  <div id="second-step">
    <div class="steps">
      <p><b>Step 2 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area">
      <div id="customise-title">
        <p><b>2\. Accessories</b> <span>Please choose one or more of the following</span></p>
      </div>
      <div id="customise-area">
        <?php $posts = get_field('accessories');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
        <?php if ($items&1) { ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p>
            <input type="checkbox" name="accessories[]" value="<?php the_title(); ?>">
            Select</p>
          <div class="clear"></div>
        </div>
        <?php } else { ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p>
            <input type="checkbox" name="accessories[]" value="<?php the_title(); ?>">
            Select</p>
          <div class="clear"></div>
        </div>
        <?php } ?>
        <?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
      </div>
    </div>
  </div>
  <!-- end second-step -->

  <div id="third-step">
    <div class="steps">
      <p><b>Step 3 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area-3">
        <p>Summary</p>

        <div id="customise-area-3-child">
            <input type="submit" name="submit" id="submit" value="submit" />
        </div>
    </div>
  </div>
  <!-- end third-step -->

</form> 
```

这是我的 jquery 用于逐步完成该过程：

```
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
jQuery(document).ready(function( $ ) {
            // init
            $('#customisesystem > div')
                .hide()
                .prepend(navHTML);
            $('#first-step .prev').remove();
            $('#last-step .next').remove();

            // show first step
            $('#first-step').show();

            $('a.next').click(function(){
                var whichStep = $(this).parent().parent().attr('id');

                if( whichStep == 'first-step' )
                {
                    // validate first-step
                }
                else if( whichStep == 'second-step' )
                {
                    // validate second-step
                }
                else if( whichStep == 'last-step' )
                {
                    // validate last-step
                }

                $(this).parent().parent().hide().next().show();
            });

 $('a.back').click(function(){
          var whichStep = $(this).parent().parent().attr('id');
          if(whichStep == "first-step"){
            $(".customise").hide();
            $(".entire_product").show();
          }
          else{
            $(this).parent().parent().hide().prev().show();
          }
 });
        }); 
```

* * *

这是不起作用的部分：

```
jQuery(document).ready(function( $ ) 
{
   var summary = $('#customise-area-3 p').get(0);

   $('input[type=checkbox][name="hardware[]"]:checked').each(function(k,v) {
    //Retrieve the value of the checkbox.
    var checkboxValue = v.val();

    //Add the checkbox value to the summary area:
    summary[0].innerHTML += checkboxValue + '<br />';
   });
}); 
```

目前，当我进行硬件选择并进入第三步时，它不会在摘要中显示任何信息。我哪里错了？

这是工作链接 - [teamworksdesign.com/clients/rogue/system/dc-stimulator](http://teamworksdesign.com/clients/rogue/system/dc-stimulator)单击右侧的“获取报价”。这将显示第 1 步，单击下一步进入第 2 步，然后单击下一步进入第 3 步（即摘要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:16:09.083

如果所有“步骤” div 都给出`class="step"`，事情会变得更容易，从而允许使用 选择它们`jQuery(".step")`，并避免每个都有唯一 id 的需要。

通过在最后一步中包含执行验证的“验证”按钮来回答您的具体问题。如果最后一步有效：

*   创建并显示摘要文本
*   “验证”按钮被隐藏，并显示“提交”按钮。

最后一个功能确保在验证最后一步之前无法提交表单，并且用户可以在刷新屏幕之前阅读摘要。

这是代码（带有注释）：

```
//create nav wrapper
var $nav = $('<div/>').addClass('prev-next');

//create Prev button, attach click handler and append to nav wrapper
$('<a class="prev" href="#">Back</a>').on('click', function () {
    $(this).closest(".step").hide().prev(".step").show();
}).appendTo($nav);

//create Next button, attach click handler and append to nav wrapper
$('<a class="next" href="#">Next</a>').on('click', function () {
    var $step = $(this).closest(".step");
    if (validate($step)) {
        $step.hide().next(".step").show();
    }
}).appendTo($nav);

//In one long jQuery chain ...
//* prepend nav to each step div
//* hide all steps except the first
//* convert first 'Back' link and last 'Next' link to spans.
$(".step").prepend($nav).hide()
    .filter(":first").show().find("a.prev").after('<span>Back</span>').remove().end().end()
    .filter(":last").find("a.next").after('<span>Prev</span>').remove();

//Last step doesn't have a "Next" button but does have a "Validate" button
//and a submit button, which is hidden until the last step is validated,
//thus allowing the Summary message to be shown.
//Otherwise, the summary message would appear only for a brief moment.
var $validateButton = $("#validate").on('click', function() {
    if( validate( $(".step:last") ) ) {
        //var summary = [];
        var summary = ["Test Message"];//for debugging
        $('input[type=checkbox][name="hardware[]"]:checked').each(function(i, ch) {
            summary.push($(ch).val());
        });
        $('#customise-area-3 p').html(summary.join('<br/>'));
        $(this).hide();
        $("input[name='submit']").show();
    }
});

//Unfortunately, hidden form elements are not inlcuded in the submission,
//so all steps must be shown before the form is submitted.
var $submitButton = $("input[name='submit']").on('submit', function() {
    $(".step").show();
    return true;
});

function validate($step) {
    //var valid = false;
    var valid = true;//for debugging

    //Set the last section's validate and submit buttons to their "unvalidated" states.
    $validateButton.show();
    $("input[name='submit']").hide();

    //Perform validation
    switch ($step.index(".step")) {//index-origin is zero
        case 0:
            //validate step 1 here
            //if valid, set `valid` to true 
        break;
        case 1:
            //validate step 2 here
            //if valid, set `valid` to true 
        break;
        case 2:
            //validate step 3 here
            //if valid, set `valid` to true 
        break;
    }
    return valid;//Important - determines behaviour after validate() returns.
} 
```

这是一个[演示](http://jsfiddle.net/za3Nk/5/)

你会看到我对 HTML 做了一些其他的小修改，特别是在最后一步中添加了验证按钮。

## 编辑

如果最后一步仅用于显示摘要并且不需要对其自身进行验证，那么事情就更简单了：

```
//Create nav wrapper
var $nav = $('<div/>').addClass('prev-next');

//Create Prev button, attach click handler and append to nav wrapper
$('<a class="prev" href="#">Back</a>').on('click', function() {
    $(this).closest(".step").hide().prev(".step").show();
}).appendTo($nav);

//Create Next button, attach click handler and append to nav wrapper
$('<a class="next" href="#">Next</a>').on('click', function() {
    $('#summary_text').html(makeSummary());
    var $step = $(this).closest(".step");
    if (validate($step)) {
        $step.hide().next(".step").show();
    }
}).appendTo($nav);

//In one long jQuery chain ...
//* prepend nav to each step div
//* hide all steps except the first
//* convert first 'Back' link and last 'Next' link to spans.
var $steps = $(".step").prepend($nav).hide()
    .filter(":first").show().find("a.prev").after('<span>Back</span>').remove().end().end()
    .filter(":last").find("a.next").after('<span>Prev</span>').remove().end().end();

//Set step titles
$steps.each(function(i, step) {
    $(step).find(".step-title").text('Step ' + (i+1) + ' of ' + $steps.length);
});

//Unfortunately, hidden form elements are not inlcuded in the submission,
//so all steps must be shown before the form is submitted.
var $submitButton = $("input[name='submit']").on('submit', function() {
    $steps.show();
    return true;
});

function validate($step) {
    //var valid = false;
    var valid = true;//for debugging

    //Perform validation
    switch ($step.index(".step")) {//index-origin is zero
        case 0:
            //Validate step 1 here
            //if valid, set `valid` to true 
        break;
        case 1:
            //Validate step 2 here
            //if valid, set `valid` to true 
        break;
        case 2:
            //No validatation required
        break;
    }
    return valid;//Important - determines behaviour after validate() returns.
}

function makeSummary() {
    var summary = [];
    $steps.not(":last").each(function(i, step) {
        $step = $(step);
        summary.push('<h4>' + $step.data('name') + '</h4>');
        var $ch = $step.find('input[type="checkbox"]:checked');
        if(!$ch.length) {
            summary.push('<p>No items selected</p>');
        }
        else {
            $ch.each(function(i, ch) {
                summary.push('<p>' + $(ch).val() + '</p>');
            });
        }
    });
    return summary.join('');
} 
```

[演示](http://jsfiddle.net/za3Nk/7/)

在演示中，您会发现 HTML 和 CSS 的更多模块。

备注：

*   除非我错过了什么，javascript 现在应该自动响应更多/更少的步骤。因此，如果客户改变主意并想将硬件和软件拆分为单独的步骤，您只需更改 HTML。（哦，是的，还有`validation()`函数——这是一个特例）。
*   “Step X of Y”文本现在是自动生成的，只需要`<h2 class="step-title"></h2>`在 HTML 中。
*   现在`data-name`在第一步和第二步 div 中需要一个属性。这在摘要中使用。
*   摘要已格式化；使用`<p>`元素而不是`<br>`; 包括`<h4>`节标题。
*   “验证”按钮现在从最后一步中删除。
*   各种附加/修改的 CSS 指令。

# php - PEAR 从 Spreadsheet_Excel_Writer-0.9.2 升级到 Spreadsheet_Excel_Writer-0.9.3

> ID：14727453
> 
> 赞同：0
> 
> 时间：2013-02-06T11:03:47.897
> 
> 标签：php, pear

命令行中的命令用于升级电子表格模块。

> 从 Spreadsheet_Excel_Writer-0.9.2 到 Spreadsheet_Excel_Writer-0.9.3。

我也想知道，两者之间有什么大的区别吗

Spreadsheet_Excel_Writer-0.9.2 和 Spreadsheet_Excel_Writer-0.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:07:28.557

您会发现更改日志在[此处](http://pear.php.net/package/Spreadsheet_Excel_Writer/download/)，并且该页面还为您提供了安装 0.9.3 版本的命令行

# javascript - TypeScript 中的赋值运算符重载

> ID：14727454
> 
> 赞同：2
> 
> 时间：2013-02-06T11:03:49.303
> 
> 标签：javascript, typescript, ecmascript-5

我正在编写一组使用继承来维护“类型”层次结构的 TypeScript 类（因为需要更好的短语）。

比如说我有一个基类......

```
class Parent {
} 
```

然后我从中派生出其他类...

```
class Child extends Parent {
} 
```

到目前为止一切顺利......但是可以说，现在我希望能够直接为我的 Child 类分配一些东西，如下所示：

```
private xyz: Child = "Foo Bar"; 
```

TypeScript 当前抛出编译器/语法错误...

> *无法将字符串转换为子级*

如果我可以将字符串分配给 String （这同样只是一个原型，就像我的 Child 类一样），我该如何重载我的类的赋值运算符以接受字符串？

**编辑：**我试过这个......

```
class Child extends Parent implements String {
} 
```

...仍然，它没有达到预期的效果。

从 C# 背景说，我想我正在尝试实现相当于...

```
public static implicit operator Child(string value
{
    return new Child(value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:21:33.950

在基于类的语言中，您通常会在构造函数中接受参数，如下所示：

```
class Parent {
}

class Child extends Parent {
    constructor(private someProp: string) {
        super();
    }
}

var child = new Child("Foo Bar"); 
```

# sql-server-2008 - 在 SQL Server 2008 R2 中检测一段时间后没有操作的脚本

> ID：14727455
> 
> 赞同：0
> 
> 时间：2013-02-06T11:03:51.153
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一个关于 SQL SERVER 2008 R2 的问题。

我有两个相互连接的数据库，它们交换信息，但由于某些特殊原因，它有时会停止工作。

1.  有没有办法找出 30 分钟后什么时候没有更多动作（任何表格中都没有写任何内容）？
2.  是否有一个脚本可以识别这个并执行另一个我已经拥有的脚本，这样我就不必手动运行它。
3.  如果最后一个是 30 多分钟前，它可以检查时间戳吗？

无论如何谢谢尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:13:47.647

您可以使用 SQL AGENT 运行 SQL 脚本来检查您最近更新的列；安排一个每 15 分钟运行一次的作业，如果它发现该条件为真，则执行下一个脚本。

# c# - WebClient 下载特定文件类型 (*.msp) 时出现异常

> ID：14727456
> 
> 赞同：0
> 
> 时间：2013-02-06T11:03:51.807
> 
> 标签：c#, iis, .net-3.5, webclient

我正在从 localhost 下载一个 .msp 文件

```
WebClient webClient = new WebClient();
webClient.DownloadFile("http://localhost/Installer.msp", @"d:\Installer.msp"); 
```

它抛出异常：“远程服务器返回错误：（404）未找到。”

对于 *.msi 等其他文件类型，我没有遇到此异常。我有 IIS V 7.5

我猜 IIS 不允许下载 (*.msp) 之类的特定文件类型？如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:36:14.453

谢谢富尔坎。当我在 IIS 7 中为这个特定扩展添加 MIMEType 时，问题解决了。作为文件扩展名 -> .msp 和 MIME 类型 -> 作为 application/octet-stream

# sql - 这个警告是什么意思？

> ID：14727457
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:03:56.550
> 
> 标签：sql, sql-server

列插入或更新与先前的 CREATE RULE 语句施加的规则冲突。该声明被终止。冲突发生在数据库“Personneli”、表“dbo.tblPersonnelFighter”、列“StartValidDate”中。该语句已终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:06:11.230

这意味着数据库`StartValidDate`表`tblPersonellFighter`中的列存在约束。`Personeli`您的 SQL 不符合此约束的规则，因此失败。

# python - Pandas read_csv()：将 0 保持为 0（不将其转换为 NaN）

> ID：14727469
> 
> 赞同：1
> 
> 时间：2013-02-06T11:04:30.557
> 
> 标签：python, pandas, nan

我正在尝试读取一个 csv 文件，其中一个示例：

```
datetime,check,lat,lon,co_alpha,atn,status,bc
2012-10-27 15:00:59,2,0,0,2.427,,,
2012-10-27 15:01:00,2,0,0,2.407,,,
2012-10-27 15:02:49,2,0,0,2.207,-17.358,0,-16162
2012-10-27 15:02:50,2,0,0,2.207,-17.354,0,8192
2012-10-27 15:02:51,1,0,0,2.207,-17.358,0,-8152
2012-10-27 15:02:52,1,0,0,2.207,-17.358,0,648
2012-10-27 15:06:03,0,51.195076,4.444407,2.349,-17.289,0,4909
2012-10-27 15:06:04,0,51.195182,4.44427,2.344,-17.289,0,587
2012-12-05 09:21:34,,,,,42.960,1,16430
2012-12-05 09:21:35,,,,,42.962,1,3597 
```

我遇到的问题是，在只有整数的列中，0 被转换为 NaN（例如列“检查”和“状态”，这些是只有整数的列，但该列被读取为浮点数，因为存在真正的缺失值） . 但我只希望将空值转换为 NaN，而不是零。

这就是我得到的：

```
>>> pd.read_clipboard(sep=',', parse_dates=True, index_col=0)
                     check        lat       lon  co_alpha     atn  status     bc
datetime                                                                        
2012-10-27 15:00:59      2   0.000000  0.000000     2.427     NaN     NaN    NaN
2012-10-27 15:01:00      2   0.000000  0.000000     2.407     NaN     NaN    NaN
2012-10-27 15:02:49      2   0.000000  0.000000     2.207 -17.358     NaN -16162
2012-10-27 15:02:50      2   0.000000  0.000000     2.207 -17.354     NaN   8192
2012-10-27 15:02:51      1   0.000000  0.000000     2.207 -17.358     NaN  -8152
2012-10-27 15:02:52      1   0.000000  0.000000     2.207 -17.358     NaN    648
2012-10-27 15:06:03    NaN  51.195076  4.444407     2.349 -17.289     NaN   4909
2012-10-27 15:06:04    NaN  51.195182  4.444270     2.344 -17.289     NaN    587
2012-12-05 09:21:34    NaN        NaN       NaN       NaN  42.960       1  16430
2012-12-05 09:21:35    NaN        NaN       NaN       NaN  42.962       1   3597 
```

因此，在“检查”和“状态”列中，有很多 NaN。在“纬度”和“经度”列中，0 不会转换为 NaN。

*   使用`na_values=''`and`keep_default_na=False`并没有帮助。有没有办法指定不将 int 0 转换为 NaN？或者这是一个错误？

*   `dtype`我可以使用关键字将特定列的 dtype 指定为 int 。这将 0 保留为 0，但问题是这些列还包含真正的 NaN（空值）。因此，在这种情况下，这些值也会转换为 0，因为在 int 列中不能有 NaN。出于这个原因，我必须将所有列保留为浮点数。

* * *

编辑：升级到 pandas 0.10.1 后，即使没有指定`keep_default_na`and ，它也能按预期工作`na_values`：

```
>>> pd.read_clipboard(sep=',', parse_dates=True, index_col=0)
                     check        lat       lon  co_alpha     atn  status     bc
datetime                                                                        
2012-10-27 15:00:59      2   0.000000  0.000000     2.427     NaN     NaN    NaN
2012-10-27 15:01:00      2   0.000000  0.000000     2.407     NaN     NaN    NaN
2012-10-27 15:02:49      2   0.000000  0.000000     2.207 -17.358       0 -16162
2012-10-27 15:02:50      2   0.000000  0.000000     2.207 -17.354       0   8192
2012-10-27 15:02:51      1   0.000000  0.000000     2.207 -17.358       0  -8152
2012-10-27 15:02:52      1   0.000000  0.000000     2.207 -17.358       0    648
2012-10-27 15:06:03      0  51.195076  4.444407     2.349 -17.289       0   4909
2012-10-27 15:06:04      0  51.195182  4.444270     2.344 -17.289       0    587
2012-12-05 09:21:34    NaN        NaN       NaN       NaN  42.960       1  16430
2012-12-05 09:21:35    NaN        NaN       NaN       NaN  42.962       1   3597 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:09:25.213

您必须首先设置`keep_default_na`为`False`：

```
df = pd.read_clipboard(sep=',', index_col=0, keep_default_na=False, na_values='')

In [2]: df
Out[2]: 
                     check        lat       lon  co_alpha     atn  status     bc
datetime                                                                        
2012-10-27 15:00:59      2   0.000000  0.000000     2.427     NaN     NaN    NaN
2012-10-27 15:01:00      2   0.000000  0.000000     2.407     NaN     NaN    NaN
2012-10-27 15:02:49      2   0.000000  0.000000     2.207 -17.358       0 -16162
2012-10-27 15:02:50      2   0.000000  0.000000     2.207 -17.354       0   8192
2012-10-27 15:02:51      1   0.000000  0.000000     2.207 -17.358       0  -8152
2012-10-27 15:02:52      1   0.000000  0.000000     2.207 -17.358       0    648
2012-10-27 15:06:03      0  51.195076  4.444407     2.349 -17.289       0   4909
2012-10-27 15:06:04      0  51.195182  4.444270     2.344 -17.289       0    587
2012-12-05 09:21:34    NaN        NaN       NaN       NaN  42.960       1  16430
2012-12-05 09:21:35    NaN        NaN       NaN       NaN  42.962       1   3597 
```

从文档字符串[`read_tables`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.io.parsers.read_table.html)：

> `keep_default_na`: bool, default True
>      如果`na_values`指定并且`keep_default_na`是`False`默认`NaN`
>     值被覆盖，否则它们被附加到
> 
> `na_values`: list-like or dict, default识别为 NA/NaN 的`None`
>     **附加字符串。**如果 dict 通过，特定的每列 NA 值

# jquery - jQuery.parseJSON 在 wordpress 自定义 php 页面中不起作用

> ID：14727472
> 
> 赞同：0
> 
> 时间：2013-02-06T11:04:39.633
> 
> 标签：jquery, ajax, json, wordpress

我收到一个 base64 编码的 json 以响应 ajax 调用。然后我解码base64并得到json。在此之后出现问题，在使用 jQuery.parseJSON() 函数解析此 json 时，我无法将其提取到数组中。

我将它转换为 json 和 base64 的 2D 数组，这两个过程对我来说都是强制性的。

这是代码。

```
jQuery.post("http://mydomain.com/contorller/functionname", {}, function(response) {
            if(response != ""){
                var series_json =  decode64(response); 
                var seriesdata =    jQuery.parseJSON(series_json);
                //var sd= seriesdata.series;
                alert(seriesdata["series"]["seriesid"]);
        }
    }); 
```

decode64 清楚地将响应转换为 json。有没有人可以帮助我克服这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:16:28.793

实际上，您可以让 jQuery 解析 json 并通过简单地将“json”作为最后一个参数放入 get 或 post 函数来完成所有工作。有关示例，请参见这两个页面：

HTML/JS [http://home.edgemontgeek.com/dev/stackoverflow/14727472/](http://home.edgemontgeek.com/dev/stackoverflow/14727472/)

JSON [http://home.edgemontgeek.com/dev/stackoverflow/14727472/students.json](http://home.edgemontgeek.com/dev/stackoverflow/14727472/students.json)

```
 $.get("students.json", function(data) {
        $.each(data, function(index,value) {
            $("#console").append("<p>" + value.name + " got a " + value.grade + "</p>");
        });
    }, "json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:03:13.740

尝试`JSON.parse(yourElement)`改用...

# php - 显示数据库中的图像？

> ID：14727473
> 
> 赞同：-5
> 
> 时间：2013-02-06T11:04:39.937
> 
> 标签：php, mysql

我正在尝试显示数据库中的图像。但是什么都不会显示。我的代码如下： 在照片数据库中，我创建了一个名为：photo 的表，该表中有两个字段 id 和 photo。Id 是自动递增的。照片中的 .image 位置已保存。

```
<?php
$con = mysql_connect("localhost","root","");
$db = mysql_select_db("photo",$con);

$sql_image = "select * from photo";
$sql_select =  mysql_query($sql_image);

while($data = mysql_fetch_array($sql_select)) {
    echo '<img src="/images/'.$data->photo.'"/>';
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:06:17.820

`mysql_fetch_array`返回一个数组，而不是一个对象。用于`$data['photo']`访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:06:47.143

代替`echo '<img src="/images/'.$data->photo.'"/>';`

至`echo '<img src="/images/".$data[photo]."/>';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:07:14.327

代替

```
while($data = mysql_fetch_array($sql_select)) {
        echo '<img src="/images/'.$data->photo.'"/>';
    } 
```

尝试这个：

```
while($data = mysql_fetch_array($sql_select)) {
    echo '<img src="/images/'.$data['photo'].'"/>';
} 
```

# ios - 是否有一个可访问的库函数来获取一组 UITouches 的质心？

> ID：14727475
> 
> 赞同：0
> 
> 时间：2013-02-06T11:04:56.587
> 
> 标签：ios, cocoa-touch

来自[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)：如果 a`UIGestureRecognizer`正在跟踪多次触摸，`locationInView:`将（通常）返回：

> ...手势中涉及的触摸的质心。

据我所知，如果您不使用手势识别器而是直接通过`touchesBegan:withEvent:`等跟踪触摸，则只能向每个人`UITouch`询问`touches`其`locationInView:`.

我显然可以遍历所有的触摸并自己计算质心，但我猜肯定有一些 iOS 库函数可以做到这一点。我是对的，这个功能可以访问吗？或者，是否有任何其他方法可以获得相同的功能，或者我应该停止抱怨并自己计算质心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:10:24.643

AFAIK，Apple 没有提供任何内容。写的很直接。。。

```
// returns (0,0) if touches is nil or empty
-(CGPoint) centroidOfTouches:(NSSet *)touches inView:(UIView *)view
{
    CGPoint centroid = CGPointZero, 
    curTouchPoint;
    for (UITouch *touch in touches) {
        curTouchPoint = [touch locationInView:view];
        centroid.x += curTouchPoint.x;
        centroid.y += curTouchPoint.y;
    }
    centroid.x /= [touches count];
    centroid.y /= [touches count];
    return centroid;
} 
```

# sql - 如何在火鸟表中找到正在使用生成器的字段列表？

> ID：14727477
> 
> 赞同：1
> 
> 时间：2013-02-06T11:05:02.413
> 
> 标签：sql, firebird

如何从使用生成器进行自动增量的 firebird 表中选择字段名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:31:24.620

你不能。目前（从 Firebird 2.5 开始）Firebird 中没有自动增量字段，您必须自己使用触发器来模仿它们。因此，没有可用于关联序列（又名生成器）和字段的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-27T06:02:11.693

好吧，这很 HACKY，效率不高，但它非常接近。

这将使用每个表的生成器返回字段的 FIRST 标识字段。但这确实假设您的触发器看起来像

```
 NEW.My_ID = GEN_ID(My_ID_Generator,1) 
```

如果你有一个空检查它也可以工作（这就是你需要第二个嵌套选择的原因）

```
 If ((NEW.MY_ID) is NULL) then NEW.My_ID... 
```

您可以将其设为存储过程或视图。

```
Select P.TableName,
       CASE WHEN position('NEW.' in P.Body)>0 THEN
            substring(P.Body from
              (position('NEW.' in P.Body)+4)
            )
            ELSE p.Body
       END As IdentityName  
FROM
  (
  SELECT
      B.TableName,
      substring(B.Body from (position('NEW.' in B.Body)+4) for
         position('=GEN_ID' in B.Body)-(position('NEW.' in B.Body)+4)
      ) as Body
  FROM
     (
      SELECT RDB$RELATION_NAME AS TableName,
             UPPER(
               replace (
                 replace(
                   replace(
                      replace(t.RDB$TRIGGER_SOURCE,' ',''), ascii_char(13), ''
                   ), ascii_char(10), ''
                 ), ascii_char(9), ''
               )
             ) as Body
        FROM RDB$TRIGGERS t
        WHERE ((rdb$SYSTEM_FLAG IS NULL) or (t.rdb$SYSTEM_FLAG=0)) AND
             (RDB$TRIGGER_TYPE=1) and
             ((RDB$TRIGGER_INACTIVE = 0) OR (RDB$TRIGGER_INACTIVE IS NULL) ) and
             (( RDB$TRIGGER_SOURCE like '%GEN_ID%') and (RDB$TRIGGER_SOURCE like '%NEW.%'))
      ) B
) P 
```

结果如下所示：

```
 TABLENAME  IDENTITYNAME 
 ---------  ----------- 
 My_Table   My_ID 
```

# android - 使用片段时如何将首选项重置为默认值

> ID：14727478
> 
> 赞同：1
> 
> 时间：2013-02-06T11:05:03.470
> 
> 标签：android, android-fragments, sharedpreferences, fragment, preferences

我有重置偏好的功能

看起来像这样

```
Editor editor = settings.edit();
editor.clear();
editor.commit();
PreferenceManager.setDefaultValues(Prefs.this, R.xml.preferences, true); 
```

现在我可以使用 editor.clear() 清除设置；但我不知道如何设置默认值，因为我没有一个preferences.xml 文件，我开始使用像[http://developer.android.com/guide/topics/ui/settings这样的标题和首选项片段.html#Fragment](http://developer.android.com/guide/topics/ui/settings.html#Fragment)并且我没有一个preferences.xml 文件，每个片段都有3个文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:23:21.733

如果我理解正确，您使用片段作为显示偏好的方法。可能是因为您使用的是两窗格首选项布局。但是，这仅意味着您以这种方式*显示*它们。

是的，您有 3 个 XML 文件，每个文件都包含每个片段的首选项。但是即使您没有使用片段，您也可以拥有这样的 3 个文件。假设您的首选项文件名为`R.xml.pref1`,`R.xml.pref2`和`R.xml.pref3`. 您像以前一样重置首选项，您只需为每个首选项文件执行此操作。所以，只需调用：

```
PreferenceManager.setDefaultValues(Prefs.this, R.xml.pref1, true);
PreferenceManager.setDefaultValues(Prefs.this, R.xml.pref2, true);
PreferenceManager.setDefaultValues(Prefs.this, R.xml.pref3, true); 
```

你完成了。当然，您可以只重置特定文件的首选项。

# javascript - 如何获得关于 livefyre 的评论数？

> ID：14727481
> 
> 赞同：3
> 
> 时间：2013-02-06T11:05:11.303
> 
> 标签：livefyre, javascript, php, html, html-parsing, livefyre

我想在我自己的数据库中获取[livefyre](/questions/tagged/livefyre "显示标记为“livefyre”的问题") 评论数，以便我可以按评论数对我的文章进行排序。

每次在我的网站上阅读一个页面时，我都想询问 Livefyre 某个页面有多少评论，然后使用该计数更新数据库。

我试图获取页面的来源，但它似乎没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:22:51.720

Atish 的回答是正确的，因为这是通知页面上的 JavaScript 评论计数的最佳方式，以便您可以通过客户端分析进行跟踪或更新页面上呈现计数的另一个位置。

从服务器端，您可以对任何对话使用“init”请求来检索公共评论计数。

*   文档：[http ://answers.livefyre.com/developers/api-reference/#link-collection-info-plus](http://answers.livefyre.com/developers/api-reference/#link-collection-info-plus)
*   示例：[http](http://bootstrap.livefyre.com/bs3/livefyre.com/4/NTg0/init) ://bootstrap.livefyre.com/bs3/livefyre.com/4/NTg0/init （查找`numVisible`）

最后，您可以使用 Livefyre Activity Stream API 获取社区活动的实时流水线，您可以使用它来保持最新的计数。

*   文档：[http ://answers.livefyre.com/developers/advanced-topics/activity-stream/](http://answers.livefyre.com/developers/advanced-topics/activity-stream/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:16:51.757

在此处检查 Livefyre 评论的自定义实现

[https://github.com/Livefyre/livefyre-docs/wiki](https://github.com/Livefyre/livefyre-docs/wiki)

你打电话时

```
 fyre.conv.load({"network": self.network,
                                 authDelegate: self.authDelegate
                               }, [ self.config ], self.lfready) 
```

您需要在 self.lfready 中传递回调事件，即

```
 app.on('commentCountUpdated', self.onCommentCountUpdated); 
```

这个 'commentCountUpdated' 是 livefyre 回调事件，它返回评论计数的数量。

```
 self.lfready = function(app) {
            //Wrap in try catch because Livefyre catches errors in the callback (seemingly)
            //And we want to catch and log ourselves.
            try{
                $.log("Livefyre is ready, attaching custom handlers");
                //Attach events
                app.on('commentCountUpdated', self.onCommentCountUpdated);
                //Only update to zero if the onCommentCount hasn't fired already
                self.$commentContainer.find("#lf_comment_stream").show();
            }catch(err){
                $.error("Livefyre failed to load", err);
                self.$commentContainer.hide();
            }
        };

self.onCommentCountUpdated = function(number){
            console.log("Latest count from LF stream event:" + number)

        }; 
```

# android - 重启接收器不起作用

> ID：14727482
> 
> 赞同：0
> 
> 时间：2013-02-06T11:05:19.607
> 
> 标签：android

AndroidManifest.xml 有以下代码：

```
<receiver 
    android:name=".receivers.RebootReceiver">
    <intent-filter >
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.HOME" />
    </intent-filter>            
</receiver> 
```

BroadcastReceiver 的代码：

```
public class RebootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent arg1) {
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        Toast.makeText(context, "1", Toast.LENGTH_LONG).show();
        DataSourceWrapper.getInstance().initializeAllNotifications();
    }

} 
```

但是重新启动后我没有收到任何消息。我犯了什么错误？安卓 4.0，HTC 感觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:07:49.447

你想添加 android manifest 权限

1.  将权限添加到android权限`**<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:08:15.520

删除类别。只有行动就足够了。

```
<action android:name="android.intent.action.BOOT_COMPLETED" /> 
```

并添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:13:15.417

您的意图过滤器是正确的：

**动作 android:name="android.intent.action.BOOT_COMPLETED**

删除类别主页后尝试

**使用权限：uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED**

重启手机后查看日志。

# sql - 解析数学函数 PL/SQL

> ID：14727486
> 
> 赞同：8
> 
> 时间：2013-02-06T11:05:26.680
> 
> 标签：sql, oracle, math, plsql

我需要解决 pl/sql 中的数学方程/函数。
oracle pl/sql 中有哪些数学运算/函数可以帮助我解决这样的数学函数：

`(3.5/(1+x))+(3.5/(1+x)^2)+(3.5/(1+x)^3)+(3.5/(1+x)^4)+(100/(1+x)^4)=101.55`

我想要一个函数来解析这个语句并找出`x`.

[像这样的东西是我正在寻找的](http://www.wolframalpha.com/input/?i=%283.5%2F%281%2Bx%29%29%2B%283.5%2F%281%2Bx%29%5E2%29%2B%283.5%2F%281%2Bx%29%5E3%29%2B%283.5%2F%281%2Bx%29%5E4%29%2B%28100%2F%281%2Bx%29%5E4%29%3D101.55)

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T13:01:07.330

唉，Oracle 数据库不是数学工具。它有很多[算术和统计函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions002.htm#CJAIBHGG)，但它没有能够解释方程的内置功能。对不起。

* * *

纯属巧合，Marc (AKA [Odie_63](https://forums.oracle.com/forums/profile.jspa?userID=695787) ) 最近发布了一个他用 PL/SQL 编写的逆波兰表示法计算器。它并不完全符合您的要求，但我提供了一个链接，以供将来可能偶然发现此线程的任何寻求者的利益。 [找到更多。](http://odieweblog.wordpress.com/2013/02/03/plsql-rpn-calculator/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T05:37:26.237

正如 APC 所说，没有内置功能可以做到这一点。但是您可以使用 PL/SQL 中的[WolframAlpha API](http://products.wolframalpha.com/api/explorer.html)：

```
declare
    v_equation varchar2(32767) := 
        '(3.5/(1+x))+(3.5/(1+x)^2)+(3.5/(1+x)^3)+(3.5/(1+x)^4)+(100/(1+x)^4)=101.55';
    v_escaped_url varchar2(32767);
    v_uri httpuritype;
    v_xml xmltype;
    v_count number := 1;
begin
    --Escape the URL.
    --I used chr(38) for ampersand, in case your IDE think it's a substitution variable
    v_escaped_url :=
        'http://api.wolframalpha.com/v2/query?appid=EQGHLV-UYUEYY9ARU'||chr(38)||'input='
        ||utl_url.escape(v_equation, escape_reserved_chars => true)
        ||chr(38)||'format=plaintext';

    --Create an HTTPURIType, and get the XML
    v_uri := httpuritype.createUri(v_escaped_url);
    v_xml := v_uri.getXML;

    --Complex solutions
    while v_xml.existsNode('/queryresult/pod[@title="Complex solutions"]/subpod['||v_count||']') = 1 loop
        dbms_output.put_line(v_xml.extract('/queryresult/pod[@title="Complex solutions"]/subpod['||v_count||']/plaintext/text()').getStringVal());
        v_count := v_count + 1;
    end loop;

    --Real solutions
    v_count := 1;
    while v_xml.existsNode('/queryresult/pod[@title="Real solutions"]/subpod['||v_count||']') = 1 loop
        dbms_output.put_line(v_xml.extract('/queryresult/pod[@title="Real solutions"]/subpod['||v_count||']/plaintext/text()').getStringVal());
        v_count := v_count + 1;
    end loop;
end;
/ 
```

结果：

```
x = -1.00006-0.996229 i
x = -1.00006+0.996229 i
x = -1.99623
x = 0.0308219 
```

这种方法有很多潜在的缺点。它会很慢，而且 API 不是免费的。我的示例有效，因为我使用了免费的开发者 appid，但它只适用于少量调用。

# xml - perl 中的简单 XML 操作

> ID：14727494
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:05:46.527
> 
> 标签：xml, perl

我知道 SO 不尊重这类问题，但我投入了大量时间尝试为 perl 选择最佳 XML 操作库，而且我发现几乎没有任何示例可以清楚地了解如何插入值和打印输出生成的 xml 到一个字符串变量。

这是我传入的没有值的 XML：

```
my $GetLibByNameAndVersionEnvelope = '<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
                                            <s:Body>
                                                <GetLibByNameAndVersion xmlns="LibService">
                                                    <name></name>
                                                    <version></version>
                                                </GetGridLibByNameAndVersion>
                                            </s:Body>
                                        </s:Envelope>'; 
```

我需要用测试值填充名称和版本节点。请提供一个关于如何执行此操作的示例，因此，我有一个包含所需 XML 的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:01:20.330

这是一个 SOAP 请求，对吧？

如果只是这个看起来总是一样的简单 SOAP 调用，我建议您使用**模板引擎**，放入**占位符**，并且根本不要使用 XML 模块。那会便宜很多。

您可以使用[Text::Template](https://metacpan.org/module/Text%3a%3aTemplate)之类的东西并将模板放在文件系统中的某个位置（这样您就可以将其添加到版本控制中），也可以简单地将其添加到该`DATA`部分的代码中，甚至作为简单的字符串变量。你当然可以把它作为这样的字符串放入：

```
my $ua = LWP::UserAgent->new;
my $res = $ua->post($url, <<"SOAP");
<s:Envelope>
  <s:Body>
    <GetLibByNameAndVersion xmlns="LibService">
      <name>$name</name>
      <version>$version</version>
    </GetGridLibByNameAndVersion>
  </s:Body>
</s:Envelope>
SOAP 
```

该示例不是很动态，如果 API 发生更改，您需要更改代码。但是对于一个非常简单的请求，这是最快的方法。如果您的 API 中只有一个相当简单的方法，我觉得有时这（或模板）是可行的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T12:06:51.210

**更新：**你知道 Perl 有一整套专门处理 SOAP 的模块吗？ [这篇文章](http://www.perl.com/pub/2001/01/soap.html)似乎是一个不错的起点。

`XML::Twig`[在他们的网站](http://www.xmltwig.org/)上有一个教程列表。我推荐[这个教程](http://www.xmltwig.org/xmltwig/tutorial/index.html)，它很老，但肯定会涵盖你感兴趣的所有东西。

此外，CPAN 文档几乎总是有很好的简单示例来说明如何使用模块。 [`XML::Twig`的文档当然可以](http://search.cpan.org/~mirod/XML-Twig-3.42/Twig.pm)。 [也是如此`XML::Simple`](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)。

这是[一篇关于使用`XML::Simple`](http://www.techrepublic.com/article/parsing-xml-documents-with-perls-xmlsimple/5363190).

# php - 警告：spl_object_hash() 期望参数 1 是对象，带有消息

> ID：14727497
> 
> 赞同：1
> 
> 时间：2013-02-06T11:06:00.087
> 
> 标签：php, doctrine-orm, zend-framework2

当我尝试刷新数据时出现错误，

> 警告：spl_object_hash() 期望参数 1 是对象

连同这条消息

> 在关联 Subject\Entity\Subject#user 上找到类型的实体，但期望 Subject\Entity\User

现在这是我要实施的行动

```
 public function addAction() {
    $form = new SubjectForm();
    $form->get('submit')->setAttribute('label', 'Add');
    $request = $this->getRequest();
    if (!$this->sessionVar) {
        $this->sessionVar = new SessionContainer('zftutorial');
        $userid = $this->sessionVar->offsetGet('userid');

        $form->get('user')->setAttribute('value', $userid);
    }
    $form->setData($request->getPost());

    if ($request->isPost()) {
        $subject = new Subject();
        $form->setInputFilter($subject->getInputFilter());
        if ($form->isValid()) {
            $subject->populate($form->getData());
            $this->getEntityManager()->persist($subject);
            $this->getEntityManager()->flush();
            return $this->redirect()->toRoute('subject');
        }
    }
    return array('form' => $form);
} 
```

这是我的subject.php

```
namespace Subject\Entity;

use Doctrine\ORM\Mapping as ORM;
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

/**
 *

 * @ORM\Entity

 * @ORM\Table(name="subject")

 * @property string $subjectname

 * @property int $user_id

 * @property int $id

 */
class Subject implements InputFilterAwareInterface {

protected $inputFilter;
/**

 * @ORM\Id

 * @ORM\Column(type="integer");

 * @ORM\GeneratedValue(strategy="AUTO")

 */
protected $id;
/**

 * @ORM\Column(type="string")

 */
protected $subjectname;
/**
 * @ORM\ManyToOne(targetEntity="Subject\Entity\User", inversedBy="subjects")
 * @var User|null
 */
private $user;

/** @return User|null */
public function getUser() {
    return $this->user;
}

/** @param User $user */
public function setUser(User $user) {
    if ($user === null || $user instanceof User) {
        $this->user = $user;
    } else {
        throw new InvalidArgumentException('$user must be instance of Entity\User or null!');
    }
}

/**

 * Magic getter to expose protected properties.

 *

 * @param string $property

 * @return mixed

 */
public function __get($property) {

    return $this->$property;
}

/**

 * Magic setter to save protected properties.

 *

 * @param string $property

 * @param mixed $value

 */
public function __set($property, $value) {

    $this->$property = $value;
}

/**

 * Convert the object to an array.

 *

 * @return array

 */
public function getArrayCopy() {

    return get_object_vars($this);
}

/**

 * Populate from an array.

 *

 * @param array $data

 */
public function populate($data = array()) {

    $this->id = $data['id'];

    $this->subjectname = $data['subjectname'];

    $this->user = $data['user_id'];
}

public function setInputFilter(InputFilterInterface $inputFilter) {

    throw new \Exception("Not used");
}

public function getInputFilter() {

    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $factory = new InputFactory();
        $inputFilter->add($factory->createInput(array(
                    'name' => 'id',

                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));
        $inputFilter->add($factory->createInput(array(
                    'name' => 'subjectname',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'user_id',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
}

} 
```

我正在尝试实现 oneToMany，但我不知道这里有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:50:52.840

好的找到答案

我做错了我在做这个

```
if ($request->isPost()) {
    $subject = new Subject();
    $form->setInputFilter($subject->getInputFilter());
    if ($form->isValid()) {
        $subject->populate($form->getData());
        $this->getEntityManager()->persist($subject);
        $this->getEntityManager()->flush();
        return $this->redirect()->toRoute('subject');
    }
} 
```

相反，我必须首先找到这样的相关实体

```
 if ($request->isPost()) {
        $subject = new Subject();

//following is the line  i was looking for
        $user = $this->getEntityManager()->getRepository('Subject\Entity\User')->find(array('id'=>$userid));
        $form->setInputFilter($subject->getInputFilter());
        if ($form->isValid()) {
            //$user->add
            //$subject->setUser($user);
            $subject->populate($form->getData());
            $subject->setUser($user);
            $this->getEntityManager()->persist($subject);
            $this->getEntityManager()->flush();
            return $this->redirect()->toRoute('subject');
        }
    } 
```

# mobile - 查看我的 Appixia BasicCategoryListActivity 下的所有商店类别，而不仅仅是主要类别

> ID：14727500
> 
> 赞同：0
> 
> 时间：2013-02-06T11:06:07.487
> 
> 标签：mobile, e-commerce, appixia

我将该`BasicCategoryListActivity`模块添加到我的移动应用程序中以显示我的商店类别。

我正在尝试为通过我的商店进行类别导航创建一个选项卡：显示主要类别，并且只有当它们被点击时，才显示子类别。

相反，我得到的是我商店中的一个非常长的类别列表——包括主要类别、子类别、所有内容……如何从列表中隐藏所有我不想要的类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:59:58.000

默认情况下，列表中显示的类别未过滤。这意味着商店中的每个类别都应该出现 - 所以这是应该的。

您可能想要添加的是类别列表的过滤器。

`Filter`使用类别列表的属性添加过滤器。如果您只想要根类别（您的主要商店类别），那么对类别进行过滤`ParentId`可能是最合适的。使用根类别 ID 作为此过滤器的值。如果您不确定您的根类别 ID 是什么，请将其留空。

# angularjs - Angular UI select2 - 如何停止自动排序？

> ID：14727502
> 
> 赞同：5
> 
> 时间：2013-02-06T11:06:13.517
> 
> 标签：angularjs, jquery-select2, angular-ui

以下数据通过[Angular UI附加到](http://angular-ui.github.com/#directives-select2)[select2](http://ivaynberg.github.com/select2/)：（[此处为实时示例](http://plnkr.co/edit/5X7s8WZPVw7Z9gVWDjK3?p=preview)）

JS：

```
$scope.items = [
  {id: 1, text: 'elephant'}, 
  {id: 2, text: 'desk'}, 
  {id: 3, text: 'car'}, 
  {id: 4, text: 'boat'}, 
  {id: 5, text: 'apple'}
];
$scope.selected = []; 
```

HTML：

```
<select ui-select2 
        multiple 
        ng-model="selected" 
        data-placeholder="Please select..." 
        style="width:200px">
  <option></option>
  <option ng-repeat="item in items" value="{{item.id}}">{{item.text}}</option>
</select> 
```

但是，每次选择项目时，它都会对所选项目进行排序`id`。例如，如果您选择“apple”然后选择“boat”，则`selected`项目将是“boat”和“apple”（按此顺序！）。

如何保留订单并禁用此自动排序？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-06T15:18:46.670

[如果您使用而不是对这里](http://embed.plnkr.co/Iwkp2tbZZy0sPUfNh8yY)看到的每个项目`ng-options`执行一个，看起来它会保留顺序`ng-repeat`

您所要做的就是删除这一行：

```
<option ng-repeat="item in items" value="{{item.id}}">{{item.text}}</option> 
```

然后将这样的指令添加到您的标签中：

```
ng-options="item.text for item in items" 
```

这将使整个项目对象被附加到选定的列表中，而不仅仅是 ID，因此您需要考虑到这一点。

# c - make: 找不到 makedepend

> ID：14727506
> 
> 赞同：4
> 
> 时间：2013-02-06T11:06:17.737
> 
> 标签：c, makefile

我正在尝试运行以下生成文件

```
CMDLINE_SRC=$(wildcard commandLine/*.c)
CMDLINE_OBJS = $(CMDLINE_SRC:.c=.o)
EXECUTABLES = $(CMDLINE_SRC:.c=)

LIB_SRC=$(wildcard c/*.c)
LIB_OBJ = $(LIB_SRC:.c=.o)
LIB_OUT = lib/libclinrisk.a

INCLUDES = -I include

# compiler
CC = gcc
CCFLAGS = 
LDFLAGS = 

# library paths
LIBS = -Llib -lclinrisk -lm

.SUFFIXES: .c

default: dep executables

executables: $(EXECUTABLES)
    cp $(EXECUTABLES) executables

$(EXECUTABLES): $(LIB_OUT)

.c:
    $(CC) $(INCLUDES) $(LDFLAGS) $< -o $@ $(LIBS)

.c.o:
    $(CC) $(INCLUDES) $(CCFLAGS) -c $< -o $@

$(LIB_OUT): $(LIB_OBJ)
    ar rcs $(LIB_OUT) $(LIB_OBJ)

depend: dep

dep:
    makedepend -- $(CFLAGS) -- -I /usr/include/linux $(INCLUDES) $(LIB_SRC)

clean:
    rm -f $(LIB_OBJ) $(LIB_OUT) Makefile.bak
    rm -f $(CMDLINE_OBJ) $(CMDLINE_PROGS) 
    rm -f executables/*

# DO NOT DELETE 
```

并收到以下错误消息：

```
$ make
makedepend --  -- -M
make: makedepend: Command not found
make: *** [dep] Error 127 
```

我收集到我可能没有 makedepend 安装，就好像我在输入 make 后按 Tab 键一样，我得到：

```
$ make <TAB>
clean        default      dep          depend       executables  makefile 
```

如果是这样我没有安装makedepend，我该如何安装它并指出

```
makedepend -- $(CFLAGS) -- -I /usr/include/linux $(INCLUDES) $(LIB_SRC) 
```

它需要指向什么？

谢谢！

更新：大卫的回答已经解决了这个问题......

但是我现在坚持：

```
$ make
makedepend --  -- -I /usr/include/linux -I include 
cp  executables
cp: missing destination file operand after `executables'
Try `cp --help' for more information.
make: *** [executables] Error 1 
```

我怀疑这是实际makefile的问题....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:23:26.737

你错过了这个`makedepend`工具。

按照以下说明编译源代码（因此您独立于发行版）来安装它：

[下载并安装 makedepend](http://www.linuxfromscratch.org/blfs/view/svn/x/makedepend.html)

# windows-phone-7 - Google Adsense 广告未在 Windows 和 Blackberry Phone 上显示？

> ID：14727508
> 
> 赞同：6
> 
> 时间：2013-02-06T11:06:25.380
> 
> 标签：windows-phone-7, mobile, blackberry, adsense

这是该网站的链接：

这是谷歌 Adsense 代码：

```
<script type="text/javascript">
     google_ad_client = "ca-pub-1334021877048856";
     google_ad_slot = "5550178046";
     google_ad_width = 320;
     google_ad_height = 50;
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" 
 type="text/javascript"></script> 
```

它在所有其他移动浏览器中都可以正常工作。我在桌面版本中尝试过它确实可以正常工作，但是如果您在 Firefox 中注入 Window 的 Phone 浏览器用户代理来测试广告即使在桌面浏览器上也不会显示。

我阅读了一些论坛，上面说它被谷歌或微软阻止了仍然不确定。

以下是其中一个论坛的链接：

[http://www.amitbhawani.com/blog/google-adsense-ads-windows-phone/](http://www.amitbhawani.com/blog/google-adsense-ads-windows-phone/)

任何帮助都会非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T03:59:10.230

我记得在过去一年左右的时间里，谷歌在 Windows Phone 上屏蔽了一个 YouTube 应用程序，理由是：

> 微软没有进行必要的浏览器升级来启用功能齐全的 YouTube 体验，而是重新发布了违反我们服务条款的 YouTube 应用程序。”

这句话支持浏览器不兼容理论。根据您链接到的论坛帖子以及通过用户代理的测试，我认为没有解决方案可以让 Adsense 在 Windows Phone 7 浏览器上运行。

[编辑] 似乎黑莓有自己的[广告服务](http://developer.blackberry.com/develop/platform_services/advertising.html)，这意味着他们可能会阻止谷歌 adsense 运行，以便开发人员使用他们的服务。

# java - 使用番石榴表

> ID：14727509
> 
> 赞同：2
> 
> 时间：2013-02-06T11:06:25.843
> 
> 标签：java, guava

似乎 Guava Table 只能存储一个交叉表，如：

```
Id year sales
1 2000 3000
2 2001 3045
3 2002 4000

table.put(1, 2000, 3000);
table.put(2,2001,3045); 
table.put(3,2002,4000); 
```

如果我有一张像

```
Id year month country provice sales
1 1999 1 US LA 3000
2 1999 2 IT MI 4000
3 2000 1 CH BJ 5000 
```

而且我不能使用 JAVABEAN 来存储 recoder！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:18:04.320

这不完全是你应该如何使用一张桌子。每个 put 对应一个单元格 - 因此在您的第一个示例中，您将执行以下操作：

```
table.put(1, "Year", 2000);
table.put(2, "Year", 2001);
table.put(3, "Year", 2002);

table.put(1, "Sales", 3000);
table.put(2, "Sales", 3045);
table.put(3, "Sales", 4000); 
```

你的第二个例子变成了，例如：

```
table.put(1, "Year", 1999);
table.put(1, "Month", 1);
table.put(1, "Country", "US");
table.put(1, "Province", "LA");
table.put(1, "Sales", 3000);
//etc. 
```

# c# - 让 WPF 更新数据表的绑定列表

> ID：14727510
> 
> 赞同：0
> 
> 时间：2013-02-06T11:06:26.763
> 
> 标签：c#, wpf, binding, datatable

我有一个绑定到`Dictionary<string, DataTable>`. 选项卡名称绑定到字典`Keys`，选项卡内容绑定到`DataTables`. 这一切都很好，但在构建后的某个未指定的点，所有表都被重建为一个更大更复杂的表。我的问题是如何提供更改通知以便 WPF 正确更新表？

这似乎是一件很明显的事情，我想知道我是否遗漏了什么，或者我真的需要使用可观察的字典构造或带有更改通知的自定义 DataTable 包装器？

到目前为止我尝试过的解决方案：

*   使用`ObservableCollection< KeyValuePair<string, DataTable>`并添加或删除条目。这实际上工作正常，但最终会导致在表格需要更新时选项卡消失和重新出现的视觉效果不佳

*   我显然可以使用代码隐藏来破解它，但如果可能的话，我想避免这种情况。

这是 XAML

```
<TabControl ItemsSource="{Binding StringToDataTableDictionary}" >
  <TabControl.ItemTemplate>
    <DataTemplate>
      <Label Content="{Binding Key}" />
    </DataTemplate>
  </TabControl.ItemTemplate>
  <TabControl.ContentTemplate>
    <DataTemplate>
      <igDP:XamDataGrid DataSource="{Binding Path=Value}"
    </DataTemplate>
  </TabControl.ContentTemplate>
</TabControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:39:52.627

因此，归根结底，您需要一个实现`INotifyCollectionChanged`和`IEnumerable`（例如`ObservableCollection`，或`ICollectionView`）的类。当然，你也可以自己编一个。主要的是您在类中实现这两个接口，然后`CollectionChanged`在集合更改时调用。

一个简单的例子：

```
class MyObservableDictionary<T, U> : INotifyCollectionChanged, IEnumerable
{
    Dictionary<T, U> items = new Dictionary<T,U>();

    public void Add(T key, U value)
    {
        this.items.Add(key, value);

        // Update any listeners
        if (CollectionChanged != null)
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }

    // This is from implementing INotifyCollectionChanged
    public event NotifyCollectionChangedEventHandler CollectionChanged;

    // This is from implementing IEnumerable
    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        // Dump the entire collection into a 'yield return'. C# will automatically
        // build an enumerator class from it.
        foreach (KeyValuePair<T, U> item in items)
            yield return item;
    }
} 
```

如您所见，当我添加一个项目时，我确保它`CollectionChanged`不为空（也就是说，有人正在监视这个类的集合更改），然后我调用它。这会提示监控对象调用`GetEnumerator`. 在该`GetEnumerator`函数中，我只为每个项目执行一个并“返回”每个项目（它告诉 c# 自动构建一个枚举器，所以我不必自己做）。

XAML：

```
<ListBox ItemsSource="{Binding Items}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Label Content="{Binding Key}" FontWeight="Bold"/>
                <Label Content="{Binding Value}"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:34:15.360

最后，没有收集通知机制解决了我的问题。我猜这是因为在幕后，WPF 持有对 DataTable 的引用，这就是需要提供更改通知的引用。我意识到我可以删除该表并将其重新添加到集合中，但这会导致 GUI 速度过慢。因此，我构建了一个提供更改通知的 DataTable 包装器，请参见此处：

```
public class DataTableWithNotification : INotifyPropertyChanged
{
    private DataTable _theTable = new DataTable();

    public DataTableWithNotification()
    {
    }

    public DataTableWithNotification(DataTable dt)
    {
        _theTable = dt;
    }

    public DataTable Table
    {
        get { return _theTable; }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void ChangeTableAndNotify(DataTable newTable)
    {
        _theTable = newTable;

        OnPropertyChanged("Table");
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

# c# - 正确渲染重叠的三角形？

> ID：14727512
> 
> 赞同：0
> 
> 时间：2013-02-06T11:06:29.920
> 
> 标签：c#, direct3d, directx-9, directdraw

我开始学习 C# 中的 DirectX 9。我想渲染两个三角形并围绕 Y 轴旋转它们。

在这部分我初始化设备：

```
public bool InitializeDevice()
{
    try
    {
        meshList = new List<Sphere>();

        // Erstellt die PresentParameters für weitere Einstellungen des Device
        PresentParameters presParams = new PresentParameters() {
            Windowed = true,                // Device nur innerhalbe des Fensterhandels benutzen
            SwapEffect = SwapEffect.Discard, // Grafikkarte entscheidet selbst wie sie den Backbuffer zur anzeige bringt
        };

        // Erzeugt eine Instanz von dem Device
        device = new Device(0,                                      // Nummer fuer den Grafikadapter der verwendet wird                  
                            DeviceType.Hardware,                    // Parameter über die Garfikkarte oder CPU ausführen
                            Panel_3D,                               // Fensterhadel für das Device 
                            CreateFlags.SoftwareVertexProcessing,   // Einstellung des Device. Gibt an, dass die Vertices nur per Software verarbeitet werden 
                            presParams);                            // Gibt die weiteren Einstellungen mit

        // Wenn das Device neupositioniert wird
        device.DeviceReset += new System.EventHandler(this.OnResetDevice);
        // Führt das Reset aus
        OnResetDevice(device, null);

        // Definiert keine Vor und Rückseite
        device.RenderState.CullMode = Cull.Clockwise;
        // Direct3D-Beleuchtung deaktivieren
        device.RenderState.Lighting = false;
        // Beschreibt einen festen Füllmodus
        device.RenderState.FillMode = FillMode.Solid;

        // Erstellt den Buffer für die Vertices (Lab Koordinatensystem)
        vertexBuffer = new VertexBuffer(typeof(CustomVertex.PositionColored),   // Typ der Vertices
                                        18,                                     // Anzahl der Vertices
                                        device,                                 // Gerätekontext unser device
                                        0,                                      // Anzahl der Flags zur Verarbeitung der Vertice
                                        CustomVertex.PositionColored.Format,    // Typ der Vertices (Weil man auch eigene Strukturen definieren kann)
                                        Pool.Default);                          // Speicherung der Vertices

        // Event welches aufgerufen wird wenn der Vertexbuffer erstellt wurde
        vertexBuffer.Created += new System.EventHandler(this.OnCreateVertexBuffer);
        // Event wird von Hand aufgerufen
        this.OnCreateVertexBuffer(vertexBuffer, null);

        return true;    // Device wurde erstellt
    }
    catch { return false; } // Device konnte nicht erstellt werden 
} 
```

对于 VertexBuffer，我使用`CustomVertex.PositionColored[]`.

在这一部分中，我设置了矩阵并渲染了原语：

```
/// <summary>
/// Berechnen und Darstellen des Bildes
/// </summary>
public void Render()
{
    // Fragt ob das Device erstellt wurde und noch gültig ist
    if (device == null)
        return;

    // Inhalt des Backbuffers löschen und das ganze mit einer Farbe einfärben
    device.Clear(ClearFlags.Target,         // Die entsprechende Oberfläche
                    System.Drawing.Color.Black,// Die Farbe 
                    1.0f,                      // Abstand vom Betrachter, an dem die Oberfläche gelöscht wird und einen Wert, ...
                    0);                        // ...der in jedem Stencil-Buffer-Eintrag gespeichert wird.

    // Anfang der Szene
    device.BeginScene();
    // Matrizen aufsetzen
    SetupMatrices();

    // Bindet den Buffer an das Device
    device.SetStreamSource(0,           // Nummer des Streams
                            vertexBuffer,// Der Buffer
                            0);          // StartOffset in dem Buffer

    // Teilt dem Device das Format der Vertices mit
    device.VertexFormat = CustomVertex.PositionColored.Format;
    // Zeichnet die Dreiecke
    device.DrawPrimitives(PrimitiveType.LineList,   // Typ der Primitive
                            0,                        // Eintrag des ersten Vertex
                            3);                       // Anzahl der Primetive

    // Zeichnet das Rechteck
    device.DrawPrimitives(PrimitiveType.TriangleList,   // Typ der Primitive
                            6,                            // Eintrag des ersten Vertex
                            4);                           // Anzahl der Primetive

    // Ende der Szene
    device.EndScene();
    // Bringt die Zeichnung auf das Fensterhandle
    device.Present();
}

/// <summary>
/// Setzt die Matrizen auf
/// </summary>
private void SetupMatrices()
{
    Matrix MX = Matrix.RotationX(impValue.ObjektRotationY);
    impValue.ObjektRotationY = 0;
    Matrix MY = Matrix.RotationY(impValue.ObjektRotationX);
    impValue.ObjektRotationX = 0;

    Matrix Rotation = device.Transform.World;
    Rotation *= MY;
    Rotation *= MX;

    // Rotiert das device entlag der X und Y Achse
    device.Transform.World = Rotation;

    // Setzt den Benutzerblickwinkel auf
    device.Transform.View = Matrix.LookAtLH(new Vector3(impValue.KameraPosX, impValue.KameraPosY, impValue.KameraPosZ), // Kameraposition
                            new Vector3(impValue.SchauPosX, impValue.SchauPosY, impValue.SchauPosZ),                    // Punkt, auf den geschaut wird
                            new Vector3(impValue.OberstePosX, impValue.OberstePosY, impValue.OberstePosZ));             // Vektor der angibt, wo oben ist

    // Setzt die Ansichtsmatrix auf (Linke-Hand-orientiertes System)
    device.Transform.Projection = Matrix.PerspectiveFovLH(impValue.BlickWinkel, // Sichtbereich (Blickwinkel)
                                    impValue.SeitenVerhaeltnis,                   // Seitenverhältnis
                                    impValue.NaheEbene,                           // Abstand zum nächsten sichtbaren Punkt (nahe Ebene)
                                    impValue.FerneEbene);                         // Abstand zum letzten sichtbaren Punkt (ferne Ebene)
} 
```

### 起始位置

[![两个三角形，红在白前面](../Images/8b6f20de4a32a53dc4d128654bc7d25d.png)](https://i.stack.imgur.com/x7j1y.png)

### 旋转后

[![相同的三角形，但旋转了； 红还在白前面](../Images/907ded6ec47af9c246292a51ae2fe810.png)](https://i.stack.imgur.com/P1jum.png)

在第二张图片中，您可以看到我的问题。红色三角形在白色三角形的前面。如何在白色三角形后面绘制红色三角形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:21:48.837

在 3D 应用程序中处理重叠面有不同的方法：

*   [深度缓冲](http://en.wikipedia.org/wiki/Z-buffering)
*   [画家算法](http://en.wikipedia.org/wiki/Painter%27s_algorithm)

深度缓冲区（或 Z 缓冲区）是一种非常常见的解决方案，因为它可以为不透明的几何体提供完美的结果。

深度缓冲区是存储渲染像素深度信息的纹理。如果像素到相机的距离大于深度缓冲区中该像素的值，则丢弃该像素。如果它更靠近相机，则将颜色写入渲染目标并更新深度。

* * *

*   [创建深度缓冲区 (Direct3D 9)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204866%28v=vs.85%29.aspx)
*   [深度排序 Alpha 混合对象](http://blogs.msdn.com/b/shawnhar/archive/2009/02/18/depth-sorting-alpha-blended-objects.aspx)

# rest - TCP RST 和 503 http 错误代码

> ID：14727515
> 
> 赞同：0
> 
> 时间：2013-02-06T11:06:36.467
> 
> 标签：rest, tcp, httpwebrequest, http-status-code-503

我的客户使用 httpwebrequest 对象调用 RESTful api uri。但有时会返回 503 服务不可用消息。所以我用wireshark捕获了tcp数据包，发现当时发生了TCP RST。

我想提前捕获 TCP RST 状态并为其提供另一个 http 状态代码。有没有办法在 HTTPwebrequest 中捕获 TCP RST 状态？（ssl 应用于这个宁静的请求）...

# emacs - 有没有更好的方法让 emacs 自动完成插件知道库（例如 ring、compojure）关键字？

> ID：14727516
> 
> 赞同：2
> 
> 时间：2013-02-06T11:06:42.270
> 
> 标签：emacs, clojure, autocomplete

我正在使用 emacs 自动完成插件，实际上我正在使用 Emacs Live（[https://github.com/overtone/emacs-live](https://github.com/overtone/emacs-live)），它又使用自动完成功能。自动完成确实有效，但它只知道 /dict/xxx 文件中的关键字列表。当我使用 lein（例如 ring、compojure）将库添加到当前项目时，它根本不起作用。我是否必须将 libs 中的所有关键字列出到 /dict 目录才能让自动完成功能知道它们？或者有没有办法让自动完成知道每次我使用 lein 添加新库时的关键字（就像 Java IDE 中发生的那样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:07:50.900

克里斯巴雷特的回答让你几乎到了那里。

从 melpa 安装 nrepl 和 ac-nrepl，然后将其放入您的 init 中：

```
(require 'nrepl)
(require 'ac-nrepl)

(add-hook 'nrepl-mode-hook 'ac-nrepl-setup)
(add-hook 'nrepl-interaction-mode-hook 'ac-nrepl-setup)
(eval-after-load "auto-complete"
  '(add-to-list 'ac-modes 'nrepl-mode)) 
```

并使用`M-x nrepl-jack-in`自动完成和文档提示将您的 emacs 会话连接到您的 clojure 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:16:50.877

# python - 关于如何摆脱自我的任何想法？

> ID：14727517
> 
> 赞同：4
> 
> 时间：2013-02-06T11:06:43.790
> 
> 标签：python, self

无论如何使Python方法可以在不使用self参数的情况下访问类字段/方法？

写self真的很烦人。自己。自己。自己。代码变得如此丑陋，以至于我想不再纯粹为了代码美学而使用类。我不关心风险或最佳实践。我只是不想再看到自己。

PS我知道重命名的可能性，但这不是重点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:13:10.470

Guido 的这篇博客解释了为什么它会留下来：http: [//neopythonic.blogspot.co.uk/2008/10/why-explicit-self-has-to-stay.html](http://neopythonic.blogspot.co.uk/2008/10/why-explicit-self-has-to-stay.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:14:17.717

唯一可能的解决方案（除了制作自己的`no-self`Python 版本（使用源代码））
**尝试另一种语言。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T11:13:21.767

不，没有。尽管惯例是使用“self”，但您可以使用另一个词来代替 self。

# android - 签名后带有 SSL 的 PhoneGap Android 失败

> ID：14727522
> 
> 赞同：1
> 
> 时间：2013-02-06T11:07:08.437
> 
> 标签：android, ssl, cordova, keystore, signed

我正在开发一个在从 Eclipse 运行的调试模式下运行良好的应用程序。但是当它从 eclipse unsigned 导出，然后用我们的 keystore 在我们的服务器上签名时，它就不能再访问 Internet。该应用程序仅使用 SSL。我们在服务器上有一个 Godaddy ssl 证书。

该应用程序使用具有以下权限的 Phonegap：

```
<uses-permission android:name="android.permission.INTERNET">
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE">
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"> 
```

该应用程序在从 App Store 安装的 iOS 中运行良好，使用相同的 javascript 代码访问服务。

我在这里找不到很多关于哪里可能出错的信息。我确实知道我之前在 Java 平台上遇到过 Godaddy ssl 证书的问题。但由于它在 Eclipse 调试模式下工作，我无法将其视为原因。

有什么想法吗？

*更新：* **问题/解决方案** Eclipse 签名的调试 apk 能够使用 GoDaddy SSL 证书，而无需在服务器上安装中间证书。

# ios - Gamekit / gamecenter 以编程方式随机匹配

> ID：14727524
> 
> 赞同：0
> 
> 时间：2013-02-06T11:07:13.103
> 
> 标签：ios, xcode, gamekit

我正在尝试使用我自己的自定义用户界面以编程方式实现随机匹配。

我有点卡住了。。

使用在苹果网站上找到的这段代码，我可以毫无问题地创建匹配

```
- (void)findProgrammaticMatch
{
    GKMatchRequest *request = [[GKMatchRequest alloc] init];

    request.minPlayers = 2;
    request.maxPlayers = 2;

    [GKTurnBasedMatch findMatchForRequest: request withCompletionHandler:^(GKTurnBasedMatch *match, NSError *error)
     {
         if(error)
             NSLog(@"ERROR");
         if (match) {

             NSLog(@"STARTING MATCH");
         }

     }];
} 
```

如果我做 match.participants.count 我得到数字 2...

但一个参与者是我，另一个是空的

我所做的测试是创建 2 个沙盒帐户，我用我的另一个游戏中心帐户运行相同的代码，我创建了一个新游戏，.. 但由于某种原因它与它们不匹配.. 我错过了什么吗？

我一直在谷歌上寻找例子，但我似乎找不到任何..如果你们中有人知道我能找到一些例子，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:13:47.203

好吧，您可能会错过基于轮流匹配的关键点。如果用户未连接到现有匹配，则当用户开始自动匹配时，它将开始新的游戏并且用户进行第一轮。只有在他完成他的回合后，其他用户才能连接到这个游戏。因此，如果您要进行 2 人比赛：一个用户应该开始一个新游戏，此时另一个用户为空，另一个用户应该在第一个用户完成他的回合后连接到这个现有游戏（调用 endTurnWithMatchData）

这在文档中不是很清楚（我鄙视游戏中心文档，不清楚且不完整），但 sdk 6 就是这种情况。我认为它会在不久的将来发生变化。

# android - 谷歌是否根据设备的 Udid 和发件人 ID 返回 GCM 注册 ID？

> ID：14727527
> 
> 赞同：1
> 
> 时间：2013-02-06T11:07:17.627
> 
> 标签：android, google-cloud-messaging

`GCM`google 如何根据**senderID**生成id 。我们只发送**senderID**到google根据设备的 Udid 和发件人 ID`GCM`返回注册 ID 吗？`GCM`在安卓手机的情况下，有时 udid 不是唯一的

**我想知道 Google 存储了哪些信息以及 senderID 以将消息发送回设备。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:17:16.483

通过使用此代码，您可以在 android 中生成唯一的设备 ID 它永远不会改变其使用硬件 ID 生成的数字组合...

```
public String getDeviceID() {

/*String Return_DeviceID = USERNAME_and_PASSWORD.getString(DeviceID_key,"Guest");
return Return_DeviceID;*/

TelephonyManager TelephonyMgr = (TelephonyManager) getApplicationContext().getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
String m_szImei = TelephonyMgr.getDeviceId(); // Requires
// READ_PHONE_STATE

// 2 compute DEVICE ID
String m_szDevIDShort = "35"
+ // we make this look like a valid IMEI
Build.BOARD.length() % 10 + Build.BRAND.length() % 10
+ Build.CPU_ABI.length() % 10 + Build.DEVICE.length() % 10
+ Build.DISPLAY.length() % 10 + Build.HOST.length() % 10
+ Build.ID.length() % 10 + Build.MANUFACTURER.length() % 10
+ Build.MODEL.length() % 10 + Build.PRODUCT.length() % 10
+ Build.TAGS.length() % 10 + Build.TYPE.length() % 10
+ Build.USER.length() % 10; // 13 digits
// 3 android ID - unreliable
String m_szAndroidID = Secure.getString(getContentResolver(),Secure.ANDROID_ID);
// 4 wifi manager, read MAC address - requires
// android.permission.ACCESS_WIFI_STATE or comes as null
WifiManager wm = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();
// 5 Bluetooth MAC address android.permission.BLUETOOTH required
BluetoothAdapter m_BluetoothAdapter = null; // Local Bluetooth adapter
m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
String m_szBTMAC = m_BluetoothAdapter.getAddress();
System.out.println("m_szBTMAC "+m_szBTMAC);

// 6 SUM THE IDs
String m_szLongID = m_szImei + m_szDevIDShort + m_szAndroidID+ m_szWLANMAC + m_szBTMAC;
System.out.println("m_szLongID "+m_szLongID);
MessageDigest m = null;
try {
m = MessageDigest.getInstance("MD5");
} catch (NoSuchAlgorithmException e) {
e.printStackTrace();
                }
m.update(m_szLongID.getBytes(), 0, m_szLongID.length());
byte p_md5Data[] = m.digest();

String m_szUniqueID = new String();
for (int i = 0; i < p_md5Data.length; i++) {
int b = (0xFF & p_md5Data[i]);
// if it is a single digit, make sure it have 0 in front (proper
// padding)
if (b <= 0xF)
m_szUniqueID += "0";
// add number to string
m_szUniqueID += Integer.toHexString(b);
}
m_szUniqueID = m_szUniqueID.toUpperCase();

Log.i("-------------DeviceID------------", m_szUniqueID);
Log.d("DeviceIdCheck", "DeviceId that generated MPreferenceActivity:"+m_szUniqueID);

return m_szUniqueID;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:48:42.660

在使用 SenderID 注册时，只有 Google 知道哪些信息会发送到 GCM 服务器。但不难猜测这些信息将被发送：

1.  您用于激活手机的 google/gmail 电子邮件地址。
2.  手机的唯一 ID，它可以基于 SIM、IMEI 或 ESN，甚至是 ANDROID_ID 字符串。
3.  您的应用程序的包名称。

# ant - 使用 ant 过滤目录列表

> ID：14727530
> 
> 赞同：0
> 
> 时间：2013-02-06T11:07:26.433
> 
> 标签：ant

我对 ant 很陌生，但我需要为以“example”开头的目录实现一个过滤器。假设，我有一个文件夹

```
A:
-example.a
-example.b
-example.c
-test1
-test2 
```

所以，基本上我想获取以 example.* 开头的文件夹列表并使用它们做一些工作......

我有这个，但是不行，回显输出还是空的

```
 <dirset id="aa" dir="../../../../A" includes="example.*"/>
 <property name="bb" refid="aa"/> 
 <echo>${bb}</echo> 
```

你有什么想法，我做错了什么？

# javascript - 移动设备上的 HTML5 + Javascript

> ID：14727538
> 
> 赞同：0
> 
> 时间：2013-02-06T11:07:47.790
> 
> 标签：javascript, html, canvas

我需要帮助。我决定用 javascript 和 HTML 编写一个简单的游戏。所以我跟着这个教程。[http://billmill.org/static/canvastutorial/](http://billmill.org/static/canvastutorial/)它可以在计算机上完美运行，但现在，我希望它可以在我的 Android 手机上运行。（ICS 4.0.3）。但它不起作用。它只显示砖块和桨，球移动，但我不能移动桨。我还包括 jQuery mobile，但它无论如何都不起作用。我还应该改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:21:12.580

本教程不支持移动事件。只有键盘和鼠标，手机都不支持。

您应该改用触摸事件，或者您可以通过添加 2 个按钮并为它们提供`click`事件来“伪造”键盘。

# objective-c - Clang 静态分析器警告“调用 CFRelease 时出现空指针参数”

> ID：14727541
> 
> 赞同：3
> 
> 时间：2013-02-06T11:07:50.317
> 
> 标签：objective-c, c, xcode, memory-management, clang-static-analyzer

在 Xcode 4.6 中，clang 静态分析器警告我“调用 CFRelease 时出现空指针参数”。

这是分析器警告的屏幕截图：

![Clang 静态分析器警告](../Images/346446ac9a829f58cc424a4407bb7796.png)

这是您想要复制和粘贴的代码：

```
- (void)test
{
    CFUUIDRef aUUID = CFUUIDCreate(kCFAllocatorDefault);
    [self setUUID:aUUID];
    CFRelease(aUUID);
}

- (void)setUUID:(CFUUIDRef)uuid
{
    _uuid = uuid ? CFRetain(uuid) : CFUUIDCreate(kCFAllocatorDefault);
} 
```

我不明白它为什么警告我。`aUUID`永远不能是空指针，可以吗？我已经学会了不信任自己而不是我正在使用的工具，所以我在这里问。如果有人向我解释我所缺少的，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:59:29.637

理论上，任何返回分配值的东西都可能返回 NULL。

分析器遵循多种可能的执行路径。在遵循“aUUID 为 NULL”的情况时，它最终以 NULL 对象的 CFRelease 结束。

这不是`setUUID`原因，这只是发现问题的路径，所以这就是说明的路径。

# jakarta-ee - HttpServletResponse 产生损坏的 UTF-8 数据

> ID：14727546
> 
> 赞同：1
> 
> 时间：2013-02-06T11:08:03.843
> 
> 标签：jakarta-ee, utf-8, jersey

我正在使用 Jersey 制作 RESTful 服务，它会生成 UTF-8 编码的回复。这是一个代码片段：

```
public static class Data {

    private String value;

    public Data(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }
}

@GET
@Produces(MediaType.APPLICATION_JSON)
public Response method() {

    Data response = new Data("€");
    return Response.status(Response.Status.OK)
                   .type(MediaType.APPLICATION_JSON + ";charset=UTF-8")
                   .entity(response)
                   .build();
} 
```

它应该产生以下回复：

```
{"value":"€"} 
```

或作为字节数组：

```
[123, 34, 118, 97, 108, 117, 101, 34, 58, 34, -30, -126, -84, 34, 125] 
```

请注意，欧元符号被编码为三个字节 -30、-126、-84 或[0xe2 0x82 0xac](http://www.fileformat.info/info/unicode/char/20ac/index.htm)。

但是，它会产生以下响应

```
{"value":"â¬"} 
```

或作为字节数组：

```
[123, 34, 118, 97, 108, 117, 101, 34, 58, 34, -61, -94, -62, -126, -62, -84, 34, 125] 
```

请注意，欧元符号现在编码为六个字节 -61、-94、-62、-126、-62、-84 或 0xc3 0xa2 0xc2 0x82 0xc2 0xac。

我发现了一个导致这种损坏的转换序列，在某些时候 UTF-8 编码数据被视为 Latin1 编码数据。

```
Data data = new Data("€");
org.codehaus.jackson.map.ObjectMapper mapper
    = new org.codehaus.jackson.map.ObjectMapper();
try {
    String strData = mapper.writeValueAsString(data);
    System.out.println(strData);
    byte[] rawData = mapper.writeValueAsBytes(data);
    System.out.println(Arrays.toString(rawData));

    String asLatin1 = new String(rawData, "ISO-8859-1");
    byte[] brokenUtf8 = asLatin1.getBytes("UTF-8");
    System.out.println(Arrays.toString(brokenUtf8));
} catch (IOException e) {
    System.out.println("Fail " + e.getMessage());
} 
```

该服务在两台机器上运行，一台使用 apache-tomcat-7.0.30，另一台使用 apache-tomcat-7.0.23。前者产生正确的 UTF-8 响应，而后者则破坏了 UTF-8。我无法找出导致行为差异的原因以及可以解决问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:05:56.763

这个问题有一个非常悲伤的原因，而且很难找到。Ant 的 javac 任务有明确的编码集：

```
<javac destdir="${classes}" includeantruntime="false" source="1.6" target="1.6" debug="true" encoding="ISO-8859-1" classpathref="main.classpath"> 
```

它在一个 Tomcat 下工作，因为它是用 Eclipse 构建的，而另一个部署是用 Ant 构建的，破坏了所有 Unicode 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:56:33.637

如果它在 7.0.30 而不是在 7.0.23 中工作，也许这是一个被发现并修复的错误？你检查过[Tomcat 更新日志](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)，看看里面是否有任何东西吗？

# c# - 将数字类型 long 格式化为 8 位

> ID：14727547
> 
> 赞同：0
> 
> 时间：2013-02-06T11:08:08.357
> 
> 标签：c#, performance, casting

我有两个类型的变量`long?`。我需要使用 long1 变量，如果为 null，则取 long2。

```
//long1 format: 20130104
//long2 format: 2.01301071520553E16

var target = long1 ?? long2; 
```

变量目标将在查询中用于查找与格式为“xxxxxxxx”（8 位，与 long1 格式相同）的变量的完全匹配。

有没有什么优雅的方法可以将 long2 数字*切割成*与 long1 相同的格式，而不必先将其解析为字符串？

由于我必须将目标变量处理为 long 而不是字符串，因此我将避免再次从字符串到 long 的第二次解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:21:29.557

稍后打印变量时，只需根据需要获取尽可能多的准确度数。如果它有 100 位也没关系，它只用于计算。当您准备好显示它时，请使用：

```
String.Format("MyLong: {0:0.00000000}", long); 
```

或者您希望它看起来如何。

# java - java更改DocumentListener中的文档

> ID：14727548
> 
> 赞同：3
> 
> 时间：2013-02-06T11:08:11.527
> 
> 标签：java, swing, jtextcomponent, documentlistener, documentfilter

我使用 a来处理文档`DocumentListener`中的任何更改。`JTextPane`当用户键入我想删除内容`JTextPane`并插入自定义文本时。无法更改文档中的文档`DocumentListener`，而是在这里说一个解决方案： [java.lang.IllegalStateException while using Document Listener in TextArea, Java](https://stackoverflow.com/questions/2788779/java-lang-illegalstateexception-while-using-document-listener-in-textarea-java) ，但我不明白，至少我不知道该怎么做在我的情况下？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T11:13:57.807

`DocumentListener`确实只适用于通知更改，绝不能用于修改文本字段/文档。

相反，使用[`DocumentFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)

[在这里](http://www.jroller.com/dpmihai/entry/documentfilter)查看示例

**供参考**

您问题的根本原因`DocumentListener`是在文档更新时收到通知。尝试修改文档（除了冒无限循环的风险）会使文档进入无效状态，因此出现异常

**更新了一个例子**

这是一个非常基本的例子......它不处理插入或删除，但我的测试已经删除工作而没有做任何事情......

![在此处输入图像描述](../Images/ad40ab80c2cfd220373b2e95af429cf5.png)

```
public class TestHighlight {

    public static void main(String[] args) {
        new TestHighlight();
    }

    public TestHighlight() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JTextPane textPane = new JTextPane(new DefaultStyledDocument());
                ((AbstractDocument) textPane.getDocument()).setDocumentFilter(new HighlightDocumentFilter(textPane));
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(textPane));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class HighlightDocumentFilter extends DocumentFilter {

        private DefaultHighlightPainter highlightPainter = new DefaultHighlightPainter(Color.YELLOW);
        private JTextPane textPane;
        private SimpleAttributeSet background;

        public HighlightDocumentFilter(JTextPane textPane) {
            this.textPane = textPane;
            background = new SimpleAttributeSet();
            StyleConstants.setBackground(background, Color.RED);
        }

        @Override
        public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {
            System.out.println("insert");
            super.insertString(fb, offset, text, attr);
        }

        @Override
        public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {
            System.out.println("remove");
            super.remove(fb, offset, length);
        }

        @Override
        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {

            String match = "test";

            super.replace(fb, offset, length, text, attrs);

            int startIndex = offset - match.length();
            if (startIndex >= 0) {

                String last = fb.getDocument().getText(startIndex, match.length()).trim();
                System.out.println(last);
                if (last.equalsIgnoreCase(match)) {

                    textPane.getHighlighter().addHighlight(startIndex, startIndex + match.length(), highlightPainter);

                }

            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T11:14:37.290

> 当用户键入我想删除 JTextPane 的内容并插入自定义文本时。

*   这不是[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)的工作，基本上这个[Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/handling.html)旨在将事件从[JTextComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)触发到另一个 JComponent，到 Swing GUI，在使用过的 Java 中实现方法

*   看看[DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter) ，这提供了在运行时更改、修改或更新自己的[Document](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)（[JTextComponents的模型）所需的方法](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T11:33:47.050

包装你调用的代码`SwingUtilities.invokeLater()`

# php - 表格不起作用，但我很确定代码是正确的？

> ID：14727550
> 
> 赞同：0
> 
> 时间：2013-02-06T11:08:20.470
> 
> 标签：php, forms

我被要求检查为什么这个表格不起作用。即使我对 php 一无所知，我确实有一个工作表格，我在这个特定的网站上测试过但没有工作。

这是当前代码。它看起来很糟糕，但别人写的，不是我

```
<script language="javascript">

function validaContato(){
    v_erro='';
    if ( document.formulario_contato.nome.value == '' ) { v_erro = v_erro+'- Nome\n'; }
    if ( document.formulario_contato.email.value == '' ) { v_erro = v_erro+'- E-mail\n'; }
    if ( document.formulario_contato.mensagem.value == '' ) { v_erro = v_erro+'- Mensagem\n'; }
    if ( v_erro != '' ) {
    alert('Por favor preencha os campos obrigatórios:\n\n'+v_erro);

return(false);
    } else {
return(true);
    }
}
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-XXXXXXX-1");
pageTracker._trackPageview();
} catch(err) {}
</script>

<?
    if ($acao == "Enviar") {
    $erro_campos = "";

    if(trim($nome) == ""){
    $erros_campos .= "\n» Nome";
    }

    if(trim($email) == ""){
    $erros_campos .= "\n» E-mail";
    }

    if(trim($mensagem) == ""){
    $erros_campos .= "\n» Mensagem";
    }

    if($erros_campos != ""){
    $msg = trim("Por favor preencha corretamente os seguintes campos:".$erros_campos);

    }else{

    $tmp_mensagem = "Mensagem enviada pelo formulário de contato<br>

<br>

    Nome: ".$nome."<br>
    E-mail: ".$email."<br>

<br>

    ".$mensagem."";
    $assunto = "SetecNet - Contato pelo site";

    $headers  = "MIME-Version: 1.0\n";
    $headers .= "Content-type: text/html; charset=iso-8859-1\n";
    $headers .= "From: SetecNet <xxxx@xxxxx.xx>\n";
    $headers .= "X-Mailer: EnvioCerto\n";
    if ( @!mail('xxxx@xxxxx.xx', $assunto, $tmp_mensagem, $headers) ) {
    $msg="Sua mensagem não pode ser enviada.\nTente novamente em alguns instantes.";

        } else {

    $msg="Sua mensagem foi enviada com sucesso.";

            $nome     = "";
            $email    = "";
            $ddd      = "";
            $telefone = "";
            $empresa  = "";
            $mensagem = "";
        }
    }
    ?>

<script language="JavaScript">
alert('<?=$msg?>');
</script>

<?
}
?>

  <td width="433"><input name="nome" type="text" class="caixatexto" id="nome" size="54" /></td>

                </tr>

                <tr>

                  <td class="textos">E-mail:</td>

                  <td><input name="email" type="text" class="caixatexto" id="email" size="54" /></td>

                </tr>

                <tr>

                  <td class="textos">Mensagem:</td>

                  <td><textarea name="mensagem" cols="56" rows="5" class="caixatexto" id="mensagem"></textarea></td>

                </tr>

                <tr>

                  <td height="25">&nbsp;</td>

                  <td><input name="acao" type="submit" class="botao" id="acao" value="Enviar" /></td>

                </tr>

              </form> 
```

正如我之前所说，我有一个我在这个网站上测试过的工作表。它没有用。它应该将信息提交到我的邮件，但它没有做任何事情

```
<script language=javascript>
function valida ()
{

if (document.example.name.value=="")
{
alert ('NAME field is empty!');
return false;
}

else if (document.example.email.value=="")
{
    alert ('EMAIL field is empty!');
    return false;
 }

else
{
return true;
}
}

</script>

<form name="example" id="example" action="submit-example.php" method="post" onsubmit="return valida();">    
<fieldset>

<label for="name">Name:</label>
<input type="text" name="name" id="name"/>

<br />

<label for="email">Email:</label>
<input type="text" name="email" id="email"/>    

<br />

<input type="submit" value="submit" />
</fieldset>
</form> 

<?php

$recebename = $_POST['name'];
$recebeemail = $_POST['email'];

$headers = "From: xxxx@xxxxx.xx\r\n";
$headers .= "Content-type:text/html; charset=utf-8";

$para = "xxxx@xxxxx.xx";

$mensagem   = "<h4>Name:</h4> ";
$mensagem  .= $recebename;

$mensagem  .= "<h4>Email:</h4> ";
$mensagem  .= $recebeemail;

$envia =  mail($para,"E-mail do Site",$mensagem,$headers);

// Envia um e-mail para o remetente, agradecendo a visita no site, e dizendo que em breve o e-mail será respondido.

$mensagem2  = "<p>Olá <strong>" . $recebename . "</strong>. Recebemos sua solicitação. Entraremos em contato em breve.</p>";

$mensagem2 .= "<p>Observação - Não é necessário responder esta mensagem.</p>";

$envia =  mail($recebeemail,"Sua mensagem foi recebida!",$mensagem2,$headers);

echo "Mensagens Recebidas com Sucesso!";
echo "<meta http-equiv='refresh' content='2;URL=http://www.google.com.br'>";
?> 
```

我不知道该怎么办了。有任何想法吗？我的意思是，代码是正确的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:21:52.993

onsubmit="返回验证（）；" 等于“return false”，因为没有定义valida，所以没有提交表单，改为

```
onsubmit="return validaContato();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:14:33.753

您使用 javascript 函数 valida() 。但似乎这不可用。我不确定，因为您的代码非常糟糕。

```
<form name="example" id="example" action="submit-example.php" method="post" onsubmit="return valida();"> 
```

这就是为什么这个函数在 onsubmit 和未提交表单时返回 false 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:14:47.273

您设置`onsubmit="return valida();"`了功能，但我无法`valida();`在您的脚本中看到功能。`validaContato()`我可以在你的脚本中看到函数。我认为您错误地返回函数`onsubmit`。

# c# - 如何异步运行

> ID：14727553
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:08:35.293
> 
> 标签：c#, multithreading, async-await

到目前为止，我必须并行加载两个大文件，我有这段代码

下面的代码是点击按钮方法

```
private async void MILoadLogFile_Click(object sender, RoutedEventArgs e) 
{       
    ...
    if (oFD.ShowDialog() == true)
    {
        await myLogSession.LoadCompassLogAsync(oFD.FileName);
        await myLogSession.LoadCoreServiceLogAsync(oFD.FileName);
    }
} 
```

加载方法：

```
public async Task LoadCompassLogAsync(String fileName)
{
    StreamReader streamReader = new StreamReader(fileName);
    if (fileName.Contains("Compass"))
    {
        ...
        try
        {
            using (streamReader)
            {
                //Console.Out.WriteLine("lineCount: " + lineCount);
                while (((line = await streamReader.ReadLineAsync()) != null)
                       && !CompassLogLoadCompleted)
                {
                    ...
                    loggingLvl = new LoggingLvl(eLoggingLvl);
                    CompassLogData cLD = new CompassLogData(id, dateTime, loggingLvl, threadId, loggingMessage);

                    await addRoCompassLogCollectionAsync(cLD);
                }
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

`LoadCoreServiceLogAsync`几乎与相同`LoadCompassLogAsync`。

两种加载方法依次运行。我希望它们并行运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:16:08.577

您的代码将一个接一个地运行一个任务。要并行运行这两个任务，您可以使用以下[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd270695.aspx)方法：

```
var loadCompassLogTask = myLogSession.LoadCompassLogAsync(oFD.FileName);
var loadCoreServiceLogTask = myLogSession.LoadCoreServiceLogAsync(oFD.FileName);
Task.WaitAll(loadCompassLogTask, loadCoreServiceLogTask); 
```

或者，如果您想使用`await`，可以使用[`Task.WhenAll`](http://msdn.microsoft.com/en-us/library/hh160374.aspx)：

```
var loadCompassLogTask = myLogSession.LoadCompassLogAsync(oFD.FileName);
var loadCoreServiceLogTask = myLogSession.LoadCoreServiceLogAsync(oFD.FileName);
await Task.WhenAll(loadCompassLogTask, loadCoreServiceLogTask); 
```

# php - PhpStorm 代码完成不显示核心类/扩展

> ID：14727557
> 
> 赞同：46
> 
> 时间：2013-02-06T11:08:42.117
> 
> 标签：php, ide, xampp, phpstorm

我在使用 PHPStorm 时遇到问题。我刚开始新项目创建了几个我自己的类，其中一个我创建了 PDO 对象。

```
$this->cnn = new PDO("sqlite:db/base.db"); 
```

现在，当我想通过 crtl + 空格查看这个对象有什么样的方法时，我没有得到任何建议。然后我尝试查看可供我使用的课程列表。

```
$newClass = new 
```

当我按下 ctrl + 空格时，它只显示了我创建的类。

所以问题是，我需要做什么才能让 PhpStorm 看到所有可用的类（不仅仅是我创建的类）。

PS 当我 ctrl + 单击 PDO（带下划线）时，它说类未定义

PPS 在项目设置中我选择了 php 5.4 语言并选择了解释器（php 5.4.7，使用 xampp）

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-06T12:38:05.410

我已经解决了这个问题。File > Invalidate Caches 成功了！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-06T14:44:58.810

我遇到了 PHPStorm 代码分析在使用某些类的某些文件上挂起（从未完成）的问题。没有报告错误，但所有代码完成在这些问题文件中都不起作用。

解决方案是相同的，File > Invalidate Caches。

# c# - 将单元格值从 GridView 导出到 SQL 表的基本方法

> ID：14727562
> 
> 赞同：1
> 
> 时间：2013-02-06T11:09:02.567
> 
> 标签：c#, sql, database, devexpress

我需要阅读关于如何将 DevExpress 中的 gridView 导出到 SQL 表的小课程。就像值 First Name、Father Name、Last Name 到表 Employee 一样，我有很多行。如何循环到每一行并将数据发送到数据库..

提前谢谢

我试过这段代码：

```
string sql = @"INSERT INTO Emp (@FName, @MName,@LName, @Code, @TaxNb, @SSN, @EmploymentType, @DOB, @MarStat, @RegNum, @BadgeNum, @HireDate, @TaxSince, @HireSince, @ArEmpName, @ArFatherName, @ArLastName, ArPayUnit)";

DataTable table = new DataTable();
try
{
    SqlConnection connection = new SqlConnection(@"workstation id = PC-PC; user id=sa;Password=sapassword; data source=pc-pc; persist security info=True;initial catalog=CleanPayrollTest2");

    SqlCommand command = new SqlCommand(sql, connection);
    SqlDataAdapter adapter = new SqlDataAdapter();
    adapter.InsertCommand = command;
    connection.Open();
    // for (int i =0; i< gridView3.RowCount; i++)
    //{
    //command.Parameters.Add(@FirstName, gridView3.GetRowCellValue(i,gridView3.Columns));
    //adapter.InsertCommand.ExecuteNonQuery();
    //}

    SqlParameter[] MyParams = new SqlParameter[28];

    MyParams[0] = new SqlParameter("@FName", SqlDbType.VarChar, 20);
    MyParams[0].SourceColumn = FirstName;
    command.Parameters.Add("@FName", SqlDbType.VarChar, 20);

    MyParams[1] = new SqlParameter("@MName", SqlDbType.VarChar, 20);
    MyParams[1].SourceColumn = FatherName;

    MyParams[2] = new SqlParameter("@LName", SqlDbType.VarChar, 20);
    MyParams[2].SourceColumn = LastName; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:43:46.407

从[SqlDataAdapter 类](http://msdn.microsoft.com/en-us/library/879f39d8.aspx)：

> SqlDataAdapter 充当 DataSet 和 SQL Server 之间的桥梁，用于检索和保存数据。

在您描述的场景中，不需要*“桥梁”*。您只需使用 a `SqlCommand`，将集合添加`SqlParameter`到其中，然后调用`ExecuteNonQuery()`以执行插入。

```
using(SqlConnection connection = new SqlConnection(@"workstation id = PC-PC; user id=sa;Password=sapassword; data source=pc-pc; persist security info=True;initial catalog=CleanPayrollTest2"))
{
    using(SqlCommand command = new SqlCommand(sql, connection))
    {
        try
        {
            connection.Open();  
            for (int i =0; i< gridView3.RowCount; i++)
            {
                SqlParameter parameter = new SqlParameter();
                // TODO: handle name accordingly (MName, LName etc.)
                parameter.ParameterName = "@FName";
                // TODO: handle type accordingly
                parameter.SqlDbType = SqlDbType.NVarChar; 
                parameter.Direction = ParameterDirection.Input;
                // TODO: use the field name accordingly
                parameter.Value = Convert.ToString(gridView3.GetRowCellValue(i, "FieldName"));
                // add the parameter to the command
                command.Parameters.Add(parameter);
            }
            command.ExecuteNonQuery();
        }
        catch(Exception)
        {
            // TODO: handle the exception
        }

    }
} 
```

备注：您应该在代码中处理与 SQL 相关的对象 - 一种方便的方法是使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句。

# model-view-controller - ZF2：禁用错误页面布局

> ID：14727563
> 
> 赞同：1
> 
> 时间：2013-02-06T11:09:02.613
> 
> 标签：model-view-controller, exception, zend-framework2, zend-view

我试图在我的 zf2 模块中显示错误/异常页面时禁用布局

但没有任何作用

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T20:46:48.643

我的 Module.php 中的最终解决方案

```
$eventManager = $e->getApplication()->getEventManager();

        $eventManager->attach(MvcEvent::EVENT_DISPATCH_ERROR, function($e) {
             $result = $e->getResult();
             $result->setTerminal(TRUE);

            }); 
```

它可以工作并且只加载错误/404视图文件而不是布局文件

谢谢安德鲁

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T13:39:47.107

如果您查看 Zend Framework 2 MVC 模块，您将看到这种可能性。

DispatchListener.php

```
 try {
        $return = $controller->dispatch($request, $response);
    } catch (\Exception $ex) {
        $e->setError($application::ERROR_EXCEPTION)
              ->setController($controllerName)
              ->setControllerClass(get_class($controller))
              ->setParam('exception', $ex);
        // look here...
        $results = $events->trigger(MvcEvent::EVENT_DISPATCH_ERROR, $e);
        $return = $results->last();
        if (! $return) {
            $return = $e->getResult();
        }
    } 
```

您可以看到当您在控制器内部抛出异常时触发的 MvcEvent，还有一些其他进程附加到此事件。

您可以将方法附加到此事件并做任何您想做的事情。

作为一个例子，看看 ExceptionStrategy.php

```
public function prepareExceptionViewModel(MvcEvent $e)
{
     ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T12:18:47.940

这不是你的答案，但它会对 zf2 中的其他人有所帮助

```
 public function indexAction()
    {    
        echo "json"
        return $this->getResponse();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-19T23:36:22.647

最简单的方法是使用配置`config/autoload/local.php`

```
return array(
    'view_manager' => array(
        'display_exceptions' => false
    )
); 
```

添加此行将禁用异常。此外，您可以`local.php`在开发服务器上使用自己的。

# iphone - 从其他两个函数调用相同的函数

> ID：14727567
> 
> 赞同：1
> 
> 时间：2013-02-06T11:09:29.920
> 
> 标签：iphone, ios, methods, ios6

我想知道是否有任何方法可以从其他两个函数调用相同的函数。

比如，..fucntion1 调用 MainFunction，然后在 function1 使用完 main 函数后，function2 应该调用 MainFunction。

我了解到这可以使用 NSOperation 队列来实现？但那是为了异步执行，我不希望这样。

有没有其他方法可以实现这一目标？

任何帮助将不胜感激，感谢您的宝贵时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:14:33.817

您可以使用`dispatch_sync()`. 它是[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) API 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:00:33.500

谢谢大家的帮助 ..！我最终使用委托来解决这个问题，我插入了一个委托回调，它在第一个函数使用 MainFucntion 完成后给了我一个回调，在获得回调后我使用 secondMethod 调用了 MainFucntion。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:25:44.950

使用下面的方法，它可能对你有帮助

```
[self performSelectorInBackground:(SEL) withObject:(id)] 
```

# java - 使用 JPA / Hibernate / MySQL 测试 JTA XA 分布式事务

> ID：14727570
> 
> 赞同：2
> 
> 时间：2013-02-06T11:09:46.070
> 
> 标签：java, hibernate, jpa, jta, xa

我的目标是拥有一个独立的解决方案，用于使用 JPA over Hibernate over MySQL 为本地和分布式事务构建 JUnit 测试。

到目前为止，我已经能够使用 XADataSource 访问 XAResource 并按照 2 阶段提交协议管理分布式事务。但是，我必须直接发出 SQL 语句。

我一直在尝试做同样的事情，但使用 JPA 2.0 持久性。我正在使用 simple-jndi 来实现内存中的 JNDI。

但是，每当 Hibernate 尝试访问 TransactionManager 时，我都会收到 NullPointerException。

有任何想法吗？我的配置中缺少什么？

这是我想做的事情：

```
 // Create the XA datasource instance directly
    MysqlXADataSource mysqlDS = new MysqlXADataSource();
    mysqlDS.setServerName("localhost");
    mysqlDS.setDatabaseName("test");
    mysqlDS.setUser("root");
    mysqlDS.setPassword("rootroot");

    // setup local JNDI
    final XADataSource xaDataSource = (XADataSource) mysqlDS;

    InitialContext ctx = new InitialContext(  );
    ctx.bind("java:/ExampleDS", xaDataSource);

    {
        System.out.println("Lookup...");
        Object o = ctx.lookup("java:/ExampleDS");
        System.out.println("Test lookup: " + o);
    }

    // XID - transaction ID

    // global transaction identifier
    // -      --          --
    byte[] gtrid = new byte[] { 0x44, 0x11, 0x55, 0x66 };

    // branch qualifier
    // -      ----
    byte[] bqual = new byte[] { 0x00, 0x22, 0x00 };

    // combination of gtrid and bqual must be unique

    Xid xid1 = new com.mysql.jdbc.jdbc2.optional.MysqlXid(gtrid, bqual, 0);
        // byte[] gtrid, byte[] bqual, int formatId

    // before transaction
    {
        XADataSource xaDS = (XADataSource) ctx.lookup("java:/ExampleDS");

        XAConnection xaconn = xaDS.getXAConnection();
        Connection conn = xaconn.getConnection();
        XAResource xares = xaconn.getXAResource();

        /* the transaction begins */
        System.out.println("Start transaction");
        xares.start(xid1, TMNOFLAGS);
    }

    // JPA code

    EntityManagerFactory emf;
    emf = Persistence.createEntityManagerFactory("MyPersistenceUnit"); // defined in persistence.xml
    EntityManager em = emf.createEntityManager();

    // System.out.println("begin");
    // em.getTransaction().begin();

    System.out.println("new ContactBook");
    ContactBook contactBook = new ContactBook("Alice");

    System.out.println("addContacts");
    contactBook.addContact("Alice", 100100100);
    contactBook.addContact("Bob", 200200200);
    contactBook.addContact("Charlie", 300300300);

    System.out.println("persist");
    em.persist(contactBook);
    //em.flush();

    // System.out.println("commit");
    // em.getTransaction().commit();

    // after transaction
    {
        XADataSource xaDS = (XADataSource) ctx.lookup("java:/ExampleDS");
        System.out.println("xaDS " + xaDS);

        XAConnection xaconn = xaDS.getXAConnection();
        Connection conn = xaconn.getConnection();
        XAResource xares = xaconn.getXAResource();

        System.out.println("End transaction");
        xares.end(xid1, TMSUCCESS);

        // prepare, commit

        System.out.print("Prepare... ");
        int rc1 = xares.prepare(xid1);
        System.out.println(xaString(rc1));

        if (rc1 == XA_OK) {
            System.out.println("Commit");
            xares.commit(xid1, /*onePhase*/ false);
        } else if(rc1 == XA_RDONLY) {
            System.out.println("Commit no necessary - operations were read only");
        } else {
            throw new IllegalStateException("Unexpected case!");
        }
    } 
```

这是persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="ContactBookPersistenceUnit" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/ExampleDS</jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.hbm2ddl.auto" value="create" />
        <property name="hibernate.show_sql" value="true" />

        <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>

        <property name="current_session_context_class" value="jta"/>
        <!-- <property name="hibernate.session_factory_name" value="java:/hibernate/MySessionFactory"/> optional -->

        <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory"/>
        <property name="hibernate.connection.release_mode" value="auto"/>
        <!-- setting above is important using XA-DataSource on SQLServer,
            otherwise SQLServerException: The function START: has failed. No transaction cookie was returned.-->

        <!--property name="hibernate.cache.use_second_level_cache" value="true"/-->
        <!--property name="hibernate.cache.use_query_cache" value="true"/-->

        <!-- property name="hibernate.cache.region.factory_class"   value="org.hibernate.cache.infinispan.InfinispanRegionFactory"/-->
    </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T16:29:45.680

我相信当你在 Java EE 容器之外时你不能使用 JTA 事务（或者至少没有简单的方法来做到这一点）。

**使用 RESOURCE-LOCAL**

在您的示例中没有什么需要 JTA：您只是在 Java SE 环境中查找数据源。我认为将您的 XA 数据源声明为*本地资源*可以解决您的问题。把它放在你的`persistence.xml`：

```
<persistence-unit name="ContactBookPersistenceUnit" transaction-type="RESOURCE-LOCAL">
    [...]
    <non-jta-data-source>java:/ExampleDS</jta-data-source> 
```

我没有直接测试过这段代码，但我在为 Apache Tomcat 服务器编写的 Web 应用程序中使用了类似的方法。

另请参阅：[EntityManager 的类型](http://piotrnowicki.com/2012/11/types-of-entitymanagers-application-managed-entitymanager/)

**使用嵌入式容器**

您可能会研究的另一个选项涉及在您的 JUnit 测试中启动嵌入式 Java EE 容器。以下是一些建议，包括 Glassfish 3 的示例：

*   [在单元测试中嵌入 Glassfish v3](http://www.adam-bien.com/roller/abien/entry/embedding_glassfish_v3_in_unit)
*   [嵌入式 Glassfish](http://embedded-glassfish.java.net/)

# android - Android Samsung SII 不加载 armv7a 库

> ID：14727572
> 
> 赞同：1
> 
> 时间：2013-02-06T11:09:47.427
> 
> 标签：android, arm, native-code

我有一个为 armv6 和 armv7a 加载库的 Android 应用程序。当我在三星 SII 中运行应用程序时，它会加载 armv6 的库。三星 SII 有一个 armv7 霓虹处理器，它应该加载 armv7a 库。我在三星 SIII 中测试了相同的应用程序，它加载了 armv7a 库。

任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:52:44.060

我怀疑这来自[此处](http://www.moodstocks.com/2012/03/20/ice-cream-sandwich-why-native-code-support-sucks/)描述的 System.loadLibrary() 错误。

综上所述，在 Ice Cream Sandwich 的某些版本的 Android SDK 上，这个功能（它应该找到所有具有正确名称的库并选择为正确架构编译的库）搞砸了，可以选择错误的架构。我怀疑这就是你在这里发生的事情。

我们找到的解决方案是根据它们的体系结构为库赋予不同的名称，然后自己选择要选择的库。这样，系统就不必在几个同名的库之间消除歧义。

为此，您首先必须检测您在哪个架构上运行：这可以使用`cpu-features.h`NDK 中包含的本机代码来完成，也可以使用`/proc/cpuinfo`Java 进行解析。找到设备的架构后，加载正确的库。在伪代码中，这将变为：

```
 arch = findArchitecture() // native function 
                              // or  Java function parsing /cpu/info
    switch (arch) {
        case armv7-neon: System.loadLibrary("lib-neon");
        case armv6: System.loadLibrary("lib-armv6");
        ...
    } 
```

希望这可以帮助！

# javascript - 拉动刷新脚本

> ID：14727576
> 
> 赞同：0
> 
> 时间：2013-02-06T11:09:50.350
> 
> 标签：javascript

我刚刚`jquery.mobile.pulltorefresh`从[这里下载](https://github.com/funayoi/jquery.mobile.pulltorefresh)

我已经将它上传到我的服务器进行测试，看看它是否是我想要使用的正确的......但是当你去它时：

[报价单](http://m.quotesin.com/pull/demo.html)

它根本不起作用。想想我有一个金发碧眼的日子，如果这不好，有人知道我可以使用的任何轻量级版本吗？而不是 Cubiq 一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:22:57.767

您的错误是您提到了 3 个找不到或无法访问的文件

这些文件是：

```
1\. jquery.mobile-1.0.js
2\. jquery-1.6.4.min.js
3\. jquery.mobile-1.0.css 
```

你可以通过在谷歌浏览器上打开你的链接来测试它右键点击页面然后点击检查元素

之后选择资源选项卡，然后在侧树视图中展开脚本链接，您可以发现这些文件未找到

# java - Java 进程无法通过 Runtime.getRunTime().exec() 获取 InputStream

> ID：14727579
> 
> 赞同：2
> 
> 时间：2013-02-06T11:09:57.240
> 
> 标签：java, linux, shell, runtime, bufferedreader

```
try {

        String str;
        Process process = Runtime.getRuntime().exec("bash /home/abhishek/workspace/Pro/run");
        InputStream isout = process.getInputStream();
        InputStreamReader isoutr = new InputStreamReader(isout);
        BufferedReader brout = new BufferedReader(isoutr);
        while ((str = brout.readLine()) != null) {
            System.out.println(str);
        }

} catch (IOException e) {
        e.printStackTrace();
} 
```

代码在从进程中获取 InputStream 时存在问题，因为如果我从终端运行 Shell 脚本，它运行得非常好，但是如果我像这样运行脚本，则 str 始终为空，

我正在使用此代码将 Shell 脚本的输出直接转换为 Java，而不是将脚本输出写入文件中

有没有其他方法可以实现这一点，或者如何使用当前方法解决问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:47:55.040

我认为通过错误流返回了一些东西，所以你可以尝试从**Process.getErrorStream()**中检查一些东西。

您还应该等待创建的进程以防止您的主程序在它之前完成。使用**Process.waitFor();**

```
public class TestMain {
   private static final String BASH_CMD = "bash";

   private static final String PROG = "/home/abhishek/workspace/Pro/run";

   private static final String[] CMD_ARRAY = { BASH_CMD , PROG };

   public static void main(String[] args) {
      new Thread(new Runnable() {
         public void run() {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                  System.in));
            String command = null;
            try {
               while ((command = reader.readLine()) != null) {
                  System.out.println("Command Received:" + command);
               }
            } catch (Exception ex) {
               ex.printStackTrace();
               // failed to listening command
            }

         }
      }).start();
      Process process = null;
      try {
         ProcessBuilder processBuilder = new ProcessBuilder(CMD_ARRAY);
         process = processBuilder.start();
         InputStream inputStream = process.getInputStream();
         setUpStreamGobbler(inputStream, System.out);

         InputStream errorStream = process.getErrorStream();
         setUpStreamGobbler(errorStream, System.err);

         System.out.println("never returns");
         process.waitFor();
      } catch (IOException e) {
         throw new RuntimeException(e);
      } catch (InterruptedException e) {
         throw new RuntimeException(e);
      }
   }

   public static void setUpStreamGobbler(final InputStream is, final PrintStream ps) {
      final InputStreamReader streamReader = new InputStreamReader(is);
      new Thread(new Runnable() {
         public void run() {
            BufferedReader br = new BufferedReader(streamReader);
            String line = null;
            try {
               while ((line = br.readLine()) != null) {
                  ps.println("process stream: " + line);
               }
            } catch (IOException e) {
               e.printStackTrace();
            } finally {
               try {
                  br.close();
               } catch (IOException e) {
                  e.printStackTrace();
               }
            }
         }
      }).start();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:20:59.690

可能的问题是当您获得 inputSram 时，子流程还没有准备好

尝试

```
Process process = Runtime.getRuntime().exec("bash /home/abhishek/workspace/Pro/run");
InputStream isout = process.getInputStream();    
process.waitFor() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:21:32.950

`/home/abhishek/workspace/Pro/run`如果它是外壳，请编辑您并在顶部添加以下行。

```
#!/usr/bin/bash 
```

并赋予`/home/abhishek/workspace/Pro/run`.

然后使用以下行

```
Process process = Runtime.getRuntime().exec("/home/abhishek/workspace/Pro/run"); 
```

现在，如果运行程序打印任何内容，您应该在输出中看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:24:07.087

你的代码看起来不错。因此，我认为问题出在您正在使用的命令行中 ( `bash /home/abhishek/workspace/Pro/run`) 或您的脚本本身。

我建议您执行以下步骤：

1.  尝试运行一些众所周知的命令而不是您的脚本。例如`pwd`. 检查从输入流中读取的代码是否正常工作。
2.  现在尝试简化您的脚本。`run1`创建运行相同的脚本`pwd`。现在从 java 运行这个脚本，看看它是否正常工作。顺便说一句，您不必将其作为`bash yourscript`. 可以不带`bash`前缀直接运行
3.  如果所有这些工作开始逐步从简单到您的真实脚本。我相信你会发现你的错误。可能您的脚本因某些与环境相关的问题而无法启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T11:43:30.603

尝试这样的事情：

```
String[] runCommand = new String[3];

runCommand[0] = "sh";
runCommand[1] = "-c";
runCommand[2] = "bash /home/abhishek/workspace/Pro/run";

Process process = runtime.exec(runCommand);
BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
String line = reader.readLine();
reader.close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-09T18:32:21.070

[在多次阅读https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/unix/classes/java/lang/ProcessImpl.java](https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/unix/classes/java/lang/ProcessImpl.java)的unix实现的源代码`Process`之后标准重定向将始终吞入 a ：`ProcessBuilder.NullInputStream`

```
 if (redirects[1] == Redirect.PIPE) {
        std_fds[1] = -1;
    }... 
```

和

```
 stdout = (fds[1] == -1 || forceNullOutputStream) ?
            ProcessBuilder.NullInputStream.INSTANCE :
            new ProcessPipeInputStream(fds[1]); 
```

（对于 stdIn、stdOut 和 stdErr 流重复相同的代码）

我发现的唯一一种感觉很笨拙的解决方法是使用临时文件：

```
 File stdOutTmp;  // create and destroy however you see fit
    ProcessBuilder pb = ...;
    pb.redirectOutput(ProcessBuilder.Redirect.to(stdOutTmp));
    ... 
```

还有其他静态工厂方法（`Redirect.appendTo(File)`附加到现有文件而不是覆盖现有文件，以及`Redirect.from(File)`用于 stdIn）

# c++ - C++ 没有命名类型

> ID：14727580
> 
> 赞同：2
> 
> 时间：2013-02-06T11:10:00.313
> 
> 标签：c++

在 C++ 中创建一些旧的数据结构。目前我遇到了一个双向链表类的问题：

列表.h：

```
template <class T>
class List{

private:

int size;

struct listNode{                        
    T data;
    listNode* next;
    listNode* prev;
    listNode(T newData);
};

listNode * head;                    
listNode * tail;                    
listNode * curr;                    
listNode * find(listNode * place, int k);   
void removeCurrent(listNode * temp);    
public:

List(); 
int getSize() const;                
void insert(int loc, T data);       
void remove(int loc);           
T const & getItem(int loc) const;   
void print(); 
```

};

列表.cpp：

```
#include "List.h"
#include <iostream>

using namespace std;

template<class T>
List<T>::List(){
size = 0;
head->next = tail;
head->prev = NULL;
tail->prev = head;
tail->next = NULL;

 }

// getSize: public method that returns the size of the list
template<class T>
int List<T>::getSize() const {
    return size;
}

// insert: public method that inserts data into the list
template<class T>
void List<T>::insert(int loc, T data){
    if(loc <1){
        cout<<"Invalid Location"<<endl;
        return;
    }
    curr = find(head,loc-1);
    listNode * newNode = new listNode(data);
    newNode->next = curr->next;
    newNode->prev = curr;
    newNode->next->prev = newNode;
    curr->next = newNode;
    size++;
}

// remove: public method that inserts data into the list
template<class T>
void List<T>::remove(int loc){
    if(loc <1){
        cout<<"Invalid Location"<<endl;
        return;
    }
    curr = find(head,loc);  // Find the node infront of the target
    removeCurrent(curr);    // Remove that node
}

// removeCurrent: helper function that removes the current node
template<class T>
void List<T>::removeCurrent(listNode* temp){
    listNode* t = temp->next;
    temp->data = t->data;       // HACK: take data from next node
    temp->next = t->next;
    t->next->prev = temp;
    delete t;
    t=NULL;
    size--;
}

// find: private helper function that returns a pointer to the k-1 node
template<class T>
listNode * List<T>::find(listNode * place, int k){
    if((k==0) || (place==NULL))
        return place;
    else return find(place->next,k-1);
}

// getItem: returns data at location loc
template<class T>
T const& List<T>::getItem(int loc) const{
    curr = find(head,loc);
    return curr->data;
}

// print: prints the sequence of variables in the list
template<class T>
void List<T>::print()
{
    curr = head;
    while(curr->next != tail){
        curr = curr->next;
        cout<<curr->data<<endl;
    }
}

//listNode constructor
template<class T>
List<T>::listNode::listNode(T newdata):data(newdata),next(NULL),prev(NULL)
{} 
```

我得到的错误如下：

> 错误：“listNode”没有命名类型。

我尝试了类似故障排除帖子中提供的不同建议，但我仍然收到此错误。我有一个包含 List.cpp 的 main.cpp，但它实际上是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:37:15.717

您将不得不`listNode`在方法的返回类型中指定您正在谈论的内容，`find`因为您将其定义为`List`类的成员并且您还必须使用`typename`（因为`List<T>`是依赖范围）。

```
template <class T>
typename List<T>::listNode* List<T>::find(listNode* place, int k)
{
    if ((k == 0) || (place == NULL))
        return place;
    else
        return find(place->next, k-1);
} 
```

假设您使用的是 c++11，您可能还想使用，`nullptr`而不是因为它更安全，并在构造函数`NULL`中使用初始化列表。`List`

# android - 如何从 ColorPicker 中选择不同的颜色并将其应用于 Android 中同一屏幕中的文本或不同形状？

> ID：14727581
> 
> 赞同：3
> 
> 时间：2013-02-06T11:10:03.363
> 
> 标签：android, android-canvas, paint, touchscreen, color-picker

![在此处输入图像描述](../Images/53767d4fe56ec6faea7eb297d0938e8d.png)

如果用户从颜色选择器中选择任何颜色，那么应该能够将其应用于 Android 中同一活动或屏幕中的文本或不同形状。

在我的屏幕上，有形状和颜色选择器。通过使用 onTouch 事件，我可以绘制不同的形状。我也可以在屏幕上写任何东西。在我的应用程序中，颜色选择器工作正常。

起初 - 如果我画三角形并写一些像“meena”这样的文字，然后从颜色选择器中应用蓝色，它工作正常

在第二个-在同一个屏幕中（在文本“meena”下方）我从颜色选择器中单击玫瑰色并选择不同的形状，如矩形，然后我写了一个单词苹果。这次我已经选择了玫瑰色。

因此，从第一步和第二步开始，整个不同的形状和文字都被应用在玫瑰色中。

我的问题是，用户如何从颜色选择器中选择不同的颜色，并且可以在同一活动或屏幕中使用触摸事件在触摸屏上书写文本或绘制不同颜色的不同形状？因此，在整个屏幕中可以找到不同的颜色。

但是，我的问题是，在整个屏幕上只应用了一种颜色。

我想将颜色选择器中的颜色应用于同一屏幕中的文本或像这样的活动。请参阅上图以供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:52:09.493

您需要使用油漆并更改颜色选择器选择的油漆颜色并使这样的代码无效

```
public class DrawPaint extends View{
Paint textPaint = new Paint();
Paint circlePaint = new Paint();

public DrawPaint(Context context){
    super(context);
    //set default colors for them 
    textPaint.setColor(Color.RED);
    circlePaint.setColor(Color.GREEN);
}

@Override
protected void onDraw(Canvas canvas){
    super.onDraw(canvas);
    canvas.drawText("mu text " , 0 , 0 , textPaint);
    canvas.drawCircle(10 , 10 , 20 , circlePaint);
}

public void changeTextColor(int color){
    textPaint.setColor(color);
    invalidate();
}

public void changeCircleColor(int color){
    circlePaint.setColor(color);
    invalidate();
}
} 
```

获取此视图的参考，当您从颜色选择器调用**changeColor**方法获取颜色时

或这是工作解决方案[Finger-Paint](https://github.com/nikt/Finger-Paint)

# graph - DEX 在性能上与 neo4j 相比如何？

> ID：14727582
> 
> 赞同：3
> 
> 时间：2013-02-06T11:10:07.303
> 
> 标签：graph, graph-databases

阅读 DEX 的内部结构以及它如何使用 BITMAP 索引来支持 OLAP 有点查询，它似乎绝对优于其他技术。有没有人有将它与 NEO4J、TITAN 等进行比较的实际经验？

# objective-c - 清除 CoreData 和里面的所有东西

> ID：14727583
> 
> 赞同：11
> 
> 时间：2013-02-06T11:10:09.293
> 
> 标签：objective-c, core-data, reset

我对 CoreData 和使用它的这个应用程序很陌生。我目前正在开发一个功能，当我在应用程序中注销时清除整个核心数据。

我有 2 个 sqllite 文件（出于某种原因，他们认为这很方便）

如何清除所有数据的两个文件并将它们重置为无数据状态？

我已经尝试了很多方法，遵循指南，关于 SO。

[如何以一对多关系清除/重置所有CoreData](https://stackoverflow.com/questions/14646595/how-to-clear-reset-all-coredata-in-one-to-many-realationship)

[如何从核心数据中删除所有对象](https://stackoverflow.com/questions/3266084/how-to-remove-all-objects-from-core-data)

他们似乎都对我失败了。现在我想知道我做错了什么？也许有人可以向我解释如何以正确的方式重置我的 2 个 CoreData 文件。

编辑：

```
//should clear the whole coredata database. mainly used for logout mechanism
-(void)resetCoreData
{
    for (NSPersistentStore *store in self.persistentStoreCoordinator.persistentStores)
    {
//    NSPersistentStore *store = self.persistentStoreCoordinator.persistentStores[0];
        NSError *error;
        NSURL *storeURL = store.URL;
        DLog(@"storeURL: %@", storeURL);
        NSPersistentStoreCoordinator *storeCoordinator = self.persistentStoreCoordinator;
        [storeCoordinator removePersistentStore:store error:&error];
        [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];

        DLog(@"There are erreurs: %@", error);
//    [self addDefaultData];
    }

    _persistentStoreCoordinator = nil;
    _managedObjectContext = nil;
    _managedObjectModel = nil;
} 
```

这似乎并没有为我清除 CoreData。

编辑2：

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"MyName" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSString *storePath = [[self applicationDocumentsDirectory]

                           stringByAppendingPathComponent:@"MyName.sqlite"];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    // If the expected store doesn't exist, copy the default store.
    if (![fileManager fileExistsAtPath:storePath]) {
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"MyName" ofType:@"momd"];
        if (defaultStorePath) {

            [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];

        }

    }

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

    //Check to see what version of the current model we're in. If it's >= 2.0,
    //then and ONLY then check if migration has been performed...
    NSSet *versionIdentifiers = [[self managedObjectModel] versionIdentifiers];
    DLog(@"Which Current Version is our .xcdatamodeld file set to? %@", versionIdentifiers);

    if ([versionIdentifiers containsObject:@"2.0"])
    {
        BOOL hasMigrated = YES;
        if (hasMigrated==YES) {
            storePath = nil;
            storePath = [[self applicationDocumentsDirectory]
                         stringByAppendingPathComponent:@"MyName2.sqlite"];

        }
    }

    NSURL *storeUrl = [NSURL fileURLWithPath:storePath];
    NSError *error;
    NSDictionary *pscOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                [NSNumber numberWithBool:NO], NSInferMappingModelAutomaticallyOption,
                                nil];

    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                    configuration:nil
                                                              URL:storeUrl
                                                          options:pscOptions
                                                            error:&error]) {
        DLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __persistentStoreCoordinator;
} 
```

* * *

编辑 3：我仍在寻找一种方法来重置我的 CoreData，就好像我删除了整个应用程序并重新启动它一样。这样做的通常方法不适用于我的情况。并且有 2 个 sqllite 文件。有迹象表明在应用程序中的某个时间点发生了迁移，但我不太确定何时以及如何迁移。错误日志显示没有任何用处。

我不是在寻找最有效的方法。只是方式。

## 帮帮我，赏金是你的。

编辑 4：最终结果：似乎我的旧代码实例化了第二个 ManagedObjectContext。我检索它并使用它执行刷新功能的那一刻。两个 sqlite 文件都根据需要消失了。

感谢所有为我的问题付出的努力。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-15T00:16:02.410

尝试以下方法刷新数据库，它非常适合我。

```
-(void) flushDatabase{
    [__managedObjectContext lock];
    NSArray *stores = [__persistentStoreCoordinator persistentStores];
    for(NSPersistentStore *store in stores) {
       [__persistentStoreCoordinator removePersistentStore:store error:nil];
       [[NSFileManager defaultManager] removeItemAtPath:store.URL.path error:nil];
    }
    [__managedObjectContext unlock];
    __managedObjectModel    = nil;
    __managedObjectContext  = nil;
    __persistentStoreCoordinator = nil;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T01:58:44.447

```
NSPersistentStoreCoordinator *storeCoordinator = self.persistentStoreCoordinator;
[storeCoordinator removePersistentStore:store error:&error];
[[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error]; 
```

因此，您要从持久存储协调器中删除持久存储，然后尝试删除该文件。但是仅仅从协调器中删除存储并不足以保证与存储关联的文件已经关闭，如果没有关闭，那么文件系统可能会阻止您删除文件。我无法从您的问题中判断您是否在这里使用 ARC，但是既然您说它是旧代码，那么您很有可能不是。无论哪种方式，如果删除存储导致它被自动释放而不是释放，或者如果您在任何地方保留对存储的任何其他引用，那么存储不会因为您从协调器中删除它而被释放，文件可能保持打开状态，删除文件将失败。

除了查看 提供的错误对象之外，查看实际情况的一个好方法是查看`-removeItemAtPath:error:`文件系统，并在尝试删除文件后查看文件是否仍然存在。转到管理器窗口，选择您的设备和应用程序，然后下载应用程序沙箱的副本。然后您应该能够看到该文件是否真的被删除了。

如果您确实看到文件正在按照您认为的方式被删除，那么请寻找可以恢复数据的其他方法。如果 UserA 注销，然后 UserB 在应用程序仍在运行时登录到应用程序，您确定您已经开始使用新的托管对象上下文吗？UserA 的数据是否可能保留在 MOC 中？然后可以在您创建和添加新商店时将其写出。我想到的另一种可能性是 iCloud 在这里“提供帮助”。我看到您的数据文件保存在 Documents 目录中，iOS 通常会尝试将该目录中的文件备份到 iCloud。也许当您为 UserB 的数据创建新存储时，iCloud 会将 UserA 的记录添加回该存储。（似乎不太可能——我很确定 iCloud 比这更复杂——但需要检查一下。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:13:44.133

我在我的一个应用程序的 AppDelegate 中使用此功能...

```
- (void)deleteAllCoreData
{
    NSPersistentStore *store = self.persistentStoreCoordinator.persistentStores[0];
    NSError *error;
    NSURL *storeURL = store.URL;
    NSPersistentStoreCoordinator *storeCoordinator = self.persistentStoreCoordinator;
    [storeCoordinator removePersistentStore:store error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];

    __persistentStoreCoordinator = nil;
    __managedObjectContext = nil;
    __managedObjectModel = nil;

    [self addDefaultData];
} 
```

它删除 CoreData 使用的持久存储并将其保留，以便在再次访问核心数据时设置一个新存储。

这是您提供的第二个链接中描述的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T07:03:31.530

如果您的应用程序可以创建文件，则只需在应用程序退出时将其删除。如果您对具有有价值的架构信息的数据库有一些概念，并且您只需要截断文件，那么核心数据中的情况并非如此......架构位于已编译的实体模型和 xcwhatever 文件中。

此外，我一定是读错了，因为如果您希望核心数据不是持久的，那么您使用的是错误的工具。

# c - 如何使 fgets 停止从键盘读取

> ID：14727585
> 
> 赞同：0
> 
> 时间：2013-02-06T11:10:13.800
> 
> 标签：c

我正在尝试运行某人的代码，而我是 c 新手，所以我在读取输入时遇到问题。以下循环从键盘读取它，但是当我完成时它不会停止

```
while (fgets(in_line, MAXLINE, stdin) != NULL ) {
    ...
} 
```

我必须输入任何类型的字符来模拟“NULL”吗？我试过 \0 但这似乎不起作用。

非常抱歉，这个问题可能已经出现了很多次，但我找不到合适的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:12:14.643

`fgets`当它到达 EOF 时，你会得到一个 NULL 。从键盘上，通常用 CTRL-Z（DOS/Windows，我认为 X 之前的 MacOS）或 CTRL-D（Linux/Unix/MacOS X）发出信号。

# java - 在java中修改方法参数或返回

> ID：14727586
> 
> 赞同：2
> 
> 时间：2013-02-06T09:01:37.687
> 
> 标签：java

我在android源代码中看到过这种方法。

```
 protected LocaleConfiguration doInBackground(Void... unused) {
                    LocaleConfiguration localeConfiguration = new LocaleConfiguration();
                    readConfiguration(Launcher.this, localeConfiguration);
                    return localeConfiguration;
                }
 private static void readConfiguration(Context context, LocaleConfiguration configuration) {
        DataInputStream in = null;
        try {
            in = new DataInputStream(context.openFileInput(PREFERENCES));
            configuration.locale = in.readUTF();
            configuration.mcc = in.readInt();
            configuration.mnc = in.readInt();
        } catch (FileNotFoundException e) {
            // Ignore
        } catch (IOException e) {
            // Ignore
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    // Ignore
                }
            }
        }
    } 
```

为什么不这样

```
 private static LocaleConfiguration readConfiguration(Context context) {
        LocaleConfiguration configuration = new LocaleConfiguration();
        DataInputStream in = null;
        try {
            in = new DataInputStream(context.openFileInput(PREFERENCES));
            configuration.locale = in.readUTF();
            configuration.mcc = in.readInt();
            configuration.mnc = in.readInt();
        } catch (FileNotFoundException e) {
            // Ignore
        } catch (IOException e) {
            // Ignore
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    // Ignore
                }
            }
        }
        return configuration;
    } 
```

修改参数而不是返回新值有什么好处

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:50:19.333

修改参数而不是返回新实例的优点是您将实例化的控制权交给调用代码 - 即您允许它重用现有实例。

“修改参数”方法允许您使用几种这样的方法来初始化对象。例如

```
LocaleConfiguration localeConfiguration = new LocaleConfiguration();
readConfiguration(Launcher.this, localeConfiguration);
readSomeOtherConfiguration(Launcher.this, localeConfiguration);
return localeConfiguration; 
```

可以说，您可以通过返回与作为参数传入的相同实例来做同样的事情，但我个人认为这是自找麻烦。

另一个可能的原因可能是如果实例化的成本很高，您可能想要回收旧对象。但是，您提供的代码似乎并非如此，这是一种优化，因此仅在绝对必要时才考虑这样做！

就个人而言，除非有特定的理由不这样做，否则我倾向于采用“返回新实例”的方法。我认为它更简单，并且降低了调用代码中出现细微错误的可能性。

# proxy - JMeter 代理不在 IE 8 中记录本地站点

> ID：14727588
> 
> 赞同：1
> 
> 时间：2013-02-06T11:10:19.253
> 
> 标签：proxy, jmeter

我正在使用 WAMP 和 opencart Web 应用程序学习 JMeterProxy。我使用 HTTP 代理服务器进行了录制。我配置了firefox，录制很顺利。但如果我使用的是 IE，似乎没有任何记录。我在 HTTP 代理中添加了一个树视图侦听器来记录记录，当我使用 IE 时没有记录任何内容。

一些观察：

> 1.  当我停止录制并且尝试使用 FF 访问本地站点时，它无法访问，但在 IE 的情况下我可以打开该站点。
> 2.  如果我浏览外部站点，则记录正在工作。
> 3.  我正在访问我的网站`http://localhost:81/opencart/index.php`，因为 IIS 使用 80 端口

我的问题是。

> 1.  我将如何解决这种情况。
> 2.  我应该在 IE 代理设置中进行哪些更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:13:31.890

我解决了这个问题，这是解决方案，根据 JMeter 文档

> 如果 JMeter 不记录浏览器 URL，例如`http://localhost/`or `"http://127.0.0.1/"`，请尝试使用非环回主机名或 IP 地址，例如`http://myhost/`or`"http://192.168.0.2/"`

所以提供主机名代替环回地址解决了这个问题

# html - 对于 HTML5

> ID：14727590
> 
> 赞同：0
> 
> 时间：2013-02-06T11:10:26.317
> 
> 标签：html, css, doctype, html4

我的网页中有一些 HTML5 标签。我用过`<!DOCTYPE html>`同一个网页......但我面临一些间距问题。我也尝试过`line-height:0px; and vertical-align`...但是由此引发了其他一些问题...所以我不能使用 line-height:0;...

我试图改变`<!DOCTYPE html>`为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

至此，所有问题都已得到修复并且工作正常..:)...

我只想知道添加方法是否正确

```
"<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">" 
```

在 HTML5 页面中......它是否会工作......或者我的 HTML4 标签还有其他方式......

谢谢...

编辑....

这是一些代码..请将其保存为 html 格式，然后查看...并尝试使用`"<!DOCTYPE html" only`...您会发现不同...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <style type="text/css">

.sharecon {
    border-bottom: 1px solid #E6E6E6;
    float: left;
    padding: 3px 0 6px;
    width: 100%;
    font-family:Arial; font-size:12px;
}
.dvleft {
    float: left;
}
.mleft5 {
    margin-left: 5px;
}
.text11 {
    color: #000000;
    font-size: 11px;
}
strong {
    font-weight: bold;
}
    </style>
</head>
<body>

<div class="sharecon">
<span class="dvleft mleft5">
<input id="abc123" type="checkbox" onclick="javascript:EmailBoxGetFocus();CheckUncheck(this,'abc@gmail.com');SetSelectedCount();EmailBoxLostFocus();" value="abc@gmail.com" name="dlstContacts$ctl00$checkBoxSpn">
</span>
<span class="dvleft mleft15" style="margin-left:4px; margin:2px;">
<strong class="text11" style="line-height: 12px">ABC Name</strong>
<br>
<span class="light_text11" style="line-height:12px;display:inline"> abc@gmail.com </span>
</span>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:05:07.880

XHTML 1.0 过渡 doctype 将许多浏览器置于[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)，这意味着一种故意破坏模式，其中浏览器或多或少地模拟已灭绝的 IE 版本，有许多错误和奇怪之处，或者进入[几乎标准模式](http://hsivonen.iki.fi/doctype/)，这是一种较少破坏的模式。使用`<!doctype html>`触发器标准模式，所以如果你的页面受到它的干​​扰，那是因为你的页面依赖于曾经在浏览器中常见的错误。

说要做什么并不容易。如果页面使用 XHTML 1.0 Transitional 文档类型，最好保持这种状态，直到页面的下一次完整修订（重写）。如果这是一个正在创建的新页面，它应该从一开始就设计为在标准模式下工作。

请注意，使用（或不使用）doctype 与对 HTML5 新奇事物的支持无关。浏览器完成与 HTML5 功能相同的工作。doctype 只是 a) 一个通过复杂规则选择浏览器模式的魔术字符串（主要影响 CSS 的正确应用方式）和 b) 一个用于指定要应用的语法规则的工具，如果您使用标记验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:15:22.907

通过添加它，您正在更改文档类型。请参阅[文档类型上的链接](http://www.w3schools.com/tags/tag_doctype.asp)

如果您在实际页面中遇到样式问题，您应该考虑更改相关的 CSS/HTML，如果是这种情况，您应该创建一个包含代码的新问题

# c# - 没有 Code First 模型创建的一对多关系实体框架

> ID：14727593
> 
> 赞同：1
> 
> 时间：2013-02-06T11:10:40.677
> 
> 标签：c#, asp.net-mvc, entity-framework

**编辑：（**简化的解决方案）我试图在可以有 N 张图片的广告实体中插入一个图片实体。图片与广告相关。

广告模型：

```
public class  Ad
{
    public int Id { get; set; }
    public string Title { get; set; }

    public virtual ICollection<Picture> Pictures { get; set; }
} 
```

图片型号：

```
public class Picture
{
    public int Id { get; set; }
    public string URL { get; set; }

    public int Ad_Id { get; set; }
    public virtual Ad Ad { get; set; }

    public int PictureType_Id { get; set; }
    public virtual PictureType PictureType { get; set; }
} 
```

图片类型型号：

```
public class PictureType
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

广告服务：

```
Picture picture = new Picture()
{
    Ad_Id = adId,
    Filename = newFileName,
    PictureType_Id = pictureType.Id
};

_pictureService.CreatePicture(picture); 
```

图片服务：

```
public void CreatePicture(Picture picture)
{
    _pictureRepository.Add(picture);
    _pictureRepository.Save();
} 
```

错误：此代码生成的查询是：

执行阅读器“插入 [dbo].[Pictures]([Name], [Filename], [URL], [PictureType_Id], [Ad_Id], [PictureType_Id1], [Ad_Id1]) 值 (null, @0, null, @ 1，@2，空，空）”

我得到了错误：

抛出：“无效的列名‘PictureType_Id1’。无效的列名‘Ad_Id1’。” (System.Data.SqlClient.SqlException) 异常消息 =“无效的列名 'PictureType_Id1'。\r\n无效的列名 'Ad_Id1'。异常类型 = “System.Data.SqlClient.SqlException”，异常 WinRT 数据 = “”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:47:59.993

您缺少广告和图片之间的 PK/FK 关系。默认值为 Ad_Id

```
public class Picture
{
    public int Id { get; set; }
    public string URL { get; set; }

    public int Ad_Id { get; set; }
    public virtual Ad Ad { get; set; }
} 
```

您的数据库中也需要相同的内容。

并且需要在实体之间定义关系（像这样）

```
this.HasMany(c => c.AdPictures)
    .WithRequired(p => p.Ad)
    .HasForeignKey(k => k.Ad_Id); 
```

* * *

根据附加信息，问题似乎是：

`Ad`与中间表有关系，`AdPicture`但`Picture`与哪里有直接关系`Ad`，因为它也应该与中间表有关系`AdPicture`？

这个：

```
public class Picture
{
    public int Id { get; set; }
    public string URL { get; set; }

    public virtual AdPicture AdPicture { get; set; }
} 
```

或这个：

```
public class Picture
{
    public int Id { get; set; }
    public string URL { get; set; }

    public virtual ICollection<AdPicture> AdPictures { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:32:09.153

这有意义吗？：

图片模型的变化：

```
public class Picture
{
    // Primary properties
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public string Filename { get; set; }
    public string URL { get; set; }

    // Navigation properties
    //public int PictureType_Id { get; set; }
    public virtual PictureType PictureType { get; set; }

    //public int Ad_Id { get; set; }
    public virtual Ad Ad { get; set; }
} 
```

广告服务的变化：

```
// Insert Picture 
Picture picture = new Picture()
{
    Ad = _adRepository.GetById(adId),
    Filename = newFileName,
    PictureType = _pictureTypeService.GetPictureTypeById(pictureType.Id)
};

_pictureService.CreatePicture(picture); 
```

其他一切都保持不变。

现在它正在工作，但它似乎不是最好的解决方案，因为我有 2 次往返数据库以获取 Ad 实体和 PictureType 实体。

我对吗？

# java - 基于表单的身份验证未重定向到登录页面

> ID：14727595
> 
> 赞同：0
> 
> 时间：2013-02-06T11:10:41.643
> 
> 标签：java, tomcat, form-authentication

我在 Tomcat 的 web.xml 中使用基于表单的身份验证。

```
<login-config> 
<auth-method>FORM</auth-method> 
<realm-name>Example Form-Based Authentication Area</realm-name> 
<form-login-config> 
<form-login-page>/LoginServlet</form-login-page> 
<form-error-page>/LoginServlet</form-error-page> 
</form-login-config> 
</login-config> 
```

在我的 WebApp 中，我有一个页面“Action.jsp”和一个过滤器（MyFilter.java）。我在 MyFilter 中打印用户名和会话 ID 的值。当会话超时时，页面 action.jsp 被打开并在过滤器日志中显示用户名为空。但它不会重定向到登录页面。可能是什么问题呢？

LoginServlet 只是重定向到登录页面。

```
 response.sendRedirect(response
              .encodeRedirectURL("/WebFwCore/web/pages/main.jsp")); 
```

在过滤器中我正在打印

```
 request.getRemoteUser();
    request.isUserInRole('something'); 
```

这将在 web.xml 中为 null

```
 <web-resource-name>View pages</web-resource-name>
                        <url-pattern>/jsp/ann/ann_main.jsp</url-pattern>
                        <url-pattern>/jsp/ann/ann_tcu.jsp</url-pattern>
                        <url-pattern>/jsp/ann/import_ann_files.jsp</url-pattern>
                        <url-pattern>/jsp/dtmf/dtmf.jsp</url-pattern>
                        <url-pattern>/jsp/languagetah/languagetag.jsp</url-pattern>
                        <url-pattern>/jsp/languagetah/action.jsp</url-pattern>
                        <url-pattern>/jsp/languagetah/languagetag_load_result.jsp</url-pattern>
                        <url-pattern>/jsp/languagetah/languagetag_load_error_detail.jsp</url-pattern>
                        <url-pattern>/jsp/tone/tone.jsp</url-pattern>
                </web-resource-collection>
        <auth-constraint>
                <role-name>fsNetworkingView</role-name>
                <role-name>fsNetworkingManage</role-name>
                <role-name>fsWebUIAllowAll</role-name>
        </auth-constraint> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:32:57.043

在 LoginServlet 中

*   `Request`从使用中检查会话`request.getSession(false);`

*   如果会话为空，则重定向到登录页面

*   在检查请求之前始终检查会话，因为请求可能是新鲜的（连同身份验证），但会话绑定的较早请求可能已过期

*   或者，您可以使用会话侦听器来捕获会话到期并根据应用程序的需求采取适当的行动。

# javascript - Javascript 应用程序内存处理

> ID：14727597
> 
> 赞同：0
> 
> 时间：2013-02-06T11:10:44.310
> 
> 标签：javascript, performance, oop, memory, browser

我有以下JS：

```
var z = function(){
return "string";
}

var x = function(){
      var y = new z();
      var div = document.createElement('div');
      div.innerHTML = y;
      document.body.appendChild(div);
      /*
            my code…hundreds of other functions. Entire app is js all data comes through sockets and elements created using JS
     */
} 
```

我有几个问题可能听起来很愚蠢，但我希望不会。

所以在'x'里面是'y'和'div'。现在，如果仅使用这两个元素，它们是否仍然“存在”在浏览器的 JS 中，还是消失了？
基本上我需要将它们设置为 null 以避免任何额外的内存被用于无用的项目。

此外，我使用 JS 编写了 25k 行，所有元素都是使用 JS 创建的。该应用程序会持续运行大约 9 个小时，直到他们关闭它，并在另一天重新开始。
但是在那几个小时里，我担心它会因为它的大小而变慢。这可能是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:12:06.620

就您的应用程序内存使用而言，每次`x()`调用它都会创建一个局部变量的临时实例`y`。一旦函数运行完成，这将被丢弃。 `X`是一个匿名函数，赋予它一个新的作用域。新变量将在此范围内，也`this`将成为函数对象，您可以使用`window`.

各种浏览器处理这种情况的方式会有所不同，但结果几乎相同。
浏览器一直在优化，以使它们在处理内存方面更高效，也更快。他们也在优化范围链查找成本，这应该会提高性能。

由于您的匿名函数的性质，`x()`有时浏览器运行其“垃圾收集”可能会减慢或停止脚本执行，但之后它应该可以正常运行。
现代浏览器中的 Javascript 引擎可以处理令人难以置信的处理，因为许多库（例如 jquery）需要大量处理。

我不会太担心 Javascript 引擎和你的 25k 行，这更多取决于你的代码本身和它在做什么。

# android - Android 注释和 viewpager 不支持

> ID：14727601
> 
> 赞同：1
> 
> 时间：2013-02-06T11:10:57.057
> 
> 标签：android

我正在使用具有 ViewPager 功能的 android 项目。相同的代码在其他 Eclipse 中运行良好。但在我的日食中，它显示出红色下划线。

在这里，我给出了我的代码。

```
class SwipeTickerAdapter extends PagerAdapter {

        LayoutInflater mInflater;

        SwipeTickerAdapter(Context mContext) {
            mInflater = LayoutInflater.from(mContext);
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {

            container.removeView((View) object);
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position) {

            ViewGroup pageView = (ViewGroup) mInflater.inflate(
                    mLayoutsticker[position], container, false);
            TextView b = (TextView) pageView.getChildAt(0);

            try {
                b.setText(annoncement_data.get(position * 2));
            } catch (Exception e) {
                e.printStackTrace();
            }

            b.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    int val = mTickerpager.getCurrentItem();
                    System.out.println("Clicked current item is ---" + val
                            + "&&&&&&&&&&" + annoncement_data.get(val * 2 + 1));
                    Resulttickettouch = annoncement_data.get(val * 2);

                    ArrayList<String> tickerSelectedValue = new ArrayList<String>();
                    tickerSelectedValue.add(annoncement_data.get(val * 2));
                    tickerSelectedValue.add(annoncement_data.get(val * 2 + 1));
                    startActivity(new Intent(mContext, HomeTickerPicker.class)
                            .putExtra("TickerValues", tickerSelectedValue));
                    ticket_ShowDialog();

                    // DemoPopupWindow dw = new DemoPopupWindow(v);
                    // dw.showLikeQuickAction(0, 30);
                }
            });

            container.addView(pageView);
            return pageView;

        }

        @Override
        public int getCount() {
            return legthticketview;
        }

        @Override
        public boolean isViewFromObject(View view, Object obj) {
            return view == obj;
        }

    } 
```

上面的代码要求我在 destroyItems 和 InstantiateItems 中删除 @override，如果我删除了覆盖行，那么再次要求我添加未实现的方法。并且还在 import android.annotation.TargetApi 中显示错误行；

帮我解决。

# ios - 在 IOS 6.1 中更改方向时，SplitViewController 的主端有时无法正确呈现

> ID：14727602
> 
> 赞同：2
> 
> 时间：2013-02-06T11:11:03.427
> 
> 标签：ios, objective-c, ipad, storyboard, uisplitviewcontroller

我有一个标签栏控制器，里面有一些标签。一些 tabitems 是 splitviewcontrollers。有时，当我改变方向时，splitview 控制器的左侧无法正确渲染，底部有一个黑色方块。通过再次改变方向，问题就解决了。

![在此处输入图像描述](../Images/3e87b31a3f85930f53038fb896ef14fd.png)

我的代码没有什么特别之处。在 viewdidload 我有：

```
[self.navigationController setNavigationBarHidden:YES];
self.splitViewController.delegate = self; 
```

并且简单地处理了一个 splitviewcontroller 委托方法：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:   (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
return NO;
} 
```

我什么都没有，只有一些表格视图，细节方面有一些单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:02:23.600

我见过这样的问题，我想出的唯一解决方法是重置左侧视图控制器视图的大小，也是导航控制器的视图：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    if (self.splitViewController) {
        viewHeight = ...
        navViewHeight = ...
        CGRect viewFrame = CGRectMake(0, 0, 320, viewHeight);
        self.view.frame = viewFrame;

        CGRect navControllerViewFrame = CGRectMake(0, 0, 320, navViewHeight);
        self.navigationController.view.frame = navControllerViewFrame;
    }
} 
```

viewHeight 和 navViewHeight 您可以根据当前方向（在调用 didRotateFromInterfaceOrientation: 时已设置）从屏幕高度计算。我想当你隐藏导航栏时，这些值对你来说应该是相等的。

# magento - 如何在magento中为产品创建价格格式

> ID：14727604
> 
> 赞同：0
> 
> 时间：2013-02-06T11:11:17.150
> 
> 标签：magento, magento-1.7

我是 Magento 的初学者。我可以为每个类别创建简单的产品。我有一个关于创建产品的查询。在管理面板中，我想在`managed product`菜单中创建一个自定义选项。在我的自定义选项中，可以生成一组产品尺寸`$89`，可以生成单个产品尺寸的顶部`$57`和底部的产品尺寸`$57`。在这个产品中可以取决于尺寸。

例如：选择选项 --product with same size ( `$89`) --product with different size (individual top `$57`and bottom `$57`)。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:48:41.820

我认为您要求的是根据特定产品组合设定价格的能力。

例如：

具有 和 的属性的产品`size`将`set`具有分配给它的特定价格。

*`set`将代表客户想要的服装部分（顶部、底部或顶部和底部）。*

**组合1** | 尺寸：10 | 套装：顶部 | 价格：57 美元

**组合2** | 尺寸：10 | 套装：底部 | 价格：57 美元

**组合3** | 尺寸：10 | 套装：顶部和底部 | 价格：89 美元

为此，您必须修改 Magento 处理相关产品定价的方式。您所做的是为每个组合创建一个简单的产品，然后将其分配给可配置产品。

然后，为了获得正确的定价，您可以安装[Simple Configurable Products](https://github.com/organicinternet/magento-configurable-simple)扩展。这将显示基于可配置的分配产品的定价。

例如，如果用户选择`Size: 10`并且`Set: Bottom`他们将获得价格，`$57`因为它与**组合 2**匹配。

如果用户选择`Size: 10`和`Set: Bottom & Top`，价格将变为 ，`$89`因为它与**组合 3**匹配。

* * *

**[一个警告]**

安装 Simple Configurable Products 插件将从根本上改变 Magento 在前端显示定价的方式。将不再有“基于百分比”的标记，基于属性值的降价。可配置产品的定价与分配给可配置产品的产品直接相关。

# jsf-2 - 带有验证错误的 JSF PRG

> ID：14727606
> 
> 赞同：4
> 
> 时间：2013-02-06T11:11:21.573
> 
> 标签：jsf-2, messages, post-redirect-get

我正在使用带有 PRG 模式的 JSF。（在我的导航规则中使用）。

问题是当我遇到验证错误（例如：用户未设置强制值）时，重定向没有完成（即，一个帖子后跟一个获取同一页面的内容）。

场景是：

1.  用户没有输入强制值并提交表单

2.  发生验证错误，并显示相同的视图并显示错误消息（无 PRG）

3.  用户设置强制值并提交 ==> 转到下一页（使用 PRG）

4.  用户单击返回按钮 => 问题，因为在第 2 步中没有完成 PRG。==> 在 Firefox 中出现“文档过期”屏幕

任何人都可以帮助我吗？

提前致谢。

斯蒂芬妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:39:46.287

只需通过ajax提交表单。这是添加的问题

```
<f:ajax execute="@form" render="@form" /> 
```

到命令链接和按钮。如果您使用的是`<h:message(s)>`，那么我假设它们的格式完全相同，否则您需要将它们的客户端 ID 添加到`render`.

通过 ajax 提交表单时的验证错误不会生成历史记录。

# jquery - 当用户单击链接时删除 list.js 中的分页

> ID：14727616
> 
> 赞同：2
> 
> 时间：2013-02-06T11:11:57.867
> 
> 标签：jquery, pagination, listjs

我正在使用 list.js 来过滤元素列表以及分页。要激活分页，必须添加以下内容。对象属性页确定每页上可见的项目数。我想在用户单击链接时停用分页，即删除它，以便所有项目都显示在一个页面上并且不分页。这可能吗？

```
 var options = {
            valueNames: ['packageid', 'categoryid',  'meta-package', 'meta-category', 'meta-brand', 'meta-company', 'meta-country'],
            page:24,
            plugins: [
                [ 'paging', {
                    name: "duja",
                    pagingClass: "bottomPaging",
                    innerWindow: 1,
                    outerWindow: 2
                } ]
            ]
        };

        var featureList = new List('products-list', options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T14:24:17.750

目前，您的代码设置为一次显示 24 个项目（因为您定义了`page:24,`）。您不能只忽略这一行，因为默认情况下 list.js 会将此值设置为 200，因此简单的解决方案是将值更改为一个非常大的数字，例如

```
page:1000000; 
```

# c#-4.0 - 无法按名称和 XPath 在 Selenium WebDriver 中找到元素

> ID：14727617
> 
> 赞同：3
> 
> 时间：2013-02-06T11:12:03.227
> 
> 标签：c#-4.0, xpath, selenium, automated-tests, selenium-webdriver

我正在使用 Selenium WebDriver 并编写了一个小代码来查找和元素（即一个按钮）并单击它。这是按钮的 HTML 代码：

```
<input type="submit" name="j_id0:j_id2:j_id3:j_id4:j_id7" value="New Master Health Program" onclick="AddLink()" class="btn"> 
```

下面是测试用例的 C# 代码：

```
IWebElement newMasterHealthProgramsLink = driver.FindElement(By.Name("j_id0:j_id2:j_id3:j_id4:j_id7"));
newMasterHealthProgramsLink.Click(); 
```

我也尝试使用 XPath：

```
IWebElement newMasterHealthProgramsLink = driver.FindElement(By.XPath("//input[@id='j_id0:j_id2:j_id3:j_id4:j_id5']"));
newMasterHealthProgramsLink.Click(); 
```

我找到了一个解决方案，说你一定没有实现 Wait for this。页面不等待完全加载并尝试查找元素。所以我添加了等待命令，但没有发生任何有用的事情。仍然收到相同的错误：

```
TestAutomation.Driver.Login:
OpenQA.Selenium.NoSuchElementException : The element could not be found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:45:44.913

由于您的元素位于 IFrame 中，因此您需要使用 WebDriver API“切换”到该 IFrame。

默认情况下，Selenium 将使用“顶部”框架，因此任何“查找元素”查询都将定向到最顶部的框架，并忽略任何子 IFrame。

为了解决这个问题，“切换”到当前 IFrame 会指示 Selenium 将任何请求推送到该帧。

`driver.SwitchTo().Frame()`

请注意，您需要一种访问帧的方法，可以通过它的 ID、索引（顶部帧为 0，下一帧为 1，等等）或名称。

另一个注意事项是，任何进一步的请求都将被定向到该 IFrame，而忽略任何其他请求，其中包括顶部的……因此，如果您需要访问顶部的框架，则需要切换回：

`driver.Switch().DefaultContent()`.

# google-apps-script - 如何在谷歌脚本中使用 Drive API 在文件夹中插入文件

> ID：14727620
> 
> 赞同：0
> 
> 时间：2013-02-06T11:12:16.907
> 
> 标签：google-apps-script, google-drive-api

我有一个文件夹，我想在其中插入一个文件....文件是一个图像，我在 photoURL 变量中提供了它的 url 我的代码：

```
var consumerKey="yourDomain.com";
var consumerSecret="yourSecretKey";
function image() {
         // Photo url
         var photoURL="photourl"

         // Getting content of Image
         var imageContent=UrlFetchApp.fetch(photoURL).getContent()      

         // Storing image into drive
       storeIntoDrive(imageContent)      
}

// Oauth Authentication
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey(consumerKey);
  oAuthConfig.setConsumerSecret(consumerSecret);
  return {oAuthServiceName:name, oAuthUseToken:"always"};
}

//  To store image into Google Drive
function storeIntoDrive(content){
  var base="https://www.googleapis.com/auth/drive.file"
  var url='https://www.googleapis.com/upload/drive/v2/files?uploadType=media'
  var fetchArgs=googleOAuth_('drives',base)
  fetchArgs.payload=content
  fetchArgs.method='POSt'
  fetchArgs.contentType="images/jpeg"
  fetchArgs.header={"title" : "demo", "mimeType" : "image/jpeg",
  "parents": [{
    "kind": "drive#fileLink",
    "id": "0B3qF7GcD2uDHc2J5d21haFJFc0k"
  }]}
  var result=UrlFetchApp.fetch(url,fetchArgs)
} 
```

它没有插入图像....我应该做些什么改变？？？？

它给出了错误：

返回代码 403 的请求失败。服务器响应：{“错误”：{“错误”：[{“域”：“usageLimits”，“原因”：“dailyLimitExceededUnreg”，“消息”：“未验证使用的每日限制已超过。继续使用需要注册。", "extendedHelp": " [https://code.google.com/apis/console](https://code.google.com/apis/console) " } ], "code": 403, "message": "已超过每日未经验证使用的限制。继续使用需要报名。” } }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:11:29.097

这是因为您的访问令牌问题，您必须获取“ [https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file) ”的访问令牌

下载最新的 google api 控制台并按照文档尝试。

# c# - WP后台文件传输，超过25个文件

> ID：14727621
> 
> 赞同：1
> 
> 时间：2013-02-06T11:12:21.650
> 
> 标签：c#, list, download, windows-phone, background-transfer

根据这个话题

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202959(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202959(v=vs.105).aspx)

我正在尝试从列表中下载超过 25 个 mp3 文件，在后台，我做了很多不同的尝试，基本上我尝试传递一个列表，删除下载的文件并再次调用该功能......但不起作用在后台使用应用程序......也许是因为它是一个变量？我应该存储到隔离存储中吗？这是最后的代码：

```
ObservableCollection<File> remoteFileList = new ObservableCollection<File>();

public void downloadList()
{
    if ((remoteFileList.Count > 0) && (BackgroundTransferService.Requests.Count() < 5))
    {
        File t = remoteFileList.First();
        BackgroundTransferRequest transfer = startDownload(t.Name);
        transfer.TransferProgressChanged += new EventHandler<BackgroundTransferEventArgs>(transfer_TransferProgressChanged);
        remoteFileList.Remove(t);
    }
}

public void transfer_TransferStatusChanged(object sender, BackgroundTransferEventArgs e)
{
    BackgroundTransferRequest b = e.Request as BackgroundTransferRequest;
    System.Diagnostics.Debug.WriteLine(b.TransferStatus);
    ProcessTransfer(e.Request);
    downloadList();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:46:50.760

要从队列中弹出项目`BackgroundTransfer`，您需要调用类`Remove()`中的方法`BackgroundTransferService`。一个队列中的请求不能超过 25 个而不弹出一些东西。

# c# - 目录路径作为字符串：确保 DirectoryPathSeparator 在字符串的末尾

> ID：14727623
> 
> 赞同：1
> 
> 时间：2013-02-06T11:12:31.040
> 
> 标签：c#, .net, path

.NET 中是否有一种方法可以自动在字符串路径的末尾附加反斜杠？

就像是：

```
var path = @"C:\Windows";
path = Path.GetPathWithSeperatorAtTheEnd(path);
Console.WriteLine(path); 
// outputs C:\Windows\ 
```

我目前做的是：

```
if (!path.EndsWith(@"\")) path += @"\"; 
```

**编辑：**我想要实现的是，如果我将文件名附加到我不需要担心的路径，就会发生这样的事情。或者除了附加路径和文件名之外还有其他方法吗？

```
var fullFilename = path + filename;
// path    : C:\Windows
// filename: MyFile.txt
// result  : C:\WindowsMyFile.txt 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:14:58.680

您可以使用：[`System.IO.Path.Combine`](http://msdn.microsoft.com/en-us/library/fyy7a5kt%28v=vs.100%29.aspx)

例子：

```
var path = @"C:\Windows";
path = Path.Combine(path, "win.ini");
// path is @"C:\Windows\win.ini" 
```

# c# - 用户定义的转换错误

> ID：14727627
> 
> 赞同：2
> 
> 时间：2013-02-06T11:12:42.563
> 
> 标签：c#, .net, casting

我的解决方案中有 2 个项目，一个`web-service`项目和一个`win-forms`项目。我想将 web 服务的返回数据转换为 win-forms 数据。我在两个项目中都定义了类**终端。**在 win 应用程序中，我编写了这个演员表：

```
static public implicit operator List<Terminal>(EService.Terminal[] svcTerminals)
{
    List<Terminal> terminals = new List<Terminal>();
    foreach (var svcTerminal in svcTerminals)
    {
        Terminal terminal = new Terminal();
        terminal.TerminalID = svcTerminal.TerminalID;
        terminal.TerminalTypeID = svcTerminal.TerminalTypeID;
        terminal.TerminalGUID = svcTerminal.TerminalGUID;
        terminal.Description = svcTerminal.Description;
        terminal.Name = svcTerminal.Name;
        terminal.PortID = svcTerminal.PortID;
        terminals.Add(terminal);
    }

    return terminals;
} 
```

但它不起作用并给出错误*user-defined conversion must convert to or from enclosure type*，这发生在**List** cast 中。但是在**终端**演员中一切都很好

```
static public implicit operator Terminal(EService.Terminal svcTerminal)
{
    Terminal terminal = new Terminal();
    terminal.TerminalID = svcTerminal.TerminalID;
    terminal.TerminalTypeID = svcTerminal.TerminalTypeID;
    terminal.TerminalGUID = svcTerminal.TerminalGUID;
    terminal.Description = svcTerminal.Description;
    terminal.Name = svcTerminal.Name;
    terminal.PortID = svcTerminal.PortID;
    return terminal;
} 
```

谁能帮我解决这个问题，以便我可以

```
return (List<Terminal>)eService.CheckTerminal(guid, ref cityName, ref portName); 
```

代替

```
List<Terminal> terminals = new List<Terminal>();
var svcTerminals = eService.CheckTerminal(guid, ref cityName, ref portName);
foreach (var svcTerminal in svcTerminals)
{
    Terminal terminal = new Terminal();
    terminal.TerminalID = svcTerminal.TerminalID;
    terminal.TerminalTypeID = svcTerminal.TerminalTypeID;
    terminal.TerminalGUID = svcTerminal.TerminalGUID;
    terminal.Description = svcTerminal.Description;
    terminal.Name = svcTerminal.Name;
    terminal.PortID = svcTerminal.PortID;
    terminals.Add((Terminal)svcTerminal);
}
return terminals; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:18:16.717

你可以做：

```
eService.CheckTerminal(guid, ref cityName, ref portName).Select(x => (Terminal) x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:20:29.537

MSDN 说

> 要转换的参数的类型或转换结果的类型，但不能同时是两者，必须是包含类型。

因此，为了让他工作，您需要将您的转换运算符声明移动到您要转换到（或从）的类中，即`List<Terminal>`or `EService.Terminal[]`。由于您无法将方法添加到标准类中，因此我建议您使用此方法而不是运算符，或者使用 LINQ。

# python - 使用 Python 进行 _simple_ 模板的最快方法

> ID：14727628
> 
> 赞同：0
> 
> 时间：2013-02-06T11:12:52.240
> 
> 标签：python, performance, templating

在使用 cheetah 和 mako 的最低功能（仅用于替换）一段时间后，我开始问自己是否只使用 string.Template 对我的用例来说不是更好更简单的方法（更少的依赖）。此外，我想知道将这些模板导入为 .py 文件以避免每次调用时都使用 .open() 是否合理。这会使处理模板稍微复杂一些，但除此之外我会节省很多系统调用。

你们有什么感想？ *我很清楚我目前的模板对于我将要经历的 99.9% 的用例来说足够快。*

感谢您的任何输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T17:07:54.907

经过大量尝试和阅读后，我发现核心库中的 string.Template 是最快的——我只是将其包装在自己的简单类中以封装文件访问/读取等。

# jquery - 如何将数组传递给jquery中的函数

> ID：14727633
> 
> 赞同：6
> 
> 时间：2013-02-06T11:13:02.850
> 
> 标签：jquery, html, arrays

我希望将一个数组传递给一个函数（你能告诉我我是否在正确的轨道上吗？）

然后在函数中，我希望遍历数组中的值并将每个值附加到 HTML 中的以下 LI 元素中

这是我到目前为止用户将在他想要传递的 URL 值中编码的内容：

```
var arrValues = ['http://imgur.com/gallery/L4CmrUt', 'http://imgur.com/gallery/VQEsGHz'];
calculate_image(arrValues);

function calculate_image(arrValues) {
    // Loop over each value in the array.
    var jList = $('.thumb').find('href');
    $.each(arrValues, function(intIndex, objValue) {
        // Create a new LI HTML element out of the
        // current value (in the iteration) and then
        // add this value to the list.
        jList.append($(+ objValue +));
    });
}
} 
```

HTML

```
<li>
    <a class="thumb" href="" title="Title #13"><img src="" alt="Title #13" /></a>
    <div class="caption">
        <div class="download">
            <a href="">Download Original</a>
        </div>
        <div class="image-title">Title #13</div>
        <div class="image-desc">Description</div>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:29:40.063

如果您想传入一个数组，只需将其作为参数放入即可。在 Javascript 中，您可以将数字、字符串、数组、对象甚至函数作为参数传入。

请参阅此示例以获取缩略图生成器实现：http: [//jsfiddle.net/turiyag/RxHys/9/](http://jsfiddle.net/turiyag/RxHys/9/)

首先，定义数组。

```
var bluearray = [
    'http://fc02.deviantart.net/fs30/f/2008/056/8/0/Purple_hair___Bipasha_Basu_by_mstrueblue.jpg',
    'http://static.becomegorgeous.com/img/arts/2010/Feb/20/1805/purple_hair_color.jpg',
    'http://img204.imageshack.us/img204/6916/celenapurpleqp7.jpg'
    ];
var greenarray = [
    'http://25.media.tumblr.com/tumblr_m7fqmkNEhc1qlfspwo1_400.jpg',
    'http://www.haircolorsideas.com/wp-content/uploads/2010/12/green-red-hair.jpg',
    'http://fc02.deviantart.net/fs71/i/2010/011/9/c/Neon_Yellow_and_Green_Hair_by_CandyAcidHair.jpg'
    ]; 
```

然后在加载 DOM 时，调用函数来加载缩略图。

```
$(function() {
    addThumbs(bluearray);
    addThumbs2(greenarray);
}); 
```

addThumbs 使用 jQuery 的 each 函数使事情变得更简洁。我发现它看起来更好，并且更好地使用普通的 Javascript for 循环。

```
function addThumbs(paths) {
    $.each(paths,function(index, value) {
        $("div").append('<img src="' + value + '" />');
    });
} 
```

但是如果你是原生 Javascript 的粉丝，那么普通的 for 循环是在 addThumbs2 中实现的

```
function addThumbs2(paths) {
    for(index in paths) {
        $("div").append('<img src="' + paths[index] + '" />');
    }
} 
```

# c - Linux 在运行时写入进程自己的可执行文件

> ID：14727637
> 
> 赞同：-2
> 
> 时间：2013-02-06T11:13:12.453
> 
> 标签：c, linux, runtime, executable

我希望能够将一些配置信息存储在可执行文件（C 程序）内的 char 数组中。而且我需要在运行时修改该数组的内容。但我无法从进程中打开文件。所以...有可能吗？如果是的话——有什么诀窍？提前谢谢了。

[1] 问题是如何做而**不是**一个好主意吗？

[2] 我想在运行时写入 PROCESS' OWN EXEC 只是因为我很好奇如何做到这一点。让我们把它想象成有点 o hacking。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:35:05.843

解决了。使用 fork() + execl() 组合我制作了可执行文件的副本，修改它没有任何问题，然后使用 fork + execl mv 我将原始可执行文件替换为修改后的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:46:15.333

既然你已经知道这是个坏主意，我就不再费心说了。

您最好阅读一些有关可执行文件格式的信息。该文件可能是 ELF 格式，但您可以使用`file`命令检查它。

一般来说，一个文件是分节构建的，每个变量在节内都有一个偏移量。
该`nm`命令可以告诉您给定符号的部分和偏移量。
每个部分都从文件中的给定偏移量开始。我认为该`objdump`命令可以找到这些偏移量。

它不适用于 BSS 部分中的符号（未初始化的静态变量） - 这些值不存储在文件中 - 只是它们应该在加载时分配的事实。

一旦你有了这些偏移量，一切都很简单——添加它们、打开、查找、写入、关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:17:30.600

写入可执行文件几乎肯定是错误的做法。这里最简单的方法是使用配置文件，然后将其读取到您的 char 数组中。

# php - 将带有数组项的行更新到数据库php中

> ID：14727643
> 
> 赞同：1
> 
> 时间：2013-02-06T11:13:25.203
> 
> 标签：php, sql, arrays

我正在尝试使用从爆炸数组中提取的值更新数据库中的记录

```
 $arr2 = explode(",",$_POST['hidden-tags']); 
   //echo $arr2[0];

   //insert new rows into blog post
    mysql_select_db($db, $db);
 $insertq = mysql_query("UPDATE blog SET tags1 = $arr2[0],tags2 = $arr2[1],tags3 = $arr2[2], tags4 = $arr2[3], tags5 = $arr2[4]  WHERE idblog = '$id' ",$dbconnet); 
```

如果我一次回显我的数组中的值，效果很好。一旦我尝试将它们放入数据库中，该行就会变为空。更重要的是，用户可能没有输入 5 个项目，他们可能只输入了 1 个，但我认为这不是问题所在。老实说，我不明白为什么它目前正在失败。

我知道我可以将所有值保存在一个字段中，但是当我稍后返回并查询时，将其作为单独的字段会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:17:45.483

如果列的数据类型是字符串，则值必须用单引号引起来，因为它们是字符串文字。例如，

```
$insertq = mysql_query("UPDATE blog SET tags1 = '". $arr2[0] . "',...."); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:18:57.337

它应该是这样的：

```
$insertq = mysql_query("UPDATE blog SET tags1 = "'.$arr2[0].'",tags2 = "'.$arr2[1].'",tags3 = "'.$arr2[2].'", tags4 = "'.$arr2[3].'", tags5 = "'.$arr2[4].'"  WHERE idblog = "'.$id.'" ",$dbconnet); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:19:49.633

我认为您可能需要查看表的数据类型。如果您使用 varchar 或 text 作为数据类型，则需要单冒号。

```
$insertq = mysql_query("UPDATE blog SET tags1 =' $arr2[0]',tags2 = '$arr2[1]',tags3 = '$arr2[2]', tags4 = '$arr2[3]', tags5 = '$arr2[4]'  WHERE idblog = '$id' ",$dbconnet); 
```

此外，如果**idblog**是整数，则不要使用单引号。

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T11:16:11.647

```
$insertq = mysql_query("UPDATE blog SET tags1 = $arr2[0],tags2 = $arr2[1],tags3 = $arr2[2], tags4 = $arr2[3], tags5 = $arr2[4]  WHERE idblog = '$id' ",$dbconnet); 
```

应该：

```
$insertq = mysql_query("UPDATE blog SET tags1 = '".$arr2[0]."',tags2 = '".$arr2[1]."',tags3 = '".$arr2[2]."', tags4 = '".$arr2[3]."', tags5 = '".$arr2[4]."'  WHERE idblog = '".$id."' ,$dbconnet); 
```

或者整个查询将变量名称视为字符串的一部分

编辑：我把引号倒过来了。

# php - 使用 curl 检索带有 cookie 的响应

> ID：14727653
> 
> 赞同：1
> 
> 时间：2013-02-06T11:13:49.107
> 
> 标签：php

我正在尝试检查具有特定 url 的服务器上是否存在 cookie。

```
 $ch=curl_init();
//curl_setopt ($ch, CURLOPT_COOKIE, "mm=38533;" );
curl_setopt($ch,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_COOKIEFILE,'/tmp/cookies.txt');
curl_setopt($ch,CURLOPT_URL,'http://www.engageya.com');
curl_setopt($ch, CURLOPT_HEADER, 1);
$response=curl_exec($ch);
// get cookie
preg_match('/^Set-Cookie:\s*([^;]*)/mi', $response, $m);

curl_close($ch);

var_dump(parse_url($m[1]));
echo "<br/>".$response; 
```

问题是当我登录到目标站点时，我需要检查我是否登录到该站点，所以我尝试从该站点检索 cookie..但我失败了。我想使用 curlopt_cookie 选项..但我想是否有一种简单的方法可以从服务器返回 cookie 并检查它是否存在。

简而言之，当我浏览该页面时，cookie 就存在。但是当请求返回并且我打印它时它不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:18:33.970

似乎目标主机不可用。可能是 url 中的拼写错误，或者它真的不可用。我在 curl 中添加了以下选项：

```
curl_setopt($ch, CURLOPT_VERBOSE, 1); 
```

现在我可以看到以下错误：

```
* getaddrinfo(3) failed for www.engagya.com:80
* Couldn't resolve host 'www.engagya.com' 
```

* * *

更新：修复了 url 中的错字后，我得到了以下示例：

```
<?php

$ch=curl_init();
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_URL,'http://www.engageya.com/wordpress/api/?action=isloggedin&uid=22472');
curl_setopt($ch, CURLOPT_HEADER, 1);
$response=curl_exec($ch);
curl_close($ch);

// use preg_match to get the cookie as in your question:
preg_match('/^Set-Cookie:\s*([^;]*);/mi', $response, $m);
var_dump($m); 
```

# android - 由于内部每个片段的无效，ViewPager 性能问题

> ID：14727654
> 
> 赞同：1
> 
> 时间：2013-02-06T11:13:49.807
> 
> 标签：android, performance, android-viewpager

题外话：谢谢你的时间，对不起我的英语。

问题是刷卡时的延迟`ViewPager`。

使用的配置是`TabHost`带有选项卡（和虚拟内容）的，`ViewPager`带有四个片段并`FragmentPagerAdapter`对其进行管理。

所有 4 个片段都有一个列表，其中一些在布局中带有其他小部件。事情是 2 个片段，或者这些片段中的 2 个列表非常重。列表项`LinearLayout`包含约 10 个加权项，其中包含一个`CursorAdapter`. 我知道这里存在着大问题，但我一直在努力寻找这个“百分比宽度”列表项的方法，但没有任何运气。

但是，经过一些日志后，我发现 3 个托管片段在每次滑动期间都“无效”。我的意思是“无效”，因为我看到的是每个列表绑定项目很多（很多）次。并且由于重新绘制了 3 个列表，包括我的 2 个重列表，因此出现了滞后。

我的代码还有两件事要指出：我正在使用光标加载器，我确定这不是娱乐的原因，因为滑动时不会出现加载器回调。在`FragmentPagerAdapter.onPageSelected`我只更新当前选项卡。

设置`ViewPager.setOffScreenPageLimit`(3) 以保持 4 个片段存活会使事情变得更糟。即使当我从片段 3 滑动到 4 时，第一个片段上的列表也会重新渲染，这是我真正不想要也不理解的。

我的解决方法是使用 将`onPageSelected`当前列表视图的可见性设置为 Visible，其他隐藏。通过这些方法，滞后消失了（比如说 95%），但我可以看到，当我在创建之前滚动空列表视图时。

我想问一下，如果我在某些时候错了，也许错过了一个重要的想法。如果有人有可能的解决方案，也许会避免那些娱乐（我不知道如何），或者，如果其他人也一样，并且没有办法解决它。

我将尝试寻找`ViewPager`源代码，但我刚刚打开了文件 woouu.. 我将尝试获得一个有此问题的测试项目。

非常感谢。

# xcode - 找不到此可执行文件的有效配置文件...（再次）

> ID：14727655
> 
> 赞同：50
> 
> 时间：2013-02-06T11:13:53.157
> 
> 标签：xcode, certificate, provisioning-profile

我知道这已被多次询问和回答，但由于所提出的解决方案似乎都不起作用，我正在撕扯头发。

![在此处输入图像描述](../Images/d1aa08bc1395ff7226b3b1e8dd8cdaa6.png)

尽管有一个有效的配置文件，据我所知，它与捆绑标识符匹配，但我收到了上述错误：

![在此处输入图像描述](../Images/22bda62c7a4dd3058e33c0ac10cafcbb.png)

[我已按照此处](https://stackoverflow.com/questions/8424017/xcode-could-not-find-a-valid-private-key-certificate-pair-for-this-profile-in-yo)和[此处](https://stackoverflow.com/questions/2714517/getting-a-valid-signing-identity-matching-this-profile-could-not-be-found-in-yo/4583218#4583218)的建议执行了此站点上各种建议解决方案中的步骤，包括删除所有现有证书并重新开始。

我注意到的一件事是，无论是目标还是项目，配置文件都没有出现在代码签名列表中。

任何人都可以提供任何进一步的建议吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-05-02T23:21:48.657

这件事昨天发生在我身上。发生的事情是，当我添加设备时，Xcode 默认将其包含在错误的配置文件中。由于 Apple 更新了配置门户，这更容易解决：

1.  登录 developer.apple.com/ios 并点击 Certificates, Identifiers & Profiles
2.  单击设备并确保列出有问题的设备
3.  单击配置文件 > 全部，然后选择您要使用的配置文件
4.  点击编辑按钮
5.  您将看到另一个设备列表，该列表也有一个标签，可能会显示“已选择 4 个设备中的 3 个”或类似的内容。
6.  选中全选框或滚动列表并检查设备。如果您的设备未选中，这就是您的问题。
7.  点击“生成”
8.  **不要**点击下载和安装 - 虽然这会起作用，但如果您已经安装了配置文件，它可能会搞砸您的项目文件（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/1760518/codesign-error-provisioning-profile-cannot-be-found-after-deleting-expired-prof)）。
9.  打开 Xcode，打开 Organizer，切换到 Devices 选项卡，点击右下角的 Refresh 按钮。这将引入对配置文件的更改。

现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-07-18T04:36:41.400

如果上述方法均无效，请检查您的设备日期，确保您的设备日期不超过配置文件的到期日期，即未设置为遥远的未来。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-10-15T13:06:33.667

+1 把我的头撞到墙上一两天......

还要检查此设置：

> 构建设置 -> 代码签名 -> 配置文件

完成上述步骤后，“自动”设置对我有用。~kjm~

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-10-09T10:01:59.007

```
File > Workspace Settings > Set Build system to "Legacy Build System" 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-01-03T15:53:50.687

Xcode5*再次*打破了这一点（恭喜 Apple 未能测试他们最错误的代码之一。再次）。

打破/修复它的新方法：

如果你有：

1.  您设备上的旧配置文件（团队配置文件或非团队配置文件）
2.  由*任何 Xcode5 副本在 App Store 上自动生成的新配置文件，即使它只是对您已有配置文件的更新*
3.  （注意：如果*任何同事*将自己添加到个人资料中，则会触发上述“更改”）
4.  您使用新的“帐户”对话框下载配置文件（注意：Apple 现在在各种情况下都需要这样做 - 所有其他方法，包括手动下载，似乎都不受支持。即使 Apple 开发人员网站告诉您手动下载！不要不要这样做！它破坏了 Xcode5！）
5.  Xcode5 将在 Build Settings 的下拉选择器中错误地隐藏和重命名该配置文件
6.  （我讨厌这个下拉菜单。Apple 的一些白痴不断从中删除信息，而其他人不断添加它，它在 Xcode 点版本之间切换。为什么？？！？！）
7.  您无法选择正确的配置文件 - 无论您选择什么，Xcode5 都会使用错误的配置文件

解决方案很简单。“苹果工程很懒惰”的解决方案：

1.  转到 Xcode5 -> 窗口 -> 管理器 -> 设备
2.  选择您的设备
3.  选择配置文件
4.  删除与您当前项目和/或团队相关的所有内容（如果需要，甚至是其他项目 - 如果仍然需要，它们都可以在以后下载！）
5.  重建。
6.  您应该从 Xcode5 收到配置文件不存在的错误。即使您手动选择了机器上已经存在的配置文件（是的 - 该下拉列表又是错误的。它在于它在幕后选择的配置文件！）
7.  在配置文件选择器中，选择“真实”配置文件
8.  构建，运行 - 成功！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-06-10T22:12:07.540

当我不小心将构建置于发布模式时，这发生在我身上。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-06-18T09:42:32.500

如果您的配置文件已过期，则可能会发生这种情况。另一个原因可能是您的设备日期超过了配置文件的到期日期。请确保您的设备日期正确。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-01-03T11:49:56.613

花了一天时间后，我意识到这是项目设置中的一个简单更改

**文件 -> 项目设置... -> 构建系统 -> 旧版构建系统。**

在项目设置中，您将看到名为 Build System 的下拉菜单，并在该下拉菜单中选择 Legacy Build System

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-24T12:41:14.330

1.  从您尝试使用配置文件的帐户的钥匙串中删除所有证书
2.  删除派生数据
3.  清理文件夹(cmd+sht+alt+k)
4.  清理项目(cmd+sht+k)
5.  构建和运行

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-09T19:46:42.333

就我而言，这是在新的程序许可协议发布之后，所以我们不得不接受它们，这很好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-08-29T10:19:13.180

我有这个错误是因为我正在测试我的应用程序以在将来执行某个操作。换句话说，我在测试设备上的时间不同，因此证书不允许我构建。

显然，我的证书将在几天后到期...

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-08-30T05:50:48.043

就我而言，这是我两个月前在 iPhone 上手动设置时间时的问题。但是当我改为自动设置时间时，它工作得很好。

`Setting`-> `General`-> `Date & Time`->`set time automatically`

如果它不起作用，然后自动设置 mac 和 iPhone 的时间，它可能会正常工作。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-10-07T19:37:29.490

我花了大约一个星期来解决这个问题。大多数答案有点神奇（这些算法没有逻辑目的），它们对我**没有**用。我在 Xcode 控制台中发现了这个错误：

```
ERROR ITMS-90174: "Missing Provisioning Profile - iOS Apps must contain a provisioning profile in a file named embedded.mobileprovision." 
```

并找到解决此问题的[答案](https://stackoverflow.com/a/52605878/10463050)。案例是将 Xcode Build 系统切换到 Legacy 系统。

我正在部署我的 Ionic 应用程序。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-04-03T07:27:31.583

在浪费了我半天的时间后，我得到了这个工作。

```
Select Target > Edit Scheme > Select Run > Change Build Configuration to debug 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-15T13:52:12.577

我仍然不确定问题是什么，但删除所有证书并重新开始（尽管两次）最终解决了它。

我最好的猜测是我错过了该程序的一些小而重要的细节。不幸的是，我不能比这更具体。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-07-01T12:33:07.373

确保您已添加设备 - [https://developer.apple.com/account/ios/device/create](https://developer.apple.com/account/ios/device/create)

进入 iTunes 并单击序列号，它将更改为 UDID - 然后右键单击复制 UDID 并将其注册为您的设备。

然后，您可以将该设备添加到您的配置文件中。

# breeze - 微风示例在 IE 中不起作用

> ID：14727660
> 
> 赞同：0
> 
> 时间：2013-02-06T11:14:00.977
> 
> 标签：breeze

我创建了一个 MVC 4 应用程序（WebAPI 或空）并加载 Breeze NuGet 包并按他们说的按 F5，如果我在 Google Chrome 或 Page Inspector 中运行一切顺利，如果我在当前 IE 10 中运行我得到最后一行的一个例外：

```
(function (root) {
    var ko = root.ko,
        breeze = root.breeze,
        logger = root.app.logger;

// service name is route to the Web API controller
var serviceName = 'api/BreezeSample';

// manager is the service gateway and cache holder
var manager = new breeze.EntityManager(serviceName); 
```

本质上 root.breeze 是未定义的，知道为什么会这样吗？浏览器将如何影响它？我将如何解决它？（我正在使用 VS 2012 Express for Web 并加载了所有更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:04:59.733

阿德里安，

我试图复制你的错误，但不能。以下是我用来在 IE10 中启动和运行它的步骤（也使用 VS Express 2012 for Web）：

1.  **文件**
2.  **新项目...**
3.  **ASP.NET MVC 4 Web 应用程序（Visual C#）**
4.  **空的**
5.  **工具**
6.  **库包管理器**
7.  **管理用于解决方案的 NuGet 包...**
8.  搜索**微风**。
9.  **为 ASP.NET MVC4 Web Api 示例**安装Breeze 。
10.  **好的**
11.  **我接受**
12.  **关**
13.  **F5**

一切都按预期工作。

我知道这与您遇到的错误不同，但如果它让您感觉更好，我第一次尝试时失败了，因为我选择了**ASP.NET MVC 4 Web 应用程序（Visual Basic）**而不是**C#**版本。一旦我意识到错误，肯定会失败和尴尬。

# javascript - GruntJS - 如何在 grunt.js 中添加一行？

> ID：14727661
> 
> 赞同：0
> 
> 时间：2013-02-06T11:14:16.103
> 
> 标签：javascript, gruntjs

我对此完全是新手，所以我无法弄清楚这一点。我已经通过 npm 成功安装了 GruntJS，但现在必须在我的 grunt.js 文件中添加一些内容。我该怎么做？这个文件是否需要放在我的项目 JavaScript 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:54:19.087

gruntfile 应该放在项目的根目录下。

我将从阅读[文档](https://github.com/gruntjs/grunt/wiki)开始。

# php - 如何在数组复选框上显示/隐藏提交按钮

> ID：14727665
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:14:30.007
> 
> 标签：php

我如何将这个[http://jsfiddle.net/8YBu5/24/](http://jsfiddle.net/8YBu5/24/)应用到我的代码中，如下所示。即使在表单加载时选中或取消选中复选框，它也只隐藏我的提交按钮...

```
foreach($results as $result) {
<input type ='checkbox'  name ='studid[]' value='". $result['studId']."' id='checky' >
echo ' ', $result['fname'],'  ',$result['mname'],' ',$result['lname'],'<br/>';
}
        <input type="submit" name="select"  value="Select" id='postme' > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:26:50.783

你可以使用这样的东西：

```
$(document).ready(function(){
   $('.checky').click(function()
   {
        if($(".checky:checked").length == 0) {
            $('#postme').hide();
        } else {
            $('#postme').show();
        }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:17:16.743

```
foreach($results as $result) {
<input type ='checkbox'  name ='studid[]' value='". $result['studId']."' class='checky' >
echo ' ', $result['fname'],'  ',$result['mname'],' ',$result['lname'],'<br/>';
}
        <input type="submit" name="select"  value="Select" id='postme' > 
```

和

```
$('.checky').click(function(){
   $('#postme').toggle();
}); 
```

这只是为了选择所有复选框，而不仅仅是一个。HTML 页面中不应有重复的 id。

但是这段代码很愚蠢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:28:33.653

你的html

```
<input type="checkbox" id="checky"><a id="link" href="#">terms and conditions</a>
<input type="submit" id="postme" value="submit"> 
```

现在 jQuery

```
$('#checky').click(function(){
   $('#postme').toggle();
    if(checky.checked == false) {
        $('#link').hide();
    } else {
        $('#link').show();
    }
}); 
```

CSS：

```
#postme{ display: none; } 
```

小提琴：http: [//jsfiddle.net/8YBu5/24/](http://jsfiddle.net/8YBu5/24/)

# iphone - 为 NSInputStream 和 NSOutputStream 设置超时

> ID：14727670
> 
> 赞同：2
> 
> 时间：2013-02-06T11:14:45.313
> 
> 标签：iphone, ios6

任何人都可以帮助设置 NSInputStream 和 NSOutputStream 类的超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T18:13:51.547

苹果似乎不支持这个。答案是创建一个计时器，或者在适用时使用线程。

# c# - 与 ElementName 绑定的条件 CommandParameter，路径是子项的子项

> ID：14727673
> 
> 赞同：1
> 
> 时间：2013-02-06T11:14:47.150
> 
> 标签：c#, wpf, commandparameter

我有以下层次结构 -

```
<TabControl x:Name="tabControl1" FontWeight="Black" BorderThickness="1" BorderBrush="Black" Background="LightBlue" >
  <local:ClosableTab Background="LightBlue" Title="New Tab" x:Name="PreviewWindow">
    <Grid>
      <Border Name="mask" Background="Black" CornerRadius="5"/>
      <Grid>
        <Grid.OpacityMask>
          <VisualBrush Visual="{Binding ElementName=mask}"/>
        </Grid.OpacityMask>
        <WebBrowser Name="webBrowser" Source="http://www.google.com" Margin="0" Navigated="webBrowser_Navigated" />
      </Grid>
    </Grid>
  </local:ClosableTab>
</TabControl> 
```

**问题**

1.  如何通过 tabControl1 的选定 TabIndex 将 WebBrowser 与 CommandParameter 绑定

我正在尝试以下代码 -

```
<Button Name="btnRefresh" Content="Refresh" Command="{Binding Path=Refresh}" CommandParameter="{Binding ElementName=tabControl1,Path=SelectedIndex}"></Button> 
```

2.  我怎样才能有条件地做到这一点。例如，如果 SelectedIndex>3 那么命令应该触发。

**更新**

我的目标是通过 ViewModel 命令刷新网络浏览器。.xaml 文件有不同的选项卡和自己的 WebBrowser，所以通过 SelectedIndex，我可以找出我想在 CommandParameter 中传递的 WebBrowser。

# perl - Perl 中的 Soap 客户端，带有 wsdl Web 服务的身份验证

> ID：14727675
> 
> 赞同：1
> 
> 时间：2013-02-06T11:14:51.293
> 
> 标签：perl, wsdl, jax-ws, soap-client

我正在尝试在 perl 中为带有身份验证的 JAX-WS Web 服务制作 SOAP 客户端。我无需身份验证即可与服务进行通信。但是，当我尝试与实际的网络服务（具有身份验证）进行通信时，我收到授权错误或肥皂 xml 未格式化错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:57:33.780

试试这个代码

```
my $user="testUser";
my $password="testPassword";

my $service_url='https://api.example.com/services/soap.wsdl';

my $client = SOAP::Lite->service($service_url); 

$client->on_fault(
 sub { # SOAP fault handler
     my $soap = shift;
        my $res = shift;
        # Map faults to exceptions
        if(ref($res) eq '') {
            die($res);
        } else {
            die($res->faultstring);
        }
        return new SOAP::SOM;
 }
);

my @headers = (
    SOAP::Header->name('username')->value($user),

    SOAP::Header->name('password')->value($password),

);

# make the call
my $result = $client->getVersion(@headers);

print $result . "\n\n"; 
```

# jquery - 使用 jquery .append() 添加的 jsf comandLink 不起作用

> ID：14727679
> 
> 赞同：0
> 
> 时间：2013-02-06T11:15:00.127
> 
> 标签：jquery, jsf

我用 jquery 添加了一些代码`.append()`

```
$('#div').append('<div id="windiv">'+
            '<h:commandLink id="cmdbtn">'+
            '<div id="reducebtndiv" class="btn"></div>'+
        '<f:ajax event="click" execute="@form"'+
                'listener="#{screenShotBean.takeScreenshot}" ></f:ajax>'+
                    '</h:commandLink>'); 
```

但 commandLink 不起作用。所以问题是，有没有办法让它工作？我也很高兴知道一些关于此的理论。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:25:09.700

`commandLink`不起作用，因为您使用由客户端（浏览器）运行的 JavaScript 添加它。

JSF 视图（由 JSF 组件组成）需要在服务器端进行处理，当它们被渲染时，它们会输出可以被浏览器处理的适当的 HTML 元素。JSF 组件不是标准的 HTML 元素，因此它们不能被浏览器识别。

很难猜出您想要实现什么，但是，如果您想动态添加一些 JSF 组件，那么您需要触发对服务器的 AJAX 请求并重新呈现需要插入这些组件的视图部分（当然是 HTML）。

# linq - 比较非常大的列表 通过 LINQ to Entities 使用数据库表

> ID：14727681
> 
> 赞同：1
> 
> 时间：2013-02-06T11:15:18.933
> 
> 标签：linq, linq-to-entities

我的应用程序中有一个包含 GUID 和 100,000 多条记录表的字符串列表，其中包含一个实体框架模型。

在不存在 GUID 列表的特定数据集中查找所有记录的最有效方法是什么？

以下执行非常缓慢：

```
var list= new List<string> { "1", "2", "3" };

return (from t1 in db.Items
where (!list.Contains(t1.GUID)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:11:38.467

当我有很多参数（数百个或更多）查询时，我使用批量插入临时表，然后从主表加入它。

我的代码看起来像这样：

```
 private static DataTable FillDataTable(IEnumerable<int> keys) {
        var dataTable = new DataTable("Stage");
        dataTable.Locale = CultureInfo.CurrentCulture;
        dataTable.Columns.Add("Key", typeof(int));

        foreach (var key in keys) {
            var row = dataTable.NewRow();
            row[0] = key;
            dataTable.Rows.Add(row);
        }

        return dataTable;
    }

    private static void CreateStageTable(SqlConnection connection, string tableName, DataTable dataTable) {
        var sql = new StringBuilder();
        sql.AppendLine("CREATE TABLE {StageTableName} ( ");
        sql.AppendLine("       Key INT NOT NULL ");
        sql.AppendLine(") ");

        sql.Replace("{StageTableName}", SqlUtilities.QuoteName(tableName));

        using (var command = connection.CreateCommand()) {
            command.CommandText = sql.ToString();
            command.CommandType = CommandType.Text;
            command.ExecuteNonQuery();
        }

        using (var bulkcopy = new SqlBulkCopy(connection)) {
            bulkcopy.DestinationTableName = tableName;
            bulkcopy.WriteToServer(dataTable);
        }
    }

 public void DoQuery(IEnumerable<int> keys) {
      var dataTable = FillDataTable(keys);

       using (var connection = new SqlConnection(_connectionString)) {
            connection.Open();

            CreateStageTable(connection, "#Stage", dataTable);

            string sql =   "SELECT x " +
                           "FROM tbl " +
                           "     LEFT JOIN {StageTableName} AS Stage " +
                           "          ON x.Key = Stage.Key "
                           "WHERE Stage.Key IS NULL";

            ...
        }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:59:49.187

不要使用 a `List`，使用 a `HashSet<string>`，这将为您提供***O(1)***查找而不是***O(n)***。

# debugging - 如何使用 Makefile 项目制作 GCC 调试转储？

> ID：14727683
> 
> 赞同：0
> 
> 时间：2013-02-06T11:15:23.513
> 
> 标签：debugging, gcc, makefile

标题说得很好。我有一个使用 Makefile 的大型项目。如何使用 GCC 进行项目范围的调试转储（例如 -fdump-tree-gimple）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:52:44.590

对于每次编译器执行（即每次，您在源文件上或使用选项调用 gcc），您必须传递`-fdump-tree-gimple`（实际上放置任何传递名称而不是`gimple`，甚至转储所有树传递）到编译字符串。任何源文件名的形式转储都会出现在工作目录（通常是构建文件夹）中（XXX 是像 003 这样的密码，取决于 gcc 版本）。此外，您可能希望指定在单个转储目录中收集所有转储，这可能很方便避免混乱。`all``-c``filename.c.XXX.gimple``-dumpdir`

您将如何在您的 makefile 中执行此操作 - 由您决定。您可以将其添加到`$CFLAGS`（最常见的解决方案，因为转储**是**编译标志的一部分），或者创建特殊变量并将其传递，或者在 makefile 中对其进行硬编码。

如果您使用 lto 构建项目，则必须在第二个链接阶段也传递这些标志（即添加到 LDFLAGS 左右）。

# css - 如何在 IE 9 中制作圆角按钮？

> ID：14727687
> 
> 赞同：1
> 
> 时间：2013-02-06T11:15:35.217
> 
> 标签：css, internet-explorer-9

```
.button_style
{
    color:#FFF;
    text-shadow: 0 -1px 0 rgba(0,0,0,0.3);
    background: #2faa51;
    background: -moz-linear-gradient(top, #2faa51 0%, #207337 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2faa51), color-stop(100%, #207337));
    background: -webkit-linear-gradient(top, #2faa51 0%, #207337 100%);
    background: -o-linear-gradient(top, #2faa51 0%, #207337 100%);
    background: -ms-linear-gradient(top, #2faa51 0%, #207337 100%);
    background: linear-gradient(to bottom, #2faa51 0%, #207337 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2faa51', endColorstr='#207337', GradientType=0 );
    border:1px solid #178636;
    padding:0px 5px;
    white-space:nowrap;
    font-size:13px !important;
    line-height:20px;
    font-weight:bold;
    -webkit-border-top-left-radius:15px;
    -webkit-border-bottom-left-radius:15px;
    -webkit-border-bottom-right-radius:15px;
    behavior: url(images/ie-css3.htc); 
    border-radius: 15px 15px 15px 15px;

} 
```

尝试了 ie-css3 和上面的 CSS，但只能找到雕刻的圆角（轮廓）但没有圆角。边缘仍然是尖角。如何从所有四个侧面使它成为圆角按钮。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:27:35.113

IE 不需要前缀：

```
border-radius: 15px 15px 15px 15px; 
```

使用 IE9，重要的步骤是使用边缘 META 标记（在标题中）：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

> “edge”表示“使用最新的渲染引擎”，因此 IE 9 将使用 9，10 使用 10，以此类推。

并提供行为黑客：

```
behavior: url(images/ie-css3.htc); 
```

# json - Drupal + Pathauto + 服务 (json)

> ID：14727688
> 
> 赞同：1
> 
> 时间：2013-02-06T11:15:40.057
> 
> 标签：json, drupal

我使用[服务](http://drupal.org/project/services)模块并以 json 格式输出`http://localhost/?q=mb_services/node/1.json`

现在我还启用了 pathauto 并将 node/1 别名为 a-content。

我的问题是访问 json 的正确 url 是什么？我试过`http://localhost/?q=mb_services/a-content.json`但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:26:59.553

路径是：

http://"你的域名"/"你的rest服务路径"/?q="你的资源路径"/system/connect.json

# matlab - 具有上索引值且介于零之间的 Matlab 向量

> ID：14727692
> 
> 赞同：0
> 
> 时间：2013-02-06T11:15:56.853
> 
> 标签：matlab, vector, indices

在Matlab中，我给出了一个索引列表（例如a = [2 7]）和值（例如b = [123 642]。我需要一个函数f，它返回一个向量（c），其中的值在给定的索引和之间的零。

所以：c = [0 123 0 0 0 0 642]

我该如何执行此任务？

问候，

文森特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:20:14.420

您可以使用线性索引：

```
c = zeros(1,max(a)); %Not required if c does not exist, but I would recommend it
c(a) = b 
```

# datastore - 在 CKAN 中采集时将 CSV 数据保存到数据存储中

> ID：14727695
> 
> 赞同：3
> 
> 时间：2013-02-06T11:16:01.757
> 
> 标签：datastore, ckan

我正在构建一个自定义收割机，用于将数据从外部站点导入 CKAN（1.8 版）。

它工作得很好，并创建了元数据和与之关联的资源。我想在导入阶段收集这些资源并创建一个新的 CSV 以将其保存在数据存储中。

我知道我可以使用 DataStore API，但我不想使用 HTTP（对我来说，将 API 密钥/用户/URL/...提供给有权添加内容的收割机是没有意义的）

是否可以直接从收割机调用 DataStore API 函数？ [https://github.com/okfn/ckan/blob/master/ckanext/datastore/logic/action.py](https://github.com/okfn/ckan/blob/master/ckanext/datastore/logic/action.py)

每个函数都采用一个未记录的上下文参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:40:53.343

您在这里要做一些不同的事情：

*   将 CSV 转换为适当的 python（或 JSON）结构以插入数据存储区
*   插入数据存储

对于后者，您可以使用：

*   [逻辑动作](https://github.com/okfn/ckan/blob/master/ckanext/datastore/logic/action.py)（直接）
*   数据存储[API](http://docs.ckan.org/en/latest/datastore-api.html)

API 只是调用逻辑操作（加上进行身份验证），因此这些操作非常相似，但如果您已经在编写代码，逻辑方法可能会更快并且可能更自然。也就是说，API 可以在概念上更清晰，因为您以定义的 Web API 的形式对不同组件有很好的边界。

对于前者（即 CSV 到 JSON 的转换），建议您使用[Data Converters 库](https://github.com/okfn/dataconverters)，尤其是 commas.py 部分，它可以准确地转换为您需要的格式。有一个基于 Data Converters 的完整 Web 服务正在开发中，但尚未完全投入使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:48:50.907

我通过使用ckanext-datastorer（用于DataStore）和ckanclient（用于上传文件）解决了这个问题

ckanclient 存在 CKAN 1.8 的错误，因为它不能正确处理重定向。我们解决了这个出血和肮脏的补丁[https://gist.github.com/mammadori/4945812](https://gist.github.com/mammadori/4945812)

更好的解决方法是完全删除 urllib 并将整个 ckanclient 更改为使用请求。

谢谢你的支持

# mysql - 两个保存点之间的嵌套事务回滚？

> ID：14727697
> 
> 赞同：1
> 
> 时间：2013-02-06T11:16:08.223
> 
> 标签：mysql, sqlite, postgresql, transactions

对于三种 SQL 类型（MySql、SQLite 和 PostgreSQL），我希望/需要以相同的方式处理保存点。

现在我的应用程序可以在一个大事务中更改数据库中的不同条目，并且需要一些嵌套事务来实现程序的特殊行为。

所以问题是，如果我创建类似的东西：

```
BEGIN TRANSACTION;
--random insert/update statements
SET SAVEPOINT sp1;
--more random inserts/updates
SET SAVEPOINT sp2;
--inserts n stuff 
```

（是的，语法可能不正确，这只是一个例子）

所以我想知道是否可以在两个保存点之间进行回滚`sp1`并且`sp2`之后不回滚插入/更新`sp2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:55:48.073

保存点不会做你想做的事。当您回滚到某个保存点时，该保存点之后的所有内容都会回滚，无论是否创建了后来的保存点。

将保存点想象为“堆栈”。你不能从堆栈中间拉出一些东西，你必须把所有东西都移到你想要的层。

您可能正在寻找自主交易。您要使用的数据库都不支持它们。在 PostgreSQL 中，您可以使用 dblink 模块与数据库建立新连接并使用它来解决此问题；请参阅[http://www.postgresql.org/docs/current/static/dblink.html](http://www.postgresql.org/docs/current/static/dblink.html)。我不知道 MySQL 或 SQLite 提供了哪些解决方案，但既然您知道您正在寻找的术语，Google 会提供帮助。

如果可能，我建议您找到解决此应用程序设计要求的方法。让您的应用程序使用两个数据库连接和两个事务来执行您需要的操作，并根据需要协调两者。

# macos - 如何保持 Airplay 连接？

> ID：14727699
> 
> 赞同：2
> 
> 时间：2013-02-06T11:16:09.070
> 
> 标签：macos, applescript, osx-mountain-lion, airplay

我正在使用 Mac Mini 家庭自动化服务器，我试图将文本转语音消息发送到连接机场快线的 Airplay 扬声器。

我的问题是我无法让它保持与 Airplay 扬声器的连接。

我试过每隔一段时间运行这个 AppleScript，但问题仍然存在：

```
tell application "Airfoil"
  connect to every speaker
end tell 
```

甚至机翼似乎在一个小时左右后就失去了连接。

如何强制保持 Airplay 连接？

# html - CSS 盒子阴影 - 悬停类

> ID：14727702
> 
> 赞同：0
> 
> 时间：2013-02-06T11:16:11.360
> 
> 标签：html, css

我正在尝试构建一个使用 box-shadow amd 的通用悬停类，该类将与多种颜色的按钮一起使用。出于这个原因，我希望每种颜色的按钮的“阴影”都不同。我想弄清楚是否有一种方法可以只使用或设置阴影元素的颜色属性？

这就是我的意思：

```
/*Notice that .button shadows does not have a color value*/

.button {
    -webkit-box-shadow: 
    0px 8px 16px 0px;
    box-shadow:
    0px 8px 16px 0px;
}

.button:hover{
    -webkit-box-shadow: 
    0px 16px 16px 0px;
    box-shadow:
    0px 16px 16px 0px;
}

/*And color elements does not have other values for the shadow*/

.red{
    -webkit-box-shadow: 
    rgba(255, 0, 0, 0.1);
    box-shadow:
    rgba(255, 0, 0, 0.1);
}
.green{
    -webkit-box-shadow: 
    rgba(0, 255, 0, 0.1);
    box-shadow:
    rgba(0, 255, 0, 0.1);
} 
```

...按如下方式使用：

```
<div class="button red>Red Button</div>
<div class="button green>Green Button</div> 
```

我希望能解释这种情况。头脑风暴时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:23:21.893

您需要添加`color: red`

```
.red{
    color:red
}
.green{
   color:green
} 
```

由于`color:`属性也适用于文本，因此您需要用`span`标签包装文本并给出`color:black`to `span`。

**[演示](http://jsfiddle.net/jLXZ9/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:20:50.727

不幸的是，没有办法只指定这里指定的盒子阴影的颜色：http: [//dev.w3.org/csswg/css3-background/#the-box-shadow](http://dev.w3.org/csswg/css3-background/#the-box-shadow)

您需要为每个颜色类提供单独的框阴影规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:01:43.030

不，您不能，您必须将 2 个案例正常并悬停每个按钮

[http://dev.w3.org/csswg/css3-background/#the-box-shadow](http://dev.w3.org/csswg/css3-background/#the-box-shadow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:22:42.033

在 CSS3 中没有 box-shadow-color 规则，因此对于不同的按钮，您需要指定所有阴影参数（大小、位置、颜色）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T11:56:39.493

使用颜色为单个菜单尝试此样式中的此 CSS 样式，您可以尝试设置阴影而不是颜色...

HTML代码

```
<div class="menu"> 
        <ul>
            <li class="active1"><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Product</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div> 
```

CSS 样式

```
.menu{
        font-family:Arial, Helvetica, sans-serif;
        color:white;
        float:left;
        position:absolute;  
        top:95px;
        width:855px;
        background-image:url(../images/bottom-menu-line.png);
        background-position:center bottom;
        background-repeat:no-repeat;
    }
    .menu ul{padding:0; margin-left:65px; border-radius:10px;}
    .menu ul li {
        float:left;
        border-radius:10px;
        width:110px;
        height:47px;
        list-style:none;
        padding:0;
        margin-left:5px;
        margin-right:5px;
        /*overflow:hidden*/
    }
    .menu ul li a {
        font-size:12px;
        color:#fffcc7;
        background-image:url(../images/button.png);
        background-position:center;
        height:47px;
        overflow:hidden;
        line-height:47px;
        text-decoration:none;
        width:110px;
        text-align:center;
        float:left;
        border-radius:10px;
    }
    .menu li {float:left; padding:0;}
    .menu ul li a:hover {
     margin: -3px;
    }
    .menu ul li:nth-of-type(6) a:hover {
     border:3px solid #c10202 !important;
     border-radius:10px !important;
    }
    .menu ul li:nth-of-type(5) a:hover {
    border:#c1d65f solid 3px;
    border-radius:10px;
    }
    .menu ul li:nth-of-type(4) a:hover {
    border:#01d290 solid 3px;
    border-radius:10px;
    }
    .menu ul li:nth-of-type(3) a:hover {
    border:#904ca1 solid 3px;
    border-radius:10px;
    }
    .menu ul li:nth-of-type(2) a:hover {
    border:#00caf3 solid 3px;
    border-radius:10px;
    }
    .menu ul li:nth-of-type(1) a:hover {
    border:3px #d44c1f solid;
    border-radius:10px;
    }
    .active1{
    border:3px #d44c1f solid;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    }
    .active2{
    border:#00caf3 solid 3px;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    }
    .active3{
    border:#904ca1 solid 3px;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    }
    .active4{
    border:#01d290 solid 3px;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    }
    .active5{
    border:#c1d65f solid 3px;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    }
    .active6{
    border:3px solid #c10202;   
    width:110px !important;
    border-radius:10px;
    height:47px !important;
    margin-bottom:7px !important;
    margin-right:5px !important;
    } 
```

# sql - 如果存在于 SQL Server 中的 CTE 内

> ID：14727705
> 
> 赞同：2
> 
> 时间：2013-02-06T11:16:18.397
> 
> 标签：sql, sql-server-2008

我只想知道如何在 SQl Server中编写`CTE`包含？`If Exists`我曾尝试在下面写一个 CTE，我正在使用`If Exists`语句来选择天气记录是否存在。如果记录不存在，那么我正在分配默认值但我收到错误

> '关键字'if'附近的语法不正确

。请帮助我修复此错误并指导我编写此 CTE。请在我写的 CTE 下面找到：-

```
Alter procedure St_Proc_GetTeamProductionReport      
@mindate DateTime,                        
@maxdate DateTIme,    
@userID varchar(50)                    
as                                          
Begin                                          
     set NoCount on; 
with    
ProductionCTE(CalendarDate,RoleID,UserID,UserECode,UserName,ImmediateSupervisor,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment)    
as    
(    
    if exists
    (
        select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,    
        R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment    
        from production P inner join NatureOfWork N    
        on N.NatureofWorkID=P.natureofworkid    
        inner join dbo.RegionAndProjectInfo R    
        on R.RegionProjectID=P.RegionProjectID    
        inner join county C    
        on C.countyid=P.countyid    
        inner join worktype W    
        on W.Worktypeid=P.worktypeID    
        inner join task T    
        on T.taskid=P.TaskID    
        inner join UserInfo U    
        on U.Userid=P.userid    
        where P.userid=@userID  and ( convert(varchar, P.CalendarDate, 101) )  between (
        convert(varchar, @mindate, 101) ) and ( convert(varchar, @maxdate, 101) )  
    )
    else
    (
        Select '2012-09-14 13:41:52' as CalendarDate,
        2 as RoleID,'938' as UserID,
        (select Userecode from Userinfo where userid=@userID) as UserECode,
        (select UserName from Userinfo where userid=@userID)as UserName,
        (select ImmediateSupervisor from Userinfo where userid=@userID)as ImmediateSupervisor,
        'BP' as NatureOfWorkName,
        'CO Processing' as RegionProjectName,
        'Adams' as CountyName,
        'Quality' as WorkTypeName,
        'Corrections ' as TaskName,
        5 as VolumneProcessed,
        '01:00' as TimeSpent,
        'test' as Comment
        ) 

    union all

    select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,    
    R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment    
    from production P inner join NatureOfWork N    
    on N.NatureofWorkID=P.natureofworkid    
    inner join dbo.RegionAndProjectInfo R    
    on R.RegionProjectID=P.RegionProjectID    
    inner join county C    
    on C.countyid=P.countyid    
    inner join worktype W    
    on W.Worktypeid=P.worktypeID    
    inner join task T    
    on T.taskid=P.TaskID    
    inner join UserInfo U    
    on U.Userid=P.userid    
    inner join ProductionCTE    
    on U.ImmediateSupervisor=ProductionCTE.UserECode    

    where P.IsTaskCompleted=1   and ( convert(varchar, P.CalendarDate, 101) )  between (
    convert(varchar, @mindate, 101) ) and ( convert(varchar, @maxdate, 101) )         
)  
select  distinct CONVERT(VARCHAR,CalendarDate,20) as CalendarDate,UserECode,UserName,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment from ProductionCTE where  RoleID=1    
end 
```

去

当我删除此 If Exist 语句时，`CTE`它工作正常，但在添加`IF Exists`语句后出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:23:08.680

你不能`IF EXISTS`以这种方式使用。一个公用表表达式只能包含一个 select 语句，这是不可能的`if condition SELECT THIS else SELECT THAT`。

看起来您正在尝试向查询返回的结果集中添加一个额外的创建行。您可以通过将 CTE 实现为将返回单个新行的表值函数来实现此目的。

[http://msdn.microsoft.com/en-gb/library/ms191165(v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms191165(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:51:04.723

如果您想构建一个如果第一个不返回任何行，则`UNION`只能从第二个获得结果，您可以使用. 因此，您可以将真正的查询放在第一个中，将所需的默认值放在第二个中，并获得您想要的结果。`SELECT``SELECT``RANK()``SELECT`

我没有你的表格和数据，所以我不会尝试重写你的查询。但我会用这个来说明：

```
;With WithDefaults as (
    select name,0 as Rank from sys.objects
    union all
    select 'abc',1 --Default if no results
), Ranked as (
    select *,RANK() OVER (ORDER BY Rank) as Rnk from WithDefaults
)
select * from Ranked where Rnk = 1 
```

返回（在我尝试过的大部分空数据库上）98 个结果，其中没有`name` `abc`. 如果我们强制第一个`SELECT`不返回结果：

```
 select name,0 as Rank from sys.objects where 1 = 2 
```

我们现在使用`name` `abc`.

希望您能看到这如何应用于您的原始查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:34:01.627

您不能在 CTE 中使用 IF EXISTS。但是你可以修改函数的逻辑

例子：

```
alter procedure St_Proc_GetTeamProductionReport
@mindate DateTime,                        
@maxdate DateTIme,    
@userID varchar(50)                    
as                                          
Begin                                          
set NoCount on;
;with    
ProductionCTE(CalendarDate,RoleID,UserID,UserECode,UserName,ImmediateSupervisor,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment)    
as    
(               
        select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,    
        R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment, 1 AS cnt 
        from production P inner join NatureOfWork N    
        on N.NatureofWorkID=P.natureofworkid    
        inner join dbo.RegionAndProjectInfo R    
        on R.RegionProjectID=P.RegionProjectID    
        inner join county C    
        on C.countyid=P.countyid    
        inner join worktype W    
        on W.Worktypeid=P.worktypeID    
        inner join task T    
        on T.taskid=P.TaskID    
        inner join UserInfo U    
        on U.Userid=P.userid    
        where P.userid=@userID  and ( convert(varchar, P.CalendarDate, 101) )  between (
        convert(varchar, @mindate, 101) ) and ( convert(varchar, @maxdate, 101) )  
        UNION ALL
        Select '2012-09-14 13:41:52' as CalendarDate,
        2 as RoleID,'938' as UserID,
        (select Userecode from Userinfo where userid=@userID) as UserECode,
        (select UserName from Userinfo where userid=@userID)as UserName,
        (select ImmediateSupervisor from Userinfo where userid=@userID)as ImmediateSupervisor,
        'BP' as NatureOfWorkName,
        'CO Processing' as RegionProjectName,
        'Adams' as CountyName,
        'Quality' as WorkTypeName,
        'Corrections ' as TaskName,
        5 as VolumneProcessed,
        '01:00' as TimeSpent,
        'test' as Comment, 0 
     ), ProductionCTE2 AS    
    (    
    SELECT TOP(SELECT CASE WHEN COUNT(*) = 0 THEN 1 ELSE COUNT(*) END FROM ProductionCTE WHERE cnt = 1)
           CalendarDate,RoleID,UserID,UserECode,UserName,ImmediateSupervisor,NatureofWorkName,    
           RegionProjectName,Countyname,WorktypeName,TaskName,VolumeProcessed,Timespent,Comment
    FROM ProductionCTE2           
    union all
    select P.CalendarDate,U.RoleID,U.UserID,U.UserECode,U.UserName,U.ImmediateSupervisor,N.NatureofWorkName,    
    R.RegionProjectName,C.Countyname,W.WorktypeName,T.TaskName,P.VolumeProcessed,P.Timespent,P.Comment    
    from production P inner join NatureOfWork N    
    on N.NatureofWorkID=P.natureofworkid    
    inner join dbo.RegionAndProjectInfo R    
    on R.RegionProjectID=P.RegionProjectID    
    inner join county C    
    on C.countyid=P.countyid    
    inner join worktype W    
    on W.Worktypeid=P.worktypeID    
    inner join task T    
    on T.taskid=P.TaskID    
    inner join UserInfo U    
    on U.Userid=P.userid    
    inner join ProductionCTE    
    on U.ImmediateSupervisor=ProductionCTE.UserECode
    where P.IsTaskCompleted=1   and ( convert(varchar, P.CalendarDate, 101) )  between (
    convert(varchar, @mindate, 101) ) and ( convert(varchar, @maxdate, 101) )         
)  
select  distinct CONVERT(VARCHAR,CalendarDate,20) as CalendarDate,UserECode,UserName,NatureOfWorkName,RegionProjectName,CountyName,WorkTypeName,TaskName,VolumneProcessed,TimeSpent,Comment 
from ProductionCTE2
where  RoleID=1    
end 
```

# python - 基于另一个文件内容的文件输出

> ID：14727707
> 
> 赞同：1
> 
> 时间：2013-02-06T11:16:28.677
> 
> 标签：python, file-io

我有一个与 Python 中的文件输入和输出有关的问题（这是这个问题的延续：[如何从数据文件中提取特定行](https://stackoverflow.com/questions/14714528/how-to-extract-specific-lines-from-a-data-file)，现在已经解决）。

所以我有一个大文件`danish.train`和 11 个小文件（称为`danish.test.part-01`等等），每个文件都包含从`danish.train`文件中选择的不同数据。现在，对于十一个文件中的每一个，我都想创建一个补充文件。这意味着对于每个小文件，我想创建一个文件，其中包含`danish.train`减去小文件中已经存在的部分的内容。

到目前为止，我想出的是：

```
trainFile = open("danish.train")

for file_number in range(1,12):
    input = open('danish.test.part-%02d' % file_number, 'r')

    for line in trainFile:
        if line not in input:
            with open('danish.train.part-%02d' % file_number, 'a+') as myfile:
                myfile.write(line) 
```

问题是这段代码只给出了 file_number 1 的输出，尽管我有一个从 1-11 的循环。如果我更改范围，例如更改为`in range(2,3)`，我会得到一个 output `danish.train.part-02`，但是这个输出包含一个完整的副本，而不会像我想要`danish.train`的那样遗漏文件的内容。`danish.test.part-02`

我怀疑这些问题可能与我对`with... as`运营商没有完全了解有关，但我不确定。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:02:08.350

当您`open`创建一个文件时，它会通过文件的行返回一个迭代器。这很好，因为它可以让您一次一行地浏览文件，而无需一次将整个文件保存到内存中。在您的情况下，它会导致一个问题，因为您需要多次遍历文件。

相反，您可以将完整的训练文件读入内存，并多次阅读：

```
with open("danish.train", 'r') as f:
    train_lines = f.readlines()

for file_number in range(1, 12):
    with open("danish.test.part-%02d" % file_number, 'r') as f:
        test_lines = set(f)
    with open("danish.train.part-%02d" % file_number, 'w') as g:
        g.writelines(line for line in train_lines if line not in test_lines) 
```

我也稍微简化了逻辑。如果您不关心行的顺序，您还可以考虑将训练行读入一个集合，然后只使用集合操作而不是我在最后一行中使用的生成器表达式。

# php - python中的php set_error_handler等效函数

> ID：14727708
> 
> 赞同：0
> 
> 时间：2013-02-06T11:16:34.607
> 
> 标签：php, python, error-handling, python-3.x

python 3 中是否有与 PHP 的[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)函数等效的函数？在 python 脚本中使用这个等价物是个好主意还是有更好的解决方案？

我喜欢 set_error_handler 的地方在于，我可以为它分配一个功能，例如在出现问题时记录和/或通过电子邮件发送给我。然后我可以在我的代码中使用 trigger_error，error_handler 函数将向我报告发生了什么以及发生在哪里。任何想法如何在python中替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T21:22:24.220

我认为您正在搜索[sys.excepthook](http://docs.python.org/3.4/library/sys.html?highlight=sys.excepthook#sys.excepthook)。它也被`cgitb`模块使用。

或者你可以试试我写的库[诊断](https://github.com/miso-belica/diagnostics)。它尚不支持电子邮件，但请随时为您的提案打开一个问题或发送拉取请求:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:45:38.337

AFAIK Python uses mainly exceptions to handle errors and thus you should try to catch them instead of using a construct like set_error_handler. Do something like this:

```
try:
    code that might fail...
except:
    handle errors... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:47:18.667

请参阅用于处理警告的 python 库的警告，该库还链接到[日志库中的](http://docs.python.org/3/library/warnings.html)[captureWarnings](http://docs.python.org/3/library/logging.html#logging.captureWarnings)。

然而，大多数其他问题都作为异常抛出，您可以尝试并在您认为合适的时候捕获它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:51:58.890

import cgitb() cgitb.enable() 对于 CGI 使用，也可以使用 cgitb 模块，它会打印出非常详细的错误信息以供调试使用：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:48:33.363

请改用 Python 异常处理机制 ( `try/except`)。它更加灵活和细粒度；您可以捕获仅由一行代码引起的错误（例如，`IOError`因为未找到文件），或者来自整个程序的错误（就像`set_error_handler`那样）。

对于 CGI 使用，您还可以使用该`cgitb`模块，该模块将打印出非常详细的错误消息以供调试使用：

```
import cgitb
cgitb.enable() 
```

# python - Python中的导入和继承

> ID：14727709
> 
> 赞同：1
> 
> 时间：2013-02-06T11:16:35.860
> 
> 标签：python, inheritance, import

请帮助我找到解决问题的方法。我有这样的文件结构

```
/j/
    lib/
         __init__.py
         ftpserver.py
    utils/
         __init__.py
         mogno.py
         My.py 
         __init__.py
         jftpd.py 
```

在`ftpserver.py`我有一个类，它是某些类的基类，`My.py` 我的意思是：

```
# ftpserver.py
class foo()
  ... 
```

`My.py`是这样的：

```
# My.py
class bar(foo)
 ... 
```

我想要的是在 jftpd.py 中使用我的所有模块。但我找不到实现这一目标的方法。我正在做这样的事情：

```
# jftpd.py
import lib.ftpserver
import utils.My

***some usage of my classes*** 
```

翻译还给我

```
NameError: name 'foo' is not defined 
```

在 My.py 中使用相对导入可能是一个很好的解决方案：

```
from ..lib.ftpserver import foo 
```

但这也不是工作方法，因为相对导入，这在 python 中是不允许的。尽管我发现了许多相对导入的例子，但我得到了一个错误：

```
ValueError: Attempted relative import in non-package 
```

执行类似的东西：

```
from ..lib.ftpserver import * 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:35:19.167

试试`from lib.ftpserver import foo`。我看不出有什么理由不这样做。不需要`..`元素。

确保在定义继承类的位置导入原始类。例如：

```
from lib.ftpserver import foo

class AnyClasss(foo):
    foo 
```

# javascript - 未调用 XmlHttpRequest.onload

> ID：14727710
> 
> 赞同：11
> 
> 时间：2013-02-06T11:16:41.873
> 
> 标签：javascript, ajax, firefox, xmlhttprequest

我在玩这个`XmlHttpRequest`东西。在一些教程和书籍中，它是`onload`在请求完成时调用的函数。在我的小实验中，这个函数永远不会被调用。这是我的代码：

```
 window.onload = function() {
        var url = "http://www.google.com";
        var request = new XMLHttpRequest();

        request.onload = function() {
            var state = this.readyState;
            var responseCode = request.status;
            console.log("request.onload called. readyState: " + state + "; status: " + responseCode);

            if (state == this.DONE && responseCode == 200) {
                var responseData = this.responseText;
                alert("Success: " + responseData.length  + " chars received.");
            }
        };

        request.error = function(e) {
            console.log("request.error called. Error: " + e);
        };

        request.onreadystatechange = function(){
            console.log("request.onreadystatechange called. readyState: " + this.readyState);
        };

        request.open("GET", url);
        request.send(null);
    }; 
```

我正在上一个 Firefox 版本（今天刚刚更新）上对此进行测试。永远不会打印日志行`onload`，并且永远不会命中我在第一行中设置的断点。但是，该`onreadystatechange`函数被调用了两次，实际上是发出了http请求。这是萤火虫的控制台显示的：

```
 request.onreadystatechange called. readyState: 1
    GET http://www.google.com/    302 Found    174ms
    request.onreadystatechange called. readyState: 4
    NS_ERROR_FAILURE: Failure
        request.send(null); 
```

行中有错误`send`。我尝试将其更改为`request.send()`具有相同的结果。

起初我以为这可能是浏览器试图阻止 XSS，所以我将我的 html 驱动程序页面移动到我的开发机器中的一个 Tomcat 实例，但结果是一样的。

是否保证调用此函数？正如我上面所说的，在大多数教程中很常见，但另一方面，在[W3C 规范页面](http://www.w3.org/TR/XMLHttpRequest/)中，hello world 片段使用`onreadystatechange`了：

```
 function processData(data) {
      // taking care of data
    }

    function handler() {
      if(this.readyState == this.DONE) {
        if(this.status == 200 &&
           this.responseXML != null &&
           this.responseXML.getElementById('test').textContent) {
          // success!
          processData(this.responseXML.getElementById('test').textContent);
          return;
        }
        // something went wrong
        processData(null);
      }
    }

    var client = new XMLHttpRequest();
    client.onreadystatechange = handler;
    client.open("GET", "unicorn.xml");
    client.send(); 
```

它检查`readyState == this.DONE`. `DONE`值为 4，这是我在日志中看到的。因此，如果这是与 XSS 相关的问题，并且浏览器阻止我连接到不同的域，那么为什么会建立实际连接并收到 DONE 状态？？？

PS：是的，我知道有强大的库可以轻松做到这一点，但我仍然是 JavaScript 菜鸟，所以我想先了解底层。

* * *

更新：
我已将 URL 更改为我的域 (localhost) 中的一个，错误消失了，但`onload`仍未调用该函数。在 IE8 中测试并不起作用。在 Chrome 中测试并有效。怎么样？

* * *

更新 2：
在 Firefox 中再次测试，现在它可以工作了。可能旧页面仍在缓存中，所以我无法立即注意到它。在 IE8 中仍然失败，我将尝试在较新的版本中对其进行测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T13:00:16.280

看起来确实是 XSS 问题，Firefox 阻止了`onload`调用。我仍然无法理解为什么 http 网络请求实际上正在完成并且`onreadystatechange`正在使用`DONE`readyState 进行调用。

我将 URL 更改为同一域中的另一个 URL，现在它可以在 Firefox（经过一些与缓存相关的错误尝试后）和 Chrome 中工作。[尽管官方文档](http://msdn.microsoft.com/en-us/library/ie/ms536942%28v=vs.85%29.aspx)说它受支持，但它在 IE8 中仍然不起作用。我发现[了这个 SO answer](https://stackoverflow.com/a/5418498/813951)另有说明。看起来该`onload`函数是一种更现代的便捷方法，而检查结果的旧方法正在使用`onreadystatechange`。

我想我会接受这个答案作为解决方案，除非提供更详细的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-16T07:29:54.130

由于`onload`另一个原因，不会调用处理程序，我在这里添加它只是为了对引用此页面的其他人有所帮助。

如果 HTTP 响应格式错误，`onload`也不会调用处理程序。例如，一个 10 字节的明文响应在`Content-Length`报头中通告长度为 14 将不会调用`onload`处理程序。在开始用测试存根替换后端单元之前，我在客户端代码上浪费了数小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T22:19:48.640

IE 有不同的方法来创建 xmlhttprequest。

```
function createCORSRequest(method, url) {
  var xhr = new XMLHttpRequest();
  if ("withCredentials" in xhr) {

    // Check if the XMLHttpRequest object has a "withCredentials" property.
    // "withCredentials" only exists on XMLHTTPRequest2 objects.
    xhr.open(method, url, true);

  } else if (typeof XDomainRequest != "undefined") {

    // Otherwise, check if XDomainRequest.
    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
    xhr = new XDomainRequest();
    xhr.open(method, url);

  } else {

    // Otherwise, CORS is not supported by the browser.
    xhr = null;

  }
  return xhr;
}; 
```

同样这篇文章：[https ://www.html5rocks.com/en/tutorials/cors/](https://www.html5rocks.com/en/tutorials/cors/)

# php - 如何在 CodeIgniter 分页中更改标签的 href

> ID：14727712
> 
> 赞同：0
> 
> 时间：2013-02-06T11:16:45.673
> 
> 标签：php, codeigniter, pagination

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:29:09.190

您需要将 URL 作为配置变量传递：

```
$config = array('base_url' => site_url('/admin/view/field/created'));
$this->pagination->initialize($config);
$this->pagination->create_links(); 
```

有关更多配置可能性，请参阅[文档](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T03:15:28.303

您可以尝试计算“页码”的uri段和“base url”，如下所示：

```
// Parsing the URI into an associative array
$uri = $this->uri->uri_to_assoc(4);

$segments = count($uri);

// Calculate the uri segment and base url
if ($segments > 1) {
   $uri_segment  = 3 + $segments - 1; // 3 segments "index.php/admin/view/ + SORT_SEGMENTS - PAGE_SEGMENT

   array_pop($uri); // Pop the page number
   $base_url     = site_url('admin/view/'. implode('/', $uri));
} else {
   $uri_segment  = 4;
   $base_url     = site_url('admin/view/');
}

// Pagination config
$config['base_url']         = $base_url;
$config['uri_segment']      = $uri_segment;
$config['use_page_numbers'] = TRUE;
$config['total_rows']       = YOUR_CONFIG;
$config['num_links']        = YOUR_CONFIG;
$config['per_page']         = YOUR_CONFIG; 

$this->pagination->initialize($config); 

$pagination = $this->pagination->create_links(); 
```

PD：我是阿根廷人，我的英语水平有点差

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:24:38.820

我也遇到了这个。最简单的解决方案？重新配置您的 URL 结构，以便分页始终是第一段。为了不弄乱排序字段，只需确保页面始终加载分页，即当它第一次加载时，在该段中放置一个 0。除了更改设置以使用查询字符串之外，我认为您无法轻松移动分页段的位置，我想您可以在配置中执行一些 if 逻辑，例如：

```
if(is_numeric($this->uri->segment(2)
{
    $config['uri_segment'] = 2;
} else if (is_numeric($this->uri->segment(3) {
    $config['uri_segment'] = 3;
} 
```

但老实说，这可能会变得非常丑陋，具体取决于您添加了多少额外的段。

# java - 电话号码的正则表达式

> ID：14727715
> 
> 赞同：2
> 
> 时间：2013-02-06T11:16:54.343
> 
> 标签：java, regex, jtable

我可以搜索除数字之外的每一列。我无法搜索数字列。因为我将正则表达式设为

```
RowFilter<MyTableModel, Object> rf = null;
//If current expression doesn't parse, don't update.
try {
    rf = RowFilter.regexFilter(filterText.getText(), 0,1,2,3,4);
} catch (java.util.regex.PatternSyntaxException e) {
    return;
}
sorter.setRowFilter(rf); 
```

谁能帮我找到正确的正则表达式。当前的正则表达式不适用于“+”。如果我打印异常，它将显示

```
meta character '+' near index 0 (java.util.regex.PatternSyntaxException) 
```

我可以使用这个正则表达式搜索除数字之外的当前表列`RowFilter.regexFilter(filterText.getText(), 0,1,2,3,4);`。

```
FirstName   LastName     Number

Karthy      Smith        +123
John        Doe          +234
Sue         Black        +545
Jane        White        +895reading 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:19:34.373

尝试

```
rf = RowFilter.regexFilter(Pattern.quote(filterText.getText()), 0,1,2,3,4); 
```

可能（并且`filter.getText()`在您的情况下）包含正则表达式元字符或转义序列，它们使用[`Pattern.quote()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29).

# android - Android ScrollView scrollTo 导致另一个 ScrollView onTouch 事件

> ID：14727717
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:01.067
> 
> 标签：android, android-layout

我有这样的布局：

Horizo​​ntalScrollView 1
----RelativeLayout
--------Horizo​​ntalScrollView 2

这样做的原因是，`HorizontalScrollView`数字 2 处理用户触摸，如果确定 scrollX，则`HorizontalScrollView`调用 1 。

此调用导致调用`HorizontalScrollView`了 2 个 onTouch 事件，并转换了事件 X 值，导致滚动时闪烁`HorizontalScrollView`2

是否有一些明确的解决方案如何防止这种情况或一些黑客行为？

2 个触摸事件 x的输出`HorizontalScrollView`行为类似于：444、435、444、435、436、445、437、446。然后弹出`onScrollChanged`调用`HorizontalScrollView`1 进行滚动，依此类推。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:13:19.737

我通过翻译`HorizontalScrollView`2 onTouch 事件 X 位置来消除闪烁，数量`HorizontalScrollView`1 被它滚动。

# jquery - Gmap 不会从第二次开始刷新表格

> ID：14727719
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:07.217
> 
> 标签：jquery, google-maps, cordova, jquery-mobile, google-maps-markers

我正在使用 Google gmap API 在我的 Phonegap 应用程序中显示 Google 地图。gmap 工作正常。

但是，我的要求是根据用户选择更改标记，首先我显示所有标记。从第二次开始，我需要根据用户的选择显示。我正在使用 Json 数据

以下是 Gmap 代码：

```
function showMap(data) {
    $('#map_canvas').gmap(
                        { 'center' : initialLocation,
                          'zoom' : 12,
                          'mapTypeControl' : false,
                          'navigationControl' : false,
                          'streetViewControl' : false
                        })
                        .bind('init', function(evt, map) {
                            if (data.Response.ShopListInfo instanceof Array) {
                                 $.each( data.Response.ShopListInfo, function(i, marker) {
                                              latitude = marker.Latitude;
                                              longitude = marker.Longitude; 
                                              displayMarkers(latitude, longitude, marker);
                                 });
                            }else{
                                latitude = data.Response.ShopListInfo.Latitude;
                                longitude = data.Response.ShopListInfo.Longitude; 
                                displayMarkers(latitude, longitude, data.Response.ShopListInfo);
                            }
                }); 
} 
```

问题是从第二次调用开始“绑定”方法没有执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:51:55.620

我们只需要从第二次开始清除标记并单独调用 addMarkers 方法，如下所示。

```
$('#map_canvas').gmap('clear', 'markers');
                if (data.Response.ShopListInfo instanceof Array) {
                    $.each( data.Response.ShopListInfo, function(i, marker) {
                          latitude = marker.Latitude;
                             longitude = marker.Longitude; 
                             displayMarkers(latitude, longitude, marker);
                    });
                }else{
                    latitude = data.Response.ShopListInfo.Latitude;
                    longitude = data.Response.ShopListInfo.Longitude; 
                    displayMarkers(latitude, longitude, data.Response.ShopListInfo);
                } 
```

# iphone - 在纬度/经度列表中查找纬度和经度的最接近匹配

> ID：14727720
> 
> 赞同：2
> 
> 时间：2013-02-06T11:17:07.263
> 
> 标签：iphone, ios, objective-c, location

我正在为特定位置创建一个带有天气查找功能的 iPhone 应用程序，但我有以下问题，我不确定解决的最佳方法。

我有一个位置的纬度和经度，并想从 5000 多个位置的列表中找到最接近的纬度/经度匹配

5000 多个位置来自 Met Office Datapoint API 的 JSON 提要，并采用 NSDictionaries 的 NSArray 形式，NSDictionary 包括 id、lat、long 和 name。

我想将我的位置与气象局列表中最近的位置相匹配，并获取 id 键值。

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:28:12.450

我假设您在此使用 CLLocation 对象...

```
- (CLLocation*)closestLocationToLocation:(CLLocation*)currLocation
{
    CLLocationDistance minDistance;

    CLLocation *closestLocation = nil;

    for (CLLocation *location in arrayOfLocations) {
        CLLocationDistance distance = [location distanceFromLocation:currLocation];

        if (distance <= minDistance
            || closestLocation == nil) {
            minDistance = distance;
            closestLocation = location;
        }
    }

    //closestLocation is now the location from your array which is closest to the current location or nil if there are no locations in your array.

    return closestLocation;

} 
```

可能有一种更快的方法可以做到这一点，但这将完成它。

**编辑使用 CLLocation 功能**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:34:32.903

我做过一次类似的事情（找到一个最大半径的点周围的所有纬度/经度对象）并使用此处给出的公式： [http](http://www.movable-type.co.uk/scripts/latlong.html) ://www.movable-type.co.uk/scripts/latlong.html 但是，那是相当耗时的。所以我有点“装箱”了对象的拳头。基于上面的计算（当然恢复），我计算了那些坐标的纬度和经度，这些坐标的北、西、南和东正好具有最大距离。使用软管最大值和最小值（对于纬度和经度），我查询了所有有问题的对象。并且仅针对那些我计算了确切距离并将它们包含在结果列表中或排除它们的人。

但是，到目前为止，这并不完全符合您的问题。但我试图进一步加快计算。为此，我对自己说，我不需要从搜索对象到我的确切距离，但知道它是否比其中一个框坐标更近就足够了。那部分与您的问题非常吻合：

你的情况可能会容易得多。假设有问题的位置（最短的一次）靠近您尝试分配的一个位置，那么所有这些复杂的数学运算可能都不起作用。您不需要确切的距离。你需要的是最昂贵的。为此，我假设地球是平的，并且经度（或纬度）之间的距离是线性的。这当然不是真的，但应该足以弄清楚其中哪一个是最接近的。从那里你可以使用毕达哥拉斯。

```
Distance = sqrt(sqr(difference-in-lat) + sqr(difference-in-lon)); 
```

仅出于比较距离和找到最短距离的目的，您甚至可以用更快的平方操作代替耗时的平方路线。

```
Square-Of-Distance = sqr(difference-in-lat) + sqr(difference-in-lon). 
```

然后比较各种Square-Of-Distance而不是Distance。结果将是相同的，但要快得多。

顺便说一句，那是一个 PHP 项目。这就是为什么我不能提供示例代码而只是解释算法的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T11:28:04.270

我建议这样的事情：

```
NSMutableArray *tempArray = [NSMutableArray new];
for (NSMutableDictionary *location in yourArrayOfLocations){
    CLLocation coord;
    coord.latitude = [location objectForKey:@"latitude"];
    coord.longitude = [location objectForKey:@"longitude"];

    [location setValue:[usersLocation distanceFromLocation:coord] forKey:@"distance"];
    [tempArray addObject:location];
}
// Now sort the array 
NSArray *sortedArray = [tempArray sortedArrayUsingComparator:^(id o1, id o2) {
            NSDictionary *location1 = (NSDictionary *)o1;
            NSDictionary *location2 = (NSDictionary *)o2;

            return [[location1 objectForKey:@"distance"] compare:[location2 objectForKey:@"distance"]];
        }];
[tempArray release]; 
```

现在你有一个按距离排序的数组。您可以使用索引 0 处的对象，因为它最接近用户的位置。

祝你好运！

# validation - 圣杯命令对象实例验证？

> ID：14727721
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:08.223
> 
> 标签：validation, grails, command-objects

假设我有一个包含七个字段（字符串星期一，字符串星期二，..）的命令对象，我需要验证它以检查其中是否至少存在一个。

由于使用 Grails 1.3.7，我尝试将实例验证与扩展验证插件（非富域）一起使用，但我无法使其工作。基本上，它不能识别静态约束块内的非字段验证器。

静态约束 = { availabilitySelected(validator: { ... }) ...

我得到：

*异常消息：没有这样的属性：availabilitySelected*

还有其他聪明的方法吗？我只是不想为命令对象中的每个字段添加验证器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:24:09.233

您可以通过自定义验证器的二/三参数形式访问正在验证的对象。

```
myField(validator: { val, obj, errors -> if( obj.blah.empty && obj.blah.empty ) { errors.reject( ... ) } ) 
```

[http://grails.org/doc/1.3.7/ref/Constraints/validator.html](http://grails.org/doc/1.3.7/ref/Constraints/validator.html)

# php - 解析两个文件，并比较字符串

> ID：14727728
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:21.330
> 
> 标签：php, arrays, parsing

所以我有两个文件，格式如下：

第一个文件

```
adam 20 male
ben 21 male 
```

第二个文件

```
adam blonde
adam white
ben  blonde 
```

我想做的是在第一个文件中使用 adam 的实例，并在第二个文件中搜索它并打印出属性。

数据由选项卡“\ t”分隔，所以这就是我到目前为止所拥有的。

```
$firstFile = fopen("file1", "rb"); //opens first file
$i=0;
$k=0;
while (!feof($firstFile) ) { //feof = while not end of file

$firstFileRow = fgets($firstFile);  //fgets gets line
$parts = explode("\t", $firstFileRow); //splits line into 3 strings using tab delimiter

$secondFile= fopen("file2", "rb");                          
        $countRow = count($secondFile);                 //count rows in second file     
        while ($i<= $countRow){     //while the file still has rows to search                       
            $row = fgets($firstFile);   //gets whole row                                
            $parts2 = explode("\t", $row);              
            if ($parts[0] ==$parts2[0]){                    
            print $parts[0]. " has " . $parts2[1]. "<br>" ; //prints out the 3 parts
            $i++;
            }
        }

} 
```

我不知道如何遍历第二个文件，获取每一行，并与第一个文件进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:42:06.730

您在内部循环中有错字，您正在阅读`firstfile`并且应该阅读第二个文件。此外，退出内部循环后，您可能希望将`secondfile`指针重新绕回到开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:33:36.297

这个怎么样：

```
function file2array($filename) {
    $file = file($filename);
    $result = array();
    foreach ($file as $line) {
        $attributes = explode("\t", $line);
        foreach (array_slice($attributes, 1) as $attribute)
            $result[$attributes[0]][] = $attribute;
    }
    return $result;
}

$a1 = file2array("file1");
$a2 = file2array("file2");
print_r(array_merge_recursive($a1, $a2)); 
```

它将输出以下内容：

```
Array (
    [adam] => Array (
        [0] => 20
        [1] => male
        [2] => blonde
        [3] => white
    )
    [ben] => Array (
        [0] => 21
        [1] => male
        [2] => blonde
    )
) 
```

但是，如果文件很大（> 100MB），这个文件会同时读取两个文件并且会崩溃。另一方面，90% 的 php 程序都有这个问题，因为`file()`它很流行 :-)

# solr - 使用 SOLR-1395 集成 KATTA 和 SOLR

> ID：14727730
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:30.003
> 
> 标签：solr, katta

我正在尝试使用为 Katta 和 SOLR [SOLR-1395的集成提供的补丁](https://issues.apache.org/jira/browse/SOLR-1395)

任何人都可以帮我找出用于此目的的 KATTA 补丁和 Katta 主干的版本吗？

目前我用过； [**katta-80-1.patch**](http://oss.101tec.com/jira/browse/KATTA-80)与**Katta 0.6**主干。

我无法应用上述补丁，它在应用补丁时给了我错误。

任何正在处理它的人，请帮我解决这个问题

谢谢维平

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:45:27.253

补丁[KATTA-80](http://oss.101tec.com/jira/browse/KATTA-80)似乎已应用于固定版本并且状态已解决。
所以我想这些更改应该已经包含在主干版本中。

此外，评论提到`katta-80-1.patch works against trunk as of the date of the patch.`早在 2009 年！所以不确定现在是否可以申请。

如果您能够找到没有差异的文件，您可以通过打开补丁并手动应用它来检查更改。

SOLR-1395 应该适用于主干。您可以检查补丁文件中的修订号以将其跟踪到主干修订号。

# c# - 如何在 Asp.net 中动态使用 Eval()

> ID：14727733
> 
> 赞同：0
> 
> 时间：2013-02-06T11:17:36.223
> 
> 标签：c#, asp.net

我想这样使用

```
for (int i = 1; i <= x; i++)
{
    string z = Request.Cookies[i.ToString()].Value; 
    %>
        <td><%# Eval(z).ToString()%></td>
    <%
} 
```

但它不采用变量“z”。有什么办法像这样使用。在搜索中找不到这就是为什么发布。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:20:15.820

z.ToString() 也许？

您能确认 cookie 确实存在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:11:19.193

我建议您调查 ASP.Net 动态数据实体项目类型。即使您只创建一个示例项目并使用您从中学到的东西。

# genetic-algorithm - 何时在遗传算法中检查染色体的有效性

> ID：14727735
> 
> 赞同：2
> 
> 时间：2013-02-06T11:17:45.693
> 
> 标签：genetic-algorithm

我正在尝试为 Rhino 开发一个插件，它可以生成建筑平面图（基于 Shape Grammars）。该插件是使用 RhinoCommon API 用 C# 编写的。使用不同的规则，表示为染色体中的基因，我转换了起始几何。使用 GA，适应度函数确定变换规则的最佳序列，以生成符合参数标准（面积、视图、最小构造等）的几何图形。

由于几何代表建筑，因此需要遵守一些建设性的规则。我的问题是关于遗传算法的一般方法： **我什么时候检查染色体创建的几何形状的有效性？**在基因插入点还是我只是给无效的几何图形一个不好的适应值？

当我向染色体添加一个基因（代表几何变换操作）时，我可以检查这是否会导致无效的几何形状。例如：我的起始形状是一个矩形：

![长方形](../Images/50140c22cb8f630f10900ad60d9d86c5.png)

一种转换选项是将一个矩形边分成两部分。该基因看起来像这样：[DIVIDE:TOP:0.25]。这将创建一个包含两个段的边，在四分之一处拆分：

![分割矩形](../Images/b4543f96826c57d0b7db941e7d1c411f.png)

如果我已经知道一个片段必须有一定的长度，那么这个基因可能会创建无效的几何图形。在上面的示例中，顶部的红色部分太短。我是在基因插入点实施此几何检查（对于其他规则可能比所示示例更复杂），还是等到适应度函数验证它？在这个例子中，检查将是当我添加一个片段分割基因时，我检查结果片段是否在允许的范围内？不检查可能会导致由生成无效几何形状的染色体组成的群体，或适应度非常差的个体。检查可以保证具有“有效”染色体的种群，但染色体的生成可能需要更长的时间。

**什么是更好的策略？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:59:26.913

我认为这两种方法实际上都应该可以正常工作，并且取决于您的其他参数，它们的行为几乎相同。只要永远不会选择无效基因组作为父母，让无效基因组通过将与在基因插入点移除它们相同，只要在第一种情况下您的人口显着大于第二种情况。假设您估计大约 33% 的基因插入会导致无效的基因组。然后，您希望让无效基因组通过时的种群数量是产生无效基因组时拒绝无效基因组的 3 倍。在这两种情况下，该算法将只允许选择有效的基因组作为父母，从而导致非常相似的结果。

不过，在您的情况下，在插入点拒绝无效基因组可能更容易，这将确保所有潜在的父母都是有效的。

最后我想指出的是，如果您使用大量评估时间来拒绝无效基因组，您可能需要考虑更改遗传算子的方法，以便它们只能产生有效的基因组。我不确定在您的 GA 中执行此操作的最佳方法，但通常在遗传编程中使用开发方法，该方法仅强制对“胚胎”解决方案进行有效更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:01:03.080

我认为检查必须在胚胎（映射）功能和适应度中，因为两个有效父母（DIVIDE：TOP：0.25）和（DIVIDE：BOTTOM：0.05）之间的交叉可能会产生像（DIVIDE：TOP）这样的后代:0.05) 这会创建太短的段，即使语法是允许的。由于这必须通过适应度函数进行评估，因此在基因创建或突变点进行检查是多余的。

# java - 为什么枚举常量类体可以定义任意实例字段和方法，但不能声明静态成员或定义构造函数

> ID：14727740
> 
> 赞同：1
> 
> 时间：2013-02-06T11:18:07.557
> 
> 标签：java, enums

在*James Gosling 的 The Java Programming Language*中，它指定

**“与其他匿名内部类一样，枚举常量类主体可以定义任意实例字段和方法，但它不能声明静态成员或定义构造函数。还要注意，由于枚举常量是隐式静态字段，这些匿名内部类具有没有封闭的实例。”**

我试图在下面的代码中做到这一点并得到错误

***“字段pieceType不能声明为静态；静态字段只能声明为静态或顶级类型”***（什么意思）

```
package com.example;

enum ChessPiece{
    PAWN{
        @Override
        void pieceName(String name) {
            // TODO Auto-generated method stub
            System.out.println("PAWN");
        }
    },
    ROOK{

        @Override
        void pieceName(String name) {
            // TODO Auto-generated method stub
            System.out.println("ROOK");
        }
    },
    QUEEN{
        static String pieceType = "QUEEN"; // ERROR
        @Override
        void pieceName(String name) {
            // TODO Auto-generated method stub
            System.out.println("QUEEN");
        }
    };

    abstract void pieceName(String name);

} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:20:48.463

您只能在类中声明静态变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T19:40:37.083

好吧，让我们看看这里到底发生了什么。

```
QUEEN{
    static String pieceType = "QUEEN"; // ERROR
    @Override
    void pieceName(String name) {
        // TODO Auto-generated method stub
        System.out.println("QUEEN");
    }
} 
```

这可能不是很明显，但是您已经在这里声明了一个内部类。这必然是因为您正在实现一个抽象方法，并且可以很容易地验证：

```
System.out.println(ChessPiece.class == ChessPiece.QUEEN.getClass()); 
```

并且规范说非`static`内部类 [2] 不能声明`static`成员。*除了在概念上有点奇怪*之外，我不认为 [1] 有任何重大的理论原因，但事实就是如此。

换句话说，您应该会在类似这样的情况下看到相同的错误：

```
class Foo {
    static final String TOP_LEVEL = "ok";
    static class Bar {
        static final String NESTED_STATIC = "ok";
    }
    class Bar {
        static final String NESTED_NOT_STATIC = "error";
    }
} 
```

* * *

[1] 对 Java 管道有更好理解的人应该随时纠正这个问题。

`static`[2] 我猜想和非内部类之间的区别`static`本身可能有点令人困惑。我建议调查一下，并在需要时提出后续问题。

# java - Log4j 显示错误级别的消息

> ID：14727742
> 
> 赞同：1
> 
> 时间：2013-02-06T11:18:12.863
> 
> 标签：java, log4j

我正在寻找一个记录器配置，它可以输出从某个包到文件以及 WARN 和更高消息到控制台的所有内容。为了实现这一点，我编写了以下 log4j.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<appender name="DIAGAPPDENDER" class="org.apache.log4j.RollingFileAppender"> 
    <param name="File" value="${rpt.trace}/diagnostic.log"/>
</appender> 

<appender name="ROOTAPPENDER" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout"> 
</appender>

<logger name="rpt.diagnostic">
    <level value ="ALL" />
    <appender-ref ref="DIAGAPPDENDER"/> 
</logger>

<root>
    <priority value ="WARN" />
    <appender-ref ref="ROOTAPPENDER" /> 
</root> 
```

但是，所有级别的日志消息不仅出现在文件中，而且出现在控制台中，这不是我需要的。我错过了什么？谢谢。保罗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:49:13.633

这简单 。您可以添加`param`阈值`console appender`并设置任何级别，其中级别值等于或高于将显示的消息。

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<appender name="DIAGAPPDENDER" class="org.apache.log4j.RollingFileAppender"> 
    <param name="File" value="${rpt.trace}/diagnostic.log"/>
</appender> 

<appender name="ROOTAPPENDER" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout"> 
    <param name="Threshold" value="WARN" /> 
</appender>

<logger name="rpt.diagnostic">
    <level value ="ALL" />
    <appender-ref ref="DIAGAPPDENDER"/> 
</logger>

<root>
    <priority value ="WARN" />
    <appender-ref ref="ROOTAPPENDER" /> 
</root> 
```

# c# - 如何找到特定值数组列表

> ID：14727747
> 
> 赞同：1
> 
> 时间：2013-02-06T11:18:24.740
> 
> 标签：c#, asp.net, .net

我有一个数组列表：

```
public ArrayList GetExpenseTypes()
{
    ArrayList expArry = new ArrayList();

    using (SqlConnection conn = new SqlConnection(connStr))
    {
        string sql = "SELECT ID, TITLE";
        sql += " FROM EXPENSE_TYPE";
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlDataReader reader;
        try
        {
            conn.Open();
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                expArry.Add(new ListItem(reader["TITLE"].ToString(), reader["ID"].ToString()));
            }
            reader.Close();
        }
        catch (Exception ex)
        {

        }
        finally
        {
            conn.Close();
        }
    }
    return expArry;
} 
```

我的 ArrayList 像这样

1 名称1
2 名称2
3 名称3
4名称4
5名称6

如果我的值为 4，我需要显示 name4

我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:43:00.183

而不是`ArrayList`你可能想要这样使用`Dictionary<string,string>`。

```
public IDictionary<string,string> GetExpenseTypes()
{
    Dictionary<string,string> expArry = new Dictionary<string,string>();

    // Your sql code

    while (reader.Read())
    {
        expArry.Add(reader["TITLE"].ToString(), reader["ID"].ToString());
    }

    // The rest of your code
} 
```

然后你可以得到这样的值

```
var values = GetExpenseTypes();
string valueYouWant = values["4"]; 
```

另一方面，如果您的问题是当您`ListItems`在 Web 控件中使用时看到错误的值，那么您需要在创建时交换参数，`ListItem`因为第一个参数是显示的文本，第二个是价值。像这样。

```
expArry.Add(new ListItem(reader["ID"].ToString(), reader["TITLE"].ToString())); 
```

在这种情况下，您应该考虑使用 a`List<ListItem>`而不是`ArrayList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:13:46.643

`BinarySearch`如果您正在搜索值类型，则可以使用方法；在您的情况下，这似乎是不可能的。

我认为你可能需要使用一个循环，假设你不能使用`Linq`（因为使用的框架）；

```
int index = -1;
for(int i=0; i<expArray.Count;i++)
{
    ListItem temp = (expArray[i] as ListItem);
    if(temp != null && temp.Value == "some value")
    {
        index = i;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:27:39.170

我建议先更改`ArrayList`为`List<ListItem>`. 如果由于某种原因你不能这样做，你可以使用（假设每个项目都是唯一的）：

```
var x = expArry.Cast<ListItem>().SingleOrDefault(exp => exp.Value == value);
if (x != null)
    //item was found 
```

如果您知道该项目将始终存在，则只需使用`Single`它仅存在一次即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:01:42.670

不要使用`ArrayList`，使用通用字典做这样的事情

```
public IDictionary<int, string> GetExpenseTypes()
{
    var result = new Dictionary<int, string>();

    using (var conn = new SqlConnection(connStr))
    {
        var getExpenses = new SqlCommand(
            "SELECT ID, TITLE FROM EXPENSE_TYPE",
            conn);

            conn.Open();
            using (var reader = command.ExecureReader())
            {
                while (reader.Read())
                {
                    result.Add(reader.GetInt32(0), reader.GetString(1));
                }
            }
    }

    return result;
} 
```

然后你可以像这样查找你的字符串

```
var type4 = GetExpenseTypes()[4]; 
```

* * *

或者，不要让整个列表找到一个值。

```
public string GetExpenseType(int id)
{

    using (var conn = new SqlConnection(connStr))
    {
        var getExpenseType = new SqlCommand(
            "SELECT TITLE FROM EXPENSE_TYPE WHERE ID = @p0",
            conn);

        getExpenseType.Parameters.Add(id);

        conn.Open();
        return (string)getExpenseType.ExecuteScalar();
    }
} 
```

* * *

如果由于某些不好的原因，您想坚持使用`ArrayList`退货功能，您可以像这样找到您的商品。

```
var expenseTypes = GetExpenseTypes().OfType<ListItem>().ToDictionary(
    li => int.Parse(li.Text),
    li => li.Value);

var type4 = expenseTypes[4]; 
```

或者，如果你想这样做一次。

```
var type4 = GetExpenseTypes().OfType<ListItem>()
                .Single(li => li.Text == "4").Value; 
```

# javascript - JavaScript - 如果在提交到服务器端之前填写了所有字段，是否可以签入表单？

> ID：14727755
> 
> 赞同：-2
> 
> 时间：2013-02-06T11:18:44.547
> 
> 标签：javascript, validation

我有一个复杂的表单，其中包含一些使用 JS/jQuery 动态生成的字段。

这一代的问题是在服务器端验证这些字段的复杂性。我不知道我是否应该存储由 JS 生成的表单和值，并尝试在服务器端进行验证，或者在客户端使用另一种方法，如 validate all（我认为更容易）。

*   我的问题 1 是：可以使用 JS 进行所有验证吗？有一些 JS 验证框架可以帮助我完成这项任务吗？我已经看到并找到了 LiveValidation(www.livevalidation.com)，这是我需要的吗？

*   问题2：使用这种方法我会遇到什么问题（validata all on the client）？

一些线索，想法？

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:24:34.150

是的，除了可以绕过所有客户端验证的阴暗面之外，很有可能在客户端进行所有验证。[Jquery Validate Plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)是一个很好且简单的执行验证插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:25:24.540

客户端验证仅用于 UX 目的（速度、易用性、用户友好性、即时响应等），从不用于真正的验证。JS 验证很容易绕过。*甚至可以在不*使用表单的情况下向服务器提交数据，从而完全跳过客户端。

出于安全目的，服务器应该进行验证。您的验证逻辑应该适应表单的动态特性。

据我所知，动态表单通常使用数组表单，[例如 PHP 中的这个](http://www.php.net/manual/en/faq.html.php#faq.html.arrays)。这样，很容易在服务器端查看动态表单，尤其是那些具有重复字段组的表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:43:59.610

安德烈，我们一直这样做。Javascript 验证是一个关键点，必须在*提交*之前执行，主要原因是

*   使网站/页面**用户友好**
*   在将数据发送到服务器之前不要实际检查、验证、修复数据，因为可以轻松绕过 JS 验证（因此应该总是有另一轮检查服务器端），这要归功于 Firebug、Chrome 和一个一堆命令行工具。

例如，您使用 JS 验证

*   确保用户填写了所有必填字段，并指向缺少的字段（焦点）
*   检查输入数据的类型，并警告用户
*   确保字段一致性（卡号、生日、fieldX 和 fieldY...）
*   ...

此外，回答你的最后一个问题，并解释答案的开头（不疼）

*   JS 验证不能确保发送到服务器的数据是干净/可靠/一致的（它不能因为 JS 验证很容易被绕过）
*   服务器必须对所有字段执行相同或更强的验证，并且永远不要相信用户输入（SQL 注入风险等）。

# php - 如何使用 foreach 循环生成 mysql_query 的结果

> ID：14727758
> 
> 赞同：0
> 
> 时间：2013-02-06T11:18:54.460
> 
> 标签：php

我总是使用while循环在我的数据库中生成所有记录，我的一些朋友告诉我最好使用foreach从数据库中生成记录，但我不知道如何。

```
<?php
    $query =  mysql_query("select * from sampleTABLE");
    while($i =  mysql_fetch_array){
    echo $i['samplefieldName'];
    }
?> 
```

我的问题是，如何使用 foreach 显示我的数据库中的记录？有人可以在while循环中比较它的语法并生成结果吗，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:20:23.480

正如@Zerkms 所说，没有必要使用 foreach 而不是 while

```
 while($i =  mysql_fetch_array( $query)){ 
```

但是你可以通过下面的代码来做到这一点，但我相信它不是好方法

```
$result_list = array();
while($row = mysql_fetch_array($query)) {
   result_list[] = $row;
}

foreach($result_list as $item) {
   //you can now echo $item ; or whatever you want
} 
```

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:42:16.710

首先，`mysql_xxx()`不推荐使用这些功能。不建议使用它们。推荐使用 PHP 中的两个替代方案 -`mysqli()`和`PDO`.

较旧的`mysql_xxx()`函数**不允许**您使用`foreach`循环记录集。

但是，两个较新的替代 API**都**允许这样做，因为它们实现了`Iterator`接口。

所以是的，可以`foreach`在 PHP 中使用循环记录集，但不能使用旧`mysql_xxx()`函数。

你可以这样写代码：

```
$conn = new mysqli(....);
foreach ( $conn->query('SELECT ....') as $row ) {
    print_r($row);
} 
```

或像这样：

```
$db = new PDO('mysql:....', $user, $pass);
foreach ($db->query('SELECT ....') as $row) {
    print_r($row);
} 
```

话虽如此，请注意自 PHP v5.4 起才有可能做到这一点`mysqli`，因此您需要更新您的 PHP 版本。`PDO`另一方面，多年来一直支持此功能。

当然，它们也可以使用`while`循环，这就是你的朋友不太正确的地方，因为`while`和`foreach`这里真的没有任何区别。从 切换`while`到`foreach`不会对代码的性能产生任何影响。他们在引擎盖下做同样的事情。`foreach`在这种情况下，实际上只是“语法糖”。

我强烈建议切换到这些较新的 API 之一，即使您不打算使用它`foreach`来执行循环，因为正如我所说，旧`mysql`函数已被弃用，这意味着它们可能会从未来的 PHP 中完全删除版本。因此，如果您希望您的代码在未来继续运行，您应该立即切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:25:54.807

无法使用`foreach`.

`foreach`仅适用于您已经获取数据的情况。

所以你的朋友错了，他的建议没有任何意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T03:29:11.813

@zerkms

我也这么想..但是下面的作品...

我的 'tbl_login' 表结构也附加为

```
<?php
    include '../common/dbConnection.php';

     class foreachtest{
        function foreachtesting(){
            $sql="SELECT * FROM tbl_login";
            $query_result=$GLOBALS['con']->query($sql);
            return $query_result;
        }
    }

    $myobject = new foreachtest();
    $result=$myobject->foreachtesting();

    foreach ($result as $a){
        echo $a['username'];
    }

?> 
```

[tbl_login MYSQL 表截图](https://i.stack.imgur.com/WOldy.png)

# android - 通过捆绑将值从 ViewPager Activity 发送到 Fragment

> ID：14727759
> 
> 赞同：12
> 
> 时间：2013-02-06T11:18:55.203
> 
> 标签：android, android-fragments, android-activity, android-viewpager, bundle

我有一个 ViewPager Activity 调用代表幻灯片布局的片段。

我需要的是通过捆绑将值从活动传递到片段。我怎么能这样做？我尝试在 onCreate() 中传递一个 int 2 但不起作用，我

活动：

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_slide);
    Intent intent = new Intent(this,ScreenSlidePageFragment.class);
    Bundle bundle = new Bundle();
    bundle.putInt("SIDE",2);
    intent.putExtras(bundle);
/**
 * Instantiate a ViewPager and a PagerAdapter
 */

    mPager = (ViewPager)findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
    mPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {
            if(itemOld > arg0){
                auxBack--;
                SIDE=1;
            }
            else if(itemOld < arg0){
                auxFront++;
                SIDE=0;
            }
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub

        }
    });
}

@Override
public void onBackPressed(){
    if(mPager.getCurrentItem()==0){
        super.onBackPressed();
    }else{
        mPager.setCurrentItem(mPager.getCurrentItem()-1);
    }
} 

/**
 * A simple pager adapter that represents 5 ScreenSlidePageFragment objects, in sequence
 */

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter{
    public ScreenSlidePagerAdapter(FragmentManager fm){
        super(fm);
    }

    @Override
    public ScreenSlidePageFragment getItem(int arg0) {
        return new ScreenSlidePageFragment();
    }

    @Override
    public int getCount() {
        //Toast.makeText(getApplicationContext(), "Num pages " + NUM_PAGES, Toast.LENGTH_LONG).show();
        return  NUM_PAGES;
    }
} 
```

}

分段：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle    savedInstanceState) {

    int tID = ((ScreenSlidePagerActivity)getActivity()).getIntent().getExtras().getInt("SIDE");
    Toast.makeText(getActivity(), "Side selected....." +tID,   Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-17T10:19:02.257

您必须通过 setArguments() 方法设置您的 Bundle，而不是意图。如果您有 ViewPager，则可以将参数传递给 PagerAdapter，并在实例化 Fragment 时设置参数。

我不明白你的 SIDE 是如何计算的，它是什么意思，所以我展示了一般的 ide。

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_slide);
    Bundle bundle = new Bundle();
    bundle.putInt("SIDE",2);
    mPager = (ViewPager)findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager(), bundle);
    mPager.setAdapter(mPagerAdapter);
}

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter{

    private final Bundle fragmentBundle;

    public ScreenSlidePagerAdapter(FragmentManager fm, Bundle data){
        super(fm);
        fragmentBundle = data;
    }

    @Override
    public ScreenSlidePageFragment getItem(int arg0) {
        final ScreenSlidePageFragment f = new ScreenSlidePageFragment();
        f.setArguments(this.fragmentBundle);
        return f;
    }

    @Override
    public int getCount() {
        return  NUM_PAGES;
    }
} 
```

分段

```
@Override
public void onCreate(Bundle state) {
    super.onCreate(state);
    final Bundle args = getArguments();
    final int side = args.getInt("SIDE");
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-12T18:34:46.793

这可能不是您确切要求的解决方案，但这是我所做的，它可能会帮助某人：

在您的片段中创建一个公共方法：

```
public void doSomething(String myValue){
     // Do stuff in your fragment with myValue
} 
```

在您的活动中，从您的适配器获取片段。您可以根据添加的顺序知道它是哪个片段。执行您的片段方法，传入您的变量：

```
// Get FriendsFragment (first fragment)
MyFragment fragment = (MyFragment) mAdapter.getItem(0);
fragment.doSomething("some-value"); 
```

# delphi - 如何响应自定义网格控件中的调整大小事件？

> ID：14727765
> 
> 赞同：4
> 
> 时间：2013-02-06T11:19:19.520
> 
> 标签：delphi

我是 Delphi 的新手，我正在构建一个从 TStringGrid 派生的自定义控件。我需要访问 OnResize 事件处理程序。我如何访问它？TStringGrid 的父级有一个 OnResize 事件

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T11:25:35.007

发布`OnResize`事件，默认情况下在`TControl`.

* * *

在自己的后代中，您不应使用事件本身，而应使用触发事件的方法。这样做会让组件的用户有机会实现自己的事件处理程序。

覆盖调整大小方法：

```
type
  TMyGrid = class(TStringGrid)
  protected
    procedure Resize; override;
  published
    property OnResize;
  end;

{ TMyGrid }

procedure TMyGrid.Resize;
begin
  // Here your code that has to be run before the OnResize event is to be fired
  inherited Resize; // < This fires the OnResize event
  // Here your code that has to be run after the OnResize event has fired
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T15:42:56.357

覆盖 Resize 有一个问题：不仅会在实际调整网格大小时调用该事件，**而且还会在您更改 RowCount 时**调用该事件。

在一个程序中，当用户调整网格大小时，我需要向网格添加/删除行。换句话说，我必须让网格充满行/数据。但是，当我添加/删除行时，数据无法访问。

所以，我用了这个：

```
protected
   procedure WMSize(var Msg: TWMSize); message WM_SIZE;
   .....

Implementation

procedure TMyGrid.WMSize(var Msg: TWMSize);      
begin
 inherited;
 if (csCreating in ControlState) then EXIT;                                                          { Maybe you also need this } { Don't let grid access data during design }
 ComputeRowCount;
 AssignDataToRows;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T21:33:24.040

您可以简单地将 TStringGrid 放置在 TPanel 内并将其与 alClient 对齐，然后使用 TPanel 的已发布 Resize 事件进行任何操作。

# wpf - Windows 8 中 WPF 菜单项图标行为的解决方法

> ID：14727770
> 
> 赞同：2
> 
> 时间：2013-02-06T11:19:32.743
> 
> 标签：wpf, windows-8

我的 WPF 应用程序中有一个菜单，它使用 PNG 图像作为图标。这些图像作为资源存储在单独的 DLL 中。在旧版本的 Windows 中，图标（48x48 像素）正确显示，缩小到容器的大小。

在 Windows 8 中，图标的行为有所不同。

这是我的代码示例：

```
<MenuItem Header="Promotions" x:Name="mnuPromotions" Style="{StaticResource styMenuItem}">
    <MenuItem.Icon>
        <Image Source="{StaticResource icnPromotion_48}" Style="{StaticResource styMenuIcon}" />
    </MenuItem.Icon>
</MenuItem>
<MenuItem Header="Catalogues" x:Name="mnuCatalogues" Style="{StaticResource styMenuItem}">
    <MenuItem.Icon>
        <Image Source="{StaticResource icnCatalogue_48}" Style="{StaticResource styMenuIcon}" />
    </MenuItem.Icon>
</MenuItem>
  <MenuItem Header="Customer Price Lists" x:Name="mnuCustomerPriceLists">
    <MenuItem.Icon>
        <Image Source="{StaticResource icnCashCustomer_48}" Style="{StaticResource styMenuIcon}" />
    </MenuItem.Icon>
</MenuItem> 
```

这是菜单项的样式

```
<Style x:Key="styMenuItem" TargetType="MenuItem">
  <Setter Property="Foreground" Value="#FF000000" />
  <Setter Property="FontSize" Value="22" />
  <Setter Property="Margin" Value="2" />
  <Setter Property="Background">
    <Setter.Value>
      <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Offset="0" Color="#AA9D9D9D" />
        <GradientStop Offset="1" Color="#AACFCDBE" />
      </LinearGradientBrush>
    </Setter.Value>
  </Setter>
</Style> 
```

这是图标的风格

```
<Style x:Key="styMenuIcon" TargetType="Image">
  <Setter Property="Width" Value="20" />
  <Setter Property="Height" Value="20" />
  <Setter Property="VerticalAlignment" Value="Center" />
  <Setter Property="HorizontalAlignment" Value="Center" />
  <Setter Property="Margin" Value="2" />
</Style> 
```

这是旧版本 Windows 中菜单的外观： ![Windows XP 到 Windows 7 中的菜单](../Images/b419eb58d9ffa2b2e5331b514845205f.png)

这就是菜单在 Windows 8 中的样子 ![Windows 8 中的菜单](../Images/0208e7af8b388ea04009027720e0f95e.png)

如果您仔细观察，这些图标在 Win8 中居中并被裁剪，而在旧版本的 Windows 中它们适合容器。

有谁知道为什么这种行为会发生变化，以及是否有一个简单的解决方法来解决这种行为变化，以便菜单与从 XP 到 8 的所有 Windows 版本完全兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T08:18:28.663

看起来这种行为是一个已知的错误，（像往常一样）微软不想修复：

[http://connect.microsoft.com/VisualStudio/feedback/details/767328/menuitem-icon-wont-stretch-when-changeing-size-in-windows-8](http://connect.microsoft.com/VisualStudio/feedback/details/767328/menuitem-icon-wont-stretch-when-changing-size-in-windows-8)

发布了两种解决方法，一种简单的方法是将图像高度调整为每个 XAML 的菜单项高度：

```
<MenuItem x:Name="ctxMenuName" Header="Open Existing">
  <MenuItem.Icon>
     <Image Source="/MyApp;component/Images/folder_with_file.png"
                 Height="{Binding Path=ActualHeight, ElementName=ctxMenuName}"
                 Width="{Binding Path=ActualHeight, ElementName=ctxMenuName}" />
  </MenuItem.Icon>
</MenuItem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T10:28:11.583

在升级现有 WPF 应用程序以支持 Windows 10 时遇到这种情况。这是从 MenuItem 继承的解决方法。这将适用于其他内容以及图像。

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace MenuItemDemo
{
    public class MenuItemEx : MenuItem
    {
        public MenuItemEx()
        {
            base.Loaded += FrameworkElement_OnLoaded;
        }

        private void FrameworkElement_OnLoaded(object sender, RoutedEventArgs e)
        {
            var child = Icon as FrameworkElement;
            if (child == null)
                return;

            var parent = VisualTreeHelper.GetParent(child) as ContentPresenter;
            if (parent == null)
                return;

            parent.Width = child.Width;
            parent.Height = child.Height;
        }
    }
} 
```

`xmlns:menuitem="clr-namespace:MenuItemDemo"`然后在 xaml中使用它引用，然后更改`<MenuItem>`为`<menuitem:MenuItemEx>`

一个使用这个的示例窗口

```
<Window x:Class="MenuItemDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:menuitem="clr-namespace:MenuItemDemo"
        Title="MainWindow" Height="350" Width="525">    
        <DockPanel>
            <Menu DockPanel.Dock="Top">
                <menuitem:MenuItemEx>
                    <MenuItem.Icon>
                        <Label>Text asdfasdf</Label>
                    </MenuItem.Icon>
                </menuitem:MenuItemEx>  
            </Menu>
            <Grid></Grid>
        </DockPanel>     
</Window> 
```

# ios - iOS 应用程序委托中的 self.window 是什么

> ID：14727777
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:19:44.887
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我对 iOS 中的窗口和视图控制器有疑问。我只是看了一下我今天正在处理的iOS项目的应用程序委托，发现它需要...

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController; 
```

在我的应用程序中。

以下是问题：

1.  这是否意味着 navigationController 是我的应用程序的根视图控制器？NavigationController 是 UIViewController 的子类，但它的任务只是在导航栏提供导航功能，对吗？

2.  什么是self.window？我想我理解“视图”和“视图控制器”的概念，但我不太明白“窗口”是什么……iPhone 有一个屏幕，但 MacPro 可以有 2 个显示器；这些窗口是针对 iOS 和 OS X 的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:33:50.657

1.  可能。self.window.rootViewController 将返回窗口的根视图控制器，我认为在这种情况下，来自情节提要。这条线将返回的对象转换为导航控制器这一事实并不能使其成为一体——它将是故事板中的任何内容（带有未连接到其他任何东西的左箭头的控制器）。假设转换是正确的，这允许您编写诸如 navigationController.topViewController 之类的东西，而不会让编译器抱怨它。至于导航控制器的功能，它确实提供了导航栏的功能，但它也显示了它的内容控制器的视图，它的 topViewController 的视图是你在启动时会看到的。

2.  iOS 中的窗口是 UIWindow，它是 UIView 的子类，因此它与 OS X 中的窗口不同。查看 UIWindow 类参考的概述部分以了解它的作用。

# api - Restlet：对“/customer”和“/customer/”使用相同的资源

> ID：14727780
> 
> 赞同：0
> 
> 时间：2013-02-06T11:19:48.993
> 
> 标签：api, restlet

我想找到一个解决方案，为同一资源使用 2 条路线。

例如，我是一个资源 CustomerResource，我想将相同的资源用于“/customer”和“/customer/”，并添加尾部斜杠。

你对此有什么建议吗？

问候，

编辑：我覆盖 SpringBeanRouter 以发布带有和不带有斜杠路由的资源：

```
public class MySpringBeanRouter extends SpringBeanRouter {

    @Override
    public TemplateRoute attach(String pathTemplate, Restlet target) {
        if(pathTemplate != null && pathTemplate.endsWith("/"))
            super.attach(pathTemplate.substring(0, pathTemplate.length() - 1), target);

        return super.attach(pathTemplate, target);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:25:55.717

可以在两个不同的路由下附加相同的资源类：

router.attach("/customer", CustomerServerResource.class);

router.attach("/customer/", CustomerServerResource.class);

# php - 我想获取 file.txt 的内容并将其打印到某个关键字 php

> ID：14727782
> 
> 赞同：0
> 
> 时间：2013-02-06T11:19:59.290
> 
> 标签：php, fopen

假设有一个名为 1.txt 的文本文件，其内容如下。

```
wow<br>wow<br>wow<!--Read More--><br>wow<br>wow<br>wow<br>wow<br>wow<br>wow<br> 
```

我只想显示它的内容，直到`<!--Read More-->` 目前正在使用 fopen 命令来读取和显示整个文本文件。

```
$file_handle = fopen("posts/1.txt", "r");
while (!feof($file_handle)) {
$line_of_text = fgets($file_handle);
print $line_of_text;
} 
```

请有人帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:23:54.393

```
$file_handle = fopen("posts/1.txt", "r");
while ((!feof($file_handle) && (($line_of_text = fgets($file_handle)) != "<!--Read More-->")) 
{
  print $line_of_text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:24:58.817

**警告**：仅当您的“停止文本”始终在同一行时才有效

您可以使用[strstr()](http://php.net/manual/en/function.strstr.php)函数来检查您读取的行是否包含要停止的字符串。

使用您的行作为第一个参数调用它，如果搜索的字符串不在行中，则作为第二个和`true`第三个参数`false`搜索的字符串将返回，或者它将返回搜索字符串**之前**的行部分。

```
$file_handle = fopen("posts/1.txt", "r");
while (!feof($file_handle)) {
    /* Retrieve a line */
    $line_of_text = fgets($file_handle);
    /* Check if the stop text is in the line. If no returns false
       else return the part of the string before the stop text */
    $ret = strstr($line_of_text, "<!--Read More-->", true);
    /* If stop text not found, print the line else print only the beginning */
    if (false === $ret) {
        print $line_of_text;
    } else {
        print $ret;
        break;
    }
} 
```

# ruby-on-rails - 通过 Rails 中的控制器传递模型错误

> ID：14727786
> 
> 赞同：0
> 
> 时间：2013-02-06T11:20:09.803
> 
> 标签：ruby-on-rails, ruby, model-view-controller, model

我有 2 个模型 - 项目和审查。项目 has_many review 和 Review belongs_to Project。当我打开项目（**显示**REST 操作）时，我可以为其添加评论。但是从表单接受数据并保存数据的控制器在项目上是不同的（在 ProjectsController 中显示动作，在 ReviewController 中创建 Review 动作）。

问题是我不明白 Review 模型是如何呈现错误的。如果我有 1 个控制器，我会执行以下操作：

```
if @project.save
  respond_to do |format|
    format.js
    format.html {redirect_to :back, :notice => I18n.t("activerecord.attributes.project.added")}
  end
else
  render :action => :show
end 
```

Rails 在每个有错误的表单字段下呈现错误消息。不接受 Flash 消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:55:35.823

在您的评论控制器中，尝试以下操作

```
def create
  @project = Project.find... # fetch the project
  @review = @project.reviews.build params[:review]
  @review.save

  render template: 'projects/show'
end 
```

在项目页面中，检查`@review`是否有错误

```
# app/views/projects/show.html.erb
<% if @review && @review.errors.any? %>
  ...
<% end %> 
```

# c# - 如何获取文本框，编辑它们并将它们保存回数据库？

> ID：14727787
> 
> 赞同：2
> 
> 时间：2013-02-06T11:20:10.213
> 
> 标签：c#, winforms

我在 Form1 中有一个网格视图和文本框。当 Form1 加载时，它会将数据从数据库加载到 Gridview 中。我有一个 Gridview 的 selectionChanged 事件，数据从哪里进入文本框，现在我的问题是我想在文本框中编辑它们并将它们保存到数据库，但是当我点击保存按钮时，它正在数据库和 gridview 中创建一条新记录. 如何解决这个问题？

下面是我保存按钮的代码：

```
private void btnSave_Click_1(object sender, EventArgs e)
{
    DataRow dr = dt.NewRow();
    da = new SqlDataAdapter("select * from Measurement", con);
    SqlCommandBuilder cb = new SqlCommandBuilder(da);
    dr["CellNumber"] = txtCellNo.Text.Trim();
    dr["FirstName"] = txtFirstName.Text;
    dr["LastName"] = txtLastName.Text;
    dr["Shirt"] = txtShirt.Text;
    dr["Pant"] = txtPant.Text;
    dr["DueDate"] = txtDueDate.Text;
    dr["Date"] = txtDate.Text;
    if (dr["CellNumber"] == "")
    {
        MessageBox.Show("Please enter Cell Number");
    }
    else if (dr["CellNumber"] != "")
    {
        dr = dt.Select(" ID = " + txtID.Text)[0]; //updated here
    }

    try
    {
        da.Update(ds, "Measurement");
    }
    catch (DBConcurrencyException ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

网格视图的代码：

```
private void dgv_SelectionChanged_1(object sender, EventArgs e)
{
    if (dgv.SelectedRows.Count > 0)
    {

        foreach (DataGridViewRow row in dgv.SelectedRows)
        {
            //Send the first cell value into textbox'
            txtLastName.Text = row.Cells["LastName"].Value.ToString();
            txtFirstName.Text = row.Cells["FirstName"].Value.ToString();
            txtCellNo.Text = row.Cells["CellNumber"].Value.ToString();
            txtDate.Text = row.Cells["Date"].Value.ToString();
            txtDueDate.Text = row.Cells["DueDate"].Value.ToString();
            txtPant.Text = row.Cells["Pant"].Value.ToString();
            txtShirt.Text = row.Cells["Shirt"].Value.ToString();
            txtID.Text = row.Cells["ID"].Value.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:26:16.353

您在查询中缺少 WHERE 条件

```
da = new SqlDataAdapter("select * from Measurement WHERE ID = " + txtID.Text, con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:26:33.897

你应该看的是你保存到数据库中的方式。

现在发生的事情是您在数据库中插入一个新实体/行，而不是更新您已经加载的实体/行。

您缺少主键字段。身份证。因此，添加不存在且需要更新的实体将始终是一个新实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:40:47.797

`da.Update(ds, "Measurement");`正在插入新记录，因为`RowState`您尝试更新的行的属性设置为，`Added`因为您正在将单元格值分配给新行。您需要更新现有行的值。检查[DbDataAdapter.Update 文档](http://msdn.microsoft.com/en-us/library/aa325462%28v=vs.71%29.aspx)：

> 当应用程序调用 Update 方法时，DbDataAdapter 会检查 RowState 属性，并根据 DataSet 中配置的索引的顺序为每一行迭代执行所需的 INSERT、UPDATE 或 DELETE 语句

试试这个 ：

```
private void btnSave_Click_1(object sender, EventArgs e)
{
    da = new SqlDataAdapter();
    da.SelectCommand = new SqlCommand("select * from Measurement where ID = @ID",con);
    da.SelectCommand.Parameters.AddWithValue("@ID",int.Parse(txtID.Text));
    SqlCommandBuilder cb = new SqlCommandBuilder(da);
    da.Fill(ds, "Measurement");        

    if (String.IsNullOrEmpty(txtCellNo.Text.Trim()))
    {
        MessageBox.Show("Please enter Cell Number");
    }
    else
    {
        try
        {
           dr = ds.Tables["Measurement"].Rows[0];

           dr["CellNumber"] = txtCellNo.Text.Trim();
           dr["FirstName"] = txtFirstName.Text;
           dr["LastName"] = txtLastName.Text;
           dr["Shirt"] = txtShirt.Text;
           dr["Pant"] = txtPant.Text;
           dr["DueDate"] = txtDueDate.Text;
           dr["Date"] = txtDate.Text;

           cb.GetUpdateCommand();
           da.Update(ds, "Measurement");
        }
        catch (Exception ex)
        {
           MessageBox.Show(ex.Message);
        }
    }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:22:22.177

```
da = new SqlDataAdapter("select * from Measurement", con);
SqlCommandBuilder cb = new SqlCommandBuilder(da);
dr = dt.Select(" ID = " + txtID.Text)[0];

if (txtCellNo.Text == "")
{
    MessageBox.Show("Please enter Cell Number");
}
else if (dr["CellNumber"] != "")
{
    dr["CellNumber"] = txtCellNo.Text.Trim();
    dr["FirstName"] = txtFirstName.Text;
    dr["LastName"] = txtLastName.Text;
    dr["Shirt"] = txtShirt.Text;
    dr["Pant"] = txtPant.Text;
    dr["DueDate"] = txtDueDate.Text;
    dr["Date"] = txtDate.Text;
}

try
{
    da.Update(ds, "Measurement");
}
catch (DBConcurrencyException ex)
{
    MessageBox.Show(ex.Message);
} 
```

# c# - 通过网络发送自定义结构 - SerializationException

> ID：14727791
> 
> 赞同：2
> 
> 时间：2013-02-06T11:20:22.107
> 
> 标签：c#, serialization, tcp

早上，我有一个 TCP 服务器和一个 TCP 客户端。这是服务器的代码：

```
public static class Server
{
    private static IPEndPoint endPoint;

    private static TcpListener tcpServer;
    private static List<Client> clients;
    private static Thread threadListen;

    private static ASCIIEncoding encoding;

    public static void Initialize(IPAddress allowedIPAddress, int port)
    {
        endPoint = new IPEndPoint(allowedIPAddress, port);

        tcpServer = new TcpListener(endPoint);
        clients = new List<Client>();
        threadListen = new Thread(new ThreadStart(Listen));

        encoding = new ASCIIEncoding();
    }

    public static void Start()
    {
        threadListen.Start();
    }

    public static byte[] PacketToArray(Packet packet)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream();

        formatter.Serialize(stream, packet);
        byte[] packetArray = stream.GetBuffer();

        stream.Close();

        return packetArray;
    }

    public static Packet ArrayToPacket(byte[] array)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream(array);

        Packet packet = new Packet();
        packet = (Packet) formatter.Deserialize(stream);

        stream.Close();

        return packet;
    }

    public static void Send(Client target, Packet packet)
    {
        byte[] packetArray = PacketToArray(packet);

        target.networkStream.Write(packetArray, 0, packetArray.Length);
        target.networkStream.Flush();
        OnSend(packet);
    }

    private static void Listen()
    {
        tcpServer.Start();

        while (true)
        {
            try
            {
                Client client = new Client();
                client.tcpClient = tcpServer.AcceptTcpClient();
                client.networkStream = client.tcpClient.GetStream();
                client.thread = new Thread(new ParameterizedThreadStart(HandleCommunication));

                clients.Add(client);
                client.thread.Start(client);
                OnJoin(client);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception: " + ex.Message);
                break;
            }
        }
    }

    private static void HandleCommunication(object client)
    {
        Client handleClient = (Client) client;

        byte[] messageBuffer = new byte[4096];
        int bytesRead = 0;

        while (true)
        {
            bytesRead = 0;

            try
            {
                bytesRead = handleClient.networkStream.Read(messageBuffer, 0, messageBuffer.Length);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception: " + ex.Message);
                break;
            }

            if (bytesRead == 0)
            {
                clients.Remove(handleClient);
                OnLeave(handleClient);
                break;
            }

            Packet packet = ArrayToPacket(messageBuffer);
            OnReceive(packet);
        }
    }

    private static void OnStart()
    {
        Console.WriteLine("Server started on port .");
    }

    private static void OnJoin(Client client)
    {
        Console.WriteLine("Client [ID] connected.");

        Send(client, PacketGenerator.Generate(OpCodes.opHandshake, null));
    }

    private static void OnLeave(Client client)
    {
        Console.WriteLine("Client [ID] disconnected.");
    }

    private static void OnSend(Packet packet)
    {
        Console.WriteLine("Server: " + packet.opcode.ToString() + " | " + packet.message);
    }

    private static void OnReceive(Packet packet)
    {
        Console.WriteLine("Client [ID]: " + packet.opcode.ToString() + " | " + packet.message);
    }

    public struct Client
    {

        public TcpClient tcpClient;
        public NetworkStream networkStream;
        public Thread thread;

    }

} 
```

这是客户端的代码：

```
[Serializable]
public struct Packet
{

    public int opcode;
    public string message;

}

public static class Client
{

    private static IPEndPoint endPoint;

    private static TcpClient tcpClient;
    private static NetworkStream networkStream;
    private static Thread threadCommunication;

    private static ASCIIEncoding encoding;

    public static void Initialize(string ipAddress, int port)
    {
        endPoint = new IPEndPoint(IPAddress.Parse(ipAddress), port);
        tcpClient = new TcpClient();
        networkStream = null;
        threadCommunication = new Thread(new ThreadStart(HandleCommunication));

        encoding = new ASCIIEncoding();
    }

    public static void Connect()
    {
        tcpClient.Connect(endPoint);
        threadCommunication.Start();
        Console.WriteLine("Connected to server.");

        networkStream = tcpClient.GetStream();
    }

    public static byte[] PacketToArray(Packet packet)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream();

        formatter.Serialize(stream, packet);
        byte[] packetArray = stream.GetBuffer();

        stream.Close();

        return packetArray;
    }

    public static Packet ArrayToPacket(byte[] array)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream(array);

        Packet packet = new Packet();
        packet = (Packet)formatter.Deserialize(stream);

        stream.Close();

        return packet;
    }

    public static void Send(Packet packet)
    {
        byte[] packetArray = PacketToArray(packet);

        networkStream.Write(packetArray, 0, packetArray.Length);
        networkStream.Flush();
        OnSend(packet);
    }

    private static void HandleCommunication()
    {
        byte[] messageBuffer = new byte[4096];
        int bytesRead = 0;

        while (true)
        {
            bytesRead = 0;

            try
            {
                bytesRead = networkStream.Read(messageBuffer, 0, messageBuffer.Length);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception: " + ex.Message);
                break;
            }

            if (bytesRead == 0)
            {
                Console.WriteLine("Connection closed.");
                break;
            }

            Packet packet = ArrayToPacket(messageBuffer);
            OnReceive(packet);
        }
    }

    private static void OnSend(Packet packet)
    {
        Console.WriteLine("Client [ID]: " + packet.opcode.ToString() + " | " + packet.message);
    }

    private static void OnReceive(Packet packet)
    {
        Console.WriteLine("Server: " + packet.opcode.ToString() + " | " + packet.message);

        switch (packet.opcode)
        {

            case OpCodes.opHandshake:
                Send(PacketGenerator.Generate(OpCodes.opHandshake, null));
                break;

        }
    }

} 
```

但是，当我从服务器向客户端发送数据包（握手）时，客户端在“packet = (Packet) formatter.Deserialize(stream);”处的“ArrayToPacket”函数中出现异常 确切的消息是：找不到程序集“ComDee，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”。（ComDee 是服务器运行的程序集）。

为什么？客户端的数据包结构与服务器的结构相同。

**更新**

我已经编辑了 Server 和 Client 类并使用了 protobuf-net。但是客户端类中的“OnReceive”不会被调用。哪里有问题？服务器级：

```
[ProtoContract]
public struct Packet
{

    [ProtoMember(1)] public int opcode;
    [ProtoMember(2)] public string message;

}

public static class Server
{

    private static IPEndPoint endPoint;

    private static TcpListener tcpServer;
    private static List<Client> clients;
    private static Thread threadListen;

    private static ASCIIEncoding encoding;

    public static void Initialize(IPAddress allowedIPAddress, int port)
    {
        endPoint = new IPEndPoint(allowedIPAddress, port);

        tcpServer = new TcpListener(endPoint);
        clients = new List<Client>();
        threadListen = new Thread(new ThreadStart(Listen));

        encoding = new ASCIIEncoding();
    }

    public static void Start()
    {
        threadListen.Start();
    }

    public static byte[] PacketToArray(Packet packet)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream();

        Serializer.Serialize<Packet>(stream, packet);
        byte[] packetArray = stream.GetBuffer();

        stream.Close();

        return packetArray;
    }

    public static Packet ArrayToPacket(byte[] array)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream(array);

        Packet packet = new Packet();
        packet = Serializer.Deserialize<Packet>(stream);

        stream.Close();

        return packet;
    }

    public static void Send(Client target, Packet packet)
    {
        byte[] packetArray = PacketToArray(packet);

        target.networkStream.Write(packetArray, 0, packetArray.Length);
        target.networkStream.Flush();
        OnSend(packet);
    }

    private static void Listen()
    {
        tcpServer.Start();
        OnStart();

        while (true)
        {
            try
            {
                Client client = new Client();
                client.tcpClient = tcpServer.AcceptTcpClient();
                client.networkStream = client.tcpClient.GetStream();
                client.thread = new Thread(new ParameterizedThreadStart(HandleCommunication));

                clients.Add(client);
                client.thread.Start(client);
                OnJoin(client);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception: " + ex.Message);
                break;
            }
        }
    }

    private static void HandleCommunication(object client)
    {
        Client handleClient = (Client) client;

        byte[] messageBuffer = new byte[4096];
        int bytesRead = 0;

        while (true)
        {
            bytesRead = 0;

            try
            {
                bytesRead = handleClient.networkStream.Read(messageBuffer, 0, messageBuffer.Length);
            }
            catch
            {
                clients.Remove(handleClient);
                OnLeave(handleClient);
                break;
            }

            if (bytesRead == 0)
            {
                Packet packet = ArrayToPacket(messageBuffer);
                OnReceive(packet);
            }
        }
    }

    private static void OnStart()
    {
        Console.WriteLine("Server started.");
    }

    private static void OnJoin(Client client)
    {
        Console.WriteLine("Client [ID] connected.");

        Send(client, PacketGenerator.Generate(OpCodes.opHandshake, null));
    }

    private static void OnLeave(Client client)
    {
        Console.WriteLine("Client [ID] disconnected.");
    }

    private static void OnSend(Packet packet)
    {
        Console.WriteLine("Server: " + packet.opcode.ToString() + " | " + packet.message);
    }

    private static void OnReceive(Packet packet)
    {
        Console.WriteLine("Client [ID]: " + packet.opcode.ToString() + " | " + packet.message);
    }

    public struct Client
    {

        public TcpClient tcpClient;
        public NetworkStream networkStream;
        public Thread thread;

    }

} 
```

这是客户端类：

```
[ProtoContract]
public struct Packet
{

    [ProtoMember(1)]
    public int opcode;
    [ProtoMember(2)]
    public string message;

}

public static class Client
{

    private static IPEndPoint endPoint;

    private static TcpClient tcpClient;
    private static NetworkStream networkStream;
    private static Thread threadCommunication;

    private static ASCIIEncoding encoding;

    public static void Initialize(string ipAddress, int port)
    {
        endPoint = new IPEndPoint(IPAddress.Parse(ipAddress), port);
        tcpClient = new TcpClient();
        networkStream = null;
        threadCommunication = new Thread(new ThreadStart(HandleCommunication));

        encoding = new ASCIIEncoding();
    }

    public static void Connect()
    {
        tcpClient.Connect(endPoint);
        threadCommunication.Start();
        Console.WriteLine("Connected to server.");

        networkStream = tcpClient.GetStream();
    }

    public static byte[] PacketToArray(Packet packet)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream();

        Serializer.Serialize<Packet>(stream, packet);
        byte[] packetArray = stream.GetBuffer();

        stream.Close();

        return packetArray;
    }

    public static Packet ArrayToPacket(byte[] array)
    {
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream(array);

        Packet packet = new Packet();
        packet = Serializer.Deserialize<Packet>(stream);

        stream.Close();

        return packet;
    }

    public static void Send(Packet packet)
    {
        byte[] packetArray = PacketToArray(packet);

        networkStream.Write(packetArray, 0, packetArray.Length);
        networkStream.Flush();
        OnSend(packet);
    }

    private static void HandleCommunication()
    {
        byte[] messageBuffer = new byte[4096];
        int bytesRead = 0;

        while (true)
        {
            bytesRead = 0;

            try
            {
                bytesRead = networkStream.Read(messageBuffer, 0, messageBuffer.Length);
            }
            catch
            {
                Console.WriteLine("Connection closed.");
                break;
            }

            if (bytesRead == 0)
            {
                Packet packet = ArrayToPacket(messageBuffer);
                OnReceive(packet);
            }
        }
    }

    private static void OnSend(Packet packet)
    {
        Console.WriteLine("Client [ID]: " + packet.opcode.ToString() + " | " + packet.message);
    }

    private static void OnReceive(Packet packet)
    {
        Console.WriteLine("Server: " + packet.opcode.ToString() + " | " + packet.message);

        switch (packet.opcode)
        {

            case OpCodes.opHandshake:
                Send(PacketGenerator.Generate(OpCodes.opHandshake, null));
                break;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:27:03.547

类型由它们的程序集限定，并且 BinaryFormatter 序列化类型元数据（程序集限定名称等）。在两个地方拥有相同的副本`class`是不够的：它们不是同一*类型*，除非它们来自同一个*程序集*。

另请注意，`BinaryFormatter`它存储在网络上的内容非常冗长。如果您想要解决这两个问题而无需手动进行所有序列化的东西，那么 protobuf-net 将有所帮助：

*   它在电线上非常密集
*   它不受特定类型的约束；只要 A 和 B 看起来相似，您就可以用 A 序列化并用 B 反序列化

例如：

```
[ProtoContract]
public struct Packet {    
    [ProtoMember(1)] public int opcode;
    [ProtoMember(2)] public string message;
} 
```

并使用`Serializer.Serialize`而不是`BinaryFormatter`.

# forms - 如何使用 cakephp 2.3 正确处理表单中的关联数据

> ID：14727795
> 
> 赞同：0
> 
> 时间：2013-02-06T11:20:27.810
> 
> 标签：forms, cakephp, associations

我是 cakephp 的新手。我有一个“用户”表和一个“类别”表

user belongsTo category (fields: users.id, users.name, users.category) category hasMany users (fields: category.id, category.name, users.category)

我正在处理这样的关联数据。

在（用户）edit.ctp 我把

```
// view/Users/edit.ctp

    echo $this->Form->input('name');
    echo $this->Form->input('categories', array( 'value' => $this->Form->value('User.category'), 
'name'=>'data[User][category]') );
</pre>

in users controller I have
<pre>
    public function edit($id = null) {
        $this->User->id = $id;
        if (!$this->User->exists()) {
            throw new NotFoundException(__('Invalid user'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->User->read(null, $id);
        }
        $sexes = $this->User->Sex->find('list');
        $categories = $this->User->Category->find('list');
        $this->set(compact('categories'));

    } 
```

一切正常，但我怀疑有一种更简单的方法可以完成该表格。这真的需要吗？
**, array( 'value' => $this->Form->value('User.category'), 'name'=>'data[User][category]')**
没有这些参数，选择框不会高亮选中选项，并没有保存任何内容。

可能是这样的

```
echo $this->Form->input('Category.name'); 
```

例如？但是这样的代码不会显示选择框。
而且它不保存 users.category 字段。

我无法找到任何带有示例的教程或代码。链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:30:46.473

尝试对数据库表和字段使用 Cake 的命名约定。如果您遵循约定，Cake 将为您完成很多繁重的工作：

用户表：

```
users.id, users.name, users.category_id 
```

类别表

```
categories.id, categories.name 
```

用户模型

```
class User extends AppModel {

    public $belongsTo = array(
        'Category'
    );

} 
```

类别模型

```
class Category extends AppModel {

    public $hasMany = array(
        'User'
    );

} 
```

用户控制器：

```
class UsersController extends AppController {

    public function edit($id) {

        if (!empty($this->request->data) {

            // form submitted - try to save
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash('User updated');
            }
            else {
                $this->Session->setFlash('Please correct the errors');
            }
        }
        else {
           // prepopulate the form
           $this->request->data = $this->User->findById($id);
        }

        // populate the categories dropdown
        $this->set('categories', $this->User->Category->find('list');

    }

} 
```

/app/views/Users/edit.ctp

```
<?php

echo $this->Form->create();
echo $this->Form->inputs();
echo $this->Form->end('Update'); 
```

# ruby-on-rails - Rails 3 + devise + active_scaffold 如何不需要密码

> ID：14727797
> 
> 赞同：0
> 
> 时间：2013-02-06T11:20:31.180
> 
> 标签：ruby-on-rails, devise, activescaffold

我有基于设计的模型机构：

```
class Agency < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :name, :email, :phone, :address, :city, :state, :zip,
                  :notes, :is_admin, :password, :password_confirmation, :remember_me

  protected

  def password_required?
   !persisted? || password.present? || password_confirmation.present?
  end
end 
```

我也有基于 active_scaffold 的 AgenciesController：

```
class Admin::AgenciesController < Admin::BaseController
  before_filter :authorize_admin!

  active_scaffold :agency do |conf|
    actions.exclude :show

    create.link.page = true
    update.link.page = true

    list.columns = [
      :name, :email, :phone, :address, :city, 
      :state, :zip, :notes, :events, :is_admin
    ]

    create.columns = [
      :name, :email, :phone, :address, :city, :state, :zip, 
      :is_admin, :password, :password_confirmation
    ]

    update.columns = [
      :name, :email, :phone, :address, :city, :state, :zip, 
      :is_admin, :password, :password_confirmation
    ]

    columns.add :password
    columns.add :password_confirmation    

    columns[:password].form_ui = :password
    columns[:password_confirmation].form_ui = :password
  end
end 
```

然后是代理商更新表格：
![在此处输入图像描述](../Images/dee74918dcf186c7242fe2dbaf5fe9d6.png)

**我想为用户提供一个机会来省略密码和密码确认字段的填写。但如果用户填写密码字段，则必须要求密码确认字段。**

我几乎通过 password_required 解决了我的问题？方法。但是客户端上的javascript需要验证不允许我完全解决我的问题。

![在此处输入图像描述](../Images/3c582a64ebe1d0aeaf02fe781189bb9c.png)

**如何从客户端删除密码和密码确认字段的 JS 验证？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:44:12.740

尝试：

```
validates_confirmation_of :password, :if => :password_required?

validates :password_confirmation, :presence => true, :if => '!password.nil?' 
```

请注意，只有在`password_required?`返回 true 时才会触发验证，如果字段为 nil ，`password_required?`则将返回 false 。`password_confirmation`

因此，为了使`password_confirmation`字段为 nil，您只需`password_confirmation`从表单中删除该字段，这样您将始终将其设为 nil，从而绕过验证。

替代解决方案：

1）[跳过密码字段的验证](https://stackoverflow.com/questions/3542819/in-rails-3-how-can-i-skip-validation-of-the-password-field-when-im-not-attempt)

2）只需在密码字段中保存一个随机安全生成的数字（更好，因为它很容易并且还保持一致性）。

```
self.password = self.password_confirmation = SecureRandom.urlsafe_base64(n=6) 
```

此外，如果您希望这些字段应该以不同的方式标识为用户留下的，那么您可以为它们提供唯一的密码，以便稍后您施加如下条件：

```
if(self.password == "something unique" and self.password_confirmation == "something unique")
    flash[:notice] = "The user has not password"
end 
```

然后在 UI 级别，您只需使用上述条件显示空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:00:40.090

@Saurabh Jain，非常感谢您的建议。
但解决方案非常简单。
我发现 active_scaffold 为密码字段的输入标签添加了一个必需的属性。
换句话说，客户得到一个 html

```
<input type="password" required="required" size="30" name="record[password_confirmation]" id="record_password_confirmation_4" class="password_confirmation-input text-input" autocomplete="off"> 
```

完全需要的属性是我的问题:) 要从 html 中删除它，只需添加行

```
columns[:password].required = false; 
```

到 Admin::AgenciesController 中的 active_scaffold 配置（见上面）

# c++ - 免费/删除 - 如果我不打电话给他们怎么办

> ID：14727801
> 
> 赞同：2
> 
> 时间：2013-02-06T11:20:45.413
> 
> 标签：c++, c, memory, memory-management, malloc

我知道，如果我不使用 delete/free 释放分配的内存，我最终会出现内存泄漏。我的问题是：如果我的程序被终止，操作系统是否会为我释放内存，即使我没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:22:54.310

简而言之，是的。

当进程终止时，所有映射到进程地址空间的存储都将返回给操作系统，即使您没有显式释放它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:25:13.223

在 C++ 中，删除将导致调用对象的析构函数。这个析构函数可能会处理除释放内存之外的事情。它可能会关闭文件、减少引用计数等。因此，如果您忽略删除动态分配的对象，不知道会出现什么问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T11:55:02.130

内存是否泄漏取决于操作系统。在大多数操作系统的情况下，一旦您的程序运行的进程退出操作系统，操作系统就会简单地回收它分配给进程的内存。

它还有另一个重要方面。`new`导致调用类构造函数并`delete`导致调用析构函数。因此，如果您调用`new`并且从未调用过，`delete`那么除了在程序退出后可能/可能不存在的*所谓内存泄漏之外，还有一个附加条件是，如果特定类的析构函数调用了一些具有**[副作用](https://stackoverflow.com/questions/9563600/what-exactly-is-a-side-effect-in-c)*的代码，那么它会导致未定义的行为。

所以答案取决于，你可能有：

*   内存泄漏（*取决于操作系统行为*）
*   未定义的行为（*取决于析构函数中的代码是否有副作用*）

**C++11 标准 3.8 对象生命周期：
第 4 段：**

> 程序可以通过重用对象占用的存储空间或通过显式调用具有非平凡析构函数的类类型对象的析构函数来结束任何对象的生命周期。对于具有非平凡析构函数的类类型的对象，在重用或释放对象占用的存储空间之前，程序不需要显式调用析构函数；但是，**如果没有显式调用析构函数，或者如果没有使用删除表达式 (5.3.5) 来释放存储，则不应隐式调用析构函数以及依赖于析构函数产生的副作用的任何程序具有未定义的行为。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T11:25:52.597

如果您不调用`delete`- 将不会调用任何析构函数。如果任何析构函数关闭文件、向数据库写入内容等，则不会执行这些操作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T11:31:34.857

您的问题似乎是基于对内存如何工作的天真理解，这与现代操作系统的工作方式不相符。术语“内存”含糊不清，您真的应该分别考虑物理内存（RAM）和虚拟内存（地址空间）。

当您调用 时`malloc`，您会在进程中保留地址空间。如果操作系统认为这样做是明智的，它会用物理 RAM 支持该地址空间。如果操作系统想将该 RAM 用于其他用途，它只是这样做。你无法阻止它。因此，您不必担心 RAM。操作系统足够智能，即使内存没有被某个进程专门释放，它也可以始终将其充分利用。

虚拟内存，仅仅是地址空间，并不稀缺。一旦您的进程终止，您的地址空间就会不复存在。所以没有什么可以退货的。

一旦内存无法访问，操作系统就别无选择，只能将其释放。

# java - 带空格的分隔符和分隔符后的读取空间

> ID：14727805
> 
> 赞同：1
> 
> 时间：2013-02-06T11:20:53.980
> 
> 标签：java, delimiter

我如何在分隔符（“”）之后将空格作为字符串，因为只有他们的名字被读取。

```
public class readfile {

    public static void main(String[] args) throws IOException {

        String readFile = "";
        int i;

        if (args.length == 1) {
            readFile = args[0];

            BufferedReader reader = new BufferedReader(new FileReader(readFile));
            List<String> read = new ArrayList<String>();
            String rLine;
            while ((rLine = reader.readLine()) != null) {
                String[] items = rLine.split(" ");

                if (items[0].equals("Name")) {
                    for (i = 1; i < items.length; i++) {

                        String name = items[1];

                    }

                    System.out.println("Name is " + items[1]);
                }
            }
        }

    }
}

Classlist.txt

Name Alice Mark
Name Rebecca Appel
Name Jonah BullLock Jacob
Name Daniel Ethan Aron 
```

输出：

名字是爱丽丝 名字是丽贝卡 名字是约拿 名字是丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:51:28.820

如果包含名称的文件的格式始终相同，即以“名称”开头并且名称之间只有一个空格，则可以使用以下代码：

```
while ((rLine = reader.readLine()) != null) {
    if (rLine.startsWith("Name ")) {
        String name = rLine.substring(5);
        System.out.println("Name is " + name);
    }
} 
```

然后输出例如`'Name is Jonah BullLock Jacob'`用于第三行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:28:01.983

更改以下行：

```
 for (i = 1; i < items.length; i++) {

                            String name = items[1];

                        } 
```

至：

```
 String name = "";
                  for (i = 1; i < items.length; i++) {

                        name += items[i];

                    } 
```

# c# - 为什么我必须手动创建 ExpandoObject 才能正确使用 dynamic 关键字？

> ID：14727807
> 
> 赞同：0
> 
> 时间：2013-02-06T11:20:55.743
> 
> 标签：c#, dynamic, expandoobject

我在看问题[Use 'dynamic' throw a RuntimeBinderException](https://stackoverflow.com/questions/14471929/use-dynamic-throw-a-runtimebinderexception)。我面临类似的问题：

基本上，我想在 ASP.NET MVC 中创建一个使用动态参数的“HTML 助手”，类似于许多现有助手的 htmlArguments 参数（下面有更多代码）：

```
public BootstrapCell(Action<string> emitContentAction, dynamic args) 
```

看法：

```
@using (grid.Cell(ViewContext.Writer.Write, new {Position = 4}))
{
     <p>zomg!</p>
} 
```

然而，在天真的方法中，我被`RuntimeBinderException`抛出，声明`'object' does not contain a definition for 'Position'`，即使在调试和悬停在 _args 变量上时，它显然*确实*有一个 Position 属性。

调用者和被调用者位于不同的程序集中。为什么会出现这个问题？

（解决方案已在同一个问题中显示：[手动创建一个 ExpandoObject](https://stackoverflow.com/a/14495614/122764)来保存参数。）

执行：

```
public class Cell
{
    private readonly string _tagName;
    private dynamic _args;
    private Action<string> EmitContentAction;

    public BootstrapCell(Action<string> emitContentAction, dynamic args) : DisposableBaseClass
    {
        _args = args;
        EmitContentAction = emitContentAction;
        OnContextEnter();
    }

    protected void OnContextEnter()
    {
        var sb = new StringBuilder("<");
        sb.Append(_tagName);

        if (_args.Position > 0)
        {
            sb.Append(" class=\"offset");
            sb.Append(args.Position);
            sb.Append("\"");
        }

        sb.Append(">");

        EmitContentAction(sb.ToString());
    }
} 
```

[编辑以更清楚地说明我的问题是在“显然”设置了 Position 属性时出现的。我知道如果一开始就没有定义该属性，则必须引发异常。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:26:07.487

该代码存在致命缺陷。

只要您指定该属性，它就*可以工作：*

```
void Bar()
{
    Foo(new {Position = 0});
}

void Foo(dynamic args)
{
    Console.WriteLine(args.Position);
} 
```

那将输出`0`，它不会抛出一个`RuntimeBinderException`.

但是这样的代码的目的是让调用者可以只指定需要的属性而忽略其余的。
您正试图通过`if(args.Position != null)`. 但这不起作用，它已经需要`Position`存在。

当您查看也支持这些匿名配置对象的 ASP.NET 的路由 API 时，您会注意到参数的类型是`object`而不是`dynamic`。
使用`object`而不是`dynamic`将使您的 API 可以跨程序集边界使用。

**那么它是怎样工作的？**

就像在链接的答案中一样，您需要手动创建属性字典。无论您使用普通旧`Dictionary<string, object>`的还是旧的，`ExpandoObject`都是一个偏好问题。
使用`ExpandoObject`将使您的代码更易于阅读和编写，但这不是必需的。

* * *

关于您得到的实际异常：
请注意，它告诉您它无法`Position`在`object`. 如果它是缺少该`Position`属性的匿名类型，则异常消息不会引用`object`而是引用匿名类型。像这样的东西：

> `'<>f__AnonymousType0'`不包含“位置”的定义

# python - python sql查询中的while循环

> ID：14727808
> 
> 赞同：1
> 
> 时间：2013-02-06T11:20:56.770
> 
> 标签：python, mysql, django

嗨，我在 php 中尝试了这个查询，它运行良好，我必须在 python 中做同样的事情

```
 $select=mysql_query("SELECT DISTINCT A.entity_id AS entity_id ,A.email AS email,A.catquizid AS style_quiz_score ,A.catquizquesans AS style_quiz_answer,A.created_at AS date_joined,A.is_active AS is_active ,B.attribute_id AS attribute_id,B.value AS info FROM `customer_entity` AS A inner join  `customer_entity_varchar` AS B on A.entity_id=B.entity_id WHERE B.`attribute_id` IN  (1,2) limit 10",$conn);

    $arr=array();

    while($result= mysql_fetch_assoc($select))
        { 
            if(!isset($arr[$result['entity_id']]['lastname'])){
                $arr[$result['entity_id']]['firstname'] = $result['info'];
            }
            $arr[$result['entity_id']]['lastname'] = $result['info'];
            $arr[$result['entity_id']]["email"]=$result['email'];
            $arr[$result['entity_id']]["style_quiz_score"]=$result['style_quiz_score'];
            $arr[$result['entity_id']]["style_quiz_answer"]=$result['style_quiz_answer'];
            $arr[$result['entity_id']]["date_joined"]=$result['date_joined'];
            $arr[$result['entity_id']]["is_active"]=$result['is_active'];

            $arr[$result['entity_id']]["username"]=normalize_str($result['email']);
        } 
```

在python中我试过这个

```
def customer_migrate(request):
    cursor = connections['migration'].cursor()
    cursor.execute("SELECT DISTINCT A.entity_id AS entity_id ,A.email AS email,A.catquizid AS style_quiz_score ,A.catquizquesans AS style_quiz_answer,A.created_at AS date_joined,A.is_active AS is_active ,B.attribute_id AS attribute_id,B.value AS info FROM customer_entity AS A inner join  customer_entity_varchar AS B on A.entity_id=B.entity_id WHERE B.attribute_id limit 4 ")
    row = cursor.fetchall() 
```

我如何在 python 查询中使用 while 循环，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:29:52.903

使用 fetchone() 或只遍历游标：

```
row = cursor.fetchone()
while row is not None:
    print row
    row = cursor.fetchone() 
```

或者

```
for row in cursor:
    print row 
```

# magento - 如何使用 PayPal 多帐户配置 magento 1.7.2 多商店？

> ID：14727809
> 
> 赞同：2
> 
> 时间：2013-02-06T11:20:57.963
> 
> 标签：magento, paypal

我有一个在多存储模式下运行的 magento 1.7.2，如何为每个站点设置一个贝宝 IPN？（这两个站点使用不同的贝宝帐户。）看起来我只能在默认配置上设置贝宝 IPN。有小费吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:35:53.670

您确定您在谈论 IPN，即即时付款通知吗？无需在 Magento 中配置任何有关 IPN 的内容。

当向 PayPal 发送交易时，Magento 会告诉 PayPal 使用哪个 URL 用于 IPN。此 URL 是特定于商店的，会覆盖您在 PayPal 帐户中所做的任何设置。因此，您要做的就是更改 Magento 中每个商店的 PayPal API 凭据，这可以通过选择当前配置部分来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:13:42.120

使用您要支持的其他电子邮件的管理员配置创建另一个模块并扩展模型

```
Mage_Paypal_Model_Standard 
```

并覆盖该方法

```
public function getConfig() 
```

设置切换配置的逻辑（贝宝电子邮件帐户）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:59:06.547

这里的答案 [http://www.magentocommerce.com/boards/viewthread/79479/](http://www.magentocommerce.com/boards/viewthread/79479/)

在我的网站上测试并运行谢谢

# zend-framework - 在 NetBeans IDE 7.2.1 中配置 Doctrine 和 Zend

> ID：14727813
> 
> 赞同：0
> 
> 时间：2013-02-06T11:21:02.717
> 
> 标签：zend-framework, doctrine-orm

我是 Zend 和 Doctrine 的新手。

我想通过 NetBeans 运行命令功能使用 Doctrine 和 Zend 命令。

喜欢这个视频：[https ://www.youtube.com/watch?feature=player_embedded&v=3xjfbtQtDRE](https://www.youtube.com/watch?feature=player_embedded&v=3xjfbtQtDRE)

怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:11:54.963

要配置它，请转到：

> **> 项目属性 > 框架**（*左侧*）**> Doctrine2 > 已*启用***（*为此项目启用对 Doctrine2 的支持*）

要运行命令，右键单击项目会有选项**`Doctrine2 > Run command...`**

当您第一次运行时，您将必须配置学说 cli 文件，您应该一切顺利。

**编辑：**当您运行命令时，系统会提示您关联我认为的学说脚本文件。否则，您可以从`preferences > PHP > Doctrine2 > Doctrine2 Script:[]`.
您所要做的就是选择学说 cli 文件。就我而言，它位于`vendor/doctrine/orm/bin/doctrine`（用于教义）

# c - 重载 free() 所以我的程序使用我的而不是系统的

> ID：14727814
> 
> 赞同：2
> 
> 时间：2013-02-06T11:21:03.643
> 
> 标签：c, linux, malloc, free

我需要重新编码`free()`func 以用于教育目的，它也必须命名`free()`。

当我重命名我的函数`myfree()`时，它可以完美地工作，但是当我命名它时`free()`，程序不知道他是否需要使用我的或系统的所以`Segmentation fault(core dumped)`即使我不调用我的免费程序（只是另一个`free()`函数的声明似乎崩溃它）

那么我怎样才能告诉编译器使用我的而不是系统的呢？

提前谢谢你。

编辑：Linux操作系统

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:28:42.487

基本上，我可以看到三个选项

*   在编译期间重定向它，例如使用`#define`@Mohamed 建议的那样。
*   [使用LD_PRELOAD](http://www.linuxjournal.com/article/7795)在运行时更改它。
*   [使用malloc hooks](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Hooks-for-Malloc.html)修改现有的 malloc/free 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T11:35:35.550

如果您使用的是 GCC，则可以使用编译器来帮助您。编译时，将其包含在链接行中：`-Xlinker --wrap=free`. 这会将所有调用重定向到`free()`您`__wrap_free()`必须提供的使用。如果您想调用原始`free()`函数，它仍然存在但已重命名；你可以打电话`__real_free()`。

这将捕获您链接的预编译库，这是宏无法做到的（但 LD_PRELOAD 可以）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:23:08.460

为此使用宏：强制程序使用您的`myfree()`功能：

```
#define free(X) myfree(X) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T11:28:04.107

最简单（不是最安全）的方法是`#define free myfree`这样预处理器将替换从*free()*到*myfree()*的所有调用。另一种更安全的方法是创建一个名为*free()*的普通函数，并且不包含也包含*free()*函数的库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T11:34:09.003

如果您正在寻找一种标准的方式，恐怕它不存在。重新定义标准库名称是未定义的行为。

C11，7.1.3.2：

> ...如果程序在保留标识符的上下文中声明或定义标识符（7.1.4 允许的除外），或将保留标识符定义为宏名称，则行为未定义。

在 7.1.4 中，有很长的解释库如何定义*与函数同名*的宏以及如何绕过该宏。没有迹象表明用户可以如何覆盖标准库函数。

您还可以查看[此问题](https://stackoverflow.com/q/14770384/912144)以获取更多信息。

您可以在其他答案中找到非标准方法当然总是可能的。

# graph - Graphviz / PyGraphviz 中的有向图的 NetworkX 样式弹簧模型布局

> ID：14727820
> 
> 赞同：3
> 
> 时间：2013-02-06T11:21:29.860
> 
> 标签：graph, visualization, graphviz, networkx, pygraphviz

NetworkX 主要用于图形分析，PyGraphviz 主要用于绘图，它们旨在协同工作。然而，至少在一个方面，NetworkX 的图形绘制（通过 MatPlotLib）优于 PyGraphviz 的图形绘制（通过 Graphviz），即 NetworkX 具有`spring_layout`专门针对有向图的弹簧布局算法（可通过函数访问），而 PyGraphviz 有几个弹簧布局算法（可通过`neato`程序和其他访问）将有向图布局为无向图。唯一真正处理图形方向的 Graphviz / PyGraphviz 布局程序是`dot`，但`dot`创建分层布局，而不是强制导向布局。

下面是一个示例，它显示了 NetworkX 和 PyGraphviz 对于有向图的弹簧布局的区别：

```
import networkx as nx
import pygraphviz as pgv
import matplotlib.pyplot as ppt

edgelist = [(1,2),(1,9),(3,2),(3,9),(4,5),(4,6),(4,9),(5,9),(7,8),(7,9)]

nxd = nx.DiGraph()
nxu = nx.Graph()
gvd = pgv.AGraph(directed=True)
gvu = pgv.AGraph()

nxd.add_edges_from(edgelist)
nxu.add_edges_from(edgelist)
gvd.add_edges_from(edgelist)
gvu.add_edges_from(edgelist)

pos1 = nx.spring_layout(nxd)
nx.draw_networkx(nxd,pos1)
ppt.savefig('1_networkx_directed.png')
ppt.clf()

pos2 = nx.spring_layout(nxu)
nx.draw_networkx(nxu,pos2)
ppt.savefig('2_networkx_undirected.png')
ppt.clf()

gvd.layout(prog='neato')
gvd.draw('3_pygraphviz_directed.png')

gvu.layout(prog='neato')
gvu.draw('4_pygraphviz_undirected.png') 
```

1_networkx_directed.png：（[http://farm9.staticflickr.com/8516/8521343506_0c5d62e013.jpg](http://farm9.staticflickr.com/8516/8521343506_0c5d62e013.jpg)）

2_networkx_undirected.png:( [http://farm9.staticflickr.com/8246/8521343490_06ba1ec8e7.jpg](http://farm9.staticflickr.com/8246/8521343490_06ba1ec8e7.jpg) )

3_pygraphviz_directed.png:( [http://farm9.staticflickr.com/8365/8520231171_ef7784d983.jpg](http://farm9.staticflickr.com/8365/8520231171_ef7784d983.jpg) )

4_pygraphviz_undirected.png：（[http://farm9.staticflickr.com/8093/8520231231_80c7eab443.jpg](http://farm9.staticflickr.com/8093/8520231231_80c7eab443.jpg)）

绘制的第三和第四图基本相同，只是箭头（整个图已经旋转，但除此之外没有区别）。然而，第一个和第二个图形的布局不同——不仅仅是因为 NetworkX 的布局算法引入了随机性元素。

反复运行上面的代码说明这不是偶然发生的。NetworkX 的`spring_layout`函数显然是基于以下假设编写的：如果从一个节点到另一个节点存在弧，则第二个节点应该比第一个节点更靠近图的中心（即，如果中描述的图`edgelist`是有向图，则节点 2 应该是比节点 1 和 3 更接近节点 9，节点 6 应该比节点 4 更接近节点 9，节点 8 应该比节点 7 更接近节点 9；正如我们从节点中看到的那样，这并不总是完美的4 和 5 在上面的第一个图中，但与将 2 和 9 放在中心附近相比，这是一个小问题，而且从我的角度来看，“错误”非常轻微）。换句话说，NetworkX`spring_layout`既是分层的又是强制导向的。

这是一个很好的功能，因为它使核心/外围结构在有向图中更加明显（根据您正在使用的假设，即使没有传入弧的节点也可以被认为是外围的一部分数量很大出弧）。@skyebend 在下面解释了为什么大多数布局算法将有向图视为无向图，但上图显示 (a) NetworkX 以不同的方式处理它们，以及 (b) 它以有助于分析的原则方式这样做。

这可以使用 PyGraphviz / Graphviz 复制吗？

不幸的是，NetworkX 的（实际上）函数的[文档](http://networkx.github.com/documentation/latest/reference/generated/networkx.drawing.layout.spring_layout.html)和注释[源代码](http://networkx.github.com/documentation/latest/_modules/networkx/drawing/layout.html)没有提供任何关于 NetworkX 产生结果的线索。`spring_layout``fruchterman_reingold_layout`

这是使用 PyGraphviz 使用 NetworkX`spring_layout`函数绘制网络的结果（请参阅下面我自己对这个问题的回答）。5_pygraphviz_plus_networkx.png：（[http://farm9.staticflickr.com/8378/8520231183_e7dfe21ab4.jpg](http://farm9.staticflickr.com/8378/8520231183_e7dfe21ab4.jpg)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:15:14.973

好的，我想我想通了，所以我要回答我自己的问题。我不认为它*可以*在 PyGraphviz 本身中完成。但是，可以指示 PyGraphviz 从 NetworkX 获取节点位置，但将它们固定（使用`!`），以便`neato`阻止程序实际执行任何操作，除了用橡皮图章计算的节点位置`spring_layout`。在上面添加以下代码行：

```
for k,v in pos1.iteritems():
    gvd.get_node(k).attr['pos']='{},{}!'.format(v[0]*10,v[1]*10)

gvd.layout(prog='neato')
gvd.draw('5_pygraphviz_plus_networkx.png') 
```

结果并不完美——我不得不将坐标乘以 10 以阻止节点被绘制在彼此之上，这（显然）是一个杂凑——但这是一种改进，即节点与0 度在外面（使用 NetworkX 布局的好处）并且有适当的箭头不会被节点本身吞噬（使用 PyGraphviz 绘图的好处）。

不过，我知道这并不是我严格要求的（即使用 PyGraphviz / Graphviz 本身的解决方案）。

如果有人可以提供更好的解决方案，我会很高兴！

编辑：没有人为上述问题提供更好的解决方案，因此我将接受我自己的答案以表明它确实有效。但是，我也投票赞成 skyebend 的答案，因为 - 尽管它不能解决问题 - 它对理解潜在问题非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T16:38:10.227

Graphviz 还具有**fdp**和**sfdp**布局模式，用于强制定向放置节点，类似于弹簧布局。我不熟悉 NetworkX，但它似乎`gvu.layout(prog='fdp')`可以工作？如果 NetworkX 允许向 Graphviz 传递额外的参数，那么您可以调整许多可配置的布局参数，这可能会让您的布局更接近您想要的。请参阅 Graphviz 文档：[http ://www.graphviz.org/content/attrs](http://www.graphviz.org/content/attrs)

但是，fdp 布局将网络视为无向图。我知道的大多数“弹簧”布局也将网络视为无向的，因为它们必须将它们转换为距离对称的欧几里得空间（屏幕）。一个例外是“磁性”弹簧布局，它也试图对齐弧线，因此它们指向相似的方向以传达层次结构，作为一种整洁/点混合。

算法实现也可能不同，它们如何将有向网络中的网络距离转换为无向权重/距离以通过布局进行优化。如果您想更好地控制有向弧的解释方式，您可能需要自己明确地执行此步骤。

# php - 未找到邮件 PEAR

> ID：14727822
> 
> 赞同：0
> 
> 时间：2013-02-06T11:21:32.283
> 
> 标签：php, email, pear

我在我的 php Web 应用程序中包含 PEAR Mail 包时遇到问题。每次我得到

> PHP 致命错误：require_once()：需要打开失败。

我 100% PEAR Mail 已安装在服务器中，因为我的其他应用程序正在使用它并且它可以正常工作。我尝试设置权限，搜索谷歌和我知道的一切。有谁知道我应该检查一些其他特殊的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:28:48.320

似乎您的包含路径设置不正确。请按照[http://pear.php.net/manual/en/installation.checking.php上的安装设置检查说明进行操作](http://pear.php.net/manual/en/installation.checking.php)

也可能是您在 Windows 系统上 include`mail.php`有效，但在具有区分大小写文件系统的 linux 系统上，您需要使用真实文件名`Mail.php`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-11T13:47:45.110

在linux上安装以下，然后尝试

```
sudo pear install Mail-1.4.1
sudo pear install Net_SMTP 
```

# javascript - 如何让导航栏中的“下拉”菜单下拉到正确的位置？

> ID：14727832
> 
> 赞同：0
> 
> 时间：2013-02-06T11:22:08.197
> 
> 标签：javascript, html, css

我正在创建一个垂直导航栏，它在鼠标悬停时会在右侧弹出子菜单。

唯一的问题是当我将鼠标悬停在类别上时，无论它们位于导航栏的顶部还是底部附近，它们的子类别栏都会出现在导航栏顶部的右侧。

我做了一些关于如何制作这些的阅读，据说我应该将定位设置为绝对，然后从左侧偏移。这是我的子菜单的 CSS 代码：

```
#sidenav2 li ul
{
position:absolute;
left:200px;
Top:0px;
display:none;
} 
```

所以我认为它可能与顶部设置有关，并摆脱了它。令我惊讶的是，它几乎奏效了。每个子菜单都在与悬停的元素相对应的不同位置弹出。唯一的问题是它们弹出的像素太低了大约 10 个像素。不太了解 CSS 规则是如何应用的，我想也许我可以应用一个小的底部偏移量来使每个子菜单上升一点，但随后它们都开始在底部附近弹出。

我不明白如何解决这个问题，更糟糕的是，我不确定如何跟上这个看似任意的结果，或者确定它们的规则。

如果有任何区别，我的菜单项和子菜单不是用静态 html 编写的，它们是 mysql 查询的结果，该查询将每个类别的子项放在该项目列表中的无序列表中。

这是我的其他相关css代码。问题很可能在这里的某个地方。

```
#sidenav2
{
float:left;
width:200px;
border: solid black 1px;
height:1000px;
background-color:red;
margin-top:-10px;

}

#sidenav2 ul
{
position: relative;
list-style-type:none;
border:0px;
padding:0px;
background-color:red;
}

#sidenav2 ul li
{
display:block;
padding:5px;
color:white;
cursor:pointer;

} 
```

任何帮助或见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:23:15.453

你必须给`position: relative`你`li`的

# java - Java中的类加载时间

> ID：14727834
> 
> 赞同：6
> 
> 时间：2013-02-06T11:22:14.610
> 
> 标签：java, static

嗨stackoverflow成员，这是一个与“类加载时间”的实际含义相关的小问题。

例如下面的代码：

```
public class Sequence {
    Sequence() {
        System.out.print("c ");
    }
    {
        System.out.print("y ");
    }
    public static void main(String[] args) {
        System.out.println("Indeed");
        new Sequence().go();
    }
    void go() {
        System.out.print("g ");
    }
    static { System.out.println("x "); }
} 
```

它确实打印出第一个静态的“x”，因此静态初始化块总是在“类加载时间”加载。我明白了，但你知道这个加载时间是什么时候发生的吗？我想当类第一次通过创建第一个对象在主方法中被调用时，但在这种情况下，通过打印出第一个“确实”，结果应该是不同的。任何人都可以帮助我澄清这个疑问？我已经检查了其他关于这个论点的帖子，但我仍然认为（至少对我而言）更清楚地知道在上面报告的代码中，“类加载时间”何时发生。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:29:21.110

由于您的`main`方法位于class*中*`Sequence`，因此需要首先由 JVM 加载。`"x"`因此，首先要打印出来是完全有道理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T11:29:50.500

你是对的，静态块是`run`在加载类时。当您运行程序时，这会发生在您的情况下。因为 main 方法本身在类内部，所以之前`Sequence`的输出是正确的。`x``Indeed`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T11:33:41.977

您的问题的答案在[JLS 第 12.4.1 章初始化发生时](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)

> 类或接口类型`T`将在以下任何一项第一次出现之前立即初始化：
> 
> *   `T`是一个类，并`T`创建了一个实例。
> *   `T`是一个类，并`T`调用由声明的静态方法。
> *   `T`分配了由声明的静态字段。
> *   使用声明的静态字段，`T`并且该字段不是常量变量（第 4.12.4 节）。
> *   `T`是一个顶级类（第 7.6 节），并且`T`执行在词法上嵌套在（第 8.1.3 节）中的断言语句（第 14.10 节）。

[我建议您从JLS 第 12.4 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)开始阅读以上几行内容。[类和接口的初始化](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)

从第 12 章开始[。 Execution](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12)，它准确地描述了何时需要加载一个类。初始化将在加载后完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T11:34:40.927

静态初始化块在类加载时执行是不正确的。它们在**类初始化时**执行。前者发生的确切时间点是未指定的，而对后者有严格的规范：它发生**在类的第一次运行时访问**时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T11:31:56.170

`Sequence`必须在 JVM 调用该方法之前加载该类`main`，这会导致发生静态初始化，因此为什么`x`要首先打印出来。

# git - 手动关闭 bitbucket 的拉取请求

> ID：14727837
> 
> 赞同：26
> 
> 时间：2013-02-06T11:22:25.317
> 
> 标签：git, bitbucket, pull-request

## 我的问题

我做这样的事情：

```
git clone
git checkout -b new_feature
< work and commit >
git rebase master
< work and commit >
< finish working >
git rebase master
git push origin new_feature
< I create pull request via bitbucket's web interface > 
```

审查更改的人正在做：

```
git pull
git checkout master
git merge --squash new_feature
git push origin master 
```

我希望这会关闭拉取请求，但它没有，我错过了什么？

## 一些背景资料

我阅读了很多 bitbucket 的文档“处理拉取请求”，但这对我来说仍然不清楚。

我可以看到`new_feature`分支中的所有提交都已应用于`master`分支（通过`git merge --squash`），并且我可以看到哪些文件已更改，但是现在当我在 bitbucket 的拉取请求界面上按“合并”时，我在 master 中有另一个提交，即合并并且这不会更改任何文件（所有更改都已由 previous 应用`git merge --squash`），而只是将所有这些提交历史记录带入 master，这不是我想要的。

通过：[https ://confluence.atlassian.com/display/BITBUCKET/Working+with+pull+requests](https://confluence.atlassian.com/display/BITBUCKET/Working+with+pull+requests)

> 手动将请求拉取到本地系统
> 
> 有时，在接受拉取请求之前使用在本地系统上测试变更集的工作流是个好主意。您可以使用任何拉取请求来执行此操作。典型的工作流程是这样的：在 Bitbucket 中接收拉取请求。使用传入的变更集更新您的本地存储库。调查和/或测试变更集。如果您的更改集很好，则将其合并到本地存储库中。您可能需要解决一些冲突。然后，将本地存储库推送回 Bitbucket。回到 Bitbucket，拉取请求在拉取请求选项卡中被标记为已接受。如果您不喜欢更改请求，您可以在本地丢弃更改并拒绝 Bitbucket 上的拉取请求。想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-12-16T23:04:18.990

据我了解，有两种方法可以将 Bitbucket 拉取请求关闭为“合并”。

1.  单击“合并”按钮。Bitbucket 会将您的功能分支合并到目标分支中。（新版本的 Bitbucket 允许您在 --no-ff 和 --squash 策略之间进行选择。旧版本隐式使用 --no-ff。）
2.  使用 git 控制台命令（或其他界面）将功能分支合并到目标分支，然后将两者推送到源。

第一个选项绝对是最简单和最直接的，但它不适用于某些开发工作流程。

使第二个选项起作用的关键是您的功能分支必须在您的目标分支上。Bitbucket 会定期检查手动合并的拉取请求，并在找到时自动将这些拉取请求标记为已合并。*注意：Atlassian 不会宣传这种行为。我找不到任何支持这一说法的官方文件，但至少还有其他人[看到了它的工作原理](https://stackoverflow.com/questions/31135212/git-flow-with-bitbucket-pull-requests)。*

根据您描述的工作流程，我猜查看并推送您的更改的人的 git 历史记录如下所示：

```
*   ddddddd (origin/master, master) new feature, squashed
| * ccccccc (origin/new_feature, new_feature) new feature part C
| * bbbbbbb new feature part B
| * aaaaaaa new feature part A
|/
o 
```

在这种情况下，让 Bitbucket 自动关闭拉取请求的最简单方法是：

```
git branch --force new_feature ddddddd
git push --force origin new_feature 
```

这也适用于已重新定位的功能分支。

**警告！**请记住以下事实：

*   并非所有工作流程都允许这种强制推送。
*   每当其功能分支发生更改时， Bitbucket都会自动更新拉取请求显示[的提交。](https://bitbucket.org/blog/bitbucket-now-auto-updates-pull-requests)根据推送分支的顺序，这可能会导致提交列表为空。（更多内容如下。）
*   当拉取请求关闭时，任何提交历史记录和差异信息都会被冻结。

当您在推送功能分支之前将目标分支推送到源时，Bitbucket 首先在新推送的功能分支上查找不在目标分支上的任何提交。由于新功能分支是目标分支的祖先，因此结果为空集。因此，Bitbucket 从拉取请求的提交选项卡中删除了所有提交，现在显示为“没有更改”。然后，由于功能分支在目标分支的历史记录中，Bitbucket 关闭拉取请求，冻结空提交选项卡，如下所示：

[![没有变化。](../Images/a68bb6103746caf9e535c487c38f9d9b.png)](https://i.stack.imgur.com/70YyM.png)

奇怪的是，在这种情况下，差异保持不变。

如果上述合并选项都不适合您，那么您唯一剩下的选项是：

*   拒绝拉取请求。
*   考虑将您的工作流程更改为 Bitbucket 更容易支持的方式。
*   使用 Bitbucket/Atlassian[浮动功能请求。](https://jira.atlassian.com/projects/BCLOUD)

另请参阅[git-branch](https://git-scm.com/docs/git-branch)和[git-push](https://git-scm.com/docs/git-push)的文档。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-07T10:32:58.640

# 更新

自 2017 年 1 月 31 日起[，实施了一项功能](https://bitbucket.org/site/master/issues/8995/provide-the-option-to-use-git-merge-squash#comment-34074895)以解决无法手动关闭 PR 的问题。

有关详细信息，请参阅（并投票！）[@BenAmos 的答案](https://stackoverflow.com/a/34323826/153049)。

* * *

## 原始答案

^(（保留用于历史目的）)

你没有错过任何东西。Bitbucket 在合并后不会自动关闭您的拉取请求。

您必须通过选择“拒绝”选项自己手动关闭拉取请求。

![在此处输入图像描述](../Images/18be6bfbced6f1e38228f3122000921e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T10:26:27.260

我猜，bitbucket 不会将您的 PR 识别为已合并，因为`git merge --squash`会生成一个**全新**的提交。在我们公司，我们也尝试过`git merge --squash`将功能分支合并到主分支，但放弃了，因为以这种方式合并的拉取请求一直在徘徊，后来我们需要“拒绝”它们或删除相关的远程功能分支。

我们目前正在做的是将所有功能分支提交压缩为一个并强制将其推送到远程功能分支。之后，负责合并到 master 的人只需要在 bitbucket 的 pull request 页面上点击“Merge”即可，PR 被标记为“Merged”，所有在特性分支中引入的更改都被压缩成一个整齐的提交.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T13:41:41.867

BitBucket Server 4.5.1 修改了远程合并在拉取请求中的分类方式（即拒绝或合并）。

@BenAmos 上面的回答效果很好，但是如果您在强制推送到功能分支之前将合并提交推送到目标分支，BitBucket 将自动关闭拉取请求并将其归类为“已拒绝”。

但是，如果您在将合并提交推送到目标分支之前强制推送到功能分支，BitBucket 将自动关闭拉取请求并将其归类为“合并”。

来自 Atlassian：“如果出现以下情况，则推送请求现在将被拒绝：从分支上没有提交也不在到分支上，并且在同一推送中未更新到分支”

参考：[https ://jira.atlassian.com/browse/BSERV-4219?src=confmacro&_ga=1.138319284.547646488.1457297841](https://jira.atlassian.com/browse/BSERV-4219?src=confmacro&_ga=1.138319284.547646488.1457297841)

# php - 获取mysql表中的字段数

> ID：14727838
> 
> 赞同：2
> 
> 时间：2013-02-06T11:22:27.007
> 
> 标签：php, mysql, sql

如何使用 PHP 或某种 mysql 查询获取 mysql 表中的字段数（сolumns）？`SELECT * FROM table_name`没有and有没有办法做到这一点`mysql_num_fields()`？也许有一个mysql查询的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:23:23.387

```
SELECT COUNT(*) totalColumns
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  table_name = 'table1' AND 
       TABLE_SCHEMA = 'databaseName' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5d992/3)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T11:26:01.347

使用下面的查询来获取表中没有字段，

```
SELECT COUNT(*)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_schema = 'database_name'
  AND table_name = 'tbl_name' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:54:25.980

@user1858864 以上所有答案都很好，但我只是想在 php 中使用 pdo 给你。我确实对你的问题和他们的答案投了赞成票，因为一切似乎都与我有关 非常感谢@JW。用于编辑

```
<?php
try {
$con = new PDO('mysql:host=localhost;dbname=mydb;charset=utf-8','root','');
} catch(PDOException $e){
echo 'Connection failed'.$e->getMessage();
}
#count in pdo 
$count = ("SELECT count(*) FROM  table_name ");
$result =$con->prepare($count);
$result->execute();
$number= $result->fetchColumn();
echo  $number;
#count in pdo  
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T08:09:55.963

```
 $query = "select book_name from tbllibrary "; $result = mysql_query($query);
            //while loop to display mysql table field values in html text boxes

            $i = 0;
            while ($row = mysql_fetch_row($result))
                {
                    $count = count($row);
                    $y = 0;
                    while ($y < $count)
                    {
                        $c_row = current($row);
                        next($row);
                        $y = $y + 1;
                    }               
                        $book_name=$c_row;$i = $i + 1;
                    }

echo 'There are ' . $i. ' books available in the Library</p>'; 
```

在这里，变量 i 将存储名为 book_name 的行的总列数。您还可以使用变量 $book 名称以供将来使用，但这不是强制性的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-02-04T10:15:51.613

您可以使用以下查询

```
SELECT count(*) FROM table_name 
```

# javascript - Javascript浮动计算错误

> ID：14727839
> 
> 赞同：2
> 
> 时间：2013-02-06T11:22:27.630
> 
> 标签：javascript

这里我的网络应用程序有问题（在 chrome 和 firefox 和 nodejs 上测试）：

当我运行 (1.2 - 1) 它返回 0.199999999999999996 作为结果。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:38:16.140

你可以解决你的问题： (1.2 - 1).toFixed(1) * 1 // 0.2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:34:16.327

您可以使用 javascript 的 toFixed 方法更详细：

**数法**

在 JavaScript 1.5 中实现

ECMAScript 版 ECMAScript 第 3 版

**句法**

number.toFixed([数字])

**范围**

**小数点** 后出现的位数；这可以是 0 到 20 之间的值，包括 0 和 20，并且实现可以选择支持更大范围的值。如果省略此参数，则将其视为 0。

**退货**

数字的字符串表示形式，不使用指数表示法，并且在小数点后具有精确的数字。必要时对数字进行四舍五入，必要时用零填充小数部分，使其具有指定的长度。如果 number 大于 1e+21，此方法只需调用 Number.toString() 并以指数表示法返回一个字符串。

**投掷**

**RangeError** 如果数字太小或太大。介于 0 和 20 之间的值（包括 0 和 20）不会导致 RangeError。实现也可以支持更大或更小的值。**TypeError** 如果在不是数字的对象上调用此方法。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

# ios - NSInputStream 和 NSOutputStream 问题

> ID：14727842
> 
> 赞同：1
> 
> 时间：2013-02-06T11:22:33.743
> 
> 标签：ios, nsstream, nsinputstream, nsoutputstream

我有两个`NSInputStream`和`NSOutputStream`之间通过网络相互连接的设备。当我在 中写入内容时`output stream`，数据会一直写入，直到 `NSStreamEventEndEncountered`事件发生。我关闭了输出流，但在另一边（`input stream`）`NSStreamEventEndEncountered`事件永远不会发生，直到我退出`output stream`. 所以：
1\. 为什么即使在相同的`NSStreamEventEndEncountered`事件发生在之后，事件也没有发生？（在这个事件中甚至关闭了输出流） 2\. 据我了解，一旦打开，您只能写入一次数据。不可能在事件后再次打开（例如在任何事件上写一些新的东西），对吗？？？？`input stream``output stream`
`NSOutputStream``output stream``NSStreamEventEndEncountered`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T14:20:35.427

我可能需要有关您的连接以及您如何发送数据的更多信息，但让我尝试回答您的问题：

1.

你没有遇到你的结束，`inputstream`因为你从来没有开始阅读它。`outputstream`写完了，因为它可能遇到了一个结局，就像你说的那样。

想象一下 Jacob（你的`outputstream`）将一个信封（你的数据）送到他朋友家。雅各布把​​信封放在他朋友的门垫上，然后走回自己家。**至此，Jacob 的工作已经完成**，所以他告诉自己他已经完成了（在您的情况下是`outputstream`信号 an `NSStreamEventEndEncountered`）。

雅各布的朋友乔治（你的`inputstream`）可以看到信封，但从不看里面有什么。**因此，除非乔治拿起信封并查看里面的内容**，否则他永远无法告诉自己他已经看完了它（在您的情况下，`inputstream`从不发出信号`NSStreamEventEndEncountered`）。

2.

这实际上取决于您打算如何使用`outputstream`. 如果您计划多次向同一设备发送数据，为什么不保持`outputstream`开放状态？只要套接字打开并且有可用空间，您就可以写入数据。但是，当您关闭时，`outputstream`您需要重新打开它。

# javascript - jquery .html() 和 javascript 标签

> ID：14727843
> 
> 赞同：0
> 
> 时间：2013-02-06T11:22:35.697
> 
> 标签：javascript, jquery, html, jqplot

我正在尝试使用 jQuery 导出 div 的内容，但它里面有一个 jqplot 图。

当我尝试重新渲染它时，图形的所有元素（例如名称和值）都会出现，但条形图不会出现。我目前正在使用：

```
$('#exportable').html(); 
```

事情是这样的，如果我包含用于执行图表的 javascript，它会复制所有数据并重叠自身。

如果我不这样做，图表将不会出现，只会出现值。

我会发布代码，但实际上没什么可看的。在过去的几个小时里，我一直在尝试进行实验和谷歌搜索。也许我在寻找错误的东西。任何事情都会有所帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:31:01.627

与其尝试克隆图表，不如创建另一个具有相同数据的图表？请参阅此示例：

[http://home.edgemontgeek.com/dev/stackoverflow/14727843/](http://home.edgemontgeek.com/dev/stackoverflow/14727843/)

请注意，“克隆”按钮只是使用传递给初始调用的相同数据调用 newPlot，它不会尝试任何花哨的东西，也不会查看绘图的原始内容。

# php - Mysql Group ''close'' float ( lat / long )

> ID：14727854
> 
> 赞同：0
> 
> 时间：2013-02-06T11:23:02.017
> 
> 标签：php, mysql, sql

**背景 /**

目前，我们有一个 100 左右的纬度/经度被映射到谷歌地图上。目的是通过从数据库中选择彼此相距几米的 La/Lo 值来显示这些热点的位置。

然后，组值将用于查找中心点并在热点地图上绘制一个圆圈。

**当前设置 /**

目前我们请求的数据只有 id(int),La(float),Lo(float)

**概念 /**

我“认为”需要的是这个

```
Select * from table
Group by ( 
          ( La + 0.30 && La - 0.30) &&  ( Lo + 0.30 && Lo - 0.30) 
         ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:55:30.043

首先，地球不是正方形，因此要获得准确的距离，您需要使用半正弦函数（查找），但是，对于几米的距离，精度可能无关紧要。

其次，纬度之间的距离在 110.574 和 111.694 公里之间变化，经度在 111.32 和 0.0 公里之间变化（是的，两极是 0.0 公里）。无论如何，0.3 介于 0 到 35,000 m 之间 - 不完全是“少数”，除非您的热点位于北极和/或南极。

第三，忽略糟糕的地理位置，您正在摸索的 SQL 语句将需要交叉连接和对计算出的距离进行排序，即使对于小型数据集也会非常慢 - 您需要考虑使用 mysql 对本机地理类型的任何支持. 我知道 SQL Server 有它们，我怀疑 MySQL 也有。

**编辑**

确实如此，看[这个](https://stackoverflow.com/questions/2296824/php-mysql-compare-long-and-lat-return-ones-under-10-miles?rq=1)问题。

# javascript - 获取压缩文本文件并在客户端浏览器中解压缩，在 Javascript 中可行吗？

> ID：14727856
> 
> 赞同：15
> 
> 时间：2013-02-06T11:23:07.630
> 
> 标签：javascript, text-files, unzip

我正在开发一个包含 Javascript 的网页。此 js 使用存储在平面文件中的静态字符串数据（约 1-2 MB）。我可以使用 gzip 或任何其他算法对其进行压缩以减少传输负载。

是否可以使用 Ajax 获取此二进制文件并在客户端浏览器中将其解压缩为字符串（我可以稍后拆分）。如果是，我怎样才能做到这一点？有人有代码示例吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T01:47:12.770

另一个图书馆或网站就是这个，虽然它的例子很少，但它有一些可以看到的全面测试用例。

[https://github.com/imaya/zlib.js](https://github.com/imaya/zlib.js)

以下是一些复杂的测试用例 [https://github.com/imaya/zlib.js/blob/master/test/browser-test.js](https://github.com/imaya/zlib.js/blob/master/test/browser-test.js) [https://github.com/imaya/zlib.js/blob/master /test/browser-plain-test.js](https://github.com/imaya/zlib.js/blob/master/test/browser-plain-test.js)

代码示例看起来非常紧凑。就这两行代码...

```
// compressed = Array.<number> or Uint8Array
var gunzip = new Zlib.Gunzip(compressed);
var plain = gunzip.decompress(); 
```

如果你看这里[https://github.com/imaya/zlib.js/blob/master/bin/gunzip.min.js](https://github.com/imaya/zlib.js/blob/master/bin/gunzip.min.js)你会看到他们有你需要包含的打包的 js 文件。[您可能需要在https://github.com/imaya/zlib.js/blob/master/bin](https://github.com/imaya/zlib.js/blob/master/bin)中包含其他一两个。

无论如何，将这些文件放入您的页面，然后将来自服务器的预压缩数据提供给 GUnzip 对象，然后它将按预期进行。

您需要自己下载数据并使用其他函数将其放入数组中。我认为他们不包括这种支持。

因此，请尝试从[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data下载这些示例](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)

```
function load_binary_resource(url) {
  var req = new XMLHttpRequest();
  req.open('GET', url, false);
  req.overrideMimeType('text\/plain; charset=x-user-defined');
  req.send(null);
  if (req.status != 200) return '';
  return req.responseText;
}

// Each byte is now encoded in a 2 byte string character. Just AND it with 0xFF to get the actual byte and then feed that to GUnzip...
var filestream = load_binary_resource(url);
var abyte = filestream.charCodeAt(x) & 0xff; // throw away high-order byte (f7) 
```

====================================== 还有Node.js

问题类似于 [在 Node.js 跨平台中下载和解压缩文件的最简单方法？](https://stackoverflow.com/questions/10308110/simplest-way-to-download-and-unzip-files-in-node-js-cross-platform)

nodejs 文档中有此示例代码。我不知道它比那更具体... [http://nodejs.org/api/zlib.html](http://nodejs.org/api/zlib.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T11:26:25.567

只需在 Apache 上启用 Gzip 压缩，一切都会自动完成。

可能您必须将字符串作为 json 存储在 .js 文件中，并为 js mime 类型启用 gzip。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:28:40.550

我记得我将[js-deflate](https://github.com/dankogai/js-deflate)用于具有大型数据库的离线 JS 应用程序（由于本地存储的限制而需要）并且运行良好。这取决于[js-base64](https://github.com/dankogai/js-base64)。

# windows-phone-8 - 以编程方式启动 Windows Phone 8 模拟器

> ID：14727859
> 
> 赞同：0
> 
> 时间：2013-02-06T11:23:09.813
> 
> 标签：windows-phone-8, windows-phone-8-emulator

如何从桌面应用程序以编程方式启动 Windows Phone 8 模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:48:17.603

您可以使用**Microsoft.SmartDevice.Connectivity** API 从您的程序代码中启动 Windows Phone 8 模拟器。有关详细信息，请参阅 Microsoft MSDN 文章：[使用智能设备连接 API 控制设备](http://msdn.microsoft.com/en-us/library/bb384093%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:56:01.533

您可以在 C:\Program Files (x86)\Microsoft XDE\8.0 中找到您的模拟器启动器，但真正的问题不是找到该程序，甚至是实用地启动它。问题是我认为它需要一个 XAP 文件，否则它不会启动。如果您能找到启动它的方法，但我认为最简单的方法是从 .bat 文件

在 cd 中打开记事本 -type 转到下一行 -type 可执行文件名

另存为“文件名.bat”

确保在保存时包含报价，否则它将保存为文本文件而不是批处理双击它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T16:05:23.837

启动模拟器的另一种方法是从开始面板-> Hyper-V 虚拟机将弹出一个框，其中包含计算机上的虚拟机列表选择您计算机上的 Windows Phone 虚拟机，然后单击确定您的 Windows手机模拟器将启动。

# iphone - 使用 Grand Central Dispatch (GCD) 精确创建 N 个线程

> ID：14727862
> 
> 赞同：2
> 
> 时间：2013-02-06T11:23:13.913
> 
> 标签：iphone, ios, multithreading, asynchronous, grand-central-dispatch

我知道我可以使用`dispatch_async`和异步执行任务`dispatch_get_global_queue`。

但是 dispatch_async 创建了多少线程？我应该怎么做才能用 GCD 准确地执行 N 个（不多也不少）线程，并在它们上执行一些任务？执行任务后，我需要在已发布的线程中添加新任务，可能在前一个任务的编译块中。

或者，也许我可以控制 threds 的数量`NSOperationQueue`？我知道它有属性`maxConcurrentOperationCount`，但它只控制任务的最大限制。那么，我可以确定 NSOperationQueue 创建不少于 8 个线程，以防我设置 maxConcurrentOperationCount = 8 并向其中添加 12 个操作`NSOperationQueue`？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:35:27.577

你应该看看[NSThread](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)。如果您需要精确控制要运行的线程数，这是要走的路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T11:38:57.437

子类[NSOperation](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)用于您想要执行的任务并将它们放入[NSOperationQueue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)。您可以设置队列上的并发操作数。

```
NSOperationQueue *q = [[NSOperationQueue alloc] init];
q. maxConcurrentOperationCount = N; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:44:31.380

队列的概念不同于线程。通过 NSThread 类。由于 NSOperation 使用 GCD，你不能从这里设置线程。您可以合并 NSThread 和 NSOperation 创建和传递不同的线程。
但你为什么要这样做？更多的线程并不意味着更快的速度，通常相反，对内存、锁定、并发等有很多关注。
你应该有一个非常具体的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-28T05:17:41.463

如果要在使用 gcd 时控制最大线程数，可以使用`DispatchSemaphore`. 首先，创建`semaphore`具有最大计数的 a，其次在任务开始时`semaphore.wait()`，，最后在任务结束时，`semaphore.signal()`。

# ruby-on-rails-3 - 使用 Rspec2 + Rails3 测试控制器的新动作

> ID：14727863
> 
> 赞同：0
> 
> 时间：2013-02-06T11:23:16.690
> 
> 标签：ruby-on-rails-3, controller, rspec2

我的控制器新操作有以下 rspec2 测试用例

```
describe "GET #new" do
  it "should assign new project to @project" do
    project = Project.new
    get :new
    assigns(:project).should eq(project)
  end
end 
```

我收到以下错误

```
 1) ProjectsController GET #new should assign new project to @project
     Failure/Error: assigns(:project).should eq(project)

       expected: #<Project id: nil, name: nil, company_id: nil, created_at: nil, updated_at: nil>
            got: #<Project id: nil, name: nil, company_id: nil, created_at: nil, updated_at: nil>

       (compared using ==)

       Diff:#<Project:0x007f461c498270>.==(#<Project:0x007f461c801c90>) returned false even though the diff between #<Project:0x007f461c498270> and #<Project:0x007f461c801c90> is empty. Check the implementation of #<Project:0x007f461c498270>.==.
     # ./spec/controllers/projects_controller_spec.rb:19:in `block (3 levels) in <top (required)>'

Finished in 1.21 seconds
13 examples, 1 failure, 10 pending

Failed examples:

rspec ./spec/controllers/projects_controller_spec.rb:16 # ProjectsController GET #new should assign new project to @project 
```

当我`==`改用 on 时`eq`，我收到以下错误

```
 1) ProjectsController GET #new should assign new project to @project
     Failure/Error: assigns(:project).should == project
       expected: #<Project id: nil, name: nil, company_id: nil, created_at: nil, updated_at: nil>
            got: #<Project id: nil, name: nil, company_id: nil, created_at: nil, updated_at: nil> (using ==)
       Diff:#<Project:0x007f461c4f5420>.==(#<Project:0x007f461c63b280>) returned false even though the diff between #<Project:0x007f461c4f5420> and #<Project:0x007f461c63b280> is empty. Check the implementation of #<Project:0x007f461c4f5420>.==. 
```

我在这里做错了什么，在此先感谢

我上线了

*   Rails3
*   规格2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:15:06.713

在访问新操作之前，您正在创建一个新项目，这是不必要的。您的控制器实际上已经为您工作了。您面临的问题是您创建了两个新项目（在您的情况下，您首先创建了 Project:0x007f461c498270，然后创建了 Project:0x007f461c801c90，它们具有相同的属性但是不同的项目）。此测试应通过：

```
describe "GET #new" do
  it "assigns a new Project to @project" do
    get :new
    assigns(:project).should be_a_new(Project)
  end
end 
```

# java - 在linkedin集成中找不到文件异常

> ID：14727864
> 
> 赞同：2
> 
> 时间：2013-02-06T11:23:19.553
> 
> 标签：java, android, url, oauth, linkedin

我尝试集成linkedin以使用许多教程和帖子共享数据，但没有任何帮助，登录后无法移动到下一页而是重定向到上一个页面，最后检查了密钥，使用其他用户密钥 m 能够共享发布问题在于提供回调网址

```
public static final String OAUTH_CALLBACK_URL = "x-oauthflow-linkedin"
    + "://" + "litestcalback"; 
```

有人知道怎么给网址吗？

堆栈跟踪

```
02-06 16:18:49.786: E/AndroidRuntime(393):      at an  droid.os.Handler.dispatchMessage(Handler.java:92)
02-06 16:18:49.786: E/AndroidRuntime(393):      at and roid.os.Looper.loop(Looper.java:123)
02-06 16:18:49.786: E/AndroidRuntime(393):      at android.app.ActivityThread.main(ActivityThread.java:3683)
02-06 16:18:49.786: E/AndroidRuntime(393):      at jav a.lang.reflect.Method.invokeNative(Native Method)
02-06 16:18:49.786: E/AndroidRuntime(393):      at java.lang.reflect.Method.invoke(Method.java:507)
02-06 16:18:49.786: E/AndroidRuntime(393):      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-06 16:18:49.786: E/AndroidRuntime(393):      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-06 16:18:49.786: E/AndroidRuntime(393):      at dalvik.system.NativeStart.main(Native Method)
02-06 16:18:49.786: E/AndroidRuntime(393): Caused by: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: https://api.linkedin.com/uas/oauth/requestToken
02-06 16:18:49.786: E/AndroidRuntime(393):      at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
02-06 16:18:49.786: E/AndroidRuntime(393):      at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
02-06 16:18:49.786: E/AndroidRuntime(393):      at com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceImpl.getOAuthRequestToken(LinkedInOAuthServiceImpl.java:172)
02-06 16:18:49.786: E/AndroidRuntime(393):      ... 12 more
02-06 16:18:49.786: E/AndroidRuntime(393): Caused by: java.io.FileNotFoundException: https://api.linkedin.com/uas/oauth/requestToken
02-06 16:18:49.786: E/AndroidRuntime(393):      at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:521)
02-06 16:18:49.786: E/AndroidRuntime(393):      at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:258)
02-06 16:18:49.786: E/AndroidRuntime(393):      at oauth.signpost.basic.HttpURLConnectionResponseAdapter.getContent(HttpURLConnectionResponseAdapter.java:18)
02-06 16:18:49.786: E/AndroidRuntime(393):      at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:228)
02-06 16:18:49.786: E/AndroidRuntime(393):      at   oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189) 
```

# java - 用于登录的 HTML 表单始终在请求参数中返回空值

> ID：14727865
> 
> 赞同：1
> 
> 时间：2013-02-06T11:23:20.140
> 
> 标签：java, servlets

我不知道为什么我会陷入这么简单的事情，但我就是无法摆脱它。

首先是我正在使用的 HTML 文件

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Welcome Guest- Please Login</title>

<script type="text/javascript">

function validate() {

    username = document.getElementById("username").value;
    password = document.getElementById("password").value;

    if( username==null || username=="" ) {
        alert("Please enter a username");
        return false;
    }

    if( password==null || password=="" ) {
        alert("Please enter a password");
        return false;
    }
    return true;
}

</script>
</head>
<body>

    <form action="login" method="POST">
    <br />
    Name: 
    <input type="text" name="username" id="username" />
    <br />
    Password: 
    <input type="password" name="password" id="password" />
    <br />
    <input type="submit" onclick="return validate()" />
    </form>
</body>
</html> 
```

还有我的 servlet 的 doPost() 方法

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    UserLoginDAOImplementation usr = new UserLoginDAOImplementation();

    String username = request.getParameter("username");
    String password = request.getParameter("password");

    System.out.println(username + password);
    User u = usr.getPassword(username);

    if( u.getPassword().equals(password)) { // If password matches

        response.sendRedirect("images");
    } else {
        response.sendRedirect("invalid");
    }
} 
```

我在互联网上搜索了各种查询，但没有任何效果。我知道存在 enctype 和所有问题，我也尝试过以及许多其他实验。每次我运行它时，这些打印语句都会打印`nullnull`并抛出空指针异常。我真的很坚持这一点。请有人告诉我出了什么问题。

我将 Eclipse Juno 与 Tomcat 和其他 Java EE 插件一起使用。

编辑：

就像我怀疑的那样，问题完全出在其他地方。我今天简单地运行我的程序，甚至没有触及以前的代码，它就像一个魅力。我什至不知道昨天到底出了什么问题。我是 eclipse 的新手，自从我开始使用 tomcat 以来，我一次又一次地注意到 eclipse 的这种行为。我不得不重新启动 eclipse 以使其呈现我在 html 文件中所做的更改，我希望能够解决这些更改。我用这个问题重新启动了 eclipse 几次，但它根本没有工作。 **那么，您能否指导我一些在 Eclipse 中使用 Web 应用程序时要记住的提示...**

# java - 在 Java 中抛出带有空格的 Antlr NoViableAltException

> ID：14727869
> 
> 赞同：1
> 
> 时间：2013-02-06T11:23:22.750
> 
> 标签：java, antlr

我在 Antlr 3 中定义了一个简单的语法，如下所示：

```
grammar StringProcessor;

options {
output=AST;
}

@header {
package com.processor;
}

@rulecatch {
    // ANTLR does not generate its normal rule try/catch
    catch(RecognitionException e) {
    throw e;
}
}

truevalue   : 'true';
falsevalue  : 'false';
nullvalue   : 'null';
simpleValue : truevalue | falsevalue | nullvalue | STRING | INTEGER | FLOAT;
INTEGER     : '0'..'9'+;
FLOAT       : INTEGER'.'INTEGER;
QUOTE       : '"';
SPECIALCHAR : '-'|':'|';'|'('|')'|'£'|'&'|'@'|','|'!'|'['|']'|'{'|'}'|'#'|'^'|'*'|'+'|'='|'_'|'<'|'>'|'€'|'$'|'%'|'/'|'.'|'?'|'~'|'|';
STRING  : QUOTE('a'..'z'|'A'..'Z'|INTEGER|SPECIALCHAR|WS)+QUOTE;
WS      : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; // handle white space between keywords 
```

当我在解释器的 AntlrWorks 中尝试以下字符串时：

《5Java 开发者》

这行得通。它包括空白区域。但是当我尝试从 Java 程序中解析它时，它会抛出 NoViableAltException。我看过其他帖子，但这些解决方案不适用于我的问题。WS 是 STRING 的一部分。问题是 Java 程序不解析任何带有空格的内容，而解释正确显示。

显示异常的示例：

```
public static void main(String[] args) throws Exception {
    String input = ("\"5Java Developer\"");
    StringProcessorParser parser = buildParser(input);
    CommonTree commonTree = (CommonTree) parser.simpleValue().getTree(); // exception thrown
}

public static StringProcessorParser buildParser(String query) {
    CharStream cs = new ANTLRStringStream(query);
    // the input needs to be lexed
    StringProcessorLexer lexer = new StingProcessorLexer(cs);
    CommonTokenStream tokens = new CommonTokenStream();
    StringProcessorParser parser = new StringProcessorParser(tokens);
    tokens.setTokenSource(lexer);
    // use the ASTTreeAdaptor so that the grammar is aware to build tree in AST format
    parser.setTreeAdaptor((TreeAdaptor) new ASTTreeAdaptor().getASTTreeAdaptor());
    return parser;
} 
```

有：

```
 input = new String("\"5JavaDeveloper\""); correctly parses. 
```

知道为什么这不起作用。

编辑：

我也试过添加 $channel = HIDDEN;

但它仍然不起作用

```
WS : (' '|'\t'|'\f'|'\n'|'\r')+ { $channel = HIDDEN; skip();}; // handle white space between keywords 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:06:21.407

删除 skip() 解决了我的问题。

# c - C: fgetc 给出段错误

> ID：14727874
> 
> 赞同：0
> 
> 时间：2013-02-06T11:23:42.390
> 
> 标签：c, file-io, segmentation-fault

以下代码给了我一个段错误，我不知道为什么。这是我的 main 函数中唯一的代码，而不是最后返回 0。此外，它成功打印“fr opens”。

```
//create file pointer and open file
FILE *fr;
fr = fopen("IntegerArray.txt", "r");

if(fr = NULL){
        printf("fr is null\n");
}
else{
        printf("fr opened\n");
}

int ch = fgetc(fr);
ch = fgetc(fr); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:25:22.200

您将 NULL 分配给您打开的 FILE*。

改变

```
if(fr = NULL){ 
```

到

```
if(fr == NULL){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:26:05.413

在`fr = NULL`的条件下`if`是一项任务。您可能意味着比较：`fr == NULL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:21:43.507

你得到了它的这一部分：

```
if (fr = NULL) 
```

应该：

```
if (fr == NULL) 
```

或者更好：

```
if (NULL == fr) 
```

但是，我只是想就您的观点提一下：`Also, it successfully prints "fr opened."`由于意外分配，它再次打印了该内容。

```
if (fr = NULL) 
```

首先设置`fr`为`NULL`，所以检查基本上变成了：

```
if(fr) 
```

随着它`fr`被`NULL`评估`if(0)`，因此您看到了`else`“fr 打开”消息。

# highcharts - Highstock / Highchart - 多个y轴上的范围问题

> ID：14727876
> 
> 赞同：0
> 
> 时间：2013-02-06T11:23:49.863
> 
> 标签：highcharts, highstock

当我使用多个 yAxis 时，你看到范围问题了吗？我怎么解决这个问题？

![图片](../Images/234e74869da581841812dd8df8feb0b3.png)

这是我使用的相同代码！

```
yAxis: [ 
                     { labels: { formatter: function() { return this.value + '".$unitall1."' },  style: { color: '#89A54E'  } },  title: { text: '".$graphall1."' , style: { color : '#4572A7' } },  opposite: true },
                     { labels: { formatter: function() { return this.value + '".$unitall2."' },  style: { color: '#4572A7'  }  }, title: { text: '".$graphall2."' , style: { color : '#89A54E' } },  },  
                     { labels: { formatter: function() { return this.value + '".$unitall3."' },  style: { color: '#000000'  }  }, title: { text: '".$graphall3."' , style: { color : '#000000' } },  },  
                     { labels: { formatter: function() { return this.value + '".$unitall4."' },  style: { color: '#C4087C'  } },  title: { text: '".$graphall4."' , style: { color : '#C4087C' } },  opposite: true }
                       ], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:42:43.863

使用该**[`yAxis.offset`](http://api.highcharts.com/highstock#yAxis.offset)**属性设置每个 y 轴的偏移量。看起来两个轴之间的默认间隙在 highstock 中比在 highchart 中要小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:44:30.790

你有两个选择：

*   为每个轴使用 yAxis.offset，请参阅：[http ://api.highcharts.com/highstock#yAxis.offset](http://api.highcharts.com/highstock#yAxis.offset)

*   使用 Highstock，但使用 new Highcharts.Chart() 而不是 new Highcharts.StockChart() 创建图表。在这种情况下，您可以使用 Highstock 功能，如序数轴、范围选择器、滚动条等。您只需直接启用每个功能：http: [//api.highcharts.com/highstock#scrollbar.enabled](http://api.highcharts.com/highstock#scrollbar.enabled)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:04:11.457

您可以使用偏移参数来正确设置距离 yAxis。 [http://api.highcharts.com/highstock#yAxis.offset](http://api.highcharts.com/highstock#yAxis.offset)

# python - XPath 在scrapy 中工作，但在 selenium 中不工作

> ID：14727879
> 
> 赞同：0
> 
> 时间：2013-02-06T11:24:03.427
> 
> 标签：python, selenium, scrapy, xpath

我有一个在 python-scrapy 和 firefox 的 firebug 扩展中工作的 xpath。但是，它不适用于 python-selenium。我在 selenium 中使用的代码是这个

```
xpath = ".//div[@id='containeriso3']/div/a[1]/@href"
browser.find_element_by_xpath(xpath) 
```

这会产生 InvalidSelectorException 错误。selenium 是否使用其他 xpath 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:34:12.917

那不会给你一个元素。您需要取消该`@href`属性。

采用`.//div[@id='containeriso3']/div/a[1]`

然后使用`get_attribute`从中获取`href`。

# javascript - Flowplayer 在 IE 下无法启动

> ID：14727880
> 
> 赞同：2
> 
> 时间：2013-02-06T11:24:04.933
> 
> 标签：javascript, jquery, html, flowplayer

我尝试了 3 个选项

```
 <!-- Flowplayer depends on jquery -->
    <script src="jquery.min.js"></script>

    <!-- Flowplayer-->
    <script src="flowplayer.min.js"></script>

    <script>
        // global configuration (optional)
        flowplayer.conf = {
            rtmp: "rtmp://s3b78u0kbtx79q.cloudfront.net/cfx/st",
            swf: "flowplayer.swf"
        };

        // force flash with query - only for testing, do not use this switch in production!
        if (/flash/.test(location.search)) flowplayer.conf.engine = "flash";

        flowplayer.conf.ratio = 0.417;

        // bind listeners to all players on the page
        flowplayer(function (api, root) {

            // when a new video is about to be loaded
            api.bind("load", function () {
                //console.info("load", api.engine);

                // when a video is loaded and ready to play
            }).bind("ready", function () {
                //console.info("ready", api.video.duration)

            });

        });

        $(document).ready(function () {
            try {
                // #1  
                flowplayer().play("http://stream.flowplayer.org/bauhaus/624x260.mp4");

                //#2
                //flowplayer().load([{ mp4: "http://stream.flowplayer.org/bauhaus/624x260.mp4" }]).resume();

// #3
//var api = flowplayer();
//api.load("http://stream.flowplayer.org/bauhaus/624x260.mp4", function () {
//    api.resume();
//});
       } catch (e) {
                alert(e.message);
            }
        });
    </script> 
```

**HTML**

```
 <!-- first player -->
        <div class="flowplayer ">
            <video preload='none'>
                <source type="video/webm" src="http://stream.flowplayer.org/bauhaus/624x260.webm" />
                <source type="video/mp4" src="http://stream.flowplayer.org/bauhaus/624x260.mp4" />
                <source type="video/ogg" src="http://stream.flowplayer.org/bauhaus/624x260.ogv" />
               <!-- <source type="video/flash" src="mp4:bauhaus/624x260.mp4" />-->
            </video>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T21:36:04.697

也许尝试删除`preload='none'`只是为了看看它是否有效？出于某种原因，如果我已“禁用”预加载，带有 flowplayer 的视频对我不起作用。

# android - 使用 FaceDetectionListener 在眼睛上绘制画布

> ID：14727884
> 
> 赞同：0
> 
> 时间：2013-02-06T11:24:29.080
> 
> 标签：android, face-detection

我在玩`FaceDetectionListener`，我的目的是在眼睛周围画一个圆圈。我有一个`SurfaceView`名为的对象`preview`和一个`SurfaceHolder`名为`previewHolder`.

一切都很好，我可以检测到我`SurfaceView`使用后置摄像头代表的人脸。我还想在左右眼周围画一些圆圈。我的`drawCanvas`方法如下所示：

```
 private void drawCanvas(float x, float y) {
            Canvas canvas = previewHolder.lockCanvas();
            Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

            paint.setColor(Color.BLACK);
            paint.setDither(true); 
            paint.setColor(0xFFFFFF00);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStrokeWidth(3);

            canvas.drawPoint(x, y, paint);
            previewHolder.unlockCanvasAndPost(canvas);
      } 
```

此方法从以下位置调用`FaceDetectionListener`：

```
 @Override
      public void onFaceDetection(Face[] faces, Camera camera) {

       if (faces.length > 0) {
           tv.setText(String.valueOf(faces.length) + " Face(s) Detected");

           for(Face f : faces) {

               int leftEyeXCoordinate =  f.leftEye.x;
               int leftEyeYCoordinate = f.leftEye.y;
               drawCanvas(leftEyeXCoordinate, leftEyeYCoordinate);

               int rightEyeXCoordinate = f.rightEye.x;
               int rightEyeYCoordinate = f.rightEye.y;
               drawCanvas(rightEyeXCoordinate, rightEyeYCoordinate);
           }
       }
       else
           tv.setText("No Faces Detected!");
      }}; 
```

我不断收到 NullPointerException `int leftEyeXCoordinate = f.leftEye.x;`

我可以在相机四处移动时画点、矩形和其他东西吗？还是我必须先拍摄照片？

所以我的问题是：以前有没有人完成过这个并想告诉我我是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:28:18.187

是的，我也看到了这个问题。返回的人脸对象是 android.hardware.Camera.Face 而不是 FaceDetector.Face 并且只有 rect 对象在其中具有有效信息。矩形对象的边界在相机坐标系中。您必须将它们转换为视图坐标系。它在 rect 下的此[链接中进行了解释。](http://developer.android.com/reference/android/hardware/Camera.Face.html)

# asp.net - 自定义 HTTP 处理程序配置失败

> ID：14727886
> 
> 赞同：0
> 
> 时间：2013-02-06T11:24:32.243
> 
> 标签：asp.net, web-config, httphandler

我正在开发一个 ASP .Net 网站。我创建了一个自定义 HTTP 处理程序来响应针对具有 .videoImage 扩展名的资源的请求。
这是与我的处理程序对应的文件的第一行：

```
<%@ WebHandler Language="C#" Class="CompleteSubtitles.VideoImage" %>

using System;
using System.Web;
using System.IO;
using SubtitleSounds.DataManagement;

namespace CompleteSubtitles
{
    public class VideoImage : IHttpHandler
    {
        ...
    }
} 
```

处理程序文件位于网站根文件夹的子文件夹中。
我在我的网站根 web.config 文件中配置了我的处理程序，如下所示：

```
<configuration>
    <system.web>
        ...

        <httpHandlers>
          <add verb="*" path="*.videoImage" type="CompleteSubtitles.VideoImage" />
        </httpHandlers>
    </system.web>
</configuration> 
```

我在加载页面时收到一条 ASP .Net 错误消息，通知我 CompleteSubtitles.VideoImage 类型的加载失败。
有谁知道为什么？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:40:38.800

虽然我不能确定确切的错误消息，但是根据我在处理程序和 Web 表单方面的经验，这是可行的：

*   您的处理程序不能是简单的 VB/CS 文件，即使您将其放在 APP_CODE 文件夹中（从未与我合作过）。您需要放置在 DLL 中，我总是为此使用单独的类库。

*   如果主机使用 IIS 7，*system.web/httpHandlers*不起作用，需要添加*system.webServer*。我两个都留着以防万一。这是一个示例（bNet.Ferramentas 是我的 DLL 文件）：

>

```
<system.web>
    <httpHandlers>
        <add verb="*" path="sitemap.ashx" type="bNet.Ferramentas.SiteMapHandler, bNet.Ferramentas" />
    </httpHandlers>
</system.web >

<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
        <add verb="*" name="bnetSitemap" path="sitemap.ashx" type="bNet.Ferramentas.SiteMapHandler, bNet.Ferramentas"/>
    </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:32:57.357

您必须指定类的全名 (HttpHanlder)，如下所示：

```
 <configuration> 
 <system.webServer>
 <handlers> 
    <add verb="*" path="*.sample" name="HelloWorldHandler" type="HelloWorldHandler"/>
 </handlers>
 </system.webServer>
 </configuration> 
```

更多[请点击这里](http://counsellingbyabhi.blogspot.in/2013/02/creating-synchronous-http-handler.html)

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:11:33.950

以下是我解决问题的方法：
我在 App_Code 文件夹中创建了一个代表我的处理程序的类。
我的处理程序文件的扩展名是“.cs”而不是“.ashx”。
我的处理程序在我的 web.config 中的声明是：

```
<httpHandlers>
  <add verb="*" path="*.videoImage" type="CompleteSubtitles.VideoImageHandler" />
</httpHandlers> 
```

# php - 在 php 中从 $_FILES[size] 获取的文件的值四舍五入

> ID：14727889
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:24:35.913
> 
> 标签：php

我需要汇总上传文件的大小并确定是 kb、mb 还是 gb 的大小格式。

细节：当用户​​上传图片时，图片属性是通过全局$_FILES获取的。例如，如果用户上传了一张 29.6kb 的图片，而我决定检查上传图片的大小，则 $_FILES[size] 数组将大小回显为 30358。

我试图对从 $_FILES[size] 获得的值做的是将图片大小从 30758 舍入到 31，然后将文件大小格式（kb、mb 或 gb）连接到它并回显为31kb。

我真的希望得到帮助...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:35:19.683

那是怎么回事？

```
$file =  $_FILES[size];
$s = 'kb';
$x = round($file/1000, 1);
if($x > 1000){ 
    $x = $x/1000;
    $s = 'mb';
} else if($x > 100000) {
    $x = $x/100000;
    $s = 'gb';
}
echo $x . ' ' . $s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:39:00.300

您可以通过使用 php 命令 round(float) 和一些简单的数学来完成此操作：

```
define("K",1024);
define("M",1048576);
define("G",1073741824);

$size = $_FILES[size];
$gigs = $size / G;
$megs = ($size - ($gigs * G)) / M;
$kils = ($size - ($gigs * G) - ($megs * M)) / K;

if($gigs > 0) echo(round($gigs));
elseif($megs > 0) echo(round($megs));
elseif($kils > 0) echo(round($kils));
else echo("Size is zero"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:59:26.190

[Laravel](http://laravel.com/)使用这个辅助函数：

```
function get_file_size($size)
{
  $units = array('Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB');
  return @round($size / pow(1024, ($i = floor(log($size, 1024)))), 2).' '.$units[$i];
} 
```

***来源**：[https ://github.com/laravel/laravel/blob/master/laravel/helpers.php](https://github.com/laravel/laravel/blob/master/laravel/helpers.php)

我还没有看到更优雅的方式来做到这一点。

# sql - 将表结构和数据复制到不同的用户

> ID：14727893
> 
> 赞同：1
> 
> 时间：2013-02-06T11:24:58.690
> 
> 标签：sql, oracle

我有一组表，其中包含一个用户模式中的数据。我想要将这些副本提供给其他用户。

这可以用 SQL 完成吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:29:31.860

如果两个用户在同一个数据库上，并且提供了足够`GRANTS`的用户，那么只需在新用户模式中运行以下语句：

```
create table <tablename> as select * from olduser.<tablename>; 
```

* * *

## 编辑：

将以下语句集复制到文本文件中。替换`<oldueser>`为现有的模式名称和`<path>`您希望写入假脱机的 unix/windows 机器中的路径。在现有架构中运行此文件。一个假脱机文件将被写入以 name 指定的路径`tbls.sql`。使用它`tbls.sql`并在您希望复制表的新模式中运行它。

```
set head off
set line 100000
set line 100000
set feedback off
spool <path>/tbls.sql
select 'CREATE TABLE ' || TABLE_NAME ||' AS SELECT * FROM <OLDUSER>.'||TABLE_NAME||';'
FROM user_tables; 
spool off
set feedback on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:26:54.693

是的，您可以在命令提示符下使用导出命令，即

```
c:\>exp userid=userid(sql admin)/password owner=username(from which user) direct=y file=filename.dmp 
```

通过使用导入它

```
c:\>imp userid=userid(sql admin)/password file=filename.dmp fromuser=username(from which user) touser=username(imported username) 
```

通过使用它，您必须将数据导出到转储文件中，然后将其导入另一个用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:29:22.630

`create schema2.tablename as select * from schema1.tablename`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:54:21.323

1.  您可以导出第一个架构并导入第二个架构 - 如果没有任何理由阻止您这样做，我会这样做。 [文档在这里。](http://docs.oracle.com/cd/B19306_01/server.102/b14215/exp_imp.htm)

2.  如果您有访问权限，您可以编写一个小脚本来为您执行此操作。您可以使用以下查询选择所有源用户的表：

    `SELECT table_name FROM all_tables WHERE owner = <source_schema>`

循环遍历所有这些表并使用立即执行创建新表。（[文档在这里](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems017.htm)）

```
execute immediate 'create <dest>.<tablename> as select * from <source>.<tablename>'; 
```

`dest`并且`source`是模式的名称。 `tablename`是取自循环的表的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:58:38.783

可能“CREATE TABLE ... AS SELECT”对您有用吗？

查看[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm)

这是[一篇好文章](http://www.dba-oracle.com/t_create_table_select_ctas.htm)

# ssis - 在 SSIS 包中使用 WinSCP 进行 SFTP 时如何解决退出代码问题？

> ID：14727900
> 
> 赞同：1
> 
> 时间：2013-02-06T11:25:21.833
> 
> 标签：ssis, winscp

我正在使用 SSIS 2005 使用`WinSCP`. 我用谷歌搜索了这个错误，但无法让它工作。我收到了这个错误：

> [执行进程任务] 错误：在执行“C:\Program Files\WinSCP\WinSCP.exe”时，在“C:\ Program Files\WinSCP”，进程退出代码为“1”，而预期为“0”。

这是我使用的 WinSCP 脚本：

```
option batch abort
option confirm off
#open sftp://user:password@server:22
#cd /m/vo/Cont/fileftp
get OrderOutbound*
close
exit 
```

对于上面的脚本，我什至尝试一次只留下一个语句，但仍然出错。

这是执行过程任务的设置。

![执行流程任务](../Images/b394e348d93f6f2616e545078098088b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:17:48.807

这**不是**答案，而是试图帮助您找到问题的解决方案。

### 试试这个：

尝试以下步骤来确定您的脚本是否真的在 SSIS 之外工作。

*   单击**`Windows Start`**并单击**`Run...`**
*   键入**`cmd`**以打开*命令提示符*。
*   在命令提示符窗口中，在提示符处键入以下命令，切换到 WinSCP 安装目录。我在以下目录中安装了 WinSCP。根据您的环境设置更改路径。

> cd "C:\Program Files (x86)\WinSCP"

*   如果您的 WinSCP 脚本文件`removeSOA8.txt`位于`C:\Documents and Settings\userid\Desktop\temp\SSISMovingSOA\`带空格的路径中，则通过将脚本路径括在双引号中来键入以下命令以运行脚本并使用该**`/log`**选项来捕获所有状态消息。

> WinSCP.exe "/script=C:\Documents and Settings\userid\Desktop\temp\SSISMovingSOA\removeSOA8.txt" /log=C:\temp\WinSCP_log.txt

脚本执行后，您会发现**`WinSCP_log.txt`**路径中会创建一个名为的日志文件**`C:\temp`**。通读文件以确定是否有任何错误消息。

### 尝试在 SSIS 中运行 FTP：

我尝试使用 WinSCP 使用以下脚本从 FTP 下载文件：

```
option batch abort
option confirm off
open ftp://myuserid:mypassword@ftp.myftpsite.com:21 -passive=on
cd /root/somefolder/
option transfer binary
get SomeFileOnFTP.txt c:\temp\
close
exit 
```

这是我`Execute Process Task`在 SSIS 包中配置的设置。

![执行流程任务](../Images/226604f67337f0609f930d817716c879.png)

该过程在 BIDS 中成功运行。

![执行](../Images/8ca11dcee4caf39e682fa17a8b44bda0.png)

希望能给你一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T22:45:26.393

如果您从 SQL Server 作业代理运行脚本，那么大多数情况下您会收到此退出错误。

场景：在我尝试从 sFTP 服务器下载文件时遇到的情况。

**解决方案 ：**

**第 1 步 - 创建批处理文件** @echo off

CD "C:\Program Files (x86)\WinSCP"

winscp.com **/ini=nul** /script=C:\path\download_script_pm.txt

出口

*注意：使用 SQL Server 作业代理调用时，请确保将“ini”配置设为 NULL，否则将引发此错误*

**Step2 – 创建一个txt文件（winscp脚本）**

选项回显

选项批处理

选项确认关闭

打开 sftp://user:password@sftp.xxxx.com/ -hostkey="ssh-edXXXX-xx-xx-xx-xx-xx-xx-xx-xx-xx-xx-xx-xx-xx-xx -xx-xx”

选项确认关闭

获取 -filemask=" *>=1D" /sftp_Path/File_Name_* .csv C:\local_path_for_downloaded_file\"

出口

注意：确保使用主机密钥。要获取主机密钥，您需要执行以下操作： 1\. 打开 winscp app 工具并登录服务器

2.  单击会话 -> 生成会话/URL 代码选项

3.  检查 SSH 主机密钥并复制指纹值并在 winscp 主机密钥值中使用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-06-23T05:27:59.810

早些时候我遇到了同样的错误，但现在对我来说工作正常。

**SSIS执行过程任务：**

可执行文件 - C:\SSIS\SSIS_2008_Projects\HRIS_RepomanFusion_Load\WinSCP\WinSCP.com

参数 - "/script=wscpBatchTest.txt" /log=C:\SSIS\SSIS_2008_Projects\FTP_Load\WinSCP\WinSCP_log.txt

工作目录 - C:\SSIS\SSIS_2008_Projects\HRIS_RepomanFusion_Load\WinSCP

[![在此处输入图像描述](../Images/084fe239187cc7446a1e7e64f0334f70.png)](https://i.stack.imgur.com/USRNB.jpg)

这是我使用的 WinSCP 脚本：**wscpBatchTest.txt**

```
option batch
option confirm off
open sftp://username:password@ftp.test.com
option transfer binary
cd /home/SAFAA
get employeedetails.csv C:\SSIS\SSIS_2008_Projects\SAFAA\InputDirectory\
close
exit 
```

# jquery - 在相对于父 div 的前面添加一个 div

> ID：14727905
> 
> 赞同：0
> 
> 时间：2013-02-06T11:25:28.550
> 
> 标签：jquery, prepend

我正在使用 RSS 提要并希望将日期附加到描述中，显然有多个日期和描述。

我怎样才能使日期相对于父母？

我已经在这里尝试了答案，但无法让它们工作，JQuery 的初学者。

到目前为止我有

```
$('.RSSItem').each (function() { 
$('.Description').prepend($('.PubDate') ); 
}); 
```

HTML

```
<div class="RSSItem">
<div class="Description">
<div class="PubDate">Monday, 14 January 2013</div>
</div> 
```

每个日期都需要移到描述中，我遇到的问题是每个 RSSItem 的所有日期都显示为每个 RSSItem，我只想要与 RSSItem 相关的日期。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:04:41.223

```
$('.RSSItem').each (function() { 
$('.Description', this).prepend($('.PubDate') ); 
}); 
```

$('.Description') 将返回页面中找到的所有描述节点。$('.Description', this) 将仅返回在相应 $('.RSSItem') 中找到的节点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:26:39.067

假设可能有多个 RSSItems 和多个描述，并假设 PubDates 包含在源中 RSSItems 的正下方（似乎缺少一个关闭 div），我建议您遍历每个 RSSItems 和说明：

```
$('.RSSItem').each (function() {
    var $pubDate = $(this).find(".PubDate");
    $(this).find(".Description").each(function() {
        $(this).prepend($pubDate);
    });
}); 
```

# visual-studio-2008 - Visual Studio 2008 此安装不支持项目类型

> ID：14727919
> 
> 赞同：2
> 
> 时间：2013-02-06T11:26:16.707
> 
> 标签：visual-studio-2008

我知道以前有人问过这个问题，但给出的解决方案似乎都没有解决我的问题。

我正在使用 Visual Studio 2008 专业添加。当我尝试打开一个项目（.sln 文件）时，出现以下错误：

'.csproj' 无法打开。此安装不支持该项目。

我知道这与我的 csproj 文件中的“GUIDS”有关，如下所示：

```
<ProjectGuid>{7C77DC9C-1EE5-4539-A12A-3F9F25813D8F}</ProjectGuid>
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

我该如何处理这些信息？我已经安装了 MVC 的 1、2 和 3（scatter gunb 方法）并安装了 SP1，但仍然遇到相同的错误。我在命令行中运行了 devenv /setup，它似乎没有做任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:43:56.820

检查它是什么类型的项目最简单的方法可能是安装（Express）版本的 VS2010 或 VS2012，然后在那里打开它。

也许您可以找出VS2008是否支持项目类型，如果不支持，（手动？）编辑项目以加载它，或者在VS2008中创建一个新项目并在新创建的项目中再次复制所有相关部分.

# javascript - 将包含 jquery 的简单函数放入 jquery 执行队列

> ID：14727920
> 
> 赞同：0
> 
> 时间：2013-02-06T11:26:18.360
> 
> 标签：javascript, jquery, multithreading, queue

我有许多包含 jquery 的函数，应该按顺序执行。它们不用于创建效果，而是用于将某些元素定位在 div 内的计算位置。jquery queue 上的所有在线资源都专注于创建过渡或动画，因此很难找到一个简单的示例来说明如何按顺序执行许多简单的函数。

我有这些功能：

```
function bigItemRecalc(recalc, idBase, innerHeight, i) {
    if (recalc < 0) {
        $('#' + idBase + i).css('max-height', (innerHeight + (2 * recalc)));
        recalc = 0;
    }
    return recalc;
}

function firstCheck(recalc, idBase, i) {
    if (i == 1) {
        $('#' + idBase + i).css('margin-top', recalc * -1);
    }
}

function lastCheck(recalc, idBase, itemAmount, i) {
    if (i == itemAmount) {
        $('#' + idBase + i).css('margin-top', recalc);
    }
}

function truncateItems(totalHeight, widgetHeight, idBase, i) {
    if (totalHeight > (widgetHeight - 20)) {
        $('#' + idBase + i).remove();
        $('#' + idBase + "b" + i).remove();
    }
} 
```

在另一个函数中，我想优先使用 jquery 队列顺序执行这些，但我不知道如何。

代码在这里调用：

```
function styleWidget(itemAmount, widgetHeight, widgetWidth, idBase) {
    var innerHeight;
    var outerHeight;
    var recalc;
    var totalHeight = 0;
    var totalWidth = 0;

for (var i = 1; i <= itemAmount; i++)
    {
        if (widgetHeight >= widgetWidth)
        {
            totalHeight += $('#'+idBase+i).height();
            innerHeight = $('#' + idBase + i).height();
            outerHeight = (widgetHeight/itemAmount);
            recalc = ((outerHeight / 2) - (innerHeight / 2));
            recalc = bigItemRecalc(recalc, idBase, innerHeight, i);

                $('#' + idBase + i).css('padding-top', recalc);
                firstCheck(recalc, idBase, i);
                lastCheck(recalc, idBase, itemAmount, i);
                truncateItems(totalHeight, widgetHeight, idBase, i);

        }
        else
        {
            innerHeight = $('#'+idBase+i).height();
            outerHeight = widgetHeight;
            recalc = ((outerHeight/2)-(innerHeight/2));
            $('#'+idBase+i).css('padding-top',recalc);
            totalWidth += $('#'+idBase+i).width();
            if (totalWidth > (widgetWidth-20))
            {
                $('#' + idBase + i).remove();
                $('#' + idBase + "b" + i).remove();
            }

        }
    }

    } 
```

底部尚未更新，但可以忽略它，因为它正在使用纵向模式小部件进行测试。

**我想我找到了线索。当不引入延迟时，totalHeight 和 innerHeight 的值似乎非常低。所以我假设在脚本执行时页面没有完全加载。每次生成新的小部件时，都会像这样调用上述脚本：**

```
$(document).ready(styleWidget(3, 225, 169, 'id-871206010')); 
```

**这修复了它：**[为什么 Firefox 5 忽略 document.ready？](https://stackoverflow.com/questions/6811929/why-does-firefox-5-ignore-document-ready) 似乎重新加载页面并没有触发 .ready() 函数。

# google-app-engine - 将文件从 Google App Engine 上传到 Amazon S3 会导致异常

> ID：14727927
> 
> 赞同：2
> 
> 时间：2013-02-06T11:26:49.317
> 
> 标签：google-app-engine, gwt, amazon-s3

我正在开发 gwt2.4、jre7 和 GAE 1.7.3。在开发模式下我的代码工作正常，但是当我在应用引擎上上传我的应用程序时，我收到以下错误

```
 java.lang.ExceptionInInitializerError
at com.amazonaws.services.s3.AmazonS3Client.<init>(AmazonS3Client.java:277)
at com.wa.gwtamazon.server.UploadServiceImpl.amazonConfig(UploadServiceImpl.java:124)
at com.wa.gwtamazon.server.UploadServiceImpl.doPost(UploadServiceImpl.java:76)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:100)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679)

Nested in java.lang.ExceptionInInitializerError:
java.lang.NullPointerException
at com.amazonaws.util.VersionInfoUtils.initializeUserAgent(VersionInfoUtils.java:124)
at com.amazonaws.util.VersionInfoUtils.getUserAgent(VersionInfoUtils.java:86)
at com.amazonaws.ClientConfiguration.<clinit>(ClientConfiguration.java:31)
at com.amazonaws.services.s3.AmazonS3Client.<init>(AmazonS3Client.java:277)
at com.wa.gwtamazon.server.AmazonService.uploadFileToAmazone(AmazonService.java:50)
at com.wa.gwtamazon.server.AmazonService.doPost(AmazonService.java:36)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:100)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679) 
```

我也在以下链接上找到了解决方案，但仍然没有用

（[http://code.google.com/p/googleappengine/issues/detail?id=8166](http://code.google.com/p/googleappengine/issues/detail?id=8166)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:09:36.503

//编辑：他将以下 XML 添加到他`appengine-web.xml`的工作中：

```
<system-properties> 
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/> 
    <property name="os.name" value="Linux" /> 
    <property name="os.version" value="6.1" /> 
    <property name="java.vm.name" value="Java HotSpot(TM) Client VM" /> 
    <property name="java.vm.version" value="23.5-b02" /> 
    <property name="user.language" value="en" /> 
    <property name="user.region" value="us" /> 
</system-properties> 
```

由于 Google App Engine 的限制（没有线程，...），您不能使用 Amazon Libs。但是很少有解决方案可以帮助您：

[1] [http://socialappdev.com/using-amazon-s3-with-google-app-engine-02-2011](http://socialappdev.com/using-amazon-s3-with-google-app-engine-02-2011)

[2] [https://github.com/handstandtech/s3-simple-appengine](https://github.com/handstandtech/s3-simple-appengine)

为什么不将[Google Cloud Storage](https://cloud.google.com/products/cloud-storage)与[GAE Java SDK](https://developers.google.com/appengine/docs/java/googlestorage/overview)一起使用？GCS API 与 S3 API 几乎相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:49:07.030

有时应用引擎没有获得 os.name、os.version、java.vm.name 等的值，所以我们必须在 appengine-web.xml 文件中手动指定

```
<system-properties>

<property name="os.name" value="Linux" />
<property name="os.version" value="6.1" />

<property name="java.vm.name" value="Java HotSpot(TM) Client VM" />
<property name="java.vm.version" value="23.5-b02" />

<property name="user.language" value="en" />
<property name="user.region" value="us" /> 
```

# tcl - 将 csh 正则表达式匹配代码更改为 tcl

> ID：14727929
> 
> 赞同：0
> 
> 时间：2013-02-06T11:26:51.783
> 
> 标签：tcl, csh

我需要将shell中的以下代码更改为tcl。请帮忙。

```
if (` expr $_f : proj_lp_ ` == 8) then 
```

我需要 if 条件中条件的 tcl 等效项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:50:34.390

请参阅[expr 手册页](http://linux.die.net/man/1/expr)，其中状态为：

> ```
>  STRING : REGEXP
>           anchored pattern match of REGEXP in STRING 
> ```

因此，您的`_f`变量包含一个字符串，并且您将其与 litteral 进行比较`proj_lp_`。结果是匹配的长度。在 tcl 代码中，`if {[regexp {^proj_lp_} $_f]} { ...}`您可能只关心它是否匹配。你也可以只使用`if {[string match "proj_lp_*" $_f]} {...}`. expr(1) 页面说这是一个*锚定*的正则表达式——因此添加了插入符号。我给出的两个示例都只会在输入字符串的开头匹配（即：它们是锚定的）。

# file - 从文件中提取多个单词

> ID：14727931
> 
> 赞同：0
> 
> 时间：2013-02-06T11:26:58.880
> 
> 标签：file, bash, shell, grep

我有一个文件（大约 1000 字）。

1.txt：

```
XYZ

ABC

DEF

GHI

... 
```

我还有另一个文件*2.txt*包含一些数据，现在我想 在文件*2.txt的**1.txt*中grep这些词。我使用了以下逻辑，但给出了错误。

 *```
name=$(cat 1.txt |tr '\n' '|')

grep -E -w ${name} 2.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:29:39.743

`-f`Grep 可以使用以下选项从文件中读取模式：

```
egrep -w -f 1.txt 2.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:35:13.750

你需要引号并使用 egrep

```
egrep -w "$(cat 1.txt |tr '\n'  '|')" 2.txt 
```

但 -f 的答案更好*

# bash - 有没有办法将 Bash 脚本转换为 GUI 应用程序？

> ID：14727933
> 
> 赞同：-2
> 
> 时间：2013-02-06T11:27:02.810
> 
> 标签：bash, user-interface, ubuntu

我编写了一个功能齐全的 bash 脚本，根据相对速度在局域网内执行代理切换。

我可以将其直接转换为 Ubuntu 的 GUI 应用程序吗？如果不是我应该从哪里开始（我对 GUI 应用程序开发完全陌生）？

这个脚本可以转换成任何其他语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:35:00.340

是的，您只需要为其创建一个“桌面”文件，并将其放在`~/.local/share/applications/`.

最简单的方法是使用[MenuLibre](https://apps.ubuntu.com/cat/applications/menulibre/)。顺便说一句，这与 Ubuntu 无关。大多数发行版都可以使用相同的技巧。

如果你想让你的脚本有一个任务栏图标，或者打开对话窗口，或者显示一个桌面通知气泡，你可能想看看[Zenity](https://apps.ubuntu.com/cat/applications/zenity/)。

当然，您可以用您选择的任何其他语言重写您的脚本，但我不知道自动转换它的简单方法。

# android - 复选框在 expandablelisview 中不起作用

> ID：14727936
> 
> 赞同：1
> 
> 时间：2013-02-06T11:27:05.490
> 
> 标签：android, android-layout, android-intent, android-listview, android-checkbox

嗨，我正在处理可扩展列表视图中的复选框，但我遇到了很多问题。

组中的条件**复选框**

```
 1\. if user "checks" **Group checkbox** all the **Child** must get check.
  2\. if user "Unchecks" the **Group checkbox** all the **Child** must get Uncheck.
  3\. if user "checks" **Group checkbox** so all the **Child** wil get checked & if user  uncheck any 1 checkbox in the childrow(Out of 10 or more childrow) so group must get uncheck automaticlly. 
```

**子复选框**中的条件

 **```
 1\. multiple selection 
```

*问题*：

```
 1\. mainly in in child, if check the childcheck box & scroll many checkbox which i selected is getting automatically unchecked when SCROLLING.

 2\. In **Group checkbox** Conditions  3rd point. i dont know how to do it. 
```

怎么做..如果有人研究这个概念，请发布你的代码。

如果你想要我的代码在这里[如何做可扩展列表视图中的复选框（在组视图和子视图中）](https://stackoverflow.com/questions/14575652/how-to-do-checkbox-in-expanablelistview-in-groupview-and-child-view)

谢谢请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T08:49:59.820

你可以看看[这个网站](http://www.javaw.net/1177.html)，它应该有帮助。**

# macos - 如何为未安装的应用程序编译 AppleScript

> ID：14727938
> 
> 赞同：1
> 
> 时间：2013-02-06T11:27:12.233
> 
> 标签：macos, email, outlook, applescript, osx-mountain-lion

我有一个脚本，它使用 mac 上的默认邮件客户端创建一个新的电子邮件。该脚本包含一个代码，如果它发现它被设置为默认邮件应用程序，则该代码与 Microsoft Outlook 相关。问题是在 Mac 上，没有安装 Outlook，这个脚本甚至没有通过编译，因为 Apple Script 可能找不到 Microsoft Outlook 字典。处理这个问题的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:39:34.947

以下是你可以如何处理它。

注意：为了使脚本不需要编译，您必须 1) 将脚本保存为应用程序。应用程序不需要在另一台机器上编译。2）您在脚本中使用“使用条款”子句。

我添加了 do shell 脚本内容，因此您可以在需要时在运行 Outlook 代码之前检查 Outlook。我希望这会有所帮助。

```
set outlookExists to false
try
    do shell script "osascript -e 'exists application \"Microsoft Outlook\"'"
    set outlookExists to true
end try

if outlookExists then
    using terms from application "Microsoft Outlook"
        tell application "Microsoft Outlook"
            -- do something
        end tell
    end using terms from
else
    -- do something else

end if 
```

# php - PHP：下载/显示焦点图像

> ID：14727939
> 
> 赞同：0
> 
> 时间：2013-02-06T11:27:14.667
> 
> 标签：php, image, loading

我的页面会有很多图片，加载需要很长时间并且会很慢，所以我的问题是

如何使页面只下载并显示显示在您面前的图片，与使用谷歌进行图像搜索完全相同，每当您滚动它时，它都会继续下载并显示聚焦的图像。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:31:55.110

图片延迟加载

例如 jQuery 的延迟加载插件 ( [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload) )

演示：[http ://speckyboy.com/demo/lazy/index.html](http://speckyboy.com/demo/lazy/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:31:37.900

使用 ajax，您可以通过 javascript 和图像尺寸轻松检测视图端口，因此在滚动时，您所要做的就是发送请求以填充视图的更多行，这可以是表格或 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:32:11.127

你不能在 PHP 中做这样的事情。它已在 JQuery 中完成。

有一个插件可以满足您的需求，称为 Lazy Load。看看这个网站： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

# javascript - jqGrid中如何将数据库记录数放在GridPager中？

> ID：14727940
> 
> 赞同：0
> 
> 时间：2013-02-06T11:27:19.403
> 
> 标签：javascript, jquery, jqgrid

jqGrid 寻呼机显示存在的行数。我想显示数据库中网格中实际记录的数量？实际上网格只有一个额外的行并且正在计算中。我想在那里显示实际的数据库记录数。

# excel - 使字节数组的下标超出范围

> ID：14727949
> 
> 赞同：1
> 
> 时间：2013-02-06T11:27:46.267
> 
> 标签：excel, vba

我正在使用 excel vba 读取二进制文件，然后将字节获取到字节数组。但是，在第 13 行中，下标超出范围异常

```
Sub GetBinaryData()
Dim aryBytes() As Byte
Dim bytInput As Byte
Dim intFileNumber
Dim intFilePos

intFileNumber = FreeFile

Open "Binary.bin" For Binary As #intFileNumber
intFilePos = 1
While Not EOF(intFileNumber)
Get #intFileNumber, intFilePos, bytInput
aryBytes(intFilePos) = bytInput
ReDim aryBytes(UBound(aryBytes) + 1)
intFilePos = intFilePos + 1
Wend
Close #intFileNumber

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:05:53.387

它在第一次通过循环`aryBytes(intFilePos)`尝试访问`aryBytes`不存在的元素 1 时失败（其声明为动态且没有前导`ReDim`）

此外，EOF 不会像您期望的二进制访问那样运行，请尝试 LOF

这是一种逐字节执行的方法；

```
Open "Binary.bin" For Binary Access Read As #intFileNumber
  '//only need to dimension once
  ReDim aryBytes(LOF(intFileNumber) - 1)
  '//easier to count from zero
  intFilePos = 0
  While intFilePos < LOF(intFileNumber) '//limit to Length-Of-File
    Get #intFileNumber, intFilePos + 1, bytInput
      aryBytes(intFilePos) = bytInput
      intFilePos = intFilePos + 1
    Wend
Close #intFileNumber 
```

您也可以一次阅读；

```
Open "Binary.bin" For Binary Access Read As #intFileNumber
  ReDim aryBytes(LOF(intFileNumber) - 1)
  Get #intFileNumber, , aryBytes
Close #intFileNumber 
```

# android - getDrawingCache() 方法返回 null 取决于纵向或横向模式

> ID：14727952
> 
> 赞同：1
> 
> 时间：2013-02-06T11:27:57.320
> 
> 标签：android, caching, bitmap, drawing, imageview

如果我在横向模式下启动我的应用程序，getDrawingCache() 将返回我需要的位图，在将方向更改为纵向模式后（在应用程序运行时），getDrawingCache() 返回 null。如果我以纵向模式启动我的应用程序，getDrawingCache() 将返回我需要的位图，无论哪个方向。

这里发生了什么事？？从横向或纵向启动应用程序有什么区别？为什么它会改变 getDrawingCache() 方法？

这是我的代码：

```
mPlaceHolderBitmap = null;
if (imageView.getDrawable() != null) {
    imageView.setDrawingCacheEnabled(true);
    imageView.buildDrawingCache(true);
    mPlaceHolderBitmap = imageView.getDrawingCache(true);
} 
```

我还尝试使用不带布尔值或不调用 buildDrawingCache 但始终相同的 getDrawingCache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:37:20.473

当你改变方向时 onConfigurationChanged() 调用你是否使用过这个方法？？？

# javascript - 如何使用 jQuery 在 Phonegap 中逐行读取文本文件？

> ID：14727953
> 
> 赞同：0
> 
> 时间：2013-02-06T11:28:00.113
> 
> 标签：javascript, jquery, html, cordova

这是文件路径：

```
 www/asset/textfile/file.txt 
```

这是我读取文本文件内容的脚本：

```
$(document).ready(function(){

  $.get("../textfile/file.txt", function(data){
       $("#text").html(data);
  });

)}; 
```

此代码可以很好地从文本文件中读取内容。现在我的问题是“如何逐行（或）逐字符阅读这些内容？” 因为，当我在 HTML 页面中粘贴内容时，会不断粘贴文本。但是，里面有回车键。

现在，我想阅读每一行。当一行结束时，我想放置`<br>`标签。（或者）

我想阅读每个字符。当有输入字符时，我想放置`<br>`标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:30:29.663

您应该能够`<br>`像这样替换行更改：

```
$.get("../textfile/file.txt", function(data){
   $("#text").html(data.replace(/\n/g, '<br>');
}); 
```

`/\n/g`是文字[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。该`g`标志意味着我们要查找所有出现，而不仅仅是第一个。

# ios5 - 如何在 iOS 5 中以特定宽度和长度的视图播放视频

> ID：14727960
> 
> 赞同：0
> 
> 时间：2013-02-06T11:28:07.110
> 
> 标签：ios5, video, xcode4.5

我正在尝试在一个视图中运行一个视频，`frame (0, 80, 320, 220)`该视图是 `self.view`

```
MPMoviePlayerViewController *moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
moviePlayerViewController.view.frame = myview.bounds;
[self presentMoviePlayerViewControllerAnimated:moviePlayerViewController];
moviePlayerViewController.moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
moviePlayerViewController.moviePlayer.shouldAutoplay = YES;
[moviePlayerViewController.moviePlayer prepareToPlay];
moviePlayerViewController.moviePlayer.fullscreen=YES; 
```

...如果我替换为 320 x 480 像素，它`myview`工作`self.view`正常 **吗**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:44:21.973

```
NSURL *url = [NSURL URLWithString:@"http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8"];

moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:url];
CGRect viewInsertRect = CGRectMake(0, 100, 320, 190);
[moviePlayerController.view setFrame:viewInsertRect];
[self.view addSubview:moviePlayerController.view];
[moviePlayerController play]; 
```

# c++ - OpenGL Matrix Camera 控件，局部旋转无法正常工作

> ID：14727967
> 
> 赞同：1
> 
> 时间：2013-02-06T11:28:33.397
> 
> 标签：c++, opengl, matrix, camera, transformation

所以我试图弄清楚如何手动创建一个相机类，为相机转换创建一个本地框架。我创建了一个基于 OpenGL SuperBible 的 GLFrame 类的播放器对象。

我将键盘键映射到 MoveUp、MoveRight 和 MoveForward 函数，水平和垂直鼠标移动映射到 xRot 变量和 rotateLocalY 函数。这样做是为了创建一个 FPS 风格的相机。

然而，问题在于 RotateLocalY。翻译工作正常，垂直鼠标移动也是如此，但水平移动以一种奇怪的方式缩小或放大我的所有对象。除了缩放之外，旋转似乎也将自身限制为 180 度，并围绕世界原点 (0.0) 而不是我玩家的本地位置旋转。

我认为缩放与规范化向量有关，但 GLframe 类（我用作参考）从未规范化任何向量，并且该类工作得很好。规范化我的大部分向量只解决了缩放问题，所有其他问题仍然存在，所以我认为一段代码导致了所有这些问题？

我似乎无法弄清楚问题出在哪里，我将在此处发布所有适当的代码以及显示缩放的屏幕截图。

**玩家对象**

```
Player::Player()
{
    location[0] = 0.0f; location[1] = 0.0f; location[2] = 0.0f;
    up[0] = 0.0f; up[1] = 1.0f; up[2] = 0.0f;
    forward[0] = 0.0f; forward[1] = 0.0f; forward[2] = -1.0f;
}

// Does all the camera transformation. Should be called before scene rendering!
void Player::ApplyTransform()
{
    M3DMatrix44f cameraMatrix;
    this->getTransformationMatrix(cameraMatrix);

    glRotatef(xAngle, 1.0f, 0.0f, 0.0f);
    glMultMatrixf(cameraMatrix);
}

void Player::MoveForward(GLfloat delta)
{
    location[0] += forward[0] * delta;
    location[1] += forward[1] * delta;
    location[2] += forward[2] * delta;
}

void Player::MoveUp(GLfloat delta)
{
    location[0] += up[0] * delta;
    location[1] += up[1] * delta;
    location[2] += up[2] * delta;
}

void Player::MoveRight(GLfloat delta)
{
    // Get X axis vector first via cross product
    M3DVector3f xAxis;
    m3dCrossProduct(xAxis, up, forward);

    location[0] += xAxis[0] * delta;
    location[1] += xAxis[1] * delta;
    location[2] += xAxis[2] * delta;
}

void Player::RotateLocalY(GLfloat angle)
{
    // Calculate a rotation matrix first
    M3DMatrix44f rotationMatrix;
    // Rotate around the up vector
    m3dRotationMatrix44(rotationMatrix, angle, up[0], up[1], up[2]); // Use up vector to get correct rotations even with multiple rotations used.

    // Get new forward vector out of the rotation matrix
    M3DVector3f newForward;
    newForward[0] = rotationMatrix[0] * forward[0] + rotationMatrix[4] * forward[1] + rotationMatrix[8] * forward[2]; 
    newForward[1] = rotationMatrix[1] * forward[1] + rotationMatrix[5] * forward[1] + rotationMatrix[9] * forward[2];
    newForward[2] = rotationMatrix[2] * forward[2] + rotationMatrix[6] * forward[1] + rotationMatrix[10] * forward[2];

    m3dCopyVector3(forward, newForward);
}

void Player::getTransformationMatrix(M3DMatrix44f matrix)
{
    // Get Z axis (Z axis is reversed with camera transformations)
    M3DVector3f zAxis;
    zAxis[0] = -forward[0];
    zAxis[1] = -forward[1];
    zAxis[2] = -forward[2];

    // Get X axis
    M3DVector3f xAxis;
    m3dCrossProduct(xAxis, up, zAxis);

    // Fill in X column in transformation matrix
    m3dSetMatrixColumn44(matrix, xAxis, 0); // first column
    matrix[3] = 0.0f; // Set 4th value to 0

    // Fill in the Y column
    m3dSetMatrixColumn44(matrix, up, 1); // 2nd column
    matrix[7] = 0.0f;

    // Fill in the Z column
    m3dSetMatrixColumn44(matrix, zAxis, 2); // 3rd column
    matrix[11] = 0.0f;

    // Do the translation
    M3DVector3f negativeLocation; // Required for camera transform (right handed OpenGL system. Looking down negative Z axis)
    negativeLocation[0] = -location[0];
    negativeLocation[1] = -location[1];
    negativeLocation[2] = -location[2];
    m3dSetMatrixColumn44(matrix, negativeLocation, 3); // 4th column
    matrix[15] = 1.0f;
} 
```

**播放器对象头**

```
class Player
{
public:
    //////////////////////////////////////
    // Variables
    M3DVector3f location;
    M3DVector3f up;
    M3DVector3f forward;
    GLfloat xAngle; // Used for FPS divided X angle rotation (can't combine yaw and pitch since we'll also get a Roll which we don't want for FPS)
    /////////////////////////////////////
    // Functions
    Player();
    void ApplyTransform();
    void MoveForward(GLfloat delta);
    void MoveUp(GLfloat delta);
    void MoveRight(GLfloat delta);
    void RotateLocalY(GLfloat angle); // Only need rotation on local axis for FPS camera style. Then a translation on world X axis. (done in apply transform)

private:
    void getTransformationMatrix(M3DMatrix44f matrix);
}; 
```

![转换出错](../Images/225fe9797821560f1c641ab19d5e046e.png)

**应用转换**

```
// Clear screen
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();

// Apply camera transforms
player.ApplyTransform();

// Set up lights
...

// Use shaders
...

// Render the scene
RenderScene();

// Do post rendering operations
glutSwapBuffers(); 
```

**和鼠标**

```
float mouseSensitivity = 500.0f;

float horizontal = (width / 2) - mouseX;
float vertical = (height / 2) - mouseY;

horizontal /= mouseSensitivity;
vertical /= (mouseSensitivity / 25);

player.xAngle += -vertical;
player.RotateLocalY(horizontal);

glutWarpPointer((width / 2), (height / 2)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:02:04.127

老实说，我认为您正在采取一种复杂的方法来解决您的问题。有很多方法可以创建相机。我最喜欢的是使用 R3-Vector 和四元数，但您也可以使用 R3-Vector 和两个浮点数（俯仰和偏航）。

两个角度的设置很简单：

```
glLoadIdentity();
glTranslatef(-pos[0], -pos[1], -pos[2]);
glRotatef(-yaw, 0.0f, 0.0f, 1.0f);
glRotatef(-pitch, 0.0f, 1.0f, 0.0f); 
```

现在棘手的部分是移动相机。您必须按照以下方式做一些事情：

```
flaot ds = speed * dt;
position += tranform_y(pich, tranform_z(yaw, Vector3(ds, 0, 0))); 
```

如何进行转换，我必须查找它，但您可以使用[旋转矩阵来查找](http://www.j3d.org/matrix_faq/matrfaq_latest.html)

旋转是微不足道的，只需添加或减去俯仰和偏航值。

我喜欢使用四元数作为方向，因为它是通用的，因此你有一个独立于任何运动方案的相机（任何实体）。在这种情况下，您有一个看起来像这样的相机：

```
class Camera
{
public:
   // lots of stuff omitted

   void setup();

   void move_local(Vector3f value);

   void rotate(float dy, float dz);

private:
    mx::Vector3f position;
    mx::Quaternionf orientation;
}; 
```

然后设置代码无耻地使用gluLookAt；你可以用它制作一个转换矩阵，但我从来没有让它正常工作。

```
void Camera::setup()
{
    // projection related stuff

    mx::Vector3f eye     = position;
    mx::Vector3f forward = mx::transform(orientation, mx::Vector3f(1, 0, 0));
    mx::Vector3f center  = eye + forward;
    mx::Vector3f up      = mx::transform(orientation, mx::Vector3f(0, 0, 1));
    gluLookAt(eye(0), eye(1), eye(2), center(0), center(1), center(2), up(0), up(1), up(2));
} 
```

在本地框架中移动相机也很简单：

```
void Camera::move_local(Vector3f value) 
{
    position += mx::transform(orientation, value);
} 
```

旋转也是直截了当的。

```
void Camera::rotate(float dy, float dz)
{
    mx::Quaternionf o = orientation;
    o = mx::axis_angle_to_quaternion(horizontal, mx::Vector3f(0, 0, 1)) * o;
    o = o * mx::axis_angle_to_quaternion(vertical, mx::Vector3f(0, 1, 0));   
    orientation = o;
} 
```

（无耻插件）：

如果你问我使用什么数学库，它是[mathex](https://github.com/rioki/mathex)。我写的...

# typo3 - TYPO3 tt_address 电子邮件限制

> ID：14727974
> 
> 赞同：0
> 
> 时间：2013-02-06T11:28:49.807
> 
> 标签：typo3

我使用 tt_address 分机在网站上显示地址。是否可以从电子邮件字段中显示多个电子邮件地址？我想在 tt_address 电子邮件字段中插入两到三封电子邮件，用`,`（逗号）分隔它们并在单独的`a`元素中显示所有地址。

我有那个 TS 拆分地址但只激活第一个电子邮件地址给所有人：

```
email{
    field = email
    split{
        token = ,
        cObjNum = 1
        1.current = 1
        1.typolink.parameter.field = email
        1.typolink.ATagParams = class="email"

    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:32:26.660

使用 1.typolink.parameter.field = email，您将插入整个电子邮件字段 (test@example.com,test2@example.com)。所以我想使用 current=1 应该可以解决这个问题。*未经测试*

```
email{
    field = email
    split{
        token = ,
        cObjNum = 1
        1.current = 1
        1.typolink.parameter.current = 1
        1.typolink.ATagParams = class="email"

    }
} 
```

# c# - 如何使用 C# 在 LookupEdit 中隐藏字典键？

> ID：14727975
> 
> 赞同：0
> 
> 时间：2013-02-06T11:28:48.910
> 
> 标签：c#, devexpress, repositorylookupedit

我创建了一个普通的 winform 并添加`LookUpEdit`到我的表单中，并创建了一个包含`string`键和`string`值的字典。我`LookupEdit.Properties.Datasource`使用`BindingSource`.
加载 Lookupedit 时，我想隐藏字典键：

```
private LookUpEdit lookup1;

void InitializeComponent()
{
    //...
    this.lookup1 = new DevExpress.XtraEditors.LookUpEdit();
    this.lookup1.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left)
                        | System.Windows.Forms.AnchorStyles.Right)));
    //this.cmbCards.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
    this.lookup1.Location = new System.Drawing.Point(400, 125);
    this.lookup1.Name = "Test";
    this.lookup1.Properties.ShowHeader = false;
    this.lookup1.Properties.ValueMember = "Test";
    this.lookup1.Size = new System.Drawing.Size(400, 85);
    this.lookup1.TabIndex = 0;
    this.lookup1.Tag = "";
    this.lookup1.Properties.BestFit();
    this.lookup1.Properties.ShowDropDown = DevExpress.XtraEditors.Controls.ShowDropDown.SingleClick;
    this.lookup1.Properties.BestFit();
    this.lookup1.Properties.PopupWidth = 50;
    this.lookup1.Properties.PopupSizeable = false;
    //...
}

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        Dictionary<string, string> dic = new Dictionary<string, string>();
        dic.Add("Test", "1");
        dic.Add("Test2", "2");
        dic.Add("Test3", "3");
        dic.Add("Test4", "4");
        dic.Add("Test5", "5");
        dic.Add("Test6", "6");
        dic.Add("Test7", "7");
        dic.Add("Test8", "8");
        dic.Add("Test9", "9");
        dic.Add("Test10", "10");

        this.lookup1.Properties.DataSource = new BindingSource(dic, null);
        this.lookup1.Properties.ShowLines = false;
        this.lookup1.Properties.ShowPopupShadow = false;
        this.lookup1.ItemIndex = 0;
    }
} 
```

这显示了以下内容：

```
Output 
Test  1
Test2 2 
```

我需要输出，因为
必须隐藏“1”“测试”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:40:19.527

**解决方案：** 只需添加两列`lookupEdit`，然后分配`datasource`. 之后，您将能够访问这些列。动态生成的列不会添加到`lookupEdit.properties.Columns`集合中。

参考[LookUpEdit 类](http://documentation.devexpress.com/#windowsforms/clsDevExpressXtraEditorsLookUpEdittopic)

用这个：

```
private void CreateLookupEdit()
{
    ledMyControl = new LookUpEdit();
    ledMyControl.Properties.Columns.Add(new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Key"));
    ledMyControl.Properties.Columns.Add(new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Value"));

    this.Controls.Add(ledMyControl);
    Dictionary<string, string> dic = new Dictionary<string, string>();
    dic.Add("Test", "1");
    dic.Add("Test2", "2");
    dic.Add("Test3", "3");
    dic.Add("Test4", "4");
    dic.Add("Test5", "5");
    dic.Add("Test6", "6");
    dic.Add("Test7", "7");
    dic.Add("Test8", "8");
    dic.Add("Test9", "9");
    dic.Add("Test10", "10");
    ledMyControl.Properties.DisplayMember = "Value";
    ledMyControl.Properties.ValueMember = "Key";
    ledMyControl.Properties.DataSource = dic.ToList();

    ledMyControl.Properties.Columns[0].Visible = false;
} 
```

参考资料：
[Dictionary as datasource](http://www.devexpress.com/Support/Center/p/Q131292.aspx)
[LookupEdit 绑定到 ArrayList](http://www.devexpress.com/Support/Center/p/Q246473.aspx)
[Feed lookupEdit with Dictionary](http://www.devexpress.com/Support/Center/p/Q441481.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:35:15.053

在后面的代码中管理以下事件

```
lookup1.Popup += new EventHandler(gridLookUpEdit1_Popup);

protected void gridLookUpEdit1_Popup(object sender, EventArgs e)
{
    this.lookup1.Properties.View.Columns[0].Visible = false;
} 
```

# video-streaming - IP 摄像机的 H.264 流媒体

> ID：14727976
> 
> 赞同：0
> 
> 时间：2013-02-06T11:28:49.527
> 
> 标签：video-streaming, h.264, ip-camera

我正在寻找一个支持**H.264 流**的 IP 摄像机模拟器。目前我找到了 223M 摄像机的轴模拟器，但它只支持**MJpeg over http**而不是**H.264**。我必须创建一个流（图像），我的 DVR（使用 H.264）可以作为 IP 摄像机访问并播放视频。**（我只能通过 Axis emulator[Images as input] 以Jpeg**格式查看 DVR 上的视频，但我需要以**H.264**格式运行视频。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:39:40.043

运行 live555 媒体服务器[http://www.live555.com/mediaServer/](http://www.live555.com/mediaServer/)并在磁盘上使用 H.264 元素流。

# asp.net-mvc - 如何在 mvc4 razor 中只允许文本框中的数字

> ID：14727979
> 
> 赞同：89
> 
> 时间：2013-02-06T11:29:00.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有 3 个文本框，其中包含邮政编码、手机号码和住宅号码。我得到了使用来自 Bellow post 的 jquery 在文本框中只允许数字的解决方案。

[我想让 EditFor 文本框只接受数字](https://stackoverflow.com/questions/7310796/i-would-like-to-make-an-editfor-textbox-accept-numbers-only)

但是我们可以像使用 MVC4 razor 一样使用数据注释来做到这一点吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-05-24T15:53:54.107

我只是在玩 HTML5 输入类型=数字。虽然并非所有浏览器都支持它，但我希望它是处理特定类型处理（ex 的数字）的前进方式。用剃刀做很简单（例如VB）

```
@Html.TextBoxFor(Function(model) model.Port, New With {.type = "number"}) 
```

并感谢 Lee Richardson，c# 方式

```
@Html.TextBoxFor(i => i.Port, new { @type = "number" }) 
```

超出了问题的范围，但您可以对任何 html5 输入类型执行相同的方法

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-03-25T11:49:50.490

使用正则表达式，例如

```
[RegularExpression("([1-9][0-9]*)", ErrorMessage = "Count must be a natural number")]
public int Count { get; set; } 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2015-10-05T03:18:38.913

```
@Html.TextBoxFor(m => m.PositiveNumber, 
                      new { @type = "number", @class = "span4", @min = "0" }) 
```

在带有 Razor 的 MVC 5 中，您可以按照上面的示例在匿名对象中添加任何 html 输入属性，以仅允许正数进入输入字段。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-02-06T12:53:54.333

在文本框中写下这段代码`onkeypress="return isNumberKey(event)"` 和函数就在下面。

```
<script type="text/javascript">
function isNumberKey(evt)
{
          var charCode = (evt.which) ? evt.which : event.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
}
</script> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-02-10T10:27:44.720

请使用`DataType`属性。这将接受负值，因此下面的正则表达式将避免这种情况：

```
 [DataType(DataType.PhoneNumber,ErrorMessage="Not a number")]
   [Display(Name = "Oxygen")]
   [RegularExpression( @"^\d+$")]
   [Required(ErrorMessage="{0} is required")]
   [Range(0,30,ErrorMessage="Please use values between 0 to 30")]
    public int Oxygen { get; set; } 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-12-10T23:31:31.057

这对我有用：

```
<input type="text" class="numericOnly" placeholder="Search" id="txtSearch"> 
```

Java脚本：

```
//Allow users to enter numbers only
$(".numericOnly").bind('keypress', function (e) {
    if (e.keyCode == '9' || e.keyCode == '16') {
        return;
    }
    var code;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    if (e.which == 46)
        return false;
    if (code == 8 || code == 46)
        return true;
    if (code < 48 || code > 57)
        return false;
});

//Disable paste
$(".numericOnly").bind("paste", function (e) {
    e.preventDefault();
});

$(".numericOnly").bind('mouseenter', function (e) {
    var val = $(this).val();
    if (val != '0') {
        val = val.replace(/[^0-9]+/g, "")
        $(this).val(val);
    }
}); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-07-13T07:23:51.527

在您的脚本中使用此函数并在文本框附近放置一个跨度以显示错误消息

```
$(document).ready(function () {
    $(".digit").keypress(function (e) {
        if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
            $("#errormsg").html("Digits Only").show().fadeOut("slow");
            return false;
        }
    });
});

@Html.TextBoxFor(x => x.company.ContactNumber, new { @class = "digit" })
<span id="errormsg"></span> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-21T05:21:47.947

对于大于零的十进制值，HTML5 的工作方式如下：

```
<input id="txtMyDecimal" min="0" step="any" type="number"> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-06T11:37:56.733

`can we do this using data annotations as I am using MVC4 razor ?`

不，据我了解您的问题，不显眼的验证只会显示错误。最简单的方法是使用 jquery 插件：

[屏蔽输入插件](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-06T12:44:01.983

这是允许您仅输入数字的javascript。

订阅`onkeypress`文本框的事件。

```
@Html.TextBoxFor(m=>m.Phone,new { @onkeypress="OnlyNumeric(this);"}) 
```

这是它的javascript：

```
<script type="text/javascript">
function OnlyNumeric(e) {
            if ((e.which < 48 || e.which > 57)) {
                if (e.which == 8 || e.which == 46 || e.which == 0) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
</script> 
```

希望它可以帮助你。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-06T12:24:06.113

也许您可以使用 [Integer] 数据注释（如果您使用 DataAnnotationsExtensions [http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)）。但是，这只会检查值是否为整数，而不检查是否已填写（因此您可能还需要 [Required] 属性）。

如果您启用不显眼的验证，它将在客户端验证它，但您还应该在您的 POST 操作中使用 Modelstate.Valid 来拒绝它，以防人们禁用了 Javascript。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-01T06:26:28.120

嗨试试下面的......

```
<div class="editor-field">
  <%: Html.TextBoxFor(m => m.UserName, new {onkeydown="return ValidateNumber(event);" })%>
  <%: Html.ValidationMessageFor(m => m.UserName) %>
</div> 
```

脚本

```
<script type="text/javascript">
   function ValidateNumber(e) {
       var evt = (e) ? e : window.event;
       var charCode = (evt.keyCode) ? evt.keyCode : evt.which;
       if (charCode > 31 && (charCode < 48 || charCode > 57)) {
           return false;
       }
       return true;
   }; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-06T11:43:24.037

`DataType`有第二个构造函数，它接受一个字符串。但是，在内部，这实际上与使用`UIHint`属性相同。

`DataType`由于枚举是 .NET 框架的一部分，因此无法添加新的核心 DataType 。您可以做的最接近的事情是创建一个继承自`DataTypeAttribute`. 然后，您可以使用自己的`DataType`枚举添加一个新的构造函数。

```
public NewDataTypeAttribute(DataType dataType) : base(dataType)
 { }

public NewDataTypeAttribute(NewDataType newDataType) : base (newDataType.ToString(); 
```

你也可以通过[这个](http://www.techrepublic.com/article/use-the-advantages-of-custom-attributes-in-your-c-applications/6175490)链接。但我会建议你使用 Jquery 来做同样的事情。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-13T10:29:24.320

<input type="number" @bind="Quantity" class="txt2" />

使用 type="number"

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-17T09:47:55.923

```
@Html.TextBoxFor(x => x.MobileNo, new { @class = "digit" , @maxlength = "10"})

@section Scripts 
{
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/cssjqryUi")

    <script type="text/javascript">
         $(".digit").keypress(function (e) {
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) 
            {
                $("#errormsg").html("Digits Only").show().fadeOut("slow");
                return false;
            }
         });
    </script>
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-12-08T13:25:35.280

```
function NumValidate(e) {
    var evt = (e) ? e : window.event;
    var charCode = (evt.keyCode) ? evt.keyCode : evt.which;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        alert('Only Number ');
        return false;
    }    return true;
}  function NumValidateWithDecimal(e) {

var evt = (e) ? e : window.event;
var charCode = (evt.keyCode) ? evt.keyCode : evt.which;

if (!(charCode == 8 || charCode == 46 || charCode == 110 || charCode == 13 || charCode == 9) && (charCode < 48 || charCode > 57)) {
    alert('Only Number With desimal e.g.: 0.0');
    return false;
}
else {
    return true;
} } function onlyAlphabets(e) {
try {
    if (window.event) {
        var charCode = window.event.keyCode;
    }
    else if (e) {
        var charCode = e.which;
    }
    else { return true; }

    if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123) || (charCode == 46) || (charCode == 32))
        return true;
    else
        alert("Only text And White Space And . Allow");
    return false;

}
catch (err) {
    alert(err.Description);
}} function checkAlphaNumeric(e) {

if (window.event) {
    var charCode = window.event.keyCode;
}
else if (e) {
    var charCode = e.which;
}
else { return true; }

if ((charCode >= 48 && charCode <= 57) || (charCode >= 65 && charCode <= 90) || (charCode == 32) || (charCode >= 97 && charCode <= 122)) {
    return true;
} else {
    alert('Only Text And Number');
    return false;
}} 
```

# android - 滚动我的视图以在打开键盘时显示所有 editText

> ID：14727981
> 
> 赞同：1
> 
> 时间：2013-02-06T11:29:04.603
> 
> 标签：android, android-softkeyboard

我在滚动视图中有四个文本视图，我在打开键盘的情况下开始我的活动那？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:36:04.260

您必须使用 fullScroll 功能：

```
scrollView.fullScroll(ScrollView.FOCUS_DOWN); 
```

如果您需要专注于特定视图，请尝试以下操作：

```
View v = findViewById(R.id.textView1);
v.setFocusable(true);
v.setFocusableInTouchMode(true);
v.requestFocus(); 
```

# sql - sql根据最新的外键日期字段选择单行

> ID：14727986
> 
> 赞同：0
> 
> 时间：2013-02-06T11:29:22.893
> 
> 标签：sql, hibernate

我有两个 sql 表，`alarmMessage`并且`coordinates`. `alarmMessage`表具有表的外键字段`coordinates`。`alarmMessage`我想从其坐标具有最新（最大）gpsDate 字段的表中检索单行。

报警信息：

```
CREATE TABLE alarmmessage
(
  alarmmessageid bigint NOT NULL,
  mtstrackid character varying(40),
  coordinatesid bigint,
  totaldistance double precision,
  iostatusid bigint,
  alarmstatus character varying(10),
  totalworkingduration integer,
  maintenanceremainingtime integer,
  isread boolean NOT NULL DEFAULT false,
  CONSTRAINT pk_alarmmessageid PRIMARY KEY (alarmmessageid ),
  CONSTRAINT fk_coordinatesid FOREIGN KEY (coordinatesid)
      REFERENCES coordinates (coordinatesid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fk_iostatus FOREIGN KEY (iostatusid)
      REFERENCES iostatus (iostatusid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fk_mtstrackid FOREIGN KEY (mtstrackid)
      REFERENCES vehicle (mtstrackid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

坐标：

```
CREATE TABLE coordinates
(
  coordinatesid bigint NOT NULL,
  latitude double precision NOT NULL,
  longitude double precision NOT NULL,
  gpsvalid boolean,
  gpsdate timestamp without time zone,
  bearingangle double precision,
  speed double precision,
  mtstrackid character varying(40),
  altitude double precision,
  CONSTRAINT pk_coordinates PRIMARY KEY (coordinatesid )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:36:48.840

您可以使用以下 SQL：

```
SELECT alarmmessage.* FROM alarmmessage
INNER JOIN coordinates ON alarmmessage.coordinatesid = coordinates.coordinatesid
ORDER BY gpsdate DESC
LIMIT 1 
```

# sql-server - 来自应用程序的大型插入 - 性能

> ID：14727988
> 
> 赞同：0
> 
> 时间：2013-02-06T11:29:24.983
> 
> 标签：sql-server

我必须在 .NET 中创建一个自定义工具来迁移数据并清理现有系统。它还做一些其他的事情。

我实际上有一个大约 2000 个用户的表，然后对于每个用户，他们可以拥有从 0 到 9,000 个“客户帐户”的任何内容

然后对于这些用户中的每一个及其帐户，他们将需要将菜单系统插入到该用户和帐户的另一个表中。

所以我必须遍历应用程序中创建的所有这些对象，并执行插入语句。问题是，性能很糟糕。完成插入需要 3.5 小时，每个插入需要大约 3 秒才能完成......非常慢！

通过插入，我确保我不插入重复数据/确保没有任何现有的重复数据，因此我的插入语句：

```
 IF NOT EXISTS (SELECT ID FROM UserWebAccessLevel WHERE UserID = '{0}' AND CustomerID = '{1}' AND MenuID = {2}) BEGIN INSERT INTO [WebAccessLevel] (UserID, CustomerID, MenuID) VALUES ('{0}', '{1}', {2}) END 
```

为每个用户、他们的客户以及在应用程序逻辑中找到的每个菜单项执行此操作....是的，需要很长时间。

我想知道如何更好地提高插入语句的性能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:49:27.600

如果您的表上没有索引，则`SELECT ID FROM...`可能会减慢速度，因为 SQL Server 必须一一查看每条记录并比较`WHERE`子句中的 ID。通过添加包含三个 ID 的索引，SQL Server 将能够（或多或少）在`WHERE`子句指定三个 ID 时立即定位现有记录。

假设您使用的是 SQL Server Management Studio：-

*   右键单击表格，然后单击“设计”。
*   右键单击出现列列表的位置，然后单击“索引/键”。
*   在出现的下一个对话框中，单击添加按钮
*   在右侧的属性列表中，找到名为“列”的属性，然后单击它右侧的框。当您看到省略号按钮（“...”）时，单击它。
*   在出现的下一个对话框中，添加三个 ID 列。

索引不必是唯一的。在“索引/键”对话框中，您可以选择指定它是否应该是唯一的。

我可以建议检查的唯一另一件事是在执行`IF NOT EXISTS...`SQL 的 C#/VB 代码中 - 确保您不是每次都打开和关闭连接。这*真的*会减慢速度！

# jenkins - Jenkins-Testlink 集成 - HTTP 服务器返回意外状态：找到

> ID：14727992
> 
> 赞同：0
> 
> 时间：2013-02-06T11:29:33.313
> 
> 标签：jenkins, integration, testlink

我正在尝试通过 Jenkins 配置将 Jenkins (1.482) 与 TestLink (1.9.4) 连接以检索测试，但是在 Jenkins 中运行作业时，我在控制台日志中收到以下错误。

请注意，Jenkins 托管在网络“gnb”上的 tomcat (linux) 上，而 Testlink 托管在另一个网络“<公司网络名称>”上的 php (linux) 上。当两者都在我的本地主机上（在 Windows 中）时，它运行良好，但是当 Jenkins 和 TestLink 都在不同的网络/主机上时，这种集成不起作用。

运行作业时，我在控制台上收到以下错误：

```
Preparing TestLink client API.
Using TestLink URL: http://<hostname>/mr61_php5/testlink/lib/api/xmlrpc.php

FATAL: Error verifying developer key: HTTP server returned unexpected status: Found
br.eti.kinoshita.testlinkjavaapi.util.TestLinkAPIException: Error verifying developer key: HTTP server returned unexpected status: Found
        at br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:66)
        at br.eti.kinoshita.testlinkjavaapi.TestLinkAPI.(TestLinkAPI.java:162)
        at hudson.plugins.testlink.TestLinkBuilder.getTestLinkSite(TestLinkBuilder.java:244)
        at hudson.plugins.testlink.TestLinkBuilder.perform(TestLinkBuilder.java:134)
        at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
        at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:717)
        at hudson.model.Build$BuildExecution.build(Build.java:199)
        at hudson.model.Build$BuildExecution.doRun(Build.java:160)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)
        at hudson.model.Run.execute(Run.java:1502)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:236)
Caused by: org.apache.xmlrpc.client.XmlRpcHttpTransportException: HTTP server returned unexpected status: Found
        at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.getInputStream(XmlRpcSunHttpTransport.java:94)
        at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:152)
        at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:143)
        at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69)
        at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:56)
        at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167)
        at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158)
        at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147)
        at br.eti.kinoshita.testlinkjavaapi.BaseService.executeXmlRpcCall(BaseService.java:90)
        at br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:62)
        ... 12 more
ERROR: Error communicating with TestLink. Check your TestLink configuration. 
```

我的 Jenkins 全局配置中有以下设置用于 Testlink 安装

```
Name: testlink
URL: http://<host name>/mr61_php5/testlink/lib/api/xmlrpc.php
Developer key: generated from Testlink (Settings->Generate a new key) 
```

如果我错过了什么，你能指出我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-26T09:13:22.677

通常在Testlink文件夹结构中，你提到的路径，不包含xmlrpc.php文件

可能磨损网址：网址：http:///mr61_php5/testlink/lib/api/

正确的 URL 通常是这种格式 .../testlink/lib/api/xmlrpc//xmlrpc.php

请检查正确的 URL，或尝试打开 xmlrpc.php 页面，以便获得文件的正确路径。根据我的假设，它应该有点像这样：

http:///mr61_php5/testlink/lib/api/xmlrpc/xmlrpc.php

![这是 xmlrpc.php 文件中 API 的样子](../Images/acc96e8d2b1215e27d369f301b5a972b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T09:46:45.793

好的答案就我而言，如下所示...

[http://IP:PORT/testlink/lib/api/xmlrpc/v1/xm](http://IP:PORT/testlink/lib/api/xmlrpc/v1/xmlrpc.php) ​​lrpc.php 1.9.11版本testlink

# c++ - 填充 C++ std::map 时丢失字段

> ID：14727996
> 
> 赞同：2
> 
> 时间：2013-02-06T11:29:45.513
> 
> 标签：c++, opencv

我在正确使用 std::map 时遇到问题。该类`Example`是具有 ID、标签、关键点向量和描述符矩阵的类。该类`Examples`是一个映射，用于检索给定其 ID 的示例。这些示例从磁盘上的文件中读取，存储在映射中，然后在以后使用。

即使它在概念上非常简单，我也无法正确填充地图。

我有以下课程：

```
class Example
{
public:
    std::string id;
    std::string label;
    std::vector<cv::KeyPoint> keypoints;
    cv::Mat descriptors;

    Example(std::string id_, std::string label_)
        : id(id_), label(label_)
    {
        // ... nothing ...
    }

    string to_string() const
    {
        stringstream ss;
        ss << "@" << id
        << " (" << label << ")"
        << " - #keypoints " << keypoints.size()
        << ", descr " << descriptors.rows << " x " << descriptors.cols;
        return ss.str();
    } // to_string

}; // class Example

ostream& operator <<(ostream & out, const Example &ex)
{
    out << ex.to_string();
    return out;
} // operator << 
```

和这个：

```
 // OLD: class Examples : public std::map<std::string, Example*> {
    class Examples {
    // New line after Martini's comment
    std::map<std::string, Example*> _map;
    [...]   
    void fill() {
       // create an example
       Example *example = new Example(id, label); 

       // inputstream in

       // Read all the keypoints
       cv::KeyPoint p;
       for(int i=0; ... ) {
            in.read(reinterpret_cast<char *>(&p), sizeof(cv::KeyPoint));
            example->keypoints.push_back(p); // push_back copies p
       } // for 

       // ... misc code

       cv::Mat descr(n_keypoints, d_size, cv_type, cv::Scalar(1));
       // ... read Mat from inputstream in, then assign it to the example
       example->descriptors = descr;

       // SEE THE OUTPUT BELOW
       std::cout << "INSERT THIS: " << (*example) << std::endl;
       _map.insert(std::pair<string,Example*>(id, example));
       std::cout << "READ THIS: " << *(get_example(id)) << std::endl;

       // ... other code
    } // fill

    // Code modified after Martini's comment.
    Example* get_example(const std::string &id) const {
        std::map<std::string, Example*>::const_iterator it = _map.find(id);
        if( it == _map.end()) {
            // ... manage error
            // ... then exit
        } // if
        return it->second;
    } // get_example

} // class Examples 
```

插入/获取行的输出是：

```
 INSERT THIS: @122225084 (label) - #keypoints 711, descr 711 x 128
 READ THIS: @122225084 (label) - #keypoints 0, descr 0 x 0 
```

在插入中，我有一个指向具有 711 个关键点和 711x128 描述符矩阵的示例的指针。如果我在插入后立即使用其 ID 读取示例，我会得到一个指向具有 0 个关键点和一个空矩阵的示例的指针。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:19:25.670

查看您的代码，一种可能的解释是您已经在地图中拥有具有相同键的元素。在添加对象之前和之后（类似这样）诊断指针的所有打印值：

```
std::cout << "INSERT THIS: " << (void *)example << " " << (*example) << std::endl;
_map.insert(std::pair<string,Example*>(id, example));
std::cout << "READ THIS: " << (void *)get_example(id) << " " << *(get_example(id)) << std::endl; 
```

下一个或另一种方法是检查插入的结果：

```
if( !_map.insert(std::pair<string,Example*>(id, example)).second ) 
    std::cout << "ERROR: example:" << id << " is already there"; 
```

如果你想无条件地覆盖元素，你可以使用 oprator[]：

```
_map[ id ] = example; 
```

如果真的有重复，你会得到内存泄漏（无论如何你都会得到它）所以我强烈建议使用智能指针在你的地图中存储数据。

# iphone - 录制视频时收到内存警告

> ID：14727997
> 
> 赞同：2
> 
> 时间：2013-02-06T11:29:45.827
> 
> 标签：iphone, ios, objective-c, xcode

我为 ipad 制作了一个包含图像拖动和视频录制的应用程序。

它会在录制开始时截取屏幕截图，然后通过附加它们来制作电影。

当我录制 5 到 10 秒的视频时，它工作正常。但是当我尝试录制 1 分钟或更长时间的视频时，它会崩溃并`"Received memory warning"`输入日志。

我使用了以下代码；

```
- (IBAction)btnRecording_Pressed:(id)sender
{
    if ([recordButton.titleLabel.text isEqualToString:@"Start Recording"]) {
        backButton.enabled = NO;
        [recordButton setTitle:@"Stop Recording" forState:UIControlStateNormal];
        fileIndex = 0;
        recTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/5.0 target:self selector:@selector(startFrameCapture) userInfo:nil repeats:YES];
        [recTimer retain];
        [self startRecording];
    }else{
        [recordButton setTitle:@"Start Recording" forState:UIControlStateNormal];
        [recTimer invalidate];
        [recTimer release];
        [self stopRecording];
        [self getFileName];
    }
  }

-(void)startFrameCapture
{

    fileIndex++;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Screenshot%d.jpg",fileIndex]];
    [self performSelectorInBackground:@selector(newThread:) withObject:documentsDirectory];

}

-(void)newThread:(NSString *)frameName{

    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
    else
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

    viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    imageData = UIImageJPEGRepresentation(viewImage, 1.0);
    [imageData writeToFile:frameName atomically:YES];

}

- (void) startRecording{
    if([recorder isRecording]){
        NSLog(@"Stopped Recording");
        [self stopRecording];
    }else{

        NSLog(@"Started Recording");
        [self prepareRecorderNow];
        [recorder record];
    }
}

- (void) stopRecording{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    if([recorder isRecording]){
        [recorder stop];
        [recorder release];
        recorder = nil;
    }
    [pool drain];
}

-(void)prepareRecorderNow{

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100] forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

    [recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    // Create a new dated file

    [recorderFilePath release];
    recorderFilePath = [[NSString stringWithFormat:@"%@/deformed.caf", DOCUMENTS_FOLDER] retain];

    NSURL *url = [NSURL fileURLWithPath:recorderFilePath];
    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    [recordSetting release];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        [alert release];
        return;
    }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];
        [cantRecordAlert release];
        return;
    }
    NSLog(@"Not Over Man");

    [pool drain];
} 
```

可能是什么问题？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:44:53.890

在捕获图片的情况下我遇到了类似的问题，实际上，我已经看到了占用大部分内存的**NOT RELEASED UIImage objects**的问题，这是一个你可以尝试的修复

```
-(void)newThread:(NSString *)frameName
{
 UIImage *viewImage=nil;
 viewImage=[[UIImage alloc] init];
 if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
 else
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

    viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    imageData = UIImageJPEGRepresentation(viewImage, 1.0);
    [imageData writeToFile:frameName atomically:YES];
    [viewImage release];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:30:41.790

您每秒创建 5 次图像上下文。这可能是问题所在。

尝试通过将 UIGraphicsImageContext 保存为 ivar 或属性来重用它。