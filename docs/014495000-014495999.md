# StackOverflow 问答 14495000-14495999

# javascript - 如何使用javascript从第n个子窗口调用根父函数？

> ID：14495003
> 
> 赞同：0
> 
> 时间：2013-01-24T06:08:23.937
> 
> 标签：javascript

那里。假设我不知道 window.showModalDialog 会打开多少子窗口。如果孩子和父母之间只有1个深度，那么使用javascript调用父母的函数会很容易。但是我必须打开一个子窗口，然后从那个子窗口到另一个子窗口，然后再打开一个。我说不出有多少深度。现在，从最后一个子窗口，我如何调用根父级的函数？有人有什么想法吗？

“根父窗口”->子窗口->子窗口->子窗口........第n个子窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:31:02.723

我想我们在这里谈论递归。如果我们知道必须从根窗口调用的函数名，那么我们可以执行以下操作：

```
<script type="text/javascript">
    function callRootFunction(wnd,funcName){
        if(wnd.opener)
            callRootFunction(wnd.opener,funcName);
        else
            wnd[funcName].call(this);
    }
</script> 
```

此脚本必须在子窗口中，并且可以从任何您可以调用的窗口中

```
callRootFunction(window,'theRootFunction'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T10:31:22.457

如果你想调用最顶层的窗口，你可以调用它

窗口.top.abc(); //abc() 是最顶层窗口中的函数。

# ios - Gamecenter 沙盒：我想在 ios6 中禁用 gamecenter 中的自动匹配玩家

> ID：14495010
> 
> 赞同：1
> 
> 时间：2013-01-24T06:08:41.163
> 
> 标签：ios, objective-c, iphone, game-center

我正在使用 gamecenter 创建一个游戏，现在它是一个回合制游戏，我正在邀请玩家参加比赛。最小值为 2，最大值为 7。它在 ios5 中运行良好，但是当我在 ios6 中运行应用程序时，我只邀请 2 名玩家，但它在 sanbox 中自动运行多达 7 名玩家。

邀请玩家的方法没有被弃用，如下：

```
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController {
    if (!gameCenterAvailable) return;               

    presentingViewController = viewController;

    GKMatchRequest *request = [[GKMatchRequest alloc] init]; 
    request.minPlayers = 2;     
    request.maxPlayers = 7;
} 
```

如何将玩家数量限制为仅限受邀玩家而不是自动匹配玩家。我将如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:53:32.650

代码不足以得到想法。

但我在逻辑上给你的想法是你想要最少 2 名球员和最多 7 名球员。

然后你应该使用像 -> min >=2 和 max <= 7 这样的条件，然后玩家的选择将在该条件内。

所以你会得到最小 2 和最大 7 的玩家。

没事吧？

# maven - 如何使 Maven 构建因警告而失败？

> ID：14495014
> 
> 赞同：6
> 
> 时间：2013-01-24T06:09:12.197
> 
> 标签：maven, warnings

有时我的 Maven 构建会发出警告，即 Maven 输出有一行以`[WARNING]`. （我不是在谈论，例如，编译的 Java 代码中的警告，而是，例如，正在创建一个空的 jar 文件的警告。）

在这种情况下，我希望我的构建失败。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:40:27.220

此功能已在[MNG-5091](https://issues.apache.org/jira/browse/MNG-5091)中向 Maven 团队建议。在他们的 JIRA 中投票，让我们等待（这就是我所做的）:)

# php - ajax - 如何在不执行其他代码的情况下执行一组特定的 AJAX 代码

> ID：14495015
> 
> 赞同：1
> 
> 时间：2013-01-24T06:09:17.710
> 
> 标签：php, javascript, ajax

我在一个页面上有 2 组 AJAX 代码，看起来像这样

```
$(document).ready(function(){
$("form#submit").submit(function() {
///Lots of stuff here
});
});

$(document).ready(function() {
    function myrequest(e) {
    ///Lots of stuff here
    });
    $('#fetchFields').click(function(e) {
        e.preventDefault();
        myrequest();
    });
}); 
```

我试图只执行第二个，但我不知道为什么要执行第一个代码。我正在用这个执行第二个代码。

```
<button id="fetchFields">Fetch</button> 
```

此按钮位于表单内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:12:57.310

如果按钮在表单中，它将提交表单，调用您绑定到表单的提交处理程序，如果您不希望按钮提交表单添加`type=button`到它。

```
<button type="button" id="fetchFields">Fetch</button> 
```

# c++ - 什么是指向成员的非重载指针和指向成员的重载指针？

> ID：14495018
> 
> 赞同：3
> 
> 时间：2013-01-24T06:09:37.010
> 
> 标签：c++

我正在阅读 Bjarne Stroustrup 的 C++ 编程语言。我在模板部分遇到了声明。

模板参数可以是常量表达式（§C.5）、具有外部链接的对象或函数的地址（§9.2）或指向成员的非重载指针（§15.5）。

什么是指向成员的非重载指针？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:15:47.933

未重载的指向成员的*指针正如其名称所述——指向尚未重载超类的成员的指针*。这是我刚刚汇总的一个示例，说明了什么可行，什么不可行：

```
#include <iostream>

class Foo {
public:
    virtual void printN() { std::cout << 42; }
};

class Bar : public Foo {
public:
    void printN() { std::cout << 31; }
};

template <typename T, typename C>
class SomeTemplate {
public:
    void PrintData(T d) { C c; (c.*d)(); }
};

int main() {
    SomeTemplate<void (Foo::*) (), Foo> t; // Compiles - '42'
    t.PrintData(&Foo::printN);

    SomeTemplate<void (Bar::*) (), Bar> t; // Compiles - '31'
    t.PrintData(&Bar::printN);

    SomeTemplate<void (Foo::*) (), Bar> t; // Won't compile, can't convert overloaded pointers
    t.PrintData(&Foo::printN);
    return 0;
} 
```

在 PrintData 中，创建了一个类的实例，并在类的实例化版本上取消引用传递的成员指针，从而调用它的底层函数。

模板使这种方法更加灵活，但是我还没有找到在真实情况下使用这样的代码的理由——如果有人能找到我希望得到启发的代码..

# javascript - toGMTstring() 和 toUTCstring() 有什么区别？

> ID：14495019
> 
> 赞同：13
> 
> 时间：2013-01-24T06:09:39.157
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在从[Node.js](http://nodejs.org)应用程序（使用[Mongoose ）将数据保存在](http://mongoosejs.com/docs/api.html)[MongoDB](http://www.mongodb.org/)服务器中。

考虑以下代码：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var schemaObj = new Schema({
    field1: String,
    field2: String,
    Datefield: Date//So on...
});

mongooseDB = mongoose.createConnection('mongodb://myserver:port/DBname');
mongooseDB.on('error', console.error.bind(console, 'error in connection'));

mongooseDB.once('open', function (err) {
        var objmodel = db.model('myschema', schemaObj); 
        modelObj.field1 ='value1'; 
        modelObj.Datefield = new Date().toGMTString(); //new Date().toUTCString();
        //So on..
        modelObj.save(function (err) {
            if (err)    
                 //Notify err
            else
                //DO some task after save
        });

    }); 
```

在日期字段中，当我使用“toGMTstring()”或“toUTCstring()”时获取以下值

```
 'Thu, 24 Jan 2013 05:49:04 GMT' 
```

我浏览了以下链接：

*   [toUTCstring()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toUTCString)
*   [toGMTstring()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toGMTString)

**toGMTString 已弃用，不应再使用**

任何人都可以帮助我理解，关于 Node.js，toUTCstring() 和 toGMTstring() 有什么区别？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T06:26:18.367

GMT 和 UTC 是不同的时区，它们分别是[格林威治标准时间](http://en.wikipedia.org/wiki/Greenwich_Mean_Time)和[协调世界](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)时。GMT 是“太阳”时区，而 UTC 是“原子”时区。对于大多数目的，它们本质上是相同的，但是 UTC 更“通用”。

有趣的是，您指向的文档`toUTCString`仍然显示 GMT 输出：

```
var today = new Date();
var UTCstring = today.toUTCString();
// Mon, 03 Jul 2006 21:44:38 GMT 
```

对于应用程序之间的数据交换，我更喜欢使用[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)之类的东西，它使用 UTC 的“Z”后缀：

```
2013-01-16T08:19Z 
```

“Z”令人困惑地代表“祖鲁时间”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T07:44:23.420

主要用于格式化日期和时间（人类可读）。您也可以使用[toLocaleDateString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)

```
var event = new Date(Date.UTC(2012, 11, 20, 3, 0, 0));

var options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };

console.log(event.toLocaleDateString('en-US', options)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T16:39:49.530

据我所知，它们是相同的。并且 MDN 的文档已经声明`toGMTString`已弃用，支持`toUTCString`：

> toGMTString() 已弃用，不应再使用。它的实现只是为了向后兼容；请改用 toUTCString()。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-25T21:36:31.890

供**ISO**使用`toISOString()`

```
var today = new Date();
var ISOstring = today.toISOString();
// 2020-08-03T23:59:58.123Z 
```

# jquery - 使用 jQuery 在同一实例中为多个对象设置动画

> ID：14495020
> 
> 赞同：1
> 
> 时间：2013-01-24T06:09:45.133
> 
> 标签：jquery, jquery-animate

我正在研究以下要求。

1.  将网站的所有部分都放在一个页面上
2.  在一个实例中仅显示一个部分
3.  当用户点击链接访问另一个部分时——具有平滑的滚动效果以到达该部分。

这是我迄今为止所取得的成就 [http://jsfiddle.net/karuna/eqCYE/1/](http://jsfiddle.net/karuna/eqCYE/1/)

**这是我的代码**

**Javascript**

```
$(function(){
    //On page load hide all but the first section
$("#wrapper div[id!=red]").each(function(){
        $(this).addClass("hide");
});   

$("#mainNav a").click( function(){
    var nextSection = $(this).attr("href");
    var currentSection = $("#mainNav a.active").attr("href");

    //If link to current section clicked -- Do NOTHING
    if (currentSection == nextSection){
        return;
    }        

    else{
        //All good to slide to the section

        //Start with assigning active on nav items
        $("#mainNav a").each( function(){
            if($(this).attr("href") == nextSection){
                $(this).addClass("active");
            }
            else{
                $(this).removeClass("active");
            }
        }); 

        //Make the nextSection visible
        $(nextSection).removeClass("hide");

        //Construct an array to compute position of sections on DOM 
        var positions = new Array();
        counter =0;
        $("#mainNav a").each(function(){
            positions[counter] = $(this).attr("href");
            counter++;
        });

        //Function to compute position of an element in an array
        Array.prototype.position = function (s) {
            var i = 0;
            while (i < this.length && this [i] != s) {i++};
            return i < this.length ? i : undefined;
        }

        //If currentSection is below nextSection
        if(positions.position(currentSection) > positions.position(nextSection)){   
            $(nextSection).css("top", "-200px");
            $(currentSection).css ("top", "0px");                      
                   $(nextSection).animate({              
                         top: '0px'
                        }, { queue: false, duration: 1000 } );
                    $(currentSection).animate({              
                         top: "200px"
                        }, { queue: false, duration: 1000 });    

        }
        else if(positions.position(currentSection) < positions.position(nextSection)){  
            $(nextSection).css("top", "200px");
            $(currentSection).css ("top", "0px");                      
                   $(nextSection).animate({      
                         top: '0px'
                        }, { queue: false, duration: 1000 } );
                    $(currentSection).animate({              
                         top: "-200px"
                        }, { queue: false, duration: 1000 });   

        }   
        $(nextSection).css("top", "");
        $(currentSection).css ("top", "");  
        $(currentSection).addClass("hide");
    }       
})
}); 
```

**HTML**

```
<nav id="mainNav">
<a href="#red" class="active">Red</a>
<a href="#blue">Blue</a>
<a href="#green">Green</a>
<a href="#orange">Orange</a>
</nav>

<div id="wrapper">
<div id="red"></div>
    <div id="blue"></div>
    <div id="green"></div>
    <div id="orange"></div>
</div> 
```

**CSS**

```
body{
    width: 100%;
    height: 100%;
}
#mainNav a{
    text-decoration: none;
    color: black;
}
#mainNav a.active{
    color: red;
}
div{
    display: block;
    height: 200px;
    width: 100%;
}
div>div{
    position: relative;
}
#wrapper{
    overflow-y: scroll;
    background: grey;
}   
#red{
    background: red;
}   
#blue{
    background: blue;
}   
#green{
    background: green;
}   
#orange{
    background: orange;
}

.hide{
    display: none;
} 
```

**问题是：**从一个部分滚动到另一个部分时，上一个部分不可见。

谁能帮我弄清楚**为什么两个动画功能不能同时执行**。我在他们两个上都添加了“队列：假”！

# xpages - 从 web 刷新笔记 uiview

> ID：14495021
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:09:48.423
> 
> 标签：xpages, xpages-ssjs

Lotus notes 文档是在浏览器中从注释视图中打开的。这是使用 xpage 打开的，在保存并退出后会自动刷新 uiview 以显示后端更改。

任何想法如何做到这一点？

该应用程序在 8.5.2 客户端上运行，仅在浏览器中打开了少量文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:18:30.137

您的 Save 操作**可以**调用（后端）view.refresh() 方法，但不建议这样做。这会导致严重的性能问题（所有 http 线程上的信号量锁定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:39:23.780

正如您的一个评论中所说，它是由一个新标签打开的。事实上，这使它更容易一些。当您可以通过调用 window.open() 创建模拟文档打开的客户端操作时，您可以调用其父级（您的 window.open 源自的页面）来执行某些操作。

像 window.opener.document.getElementById() 之类的东西（你必须自己用谷歌搜索正确的语法）。

这将使您有机会在关闭子浏览器窗口之前对您的视图调用部分刷新。

# jquery - div中闪烁的图片

> ID：14495027
> 
> 赞同：0
> 
> 时间：2013-01-24T06:10:07.480
> 
> 标签：jquery, ajax, html, refresh

我在一个php页面上有一个div，它每10秒自动加载一个php页面，代码如下：

```
 $(document).ready(function () {

     var auto_refresh = setInterval(function () {

         $.ajax({
             type: 'GET',
             url: 're.php',
             data: {
                 get_param: 'value'
             },
             success: function (data) {
                 var names = data
                 if (yn != 0) $('#content').html(data);
             }
         });

     }, 10000);

 }); 
```

我的问题是在加载的页面中我有图片。所以每 10 秒其中一些正在闪烁（文本不闪烁）。请注意，有些图片在这 10 秒内发生了变化。我注意到，当 div 更新时，只有这些图片在闪烁……出了什么问题？

# java - 使用 Google Maps API v2 获取行车路线

> ID：14495030
> 
> 赞同：55
> 
> 时间：2013-01-24T06:10:16.313
> 
> 标签：java, android, google-maps, google-maps-android-api-2, directions

我正在尝试获取两个位置之间的行驶方向：

```
LatLng(12.917745600000000000,77.623788300000000000)
LatLng(12.842056800000000000,7.663096499999940000) 
```

我尝试过的代码：

```
Polyline line = mMap.addPolyline(new PolylineOptions().
    add(new LatLng(12.917745600000000000,77.623788300000000000),
    new LatLng(12.842056800000000000,7.663096499999940000))
       .width(5).color(Color.RED)); 
```

但这在两点之间画了一条直线。

是否有任何其他方法/方式来获取这两点之间的行车路线。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-02-24T16:36:11.773

我刚刚在 Android 上发布了最新的 Google Maps Direction API 库 [https://github.com/akexorcist/Android-GoogleDirectionLibrary](https://github.com/akexorcist/Android-GoogleDirectionLibrary)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-23T04:10:52.990

这就是我正在使用的，

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr="+latitude_cur+","+longitude_cur+"&daddr="+latitude+","+longitude));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addCategory(Intent.CATEGORY_LAUNCHER );     
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-08T13:06:30.327

您还可以尝试以下旨在帮助使用该 api 的项目。它在这里：[https ://github.com/MathiasSeguy-Android2EE/GDirectionsApiUtils](https://github.com/MathiasSeguy-Android2EE/GDirectionsApiUtils)

它是如何工作的，绝对简单：

```
public class MainActivity extends ActionBarActivity implements DCACallBack{
/**
 * Get the Google Direction between mDevice location and the touched location using the     Walk
 * @param point
 */
private void getDirections(LatLng point) {
     GDirectionsApiUtils.getDirection(this, mDeviceLatlong, point,     GDirectionsApiUtils.MODE_WALKING);
}

/*
 * The callback
 * When the direction is built from the google server and parsed, this method is called and give you the expected direction
 */
@Override
public void onDirectionLoaded(List<GDirection> directions) {        
    // Display the direction or use the DirectionsApiUtils
    for(GDirection direction:directions) {
        Log.e("MainActivity", "onDirectionLoaded : Draw GDirections Called with path " + directions);
        GDirectionsApiUtils.drawGDirection(direction, mMap);
    }
} 
```

# c# - 将多边形转换为椭圆

> ID：14495036
> 
> 赞同：0
> 
> 时间：2013-01-24T06:10:49.870
> 
> 标签：c#, wpf, polygon, ellipse

**背景：**

我有一组通过凸包算法运行的点，然后将返回的这些点绘制为屏幕上的多边形。

**目标：**

我想将多边形“平滑”成椭圆/椭圆形。

有没有一种简单的方法可以做到这一点，或者有一个算法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:06:38.430

得到了一些有用的东西...

因为我从一组点绘制多边形，所以宽度/高度/边界设置不正确（始终为 0，不确定是不是我的错？），但是，我确实有构成多边形的点。

我决定做的是遍历点，得到最左边的 x、最右边的 x、最上面的 y 和最下面的 y。这让我可以计算出绘制椭圆的宽度、高度和位置。

结果是这样的： ![在此处输入图像描述](../Images/80f8d1cec1cae2004970cd1bf136e76d.png)

感谢克莱门斯的帮助:)

如果有更好的方法，请告诉我。

# haskell - xmlgen：在 Haskell 中生成混合内容的 XML 节点（即带有正文和嵌套的 XML 元素）

> ID：14495039
> 
> 赞同：1
> 
> 时间：2013-01-24T06:11:08.303
> 
> 标签：haskell, xml-generation

我正在尝试生成具有混合内容节点（具有正文和子节点）的 XML，如下所示：

```
<person>
some text
<hugo age="24">thingy</hugo>
</person> 
```

我正在使用[xmlgen](http://hackage.haskell.org/package/xmlgen-0.4.0.3)库。

这是我走了多远：

```
import Text.XML.Generator
import qualified Data.ByteString as B

makeElt = xelem "person" $
            xelems $ (xtext "some text" : 
                      (xelem "hugo" (xattr "age" "24" <#> 
                                     xtext "thingy")))

main = do
  let elt = makeElt
  B.putStr . xrender $ doc defaultDocInfo elt 
```

这不会编译，GHC 的错误消息对我来说是无法理解的（作为初学者）：

```
$ runhaskell test.hs

test.hs:6:24:
    Couldn't match type `Elem' with `Xml Elem'
    The function `xelem' is applied to two arguments,
    but its type `[Char]
                  -> Text.XML.Generator.MkElemRes [Char] (Xml Attr, Xml Elem)'
    has only one
    In the second argument of `(:)', namely
      `(xelem "hugo" (xattr "age" "24" <#> xtext "thingy"))'
    In the second argument of `($)', namely
      `(xtext "some text"
        : (xelem "hugo" (xattr "age" "24" <#> xtext "thingy")))'

test.hs:6:24:
    Couldn't match type `Xml' with `[]'
    The function `xelem' is applied to two arguments,
    but its type `[Char]
                  -> Text.XML.Generator.MkElemRes [Char] (Xml Attr, Xml Elem)'
    has only one
    In the second argument of `(:)', namely
      `(xelem "hugo" (xattr "age" "24" <#> xtext "thingy"))'
    In the second argument of `($)', namely
      `(xtext "some text"
        : (xelem "hugo" (xattr "age" "24" <#> xtext "thingy")))' 
```

我是否非常接近我需要的结果，或者我应该以不同的方式写这个？

我尝试寻找 xmlgen 库的示例用法，但没有找到我的用例。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:50:35.370

问题在于表达式

```
(xtext "some text" : 
 (xelem "hugo" (xattr "age" "24" <#> 
                xtext "thingy"))) 
```

`:`（以 开头）之后的部分`xelem "hugo"`不是列表。我调试此类问题的好方法是使用 ghci。这就是我最初所做的，ghci 很快就会引导你朝着正确的方向前进：

```
*Text.XML.Generator> :t xtext "some text" : xelem "hugo" (xattr "age" "24" <#> xtext "thingy")

<interactive>:1:21:
    Couldn't match expected type `[Xml Elem]'
                with actual type `Xml Elem'
    In the return type of a call of `xelem'
    In the second argument of `(:)', namely
      `xelem "hugo" (xattr "age" "24" <#> xtext "thingy")'
    In the expression:
      xtext "some text"
      : xelem "hugo" (xattr "age" "24" <#> xtext "thingy") 
```

一个很好的问题是，为什么 GHC 首先会给出如此糟糕的错误信息。问题是结果类型`xelem`被重载，实际上`xelem`有 type `n -> MkElemRes n c`。您尝试在示例中使用的实例化`MkElemRes n c`确实是一种函数类型，因此您示例的这一部分是正确的。但通常`MkElemRes n c`不需要是函数类型，这就是为什么 GHC 抱怨两个参数，它只需要一个（即 type 之一`MkElemRes n c`）。

这是您原始问题的一种解决方案：

```
xelem "person" $ 
   xelems [xtext "some text", xelem "hugo" (xattr "age" "24" <#> xtext "thingy")] 
```

这是一个替代解决方案：

```
xelem "person" $ xtext "some text" <> xelem "hugo" (xattr "age" "24" <#> xtext "thingy") 
```

# java - tomcat server 无法在 STS 中启动服务器和应用程序

> ID：14495040
> 
> 赞同：19
> 
> 时间：2013-01-24T06:11:10.930
> 
> 标签：java, exception, spring-mvc, tomcat7, sts-springsourcetoolsuite

当我运行 Spring MVC 应用程序时，出现此异常并且服务器无法启动。

请帮我解决这个问题。

异常堆栈跟踪：

```
Jan 24, 2013 11:33:59 AM org.apache.catalina.startup.ContextConfig processAnnotationsJar
SEVERE: Unable to process Jar entry [org/springframework/instrument/classloading/oc4j/package-info.class] from Jar [jar:file:/D:/works/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dailyship/WEB-INF/lib/spring-context-3.1.0.RELEASE.jar!/] for annotations
java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1400(ZipFile.java:56)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:677)
    at java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:413)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
    at java.io.DataInputStream.readInt(DataInputStream.java:387)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readID(ClassParser.java:237)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:114)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2104)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1980)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1946)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1931)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1325)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T06:55:13.310

jar 文件可能由于 Internet 连接不良而损坏。尝试删除`C:\Users\[username]\.m2\repository`文件夹的内容。然后右键单击您的项目，选择**Maven**，**Update Project**，选中**Force Update of Snapshots/Releases**。如果您确定只有一个 Jar 文件有问题，那么您只需删除其文件夹即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-07T08:26:38.090

*   关闭你的 IDE
*   删除`.jar`位于 `(workspace_folder_location)/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dailyship/WEB-INF/lib/spring-context-3.1.0.RELEASE.jar`
*   打开你的IDE

如果您使用 Maven：

*   右键单击项目
*   Maven`->`更新项目`->`检查强制更新快照/发布

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-26T13:33:33.643

正如新手[提到](https://stackoverflow.com/questions/14495040/tomcat-server-fails-to-start-the-server-and-application-in-sts#14495552)的清理本地 maven 存储库，您可以通过执行来完成`mvn dependency:purge-local-repository`，这将从 local-repo 中删除 jar 并重新下载它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-19T04:25:01.573

在 Mac 操作系统中。导航到`~/.m2/`并运行 `rm -rf repository/`

然后重新导入所有 Maven 依赖项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T08:44:26.997

由于 pom.xml 文件中可用的依赖项，我遇到了同样的问题，其中一些已损坏。我通过简单地删除 .m2/repository 文件夹内容并按照以下步骤解决该问题。

1.  运行为-> Maven clean。

2.  运行为 -> Maven 安装。（使用好的互联网提供商）

3.  maven -> 更新项目。

它也会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-01T10:21:11.723

这对我有用：

删除本地 repo 目录中导致错误的所有文件。做 maven clean, maven install 和 re-deploy your files in server. 而已。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-23T11:18:21.050

上面的答案对我没有帮助。但是在重新启动运行 Spring MVC 应用程序的**PC后，问题就消失了。**对于那些将面临同样问题的人来说，它可能会有所帮助。

# html - 更改浏览器分辨率时的设计问题

> ID：14495056
> 
> 赞同：0
> 
> 时间：2013-01-24T06:12:39.937
> 
> 标签：html, css

我正在这个网站[http://zap3d.com](http://zap3d.com)上工作，当我更改浏览器窗口的大小时，顶部菜单栏的一些问题菜单背景被切断。

![](../Images/b29cbc8dc0e15a7ffbff721b033051cc.png)

请帮忙。

我将此 CSS 用于顶部菜单：-

```
 .nav_bar {
    float: right;
    width: 100%;
    background: url(/content/img/top-menu-bg.gif);
    height: 30px;
    background-size: contain;
    }
.cen_div {
width: 1000px;
margin: 0 auto;
}
.nav_bar .nav {
list-style: none outside none;
float: right;
margin: 0;
padding: 0 0 0 20px;
position: relative;
}
.nav_bar .nav li {
float: left;
margin: 3px 7px;
} 
```

和 html :-

```
<div class="nav_bar">
    <div class="cen_div">
        <ul class="nav">
            <li><a href="/Home/Index">Home</a></li>
            <li><a href="/Account/Registration/">Sign Up</a></li>   
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:42:36.680

您需要在较小的窗口上设置 `min-width: 1040px;`并`body`使其`nav_bar`成为可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:15:37.713

你只需要重复背景：

```
.nav_bar {
    ....
    background: url(/content/img/top-menu-bg.gif) repeat-x ;
    ...
} 
```

# android - 我无法将文件推送到我的 SD 卡

> ID：14495057
> 
> 赞同：-7
> 
> 时间：2013-01-24T06:12:41.593
> 
> 标签：android, avd, ddms

请告诉我步骤 - 如何进入 AVD 管理器并选择您的 AVD，然后单击编辑并在硬件中添加 SDCard 支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:57:10.763

步骤1：

选择窗口并转到 Android 虚拟设备管理器

![在此处输入图像描述](../Images/76c0e2c3adbfbc4efda9594a28ee70e9.png)

下一步编辑或创建 创建 go for create New

![在此处输入图像描述](../Images/cbfeb5bec002e0727f0f9d91c869b823.png)

它将出现窗口..对于编辑选择avd并单击编辑并分配sd卡支持选项..

![在此处输入图像描述](../Images/b34e3a364519db61cf5b4f3482a76757.png)

![在此处输入图像描述](../Images/6c575a7f9ba7427d92c67dfb95cd2228.png) 要选择推送 sd 卡，请转到 DDMS 选项单击文件资源管理器

```
c:\android-sdk\platform-tools\>abd remount 
```

按照下面的链接

[关联](http://daraizetechnologies.blogspot.in/2011/06/how-to-mount-sdcard-in-android-emulator.html)

# ruby-on-rails - Rails 3.2 身份验证返回无效的用户名/密码组合

> ID：14495058
> 
> 赞同：0
> 
> 时间：2013-01-24T06:12:47.333
> 
> 标签：ruby-on-rails, ruby, security, authentication, login

嗨，我最近观看了 railscast #270（Rails 3.1 中的身份验证）。我正在运行 3.2 Rails atm。当我使用应用程序注册时，一切似乎都正常工作，但是当我尝试使用完全相同的用户名和密码登录时，我被拒绝了。代码如下：

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  username        :string(255)
#  password_digest :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
# 
```

用户.rb

```
 class User < ActiveRecord::Base
  attr_accessible :username, :password, :password_confirmation

  # validations

  has_secure_password

  end 
```

SessionsHelper.rb

```
module SessionsHelper
    def signed_in?
    !current_user.nil?
  end
end 
```

应用程序助手.rb

```
module ApplicationHelper
    def current_user
        @current_user ||= User.find(session[:user_id]) if session[:user_id]
    end
end 
```

users_controller.rb

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
        redirect_to root_path, :flash => { :success => "Signed Up!" }
    else
        render :new
    end
  end
end 
```

session_controller.rb

```
class SessionsController < ApplicationController
  def new
  end

  def create
    user = User.find_by_username(params[:username])
    if user and user.authenticate(params[:password])
        session[:user_id] = user.id
        redirect_to root_path, :flash => { :success => "Signed In! " }
    else
        flash.now[:error] = 'Invalid email/password combination'
        render :new
    end
  end

  def destroy
    session[:user_id] = nil
    redirect_to root_path, :flash => { :success => "Signed Out!" }
  end
end 
```

并且表单只是带有错误消息的基本表单，如果出现问题，则会显示一条闪现消息。如果我没有提供任何代码或信息，请告诉我。提前致谢 ：）

更新 - rails 服务器日志（只有我能找到的日志）

```
Rendered /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)

Started GET "/assets/pages.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /pages.js - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /jquery.js - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/custom.css?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /custom.css - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /jquery_ujs.js - 304 Not Modified (9ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /sessions.js - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /application.js - 304 Not Modified (4ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/bootstrap" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /bootstrap - 404 Not Found (4ms)

ActionController::RoutingError (No route matches [GET] "/assets/bootstrap"):
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.11) lib/rails/engine.rb:479:in `call'
  railties (3.2.11) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)

Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /users.js - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/blueprint/print.css?body=1" for 127.0.0.1 at 2013-01-24 17:18:48 +1100
Served asset /blueprint/print.css - 304 Not Modified (0ms)
[2013-01-24 17:18:48] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

# html - 响应式布局上的 Twitter Bootstrap 平板电脑尺寸 1024 而不是 979

> ID：14495070
> 
> 赞同：3
> 
> 时间：2013-01-24T06:13:49.260
> 
> 标签：html, twitter-bootstrap, responsive-design

我不明白为什么 Twitter Bootstrap 将平板电脑的尺寸从 768 考虑到 979，而不是从 768 到 1024（iPad）。问题是，如果客户要求为平板电脑定制设计，平板电脑设计将不会在 iPad 上以横向模式显示。

另外，如果我有一个带有侧边栏（span9 + span3）的内容，如果侧边栏是“隐藏平板电脑”，则内容不会扩展，实际上它会具有相同的大小，我必须覆盖引导程序跨度尺寸以实现所需布局。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:42:27.350

1）我认为这里的想法是，一般来说，如果有人请求的页面超过 980 像素，则它更有可能来自台式计算机而不是来自 ipad。你也可以让你的页面 ipad 和 web 对这些宽度友好:)。

如果您必须为横向 ipad 和 web 设计不同的设计，则可以选择为屏幕在 980 到 1024px 之间时编写一堆自定义 css。

```
@media (min-width 980px) and (max-width: 1024px) {
  //my custom css for ipad landscape
} 
```

2）你做对了。一切`.hidden-tablet`就绪`display: none;`

```
@media (min-width: 768px) and (max-width: 979px) {
  // ... some other code

  .hidden-tablet {
    display: none !important;
  }
} 
```

它不做任何其他类型的调整大小，所以这取决于你来处理媒体查询。

# android - 调用 getXXArrayRegion( ) 时 JNI 位图大小超出 VM 预算

> ID：14495071
> 
> 赞同：0
> 
> 时间：2013-01-24T06:13:50.960
> 
> 标签：android, jvm, java-native-interface

我将位图的颜色数组传递给 JNI 层，当我尝试调用 getIntArrayResion 方法时，遇到“位图大小超出 VM 预算”错误。有人知道如何处理这个问题吗？

```
JNIEXPORT jint JNICALL Java_com_example_happy_MainActivity_Parsing( JNIEnv* env,
    jintArray bmapColorArray)
{
    int length = env->GetArrayLength(bmapColorArray);
    int * buffer;
    buffer = new int[length];
    env->GetIntArrayRegion(bmapColorArray,0,length, buffer);

    return 0;
} 
```

顺便说一句，我可以直接使用 bmapColorArray 而不是将它们复制到缓冲区。我不知道我为什么要复制它，它真的很费时间和空间。我只是按照 Android 开发教程做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:39:10.703

您的应用程序内存不足。你需要少用。如果您使用了大量位图，请确保在完成后回收它们 - 垃圾收集器可能需要很长时间才能运行和清理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:42:46.100

在将位图传递给 JNi 之前调整它的大小然后通过实际上你的堆大小超出了导致 VM 超出预算并导致内存不足的定义限制错误调整位图大小编码器片段如下

```
 /** getResizedBitmap method is used to Resized the Image according to custom width and height 
      * @param image
      * @param newHeight (new desired height)
      * @param newWidth (new desired Width)
      * @return image (new resized image)
      * */
    public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
        int width = image.getWidth();
        int height = image.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // create a matrix for the manipulation
        Matrix matrix = new Matrix();
        // resize the bit map
        matrix.postScale(scaleWidth, scaleHeight);
        // recreate the new Bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
                matrix, false);
        return resizedBitmap;
    } 
```

# python-2.7 - 从 python 脚本连续运行系统命令的问题？

> ID：14495073
> 
> 赞同：0
> 
> 时间：2013-01-24T06:14:18.073
> 
> 标签：python-2.7

我有一个 python 脚本，它不断检查 snmpd 和一个正在运行的套接字脚本。如果其中任何一个被杀死，它应该杀死两者并开始新的会话。问题是一旦套接字运行它等待连接很长时间，如果有人杀死 snmpd 它没有开始（认为它不会循环回来）。可能是什么原因和可能的解决方案。？代码可以进行任何优化吗？

```
def terminator():
    i=0
    j=0
    os.system("ps -eaf|grep snmpd|cut -d \" \" -f7 >snmpd_pid.txt")
    os.system("ps -eaf|grep iperf|cut -d \" \" -f7 >iperf_pid.txt")
    os.system("ps -eaf|grep sock_bg.py|cut -d \" \" -f7 >script_pid.txt")
    snmpd_pids = tuple(line.strip() for line in open('snmpd_pid.txt'))
    iperf_pids = tuple(line.strip() for line in open('iperf_pid.txt'))
    script_pids = tuple(line.strip() for line in open('script_pid.txt'))
    k1 = len(snmpd_pids) - 2
    k2 = len(iperf_pids) - 2
    k3 = len(script_pids) - 2
    if (k1 == 0 or k3 == 0):
        for i in range(k1):
            cmd = 'kill -9 %s' %(snmpd_pids[i])
            os.system(cmd)
        for i in range(k2):
            cmd = 'kill -9 %s' %(iperf_pids[i])
            os.system(cmd)
        for i in range(k3):
            cmd = 'kill -9 %s' %(script_pids[i])
            os.system(cmd)
    os.system("/usr/local/sbin/snmpd -f -L -d -p 9999")
    os.system("python /home/maxuser/utils/python-bg/sock_bg.py")
try:
    terminator()
except:
    print 'an exception occured' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:00:25.383

我找到了答案，它是获取提示的问题。我使用了 screen -d -m 选项，现在能够得到预期的结果。

```
os.system("screen -d -m /usr/local/sbin/snmpd -f -L -d -p 9999 &")
os.system("screen -d -m python /home/maxuser/utils/python-bg/sock_bg.py &") 
```

这些系统命令也需要在 if 条件内。

# php - 下载的文件保存为 0kb 并损坏

> ID：14495074
> 
> 赞同：2
> 
> 时间：2013-01-24T06:14:29.337
> 
> 标签：php, file, download

当我下载以 0kb 保存的任何文件时，下载脚本出现问题。有任何想法吗？这是我的 PHP 脚本

```
<?php
$file = $_GET['fname'];
$fullpath = get_bloginfo('template_url')."/application/display/1358947404.pdf";
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($fullpath));
header('Expires: 0');
header('Cache-Control: must-revalidate');
ob_clean();
flush();
readfile($fullpath);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:21:24.670

请同时添加内容长度标头。

请试试这个： -

```
<?php
$file = $_GET['fname'];

$fullpath = get_bloginfo('template_url')."/application/display/1358947404.pdf";

$headers = get_headers($fullpath, 1);// use file absolute path here
$fsize = $headers['Content-Length'];

header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($fullpath));
header('Expires: 0');
header('Cache-Control: must-revalidate');
header("Content-Length: " . $fsize);
ob_clean();
flush();
readfile($fullpath);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:30:32.163

试试下面的代码，希望对你有帮助。

我已经在我的本地主机中对此进行了测试。

```
$file = $_GET['fname'];

$fullpath = get_bloginfo('template_url')."/application/display/1358947404.pdf";
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($fullpath));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($fullpath));
ob_clean();
flush();
readfile($fullpath); 
```

# html - 如何对齐div底部的文本

> ID：14495076
> 
> 赞同：0
> 
> 时间：2013-01-24T06:14:37.547
> 
> 标签：html, css

假设我有如下两个 div（徽标和管理员）：

```
<body id="main_body">
<div id="logo_area">
<div id="logo">
  <image></image>
</div>
<div id="admin">
  LOG IN
</div>
</div>
</body> 
```

如果我希望管理员在 div 的底部旁边对齐。也就是说，它看起来像这样：

```
--------------------------------------------
IMAGE
                                  LOG IN
-------------------------------------------- 
```

我尝试了以下 CSS，但它不起作用。

```
#main_body {
margin:0px;
}

#logo_area {
background-color: #086A87;
height: 60px;
}

#logo {
padding-left:10px;
float:left;
width:80%;
margin-left:auto;
margin-right:auto;
}

#admin {
bottom:0px;
} 
```

任何人都可以在这里阐明一下吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:18:27.200

添加`position:relative`到`#logo_area`和`position:absolute`到`#admin`

```
#logo_area {
background-color: #086A87;
height: 60px; position:relative
}
#admin {
bottom:0; position:absolute; right:0
} 
```

**[演示](http://jsfiddle.net/GrMPc/1/)**

*[**这是关于绝对位置和相对位置的详细说明**](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:23:28.080

只需添加 float:left; 到登录 CSS

```
#main_body {
margin:0px;
}

#logo_area {
background-color: #086A87;
height: 60px;
}

#logo {
padding-left:10px;
float:left;
width:80%;
margin-left:auto;
margin-right:auto;
}

#admin {
bottom:0px;
float:left;
} 
```

考虑盒子的正确尺寸和里面的所有 div，你设置 width:80%; 那么，对于 logo，剩余的 20% 或更少用于登录，您还需要定义：

```
#admin{
 width: 20%;
} 
```

演示：http: [//jsfiddle.net/CrcGU/](http://jsfiddle.net/CrcGU/)

看来我误解了：只需删除 float:left; 来自 #logo 并添加 float:right; 到登录

```
#logo {
padding-left:10px;
width:80%;
margin-left:auto;
margin-right:auto;
background-color:navy;
}

#admin {
bottom:0px;
float:right;
width:15%;
} 
```

演示：http: [//jsfiddle.net/V6H5x/](http://jsfiddle.net/V6H5x/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:44:42.693

```
<header>
<div id="image">Some image here...</div>
<div class="clear"></div>
<div id="menu">
    <ul>
        <li>Login</li>
        <li>Sign Up</li>
    </ul>
</div> 
```

```
#image {
float:left;}

.clear {
clear:both;}

#menu {
float:right;}

#menu ul li {
display:inline;
margin:0px 10px 0px 0px} 
```

**[演示](http://jsfiddle.net/LMabugay37/T62rW/2/embedded/result/)**

# google-chrome - $(this).remove 在 chrome 中不起作用

> ID：14495079
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:15:05.750
> 
> 标签：google-chrome, jquery

`$(this).remove()`在所有浏览器中都可以正常工作，但在 Chrome 中无法正常工作。我正在使用此功能删除图像，它实际上删除了该特定图像 div，但 chrome 仍显示该图像。如果我最小化窗口然后最大化，chrome 将不会显示删除的图像。

编辑：（取自评论）

html

```
<div class="image_holder"> <img src="img/someimage.png" /> </div> 
```

Javascript

```
$(".image_holder").live("click", function() { $(this).parent.remove(); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:08:44.540

这段代码在我在[这里](http://jsbin.com/iwozaz/2/edit)用 chrome 测试时也有效。

```
$(function()
 {
 $("div.image_holder").click(function()
 {
   $(this).remove();
   //or
   //$(this).hide();
 });
}); 
```

它没有给我任何问题，它是非常基本的方法，您可以`parent()`通过单击父级本身来删除。因为在您的情况下，图像的父级是包含图像的 div 。

# linux-kernel - 为树莓派编写 USB 驱动程序

> ID：14495080
> 
> 赞同：2
> 
> 时间：2013-01-24T06:15:08.713
> 
> 标签：linux-kernel, usb, driver, linux-device-driver, raspberry-pi

我正在尝试为 Raspberry Pi 板编写 USB 设备驱动程序（首先在我的 Ubuntu 桌面上练习）。每当插入两个闪存驱动器时，第二个闪存驱动器的数据将自动复制到第一个闪存驱动器中。每当连接闪存驱动器和打印机时，将自动打印闪存驱动器中特定 PRINT 文件夹中的文件内容。

1）这完全可行吗？

我写了一个小驱动程序，它能够注册我的创见笔式驱动器。在阅读 Linux Device Drivers 3rd Edition（第 3 章）时，我了解到 USB 数据传输所需的文件操作只能从用户空间请求，而不能从内核空间完成（即从我的模块内部/司机）

2）我的理解正确吗？（如果是，那么这个项目就变得不可能了..）

# java - 在Java程序中执行pig命令

> ID：14495082
> 
> 赞同：2
> 
> 时间：2013-01-24T06:15:33.233
> 
> 标签：java, process, apache-pig, runtime.exec

我曾经编写PHP代码来执行pig命令，它运行良好，现在我切换到Java但似乎它不起作用，这是我的代码：

```
String pigCommand = "pig -x local -p ouput=/tmp my_pig_script.pig";

Runtime r = Runtime.getRuntime();
Process p;
int exitVal;

try {
    p = r.exec(pigCommand);
    exitVal = p.waitFor();
    BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = null;

    while((line = br.readLine()) != null) {
        System.out.println(line);
    }
    br.close();

    System.out.println("exitVal: " + exitVal);
    System.out.println("Done"); 
```

如果我直接在控制台中运行那个 pig 命令，它可以工作，如果我用其他 shell 命令替换那个 Pig 命令说“ping www.yahoo.com”，并运行 java 程序，它也可以工作。那么可能是什么问题呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:14:54.163

您应该使用[`PigServer`](http://pig.apache.org/docs/r0.9.1/api/org/apache/pig/PigServer.html)从 java 程序执行 pig 脚本。它更万无一失，更便携。

另请参阅此答案：[https ://stackoverflow.com/a/11299259/373151](https://stackoverflow.com/a/11299259/373151)

# matlab - 在matlab中裁剪人脸

> ID：14495085
> 
> 赞同：0
> 
> 时间：2013-01-24T06:15:42.530
> 
> 标签：matlab, image-processing

我需要一个 Matlab 代码，它可以从人的图像中裁剪人脸。过去 3 天我一直在搜索谷歌，但找不到可以正常工作的代码。有人可以告诉我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:19:18.193

您可能会阅读有关[小波](http://en.wikipedia.org/wiki/Wavelet)的信息，我不相信您“在 Google 上搜索了 3 天”。

[使用 Gabor 滤波器的图像处理](https://stackoverflow.com/questions/7419409/image-processing-using-gabor-filter)

* * *

如果您拥有[视觉工具箱](http://www.mathworks.com/help/vision/examples/face-detection-and-tracking.html)的许可证：

```
% Create a cascade detector object.
faceDetector = vision.CascadeObjectDetector();

% Read a video frame and run the detector.
videoFileReader = vision.VideoFileReader('visionface.avi');
videoFrame      = step(videoFileReader);
bbox            = step(faceDetector, videoFrame);

% Draw the returned bounding box around the detected face.
videoOut = insertObjectAnnotation(videoFrame,'rectangle',bbox,'Face');
figure, imshow(videoOut), title('Detected face'); 
```

上面的代码将输出以下检测。请注意，该算法无法识别 Mathwork 工程师背后图片中的 2 张面孔，也无法识别他右侧 LCD 屏幕上自己的面孔：

![在此处输入图像描述](../Images/fa6c3890976fd63c3f5b73b0d5e486d5.png)

# php - CSS 下拉菜单 - 激活时移动页面上的所有内容

> ID：14495086
> 
> 赞同：0
> 
> 时间：2013-01-24T06:15:51.787
> 
> 标签：php, html, css

我有一个已经在网站上使用多年的导航栏。它工作得很好。现在，我尝试在由 CSS 驱动的导航项之一上添加下拉效果。

这个想法是，当您将鼠标悬停在下面的“下拉菜单”链接上时，您将获得附加菜单选项的垂直列表。

问题是当我将鼠标悬停在下面的“下拉菜单”链接上时，生成的弹出框会抛出它下面的所有内容。它下面的 div 容器中的文本行被换行，横幅广告被向下移动，页面基本上失去了它的形式。

有没有办法让下拉 CSS 框覆盖在现有页面上并且不会移动它下面的所有元素？

我的导航行如下所示：

```
<ul id="navlist">
    <li><a href="">Home</a></li>
    <li><a href="">Products</a></li>        
    <li><a href="">Services</a></li>        
    <li style="float:right"><a href="#">Pull Down Menu</a>
            <ul>
            <li><a href="">Option 1</a></li><br>
            <li><a href="">Option 2</a></li><br>
            <li><a href="">Option 3</a></li><br>
            </ul>
    </li>
</ul>
</div>
//below this I have some other stuff
<div align="center">Here is a line of text about 800 pixles wide</div>
<div align="center">A BANNNER AD GOES HERE</div>
<div align="center">THE BODY OF THE PAGE GOES HERE</div> 
```

然后我的 CSS 看起来像这样：

```
ul#navlist    {
width: 980px; line-height: 2em;
list-style-type: none;
clear: both;}

ul#navlist li { display: inline; }
ul#navlist li a {float: center;}
ul#navlist li a:hover {color: #fff;}

ul#navlist ul {display: none;}
ul#navlist li:hover > ul {display: block;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:19:46.383

虽然 CSS 没问题，但最好重构一下。如果您提供了包含问题的页面的屏幕截图，那就更好了。好的，我有一个解决方案。检查下面的代码，尝试以这种方式重组 CSS 和 HTML，尽管 HTML 是一样的。

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:20:05.663

如果您希望在添加其他内容时页面不向下移动，则需要使用`position: absolute`. 由于这里没有一个确切的例子，我不能给出一个确切的例子来告诉你我的意思。

相反，这里是解释 CSS 定位的资源：

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/) http://www.impressivewebs.com/absolute-position-css/

只是一个快速的免责声明 - 绝对定位可能是你最好的朋友和最大的敌人。确保您进行跨浏览器测试并知道您要完成什么。

只要您的项目是绝对定位并被赋予一个`top`和`left`值，它们就不会影响页面流。

# javascript - Javascript字符串到数组（如果字符串没有任何空格）

> ID：14495087
> 
> 赞同：0
> 
> 时间：2013-01-24T06:15:56.170
> 
> 标签：javascript

我有一个字符串，例如：

```
 var str = 'abcdef'; 
```

我想以数组格式获取它，例如：

```
 var a;
        a[0]=a;
        a[1]=b;  and so on.. 
```

我知道拆分方法，但在这种没有任何空格的字符串的情况下，我如何拆分为单个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:18:06.833

用途：`str.split('')`。`str`这将创建一个具有as 元素的字符的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:19:47.200

你可以像这样访问它，

```
var str='abcdef'; 
alert(str[0]); 
```

或者

```
var str='abcdef'; 
alert(str.charAt(0)); 
```

请参阅以下链接以选择最佳方式。 [http://blog.vjeux.com/2009/javascript/dangerous-bracket-notation-for-strings.html](http://blog.vjeux.com/2009/javascript/dangerous-bracket-notation-for-strings.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:18:26.180

```
var s = "abcdef";
var a;
for (var i = 0; i < s.length; i++) {
    a.push(s.charAt(i));
} 
```

或者

```
 var s = "abcdef";
 var a;
 var a= s.split(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:18:43.213

```
var str="abcdef";
var a=new Array;
for (var x=0; x<str.length; x++) {
    a[x] = str.charAt(x);
}
console.log(a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:27:45.503

尝试使用此代码：-

```
var array = str.split(''); 
```

查看以下页面以了解有关拆分的更多信息。

[Javascript 拆分](http://www.w3schools.com/jsref/jsref_split.asp)

# java - 未找到休眠属性

> ID：14495088
> 
> 赞同：10
> 
> 时间：2013-01-24T06:16:06.867
> 
> 标签：java, hibernate, apache-flex, tomcat, blazeds

我们正在将 java blazeds hibernate 与 flex 项目集成。首先我们在 eclipse 中测试了纯 java hibernate，它执行得很好。但是当我们将相同的内容放入 tomcat 与 blazeds 进行 flex 集成时，它会显示以下错误。这是唯一的错误。

```
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Environment <clinit>
INFO: Hibernate 3.2.6
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Environment <clinit>
INFO: hibernate.properties not found
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: Bytecode provider name : cglib
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Environment <clinit>
INFO: using JDK 1.4 java.sql.Timestamp handling
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Configuration configure
INFO: configuring from resource: /hibernate.cfg.xml
Jan 24, 2013 11:31:31 AM org.hibernate.cfg.Configuration getConfigurationInputSt
ream
INFO: Configuration resource: /hibernate.cfg.xml 
```

这是hibernate.cfg.xml（为了确定是否找不到hibernate.cfg.xml，我通过删除.cfg.xml的DOCTYPE进行测试，然后显示tomcat输出说找不到根元素......这意味着它能够找到hibernate.cfg.xml（我认为）

```
 <?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost/test</property>
        <property name="connection.username">root</property>
        <property name="connection.password">root</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <property name="show_sql">true</property>

        <property name="format_sql">true</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

         <property name="current_session_context_class">thread</property>
        <mapping class="com.model.User" />
        <mapping class="com.model.UserDetails" />
        <mapping class="com.model.LoanDetails" />
        <mapping class="com.model.BorrowerDetails" />

    </session-factory>
</hibernate-configuration> 
```

这是hiberutil.java

```
public class HibernateUtil
{

    private static  SessionFactory sessionFactory=configureSessionFactory();
    private static ServiceRegistry serviceRegistry;

    private static SessionFactory configureSessionFactory() throws HibernateException {
        Configuration configuration = new Configuration();
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        return sessionFactory;
    }
    public static SessionFactory getSessionFactory()
    {
        return sessionFactory;
    }
} 
```

为什么显示错误？控件来自 flex 端并执行 java 方法的起点...但是当涉及到休眠内容执行时，它在 tomcat 中显示此错误...

但是当我将 java+hibernate 作为纯 java 应用程序执行时，它执行得很好。

有谁能够帮助我？

谢谢

编辑 1 在@Andremoniy 建议的修改并将 .cfg.xml 放在 src 文件夹中之后，在 Eclipse 中它也可以工作，但不能在带有 flex 的 tomcat 中工作

出现以下错误

```
org.hibernate.MappingException: An AnnotationConfiguration instance is required
to use <mapping class="com.model.User"/>
        at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.jav
a:1606)
        at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.jav
a:1561)
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1540)
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1514)
        at org.hibernate.cfg.Configuration.configure(Configuration.java:1434)
        at org.hibernate.cfg.Configuration.configure(Configuration.java:1420)
        at com.sample.HibernateUtil.configureSessionFactory(HibernateUtil
.java:26)
        at com.sample.HibernateUtil.<clinit>(HibernateUtil.java:20)
        at com.sample.App.checkUser(App.java:34) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:02:06.370

在我看来，您可以通过`hibernate.cfg.xml`直接传递到`Configuration`.

```
try (InputStream in = HibernateUtil.class.getResourceAsStream("/hibernate.cfg.xml")) {
     Configuration configuration = new Configuration().addInputStream(in).configure();
...
} ... 
```

唯一的事情，你必须正确地指向路径或类，对于`getResourceAsStream`. 或者您可能想要`InputStream`使用一些相对路径来创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:20:14.287

我想问题在于您提到的配置代码`.hbm.xml`可能无法在 Tomcat 中运行。

我认为它需要`AnnotationConfiguration`对象。我猜您使用此代码`Annotationconfiguration`是因为对象创建不起作用。

最好用 pom 创建一个 maven hibernate 项目，然后将`war`文件导出到 Tomcat（更改为`Annotationconfiguration`）。还使用 log4j jar 来显示带有调试输出的 Tomcat 执行的详细信息，以便 Tomcat 输出将打印所有执行流程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T10:16:50.843

我遇到了同样的问题，但我在这里找到了解决方案..

[http://www.mkyong.com/hibernate/hibernate-error-an-annotationconfiguration-instance-is-required-to-use/](http://www.mkyong.com/hibernate/hibernate-error-an-annotationconfiguration-instance-is-required-to-use/)

IE。换行：

```
new Configuration().configure().buildSessionFactory(); 
```

到：

```
new AnnotationConfiguration().configure().buildSessionFactory(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-14T12:08:21.687

如果您使用**Intellij Idea**，您需要将**hibernate.cfg.xml**文件放入**资源**文件夹

[![广告](../Images/fb85c66cf71bb7af8790e8bc4768a337.png)](https://i.stack.imgur.com/7HAoA.jpg)

如果您在下一个错误之后出现： **org.hibernate.service.jndi.JndiException: Error parsing JNDI name []**

在标签的hibernate.cfg.xml文件名中删除， **见图**：

[![在此处输入图像描述](../Images/8e7775653ff2db8534905274c04a050f.png)](https://i.stack.imgur.com/43RrU.jpg)

# php - 当我在 php 中使用 $_POST 时，发生了未定义的索引

> ID：14495094
> 
> 赞同：-2
> 
> 时间：2013-01-24T06:16:59.853
> 
> 标签：php, forms, web-applications, post

我是一名 PHP 程序员，我对下面的问题感到困惑，我正在等待您的指导。非常感谢！有html代码

```
 <form action="" method="POST">
    <div>
        <strong>Release: *</strong> <input type="text" name="Release" value="<?php echo $rel; ?>" /><br/>
        <strong>User Story ID: *</strong> <input type="text" name="User Story ID" value="<?php echo $id; ?>" /><br/>
        <strong>Test Owner *</strong> <input type="text" name="Test Owner" value="<?php echo $owner; ?>" /><br/>
        <strong>Date of TC Review *</strong> <input type="text" name="Date of TC Review" value="<?php echo $data; ?>" /><br/>
        <strong>By Design </strong> <input type="text" name="By Design" value="<?php echo $design; ?>" /><br/> 
        <strong>By Review </strong> <input type="text" name="By Review" value="<?php echo $review; ?>" /><br/> 
        <strong>By Defect </strong> <input type="text" name="By Defect" value="<?php echo $defect; ?>" /><br/> 
      <p>* required</p>
      <input type="submit" name="submit" value="Submit">
    </div>
 </form> 
```

有php代码

```
 if (isset($_POST['submit']))
     { 
        // get form data, making sure it is valid
         $release = mysql_real_escape_string(htmlspecialchars($_POST['Release']));
        //  $ID = " abc";
        echo $_POST['Release'];
        echo $_POST['User Story ID'];
        $ID = mysql_real_escape_string(htmlspecialchars($_POST["User Story ID"]));
        $T_Owner = mysql_real_escape_string(htmlspecialchars($_POST['Test Owner']));
        $data = mysql_real_escape_string(htmlspecialchars($_POST['Date of TC Review']));
        $T_ByDesign= mysql_real_escape_string(htmlspecialchars($_POST['By Design']));
        $T_ByReview= mysql_real_escape_string(htmlspecialchars($_POST['By Review']));
        $T_ByDefect= mysql_real_escape_string(htmlspecialchars($_POST['By Defect']));

        // check to make sure both fields are entered
        if ($release == '' || $ID == ''||$T_Owner==''||$data=='')
        {
            // generate error message
            $error = 'ERROR: Please fill in all required fields!';

            // if either field is blank, display the form again
            renderForm($release, $ID, $T_Owner, $data, $T_ByDesign, $T_ByReview, $T_ByDefect, $error);
        }
        else
        {
            // save the data to the database
            mysql_query("INSERT Tests SET T_Release='$release', ID='$ID',TestOwner='$T_Owner',T_Date='$data',Test_ByDesign='$T_ByDesign',Test_ByReview='$T_ByReview',Test_ByDefect='$T_ByDefect'")
            or die(mysql_error()); 

            // once saved, redirect back to the view page
            header("Location: view.php"); 
        }
 } 
```

错误信息如下：

```
Notice: Undefined index: User Story ID in C:\xampp\htdocs\Test\new.php on line 47
abc
Notice: Undefined index: User Story ID in C:\xampp\htdocs\Test\new.php on line 55

Notice: Undefined index: User Story ID in C:\xampp\htdocs\Test\new.php on line 56

Notice: Undefined index: Test Owner in C:\xampp\htdocs\Test\new.php on line 57

Notice: Undefined index: Date of TC Review in C:\xampp\htdocs\Test\new.php on line 58

Notice: Undefined index: By Design in C:\xampp\htdocs\Test\new.php on line 59

Notice: Undefined index: By Review in C:\xampp\htdocs\Test\new.php on line 60

Notice: Undefined index: By Defect in C:\xampp\htdocs\Test\new.php on line 61 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:29:00.533

第一次编辑您的表格：

```
<form action="" method="POST">
<div>
    <strong>Release: *</strong> <input type="text" name="Release" value="<?php echo $rel; ?>" /><br/>
    <strong>User Story ID: *</strong> <input type="text" name="User_Story_ID" value="<?php echo $id; ?>" /><br/>
    <strong>Test Owner *</strong> <input type="text" name="Test_Owner" value="<?php echo $owner; ?>" /><br/>
    <strong>Date of TC Review *</strong> <input type="text" name="Date_of_TC_Review" value="<?php echo $data; ?>" /><br/>
    <strong>By Design </strong> <input type="text" name="By_Design" value="<?php echo $design; ?>" /><br/> 
    <strong>By Review </strong> <input type="text" name="By_Review" value="<?php echo $review; ?>" /><br/> 
    <strong>By Defect </strong> <input type="text" name="By_Defect" value="<?php echo $defect; ?>" /><br/> 
  <p>* required</p>
  <input type="submit" name="submit" value="Submit">
</div> 
```

不要在表单名称上使用空格，那么您可以获得这样的帖子值：

```
if (isset($_POST['submit']))
 { 
       // get form data, making sure it is valid
      $release = mysql_real_escape_string(htmlspecialchars($_POST['Release']));

    echo Print_r($_POST['Release']);
    echo Print_r($_POST['User_Story_ID']);
    $ID = $_POST["User_Story_ID"];
    $T_Owner = $_POST['Test_Owner'];
    $data = $_POST['Date_of_TC_Review'];
    $T_ByDesign= $_POST['By_Design'];
    $T_ByReview= $_POST['By_Review'];
    $T_ByDefect= $_POST['By_Defect'];

    // check to make sure both fields are entered
if ($release == '' || $ID == ''||$T_Owner==''||$data=='')
{
    // generate error message
    $error = 'ERROR: Please fill in all required fields!';

    // if either field is blank, display the form again
    renderForm($release, $ID, $T_Owner, $data, $T_ByDesign, $T_ByReview, $T_ByDefect, $error);
}
else
{
    // save the data to the database
    mysql_query("INSERT Tests SET T_Release='$release', ID='$ID',TestOwner='$T_Owner',T_Date='$data',Test_ByDesign='$T_ByDesign',Test_ByReview='$T_ByReview',Test_ByDefect='$T_ByDefect'")
    or die(mysql_error()); 

    // once saved, redirect back to the view page
    header("Location: view.php"); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:20:26.783

您为表单输入元素使用了无效名称。不要在表单名称中包含空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:25:51.593

首先，永远不要在 php 或任何其他编程中使用“By Design”类型的编码，而不是使用它，您应该像这样使用“By_Design”或使用 cameCaps(byDesign)。什么是你的html表单中的$rel，$id和其他东西，你没有提到它。导致您的问题的主要问题是在表单和 php 中使用空格。请不要使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T06:27:17.223

我尝试了一些测试代码：

```
<form action="" method="POST">
<input type="submit" name="what happened" value="here" />
</form>
<?php
print_r($_POST);
?> 
```

似乎 PHP 将所有元素名称中的空格替换为下划线。因此，您想使用`$_POST['User_Story_ID']`而不是`$_POST['User Story ID']`. 等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:38:11.113

您应该在使用前定义变量。请再检查一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T06:22:54.310

添加表单操作“ `your_page.php`”

例子 ： `<form action="your_page.php" method="POST">`

并删除表单输入元素的空间，例如：

```
echo $_POST['User Story ID']; 
```

而不是这个：

例子 ：

```
<strong>User Story ID: *</strong> <input type="text" name="UserStoryID" value="<?php echo $id; ?>" /><br/> 
```

`echo $_POST['UserStoryID'];`或任何你想命名的东西

# python - AttributeError：“函数”对象没有属性“索引”

> ID：14495096
> 
> 赞同：0
> 
> 时间：2013-01-24T06:17:19.890
> 
> 标签：python, recursion, attributeerror

在python中，我试图获得递归（dor）的深度。在将所有的 dor 内容添加到我的代码中之前，它工作得很好，但是在添加了 dor 的内容之后，我收到了一个关于我的代码的属性错误。这是我收到错误的功能

```
 def parse(json,dor=0):
      parse.index[dor]=0
      parse.keyList[dor]=[]
      parse.jsonDict[dor]=dict()
      parse.json[dor]=remove_white(json) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:45:00.203

**免责声明：您所做的很可能是错误的事情**

您的代码之前有效，因为（我假设）您在函数对象上设置了一个属性：

```
def foo():
  foo.bar = 4 
```

运行时，函数对象会为其自身设置一个属性`bar`。但是，当您添加`__setitem__`（使用方括号）时：

```
def foo():
  foo.bar[dor] = 4 
```

您现在说要修改`foo.bar`，但`foo.bar`还不存在！在第一次运行它之前，您可以通过手动设置对象来“修复”这个问题：

```
def foo():
  foo.bar[dor] = 4

foo.bar = {}
foo() 
```

最有可能的是，您希望通过使用单独的对象来跟踪代码中的递归深度来完全避免这种混乱。仅仅因为你*可以*做某事并不意味着你*应该*做。

编辑：查看您的代码，您似乎应该使用类而不是函数`parse`。使用类是有意义的，因为您使用一组作用于它的方法来封装可变状态。当然，我也有义务向您指出[标准库 JSON 模块](http://docs.python.org/2/library/json.html)。

# entity-framework - 实体框架：DBContext：如何检测数据库中存在的实体

> ID：14495098
> 
> 赞同：0
> 
> 时间：2013-01-24T06:17:54.213
> 
> 标签：entity-framework

给定以下示例：

```
public class Parent 
{
    public Guid ID {get;set;}
    public string Name {get;set;}
    public Child Child {get;set;}
}

public class Child 
{
    public Guid ID {get;set;}
    public string Name {get;set;}
} 
```

我想保存一个父对象实例，并为其分配一个子实例。这里的事实是：给定的子对象已经存在于数据库中，

```
 Parent p = new Parent();
 p.ID = Guid.NewGuid();

 // Get the Child Object 
 Child c = GetTheChild(...);
 p.Child = c;

SaveParent ( p ); 
```

在函数Save Parent中，实现了以下代码：

```
public void SaveParent ( Parent p )
{
     using (MyContext context = new ClinicContext())
     {
        context.Parents.Add( P );
        context.SaveChanges();

     }
} 
```

现在问题来了：由于本例中的child已经存在于数据库中，但是当在上下文DBSet中添加parent时，给定的实体c也持有“Added”的入口状态，你猜怎么着？DBContext 尝试使用重复的 Key 保存另一个子记录！

任何机构都知道如何解决这个问题？如果实体框架可以检测到数据库中已经存在的记录，我正在考虑是否有办法将插入转换为更新。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:40:38.017

如果您添加一个实体，所有相关实体都将被添加。如果您附加一个实体，所有相关实体都将被附加。在您的情况下，您要添加父实体，然后附加子实体。您还可以尝试使用外键并添加父级，然后将外键设置为相关的子 ID。这样您就不必将实体带到客户端来创建关系（尽管您需要知道相关实体的键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:39:53.207

我猜 GetTheChild() 会从数据库中返回一个孩子。因此，您需要做的就是在调用 SaveChanges 之前调用 ChangeObjectState 方法将子项标记为 Unchanged。

```
var osm = context.ObjectStateManager;
osm.ChangeObjectState(child, EntityState.Unchanged); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:22:24.700

你怎么接孩子？子项应附加到您保存父项的同一上下文。

我的猜测是您的 GetTheChild 函数使用了一个新的上下文 - 这意味着当您返回时，孩子是分离的，并且出于所有意图和目的，EF 认为它已被“添加”

正如面板所说，您可以只添加一个外键并设置孩子的密钥而不是孩子本身，但似乎有一些您应该解决的设计问题。

# haskell - ghc wiki、未来功能和类型列表

> ID：14495107
> 
> 赞同：1
> 
> 时间：2013-01-24T06:18:30.673
> 
> 标签：haskell, ghc

当我遇到这个非常有趣的例子时，我正在浏览[关于 TypeNats 的 GHC wiki部分。](http://hackage.haskell.org/trac/ghc/wiki/TypeNats/MatchingOnNats)他们正在创建类型列表：

```
type family Get (n :: Nat1) (xs :: [*]) :: *
type instance Get Zero     (x `: xs) = x
type instance Get (Succ n) (x `: xs) = Get n xs 
```

我想了解更多关于这方面的信息。我假设这个特性在 7.6.1 中没有实现（至少它没有为我编译），并且浏览票证被证明是相当压倒性的。知道我应该寻找什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T06:29:39.613

这段代码在 GHC 7.6 中几乎可以正常工作——您需要打开一些扩展，并使用 ' 而不是 `（显然语法已经改变？）。这个例子编译：

```
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE TypeOperators #-}

data Nat1 = Zero | Succ Nat1

type family Get (n :: Nat1) (xs :: [*]) :: *
type instance Get Zero     (x ': xs) = x
type instance Get (Succ n) (x ': xs) = Get n xs 
```

如果您只关心类型列表，而不关心这些 TypeNat，您可能会发现这样的示例更有用：

```
data HList :: [*] -> * where
  HNil :: List '[]
  HCons :: t -> List ts -> List (t ': ts) 
```

[如此处](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/promotion.html)所述。最相关的 GHC 扩展是`DataKinds`，最相关的论文可能是[Giving Haskell a Promotion](http://research.microsoft.com/en-us/people/dimitris/fc-kind-poly.pdf)。

# c# - Direct 2D 在将线条渲染到屏幕外缓冲区时会比 Qt 更好吗

> ID：14495108
> 
> 赞同：1
> 
> 时间：2013-01-24T06:18:32.417
> 
> 标签：c#, c++, qt, graphics2d, direct2d

我有一个数据可视化应用程序（平行坐标）。这涉及在屏幕上绘制大量线条。该应用程序适用于庞大的数据集。测试数据集涉及约 250 万行（精确到 2527700 行）。屏幕会杂乱无章，但会显示一些图案。该应用程序具有沿 X 和 Y 缩放的功能。在典型的缩放级别下，它绘制大约 300K 线。该应用程序是用 Qt 编写的，渲染所花费的时间是可观的。典型数字是（以毫秒为单位的时间）

耗时：496 画了 1003226 行

耗时：603 画了 1210032 行

耗时：112 画了 344582 行

耗时：182 画了 387960 行

耗时：178 画了 361424 行

耗时：222 画了 676470 行

耗时：171 画了 475652 行

耗时：251 画了 318709 行

所用时间：5 绘制 14160 行

耗时：16 绘制 27233 行

以下代码段用于对绘制的线段进行计时和计数。渲染发生在屏幕外图像（格式为 Format_ARGB32_Premultiplied 的 QImage）。QImage 的大小最大为 1366 x 768。分段类型为 QVector。

```
QTime m_timer;
m_timer.start();
painter.drawLines(segments);
qDebug() << "Time taken: " << m_timer.elapsed();
painter.end();
qDebug() << "Drew " << segments.size(); 
```

此 QImage 被缓存以保存将来的绘图。我从未使用过 DirectX。直接 2D 渲染是否会比我已经拥有的提供更多的性能优势。有什么办法可以改善这些数字吗？

如果直接 2D 渲染可以提高这些数字，使用什么技术堆栈？使用 C#/SharpDX 会更好吗？我问这个是因为 Qt 只能通过翻译来执行 DirectX（不确定成本是多少），并且由于应用程序主要是 windows C# 可能会简化开发人员。过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:13:14.310

不知道 Qt，但对于 Direct2D，在 Windows 7 上绘制数百万条抗锯齿线（没有最新的 IE10/SP 更新）不会有很好的性能。在 Windows 8 上，Direct2D 略有改进，但我不确定它能否处理这样的速率。如果你想获得更好的性能，你必须直接使用 Direct3D 和 MSAA 表面，或者像 FXAA 那样的一些 screespace 后效，或者使用像 GPAA/GBAA 这样的几何感知抗锯齿技术。检查“[实时抗锯齿的过滤方法](http://www.iryoku.com/aacourse/)”最先进的实时抗锯齿技术的综合列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:44:37.417

最好创建自己的画线函数，直接在 QImage 内存缓冲区上操作。在那里你可以做出一些 Qt 的画家可能无法做到的假设并获得更好的性能。然后使用 QGLWidget 对图像进行 blit 以消除锯齿（并且可能缩放？）。

良好的线条绘制代码：[http](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#Simplification) ://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#Simplification 。尽管对于 C++ 和内存缓冲区的实现，它可以通过用单指针替换`x0`和`y0`协调来进一步优化。

最重要的是，你可以在你的行循环中内联画线，并且在迭代超过一百万行时有零函数调用。

如果你让 blitting 部分做抗锯齿，你可以只为每个像素设置一个内存字，而不用检查它是什么类型的笔等。

还可以将硬件放大到任何所需的目标分辨率，您可以自由优化 QImage 大小以获得所需的图案，而不是在屏幕上显示它。

如果您可以让线条主要按 Y 坐标排序，这将有助于缓存，因为设置连续线条的像素将在 QImage 缓冲区的内存中更接近。

不管你怎么做，启动优化（gcc 的-O3 标志，不确定 MS 编译器），至少对于 gcc，默认不是 max。

您可以做的另一件事是在每个图像级别并行绘图，即使使用 QPainter 也可以。允许在主线程以外的 QImage 上绘图，并且 Qt 可以轻松地将 QImages 作为信号参数从绘图线程发送到 GUI 线程。您所做的是对 CPU 和内存的严重限制，因此最好将绘图线程数与实际核心数相同，而不是计算超线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:42:48.493

也许我不会直接回答你的问题，但是：

*   我猜想，Qt 使用标准系统例程来执行图形操作，所以这里指的是 GDI 和/或 GDI+。如果速度很快，它们都不会在 CPU 上进行所有计算。另一方面，来自 DirectX11+ 的 Direct2D 尝试尽可能使用 GPU 能力加速绘图，因此它*可能会*运行得更快。

*   我不太了解 Qt，但我想，您应该能够检索您想要以某种方式绘制的窗口（=控件）的句柄（即使这意味着使用 WinAPI - 总有办法）。如果是这样，您可以绕过所有 Qt 机制并使用 DirectX 直接在该窗口上绘图，而无需额外开销。

*   至于 SharpDX - 我不知道存在这样的库，感谢您提供信息。他们发表了一篇关于操作性能的论文，你可能想看看：[http](http://code4k.blogspot.com/2011/03/benchmarking-cnet-direct3d-11-apis-vs.html) ://code4k.blogspot.com/2011/03/benchmarking-cnet-direct3d-11-apis-vs.html 。无论如何，它似乎是一个或多或少简单的 DirectX 标头包装器，因此它不应该给您的应用程序增加太多开销（除非性能*非常*关键）。

# c# - 如何将（参考）Quick book 的 dll 添加到 silverlight 项目？

> ID：14495110
> 
> 赞同：2
> 
> 时间：2013-01-24T06:18:40.640
> 
> 标签：c#, quickbooks, quickbooks-online, qbfc

我正在使用 silverlight 项目。在此我必须使用 Quick books SDK (QBFC)。但问题是 Silverlight 不允许其他组件。

因为：
Silverlight 使用不同的运行时和常规 .Net 框架的子集，这就是我们只能引用 Silverlight 库的原因。

所以我们不能使用 Quick book dll 作为银光的参考。但是通过使用 Web 服务或 RIA 服务，我们可以解决这个问题。

让我知道这可能..

如果是，我该怎么办...如果不是，我必须遵循哪种方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:32:55.823

首先，SL 应用程序必须具有提升的权限。其次，您需要创建一个具有适当 ID 的 COM 对象。第三，您将拥有一个动态对象，但您可以像调用普通类一样调用它的方法。像这样的东西：

```
var qb = AutomationFactory.CreateObject("QBXMLRP2.RequestProcessor");
qb.OpenConnection("", "");
// etc. 
```

# r - 将 ggplot2 中的十六进制 bin 设置为相同大小

> ID：14495111
> 
> 赞同：19
> 
> 时间：2013-01-24T06:18:40.967
> 
> 标签：r, ggplot2, hexagonal-tiles

我正在尝试对多个类别的数据进行十六进制表示。问题是，对这些垃圾箱进行刻面似乎会使它们的大小都不同。

```
set.seed(1) #Create data
bindata <- data.frame(x=rnorm(100), y=rnorm(100))
fac_probs <- dnorm(seq(-3, 3, length.out=26))
fac_probs <- fac_probs/sum(fac_probs)
bindata$factor <- sample(letters, 100, replace=TRUE, prob=fac_probs)

library(ggplot2) #Actual plotting
library(hexbin)

ggplot(bindata, aes(x=x, y=y)) +
  geom_hex() +
  facet_wrap(~factor) 
```

![在此处输入图像描述](../Images/5940dc576d98c5711c19b037bd9d62e9.png)

是否可以设置一些东西以使所有这些垃圾箱在物理上具有相同的大小？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T15:58:27.037

正如 Julius 所说，问题在于`hexGrob`它没有获得有关 bin 大小的信息，而是从它*在 facet*中发现的差异中猜测它。

显然，没有六边形的宽度`dx`和高度就像指定`dy`一个`hexGrob`圆而不给出半径一样。

## 解决方法：

![解决方法](../Images/9c37c229235e8588367da3876ae870c6.png)

`resolution`如果刻面包含两个在 x 和 y 上都不同的相邻六边形，则该策略有效。因此，作为一种解决方法，我将手动构建一个 data.frame，其中包含单元格的 x 和 y 中心坐标，以及分面因子和计数：

除了问题中指定的库之外，我还需要

```
library (reshape2) 
```

并且`bindata$factor`实际上也需要成为一个因素：

```
bindata$factor <- as.factor (bindata$factor) 
```

现在，计算基本的六边形网格

```
h <- hexbin (bindata, xbins = 5, IDs = TRUE, 
             xbnds = range (bindata$x), 
             ybnds = range (bindata$y)) 
```

接下来，我们需要根据`bindata$factor`

```
counts <- hexTapply (h, bindata$factor, table)
counts <- t (simplify2array (counts))
counts <- melt (counts)
colnames (counts)  <- c ("ID", "factor", "counts") 
```

由于我们有单元格 ID，我们可以将此 data.frame 与适当的坐标合并：

```
hexdf <- data.frame (hcell2xy (h),  ID = h@cell)
hexdf <- merge (counts, hexdf) 
```

这是 data.frame 的样子：

```
> head (hexdf)
  ID factor counts          x         y
1  3      e      0 -0.3681728 -1.914359
2  3      s      0 -0.3681728 -1.914359
3  3      y      0 -0.3681728 -1.914359
4  3      r      0 -0.3681728 -1.914359
5  3      p      0 -0.3681728 -1.914359
6  3      o      0 -0.3681728 -1.914359 
```

`ggplot`ting（使用下面的命令）这会产生正确的 bin 大小，但该图的外观有点奇怪：绘制了 0 个六边形，但仅在其他一些方面填充了该 bin 的地方。为了抑制绘图，我们可以将计数设置为`NA`并使`na.value`完全透明（默认为 gray50）：

```
hexdf$counts [hexdf$counts == 0] <- NA

ggplot(hexdf, aes(x=x, y=y, fill = counts)) +
  geom_hex(stat="identity") +
  facet_wrap(~factor) +
  coord_equal () +
  scale_fill_continuous (low = "grey80", high = "#000040", na.value = "#00000000") 
```

产生帖子顶部的数字。

只要 binwidth 正确且没有分面，此策略就有效。如果 binwidths 设置得非常小，`resolution`可能仍然会产生太大`dx`而`dy`. 在这种情况下，我们可以`hexGrob`为两个相邻的 bin（但 x 和 y 都不同）提供`NA`每个方面的计数。

```
dummy <- hgridcent (xbins = 5, 
                    xbnds = range (bindata$x),  
                    ybnds = range (bindata$y),  
                    shape = 1)

dummy <- data.frame (ID = 0,
                     factor = rep (levels (bindata$factor), each = 2),
                     counts = NA,
                     x = rep (dummy$x [1] + c (0, dummy$dx/2), 
                              nlevels (bindata$factor)),
                     y = rep (dummy$y [1] + c (0, dummy$dy  ), 
                              nlevels (bindata$factor))) 
```

这种方法的另一个优点是我们可以删除所有计数为 0 的行`counts`，在这种情况下将大小减少`hexdf`大约 3/4（122 行而不是 520 行）：

```
counts <- counts [counts$counts > 0 ,]
hexdf <- data.frame (hcell2xy (h),  ID = h@cell)
hexdf <- merge (counts, hexdf)
hexdf <- rbind (hexdf, dummy) 
```

该图看起来与上面完全相同，但您可以在`na.value`不完全透明的情况下可视化差异。

* * *

# 更多关于这个问题

这个问题并不是刻面所独有的，而是总是在太少的 bin 被占用时发生，因此没有“对角线”相邻的 bin 被填充。

这是一系列显示问题的最小数据：

首先，我进行跟踪`hexBin`，以便获得`ggplot2:::hexBin`与返回的对象相同的六边形网格的所有中心坐标`hexbin`：

```
trace (ggplot2:::hexBin, exit = quote ({trace.grid <<- as.data.frame (hgridcent (xbins = xbins, xbnds = xbnds, ybnds = ybnds, shape = ybins/xbins) [1:2]); trace.h <<- hb})) 
```

建立一个非常小的数据集：

```
df <- data.frame (x = 3 : 1, y = 1 : 3) 
```

和情节：

```
p <- ggplot(df, aes(x=x, y=y)) +  geom_hex(binwidth=c(1, 1)) +          
     coord_fixed (xlim = c (0, 4), ylim = c (0,4))

p # needed for the tracing to occur
p + geom_point (data = trace.grid, size = 4) + 
    geom_point (data = df, col = "red") # data pts

str (trace.h)

Formal class 'hexbin' [package "hexbin"] with 16 slots
  ..@ cell  : int [1:3] 3 5 7
  ..@ count : int [1:3] 1 1 1
  ..@ xcm   : num [1:3] 3 2 1
  ..@ ycm   : num [1:3] 1 2 3
  ..@ xbins : num 2
  ..@ shape : num 1
  ..@ xbnds : num [1:2] 1 3
  ..@ ybnds : num [1:2] 1 3
  ..@ dimen : num [1:2] 4 3
  ..@ n     : int 3
  ..@ ncells: int 3
  ..@ call  : language hexbin(x = x, y = y, xbins = xbins, shape = ybins/xbins, xbnds = xbnds, ybnds = ybnds)
  ..@ xlab  : chr "x"
  ..@ ylab  : chr "y"
  ..@ cID   : NULL
  ..@ cAtt  : int(0) 
```

我重复这个情节，省略数据点 2：

```
p <- ggplot(df [-2,], aes(x=x, y=y)) +  geom_hex(binwidth=c(1, 1)) +          coord_fixed (xlim = c (0, 4), ylim = c (0,4))
p
p + geom_point (data = trace.grid, size = 4) + geom_point (data = df, col = "red")
str (trace.h)

Formal class 'hexbin' [package "hexbin"] with 16 slots
  ..@ cell  : int [1:2] 3 7
  ..@ count : int [1:2] 1 1
  ..@ xcm   : num [1:2] 3 1
  ..@ ycm   : num [1:2] 1 3
  ..@ xbins : num 2
  ..@ shape : num 1
  ..@ xbnds : num [1:2] 1 3
  ..@ ybnds : num [1:2] 1 3
  ..@ dimen : num [1:2] 4 3
  ..@ n     : int 2
  ..@ ncells: int 2
  ..@ call  : language hexbin(x = x, y = y, xbins = xbins, shape = ybins/xbins, xbnds = xbnds, ybnds = ybnds)
  ..@ xlab  : chr "x"
  ..@ ylab  : chr "y"
  ..@ cID   : NULL
  ..@ cAtt  : int(0) 
```

![一切都很好](../Images/790f3846b57e8ed24cdf0539ed1648ac.png) ![六边形绘图搞砸了](../Images/5fa0287cad1ad0f6f96c79776aaeaa78.png)

*   请注意，来自`hexbin`同一网格的结果（单元格编号没有改变，只是单元格 5 不再填充，因此没有列出），网格尺寸和范围没有改变。但是绘制的六边形确实发生了巨大变化。

*   另请注意，`hgridcent`忘记返回第一个单元格的中心坐标（左下角）。

虽然它被填充：

```
df <- data.frame (x = 1 : 3, y = 1 : 3)

p <- ggplot(df, aes(x=x, y=y)) +  geom_hex(binwidth=c(0.5, 0.8)) +          
     coord_fixed (xlim = c (0, 4), ylim = c (0,4))

p # needed for the tracing to occur
p + geom_point (data = trace.grid, size = 4) + 
    geom_point (data = df, col = "red") + # data pts
    geom_point (data = as.data.frame (hcell2xy (trace.h)), shape = 1, size = 6) 
```

![一切都搞砸了](../Images/e01e6b717e70e7028eaadfba0380511f.png)

在这里，六边形的渲染不可能是正确的——它们不属于一个六边形网格。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-26T19:58:38.580

我尝试使用 lattice 使用相同的数据集复制您的解决方案`hexbinplot`。最初，它给了我一个错误`xbnds[1] < xbnds[2] is not fulfilled`。此错误是由于错误的数值向量指定了分箱应涵盖的值范围。我在 中更改了这些参数`hexbinplot`，并且它以某种方式起作用。不确定它是否可以帮助您使用 ggplot 解决它，但这可能是一个起点。

```
library(lattice)
library(hexbin)
hexbinplot(y ~ x | factor, bindata, xbnds = "panel", ybnds = "panel", xbins=5, 
           layout=c(7,3)) 
```

![在此处输入图像描述](../Images/ca7da96820674b5d4e434b131e5d6fab.png)

**编辑**

虽然矩形垃圾箱`stat_bin2d()`工作得很好：

```
ggplot(bindata, aes(x=x, y=y, group=factor)) + 
    facet_wrap(~factor) +
    stat_bin2d(binwidth=c(0.6, 0.6)) 
```

![在此处输入图像描述](../Images/a61604f1588e78d679b18f6161b31ed2.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T19:27:06.043

有两个我们感兴趣的源文件：[stat-binhex.r](https://github.com/hadley/ggplot2/blob/master/R/stat-binhex.r)和[geom-hex.r](https://github.com/hadley/ggplot2/blob/master/R/geom-hex.r)，主要是`hexBin`和`hexGrob`函数。

正如@Dinre 提到的，这个问题与刻面无关。我们可以看到的是，它`binwidth`并没有被忽略，并且在 中以特殊的方式使用`hexBin`，这个函数分别应用于每个方面。之后，`hexGrob`应用于每个方面。确保您可以使用例如检查它们

```
trace(ggplot2:::hexGrob, quote(browser()))
trace(ggplot2:::hexBin, quote(browser())) 
```

因此，这就解释了为什么大小不同 - 它们取决于`binwidth`每个方面本身的数据和数据。

由于各种坐标变换，很难跟踪该过程，但请注意`hexBin`

```
data.frame(
  hcell2xy(hb),
  count = hb@count,
  density = hb@count / sum(hb@count, na.rm=TRUE)
) 
```

似乎总是看起来很普通，这`hexGrob`负责绘制十六进制垃圾箱，失真，即它有`polygonGrob`. 如果刻面中只有一个 hex bin，则会出现更严重的异常。

```
dx <- resolution(x, FALSE)
dy <- resolution(y, FALSE) / sqrt(3) / 2 * 1.15 
```

在`?resolution`我们可以看到

> 描述
> 
> ```
>  The resolution is is the smallest non-zero distance between adjacent
>  values. If there is only one unique value, then the resolution is
>  defined to be one. 
> ```

出于这个原因（`resolution(x, FALSE) == 1`和） ，您的示例中第一个方面`resolution(y, FALSE) == 1`的 x 坐标是`polygonGrob`

```
[1] 1.5native  1.5native  0.5native  -0.5native -0.5native 0.5native 
```

如果我没记错的话，在这种情况下，本地单位就像 npc，所以它们应该在 0 和 1 之间。也就是说，如果是单个 hex bin，它会超出范围，因为`resolution()`. 这个功能也是@Dinre 提到的失真的原因，即使有多达几个十六进制垃圾箱。

因此，目前似乎没有相同大小的十六进制箱的选项。一个临时的（并且对于大量因素非常不方便）解决方案可以从以下内容开始：

```
library(gridExtra)
set.seed(2)
bindata <- data.frame(x = rnorm(100), y = rnorm(100))
fac_probs <- c(10, 40, 40, 10)
bindata$factor <- sample(letters[1:4], 100, 
                         replace = TRUE, prob = fac_probs)

binwidths <- list(c(0.4, 0.4), c(0.5, 0.5),
                  c(0.5, 0.5), c(0.4, 0.4))

plots <- mapply(function(w,z){
  ggplot(bindata[bindata$factor == w, ], aes(x = x, y = y)) +
    geom_hex(binwidth = z) + theme(legend.position = 'none')
}, letters[1:4], binwidths, SIMPLIFY = FALSE)

do.call(grid.arrange, plots) 
```

![在此处输入图像描述](../Images/96b81544a9e662ec5c3672131ec4bbe4.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T14:35:50.307

我还对“ggplot2”中的十六进制图进行了一些摆弄，当一个因子的人口减少到 8 或以下时，我能够始终如一地产生明显的 bin 失真。如果不深入研究包源（我不愿意这样做），我无法解释为什么会发生这种情况，但我可以告诉你，稀疏因素似乎一直在破坏 'ggplot2' 中的十六进制 bin 绘图。

这向我表明，“ggplot2”中特定十六进制 bin 的大小和形状与每个方面唯一的计算有关，而不是对组进行一次计算并随后绘制数据。我可以通过仅绘制单个因素来重现任何给定方面的失真，这在一定程度上加强了这一点，如下所示：

```
ggplot(bindata[bindata$factor=="e",], aes(x=x, y=y)) +
geom_hex() 
```

这感觉像是应该提升给包维护者 Hadley Wickham（h.wickham at gmail.com）。 *此信息可从 CRAN 公开获得。*

**更新**：我向 Hadley Wickham 发送了一封电子邮件，询问他是否会看一下这个问题，他确认这种行为确实是一个错误。

# ios - CoreBlueTooth 委托 didWriteValueForCharacteristic 调用，值为 null

> ID：14495120
> 
> 赞同：2
> 
> 时间：2013-01-24T06:19:27.690
> 
> 标签：ios, core-bluetooth

我将通知设置为一个特征，然后将一些数据（即要读取的地址和读取的数据长度）写入另一个特征。将调用委托 didUpdateValueForCharacteristic，但特征值为零（应该有一些值）且长度正确。我还检查了委托 didWriteValueForCharacteristic。这将在我写入数据后调用，但在委托中，characteristic.value 为空，而characteristic.UUID 与我写的相同。

那么当didWriteValueForCharacteristic被调用且没有报错时，是不是说明写操作成功了呢？如果是这样，为什么特征值为空？（我认为该值应该等于我在 writeValue: forCharacteristic:type 中写的值：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T01:51:30.777

我一直在遇到您在这里遇到的类似问题，所以我将尝试分享我所看到的。

当您尝试从外围设备获取数据时，didWriteValueForCharacteristic 不是您想要的。尽管您说您正在尝试在某处写入数据，但我不确定这与获取更新通知有什么关系。

如果您正在使用通知设置，那么您应该关注 didUpdateValueForCharacteristic。

当 didUpdateValueForCharacteristic 被调用时，它并不一定意味着一个值已经被完全传达。您必须记住，正在发送的数据只能以少量（20 个字节，如果我没记错的话）发送，因此可能存在您正在查看的数据不完整的情况。

我注意到的另一件事是，当你打电话时，在外围设备端

```
 [peripheralManager updateValue:dataToSent forCharacteristic:aCustomCharacteristic onSubscribedCentrals:nil]; 
```

它返回一个 BOOL，告诉您数据是否已成功发送。如果它没有成功发送，那么它会停止尝试发送后续的，这可能会很痛苦。

当我尝试将 int 值作为数据从外围设备发送到客户端时，我使用的是 iPad 和 iPhone。当 iPhone 是客户端而 iPad 是外围设备时，我遇到了问题。我得到的空值很像你正在处理的，但是当我切换两者时，我得到了我应该得到的正确值。这也可能是您正在使用的设备的问题，因为我不完全确定您是否可以将 iPad 用作外围设备。

# linq - 如何使用 C# 通过 linq 构建数据透视表

> ID：14495124
> 
> 赞同：4
> 
> 时间：2013-01-24T06:19:39.513
> 
> 标签：linq, pivot

我在我的 c# 代码中有这个数据表：

```
Date     | Employee | Job1 | Job2 |  Job3 |
---------|----------|------|------|-------|
1/1/2012 | A        | 1.00 | 1    |  1    |
1/1/2012 | B        | 2.5  | 2    |  2    |
1/1/2012 | C        | 2.89 | 1    |  4    |
1/1/2012 | D        | 4.11 | 2    |  1    |
1/2/2012 | A        | 3    | 2    |  5    |
1/2/2012 | B        | 2    | 2    |  2    |
1/2/2012 | C        | 3    | 3    |  3    |
1/2/2012 | D        | 1    | 1    |  1    |
1/3/2012 | A        | 5    | 5    |  5    |
1/3/2012 | B        | 2    | 2    |  6    |
1/3/2012 | C        | 1    | 1    |  1    |
1/3/2012 | D        | 2    | 3    |  4    |
2/1/2012 | A        | 2    | 2    |  2    |
2/1/2012 | B        | 5    | 5    |  2    |
2/1/2012 | D        | 2    | 2    |  2    |
2/2/2012 | A        | 3    | 3    |  3    |
2/2/2012 | B        | 2    | 3    |  3    |
3/1/2012 | A        | 4    | 4    |  2    | 
```

现在我想创建另一个 DataTable，它看起来像这样：

```
Job1    
Employee | 1/1/2012 | 1/2/2012 | 1/3/2012 | 2/1/2012 | 2/2/2012 |
---------|----------|----------|----------|----------|----------|
A        | 1.00     | 3        | 5        | 2        | 3        |
B        | 2.50     | 2        | 2        | 5        | 2        |
C        | 2.89     | 3        | 1        | -        |          |
D        | 4.11     | 1        | 2        | 2        |          |
Total    | 10.50    | 9        | 10       | 9        | 5        | 
```

请建议如何使用 Linq 和 C# 制作这个数据透视表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:00:06.887

```
var query = from foo in db.Foos
            group foo by foo.Date into g
            select new {
                Date = g.Key,
                A = g.Where(x => x.Employee == "A").Sum(x => x.Job1),
                B = g.Where(x => x.Employee == "B").Sum(x => x.Job1),
                C = g.Where(x => x.Employee == "C").Sum(x => x.Job1),
                D = g.Where(x => x.Employee == "D").Sum(x => x.Job1),
                Total = g.Sum(x => x.Job1)
            }; 
```

您也可以申请`OrderBy(x => x.Date)`查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:55:29.353

由于列的动态特性，您将无法使用 LINQ 执行此操作。LINQ to SQL 需要一种将结果集字段映射到属性值的静态方法。相反，您可以查看`PIVOT`SQL 语句并将结果填充到`DataTable`

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

# c++ - 在实现 move_down_the_heap 函数时，您将如何确保下标元素访问在堆容器（例如向量）的大小限制内？

> ID：14495131
> 
> 赞同：0
> 
> 时间：2013-01-24T06:20:15.933
> 
> 标签：c++, vector, heap, heapsort

界面看起来像这样

```
template <class T, class Pred>
void downheap (std::vector<T>& heap_vector, unsigned int startingIndex, Pred predicateFunc); 
```

如果*起始*索引在向量中的k 处**，则其在堆中的****左子**节点将位于索引**(2 * k)**处 ，其在堆中的**右子**节点将位于索引**((2 * k )+ 1)**处。本质上，该项目应与堆中的适当子项进行比较（并根据需要进行交换），直到满足谓词函数的给定顺序为止。

谓词可能大于、小于或任何自定义序列...

在实现这种方法时，如何检查索引访问是否在大小限制内？即 **heap_vector[rightChildIndex]**或**heap_vector[leftChildIndex]**在循环和进行比较时不应超出**heap_vector.size()-1** ......这让我有点头疼

这是我的代码

```
 while ( pred ( heap_vector[rightChild], heap_vector[parentIndex] ) || pred (  
         heap_vector[leftChild], heap_vector[parentIndex] ) ) {

    if ( pred ( heap_vector[rightChild], heap_vector[leftChild]) ) {
        std::swap(heap_vector[parentIndex],heap_vector[rightChild]);
        parentIndex=rightChild;

    }       
    else {
        std::swap( heap_vector[parentIndex], heap_vector[leftChild]);
        parentIndex=leftChild;

    }

    rightChild= 2*parentIndex+1;
    leftChild=2*parentIndex;

    if (rightChild>heap_vector.size() || leftChild>heap_vector.size())
        break;
} 
```

# php - 在 PHP 中嵌入 python 代码失败

> ID：14495132
> 
> 赞同：1
> 
> 时间：2013-01-24T06:20:19.840
> 
> 标签：php, python

我想在 PHP 中嵌入 python 代码。为此，它要求我通过命令使用 pear 安装程序为 PHP 安装 python 包

```
# pecl install python 
```

当我运行此命令时，每次安装失败，显示错误消息..

```
configure: error: Please specify path to Python distribution files
ERROR: `/tmp/pear/temp/python/configure' failed 
```

我不知道该怎么做，或者如何指定路径。

# c++ - windows.h 已经包含 afxv_w32.h - CString

> ID：14495137
> 
> 赞同：0
> 
> 时间：2013-01-24T06:21:05.053
> 
> 标签：c++, visual-c++

我试图在我的 cpp 文件中包含 CString，但如果我包含 afxinet.h，则会收到此错误

“windows.h 已经包含 afxv_w32.h”

这些是我的头文件：

#include stdafx.h

#include shlwapi.h

#include Tlhelp32.h

#include 钩子.h

#include stdio.h

#include common1.h

#include SafeLogger.h

#include io.h

#include tinyxml.h

#包括winsock.h>

#pragma 注释（lib，“Ws2_32.lib”）

#include afxinet.h

我没有在堆栈中包含要在此处显示的守卫。

如何解决此问题并在我的文件中包含 CString

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:34:11.977

`afxinet.h`如果你愿意，你为什么要添加`CString`？

您应该包括`atlstr.h`get `CString`- 特别是如果您的项目不是基于 MFC 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:27:38.550

在 C++ 设置中使用`/showIncludes`选项（在高级下）。这将显示如何包含标题（以树格式）。作为另一个建议，您应该只包含需要的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:35:52.473

通过包含 <afx.h>，您应该能够在 cpp 文件中使用 CString 类。

```
#include <afx.h>
#include <iostream>

using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    CString str("Santosh");
    wcout << LPCTSTR(str) << endl;
    return 0;
}

Additionally, you will need to define _AFXDLL preprocessor 
```

# c++ - 我可以在不安装 XCode 的情况下在 Mountain Lion 上使用 gcc 4.7（和 C++11）吗？

> ID：14495138
> 
> 赞同：0
> 
> 时间：2013-01-24T06:21:15.897
> 
> 标签：c++, macos, gcc, macports

我一直在使用命令行工具和文本编辑器来编译类项目，效果很好。不幸的是，他们已经成为我们使用 4.7 的固执己见。Xcode（以及 OSX）只有 llvm-gcc 4.2，所以我想升级。

我已经安装了 macports 并找到了安装 gcc 4.7 的说明，但它说我需要安装 xcode。我希望能够只使用命令行工具而没有 xcode（我不需要任何 iOS 或图形的东西，我只想要 gcc.

无论如何，如果不可能，那没什么大不了的，但是如果有人能指出我正确的方向，我将不胜感激。谢谢！

澄清一下，我有命令行工具，但没有我想要的 gcc 版本。运行 macports 会导致：

```
The-Black-Pearl:Desktop David$ sudo port install gcc47
Error: 
Error: No Xcode installation was found.
Error: Please install Xcode and/or run xcode-select to specify its location.
Error: 
Error: The installed version of Xcode (2.0orlower) is too old to use on the installed OS version. 
Version 4.1 or later is recommended on Mac OS X 10.8. 
```

# bash - 如何在 if 条件下检查系统上是否存在两个特定程序？

> ID：14495139
> 
> 赞同：1
> 
> 时间：2013-01-24T06:21:19.717
> 
> 标签：bash

我的 .bashrc 中有以下内容来打印一条看起来很有趣的消息：

```
fortune | cowsay -W 65 
```

如果计算机没有`fortune`或没有`cowsay`安装，我不希望这条线运行。

执行此检查的最佳或最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:29:38.987

您可以使用`type`or`which`或`hash`来测试命令是否存在。

从所有这些中，`which`仅适用于可执行文件，我们将跳过它。

尝试一下

```
if type fortune &> /dev/null; then
    if type cowsay &> /dev/null; then
        fortune | cowsay -W 65
    fi
fi 
```

或者，没有`if`s：

```
type fortune &> /dev/null && type cowsay &> /dev/null && (fortune | cowsay -W 65) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:05:57.667

`type`是这个工具。它是内置的 Bash。它并不像我曾经认为的那样过时，即`typeset`. 您可以使用一个命令同时检查两者

```
if type fortune cowsay
then
  fortune | cowsay -W 65
fi 
```

它还在 STDOUT 和 STDERR 之间拆分输出，因此您可以抑制成功消息

```
type fortune cowsay >/dev/null
# or failure messages
type fortune cowsay 2>/dev/null
# or both
type fortune cowsay &>/dev/null 
```

[从 Bash 脚本检查程序是否存在](https://stackoverflow.com/q/592620)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:27:20.923

如果您的意图是在未安装的情况下不显示错误消息，则可以这样：

```
(fortune | cowsay -W 65) 2>/dev/null 
```

# javascript - 在 ajax 上需要 jquery 的帮助

> ID：14495142
> 
> 赞同：0
> 
> 时间：2013-01-24T06:21:25.630
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我正在创建一个带有电子邮件 ID 和密码的注册页面。我在注册页面中调用了 onsubmit 事件，该事件调用了写在 common.js 文件中的 checkData() 函数。我有一个 ajax 函数来检查数据库中是否存在电子邮件 ID？但我的问题是当我在完成检查我的 ajax 函数后保持警报消息工作正常但如果警报被删除，它会将数据输入到数据库中。这是ajax的代码

```
 else
   {
       $(function() {

              $.ajax({
                    url  : 'RegCheck.php',
                    type : 'POST',
                    data : 'User=' + address,
                    success : function(result){
                       if(result != "No")
                       {
                           document.getElementById("EmailChk").innerHTML = result;    
                           Valid = false;

                       }
                    }

              });              

       });                         
      document.getElementById("MailMand").innerHTML = "" ;

   }    
   alert(Valid);
   return Valid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:23:33.150

ajax 不是那样工作的。`success`代码将在99.9 % 的时间（如果不是 100% 的时间）*之后执行。*`return Valid`你***不能保证***什么时候`success`会被调用。

相反，您需要在`ajax`回调中完成所有工作，或者（*不寒而栗*）使其同步。

因此，如果您依赖它进行验证，则需要停止表单提交，然后在`success`方法中提交表单。

# xaml - Visual Studio 2012 中的 XAML 设计器崩溃

> ID：14495144
> 
> 赞同：3
> 
> 时间：2013-01-24T06:21:31.857
> 
> 标签：xaml, crash, visual-studio-2012

当我在设计器中加载 XAML 文件时，我得到以下异常，然后我必须从进程管理器中终止 VS 2012。关于变通的任何想法？

```
Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteException
Object reference not set to an instance of an object.
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous(Action action, Int32 targetApartmentId, WaitHandle aborted, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalHostTextBufferSynchronizer.get_IsReadOnly()
   at Microsoft.Expression.DesignHost.DesignerTextBufferSynchronizer.get_IsReadOnly()
   at Microsoft.Expression.DesignHost.DesignerTextBuffer.get_IsReadOnly()
   at Microsoft.Expression.DesignSurface.Documents.TextBuffer.get_IsReadOnly()
   at Microsoft.Expression.DesignSurface.Documents.SceneDocument.get_IsReadOnly()
   at Microsoft.Expression.DesignSurface.Documents.SceneDocument.get_IsUndoTargetReadOnly()
   at Microsoft.Expression.DesignSurface.Selection.SelectionSet`2.SetSelectionWithUndo(String description, ListOfT newSelection, T newPrimarySelection)
   at Microsoft.Expression.DesignSurface.Selection.SceneNodeSelectionSet.SetSelectionWithUndo(String description, SceneNodeOrderedCollection newSelection, SceneNode newPrimarySelection)
   at Microsoft.Expression.DesignSurface.Selection.SelectionSet`2.ExtendSelection(T selectionToExtend)
   at Microsoft.Expression.DesignSurface.ViewModel.SceneViewModel.SelectNodes(ICollection`1 nodes)
   at Microsoft.Expression.DesignSurface.View.SceneView.SelectionSynchronizer.OnCaretPositionChangedTimeoutTimerTick(TextEditorContext textEditor)
   at Microsoft.Expression.DesignSurface.View.SceneView.SelectionSynchronizer.SynchronizeSceneToMarkup(TextEditorContext textEditor)
   at Microsoft.Expression.DesignSurface.View.SceneView.TextEditor_CaretPositionChanged(Object sender, EventArgs e)
   at Microsoft.Expression.DesignSurface.TextEditorContext.CaretPositionChangedPipe(Object sender, EventArgs args)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalEvent`2.<>c__DisplayClass12.<Invoke>b__10()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.Invoke(Boolean waitingInExternalCall)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.InvokeCall(Call call)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.ProcessQueue(CallQueue queue)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.ProcessInboundQueue(Int32 identity)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.ProcessMessage(Int32 msg, IntPtr wParam, Boolean elevatedQuery, Boolean& handled)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.OnWindowMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.MessageOnlyHwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at Microsoft.Expression.DesignHost.Isolation.IsolationProcess.RunApplication()
   at Microsoft.Expression.DesignHost.Isolation.IsolationProcess.<>c__DisplayClass2.<Main>b__0()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()

Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteException
Object reference not set to an instance of an object.

Server stack trace: 
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteHostTextBufferSynchronizer.get_IsReadOnly()
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteHostTextBufferSynchronizer.get_IsReadOnly()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalHostTextBufferSynchronizer.<get_IsReadOnly>b__8(IRemoteHostTextBufferSynchronizer hs)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass4`2.<MarshalOut>b__3()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteException
Object reference not set to an instance of an object.
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteHostTextBufferSynchronizer.<get_IsReadOnly>b__7()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.<MarshalIn>b__15()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T17:06:39.413

我知道这个有点旧，但我在 VS2013 中遇到了类似的问题，从 MSDN 文章中找到了线索并检查了事件查看器是否有异常，查找 XDesProc.exe。

问题是我的显卡驱动程序过时。

更新后，一切都重新开始工作

它可能会帮助某人

# google-chrome-extension - 使用 javascript 文件加载本地 HTML 文件

> ID：14495146
> 
> 赞同：1
> 
> 时间：2013-01-24T06:21:44.953
> 
> 标签：google-chrome-extension

我正在构建我的第一个 chrome 扩展，我遇到了一个非常基本的问题。

我的扩展程序有一个一直在运行的后台脚本，如果满足某些条件，它将网页的 url 重定向到本地网页。

```
chrome.tabs.update(e.tabId, 
                  {url: "popup.html"}); 
```

Popup.html 被加载到选项卡中。这很好用，但我想在 popup.html 中包含一些 javascript。

我可以包含一个 popup.js 文件，但尝试 document.addEventListener 不起作用，因为 document 为空。

另外，当我尝试包含 jquery.js 时，我得到

```
Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' chrome-extension-resource:". 
```

我尝试将清单文件属性更新为此，但似乎没有帮助：

```
"content_scripts": [
  {
    "matches": ["http://*/*", "https://*/*"],
    "js": ["background.js", "jquery.min.js", "popup.js"]
  }
],

"permissions": [
    "tabs", "http://*/*", "https://*/*",
  "webNavigation"
],

"background": {
"scripts": ["background.js", "popup.js", "jquery.min.js"]
} 
```

我查看了这个文档[http://developer.chrome.com/stable/extensions/contentSecurityPolicy.html](http://developer.chrome.com/stable/extensions/contentSecurityPolicy.html)但它没有任何解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:27:56.213

我，该错误表示您正在直接在 HTML 文档的标记中运行内联脚本，或者在事件处理程序（如`onclick="myCode();"`. 内容安全政策阻止您这样做。

我不知道是你写了那个脚本，还是某个外部框架。不过，您应该确保在 popup.html 中没有内联代码，或者您应该放宽您的[内容安全策略](http://developer.chrome.com/extensions/contentSecurityPolicy.html)，允许使用[`'unsafe-inline'`](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing).

请记住，当放松安全策略时，您正在放松 SECURITY，并且您的代码更容易受到攻击。出于调试目的执行此操作，但请尝试将其从您的发布版本中删除。

# ios - 从 ipad 中的 popOver 推送视图

> ID：14495147
> 
> 赞同：1
> 
> 时间：2013-01-24T06:21:58.820
> 
> 标签：ios, objective-c, cocoa-touch, uipopovercontroller

我在视图（MapView）中打开一个带有视图（DetailView）的popOver。它工作正常。

但是在我的详细视图中有一个按钮（反馈）。所以我想在点击按钮时推送另一个视图（反馈表单）。

我试过了，但什么也没发生。

**我可以将视图推送到弹出框内吗？**

我的代码如下：

```
// MapView.m

detailsView *popUp=[[detailsView alloc] initWithNibName:@"detailsView_ipad" bundle:nil];

        popView = [[UIPopoverController alloc]initWithContentViewController:popUp];

        popView.delegate =self;

        [popView setPopoverContentSize:CGSizeMake(600, 500)];

 [popView presentPopoverFromRect:control.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

}  

//Detailview.m

-(IBAction)openFeedbackForm:(id)sender {

fbView = [[deatailsFeedback alloc]
                  initWithNibName:@"deatailsFeedback_ipad" bundle:nil];
 [self.navigationController pushViewController:fbView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:25:31.903

要实现这一点，您的 detailsView 应该是一个具有原始 detailsView 的根控制器的 Navigation 控制器。

这样，当您弹出 navigationController 时，您可以从您的 detailsView 执行推送，这只会影响 popOver 视图

```
 detailsView *popUpView=[[detailsView alloc] initWithNibName:@"detailsView_ipad" bundle:nil];

    UINavigationController *popUpNavController = [[UINavigationController alloc] initWithRootViewController:popUpView];    

    popView = [[UIPopoverController alloc]initWithContentViewController:popUpNavController];

    popView.delegate =self;

    [popView setPopoverContentSize:CGSizeMake(600, 500)];

    [popView presentPopoverFromRect:control.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

}

//Detailview.m

-(IBAction)openFeedbackForm:(id)sender {

    fbView = [[deatailsFeedback alloc]
              initWithNibName:@"deatailsFeedback_ipad" bundle:nil];
    [self.navigationController pushViewController:fbView animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:30:26.270

如果我正确理解您的代码，openFeedForm IBAction 方法在 Detailview.m 中吗？意思是代码的第一部分与底部的代码不同？

如果是这样，由于 Detailview 本身不在 navigationController 中，它不会向其不存在的导航控制器推送任何内容。

您要做的是让 MapView 在其导航控制器中推送新视图。

旁注：由于您将 MapView 中的 popUp 委托设置为（self），因此应在 MapView 中定义 IBAction 方法

（这是假设我关于理解您的代码的第一个陈述是正确的）

# c# - 在c#中拆分逗号分隔的字符串并需要将其保存在两个单独的变量中

> ID：14495148
> 
> 赞同：0
> 
> 时间：2013-01-24T06:22:01.217
> 
> 标签：c#

我必须在 c# 中拆分逗号分隔的字符串，并且需要将其保存在两个变量中。C#函数如下：

```
public int InsertLogDetails(string RunIDStartTime, int Distribution_ID, List<string> additions, List<string> removals, bool status, string ErrorMessage)
{
    int Run_ID=0;
    DateTime StartTime=DateTime.Now;
    //Needs to split RunIDStartTime and needs to save it in Run_ID and StartTime
} 
```

RunIDStartTime 保存 Run_ID 和 StartTime 的值。（例如：5,Jan 23 2013 9:31AM）

任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:33:17.567

这是一个有效的答案，您不需要执行 .ToArray ，因为 Split 已经返回了一个数组。

```
var RunIDStartTime = "5,Jan 23 2013 9:31AM";
var listSplit = RunIDStartTime.Split(','); 
var id = int.Parse(listSplit[0]);
var dateTime = DateTime.Parse(listSplit[1]); 
```

`returns id = 5 and date = Jan 23 2013 9:31AM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:33:19.280

使用`int.TryParse`and`DateTime.TryParseExact`和 DateFormat 来解析字符串。要拆分，使用`string.Split`，例如：

```
string RunIDStartTime = "5,Jan 23 2013 9:31AM";

int Run_ID = 0;
DateTime StartTime = DateTime.MinValue;
string[] splittedArray = RunIDStartTime.Split(',');
if (splittedArray.Length >= 2)
{
    if (int.TryParse(splittedArray[0], out Run_ID))
    {
        //valid ID
    }
    else
    {
        //Invalid ID
    }
    if(DateTime.TryParseExact(splittedArray[1],"MMM d yyyy h:mmtt",CultureInfo.InvariantCulture,DateTimeStyles.None, out StartTime))
    {
        //Valid date
    }
    else
    {
        //invalid date
    }
} 
```

对于输出：

```
Console.WriteLine("ID : {0} Date: {1}", Run_ID, StartTime.ToString()); 
```

输出：

```
ID : 5 Date: 23/01/2013 9:31:00 AM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:41:50.233

```
public int InsertLogDetails(string RunIDStartTime, int Distribution_ID, List<string> additions, List<string> removals, bool status, string ErrorMessage)
{

    var tokens = RunIDStartTime.split(',');
    int Run_ID= int.Parse(tokens[0]);
    DateTime StartTime = DateTime.Parse(tokens[1],"MMM d yyyy h:mmtt", CultureInfo.InvariantCulture, DateTimeStyles.None);        
} 
```

# javascript - 在原型（Object.defineProperty）上设置只读属性时也不例外

> ID：14495155
> 
> 赞同：2
> 
> 时间：2013-01-24T06:22:48.737
> 
> 标签：javascript, strict-mode

我在对象和适当的单元测试上创建了一个只读属性。

```
//works as expected
function OnSelf() {
    this._val = 'test';
    Object.defineProperty(this, 'test', {
        enumerable: true,
        configurable: false,
        get: function () {
            return this._val;
        }
    });
} 
```

但是，我意识到我应该将只读属性放在原型上，而不是每个单独的实例上。我更改了我的代码，然后我的一个测试失败了。

```
//no exception when trying to delete the property
function OnPrototype() {
    this._val = 'test';

}
Object.defineProperty(OnPrototype.prototype, 'test', {
    enumerable: true,
    configurable: false,
    get: function () {
        return this._val;
    }
}); 
```

看来，当删除原型上的只读属性时，不会抛出异常，但是当属性在对象上时，会抛出异常。

```
var s = new OnSelf();
delete s.test; // throws error

var p = new OnPrototype();
delete p.test; // doesn't delete it, but no error occurs 
```

我创建了[http://jsfiddle.net/pdgreen/3BGfM/](http://jsfiddle.net/pdgreen/3BGfM/)来演示这个问题。我用 chrome 和 firefox 在 Mac 上确认了相同的行为。

这是正确的事情吗？为什么如果属性在对象上，会抛出异常，但在原型上，没有异常？这让我很惊讶。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:34:47.993

这是您看到的正确行为。'delete' 关键字只删除对象自身的属性；它不能删除对象原型的属性。（如果是这样，那就太糟糕了——它会弄乱从同一个原型继承的任何其他对象！）

尝试以下操作：

```
> function Constructor() {}
undefined
> Constructor.prototype.test = "Prototype";
"Prototype"
> var obj = new Constructor();
undefined
> obj.test
"Prototype"
> obj.test = "Child"
"Child"
> obj.test
"Child"
> delete obj.test
true
> obj.test
"Prototype" 
```

原型继承的关键是原型是包含自己属性的实际对象，并且继承是完全实时和动态的。如果一个对象没有定义属性但其原型链中的一个对象定义了，则子对象继承该值。当它的值在本地被覆盖时，它现在定义了该属性本身。如果子对象的属性被删除，原型中的值会再次出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:33:33.093

当属性直接在对象上定义时，对象就有一个可以删除的“自己的”属性。但是，如果属性是在原型上定义的，那么就没有“自己的”属性要删除，因此删除操作是空操作。该属性*实际上*位于原型上（这就是原型继承的工作方式，除非更改，否则该属性实际上并未添加到对象中）。

弄清楚这是一个曲折的通道迷宫，所有类似的......也称为 ES5 规范，但关键部分（在解码后）是[8.12.7](http://es5.github.com/#x8.12.7)，再加上意识到该`GetOwnProperty`部分中讨论的内部方法将`undefined`在原型案例中返回。

# android - 在 Titanium Map 视图中用字符或数字替换注释图像

> ID：14495166
> 
> 赞同：1
> 
> 时间：2013-01-24T06:23:57.887
> 
> 标签：android, titanium-mobile

我使用以下代码创建了地图视图

```
var map = Ti.Map.createView({   

    mapType:Titanium.Map.STANDARD_TYPE,
    regionFit: true,
    animate: true,
    touchEnabled: true,
    userLocation:true,
    region:{

        latitude: 19.076719,
        longitude: 72.878583,
        latitudeDelta:0.5,
        longitudeDelta:0.5
    }   

 }); 
```

我正在使用以下代码创建注释

```
var pin = Ti.Map.createAnnotation({

    latitude:19.076719,
    longitude:72.878583,
    title:  "Dronzer",
    image:"pin.png"

});
map.addAnnotation(pin); 
```

**问题：**如何将此图像替换为数字“12”以在地图上显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:18:08.970

几天后，我找到了解决方案。

1.  创建标签

    ```
     var price = Ti.UI.createLabel({

                    text : "  "+data.price,//Number=12 Input from server
                    color : 'black',
                    font : {fontSize:'15dp',font:"monospace",fontWeight:"bold"},
                    height : '30dp',
                    width : '30dp',
                    left: '50%',     
                    backgroundImage:"red_pin1.png",

                }); 
    ```

2.  创建一个 ImageView 并将其图像属性设置为 blob。

    ```
    var anImageView = Ti.UI.createImageView({
                    image : price.toImage(), //setting label as a blob
                    width : 'auto',
                    height : 'auto',
                }); 
    ```

3.  创建一个 Annotation 并将其 image 属性设置为 blob。

    ```
    var pin = Ti.Map.createAnnotation({

                    myid:data._id,
                    latitude:data.latitude,
                    longitude:data.longitude,
                    title:  data.vendor_name,
                    image:anImageView.toBlob() //setting ImageView as blob

                }); 
    ```

# java - Java Applet 游戏双缓冲因 switch 语句而中断

> ID：14495174
> 
> 赞同：0
> 
> 时间：2013-01-24T06:24:47.223
> 
> 标签：java, applet, awt, switch-statement, doublebuffered

我刚开始尝试制作游戏，我做了一个 HelloWorld Applet，然后测试了我在上面滚动的想法，最终它开始变成了“直升机”风格的游戏。现在一切正常，直到我决定放入一堆 switch 语句来处理状态（标题屏幕、运行和游戏结束）。之前运行的代码没有改变，我的新“介绍屏幕”工作正常，但是当您切换到游戏状态时，双缓冲似乎失控了。游戏前景快速闪烁，并切掉了三角形，而背景几乎没有渲染。这只是我探索游戏编码的基本原则，所以它不是优雅的或模块化的或任何东西，但它应该可以工作......

[编辑] 我知道 Applets 和 AWT 通常可能是一个不好的方法，但我是这样开始的，我只是想了解它是如何工作的以及我做错了什么，这样我才能感到满意并继续前进。

```
package testStuff;

import java.awt.*;
import java.applet.*;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class HelloWorld extends Applet implements Runnable{

//game time counter
int count = 0;

//controller object
Controller control;

//accesses images and creates image variables
File wavesource = new File("C:\\sourceimages\\waves.jpg");
File playerSource = new File("C:\\sourceimages\\plane3.png");
Image player = null;
Image waves = null;

//font for score
Font myFont;

//double buffer objects
Graphics bground;
Image bgImage = null;
private int bgx = 0;

//player position
private int xPos=0;
private int yPos=50;

//arrays for tunnel locations
private int[] topTunnel = new int[200];
private int[] botTunnel = new int[200];

//size of tunnel
private int tunnelSize;

//boolean determines direction of tunnel movement
private boolean tunUp;

//state
private int state;

//"constructor"
public void init(){

    //set state
    state = 0;
    //instantiates controller adds it to the applet
    control = new Controller();
    this.addKeyListener(control);
    //instantiates images
    try {
        waves = ImageIO.read(wavesource);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        player = ImageIO.read(playerSource);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //instantiates arrays and tunnel size
    for(int i=0;i<199;i++){
        topTunnel[i]=-1;
        botTunnel[i]=-1;
    }
    topTunnel[199]=20;
    botTunnel[199]=179;
    tunnelSize = botTunnel[199]-topTunnel[199];
    tunUp = false;
}
public void paint(Graphics g){
    switch(state){
    case 0:
        g.setColor(Color.black);
        myFont = new Font("Courier", Font.BOLD+Font.ITALIC, 12);
        g.setFont(myFont);
        g.drawString("DON'T CRASH THE PLANE BRO", 10, 100);
        myFont = new Font("Courier", Font.PLAIN, 8);
        g.setFont(myFont);
        g.drawString("Press Spacebar to Play", 40, 150);
        break;
    case 1:
        g.drawImage(player, xPos, yPos, null);
        g.setColor(Color.red);
        for(int i=0;i<200;i++){
            g.fillRect(i, 0, 1, topTunnel[i]);
            g.fillRect(i, botTunnel[i], 1, botTunnel[i]);
        }
        g.setColor(Color.cyan);
        myFont = new Font("Helvetica", Font.PLAIN, 12);
        setFont(myFont);
        if(count<170)
            g.drawString("SCORE: " + 0, 0, 12);
        else
            g.drawString("SCORE: " + (this.count-170), 0, 12);
        break;
    }
}

public void start(){
    Thread thread = new Thread(this);
    thread.start();
}

@Override
public void run(){
    while(true){
        switch(state){
        case 0:
            //increases count
            count++;

            //paints
            this.repaint();

            try {
                    Thread.sleep(1000/30);
                } catch (InterruptedException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            if(control.spaceDown()){
                state = 1;
                count = 0;
            }
            break;

        case 1:
            //increases count
            count++;

            //handles scrolling
            if(xPos<75){
                xPos++;
            }
            else{
                if(bgx>-600){
                    bgx--;
                }
                else{
                    bgx=0;
                }
            }
            //handles input
            if(control.spaceDown()==true&&yPos>=0){
                yPos--;
            }
            else if(yPos<180){
                yPos++;
            }
            //repositions tunnel
            if(xPos>=75){
                for(int i=1;i<200;i++){
                    topTunnel[i-1]=topTunnel[i];
                    botTunnel[i-1]=botTunnel[i];
                }
            }
            //defines new tunnel space
            if(topTunnel[199]<=0 || !tunUp)
                topTunnel[199]++;
            if(botTunnel[199]>=200 || tunUp)
                topTunnel[199]--;
            botTunnel[199] = topTunnel[199]+tunnelSize;

            //randomly chooses direction to move tunnel
            double randomNum = Math.random();
            if(randomNum>.5)
                tunUp = true;
            else
                tunUp = false;

            //narrows tunnel
            if(count%20 == 0)
                tunnelSize--;

            //calls update
            this.repaint();
            //handles framerate
            try {
                Thread.sleep(1000/30);
            } catch (InterruptedException e) {
                 //TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
    }
}

public void update(Graphics g){

    //instantiates image and graphics on first tick
    if(bgImage == null){
        bgImage = createImage(this.getSize().width, this.getSize().height);
        bground = bgImage.getGraphics();
    }
    //create background based on state
    switch(state){
    case 0:
        //flashing colors!
        if(count%20<10){
            bground.setColor(Color.yellow);
            bground.fillRect(0, 0, 200, 200);
        }
        else{
            bground.setColor(Color.orange);
            bground.fillRect(0, 0, 200, 200);
        }
        break;
    case 1:
        //draws background image(s)
        bground.drawImage(waves,bgx,0,this);
        if(bgx<-399)
            bground.drawImage(waves,bgx+600,0,this);
        break;
    }
    //paint over the background then draw it to screen
    paint(bground);
    g.drawImage(bgImage, 0, 0, this);
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:23:30.433

您需要“清除”每一帧上的图形，否则您正在绘制之前绘制的内容......

在下面的示例中，我在“播放”时填充了图形上下文，但在暂停时保持原样，您应该能够看到区别......

```
public class HelloWorld extends Applet implements Runnable {

    private int direction = 4;
    private int state = 0;
    private Image bgImage;
    private Graphics bground;
    private int count;

    private int x = 0;

//"constructor"
    public void init() {
        addKeyListener(new KeyAdapter() {

            @Override
            public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_SPACE) {
                    if (state == 0) {
                        state = 1;
                    } else if (state == 1) {
                        state = 0;
                    }
                }
            }

        });
    }

    public void paint(Graphics g) {
        switch (state) {
            case 0:
                g.setColor(Color.black);
                g.drawString("DON'T CRASH THE PLANE BRO", 10, 100);
                g.drawString("Press Spacebar to Play", 40, 150);
                break;
            case 1:
                break;
        }
    }

    public void start() {
        Thread thread = new Thread(this);
        thread.start();
    }

    @Override
    public void run() {
        while (true) {
            switch (state) {
                case 0:
                    count++;
                    this.repaint();
                    break;
                case 1:

                    x += direction;
                    if (x < 0) {
                        x = 0;
                        direction *= -1;
                    } else if (x > getWidth()) {
                        x = getWidth();
                        direction *= -1;
                    }

                    //calls update
                    this.repaint();
                    //handles framerate
                    try {
                        Thread.sleep(1000 / 30);
                    } catch (InterruptedException e) {
                        //TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    break;
            }
        }
    }

    public void update(Graphics g) {

        //instantiates image and graphics on first tick
        if (bgImage == null) {
            bgImage = createImage(this.getSize().width, this.getSize().height);
            bground = bgImage.getGraphics();
        }
        //create background based on state
        switch (state) {
            case 0:
                //flashing colors!
                if (count % 20 < 10) {
                    bground.setColor(Color.yellow);
                    bground.fillRect(0, 0, 200, 200);
                } else {
                    bground.setColor(Color.orange);
                    bground.fillRect(0, 0, 200, 200);
                }
                break;
            case 1:
                bground.setColor(Color.WHITE);
                bground.fillRect(0, 0, getWidth(), getHeight());
                bground.setColor(Color.RED);
                int y = (getHeight() / 2) - 4;
                bground.fillOval(x, y, 8, 8);
                break;
        }
        //paint over the background then draw it to screen
        paint(bground);
        g.drawImage(bgImage, 0, 0, this);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:55:05.290

我认为你应该开始但添加更多的大括号。我是编码的初学者，但从我一直在阅读的内容来看，在代码中的某些语句上编写没有大括号的冗长语句会导致一些错误。

这里有很多过程，我觉得大括号有助于

> ```
>  //defines new tunnel space
>         if(topTunnel[199]<=0 || !tunUp)
>             topTunnel[199]++;
>         if(botTunnel[199]>=200 || tunUp)
>             topTunnel[199]--;
>         botTunnel[199] = topTunnel[199]+tunnelSize; 
> ```

```
 //randomly chooses direction to move tunnel
        double randomNum = Math.random();
        if(randomNum>.5)
            tunUp = true;
        else
            tunUp = false;

        //narrows tunnel
        if(count%20 == 0)
            tunnelSize--;

        //calls update
        this.repaint(); 
```

如果我错了，请纠正我，我也想学习！

# amazon-s3 - 在 S3 上压缩文件

> ID：14495176
> 
> 赞同：29
> 
> 时间：2013-01-24T06:24:53.013
> 
> 标签：amazon-s3, compression, hive, file-transfer, emr

我在 S3 上有一个 17.7GB 的文件。它是作为 Hive 查询的输出生成的，并且未压缩。

我知道通过压缩它，它大约是 2.2GB (gzip)。当传输成为瓶颈（250kB/s）时，如何尽快在本地下载此文件。

我没有找到任何直接的方法来压缩 S3 上的文件，或者在 s3cmd、boto 或相关工具中启用传输压缩。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T06:35:26.387

S3 不支持流压缩，也无法远程压缩上传的文件。

如果这是一次性过程，我建议将其下载到同一区域的 EC2 机器上，在那里压缩，然后上传到您的目的地。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html)

如果你需要这个更频繁

[通过 S3 从 Amazon CloudFront 提供 gzip 后的 CSS 和 JavaScript](https://stackoverflow.com/questions/5442011/serving-gzipped-css-and-javascript-from-amazon-cloudfront-via-s3)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-04T13:21:59.433

迟到的答案，但我发现这工作得很好。

```
aws s3 sync s3://your-pics .

for file in "$(find . -name "*.jpg")"; do gzip "$file"; echo "$file";  done

aws s3 sync . s3://your-pics --content-encoding gzip --dryrun 
```

这会将 s3 存储桶中的所有文件下载到机器（或 ec2 实例），压缩图像文件并将它们上传回 s3 存储桶。在删除空运行标志之前验证数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-08T11:42:42.860

现在 Lambda 中有预构建的应用程序，您可以使用它们来压缩 S3 存储桶中的图像和文件。因此，只需创建一个新的 Lambda 函数并选择您选择的预构建应用程序并完成配置。

1.  步骤 1 - 创建一个新的 Lambda 函数
2.  第 2 步 - 搜索预建应用 [![在此处输入图像描述](../Images/195ecb6fd29d36c6dd49b93a92f8f3ca.png)](https://i.stack.imgur.com/b8ZAf.jpg)
3.  第 3 步 - 选择适合您需要的应​​用程序并通过提供 S3 存储桶名称来完成配置过程。 [![在此处输入图像描述](../Images/006d4c008af93926ade3e7682fd96ac3.png)](https://i.stack.imgur.com/j1Qby.jpg)

# android - 即使声明了类，Classnotfound 异常

> ID：14495178
> 
> 赞同：0
> 
> 时间：2013-01-24T06:24:55.793
> 
> 标签：android

当我通过 eclipse 运行它时，我的应用程序运行良好，但是当我导出它然后通过 adb install 安装它并运行时，它会因以下堆栈跟踪而崩溃。

基本上，它表示未找到主启动器活动，尽管它已声明，并设置为具有启动器类别的主活动：

**堆栈跟踪：**

```
01-24 11:50:59.029: E/AndroidRuntime(7768): Uncaught handler: thread main exiting due to uncaught exception
01-24 11:50:59.299: E/AndroidRuntime(7768): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.nitinbansal85.android.carplexindia/com.nitinbansal85.android.carplexindia.ActivityDashboard}: java.lang.ClassNotFoundException: com.nitinbansal85.android.carplexindia.ActivityDashboard in loader dalvik.system.PathClassLoader@32518de0
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2474)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2569)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread.access$2200(ActivityThread.java:125)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1914)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.os.Looper.loop(Looper.java:123)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread.main(ActivityThread.java:4420)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at java.lang.reflect.Method.invokeNative(Native Method)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at java.lang.reflect.Method.invoke(Method.java:521)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:924)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:682)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at dalvik.system.NativeStart.main(Native Method)
01-24 11:50:59.299: E/AndroidRuntime(7768): Caused by: java.lang.ClassNotFoundException: com.nitinbansal85.android.carplexindia.ActivityDashboard in loader dalvik.system.PathClassLoader@32518de0
01-24 11:50:59.299: E/AndroidRuntime(7768):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-24 11:50:59.299: E/AndroidRuntime(7768):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2466)
01-24 11:50:59.299: E/AndroidRuntime(7768):     ... 11 more
01-24 11:51:01.369: E/msm7k.gralloc(1281): [unregister] handle 0x43bf20 still locked (state=40000001) 
```

我也在使用`facebook sdk`, 和`airpush`,`startApp sdk's`并已将它们包含在导入/导出的顺序中

有什么建议吗？

提前 **谢谢编辑**

忘记提及我已经重命名了我的项目和包含它的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:37:36.547

对于 android 应用程序，我对外部 jar 文件有同样的问题。在我的情况下，解决方案是将 jar 从“lib”文件夹移动到 android 默认的“libs”文件夹。

当 jar 在 lib 文件夹中（也被添加到构建路径中）时，虽然 Eclipse 中没有构建问题，但应用程序在运行时给出了 ClassNotFoundException。将 jar 移动到“libs”文件夹后，该 jar 开始出现在“Android Dependencies”下，并且应用程序开始正常工作。

这些是关于同一主题的其他一些讨论。

```
1)http://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-    android-project

2)http://stackoverflow.com/questions/7185488/android-what-is-the-folder-name-of-the-jar-files-lib-or-libs

3)http://stackoverflow.com/questions/2611105/how-to-specify-lib-folder-for-jars-when-using-android-generated-ant-build-file 
```

这可能会有所帮助...!!!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:50:38.300

正如 Stacktrace 告诉 android 首先启动 NewActivity -> LoadClass -> FindClass -> ClassNotFoundException，可能是：

*   清单中的错误包声明（com.nitinbansal85.android.carplexindia.ActivityDashboard）

*   Android Debug Bridge(ADB) apk 创建问题。

*   无法从库中加载其他 jar

    您也可以尝试从 eclipse 编译项目并直接从项目的 bin 目录中使用 .apk 并检查差异。

# git - git stash apply 无法获得我真正需要的版本

> ID：14495179
> 
> 赞同：0
> 
> 时间：2013-01-24T06:24:58.053
> 
> 标签：git, git-stash

首先分支在master中，然后

(1) `git checkout -b test1`、然后修改一个文件ac，然后`git stash`

现在 git stash list

```
stash@{0}: WIP on test1: 7aa1dbd Merge "RR:AA123" 
```

(2) `git checkout -b test2`，然后修改另一个文件bc，然后`git stash`

现在 git stash list

```
stash@{0}: WIP on test2: 7aa1dbd Merge "RR:AA123"
stash@{1}: WIP on test1: 7aa1dbd Merge "RR:AA123" 
```

(3) 现在`git checkout test`，我想获取修改后的 ac 文件，它位于`stash@{1}`

```
 git stash apply --stash@{1}, 
```

发现得到 bc 但不是 ac

我是否错过了一些试图获得隐藏弹出的步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:28:49.313

你应该使用

```
git stash apply stash@{1} 
```

不是

```
git stash apply --stash@{1} 
```

`--stash@{1}`将作为无效选项被忽略，因此它等于`git stash apply`

# jsf - 如何在 JSF 中禁用多个 h:inputtext 字段

> ID：14495180
> 
> 赞同：2
> 
> 时间：2013-01-24T06:25:06.417
> 
> 标签：jsf

在我的主页（.xhtml）中，JSF 页面中有 4 个 h:inputText 框和一个 serach 按钮（h:commandButton）

```
<h:inputText id="stlID"    value="#{searchSettlementTransRequest.stlmtTransId}" name='stlmt'> 
<h:inputText id="pmtID"    value="#{searchSettlementTransRequest.pmtTransId}"   name='pmt'>
<h:inputText id="AgentID"  value="#{searchSettlementTransRequest.AgentId}"      name='agnt'>
<h:inputText id="AgencyID" value="#{searchSettlementTransRequest.AgencyId}"     name='agncy'>

<h:commandButton id="tranSearchBtn" styleClass="valign first button-search sSearch" action="stlmtSubmit"/> 
```

我的要求是：

1.  在第一个输入字段中输入的数据上，应禁用其他输入字段（即 2、3、4）。
2.  在第二个输入字段中输入的数据上，应禁用其他输入字段（即 1、3、4）。等等.. 注意：同时，如果用户在第 1 或第 2 或第 3 或第 4（用户动态）字段中输入数据并在删除输入字段之前删除相同的数据，在这种情况下应启用所有字段。当我在单击“搜索”按钮后得到响应（空或非空数据响应）时，所有输入字段都应启用以进行另一个搜索（现在用户可以在 4 个字段中的任何一个中输入数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:30:04.317

如果您只想在 jsf 中执行此操作，只需添加一些 AJAX 调用。下面的一些建议：

将值添加到您的所有`<h:inputText`属性`disabled`中`#{searchSettlementTransRequest.getDisabled('this_component_id')"`。所以整个事情看起来像这样：

```
<h:inputText id="someId1" value="#{searchSettlementTransRequest.someValue}" name="stlmt" disabled="#{searchSettlementTransRequest.getDisabled('someId1')}"/> 
```

接下来在您的 bean 处理此请求更改设置为 `stlmTransId, pmtTransId, AgentId, AgencyId' 他们将标记此值正在设置：

```
public void setXXX(XXX xxx) {

  // your actual code comes here and at the end set that this component was changed
  actuallyChanged = id_of_input_text_component_corresponding_to_this_value_as_string;

} 
```

当然，您必须向`String actuallyChanged`bean 添加字段。方法`getDisabled(String compId)`会知道长相：

```
public String getDisabled(String compId) {
  if (actuallyChanged.equals(compId)) {
    return "";
  else {
    return "disabled";
  }
} 
```

对于您的所有组件，您还添加了这样的 AJAX 调用：

```
<f:ajax event="change" execute="@this" render="stlID pmtID AgentID AgencyID"/> 
```

所以知道一个组件的值何时会改变，所有其他组件都将被禁用。但是在调用后使它们启用是不可能的，因为如果没有客户端脚本，您就不能轻易地使它们在选择或获得焦点或任何东西时可用。

如果您想暂时禁用组件，例如，当用户键入一个组件时，其他所有组件都已禁用，但是当他选择其中一些组件时，将启用该组件，而所有其他组件（包括他首先编写文本的组件）将被禁用。在这种情况下，更好的方法是为此使用客户端脚本，例如 JavaScript。

更新以完全匹配您在 JavaScript (jQuery) 中的问题

向所有组件添加这样的事件：

```
onkeyup="$('#thisComponentId').attr('disabled', false); $('#otherComponentId').attr('disabled', true); $('#otherComponentId').attr('disabled', true); " 
```

**发表评论后，您可以将其更改为：**

```
onkeyup="if ($('#thisComponentId').val() && $('#thisComponentId').val() == '') { // here set enable for all components } else { // here set disable for all other components } 
```

这不是很复杂的方法，但它应该可以工作。知道当您开始输入一个组件时，其他组件将被禁用，但当您发送请求时，所有组件都将再次启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:38:57.157

如果您希望在每次页面加载后启用输入，您可以有一个表示页面已加载的标志，并在通过侦听器的每个 ajax 请求后将该标志设置为 false。并且为了确保在完成页面加载后标志设置为 true，您可以使用`preRenderView`event. `preRenderView`如果页面是通过完整请求而不是 ajax 请求加载的，您只需要为将标志设置为 true 的事件执行一个方法。如果页面加载了ajax请求，`faces-request`参数将设置为“partial/ajax”。

```
public static final String INITIAL_VALUE = ""; // I assume your fields are integer and they are initialized to INITIAL_VALUE in the first place    

public Boolean pageIsLoadedWithFullRequest = true;

public void preRenderView()
{
   //check whether the request is an ajax request or not  

Map<String, String> requestHeaderMap = FacesContext.getCurrentInstance().getExternalContext().getRequestHeaderMap();
if(!"partial/ajax".equals(requestHeaderMap.get("faces-request")))
{
    pageIsLoadedWithFullRequest = true;
} 
```

如果您想在用户写入其中一个字段时禁用其他输入，您可以在 blur 事件之后进行 ajax 调用以更改其他输入字段的状态并`pageIsLoadedWithFullRequest`在侦听器中将标志设置为 false。

```
public void madeAjaxRequest()
{
     pageIsLoadedWithFullRequest = false;
}

public Boolean getStlIDEnabled()
{
return pageIsLoadedWithFullRequest || !stlmtTransId.equals(INITIAL_VALUE) && pmtTransId.equals(INITIAL_VALUE) && AgentId.equals(INITIAL_VALUE) && AgencyId.equals(INITIAL_VALUE);
}

public Boolean getPmtTransIdEnabled()
{
return pageIsLoadedWithFullRequest || stlmtTransId.equals(INITIAL_VALUE) && !pmtTransId.equals(INITIAL_VALUE) && AgentId.equals(INITIAL_VALUE) && AgencyId.equals(INITIAL_VALUE);
}

public Boolean getAgentIdEnabled()
{
return pageIsLoadedWithFullRequest || stlmtTransId.equals(INITIAL_VALUE) && pmtTransId.equals(INITIAL_VALUE) && !AgentId.equals(INITIAL_VALUE) && AgencyId.equals(INITIAL_VALUE);
}

public Boolean getAgencyIdEnabled()
{
return pageIsLoadedWithFullRequest || stlmtTransId.equals(INITIAL_VALUE) && pmtTransId.equals(INITIAL_VALUE) && AgentId.equals(INITIAL_VALUE) && !AgencyId.equals(INITIAL_VALUE);
}

<f:event type="preRenderView" listener="#{searchSettlementTransRequest.preRenderView()}"/> <!--This will ensure that preRenderView method will be called right before rendering of the view ends -->
<h:inputText  id="stlID"  value="#{searchSettlementTransRequest.stlmtTransId}" name='stlmt' disabled="#{not searchSettlementTransRequest.stlIDEnabled}"/> 
<h:inputText  id="pmtID"  value="#{searchSettlementTransRequest.pmtTransId}" name='pmt' disabled="#{not searchSettlementTransRequest.pmtTransIdEnabled}"/>
<h:inputText  id="AgentID"  value="#{searchSettlementTransRequest.AgentId}" name='agnt' disabled="#{not searchSettlementTransRequest.AgentIdEnabled}"/>
<h:inputText  id="AgencyID"  value="#{searchSettlementTransRequest.AgencyId}" name='agncy' disabled="#{not searchSettlementTransRequest.AgencyIdEnabled}"/> 
```

如果你想通过 ajax 禁用它们，你应该添加 f:ajax 命令并渲染所有这四个 inputTexts。例子：

```
<h:inputText  id="stlID"  value="#{searchSettlementTransRequest.stlmtTransId}" name='stlmt' disabled="#{not searchSettlementTransRequest.stlIDEnabled}"> 
<f:ajax event="blur" 
 listener=#{searchSettlementTransRequest.madeAjaxRequest()}
 execute="stlID pmtID AgentID AgencyID"
 execute="stlID pmtID AgentID AgencyID"/>
</h:inputText> 
```

**不相关 AgentId**、AgencyID 等变量的首字母大写并不是一个好习惯，如果将它们改为 agentId 和 AgencyID 应该会更好。

干杯

# java - 具有 int[] 属性的 LWJGL opengl glsl 着色器

> ID：14495182
> 
> 赞同：0
> 
> 时间：2013-01-24T06:25:34.053
> 
> 标签：java, opengl, glsl, lwjgl

我正在为骨骼动画编写一个着色器，它需要一个 int[] 属性来保存一个 mat4[] 的索引，该 mat4[] 包含关节的变换矩阵。我的问题是我无法创建存储 int[] 的 VBO。我试过使用 GL30.glVertexAttribIPointer() 但是，我的电脑不支持 Opengl 3.0。所以我不得不使用我读过的 glVertexAttribPointer() 将所有值转换为浮点数。将 int[] 存储在着色器可以访问的 VBO 中的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:07:06.770

您正在尝试做的事情有两个问题。

第一个问题是你试图传递整数。使用花车；使用浮点数作为数组的索引没有任何问题。如果您传递`GL_FALSE`的`normalized`参数`glVertexAttribPointer`，您将得到有效的整数。您可以将每个索引作为`GL_UNSIGNED_BYTE`.

第二个问题是你试图传递一个数组。别那样做; 你想要一个`vec4`，而不是一个数组。XYZW 代表您与矩阵一起使用的四个索引。

如果一个顶点需要超过 4 个矩阵怎么办？也停止这样做；其他人都是这样剥皮的。其工作方式是，当您构建顶点数据时，如果一个顶点受超过 4 个矩阵的影响，则您只选择权重最大的 4 个（相应地重新调整权重）。

# ios - Box Rest API V2

> ID：14495186
> 
> 赞同：1
> 
> 时间：2013-01-24T06:26:00.703
> 
> 标签：ios, objective-c

我想将 Box API 带到我的 iOS 应用程序中。我看到有 2 个版本的 Box API。版本 1 已弃用，将于 2013 年 12 月 14 日停用。但我找不到可以下载 API 版本 2 的完整源代码的地方，我想为我的 iOS 应用程序自定义 API，而不是使用静态库。有谁知道我可以在哪里下载 Box 的 API 版本 2 源代码？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T14:50:09.857

[GitHub 上](https://github.com/box/box-ios-sdk-v2)提供了 v2 iOS SDK 的源代码。

# file - AutoHotKey - 运行注册表文件的键盘快捷键 [简单请求]

> ID：14495188
> 
> 赞同：0
> 
> 时间：2013-01-24T06:26:10.597
> 
> 标签：file, keyboard, registry, shortcut, autohotkey

我刚刚安装了 AutoHotKey，我正在尝试分配一个键盘快捷键来执行特定的代码，这些代码只会在我的一个文件夹中运行一个注册表文件。

基本上我试图分配一个键盘快捷键来切换 Windows 7 中的扬声器配置（在 2.1 立体声到 5.1 环绕声之间）。我有注册表文件可以一键完成这项任务，但我想分配一个键盘快捷键来自动运行/执行这些。

这两个注册表文件位于此处：

```
D:\Windows Speaker Configs\2.1_Stereo_Windows_Speaker_Config.reg
D:\Windows Speaker Configs\5.1_Surround_Windows_Speaker_Config.reg 
```

我想要 (LEFT) CTRL + (LEFT) SHIFT + 1 来运行 2.1 立体声文件。我想要 (LEFT) CTRL + (LEFT) SHIFT + 2 来运行 5.1 环绕文件。

我下载了宏记录器（http://www.autohotkey.com/board/topic/21866-macro-recorder/）。

以下是将执行两个注册表文件中的任何一个的代码：

```
Send, {LControl up}{LShift up}
WinActivate, Windows Speaker Configs ahk_class CabinetWClass
WinActivate, Registry Editor ahk_class #32770
WinActivate, Windows Speaker Configs ahk_class CabinetWClass
WinActivate, Registry Editor ahk_class #32770
WinActivate, Windows Speaker Configs ahk_class CabinetWClass
Send, {LCtrl}{LShift} 
```

我不确定上面的代码是否有帮助，但是对于如何完成这个简单的任务，任何帮助都将不胜感激。

请记住，每当您运行注册表文件时，它都会通过带有“是”或“否”按钮的对话框提示您单击：“添加信息可能会无意中更改或删除值并导致组件停止正常工作。如果您不信任来源myfile.reg 中的此信息，请勿将其添加到注册表中。”

显然我想在我的场景中单击“是”按钮。

提前致谢！

〜Im2bz2p345 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:44:05.693

使用标志调用 regedit`/s`以抑制对话框

[http://support.microsoft.com/kb/82821](http://support.microsoft.com/kb/82821)

```
Run, regedit /s "c:\test file.reg" 
```

# matlab - Intersection indices by rows

> ID：14495189
> 
> 赞同：4
> 
> 时间：2013-01-24T06:26:14.353
> 
> 标签：matlab, matrix, indexing, intersection, vectorization

Given these two matrices:

```
m1 = [ 1 1;
       2 2;
       3 3;
       4 4;
       5 5 ];

m2 = [ 4 2;
       1 1;
       4 4;
       7 5 ]; 
```

I'm looking for a function, such as:

```
indices = GetIntersectionIndecies (m1,m2); 
```

That the output of which will be

```
indices = 
          1
          0
          0
          1
          0 
```

How can I find the intersection indices of rows between these two matrices **without using a loop** ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T06:33:08.533

One possible solution:

```
function [Index] = GetIntersectionIndicies(m1, m2)
[~, I1] = intersect(m1, m2, 'rows');
Index = zeros(size(m1, 1), 1);
Index(I1) = 1; 
```

By the way, I love the inventive solution of @Shai, and it is much faster than my solution if your matrices are small. But if your matrices are large, then my solution will dominate. This is because if we set `T = size(m1, 1)`, then the `tmp` variable in the answer of @Shai will be T*T, ie a very large matrix if `T` is large. Here's some code for a quick speed test:

```
%# Set parameters
T = 1000;
M = 10;

%# Build test matrices
m1 = randi(5, T, 2);
m2 = randi(5, T, 2);

%# My solution
tic
for m = 1:M
[~, I1] = intersect(m1, m2, 'rows');
Index = zeros(size(m1, 1), 1);
Index(I1) = 1;
end
toc

%# @Shai solution
tic
for m = 1:M
tmp = bsxfun( @eq, permute( m1, [ 1 3 2 ] ), permute( m2, [ 3 1 2 ] ) );
tmp = all( tmp, 3 ); % tmp(i,j) is true iff m1(i,:) == m2(j,:)
imdices = any( tmp, 2 );
end
toc 
```

Set `T = 10` and `M = 1000`, and we get:

```
Elapsed time is 0.404726 seconds. %# My solution
Elapsed time is 0.017669 seconds. %# @Shai solution 
```

But set `T = 1000` and `M = 100` and we get:

```
Elapsed time is 0.068831 seconds. %# My solution
Elapsed time is 0.508370 seconds. %# @Shai solution 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T06:31:09.040

How about using [`bsxfun`](http://www.mathworks.com/help/matlab/ref/bsxfun.html)

```
function indices = GetIntersectionIndecies( m1, m2 )
    tmp = bsxfun( @eq, permute( m1, [ 1 3 2 ] ), permute( m2, [ 3 1 2 ] ) );
    tmp = all( tmp, 3 ); % tmp(i,j) is true iff m1(i,:) == m2(j,:)
    indices = any( tmp, 2 );
end 
```

Cheers!

# c++ - pthread_sigmask：异常行为

> ID：14495192
> 
> 赞同：0
> 
> 时间：2013-01-24T06:26:27.113
> 
> 标签：c++, c, linux, pthreads, signals

我正在使用 Linux 并尝试与信号处理相关的代码。按照我正在尝试的代码，但我无法理解此代码的行为。

```
/**Globally declared variable**/

    time_t start, finish;
    struct sigaction sact;
    sigset_t new_set, old_set,test;
    double diff;

/**Function to Catch Signal**/
void catcher( int sig )
{
    cout<< "inside catcher() function\n"<<endl;
}

void Initialize_Signalhandler()
{

    sigemptyset( &sact.sa_mask );
    sact.sa_flags = 0;
    sact.sa_handler = catcher;
    sigaction( SIGALRM, &sact, NULL );

    sigemptyset( &new_set );
    sigaddset( &new_set, SIGALRM );

}

/**Function called by thread**/
void *threadmasked(void *parm)
{

/**To produce delay of 10sec**/
        do {
         time( &finish );
         diff = difftime( finish, start );
    } while (diff < 10);

    cout<<"Thread Exit"<<endl;

}

int main( int argc, char *argv[] ) {

    Initialize_Signalhandler();

    pthread_t a;
    pthread_create(&a, NULL, threadmasked, NULL);

    pthread_sigmask( SIG_BLOCK, &new_set, &old_set);

    time( &start );
    cout<<"SIGALRM signals blocked at %s\n"<< ctime(&start) <<endl;

    alarm(2); //to raise SIGALM signal

/**To produce delay of 10sec**/
        do {
         time( &finish );
         diff = difftime( finish, start );
    } while (diff < 10);

return( 0 );
} 
```

即使我正在使用“ pthread_sigmask（SIG_BLOCK，&new_set，&old_set）”。它没有阻塞信号。但是如果我删除“pthread_create(&a, NULL, threadmasked, NULL);” 它工作正常并阻止信号。我在这里观察到的另一件事是，如果我将 **pthread_sigmask**更改为**sigprocmask**行为保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:42:12.640

线程从创建它们的线程继承信号掩码。

因此，当您的代码在调用新创建的线程`pthread_sigmask()` **后**`pthread_create()`调用时，它的信号掩码没有被修改。

像这样更改您的代码，让事情按您的预期工作：

```
...

pthread_sigmask( SIG_BLOCK, &new_set, &old_set);

pthread_t a;
pthread_create(&a, NULL, threadmasked, NULL);

... 
```

# javascript - 在 AJAX 上使用 jQuery 选择器返回的数据

> ID：14495196
> 
> 赞同：1
> 
> 时间：2013-01-24T06:26:37.880
> 
> 标签：javascript, jquery, ajax, slide

我是 jQuery 的初学者，并且遇到了这个问题：

我有这张桌子：

```
<table>
    <tr><td><p>Name</p></td><td><p>Age</p></td><td><p>Info</p></td></tr>
    <tr><td colspan="3"><p>Blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah.</p>
    </td></tr>

    <tr><td><p>Name</p></td><td><p>Age</p></td><td><p>Info</p></td></tr>
    <tr><td colspan="3"><p>Blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah.</p>
    </td></tr>

    <tr><td><p>Name</p></td><td><p>Age</p></td><td><p>Info</p></td></tr>
    <tr><td colspan="3" class="xtra"><p>Blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah.</p>
    </td></tr>    
</table> 
```

我想隐藏/取消隐藏特定的行：

```
$(document).ready(function() {
    $("td[colspan=3]").find("p").hide();
    $("table").click(function(event) {
        event.stopPropagation();
        var $target = $(event.target);
        if ( $target.closest("td").attr("colspan") > 1 ) {
            $target.slideUp();
        } else {
            $target.closest("tr").next().find("p").slideToggle();
        }                    
    });
}); 
```

直接使用这种方法有效，但我使用 AJAX 加载此表 HTML，因此选择器不起作用。我应该如何修改我的选择器？

我正在用这个加载这个 HTML：

```
$.get('/tab.html',function(data){
        $('#tabContentBox').html(data);
                 ...
                 ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:30:13.593

委派活动是您需要做的

```
$('#tabContentBox').on("click","table",function(event) {
    event.stopPropagation();
    var $target = $(event.target);
    if ( $target.closest("td").attr("colspan") > 1 ) {
        $target.slideUp();
    } else {
        $target.closest("tr").next().find("p").slideToggle();
    }                    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:28:39.930

试试这个 ：

```
$(document).ready(function() {
$("td[colspan=3]").find("p").hide();
$(document).on('click', 'table', function(event) {
    event.stopPropagation();
    var $target = $(event.target);
    if ( $target.closest("td").attr("colspan") > 1 ) {
        $target.slideUp();
    } else {
        $target.closest("tr").next().find("p").slideToggle();
    }                    
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T22:47:54.290

注意：所有这些示例都包含一个缺陷，当您在最小化的情况下双击它时，它会导致展开部分消失。

缺陷来自以下代码： if ( $target.closest("td").attr("colspan") > 1 ) {

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:32:32.660

```
$.get('/tab.html' , function(data){$('#tabContentBox').html(data)})
.done(function(data) {
   $(#tabContentBox).on("click","table",function(event) {
event.stopPropagation();
var $target = $(event.target);
if ( $target.closest("td").attr("colspan") > 1 ) {
    $target.slideUp();
} else {
    $target.closest("tr").next().find("p").slideToggle();
} 
```

}); });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T20:57:20.957

如何对下表做同样的事情。单击应隐藏详细信息表的位置。

@model 元组

@{ ViewBag.Title = "你的活跃工作"; }

```
 <h2>Tool tracker</h2>

 <table id= "master">
 <tr style="background-color:Blue">
 <td></td>
 <td><font color="white">ScanCode</font></td>
 <td><font color="white">Description</font></td>
 <td><font color="white">Type</font></td>
 <td><font color="white">Date Out</font></td>
 <td><font color="white"> Date In</font></td>
 <td><font color="white">Responsible Employee</font></td>
 <td><font color="white">Charge Type</font></td>
 <td><font color="white">Qty</font></td>
 <td><font color="white">Rate</font></td>
 <td><font color="white">Charges to Date</font></td>
 <td><font color="white">Replacement Charges</font></td>
 <td><font color="white"> Status</font></td>
 </tr>

 @foreach (var j in Model.Item1)
 {
     //Master table
    <tr style="background-color:#ADD8E6">
    <td><b>+</b></td>
    <td><p><font color="black">@j.JobId</font></p></td>
    <td colspan="8"><p><font color="black">@j.Name-@j.ManagerName</font></p></td>
    <td><p><font color="black">@j.ChargesToDate</font></p></td>
    <td><p><font color="black">@j.ReplacementCharges</font></p></td>
    <td><p><font color="black">@j.JobStatus</font></p></td>
    </tr>
     //details table

     foreach (var d in Model.Item2.Where(t => t.JobId == j.JobId))
     {   <tr><table>
         <tr id = "details">
         <td colspan="0"></td>
         <td colspan="0">@d.Scancode</td>
         <td colspan="0">@d.Description</td>
         <td colspan="0">@d.Type</td>
         <td colspan="0">@d.DateOut</td>
         <td colspan="0">@d.DateIn</td>
         <td colspan="0">@d.ResponsibleEmployee</td>
         <td colspan="0">@d.ChargeType</td>
         <td colspan="0">@d.Quantity</td>
         <td colspan="0">@d.Rate</td>
         <td colspan="0">@d.ChargesToDate</td>
         <td colspan="0">@d.ReplacementCharges</td>
         <td colspan="0"></td>
         </tr></table></tr>
     }
 }

 </table> 
```

# php - Moodle 与我的一个 PHP 项目的集成

> ID：14495201
> 
> 赞同：2
> 
> 时间：2013-01-24T06:27:00.123
> 
> 标签：php, moodle

我一直在使用 php 开发一个项目，我的学生用来做测验（moodle 不能自己做） . 到目前为止，我一直在使用直接数据库读取进行身份验证，但我非常犹豫是否要写入 moodle 数据库。我也知道 LTI；我愿意使用它，但无法找到人类可读的文档和任何示例。如果您能给我提供一个理论较少但更适用于 LTI 的样本或文档，我们将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T14:15:31.150

为此，您需要使用 Web 服务 API。您需要先设置 Web 服务，请参阅[使用 Web 服务](http://docs.moodle.org/25/en/Using_web_services)。整个 API 文档可在您的 Moodle 站点上通过**Administration > Plugins > Web services > API Documentation**获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T15:03:28.403

您需要使用moodle 的External Tool，它正是为这种用途而创建的。外部工具在后台使用 LTI 将用户、课程、角色等信息发送到外部应用程序，如果配置为测验，外部应用程序甚至可以将分数发送回 Moodle。

查看：[https ://docs.moodle.org/23/en/External_tool](https://docs.moodle.org/23/en/External_tool)

您还必须制作您的测验应用程序，一个 LTI 提供商。这个开源包是开箱即用的包，用于在 ruby​​ 中创建 LTI 提供程序 - [https://github.com/instructure/ims-lti](https://github.com/instructure/ims-lti) 其他语言中也有类似的工具，但这个是最精致的一个。

# vb.net - 使用 VB.Net 在 Windows 防火墙中创建异常

> ID：14495202
> 
> 赞同：1
> 
> 时间：2013-01-24T06:27:00.317
> 
> 标签：vb.net, visual-studio, windows-firewall

如何使用 vb.net 代码将我的应用程序添加到 Windows 防火墙的例外列表中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:27:25.330

Windows Vista 和 7 提供了一个相当强大的防火墙 API，可用于向防火墙添加例外。如果代码以管理员权限运行，则下面的代码将为指定应用程序向 Windows 防火墙添加例外。向您的应用程序添加对**%systemroot%\system32\FirewallAPI.dll**的引用。

```
Imports NetFwTypeLib

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    ' Create the Application we want to add to the exception list
    Dim appType As Type = Type.GetTypeFromProgID("HnetCfg.FwAuthorizedApplication")
    Dim app As INetFwAuthorizedApplication
    app = DirectCast(Activator.CreateInstance(appType), INetFwAuthorizedApplication)

    ' Set the application properties
    app.Name = "Negative0's Sandbox"
    app.ProcessImageFileName = "C:\Users\Negative0\vbsandbox2.exe"
    app.Enabled = True

    ' Get the firewall manager, so we can get the list of authorized apps
    Dim fwMgrType As Type = Type.GetTypeFromProgID("HnetCfg.FwMgr")
    Dim fwMgr As INetFwMgr
    fwMgr = DirectCast(Activator.CreateInstance(fwMgrType), INetFwMgr)

    ' Get the list of authorized applications from the Firewall Manager, so we can add our app to that list
    Dim apps As INetFwAuthorizedApplications
    apps = fwMgr.LocalPolicy.CurrentProfile.AuthorizedApplications
    apps.Add(app)

End Sub 
```

[来源](http://www.johnkoerner.com/index.php?/archives/49-Creating-a-Firewall-Exception-in-VB.Net.html)

# javascript - 如何在 IE 中重新加载模式对话框

> ID：14495213
> 
> 赞同：2
> 
> 时间：2013-01-24T06:27:42.757
> 
> 标签：javascript, internet-explorer, modal-dialog

我正在开发一个使用 modaldialog( `showModalDialog()`) 的 Web 应用程序。用户必须填写一些文本字段，并且如果用户犯了错误，则需要重新加载对话框。我可以通过使用来想出这个`location.reload(true);`

但这在 IE 中不起作用。我错过了什么还是有任何限制？请指导我。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:37:18.720

做以下麻烦是因为分配给 location.href 将不起作用。它只会打开另一个窗口，该窗口从模态的父级加载页面。

首先，您需要在 head 部分创建一个基本标签，例如

```
<head>
    <base target="_self" />
</head> 
```

然后模拟一个用户点击一个链接，因为这个链接只是一个脚本的实用程序来激活重新加载过程，你可能想隐藏它。我们称此链接为 reload。</p>

```
<a id="reload">reload</a> 
```

重新加载模式对话框的脚本是

```
// Get the link object to simulate user click
var reload = document.getElementById('reload');

// Assign the modal url to the link then click!
reload.href = window.location.href;
reload.click(); 
```

您现在应该可以在 IE 中刷新模式对话框了。

# c++ - 混合静态和动态库时出现 LNK2005 错误

> ID：14495219
> 
> 赞同：1
> 
> 时间：2013-01-24T06:28:44.133
> 
> 标签：c++, dll, static, mixing, libs

我正在尝试创建`ficus.dll`链接到静态库`utils.lib`和动态库（称为`crux.dll`using `crux.lib`）的 DLL

生成时`crux.dll`，我也将`utils.lib`其包括在内。

链接时出现这些错误

> 1>crux.lib(crux.dll) : 错误 LNK2005: "public: char __thiscall std::basic_ios >::fill(char)" (?fill@?$basic_ios@DU?$char_traits@D@std@@@ std@@QAEDD@Z) 已在 Utils.lib(BaseTypes.obj) 中定义

我已经检查了 crux/utils/ 和 ficus 都使用相同的 /MTd 标志编译。

有没有办法避免这些链接错误（除了使用`/FORCE:MULTIPLE`）？

谢谢。

# cdi - @ByPassInterceptors 在接缝 3 中？

> ID：14495220
> 
> 赞同：0
> 
> 时间：2013-01-24T06:28:46.580
> 
> 标签：cdi, seam2, seam3

@ByPassInterceptor 注释已从我知道的接缝 3 中删除。

> 并且根据**CDI**文档，默认情况下，bean 存档没有通过拦截器绑定绑定的已启用拦截器。

那么，如果我在从 seam2 迁移到**seam 3时从项目中删除****@BypassInterceptor**注释是否安全？？？？？

 ****接缝3**中没有默认拦截器吗？

我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:12:08.260

是的，您可以安全地删除它们。Seam 2 和 CDI 的设计完全不同。如果您不希望拦截器运行，请将其从 beans.xml 或类中删除。**

# java - 我可能有一个空指针异常，我只是不知道在哪里

> ID：14495221
> 
> 赞同：0
> 
> 时间：2013-01-24T06:28:46.600
> 
> 标签：java, generator

我正在制作一个简单的代码生成器（非随机），但遇到了问题。用户将数据输入到 7 个文本字段中；然后将其内容放入字符串类型的数组中。然后我的代码获取该数组，分析不同的元素并吐出一个可用的代码（由我）。

但是，在我尝试标准化字符串数组（也就是让每个元素都成为小写字符串）时，它会导致整个程序停止工作，并且我得到了一个空指针异常。

我的具体错误信息是这样的：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
 at inventorycodeconverter.codeDisplay.calculateData(codeDisplay.java:48)
    at inventorycodeconverter.InventoryCodeConverterView.button1ActionPerformed(InventoryCodeConverterView.java:315)
    at inventorycodeconverter.InventoryCodeConverterView.access$900(InventoryCodeConverterView.java:23)
    at inventorycodeconverter.InventoryCodeConverterView$5.actionPerformed(InventoryCodeConverterView.java:211)
    at java.awt.Button.processActionEvent(Button.java:392)
    at java.awt.Button.processEvent(Button.java:360)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

似乎给麻烦的代码部分是这样的：

```
public void calculateData(){

     int i;
     for (i = 0; i < calculationBuffer.length; i++){ // calculationBuffer is defined and initialized elsewhere.

         calculationBuffer[i] = calculationBuffer[i].toLowerCase();// this is line 48 where the first error appears to be.
     }

     if (calculationBuffer[0].equals("cap")){
           displayBuffer[0] = "CAP"; // displayBuffer is defined and initialized elsewhere.
     }
     else {
         displayBuffer[0] = "#Error#";
     }

     if (calculationBuffer[1].equals("20/400")) {
           theTA.append("B");
     }
     else if (calculationBuffer[1].equals("20/410")){
           displayBuffer[1] = "C";
     }
     else if (calculationBuffer[1].equals("24/410")){
         displayBuffer[1] = "F";
     }
     else if (calculationBuffer[1].equals("24/415")) {
         displayBuffer[1] = "Y";
     }
     else if (calculationBuffer[1].equals("28/400")){
         displayBuffer[1] = "H";
     }
     else if (calculationBuffer[1].equals("28/415")) {
         displayBuffer[1] = "X";
     }
     else if (calculationBuffer[1].equals("28/410")) {
         displayBuffer[1] = "I";
     }
     else if (calculationBuffer[1].equals("33/400")) {
         displayBuffer[1] = "J";
     }
     else if (calculationBuffer[1].equals("38/400")) {
         displayBuffer[1] = "K";
     }
     else if (calculationBuffer[1].equals("43/400")) {
         displayBuffer[1] = "M";
     }
     else if (calculationBuffer[1].equals("45/400")) {
         displayBuffer[1] = "N";
     }
     else if (calculationBuffer[1].equals("58/400")) {
         displayBuffer[1] = "Q";
     }
     else if (calculationBuffer[1].equals("70/400")) {
         displayBuffer[1] = "S";
     }
     else if (calculationBuffer[1].equals("89/400")) {
         displayBuffer[1] = "T";
     }

 }

 public void displayData() {
      String displayString;
      displayString = Arrays.toString(displayBuffer);
      StringTokenizer st = new StringTokenizer(displayString, ",");

      while(st.hasMoreTokens()){
          String finalText = st.nextToken();

          theTA.append(finalText);
      }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:37:44.743

在某处您已将数组声明如下（可能）：

```
String[] calculationBuffer = new String[size]; 
```

它将用`null`s 初始化所有索引。因此你得到了 NPE。

在使用数组之前，您应该如下填充循环中的所有索引

```
for(int i=0; i<size; i++)
{
    calculationBuffer[i] = "A String";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:48:02.700

如果你像这样声明你的字符串数组`String[] calculationBuffer = new String[size];`

然后所有字符串元素都由 Null 初始化，所以如果你没有在其他地方的这个字符串数组中添加值，那么你可以像这样更新你的代码

```
for (i = 0; i < calculationBuffer.length; i++){ 
      **calculationBuffer[i]="";**
     calculationBuffer[i] = calculationBuffer[i].toLowerCase();// this is line 48 where the first error appears to be.
 } 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:33:05.477

你在哪里填写你的计算缓冲区？

您得到的错误表明calculationBuffer[i] 为空，这意味着您没有正确填充初始数组。

# java - 启动tomcat时spring源工具中的SVN问题

> ID：14495223
> 
> 赞同：0
> 
> 时间：2013-01-24T06:28:50.750
> 
> 标签：java, spring-mvc, tortoisesvn, tomcat7

当我尝试在 spring 源工具中运行 tomcat 服务器时出现以下异常。我已经安装了`svn 1.7 in system but svn 1.6.x in sts`

我无法解决此问题。一些身体可以帮助我。

```
delete --force D:/works/dailyship/target/m2e-wtp/web-resources
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/maven/src.main/java/pom.properties
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/maven/src.main/java/pom.xml
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/maven/src.main/java
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/maven/src.main
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/maven
    D         D:/works/dailyship/target/m2e-wtp/web-resources/META-INF/MANIFEST.MF
    Unsupported working copy format
svn: The path 'D:\works\dailyship' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy.

    Unsupported working copy format
svn: The path 'D:\works\dailyship' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:37:54.343

您不应该（不能）混合使用两个版本的 SVN，即使它们位于两个不同的地方但使用相同的代码。将 STS 插件版本升级到 1.7。

# c++ - 调用“事件”没有匹配的函数 ::notify(NULL, const double&)'|

> ID：14495227
> 
> 赞同：0
> 
> 时间：2013-01-24T06:29:20.890
> 
> 标签：c++, algorithm, events, openframeworks

我在这里为我的一个程序使用了一个框架并创建了一个事件（来自[这里的示例](http://www.openframeworks.cc/documentation/events/ofEvent.html)）

.h 文件

```
ofEvent<float> onVolumeChange 
```

.cpp 文件

```
//main method()
ofAddListener(onVolumeChange, this, &MainProgram::handleVolumeChange);

//kePrees method
if(key== ' '){
ofNotifyEvent(onVolumeChange, 10.0f);
} 
```

我在尝试构建它时遇到编译错误，这似乎很奇怪，因为我只是按照已经存在的示例进行操作。

我在这里得到的错误是：

`No matching function for call to ‘ofEvent<float>::notify(NULL, const float&)’|`

如果需要，关于我的机器：Ubuntu 12.04、Codeblocks、C++/openFrameworks

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:21:26.113

MainProgram 类应该有：

```
void MainProgram::handleVolumeChange(float& variable){
    //handler
} 
```

# javascript - 计算一个 url 被访问的次数

> ID：14495228
> 
> 赞同：0
> 
> 时间：2013-01-24T06:29:37.793
> 
> 标签：javascript, jquery, html

锚标签很少（我页面上的链接）。我想记录每个链接被访问的次数，并仅显示访问次数最多的链接。

有没有办法做到这一点 。？

或者

计算访问 URL 的次数也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:36:30.063

### 在您自己的服务器上使用

您需要一个服务器应用程序，它使用 PHP 等编程语言来存储和修改计数。如果你有一个 PHP 服务器，那么你可以使用一个简单的计数器：

```
<?php
    $count_my_page = ("hitcounter.txt");
    $hits = file($count_my_page);
    $hits[0] ++;
    $fp = fopen($count_my_page , "w");
    fputs($fp , "$hits[0]");
    fclose($fp);
    echo $hits[0];
?> 
```

### 使用远程服务

如果您没有在服务器上托管脚本的选项，您可以使用一些托管解决方案，例如：

*   [Hit Counter HTML Code](http://www.hit-counter-html-code.com/tumblr-hit-counters.html) 好吧，名字说明了一切，你可以给计数器一个你的计数器的初始开始计数！！。
*   [ewebsitecounter](http://www.ewebsitecounter.com/)拥有所有免费提供的 tumblr hit counters 中最精美的图标。您可以从许多不同的布局中进行选择，包括动物和季节性图片。
*   [Hit-Counter](http://hit-counter.info/)，绝对是最受欢迎的 tumblr 在线柜台。为您的博客输入详细信息时请小心，因为该网站充满了广告。
*   [在线用户计数器](http://freehostedscripts.net/onlinecounter/)
*   [Supercounters](http://www.supercounters.com/) - 免费点击计数器，网站博客和 tumblr 的用户在线计数器标志计数器访客地图
*   [HitWebCounter](http://www.hitwebcounter.com/) - 使用最广泛的免费互联网计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:31:43.780

您可以使用谷歌分析工具获取此类信息，您可以在[此处](http://www.google.com.pk/analytics/)找到更多信息。或者，您可以将您的逻辑放在服务器端，以计算您网站中每个 url 获得的点击量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:34:07.780

您可以使用 cookie，类似于这个。

```
$(document).ready(function() {
            if (!$.cookie("urlCookie")) {
                var url = document.referrer;
                var match = url.indexOf("localhost");
                if (match != -1) {
                    $.cookie("urlCookie", url);
                    $("#title").html(url);
                }
            } else {
                $("#title").html($.cookie("urlCookie"));
            }
});

<h1 id="title"></h1> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:45:44.643

就我个人而言，我会使用服务器端代码或分析来实现这一点，但由于您已标记为 HTML5/JavaScript 问题，您可以执行以下操作：

```
if ( localStorage ) {
    jQuery( 'a' ).click( function () {

        var urls = localStorage.getItem( 'urls' );

        urls = ( urls != null ) ? JSON.parse( urls ) : {};

        urls[ this.href ] = urls[ this.href ] || 0;
        urls[ this.href ]++;

        urls = JSON.stringify( urls );

        localStorage.setItem( 'urls', urls );

    });
} 
```

更多信息在这里[http://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

# c# - 如何在 C# 中将文件中的大数据读入 MS 图表控件系列

> ID：14495235
> 
> 赞同：0
> 
> 时间：2013-01-24T06:30:08.907
> 
> 标签：c#, charts, stream

我是 C# 编程的初学者。

我想读取大型 (>1GB) 文本文件（在一列中包含电压读数的值）并将其显示在 MS 控制图上。

它适用于小文件（~50mb），但它会卡在大于 300mb 的文件上，甚至会为较大的文件提供内存不足异常。

我有大约 30e6 个值，每个值都像这样：“0.189312433308071”。

这是我现在读取数据的方式：

```
System.IO.StreamReader sr = new
System.IO.StreamReader(openFileDialog1.FileName);
string line;

int pointIndex = 0;

while ((line = sr.ReadLine()) != null)  

{
    dataVoltage.Add(line);
    chart1.Series["Default"].Points.AddXY(pointIndex, Convert.ToDouble(line));
    pointIndex=pointIndex+1;

    }

sr.Close(); 
```

如何在不等待几分钟加载文件或根本不加载的情况下成功地做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:25:30.933

我认为您的性能问题完全在于为您的图表添加值。我使用 main 的第一行创建了一个中等大小的文件（~560mb），然后读取它并将其值相加。花了不到一分钟。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace LargeReadWrite
{
    class Program
    {
        const string fileName = "D:\\PersonalDev\\stackoverflow\\largefile.txt";
        static void Main(string[] args)
        {
            CreateLargeFile();
            ReadLargeFile();
        }

        static void CreateLargeFile()
        {
            Random r = new Random();
            using (StreamWriter sw = new StreamWriter(fileName))
            {
                for (uint i = 0; i < 30000000; i++)
                {
                    sw.WriteLine(r.NextDouble());
                }
            }
        }

        static void ReadLargeFile()
        {
            using (StreamReader sr = new StreamReader(fileName))
            {
                double total = 0.0;
                while (sr.Peek() >= 0)
                {
                    total += Double.Parse(sr.ReadLine());
                }
                Console.WriteLine(total);
            }
        }
    }
} 
```

运行一些性能分析工具并确定图表是否是保存它的正确位置，因为保存这么多值会占用你需要保存的内存。对于每 n 个读数，您可能会更好地将结果的平均值分桶。

# bouncycastle - 如何使用 Bouncy Castle 库从 PGPPublicKey 获取签名列表？

> ID：14495238
> 
> 赞同：3
> 
> 时间：2013-01-24T06:30:23.163
> 
> 标签：bouncycastle, openpgp

我有一个 PGPPublicKey 对象。我想使用 Bouncy Castle API 获取与其关联的所有签名（带有用户 ID、电子邮件 ID、每个签名的信任级别）的列表。我试过但无法得到它。如果有人有示例链接或知道使用哪种方法获取它，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T21:15:18.180

我从未使用过这些课程，但我认为发布一些资源可能会有所帮助。

看起来 Bouncy Castle OpenPGP 版本包含[一些示例](http://java2s.com/Open-Source/Java/Security/Bouncy-Castle/org/bouncycastle/openpgp/examples/Catalogexamples.htm)。

我建议使用这些示例来解决您的问题。具体来说，您似乎需要使用示例中使用的类`PGPSignatureList`。但是，我在任何课程中`PGPSignature`都没有看到。`emailId`

*   [SignedFileProcessor.java](http://java2s.com/Open-Source/Java/Security/Bouncy-Castle/org/bouncycastle/openpgp/examples/SignedFileProcessor.java.htm)：一个简单的实用程序类，用于签名和验证文件。
*   [DetachedSignatureProcessor.java](http://java2s.com/Open-Source/Java/Security/Bouncy-Castle/org/bouncycastle/openpgp/examples/DetachedSignatureProcessor.java.htm)：一个简单的实用程序类，它为文件创建单独的签名并验证它们。

此外，[http://www.bouncycastle.org/documentation.html](http://www.bouncycastle.org/documentation.html)建议如下。

> 最后还有来自[Java 加密技术的代码](http://www.amazon.com/exec/obidos/redirect?path=ASIN/0764596330&link_code=as2&camp=1789&tag=bouncycastleo-20&creative=9325)[示例](http://www.wrox.com/WileyCDA/WroxTitle/Beginning-Cryptography-with-Java.productCd-0764596330,descCd-DOWNLOAD.html)，它们演示了 JCE/JCA 的使用以及一些 Bouncy Castle API，例如用于证书生成、CMS 和 S/MIME。注意：本书是针对 J2SE 5.0 编写的，虽然许多示例适用于早期的 JDK，但如果您不使用 J2SE 5.0 或更高版本，则有些示例将无法编译。

# android - Android 致命信号 11 (SIGSEGV) 在 0x00000040 (code=1) 错误

> ID：14495242
> 
> 赞同：14
> 
> 时间：2013-01-24T06:30:33.923
> 
> 标签：android, web-services, opencv, camera

我正在开发一个安卓应用程序。我在其中获取用户照片图像（5 张图像）（使用带有面部检测的**opencv2.4.2**相机）并使用 Web 服务将其保存到服务器中的数据库中。为此，我使用 Opencv2.4.2 人脸检测示例，**Ksoap2**用于 Web 服务。在我的 android**模拟器**和**设备（android 4.0.4）**应用程序中工作正常。但是当我检查另一台设备（**android 4.0.3**）时，它会抛出**"Unfortunately, Myapp has stopped"**。我在下面附上了我的日志文件。我不知道是什么问题。你能给我关于这方面的建议吗？

```
Log:
I/Sample::SurfaceView(  746): Frame started with loop
I/Sample::FdView(  746): processFrame with face and ok started!
I/Sample::FdView(  746): area: 80089
D/dalvikvm(  746): GC_FOR_ALLOC freed 1202K, 20% free 7337K/9159K, paused 51ms
I/dalvikvm-heap(  746): Grow heap (frag case) to 8.496MB for 1228816-byte allocation
D/dalvikvm(  746): GC_CONCURRENT freed <1K, 7% free 8537K/9159K, paused 2ms+4ms
I/Sample::SurfaceView(  746): bmp.recycle()
I/Sample::SurfaceView(  746): Frame started with loop
I/Sample::FdView(  746): processFrame with face and ok started!
I/Sample::FdView(  746): area: 83521
D/dalvikvm(  746): GC_FOR_ALLOC freed 1202K, 20% free 7337K/9159K, paused 50ms
I/dalvikvm-heap(  746): Grow heap (frag case) to 8.496MB for 1228816-byte allocation
D/dalvikvm(  746): GC_CONCURRENT freed <1K, 7% free 8537K/9159K, paused 3ms+3ms
I/Sample::SurfaceView(  746): bmp.recycle()
I/Sample::SurfaceView(  746): Frame started with loop
I/OpenCV_NativeCamera(  746): ### Camera FPS ### [2190] Frames, 9.10 FPS
I/Sample::FdView(  746): processFrame with face and ok started!
I/Sample::FdView(  746): area: 87025
D/dalvikvm(  746): GC_FOR_ALLOC freed 1202K, 20% free 7337K/9159K, paused 30ms
I/dalvikvm-heap(  746): Grow heap (frag case) to 8.495MB for 1228816-byte allocation
F/libc    (  746): Fatal signal 11 (SIGSEGV) at 0x00000040 (code=1)
I/wpa_supplicant(  421): [CTRL_IFACE]SIGNAL_POLL
I/DEBUG   (   83): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   83): Build fingerprint: 'softwinners/crane_q7/crane-q7:4.0.3/IML74K/20120709:eng/test-keys'
I/DEBUG   (   83): pid: 746, tid: 747  >>> com.test.mailconf <<<
I/DEBUG   (   83): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000040
I/DEBUG   (   83):  r0 00000020  r1 000106e0  r2 000106e0  r3 409d51e8
I/DEBUG   (   83):  r4 41140d88  r5 40896c58  r6 00000000  r7 000106e0
I/DEBUG   (   83):  r8 41140d00  r9 000106e0  10 41140e00  fp 40822394
I/DEBUG   (   83):  ip 00000011  sp 100ffdd0  lr 40811fc4  pc 40821fac  cpsr 80000010
I/DEBUG   (   83):  d0  0000000000000000  d1  0000000000000000
I/DEBUG   (   83):  d2  0000000000000000  d3  0000000000000000
I/DEBUG   (   83):  d4  0000000000000000  d5  0000000000000000
I/DEBUG   (   83):  d6  0000000000000000  d7  0000000000000000
I/DEBUG   (   83):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (   83):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   83):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   83):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   83):  d16 0000000000000000  d17 991f1f1f991f1f1f
I/DEBUG   (   83):  d18 0707070703030303  d19 0000000000000000
I/DEBUG   (   83):  d20 0100010001000100  d21 0100010001000100
I/DEBUG   (   83):  d22 0000000000000000  d23 0000000000000000
I/DEBUG   (   83):  d24 0000000000000000  d25 0000000000000000
I/DEBUG   (   83):  d26 0067006700670067  d27 0067006700670067
I/DEBUG   (   83):  d28 0067006700670067  d29 0067006700670067
I/DEBUG   (   83):  d30 00308000002b4000  d31 003b40000035c000
I/DEBUG   (   83):  scr 80000012
I/DEBUG   (   83):
I/DEBUG   (   83):          #00  pc 00042fac  /system/lib/libdvm.so
I/DEBUG   (   83):          #01  pc 00032fc0  /system/lib/libdvm.so (_Z21dvmHeapBitmapScanWalkP10HeapBitmapPFvP6ObjectPvS3_ES3_)
I/DEBUG   (   83):          #02  pc 000433c4  /system/lib/libdvm.so (_Z24dvmHeapScanMarkedObjectsv)
I/DEBUG   (   83):          #03  pc 00033694  /system/lib/libdvm.so (_Z25dvmCollectGarbageInternalPK6GcSpec)
I/DEBUG   (   83):          #04  pc 0007ba40  /system/lib/libdvm.so
I/DEBUG   (   83):          #05  pc 0005f656  /system/lib/libdvm.so
I/DEBUG   (   83):          #06  pc 00012be4  /system/lib/libc.so (__thread_entry)
I/DEBUG   (   83):          #07  pc 00012738  /system/lib/libc.so (pthread_create)
I/DEBUG   (   83):
I/DEBUG   (   83): code around pc:
I/DEBUG   (   83): 40821f8c e1a04000 e59f01e0 e1a07001 e79f5000  ..@.......p...P..
I/DEBUG   (   83): 40821f9c e5940000 e59530b0 e1500003 0a00003a  ......0....P.:...
I/DEBUG   (   83): 40821fac e590c020 e31c0101 0a000011 ebfffeb9   ...............
I/DEBUG   (   83): 40821fbc e5940000 e5903020 e3130202 08bd81f0  ..... 0..........
I/DEBUG   (   83): 40821fcc e594e008 e2846010 e35e0000 08bd81f0  ......`....^.....
I/DEBUG   (   83):
I/DEBUG   (   83): code around lr:
I/DEBUG   (   83): 40811fa4 e0888404 e16fcf16 e58d3004 e1a0100a  .......o..0......
I/DEBUG   (   83): 40811fb4 e1a02009 e1c66c33 e088018c e12fff3b  .. ..3l......;./.
I/DEBUG   (   83): 40811fc4 e3560000 e59d3004 1afffff5 e5971010  ...V..0..........
I/DEBUG   (   83): 40811fd4 e597800c e068e001 e1a0142e e2844001  .......h......@..
I/DEBUG   (   83): 40811fe4 e2855c01 e1510004 2affffe7 e28dd00c  ..\....Q....*....
I/DEBUG   (   83):
I/DEBUG   (   83): stack:
I/DEBUG   (   83):     100ffd90  00000000 
I/DEBUG   (   83):     100ffd94  40891f90  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffd98  000106e0  [heap]
I/DEBUG   (   83):     100ffd9c  40f9af88  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffda0  000106e0  [heap]
I/DEBUG   (   83):     100ffda4  4115c378  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffda8  1e000000 
I/DEBUG   (   83):     100ffdac  80000000 
I/DEBUG   (   83):     100ffdb0  40b6e980  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdb4  40821f28  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdb8  4113fef8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdbc  40896c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdc0  4113ff28  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdc4  40896c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdc8  df0027ad 
I/DEBUG   (   83):     100ffdcc  00000000 
I/DEBUG   (   83): #00 100ffdd0  000076bd 
I/DEBUG   (   83):     100ffdd4  0076be00 
I/DEBUG   (   83):     100ffdd8  00000000 
I/DEBUG   (   83):     100ffddc  0001079c  [heap]
I/DEBUG   (   83):     100ffde0  41140d00  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffde4  40811fc4  /system/lib/libdvm.so
I/DEBUG   (   83): #01 100ffde8  40896c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdec  80000000 
I/DEBUG   (   83):     100ffdf0  ffffffff 
I/DEBUG   (   83):     100ffdf4  000106c8  [heap]
I/DEBUG   (   83):     100ffdf8  000106e0  [heap]
I/DEBUG   (   83):     100ffdfc  40891f90  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffe00  fffffe4c 
I/DEBUG   (   83):     100ffe04  7fffffff 
I/DEBUG   (   83):     100ffe08  00000000 
I/DEBUG   (   83):     100ffe0c  001187aa  [heap]
I/DEBUG   (   83):     100ffe10  40896c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffe14  408223c8  /system/lib/libdvm.so
I/BootReceiver(  144): Copying /data/tombstones/tombstone_06 to DropBox (SYSTEM_TOMBSTONE)
I/DEBUG   (   83): debuggerd committing suicide to free the zombie!
E/PreviewWindow(   87): onNextFrameAvailableSW: Unable to dequeue preview window buffer: 32 -> Broken pipe
W/PreviewWindow(   87): now undequeued: 0
D/V4L2CameraDevice(   87): stopDevice
D/CallbackNotifier(   87): storeMetaDataInBuffers, false
W/InputDispatcher(  144): channel '412a85d8 com.test.mailconf/org.opencv.samples.fd.FdActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  144): channel '412a85d8 com.test.mailconf/org.opencv.samples.fd.FdActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
D/Zygote  (   85): Process 746 terminated by signal (11)
I/DEBUG   ( 1232): debuggerd: Jul  9 2012 16:58:08
D/dalvikvm(  144): GC_FOR_ALLOC freed 504K, 13% free 8435K/9607K, paused 159ms
D/V4L2CameraDevice(   87): cedarx_hardware_exit ok
W/CameraService(   87): native_window_api_disconnect failed: Broken pipe (-32), api: 6
I/CameraService(   87): Destroying camera 0
D/CallbackNotifier(   87): storeMetaDataInBuffers, false
W/AudioFlinger(   87): session id 10 not found for pid 87
W/AudioFlinger(   87): session id 11 not found for pid 87
I/ActivityManager(  144): Process com.test.mailconf (pid 746) has died.
W/ActivityManager(  144): Force removing ActivityRecord{411a5a60 com.test.mailconf/org.opencv.samples.fd.FdActivity}: app died, no saved state
I/WindowManager(  144): WIN DEATH: Window{41129938 com.test.mailconf/org.opencv.samples.fd.FdActivity paused=false}
W/WindowManager(  144): Force-removing child win Window{4127d538 SurfaceView paused=false} from container Window{41129938 com.test.mailconf/org.opencv.samples.fd.FdActivity paused=false}
W/InputDispatcher(  144): Attempted to unregister already unregistered input channel '412a85d8 com.test.mailconf/org.opencv.samples.fd.FdActivity (server)'
I/WindowManager(  144): WIN DEATH: Window{412a85d8 com.test.mailconf/org.opencv.samples.fd.FdActivity paused=false}
I/WindowManager(  144): WIN DEATH: Window{4117d5c0  paused=false}
W/WindowManager(  144): Failed looking up window
W/WindowManager(  144): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41192d98 does not exist
W/WindowManager(  144): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7156)
W/WindowManager(  144): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7147)
W/WindowManager(  144): at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1529)
W/WindowManager(  144): at android.os.BinderProxy.sendDeathNotice(Binder..java:417)
W/WindowManager(  144): at dalvik.system.NativeStart.run(Native Method)
I/WindowManager(  144): WIN DEATH: null
I/WindowManager(  144): WINDOW DIED Window{412a85d8 com.test.mailconf/org.opencv.samples.fd.FdActivity paused=false}
D/Activity(  338): pckname = com.android.launcher mComponent = com.android.launcher2.Launcher
I/wpa_supplicant(  421): [CTRL_IFACE]SIGNAL_POLL 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T06:36:07.020

你段错误。这意味着您访问了您没有合法访问权限的内存。该地址非常低，因此几乎可以肯定是由于取消引用空指针或尝试访问空数组。实际的崩溃发生在 dalvik 堆中。因此，您以某种方式将 null 传递给堆或覆盖了堆正在使用的某些内容。

这很可能是通过 JNI 调用覆盖 dalvik 认为已释放并已重用的内存而发生的。

# mysql - 如何构建此 SQL 查询？

> ID：14495246
> 
> 赞同：0
> 
> 时间：2013-01-24T06:30:56.737
> 
> 标签：mysql, sql

我有三个表，, `user`,`conversation`和`conversation_participant`行：

**用户**
`id`

**对话**
`id`
`type`

**对话参与者**
`conversation_id`
`user_id`

(`type`表示这是一个“私人”的 1-1 对话，即确保 user1 和 user2 的对话是从涉及例如 user1、user2 和 user3 的组对话中描绘出来的。type=0 是 private，type=1是一组。）

无论如何，我怎样才能最好地构造一个查询来确定两个用户（user_id=1 和 user_id=2）之间是否存在私人对话？我很想做这样的事情（我对 SQL 很陌生，请注意）：
`SELECT conversation_participant.conversation_id FROM conversation_participant WHERE user_id=1`...但我很确定这是一个不幸的开始。

使用来自多个表的查询来管理这种情况的最简洁方法是什么，这些表都以这种方式互连？我认为它相对简单，如果您可能知道这方面的任何好读物，他们也将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:01:56.220

如果我理解正确，您正在寻找两个特定已知用户 ID 之间的对话：

```
select c.id
from conversation_participant cp1
inner join conversation_participant cp2
    on cp1.conversation_id=cp2.conversation_id and cp2.user_id=2
inner join conversation c
    on cp1.conversation_id=c.id and c.type=0
where cp1.user_id=1; 
```

在英语中，找到以下对话的 id：

user_id 1 是参与者（from 和 where 子句）

并且 user_id 2 是同一对话的参与者（第一个加入子句）

并且该对话是私有类型的（第二个连接子句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:54:27.367

如果您知道作为示例提到的两个人的用户 ID，那么您可以这样做：

`select count(DISTINCT c.id) from conversation c inner join (select * from conversation_participant cp where cp.user_id in (1,2)) cp on cp.conversation_id = c.id where c.type=0`

这将为您提供两个人之间的对话次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:40:21.423

```
SELECT *
FROM 
    conversation, 
    conversation_participant
WHERE conversation.id = conversation_participant.conversation_id
    AND conversation.type = 0 
```

这应该会给你你需要的结果。如果您正在运行 phpMyAdmin，请在 SQL 选项卡中对其进行测试并查看它的输出。

这只会向您显示私人对话发生的次数，如果您想查看“谁”在进行这些对话，您需要延长加入时间以包括用户（我假设您在用户表不仅仅是 ID）。

# php - 通过单击按钮更新 MySQL 表中的多行

> ID：14495249
> 
> 赞同：0
> 
> 时间：2013-01-24T06:31:13.897
> 
> 标签：php, html, mysql

我已经在这里工作了几个小时，但没有任何效果，因此非常感谢您的帮助。

我有一张动态填写需要主管批准的发票的表格。我正在尝试为主管创建单击“全部批准”按钮的能力，并使用每个发票的主管 ID 更新 MySQL 表列（在 MySQL 表中具有自己的唯一作业 ID）。

我尝试过诸如：将每个作业 ID 放入数组中的 while 循环，插入每个 ID 并使用“get”将其传递到另一个页面的循环，以及许多其他过于复杂的解决方案。

似乎有一种我缺少的简单方法可以做到这一点。

因为没有任何工作，我没有很多代码要显示，但这里是更新表的查询。这是我用来批准单个发票的，我需要的是批准页面上显示的所有发票的能力。

更新作业 SET job_approverid2='".$approverid."' WHERE job_id = '".$jobid."'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:36:47.427

好吧，`UPDATE`带条件的简单应该做到这一点：

```
UPDATE invoices SET approved = 1 WHERE .. condition .. 
```

..condition **..**确定哪些发票获得批准，例如：

```
UPDATE invoices SET approved = 1 WHERE approved = 0 
```

为了批准所有未批准的发票。当然，该`WHERE`子句可以更复杂，例如，使用主管更新所有发票`id = 23`：

```
UPDATE invoices SET approved = 1 WHERE approved = 0 AND supervisor_id = 23 
```

因此，在应用程序级别，您只需要创建一个执行上述查询的页面，它可能有一个像这样的 url：

```
http://example.com/invoices/approve_all.php?supervisor=23 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:14:14.810

多行更新，我假设你有多个 job_ids

```
$jobid = implode(',' ,$_POST['jobid']); // just example

UPDATE jobs SET job_approverid2='".$approverid."' WHERE job_id IN (".$jobid."); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:29:45.703

我认为这可能有效

```
"UPDATE jobs SET job_approverid2='".$approverid."' WHERE job_id = '".$jobid."' and job_approverid2!='".$approverid"'" 
```

否则你可以这样做

将所有工作 ID 作为数组获取（假设**为 $jobId[]**）其中**job_approverid2!=$approverid**

然后

```
foreach($jobId[] as $job_id) {
 "UPDATE jobs SET job_approverid2='".$approverid."' WHERE job_id = '".$job_id."'"
} 
```

# android - 在 Fragment 中访问 TextView 抛出 NullPointerException

> ID：14495250
> 
> 赞同：3
> 
> 时间：2013-01-24T06:31:28.787
> 
> 标签：android, android-fragments, textview

我对Android开发很陌生。

我`TextView`在布局中有 a ，当我尝试访问类`TextView`中的 a 时会抛出。我正在按如下方式访问 TextView ...`Fragment``NullPointerException`

```
TextView textView = (TextView) view.findViewById(R.id.quotes); 
```

我究竟做错了什么？

我已经在 SO 上查看了有关此问题的其他答案，但尚未找到解决方案...

***相关代码***

**quote_details_fragment.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/quotes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/quotes_details"
        android:textSize="24sp" />

</RelativeLayout> 
```

**QuotesFragment.java**

```
public class QuotesFragment extends Fragment {

    public QuotesFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view =  inflater.inflate(R.layout.quotes_details_fragment, container, false);
        TextView textView = (TextView) view.findViewById(R.id.quotes); // NullPointerException
        return view;
    }

} 
```

（主要活动类仅使用调用相关片段`FragmentTransaction`）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:37:40.777

在你的 onCreateView(..) 中添加这个 LayoutInflater；

```
 LayoutInflater lf = getActivity().getLayoutInflater(); 
```

像这样：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        LayoutInflater lf = getActivity().getLayoutInflater();   

        View view =  lf.inflate(R.layout.quotes_details_fragment, container, false);
        TextView textView = (TextView) view.findViewById(R.id.quotes); // 
        return view;
    } 
```

# javascript - jQuery隐藏div单击除其子div之外的div

> ID：14495251
> 
> 赞同：0
> 
> 时间：2013-01-24T06:31:29.607
> 
> 标签：javascript, jquery, html

我有一个 div( `sel_optn1`)，我`sel_optn1`在点击 li( `opt1`) 时显示并隐藏`sel_optn1`侧点击`sel_optn1`。
它工作正常，但如果我点击它的孩子，`sel_optn1`它就会隐藏起来。

我只想隐藏`sel_optn1`外部点击，但要排除`sel_optn1`儿童点击隐藏`sel_optn1`

看到我正在尝试的这个例子[http://jsbin.com/ahuyak/1/edit](http://jsbin.com/ahuyak/1/edit)

任何人都可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:38:00.103

更新您的检查功能以检查其子元素的点击：

```
if(e.target.className !== "sel_optn1" && !$(e.target).parents('.sel_optn1').length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:45:30.383

检查这个

[http://jsbin.com/ahuyak/11/edit](http://jsbin.com/ahuyak/11/edit)

您必须检查所有子元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:49:06.533

你可以试试：http `blur`: [//jsbin.com/ahuyak/12/edit](http://jsbin.com/ahuyak/12/edit)

```
$(document).ready(function(){
   $("#opt1").click(function(e){
     $('.sel_optn1 , :text').show();
     e.stopPropagation();
   });

   $('.sel_optn1 > :text').blur(function(e){
      $('.sel_optn1 , :text').hide();
      e.stopPropagation();
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:36:42.240

只需检查点击目标是否在元素中

```
if(e.target.className !== "sel_optn1" && !$.contains($(".sel_optn1")[0], e.target))
{
    $('.sel_optn1').css({"display":'none'});
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:37:12.423

```
div(sel_optn1).children().click(function(){stopPropagation ( );}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T07:02:36.110

我在文档上绑定了点击事件并检查被点击的目标是否是`.sel_optn1`，然后我在文档上绑定了点击事件并检查它的目标，如果它`.sel_optn1`或它的任何孩子，不要隐藏它：

```
$(document).ready(function(){
  var option = $(".sel_optn1");

  $("#opt1").click(function(e){
    e.stopImmediatePropagation();
    option.toggle();
  });

  $(document).click(function(e){
    var target = $(e.target);
    if(!(target.is(option) || option.find(target).length)){
      option.hide();
    }
  });
}); 
```

和一个演示：http: [//jsbin.com/ahuyak/15/](http://jsbin.com/ahuyak/15/)

# java - 带有用户定义参数的 jax-ws

> ID：14495252
> 
> 赞同：0
> 
> 时间：2013-01-24T06:31:34.427
> 
> 标签：java, web-services, jax-ws

我现在正在学习 jax-ws。我定义了一个WebService：

**用户服务.java**

```
@WebService
//@SOAPBinding(style=Style.DOCUMENT, use=Use.LITERAL)
public interface UserService {
    @WebMethod
    public User modifyUserInfo(@WebParam(name="user")User user);
    @WebMethod
    public User queryUserInfo(@WebParam(name="username")String username);   
} 
```

**UserServiceImpl.java**

```
@WebService(endpointInterface="UserService")
public class UserServiceImpl implements UserService{

    @Override
    public User modifyUserInfo(User user) {
        System.out.println(user);  //it prints "null"
        UserTransaction trans = new ModifyUserInfoTransaction(user);
        trans.execute();
        return trans.getResult();
    }

    @Override   
    public User queryUserInfo(String username) {
        UserTransaction trans = new QueryUserInfoTransaction(username);
        trans.execute();
        return trans.getResult();
    }   
} 
```

**用户.java**

```
@XmlRootElement
public class User {
    public enum UserType {
        Normal, Root;
    }
    private String username;
    private String password;
    private UserType usertype;

    public User() {
        usertype = UserType.Normal;
    }

    //the getters and sertters....
} 
```

当我在客户端调用 queryUserInfo() 时，它可以工作；但是在调用 modifyUserInfo() 时，参数 user 在服务器执行函数时为空。

我使用 wsimport 生成客户端代码。

..................................................... ......... 当我使用 QName 和 javax.xml.ws.Service 而不是 wsimport 时，它可以工作。

如果有人知道这件事，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:10:49.180

我在客户端和服务器应用程序中配置了 JAXBDataBinding。它有效。你可以再试一次。

# solr - Spatial4j + solr4.1 = 距离（半径）搜索多边形和线串？

> ID：14495256
> 
> 赞同：0
> 
> 时间：2013-01-24T06:31:51.037
> 
> 标签：solr, spatial

我有多边形和线串工作，但似乎无法获得对这些搜索应用距离的格式。我试图在一个线串内进行 100 公里的搜索。我的查询看起来像这样。

```
geo:"Intersects(LINESTRING(126.9140625 -17.644022027872722, 142.646484375 -20.46818922264095, 133.59375 -29.305561325527698, 127.0458984375 -18.62542454070125) d=1)" 
```

返回 31 个结果。

当我尝试到 1000、10000 或 100000 时，我得到相同的 31 个结果。

```
geo:"Intersects(LINESTRING(126.9140625 -17.644022027872722, 142.646484375 -20.46818922264095, 133.59375 -29.305561325527698, 127.0458984375 -18.62542454070125) d=10000)" 
```

我得到相同数量的结果。我的格式正确吗？我认为最新版本解决了这个问题，我应该能够通过多边形和线串（不仅仅是圆圈）来做距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T18:48:46.233

Solr 还没有开箱即用地做到这一点。您添加的 'd' 参数实际上并未被解析/观察，因此它没有效果。为了得到你想要的，你需要按距离缓冲形状。碰巧最新版本的 Spatial4j 具有所谓的原生“BufferedLineString”形状，但还没有完全融入；所以你有一些集成代码来解析它，以便使用它。Spatial4j 是 Lucene-spatial 使用的形状库。但即使没有，您也可以使用 JTS 生成任何其他形状的缓冲多边形。

# php - PHP，Jquery ajax 未将表单传递为可识别的 $_POST

> ID：14495259
> 
> 赞同：0
> 
> 时间：2013-01-24T06:32:08.830
> 
> 标签：php, jquery, ajax

**使用.ajax()**时，jQuery 似乎没有传递表单变量或 http POST 操作

 **做一个**var_dump( $_POST );** 结果是一个空数组。

建议？我做错了什么......这是一个简单的概念 - 有人发布了类似的 Q，但没有人回应，他的解决方案是在表单中添加一个 id，我的已经有了，所以它没有解决我的问题。

目前我正在firebug中查看返回页面内容 - 我还没有做任何事情，因为我无法将数据发送到服务器......（首先要做的事情）。

**我的 HTML**

```
<script type="text/javascript">
$( document ).ready( function(){
    $( "#myform" ).submit( function () {
        $.ajax({
            type: "POST",
            dataType: "html",
            cache: false,
            url: "x.php",
            success: function( data ){              
                //...tell user there was success...
            },
            error: function( data ){
                //...tell user thre was a problem...
            }
        });
        return false;
    });     
});
</script>

<form name="myform" id="myform" action="" method="POST">
    <label for="name" id="name_label">x: </label>
    <input type="text" name="x" id="x" size="30" value=""/> 
    <input type="submit" name="submit" value="Submit"> 
</form>
<div id="results"><div> 
```

这是（x.php）PHP代码 - 非常简单的概念证明......

```
<?php
var_dump( $_GET );
var_dump( $_POST );
var_dump( $_REQUEST );
?> 
```

响应看起来像这样

```
array(0) {}
array(0) {}
array(1) {
  ["PHPSESSID"]=>
  string(26) "e1j18j..."
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T06:33:47.767

你没有`data`在ajax调用中传递任何帖子，试试

```
 $.ajax({
        type: "POST",
        dataType: "html",
        cache: false,
        url: "x.php",
        data: $(this).serialize(),
        success: function( data ){              
            //...tell user there was success...
        },
        error: function( data ){
            //...tell user thre was a problem...
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:33:52.947

您需要序列化表单：

```
 $.ajax({
        type: "POST",
        data: $(this).serialize(),
        cache: false,
        url: "x.php",
        success: function( data ){              
            //...tell user there was success...
        },
        error: function( data ){
            //...tell user thre was a problem...
        }
    }); 
```

没有`data`，您不会通过 POST 请求发送任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:43:21.070

你可以这样做

```
$(document).ready(function(){
   $( "#myform" ).submit( function () {
       $.ajax({
         type:'POST',
         data:'xname='+$("#x").val(),
         url:'SOMETHING.php',
         success:function(data){
           //Do something with the returned data
         }
       });
   });
}); 
```

并在 php 文件中

```
echo $_POSST['xname']; 
```

希望这可以帮助**

# python - Python 使用 execv 重定向标准输入/标准输出

> ID：14495261
> 
> 赞同：0
> 
> 时间：2013-01-24T06:32:13.097
> 
> 标签：python, exec, posix, fork, multiprocess

我正在使用 python 来`os.fork`进行子进程，并用于`os.execv`在子进程中执行另一个程序。如何在子程序中重定向 I/O。我试过这个但失败了。

```
import sys, os

pid = os.fork()
if pid is 0:
    sys.stdin = open('./test.in')
    os.execv('/usr/bin/python', ['python', './test.py']) 
```

虽然`test.py`是：

```
import sys

print(sys.stdin)
a = input()
print(a) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-13T20:48:31.743

`os.fork()`尝试此重定向标准输入和标准错误后：

```
import os

STDIN_FILENO = 0
STDOUT_FILENO = 1
STDERR_FILENO = 2

# redirect stdout            
new_stdout = os.open(stdout_file, os.O_WRONLY|os.O_CREAT|os.O_TRUNC)
os.dup2(new_stdout, STDOUT_FILENO)

# redirect stderr
new_stderr = os.open(stderr_file, os.O_WRONLY|os.O_CREAT|os.O_TRUNC)
os.dup2(new_stderr, STDERR_FILENO) 
```

```

# etherpad - 如何将 etherpad-lite 部署为集群？

> ID：14495264
> 
> 赞同：0
> 
> 时间：2013-01-24T06:32:39.350
> 
> 标签：etherpad

我想将[etherpad-lite](https://github.com/ether/etherpad-lite)部署为集群，您能给我一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:26:31.320

这不是一个小任务（还），但如果你确实解决了它，我认为如果你能把它推回项目，Etherpad 社区的其他人会非常感激它:)

这是一个基本的操作方法：

1.  进行模拟负载测试以确保这是您真正需要做的事情。

2.  删除、重新设计或抽象 Ueber 数据库缓存（使用类似 memcache 的东西）

3.  用 SocketIO 房间替换 Etherpad 房间/会话系统

4.  部署粘性套接字 io 房间（让用户 a 在同一服务器上的 pad a 上与用户 b 在 pad a 上）

5.  AOB

6.  做前端测试

模拟负载测试和前端测试与 Etherpad 捆绑在一起。您需要自己设计的其他位。

如果您不熟悉 nodejs / socket / npm / [etherpad](http://etherpad.org) ，那么请[雇用这样的人](http://mclear.co.uk):)

# php - Facebook graph api - 没有封面图片的视频

> ID：14495265
> 
> 赞同：1
> 
> 时间：2013-01-24T06:32:49.677
> 
> 标签：php, facebook, facebook-graph-api

我用应用上传了一个视频。

我发现了一些问题。我正在尝试解决其他问题。但无法解决这个问题。

视频上传后，它会显示在 facebook 中，只有一个播放按钮，没有任何封面/图像。它只是空白和黑色。

我试图设置一个参数，该参数将从远程服务器调用图像作为封面图像。 [https://developers.facebook.com/docs/reference/api/video/](https://developers.facebook.com/docs/reference/api/video/)

```
$params['picture'] = "full_url/cover_1.png"; 
```

其他参数是视频的来源、标题和说明。它仍然是空白和黑色。

# android - 搜索对话框不完全可见 - android

> ID：14495268
> 
> 赞同：0
> 
> 时间：2013-01-24T06:33:12.097
> 
> 标签：android, android-layout, android-emulator, search-dialog

我在我的应用程序中实现了搜索对话框，文本框在顶部可见，放大图标在光标旁边可见，即使它有完整的文本框。理想情况下，放大或搜索图标（默认）应该位于文本框的末尾。

此外，当我开始键入时，我看不到软键，并且一旦我开始使用计算机键盘键入，放大图标就会消失。

如果有任何对齐问题，您能告诉我吗？

谢谢

主要活动：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Hello" />

</RelativeLayout> 
```

搜索配置.xml

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name" 
    android:hint="true"
    >

</searchable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:37:58.837

尝试设置菜单项`always|collapseActionView`的`showAsAction`属性。例子：

```
<item android:id="@+id/search"
      android:title="Search"
      android:icon="@drawable/ic_menu_search"
      android:showAsAction="always|collapseActionView"
      android:actionViewClass="android.widget.SearchView" /> 
```

# llvm - 使用 setLocale 时出现内存错误

> ID：14495273
> 
> 赞同：1
> 
> 时间：2013-01-24T06:33:39.447
> 
> 标签：llvm, setlocale

为了使用 llvm 打印 unicode 字符，我在 llvm ir 中使用了 setLocale：

```
call i8* @setlocale(i32 6, i8* getelementptr inbounds ([1 x i8]* @pe, i32 0, i32 0)) nounwind 
```

其中@pe 定义如下：

```
@pe = private unnamed_addr constant [1 x i8] zeroinitializer, align 1 
```

但是，我收到以下错误：

```
*** glibc detected *** ./test/bin/executable: free(): invalid next size (fast): 0x08f93140 *** 
```

我使用gdb调试程序，回溯如下：

```
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74aee71 in raise () from /lib/i386-linux-gnu/libc.so.6
#2  0xb74b234e in abort () from /lib/i386-linux-gnu/libc.so.6
#3  0xb74e5577 in ?? () from /lib/i386-linux-gnu/libc.so.6
#4  0xb74ef961 in ?? () from /lib/i386-linux-gnu/libc.so.6
#5  0xb74f128b in ?? () from /lib/i386-linux-gnu/libc.so.6
#6  0xb74f441d in free () from /lib/i386-linux-gnu/libc.so.6
#7  0xb74a6730 in ?? () from /lib/i386-linux-gnu/libc.so.6
#8  0xb74a5299 in ?? () from /lib/i386-linux-gnu/libc.so.6
#9  0xb74a4cd1 in setlocale () from /lib/i386-linux-gnu/libc.so.6
... 
```

我该如何解决这个问题？任何帮助，将不胜感激

# python - 金字塔中的认证/授权实现

> ID：14495284
> 
> 赞同：1
> 
> 时间：2013-01-24T06:34:17.753
> 
> 标签：python, security, pyramid

我已经按照文档[Group-Level Security](http://michael.merickel.org/projects/pyramid_auth_demo/group_security.html)
写了这些：

```
def groupfinder(userid, request):
    print '#'*80
    print userid
    role = DBSession.query(Role)....

    if role.name == "Admin":
        return ['g:admin']

class RootFactory(object):
        __acl__ = [
            (Allow, Everyone, 'view'),
            (Allow, Authenticated, 'edit'),
            (Allow, 'g:admin', 'admin')
        ]

        def __init__(self, request):
            pass

authn_policy = AuthTktAuthenticationPolicy(
    settings['auth.secret'],
    callback=groupfinder,
) 
```

它有效，但是加载的每个页面都会重复查询数据库，
是否应该在用户登录时第一次返回权限？
或者也许我做错了......

以及如何知道 mako 等模板中的权限“g:admin”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T08:10:14.027

你`groupfinder`现在有一个微妙的错误。如果用户有效，它应该总是返回一个列表。只有在没有用户的情况下才应该返回`None`。现在你只返回一个列表，如果用户是管理员，所以普通用户永远不会被识别。

```
def groupfinder(userid, request):
    print '#'*80
    print userid
    role = DBSession.query(Role)....

    if role is not None:
        principals = []
        if role.name == "Admin":
            principals.append('g:admin')
        return principals 
```

注意我们总是返回一个列表，除非`role`is `None`。

接下来，您询问了性能。Pyramid 不会尝试缓存任何内容。但是，您可以自己轻松处理。`request`执行此操作的典型方法是在包含`role`or的对象上添加缓存（具体化）属性`user`。这样每次`groupfinder`调用时，您将使用缓存`role`而不是再次查询它。[这里](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/user_object.html)演示了这种模式。

> 我如何知道 mako 等模板中的权限“g:admin”

好吧，“g:admin”实际上是 Pyramid 身份验证术语中的*主体*。'admin'（访问控制条目的第三个元素）是*权限*。主体被视为一个实现细节，它只是帮助我们将事物映射到权限。最后，在处理访问/授权时，我们真的只关心权限。

要查看用户是否在您的模板中拥有该权限，您可以使用`pyramid.security.has_permission('admin', request.context, request)`. 您可以替换`request.context`为任何带有 的对象`__acl__`，但在这种情况下`request.context`将是您`RootFactory`的（这就是您想要的）。

# silverlight - 使用管理员帐户和受限用户帐户时 Silverlight 性能不同

> ID：14495286
> 
> 赞同：0
> 
> 时间：2013-01-24T06:34:38.040
> 
> 标签：silverlight, administration

我们有一个在 Intranet 环境中运行的 Silverlight 应用程序。它每天有超过3000个独立用户（申请公司零售连锁店）。

几天前，我们注意到在我们的一些用户的计算机上加载应用程序（并在这段时间内冻结浏览器）大约需要 5 分钟。我们的技术支持人员进行了测试，并认为问题出在 Silverlight 中。

如果您使用这台计算机启动任何 Silverlight 应用程序，IE 会在几分钟内处于“无响应”状态，然后运行正常。如果用户使用管理帐户 Silverlight 应用程序立即启动，没有任何延迟。

这个问题的根源是什么？可以进行哪些测试？

应用程序在每个用户的标准硬件和软件上运行（Windows 7 Pro、IE9、Silverlight 4、i3、4Gb of Ram）

# android - Android：在服务器上播放 mp3 文件时出现异常。

> ID：14495287
> 
> 赞同：1
> 
> 时间：2013-01-24T06:34:50.440
> 
> 标签：android, android-mediaplayer

我正在尝试从服务器获取音频 mp3 文件并在 android 应用程序上播放。这是该函数的代码：

```
protected void managerOfSound(String theText) throws MalformedURLException, IOException {
        if (mp != null) {
            mp.reset();
            mp.release();
        }
        URLConnection conn = new URL("http://192.168.1.68:3000/play/song.mp3").openConnection();
        conn.connect();
        InputStream stream = conn.getInputStream();
        File file = File.createTempFile("downloadingMedia", ".mp3");

        byte[] buffer = new byte[4096];
        int n = - 1;

        OutputStream output = new FileOutputStream( file );
        while ( (n = stream.read(buffer)) != -1)
        {
                if (n > 0)
                {
                        output.write(buffer, 0, n);
                }
        }
        output.close();

        System.out.println("PATH IS" + file.getAbsolutePath());
        mp.setDataSource(file.getAbsolutePath());
        mp.start();
    } 
```

但是，我在 mp.setDataSource 行中得到了一个 nullpointerexception。我验证了文件的绝对路径存在。

在服务器端，我也验证了请求被正确接收并且它是 200 响应。

当我在浏览器上打开 URL 时，会出现下载对话框，询问是保存还是下载文件。

那么它在哪里给出空指针异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:16:17.237

我没有从您的网址获得任何回复（我的代理问题）

关注本[**教程**](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)

和[**这个**](http://erkutaras.blogspot.in/2011/08/stream-audio-from-url-example-android.html)

# java - 如何使用 apache POI hslf/xslf 将图像添加到 PowerPoint ppt 表格单元格？

> ID：14495288
> 
> 赞同：0
> 
> 时间：2013-01-24T06:34:51.883
> 
> 标签：java, image, nullpointerexception, apache-poi, powerpoint

我想使用**apache** * *poi* *在我的**ppt**表的**tablecell**之一中插入**图像**，其他单元格有文本数据。

 *******我没有找到任何 api 将图像写入 tablecell。我尝试使用 tablecell 的 draw 方法，但出现异常。

```
 File file = new File("E:\PPTGeneratorJars\Search Definition.png");  
  BufferedImage image = ImageIO.read(file); 
  Graphics graphics= image.getGraphics();
  cell.draw((Graphics2D) graphics); 
```

### 例外

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.poi.hslf.usermodel.RichTextRun.getCharTextPropVal(RichTextRun.java:284)
    at org.apache.poi.hslf.usermodel.RichTextRun.getFontColor(RichTextRun.java:514)
    at org.apache.poi.hslf.model.TextPainter.getAttributedString(TextPainter.java:81)
    at org.apache.poi.hslf.model.TextPainter.getTextElements(TextPainter.java:161)
    at org.apache.poi.hslf.model.TextPainter.paint(TextPainter.java:98)
    at org.apache.poi.hslf.model.TextShape.draw(TextShape.java:562) 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:06:02.013

根据我从您的问题中了解到的情况，您想要生成一个包含表格元素的 powerpoint 幻灯片，并且在表格内，其中一个单元格应该包含一个图像。

当您检查您看到的[OOXML 模式时，可以指定给定单元格的背景填充 (dml-table.xsd -> tr -> tc -> tcPr -> blipFill)。](http://www.ecma-international.org/news/TC45_current_work/Ecma%20TC45%20OOXML%20Standard%20Schemas%20-%20Draft%201.3.zip)

在下面的代码片段中，从头开始创建了一个 pptx，并且 blipFill 引用了一个 gif（支持 jpeg/png/gif/tiff）。当您想更改图像的大小时，您需要知道相应单元格的边界框。然后 fillRect 可以受 % 值的限制（例如 30000 = 30% 从左/右填充），即如果您知道单元格的宽度为 X（EM）并且您的图片宽度为 Y（像素），您需要将像素转换为 EM 单位并计算相对于图像大小的填充......类似于（未经验证！）：

```
100000d*(cellSize-imageSize)/imageSize 
```

这是示例程序：

```
import java.awt.geom.Rectangle2D;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.OutputStream;

import org.apache.poi.openxml4j.opc.PackagePart;
import org.apache.poi.openxml4j.opc.PackagePartName;
import org.apache.poi.openxml4j.opc.PackageRelationship;
import org.apache.poi.openxml4j.opc.PackagingURIHelper;
import org.apache.poi.openxml4j.opc.TargetMode;
import org.apache.poi.xslf.usermodel.XMLSlideShow;
import org.apache.poi.xslf.usermodel.XSLFSlide;
import org.apache.poi.xslf.usermodel.XSLFTable;
import org.apache.poi.xslf.usermodel.XSLFTableCell;
import org.apache.poi.xslf.usermodel.XSLFTableRow;
import org.openxmlformats.schemas.drawingml.x2006.main.CTBlip;
import org.openxmlformats.schemas.drawingml.x2006.main.CTBlipFillProperties;
import org.openxmlformats.schemas.drawingml.x2006.main.CTRelativeRect;

public class InsertImgIntoPptxTableCell {
    // http://stackoverflow.com/questions/14495288/how-to-add-image-to-powerpoint-ppt-table-cell-using-apache-poi-hslf-xslf

    public static void main(String[] args) throws Exception {
        XMLSlideShow pptx = new XMLSlideShow();
        XSLFSlide slide = pptx.createSlide();

        // you need to include ooxml-schemas:1.1 for this to work!!!
        // otherwise an empty table will be created
        // see https://issues.apache.org/bugzilla/show_bug.cgi?id=49934
        XSLFTable table = slide.createTable();
        table.setAnchor(new Rectangle2D.Double(50, 50, 500, 20));

        XSLFTableRow row = table.addRow();
        row.addCell().setText("Cell 1");
        XSLFTableCell cell = row.addCell();
        cell.setText("Cell 2");

        CTBlipFillProperties blipPr = cell.getXmlObject().getTcPr().addNewBlipFill();
        blipPr.setDpi(72);
        // http://officeopenxml.com/drwPic-ImageData.php
        CTBlip blib = blipPr.addNewBlip();
        blipPr.addNewSrcRect();
        CTRelativeRect fillRect = blipPr.addNewStretch().addNewFillRect();
        fillRect.setL(30000);
        fillRect.setR(30000);

        PackagePartName partName = PackagingURIHelper.createPartName("/ppt/media/100px.gif");
        PackagePart part = pptx.getPackage().createPart(partName, "image/gif");
        OutputStream partOs = part.getOutputStream();
        FileInputStream fis = new FileInputStream("src/test/resources/100px.gif");
        byte buf[] = new byte[1024];
        for (int readBytes; (readBytes = fis.read(buf)) != -1; partOs.write(buf, 0, readBytes));
        fis.close();
        partOs.close();

        PackageRelationship prs = slide.getPackagePart().addRelationship(partName, TargetMode.INTERNAL, "http://schemas.openxmlformats.org/officeDocument/2006/relationships/image");

        blib.setEmbed(prs.getId());

        FileOutputStream fos = new FileOutputStream("test2.pptx");
        pptx.write(fos);
        fos.close();
    }
} 
```*******

# javascript - 用 x 替换用户名的最后 5 个字符

> ID：14495290
> 
> 赞同：1
> 
> 时间：2013-01-24T06:34:56.303
> 
> 标签：javascript, jquery, hide

我必须隐藏用户名的最后 5 个字符。下面是代码

```
<ul>
<li>
            </dl>
                <dl>
                <dt>Username:</dt>
                <dd id="up-d-username">AZRT435231
                </dd>
            </dl>
</li>
</ul> 
```

我需要用“X”替换最后 5 个字符，所以输出应该是 AZRT4XXXXX 。用户是否有可能使用诸如 firebug 之类的工具从页面源中看不到此名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T06:35:58.260

```
"AZRT435231".slice(0, -5) + "XXXXX"; 
```

用户仍然可以阅读原始页面源。如果这很关键，请在它到达客户端之前使用服务器端语言对其进行处理。

你可以制作一个更便携的版本......

```
var replaceLastNChars = function(str, replace, num) {
     return str.slice(0, -num) + Array(num + 1).join(replace);
}; 
```

结合它...

```
$("#up-d-username")
 .text(function(i, text) { return replaceLastNChars(text, "X", 5); }); 
```

没有 jQuery，为了好玩...

```
var elem = document.getElementById("up-d-username").firstChild;

elem.data = replaceLastNChars(elem.data, "X", 5); 
```

较新的浏览器...

```
var elem = document.querySelector("#up-d-username");

elem.textContent = replaceLastNChars(elem.textContent, "X", 5); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T06:36:53.210

你可以这样做。

**[现场演示](http://jsfiddle.net/gcxuz/)**

```
txt = $.trim($('#up-d-username').text());
$('#up-d-username').text(txt.substring(0, txt.length - 5) + "XXXXX"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:36:33.970

您应该使用服务器端语言隐藏它，这样用户就没有机会使用调试工具看到它。

```
<?php
$username = "AZRT435231";
$output = substr($username, 0, -5) . "XXXXX";
?>
<ul>
<li>
            </dl>
                <dl>
                <dt>Username:</dt>
                <dd id="up-d-username"><?=$output?>
                </dd>
            </dl>
</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T06:56:54.933

另一种选择是使用正则表达式，然后用“X”字符替换匹配的字符串。

[http://jsfiddle.net/uvDs8/](http://jsfiddle.net/uvDs8/)

```
var re = /(.{1,5})$/;
var tester = "1234567890";

var new_value = tester.replace(re, function (matched) {
    return Array(matched.length+1).join("X");
});

alert(new_value); 
```

在这种情况下，它只替换尽可能多的内容（字符串末尾最多 5 个）。因此，如果原始值只有 4 个字符长，则结果是 4 个“X”字符。如果结果是 6 个字符长，则结果是第一个字符加上 5 个“X”字符。等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:39:49.133

执行此操作的香草 JS 方法是：

```
 var name = document.getElementById('up-d-username');

 name.innerHTML = name.innerHTML.slice(0, -5) + "XXXXX"; 
```

使用 jQuery，您可以执行以下操作：

```
var $name = $('#up-d-username');

$name.html( $name.html().slice(0, -5) + "XXXXX" ); 
```

在替换发生之前，浏览器可以使用数据的瞬间。如果有人简单地卷曲 URL，他们就可以访问信息。您最好的选择是在将其发送到浏览器之前将其替换为服务器端。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-24T19:38:21.773

在普通的 JS 中。还解决了字符串长度未知的问题。

```
 let mask='X'.repeat(5),
        username=document.getElementById('up-d-username');

    username=username.substring(0,username.length-mask.length)+mask; 
```

# iphone - 找不到我的iphone的经纬度

> ID：14495292
> 
> 赞同：1
> 
> 时间：2013-01-24T06:35:09.383
> 
> 标签：iphone, ios, objective-c, xcode4

我正在尝试找出 iphone 的当前位置，为此我正在使用这种方法。并尝试将其保存以供进一步处理。但是当我以纬度和经度的形式打印位置值时，它总是给我 0.00000 和 0.0000。我没有明白我错的地方。这个方法保存在 GetLocation 类中。

```
-(void)updatelocation{

NSLog(@"coming in update location    in get location class");
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.distanceFilter = kCLDistanceFilterNone;
[locationManager startUpdatingLocation];

NSLog(@"location manager   %@", locationManager);
CLLocation *location = [locationManager location];
CLLocationCoordinate2D coordinate = [location coordinate];
NSString *latitude = [NSString stringWithFormat:@"%f", coordinate.latitude];
NSString *longitude = [NSString stringWithFormat:@"%f", coordinate.longitude];

NSLog(@"Latitude is: %f\n\n\n and longitude is: %f\n\n\n", location.coordinate.latitude, location.coordinate.longitude);
NSLog(@"coordinate   %f",coordinate.latitude);
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
[defaults setObject:latitude forKey:@"latitude"];
[defaults setObject:longitude forKey:@"longitude"];

} 
```

当我在这样的另一个类中调用此方法时。

```
GetLocation *location = [GetLocation alloc] init ];
[location updatelocation]; 
```

但我总是得到 0.0000 和 0.0000。谁能告诉我我错在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:46:57.863

你走得太快了，`CLLocationManager`还没有确定你的位置。您应该实现`CLLocationManagerDelegate`'`locationManager:didUpdateToLocation:fromLocation:`方法。在该方法中，用户的位置**是**已知的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:48:04.183

先看看[-[CLLocation coordinate] 文档](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)……甚至[这个](https://stackoverflow.com/questions/9730707/objective-c-want-to-get-latitude-and-longitude-value-and-write-to-get-paramete)……

# c++ - 从浮点数中检索 int

> ID：14495293
> 
> 赞同：-3
> 
> 时间：2013-01-24T06:35:26.163
> 
> 标签：c++

让我们假设一些错误的代码将一个 int 值放入浮点地址。一般来说，我怎样才能找回那个 int 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:52:23.467

**关于这个答案的注意事项：**下面的代码使用 模拟问题（将 a 存储`int`在为 a 保留的内存位置`float`）`reinterpret_cast`，然后`reinterpret_cast`再次使用解决问题。这打破了**[严格别名规则](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)**（3.10/10 C++ 标准），该规则指出通过与对象的真实类型不匹配的类型的 (g) 左值访问对象（在某种意义上*匹配*），调用**未定义的行为**。

出于这个原因，不应使用下面给出的代码，并且解决方案，即使用`reinterpret_cast`，至少是危险的（尽管它可能经常工作）。请参阅[Steve Jessop 的答案](https://stackoverflow.com/a/14497598/777186)以获得正确的解决方案。感谢他指出我的错误（见评论）。

* * *

**原始答案：**
如果您有存储值的地址，并且地址正确对齐以进行整数访问，则应该可以使用`reinterpret_cast`：

```
int main()
{
  /* An integer and an uninitialized float: */
  int original = 45;
  alignas(int) alignas(float) float f;

  float *p = &f;

  /* "Erroneously" putting an int into the address of the float: */
  *reinterpret_cast<int*>(p) = original;

  /* Retrieving the int (this is what you were looking for): */
  int retrieved = *reinterpret_cast<int*>(p);

  std::cout << "Original: " << original
            << ", Stored float: " << f
            << ", Retrieved: " << retrieved
            << std::endl;
  return 0;
} 
```

（上面使用的关键字`alignas`来自 C++11。你的编译器可能不接受它。无论如何，这部分代码是我模拟问题的方式，它不是解决方案的重要部分。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:12:52.387

答案`reinterpret_cast<int*>`违反了严格的别名并且具有未定义的行为。

如果你想用定义的行为来做：

```
int read_int_from_float(const float &f) {
    int result;
    std::memcpy(&result, &f, sizeof(result));
    return result;
} 
```

这是在检查之后`float`并`int`具有相同的大小。它们不需要具有相同的对齐方式。

# php - 通过ajax上传文件

> ID：14495296
> 
> 赞同：2
> 
> 时间：2013-01-24T06:35:43.937
> 
> 标签：php, jquery, ajax

我使用 2 个文件 index.js，upload.php 尝试通过 ajax 上传文件（img），如果成功附加到 div `uploadfile_show`。
但它不起作用，几乎没有问题，下面是我的代码有什么建议吗？

谢谢。

upload.php
1.`form enctype`还需要添加吗？
2.`if($_FILES)`并检查 $_FILES 大小或 tmp_name 是否仍在使用`$_FILES`？

```
if($_FILES){
    $filename = $_FILES['uploadfile']['name'];
    $filetmp = $_FILES['uploadfile']['tmp_name'];
    $filesize = $_FILES['uploadfile']['size'];
    if($filesize < 1000000){
        move_uploaded_file($filetmp,'upload/tmp/'.$filename);
        print"
            upload success
            <img src=\"upload/tmp/$filename\">
        ";
    }
    else{
    }
}
else{
    print"
        <div class=\"uploaddiv\">
            <form enctype=\"multipart/form_data\">
                <input type=\"type\" name=\"uploadfile\">
                <input type=\"submit\" value=\"upload\" class=\"btn\">
            </form>
        </div>
    ";
}
print"
    <div class=\"uploadfile_show\"></div>
"; 
```

index.js
3\. 这几行是对的吗？
`var uf = $('.uploaddiv form');var fd = new FormData(uf);fd.append('uploadfile', uploadfile);`
`data: fd,`
4\. 有什么我遗漏或错误的吗？

```
$('.btn').click(function(){
    var uf = $('.uploaddiv form');
    var fd = new FormData(uf);
    fd.append('uploadfile', uploadfile);
    $.ajax({
        type: "POST",
        url: "upload.php",
        data: fd,
        processData:false,
        contentType: false,
        success: function(html){
            $('.uploadfile_show').append(html);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:43:09.027

`FormData`在其构造函数中采用表单元素而不是 jQuery 对象，同样当您使用 ajax 提交表单时，您必须通过调用来阻止其默认操作（即提交）`preventDefault()`

```
$('.btn').click(function(e){
    e.preventDefault();
    var uf = $('.uploaddiv form');
    var fd = new FormData(uf[0]);
    $.ajax({
        type: "POST",
        url: "upload.php",
        data: fd,
        processData:false,
        contentType: false,
        success: function(html){
            $('.uploadfile_show').append(html);
        }
    });
}); 
```

# autohotkey - 鼠标的 AutoHotKey 映射

> ID：14495297
> 
> 赞同：0
> 
> 时间：2013-01-24T06:35:46.317
> 
> 标签：autohotkey

这是我正在尝试做的事情：

当用户单击鼠标时，将鼠标滚轮（鼠标中间的滚轮（我有 Microsoft Intelli-Mouse））向上移动 1。这应该永远持续下去。

示例：用户单击鼠标，页面向上移动。

我只需要知道什么是“映射”，它是否被称为单击并向上滚动 1。

例如：Crt+Alt+s = ^!s，什么是MouseClick 和MouseScrollUp？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:04:47.293

这将是一个解决方案（使用中间按钮，选项更改为`lbutton`or `rbutton`）

```
MButton::
While GetKeyState("MButton", "P")
{
    Send, {WheelUp 1}
}
return 
```

# android - android eclipse的相机源代码

> ID：14495301
> 
> 赞同：1
> 
> 时间：2013-01-24T06:36:00.000
> 
> 标签：android, eclipse, camera

我需要一些帮助。问题是我在读卡器上做了一个应用程序，需要使用相机功能拍照。但是如何让我的应用程序能够查看我保存的多张图片而无需退出应用程序并转到图库？下面是我使用的相机源代码..谢谢

`

CameraMainActivity.Java

```
private static final int REQUEST_CODE = 1;
private static final int CAMERA_PIC_REQUEST = 1337;
private Bitmap bitmap;
private ImageView imageView;
private Button save, capture;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera_main);
    imageView = (ImageView) findViewById(R.id.result);
    save = (Button) findViewById(R.id.save);
    save.setOnClickListener(this);
    capture = (Button) findViewById(R.id.capture);
    capture.setOnClickListener(this);
}

public void captureImage() {
    // Capture image from camera

        Intent intent = new Intent(
                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        startActivityForResult(intent, CAMERA_PIC_REQUEST);

}

public void pickImage() {
    // To pick a image from file system
    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    intent.addCategory(Intent.CATEGORY_OPENABLE);
    startActivityForResult(intent, REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {
        if (requestCode == REQUEST_CODE) {
            try {
                // We need to recycle unused bitmaps
                if (bitmap != null) {
                    bitmap.recycle();
                }
                InputStream stream = getContentResolver().openInputStream(
                        data.getData());
                bitmap = BitmapFactory.decodeStream(stream);
                stream.close();
                imageView.setImageBitmap(bitmap);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else if (requestCode == CAMERA_PIC_REQUEST) {

                if (bitmap != null) {
                    bitmap.recycle();
                }
                bitmap = (Bitmap) data.getExtras().get("data");
                if (data.getExtras().get("data") == null)
                Toast.makeText(getApplicationContext(),
                        "No image returned", Toast.LENGTH_LONG).show();
                else
                imageView.setImageBitmap(bitmap);

        }
    }
    super.onActivityResult(requestCode, resultCode, data);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_camera_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == save) {
        BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
        Bitmap bitmap = drawable.getBitmap();
        File sdCardDirectory = Environment.getExternalStorageDirectory();
        File image = new File(sdCardDirectory, "test.png");
        boolean success = false;

        // Encode the file as a PNG image.
        FileOutputStream outStream;
        try {

            outStream = new FileOutputStream(image);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
            /* 100 to keep full quality of the image */

            outStream.flush();
            outStream.close();
            success = true;
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        if (success) {
            Toast.makeText(getApplicationContext(),
                    "Image saved with success", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(getApplicationContext(),
                    "Error during image saving", Toast.LENGTH_LONG).show();
        }
    } else if (v == capture) {
        captureImage();
    }

} 
```

}

我正在使用按钮启动相机

主要的.xml

```
 <Button
        android:id="@+id/takeviewpic"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Take/View Pic" /> 
```

安卓清单

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-feature
    android:name="android.hardware.camera"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera.front"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera.autofocus"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera.flash"
    android:required="false" />
<uses-feature android:name="android.hardware.screen.landscape" />
<uses-feature
    android:name="android.hardware.wifi"
    android:required="false" />
<uses-feature
    android:name="android.hardware.touchscreen"
    android:required="false" />

<uses-sdk android:minSdkVersion="10" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name="sp.com.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="main" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".NameCardList" >
    </activity>
    <activity android:name=".DetailForm" >
    </activity>
    <activity android:name=".EditPreferences" >
    </activity>
    <activity android:name=".NameCardMap" >
    </activity>
    <activity android:name=".SmsReceiver" >
    </activity>
    <activity
        android:name=".CameraMainActivity"
        android:label="@string/app_name" 
        android:clearTaskOnLaunch="true"
        android:configChanges="orientation|keyboardHidden"
        android:stateNotNeeded="true"
    />
</application> 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:04:47.380

我的这个相机示例可以帮助你：--

```
import android.hardware.Camera;

import android.hardware.Camera.CameraInfo;

import android.os.Bundle;

import android.app.Activity;

import android.content.pm.PackageManager;

import android.util.Log;

import android.view.Menu;

import android.view.View;

import android.widget.Toast;

public class Main extends Activity {

  private final static String DEBUG_TAG = "MakePhotoActivity";

  private Camera camera;

  private int cameraId = 0;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

 if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)) {

          Toast.makeText(this, "No camera on this device", Toast.LENGTH_LONG).show();

        }
else {

          cameraId = findFrontFacingCamera();

          camera = Camera.open(cameraId);

          if (cameraId < 0) {

            Toast.makeText(this, "No front facing camera found.",

                Toast.LENGTH_LONG).show();

          }

        }

}

 public void onClick(View view) {

    camera.takePicture(null, null,new PhotoHandler(getApplicationContext()));

  }

private int findFrontFacingCamera()
 {

int cameraId = -1;

    // Search for the front facing camera

    int numberOfCameras = Camera.getNumberOfCameras();

    for (int i = 0; i < numberOfCameras; i++)

{

CameraInfo info = new CameraInfo();

 Camera.getCameraInfo(i, info);

 if (info.facing == CameraInfo.CAMERA_FACING_FRONT)

{
        Log.d(DEBUG_TAG, "Camera found");

       cameraId = i;

     break;

     }

   }

  return cameraId;

  }

@Override

 protected void onPause() 
{

 if (camera != null) 
{

    camera.release();

    camera = null;

 }

super.onPause();

}

} 
```

还有另一类照片处理程序..!!!:-

```
 import java.io.File;
 import java.io.FileOutputStream;
 import java.text.SimpleDateFormat;
 import java.util.Date;

 import android.content.Context;
 import android.hardware.Camera;
 import android.hardware.Camera.PictureCallback;
 import android.os.Environment;
 import android.provider.SyncStateContract.Constants;
 import android.util.Log;
 import android.widget.Toast;

  public class PhotoHandler implements PictureCallback {
private final Context context;

  public PhotoHandler(Context context) {
    this.context = context;
  }

  public void onPictureTaken(byte[] data, Camera camera) {

    File pictureFileDir = getDir();

    if (!pictureFileDir.exists() && !pictureFileDir.mkdirs()) {

      Toast.makeText(context, "Can't create directory to save image.",
          Toast.LENGTH_LONG).show();
      return;

    }

    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
    String date = dateFormat.format(new Date());
    String photoFile = "Picture_" + date + ".jpg";

    String filename = pictureFileDir.getPath() + File.separator + photoFile;

    File pictureFile = new File(filename);

    try {
      FileOutputStream fos = new FileOutputStream(pictureFile);
      fos.write(data);
      fos.close();
      Toast.makeText(context, "New Image saved:" + photoFile,
          Toast.LENGTH_LONG).show();
    } catch (Exception error) {

      Toast.makeText(context, "Image could not be saved.",
          Toast.LENGTH_LONG).show();
    }
  }

  private File getDir() {
    File sdDir = Environment
      .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
    return new File(sdDir, "CameraAPIDemo");
  }

 } 
```

如果你想要别的东西，请添加评论......!!!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:37:59.687

使用 ImageView（或 ImageViews）建立一个活动，并将它们的源设置为您创建的文件。

# python - python中正则表达式中的变量

> ID：14495302
> 
> 赞同：-2
> 
> 时间：2013-01-24T06:36:02.447
> 
> 标签：python, regex, string

> **可能重复：**
> [如何在 Python 中使用多个字符串参数](https://stackoverflow.com/questions/10667605/how-to-use-several-string-arguments-in-python)

在下面的代码中，我正在尝试搜索以下模式之一

1.  href="除 ? 之外的任何字符之间都有一个连字符？"
2.  href="中间有一个连字符的任何字符，如果有任何其他连字符，在后面？"

我遇到了一个变量必须在正则表达式中插入两次的问题。

**代码**：

```
mlink=re.findall('href="(%s+/[a-zA-Z0-9]+-[a-zA-Z0-9?=]+)"|href="(%s+/[a-zA-Z0-9]+-[a-zA-Z0-9]+[?]+[a-zA-Z0-9-]*)"' % path,contents) 
```

另外，
我得到`not enough arguments for format string`错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:46:54.487

代替 % 格式运算符，您可以使用字符串`format`函数多次将变量放入字符串中

例如

```
 >>> '   {0}  {1}  {0}  '.format('foo', 'bar')
 '   foo  bar  foo  ' 
```

（问题实际上与正则表达式无关！）

# android - 三星 Galaxy S3 4.1.1 版中的相机强制关闭问题

> ID：14495304
> 
> 赞同：8
> 
> 时间：2013-01-24T06:36:04.290
> 
> 标签：android, camera, android-camera, galaxy, android-4.2-jelly-bean

我想捕获图像并将其保存在我的应用程序之一的图像视图中。我已经知道如何实现它并且在除三星 Galaxy S3 之外的所有设备中都可以正常工作。

**我想要什么：**避免三星 Galaxy S3 中出现的强制关闭问题，并且可能适用于我尚未测试的所有其他设备。

**我做了什么：**我已经完成了下面的代码来实现我的目标。

BuildInukshk_4 活动：

```
package com.inukshk.CreateInukshk;

import java.util.Calendar;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.DialogInterface.OnDismissListener;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.os.StatFs;
import android.provider.MediaStore;
import android.util.Log;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.inukshk.R;
import com.inukshk.constant.ImageCurve;

public class BuildInukshk_4 extends Activity implements OnClickListener,
        OnDismissListener {

    String TAG = "BuildInukshk_4";
    Button btn_back, btn_upload_picture;
    TextView txt_next;

    public static Activity BuildInukshk_4Activity;

    // Upload Camera
    public static String media = null;
    public static String media_thumb = null;
    public static String media_type = null;
    AlertDialog dialog;
    String _path, Place = "";
    ImageView imageView;
    boolean flag = true;
    Uri uriVideo = null, mCapturedImageURI = null;
    private static final int SELECT_PICTURE = 1;
    private String selectedImagePath = "";
    Uri selectedImageUri = null;
    private String filemanagerstring;
    Bitmap mBitmap;

    // From Transperant
    ContentResolver crThumb;
    private static final int CAMERA_PIC_REQUEST = 2500, VIDEO_REQUEST_CODE = 3;
    final static int REQUEST_VIDEO_CAPTURED = 2;
    BitmapFactory.Options options;
    String fileName;
    long id, imageid;
    Cursor cursor, cursorimage, thumbCursor;

    private String selectedthumbpath = "";
    boolean finish = false;
    // ADDED12324
    // private String filemanagerstring;

    Bitmap curThumb = null, curThumb1 = null;
    String[] thumbColumns = { MediaStore.Video.Thumbnails.DATA,
            MediaStore.Video.Thumbnails.VIDEO_ID };

    String[] mediaColumns = { MediaStore.Video.Media._ID,
            MediaStore.Video.Media.DATA };

    String[] imageColumns = { MediaStore.Images.Media._ID,
            MediaStore.Images.Media.DATA };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.buildinukshk_4);

        BuildInukshk_4Activity = this;
        btn_back = (Button) findViewById(R.id.btn_back);
        btn_back.setOnClickListener(this);

        btn_upload_picture = (Button) findViewById(R.id.btn_upload_picture);
        btn_upload_picture.setOnClickListener(this);

        txt_next = (TextView) findViewById(R.id.txt_next);
        txt_next.setOnClickListener(this);

        imageView = (ImageView) findViewById(R.id.img_upload_pic);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        if (v == txt_next) {
            if (selectedImagePath.equals("")) {
                Toast.makeText(BuildInukshk_4.this,
                        "Please Upload Picture First", 3).show();
            } else {
                startActivity(new Intent(BuildInukshk_4.this,
                        BuildInukshk_5.class));
            }

            // this.finish();
        } else if (v == btn_back) {
            // startActivity(new Intent(BuildInukshk_4.this,
            // BuildInukshk_3.class));
            this.finish();
        } else if (v == btn_upload_picture) {
            registerForContextMenu(btn_upload_picture);
            openContextMenu(btn_upload_picture);
        }

    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        Log.i(TAG, "Inside onCreateContextMenu");
        super.onCreateContextMenu(menu, v, menuInfo);

        if (v == btn_upload_picture) {
            menu.setHeaderTitle("Upload Media");
            menu.add(0, v.getId(), 0, "Photo");
        }
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        if (item.getTitle() == "Photo") {
            media_type = "image";
            // media_thumb = null;
            /*
             * Intent intent = new Intent(getApplicationContext(),
             * Transperant.class); intent.putExtra("MEDIA_TYPE", media_type);
             * startActivity(intent);
             */

            ImageChooseOptionDialog();
            // ImageChooseOptionDialog();

        }
        return super.onContextItemSelected(item);
    }

    // Transperant Class
    private void ImageChooseOptionDialog() {

        // finish = true;

        Log.i(TAG, "Inside ImageChooseOptionDialog");
        dialog = new AlertDialog.Builder(BuildInukshk_4.this).create();
        dialog.setTitle("Upload Photo");
        dialog.setMessage("Choose your Photo From here.");
        dialog.setOnDismissListener(this);
        dialog.setButton("Camera", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                // dialog.dismiss();
                Log.i(TAG, "Inside ImageChooseOptionDialog inside camera");

                Boolean isSDPresent = android.os.Environment
                        .getExternalStorageState().equals(
                                android.os.Environment.MEDIA_MOUNTED);
                mCapturedImageURI = null;
                if (isSDPresent) {
                    // yes SD-card is present
                    StatFs stat = new StatFs(Environment
                            .getExternalStorageDirectory().getPath());
                    long bytesAvailable = (long) stat.getBlockSize()
                            * (long) stat.getAvailableBlocks();
                    long megAvailable = bytesAvailable / (1024 * 1024);
                    Log.e("", "Available MB : " + megAvailable);
                    if (megAvailable > 2) {
                        Calendar cal = Calendar.getInstance();
                        _path = cal.getTimeInMillis() + ".jpg";

                        String fileName = _path;
                        // File file = new File(_path);
                        // mCapturedImageURI = Uri.fromFile(file);
                        ContentValues values = new ContentValues();
                        values.put(MediaStore.Images.Media.TITLE, fileName);

                        mCapturedImageURI = getContentResolver().insert(
                                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                                values);

                        Log.d(TAG, "----- path ----- " + _path);

                        Intent intent = new Intent(
                                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                        intent.putExtra(MediaStore.EXTRA_OUTPUT,
                                mCapturedImageURI);

                        Log.d(TAG, "----- mCapturedImageURI ******----- "
                                + mCapturedImageURI);
                        startActivityForResult(intent, 1212);

                        flag = false;
                    } else {

                        Toast.makeText(BuildInukshk_4.this,
                                "No Memory Available", 2).show();
                        flag = true;
                    }
                } else {
                    // Sorry
                    // StatFs stat = new StatFs(Environment.getDataDirectory()
                    // .getPath());
                    // long bytesAvailable = (long) stat.getBlockSize()
                    // * (long) stat.getAvailableBlocks();
                    // long megAvailable = bytesAvailable / (1024 * 1024);
                    // Log.e("", "Internal MB : " + megAvailable);
                    // if (megAvailable > 2) {
                    // startActivityForResult(new Intent(Transperant.this,
                    // VideoRecorder.class), REQUEST_VIDEO_CAPTURED);
                    //
                    // flag = false;
                    // } else {
                    Toast.makeText(BuildInukshk_4.this, "No Memory Available",
                            2).show();
                    flag = true;
                    // }
                    // Toast.makeText(Transperant.this, "No External Storage",
                    // 2)
                    // .show();
                }

            }
        });
        dialog.setButton2("Gallery", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                Log.i(TAG, "Inside Gallary");
                Log.i(TAG, "Inside ImageChooseOptionDialog inside camera");
                // dialog.dismiss();
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        SELECT_PICTURE);
                flag = false;

            }
        });

        dialog.show();

    }

    @Override
    public void onDismiss(DialogInterface dialog) {
        // TODO Auto-generated method stub

    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        if (cursor != null) {
            // HERE YOU WILL GET A NULLPOINTER IF CURSOR IS NULL
            // THIS CAN BE, IF YOU USED OI FILE MANAGER FOR PICKING THE MEDIA
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        } else
            return null;
    }

    public void onActivityResult(int requestCode, int resultCode,
            final Intent data) {

        crThumb = getContentResolver();
        options = new BitmapFactory.Options();
        options.inSampleSize = 1;
        Log.i(TAG, "Inside onActivityResult");

        if (requestCode == SELECT_PICTURE) {
            if (resultCode == RESULT_OK) {
                Log.i(TAG, "SELECT_PICTURE");
                selectedImageUri = data.getData();
                // filemanagerstring = selectedImageUri.getPath();
                selectedImagePath = getPath(selectedImageUri);
                if (selectedImagePath != null) {
                    BuildInukshk_4.media = selectedImagePath;
                    Log.e("Image path", selectedImagePath);

                    mBitmap = BitmapFactory.decodeFile(media);
                    if (mBitmap != null) {
                        Log.i(TAG, "Inside Set Image");
                        imageView.setImageBitmap(mBitmap);
                    }
                    // selectedthumbpath = null;
                    // Testimage();

                    // // curThumb1 = MediaStore.Images.Thumbnails.getThumbnail(
                    // // crThumb, imageid,
                    // // MediaStore.Video.Thumbnails.MICRO_KIND, options);
                    //
                    // Cursor thumbCursorimage = managedQuery(
                    // MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                    // imageColumns, MediaStore.Images.Thumbnails.IMAGE_ID
                    // + "=" + imageid, null, null);
                    //
                    // Log.e("Transarerant",
                    // "--- inside do TEst Image cusor 2nd -- "
                    // + thumbCursorimage.getCount());
                    // if (thumbCursorimage.moveToFirst()) {
                    // selectedthumbpath = thumbCursorimage
                    // .getString(thumbCursorimage
                    // .getColumnIndex(MediaStore.Images.Thumbnails.DATA));
                    // // selectedthumbpath = new
                    // Log.e("PathofThumb", selectedthumbpath);
                    // BuildInukshk_4.media_thumb = selectedthumbpath;
                    // }

                }
            }

        } else if (requestCode == VIDEO_REQUEST_CODE) {
        }

        else if (requestCode == REQUEST_VIDEO_CAPTURED) {
        }

        else if (requestCode == 1212) {

            if (resultCode == RESULT_OK) {
                Log.i(TAG, "Inside IF CONDITIONS in Camera");
                Log.i(TAG, "mCptureURI :" + mCapturedImageURI);

                String[] projection = { MediaStore.Images.Media.DATA };
                Cursor cursor = managedQuery(mCapturedImageURI, projection,
                        null, null, null);
                int column_index_data = cursor
                        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                selectedImagePath = cursor.getString(column_index_data);
                Log.e("Image path", selectedImagePath);

                BuildInukshk_4.media = selectedImagePath;

                mBitmap = BitmapFactory.decodeFile(media);
                if (mBitmap != null) {
                    Log.i(TAG, "Inside Set Image");
                    // mBitmap = ImageCurve.GetCurveImage(mBitmap);
                    imageView.setImageBitmap(mBitmap);
                }

                // selectedthumbpath = null;
                // Testimage();

                // curThumb1 =
                // MediaStore.Images.Thumbnails.getThumbnail(crThumb,
                // imageid, MediaStore.Video.Thumbnails.MICRO_KIND,
                // options);
                //
                // Cursor thumbCursorimage = managedQuery(
                // MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                // imageColumns, MediaStore.Images.Thumbnails.IMAGE_ID
                // + "=" + imageid, null, null);
                //
                // Log.e("Transarerant",
                // "--- inside do TEst Image cusor 2nd -- "
                // + thumbCursorimage.getCount());
                // if (thumbCursorimage.moveToFirst()) {
                // selectedthumbpath = thumbCursorimage
                // .getString(thumbCursorimage
                // .getColumnIndex(MediaStore.Images.Thumbnails.DATA));
                // // selectedthumbpath = new
                // Log.e("PathofThumb", selectedthumbpath);
                // BuildInukshk_4.media_thumb = selectedthumbpath;
            }

        }
    }
} 
```

如果我在这里犯了错误，这也是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.inukshk"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <!-- FOR Camera -->
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.FLASHLIGHT" />

    <!-- Don't require camera, as this requires a rear camera. This allows it to work on the Nexus 7 -->
    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.front"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.flash"
        android:required="false" />
    <uses-feature android:name="android.hardware.screen.landscape" />
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.touchscreen"
        android:required="false" />
    <uses-feature android:name="android.hardware.camera" />

    <application
        android:icon="@drawable/app_icon_final"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".SplashScreen"
            android:label="@string/title_activity_main"
            android:screenOrientation="sensorPortait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".login.LoginActivity"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="stateHidden" />
        <activity
            android:name=".WhereAmI.WhereAmI"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".WhosNearMe.WhosNearMe"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".WhatsNearMe.WhatsNearMe"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".CreateInukshk.CreateInukshk"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".CreateInukshk.BuildInukshk_1"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".CreateInukshk.BuildInukshk_2"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".CreateInukshk.BuildInukshk_3"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".CreateInukshk.BuildInukshk_4"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".CreateInukshk.BuildInukshk_5"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".tTab.TabSample"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".register.RegisterActivity"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".Transperant"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".HomeActivity"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".AfterSplash"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".login.ForgotPasswordActivity"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".settings.MyProfile"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".settings.MyInterests"
            android:screenOrientation="sensorPortait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".settings.InukshkSettings"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".settings.MyPicture"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".settings.MyInukshks"
            android:screenOrientation="sensorPortait" />
        <activity
            android:name=".settings.ChangePassword"
            android:screenOrientation="sensorPortait" />
    </application>

</manifest> 
```

我已经在许多 SO 链接中搜索了这个问题，但没有找到适合我的任何解决方案。请帮助我摆脱困境。

**我想在这里说明一下，我没有用于测试此问题的真实设备。
但是我的客户在真实设备上遇到了这个问题。我已经制作了一个与 S3 相同的模拟器，并且在每种情况下都可以毫无顾虑地工作。
我不知道为什么这只发生在真实设备上。**

提前致谢

> **已编辑：**我通过修改以下代码并作为答案解决了上述问题。您可以在阅读问题后查看。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T06:02:42.797

我为这个单一问题花费了很多时间，并通过修改代码使代码在大多数设备中工作，如下所示：

以后遇到相同问题的任何人都可以尝试以下代码。

在调用图像捕获意图时：

```
String storageState = Environment.getExternalStorageState();

                    if (storageState.equals(Environment.MEDIA_MOUNTED)) {
                        Intent intent = new Intent(
                                MediaStore.ACTION_IMAGE_CAPTURE);

                        String filename = System.currentTimeMillis() + ".jpg";
                        ContentValues values = new ContentValues();
                        values.put(MediaStore.Images.Media.TITLE, filename);
                        mImageCaptureUri = getContentResolver().insert(
                                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                                values);

                        intent.putExtra(
                                android.provider.MediaStore.EXTRA_OUTPUT,
                                mImageCaptureUri);

                        try {

                            startActivityForResult(intent, PICK_FROM_CAMERA);
                        } catch (ActivityNotFoundException e) {
                            e.printStackTrace();
                        }
                    } else {
                        new AlertDialog.Builder(BuildInukshk_4_Camera.this)
                                .setMessage(
                                        "External Storeage (SD Card) is required.\n\nCurrent state: "
                                                + storageState)
                                .setCancelable(true).create().show();
                    }

                } else { // pick from file
                    Intent intent = new Intent();

                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);

                    startActivityForResult(Intent.createChooser(intent,
                            "Complete action using"), PICK_FROM_FILE);
                } 
```

OnActivityResult 方法内部：

```
case PICK_FROM_CAMERA:
                Log.i("TAG", "Inside PICK_FROM_CAMERA");

                // Final Code As Below
                try {
                    Log.i("TAG", "inside Samsung Phones");
                    String[] projection = {
                            MediaStore.Images.Thumbnails._ID, // The columns we want
                            MediaStore.Images.Thumbnails.IMAGE_ID,
                            MediaStore.Images.Thumbnails.KIND,
                            MediaStore.Images.Thumbnails.DATA };
                    String selection = MediaStore.Images.Thumbnails.KIND + "=" + // Select
                                                                                    // only
                                                                                    // mini's
                            MediaStore.Images.Thumbnails.MINI_KIND;

                    String sort = MediaStore.Images.Thumbnails._ID + " DESC";

                    // At the moment, this is a bit of a hack, as I'm returning ALL
                    // images, and just taking the latest one. There is a better way
                    // to
                    // narrow this down I think with a WHERE clause which is
                    // currently
                    // the selection variable
                    Cursor myCursor = this.managedQuery(
                            MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                            projection, selection, null, sort);

                    long imageId = 0l;
                    long thumbnailImageId = 0l;
                    String thumbnailPath = "";

                    try {
                        myCursor.moveToFirst();
                        imageId = myCursor
                                .getLong(myCursor
                                        .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
                        thumbnailImageId = myCursor
                                .getLong(myCursor
                                        .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
                        thumbnailPath = myCursor
                                .getString(myCursor
                                        .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
                    } finally {
                        // myCursor.close();
                    }

                    // Create new Cursor to obtain the file Path for the large image

                    String[] largeFileProjection = {
                            MediaStore.Images.ImageColumns._ID,
                            MediaStore.Images.ImageColumns.DATA };

                    String largeFileSort = MediaStore.Images.ImageColumns._ID
                            + " DESC";
                    myCursor = this.managedQuery(
                            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                            largeFileProjection, null, null, largeFileSort);
                    String largeImagePath = "";

                    try {
                        myCursor.moveToFirst();

                        // This will actually give yo uthe file path location of the
                        // image.
                        largeImagePath = myCursor
                                .getString(myCursor
                                        .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
                        mImageCaptureUri_samsung = Uri.fromFile(new File(
                                largeImagePath));
                        mImageCaptureUri = null;
                    } finally {
                        // myCursor.close();
                    }

                    // These are the two URI's you'll be interested in. They give
                    // you a
                    // handle to the actual images
                    Uri uriLargeImage = Uri.withAppendedPath(
                            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                            String.valueOf(imageId));
                    Uri uriThumbnailImage = Uri.withAppendedPath(
                            MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                            String.valueOf(thumbnailImageId));

                    // I've left out the remaining code, as all I do is assign the
                    // URI's
                    // to my own objects anyways...
                } catch (Exception e) {
                    mImageCaptureUri_samsung = null;
                    Log.i("TAG",
                            "inside catch Samsung Phones exception " + e.toString());

                }

                try {
                    Log.i("TAG",
                            "URI Samsung:" + mImageCaptureUri_samsung.getPath());

                } catch (Exception e) {
                    Log.i("TAG", "Excfeption inside Samsung URI :" + e.toString());
                }

                try {

                    Log.i("TAG", "URI Normal:" + mImageCaptureUri.getPath());
                } catch (Exception e) {
                    Log.i("TAG", "Excfeption inside Normal URI :" + e.toString());
                }

                break; 
```

运行以下代码后，您将获得两个 URI`mImageCaptureUri_samsung`和`mImageCaptureUri`

如果您使用简单设备运行应用程序，您将获得 mImageCaptureUri 作为您的路径，如果您使用三星 Galaxy S3 等设备运行，您将在 mImageCaptureUri_samsung 中获得您的 Cpatured Image 路径。

此外，你们都可以继续使用您的代码。它对我来说非常适用于我测试过的所有设备。

此外，如果有人对上述代码有疑问，他们可以参考[三星 Galaxy S3 的以下大链接解决方案](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)

希望它会有所帮助。

# json - 在backbone.js中将值从一个视图传输到另一个视图

> ID：14495309
> 
> 赞同：0
> 
> 时间：2013-01-24T06:36:15.313
> 
> 标签：json, backbone.js

我在 MVC 应用程序中工作，我有预订列表屏幕和搜索弹出窗口，同时单击搜索按钮会显示一个弹出视图，用户将输入过滤器参数并提交弹出窗口。我需要将参数作为 JSON 数组传输到预订列表视图，我们如何将这些值从一个视图传输到另一个视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:54:03.143

使用两个视图都引用的单个集合。这就是您在主干中存储和表示状态的方式。视图不会将状态直接传递给另一个。视图操纵模型和集合，它们触发事件，从而导致其他视图做出反应。因此，如果您有一个设置过滤器参数的视图，一旦输入这些参数，就应该将它们设置到一个集合中，该集合将存储它们并在`fetch()`. 加载新模型时，可以通知其他视图重新渲染。

# jquery - 带有动态加载图像的 jquery 循环内容轮播

> ID：14495311
> 
> 赞同：0
> 
> 时间：2013-01-24T06:36:21.647
> 
> 标签：jquery, asp.net

我正在工作 asp.net 和 Jquery。

我的应用程序中有一个**带有 jquery 的圆形内容轮播，**带有静态图像（即）我在 css 中手动插入图像。但我需要**使用 sqlserver**数据库使其动态化。请给出一些建议。

代码：

```
 .ca-item-2 .ca-icon
   {
     background-image:url(../Database/images/f1.jpg);
   } 
```

这就是我现在插入图像的方式。

**这是工作代码**：

```
 <div class="container">
        <div class="header">
            <a                 href="http://tympanus.net/Tutorials/PortfolioImageNavigation/"><span>&laquo; Previous Demo: </span>Portfolio Image Navigation</a>
            <span class="right_ab">
                <a href="http://cyberella74.deviantart.com/art/Archigraphs-Animals-Icons-139629985" target="_blank">Animal Icons by Cyberella</a>
                <a href="http://tympanus.net/codrops/2011/08/16/circular-content-carousel/"><strong>back to the Codrops post</strong></a>
            </span>
        </div>
        <h1>Circular Content Carousel<span>with jQuery</span></h1>
        <div id="ca-container" class="ca-container">
            <div class="ca-wrapper">
                <div class="ca-item ca-item-1">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Stop factory farming</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>The greatness of a nation and its moral progress can be judged by the way in which its animals are treated.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper" runat="server">
                        <div class="ca-content">
                            <h6>Animals are not commodities</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-2">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Respect Life &amp; Rights</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>I hold that the more helpless a creature, the more entitled it is to protection by man from the cruelty of man.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div id="ca-content-wrapper">
                        <div id="ca-content">
                            <h6>Would you eat your dog?</h6>
                            <a href="#" id="ca-close">close</a>
                            <div id="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="ca-item ca-item-3">
                    <div id="ca-item-main">
                        <div id="ca-icon"></div>
                        <!--<h3>Become 100% meat-free</h3>
                        <h4>
                            <span id="ca-quote">&ldquo;</span>
                            <span>I feel that spiritual progress does demand at some stage that we should cease to kill our fellow creatures for the satisfaction of our bodily wants.</span>
                        </h4>-->
                            <a href="#" id="ca-more">more...</a>
                    </div>
                    <div id="ca-content-wrapper">
                        <div id="ca-content">
                            <h6>You can change the world</h6>
                            <a href="#" id="ca-close">close</a>
                            <div id="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-4">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Make a difference</h3>
                        <h4>
                            <span id="ca-quote">&ldquo;</span>
                            <span>A man is but the product of his thoughts what he thinks, he becomes.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper">
                        <div class="ca-content">
                            <h6>Think globally, act locally</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-5">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Say no to killing</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>A weak man is just by accident. A strong but non-violent man is unjust by accident.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper">
                        <div class="ca-content">
                            <h6>Animals have rights, too!</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-6">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Don't believe the lies</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>An error does not become truth by reason of multiplied propagation, nor does truth become error because nobody sees it.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper">
                        <div class="ca-content">
                            <h6>How essential is meat?</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-7">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>Save the planet</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>A small body of determined spirits fired by an unquenchable faith in their mission can alter the course of history.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper">
                        <div class="ca-content">
                            <h6>Collateral damage?</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ca-item ca-item-8">
                    <div class="ca-item-main">
                        <div class="ca-icon"></div>
                        <!--<h3>It's time to move on</h3>
                        <h4>
                            <span class="ca-quote">&ldquo;</span>
                            <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                        </h4>-->
                            <a href="#" class="ca-more">more...</a>
                    </div>
                    <div class="ca-content-wrapper">
                        <div class="ca-content">
                            <h6>Let's finally become humans</h6>
                            <a href="#" class="ca-close">close</a>
                            <div class="ca-content-text">
                                <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                <!--<p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>-->
                            </div>
                            <ul>
                                <li><a href="#">Read more</a></li>
                                <li><a href="#">Share this</a></li>
                                <li><a href="#">Become a member</a></li>
                                <li><a href="#">Donate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <h5>Quotes by Mohandas Gandhi</h5>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:47:35.030

您最好使用中继器将图像插入页面本身，并使用[jCarouselLite](http://www.gmarwaha.com/jquery/jcarousellite/)之类的 jQuery 轮播插件来创建圆形轮播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T17:18:14.487

使用 PHP 和数据库连接；我得到了你想要的。

查询：（应根据数据库的工作方式调整 sql 查询）

```
 $sth = $dbh->prepare("SELECT * FROM Carousel");
    $sth->execute();
    $carousel = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

这是PHP：

（您必须在标签 ['ID'] 等之间命名数据库中的表名）

```
<div class="container">
    <div id="ca-container" class="ca-container">
        <div class="ca-wrapper">
        <? foreach ($carousel as $carouselrow) { ?>
            <div class="ca-item ca-item-<? echo $carouselrow['ID']; ?>">
                <div class="ca-item-main">
                    <div class="ca-icon" style="background-image:url('<? echo $carouselrow['Image']; ?>')"></div>
                    <h3><? echo $carouselrow['Title']; ?></h3>
                    <h4>
                        <span class="ca-quote">&ldquo;</span>
                        <span><? echo $carouselrow['Subtitle']; ?></span>
                    </h4>
                    <a href="#" class="ca-more">Lees meer...</a>
                </div>
                <div class="ca-content-wrapper">
                    <div class="ca-content">
                        <h6><? echo $carouselrow['Title']; ?></h6>
                        <a href="#" class="ca-close">Sluit</a>
                        <div class="ca-content-text">
                            <p><? echo $carouselrow['Content']; ?></p>
                        </div>
                    </div>
                </div>
            </div>                                        
        <? } ?>
    </div>
</div> 
```

# ios - iPad 3 4G 不会显示网址图片

> ID：14495314
> 
> 赞同：1
> 
> 时间：2013-01-24T06:36:36.270
> 
> 标签：ios, objective-c, xcode, retina-display

我在 iPad 3 4G 测试设备上从 url 获取图像时遇到问题。代码适用于 ipad 1 和 2，也适用于 iphone 3gs 和 iphone 4。但似乎该图像是`nil`从服务器请求时。

我没有遇到这个问题，但客户报告问题...

我相信问题出在以下代码中

代码：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.image.com/img_download/499441.jpg"]];
UIImage *thumbnail = [UIImage imageWithData:data]; 
```

此代码中的 URL 不是真实的，但它是正确的澄清。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:12:29.940

几个想法：

1.  我建议使用[`dataWithContentsOfURL:options:error:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/uid/20000172-BCIIDGEC)而不是仅仅`dataWithContentsOfURL`报告错误代码。或者使用可能提供更多诊断信息的`NSURLConnection`其他框架（例如？）。`AFNetworking`但我怀疑`dataWithContentsOfURL:options:error:`可以提供必要的错误信息。

2.  你能把它放在上下文中吗？例如，这是您的应用程序正在异步执行的操作（例如，表格视图的缩略图）吗？如果是这样，您是否使用`NSOperationQueue`相当小的`maxConcurrentOperationCount`而不是全局调度队列，以确保您不超过允许的并发连接数？

    例如，如果您要像这样更新 tableview：

    ```
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"image.com/img_download/499441.jpg"]];
        UIImage *thumbnail = [UIImage imageWithData:data];

        // presumably you're updating your UI like so
        dispatch_async(dispatch_get_main_queue(), ^{
            // update UI
        });
    }); 
    ```

    您应该执行以下操作。首先，定义一个类属性：

    ```
    @property (nonatomic, strong) NSOperationQueue *queue; 
    ```

    其次，您应该在 中初始化它`viewDidLoad`，指定可接受的并发操作数：

    ```
    self.queue = [[NSOperationQueue alloc] init];
    self.queue.maxConcurrentOperationCount = 4; 
    ```

    最后，替换`dispatch_async`为：

    ```
    [self.queue addOperationWithBlock:^{
        NSError *error = nil;
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"image.com/img_download/499441.jpg"]
                                             options:0
                                               error:&error];

        if (error)
        {
            // log or display what the error is
        }
        else
        {
            UIImage *thumbnail = [UIImage imageWithData:data];

            if (thumbnail)
            {
                // update UI in the main queue

                [[NSOperationQueue mainQueue] addOperationWithBlock:^{

                    // make sure the cell is still visible

                    UITableViewCell *updateCell = [tableView cellForRowAtIndexPath:indexPath];

                    // if so, update the image

                    if (updateCell)
                    {
                        updateCell.imageView.image = thumbnail;
                    }
                }];
            }
        }
    }]; 
    ```

    请注意，您可能还希望进行缓存以消除重新加载已下载的图像。有关示例，请参见[https://stackoverflow.com/a/14444605/1271826 。](https://stackoverflow.com/a/14444605/1271826)如果您想跨会话缓存图像，您还可以将图像缓存到`Documents`文件夹（尽管必须注意确定图像的更改）。

对于我的第二点，有时连接问题不是由失败的特定线路引起的，而是更广泛问题的症状，因此，我们需要更多关于您如何使用问题中的代码的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:59:54.023

在您的项目中添加 Base64 类 www.imthi.com/wp-content/uploads/2010/08/base64.zip 现在编码为：

```
NSData* data = UIImageJPEGRepresentation(yourImage, 1.0f);
[Base64 initialize];
NSString *strEncoded = [Base64 encode:data]; 
```

解码为：

```
[Base64 initialize]; 
NSData* data = [Base64 decode:strEncoded ];;
image.image = [UIImage imageWithData:data]; 
```

# mysql - 使用 MySQL 存储过程我想将记录从其他三个表中插入到一个表中

> ID：14495315
> 
> 赞同：0
> 
> 时间：2013-01-24T06:36:40.390
> 
> 标签：mysql, stored-procedures

项目表

```
proj_id, proj_name, Proj_Type
1, test, dev
2, test1, infra
3, test2, BI 
```

配额表

```
quota_id, proj_id, allot_type, allot_num
1, 1, java, 3
2, 1, architect, 1
3, 1, Jasper, 2
4, 2, unix admin, 2
5, 2, dba, 1
6, 2, nwk admin, 1 
```

跟踪表

```
track_id, proj_id, status,start_date, sch_end_date,end_date, update_date
1,1, started,dec 16 2012,feb 12 2013,,01 jan 2013
2,2, resource allocated, 01 jan 2013, 03 mar 2013, , 01 jan 2013
3,3, yet to start, 19 jan 2013, 19 apr 2013 
```

目标表 (Summary_Table)

```
event_id, proj_id, proj_name, Proj_Type, allot_type, allow_num, proj_start_date_sch_end_date, proj_status
1, 1, test,dev,java,3,16 dec 2012,12 feb 2013,started
2, 1, test,dev,architect,1,16 dec 2012, 12 feb 2013, started
3, 1, test,dev,jasper, 2, 16 dec 2012, 12 feb 2013, started 
```

我必须编写一个存储过程来使用来自所有三个源表的信息加载目标表

另一个过程是在源表发生变化时定期更新目标表中的记录，例如项目状态从已开始更改为已交付等。

有人可以给我一些示例程序来实现上述要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:00:22.427

加载目标表

*   存储过程将只运行一次 - 即只是为了填充目标表？
*   或者对于三个源表中的任何一个中的每个插入都必须在目标表中插入？

    仅用于加载仅使用存储过程

    INSERT INTO desitination ([columns]) SELECT [columns] FROM project JOIN quota ON ... JOIN tracking ON ...

对于您的第二个过程-如果源表有任何更改，则更新目标表，我建议在更新时使用触发器，即

*   为更新目标表记录的源表设置触发器（http://dev.mysql.com/doc/refman/5.0/en/triggers.html）

如果每次在源表之一中发生插入时都必须填充目标表，则必须为插入和更新设置触发器。

如果插入/更新不在数据库级别，就像您有任何与数据库交互的应用程序一样，那么设置存储过程来处理目标表上的更新可能会起作用。

如果您将提供表格架构和一些虚拟数据，我可以创建一个示例代码。

```
CREATE TABLE `project` (
  `proj_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_name` varchar(30) NOT NULL,
  `Proj_Type` varchar(30) NOT NULL,
  PRIMARY KEY (`proj_id`)
);

CREATE TABLE `quota` (
  `quota_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_id` int(11) NOT NULL,
  `allot_type` varchar(30) NOT NULL,
  `allot_num` INT(11) NOT NULL,
  PRIMARY KEY (`quota_id`)
);

CREATE TABLE `tracking` (
  `track_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_id` int(11) NOT NULL,
  `status` varchar(30) NOT NULL,
  `start_date` DATE NULL,
  `sch_end_date` DATE NULL,
  `end_date` DATE NULL,
  `update_date` DATE NULL,
  PRIMARY KEY (`track_id`)
);

CREATE TABLE `Destination` (
  `event_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_id` int(11) NOT NULL,
  `proj_name` varchar(30) NOT NULL,
  `Proj_Type` VARCHAR(30) NOT NULL,
  `allot_type` varchar(30) NOT NULL,
  `allot_num` INT(11) NOT NULL,
  `proj_start_date_sch_end_date` DATE NULL,
  `status` varchar(30) NOT NULL,
  PRIMARY KEY (`event_id`)
);

INSERT INTO `project` (`proj_id`, `proj_name`, `Proj_Type`) VALUES
(1, 'test', 'dev'),
(2, 'test1', 'infra'),
(3, 'test2', 'BI');

INSERT INTO `quota` (`quota_id`, `proj_id`, `allot_type`, `allot_num`) VALUES
(1, 1, 'java', 3),
(2, 1, 'architect', 1),
(3, 1, 'Jasper', 2),
(4, 2, 'unix admin', 2),
(5, 2, 'dba', 1),
(6, 2, 'nwk admin', 1);

INSERT INTO `tracking`(`track_id`, `proj_id`, `status`, `start_date`, `sch_end_date`, `end_date`, `update_date`) VALUES 
(1, 1, 'started', '2012-12-16', '2013-02-12', NULL, '2013-01-01'),
(2, 2, 'resource allocated', '2013-01-01', '2013-03-03', NULL, '2013-01-01'),
(3, 3, 'yet to start', '2013-01-19', '2013-04-19', NULL, NULL);

delimiter $
CREATE TRIGGER `uProjectChange` AFTER UPDATE ON project
FOR EACH ROW BEGIN

    UPDATE `test`.`Destination` AS d 
  INNER JOIN `test`.`project` AS p ON p.proj_id = d.proj_id 
  SET 
    d.proj_name = p.proj_name,
    d.Proj_Type = p.Proj_Type;

END;$
delimiter ;

-- Load destination table
INSERT INTO `Destination` (`proj_id`, `proj_name`, `Proj_Type`, `allot_type`, `allot_num`, `proj_start_date_sch_end_date`, `status`) 
SELECT 
    p.proj_id, p.proj_name, p.Proj_Type, 
    q.allot_type, q.allot_num,
    t.start_date, t.status
FROM 
    project p 
INNER JOIN quota q ON q.proj_id = p.proj_id 
INNER JOIN tracking t ON t.proj_id = q.proj_id;

-- UPDATE project SET  proj_name = 'test_test', Proj_Type = 'dev_test' WHERE proj_id = 1;
-- UPDATE project SET  proj_name = 'test', Proj_Type = 'dev' WHERE proj_id = 1;
SELECT * FROM `project`;
SELECT * FROM `Destination`; 
```

[http://sqlfiddle.com/#!8/43c77/1](http://sqlfiddle.com/#!8/43c77/1)

这是示例代码 - 但我确实有一个问题 - 为什么使用目标表，即有一个表，为什么你不使用视图来代替？

# java - Switch 语句中的 Java 字符检查

> ID：14495320
> 
> 赞同：2
> 
> 时间：2013-01-24T06:37:18.970
> 
> 标签：java, char, switch-statement

所以这里只有一个关于带字符的开关盒的快速问题。

所以：

```
char c = a.charAt(i);
    switch(c){
        case 'a': System.out.print("This is an a");
        case ''': System.out.print("How can one get this character checked in the case?);

} 
```

那么，当检查 case 中字符的样式为 ' ' 时， case 如何检查字母 ' 呢？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T06:39:54.277

您需要转义单引号：

```
case '\'' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T06:39:33.523

用 \ 转义

例子：

```
case '\'': System.out.print("How can one get this character checked in the case?); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T06:43:43.270

```
 switch(c) {
        case 'a': 
               System.out.print("This is an a"); 
               break;
        case '\'': 
               System.out.print("How can one get this character checked in the case?);
               break;
   } 
```

请注意这`break`是必要的，如果没有 if c=='a' 程序将通过下一个案例并打印第二行。请注意，虽然第二次休息是不必要的，但被认为是一种好的风格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T06:40:22.343

您需要像这样转义单引号字符：

```
 case '\'' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T07:19:03.650

试试这个

```
char c = a.charAt(i);
    switch(c){
        case 'a': {
                    System.out.print("This is an a");
                    break;
                   }
        case '\'': System.out.print("How can one get this character checked in the case?);
} 
```

# git - 使用 git 管理生产网站？

> ID：14495322
> 
> 赞同：4
> 
> 时间：2013-01-24T06:37:22.927
> 
> 标签：git, version-control, git-clone, git-post-receive, git-bare

我在生产服务器上有一个包含大约 15,000 个文件的网站。一位远程开发人员现在正在网站上完成大部分工作，但我偶尔也需要进行一些编辑。很明显，我们需要一些版本控制，所以我正在尝试设置 git。

我真的很想保持设置简单明了。我们不需要任何类型的集成商来查看我们的更改 - 我们都完全信任将更改推送到生产站点。我也认为没有必要在使它们生效之前将更改推送到登台服务器，因为我们无法在本地机器上测试任何我们无法测试的东西。我基本上只是想要一些可以防止我们破坏彼此文件的东西。这是我想到的场景：

```
 Production Server
              ↗↙ ↖↘          
Developer1(LAMP)  Developer2(WAMP) 
```

问题：

1.  这个工作流程对于两个开发人员（其中一个只偶尔进行编辑）的团队有意义还是有更好的？

2.  在开发人员和生产服务器之间添加临时服务器有什么好处吗？

3.  我假设生产服务器应该是一个裸仓库，带有一个指向 webroot 文件夹的 post-receive 钩子，我们会将副本克隆到每个开发人员的机器上，然后 git commit / git push 将任何更改启动回生产？

4.  有什么简单的方法可以在生产服务器上创建一个裸仓库，然后将站点现有的 15,000 个文件添加到其中？还是我必须将它们下载到本地工作站上的克隆存储库，然后执行 git add / commit / push 以将它们加载到生产服务器存储库中？（他们可能需要将近 13 个小时才能上传。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:34:30.153

工作流程本身没有问题。但通常“规范”存储库是*独立*的，您可以使用其他一些机制（如 rsync）手动部署到生产服务器。这边走：

1.  您的生产服务器更新与您的开发工作流程无关。如果您的生产服务器（曾经！）在代码更改后需要完成任何工作——重新启动网络服务器、刷新一些缓存、进行模式更改等——那么突然间生产系统的问题会干扰你更新代码的能力，这很糟糕。

2.  您不必担心意外泄露对`.git`目录的访问权限并暴露所有源代码和开发历史。

3.  破坏站点需要两次事故（破坏大师*和*部署），而不是一次（破坏大师）。

4.  也许不是你们两个人关心的问题，但是让“更新站点”按钮与“更新代码”按钮具有不同的授权是很有用的。

暂存服务器的存在类似于生产，但易损坏。您只有两个开发人员，但您已经在使用截然不同的操作系统；我相当肯定至少你们中的*一个*人没有使用与生产相同的开发环境。:)

不，您不能将文件添加到裸存储库。您需要一个工作副本才能对工作树进行任何操作。

# primefaces - 如何搜索 primefaces 选项列表

> ID：14495325
> 
> 赞同：1
> 
> 时间：2013-01-24T06:37:36.530
> 
> 标签：primefaces

我有一个`Primefaces picklist`，并且我希望能够单击源列表，或者选择源列表中的一个项目，输入一个字符，比如“R”，然后让我的选项列表控件导航到我的选项列表中的那个点'R 的开始列表。本质上，我想按字母/字符搜索选项列表。我正在使用`Primefaces version 3.3.1`. 有人可以让我知道这是否可行，如果可以，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:45:42.840

[https://forum.primefaces.org/viewtopic.php?t=24621](https://forum.primefaces.org/viewtopic.php?t=24621)

您可以通过 Backing Bean 中的 actionListener 更新选择列表，如下所示：

```
public class PickListFilter {

    private List<String> sourceList; //Getter, Setter
    private List<String> targetList; //Getter, Setter

    private String filterChar; //Getter, Setter
    //Init Lists

    public void filterList() {

        filterChar = FacesContext.getCurrentInstance().getExternalContext().
                         getRequestParameterMap().get("filterChar");

        List<String> filteredList = new ArrayList<String>();
        for (String currentString : targetList) {
            if (currentString.startsWith(letter)) filteredList.add(currentString);
        }
        targetList = filteredList;
    }    
} 
```

要触发此 ActionListener，您可以使用 RemoteCommand。这个 RemoteCommand 将由一个小 jQuery 脚本触发，它监听击键。

```
<p:remoteCommand name="filterList" update="myPickList" action="#{pickListFilter.filterList}">
</p:remoteCommand> 
```

jQuery 脚本应该是这样的：

```
<script>
jQuery("#picklist").keypress(function(e) {
    command([{name:'filterChar',value: e.keyCode}]); //Save key to backing bean, TODO: Convert KeyCode to Char
    filterList();
});
</script> 
```

这是概念上需要做的事情。这只是一个可能的解决方案。希望这对您有所帮助。

# vb.net - vb.net - 将字符串传递给函数并替换该字符串中的几个单词

> ID：14495327
> 
> 赞同：0
> 
> 时间：2013-01-24T06:37:41.057
> 
> 标签：vb.net

请帮忙，我需要将字符串传递给函数，其中包含几个需要在字符串中替换的可选参数。有人可以帮助如何做到这一点，因为我不是 vb.net

```
String - "The <field1> is mandatory"
Variable - Employee Id
Output should be - "The Employee Id is mandatory" 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:46:45.970

您将查看[String.Replace 方法](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)。像这样的东西。由于字符串是不可变的，因此它会返回一个带有更正值的新字符串，然后您需要将其分配给旧字符串。

```
Module Module1

    Sub Main()
        Dim test As String = "The <field1> is mandatory"
        Dim variable As String = "Employee Id"
        test = test.Replace("<field1>", variable)
        Console.WriteLine(test)
        Console.ReadLine()
    End Sub

End Module 
```

您还可以使用使用[复合格式的](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)[String.Format](http://msdn.microsoft.com/en-us/library/d9t40k6d.aspx)方法，该方法允许您在字符串中嵌入字段，然后用变量替换它们。像这样的东西。

```
Dim test As String = "The {0} is a mandatory {1}"
Dim variable As String = "Employee Id"
Dim variable2 As String = "Field"

test = String.Format(test, variable, variable2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:54:37.167

你可以用这个

```
Public Function cal(Byref id)
Dim str as String
str= "The "+id+" is mandatory"
return str
End Function 
```

并通过调用此函数

```
s=cal(id) //id is the value to be passed and s is the result 
```

# google-apps-script - 获取脚本版本的 API？

> ID：14495331
> 
> 赞同：0
> 
> 时间：2013-01-24T06:37:56.020
> 
> 标签：google-apps-script

我正在寻找一种方法来获取由“文件\管理版本”管理的版本号。好像没有这样的API？ [https://developers.google.com/apps-script/guide_versions](https://developers.google.com/apps-script/guide_versions)

否则我会使用获取/设置用户属性来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:37:40.537

今天没有办法以编程方式检查当前脚本的版本。您可以手动存储它并通过[ScriptProperties](https://developers.google.com/apps-script/class_scriptproperties)检索它。

您还可以通过 File-->Project Properties 以图形方式查看此属性。请在您的[问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)中记录功能请求，并提供有关您的用例的详细信息。

# python - ubuntu 12.04 上的 python matplotlib MKL 致命错误

> ID：14495334
> 
> 赞同：2
> 
> 时间：2013-01-24T06:38:03.860
> 
> 标签：python, matplotlib, ubuntu-12.04, intel-mkl

这是我的python代码

```
1 import matplotlib.pyplot as plt                                                 
2 plt.plot([1, 2, 3, 4])                                                          
3 plt.ylabel('some numbers')                                                      
4 plt.show() 
```

当我运行它时，我收到以下错误消息

```
$ python test.py 

*** libmkl_avx.so *** failed with error : /usr/local/enthought/lib/libmkl_avx.so: undefined symbol: i_free
*** libmkl_def.so *** failed with error : /usr/local/enthought/lib/libmkl_def.so: undefined symbol: i_free
MKL FATAL ERROR: Cannot load neither libmkl_avx.so nor libmkl_def.so 
```

这是我的python版本。

```
$ python --version
Python 2.7.2 -- EPD 7.2-2 (64-bit) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-30T14:17:35.547

我意识到这是一个很老的问题，但是我遇到了同样的问题并找到了不需要重新安装的解决方案，所以对于任何未来的读者来说，这就是我所做的：

@root 在上面评论了[英特尔论坛](http://software.intel.com/en-us/forums/topic/300857)的链接。那里的答案之一建议预加载一些 MKL 库。（日期为星期二，2009 年 10 月 20 日 - 10:32，我不知道如何链接到那里的具体评论）。

这为我解决了这个问题。不过，您需要找到为您存储 libmkl_core.so 和 libmkl_sequential.so 库的位置。对我来说，它是：

```
export LD_PRELOAD=/usr/local/Canopy/v152/CanopyCore/appdata/canopy-1.5.2.2785.rh5-x86_64/lib/libmkl_sequential.so:/usr/local/Canopy/v152/CanopyCore/appdata/canopy-1.5.2.2785.rh5-x86_64/lib/libmkl_core.so 
```

中也有副本`/usr/local/Canopy/v152/Canopy_64bit/User/lib/`，但这些版本*不起作用*。只有上面那一种。

希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T16:30:01.303

更新 python 包。我在两台不同的机器上两次遇到这个问题。更新解决问题。 [使用 pip 升级所有软件包](https://stackoverflow.com/questions/2720014/upgrading-all-packages-with-pip)

# php - PHP安全功能

> ID：14495337
> 
> 赞同：0
> 
> 时间：2013-01-24T06:38:10.343
> 
> 标签：php

我做了一个简单的功能来防止sql注入，XXS是我的代码，有什么建议吗？这对安全性足够好吗？

```
function mres($input){
    if(get_magic_quotes_gpc()){
        $input=stripslashes($input);    
    }
    $input=htmlentities($input, ENT_COMPAT, 'UTF-8');
    return mysql_real_escape_string($input);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:40:26.633

这至少在两个方面是错误的：

1.  `magic_quotes`如果可以的话，完全关闭。至少你没有使用它，但`$input`可能不是标量
2.  `htmlentities`是用来*展示*的，不是存储的。永远不要为存储而编码！
3.  `mysql_*`功能已弃用。当您调用它时，也不能保证您将拥有一个打开的 mysql 连接（必需）。

[http://us3.php.net/manual/en/function.mysql-real-escape-string.php](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:12:20.970

看看你实际上在做什么：

魔术引号是对所有传入数据的批量转义，这使您容易受到攻击，因为单独转义并不能使您的数据以任何方式“安全”。

因此，您正在清理这些批量转义...然后再次应用相同的转义:)

# sql - 基于子查询的唯一值的 postgres 规则更新字段

> ID：14495340
> 
> 赞同：0
> 
> 时间：2013-01-24T06:38:17.527
> 
> 标签：sql, database, postgresql

当我`id_sitio`用实际值替换时，我可以更新基于子查询的字段：

```
update sitios
set grado = (
    select count(lin_sit.id_lineamiento) as total
    from lineamientos_sitios lin_sit inner join sitios sit on lin_sit.id_sitio=sit.id_sitio
    where sit.id_sitio=1418
)
where id_sitio=1418; 
```

但不是在我实施规则时。

```
CREATE or replace RULE actualizar_lineamientos_sitios_view AS ON UPDATE TO lineamientos_sitios_view DO INSTEAD (
UPDATE lineamientos_sitios SET id_lineamiento = new.id_lineamiento, id_sitio = new.id_sitio WHERE (lineamientos_sitios.id_lineamiento = old.id_lineamiento AND lineamientos_sitios.id_sitio = old.id_sitio);
update sitios  set grado = (select count(lin_sit.id_lineamiento) as total from lineamientos_sitios lin_sit inner join sitios sit on lin_sit.id_sitio=sit.id_sitio where sit.id_sitio=new.id_sitio) where id_sitio=new.id_sitio;
); 
```

我相信第一次更新是无关紧要的，因为它有效，我不确定如何`id`从我要上传的记录中引用。

有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:56:45.453

嗨，克雷格（欢迎其他人；））

非常感谢。你让我明白了，但删除规则有一些问题。第一条规则工作正常，所以我可以上传基于子查询的字段 grado。但是 calcularGrado2_view 规则不能使工作..

```
CREATE RULE calcularGrado_view AS ON INSERT TO lineamientos_sitios_view DO INSTEAD (

update sitios  set grado = (select count(lin_sit.id_lineamiento) as total from lineamientos_sitios lin_sit inner join sitios sit on lin_sit.id_sitio=sit.id_sitio where sit.id_sitio=new.id_sitio) where id_sitio=new.id_sitio;

);

CREATE RULE calcularGrado2_view AS ON DELETE TO lineamientos_sitios_view DO INSTEAD (

update sitios  set grado = (select count(lin_sit.id_lineamiento) as total from lineamientos_sitios lin_sit inner join sitios sit on lin_sit.id_sitio=sit.id_sitio where sit.id_sitio=old.id_sitio) where id_sitio=old.id_sitio;

); 
```

你知道这个规则有什么问题吗？谢谢！

# emacs - 是否可以在 Emacs 中自动更正拼写“on space”？

> ID：14495344
> 
> 赞同：2
> 
> 时间：2013-01-24T06:38:27.717
> 
> 标签：emacs, spell-checking, flyspell

我希望有一种方法，当我输入错误的单词时，flyspell 可以将其自动更正为“最有可能”的更正。当我输入错误的单词然后按 OPTION-TAB 进行更正时，flyspell 几乎总是默认选择正确的更正作为主要建议。

但是，我希望 flyspell 对我输入错误的每个单词都执行此操作，而无需点击 OPTION-TAB。只需点击空格键并继续下一个单词。

这可能吗？

# javascript - 双击改变ul的颜色

> ID：14495349
> 
> 赞同：1
> 
> 时间：2013-01-24T06:39:13.650
> 
> 标签：javascript, css, jsp, dom-events

有什么方法可以在双击事件中更改或**突出显示 ul 标签的颜色或某行？**

```
<c:forEach var="food" varStatus="i" items="${foodList}">
    <c:set var="foodInfo" value="${food.key}"/> 
        <ul class="scroller_result" ondblclick="showDetails('${foodInfo}','m','iPad');"">
            <li> <input type="checkbox" name="foodIds" <option value="${food.key}"><c:out value="${food.value}"/></option>>
            </li>
        </ul>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:45:28.580

您应该通过查看类似问题找到提示和答案

[onClick 更改列表样式](https://stackoverflow.com/questions/4477541/onclick-change-list-styles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:47:01.220

`jQuery`将是非常优雅的解决方案

```
function showDetails(...) {
   ... 
   $(".scroller_result").css("color","red");
} 
```

`jQuery`您可以通过添加到您的页面来导入

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

看[例子](http://jsfiddle.net/HpGBj/)_`jsfiddle`

* * *

如果你不想使用外部 JS 库，你可以使用纯 JS。看看我的扩展[示例](http://cdpn.io/joebh)。

# jmeter - 如何在运行侦听器时获取登录成功和失败的次数

> ID：14495352
> 
> 赞同：0
> 
> 时间：2013-01-24T06:39:38.197
> 
> 标签：jmeter

我正在做代理录音。我们正在对包含用户名和密码的 Web 应用程序进行负载测试。

如何区分登录成功和登录失败？

我需要在运行侦听器时获取登录成功和失败的次数。

您能否分享我必须遵循的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:54:59.783

向您的请求添加响应断言以检查响应正文或代码中的某些内容

*   使用汇总报告，您将有错误 %

# android - 位图不完全适合android中的矩形

> ID：14495356
> 
> 赞同：3
> 
> 时间：2013-01-24T06:39:54.853
> 
> 标签：android, bitmap, android-canvas, surfaceview, dirtyrectangle

我正在使用 android-V11 开发 RDP 客户端应用程序。

服务器：屏幕分为 4 个部分，分别发送 byte[]、left、top、right、bottom、Screen resolution(width --> 1024/1280, height --? 768/ 1024) 值为每一帧的图像数据给客户。

客户端：我正在使用表面视图来显示从服务器接收的图像。我需要显示 4 帧（服务器的一个屏幕）以完全适合平板电脑屏幕。

示例代码：

```
 class mySurfaceView extends SurfaceView implements SurfaceHolder.Callback
    {

       class TutorialThread extends Thread 
       {
         @Override
         public void run() 
         {
           Canvas c = null;
          // Socket commnuication
           ......
         Bitmap bmp;
          while(true){
           c=null;
           //logic to get the details from server
          .....
         bmp = BitmapFactory.decodeByteArray(imageBytes, 0,imageBytes.length);

        //Logic to calculate the Top Left, right bottom corners to divide the tablet screen into   4parts for 4 frames receiving from server
          .....

    //Frame rectangle for each frame

        Rect rect = new Rect(newLeft, newTop,newWidth,newHeight);

    //display image

       try{

        c  = _surfaceHolder.lockCanvas(rect);

        if(c!=null){
            synchronized (_surfaceHolder) 
            {
                       c.drawBitmap(scaledBitmap, newLeft,newTop, paint);
                    }
              }
          }
          finally{
        if(c!=null){                                     _surfaceHolder.unlockCanvasAndPost(c);
               }
        }
        //End of while
    }
    //End of run()
    }
    //End Tutorial Thread
    }
    //End of surfaceView
    } 
```

我们无法将位图完全适合矩形。框架显示在平板电脑中，它们之间有间隙。

调试代码后，似乎检索到的位图（bmp）宽度为 514，矩形（矩形）宽度为 640。因此，位图不适合矩形。

请告诉我如何缩放位图以完全适合矩形。

注意：我还需要捏缩放图像。

谢谢和问候亚米尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:41:58.937

首先获取位图的高和宽，

```
final int height= bitmap.getHeight() ;
final int width= bitmap.getWidth();
float h= (float) height;
float w= (float) width; 
```

现在让你的矩形的位置是**（newLeft，newTop）** 和高度，宽度 分别是**newHeight**和**newWidth**

现在将位置和比例因子设置为矩阵对象

```
Matrix mat=new Matrix();
mat.setTranslate( newLeft, newTop );
mat.setScale(newWidth/w ,newHeight/h); 
```

现在用矩阵绘制你的位图

```
canvas.drawBitmap(bitmap, mat, new paint()); 
```

现在您的位图将填充矩形..

试试看，万事如意！

# backbone.js - 监听视图中的模型事件

> ID：14495357
> 
> 赞同：1
> 
> 时间：2013-01-24T06:40:03.843
> 
> 标签：backbone.js

我尝试在模型更改时渲染视图。你能告诉为什么这段代码不能正常工作吗？

```
var TodoView = Backbone.View.extend({
    initialize: function() {
        this.model.on('change', this.render, this);
    },
}); 
```

它给出了错误：

```
TypeError: this.model.on is not a function 
```

但看起来这段代码有效：

```
var TodoView = Backbone.View.extend({
    initialize: function() {
            _.bindAll(this, 'render');  
        this.model.bind('change', this.render);  
    },
}); 
```

这些库用于：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:18:59.267

`on`和`off`方法被添加到版本中的 Backbone 中，`0.9.0`看起来你仍然是版本`0.3.3`。您可以继续使用`bind`和`unbind`。新的`on`/`off`方法只是同一事物的别名。

或者，您应该考虑更新您的 Backbone 版本。由于`0.3.3`Backbone 已经有数百个其他改进和错误修复，因此`0.9.10`如果可以的话，您应该更新到最新的 ( )。同时需要将下划线更新为版本 `>= 1.4.3`

# html - 寻找一个纯css ui框架的移动web

> ID：14495365
> 
> 赞同：6
> 
> 时间：2013-01-24T06:40:41.060
> 
> 标签：html, css, mobile

我正在寻找一个 CSS 框架来设置在小屏幕上大且易于使用的表单元素和列表的样式。它需要是一个纯 CSS 框架，几乎没有 JavaScript。像 Twitter Bootstrap 之类的东西。我不想要像 jQueryMobile 这样的大量 JavaScript 框架。也不需要响应式布局和网格支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:02:11.803

如果你想要一个 iOS 风格的框架，你可以试试[iWebKit](http://snippetspace.com/)和[iUI](http://www.iui-js.org)。

您还可以使用任何响应式框架，例如 Bootstrap。

# cakephp - CakePHP 2.2 类别树脚手架 - 父级未显示

> ID：14495371
> 
> 赞同：0
> 
> 时间：2013-01-24T06:41:03.887
> 
> 标签：cakephp, tree, scaffolding, cakephp-2.2

我正在使用 CakePHP 管理一个具有一些类别的 Web 应用程序，这些类别具有以下 SQL 数据库。我已经包含了我的控制器和类名。基本上，除了我认为类别的“正常”功能之外，我不需要任何其他东西。

树结构的 parent_ids 是其他类别，这些类别是可选的（例如，对于顶级类别。

脚手架应用正确，如果我转到 /admin/categories，我可以将它们 CRUD 到我心中的内容，但它创建的“父”下拉列表是空白的。

我做错了什么，或者这对脚手架来说太复杂了吗？

```
CREATE TABLE `ck_categories` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `parent_id` INT(11) NULL DEFAULT NULL,
    `name` VARCHAR(150) NOT NULL COLLATE 'latin1_general_ci',
    `lft` INT(11) NOT NULL,
    `rght` INT(11) NOT NULL,
    PRIMARY KEY (`id`)
)

class CategoriesController extends AppController {
    public $scaffold = 'admin';

        public function index() {
            $data = $this->Category->generateTreeList(null, null, null, '&nbsp;&nbsp;&nbsp;');
            debug($data); die;
        }
}

class Category extends AppModel {
    var $name = 'Category';
    var $displayField = 'name';

            public $hasMany = 'Product';
            var $actsAs = array('Tree'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:35:02.897

我认为您忘记添加与 parentCategory ID 的关联。

```
var $belongsTo = array
(
    'ChildRecored' => array
    (
        'className' => 'Category',
        'foreignKey' => 'parent_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);
```

# javascript - 使用 javascript 进行远程 => true 调用

> ID：14495372
> 
> 赞同：2
> 
> 时间：2013-01-24T06:41:06.647
> 
> 标签：javascript, ajax, ruby-on-rails-3, rjs, ujs

`link_to ... remote=> true`有没有办法与 javascript具有相同的行为？

也许没必要——

我有一个包含用户名和图片的 div。

我想让整个 div 对单击做出反应并转到方法（`users#show`例如），就好像它是 link_to 一样。

link_to 的问题在于它创建了`a href`，使文本可链接等。

此外，我似乎无法使用它来使整个 div 可点击，只有文本。

为了更多地解释我自己——

if`link_to`对应`window.location`于 javascript

javascript中`link_to`有什么？`:remote=>true`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-07T17:08:36.890

这就是你的做法：

`$.rails.handleRemote($('<a>', { href: '/path', 'data-method': 'GET' }));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:48:05.630

我对 Rails 并不完全熟悉，但是在阅读了该方法的描述后，听起来您只是在进行 ajax 调用。有趣的是，Rails 抽象了这个概念。

如果您使用的是 jQuery 之类的库，则单击时执行 ajax 调用非常简单：

```
$('element').click(function(e){
  $.get('url', function action(){
    // Do stuff
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:37:01.197

要使 DIV 与 remote=>true 一起工作，在仔细检查 jquery-ujs 之后，您似乎可以将希望可点击的 DIV 包装在一个 FORM 周围，如下所示：

```
<form action="/users" method="POST" data-remote="true">
   <div onclick="$(this.parentNode).trigger('submit.rails');">Remote Request</div>
    <input type="submit" style="display:none" />
</form> 
```

# git - 是否可以设置一个 git repo，使一个分支永远不能直接合并到另一个分支中？

> ID：14495373
> 
> 赞同：1
> 
> 时间：2013-01-24T06:41:06.427
> 
> 标签：git

如果我说有一个`test`我永远不想合并的分支，`staging`那可以设置吗？即，如果我有`feature-branch-a`并且将其合并到`test`其中，则无法合并`test -> staging`，但`feature-branch-a -> staging`可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:34:03.073

在本地，您可以使用预提交挂钩来执行此操作，如“ [Is there a way to keep two branches from merging in git](https://stackoverflow.com/a/4061152/6309) ”中所述。
但是那个钩子不会在 repos 之间复制，它会留在本地。

如果你有一个集中的 repo 服务器，你可以添加[gitolite](http://sitaramc.github.com/gitolite/master-toc.html)并声明一个类似的钩子作为[VREF（更新钩子）](https://stackoverflow.com/a/10888358/6309)。

# android - Activity 实例从堆栈中移除

> ID：14495374
> 
> 赞同：0
> 
> 时间：2013-01-24T06:41:08.927
> 
> 标签：android, android-intent, android-activity

我有几个活动，包括时间线活动。此活动在用户成功登录我的应用程序时开始。但是，我有一个用于更改应用程序主题的菜单。当我去更改应用程序主题时，由于下次使用，我没有完成时间轴活动。我更改了我的主题颜色和背景，并将更改保存到带有新主题的时间线活动。然后当我使用以下代码退出我的应用程序时

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // Ask the user if they want to quit

        new AlertDialog.Builder(this)
                .setIcon(android.R.drawable.ic_dialog_alert)
                .setTitle("")
                .setMessage("Do you want to exit")
                .setNegativeButton("No", null)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            // @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                finish();

                                Intent intent = new Intent(
                                        Intent.ACTION_MAIN);
                                intent.addCategory(Intent.CATEGORY_HOME);
                                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
                                startActivity(intent);

                            }
                        }).show();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

但是当我再次启动我的应用程序时，我看到了主题更改之前的时间线活动。我认为 Timetine 活动实例保留在堆栈中，尽管我从 ThemeChange Activity 开始新的 Timeline 活动。

活动流程

时间线（带有黑色主题）--> ThemeChange（通过按 ThemechangeMenu）--> 更改主题和保存按钮单击--> 重新开始时间线（成功使用新主题）--> 使用 Avobe 代码退出我的应用程序--> 重新开始我的应用程序 --> 出现时间线（使用 Balck 主题而不是更改的主题）

当使用保存按钮单击侦听器从 Themechange 活动运行新的 Timeline 实例时，如何从堆栈中销毁 TimeLine 的前一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:45:47.223

在您的代码中放置`finish();`after并在文件中添加**TimeLineActivity**。然后将不在堆栈中。`startActivity(intent);``android:lauchMode="standard"`**`manifest``activity`**

# spring - 使用 websocket 将远程系统连接到 Grails 应用程序？（非http）

> ID：14495375
> 
> 赞同：1
> 
> 时间：2013-01-24T06:41:10.190
> 
> 标签：spring, grails, architecture, websocket

我对 websockets 完全陌生，但建议我将其用作将客户端系统连接到正在运行的 Grails 应用程序的技术。

我们的应用程序客户端无法使用普通的 http（websocket 技术实际上是使用 TCP 通道），因此远程客户端系统应该能够启动到我们的 Grails 应用程序（或中间转换器之类的应用程序）的连接，我们希望交换数据。远程客户端没有浏览器，所以气氛插件是不行的！

同样，必须与我们的 Grails 应用程序交换数据的客户端是非浏览器系统，并且可以自主/独立运行！

选择 Websockets 是因为远程客户端系统必须连接到防火墙和路由器后面的 Grails 应用程序。远程客户端系统将启动与正在运行的 Grails 服务器环境的连接。（机器对机器通信）

关于我应该在服务器端使用什么软件来构建一个环境以便远程客户端可以与我们的 Grails 应用程序交换数据的任何建议？

提前致谢！

# linux - 更改默认文件夹权限 ubuntu

> ID：14495376
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:41:15.643
> 
> 标签：linux, permissions, chmod, ubuntu-11.10

我是 Linux 新手，困扰我的是当我在我的 ruby​​ on rails 项目上以及当我生成控制器或任何文件时。如果我查看文件浏览器，它有一个锁定符号。所以，我必须`chmod 757 -R file`每次都这样做。那么，是否可以为我的根文件夹设置默认的读写权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:44:04.537

看一下`umask`命令。它可以应用在 shell 设置中（所以在你的 ~/.bash_ 或 ~/.profile 文件中的某个地方）。您可以使用该命令指定文件权限掩码。

或者，使用文件的组所有权来允许两方访问文件是一种常见的模式，反之亦然，在这种情况下，可能是用户和 Web 服务器帐户。这减少了组级别所需的权限，这显然更安全。

# git - 如何将远程 Git 存储库添加到本地非 git 存储库并保持更新

> ID：14495377
> 
> 赞同：1
> 
> 时间：2013-01-24T06:41:31.813
> 
> 标签：git, github

我正在处理一个已移至 GitHub 存储库的项目，该项目在项目库中有一些重大更新。但是那些在同一项目基础上工作的人只有未更新的版本。那么如何将他们的**本地非 git repo 转换为本地 git repo**并使用同一项目的新版本更新它们。

我已经浏览了[git](http://git-scm.com/doc)的所有文档，但我仍然不清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:22:10.677

一种方法是：

*   `git init`在您的本地代码库中，添加所有内容并提交
*   [将 GitHub 存储库添加为远程](https://help.github.com/articles/adding-a-remote)，命名为“上游”
*   获取它，然后加入两个代码库，遵循“[我如何加入两个没有共同根目录的 git repos，所有修改的文件都相同？](https://stackoverflow.com/questions/2404628/how-do-i-join-two-git-repos-without-a-common-root-where-all-modified-files-are) ”
*   将您自己的分支推送到原始 github 存储库的分支，您将其添加为远程，并命名`origin`：您有权推送到原点，而不是上游。
    请参阅“ GitHub[和GitHub](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)[有什么区别？`origin``upstream`](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:10:18.643

为了保留他们的工作，最好的方法是：

```
# current dir is ~/oldversion
# create a new directory 
mkdir ~/newversion
# get the clean versioned project
git clone git@github.com:Your/repo .
# create a new local branch and go on it
git checkout -b migration
# now copy everything from the old project. the modified files will appear with "git status"
cp -r ../oldversion/* ./
# commit the last work
git commit --all -m "importing to git"
# now, make some checks/editio, git diff, git rm, git revert, git checkout path/to/file whatever
...
# then import your work in a branch for everyone, if you use master that means
git checkout master
git merge migration --no-ff -m "migrated by me" 
```

如果使用了 scm，您可能更愿意在某一时刻排除一些文件，例如 .svn 目录。

# java - 如何在while循环中每5秒更新一次textview而不影响循环执行和主要活动

> ID：14495383
> 
> 赞同：-2
> 
> 时间：2013-01-24T06:42:18.797
> 
> 标签：java, android

> **可能重复：**
> [如何每 5 秒更新一次 textview 变量](https://stackoverflow.com/questions/14476476/how-to-update-the-textview-variable-for-every-5-seconds)

我有两个任务要同时使用同一个数据文件。一个是读取 txt 文件并将其绘制在图表视图中。另一个任务是使用绘制的数据进行计算。我的 android 应用程序布局应该在图表视图上方的文本视图中具有这些计算结果，并且它应该在 5 秒内不断更新，同时在图表中动态地进行绘图。

我对第二个任务有疑问 - 更新在 while 循环中运行的 textview 中的值。我用过 Handler、Asynctask、Thread、Wait。它可以完美地用作 java 应用程序。但是，它可以用作 android 应用程序。我的应用程序要么强制关闭，要么在启动前延迟（即）应用程序仅在给定延迟后打开并显示 while 循环执行的最后一个值。我也在后台执行此操作，但它会影响绘图。

```
 while(p[y1]!=0)
 {
    rr = ((p[y1]-p[y1-1]));
    double x = rr/500;
    HR = (int) (60/x);                         
     final Handler handler=new Handler();
      handler.post(runnable);
          final Runnable runnable=new Runnable()
          {
          @Override
          public void run()
          {                      
                  hr.setText(String.valueOf(HR));
                handler.postDelayed(runnable, 5000);
          }
          };

          y1++;
            } 
```

我希望 hr 值每 5 秒更新一次，而不影响图表。任何人请帮忙。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:03:43.700

您是否尝试过类似的方法，创建一个内部线程类，在其运行方法中执行您需要的操作。您也可以在运行时尝试 sleep 5 秒。确保您的 while 循环在 run 方法中。

我在下面的代码中，你在一个while循环中有线程，但你应该在一个线程中有循环。如果你在这样做时遇到任何问题，请告诉我。

```
boolean isAlive = true; //change it  to falst whenever u want to stop the thread
class localT extends Thread {

@Override
public void run() {
    while(isAlive) {

        try {
            sleep(5000);

            textView.setText("yourChanging text");
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    super.run();
}; 
```

}

使用类似 localThread.start(); , kill// 在暂停、销毁时停止该线程。

# ruby-on-rails - 传递 access_token 进行 API 调用的最佳实践是什么

> ID：14495384
> 
> 赞同：0
> 
> 时间：2013-01-24T06:42:22.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth, oauth-2.0

我开发了一个使用 Oauth 2 进行授权的 Rails 应用程序。目前为了访问 API 调用，我将 access_token 作为 URL 参数传递，我听说令牌也可以作为 Header 传递。哪个是传递 access_token 的最佳实践，为什么？

我正在使用 Devise + Doorkeeper 来支持 Oauth。

请给我一些建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:21:54.127

As header you can make like this in controller:

```
before_filter :authenticate

protected

def current_user
  @current_user
end

def authenticate
  token = request.env["HTTP_ACCESS_TOKEN"]
  @current_user = User.where(authentication_token: token).first if token.present?
  unless token && current_user.present?
    #error handling goes here.
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:20:05.873

在 Headers 中看到 access_token 是很常见的。看：标题有什么用？它们用于有关请求的元信息。毫无疑问，accesstoken 是元信息。

我不确定我的答案是否完整，可能还有一些我不知道的额外陷阱。如我错了请纠正我。

# php - Ajax 无法正常工作的问题

> ID：14495385
> 
> 赞同：0
> 
> 时间：2013-01-24T06:42:34.370
> 
> 标签：php, ajax

我仔细检查了我的代码，但找不到我做错的部分。每次，我单击按钮，它都不会从我的 generate.php 中检索文件

索引.PHP

```
<html>
    <head>
        <title>Title</title>
        <script type="text/javascript">

            function myLoad(){
                if(window.XMLHttpRequest){
                    xmlhttp = new XMLHttpRequest();
                }else{
                    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
                }

                xmlhttp.onreadystatechange = function(){
                    if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
                        document.getElementById('par').innerHTML == xmlhttp.responseText;
                    }
                }

                xmlhttp.open('GET', 'generate.php', true);
                xmlhttp.send();
            }

        </script>
    </head>

    <body>
        <div id="par"></div>
        <input type="button" value="Click" onclick="myLoad();">
    </body>
</html> 
```

生成.PHP

```
<?php
    echo 'Hello';
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T06:44:33.387

```
document.getElementById('par').innerHTML == xmlhttp.responseText;
                                         ^ // here is problem it should be =

document.getElementById('par').innerHTML = xmlhttp.responseText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:45:16.080

### 错字在这里：

```
document.getElementById('par').innerHTML == xmlhttp.responseText;
------------------------------------------^ // Make it just = 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:02:47.950

将此代码复制到 index.php 文件中。我确定它会解决您的问题，当您单击按钮时，它会从 generate.php 文件中调用“Hello”。

```
<html>
<head>
<title>Title</title>
    <script type="text/javascript">

    function myLoad()
    {
        var xmlhttp;
        if (window.XMLHttpRequest){
            xmlhttp=new XMLHttpRequest();
        }
        else{
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function()               {
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById("par").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","generate.php",true);
        xmlhttp.send();
    }

</script>
</head>

<body>
    <input type="button" value="Click" onclick="myLoad();">
    <div id="par"></div>
</body>
</html> 
```

# c# - IE 自动化使地址栏无法正常工作

> ID：14495387
> 
> 赞同：1
> 
> 时间：2013-01-24T06:42:42.213
> 
> 标签：c#, automation, internet-explorer-9, pinvoke

有人可以在这个片段中阐明吗？我正在使用 IE 9，有时它可以工作到点，有时不能，但不会更远。

```
IntPtr IEwindowHandle = GetForegroundWindow();
IntPtr childHandle = IntPtr.Zero;
childHandle = FindWindowEx(IEwindowHandle, IntPtr.Zero, "WorkerW", IntPtr.Zero);
if (childHandle != IntPtr.Zero)
{
    //get the handle to the address bar on IE
    childHandle = FindWindowEx(childHandle, IntPtr.Zero, "ReBarWindow32", IntPtr.Zero);
    if (childHandle != IntPtr.Zero)
    {
       // Usually it get until HERE  <---------
        // get a handle to comboBoxEx32
        childHandle = FindWindowEx(childHandle, IntPtr.Zero, "ComboBoxEx32", IntPtr.Zero);
        if (childHandle != IntPtr.Zero)
        {
            // get a handle to combo box
            childHandle = FindWindowEx(childHandle, IntPtr.Zero, "ComboBox", IntPtr.Zero);
            if (childHandle != IntPtr.Zero)
            {
                //get handle to edit
                childHandle = FindWindowEx(childHandle, IntPtr.Zero, "Edit", IntPtr.Zero);
                if (childHandle != IntPtr.Zero)
                {
                    // now to get the URL we need to get the Text - but first get the length of the URL
                    int length = SendMessage(childHandle, WM_GETTEXTLENGTH, 0, null);
                    length += 1;    // because the length returned above included 0
                    StringBuilder text = new StringBuilder(length); // need stringbuilder - not string
                    int hr = SendMessage(childHandle, WM_GETTEXT, length, text); // get the URL
                    string strURL = text.ToString();
                }
            }
        }
    }
} 
```

还有 FindWindowEx 的声明

```
 [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr FindWindowEx(IntPtr parentHandle, IntPtr childAfter, string className, IntPtr windowTitle); 
```

它让我发疯......这应该有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:02:11.430

@Simon 感谢您将我指向此线程！我最终使用了以下方法（这只是一个代码片段，重要的部分）：

```
string url = string.Empty;
try
{
    DdeClient oDde = new DdeClient("IExplore", "WWW_GetWindowInfo");
    try
    {
        oDde.Connect();
        url = oDde.Request("1", int.MaxValue);
        oDde.Disconnect();
    }
    catch (Exception ex)
    {
        throw ex;
    }
}
catch (Exception ex)
{
    throw ex;
} 
```

# c# - 带有实例参数的 SQL 连接字符串

> ID：14495390
> 
> 赞同：6
> 
> 时间：2013-01-24T06:43:17.783
> 
> 标签：c#, asp.net, sql, sql-server, c#-4.0

我正在尝试检查（在 .net c# 中）是否能够连接到 SQL 服务器。但是，每当我在连接字符串中指定**实例**时，我就无法再连接。：

这有效：

```
builder.ConnectionString = "Server=DLS-534;user id=sa;password=Mypassword;initial catalog=master"; 
```

这不起作用：

```
builder.ConnectionString = "Server=DLS-534\\SQL_2008_R2_DEV;user id=sa;password=Mypassword;initial catalog=master"; 
```

为什么这不起作用？？？我确实需要能够连接到特定实例，因为用户可能有多个数据库。

我的完整代码：

```
 SqlConnectionStringBuilder builder =
                new SqlConnectionStringBuilder();

builder.ConnectionString = "Server=DLS-534\\SQL_2008_R2_DEV;user id=sa;password=Mypassword;initial catalog=master";

            using (var connection = new SqlConnection(builder.ConnectionString))
            {
                try
                {
                    connection.Open();
                    return true;
                }
                catch (SqlException)
                {
                    return false;
                }
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T06:47:25.220

我的工作代码与实例：

```
const string connStringWork = "Data Source=server\\instance;Initial Catalog=db;Integrated Security=True;Application Name=ЦС";

using (SqlConnection conn = new SqlConnection(connStringWork))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:51:28.860

好的，您编辑了您的问题...

--*忽略*---

您在 2 个位置分配连接字符串：

1.  `new SqlConnectionStringBuilder(GetConnectionString());`
2.  `builder.ConnectionString = "..."`

做什么`GetConnectionString()`？如果您将其替换为连接字符串并省略第二个位置怎么办？

--*结束忽略*--

除此之外，这里有一个 Internet 上的资源来查找您需要的连接字符串：[ConnectionStrings.com](http://www.connectionstrings.com/)

选择您的数据库并找到您的字符串。如果您的字符串与那里的格式相同，则您的参数一定有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:57:02.273

我认为您忘记将值分配给您的 connString。

```
SqlConnectionStringBuilder builder =
                    new SqlConnectionStringBuilder(GetConnectionString());

    builder.ConnectionString = "Server=DLS-534\\SQL_2008_R2_DEV;user id=sa;password=Mypassword;initial catalog=master";

connString = builder;
                using (var connection = new SqlConnection(connString))
                {
                    try
                    {
                        connection.Open();
                        return true;
                    }
                    catch (SqlException)
                    {
                        return false;
                    }
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T12:39:03.797

```
builder.ConnectionString = @"Server=DLS-534\SQL_2008_R2_DEV;user id=sa;password=Mypassword;initial catalog 
```

使用 @ 符号转义 \

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-05T15:00:42.233

我认为这与 SQL Server 在系统上的设置方式有关。我相信可以以不需要实例名称的方式安装它（如果包含则将不起作用）。

因此，根据您安装 SQL Server 的方式，您可能需要提供实例名称，也可能不需要。

如果您不确定或无法控制安装方法，那么我会先尝试使用实例名称（例如：）`Server=localhost\SQLServer2016Express`，如果它作为后备失败尝试不使用实例名称进行连接（仅连接到主机名）例如：`Server=localhost`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-23T12:16:46.223

试试IP和端口：connectionString = "Data Source=XXX.XXX.XXX.XXX,XXXX

# android - 使用android在谷歌地图上绘制路线

> ID：14495392
> 
> 赞同：1
> 
> 时间：2013-01-24T06:43:25.843
> 
> 标签：android, google-maps

我有两个安卓应用程序。**App1**将找到用户位置（纬度和经度值）并将其存储在 MYSQL 数据库中。**App2**将从数据库中检索这些纬度和经度值，并将其绘制在谷歌地图中：

```
String uri = "http://maps.google.com/maps?saddr=" + aa1+","+aa2+"&daddr="+temp+","+temp1;
         Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
         intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
         startActivity(intent); 
```

这里**aa1**和**aa2**是第一个纬度和经度值，而**temp**和**temp1**是 MYSQL DB 中的第二个值。当值更改时，这些 aa1、aa2、temp 和 temp1 值会相应更改。

一切正常。**App2**正在从 DB 中获取价值并将其绘制在地图上。但是当我再次运行**App1**时，存储在 DB 中的旧值并未绘制在地图上。只有新的位置值（纬度和经度）被绘制在地图上。但我希望旧值与新值一起绘制。怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:50:24.463

我不是专业人士，我可能会再次说一些愚蠢的话，人们会否决我的回答，但我认为你需要查看你的数据库。或者你能告诉我们你是如何存储它的，看来你只是在重写值。

# c# - 在很长的 Json 字符串上使用 Context.Response.Write() 的正确方法

> ID：14495393
> 
> 赞同：0
> 
> 时间：2013-01-24T06:43:36.047
> 
> 标签：c#, asp.net, json, ashx

我在 c# 中使用 iis 和 asp.net。

我有一个使用 JavaScriptSerializer 构建的 JSON 字符串，MaxJsonLength 设置为 Int32.MaxValue，现在我想使用 response.write 返回它，就像这个 Response.Write(myJsonString)，但我想知道这是返回的正确方法它？如果字符串很长（也可能包含巨大的 base 64 编码字节），如果它仍然在 int32.maxvalue 长度范围内，是否有任何问题，IIS 本身是否有任何限制（如我可以返回的最大长度）？或者我应该编写一个循环来逐个字符地发送字符串并每隔 x 个字符刷新一次响应？

顺便说一句，我是否应该在前面添加一个 UTF8 BOM 以`response.write`确保我可以在接收器端正确使用 JSON 字符串？如果 JSON 字符串包含 base64 编码字节，会有什么影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:49:56.163

> 现在我想使用response.write返回这个，就像这个Response.Write（myJsonString），但我想知道这是返回它的正确方法吗？

而不是使用 JavaScriptSerializer 类，您可能会考虑使用[`JSON.NET`](http://james.newtonking.com/projects/json-net.aspx)或内置的，[`DataContractJsonSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)它们都允许您直接序列化到输出流：

```
var serializer = new JsonSerializer();
serializer.Serialize(context.Response.Output, objectToSerialize); 
```

这样您就不需要将整个 JSON 字符串加载到内存中。

> 如果字符串很长（也可能包含巨大的 base 64 编码字节），如果它仍然在 int32.maxvalue 长度范围内，是否有任何问题，iis 本身是否有任何限制（如我可以返回的最大长度）

就IIS而言，我认为不会有问题。但正如我之前提到的，如果您将序列化为字符串而不是直接将其流式传输到客户端，则会在服务器上消耗大量内存。

> 还是我应该编写一个循环来逐个字符地发送字符串并每隔 x 个字符刷新一次响应？

这无济于事，因为您的内存中仍然有整个 JSON 字符串。

> 顺便说一句，我也想问一下，我是否应该在 response.write 的前面添加一个 ut8 bom 以确保我可以在接收器端正确使用 json 字符串？

如果您使用我之前提到的 2 个 JSON 序列化程序之一并将生成的 JSON 直接写入响应流，他们将负责添加此字符。

# jquery - jQuery 在 div 列表中的正确位置插入 div

> ID：14495400
> 
> 赞同：0
> 
> 时间：2013-01-24T06:44:37.187
> 
> 标签：jquery, sorting, dom, insert

我有几十个 DIV 的列表，例如

```
<div data-sort="7.5"></div>
<div data-sort="3.2"></div>
<div data-sort="2.15"></div>
<div data-sort="-1.78"></div>
<div data-sort="-2.39"></div> 
```

依此类推，我得到带有 ajax 请求的新 DIV。我需要插入新的 DIV，以便“数据排序”的顺序按降序保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:49:47.110

执行此插入 ( ) 的最快算法`O(logN)`是对新项之间的值进行二进制搜索。假设列表已经先排序（如果没有自动完成，请在此处使用其他答案之一）：

```
/**+
 * Boilerplate to check first/last value
 */
var sortval = $new.data('sort');
var $first = $("div:first");
if (sortval >= $first.data('sort')) {
   $new.insertBefore($first);
    return;
}

var $last = $("div:last");
if (sortval <= $last.data('sort')) {
   $new.insertAfter($last);
    return;
}
/*-*/

//Fun stuff
var count = 0;
var $div = $("div");
do {
   var index = parseInt($div.length / 2)
   var $compare = $div.eq(index);
   var compare = $compare.data('sort');
   if (sortval === compare) {
      break;
   }
   else if (sortval < compare) {
      $div = $div.slice(index, $div.length);
   }
   else {
      $div = $div.slice(0, index);
   }
}
while ($div.length > 1);

if (sortval === compare || sortval > compare) { $new.insertBefore($compare); }
else { $new.insertAfter($compare); } 
```

[http://jsfiddle.net/ExplosionPIlls/SdjAy/1/](http://jsfiddle.net/ExplosionPIlls/SdjAy/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:53:19.800

它不是最理想的，但我只会在每次 ajax 请求完成时对 div 进行排序：

```
$("div").sort(function (prev, next) {
    return parseInt(next.dataset.sort) - parseInt(prev.dataset.sort);
}).appendTo("body"); 
```

如果这花费的时间太长，您只需要循环遍历 div（通过`.each`？）并找到第一个`data-sort`较小的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:40:57.667

也许不优雅，但足够快......

在您的`success`处理程序中：

```
...
success: function(data) {
    $(data).each(function(){
        var $adiv = $(this);
        var sortval = parseFloat($adiv.data("sort"));
        var last = true;
        $("div").each(function(){
            if ($(this).data("sort") < sortval) {
                $(this).prepend($adiv);
                last = false;
                return false;
            }
        });
        if(last) {
            $("div").last().append($adiv);
        }
    });
} 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/adM6M/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:35:01.853

您也可以使用自定义逻辑。请尝试一下。

这是您的 HTML

```
<div id="dvBase">
        <div data-sort="7.5">
        </div>
        <div data-sort="3.2">
        </div>
        <div data-sort="2.15">
        </div>
        <div data-sort="-1.78">
        </div>
        <div data-sort="-2.39">
        </div>
    </div>
    <div id="tempDiv">
    </div> 
```

javascript代码

```
var divToAdd = "<div data-sort=\"1.5\"></div>";
        function getValue() {

            $("#tempDiv").html(divToAdd);
            var returnvalue = $("#tempDiv div").attr("data-sort");
            $("#tempDiv").empty();
            return returnvalue;
        }
        $(document).ready(function () {
            var valueToadd = parseFloat(getValue());
            var count = $("#dvBase >div[data-sort]").length;

            $("#dvBase >div[data-sort]").each(function (index, obj) {
                var value1 = parseFloat($(obj).attr("data-sort"));
                if (index < count - 1) {
                    var value2 = parseFloat($(obj).next().attr("data-sort"));

                    if ((value1 == valueToadd || (valueToadd < value1 && valueToadd >= value2)) && $("#dvBase >div[data-sort]").length === count) {
                        $(obj).after(divToAdd);
                    }
                } else {
                    if ($("#dvBase >div[data-sort]").length === count) {
                        $(obj).after(divToAdd);
                    }
                }
            });
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:31:49.930

我在这里的答案的帮助下解决了这个问题：

```
$("div").each(function(i){
    if(parseFloat($(this).data("weight"))<=weight){
        $(newDiv).insertBefore(this);
        return false;
    }
    else if (i == $(".post").length - 1) {
        $(newDiv).insertAfter(this);
        return false;
    }
}); 
```

这似乎工作正常且足够快......有人看到它有任何缺陷吗？

# javascript - 浏览器中的 SOAP 请求 JavaScript 没有给出响应

> ID：14495403
> 
> 赞同：5
> 
> 时间：2013-01-24T06:44:56.827
> 
> 标签：javascript, web-services, soap, xmlhttprequest, request

我正在尝试使用窗口 7 中的 Chrome 浏览器访问托管在服务器中的 SOAP 服务。我已经在 SOAPUI 中测试了相同的服务和肥皂动作并获得响应，并且在 android 中使用 icesoap 并从服务器获得正确的响应，现在我希望使用用 java 脚本编写的以下代码在浏览器中获得响应来执行同样，这样我就可以进一步实现，它给了我未定义的错误，即 xmlHttp.status == 0

我在窗口桌面（***c:/Users/vipin.sahu.OM/Desktop/New folder/soap.html***）中使用并保存为 HTML 文件并在浏览器中运行以下代码

```
<html>
<head>
    <title>SOAP JavaScript Client Test</title>
    <script type="text/javascript">
        function soap() {   
        var xmlhttp = new XMLHttpRequest();            
        xmlhttp.open("POST", "http://65.17.222.114/t2green/servicecontract/Courses.svc?wsdl", true);
        xmlhttp.setRequestHeader("SOAPAction", "http://tempuri.org/ICourses/GetCountries");
        // build SOAP request
        var sr ='<?xml version="1.0" encoding="utf-8"?>' +
            '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">'+
            '<soapenv:Header/>'+
            '<soapenv:Body>'+
            '<tem:GetCountries>'+
            '</tem:GetCountries>'+
            '</soapenv:Body>'+
            '</soapenv:Envelope>';

        xmlhttp.onerror = function(e) {
        alert("Error ocurred. Error = " + e.message);
        }

        xmlhttp.ontimeout = function(e) {
        alert("Timeout error!");
        }

        xmlhttp.onreadystatechange = function () {  
            if (xmlhttp.readyState  == 4) {
                if (xmlHttp.status == 200 || xmlHttp.status == 0) {

                alert(xmlhttp.status);

                    }
                    else{
                     alert(xmlhttp.status);
                     }
                }   
                else{
                 alert('error in response');
            }

          } 

        xmlhttp.setRequestHeader("Content-Length", sr.length);
        xmlhttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");

        xmlhttp.send(sr);  

        }
</script>
  <script type="text/javascript">   
    function test(){        
    alert('ok alert is still  working');
    }
</script>
 </head>
 <body>
        <form name="Demo" action="" method="post">
    <div>
    <input type="button" value="Click Me" onclick="test()" />    
    <input type="button" value="Soap" onclick="soap()" />   
    </div>
    </form>
   </body>
   <html>

Here are following url and action I used in android and getting requisite response 
```

**网址**“http://65.17.222.114/t2green/servicecontract/courses.svc”

**Soap_action** "http://tempuri.org/ICourses/GetCountries"

**请求**——</p>

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
    <soapenv:Header/>
    <soapenv:Body>
        <tem:GetCountries/>
    </soapenv:Body>
    </soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:18:39.477

这很可能是由于 Chrome 应用了相同的来源策略。这意味着您不能从本地 (file://) URL 向远程 Web 服务发出请求。

启动 Chrome 时使用`--allow-file-access-from-files`命令行标志来删除此限制，如本答案所述：[https ://stackoverflow.com/a/6083677/1972476](https://stackoverflow.com/a/6083677/1972476)

# wordpress - 获取当前页面标题并在 wordpress 文本侧边栏小部件中显示标题

> ID：14495405
> 
> 赞同：1
> 
> 时间：2013-01-24T06:45:05.047
> 
> 标签：wordpress, widget

如何获取当前页面标题并显示在 wordpress 的文本小部件侧边栏上？

任何人都可以提供帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:42:31.030

例如，您可以使用“PHP 代码小部件”：[http ://wordpress.org/extend/plugins/php-code-widget/](http://wordpress.org/extend/plugins/php-code-widget/)

然后在小部件的配置部分粘贴如下内容：

`<?php echo get_the_title($ID); ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T00:54:45.353

使用文本/代码小部件（允许您输入代码，而不是标准文本框）

```
<?php  
    $here = wp_title();
       echo $here ; ?> 
```

# mysql - 在数据库中选择一个日期范围（月/年）

> ID：14495417
> 
> 赞同：3
> 
> 时间：2013-01-24T06:45:50.150
> 
> 标签：mysql

我有一个关于在 MySQL 中选择日期范围的快速问题，格式如下`YYYY-MM-DD`

我阅读了[MySQL 选择日期范围问题](https://stackoverflow.com/questions/4897133/mysql-select-date-range-issue)并了解了它的基本用法，但是如何“包括”例如 2 月 29 日？我想避免使用 PHP 解决方法，MySQL 中有类似的东西吗？

我不太明白[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

有人可以举个例子，如何选择去年 2 月的数据吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T07:57:49.260

在您指定一个月的那一刻，MYSQL 引擎足够聪明，可以获取正确的一个月天数（无论是否是闰年）并相应地评估您的日期字段。

要在您选择的两个日期之间获取数据：（`interval -1 year`用于从今天开始返回一年）

```
SELECT * FROM yourtable 
WHERE yourdate BETWEEN DATE_ADD(Now(), Interval -1 YEAR)
AND Now() 
AND MONTH(yourdate) = 2 -- to get data for Month of February
; 
```

或者你可以简单地用 YEAR 函数编写而不`BETWEEN`

```
SELECT * FROM yourtable 
WHERE YEAR(yourdate) = YEAR(Now()) - 1
AND MONTH(yourdate) = 2 -- to get data for Month of February
; 
```

对于[`Str_to_Date`](http://www.w3cyberlearnings.com/Mysql_STR_TO_DATE)函数的问题，用于将包含日期的字符串转换为具有所需格式的日期类型，它是函数的反`DATE_FORMAT`函数。

```
SELECT STR_TO_DATE('12-Apr-2012', '%d-%M-%Y')
FROM DUAL
; 
```

*   [2012 闰年的 SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c600d0/4)

请注意，在上面的演示中，您必须以添加到`STR_TO_DATE`函数中的格式指定日、月、年的排列方式。

*   [MYSQL 网站上的参考资料](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

*   [您还可以考虑`DATE_FORMAT`将日期类型字段格式化为所需的日期格式。](http://www.w3cyberlearnings.com/Mysql_DATE_FORMAT)

PS：您在这里真正想要实现的目标相当模糊，没有问题中显示的相同数据和预期结果.. :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T06:53:36.320

下面的查询将为您提供去年二月的数据

```
SELECT * FROM `your_table_name` WHERE YEAR(`your_date_field_name`) = YEAR(CURRENT_DATE()) AND MONTH(`your_date_field_name`) = 2 
```

# openmp - 如何使用 OpenMP 并行化代码（对称矩阵）？

> ID：14495418
> 
> 赞同：2
> 
> 时间：2013-01-24T06:45:53.200
> 
> 标签：openmp

我有一个非常简单的代码，如下所示：

```
for(int i=0; i<size; ++i)
  for(int j=i; j<size; ++j)
      Function(a[i][j]) 
```

假设 Function() 非常耗时，所以我想用 OpenMP 并行化代码。如果 j 也从 0 开始，那就容易了。然而，j 从 i 开始，就像一个对称矩阵。问题是如何并行化这种风格的代码？我想一定有人有这种经验，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:51:40.323

一个简单的并行化，将外部循环包装在并行 for 指令中应该可以工作。插入行

```
#pragma omp parallel for 
```

在你的第一个`for`陈述之前。我写的是 Fortran 而不是 C，所以我不能保证语法是正确的，但你应该明白。OpenMP 将`i`根据您设置的计划或默认计划（如果您没有明确设置）分配迭代。

这样做的问题是循环`j`有非常不同的行程计数，第一个（when `i==0`）有`size`迭代，最后一个（when `i==size-1`）有 0。因此，具有静态调度的天真实现将导致程序严重不平衡。使用动态时间表，像这样

```
#pragma omp parallel for schedule(dynamic, CHUNKSIZE) 
```

`CHUNKSIZE`是一个整数，找出合适的值。

我假设您的函数调用没有破坏我概述的方法的副作用和迭代依赖性。

# shell - 检查 shell 脚本中两个并行运行的后台命令的退出状态

> ID：14495419
> 
> 赞同：0
> 
> 时间：2013-01-24T06:45:56.033
> 
> 标签：shell, process, background, exit, status

假设我在 shell 脚本中并行运行两个命令，示例如下

```
/cmd1 &  
pid1=$!

/cmd2 &  
pid2=$!

status1=    # what should go here?

status2=$?  # I know this will have status of previous background process only 
```

只有当两个命令都具有干净的退出状态时，我才想继续如何检查第一个后台进程的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:44:22.230

这位先生怎么样

```
monitor ()
{
  if ! $*
  then
    > error
  fi
}

clean()
{
  rm -f error
}

clean
monitor cmd1 &
monitor cmd2

if [ -a error ]
then
  echo error encountered
  exit
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:32:31.897

一种解决方案是将 GNU Parallel 与 --joblog 一起使用，这里显示了 2 个命令`exit 0`和`exit 1`：

```
(echo exit 0; echo exit 1) | parallel --joblog /tmp/foo
cat /tmp/foo
Seq     Host    Starttime       Runtime Send    Receive Exitval Signal  Command
1       :       1359451838.09   0.002   0       0       0       0       true
2       :       1359451838.093  0.002   0       0       1       0       false 
```

Exitval 列将给出退出值。如果其中一项作业失败，GNU Parallel 也将返回非零值：

```
(echo exit 0; echo exit 1) | parallel && echo Do this if none fail 
```

或同等学历：

```
parallel ::: "exit 0" "exit 1" && echo Do this if none fail 
```

[学到更多](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# qt - 尝试更改类中的字符串时 QT 崩溃

> ID：14495423
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:05.947
> 
> 标签：qt, qt-creator

这是我的脚本：

```
void FileOperations::SetInputFile(QString x){
    InputFilename=x.toStdString();
}
void FileOperations::SetOutputFile(QString x){
    OutputFilename=x.toStdString();
} 
```

第一个 (SetInputFile) 在尝试将 InputFilename 设置为 x 时崩溃。第二个工作正常。

这是我要更改这两个字符串的类：

```
class FileOperations
{
public:
    void SetInputFile(QString x);
    void SetOutputFile(QString x);
private:
    string InputFilename;
    string OutputFilename;
}; 
```

如您所见，“InputFilename”和“OutputFilename”是相同的，它们的功能也几乎相同。我尝试将字符串更改为不同的名称，但它仍然崩溃。

崩溃后，我可以按调试，并在 Microsoft Visual Studio 2010 中查看错误，这是崩溃信息：

> msvcr100d.dll!operator delete(void * pUserData) 第 52 行 + 0x3 字节 C++ ShitLEncoder.exe!std::allocator::deallocate(char * _Ptr, unsigned int __formal) 第 182 行 + 0x9 字节 C++ ShitLEncoder.exe!std:: basic_string,std::allocator >::_Tidy(bool _Built, unsigned int _Newsize) Line 1998 C++ ShitLEncoder.exe!std::basic_string,std::allocator >::assign(std::basic_string,std::allocator > && _Right) 第 722 行 C++ ShitLEncoder.exe!std::basic_string,std::allocator >::operator=(std::basic_string,std::allocator > && _Right) 第 710 行 C++ ShitLEncoder.exe!FileOperations::SetInputFile(QString x) 第 8 行 + 0x26 字节 C++ ShitLEncoder.exe!MainWindow::on_OpenButton_clicked() 第 20 行 C++ ShitLEncoder.exe!MainWindow::qt_static_metacall(QObject * _o, QMetaObject::Call _c, int _id,void * * _a) 第 72 行 + 0x8 字节 C++ ShitLEncoder.exe!MainWindow::qt_metacall(QMetaObject::Call _c, int _id, void * * _a) 第 106 行 + 0x15 字节 C++ Qt5Cored.dll!615820e0()
> [下面的帧可能不正确和/或丢失，没有为 Qt5Cored.dll 加载符号]
> Qt5Cored.dll!615c613f()
> Qt5Cored.dll!615c5ac1()
> Qt5Widgetsd.dll!66a7118b()
> Qt5Widgetsd.dll!66727087()
> Qt5Widgetsd.dll !6672703b()
> Qt5Widgetsd.dll!66728092()
> Qt5Widgetsd.dll!66629ef5()
> Qt5Widgetsd.dll!66624c40()
> Qt5Widgetsd.dll!665e0887()
> Qt5Widgetsd.dll!66625405()
> Qt5Widgetsd.dll!6665de30()
> Qt! 665f15a0()
> Qt5Widgetsd.dll!665e0253()
> msvcr100d.dll!_free_dbg(void * pUserData, int nBlockUse) 第 1267 行 + 0xc 字节 C++ 0246b188()

它在代码中显示的第一件事是：

```
_ASSERTE(_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)); 
```

我将 QT 5 与 QT Creator 一起使用。

[编辑] 这是 QT 主窗口类用来调用这些函数的代码：

```
void MainWindow::on_OpenButton_clicked()
{
    ui->OpenText->setText(QFileDialog::getOpenFileName(this, tr("Open File"),"",tr("Any                               file")));
    FileController->SetInputFile(ui->OpenText->text());
}

void MainWindow::on_SaveButton_clicked()
{
    ui->SaveText->setText(QFileDialog::getSaveFileName(this, tr("Save File"),"",tr("Any     file")));
    FileController->SetOutputFile(ui->SaveText->text());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:35:16.633

好的，我修复了它，我不确定它是如何工作的，我改变了这个：

```
class FileOperations
{
public:
    void SetInputFile(QString x);
    void SetOutputFile(QString x);
private:
    string InputFilename;
    string OutputFilename;
}; 
```

对此：

```
class FileOperations
{
public:
    void SetInputFile(QString x);
    void SetOutputFile(QString x);
private:
    string UnusedVariable;
    string InputFilename;
    string OutputFilename;
}; 
```

我添加了一个额外的未使用变量，它停止了崩溃：D

# jdbc - 迁移旧的 JDBC 程序以使用 XA

> ID：14495424
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:07.757
> 
> 标签：jdbc, jboss, xa

如果我想迁移一个使用旧 JDBC 接口来支持 XA 的程序，我需要做什么？我的意思是我需要在代码中执行的详细步骤。该程序在单个数据库上运行，但新功能需要引入新模式，一些旧功能需要支持跨 2 个模式的事务。我们正在使用 JBOSS。迁移它的最少步骤是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:13:35.630

您没有指明您使用的是哪个版本的 JBoss。我假设 JBoss 5。

最小的步骤集：

1.  为您的数据库获取符合 XA 的 JDBC 驱动程序。
2.  创建一个 XA 数据源（例如 `*-ds.xml）文件以包含 XA 数据源属性。有关配置元素，请参阅此[链接](https://community.jboss.org/wiki/ConfigDataSources)。其中有几个，其中一些可能适用于您的情况，也可能不适用于您的情况。
3.  如果需要，更新 XA 恢复模块的 /conf/jbossts-properties.xml。
4.  您可能还需要授予对数据库系统表的特殊权限。

# javascript - javascript和测试数字

> ID：14495426
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:23.800
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中是否有（内置）方法来检查字符串是否为有效数字？](https://stackoverflow.com/questions/175739/is-there-a-built-in-way-in-javascript-to-check-if-a-string-is-a-valid-number)

我在 riak map reduce 工作中使用 JS。我有一个要映射的数字，并且需要是一个数字。

如果我有一个变量：

```
 var wp=sfggz5341&& or var=100 
```

if如何测试数字？

例如

```
if wp==Number:    
    OK 
else:    
    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:48:32.963

您可以使用以下方法进行测试：`if (!isNaN(+wp))`. 换句话说，将“可能是数字”转换为数字（使用`+`运算符。如果不能转换，则结果为`NaN`. 所以`!isNaN(...)`表示它是一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:48:42.433

你可以使用`typeof`操作符（详见[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)）：

```
var wp = "sfggz53141";
if (typeof wp === "number") {
    // number here
} else if (typeof wp === "string") {
    // string here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:48:59.357

您可以使用`isNaN()`或[`isNumeric()`](http://api.jquery.com/jQuery.isNumeric/)。

`isNumeric()`可以使用，但在以下情况下会失败：

```
// Whitespace strings:
IsNumeric(' ') == true;
IsNumeric('\t\t') == true;
IsNumeric('\n\r') == true;

// Number literals:
IsNumeric(-1) == false;
IsNumeric(0) == false;
IsNumeric(1.1) == false;
IsNumeric(8e5) == false; 
```

所以最好的方法是：

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

**参考：** [https ://stackoverflow.com/a/1830844/462627](https://stackoverflow.com/a/1830844/462627)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:49:30.153

您可以使用`!NaN(wp)`来检查字符串是否为数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:49:49.923

尝试使用
`isNaN()`

如果值为 NaN，则此函数返回 true，否则返回 false。

# java - 尝试将 JBPM 与 MAVEN java.lang.NoSuchFieldError 集成时：DESCR

> ID：14495427
> 
> 赞同：1
> 
> 时间：2013-01-24T06:46:24.423
> 
> 标签：java, maven, drools, jbpm, mvel

我正在尝试将 jbpm 与 maven 集成。当我运行我的代码时，我收到以下错误：

```
java.lang.NoSuchFieldError: DESCR
at org.drools.compiler.PackageBuilder.addKnowledgeResource(PackageBuilder.java:695)
at org.drools.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:51)
at org.drools.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:40)
at test.java.com.plugtree.jbpm5.hello.HelloWorldTest.readKnowledgeBase(HelloWorldTest.java:64)
at test.java.com.plugtree.jbpm5.hello.HelloWorldTest.testEDPBM(HelloWorldTest.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我无法解决这个问题，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:58:06.313

根据该堆栈跟踪，您有一个失败的单元测试：HelloWorldTest.java

我不得不猜测您正在加载的知识库资源中的某个地方存在错误。它看起来一点也不像 Maven 问题。

最有可能的是，您遇到的问题是 Maven 在构建期间运行您的单元测试，而团队中没有人长时间运行或维护测试。:)

# iis-8 - 在 Windows Server 2012 上注册 ASP.NET 4.5 的替代方法

> ID：14495429
> 
> 赞同：9
> 
> 时间：2013-01-24T06:46:32.947
> 
> 标签：iis-8, windows-server-2012, aspnet-regiis.exe

运行 WCF 服务时出现 MIME 未注册错误。我使用此[链接](http://3water.wordpress.com/2012/09/05/host-wcf-in-iis8-windows-server-2012/)来解决此问题。之后，我开始收到另一个错误，要求我向 IIS 注册 ASP.NET 框架。所以我使用了**“aspnet_regiis”**命令，但它显示了以下错误。

```
Microsoft (R) ASP.NET RegIIS version 4.0.30319.17929
Administration utility to install and uninstall ASP.NET on the local machine.
Copyright (C) Microsoft Corporation.  All rights reserved.
Start installing ASP.NET (4.0.30319.17929).
This option is not supported on this version of the operating system.  Administr
ators should instead install/uninstall ASP.NET 4.5 with IIS8 using the "Turn Win
dows Features On/Off" dialog,  the Server Manager management tool, or the dism.e
xe command line tool.  For more details please see http://go.microsoft.com/fwlin
k/?LinkID=216771.
Finished installing ASP.NET (4.0.30319.17929). 
```

我尝试从服务器安装/卸载 ASP.Net 4.5。但是在这样做之后，我的服务器没有再次启动，它总是显示黑屏。所以我必须再次安装 WS 2012。有人可以解释一下如何在 WS 2012 上再次使用 IIS 注册 ASP.NET 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:22:34.000

我们必须卸载属于服务器角色而非功能的 4.5。我还附上屏幕以供参考。

为此，请打开服务器管理器 -> 仪表板 -> 2) 角色和功能，然后按照屏幕截图中提到的以下步骤进行操作。

**注意：我将向您展示如何添加角色和功能向导（安装新功能/角色），但如果您想卸载/删除（卸载新功能/角色），则必须单击“启动删除角色和功能向导” . 请确保，首先我们必须安装 IIS，然后是 .NET 框架。**

![在此处输入图像描述](../Images/6fcfee79c498b69d87e9f23b98ed57a8.png) ![在此处输入图像描述](../Images/11eed011f3a66b8f031228c71e53f598.png)

选择服务器

![在此处输入图像描述](../Images/a2fdf149458ed8ad4f036a11675303b9.png)

您必须检查 ASP.NET 3.5 和 ASP.NET 4.5（根据要求）选项才能将 .NET 框架注册到 IIS。

![在此处输入图像描述](../Images/1edd68bd45f5811a872c87c5e4487c96.png)

要安装任何功能/角色，我们必须检查我们要安装的选项。要卸载任何功能/角色，您必须取消选中它。

请在下面找到参考链接。

[http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45)

[http://www.iis.net/learn/get-started/whats-new-in-iis-8/installing-iis-8-on-windows-server-2012](http://www.iis.net/learn/get-started/whats-new-in-iis-8/installing-iis-8-on-windows-server-2012)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T23:19:37.243

我之前在安装了 GUI 的服务器核心安装上尝试过一次。与原始海报看到的类似，我被扔进了黑屏。不确定他是否看到了同样的东西，但您可以通过重新安装 GUI 而不是开始全新安装来恢复。在 2012 年，作为最后的手段卸载 .NET 4.5，如果您完全删除所有 .net，请不要惊讶地看到重启时的命令提示符。有关 GUI 重新安装的帮助，请参阅： [https ://www.linkedin.com/pulse/20140618170857-12975178-procedure-to-recover-gui-in-windows-2012-and-2012r2-net-framework-feature-dependency-在Windows-2012-2012-r2](https://www.linkedin.com/pulse/20140618170857-12975178-procedure-to-recover-gui-in-windows-2012-and-2012r2-net-framework-feature-dependency-in-windows-2012-2012-r2)

# c# - 每个日期只允许使用 LOCK 一条记录

> ID：14495430
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:33.363
> 
> 标签：c#, asp.net, .net, multithreading, locking

这是我当前的代码

```
[HttpPost]
    public void AddMenuItem(DateTime MenuDate, string MenuItemIds_String)
    {
        if (string.IsNullOrEmpty(MenuItemIds_String)) { return; }
        var MenuItemIds = MenuItemIds_String.Split(',').Select(x=>int.Parse(x));

        int JamaatId = 1;

        object thisLcok = new object();
        lock (thisLcok)
        {
            bool ParentPresent = db.DailyMenus.SingleOrDefault(x => x.JamaatId == JamaatId && x.MenuDate == MenuDate) != null;
            if (!ParentPresent)
            {
                db.DailyMenus.Add(new DailyMenu { JamaatId = JamaatId, MenuDate = MenuDate, MenuNoteText = string.Empty });
                db.SaveChanges();
            }
        }
        DailyMenu parentMenu = db.DailyMenus.Single(x => x.JamaatId == JamaatId && x.MenuDate == MenuDate);

        foreach(int id in MenuItemIds){
            bool AlreadyExits = parentMenu.DailyMenuItems.SingleOrDefault(x => x.MenuItem == db.MenuItems.Find(id)) != null;
            if (!AlreadyExits)
            {
                db.DailyMenuItems.Add(new DailyMenuItem { MenuItem = db.MenuItems.Find(id), DailyMenu = parentMenu });
                db.SaveChanges();
            }
        }
    } 
```

如果不存在，我只想创建父记录。因为这是一个http post方法。许多人可以同时发布到它，并且可以在同一日期创建多个项目。

放锁并没有解决它。仍在为同一日期创建多个项目。我把锁放对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:52:05.507

> 我把锁放对了吗？

不，让我们看看你的代码：

```
object thisLcok = new object();
lock (thisLcok)
{
    ...
} 
```

每次都会创建一个*新*锁 - 所以另一个请求不可能已经拥有锁。

您的锁需要在所有请求之间共享。这意味着它需要是一个字段......要么是静态字段（ick），要么是某个对象中的实例字段，这些字段已经在您的所有请求之间共享。但是，这*仍然*只能在单个 AppDomain 中、在单个盒子上工作——它不能很好地扩展，或者在 AppDomain 回收的情况下工作。

在我看来，您可能应该使用数据库约束来处理这个问题 - 所以检查记录是否已经存在，如果不存在，请*尝试*插入它 - 理解如果另一个请求在两者之间出现，您将失败。

# c# - 缩放图保持 xaxis 间隔的像素长度常数改变它们的值

> ID：14495431
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:34.207
> 
> 标签：c#, charts, zooming

我希望当我放大或缩小图表时，x 轴间隔的位置不应该改变，但是它们的值应该根据缩放级别而改变。我使用了以下代码：

公共无效缩放器（双缩放）

```
 {
            if (zoom < 0)
            {
                zoomFactor += 10;
                chart1.ChartAreas[0].AxisX.ScaleView.Zoom(0, size * zoomFactor);
                //chart1.ChartAreas[0].AxisX.Interval = /*(stableTime / 10) + */(zoomFactor * stableTime / 10);
            }
            else if (zoom  > 0)
            {
                zoomFactor -= 10;
                chart1.ChartAreas[0].AxisX.ScaleView.Zoom(0, size * zoomFactor);
                //chart1.ChartAreas[0].AxisX.Interval = /*(stableTime / 10) - */(zoomFactor * stableTime / 10);
            }
    } 
```

我是一个菜鸟，一周前就开始了 c# 编程；此代码已提供给我以进行改进。所以请给出详细的解决方案。（我什至不知道 ScaleView.Zoom() 是如何工作的；任何见解都会有很大帮助）

谢谢。

# actionscript-3 - 如何将包含所有参数的数组传递给 ActionScript 3 中请求多个参数的函数？

> ID：14495434
> 
> 赞同：1
> 
> 时间：2013-01-24T06:46:40.353
> 
> 标签：actionscript-3, flex4

`args[]`这个想法是传递一个数组`[<int>, <String>, <int>]`

到接受多个参数的函数，例如：

`myFunc (int arg1, String arg2, int arg2 ):void`

这样函数调用：

`myFunc(args[]);`可以在不改变原函数调用的情况下实现。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T06:56:19.227

您可以使用`Function.apply()`.

在你的情况下

```
myFunc.apply(null,args); 
```

您的 args[] 应该包含与您的数据类型匹配的 myFunc args 列表的相同顺序。

这样你就不能改变你原来的功能。

性能方面`apply()`不太好。其他情况可以使用`call()`。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Function.html#apply](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Function.html#apply) ()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:03:57.543

严格来说，不支持多态，所以如果你的函数有这个签名：

```
myFunc (arg1:int, arg2:String, arg3:int):void 
```

任何调用`myFunc(array);`都会引发编译错误。有两种方法可以实现我认为你想要的：或者你定义你的第一个 arg`:*`或者你使用特殊的 AS3`...rest`

1.  第一个解决方案，函数定义如下：

    ```
    myFunc (arg1:*, arg2:String = null, arg3:int = null):void{
      if(arg1 is Array){
        var array:Array = arg1 as Array;
        arg1 = array[0] as int;
        arg2 = array[1] as String;
        arg3 = array[2] as int;
      }
      //here you would have to verify your args for coherence
      ...//your code here
    } 
    ```

2.  第二种解决方案（我更喜欢它，但这主要是一种“味道”）：

    ```
    myFunc (...rest):void{
      var array:Array = rest[0] as Array,
          arg1:int = rest[0] as int,
          arg2:String = rest[1] as String,
          arg3:int = rest[2] as int,
      if(array is Array){
        arg1 = array[0] as int;
        arg2 = array[1] as String;
        arg3 = array[2] as int;
      }
      //here you would have to verify your args for coherence
      ...//your code here
    } 
    ```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T08:23:10.950

myFunc (args[0], args[1], args[2]);

# iphone - 如何减少textView中两行之间的距离以使iphone中的字符更接近

> ID：14495439
> 
> 赞同：0
> 
> 时间：2013-01-24T06:46:57.483
> 
> 标签：iphone, ios, uitextview

我正在用日语从上到下和从右到左写文本，因为我正在使用 uitextview 两个字符之间存在间隙，我想让它彼此更接近请给出任何代码或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:26:39.627

从 iOS6 开始，您可以使用属性字符串。属性字符串可以有段落样式，段落样式可以有行距：

[NSAttributedString 参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)- 段落样式属性名称是`NSParagraphStyleAttributeName`.

[NSMutableParagraphStyle setLineSpacing 参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMutableParagraphStyle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableParagraphStyle/setLineSpacing%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:48:22.083

中没有属性`UITextView`可以显式设置字母间距或垂直间距 - 使用本机控件无法做到这一点。

如果你想这样做，你将不得不创建自己的自定义控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:01:26.527

为此，创建您的自定义`UITextView`或根据您的要求创建自定义字体...

有关更多信息，请参阅[在 UITextView 中设置行高](https://stackoverflow.com/questions/3760924/set-line-height-in-uitextview)

# android - 如何为本地xml文件制作InputStream

> ID：14495446
> 
> 赞同：0
> 
> 时间：2013-01-24T06:47:38.823
> 
> 标签：android, inputstream, xmlpullparser

我是初学者 android 应用程序开发人员。

我将解析保存在本地存储中的 xml 文件。

但我不知道如何制作 InputStream。

请告诉我一些建议。预谢谢！！

```
... APP_LOCAL_DIR = "/data/com.qqq.qqq/appname/"; 
String xml_file_path = APP_LOCAL_DIR.getAbsoluteFile() +"/" + YYYYMM + ".xml";

try {
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setValidating(false);
        XmlPullParser myxml = factory.newPullParser(); 

        InputStream raw = ________________________???? 
        myxml.setInput(raw, null);

 ....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:50:17.913

您的数据来自文件，因此您想使用`FileInputStream`which extends `InputStream`：

```
InputStream raw = new FileInputStream(new File(xml_file_path)); 
```

# javascript - 如何将控件链接到画布精灵？

> ID：14495447
> 
> 赞同：0
> 
> 时间：2013-01-24T06:47:40.400
> 
> 标签：javascript, html, animation, canvas, html5-canvas

非常感谢任何输入！

长话短说，我需要弄清楚如何使用 HTML5/CSS3 按钮来控制画布上的精灵动画。这些按钮分别控制精灵的方向和速度。

我有两个数组，它们代表两种类型的精灵控件，每个控件都有不同程度的索引（1 个 w/三个索引和 1 个 w/8 个索引）。我应该用什么方法将按钮链接到我的精灵各自的“转换”？我的精灵在 8 索引数组中平铺和索引，因此传统上转换图像是不必要的。我需要单击每个按钮将特定数组更改为特定索引，然后将其插入到 drawImage() 和 clearRect () 公式中以创建动画。每次单击应该只更改一个数组和索引号，其他一切都保持不变。. . 我是否正确地将速度和方向值放入数组中？有任何想法吗？

**HTML**

Div controlPanel 在画布上方以 z 为索引，并包含所有控制按钮。

```
<div id="controlPanel">
    <div id="rightButtons">
        <div id="fast">
            <button type="button" class="speed" name="fast" value="2"></button>
        </div>       
        <div id="medium">
            <button type="button" class="speed" name="medium" value="1"></button>
        </div> 
        <div id="slow">
            <button type="button" class="speed" name="slow" value="0"></button>
        </div>
    </div>

    <div id="bottomButtons">
        <div id="H0">
            <button type="button" class="heading" name="H0" value="0"></button>
        </div>
        <div id="H1">
            <button type="button" class="heading" name="H1" value="1"></button>
        </div>
        <div id="H2">
            <button type="button" class="heading" name="H2" value="2"></button>
        </div>
        <div id="H3">
            <button type="button" class="heading" name="H3" value="3"></button>
        </div>
        <div id="H4">
            <button type="button" class="heading" name="H4" value="4"></button>
        </div>
        <div id="H5">
            <button type="button" class="heading" name="H5" value="5"></button>
        </div>
        <div id="H6">
            <button type="button" class="heading" name="H6" value="6"></button>
        </div>
        <div id="H7">
            <button type="button" class="heading" name="H7" value="7"></button>
        </div>
    </div> 
```

**分机。JAVASCRIPT**

```
var heading = [180,210,0,30,60,90,120,150] //x-coordinates of the sprite tile
var speed = [5,10,20];

document.getElementById("plane").onload=function(){
var canvasTwo = document.getElementById("canvasTwo");
var cxt = canvasTwo.getContext("2d");
var plane = document.getElementById("plane");
animatePlane();
}

    function animatePlane(){

    setInterval(drawPlane,200);
    }

    var plane = document.getElementById("plane");   
    var dy = speed;
    var dx = s;
    var x = 400;
    var y = 475;

    function drawPlane(){

        y = y+dy; 
        x = x + dx;
        cxt.save();
        cxt.clearRect(x-dx,y-dy,30,30);
        cxt.drawImage(plane,heading,0,30,30,x,y,30,30);
        cxt.restore();
    }

        //This is where dx and dy get alittle funky. The value of dx and dy depend on the heading. Quite frankly I don't know where to place this block of code.

        //to determine the value of dx
        if (heading[]= 0){
            dx= speed[];
            dy= 0;
        }
        if (heading[]= 30){
            dx= speed[];
            dy= speed[]*-1;
        }
        if (heading[]= 60){
            dx= 0;
            dy= speed[]*-1;
        }
        if (heading[]= 90){
            dx= speed[]*-1;
            dy= speed[]*-1;
        }
        if (heading[]= 150){
            dx= speed[]*-1;
            dy= speed[];
        }
        if (heading[]= 180){
            dx= 0;
            dy= speed[];
        } 
        if (heading[]= 210){
            dx= speed[];
            dy= speed[];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:54:31.697

我希望我可以对帖子发表评论，但这里有几件事。

您对按钮的使用非常好，但这`type="button"`是多余的，因此如果您认为合适，可以将其取出。

还有这个：

```
var speed = [5,10,20];
...
var dy = speed;
var dx = s;
var x = 400;
var y = 475;
...
y = y+dy;
...
if (heading[]= 0){
   dx= speed[];
... 
```

让我困惑。`dy = speed`mean`dy`是一个数组，但您试图将它与一个整数相加，这会产生一个字符串；

`dx = s`但是您还没有`s`在代码中发布 's 的初始化（尽管它可能在其他地方）。

当引用数组中的索引时（在 javascript 中），您必须在括号内包含一个正整数或 0。`heading[]`引发错误。我想这可能暂时是空的，但你稍后会填充它。

在 javascript 中进行相等比较时，您使用`==`. `=`是一个任务。因此，`if(myVar=0)`将 0 分配给 myVar，而不是将其与 0 进行比较。

在阵列中拥有所有速度和航向是一个很好的方法。为了利用它们，您必须建立一些变量来包含正在使用的索引。如

```
var i_heading = 0; // the heading array's index
var i_speed = 0; // the speed array's index 
```

然后，您可以将`onclick=`事件用于按钮，以及其他功能。

```
<div id="fast">
   <button class="speed" name="fast" value="2" onclick="setSpeedIndex(this.value)"></button>
</div>

<script>
   function setSpeedIndex(newSpeedIndex){
       i_speed = newSpeedIndex;
   }
   ...
   if (heading[i_heading]= 0){
       dx= speed[i_speed];
       dy= 0;
   }
</script> 
```

您也可以将其扩展到标题。

最后。可以通过多种方式在屏幕上放置多个精灵，但您需要一个包含所有平面的数组。本质上，您将需要使飞机“上课”。这可以是一个`function Plane()`或只是一个数据结构。您可以通过循环遍历数组并从循环内绘制来获取每个平面的信息。或者，如果您将该函数用作平面类，则可以让平面自行绘制。

**函数类**

```
var planes = []; // array of planes
...
function Plane(x, y, s, h){ // plane function, a.k.a. class
    this.x = x;
    ...
    this.drawMyself = function(){ // function to draw itself
        this.y = this.y+this.dy;
        ... // the rest of the drawing function
    }
}
...
planes.add(new Plane(0,0,0,0)); // adding a plane
...
for ( var i in planes){ // drawing all the planes
    var p = planes[i];
    p.drawMyself(); 
} 
```

**数据结构**

```
var planes = []; // array of planes
...
planes.add({ // adding the data structure
    x: 0,
    ...
});
...
for ( var i in planes){ // drawing all the planes
    var p = planes[i];
    p.y = p.y+p.dy;
    ... // the rest of the drawing function
} 
```

如果您需要更多关于 javascript 的帮助，[这](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)是一个很好的来源。

# python - 如何使用 jira-python 设置 fixVersions 字段

> ID：14495448
> 
> 赞同：2
> 
> 时间：2013-01-24T06:47:42.030
> 
> 标签：python, jira, python-jira

我正在尝试使用 jira-python 模块 (http://jira-python.readthedocs.org/en/latest/) 更新现有的 JIRA。具体来说，我正在尝试设置问题的 fixVersion 列表。我已经尝试了一段时间没有运气。我错过了什么？

```
issue = jira.issue('DUC-391')
issue_dict = { 'fixVersions' : [{'id': '10115'}] }
issue.update(fields=issue_dict) 
```

返回的堆栈跟踪：

```
Traceback (most recent call last):
  File "post-commit-jira.py", line 35, in <module>
    issue.update(fields=issue_dict)
  File "/Library/Python/2.6/site-packages/jira/resources.py", line 193, in update
    super(Issue, self).update(**data)
  File "/Library/Python/2.6/site-packages/jira/resources.py", line 72, in update
    raise_on_error(r)
  File "/Library/Python/2.6/site-packages/jira/exceptions.py", line 29, in raise_on_error
    error = errorMessages[0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:11:23.330

看一下[https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues)中的组件添加、设置和删除示例 可以使用名称代替 id这很有帮助，例如

```
issue_dict = { 'fixVersions' : [{'add': {'name': 'Name of the version 10115'}}] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:02:55.593

玩了更多，意识到错误。

由于未设置某些必填字段而失败。原始问题中的代码是可以的，但是来自 jira-python 库的错误报告还有很多不足之处......

# javascript - 使用 JQuery 进行排序/排序测验

> ID：14495449
> 
> 赞同：0
> 
> 时间：2013-01-24T06:47:47.757
> 
> 标签：javascript, jquery, html

您好，只是在寻找一些关于在 HTML5/JQuery 中进行排序/排序测验的有用建议。只是想在页面上呈现一组以随机顺序排列的步骤，用户必须对它们进行排序以做出正确的顺序。我设法找到了一个使用 jquery 库和 jquery-ui-1.8.5.custom.min.js 文件并在页面上调用以下 javascript 的示例“某处”：

```
 <script type="text/javascript" src="../scripts/jquery-1.4.3.min.js"></script> 
    <script type="text/javascript" src="../scripts/jquery-ui-1.8.5.custom.min.js"> </script>
  <script type="text/javascript">
    var correctOrder = new Array();
    var liItems = new Array();
    $(function() {
      $("#sortable").sortable({placeholder: 'ui-state-highlight'});
      $("#sortable").disableSelection();
      var ul = document.getElementById('sortable');
      var li = ul.getElementsByTagName("li");
      for(var i = 0; i < li.length; i++){
        correctOrder.push(li[i].innerHTML);
        liItems.push(li[i]);
      }
    });
    (function($){
      $.fn.shuffle = function() {
        return this.each(function(){
          var items = $(this).children();
          return (items.length)
            ? $(this).html($.shuffle(items))
            : this;
        });
      }
      $.shuffle = function(arr) {
        for(
          var j, x, i = arr.length; i;
          j = parseInt(Math.random() * i),
          x = arr[--i], arr[i] = arr[j], arr[j] = x
        );
        return arr;
      }
    })(jQuery);
    function resetForm(){
      $('#sortable').shuffle();
      for(var i = 0;i < liItems.length; i++){
        liItems[i].className = "";
      }
    }
    function checkForm(){
      var ul = document.getElementById('sortable');
      var li = ul.getElementsByTagName("li");
      for(var i = 0;i < li.length; i++){
        if(li[i].innerHTML != correctOrder[i]){
          li[i].className = "incorrect";
        }else{
          li[i].className = "correct";
        }
      }
    }
  </script> 
```

这段代码似乎工作正常，但没有成功随机化列表项的顺序（body html 只是 div，其中包含无序类，id 为“可排序”。我试图将重置函数放入初始化代码中，但这只是随机化顺序和答案，这绝对是我不想要的。只需当用户转到页面并单击“提交”时 - 所有答案都是正确的，因为它没有随机化列表项。

希望这是有道理的，我在 JS 方面有点菜鸟，我真的想摆脱 Flash 和 ActionScript，因为它有其局限性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:31:58.710

也许在你的 for 循环中改变 statement2 会解决这个问题。

```
for(statement1;statement2;statement3){
   //loop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:05:42.447

试试这个洗牌：

演示： http: [//jsbin.com/ibebav/1/edit](http://jsbin.com/ibebav/1/edit) (ctrl + enter 刷新)

```
(function($) {

  function _range(min, max, rand) {
    var arr = (new Array(++max - min))
      .join('.').split('.')
      .map(function(v, i){ return min + i; });
    return rand ?
      arr.map(function(v) { return [Math.random(), v]; })
         .sort().map(function(v) { return v[1]; }) :
      arr;
  }

  $.fn.shuffle = function() {
    return this.each(function() {
      var $this = $(this)
        , children = $this.children()
        , rand = _range(0, children.length-1, true).map(function(el) {
            return children[el];
          });
      if (children.length) $(rand).appendTo($this);
    });
  };

}(jQuery)); 
```

这应该让你接近你的目标。另外我建议如果你使用 jQuery 然后充分使用它，不要将常规 DOM 和 jQuery 混合使用，否则会让人感到困惑。

# ember.js - 我们可以为 Ember.CollectionView 中指定的子项视图设置一个控制器吗？

> ID：14495455
> 
> 赞同：1
> 
> 时间：2013-01-24T06:48:29.730
> 
> 标签：ember.js

我正在尝试为 a 中指定的子项视图设置一个控制器`CollectionView`，但该控制器没有自动启动，并且 JsFiddle 在[这里可用](http://jsfiddle.net/VenkataSuresh/tcMqb/)，那么对于创建子视图控制器有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:22:37.260

我没有使用过，`CollectionView`但在我看来，您正在寻找的`itemController`是`ArrayController`

基本上，如果您定义如下内容：

```
App.Product = Ember.Object.extend();
App.ProductController = Ember.ObjectContoller.extend();
App.ProductsController = Ember.ArrayController.extend({
  ...
  itemController: 'Product',
  ...
}); 
```

...每个项目`ProductsController`都会`ProductController`自动获得一个。

这里是 GitHub 上的讨论[https://github.com/emberjs/ember.js/issues/1637](https://github.com/emberjs/ember.js/issues/1637)

# windows-store-apps - 为 Windows 8 应用程序异步下载大于 1 GB 的大图像

> ID：14495457
> 
> 赞同：0
> 
> 时间：2013-01-24T06:48:41.297
> 
> 标签：windows-store-apps

我有一个要求，您需要使用 Web 服务或 WCF Rest 将多个图像异步下载到 Windows 8 应用程序。通过保持 UI 响应速度快来做到这一点的最佳方法是什么。例如，如果用户选择一个项目，它可以包含 4 个非常大的图像。如何下载和显示大图像，有什么好的解决方案吗？唯一的解决方案似乎是带线程的后台传输。任何其他好的设计技术

# r - 使用带有直方图数据的 R 绘制 ECDF

> ID：14495460
> 
> 赞同：2
> 
> 时间：2013-01-24T06:48:58.347
> 
> 标签：r

我有形式的直方图数据

```
Key  |  #occurences_of_key
--------------------------
 -10 | 1200
   0 | 1000
  10 | 700
  33 | 500
  67 | 200
  89 | 134
-------------------------- 
```

实现它的代码：

```
structure(c(-10, 0, 10, 33, 67, 89, 1200, 1000, 700, 500, 200, 134), .Dim = c(6L, 2L)) 
```

我想用这些数据绘制一个`Empirical Cumulative Distribution Chart (percentile chart)`使用。`R`我是新手`R`，所以我很感激任何指示。我阅读了有关`ecdf`可用功能的信息，`R`但我很难理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:00:57.437

我能想到的一种方法是`rep`用来重建原始数据并`ecdf`在其上使用。

```
mat <- structure(c(-10, 0, 10, 33, 67, 89, 1200, 1000, 700, 500, 200, 134), .Dim = c(6L, 2L))

original <- unlist(apply(mat, 1, function(x) rep(x[1], x[2])))

original_ecdf <- ecdf(original)

plot(original_ecdf) 
```

![在此处输入图像描述](../Images/b81a59930610159bb959570b25092876.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T10:00:12.120

如果您的数据很大（这就是为什么您在加载到 R 之前预先将其制成表格的原因），您不想再次生成一些“虚拟”数据。您可以破解执行`ecdf`以接受表格数据：

```
tab_ecdf <- function (xs, counts) 
{
  n <- sum(counts)
  if (n < 1) 
    stop("'x' must have 1 or more non-missing values")
  rval <- approxfun(xs, cumsum(counts) / n, 
                    method = "constant", yleft = 0, yright = 1, f = 0, ties = "ordered")
  class(rval) <- c("ecdf", "stepfun", class(rval))
  assign("nobs", n, envir = environment(rval))
  attr(rval, "call") <- sys.call()
  rval
} 
```

然后用它代替原来的`ecdf()`功能。

# java - Jitsi SIP Communicator 安装程序

> ID：14495465
> 
> 赞同：5
> 
> 时间：2013-01-24T06:49:12.930
> 
> 标签：java, sip, jitsi

完成更改后，我必须为 Jitsi SIP Communicator 创建安装程序。我在网上搜索并找到了一些步骤如下：

1.  软件要求

    *   Cygwin：包括库“make、gcc & g++” [http://cygwin.com/setup.exe](http://cygwin.com/setup.exe)
    *   MinGW：（只有 gcc，没有 g++）（使用安装文件 .zip，考虑到 build.xml 正在寻找一个子文件夹 x86 y x64 到 MinGW 根文件夹） [http://sourceforge.net/projects/mingw/ files/latest/download](http://sourceforge.net/projects/mingw/files/latest/download) 安装在 C:\MinGW\x86
    *   将 mingw-make.exe 复制到 make.exe（文件夹 C:\MinGW\x86{-}\bin）
    *   bzip2：（在本例中为 v1.0.5）：安装在 C:\MinGW\bzip2 [http://gnuwin32.sourceforge.net/downlinks/bzip2.php](http://gnuwin32.sourceforge.net/downlinks/bzip2.php)
    *   xz：（在本例中为 v5.0.3）：在 C:\MinGW\xz [http://tukaani.org/xz/xz5.0.3windows.zip中解压缩](http://tukaani.org/xz/xz5.0.3windows.zip)
    *   为win32制作：（在这种情况下为v3.8.1） [http://gnuwin32.sourceforge.net/downlinks/make.php](http://gnuwin32.sourceforge.net/downlinks/make.php)
    *   wix35-binaries：（在本例中为 v3.5）：在 C:\Program Files\WiX 中解压缩
    *   使用二进制文件 (wix35-binaries.zip)，而不是 WiX .msi 安装程序。 [http://wix.codeplex.com/releases/view/60102#DownloadId=204418](http://wix.codeplex.com/releases/view/60102#DownloadId=204418)
    *   ant：（在本例中为 v1.8.3）：在 C:\apache-ant-1.8.3 [http://ant.apache.org/bindownload.cgi中解压缩](http://ant.apache.org/bindownload.cgi)
    *   jdk1.6：（在本例中为 v1.6.0_31）
2.  环境变量：

    *   导出变量包含：
    *   ANT_HOME=C:\apache-ant-1.8.3
    *   JAVA_HOME=C:\Program Files (x86)\Java\jdk1.6.0_31
    *   添加到路径：%ANT_HOME%\bin C:\MinGW\bin C:\cygwin\bin C:\MinGW\msys\1.0 C:\Program Files\WiX C:\Program Files (x86)\Gnuwin32\Make\bin
3.  附加任务：

    *   编辑“installers.properties”，为要添加到安装程序和/或 JRE（.zip 或文件夹）文件的 JRE 文件添加路径。
    *   编译项目。
4.  执行构建脚本：

    *   启动 Cygwin 终端
    *   转到 /cygdrive/.../{dir_root Jitsi} -执行：ant build-installation-wix（为 windows x86 创建安装程序）ant build-installation-wix-64（为 windows x64 创建安装程序）ant build -installation-linux（为 linux 创建安装程序） ant dmg（为 MacOSX 创建安装程序，仅在 MacOSX 上运行

但是当我在 cygwin 上执行上面给出的命令时，我发现了以下错误：

> build-installation-wix-base: [propertyfile] 创建新属性文件：D:\javaprojects\jitsi\release\windows\versionupdate.properties [mkdir] 创建目录：D:\javaprojects\jitsi\release\windows\tmp\light [exec] Makefile:40: ***目标模式不包含 `%'。停止。
> 
> 构建失败 D:\javaprojects\jitsi\resources\install\build.xml:302：执行此行时发生以下错误：D:\javaprojects\jitsi\resources\install\build.xml:403: exec 返回：2

请提出解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-26T10:44:36.107

我遇到了与您提到的相同的问题。我终于尝试了自己，并在 Windows 中构建了 Jitsi，包括 32 位和 64 位版本。

## 我没有使用 Cygwin，只是使用了 Mingw+Msys。

这是我所做的：

1.  在 C:/mingw/x86 文件夹中安装 Mingw + Msys
2.  安装 ANT
3.  在 c:/mingw/bzip2 中安装 BZip2
4.  在 c:/mingw/xz 中安装 xz
5.  安装 Wix ，我安装在 C:/win35 中。在resources/install/build.xml中更改wix安装路径的位置 6) 删除mingw/msys/1.0/bin里面的make.exe文件，将mingw/bin/mingw-make.exe重命名为make.exe

## 我不得不稍微更改 Makefile，以下是我所做的更改：

1) 删除目标目录初始化中的引号：

```
-    target.dir := "$(TARGET_DIR)"
-    cygwin.target.dir := "$(TARGET_DIR)"
+    target.dir := $(TARGET_DIR)
+    cygwin.target.dir := $(TARGET_DIR) 
```

2）将单行回显改为多行：

```
-       echo.exe -e '#define PRODUCTNAME "$(PRODUCTNAME)"\n#define PRODUCTBUILDVERSION "$(PRODUCTBUILDVERSION)"\n#define
+       echo #define PRODUCTNAME "$(PRODUCTNAME)" > $(cygwin.target.dir)/config.h
+       echo #define PRODUCTBUILDVERSION "$(PRODUCTBUILDVERSION)" >> $(cygwin.target.dir)/config.h
+       echo #define TARGET_BASENAME "$(TARGET_BASENAME)" >> $(cygwin.target.dir)/config.h
+       echo #define TARGET_BASENAME_EXE "$(TARGET_BASENAME).exe" >> $(cygwin.target.dir)/config.h 
```

3) 在 resources/install/installers/properties - 指定安装 IzPack 的位置，并给出 JRE 的 zip 文件的位置。当我使用 JRE 的设置文件时，构建没有捆绑 JRE”

```
+windows.jre.zip=C:\\JavaInstallers\\jre32.zip
+windows.jre64.zip=C:\\JavaInstallers\\jre64.zip 
```

## 最后，我编写了一个简单的批处理脚本来构建安装程序：

```
set PATH=C:\apps\apache-ant-1.9.1\bin;C:\MinGW\bin;C:\MinGW\msys\1.0\bin;C:\wix35

set ANT_HOME=C:\apps\apache-ant-1.9.1
set JAVA_HOME=C:/Program Files (x86)\Java\jdk1.7.0_17
set BZ2_HOME=c:/mingw/bzip2_x86
set LZMA_HOME=C:/mingw/xz
set MINGW_HOME=C:/mingw

start /B /LOW /WAIT ant build-installation-wix 
```

* * *

这是针对 32 位版本的。

不过，对于 64 位，我必须自己从源代码构建 bzip2。这可以通过下载 Bzip2 源代码并通过 mingw 编译来完成。是一件容易的事。其余步骤都一样。

请尝试一下，让我知道这是否对您有用。

# iphone - 我可以使用相同的证书和配置文件在 iTunes Connect 上添加我的应用程序版本吗？

> ID：14495467
> 
> 赞同：0
> 
> 时间：2013-01-24T06:49:27.410
> 
> 标签：iphone, ios, app-store-connect

我创建了一个应用程序并将其上传到 iTunes Connect。但现在我想在 iTunes Connect 中添加我的应用程序版本。我已经创建了一个证书和配置文件来第一次在 iTunes Connect 上上传我的应用程序，现在我想添加一个新版本。我应该使用相同的配置文件和证书来上传应用程序吗？

而且分发证书是在客户的 mac 上创建的，所以我是否必须更改项目中的任何内容才能在我的 mac 中使用客户的分发证书？

**更新**

当我使用客户端的 P12 文件时，我是否应该从我的 mac 中删除我自己的开发人员证书和分发证书？并且只使用客户端的开发者证书和分发证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:52:46.723

是的。您可以使用相同的证书文件进行版本更改。

开发者资料有效期为 6 个月。和分发配置文件有效期为 1 年。

第 1 步：要导出您的私钥和证书以在多个系统上进行开发，请打开钥匙串访问应用程序并选择“钥匙”类别。

第 2 步：选择与您的 iPhone 开发证书关联的私钥，然后单击菜单中的“导出项目”。私钥由 iPhone 开发人员识别：与之配对的公共证书。

第 3 步：以个人信息交换 (.p12) 文件格式保存您的密钥。

第 4 步：如果您想创建一个密码，当您尝试在另一台计算机上导入此密钥时使用该密码。

第 5 步：您可以在多个系统中使用此 .p12 文件。双击 .p12 进行安装。系统将提示您输入在步骤 4 中输入的密码。

分发文件也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:52:26.860

是的，您必须使用相同的配置文件和证书来上传 iTunes 上已经可用的应用程序版本。您必须从客户端 mac 导出分发证书 p12 文件才能使用该分发证书。

# php - Php，将占位符拉出变量

> ID：14495471
> 
> 赞同：1
> 
> 时间：2013-01-24T06:49:50.507
> 
> 标签：php

我有一个包含“占位符”的变量，一旦运行就应该用 db info 替换。这是用于制作通用电子邮件。

这是变量的示例：

```
$emailBody = "Dear [-first_name-] [-last_name-]"; 
```

然后，我将为 first_name 和 last_name 调用数据库，并将这些占位符替换为适当的值。

现在我的最终目标是找到这些关键术语并将它们变成：

```
$emailBody = "Dear John Smith"; 
```

所以我想我需要一种方法将值分解为一个数组以查找 [- -] 然后进行修复，然后使 $emailBody 等于修改后的变量。我只是很难弄清楚如何查找每组 [- -]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:52:18.307

您可以执行以下操作：

```
$emailBody = "Dear [-first_name-] [-last_name-]";

$tokens = array("[-first_name-]", "[-last_name-]");
$replacements = array("John", "Doe");
$emailBody = str_replace($tokens, $replacements, $emailBody); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:05:17.713

您可以使用[str_replace 功能](http://php.net/manual/en/function.str-replace.php)

```
$emailBody = 'Dear [-first_name-] [-last_name-]';

$search = array('[-first_name-]', '[-last_name-]');
$replace = array('John', 'Smith');

$emailBody = str_replace($search, $replace, $emailBody); 
```

将 $emailBody 保留为“Dear John Smith”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:56:03.080

这就是我通常处理邮件合并的方式。它使用正则表达式查找所有由`[-`and包围的字符串`-]`，然后对它可以找到的匹配项执行替换。

与`str_replace()`or`strtr()`解决方案的区别在于它允许您找到*任何*满足的模式`[-xxx-]`，而不仅仅是您期望的模式。您可以随心所欲地处理这种情况：

```
$user = new stdClass; // this may well be an array
$user->first_name = 'Jack';
$user->last_name = 'Jackson';

echo preg_replace_callback('/\[-([a-z_]*)-\]/', function($match) use ($user) {
    $field = $match[1];
    if (isset($user->$field)) {
        return $user->$field;
    }
    // the field was not present, decide what to do
    return ''; // or: return $match[0];
}, $emailBody); 
```

也可以看看：[`preg_replace_callback()`](http://www.php.net/preg_replace_callback)

* * *

我之前给出的类似答案：

[如何在 php 电子邮件模板中包含简码](https://stackoverflow.com/questions/12251200/how-to-include-shortcodes-into-php-email-template/12251312#12251312)

[用掩码替换字符串模式的最快方法](https://stackoverflow.com/questions/14438240/fastest-way-to-replace-string-patterns-by-mask/14438832#14438832)

# ruby - 如何简化这段代码？

> ID：14495472
> 
> 赞同：2
> 
> 时间：2013-01-24T06:49:51.963
> 
> 标签：ruby

如何简化这段代码？

```
if number < 100
    divisor = 10
elsif number < 1000
    divisor = 100
elsif number < 1000000 # 1 million
    divisor = 1000
elsif number < 1000000000 # 1 billion
    divisor = 1000000
elsif number < 1000000000000 # 1 trillion
    divisor = 1000000000
# Keep goin...
end 
```

这里的重点是...

*   如果号码是`>= 0`，`< 100`我需要一个`divisor = 10`.
*   如果号码是`>= 100`，`< 1.000`我需要一个`divisor = 100`.
*   如果号码是`>= 1.000`，`< 1.000.000`我需要一个`divisor = 1.000`.
*   如果号码是`>= 1.000.000`，`< 1.000.000.000`我需要一个`divisor = 1.000.000`.
*   这一直持续下去..

我尝试了一些 and 的组合`while`，`pow`但我没有在这里得到模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:24:34.893

```
def divisor num
  10 ** (num < 1000 ? Math.log10(num).to_i : Math.log10(num).to_i / 3 * 3)
end

divisor(99) # => 10
divisor(999) # => 100
divisor(999_999) # => 1_000
divisor(999_999_999) # => 1_000_000
divisor(999_999_999_999) # => 1_000_000_000 
```

或者，更简洁：

```
def divisor num
  ->a{10 ** (a < 3 ? a : a / 3 * 3)}.call(Math.log10(num).to_i)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:58:12.497

尝试

```
 divisior = 10**(number.to_s.length - 1) 
```

根据给定的条件
，它会给你结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:40:00.280

在您的具体情况下，您可以计算除数。请参阅[Dnyans 的回答](https://stackoverflow.com/a/14495597/676874)。

如果您有类似的问题并且无法计算结果，但想避免使用`if`-`elsif`结构，那么您可以使用`case`：

```
case number 
  when 0...100
    divisor = 10
  when 100...1000
    divisor = 100
  when 1000...1000000 # 1 million
    divisor = 1000
  when 1000000...1000000000 # 1 billion
    divisor = 1000000
  when 1000000000...1000000000000 # 1 trillion
    divisor = 1000000000
# Keep goin...
  else
end 
```

实现起来`< 100`有点[复杂](https://stackoverflow.com/questions/5778295/how-to-express-infinity-in-ruby)：

```
NegativeInfinity = -1.0/0.0 
case number 
  when NegativeInfinity...100
    divisor = 10
  when 100...1000
    divisor = 100
  when 1000...1000000 # 1 million
    divisor = 1000
  when 1000000...1000000000 # 1 billion
    divisor = 1000000
  when 1000000000...1000000000000 # 1 trillion
    divisor = 1000000000
# Keep goin...
  else
end 
```

如果您想避免`divisor`每次都分配，您可以使用`case`-command 的结果：

```
divisor = case number 
  when NegativeInfinity...100
    10
  when 100...1000
    100
  when 1000...1000000 # 1 million
    1000
  when 1000000...1000000000 # 1 billion
    1000000
  when 1000000000...1000000000000 # 1 trillion
    1000000000
# Keep goin...
  else
end 
```

并结合[sawas 答案](https://stackoverflow.com/a/14496809/676874)，您可以使其适用于所有值：

```
divisor = case number 
  when 0...100
    10
  when 100...1000
    100
  else
    (10 ** (Math.log10(number).to_i / 3 * 3))
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T08:51:37.947

```
x=number
divisor=10
(x/=10;divisor*=10) while x>=100 
```

# objective-c - 如何将字典数据添加到数组中？

> ID：14495476
> 
> 赞同：4
> 
> 时间：2013-01-24T06:50:07.780
> 
> 标签：objective-c, xcode, nsarray, nsdictionary

我制作了一个数组和一个字典。现在我想将字典的值放入数组中。我对目标 C 很陌生，所以请帮忙。“视图控制器.m”

```
#import "ViewController.h"
@interface ViewController ()
@end
@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

marray = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4", nil];
marray = [[NSMutableArray alloc]initWithObjects:@"6",@"7",@"8",@"9",@"10", nil];
[self displayarray];
[marray release];
mDictionary = [[NSMutableDictionary alloc]init];
[mDictionary setValue:@"sdfsdhfg" forKey:@"firstname"];
[mDictionary setValue:@"kvxv" forKey:@"lastname"];
[self displaydict];
[mDictionary release];
}
-(void)displaydict{
CFShow(mDictionary);
}
-(void)displayarray{
for (int i = 0; i<[marray count]; i++) {
    NSLog(@"the array data present at %d index is %@",i,[marray objectAtIndex:i]);
}
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T06:59:58.033

您的问题包含许多其他问题，我将尝试解决其中一些与将字典转换为数组相关的问题。

1.  存储所有密钥

    ```
    NSArray *dictKeys=[dict allKeys]; 
    ```

2.  存储所有值

    ```
    NSArray *dictValues=[dict allValues]; 
    ```

3.  如果要存储键和值：

    ```
    NSArray *keysAndValues=[dictKeys arrayByAddingObjectsFromArray:dictValues]; 
    ```

* * *

编辑：

由于您需要 NSMutableArray，您可以使用：

```
NSMutableArray *dictAllKeys=[NSMutableArray arrayWithArray:[dict allKeys]];
NSMutableArray *dictAllValues=[NSMutableArray arrayWithArray:[dict allValues]];
NSMutableArray *keysAndValues=[NSMutableArray arrayWithArray:[dictAllKeys arrayByAddingObjectsFromArray:dictAllValues]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T06:57:36.877

```
for (NSDictionary *dictionary in arrayname)
{
    NSMutableArray *array = [dictionary objectForKey:@"writeKey"];
} 
```

这可能会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:56:10.973

如果要访问 Dictionary 的值，请对值使用特定的键。为此，请使用以下格式。

```
NSArray *yourarray=[YourDictionary ObjectForKey:@"KEY"]; 
```

我希望这能帮到您。

# c++ - 创建和发送零长度缓冲区是否可以

> ID：14495478
> 
> 赞同：1
> 
> 时间：2013-01-24T06:50:12.343
> 
> 标签：c++, boost-asio

我需要通过套接字发送大量小缓冲区。为此，我正在考虑使用 ASIO 库的分散收集功能。我认为 scatter-gather 比单独发送每个缓冲区更有效，在我的情况下，它简化了完成处理程序的逻辑。

一些缓冲区可以是空的。如果缓冲区为空，是否可以将其添加到缓冲区序列中，还是应该跳过它？

有`const_buffer`课。它具有创建空缓冲区的默认构造函数和从内存范围创建缓冲区的 2 个参数构造函数。使用第二个构造函数创建一个空缓冲区可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:01:14.167

是的，当然！据我了解您的问题，有时您可能会发送一个空缓冲区，这相当于仅发送 TCP 标头（这将被视为发送*keep-alive*）——这对于 TCP/UDP 来说非常好......

如果您已经有 smth 要发送，您可能只是跳过一个空缓冲区......或者不......没关系 - 最终数据包在两个缓冲区之间不会有任何间隙。

# java - 如何防止 XML Transformer 改变行尾

> ID：14495480
> 
> 赞同：7
> 
> 时间：2013-01-24T06:50:17.770
> 
> 标签：java, xml, dom

我有一个编辑 xml 文件的方法。该方法的总体概要是：

```
public void process(Path anXmlFile) {
    try {
        anXmlFile= anXmlFile.normalize();
        log.debug("processing {}",anXmlFile);
        Document dom = buildDOM(anXmlFile.toFile());

        //do stuff with dom...
        //delete original file
        //and finally ...
        dom.normalize(); //so we get a more predictable order

        Transformer transformer = transformerFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.ENCODING,"UTF-8");
        transformer.setOutputProperty(OutputKeys.INDENT,"yes");
        Source source = new DOMSource(dom);
        Result result = new StreamResult(anXmlFile.toFile());
        transformer.transform(source, result);
    } catch (Exception e) {
        throw new IllegalStateException(e);
    }
} 
```

我的问题是，如果我对在某一行打开并在下一行关闭的 xml 有一个多行注释（请注意换行符）：

```
<!-- this is a long comment[cr][lf] 
     that spans 2 lines --> 
```

而不是在我写出修改后的 DOM 之后，结果将是：

```
<!-- this is a long comment[cr] 
     that spans 2 lines --> 
```

问题是 [cr][lf] 变成了 [cr]。这是 xml 中唯一以这种方式受到影响的部分。所有其他行尾都与原始 ([cr][lf]) 相同 - 即使是我修改过的那些（我的代码不会更改 DOM 中的注释节点）。

我可以为我创建的 Transformer 提供任何配置选项来避免这种情况吗？这一切都是使用 JDK 类完成的，不涉及 xml 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:45:48.577

XML 规范要求 XML 处理器（解析器）替换`\r\n`或仅 `\r`使用单个`\n`. 所以如果你检查你的 DOM 文本节点，你会发现你只有`\n`作为行尾。

*序列化 DOM 树时，大多数实现在编写字符数据*中出现的换行符时使用平台默认值，或者它们为您提供显式设置行尾字符串的选项。但是，注释文本不是字符数据；字符只是按原样写入，没有任何其他处理。至少，这是大多数序列化程序的行为方式。

如果它非常重要，您可以切换到 JDOM 并扩展 AbstractXMLOutputProcessor 以更改编写注释的方式。

# asp.net - 无法在 Visual Studio 2008 中添加数据连接

> ID：14495482
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:50:18.407
> 
> 标签：asp.net

我正在尝试使用 VS2008 添加 SQL Server 数据库文件，但我收到一条错误消息，指出不支持此服务器版本。仅支持最高到 Microsoft SQL Server 2005 的服务器。我试图删除 Microsoft SQL Server Data\SQLEXPRESS 文件夹并重新连接它，但我仍然遇到同样的错误。

这是我得到的错误。有谁知道如何修理它？
![在此处输入图像描述](../Images/b9ecf0ca710e770b0d28542b413938c2.png)

非常感谢你，伊娃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:57:05.690

从此链接中的信息：http: [//msdn.microsoft.com/en-us/library/cc440724](http://msdn.microsoft.com/en-us/library/cc440724(v=vs.90).aspx) (v=vs.90).aspx 。

看来您需要安装 VS2008 sp1 才能使用 SQL 2008。

# android - 从 APK 扩展文件中读取内容（来自 obb 文件）

> ID：14495483
> 
> 赞同：4
> 
> 时间：2013-01-24T06:50:22.463
> 
> 标签：android, apk-expansion-files

我已经实现了 APK 扩展文件下载服务，全部来自[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

我可以下载 APK 扩展文件，我可以使用以下代码查看该文件

```
try {
        ZipResourceFile expansionFile = APKExpansionSupport
                .getAPKExpansionZipFile(this, 3, 0);

        ZipEntryRO[] zip = expansionFile.getAllEntries();
        Log.e("", "" + zip[0].mFile.getAbsolutePath());
        Log.e("", "" + zip[0].mFileName);
        Log.e("", "" + zip[0].mZipFileName);
        Log.e("", "" + zip[0].mCompressedLength);

        AssetFileDescriptor fd = expansionFile
                .getAssetFileDescriptor(zip[0].mFileName);

        if (fd != null && fd.getFileDescriptor() != null) {
            MediaPlayer mp = new MediaPlayer();
            mp.setDataSource(fd.getFileDescriptor());
            mp.start();
        } else {
            Log.e("", "fd or fd.getFileDescriptor() is null");
        }

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我的 obb 有文件`test.mp4`并且我的代码`Log.e("", "" + zip[0].mFileName);`打印`test.mp4.`

我`fd`的是`null`。为什么呢`null`？我正在尝试解决但未能解决。

我只是无法读取 obb 文件中的任何文件。

访问obb[扩展文件](https://stackoverflow.com/questions/12635069/accessing-to-files-inside-obb-expansion-file)中的文件提示想法，但它对我不起作用。

[创建APK扩展文件的步骤](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file/11717019#11717019)告诉从obb解压缩内容然后读取它。它可靠吗？

我需要关于最佳实践的意见。

## 编辑

我的日志

```
03-01 10:36:40.848: E/(27836): zip[0].isUncompressed() : false
03-01 10:36:40.848: E/(27836): mFile.getAbsolutePath() : /storage/sdcard0/Android/obb/smart.trigger/main.3.smart.trigger.obb
03-01 10:36:40.848: E/(27836): mFileName : test.mp4
03-01 10:36:40.848: E/(27836): mZipFileName : /storage/sdcard0/Android/obb/smart.trigger/main.3.smart.trigger.obb
03-01 10:36:40.848: E/(27836): mCompressedLength : 21657598 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-23T07:25:21.313

我用谷歌搜索，发现我们必须制作 .zip，在[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)`0% (No compression)`中提到

`Tip: If you're packaging media files into a ZIP, you can use media playback calls on the files with offset and length controls (such as MediaPlayer.setDataSource() and SoundPool.load()) without the need to unpack your ZIP. In order for this to work, you must not perform additional compression on the media files when creating the ZIP packages. For example, when using the zip tool, you should use the -n option to specify the file suffixes that should not be compressed: zip -n .mp4;.ogg main_expansion media_files`

或**如何使用 winrar 制作 0% 压缩 zip？**

![在此处输入图像描述](../Images/4255150fff59d676a4cde268577f1e44.png)

这里看压缩方法

**mac中的0％压缩zip**

```
Create zip without compression on OS X from Terminal:
zip -r0 zipfilename.zip files-to-zip 
```

所以我们应该把这个 zip 上传到 Play 商店。

所以你不需要使用**ZipHelper.java**

只需简单地使用

```
ZipResourceFile expansionFile=null;

            try {
                expansionFile = APKExpansionSupport.getAPKExpansionZipFile(getApplicationContext(),3,0);

                     AssetFileDescriptor fd = expansionFile.getAssetFileDescriptor("test.mp4");
                     MediaPlayer mPlayer = new MediaPlayer();
                     mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                     mPlayer.setDataSource(fd.getFileDescriptor(),fd.getStartOffset(),fd.getLength());
                     mPlayer.prepare();
                     mPlayer.start();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T05:13:05.247

我已经解决了使用解压缩..

ZipHelper.java

```
public class ZipHelper {
static boolean zipError = false;

public static boolean isZipError() {
    return zipError;
}

public static void setZipError(boolean zipError) {
    ZipHelper.zipError = zipError;
}

public static void unzip(String archive, File outputDir) {
    try {
        Log.d("control", "ZipHelper.unzip() - File: " + archive);
        ZipFile zipfile = new ZipFile(archive);
        for (Enumeration<? extends ZipEntry> e = zipfile.entries(); e
                .hasMoreElements();) {
            ZipEntry entry = (ZipEntry) e.nextElement();
            unzipEntry(zipfile, entry, outputDir);

        }
    } catch (Exception e) {
        Log.d("control", "ZipHelper.unzip() - Error extracting file "
                + archive + ": " + e);
        setZipError(true);
    }
}

private static void unzipEntry(ZipFile zipfile, ZipEntry entry,
        File outputDir) throws IOException {
    if (entry.isDirectory()) {
        createDirectory(new File(outputDir, entry.getName()));
        return;
    }

    File outputFile = new File(outputDir, entry.getName());
    if (!outputFile.getParentFile().exists()) {
        createDirectory(outputFile.getParentFile());
    }

    Log.d("control", "ZipHelper.unzipEntry() - Extracting: " + entry);
    BufferedInputStream inputStream = new BufferedInputStream(
            zipfile.getInputStream(entry));
    BufferedOutputStream outputStream = new BufferedOutputStream(
            new FileOutputStream(outputFile));

    try {
        IOUtils.copy(inputStream, outputStream);
    } catch (Exception e) {
        Log.d("control", "ZipHelper.unzipEntry() - Error: " + e);
        setZipError(true);
    } finally {
        outputStream.close();
        inputStream.close();
    }
}

private static void createDirectory(File dir) {
    Log.d("control",
            "ZipHelper.createDir() - Creating directory: " + dir.getName());
    if (!dir.exists()) {
        if (!dir.mkdirs())
            throw new RuntimeException("Can't create directory " + dir);
    } else
        Log.d("control",
                "ZipHelper.createDir() - Exists directory: "
                        + dir.getName());
}
} 
```

用法

```
try {
        ZipResourceFile expansionFile = APKExpansionSupport
                .getAPKExpansionZipFile(this, 3, 0);

        ZipEntryRO[] zip = expansionFile.getAllEntries();
        Log.e("", "zip[0].isUncompressed() : " + zip[0].isUncompressed());
        Log.e("",
                "mFile.getAbsolutePath() : "
                        + zip[0].mFile.getAbsolutePath());
        Log.e("", "mFileName : " + zip[0].mFileName);
        Log.e("", "mZipFileName : " + zip[0].mZipFileName);
        Log.e("", "mCompressedLength : " + zip[0].mCompressedLength);

        File file = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "");
        ZipHelper.unzip(zip[0].mZipFileName, file);

        if (file.exists()) {
            Log.e("", "unzipped : " + file.getAbsolutePath());
        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T21:06:58.733

您的文件是否在 zip 文件的文件夹中？我问是因为我遇到了同样的问题，我的解决方案是在获取文件描述符时包含文件夹名称。

例如，我的扩展文件包含一个名为“视频”的文件夹。因此，要获得文件描述符，我必须这样做：

```
AssetFileDescriptor fd = expansionFile.getAssetFileDescriptor("Videos/" + videoName + ".mp4"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T15:39:07.030

如果你使用`setDataSource()`你不应该在压缩文件时首先压缩文件，如文档中所说的那样（[http://developer.android.com/google/play/expansion-files.html#ZipLib](http://developer.android.com/google/play/expansion-files.html#ZipLib)）：

> 为了使其正常工作，您在创建 ZIP 包时不得对媒体文件执行额外的压缩。

# php - 自动登录 FBConnect 问题

> ID：14495485
> 
> 赞同：1
> 
> 时间：2013-01-24T06:50:29.113
> 
> 标签：php, facebook, session, fbconnect

fbconnect 中的自动登录无法识别用户 Session.javascript 代码

```
 <div id="fb-root"></div>
<script type="text/javascript">

var flag=0;

var fbLogin = "<?php echo $this->Session->read('FBLoginID')?>";
var sLogin = "<?php echo $this->Session->read('LoginID')?>";
var FB_APP_ID = "<?php echo FB_APP_ID;?>";
var SITE_URL = "<?php echo SITE_URL;?>";

            window.fbAsyncInit = function() {
                FB.init({appId: FB_APP_ID, status: true, cookie: true, xfbml: true, oauth:true});

                /* All the events registered */
                FB.Event.subscribe('auth.login', function(response) {
                    // do something with response
                    login();
                });
                FB.Event.subscribe('auth.logout', function(response) {
                    // do something with response
                    logout();
                });

                if(FB.getUserID()) { 
                    if(sLogin==""){
                      if(fbLogin==""){
                        //document.location.href = SITE_URL+"/members/fbconnect";
                window.location = SITE_URL+"members/fbconnect";
                      }
                    }
                }
            };
            (function() {
                var e = document.createElement('script');
                e.type = 'text/javascript';
                e.src = document.location.protocol +
                    '//connect.facebook.net/en_US/all.js';
                e.async = true;
                document.getElementById('fb-root').appendChild(e);
            }());

            function login(){
                if(!sLogin)
                    window.location = SITE_URL+"members/fbconnect";
            }
            function logout(){
                window.location = SITE_URL+"/homes/logout";
            }

function LogoutFB(){FB.logout(SITE_URL+'/homes/logout');}

</script>
<div id="fancy-facebook" class="mobil-sprite">
<p class="fancy-facebook-heading">Sign-in <span class="grey">with facebook</span></p>
<div style="clear:both;height:5px;"></div>
<div style="margin:20px auto;width:94px;">
<fb:login-button autologoutlink="true" scope="user_photos,friends_photos,email,user_birthday,status_update,publish_stream">Connect</fb:login-button>
</div>
</div> 
```

脸书PHP代码

```
<?php

require_once 'facebook/fb/facebook.php';

class FacebookConnectComponent extends Object  {

    var $components = array('Session','Session');

    var $facebook;
    var $__fbId = FB_APP_ID;
    var $__fbApiKey = FB_APP_ID;
    var $__fbSecret = FB_SECRET_KEY;

    var $loginUrl = '/members/fbconnect';
    var $logoutUrl = '/members/logout';

    var $session;
    var $user;
    var $fbme;

     function startup(&$controller) {

        $this->facebook = new Facebook(array(
          'appId'  => $this->__fbId,
          'secret' => $this->__fbSecret,
          'cookie' => true
        ));

  //$this->session = $this->facebook->getSession();
    $this->user = $this->facebook->getUser();
    $this->fbme = null;
    // Session based graph API call.
    //if ($this->session) {
     if($this->user){
      try {
        $uid = $this->user;
        $this->fbme = $this->facebook->api('/me');
      } catch (FacebookApiException $e) {
          //$this->d($e);
           // $login_url = $this->facebook->getLoginUrl();
   // header("Location: ".$login_url); 
      }
    }//else{ echo "test";die; }
    //new code
    // if(!$this->user) { //Ask for bare minimum login
    // $login_url = $this->facebook->getLoginUrl();
   // header("Location: ".$login_url); 
    // }
    //end of code

    function d($d){
        echo '<pre>==';
        print_r($d);
        echo '</pre>';
    }

    function getlogout(){

        return $this->facebook->getLogoutUrl();
    }

    }
 }

?> 
```

如果用户已经登录到 facebook。它会一次又一次地重定向到 memeber/fbconnect，而 facebook 未授权。

# ruby - ruby 语法错误，哈希中有多种语言

> ID：14495486
> 
> 赞同：0
> 
> 时间：2013-01-24T06:50:33.480
> 
> 标签：ruby, character-encoding, syntax-error

以下哈希导致语法错误。我认为这是因为时髦的角色。

有任何解决这个问题的方法吗？我正在使用 macvim，以防万一。

```
 {
    :en => ['English',  'en_US'], 
    :es => ['español',  'es_MX'],
    :fr => ['français', 'fr_FR'],
    :de => ['Deutsch',  'de_DE'],
    :ru => ['русский',  'ru_RU'],
    :zh => ['中国的',   'zh_CN'],
    :ar => ['العربية',   'ar_AR'],
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:56:25.740

如果这是 Ruby 1.9，那么您可以设置魔术注释来告诉 Ruby 这是一个 UTF8 文件而不是 ASCII：

[ruby 中的魔术注释（#Encoding: utf-8）是如何工作的？](https://stackoverflow.com/questions/8879237/how-does-the-magic-comment-encoding-utf-8-in-ruby-works)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:53:08.933

你总是可以逃避你的 unicode 值。

```
{
  :en => ['English',  'en_US'], 
  :es => ['espa\u00F1ol',  'es_MX'],
  :fr => ['fran\u00E7ais', 'fr_FR'],
  :de => ['Deutsch',  'de_DE'],
  :ru => ['\u0440\u0443\u0441\u0441\u043A\u0438\u0439',  'ru_RU'],
  :zh => ['\u4E2D\u56FD\u7684',   'zh_CN'],
  :ar => ['\u0627\u0644\u0639\u0631\u0628\u064A\u0629',   'ar_AR'],
} 
```

# javascript - 将数字值与网页上的单词相关联，然后将其乘以网页上该单词后面的数字

> ID：14495487
> 
> 赞同：1
> 
> 时间：2013-01-24T06:50:34.410
> 
> 标签：javascript, greasemonkey

```
<img src="http://lawyer.gif" />
<a href="http://lawyer.com">lawyer</a> (111) 
```

或者

```
<img src="http://doctor.gif" />
<a href="http://doctor.com">doctor</a> (222) 
```

所以有多个页面包含类似于上面的html。我想为“lawyer”或“lawyer.gif”或其他任何内容的出现分配一个特定值，然后将其乘以 111 IF 律师在页面上，然后将其添加到“医生”乘以 222 IF 医生在页。有很多不同的可能“职业”（约 50 种），所以这里的代码非常简化。一页可能有医生、律师和消防员，而另一页可能只有牙医。然后这个总和应该显示在页面上或弹出窗口或其他任何东西上。这里的 111 和 222 来自代码中括号中的数字，并且这些数字在每一页上都会发生变化。

我计划用greasemonkey/javascript来做这件事，但只是因为我在这方面的经验有限。所以我想我的问题是首先，这是否可能至少有点简单，如果可以，至少有人能给我一些提示让我开始吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:45:24.277

一般来说：

1.  要处理很多事情，请使用数组：`[blah1, blah2, etc.]`
2.  要将 ad-hoc 值关联到 ad-hoc 标签，请使用对象：
    `[ {blah1: 3.1}, {blah2: 415}, etc.]`
3.  要检测和操作页面上的内容，请使用*jQuery*。
4.  要向页面添加显示或其他元素，也可以使用 jQuery。

总而言之，这是**一个完整的脚本**，可以完成您的问题似乎要问的问题。您还可以[**在 jsFiddle 上查看运行中的代码。**](http://jsfiddle.net/3WX26/)：

```
// ==UserScript==
// @name     Arbitrary math on arbitrary page values
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var textToValuesArray   = [
    {"doctor": 3}
    , {"lawyer": 5}
    , {"rodeo clown": 7}
    // etc.
];
var targetNodes = $("td.left:has(a)");
var targetText  = targetNodes.text ();
var reportValue = 0;

//-- Loop through the textToValuesArray.
$.each (textToValuesArray, function (index, textToValueObject) {
    var textTerm    = Object.keys (textToValueObject)[0];

    //-- Is the text term in the targeted part of the page?
    var termRegex   = new RegExp(textTerm, 'i'); // Case insensitive
    if (termRegex.test (targetText) ) {
        console.log ("Text '" + textTerm + "' was found!");

        /*-- Given the indicated page structure, targetText will look like:
            "doctor (2)lawyer (4)" etc.
            With the value we want coming one space after the target term
            and in parentheses.

            So, if we split the string on the search term, we get the next
            (number), if any.
        */
        var splitStr    = targetText.split (termRegex);
        if (splitStr  &&  splitStr.length > 1) {
            var multiplierString = splitStr[1].replace (/^\s*\((\d+)\).*$/, "$1");
            if (multiplierString) {
                var multiplierInteger = parseInt (multiplierString, 10);
                if (isNaN (multiplierInteger) ) {
                    console.log ("Multiplier value not found! (2)");
                }
                else {
                    /*-- We found a term and we found its multiplier.
                        Add to the report value.
                    */
                    var termValue   = textToValueObject[textTerm];
                    console.log (
                        "termValue: ", termValue,
                        "   ",
                        "multiplierInteger: ", multiplierInteger
                    );
                    reportValue    += termValue * multiplierInteger
                }
            }
            else {
                console.log ("Multiplier value not found! (1)");
            }
        }
        else {
            console.log ("Split string error!");
        }
    }
} );

console.log ("reportValue: ", reportValue);

$("body").prepend ('<div id="gmReport">The final value was: ' + reportValue + '</div>');
$("#gmReport").css ("background", "orange"); 
```

# iphone - 在 iPhone 应用程序中呈现动态表单

> ID：14495489
> 
> 赞同：0
> 
> 时间：2013-01-24T06:50:39.303
> 
> 标签：iphone, objective-c, ios5, uipickerview, dynamic-tables

我必须使用 tableview 在 iPhone 应用程序中呈现动态表单。此表单可能有多个 UI 控件，如按钮、文本字段、标签、选择器、日期选择器。

我得到了一个 iPad 示例代码，它能够呈现动态表单，但[这个](https://github.com/ecrichlow/iPad-Dynamic-Table-Cells)示例代码使用的是 UIPopoverController，iPhone 应用程序不支持它。所以我正在寻找一些应该在 iPhone 中工作的示例代码。

下面是在动态表单中单击按钮时显示组合框的代码。我需要应该显示带有列表项的选择器的代码。

示例代码：[https ://github.com/ecrichlow/iPad-Dynamic-Table-Cells](https://github.com/ecrichlow/iPad-Dynamic-Table-Cells)

```
- (IBAction)buttonPressed:(id)sender
{

    [delegate rowItemWasSelected:self];
    if (self.itemControlType == ControlTypeToggleButton)
        {
        ...
        }
    else if (self.itemControlType == ControlTypePopup)
        {
        ...
        }
    else if (self.itemControlType == ControlTypeCombo)
        {
        UITableViewController *popoverTable = [[[UITableViewController alloc] initWithStyle:UITableViewStylePlain] autorelease];
        UIToolbar *toolbar = [[[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, DEFAULT_POPOVER_WIDTH, DEFAULT_TOOLBAR_HEIGHT)] autorelease];
        UIView *containerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, DEFAULT_POPOVER_WIDTH, ([self.controlSelections count] * popoverTable.tableView.rowHeight) + DEFAULT_TOOLBAR_HEIGHT)] autorelease];
        UIViewController *containerViewController = [[[UIViewController alloc] init] autorelease];
        UIPopoverController *popoverController = [[UIPopoverController alloc] initWithContentViewController:containerViewController];
        UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(DEFAULT_COMBO_TEXTFIELD_MARGIN, (DEFAULT_TOOLBAR_HEIGHT - DEFAULT_COMBO_TEXTFIELD_HEIGHT) / 2, DEFAULT_POPOVER_WIDTH - (DEFAULT_COMBO_TEXTFIELD_MARGIN * 2), DEFAULT_COMBO_TEXTFIELD_HEIGHT)];
        textField.delegate = self;
        textField.autocorrectionType = UITextAutocorrectionTypeNo;
        textField.autocapitalizationType = UITextAutocapitalizationTypeNone;
        textField.font = [UIFont systemFontOfSize:DEFAULT_COMBO_FONT_SIZE];
        textField.borderStyle = UITextBorderStyleRoundedRect;
        textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        [textField addTarget:self action:@selector(fieldTextDidUpdate:) forControlEvents:UIControlEventEditingDidEnd];
        containerViewController.view = containerView;
        popoverTable.tableView.dataSource = self;
        popoverTable.tableView.delegate = self;
        popoverTable.tableView.frame = CGRectMake(0, DEFAULT_TOOLBAR_HEIGHT, DEFAULT_POPOVER_WIDTH, [self.controlSelections count] * popoverTable.tableView.rowHeight);
        popoverController.popoverContentSize = CGSizeMake(DEFAULT_POPOVER_WIDTH, ([self.controlSelections count] * popoverTable.tableView.rowHeight) + DEFAULT_TOOLBAR_HEIGHT);
        popoverController.delegate = self;
        [toolbar addSubview:textField];
        [containerView addSubview:toolbar];
        [containerView addSubview:popoverTable.tableView];
        optionPopoverController = popoverController;
        [popoverController presentPopoverFromRect:control.frame inView:control.superview permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        // If there's currently an object that's first responder, make it resign that status
        for (UIView *subview in self.control.superview.subviews)
            {
            if ([subview isKindOfClass:[UITextField class]])
                {
                if ([subview isFirstResponder])
                    {
                    [subview resignFirstResponder];
                    [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1]];
                    }
                }
            }
        [textField becomeFirstResponder];
        }
    else if (self.itemControlType == ControlTypeButton)
        {
        // Don't need to do anything here. Caller passed in target and action. But in order to trigger delegate rowItemWasSelected this control type was added here.
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:56:01.360

您可以修改示例代码 iPad-Dynamic-Table-Cells 以在 iPhone 中呈现动态表单以及弹出框显示

[将 git-hub https://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)上可用的以下 6 个项目文件添加到您的 iPad-Dynamic-Table-Cells 示例代码中

FPPopoverController.h/.m、FPPopoverView.h/m 和 FPTouchView.h/.m

现在修改 FPTouchView.m、EditableTableDataRowItem.h 和 EditableTableDataRowItem.m 如下

```
//In EditableTableDataRowItem.h
@interface EditableTableDataRowItem : UIViewController <UITableViewDataSource, UITableViewDelegate, UIPopoverControllerDelegate, UITextFieldDelegate,FPPopoverControllerDelegate>
{

    id<EditableTableDataRowItemDelegate> delegate;

    RowItemControlType          itemControlType;        // So named to denote that this does not correspond to a UIControl
    NSArray                     *controlSelections;     // List of items to display for popup control type
    NSString                    *listKey;               // If controlSelections array contains NSManagedObjects or NSDictionaries, the key to use to get a string to represent the item
    CGSize                      baseSize;               // Default size of the control, with width relative to other items on the row
    BOOL                        resizeable;             // Determines whether item can be resized based on row width
    UIControl                   *control;               // Standard control particular to the type of row item
    UIImage                     *normalImage;           // Used to customize the appearance of any button-based control type
    UIImage                     *selectedImage;         // Used to customize the appearance of any button-based control type

    CGSize                      originalBaseSize;
    int                         state;
    int                         selectedIndex;
    UIPopoverController         *optionPopoverController;
    FPPopoverController *popover;
    id<FPPopoverControllerDelegate> delegate1;
}
@property(assign) id<EditableTableDataRowItemDelegate> delegate;
@property(assign) id<FPPopoverControllerDelegate> delegate1;
@property(nonatomic, retain) FPPopoverController *popover;
        .
        . 
```

//在EditableTableDataRowItem.m

```
- (IBAction)buttonPressed:(id)sender
{
    [delegate rowItemWasSelected:self];
    if (self.itemControlType == ControlTypeToggleButton)
        {
        .
        .
        .

        }
    else if (self.itemControlType == ControlTypePopup)
        {
        UITableViewController *popoverTable = [[[UITableViewController alloc] initWithStyle:UITableViewStylePlain] autorelease];
        popoverTable.tableView.dataSource = self;
        popoverTable.tableView.delegate = self;
        popover = [[FPPopoverController alloc] initWithViewController:popoverTable];

        popover.tint = FPPopoverDefaultTint;

        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            popover.contentSize = CGSizeMake(300, 500);
        }
        else {
            popover.contentSize = CGSizeMake(200, 300);
        }
        popover.arrowDirection = FPPopoverArrowDirectionAny;
        [popover presentPopoverFromView:sender];
        }
        .
        .
        .

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [popover dismissPopoverAnimated:YES];
} 
```

//在FPTouchView.m文件中 //需要处理这个方法

```
-(UIView*)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{

    UIView *subview = [super hitTest:point withEvent:event];

    //To-Do
    //
    return subview;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:35:47.620

git-hub [Popover for iPhone](https://github.com/50pixels/FPPopover/tree/master/FPPopoverDemo)上可用的项目将帮助您在 iPhone 应用程序中实现 popover。

您唯一需要做的就是检查上述代码中的设备并执行相应的操作。

将 6 个文件添加到您的项目中

**FPPopoverController.h/.m、FPPopoverView.h/m 和 FPTouchView.h/.m**

然后创建两个样本

> DemoPopOverTableController.h

```
#import <UIKit/UIKit.h>
#import "FPPopoverController.h"
@interface DemoPopOverTableController : UITableViewController {
    FPPopoverController *popOverController;
    NSArray *subCat;
}
-(id)initWithStyle:(UITableViewStyle)style andSubCategory:(NSArray *)subCategories 
-(void)setPopOver:(FPPopoverController*)popOver;
@end 
```

和

> DemoPopOverTableController.m

```
#import "DemoPopOverTableController.h"
#import "FPPopoverController.h"
@interface DemoTableController ()
@end

@implementation DemoTableController

-(id)initWithStyle:(UITableViewStyle)style andSubCategory:(NSArray *)subCategories 
{
    self = [super init];
    if (self) {
        // Custom initialization
        subCat = [NSArray arrayWtihArray:subCategories] ;
    }
    return self;
}
-(void)setPopOver:(FPPopoverController *)popOver
{
    popOverController=popOver;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [subCat count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
    NSString *tempCat=[subCat objectAtIndex:indexPath.row];
    cell.textLabel.text =tempCat;
    return cell ;
}
#pragma mark - Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"selected Category: %@",[subCat objectAtIndex:indexPath.row]);
    [popOverController dismissPopoverAnimated:YES];
}
@end 
```

这不是完整的答案，但这是您可以在上面的代码中做的事情

```
if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone)
{
    //iPhone popover lines of code
DemoPopOverTableController *controller = [[DemoPopOverTableController alloc] initWithStyle:UITableViewStylePlain andSubCategory:subCat];
    FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:controller];
    [controller setPopOver:popover];
    [controller release];

    popover.delegate = self;
    popover.tint = FPPopoverDefaultTint;
    popover.arrowDirection = FPPopoverArrowDirectionUp;
    popover.contentSize = CGSizeMake(200, 200);
    //sender is the UIButton view
    [popover presentPopoverFromView:sender];
    [popover release];
}
else
{
    //the original line of code you have already in your code
} 
```

您可以实现委托方法以在触摸表格视图时执行一些操作

```
- (void)presentedNewPopoverController:(FPPopoverController *)newPopoverController
          shouldDismissVisiblePopover:(FPPopoverController*)visiblePopoverController
{    
    [visiblePopoverController dismissPopoverAnimated:YES];
    [visiblePopoverController autorelease];
}

- (void)popoverControllerDidDismissPopover:(FPPopoverController *)popoverController
{
    // do something of your choice
} 
```

# jquery - jquery中是否有任何功能我可以搜索子元素文本并通过搜索键过滤所有子元素？

> ID：14495496
> 
> 赞同：0
> 
> 时间：2013-01-24T06:51:10.643
> 
> 标签：jquery

例如我的 html 如下所示，

```
<div id="mainDiv">
   <div id="1">This is animal page</div>
   <div id="2">No animal here</div>
   <div id="3">Jame Bond</div>
   <div id="4">Simple Bond</div>
</div> 
```

我有一个`input`像这样的领域

```
<input type="text" id="search"> 
```

在搜索任何内容时，它必须在其他 div 中列出结果。

就像我搜索`keyword bond`它时应该显示如下

```
<div id="mainDiv">
   <div id="3">Jame Bond</div>
   <div id="4">Simple Bond</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:54:18.133

您可以使用[`.filter()`](http://api.jquery.com/filter/)并制作一个简单的过滤功能：

```
var search_string = 'bond';
var $matched = $('#mainDiv > div').filter(function() {
    return $(this).text().toLowerCase().indexOf(search_string) !== -1;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:59:45.297

Blender的回答更进一步，试试这个

```
<input type="text" id="search" onkeyup="search(this.value);">
  <div id="mainDiv">
     <div id="1">This is animal page</div>
     <div id="2">No animal here</div>
     <div id="3">Jame Bond</div>
     <div id="4">Simple Bond</div>
  </div>

<script type="text/javascript">
    function search(text) {
       var search_string = text;
       var all = $('#mainDiv > div');

       all.css({ "display": "none" });

       var $matched = $('#mainDiv > div').filter(function () {
          return $(this).text().toLowerCase().indexOf(search_string) !== -1;
       });

       $matched.css({ "display": "block" });
     }
</script> 
```

演示链接：http: [//jsbin.com/ocugug/1](http://jsbin.com/ocugug/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:12:46.303

试试这个

```
 $("#mainDiv div").hide();
     $("#mainDiv div:contains("+$("#search").val()+")").show(); 
```

[演示](http://jsbin.com/abagel/1/edit)

# regex - 使用正则表达式删除前导字符串

> ID：14495497
> 
> 赞同：4
> 
> 时间：2013-01-24T06:51:16.537
> 
> 标签：regex

我需要构建一个正则表达式来删除给定字符串中的前导“The”或“A”或“An”和“空格”。

例如，给定的字符串是：

> 敏捷的棕色狐狸跳过了懒狗

使用正则表达式，我希望删除领先的“The”并仅返回

> 敏捷的棕色狐狸跳过懒惰的狗

我试过（从评论中添加）

```
^*(?<=[The|An|A]\s){1}.* 
```

它工作正常，但在一种情况下它没有返回预期结果。请看下面的场景。

> 输入：the quick brown fox --> 结果 = quick brown fox
> 
> 输入：A quick brown fox --> 结果 = quick brown fox
> 
> 输入：在晴天 --> 结果 = 晴天（预计是在晴天......因为字符串不是以 A 开头）
> 
> 输入：American An bank --> 结果 = An bank（预期为 American An bank.. 因为字符串不是以 An 开头）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T06:59:13.710

你自己试过什么？您想要达到的目标并不难，例如[在 Regular-Expresions.info 上尝试本教程](http://www.regular-expressions.info/tutorial.html)。

你想的太复杂了。尝试这个：

```
^(The|An|A)\s+ 
```

并替换为空字符串。

[在 Regexr 上](http://regexr.com?33h31)查看

`^`匹配字符串的开头。

`(The|An|A)`一个替代，匹配第一个合适的替代。

`\s+`匹配至少一个后面的空格。

变化

> 敏捷的棕色狐狸
> 
> 一只敏捷的棕色狐狸
> 
> 在一个阳光明媚的日子
> 
> 美国安银行

至

> 快速棕色狐狸
> 
> 快速棕色狐狸
> 
> 在一个阳光明媚的日子
> 
> 美国安银行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:58:13.240

下面是 perl 中完整的一行：

```
perl -e 'my $a = "The quick brown fox jumps over the lazy dog"; $a =~ s/^\s*(?:The|An|A)\s+//gi; print $a;' 
```

进行替换的部分是：

```
$a =~ s/^\s*(?:The|An|A)\s+//gi; 
```

与您的单词和空格匹配的正则表达式是`/^\s*(?:The|An|A)\s+/`

# java - 如何更改 JFrame 内的 JPanel？

> ID：14495498
> 
> 赞同：1
> 
> 时间：2013-01-24T06:51:19.683
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我正在开发这个基本`Pong-style`游戏是为了好玩，但我在这`GUI`方面遇到了一些困难。本质上，我有一个`JFrame`包含所有内容的调用窗口和一个`JPanel`调用内容。内容应该是指`ContentPanel`我所拥有的。到目前为止，这是我的源代码（对不起，它太长了，其中很多只与游戏有关，而不是这个问题，但我不确定我的问题需要源代码的哪些部分才有意义）：

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import javax.swing.*;

public class Pong extends JApplet {

   public static void main(String[] args) {
      JFrame window = new JFrame("Pong: The Game of Champions");
      JPanel content = new JPanel();
      window.setContentPane(content);
      window.setSize(1000,600);
      window.setLocation(100,100);
      window.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
      window.setVisible(true);
      window.setResizable(false);

      JMenuBar settings = new JMenuBar();
      ButtonHandler listener = new ButtonHandler();
      window.setJMenuBar(settings);
      JMenu toolsMenu = new JMenu("Settings");
      settings.add(toolsMenu);
      JMenuItem preferences = new JMenuItem("Preferences");
      JMenuItem about = new JMenuItem("About");
      toolsMenu.add(preferences);
      toolsMenu.add(about);      
      about.addActionListener(listener);
      preferences.addActionListener(listener);

   }

   public void init() {
      setContentPane( new ContentPanel() );
   }

   public static class ButtonHandler implements ActionListener {
       public void actionPerformed(ActionEvent evt) {

           String command = evt.getActionCommand();

           if (command.equals("About")) {
               JOptionPane.showMessageDialog(null, "Made by Kyle Evans for Mr. Richardson's AP Computer Science class. Aww yeah.");
           }

           else if (command.equals("Preferences")) {

           }
       }
   }

   public static class ContentPanel extends JPanel implements KeyListener, FocusListener, MouseListener, ActionListener {

      private Timer timer = new Timer(10, this);
      private static final int PADDLE_WIDTH = 10;  // Length of side of square.
      private static final int PADDLE_HEIGHT = 100;
      private static final int BALL_WIDTH = 10;
      private static final int UP = 1, DOWN = 2;

      private Color squareColor;  // The color of the square.

      private int paddleOneDirection = -1;
      private int paddleTwoDirection = -1;

      private int paddleOneTop, paddleOneLeft, paddleTwoTop, paddleTwoLeft, paddleSpeed, 
                            ballTop, ballLeft, ballSpeedHorizontal, ballSpeedVertical;

      public ContentPanel() {

         paddleOneTop = 230;  // Initial position of top-left corner of square.
         paddleOneLeft = 900;
         paddleTwoTop = 230;
         paddleTwoLeft = 90;
         paddleSpeed = 4;
         ballTop = 270;
         ballLeft = 490;
         ballSpeedHorizontal = (int)(Math.random()*2);
            if (ballSpeedHorizontal == 0) {
                ballSpeedHorizontal = -1;
            }
         ballSpeedVertical = (int)(Math.random()*6) - 3;
         squareColor = Color.WHITE;  // Initial color of square.

         setBackground(Color.BLACK);

         addKeyListener(this);     // Set up event listening.
         addFocusListener(this);
         addMouseListener(this);

      } // end init();

      public void paintComponent(Graphics g) {

         super.paintComponent(g);  // Fills the panel with its
                                   // background color, which is white.

         g.setColor(squareColor);
         g.fillRect(paddleOneLeft, paddleOneTop, PADDLE_WIDTH, PADDLE_HEIGHT);
         g.fillRect(paddleTwoLeft, paddleTwoTop, PADDLE_WIDTH, PADDLE_HEIGHT);
         g.fillRect(ballLeft, ballTop, BALL_WIDTH, BALL_WIDTH);
         String messageH = "false";
         String messageV1 = "false";
         String messageV2 = "false";
         if (isHittingPaddleHorizontal()) {
             messageH = "true";
         }
         if (!isHittingPaddleHorizontal()) {
             messageH = "false";
         }
         if (isHittingPaddleOneVertical()) {
             messageV1 = "true";
         }
         if (!isHittingPaddleOneVertical()) {
             messageV1 = "false";
         }
         if (isHittingPaddleTwoVertical()) {
             messageV2 = "true";
         }
         if (!isHittingPaddleTwoVertical()) {
             messageV2 = "false";
         }
         g.drawString("Is hitting horizontal: " + messageH,7,20);
         g.drawString("Is hitting vertical right: " + messageV1,7,40);
         g.drawString("Is hitting vertical left: " + messageV2,7,60);

      }  // end paintComponent()

      // ------------------- Game controlling methods -------------------------

      public void moveBall() {

          ballLeft -= ballSpeedHorizontal;
          ballTop -= ballSpeedVertical;

          if (isHittingPaddleHorizontal()) {
              if (isHittingPaddleOneVertical()) {
                      ballSpeedHorizontal = -ballSpeedHorizontal;
                     // ballSpeedHorizontal++;
              } 
              else if (isHittingPaddleTwoVertical()) {
                     // ballSpeedHorizontal++;
                      ballSpeedHorizontal = -ballSpeedHorizontal;
              }
          }

          if ((ballTop <= 0) || (ballTop >= 565))     // Sets the vertical boundaries so the ball bounces off the top and bottom.
              ballSpeedVertical = -ballSpeedVertical;

          if ((ballLeft > 1000) || ballLeft < 0) {
              gameOver();
          }
      }

      public boolean isHittingPaddleOneVertical() {
          for (int i = 0; i < PADDLE_HEIGHT + (2 * BALL_WIDTH); i++) {
              if (ballTop == (paddleOneTop - BALL_WIDTH + i)) {
                  return true;
              }
          }
          return false;
      }

      public boolean isHittingPaddleTwoVertical() {
          for (int i = 0; i < PADDLE_HEIGHT + (2 * BALL_WIDTH); i++) {
              if (ballTop == (paddleTwoTop - BALL_WIDTH + i)) {
                  return true;
              }
          }
          return false;
      }

      public boolean isHittingPaddleHorizontal() {
          for (int i = 0; i < 50; i++) {
              if ((ballLeft == paddleOneLeft + i) || (ballLeft == paddleTwoLeft + PADDLE_WIDTH - i)) { 
                  return true;
              }
          }
          return false;
      }

      public void robotControl() {
          paddleTwoTop = ballTop - 45;
      }

      public void gameOver() {
          paddleOneTop = 230;
          paddleTwoTop = 230;
          ballTop = 270;
          ballLeft = 490;
          ballSpeedHorizontal = (int)(Math.random()*2);
            if (ballSpeedHorizontal == 0) {
                ballSpeedHorizontal = -1;
            }
          ballSpeedVertical = (int)(Math.random()*6) - 3;
      }

      // ------------------- Event handling methods ----------------------

      public void focusGained(FocusEvent evt) {
         repaint();  // redraw with cyan border
      }

      public void focusLost(FocusEvent evt) {
         repaint();  // redraw without cyan border
      }

      public void keyTyped(KeyEvent evt) {

         char ch = evt.getKeyChar();  // The character typed.

      }  // end keyTyped()

      public void keyPressed(KeyEvent evt) { 

         int key = evt.getKeyCode();  // keyboard code for the pressed key

         timer.start();

         if (key == KeyEvent.VK_UP) {  // up arrow key
             paddleOneDirection = UP;
         }
         else if (key == KeyEvent.VK_DOWN) {  // down arrow key
             paddleOneDirection = DOWN;
         }
         else {
             paddleOneDirection = -1; // This prevents other keys from interfering with the paddle movement.
         }
         if (key == KeyEvent.VK_W) {
             paddleTwoDirection = UP;
         }
         else if (key == KeyEvent.VK_S) {
             paddleTwoDirection = DOWN;
         }
         else {
             paddleTwoDirection = -1;
         }

      if ((paddleOneTop > 1000 - PADDLE_HEIGHT))
          paddleOneTop = 1000 - PADDLE_HEIGHT;
      if (paddleTwoTop > 1000 - PADDLE_HEIGHT)
          paddleTwoTop = 1000 - PADDLE_HEIGHT;

      }  // end keyPressed()

      public void keyReleased(KeyEvent evt) {
          paddleOneDirection = -1;
          paddleTwoDirection = -1;
      }

      public void mousePressed(MouseEvent evt) {
         requestFocus();
      }   

      public void mouseEntered(MouseEvent evt) { }  // Required by the
      public void mouseExited(MouseEvent evt) { }   //    MouseListener
      public void mouseReleased(MouseEvent evt) { } //       interface.
      public void mouseClicked(MouseEvent evt) { }
      public void actionPerformed(ActionEvent evt) {

          switch (paddleOneDirection) {
          case UP:
              paddleOneTop -= paddleSpeed;
              break;
          case DOWN:
              paddleOneTop += paddleSpeed;
              break;
          }
          switch (paddleTwoDirection) {
          case UP:
              paddleTwoTop -= paddleSpeed;
              break;
          case DOWN:
              paddleTwoTop += paddleSpeed;
              break;
          }
          robotControl();
          moveBall();
          repaint();
      }
   } // end nested class ContentPanel

} // end class 
```

（代码有点乱，我很抱歉，我对 Java 和一般编程都很陌生。）

以下是我的问题：

1.  如何初始化默认`JFrame`显示内容？`JPanel`

2.  我如何开始创建一个`JPanel`可以切换的单独的？我的最终目标是当用户点击“首选项”时有一个单独的`JPanel`出现，然后能够在首选项`JPanel`和内容之间来回切换`JPanel`。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T06:53:34.440

在创建时初始化尽可能多的具有不同内容的面板`JFrame`并将它们放置在`CardLayout`. 必要时切换卡片以显示所需的面板。

# java - 从命令行启动时，Selenium 和 Chromedriver 不会相互通信

> ID：14495499
> 
> 赞同：2
> 
> 时间：2013-01-24T06:51:26.410
> 
> 标签：java, selenium-chromedriver

对于我们的集成测试，我们使用 selenium 和 Chrome、Firefox 和 IE 的不同（版本）驱动程序。我们的构建服务器上没有 UI（或 X），即无头。我们将 Xvfb 用于虚拟屏幕（帧缓冲区）。

如果我在具有 X（UI）的本地计算机上运行它，则不会出现错误。

我有一个足够简单的测试类：

```
import java.io.IOException;
import java.net.URL;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;

public class Test {

    public static void main(String[] args) throws IOException, InterruptedException {
        WebDriver driver = new RemoteWebDriver(new URL("http://localhost:9515"), DesiredCapabilities.chrome());
        driver.get("http://www.google.com");
        Thread.sleep(2000);
        driver.quit();
    } 
```

然后我在端口 9515 上启动 chromedriver。我得到的例外是：

```
abc@xyz:~/test$ java -cp $CLASSPATH Test

(google-chrome:22323): Gtk-WARNING **: cannot open display: 
[0124/165659:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
chrome/test/automation/proxy_launcher.cc:107: Failure
Value of: app_launched
  Actual: 5
Expected: AUTOMATION_SUCCESS
Which is: 0
Error while awaiting automation ping from browser process
[0124/165659:ERROR:automation_proxy.cc(319)] Channel error in AutomationProxy.
[0124/165659:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
[0124/165659:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
Exception in thread "main" org.openqa.selenium.WebDriverException: Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: /opt/google/chrome/google-chrome (WARNING: The server did not provide any stacktrace information); duration or timeout: 223 milliseconds
Build info: version: '2.9.0', revision: '14289', time: '2011-10-20 23:22:17'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.32-28-server', java.version: '1.6.0_26'
Driver info: driver.version: RemoteWebDriver
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:147)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:113)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:417)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:115)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:76)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:84)
    at Test.main(Test.java:63) 
```

我一直在广泛搜索并尝试了许多不同的方法。由于我已经尝试解决这个问题超过 2 天，我可能会忽略一个小细节。

我在用着：

```
$ uname -a
Linux bryant 2.6.32-28-server #55-Ubuntu SMP Mon Jan 10 23:57:16 UTC 2011 x86_64 GNU/Linux 
```

google-chrome-stable 24.0.1312.56-r177594 chromedriver_linux64_23.0.1240.0, chromedriver_linux64_26.0.1383.0

对此有什么想法吗？

# c# - c#如何从对象中获取结果字符串

> ID：14495505
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:52:05.593
> 
> 标签：c#, object, object-to-string

一些 c# 代码，如：

```
Array arr=Array.CreateInstance(typeof(oject),3);
bool b=true;
int i =2;
float[] foo={1.1f,2.2f};
arr.setValue(b,0);
arr.setValue(i,0);
arr.setValue(foo,0);
string str=GetParamStringFromArrayObject(arr.GetValue(3));

string GetParamStringFromArrayObject(object obj)
{
if(obj.GetType().IsArray)
{
int demesion=obj.GetType().GetRank();//error,how to get the demesion(should be 2)
return obj.ToString();//error,i want to return the string delimeter by ' ' of   the float array,how to do?
}
} 
```

如上面的代码，如果我想要对象中的字符串值是一个数组，我怎样才能得到它，以及如何获得数组对象的demesion？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:55:39.927

您必须将对象转换为数组，如下所示：

```
string GetParamStringFromArrayObject(object obj)
{
   Array array = obj as Array;
   if (array != null)
   {
       int demesion = array.Rank;
       // etc.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:57:28.490

```
if(obj is Array)
{
   int size = (obj as Array).Length; // get size
   string items = ""; // get string
   foreach (object item in obj as Array)
     items += item.ToString() + ",";
} 
```

# regex - Bash 正则表达式目录重命名

> ID：14495515
> 
> 赞同：0
> 
> 时间：2013-01-24T06:52:34.063
> 
> 标签：regex, bash

我有以下形式的目录

`*Var0.5Def1Min1, *Var0.5Def1Min2, ... , *Var0.5Def10Min100`

我只想将 Var0.5 的部分重**命名**为**Var0.50**

 **例子：
`*Var0.5Def1Min1 > *Var0.50Def1Min1`,
`*Var0.5Def10Min100 > *Var0.50Def10Min100`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:00:16.047

```
for i in *Var*; do mv $i ${i/Var0.5/Var0.50} ; done
Var0.50Def1Min1
Var0.50Def10Min100 
```

这是使用大括号扩展技术。

**例子：**

```
sgeorge-mn:stack sgeorge$ ls -l
total 0
drwxr-xr-x  2 sgeorge  eng  68 Jan 24 12:31 Var0.5Def10Min100
drwxr-xr-x  2 sgeorge  eng  68 Jan 24 12:30 Var0.5Def1Min1
sgeorge-mn:stack sgeorge$ for i in *Var*; do mv $i ${i/Var0.5/Var0.50} ; done
sgeorge-mn:stack sgeorge$ ls -l
total 0
drwxr-xr-x  2 sgeorge  eng  68 Jan 24 12:31 Var0.50Def10Min100
drwxr-xr-x  2 sgeorge  eng  68 Jan 24 12:30 Var0.50Def1Min1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:54:12.183

您应该尝试[rename](http://linux.die.net/man/1/rename)，它是 util-linux(-ng) 的一部分。**

# sqlite - 如何在sqlite3中清除cmd屏幕？

> ID：14495519
> 
> 赞同：4
> 
> 时间：2013-01-24T06:52:48.420
> 
> 标签：sqlite

我没有找到任何命令来清除 cmd 屏幕。我正在研究 SQLite。

任何可用于`sqlite3`说明这一点的命令。

cmd屏幕上有很多匆忙。

我试图通过`.help`命令找出来，但什么也没有。

我在 WINDOWS 上工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-24T18:51:33.500

当您编写时，`.shell`您可以编写任何`cmd`命令示例：`.shell cls`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:17:54.443

我得到了临时解决方案..

```
sqlite> press ctrl+d enter 
```

它会显示根

```
root@android:/ # 
```

再次

```
root@android:/ #  ctrl+d enter 
```

现在您将获得具有平台工具的驱动器路径。

这是这样的

`F:\AndroidSDK\android-sdk-windows\platform-tools>`cls 命令进入。

你会得到 cmd 屏幕清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:46:47.170

您可以尝试显示用于清除屏幕的转义序列 ( `Esc[2J`)：

```
SELECT CAST(x'1B5B324A' AS TEXT); 
```

这仅在您的终端解释 ANSI/VT100 转义序列时才有效，即在 Linux 中。

# javascript - 部分模式匹配时引用“*/”

> ID：14495524
> 
> 赞同：1
> 
> 时间：2013-01-24T06:53:13.553
> 
> 标签：javascript, regex, comments

有代码

```
obj.property.style.split( /\s*;\s*/ ).forEach( function(s) {... 
```

问题是`*/`模式中的 用作注释分隔符。

例如

```
/* comment this out please
obj.property.style.split( /\s*;\s*/ ).forEach( function(s) {..
OOPS - NOT commented out */ 
```

引用这个的习惯方式是`regexp`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:59:01.523

`*`限定符是 1 的快捷方式`{0,}`^，因此：

```
/\s*;\s{0,}/ 
```

但是，由于这使得它比平时稍微少一些，我真的会考虑不要用注释来注释掉代码`/* .. */`。

* * *

¹ [`{n,}`在 ECMAScript 5th Edition 中指定](http://es5.github.com/x15.10.html#x15.10.2.7)。但是，[MDC 仅列出`{n,m}`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:12:02.407

从[规格](http://es5.github.com/#x7.8.5)：

> 要指定一个空的正则表达式，请使用：`/(?:)/`

在你的情况下：`/\s*;\s*(?:)/`

`?:`防止括号捕获。如果您不关心捕获，则不妨使用`/\s*;\s*()/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:02:28.593

我假设您的代码如下所示：

```
obj.property.style.split( /\s*;\s*/ ).forEach(function(s) {
  ...very...
  ...long...
  ...implementation...
}); 
```

从另一个角度来看，与其对整个块进行块注释，不如将回调提取为一个独立的函数。这样，您只需要一行就`forEach()`可以安全地对其进行行注释。

```
function eachHandler(s) {
  ...very...
  ...long...
  ...implementation...
}

//you just prevented the forEach!
//obj.property.style.split( /\s*;\s*/ ).forEach(eachHandler); 
```

# html - 如何显示和隐藏文本框边框

> ID：14495525
> 
> 赞同：1
> 
> 时间：2013-01-24T06:53:15.010
> 
> 标签：html, css

在表中，我有 1 列，其中给出了文本框，以便用户可以根据需要在其中编辑文本，编辑的文本得到`onkeyup`正确保存，但我想隐藏文本框边框，或者我可以在编辑文本文本后说-box 不应该是可见的，只有编辑的文本应该是可见的，如果用户再次想要编辑，那么当用户再次点击文本时用户应该能够看到该文本框，像这样[我想要这样的文本框效果](http://www.unleashed-technologies.com/blog/2010/01/13/jquery-javascript-easy-edit-place-input-boxes-and-select-boxes)，而且我不想使用 jquery，我该怎么做

这是我的文本框代码

```
echo "<td ><input id={remark{$j}}  type=\"text\"  onkeyup=\"writeremark(this.id,{$data_set1['eid']},{$emprid});\" value=\"{$data_set1['remark']}\" /></td>"; 
```

### onkeyup 函数

```
function writeremark(e,eid,emprid) {
    var val=document.getElementById(e).value;
    var dataString = 'eid='+eid +'&emprid='+emprid +'&val='+val ;
    $.ajax({
        type:"POST",
        url: "updateremark.php",
        data: dataString,
        success: function(result){
      }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:06:53.587

要隐藏边框，您可以使用 Javascript。`onblur`event 是您所需要的，onblur 表示当您从该输入中移除焦点时，可以通过单击它外部，或者按 TAB 将焦点赋予另一个元素。

```
<input type="text" id="myInput" onblur="HideBorder()" onfocus="ShowBorder()" />

function HideBorder()
{
   var myInput = document.getElementById("myInput").style;
   myInput.borderStyle="none";
} 
```

然后当用户再次点击它时，您可以使用`onfocus`.

```
function ShowBorder()
{
   var myInput = document.getElementById("myInput").style;
   myInput.borderStyle="solid";
} 
```

**更新**

```
<input type="text" id="myInput" onblur="HideBorder(this.id)" onfocus="ShowBorder(this.id)" />

function HideBorder(id)
{
   var myInput = document.getElementById(id).style;
   myInput.borderStyle="none";
} 
```

正如**Fiona T**建议的那样，您可以在 CSS 中执行此操作（更好的解决方案）。

给你的输入一个类。

```
<input type="text" class="myInput" /> 
```

然后在 CSS 中：

```
.myInput
{
   border-style:none;
}
.myInput:hover
{
   border-style:solid;
}
.myInput:focus
{
   border-style:solid;
} 
```

但是，我建议您不要隐藏和显示边框，因为输入的大小可能会有所不同，从技术上讲，您正在删除边框，即 1px,2px,3px ...

所以改变颜色而不是那个，如果你的背景是白色的，那么......

```
.myInput
{
   border-color:#FFFFFF;
}
.myInput:hover
{
   border-color:#000000;
}
.myInput:focus
{
   border-color:#000000;
} 
```

# ruby-on-rails - Rails Rspec 和 capybara - 用于执行某种测试

> ID：14495526
> 
> 赞同：1
> 
> 时间：2013-01-24T06:53:19.587
> 
> 标签：ruby-on-rails, rspec, capybara

**检查页面底部的编辑**

我的老板有一个站点地图——它基本上只是每条路线作为一个链接，点击一个按钮，上面写着“有效？” 或“忽略”，它将在页面上标记为有效或忽略它。

他让我手动浏览并单击每个链接，测试该页面不是 500 或 404，如果不是，则将其标记为有效。

这对我来说似乎很愚蠢，因为它基本上只是面向用户的工作路线测试。

同时，我可以在 Rspec 中为所有这些写出路由规范，但我猜他想要一些文档，这些文档是在前端为他自己和用户发生的。

我在想一个有趣的方法来解决这个无聊的点击问题，那就是在编写规范的同时进行一些编程。让他高兴，也为可重复使用的应用程序增加了实际价值和测试。

有没有办法在规范中编写如下内容：

```
links = page.all('a.routing-links)
link.each do |link|
  link.click
  if page status != 404 || 500
    Link.find(id).update_attribute("verified", true)
  end 
end 
```

我尝试将其放入我的规范中，但是当 link.click 遇到不正确的路线时，它会停止测试（这是有道理的，因为该路线已损坏，这是一个测试。

我想要的是能够接受该错误并使用它来更新我的模型的属性。

我会完全错了吗？有更好的想法或灵感吗？

谢谢

**编辑**

我同意发帖人的观点，他说这最好留给脚本或 rake 任务。

我对如何编写将转到页面、查找每个链接、记录其 status_code、然后查找和更新模型的脚本有点迷茫。有什么建议或提示吗？理想情况下，它将在应用程序中运行，以便我可以访问我的模型和控制器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:46:54.157

就个人而言，我实际上不会将其放入规范中，因为您实际上并不期望任何事情会失败。

相反，我会创建一个快速脚本，甚至 rake 任务来运行您所描述的链接。

话虽如此，这篇文章：[http](http://agileleague.com/2012/12/rails-3-2-custom-error-pages-the-exceptions_app-and-testing-with-capybara/) ://agileleague.com/2012/12/rails-3-2-custom-error-pages-the-exceptions_app-and-testing-with-capybara/详细介绍了如何绕过正常失败在这些情况下，即：

在你的`config/environments/test.rb`

```
config.consider_all_requests_local = false
config.action_dispatch.show_exceptions = true 
```

尽管这会影响所有测试，但这很可能不是您想要的。

此外，您可能会在测试时立即发现一件小事 - 您需要在单击链接后重新访问列表页面，或者更确切地说依靠链接点击，您可以访问 href 而不是快一点。

```
links = page.all('a.routing-links')
link.each do |link|
  visit link[:href]
  if page.status != 404 || 500
    Link.find(id).update_attribute("verified", true)
  end 
end 
```

我还没有测试过，所以不确定它是否会那样工作，但你应该能够理解这个想法。

# c++ - MPI 未定义的对象引用

> ID：14495529
> 
> 赞同：0
> 
> 时间：2013-01-24T06:53:20.283
> 
> 标签：c++, c, fortran, mpi, fortran90

我正在尝试安装一个使用 MPI 的程序（Parallel Ice Sheet Model，或 PISM）。我一直遇到错误

```
libpismutil.so: undefined reference to `ompi_mpi_cxx_op_intercept'
libpismutil.so: undefined reference to `MPI::Datatype::Free()'
libpismutil.so: undefined reference to `MPI::Comm::Comm()'
libpismutil.so: undefined reference to `MPI::Win::Free()' 
```

链接 CXX 可执行文件时。我对为什么会发生这种情况感到有些困惑。找到所有 MPI 可执行文件和库所在的程序的配置。

在另一个线程中，有人建议这是由于使用 Fortran 或 C 构建 MPI 时的命名约定不同，但鉴于我两者都有`mpicc.mpich2`，`mpif90.mpich2`我`/usr/bin`认为这不会是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:26:50.477

经过一番惊吓，我找到了罪魁祸首。我尝试安装的程序使用了一个名为 PETSc 的科学计算库；PETSc 的标准安装不会生成 PISM 所需的共享对象文件，您必须明确告诉它生成它们。完成此操作后，PISM 已正确安装。

当然，由于 openmpi 的一些其他模糊错误，我无法运行它，但这是另一个线程的故事。

# c# - Javascript Plugin Noty 在按钮单击上不起作用

> ID：14495535
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:53:45.963
> 
> 标签：c#, javascript, jquery, asp.net, webforms

我对 JQuery 很陌生。我想在我的页面顶部实现 Stack Overflow 样式的通知。因此，就此而言，我从[NOTY](https://github.com/needim/noty)下载了一个 JQuery 插件 。我已经阅读了教程，但它没有解释如何正确实现这一点。我想要的只是在单击按钮时显示顶部通知。我已经导入了本教程中提到的所有 .js 文件，但不知道如何在单击按钮时显示该栏。

不仅仅是前面提到的 NOTY 插件，我不知道如何在按钮单击时使用 .js 文件来获取网络上可用的任何插件。

有人可以帮忙吗？

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
     <script src="../Scripts/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.noty.js" type="text/javascript"></script>
    <script src="../Scripts/top.js" type="text/javascript"></script>
</asp:Content> 
```

现在在按钮点击事件中写什么？

```
 protected void Button1_Click(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:13:17.393

您需要参考此[文档](http://needim.github.com/noty/) 以了解 noty 用法

在按钮上单击编写此代码

```
 var noty = noty({text: 'noty - a jquery notification library!'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:12:34.790

我在这里写了一些例子：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="jquery.noty.js"></script>
<script type="text/javascript" src="top.js"></script>
<script type="text/javascript" src="default.js"></script>
<script>
function myNoty()
{
    var n = noty({
        text: 'hello',
        type: 'success',
      dismissQueue: true,
        layout: 'top',
        theme: 'defaultTheme'
    })

}
</script>
</head>
<body>
    <input type="button" onclick="myNoty();" value="Click!"/>
</body>
</html> 
```

根据您的需要更改选项。

# c++ - 如何在类中初始化 const 成员变量？

> ID：14495536
> 
> 赞同：132
> 
> 时间：2013-01-24T06:53:46.130
> 
> 标签：c++, constants

```
#include <iostream>

using namespace std;
class T1
{
  const int t = 100;
  public:

  T1()
  {

    cout << "T1 constructor: " << t << endl;
  }
}; 
```

当我尝试`t`用 100 初始化 const 成员变量时。但它给了我以下错误：

```
test.cpp:21: error: ISO C++ forbids initialization of member ‘t’
test.cpp:21: error: making ‘t’ static 
```

如何初始化一个`const`值？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-01-24T07:22:23.787

`const`变量指定变量是否可修改。每次引用变量时都将使用分配的常量值。在程序执行期间不能修改分配的值。

Bjarne Stroustrup 的[解释](http://www.stroustrup.com/bs_faq2.html#in-class)简要总结了这一点：

> 一个类通常在头文件中声明，并且头文件通常包含在许多翻译单元中。但是，为了避免复杂的链接器规则，C++ 要求每个对象都有唯一的定义。如果 C++ 允许在类内定义需要作为对象存储在内存中的实体，则该规则将被打破。

变量必须在类`const`中声明，但不能在其中定义。我们需要在类之外定义 const 变量。

```
T1() : t( 100 ){} 
```

这里的赋值`t = 100`发生在初始化列表中，远在类初始化发生之前。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-24T06:56:31.420

好吧，你可以做到`static`：

```
static const int t = 100; 
```

或者您可以使用成员初始化程序：

```
T1() : t(100)
{
    // Other constructor stuff here
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-06-25T03:56:12.093

有几种方法可以初始化类中的 const 成员。

一般const成员的定义，也需要变量的初始化..

1）在类内部，如果你想初始化 const 语法是这样的

```
static const int a = 10; //at declaration 
```

2）第二种方式可以

```
class A
{
  static const int a; //declaration
};

const int A::a = 10; //defining the static member outside the class 
```

3）好吧，如果您不想在声明时初始化，那么另一种方法是通过构造函数，变量需要在初始化列表中进行初始化（而不是在构造函数的主体中）。它必须是这样的

```
class A
{
  const int b;
  A(int c) : b(c) {} //const member initialized in initialization list
}; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-06-03T20:52:05.947

如果您不想使`const`类中的数据成员静态，您可以`const`使用类的构造函数初始化数据成员。例如：

```
class Example{
      const int x;
    public:
      Example(int n);
};

Example::Example(int n):x(n){
} 
```

如果类中有多个`const`数据成员，您可以使用以下语法来初始化成员：

```
Example::Example(int n, int z):x(n),someOtherConstVariable(z){} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-01-24T06:57:29.387

1.  您可以升级您的编译器以支持 C++11，您的代码将完美运行。

2.  在构造函数中使用初始化列表。

    ```
    T1() : t( 100 )
    {
    } 
    ```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-18T10:46:02.553

另一种解决方案是

```
class T1
{
    enum
    {
        t = 100
    };

    public:
    T1();
}; 
```

所以 t 被初始化为 100 并且它不能被改变并且它是私有的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-01T04:35:14.953

如果一个成员是一个数组，它会比正常的稍微复杂一点：

```
class C
{
    static const int ARRAY[10];
 public:
    C() {}
};
const unsigned int C::ARRAY[10] = {0,1,2,3,4,5,6,7,8,9}; 
```

或者

```
int* a = new int[N];
// fill a

class C {
  const std::vector<int> v;
public:
  C():v(a, a+N) {}
}; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-12T18:27:14.483

另一种可能的方式是命名空间：

```
#include <iostream>

namespace mySpace {
   static const int T = 100; 
}

using namespace std;

class T1
{
   public:
   T1()
   {
       cout << "T1 constructor: " << mySpace::T << endl;
   }
}; 
```

缺点是其他类如果包含头文件也可以使用这些常量。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-11T11:52:08.270

这是正确的做法。你可以试试这段代码。

```
#include <iostream>

using namespace std;

class T1 {
    const int t;

    public:
        T1():t(100) {
            cout << "T1 constructor: " << t << endl;
        }
};

int main() {
    T1 obj;
    return 0;
} 
```

如果您正在使用，`C++10 Compiler or below`那么您不能在声明时初始化 cons 成员。所以这里必须让构造函数初始化 const 数据成员。还必须使用初始化列表`T1():t(100)`来即时获取内存。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-19T14:46:30.970

您可以添加`static`以使此类成员变量的初始化成为可能。

```
static const int i = 100; 
```

但是，这并不总是在类声明中使用的好习惯，因为从该类中实例化的所有对象都将共享相同的静态变量，该变量存储在实例化对象范围内存之外的内部内存中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-23T04:42:41.850

在 C++ 中，您不能在声明时直接初始化任何变量。为此，我们必须使用构造函数的概念。
见这个例子： -

```
#include <iostream>

using namespace std;

class A
{
    public:
  const int x;  

  A():x(0) //initializing the value of x to 0
  {
      //constructor
  }
};

int main()
{
    A a; //creating object
   cout << "Value of x:- " <<a.x<<endl; 

   return 0;
} 
```

希望对你有帮助！

# ember.js - Ember-data DS.Model.find() 似乎不起作用

> ID：14495537
> 
> 赞同：0
> 
> 时间：2013-01-24T06:53:49.337
> 
> 标签：ember.js

我在 peepcode.com 上购买了 Ember.js 的 play by play 并按照提供的视频进行跟踪。

所以，我在 Rails 中设置了模型、序列化器和控制器。

当我这样输入 URL 时。

```
http://localhost:3000/actors/wycats 
```

JSON 响应按我的预期呈现。（这可能是 Ember-data 期望的 JSON 形式……对吧？）

```
 {
   "actor": {
     "id": 1,
     "blog": "http://www.yehudakatz.com",
     "company": "Tilde, Inc.",
     "email": "wycats@gmail.com",
     "gravatar_id": "428167a3ec72235ba971162924492609",
     "location": "San Francisco",
     "login": "wycats",
     "name": "Yehuda Katz",
     "actor_type": "User"
   }
 } 
```

所以我在 ember.js 中设置了 Store 和 Actor Model

```
 GithubScore.Store = DS.Store.extend({
   revision: 11,
   adapter: "DS.RESTAdapter"
 });

 GithubScore.Actor = DS.Model.extend({
   login: DS.attr('string'),
   name: DS.attr('string'),
   gravatarId: DS.attr('string'),
   location: DS.attr('string'),
   blog: DS.attr('string')
 }); 
```

我启动了我的 Ember 应用程序，没有发生错误。

但是当我尝试使用控制台获取模型时（我已经在 Rails DB 中保存了一个 ID 为 1 的模型）

```
 GithubScore.Actor.find(1) 
```

它返回一个类，没有发生错误，但是当我尝试获取它的属性时。它只返回 null，尽管模型的状态为“isLoaded”

```
 GithubScore.Actor.find(1).get('isLoaded')
 => true

 GithubScore.Actor.find(1).get('blog')
 => null 
```

我发现当我第一次重复调用 GithubScore.Actor.find(1).get('isLoaded') 时，它只返回 false，但是当我尝试获取属性时，'isLoaded' 立即更改为 true。

```
 GithubScore.Actor.find(1).get('isLoaded')
 => false (for many times)

 GithubScore.Actor.find(1).get('blog')
 => null

 GithubScore.Actor.find(1).get('isLoaded')
 => true (immediately changed) 
```

当我尝试 .toJSON() 方法像视频一样建模时。它抛出一个错误。

```
 GithubScore.Actor.find(1).toJSON()
 => TypeError: Object <GithubScore.Actor:ember272:1> has no method 'toJSON' 
```

我好奇的一件事是，尽管 GithubScore.Store 对象是从 DS.Store 扩展而来的。

它没有 DS.store 已有的 find(type, id) 方法。

我找不到问题所在。你能给我一些帮助吗？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:50:27.233

尝试在模板中显示博客值并通过浏览器访问它。当您执行`GithubScore.Actor.find(1).get('blog')`它时，它会返回 null，因为 Ember 只是将一个对象作为 Promise 重新调整，同时仍在获取它的过程中。当您尝试在模板中显示值时，模板将绑定到该值，并在检索到该值后进行更新。

至于，显然这是一个错误，我在 RecordArray 上遇到了同样的问题，并且在[上一个](https://stackoverflow.com/questions/14456298/ember-data-knowing-when-a-recordarray-is-completely-populated)关于 stackoverflow 的问题以及其他人`isLoaded = true`的问题中也有报道。

# mysql - 在 Mysql Workbench 中设置外键

> ID：14495538
> 
> 赞同：2
> 
> 时间：2013-01-24T06:53:50.950
> 
> 标签：mysql, mysql-workbench

我正在尝试在 Mysql 工作台中设置外键。我为外键使用了与我试图与之建立关系的表的主键相同的名称。我已经在另一个表中以这种方式设置了一个关系，但是当我尝试将更改应用于此表时，脚本给了我一个错误：

> **错误 1005**：无法创建表“X.#sql-718_a”（错误号：121）

### SQL 语句：

```
ALTER TABLE `X`.`X_use`    
ADD CONSTRAINT `XyzID`   
FOREIGN KEY (`XyzID` )   REFERENCES `X`.`Xyz` (`XyzID` )   
ON DELETE NO ACTION   O
N UPDATE NO ACTION , 
ADD INDEX `XyzID` (`XyzID` ASC)  , 
```

但是，如果我将外键名称更改为“AbcID”，则设置外键关系没有问题。为什么会这样，为什么我不能让一个表中的主键名称与该表的外键相同？我之前已经建立了这样的关系，但对于这张桌子我不能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:10:20.517

约束名称在数据库中必须是唯一的。

错误消息中的那`(errno: 121)`意味着 MySQL 遇到了重复键异常。造成这种情况的通常原因是数据库中已经存在同名的约束。

这种“唯一名称”要求是规范模式在构造外键约束名称时包含表名的原因之一。例如 FK_table_cols 例如`FK_X_use_XyzID`。

为什么约束名称在数据库中必须是唯一的？这是 dbms 设计者的问题。

但是考虑一下：当数据库遇到约束冲突时，它会抛出一个包含约束名称的错误。当该约束名称仅引用数据库中的一个约束时，可以更轻松地定位问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:13:33.807

您不能在数据库中使用相同的约束名称，如 DB 的 ACID 属性中所述。

# ios6 - iPhone应用程序后台gps位置更新

> ID：14495539
> 
> 赞同：3
> 
> 时间：2013-01-24T06:53:59.763
> 
> 标签：ios6, xcode4.5, core-location

我正在创建一个 iPhone 应用程序，其中 AI 必须在重大变化期间更新位置。为此，我使用了“[locationManager startMonitoringSignificantLocationChanges]”。我还必须在应用程序处于后台期间更新位置。因此，我在 info.plist 中将所需的后台模式指定为“应用程序注册位置更新”。 **我的疑问是：** 在使用 startMonitoringSignificantLocationChanges 时，是否有必要在 info.plist 中提供它以进行后台注册？

如果任何人有想法，请帮助我......提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:07:39.497

重大的位置更改将自动在后台启动您的应用程序，而无需使用所需的后台模式键。仅当您连续监控位置时，才需要所需的后台模式，例如街道导航轮流应用程序。

**编辑**：这在[Location Awareness Programming Guide](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW7)中有介绍，值得一读：

> 首选选项是使用重大位置更改服务在适当的时间唤醒您的应用程序以处理新事件。但是，如果您的应用需要使用标准位置服务，您可以将您的应用声明为需要后台位置服务。

因此，如果您正在使用重要的位置更改服务，它将被唤醒并且您不需要后台模式键。如果您使用标准位置服务并且必须在后台运行，那么您需要后台模式键“位置”。

# mongodb - 为什么MongoDB存储量不断增加？

> ID：14495544
> 
> 赞同：0
> 
> 时间：2013-01-24T06:54:24.407
> 
> 标签：mongodb

我有一个单主机数据库，在我不看的时候它增长了 95% 的磁盘空间。为了纠正这种情况，我创建了一个自动从最大集合中删除旧记录的进程，因此数据使用量下降到磁盘空间的 40% 左右。我认为只要数据大小不增长到接近预分配文件的大小我是安全的，但一周后我被证明是错误的：

```
Wed Jan 23 18:19:22 [FileAllocator] allocating new datafile /var/lib/mongodb/xxx.101, filling with zeroes...
Wed Jan 23 18:25:11 [FileAllocator] done allocating datafile /var/lib/mongodb/xxx.101, size: 2047MB,  took 347.8 secs
Wed Jan 23 18:25:14 [conn4243] serverStatus was very slow: { after basic: 0, middle of mem: 590, after mem: 590, after connections: 590, after extra info: 970, after counters: 970, after repl: 970, after asserts: 970, after dur: 1800, at end: 1800 } 
```

这是`db.stats()`: 的输出（请注意，由于比例，数字以**MB为单位）**

```
> db.stats(1024*1024)
{
    "db" : "xxx",
    "collections" : 47,
    "objects" : 189307130,
    "avgObjSize" : 509.94713418348266,
    "dataSize" : 92064,
    "storageSize" : 131763,
    "numExtents" : 257,
    "indexes" : 78,
    "indexSize" : 29078,
    "fileSize" : 200543,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

**问题：**如何阻止 MongoDB 分配新的数据文件？

运行`repair`很困难，因为我必须安装新磁盘。跑步`compact`有用吗？如果是，我应该定期运行它吗？我怎么知道我应该什么时候运行它？

**更新：**我想我在这里遗漏了一些基本的东西......有人可以详细说明数据文件、范围、集合和数据库之间的连接，以及在需要时如何分配空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:09:59.877

1.  升级到 2.2.2 - 2.2.0 在复制中存在幂等性错误，不再推荐用于生产。
2.  有关一般信息，请参见此处[http://docs.mongodb.org/manual/faq/storage/#faq-disk-size](http://docs.mongodb.org/manual/faq/storage/#faq-disk-size)
3.  从 mongodb 恢复空间的唯一方法是通过网络同步一个新节点 - 在这种情况下，文档将通过新文件系统复制并重新存储而不会产生碎片。或者使用修复命令 - 但为此，您需要将您在磁盘上使用的磁盘空间增加一倍。数据文件被复制、碎片整理和压缩，然后复制回原始文件。compact 命令命名错误，只能进行碎片整理 - 它不会从 mongo 恢复磁盘空间。
4.  展望未来，使用 usePowerOf2Sizes 命令（2.2.x 中的新功能）[http://docs.mongodb.org/manual/reference/command/collMod/](http://docs.mongodb.org/manual/reference/command/collMod/) 如果您使用该命令并分配一个 800 字节的文档，则将分配 1024 个字节磁盘。如果您随后删除该文档并插入一个新文档（例如 900 字节），则该文档可以容纳 1024 字节空间。如果不启用此选项，则 800 字节的文档在磁盘上可能只有 850 字节 - 所以当它被删除并插入 900 字节的文档时，必须分配新空间。如果然后将其删除，您最终将得到两个可用空间 - 850 字节和 950 字节，它们永远不会连接（除非使用压缩或修复） - 然后插入一个 1000 字节的文档，您需要分配*另*一块磁盘。usePowerOf2Sizes 通过使用标准存储桶大小对这种情况有很大帮助。

# javascript - 在 mongoose 之上创建一个额外的数据访问层

> ID：14495548
> 
> 赞同：3
> 
> 时间：2013-01-24T06:54:42.203
> 
> 标签：javascript, node.js, mongodb, mongoose

对于我的`node.js`应用程序，我将`mongodb`其用作数据库。我也更喜欢`mongoose.js`在它上面使用。我的问题是，

> 在上面构建一个额外的层`mongoose.js` 以访问数据是否合理？喜欢`CRUD operations`?

就像一个通用函数集，它完全可以做什么`mongoose`，并限制编码人员直接编写`mongoose`查询，并且可能在稍后我们更改 db 或`mongoose`. 我问这个是因为我看不出这在后期会有多大效果，但现在看起来很烦人。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:21:50.263

很难明确回答，但我倾向于拥有这个“额外”层以便于测试。例如，更容易单独测试类/文件。如果您希望能够在某个时候重构另一个数据存储，这也很有用。

# c++ - Qt 5 中的简单 GUI 应用程序崩溃

> ID：14495549
> 
> 赞同：0
> 
> 时间：2013-01-24T06:54:55.823
> 
> 标签：c++, qt, qt5

下载并安装 Qt 5 后，我打开 Qt creator 2.6.1 并创建了一个新的简单 GUI 应用程序。但是当我尝试运行它时，我收到以下错误：

> C:\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore\qglobal.h:46：错误：C1083：无法打开包含文件：'stddef.h'：没有这样的文件或目录

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:46:22.607

您需要安装 Windows 平台 SDK。

顺便说一句：您使用了错误的术语（我假设）。您的应用程序没有崩溃它拒绝编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:32:46.597

希望这可能会有所帮助（此处讨论的类似问题）：

[http://qt-project.org/forums/viewthread/10255](http://qt-project.org/forums/viewthread/10255)

# javascript - 三元运算符的函数声明

> ID：14495559
> 
> 赞同：0
> 
> 时间：2013-01-24T06:55:54.827
> 
> 标签：javascript, function, operators, ternary-operator, function-declaration

是否可以使用三元运算符来声明函数名？

```
var foo,
    bar = 'bar';

(foo || bar) = function(){ // Invalid left-hand side in assignment [Bad assignment]
    alert(true);
};

[foo || bar] = function(){ // Invalid left-hand side in assignment [Bad assignment]
    alert(true);
};

(foo ? foo : bar) = function(){ // Invalid left-hand side in assignment [Bad assignment]
    alert(true);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:00:36.610

```
this[foo || bar] = function(){alert(true)} 
```

问题是，如果`bar`等于“bar”，你将用一个函数覆盖自己......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:00:58.573

你真正想要的是这样的东西吗？

```
window[foo ? foo : bar] = function (){
    alert(true);
}; 
```

请注意，“窗口”在某些环境中不可用，尽管所有浏览器都应该有它。

# html - 在保持href块的同时用双线垂直居中导航列表？

> ID：14495563
> 
> 赞同：0
> 
> 时间：2013-01-24T06:56:03.547
> 
> 标签：html, css, navigation

所以我有一个基本的导航列表栏。但是，有些项目有两行文本。

我想垂直对齐：居中文本，同时仍然能够悬停并单击列表块。

HTML：

```
<div class="nav">
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="/">Some Text</a></li> 
    <li><a href="/">Double<br>Line</a></li> 
    <li><a href="/">Something</a></li>  
</ul>
</div> 
```

CSS：

```
.nav li {
    float: left;
}

.nav a {
    background: #000;
    display: block;
    padding: 10px;
    text-decoration: none;
    border-right: 2px solid #fff;
    font-size: 14px;
    text-align: center;
    color: #fff;
}
.nav a:hover {
    background: yellow;
    color: #000;
} 
```

这可能最好地解释它：http: [//jsfiddle.net/ZmpXM/](http://jsfiddle.net/ZmpXM/)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:00:13.973

它不是动态的，但您可以通过添加

```
height: 34px;
display: table-cell;
vertical-align: middle; 
```

适合你的`.nav a`风格

[http://jsfiddle.net/ZmpXM/1/](http://jsfiddle.net/ZmpXM/1/)

# c# - 如何在 Silverlight 中对 Xml 中的字符串进行硬编码

> ID：14495569
> 
> 赞同：0
> 
> 时间：2013-01-24T06:56:24.637
> 
> 标签：c#, xml, silverlight

我是 Silverlight 中 xml 的新手。我在下面有一个小的 xml 文件

```
<FlowActivities>

 <SequenceFlow >

  <FlowWriteLine>

         hiiii

  </FlowWriteLine>

 </SequenceFlow>

</FlowActivities> 
```

在这个我想在rootnode.like中硬编码一些命名空间

```
<FlowActivities x:Class="WorkflowConsoleApplication1.modify" 
      xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" 
      mc:Ignorable="sap2010"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      sap2010:ExpressionActivityEditor.ExpressionActivityEditor="C#"
      xmlns:sap2010="http://schemas.microsoft.com/netfx/2010/xaml/activities/presentation"
      xmlns:sco="clr-namespace:System.Collections.ObjectModel;assembly=mscorlib"   
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

 <SequenceFlow >

  <FlowWriteLine>

         hiiii

  </FlowWriteLine>

 </SequenceFlow>

</FlowActivities> 
```

为了得到这个我必须做的事情..？请解决这个问题..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:10:34.823

You can't. You have to set the variable like JoanComasFdz said. If you must use the same format, you can create a separate class(viewmodel) for eg. MyXMLData.cs to read and parse xml file. Read the XML node and set the class variable "theString" from this class. In XAML, you can create an instance of the class in the resources section and set the data context of the Grid or the textbox to that object.

```
<UserControl
    x:Class="Test_SL_HardcodeString.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:system="clr-namespace:System;assembly=mscorlib" mc:Ignorable="d"
    xmlns:viewmodel="clr-namespace:MyNameSpace.ViewModels"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <UserControl.Resources>
        <viewmodel:MyXMLData x:key="myxmldataclass"/>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White" DataContext="{StaticResource myxmldataclass}" >
        <TextBox Text="{StaticResource theString}"/>
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:49:15.307

**XAML 不是当前的 XML 文件**，是一种基于 XML 的语言。因此，您不能编写随机的、不存在的 XML 标记。

在 SL XAML 文件中硬编码字符串：

```
<UserControl
    x:Class="Test_SL_HardcodeString.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:system="clr-namespace:System;assembly=mscorlib" mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <UserControl.Resources>
        <system:String x:Key="myString">This is a test string</system:String>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <TextBox Text="{StaticResource myString}"/>
    </Grid>
</UserControl> 
```

# ios - 从 iOS 相机获取亮度

> ID：14495573
> 
> 赞同：0
> 
> 时间：2013-01-24T06:56:33.137
> 
> 标签：ios, camera, average, brightness

我想从相机获取亮度，我已经检查了解决方案（计算平均亮度） [从 iOS 相机获取亮度](http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera)

但是相机会自动设置曝光，所以如果将相机转向光源（例如灯泡），那么在第一次亮度非常高，但过一段时间这个值会变低，因为曝光设置被改变了。我已经测试过锁定曝光，但这不是一个好的解决方案，因为如果在来自相机的图像较暗时锁定曝光，那么很少的光源被视为非常高的价值。有什么方法可以获得亮度的绝对值吗？我检查了应用程序光检测器，这个应用程序运行良好，曝光改变，但亮度值稳定。

问候亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-19T09:32:38.193

你知道如何创建一个自定义 Core Image 过滤器来返回 CIKernel（或 CIColorKernel）对象的输出吗？如果没有，你应该；而且，我很乐意为您提供易于理解的说明。

假设你这样做了，这里的 OpenGL ES 代码将只返回它处理的图像的亮度值：

```
vec4 rgb2hsl(vec4 color)
{
    //Compute min and max component values
    float MAX = max(color.r, max(color.g, color.b));
    float MIN = min(color.r, min(color.g, color.b));

    //Make sure MAX > MIN to avoid division by zero later
    MAX = max(MIN + 1e-6, MAX);

    //Compute luminosity
    float l = (MIN + MAX) / 2.0;

    //Compute saturation
    float s = (l < 0.5 ? (MAX - MIN) / (MIN + MAX) : (MAX - MIN) / (2.0 - MAX - MIN));

    //Compute hue
    float h = (MAX == color.r ? (color.g - color.b) / (MAX - MIN) : (MAX == color.g ? 2.0 + (color.b - color.r) / (MAX - MIN) : 4.0 + (color.r - color.g) / (MAX - MIN)));
    h /= 6.0;
    h = (h < 0.0 ? 1.0 + h : h);

    return vec4(h, s, l, color.a);
}

kernel vec4 hsl(sampler image)
{
    //Get pixel from image (assume its alpha is 1.0 and don't unpremultiply)
    vec4 pixel = unpremultiply(sample(image, samplerCoord(image)));

    //Convert to HSL; only display luminance value
    return premultiply(vec4(vec3(rgb2hsl(pixel).b), 1.0));
} 
```

以上是苹果开发者原创的OpenGL ES代码；我将其修改为仅显示亮度值。

# c# - WPF ColorPicker 从 wpf/xaml/toolkit 绑定到属性错误

> ID：14495581
> 
> 赞同：0
> 
> 时间：2013-01-24T06:57:05.543
> 
> 标签：c#, wpf, binding

我有一些颜色选择器的代码：

```
<xctk:ColorPicker Grid.Row ="10" Grid.ColumnSpan="2" Margin="5, 5, 5, 5" Height="30" DisplayColorAndName="True"
                          SelectedColor="{Binding SelectedItem.TransparentColor, ElementName=ItemsListBox, Converter={StaticResource BrushColorConverter}, Mode=TwoWay}"/> 
```

这些东西在绑定到 ElementName=Window 和 Path=Background 时有效，但是当我使用属性 System.Windows.Media.Color 创建对象时，它显示

```
Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=SelectedItem.TransparentColor; DataItem='ListBox' (Name='ItemsListBox'); target element is 'ColorPicker' (Name=''); target property is 'SelectedColor' (type 'Color') 
```

属性 TransparentColor 是新对象（ new System.Windows.Media.Color() ）......我应该怎么做才能让它工作？

其他的东西，比如：

```
<TextBox Grid.Column="7" Text="{Binding SelectedItem.ForbiddenArea.Height, ElementName=ItemsListBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

作品...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:25:21.610

这很容易解决：首先我从 System.Windows.Media 声明了可为空的颜色

```
Color? TransparentColor { get; set; } 
```

并且在没有转换器的情况下绑定到这个属性：

```
<xctk:ColorPicker Grid.Row ="12" Grid.ColumnSpan="2" Height="30" DisplayColorAndName="True"
                          SelectedColor="{Binding TransparentColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          IsEnabled="{Binding ElementName=GlobalTransparencyFlag, Path=IsChecked}"/> 
```

# sql-server - 无法在sql server 2005的sql查询中调用用户定义的函数

> ID：14495585
> 
> 赞同：0
> 
> 时间：2013-01-24T06:57:14.353
> 
> 标签：sql-server

我无法在 sql server 的 sql 查询中调用用户定义的函数。

我的 qyery 是

```
SELECT Empnum(delimeter_test) as del FROM FNSPLIT_TEST WHERE Len(delimeter_test) >1 
```

我的功能是

```
ALTER FUNCTION [dbo].[Empnum] (@RAWDATA NVARCHAR(300))
RETURNS VARCHAR(30)
AS
BEGIN 
DECLARE @TEMP1 NVARCHAR(300)
--DECLARE @TEMP2
IF(CHARINDEX('Disabled',@RAWDATA,1)) <> 0
BEGIN
    DECLARE SPLITTEXT CURSOR FOR 
    SELECT [item] FROM fnSplit(@RAWDATA,',')
--  SET @TEMP1=dbo.fnSplit(@RAWDATA,',')
    OPEN SPLITTEXT
    FETCH SPLITTEXT INTO @TEMP1
    CLOSE SPLITTEXT
    DEALLOCATE SPLITTEXT
--  INSERT INTO @EMPNUM1 SELECT @TEMP1
--  SET @TEMP1=dbo.fnSplit(@RAWDATA,',')
END
RETURN @TEMP1
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:59:24.877

出于某种原因， **UDF**需要架构名称：

```
SELECT dbo.Empnum(delimeter_test) as del FROM FNSPLIT_TEST WHERE Len(delimeter_test) > 1 
```

此外，这是一种在没有光标的情况下连接文本字符串的方法：

[将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

# session - kohana 3.2 出现错误的会话问题

> ID：14495587
> 
> 赞同：0
> 
> 时间：2013-01-24T06:57:24.493
> 
> 标签：session, kohana

案子：

当使用来自 2 个不同设备的 kohana 驱动站点时，我随机获取每个设备上的两个会话数据。我正在使用本机会话来存储少量对象，但它们在每台设备上都应该是私有的。我究竟做错了什么？

例如：

```
public function load()
{

    $session = Session::instance();
    $this->dialog = $session->get('dialog');

}

public function save()
{
    $session = Session::instance();
    $session->set('dialog', $this->dialog);
} 
```

它看起来像某种缓存问题。我每次都尝试重新生成会话ID。我有第一个 id，然后是第二个，然后是第三个，当我点击一个链接时，我又得到了第一个 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:28:37.533

确保在引导文件中关闭缓存。并且 cookie 变量设置正确，尤其是`Cookie::$domain`.

还要验证您的会话配置文件。您可以在这里找到更多信息：http: [//kohanaframework.org/3.2/guide/kohana/sessions](http://kohanaframework.org/3.2/guide/kohana/sessions)

# javascript - 什么是跨域请求/跨域攻击/跨域协议

> ID：14495595
> 
> 赞同：9
> 
> 时间：2013-01-24T06:57:57.190
> 
> 标签：javascript, ajax

关于ajax术语，有人可以解释什么是跨域请求/跨域攻击/跨域协议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T07:03:43.837

跨域请求：从另一个主机请求内容，而不是托管网站的位置。例如，在 google 托管的网站会从 facebook 域加载一个 facebook 图标。

跨域攻击：我认为关于这些的书有很多，但基本上：发出请求的域无法验证从另一个主机检索到的内容，因此可以对其进行修改。其他通常是从另一个域发送登录表单或其他表单，而不是实际的登录页面。设计不良的界面可能会让您登录或检索敏感数据。

我不确定 Ajax 协议。

# jquery - 每个中的 jQuery(this) 只获取最后一个值

> ID：14495596
> 
> 赞同：0
> 
> 时间：2013-01-24T06:58:03.450
> 
> 标签：jquery, wordpress, scope, each

我有这段代码，变量*toto*在数组的每个单元格中具有相同的值（其他线程说范围问题，但我使用**`var titi=jQuery(this).text();`**和`titi=jQuery(this).text();`

# HTML

```
<table name='xnnjz'><tr><td>1</td><td>2</td><td>3</td></tr></table> 
```

# JavaScript

```
var i=0;
jQuery("table['name=xnnjz'] tr.child-of-application"+indep+" td").each(function () {
    var titi=jQuery(this).text();
    toto[i]=titi;
    i=i+1;
});
console.log(toto); 
```

在控制台日志中：

```
toto=[3,3,3] 
```

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:02:05.403

您必须在每个外部定义数组才能在每个外部访问它，还要修改您的选择器，因为我看不到任何类`child-of-application`

**[现场演示](http://jsfiddle.net/qVeRg/1/)**

```
var i = 0;
var toto = [];
jQuery("table[name=xnnjz] td").each(function() {
    var titi = jQuery(this).text();
    toto[i] = titi;
    i = i + 1;
}); 
```

以上的简化版

**[现场演示](http://jsfiddle.net/qVeRg/2/)**

```
var toto = [];
jQuery("table[name=xnnjz] td").each(function(idx, item) {    
    toto[idx] = $(item).text();  
}); 
```

您还可以使用 jQuery map()

**[现场演示](http://jsfiddle.net/qVeRg/)**

```
var toto = jQuery("table[name=xnnjz] td").map(function () {
    return jQuery(this).text();    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:11:52.110

看到你的问题在这里：

```
jQuery("table['name=xnnjz'] tr.child-of-application"+indep+" td").each(function
 //-----------^----------^---Either remove it or do it like this below

jQuery("table[name='xnnjz'] td").each(function 
```

# visual-studio-2010 - 翻转位图后正确释放资源

> ID：14495601
> 
> 赞同：0
> 
> 时间：2013-01-24T06:58:26.287
> 
> 标签：visual-studio-2010, visual-c++, mfc

我有一个将非常大的数据集写入位图的应用程序。[~500MB] 我正在从上到下明智地编写数据补丁。由于 BMP 文件结构的性质，一旦写入磁盘就必须翻转。（我这样写是因为我认为翻转位图是一个常见的应用程序，我会找到库来完成这项任务）

我正在使用在互联网上找到的代码片段来翻转位图。这个：

```
// GetInvertedBitmap    - Creates a new bitmap with the inverted image
// Returns      - Handle to a new bitmap with inverted image
// hBitmap      - Bitmap to invert
// bLateral     - Flag to indicate whether to invert laterally or vertically

HBITMAP CRisatImport::GetInvertedBitmap( HBITMAP hBitmap, BOOL bLateral )
{
    // Create a memory DC compatible with the display
    CDC sourceDC, destDC;
    sourceDC.CreateCompatibleDC( NULL );
    destDC.CreateCompatibleDC( NULL );
    // Get logical coordinates
    BITMAP bm;
    ::GetObject( hBitmap, sizeof( bm ), &bm );
    // Create a bitmap to hold the result
    HBITMAP hbmResult = ::CreateCompatibleBitmap(CClientDC(NULL), 
                        bm.bmWidth, bm.bmHeight);
    // Select bitmaps into the DCs
    HBITMAP hbmOldSource = (HBITMAP)::SelectObject( sourceDC.m_hDC, hBitmap );
    HBITMAP hbmOldDest = (HBITMAP)::SelectObject( destDC.m_hDC, hbmResult );
    if( bLateral )
        destDC.StretchBlt( 0, 0, bm.bmWidth, bm.bmHeight, &sourceDC, 
                bm.bmWidth-1, 0, -bm.bmWidth, bm.bmHeight, SRCCOPY );
    else
        destDC.StretchBlt( 0, 0, bm.bmWidth, bm.bmHeight, &sourceDC, 
                0, bm.bmHeight-1, bm.bmWidth, -bm.bmHeight, SRCCOPY );
    // Reselect the old bitmaps
    ::SelectObject( sourceDC.m_hDC, hbmOldSource );
    ::SelectObject( destDC.m_hDC, hbmOldDest );
    return hbmResult;
} 
```

问题是我对上述代码的理解有限。我试图从 MSDN 的示例代码中尽可能地编写一个函数来使用上面的代码片段。我认为我没有正确释放所有资源。而且我似乎无法弄清楚错误 - 主要是因为我对 GDI 缺乏了解。如果有人指出我做错了什么，我将不胜感激。

如果我尝试调用这个函数两次，程序就会崩溃——这就是为什么我怀疑我错误地释放了资源。

这是我写的函数：

```
void CRisatImport::flipBitMapSaveAsJPG( CString outputFileName, CString outputJPGName, bool saveAsJpg)
{
    // Flip the bitmap to correct odd file structure
        HBITMAP hBitmap;
        hBitmap = (HBITMAP)::LoadImage(NULL, outputFileName, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
        hBitmap = GetInvertedBitmap( hBitmap, FALSE );
        CImage image;
        image.Attach(hBitmap);

        image.Save(outputFileName,Gdiplus::ImageFormatBMP);
        if(saveAsJpg){
        image.Save(outputJPGName,Gdiplus::ImageFormatJPEG);
        }

             image.Destroy();

        DeleteObject( hBitmap );
} 
```

我正在为这个应用程序使用 MFC 和 VS2010 - 我有 4GB 的 RAM 并且没有其他应用程序正在运行。

这是我得到的错误：

[![错误](../Images/cb2f1c98980b676483b51a593f114d59.png)](https://i.stack.imgur.com/uJkA8.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:27:29.830

当您将位图句柄附加到 CImage 时，您将句柄生命周期的责任移交给 CImage，因此您不想在之后破坏它。但是您也为新位图使用相同的变量名。试试这个：

```
void CRisatImport::flipBitMapSaveAsJPG( CString outputFileName, CString outputJPGName, bool saveAsJpg)
{
    // Flip the bitmap to correct odd file structure
        HBITMAP hBitmapLoad = (HBITMAP)::LoadImage(NULL, outputFileName, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
        HBITMAP hBitmapInverted = GetInvertedBitmap( hBitmapLoad , FALSE );
        DeleteObject( hBitmapLoad );

        CImage image;
        image.Attach(hBitmapInverted );

        image.Save(outputFileName,Gdiplus::ImageFormatBMP);
        if(saveAsJpg){
            image.Save(outputJPGName,Gdiplus::ImageFormatJPEG);
        }

        image.Destroy();

} 
```

# python - 如何在python中创建一个枢轴嵌套字典

> ID：14495602
> 
> 赞同：3
> 
> 时间：2013-01-24T06:58:42.450
> 
> 标签：python, dictionary, nested, pivot

> **可能重复：**
> [反转嵌套字典的 Pythonic 方式](https://stackoverflow.com/questions/2273691/pythonic-way-to-reverse-nested-dictionaries)

我很难找到解决这个嵌套字典问题的方法。我发现了一些可以使用的 itertools 函数，但我不清楚如何使用它。在这方面的任何帮助都会很棒

```
input = { "a" : { "x": 1, "y": 2 },
          "b" : { "x": 3, "z": 4 } }

output = {'y': {'a': 2},
          'x': {'a': 1, 'b': 3},
          'z': {'b': 4} } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:13:10.640

一种简单的方式使用`dict.setdefault`：

```
i = { "a" : { "x": 1, "y": 2 },
      "b" : { "x": 3, "z": 4 } }

d = {}
for key, value in i.iteritems():    
    for ikey, ivalue in value.iteritems():
        d.setdefault(ikey,{})[key] = ivalue
print d 
```

出去：

```
{'x': {'a': 1, 'b': 3}, 'y': {'a': 2}, 'z': {'b': 4}} 
```

# c# - Datatable.Select 带有一些 sql 函数的排序表达式

> ID：14495603
> 
> 赞同：0
> 
> 时间：2013-01-24T06:58:44.213
> 
> 标签：c#, sorting, datatable

我想在 Datatable.Select 的排序表达式中使用一些函数。
我试试这个-

```
string strSelect="";
///Some code
string strSort="RIGHT(TESTID,2) DESC,SUBSTRING (TESTID,3,5) DESC, TESTDATE DESC";
dtOld.Select(strSelect,strSort ); 
```

但是，我认为在排序表达式中使用 sql 函数（例如 SUBSTRING）有问题。那么，如何通过这种排序表达式对我的数据表进行排序？可能吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:25:11.063

```
string strSelect="RIGHT(TESTID,2) AS T1, SUBSTRING(TESTID,3,5) AS T2";
///Some code
string strSort="T1 DESC, T2 DESC, TESTDATE DESC";
dtOld.Select(strSelect, strSort); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:11:13.963

您收到任何错误消息吗？

不确定是否会这样做，但您在 SUBSTRING 之后有一个空格，应该是 SUBSTRING(...,,)。

我在下面测试了 mysql 和 SQL server 2012，它可以工作：

```
SELECT SUBSTRING('AAA BBBCCC',3,5);

Result: A BBB 
```

# iphone - 如何获取当前日期的特定时间？

> ID：14495606
> 
> 赞同：-2
> 
> 时间：2013-01-24T06:59:05.157
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

> **可能重复：**
> [如何将 1 天添加到 NSDate？](https://stackoverflow.com/questions/5067785/how-do-i-add-1-day-to-a-nsdate)

我不想在中添加时间（上午 10 点）`NSDate`

在`string`我得到这样的数据：

```
10:00 AM 
```

我想将此时间转换`string`为`NSDate`当前日期。

在`NSDate`我不想像这样的数据`2013-01-24 10:00:00 +0000`

我想要这个数据在`NSDate`.

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:03:48.863

```
 NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];

        [dateFormatter setDateFormat:@"hh:mm a"];

        NSDate *date = [dateFormatter dateFromString:@"10:00 AM"]; 
```

# image - 如何创建 .mat 文件来存储多个图像及其直方图。

> ID：14495610
> 
> 赞同：0
> 
> 时间：2013-01-24T06:59:23.927
> 
> 标签：image, image-processing

我是 matlab 新手，如果有人能指导我了解 .MAT 文件，我将不胜感激。我正在做一个图像检索系统，它需要一个包含 1000 个图像的数据库。目前，我有一个 .mat 文件，其中包含 100 张图像的训练数据，但我想将其增加到 1000 张图像。如何编辑 .mat 文件或如何创建可以存储 1000 张图像及其直方图的 .MAT 文件。非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:04:40.703

我不建议在一个 mat 文件中包含 1000 张图像和直方图。Matlab 在处理大型 mat 文件（+500Mb 左右）方面非常糟糕。保存时经常崩溃，至少这是我的经验。相反，将一张图像和直方图保存在一个 mat 文件中，将它们放在一个文件夹中，并为文件指定一些有意义的名称，以便您可以通过编程再次找到它们。`ls`(Linux) 和`dir`(windows) 在 Matlab 中工作正常，并返回目录列表供您以某种方式使用或解析。

此外，对于不必加载所有图像的情况，您将获得很好的加速。

问候

# scala - 从字符串中删除多种字符类型

> ID：14495613
> 
> 赞同：16
> 
> 时间：2013-01-24T06:59:31.880
> 
> 标签：scala

这是从字符串中删除多种字符类型的可接受方法还是有更好（更有效的方法）？考虑到每个角色都会这样做，这`"ilr".contains(_)`有点像作弊，但话又说回来，也许这是正确的方法。有没有更快或更有效的方法来做到这一点？

```
val sentence = "Twinkle twinkle little star, oh I wander what you are"

val words = sentence.filter(!"ilr".contains(_))   

// Result: "Twnke twnke tte sta, oh I wande what you ae" 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-24T07:50:09.673

我只是使用 Java 的旧`replaceAll`版本（它需要一个正则表达式）：

```
"Twinkle twinkle little star, oh I wander what you are" replaceAll ("[ilr]", "")
// res0: String = Twnke twnke tte sta, oh I wande what you ae 
```

与使用`char`s （如过滤 a `Seq[Char]`）相比，使用正则表达式应该是 Unicode 安全的，即使您使用的是基本多语言平面之外的代码点。[“没有纯文本这样的东西。”](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-24T07:02:30.180

不会有显着差异，因为只有 3 个字符要删除，而且没有那么大的字符串要过滤，但您可以考虑使用 Set 来达到此目的。例如

```
val toRemove = "ilr".toSet
val words = sentence.filterNot(toRemove) 
```

# javascript - 如何使用 javascript 在 Jira 5.1.8 的问题链接弹出窗口中隐藏某些问题链接类型？

> ID：14495618
> 
> 赞同：1
> 
> 时间：2013-01-24T06:59:45.973
> 
> 标签：javascript, jira

我想使用 java 脚本从链接问题弹出窗口中隐藏一些链接类型的问题链接向外和向内的字符串。

我曾尝试使用 java 脚本，但我没有从 java 脚本中获得弹出屏幕。

请看下面的截图：

![隐藏问题链接类型](../Images/28066f827a9813c924a44429dc883a5b.png)

谁能告诉我如何在java脚本中获得这个弹出屏幕？有没有其他方法可以隐藏这个？

感谢和问候，

雷努卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:32:50.270

**要隐藏每个页面的克隆问题链接：**

编辑文件`system-webresources-plugin.xml`（应该在 /atlassian-jira/WEB-INF/classes/），并添加`<web-resource key="jira-fields">`到此代码：

```
 <resource type="download" name="myScript.js" location="/includes/jira/field/script.js">
        <param name="source" value="webContextStatic"/>
    </resource> 
```

比，`/includes/jira/field/myScript.js`写这个：

```
AJS.$(document).ready(function() {
    if (AJS.$("#link-type option[value*='clon']").size() > 0) {
        // will work even when right clicking on More 
        // Actions->Link & open it into a new window
        AJS.$("#link-type option[value*='clon']").remove()
    } else if (AJS.$("#link-issue").size() > 0) {
        // will work in case the link menu showing via popup
        AJS.$("#link-issue").click(function(){
            // wait for the popup to show, and remove the clone options
            setTimeout(function (){
                AJS.$("#link-type option[value*='clon']").remove();
             }, 300);
        });
    }
}); 
```

重启 Jira 就可以了！

该脚本将一个函数附加到链接菜单打开，然后给菜单 0.3 秒加载，并删除不需要的项目。如果它不适合您，请尝试将超时时间从 300 提高到 500-1000。

在 jira 4 上，改为运行：

```
 AJS.$("#issue-link-link-type option[value*='clon']").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T18:51:54.687

之前的解决方案有一个问题：只有*点击*“Link Issue”-Menu-Item时才会起作用。当我使用 Point (.)-Shortcut-Menu 时，它不会删除问题类型。

我已经建立了以下解决方案：

JS-绑定部分：

```
AJS.$(document).ready(function() {
JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED, function(e, context, reason) {
     hideIssueLinkTypes();
  });
}); 
```

JS 支持功能：

```
function hideIssueLinkTypes() {
var apiURL = "/rest/scriptrunner/latest/custom/getHiddenLinkTypes"

  $.getJSON( apiURL, {
  }).done(function( objectData ) {
      $.each( objectData, function( i, item ) {
        var issueLinkType = item.issueLinkType[0];
        AJS.$("#link-type option[value='"+issueLinkType.inwardDescription+"']").remove();
        AJS.$("#link-type option[value='"+issueLinkType.outwardDescription+"']").remove();
      });
    });
} 
```

Scriptrunner-REST-端点：

```
import com.onresolve.scriptrunner.runner.rest.common.CustomEndpointDelegate
import groovy.json.JsonBuilder
import groovy.transform.BaseScript
import com.atlassian.jira.issue.link.DefaultIssueLinkTypeManager
import com.atlassian.jira.issue.link.IssueLinkTypeManager
import com.atlassian.jira.issue.link.IssueLinkType
import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.config.properties.ApplicationProperties

import javax.ws.rs.core.MultivaluedMap
import javax.ws.rs.core.Response

@BaseScript CustomEndpointDelegate delegate

String HIDDEN_IDENT="[hidden]"

getHiddenLinkTypes(httpMethod: "GET") { MultivaluedMap queryParams, String body ->   

    def appProperties = ((ApplicationProperties) ComponentAccessor.getComponentOfType(ApplicationProperties.class));
    def appClonersLinkTypeName = appProperties.getDefaultBackedText("jira.clone.linktype.name");

    def jsBuilder=new JsonBuilder();
    def issueLinkTypes = ((IssueLinkTypeManager) ComponentAccessor.getComponentOfType(IssueLinkTypeManager.class)).getIssueLinkTypes();

    jsBuilder issueLinkTypes.findAll({it.getName().contains(HIDDEN_IDENT) || it.getName()==appClonersLinkTypeName }),
    { IssueLinkType linkType ->
        issueLinkType linkType.getId(),
        name: linkType.getName(),
        inwardDescription: linkType.getInward(),
        outwardDescription: linkType.getOutward()
    }

    return Response.ok(jsBuilder.toString()).build();
} 
```

然后，您可以做的只是注释和链接类型，将 [hidden] 放在链接名称中，它将对所有用户消失（它仍然可以通过编程方式添加或通过克隆创建）。

如果您没有 Scriptrunner 或不需要实现的动态特性，您仍然可以像上面在 hideIssueTypes() 中的答案中描述的 Kuf 一样硬编码值，如下所示：

```
AJS.$("#issue-link-link-type option[value*='clon']").remove(); 
```

# ant - JavaFx TableView 内容在混淆后消失

> ID：14495619
> 
> 赞同：2
> 
> 时间：2013-01-24T06:59:46.997
> 
> 标签：ant, tableview, javafx, obfuscation, proguard

我创建了一个 JavaFX 应用程序，它有很多 TableView 来显示内容，如果我运行 Jar 文件，应用程序可以正常工作。因为我需要将应用程序分发给我的客户，所以我的代码应该被混淆。我正在使用 Proguard-4.8 来混淆我的代码。

我使用 Ant 创建了一个示例 TableView 构建脚本，它混淆了示例 jar。

在混淆之前只编译 jar -

![混淆之前](../Images/e79febd04a15d9bb0b33b5b163890b86.png)

混淆罐后 -

![混淆后](../Images/7d9cb258a3062401342e76a4aef78539.png)

我已将完整的构建脚本项目上传到 - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript.zip](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript.zip)

我已经完全运行它了。你会找到 -

1.  build.xml - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/build.xml](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/build.xml)
2.  没有混淆的编译 Jar - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/Sample.jar](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/Sample.jar)
3.  混淆的罐子 - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/obfuscated/SampleObfuscated.jar](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/obfuscated/SampleObfuscated.jar)
4.  Proguard.map - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/obfuscated/ObfuscatedProguard.map](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/obfuscated/ObfuscatedProguard.map)
5.  源 Java 类 - [http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/src/TableViewWithButton.java](http://neelamsharma.s3.amazonaws.com/SampleObfuscationBuildScript/src/TableViewWithButton.java)

其他事情是 - 这是我的 build.xml 文件 -

```
<project name="sample" default="cleanBuildPackage" basedir="." xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <property environment="env"/>

    <property name="WorkingFolder" location="."/>
    <property name="ClassPath" location="${env.JAVA_HOME}/jre/lib/jfxrt.jar;${env.JAVA_HOME}/lib/ant-javafx.jar;${WorkingFolder}/lib/proguard.jar;"/>
    <property name="dist" value="dist"/>  
    <property name="main.class" value="TableViewWithButton"/>
    <property name="app.name" value="Sample"/>

    <target name="init">
        <echo message="Java installation directory: ${java.home}"/>
        <!-- Create the time stamp -->
        <tstamp/>

        <delete dir="${WorkingFolder}/build"/>
        <delete dir="${dist}"/>
        <mkdir dir="${dist}"/>
        <mkdir dir="${WorkingFolder}/build"/>
    </target>

    <target name="CompilingSample" depends="init">
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
             uri="javafx:com.sun.javafx.tools.ant" classpath=".;${env.JAVA_HOME}/jre/lib/jfxrt.jar"/>
        <javac classpath="${ClassPath};" srcdir="${WorkingFolder}/src" destdir="${WorkingFolder}/build"/>
    </target> 

    <target name="CreatingSampleJar" depends="CompilingSample" description="generate the distribution" >
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
        uri="javafx:com.sun.javafx.tools.ant" classpath="${env.JAVA_HOME}/lib/ant-javafx.jar"/>
            <fx:jar destfile="${WorkingFolder}/${app.name}.jar">
                    <fx:application mainClass="${main.class}"/>
                <fileset dir="${WorkingFolder}/build"/>
            </fx:jar>
    </target> 

    <target name="Ofuscating" depends="CreatingSampleJar" >

        <taskdef resource="proguard/ant/task.properties" classpath="${WorkingFolder}/lib/proguard.jar" />
            <mkdir dir="obfuscated"/>
                <proguard printmapping="obfuscated/ObfuscatedProguard.map"
                                renamesourcefileattribute="SourceFile" ignorewarnings="true">

                    -dontshrink
                    -dontoptimize

                    -libraryjars "${java.home}/lib/rt.jar"
                    -libraryjars "${java.home}/lib/javaws.jar"
                    -libraryjars "${env.JAVA_HOME}/lib/ant-javafx.jar"
                    -libraryjars "${env.JAVA_HOME}/jre/lib/jfxrt.jar"           

                    -injars ${WorkingFolder}/${app.name}.jar                                    

                    -outjars ${WorkingFolder}/Obfuscated.jar

                    -ignorewarnings

                    <keepattribute name="InnerClasses" />
                        <keepattribute name="SourceFile" />
                        <keepattribute name="LineNumberTable" />
                        <keepattribute name="Deprecated" />
                        <keepattribute name="*Annotation*" />
                        <keepattribute name="Signature" />

                    -adaptresourcefilecontents **.fxml,**.properties,META-INF/MANIFEST.MF,images/*,publicCerts.store,.version

                            <!--  
                            If I am adding this then I am able to see TableView Contents, but it do not obfuscate all public classes and their methods.
                            <keep access="public">
                                                 <method access="public protected" />
                                        </keep> 
                                         -->

                    -keepclassmembernames class * {
                        @javafx.fxml.FXML *;
                    } 
                    -keepclasseswithmembers public class com.javafx.main.Main, TableViewWithButton {
                            public static void main(java.lang.String[]);
                    }                    
            </proguard>

    </target>

    <target name="Movejar" depends="Ofuscating">
        <move
        file="${WorkingFolder}/Obfuscated.jar"
        tofile="obfuscated/${app.name}Obfuscated.jar" verbose="true" overwrite="true" />
    </target>

    <target name="cleanBuildPackage" depends="Movejar">
            <fx:deploy width="800" height="600" nativeBundles="all" outdir="${dist}" outfile="${app.name}">
                <fx:info title="${app.name}"/>
                    <fx:application name="${app.name}" mainClass="${main.class}"/>
                    <fx:resources>
                        <fx:fileset dir="${dist}" includes="*.jar"/>
             </fx:resources>
         </fx:deploy>
    </target>

</project> 
```

在 build.xml 中，如果我添加此行，则可以看到 TableView 内容，但它不会混淆所有公共类及其方法。

```
<keep access="public">
     <method access="public protected" />
</keep> 
```

我需要完全混淆我的项目。是否有其他方法来混淆 jar 文件而不保持公共类未混淆，以便我能够完全看到 TableView 文本。

谢谢，

尼拉姆夏尔马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:53:23.210

我建议尝试使用**PropertyValueFactory**的长形式：

```
col.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Test, String>,
             ObservableValue<String>>() {
     public ObservableValue<String> call(TableColumn.CellDataFeatures<Test, String> t) {
         // t.getValue() returns the Test instance for a particular TableView row
         return t.getValue().testProperty();
         // or
         return new SimpleStringProperty(t.getValue().getMessage());
     }
  }); 
```

# emacs - 在 Emacs 中使用哪种自动完成模式来编写英语

> ID：14495632
> 
> 赞同：2
> 
> 时间：2013-01-24T07:00:40.590
> 
> 标签：emacs, autocomplete, aquamacs

用英语写散文的最佳 Emacs 自动完成模式是什么？我的主要要求是通过一次击键自动完成对最可能匹配的最佳猜测，而不是强迫我导航并选择要填写的完成。

因此，例如，如果我输入 DISADV 并点击 ESCAPE，它会自动将其完成为 DISADVANTAGE，因为这是最有可能完成的。

如果它可以通过点击 SPACE 自动完成它会更好，如果并且当只有一个可能的完成时。

建议？

# java - 让 Java 小程序扩展到大型浏览器

> ID：14495633
> 
> 赞同：0
> 
> 时间：2013-01-24T07:00:44.210
> 
> 标签：java, javascript, css, applet

我一直在尝试将 Java 小程序嵌入到 .htm 文件中。我想根据用户当前的分辨率缩放浏览器窗口的最大尺寸，尤其是对于 chrome 和工具栏。问题是我不知道如何使用 PHP/JS 或其他方式最大化浏览器。如果小程序在缩小的浏览器窗口中启动，小程序将永远很小。如果我要求浏览器在任何可能受限的窗口中启动小程序。我的小程序（在智慧范围内）没有真正的方法获得当前的大小。

这是我的源代码：

```
<html>
<head>

<style>
 applet
 {    
    width: 100px;
    height: 100px;
}
</style>

<script>
  function resizea()
  {
    var a = document.getElementsByTagName("applet")[0];
    a.style.height = screen.height;
    a.style.width = screen.width;
  }
  resizea();
</script>
</head>
<body>
  <applet archive="jarfile4.jar" width="1" height="1" code="rebuiltgui.class"></applet>
</body>
</html> 
```

# scheme - Guile Scheme 解释器中的奇怪乘法行为

> ID：14495636
> 
> 赞同：37
> 
> 时间：2013-01-24T07:01:00.150
> 
> 标签：scheme, mit-scheme, guile

`Guile 1.8.8`我在 OS X的解释器中练习 Scheme 。我注意到了一些有趣的事情。

这`expt`是基本上做幂运算的函数`expt(b,n) = b^n`：

```
 (define (square x) (* x x))
 (define (even? x) (= (remainder x 2) 0))
 (define (expt b n) 
      (cond ((= n 0) 1)
        ((even? n) (square (expt b (/ n 2))))
        (else (* b (expt b (- n 1))))
      )) 
```

如果我尝试一些输入

```
 > (expt 2 10)
 1024
 > (expt 2 63)
 9223372036854775808 
```

奇怪的部分来了：

```
 > (expt 2 64)
 0 
```

更奇怪的是，直到`n=488`它停留在`0`：

```
 > (expt 2 487)
 0
 > (expt 2 488)
 79916762888089401123.....
 > (expt 2 1000)
 1071508607186267320948425049060....
 > (expt 2 10000)
 0 
```

当我使用[repl.it](http://repl.it)在线解释器尝试此代码时，它按预期工作。那么**Guile到底有什么问题**呢？

*（注意：在某些方言中，`remainder`函数称为`mod`。）*

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-24T09:58:10.057

我最近在 Guile 2.0 中[修复了这个错误。](http://git.savannah.gnu.org/gitweb/?p=guile.git;a=commit;h=2355f01709eadfd5350c510cdb095b4e3f71f17c)当 C 编译器开始优化溢出检查时，该错误就出现了，理论上如果发生有符号整数溢出，则行为是未指定的，因此编译器可以做任何它喜欢的事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T08:25:38.960

我可以在 OS X 上使用 guile 2.0.6 重现该问题。归结为：

```
> (* 4294967296 4294967296)
$1 = 0 
```

我的猜测是 guile 使用原生 int 类型来存储小数字，然后在原生 int 太小时切换到由 GNU MP 支持的 bignums。也许在那种特殊情况下，检查失败，并且计算溢出了本机 int。

有趣的是，以下循环显示了 2^32 和 2^60 之间的 2 的平方结果为 0：

```
(let loop
    ((x 1)
     (exp 0))
  (format #t "(2^~s) ^ 2 = ~s\n" exp (* x x))
  (if (< exp 100)
      (loop (* 2 x) (+ 1 exp)))) 
```

结果是：

```
(2^0) ^ 2 = 1
(2^1) ^ 2 = 4
(2^2) ^ 2 = 16
(2^3) ^ 2 = 64
(2^4) ^ 2 = 256
(2^5) ^ 2 = 1024
(2^6) ^ 2 = 4096
(2^7) ^ 2 = 16384
(2^8) ^ 2 = 65536
(2^9) ^ 2 = 262144
(2^10) ^ 2 = 1048576
(2^11) ^ 2 = 4194304
(2^12) ^ 2 = 16777216
(2^13) ^ 2 = 67108864
(2^14) ^ 2 = 268435456
(2^15) ^ 2 = 1073741824
(2^16) ^ 2 = 4294967296
(2^17) ^ 2 = 17179869184
(2^18) ^ 2 = 68719476736
(2^19) ^ 2 = 274877906944
(2^20) ^ 2 = 1099511627776
(2^21) ^ 2 = 4398046511104
(2^22) ^ 2 = 17592186044416
(2^23) ^ 2 = 70368744177664
(2^24) ^ 2 = 281474976710656
(2^25) ^ 2 = 1125899906842624
(2^26) ^ 2 = 4503599627370496
(2^27) ^ 2 = 18014398509481984
(2^28) ^ 2 = 72057594037927936
(2^29) ^ 2 = 288230376151711744
(2^30) ^ 2 = 1152921504606846976
(2^31) ^ 2 = 4611686018427387904
(2^32) ^ 2 = 0
(2^33) ^ 2 = 0
(2^34) ^ 2 = 0
(2^35) ^ 2 = 0
(2^36) ^ 2 = 0
(2^37) ^ 2 = 0
(2^38) ^ 2 = 0
(2^39) ^ 2 = 0
(2^40) ^ 2 = 0
(2^41) ^ 2 = 0
(2^42) ^ 2 = 0
(2^43) ^ 2 = 0
(2^44) ^ 2 = 0
(2^45) ^ 2 = 0
(2^46) ^ 2 = 0
(2^47) ^ 2 = 0
(2^48) ^ 2 = 0
(2^49) ^ 2 = 0
(2^50) ^ 2 = 0
(2^51) ^ 2 = 0
(2^52) ^ 2 = 0
(2^53) ^ 2 = 0
(2^54) ^ 2 = 0
(2^55) ^ 2 = 0
(2^56) ^ 2 = 0
(2^57) ^ 2 = 0
(2^58) ^ 2 = 0
(2^59) ^ 2 = 0
(2^60) ^ 2 = 0
(2^61) ^ 2 = 5316911983139663491615228241121378304
(2^62) ^ 2 = 21267647932558653966460912964485513216
(2^63) ^ 2 = 85070591730234615865843651857942052864
(2^64) ^ 2 = 340282366920938463463374607431768211456
(2^65) ^ 2 = 1361129467683753853853498429727072845824
(2^66) ^ 2 = 5444517870735015415413993718908291383296
(2^67) ^ 2 = 21778071482940061661655974875633165533184
(2^68) ^ 2 = 87112285931760246646623899502532662132736
(2^69) ^ 2 = 348449143727040986586495598010130648530944
(2^70) ^ 2 = 1393796574908163946345982392040522594123776
(2^71) ^ 2 = 5575186299632655785383929568162090376495104
(2^72) ^ 2 = 22300745198530623141535718272648361505980416
(2^73) ^ 2 = 89202980794122492566142873090593446023921664
(2^74) ^ 2 = 356811923176489970264571492362373784095686656
(2^75) ^ 2 = 1427247692705959881058285969449495136382746624
(2^76) ^ 2 = 5708990770823839524233143877797980545530986496
(2^77) ^ 2 = 22835963083295358096932575511191922182123945984
(2^78) ^ 2 = 91343852333181432387730302044767688728495783936
(2^79) ^ 2 = 365375409332725729550921208179070754913983135744
(2^80) ^ 2 = 1461501637330902918203684832716283019655932542976
(2^81) ^ 2 = 5846006549323611672814739330865132078623730171904
(2^82) ^ 2 = 23384026197294446691258957323460528314494920687616
(2^83) ^ 2 = 93536104789177786765035829293842113257979682750464
(2^84) ^ 2 = 374144419156711147060143317175368453031918731001856
(2^85) ^ 2 = 1496577676626844588240573268701473812127674924007424
(2^86) ^ 2 = 5986310706507378352962293074805895248510699696029696
(2^87) ^ 2 = 23945242826029513411849172299223580994042798784118784
(2^88) ^ 2 = 95780971304118053647396689196894323976171195136475136
(2^89) ^ 2 = 383123885216472214589586756787577295904684780545900544
(2^90) ^ 2 = 1532495540865888858358347027150309183618739122183602176
(2^91) ^ 2 = 6129982163463555433433388108601236734474956488734408704
(2^92) ^ 2 = 24519928653854221733733552434404946937899825954937634816
(2^93) ^ 2 = 98079714615416886934934209737619787751599303819750539264
(2^94) ^ 2 = 392318858461667547739736838950479151006397215279002157056
(2^95) ^ 2 = 1569275433846670190958947355801916604025588861116008628224
(2^96) ^ 2 = 6277101735386680763835789423207666416102355444464034512896
(2^97) ^ 2 = 25108406941546723055343157692830665664409421777856138051584
(2^98) ^ 2 = 100433627766186892221372630771322662657637687111424552206336
(2^99) ^ 2 = 401734511064747568885490523085290650630550748445698208825344
(2^100) ^ 2 = 1606938044258990275541962092341162602522202993782792835301376 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T08:17:34.707

我无法重现您运行 Arch 的结果。

这是我的终端会话的日志：

```
$ uname -r
3.6.10-1-ARCH
$ guile --version
Guile 1.8.8
Copyright (c) 1995, 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation
Guile may be distributed under the terms of the GNU General Public Licence;
certain other uses are permitted as well.  For details, see the file
`COPYING', which is included in the Guile distribution.
There is no warranty, to the extent permitted by law.
$ guile
guile> (define (square x) (* x x))
guile> (define (even? x) (= (remainder x 2) 0))
guile> (define (expt b n)
        (cond ((= n 0) 1)
            ((even? n) (square (expt b (/ n 2))))
            (else (* b (expt b (- n 1))))))
guile> (expt 2 10)
1024
guile> (expt 2 64)
18446744073709551616
guile> (expt 2 487)
399583814440447005616844445413525287135820562261116307309972090832047582568929999375399181192126972308457847183540047730617340886948900519205142528
guile> (expt 2 488)
799167628880894011233688890827050574271641124522232614619944181664095165137859998750798362384253944616915694367080095461234681773897801038410285056
guile> (expt 2 1000)
10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376
guile> (expt 2 10000)
19950631168807583848837421626835850838234968318861924548520089498529438830221946631919961684036194597899331129423209124271556491349413781117593785932096323957855730046793794526765246551266059895520550086918193311542508608460618104685509074866089624888090489894838009253941633257850621568309473902556912388065225096643874441046759871626985453222868538161694315775629640762836880760732228535091641476183956381458969463899410840960536267821064621427333394036525565649530603142680234969400335934316651459297773279665775606172582031407994198179607378245683762280037302885487251900834464581454650557929601414833921615734588139257095379769119277800826957735674444123062018757836325502728323789270710373802866393031428133241401624195671690574061419654342324638801248856147305207431992259611796250130992860241708340807605932320161268492288496255841312844061536738951487114256315111089745514203313820202931640957596464756010405845841566072044962867016515061920631004186422275908670900574606417856951911456055068251250406007519842261898059237118054444788072906395242548339221982707404473162376760846613033778706039803413197133493654622700563169937455508241780972810983291314403571877524768509857276937926433221599399876886660808368837838027643282775172273657572744784112294389733810861607423253291974813120197604178281965697475898164531258434135959862784130128185406283476649088690521047580882615823961985770122407044330583075869039319604603404973156583208672105913300903752823415539745394397715257455290510212310947321610753474825740775273986348298498340756937955646638621874569499279016572103701364433135817214311791398222983845847334440270964182851005072927748364550578634501100852987812389473928699540834346158807043959118985815145779177143619698728131459483783202081474982171858011389071228250905826817436220577475921417653715687725614904582904992461028630081535583308130101987675856234343538955409175623400844887526162643568648833519463720377293240094456246923254350400678027273837755376406726898636241037491410966718557050759098100246789880178271925953381282421954028302759408448955014676668389697996886241636313376393903373455801407636741877711055384225739499110186468219696581651485130494222369947714763069155468217682876200362777257723781365331611196811280792669481887201298643660768551639860534602297871557517947385246369446923087894265948217008051120322365496288169035739121368338393591756418733850510970271613915439590991598154654417336311656936031122249937969999226781732358023111862644575299135758175008199839236284615249881088960232244362173771618086357015468484058622329792853875623486556440536962622018963571028812361567512543338303270029097668650568557157505516727518899194129711337690149916181315171544007728650573189557450920330185304847113818315407324053319038462084036421763703911550639789000742853672196280903477974533320468368795868580237952218629120080742819551317948157624448298518461509704888027274721574688131594750409732115080498190455803416826949787141316063210686391511681774304792596709376
guile> (exit) 
```

# c++ - C ++宏如何用于两个字符串文字

> ID：14495637
> 
> 赞同：1
> 
> 时间：2013-01-24T07:01:04.597
> 
> 标签：c++, visual-c++, text, literals

我之前使用过这些宏：

```
#define TEXT_A   _T("a")
#define TEXT_B   _T("b")

std::wstring text = TEXT_A TEXT_B;      // then text = "ab" 
```

现在我该怎么做：

```
#define TEXT_A   "a"
#define TEXT_B   "b"
std::wstring text = _T(TEXT_A TEXT_B);     // i need text be "ab" but failed.  and that error is wchar_t cannot connect with char. 
```

我正在寻找一个宏来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:03:03.467

采用

```
std::wstring text = _T(TEXT_A) _T(TEXT_B); 
```

甚至更好的解决方案：[停止使用`wstring`](http://utf8everywhere.org/).

# c# - 将列表返回给 .NET Business Connector

> ID：14495638
> 
> 赞同：0
> 
> 时间：2013-01-24T07:01:10.757
> 
> 标签：c#, axapta, dynamics-ax-2009, x++, business-connector

目前，我正在使用以下代码：

```
 Axapta ax = new Axapta();
        string tableName;
        ArrayList ax_cont = null;
        ax.Logon(null, null, null, null);
        try
        {
            ax_cont = (ArrayList)ax.CallStaticClassMethod("Code_Generator", "tableNames");
            for (int i = 1; i <= ax_cont.Count; i++)
            {
                tableName = ax_cont[i].ToString();
                tablesCB.Items.Add(tableName);
            }    
        }
        catch { } 
```

但是我遇到了类型转换异常。

当从 ax 动态返回列表时，我需要在 C# 中做什么`AxpataObject`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:25:47.010

这取决于`Code_generator::tableNames()`返回的内容。

它当然不会返回一个`ArrayList`但很可能是一个 AX `List`，并且两者不一样并且不能被强制转换。

一种方法是让 AX 返回一个容器，[然后访问它](https://stackoverflow.com/questions/4393378/convert-from-axapta-data-container-to-c-sharp-collection)。

否则，您可以使用[AxaptaObject](http://msdn.microsoft.com/en-us/library/microsoft.dynamics.businessconnectornet.axaptaobject.aspx)`List`直接访问 AX

```
AxpataObject ax_cont = ax.CallStaticClassMethod("Code_Generator", "tableNames");
AxpataObject ax_it = ax_cont.Call("getEnumerator");
while (ax_it.Call("moveNext"))
     // Hope you get it 
```

# r - 使用 R 将字符串拆分为因子

> ID：14495639
> 
> 赞同：0
> 
> 时间：2013-01-24T07:01:11.057
> 
> 标签：r

我向我们的办公室发送了一份有趣的调查问卷，以获取一些数据，以便为将来处理调查问卷的工作流程拼凑起来。一些问题有文本输入，答案是逗号分隔的列表。这些数据是使用谷歌表格收集的，所以它们最终形成了一个电子表格。我直接链接到此电子表格以将数据导入 R，因此我不希望对数据进行任何比我必须做的更多的预处理。

因为进入 R 的 csv 也是逗号分隔的，所以我将逗号交换为管道 ('|')。我想根据对“你最喜欢的工业设计是什么”之类的问题的回答制作条形图，但很多人都说过“iPhone，可乐瓶”之类的话。这对我来说是一个标有 iPhone| 可乐瓶的酒吧。

我想将其拆分，以便 iPhone 部分有助于 iPhone 栏等。在其他语言中，我会将整个列表与管道分隔符连接起来，然后在管道上再次拆分，然后使用该新列表。我一直在 R 中尝试这种方法；这是正确的方法还是有更多的 R 方法？

```
a <- BVNdhData$Pets
b <- paste(a,collapse ="|")
c <- strsplit(b,"|",fixed=TRUE) 
```

一切正常，但给我留下了一个我不知道该怎么做的*清单。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:33:37.380

如果您调用`unlist()`结果，`strsplit()`您将获得一个包含文本所有组件的单个字符向量：

```
text <- c("cake|pie|sausage roll", "scotch egg|pie")
x <- unlist(strsplit(text, "\\|")) 
```

用于`table()`将条目制成表格：

```
table(x)

x
        cake          pie sausage roll   scotch egg 
           1            2            1            1 
```

然后将其强制到数据框...

```
dat <- as.data.frame(table(x))
dat

             x Freq
1         cake    1
2          pie    2
3 sausage roll    1
4   scotch egg    1 
```

...和情节：

```
library(ggplot2)
ggplot(dat, aes(x, Freq)) + geom_point() 
```

![在此处输入图像描述](../Images/dfeeec9a5c3d8ae57e0de56a81b58dcf.png)

# android - 如何在Android中捕获音频的输出流？

> ID：14495644
> 
> 赞同：3
> 
> 时间：2013-01-24T07:01:28.837
> 
> 标签：android, mobile, equalizer

我是一个开发新手，我试图在 Android 平台上创建一个均衡器。

如何在 android 上捕获输出音频流？我只需要从我的应用程序中获取音频信息。（我已经搜索了 www.developers.android.com 并没有找到任何信息）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:14:21.550

目前 Android 中没有用于记录音频输出的功能（嗯，有[Visualizer API](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)，可让您抓取部分、低质量的音频以用于音频可视化）。
如果您只需要将效果应用到您自己的应用程序中的音频，那么您可以在内部进行“录制”。即，在您的应用程序中，将解码后的音频数据发送到您的效果器进行处理，然后将处理后的数据发送到您的 AudioTrack 或 OpenSL ES 缓冲区队列。

# iis - 向 IIS 服务器根发出请求时打开 Web 应用程序

> ID：14495645
> 
> 赞同：0
> 
> 时间：2013-01-24T07:01:29.667
> 
> 标签：iis, iis-7

使用 IIS7，我有一个 Web 应用程序（假设它安装在我的 Web 服务器上的“默认网站”下称为“MyWebApp”（假设它称为 www.mywebserver.com）

我想要实现的是，当浏览器向 www.mywebserver.com 发出请求时，我想打开 MyWebApp，就好像请求是 www.mywebserver.com/MyWebApp。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:06:19.320

做一个重定向，有几种方法可以做到这一点：

1.  添加一个带有[`meta refresh`](http://www.w3.org/TR/WCAG20-TECHS/H76.html)
2.  使用 ASP .NET 重定向方法（[Response.Redirect 和 Server.Transfer](http://www.techrepublic.com/blog/programming-and-development/two-approaches-to-redirection-in-aspnet/743)）
3.  使用[IIS 重定向](http://technet.microsoft.com/en-us/library/cc732969%28v=ws.10%29.aspx)

我建议使用 IIS 重定向。按着这些次序：

*   打开 IIS 管理器并导航到要管理的级别。
*   在功能视图中，双击 HTTP 重定向。
*   在 HTTP 重定向页面上，选择将请求重定向到此目标。在相应的框中，键入要将用户重定向到的文件名、目录路径或 URL。在“操作”窗格中，单击应用。

# prestashop - Prestashop：如何清空购物车？

> ID：14495653
> 
> 赞同：0
> 
> 时间：2013-01-24T07:01:58.803
> 
> 标签：prestashop, cart

将新产品添加到购物车后，我想将购物车订单列表设为空。事实上，每次只有在产品上才能放入购物车。坦克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:25:22.300

添加自定义逻辑的 2 种方法：

*   创建您自己的模块并将其连接到“actionCartSave”
*   ~~覆盖“Cart”类中的“add”和“update”方法（/override/classes/Cartp.php）~~

编辑：第二种方式错误，因为无限更新循环。

这是一个执行此操作的模块：

```
class OneProductCart extends Module {
    public function __construct() {
        $this->name = 'oneproductcart';
        $this->tab = 'front_office_features';
        $this->version = '1.0';
        $this->author = 'SJousse';
        $this->need_instance = 0;
        parent::__construct();
        $this->displayName = $this->l('One Product Cart');
        $this->description = $this->l('Keep only last product in cart.');
    }
    public function install() {
        return (parent::install() && $this->registerHook('actionCartSave'));
    }
    public function hookActionCartSave($params) {
        $cart = $params['cart'];
        $last = $cart->getLastProduct();
        $prods = $cart->getProducts();

        foreach ($prods as $prod)
            if ($prod['id_product'] != $last['id_product'])
                $cart->deleteProduct($prod['id_product']);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T19:20:23.040

对于使用 Prestashop v 1.4.9 并创建了一个模块的人：

称呼`global $smarty, $cart;`

然后运行函数`$cart->delete();`

```
 function hookHome($params)
    {

    global $smarty, $cart;
    /** some code here **/

    $cart->delete();

    } 
```

# java - xpath 表达式匹配以变量结尾的文本

> ID：14495657
> 
> 赞同：1
> 
> 时间：2013-01-24T07:02:11.893
> 
> 标签：java, regex, xpath

我有一个带有这样的实体的 XML：

```
<Entity>
    <Name>Lwresd_Dns_Server|LwresdDnsServer</Name>
 </Entity   

<Entity>
   <Name>Lwresd_Dns_Server_Data|LwresdDnsServerData</Name>
</Entity> 
```

我的 xpath 表达式是
`XPathExpression expr = xpath1.compile("//Entity[matches(Name,'" +line+ "')]");`

其中 line 是一个具有 value 的变量`LwresdDnsServer`。

上面的 xpath 表达式匹配两个实体，我需要它只匹配第一个，即

```
Lwresd_Dns_Server|LwresdDnsServer 
```

我应该如何构建表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:16:37.027

我相信这应该可以解决问题：

```
XPathExpression expr = 
    xpath1.compile("//Entity[contains(concat('|', Name, '|'),'|" +line+ "|')]"); 
```

这会将包含在 s 中的实体名称与包含在`|`s 中的变量名称进行比较`|`，因此您会得到如下内容：

```
contains('|Lwresd_Dns_Server|LwresdDnsServer|', '|LwrestDnsServer|') => Yes
contains('|Lwresd_Dns_Server_Data|LwresdDnsServerData|', '|LwrestDnsServer|') => No 
```

结果，仅选择了两个实体中的第一个。

如果您**只想**查找以*结尾的* `line`实体（而不仅仅是那些包含与其完全匹配的实体），那么您可以这样做（假设这些值保证不包含该字符`$`- 如果有可能它包含 a `$`,您应该选择一个绝对不包含的不同分隔符，或者使用 Dimitre Novatchev 对这个问题的回答）：

```
XPathExpression expr = 
    xpath1.compile("//Entity[contains(concat(Name, '$'),'" +line+ "$')]"); 
```

我没有`matches()`在 XPath 中使用该函数（XPath 1.0 不支持它），但我怀疑如果您的 XPath 评估程序支持，以下内容也可以用于在实体名称末尾查找值`matches()`：

```
XPathExpression expr = 
    xpath1.compile("//Entity[matches(Name,'" +line+ "$')]"); 
```

这里，`$`是字符串结尾的正则表达式符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:13:11.403

**这是一个 XPath 1.0 表达式，它实现了 XPath 2.0 函数的`ends-with($s, $t)`作用**：

```
substring($s, string-length($s) - string-length($t) +1) = $t 
```

**您可以用特定的字符串替换`$s`及`$t`**以上。

# ruby-on-rails - Rails3 中的即时搜索

> ID：14495662
> 
> 赞同：0
> 
> 时间：2013-01-24T07:02:28.903
> 
> 标签：ruby-on-rails, ajax

我想对数据集合实施自动建议搜索，在您在 Google 中键入时查找需要显示结果的类别相关记录。

我搜索了宝石和插件，但没有找到任何合适的所需解决方案。

您能否请任何人建议我使用任何宝石或其他场景方法？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:40:27.243

使用 rails [https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete) gem。它很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:32:38.873

对数据收集实施自动建议搜索。

`jqueryui`是一个很好的资源。

[这](http://jqueryui.com/demos/autocomplete/)是一个演示`autocomplete`，你可以查看源代码以了解如何在你的服务器上实现。

# ruby-on-rails - Rails 元搜索关联未定义方法

> ID：14495668
> 
> 赞同：0
> 
> 时间：2013-01-24T07:02:51.720
> 
> 标签：ruby-on-rails, search, meta-search

我正在使用 Rails 应用程序，并已开始使用元搜索来处理搜索功能，但我在获取正确的搜索方法时遇到了麻烦。

例如，我有一个具有现场成本的模型（提案）。

```
..model/proposal.rb

class Proposal < ActiveRecord::Base
belongs_to :user
has_many :users, :through => :invitations
attr_accessible :cost, :user_id 
```

此代码适用于元搜索

```
..views/homes/live_requests.html.erb

<%= form_for @search, :url => "/live_requests", :html => {:method => :get} do |
<%= f.label :cost_greater_than %>
<%= f.text_field :cost_greater_than %><br />
<!-- etc... -->
<%= f.submit %> 
```

然而，对于更复杂的关联，我无法使元搜索路径正确。

我正在尝试搜索：

```
Proposal.last.user.suburb.name #Returns the name of the suburb as expected 
```

我尝试了许多关联，但找不到合适的关联。

提案有一个映射到用户的 user_id 字段，所以 Proposal.user 返回一个用户用户然后有一个郊区 ID，它返回一个郊区郊区有一个名为 name 的字段，它返回一个字符串

我将如何将其用于元搜索表单？

```
<%= f.text_field :user_user_suburb_name %>
or
<%= f.text_field :user_id_suburb_id_name %> 
```

我不能得出一个可靠的结论。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:15:09.343

只是遵循模型声明的正确名称。

Ie. in the model above, ensuring that it was User, not users etc.

# c# - 使用 ip 的 URL 重定向不起作用

> ID：14495676
> 
> 赞同：0
> 
> 时间：2013-01-24T07:03:36.530
> 
> 标签：c#, asp.net

当我使用 localhost 时，导航 url 正在工作，但是当我使用机器的 ip 地址时，显示未找到的页面

代码如下

```
<asp:HyperLink ID="LoginLogout" runat="server"></asp:HyperLink>

LoginLogout.NavigateUrl = "login.aspx"
LoginLogout.Text = "Login" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:32:10.297

1) 使用此 IP 地址 > 尝试使用 127.0.0.1

或 2) 在“IP 地址和域限制”下的 IIS（我使用的是 IIS 7）中添加您的 IP 地址。我希望这会有所帮助

# c# - 如何将数据表转换为列表 >

> ID：14495679
> 
> 赞同：2
> 
> 时间：2013-01-24T07:03:46.987
> 
> 标签：c#, list, datatable

我有一个`DataTable`4 列 ( `Name`, `Contact`, `Address`, `Marks`)。我想将我的转换`DataTable`为`List<KeyValuePair<String, int>>`. 我想补充`Name`一下`Marks`。我在看[这个问题](https://stackoverflow.com/questions/1427484/convert-datatable-to-listt)，但我所追求的没有确切的答案。

有人可以告诉我如何在不使用 Linq 的情况下转换数据表。该列表可能有重复的记录，所以我正在考虑使用元组。如果可能的话，请帮我举一些例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:13:00.327

这应该这样做。dt 当然是您的数据表的名称。您可能还想做 dr["ColName"] 而不是 dr[0] :)

```
 List<KeyValuePair<String, int>> test = new List<KeyValuePair<string, int>>();
    foreach (DataRow dr in dt.Rows)
    {
        test.Add(new KeyValuePair<string, int>(dr[0].ToString(), Convert.ToInt16(dr[3])));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:14:08.547

这出乎我的意料，但是：

```
public static List<KeyValuePair<string, int>> ConvertRowsToList(DataTable input) {
  var ret = new List<KeyValuePair<string, int>>();

  foreach(DataRow dr in input.Rows)
    ret.Add(new KeyValuePair<string, int>((string)dr["Name"], (int)dr["Marks"]));

  return ret;
} 
```

# performance - Kolmogorov – 滤波器 Matlab

> ID：14495684
> 
> 赞同：4
> 
> 时间：2013-01-24T07:04:19.767
> 
> 标签：performance, matlab, filter

海

我需要在应用程序中使用这个 Kolmogorov 过滤器。您将一些测量数据放入其中，然后使用过滤器对其进行一些平滑处理。我尝试用“nchoosek”来做，但是当我尝试为 50 或更多的 I 做这个时，它需要的时间太长了。

![在此处输入图像描述](../Images/c5f7747cc5d8617b4835ff454849bdbf.png)

有人知道如何以更快的方式做到这一点吗？

```
function [ filterd ] = kolmo(data, inter)
temp  = 0;
temp1 = 0;
filterd(1:10, 1) = NaN;

for t=inter+1:(length(data)-inter)
   for o=-inter:inter
    temp = temp + (nchoosek(2*inter, (inter+o))*data(t+o));

    temp1 = temp1 + nchoosek(2*inter, (inter+o));
   end

 filterd(t, 1) = temp/temp1;
 temp  = 0;
 temp1 = 0;
end

end 
```

谢谢安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:47:08.307

这是一个无循环的解决方案：

```
function y = MySoln(x, K)

%# Get the binomial coefficient terms
FacAll = factorial(0:1:2*K)';
BinCoefAll = FacAll(end) ./ (FacAll .* flipud(FacAll));

%# Get all numerator terms
NumerAll = conv(x, BinCoefAll, 'valid');

%# Rescale numerator terms into output
y = (1 / sum(BinCoefAll)) * NumerAll; 
```

我避免使用`nchoosek`，而是使用阶乘手动计算二项式系数。这确保了每个阶乘计算只执行一次。相比之下，OP 的解决方案可能会执行数百次阶乘计算。

一旦计算出二项式系数，就可以直接应用`conv`，然后按分母项进行缩放。

我在 OP 解决方案和我的解决方案之间进行了快速速度测试。`x`速度测试使用具有 50 个元素的随机向量，并设置`K`为 5。然后我`100`对我的解决方案与 OP 解决方案进行迭代。结果如下：

```
Elapsed time is 2.637597 seconds. %# OP Solution
Elapsed time is 0.010401 seconds. %# My Solution 
```

我对此很满意。我怀疑从这一点上可以使该方法更加有效（但很高兴被证明是错误的）。:-)

# mongoid - 如何使用 mongoid (3.0.17) 配置载波？

> ID：14495685
> 
> 赞同：0
> 
> 时间：2013-01-24T07:04:19.817
> 
> 标签：mongoid, carrierwave

这是我的宝石清单，

*   蒙戈（1.8.2）
*   mongoid (3.0.17)
*   mongoid-grid_fs (1.7.0)
*   载波 (0.8.0)
*   载波-mongoid (0.4.0)

我试图生成上传图像，但它不起作用，carrierwave.rb 看起来像这样：

```
require 'carrierwave/mongoid'
CarrierWave.configure do |config|
    config.grid_fs_database = Mongoid::Config.sessions[:default]
    config.grid_fs_port = 27017
    config.grid_fs_host = '127.0.0.1'
    config.storage = :grid_fs
end 
```

但会出错：

```
/config/initializers/carrierwave.rb:3:in `block in <top (required)>': undefined method `grid_fs_database=' for CarrierWave::Uploader::Base:Class (NoMethodError)
..... 
```

有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:22:27.773

我快速查看[了carrierwave-mongoid 的来源，](https://github.com/jnicklas/carrierwave-mongoid/blob/master/lib/carrierwave/mongoid.rb)您指定的配置选项（`grid_fs_database`、`grid_fs_port`和`grid_fs_host`）似乎不是有效选项 - 因此您的错误。

我的理解是carrierwave-mongoid是从Mongoid配置中派生出来的mongoDB配置，所以不需要再指定了。您的配置应如下所示：

```
require 'carrierwave/mongoid'
CarrierWave.configure do |config|
    config.storage = :grid_fs
    config.grid_fs_access_url = "/uploads" # or whatever you'd like the HTTP path to be
end 
```

# iphone - 如何在 uitableview 单元格中显示按钮，它们的动作将显示在同一单元格的标签上

> ID：14495686
> 
> 赞同：4
> 
> 时间：2013-01-24T07:04:24.840
> 
> 标签：iphone, ios, objective-c, uitableview

在 UITableViewCell 中有不同的按钮，当我单击任何按钮时，它的动作正在所有单元格上执行，但我希望当我按下按钮时，动作将显示在同一个单元格的标签上，我知道我需要将它们放入数组中，但如何...？

当我单击按钮时，一个值正在递增，它应该显示在同一单元格的标签上，这里是代码：-

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        likeShow=[[UILabel alloc]initWithFrame:CGRectMake(0, 160, 80, 20)];
        likeBtn=[UIButton buttonWithType:UIButtonTypeCustom];
       [likeBtn addTarget:self action:@selector(likeFn) forControlEvents:UIControlEventTouchUpInside];
        likeBtn.frame=CGRectMake(0, 110, 90, 50);
        [likeBtn setTitle:@"Like" forState:UIControlStateNormal];
        [likeBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [cell addSubview:likeBtn];
        [cell addSubview:likeShow];
        return cell;
} 
```

这是按钮的动作

```
-(void)likeFn{
            NSString *str;
            NSMutableString *mystring=[NSMutableString string];
            likeCount++;
            str =[NSString stringWithFormat:@"%d",likeCount];
            NSString *world = @"Like";
            NSString *helloWorld = [world stringByAppendingString:str];
            likeShow.text=helloWorld;        
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:36:37.657

试试下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *CellIdentifier = [NSString stringWithFormat:@"Cell-%d",indexPath.row];

UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    //[cell clearsContextBeforeDrawing];
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

int lbltag = 1000;

UIButton *likeBtn = nil;
UILabel *likeShow = nil;

if ([cell viewWithTag:lbltag])
{
    likeShow = (UILabel*)[cell viewWithTag:lbltag];
}
else
{
    likeShow=[[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 80, 20)] autorelease];
    likeShow.text = [NSString stringWithFormat:@"%d likes",[[_marrTest objectAtIndex:indexPath.row] intValue]];
    likeShow.tag = lbltag;
    [cell addSubview:likeShow];
}

if ([cell viewWithTag:indexPath.row+1])
{
    likeBtn = (UIButton*)[cell viewWithTag:indexPath.row+1];
}
else
{
    likeBtn=[UIButton buttonWithType:UIButtonTypeCustom];
    likeBtn.tag = indexPath.row+1;
    [likeBtn addTarget:self action:@selector(likeFn:) forControlEvents:UIControlEventTouchUpInside];
    likeBtn.frame=CGRectMake(90, 0, 90, 50);
    [likeBtn setTitle:@"Like" forState:UIControlStateNormal];
    [likeBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [cell addSubview:likeBtn];

}

return cell;
}

-(void)likeFn:(UIButton*)btnClicked
{
NSString *strLikes = [_marrTest objectAtIndex:btnClicked.tag-1];
int likeCount = [strLikes intValue] + 1;
[_marrTest replaceObjectAtIndex:btnClicked.tag-1 withObject:[NSString stringWithFormat:@"%d",likeCount]];

NSIndexPath *selectedIndexPath = [NSIndexPath indexPathForRow:btnClicked.tag-1 inSection:0];

UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:selectedIndexPath];

UILabel *requiredLabel = (UILabel*)[cell viewWithTag:1000];

NSString *str = requiredLabel.text;

//str = [str stringByAppendingFormat:@"selected %@", str];
requiredLabel.text = @"";
requiredLabel.text = [NSString stringWithFormat:@"%d likes",[[_marrTest objectAtIndex:btnClicked.tag-1] intValue]];

//do what ever you want with the label
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T07:12:59.633

在单独的 nib 文件中创建单元格。为该单元格添加按钮和标签。还要为该单元格创建一个视图类，并将 nib 文件中的单元格设置为您创建的类。将出口形式笔尖制作成类文件。还为按钮创建动作并实施动作。并在表格视图中使用该单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:23:27.967

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

likeShow=[[UILabel alloc]initWithFrame:CGRectMake(0, 160, 80, 20)];

   likeBtn=[UIButton buttonWithType:UIButtonTypeCustom];
   [likeBtn addTarget:self action:@selector(likeFn::) forControlEvents:UIControlEventTouchUpInside];
    likeBtn.frame=CGRectMake(0, 110, 90, 50);
    [likeBtn setTitle:@"Like" forState:UIControlStateNormal];
    [likeBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [cell.contentView addSubview:likeBtn];
    [cell.contentView addSubview:likeShow];
    return cell;
}

 -(void)likeFn:(UIButton *)sender :(UIEvent *)event{
         NSSet *touches = [event allTouches];
         UITouch *touch = [touches anyObject];
          CGPoint currentTouchPosition = [touch locationInView:self.view];
          NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:currentTouchPosition];
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        NSString *str;
        NSMutableString *mystring=[NSMutableString string];
        likeCount++;
        str =[NSString stringWithFormat:@"%d",likeCount];
        NSString *world = @"Like";
        NSString *helloWorld = [world stringByAppendingString:str];
        for(id subView in cell.contentView.subviews){
        {
               if([subView isKindOfClass:[UILabel class]]){
                     UILabel *tmpLabel = (UILabel *)subView;
                      tmpLabel.text=helloWorld; 
               }

        }

    } 
```

试试这个代码它可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:09:52.847

尝试将标签设置为：

```
likeBtn.tag = indexPath.row;
likeShow.tag = indexPath.row; 
```

并在`likeFn`：

```
- (void)likeFn: (id)sender {
     UIButton * btn = (UIButton*)sender;
     //check if the btn tag and label tag are same.

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T07:15:45.827

检查此代码。这可能对您有帮助。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *CellIdentifier = @"Cell";

UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    [cell clearsContextBeforeDrawing];
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

likeShow=[[UILabel alloc]initWithFrame:CGRectMake(0, 160, 80, 20)];

   likeBtn=[UIButton buttonWithType:UIButtonTypeCustom];
   [likeBtn addTarget:self action:@selector(likeFn) forControlEvents:UIControlEventTouchUpInside];
    likeBtn.frame=CGRectMake(0, 110, 90, 50);
    [likeBtn setTitle:@"Like" forState:UIControlStateNormal];
    [likeBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [cell addSubview:likeBtn];
    [cell addSubview:likeShow];
 return cell;
  } 
```

使用 didSelectRowAtIndexPath 方法

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    return; 
```

}

# css - 使用 CSS 绘制 12 点突发 ❋

> ID：14495687
> 
> 赞同：2
> 
> 时间：2013-01-24T07:04:28.990
> 
> 标签：css

在这个[页面](http://css-tricks.com/examples/ShapesOfCSS/)中，按照 CSS 绘制 12 点突发，我怎样才能在其中放置一些文本（在当前形式下，它不会在文本中显示文本，我测试 z-index 没有成功）？

如何以最干净的方式绘制 12 个突发边框？

```
#burst-12 {
    background: red;
    width: 80px;
    height: 80px;
    position: relative;
    text-align: center;
}
#burst-12:before, #burst-12:after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    height: 80px;
    width: 80px;
    background: red;
}
#burst-12:before {
    -webkit-transform: rotate(30deg);
       -moz-transform: rotate(30deg);
        -ms-transform: rotate(30deg);
         -o-transform: rotate(30deg);
}
#burst-12:after {
    -webkit-transform: rotate(60deg);
       -moz-transform: rotate(60deg);
        -ms-transform: rotate(60deg);
         -o-transform: rotate(60deg);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:14:10.997

您只需要在突发容器中嵌套另一个元素：

```
<div id="burst-12"><span>I am the text</span></div> 
```

然后你可以按照你想要的方式来设计它：

```
#burst-12 span {
 display:block;
 position:absolute;
 z-index:2;
} 
```

您将[在此处](http://jsfiddle.net/gz4w9/)找到一个非常基本的示例。

# php - 如何将 HTML 数据放入 tcpdf 的标题中？

> ID：14495688
> 
> 赞同：13
> 
> 时间：2013-01-24T07:04:34.157
> 
> 标签：php, html, smarty, tcpdf

我正在使用 tcpdf 库来生成 pdf 文档。我正在使用 smarty 模板引擎来保存数据。下面是放入标头数据的脚本：

```
// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, 'PQR', 
'XYZ'); 
```

我想用 smarty 模板的 HTML 表格内容代替 XYZ，表格内容将是动态的（意味着表格中的数据可能因每个 PDF 文档而异）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T09:48:00.203

正如@vinzcoco 所说，您必须扩展 TCPDF 以实现您想要的。这是一个简单的改进，我认为它可能对您有用：

```
class MyTCPDF extends TCPDF {

    var $htmlHeader;

    public function setHtmlHeader($htmlHeader) {
        $this->htmlHeader = $htmlHeader;
    }

    public function Header() {
        $this->writeHTMLCell(
            $w = 0, $h = 0, $x = '', $y = '',
            $this->htmlHeader, $border = 0, $ln = 1, $fill = 0,
            $reseth = true, $align = 'top', $autopadding = true);
    }

} 
```

现在，一旦你的 MyTCPD 对象可用，你只需要这样做来设置 HTML 标题内容：

```
$mytcpdfObject->setHtmlHeader('<table>...</table>'); 
```

并且 HTML 内容不会被硬编码到`Header()`方法中（对您来说更灵活）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-17T09:00:06.133

我使用以下方法设置标题

```
$PDF_HEADER_LOGO = "logo.png";//any image file. check correct path.
$PDF_HEADER_LOGO_WIDTH = "20";
$PDF_HEADER_TITLE = "This is my Title";
$PDF_HEADER_STRING = "Tel 1234567896 Fax 987654321\n"
. "E abc@gmail.com\n"
. "www.abc.com";
$pdf->SetHeaderData($PDF_HEADER_LOGO, $PDF_HEADER_LOGO_WIDTH, $PDF_HEADER_TITLE, $PDF_HEADER_STRING); 
```

这对我来说是工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T08:54:41.437

您必须实例化您的 PDF 类并扩展 TCPDF 类。在您的 PDF 类之后应该如下所示：

```
class MyTCPDF extends TCPDF{
  public function Header(){
     $html = '<table>...</table>';
     $this->writeHTMLCell($w = 0, $h = 0, $x = '', $y = '', $html, $border = 0, $ln = 1, $fill = 0, $reseth = true, $align = 'top', $autopadding = true);
  }
} 
```

您必须将其适应您自己的项目。

# android - 如何使用选项卡传递参数？

> ID：14495690
> 
> 赞同：0
> 
> 时间：2013-01-24T07:04:43.960
> 
> 标签：android

我很困惑，请告诉我如何使用此选项卡主机传递参数。我想在第一个和第二个选项卡中传递参数。这是我的代码：

```
public class TabBarActivity_BalanceInquiry extends TabActivity {
/** Called when the activity is first created. */
public static String varbalMessageType;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    setTabs() ;     
    varbalMessageType = getIntent().getExtras().getString("mno");
}

private void setTabs(){

    addTab("payments", R.drawable.tab_home, AgAppAskPinForTransaction.class);
    addTab("My Account", R.drawable.tab_home, AgAppMyAccountScreen.class);      
    addTab("Spend Analyzer", R.drawable.tab_home, AgAppPaymentScreen.class);
    addTab("Notification", R.drawable.tab_home, AgAppPaymentScreen.class);
    addTab("Help", R.drawable.tab_home, AgAppPaymentScreen.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();

    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator =    
    LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:13:25.157

选项卡 0

```
getParent().getIntent().putExtra("key", "value"); 
```

选项卡 1

```
String value = getParent().getIntent().getStringExtra("key"); 
```

您可以像这样调用自己的标签活动

```
Intent theIntent = new Intent(this, TabActivity.class); 
theIntent.putExtra("targetTab", 3);
startActivity(theIntent); 
```

并传递数据或参数，您可以创建单例 Java 类并将数据传递给您想要的活动。

# maven - Maven选择间接依赖的不一致版本：为什么，以及如何防止？

> ID：14495693
> 
> 赞同：5
> 
> 时间：2013-01-24T07:04:50.973
> 
> 标签：maven, dependency-management

我们遇到了 Maven 选择了一个不一致的间接依赖版本的情况，我想了解为什么，以及将来如何防止这种情况。

我们的 pom.xml 文件具有以下依赖项：

```
<dependency>
  <groupId>org.springframework.data</groupId>
  <artifactId>spring-data-jpa</artifactId>
  <version>1.1.0.RELEASE</version>
</dependency> 
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency> 
```

但没有直接依赖于spring-core。

两者都依赖于 spring-core：spring-web 3.1.2.RELEASE 依赖于 spring-core 3.1.2.RELEASE（参见[它的 pom-file](http://repo1.maven.org/maven2/org/springframework/spring-web/3.1.2.RELEASE/spring-web-3.1.2.RELEASE.pom)），而 spring-data-jpa 1.1.0.RELEASE 依赖于任意 3。 x 版本的 spring-core（准确地说是 [3.0.7.RELEASE,4.0.0.RELEASE），参见[它的 pom-file](http://repo1.maven.org/maven2/org/springframework/data/spring-data-jpa/1.1.0.RELEASE/spring-data-jpa-1.1.0.RELEASE.pom)）。

结合两者，我希望 Maven 选择 spring-core 版本 3.1.2.RELEASE。但是，事实*并非如此*。相反，它从范围 [3.0.7.RELEASE,4.0.0.RELEASE) 中选择最高值，当前为 3.2.0.RELEASE。

（复制场景：将[上面的 pom.xml 文件](https://gist.github.com/4618149)（gist）放在它自己的目录中，然后运行`mvn dependency:tree -Dverbose=true`：对我来说，结果就是[这棵树](https://gist.github.com/4618160#file-maven-inconsistent-dependency-tree-txt-L29)（gist）。对于 Linux 上的 Maven 2.2.1 和 Maven 3.0，我得到相同的结果。 4 在 Windows 上。）

这似乎是错误的，因为它*不一致*：使用了 spring-web 的 pom 文件不允许的 spring-core 版本。

（当 spring-core 3.2.0.RC1 可用时，我们发生了这种情况：在下一次更新时，它突然被选中，我们很幸运，由于 spring-core 3.1 和 3.2 之间的不兼容更改而导致构建错误。但是下次我们可能就没有那么幸运了，并且出现了很难追踪的运行时错误。）

**呃**：我只是注意到声明*的顺序`<dependency>`很重要*：如果我把 spring-web 放在第一位，那么 spring-core 3.1.2.RELEASE*被*选中。是什么赋予了？

*问题：*我们如何让 Maven 选择一致的间接依赖版本，或者至少在它做出的选择与 pom 文件中指定的版本背道而驰时发出警告？

**更新**：我在这里要求一个通用的解决方案。对于这种特定情况，我知道我可以通过在 中添加依赖项来获得正确的行为，并`<dependencyManagement>`指定我总是想要 spring-core 3.1.2.RELEASE。但是，我希望 Maven 在没有此类特定声明的情况下做正确的事情 (TM)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T13:39:01.110

您*所期望*的似乎是合乎逻辑的，但 Maven 没有机会这样做。它只是在没有`spring-data-jpa`可能与`spring-core`.

依赖项解析按[此处](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)描述的方式工作，并且是您已经描述的方式：

> 依赖中介——这决定了当遇到工件的多个版本时将使用哪个版本的依赖。目前，Maven 2.0 仅支持使用“最近定义”，这意味着它将使用依赖树中与您的项目最接近的依赖版本。您始终可以通过在项目的 POM 中明确声明来保证版本。请注意，如果两个依赖版本在依赖树中的深度相同，则在 Maven 2.0.8 之前没有定义哪个会获胜，但从 Maven 2.0.9 开始，声明中的顺序很重要：第一个声明获胜。

所以我认为防止这种情况的唯一方法是意识到它并在你自己的 pom.xml 中明确设置你需要的版本。

顺便说一句，为什么您认为“*这似乎是错误的，因为它不一致：使用了 spring-web 的 pom-file 不允许的 spring-core 版本。* ”？

的版本规范`<version>x.y</version>`只是使用此版本的建议（请参阅[此处的“注释”）。](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#pom-relationships-sect-version-ranges)如果你打算强制使用这个版本，你必须设置`<version>[x.y]</version>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:09:27.963

在您的依赖项声明中，您可以添加部分以定义间接依赖项以不为此依赖项导入。

# android - 得到一个 java.lang.nullpointerexception 错误并且找不到它

> ID：14495694
> 
> 赞同：1
> 
> 时间：2013-01-24T07:04:53.170
> 
> 标签：android, nullpointerexception

这是我正在制作的一个应用程序，用于为黑桃和其他纸牌游戏记分。我收到一个空指针异常错误，不确定它在哪里或出了什么问题。感谢任何人都可以提供的任何帮助。

这是我的java文件

```
package com.innovativesolutions.cardscorekeeper;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;

public class MainActivity extends Activity {

    int scorea, scoreb, takea[], takeb[], bida[], bidb[], baga, bagb, iii;
    EditText bidaa, bidbb, actuala, actualb, totala, totalb;
    Button total;
    CheckBox nila, nilb, gnila, gnilb;

    @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        iii = 0;
        baga = 0;
        bagb = 0;
        scorea = 0;
        scoreb = 0;
        total = (Button) findViewById(R.id.button1);
        bidaa = (EditText) findViewById(R.id.abid);
        bidbb = (EditText) findViewById(R.id.bbid);
        actuala = (EditText) findViewById(R.id.atake);
        actualb = (EditText) findViewById(R.id.btake);
        totala = (EditText) findViewById(R.id.atotal);
        totalb = (EditText) findViewById(R.id.btotal);
        nila = (CheckBox) findViewById(R.id.anil);
        nilb = (CheckBox) findViewById(R.id.bnil);
        gnila = (CheckBox) findViewById(R.id.agnil);
        gnilb = (CheckBox) findViewById(R.id.bgnil);
        total.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                bida[iii]=Integer.parseInt(bidaa.getText().toString());
                bidb[iii]=Integer.parseInt(bidbb.getText().toString());
                takea[iii]=Integer.parseInt(actuala.getText().toString());
                takeb[iii]=Integer.parseInt(actualb.getText().toString());

                if (nila.isChecked()){
                    if (gnila.isChecked() && takea[iii]>=bida[iii]){
                    baga = takea[iii]-bida[iii]+baga;
                    scorea = scorea + 100 + (bida[iii]*10);
                    } 
                    else {scorea = scorea - 100 - (bida[iii]*10);}
                } else {
                    if (takea[iii]>=bida[iii]){
                        baga = takea[iii]-bida[iii]+baga;
                        scorea = scorea + (bida[iii]*10);
                    } else {scorea = scorea - (bida[iii]*10);}

                }

                if (nilb.isChecked()){
                    if (gnilb.isChecked() && takeb[iii]>=bidb[iii]){
                    bagb = takeb[iii]-bidb[iii]+bagb;
                    scoreb = scoreb + 100 + (bidb[iii]*10);
                    } else {scoreb = scoreb - 100 - (bidb[iii]*10);}
                } else {
                    if (takeb[iii]>=bidb[iii]){
                        bagb = takeb[iii]-bidb[iii]+bagb;
                        scoreb = scoreb + (bidb[iii]*10);
                    } else {scoreb = scoreb - (bidb[iii]*10);}

                }               

                if (baga>=10){
                    scorea = scorea - 100;
                    baga = 0;
                }
                if (bagb>=10){
                    scoreb = scoreb - 100;
                    bagb = 0;
                }

                iii++;
                totala.setText(scorea);
                totalb.setText(scoreb);

        }
        });

            }} 
```

这是我的 xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="Spades" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Rook" />
    </RadioGroup>

    <EditText
        android:id="@+id/editText3"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/radioGroup1"
        android:layout_marginLeft="70dp"
        android:ems="10"
        android:text="Team A"
        android:textSize="20dp" />

    <EditText
        android:id="@+id/editText4"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroup1"
        android:layout_marginLeft="50dp"
        android:layout_toRightOf="@+id/editText3"
        android:ems="10"
        android:text="Team B"
        android:textSize="20dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="75dp"
        android:layout_marginTop="20dp"
        android:layout_toRightOf="@+id/radioGroup1"
        android:text="Add Round" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText3"
        android:text="Bid"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:text="Taken"
        android:textSize="20dp" />

    <EditText
        android:id="@+id/abid"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toRightOf="@+id/textView2"
        android:ems="10"
        android:inputType="number"
        android:text="1"
        android:textSize="20dp" />

    <EditText
        android:id="@+id/bbid"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_marginLeft="50dp"
        android:layout_toRightOf="@+id/editText3"
        android:ems="10"
        android:inputType="number"
        android:text="2"
        android:textSize="20dp" />

    <EditText
        android:id="@+id/btake"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText4"
        android:layout_alignRight="@+id/bbid"
        android:layout_alignTop="@+id/textView2"
        android:ems="10"
        android:inputType="number"
        android:text="1"
        android:textSize="20dp" />

    <CheckBox
        android:id="@+id/anil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/abid"
        android:layout_alignBottom="@+id/abid"
        android:layout_toRightOf="@+id/abid"
        android:checked="false"
        android:text="Nil?" />

    <CheckBox
        android:id="@+id/bnil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/bbid"
        android:layout_alignBottom="@+id/bbid"
        android:layout_alignParentRight="true"
        android:text="Nil?" />

    <CheckBox
        android:id="@+id/bgnil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btake"
        android:layout_alignBottom="@+id/btake"
        android:layout_alignParentRight="true"
        android:text="Nil?" />

    <EditText
        android:id="@+id/atake"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText3"
        android:layout_below="@+id/abid"
        android:ems="10"
        android:inputType="number"
        android:text="2"
        android:textSize="20dp" />

    <CheckBox
        android:id="@+id/agnil"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/atake"
        android:layout_alignBottom="@+id/atake"
        android:layout_centerHorizontal="true"
        android:checked="false"
        android:text="Nil?" />

    <EditText
        android:id="@+id/btotal"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/atotal"
        android:layout_alignBottom="@+id/atotal"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:inputType="number"
        android:text="0" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/atotal"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/atake"
        android:layout_marginTop="30dp"
        android:ems="10"
        android:text="0" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:17:22.383

这个 NPE 在下面几行。

```
 bida[iii]=Integer.parseInt(bidaa.getText().toString());
            bidb[iii]=Integer.parseInt(bidbb.getText().toString());
            takea[iii]=Integer.parseInt(actuala.getText().toString());
            takeb[iii]=Integer.parseInt(actualb.getText().toString()); 
```

您尚未将这些数组名称的大小定义为

> takea[]、takeb[]、bida[]、bidb[]

只是在下面做是行不通的。您需要为这些数组分配大小。那么只有它会起作用

> int takea[]，takeb[]，bida[]，bidb[]；

做类似的事情`bida = new int[10];`

在你开始使用它们之前。// 大小将取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:28:31.547

只是你需要初始化你声明的整数上的所有数组。如下初始化所有这些`onCreate()`：

> ```
>  @Override
>     public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.activity_main);
>     iii = 0;
>     baga = 0;
>     bagb = 0;
>     scorea = 0;
>     scoreb = 0;
>     bida=new int[10];
>     bidb=new int[10];
>     takea=new int[10];
>     takeb=new int[10];
>     ........................
>  } 
> ```

还解析整数的值以设置`TextView`如下：

> ```
>  totala.setText(String.valueOf(scorea));
>             totalb.setText(String.valueOf(scoreb)); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:20:06.873

在

```
total.onClickListener() 
```

你在做这个

```
bida[iii]=Integer.parseInt(bidaa.getText().toString());
bidb[iii]=Integer.parseInt(bidbb.getText().toString());
takea[iii]=Integer.parseInt(actuala.getText().toString());
takeb[iii]=Integer.parseInt(actualb.getText().toString()); 
```

我没有看到这些整数数组的任何初始化。在您为它们分配值时，它们为空。在 onCreate 或声明中初始化。

# c++ - 处理cpp中的对象时出错

> ID：14495695
> 
> 赞同：0
> 
> 时间：2013-01-24T07:04:56.897
> 
> 标签：c++

我对cpp很陌生。我在以下代码中遇到问题。
我希望当我从 main 一次又一次地调用 checkyo() 时， id 的值应该会增加。但是，它保持不变。

**如果输入

检查是 = 1

检查是 = 1

检查是 = 1

检查是 = 1

检查是 = 1

按任意键继续 。. .**

**但是，我希望输出是**

**如果输入

检查是 = 1

检查是 = 2

检查是 = 3

检查是 = 4

检查是 = 5

***请指出我的错误？***

```
#include<iostream>
#include<vector>
int count1;
using namespace std;

class A{
  int id;
 public:
 A(){
      id=0;          
  }

  void check()
  {
   ++id;
   cout<<"check is = " << id << endl;

   }   
  };    

 class B{

  vector<A> v;
public: 
    void checkyo()
   {
       if(count1==1)
       {
           cout<< "Entered if \n" ;
           A a;
           v.push_back(a);
       }
    A temp = v.back();
    temp.check();
   }

  };

int main()
 {   
    B b;
    count1 =1;
    b.checkyo();
    count1++;

    b.checkyo();
    b.checkyo();
    b.checkyo();
    b.checkyo();

    system("pause");
    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:12:19.870

因为在 checkyo() 函数中，您只需 push_back 一次，然后将 count1 更改为 2，因此在 check() 函数中`v`始终有一个元素输出`1`。

```
A temp = v.back();
temp.check(); 
```

temp 始终是最后一个元素 in 的副本`v`，它不是对 v 的最后一个元素的引用。

您可以引用最后一个元素，`v`其中应该为您提供所需的操作：

```
A &temp = v.back();
temp.check(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:12:44.167

在调用之前`check()`，创建一个临时对象

```
A temp = v.back();
temp.check(); 
```

这个`id`临时对象的 增加了，但`id`你`vector`的对象中的 s 没有增加。

当您`checkyo()`再次调用时，会有一个`A`带有`id`of的新临时文件`0`。如果要增加向量中的最后一个对象，则必须使用对该对象的引用

```
A &last = v.back();
last.check(); 
```

现在最后一个对象不再被复制，每次调用时它`id`都会增加, 。`1``checkyo()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:12:09.220

更改`A temp`为`A& temp`。您正在复制它，而不是对向量中的那个进行操作。

# r - 加速重复的函数调用

> ID：14495697
> 
> 赞同：2
> 
> 时间：2013-01-24T07:05:05.043
> 
> 标签：r, vectorization

我正在尝试计算以下值：

```
1/N * sum[i=0 to N-1]( log(abs(r_i - 2 * r_i * x_i)) ) 
```

其中 x_i*递归*计算如下：

```
x_{i+1} = r_i * x_i * (1 - x_i) 
```

其中所有的`r_i`s 都被给出（尽管它们随着 改变`i`），并且`x_0`被给出。（据我所知，没有任何棘手的数学方法可以将此计算简化为非迭代公式以加快速度）。

我的问题是它很慢，我想知道是否有一些外部观点可以帮助我**加快速度**。

```
# x0: a scalar. rs: a numeric vector, length N
# N: typically ~5000
f <- function (x0, rs, N) {
    lambda <- 0                                                                 
    x <- x0                                                                     
    for (i in 1:N) {                                                            
        r <- rs[i]                                                              
        rx <- r * x                                                             
        lambda <- lambda + log(abs(r - 2 * rx))                                 
        # calculate the next x value
        x <- rx - rx * x                                                        
    }                                                                           
    return(lambda / N)                                                          
} 
```

现在就其本身而言，这个函数相当快，**但**我想调用它约 4,000,000 次（2000 x 2000 矩阵中的每个单元格一次），每个都有不同的`rs`向量。

但是，如果我只调用它 2500 次（N=1000），它需要大约 25 秒，具有以下配置文件：

```
 self.time self.pct total.time total.pct
"f"       19.98    81.22      24.60    100.00
"*"        2.00     8.13       2.00      8.13
"-"        1.32     5.37       1.32      5.37
"+"        0.70     2.85       0.70      2.85
"abs"      0.56     2.28       0.56      2.28
":"        0.04     0.16       0.04      0.16 
```

**有谁知道我如何加快速度？**看起来乘法需要一段时间，但我已经预先缓存了任何重复的乘法。

我还尝试利用 与减少对and的调用`sum( log(stuff(i)) )`相同的优势，但结果证明这是不可行的，因为长度向量（以千计）和典型值至少为 1，因此最终成为R。`log(prod(stuff(i))``log``abs``stuff``N``prod(stuff)``Inf`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:25:39.800

在我看来，瓶颈是`for`你的函数中的循环。

我用 Rcpp 重写它如下：

```
# x0: a scalar. rs: a numeric vector, length N
# N: typically ~5000
x0 <- runif(1)
N <- 5000
rs <- rnorm(5000)
f <- function (x0, rs, N) {
    lambda <- 0                                                                 
    x <- x0                                                                     
    for (i in 1:N) {                                                            
        r <- rs[i]                                                              
        rx <- r * x                                                             
        lambda <- lambda + log(abs(r - 2 * rx))                                 
        # calculate the next x value
        x <- rx - rx * x                                                        
    }                                                                           
    return(lambda / N)                                                          
}

library(inline)
library(Rcpp)
f1 <- cxxfunction(sig=c(Rx0="numeric", Rrs="numeric"), plugin="Rcpp", body='
  double x0 = as<double>(Rx0);
  NumericVector rs(Rrs);
  int N = rs.size();
  double lambda = 0, x = x0, r, rx;
  for(int i = 0;i < N;i++) {
    r = rs[i];
    rx = r * x;
    lambda = lambda + log( fabs(r - 2 * rx) );
    x = rx - rx * x;
  }
  lambda /= N;
  return wrap(lambda);
  ')
f(x0, rs, N)
f1(x0, rs)

library(rbenchmark)

benchmark(f(x0, rs, N), f1(x0, rs)) 
```

`f1`比`f`我上次测试的速度快 140 倍。

# ios - UIManagedDocument 和“此 NSPersistentStoreCoordinator 没有持久存储”错误

> ID：14495699
> 
> 赞同：1
> 
> 时间：2013-01-24T07:05:35.757
> 
> 标签：ios, xcode, core-data, uimanageddocument

我正在尝试使用 UIManagedDocument 在我正在构建的应用程序中设置我的核心数据堆栈。我在 init 方法中有一个对象 DocumentController ：

```
 - (id)init
{

if (self = [super init]) {
    //custom initialization

        NSString *path = [[DMDocumentController documentsDirectory] stringByAppendingPathComponent:@"logDatabase"];
        NSURL *documentURL = [NSURL fileURLWithPath:path];

        self.managedDocument = [[UIManagedDocument alloc] initWithFileURL:documentURL];

        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

        self.managedDocument.persistentStoreOptions = options;

    }

    return self;
} 
```

然后我有了这个名为 performWithDocument 的块方法，它使您可以访问块中的文档。块定义如下：

```
typedef void (^OnDocumentReady) (UIManagedDocument *document); 
```

该方法如下所示：

```
- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) {
        onDocumentReady(self.managedDocument);
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.managedDocument.fileURL path]]) {
        [self.managedDocument saveToURL:self.managedDocument.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidLoad];
    } else if (self.managedDocument.documentState == UIDocumentStateClosed) {
        [self.managedDocument openWithCompletionHandler:OnDocumentDidLoad];
    } else if (self.managedDocument.documentState == UIDocumentStateNormal) {
        OnDocumentDidLoad(YES);
    }
} 
```

无论如何，每当我尝试插入一个新实体时，我的应用程序在事后几秒钟（当它尝试保存时）崩溃并且我在标题中收到错误消息。当我认为 UIManagedDocument 为我处理了核心数据堆栈内容时，我不确定如何解决这个问题。有没有人有任何指针？

# c - 应用 free() 后节点的值？

> ID：14495702
> 
> 赞同：0
> 
> 时间：2013-01-24T07:05:49.440
> 
> 标签：c, free, output

我试图编写一个简单的函数来释放动态分配的内存

```
typedef struct list{
   int data;
   struct list * link;
} list;

list * head = NULL;
void release(list * head_new){
   list * dummy = NULL;
   while(head_new != NULL){
     dummy = head_new->link;
     printf("before freeing %p, %d", head_new->link, head_new->data);
     free(head_new);
     printf("free returns %p, %d", head_new->link, head_new->data);
     head_new = dummy
   }  
} 
```

使用主函数将值赋予列表，并且在此特定函数中，即使在释放 head_new 节点后，也会打印一些值

```
1
12
1
123
1 12 1 123 before freeing 00622A40, 1
free returns 006200C4, 6433408
before freeing 00622A60, 12
free returns 006200C4, 6434048
before freeing 00622A70, 1
free returns 006200C4, 6433344
before freeing 00000000, 123
free returns 00000000, 123 
```

如果你注意到.. 最后两行返回相同的数据值.. 即使我用更大的列表尝试了这个。同样的事情也会发生！最后 2,3 个值（即 head_new->data）按原样返回。我的问题：这是一种错误吗？或者有这样的价值观是正常的？这件事与我有关，因为没有免费的返回类型，那么它如何显示相同的值？请帮助我清除我的疑问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T07:08:16.543

```
free(head_new);
printf("free returns %p, %d", head_new->link, head_new->data); 
```

导致您的程序具有**未定义的行为（UB）**。请注意，一旦您调用`free`了指针，任何取消引用指针的尝试`head_new`都会导致未定义的行为。
UB 意味着您的程序可以显示任何行为，而不必产生崩溃。简单地说取消引用它是无效的，不应该这样做。

> **幕后可能会发生什么？**

`free`不会重新初始化已释放的内存，它只是将其标记为可重用。
因此，地址处的内容仍然相同，并且引用指针会为您提供这些内容。但是，这并不重要，因为 UB 发生在您取消引用指针的那一刻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:07:36.887

该值将一直存在，直到它被其他一些数据覆盖。

当你释放时，唯一发生的事情是内存将被放回空闲池，这样如果其他人要求，就会给你一个。

# c# - 如何从 Web 应用程序调用 Web 服务的更新功能

> ID：14495711
> 
> 赞同：1
> 
> 时间：2013-01-24T07:06:55.683
> 
> 标签：c#, asp.net, sql-server

我有一个网络服务功能，用于更新我的数据库。我想从我的网络应用程序中调用它，但它不起作用。在我调用我的 Web 服务后，它可以通过我的 Web 服务进行更新，但不能通过我的 Web 应用程序进行更新。我调用服务功能的代码是否正确？

这是我的网络服务更新功能：

```
[WebMethod(EnableSession = true)]
public string sell_item(string name, string photo, string description, string initial_price, string bid_time)
{
    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=Bidding;Integrated Security=True");
    con.Open();
    SqlCommand cmd = new SqlCommand("UPDATE login SET name = @name, photo = @photo, description = @description, initial_price = @initial_price, bid_time = @bid_time where username='"+ Session["username"] +"'", con);

    cmd.Parameters.AddWithValue("@name", name);
    cmd.Parameters.AddWithValue("@photo", photo);
    cmd.Parameters.AddWithValue("@description", description);
    cmd.Parameters.AddWithValue("@initial_price", initial_price);
    cmd.Parameters.AddWithValue("@bid_time", bid_time);

    cmd.ExecuteNonQuery();
    con.Close();
    return "Product has been upload successfully!";
} 
```

这是我调用该函数的 Web 应用程序代码：

```
public partial class bidpage : System.Web.UI.Page
{
abc.Service a = new abc.Service();
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = Convert.ToString(a.sell_item(Convert.ToString(TextBoxProduct.Text), Convert.ToString(TextBoxPhoto.Text), Convert.ToString(TextBoxDescription.Text), Convert.ToString(TextBoxPrice.Text), Convert.ToString(TextBoxBidTime.Text)));
} 
```

}

在我的 sqlcommand 中，我尝试删除 WHERE，我的 Web 应用程序可以将数据更新到数据库，但对于所有行，更新的数据都是相同的。但是当我放回 WHERE 语句后跟 Session["username"] 时，我在 Web 应用程序中的更新不会存储任何数据。有什么帮助吗？我真的不知道如何使用会话更新我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:11:59.797

将您的 Web 服务添加到您的服务参考中。

它将生成一个客户端。为您的服务创建一个客户端。您可以通过您的客户端访问该方法。

```
Yourservice.ServiceClient client = new  Yourservice.ServiceClient();
client.SellItem(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:19:10.333

您可以做的是添加一个try catch，看看您是否可以捕获异常并在出现错误时返回一个字符串。

# java - 如何在java中拆分数字？

> ID：14495712
> 
> 赞同：1
> 
> 时间：2013-01-24T07:07:04.470
> 
> 标签：java

我正在尝试拆分号码，但不知道该怎么做。

我提到了这个链接。

[https://stackoverflow.com/a/12297231/1395259](https://stackoverflow.com/a/12297231/1395259)

假设我有一个数字`12345678`。

使用上面的链接，我将分成 3 个位置。所以输出变为**`123` `456` `78`**.

但我想要它，**`12` `345` `678`**并且我想把被分割成表格的字符串 **`12.345.678`**。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T07:22:38.980

java.text 包提供了格式化数字的所有合理选项

```
 DecimalFormat f = new DecimalFormat("#,###");
    DecimalFormatSymbols fs = f.getDecimalFormatSymbols();
    fs.setGroupingSeparator('.');
    f.setDecimalFormatSymbols(fs);
    String s = f.format(12345678);
    System.out.println(s); 
```

输出

```
12.345.678 
```

直接使用 DecimalFormat 非常灵活，但通常我们可以使用更短的版本

```
String s = NumberFormat.getNumberInstance(Locale.GERMAN).format(12345678); 
```

产生相同的字符串

```
12.345.678 
```

不同的国家有不同的数字（和日期）格式规则。通常我们希望我们的程序国际化/本地化并使用默认语言环境版本

```
NumberFormat.getNumberInstance().format(number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:10:03.170

一种懒惰的方法是反转字符串，应用上述方法，然后再次反转它。

您可以使用[StringBuffer 的 Reverse Function](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html#reverse())，如[使用 Java 反转“Hello World”字符串的每个单词中所示](https://stackoverflow.com/questions/2441501/reverse-hello-world-in-java)

```
12345678

87654321

876 543 21

12 345 678 
```

我当然假设您想按 3 分割，剩下 <3 位数字的组出现在开头而不是结尾，就像您链接的方法一样。

不太懒惰的方法是使用字符串长度来调整您链接的方法以从`length%3`字符开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:14:51.557

使用您链接中的解决方案，我将改写如下（已测试！）：

```
 public String[] splitStringEvery(String s, int interval) {
    int arrayLength = (int) Math.ceil(((s.length() / (double)interval)));
    String[] result = new String[arrayLength];

    int j = s.length();
    int lastIndex = result.length;
    for (int i = lastIndex - 1; i > 0; i--) {
        result[i] = s.substring(j - interval, j);
        j -= interval;
    } //Add the last bit
    result[0] = s.substring(0, j);

    return result;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:34:32.283

这是一个拆分 int 值并返回指定格式的 String 的方法：

```
public static String split( int n ) {
    String result = "", s = Integer.toString( n );
    while ( s.length() > 3 ) {
        result = s.substring( s.length() -3, s.length() ) + ((result.length() > 0)? "." + result : "" );
        s = s.substring( 0, s.length() -3 );
    }
    return s + "." + result;
} 
```

输入：

```
12345678 
```

输出：

```
12.345.678 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T07:45:50.403

如果是字符串，请使用 StringBuilder 或 StringBuffer。这是代码：

```
public class SplitNumber {
    public static void main(String[] args){
        int number = 12345678;

        String numberStrBefore = Integer.toString(number);

        StringBuffer numberStrAfter = new StringBuffer();
        numberStrAfter.append(numberStrBefore.charAt(0));
        numberStrAfter.append(numberStrBefore.charAt(1));
        numberStrAfter.append('.');
        numberStrAfter.append(numberStrBefore.charAt(2));
        numberStrAfter.append(numberStrBefore.charAt(3));
        numberStrAfter.append(numberStrBefore.charAt(4));
        numberStrAfter.append('.');
        numberStrAfter.append(numberStrBefore.charAt(5));
        numberStrAfter.append(numberStrBefore.charAt(6));
        numberStrAfter.append(numberStrBefore.charAt(7));

        System.out.println("Number Before: " + numberStrBefore);
        System.out.println("Number After: " + numberStrAfter.toString());
    }
} 
```

这与方法相同：

```
public class SplitNumber {
    public static void main(String[] args){
        int number = 12345678;
        int[] split = {2,3,3}; //How to split the number

        String numberStrAfter = insertDots(number, split);

        System.out.println("Number Before: " + number);
        System.out.println("Number After: " + numberStrAfter);
    }

    public static String insertDots(int number, int[] split){
        StringBuffer numberStrAfter = new StringBuffer();
        String numberStr = Integer.toString(number);

        int currentIndex = 0;       
        for(int i = 0; i < split.length; i++){
            for(int j = 0; j < split[i]; j++){
                numberStrAfter.append(numberStr.charAt(currentIndex));
                currentIndex++;
            }
            numberStrAfter.append('.');
        }
        numberStrAfter.deleteCharAt(numberStrAfter.length()-1); //Removing last "."

        return numberStrAfter.toString();
    }
} 
```

此版本使用该方法，允许您将任何数字拆分为您想要的任何格式，只需将“split”变量更改为您想要将字符串拆分为的格式。（例如：将 12345678 拆分为：1.1234.5.67.8 意味着“拆分”必须设置为 {1,4,1,2,1}）。

# oracle - Oracle VARCHAR 列上的数字比较如何工作？

> ID：14495714
> 
> 赞同：4
> 
> 时间：2013-01-24T07:07:09.273
> 
> 标签：oracle, plsql, oracle11g

我有一个表，其中两列的类型为 VARCHAR2(3BYTE) 和 VARCHAR2(32BYTE)。当我执行选择查询 ( `where col1=10`and `where col1='10'`) 或 ( `where col2=70001`or `col2='70001'`) 时，在每组 where 子句中获取的记录数是相同的。这是怎么发生的？Oracle 如何处理字符串文字和数字常量并与列数据类型的数据进行比较？

但这不适用于 VARCHAR2(128BYTE) 类型的列。查询需要`where col3='55555555001'`工作并`where col3=55555555001`引发 ORA-01722 错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T08:19:26.763

如[SQL 语言参考](http://docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements002.htm#i46862)中所述：

> *   在 SELECT FROM 操作期间，Oracle 将列中的数据转换为目标变量的类型。
> *   ...
> *   在将字符值与数值进行比较时，Oracle 会将字符数据转换为数值。

当类型不匹配时，对表列执行隐式转换。这可以通过在 SQL*Plus 中使用一些虚拟数据进行跟踪来看到。

```
create table t42 (foo varchar2(3 byte));
insert into t42 (foo) values ('10');
insert into t42 (foo) values ('2A');
set autotrace on explain 
```

这有效：

```
select * from t42 where foo = '10';

FOO
---
10

Execution Plan
----------------------------------------------------------
Plan hash value: 3843907281

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |     1 |     3 |     3   (0)| 00:00:01 |
|*  1 |  TABLE ACCESS FULL| T42  |     1 |     3 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("FOO"='10')

Note
-----
   - dynamic sampling used for this statement (level=2) 
```

但是这个错误：

```
select * from t42 where foo = 10;

ERROR:
ORA-01722: invalid number

Execution Plan
----------------------------------------------------------
Plan hash value: 3843907281

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |     1 |     3 |     3   (0)| 00:00:01 |
|*  1 |  TABLE ACCESS FULL| T42  |     1 |     3 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(TO_NUMBER("FOO")=10) 
```

注意过滤器的区别；`filter("FOO"='10')`与`filter(TO_NUMBER("FOO")=10)`. 在后一种情况下，与一个数字进行比较时，`to_number()`将对表中的每一行执行 a，将该转换的结果与固定值进行比较。因此，如果任何字符值无法转换，您将得到 ORA-01722。如果该列上存在索引，则正在应用的函数还将停止正在使用的索引。

如果你有多个过滤器，它会变得有趣。Oracle 可能会在不同的时间以不同的顺序评估它们，因此您可能不会总是看到 ORA-01722，它有时会弹出。说你有`where foo = 10 and bar = 'X'`。如果 Oracle 认为它可以`X`先过滤掉非值，它只会将 应用于`to_number()`剩下的内容，并且较小的样本可能在`foo`. 但是，如果您有`and bar = 'Y'`，则非`Y`值可能包括非数字，*或者*Oracle 可能会`foo` *首先*过滤，这取决于它认为值的选择性。

道德是永远不要将数字信息存储为字符类型。

* * *

我正在寻找一个 AskTom 参考来支持道德，[我看到的第一个](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45012348053)参考是指“谓词顺序的变化”以及“不要在 varchar2 中存储数字”的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T08:18:48.537

如果涉及数字列或值和字符列，Oracle将字符列值转换为数字，然后将数字转换为数字。就好像你写过：

```
where to_number(col3) = 55555555001 
```

这就是`ORA-01722: invalid number`如果单行包含无法转换为数值的字符串 (n col3) 时会出现错误的原因。

出于这个原因`IS_NUMBER`，我们的 Oracle 数据库中有一个函数，它不会导致错误，但对于无法转换为数字的值返回 NULL。然后你可以安全地写：

```
where is_number(col3) = 55555555001 
```

函数定义为：

```
CREATE OR REPLACE FUNCTION is_number (p_str IN VARCHAR2)
  RETURN NUMBER
IS
  l_num NUMBER;
BEGIN
  l_num := to_number(p_str);
  RETURN l_num;

EXCEPTION
  WHEN others THEN
    RETURN NULL;
END is_number; 
```

# java - 我试图通过单选警报对话框来设置 texview 的文本

> ID：14495715
> 
> 赞同：-8
> 
> 时间：2013-01-24T07:07:12.323
> 
> 标签：java, android, dialog, android-alertdialog

这是承载对话的类的上半部分。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MovieAdd extends Activity {

private EditText mTitleText;
private Button mSavebutton;
private Long mRowId;
private MyMoviesDBAdapter mDbHelper;
private String genrename;
private TextView mGenretext;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().setSoftInputMode     (WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 

    mDbHelper = new MyMoviesDBAdapter(this);

    setContentView(R.layout.add_movie_dialog);

    mTitleText = (EditText) findViewById(R.id.mMovietitle);
    mGenretext = (TextView) findViewById(R.id.genre_text);

    mSavebutton = (Button) findViewById(R.id.mSavebutton);

    mRowId = savedInstanceState != null ? savedInstanceState.getLong(MyMoviesDBAdapter.KEY_ROWID) 
        : null;

    registerButtonListeners();
    onCreateDialog(savedInstanceState);

} 
```

问题是，当我使用此代码时，TextView 总是设置为“Thriller”，“which”变量似乎总是初始化为 14。我什至不确定这是实现我想要的最佳方法稍后再做，在对话框关闭后，“genrename”变量然后被传递到数据库中。

```
 public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(MovieAdd.this);
    builder.setTitle(R.string.select_genre);
           builder.setItems(R.array.genres, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
               // The 'which' argument contains the index position
               // of the selected item

            switch(which) {
                case 0:
                    genrename = "Action";
                case 1:
                    genrename = "Anime";
                case 2:
                    genrename = "Childrens";
                case 3:
                    genrename = "Classics";
                case 4:
                    genrename = "Comedy";
                case 5:
                    genrename = "Cult";
                case 6:
                    genrename = "Documentary";
                case 7:
                    genrename = "Drama";
                case 8:
                    genrename = "Foreign";
                case 9:
                    genrename = "Horror";
                case 10:
                    genrename = "Music";
                case 11:
                    genrename = "Romance";
                case 12:
                    genrename = "Sci-fi";
                case 13:
                    genrename = "Sports";
                case 14:
                    genrename = "Thriller";                 
                }
            mGenretext.setText(genrename);

           }
    });

    return builder.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:11:03.603

您需要`break`在每种情况下使用。

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
AlertDialog.Builder builder = new AlertDialog.Builder(MovieAdd.this);
builder.setTitle(R.string.select_genre);
       builder.setItems(R.array.genres, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which) {
           // The 'which' argument contains the index position
           // of the selected item

        switch(which) {
            case 0:
                genrename = "Action";
             break;                
            case 1:
                genrename = "Anime";
             break;                
            case 2:
                genrename = "Childrens";
             break;                
            case 3:
                genrename = "Classics";
             break;                
            case 4:
                genrename = "Comedy";
             break;                
            case 5:
                genrename = "Cult";
            break;                
            case 6:
                genrename = "Documentary";
            break;                
            case 7:
                genrename = "Drama";
            break;                
            case 8:
                genrename = "Foreign";
            break;                
            case 9:
                genrename = "Horror";
            break;                
            case 10:
                genrename = "Music";
            break;                
            case 11:
                genrename = "Romance";
            break;                
            case 12:
                genrename = "Sci-fi";
            break;                
            case 13:
                genrename = "Sports";
            break;                
            case 14:
                genrename = "Thriller"; 
             break;                

            }
        mGenretext.setText(genrename);

       }
});

return builder.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:11:21.827

在您的每种情况下添加`break;`如下：

> ```
>  public void onClick(DialogInterface dialog, int which) {
>            // The 'which' argument contains the index position
>            // of the selected item
>         switch(which) {
>             case 0:
>                 genrename = "Action";
>               break;
>             case 1:
>                 genrename = "Anime";
>               break;
>             case 2:
>                 genrename = "Childrens";
>             case 3:
>                 genrename = "Classics";
>             case 4:
>                 genrename = "Comedy";
>                break;
>                 ....................................             
>             }
>         mGenretext.setText(genrename);
>        }
> }); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:12:07.567

在开关的每一种情况下使用`break`，否则控制将下降到最后一种情况。因此，它只显示**Thriller**。

# libpcap - 是否 libpcap 释放内存 ifself？

> ID：14495717
> 
> 赞同：2
> 
> 时间：2013-01-24T07:07:32.513
> 
> 标签：libpcap, winpcap

我的程序像这样使用 libpcap：

> 而 pcaket = pcap_next() {
> 
> ```
> ...
> 
> (modify the pcaket and do checksum)
> 
> ...
> 
> pcap_sendpacket(pcaket) 
> ```
> 
> }

最近，我发现我的程序中存在内存泄漏......

我的问题是： **libpcap 会在 pcap_next 之后释放 pcaket 吗？还是我必须自己做免费工作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:58:08.733

> libpcap 会在 pcap_next 之后释放 pcaket 吗？

该数据包包含在 libpcap 内部的缓冲区中（附加到`pcap_t`）；没有为每个数据包分配一个新的缓冲区，因此缓冲区在 之后没有被释放`pcap_next()`，它在`pcap_t`关闭之后被释放。您不必自己释放它。

（这也意味着来自特定调用`pcap_next()`or`pcap_next_ex()`的数据包数据*不能*保证在下一次调用`pcap_next()`or `pcap_next_ex()`- or `pcap_loop()`or后保持有效`pcap_dispatch()`；它可能会被下一个数据包或下一批数据包的数据覆盖。）

# php - Wordpress 错误 500（内部服务器错误）

> ID：14495721
> 
> 赞同：0
> 
> 时间：2013-01-24T07:07:46.183
> 
> 标签：php, wordpress, apache, apache2

上周，我将 wordpress 实例移至新服务器。之后我经常收到 500 Internal Server Error。这个错误来得突然。apache 错误日志不包含任何致命错误消息，但它包含 PHP 警告消息。

每当发生此错误时，我都会重新启动 apache 并且站点会恢复正常状态。这个 500 Internal Server Error 的原因可能是什么？

重启apache如何解决这个错误？只有此站点出现此错误，部署到此服务器的其他站点工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-30T08:02:27.817

BD中包含的wordpress urls指向旧的url的原因之一，在phpmyadmin中运行这个脚本可以解决：

```
UPDATE wp_options SET option_value = REPLACE(option_value,'old_site','new_site');
UPDATE wp_posts SET post_content = REPLACE(post_content,'old_site','new_site');
UPDATE wp_posts SET guid = REPLACE(guid,'old_site','new_site');
UPDATE wp_postmeta SET meta_value = REPLACE(meta_value,'old_site','new_site'); 
```

也存在您的主机帐户包含带有您的用户名的文件夹的可能性，在 wp_options 表中可能包含，例如 upload_path: "/home/[folder_old_id]/public_html/wp-content/uploads"

```
UPDATE wp_options SET option_value = REPLACE(option_value,'folder_old_id','folder_new_id'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-14T09:42:19.010

Wordpress 内部服务器错误，500 内部服务器错误已解决！

首先在wordpress中登录管理仪表板

1.  去设置
2.  选择选项永久链接
3.  更改选项并在所有选项列表中选择帖子网址格式并保存
4.  检查访问我们的页面出现错误...

# magento - 产品页面上的 Magento 视频库

> ID：14495737
> 
> 赞同：0
> 
> 时间：2013-01-24T07:09:17.583
> 
> 标签：magento, video-gallery

我正在使用magento 1.6。我想在产品页面上设计一个产品视频库。所以就像应该显示缩略图一样，当用户点击它时，它会弹出并播放视频。请帮帮我……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T12:25:42.943

这是演示，您可以通过 [http://www.magentocommerce.com/magento-connect/catalog/product/view/id/15764/s/video-gallery-7783/](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/15764/s/video-gallery-7783/)

# ruby - 如何创建以整数为键的结构哈希？

> ID：14495738
> 
> 赞同：-1
> 
> 时间：2013-01-24T07:09:27.960
> 
> 标签：ruby, hash, struct

对不起，我的蹩脚问题，但我坚持这个。

我需要使用默认构造函数创建结构哈希。我试过以下代码：

```
@@str = Struct.new("A", :x, :y)
@data = Hash.new { |v,k| v[k] = @@str.new('1','2') } 
```

但它不工作。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:26:55.017

```
Struct.new("A", :x, :y)
@data = Hash.new { |hash,key| hash[key] = Struct::A.new('1','2') } 
```

# android - 将 JakeWharton 项目从 github 添加到我的 android 项目时出错。？

> ID：14495741
> 
> 赞同：1
> 
> 时间：2013-01-24T07:09:40.183
> 
> 标签：android

当我将其添加为[库](https://github.com/JakeWharton/Android-ViewPagerIndicator)时，我在项目资源管理器中的项目中得到一个红十字标记。我的示例代码工作正常。请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:25:06.733

**试试这些：**

1.  Android：项目构建路径必须是 API 14+
2.  JAVA 编译器必须是 1.6
3.  支持库（jar 文件）必须相同

# asp.net-mvc-4 - 路由不符合我对 ASP.NET 中 MVC4 路由的期望

> ID：14495745
> 
> 赞同：0
> 
> 时间：2013-01-24T07:09:55.857
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我有两条非常简单的路线。一个工作并将第一个参数（年份）传递给控制器​​，另一个将参数作为“文本”发送。我只是不明白。

以下是我定义的两条路线。它们的形状和我一模一样。

控制器只是..

```
 public ActionResult Index(string year)...

        // SESSIONS
        routes.MapRoute("SessionRouteAll", "Session/{year}",
                  new
                  {
                      /* Your default route */
                      controller = "Session",
                      action = "Index",
                      year = currentYear
                  });

        // SPEAKERS
        routes.MapRoute("SpeakerRouteAll", "Speaker/{year}",
                  new
                  {
                      /* Your default route */
                      controller = "Speaker",
                      action = "Index",
                      year = currentYear
                  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:30:06.830

我在这里遇到了其他问题，导致了问题。

# ios - 如何在ios设备上安装应用程序后显示一次警报

> ID：14495747
> 
> 赞同：1
> 
> 时间：2013-01-24T07:10:07.193
> 
> 标签：ios, objective-c, uialertview

在设备或模拟器上安装应用程序后，如何在应用程序启动时仅显示一次警报，直到我将其从设备中删除。可以告诉我吗。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T07:13:06.903

你可以这样做：

```
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"]) {
   //first launch
   //show your alert
   [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
   [[NSUserDefaults standardUserDefaults] synchronize];
}
else
{
    // app already launched
} 
```

# javascript - 由于 div 标签代码的可见性及时弹出打开问题

> ID：14495748
> 
> 赞同：0
> 
> 时间：2013-01-24T07:10:17.367
> 
> 标签：javascript, html, jsp

我有`pop.jsp`两个 div 标签，当我点击时，`FindByid`只能通过 id 字段显示找到，如果我点击，`findByname`则该字段仅显示完美工作。但问题是，当我打开一个弹出窗口时，有时没有该字段可见或有时它可以顺利工作我不知道为什么会发生我想相应地在单击按钮时看到相应的字段

注意有时div标签的可见性仅适用于 `internet explorer`其他浏览器没有div标签可见所以请解决我的问题

这是我的 index.jsp 弹出代码，我通过它弹出

```
<script type="text/javascript">
function windowLoadByName(windowHeight, windowWidth) {
    var centerWidth = (window.screen.width - windowWidth) / 2;
    var centerHeight = (window.screen.height - windowHeight) / 2;

    newWindow = window.open(
            'PopUp.jsp',
            'mywindow',
            'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                    + ',left=' + centerWidth + ',top=' + centerHeight,
            "status=1").divHiding(1);
    newWindow.focus();

}
function windowLoadById(windowHeight, windowWidth) {
    var centerWidth = (window.screen.width - windowWidth) / 2;
    var centerHeight = (window.screen.height - windowHeight) / 2;
    newWindow = window.open(
            'PopUp.jsp',
            'mywindow',
            'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                    + ',left=' + centerWidth + ',top=' + centerHeight)
            .divHiding(2);

    newWindow.focus();
    return newWindow.name;
} 
```

这是我的 pop.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://jakarta.apache.org/taglibs/input-1.0"
    prefix="input"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript">
    function loadByName() {
        var l = document.getElementById("firstName");
        var v = l.value;
        window.opener.loadName(v);
        window.close();
    }
    function loadById() {
        var ids = document.getElementById("id");
        var v = ids.value;
        window.opener.loadId(v);
        window.close();
    }

    function divHiding(id) {

        var div1 = document.getElementById('div1');
        var div2 = document.getElementById('div2');

        // Check what the value of the button pressed and displays the correct div
        if (id == 1)
            div1.style.display = 'block';
        else if (id == 2) {
            div2.style.display = 'block';
        }
    }
</script>
</head>
<body>

    <form name="employeeForm" method="get">
        <div id="div1" style="display: none;">
            Employee Name:
            <center>
                <input type="text" name="firstName" id="firstName" />
            </center>
            <center>
                <input type="submit" name="Search" value="Search"
                    onclick="loadByName()" />
            </center>
        </div>
        <div id="div2" style="display: none;">
            Employee Id:
            <center>
                <input type="text" name="firstName" id="id" />
            </center>
            <center>
                <input type="submit" name="Search" value="Search"
                    onclick="loadById()" />
            </center>
        </div>
    </form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:39:36.767

问题是因为您在 window.open(..) 中调用了 divHiding 函数，并且调用该函数时页面可能没有加载，这就是有时它起作用有时不起作用的原因。我建议的解决方案是通过 url 参数传递要显示的 div：

```
newWindow = window.open(
            'PopUp.jsp?div=1',
            'mywindow',
            'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                    + ',left=' + centerWidth + ',top=' + centerHeight) 
```

在 popup.jsp 中你可以执行下面的代码来检查参数是否为 1，然后将 div1 设置为可见，对 div2 执行相同的操作

```
<div id="div1" style="display: <%=(request.getParameter("div").equals("1") ? "block" : "none") %>;"> 
```

# google-chrome - $.ajaxSend、$.ajaxComplete、Rails UJS 和 Chrome

> ID：14495751
> 
> 赞同：0
> 
> 时间：2013-01-24T07:10:41.233
> 
> 标签：google-chrome, jquery

我在我的 rails 项目中有 ajaxified 链接：

```
<%= link_to 'Click me!', some_url, remote: true %> 
```

我添加了钩子来监听 ajax 事件：

```
$(function(){
  $(document).ajaxSend( function(){$('#busy').show()} )
  $(document).ajaxComplete( function(){$('#busy').hide()} )
}) 
```

这在 FF 中按预期工作。

在 Chrome 中，`#busy`当发送 ajax 请求时，div 会按预期显示，但是当请求到达时，Chrome 会变为空白，并且控制台会显示一条长长的 javascript 错误消息：

```
jQuery.event.dispatch
elemData.handle.eventHandle
jQuery.event.trigger
(anonymous function)
jQuery.extend.each
jQuery.fn.jQuery.each
jQuery.fn.extend.trigger
... (several hundred lines of pretty much the same stuff) 
```

为什么 Chrome 对似乎是简单添加事件处理程序的东西嗤之以鼻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T16:32:16.140

我知道这不能直接回答您的问题，但是在此页面上很好地捕获了处理 ajax 事件的 rails 方式：[https ://github.com/rails/jquery-ujs/wiki/ajax](https://github.com/rails/jquery-ujs/wiki/ajax)

这可能与事件向上传递的方式有关。

```
<%= link_to 'Click me!', some_url, remote: true, id: 'clickable' %>

$('#clickable').on('ajax:beforeSend', function(event, xhr, settings) {
  $('#busy').show()
});

$('#clickable').on('ajax:complete', function(event, xhr, settings) {
  $('#busy').hide()
}); 
```

# javascript - 如何在包含粗体和斜体标签的同时获取字符串的第一个文本节点？

> ID：14495754
> 
> 赞同：1
> 
> 时间：2013-01-24T07:10:47.760
> 
> 标签：javascript, jquery

1.  字符串是动态的

2.  它源于用户单击 dom 中的任何位置时的 onclick 事件

3.  如果字符串的第一部分是：

    " `login<b>user</b>account`"

包含在这样的一些元素中：

" `<div>login<b>user</b>account</div>`",

然后我可以用这个得到它：

```
alert($(s).find('*').andSelf().not('b,i').not(':empty').first().html());
// result is : login<b>user</b>account 
```

**但是，当它没有包含在任何元素中时，我怎样才能在这种情况下获得相同的结果。即，当它没有包含在任何元素中时？**

我尝试了下面的代码，当第一部分不包含任何内容时它工作正常，但它只在包含这些标签时`<b></b>`给出**“登录” 。**

```
 var s = $.trim('login<b>user</b> account<tbody> <tr> <td class="translated">Lorem ipsum dummy text</td></tr><tr><td class="translated">This is a new paragraph</td></tr><tr><td class="translated"><b>Email</b></td></tr><tr><td><i>This is yet another text</i></td> </tr></tbody>');

    if(s.substring(0, s.indexOf('<')) != ''){
       alert(s.substring(0, s.indexOf('<')));
    } 
```

**注意：** 建议仅针对上述字符串不特定的通用解决方案。它应该适用于有粗体标签和没有粗体标签的两种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:04:15.683

所以它只是 a`b`或 a `i`，呵呵？

递归函数总是要走的路。而这一次，这可能是最好的方法。

```
var s = function getEm(elem) {
    var ret = ''

    // TextNode? Great!
    if (elem.nodeType === 3) {
        ret += elem.nodeValue;
    }

    else if (elem.nodeType === 1 &&
        (elem.nodeName === 'B' || elem.nodeName === 'I')) {

        // Element? And it's a B or an I? Get his kids!
        ret += getEm(elem.firstChild);
    }

    // Ain't nobody got time fo' empty stuff.
    if (elem.nextSibling) {
        ret += getEm(elem.nextSibling);
    }

    return ret;
}(elem); 
```

Jsfiddle 演示了这一点：http: [//jsfiddle.net/Ralt/TZKsP/](http://jsfiddle.net/Ralt/TZKsP/)

PS：使用正则表达式或自定义标记器解析 HTML 是不好的，不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:18:10.327

您正在尝试检索所有文本，直到第一个不是 a 的元素`<b>`，`<i>`但该文本可以包含在元素本身中。这非常棘手。我觉得有更好的方法来实现你想要完成的任何事情，但这里有一个可行的解决方案。

```
function initialText(s){
  var test  = s.match(/(<.+?>)?.*?<(?!(b|\/|i))/);

  var match = test[0];
  var prefixed_element = test[1];

  // if the string was prefixed with an element tag
  // remove it (ie '<div> blah blah blah')
  if(prefixed_element) match = match.slice(prefixed_element.length);

  // remove the matching < and return the string
  return match.slice(0,-1);
} 
```

你很幸运，我发现这个问题既有趣又具有挑战性，因为这又是荒谬的。

别客气 ;-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:24:40.990

尝试这个：

```
if (s.substring(0, s.indexOf('<')) != '') {
  alert(s.substring(0, s.indexOf('<tbody>')));
} 
```

# c# - 如何监听其他进程的鼠标事件

> ID：14495755
> 
> 赞同：4
> 
> 时间：2013-01-24T07:10:46.607
> 
> 标签：c#, windows-messages

是否可以在 C# 中侦听发送到其他进程中其他窗口的鼠标相关窗口消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T07:18:10.283

Codeplex 中有一个开源项目用于该
[应用程序和 C# 中的全局鼠标和键盘挂钩 .Net 库](https://github.com/gmamaladze/globalmousekeyhook)
如果你想自己做一些额外的搜索`Windows Hooks`
[这篇](https://docs.microsoft.com/en-us/windows/win32/winmsg/hooks)文章展示了如何

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T07:14:56.200

您可以查看[Codeplex 应用程序和全局鼠标和键盘挂钩库](http://globalmousekeyhook.codeplex.com/)

> 该库附加到 Windows 全局挂钩，跟踪键盘和鼠标的单击和移动，并使用 KeyEventArgs 和 MouseEventArgs 引发常见的 .NET 事件，因此您可以轻松检索所需的任何信息：
> 鼠标坐标单击鼠标
> 按钮
> 鼠标滚轮滚动
> 按键和释放
> 特殊键状态

从上面的链接[文档](http://globalmousekeyhook.codeplex.com/documentation)：

> 在开始之前，重要的是要知道挂钩术语可以并且将可以互换使用。全局挂钩也称为系统或系统范围挂钩，将涵盖整个操作系统。应用程序钩子通常称为本地，因为顾名思义，只会对应于放置钩子（或特定线程）的单个应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:14:28.157

没有管理的方法可以做到这一点。但是，对于 Windows Api，这是可能的：

这应该可以帮助你。

[C# - 从特定应用程序捕获 Windows 消息](https://stackoverflow.com/questions/3289321/c-sharp-capturing-windows-messages-from-a-specific-application)

捕获 WM_MOUSEMOVE 将是一个好的开始 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616(v=vs.85).aspx)

但也有其他与鼠标相关的窗口消息。

# c# - 自使用 .Net 4.0 以来，Visual Studio 发布模式下的 InvalidOperationException

> ID：14495757
> 
> 赞同：18
> 
> 时间：2013-01-24T07:10:56.053
> 
> 标签：c#, linq, .net-4.0, enums, release

我在将现有的 .NET 3.5 应用程序移植到 .NET 4.0 时遇到了一些麻烦。代码不是我自己写的，所以我不知道为什么会这样。

这是情况：如果应用程序从 Visual Studio 启动（发布或调试模式无关紧要）并且如果应用程序从调试文件夹启动，代码工作正常问题是发布部署，因为不是自 4.0 起（以及 4.5 版）运行良好：-/

这是最初的调用：

```
someObject.Text = Elements.GetElement(Int16.Parse(cb1.Text)); 
```

这是代码：

```
public class Elements : EnumBase<int, Elements>
{
    public static readonly Elements Element1 = Create("Number 0", 0);
    public static readonly Elements Element2 = Create("Number 1", 1);

    private static Elements Create(string text, int value) 
    {
        return new Elements() { text = text, value = value };
    }

    public static String GetElement(int id)
    {

        // The Following Code safes the day and let the release deploy work fine.
        // It doesn´t matter if the condition becomes true or not to runtime.
        /* 
        if (id == 999999999)
        {
            Elements el = Element1;
        }
        */

        // Release deploy works also fine if you do the following line in a loop instead of linq.
        return BaseItemList.Single(v => v.Value == id).Text; 
    }
}

[Serializable()]
public class EnumBase<T, E> :  IEqualityComparer<E> 
        where E : EnumBase<T, E>
{
    private static readonly List<E> list = new List<E>();
    protected string text;
    protected T value;

    protected static IList<E> BaseItemList
    {
        get
        {
            return list.Distinct(new EnumBase<T, E>(false)).ToList();
        }
    }

    protected EnumBase()
    {
        list.Add(this as E);
    }

    /// <summary>
    /// Constructor for distinct to avoid empty elements in the list
    /// </summary>   
    private EnumBase(bool egal) {}

    public string Text
    {
        get { return text; }
    }

    public T Value
    {
        get { return value; }
    }

    #region IEqualityComparer<E> Member

    // ...

    #endregion
} 
```

关键是`return BaseItemList.Single(v => v.Value == id).Text;`。它抛出一个`InvalidOperationException`，因为在 Release 中`public static readonly Elements Element1 = Create("Number 0", 0);`并`public static readonly Elements Element2 = Create("Number 1", 1);`没有准备好。在发生异常的那一刻，BaseItemList 为空（BaseItemList.Count = 0）。我不确定为什么这发生在发布形式的 bin 文件夹中，而不是从 Visual Studio 中发布。对于测试，我在项目属性中停用了“优化代码”，但它没有帮助。

当然，该构造不是最好的，但我想知道 .Net 4.0 中有什么不同使代码更平坦。

感谢帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T07:17:33.757

我认为问题在于您依赖静态初始化程序来`Elements`运行，尽管您没有引用其中的任何字段。没有静态构造函数的类型中的类型初始化器只能保证在第一次静态字段访问之前运行。C# 5 规范的第 10.5.5.1 节：

> 如果类中存在静态构造函数（第 10.12 节），则在执行该静态构造函数之前立即执行静态字段初始值设定项。否则，静态字段初始化器在第一次使用该类的静态字段之前的依赖于实现的时间执行。

第 10.12 节有：

> 封闭类类型的静态构造函数在给定的应用程序域中最多执行一次。静态构造函数的执行由在应用程序域中发生的以下第一个事件触发：
> 
> *   类类型的一个实例被创建。
> *   类类型的任何静态成员都被引用。

[.NET 4](http://msmvps.com/blogs/jon_skeet/archive/2010/01/26/type-initialization-changes-in-net-4-0.aspx)中类型初始化的实现发生了变化，但这只是一个实现细节——你的代码之前被破坏了，你只是不知道而已。

如果您将代码更改为：

```
static Elements() {} 
```

在`Elements`类中，*那么我相信它会起作用 - 因为静态构造函数强制类型初始化在第一个**成员*访问之前立即发生，而不仅仅是“在第一个*字段*访问之前的某个时间点”。

我个人对一般模式持怀疑态度，但这是一个稍微不同的问题。

# asp.net-mvc-4 - 模型中的 MVC4 列表

> ID：14495761
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:11.133
> 
> 标签：asp.net-mvc-4

我对 ASP.NET MVC 很陌生，并且有包含联系信息的模型，还有联系备注列表。模型如下所示：

```
public class Investor
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Company { get; set; }
    public string Email { get; set; }
    public string Phone { get; set; }
    public string Cell { get; set; }
    public string Fax { get; set; }
    [Display(Name="Address 1")]
    public string Address1 { get; set; }
    [Display(Name = "Address 2")]
    public string Address2 { get; set; }
    public string City { get; set; }
    [StringLength(2, ErrorMessage = "State must be 2 characters")]
    public string State { get; set; }
    public string Zip { get; set; }
    public List<Note> Notes { get; set; }
}
public class Note
{
    [Key]
    //[Column(Order = 0)]
    public string ContactTableId { get; set; }
    //[Key]
    //[Column(Order = 1)]
    public int? ContactId { get; set; }
    public string note { get; set; }
    public DateTime? DateCreated { get; set; }
} 
```

在控制器中，我将注释加载到 Investor 对象中，如下所示：

```
 public ActionResult Edit(int id = 0)
    {

        string query = "SELECT * FROM Notes " +
            "WHERE ContactTableId = 'Investors' AND ContactId = " + id +
            " ORDER BY DateCreated DESC";
        var notes = db.Database.SqlQuery<Note>(query).ToList();

        Investor investor = db.Investors.Find(id);
        investor.Notes = notes;

        if (investor == null)
        {
            return HttpNotFound();
        }
        return View(investor);
    } 
```

虽然这可行，但我认为有一种更优雅的“最佳实践”方式可以使用外键或模型中的某些机制自动将 Notes 表加载到 Investor 中，而无需在控制器中执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:55:49.253

如我所见，您正在使用实体框架。

```
string query = "SELECT * FROM Notes " +
    "WHERE ContactTableId = 'Investors' AND ContactId = " + id +
    " ORDER BY DateCreated DESC";
var notes = db.Database.SqlQuery<Note>(query).ToList(); 
```

此代码可以用 LINQ 替换，例如：

```
db.Notes.Where(x => x.ContactTableId == "Investors" && x.ContactId == id).OrderByDescending(x => x.DateCreated).ToList() 
```

此代码永远不会返回 HttpNotFound：

```
if (investor == null)
{
    return HttpNotFound();
} 
```

因为你会`NullReferenceException`在这里得到异常：

```
investor.Notes = notes; 
```

如果您创建具有关系的表，EF 可以自动加载 Notes for`Investor`

# git - git 中的分支限制/撤销 git repo 的副本

> ID：14495763
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:15.323
> 
> 标签：git, permissions, repository, branch, bitbucket

我正在尝试锻炼一个工作流程，其中需要批准更改才能合并到主分支中。

一种明显的解决方案是拒绝/批准拉取请求。但是我们遇到的问题是我们不希望员工维护他们自己的公司代码仓库。因此，我们有一个每个人都推送到的公司帐户/回购。有没有一种方法可以让用户在他们的帐户下拥有自己的代码副本，但一旦他们离开公司就撤销访问权限，这样我们就可以有效地使用拉取请求？

关于限制提交到分支，我还有哪些其他选择。

我们使用比特桶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:22:21.017

授予员工访问公司仓库的权限，在他们离开时删除该访问权限？

开发人员不是孩子；您可以告诉他们“除非通过拉取请求，否则不要承诺掌握”并合理地期望他们这样做。如果不能，请考虑寻找其他开发人员。

# html - 调整 Excel Web 导入

> ID：14495764
> 
> 赞同：1
> 
> 时间：2013-01-24T07:11:15.557
> 
> 标签：html, excel, reporting, jira

Excel 极客和软件工程师，

我正在使用“Excel Webdata Import”来生成错误和受影响的测试用例的透视报告。数据来自专有工具，是一个 html 表。大多数 Excel 的 HTML 导入工作，但我有一些奇怪的效果：

1) 一些 TD 包含鼠标悬停时显示的 DIV。在 Excel 中，我为 DIV 中的信息获取多个单元格（粗体标题、描述、最后修改日期）

2) 一个 HTML 列的数据应该转到两个 excel 单元格，一个文本和一个图标。

问题：我怎么能：

*   后处理 Excel 中的数据（刷新时自动）？
*   调整导入样式表？

对于 1）我想将 3 个 excel 行折叠为一行中的 3 个单元格

对于 2) 我想使用正则表达式左右拆分单元格。

我想避免使用其他工具来使工具链尽可能短。

感谢您的任何提示和指示。

**编辑：这是一个示例行：**

```
<tr class="level0">
    <!-- case 1) -->
    <!-- some fancy javascript and div stuff in html. shown in browser is an icon + mouse-over-div -->
    <td>
        <a onMouseOver="Element.show('bug_35017')" onMouseOut="Element.hide('bug_35017')" href="jira/browse/35017" target="_blank"><img alt="Bug_" border="0" src="/images/bug_.gif?1348035189" /></a>
        <div id="bug_35017" style="padding: 5px; width: 40%; display: none; position: absolute; left: 30%; border: 1px solid #666; background: white; color: #000">
            <img alt="Bug_" border="0" src="/images/bug_.gif?1348035189" />
            <b style="color: #000">JIRA 35017</b>
            &nbsp;&nbsp; last modification: 2012-12-19 10:13:54<p/>
            <blockquote style="color: #000">
                "Delete account - Please review Testcase 12345" 
            </blockquote>
        </div>
    </td>

    <!-- case 2) -->
    <!-- a date and the info if the testcase was ok or not, using an icon in one TD -->
    <td>
                17:26:45 12.12.12 <img alt="Nok" src="/images/nok.gif?1348035189" />
    </td>
</tr> 
```

我希望将其视为：

```
| 35015 | 2012-12-19 10:13:54 | 删除帐户请查看 Testcase 12345 | 17:26:45 12.12.12 | 诺克 |

```

但我得到：

```
| 35015 | 17:26:45 12.12.12 诺克 |
| 2012-12-19 10:13:54 | |
| 删除帐户请查看 Testcase 12345 | |

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:59:51.593

从输入看来，您使用 Jira 作为错误跟踪。我也是 QA，90% 的项目都使用它，所以我的提示如下 - 尝试**内置 Excel 导出**：

![Jira Excel 导出](../Images/8391dde8f30cc5e27ee7c9806511ad8a.png)

第一个选项将仅导出可见字段（可以使用 Jira 自定义），第二个选项将提供与问题相关的所有可能字段/信息。在我 4 年多的 QA 经验中，到目前为止，我没有遇到过这 2 个不足以生成任何可能或不可能的报告和统计数据的案例。

另一个建议 - 在您的问题中添加[jira](/questions/tagged/jira "显示标记为“jira”的问题")标签，这样您就更有可能收到相关的答案。

# php - tinymce 格式化无法实时运行

> ID：14495766
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:22.653
> 
> 标签：php, mysql, content-management-system, tinymce

使用 tinymce 作为内容，它在本地服务器上运行良好，但在远程服务器上会破坏格式。

保存内容：

```
mysql_real_escape_string( htmlentities($slide_name,ENT_QUOTES,'UTF-8')) 
```

检索时：

```
html_entity_decode($slide_name, ENT_QUOTES,'UTF-8') 
```

在本地服务器上它正确显示内容：

```
<p><strong style="text-decoration: underline;">Contact:</strong> 0000-<span style="color: #ff0000;">245</span></p> 
```

在远程（第一次更新后）：

```
<p><span style="\"><strong style="\">Contact:</strong></span> 0000-<span style="\">245</span></p> 
```

对两个数据库使用`utf8_general_ci`排序规则（远程/本地）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:51:34.130

经过大量搜索和**托比艾伦**的提示，我找到了解决方案。
这是一个问题：
`magic_quotes_gpc`在`ON`远程服务器上并且`magic_quotes_gpc`在`OFF`本地服务器上。

由于我们无法将远程服务器控制到 php 配置级别，因此我们需要关闭 magic_quotes_gpc 运行时间。

[从php.net](http://php.net/manual/en/security.magicquotes.disabling.php)找到一个代码片段

```
<?php
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
}
?> 
```

如果可能的话，使用 php.ini 关闭 magic_quotes_gpc，否则我们可以使用上面的函数来关闭 magic_quotes_gpc 运行时。

我正在为未来的搜索者发布这个答案。

# c# - ASP.Net 4.0 的实体框架与开发人员编写的实体类之间的主要区别是什么？

> ID：14495768
> 
> 赞同：1
> 
> 时间：2013-01-24T07:11:27.217
> 
> 标签：c#, asp.net

在实体框架之前，开发人员正在编写代码实体类，其中包含数据表字段（列）的 getter 和 Setters 方法。

引入实体框架的目的是什么，实体框架和旧的传统写实体类的方式有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:24:10.620

如果不使用 EF（或任何其他 ORM 工具），则必须手动编写实体类和相关的数据库操作。

ORM 工具自动创建实体类和相关数据库操作的抽象。

在 EF 的情况下，它创建实体类和一个`ObjectContext`（或一个`DBContext`），它允许您在不编写 SQL 代码的情况下操作 DB 实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:15:47.577

实体框架为实体类提供 ORM 功能。您不需要在数据库层上制作 CRUD 或数据库操作，EntityFramework 会处理它。

# excel - Excel 宏 - 仅将非空单元格从一张表粘贴到另一张表

> ID：14495769
> 
> 赞同：4
> 
> 时间：2013-01-24T07:11:32.200
> 
> 标签：excel, copy-paste, vba

下面是我用来从一张纸复制单元格并粘贴到另一张纸上的代码。

```
Sheets("codes").Select
Range("A5:A100").Select
Selection.Copy
Sheets("Sheet2").Select
Range("B28").Select
ActiveSheet.Paste 
```

问题是此范围内的某些单元格是空白的，但我不希望将它们复制到 Sheet2。我从[这里](https://stackoverflow.com/questions/821364/selecting-non-blank-cells-in-excel-with-vba)得到了一些想法，但是这种方法太长了。有没有一种方法可以迭代选择并检查该值是否为非空并粘贴。这样我也可以在空白单元格中粘贴一些其他文本（例如#NA）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T07:49:20.053

看起来你可能在这里犯了一些常见的新手错误（没关系，我们都做到了）。

* * *

## 带有逐行解释的 VBA 示例

**提示：**尽量不要使用“选择”或“复制”。当您所要做的就是引用单元格本身时，为什么还要使用 select 呢？例如，而不是使用

```
Sheets("codes").Select
Range("A5:A100").Select
Selection.Copy
Sheets("Sheet2").Select
Range("B28").Select
ActiveSheet.Paste 
```

只需使用

```
dim mySheet as Worksheet, myOtherSheet as Worksheet, myBook as Workbook 'Define your workbooks and worksheets as variables
set myBook = Excel.ActiveWorkbook
set mySheet = myBook.Sheets("codes")
set myOtherSheet = myBook.Sheets("Sheet2")

dim i as integer, j as integer 'Define a couple integer variables for counting

j = 28 'This variable will keep track of which row we're on in Sheet2 (I'm assuming you want to start on line 28)
for i = 5 to 100 'This is the beginning the the loop which will repeat from 5 to 100 . . .
   if mySheet.Cells(i,1).value <> "" then ' . . . for each digit, it will check if the cell's value is blank. If it isn't then it will . . .
      myOtherSheet.Cells(j,2).value = mySheet.Cells(i,1).value ' . . . Copy that value into the cell on Sheet2 in the row specified by our "j" variable.
      j = j + 1 'Then we add one to the "j" variable so the next time it copies, we will be on the next available row in Sheet2.
   end if
next i 'This triggers the end of the loop and moves on to the next value of "i". 
```

当我刚开始的时候，我一直都在做同样的事情，但它从来没有成功过。“选择”会导致左右错误。使用我的代码，阅读评论，你会没事的。**快速警告：**我在这台计算机上没有 Excel，所以我无法测试代码。如果由于某种原因它不起作用，请给我留言，明天我会在工作中修复它。

将数据复制到第二张表时，上面的代码将完全省略空白单元格。如果您想为空白单元格输入特定文本（如“N/A”），则可以使用以下内容：

```
 dim mySheet as Worksheet, myOtherSheet as Worksheet, myBook as Workbook 'Define your workbooks and worksheets as variables
 set myBook = Excel.ActiveWorkbook
 set mySheet = myBook.Sheets("codes")
 set myOtherSheet = myBook.Sheets("Sheet2")

 dim i as integer, j as integer 'Define a couple integer variables for counting

 j = 28 'This variable will keep track of which row we're on in Sheet2 (I'm assuming you want to start on line 28)
 for i = 5 to 100 'This is the beginning the the loop which will repeat from 5 to 100 . . .
    if mySheet.Cells(i,1).value <> "" then ' . . . for each digit, it will check if the cell's value is blank. If it isn't then it will . . .
       myOtherSheet.Cells(j,2).value = mySheet.Cells(i,1).value ' . . . Copy that value into the cell on Sheet2 in the row specified by our "j" variable.
    else 'If the cell is blank, then . . .
       myOtherSheet.Cells(j,2).value = "N/A" ' . . . place the text "N/A" into the cell in row "j" in Sheet2.
    end if 'NOTICE we moved the "end if" statement up a line, so that it closes the "if" statement before the "j = j + 1" statement. _
      This is because now we want to add one to the "j" variable (i.e., move to the next available row in Sheet2) regardless of whether the cell in the "codes" sheet is blank or not.
       j = j + 1 'Then we add one to the "j" variable so the next time it copies, we will be on the next available row in Sheet2.
 next i 'This triggers the end of the loop and moves on to the next value of "i". 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T07:57:15.273

简单的：

```
 Sheet1.Range("A1:a500").SpecialCells(xlCellTypeConstants).Copy Sheet2.Range("b2") 
```

我用过`xlCellTypeConstants`，但还有很多其他的可能性。

`Sheet1`一般相当于`Sheets("Sheet1")`。第一个是 VBE（程序员视图）中的名称，第二个是用户界面（用户视图）中的名称。我通常更喜欢第一种语法，因为它更短并且允许重命名工作表（为用户）而不影响代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:56:19.520

如果您不需要格式化，我会使用以下内容。它所做的只是将您在工作表上指定的范围复制到一个变量，循环遍历该变量，检查是否为空的单元格并放入您喜欢的任何字符串。它又好又快。如果要保留格式，可以仅将特殊格式粘贴到输出范围。

```
Sub CopyNonBlankCells(rFromRange As Range, rToCell As Range, sSubIn As String)
    'You have three inputs.  A range to copy from (rFromRange), a range to copy to (rToCell) and a string to put in the blank cells.        

    Dim vData As Variant, ii As Integer, jj As Integer

   'Set to a variable since it's quicker
    vData = rFromRange.Value

    'Loop through to find the blank cells
    For ii = LBound(vData, 1) To UBound(vData, 1)   'Loop the rows
        For jj = LBound(vData, 2) To UBound(vData, 2)    'Loop the columns
            'Check for empty cell.  Quicker to use Len function then check for empty string
            If VBA.Len(vData(ii, jj)) = 0 Then vData(ii, jj) = sSubIn
        Next jj
    Next ii

    'Output to target cell.  Use the 'With' statement because it makes the code easier to read and is more efficient
    With rToCell.Parent
        .Range(.Cells(rToCell.Row, rToCell.Column), .Cells(rToCell.Row + UBound(vData, 1) - 1, rToCell.Column + UBound(vData, 2) - 1)).Value = vData
    End With

End Sub 
```

并调用它：

```
Call CopyNonBlankCells(Sheets("codes").Range("A5:A100"), Sheets("Sheet2").Range("B28"), "Non-blank") 
```

# c++ - 使用 try catch 和 throw

> ID：14495770
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:32.700
> 
> 标签：c++, try-catch

我对 try 函数的理解是停止在 try 和 catch 之间可能发生的错误。但如果我做这样的事情：

```
std::vector<int> testvector;
testvector.push_back(1);

try{
cout << testvector[53485375345534] << endl;
}catch(...){

} 
```

我的想法是它不会导致内存费用出现错误，但在这种情况下它什么也不做，仍然会弹出错误。

有人可以解释使用 try 的正确原因吗，到目前为止，根据我的经验，我可以事先使用 if 语句，当你需要 try 语句时，有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:13:45.133

`operator []`不检查`std::vector`.

但是，`std::vector::at()`确实会引发异常。您应该改用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T08:24:44.810

有不同类型的错误：

1.  例外。这些是您的程序创建的错误`throw`，您可以`catch`处理这些错误。
2.  访问冲突、系统异常等等，也就是“崩溃”。这些是非常严重的，当它们发生时你不能做太多（至少不是在标准 C++ 的可能性范围内），所以最好编写正确的程序然后这些不会出现。
3.  断言。这些旨在在开发和测试期间检查您的程序逻辑和约束。它们通常只出现在调试代码中，即它们应该在发布版本中关闭。如果发生断言，在 Windows 中会弹出一个窗口，说明出了什么问题。

我只是在这里猜测-您使用的是 MS Visual Studio 吗？

MSVC 的向量实现`operator[]`在调试模式下检查 ' 参数并*断言*该参数是否确实在向量的范围内。该断言*也不*例外，因此您无法捕捉到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:16:43.393

您的测试用例无效，`std::vector::operator[]`不进行边界检查，也不抛出异常，您期望的是未定义的行为而不是异常。你可以试试[std::vector::at](http://en.cppreference.com/w/cpp/container/vector/at)函数

```
std::vector<int> testvector;
testvector.push_back(1);

try{
    std::cout << testvector.at(53485375345534) << endl;
}catch(std::exception& e){
    std::cout << e.what() << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T07:40:13.373

Try-Catch 的概念是关于处理可能会破坏您的程序的错误，但大多数情况下可以在不这样做的情况下进行处理。您的示例对于完全正确的操作来说是一个很好的示例，但前提是您请求的数据存在。“仅当”可以由函数本身处理，但是您永远无法对错误的输入做出反应。相反，在这种情况下，如果您使用 Try-Catch 包围调用，则该函数会引发可由您的代码处理的异常。在 Catch 块中，通常会意识到您通知用户或至少将错误行为写入日志文件，您还可以加载默认值甚至更改变量并重复函数调用。有时 Try-Catch 被描述为“请求宽恕而不是许可”（后者将是先前的 If）。

一般来说，Try-Catch 可以用伪代码读取为：

```
Try:
    Do what you think is right to do but be aware it could be wrong...
Catch:
    You were too optimistic and should react in a proper way... 
```

我希望这有助于更好地理解 Try-Catch 概念。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T07:30:27.010

当您使用一些您不确定它们是否会工作的函数时，您将使用 throw 语句。例如，您想创建一个 GUI 窗口，您将使用 try 块，因此如果没有创建窗口，您将不会最终等待不存在的窗口上的输入。

# javascript - ajax - 获取文本字段的成功响应值

> ID：14495771
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:36.633
> 
> 标签：javascript, ajax

我正在尝试获得成功响应，以将 ajax 中的值发送到各自的字段中。无论出于何种原因，我都无法做到这一点。在成功部分，我发出“alert(responseObject)”，其中结果在附加图像中。所以数据会按照我的意愿返回，但我无法将值填充到匹配的字段中。

```
$(document).ready(function() {
    function myrequest(e) {
        var man_part_number = $('#man_part_number').val();
        $.ajax({
            method: "GET",
            url: "includes/autofill.php",

            data: {
                man_part_number: man_part_number
            },
            success: function(responseObject) {
                alert(responseObject);
                //This alert response results is in attached image
                $('#manufacture').val(responseObject.manufacture);
                $('#model').val(responseObject.model);
                $('#type').val(responseObject.type);
            },
            failure: function() {
                alert('fail');
            }
        });
    }

    $('#fetchFields').click(function(e) {
        e.preventDefault();
        myrequest();
    });
});

<button type="button" id="fetchFields">Fetch</button>

<input type="text" name="manufacture" id="manufacture" />
<input type="text" name="model" id="model" />
<input type="text" name="type" id="type" /> 
```

![返回 AJAX 代码](../Images/b3cc8ebc293010e87bb649bafeb5c898.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:14:36.683

返回的字符串**不是**JSON。在警报框中查看字符串的结尾。它有“测试”。这意味着响应被 jQuery 解析为文本，因为您没有指定`dataType`选项。如果您确实将其指定为“JSON”，它将失败，因为“{...}”旁边的“test”是无效的 JSON。我想重点是您需要返回有效的 JSON，如果您确实希望返回 JSON，请将调用的`dataType`选项设置为`$.ajax`“JSON”。同时，您的服务器无论如何都应该在响应中设置正确的标头。（有时）指定`dataType`选项仍然更好。

默认情况下，如果您不指定该`dataType`选项，jQuery 将检查响应的标头以获取 Content-Type。如果它与“JSON”、“HTML”、“Text”、“XML”或其他一些类型的有效类型匹配，它将尝试通过它来解析它。我打赌您的响应没有正确设置其标题，否则 jQuery 会尝试将其转换为 JSON 并失败。它可能以纯文本形式返回，因此 jQuery 会看到它并将其解析为文本……这就是它解析良好的原因。但是`responseObject`您引用的不是`Object`您所期望的，因为您没有遵循这些程序来确保正确解析。

# c++ - C++继承：在运行时确定继承的方法

> ID：14495772
> 
> 赞同：0
> 
> 时间：2013-01-24T07:11:37.310
> 
> 标签：c++, multiple-inheritance, extend

我有一个扩展 B 的 D 类，它扩展了 A。我现在想添加一个 C 类，它具有与 B 完全相同的接口，但提供不同的实现。所以我设计如下： ![钻石](../Images/e5ee50b7780e490e8506b6c7593a4669.png)

这并不是我想要的，因为我只需要一个 D 的实例来扩展 B 或 C 而不是同时扩展两者，但是，这仅在运行时确定。上面设计的问题当然是，如果我在 D 中调用一个在 B 和 C 中都实现的方法，它会模棱两可。

所以我想要的是在运行时创建 B 或 C 的实例，然后将其转换为 D。每次 D 的实例调用继承的方法时，它都应该使用其原始对象之一。

我需要在每个方法调用周围摆弄 typeid 和 if/else 还是有更优雅的方法来做到这一点？

```
class A{ 
virtual f1();
virtual f2();
}

class B : public virtual A{
f1();
f2();
f3();
}

class C : public virtual A{
f1();
f2();
f3();
}

class D : public B, public C{
f4(){f1(); f3)};
}

...
D* d = new D();
E* e = new E(d);
e->d->f1();
e->d->f4(); 
```

然后将 D 的实例传递给另一个与 D 一起工作的类 (E)，因此，我无法修改 D 的接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:18:32.780

我认为你的继承方式是错误的，你所做的就是将你想要调用的所有方法定义为你称之为 D 类的虚拟方法在 A 类中，B 类和 C 类都有自己的这些方法的实现.

然后使用 A* 类型的数据结构，用指向 B 和 C 类型对象的指针填充它，然后调用需要调用的方法，该方法需要调用包含 A* 类型指针的数据结构中的所有对象，即 vtable然后机制将确保根据实际对象的类型使用 B 类或 C 类的实现。

请参阅[具体类和抽象类有什么区别？](https://stackoverflow.com/questions/2149207/what-is-the-difference-between-a-concrete-class-and-an-abstract-class/2149488#2149488)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:16:31.613

听起来你只是想要

```
class A{
    virtual void DoMagic() = 0;

};  
class B{
    virtual void DoMagic(){};

};  
class D{
    virtual void DoMagic(){};

};

...
bool INeedB = true;//or false
A* a;
if(INeedB){
    a= new B();
}else{
    a = new C();
}
a->DoMagic(); // will call the appropriate method based on the value of INeedB; 
```

除非 D 实际上有自己的行为？然后您可以查看[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)，并使 D 成为 B 或 C 实例的装饰器。

编辑：您的`D`班级不需要继承任何`A` `B`或`C`根本。

```
class D{
    D(A* aObj):a(aObj){}
    void f3(){ a->f1();a->f2();}
    A *a;
}; 
```

将`A *a`上面的示例替换为`D d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:46:41.580

C++ 是一种静态类型语言。无论您对类型声明做什么，都会在编译时详细说明，因此`D`无法在运行时定义继承图。

您可能需要的是`A`作为 B 和 C（具体实现）的多态基础（所有相关的虚拟方法，包括析构函数），并且 D 是“*所有者`A`*”，通过包含 A* 将在 D 构造时分配给 a`new B`或`new C`取决于输入。

D 析构函数将调用`delete A`，现在您必须决定复制和分配。

我的建议是不要使用 A*，而是使用`std::unique_ptr`（将使拥有的对象在 Ds 之间移动）或`std::shared_ptr`.

如果您需要每个 D 有自己的 A，那么让 A 有一个`clone`方法（在 B 和 C 中重写，分别返回 a`new B`和`new C`）并在 D 的复制 ctor 和分配运算符中调用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T07:17:05.827

似乎`D`根本不需要继承自`A`（或`B`或`C`）。相反，它只需要在 的实例`B`或实例中调用函数`C`。

你可以像这样实现它：

```
class A
{
public:
    virtual void f1();
    virtual void f2();
};

class B : public A;
class C : public A;

class D
{
   A* b_or_c;

public:
    D(A* a_pointer)
        : b_or_c(a_pointer)
        {}

    void f3()
        {
            b_or_c->f1();
            b_or_c->f2();
        }
}; 
```

可以这样使用：

```
B b;  // An instance of B
C c;  // An instance of C

D d1(&b);
D d2(&c);

d1.f3();  // Will cause `f1` and `f2` in the object `b` to be called
d2.f3();  // Will cause `f1` and `f2` in the object `c` to be called 
```

# python - Django 1.4 syncdb + psycopg 因时区错误而失败

> ID：14495773
> 
> 赞同：2
> 
> 时间：2013-01-24T07:11:45.370
> 
> 标签：python, django, postgresql, psycopg2

在 MacOS 上安装 Postgres.app 并使用 Django、dj-database-url 和 psycopg2 初始化 python virtualenv 后，我反复得到：

```
/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 194, in _cursor
self.ops.set_time_zone_sql(), [tz])
psycopg2.DataError: invalid value for parameter "TimeZone": "UTC" 
```

为我的 Django 应用程序执行“python manage.py syncdb”时。

关于原因是什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:11:45.370

当我检查 base.py 文件的第 194 行时，我注意到以下代码：

```
tz = 'UTC' if settings.USE_TZ else settings_dict.get('TIME_ZONE') 
```

通过将我的 settings.py 文件中的 USE_TZ 参数更改为“False”，我得到了以下错误：

```
psycopg2.DataError: invalid value for parameter "TimeZone": "Australia/Perth" 
```

“澳大利亚/珀斯”是我的 settings.py 文件中的时区设置，所以至少它现在正在访问我的时区。

再次查看 psycopg2 base.py 文件，我注意到以下代码：

```
if tz:
                try:
                    get_parameter_status = self.connection.get_parameter_status
                except AttributeError:
                    # psycopg2 < 2.0.12 doesn't have get_parameter_status
                    conn_tz = None
                else:
                    conn_tz = get_parameter_status('TimeZone')

                if conn_tz != tz: 
```

将调试“打印 conn_tz”放入 base.py 表明 conn_tz（可能是 postgres 数据库的时区设置）是“澳大利亚/西部”。

将我的 settings.py TIME_ZONE 更改为 'Australia/West' 允许 syncdb 正常运行。

# java - 同步（这个）与同步（MyClass.class）

> ID：14495776
> 
> 赞同：29
> 
> 时间：2013-01-24T07:11:52.217
> 
> 标签：java, synchronization

> **可能重复：**
> [.class 的 Java 同步块](https://stackoverflow.com/questions/2056243/java-synchronized-block-for-class)

我正在阅读[一篇](http://javarevisited.blogspot.in/2011/04/synchronization-in-java-synchronized.html)关于同步的文章。我对以下几点感到困惑，需要更多说明

1) 用于同步块。如何

```
 synchronize(this){
    // code
   } 
```

不同于

```
 synchronize(MyClass.class){
    //code
   } 
```

2）同步实例方法意味着线程必须获得实例的独占锁，而同步静态方法意味着线程必须获得整个类的锁（如果我错了，请纠正我）。因此，如果一个类具有三个方法，其中一个是静态同步的，那么如果一个线程在该方法上获得锁，那么这意味着它将在整个类上获得锁。那么这是否意味着其他两个也将被锁定，并且没有其他方法能够访问这两个方法，因为整个类都有锁定？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-24T07:15:03.367

`MyClass.class`并且`this`是不同的东西，它们是对不同对象的不同引用。

`this`- 是对该类的这个特定实例的引用，并且

`MyClass.class`- 是对`MyClass`描述对象的引用。

这些同步块的不同之处在于，第一个将同步具体处理**该**实例的所有线程`MyClass`，第二个将同步**所有**线程，而与调用哪个方法的哪个对象无关。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-24T07:14:55.837

第一个示例（获取锁`this`）用于实例方法，第二个示例（获取`class`对象锁）- 在`static`方法中。

如果一个线程获得锁`MyClass.class`，其他线程将不得不等待进入该块所在`static`方法的同步块。同时，所有线程将能够获得该类的特定实例的锁并执行实例方法。

# php - 如何将图像链接列表添加到几个动态生成的 div（通过 PHP）？

> ID：14495779
> 
> 赞同：0
> 
> 时间：2013-01-24T07:12:05.697
> 
> 标签：php, jquery, html, dynamic, lightbox

我是 PHP 新手，我刚刚弄清楚如何从多个数组生成内容以填充 40 个 div。这是一个产品库，不同的部分是通过 for 循环生成的。每次循环时，我都使用索引不仅从数组中获取信息，而且还为整个 div 创建一个链接，我想将其用作 JQuery Lightbox 以显示每个产品的不同视图。我已经能够创建指向第一个图像的链接。我一直在尝试使用 scandir() 函数、readdir() 函数来获取每个图像的列表，但我没有任何成功。图片在文件夹中，_images/products/0/0.jpg（这个文件夹还包含1.jpg、2.jpg等。每次循环，它都会变成_images/products/1/0.jpg - 那里此文件夹中还有更多图像。

```
$names = array ('item1', 'item2', 'item3', etc...);
$prices = array ('item1', 'item2', 'item3', etc...);
$number = array ('item1', 'item2', 'item3', etc...);
$serves = array ('item1', 'item2', 'item3', etc...);

$names_size = sizeof($names)

$img_link = "_images/products/"; // used to create the link for $div2

$div1 = "<div id=\"";
$div2 = "\" class=\"products grid_3\"><a href=\"";
$div3 = "\"><h3 class=\"name\">";
$hero_img  = "</h3><img class=\"hero\" src=\"_images/heros/";
$li_price  = "<ul><li>Price: <span class=\"price\">$";
$li_serves = "<li>Serves: <span class=\"serves\">";
$li_num = "<li>KC# <span class=\"kcnum\">";
$li_close  = "</span></li>";
$div4 = "</ul></a></div>";

for ($i = 0; $i < $names_size; $i++) {
    $div = $div1 . $names[$i] . $div2 . $img_link . $i . "/0.jpg" . $div3 .  ucwords($names[$i]) . $hero_img . $i . ".jpg\" alt=\"" . ucwords($names[$i]) . "\" />";
    $div .= $li_price . $prices[$i] . $li_close;
    $div .= $li_kc_num . $kc_no[$i] . $li_close;
    $div .= $li_serves . $serves[$i] . $li_close;
    $div .= $div4;

    echo "{$div}" . "\n";
} 
```

我遇到的问题是，在回显最终的 $div 之前，我需要为特定产品添加链接列表，以便我可以使用使灯箱适用于每个 div。我尝试在回显完成的 $div 之前插入代码（如下），但我无法继续使用它。

```
$gallery_array = array();

$files = scandir($img_link . $i);
    foreach($files as $file) {
        array_push($gallery_array, $file);
}

$gallery_array_size = sizeof($gallery_array); 
```

老实说，我什至不知道 Lightbox 是否可以这样工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:45:19.547

你不必创建一个`$div`这样的。您可以将 php 和 HTML 代码混合在一起。

你`$gallery_array`的是一样的`$files`。

```
<?php

$names = array ('item1', 'item2', 'item3');
$prices = array ('item1', 'item2', 'item3');
$kc_no = array ('item1', 'item2', 'item3');
$serves = array ('item1', 'item2', 'item3');

$names_size = sizeof($names);

$img_link = "_images/products/";

for ($i = 0; $i < $names_size; $i++) {
    ?>
    <div id="<?=$names[$i]?>" class="products grid_3">
        <a href="<?=$img_link.$i?>/0.jpg">
            <h3 class="name"><?=ucwords($names[$i])?></h3>
            <img class="hero" src="_images/heros/<?=$i?>.jpg" alt="<?=ucwords($names[$i])?>" />
            <ul>
                <li>Price: <span class="price">$<?=$prices[$i]?></span></li>
                <li>KC# <span class="kcnum"><?=$kc_no[$i]?></span></li>
                <li>Serves: <span class="serves"><?=$serves[$i]?></span></li>
            </ul>
            <span>Gallery</span>
            <ul>
                <?php
                    $files = scandir($img_link . $i);
                    for ($x = 2; $x < sizeof($files); $x++) {
                        echo "<li>".$files[$x]."</li>";
                    }
                ?>
            </ul>
        </a>
    </div>
    <?php
}
?> 
```

# android - Android WebView 在 android 4.0 + 上崩溃应用程序

> ID：14495784
> 
> 赞同：0
> 
> 时间：2013-01-24T07:12:19.243
> 
> 标签：android, android-webview

我很难使用我的应用程序运行 webview，因为它以正确的方式使应用程序崩溃。

爪哇

```
package com.unext.unextlibrary;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.JavascriptInterface;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

  @SuppressLint("SetJavaScriptEnabled")
   public class InitializeVideo extends Activity {

WebView mWebview;

@Override
@JavascriptInterface
public void onCreate(Bundle icicle) {
    setContentView(R.layout.activity_video_play);

    getWindow().requestFeature(Window.FEATURE_PROGRESS);
    mWebview  = new WebView(this);

    mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript

    final Activity activity = this;

    mWebview.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Toast.makeText(activity, description, Toast.LENGTH_SHORT).show();
        }
    });

    mWebview .loadUrl("http://www.google.com");
    setContentView(mWebview );
}
} 
```

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:orientation="vertical" >

 <android.webkit.WebView android:id="@+id/WebView"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
</android.webkit.WebView>

</LinearLayout> 
```

在我的清单中，我将 sdk 版本定位为 17

清单在这里

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

  <uses-permission android:name="android.permission.INTERNET"/>

 <activity
        android:theme="@style/Theme.Video"
        android:configChanges="orientation|screenSize"
        android:name="com.unext.unextlibrary.InitializeVideo"
        android:label="@string/app_name" >
     </activity> 
```

我的 logcat 输出也显示如下

```
01-24 07:11:09.091: E/AndroidRuntime(2457): FATAL EXCEPTION: main
    01-24 07:11:09.091: E/AndroidRuntime(2457): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.unext.unextlibrary/com.unext.unextlibrary.InitializeVideo}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.os.Handler.dispatchMessage(Handler.java:99)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.os.Looper.loop(Looper.java:137)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread.main(ActivityThread.java:5039)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at java.lang.reflect.Method.invoke(Method.java:511)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at dalvik.system.NativeStart.main(Native Method)
    01-24 07:11:09.091: E/AndroidRuntime(2457): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:229)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at com.unext.unextlibrary.InitializeVideo.onCreate(InitializeVideo.java:24)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.Activity.performCreate(Activity.java:5104)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    01-24 07:11:09.091: E/AndroidRuntime(2457):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:14:58.633

尝试更改如下：

> setContentView(R.layout.activity_video_play); getWindow().requestFeature(Window.FEATURE_PROGRESS);

改用这种方式：

> getWindow().requestFeature(Window.FEATURE_PROGRESS); setContentView(R.layout.activity_video_play);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:13:05.960

试试这个方法

```
public void onCreate(Bundle icicle) {
getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.activity_video_play); 
```

这是因为， requestFeature() 必须在调用之前调用 `setContentView();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:19:28.477

你的代码

```
public void onCreate(Bundle icicle) {
    setContentView(R.layout.activity_video_play); 
```

现在把这个 setContentView() 语句注释为不需要并添加新语句

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    //setContentView(R.layout.activity_video_play); 
```

由于必须在设置内容视图之前设置另一个窗口功能的请求，因此为您正在使用的内容视图准备了窗口。另一点是您使用 Layout`setContentView()`或仅将单个组件放入其中，因为您使用的都是首先使用的布局，然后最后设置，`webview`这是用`webview`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:21:02.243

并且不要忘记`"android:hardwareAccelerated=true"`在 android manifest 文件中使用

特别是对于 android 4 及更高版本。

# python - GCM python服务器端实现：Error=MissingRegistration

> ID：14495794
> 
> 赞同：1
> 
> 时间：2013-01-24T07:12:54.883
> 
> 标签：python, google-app-engine, google-cloud-messaging

我正在服务器端实现 GCM 推送服务，并面临来自 GCM => **Error=MissingRegistration的响应错误**

有谁知道为什么会发生这个错误？

示例代码是：

```
 def make_request(self, data, is_json=True):

        headers = {
            'Authorization': 'key=%s' % self.api_key,
        }
        # Default Content-Type is defaulted to application/x-www-form-urlencoded;charset=UTF-8
        if is_json:
            headers['Content-Type'] = 'application/json'

        if not is_json:
            data = urllib.urlencode(data)
        req = urllib2.Request(GCM_URL, data, headers)

        try:
            response = urllib2.urlopen(req).read()
        except urllib2.HTTPError as e:
            if e.code == 400:
                raise GCMMalformedJsonException("The request could not be parsed as JSON")
            elif e.code == 401:
                raise GCMAuthenticationException("There was an error authenticating the sender account")
        except urllib2.URLError as e:
            raise GCMConnectionException("There was an internal error in the GCM server while trying to process the request")

        if is_json:
            response = json.loads(response)
        return response

if __name__ == '__main__':
data = {
    'param1': '1',
    'param2': '2'
}
_gcm = GCM('AIzaSyC0lft1_11RGk2aMyt6hoNolC3in5rN50Y')
res = _gcm.construct_payload(
    registration_ids=['APA91bF9MFLWBhZ7y4F87z0D8enceLxOD1GLl92cQSF9lp5Z-VlhxX'], data=data, collapse_key='foo',
    delay_while_idle=True, time_to_live=3600, is_json=True
)
payload = json.loads(res)

result = _gcm.make_request(payload, False) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:10:08.623

问题已解决此代码有效

```
 def make_request(self):
            json_data = {"collapse_key" : "msg", 
                         "data" : {
                                   "data": "xyz",
                       }, 
                    "registration_ids": ['APA91bGi13Rg2l_*******beNOGxxP25o0hmtpg'],
            }

            url = 'https://android.googleapis.com/gcm/send'
            myKey = "AIza********N50Y" 
            data = json.dumps(json_data)
            headers = {'Content-Type': 'application/json', 'Authorization': 'key=%s' % myKey}
            req = urllib2.Request(url, data, headers)
            f = urllib2.urlopen(req)
            response = json.loads(f.read())

            self.response.out.write(json.dumps(response,sort_keys=True, indent=2) ) 
```

# jquery - 应该设置哪些键值对才能在数据表中按降序对日期数据进行排序？

> ID：14495796
> 
> 赞同：0
> 
> 时间：2013-01-24T07:12:59.787
> 
> 标签：jquery, jquery-ui

我在 Internet 上通过模板 (aquincum) 找到了一个动态数据表，其中包含 css 文件和 js 文件。问题是数据表默认按第一个表列对数据进行排序，而不考虑我的数据库查询中的任何排序。我在 js 文件中找到了这段代码：

```
$(function() {
...
//===== Dynamic data table =====//
    oTable = $('.dTable').dataTable({
        "bJQueryUI": false,
        "bAutoWidth": false,
        "sPaginationType": "full_numbers",
        "sDom": '<"H"fl>t<"F"ip>'
    });
...
}); 
```

那么我应该在这段代码中添加什么以便能够按日期降序排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:30:18.200

这是一个 jQuery 插件，在其官方网站上提供了广泛的支持。它具有禁用对某些或所有列进行排序的参数，并且您可以以相同的方式设置标志以分别对列进行排序。

如需完整文档，请单击[此处](http://www.datatables.net)。

# android - android 在 Canvas.drawPath 方法中被阻止

> ID：14495815
> 
> 赞同：2
> 
> 时间：2013-01-24T07:14:23.977
> 
> 标签：android

我正在开发一个手写应用程序，它使用 TextureView 进行显示。由于我们需要对形状对象进行操作，所以我使用一个 LinkList 来存储形状对象。我使用绘图线程来渲染形状对象，它将使用 Canvas.draw 方法。问题是，在应用程序上编写形状时，有时绘图线程会被方法***Canvas.drawPath(Path, Paint)***阻塞，并且应用程序停止渲染形状对象。

# ruby-on-rails - Rss Feed Parse in ruby 当 feed 有`CDATA``tag`时使用 Nokogiri

> ID：14495816
> 
> 赞同：2
> 
> 时间：2013-01-24T07:14:24.487
> 
> 标签：ruby-on-rails, ruby, nokogiri

> **可能重复：**
> [尝试使用 nokogiri 获取 xml 文件中的 cdata 标记内的内容](https://stackoverflow.com/questions/10476783/trying-to-get-content-inside-cdata-tags-in-xml-file-using-nokogiri)

我的代码是这个

```
 doc= Nokogiri::HTML(open("http://www.seattlepi.com/local/feed/seattlepi-com-Local-News-218.php", 'User-Agent' => 'ruby'))

title=data.css("title").text
description=data.css("description").text
link = data.at("link").next_sibling.text 
```

我得到描述，标题和链接都是空白，因为提要存在`CDATA` `tag` 所以请告诉我如何解析它谢谢

# c# - 如何将 OPENXML 添加为先决条件以及使用 Visual Studio 2010 创建的设置

> ID：14495818
> 
> 赞同：1
> 
> 时间：2013-01-24T07:14:34.547
> 
> 标签：c#, .net, installation, openxml

在客户端 PC 中安装我的软件之前，我需要安装 OpenXML，因为我使用 openxml 引用来读取 excel 数据。

请让我知道如何完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:40:25.653

基本上，Open XML SDK 的核心是`DocumentFormat.OpenXml.dll`库，因此您需要做的就是将这个 dll 与您的软件一起分发。

# asp.net-mvc-3 - 下载存储在mvc3数据库中的pdf文件

> ID：14495821
> 
> 赞同：0
> 
> 时间：2013-01-24T07:14:48.560
> 
> 标签：asp.net-mvc-3, file-upload

我在我的控制器中使用以下代码将几个 pdf 文件以二进制格式存储在我的数据库中，

```
 [HttpPost]
    public ActionResult Index(HttpPostedFileBase file)
    {
        Image newImage = new Image();
        newImage.MimeType = file.ContentType;          

        var binaryReader = new BinaryReader(file.InputStream);
        newImage.Data = binaryReader.ReadBytes(file.ContentLength);
        binaryReader.Close();
        objImage.InsertImage(newImage.Data);

        return View();

    } 
```

现在我想根据传递给控制器​​的 id 下载它们，应该下载 pdf 文件？

这是我的pdf下载代码，我需要添加更多吗

```
 public ActionResult Download(int id)
    {
        DataSet da = new DataSet();

        da = objImage.getUserImage(id);
        DataTable dt = new DataTable();
        dt = da.Tables[0];
        Byte[] imagedata=(Byte[])dt.Rows[0]["UsImage"];

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:43:27.147

> 这是我的pdf下载代码，我需要添加更多吗

返回一个 ActionResult：

```
public ActionResult Download(int id)
{
    ...
    byte[] imagedata = (byte[])dt.Rows[0]["UsImage"];
    return File(imagedata, "image/png");
} 
```

如果您希望浏览器弹出“另存为”对话框而不是内联显示图像，请指定文件名：

```
public ActionResult Download(int id)
{
    ...
    byte[] imagedata = (byte[])dt.Rows[0]["UsImage"];
    return File(imagedata, "image/png", "foo.png");
} 
```

显然 MIME 类型和文件名也可能来自您的数据库。在此示例中，我对它们进行了硬编码，但您可以调整此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:45:40.030

返回文件（结果。内容，结果。扩展。替换（“。”，“”））；

```
public ActionResult Download(int id)
{
    DataSet da = new DataSet();

    da = objImage.getUserImage(id);
    DataTable dt = new DataTable();
    dt = da.Tables[0];
    Byte[] imagedata=(Byte[])dt.Rows[0]["UsImage"];

    return File(imagedata, "image/png");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:23:09.060

```
 public ActionResult GetPdf(int id)
    {

        ProjectProfile projectprofile = db.ProjectProfiles.Find(id);
        var image = projectprofile.pdf;
        return File(image, "application/pdf");
    } 
```

# sql - 我想根据子查询显示表的某些列

> ID：14495823
> 
> 赞同：0
> 
> 时间：2013-01-24T07:14:49.427
> 
> 标签：sql, subquery

我想显示在同一个表**中的部门中获得最高薪水的员工的部门编号、姓名和薪水。**

我正在使用 oracle sql。我使用的表结构是

```
Emp(Empno,Ename,Job,Salary,Deptno) 
```

我已经读过这个，我认为这可以通过使用相关的子查询来完成。我发出的查询是

```
select E1.Ename,E1.Ename,E1.Salary
from Emp E1
where E1.Empno=(
              select Empno
              from Emp E2
              where Salary=(
                          select max(Salary)
                          from Emp
                          where Deptno=E1.Deptno
                           )
                ); 
```

这给出了一个**错误，说“单行子查询返回多行”**。我究竟做错了什么？应该怎么做才能纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:17:02.060

```
SELECT  EmpNo, Ename,Job,Salary,Deptno
FROM    
    (
        SELECT  EmpNo, Ename,Job,Salary,Deptno,
                DENSE_RANK() OVER (PARTITION BY DeptNo
                                    ORDER BY Salary DESC ) rn
        FROM    Emp
    ) a
WHERE   a.rn  = 1 
```

*   [DENSE_RANK](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions043.htm)

或通过使用`MAX`

```
SELECT  a.*
FROM    Emp a
        INNER JOIN
        (
            SELECT  DeptNo, MAX(Salary) Max_sal
            FROM    Emp
            GROUP   BY DeptNo
        ) b ON a.DeptNo = b.DeptNo AND
                a.Salary = b.Max_SAL 
```

# c++ - tbb parallel_for example c++ without lambda

> ID：14495829
> 
> 赞同：2
> 
> 时间：2013-01-24T07:15:04.767
> 
> 标签：c++, lambda, tbb, parallel-for

你能在不使用 lambda 表达式的情况下给我一个关于 tbb "parallel_for" 的例子吗？因为我无法在 Ubuntu 系统的 C++ 编译器下运行 lambda 表达式，我也不知道为什么。简而言之：请将此 for 循环转换为 parallel_for。

```
void print(int n)
{
    cout<<n<<endl;
}
for(int i=0; i<100; i++)
{
    print(i);
} 
```

顺便说一句，如果谁能告诉我如何在 linux 系统中运行 C++ lambda 表达式，那对我来说会更好。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:44:40.057

parallel_for 将采用任何函子，可以是 lambda、函子类或普通的旧函数；以下也应该可以正常工作：

```
#include "tbb/tbb.h"
using namespace tbb;
...
void print( size_t n) {
   printf("hellow world %d\n", n);
}
void print_range( const blocked_range<size_t> & r ){
     for( size_t i = r.begin(); i != r.end(); ++i )
         printf("hello from range: %d\n", i);
}
void doit() {
      parallel_for<size_t>( 1, 10, 1, print );
      parallel_for( blocked_range<size_t>(1,10), print_range );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:39:06.727

要使用 lambdas，请下载 gcc 4.7 或更高版本并给他选项`-std=c++11`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:43:34.417

```
#include "tbb/tbb.h"
using namespace tbb;
class ApplyFoo {
  float *const my_a;
  public:
    void operator()( const blocked_range<size_t>& r ) const {
      float *a = my_a;
      for( size_t i=r.begin(); i!=r.end(); ++i )
        Foo(a[i]);
    }
    ApplyFoo( float a[] ) :
      my_a(a) {}
  };
  void ParallelApplyFoo( float a[], size_t n ) {
  parallel_for(blocked_range<size_t>(0,n), ApplyFoo(a));
} 
```

[来源](http://software.intel.com/en-us/blogs/2009/08/03/parallel_for-is-easier-with-lambdas-intel-threading-building-blocks)

# c++ - 为什么在 C++ 中为语句 d1=d2+d3 调用复制构造函数？

> ID：14495832
> 
> 赞同：3
> 
> 时间：2013-01-24T07:15:14.143
> 
> 标签：c++, copy-constructor

我是 C++ 的初学者，我使用的资源表明以下语句**d3 = d1 + d2;** 调用以下内容：

*   + 运算符
*   默认构造函数
*   复制构造函数
*   析构函数
*   赋值运算符
*   析构函数

我不明白为什么在将结果分配给先前声明的变量时调用复制构造函数以及为什么调用 2 个构造函数。

运营商如下：

```
date& date::operator=(const date& other)
{
cout << "Date assignment op" << endl;
    if (this!=&other){
        day=other.day;
        month=other.month;
        year=other.year;
    }
    return *this;
}

date date::operator+(const date& other) const
{
    cout << "Date Operator + called" << endl;
    date temp;
    temp.day=day+other.day;
    temp.month=month+other.month;
    temp.year=year+other.year;
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T07:24:13.173

该表达式`(d1 + d2)`在从 operator+ ( `return temp`) 返回时产生一个临时对象。从“temp”创建临时是通过复制构造函数完成的。然后将其分配给 d3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:23:59.313

当它计算 d1+d2 时，结果是一个临时对象。为了将一个对象分配给另一个对象，正在调用复制构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:41:01.997

默认情况下，按值`return`'ing 对象将从源对象复制构造一个临时对象，然后将该临时对象传递给调用者。换句话说，语句`d3 = d1 + d2;`基本上是这样做的：

```
date implicit_temp(operator+(d1, d2));
d3 = implicit_temp; 
```

这在幕后分解为以下逻辑：

```
// The + operator 
date temp; // The default constructor
temp.day = d1.day + d2.day;
temp.month = d1.month + d2.month;
temp.year = d1.year + d2.year;
// return temp;
date implicit_temp(temp); // The copy constructor
temp.~date(); // Destructor
// Assignment operator
d3.day = implicit_temp.day;
d3.month = implicit_temp.month;
d3.year = implicit_temp.year;
implicit_temp.~date(); // Destructor 
```

它与您看到的输出顺序相同。

如果编译器支持 RVO（返回值优化），它将能够优化语句`date`创建的临时对象，通过传递一个隐藏参数，因此可以通过其运算符直接分配变量，使代码行为好像它是这样写的：`return``d3``return``temp``d3``=`

```
void date::operator+(const date& other, date& result) const
{
    date temp;
    temp.day=day+other.day;
    temp.month=month+other.month;
    temp.year=year+other.year;
    result = temp;
} 
```

这将在引擎盖下分解为这个逻辑：

```
// The + operator 
date temp; // The default constructor
temp.day = d1.day + d2.day;
temp.month = d1.month + d2.month;
temp.year = d1.year + d2.year;
// return temp; - Assignment operator
d3.day = temp.day;
d3.month = temp.month;
d3.year = temp.year;
temp.~date(); // Destructor 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:22:08.413

在以下情况下调用复制构造函数：

```
A a=b,
when you return an object,
when you pass an object. 
```

您的`+`运算符重载函数返回一个临时对象。它实际上将调用一个复制构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T08:35:29.913

不要依赖那个

从技术上讲，您的块中`operator+`有一个`temp`变量，该变量必须在其外部传递到一个临时对象中，以便稍后提供给您的`operator=`.

换句话说，你`operator=`看到的参数不是`temp`inside `operator+`，而是它的一个副本，它必须比`+`块活得更长，才能让它`=`发生。

但是，如果有：

*   `+`只有一个 return 语句（实际上有）
*   `+`所有返回语句总是返回同一个对象

编译器可以通过将临时局部变量与分配中使用的临时变量合并来优化返回时的复制，并完全省略副本。

这是极少数可以消除副作用的优化之一（参见 C++03 的 §12.8.15 或 C++11 的 12.8.31）。

是否调用复制构造函数的事实最终取决于编译器和所需的优化级别。

（感谢[juanchopanza](https://stackoverflow.com/users/661519/juanchopanza)的所有澄清）。

# java - 以本机方式在 Java 窗口内绘画

> ID：14495833
> 
> 赞同：0
> 
> 时间：2013-01-24T07:15:16.873
> 
> 标签：java, windows, camera, jna

我正在使用直接显示捕获图在本机库（C++）中预览相机。我想在java窗口上绘制相机预览，我应该如何使用JNA和java来做到这一点？

我可以使用 JNI 传递窗口句柄，但是在 Java 窗口的本机端绘制会产生任何问题吗？

# php - 在codeigniter中向控制器发送多个表单数据表单

> ID：14495835
> 
> 赞同：0
> 
> 时间：2013-01-24T07:15:17.110
> 
> 标签：php, codeigniter

我有一个数据表列表，并在它们旁边有一个输入框示例：

姓名男/女

名称1 ***_* ___**

名称2 ***_* ___**

当我使用它来接收表单数据时，我只设置了 1 个表单以从表内的表单发送数据并将其发送到控制器中的控制器

```
$data_done['sex']   = $this->input->post('sex'); 
```

这只收到了第一个数据。我怎样才能得到控制器中的所有数据？仅供参考，表数据是来自 DB 的循环 .. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:19:45.723

将`name`您的`input`改为`name[]`, `sex[]`, `name1_[]`, ... 。您可以在此处查看我在另一个问题中的答案以获取更多详细信息，[将多个文本框值传递给控制器​​代码点火器](https://stackoverflow.com/questions/14414621/pass-multiple-textbox-values-to-controller-code-igniter/14414703#14414703)

# php - 使用 REGEX 获取字符串的一部分

> ID：14495841
> 
> 赞同：-1
> 
> 时间：2013-01-24T07:16:06.577
> 
> 标签：php, regex

我有一个亚马逊链接：

```
http://www.amazon.com/Pampers-Softcare-Fresh-Wipes-Count/dp/B007KXO998/ref=pd_zg_rss_ts_165796011_165796011_7?ie=UTF8&tag=elson06-20 
```

我正在尝试 使用正则表达式或任何可以提取它的东西来获取产品 ID`B007FHX9OK`之后`dp/`和之前的产品 ID。`?ref=pd_zg_rss_ts_165796011_165796011_7`

url的链接是静态的，不会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:20:09.333

```
$string = 'http://www.amazon.com/iOttie-Windshield-INCREDIBLE-BlackBerry-Revolution/dp/B007FHX9OK?SubscriptionId=AKIAJJPPYQPVMQLOYLKQ&tag=elson06-20&linkCode=sp1&camp=2025&creative=165953&creativeASIN=B007FHX9OK';
//$string = 'http://www.amazon.com/Pampers-Softcare-Fresh-Wipes-Count/dp/B007KXO998/ref=pd_zg_rss_ts_165796011_165796011_7?ie=UTF8&tag=elson06-20';

$pid = basename((false !== strpos($string, '/ref='))
    ? pathinfo($string, PATHINFO_DIRNAME)
    : parse_url($string, PHP_URL_PATH));

echo $pid; // Outputs B007KXO998 or B007FHX9OK, will work for both types of URLs 
```

您不需要正则表达式，PHP 具有解析 URL 的内置函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:26:34.280

URL 将始终采用这种精确格式，还是应该与任何亚马逊 URL 匹配？

如果格式总是这样，那么您可以使用@cryptic 的答案。否则，使用类似模式的模式会更灵活`|dp/([A-Z0-9]+)|i`。

这将匹配字符串中紧跟的任何字母数字字符串（不区分大小写）`dp/`。好吧，整个匹配将包括该`dp/`部分，但括号部分是一个子匹配，它将仅匹配产品 ID。

* * *

编辑：根据[这个页面](https://en.wikipedia.org/wiki/Amazon_Standard_Identification_Number)，亚马逊的产品 ID (ASIN) 可以出现在各种各样的 URL 中，这使得它们难以匹配，我上面的代码不会全部捕捉到它们。

尝试捕获这些的一种方法是使用`parse_url`提取 URL 的`host`和`path`部分。从那里，您可以对照已知的 Amazon 域名检查主机部分，还可以检查`explode`路径，并检查每个部分是否有十个字符长的字母数字部分。即便如此，书籍的 ASIN 是书籍 ISBN，亚马逊在某些情况下可能会使用 13 位数的版本（尽管我没有证据表明他们这样做）。

这是一个我没有彻底测试过的非常基本的例子：

```
$url = get_url_from_wherever();
$url_parts = parse_url($url);

$host = $url_parts['host'];
$path = explode('/', $url_parts['path']);

$amazon_hosts = array(
   'amazon.com',   // United States
   'amazon.ca',    // Canada
   'amazon.cn',    // China
   'amazon.fr',    // France
   'amazon.it',    // Italy
   'amazon.de',    // Germany
   'amazon.es',    // Spain
   'amazon.co.jp', // Japan
   'amazon.co.uk', // United Kingdom
   'amzn.to'       // URL Shortener
);
$amazon_hosts = array_map('preg_quote', $amazon_hosts);

$asin = FALSE; // initialize in case we don't find the ASIN

if (preg_match('/(^|\.)(' . implode($amazon_hosts, '|') . ')$/i', $host)) {
  // valid host
  foreach($path as $path_component) {
    if (preg_match('/^[A-Z0-9]{10}$/i', $path_component)) {
      // this is probably the ASIN, since the string is a 10-character alphanumeric
      $asin = $path_component;
    }
  }
}

if ($asin) {
  // process ASIN
} else {
  // couldn't find an ASIN in this URL
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T07:52:26.573

这就是我所做的，因为我很确定链接始终具有相同的格式：

```
$link = 'http://www.amazon.com/Pampers-Softcare-Fresh-Wipes-Count/dp/B007KXO998/ref=pd_zg_rss_ts_165796011_165796011_7?ie=UTF8&tag=elson06-20'
$link = parse_url($link);
$link = explode('/',$link['path']);
$link = $link[3];
echo $link; //B007KXO998 
```

# iphone - 调整图像大小而不损失其质量

> ID：14495843
> 
> 赞同：2
> 
> 时间：2013-01-24T07:16:10.110
> 
> 标签：iphone, xcode, uiimagepickercontroller

当我将导入图像 [其他图像] 发送到服务器时，所花费的时间比 iphone 图像 [通过默认相机拍照] 花费的时间少。是否可以选择调整图像大小而不损失其质量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:19:11.230

使用此代码将有所帮助

```
+ (UIImage *)scaleImage:(UIImage *)image maxWidth:(int) maxWidth maxHeight:(int) maxHeight
{
    CGImageRef imgRef = image.CGImage;
    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    if (width <= maxWidth && height <= maxHeight)
    {
        return image;
    }

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);

    if (width > maxWidth || height > maxHeight)
    {
        CGFloat ratio = width/height;

        if (ratio > 1)
        {
            bounds.size.width = maxWidth;
            bounds.size.height = bounds.size.width / ratio;
        }
        else
        {
            bounds.size.height = maxHeight;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    UIGraphicsBeginImageContext(bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
    CGContextConcatCTM(context, transform);
    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);

    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:25:41.453

试试下面这个方法...

像下面这样打电话...

```
 UIImage *imgBig = [self imageWithImage:yourImage scaledToSize::yourNewImageSize]; 
```

并使用这种波纹管方法..

```
-(UIImage *)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{

    UIGraphicsBeginImageContextWithOptions(newSize, YES, image.scale);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

} 
```

# c# - 如何在从mysql导出的xml文件中表示空值

> ID：14495847
> 
> 赞同：0
> 
> 时间：2013-01-24T07:16:34.050
> 
> 标签：c#, xml

从 Mysql 导入的 XML 文件如下所示：

```
 <data>
 <row>
 <id>1</id><name>ram</name><sno>(NULL)</sno>
 </row>
 <row>
 <id>2</id><name>ram</name><sno>(NULL)</sno>
 </row>
 </data> 
```

我正在将 xml 文件读入数据集。

`if(ds.Tables[0].rows[0][sno] == DBNULL.Value)`条件总是假的。

其中`sno`列值被视为字符串。我想将它们表示为空值并使条件为真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:19:06.953

```
<"Name of the Column" i:nil="true" /> 
```

这样您就可以在 xml 文件中表示空值。现在您可以通过此检查值是否为空。

检查[这个](http://blogs.msdn.com/b/runeetv/archive/2012/10/17/9416542.aspx)

# android - 带有列表视图的 Android 选项卡

> ID：14495851
> 
> 赞同：1
> 
> 时间：2013-01-24T07:16:47.683
> 
> 标签：android, android-fragments

我按照本教程使用片段创建了一个选项卡活动：

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

选项卡式活动之一包括列表视图；当您单击列表视图中的某个项目时，它会打开一个新活动。但我希望新活动仍然显示选项卡活动中的选项卡。换句话说，我希望标签显示在应用程序中的所有活动上，但我不知道如何使其持久化。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:20:31.837

要使您的应用程序持久化，请使用`Inheritance`. 创建`listView.xml`，`tabactivity.xml`并将其嵌入`MainActivity.xml`如下：

```
 <LinearLayout ... >
<include layout="@layout/listView" /> // your listview.xml file will be called
<include layout="@layout/tabactivity" />   // your tabactivity.xml file will be called
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:22:00.713

您可以在每个活动开始时动态添加您的选项卡视图。

# c# - 如何在 Linq 中使用删除所有功能

> ID：14495855
> 
> 赞同：1
> 
> 时间：2013-01-24T07:17:10.643
> 
> 标签：c#, linq

我正在尝试使用以下查询从 EF 中删除记录：

```
 public void ClearAllLocks(Lock LockObj)
    {
        var Stf = context.Locks.First(S => S.UserId == LockObj.UserId);

        if (Stf == null)
        {
            return;
        }
        context.Locks.DeleteObject(Stf);
        context.SaveChanges();
    } 
```

但是我只能删除第一条记录并且我也知道原因（因为我使用的是 First），我应该写什么而不是 First 以便可以删除所有条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:25:29.337

```
public void ClearAllLocks(Lock LockObj)
{
    var locksToDelete = context.Locks.Where(s => s.UserId == LockObj.UserId);

    foreach(var stf in locksToDelete)
       context.Locks.DeleteObject(stf);

    context.SaveChanges();
} 
```

您也可以使用[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)（在 NuGet 搜索）：

```
public void ClearAllLocks(Lock LockObj)
{
    context.Locks.Delete(s => s.UserId == LockObj.UserId);        
    context.SaveChanges();
} 
```

# php - 如何在php中返回带有图像内容的文件？

> ID：14495858
> 
> 赞同：-1
> 
> 时间：2013-01-24T07:17:15.967
> 
> 标签：php

所以我有一个 php 文件，它接收一个图像文件并返回一个图像文件。问题是当我期待一个文件时它会返回一组字符。我该如何解决？对不起，我是 PHP 新手。

所以我在标题中设置了内容类型并使用了这个方法 imagejpeg($newImage);

```
<?php
error_reporting(0);
$newSize = $_POST['newSize'];
if(empty($newSize)){
    header("Status: 400 Bad Request", true, 400);
    exit();
}
$extension = strtolower(strrchr($_FILES['image']['name'], '.'));
$imageInfo = getimagesize($_FILES['image']['tmp_name']);

switch($extension){
    case '.jpg':
    case '.jpeg':
        $image = imagecreatefromjpeg($_FILES['image']['tmp_name']);
        break;
    case '.gif':
        $image = imagecreatefromgif($_FILES['image']['tmp_name']);
        break;
    case '.png':
        $image = imagecreatefrompng($_FILES['image']['tmp_name']);
        break;
    default:
        header("Status: 400 Bad Request", true, 400);
        exit('');
}

$newImage = imagecreatetruecolor($newSize, $newSize);

if(empty($newImage) || empty($image)){
    header("Status: 400 Bad Request", true, 400);
    exit();
}

imagecopyresampled($newImage, $image, 0, 0, 0, 0, $newSize, $newSize, $imageInfo[0], $imageInfo[1]);

header('Content-Type: ' . $imageInfo['mime']);

switch($extension){
    case '.jpg':
    case '.jpeg':
        imagejpeg($newImage);
        break;
    case '.gif':
        imagegif($newImage);
        break;
    case '.png':
        imagepng($newImage);
        break;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:51:58.280

未经测试，但这可以工作。它将初始化文件下载。如果您发布的代码是您自己的，您应该理解我对它的补充。

```
<?php
error_reporting(0);
$newSize = $_POST['newSize'];
if(empty($newSize)){
    header("Status: 400 Bad Request", true, 400);
    exit();
}
$extension = strtolower(strrchr($_FILES['image']['name'], '.'));
$imageInfo = getimagesize($_FILES['image']['tmp_name']);

switch($extension){
    case '.jpg':
    case '.jpeg':
        $image = imagecreatefromjpeg($_FILES['image']['tmp_name']);
        break;
    case '.gif':
        $image = imagecreatefromgif($_FILES['image']['tmp_name']);
        break;
    case '.png':
        $image = imagecreatefrompng($_FILES['image']['tmp_name']);
        break;
    default:
        header("Status: 400 Bad Request", true, 400);
        exit('');
}

$newImage = imagecreatetruecolor($newSize, $newSize);

header('Content-Type: '.$_FILES['image']['type']);
header('Content-Disposition: attachment; filename="image'.$extension.'"');

switch($extension){
    case '.jpg':
    case '.jpeg':
        imagejpg($newImage);
        break;
    case '.gif':
        imagegif($newImage);
        break;
    case '.png':
        imagepng($newImage);
        break;
}

if(empty($newImage) || empty($image)){
    header("Status: 400 Bad Request", true, 400);
    exit();
} 
```

# scala - Scala中的并行递归记忆

> ID：14495864
> 
> 赞同：2
> 
> 时间：2013-01-24T07:17:46.060
> 
> 标签：scala, recursion, concurrency, dynamic-programming, memoization

我在 Scala 中有一个记忆的分而治之算法：

```
val cache = mutable.Map[Int, BigInt]()
cache(1) = BigInt(0)

def dp(n: Int): BigInt = cache.getOrElseUpdate(n, {
  partitions(n).map(i => dp(i)).min
  // partitions is non-recursive function that given an Int returns a list[Int]
}) 
```

但是，我想将此代码转换为在递归时使用并行化，方法是更改`partitions(n)`​​为`partitions(n).par`which 返回并行列表。但是现在，我的状态很糟糕，`cache`因为该地图不是并发的。`cache`当我使用trait进行实例化时，我的`SynchronizedMap`所有 fork 都会加入线程块，因为所做的只是在方法调用周围`SynchronizedMap`放置一个巨大的块。那么，在记忆**化的同时**进行递归分治算法的 Scala 习语是什么？`synchronized``getOrElseUpdate`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:33:32.017

我的经验法则：永远不要创建自己的缓存。如果你真的想走可变路线，你可能想看看[Guava](http://code.google.com/p/guava-libraries/)的[CacheBuilder 类](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html)。如果我没记错的话，它提供了适当的同步（和其他好东西），但仍然非常轻量级。

**编辑：**

Scalaz 7 提供了[`Memo`](http://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Memo.scala)一种声称具有线程安全实现的类型 ( `immutableHashMapMemo`, `immutableListMapMemo`, `immutableTreeMapMemo`)。乍一看，它看起来像你需要的，但我自己没有使用过，我有点怀疑：我认为`var`应该标记用于存储相应地图的`@volatile`用于避免可见性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:18:41.393

找到了解决方案：`val cache = concurrent.TrieMap[Int, BigInt]`-并发！=同步**

# c# - 使用 EF 生成的实体隐藏信息

> ID：14495865
> 
> 赞同：1
> 
> 时间：2013-01-24T07:17:51.527
> 
> 标签：c#, entity-framework, poco, entity-framework-5

我可以让 EF 生成带有私有属性设置器的实体类吗？

例如。我想要类似的东西

```
public class MyTable
{
    public Guid Id {get; private set;}
    //... And so on and so forth, basically the class should hide the setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:21:28.110

假设您正在使用 tt 模板生成 POCO 实体，通过修改 tt 文件是可能的。

另一方面，由于私有变量在 WCF 通信期间不会被序列化，因此如果您使用任何服务 - 客户端体系结构和交换生成的实体，您将面临问题。

# python - GAE 上的 Twitter 流媒体

> ID：14495868
> 
> 赞同：5
> 
> 时间：2013-01-24T07:17:57.400
> 
> 标签：python, google-app-engine, twitter, python-2.7, stream

为什么我会收到此错误？这就是我调用流 API 的方式。

```
import tweepy
import sys

creds = json.loads(open('credential.json').read())
tw_consumer_key = creds['tw_consumer_key']
tw_consumer_secret = creds['tw_consumer_secret']
tw_access_token = creds['tw_access_token']
tw_access_token_secret = creds['tw_access_token_secret']

try:
    auth = tweepy.OAuthHandler(tw_consumer_key, tw_consumer_secret)
    auth.set_access_token(tw_access_token, tw_access_token_secret)
    api = tweepy.API(auth)
except Exception:
    service = None
    api = None    

# Query terms
Q = "Better"

class CustomStreamListener(tweepy.StreamListener):
    def on_status(self, status):
        try:
            print "%s\n%s\n%s\n%s\n\n" % (status.text, 
                                      status.author.screen_name, 
                                      status.created_at, 
                                      status.source,)
        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e
            pass

    def on_error(self, status_code):
        print >> sys.stderr, 'Encountered error with status code:', status_code
        return True # Don't kill the stream

    def on_timeout(self):
        print >> sys.stderr, 'Timeout...'
        return True # Don't kill the stream

class LiveStream(webapp2.RequestHandler):
    def get(self):
        streaming_api = tweepy.streaming.Stream(auth, CustomStreamListener(), timeout=60)
        self.response.out.write(streaming_api.filter(track=Q)) 
```

可能是由于 GAE 不允许使用套接字，我不确定如何应用查询术语来获取特定的过滤流推文。我使用这部分代码的目的是获得带有指定关键字的实时流。如果有任何替代方法，请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:37:23.943

在 App Engine 上，httplib 连接（和 urllib）将使用 Google URL 获取服务。[URL Fetch 服务](https://developers.google.com/appengine/docs/python/urlfetch/overview)意味着其他服务器（不是应用引擎服务实例）执行请求并将响应返回给应用引擎实例，而不是进程本身打开套接字。

我相信您会注意到在 GAE 上运行的 httplib 变体不提供用于设置超时的 sock 属性。但根本问题是无法获取流，在响应完成之前，您不会将任何结果返回到应用引擎。我还没有测试它是如何失败的，但我希望你会从 URL 服务收到 DeadlineExceededError，因为 Twitter 不会关闭流响应。

目前没有其他方法可以在 GAE 上获取流。它可能适用于后端的出站套接字支持。套接字支持目前仅对测试人员可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:51:20.507

我相信 GAE 不支持 httplib.HTTPSConnection。`secure = False`相反，通过将参数添加到`Stream`构造函数来尝试不安全的连接：

```
class LiveStream(webapp2.RequestHandler):
    def get(self):
        streaming_api = tweepy.streaming.Stream(auth, CustomStreamListener(), timeout=60, secure=False)
        self.response.out.write(streaming_api.filter(track=Q)) 
```

# sql - 查看父子表查询

> ID：14495869
> 
> 赞同：1
> 
> 时间：2013-01-24T07:17:58.177
> 
> 标签：sql, view, oracle10g, oracle11g

我正在使用 Oracle 11G，我有下面的表结构

STATE_DEF 表是父表

```
TAX_DEF_ID  EFFECTIVE_DATE  REP_TYPE
1           9-Jan-12        R
2           15-Jan-12       W 
```

和子表'TAX_DETAIL'如下

```
TAX_DETAIL_ID   TAX_TYPE    DISTRIBUTION_TYPE   WH_RATE   TAX_DEF_ID
1               I           S                   0.1       1
2               I           P                   0.12      1
3               D           S                   0.2       1
4               D           P                   0.22      1
5               I           S                   0.3       2
6               I           P                   0.31      2
7               D           S                   0.4       2
8               D           P                   0.41      2 
```

我想创建一个视图，它将给出如下所示的输出

```
TAX_DEF_ID  EFFECTIVE_DATE  I_S_WH_RATE    I_P_WH_RATE  D_S_WH_RATE   D_P_WH_RATE
1           9-Jan-12        0.1            0.12         0.2           0.22
2           15-Jan-12       0.3            0.31         0.4           0.41 
```

我尝试过 LISTAGG 函数，但它会给我一个带有连接列的列。我正在寻找视图定义，它将在单独的列中为我提供有效日期的费率。

我一直试图从几天内获得这个输出。我会感谢任何帮助来实现上述结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:24:54.250

试试这个：

```
SELECT
    SD.TAX_DEF_ID,
    SD.EFFECTIVE_DATE,
    SUM(CASE WHEN TAX_TYPE = 'I' AND DISTRIBUTION_TYPE = 'S' THEN WH_RATE ELSE 0 END) I_S_WH_RATE,
    SUM(CASE WHEN TAX_TYPE = 'I' AND DISTRIBUTION_TYPE = 'P' THEN WH_RATE ELSE 0 END) I_P_WH_RATE,
    SUM(CASE WHEN TAX_TYPE = 'D' AND DISTRIBUTION_TYPE = 'S' THEN WH_RATE ELSE 0 END) D_S_WH_RATE,
    SUM(CASE WHEN TAX_TYPE = 'D' AND DISTRIBUTION_TYPE = 'P' THEN WH_RATE ELSE 0 END) D_P_WH_RATE
FROM STATE_DEF SD
    LEFT JOIN TAX_DETAIL TD
        ON SD.TAX_DEF_ID = TD.TAX_DEF_ID
GROUP BY SD.TAX_DEF_ID, SD.EFFECTIVE_DATE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:44:21.400

请使用检查结果`PIVOT`

```
select * From(
  select 
    a.TAX_DEF_ID, 
    a.EFFECTIVE_DATE, 
    TAX_TYPE||DISTRIBUTION_TYPE AS TYP, 
    WH_RATE 
  From STATE_DEF a INNER JOIN TAX_DETAIL b ON a.TAX_DEF_ID=b.TAX_DEF_ID
)x 
PIVOT
(MAX(WH_RATE) as WH_RATE for (TYP) IN ('IS' AS I_S, 'IP' as I_P, 'DS' as D_S, 'DP' as D_P)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:23:38.190

```
select 
  tax_def_id,
  effective_date,
  sum(case when d.tax_type='I' and d.distribution_type='S' then wh_rate end) as I_S_WH_RATE
  --and so on...
from state_def t
join tax_detail d on (t.tax_def_id = d.tax_def_id)
group by   
   tax_def_id, 
   effective_date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:27:44.200

在 11g 中，您可以对此进行调整：

```
with data as (select s.TAX_DEF_ID, s.EFFECTIVE_DATE, d.TAX_TYPE, d.DISTRIBUTION_TYPE, d.WH_RATE
                from state_def s
                     inner join tax_detail d
                             on s.tax_def_id = d.tax_def_id)
select *
  from data
       pivot(max(wh_rate)
             for (TAX_TYPE, DISTRIBUTION_TYPE)
             in (('I', 'S') as I_S_WH_RATE,
                 ('I', 'P') as I_P_WH_RATE,
                 ('D', 'S') as D_S_WH_RATE,
                 ('D', 'P') as D_P_WH_RATE
                )
            ); 
```

# jsf - 使用 Maven 将 JSF 复合组件自动打包到 JAR 中

> ID：14495870
> 
> 赞同：0
> 
> 时间：2013-01-24T07:18:04.460
> 
> 标签：jsf, jakarta-ee, maven, jsf-2

我`resources/components`在 Maven WAR 项目的目录中有许多复合组件。我希望使我的复合组件可重用，而是将它们单独打包在一个 JAR 中（它们可能具有关联`ManagedBeans`的 .

许多现有问题，例如[这个](https://stackoverflow.com/questions/8295935/packaging-composite-component-in-jsf2-with-netbeans-7-0-1-maven)问题，解决了相同或相似的任务。但是，没有人指定如何使用 Maven 来自动化该过程。

我宁愿*不*使用 Ant。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:17:14.897

我建议使用 maven-antrun-pluin。以下是经过验证的示例：

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <id>prepare-deploy-package</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <tasks>
                                <copy todir="${project.build.directory}/${project.build.finalName}/META-INF/resources" overwrite="true">
                                    <fileset dir="src/main/resources">
                                    </fileset>
                                </copy>
                            </tasks>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:28:32.843

这对我有用：

```
<resources>          
    <resource>
        <directory>src/main/webapp/resources</directory>
        <targetPath>META-INF/resources</targetPath>
  </resource>
  <resource>
        <directory>src/main/webapp/WEB-INF/</directory>
        <targetPath>META-INF</targetPath>
    </resource>          
</resources> 
```

确保拥有：

```
<packaging>war</packaging> 
```

A 还启用了 maven 插件以允许 Netbeans 将项目识别为 Web 项目：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
            <failOnMissingWebXml>false</failOnMissingWebXml>
        </configuration>
    </plugin> 
```

# javascript - setTimeout("fn(x)") 无法正常工作

> ID：14495871
> 
> 赞同：1
> 
> 时间：2013-01-24T07:18:04.973
> 
> 标签：javascript, callback, settimeout

我有一个计时器功能，它每 2 秒在弹出窗口中提醒一个文本“你好，欢迎”。我还有一个功能可以清除计时器间隔，以便在第 10 秒停止弹出。

当我使用 clearInterval 函数行时，弹出框显示停止

```
setTimeout(function() {clearInterval(x); },10000); 
```

但是当我使用 settimeout 函数时，弹出框显示并没有停止

```
setTimeout("clearInterval(x);",10000); 
```

但是，如果我使用 settimeout 函数通过将内置函数直接定义为来显示弹出窗口 `setTimeout("alert('hello, welcome');",2000); // works properly`

您能否解释一下为什么上述两行的 settimeout 函数的行为不同。请在下面找到我的代码。

```
<html>
<head>
<script type='text/javascript' >
function testclear()
{
    var x = setInterval("alert('hello, welcome');",2000);
    setTimeout(function() { clearInterval(x); },10000);

   // setTimeout("clearInterval(x);",10000);
}
</script>
</head>
<body>
    <input id='txt' onchange='testclear()' />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:22:03.803

> 但是当我使用 settimeout 函数时，弹出框显示并没有停止

```
setTimeout("clearInterval(x);",10000); 
```

那是因为当您评估该字符串时，变量“x”没有被正确捕获。它可能会指向`window.x`（而不是保存间隔计时器 id 的本地变量）。

而工作示例中的闭包已经捕获了正确的`x`.

另一个避免的理由`eval`。

您的警报（还）没有这个问题，因为它没有引用任何变量，但我建议您也将其更改为闭包（“函数”）形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:22:35.947

我确实相信，当您为`setInterval`or的第一个参数指定字符串时`setTimeout`，它将`eval`在特定时间/间隔执行。因此，它在全局范围内运行。在您的情况下，`x`在全局范围内不可用......它是`testclear`函数内部的局部变量。将函数作为第一个参数传递给`setInterval`或`setTimeout`保护您最初使用的范围（在`testclear`函数内部）。

或者，但不是最好的，我相信你可以这样做：

```
setTimeout("clearInterval(" + x + ");",10000); 
```

但请注意，在其他情况下（其他方法调用），这种串联可能不同或不可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:22:34.610

那是因为`x`是函数的本地`testclear()`。当您将函数传递给 setTimeout 时，它将获得与写入它的范围相同的范围，因此`x`将被识别。

当您传递字符串文字时，它将被评估但范围丢失。

如果`x`将是全局变量，它也将“工作”，但这不是一个好习惯。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T08:07:39.627

工作示例**[在这里](http://jsfiddle.net/eFFaM/1/)** 我已经自定义了您的代码，它工作正常。

1.  使 x 变量成为全局变量。
2.  `var t= setTimeout(' clearInterval(x);' ,1501);`设置 temp 变量以捕获 setTimeout ，这是语义遵循的。

# javascript - 如何检查Web应用程序的两个用户是否属于同一个网络/局域网/域

> ID：14495876
> 
> 赞同：0
> 
> 时间：2013-01-24T07:18:16.013
> 
> 标签：javascript, security, web-applications, browser, network-programming

我有一个存在安全问题的 Web 应用程序，用户应该只能从他的办公室网络登录。即使他将笔记本电脑带到办公室外面，他也不应该能够登录到应用程序。此外，管理员用户将授予对应用程序的访问权限，为此，条件是用户应该与管理员在同一网络/LAN/域下用户。

问题是如何识别用户和管理员都在同一个网络中。是否有任何框架可以在局域网或同一网络中的两台不同 PC 上进行浏览器通信？有什么办法可以找到用户的网络标识符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:54:12.907

您可以拥有一组与给定组织相对应的列入白名单的 IP 地址。该地址代表互联网上的给定网络。

然而，这并非万无一失。如果攻击者不关心响应，他可以发送他想要的任何消息并更改发送数据包中的源 IP。这还要求您要定位的网络位于其自己的子网中，并且它具有自己的唯一 IP。它也无法处理有人设置 VPN 以通过您的白名单网络之一隧道连接其互联网连接的情况。

除此之外，你无能为力。浏览器不会发送个人识别信息和类似的东西。您可以从浏览器中检索到的任何内容，如果有人愿意，他们都可以伪造。

您甚至可以确定单个网络可以访问站点的唯一方法是将其托管在该网络上。（如评论所示）

# windows-8 - 在进行缩放手势时替换 ScrollViewer 中的图像

> ID：14495878
> 
> 赞同：5
> 
> 时间：2013-01-24T07:18:19.663
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

我正在创建一个照片查看应用程序，我想实现图片的缩放。我创建了一个 ScrollViewer 并在那里放置了一个图像。这一切都是开箱即用的。我可以做一个缩放手势，它会放大图片。现在，我要实现的下一件事是在缩放手势开始时加载图片的高分辨率版本，并在加载时动态交换 Image 控件中的位图。我希望它无缝地发生，以便用户可以继续手势并继续放大并查看更详细的图片。实现这一目标的最佳方法是什么？这是我目前拥有的代码。我的代码的问题是，当 Image.Source 被替换时，我的手势被中断并且照片被重置为原始大小。更改 ScrollViewer ZoomFactor 无济于事，因为在替换图像时它似乎会重置。我有一个带有 Image 属性的 DataModel，该属性最初返回 null，但开始以低分辨率模式从“文件”加载图片，并在加载完成时调用 OnPropertyChanged("Image")。调用 LoadFullImage() 加载全分辨率版本并在完成时调用 OnPropertyChanged("Image")。

以下是 DataModel.cs 的摘录：

```
public async Task LoadFullImage()
    {
        loadFullImageTask = UpdateImage(0);
        await loadFullImageTask;
    }

    public ImageSource Image
    {
        get
        {
            if (fullImage != null)
            {
                return fullImage;
            }
            else if (image != null)
            {
                return image;
            }
            else
            {
                Task loadImageTask = UpdateImage(768);

                return null;
            }
        }
    }

    public bool FullImageLoading
    {
        get { return (this.loadFullImageTask != null) && (!this.loadFullImageTask.IsCompleted); }
    }

    public bool FullImageLoaded
    {
        get { return this.fullImage != null; }
    } 
```

这是我的 MainPage.xaml：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ScrollViewer x:Name="imageViewer" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Visible" VerticalAlignment="Stretch" MinZoomFactor="1" ZoomMode="Enabled" ViewChanged="imageViewer_ViewChanged">
        <Image x:Name="image" Margin="0,0,0,0" Stretch="Uniform" Source="{Binding Image}" />
    </ScrollViewer>
</Grid> 
```

这是我的 MainPage.xaml.cs：

```
protected override async void OnNavigatedTo(NavigationEventArgs e)
    {
        FileOpenPicker filePicker = new FileOpenPicker();
        filePicker.SuggestedStartLocation = PickerLocationId.ComputerFolder;
        filePicker.FileTypeFilter.Add(".jpg");
        StorageFile file = await filePicker.PickSingleFileAsync();

        data = new DataModel(file);
        imageViewer.DataContext = data; 
    }

    private async void imageViewer_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
    {
        ScrollViewer imageViewer = (ScrollViewer)sender;

        if (imageViewer.ZoomFactor > 1)
        {
            if (!data.FullImageLoaded && (!data.FullImageLoading))
            {
                int oldHeight = ((BitmapImage)data.Image).PixelHeight;
                int oldWidth = ((BitmapImage)data.Image).PixelWidth;
                double oldHOffset = imageViewer.HorizontalOffset;
                double oldVOffset = imageViewer.VerticalOffset;

                await data.LoadFullImage();

                int newHeight = ((BitmapImage)data.Image).PixelHeight;
                int newWidth = ((BitmapImage)data.Image).PixelWidth;

                float ratio = (float)oldHeight / (float)newHeight;
                imageViewer.MaxZoomFactor = imageViewer.MaxZoomFactor * ratio;
                imageViewer.MinZoomFactor = imageViewer.MinZoomFactor * ratio;
                imageViewer.ZoomToFactor(imageViewer.ZoomFactor * ratio);
                //imageViewer.ScrollToHorizontalOffset(oldHOffset / ratio);
                //imageViewer.ScrollToVerticalOffset(oldVOffset / ratio);
            }
        }
    } 
```

正如我已经提到的，这段代码的问题是手势被打断并且新图像没有调整大小/滚动到正确的位置，用户体验不是无缝的。感谢您提供有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:30:49.950

我不会为您编写此代码，因为它太多了，但这里是步骤：

1.  图像需要将 ScaleTransform 应用于其 RenderTransform 属性。当用户捏或拉伸时，您将使用它来使其“缩放”。
2.  使用 Manipulation 事件检测捏合手势；如果它可以帮助您减少一些代码，您甚至可以仅过滤到捏合手势。这些事件将是最可靠的。
3.  Manipulation 事件将返回发生了多少捏合或拉伸，这需要与您在数字 1 中应用到图像的 ScaleTransform 的缩放程度相对应。
4.  在代码隐藏中，您可以创建一个 BitmapImage 指向并从服务器加载图像。加载后，您可以替换用户正在捏的图像的来源。除非高分辨率图像是数兆字节，否则这对用户来说几乎是无缝的。不要那样做。

请注意，我的步骤不包括 ScrollViewer。ScrollViewer 当然可以包装图像，但工作本身是作为图像本身的一部分完成的。

我可能还会向您`MultiScaleImage`指出您可能想要从中窃取一些逻辑以便做到最好的控件：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.multiscaleimage%28v= vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.multiscaleimage%28v=vs.95%29.aspx)

还有一件事。这可以通过 DeepZoom 轻松完成。由于它在 XAML 中尚不可用，这并不意味着您不能利用 WebView 来完成此操作。它将为您提供一个预先构建的、可疯狂扩展（且免费）的解决方案。但选择权在你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T12:08:18.460

有人记得这个线程吗？=) 好的，我已经在[我的应用程序](http://apps.microsoft.com/windows/app/pict8/04366e7f-e3f2-4dd8-aa4b-629223935359)
上实现了“在缩放期间替换图像” 。 正如上面提到的@Vitary，如果“内容”的大小发生变化，滚动查看器会重置缩放比例和 X/Y 偏移量。 为避免这种情况，我的应用程序 xaml 使用以下结构：

```
<FlipView>
  <DataTemplate>
    <ScrollViewer>
      <ViewBox> <-- This size is same with original image width/height. No change during zoom in/out.
        <Image/>  <-- This size is vary.
      </ViewBox>
    </ScrollViewer>
  </DataTemplate>
</FlipView> 
```

通过保持 viewbox 的大小相同，可以避免滚动查看器的重置。我的实现是...

1.  用户选择翻转视图的项目。在这个序列中，viewsource 代码将原始图像的 w/h 设置为 viewsource 成员。该成员绑定到 viewbox 的 w/h。
2.  进行低分辨率解码。然后通过绑定设置为图像控制。如您所知，viewbox 可以自动拉伸内容以适应 viewbox 的大小。
3.  当用户做出缩放手势时，代码隐藏通知 ViewModel。ViewModel 启动 original-res 解码，然后通过绑定将图像设置为图像控件。在这个序列中，滚动查看器可以保持偏移和缩放比例。因为，viewbox 的大小没有改变。从低分辨率到原始分辨率的切换非常顺畅且没有故障。

# c# - 如何在 ASP.NET 中获取客户端打印机详细信息？

> ID：14495881
> 
> 赞同：1
> 
> 时间：2013-01-24T07:18:37.993
> 
> 标签：c#, asp.net, linux, wmi

我正在开发基于 Web 的应用程序（Asp.net Mvc3 Razor，Sql server 2012），我想在其中`get printers that connected in client system`

为了在 Windows 安装的系统中获取打印机名称，我使用了 WMI（Windows 媒体工具），但我将如何获取`linux`基于相同目的的系统信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:15:33.103

你不能。

Web 浏览器不会在 HTTP 标头中公开附加打印机的详细信息，也没有任何公开的浏览器脚本 API 用于打印。

唯一的解决方法是使用 Java 小程序或 ActiveX 控件，它可以跳出浏览器沙箱并查询打印机。但是请注意，这两种方法都不适用于现代 Internet - ActiveX 在 2002 年左右实际上已经失效，而 Java 也在快速退出。

Flash 确实有一个基本的打印 API，它可能会返回连接的打印机的名称，但它并不可靠。

作为对第 2 部分的回应：显然 WMI 在 Linux 上不起作用，您可能会在某个地方使用 CUPS 或在 下查询`/dev`，但 Linux 没有 WMI 之类的东西。

为什么你仍然想要附加打印机的详细信息？Web 服务器应用程序无法命令客户端打印任何内容。WMI 只会告诉您应用程序正在运行的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:42:18.373

我认为通过`CUPS`网络界面你可以完成任务。 [检查这个](http://www.ghacks.net/2009/05/17/configure-linux-printing-via-web-browser/)

# angularjs - 为什么格式化程序不适用于隔离范围？

> ID：14495882
> 
> 赞同：5
> 
> 时间：2013-01-24T07:18:46.267
> 
> 标签：angularjs, angularjs-scope

为什么格式化程序不适用于隔离范围？这是角度错误还是我做错了什么？

这包含隔离范围并且不起作用：http: [//jsfiddle.net/YbdXQ/56/](http://jsfiddle.net/YbdXQ/56/)

```
 restrict: 'A',
 scope:{},
 link: function(scope, elm, attrs, ctrl) {
      ctrl.$formatters.unshift(function(modelValue) {
          console.log("In formatters" + modelValue);
         return $filter('date')(modelValue);
     }); 
```

这不包含孤立和范围工作正常：http: [//jsfiddle.net/YbdXQ/57/](http://jsfiddle.net/YbdXQ/57/)

```
 restrict: 'A',
 link: function(scope, elm, attrs, ctrl) {
      ctrl.$formatters.unshift(function(modelValue) {
          console.log("In formatters" + modelValue);
         return $filter('date')(modelValue);
     }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T08:11:38.427

这与格式化程序没有任何关系，而是`ngModel`不再有权访问您尝试传递它的值的事实。当您创建隔离范围时，指令`myDate`不再可用`ngModel`（因为您创建了一个新范围 - 一个隔离范围 - 没有`myDate`它）。作为证明，这是一个[不太有用的示例](http://jsfiddle.net/YbdXQ/78/)`myDate`，它根据传递给`ngModel`属性的内容设置范围：http: [//jsfiddle.net/YbdXQ/78/](http://jsfiddle.net/YbdXQ/78/)

[angular/angular.js#1069](https://github.com/angular/angular.js/issues/1069)，“一个指令的隔离范围隔离了同一元素上的其他指令”，谈到了这个问题：

> 例如，注意我的自定义指令是如何阻止 ng-model 工作的

您可能还对[这个 StackOverflow 问题“ngModel and component with isolated scope”](https://stackoverflow.com/questions/11896732/ngmodel-and-component-with-isolated-scope)感兴趣。

# c# - 用户控件中Text属性的封装

> ID：14495883
> 
> 赞同：1
> 
> 时间：2013-01-24T07:18:51.727
> 
> 标签：c#, user-controls, encapsulation

我正在创建一个继承 UserControl 的自定义标签。为了封装 Text 属性，我创建了下面的脚本。

```
 [Browsable(true)] // <--- This is necessary to show the property on design mode
    public override string Text
    {
        get
        {
            return label1.Text;
        }
        set
        {
            label1.Text = value;
        }
    } 
```

唯一的问题是，即使我在设计模式下设置了 Text 属性，当我重建项目时，文本也会恢复为默认值。

```
 public UCLabel() // <--- this is the class constructor
    {
        InitializeComponent();
        BackColor = Global.GetColor(Global.UCLabelBackColor);
        label1.ForeColor = Global.GetColor(Global.UCLabelForeColor);
        label1.Text = this.Name;
    } 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:00:35.457

*显然，'text' 的值没有被序列化。*

要解决此问题，您只需添加[DesignerSerializationVisibility 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerserializationvisibility.aspx)

```
 // This is necessary to show the property on design mode.
    [Browsable(true)] 
    // This is necessary to serialize the value.
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)] 
    public override string Text
    {
        get
        {
            return this.label1.Text;
        }
        set
        {
            this.label1.Text = value;
        }
    } 
```

# windows-phone - 更新Windows Phone磁贴的所有方法是什么？

> ID：14495884
> 
> 赞同：0
> 
> 时间：2013-01-24T07:18:54.167
> 
> 标签：windows-phone, live-tile

通过 MSDN 库和其他论坛，这些是更新 Windows Phone Live Tiles (afaik) 的方法：

1.  使用推送通知，
2.  后台代理，
3.  ShellTileSchedule（仅更新磁贴的背景图像）。

**还有其他方法吗？**

实际上，我正在开发一个应用程序，该应用程序从 Web 服务获取数据/更新（不仅仅是背景图像）的集合以显示在磁贴上。此数据需要随机显示在图块上。

现在回顾一下我刚才的选择

1.  ~~使用推送通知，~~
2.  后台代理，
3.  ~~ShellTileSchedule（仅更新磁贴的背景图像）~~.

后台代理有限制（每天每个订阅 500 次更新（如果我不使用 SSL）、15 秒超时等）

所以我正在寻找一个更好的解决方案，如果有的话。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T12:55:00.217

To reference this nice Build video at 3:05 [http://channel9.msdn.com/Events/Build/2013/2-206](http://channel9.msdn.com/Events/Build/2013/2-206)

![Notifications overview windows phone 8](../Images/fdc5d2c9d2ef4e701d208062acc5297f.png)

To update a Tile, there is:

1.  Scheduled

    1.1 ShellTileSchedule [http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.shelltileschedule%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.shelltileschedule%28v=vs.105%29.aspx)

2.  Push & Local

    2.1 Push notification [http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558%28v=vs.105%29.aspx)

    2.2 Local notification

So why is push notification no option for you? That seems the best option for a remote webservice.

The other option is to use `ShellTileSchedule` and have your webservice compose a bitmap. [https://writeablebitmapex.codeplex.com/](https://writeablebitmapex.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:33:45.973

这些是目前 Windows Phone 上的唯一选项。Windows 8 有[轮询磁贴更新](http://msdn.microsoft.com/en-us/library/windows/apps/jj150587.aspx)的想法，这非常方便，所以我希望有一天它们会出现在 Windows Phone 中......

# linux - 连接模式和无连接unix域sendmsg()之间的性能差异

> ID：14495893
> 
> 赞同：1
> 
> 时间：2013-01-24T07:19:30.900
> 
> 标签：linux, sockets, kernel, datagram, packets

我正在编写一个涉及在两个进程之间传递文件描述符的应用程序。我正在使用 unix 域套接字，`sendmsg()`并`recvmsg()`通过将 FD 作为辅助数据传递来做同样的事情。

我在测试中发现，`sendmsg()`连接模式`SOCK_SEQPACKET`套接字的性能比无连接套接字的性能要好得多`SOCK_DGRAM`。这背后的原因是什么？

这就是我测试我的代码的方式。客户端程序是一个使用 的事件循环`epoll`，它`recvmsg()`在 FD 上执行 a 并立即关闭接收到的 FD，非常简单。

在服务器端，我有多个线程`sendmsg()`在客户端对这个单一的 FD 执行操作。我已经尝试过多种组合的线程数，`sendmsg()`每个线程的调用数等，但是`sendmsg()`连接模式套接字比它的无连接套接字计数器部分要快得多。

我能想到的唯一原因是内核可能必须通过涉及一些文件系统调用的套接字路径名来查找客户端 FD？

# android - 突出显示 textview 以便知道它是可点击的

> ID：14495896
> 
> 赞同：3
> 
> 时间：2013-01-24T07:20:05.810
> 
> 标签：android, user-interface, textview

我在多个信息文本视图（不可交互）之间有一个可点击的文本视图。

是否有任何 android 属性或 UI 指南来显示可点击的 textview。这样用户在看到可点击的文本视图后会立即获得它。欢迎任何其他建议。

我尝试在网页超链接中为 textView 赋予蓝色，它看起来很糟糕，因为我的背景也是蓝色的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T07:27:07.497

如果您想以编程方式执行此操作，您可以为此使用 SpannAbleString，如果您想使用 UI 执行此操作，则为 SpanAble 字符串示例片段创建一个文本选择器如下

```
SpannableString spanScan3;
    spanScan3=new SpannableString("or register manually");

        ClickableSpan myActivityLauncher = new ClickableSpan() {
             public void onClick(View view) {
               Intent intent=new Intent (getApplicationContext(),ManualRegistration.class);
               startActivity(intent);
             }
           };

spanScan3.setSpan(myActivityLauncher, 12, 20, 0);
spanScan3.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.light_green)), 12, 20, 0);
        spanScan3.setSpan(new UnderlineSpan(), 12, 20, 0);
Scan_text_3.setText(spanScan3,BufferType.SPANNABLE); 
```

如果你想给颜色 在这里使用 UI 是在 res 目录中的 Sample make color 文件夹，在 Color foldr 中创建一个 xml 名称，如 textColor.xml 和 Xml

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
        android:color="@color/whiteColor"></item>
    <item android:color="@color/bluetxt"></item> 
</selector> 
```

做这样的事情并将其引用到您的 textView

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:24:27.077

在下面的行中使用你想要的颜色水：

```
 <YourTextView>.setText(Html.fromHtml("<u><FONT COLOR=\"#736AAA\" >"+String+"</Font></u>")); 
```

# c++ - 命名管道错误：无法创建命名管道 w/err 0x0000007b

> ID：14495899
> 
> 赞同：2
> 
> 时间：2013-01-24T07:20:14.443
> 
> 标签：c++

**无法创建命名管道 w/err 0x0000007b**

当我尝试在不同的机器上连接服务器和客户端时出现上述错误。

我从 MSDN 链接获得的代码：http: [//code.msdn.microsoft.com/windowsdesktop/CppNamedPipeCommunication-7447a0bf](http://code.msdn.microsoft.com/windowsdesktop/CppNamedPipeCommunication-7447a0bf)

我正在使用 Windows 7 机器进行通信。

**#define FULL_PIPE_NAME L"\\\\.\\pipe\\SamplePipe"**

为了与不同的机器通信，我将上面的行更改为：

**#define FULL_PIPE_NAME L"\\\\我的机器的 IP 地址\\pipe\\SamplePipe"**

注意：在同一台机器上，只有当路径是：L“\\\\.\\pipe\\SamplePipe”时它才会起作用。如果我提供同一台机器的 IP 地址，它会给出同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:50:20.043

错误代码 0x0000007B 是`ERROR_INVALID_NAME`（“文件名、目录名或卷标语法不正确”）。 [阅读文档](http://msdn.microsoft.com/en-us/library/aa365783.aspx)。当服务器调用`CreateNamedPipe()`时，它**必须**只使用`"\\.\pipe\SamplePipe"`名称，因为它不能在另一台机器上创建管道。当客户端连接到管道时，`"\\ServerName\pipe\SamplePipe"`如果连接到远程或本地机器上的管道，它可以使用名称，或者`"\\.\pipe\SamplePipe"`仅当连接到本地机器上的管道时才使用名称。客户端不能使用服务器的 IP 地址，它必须使用服务器的网络机器名。

# asp.net-mvc - EditorFor id & 名称约定覆盖

> ID：14495905
> 
> 赞同：3
> 
> 时间：2013-01-24T07:21:25.870
> 
> 标签：asp.net-mvc, forms, asp.net-mvc-4, html-helper, editorfor

我有一个简单的表格来修改复杂模型的一部分。我当然可以削减模型，但我想解决复杂的情况，因为无论如何我们最终都会处理整个模型。

我希望渲染的输入有一个简单的 ID 和名称，但模型名称似乎是不可移动的。

```
@Html.EditorFor(model => model.CallInfo.Phone1,
   new { @id = "Phone1", @name = "Phone1"}) 
```

应该输出这个

```
<input type="text" value="" name="Phone1" id="Phone1" class="text-box single-line"> 
```

相反，它输出这个，CallInfo 到处都是前缀。

```
<input type="text" value="" name="CallInfo.Phone1" id="CallInfo_Phone1" class="text-box single-line"> 
```

如果这不能被打败，那么有没有办法让`CallInfo.Phone1`参数自动解析为动作方法的参数？因为这是 C# 中的无效语法。

```
public ActionResult UpdatePhoneNumber(Int32 profileId, String CallInfo.Phone1) 
```

再次，我意识到我可以从请求中手动检索它，就像这样

```
HttpRequest.Current.Params["CallInfo.Phone1"] 
```

但看起来 C# MVC4 约定在这里应该很好地结合在一起，使这些自动魔术小部件中的一个做正确的事情。

**更新：**按照 Dmitri 的回答，我保留了视图标记的`name="CallInfo.Phone1"`原样，生成了属性并将操作签名修改为：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult UpdatePhoneNumber(Int32 profileId,
    [Bind(Prefix = "CallInfo")] string phone1)
{
    // Save it
} 
```

在调试器中，`phone1`为 null 并且不会保存到数据库中。从萤火虫捕获的帖子正文是这样说的：

```
Parameters          application/x-www-form-urlencoded
CallInfo.Phone1     8121234567 
```

我也尝试过`p`将`Phone1`参数名称中的大写无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:38:43.037

> 如果这不能被打败，那么有没有办法让 CallInfo.Phone1 参数自动解析为操作方法的参数？因为这是 C# 中的无效语法。

当然，使用`[Bind]`属性：

```
public ActionResult UpdatePhoneNumber(
    int profileId, 
    [Bind(Prefix = "CallInfo")] string phone1
)
{
    ...
} 
```

甚至更好，通过定义视图模型：

```
public class MyViewModel
{
    public int ProfileId { get; set; }
    public CallInfoViewModel CallInfo { get; set; }
}

public class CallInfoViewModel
{
    public string Phone1 { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public ActionResult UpdatePhoneNumber(MyViewModel model)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:39:23.703

如果我理解正确，您希望 CallInfo.Phone1 和 Phone1 作为 Action 方法的参数。在这种情况下，您的模型应该是 CallInfo 模型和 Phone1（字符串？）参数的容器。

```
class bigModel
{
   CallInfoType CallInfo { get;set;}
   string Phone1 { get;set;}

} 
```

将相同的模型传递给您的视图

```
@model Project.Models.bigModel 
```

并将其用于您的操作方法的签名

```
 public ActionResult Edit(bigModel); 
```

# javascript - 为什么当我的函数中有警报时我的视图会更新，但当我没有时却没有

> ID：14495909
> 
> 赞同：0
> 
> 时间：2013-01-24T07:21:46.547
> 
> 标签：javascript, html, partial-page-refresh

所以我有一个html页面调用index.html，它看起来像：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<title>sometitle</title>
<link rel="stylesheet" href="style.css" />  

</head>
<body>
<div id="Screen">
<section class="loginform cf">
    <form action="#" method="post" id="loginwindow">
        <ul>
            <li>
                <label for="usermail">Email</label>
                <input type="email" name="useremail" placeholder="youremail@email.com" required>
            </li>
            <li>
                <label for"password">Password</label>
                <input type="password" name="password" placeholder="password" required>
            </li>
            <li>
                <input type="submit" value="Check In">
            </li>
        </ul>
    </form>
</section>  

<script src="js/index.js"></script>
</div>
</body>
</html> 
```

它有一个名为 index.js 的 js 文件，如下所示：

```
window.onload = function () {
var loginForm = document.getElementById('loginwindow');  
if ( loginwindow ) {
    loginwindow.onsubmit = function () {
        var useremail = document.getElementById('useremail');
        var password = document.getElementById('password');

        // Make sure javascript found the nodes:
        if (!useremail || !password ) {     
            load("LoopIt_DashBoard.html");
            return "success";
        }

    }
}
}

function load(url)
{

$("#Screen").load(url, function(response, status, xhr) {
if (status == "error") {
var msg = "Sorry but there was an error: ";
$("#error").html(msg + xhr.status + " " + xhr.statusText);
}
});
test();

}

function test()
{

alert("test");

}
function test(string)
{

alert(string);

} 
```

还有一个名为 LoopIt_DashBoard.html 的 html 文件，如下所示：

```
<div id="Screen">
<section  class="loginform cf">
    <form action="#" method="post" id="loginwindow">
        <ul>
            <li>
                <input type="submit" value="Check In">
            </li>
        </ul>
    </form>
</section>  
</div> 
```

现在这段代码所做的是获取电子邮件和密码，并将两者进行比较。如果它们相等，那么它会使用 LoopIt_DashBoard.html 文件中的代码更改 div 中的 html 和 id Screen。但是，如果我取出仅调用警报的线路（我将其用于测试）

```
test(); 
```

从

```
function load(url)
{

$("#Screen").load(url, function(response, status, xhr) {
if (status == "error") {
var msg = "Sorry but there was an error: ";
$("#error").html(msg + xhr.status + " " + xhr.statusText);
}
});
test();

} 
```

那么这个功能不起作用，页面不会改变。如何在不使用警报的情况下更新我的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:58:14.440

`alert`将暂停 JavaScript 函数的执行，允许由事件处理触发的任何其他 JavaScript 接管，导致当前事件处理程序的上下文丢失。

如果没有警报，您`load()`将被遗忘，因为您的`onsubmit`事件处理程序将正常返回，并允许发布表单数据，基本上刷新页面，尽管操作是`"#"`，因为它是一个 POST。所以你的视图可能正在更新，但是，文档也在重新加载，所以看起来它不是。

`onsubmit()`如果您自己处理表单，则需要取消表单。一种方法是返回`false`而不是`"success"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:20:16.903

你也在打错字......
它应该是你的if语句中的loginFrom而不是loginWindow。

```
var loginForm = document.getElementById('loginwindow');  
      if ( loginForm ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:42:45.600

如果这是原始代码，它不应该工作，因为你只是设置了名称属性：

HTML

```
...

<input type="email" name="useremail" placeholder="youremail@email.com" required>

... 
```

Javascript

```
...
var useremail = document.getElementById('useremail'); //but you just set the Name Attribute
... 
```

除了一些不干净的代码，看起来还不错。

我也会稍微清理一下代码，例如：

```
window.onload = function () {
var loginForm = $('#loginwindow')[0];  
if ( loginwindow ) {
    loginwindow.onsubmit = function () {
        var useremail = $('#useremail')[0];
        var password = $('password')[0];
        // Make sure javascript found the nodes:
        if ( useremail && password ) {     
            load("LoopIt_DashBoard.html");
            return "success";
        }

     }
   }
}

... 
```

**重要** 这些函数相互覆盖，因为它们具有相同的名称

```
function test()
{
    alert("test");
}

function test(string)
{
    alert(string);
} 
```

**提示**如果这不是原始代码，请检查/计算卷曲和正常的分支。这可以解释奇怪的现象。

# google-app-engine - 是否可以在 GAE 中使用传统的 MQ（RabbitMQ 或 ActiveMQ）？

> ID：14495910
> 
> 赞同：2
> 
> 时间：2013-01-24T07:21:49.647
> 
> 标签：google-app-engine, activemq, rabbitmq, amqp

我有一个 Java webapp（在 Tomcat 中运行），它使用 ActiveMQ 将“作业”排队以响应用户采取的操作。

我正在考虑将应用程序移植到 Google App Engine，我知道他们提供了一个任务队列 API，但我更愿意坚持使用不太特定于容器的消息传递/队列系统，例如 JMS 或 AMPQ。

我想知道是否可以在 GAE 内启动一个消息服务器实例，如 ActiveMQ 或 RabbitMQ。或者这个想法在像 GAE 这样的分布式环境中没有意义吗？我仍然只是在研究 GAE，所以在这一点上，它的分布式特性对我来说有点神秘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:32:59.337

您不能在 GAE 中使用 ActiveMQ 或 RabbitMQ。如果您对 Cloud Hosting 没有任何偏好，您可以在**Amazon EC2**中配置 try Active/RabbitMQ 。

可以在此[链接](http://www.rabbitmq.com/ec2.html)中找到讨论此问题的文章。

更新：现在您可以使用[Google Cloud Platform Compute Engine](https://cloud.google.com/products/compute/)并在那里安装您的 rabbitMQ/ActiveMQ。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:59:49.107

您不能在 GAE 中启动 ActiveMQ 或 RabbitMQ，您可能可以在其他地方运行它并使用实验性套接字连接进行连接，但我怀疑这是否值得。

如果您担心锁定，编写某种将任务队列 API 与 GAE 和其他解决方案一起使用的抽象可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T13:17:55.433

现在可以在 GAE 中使用 RabbitMQ：[https ://cloud.google.com/solutions/rabbitmq/](https://cloud.google.com/solutions/rabbitmq/)

# iphone - 如何上传图片，然后在 iOS 中基于该图片执行自定义谷歌图片搜索？

> ID：14495912
> 
> 赞同：8
> 
> 时间：2013-01-24T07:21:50.107
> 
> 标签：iphone, ios, image-uploading, google-image-search

聪明的人民，

我一直致力于执行自定义谷歌图像搜索，例如输入文本，它将显示图像列表，我在 JSON 中获得了该文件。我已经提到了[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

现在我想从我的应用程序上传图像，并且在我想使用该上传的文件进行谷歌图像搜索之后，它会根据像素、视图、大小等向我显示与该上传图像相关的类似图像的结果..

例如，您可以查看谷歌图片搜索，在搜索栏上，您会在角落看到一个小相机，只需点击它并上传一张图片，它会显示与上传图片相似的结果。

我想在我的 IOS 应用程序中使用相同的概念。请尽快从头开始帮助我，您的回复将非常受赞赏和钦佩..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:05:27.203

您需要反向图像搜索。这项业务有两个主要参与者：[Google](http://images.google.com/)和[Tineye](http://www.tineye.com/)。在谷歌到来之前 Tineye 非常酷。现在，我更喜欢谷歌。此外，Tineye 搜索是付费的。

[我在这里](https://github.com/madhead/google-images-search)有 Google 的示例代码。用 Objective-C 重写它以在 iOS 设备中使用一定不是很难。

# java - 如何将数组格式的值从 android 应用程序发送到非基于 Web 的服务器并检索它？

> ID：14495914
> 
> 赞同：-3
> 
> 时间：2013-01-24T07:21:56.063
> 
> 标签：java, android

我正在做一个基于云计算的项目。前端是android，后端是java。在 android 上，我需要收集 2 个数组列表目的地和活动。

我需要将这 2 个数组列表发送到基于 java 的服务器。

我也没有太多想法。如何将数据从 android 发送到后端服务器？

输出为：

```
String[][] dest = new String[3][3];
    dest[0][0] = "Hyundai Car Center,Sector 63,Noida";
    dest[0][1] = "11:00";
    dest[0][2] = "2";
    dest[1][0] ="Sector 12,Noida";
    dest[1][1] = "09:00";
    dest[1][2] = "0.5";
    dest[2][0] ="GIP, sector 18,Noida";
    dest[2][1] = "14:00";
    dest[2][2] = "3.5";
String[][] activity = new String[2][2];
    activity[0][0] = "Buy Clothes";
    activity[0][1] = "0.5";
    activity[1][0] = "food";
    activity[1][1] = "1"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:35:23.680

创建 JSONArray 并将其存储在您的数组中

这是 JSON 数组的格式

```
["value1",
 "value2",
 "value3",
 "value4",
   ...
] 
```

[http://www.json.org/fatfree.html](http://www.json.org/fatfree.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T09:57:46.103

在您的 java 类中创建一个静态数组，然后在您的活动类中添加值。那会解决它吗？

# java - 如何在 JAXB（Eclipse MOXy）中标记第 3 方不可变对象

> ID：14495920
> 
> 赞同：2
> 
> 时间：2013-01-24T07:22:06.563
> 
> 标签：java, jaxb, eclipselink, moxy

我有三个第 3 方不可变对象（Foo、Bar、BarFactory）和 binding.xml。我想在 binding.xml 中标记第 3 方不可变对象，但 JAXB 需要零参数构造函数。在 JAXB 和 MOXy 中编组这些类是不可能的吗？

Foo、Bar、BarFactory、演示代码 binding.xml 如下。

```
package example.bindingfile;

public class Foo{
    public static Foo getInstance(int value1, float value2){
        return new Foo(value1, value2);
    }
    private final int value1;
    private final float value2;
    private Foo(int value1, float value2){
        this.value1 = value1;
        this.value2 = value2;
    }
    public int getValue1(){
        return value1;
    }
    public float getValue2(){
        return value2;
    }
}

package example.bindingfile;
public class Bar{
    private final int value;
    Bar(int value){
        this.value = value;
    }
    public int getValue(){
        return value;
    }
}

package example.bindingfile;
public class BarFactory{
    private BarFactory(){}
    public static Bar getInstance(int value){
        return new Bar(value);
    }
} 
```

binding.xml，自定义的 ClassExtractor 和演示类如下。

--- 绑定.xml

```
<?xml version="1.0"?>
    <xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/oxm http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_3.xsd"
    version="2.3"
    package-name="example.bindingfile">
    <xml-schema
        namespace="http://www.example.com/bindingfile"
        element-form-default="QUALIFIED"/>
    <java-types>
        <!--
        <java-type name="Foo" xml-accessor-type="FIELD">
            <xml-root-element/>
            <xml-type prop-order="value1 value2"/>
            <java-attributes>
                <xml-element java-attribute="value1" name="val1"/>
                <xml-element java-attribute="value2" name="val2"/>
            </java-attributes>
        </java-type>
        -->
        <java-type name="Bar" xml-accessor-type="PROPERTY">
            <xml-root-element/>
            <!--<xml-java-type-adapter value="example.bindingfile.BarAdapter"/>-->
            <xml-type prop-order="value"/>
            <xml-class-extractor class="example.bindingfile.BarExtractor"/>
            <java-attributes>
                <xml-element java-attribute="value" name="Value"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

```
package example.bindingfile;

import org.eclipse.persistence.descriptors.ClassExtractor;
import org.eclipse.persistence.descriptors.MethodClassExtractor;
import org.eclipse.persistence.sessions.Record;
import org.eclipse.persistence.sessions.Session;

public class BarExtractor extends MethodClassExtractor{
    public BarExtractor(){}
    @Override public Class extractClassFromRow(Record databaseRow, Session session){
        return BarFactory.class;
    }
    @Override public String getClassExtractionMethodName(){
        return "getInstance";
    }
} 
```

```
package example.bindingfile;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo{
    public static void main(String[] args) throws Exception{
        Map<String, Object> properties = new HashMap<String, Object>(1);
        List<Object> bindingFileList = new ArrayList<Object>(1);
        bindingFileList.add("example/bindingfile/binding.xml");
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, bindingFileList);
        JAXBContext jc = JAXBContext.newInstance(new Class[]{Bar.class}, properties);
    //JAXBContext jc = JAXBContext.newInstance(Bar.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(BarFactory.getInstance(1), System.out);
    }
} 
```

和 example.bindingfile.Demo 抛出异常。

```
Exception in thread "main" javax.xml.bind.JAXBException: 
Exception Description: The class example.bindingfile.Bar requires a zero argument constructor or a specified factory method.  Note that non-static inner classes do not have zero argument constructors and are not supported.
 - with linked exception:
[Exception [EclipseLink-50001] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.JAXBException
Exception Description: The class example.bindingfile.Bar requires a zero argument constructor or a specified factory method.  Note that non-static inner classes do not have zero argument constructors and are not supported.]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:926)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:163)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:171)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:158)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:118)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:108)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:385)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at example.bindingfile.Demo.main(Demo.java:16)
Caused by: Exception [EclipseLink-50001] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.JAXBException
Exception Description: The class example.bindingfile.Bar requires a zero argument constructor or a specified factory method.  Note that non-static inner classes do not have zero argument constructors and are not supported.
    at org.eclipse.persistence.exceptions.JAXBException.factoryMethodOrConstructorRequired(JAXBException.java:142)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.finalizeProperties(AnnotationsProcessor.java:826)
    at org.eclipse.persistence.jaxb.compiler.XMLProcessor.processXML(XMLProcessor.java:412)
    at org.eclipse.persistence.jaxb.compiler.Generator.<init>(Generator.java:145)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:922)
    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:34:09.247

目前，您可以在[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php) [**（**](http://jcp.org/en/jsr/detail?id=222)以及所有其他使用`XmlAdapter`.`XmlAdapter`

*   [http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html](http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html)

已打开以下增强请求以在 MOXy 中原生支持多参数构造函数。您可以将您的投票添加到此增强功能中，以帮助将其提高优先级。

*   [http://bugs.eclipse.org/328951](http://bugs.eclipse.org/328951)

# uiview - Coso2D 中 UIWebView 的奇怪行为

> ID：14495928
> 
> 赞同：0
> 
> 时间：2013-01-24T07:22:27.337
> 
> 标签：uiview, uiwebview, cocos2d-iphone

以下代码导致我的游戏崩溃..如果我将其注释掉，我根本没有问题..我真的看不出任何错误..我首先认为这可能是由内存问题引起的，但在我的dealloc 方法我正在释放视图和 webview.. 我做错了什么？

```
view = [[UIView alloc] initWithFrame:CGRectMake(0, self.boundingBox.size.width, self.boundingBox.size.width, self.boundingBox.size.height)];

         NSString *urlAddress=@"http://www.google.com";

         NSURL *url = [NSURL URLWithString:urlAddress];
         NSURLRequest *reqObject=[NSURLRequest requestWithURL:url];
         webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.boundingBox.size.width, self.boundingBox.size.height )];
         webView.delegate = self;
         [webView loadRequest:reqObject];
         [view addSubview:webView];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button setImage:[UIImage imageNamed:@"ok-button"] forState:UIControlStateNormal];

        [button addTarget:self
                   action:@selector(web)
         forControlEvents:UIControlEventTouchDown];
        [button setTitle:@"Show View" forState:UIControlStateNormal];
        button.frame = CGRectMake(self.boundingBox.size.width - 40, 10, 30, 30.0);
        [view addSubview:button];

         [[[CCDirector sharedDirector] openGLView] addSubview:view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:28:10.363

我在 cocos2d 游戏中使用 UIWebview 并且工作正常。这是我的代码：

```
 AppController *app =  (AppController*)[[UIApplication sharedApplication] delegate];

        self.infoWebView = [[UIWebView alloc] initWithFrame:webFrame];
        self.infoWebView.backgroundColor = [UIColor whiteColor];

        self.infoWebView.scalesPageToFit = YES;
        self.infoWebView.layer.cornerRadius = 15;
        self.infoWebView.layer.borderWidth = 5;
        self.infoWebView.layer.borderColor = [[UIColor whiteColor] CGColor];

        self.infoWebView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
        self.infoWebView.delegate = self;
        self.infoWebView.clipsToBounds = YES;

        [app.navController.view addSubview:self.infoWebView];

        [self.infoWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:GOODIES_HTML]]]; 
```

# eclipse - 将代码从 Eclipse 提交到 GitHub

> ID：14495934
> 
> 赞同：2
> 
> 时间：2013-01-24T07:22:46.937
> 
> 标签：eclipse, github

如何使用 eclipse 将代码提交到 GitHub 服务器？

当我运行这个命令

```
git push -u origin master 
```

它显示以下错误

> 错误：请求的 URL 返回错误：访问 [https://github.com/something/something时出现 403](https://github.com/something/something)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:51:11.807

我不是专家，但我做过一次

认为简单直接的方法是

1.下载Git到你的系统

2.cd 到你的 Eclipse 项目 cd /workspace/sampleproject

3.命令

```
git config --global user.name "Your Name Here"
git config --global user.email "your_email@youremail.com"
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/gitusername/reposname.git
git push -u origin master                   this line may throw an error but no problem 
```

4.从eclipse->帮助->eclipse市场->搜索'git'->安装'Egit-git team provider'

5.转到eclipse->Windows->打开透视图->Git存储库

6.从“添加现有本地存储库”左侧的 Git 存储库视图，然后浏览到“/workspace/sampleproject”

7.现在右键单击这个添加的存储库位置并添加评论按提交。

8.现在右键单击此添加的存储库单击推送

```
 By default Configured remote repository should be checked then press Next
      From Source Ref and Destination Ref  Select HEAD    //you may change if u want
      Select next give your github username and password then click on Finish. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:33:53.353

如果您使用的是 https 地址，则需要传递您的凭据（Github 登录名和密码）。有关示例，
请参阅“[与 github 同步”。](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)

使用 Eclipse 和 Egit，您可以在为本地存储库定义远程地址时设置这些凭据。
请参阅“[向上游推送](http://wiki.eclipse.org/EGit/User_Guide#Push_Upstream)”。

![上游凭证](../Images/b8542c98a88df0678b5eb5dd8f986331.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T12:21:42.870

只需打开项目透视图并单击 Git，您将看到项目的工作副本 --> 右键单击​​项目并选择选项提交。就是这样

或者

右键单击您的项目并选择团队，您可以看到与 git 命令相关的各种选项选择提交。

# php - 对 POS 的离线数据库支持

> ID：14495935
> 
> 赞同：2
> 
> 时间：2013-01-24T07:22:50.480
> 
> 标签：php, mysql, html, indexeddb, breeze

我开发这个销售点系统将近一个月，一直在寻找一种方法来为我的应用程序实现离线支持。我想使用 IndexedDB，但在最初应将哪些数据加载到应用程序时遇到问题。

让我给你一个场景。

我开始交易并输入了一些项目。不幸的是，雷神之怒摧毁了一座塔，在我进行交易时导致网络断开。

在这种情况下，我应该如何构建我的应用程序？

A. 将所有条目直接放入 MySQL db 并使用 IndexedDB 进行离线条目。（问题：断开后将永远不会恢复初始条目。）

B. 使用 HTML5 作为收银员交易的主数据库，并在成功结账后仅将其传输到 MySQL 数据库。（问题：大量数据会在系统负载时存储到IndexedDB。）

我正在考虑选项 B，但找不到最小化 MySQL 数据库中预加载数据大小的方法。为什么我需要加载这些数据？唯一能识别物品的是通过物品代码。我在 MySQL 数据库中有数千个项目，将它们加载到 IndexedDB 中是多余的。我需要在输入时获取每件商品的描述、单价、税率、折扣率、促销可用性和库存数量。实时监控也很重要。如果将所有这些数据都加载到 IndexedDB，5mb 是不够的。

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:25:21.803

首先它是具有 5mb 限制的本地存储，Indexeddb 没有限制，尽管浏览器有能力限制它，当然你的硬盘空间也是一个限制:)。

第二：如果您真的希望应用程序完全脱机工作，我只会使用 indexeddb。（例如，离线时启动 Web 应用程序并对其进行更改。）

我认为如果连接中断，您想要的只是一个后备，但几分钟后您毕竟可以同步。在这种情况下，我会将数据保存在内存中。这将减轻您保持在线和离线数据库同步的痛苦。当然，如果您真的想提供离线 Web 应用程序，您将需要 indexeddb API。

看看 upshot.js 和[BreezeJS](http://www.breezejs.com)。这是用于跟踪您的实体的库。当您在短时间内失去连接时，这些框架也有一些后备（例如将数据保存在内存中）。

简而言之，是否选择 indexeddb 取决于以下需求：

*   数据需要离线可用
*   即使您关闭 Web 应用程序并在一段时间后重新启动，更改也必须保留。

希望这能回答你的问题。

# java - Java：请求和响应对象，这是应用程序的最佳设计模式

> ID：14495936
> 
> 赞同：-1
> 
> 时间：2013-01-24T07:22:51.703
> 
> 标签：java, model-view-controller, design-patterns, web-applications, factory-pattern

**请帮助我为 Web 应用程序选择最佳设计模式。**

我有来自 Java Servlet 调用的“请求和响应”参数。如何设计我的类以便我可以有效地做到这一点、可重用性并添加自定义代码以将响应返回给应用程序。

根据我需要执行一些业务逻辑和 PLSQL 调用的条件，大约有 15 种操作类型。

最初我想为这 15 个动作使用工厂设计模式来创建 15 个类并在具有 15 个 diff 的新实例的静态方法中提供请求。类。即使我想到了 MVC 来设计..但是这里没有框架它的纯 Servlet 处理..

但现在我决定，在进行修改之前，我想知道哪个是最好的设计模式

> *再问一个问题，如果我将请求和响应作为参数传递给业务逻辑类并进行修改，这是一种好方法吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:35:25.370

+1 @Renjith 关于不将业务逻辑混合到 servlet 级别的评论，但是如果您想直接使用 servlet 的请求和响应对象，我建议您查看[servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)和[HttpServletRequestWrapper](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/HttpServletRequestWrapper.html)。

# php - 将从远程计算机运行 shell 脚本的 PHP 脚本

> ID：14495937
> 
> 赞同：0
> 
> 时间：2013-01-24T07:23:14.193
> 
> 标签：php

我一直在网上搜索如何在 php 中实现它。场景是我的 php 应用程序位于计算机 A 中，而我要执行的 shell 脚本文件位于计算机 B 中。我希望计算机 A 中的 php 应用程序执行计算机 B 中的 shell 脚本文件。

我知道权限在这方面起着非常重要的作用，但我可以访问计算机 B，所以设置权限没有问题。

顺便说一句，计算机 A 是 windows 服务器，计算机 B 是 kubuntu。有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:06:30.860

您可以在 PHP 中使用 ssh 函数来实现您正在寻找的东西，

参考[http://php.net/manual/en/ssh2.requirements.php](http://php.net/manual/en/ssh2.requirements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:11:21.660

可惜不能加包，就这样解决了

```
public function execScript($connection, $script)
{

    // Execute script        
    exec("ssh $connection $script 2>&1", $output, $error);

    if ($error) {
        throw new Exception ("\nError: ".print_r($output, true));
    }

    return $output;
} 
```

# php - 访问其他页面时重定向到 index.php

> ID：14495938
> 
> 赞同：0
> 
> 时间：2013-01-24T07:23:15.010
> 
> 标签：php

我有这个 php 页面

索引.php

```
<?php
    include 'viewannouncement.php';
?> 
```

查看公告.php

```
<?php     
          $result = mysql_query("SELECT announcement_date,announcement_title,
          announcement_text FROM sp_announcement") or die(mysql_error());  

        echo "<table id=\"newspaper-b\">";
        echo "<thead>";
        echo "<tr>";
        echo "<th scope=\"col\">Date</th>";
        echo "<th scope=\"col\">Title</th>";
        echo "<th scope=\"col\">Announcement</th>";
        echo "</tr>";
        echo "</thead>";

        while($row = mysql_fetch_array( $result )) {
                echo "<tr>";
                echo '<td>' . $row['announcement_date'] . '</td>';
                echo '<td>' . $row['announcement_title'] . '</td>';
                echo '<td>' . $row['announcement_text'] . '</td>';
                echo "</tr>"; 
        } 
        echo "</table>";
        echo "<br>";
        echo "<br>";
?> 
```

在 index.php 中它有一个选项卡，其中包含并查看 viewannouncement.php，问题是当我手动访问子页面时它会留下白屏，我怎样​​才能让它重定向到 index.php 并且仍然可以通过索引中的选项卡查看.php

我希望你们能帮助我，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:31:13.930

通常人们会设置一个变量来检查文件是否被包含，为什么不做这样的事情呢？在您的索引文件中

```
<?php
$fromIndex = true;
include 'viewannouncement.php';
?> 
```

然后在您的文件 viewannouncement.php 中，在顶部尝试此操作。

```
if(!isset($fromIndex)) {
  header('Location: /index.php');
  die;
} 
```

# php - 在php中获取facebook Json格式的内容

> ID：14495942
> 
> 赞同：0
> 
> 时间：2013-01-24T07:23:35.823
> 
> 标签：php, json

我刚刚开始学习 facebook 应用程序开发，如果它是一个字符串，我需要按名称获取 facebook 组 id，如果它的数字是（整数）。现在，我到目前为止所做的是：

```
 if(isset($_POST['scrape'])):
            $group_id = $_POST['gid'];
            if(!(int)$group_id)
            {
                $fb_group_array = file_get_contents("http://graph.facebook.com/".$group_id);                    
            }
        endif; 
```

其中 $fb_group_array 输出如下内容：

```
 {
               "is_published": true,
               "personal_info": "This group is where u Share Adult Jokes and Funny pictures.\nOnly \" BOYS \" with real identity are welcome to the group.\n( RULE: NO FIGHTS BETWEEN OUR BROTHERS, RESPECT; BEHAVE AND SALUTE to our BROTHERHOOD )\n(NOTE: ADULT CONTENTS, 18+ ONLY, GIRLS AND GAYS PROHIBITED)\nThank you. :)",
               "talking_about_count": 0,
               "username": "MENSROOMrELOADED",
               "were_here_count": 0,
               "category": "Public figure",
               "id": "429748430401621",
               "name": "M E N S R O O M (r E L O a D E D )",
               "link": "https://www.facebook.com/MENSROOMrELOADED",
               "likes": 137
            } 
```

现在我想从这个输出中提取数据作为 id、用户名等。我尝试爆炸它们并且它工作得很好但是我确信有更好的方法来做到这一点，比如转换为 PHP 数组或 JSON。请引导我走向正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:30:29.563

使用[`json_decode`](http://php.net/manual/en/function.json-decode.php)，像这样：

```
$fb_group_obj = json_decode($fb_group_array, true);
$group_fbid = $fb_group_obj['id']; 
```

# java - 在开发模式下使用 jsp 和 servlet 时发生内存泄漏的可能方法

> ID：14495945
> 
> 赞同：3
> 
> 时间：2013-01-24T07:23:58.823
> 
> 标签：java, jsp, servlets, memory-leaks

任何人都可以解释在开发模式下使用jsp和servlet时发生内存泄漏的可能方法吗？

开始使用后得到永久空间异常 `jsp&servlets`。

`eclipse.ini`我给出的内存规格：

```
-Xms1024m
-Xmx1024m
-XX:MaxNewSize=448m 
-XX:NewSize=448m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:28:42.130

这可能是您正在创建连接并且在重新部署您的项目时您没有释放您的连接资源这可能是您的 permgem 异常问题之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:21:02.810

以下是对此的一些评论/建议。

1.  您正在获得 permgen 空间异常。要理解这个错误，您需要对**Java 内存模型**以及 pergen 空间的使用方式有所了解。[查看此链接](http://plumbr.eu/blog/what-is-a-permgen-leak)以获取有关此内容的简要概述。
2.  基本上是堆空间中分配的对象永远不会被垃圾收集器回收的区域。在这个区域上分配了特定的对象类型（例如类加载器、文字池等）
3.  JVM 使用的 Pergen 空间可以在启动时指定。如果您不指定，它将采用一些默认值。
4.  对您的应用程序进行**内存分析**是个好主意。内存分析可以很好地了解实际的堆使用情况。您可以检查正在创建的对象的类型和数量，然后将它们跟踪到执行此操作的代码。
5.  有很多可用的商业和[开源分析工具](http://java-source.net/open-source/profilers)。您可以尝试其中的一些。有与 JDK 捆绑在一起的[VisualVM 。](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)
6.  最后，为 JVM 设置适当的内存设置始终是调整练习。它不是一种适合所有人的尺寸:) 并且分析对于调整您的应用程序非常重要。

# c# - 嵌套 DTO 搜索

> ID：14495947
> 
> 赞同：1
> 
> 时间：2013-01-24T07:24:00.257
> 
> 标签：c#, linq

我有 DTO Suach 的列表：

```
 Public Class UKey
{
    public Int64 Key{ get; set; }

}

Public Class Test : UKey
{
    public Int64? CityId  { get; set; }
    public Test2  test2{ get; set; }
}
Public Class Test2 : UKey
{
    public Int64? CountryId { get; set; }
    public Test3 test3 {get;set;}
}
public Class Test3 :UKey
{

} 
```

我有嵌套的 DTO，例如类 test 有一个类 test 2 的成员，类 test2 有一个类型类 test 3 的成员，每个类都有它自己的唯一键，这个键不能在任何一个中重复，类似于 GUId . 我想查询 Class Test 以找到具有给定唯一键的嵌套 Dto 之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:29:01.897

假设`tests`对象是`IEnumerable<Test>`，它是一组`Test`对象；

```
tests.SingleOrDefault(q => q.test2.Key == id || q.test2.test3.Key == id); 
```

更新：您需要应用递归搜索。我稍微改变了基类；

```
public class UKey
{
    public Int64 Key { get; set; }
    public UKey ReferencedEntity { get; set; }
} 
```

和搜索功能：

```
private UKey Search(UKey entity, Int64 id)
    {
        UKey result = null;
        if (entity.Key == id)
            result = entity;
        else
        {
            result = this.Search(entity.ReferencedEntity,id);
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:53:28.903

答案可能是使用一种[递归](https://stackoverflow.com/a/14497273/120480)形式：如果您在基类上创建一个`FindKey`方法并在派生类上相应地实现它，您可以简化查询：

```
//given: 
//'tests' is a IEnumerable<UKey>
//'g' = a guid you are looking for
tests.SingleOrDefault(q => q.FindKey(g)); 
```

并且类实现可能看起来像这样：

```
public abstract class UKey
{              
    public Guid Key{ get; set; }
    public abstract bool FindKey(Guid g);
}

public class Test : UKey
{
    public Int64? CityId  { get; set; }
    public Test2  Test2{ get; set; }

    public override bool FindKey(Guid g){
        return Key == g || (Test2!= null && Test2.FindKey(g));
    }   
}

/*etc.. implement the FindKey method on all you derived classes*/ 
```

# php - Eclipse php 调试器终止

> ID：14495948
> 
> 赞同：1
> 
> 时间：2013-01-24T07:24:03.550
> 
> 标签：php, eclipse, xdebug

我有一个使用 xdebug 作为调试器的 Eclipse 环境。这种配置已经运行了好几个月。我没有改变任何东西。在编码会话的中间，调试器在我的应用程序开始时意外终止。以为这是一个编码错误，但最终我将代码简化到即使是最简单的代码行也终止的地步：

```
$test = 1+1; 
```

行为是调试器按预期运行，直到到达断点。通常下一步会导致终止。“通常”，因为我发现它适用于包含语句，在这种情况下，包含文件中的第一行代码会导致终止。

Eclipse Helios 第 2 版，20110301-1815。OSX 10.7.4。用内部浏览器和 Firefox 都试过了。使用 MAMP 作为开发堆栈。尝试重新启动 Eclipse。尝试重新启动 Apache 和 MySQL。尝试重新启动 Mac。

没有想法。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:19:50.137

我对 Netbeans 也有类似的问题。问题原来是 XDebug，因为当有被监视的表达式时它变得非常不稳定。尝试从手表上取下所有东西。还可以尝试完全禁用变量观察或使用观察变量的深度禁用变量观察。

# ruby-on-rails - 如何将 Rails 模型记录与代码相关联？

> ID：14495955
> 
> 赞同：2
> 
> 时间：2013-01-24T07:24:43.317
> 
> 标签：ruby-on-rails, ruby, models

如果我有类似任务的 Rails 模型（比如在游戏中），我会有名称、描述等属性。但我还需要一些与每个任务相关的代码，以确定玩家是否满足完成任务的要求。

将某些代码与模型中的记录相关联的最佳方法是什么？我应该在模型中创建一个 quest_function 属性并在创建新任务时为 models/quest.rb 文件中的每条记录编写一个函数吗？这看起来很笨拙且容易出错。

这样的事情应该如何在 Rails 中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:13:04.390

好吧，你有几个选择。

第一个，如您所说，是在您的记录中存储一个方法/函数名称，然后在您需要评估该记录的该任务是否已完成时调用该方法。在粗略的代码中：

```
class Quest < ActiveRecord::Base
    attr_accessible :name, :quest_method

    def completed?
      self.send(quest_method)
    end

    def end_quest
       Monster.find_by_name('FINAL BOSS').dead?
    end
end

Quest.create name: 'End Quest', quest_method: 'end_quest' 
```

这并不像你想象的那么糟糕。这本质上是[单表继承](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance)的工作方式，但不是存储方法名，而是将类名存储在`type`列中。

```
class Quest < ActiveRecord::Base

    def finished?
        # default value, or throw an error
        false
    end

end

class EndQuest < Quest

    def finished?
        Monster.find_by_name('END BOSS').dead?
    end
end

EndQuest.create # have to do this for all quests 
```

在任何一种情况下，您都将行为编写为代码，并且只是在记录中存储对所需行为的引用。您*必须*使用正确的类型或方法名称手动创建所有记录，并确保一切保持同步。但至少对于单表继承，ActiveRecord 会处理其中的一些问题。

然而，没有什么能阻止您将代码本身存储到数据库中。

```
class Quest < ActiveRecord::Base

    attr_accessible :name, :completed_expr

    def completed?
        eval(completed_expr)
    end

end

Quest.create name: 'END QUEST', 
  completed_expr: "Monster.find_by_name('BIG BOSS').dead?" 
```

除非您确切知道自己在做什么，否则这当然是潜在的危险和容易出错的——但它确实为您提供了在运行时重写任务完成标准的完全灵活性。

最后，如果您想要最复杂和最复杂的，您可能想要考虑使用规则引擎（或者，使用 DSL 推出您自己的完整规则引擎）来包含您的业务（游戏世界）规则并将其存储。

```
class Quest < ActiveRecord::Base
    attr_accessible :name, :completion_rule

    def completed?
        RulesEngine.evaluate(completion_rule)
    end
end

Quest.create name: 'END QUEST', 
  completion_rule: "Monster(name: 'BIG BOSS', state: 'dead')" 
```

主要优点是通过将特定于任务的行为或规则存储在 DSL（*不是*原始的 Ruby 代码）中，您可以获得一定程度的安全性——您不能只是意外地`eval`恶意或错误的代码导致系统崩溃。

如果您的生产规则以这样一种方式建模，您可以使用类似[Rete 算法](http://en.wikipedia.org/wiki/Rete_algorithm)来评估它们，您也可以获得一些效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:38:01.553

**如果您想在创建任务**时调用一个函数，那么您应该使用 rails 回调，例如**after_create**或**after_update**。

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)

# javascript - 无法使用 JavaScript 从文本框中获取选定的文本？在 Firefox 中工作而不在 IE 中工作？

> ID：14495966
> 
> 赞同：0
> 
> 时间：2013-01-24T07:25:35.613
> 
> 标签：javascript, html, jsp, dom-events

我正在尝试选择在文本框中选择的特定文本。它在 Firefox 中运行良好，但在 IE 中不起作用。

我的代码是，

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<HTML>
<HEAD><TITLE>Selection</TITLE>
<SCRIPT type="text/javascript">
function displayText()
{
  var text = document.getElementById("text");
  var t = text.value.substr(text.selectionStart,text.selectionEnd-text.selectionStart);
  alert(t);
}
</SCRIPT>
</HEAD>
<BODY>
<input type="text" id="text"/>

<INPUT type="button" onclick="displayText()" value="Select text and click here" />
</BODY>
</HTML> 
```

请提出您的建议。我的代码中是否缺少任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:49:51.557

在 ie 中，它是

```
document.selection.createRange().htmlText; 
```

尝试更新的功能：

```
function displayText()
{
  var text = document.getElementById("text");
  var t;
  if (navigator.appName == 'Microsoft Internet Explorer')
  {
    t = document.selection.createRange().htmlText;
  } else {
    t = text.value.substr(text.selectionStart,text.selectionEnd-text.selectionStart)
  }

  alert(t);
} 
```

# sql - 进行透视但不聚合的 T-SQL 查询

> ID：14495969
> 
> 赞同：1
> 
> 时间：2013-01-24T07:26:00.587
> 
> 标签：sql, tsql, pivot

嗨，我有以下数据表

```
Class | Member | Value
----------------------
c1    | m1     | 10
c1    | m2     | 20
c1    | list   | 30
c1    | list   | 40
c1    | list   | 50
c2    | m1     | 60
c2    | m2     | 70
c2    | list   | 80 
```

并希望将数据转换为这种形式

```
Class | Member 1 | Member 2 | List
----------------------------------
c1    | 10       | 20       | 30
c1    | 10       | 20       | 40
c1    | 10       | 20       | 50
c2    | 60       | 70       | 80 
```

使用 max 作为聚合函数的正常枢轴会给我

```
Class | Member 1 | Member 2 | List
----------------------------------
c1    | 10       | 20       | 50
c2    | 60       | 70       | 80 
```

但我希望列出任何类的每个 List 值。

而不是通过编写充满 CASE 的 SQL 查询来寻找替代方案，例如 CASE Member WHEN 'm1' then Value, CASE Member WHEN 'm2' then Value, ... 为了实现我想要的，我想知道是否有机会使用进行一些调整以使其适合我的任务？

数据库是 SQL 2008 R2

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:35:03.727

No.是围绕表达式`PIVOT`进行聚合的有效语法糖。`CASE`如果糖不起作用，你需要回到较长的形式。

子句`PIVOT`中完整描述了for 的语法：[`FROM`](http://msdn.microsoft.com/en-gb/library/ms177634%28v=sql.105%29.aspx)

```
<pivoted_table> ::=
    table_source PIVOT <pivot_clause> [ AS ] table_alias

<pivot_clause> ::=
        ( aggregate_function ( value_column [ [ , ]...n ]) 
        FOR pivot_column 
        IN ( <column_list> ) 
    ) 
```

并注意`aggregate_function`必须提供。SQL Server 中的所有聚合函数都对任意数量的输入值进行操作并生成单个输出值。没有可以产生多个输出值的聚合，正如您在此处所需要的那样。

* * *

这给出了您要求的结果，但确实依赖于每个值，每个`Class`值只有一行`m1`and `m2`：

```
declare @t table (Class char(2) not null,Member varchar(4) not null,Value int not null)
insert into @t(Class,Member,Value) values
('c1','m1',10),
('c1','m2',20),
('c1','list',30),
('c1','list',40),
('c1','list',50),
('c2','m1',60),
('c2','m2',70),
('c2','list',80)

select l.Class,m1.Value as m1,m2.Value as m2,l.Value as list
from
    @t l
        inner join
    @t m1
        on
            l.Class = m1.Class and
            m1.Member = 'm1'
        inner join
    @t m2
        on
            l.Class = m2.Class and
            m2.Member = 'm2'where
l.Member='list' 
```

结果：

```
Class m1          m2          list
----- ----------- ----------- -----------
c1    10          20          30
c1    10          20          40
c1    10          20          50
c2    60          70          80 
```

如果and*有多*行，并且您只想说它们的值，那么您将在我上面的查询子查询中创建and ：`m1``m2``MAX``m1``m2`

```
...
    inner join
(select Class,MAX(Value) from @t where Member='m1' group by Class) m1
    on
        l.Class = m1.Class
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:31:44.663

```
SELECT  a.*, 
        b.Value
FROM    
        (
            SELECT  Class,
                    MAX(CASE WHEN Member = 'm1' THEN Value ELSE NULL END) [Member 1],
                    MAX(CASE WHEN Member = 'm2' THEN Value ELSE NULL END) [Member 2]
            FROM  tableName
            GROUP BY Class
        ) a 
        INNER JOIN
        (
            SELECT  Class, Value
            FROM    tableName 
            WHERE   Member = 'List'
        ) b ON a.Class = b.Class 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/92953/8)

结果

```
╔═══════╦══════════╦══════════╦═══════╗
║ CLASS ║ MEMBER 1 ║ MEMBER 2 ║ VALUE ║
╠═══════╬══════════╬══════════╬═══════╣
║ c1    ║       10 ║       20 ║    30 ║
║ c1    ║       10 ║       20 ║    40 ║
║ c1    ║       10 ║       20 ║    50 ║
║ c2    ║       60 ║       70 ║    80 ║
╚═══════╩══════════╩══════════╩═══════╝ 
```

# javascript - 需要在两个表单的字段上使用java脚本函数

> ID：14495970
> 
> 赞同：0
> 
> 时间：2013-01-24T07:26:02.833
> 
> 标签：javascript, html, forms

嘿，我需要使用 java 脚本函数来验证两种形式的字段。基本上，标准是当用户选择表单名称时，需要的字段必须在下一个表单上可见。我需要询问是否可以对不同页面上的表单使用 java 脚本功能。下面是我的代码

表格rpt的代码

```
<html>
<head>
<script type="text/javascript" src="javascript/formvalidations.js"></script>
</head>
<form name="rpt" method="post" action="">
    <label>Form Name </label>
    <select id="formname" name="formname"> 
    <option value="" selected="selected">--Please Select Form Name--</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select><br />
<input id="ok" type="submit" name="ok" value="OK" onclick="return chkform();" />
</form>
</html> 
```

java脚本函数的代码

```
function chkform(){
    var formname = document.forms.rpt.formname.value;
        if (formname == "1"){
            document.forms.reportform.getElementById("1").style.display="inline";
            document.forms.reportform.getElementById("2").style.display="inline";
            document.forms.reportform.getElementById("3").style.display="inline"
            document.forms.reportform.getElementById("4").style.display="none";
            document.forms.reportform.getElementById("5").style.display="none";

        }
        elseif (formname == "2"){
            document.forms.reportform.getElementById("1").style.display="inline";
            document.forms.reportform.getElementById("2").style.display="none";
            document.forms.reportform.getElementById("3").style.display="inline"
            document.forms.reportform.getElementById("4").style.display="none";
            document.forms.reportform.getElementById("5").style.display="inline";
        }
        else{
            alert("select form name");
            return false;
        }
} 
```

我在表单报告表中有 5 个字段。我需要在报表中显示必填字段。假设用户在 rpt 中选择值 1，则字段 1、2 和 3 必须可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:32:52.337

你在这一行有一个语法错误：

```
elseif (formname == "2"){ 
```

JavaScript 没有`elseif`一个单词，你需要插入一个空格：

```
else if (formname == "2"){ 
```

此外，该[`getElementById()`函数](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)是 的方法`document`，而不是单个 html 元素的方法，因此请使用：

```
document.getElementById("1").style.display="inline";
// and so forth 
```

如果您使用浏览器的 JS 控制台（例如，在 Chrome 中按 F12），它将向您报告这些错误（它不会告诉您如何修复它们，但至少它会为您指明正确的方向）。

# node.js - 为什么建议不要在 Node.js 代码的任何地方关闭 MongoDB 连接？

> ID：14495975
> 
> 赞同：69
> 
> 时间：2013-01-24T07:26:36.070
> 
> 标签：node.js, mongodb

考虑以下是 Node.js 代码：

```
function My_function1(_params) {
    db.once('open', function (err){
     //Do some task 1
});
}

function My_function2(_params) {
    db.once('open', function (err){
     //Do some task 2
});
} 
```

请参阅链接以获取最佳实践，该链接表示不要关闭任何连接

[https://groups.google.com/forum/#!topic/node-mongodb-native/5cPt84TUsVg](https://groups.google.com/forum/#!topic/node-mongodb-native/5cPt84TUsVg)

我看到日志文件包含以下数据：

```
Fri Jan 18 11:00:03 Trying to start Windows service 'MongoDB'
Fri Jan 18 11:00:03 Service running
Fri Jan 18 11:00:03 [initandlisten] MongoDB starting : pid=1592 port=27017 dbpath=\data\db\ 64-bit host=AMOL-KULKARNI
Fri Jan 18 11:00:03 [initandlisten] db version v2.2.1, pdfile version 4.5
Fri Jan 18 11:00:03 [initandlisten] git version: d6...e0685521b8bc7b98fd1fab8cfeb5ae
Fri Jan 18 11:00:03 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_49
Fri Jan 18 11:00:03 [initandlisten] options: { config: "c:\mongodb\mongod.cfg", logpath: "c:\mongodb\log\mongo.log", service: true }
Fri Jan 18 11:00:03 [initandlisten] journal dir=/data/db/journal
Fri Jan 18 11:00:03 [initandlisten] recover begin
Fri Jan 18 11:00:04 [initandlisten] recover lsn: 6624179
Fri Jan 18 11:00:04 [initandlisten] recover /data/db/journal/j._0
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:59343 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:118828 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:238138 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:835658 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:955218 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:3467218 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:3526418 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:3646154 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section seq:3705844 < lsn:6624179
Fri Jan 18 11:00:04 [initandlisten] recover skipping application of section more...
Fri Jan 18 11:00:05 [initandlisten] recover cleaning up
Fri Jan 18 11:00:05 [initandlisten] removeJournalFiles
Fri Jan 18 11:00:05 [initandlisten] recover done
Fri Jan 18 11:00:10 [initandlisten] query MYDB.system.namespaces query: { options.temp: { $in: [ true, 1 ] } } ntoreturn:0 ntoskip:0 nscanned:5 keyUpdates:0  nreturned:0 reslen:20 577ms
Fri Jan 18 11:00:10 [initandlisten] waiting for connections on port 27017
Fri Jan 18 11:00:10 [websvr] admin web console waiting for connections on port 28017
Fri Jan 18 11:01:10 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 32ms
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50076 #1 (1 connection now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50077 #2 (2 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50078 #3 (3 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50079 #4 (4 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50080 #5 (5 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50081 #6 (6 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50082 #7 (7 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50083 #8 (8 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50084 #9 (9 connections now open)
Fri Jan 18 13:36:27 [initandlisten] connection accepted from 192.168.0.1:50085 #10 (10 connections now open)
...........................................
Fri Jan 18 13:36:48 [initandlisten] connection accepted from 192.168.0.1:50092 #97 (97 connections now open) 
```

通过打开多个连接而不是关闭它，这不会在服务器上产生开销吗？它是否在内部处理连接池？

但是在[MongoDB Docs](http://docs.mongodb.org/manual/faq/developers/#why-does-mongodb-log-so-many-connection-accepted-events)中提到“这是不使用请求池的应用程序的正常行为”

有人可以帮助我理解这一点。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-30T15:41:41.633

您使用 MongoClient 打开一次 Db 连接并在您的应用程序中重用它。如果您需要使用多个数据库，您可以使用 Db 对象上的 .db 函数来使用相同的底层连接池处理不同的数据库。保留一个池以确保单个阻塞操作不会冻结您的 node.js 应用程序。如果池中有 5 个连接，则默认大小。

[http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html](http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html)

我也忘了补充。正如另一个答案指出的那样，建立一个新的 TCP 连接在时间和内存方面都是昂贵的，这就是你重用连接的原因。此外，一个新连接也会导致在 MongoDB 上使用 Db 上的内存创建一个新线程。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-01-13T03:23:42.077

MongoDB 将数据库连接池化以提高效率，因此在 mongodb.log 中打开许多连接并不罕见

但是，当您的应用程序完全关闭时关闭所有连接很有用。此代码最适合执行此操作。

```
process.on('SIGINT', function() {
  mongoose.connection.close(function () {
    console.log('Mongoose disconnected on app termination');
    process.exit(0);
  });
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-24T09:09:57.663

我不是 node.js 专家，但我认为大多数语言之间的原因是相对相同的。

建立连接是：

> 司机做的最重量级的事情之一。正确建立连接可能需要数百毫秒，即使在快速网络上也是如此。

（[http://php.net/manual/en/mongo.connecting.pools.php](http://php.net/manual/en/mongo.connecting.pools.php)）

如果那是针对 PHP 的，并且文档有点过时，那部分即使现在仍然适用，并且适用于大多数（如果不是全部）驱动程序。

每个连接也可以使用单独的线程，这会导致明显的开销。

似乎来自：

[http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html#the-url-connection-format](http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html#the-url-connection-format)

该 node.js 仍然使用连接池来尝试停止建立连接的开销。当然，这不再适用于其他驱动程序，例如 PHP 驱动程序。

它打开到您的数据库服务器`x`的连接数量（默认为`5`），并在需要数据时将工作转移到空闲连接，因此重用旧连接可以避免这个可能导致这些日志的讨厌过程：

[https://docs.mongodb.com/manual/faq/diagnostics/#why-does-mongodb-log-so-many-connection-accepted-events](https://docs.mongodb.com/manual/faq/diagnostics/#why-does-mongodb-log-so-many-connection-accepted-events)

# delphi - Delphi Ole Automation - 在 Word 2010 中保存 Word97-2003 文件而不使用“另存为”对话框

> ID：14495977
> 
> 赞同：3
> 
> 时间：2013-01-24T07:26:44.143
> 
> 标签：delphi, ms-word, ole-automation

我正在尝试使用 Delphi 6 和 Word 2010 保存 Word 97-2003 文档 (.doc)。

在 Word 2010 之前一切正常

```
WordDoc.SaveAs(FileName := FileName, FileFormat := wdFormatDocument); 
```

在哪里`FileName := 'c:\doc.doc'`

现在，Word 2010 出现了一个保存对话框，我不知道为什么。我已经尝试过新的 SaveAs2 方法

```
WordDoc.SaveAs2(FileName := FileName, FileFormat := wdFormatDocument, CompatibilityMode:= wdWord2003); 
```

但结果相同。

奇怪，

```
WordDoc.SaveAs2(FileName := FileName, FileFormat := wdFormatDocumentDefault, CompatibilityMode:= wdWord2003); 
```

工作正常，没有“另存为”对话框，但保存的文件具有 Word 2010 格式和 .doc 扩展名，这会混淆旧的 Word 版本。

那么，有什么想法可以在不弹出“另存为”对话框的情况下使用 Word 2010 以旧文档 Word 格式保存文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:47:57.417

@David Heffernan：好吧，编写一个简短的演示程序解决了我的问题。

原始程序打开一个 *.mhtml 文件并尝试将其转换为 doc 格式。我遇到了问题。创建新文档时，您可以将其保存为任何格式而不会出现问题。这使我认为问题可能是我从非本地格式保存到了另一种非本地格式。

因此，我的解决方案是将其保存两次：首先以本机格式保存，然后以旧格式保存：

```
procedure SaveDocFile(WordDoc: Variant; FileName: string);
const wdFormatDocumentDefault=16;
begin
  WordDoc.ActiveWindow.View.Type := wdPrintView;
  if WordDoc.Application.Version='14.0' then
  begin
    WordDoc.SaveAs2(FileName := FileName, FileFormat := wdFormatDocumentDefault);
    WordDoc.SaveAs2(FileName := FileName, FileFormat := wdFormatDocument);
  end
  else
    WordDoc.SaveAs(FileName := FileName, FileFormat := wdFormatDocument);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T12:23:53.227

文件格式的常量列表：

```
wdFormatDocument                    =  0
wdFormatDocument97                  =  0
wdFormatDocumentDefault             = 16
wdFormatDOSText                     =  4
wdFormatDOSTextLineBreaks           =  5
wdFormatEncodedText                 =  7
wdFormatFilteredHTML                = 10
wdFormatFlatXML                     = 19
wdFormatFlatXMLMacroEnabled         = 20
wdFormatFlatXMLTemplate             = 21
wdFormatFlatXMLTemplateMacroEnabled = 22
wdFormatHTML                        =  8
wdFormatPDF                         = 17
wdFormatRTF                         =  6
wdFormatTemplate                    =  1
wdFormatTemplate97                  =  1
wdFormatText                        =  2
wdFormatTextLineBreaks              =  3
wdFormatUnicodeText                 =  7
wdFormatWebArchive                  =  9
wdFormatXML                         = 11
wdFormatXMLDocument                 = 12
wdFormatXMLDocumentMacroEnabled     = 13
wdFormatXMLTemplate                 = 14
wdFormatXMLTemplateMacroEnabled     = 15
wdFormatXPS                         = 18
wdFormatOfficeDocumentTemplate      = 23
wdFormatMediaWiki                   = 24 
```

# html - 从 MS Word 或 Libre Office 到干净的 HTML

> ID：14495979
> 
> 赞同：7
> 
> 时间：2013-01-24T07:26:58.933
> 
> 标签：html, ms-word, web-standards, openoffice-writer

向我的网站发送内容的人使用 Word，因此我得到了很多 Word 文档以转换为 HTML。我只想保留基本格式 - 标题、列表和强调 - 没有图像。

当我用 Libre Office “另存为 HTML” 转换它们时，生成的文件很大，例如，112K 的 doc 文件变成了 450K 的 HTML，其中大部分是无用的 FONT 和 SPAN 标签（出于某种原因，每个标点符号都被括起来在它自己的范围内！）。

我尝试了这个脚本：[http](http://www.techrepublic.com/blog/opensource/how-to-convert-doc-and-odf-files-to-clean-and-lean-html/3708) ://www.techrepublic.com/blog/opensource/how-to-convert-doc-and-odf-files-to-clean-and-lean-html/3708基于 tidy 和 sed，并且它减小了大小到大约 150K，但是仍然有很多无用的 SPAN。

我试图复制并粘贴到 Kompozer——一个 HTML 编辑器，然后另存为 HTML；但它将我所有的非拉丁（希伯来）字母转换为诸如“ְ”之类的实体，从而将大小增加到 750K！

我尝试了docvert：[https](https://github.com/holloway/docvert/issues/6) ://github.com/holloway/docvert/issues/6 ，但发现它需要一个python库，它需要另一个库等，这似乎是一条无穷无尽的依赖之路......

有没有一种简单的方法可以从 Office 文档创建干净的 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-11T21:38:27.733

我意识到这个问题很老，但其他答案从未真正回答过这个问题。如果您不反对编写一些 PHP 代码，CubicleSoft Ultimate Web Scraper Toolkit 有一个名为 TagFilter 的类：

[https://github.com/cubiclesoft/ultimate-web-scraper/blob/master/support/tag_filter.php](https://github.com/cubiclesoft/ultimate-web-scraper/blob/master/support/tag_filter.php)

您传入两件事：一组选项和要解析为 HTML 的数据。

为了清理损坏的 HTML，来自 TagFilter::GetHTMLOptions() 的默认选项将作为一个很好的起点。这些选项构成了有效 HTML 内容的基础，并且不做任何其他事情，将任何输入数据清理为其他工具（如 Simple HTML DOM）可以在 DOM 模型中正确解析的内容。

但是，使用该类的另一种方法是修改默认选项并将“回调”选项添加到选项数组。对于 HTML 中的每个标签，都会调用指定的回调函数。回调预计会返回如何处理每个标签，这就是 TagFilter 真正发挥作用的地方。您可以保留任何给定的标签及其部分或全部属性（或修改它们），去掉标签但保留内部内容，保留标签但去掉内容，修改内容（用于结束标签），或摆脱标签和内部内容。这种方法允许对最复杂的 HTML 进行极其精细的控制，并一次性处理输入。请参阅同一存储库的测试套件以了解 TagFilter 的用法。

唯一的缺点是回调必须跟踪它在每次调用之间的位置，而像 Simple HTML DOM 这样的东西会基于类似 DOM 的模型来选择事物。但这只是一个缺点，如果正在处理的文档有'id's和'class'es之类的东西......大多数Word / Libre HTML内容都没有，这意味着就DOM处理工具而言，它是一个巨大的无法识别/无法解析的HTML去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T07:17:50.697

我一直在使用[http://word2cleanhtml.com/](http://word2cleanhtml.com/)直到我意识到 MS Word 本身提供了将文档另存为 HTML 的选项。

选择此选项后，.docx 文件变为 .html，并且是我见过的最好的 html 版本的 word 文档。它肯定比所有这些在线工具都要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:57:54.000

在您的情况下，您可能需要逐行转换 word 文档的主要部分，然后返回并清理任何其他标签。如果你不介意这种方法，那么考虑这个解决方案......

1.  将您的 word doc 保存为网页后，在 Notepad++ 中打开该网页。
2.  然后对该文档使用替换功能
3.  在查找内容框中，输入 <[^>]+>
4.  在同一窗口的搜索模式中，选择“正则表达式”

现在您所要做的就是单击查找下一个，直到找到要替换的标签，然后为需要替换的每个标签单击替换。确保“替换为：”框为空。

不知道有没有更方便的方式，但是这种方式是100%免费的，简单的通过Notepad++进行HTML标签清理处理。

至于将内联样式转换为外部 CSS（我建议将其作为替换不必要标签后的第二个过程），试试这个应用程序...... [http://inlinecssextractor.com/home.html](http://inlinecssextractor.com/home.html)

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T22:02:23.243

我发现这两种清洁剂非常有效。首先，我通过

[http://textism.com/wordcleaner/](http://textism.com/wordcleaner/)

然后我使用一些正则表达式将一些项目符号段落项转换为列表（li）。然后我运行了结果

[http://infohound.net/tidy/](http://infohound.net/tidy/)

用无序列表 (ul) 标签包装列表项并清除其他错误。我对从 1.5M 到 225k 的结果感到非常满意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T16:15:01.447

这是一组 PowerShell 脚本，它们将清理 Word-Filtered HTML 并在大约 95% 的时间正确标记超级/下标。（不，没有比这更好的了，Word 是为印刷而设计的。）

[https://github.com/suzumakes/replaceit](https://github.com/suzumakes/replaceit)

自述文件中有说明，如果您碰巧遇到任何需要捕获的其他字符或提出任何调整/改进，我很高兴看到您的拉取请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-06T19:46:05.057

[ophir.php](https://github.com/j6s/ophir.php)在从 .odt 文件生成干净的 HTML 方面做得非常好。您需要一个 php 托管环境来运行它。

# ruby-on-rails - 为什么不会出现验证错误？

> ID：14495983
> 
> 赞同：1
> 
> 时间：2013-01-24T07:27:09.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的情况下，即使存在验证错误，它也不会显示验证错误消息。

例如，我将这两列留空，并确保输入了验证码。然后如果我尝试创建新记录。它不会显示验证错误:(它返回表单但没有消息。

我一直在这个项目中使用验证错误消息，我从来没有遇到过这个问题。

任何人都可以在这里找到问题吗？

**主题模型中的验证**

```
validates :title,   
    :presence => {:message => "can't be empty" },    
    :uniqueness => {:message => "choose unique title" },    
    :length => { :maximum => 20, :message => "must be less than 20 characters" }

validates :body,   
    :presence => {:message => "can't be empty" },    
    :length => { :maximum => 500, :message => "must be less than 20 characters" } 
```

**形式**

```
<%= form_for([@community, @topic]) do |f| %>
.....

    <%= button_tag( :class => "btn btn-primary") do %>
    Create
    <% end %>

<% end %> 
```

**主题控制器**

```
before_filter :simple_captcha_check, :only => [:update, :create]

def simple_captcha_check
    if !simple_captcha_valid?
        flash[:error] = 'wrong captcha'
        if request.put?
            @topic.attributes = params[:topic]  
            render :action => :edit
        elsif request.post?     
            @topic = Topic.new params[:topic]
            render :action => :new
        end
    end
end

def create
    @topic = @community.topics.build (params[:topic]) 
    @topic.user_id = current_user.id

    respond_to do |format|
        if @topic.save
            format.html { redirect_to community_topic_path(@community, @topic), notice: 'Created' }
            format.json { render json: [@community, @topic], status: :created, location: @topic }
        else
            format.html { render action: "new" }
            format.json { render json: @topic.errors, status: :unprocessable_entity }
        end
    end
end 
```

**路线.rb**

```
resources :communities do
     resources :topics
end 
```

更新：

**视图/布局/application.html.erb**

```
.....
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
    <a class="close" data-dismiss="alert">&#215;</a>
    <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
  </div>
<% end %>
..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:30:47.410

Flash 直到下一个请求才会出现。因此，如果您正在执行“重定向”，它会出现。

但是，您正在进行渲染而不是重定向。渲染时，您返回视图本身的主体。

但是不用担心，如果你想渲染一个视图（这很好），使用这样的闪光灯 -

```
flash.now[:error] = 'wrong captcha' 
```

.now 确保闪存在同一请求中的渲染视图中被刷新。

编辑：

您的验证不出现的原因（当验证码失败时）是因为您的 before_filter 进行渲染并阻止创建操作甚至被调用。@topic 验证仅在 create 中的 @topic.save 处触发，但由于它永远不会被调用（当验证码失败时），因此不会出现与属性验证相关的任何内容。

其次， flash.now[:error] 将确保 flash 消息不会转移到下一个请求，因为您打算在同一个请求的响应中使用。但是，如果您设置 flash[:error] 并渲染，那么您的 flash 消息将出现在同一个请求的响应和下一个请求中。这应该回答上面@saurabh 的好问题并解开谜团？

最终编辑：@MKK 必须包含一个显示视图中缺少的部分的错误。

# android - 如何在不使用视图翻转器的情况下通过滑动从一个视图切换到两个或多个视图，就像一个一个视图一样？

> ID：14495991
> 
> 赞同：0
> 
> 时间：2013-01-24T07:27:56.887
> 
> 标签：android, android-view, swipe, swipe-gesture

```
 class MyGestureDetector extends SimpleOnGestureListener {

    @Override
    public boolean onFling(MotionEvent event1, MotionEvent event2, float velocityX, float velocityY) 
    {
         dX =event2.getX()-event1.getX();
         dY =event1.getY()-event2.getY();
        if (Math.abs(dY)<SWIPE_MAX_OFF_PATH &&Math.abs(velocityX)>=SWIPE_THRESHOLD_VELOCITY &&Math.abs(dX)>=SWIPE_MIN_DISTANCE ) 
        {
            swipe=new ViewFlipper(MainActivity.this);
            if (dX>0) 
            {
                result=false;
                Toast.makeText(MainActivity.this,"Right swipe",Toast.LENGTH_LONG).show();
            } 
            else 
            {

                result=true;
                Toast.makeText(MainActivity.this,"Left swipe",Toast.LENGTH_LONG).show();
            }
         } 
         else 
            {
        result=false;   
            }
        return result;
         }
    } 
```

这对我来说可以。但是当我从左向右滑动时，它会从第一个视图转到第六个视图（第 1 页到第 6 页）。我怎样才能做到这一点？

如何降低速度？为什么它从第一视图转到第六视图？我的应用程序总共有 10 个视图。我正在使用 Android 2.2 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:41:45.790

您可以将 ViewPager 与 ActionBarSherlock 和 Android 支持库一起用于早期版本.. 祝你好运

[早期 sdk 版本中 ActionBar 的等价物是什么？](https://stackoverflow.com/questions/6031774/what-is-the-equivalent-of-actionbar-in-earlier-sdk-versions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:44:18.623

您可以使用 JakeWharton 的 Sherlock 视图寻呼机指示器。参考这个。

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)将全面支持

版本。希望它可以帮助你。