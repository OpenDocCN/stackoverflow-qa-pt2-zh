# StackOverflow 问答 14703000-14703999

# caching - vim NERDTree 禁用缓存

> ID：14703001
> 
> 赞同：2
> 
> 时间：2013-02-05T08:25:45.340
> 
> 标签：caching, vim, nerdtree

如何禁用目录缓存。我有时需要通过 sshfs 编辑文件，并且在浏览我看到的目录时：

```
NERDTree: Please wait, caching a large dir ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:01:13.030

*在NERD_Tree*的上下文中缓存意味着读取目录内容并将其存储在 Vim 变量中，这样当您稍后再次关闭和打开同一个目录时，它会立即发生，而不是花费大量时间。

恐怕你唯一的选择是

1.  不要打开有很多文件或文件系统速度较慢的目录
2.  启动 Vim 时递归打开 NERD_Tree 中的所有目录；这将花费很长时间，但之后的任何导航都会很快（直到您重新启动 Vim）。

# javascript - Javascript“返回”链接，如果有的话，它会显示 url

> ID：14703002
> 
> 赞同：1
> 
> 时间：2013-02-05T08:25:51.937
> 
> 标签：javascript, url, history

我想在我的网站内页中放置一个“返回”链接。我可以简单地使用的代码是：

```
<script>document.write('<a href="#" onClick="history.go(-1); return:false;"></a>')</script> 
```

但是当有人将鼠标悬停在上一页上时，它不会显示上一页的网址，如果没有上一页（例如在新标签中打开链接时），它也将不起作用。所以我需要一个代码，它只在有上一页时出现并且还显示 url。如果有人知道一个好方法，我很感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:40:09.100

`document.referrer`是我的建议。

制作一个隐藏的 div 并将链接放置在该 div 中。

```
<div id="NavBack">//hide it
    <a>link here</a>
</div> 
```

在文档加载时，检查是否存在“上一个 URL”之类的内容。如果确实如此，则显示#NavBack，它具有可以向后导航或隐藏的链接。参考[这个](https://stackoverflow.com/questions/3528324/how-do-you-get-the-previous-url-in-javascript)

我已经用代码补丁更新了答案，给你提示。

```
<div id="NavBack" style="display:none;">
    <a id='test'>link here</a>
</div>
<script type="text/javascript">
if(document.referrer!=''){
    var a = document.getElementById("test");
    a.href=document.referrer;
    document.getElementById("NavBack").style.display='block';
}
</script> 
```

我已经使用了上面的代码，并且效果很好。不过，让我明确一点，这不是标准方式，这只是为了给你我想告诉你的想法。请使用 jquery 而不是 javascript，并且不要在您的项目中提供内联 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:33:40.473

您必须使用 . 检查是否有历史记录条目`window.history.length`。如果它大于零，则插入链接。

也可以看看：

[https://developer.mozilla.org/en-US/docs/DOM/window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history)

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:32:54.743

您可以使用[`history`MDN 中描述的对象](https://developer.mozilla.org/en-US/docs/DOM/window.history)

```
var h = window.history;
hSize = h.length; // is there any history
h.back(); 
```

还要检查[浏览器对这些方法的支持](http://caniuse.com/#search=history)。

# spring-batch - Spring Batch：如何在步骤完成之前将更改提交到 db？

> ID：14703003
> 
> 赞同：2
> 
> 时间：2013-02-05T08:25:59.980
> 
> 标签：spring-batch

我有一个步骤如下，它保留了**Table1**中的一些记录：

```
 <step id="myStep" parent="abstractStep"
          next="anotherStep">
        <tasklet>
            <chunk reader="myReader" writer="myWriter" commit-interval="1"/>
        </tasklet>
    </step> 
```

在这一步的 writer 中，我在**Table2中写入了一条记录，并在****Table3**中更新了另一条记录。但问题是，Table2 的新记录和 Table3 的更新记录在该步骤完成之前不会被提交。

在步骤完成之前，如何将这些更改提交给 Table2 和 Table3？

# c++ - 我需要使用什么 Qt 类型将 lambda 作为函数参数传递？

> ID：14703006
> 
> 赞同：5
> 
> 时间：2013-02-05T08:26:03.327
> 
> 标签：c++, c++11, lambda, qt5

现在 Qt5 支持将信号连接到 lambda 函数，我希望能够将 lambda 作为参数传递给另一个函数。我有一个看起来像这样的函数：

```
void SomeFunc(Functor f)
{
    connect(obj, &MyObject::someSignal, f);
} 
```

但是，当我这样做时，编译器会抱怨：

```
"Functor" has not been declared 
```

更改`Functor`为`QtPrivate::Functor`收益率：

```
QtPrivate::Functor is not a type 
```

基本上，我要做的就是将要传递`QObject::connect`给我的函数的参数传递给我。我需要使用什么类型？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T08:37:46.643

有两种选择：

```
template<typename Functor>
void SomeFunc(Functor f)
{
    connect(obj, &MyObject::someSignal, f);
} 
```

或者

```
void SomeFunc(std::function<void(/*ArgumentTypes...*/)> f)
{
    connect(obj, &MyObject::someSignal, f);
} 
```

第一个选项只是将任何参数转发给`connect`，第二个选项使用来自 C++11 标准库的多态函数指针。它的模板参数必须对应于信号的签名。Qt 信号是无效的，/ *ArgumentTypes...* / 需要替换为函数的参数列表。所以如果信号被声明为

```
void someSignal(int, QString); 
```

该功能将是

```
std::function<void(int, QString)> 
```

# sql - 选择具有最新日期时间值的记录

> ID：14703007
> 
> 赞同：1
> 
> 时间：2013-02-05T08:26:04.950
> 
> 标签：sql, datetime, select, sql-server-2008-r2

我有三张桌子

建筑物

```
BuildingKey(int) | BuildingID(varchar) | ... 
```

领域

```
areaKey(int) | areaID(varchar) | buildingKey(int-FK[Buildings]) | ... 
```

交易

```
transactionKey(int) | areaKey(int-FK[Areas]) | value(float) | trnDateTime(DateTime) 
```

`Areas`一个中 可能有几个`Building`。

各个领域都有很多`Transactions`，`value`各有千秋`trnDateTime`。

我想要做的是获取**每个**a的最新`value`（事务）（当给出时）。 **`Area``Building``buildingKey`** 

 **我提到了一些以前的问题，比如[这个](https://stackoverflow.com/questions/5209391/select-most-recent-record-in-sub-child)，并尝试了以下问题。

(1)

```
DECLARE @buildingKey INT
SET @buildingKey = 3

;WITH Vals AS (
    SELECT  T.areaKey AS AreaKey,
            T.value AS CurrentValue, 
            T.trnDateTime AS RecordedDateTime,                
            ROW_NUMBER() OVER (PARTITION BY B.buildingKey ORDER BY T.trnDateTime DESC) RowID

    FROM    Buildings B INNER JOIN
            Areas A ON  B.buildingKey = A.buildingKey INNER JOIN 
            Transactions T  ON A.areaKey = T.areaKey

    WHERE B.buildingKey = @buildingKey
)
SELECT  AreaKey,
        CurrentValue,
        MAX(RecordedDateTime) AS RecentReading,
        RowID
FROM    Vals
WHERE   RowID = 1
GROUP BY AreaKey, CurrentValue, RowID 
```

!) 返回最新值（在所有区域中）；**不是****每个**区域的最新值！

(2)

```
DECLARE @buildingKey INT
SET @buildingKey = 3

SELECT  A.areaKey AS AreaKey, 
        A.areaID AS AreaID,
        T.value AS CurrentValue,
        T.trnDateTime AS RecordedDateTime                   

FROM Areas A, Buildings B, Transactions T

WHERE   @buildingKey = B.buildingKey AND 
        B.buildingKey = A.buildingKey AND
        T.areaKey = A.areaKey AND
        T.trnDateTime IN (SELECT MAX(T.trnDateTime), T.areaKey
                                  FROM Transactions T
                                  GROUP BY T.areaKey) 
```

!) 给出一个错误 -->

```
Msg 116, Level 16, State 1, Line 16
Only one expression can be specified in the select list when the subquery is not introduced with EXISTS. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:28:36.383

这将为您提供每栋建筑的最新区域。

```
(PARTITION BY B.BuildingKey, a.areaKey ORDER BY T.TransactionDateTime DESC) RowID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:20:26.057

```
SELECT  A.areaKey AS AreaKey, 
        A.areaID AS AreaID,
        T.value AS CurrentValue,
        T.trnDateTime AS RecordedDateTime                   
FROM Areas A JOIN Buildings B ON B.buildingKey = A.buildingKey 
             JOIN Transactions T ON T.areaKey = A.areaKey 
WHERE @buildingKey = B.buildingKey AND EXISTS (
                                       SELECT 1
                                       FROM Transactions T2
                                       WHERE T.areaKey = T2.areaKey
                                       GROUP BY T2.areaKey
                                       HAVING MAX(T2.trnDateTime) = T.trnDateTime
                                               ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:30:00.363

尝试

```
DECLARE @buildingKey INT
SET @buildingKey = 3

SELECT  A.areaKey AS AreaKey, 
        A.areaID AS AreaID,
        T.value AS CurrentValue,
        T.trnDateTime AS RecordedDateTime

FROM Areas A, Buildings B, Transactions T

WHERE   @buildingKey = B.buildingKey AND 
        B.buildingKey = A.buildingKey AND
        T.areaKey = A.areaKey AND
        T.trnDateTime IN (SELECT MAX(T.trnDateTime)
                                  FROM Transactions T
                                  GROUP BY T.areaKey) 
```**

# delphi - 为管理员权限请求添加清单

> ID：14703013
> 
> 赞同：10
> 
> 时间：2013-02-05T08:26:22.120
> 
> 标签：delphi, delphi-7, manifest, administrator

我有一个将程序设置写入 Windows 注册表的应用程序，这是绝对必要的，因此不能选择存储到文件中。

为了简化这一点，我想给出一个“管理员权限”的唠叨屏幕，而不是试图解释如何右键单击程序文件/快捷方式。

我找到了一篇相当不错的文章，但是在为清单添加我自己的资源文件后，我收到了重复的资源错误。

这可能是由于与内部清单冲突，为了解决这个问题，我看到很多评论建议在项目选项中禁用“启用运行时主题”。我浏览了每个菜单但找不到它，现在我被告知它可能在 Delphi 7 中不可用，并在以后的版本中引入。

如何添加自己的清单？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-05T15:18:09.700

我已经评论说“将程序设置写入注册表不是授予您的应用程序管理员权限的适当原因”。然而，在任何情况下都包含一个 UAC 清单是一个好主意。常见的`requestedExecutionLevel`应该是`level="asInvoker"`。[查看文档](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

```
"Q: Adding manifest for admin rights request for delphi 7" 
```

创建以下 4 个文件（2 套）：

* * *

（仅限 UAC）

***uac.manifest***

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="MyApp" type="win32"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/>
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

***uac.rc***

```
1 24 "uac.manifest" 
```

* * *

（UAC + XP 主题）

***uac_xp.manifest***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity type="win32" name="MyApp" version="1.0.0.0" processorArchitecture="x86"/>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity
        type="win32"
        name="Microsoft.Windows.Common-Controls"
        version="6.0.0.0"
        publicKeyToken="6595b64144ccf1df"
        language="*"
        processorArchitecture="*"/>
    </dependentAssembly>
  </dependency>
  <!-- Windows Vista application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!--Windows 7-->
      <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
      <!--Windows Vista-->
      <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/>
    </application>
  </compatibility>   
</assembly> 
```

***uac_xp.rc***

```
1 24 "uac_xp.manifest" 
```

* * *

通过“Project > Add to project”菜单项将所需的`rc`文件（`uac.rc` **或）添加到您的项目中。** `uac_xp.rc`这将`{$R}`在您的项目文件中创建指令：

```
program Project1;

{.$R 'uac.res' 'uac.rc'} // UAC only
// OR
{$R 'uac_xp.res' 'uac_xp.rc'} // UAC + XP Themes

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.RES}

begin
  Application.Initialize;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

注意`{$R 'uac_xp.res' 'uac_xp.rc'}`. Delphi 将自动编译`rc`to`res`文件。

或者，您可以通过外部 Delphi IDE编译`rc`文件。`brcc32 uac.rc`然后`{$R 'uac_xp.res'}`手动添加到您的项目中。

* * *

**确保您没有使用任何其他 XP 清单。**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-05T08:33:34.470

***如何从 Delphi 7 项目中删除“内部”清单？***

该*内部清单*在 Delphi 中由`TXPManifest`组件表示 7 次，其唯一目的是将单元添加`XPMan.pas`到删除它的表单单元的 uses 子句中。然后，该`XPMan.pas`单元将资源文件与清单本身一起包含到项目输出中。

因此，要删除此*内部清单*，您需要`TXPManifest`从项目的所有表单中删除所有组件（如果您使用了它们），以及`XPMan`从项目的所有单元中删除所有使用子句引用。

简而言之，对项目的所有单元执行以下两个步骤（如果您没有使用组件，则第一步是可选的`TXPManifest`，但第二步）：

![在此处输入图像描述](../Images/bd0812cb8c27573941e47a9044a07112.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-10T14:37:42.577

在较新版本的 Delphi 中，这不再是必需的。
在*Project Options*下，然后是*Application*，清单中有一个部分：

[![清单选项](../Images/b9f59b070063e9441aa7bbf4b15b1b3d.png)](https://i.stack.imgur.com/QmkXb.png)
^(东京版本 10.2.1 的屏幕截图)

[这会自动处理在Kobik 的答案底部](https://stackoverflow.com/a/14710803/512728)作为警告提到的 XP 清单。

我不知道这是从哪个 Delphi 版本中获得的。
（如果您知道，可以免费免费编辑此答案）。（编辑 Ian Murphy 2019 年 2 月：它在 XE2 中不可用）

# c# - 将数字解析为日期问题

> ID：14703015
> 
> 赞同：0
> 
> 时间：2013-02-05T08:26:29.847
> 
> 标签：c#, datetime, datetime-format

我从数据库中得到一些结果，我正在循环它。我使用方法检查每个值是否是日期`DateTime.Parse`。

```
static void Main(string[] args)
{
    DateTime dateValue;
    string s = "107.5"; //5/1/0107
    var canConvert = DateTime.TryParse(s, out dateValue);
    var val = canConvert ? dateValue.ToString("d") : s;
    if (canConvert)
    {
        Console.WriteLine(val);
    }
    Console.ReadKey();
} 
```

问题是如果我传递一个值“107.5”，系统会将其视为有效日期并返回 5/1/0107。我相信它背后一定有一些有效的逻辑。那是什么逻辑？另外，我如何告诉编译器忽略将任何包含`.`. 显然，我可以检查该值是否包含 a `.`，如果包含，我可以忽略转换。但我不想走那条路。我不确定日期将以什么格式返回，但它不会包含`.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:38:42.760

关于您唯一的选择是确定哪些格式是有效的，并依次尝试每种格式，直到有一个有效的解析，或者您用完了有效的格式。

```
var validFormats = new[]{"dd/MM/yyyy","yyyy-MM-dd"};
var dateStrings = new[]{ "13/10/2012","2000-01-01","107.2"};

DateTime dt = DateTime.MinValue;
foreach(var d in dateStrings)
{
     if(DateTime.TryParseExact(d, validFormats, 
               CultureInfo.CurrentCulture, DateTimeStyles.None, out dt))
    {
        Console.WriteLine(dt);
    }
    else
    {
        Console.WriteLine("{0} is not valid",d);
    }
} 
```

现场示例：[http ://rextester.com/IXZIG43823](http://rextester.com/IXZIG43823)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:41:05.040

如果您知道格式或可能的格式，则可以使用[DateTime.TryParseExact](http://msdn.microsoft.com/en-GB/library/ms131044.aspx)方法。

但是，如果您不知道可能的格式，解决此问题的另一种方法是对日期进行“健全性检查”：

```
var canConvert = DateTime.TryParse(s, out dateValue);
if (canConvert && (dateValue.Year < 1900 || dateValue.Year > 2100))
    canConvert = false; 
```

这将手动“标记”无效日期，您当然可以更改年份范围。

# android - 我的 android sdk 管理器只显示 api 17

> ID：14703016
> 
> 赞同：0
> 
> 时间：2013-02-05T08:26:33.307
> 
> 标签：android

我想下载其他 android API 和示例，但我的 android SDK 管理器没有向我显示除 android sdk 4.2 API 17 之外的任何其他选项。任何人都可以帮我解决这个问题。我错过了什么吗？感谢您的帮助

我尝试了以下链接， [http://developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T04:58:34.773

我遇到过同样的问题。但通过检查代理设置解决了它。工具 -> 选项 -> 设置 HTTP 代理服务器和 HTTP 代理端口。它应该与您的 IE Internet 连接设置相同。

代理设置完成后，转到包 -> 重新加载 -> 所有以前版本的 API 开始显示在 Android SDK 管理器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:27:56.640

您应该首先通过在当前管理器中下载 SDK 工具来更新管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-18T21:33:23.350

对我来说，这与选择的答案有点不同。

在 Android SDK Manager -> Appearance & Behavior -> System Settings -> HTTP Proxy 中选择“自动检测代理设置”

# javascript - 阻止 iPad Safari 上的所有默认手势

> ID：14703022
> 
> 赞同：0
> 
> 时间：2013-02-05T08:26:58.723
> 
> 标签：javascript, ios, safari, gestures

如何使用纯 JavaScript 在 iPad 上的 Safari 上禁用所有默认手势。我已经尝试使用`event.preventDefault();`每个事件，但它不起作用。我在 Safari 中运行应用程序，我想禁用所有默认触摸事件（手势）并用我自己的覆盖。我也尝试过使用一个流行的库hammer.js，它有一个选项 prevent_default 但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:54:24.290

防止滚动：

```
document.ontouchmove = function(event){
event.preventDefault();} 
```

防止敲击：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:09:42.750

我认为您的问题不够清楚（请更改它）。你的意思是你有一个带有 UIWebView 的 iOS 应用程序，并且你想禁用该 UIWebView 上的所有鼠标交互吗？如果是这样，那么您确实必须使用以下内容禁用滚动：

```
<script type="text/javascript">
touchMove = function(event) {
    event.preventDefault();
}
</script> 
```

UIWebViews 不会将触摸和手势传递给下面的视图。如果您想在本机代码中处理触摸，只需将通配符 GestureRecognizer 添加到 UIWebView。您可以在下面看到一个可以使用的辅助类。您可以通过调用在 UIWebView 上使用它：

```
[[WildcardGestureRecognizerForwarder alloc] initWithController:self andView:self.webview]; 
```

在您的项目中，使用以下代码添加 WildcardGestureRecognizerForwarder.h：

```
 #import <Foundation/Foundation.h>

typedef void (^TouchesEventBlock)(NSSet * touches, UIEvent * event);

@interface WildcardGestureRecognizerForwarder : UIGestureRecognizer

@property(nonatomic,assign) UIView *forwardFrom;
@property(nonatomic,assign) UIViewController *forwardTo;

-(void) initWithController:(UIViewController*)theViewController andView:(UIView*)theView;
@end 
```

还使用以下代码添加文件 WildcardGestureRecognizerForwarder.m：

```
#import "WildcardGestureRecognizerForwarder.h"

@implementation WildcardGestureRecognizerForwarder

-(id) init {
    if (self = [super init])
    {
        self.cancelsTouchesInView = NO;
    }
    return self;
}

-(void) initWithController:(id)theViewController andView:(UIView*)theView {
    if ([self init]) {
        self.forwardFrom = theView;
        self.forwardTo = theViewController;
        [theView addGestureRecognizer:self];
        self.delegate = theViewController;
    }
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    if(self.forwardTo)
        [self.forwardTo touchesBegan:touches withEvent:event];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    if(self.forwardTo)
        [self.forwardTo touchesCancelled:touches withEvent:event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if(self.forwardTo)
        [self.forwardTo touchesEnded:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if(self.forwardTo)
        [self.forwardTo touchesMoved:touches withEvent:event];
}

- (void)reset
{
}

- (void)ignoreTouch:(UITouch *)touch forEvent:(UIEvent *)event
{
}

- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer *)preventingGestureRecognizer
{
    return NO;
}

- (BOOL)canPreventGestureRecognizer:(UIGestureRecognizer *)preventedGestureRecognizer
{
    return NO;
}

@end 
```

# ruby - 方法定义中参数周围的 Ruby 括号

> ID：14703024
> 
> 赞同：7
> 
> 时间：2013-02-05T08:27:09.347
> 
> 标签：ruby

我知道许多 ruby​​ 风格指南坚持在*方法定义*的方法参数周围加上括号。而且我了解*方法调用*有时在语法上需要括号。

但是任何人都可以提供为什么 Ruby*需要在**方法定义*的参数周围加上括号的例子吗？基本上，我正在寻找“它看起来更好”之外的原因。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T08:53:12.090

如果[此评论中指出](https://stackoverflow.com/questions/14703024/ruby-parentheses-around-arguments-in-a-method-definition/14703424#comment20562706_14703024)的既没有括号也没有分号，那将是模棱两可的。

```
def foo a end # => Error because it is amgiguous.
# Is this a method `foo` that takes no argument with the body `a`, or
# Is this a method `foo` that takes an argument `a`? 
```

此外，当您想使用复合参数时，不能省略括号：

```
def foo(a, b), c
  p [a, b, c]
end
# => Error

def foo((a, b), c)
  p [a, b, c]
end
foo([1, 2], 3) # => [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-23T06:50:11.407

另一个例子是当你想传递一个哈希作为参数时，例如

这不起作用：

```
MyTable.update_all { col_a: 1, col_b: 2 } 
```

因为 { } 用于块而不是哈希

添加括号确实有效。

```
MyTable.update_all({ col_a: 1, col_b: 2 }) 
```

在 update_all 的情况下，它最多需要 3 个散列作为参数，因此指示哪些值进入哪个散列很重要。

# c - scilab 调用 C 函数

> ID：14703036
> 
> 赞同：0
> 
> 时间：2013-02-05T08:27:53.443
> 
> 标签：c, call, scilab

我想在 scilab 中调用 C 函数。我正在尝试遵循“呼叫”约定，但它对我不起作用，因此我正在寻求帮助。

C函数：

```
f1=['void add1(double a,double b,double *c)
     { *c=a+b; }'];

mputl(f1,'fun1.c')

ilib_for_link('add1','fun1.c',[],"c")
a=1.1;b=2.2;
c=call('add1',a,1,'d',b,2,'d','out',[1,1],3,'d');

disp(c) 
```

f1 函数应该只添加两个实数并通过引用传递它。结果总是超出范围。你能帮我指出我做错了什么以及如何在 scilab 中正确调用 C 函数吗？

谢谢你。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:46:31.073

如果您将所有参数都设为指针，则它可以正常工作。也不要忘记通过执行 loader.sce 来加载函数

工作示例：

```
f1=['void add1(double* a,double* b,double *c){ *c=*a+*b; }'];

mputl(f1,'fun1.c')

ilib_for_link('add1','fun1.c',[],"c")

a=1.1;
b=2.2;

exec loader.sce

[c] = call('add1', a, 1,'d', b,2,'d', 'out',[1,1],3,'d');

disp(c) 
```

# c# - 使用多少位数来得出 Math.Round 的答案？

> ID：14703041
> 
> 赞同：2
> 
> 时间：2013-02-05T08:28:03.253
> 
> 标签：c#, .net

使用 Math.Round 时，在进行“四舍五入”时是否考虑所有小数位，还是仅考虑我们四舍五入到的小数位右侧的数字？

例子;

```
decimal myNumber1 = 0.2651m;
decimal myNumber2 = 0.2650m;

Math.Round(myNumber1, 2) gives 0.27
Math.Round(myNumber2, 2) gives 0.26 
```

我希望两者都是 0.26，因为四舍五入不考虑小数点后 4 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:37:12.440

> 四舍五入不考虑小数点后第四位

这不是真的。

根据 MSDN，[`Math.Round(decimal)`](http://msdn.microsoft.com/en-us/library/3s2d3xkk.aspx)使用舍入类型[`MidpointRounding.ToEven`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx).

中点舍入指定当要舍入的值正好在两个可能的舍入值之间时的舍入行为。

例如，

*   `0.2649`将永远四舍五入`0.26`
*   `0.2651`将永远四舍五入`0.27`

四舍五入到小数点后两位。

有趣的是在`0.2650`: 默认情况下会发生什么，使用`MidpointRounding.ToEven`你得到：

*   **`0.26`**为了`Math.Round(0.2650, 2)`
*   `0.28`为了`Math.Round(0.2750, 2)`

这是因为舍入是在舍入后向偶数最高位进行的（`6`在第一种情况下，`8`在第二种情况下）。

但是，如果您要使用`MidpointRounding.AwayFromZero`，您会得到：

*   `0.27`为了`Math.Round(0.2650, 2, MidpointRounding.AwayFromZero)`
*   `0.28`为了`Math.Round(0.2750, 2, MidpointRounding.AwayFromZero)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:43:53.053

考虑所有小数位。四舍五入 0.2650000001m 也将导致 0.27

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:39:43.703

如果您不想要第 4 位小数，则只需`Math.Truncate`在舍入前使用：

```
Math.Truncate(0.2651m * 1000) / 1000; //0.265
Math.Truncate(0.2650m * 1000) / 1000; //0.265 
```

# c# - 如何将每个功能或方法分配给按钮？

> ID：14703042
> 
> 赞同：1
> 
> 时间：2013-02-05T08:28:10.337
> 
> 标签：c#, javascript, jquery, asp.net

注意：我还是编程新手。

我有一个 JavaScript 页面，它在页面加载时创建切换按钮，但我现在不能独立使用这些按钮，因为按钮的 id 是我的数据库表上的列名。所以我不能事先知道，这就是为什么我不能在每个按钮上分配一个方法或功能。

这是创建切换按钮的方式：

```
function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
  return '\n<input' + (tbID ? ' id=\'' + tbID + '\'' : '') + 
    (tbClass ? ' class=\'' + tbClass + '\'' : '') + 
    (tbType ? ' type=\'' + tbType + '\'' : '') + 
    (tbValue ? ' value=\'' + tbValue + '\'' : '') + 
    (onClick ? ' onclick=\'' + onClick + '\'' : '') + '>';

}

function DisplayButtons(cableData) {
  var newContent = '';
  $.each(cableData, function (i, item) {
    function toggle() {
      $("#tb" + item.CommonCable)
        .clicked ? $('#MyElement')
        .addClass('clickedButton');
      $("#tb" + item.CommonCable)
        .removeClass("clickedButton");
      $('#MyElement')
        .toggleClass('MyClass');
    }
    newContent += createButtons("tb" + item.CommonCable, 
          null, "submit", item.CommonCable, toggle());
  });
  $("#Categories")
    .html(newContent);
} 
```

注意：任何可以尽快提供帮助的人，我如何将每个功能或方法分配给每个按钮？：或者我可以使用其他任何方式来创建我的切换按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:42:03.833

你需要这样的东西：

```
function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
    var btn = $('<input>', {id:(tbID ? tbID : ''),
                         "class":(tbClass ? tbClass : ''),
                         "type":(tbType ? tbType : ''),
                          value:(tbValue ?  tbValue : ''),                        
                         });
     if(onClick)
         btn.click(onClick);
     return btn;
} 
function toggle() {
      $(this)
        .clicked ? $('#MyElement')
        .addClass('clickedButton');
      $(this)
        .removeClass("clickedButton");
      $('#MyElement')
        .toggleClass('MyClass');
    }
function DisplayButtons(cableData) {
  var newContent = [];
  $.each(cableData, function (i, item) {        
    newContent.push(createButtons("tb" + item.CommonCable, 
          null, "submit", item.CommonCable, toggle));
  });
  $("#Categories").empty()
    .append(newContent);
} 
```

查看如何以 jquery 样式创建按钮。此外，当您添加 onclick 时，您应该将指针传递给您想要在点击时调用的函数，如下所示`createButtons("tb" + item.CommonCable, null, "submit", item.CommonCable, toggle)`：当您这样做时`toogle()`，就像在您的代码中一样，您会立即执行您的函数，并且该函数返回的值用作 onclick 值。另外，看看新创建的按钮是如何添加到数组中的，而不是使用[.append](http://api.jquery.com/append/)方法添加到`#categories`元素中的。不确定您是否需要[.empty](http://api.jquery.com/empty/)，但这将完全像您的 .html(newContent) 一样工作。如果您在类别中有一些内容应该保留在那里，只需删除`empty`

**UPD** 另外，请注意您不需要为每个新按钮创建新的切换功能。如果您像 .click(toogle) 一样应用它，切换函数中的 this 将始终指向单击的按钮，您不需要使用 id 找到它。不确定您的代码中的 .clicked 是什么。据我所知，jQuery 对象没有这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:43:51.917

为什么不`id`为创建的每个按钮生成一个唯一的？

就像是：

```
 $.each(cableData, function (i, item) {
    function toggle() {
      $("#tb" + i + item.CommonCable)
        .clicked ? $('#MyElement')
        .addClass('clickedButton');
      $("#tb" + i + item.CommonCable)
        .removeClass("clickedButton");
      $('#MyElement')
        .toggleClass('MyClass');
    }
    newContent += createButtons("tb" + i + item.CommonCable, 
          null, "submit", item.CommonCable, toggle());
  }); 
```

但我认为你的方向是错误的。

您可以在每个按钮上添加相同的类名，例如：`tableButton`，然后为具有该类名的所有元素分配一个事件：

```
 $(".tableButton").on("click", function (event) {
    $('#MyElement').addClass('clickedButton').toggleClass('MyClass');
    $(this).removeClass("clickedButton");
  }); 
```

然后，当 jQuery 准备就绪时，您可以在不执行任何`onclick`操作（已被前一个函数绑定）的情况下生成您的按钮，并使用类名：

```
 $.each(cableData, function (i, item) {
    newContent += createButtons(".tableButton", 
          null, "submit", item.CommonCable);
  }); 
```

最终代码将如下所示：

```
$(function () {
  $(".tableButton").on("click", function (event) {
    $('#MyElement').addClass('clickedButton').toggleClass('MyClass');
    $(this).removeClass("clickedButton");
  });

  var newContent = "";
  $.each(cableData, function (i, item) {
    newContent += createButtons(".tableButton", 
          null, "submit", item.CommonCable);
  });

  $("#Categories").html(newContent);
}); 
```

# c# - 使用 case 语句对项目进行分组

> ID：14703043
> 
> 赞同：0
> 
> 时间：2013-02-05T08:28:15.847
> 
> 标签：c#, asp.net, sql

**问题：如何使用 case 语句对表进行分组。**

例如我有两张桌子。

第一张桌子

ID 名称
1 a
2 b
3 c

第二张桌子是

id 状态
1 红色
1 红色
1 蓝色
1 红色

**这是场景：**

*   我在表 1 和表 2 上留下了连接 ID。

*   如果它具有相同的 id，那么它将创建一个 case 语句。

    1.  如果表 2 中的所有状态都包含红色，则 [条件]
    2.  如果状态包含红色和蓝色 [条件]
    3.  如果不在案子上，那么[条件]

我将如何创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:41:00.457

对于大多数/所有 DBMS 的一般方法，您可以使用以下方法：

```
SELECT  t.ID,
        t.Name,
        CASE WHEN t.Red = t.Total THEN 'Only Red condition'
            WHEN t.Red > 0 AND t.Blue > 0 THEN 'Red and blue condition'
            ELSE 'Other condition'
        END AS CaseCondition
FROM    (   SELECT  Table1.ID,
                    Table1.Name,
                    COUNT(CASE WHEN Table2.Status = 'Red' THEN 1 END) AS Red,
                    COUNT(CASE WHEN Table2.Status = 'Blue' THEN 1 END) AS Blue,
                    COUNT(Table2.Status) AS Total
            FROM    Table1
                    LEFT JOIN Table2
                        ON Table1.ID = Table2.ID
            GROUP BY Table1.ID, Table1.Name
        ) t 
```

如果您的 DBMS 支持 PIVOT（并且唯一可能的值是红色和蓝色），那么您可以使用以下内容：

```
SELECT  ID,
        Name
        CASE WHEN pvt.Red > 0 AND pvt.Blue = 0  THEN 'Only Red condition'
            WHEN t.Red > 0 AND t.Blue > 0 THEN 'Red and blue condition'
            ELSE 'Other condition'
        END AS CaseCondition
FROM    Table1
        LEFT JOIN Table2
            ON Table1.ID = Table2.ID
        PIVOT
        (   COUNT(Table2.ID)
            FOR Table2.Status IN ([Red], [Blue])
        ) pvt 
```

# java - Java static final String 有意外的内容

> ID：14703055
> 
> 赞同：1
> 
> 时间：2013-02-05T08:29:07.193
> 
> 标签：java, static, final

我在 java 程序中看到一些非常奇怪的行为。失败是不可重现的，所以我所要做的就是原始日志。

该类看起来像这样：

```
public class MyClass {
    public static final String MY_CONSTANT_STRING = "This should never change";

    public boolean checkEndsWithCS(String inString) {
        return inString.endsWith(MY_CONSTANT_STRING);
    }

    public String getString() {
        return "Some text '" + MY_CONSTANT_STRING + "' some more text";
    }
} 
```

在日志中，我看到 getString 返回“Some text '' some more text”和 checkEndsWithCS("这些不是您要查找的字符。") 返回 true 的情况。

在这种情况下，我只能得出结论 MY_CONSTANT_STRING 是 "" 。

没有其他类扩展 MyClass，因此它不会在更高级别的类中被覆盖。

我在日志中没有看到任何内存不足的迹象，这似乎是最可能的原因。

它是静态最终的，所以引用不应该改变。字符串是不可变的，所以字符串不应该改变。

问题：

1.  这些什么时候执行？我在eclipse中设置了一个断点，它永远不会被击中。
2.  静态最终引用中的不可变字符串是否有任何可能的方法来更改？
3.  有没有什么可能的方法让字符串不被首先分配？
4.  是否有任何方式包含字符串或引用的内存可能会被其他对象或进程“破坏”？
5.  任何其他微妙的陷阱，我只是没有以正确的方式思考这个问题？

如果这里的集体经验不能打破这个松散，那么我只会把它当作我的数据有问题的迹象，并从那个角度检查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:11:35.327

可以使用 Java 反射来更改`final`字段的值，或者弄乱对象的私有字段`String`。

本机代码（例如`native`方法）也有可能覆盖内存，这可能会导致某些 String 对象的长度*变为*零。

如果您的代码库中的某些东西正在做这种事情，那么很难确定罪魁祸首。而且您不应该完全忽略以下可能性：

*   一些第三方图书馆这样做，
*   一些不受信任的代码（如果您在没有沙箱的情况下运行不受信任的代码），
*   利用已知安全漏洞的东西......'因为你没有跟上你的补丁，
*   某物（或某人）干扰了日志文件。

或者您可能没有运行与您正在查看的源代码匹配的代码。

* * *

> 1）这些何时执行？我在eclipse中设置了一个断点，它永远不会被击中。我在 MY_CONSTANT_STRING ...

该代码作为类的静态初始化的一部分执行。也许它是在你设置断点之前执行的。或者调试器中可能存在错误。

> 2）静态最终引用中的不可变字符串是否有任何可能的方法来改变？

是的。往上看。

> 3）有没有什么可能的方法让字符串不被首先分配？

仅给出您在此处编写的代码，不。但是，如果您在静态初始化图中有一个循环，则可以`MY_CONSTANT_STRING`在分配之前查看 的值。但是，该值将是`null`......而不是空字符串。

> 4) 包含字符串或引用的内存有没有可能被其他对象或进程“破坏”？

是的。往上看。

> 5）任何其他微妙的陷阱，我只是没有以正确的方式思考这个问题？

可能。我无法从这个距离读懂你的想法:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:10:54.603

几乎可以肯定，要么：

1.  这不是您正在执行的实际代码，您的真实代码做了一些有意义的不同的事情，这解释了差异。请您的 IDE 将您带到使用该常量的声明处。可能不是你想的那样。
2.  这是您的源代码，但编译后的代码不是最新的。看起来你正在执行/不执行你不是/现在的代码
3.  你实际上并没有调用这个类

`static`赋值和初始化器发生在类被初始化时，在类的任何方法被调用或实例被创建之前。这是有保证的。`String`是不可变的，并且`final`引用在赋值后不会改变。您永远无法覆盖字段，也永远无法覆盖任何静态内容。（尽管您可以肯定地隐藏它们。）

对于该字段，您可能观察到的唯一其他值是`null`，如果是，`final`但您在分配它之前在块中引用它时会发生这种情况`static`——这很难做到，只能在一种循环初始化场景中发生。

除非出现 JVM 错误——而且，这并非完全不可能——任何引用都不会被 Java 代码的任何操作破坏。

# c - 可以在 do-while 循环中省略“do”吗？

> ID：14703058
> 
> 赞同：0
> 
> 时间：2013-02-05T08:29:12.413
> 
> 标签：c, do-while

我正在看我教科书中的一些 C 代码，它包括这些行

```
...
lastsec = get_seconds();
 sec0 = get_seconds(); while (sec0 == lastsec);
... 
```

看起来`do`第二行末尾缺少 a ——但无论如何它仍应编译代码。

我正在为这个循环如何不只是停留在`while (sec0 == lastsec);`时间结束而摸​​不着头脑 - 假设它`get_seconds()`没有增加......

这本书是计算机体系结构：一种定量方法，第五版。 [这是第 134 页上的代码。](http://books.google.com/books?id=gQ-fSqbLfFoC&pg=PA134#v=onepage&q&f=false)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:30:14.013

这不是一个`do-while`循环，只是一个`while`空体循环。在这种情况下，这似乎要么导致无限循环，要么永远不会被执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T08:35:35.203

它要么是无限循环，要么是条件第一次失败。

可能条件中的变量之一是`volatile`并且由其他人（线程，硬件等）异步更新，然后它说：*等待条件变为 false*。

否则，有这样的循环是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:32:37.333

在 C 中有两种 while 循环：

1)

```
do {.....} while(CONDITION); 
```

2)

```
while(CONDITION) {........} 
```

在 某些情况下`while(CONDITION) {........}`可以减少到`while(CONDITION)`

例如，如果我们想复制 char 数组，我们可以这样做：

```
char *SRC="any string";
char DST[10]={0};
char *src = SRC, *dst =DST;
while(*dst++=*src++); 
```

在上面的示例中，`src`and`dst`指针递增，如果`*src == null character`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:08:43.730

好像是书的印刷问题。查看页面，在您要求的下面还有 2 个其他循环，其中`do {`缺少 。他们甚至有块的右括号，但没有相应的左括号，而且是两次。甚至评论都在谈论循环`/* repeat until collect 20 seconds*/`

在我看来，打印机吞下了`do`s （可能是打印语言将它作为关键字或类似的东西）。

从逻辑的角度来看，它是一个`do while();`循环。

# jquery - 无法显示 JSON 响应对象

> ID：14703060
> 
> 赞同：0
> 
> 时间：2013-02-05T08:29:18.623
> 
> 标签：jquery, ajax, json

我有一个 WCF 服务，它从我的数据库中返回一条记录。我使用对它的 ajax 调用从我的 WCF 中获取值，并将其作为 JSON 对象获取。

**下图显示了我浏览器中的响应对象..**

![在此处输入图像描述](../Images/1759d8bbc4c22a1f68b2612c529aee26.png)

那很好..但是当我想使用类似的警报给它时

```
alert(myData.version); 
```

我无法获得它的价值。我如何从我的回复中获得价值？

**我的 AJAX 调用：**

```
$.ajax({

                url: urlToHandler,
                type: 'POST',
                data:{},
               dataType:'json',
                contentType: 'application/json',
                success: function(data) {    

myData = ((data.GetUpdateVersionResult), function (key, value) {
    var type;
    if (value && typeof value === 'object') {
        type = value.type;
        if (typeof type === 'string' && typeof window[type] === 'function') {
            return new (window[type])(value);
        }
    }

    return value;
});

alert(myData[0].version);

},
                    error: function(data, status, jqXHR) {                       
                        alert('There was an error.');
                    }
                }); // end $.ajax

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:36:09.613

您要查找的信息位于`data`.

```
alert(data.GetUpdateVersionResult[0].version) 
```

# hibernate - 尝试从 Web 表单填充休眠 bean 复杂类型属性

> ID：14703067
> 
> 赞同：1
> 
> 时间：2013-02-05T08:29:52.943
> 
> 标签：hibernate, struts2, mapping

我已经使用`hibernate`和注释映射了我的对象。我可以单独查询和创建它们。但是当我需要从复合类型的表单中填充一个时，即它包含另一个实体的外键时，我不知道如何填充它所代表的对象属性。所以是这样的：

```
<s:textfield name="page.book" label="book"/> 
```

应该转换为`Book`bean的属性，`Page`而后者又转换为表页中的外键 book_id。我不确定如何将我的表单 bean 字段映射到复合类型，例如`Book`. 我一直在获取`NullPointerException`服务器端。

有人可以概述您如何填充不是简单类型的 bean 属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:11:15.993

您需要为`Book`bean 中对象的每个属性创建一个输入`Page`。

```
public class Book {
    private int bookId;
    private String bookTitle;
    // and so on...

    // getters and setters *important*
}

public class Page {
    private Book book;
    // and so on...    

    // getters and setters *important*
} 
```

你需要两个：

```
<s:textfield name="page.book.bookId" label="bookId"/> 
```

和：

```
<s:textfield name="page.book.bookTitle" label="bookTitle"/> 
```

`Book`以及可能具有的任何其他属性。

# c++ - 从特征类继承

> ID：14703069
> 
> 赞同：1
> 
> 时间：2013-02-05T08:29:56.857
> 
> 标签：c++, templates, traits

从我自己的（例如，conatiner）模板类中的**特征**类模板继承的缺点是什么？它是传统的，合法的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:52:15.803

只有特征可以继承其他特征（严格意义上的 C++ 标准库调用`*_traits`），如果它们应该只在某些方面有所不同。但是还有其他类似的用于继承简化定义成员的类。例如，在定义迭代器时，您可能会继承[`std::iterator`](http://en.cppreference.com/w/cpp/iterator/iterator)以定义适当的标记 typedef。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T08:54:38.777

通常，特征类只是一堆类型定义。如果你想让它们*都*在你的类中，你可以从它们继承。由于它们通常没有（非静态）成员，它们实际上是空类，因此从它们继承意味着适用空基类优化。那么缺点可能是：

1.  继承通常意味着一种*is-a*关系。因此，OO 纯粹主义者可能会说您不应该将它用于纯粹的技术原因。但是在 C++ 中，经常使用纯技术继承，所以我不会打扰。
2.  如果您有多个基类，一些编译器将不再应用 EBCO，因此您继承的 trait 基类对象将占用您的类对象中的一些空间，尽管它不包含数据。

更多关于继承、EBCO 等的材料：

*   [Herb Sutter 关于继承的使用和滥用](http://www.gotw.ca/publications/mill07.htm)
*   [关于基类链接的 Boost.Operators 文档](http://www.boost.org/doc/libs/1_53_0/libs/utility/operators.htm#chaining)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:12:43.737

这取决于，有点。我会区分继承的 OO 概念和派生的 C++ 实现技术。（这个词汇的选择是个人的。区分并不经常，但恕我直言，区分设计概念和实现技术很重要。）在这种情况下，我会说你不*继承* 自一个特征类，因为没有 isA 关系。另一方面，虽然派生通常用于实现继承，但它并不是唯一可能的用途。从特征类派生是完全正常的（例如，以大多数迭代器从 派生的方式`std::iterator`），只要很明显这种派生*不是*用于实现OO意义上的继承。特别是，您不希望人们通过指向 `std::iterator`.

已经建议（不亚于 Herb Sutter 提出）特征类具有保护析构函数，以防止通过它们删除任何风险。我并不完全相信。特征类的非常语义使得任何人通常都不会创建指向它的指针。（您最后一次`std::iterator*`在任何代码中看到 an 是什么时候？）（另一方面，有人可能会问：为什么不呢？受保护的析构函数确实意味着特征类不是 POD，但我想不出任何合理的这很重要的情况。）

无论如何，从一个traits 类中公开继承来获得一个数量`typedef`是一个标准的C++ 习惯用法。

# jpa - JPA Entity Manager 是否应该在 EJB 中关闭？

> ID：14703073
> 
> 赞同：0
> 
> 时间：2013-02-05T08:30:11.000
> 
> 标签：jpa, ejb, weblogic

我有以下消息驱动 bean，首先我执行必要的数据库查找 (1)，然后调用外部系统 (2)（响应时间可以从几秒到 2 分钟不等），然后我更新一些数据库表 (3)。由于我不明白实体经理持有哪些资源，我的问题是：

*   数据库查找 (1) 完成后关闭实体管理器
*   收到外部系统响应后，使用 EntityManagerFactory 创建一个新的实体管理器

此外，我想知道使用 EntityManagerFactory.createEntityManager() 代替 EntityManager 注入是否有优势。

提前致谢

容器：WebLogic Server 10.3.3

数据库代码：

```
@MessageDriven(
        activationConfig = { @ActivationConfigProperty(
                propertyName = "destinationType", propertyValue = "javax.jms.Queue"
        ) })
@TransactionManagement(TransactionManagementType.CONTAINER)
public class MyBean implements MessageListener {

    @Resource
    private MessageDrivenContext context;
    @PersistenceUnit(unitName = "pu1")
    private EntityManagerFactory    emf;

    private static final Logger log = Logger.getLogger(MyBean.class);

    public MyBean() {}

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public void onMessage(Message incomingMsg) {
        EntityManager em = null;
        try{
            if(incomingMsg instanceof TextMessage){
                em = this.emf.createEntityManager()
                //perform db lookups (1)
                ...
                em.close()
                //call external system (response time up to 2 min) (2)
                ...
                //db update (3)
                em = this.emf.createEntityManager()
                ...
            } else{
                throw new IllegalArgumentException("Unsupported message type");
            }
        } catch (Exception ex){
            log.error("Message processing failed. Forcing the associated transaction to rollback", ex);
            context.setRollbackOnly();
        } finally{
            if(em != null && em.isOpen()){
                em.close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:09:59.587

可以让 EntityManager 保持打开状态（实际上规范说，即使您关闭 EntityManager，持久性上下文也将保持打开状态，直到事务提交或回滚）。您应该担心您的事务，因为如果外部系统调用的响应太慢，它可能会超时。您真的希望该调用成为交易的一部分吗？是 XA 交易吗？否则，您可能需要重构代码，以便对外部系统的调用不是事务的一部分。

# android - android获取照片路径而不拍照

> ID：14703079
> 
> 赞同：4
> 
> 时间：2013-02-05T08:30:18.963
> 
> 标签：android, path, camera, photo

我想获得相机照片的真实路径，而不是拍照。

我现在使用的是：

```
String path=""; //The real path I want...
String[] projection=new String[]{MediaStore.Images.ImageColumns._ID, MediaStore.Images.ImageColumns.DATA, MediaStore.Images.ImageColumns.DATE_TAKEN};     
final Cursor c=context.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, MediaStore.Images.ImageColumns.DATE_TAKEN+" DESC"); 
if(c!=null)
{
  c.moveToFirst();
  path=c.getString(1);
  Log.i(Constants.TAG, "File Path: "+path);
  path=path.substring(0, path.lastIndexOf('/')+1);
} 
```

但是上面的结果只是在某个时候改变了......

对于正常情况，它将是**/storage/ext_sd/DCIM/100MEDIA/**

（我正在使用 HTC Butterfly，android 4.1.1，在 United Stats 中称为 DroidDNA 的完全相同的模块）

今天下午，在我将一些照片移到另一个文件夹后（在手机上操作，而不是在 PC 上操作）

结果更改为**/storage/ext_sd/[some_other_of_my_image_folder]/**

如何获得相机照片的真实路径？请帮我 ：-（

编辑：我正在尝试另一种方式，如下所示：

```
Log.i(Constants.TAG, "Photo path: "+f.getPath());
if(f.exists())
{
  File test1=new File(f, "100MEDIA/");
  if (test1.exists())
  {f=test1;}
  else
  {
    File test2=new File(f, "100ANDRO/");
    if(test2.exists())
    {f=test2;}
    else
    {
      File test3=new File(f, "Camera/");
      if(!test3.exists())
      {test3.mkdirs();}
      f=test3;
    }
  }
}
else
{
  f=new File(f, "Camera/");
  f.mkdirs();
} 
```

它返回的路径如下：**/storage/sdcard0/DCIM/100MEDIA/**，这是我手机的内部 16GB 空间。

我已经将我的相机照片存储设置为外部 microSD，路径应该是**/ext_sd/DCIM/100MEDIA/**

真的需要帮助，医生！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:19:01.043

2人投票赞成我的问题，所以我想也许其他程序员也面临同样的问题。

我有办法克服这个问题，以下是我的代码：

```
String path="";
String[] projection=new String[]{MediaStore.Images.ImageColumns._ID, MediaStore.Images.ImageColumns.DATA, MediaStore.Images.ImageColumns.DATE_TAKEN};     
final Cursor c=context.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, MediaStore.Images.ImageColumns.DATE_TAKEN+" DESC");
boolean isOK=false; //Found a DCIM path ?
if(c!=null)
{
  c.moveToFirst();
  while(!isOK)
  {
    path=c.getString(1);
    Log.i(Constants.TAG, "File Path: "+path);
    path=path.substring(0, path.lastIndexOf('/')+1);
    isOK=!(path.indexOf("DCIM")==-1); //Is thie photo from DCIM folder ?

    c.moveToNext(); //Add this so we don't get an infinite loop if the first image from
                    //the cursor is not from DCIM
  }
}
Log.i(Constants.TAG, "Only Path: "+path); 
```

表达 ：

首先，这是我的 SD 卡

*   /DCIM/100MEDIA/xxx.JPG（相机照片）
*   /Media/image/comics/xman/01.JPG
*   ...
*   ..
*   .
*   /Media/image/hot/youknowwhatitis/hot01.JPG

**我总是从context.getContentResolver().query**的游标中读取第一条记录。

通常，它先返回 DCIM 内部的照片，然后再返回其他照片/图像/图片。

一天早上，我将一个文件从 DCIM 移动到另一个文件夹，（通过 android 的 Gallery APP）

和**context.getContentResolver().query**的第一条记录更改为其他非 DCIM 内容，

把这个问题带给我...orz

* * *

**这不是完美的解决方案**，如果用户没有拍摄任何照片到 DCIM，这个解决方案将变得毫无用处。

由于我正在开发一个多媒体应用程序，猜测用户应该/必须是一个照片爱好者......这是我到目前为止最好的方法，希望它对其他人带来一点帮助。

# ruby - 创建新实例时的 :id 委托

> ID：14703080
> 
> 赞同：3
> 
> 时间：2013-02-05T08:30:20.120
> 
> 标签：ruby, ruby-on-rails-3, rails-admin

我有三个模型：

```
class Company < ActiveRecord::Base
  has_many :employees
  has_many :dogs, :through => :employees
end

class Employee < ActiveRescord::Base
  belongs_to :company
  has_many :dogs
end

class Dog < ActiveRecord::Base
  belongs_to :employee

  delegate :id, :to => :employee, :prefix => true, :allow_nil => true
end 
```

这工作得很好，在我看来，我可以调用 dog.employee_id。但是，如果我想在 RailsAdmin 中创建一个新实例（而不是在编辑现有对象时），我会收到以下错误：

```
RuntimeError at /dog/new
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

:allow_nil 设置为 true 并且其他属性的委托工作正常。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:40:21.300

您不需要委托就可以访问 dog.employee_id。

belongs_to 关系已经暗示 Dog 将持有 Employee 的外键并创建一个 employee_id 属性。

# jquery - 将行/列标记为脏，以便可以使用 .getChangedCells('dirty') 返回

> ID：14703082
> 
> 赞同：2
> 
> 时间：2013-02-05T08:30:24.480
> 
> 标签：jquery, jsp, jqgrid

有没有办法强制 JqGrid 行/列数据为“脏”？

每当我检查 时`.getChangedCells('dirty')`，我想添加一个未修改的附加行，因此不会使用此方法返回。

我想要的只是将行/列数据强制标记为脏，这样每当我调用此方法时，它也会返回该行。

我的 jqgrid 数据是：

```
var mydata = [      
    {id:"1",blkNo:"101",floorNo:"04",unitNo:"184",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Draft",saleInd:0,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"2,"blkNo:"101",floorNo:"04",unitNo:"184",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Draft",saleInd:0,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"3",blkNo:"101",floorNo:"04",unitNo:"184",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Draft",saleInd:0,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"4",blkNo:"101",floorNo:"04",unitNo:"185",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Submitted",saleInd:0,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"5",blkNo:"101",floorNo:"04",unitNo:"186",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Submitted",saleInd:0,propertyType:2,leastPrice:"200000",leastPricePSF:"200"},
    {id:"6",blkNo:"101",floorNo:"04",unitNo:"187",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Submitted",saleInd:0,propertyType:3,leastPrice:"200000",leastPricePSF:"200"},
    {id:"7",blkNo:"101",floorNo:"04",unitNo:"188",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"",dateAborted:"",unitStatus:"Submitted",saleInd:0,propertyType:3,leastPrice:"200000",leastPricePSF:"200"},
    {id:"8",blkNo:"101",floorNo:"04",unitNo:"189",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:1,purchaserDtail:0,propertyType:0,leastPrice:"200000",leastPricePSF:"200"},
    {id:"9",blkNo:"101",floorNo:"04",unitNo:"190",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:1,purchaserDtail:0,propertyType:0,leastPrice:"200000",leastPricePSF:"200"},
    {id:"10",blkNo:"101",floorNo:"05",unitNo:"191",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:1,purchaserDtail:1,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"11",blkNo:"101",floorNo:"05",unitNo:"192",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:1,purchaserDtail:2,propertyType:2,leastPrice:"200000",leastPricePSF:"200"},
    {id:"12",blkNo:"101",floorNo:"05",unitNo:"193",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:2,purchaserDtail:2,propertyType:2,leastPrice:"200000",leastPricePSF:"200"},
    {id:"13",blkNo:"102",floorNo:"01",unitNo:"183",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:2,purchaserDtail:1,propertyType:1,leastPrice:"200000",leastPricePSF:"200"},
    {id:"14",blkNo:"102",floorNo:"02",unitNo:"184",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:2,purchaserDtail:0,propertyType:0,leastPrice:"200000",leastPricePSF:"200"},
    {id:"15",blkNo:"103",floorNo:"03",unitNo:"183",area:"1000",streetName:"Peck Seah Street",interested:"Yes",price:"3000000",pricePSF:"3000",dateofLaunch:"2011-05-05",dateofSale:"2011-05-10",dateAborted:"2011-05-15",unitStatus:"Submitted",saleInd:2,purchaserDtail:0,propertyType:1,leastPrice:"200000",leastPricePSF:"200"}
]; 
```

这是我的`getModifiedRows`方法：

```
function getModifiedRows() {
    var allRowsInGrid = $('#list4').jqGrid('getRowData');

    for(j=0; j< allRowsInGrid.length;j++) 
    {
        if( allRowsInGrid[j]['unitStatus'] == 'Draft')
        { 
            var rowId = allRowsInGrid[j]['id'];   
            $('#list4').addClass("dirty-cell");     
            $("#list4").jqGrid("setCell", rowId ,'pricePSF' ,'', "dirty-cell");
        }
    }

    var retRows = $('#list4').getChangedCells('all');
    var retCol = $('#list4').getChangedCells('dirty');
    var entireGrid = $("#list4").jqGrid('getGridParam','colNames');

    if(retCol != '' && retRows != '')
    {
        alert(retCol);
        for(i=0; i< retCol.length;i++)
        {
            var obj = retCol[i];
            obj['row_Index']= retRows[i]['row_Index'];
            obj['unitStatus']= retRows[i]['unitStatus'];
            obj['pricePSF']= retRows[i]['pricePSF'];
            alert(retRows[i]['unitStatus']);
            if(retRows[i]['unitStatus'] == 'New')
            {
                retCol[i] = retRows[i];
            }
        }
        var modColData = JSON.stringify(retCol);    
        var modRows = JSON.stringify(retRows);
        document.getElementById("getGridData").value = modRows;
        document.getElementById("getModColData").value = modColData;
    }
} 
```

虽然我没有从这段代码中得到任何错误，但我没有在下面的代码中得到这一行：

```
var retCol = $('#list4').getChangedCells('dirty'); 
```

正如 getModifiedRows 中清楚的那样，我希望每个单元`unitStatus = Draft`都返回

```
var retCol = $('#list4').getChangedCells('dirty'); 
```

如果我为此列传递任何硬编码值，我可以看到值发生了变化，例如：

```
$("#list4").jqGrid("setCell", rowId ,'pricePSF' ,'200', "dirty-cell"); 
```

但我仍然无法在修改后检索它

```
var retCol = $('#list4').getChangedCells('dirty'); 
```

这是我的`colNames`和`colModel`：

```
colNames:['S No','Block No','Floor No', 'Unit No', 'Street Name',' 6- Digit Postal Code' ,'Trans Id','Address','Property Type','Area (sqm)','Date of Option Issued','Nett Transacted Price ($)','Gross Transacted Price ($)','Transacted Unit Price ($psf)','Nationality Of Buyer','Interested Party Transaction','Date of Option Aborted','Unit Status','listPriceFilter','salePriceFilter','sale_Date_Filter','aborted_Date_Filter','row_Index'],
//column no [1    2           3          4          5              6              7         8         9               10      11            12            13            14                        15                         16                               17                 18           19              20                      21              22                     23
colModel:[
    {name:'id', index:'id', width:40, align:"center", sorttype:"int"},
    {name:'blkNo', index:'blkNo', width:40, align:"center", sorttype:"text", sortable:true, editable:true, editrules:{custom:true, custom_func:mandatoryChk}}, 
    {name:'storey', index:'storey', align:"center", width:40, sorttype:"text", sortable:true, editable:true,  editrules:{custom:true, custom_func:storeyCheck}},    
    {name:'unit_No',index:'unit_No', width:40, align:"center", sorttype:"text", editable:true, editrules:{custom:true, custom_func:checkUnit}, onblur: 'submit'},
    {name:'street_Name', index:'street_Name', width:60, align:"center", sorttype:"text", editable:true, editrules:{required:true}},  
    {name:'postal_code', index:'postal_code', width:60, align:"center", sorttype:"text", editable:true, editrules:{custom:true, custom_func:postalCode}},  
    // {name:'postal_code', index:'postal_code', width:60, align:"center", sorttype:"text", editable:true, editrules:{custom:true}},  
    {name:'trans_Id', index:'trans_Id', width:60, align:"center", sorttype:"text", editable:false},  
    {name:'address', index:'address', width:60, align:"center", sorttype:"text", editable:false},  
    {name:'property_Type', index:'property_Type', align:"center", width:80, sortable:true, editable:true, edittype:"select", editoptions:{value:pptyTypeStr}, formatter:'select', stype: 'select'},                 
    {name:'area', index:'area', width:50, align:"center", sorttype:"integer", editable:true, editrules:{custom:true, custom_func:myAreaCheck, number:true, required:true}},
    {name:'sale_Date', index:'sale_Date', align:"center", width:75, sorttype:"date", sortable:true, editable:true, editoptions: {
        dataInit: function (element) {
            $(element).datepicker({
                dateFormat:"dd/mm/yy",
                onSelect: function(dateText, inst) { 
                    var $input = inst.input; // the datepicker input
                    var $row = $input.parents("tr"); 
                    $("#list4").jqGrid('saveRow',$row.attr("id"), false); 
                }
            });
        }
    }},  
    //  {name:'nett_Price', index:'nett_Price', width:80, align:"center", sorttype:"currency", formatter: 'currency',formatoptions: {  thousandsSeparator: ", " , decimalPlaces: 0, defaultValue: ''  }, editable:true , editrules:{custom:true, custom_func:mynettpricecheck , number:true} },    
    {name:'nett_Price', index:'nett_Price', width:80, align:"center", sorttype:"text", editable:true, editrules:{custom:true, custom_func:mynettpricecheck }},
    // {name:'sale_Price', index:'sale_Price', width:80, align:"center", sorttype:"currency", formatter: 'currency', formatoptions: {  thousandsSeparator: ", " , decimalPlaces: 0}, editable:true ,editrules:{custom:true, custom_func:mypricecheck,number:true}},
    {name:'sale_Price', index:'sale_Price', width:80, align:"center", sorttype:"text", editable:true},
    {name:'pricePSF', index:'pricePSF', width:80, align:"center", sorttype:"text", editable:false},
    {name:'nationality_Code', index:'nationality_Code', width:80, align:"center", editable:true, sortable:true, edittype:"select", formatter:'select', stype: 'select', searchoptions:{
            sopt: ['eq'],
            dataInit: function(el){
                var defOption = $("option:contains("+defaultCategory+")",el);
                defOption.attr("selected", "selected");
                setTimeout(function(){
                    $(el).trigger('change');
                },500);
            }
        },
        sorttype: function(cell, obj) {
            return purchaserDtail[cell];
        },
        editoptions:{value:purchaserDtailStr}
    },          
    {name:'interested', index:'interested', align:"center",width:70, sortable:true, editable:true, edittype:"select", formatter:'select', stype: 'select', editoptions:{value:interestedStr}},
    {name:'dateAborted', index:'dateAborted', align:"center", width:75, sorttype:"date", sortable:true, editable:true,
        editoptions: {
            dataInit: function (element) {
                $(element).datepicker({
                    dateFormat:"dd/mm/yy",
                    onSelect: function(dateText, inst) { 
                        var $input = inst.input; // the datepicker input
                        var $row = $input.parents("tr"); 
                        $("#list4").jqGrid('saveRow',$row.attr("id"), false);
                    }
                });
            }
        }
    },
    {name:'unitStatus', index:'unitStatus', align:"center", width:60, sortable:true, editable:false},
    {name:'listPriceFilter', index:'listPriceFilter', align:"center", width:40, editable:false},
    {name:'salePriceFilter', index:'salePriceFilter', align:"center", width:40, editable:false},
    {name:'sale_Date_Filter', index:'sale_Date_Filter', align:"center", width:40, editable:false},
    {name:'aborted_Date_Filter', index:'aborted_Date_Filter', align:"center", width:40, editable:false},
    {name:'row_Index', index:'row_Index', align:"center", width:40, editable:false, key:true}
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:55:32.250

您只需将类添加到要标记为“脏”`"dirty-cell"`的单元格（元素）。`<td>`您可以使用例如[setCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)方法将类添加到由 rowid 和列名指定的单元格：

```
$("#yourGridId").jqGrid("setCell", rowid, "columnName", "", "dirty-cell"); 
```

**更新**：您以错误的方式提出您的问题。该方法`getChangedCells`仅与[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing)一起使用。保存单元格修改后，在单元格编辑模式下编辑的每个单元格都会获得`"dirty-cell"`类。行得到额外的`"edited"`类。该方法`getChangedCells`使用事实。

您稍后发布的代码显示您使用[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)方法，它是[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)的一部分。您不能在一个网格中混合单元格编辑和内联编辑。

您没有发布您使用的完整代码。所以我不清楚你想使用哪种编辑模式。如果您确实想使用单元格编辑，那么您应该修改您的代码以使用[saveCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#methods)而不是[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)。此外，如果您需要将某个单元格标记为“脏单元格”，则需要将该行标记为

```
var $grid = $("#yourGridId");
$($grid[0].rows.namedItem(rowid)).addClass("edited");
$grid.jqGrid("setCell", rowid, "columnName", "", "dirty-cell"); 
```

或者

```
var $grid = $("#yourGridId");
$("#" + $.jgrid.jqID(rowid)).addClass("edited");
$grid.jqGrid("setCell", rowid, "columnName", "", "dirty-cell"); 
```

之后，您将能够使用`getChangedCells`方法。

如果您确实想使用内联编辑而不是单元格编辑，您将无法使用`getChangedCells`，但您可以枚举`<tr>`具有`editable`属性的行（元素）。该类将添加到已编辑的所有行中。如果属性的值为“1”，则该行现在正在编辑，您必须调用[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)方法来保存更改。如果属性的值为“0”，则该行之前被编辑过，可以解释为“脏”。`editable`对于内联编辑，没有编辑没有属性的行。

# java - webdriver，你能帮助获得使用java的选项吗？

> ID：14703083
> 
> 赞同：0
> 
> 时间：2013-02-05T08:30:39.193
> 
> 标签：java, selenium, webdriver, selenium-webdriver

[这是我的老问题：](https://stackoverflow.com/questions/14685905/can-not-find-element-using-webdriver)

我认为建立一个网站可能会有所帮助。这是我们的网站：[https](https://sort.symantec.com/patch/finder) ://sort.symantec.com/patch/finder 您能帮忙选择一个选项吗？比如：“平台”中的“AIX”

我还是想不通。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:51:46.473

在这些情况下，我的方法是：

1.  安装[Selenium IDE](http://seleniumhq.org/projects/ide/plugins.jsp)
2.  在 Selenium IDE 中记录测试用例
3.  在 Selenium IDE 中选择选项 -> 选项...
4.  选择所需的语言格式
5.  点击“来源”
6.  使用代码作为初稿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:20:34.293

类似于以下内容：

```
WebElement element = driver.findElement(By.Id("sel_platform"));
Select dropDown = new Select(element);
value = "AIX";
dropDown.selectByValue(value); 
```

我的 Java 有点不对劲，所以你可能需要改变它，但想法是你需要这个`Select`类，它会做你想要的。

查看您的`onchange`问题的 Javascript（显示在您的旧线程中），它只是更改每个下拉列表的值，仅显示该软件的版本。例如，如果我`Veritas Cluster Server`在第一个下拉菜单中单击，该`refresh_filters`函数会被`onchange`事件触发，确保显示的平台`Veritas Cluster Server`是*受支持*的平台，以及它所具有的版本。

这**不应该**阻止您使用上述方法或您以前的旧产品中显示的任何其他方法。

**不要对应用程序工作**- 这样做的全部意义在于按照用户的意愿工作。用户会选择一个产品，然后是他们的平台，然后是他们的版本——**而不是**你做的方式。（这似乎是首先选择平台）。

所以总结：**选择产品**，然后**选择平台**，然后**选择版本**。

# c++ - 不存在将“const char[7]”转换为“TopicA”的合适构造函数

> ID：14703086
> 
> 赞同：1
> 
> 时间：2013-02-05T08:30:42.647
> 
> 标签：c++, templates, constructor

我有一个模板化的 SortedLinkedList 类，它按主题 A 对象的字符串字段中包含的值对其进行排序。

这是主题A：

```
struct TopicA
{
string sValue;
double dValue;
int iValue; 

TopicA();
TopicA( const string & arg );

bool operator> ( const TopicA & rhs ) const;
bool operator< ( const TopicA & rhs ) const;
bool operator== ( const TopicA & rhs ) const;
bool operator!= ( const TopicA & rhs ) const;
}; 
```

我想在列表中找到`"tulgey"`存储其字符串字段中的 TopicA 对象的位置，所以我调用`AList.getPosition( "tulgey" );`Here is the `getPosition()`header：

```
template <class ItemType>
int SortedLinkedList<ItemType>::getPosition( const ItemType& anEntry ) const 
```

但是当我尝试调用`getPosition()`编译器时，标题中出现了错误。为什么？我没有从`string`to的转换构造函数`TopicA`吗？

如果它有什么不同，这里的定义是`TopicA( const string & arg )`：

```
TopicA::TopicA( const string & arg ) : sValue( arg ), dValue( 0 ), iValue( 0 )
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:34:17.833

您可能正在调用两个隐式转换， from `const char[7]`to`std::string`和 from `std::string`to `TopicA`。但是您只允许进行一次隐式转换。您可以通过更明确地解决问题：

```
AList.getPosition( std::string("tulgey") ); // 1 conversion
AList.getPosition( TopicA("tulgey") );      // 1 conversion 
```

或者，您可以为`TopicA`构造函数提供一个`const char*`：

```
TopicA( const char * arg ) : sValue( arg ), dValue( 0 ), iValue( 0 ) {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T08:33:51.973

这些会起作用

```
AList.getPosition( TopicA("tulgey") ); 

AList.getPosition( TopicA("tulgey") ); 

std::string query = "tulgey";
AList.getPosition( query  ); 
```

或者，您可以定义另一个转换构造函数

```
TopicA( const char* arg ); 
```

现在一切都会如你所愿

```
AList.getPosition( "tulgey" ); 
```

问题是**您需要 2 次隐式转换**，**标准只允许 1**次。请记住，**字符串文字表示为`char`**in`C++`和 not的**数组**`string`。

1.  `char*`/ `char[]`->`std::string`
2.  `std::string`->`TopicA`

# c# - Windows Phone 8 的 Http Post 获取响应错误

> ID：14703087
> 
> 赞同：1
> 
> 时间：2013-02-05T08:30:45.500
> 
> 标签：c#, sdk, http-post, windows-phone

我正在从我的原始帖子（[Windows Phone 8 的 Http Post](https://stackoverflow.com/questions/14698879/http-post-for-windows-phone-8)）中重新发布第二个问题，因为我的主要问题已经得到回答。

这是我在@Hunter McMillen 的帮助下更新的代码。我现在正试图从服务器获取 responseCallback。问题是`GetResponseCallback => (HttpWebResponse)httpWebRequest.EndGetResponse(GetResponseCallback)`第二个 using 语句中的行，它正在显示

```
An exception of type 'System.Net.WebException' occurred in System.Windows.ni.dll but was not handled in user code

If there is a handler for this exception, the program may be safely continued. 
```

这个错误发生在我使用第一个示例之前。有谁知道如何解决这个问题？

```
 private static async void HttpPostData(){
            string url = "http://www.mytunnel.com/api/purchases";
            HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
            httpWebRequest.ContentType = "text/plain";
            //httpWebRequest.ContentType = "application/x-www-form-urlencoded";
            httpWebRequest.AllowWriteStreamBuffering = true;
            httpWebRequest.Method = "POST";
            //httpWebRequest.ContentLength = jsonAsBytes.Length;

        try{
            using (var stream = await Task.Factory.FromAsync<Stream>(httpWebRequest.BeginGetRequestStream, httpWebRequest.EndGetRequestStream, null))
            {
                byte[] jsonAsBytes = Encoding.UTF8.GetBytes("{ \"data\" : \"json\" }");
                await stream.WriteAsync(jsonAsBytes, 0, jsonAsBytes.Length);
            }
        }
        catch (Exception e) { Debug.WriteLine(e.Message); }

        httpWebRequest.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), httpWebRequest);
    }

    private static void ReadWebRequestCallback(IAsyncResult callbackResult)
    { 
        HttpWebRequest myRequest = callbackResult.AsyncState as HttpWebRequest;

        try
        {
            HttpWebResponse response = myRequest.EndGetResponse(callbackResult) as HttpWebResponse;
            using (StreamReader sr = new StreamReader(response.GetResponseStream()))
            {
                String s = sr.ReadToEnd();
                System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() => { MessageBox.Show(s); });
            }
        }
        catch (WebException webExcp)
        {
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() => { MessageBox.Show(webExcp.ToString()); });
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T04:01:59.213

我最终改用了 WebClient 。代码更简洁，我从原始帖子中提供的示例链接中阅读了底部的评论。Microsoft 的示例表单实际上是从 stackoverflow 帖子中复制的。它不起作用（不要相信 MS 文档）。

这是我的代码和教程链接（[http://www.daveamenta.com/2008-05/c-webclient-usage/](http://www.daveamenta.com/2008-05/c-webclient-usage/)），供遇到相同问题的每个人使用。如果对您有帮助，请为我竖起大拇指。

```
 private void httpPostData()
        {
            WebClient webClient = new WebClient();
            webClient.Headers[HttpRequestHeader.ContentType] = "application/json";
            var uri = new Uri("http://www.sample.com/api/purchases", UriKind.Absolute);
            webClient.Headers[HttpRequestHeader.ContentLength] = postData.Length.ToString();
            webClient.AllowWriteStreamBuffering = true;
            webClient.Encoding = System.Text.Encoding.UTF8;
            webClient.UploadStringAsync(uri, "POST", postData.ToString());
            webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(postComplete);
            System.Threading.Thread.Sleep(200);
        }

  private void postComplete(object sender, UploadStringCompletedEventArgs e)
    {
        reset.Set();
        Response result = JsonConvert.DeserializeObject<Response>(e.Result);
        if (result.success == true)
        {
            DispatchCommandResult(new PluginResult(PluginResult.Status.OK, package_id));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:34:58.213

将方法更改`"GET"`为我相信您没有将任何数据发布到表单

# r - 如何在格 bwplot 中更改面板标签和 x 轴子标签

> ID：14703094
> 
> 赞同：10
> 
> 时间：2013-02-05T08:31:07.293
> 
> 标签：r, labels, lattice, boxplot

我使用 RStudio (MacOS) 已经 2 周了，所以如果我忽略了一个可以解决我的问题的明显功能，请原谅我。
作为一个项目，我试图重现一个箱线图，其中 4 个图代表净收益，给定疾病类型——“非严重”（0）或“严重”（1）——作为 x 轴标签，以及给予治疗——“谈话疗法”(0) 或“药物疗法”(1)——作为 x 轴子标签。

到目前为止，这是我的脚本：

```
tx <- c(0,0,0,0,1,1,1,1)
dztype <- c(1,0,1,0,0,0,1,1)
NBwtp1000 <- c(-5500,-4000,-5000,-1000,-5000,-5000,-2800,-2000)
require(lattice)
bwplot(NBwtp1000 ~ paste0("Tx ", tx) | paste0("Disease Severity ", dztype),
       xlab="Talk Therapy (Tx 0) or Drug Therapy (Tx 1)", 
       ylab="Net Benefit @ wtp 1000", horizontal=FALSE) 
```

如果你运行代码，你会看到盒须图：感谢这个论坛上一些关于 lattice`bwplot`函数的信息性帖子，我快到了。

但是，我对结果仍然很不满意。我使用该`paste0`函数将字符串描述符添加到治疗组的 X 轴子标签（最初标记为“1,2”，现在显示为“Tx 0，Tx 1”），但理想情况下，我希望这些子标签显示“谈话疗法” ”和“药物疗法”。（我根本不知道如何取消现有的数字标签。）
同样，我希望面板标签在标签当前为 0 的地方说“不严重”，在标签当前为 1 的地方说“严重”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T10:01:04.663

据我所知，最简单的方法是将您的`tx`和转换`dztype`为具有适当级别名称的因子。

```
tx <- factor(tx, levels=c(0,1), labels=c("Talk Therapy", "Drug Therapy"))
dztype <- factor(dztype, levels=c(0,1), labels=c("Not severe", "Severe"))
bwplot(NBwtp1000 ~ tx | dztype, xlab="Talk Therapy or Drug Therapy", 
       ylab="Net Benefit @ wtp 1000", horizontal=FALSE) 
```

![在此处输入图像描述](../Images/17e25b70d8a940915368e1300bb1d88a.png)

另一种解决方案是对级别使用参数`scale`，`tx`对`strip`使用参数`dztype`：

```
tx <- c(0,0,0,0,1,1,1,1)
dztype <- c(1,0,1,0,0,0,1,1)
bwplot(NBwtp1000 ~ tx | dztype, xlab="Talk Therapy or Drug Therapy", 
       ylab="Net Benefit @ wtp 1000", horizontal=FALSE,
       scales=list(x=list(labels=c("Talk therapy","Drug Therapy"))), 
       strip=strip.custom(var.name="Disease severity", 
                          factor.levels=c(" Not Severe", "Severe"),
                          strip.levels=rep(TRUE,2))) 
```

![在此处输入图像描述](../Images/96888eabafbf8ca839f8bcc04dcb4171.png)

# git - 如何回滚到特定的 git 提交

> ID：14703095
> 
> 赞同：2
> 
> 时间：2013-02-05T08:31:08.770
> 
> 标签：git, rollback

我已经使用此命令回滚`git reset --hard HEAD^`到以前的某个提交，我想做的就是前滚，我知道这不是我最近所做的提交的正确术语。发生的事情是当我使用该命令时删除了一堆文件，现在我不知道如何找回。我正在使用 github 有没有办法从 github 下拉并覆盖当前目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:33:43.297

查看您的问题，您要检索的提交是`master`GitHub 存储库分支上的当前提交，您必须执行以下操作

```
git reset --hard origin/master 
```

警告这将删除您在回滚后可能进行的所有未提交的修改`HEAD^`。

之前，你可能想做

```
git fetch origin 
```

确保您已从 GitHub 存储库中获得最新更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:34:56.727

看看`git reflog`。在其输出中，您应该找到要重置的提交。然后`git reset --hard`到它，你回到你第一次之前的地方`reset`。

`git reflog`如果您真的搞砸了本地存储库并且没有可用于从中提取提交的远程存储库，则特别有用。只要您没有调用`git prune`删除旧提交或`git reflog expire`清理 reflog，它应该可以正常工作。

# internet-explorer-9 - 调整元素大小时的 IE 9 和 10 box-shadow

> ID：14703099
> 
> 赞同：7
> 
> 时间：2013-02-05T08:31:46.447
> 
> 标签：internet-explorer-9, css, internet-explorer-10

[http://jsbin.com/ararar/5/edit](http://jsbin.com/ararar/5/edit)

**tl; dr** 上面的链接是下面进一步描述的问题的一个快速示例。单击 li:s 将其删除，并查看 IE9 或 IE10 中的渲染故障。

在我的团队正在构建的应用程序中，我们有一个搜索结果框，其高度会根据匹配的数量而变化。该元素应用了一个盒子阴影。问题出在 IE9 和 IE10 中，当框变小时。似乎 IE 会“忘记”盒子阴影，而只会重新渲染元素的内部部分。box-shadow 仍然会在调整大小的元素的底部呈现，但阴影的副本通常会留在元素调整大小之前呈现的位置。

如果有任何方法可以解决这个问题，任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-24T19:12:21.233

我从 Andy 那里得到了解决方案，但我没有在标记中放置一个空元素，而是在父级（带有阴影的元素，*而不是*调整大小的元素）上添加了一个空的 CSS 伪元素。

```
.shadowed-element:after { content: ""; } 
```

与 jQuery 中的动画高度完美配合，在动画期间重新绘制，而不仅仅是在结束时。感谢安迪让我走上正轨！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-02T17:32:40.343

（我意识到这个答案有点晚了，但我认为值得记录一个有效的解决方案/解决方法。）

我最近遇到了类似的问题。解决方案似乎是在`<div>`带有框阴影的标签下方添加一个附加标签。确保这两个 s 之间没有边距`<div>`，并且高度至少与底部阴影的高度一样高，宽度与阴影一样宽。这似乎迫使 IE 重新绘制底部`<div>`向上移动时阴影所在的区域。

在您的情况下，我使用盒子阴影添加了左右边距，`<div>`并添加了 "shadow-fix" `<div>`。你可以在这里看到新版本：http: [//jsbin.com/ararar/51/edit](http://jsbin.com/ararar/51/edit)

希望对您或其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:33:22.630

我添加了这个 css，以便浏览器新删除了多少高度，它现在对你有用吗？

css

```
#resizing ul li {
 line-height:1em;
 height:1em;
} 
```

# wpf - 事件隧道如何在 WPF 中工作？

> ID：14703102
> 
> 赞同：0
> 
> 时间：2013-02-05T08:32:18.180
> 
> 标签：wpf, routed-events

顺便说一下，我正在阅读有关 Routed Event 的内容，这是一个非常酷的概念，我了解事件冒泡如何从子元素到根元素工作，但我不确定事件隧道如何工作。我创建了一个小例子，我在网格中放置了一个按钮并将 previewKeyup 事件附加到所有但在按下键事件之后在根级别处理而不是隧道到子级。

```
<Window x:Class="ExplorerContentControl.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Content Control" Height="400" Width="400" FontFamily="Calibri" FontSize="13" FontWeight="Bold" Button.Click ="Window_Click" PreviewKeyUp="Window_PreviewKeyUp" >
    <Grid Button.Click ="Grid_Click" PreviewKeyUp="Grid_PreviewKeyUp">
        <Button Name="btnClickedMe" Click="btnClickedMe_Click" Margin="3" HorizontalAlignment="Left" Height="25" Width="80" Content="Click Me" PreviewKeyUp="btnClickedMe_PreviewKeyUp" />
    </Grid>
</Window> 
```

在后面的代码中

```
private void btnClickedMe_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("From Btn Clicked");
}

private void Grid_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("at Grid Location...");
}

private void Window_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("at Windows Location ...");
}

private void Window_PreviewKeyUp(object sender, KeyEventArgs e)
{
    MessageBox.Show("PreviewKeyUp From Windows...");
}

private void Grid_PreviewKeyUp(object sender, KeyEventArgs e)
{
    MessageBox.Show("PreviewKeyUp From Grid...");
}

private void btnClickedMe_PreviewKeyUp(object sender, KeyEventArgs e)
{
    MessageBox.Show("PreviewKeyUp From Button...");
} 
```

虽然在事件冒泡中出现正确的消息框`buttonClick`，`WindowClick`但在`PreviewKeyup`. 有人可以向我解释一下事件隧道在我的示例中是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:02:36.747

这是您想尝试隧道的一种棘手方式。如果您在窗口中，我认为您按下向上按钮，而不是仅从窗口中获取消息。之所以如此，是因为您按下了窗口上的向上按钮（窗口是激活控件），并且事件来自窗口的路由并在窗口处停止，因为触发事件的是叶子元素。尝试首先单击“单击我”按钮，然后将焦点放在按钮上并按向上键。它将从窗口通过网格隧道到按钮，您将获得所需的所有消息。

# c# - 如何在实体框架 4 中使用查询生成器将数字转换为字符串

> ID：14703105
> 
> 赞同：0
> 
> 时间：2013-02-05T08:32:31.780
> 
> 标签：c#, entity-framework

我有以下问题。我从数据库中检索具有指定值的业务。该字段`businessno`是整数类型。以下是代码

```
ObjectQuery<BUSINESS> q_business =
                     _context.BUSINESS.Include("CUSTOMSOFFICE").Where(
                     "it.BUSINESSNO=" + int.Parse(pv_businessno)).Where(
                     string.Format("(it.BUSINESSSTART >= DATETIME'{0:yyyy-MM-dd HH:mm}') 
                     and (it.BUSINESSSTART <= DATETIME'{1:yyyy-MM-dd HH:mm}')",
                     pv_sdate, pv_edate)); 
```

然而，用户需要给出一个值并从数据库中检索`businessno`类似该值的数据。

我在互联网上搜索，最后重写代码如下。除非提供了 的完整值，否则此代码不会检索任何记录`businessno`。

```
ObjectQuery<BUSINESS> q_business = 
                      _context.BUSINESS.Where(
                      "CAST(it.BUSINESSNO as System.String) like @abc", new ObjectParameter("abc", busno)).Where(
                      string.Format("(it.BUSINESSSTART >= DATETIME'{0:yyyy-MM-dd HH:mm}') 
                      and (it.BUSINESSSTART <= DATETIME'{1:yyyy-MM-dd HH:mm}')",
                      pv_sdate, pv_edate)); 
```

我的问题是如何将数字转换为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:47:16.563

使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd487127.aspx)方法在服务器端将整数转换为字符串。

```
ObjectQuery<BUSINESS> q_business = 
      from b in _context.BUSINESS
      where SqlFunctions.StringConvert((double)b.BUSINESSNO).Contains(busno) &&
            b.BUSINESSSTART >= pv_sdate &&
            b.BUSINESSSTART <= pv_edate
      select b; 
```

# sql-server-2008 - SQL Server 顶部与顶部和底部的关系

> ID：14703107
> 
> 赞同：4
> 
> 时间：2013-02-05T08:32:45.507
> 
> 标签：sql-server-2008, tsql, query-optimization, paging

我正在寻找一种更有效的方法来在 sql server 2008 中实现分页。

我需要检索结果集行@from 到@to，按分值排序，但我还需要检索@from 和@to 之前和之后与那些特定@from 和@to 行的分值匹配的所有行。例如，这可能类似于以下两个查询之一：

注意，分数值不是唯一的，没有索引，也没有以预先排序的形式提供给查询的其余部分。

a) （实际上，我认为第一个示例不能保证给出我需要的结果，因为我不认为 2 个子查询中的 order by 保证产生相同的排序。但是为了理解什么我想要一个查询语法，只考虑这个例子，子查询中的 order-by 是相同的）

```
select *  
from (  
    select top (@to) * with ties  
    from result_set  
    order by score desc  
)  tt  
union  
select  
from (  
    select top (@to - @from + 1) * with ties  
    from (  
        select top (@to) *  
        result_set
        order by score desc  
    ) tt  
    order by score asc  
)  tt
order by score desc 
```

或者

b)

```
/*EDIT: nested the rank() window function and related where criteria one level deeper than
the count(*), as this gave me significant (25%) decrease in runtime with my data, and just  
kinda makes sense.*/  

select score  
from (  
    select  
        score,  
        myrank,  
        count(*) over (partition by score) frequency  
    from (
        select  
            score,  
            rank() over (order by score desc) myrank
        from result_set  
    ) tt
    where myrank <= @to
) tt  
where @from <= myrank + frequency - 1  
order by score desc 
```

我使用语法 (b) 结合以下测试 CTE 获得了我需要的结果：

```
with result_set (score) as (
    select 0.5 union all
    select 0.5 union all
    select 0.2 union all
    select 0.1 union all
    select 0.55 union all
    select 0.5 union all
    select 0.1
) 
```

但分区窗口函数需要 2 个嵌套循环和 3 个惰性假脱机运算符。有没有更有效的语法？

这是当前的实际执行计划： ![在此处输入图像描述](../Images/919e1a46ce548b511ecae179916ac2dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:43:07.963

你可以先得到最低值。然后使用顶部关系进行常规分页，但包括等于底部值的值：

```
DECLARE @pageSize int = @to - @from + 1

DECLARE @bottomValue <datatype> = 
(
     SELECT MIN(score)
     FROM 
     (
          SELECT TOP(@from) score
          FROM <TABLENAME>
          ORDER BY score DESC
     )
)

SET @from = @from - 1

SELECT TOP (@pageSize) * WITH TIES --TopTies
FROM <TABLENAME>
WHERE <COLUMN_ID> NOT IN
                (
                                SELECT TOP (@from) <COLUMN_ID>
                                FROM <TABLENAME>
                                ORDER BY score DESC
                )
ORDER BY score DESC

UNION

SELECT *
FROM <TABLENAME>
WHERE score = @bottomValue --BottomTies 
```

使用此查询的好处是，对于第一页，您将获得更快的响应时间（更少的读取）。缺点是随着@from 的增加，读取也会增加。但是，我认为如果您使用诸如 row_number 或 rank 之类的函数类型，则必须评估所有表数据，无论它是第一页还是最后一页。

另一种方法，不确定是否最适合您的情况，是将 lastvalue 发送到 sp：

```
--Parameter
@lastScore <datatype> = null

--Logic

SELECT TOP(@to) * WITH TIES
FROM [TABLENAME]
WHERE score < @lastScore OR @lastScore IS NULL -- opt1
--WHERE score <= @lastScore OR @lastScore IS NULL opt2
ORDER BY score DESC 
```

# android - 用于 2 个或更多活动的 Android 通过倒数计时器

> ID：14703117
> 
> 赞同：0
> 
> 时间：2013-02-05T08:33:31.037
> 
> 标签：android, countdowntimer

我正在尝试将活动 1 中的 countdownTimer 值传递给活动 2，并从活动 1 中获得的值启动活动 2 中的倒数计时器，但我不知道如何为活动 2 中的计时器作为变量，这是我的活动 1 代码

```
 new CountDownTimer(20000, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);

        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start();

    next.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = new Intent(MainActivity.this, Page2.class);
            i.putExtra("timervalue", tv.getText());
            startActivity(i);
        }

    }); 
```

这是活动 2 中的代码

```
 Bundle bundle = getIntent().getExtras();  
    long value = Long.parseLong(bundle.getString("timervalue"));
    new CountDownTimer(value, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);
        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start(); 
```

我还尝试通过使用 Intet 而不是 Bundle 来制作这样的活动 2

```
 Intent results = this.getIntent();
    String s = results.getExtras().getString("timervalue");
    long value = Long.parseLong(s);

    new CountDownTimer(value, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);
        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start(); 
```

我认为当我 putExtra 和 getExtra 时出现错误但我不确定，我真的是 java 的初学者。所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:44:58.173

您的额外计时器值是一个字符串（“剩余秒数：” + 剩余秒数）。您不能将此字符串转换为长字符串。您可以尝试以下方法：

```
String timeValueStr = tv.getText().toString().replace("seconds remaining: ", "");
long value = Long.parseLong(timeValueStr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:46:21.537

这里的问题是您将 a `String`in extras 放入`Activity1`，然后尝试`Long`从`Bundle`另一端获取 a 。将值作为 a 传递`String`很好，但是您需要将其解析为`Long`in `Activity2`。所以代码应该是这样的：

```
Bundle bundle = getIntent().getExtras();  
    long value = Long.parseLong(bundle.getString("timervalue")); 
```

希望这可以帮助。

# java - 获得正确的编码

> ID：14703121
> 
> 赞同：0
> 
> 时间：2013-02-05T08:33:43.170
> 
> 标签：java, encoding, character-encoding

假设我有一个包含 Base64 文本的 byte[]。

我想用这个文本结束创建一个字符串：

```
 str = new String(text,"charset"); 
```

当我创建新字符串时，我如何确定我没有从原始文本中删除信息。

我的意思是我如何确定在执行新字符串（文本，“字符集”）时传递了正确的字符集。

如果原始编码是“cp-1255”并且我正在做 str = new String(text,"UTF-8") 我可能会破坏文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:42:26.173

首先，您需要使用解密/解码字节

```
BASE64Decoder decoder = new BASE64Decoder();
byte[] decodedBytes = decoder.decodeBuffer(encodedBytes); 
```

然后你需要[从字节中发现字符编码](https://stackoverflow.com/questions/9617445/discover-the-character-encoding-from-byte)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:44:33.337

我认为，您需要检查[Java 中的编码转换](https://stackoverflow.com/questions/229015/encoding-conversion-in-java)

为了不破坏原始文本，您还需要以正确的编码读取输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:15:05.833

您需要知道字符编码，这取决于 Base64 的来源。此外，您必须使用正确的编码，如果 Base64 不代表 UTF-8 中的二进制数据，那么使用 UTF-8 只会返回垃圾或抛出异常。

在这种情况下，您需要执行以下操作：

```
str = new String(bytes, "Windows-1255"); 
```

`bytes`解码 base64 字符串产生的字节数组在哪里。

# java - selectOneMenu Primefaces 中的分组项目

> ID：14703126
> 
> 赞同：1
> 
> 时间：2013-02-05T08:34:02.077
> 
> 标签：java, jsf, jsf-2, primefaces, selectonemenu

我决定在primefaces的selectOneMenu中使用组selectItems并遇到问题我看到我的问题的决定[如何在selectOneMenu中对selectItems进行分组](https://stackoverflow.com/questions/14626764/how-to-group-selectitems-in-selectonemenu)但它对我没有帮助

当我使用`<p:selectOneMenu>`它时它不行并生成这样的html

```
<div id="manageTournament:gender" class="ui-selectonemenu ui-widget ui-state-default ui-corner-all ui-helper-clearfix">
<div class="ui-helper-hidden-accessible"><select id="manageTournament:gender_input"
                                                 name="manageTournament:gender_input">
    <option value="">German Cars</option>
    <option value="">American Cars</option>
</select></div> 
```

但是我用`<h:selectOneMenu>`的时候没问题

```
<select id="manageTournament:gender" name="manageTournament:gender" size="1">
<optgroup label="German Cars">
    <option value="BMW">BMW</option>
    <option value="Mercedes">Mercedes</option>
    <option value="Volkswagen">Volkswagen</option>
</optgroup>
<optgroup label="American Cars">
    <option value="Chrysler">Chrysler</option>
    <option value="GM">GM</option>
    <option value="Ford">Ford</option>
</optgroup>
</select> 
```

我的 xhtml 页面

```
<h:form id="manageTournament">
            <f:event type="preRenderView" listener="#{adminTournamentController.setConditions(false, 1)}"/>
            <p:wizard id="wizard" widgetVar="wiz" style="display: inline-block; width:600px;"
                      flowListener="#{adminTournamentController.onFlowProcess}" nextLabel="#{msg.next_button}" backLabel="#{msg.back_button}">

                <p:tab id="competitionId" title="#{msg.add_tournament}">
                    <p:panel header="#{msg.info_about_tournament}">
                        <h:panelGrid columns="3" olumnClasses="label, value" styleClass="grid">
<p:outputLabel value="#{msg.age_category}" for="gender_edit"/>
                            <p:selectOneMenu  id="gender_edit"
                                             value="#{adminTournamentController.genderAgeId}"
                                             rendered="#{not empty adminTournamentController.tournamentBean.teams}"
                                             disabled="true">
                                <f:selectItems value="#{adminTournamentController.genderAgeList}"/>
                            </p:selectOneMenu>

                            <p:selectOneMenu id="gender"
                                             value="#{adminTournamentController.genderAgeId}"
                                             rendered="#{empty adminTournamentController.tournamentBean.teams}">
                                <f:selectItems value="#{adminTournamentController.genderAgeList}"/>
                            </p:selectOneMenu>
                             </p:panel>
                </p:tab>
                <!-- others tabs -->          

            </p:wizard>
</h:form> 
```

需要将 selectOneMenu 与分组一起使用，我[在 Primefaces 中找到其他文章 OptionGroup-support for SelectOneMenu](https://stackoverflow.com/questions/11774348/optiongroup-support-for-selectonemenu-in-primefaces)

但是没有人帮助这个人。有可能解决我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:59:57.103

我可以重现它。

![在此处输入图像描述](../Images/2b7a2d841ed8d821c666e8d8404bc87f.png)

这显然是 PrimeFaces 3.4.2 中的一个错误。它适用于本周刚刚发布的[PrimeFaces 3.5 。](http://primefaces.org/downloads.html)

![在此处输入图像描述](../Images/06695457b79ceff02627893554e838fb.png)

查看源代码（bean源代码与您找到[的答案](https://stackoverflow.com/questions/14626764/how-to-group-selectitems-in-selectonemenu)相同）：

```
<o:importConstants type="org.primefaces.util.Constants" var="PrimeFaces" />
<p>PrimeFaces version: #{PrimeFaces.VERSION}</p>
<h:form>
    <p:selectOneMenu>
        <f:selectItems value="#{bean.cars}" />
    </p:selectOneMenu>
</h:form> 
```

在发布您找到的答案时它对我有用，这很可能是因为我当时使用的是 3.5 快照。

# jquery - jQuery 滑块在 Chrome 中随机显示 2*2 像素的图像

> ID：14703128
> 
> 赞同：0
> 
> 时间：2013-02-05T08:34:18.787
> 
> 标签：jquery, google-chrome, random, slideshow

我们在我们的网站上使用图像幻灯片，它随机显示和旋转上传到特定文件夹中的图像。它在 IE 和 Firefox 中运行良好，但在 Chrome 中，幻灯片随机将图像“渲染”为 2*2 像素。当我刷新页面时，问题就消失了。它发生在我认为 15% 的时间里。

我发现的事情：

*   当它发生时，它总是被渲染为 2*2 像素的最后一个图像。
*   它发生在大约 15% 的时间里。刷新时它可以工作。
*   问题不在图像中，每次都是另一个图像。
*   我在 Windows 7 64 位上使用 Chrome 24.0.1312.57 m。
*   在下面的示例中，我使用了 3 张图像。
*   它与缓存无关，我删除了几次。
*   在其他电脑上我也遇到了这个问题。

在此处查看屏幕截图：[http ://www.youtube.com/watch?v=EpxIWvrPA5M](http://www.youtube.com/watch?v=EpxIWvrPA5M)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:46:06.873

您可以将您的 jQuery.cycle 更新到最新版本 [http://malsup.github.com/jquery.cycle.all.js](http://malsup.github.com/jquery.cycle.all.js)或者 - 像这样有一个 CSS 覆盖

```
#slideshow img{
    width:900px !important;
    height:280px !important;
} 
```

# bash - sed 用于烦人的文本

> ID：14703130
> 
> 赞同：2
> 
> 时间：2013-02-05T08:34:27.390
> 
> 标签：bash, unix, sed

我有以下输出：

```
 [root@localhost:~]# setkey -DP
    (per-socket policy)
            Policy:[Invalid direciton]
            created: Feb  5 09:25:06 2013  lastused: Feb  5 10:25:10 2013
            lifetime: 0(s) validtime: 0(s)
            spid=411 seq=1 pid=4415
            refcnt=1
    (per-socket policy)
            Policy:[Invalid direciton]
            created: Feb  5 09:25:06 2013  lastused: Feb  5 10:13:21 2013
            lifetime: 0(s) validtime: 0(s)
            spid=420 seq=2 pid=4415
            refcnt=1
    192.168.111.0/24[any] 192.168.0.0/24[any] any
            out prio def ipsec
            esp/tunnel/94.243.123.241-89.28.12.86/require
            created: Feb  5 09:25:13 2013  lastused: Feb  5 09:25:44 2013
            lifetime: 0(s) validtime: 0(s)
            spid=441 seq=3 pid=4415
            refcnt=1
    192.168.0.0/24[any] 192.168.111.0/24[any] any
            in prio def ipsec
            esp/tunnel/89.28.12.86-94.243.123.241/require
            created: Feb  5 09:25:13 2013  lastused:
            lifetime: 0(s) validtime: 0(s)
            spid=448 seq=4 pid=4415
            refcnt=1
    192.168.0.0/24[any] 192.168.111.0/24[any] any
            fwd prio def ipsec
            esp/tunnel/89.28.12.86-94.243.123.241/require
            created: Feb  5 09:25:13 2013  lastused:
            lifetime: 0(s) validtime: 0(s)
            spid=458 seq=0 pid=4415
            refcnt=1 
```

我只想从中得到这一行：

```
 192.168.111.0/24 192.168.0.0/24 
```

不知道它行的位置

我已经进行了以下正则表达式构造，但它们不起作用：

```
 [root@localhost:~]# setkey -DP | sed -rne 's/^(([0-9]{1,3}\.){3}[0-9]{1,3})(\/[0-9]{1,2}).*(([0-9]{1,3}\.){3}[0-9]{1,3})(\/[0-9]{1,2})/\1\2\3\4/p'
    192.168.111.0111./242.168.0.0[any] any
    192.168.0.00./242.168.111.0[any] any
    192.168.0.00./242.168.111.0[any] any

    [root@localhost:~]# setkey -DP | sed -rne 's/^(([0-9]{1,3}\.){3}[0-9]{1,3}\/[0-9]{1,2}).*(([0-9]{1,3}\.){3}[0-9]{1,3}\/[0-9]{1,2})/\1\2/p'
    192.168.111.0/24111.[any] any
    192.168.0.0/240.[any] any
    192.168.0.0/240.[any] any 
```

错误在哪里？

提前谢谢你， Evgheni

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:13:37.717

如果您想使用`sed`，那么 Thors 的答案就足够了。但是，假设您在文件中的第一个模式匹配之后，您可以简单地使用`grep`and `xargs`：

```
< file grep -m 1 -oE "([0-9]{1,3}[\./]){4}[0-9]{1,2}" | xargs -n 2 
```

结果：

```
192.168.111.0/24 192.168.0.0/24 
```

如果你在所有比赛之后，放下`-m 1`旗帜。HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:47:58.727

我宁愿单独找到每组数字，可能是这样的：

```
sed -rn 's|[^0-9]*(([0-9]{1,3}\.){3}[0-9]{1,3}/[0-9]{1,2})|\1\n|g; s/\n[^\n]*$//; s/\n/ /gp' 
```

输出：

```
192.168.111.0/24 192.168.0.0/24
192.168.0.0/24 192.168.111.0/24
192.168.0.0/24 192.168.111.0/24 
```

但是，如果您想匹配这对组，您可以将第二个正则表达式更改为：

```
sed -rne 's/^(([0-9]{1,3}\.){3}[0-9]{1,3}\/[0-9]{1,2})[^0-9]*(([0-9]{1,3}\.){3}[0-9]{1,3}\/[0-9]{1,2}).*/\1 \3/p' 
```

1.  使用否定组`[^0-9]*`在数字组之间进行非贪婪匹配。
2.  最后添加`.*`以匹配数字组之后的所有内容。
3.  您想用第一个和第三个反向引用（`\1`和`\3`）替换所有内容。反向引用根据其起始括号的位置编号。

# xcode - Xcode。UITextField 自定义键盘：箭头按钮

> ID：14703134
> 
> 赞同：0
> 
> 时间：2013-02-05T08:34:46.337
> 
> 标签：xcode, cursor, uitextfield, move

有点需要你的帮助。我制作了一个自定义键盘并将其添加到我的 UITextFields.inputView 中。一切正常。但是我在制作用于在字段中左右移动光标的按钮时遇到了一些问题。实际上，我制作了它们并且它们起作用了。但是，TextField 本身并不能正确显示光标位置的变化。如果文本超出字段范围，并且我将光标移出字段范围，则字段本身不会刷新。我的意思是光标完全按照它必须的方式移动，但它超出了字段的可见区域。那么问题来了，如何让 UITextField 刷新呢？

发布我的按钮代码，它将光标向左移动：（就像在 x 位置选择长度为 0 的文本一样）

// object - 是我的 UITextField //pos - 光标的位置

```
-(IBAction)moveLeft:(UIButton*)sender{
UITextRange *selectedRange = [object selectedTextRange];
int pos = [object offsetFromPosition:object.endOfDocument toPosition:selectedRange.start];
if ([object.text length]+pos>0){
        NSRange range= NSMakeRange([object.text length]+pos-1, 0);

        UITextPosition *start = [object positionFromPosition:[object beginningOfDocument]
                                                      offset:range.location];
        UITextPosition *end = [object positionFromPosition:start
                                                    offset:range.length];
        [object setSelectedTextRange:[object textRangeFromPosition:start toPosition:end]];
        **[self updateTextField];**
    }    
} 
```

如何制作这个“updateTextField”方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:58:02.637

我最近在使用 PKCustomKeyboard 时实际上是这样做的。

```
- (IBAction)leftArrowPressed:(id)sender
{
    [[UIDevice currentDevice] playInputClick];
    UITextRange *selectedRange = [(UITextField *)self.textView selectedTextRange];
    UITextPosition *startPosition = [(UITextField *)self.textView positionFromPosition :[(UITextField *)self.textView beginningOfDocument] offset : 0];

    if (![(UITextField *)self.textView offsetFromPosition : selectedRange.start toPosition : startPosition] == 0)
    {
        // Calculate the new position, - for left and + for right
        UITextPosition *newPosition = [(UITextField *)self.textView positionFromPosition : selectedRange.start offset : -1];

        // Construct a new range using the object that adopts the UITextInput, our textfield
        UITextRange *newRange = [(UITextField *)self.textView textRangeFromPosition : newPosition toPosition : newPosition];

        // Set new range
        [(UITextField *)self.textView setSelectedTextRange : newRange];
    }
} 
```

您需要参考 UIInputView 的 TextView。（PKCustomKeyboard 这样做）

```
@property (strong) id<UITextInput> textView; 
```

# android - 如何从 XML 读取数据并显示到 ListView？

> ID：14703135
> 
> 赞同：1
> 
> 时间：2013-02-05T08:34:50.743
> 
> 标签：android, xml, xml-parsing

我是 XML 新手，我想从 XML 读取数据，我有以下 XML 文件格式。

```
<country>
<coordinates>
    <x-y>
        <x>150</x>
        <y>160</y>
        <cities>
            <city>Mumbai</city>
            <photos>
                <image>
                    <url>Mumbai 1</url>
                    <description>
                        <english>this 1</english>
                        <arabic>this arabic 1</arabic>
                    </description>
                </image>
                <image>
                    <url>Mumbai 2</url>
                    <description>
                        <english>this 2</english>
                        <arabic>this arabic 2</arabic>
                    </description>
                </image>
                <image>
                    <url>Mumbai 3</url>
                    <description>
                        <english>this 3</english>
                        <arabic>this arabic 3</arabic>
                    </description>
                </image>
                <image>
                    <url>Mumbai 4</url>
                    <description>
                        <english>this 4</english>
                        <arabic>this arabic 4</arabic>
                    </description>
                </image>
            </photos>
        </cities>
    </x-y>
    <x-y>
        <x>155</x>
        <y>165</y>
        <cities>
            <city>Delhi</city>
            <photos>
                <image>
                    <url>Delhi 1</url>
                    <description>
                        <english>this 1</english>
                        <arabic>this arabic 1</arabic>
                    </description>
                </image>
                <image>
                    <url>Delhi 2</url>
                    <description>
                        <english>this 2</english>
                        <arabic>this arabic 2</arabic>
                    </description>
                </image>
                <image>
                    <url>Delhi 3</url>
                    <description>
                        <english>this 3</english>
                        <arabic>this arabic 3</arabic>
                    </description>
                </image>
                <image>
                    <url>Delhi 4</url>
                    <description>
                        <english>this 4</english>
                        <arabic>this arabic 4</arabic>
                    </description>
                </image>
            </photos>
        </cities>
    </x-y>
    <x-y>
        <x>160</x>
        <y>175</y>
        <cities>
            <city>Jammu</city>
            <photos>
                <image>
                    <url>Jammu 1</url>
                    <description>
                        <english>this 1</english>
                        <arabic>this arabic 1</arabic>
                    </description>
                </image>
                <image>
                    <url>Jammu 2</url>
                    <description>
                        <english>this 2</english>
                        <arabic>this arabic 2</arabic>
                    </description>
                </image>
                <image>
                    <url>Jammu 3</url>
                    <description>
                        <english>this 3</english>
                        <arabic>this arabic 3</arabic>
                    </description>
                </image>

            </photos>
        </cities>
    </x-y>
</coordinates> 
```

我可以使用以下代码读取城市名称：

```
 public static Boolean getCityList(InputStream inputstream) {
    try {
        Log.e("getCityList", "Comming");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = null;
        try {
            db = dbf.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Document doc = null;
        try {
            doc = db.parse(new InputSource(inputstream));
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("cities");

        if (nodeList.getLength() > 0) {
            Cities.initilize();
            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);
                Element fstElmnt = (Element) node;
                NodeList nameList = fstElmnt.getElementsByTagName("city");
                Element nameElement = (Element) nameList.item(0);
                nameList = nameElement.getChildNodes();
                Log.e("City Name : ", ""+ ((Node) nameList.item(0)).getNodeValue().toString());
                Cities cities = new Cities(((Node) nameList.item(0)).getNodeValue().toString());
                Cities.sCityList.add(cities);
                }
            }
            return true;
        }
        return false;

    } catch (ClientProtocolException e) {
        return false;
    } catch (IOException e) {
        return false;
    }
} 
```

上面的代码从列表中读取城市。现在我想从图像中读取 url 以及它在这个函数中的描述。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:45:07.143

现在您必须选择`<image>`作为父节点，因为`<url>`它是`<image>`标签的子节点。像这样

```
NodeList nodeList = doc.getElementsByTagName("image");

    if (nodeList.getLength() > 0) {
        Cities.initilize();
            Node node = nodeList.item(0);
            Element fstElmnt = (Element) node;
            NodeList nameList = fstElmnt.getElementsByTagName("url");
            // Store it in your city's arraylist

        } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:39:42.137

我建议你使用[SimpleXML](http://simple.sourceforge.net/)，它是一个轻量级的 android 解析库，它可以让你很容易地解析 XML 数据。

# asp.net-mvc - orchardcms/mvc 发布时的空值

> ID：14703139
> 
> 赞同：1
> 
> 时间：2013-02-05T08:35:02.017
> 
> 标签：asp.net-mvc

```
public class Address
    {
        public string Street { get; set;}
    }

public class MyModel
    {
        public string Name { get; set;}
        public Address MyAddress { get; set;}
    }

public class MyController : Controller
{
        [HttpPost]
        public JsonResult DoStuff(MyModel model)
        {
            // model.Name has its value
            // model.MyAddress is there, but its .Street is always null
            // Do stuff
        }
} 
```

这就是我发布到控制器的方式

```
var data =
    {
        __RequestVerificationToken: $("input[name=__RequestVerificationToken]").val(),
        Name: "Arnold",
        MyAddress: 
        {
               Street: "my address"
        }
    }

$.ajax({
        type: 'POST',
        url: "/myroute/dostuff", //Yes i should not use the hardcoded url but this is just for show
        data: data,
        async: false,
        success: function (result) {
            // ...
        },
        dataType: 'json',
    }); 
```

看着提琴手它发布了正确的数据。如果我看一下 ModelState，它只有一个键，“名称”。

**编辑：**

如果我这样做：

```
public class MyController : Controller
{
        [HttpPost]
        public JsonResult DoStuff(FormCollection formCollection)
        {
            // formCollection has all the data..
            // so i guess its the binding? :o any ideas how to fix?
            // Do stuff
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:06:43.433

如果你`UpdateModel(model)`在 action 方法的第一行调用会发生什么？这可能是因为模型绑定没有隐式获取 Address 属性，您需要给它一个显式的轻推。

# android - 使用 2 个条件过滤 AutoCompleteTextView 结果

> ID：14703143
> 
> 赞同：0
> 
> 时间：2013-02-05T08:35:17.240
> 
> 标签：android, autocompletetextview

我有一个 RTL 应用程序，它在 AutoCompleteTextView 小部件中显示客户名称。现在我的 toString() 是这样的，所以它会根据名称过滤结果。现在我想更进一步，允许我的用户根据名称和代码搜索客户。我该怎么做。我正在使用 Android 版本 2.3.3。

```
public String toString() {
    return getName;
} 
```

=========

```
 private void loadCustomers() {
    Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                customers = getConnection().getCustomers();
                BaseKaizenActivity.getStorageManager().setCustomers(
                        customers);
                Log.d("---", "loaded customers: " + customers.size());

                handleSuccess(customers);
            } catch (Exception exc) {
                Log.d("--- ERROR ---", exc.getMessage());
                handleException(exc.getMessage());
            }
        }
    });
    thread.start();
} 
```

=========

```
private void handleSuccess(final List<Customer> customers) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {

            final ArrayAdapter<Customer> customerSpinner = new ArrayAdapter<Customer>(
                    MainMenuActivity.this,
                    android.R.layout.simple_spinner_item, customers);
            customerSpinner
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            customerTextView.setAdapter(customerSpinner);

            if (progressDialog != null) {
                progressDialog.dismiss();
                progressDialog = null;
            }
        }
    });
} 
```

==========

```
@Override
public List<Customer> getCustomers() {
    List<NameValuePair> params = new ArrayList<NameValuePair>(1);
    params.add(new BasicNameValuePair("action", "customer"));
    try {
        String response = executeHttpPost(params);
        String[] result = split(response);

        List<Customer> customers = new ArrayList<Customer>();

        for (int i = 2; i < result.length; i += 18) {
            String id = result[i + 0];
            String code = result[i + 1];

            String name = result[i + 3];

            String address = result[i + 4];
            String type = result[i + 5];

            String phoneNo = result[i + 6];
            String mobileNo = result[i + 7];
            String faxNo = result[i + 8];       

            Customer customer = new Customer(id, code, name, address, type,phoneNo,mobileNo,faxNo);
                    customers.add(customer);

        }
        Log.d("----", "" + customers.size());           
        return customers;
    }
    catch (Exception exc) {
        Log.e("----", exc.getMessage(), exc);
        throw new ConnectionException(exc.getMessage());
    }
} 
```

# rest - RESTful api 登录安全持久化

> ID：14703148
> 
> 赞同：0
> 
> 时间：2013-02-05T08:35:34.823
> 
> 标签：rest, restkit

我正在为 IOS 应用程序开发 RESTFul api，但我遇到了安全问题。
我有很多问题，所以我把它贴在这里得到专业人士的回答。

所以，第一个问题是关于登录的，我将使用 RESTKit 对我的用户进行身份验证，但是当用户登录时，我如何检查用户是否有权从 REST 获取资源？

我必须使用 Token 什么的？
用户登录时创建会话？
如果用户登录并有权读取/编辑资源，请检查每个请求？

我不知道我的问题是愚蠢的还是我错过了 RESTFul api 使用中的某些内容，但是否有人可以帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:58:40.543

有关授权的信息可以在这个[问题](https://stackoverflow.com/questions/13853073/how-do-i-set-basic-authentication-with-restkit-0-20-0)中找到。当 RestKit 与服务器连接时，服务器在响应的标头中收到的令牌将保存在缓存中。

因此，如果您重新连接或使用 GET/POST 与相同的对象管理器（并且会话仍然有效），则无需重新授权 - 但它是必需的，RestKit 会为您完成。

`requestCache`您可以通过设置对象管理器的来处理缓存。

# c# - 条码的数字算法

> ID：14703151
> 
> 赞同：0
> 
> 时间：2013-02-05T08:35:38.117
> 
> 标签：c#, algorithm, barcode

我有这种序列码，应该作为条形码打印在身份证上，但问题是这些数字的条形码大于身份证宽度。

*   9913010001CHEREV0215
*   9913010002CHEREV0215
*   9913010003CHEREV0215
*   9913010004CHEREV0215

是否有可能通过使用算法生成固定位数来减少位数，

例如，上面的数字有 20 个字符，使用算法可以减少到 10 个字符。

不仅我需要从上面的条形码（10个字符代码）中反转原始代码（20个字符）。

是否有任何算法可以从 C# 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:55:15.170

条形码背后并没有真正的算法。大多数条形码只是一系列行，其中每一对行代表一个字符。条形码通常是通过以特殊的条形码字体打印文本来获取的。

**打印更小**：
您可以打印更小，或使用不同类型的条形码。但请注意，并非所有类型的条形码都支持所有这些字符。有些支持整个字母表，而有些则只支持数字。

此外，您可以打印多小也有限制。对于大多数条码，都有关于最小尺寸、最小打印分辨率和需要在条码周围打开的最小空白量的官方指南。

低于这些限制将影响条形码的可读性，使使用它们的人更难。但是你可以通过去除一两毫米的高度来逃脱，如果你的纸张质量好并且打印分辨率足够高，你可能会逃脱一点点。

**减少字符串长度**：
减少字符串的长度是可能的，但请记住，您[不能将每个 20 字节的字符串缩短为 10 字节](http://en.wikipedia.org/wiki/Pigeonhole_principle)。如果您对字符串有特定的了解，则可以使用它。例如，如果“CHEREV”是一个常数部分，人们可能想知道它是否应该是条形码的一部分。[编辑]最初我忽略了你说它不是恒定的评论。

**仅限数字**：
字母条形码具有更多字符，因此通常更宽。如果您可以将批次代码文本更改为数字，那么您可以使用更窄的仅限数字的条形码。

# php - 为 Doctrine 自动生成 get set 方法

> ID：14703156
> 
> 赞同：5
> 
> 时间：2013-02-05T08:36:00.203
> 
> 标签：php, doctrine, getter-setter, auto-generate

我正在使用[Doctrine](http://www.doctrine-project.org/)，我必须制作很多模型，如果我不必手动完成所有操作，那就太好了。

我这样设置和属性：

```
/**
     * @var string $name
     *
     * @Column(name="Name", type="string", length=100, nullable=false)
     */
    private $name; 
```

get & set 方法是由信息制成的，这些信息完全包含在属性声明中。那么有没有人知道任何工具可以从属性声明中生成如下所示的 get set 方法。

```
 /**
     * Set name
     *
     * @param string $name
     * @return User
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    } 
```

在学说文档中，我找到[了这个](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/tools.html#entity-generation)工具（实体生成），但我无法理解我应该做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:38:38.853

1.  导航到 symfony2 项目的根目录
2.  在命令行 shell 中键入：`php app/console doctrine:generate:entities`
3.  享受您自动生成的 getter 和 setter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T00:01:08.030

因为你没有提到 Symfony，所以运行

```
vendor/bin/doctrine orm:generate:entities entities/ 
```

从项目的根目录（替换`entities/`为存储实体类的目录）。

# c# - 具有依赖注入的 WPF

> ID：14703159
> 
> 赞同：0
> 
> 时间：2013-02-05T08:36:15.643
> 
> 标签：c#, wpf, xaml, dependency-injection

我创建了一个附加属性`<Window>`，我可以使用它添加到类型的对象列表中`FooBase`。它可以正常工作，但问题是我想将这些项目链接到我的依赖注入系统（DI）。要么`Foo`从 DI 中检索每个，要么将每个创建`Foo`的都添加到 DI。

[Ninject](http://www.ninject.org)中的依赖注入

```
Bind<IFoo1>().To<Foo1>.InSingletonScope();
Bind<IFoo2>().To<Foo2>.InSingletonScope();
Bind<IFoo3>().To<Foo3>.InSingletonScope(); 
```

XAML

```
<Window ...>
   <xx:Host.Foos>
      <Foo1 ... />
      <Foo2 ... />
      <Foo3 ... />
   </xx:Host.Foos>
   ...
</Window> 
```

我想怎么做

```
class MainWindowViewModel
{
   // The same instance of IFoo1 as in the XAML code.
   public MainWindowViewModel(IFoo1 foo1)
   {}
} 
```

# android - Android：质量差的背景

> ID：14703162
> 
> 赞同：0
> 
> 时间：2013-02-05T08:36:26.927
> 
> 标签：android, background, bitmap, bitmapfactory

我想问为什么即使我设置了选项，背景质量仍然很低？我的代码：

```
class GameView extends SurfaceView implements SurfaceHolder.Callback {

 GameThread thread;

BitmapFactory.Options options = new BitmapFactory.Options();
int screenW;
int screenH;
int bgrW;
int bgrH;
Bitmap bgr;

public GameView(Context context, AttributeSet attrs) {
super(context);

    options.inPreferredConfig = Bitmap.Config.ARGB_8888;
    options.inSampleSize = 1;
    options.inScaled = false;
    options.inDither = false;
    bgr = BitmapFactory.decodeResource(getResources(), R.drawable.gamebg, options);
    getHolder().addCallback(this);
    setFocusable(true);
    }

@Override
public void onSizeChanged (int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    screenW = w;
    screenH = h;
    bgr = Bitmap.createScaledBitmap(bgr, w, h, true);
    bgrW = bgr.getWidth();
    bgrH = bgr.getHeight();
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawBitmap(bgr, 0, 0, null);
} 
```

由于在这个论坛上找到了一些答案，上面的代码应该是正确的。我想知道 onDraw() 或 onSizeChanged() 区域是否缺少某些声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:50:47.003

尝试使用九补丁图像而不是简单图像：转到

```
android-sdk\android-sdk-windows\tools\draw9patch 
```

并选择您想要的图像并将它们转换为九个补丁现在它们看起来很好

# database - 数据库规范化理论任务

> ID：14703164
> 
> 赞同：0
> 
> 时间：2013-02-05T08:36:34.353
> 
> 标签：database

我大学的数据库存在理论问题，不知道如何解决。任务：这些关系模式的正常形式是（或不是）：

```
a)R=(U, F) where
U = {M,U,K}
F = {MU → K, K → M} 

b)R=(U,F) where 
U = {A,B,C,D} 
F = {AB → C, B → D, BC → A}

c)R=(U,F) where
U = {S, T, D, K}
F = {TS → D, SD → K} 
```

将感谢任何来源或信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T19:31:38.700

a) 似乎在 3NF

b) 具有部分依赖 B->D，因此在 1NF 中

c) 在 2NF 中

# jquery - jQuery动态CSS属性赋值

> ID：14703166
> 
> 赞同：0
> 
> 时间：2013-02-05T08:36:37.753
> 
> 标签：jquery, internet-explorer, google-chrome, css, safari

在 jQuery 中动态分配 CSS 属性非常简单。例如

```
$('#element').css('fontWeight','bold'); 
```

但是，我目前需要做的动态分配比较混乱。为了让背景渐变分配在一系列浏览器上工作，我需要做

```
background-image:-moz-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-webkit-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-o-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-ms-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);

$('#element').css('backgroundImage','value') 
```

重复调用将不起作用，因为 jQuery 只是覆盖了以前编写的版本。这还能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:42:25.480

解决方案是创建一个具有所需属性的类，将其添加到您的样式表并使用 .addClass 动态地将类分配给元素。

CSS：

```
.gradientClass{
background-image:-moz-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-webkit-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-o-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-ms-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
} 
```

查询：

```
$('#element').addClass('gradientClass'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:44:38.833

既然你用的是jQuery，为什么不用这个插件呢？ [http://archive.plugins.jquery.com/project/gradient](http://archive.plugins.jquery.com/project/gradient)

然后，您可以轻松使用它：

```
$('.gradient').gradient({ from: '003366', to: '333333' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:46:44.703

你可以上课：

```
BackgroundClass
{
background-image:-moz-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-webkit-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-o-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:-ms-linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
background-image:linear-gradient(0deg,rgba(r,g,b,a),rgba(r1,g1,b1,a1) 10%);
} 
```

并将此类添加到元素中：

```
$('#element').addClass("BackgroundClass"); 
```

# ffmpeg - Windows phone 8 霓虹内联汇编 ffmpeg

> ID：14703170
> 
> 赞同：-1
> 
> 时间：2013-02-05T08:36:41.847
> 
> 标签：ffmpeg, arm, windows-phone-8, inline-assembly, neon

> **可能重复：**
> [windows phone8 wp8 arm neon assembly](https://stackoverflow.com/questions/14670196/windows-phone8-wp8-arm-neon-assembly)

我即将将一个类似ffmpeg的项目移植到wp8（ARM）上。不幸的是，该项目的大部分内容是由具有 AT&T 格式的 arm neon 内联汇编代码（NEON inline assembly）编写的。

关于快速做到这一点的工具或方法有什么建议吗？或者我该怎么做？

我之前问过这个问题，但由于没有建设性的原因而关闭，但我不这么认为，因为我提到的是与 AT&T 的 INLINE 组装。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:22:35.710

我没有读过任何关于 WP8 sdk 的信息告诉我它允许/支持汇编代码。您将需要了解如何将程序集转换为 C++ 并将其与 Direct 3D 一起使用

# iphone - 如何在设置包中的 facebook 或 twitter 等组中显示应用程序图标、应用程序名称和版本？

> ID：14703171
> 
> 赞同：0
> 
> 时间：2013-02-05T08:36:59.383
> 
> 标签：iphone, settings.bundle

我们如何在一个组中添加带有应用程序名称和版本的应用程序图标，如下面的截图

![Twitter 设置截图](../Images/d2ea3cc54b5968820711f5c0b3e80987.png)

我尝试过以下代码。但这仅显示版本。

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PreferenceSpecifiers</key>
    <array>
        <dict>
            <key>Type</key>
            <string>PSTitleValueSpecifier</string>
            <key>DefaultValue</key>
            <string>1.0.0</string>
            <key>Title</key>
            <string>Version</string>
            <key>Key</key>
            <string>version</string>
        </dict>
    </array>
    <key>StringsTable</key>
    <string>Root</string>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T19:48:25.137

您不能这样做，设置捆绑包的功能非常有限。

# c++ - 使用 viola jones 人脸检测前的裁剪

> ID：14703172
> 
> 赞同：0
> 
> 时间：2013-02-05T08:37:04.210
> 
> 标签：c++, computer-vision, viola-jones

我正在尝试改进人脸检测，并且我正在 OpenCV 中使用 viola jones 算法的实现。我没有得到我想要的结果，所以我想在使用 cascade.detectMultiScale 函数之前进行一些预处理。我正在使用的图像包含具有某些背景的人的上半身。如果我在仅包含面部的裁剪图像上使用 cascade.detectMultiScale() 函数会有所帮助吗？

# msbuild - OpenCover 在 windows server 2008 上没有显示结果

> ID：14703176
> 
> 赞同：0
> 
> 时间：2013-02-05T08:37:17.417
> 
> 标签：msbuild, mstest, code-coverage, opencover

我正在尝试在 Windows Server 2008 R2 机器上使用 MSTest 运行 OpenCover，但总是得到空结果：

> c:\OpenCover>OpenCover.Console.exe -register:user -target:"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\MsTest.exe" -targetdir:"c:\MyApp\bin " -targetargs: /testcontainer:"C:\MyApp\Tests\bin\UnitTests.dll" -output:c:\cover.xml
> 
> Microsoft (R) 测试执行命令行工具版本 11.0.51106.1
> 
> 版权所有 (c) 微软公司。版权所有。
> 
> 请指定要运行的测试，或指定 /publish 开关以发布结果。
> 
> 对于开关语法，键入“MSTest /help”
> 
> 提交...
> 
> 无结果 - 未检测与提供的过滤器匹配的程序集这可能是由于缺少与过滤器匹配的程序集的 PDB 请查看输出文件并参考使用指南 (Usage.rtf)

PDB 文件存在于指定文件夹中，探查器 DLL 使用 regsvr（x64 和 x86）注册。已安装 Microsoft Visual C++ 2010 Redistributable Package。.NET 框架 3.5、4.5 已安装。我尝试在有和没有管理员权限的情况下运行它......

同时它在我安装了 VS 2012 的 win7 x64 机器上完美运行，所以我想我错过了一些依赖关系，或者这是一个安全问题。

删除引号和空格后，我收到了更好的结果，但仍然没有代码覆盖：

![在此处输入图像描述](../Images/8414dd3eff235f4ab4649b9d84746bac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:38:35.560

哪个版本的 OpenCover？

`The latest version should not require "Microsoft Visual C++ 2010 Redistributable Package"`

如果您使用 resvr32 注册了程序集，则不需要该`-register:user`开关。

由于您的测试看起来不像正在运行，因此您传递的参数看起来不正确（之间有空格`"-targetargs: /target..."`，请尝试：

`"-targetargs:/testcontainer:C:\MyApp\Tests\bin\UnitTests.dll"`

# jms - 如何在异步“单向”交换模式上禁用回复

> ID：14703179
> 
> 赞同：0
> 
> 时间：2013-02-05T08:37:36.247
> 
> 标签：jms, activemq, mule, asynchronous

关于 Mule 3.3 CE：

即使我有一个异步的“单向”交换模式，它也会在我真正响应之前用“空”消息向调用者回复两次。所以我得到了三个回应。前两个只是空的“废话”，然后我得到了真正的回应。

我可以禁用前两个“空”响应，然后将我的真实响应返回到我应该回复的地方。调用者为我的流的响应设置了一个 TEMP 队列。（现在它在该响应队列上得到三个响应。）

我们需要改变 ActiveMQ 中的行为吗？目前是默认设置。

```
<jms:activemq-connector name="Active_MQ_Staging" brokerURL="tcp://xxx.xxx.xxx.x:yyyy" validateConnections="true" maxRedelivery="2" doc:name="Active MQ" forceJndiDestinations="true" honorQosHeaders="true" specification="1.1" disableTemporaryReplyToDestinations="true"/>
<flow name="MyFlow2" doc:name="MyFlow2">
    <jms:inbound-endpoint queue="myQueue" connector-ref="Active_MQ_Staging" doc:name="JMS" exchange-pattern="one-way"/>
                <all doc:name="All">
                    <processor-chain>
                        <jms:outbound-endpoint queue="${queue.mule.levinforequest}" disableTemporaryReplyToDestinations="true" connector-ref="Active_MQ_Staging" doc:name="JMS"/>
                    </processor-chain>
                    <processor-chain>
                        <logger message="Leaving AppFacade" level="INFO" doc:name="Logger"/>
                    </processor-chain>
                </all>
.... 
```

编辑：好的，我没有在上面的声明中发布所有内容。

这就是我们想要做的：Mule 应用程序将收到一条 JMS 消息。发件人（如果我是正确的，它是一个无状态的 EJB MDB）将设置一些我需要随身携带的属性，并且我将添加更多属性。发件人给我一个响应的临时队列设置的名称（mule-app（在另一个流程中）将在几个其他步骤和其他集成后响应）。我将第一个 mule-flow 设置为“单向”，因为我不希望它响应。

第一个流将消息放在另一个 JMS 队列上。然后另一个 Mule 应用程序（和 muleflow）接收消息（也是单向的）并将其转换为另一种格式并将其放在另一个队列中。也许这对您没有意义，但在我们的环境中它确实如此。;-) 然后在收到“第三方”的响应后，第二个 Mule 应用收到响应并将 JMS 消息转换为我们自己的格式（我们仍然拥有这些属性）。现在将其发送到第一个 Mule 应用程序（和第二个流程）（或其他任何人）可以获取消息的主题。不，我们想回复来电者。我们有关于谁发送请求以及他希望响应到哪个队列的属性。所以所有 4 个 mule 流程（在 2 个不同的 mule 应用程序中）都设置为“单向”

所以我们的实际流程是从流程 1 到流程 3 到外部方，然后在流程 4 中获得响应，然后返回到流程 2 给调用者。

所以 Flow1->Flow3->Flow4->Flow2

骡子应用程序1：

Flow1：调用者->队列-> MuleFlow（单向）->队列

Flow2：主题-> MuleFlow（单向）-> 响应临时队列

* * *

骡子App2

Flow3：队列-> Muleflow（单向）-> 转换-> 队列-> 外部部分

Flow4：外部部分->队列-> MuleFlow（单向）->转换-​​>主题

我希望你能在这方面关注我。

我猜 Mule Studio 已经把那些“处理器链”放在那里了。记录只是“记录”。我想知道什么时候离开 Flow1 等等。仅用于日志/调试。

感谢您对此事的考虑。

/Z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:27:38.100

我不完全明白你在这里做什么。

记录器没有从消息中记录任何内容。我认为不需要全部使用，您可以这样做：

```
<jms:outbound-endpoint queue="${queue.mule.levinforequest}" disableTemporaryReplyToDestinations="true" connector-ref="Active_MQ_Staging" doc:name="JMS"/>
<logger message="Leaving AppFacade" level="INFO" doc:name="Logger"/> 
```

我也不认为需要处理器链，这可能会触发错误。尽量不要使用它们。

如果我理解错了，无论如何你都可以发现[Ricston 模块中的](https://github.com/Ricston/mule-module-ricston)*ignore-reply-all*对你有帮助。

# php - 保护网络服务器上的数据免受站点抓取者/复制者的侵害

> ID：14703181
> 
> 赞同：3
> 
> 时间：2013-02-05T08:37:47.350
> 
> 标签：php, javascript, .htaccess, .htpasswd

我在公共文件夹中的网络服务器上放置了 mp3 文件（我将其放置在公共文件夹中，以便我网站上的播放器可以访问这些文件），我不担心用户是否能够下载他可能的 MP3能够在播放器播放该文件时查看，但是我还要注意他无法查看文件的直接 url。但是我想保护这些文件免受站点抓取软件的侵害，这样 some1 就无法窃取放置在服务器上的所有文件。

问题的另一部分是：站点抓取软件的范围是什么，我可以通过为我的目录关闭索引来阻止它们，还是它们也可以访问其 url 未嵌入页面的文件？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:54:32.337

恐怕无法阻止用户获取您的文件。为了播放音频文件，用户的网络浏览器必须将其下载到他们的本地机器上。

[您可以通过使用robots.txt](http://en.wikipedia.org/wiki/Robots_exclusion_standard)或超链接上的属性来阻止符合标准的 Web 抓取器抓取文件`rel="nofollow"`，但这些解释是客户端的，因此抓取器可能会在感觉时忽略它们（我曾经写过一个webgrabber，它甚至不看这些。这主要是出于懒惰，而不是出于恶意）。

**tl;dr：**当您不希望人们下载文件时，请不要将其放在 Internet 上。

# php - PHP 结果有时不会生成一个数组，我收到此错误“无法使用字符串偏移量”

> ID：14703183
> 
> 赞同：1
> 
> 时间：2013-02-05T08:37:55.657
> 
> 标签：php, arrays, amazon

我得到一个不一致的结果，有时我得到一个数组，有时我认为我没有得到一个数组，因为它触发了这种错误：

```
Fatal error: Cannot use string offset as an array in /home/loc/public_html/mysite.com/directory/home/test.php on line 25 
```

这是我的代码：

```
$result = $response['Items']['Item'];
    $html = "";
    foreach( $result as $k => $v ){
        if(isset($v['MediumImage'])) {
            $image = "<img src='".$v['MediumImage']['URL']."' />";
        }else if(isset($v['LargeImage'])) {
            $image = "<img width='150px' height='150px' src='".$v['LargeImage']['URL']."' />";
        }else {
            $image = "<img src='css/no-image.jpg' />";
        }
        $html .= "<div class='container'>";
        $html .= "<div class='imgContainer'><a href='".$v['DetailPageURL']."'>".$image."</a></div>";
        $html .= "<h3 class='newaps'><a href='".$v['DetailPageURL']."'><span class='lrg bold'>".$v['ItemAttributes']['Title']."</span></a></h3>";
        if(isset($v['ItemAttributes']['Feature'])){
            $html .= "<div class='item-features'>";
            $html .= "<ul>";
            foreach( $v['ItemAttributes']['Feature'] as $feature ) {
                $html .= "<li>".$feature."</li>";
            }
            $html .= "</ul>";
            $html .= "</div>";
        } else {
            $html .= "<div class='item-features'>";
            $html .= "<span class='no-data'><a href='".$v['DetailPageURL']."'>More info on this item...</a></span>";
            $html .= "</div>";
        }
        $html .= "<div class='clear'></div>";
        if(isset($v['ItemAttributes']['ListPrice'])){
            $html .= "<div class='item-price'>Price: ".$v['ItemAttributes']['ListPrice']['FormattedPrice']." ".$v['ItemAttributes']['ListPrice']['CurrencyCode']."</div>";
        }
        $html .= "<div class='trackSalesRank' id='".$v['ASIN']."'>Track Sales Rank</div>";
        $html .= "</div>"; 
```

**第 25 行是** `$image = "<img src='".$v['MediumImage']['URL']."' />";`

这是 的数组值`$response`：

```
Array
(
    [OperationRequest] => Array
        (
            [HTTPHeaders] => Array
                (
                    [Header] => Array
                        (
                            [Name] => UserAgent
                            [Value] => PHP-SOAP/5.3.19
                        )

                )

            [RequestId] => 74dd6e53-5455-4852-8b19-72580b3f244d
            [Arguments] => Array
                (
                    [Argument] => Array
                        (
                            [Name] => Service
                            [Value] => AWSECommerceService
                        )

                )

            [RequestProcessingTime] => 0.319231
        )

    [Items] => Array
        (
            [Request] => Array
                (
                    [IsValid] => True
                    [ItemSearchRequest] => Array
                        (
                            [ItemPage] => 1
                            [Keywords] => B0083PWAPW
                            [ResponseGroup] => Array
                                (
                                    [0] => Images
                                    [1] => ItemAttributes
                                )

                            [SearchIndex] => All
                        )

                )

            [TotalResults] => 1
            [TotalPages] => 1
            [MoreSearchResultsUrl] => http://www.amazon.com/gp/redirect.html?camp=2025&creative=386001&location=http%3A%2F%2Fwww.amazon.com%2Fgp%2Fsearch%3Fkeywords%3DB0083PWAPW%26url%3Dsearch-alias%253Daws-amazon-aps&linkCode=sp1&tag=elson06-20&SubscriptionId=AKIAJJPPYQPVMQLOYLKQ
            [Item] => Array
                (
                    [ASIN] => B0083PWAPW
                    [ParentASIN] => B008GGCAVM
                    [DetailPageURL] => http://www.amazon.com/Kindle-Fire-HD/dp/B0083PWAPW%3FSubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB0083PWAPW
                    [ItemLinks] => Array
                        (
                            [ItemLink] => Array
                                (
                                    [0] => Array
                                        (
                                            [Description] => Technical Details
                                            [URL] => http://www.amazon.com/Kindle-Fire-HD/dp/tech-data/B0083PWAPW%3FSubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [1] => Array
                                        (
                                            [Description] => Add To Baby Registry
                                            [URL] => http://www.amazon.com/gp/registry/baby/add-item.html%3Fasin.0%3DB0083PWAPW%26SubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [2] => Array
                                        (
                                            [Description] => Add To Wedding Registry
                                            [URL] => http://www.amazon.com/gp/registry/wedding/add-item.html%3Fasin.0%3DB0083PWAPW%26SubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [3] => Array
                                        (
                                            [Description] => Add To Wishlist
                                            [URL] => http://www.amazon.com/gp/registry/wishlist/add-item.html%3Fasin.0%3DB0083PWAPW%26SubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [4] => Array
                                        (
                                            [Description] => Tell A Friend
                                            [URL] => http://www.amazon.com/gp/pdp/taf/B0083PWAPW%3FSubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [5] => Array
                                        (
                                            [Description] => All Customer Reviews
                                            [URL] => http://www.amazon.com/review/product/B0083PWAPW%3FSubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                    [6] => Array
                                        (
                                            [Description] => All Offers
                                            [URL] => http://www.amazon.com/gp/offer-listing/B0083PWAPW%3FSubscriptionId%3DAKIAJJPPYQPVMQLOYLKQ%26tag%3Delson06-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB0083PWAPW
                                        )

                                )

                        )

                    [SmallImage] => Array
                        (
                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL75_.jpg
                            [Height] => Array
                                (
                                    [_] => 75
                                    [Units] => pixels
                                )

                            [Width] => Array
                                (
                                    [_] => 75
                                    [Units] => pixels
                                )

                        )

                    [MediumImage] => Array
                        (
                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL160_.jpg
                            [Height] => Array
                                (
                                    [_] => 160
                                    [Units] => pixels
                                )

                            [Width] => Array
                                (
                                    [_] => 160
                                    [Units] => pixels
                                )

                        )

                    [LargeImage] => Array
                        (
                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL.jpg
                            [Height] => Array
                                (
                                    [_] => 500
                                    [Units] => pixels
                                )

                            [Width] => Array
                                (
                                    [_] => 500
                                    [Units] => pixels
                                )

                        )

                    [ImageSets] => Array
                        (
                            [ImageSet] => Array
                                (
                                    [SwatchImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL30_.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 30
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 30
                                                    [Units] => pixels
                                                )

                                        )

                                    [SmallImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL75_.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 75
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 75
                                                    [Units] => pixels
                                                )

                                        )

                                    [ThumbnailImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL75_.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 75
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 75
                                                    [Units] => pixels
                                                )

                                        )

                                    [TinyImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL110_.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 110
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 110
                                                    [Units] => pixels
                                                )

                                        )

                                    [MediumImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL._SL160_.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 160
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 160
                                                    [Units] => pixels
                                                )

                                        )

                                    [LargeImage] => Array
                                        (
                                            [URL] => http://ecx.images-amazon.com/images/I/51EN7cswSYL.jpg
                                            [Height] => Array
                                                (
                                                    [_] => 500
                                                    [Units] => pixels
                                                )

                                            [Width] => Array
                                                (
                                                    [_] => 500
                                                    [Units] => pixels
                                                )

                                        )

                                    [Category] => primary
                                )

                        )

                    [ItemAttributes] => Array
                        (
                            [Binding] => Electronics
                            [Brand] => Kindle
                            [CatalogNumberList] => Array
                                (
                                    [CatalogNumberListElement] => 53-000406
                                )

                            [EAN] => 2609000005244
                            [EANList] => Array
                                (
                                    [EANListElement] => Array
                                        (
                                            [0] => 2609000005244
                                            [1] => 2609000006326
                                            [2] => 2609000009471
                                            [3] => 0848719003796
                                            [4] => 2609000009136
                                            [5] => 2609000005497
                                            [6] => 2609000006364
                                            [7] => 2720320491521
                                            [8] => 2609000006388
                                            [9] => 2609000009327
                                        )

                                )

                            [Feature] => Array
                                (
                                    [0] => Stunning 1280x800 HD display with rich color and deep contrast from any viewing angle
                                    [1] => Exclusive Dolby audio and dual driver stereo speakers for crisp, booming sound without distortion
                                    [2] => Ultra-fast Wi-Fi- dual-antenna, dual-band Wi-Fi for 35% faster downloads and streaming
                                    [3] => Over 22 million movies, TV shows, songs, magazines, books, audiobooks, and popular apps and games
                                )

                            [ItemDimensions] => Array
                                (
                                    [Height] => Array
                                        (
                                            [_] => 40
                                            [Units] => hundredths-inches
                                        )

                                    [Length] => Array
                                        (
                                            [_] => 760
                                            [Units] => hundredths-inches
                                        )

                                    [Weight] => Array
                                        (
                                            [_] => 87
                                            [Units] => hundredths-pounds
                                        )

                                    [Width] => Array
                                        (
                                            [_] => 540
                                            [Units] => hundredths-inches
                                        )

                                )

                            [Label] => Amazon Digital Services, Inc
                            [ListPrice] => Array
                                (
                                    [Amount] => 19900
                                    [CurrencyCode] => USD
                                    [FormattedPrice] => $199.00
                                )

                            [Manufacturer] => Amazon Digital Services, Inc
                            [Model] => 53-000406
                            [MPN] => 0379
                            [PackageDimensions] => Array
                                (
                                    [Height] => Array
                                        (
                                            [_] => 140
                                            [Units] => hundredths-inches
                                        )

                                    [Length] => Array
                                        (
                                            [_] => 1010
                                            [Units] => hundredths-inches
                                        )

                                    [Weight] => Array
                                        (
                                            [_] => 115
                                            [Units] => hundredths-pounds
                                        )

                                    [Width] => Array
                                        (
                                            [_] => 740
                                            [Units] => hundredths-inches
                                        )

                                )

                            [PackageQuantity] => 1
                            [PartNumber] => 0379
                            [ProductGroup] => Amazon Devices
                            [ProductTypeName] => ABIS_ELECTRONICS
                            [Publisher] => Amazon Digital Services, Inc
                            [ReleaseDate] => 2012-09-14
                            [Studio] => Amazon Digital Services, Inc
                            [Title] => Kindle Fire HD 7", Dolby Audio, Dual-Band Wi-Fi, 16 GB - Includes Special Offers
                            [UPC] => 848719003796
                            [UPCList] => Array
                                (
                                    [UPCListElement] => 848719003796
                                )

                        )

                )

        )

) 
```

我知道它有点长。但是我得到的结果不一致，有时处理代码可以完美地工作，但有时会触发错误**"Cannot use string offset"**。为什么会这样？

*PS：数组响应来自亚马逊产品广告 API，我知道这不是一个重要的细节，以防你想知道 :)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:59:59.100

对于所有产品，您从亚马逊获得的响应并不相同。有些产品有一些额外的数据，有些没有这些

例如：不同产品（T恤、手机）的产品属性会有所不同

某些产品可能有报价

（如果产品有报价，它将在'报价'['项目'] ['报价']中，所以首先你检查这个偏移量，如果它不存在，从属性标签中获取价格（价格将是在亚马逊回复中显示））

因此，在您打印或处理数据之前，请检查数组中的键是否仅在键中存在。

**在你的情况下：**

```
$result = $response['Items']['Item'];
$html = "";
foreach( $result as $k => $v ){
  if($k == "MediumImage"){
      echo $v['URL'];
  }
} 
```

**你做错了**，你不会在这里得到 $v["MediumImage"] 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:43:11.317

我猜他们的反应是不一致的（就像谷歌地图 API 有时似乎是这样）。因此线

```
$image = "<img src='".$v['MediumImage']['URL']."' />"; 
```

...不会包含该`MediumImage`部分。我要做的是尝试像这样重写该行：

```
if (is_array($v['MediumImage']) && isset($v['MediumImage']) && isset($v['MediumImage']['URL'])) {
    $image = "<img src='".$v['MediumImage']['URL']."' />";
} else {
    // handle non-existing MediaImage URL here
} 
```

# javascript - Jquery/Javascript 文本框在输入内容时更改值，如果不集中则恢复

> ID：14703186
> 
> 赞同：1
> 
> 时间：2013-02-05T08:38:03.487
> 
> 标签：javascript, jquery, html, input

我不知道我应该在这个网站或谷歌中寻找什么术语，如果我的问题有重复的主题，请原谅我。真的不知道要写什么。

我将提供屏幕截图让您了解我的问题。

这是我的**文本框**，上面有（可选）值。

![在此处输入图像描述](../Images/40dfa657a83c20034c72415464dc5e99.png)

当我将光标聚焦在它上面时，文本框将处于聚焦模式（当我点击它时它没有改变（可选）的值..

![在此处输入图像描述](../Images/7a51d6b4cb7ef777814963cd33d339ca.png)

当我在文本框中输入内容时，（可选）值会消失，它会显示您正在输入的内容。

![在此处输入图像描述](../Images/8755ab7e3a3139a511a8dc45ced3f23c.png)

当我**[<-Backspace]** hello 并完全删除它时，我想要的输出是（可选）将恢复到原来的样子。

![在此处输入图像描述](../Images/dcbc9722abd2c5fa8116e74404db33b5.png)

长话短说，我有一个默认值为（可选）的文本框，当我在上面输入时，它会消失并显示您正在输入的内容，当我删除所有内容时，（可选）将会回来。

我只是对如何开始没有任何想法。如果你能帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:39:03.737

现在有一个标准的 HTML 属性：`placeholder`.

```
<input name=somename placeholder="(optional)"> 
```

它还[没有得到普遍支持](http://caniuse.com/#feat=input-placeholder)，但在我看来，这是要走的路，即使有些用户在升级他们的 IE9 浏览器之前不会看到它，因为它会让你的页面更简单、更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:46:48.387

Yoy 可以按如下方式使用占位符，但它不适用于 ie 版本：

```
<input type="text" placeholder="(optional)"> 
```

因此您可以在文本字段上添加 javascript，如下所示：

```
<input type="text" value="(optional)" onfocus="if(this.value=='(optional)'){this.value=''}" onblur="if(this.value==''){this.value='(optional)'} /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:56:28.750

您可以验证浏览器是否支持带有 JS 的输入占位符，而不是在输入中包含 JS `var support_placeholder = "placeholder" in document.createElement('input');`，然后调整您要使用的方法。

**编辑**：使用 jQuery 我会做这样的事情：

```
$(function(){
  if(!("placeholder" in document.createElement('input'))) {
    $('input').each(function(){
      var ph = $(this).attr('placeholder');
      $(this).val(ph);
      $(this).focus(function(){
        if($(this).val() == ph) { $(this).val(''); }
      }).blur(function(){
        if($(this).val() == '') { $(this).val(ph); }
      })
    })
  }
 }) 
```

例如，您可以[在此处使用 Chrome 进行尝试，](http://codepen.io/ByScripts/pen/qnzkt)然后使用 IE8。

# cocoa - 如何让 NSImage 自动缩放到 NSImageView？

> ID：14703188
> 
> 赞同：1
> 
> 时间：2013-02-05T08:38:21.863
> 
> 标签：cocoa, core-graphics

我正在尝试实现一个程序化图像，该图像由一种`draw`能够以任何分辨率绘制完美图像的方法绘制。想想一个程序化纹理，它可以调整大小以填充任何区域而无需拉伸或插值。

为此，我创建了一个`NSImageRep`实现绘图代码的自定义。此方法中的代码可以访问图像代表的大小，因此它可以为每个大小重新绘制自己。为了显示图像，我将它分配`NSImageRep`给一个`NSImage`，然后我将它传递给一个`NSImageView`。

现在的问题是`NSImage`不会调整大小。我的意思是它会拉伸并插入以填充`NSImageView`，但 的大小`NSImage`不会改变，因此它的`NSImageRep`绘图代码总是绘制成`NSImage`最初创建的大小。我可以改变的大小，`NSImage`它会

换句话说，我已经成功地实现了一个`NSImage`可以在任何尺寸下正确绘制自己（没有插值）。所以我的问题是，我如何`NSImage`自动调整大小以匹配`NSImageView`它所在的大小？

理想情况下，我想将其作为一个类别来实现，`NSImage`但我不确定如何进行。

注意我知道这听起来我只是想实现一个自定义`NSView`但大局是我试图`resizableImageWithCapInsets:`从 iOS' 复制该方法`UIImage`并为 OS X' 创建一个实现`NSImage`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T12:19:34.887

把...忘了吧`NSImageRep`

你想用的只是`NSImage`

```
+ (id)imageWithSize:(NSSize)size flipped:(BOOL)drawingHandlerShouldBeCalledWithFlippedContext drawingHandler:(BOOL (^)(NSRect dstRect))drawingHandler 
```

这将使您能够做您想做的事。

# regex - 使用正则表达式在引号中的每个大写字母之前插入空格

> ID：14703193
> 
> 赞同：2
> 
> 时间：2013-02-05T08:38:28.317
> 
> 标签：regex

这是我的问题。我有数千行喜欢跟随转换。我可以用正则表达式解决它吗？

原来的：

```
beSendToTheSpecialCustomer = new BooleanElement("SendToTheSpecialCustomer",false); 
```

至：

```
beSendToTheSpecialCustomer = new BooleanElement("Send To The Special Customer",false); 
```

感谢您的任何建议。

**编辑：** 我刚刚在 np++ 中找到了一个不完美的解决方案

寻找：

```
(\".*)([a-z])([A-Z])(.*\") 
```

用。。。来代替：

```
\1\2 \3\4 
```

然后点击“全部替换”，但每次只替换每行一个单词，所以我需要点击几次才能替换所有单词，但我可以在1分钟内完成我的工作。

**从 Placido** 找到更好的解决方案：

```
([a-z])([A-Z])(?=[^()]+,(?:false|true)\);) 
```

用。。。来代替：

```
\1 \2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:08:47.210

恐怕你不能只用 Np++ 做到这一点。但这可以使用几乎任何编程语言通过回调轻松完成。以 PHP 为例：

```
$txt = 'beSendToTheSpecialCustomer = new BooleanElement("Send To The Special Customer",false);';
echo preg_replace_callback('/new\s+\w+\s*\(\s*"(\w+)"\s*,\s*\w+\s*\)/', 
    function($match){
        return preg_replace('/([a-z])([A-Z])/', '\1 \2', $match[1]);
    },
    $txt
); 
```

* * *

编辑：

这是在 Notepad++ 中使用正则表达式的一个不完美的解决方案：

寻找

```
([a-z])([A-Z])(?=[^()]+,(?:false|true)\);) 
```

用。。。来代替

```
\1 \2 
```

# excel - 只有第一列在 CSV 生成中跳过逗号

> ID：14703195
> 
> 赞同：2
> 
> 时间：2013-02-05T08:38:38.087
> 
> 标签：excel, csv

我正在尝试从其中可以包含逗号的字符串列表中生成 csv 文件，因此我将字符串括在引号内，以让 excel 将该列视为文本类型。

但我面临的奇怪的事情是，它只适用于第一列！！！所以如果我有这样的文字

```
FirstColumn, SecondColumn
"a, b"     , secondcolumnvalue 
```

它按预期工作并返回给我

![在此处输入图像描述](../Images/731a67b261d1d2e0c36a945c362783bd.png)

但是如果我尝试使用这个文本

```
firstcolumn, secondcolumn
"a, b"     , "c, d" 
```

它返回给我这个

![在此处输入图像描述](../Images/d879f7ef50d453191a2ab48515511c28.png)

这是不正确的。

我尝试了许多组合以使其工作，例如在字符串周围放置多个引号对，仅在逗号上放置引号等，但除了第一个列之外，没有任何其他列有效。

为了检查它是否与我的代码无关，我尝试手动创建和检查文件，但结果相同。

任何想法都将是可观的！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:42:37.210

去掉值之间的空格，就像这样：

```
firstcolumn,secondcolumn
"a, b","c, d" 
```

我不知道为什么会这样，但是（经过一些测试）它似乎会在逗号前有空格`"a, b","c, d"`但如果在`,`和之间有空格`"`- `"a,b", "c,d"`- 所以我猜Excel的解析器是在查找引用条目时查找令牌`,"`。

# java - 使用 GPS 根据精度选择最佳位置坐标？

> ID：14703197
> 
> 赞同：0
> 
> 时间：2013-02-05T08:38:39.273
> 
> 标签：java, android, google-maps, gps

我想根据准确度获得最佳位置坐标，但我只使用 GPS 作为提供者。那么如何才能匹配不同位置的准确度级别呢？

我的意思是..我是否必须创建一个单独的数据结构并存储 long、lat 及其精度并将其与当前获取的精度级别详细信息相匹配？

我只有一个`Location`类型的 var。和一个单一`LocationManager`类型的 obj。

**更新：**完成。解决了这个问题。这很简单:)

我该怎么做？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:41:58.050

你为什么不试试手册？[http://developer.android.com/guide/topics/location/strategies.html#BestEstimate](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)

# sql - 当一个表没有价值时加入 3 个表

> ID：14703198
> 
> 赞同：1
> 
> 时间：2013-02-05T08:38:39.503
> 
> 标签：sql, select, join

我正在尝试加入 3 个包含用户值的表 - 他们的 id 和用户名，以及`engine4_storage_files`包含有关用户个人资料图片信息的表。如果用户尚未上传其个人资料图片，则`sf`表中没有记录 - 但我想查询所有用户，无论图片是否上传。

```
SELECT p.user_id as gledalac, sf.storage_path, 
       u.displayname, u.username
FROM engine4_pregledi p JOIN 
     engine4_storage_files sf JOIN 
     engine4_users u
WHERE p.subject_id = 1
AND   p.user_id = u.user_id
AND   sf.parent_id = u.user_id
AND   sf.parent_type =  'user'
AND   sf.type =  'thumb.icon'
AND   sf.parent_file_id = u.photo_id
order by datum desc limit 10 
```

此查询返回 3 个用户及其图片的路径，但实际上有 4 个用户要显示，但第 4 个用户没有个人资料图片 - 所以他不包含在查询结果中。

有没有办法将没有个人资料图片的第四个用户包含到查询结果中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:40:27.883

改为使用`LEFT JOIN`，

```
SELECT  p.user_id as gledalac, 
        sf.storage_path, 
        u.displayname, 
        u.username
FROM    engine4_pregledi p 
        LEFT JOIN engine4_users u 
            ON p.user_id = u.user_id
        LEFT JOIN engine4_storage_files sf 
            ON  sf.parent_id = u.user_id AND 
                sf.parent_type =  'user' AND 
                sf.type =  'thumb.icon' AND 
                sf.parent_file_id = u.photo_id
WHERE   p.subject_id = 1 
ORDER   BY datum DESC 
LIMIT   10 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# apache - IntelliJ IDEA - Flex 调试器无法连接

> ID：14703199
> 
> 赞同：1
> 
> 时间：2013-02-05T08:38:41.223
> 
> 标签：apache, apache-flex, debugging, intellij-idea, flash

当我尝试调试 flex 应用程序时，调试不起作用。我已经安装了调试播放器，playerversion.com 说我使用的是 WIN 11,4,402,287（调试播放器）。

终止应用程序后，我的 IDEA 控制台显示：

```
Adobe fdb (Flash Player Debugger) [build 21328]
Copyright (c) 2004-2007 Adobe, Inc. All rights reserved.
Waiting for Player to connect
Failed to connect; session timed out.
Ensure that:
1\. you compiled your Flash movie with debugging on, and
2\. you are running the Debugger version of the Flash Player. 
```

我在调试时进行编译，正如我所说，我使用调试播放器。

有任何想法吗？

格雷茨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:27:17.190

确保您的编译器选项没有被其他地方覆盖。只是一个疯狂的猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:31:25.877

如果您有自定义编译器配置文件，此文件将覆盖编译器选项菜单。

猜猜看，该文件中的 debug 设置为 false ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T20:13:05.163

确保端口 7935 没有被任何东西阻塞。调试通过调试播放器打开的端口进行。

请参阅此处的文档：http: [//livedocs.adobe.com/flex/3/html/help.html ?content=debugging_02.html](http://livedocs.adobe.com/flex/3/html/help.html?content=debugging_02.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T22:41:28.267

对于使用 Air 的任何人，请检查您可能正在使用的任何编译器配置文件中 airglobal.swc 的路径是否正确（我在 project.xml 中设置错误）

# iphone - 在 iPhone 中动态调整表格视图的宽度

> ID：14703202
> 
> 赞同：0
> 
> 时间：2013-02-05T08:38:48.513
> 
> 标签：iphone, objective-c, tableview

我从服务器获取 json 响应并将其显示在表格视图中。我通过创建自定义单元格来显示数据。

现在在应用程序中，我想从应用程序调整表格视图的宽度。

例如，就像我们在 microsoft excel 表中调整单元格的宽度一样。

![在此处输入图像描述](../Images/2053aa749b78511075d23a938a78c9b5.png) 谁能帮我做到这一点。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:24:26.017

正如每个人所说，您应该寻找更好的选择。

无论如何，如果这真的是你想要做的，我建议创建一个你需要的表格视图，然后将它嵌入到一个滚动视图中。通知 tableView 它不应该滚动（scrollView 将完成这项工作）。将scrollView的contentSize设置为tableView的大小，将其frame设置为屏幕的大小。如果你想点击tableViewCell，你可能需要添加一个gestureRecognizer（在StackOverflow上搜索方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:23:21.930

尝试将您的数据放入多行，

或者您可以将文本视图放在单元格上，然后将数据放入其中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:26:36.227

首先，您可以在 UITableView 完成更改宽度后更改其宽度，重新加载具有新宽度的新单元格。

# ruby-on-rails-3 - MongoDB 设置：mongo.log 权限错误？

> ID：14703204
> 
> 赞同：2
> 
> 时间：2013-02-05T08:38:55.640
> 
> 标签：ruby-on-rails-3, mongodb, osx-mountain-lion

第一次在这里运行 OSX Mountain Lion 的 Mongo 用户。

通过自制软件安装了 MongoDB。输入 mongod 后，我收到以下消息：

```
$ mongod
all output going to: /usr/local/var/log/mongodb/mongo.log
can't open [/usr/local/var/log/mongodb/mongo.log] for log file: errno:13 Permission denied 
```

将权限应用于我的 mongodb 文件夹的正确命令是什么？我是我电脑上的管理员用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:12:35.183

`chmod u+w /usr/local/var/log/mongodb/mongo.log`

授予当前用户（运行 mongo 的登录用户）对日志的写入权限。

# mysql - 如何在 SQL 的“分组依据”中获取某一行的所有值？

> ID：14703213
> 
> 赞同：0
> 
> 时间：2013-02-05T08:39:40.927
> 
> 标签：mysql, sql

我希望我的查询显示哪些条目被报告最多（哪些有效）以及给出的所有原因（哪些不起作用）。根据我当前的查询，我只得到一个原因而不是所有原因。（我尝试了函数 concat_ws()，但它似乎不是正确的）。有人可以帮忙吗？

```
SELECT `entries`.`id`, count(`reports`.`id`) AS `amount`, 
concat_ws(', ',`reports`.`reason`) AS `reasons` 
FROM `entries` 
CROSS JOIN `reports` ON (`entries`.`id` = `reports`.`entry_id`) 
GROUP BY `entries`.`id` ORDER BY `amount` DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:46:43.690

您应该使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数：

```
SELECT
  `entries`.`id`,
   count(`reports`.`id`) AS `amount`, 
   group_concat(`reports`.`reason` SEPARATOR ', ') AS `reasons` 
FROM
  `entries` CROSS JOIN `reports`
  ON (`entries`.`id` = `reports`.`entry_id`) 
GROUP BY
  `entries`.`id` ORDER BY `amount` DESC 
```

# c# - 如何将新的 DbContext 对象附加到实体？

> ID：14703217
> 
> 赞同：0
> 
> 时间：2013-02-05T08:39:55.767
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, caching

我有时会得到`The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.`

有没有办法为特定实体更新 ObjectContext？

（从以前的请求中留在我的应用程序中的一个（即我的缓存层））

# objective-c - Objective-C中类名的最大长度

> ID：14703218
> 
> 赞同：3
> 
> 时间：2013-02-05T08:40:04.903
> 
> 标签：objective-c

类名的最大长度是`objective-c`多少？我在 xcode 文档集中找不到任何提示，谷歌也没有帮助。

我目前正在编写一些运行时助手，很高兴知道我的用于类型编码的字符缓冲区是否足够大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:50:53.183

我不相信对类名大小有硬性限制，为什么会有？

Obj-C 在 C 之上运行，它将遵循他们的标准。C 中的标识符没有最大长度，如问题“[最大标识符长度](https://stackoverflow.com/questions/2352209/max-identifier-length)”中所述

您不太可能遇到超过 100 个字符的类名，但您总是可以拥有更大的缓冲区以更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:06:29.300

由于 Objective C 不是一种标准化的编程语言，这个问题无法真正得到回答。但这取决于您的编译器支持什么。我猜主要的 Objective C 编译器（Clang/LLVM、GCC）支持所有长度的类名。要找出答案，您必须查看它们的来源。但由于它们都是用 C++ 编写的，它们可能会使用 std:string 并且因此与长度无关。

我试了一下，并尝试在 Xcode 中使用 clang/llvm 编译一个具有 100.000 个字符的类名的项目，效果非常好。

所以你的缓冲区可能不够大。

# javafx-2 - JavaFX 是开源的吗？

> ID：14703220
> 
> 赞同：9
> 
> 时间：2013-02-05T08:40:06.993
> 
> 标签：javafx-2, javafx

安装 JDK 时，我在 C:\Program Files\Java\jdk1.7.xxx 文件夹中找到了 src.zip，但我找不到 javafx 源代码，我用谷歌搜索但什么也没找到（在[http://openjdk.java.net /projects/openjfx/](http://openjdk.java.net/projects/openjfx/) ) 那么，javafx 是开源的，我在哪里可以获得？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T08:56:44.507

**202 年 9 月更新**

有关更多信息，请参阅密切相关的 StackOverflow 问题：

*   [JavaFX 和 OpenJDK](https://stackoverflow.com/questions/18547362/javafx-and-openjdk)

我会关闭上述问题的副本，但它已经作为题外话关闭，我不能作为副本关闭。无论如何，到目前为止，链接的问题还没有因为离题而关闭，并且提供了更多更详细的答案，因此如果您需要更多信息，它是一个更好的地方，

**2019 年 12 月更新**

有关开源 JavaFX 的最新信息，请访问[https://openjfx.io](https://openjfx.io)。

JavaFX 当前的开源代码存储库位于[https://github.com/openjdk/jfx](https://github.com/openjdk/jfx)。

在链接的源位置，您可以找到开放 JavaFX 的许可证文件（当前此[许可证](https://github.com/openjdk/jfx/blob/master/LICENSE)与开放 JDK 的许可证相匹配）。

**上一个答案**

截至 2013 年 2 月，JavaFX 是部分开源的，在接下来的几个月内应该会变得几乎完全开源。源代码作为您在问题中链接的 open-jfx 项目的一部分托管。

Java 8 的 JavaFX 开发分支的提示清单是： [http ://hg.openjdk.java.net/openjfx/8/master/rt/file/tip](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip)

同一页面有一个 zip 链接，可让您轻松下载可用的 JavaFX 源代码作为 zip 文件。

JavaFX 源代码目前不包含在 jdk src.zip 文件中，但最终应该在 Java 8 发布之前包含。

*更新*

JavaFX 开发负责人已于 2013年[2 月发布了 JavaFX OpenSource 状态更新。](http://fxexperience.com/2013/02/february-open-source-update/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:54:27.323

简而言之，它不是开源的，因为它可以出于任何目的自由更改和分发。JavaFX 被许可供内部使用，不包括他们所谓的商业功能。

> *将商业功能用于任何商业或生产目的需要获得 Oracle 的单独许可。*

JavaFX 的许可证详细信息在[此处](http://www.oracle.com/technetwork/java/javase/terms/license/index.html)完整概述。[（此处](http://www.oracle.com/technetwork/java/javase/documentation/index.html)提供 PDF 版本）

您可以从[这里](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)获得 JavaFX 。

# mysql - MySQL/phpMyAdmin 重置根密码？

> ID：14703223
> 
> 赞同：0
> 
> 时间：2013-02-05T08:40:10.267
> 
> 标签：mysql, linux, passwords, root

我在 RHEL 上有 MySQL，还有 phpMyAdmin 界面。我有正常的 MySQL 用户访问权限，我记得但我忘记了`root`密码。

*   如何安全地重置 MySQL`root`密码？（我`root`在 O/S 上有帐户）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:44:21.357

从这里：[http ://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

停止 mysqld 并使用 --skip-grant-tables 选项重新启动它。这使任何人都可以在没有密码和所有权限的情况下进行连接。因为这是不安全的，您可能希望将 --skip-grant-tables 与 --skip-networking 结合使用以防止远程客户端连接。

使用以下命令连接到 mysqld 服务器：

```
shell> mysql 
```

在 mysql 客户端中发出以下语句。将密码替换为您要使用的密码。

```
mysql> UPDATE mysql.user SET Password=PASSWORD('MyNewPass')
    ->                   WHERE User='root';
mysql> FLUSH PRIVILEGES; 
```

FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T11:09:33.277

**视窗用户**

对我来说，在 Wonders 8 中这行得通；首先去你安装mysql的地方，我用的是wamserver，然后在`D:\Programs\wamp\bin\mysql\mysql5.6.12\bin`so下安装`cd`到那个目录，然后；

```
-> mysql UPDATE mysql.user SET Password=PASSWORD('xvpaic7q') -> WHERE User='root'

-> FLUSH PRIVILEGES 
```

# php - 带索引的php数组操作

> ID：14703224
> 
> 赞同：1
> 
> 时间：2013-02-05T08:40:12.770
> 
> 标签：php, arrays, sum

我有一个数组，每行使用 mysql 查询获取，每个包含相同的索引，它看起来如下

```
array(

    0=> array(
         'order_nr'=> 123,
         'order_date' => '2013-01-29 00:00:00',
         'prod_name' => 'prod_1',
         'prod_value' => 1200

       )

    1=> array(
         'order_nr'=> 123,
         'order_date' => '2013-01-29 00:00:00' ,
         'prod_name' => 'prod_2',
         'prod_value' => 2100
    )

) 
```

我想合并主题并计算 prod_value 的总和并在 prod_name 上创建一个新数组，最后我将拥有单个数组。我将如何在 php 中执行此操作，或者在这种情况下最好的解决方法是什么

```
array(
 'order_nr'=> 123,
 'order_date'=>'2013-01-29 00:00:00',
 'prod_name'=> array('prod_1', 'prod_2')
 'prod_value' => 3300

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:00:11.273

如果产品列表不必是数组，您可以使用 Mysql 和聚合函数。它会是这样的：

```
SELECT order_no, order_data, GROUP_CONCAT(prod_name SEPARATOR ',') as prod_name, 
    SUM(prod_value) as prod_val FROM Products WHERE ... GROUP BY order_no; 
```

如果您需要产品名称作为数组，则可以分解字符串：

```
explode(',', $row['prod_name']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:54:21.537

```
$aReturn = array();

foreach( $aData as $entry ) {
 if( empty($aReturn[$entry['order_nr']]) ) {
  $entry['prod_name'] = (array) $entry['prod_name'];
  $aReturn[$entry['order_nr']] = $entry;

  continue;
 }

 $aReturn[$entry['order_nr']]['prod_name'][] = $entry['prod_name'];
 $aReturn[$entry['order_nr']]['prod_value'] += $entry['prod_value'];
} 
```

这将分组`order_nr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:54:52.500

```
<?php

$arr = array(0=> array(
                         'order_nr'=> 123,
                         'order_date' => '2013-01-29 00:00:00',
                         'prod_name' => 'prod_1',
                         'prod_value' => 1200

                       ),
            1=> array(
                         'order_nr'=> 123,
                         'order_date' => '2013-01-29 00:00:00' ,
                         'prod_name' => 'prod_2',
                         'prod_value' => 2100
                    )

            );

$sigle_arr = array();   
foreach($arr as $val){
   $sigle_arr[$val['order_nr']]['order_nr']     = $val['order_nr'];
   $sigle_arr[$val['order_nr']]['order_date']   = $val['order_date'];
   $sigle_arr[$val['order_nr']]['prod_name'][]  = $val['prod_name'];
   $sigle_arr[$val['order_nr']]['prod_value']  += $val['prod_value'];

}
print_r($sigle_arr);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:57:48.550

使用[array_merge_recursive()](http://www.w3schools.com/php/func_array_merge_recursive.asp)

这是最好的选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:02:04.493

```
$newarray = array();
foreach($array as $v){
 if(!isset($newarray['order_nr'])){ 
 $newarray['order_nr'] = $v['order_nr'];
 }
 if(!isset($newarray['order_date'])){ 
 $newarray['order_date'] = $v['order_date'];
 }
 $newarray['prod_name'][] = $v['prod_name'];

 $newarray['prod_value'] = $newarray['prod_value'] + $v['prod_value'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:12:55.480

```
$temp = Users::find('all', array('conditions' => array('status' => array('$elemMatch' => array('fields' => array('temp')));
foreach($whichs as $which)
{
  foreach($which['temps'] as $temp)
  {
    if($temp['_id'] == $status['temp'])
    {
    array_push($tempsArray,$temp['status']);
    }
  }
} 
```

# .net - XNA 中的深度缓冲和 alpha 问题

> ID：14703230
> 
> 赞同：1
> 
> 时间：2013-02-05T08:40:50.990
> 
> 标签：.net, xna, xna-4.0, depth-buffer

我正在展示 的许多实例`BasicEffect`，每个实例都是一个“板”，随机选择四种纹理之一，部分透明或完全不透明。

我遇到的问题是，当渲染具有透明度的板时，只有已经渲染的板才能通过它显示。

很难解释一切是如何显示的，所以[这里是图像](https://dl.dropbox.com/u/10530011/web-nie-usuwac/stackoverflow-smc-depth/img.png)。

有没有比按正确顺序渲染更简单的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:28:31.900

深度缓冲区存储在该位置绘制的最顶部像素的“深度”。当您尝试在该位置绘制另一个像素时，如果它的深度值**高于**当前缓冲区中的值，它将被绘制到颜色缓冲区，并且其深度值将替换深度缓冲区中的值。但是，如果另一个像素的深度值**低于**缓冲区中的值 - 它不会被绘制并且深度缓冲区中的值保持不变。

这样做的结果是**深度缓冲区不能按预期使用透明像素**。透明像素可能只会导致颜色缓冲区的部分变化 - 但它会完全替换深度缓冲区中的值。没有办法在它“下”画。

有两种方法可以解决这个问题：

您可以使用**alpha testing**，这会导致透明像素根本不被渲染（并且不会更改深度缓冲区）。这允许几何图形通过透明区域显示，与绘制顺序无关。[缺点是这不适用于抗锯齿（这里](http://blogs.msdn.com/b/shawnhar/archive/2011/05/06/antialiasing-alpha-cutouts.aspx)对抗锯齿选项进行了很好的讨论）。

或者您可以**按从后到前的顺序对几何图形进行排序**。如果您先绘制不透明几何图形，则只需对透明几何图形进行排序。

# c# - 如何使用带有样式的 html 文件通过 iTextSharp 创建 pdf 文件

> ID：14703231
> 
> 赞同：0
> 
> 时间：2013-02-05T08:40:57.503
> 
> 标签：c#, asp.net, html, pdf, itextsharp

嗨，我想在我的**ASP.NET**应用程序中创建一个 pdf，为此我使用`iTextSharp`. 我的想法是从 HTML 文件中创建 pdf。我希望如果我点击一个`Button`我会读取一个带有背景图像和许多样式的 HTML 文件。

我的应用程序必须做..

1.  从文件夹中读取 HTML 文件`App.Data`。（使用 System.IO）
2.  使用这种样式从这个 HTML 文件中创建一个 PDF！( `using iTextSharp.text;` `using iTextSharp.text.pdf;`) 3.将 PDF 文件作为电子邮件发送。（使用 System.Net.Mail；使用 System.Net.Mime；）

我尝试创建一个 PDF，如果可以，但如果我在我的 HTML 文件中使用样式，它不会显示样式:(

这是我的代码：

```
string html;

using (StreamReader reader = new StreamReader(Server.MapPath("~/App_Data/mail.html"), System.Text.Encoding.Default))
{
    html = reader.ReadToEnd(); //here i read the html file to this string
    HTMLtoPdf(html);
}

private void HTMLtoPdf(string HTML) 
{
    Document doc = new Document();
    PdfWriter.GetInstance(doc, new FileStream(Request.PhysicalApplicationPath + "\\test.pdf", FileMode.Create));
    doc.Open();
    HTMLWorker hw = new HTMLWorker(doc);
    hw.Parse(new StringReader(HTML));
    doc.Close();

    ShowPdf("test.pdf");
}

private void ShowPdf(string s)
{
    Response.ClearContent();
    Response.ClearHeaders();
    Response.AddHeader("Content-Disposition", "inline;filename=" + s);
    Response.ContentType = "application/pdf";
    Response.WriteFile(s);
    Response.Flush();
    Response.Clear();
} 
```

例如我的 HTML 文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head>

</head><body styles="background-color:#E0E0E0; font-weight:bold; font-family:Arial; font-size:120%;">

<div>
    Test
</div>

</body></html> 
```

在此示例中，我使用背景颜色，但它不起作用:( 我只得到 HTML 文本：没有样式的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:44:54.453

你拼错了“风格”。

```
<body styles="background-color:#E0E0E0; 
```

它应该是

```
<body style="background-color:#E0E0E0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:09:13.230

你应该在这里使用 bgcolor 而不是 background-color

# asp.net-mvc - MVC：在 Ajax 调用之后，PartialView 中的 HTML 表行不会在 HTML 中呈现

> ID：14703236
> 
> 赞同：2
> 
> 时间：2013-02-05T08:41:37.243
> 
> 标签：asp.net-mvc, jquery

我的表格看起来像；

```
@model IEnumerable<SCD.ViewModels.UserLineViewModel>

@{
    ViewBag.Title = "List";
}

<h2>List</h2>

<form method="GET" action="@Url.Action("AddNewUser", "DataService")" data-scd-ajax="true" data-scd-target="#userList">
        @if (TempData["SuccessMessage"] != null)
        {
            <p class="successHighlight">@TempData["SuccessMessage"].ToString()</p>
        }
        @if (TempData["ErrorMessage"] != null)
        {
            <p class="errorHighlight">@TempData["ErrorMessage"].ToString()</p>
        }
    <p>
        <input type="search" name="searchTerm" id="searchTerm" class="newUser"
               data-scd-autocomplete="@Url.Action("AutocompleteUser", "DataService")" style = "width:300px;"/>
        <input type="hidden" id="searchId" name="searchId"/>
    </p>
    <table>
        <tr>
            <th>Forename</th>
            <th>Surname</th>
            <th>Created</th>
            <th>Administrator?</th>
            <th></th>
        </tr>
        <tbody id="userList">
        @Html.Partial("_UserLine")
        </tbody>
    </table>
</form> 
```

我的部分观点看起来像

```
@model IEnumerable<UserLineViewModel>

@Html.EditorForModel() 
```

到目前为止的编辑器模板看起来像

```
@model UserLineViewModel
<tr>
    <td>
        @Html.DisplayFor(x => x.Employee.Forename)
    </td>
    <td>
        @Html.DisplayFor(x => x.Employee.Surname)
    </td>
    <td>
        @Html.DisplayFor(x => x.UserScd.Created)
    </td>
    <td>
        @Html.EditorFor(x => x.UserScd.AdminFlag)
    </td>
    <td>
        @Html.ActionLink("Remove", "Delete", new { /* id=item.PrimaryKey */ })
    </td>
</tr> 
```

当用户从自动完成中选择一个人时，DataService 控制器上的这个方法被调用；

```
 public ActionResult AddNewUser(int searchId)
    {
        var opStatus = this.UserScdRepository.Add(searchId);
        if (!opStatus.Status)
        {
            return this.PartialView("_UserLine", new List<UserLineViewModel>());
        }

        this.TempData["SuccessMessage"] = 
            string.Format("You successfully entered the new user {0}",
                vw_EmployeesAndJobTitles.GetName(searchId)).MessageTime();
        var employeesInScd = this.EmployeeRepository.GetEmployeesInScd();
        UserLineViewModel.UserScdRepository = this.UserScdRepository;
        var userList = employeesInScd.Select(employee => new UserLineViewModel(employee)).ToList();
        return this.PartialView("_UserLine", userList);
    } 
```

连接起来的 Jquery/Ajax 看起来像；

```
var ajaxFormSubmit = function () {
    var $form = $(this);

    var options = {
        url: $form.attr("action"),
        type: $form.attr("method"),
        data: $form.serialize()
    };

    $.ajax(options).done(function (data) {
        var $target = $($form.attr("data-scd-target"));
        var $newHtml = $(data);
        $target.replaceWith($newHtml);
        $newHtml.effect("highlight");
    });

    return false;
};

var showOtherTrade = function (data) {
    $('#searchOtherTrade').val('');
    $('#otherTradeList').html(data);
};

var updateAutocompleteForm = function (event, ui) {
    var $input = $(this);

        if ($input.hasClass("newUser")) {
            $('#searchId').val(ui.item.id);
            var $form = $input.parents("form:first");
            $form.submit();
        }
        $input.attr('readonly', 'readonly');
        $input.css('font-size', '11px');
        $input.selectRange(0, 50);
    }
};

var createAutocomplete = function () {
    var $input = $(this);

    var options = {
        source: $input.attr("data-scd-autocomplete"),
        select: updateAutocompleteForm
    };

    $input.autocomplete(options);
}; 
```

现在我遇到的问题是，当我在控制器中返回 PartialView 时，数据没有呈现在 Partial View 的 HTML 中。那么我该如何解决呢？

# javascript - jQuery 手风琴多次向上滑动

> ID：14703238
> 
> 赞同：-1
> 
> 时间：2013-02-05T08:41:40.303
> 
> 标签：javascript, jquery, accordion, slidedown

我正在制作一个 jquery 手风琴，但我有一些问题

我的jQuery在一个类中搜索一个ul，如果它有一个特定的类，它会向下滑动，但它向下滑动的次数与整个导航中存在的元素ul一样多

到目前为止，这是我的 jquery 代码：

```
if($(this).has("ul").length){   
$(".menu ul li").on('click',function(e){
    $(this).addClass('open').siblings().removeClass('open').children();
    $('.menu ul li ul').slideUp();
    if($(this).parents().find(".open").length){
        $(this).children('ul').slideDown();
    }
    //$(this).parents().find(".open").children('ul').slideDown();
    e.preventDefault();
    }); 
}; 
```

这是我的html：

```
 <div class="menu">
    <a id="jump" href="#"><p>Menu</p><span class="right">&#9660;</span></a>
    <nav class="row">
        <div class="page_wrapper">
        <ul class="niveau_1">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Group</a>
                <ul class="sub-menu">
                    <li><a href="#">QHSE/Awards</a></li>
                    <li><a href="#">Vacatures/</a></li>
                </ul>
            </li>
            <li><a href="#">Nieuws &amp; Media</a>
                <ul class="sub-menu">
                    <li><a href="#">Van Moer in de media</a></li>
                    <li><a href="#">Nieuwsarchief</a></li>
                </ul>
            </li>
            <li><a href="#">Sport &amp; Events</a>
                <ul class="sub-menu">
                    <li><a href="#">Casual Friday</a>
                        <ul>
                            <li><a href="#">Inschrijving</a></li>
                            <li><a href="#">Foto's</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Thursday Lounge</a></li>
                    <li><a href="#">Triatlon</a></li>
                    <li><a href="#">Sponsoring</a></li>
                    <li><a href="#">Beurzen</a></li>
                    <li><a href="#">Kalender</a></li>
                </ul>
            </li>
            <li><a href="#">Vestigingen</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:50:43.893

只是猜测，因为我也没有 HTML 看起来......你的问题就在这里`parents()`

> 获取当前匹配元素集中每个元素的祖先，可选地由选择器过滤。

我想你需要 parent() 这里

> 获取当前匹配元素集中每个元素的父元素，可选地由选择器过滤。

```
if($(this).parent().find(".open").length){  //try this
    $(this).children('ul').slideDown();
} 
```

注意：如果您也向我们提供您的 HTML，那将很容易

# javascript - IE 中出现“SCRIPT5002 函数预期”错误

> ID：14703239
> 
> 赞同：1
> 
> 时间：2013-02-05T08:41:45.833
> 
> 标签：javascript, jquery, html, iframe

我在 Internet Explorer 7-9 中遇到了一个问题，并且出现了类似“SCRIPT5002 function expected”的错误。这是我的代码：

```
 var myDiv = document.getElementById("divId"); //this line gives me "SCRIPT5002 function expected" error.

 myDiv.style.cssText("position:absolute;z-index:999");
myDiv.appendChild(
        JavaScriptCode); 
```

那么如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:46:46.703

问题应该在第二行：

```
myDiv.style.cssText("position:absolute;z-index:999"); 
```

[`cssText`不是函数，而是属性。](http://msdn.microsoft.com/en-us/library/ie/ms533698%28v=vs.85%29.aspx)所以这样称呼它：

```
myDiv.style.cssText = "position:absolute;z-index:999"; 
```

或（我认为更好的方法，因为它更清晰）：

```
myDiv.style.position = 'absolute';
myDiv.style.zIndex = 999; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T00:57:25.417

我也得到了这个，试图检查一个变量是否是一个元素。

```
"notAnElement" instanceof Element 
```

它总是抛出`function expected`错误。

```
document.createElement("div") instanceof Element 
```

成功评估为`true`

我还没有实现它，但我的解决方案是使用 try/catch 块。

# matlab - 从数据到概率质量函数 - Matlab

> ID：14703240
> 
> 赞同：2
> 
> 时间：2013-02-05T08:41:48.640
> 
> 标签：matlab

是否有一个 Matlab 函数可以在给定数据向量的情况下建立精确的概率质量函数（或概率密度函数）？

我的意思是这样的：

```
X = [1 2 4 1 4 3 2 3 4 1];
[x px] = a_function(X)
x = 
   1 2 3 4
px = 
   0.3 0.2 0.2 0.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:46:26.187

您可以使用[`accumarray`](http://www.mathworks.com/help/matlab/ref/accumarray.html)

```
pmf = accumarray(X(:),1)./numel(X);
pmf = pmf./sum(pmf); 
```

或[`hist`](http://www.mathworks.com/help/matlab/ref/hist.html)：

```
pmf = hist(X, max(X))' ./ numel(X); 
```

或[`tabulate`](http://www.mathworks.com/help/stats/tabulate.html)：

```
t= tabulate(X);
pmf  = t(:, 3) ./ 100 ; 
```

并且可能至少还有 10 种方法可以这样做......

`px`仅用于，`px=unique(X)`或`t(:, 1)`在`tabulate`解决方案中等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:51:41.827

这是我使用的一个函数（注释`%`替换`#`为 StackOverflow 无法正确解析 Matlab）。

`accumarray`这可以使用或者`hist`在[natan 的回答](https://stackoverflow.com/a/14703303/546084)中进行整理（并且可能加快）。

```
function [vals freqs] = pmf(X)
#PMF Return the probability mass function for a vector/matrix.
#
#INPUTS:
#   X       Input matrix
#
#OUTPUTS:
#   VALS    Vector of unique values
#   FREQS   Vector of frequencies of occurence of each value.
#

    [vals junk idx] = unique(X);

    vals   = vals(:);
    frequs = NaN(length(vals),1);

    for i = 1:length(vals)
        freqs(i) = mean(idx == i);
    end

    # If 0 or 1 output is requested, put the values and counts in two columns
    # of a matrix.
    if nargout < 2
        vals = [vals freqs];
    end

end 
```

# web - 视频和歌曲流媒体网站开发

> ID：14703244
> 
> 赞同：0
> 
> 时间：2013-02-05T08:42:16.050
> 
> 标签：web, streaming, hosting

伙计们，我需要你的帮助，

我有一个用 PHP 制作网站的新项目，基本功能是：管理员可以从后端上传歌曲和视频。前端将显示歌曲和视频、类别和其他与音乐相关的内容。我将使用 CI 或 CakePHP，但我主要关心的是托管。流量将是每天 5K 用户。现在什么是最好的托管解决方案，用户可以在线播放歌曲和视频。我需要购买专用服务器或云或 VPS 吗？

另外，如果您制作了此类网站，请向我推荐一些指导方针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:49:43.590

对于每天 5K 的用户，最好选择专用服务器，因为它是专为您服务的服务器。因此，如果明天观看者数量增加，您将不必面对任何缓慢的加载时间（如在云托管中），也不会给也会离开您的网站而不返回的用户留下不好的印象。

# php - 我想添加用户输入值 ($itm_sld) + 现有值 (itm_sld)

> ID：14703261
> 
> 赞同：0
> 
> 时间：2013-02-05T08:43:18.753
> 
> 标签：php, mysql

我想添加用户输入值**`($itm_sld)`+现有值`itm_sld`** 我使用这个代码

```
<?php
$sql="UPDATE itm_tot 
SET itm_sld = itm_sld + '$itm_sld'
WHERE itm_no='$itm_no'"; ?> 
```

但新值由 UPDATED**`itm_sld = itm_sld + (itm_sld + '$itm_sld')`**

**`itm_sld`**我应该怎么做才能更新**`(itm_sld + '$itm_sld')`**

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:48:25.423

检查 字符串连接的[CONCAT()方法。](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

# linux - 如何通过 SSH bash 脚本在远程服务器上 cd？

> ID：14703262
> 
> 赞同：2
> 
> 时间：2013-02-05T08:43:19.520
> 
> 标签：linux, bash, unix, ssh

我有一个 bash 脚本，用于通过 ssh 连接到远程服务器。那行得通，但是我希望脚本在连接后立即传递 cd /some/dir 的命令。这似乎不起作用。这是我的代码：

```
#!/bin/bash
echo "SSHing.."
ssh -i ~/.ssh/some-site.pem xxx@yyy.com
cd /some/dir        
read 
```

如何在 SSH 连接建立后立即执行 cd 命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T08:56:55.687

从脚本内部通过 SSH 执行命令有两种简单的方法：

1)`ssh user@host 'command'`

2)

```
ssh user@host <<<EOF
command1
command2
<...>
commandn
EOF 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T08:45:14.190

通常你只需在远程机器上编辑你的 ~/.profile 。

如果这不是一个选项，您可以执行以下操作：

```
ssh -t theserver.com 'cd /some/dir && bash -i' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:53:20.327

您可以使用以下命令

```
ssh user@watevr <the_cmd_to_be_executed> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:51:38.813

你可以试试这个：

```
ssh abc@hostname :/pathto/specific directory 
```

# android - Android ActionBarSherlock 片段标签

> ID：14703265
> 
> 赞同：1
> 
> 时间：2013-02-05T08:43:31.073
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

我正在尝试一些 ActionBarSherlock 片段标签。我目前在我的代码中遇到了一些问题。我在片段中使用了单独的 Tablisteners。如果可能，请更正我的代码。

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class FragmentsTab1 extends SherlockFragmentActivity implements
ActionBar.TabListener{
    private Fragment mFragment;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment1);

    }
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        mFragment = new FragmentsTab1(); //Type mismatch: cannot convert from FragmentsTab1 to Fragment
        ft.add(android.R.id.content, mFragment);
        ft.attach(mFragment);
    }
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.remove(mFragment);
    }
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

错误代码：类型不匹配：无法从 FragmentsTab1 转换为 Fragment

**迪克西特·帕特尔的建议**

```
import android.os.Bundle;
import android.app.Fragment;
import android.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class FragmentsTab1 extends SherlockFragmentActivity implements
ActionBar.TabListener{
    private Fragment mFragment;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment1);

    }
    /**
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        mFragment = new FragmentsTab1();
        ft.add(android.R.id.content, mFragment);
        ft.attach(mFragment);
    }
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.remove(mFragment);
    }
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    **/
    public void onTabSelected(Tab tab,
            android.support.v4.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub
        mFragment = new FragmentsTab1(); //Type mismatch: cannot convert from FragmentsTab1 to Fragment
        ft.add(android.R.id.content, mFragment); //The method add(int, Fragment) in the type FragmentTransaction is not applicable for the arguments (int, Fragment)
        ft.attach(mFragment); //The method attach(Fragment) in the type FragmentTransaction is not applicable for the arguments (Fragment)
    }
    public void onTabUnselected(Tab tab,
            android.support.v4.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.remove(mFragment); //The method remove(Fragment) in the type FragmentTransaction is not applicable for the arguments (Fragment)
    }
    public void onTabReselected(Tab tab,
            android.support.v4.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T08:41:10.637

错误“类型不匹配：无法从 FragmentsTab1 转换为 Fragment”是因为 SherlockFragmentActivity 是 Activity，而不是 Fragment。如果你想创建一个 Fragment，你必须从 SherlockFragment 扩展。

另一方面，Richard Le Mesurier 是对的，您必须了解 Fragment 和 Activity 之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:03:53.420

你得到的错误告诉你：

*   类型不匹配：无法从 FragmentsTab1 转换为 Fragment

FragmentsTab1 不是`Fragment`- 它是一个`SherlockFragmentActivity`ie an `Activity`。

您需要重新编写代码，以便了解 a`Fragment`和 an之间的区别`Activity`。

* * *

进一步解释。

你的代码说：

```
 mFragment = new FragmentsTab1(); 
```

但是您已经声明：

```
 public class FragmentsTab1 extends SherlockFragmentActivity implements 
```

ActionBar.TabListener

和

```
private Fragment mFragment; 
```

我无法告诉您您要做什么，但我可以告诉您这是一个相对简单的 java 错误，这就是为什么我建议您尝试了解和之间的`Fragment`区别`Activity`。

我可以看到您是该语言的新手，因此我建议您阅读有关 java 继承和子类如何工作的内容 - 您会在网上找到大量学习 java 的资源。

您将看到，如果它们不相互继承，则不能将一种类型“强制转换”为另一种类型。“铸造”是错误所在。就像说 a`Car`是与 a 相似类型的对象`SoccerPlayer`- 但它们实际上并不相关。

* * *

也就是说，我确实建议您使用 ActionBarSherlock sdk 中的示例代码，因为它会为您提供所需的内容。您会发现将其用作您自己的应用程序的起点非常有用。

# javascript - 个人访问者的谷歌分析

> ID：14703267
> 
> 赞同：0
> 
> 时间：2013-02-05T08:43:36.910
> 
> 标签：javascript, google-analytics

有什么方法可以跟踪每个会话的每个访问者的谷歌分析数据，然后将包含这些数据的电子邮件发送给站点管理员？这样每个访问者的数据都以电子邮件的形式发送。使用 javascript/jquery。

# haskell - 在 Haskell 中生成素数

> ID：14703268
> 
> 赞同：0
> 
> 时间：2013-02-05T08:43:41.637
> 
> 标签：haskell, primes

在过去的几天里，我一直在通过 Learn You A Haskell 学习 Haskell。我一直在尝试完成一些 Project Euler 问题，其中一些需要素数。但是，我编写的尝试生成一些函数（在本例中为低于 20000 的素数）的函数输出不正确。当我运行它时，`GHCi`返回**'[1, '**并且似乎不会终止。我正在使用的代码是：

```
sieve :: (Integral a) => a -> [a] -> [a]
sieve 20000 list = list
sieve n (x:xs) = sieve (n+1) $ x:(filter (\q -> q `mod` n /= 0) xs)

primesto20000 = sieve 2 [1..20000] 
```

然后我打电话`primesto20000`。我知道该功能可能效率低下，我主要是就我必须犯的语法/过程错误寻求帮助。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:08:41.357

您正在过滤掉*每个*数字的倍数，而不仅仅是素数。你想检查除以`x`，而不是`n`。（事实上​​，我不确定你是否需要`n`在`sieve`函数中；只需让你的`primesto20000`函数生成适当的输入列表，然后传递它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:13:48.520

您的代码中有两个问题：

*   因为它的时间复杂度（我猜是二次方），它没有在合理的时间内完成，而且它似乎只是挂起。如果将 20000 替换为 200，它将完成，但结果将是`[1]`.
*   另一个问题是，对于每个`n`你想要过滤的所有数字都可以`n`被*大于*. `n`没有这个条件，你过滤`n`自己，结果就是过滤掉所有的数字。

更正后的版本可能如下所示（具有参数化限制）：

```
limit :: Integral a => a
limit = 20000

sieve :: (Integral a) => a -> [a] -> [a]
sieve n list | n == limit
    = list
sieve n (x:xs)
    = sieve (n+1) $ x : (filter filt xs)
  where
    -- filter everything divisible by `n`, but not `n` itself.
    filt q = (q <= n) || (q `mod` n /= 0)

primesto20000 = sieve 2 [1..limit] 
```

# java - 来自java的bash unix processbuilder没有运行

> ID：14703271
> 
> 赞同：3
> 
> 时间：2013-02-05T08:44:02.450
> 
> 标签：java, bash, unix, servlets, processbuilder

我想从我的 Java servlet 执行一个简单的 Unix 命令：我需要做的是一个简单的回显写入文件，如下所示：

```
echo HELLO > myfile.txt 
```

我在我的 servlet 中所做的是：

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ServletAutorecovery extends HttpServlet {
    protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            ProcessBuilder pb = new ProcessBuilder("/usr/bin/bash", "-c", "echo HELLO > ../webapps/test/myfile.txt");
            pb.start();
        } finally { 
        out.close();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }
} 
```

我的问题是：此代码部分没有给我任何错误，但没有任何反应。在我执行了我的 servlet 之后，该文件并没有被创建，当然，其中也没有写入任何内容。

我究竟做错了什么？

EDIT1：添加了 pb 命令的完整路径。

EDIT2：`bash`在路径`/usr/bin/bash`中，100% 确定。

EDIT3：添加了 SSCCE。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T08:58:39.223

首先，你确定 bash 肯定是在`/usr/bin`吗？其次，您可能需要告诉 ProcessBuilder 在运行进程时它应该使用哪个目录作为 cwd，否则它将尝试在 servlet 容器的当前目录中创建 myfile.txt，通常是在您没有写入的地方使用权。第三，当你从java运行一个进程时，进程的输出通过进程对象上的输入流传递回java，它不会直接进入stdout，所以你需要读取流来查看结果

```
ProcessBuilder pb = new ProcessBuilder("/usr/bin/bash", "-c", "echo HELLO > myfile.txt");
pb.directory(...);
pb.redirectErrorStream(true);
Process p = pb.start();
IOUtils.copy(p.getInputStream(), System.out);
p.waitFor(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:00:40.823

```
String echo = "echo 'hello' > myfile.txt";
ProcessBuilder pb = new ProcessBuilder("/usr/bin/bash", "-c", echo);
pb.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:53:51.320

检查您的错误处理；你可能在某个地方吞下了一个异常，因为没有`bash`in `/usr/bin`，所以你得到一个“找不到文件”异常（或类似的）。

试试`"/bin/bash"`吧。其余的应该工作。

另请注意，在您部署应用程序后，相对路径将不起作用，因为它将与运行 Java VM 的进程相关，这不是您期望、想要或可以使用的。询问您`ServletContext`的路径`getRealPath()`

# jquery - jQuery在超时时淡入淡出

> ID：14703277
> 
> 赞同：0
> 
> 时间：2013-02-05T08:44:28.890
> 
> 标签：jquery, timeout

这是一个很常见的问题，但我希望淡出一些文本，更改它然后再淡入。

到目前为止，我的代码是：

```
setTimeout(function(){
    $("#ilovequote").fadeOut( 500, function(){
     var ilovequotes = ["CSS3", "Photoshop", "AJAX", "jQuery", "Social Media API's"];
    var rand = ilovequotes[Math.floor(Math.random() * ilovequotes.length)];
    $('#ilovequote').html(rand);
        $("#ilovequote").fadeIn( 500);
    });
  }, 500);
}); 
```

但这由于某种原因不起作用。我正在寻求帮助，基本上我想要一个流畅的动画，只要足够长的时间来阅读这个词。

JS小提琴

[http://jsfiddle.net/rJDWb/](http://jsfiddle.net/rJDWb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:56:14.137

你想要这样的东西吗？

```
var cnt = 0;
setInterval(function(){
cnt ==4 ? cnt=0:cnt++
    $("#ilovequote").fadeOut( 500, function(){
        var ilovequotes = ["CSS3", "Photoshop", "AJAX", "jQuery", "Social Media API's"];
        var rand = ilovequotes[cnt];
        $('#ilovequote').html(rand);
        $("#ilovequote").fadeIn( 500);
    });
},1000); 
```

jsFiddle 演示在这里[http://jsfiddle.net/BMBDd/2/](http://jsfiddle.net/BMBDd/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:49:35.443

删除多余的`});`

```
setTimeout(function () {
    $("#ilovequote").fadeOut(500, function () {
        var ilovequotes = ["CSS3", "Photoshop", "AJAX", "jQuery", "Social Media API's"];
        var rand = ilovequotes[Math.floor(Math.random() * ilovequotes.length)];
        $('#ilovequote').html(rand);
        $("#ilovequote").fadeIn(500);
    });
}, 500); 
```

[更新]：

在更新的 jsfiddle 中交换最后两行（第 7 行和第 8 行）

[http://jsfiddle.net/samliew/rJDWb/2/](http://jsfiddle.net/samliew/rJDWb/2/)

# specflow - 带有 specflow 的外部数据源

> ID：14703283
> 
> 赞同：1
> 
> 时间：2013-02-05T08:44:43.720
> 
> 标签：specflow

我发现在 specflow 的特征文件中输入数据非常痛苦，特别是当它是重复性和大数据时。我们可以使用像电子表格这样的外部数据源来输入这些数据，然后在特征文件中使用这个外部数据源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:09:59.423

这在理论上是可能的，但可能需要付出太多的努力，以至于您不想这样做。

问题在于功能文件只是一种人类可读的形式。当它保存在 Visual Studio 中时，它会被解析并转换为 feature.cs 文件，该文件被编译并用于测试。

所以你的过程会变成

*   编辑电子表格
*   导出到特征文件
*   获取 specflow 的 VS 插件以转换为 feature.cs
*   运行 msbuild
*   通过 Nunit 或类似工具运行测试

我不会这样做的。相反，我会专注于让我的测试成为更好的例子。听起来您要尝试详尽地涵盖所有可能性。不要提出示例来涵盖所有可能的情况，而是用更少的测试涵盖尽可能多的逻辑。

# iphone - 使用 wifi 或蜂窝塔信号获取位置更新

> ID：14703292
> 
> 赞同：0
> 
> 时间：2013-02-05T08:45:14.833
> 
> 标签：iphone, gps, cllocationmanager

我正在开发一个应用程序，我想在其中使用 CLLocationManager 类获取位置详细信息。但是如果我调用 startlocationupdating 方法，那么 GPS 就会启动。

我不想使用 GPS 获取位置详细信息。我想关闭 GPS 并使用 WiFi 或蜂窝塔获取位置详细信息。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:56:39.873

Set `desiredAcuracy` to `kCLLocationAccuracyKilometer`; You can proove that you dont have GPS by:

*   you never get `course` (degrees) (may also called heading, correct me)
*   you never get `speed` (m/s)

from your CLLLocation object, especially when moving
Further if you

*   dont get `altitude`,

its not GPS, too (also works when vehicle is stand still

the other possibility is to avoid GPS is to enable location service with "significantLocantionChange" mode. But for this i have no personal experience.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:50:39.417

从 CLLocationManager 文档页面（[https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)）

> 对于您使用的服务，您应该准确配置与该服务关联的任何属性。位置管理器对象通过在不需要硬件时关闭硬件来积极管理电源。例如，将位置事件的所需精度设置为一公里，使位置管理器可以灵活地关闭 GPS 硬件并仅依赖 WiFi 或蜂窝无线电。关闭 GPS 硬件可以显着节省电力。

基本上wifi位置会禁用GPS，从而降低您的准确度

# c# - 调用链接服务器程序

> ID：14703293
> 
> 赞同：0
> 
> 时间：2013-02-05T08:45:28.267
> 
> 标签：c#, sqlcommand

如果我在链接服务器上调用过程，我会收到以下错误：

Msg 0, Level 20, State 0, Line 0 当前命令发生严重错误。结果，如果有的话，应该丢弃。

它适用于 SSMS，也适用于经典的 asp，但不在这里。我发现了一些类似的问题，但没有答案。而且我不会（不能）直接连接到链接服务器并在本地执行程序。它必须执行为：myLinkedServer.Database.dbo.myProcedure

任何的想法？

```
 using (SqlCommand getOutput = new SqlCommand())
        {

            getOutput.CommandText = "myLinkedServer.Database.dbo.myProcedure";
            getOutput.CommandType = CommandType.StoredProcedure;
            getOutput.CommandTimeout = 300;
            getOutput.Connection = conn;

            conn.Open();
            using (SqlDataAdapter da = new SqlDataAdapter(getOutput))
            {
                da.AcceptChangesDuringFill = false;
                da.Fill(exportData);//here error happened
                conn.Close();
                da.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:35:35.333

我找到了一个解决方案：

```
getOutput.CommandText = "EXEC myLinkedServer.Database.dbo.myProcedure";
getOutput.CommandType = CommandType.Text; 
```

在链接服务器上调用过程时，命令类型应为文本。

# c# - 如何确定按下了shift+alt+control+菜单键 win8 metro app

> ID：14703297
> 
> 赞同：0
> 
> 时间：2013-02-05T08:45:44.843
> 
> 标签：c#, microsoft-metro

我正在做一个项目，我有一些文本框，其中一些只有数字，但在 xaml inputscope="number" 中，虚拟键盘出现了一些字符，例如“[ + % ]” ...。我使用了 key.down 事件但是shift+4 (+) 通过了我搜索并找到 control.modiferKey 的异常，但它不在 Metro 应用程序上

我觉得

```
if keyDown is shift boolean = true 
if keyUp boolean = false 
if boolean == true and digit pressed do nothing 
```

但必须有一种简单的方法可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:37:51.073

将此代码添加到构造函数中，它将处理全局键 down 和 key

```
Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;
        Window.Current.CoreWindow.KeyUp += CoreWindow_KeyUp; 
```

这是他们的活动

```
void CoreWindow_KeyUp(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
    {
        //this.Frame.Navigate(typeof(MainPage));
        var key = args.VirtualKey;
        string aa = args.ToString();
    }

    void CoreWindow_KeyDown(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
    {
        //this.Frame.Navigate(typeof(MainPage));
        var key = args.VirtualKey;
        string aa = args.ToString();
    } 
```

您可以在此事件中使用自己的逻辑。大多数 ky down 事件都可以像 dis 一样被捕获...请尝试实现代码并查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T06:42:29.257

```
 private void pwd_KeyDown(object sender, KeyRoutedEventArgs e)
    { 
        if (e.Key == Windows.System.VirtualKey.Enter)
        {
            loginclick_Click(this, new RoutedEventArgs());
        }
    } 
```

而不是输入 do shift,ctrl 等

# android - 从我的 Android 应用程序使用 GCM 推送通知

> ID：14703298
> 
> 赞同：1
> 
> 时间：2013-02-05T08:45:58.837
> 
> 标签：android, google-cloud-messaging

根据我的要求，我正在接收我的 android 应用程序的推送通知。但面临一个奇怪的问题。如果手机没有连接互联网，我们从第三方服务器发送推送消息，我们无法收到通知。**明白了**！！！！但是在它连接的那一刻，它应该会收到之前推送的那些通知。即使我将互联网连接到我的设备，我也没有收到这些通知，而我的设备在发送通知时没有连接。我正面临这个问题。可能是什么原因？？？？？？

提前致谢！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:53:23.530

**如果您的互联网关闭，**您将无法收到任何推送通知。

您可以检查**[消息的生命周期](http://developer.android.com/google/gcm/adv.html#lifetime)**。

## 添加

尝试将这组代码添加到*onMessage()的底部*

```
 String message = yourMessage;

    ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> appProcesses = activityManager.getRunningAppProcesses();

    final String packageName = "your.package.name";
    for (RunningAppProcessInfo appProcess : appProcesses) {
        if (appProcess.processName.equals(packageName)) {
            if(appProcess.importance != RunningAppProcessInfo.IMPORTANCE_FOREGROUND) {
                generateNotification(context, message);
            }
        } 
    } 
```

# gwt - 有没有一种简单的方法来拥有一个带有多选和复选框的 GWT CellList

> ID：14703307
> 
> 赞同：0
> 
> 时间：2013-02-05T08:46:47.077
> 
> 标签：gwt

我有很多不同的对象列表，我必须提供给用户。用户可以在此列表中选择多个元素。绝对需要在列表中的每个项目前面的复选框。

在我看来，这个问题的标准解决方案是 CellTable 或 DataGrid，但是用所有设置的东西来实现非常不方便。没有像 ListBox 这样的简单解决方案，我只需几行代码就可以启用复选框/多选功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:29:21.287

## **在 GWT 小部件中**

## 选项1

```
ListBox -> Single & Multi Selection - No Checkbox. 
```

## 选项 2

```
CellTable/DataGrid -> Single & Multi Selection with Selection Checkbox. 
```

## 选项 3

```
CellList -> Single & Multi Selection & Customized Cells with CheckBox 
```

# python - 在装饰函数完成后，如何让 Python 装饰器运行？

> ID：14703310
> 
> 赞同：39
> 
> 时间：2013-02-05T08:46:55.707
> 
> 标签：python, decorator, python-decorators

我想使用装饰器来处理各种功能的审核（主要是 Django 视图功能，但不限于此）。为了做到这一点，我希望能够在**执行后**审核函数- 即函数正常运行，如果它无异常返回，那么装饰器会记录这一事实。

就像是：

```
@audit_action(action='did something')
def do_something(*args, **kwargs):
    if args[0] == 'foo':
        return 'bar'
    else:
        return 'baz' 
```

where`audit_action`只会在函数完成后运行。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-05T08:48:14.243

装饰器通常返回一个包装函数；只需在调用包装函数后将您的逻辑放入包装函数中。

```
def audit_action(action):
    def decorator_func(func):
        def wrapper_func(*args, **kwargs):
            # Invoke the wrapped function first
            retval = func(*args, **kwargs)
            # Now do something here with retval and/or action
            print('In wrapper_func, handling action {!r} after wrapped function returned {!r}'.format(action, retval))
            return retval
        return wrapper_func
    return decorator_func 
```

一个装饰器工厂也是如此`audit_action(action='did something')`，它返回一个作用域`decorator_func`，用于装饰你的`do_something`( `do_something = decorator_func(do_something)`)。

装饰后，您的`do_something`参考已被替换`wrapper_func`。调用`wrapper_func()`会导致调用原始代码`do_something()`，然后*包装器 func 中的代码*可以执行操作。

上面的代码与您的示例函数相结合，提供以下输出：

```
>>> do_something('foo')
In wrapper_func, handling action 'did something' after wrapped function returned 'bar'
'bar' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T08:50:33.777

你的装饰器可以自己在这里处理它，比如

```
def audit_action(function_to_decorate):
    def wrapper(*args, **kw):
        # Calling your function
        output = function_to_decorate(*args, **kw)
        # Below this line you can do post processing
        print "In Post Processing...."
        return output
    return wrapper 
```

# c# - 反序列化 WCF 数据服务的 JSON 响应时出错

> ID：14703311
> 
> 赞同：1
> 
> 时间：2013-02-05T08:47:04.593
> 
> 标签：c#, json, json.net, deserialization, winrt-xaml

我正在开发一个用户 WCF 数据服务的应用程序。JSON 响应包含“&id”和“$ref”关键字。我想用 NewtonSoft lib 反序列化那个 JSON。所以我尝试为 JSON 开发类，所以我使用了 www.json2csharp.com，但它没有给我正确的类结构。所以我用这个更新课程

```
[DataMember(Name = "$id", EmitDefaultValue = false)]
public string Id { get; set; }

[DataMember(Name = "$ref", EmitDefaultValue = false)]
public string Ref { get; set; } 
```

然后也不行。在搜索时我找到[了一种方法](http://www.jaressloo.com/2012/05/using-jsons-special-properties-of-ref-and-id/)，但它使用 JavaScript。所以请帮助解决我的这个问题。Web 服务使用实体框架，它是 WCF 服务库项目。示例 JSON 响应是这样[的](http://pastebin.com/PMAWs3vk)。

# ios - ios 6中的嵌套表视图

> ID：14703314
> 
> 赞同：0
> 
> 时间：2013-02-05T08:47:15.183
> 
> 标签：ios, objective-c

我正在创建嵌套表视图。一个用于垂直滚动的表格视图。另一个用于在第一个单元格内进行水平滚动。我将水平表视图的委托设置为垂直表视图的单元子类。但问题是水平表视图的委托方法没有调用。有谁知道它为什么不打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:48:52.920

在配置包含第二个表格视图的单元格时，您必须确保以编程方式设置委托。

可以发一些代码吗...

# linux - Bash脚本：从文件名中删除扩展名

> ID：14703318
> 
> 赞同：31
> 
> 时间：2013-02-05T08:47:28.007
> 
> 标签：linux, bash

我有以下 bash 脚本：

```
tar -zxvf $1
cd $1 
```

它应该提取存档文件并进入创建的目录。通常，包归档文件创建与文件同名的目录，不带扩展名，例如，mpc-1.0.1.tar.gz 创建 mpc-1.0.1 目录。如何更改行`cd $1`以获取目录名称？存档文件有几个扩展名：tar.gz、tat.xz、tar.bz2。

# javascript - Javascript 警报与 Jquery 消息交替

> ID：14703320
> 
> 赞同：4
> 
> 时间：2013-02-05T08:47:32.950
> 
> 标签：javascript, jquery-ui, jquery, adblock

我只是一个学习者，对javascript和jquery一无所知。我想添加一个 adblock 检测器脚本。我发现的是这段代码，它给出了一个令人讨厌的警报消息。我想要的是提供一条 ajaxed 消息，而不是一条弹出屏幕的消息。

```
<script type="text/javascript">
function _enabled() {
    alert('Hey Dude!!! You are using Adblock on this site? Please disable Adblock or Any other plugin blocking ads. Its the only way we cover the cost of the Servers and Website. Click OK to continue what you were doing');
}
function _disabled() {
    alert('not detected');
}
var _abdDetectedFnc = '_enabled';
var _abdNotDetectedFnc = 'disabled';
</script>
<script type="text/javascript" src="http://www.adblockdetector.com/script.php"></script> 
```

**替换这个代码你能帮我用这个代码的替代品吗？**

```
{
        alert('Hey Dude!!! You are using Adblock on this site? Please disable Adblock or Any other plugin blocking ads. Its the only way we cover the cost of the Servers and Website. Click OK to continue what you were doing');
    } 
```

我找到了一些关于使用 jquery 或 jquery-ui 获取它的解决方案，但不知道在此处放置什么并替换代码。我尝试了来自[http://m0006.gamecopyworld.com/games/gcw_notice.shtml](http://m0006.gamecopyworld.com/games/gcw_notice.shtml)的代码示例，它提供了一个友好的 Adblock Detect 消息。但它根本不起作用。只有此警报消息在我的网站上有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:07:12.387

作为一个非常快速的替代方案，您可以使用 jQuery-ui 对话框看起来更好一些（正如 Ricky Baby 所说）

您还需要在页面中包含 jQuery 和 jQuery-ui 库。这些可以从[http://jquery.com/download/](http://jquery.com/download/)和[http://jqueryui.com/download/](http://jqueryui.com/download/)下载，如果你还没有的话。

您可以将“嘿，伙计……等”文本更改为您喜欢的任何内容

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="all" />
</head>
<body style='height: 100%;'>
<script type="text/javascript">
function _enabled() 
{
    var html = "<div>Adbloc detected</div>";

    var diag = $(html).dialog(
    {
        autoOpen: true,
        modal: true,
        close: function() { $(this).empty().remove(); },
        buttons: 
        {
            "Close": function() { $(this).dialog("close"); }
        }
    });
}
function _disabled() 
{
    var html = "<div>Adbloc NOT detected</div>";

    var diag = $(html).dialog(
    {
        autoOpen: true,
        modal: true,
        close: function() { $(this).empty().remove(); },
        buttons: 
        {
            "Close": function() { $(this).dialog("close"); }
        }
    });
}
var _abdDetectedFnc = '_enabled';
var _abdNotDetectedFnc = '_disabled';
</script>
<script type="text/javascript" src="http://www.adblockdetector.com/script.php"></script>
</body>
</html> 
```

或者，如果您根本不想弹出消息，您可以在屏幕底部放一条消息

```
<div id='adBlockDetected' style='position: fixed; bottom: 20px; left: 0px; width: 100%; display: none;' >Hey dide .... etc </div> 
```

然后在 _enabled() 函数中

```
$("#adBlockDetected").css({display: "block" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:52:54.617

看到这个问题：

[Adblock 检测问题](https://stackoverflow.com/questions/8861750/problems-with-adblock-detecting?rq=1)

在底部，他通过设置 html 属性将他的消息设置为显示在一个 div（他称之为 #Ad-One ）中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:52:19.717

如果您想使用 JQuery-ui，可以使用对话框选项使消息框更漂亮，请参阅：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)

但是，您也混淆了您的术语 - AJAX - 是一个“品牌”名称，用于使用 XMLHTTP 对象和相关技术从远程服务器请求数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:01:05.407

如果您只需要“漂亮”的警报，那么 jQuery UI 就有点过头了。我会选择 Apprise 之类的东西：http: [//thrivingkings.com/read/Apprise-v2-The-new-and-improved-attractive-alert-alternative-for-jQuery](http://thrivingkings.com/read/Apprise-v2-The-new-and-improved-attractive-alert-alternative-for-jQuery)

只使用默认设置：

```
<!-- added to head -->
<link href="path_to_css/apprise-v2.min.css" rel="stylesheet" type="text/css" />

<script src="path_to_jquery"></script>
<script src="path_to_scripts/apprise-v2.min.js"></script>
<script>

    $(function(){
        Apprise('hi there');
    });

</script> 
```

给你一个漂亮的警报信息：

![在此处输入图像描述](../Images/baa72adb43332da7524539578776a3df.png)

当然，我也很好奇你想在这里实现什么：

```
<script type="text/javascript" src="http://www.adblockdetector.com/script.php"></script> 
```

除非那个 PHP 页面实际上是一个 JavaScript 文件，否则你不能这样做。该`src`属性需要指向一个有效且可寻址的 JavaScript 文件。

# iphone - 在主线程的其他地方调用 GCD 块

> ID：14703324
> 
> 赞同：1
> 
> 时间：2013-02-05T08:47:50.257
> 
> 标签：iphone, objective-c, objective-c-blocks

我正在使用以下代码从字符串查询中获取响应。我的应用程序中有很多查询，我想一次又一次地复制和粘贴此代码

有什么办法可以让我创建一个实例，传递 urlString 然后返回响应..

我曾尝试 `+(NSString*) myFunc{}`在 NSObject 类中创建一个函数，但似乎 GCD 除了主 UI 线程之外不起作用。我该如何解决这个问题

```
__block__  NSString *response;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    //your server url and request. data comes back in this background thread
    response; = [NSString stringWithContentsOfURL:[NSURL URLWithString:queryString] encoding:NSUTF8StringEncoding error:&err];

    dispatch_async(dispatch_get_main_queue(), ^{
        //update main thread here.
        NSLog(@"%@",response); // NEED TO RETURN THIS

        if (err != nil)
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Error"
                                                           message: @"An error has occurred."
                                                          delegate: self
                                                 cancelButtonTitle:@"Ok"
                                                 otherButtonTitles:nil];
            [alert show];
            [indicator stopAnimating];
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:14:31.280

我会将请求处理与错误报告分开，使用*完成块*向调用者提供反馈。

首先定义*完成块*语义；我们知道我们想要字符串响应和一个可选的错误描述符：

```
typedef void (^COMPLETION_BLOCK)(NSString *response, NSString *error); 
```

其次实现将在后台获取响应的方法，然后在主线程中调用完成块。如果您愿意，这可能是某个全局实用程序类中的类方法：

```
- (void)responseFromURL:(NSURL *)url
        completionBlock:(COMPLETION_BLOCK)completionBlock
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        NSError *error = nil;
        NSString *response = [NSString stringWithContentsOfURL:url
                                                      encoding:NSUTF8StringEncoding
                                                         error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            completionBlock(response, error);
        }
    }
} 
```

最后调用方法：

```
[someClass responseFromURL:[NSURL URLWithString:queryString]
           completionBlock:^(NSString *response, NSError *error) {

    NSLog(@"response='%@'", response);

    if (error != nil)
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error getting response"
                                                       message:[error localizedDescription]
                                                      delegate:self
                                             cancelButtonTitle:@"Ok"
                                             otherButtonTitles:nil];
        [alert show];
        [indicator stopAnimating];
    }
}]; 
```

*（此代码未经测试，因此无疑会包含一些错误）*

# linux-kernel - _spin_unlock_irqrestore() 在我的 kvm 中有很高的采样率，为什么？

> ID：14703328
> 
> 赞同：6
> 
> 时间：2013-02-05T08:48:10.157
> 
> 标签：linux-kernel, kvm

我在我的 KVM 虚拟机中运行 SPECJbb 基准测试。它显示 Warehouse 2 和 Warehouse 3 之间的吞吐量急剧下降（它们之间的不同只是增加了并发任务）

然后我在我的来宾虚拟机中使用 perf。它表明_spin_unlock_irqrestore 具有非常高的采样率。

事件：31K 周期

*   74.89% [内核] [k] _spin_unlock_irqrestore

*   7.36% perf-1968.map [.] 0x7f84b913e064

*   6.82% [内核] [k] __do_softirq

*   6.39% [内核] [k] handle_IRQ_event

...

似乎只有 7.36% 的 cpu 时间运行我的 Java 程序。为什么_spin_unlock_irqrestore的采样率这么高？它有什么作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T15:19:30.603

这是糟糕的报告`perf`，而不是消耗的周期`_spin_unlock_irqrestore`。

当 IRQ 被禁用时，不会处理 perf 的中断。相反，它们会在重新启用中断时进行处理。当 perf 的中断处理程序查看指令指针以查看正在运行的代码时，它会找到启用中断的函数 - 通常是`_spin_unlock_irqrestore`.

因此，您所知道的是，这些周期被禁用中断并使用`_spin_unlock_irqrestore`.

如果您可以使用 NMI（不可屏蔽中断）获得性能，它可以解决这个问题。
我知道可以通过更改makefile来使用oprofile（perf的前身）来完成，但不知道perf。

# c# - Windows 8 商店应用程序无法访问本地服务器

> ID：14703330
> 
> 赞同：0
> 
> 时间：2013-02-05T08:48:11.453
> 
> 标签：c#, windows-8, windows-store-apps, lan

我正在开发一个需要访问本地网络中的 http 服务器的业务线应用程序（因此商店规则不适用于我）。

我检查了专用网络（客户端和服务器），并从代码中创建了一个请求（类似于 http://XX.XX.XX.XX:XXXX/abc）在 Visual Studio 中调试时，一切都按预期工作，但是当我发布应用程序并在另一台计算机上使用它时，请求被阻止（即使防火墙关闭）。

我仍然可以使用 Metro & Desktop IE 访问服务器。只有用户编写的应用程序似乎有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:25:45.037

您可能需要将这些行添加到 appmanifest

```
 <Capability Name="ID_CAP_NETWORKING" />
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" /> 
```

# c# - Enum.ToString 不工作

> ID：14703344
> 
> 赞同：0
> 
> 时间：2013-02-05T08:48:45.920
> 
> 标签：c#, linq-to-sql, enums

检查此代码片段。

```
using (AttendanceDataContext db = new AttendanceDataContext())
{
var attendance = db.attendpunches.Select(at => new RawEmployeeCheckInOutInfo
                    {
                        CheckTime = at.punchtime.Value,
                        Direction = ((AttendanceDirection)at.direction.Value).ToString()
                    }); 
```

...

AttendanceDirection 是枚举，它是...

```
public enum AttendanceDirection : int
{
    CheckIn = 1,
    CheckOut = 2
} 
```

问题是 Direction = ((AttendanceDirection)at.direction.Value).ToString() 总是返回字节值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:54:01.797

我怀疑问题是`ToString`在数据库端有效执行，它不知道枚举名称。试试这个：

```
var attendance = db.attendpunches
                   .Select(at => new { CheckTime = at.punchtime.Value, 
                                       Direction = at.direction.Value })
                   .AsEnumerable() // Do the rest of the query in-process...
                   .Select(at => new RawEmployeeCheckInOutInfo {
                       CheckTime = at.CheckTime,
                       Direction = ((AttendanceDirection) at.Direction).ToString()
                    }); 
```

# html - 使用 xslt 解析 xml 时面临的问题

> ID：14703347
> 
> 赞同：0
> 
> 时间：2013-02-05T08:48:57.183
> 
> 标签：html, xml, xslt, xslt-1.0

我正在尝试解析 xml 以生成 html 报告。xml 的有问题的部分是给定的

```
<failure message="Management changes link count is not 3$HiHello" type="junit.framework.AssertionFailedError">junit.framework.AssertionFailedError: Management changes link count is not 3$HiHelloJI
at CustomProjects.CommonTemplates.verifyManagementChanges(Unknown Source)
at CustomProjects.EmersonTest.testEmerson_VerifyManagementChanges(Unknown Source)
</failure> 
```

为解析这个而编写的 xslt 是：

```
<xsl:choose>
        <xsl:when test="failure">
            <td>Failure</td>
            <td><xsl:apply-templates select="failure"/></td>
            <td><a href="ftp://10.32.1.66/seleniumScreenshotsFireFoxTest/{@name}.png" target="_blank">screenshot</a></td>
            <td><xsl:apply-templates select="failurelink"/></td>
        </xsl:when>
</xsl:choose>

<xsl:template match="failure">
  <xsl:call-template name="display-failures"/>
</xsl:template>

<xsl:template match="failurelink">
  <xsl:call-template name="display-failures-link"/>
</xsl:template>

<xsl:template name="display-failures">
  <xsl:param name="FailText" select="@message"/>
    <xsl:choose>
     <xsl:when test="not(@message)">N/A</xsl:when>
    <xsl:otherwise>
       <xsl:value-of select="substring-before($FailText,'$')"/>
    </xsl:otherwise>
</xsl:choose>
<!-- display the stacktrace -->
<code>
    <br/><br/>
    <xsl:call-template name="br-replace">
        <xsl:with-param name="word" select="."/>
    </xsl:call-template>
</code>
<!-- the later is better but might be problematic for non-21" monitors... -->
<!--pre><xsl:value-of select="."/></pre-->
</xsl:template>

<xsl:template name="display-failures-link">
<xsl:param name="linktext" select="@message"/>
 <xsl:choose>
    <xsl:when test="not(@message)">N/A</xsl:when>
    <xsl:otherwise>
       <xsl:value-of select="substring-after($linktext,'$')"/>
    </xsl:otherwise>
</xsl:choose>
<!-- display the stacktrace -->
<code>
    <br/><br/>
    <xsl:call-template name="br-replace">
        <xsl:with-param name="word" select="."/>
    </xsl:call-template>
</code>
<!-- the later is better but might be problematic for non-21" monitors... -->
<!--pre><xsl:value-of select="."/></pre-->
</xsl:template> 
```

在这里**，我从 display-failures 模板中得到了想要的结果（$ 符号之前的字符串），但是在调用 display-failures-link 时我什么也没得到。（应该在 $ 符号之后得到字符串）**。我不知道问题是否出在sunstring 功能或其他功能。请让我知道我在这里做错了什么。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:05:43.853

这里的问题是您正在尝试在 XPath 上应用模板`failurelink`，但您没有名为 的元素`<failurelink>`，所以这`apply-templates`没有找到任何东西。

```
<xsl:apply-templates select="failurelink"/> 
```

在同一种元素上应用两个不同模板的一种方法是使用模式：

```
<xsl:template match="failure">
  <xsl:call-template name="display-failures"/>
</xsl:template>

<xsl:template match="failure" mode="link">
  <xsl:call-template name="display-failures-link"/>
</xsl:template> 
```

然后您应用模板的区域将更改为：

```
<td>Failure</td>
<td><xsl:apply-templates select="failure"/></td>
<td><a href="ftp://10.32.1.66/seleniumScreenshotsFireFoxTest/{@name}.png" target="_blank">screenshot</a></td>
<td><xsl:apply-templates select="failure" mode="link"/></td> 
```

但在你的情况下，有一个更好的方法。只需消除第二个模板，然后执行以下操作：

将整个替换为`<xsl:choose>`：

```
<xsl:apply-templates select="failure" /> 
```

将您列出的第一个模板替换为：

```
<xsl:template match="failure">
   <td>Failure</td>
   <td><xsl:call-template name="display-failures"/></td>
   <td><a href="ftp://10.32.1.66/seleniumScreenshotsFireFoxTest/{../@name}.png" target="_blank">screenshot</a></td>
   <td><xsl:call-template name="display-failures-link"/></td>
</xsl:template> 
```

并删除您列出的第二个模板。

# mysql - MYSQL 禁用自动修剪

> ID：14703349
> 
> 赞同：6
> 
> 时间：2013-02-05T08:49:02.703
> 
> 标签：mysql, string, trim

如果我输入两个只有空格的字符串。我将收到此错误消息：

> 错误 1062：重复条目 ''' 键'PRIMARY'

如何关闭“自动修剪”？

我正在使用这个*`Charset: uft8-uft8_bin`*和这个数据类型：`Varchar`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T09:04:37.567

根据[SQL 92](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)文档，当比较两个字符串时，首先通过用空格填充最短的字符串使它们的长度相等。

`8.2 <comparison predicate>`在文档中搜索。

```
If the length in characters of X is not equal to the length
in characters of Y, then the shorter string is effectively
replaced, for the purposes of comparison, with a copy of
itself that has been extended to the length of the longer
string by concatenation on the right of one or more pad char-
acters, where the pad character is chosen based on CS. If
CS has the NO PAD attribute, then the pad character is an
implementation-dependent character different from any char-
acter in the character set of X and Y that collates less
than any string under CS. Otherwise, the pad character is a
<space>. 
```

换句话说。它不是将值与您输入的空格量一起存储，而是它用于检查重复主键的比较。因此，您不能将具有不同空格数量的两个字符串用作主键

# iphone - 标签栏控制器控制器颜色变化

> ID：14703351
> 
> 赞同：2
> 
> 时间：2013-02-05T08:49:04.963
> 
> 标签：iphone, ios6, uitabbarcontroller

在我的应用程序中，我想更改标签栏控制器的颜色，如何在 ios6 中为标签栏控制器分配自定义颜色，就像 uinavigation bar 一样？谁能给我一些参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T19:34:13.077

把它放在应用程序委托上：

```
UITabBarController *tabBarController = (UITabBarController *) self.window.rootViewController;
tabBarController.view.tintColor = [UIColor redColor]; 
```

它比第一个答案更好，因为它还更改了编辑视图的色调颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:21:33.433

您可以按照说明使用 setTintColor 选项

```
[tabbarController.tabBar setTintColor:[UIColor greenColor]]; 
```

或者你可以设置背景图片

```
[tabbarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_bg.png"]; 
```

如果您的 TabBarController 是在 AppDelegate 中定义的，您可能需要额外的编码来访问它。

首先设置背景图片

```
[[[[(UITabBarController *)[[(AppDelegate *)[UIApplication sharedApplication].delegate window] rootViewController]tabBar]setBackgroundImage:[UIImage imageNamed:@"tab_bg.png"]]]]; 
```

其次，如果需要，设置 tintcolor

```
[[[[(UITabBarController *)[[(AppDelegate *)[UIApplication sharedApplication].delegate window] rootViewController]tabBar]setTintColor:[UIColor redColor]]]]; 
```

不要忘记导入您的 AppDelegate.h 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T09:04:50.933

要仅更改 tabBar 颜色，您可以通过以下方式实现：

```
tabbarController.tabBar.tintColor = [UIColor redColor]; 
```

但是，更重要的是，您需要创建自定义 TabBar，并可以使用它来更改颜色、自定义标签栏图标等。

希望，对你有帮助。

干杯。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T08:59:10.540

您可以使用此调用

```
tabbarController.tabBar.tintColor = [UIColor redColor]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-15T12:07:50.047

对我有用的方法（在 iOS6 中测试）是：

```
[[UITabBar appearance]setTintColor:[UIColor redColor]]; 
```

在 AppDelegate.h 文件中的方法中`application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`。如果它仍然是实际的，试试这个。我看到这个问题仍然没有解决。

# c# - 使用 DotNetZip 保存所有文件夹结构

> ID：14703353
> 
> 赞同：0
> 
> 时间：2013-02-05T08:49:05.243
> 
> 标签：c#, file, directory, dotnetzip

我用最新版本的 DotNetZip 库做了这个简单的代码，由于某种原因，当我添加一个文件时，我得到了所有的文件夹结构。例如，如果我添加： C:\一个文件夹\两个文件夹\File.doc 在 zip 文件中我将有一个文件夹\两个文件夹\File.doc 但我的预期结果是只有 file.doc 这是我的代码，我不知道我做错了什么还是什么..：

```
//C#
public static void MethodOne(string PathInput, int LimitKb=0, bool DeleteInput=false)
{

using (ZipFile zip = new ZipFile())
{
//add file to zip
zip.AddFile(PathInput);
//save it
zip.Save(PathInput + ".zip");
}

} 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:15:17.720

使用重载的两个参数调用 AddFile 来指定内部目录结构。

```
zip.AddFile(filename, String.Empty); 
```

我认为这会做你想要的，但我不能轻易测试它。

# mongodb - Mongodb - 在同一文档中的多个位置更新

> ID：14703360
> 
> 赞同：-1
> 
> 时间：2013-02-05T08:49:36.130
> 
> 标签：mongodb

我有一个类似这样的文件：

```
myDoc : {
    _id : a101
    name : John,
    batch : [{
        _id : batch101,
        value : physics
    },{
        _id : batch102,
        value : chemistry
    },{
        _id : batch103,
        value : maths
    }]
} 
```

我想将“值”更新为“计算机”，其中 batch._id 为“batch101”或“batch102”（不是 batch103）。

请帮忙！提前致谢。

-马尼什:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:14:07.413

正如对原始问题的评论中所述，这里最好的解决方案可能是在客户端使用文档。我将把它分解成几个步骤：

1) 查询文档。您提到您正在节点中工作，因此这将以 JSON 表示。让我们将此变量称为 x

2) 浏览您的文档，找到您要更新的元素，这可能如下所示：

```
for(i = 0; i < x.batch.length; i++) {  
    if(x.batch[i]._id == 'batch101') {  
        //do something
    }
} 
```

（显然，这段代码并不完整，但可以让您了解您想要什么）

3) 现在，使用这个更改的文档，更新 mongoDB 中的旧文档。

此过程应该允许您实现更新批处理列表中某些元素的目标。

# php - 为什么标准会话生命周期是 24 分钟（1440 秒）？

> ID：14703363
> 
> 赞同：107
> 
> 时间：2013-02-05T08:49:40.483
> 
> 标签：php, security, session

我一直在对 PHP 会话处理进行一些研究，并遇到了`session.gc_maxlifetime`1440 秒的值。我一直想知道为什么标准值是 1440 以及它是如何计算的？这个计算的依据是什么？

保持会话多长时间才有意义？你会推荐 session.gc_maxlifetime 的最小/最大值是多少？我想说，该值越高，Web 应用程序就越容易受到会话劫持的攻击。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2016-05-12T03:36:55.103

真正的答案可能与此非常接近：

回到 PHP3 天，PHP 本身没有会话支持。

但最初由 NetUSE AG 的 Boris Erdmann 和 Kristian Koehntopp 编写的名为 PHPLIB 的开源库通过 PHP3 代码提供会话。

会话生命周期以**分钟**而不是秒为单位定义。默认的生命周期是 1440 分钟，也就是 1 天。这是 PHPLIB 中的那行代码：

```
var $gc_time  = 1440;       ## Purge all session data older than 1440 minutes. 
```

Sascha Schumann 在 1998 到 2000 年期间参与了 PHPLIB 项目。毫无疑问，他熟悉 PHP3 会话代码。

然后 PHP4 于 2000 年推出，支持本地会话，但现在以秒为单位指定生命周期。

I'll bet someone just never bothered converting minutes to seconds. It's probable that person was Sascha Schumann. Once that value was coded into the Zend engine, it became the configuration (`php.ini`) default as well.

* * *

## 回答 #2

> 赞同：-18
> 
> 时间：2014-07-31T13:41:41.507

1440 用于将秒转换为小时/天的时间计算。

*   1 天 = 24 小时（小时 * 24 = 1 天）
*   天 = 1440 分钟（分钟 * 60 * 24 = 1 天）
*   天 = 86400 秒（秒 * 60 * 1440 = 1 天）

例子：

> 9 天 [* 60] = 540 [* 1440] = 777600 秒

反过来也是一样的：

> 777600 秒 [/ 1440] = 540 [/ 60] = 9 天

# jquery - jQuery全宽滑块在运行前加载一段时间

> ID：14703366
> 
> 赞同：0
> 
> 时间：2013-02-05T08:49:54.013
> 
> 标签：jquery, slider

我在我的[测试网站上使用 jQuery 全宽滑块](http://selectinteriors.tangent-design.com/)[PlusSlider](http://css-plus.com/examples/plugins/PlusSlider/)。

但问题是滑块在开始运行之前加载了一段时间。我无法找到导致滑块在运行前等待 2-6 秒的原因

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#slider3').plusSlider({
            fullWidth: true,
            autoPlay: true, 
            displayTime: 5000, // The amount of time the slide waits before automatically moving on to the next one. This requires 'autoPlay: true'
            sliderType: 'slider' // Choose whether the carousel is a 'slider' or a 'fader'
        });
    });
</script> 
```

# url - 无 API 链接的关注按钮

> ID：14703368
> 
> 赞同：1
> 
> 时间：2013-02-05T08:50:16.087
> 
> 标签：url, linkedin

我整个早上都在搜索互联网，但找不到一个简单的链接链接的 FOLLOW url 的工作示例。我想在我的社交标签上创建一个按钮，它不仅可以链接到公司页面，还可以自动让你关注它。

页面本身上的关注按钮给出的 url 在另一台机器上不起作用。

有什么建议么？

非常感谢，谢伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:03:58.763

这是您最好的选择： http: [//developer.linkedin.com/plugins/follow-company](http://developer.linkedin.com/plugins/follow-company)，它可以满足您的需求。

# javascript - 自定义控件以从 Google API 中的某个点获取坐标

> ID：14703369
> 
> 赞同：0
> 
> 时间：2013-02-05T08:50:15.977
> 
> 标签：javascript, .net, google-maps, google-maps-api-3

我正在使用 JavaScript Google API 为我的网站构建地图（适用于平板电脑，不适用于 PC）

我从 .NET 文档中获取所有标记；

我想制作一个新的自定义控件，当用户选择它时，他将能够单击地图上的某个点并将坐标获取到文本字段。

所以我知道如何制作一个新控件，并且我知道如何点击地图中的某个点并获取坐标：

当我单击时，我得到`lat`and `long`：

```
google.maps.event.addListener(map, "rightclick", function(event) {
    var latFromMap = event.latLng.lat();
    var lngFromMap = event.latLng.lng();
    // populate yor box/field with lat, lng
    document.getElementById("lat").value = latFromMap;
    document.getElementById("long").value = lngFromMap;
}); 
```

并进行控制（这将使我们回到中心）：

```
google.maps.event.addDomListener(outer, 'click', function() {
  map.setCenter(getcenter)
}); 
```

现在。我想连接它们。所以只有当我点击控件时，我才能在某个时候检查纬度/经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:37:12.703

[您可以按照此处](https://developers.google.com/maps/documentation/javascript/styling#creating_a_styledmaptype)所述创建一个新的 styledMapType （您不需要样式，只需创建 mapType 并将其添加到控件中）。

当您这样做时，您会一次获得 2 个结果，这是您的项目所需要的：控件，以及您可以每次检查以确定控件是否处于活动状态的属性，**`mapTypeId`**

应用点击会很容易：

```
google.maps.event.addListener(map, 'click', function() {
  if(this.mapTypeId=='mapTypeIdOfTheStyledMap'){
    //execute click-action
  }
}); 
```

演示：http: [**//jsfiddle.net/doktormolle/kbXGd/**](http://jsfiddle.net/doktormolle/kbXGd/)

# objective-c - 如何在 restkit 0.20 中将 NSManagedObject 序列化为 JSON？

> ID：14703373
> 
> 赞同：3
> 
> 时间：2013-02-05T08:50:26.110
> 
> 标签：objective-c, restkit

如何使用逆映射将 NSManagedObject 序列化为 restkit 0.20 中的 JSON？

现在我不需要在任何地方发布任何东西。

我想手动创建对象 MyObjectManaged。设置一些属性例如：id、name、age

使用现有的映射将它们映射到 JSON 属性：用户 ID、名字、年龄

创建和打印 JSON。

是否可以？什么时候是，怎么做？预先感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-16T14:05:23.113

我最近一直在尝试做同样的事情 :) 我想保留映射，以便最终我可以连接到服务器，但也可以重用它们来将对象序列化到文件中。

我使用 inverseMapping 并通过 RKMappingOperation 运行它。

首先从 JSON -> Core Data Object 设置您的映射

```
RKEntityMapping mapping = [RKEntityMapping mappingForEntityForName:@"MyManagedObject" inManagedObjectStore:rkManagedObjectStore];
[self.nodeMapping addAttributeMappingsFromDictionary:@{
    @"userid": @"id",
    @"first_name": @"name",
    @"age": @"age"
}]; 
```

然后使用逆映射将您的对象实例（例如“myObject”）映射到字典：

```
NSMutableDictionary *jsonDict = [NSMutableDictionary dictionary];
RKObjectMappingOperationDataSource *dataSource = [RKObjectMappingOperationDataSource new];
RKMappingOperation *operation = [[RKMappingOperation alloc] initWithSourceObject:myObject 
                                                               destinationObject:jsonDict
                                                                         mapping:[mapping inverseMapping]];
operation.dataSource = dataSource;

NSError *error = nil;
[operation performMapping:&error]; 
```

假设没有错误，您可以序列化字典：

```
NSData *data = [RKMIMETypeSerialization dataFromObject:jsonDict 
                                              MIMEType:RKMIMETypeJSON 
                                                 error:&error]; 
```

不知道你想从那里用它做什么，但如果你想把它打印成一个字符串，你可以这样做：

```
NSString *jsonString = [[NSString alloc] initWithData:data 
                                             encoding:NSUTF8StringEncoding] 
```

希望有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T11:53:00.473

John Martin 的回答似乎有效，但我遇到了问题，即 NSManagedObject 实例的 NSNumber 属性设置为

```
[NSNumber numberWithBool:boolvalue] 
```

将 json 序列化为值 1/0 而不是 true/false。我们的后端无法将数字处理为布尔值。

我使用内置类的 RestKit 解决了这个问题：RKObjectParameterization

当有一个设置为布尔值的 NSNumber 属性时，使用以下方法我的 NSManagedObjects 被正确序列化。

```
+ (NSString *)getJsonObjectWithDescriptor:(RKRequestDescriptor *)requestDescriptor objectToParse:(id)objectToParse {
    NSError *error = nil;
    NSDictionary *jsonDict = [RKObjectParameterization parametersWithObject:objectToParse requestDescriptor:requestDescriptor error:&error];
    NSData *data = [RKMIMETypeSerialization dataFromObject:jsonDict
                                                  MIMEType:RKMIMETypeJSON
                                                     error:&error];
    return [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:51:32.617

您可以前往 RestKit wiki 并查看[对象映射](https://github.com/RestKit/RestKit/wiki/Object-mapping)。在“对象参数化和序列化”段落中，您将找到有关序列化和反向映射的信息。

# jquery - 使用 jQuery Validate 确认密码

> ID：14703374
> 
> 赞同：77
> 
> 时间：2013-02-05T08:50:26.677
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jQuery 验证插件来确认我的密码输入。

但是，我不希望它成为必填字段。

如果用户想要更改密码，他们需要确认它。

如果不是，则不应验证这两个字段。

```
jQuery('.validatedForm').validate({
    rules: {
        password: {
            required: true,
            minlength: 5
        },
        password_confirm: {
            required: true,
            minlength: 5,
            equalTo: "#password"
        }
    }
}); 
```

这是完美的工作，但同样，这两个字段都是必需的。

我想有这个可选的，以防有人只想更改他们的电子邮件或用户名，而不要管密码。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-02-05T09:04:57.303

删除 `required: true`规则。

演示：[小提琴](http://jsfiddle.net/w8r5za7s/)

```
jQuery('.validatedForm').validate({
            rules : {
                password : {
                    minlength : 5
                },
                password_confirm : {
                    minlength : 5,
                    equalTo : "#password"
                }
            } 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-08-10T17:20:53.263

在这里只是一个快速的提示，希望能帮助其他人......尤其是新版本（因为这是 2 岁）......

除了在 JS 中定义一些静态字段，您还可以使用`data-rule-*`属性。您可以使用内置规则以及自定义规则。

有关内置规则，请参阅[http://jqueryvalidation.org/documentation/#link-list-of-built-in-validation-methods 。](http://jqueryvalidation.org/documentation/#link-list-of-built-in-validation-methods)

例子：

```
<p><label>Email: <input type="text" name="email" id="email" data-rule-email="true" required></label></p>
<p><label>Confirm Email: <input type="text" name="email" id="email_confirm" data-rule-email="true" data-rule-equalTo="#email" required></label></p> 
```

注意`data-rule-*`属性。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-24T07:12:21.683

如果 id 值和 name 值不同，它会起作用：

```
<input type="password" class="form-control"name="password" id="mainpassword">
password: {     required: true,     } , 
cpassword: {required: true, equalTo: '#mainpassword' }, 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-11T14:36:10.613

```
jQuery('.validatedForm').validate({
        rules : {
            password : {
                minlength : 5
            },
            password_confirm : {
                minlength : 5,
                equalTo : '[name="password"]'
            }
        } 
```

一般来说，你不会这样使用`id="password"`。所以，你可以使用`[name="password"]`而不是`"#password"`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-26T07:12:39.713

我在 Play Framework 中实现它，对我来说它是这样工作的：

1) 请注意，我在 id inputPassword1 的输入标签中使用了 data-rule-equalTo。我的模态中用户窗体的代码部分：

```
<div class="form-group">
    <label for="pass1">@Messages("authentication.password")</label>
    <input class="form-control required" id="inputPassword1" placeholder="@Messages("authentication.password")" type="password" name="password" maxlength=10 minlength=5>
</div>
<div class="form-group">
    <label for="pass2">@Messages("authentication.password2")</label>
    <input class="form-control required" data-rule-equalTo="#inputPassword1" id="inputPassword2" placeholder="@Messages("authentication.password")" type="password" name="password2">
</div> 
```

2）因为我在模态中使用了验证器

```
$(document).on("click", ".createUserModal", function () {
       $(this).find('#userform').validate({
           rules: {
               firstName: "required",
               lastName: "required",
               nationalId: {
                   required: true,
                   digits:true
               },
               email: {
                   required: true,
                   email: true
               },
               optradio: "required",
               password :{
                   required: true,
                   minlength: 5
               },
               password2: {
                   required: true
               }
           },
           highlight: function (element) {
               $(element).parent().addClass('error')
           },
           unhighlight: function (element) {
               $(element).parent().removeClass('error')
           },
           onsubmit: true
       });

   }); 
```

希望它可以帮助某人:)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-20T06:54:49.663

```
<script>

     $(document).ready(function(){            

     });

     function login() {

         var password = $("#psw").val()
         var password1 = $("#psw1").val()
         var pswlen = password.length;
         if (pswlen < 8) {
             alert('minmum  8 characters needed')
         }
         else {

            if (password == password1) {
                 alert('continue');
                 window.location.replace("http://stackoverflow.com");
             }
             else {
                 alert('failed');
             }

         }

     }

</script> 
```

# android - 如何让按钮占据gridview？

> ID：14703376
> 
> 赞同：0
> 
> 时间：2013-02-05T08:50:30.140
> 
> 标签：android, button, gridview

我正在开发一个项目，其中一个按钮将占据网格视图中的两个或多个单元格。那可能吗？我最初所做的是使用 imageadapter，但它仅限于 gridview 中的每个单元格。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:27:17.193

好的，阅读您的评论后，我建议您使用 SurfaceView。它更适合您的游戏。
这是一个很好[的初学者游戏教程](http://www.edu4java.com/androidgame.html)。
只需用您的战舰替换图像即可。

# c# - ListBox 和 Checkbox 中有大量数据的奇怪行为 [提供的最小项目]

> ID：14703379
> 
> 赞同：2
> 
> 时间：2013-02-05T08:50:37.000
> 
> 标签：c#, silverlight, windows-phone-7, listbox

对于那个问题，我做了一个最小的项目让每个人都体验这种行为。我希望它不只是在我这样运行的引擎上。

[最小项目](http://www57.zippyshare.com/v/66809205/file.html)

在我的项目中，我实现了一个包含大量示例数据的列表框。列表框也有每个项目的复选框元素。

**问题：**首先我选中/取消选中列表框中的复选框。然后我在列表框中滚动了几次。现在我注意到很多复选框被随机选中/取消选中。如果我将 ListBox 剪掉一点（参见源代码中的注释），就不会出现奇怪的行为。编辑:: 如果您没有这个问题，请尝试检查列表最底部的项目。也许您必须使用更多对象扩展列表才能看到问题。

这里有一些代码片段。如您所见，我已经尝试使用 List/ObservableCollection、PropertyChanged 和 LongListSelector 而不是 Listbox。

**C＃**

```
 // Already tried to use simple List<SampleCheckedData> buildings. 
    // Doesnt change anything.
    private ObservableCollection<SampleCheckedData> buildings;

    // Already tried with this as well.
    /*protected ObservableCollection<SampleCheckedData> Buildings
    {
        get
        {
            return buildings;
        }
        set
        {
            buildings = value;
        }
    }*/

    public MainPage()
    {
        InitializeComponent();

        buildings = new ObservableCollection<SampleCheckedData>();

        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Drizzle", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Snow", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Drizzle", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Snow", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Drizzle", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Snow", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Drizzle", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Snow", IsChecked = false });

        // If you comment this data out, the listbox is smaller and no problem occurs in my case.
        buildings.Add(new SampleCheckedData() { Name = "Cloudy" , IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Drizzle", IsChecked = false });
        buildings.Add(new SampleCheckedData() { Name = "Snow", IsChecked = false });
        // If you comment this data out, the listbox is smaller and no problem occurs in my case. [END]

        this.listBox2.ItemsSource = buildings;
    } 
```

我的选中/取消选中事件：

```
 private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        //Use this if you use the LongListSelector.
        //ListBoxItem checedItem = this.listBox2.SelectedItem as ListBoxItem;

        ListBoxItem checedItem = this.listBox2.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
        if (checedItem != null)
        {
            checedItem.IsSelected = true;
        }
    }

    private void CheckBox_Unchecked(object sender, RoutedEventArgs e)
    {
        //Use this if you use the LongListSelector.
        //ListBoxItem checedItem = this.listBox2.SelectedItem as ListBoxItem;

        ListBoxItem checedItem = this.listBox2.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
        if (checedItem != null)
        {
            checedItem.IsSelected = false;
        }
    } 
```

还有我的简单数据类：

```
public class SampleCheckedData
{
    //Already tried with this, but it is not working.

    /*
    private bool _isChecked;
    public bool IsChecked
    {
        get { return _isChecked; }
        set
        {
            if (_isChecked != value)
            {
                _isChecked = value;
                NotifyPropertyChanged("IsChecked");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    } 
    */

    public bool IsChecked
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }
} 
```

**XAML**

我的内容如下所示：

```
 <!--ContentPanel - zusätzliche Inhalte hier platzieren-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <ListBox x:Name="listBox2" SelectionMode="Multiple">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding IsChecked}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                        <TextBlock Text="{Binding Name}" Width="150" VerticalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!--//Use this if you use the LongListSelector.-->
        <!--<toolkit:LongListSelector  x:Name="listBox2"  Background="Transparent" IsFlatList="True"   ItemTemplate="{StaticResource citiesItemTemplate}" />-->

    </Grid> 
```

如果您想使用 LongListSelector 进行尝试，则可选，包括：

```
 <DataTemplate x:Key="citiesItemTemplate">
        <StackPanel Grid.Column="1"  VerticalAlignment="Top">
            <TextBlock Text="{Binding Name}" FontSize="26"  Margin="12,-12,12,6"/>
            <CheckBox IsChecked="{Binding IsChecked}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
        </StackPanel>
    </DataTemplate> 
```

和`xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"`

我希望有人能解决这个问题。没有找到任何线索...

编辑：

**相关问题：**

[一](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/7c2f865b-04c1-4b3a-b9ee-d8a66d15665d/) [二三](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/635612e4-4ff6-4fee-a093-5d8ab4aedcfe/) [_](https://stackoverflow.com/questions/12026890/listbox-bindind-error-scrolling)

编辑：

我注意到您必须在列表中添加更多 eobjects 才能出现此问题：

```
 buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
    buildings.Add(new SampleCheckedData() { Name = "Sun", IsChecked = false });
    buildings.Add(new SampleCheckedData() { Name = "Cloudy", IsChecked = false });
    ..... 
```

然后，当您检查列表顶部或底部的项目时，就会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:55:18.967

您永远不会保存复选框的选定状态。修复您的 XAML：

`<CheckBox IsChecked="{Binding IsChecked,Mode=TwoWay}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>`

# spring-security - 从 Spring Security 中的链接以编程方式登录

> ID：14703381
> 
> 赞同：0
> 
> 时间：2013-02-05T08:50:39.737
> 
> 标签：spring-security

我正在尝试自动授权而无需在 Spring Security 中登录。用户将通过单击网站中的链接获得授权。

我有一个类 UserLoginService ，它从这样的 spring-security xml 文件中调用；

```
 <authentication-manager>
        <authentication-provider user-service-ref="userLoginService" >
            <password-encoder hash="md5"/>   
        </authentication-provider> 
    </authentication-manager>

    <beans:bean id="userLoginService"
        class="tr.com.enlil.formdesigner.server.guvenlik.UserLoginService">

    </beans:bean> 
```

用户登录服务类；

```
public class UserLoginService implements UserDetailsService {
    private static Logger logger = Logger.getLogger(InitServlet.class);

    @Autowired
    private IKullaniciBusinessManager iKullaniciBusinessManager;

    /**
     * {@inheritDoc}
     */
    @Override
    public UserDetails loadUserByUsername(String username) {
        try {
            Kullanici kullanici = new Kullanici();
            kullanici.setKullaniciAdi(username);
            Kullanici kullaniciBusinessManager = iKullaniciBusinessManager.getirKullaniciAdinaGore(kullanici);
            User user = new User();
            if (kullaniciBusinessManager != null && kullaniciBusinessManager.getAktifmi()) {
                user.setUsername(kullaniciBusinessManager.getKullaniciAdi());
                user.setPassword(kullaniciBusinessManager.getSifre());
                user.setKullanici(kullaniciBusinessManager);
                List<String> yetkiListesi = new ArrayList<String>();
                List<GrantedAuthority> grandAuthorities = new ArrayList<GrantedAuthority>();
                //TODO yetkilerle alakalı birşey yapmak gerekebilir.
                for (String yetki : yetkiListesi) {
                    GrantedAuthorityImpl g = new GrantedAuthorityImpl(yetki);
                    grandAuthorities.add(g);
                }
                user.setAuthorities(grandAuthorities);
            }
            return user;
        } catch (Exception e) {
            logger.error("Kullanici alinirken hata olustu!!", e);
        }
        return null;

    }

    public static void autoLogin(User user, HttpServletRequest request, AuthenticationManager authenticationManager) {

        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(user.getUsername(),
                user.getPassword(), user.getAuthorities());

        // generate session if one doesn't exist
        request.getSession();

        token.setDetails(new WebAuthenticationDetails(request));
        Authentication authenticatedUser = authenticationManager.authenticate(token);

        SecurityContextHolder.getContext().setAuthentication(authenticatedUser);
        // setting role to the session
        request.getSession().setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY,
                SecurityContextHolder.getContext());

    }
} 
```

[我从没有用户名/密码](https://stackoverflow.com/questions/4125862/make-programmatic-login-without-username-password)的 Make Programmatic login 中找到了 autoLogin 方法？. 但我不知道，我可以从哪里调用这个方法，这段代码对我有帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:38:58.583

您必须创建自己的 AbstractPreAuthenticatedProcessingFilter 实现。getPreAuthenticatedPrincipal(HttpServletRequest request) 方法将具有可以从中获取凭据的请求。如果它是有效用户，则需要返回主题；如果不是，则需要返回 null。您的 UserDetailsS​​ervice 实现会将主题转换为 UserDetails 对象。

# asp.net - ASP.Net循环引用情况

> ID：14703383
> 
> 赞同：2
> 
> 时间：2013-02-05T08:50:45.400
> 
> 标签：asp.net

我有以下代码，每次尝试编译时，都会收到错误消息“/Website/InsightLogo.ascx 有循环引用！” 我被指派修复别人的代码，所以请原谅任何奇怪的错误

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="InsightLogo.ascx.vb" Inherits="eDox.InsightLogo" %>
<%@ Register Src="InsightLogo.ascx" TagName="InsightLogo" TagPrefix="uc1" %>
&nbsp;<img src="Images/InsightLogo.bmp" alt="Company Logo"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:56:17.877

您的控件正在尝试注册自己。

您应该删除以下行：

```
<%@ Register Src="InsightLogo.ascx" TagName="InsightLogo" TagPrefix="uc1" %> 
```

# python - 带有 MySQL 测试的 Django 示例 .travis

> ID：14703388
> 
> 赞同：2
> 
> 时间：2013-02-05T08:50:54.340
> 
> 标签：python, django, travis-ci

需要一个 .travis 示例 yaml 文件来对 Django 上的 mysql 查询进行单元测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:50:54.340

这是一个`.travis.yaml`使用 MySQL 集成进行 Django 单元测试的示例。

```
language: python
python:
  # - "2.6"
  - "2.7"
services: mysql
env:
  # - DJANGO=1.2.7
  # - DJANGO=1.3.1
  - DJANGO=1.4.3 DJANGO_SETTINGS_MODULE="mysite.travis_settings"
install:
  - pip install -q Django==$DJANGO --use-mirrors
  - pip install pep8 --use-mirrors
  - pip install mysql-python --use-mirrors
  # - pip install https://github.com/dcramer/pyflakes/tarball/master
  # - pip install -q -e . --use-mirrors
before_script:
#   - "pep8 --exclude=migrations --ignore=E501,E225 src"
#   - pyflakes -x W src
  - mysql -e 'create database mysite_db;'
  - python manage.py syncdb --noinput
script:
  - python manage.py test 
```

# android - 在 Android 中模拟静态函数

> ID：14703391
> 
> 赞同：2
> 
> 时间：2013-02-05T08:50:58.910
> 
> 标签：android, mocking, mockito

有什么方法可以使用任何 Mocking Framework 在 Android 中模拟静态函数。Mockito 可以模拟类，但不足以模拟静态函数。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:06:32.013

模拟通过使用面向对象、继承等概念来工作......

基本上是通过覆盖看起来像真实对象的对象/实例中的某些方法和行为，因为它们是这些真实对象的子类。

换句话说，模拟部分来自于实例上的重写方法。

无法覆盖静态方法 (afaik)。

因此，模拟静态调用并不容易（如果可能的话）。

* * *

## 编辑 - 我错了......

事实证明，我在上面的陈述中是错误的，这是不可能的。

我应该在这个网站上搜索重复的问题。有关在某些情况下声称可以为您执行此操作的框架的一些链接，请参见下文。由于它们使用字节码，我不确定它们能否在 Android (ymmv) 上正常工作。

*   [模拟静态方法](https://stackoverflow.com/questions/5402507/mocking-static-methods)

*   [如何在 Java (jUnit4) 中轻松模拟出静态方法](https://stackoverflow.com/questions/1203027/how-can-i-easily-mock-out-a-static-method-in-java-junit4)

* * *

（感谢 Rohit 强迫我重新评估我的信念）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-25T02:50:24.143

请改用这个：[https ://bintray.com/linkedin/maven/dexmaker-mockito-inline-extended](https://bintray.com/linkedin/maven/dexmaker-mockito-inline-extended)

它帮助我成功地模拟了 Android Instrumented Tests 中的静态方法，但请注意，此功能需要**在至少具有 Android P**的设备上运行。

这是我所做的：

*   替换`androidTestImplementation 'org.mockito:mockito-android:2.28.0'`为`androidTestImplementation 'com.linkedin.dexmaker:dexmaker-mockito-inline-extended:2.28.0'`

*   然后像这样模拟静态方法：

    ```
    static class StaticTrojan {
        static String staticOpen() { return "horse"; }
    }

    @Test
    public void testStubbingStaticMethod() {
        MockitoSession session = mockitoSession().spyStatic(StaticTrojan.class).startMocking();
        try {
            when(StaticTrojan.staticOpen()).thenReturn("soldiers");
            assertEquals("soldiers", StaticTrojan.staticOpen());
        } finally {
            session.finishMocking();
        }

        // Once the session is finished, all stubbings are reset
        assertEquals("horse", StaticTrojan.staticOpen());
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T05:58:10.903

如果您使用**Kotlin**，那么要模拟静态函数，您可以连接[mockk](https://mockk.io/)库项目：

```
androidTestImplementation "io.mockk:mockk-android:1.12.0" 
```

然后，如果您的测试位于应用程序模块中，则需要将一个添加`AndroidManifest.xml`到**androidTest目录。**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="you.application.package">

    <application
        android:debuggable="true"
        android:extractNativeLibs="true" />
</manifest> 
```

然后您可以使用以下代码模拟静态函数：

```
import io.mockk.every
import io.mockk.mockkStatic
import io.mockk.unmockkStatic
import org.junit.Assert.assertEquals
import org.junit.Test

class TestMockingStaticFunction {

    object StaticTrojan {

        @JvmStatic
        fun staticOpen(): String {
            return "horse"
        }
    }

    @Test
    fun testMockingStaticFunction() {
        assertEquals("horse", StaticTrojan.staticOpen())

        mockkStatic(StaticTrojan::staticOpen)
        val mockScope = every { StaticTrojan.staticOpen() } returns "solders"

        assertEquals("solders", StaticTrojan.staticOpen())

        unmockkStatic(StaticTrojan::staticOpen)

        assertEquals("horse", StaticTrojan.staticOpen())
    }
} 
```

库**API**允许您轻松地模拟**Kotlin**对象，在上面的示例中，该对象仅用于使用`@JvmStatic`注释创建静态函数。

**注意**！这种方法使用从**API级别 28 开始在****Android P**中可用的[JVMTI](https://en.wikipedia.org/wiki/Java_Virtual_Machine_Tools_Interface) 。您的应用程序可以使用较小的**API**编写，但您必须仅在**Android P**设备或更新的设备上运行测试。

# android - 清除 ANDROID 中的应用数据

> ID：14703392
> 
> 赞同：0
> 
> 时间：2013-02-05T08:51:01.327
> 
> 标签：android, database, sqlite

为什么每当我清除我的应用程序数据时，我以前工作的`SQLite`数据库就不再工作了？这是我的数据库代码：

```
package tsu.ccs.capstone;

import android.content.ContentValues;  
import android.content.Context;  
import android.database.Cursor;  
import android.database.SQLException;  
import android.database.sqlite.SQLiteDatabase;  
import android.database.sqlite.SQLiteOpenHelper;  
import android.util.Log;  

public class DBUser {
public static final String KEY_ROWID = "_id";  
public static String KEY_USERNAME= "username";  
public static String KEY_PASSWORD = "password"; 
public static String KEY_NUMBER = "number";
private static final String TAG = "DBAdapter";  

private static final String DATABASE_NAME = "usersdb";  
private static final String DATABASE_TABLE = "users";  
private static final int DATABASE_VERSION = 1;  

private static final String DATABASE_CREATE =  
    "create table users (_id integer primary key autoincrement, "  
    + "username text not null, "
    + "password text not null, "
    + "number text not null);";  

private Context context = null;  
private DatabaseHelper DBHelper;  
private SQLiteDatabase db;  

public DBUser(Context ctx)  
{  
    this.context = ctx;  
    DBHelper = new DatabaseHelper(context);  
}  

private static class DatabaseHelper extends SQLiteOpenHelper  
{  
    DatabaseHelper(Context context)  
    {  
        super(context, DATABASE_NAME, null, DATABASE_VERSION);  
    }  

    //creating the DB
    @Override  
    public void onCreate(SQLiteDatabase db)  
    {  
        db.execSQL(DATABASE_CREATE);  
    }  

    @Override  
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)  
    {  
        Log.w(TAG, "Upgrading database from version " + oldVersion  
                + " to "  
                + newVersion + ", which will destroy all old data");  
        db.execSQL("DROP TABLE IF EXISTS users");  
        onCreate(db);  
    }  
}      

//open DB for writing/reading mode
public void open() throws SQLException  
{  
    db = DBHelper.getWritableDatabase();  
}  

//close the DB
public void close()  
{  
    DBHelper.close();  
}      

//insert Initial Values to the DB
public long AddUser()  
{  
     ContentValues initialValues = new ContentValues();  
     initialValues.put(KEY_USERNAME, "admin");  
     initialValues.put(KEY_PASSWORD, "admin");  
     return db.insert(DATABASE_TABLE, null, initialValues);
}  

//delete the entire rows
public long DeleteUser()  
{  
    return db.delete(DATABASE_TABLE, "1", null);
} 

public boolean CheckContent()  
{  
    Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE _id=1", null);  
    if (mCursor != null) {  
        if(mCursor.getCount() > 0)  
        {  
            return true;  
        } 
    }  
 return false;
} 

//update the DB
public boolean UpdateUser(long rowId, String username, String password)  
{  
     ContentValues newCon = new ContentValues();  
     newCon.put(KEY_USERNAME, username);  
     newCon.put(KEY_PASSWORD, password);  
     return db.update(DATABASE_TABLE, newCon, KEY_ROWID + "=" + rowId, null) > 0;   
} 

// searching the DB for username and password match
public boolean Login(String username, String password) throws SQLException  
{  
    Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE username=? AND password=?", new String[]{username,password});  
    if (mCursor != null) {  
        if(mCursor.getCount() > 0)  
        {  
            return true;  
        } 
    }  
 return true;  
}

//Store Recipient's Number to the DB
public boolean EditNumber(long rowId, String number)  
{  
     ContentValues editNumber = new ContentValues();
     editNumber.put(KEY_NUMBER, number);
     return db.update(DATABASE_TABLE, editNumber, KEY_ROWID + "=" + rowId, null) > 0;

} 

public Cursor newNumber() {

    String query = "SELECT * FROM " + DATABASE_TABLE + " WHERE _id=1";
    System.out.println(query);
     Cursor cur = db.rawQuery(query, null);
     cur.moveToFirst();
     return cur;

   }

} 
```

这是我的第一个活动：

```
package tsu.ccs.capstone;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.Menu;
import android.view.View;

public class FirstActivity extends Activity {

final String PREFS_NAME = "FirstTimeCheker";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first);
    overridePendingTransition (R.anim.incoming, R.anim.outgoing);

    DBUser dbUser = new DBUser(FirstActivity.this);  
    dbUser.open();

    if(dbUser.CheckContent()){
        //do nothing
    } else {
        dbUser.AddUser();
    }
    dbUser.close();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_first, menu);
    return true;
}

public void gotoLogin (View v) {        
    SharedPreferences mPrefs;
    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);

    // second argument is the default to use if the preference can't be found
    Boolean RegisterScreenShown = mPrefs.getBoolean(PREFS_NAME, false);

    if (!RegisterScreenShown) {
        Intent intentIntro = new Intent(this, RegisterActivity.class);
        startActivity(intentIntro);
        overridePendingTransition (R.anim.incoming, R.anim.outgoing);

        SharedPreferences.Editor editor = mPrefs.edit();
        editor.putBoolean(PREFS_NAME, true);
        editor.commit(); // Very important to save the preference
    }else{
        Intent intentAlecc = new Intent(this, AleccActivity.class);
        startActivity(intentAlecc);
        overridePendingTransition (R.anim.incoming, R.anim.outgoing);
    }
}

public void gotoCctv (View v) {
    Intent intent = new Intent(this, CctvActivity.class);
    startActivity(intent);
    overridePendingTransition (R.anim.incoming, R.anim.outgoing);
}

public void editUser (View v) {
    Intent intent = new Intent(this, EditUserActivity.class);
    startActivity(intent);
    overridePendingTransition (R.anim.incoming, R.anim.outgoing);
}

@Override
public void onBackPressed() {
  super.onBackPressed();
  overridePendingTransition (R.anim.incoming, R.anim.outgoing);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:09:03.800

数据库是应用程序数据的一部分。您的数据库不再工作，因为它不再存在。它与所有 resp 应用程序数据一起被删除。您的应用程序的每个 SQLite 数据库都表示为一个文件，当您清除应用程序数据时，该数据库文件将被删除。

[在这篇博](http://android-by-example.blogspot.com/2012/12/developing-notepad-application-part-1.html)文中，您可以找到数据库文件的位置以及如何使用它。您可以浏览设备上的文件系统并在其中找到它。

将调试点放在 SQLiteOpenHelper 的 onCreate() 方法中，看是否执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:59:20.757

我没有尝试过，但您似乎有一个包含私有 DatabaseHelper 类的 DBUser 类。

当数据库不存在时，Android 会自动调用 onCreate 方法，但我认为它在您的情况下是隐藏的。尝试将 DatabaseHelper 移到 DBUser 类之外。

# visual-studio-2010 - 在 Visual Studio 2010 MVC 4 基本模板中使用 SimpleMemberShipProvider

> ID：14703394
> 
> 赞同：0
> 
> 时间：2013-02-05T08:51:09.830
> 
> 标签：visual-studio-2010, c#-4.0, razor, asp.net-mvc-4, simplemembership

很长一段时间以来，我一直在寻找一个很好的指南来开发一个 MVC 4 应用程序，它将使用 SimpleMemberShipProvider。

我在 Visual Studio 2010 中使用 MVC4 Basic 模板创建了一个项目。因此，它没有提供视图、模型或控制器。您能否逐步说明如何使该项目使用 SimpleMemberShip Provider 来管理其所有用户注册、登录和表单身份验证。使用 Visual Studio express 2012的所有示例`Google`。（但是，我不能将其用于公司政策和项目要求。）所以，请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:08:53.527

很抱歉将此评论作为答案，但我没有足够的声誉发表评论。

我手边没有 VS 2010，但我知道在 VS 2012 上，您可以使用 .NET Framework 4.0 创建一个 MVC4 项目，如果您使用 Internet 应用程序模板，它将构建所有简单成员资格代码。

如果在 VS 2010 中执行上述操作不会生成简单成员功能，也许您可​​以运行 VS 2012 足够长的时间来生成代码，然后使用 VS 2012 代码来指导在 VS 2010 中实现相同的功能。我认为重要的部分应该是 MVC4 简单成员，而不是 VS 的特定版本。

# java - 使用 distanceTo 方法

> ID：14703396
> 
> 赞同：1
> 
> 时间：2013-02-05T08:51:15.570
> 
> 标签：java, android

我的代码应该接受精度低于 100 的位置，如果新位置精度**小于**20 中的旧位置精度，则使用新位置精度。此外，如果从新位置到旧位置的距离大于 200，则使用它。

我不知道为什么，但在测试我的代码后，我在我的数据库中得到了以下位置：

![在此处输入图像描述](../Images/6ad7aee396e402162049372e2924414f.png)

最后3条记录相距不到200m，我怎么用它们？这是代码：

```
int Aloc = (int) loc.getAccuracy();
int AnewLoc = (int) newLoc.getAccuracy();
if(Aloc > AnewLoc +20)
    sendTask();
else
{
    float distance = loc.distanceTo(newLoc);
    if(distance > 200)
        sendTask();
} 
```

此代码执行到其准确度小于 100 的位置。

**将条件更改为后**编辑****

 **```
if((AnewLoc+20) < Aloc) 
```

我收到以下记录： ![在此处输入图像描述](../Images/6a77182d4ce41059d121e246c91865eb.png)

新记录比旧记录精度更高，距离小于200（0.01407公里，即14米）。我不明白它是如何通过代码传递到数据库的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:57:21.360

像这样更改您的检查逻辑

```
int Aloc = (int) loc.getAccuracy();
int AnewLoc = (int) newLoc.getAccuracy();
if(AnewLoc < ( Aloc+20))
    sendTask();
else
{
    float distance = loc.distanceTo(newLoc);
    if(distance > 200)
        sendTask();
} 
```

这应该工作**

# sencha-touch - 使用商店填充自定义组件

> ID：14703405
> 
> 赞同：0
> 
> 时间：2013-02-05T08:51:58.177
> 
> 标签：sencha-touch, sencha-touch-2, store

我试图在 Sencha Touch 2 项目中使用商店（实际上是带有本地数据的商店）填充自定义组件。

我的想法是为商店中的每个元素创建一个自定义组件，但实际上什么也没发生。

我已经尝试了几件事，但没有任何效果，你能帮帮我吗？我做了一个例子来说明这个问题：

**模型：**

```
Ext.define('project.model.city', {
  extend: 'Ext.data.Model',
  config: {
    fields: [
      {name: 'country', type: 'string'},
      {name: 'city', type: 'string'}
    ]
  }
}); 
```

**店铺：**

```
Ext.define('project.store.cities', {
  extend: 'Ext.data.Store',
  requires: ['project.model.city'],
  model: 'project.model.city',
  autoLoad: true,
  data: [
    { country: 'Germany', city: 'Berlin' },
    { country: 'Italy', city: 'Rome' }
  ]
}); 
```

**与商店一起查看：**

```
Ext.define('project.view.cityAll', {
  extend: 'Ext.Panel',
  xtype: 'cityAllView',
  config: {
    items:[{
      xtype: 'cityItemView',
      store: 'project.store.cities',
    }]
  }
}); 
```

**自定义组件视图：**

```
Ext.define('project.view.cityItem', {
  extend: 'Ext.Panel',
  xtype: 'cityItemView',
  config: {
    items: [{
      itemTpl: '{city}'
    }]
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:24:30.933

您需要将商店分配给 cityItemView 而不是 cityAllView。`cityItemView`指定了模板，需要加载数据。

```
Ext.define('project.view.cityItem', {
  extend: 'Ext.Panel',
  xtype: 'cityItemView',
  config: {
    items: [{
      xtype:'list', 
      itemTpl: '{city}'
      store:'project.store.cities'
    }]
  }
}); 
```

如果要将数据设置到面板中，则需要调用`setData()`. 面板不能直接从商店加载数据。您可以改用列表视图，以便显示城市、国家/地区对。cityView 不再需要以这种方式存储属性。

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:14:23.470

您可以在 store 中添加负载侦听器，该侦听器将遍历记录并创建尽可能多的面板：

```
 listeners : {
        load: function( me, records, successful, operation, eOpts ){ 
            var plist = [];
            var cv = Ext.Create('project.view.cityAll');
            if(successful){

                var data = records[i].getData();
                for(var i=0; i<records.length; i++){
                    plist.push({
                        xtype : 'cityItemView',
                        data : data
                    });
                }
                cv.add(plist);
            } 
            // Now add cv to viewport or wherever you want
        }
} 
```

你必须改变`cityItemView`以任何你想要的方式使用数据。如果您使用的是初始化方法，您可以像这样访问它`this.config.data`

# c# - Sharepoint 2007：带有确认活动的工作流

> ID：14703412
> 
> 赞同：0
> 
> 时间：2013-02-05T08:52:04.463
> 
> 标签：c#, sharepoint, workflow, sharepoint-workflow

我正在实施执行以下活动的 SharePoint 工作流。

1.  用户上传excel
2.  系统将验证，如果数据正确，将临时将数据保存在 SPList 中
3.  用户将访问一个确认正确性的页面。
4.  当用户单击确认时，数据将被插入数据库。

我想问一下在 SharePoint 2007 工作流程中是否可以执行第 3 步。任何参考或指南将不胜感激

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:25:14.767

你可以在这里做的是有一个工作流，它会等到 SharePoint 中的某个字段（如果这是你这样做的方法）得到确认，当这种情况发生时继续你制作的工作流（假设这是使用 SharePoint 设计器制作的） ）。

# google-apps-script - 从上下文菜单触发电子表格中的 Google Apps 脚本

> ID：14703413
> 
> 赞同：2
> 
> 时间：2013-02-05T08:52:04.597
> 
> 标签：google-apps-script, google-sheets, google-docs

我`Google Apps Script`在`Spreedsheet`当前选定的行上工作。要运行它，我必须从脚本管理器中选择这个脚本。是否可以将此脚本添加到上下文菜单或绑定到某个快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:19:27.507

您可以创建一个带有按钮的菜单，该菜单将使用 onOpen 函数运行您想要的脚本。请参阅[Apps 脚本文档](https://developers.google.com/apps-script/class_spreadsheet#addMenu)。

```
function onOpen() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{
    name : "Read Data",
    functionName : "readRows"
  }];
  sheet.addMenu("Script Center Menu", entries);
}; 
```

然后你会有一些像这样的其他功能。

```
function readRows() { 
```

这可以执行您想要的任何功能，并且您可以拥有多个执行不同操作的菜单项。

注意：`onOpen`有时需要一段时间才能加载，因此请等待 5 秒。

# c# - 基于现有 XSD 架构将对象序列化为 XML

> ID：14703416
> 
> 赞同：1
> 
> 时间：2013-02-05T08:52:18.620
> 
> 标签：c#, xml, xsd, xml-serialization, xsd-validation

我必须创建一个基于某个 XML 模式文档的 XML 文档。由于我的数据是`DataSet`，我需要找到最好的开始方式。

我有几个不同的想法如何开始：

*   手动创建与 XSD 匹配的节点、元素和属性
*   转换`DataSet`为与模式文档匹配的类并将其序列化
*   别的东西？

这是获取 XML 输出`DataSet`以匹配 XSD 模式的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:57:03.640

也许您应该尝试一下 XMLBeans……它是一个用于处理已编译 XSD 模式的多样化框架。在此上下文中编译意味着，您可以从 XSD 文件创建 JAVA 类。

编译示例（可以在[这里](http://xmlbeans.apache.org/index.html#Getting+Started)看到）`scomp -out purchaseorder.jar purchaseorder.xsd`

在你的类路径中使用这个 jar，你可以创建新的先验有效的模式实例，例如：

```
public PurchaseOrderDocument createPO() {
    PurchaseOrderDocument newPODoc = PurchaseOrderDocument.Factory.newInstance();
    PurchaseOrder newPO = newPODoc.addNewPurchaseOrder();
    Customer newCustomer = newPO.addNewCustomer();
    newCustomer.setName("Doris Kravitz");
    newCustomer.setAddress("Bellflower, CA");
    return newPODoc;
} 
```

您可以在“从模式创建新的 XML 实例”标题下找到整个示例：[XMLBeans 教程。](http://xmlbeans.apache.org/docs/2.0.0/guide/conGettingStartedwithXMLBeans.html)

# ado.net - 请求的功能未实现 monodevelop

> ID：14703421
> 
> 赞同：1
> 
> 时间：2013-02-05T08:52:43.843
> 
> 标签：ado.net, monodevelop, oledb

我正在尝试在 MonoDevelop 中调试我的项目。我正在使用接口 ADO.net。但我不断收到以下错误：

> 请求的功能未在 System.Data.OleDb.OleDbConnection.Dispose 中实现（布尔处理）

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:33:11.060

Mono 对 OLE DB 提供程序的实现并不完整，因为 OLE DB 是一个本地 Windows API（Mono 的实现封装了 Linux libgda）。我建议您使用不同的 ADO.NET 提供程序。

# vb.net - 用文本框VB过滤datagridview

> ID：14703435
> 
> 赞同：0
> 
> 时间：2013-02-05T08:53:45.300
> 
> 标签：vb.net, forms, events, datagridview, textbox

我创建了一个包含数据网格视图的表单并附加了一个数据源，如果我想查看每条记录但我只希望它显示某个人的视图，我发现了一些人们声称有效的代码但是当我运行程序我得到一个语法错误...

语法错误：“数字”运算符后缺少操作数。

自从我是编程新手以来，SO 在过去帮了我很多，如果我可以问你们能再帮我一次吗？

```
Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) _ 
                                  Handles TextBox1.TextChanged
    If TextBox1.TextLength > 0 Then
        frmReportMenu.ProjectBindingSource.Filter = _ 
                String.Format("Register number Like '%" & TextBox1.Text) & "%'"
    Else
        frmReportMenu.ProjectBindingSource.Filter = String.Empty
    End If
End Sub 
```

当用户单击按钮时，我创建了一个按钮，一个带有文本框的表单出现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:16:19.777

我假设列名是给你错误的原因。根据我的评论，

它不应在`Register`和之间包含空格`Number`。如果它有一个空格，那么你必须像这样包装列名：`[Register number]`

请试试这个： `String.Format("[Register number] Like '%" & TextBox1.Text) & "%'"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T23:15:57.040

右括号应该在这里：`String.Format("Register number Like '%" & TextBox1.Text & "%'")`

不在这里：`String.Format("Register number Like '%" & TextBox1.Text) & "%'"`

# winapi - 将 WM_HSCROLL 发送到其他程序

> ID：14703436
> 
> 赞同：1
> 
> 时间：2013-02-05T08:53:50.457
> 
> 标签：winapi, visual-c++, scrollbar, powerpoint

我试图通过发送 WM_HSCROLL 来滚动其他程序（PowerPoint 2013），并且只有当我向 SendMessage 提供正确的 LPARAM（非 NULL）时它才会起作用。

LPARAM 的值是动态的，如果您关闭并打开一个新程序，它会发生变化。现在我只能通过挂钩 WM_HSCROLL 并手动单击滚动条来获得它的值。

```
// This is my code: 
LPARAM lParam = 0x0a616c38;  // Found by hooking WM_HSCROLL
SendMessage(hTarget, WM_HSCROLL, SB_LINERIGHT, lParam); 
```

那么是否有可能以编程方式获得正确的 LPARAM？
非常感谢！

ps 滚动条不是 PowerPoint 2013 中的真实窗口。
ps 如果我使用 GetScrollInfo(hTarget, SB_CTL, &scrollinfo)，它会返回 1，但 scrollinfo 中的所有值都为零。
ps [Office Home and Student 2013 官方网站](http://office.microsoft.com/en-us/home-and-student/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:02:28.917

您是否尝试调用 GetLastError？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:10:46.717

`GetScrollInfo`可能无法跨流程边界工作，所以我想说这就是为什么你没有得到有效值的原因。

对于标准窗口滚动条，消息的`lParam`值`WM_HSCROLL`或者是 NULL，或者是滚动控件的句柄。每次运行程序时，滚动控件的句柄显然会发生变化，因此您需要自己找出这一点，然后才能可靠地模拟滚动输入。

为此，您可以使用该`FindWindowEx`函数在父窗口（在您的示例中为 hTarget）搜索“SCROLLBAR”类的子窗口。因为您可能会发现不止一个滚动条子窗口，您需要一些方法来区分它们——最有可能的是，通过窗口的 GWL_ID 值，因为这可能不会随着运行而改变。

# php - 如何使用 PHP 和 pdftk 对 PDF 进行排序和合并

> ID：14703440
> 
> 赞同：1
> 
> 时间：2013-02-05T08:53:57.107
> 
> 标签：php, sorting, pdftk

我有一个 PHP 程序，它从后端获取大量单独的 PDF 并保存到一个文件夹中。

目前我正在使用 pdfk 来合并 pdf。下面是使用的示例代码：

```
exec("pdftk.exe *.pdf cat output merged.pdf"); 
```

如何根据特定顺序合并它们，第一个作为第一页获取到最后一个作为最后一页获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:57:49.537

您可以读取目录并使用`filemtime()` 可能迭代槽文件检查文件的创建时间戳并将时间和文件名放入数组中，然后对数组进行排序，然后创建绑定pdf

[文件时间（）](http://php.net/manual/en/function.filemtime.php)

# javascript - :not 选择器的使用

> ID：14703441
> 
> 赞同：0
> 
> 时间：2013-02-05T08:53:57.967
> 
> 标签：javascript, jquery

我有一个包含不同部分的网站。我有 jQuery 在这些部分之间滑动。但现在我在一个部分中有一个链接指向另一个部分。

**HTML**：

```
 <div class="section" id="one">
        <div class="row">
            <p>This is some text</p>
        </div>
        <div class="row">
            <a href="#" onclick="scrollOrderNow()"><img src="button"/></a>
        </div>
    </div>
    <div class="section" id="tow">
        <div class="row">
            <p>This is some text</p>
        </div>
        <div class="row">
            <a href="#" onclick="scrollOrderNow()"><img src="button"/></a>
        </div>
    </div>
    <div class="section" id="ordernow">
        <div class="row">
            <p>This is some text</p>
        </div>
        <div class="row">
            <a href="#" onclick="scrollOrderNow()"><img src="button"/></a>
        </div>
    </div>
    <div class="section" id="four">
        <div class="row">
            <p>This is some text</p>
        </div>
        <div class="row">
            <a href="#" onclick="scrollOrderNow()"><img src="button"/></a>
        </div>
    </div> 
```

**jQuery：**

```
// onclick on an object with class "section" scroll to this object
$('div.section').click(function() {
    $.scrollTo($(this), 800);
});

function scrollOrderNow(){
    $('html,body').animate({
        scrollTop: $("#ordernow").offset().top
    }, 1000);
} 
```

问题是，如果我点击链接`scrollOrderNow()`，页面会滑到订单页面，而不是回到该部分，因为链接在该部分中。

你能帮我解决这个问题吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:56:15.963

你需要投入`return false`你的`scrollOrderNow()`职能。

```
function scrollOrderNow(){
    $('html,body').animate({
        scrollTop: $("#ordernow").offset().top
    }, 1000);
    return false;
} 
```

这样，您的链接将不会做出反应，并且哈希不会附加到 URL，而将页面留在原处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:17:10.940

您可以使用单击处理程序并根据在该部分中单击的元素确定要执行的操作。为此，最好通过给它一个类来区分可点击元素：

```
<div class="section" id="four">
  <div class="row">
      <p>This is some text</p>
  </div>
  <div class="row">
      <a href="#"><img src="button" class="scroll-to-order"/></a>
  </div>
</div> 
```

点击处理程序代码：

```
$('div.section').on('click', function(evt) {
    var $target = $(evt.target);

    if ($target.is('.scroll-to-order')) {
        // the image itself was clicked, so scroll to ordernow
        $('html,body').animate({
            scrollTop: $("#ordernow").offset().top
        }, 1000);
    } else {
        // something else inside the section was clicked, scroll to section
        $.scrollTo($(this), 800);
    }
}); 
```

# java - 拆分和重命名java创建的xml文件

> ID：14703443
> 
> 赞同：0
> 
> 时间：2013-02-05T08:54:01.960
> 
> 标签：java, xml, shell

我正在使用 jaxb 和 XmlStreamWriter 在 java 中创建一个 xml 文件。这将成为一个非常大的文件，并且必须分成几块 max。200MB。这些片段不应该是可读的 xml 了。

该文件的名称使用日期和几个参数非常具体，最后它们的编号如下：'3.1'、'3.2'、'3.3' 其中第一个数字是创建的块数，第二个数字是文件的以下编号。文件名的第一部分（除了编号）是在 java 应用程序中创建的。

现在我想创建一个 UNIX 脚本，它使用所需的参数调用 java 应用程序，拆分文件并重命名块。

我知道调用 java 应用程序以及拆分和重命名文件的命令，但我不知道如何组合它们，因为我现在只有 Java 应用程序中的文件名，所以我无法决定必须拆分和重命名哪个文件。

有谁知道如何处理它？

编辑：好的，我会尽量不那么含糊。

我创建的应用程序创建了非常大的 xml 文件。此文件的名称采用以下格式：FI.DB2P.107601.20130130.20010.T.1.1。此名称包含一些标识号和文件的创建日期。名称的第一部分在 Java 应用程序中创建，如下所示：FI.DB2P.107601.20130130.20010.T。

现在这个文件应该被分成几个最大的块。每个 200 MB。然后创建的块应该与'base-file'具有相同的名称，但它们必须以'T.3.1'、'T.3.2'和'T.3.3'结尾。

我现在的问题是如何获得由 Unix 脚本中的 java 应用程序创建的文件的文件名。文件名非常复杂，包含来自数据库的数据，因此我无法在 Unix 脚本中定义名称。

我希望现在更清楚一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:02:21.823

除非我误解了你应该很容易做到的问题。当您创建您的文件时`XMLStreamWriter`，您知道（希望）文件的名称：

```
String fileName = "FI.DB2P.107601.20130130.20010.T.1.1";
XMLStreamWriter writer = factory.createXMLStreamWriter(new FileWriter(fileName )); 
```

那么把这个名字作为参数传递给你的shell脚本就没有问题了：

```
Runtime.getRuntime().exec("yourscript.sh " + fileName); 
```

`yourscript.sh`将有代码来拆分文件并向文件名添加递增变量，这样的事情可能会起作用：

```
#!/bin/bash
split -b 200m -a 5 "$1" splited_file

i=1
for file in splited_file*
do
 mv $file $1_${i}
 i=$(( i + 1 ))
done 
```

ps：这个脚本不是线程安全的：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:46:16.707

是不是您的 Java 进程将调用 Unix 脚本并因此能够在命令行上将文件名传递给它。

Unix 脚本可以获取文件名并在其上运行类似`split`的东西，然后将文件名修复为您的 Java 进程所期望的文件名。

# node.js - 如何在 node.js 中使用 mailgun 接收电子邮件

> ID：14703446
> 
> 赞同：2
> 
> 时间：2013-02-05T08:54:17.557
> 
> 标签：node.js, mailgun

在我的应用程序中，我使用 mailgun 模块使用 node.js 发送和接收电子邮件。我不知道如何接收传入的电子邮件。我创建了接收传入电子邮件的路由。但它不起作用。![在此处输入图像描述](../Images/e4c7c012aa28de1801437237543ba206.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T09:04:38.017

另外值得注意的是，无论出于何种与邮件头相关的原因，如果您将 mailgun 设置为将某些内容转发到 a@b.com，那么*从*a@b.com 发送的消息将不会显示在您的收件箱中。从不同的地址发送邮件。请注意，mailgun 有时可以判断您是否在 gmail 中使用“发送为”功能，并且会知道您的主要地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:10:30.400

Mailgun 只是发布 URL 编码的表单数据。

查看有关在 node.js 中接收 POST 数据的讨论： [如何在 Node.js 中提取 POST 数据？](https://stackoverflow.com/questions/4295782/node-js-extracting-post-data)

# c# - 有选择地设置对象属性

> ID：14703449
> 
> 赞同：0
> 
> 时间：2013-02-05T08:54:21.823
> 
> 标签：c#

我有一个具有以下属性的业务对象：

```
Public class Person
{
  prop int ID {get; set;}
  prop string Name {get; set;}
  prop string Address1 {get; set;}
  prop string Address2 {get; set;}
} 
```

有这个方法

```
Public Void CreateEntity(Person objPerson)
{
 Person newPerson = new Person();
 newPerson.Name = objPerson.Name;
 newPerson.ID = objPerson.ID;
 newPerson.Address1 = objPerson.Address1;
 newPerson.Address2 = objPerson.Address2;

  ...

  // Do some stuff
 } 
```

它基本上将 objPerson 的所有属性分配给 newPerson。

有没有办法将选择性属性分配给 newPerson？

不做一对一，能不能像只做一样有选择性地做

```
 newPerson.Address1 = objPerson.Address1;
 newPerson.Address2 = objPerson.Address2; 
```

在方法中。

我可以有一个可以定义所需属性的外部配置。因此，如果该配置只有 Address1 和 Address2，则 newPerson 只会分配这两个。

这可以做到吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:55:37.493

如果我正确理解了您想要的内容，则可以使用*Object Initializers*：

```
var person = new Person{ ID = 123456, Name = "Foo"}; 
```

[对象和集合初始化器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:56:21.650

使用对象初始化器：

```
var obj = new Person { ID = 1, Name = "Test" }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:57:02.903

为您的每个公共属性添加私有字段并在您的公共属性中使用此字段，而不是直接使用`get; set;`.

然后将您的条件写入设置器，并且只有在满足条件时才更改私有相关的私有字段。

```
private int id;

public int ID {
get
{
    return id;
} 
set
{
    if(someCondition)
       id = value;
} 
```

}

# wcf - 负载测试应用程序+WCF服务

> ID：14703451
> 
> 赞同：1
> 
> 时间：2013-02-05T08:54:28.247
> 
> 标签：wcf, testing, visual-studio-2012, load-testing, performance-testing

我想使用**Visual Studio 2012****加载测试**具有自己的**WCF**服务的应用程序。我尝试创建一个**Web 性能测试**并将其与负载测试一起使用，但是 Web 性能没有记录发送到服务的中间请求，这是非常需要的。

 ****将**CodedUI**与它一起使用是不可行的，因为它不会带来那么多负载并且它的交互性。

该应用程序也在不同的服务器和服务上。

在 VS2012 中完成此操作的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:21:36.200

为此使用专用的“单元测试”。VS 负载测试可以执行编码的 UI/Web 性能或单元测试。

在您的单元测试中，只需使用标准的 WCF 代理、channelfactory 或 RestClient。

只需检查您是否妥善处理了 Web 服务代理类****

# c# - 从调用函数访问邮件对象 MAPI 失败

> ID：14703452
> 
> 赞同：1
> 
> 时间：2013-02-05T08:54:29.520
> 
> 标签：c#, outlook, vsto, outlook-addin

我将访问 Outlook MAPI 文件夹并获取邮件地址。这是我的方法

```
 public static string GetSenderEmailAddress(Microsoft.Office.Interop.Outlook.MailItem mapiObject)
    {
        Microsoft.Office.Interop.Outlook.PropertyAccessor oPA;
        string propName = "http://schemas.microsoft.com/mapi/proptag/0x0065001F";
        oPA = mapiObject.PropertyAccessor;
        string email = oPA.GetProperty(propName).ToString();
        return email;
    } 
```

当调用按钮单击事件时，我需要触发该方法并检索邮件地址。

按钮点击事件在这里。

```
 private void button3_Click(object sender, RibbonControlEventArgs e)
        {

 string mailadd =  ThisAddIn.GetSenderEmailAddress(Microsoft.Office.Interop.Outlook.MailItem);
        System.Windows.Forms.MessageBox.Show(mailadd);

} 
```

错误在这里

> Microsoft.Office.Interop.Outlook.MailItem 是在给定上下文中无效的“类型”

这是我的第一个插件，有谁知道如何实现这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:11:21.110

您可以使用[`RibbonControlEventArgs`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.ribbon.ribboncontroleventargs.aspx)来访问[`Context`](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribboncontrol.context.aspx)将为您提供[`MailItem`](http://msdn.microsoft.com/en-us/library/office/ff861252.aspx)实例的 。

```
private Outlook.MailItem GetMailItem(RibbonControlEventArgs e)
{
    // Inspector Window
    if (e.Control.Context is Outlook.Inspector)
    {
        Outlook.Inspector inspector = e.Control.Context as Outlook.Inspector;
        if (inspector == null) return null;
        if (inspector.CurrentItem is Outlook.MailItem)
            return inspector.CurrentItem as Outlook.MailItem;
    }
    // Explorer Window 
    if (e.Control.Context is Outlook.Explorer)
    {
        Outlook.Explorer explorer = e.Control.Context as Outlook.Explorer;
        if (explorer == null) return null; 
        Outlook.Selection selectedItems = explorer.Selection;
        if (selectedItems.Count != 1)  return null;  
        if (selectedItems[1] is Outlook.MailItem)
            return selectedItems[1] as Outlook.MailItem;
    }     
    return null;
} 
```

您可以添加此方法，然后像这样使用它...

```
string mailAddress = string.Empty;
Outlook.MailItem mailItem = GetMailItem(e);
if (mailItem != null)
    mailAddress =  ThisAddIn.GetSenderEmailAddress(mailItem); 
```

# testing - 在集成测试中注入服务的问题

> ID：14703459
> 
> 赞同：0
> 
> 时间：2013-02-05T08:54:42.113
> 
> 标签：testing, grails, integration-testing, grails-2.1

我有一个类似的问题，即使用以下代码[进行集成测试 Grails 服务：](https://stackoverflow.com/questions/7285270/integration-testing-grails-services-with-injection)

```
@TestFor(DocumentosService)
class DocumentosServiceTest extends GroovyTestCase  {
    def myService
    void testEnvioEmailDocumento() {
        assert myService != null
    }
} 
```

执行测试时，myService 始终为空。为什么 myService 没有被注入？我正在使用 grails 2.1

按照 Burt Beckwith 的指示更新（2/6/2013）：

```
class DocumentosServiceTest extends GroovyTestCase  {
    def myService
    def documentosService
    void testEnvioEmailDocumento() {
        assert documentosService != null
        assert myService != null
    }
} 
```

现在 documentosService 也为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:17:46.353

删除`@TestFor(DocumentosService)`，因为那是用于单元测试。为服务添加一个常规的依赖注入，在这种情况下，它看起来像`def documentosService`

# c# - 过滤字符串

> ID：14703460
> 
> 赞同：1
> 
> 时间：2013-02-05T08:54:43.130
> 
> 标签：c#, regex, visual-studio

我正在尝试使用 Regex.Replace 过滤字符串，但我被困在这样的替换文本上：[02] 或 [06]。

我现在使用的代码是：

```
string cleanData = Regex.Replace(stringtext, "[..]", ""); 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:58:06.520

采用

```
string cleanData = Regex.Replace(stringtext, @"\[..\]", ""); 
```

（无法测试）。

# database-schema - 数据库表创建

> ID：14703461
> 
> 赞同：0
> 
> 时间：2013-02-05T08:54:45.763
> 
> 标签：database-schema

我应该为电话创建一个网站应用程序，用户必须在其中输入他当天接到的电话的详细信息。

我面临的问题是我必须创建将这些调用存储在数据库中的表。

我应该为每一天（日期）创建一个新表，还是必须在同一个表中输入相同的日期？是否有可能制作两张表格，一张用于日期，另一张用于所有其他详细信息，并在需要时获取特定日期的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:07:33.603

> 我应该为每一天（日期）创建一个新表，还是必须在同一个表中输入相同的日期？

您只有一个表，该表将有一个存储日期的字段。一个简单的例子是：

```
CallId  DateOfCall              Caller
------  --------------------    ------------------
1       15/07/2013 13:31:20     John Smith
2       15/07/2013 14:18:37     Jim Hendrix
3       16/07/2013 12:01:37     Steve Jeffers 
```

DBMS（数据库管理系统，例如 SQL Server、Oracle、MySQL）*非常*擅长根据日期等标准过滤表中的行。

* * *

> 是否有可能制作两张表格，一张用于日期，另一张用于所有其他详细信息，并在需要时获取特定日期的详细信息？

你*可以*这样做，但并不明显有任何理由这样做。通话的日期/时间隐含地与通话本身相关联，因此明智地存储在同一个表中（根据我上面的示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:07:30.767

在这种情况下，一张桌子就足够了。例如：idCall | 电话号码 | 日期通话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:16:59.813

这些问题是根本性的。最好是学习数据库设计的基础。你会发现大量关于这个主题的文献。例如，可以在[http://www.deeptraining.com/litwin/dbdesign/fundamentalsofrelationaldatabasedesign.aspx](http://www.deeptraining.com/litwin/dbdesign/fundamentalsofrelationaldatabasedesign.aspx)找到第一个在线介绍。

# jquery - jQuery：根据浏览器宽度更改 div 位置

> ID：14703465
> 
> 赞同：4
> 
> 时间：2013-02-05T08:54:58.180
> 
> 标签：jquery, resize, css-selectors

我有 28 个 div，全部向左浮动，宽度和高度为 200 像素，每个 div 的右侧和底部有 5 像素的边距。我已经成功地弄清楚了如何通过 jquery 在其他 div 之后放置其他 div。我是这样做的。

`$( '.inner:nth-child(10)' ).after( '<div class="test">');`

这很好用！但我想做的是根据浏览器宽度更改“内部”div 类 nth-child 位置，并且我已经设法让它在某种程度上工作。

这是我正在使用的代码：

```
var $window = $(window);

function checkWidth() {
    var windowsize = $window.width();
    if (windowsize > 440) {
     $( '.inner:nth-child(10)' ).after( '<div class="test">');
    }
}

// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth); 
```

因此，当查看器浏览器宽度超过 440 像素时，我告诉我的浏览器在第 10 个“测试”div 之后显示 div“内部”。同样，这在某种程度上有效。当浏览器宽度超过 440px 时，它成功地在正确位置显示“内部”div，当浏览器宽度低于 440px 时，它也不显示 div。但最大的问题是，每当调整窗口大小时，就会开始创建一大堆 div。这对我来说非常令人费解。这是 jsFiddle 来演示我的问题：

[http://jsfiddle.net/EUqEm/2/](http://jsfiddle.net/EUqEm/2/)

您会一眼看到它似乎工作正常，但是如果您在 jsfiddle 中调整 HTML 窗口的大小，就会开始创建一堆 div。实际上，div 应该始终保持在正确的位置，就在第 10 个内部 div 之后。相反，它只是在调整窗口大小时创建一堆其他 div。

如果有人可以帮助我解决这个问题并让这个小问题在 jsfiddle 中正常工作，那对我来说意义重大！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:07:16.310

你能试试这个吗？

```
 var $window = $(window);
var resized=false;
function checkWidth() {

    var windowsize = $window.width();
    if (windowsize > 440) {
        //if the window is greater than 440px wide then place the "inner" div after the 10th "test" div
        if(resized==false){
     $( '.inner:nth-child(10)' ).after( '<div class="test">');
            resized=true;
        }
    }
     if (windowsize <= 440) {
         $('.test').remove();
         resized=false;
     }
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth); 
```

这是你想要的吗？在您的版本中，resize 函数多次调用 .after() ，添加了很多新的 div。它应该以这种方式工作

编辑：根据@pete 的建议，添加新的彩色 div 会更容易。

```
 var $window = $(window);

function checkWidth() {
    var windowsize = $window.width();
    if (windowsize > 440) {
        //if the window is greater than 440px wide then place the "inner" div after the 10th "test" div
        $('.test').remove();
     $( '.inner:nth-child(10)' ).after( '<div class="test">');
    }else{
        $('.test').remove();
    }
    if (windowsize > 500) {
        //if the window is greater than 440px wide then place the "inner" div after the 10th "test" div
        $('.test1').remove();
     $( '.inner:nth-child(12)' ).after( '<div class="test1">');
    }else{
         $('.test1').remove();
    }
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth); 
```

您只需为 test1 类添加 css 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:28:32.590

我认为问题可能是您的解决方案没有状态。它不知道您是否正在过渡到低于 440 的宽度，或者您是否已经比这更窄了。因此，每次调整大小触发您添加另一个 div。对于这个简单的用例，我建议在添加之前检查您的测试 div 是否存在。

不确定这是否是您想要的，但如果宽度也大于 440，则可能值得删除测试 div。

# weblogic - 无法使用 wldeploy Weblogic 部署 EAR

> ID：14703466
> 
> 赞同：0
> 
> 时间：2013-02-05T08:55:00.243
> 
> 标签：weblogic

我想使用 wldeploy 在 weblogic 服务器中部署我的 EAR。以下是使用的命令。

```
<taskdef name="wldeploy" classname="weblogic.ant.taskdefs.management.WLDeploy">
    <classpath>
    <pathelement location="C:\Oracle\WebLogic\Middleware\wlserver_10.3\server\lib\weblogic.jar"/>
    </classpath>
    </taskdef>

    <!-- Deploying Applications  -->
    <!-- <target name="deploy" depends="module_create"> -->
    <target name="deploy">
    <wldeploy action="deploy"
              name="${ear.file.name}"
              source="${ear.install.dir}/${ear.file.name}"
              user="${wls.username}"
              nostage="false"
              password="${wls.password}"
              verbose="true" debug="true"
              adminurl="t3://${wls.hostname}:${wls.port}" targets="${server.name}" />
    </target> 
```

这样做我得到以下错误。

[wldeploy] [BasicOperation.execute():445]：在目标上启动应用程序 atg_production.ear 的部署操作：

[wldeploy] [BasicOperation.execute():447]：atg_production

[wldeploy] 任务 2 已启动：[Deployer:149026] 在 atg_production 上部署应用程序 atg_production.ear。

[wldeploy] 转储异常堆栈

[wldeploy] 任务 2 延迟：[Deployer:149026] 在 atg_production 上部署应用程序 atg_production.ear。

[wldeploy] 目标状态：在服务器 atg_production 上延迟部署

**[wldeploy] java.rmi.RemoteException：[Deployer:149145]无法联系“atg_production”。部署推迟到“atg_production”可用。*****[wldeploy] 在 weblogic.deploy.service.internal.transport.UnreachableHostException.writeReplace(UnreachableHostException.java:47) [wldeploy] 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [wldeploy] 在 sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39) [wldeploy] 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [wldeploy] 在 java.lang.reflect.Method.invoke(Method.java:597) [wldeploy] 在 java .io.ObjectStreamClass.invokeWriteReplace(ObjectStreamClass.java:1032) [wldeploy] 在 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1107)* **

 *不知道为什么我有一个 RMI 异常。谁能告诉这个异常的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:38:00.803

{wls.hostname} 的值是多少。看起来这是 atg_production。检查您是否可以从尝试运行此 wldeploy 的计算机访问 atg_production。根据异常，机器无法访问（无连接、防火墙问题等）或 atg_production 上的 weblogic 已关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:24:12.763

首先，您的管理服务器正在运行。${server.name} 的值是多少？根据输出，它是 atg_production。请确保您部署到的服务器的服务器名称为“atg_production”。*

# javascript - Javascript 中的 XML 解析。需要帮助

> ID：14703469
> 
> 赞同：0
> 
> 时间：2013-02-05T08:55:15.197
> 
> 标签：javascript, xml-parsing

首先，我创建了一个 javascript，它定位和动画网站的某些部分

例子：

```
<ul>
<li transition="fade" amount="5" thumb="images/thumb1.jpg>
<div class="item rotate"
      width = "18"
      height= "550"
      speed="600"
      start="1100"
      easing="easeOutExpo"><img src="images/cheese.png" alt="Cheese">
<div>

<div class="caption black sfb stb"
      width = "950"
      height= "600"
      speed="600"
      start="1100"
      easing="easeOutExpo">10.99
<div>
</li>

<li transition="cut" amount="15" speed="300" delay="9400" thumb="images/thumb2.jpg>
<div class="item rotate"
      width = "18"
      height= "550"
      speed="600"
      start="1100"
      easing="easeOutExpo"><img src="images/pork.png" alt="Pork">
<div>

<div class="caption white lfl stl"
      width = "950"
      height= "600"
      speed="600"
      start="1100"
      easing="easeOutExpo">15.99
<div>
</li>
</ul> 
```

现在不必将它放在 html 中，我现在想将它放在 XML 中，因为稍后我将制作一个 web 服务。

但是现在，我需要让我的 javascript 工作，以便它可以从 xml 中读取所有这些内容。

我在想的（也许我在这里走错了路）是xml的以下内容

```
<spot>
 <effect type="fade"></effect>
 <amount>5</amount>
 <thumb>thumb1.jpg</thumb>
   <item ="item rotate">
    <width>18</width>
    <height>550</height>
    <speed>600</speed>
    <start>1100</start>
    <easing>easeOutExpot</easing>
    <img alt="Cheese">images/cheese.png></image>
   </item>
  </spot> 
```

现在我不知道如何在 javascript 中解决这个问题。有人可以给我一些提示提示等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:35:48.643

[您可以在此StackOverflow 答案](https://stackoverflow.com/questions/12085181/reading-xml-file-using-javascript#answer-12258180)中找到如何使用 jQuery 解析 XML 的示例。只需使用 css 选择器查找您想要的标签，然后提取您需要的数据。您可以使用 jQuery 或 javascript DOM 方法（document.createElement# 等）构建必要的 HTML

如果您不想使用 jQuery，[这篇博](http://www.hardcode.nl/subcategory_1/article_431-xml-to-string-and-string-to-xml-in-javascript)文解释了如何从 XML 字符串创建 XML-DOM 对象。然后，您可以使用浏览器的 DOM 方法来获取您想要的数据。

# magento - 如何在 Magento 的高级搜索结果中添加分层导航？

> ID：14703470
> 
> 赞同：0
> 
> 时间：2013-02-05T08:55:20.720
> 
> 标签：magento, search, advanced-search

我想在 Magento 的高级搜索结果中显示分层导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:29:17.187

由于 Magento 使用完全不同的搜索后端进行高级搜索，这不可能作为标准。

# iphone - 如何在 AVAudioPlayer 中循环播放多个音频文件？

> ID：14703471
> 
> 赞同：3
> 
> 时间：2013-02-05T08:55:24.180
> 
> 标签：iphone, loops, ios6, avaudioplayer

我想使用循环播放多个文件。
我在下面写了代码..
请帮助我.!!!

```
soundList = [[NSArray alloc] initWithObjects:@"mySong1.mp3",@"mySong2.mp3",@"mySong3.mp3",@"mySong4.mp3",@"mySong5.mp3",@"mySong6.mp3",@"mySong7.mp3",@"mySong8.mp3",@"mySong9.mp3", nil];
for (i=0; i<=([soundList count] - 1); ) {                
    while(i<[soundList count]){
        NSLog(@"File is : %@",[soundList objectAtIndex:i]);
        mediaPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:[soundList objectAtIndex:i] ofType:nil]] error:&error];
        [mediaPlayer setDelegate:self];
        self.lblCurrentSongName.text = [soundList objectAtIndex:i];
        [mediaPlayer prepareToPlay];
        i++;
    }
} 
```

请给我建议.!!!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:03:20.963

我会给你一个指导方针，但要注意它不是经过测试的代码。您提供的代码由于多种原因无法正常工作，1.您没有在 avaudioplayer 上调用 play 2.while 循环执行速度太快，歌曲将相互重叠，或者因为您没有存储对先前 avaudioplayer 的引用它可能会造成麻烦（不确切知道）

```
NSInteger currentSoundsIndex; //Don't forget to set this in viewDidLoad or elsewhere

//In viewDidLoad add this line
{
...
currentSoundsIndex = 0;
...
}

-(void) playCurrentSong
{
NSError *error;
mediaPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:[soundList objectAtIndex:currentSoundsIndex] ofType:nil]] error:&error];
if(error !=nil)
{
   NSLog(@"%@",error);
   //Also possibly increment sound index and move on to next song
}
else
{
self.lblCurrentSongName.text = [soundList objectAtIndex:currentSoundsIndex];
[mediaPlayer setDelegate:self];
[mediaPlayer prepareToPlay]; //This is not always needed, but good to include
[mediaPlayer play];
}

}

//This is the delegate method called after the sound finished playing, there are also other methods be sure to implement them for avoiding possible errors
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
//Increment index but don't go out of bounds
currentSoundsIndex = ++currentSoundsIndex % [soundList count];
[self playCurrentSong];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:08:31.507

先声明

AVAudioPlayer *audioPlayer;

NSMutableArray *audioQueue;

然后使用下面的代码

```
-(void) addToPlayerQueue: (NSString *) file {

    if ( [audioQueue count] == 0 )
    {
        [audioQueue addObject:file];
        [self playSound: file];
    }
    else 
    {
        [audioQueue addObject:file];
    }
}

-(void) playSound : (NSString *) soundFile 
{
    NSURL *soundUrl = [NSURL fileURLWithPath: [[NSBundle mainBundle] pathForResource:soundFile ofType:@"caf"]];
    if ( soundUrl ) {
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];
        [audioPlayer setDelegate:self];
        [audioPlayer setVolume: playerVolume];
        [audioPlayer play];
    }
}

#pragma mark -
#pragma mark AVAudioPlayer Delegate Method

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    NSLog(@"Just got done playing %@", [audioQueue objectAtIndex:0]);
    [audioPlayer release];

    [audioQueue removeObjectAtIndex:0];

    if ( [audioQueue count] > 0 )
    {
        NSString *file = [audioQueue objectAtIndex:0];
        [self playSound:file];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:04:47.173

可能没有最优雅的解决方案，但您会在这里找到一个常见的想法。这是一个完全有效的代码，您可以将其复制/粘贴到您的项目中，它应该可以工作。当然，您必须更改文件名。如果您有任何问题，请告诉我。

```
#import "MainViewController.h"
#import <AVFoundation/AVFoundation.h>

@interface MainViewController () <AVAudioPlayerDelegate>

@property (nonatomic, strong) AVAudioPlayer *audioPlayer;
@property (nonatomic, strong) NSMutableArray *soundsPathsList;
@property (nonatomic, assign) NSInteger curSoundIdx;

@end

@implementation MainViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        NSArray *soundList = [[NSArray alloc] initWithObjects:@"myAudioFile 1", @"myAudioFile 2", @"myAudioFile 3",
                              @"myAudioFile 4", @"myAudioFile 5", @"myAudioFile 6", @"myAudioFile 7",
                              @"myAudioFile 8", @"myAudioFile 9", @"myAudioFile 10", nil];

        self.soundsPathsList = [NSMutableArray new];
        for (NSString *fileName in soundList) {
            NSString *pathToFile = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
            NSURL *url = [NSURL fileURLWithPath:pathToFile];
            [self.soundsPathsList addObject:url];
        }

        [self playNext];
    }
    return self;
}

- (void) playNext {

    if (self.curSoundIdx >= [self.soundsPathsList count]) {
        self.curSoundIdx = 0;
    }

    // destroy player object
    [self.audioPlayer stop];
    self.audioPlayer = nil;

    // create new player object
    self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:
                        [self.soundsPathsList objectAtIndex:self.curSoundIdx] error:nil];
    self.audioPlayer.delegate = self;
    [self.audioPlayer play];

    self.curSoundIdx++;
}

#pragma mark - AVAudioPlayerDelegate

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    [self playNext];
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T08:31:43.047

```
simply do it by using recursion ..

@property (nonatomic, strong) NSArray *arrTrackList;
@property (nonatomic, strong) NSMutableArray *arrAduioQueue;
@property (nonatomic, strong) AVAudioPlayer *audioPlayer;
@property (nonatomic) NSUInteger itemIndex;

@end

@implementation PLayMultipleTrackViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    self.arrTrackList = [NSArray arrayWithObjects:@"apple_ring",@"shukriya_pakistan",@"pakistan_anthem", nil];
    self.itemIndex = 0;
}

- (IBAction)TrackToPlay:(id)sender
{
    self.btnPlayAll.enabled = NO;
    NSString *trackFile = [self.arrTrackList objectAtIndex:self.itemIndex];
    [self AddToPlayList:trackFile];
}

-(void)AddToPlayList:(NSString *)file
{
        [self.arrAduioQueue addObject:file];
        [self playTrack:file];
}

-(void)playTrack:(NSString *)soundFile
{
    NSString *soundFilePath =[[NSBundle mainBundle] pathForResource: soundFile ofType: @"m4r"];
    NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
    self.audioPlayer =[[AVAudioPlayer alloc] initWithContentsOfURL: fileURL error: nil];
    [self.audioPlayer prepareToPlay];
    [self.audioPlayer setDelegate:self];
    self.audioPlayer.volume = 1.0;
    [self.audioPlayer play];
}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    [self.arrAduioQueue removeObjectAtIndex:0];
    self.itemIndex++;
    NSUInteger trackListIndex = [self.arrTrackList count];

    if (self.itemIndex < trackListIndex)
    {
        NSString *nextTrack = [self.arrTrackList objectAtIndex:self.itemIndex];
        [self AddToPlayList:nextTrack];
    }
    else
    {
        NSLog(@"PLaylist empty");
    }
}
@end 
```

# ios - 是否可以检测推送通知的到达？

> ID：14703474
> 
> 赞同：2
> 
> 时间：2013-02-05T08:55:33.133
> 
> 标签：ios, push-notification, apple-push-notifications

我可以通过以下方式捕获打开推送通知的事件

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

但用户可能会收到推送通知，但不会打开它。那么是否可以处理推送通知的到来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:57:58.427

只有在应用程序在前台运行时收到推送通知时，才会调用您在问题中引用的方法。为了处理用于启动应用程序的推送通知（或将应用程序从后台恢复），您需要检查 appDelegate`didFinishLaunchingWithOptions`方法中的“选项”字典。

要回答您的其他问题 - 不，如果用户没有通过推送通知打开您的应用程序，您将无法访问它。

# ios - UIScrollView 后面的 UITableView

> ID：14703476
> 
> 赞同：0
> 
> 时间：2013-02-05T08:55:41.933
> 
> 标签：ios, objective-c, uitableview, uiscrollview, didselectrowatindexpath

为了我的需要，我在 UISCrollView 下直接添加了一个 UITableView ：

--- 主界面视图

-------- UITableView

-------- UIScrollView

因此，当我滚动滚动视图时，我会更改表视图的内容偏移量。它完美地工作。但是当我尝试选择一个单元格时，我无法捕获委托方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

有什么特别的事情要做吗？我试图继承 UIScrollView 并实现：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

它可以工作，但我无法滚动我的 UIScrollView ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:20:18.377

试试这个，

```
-(void)handleSingleTap:(UILongPressGestureRecognizer *)gestureRecognizer{
    CGPoint p = [gestureRecognizer locationInView:myScroll];
    NSIndexPath *indexPath = [myTable indexPathForRowAtPoint:p];
    [myTable selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    [self tableView:myTable didSelectRowAtIndexPath:indexPath];
} 
```

你必须使用 UITapGestureRecognizer ...

```
UITapGestureRecognizer *tpgr = [[UITapGestureRecognizer alloc]
                                initWithTarget:self action:@selector(handleSingleTap:)];
tpgr.numberOfTapsRequired = 1;
[myScroll addGestureRecognizer:tpgr]; 
```

# iphone - 如何更改 iPhone / iPad 专辑类别中的文字样式？

> ID：14703479
> 
> 赞同：1
> 
> 时间：2013-02-05T08:55:53.807
> 
> 标签：iphone, objective-c, xcode, ipad, photo

所以基本上我有两个使用 iPhone 和 iPad 照片库（相册）的应用程序。当我在一个应用程序上从手机相册中获取图像时，我会得到正常的专辑字体（相机胶卷、动物、人物......），而当我打开另一个应用程序时，我会得到相同的专辑列表，但名称很多更大胆。有没有办法改变它，让他们再次使用默认字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:19:44.480

您需要创建一个自定义视图，它就像照片库但具有自定义外观。您不能修改 Apple 官方图书馆的字体和样式。

您必须创建自己的自定义库视图。

# iphone - ios - 如何在 wifi 网络中找到使用我的应用程序的人

> ID：14703485
> 
> 赞同：1
> 
> 时间：2013-02-05T08:56:16.103
> 
> 标签：iphone, ios, xcode

嗨，我想在同一个网络中找到所有使用我的应用程序的人，比如说如果它是一个 wifi 网络，那么我想让所有人在那个特定的网络中使用我的应用程序。

他们存在于我的数据库（mySQL）中的个人资料数据及其位置。我可以根据位置获取用户但我的问题是根据网络找到它们。任何想法如何开始这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:47:55.907

我并不是说使用 Bonjour (Zeroconf) 是实现您想要的最佳方式 - 但您当然可以使用它来实现您的目标。

Bonjour 以两种方式使用： - 发布服务 - 检测（浏览）可用服务

对于你的任务，你必须同时做这两个。

可以在此处找到一个基本描述：[Bonjour 概述及其在 iOS 中的应用](http://mobile.siliconindia.com/mobile-expert/Bonjour-Overview-and-its-application-in-iOS-eid-130.html)

如果您决定使用 Bonjour，那么您会在[Bonjour for Developers上找到大量文档](https://developer.apple.com/bonjour/)

基本上，你需要发布一个服务：[Bonjour Programming > Section 18.2。发布服务](http://my.safaribooksonline.com/book/programming/iphone/9780470918029/bonjour-programming/publishing_a_service#X2ludGVybmFsX0h0bWxWaWV3P3htbGlkPTk3ODA0NzA5MTgwMjklMkZwdWJsaXNoaW5nX2Ffc2VydmljZSZxdWVyeT0=)

发布类（通常`appDelegate`）也应该是一个`NSNetService`委托。

```
NSNetService *netService; //an ivar or a property

//creating and publishing a service
netService = [[NSNetService alloc] initWithDomain:@""
                                             type:@"_yourservicename._tcp."
                                             name:@""
                                             port:9876];
//if your app actually acts as a server port: should be it's port,
//otherwise it could be any free port

netService.delegate = self;
[netService publish]; 
```

您还应该处理委托方法（和一些`appDelegate`方法）：

```
-(void)netService:(NSNetService *)aNetService
    didNotPublish:(NSDictionary *)dict
{
    NSLog(@"Service did not publish: %@", dict);
}

- (void)applicationWillTerminate:(UIApplication *)application {
    //---stop the service when the application is terminated---
    [netService stop];
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
    //---stop the service when the application is paused---
    [netService stop];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [netService publish];
} 
```

并浏览现有服务：[您好！(cocoanetics)](http://www.cocoanetics.com/2012/11/bonjour/) (你只需要页面的底部)

```
serviceBrowser = [[NSNetServiceBrowser alloc] init];
serviceBrowser.delegate = self;
[serviceBrowser searchForServicesOfType:@"_yourservicename._tcp." inDomain:@""];

- (void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser 
    didFindService:(NSNetService *)aNetService moreComing:(BOOL)moreComing
{
    [self willChangeValueForKey:@"foundServices"];
    [_foundServices addObject:aNetService];
    [self didChangeValueForKey:@"foundServices"];

    NSLog(@"found: %@", aNetService);
}

- (void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser 
    didRemoveService:(NSNetService *)aNetService moreComing:(BOOL)moreComing
{
    [self willChangeValueForKey:@"foundServices"];
    [_foundServices removeObject:aNetService];
    [self didChangeValueForKey:@"foundServices"];

    NSLog(@"removed: %@", aNetService);
} 
```

PS：Bonjour 开始可能会很棘手，但它肯定是一个有用的知识。

取决于您到底想要什么样的用户体验。Bonjour 的一个很好的替代品肯定是`GameKit`（[GKPeerPickerController](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKPeerPickerController_Class/Reference/Reference.html)），用户可以在其中实际选择哪些设备（他想要连接的对等设备）。这应该在 Wi-Fi 或通过蓝牙中工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T09:04:53.950

进行服务发现的一种方法是让您的程序在端口上侦听，然后在您想要被发现或轮询其他实体时在该端口上进行广播。沿着这些思路。

```
 socket = listen_and_stuff()
 others = do_broadcast()
 while(run)
     if time to update
         others = do_broadcast
     if received request
         reply with info about self 
```

但是，广播在一定程度上取决于路由器设置、子网等，因此它*可能*并非在所有情况下都有效。

# arrays - 如何在声明中初始化 delphi 静态数组的特定条目？

> ID：14703487
> 
> 赞同：2
> 
> 时间：2013-02-05T08:56:17.943
> 
> 标签：arrays, delphi, static-array

我有一个用 枚举的全局数组变量`'a'..'z'`。如果我想在变量声明中初始化一些条目，我通常会执行以下操作：

```
var 
  Example: Array['a'..'z'] of String = ('Example one', 'two', 'three'); 
```

有没有办法在变量声明中初始化'g'，'p'，'o'和'y'，或者我必须通过实现部分中的一些函数/过程来做到这一点?

甚至可能有更聪明的方法来实现我想要的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T09:05:59.517

你不能在那里只初始化某些元素。执行此操作的正确方法是在以下`initialization`部分中编写`implementation`：

```
 implementation
...
initialization
  Example['g'] := 'something';

end.
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:03:19.233

根本没有办法指定您只需要初始化特定的元素。全局数组变量的初始化器只是一个元素列表。元素是按顺序指定的。在您的情况下，任何未指定的元素都设置为默认值`''`。因为列表是按顺序处理的，所以未指定的元素必须是数组末尾的元素。

为此，您必须在代码中编写这些初始化。

```
var 
  Example: Array['a'..'z'] of String; // global variable
....
// and later in code
Example['a'] := ...;
Example['b'] := ...;
... etc. 
```

当然，您可以在代码中选择您喜欢的任何元素。

如果您希望在程序启动时执行初始化，那么您必须从[初始化部分](http://docwiki.embarcadero.com/RADStudio/XE3/en/Programs_and_Units#The_Initialization_Section)调用初始化代码。

# html - 为 iOS 设置网站背景图片

> ID：14703491
> 
> 赞同：0
> 
> 时间：2013-02-05T08:56:32.313
> 
> 标签：html, ios, css, image, background

是否有一种特定的方式必须设置背景图像才能出现在 IOS 设备上？

图像出现在我的笔记本电脑上，但我得到的只是 iPad 上的白色背景。

我已将图像分配给：

```
body {
background-image: url(background.jpg);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:42:38.823

```
body {background-image: url("../background.jpg") no-repeat scroll center 100px;} 
```

我用它来集中在 ipad 上，试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:33:03.713

嘿伙计们很抱歉延迟回复。

我只是简单地将背景图像添加到 html 上的 body 标记中，它加载没有问题

谢谢您的帮助

# pdf - 部分签名pdf，验证部分签名

> ID：14703493
> 
> 赞同：0
> 
> 时间：2013-02-05T08:56:40.423
> 
> 标签：pdf, digital-signature, partial

是否可以以编程方式对 pdf 文件进行部分签名，而不是验证每个数字签名？

我想做的是让用户有机会生成 pdf 文件，然后签名。下一个用户可以在最后将他自己的文本添加到此 pdf 中，然后也对其进行签名。我希望有机会检查每个签名，看看下一个用户是否没有更改以前的文本。

pdf标准是否为这种情况提供了解决方案，或者我已经编写了自己的解决方案？如果是的话，也许你知道一些 C# 的免费库？

# c# - Convert.FromBase64String 异常

> ID：14703503
> 
> 赞同：-1
> 
> 时间：2013-02-05T08:57:05.327
> 
> 标签：c#, asp.net

当我尝试执行以下代码时：

```
byte[] arr= Convert.FromBase64String("1/50/Zoolz/Win-s9u0uco8ea0(11)/349.jpg") 
```

我收到以下错误：

输入不是有效的 Base-64 字符串，因为它包含非 base-64 字符、两个以上的填充字符或填充字符中的非空白字符。

我可以解决谁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:01:27.873

`Convert.FromBase64String`需要一个 base 64 编码的字符串作为参数，而不是包含 base 64 编码的文件的名称。

如果图像文件内容是 base 64 编码的，您首先应该读取文件，然后调用`FromBase64String`该内容，如下所示：

```
string baseText = File.ReadAllText(<filename>);
byte[] imageBytes = Convert.FromBase64String(baseText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T08:59:22.503

您没有将 base64string 传递给该方法，而是将其传递路径首先将图像转换为 base64string，然后对该字符串调用方法。

*将图像转换为 base64 字符串*

```
 using (var fs = new FileStream(filename, FileMode.Open, FileAccess.Read))
 {
      var buffer = new byte[fs.Length];
      fs.Read(buffer, 0, (int)fs.Length);
      string base64 = Convert.ToBase64String(buffer);
 } 
```

*将base64string转换为图像*

```
byte[] imageBytes = Convert.FromBase64String(imgBase64String);
MemoryStream ms1 = new MemoryStream(imageBytes);
Image img = Image.FromStream(ms1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:02:14.057

您没有使用 base 64 编码的字符串，它只是一个普通的字符串。如果您尝试创建测试，可以使用以下代码将字符串转换为 base64。

```
 string stringToBeEncoded = "some string";
  byte[] byteArray = System.Text.ASCIIEncoding.ASCII.GetBytes(stringToBeEncoded);
  string base64String = System.Convert.ToBase64String(byteArray); 
```

# java - Java Swing 游戏随着时间的推移而滞后

> ID：14703510
> 
> 赞同：0
> 
> 时间：2013-02-05T08:57:24.553
> 
> 标签：java, swing, graphics

我正在使用 Java Swing 制作游戏，我意识到在游戏运行了一段时间后，大约 10 分钟，图形开始滞后很多。游戏循环报告以恒定的 FPS 运行。

现在我有它，所以一旦游戏循环触发，重绘也会被调用。如果我不同步图形，那么在屏幕上可以看到正在绘制的不同部分的速度太慢了。任务管理器显示它使用的内存几乎相同，但是 CPU 使用率会随着时间逐渐增加。如果我不得不猜测，那一定是我没有使用 Swing 来正确绘制。

我目前用于绘图的过程是这样的：

*   投射 graphics2D 对象
*   超级绘制图形对象
*   每个对象都使用该图形对象绘制其图形。
*   工具包同步
*   处理图形

面板是`setDoubleBuffered(true)`.

知道什么可能是错的吗？

编辑：

我不能让我的 SSCCE 滞后，所以我回去重新测试每个绘图功能，结果是

```
 int ilen = drawActorQueue.size();
    for (int i = 0; i < ilen; i++)
    {
        GameActor oo = drawActorQueue.get(i);
        oo.draw(g2d, viewX, viewY);
    } 
```

似乎是造成问题的原因。

我认为这是因为 drawActorQueue 实际上包含指向 2 类对象的指针，而 GameActor 只是基类。

看起来是这样吗？我想我可以通过使用接口来修复它，或者让列表指向 2 个子对象的特定数组。

编辑：！@#$%^ 只是我非常愚蠢并且没有清除列表。当我再次感到疲倦时，我将永远不会编码或调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:05:19.003

确保您的应用程序没有大量泄漏内存和 GC。使用详细的 GC 登录运行程序以查看它是否有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:07:15.763

将探查器附加到您的应用程序。

例如，`visualvm`。任何热点都应该通过“采样”快速出现。

visualvm 的真正好处在于，您可以在问题真正发生时实际附加，但在问题发生之前全速运行。

它还将向您显示内存消耗和 GC 活动的图表。如果您看到您的应用程序在短时间内消耗大量内存，您可能想看看是否可以减少这种情况。

`visualvm`是一个超级强大、免费的 Java 工具，应该在每个人的工具箱中，当你看到性能问题时首先要去的地方。

# c# - 如何将 C++ 中的布尔数组编组为 C# 中的布尔数组

> ID：14703514
> 
> 赞同：2
> 
> 时间：2013-02-05T08:57:36.563
> 
> 标签：c#, .net, com, com-interop

我在 C# 类中有以下 COM 可见属性：

```
[ComVisible]
bool[] Values; 
```

我有一个 C++ 类的实例，并使用以下代码设置此属性（仅伪代码）

```
CComSafeArray<VARIANT_BOOL> values(3);
values[0] = VARIANT_FALSE;
values[1] = VARIANT_FALSE;

HRESULT hr = instance->put_Values(values.Detach()); 
```

上述代码的最后一行返回 COR_E_SAFEARRAYTYPEMISMATCH (0x80131533)。我尝试使用 BYTE 和 VARIANT（使用 BOOL），但没有成功。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:40:51.973

我花了一段时间才弄明白，但我明白了：将 VT_BOOL 作为第二个模板参数传递给 CComSafeArray：

```
CComSafeArray<VARIANT_BOOL, VT_BOOL> values(3); 
```

如果没有该模板参数，将使用 VARTYPE VT_I2（一个 2 字节整数，因为 VARIANT_BOOL 是**short**的别名）创建 SAFEARRAY，这不是**bool[]**类型的 C# 属性所期望的。

# django - Django Admin：在主管理页面上编辑项目，而不进入每个项目

> ID：14703515
> 
> 赞同：0
> 
> 时间：2013-02-05T08:57:38.570
> 
> 标签：django, python-2.7, django-admin

在我的管理页面中，我想通过从每列下的选项中进行选择来编辑项目，而不是单击并进入每个项目并在每个项目的页面内对其进行编辑。我尝试了各种功能和形式，但仍然找不到这样做的方法。

例如：我必须为每个项目分配一个年龄范围，0-5、5-15、15-25、25-35（有些项目会选中多个选项），我想从主管理员分配这些值页面，无需进入每个项目。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:32:38.390

如果字段有选择，很容易，在 ModelAdmin 类中使用[list_editable](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_editable)。

如果你想使用更自定义的东西，你应该在主管理页面中的行中提供一个自定义表单（顺便说一下，这在 Django 术语中称为“更改列表”..）

在表单内部，为字段和事件提供选择自定义小部件。

# javascript - Angular.js：在页面加载时设置元素高度

> ID：14703517
> 
> 赞同：44
> 
> 时间：2013-02-05T08:57:43.677
> 
> 标签：javascript, angularjs

我是 AngularJS 新手。我想创建高度取决于窗口高度的网格（使用[ng-grid ），即。](http://angular-ui.github.com/ng-grid)`$('.gridStyle').height($(window).height() - 100);`

我已经写了指令：

```
app.directive('resize', function($window) {

    return function(scope, element) {

        function applyHeight() {
            scope.height = $window.innerHeight;
            $('.gridStyle').height(scope.height - 100);
        }

        angular.element($window).bind('resize', function() {
            scope.$apply(function() {
                applyHeight();
            });
        });

        applyHeight();
    };
}); 
```

当我调整浏览器窗口的大小但第一次加载网站时不应用样式时，这很有效。我在哪里可以放置代码来初始化高度？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-03T01:46:18.160

我在为自己寻找相同问题的解决方案时遇到了您的帖子。我使用基于多个帖子的指令组合了以下解决方案。您可以在这里尝试（尝试调整浏览器窗口的大小）：http: [//jsfiddle.net/zbjLh/2/](http://jsfiddle.net/zbjLh/2/)

看法：

```
<div ng-app="miniapp" ng-controller="AppController" ng-style="style()" resize>
    window.height: {{windowHeight}} <br />
    window.width: {{windowWidth}} <br />
</div> 
```

控制器：

```
var app = angular.module('miniapp', []);

function AppController($scope) {
    /* Logic goes here */
}

app.directive('resize', function ($window) {
    return function (scope, element) {
        var w = angular.element($window);
        scope.getWindowDimensions = function () {
            return { 'h': w.height(), 'w': w.width() };
        };
        scope.$watch(scope.getWindowDimensions, function (newValue, oldValue) {
            scope.windowHeight = newValue.h;
            scope.windowWidth = newValue.w;

            scope.style = function () {
                return { 
                    'height': (newValue.h - 100) + 'px',
                    'width': (newValue.w - 100) + 'px' 
                };
            };

        }, true);

        w.bind('resize', function () {
            scope.$apply();
        });
    }
}) 
```

仅供参考，我最初让它在控制器（[http://jsfiddle.net/zbjLh/](http://jsfiddle.net/zbjLh/)）中工作，但从后续阅读中发现，从 Angular 的角度来看，这并不酷，所以我现在将它转换为使用指令。

重要的是，请注意`true`'watch' 函数末尾的标志，用于比较 getWindowDimensions 返回对象的相等性（如果不使用对象，则删除或更改为 false）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-25T04:03:29.767

为了避免检查每个摘要循环，我们可以在窗口高度发生变化时更改 div 的高度。

[http://jsfiddle.net/zbjLh/709/](http://jsfiddle.net/zbjLh/709/)

```
<div ng-app="miniapp" resize>
  Testing
</div> 
```

.

```
var app = angular.module('miniapp', []);

app.directive('resize', function ($window) {
    return function (scope, element) {
        var w = angular.element($window);
        var changeHeight = function() {element.css('height', (w.height() -20) + 'px' );};  
            w.bind('resize', function () {        
              changeHeight();   // when window size gets changed             
        });  
        changeHeight(); // when page loads          
    }
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-02T18:45:00.373

```
angular.element(document).ready(function () {
    //your logic here
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T19:45:56.177

对 Bizzard 的出色答案略有改进。支持元素上的宽度偏移和/或高度偏移，以确定将从宽度/高度中减去多少，并防止负尺寸。

```
 <div resize height-offset="260" width-offset="100"> 
```

指示：

```
app.directive('resize', ['$window', function ($window) {
    return function (scope, element) {
        var w = angular.element($window);
        var heightOffset = parseInt(element.attr('height-offset'));
        var widthOffset = parseInt(element.attr('width-offset'));
        var changeHeight = function () {
            if (!isNaN(heightOffset) && w.height() - heightOffset > 0)
                element.css('height', (w.height() - heightOffset) + 'px');
            if (!isNaN(widthOffset) && w.width() - widthOffset > 0)
                element.css('width', (w.width() - widthOffset) + 'px');
        };
        w.bind('resize', function () {
            changeHeight();
        });
        changeHeight();
    }
}]); 
```

**编辑** 在现代浏览器中，这实际上是一种愚蠢的做法。CSS3 有 calc，它允许在 CSS 中指定计算，如下所示：

```
#myDiv {
 width: calc(100% - 200px);
 height: calc(100% - 120px);
} 
```

[http://caniuse.com/#search=calc](http://caniuse.com/#search=calc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T14:57:04.387

看来您需要以下插件： [https ://github.com/yearofmoo/AngularJS-Scope.onReady](https://github.com/yearofmoo/AngularJS-Scope.onReady)

它基本上为您提供了在加载范围或数据后运行指令代码的功能，即 $scope.$whenReady

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T15:33:08.963

将[matty-j](https://stackoverflow.com/users/1371408/matty-j)建议与问题片段相结合，我最终得到了这段代码，重点是在加载数据后调整网格的大小。

的HTML：

```
<div ng-grid="gridOptions" class="gridStyle"></div> 
```

指令：

```
angular.module('myApp.directives', [])
    .directive('resize', function ($window) {
        return function (scope, element) {

            var w = angular.element($window);
            scope.getWindowDimensions = function () {
                return { 'h': w.height(), 'w': w.width() };
            };
            scope.$watch(scope.getWindowDimensions, function (newValue, oldValue) {

                // resize Grid to optimize height
                $('.gridStyle').height(newValue.h - 250);
            }, true);

            w.bind('resize', function () {
                scope.$apply();
            });
        }
    }); 
```

控制器：

```
angular.module('myApp').controller('Admin/SurveyCtrl', function ($scope, $routeParams, $location, $window, $timeout, Survey) {

    // Retrieve data from the server
    $scope.surveys = Survey.query(function(data) {

        // Trigger resize event informing elements to resize according to the height of the window.
        $timeout(function () {
            angular.element($window).resize();
        }, 0)
    });

    // Configure ng-grid.
    $scope.gridOptions = {
        data: 'surveys',
        ...
    };
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-02T13:06:48.753

如果您的 ng-grid 依赖于元素 parent(div, layout) 我的解决方案：

指示

```
myapp.directive('sizeelement', function ($window) {
return{
    scope:true,
    priority: 0,
    link: function (scope, element) {
        scope.$watch(function(){return $(element).height(); }, function(newValue, oldValue) {
            scope.height=$(element).height();
        });
    }}
}) 
```

示例 html

```
<div class="portlet  box grey" style="height: 100%" sizeelement>
    <div class="portlet-title">
        <h4><i class="icon-list"></i>Articles</h4>
    </div>
    <div class="portlet-body" style="height:{{height-34}}px">
        <div class="gridStyle" ng-grid="gridOrderLine" ="min-height: 250px;"></div>
    </div>
</div> 
```

height-34 : 34 是我的标题 div 的固定高度，您可以固定其他高度。

这是一个简单的指令，但它工作正常。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-02-05T09:17:15.867

```
$(document).ready(function() {
       scope.$apply(function() {
                applyHeight();
            });
}); 
```

这也确保在执行语句之前已加载所有脚本。如果你不需要，你可以使用

```
$(window).load(function() {
       scope.$apply(function() {
                applyHeight();
            });
}); 
```

# c# - Web.config 配置似乎正确。但仍然无法访问托管服务器上的数据库

> ID：14703521
> 
> 赞同：0
> 
> 时间：2013-02-05T08:57:51.250
> 
> 标签：c#, asp.net, xml, asp.net-mvc-3, web-config

我知道这个问题很有可能被很多人问到。但我非常有信心，我已经阅读了大部分问题，但仍然无法找到解决方案。

以下是迄今为止我为了在 Godaddy 托管服务器上部署我的 Web 应用程序而详细执行的所有步骤：

*   我正在使用 ASP.NET MVC 3 (C#)。

*   我已将网站上传并部署在 godaddy 托管服务上。

*   我通过执行从我的 SSMS 生成的脚本将我的数据库插入到 godaddy MS SQL 服务器数据库中。

最后，根据[这个](http://support.godaddy.com/help/article/3323/locating-your-database-connection-strings)我能够得到我的connectionString。

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <connectionStrings>
  <add name="database-name" connectionString="Data Source=mysource; Initial Catalog=database-name; User ID=userid; Password=password;" providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

但是，当我在 Internet 上尝试时，我仍然无法将我的 Web 应用程序连接到它的数据库。我非常确定我的 connectionString 是正确的，因为它只是从我的主机服务提供商那里复制粘贴的。

我很确定我错过了一些东西，除了我的 webconfig 或我的 connectionString。除了 web.config 文件之外，还有什么重要且对连接有影响的文件吗？

问候， 阿明

编辑：

很抱歉之前没有提到。我确实输入了正确的“名称”、“数据源”、“数据源”、“用户 ID”和“密码”。出于安全目的，我故意更改了它们。

第二次编辑：

当我尝试在我的应用程序中获取数据时没有错误。响应只是简单地从数据库中获取 null。但是我的表确实存在于数据库中，其中包含所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:34:42.137

数据库实例是否接受 http 流量？您可以从例如 SQL Management Studio 找到并连接到它吗？

# sql - 在 SQL 中获取 2 小时前更改的数据

> ID：14703526
> 
> 赞同：0
> 
> 时间：2013-02-05T08:58:04.380
> 
> 标签：sql, sql-server

我在两小时前更改了表**_table中****_column列中 id 为 12 的记录的数据。**但现在我想要它回来。跟着[**这个**](https://stackoverflow.com/questions/1503298/sql-statement-to-select-all-rows-from-previous-day)，但没有得到所说的。谁能帮我找回它。**[](https://stackoverflow.com/questions/1503298/sql-statement-to-select-all-rows-from-previous-day)**

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:23:26.610

确保您的数据库处于 FULL 或 Bulk-Logged 恢复模式，并且您至少正在进行事务日志备份。您需要使用 STOPAT 选项来恢复事务日志备份。 [http://support.microsoft.com/kb/321836](http://support.microsoft.com/kb/321836)

[如何恢复到时间点](http://msdn.microsoft.com/en-us/library/ms179451%28SQL.90%29.aspx)

> ```
> RESTORE DATABASE AdventureWorks FROM DISK = 'C:\AdventureWorks.BAK' 
> WITH NORECOVERY
> GO 
> RESTORE LOG AdventureWorks FROM DISK = 'C:\AdventureWorks.TRN' 
> WITH RECOVERY, 
> STOPAT = 'Feb 05, 2013 05:31:00 PM' 
> GO 
> ```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:01:43.430

您链接的那个问题与实际返回的行减去一天有关，而不是数据恢复。您是否正在尝试恢复 2 小时前实际更改的数据？如果是这样，我认为这是不可能的，除非您尝试某种可能会变得非常混乱的高清恢复过程。****

# objective-c - 未调用 TextField 委托方法

> ID：14703531
> 
> 赞同：1
> 
> 时间：2013-02-05T08:58:17.493
> 
> 标签：objective-c, cocoa-touch, ios5, uitextfielddelegate

我正在开发针对 iOS 5 的项目。我面临一个非常奇怪的问题。我正在设置

代表我的文本字段为

```
self.myTextField.delegate=self;(in viewDidLoad) 
```

甚至尝试在 nib 中设置委托。但它们都没有触发

以下 textField 委托方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string

- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

我什至尝试为 textField 提供操作，但效果不佳。我想知道这是一个

iOS5 中的问题。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:03:33.967

检查这些点，

首先检查协议，`<UITextFieldDelegate>`在接口

检查财产`IBOutlet`是否附有视图；

记住与插座的连接非常重要

然后`viewDidLoad`检查`[self.txtField setDelegate:self];`

然后委托方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string

- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:55:27.470

您是否在视图中提供了相同的已分配 iboutlet 对象？如果您从实用的加载视图创建并为其分配了一个视图。或者检查是否使用任何动画部分，请评论并验证。

# windows - 进程外 COM 服务器卡住

> ID：14703533
> 
> 赞同：15
> 
> 时间：2013-02-05T08:58:18.680
> 
> 标签：windows, com, marshalling, atl, active-script

我正在使用进程外 COM 服务器（使用 DECLARE_CLASSFACTORY_SINGLETON 实现的 COM 单例“引擎”），它适用于 STA（CComSingleThreadModel，_ATL_APARTMENT_THREADED）。

COM 服务器客户端：

1.  ActiveScript (JScript)，（我使用 AddNamedItem 传递引擎引用）。
2.  两个独立的 IE BHO。

BHO 定期调用 Engine::dispatchEvent，Engine 调用 ActiveScript 的 JavaScript 函数。在我同时打开两个 BHO 之前，这种架构运行良好。

如果我打开两个 BHO，当我调用 ActiveScript 的函数（使用 IDispatch/Invoke）时会发生卡住。我不创建任何额外的线程。

一些注意事项：

*   如果我不将从 BHO 检索到的对象传递给 ActiveScript（或用引擎中创建的相同对象替换它）一切正常。
*   仅当 JScript 垃圾收集器尝试释放从 BHO 检索到的对象（调用堆栈中的 IUnknown_Release_Proxy）时才会发生卡住。

调用栈：

```
>    ntdll.dll!_ZwWaitForMultipleObjects@20()  + 0x15 bytes    
 ntdll.dll!_ZwWaitForMultipleObjects@20()  + 0x15 bytes    
 KernelBase.dll!_WaitForMultipleObjectsEx@20()  + 0x100 bytes    
 kernel32.dll!_WaitForMultipleObjectsExImplementation@20()  + 0x8e bytes    
 user32.dll!_RealMsgWaitForMultipleObjectsEx@20()  + 0xe2 bytes    
 ole32.dll!CCliModalLoop::BlockFn(void * * ahEvent, unsigned long cEvents, unsigned long * lpdwSignaled)  Line 1222    C++
 ole32.dll!ModalLoop(CMessageCall * pcall)  Line 211    C++
 ole32.dll!ThreadSendReceive(CMessageCall * pCall)  Line 4979    C++
 ole32.dll!CRpcChannelBuffer::SwitchAptAndDispatchCall(CMessageCall * * ppCall)  Line 4454 + 0x6 bytes    C++
 ole32.dll!CRpcChannelBuffer::SendReceive2(tagRPCOLEMESSAGE * pMessage, unsigned long * pstatus)  Line 4076    C++
 ole32.dll!CCliModalLoop::SendReceive(tagRPCOLEMESSAGE * pMsg, unsigned long * pulStatus, IInternalChannelBuffer * pChnl)  Line 899 + 0x17 bytes    C++
 ole32.dll!CAptRpcChnl::SendReceive(tagRPCOLEMESSAGE * pMsg, unsigned long * pulStatus)  Line 583 + 0xd bytes    C++
 ole32.dll!CCtxComChnl::SendReceive(tagRPCOLEMESSAGE * pMessage, unsigned long * pulStatus)  Line 734 + 0xa bytes    C++
 ole32.dll!NdrExtpProxySendReceive(void * pThis, _MIDL_STUB_MESSAGE * pStubMsg)  Line 1932    C++
 rpcrt4.dll!@NdrpProxySendReceive@4()  + 0xe bytes    
 rpcrt4.dll!_NdrClientCall2()  + 0x144 bytes    
 ole32.dll!ObjectStublessClient(void * ParamAddress, long Method)  Line 474 + 0x8 bytes    C++
 ole32.dll!_ObjectStubless@0()  Line 154    Asm
 ole32.dll!RemoteReleaseRifRefHelper(IRemUnknown * pRemUnk, int fReleaseRemUnkProxy, int fProcessingPostedMessage, OXIDEntry * pOXIDEntry, unsigned short cRifRef, tagREMINTERFACEREF * pRifRef, IUnknown * pAsyncRelease)  Line 6770 + 0xc bytes    C++
 ole32.dll!RemoteReleaseRifRef(CStdMarshal * pMarshal, OXIDEntry * pOXIDEntry, unsigned short cRifRef, tagREMINTERFACEREF * pRifRef)  Line 6694    C++
 ole32.dll!CStdMarshal::DisconnectCliIPIDs()  Line 3964    C++
 ole32.dll!CStdMarshal::Disconnect(unsigned long dwType)  Line 3273    C++
 ole32.dll!CStdIdentity::~CStdIdentity()  Line 312    C++
 ole32.dll!CStdIdentity::`scalar deleting destructor'()  + 0xd bytes    C++
 ole32.dll!CStdIdentity::CInternalUnk::Release()  Line 767    C++
 ole32.dll!IUnknown_Release_Proxy(IUnknown * This)  Line 1773    C++
 oleaut32.dll!_VariantClear@4()  + 0xac9 bytes    
 jscript.dll!VAR::Clear()  + 0x50 bytes    
 jscript.dll!GcAlloc::ReclaimGarbage()  + 0xa2 bytes    
 jscript.dll!GcContext::Reclaim()  + 0x8e bytes    
 jscript.dll!GcContext::CollectCore()  - 0x72f bytes    
 jscript.dll!GcContext::Collect()  + 0x34 bytes    
 jscript.dll!CScriptRuntime::Run()  - 0x864f bytes    
 jscript.dll!ScrFncObj::CallWithFrameOnStack()  + 0xf3 bytes    
 jscript.dll!ScrFncObj::Call()  + 0x84 bytes    
 jscript.dll!NameTbl::InvokeInternal()  + 0x113 bytes    
 jscript.dll!VAR::InvokeByDispID()  + 0x73 bytes    
 jscript.dll!CScriptRuntime::Run()  + 0x1d89 bytes    
 jscript.dll!ScrFncObj::CallWithFrameOnStack()  + 0xf3 bytes    
 jscript.dll!ScrFncObj::Call()  + 0x84 bytes    
 jscript.dll!NameTbl::InvokeInternal()  + 0x113 bytes    
 jscript.dll!VAR::InvokeByDispID()  + 0x73 bytes    
 jscript.dll!CScriptRuntime::Run()  + 0x1d89 bytes    
 jscript.dll!ScrFncObj::CallWithFrameOnStack()  + 0xf3 bytes    
 jscript.dll!ScrFncObj::Call()  + 0x84 bytes    
 jscript.dll!NameTbl::InvokeInternal()  + 0x12c6 bytes    
 jscript.dll!VAR::InvokeByDispID()  + 0x73 bytes    
 jscript.dll!NameTbl::GetVal()  + 0x3b bytes 
```

实施细节：

```
// Engine (out of process COM singleton)

class ATL_NO_VTABLE CEngine :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CEngine, &CLSID_Engine>,
    public IDispatchImpl<IEngine, &IID_IEngine, &LIBID_EngineLib, /*wMajor =*/ 1, /*wMinor =*/ 0>
{

    DECLARE_CLASSFACTORY_SINGLETON(CEngine)

    STDMETHOD(dispatchEvent)(BSTR name, IDispatch* pEvent, VARIANT_BOOL* pbSuccess)
    {
        // pEvent is CPropertyStore instance
        ActiveScriptDispatch.Invoke1(L"FuncName", pEvent, &varResult);
    }
}

// BHO

class CPropertyStore :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CPropertyStore, &CLSID_NULL>,
    public IDispatch
{
    BEGIN_COM_MAP(CPropertyStore)
        COM_INTERFACE_ENTRY(IUnknown)
        COM_INTERFACE_ENTRY(IDispatch)
    END_COM_MAP()

    BOOL SetProperty(CString strName, VARIANT *value)
    {
        // Store value in CAtlArray
    }

    // IDispatch impl
    STDMETHOD(GetTypeInfoCount)(UINT *pctinfo);
    STDMETHOD(GetTypeInfo)(UINT iTInfo, LCID lcid, ITypeInfo **ppTInfo);
    STDMETHOD(GetIDsOfNames)(REFIID riid, LPOLESTR *rgszNames, UINT cNames, LCID lcid, DISPID *rgDispId);
    STDMETHOD(Invoke)(DISPID dispIdMember, REFIID riid, LCID lcid, WORD wFlags, DISPPARAMS *pDispParams, 
        VARIANT *pVarResult,EXCEPINFO *pExcepInfo, UINT *puArgErr);
}

class ATL_NO_VTABLE CBHO :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CBHO, &CLSID_BHO>,
    public IObjectWithSiteImpl<CBHO>,
    public IDispatchImpl<IBHO, &IID_IBHO, &LIBID_Lib, /*wMajor =*/ 1, /*wMinor =*/ 0>,
    public IDispEventImpl<1, CBHO, &DIID_DWebBrowserEvents2, &LIBID_SHDocVw, 1, 0>
{
    void onEvent(...)
    {
        if(m_pEngine == NULL && SUCCEEDED(m_pEngine.CoCreateInstance(CLSID_Engine)))
        {
            CComObject<CPropertyStore> *pEvent = NULL;
            HRESULT hRes = CComObject<CPropertyStore>::CreateInstance(&pEvent);

            CComVariant varEvent(pEvent);
            CComVariant varName(L"EventName");
            CComVariant varResult;

            m_pEngine.Invoke2(L"dispatchEvent", &varName, &varEvent, &varResult);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T20:08:16.067

您的 BHO（浏览器助手对象）位于单线程公寓中。STA 中对另一个 STA（不同线程）上的对象进行的每个 COM 调用在方法调用中“转换”之前由消息队列中的消息排序。

这通常不是问题，因为大多数时候调用都是由单线程的 GUI 触发的。COM 调用与`WM_LBUTTONUP`消息等一起等待。

在您的情况下发生的情况是，在服务时`onEvent`，您将 BHO 对象发送到另一个线程，在另一个进程中，您的进程外 COM 对象。当您尝试从您的 MTA 公寓回调原始对象时，一条 Windows 消息将发布到托管它的 Internet Explorer 进程中的 BHO STA 线程。但是消息队列仍在忙于为原始请求提供服务。

这解释了你的死锁，以及为什么传递字符串有效。

# javascript - d3.js 无法解析 json 数据

> ID：14703539
> 
> 赞同：1
> 
> 时间：2013-02-05T08:59:04.817
> 
> 标签：javascript, d3.js

我有一个 json 数据并试图用 d3.json 函数解析它。数据的格式是这样的。

```
{
"StoreVisitGraphCount": {
    "list": {
        "count": 23,
        "date": "01-2013"
    },
    "parameters": {
        "format": "m-Y",
        "point": 10,
        "type": "mo"
    }
   }
} 
```

我正在尝试使用以下函数解析它

```
d3.json("http://localhost:8080/data-  services/rest/storeVisitsGraph/20120101,20131231,-1", function(error, data) {
data.StoreVisitGraphCount.list.forEach(function(d) {
d.date = parseDate(d.date);
d.count = +d.count;
}); 
```

它显示一个错误说“Uncaught TypeError: Object # has no method 'forEach'”但是在将 json 数据修改为

```
 {
"StoreVisitGraphCount": {
    "list": [{
        "count": 23,
        "date": "01-2013"
    }],
    "parameters": {
        "format": "m-Y",
        "point": 10,
        "type": "mo"
    }
   }
} 
```

使列表成为一个数组..它成功解析显示没有错误..因为当列表数组中只有一个数据时，其余的会像第一种格式一样创建 json，但是当有多个列表数据时，它会像第二种格式一样创建 json ...如何在 d3.js 中解决或编写函数，以便它也可以解析第一种格式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:24:06.487

如果您想同时处理这两种数据格式，最直接的方法是检查`data.StoreVisitGraphCount.list`是 an`Array`还是`Object`. 从问题中解决：[如何检查 JSON 响应元素是否为数组？](https://stackoverflow.com/questions/951483/how-to-check-if-a-json-response-element-is-an-array)，最可靠的方法是：

```
function isArray(what) {
    return Object.prototype.toString.call(what) === '[object Array]';
} 
```

然后您的代码将显示为：

```
d3.json(..., function(error, data) {
  if (!isArray(data.StoreVisitGraphCount.list)) {
    data.StoreVisitGraphCount.list = [ data.StoreVisitGraphCount.list ];
  }

  data.StoreVisitGraphCount.list.forEach(function(d) {
    d.date = parseDate(d.date);
    d.count = +d.count;
  });
}); 
```

然而，这并不是一个非常一致的 API 设计。如果 API 在您的控制范围内（您从 运行服务`localhost`），则考虑将其更改为一致并在每种情况下返回一个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:40:45.663

第一种格式实际上并不包含一个列表，而是一个对象散列。您需要按如下方式修改代码才能使用它。

```
d3.json(..., function(error, data) {
  data.StoreVisitGraphCount.list.date = parseDate(data.StoreVisitGraphCount.list.date);
  data.StoreVisitGraphCount.list.count = +data.StoreVisitGraphCount.list.count;
}); 
```

# python - Python - 在网格中显示 Excel 数据库

> ID：14703542
> 
> 赞同：0
> 
> 时间：2013-02-05T08:59:21.017
> 
> 标签：python, excel, python-2.7, pygame, grid-layout

我是一名考古学家，正在处理以 6x6 正方形网格布置的挖掘沟的结果 - 每个正方形为 5 mx 5 m。
我想在网格上绘制挖掘中发现的发现的分布。

我想在 6x6 Python/Pygame 网格中显示一些 Excel 数据库值。
有人能告诉我**我应该怎么做吗？**
我想我知道如何让 Python 读取 Excel 文档，`*.csv`但我无法在网格中显示它。

**编辑关于数据**
的数据片段可以在链接中找到。我想显示网格中“分类”列中的项目。 [http://i48.tinypic.com/2rdgn02.jpg](http://i48.tinypic.com/2rdgn02.jpg)

**例如，**
每个正方形中“准备薄片”的数量可以是数字，也可以是颜色/形状，其中每个正方形对应于 S 列中的 gridsquare 数。数据库变得非常大。
因此，
理想情况下，我希望程序能够读取数据库并更新方块，而无需我不断更改程序。

现在的代码如下。

```
<import csv
 import os

 import pygame

# the functions for display
def disp(phrase,loc,screen):   # function to display phrase at loc on surface.
     s = font.render(phrase, True, (255,255,255))
     screen.blit(s, loc) #

def text_display_csv(filename,surface):
    '''Display .csv file contents on surface'''
    f = csv.reader(open("Flint catalogue v1.7 4 Feb 13 2013.csv")) # open the csv file      in one line!

    for row in f:
        y = f.line_num                # assign y as Row no.
        for x,item in enumerate(row): # Get column number(x) and item
        disp(item, (64*x+10,64*y+10), surface) # display item

pygame.init()
pygame.font.init()
font = pygame.font.SysFont("Courier",36) # font initialisation
screen = pygame.display.set_mode((800,600))

# the part you want to see
text = [str(i) for i in range(36)] # raw data!
text_display_csv(text,screen) # text is displayed
pygame.display.update() # screen updated

# Main loop, does nothing! :)
running = True
while running:
     for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
             pygame.quit()
             break
         if not running:
            break 
```

如果可能的话。我希望结果以类似于下面的图片的方式显示，其中每个数字代表正方形中“准备薄片”的数量。 [http://i49.tinypic.com/f39hxv.png](http://i49.tinypic.com/f39hxv.png)

我非常感谢任何帮助，如果这没有意义，请说

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:33:01.220

由于您没有告诉我们您使用的是哪种数据，因此
我采用了整数，但任何字符串都可以使用。

以下是如何**在 Pygame中显示**
**包含字符串**（本例中为数字）的网格：

 **```
import pygame

# the functions for display
def disp(phrase,loc,screen):   # function to display phrase at loc on surface.
    s = font.render(phrase, True, (255,255,255))
    screen.blit(s, loc) #

def text_display(data,surface):
    '''display your data(list/tuple),containing strings on surface'''
    for x in range(6):         # your data is in 6 X 6 grid
        for y in range(6):
            disp( data[x+(y*6)], (64*x+10,64*y+10), surface)
            # 64 is the distance between 2 strings and 10 is the offset

pygame.init()
pygame.font.init()
font = pygame.font.SysFont("Courier",36) # font initialisation
screen = pygame.display.set_mode((400,400))

text = [str(i) for i in range(36)] # raw data!
text_display(text,screen) # text is displayed
pygame.display.update() # screen updated

# Main loop, does nothing! :)
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
            pygame.quit()
            break
    if not running:
        break 
```

## 这导致

![网格图像](../Images/f8644d2bcf51b643e61b3c2bca88712c.png)

* * *

**更新**
Well Tom，
对于 csv 文件，你可以在脚本中添加这个函数，并使用它来代替`text_display`

```
def text_display_csv(filename,surface):
    '''Display .csv file contents on surface'''
    f = csv.reader(open(filename)) # open the csv file in one line!

    for row in f:
        y = f.line_num                # assign y as Row no.
        for x,item in enumerate(row): # Get column number(x) and item
            disp(item, (64*x+10,64*y+10), surface) # display item 
```

我还没有测试过，所以请告诉我它是否有效。

**更新 2**
在第一个代码块中，添加`text_display_csv`和

改变

```
text = [str(i) for i in range(36)] # raw data!
text_display(text,screen) # text is displayed
pygame.display.update() # screen updated 
```

到

```
filename = 'the .csv file'
text_display_csv(filename,screen) # text is displayed
pygame.display.update() # screen updated 
```

这样代码才能工作。（如果需要，更改间距和偏移量）**

# iphone - 从 Settings.bundle 执行代码？

> ID：14703546
> 
> 赞同：1
> 
> 时间：2013-02-05T08:59:32.157
> 
> 标签：iphone, ios

我认为这通常是不可能的，尽管我注意到一些“特权”应用程序能够做到这一点（例如 Twitter 和 Facebook）。我想从 Settings.bundle 中将“注销”添加到我的 iPhone 应用程序中。目前我们在应用程序本身内部进行，但它并不真正属于那里，我们已经添加了一个纯粹的屏幕以便它可以存在，只是感觉很笨重。

问题是，虽然 80% 的注销逻辑只是从默认 plist 中删除一些 OAuth 令牌，但我们还需要 ping 我们的服务器以通知它们删除设备令牌并停止发送推送通知。

是否可以从 Settings.bundle 内部执行此操作，还是需要在应用程序本身内部执行此操作？Twitter 和 Facebook 应用程序在这里是不是特例，Apple 允许他们做我们不能做的事情？

# python - 无论Python字典中的第一级键如何，如何快速访问与特定第二级键对应的所有值？

> ID：14703547
> 
> 赞同：0
> 
> 时间：2013-02-05T08:59:39.280
> 
> 标签：python, dictionary

我有一个 Python 字典，例如：

> Mydict = {'a': {'y': 1, 'x': 5}, 'b': {'y': 10, 'x': 8}}

是否有任何快速方法可以访问与键对应的值：'x'，在这种情况下是第二级键，而不考虑第一级键？

我知道可以使用 for 循环来完成，例如：

```
mylist=[]
for k in Mydict.keys():
    mylist.append(Mydict[k]['x']) 
```

但是有什么快速的单线方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T09:02:48.057

使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
mylist = [v['x'] for v in Mydict.values()] 
```

由于您不需要外部键，因此您只需遍历内部 dicts，并获得所需的`'x'`值。

注意：这只有在每个内部字典都有一个`'x'`键时才有效，可以肯定的是，为了最大限度地减少错误，你可以这样做：

```
mylist = [v.get('x', None) for v in Mydict.values()] 
```

这将起到相同的作用，只有当字典中没有`'x'`键时，它才会返回`None`而不是`KeyError`异常。

对于时间安排，并查看哪种方法最好，请查看[Thorsten Kranz的答案](https://stackoverflow.com/a/14703683/1561176)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:08:06.193

为了完整性：`map`通常是列表理解的一个很好的替代方法，例如

```
mylist = map(lambda v: v['x'], Mydict.values()) 
```

或者

```
mylist = map(lambda k: Mydict[k]['x'], Mydict) 
```

这通常取决于你喜欢什么。

**编辑：**

随着性能的提高，这里对 1,000,000 次重复进行快速比较：

```
import timeit

Mydict = {'a': {'y': 1, 'x': 5}, 'b': {'y': 10, 'x': 8}}

def list_append(d):
    mylist=[]
    for k in d.keys():
        mylist.append(d[k]['x'])

def list_comprehension_values(d):
    return [v['x'] for v in d.values()]

def list_comprehension_keys(d):
    return [d[k]['x'] for k in d]

def map_values(d):
    return map(lambda v: v['x'], d.values())

def map_keys(d):    
    return map(lambda k: d[k]['x'], d)

for method_name in ["list_append",
                    "list_comprehension_values",
                    "list_comprehension_keys",
                    "map_values",
                    "map_keys"]:
    t = timeit.timeit(method_name + "(Mydict)",
                      "from __main__ import Mydict, " + method_name, 
                      number=1000000)
    print "%s: %.2f seconds" % (method_name, t) 
```

结果是：

```
list_append: 0.95 seconds
list_comprehension_values: 0.56 seconds
list_comprehension_keys: 0.47 seconds
map_values: 1.02 seconds
map_keys: 1.01 seconds 
```

**编辑 2 **

对于更大的字典

```
Mydict = dict(zip(range(10000), 
              [{'x' : random.randint(0,10), 'y' : random.randint(0,10)} 
                  for i in range(10000)])) 
```

和更少的重复（数量= 10000），值是不同的：

```
list_append: 16.41 seconds
list_comprehension_values: 6.00 seconds
list_comprehension_keys: 9.62 seconds
map_values: 15.23 seconds
map_keys: 18.42 seconds 
```

所以在这里节省键查找更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:00:47.250

列表理解将是一行，并且几乎快两倍：

```
mylist = [mydict[k]['x'] for k in mydict] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:01:11.273

使用列表推导

```
mylist = [Mydict[k]['x'] for k in Mydict] 
```

请注意，迭代会`Mydict`自动迭代键，因此无需迭代`Mydict.keys()`。

# anchor - FOP XSL-FO 锚定在外部目的地

> ID：14703548
> 
> 赞同：10
> 
> 时间：2013-02-05T08:59:51.747
> 
> 标签：anchor, xsl-fo, apache-fop

使用 XSL-FO (Fop)，我成功地创建了指向外部 PDF 的链接：

```
<fo:basic-link show-destination="new">
<xsl:attribute name="external-destination">foo.pdf</xsl:attribute>
</fo:basic-link> 
```

但是现在，我想在这个外部 PDF 中找到一个锚点。所以我尝试构建类似的东西：

```
<fo:basic-link show-destination="new">
<xsl:attribute name="external-destination">foo.pdf#anchorId</xsl:attribute>
</fo:basic-link> 
```

不幸的是，当我单击生成的链接时，出现错误。它尝试打开文档**foo.pdf%23anchorId**。

在我的 .fo 文件中，带有**#**的链接是正确的，但在 PDF 转换过程中此**#被误解了。**

你有解决这个问题的想法吗？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-01T09:33:26.913

对于 FOP，我们有两个链接：内部和外部。

对于外部，您可以使用：

```
 <fo:basic-link 
    external-destination="url('http://www.paulmccartney.com')" 
    color="blue" text-decoration="underline">
     Paul McCartney
   </fo:basic-link> 
```

内部链接是从文档中的一个位置到同一文档中的另一个位置的链接。创建内部链接有两个步骤：

首先，为所链接的位置提供一个唯一 ID。ID 使用 id 属性指定。该值可以是硬编码或生成的。在下面的示例中，我们使用 generate-id() XSLT 函数来生成 ID：

```
<fo:block font-weight="bold" font-size="larger" 
 id="{generate-id(.)}" break-before="page">
  <xsl:value-of select="."/>
 </fo:block> 
```

其次，创建指向该位置的链接。与外部链接一样，内部链接是使用标签创建的。internal-destination 属性应设置为文档中其他位置的 ID 值。

```
<fo:basic-link internal-destination="{generate-id(.)}">
 <xsl:value-of select="."/>
</fo:basic-link> 
```

我认为您错过了在 'external-destination' 属性中包含 'url' 关键字

# javascript - 从 HTTPS 页面到 HTTP 网址的 AJAX 请求

> ID：14703549
> 
> 赞同：7
> 
> 时间：2013-02-05T08:59:54.267
> 
> 标签：javascript, ajax, http, https, cors

我有一个案例，我需要从 HTTPS 页面到另一个不安全的页面（在不同的域上）执行 AJAX 请求。我们已经实施了 CORS 政策，并且在我们的网站上使用 HTTPS 之前它运行良好。有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:05:04.070

根据 W3，由于“证书错误” [http://www.w3.org/TR/access-control/#user-agent-security无法通过 COR 策略](http://www.w3.org/TR/access-control/#user-agent-security)

# paypal - IOS 贝宝集成

> ID：14703559
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:00:42.783
> 
> 标签：paypal, sdk, ios6, in-app-purchase

我的 Ios 应用程序有一个购买流程。我想使用 Paypal 作为支付网关。既然他们为IOS提供了SDK，是否必须通过应用内购买来开发应用程序？如果我直接使用 Paypal SDK，应用会被拒绝吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:03:22.630

取决于你卖的是什么。如果您的应用销售数字（非实体）商品，您必须使用应用内购买。

有关应用内购买的更多信息，请[点击此处](https://developer.apple.com/news/pdf/in_app_purchase.pdf)。

您可以[在此处](https://developer.apple.com/appstore/resources/approval/guidelines.html)找到一般指南（请参阅第 11 节采购和货币）。

# python - 谁能告诉我是否可以在 ruby 中调用 sikuli 方法，例如（find（），click（），wait（））？

> ID：14703568
> 
> 赞同：0
> 
> 时间：2013-02-05T09:01:36.167
> 
> 标签：python, ruby, sikuli

我可以在 python 中使用 sikuli 方法。但不知道在 ruby​​ 中使用。我的教授告诉我使用 ruby​​ 而不是 python。那么，有人可以帮我解决这个问题。小的代码片段或步骤将不胜感激。如果我想在 ruby​​ 中使用下面的 python 代码，我必须进行哪些更改？

```
from sikuli.Sikuli import *
from sikuliwrapper import *

class abc(object):
    def _init_(self):
            self.appCoordinates = (0,0,1024,768)

  def action(self, *args):
           find("abc.png")
           click("select.png") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:17:26.990

不会撒谎。

[http://rubygems.org/gems/sikuli](http://rubygems.org/gems/sikuli)

它很容易找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T13:28:31.517

是的，你可以在 ruby​​ 中使用 gem sikuli 做任何事情

1.  宝石安装 sikuli
2.  你可以这样写函数

> ```
>  def self.sikuli_move
>     screen = Sikuli::Screen.new
>     screen.click(200, 0)
>   end 
> ```

有关更多详细信息，请查看此链接

1.  [http://rubygems.org/gems/sikuli/versions/0.2.1](http://rubygems.org/gems/sikuli/versions/0.2.1)
2.  [http://rubygems.org/gems/sikuli](http://rubygems.org/gems/sikuli)

# html - CSS3：交替行颜色？

> ID：14703570
> 
> 赞同：1
> 
> 时间：2013-02-05T09:01:41.230
> 
> 标签：html, css

要使用 css 在表格中交替行颜色，我使用：

```
p:nth-child(odd)
{
    background:#ff0000;
}
p:nth-child(even)
{
    background:#0000ff;
} 
```

谁能解释一下“奇数”和“偶数”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:05:48.567

```
<div>
    <p></p> <!-- odd child,  1st -->
    <p></p> <!-- even child, 2nd -->
    <p></p> <!-- odd child,  3rd -->
    <p></p> <!-- even child, 4th -->
    <p></p> <!-- odd child,  5th -->
    <p></p> <!-- even child, 6th -->
    <p></p> <!-- odd child,  7th -->
</div> 
```

检查有关/或[此演示的](http://jsfiddle.net/Nrctk/1/)[这些示例](http://www.w3.org/Style/Examples/007/evenodd)`odd``even`

此外，您可以将它与任何包含元素序列的标签一起使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:06:22.677

奇数：1、3、5、7 号孩子...... 偶数：2、4、6、8 号孩子......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:07:53.300

奇数列 id 是 1,3,5,7,.... 偶数列 id 是 2,4,6,8,...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:07:58.010

例如，如果您有一个列表项，`:odd`将引用出现在 1、3、5、7 等`:even`、2、4、6、8 等处的元素的所有实例。

在这种情况下，`foo`将`foo2`被考虑`:odd`，`bar`并被`bar2`考虑`even`

```
 - foo
 - bar
 - foo2
 - bar2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:08:13.160

它指的是行号...如果该行`even`（可被 2 整除）它使用`background:#0000ff;`，否则如果行号是`odd`（不能被 2 整除）它使用`background:#ff0000;`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:15:48.703

奇数是每个不能被 2 整除的行号，偶数是每隔一行。

由于第一行有索引 1 和 1 模 2 不是 0 它将有红色背景，第二行有索引 2 和 2 模 2 为 0 所以它是蓝色的。

# apache-flex - flex AS3.0如何去掉Listener？

> ID：14703573
> 
> 赞同：0
> 
> 时间：2013-02-05T09:01:54.153
> 
> 标签：apache-flex

我想删除监听器，但无法删除。我使用的方法是：board.removeEventListener(MouseEvent.MOUSE_MOVE, mouseDrag);

```
var board:UIComponent=new UIComponent();
board.addEventListener(MouseEvent.MOUSE_MOVE, function(event:MouseEvent):void
            {
                mouseDrag(event,board);             
            });

private function mouseDrag(event:MouseEvent,board:UIComponent):void
        {
            var x:Number=rectX + (event.stageX - mouseX);
            var y:Number=rectY + (event.stageY - mouseY);               board.x=x;
            board.y=y;      
        } 
```

flex AS3.0如何去掉Listener？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:33:24.913

您不会删除与您最初附加的功能相同的功能。您附加了一个执行的匿名函数，`mouseDrag`并且您试图将其`mouseDrag`自身删除。

您的情况有一些解决方案。

## 1\. 抛弃匿名函数，使用 event.currentTarget

```
board.addEventListener(MouseEvent.MOUSE_MOVE, mouseDrag);
private function mouseDrag(event:MouseEvent):void {
    var board:UIComponent = event.currentTarget as UIComponent;
    board.removeEventListener(MouseEvent.MOUSE_MOVE, mouseDrag);
    ...
} 
```

## 2.将匿名函数放入变量中，以便您有参考

```
var anonymousFunction:Function = function(event:MouseEvent):void {
    mouseDrag(event,board);             
};
board.addEventListener(MouseEvent.MOUSE_MOVE, anonymousFunction); 
```

如果您仍然可以访问该引用，您现在可以正确删除侦听器：

```
board.removeEventListener(MouseEvent.MOUSE_MOVE, anonymousFunction); 
```

# windows-phone-7 - wp7 覆盖当前语言

> ID：14703576
> 
> 赞同：0
> 
> 时间：2013-02-05T09:02:01.197
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我希望用户在我的应用程序中选择他的语言，所以如果他选择与电话默认语言不同的语言（因为他想用其他语言测试他的技能），我希望在运行时更改我的所有全球化字符串。是否有可能在 c# 中为 wp7 或 wp8 覆盖当前应用程序运行时的区域性信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:13:30.447

在`App.xaml.cs`，在`InitializePhoneApplication`方法中：

```
private void InitializePhoneApplication()
{
    Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR");
    Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
    .......
} 
```

请务必编辑您的 .csproj 项目文件以设置对您要在`SupportedCultures`标签中使用的语言的支持：

```
<SupportedCultures>en;fr-FR</SupportedCultures> 
```

# ios - 如何在 iOS 6.1 上重现网站崩溃

> ID：14703579
> 
> 赞同：13
> 
> 时间：2013-02-05T09:02:09.743
> 
> 标签：ios, safari, ios6.1

我收到了一个错误报告，[该网站](http://festivals.ie/)在 iOS 6.1 上查看时崩溃，但我猜是 iOS 6.1 附带的浏览器版本比操作系统本身更相关。我没有任何 iOS 设备，所以我不确定如何重现/调查该问题。

有没有人建议我如何在 Windows/Ubunutu 上重现这个问题？我试过[http://www.browserstack.com/](http://www.browserstack.com/)但他们提供的最新版本是 iOS 6.0。

万一有人知道为什么会发生崩溃，请告诉我。主页上有一个嵌入的 YouTube 视频，听说 flash 和 iOS 是不安的伙伴，所以我想知道这是否是原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T18:42:48.873

# 更新

我能够重现该问题，并从控制台日志中获取此信息：

> Feb 14 12:45:54 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:45:56 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:45:56 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:45:57 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:45:59 Aaron-Bragers-iPhone ReportCrash[46048] : Not saving Jetsam log because no data from the kernel. Feb 14 12:45:59 Aaron-Bragers-iPhone UserEventAgent[13] : jetsam: kernel termination snapshot being created Feb 14 12:45:59 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:46:04 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:46:04 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:46:05 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix. Feb 14 12:46:06 Aaron-Bragers-iPhone MobileSafari[45279] : CGAffineTransformInvert: singular matrix.

... followed by lots of memory warnings.

Your website is causing a memory leak, so iOS is shutting Safari down. Looks like you'll have to [follow these instructions](https://stackoverflow.com/questions/13121807/console-error-cgaffinetransforminvert-singular-matrix-in-uiwebview) to debug it.

* * *

# Windows

There isn't much you can do to try to reproduce it in Windows. The only option is to [download Safari 5 for Windows](http://support.apple.com/kb/DL1531), which might produce similar errors.

However, this doesn't use the same build of WebKit as Mobile Safari (Safari for Windows is much older) so you'll probably need to borrow a friend's Mac and follow along:

# Mac

## 1\. Test your website in the iOS Simulator

**Get Xcode**

If you don't already have it, [download Xcode from the Mac App Store](https://itunes.apple.com/us/app/xcode/id497799835?mt=12).

**Make a blank project**

File -> New Project. Select Single View application (or any other iOS application, it doesn't matter). Press Next. Pick any project name (doesn't matter). Press next, then specify some location, and press Create.

**Run the project**

Press the play button in the upper left corner, or press Command-R, or select Run from the Product menu.

The app should launch in the simulator.

**Switch to Safari**

Press the home button (or command-shift-H). Then tap Safari, and navigate to your website.

## 2\. Log output.

Open up Terminal, and run `tail -f /var/log/system.log | egrep 'MobileSafari'`. This will show you all of Mobile Safari's logs. (You can remove the `egrep` to see *all* logs, in case the crash is outside of Safari.)

# 2\. Reproduce the issue

I was unable to make iOS or Safari crash on your site, but you'll need to do so to debug the issue.

# 3\. Check the simulator's console logs for details

Switch back to Terminal and review the logs for info about what might have caused the crash.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T01:23:07.487

I was able to reproduce the issue on my iPhone 3GS iOS 6.1 it crashes instantly without any action on the page. There's no error on the Web Inspector. When using iOS Simulator, it does Not crash but it show `MobileSafari[11079]: CGAffineTransformInvert: singular matrix.` on device log.

If I scroll the page without interacting with none of the elements, the error `singular matrix` repeat on console, even if I scroll 1 by pixel.

![enter image description here](../Images/45880f490b959db4d8ccc47468a51678.png)

Profiling many times, on iOS Simulator I don't see any javascript memory leak. So I would guess that this is rendering related.

So I removed the stylesheet `http://festivals.ie/static/mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css` to check, and the matrix errors stopped. So that's confirm my concern.

Next we need to be able to separate, what is causing this.

I profiled the page, and scrolled the page, wait for the `singular matrix` error, and stopped the profiling. This is what I got:

![enter image description here](../Images/32372b39e301e04279f5aca5ff5bc057.png)

A redraw area of 320 by 75 pixels, that I would guess is the top header. ![enter image description here](../Images/cc4b127cdd05d77d600f710a3003df19.png)

So I removed the `<div class="navbar navbar-fixed-top top-nav">` using the web inspector, and no more `singular matrix` errors.

![enter image description here](../Images/8a8d575730be7441d7f4c5f687cd818b.png)

I tried enabling and disabling every style that matches to the div, the only one that made any difference was `position: fixed`, but it may be something conflicting inside the fixed div.

![enter image description here](../Images/05f35c118787d7bda106f6808793467d.png)

I tried every element inside, and **I found that removing just the `<button>` fixed the issue.**

![enter image description here](../Images/ba8ee4ac923dbc6c019c3da40497ced8.png)
![enter image description here](../Images/91bef0b7ff3289866d9f44214afd02d8.png)

Now I think that you can track what is the problem of that button.

this is the css related to the button:

```
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:175
label, input, button, select, textarea {
    font-size: 14px;
    font-weight: normal;
    line-height: 20px;
}

festivals.ie
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:21
button, input[type="button"], input[type="reset"], input[type="submit"] {
cursor: pointer;
    -webkit-appearance: button;
}

festivals.ie
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:19
button, input {
    line-height: normal;
}

festivals.ie
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:18
button, input, select, textarea {
    margin: 0;
    font-size: 100%;
    vertical-align: middle;
}

festivals.ie
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:859
* {
    margin: 0;
}

festivals.ie
media="screen, projection"
mNga2i69LFf9ezK2IBanFA9rPb7jjsGzC6PNOP5MjO1.css:798
::selection {
    background: #4e87e1;
    color: #ffffff;
}

Base Style Rules
input[type="button"], input[type="submit"], input[type="reset"], input[type="file"]::-webkit-file-upload-button, button {
    -webkit-box-align: center;
    text-align: center;
    cursor: default;
    color: buttontext;
    padding: 0px 1em;
    border: 1px solid rgb(76, 76, 76);
    border-image: initial;
    background-color: rgba(255, 255, 255, 0.0078125);
    font: 11px Helvetica;
    box-sizing: border-box;
}

input, textarea, keygen, select, button, isindex {
    margin: 0em;
    color: initial;
    letter-spacing: normal;
    word-spacing: normal;
    line-height: normal;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block;
    text-align: -webkit-auto;
}

button {
    -webkit-appearance: button;
} 
```

I hope that this was useful because it took me a long time until here.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T09:12:44.260

1.  您需要在 iOS 设备上进行检查。
2.  iOS 不支持 flash

我认为这不会发生在安装在 Windows 或其他平台上的 safari 中。我认为这是与 iOS 相关的特定问题。

**笔记：**

我在你的网站上遇到了崩溃。当我使用您的网站并单击前进、后退箭头 5 到 6 次时。当我点击图片后，它会进入一个类似的页面**festivals.ie/festival/map**并崩溃。

**编辑：**

在我的 mac 上安装的 safari 上进行了相同的测试。在上述情况下没有发现崩溃。所以我认为这是一个 iOS 特定的崩溃。（我认为与记忆或类似的东西有关）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T09:14:14.993

您需要注册为 Apple Developer 才能使用模拟器并使用 Web 检查器进行调试。

您可以尝试以下链接以获取更多信息。

[http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T00:13:04.207

The problem was caused by the commented-out CSS properties below

```
html {
  background: url(../images/responsive/bg.svg) no-repeat center center fixed;

/* 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
*/

  outline: 0!important;
} 
```

After removing these properties, the problem no longer occurs

# vhdl - 如何生成 78MHz 时钟

> ID：14703581
> 
> 赞同：1
> 
> 时间：2013-02-05T09:02:16.823
> 
> 标签：vhdl, frequency, fpga

我拥有一台 Digilent Nexys2，我正在使用 Xilinx ISE ide 用 VHDL 进行编码。

我必须使用板载 DCM 为我的目的生成一个非常特定的时钟：从 50MHz 的基本时钟开始，占空比 = 50%，我需要一个 78MHz，占空比 = 70% 的输出时钟。

主要问题是我没有注意到使用向导控制输出占空比或其他相关内容的任何选项。我错过了什么吗？有什么解决方案或解决方法吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:09:34.630

恕我直言，使用 Spartan 3E (DCM) 是不可能的。使用其他组件，例如带有 MMCME2_ADV 的 Kintex7，这是可能的。

# xaml - 无法正确滑动 GridView XAML

> ID：14703585
> 
> 赞同：0
> 
> 时间：2013-02-05T09:02:36.350
> 
> 标签：xaml, gridview, windows-8, microsoft-metro

我创建了一个宽度为 1800 的 GridView，其中有几个 GridViewItems，它们的填充量超过了屏幕实际，所以我必须滑动才能看到更多内容。但是，当我水平滑动时，我可以看到滑动前不可见的内容，但是一旦我移开手指/停止滑动，GridView 会自动滑回最左侧的内容。由于某种原因，我通常使用的方法在这个特定项目中不起作用。目前， GridView 包含：

```
 <GridView
  HorizontalAlignment="Left"
  Width="1800"
  SelectionMode="None"
  IsSwipeEnabled="True"
  IsItemClickEnabled="False"> 
```

必须添加什么才能使gridview正常滑动，因为一旦您放开屏幕，它就不会反弹开始？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:19:03.530

你试过用滚动查看器包装你的网格视图吗？

```
<ScrollViewer Style="{StaticResource HorizontalScrollViewerStyle}">
   <GridView ... />
</ScrollViewer> 
```

[这](http://msdn.microsoft.com/library/windows/apps/BR209527)是 msdn 文档

# python - 查找与给定正则表达式不匹配的字符

> ID：14703587
> 
> 赞同：3
> 
> 时间：2013-02-05T09:02:36.720
> 
> 标签：python, regex

我正在编写一个程序来验证和更正给定日期作为字符串。让我们`04121987`作为格式中的日期`ddmmyyyy`。此类日期的正则表达式：

```
(0[1-9]|[12][0-9]|3[01])(0[1-9]|1[012])(19\d\d|20\d\d) 
```

如果我将我的字符串与正则表达式匹配，它会很好地工作。在 Python 中：

```
>>> regex = re.compile(r'(0[1-9]|[12][0-9]|3[01])(0[1-9]|1[012])(19\d\d|20\d\d)')
>>> regex.findall('04121987')
[('04', '12', '1987')] 
```

如果我有`04721987`一个可以清楚地看到`72`不是有效月份的字符串，那么该字符串将与正则表达式不匹配。

```
>>> regex.findall('04721987')
[] 
```

我想知道的是导致正则表达式失败的字符及其位置。在这种情况下，它是`7`。我怎么能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:54:44.887

我相信你想要什么是不可能的，因为`_sre`模块是用*C*实现的；（。

你可以尝试使用[这个包](http://pypi.python.org/pypi/_sre.py)（通过猴子补丁`sre_compile`、修改路径和`_sre`首先导入你的新包等），但我认为它不值得。它是`_sre`完全用 Python 编写的包的实现，因此您将能够查看源代码、对其进行编辑，并在下一个字符不匹配时做一些正确的事情。

您可以通过以下方式做类似的事情：

*   将日期字符串拆分为 3（日、月和年）并独立匹配正则表达式
*   使用不涉及正则表达式的另一种方式验证日期时间

也许您没有获得错误所在的*确切*数字，但我认为在这种情况下它没有太大意义，只要您告诉用户出了什么问题（日、月或年）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:06:24.463

一种可能的方法是构建一个匹配任何东西的正则表达式，但将好的匹配和坏的匹配放在不同的组中。检查结果中填充了哪些组以了解哪个组失败。

```
>>> regex = re.compile(r'(?:(0[1-9]|[12][0-9]|3[01])|(.{,2}))(?:(0[1-9]|1[012])|(.{,2}))(?:(19\d\d|20\d\d)|(.{,4}))')
>>> regex.match('04121987').groups()
('04', None, '12', None, '1987', None)
>>> regex.match('04721987').groups()
('04', None, None, '72', '1987', None)
>>> regex.match('0412').groups()
('04', None, '12', None, None, '') 
```

* * *

另一种方法是以一个合适的有效字符串为基础，逐个字符地替换为输入的字符串，并在每次迭代时进行验证。这里我`datetime.datetime.strptime`用来验证。您也可以使用正则表达式，尽管它必须接受最多 2999 年，所以问题中的那个不起作用。

```
from datetime import datetime

def str_to_date(s):
    good_date = '01011999'
    for i in xrange(len(good_date)):
        try:
            d = datetime.strptime(s[:i+1] + good_date[i+1:], '%d%m%Y')
        except ValueError:
            raise ValueError("Bad character '%s' at index %d" % (s[i:i+1], i))
    return d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:32:59.430

这个解决方案是一个野兽，我希望你能找到更好的方法。此代码经过轻微测试，可能就足够了。errorindex() 函数将日期作为字符串并返回错误条目的索引列表。但是，如果第 1 个月的数字不正确，则会有歧义。如果不知道第一个数字，就不可能确定第二个数字是否正确。这是代码。注意：我忘记了闰年！

```
def errorindex(s):
  err = []
  for i in range(len(s)):
    if i == 0:  #month1
      if int(s[i]) < 0 or int(s[i]) > 1:
        err.append(i)
    if i == 1:  #month2
      if int(s[i-1]) == 0:
        if int(s[i]) < 1 or int(s[i]) > 9:
          err.append(i)
      elif int(s[i-1]) == 1:
        if int(s[i]) < 0 or int(s[i]) > 2:
          err.append(i)
      else:
        if int(s[i]) < 0 or int(s[i]) > 2:
          err.append(i)
    if i == 2:  #day1
      if int(s[i]) < 0 or int(s[i]) > 3:
        err.append(i)
    if i == 3:  #day2
      if int(s[i-1]) in [0,1,2] and str(s[:2]) != '02':
        if int(s[i]) < 0 or int(s[i]) > 9:
          err.append(i)
      elif int(s[i-1]) in [0,1,2] and str(s[:2]) == '02':
        if int(s[i]) < 0 or int(s[i]) > 8:
          err.append(i)
    if i == 4:  #year1
      if int(s[i]) < 1 or int(s[i]) > 2:
        err.append(i)
    if i == 5:  #year2
      if int(s[i-1]) == 1:
        if int(s[i]) != 9:
          err.append(i)  
      elif int(s[i-1]) == 2:
        if int(s[i]) != 0:
          err.append(i)
    if i ==6:
      if int(s[i]) < 0 or int(s[i]) > 9:
        err.append(i)
    if i ==7:
      if int(s[i]) < 0 or int(s[i]) > 9:
        err.append(i)
  return err

s = '04721987'  

print(errorindex(s)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:47:46.313

对我来说最明显的答案是使用一些使用有限自动机的正则表达式库或编写自己的。通过一些修改，您可以精确地确定失败的位置。但我认为这不是你愿意做的。

否则，如果您知道输入将具有准确的大小、准确的日期格式，您可以将其分为 3 个扇区 - dd mm yyyy，然后尝试分别为每个字符分别应用正则表达式。这不是很好的解决方案，但你会得到你想要的。

# javascript - 如何以编程方式更改 Firefox 中的 about:config dom.max_script_run_time 值？

> ID：14703594
> 
> 赞同：4
> 
> 时间：2013-02-05T09:02:58.333
> 
> 标签：javascript, settings

我只是想知道是否有任何方法可以在 Firefox **about:config**窗口中以编程方式更改**dom.max_script_run_time值。**

 **当我的 Firefox 中的默认值为 10 时，我认为在我的网站上运行更长的脚本运行时间太少了。当值设置为默认值（即 10）时，我的 firefox**没有响应**，我收到警告警报消息，如**警告：无响应脚本**我只需将值设置为 20 或 30 以避免任何此类警报经常弹出并让脚本运行更长的时间。

所以我只需要在每次页面加载时更改**dom.max_script_run_time 。**

我已经在 Firefox、Chrome、Safari、Palemoon 和 Opera 等其他浏览器中对此进行了测试。

我只有在 Firefox 中才有这个问题

或者除了更改设置和加载页面还有其他方法吗？

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:50:46.743

当然，您不能通过网络更改该值。我百分百确定

你应该尝试重新设计你的脚本并使你的页面更轻

例如，可悲的是，您应该尽可能避免使用 Firefox

*   边界半径
*   盒子阴影
*   文字阴影
*   动态渐变，例如 -moz-linear-gradient -moz-radial-gradient 等
*   过渡/动画和变换
*   频繁的文本渲染和重新渲染
*   巨大的背景，尤其是背景附件：固定
*   Flash 对象, 画布, svg

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:32:22.010

无论如何，我找到了另一个解决方案来解决这个问题。这就是从页面速度洞察**中延迟加载 JS概念。**从[这里](https://developers.google.com/speed/docs/best-practices/payload#DeferLoadingJS)获得帮助..我添加了下面的代码以在页面加载后异步加载 javascript 文件。这将停止在 Firefox 中显示非响应脚本警告。

现在，我存储在**someScript.js**中的所有 javascript 函数都在页面停止加载后立即调用，并且在两者之间经过了一小段时间。但就我没有收到无响应的脚本错误而言，这不是问题。

**JS的延迟加载：**

```
<script type="text/javascript">

// Add a script element as a child of the body
function downloadJSAtOnload() {
     var element = document.createElement("script");
     element.src = "/js/someScript.js";
     document.body.appendChild(element);
}

// Check for browser support of event handling capability
if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else 
    window.onload = downloadJSAtOnload;

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T16:08:59.733

**在 about:config dom.max.script_run_time**处将整数设置为 1000 或 0 。

我发现这是一个可靠的修复，Firefox 不再有

**警告：无响应的脚本**错误消息，运行速度更快，是

立即修复。**

# aggregate - 交互式报表 - 一个表中多个列的总和乘以另一个表中的值

> ID：14703595
> 
> 赞同：1
> 
> 时间：2013-02-05T09:03:01.950
> 
> 标签：aggregate, oracle-apex

我在 Oracle Apex 中遇到了一个挑战——我想对多列求和以给出 3 行额外的行，即点、分数、%score。还有更多列，但我现在只选择几个。
以下是我的数据的示例结构：

```
Town | Sector  |  Outside| Inside |Available|Price
Roy-----Formal----0----------0----------1------0
Kobus --Formal----0 ---------0--------- 1------0
Wika ---Formal----0----------0--------- 1------0
Mevo----Formal----1----------1----------1------0
Hoch----Formal----1----------1----------1------1            
Points------------2----------2----------5------1
Score------------10---------10---------10------10
%score-----------20---------20---------50------10 
```

每列都有一个恒定的权重（作为一个因素，它可以根据区域而变化）。在这种情况下，区域的权重位于正式部门的第一行：

```
Sector |Outside| Inside |Available|Price
Formal----1----------1 ----------1-----1
Informal--1----------0 ----------2-----1 
```

我尝试在 apex 中使用聚合求和函数，但它不起作用，因为我需要另一个表中的因子。这就是我的挑战开始的地方。

**计算报告点**下方的行= 每列总和 * 每列加权因子
**分数**= 访问过的商店数量的总和（在本例中为 5）* 每列加权因子
**% 分数**= 点数/分数 * 100

报告应按上述方式显示。使用下面的新计算行。
我恳请任何人帮助我应对这一挑战，因为我曾尝试寻找解决方案但没有遇到任何问题。

非常感谢您的提前支持！！

# javascript - 更新表中的布尔单元格

> ID：14703605
> 
> 赞同：0
> 
> 时间：2013-02-05T09:03:40.190
> 
> 标签：javascript, html, ruby-on-rails, ajax

我有一个表单，我想`show_msg`在用户按下提交按钮时更新参数（它是一个布尔参数）。如果用户选中该框并按提交，我想将其设置为 TRUE。否则：假。

所以我有一个有弹出窗口的主html。在这个弹出窗口中，我写了我的表格。（**我应该在“行动”中写什么？**我只需要关闭这个弹出窗口）：

```
<form name="input" action="#" method="post">
   <input type="checkbox" id="mycheckbox">Don't show me again<br>
   <input type="submit" id="Submit">
</form> 
```

这是我的 javascript：

```
$("#submit").click(function() {
   $.ajax({
     ## the url is the controller
     url: '/welcome',
     type: 'PUT',
     data: {show_msg: $("#mycheckbox").is(":checked")}
   });
}); 
```

这是我的控制器：

```
class WelcomeController < ApplicationController

def update
    @user = User.find(params[:id])

    respond_to do |format|
        if @user.update_attributes(params[:show_msg])
            format.html { redirect_to @user, notice: 'You will never see this message again.' }
            format.json { head :no_content }
        end
    end
end 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:22:22.520

`form_for`使用 Rails标记构建表单。

然后不是在提交按钮单击时触发事件，而是在表单提交时触发。

最后，在 you`$.ajax call`中，对于`url`属性，从表单操作属性中检索好的 URL。

有关信息，您可以使用表单标签添加一个`remote: true`选项。`ajax:success`然后在等上绑定一个事件`ajax:error`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:22:06.360

将操作设置为服务器端进程的 URL，如果 JavaScript 失败，该进程将处理提交的数据。

另请参阅[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

# scala - 家族多态性 + Mixins？

> ID：14703607
> 
> 赞同：3
> 
> 时间：2013-02-05T09:03:51.923
> 
> 标签：scala, mixins, traits

我有一系列类型，我想使用 mixins 模块化“丰富”。例如：

```
trait Family {
  self =>
  trait Dog {
    def dogname:String
    def owner:self.Person
  }
  trait Person {
    def name:String
    def pet:self.Dog
  }
}

trait SerializableFamily extends Family {
  trait Dog extends super.Dog {
    def toSimpleString:String = "Dog(" + dogname + ")"
  }
  trait Person extends super.Person {
    def toSimpleString:String = "Person(" + name + ") and his pet " + pet.toSimpleString
  }
}

trait SerializableFamily2 extends Family {
  trait Dog extends super.Dog {
    def toLoudString:String = "Dog(" + dogname.toUpperCase + ")"
  }
  trait Person extends super.Person {
    def toLoudString:String = "Person(" + name.toUpperCase + ") and his pet " + pet.toLoudString
  }
} 
```

但是，上述方法不起作用（Scala 2.9.1）。最后一个表达式无法编译 ( `pet.toSimpleString`)。

这只是我从尝试过的几个策略中挑选出来的一个随机策略：自键入、抽象类型、超级 [...] 等。

我希望能够做这样的事情，最终：

```
val family = new Family with SerializableFamily with TraversableFamily with FooFamily {} 
```

其中每个 mixin 都会为家族中的一个或多个类型添加一组协作方法。

这是一种常见的模式，我已经看到通过使用隐式包装器、基于模式匹配的访问者等来解决。但由于它只是常规 mixin 模式的递归应用，我想知道是否有更简单的方法来实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:58:02.480

您的案例中的错误是预期的，因为`Dog`and `Person`in mixins 不会*覆盖* `Dog`and `Person`in `Family`，因此`self.Person`仍然指`Family.Person`.

这可能更接近您想要的

```
trait Family {
  // type DogType = Dog won't work because then two different mixins 
  // have incompatible DogType implementations
  type DogType <: Dog
  type PersonType <: Person

  trait Dog {
    def dogname:String
    def owner:PersonType 
  }
  trait Person {
    def name:String
    def pet:DogType 
  }
}

trait SerializableFamily extends Family {
  type DogType <: Dog
  type PersonType <: Person

  trait Dog extends super.Dog {
    def toSimpleString:String = "Dog(" + dogname + ")"
  }
  trait Person extends super.Person {
    def toSimpleString:String = "Person(" + name + ") and his pet " + pet.toSimpleString
  }
} 
```

但是你有一些令人讨厌的东西

```
new Family with SerializableFamily with TraversableFamily with FooFamily {
  type DogType = super[SerializableFamily].Dog with super[TraversableFamily].Dog with super[FooFamily].Dog
} 
```

# mysql - 在 JSF 中使用国际化时的问题

> ID：14703611
> 
> 赞同：0
> 
> 时间：2013-02-05T09:04:22.323
> 
> 标签：mysql, jsf, jakarta-ee, jsf-2, character-encoding

我在尝试在 JSF 中实现国际化时遇到问题。当我在我的 UI 页面中输入一些数据（使用英语以外的语言）时，该值作为加密值存储在我的托管 Bean 变量中（甚至无法识别那是什么格式）。当我在我的 UI 页面中输入它时，我无法获得该值。我需要将不同语言的值（来自 JSF 页面）存储在我的 MySql 数据库中。但是如上所述，我正在努力获取托管 Bean 中的输入值。请指导我这样做。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:11:07.513

加密？你在开玩笑。很可能您实际上是指[Mojibake](http://en.wikipedia.org/wiki/Mojibake)。

为了避免 Mojibake，您需要确保在整个应用程序中使用相同的字符编码，同时生成和使用字符。如今，如果您想要统治世界，UTF-8 是一个明智的选择。JSF2 一直默认为 UTF-8。所以你的问题有点奇怪。

也许您实际上正在使用 PrimeFaces？众所周知，当触发 ajax 请求时，默认的 UTF-8 字符编码会变得混乱。这部分[在这里](https://stackoverflow.com/a/9839362/)得到了回答，您需要创建一个 servlet 过滤器。

或者该值实际上是正确的，但是您将该值打印到根本不支持 UTF-8 的输出中，因此您错误地确定了问题的原因？例如通过`System.out.println()`Eclipse 控制台。您需要通过*Window > Preferences > General > Workspace > Text file encoding*进行配置，如此[处](https://stackoverflow.com/questions/13452324/arabic-letters-giving-me-output-as/13452715#13452715)所述。

或者，也许您明确地将 JSF2 编码强制为不同的东西`<f:view encoding>`，例如 to `ISO-8859-1`。您不应该这样做，`encoding`从 中删除该属性`<f:view>`并保持其默认值。

或者很可能您的 MySQL 数据库/表编码根本不是 UTF-8，但这与您描述的问题症状不匹配，或者您必须省略您实际打印从数据库检索的值而不是从表单提交中检索到的值。

无论如何，您需要了解的有关 Java EE Web 应用程序中字符编码的所有信息，以及所有可能的问题和解决方案都在[Unicode 中进行了详细说明 - 如何正确使用字符？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# asp.net - 用于 Flex 4.6 前端的 ASP.NET 中没有 MVC 框架的 Web API

> ID：14703612
> 
> 赞同：3
> 
> 时间：2013-02-05T09:04:27.007
> 
> 标签：asp.net, asp.net-mvc, apache-flex, iis, asp.net-web-api

我对开发比较陌生，所以在离题时请纠正我。我将 Flex 4.6 Web 应用程序作为应用程序的前端，并将 SQL Server 2008 R2 作为 IIS 服务器上的数据库。目前它需要通过 LAN 使用，但必须具有通过 Web 传输的能力。我需要一个 Flex Web 应用程序的解决方案来连接到数据库，而无需从客户端直接调用。为了避免这种情况，我考虑使用 SOAP 或使用 ASP.NET 的 Web API 来放置一个接口。问题是 MVC，尽管一个可靠的架构对于我的需求来说太复杂了，而且在修改的情况下需要做很多工作。我的问题是；Web API 是依赖于 MVC 的使用来实现它还是普通的 ASP.NET 可以工作？如果它确实适用于 ASP.NET；我还需要在普通的 ASP 中创建模型和控制器吗？网络项目？如果我决定进行身份验证，我可以研究哪些有效的方法？欢迎任何其他解决方案或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:11:09.143

ASP.NET Web API 不依赖于 ASP.NET MVC。更准确地说，它甚至不依赖于 System.Web。看一看：

[ASP.NET Web API 不位于 ASP.NET MVC 之上！事实上，它并不位于任何东西之上](http://www.tugberkugurlu.com/archive/newsflash-asp-net-web-api-does-not-sit-on-top-of-asp-net-mvc-in-fact-it-does-not-sit-on-top-of-anything)

# jquery - 如何在jQuery中悬停？

> ID：14703613
> 
> 赞同：0
> 
> 时间：2013-02-05T09:04:30.517
> 
> 标签：jquery, hover, datatables

我在创建表行后必须添加的事件上悬停，就像我想的那样。

这是必须完成的方式，因为在其他方面它不起作用。

```
<script>
    jQuery(document).ready(function() {
        jQuery('#userstable').on('hover', '.email', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a>"));
        });
    });
</script> 
```

我无法添加 out 事件。我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:08:00.480

你想做`on('mouseenter')`而`on('mouseleave')`不是悬停。

您可以像这样同时执行它们：

```
 $('#userstable').on('mouseenter', '.email', function() {
        $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a>"));
    });

    $('#userstable').on('mouseleave', '.email', function() {

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:11:50.663

如果你想删除事件：

```
<script>
    jQuery(document).ready(function() {
        jQuery('#userstable').off('hover', '.email', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a>"));
        });
    });
</script> 
```

查看[链接](http://api.jquery.com/off/)了解更多详情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:13:14.417

```
$('element').hover(function() {
    // Hover on
}, function() {
    // Hover off
}) 
```

文档：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:17:15.783

我想你可以用这个

```
$("#userstable").on(
{
    mouseenter: function() 
    {
        $("#editlink").show();
    },
    mouseleave: function()
    {
        $("#editlink").hide();
    }
}); 
```

在 HTML 中

```
<span id="editlink" style='font-size:80%;display:none'> <a href='#'>Edit</a></span> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:21:04.107

试试这个代码：

```
jQuery(document).ready(function() {
    jQuery('#userstable').hover(function() {
        $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a>"));
    },function() {
        // type mouse out statements here.
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:35:32.967

```
<script>
    jQuery(document).ready(function() {
        jQuery('#userstable').on('mouseenter', '.email', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Edit</a> | <a href='#'>Delete</a></span>"));
        });
        jQuery('#userstable').on('mouseleave', '.email', function() {
            $(this).find("span:last").remove();
        });
    });
</script> 
```

# javascript - 使用“.remove()”函数时代码未运行

> ID：14703617
> 
> 赞同：0
> 
> 时间：2013-02-05T09:04:40.143
> 
> 标签：javascript, jquery

我正在写这个 jquery 代码：

```
$('form').after('<p id="suc"></p>');
$('#suc').html('success !');
$('#suc').show(700);
setTimeout(function(){$('#suc').hide('slow')},2500);
$('#suc').remove(); 
```

当我这样删除时`$('#suc').remove();`：

```
$('form').after('<p id="suc"></p>');
$('#suc').html('success !');
$('#suc').show(700);
setTimeout(function(){$('#suc').hide('slow')},2500); 
```

代码运行成功，但是当我输入它时，它没有运行！

那有什么问题？但是`$('#suc').remove();`在这里是违法的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:08:04.570

在`setTimeout`代码继续之前，调用不会等待回调运行，因此您将立即删除元素。当回调中的代码试图隐藏元素时，它不存在。

删除[方法](http://api.jquery.com/hide/)`complete`回调中的元素：[`hide`](http://api.jquery.com/hide/)

```
setTimeout(function(){
  $('#suc').hide('slow', function(){
    $('#suc').remove();
  });
},2500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:17:35.740

当您使用[`hide`](http://api.jquery.com/hide/)时，您也可以安全使用[`delay`](http://api.jquery.com/delay/)，所以：

```
$('#suc').show(700).delay(2500).hide('slow', function () {
  $(this).remove();
}); 
```

就足够了。

**演示**：http: [//jsbin.com/isediz/2/](http://jsbin.com/isediz/2/)

* * *

此外，作为澄清一点，关于：

> 代码运行成功，但是当我输入它时，它没有运行！

实际上代码运行（在某种意义上），问题是你`remove`不会等待两个异步事件（`setTimeout`和`.hide('slow')`）。所以它会在这两个人完成他们应该做的事情之前得到执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:07:57.927

您需要将 and 的`remove()`内部放在函数`setTimeout`的回调中`hide()`：

```
$('form').after('<p id="suc"></p>');
$('#suc').html('success !');
$('#suc').show(700);

setTimeout(function() { 
    $('#suc').hide('slow', function() { $(this).remove(); })
}, 2500); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:06:22.030

您正在使用`setTimout`已在 setTimout 之后的语句中删除的元素回调。的回调将在setTimeout 的下一条`setTimeout`语句删除具有 id 的元素的语句之后执行。*在隐藏回调中删除**，以便在删除后不被脚本访问*。`#suc`*`#suc`*

```
$('form').after('<p id="suc"></p>');
$('#suc').html('success !');
$('#suc').show(700);
setTimeout(function(){
      $('#suc').hide('slow', 
           function(){$(this).remove();
      }); 
},2500); 
```

# java - 如何将已部署的应用程序从应用程序服务器更改为网络服务器？

> ID：14703619
> 
> 赞同：0
> 
> 时间：2013-02-05T09:04:45.260
> 
> 标签：java, maven, weblogic-10.x

我有一个部署在 oracle weblogic 应用程序服务器中的 web 应用程序。经过分析，我发现不需要应用程序服务器（至少对于这个应用程序），我需要将这个应用程序部署到 oracle weblogic web 服务器中。

任何人都可以帮助解决这个问题，我如何将部署的应用程序从应用程序服务器更改为网络服务器？

或者换句话说，我可以说如何将我的应用程序部署从 oracle weblogic 应用程序服务器迁移到 oracle weblogic web 服务器？

我正在使用 weblogic 10\. 和 Maven 来构建应用程序

关于应用程序，它使用 Apache 轴、webservices、jsf 和一些 java 类。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:08:33.613

我最近将一个应用程序从 WAS 迁移到 tomcat 我遵循的方法是。

*   识别并删除所有 WL 特定的依赖项/jar（您可能不需要）

*   更改构建脚本以生成 .war 而不是 .ear

*   将生成的 .war 部署到任何 servlet 容器/网络服务器

根据您的规格（轴、ws、jsf），您不需要 .ear 但 .war 就可以了。

如果您使用 ant 修改构建脚本，我建议您使用 maven 以获得更好的依赖管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:59:16.543

由@TechExchange 构建答案的顶部

即使对于 Jboss，您仍然需要分析应用程序以删除所有 WL 细节。例如：EJB 的 MDB 的描述符等等。使用 JBOSS，您仍然可以使用 ear 格式。

一个问题，您曾提到，因为您发现应用程序不需要应用服务器，您决定将其迁移到 Web 服务器，现在有了图中的 JMS，您还需要迁移吗？

# linux - 使用 rpmbuild 为 32 位和 64 位构建组合包

> ID：14703621
> 
> 赞同：0
> 
> 时间：2013-02-05T09:04:51.620
> 
> 标签：linux, rpm

我有一个用于 32 位和 64 位 Linux 平台的组合包。

在 64 位系统上，所有文件都在安装规范文件的 %files 部分中提到的任何内容。（32 位和 64 位文件）。在 32 位系统上，所有文件都被安装，无论在 spec 文件的 %files 部分中提到的，但 64 位文件在安装后被删除（我写了一个删除代码）。

问题是，在 32 位机器上，包管理器在查询时显示所有文件以显示包安装的文件。所以 64 位文件显示在 32 位机器上。（例如 rpm -ql）

有什么好的方法可以删除 32 位机器上的 64 位文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:28:26.297

不，没有简单的方法可以做到这一点。RPM 设计为将 32 位和 64 位机器视为独立的体系结构，这是有充分理由的。**您应该构建两个 RPM。**

自行删除刚刚安装在您的`%post`部分中的文件，您将在 RPM 数据库中创建错误。正如您所指出的，`rpm -ql`将文件列为存在（根据数据库，它们*应该*存在）。再举一个例子，现在`rpm -V`对您的 RPM 的任何验证都将被破坏 - 您故意删除的文件被系统视为丢失。`rpm -Va`（验证所有软件包）是许多人在尝试升级操作系统之前都会做的事情，用户会认为他们需要重新安装您的 RPM。

# ajax - WebSockets 协议与 HTTP

> ID：14703627
> 
> 赞同：408
> 
> 时间：2013-02-05T09:05:02.220
> 
> 标签：ajax, http, websocket, comet

有很多关于 WebSocket 和 HTTP 的博客和讨论，也有很多开发者和网站大力提倡 WebSockets，但我还是不明白为什么。

例如（WebSocket 爱好者的论点）：

> HTML5 Web Sockets 代表了 Web 通信的下一个发展——全双工、双向通信通道，通过 Web 上的单个套接字运行。- [websocket.org](https://web.archive.org/web/20210812191126/http://www.websocket.org/quantum.html)

HTTP 支持流式传输：请求正文流式传输（您在上传大文件时使用它）和响应正文流式传输。

> 在与 WebSocket 建立连接期间，客户端和服务器每帧交换数据，每帧 2 个字节，而连续轮询时的 HTTP 标头为 8 KB。

为什么这 2 个字节不包括 TCP 和 TCP 协议开销？

```
GET /about.html HTTP/1.1
Host: example.org 
```

这是约 48 字节的 HTTP 标头。

HTTP 分块编码 - 分块[传输编码](https://en.wikipedia.org/wiki/Chunked_transfer_encoding)：

```
23
This is the data in the first chunk
1A
and this is the second one
3
con
8
sequence
0 
```

*   因此，每个块的开销并不大。

此外，这两种协议都通过 TCP 工作，因此所有与长连接的 TCP 问题仍然存在。

### 问题：

1.  为什么 WebSockets 协议更好？
2.  为什么实施它而不是更新 HTTP 协议？

* * *

## 回答 #1

> 赞同：619
> 
> 时间：2013-02-05T15:54:56.433

**1）为什么WebSockets协议更好？**

WebSockets 更适合涉及低延迟通信的情况，尤其是客户端到服务器消息的低延迟。对于服务器到客户端的数据，您可以使用长期连接和分块传输获得相当低的延迟。但是，这对客户端到服务器的延迟没有帮助，这需要为每个客户端到服务器的消息建立新的连接。

您的 48 字节 HTTP 握手对于现实世界的 HTTP 浏览器连接是不现实的，因为请求通常会发送几千字节的数据作为请求的一部分（双向），包括许多标头和 cookie 数据。以下是使用 Chrome 的请求/响应示例：

*示例请求（2800 字节包括 cookie 数据，490 字节不包括 cookie 数据）：*

```
GET / HTTP/1.1
Host: www.cnn.com
Connection: keep-alive
Cache-Control: no-cache
Pragma: no-cache
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.68 Safari/537.17
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: [[[2428 byte of cookie data]]] 
```

*响应示例（355 字节）：*

```
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 13 Feb 2013 18:56:27 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
Set-Cookie: CG=US:TX:Arlington; path=/
Last-Modified: Wed, 13 Feb 2013 18:55:22 GMT
Vary: Accept-Encoding
Cache-Control: max-age=60, private
Expires: Wed, 13 Feb 2013 18:56:54 GMT
Content-Encoding: gzip 
```

HTTP 和 WebSockets 都具有相同大小的初始连接握手，但是对于 WebSocket 连接，初始握手执行一次，然后小消息只有 6 个字节的开销（2 个用于标头，4 个用于掩码值）。延迟开销不是来自标头的大小，而是来自解析/处理/存储这些标头的逻辑。此外，TCP 连接建立延迟可能是比每个请求的大小或处理时间更大的因素。

**2) 为什么要实现它而不是更新 HTTP 协议？**

有人努力重新设计 HTTP 协议以实现更好的性能和更低的延迟，例如[SPDY](http://en.wikipedia.org/wiki/SPDY)、[HTTP 2.0](http://en.wikipedia.org/wiki/HTTP_2.0)和[QUIC](https://en.wikipedia.org/wiki/QUIC)。这将改善普通 HTTP 请求的情况，但 WebSockets 和/或 WebRTC DataChannel 的客户端到服务器数据传输的延迟很可能仍然低于 HTTP 协议（​​或者它将用于看起来很像 WebSockets 的模式无论如何）。

**更新**：

这是一个思考 Web 协议的框架：

*   **TCP**：低层、双向、全双工、保证顺序的传输层。不支持浏览器（通过插件/Flash 除外）。

*   **HTTP 1.0**：基于 TCP 的请求-响应传输协议。客户端发出一个完整的请求，服务器给出一个完整的响应，然后关闭连接。请求方法（GET、POST、HEAD）对服务器上的资源具有特定的事务意义。

*   **HTTP 1.1**：保持 HTTP 1.0 的请求-响应特性，但允许连接保持打开状态以接收多个完整请求/完整响应（每个请求一个响应）。请求和响应中仍有完整的标头，但连接被重用且未关闭。HTTP 1.1 还添加了一些额外的请求方法（OPTIONS、PUT、DELETE、TRACE、CONNECT），它们也具有特定的事务含义。然而，正如 HTTP 2.0 草案提案的[介绍](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2-01#section-1)中所指出的，HTTP 1.1 流水线并未广泛部署，因此这极大地限制了 HTTP 1.1 在解决浏览器和服务器之间的延迟方面的实用性。

*   **长轮询**：对 HTTP（1.0 或 1.1）的一种“破解”，其中服务器不会立即响应（或仅使用标头部分响应）客户端请求。在服务器响应之后，客户端立即发送一个新请求（如果通过 HTTP 1.1，则使用相同的连接）。

*   **HTTP 流式传输**：允许服务器向单个客户端请求发送多个响应的多种技术（多部分/分块响应）。W3C 正在将其标准化为使用MIME 类型的[服务器发送事件。](http://en.wikipedia.org/wiki/Server-sent_events)`text/event-stream`浏览器 API（与 WebSocket API 非常相似）称为 EventSource API。

*   **Comet/服务器推送**：这是一个涵盖长轮询和 HTTP 流的总称。Comet 库通常支持多种技术来尝试和最大化跨浏览器和跨服务器支持。

*   **WebSockets**：建立在 TCP 上的传输层，使用 HTTP 友好的升级握手。与作为流传输的 TCP 不同，WebSockets 是基于消息的传输：消息在线路上进行分隔，并在交付给应用程序之前完整地重新组装。WebSocket 连接是双向的、全双工的和长寿命的。在初始握手请求/响应之后，没有事务语义，并且每条消息的开销很小。客户端和服务器可以随时发送消息，并且必须异步处理消息接收。

*   **SPDY**：Google 发起的一项提议，使用更有效的有线协议扩展 HTTP，但保留所有 HTTP 语义（请求/响应、cookie、编码）。SPDY 引入了一种新的帧格式（以长度为前缀的帧），并指定了一种将 HTTP 请求/响应对分层到新的帧层上的方法。可以压缩标头，并且可以在建立连接后发送新的标头。在浏览器和服务器中有 SPDY 的真实实现。

*   **HTTP 2.0**：与 SPDY 具有相似的目标：减少 HTTP 延迟和开销，同时保留 HTTP 语义。当前草案源自 SPDY，定义了升级握手和数据帧，与用于握手和帧的 WebSocket 标准非常相似。另一个 HTTP 2.0 草案提案 (httpbis-speed-mobility) 实际上将 WebSockets 用于传输层，并将 SPDY 多路复用和 HTTP 映射添加为 WebSocket 扩展（WebSocket 扩展在握手期间协商）。

*   **WebRTC/CU-WebRTC**：允许浏览器之间的点对点连接的建议。这可以实现更低的平均和最大延迟通信，因为底层传输是 SDP/数据报而不是 TCP。这允许数据包/消息的无序传递，从而避免了由丢弃的数据包引起的延迟峰值的 TCP 问题，这会延迟所有后续数据包的传递（以保证按顺序传递）。

*   **QUIC**：是一种实验性协议，旨在减少 TCP 的网络延迟。从表面上看，QUIC 与在 UDP 上实现的 TCP+TLS+SPDY 非常相似。QUIC 提供相当于 HTTP/2 的多路复用和流量控制，相当于 TLS 的安全性，以及相当于 TCP 的连接语义、可靠性和拥塞控制。由于 TCP 是在操作系统内核和中间盒固件中实现的，因此对 TCP 进行重大更改几乎是不可能的。然而，由于 QUIC 是建立在 UDP 之上的，它没有这样的限制。QUIC 是针对 HTTP/2 语义设计和优化的。

**参考资料**：

**HTTP**：

*   [维基百科 HTTP 页面](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)
*   [W3C HTTP 相关草案/协议列表](http://www.w3.org/Protocols/)
*   [IETF HTTP/1.1 和 HTTP/2.0 草案列表](http://tools.ietf.org/id/draft-ietf-httpbis)

**服务器发送事件**：

*   [W3C 服务器发送事件/事件源候选推荐](http://www.w3.org/TR/eventsource/)
*   [W3C 服务器发送事件/事件源草案](http://dev.w3.org/html5/eventsource/)

**网络套接字**：

*   [IETF RFC 6455 WebSockets 协议](https://www.rfc-editor.org/rfc/rfc6455)
*   [IETF RFC 6455 WebSocket 勘误表](http://www.rfc-editor.org/errata_search.php?rfc=6455)

**SPDY**：

*   [IETF SPDY 草案](https://datatracker.ietf.org/doc/html/draft-mbelshe-httpbis-spdy)

**HTTP 2.0**：

*   [IETF HTTP 2.0 httpbis-http2 草案](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2-01)
*   [IETF HTTP 2.0 httpbis-speed-mobility 草案](https://datatracker.ietf.org/doc/html/draft-montenegro-httpbis-speed-mobility)
*   [IETF httpbis-network-friendly Draft](https://datatracker.ietf.org/doc/html/draft-tarreau-httpbis-network-friendly-00) - 一个较旧的 HTTP 2.0 相关提案

**WebRTC**：

*   [W3C WebRTC API 草案](http://dev.w3.org/2011/webrtc/editor/webrtc.html)
*   [IETF WebRTC 草案列表](http://tools.ietf.org/wg/rtcweb/)
*   [IETF WebRTC 概述草案](https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-overview)
*   [IETF WebRTC 数据通道草案](https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-data-channel)
*   [Microsoft CU-WebRTC 提案起始页](http://html5labs.interopbridges.com/prototypes/cu-rtc-web/cu-rtc-web/info)

**快速**：

*   [QUIC 铬项目](https://www.chromium.org/quic)
*   [IETF QUIC 草案](https://datatracker.ietf.org/doc/html/draft-tsvwg-quic-protocol-00)

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2013-02-05T14:54:03.997

您似乎认为 WebSocket 是 HTTP 的替代品。它不是。这是一个扩展。

WebSockets 的主要用例是在 Web 浏览器中运行并从服务器接收实时数据的 Javascript 应用程序。游戏就是一个很好的例子。

在 WebSockets 之前，JavaScript 应用程序与服务器交互的唯一方法是通过`XmlHttpRequest`. 但是这些有一个主要缺点：除非客户端明确请求，否则服务器无法发送数据。

但是新的 WebSocket 功能允许服务器随时发送数据。这允许以低得多的延迟实现基于浏览器的游戏，而无需使用像 AJAX 长轮询或浏览器插件这样的丑陋黑客。

**那么为什么不使用带有流式请求和响应的普通 HTTP**

在对另一个答案的评论中，您建议只异步流式传输客户端请求和响应正文。

事实上，WebSockets 基本上就是这样。尝试从客户端打开 WebSocket 连接一开始看起来像一个 HTTP 请求，但标头 ( `Upgrade: websocket`) 中的一个特殊指令告诉服务器以这种异步模式开始通信。[WebSocket 协议的初稿](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-00)仅此而已，并进行了一些握手以确保服务器真正理解客户端想要异步通信。但后来意识到代理服务器会因此而感到困惑，因为它们习惯于 HTTP 的通常请求/响应模型。发现了针对代理服务器的[潜在攻击场景。](https://www.cnet.com/news/web-sockets-and-the-risks-of-unfinished-standards/)为了防止这种情况发生，有必要让 WebSocket 流量看起来不像任何正常的 HTTP 流量。这就是为什么在[协议的最终版本](https://www.rfc-editor.org/rfc/rfc6455)。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2019-04-25T15:00:59.303

常规 REST API 使用 HTTP 作为通信的底层协议，它遵循请求和响应范式，这意味着通信涉及客户端从服务器请求一些数据或资源，然后服务器响应该客户端。但是，HTTP 是一种无状态协议，因此每个请求-响应周期最终都必须重复标头和元数据信息。在频繁重复的请求-响应周期的情况下，这会导致额外的延迟。

[![http](../Images/5088e4b49f3b5c641715b1911816cc14.png)](https://i.stack.imgur.com/qUyFW.png)

使用 WebSockets，虽然通信仍以初始 HTTP 握手开始，但它会进一步升级以遵循 WebSockets 协议（即，如果服务器和客户端都符合该协议，因为并非所有实体都支持 WebSockets 协议）。

现在使用 WebSockets，可以在客户端和服务器之间建立全双工和持久的连接。这意味着与请求和响应不同，只要应用程序正在运行，连接就会保持打开状态（即它是持久的），并且由于它是全双工的，因此可以进行双向同时通信，即现在服务器能够当新数据（客户端感兴趣的）可用时，启动通信并将一些数据“推送”到客户端。

[![网络套接字](../Images/38723eabaaef77d7c0d50033ff0fa868.png)](https://i.stack.imgur.com/ReJux.png)

WebSockets 协议是有状态的，允许您实现发布-订阅（或发布/订阅）消息传递模式，这是实时技术中使用的主要概念，您可以在没有服务器推送的情况下以服务器推送的形式获得新的更新客户端必须重复请求（刷新页面）。此类应用的示例包括优步汽车的位置跟踪、推送通知、实时更新股票市场价格、聊天、多人游戏、实时在线协作工具等。

您可以查看有关 Websockets 的深入研究文章，该文章解释了该协议的历史、它是如何形成的、它的用途以及您如何自己实现它。

这是我所做的关于 WebSockets 的演示视频，以及它们与使用常规 REST API 的不同之处：[标准化和利用数据流的指数增长](https://www.youtube.com/watch?v=DoDzfRU4rEU&list=PLZWI9MjJG-V_Y52VWLPZE1KtUTykyGTpJ&index=2&t=0s)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-08-26T14:45:17.727

对于 TL;DR，这里有 2 美分和一个更简单的版本来回答您的问题：

1.  WebSockets 通过 HTTP 提供了以下好处：

    *   连接期间的持久有状态连接
    *   低延迟：服务器/客户端之间的近实时通信，因为没有按照 HTTP 要求为每个请求重新建立连接的开销。
    *   全双工：服务器和客户端可以同时发送/接收
2.  WebSocket 和 HTTP 协议旨在解决不同的问题，IE WebSocket 旨在改善双向通信，而 HTTP 被设计为无状态，使用请求/响应模型进行分发。除了出于遗留原因（防火墙/代理渗透）共享端口之外，将它们组合成一个协议并没有太多共同点。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2018-01-19T19:25:09.787

## 为什么 WebSockets 协议更好？

我不认为我们可以像谁​​更好那样将它们并排比较。**仅仅因为他们正在解决两个不同的问题**，这将不是一个公平的比较。他们的要求不同。这就像将苹果与橙子进行比较。它们不一样。

**HTTP**是一种请求-响应协议。客户端（浏览器）想要一些东西，服务器给它。那是。如果客户端想要的数据很大，服务器可能会发送流数据以避免不必要的缓冲区问题。这里的主要要求或问题是如何从客户端发出请求以及如何响应他们请求的资源（超文本）。这就是 HTTP 大放异彩的地方。

> 在 HTTP 中，只有客户端请求。服务器只响应。

**WebSocket**不是只有客户端才能请求的请求-响应协议。它是一个套接字（非常类似于 TCP 套接字）。意味着一旦连接打开，任何一方都可以发送数据，直到下划线的 TCP 连接关闭。它就像一个普通的插座。与 TCP 套接字的唯一区别是 WebSocket 可以在 Web 上使用。在网络上，我们对普通套接字有很多限制。大多数防火墙会阻止 HTTP 使用的 80 和 433 以外的其他端口。代理和中介也会有问题。因此，为了使协议更容易部署到现有的基础设施 WebSocket 使用 HTTP 握手来升级。这意味着当第一次连接要打开时，客户端发送一个 HTTP 请求告诉服务器说“那不是 HTTP 请求，请升级到 WebSocket 协议”。

```
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13 
```

一旦服务器理解请求并升级到 WebSocket 协议，则不再应用任何 HTTP 协议。

所以我的回答是，**谁都不比谁好。它们完全不同。**

## 为什么实施它而不是更新 HTTP 协议？

好吧，我们也可以使用名为**HTTP**的名称制作所有内容。但是我们可以吗？如果它们是两个不同的东西，我会更喜欢两个不同的名字。希克森和[迈克尔卡特](https://en.wikipedia.org/wiki/Michael_Carter_(entrepreneur))也是如此。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-12T18:51:09.017

其他答案似乎没有涉及这里的一个关键方面，那就是您没有提到需要支持 Web 浏览器作为客户端。上面普通 HTTP 的大多数限制都假设您将使用浏览器/JS 实现。

HTTP协议完全能够进行全双工通信；让客户端执行带有分块编码传输的 POST 并且服务器返回带有分块编码主体的响应是合法的。这会将标头开销删除到仅在初始化时。

因此，如果您要寻找的只是全双工、控制客户端和服务器，并且对 WebSocket 的额外框架/功能不感兴趣，那么我认为 HTTP 是一种更简单的方法，具有更低的延迟/CPU（尽管延迟两者实际上只会在微秒或更短的时间内有所不同）。

# symfony - Symfony2 登录路由不断重定向到 https

> ID：14703632
> 
> 赞同：4
> 
> 时间：2013-02-05T09:05:25.363
> 
> 标签：symfony, login, https, routing

我已经尝试过 FOS 用户和 facebook 捆绑包，当我想返回到我实施的登录过程时出现了问题。一切都应该恢复正常，但是当我进入 /login 页面时，它一直重定向到 https（我没有在 apache 中打开它，所以它失败了）..

我在日志中没有找到任何东西。我认为它应该在我的包之外的某个地方，因为请求从未到达`SecurityController`. 我还删除了所有与 FOS 相关的文件。任何帮助您将不胜感激。

从`security.yml`

```
 firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern: ^/
        anonymous: ~
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path:   /logout
            target: /
        #remember_me:
        #    key: "%secret%"
        #    lifetime: 31536000
        #    path: /
        #    domain: ~

access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

从`routing.yml`

```
login:
    pattern:   /login
    defaults:  { _controller: TnDWWebBundle:Security:login }

login_check:
    pattern:   /login_check 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:16:45.320

你应该试试[JmikolaInsecureRoutesBundle](https://github.com/jmikola/JmikolaInsecureRoutesBundle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:54:41.557

您可以使用该`requires_channel`参数强制 HTTP over HTTPS 在您的`security.yml`：

```
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: http } 
```

[http://symfony.com/doc/current/book/security.html#securing-by-channel](http://symfony.com/doc/current/book/security.html#securing-by-channel)

# iphone - 如何从 iOS 在 tumblr 上发布 HTML 正文？

> ID：14703633
> 
> 赞同：0
> 
> 时间：2013-02-05T09:05:30.897
> 
> 标签：iphone, html, ios, post, tumblr

我想格式化我在 tumblr 上的帖子。为此，我正在尝试`HTML`在 tumblr 上发布文本帖子。

这就是我正在做的事情。

如果我使用以下 html，则它会正确发布在 tumblr 墙上。

```
postbody=@"body=<p>Hi Taruni </br> <b><i>Neema</p>" 
```

我在我的 tumblr 墙上得到了正确的格式。

但是，如果我添加锚标签或 img 标签，则它不起作用。

```
postbody=@"body=<p>Hi Taruni </br> <b><i>Neema<img src=\"http://www.google.com\"></p>" 
```

如果我使用上述 postBody 发布，那么我会收到以下回复

`{"meta":{"status":401,"msg":"Not Authorized"},"response":[]}`

可能是什么问题呢？

# javascript - addEventListener 在 Titanium 中不起作用

> ID：14703635
> 
> 赞同：1
> 
> 时间：2013-02-05T09:05:42.023
> 
> 标签：javascript, iphone, titanium, titanium-mobile

我是钛的新手，将它用于 iphone 应用程序我没有让事件在 Ti.Network.createHTTPClient() 函数中工作。我不能从网络功能的外部调用它。为什么会这样？

我的目标是当我单击一个图像时，它调用单击事件以在图像库中显示该图像。我在 carImageGallery.js 文件中有图片库代码。

我无法确定问题所在。请帮我。这是我的代码示例。提前致谢。

```
var win = Ti.UI.currentWindow;

var nid = Titanium.App.Properties.getInt('id');
var url = carsDetailUrl + nid;

var imageArea = Titanium.UI.createView({
    width : 300,
    top: 50,
    height : 125,
    backgroundColor : '#fffB',
    borderRadius : 6,
})

var xhr = Ti.Network.createHTTPClient({
    onload : function() {

        var tableData = [];
        var topPosition = 00;
        var cars, userNameLabel, commentsLabel, row, dateLabel;

        var headLines, titleLabel, imageLabel, i, row, viewDetail, cars,images;

        cars = JSON.parse(this.responseText);
        headLines = cars.data[1];
        images = cars.data[1]['image'];

        Ti.API.info(images);

        var mainScrollView = Ti.UI.createScrollView({
            top : '0dp',
            left : '0dp',
            contentWidth : 320,
            touchEnabled : 'true',
            borderRadius : 10,
            backgroundImage : '../images/bg.png',
            showHorizontalScrollIndicator : false,
            showVerticalScrollIndicator : false,
            height : '300dp'
        });

        if (getSession() != false) {
            mainScrollView.height = '300dp';
        } else {
            mainScrollView.height = 'auto';
        }

        var viewDetail = Ti.UI.createView({
            top : '10dp',
            left : '10dp',
            height : 'auto',
            width : '94%',
            touchEnabled : 'true',
            borderRadius : 10,
            backgroundColor : '#FFFFFF',
        });
        var view = Titanium.UI.createView({
            borderColor : "#C0C0C0",
            borderWidth : 1,
            top : "50dp",
            left : "10dp",
            width : "94%",
            height : "1dp"
        });

        var titleLabel = Ti.UI.createLabel({
            text : headLines['title'], 
            font : {
                fontSize : '14dp',
                fontWeight : 'bold',

            },
            height : 'auto',
            left : '10dp',
            top : '10dp',
            color : '#C51515',
            touchEnabled : true
        });
        brandLabel = Ti.UI.createLabel({
            text : headLines['brand'], 
            font : {
                fontSize : '12dp',
                fontWeight : 'bold',

            },
            height : 'auto',
            left : '10dp',
            top : '30dp',
            color : '#000',
            touchEnabled : true
        });

        var image1 = Ti.UI.createButton({
            backgroundImage : encodeURI(images[1]),
            left : '8dp',
            top : '10dp',
            width : '135dp',
            height : '106dp',
            borderColor : '#000000',
            borderRadius : 6,
            borderWidth : 1,
        });
        var image2 = Ti.UI.createButton({
            backgroundImage : encodeURI(images[2]), //"../images/bus.jpg",
            left : '150dp',
            top : '11dp',
            width : '70dp',
            height : '50dp',
            borderColor : '#000000',
            borderRadius : 3,
            borderWidth : 1,
        });
        var image3 = Ti.UI.createButton({
            backgroundImage : encodeURI(images[3]),
            left : '150dp',
            top : '64dp',
            width : '70dp',
            height : '50dp',
            borderColor : '#000000',
            borderRadius : 3,
            borderWidth : 1,
        });
        var image4 = Ti.UI.createButton({
            backgroundImage : encodeURI(images[4]),
            left : '223dp',
            top : '11dp',
            width : '70dp',
            height : '50dp',
            borderColor : '#000000',
            borderRadius : 3,
            borderWidth : 1,
        });
        var image5 = Ti.UI.createButton({
            backgroundImage : encodeURI(images[5]),
            left : '223dp',
            top : '64dp',
            width : '70dp',
            height : '50dp',
            borderColor : '#000000',
            borderRadius : 3,
            borderWidth : 1,
        });

        var textLabel1 = Ti.UI.createLabel({
            text : headLines['description'],
            font : {
                fontSize : '10dp',
                fontWeight : 'bold',

            },
            height : 'auto',
            left : '10dp',
            top : '170dp',
            //bottom: '50dp',
            color : '#000',
            touchEnabled : true
        });

        var view2nd = Titanium.UI.createView({
            layout : 'vertical',
            top : "20dp",
            left : "10dp",
            width : 300,
            touchEnabled : 'true',
            height : "auto"
        });

        viewDetail.add(view);
        viewDetail.add(titleLabel);
        viewDetail.add(brandLabel);
        viewDetail.add(imageArea);
        imageArea.add(image1);
        imageArea.add(image2);
        imageArea.add(image3);
        imageArea.add(image4);
        imageArea.add(image5);

        view2nd.add(textLabel1);

        image1.addEventListener('click', function(e) {

              Ti.API.info("image1 clicked");

            var newWin = Ti.UI.createWindow({
                url : '../automobileSubClass/carImageGallery.js',
                title : headLines['title'],
                tabBarHidden : true,
                barColor : '#000000',
                backgroundImage : "../images/bg.png"
            });
            Titanium.UI.currentTab.open(newWin, {
                animated : true
            });

        });

        mainScrollView.add(viewDetail);
        win.add(mainScrollView);

    },

    onerror : function(e) {
        Ti.API.debug("STATUS: " + this.status);
        Ti.API.debug("TEXT:   " + this.responseText);
        Ti.API.debug("ERROR:  " + e.error);
        alert('There was an error retrieving the remote data. Please check your   internet cunnectivity.');
    },
    timeout : 45000
});

xhr.open("GET", url);
xhr.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:53:59.993

```
image1.addEventListener('click', function(e) {

              Ti.API.info("image1 clicked");

            var newWin = Ti.UI.createWindow({
                url : '../automobileSubClass/carImageGallery.js',
                title : headLines['title'],
                tabBarHidden : true,
                barColor : '#000000',
                backgroundImage : "../images/bg.png"
            });
            Titanium.UI.currentTab.open(newWin, {
                animated : true
            });

        }); 
```

1.  您是否尝试通过删除窗口和选项卡来注册单击事件。
2.  为什么 tabBarHidden: true 并且您正试图在 currentTab 中打开 newWin。

# plugins - Jenkins 中的 Mail Commander 插件无法触发参数化构建

> ID：14703637
> 
> 赞同：1
> 
> 时间：2013-02-05T09:05:45.233
> 
> 标签：plugins, jenkins

我正在尝试通过邮件指挥官插件在 Jenkins 中构建参数化作业。

根据插件的文档，我已经配置了它。它触发不需要任何参数的独立作业。

它还构建参数化作业，但使用默认值。

MailCommander 插件读取主题并构建特定触发器。

我将命令设为“build jobname -p key=value -p key=value”，但 MailCommander 只是忽略了参数。

请让我知道是否还有其他配置需要我做。

# ios - iOS多线程问题

> ID：14703641
> 
> 赞同：2
> 
> 时间：2013-02-05T09:05:53.493
> 
> 标签：ios, objective-c, multithreading, image, cocoa-touch

我对 iOS 开发很陌生，我正面临一个多线程问题。

我正在使用带有 SDWebImage 的**KTPhotobrowser****创建**照片和视频库。我必须在每张图片上加载一些外部数据，我不想影响画廊滚动视图的流畅度。

所以，我正在尝试使用`NSOperation`and来做到这一点`NSOperationQueue`，但我不确定我做得对。

如果用户没有停留在图片上并继续滚动，我想要的是停止加载过程。

**我当前的代码：**

```
//setCurrentIndex is called when the scrollView is scrolled

- (void)setCurrentIndex:(NSInteger)newIndex {

   [loadingQueue_cancelAllOperations]; 
   currentIndex_ = newIndex;
   [self loadPhoto:currentIndex_];     
   NSInvocationOperation *InvocationOp = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(loadInfosAtIndex:) object:newIndex];

   [loadingQueue_ addOperation:InvocationOp];      
   [InvocationOp release];

   [selfloadPhoto:currentIndex_ + 1];
   [selfloadPhoto:currentIndex_ - 1];
   [selfunloadPhoto:currentIndex_ + 2];
   [selfunloadPhoto:currentIndex_ - 2]; 
}

-(void) loadInfosAtIndex:(NSInteger)index {

   if (index < 0 || index >= photoCount_) {
        return;
   }

   KTPhotoView* photoView = [photoViews_ objectAtIndex:index];
   if([photoView infosAlreadyLoaded]){
       NSLog(@"%d Already Loaded", index);
       return;
   }

    //Get the extra information by calling a web service
    photoView.infosAlreadyLoaded = YES;
} 
```

我认为这不是*正确的方法*......有没有人有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:16:15.493

与其依赖基于调度的取消（这会使您处于不确定状态），不如拥有一个具有原子访问权限的取消实例变量（通过原子属性或带有互斥锁的 BOOL ivar）。

然后，您只需将取消标志设置为 YES 并定期在 loadInfosAtIndex 中检查它，而不是 [loadingQueue_cancelAllOperations]。这本质上是轮询取消，如果涉及代码，可能会很痛苦。但它的优点是让您能够通过读取标志来优雅地处理取消。作为处理的一部分，您可以将 isRunning 标志（也需要是原子/互斥的）设置为 NO 并通过返回退出线程。

在主线程中，将取消标志设置为YES后，可以等到isRunning标志为NO后再开启一个新线程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T09:21:43.417

[loadingQueue_cancelAllOperations]，根本不会立即取消操作，它只会取消队列中尚未开始执行的操作。

如果队列中的操作已经开始，则只有在操作完成后才将其删除。[有关 cancelAllOperations 的更多信息](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/cancelAllOperations)

我认为您可能希望使用 GCD async 来删除当前正在执行的块。

# jquery - JQuery footable 排序错误（？）

> ID：14703642
> 
> 赞同：0
> 
> 时间：2013-02-05T09:05:53.613
> 
> 标签：jquery

[编辑] 这实际上是[这里列出的错误](https://github.com/bradvin/FooTable/issues/22)

我正在为响应式和可排序表使用 footable 插件。但是排序功能无法正常工作。

[我在这里](http://www.vitto.mt.it/app/table.php)放了一张测试台。当您加载表格并单击类别标题以按其对数据进行排序时，您可以看到表格未排序。但是，如果您按标题排序，然后按类别排序，它确实有效。

# android - 什么是设备产品是 android 中的“grouper”？

> ID：14703645
> 
> 赞同：1
> 
> 时间：2013-02-05T09:06:05.697
> 
> 标签：android

我正在尝试刷新具有 4.1.1 rom 的 nexus 7 操作系统并尝试升级到 4.2.1。我在刷安卓操作系统时遇到问题。如何解决以下问题？

**设备产品是“石斑鱼”。更新需要'罗非鱼'。**

您的帮助将不胜感激...

比你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T19:34:49.827

grouper 是 nexus 7 (wi-fi) 见这里：[https ://developers.google.com/android/nexus/drivers](https://developers.google.com/android/nexus/drivers)

# javascript - jQuery - 如何使用“on()”方法而不是“live()”？

> ID：14703646
> 
> 赞同：26
> 
> 时间：2013-02-05T09:06:09.113
> 
> 标签：javascript, deprecated, jquery, jquery-on

我用于`live()`生成的页面和框架。但在`jQuery 1.9`此功能已弃用且不起作用。

我使用`on()`而不是，`live()`但这种方法只适用于一次，并且不适用于帧。

我的代码如下所示：

```
 $("#element").live('click',function(){
    $("#my").html(result);
   }); 
```

解决办法是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-05T09:07:28.150

```
$('body').on('click', '#element', function(){
    $("#my").html(result);
}); 
```

单击的元素选择器现在通过`.on()`函数参数传递，并且之前的选择器应该替换为最近的父选择器，最好是带有 ID。如果您不知道要使用哪个父选择器，`body`也可以使用，但效率较低。

请参阅[jQuery 1.9 .live() 不是](https://stackoverflow.com/q/14354040/584192)关于如何迁移现有代码的函数。

# r - 几个数据帧的回归

> ID：14703647
> 
> 赞同：0
> 
> 时间：2013-02-05T09:06:14.680
> 
> 标签：r

我根据三个月的时间段对一些数据框进行了子集化，并命名为 jfm（1 月至 3 月）、fma（2 月至 4 月）、mam（3 月至 5 月）……直到 ond（10 月至 12 月）。我希望使用几个变量作为回归量对所有这些数据进行类似的分析。下面我将展示如何使用其中一种污染物作为回归量对两个子集数据帧之一进行分析。我有兴趣对分别输入模型的所有污染物（pm10median、pm25median、o3median 和 so2median）进行分析。如何对所有数据框进行此分析？

```
library(gamair) 
library(mgcv)
data(chicago) 
chicago$date<-seq(from=as.Date("1987-01-01"), to=as.Date("2000-12-31"),length=5114)

chicago$month<-as.numeric(format(chicago$date,"%m")) ## create month
jfm <- subset(chicago, month %in% c(1:3) )      ## subset data for January to March
fma <- subset(chicago, month %in% c(2:4) )  ## February to April
mam <- subset(chicago, month %in% c(3:5) )  ## March to may

jfm$trend<-seq(dim(jfm)[1])   ## cretae a trend for specific df based on dimension of the df
fma$trend<-seq(dim(fma)[1])   ## trend for df fma

## Regress each pollutant separately on death for the first subset

model1<-gam(death ~  pm10median + s(trend,k=21)+ s(tmpd,k=6) ,family=quasipoisson,na.action=na.omit,data=jfm) 

model2<-gam(death ~  pm10median + s(trend,k=21)+ s(tmpd,k=6) ,family=quasipoisson,na.action=na.omit,data=fma) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:36:27.973

```
# create a function that defines the exact regression
# you want to run on all three-month data sets
fun <- 
    function( y , x ){

        # store each of the regression outputs into an object
        a <- gam(
            death ~  pm10median + s(trend,k=21)+ s(tmpd,k=6) ,
            family = quasipoisson , 
            na.action = na.omit ,
            data = x[ x$month %in% y , ]
        ) 
        b <- gam(
            death ~  pm25median + s(trend,k=21)+ s(tmpd,k=6) ,
            family = quasipoisson , 
            na.action = na.omit ,
            data = x[ x$month %in% y , ]
        ) 

        # return each of the regressions as a list
        list( a , b )
    }

# define which three-month groups you want to run it on
months <- cbind( 1:10 , 2:11 , 3:12 )

# now just run the function for each row in `months`
results <- apply( months , 1 , fun , x = chicago )

# look at the whole thing
results

# extract jfm, for example
jfm <- results[[1]]

# extract fma (and print it to the screen as well)
( fma <- results[[2]] ) 
```

# ruby-on-rails - has_many 与组的关系

> ID：14703648
> 
> 赞同：0
> 
> 时间：2013-02-05T09:06:15.867
> 
> 标签：ruby-on-rails

我[在rails 3问题中](https://stackoverflow.com/a/5861534/471313)`Message`有一个模型`user_id`和`sender_id`属性跟随模型用户消息

我尝试根据“sender_id”查询用户对话

我做了这个

```
 has_many :conversations, :class_name => 'Message', select: [:sender_id], group: [:sender_id] 
```

但它只返回消息 ID。

```
Message Load (0.8ms)  SELECT sender_id FROM "messages" WHERE "messages"."user_id" = 1 GROUP BY sender_id
=> [#<Message sender_id: 500>] 
```

之所以`select`使用，是因为 Postgres 似乎需要显式选择要分组的属性，但是如果我显式添加它们，我也应该将它们添加到我不想要的 group 子句中。

知道如何在按属性`has_many`分组的关联中检索消息吗？`sender_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:20:18.923

您应该将`foreign_key`属性设置为列名称`sender_id`：

```
has_many :conversations, :class_name => 'Message', :foreign_key => 'sender_id' 
```

编辑：似乎您正在尝试`OR`where 语句中的两列，在这种情况下关联不合适。

相反，在您的用户上放置一个方法，该方法将返回他们的`conversations`

```
class User < ActiveRecord::Base

  ...

  def conversations
    Message.where("user_id = ? OR sender_id = ?", id, id)
  end

  ...

end 
```

当然你也可以为用户设置发送和接收消息的关联。

# javascript - 在javascript中获取样式

> ID：14703652
> 
> 赞同：0
> 
> 时间：2013-02-05T09:06:28.360
> 
> 标签：javascript, html, css

`div`当 div 的大小为 50% 到 100% 时，我正在尝试调整 a的大小。但是当我尝试使用它`console.log`的当前大小时，`div`它只会记录空格......有什么问题？

```
window.onload = function() {
    //declare vars
    var fullbox = document.getElementById('box'),
        minBut = document.getElementById('down');

    minBut.onclick = function() {
        if(fullbox.style.width == "50%") {
            fullbox.style.width = "100%";
        } else {
            fullbox.style.width = "50%";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:12:04.013

当之前没有为该元素初始化宽度时，可能就是这种情况。第二次应该是50%。

通过添加测试`alert(fullbox.style.width);`

[小提琴](http://jsfiddle.net/2BbqT/)

# html - 使用流体布局时，一个 div 元素将不适合另一个元素

> ID：14703657
> 
> 赞同：1
> 
> 时间：2013-02-05T09:06:52.260
> 
> 标签：html, css

我一直在尝试创建网页布局，但遇到了这个问题。

```
<div id="pageWrapper">
  <div id="pageHeader">
  </div><!-- end of pageHeader -->

  <div id="navTab">
    <div class="navButtons"></div>
  </div><!-- end of navTab -->
</div><!-- end of wrapper --> 
```

我的CSS看起来像

```
#pageWrapper {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
}

#pageHeader {
  width:100%;
  height:7%;
  color:#DADADA;
  float:left; 
}

#navTab {
  width:100%;
  height:6%;
  background-color:#000000;
  float:left;
}

.navButtons{
  width:100px;
  height:90%;
  margin:5%;
  background-color:#ffffff;
  float:left;
}

.clearFloat {
  clear: both;
  margin: 0;
  padding: 0;
} 
```

我正在尝试创建一个流畅的布局并尝试在宽度`.navButtons`内添加 div`#navTab`一个边距顶部和底部 5% ......但是当我在 CSS 中提供参数时，它不适合 div ......我在这里做错了什么？ ??

我添加了一个 jsbin 链接[http://jsbin.com/ezeqec/1/edit](http://jsbin.com/ezeqec/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:58:29.473

嗯，尝试`margin: 5%`从中删除它`.navButtons`。如果你想要水平边距，让它`margin: 0 5%;`

否则，如果你也想要那个垂直边距，只需这样做：

```
<div id="navTab">
<div class="navButtons"></div>
<div class="clearFloat"></div> <!-- added this -->
</div><!-- end of navTab --> 
```

CSS 更改：

```
.navButtons {
    width:100px;
    height:90px; /* in pixels instead of % */
    margin:5%;
    background-color:#ffffff;
}

#navTab {
        width:100px;
    height:90%; /* this should be in pixels, if you want to give % for navButtons */
    margin:5%;
    background-color:#ffffff;
} 
```

如果你想给出`height`%，父元素的高度应该是固定的。父元素不能有`height`% 或`auto`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:16:26.850

如果你想`navTab`包含它的 child `navButtons`，它是浮动的，你需要添加一些 CSS 来强制元素展开。我发现最简单的是`overflow:auto`.

基本问题是浮动元素会使其脱离正常的文档流，因此它不会被考虑到高度/宽度计算中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:13:37.930

除 navTab 之外的所有地方都删除语句“float”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:18:42.663

将 .clearfix 分配给您的 pageWrapper，这应该可以防止您的包装器崩溃。

```
.clearfix:after {
clear:both;
content:".";
display:block;
font-size:0;
height:0;
visibility:hidden;
}
.clearfix { 
zoom:1; 
} 
```

[本文](http://css-tricks.com/all-about-floats/)的第一部分是对浮动元素的一个很好的复习，但在页面的后半部分附近有一些很好的技术可以在所有子元素都浮动时防止元素折叠。

# c++ - 删除 C++ 向量中的字段

> ID：14703658
> 
> 赞同：2
> 
> 时间：2013-02-05T09:06:54.673
> 
> 标签：c++, algorithm, vector, iteration, erase-remove-idiom

我无法正确掌握这个想法和编程这样的事情（我是初学者）：我有一个向量。向量可以说元素：fieldA、fieldB、fieldC。因此，有了这些向量的数组，我想检查，从数组中的最后一个向量开始，然后转到第一个向量的方向，如果其中一个元素具有特定值，可以说 if (vect[i].字段A == 0.0）。在这种情况下，如果 (vect[i-1].fieldA == 0.0) so 具有相同的值，我想从数组中删除整个向量。有人可以为我提供一部分可视化的代码，如何创建正确的“反向迭代”循环并使用函数删除它？我正在尝试使用erase()、remove()、deque()，但我失败了。

我不想在这里弄乱我的代码。

感谢帮助！

### 编辑。所以我首先用向量值在我的数组中输入一个循环，然后我想从最后删除所有包含元素特定值的向量，例如 fieldA == 0.0

我想剪切数组，而不仅仅是删除向量的内容！classB 和 classA 之间存在适当的继承，因此馈送效果很好，我只想通过删除向量来解决这个问题。示例：包含 2 个元素的向量数组。输入：0,1 0,3 3,3 2,3 0,6 5,6 0,8 0,7 0,6 输出：0,1 0,3 3,3 2,3 0,6 5,6 0 ,8。结论：0,7 和 0,6 向量被删除。

```
 classA tmp;
    for (std::vector<std::classB>::iterator iter = newW.begin(); iter != newW.end(); iter++)
        {
        tmp.set_fieldA(iter->a);
        tmp.set_fieldB(iter->b);
        tmp.set_fieldC(iter->c);
        objA.push_back(tmp);
        }

    vector<std::classA> objA;
        for(int i = objA.size()-1; i > 0; i--)
        {
        if (objA[i].fieldA == 0.0)
            if (objA[i-1].fieldA == 0.0)
                objA.erase(objA[i-1]); //remove last vector from array
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:31:33.477

我将您的代码解释如下。你有一个名为 Vector的**结构，它有 3 个成员**

```
struct Vector
{
    double fieldA;
    double fieldB;
    double fieldC;
} 
```

下面的代码工作如下。它`std::find_if_not`与**反向迭代器** ( `rbegin()`and `rend()`) 一起使用从后面查找与 from`fieldA`不同的第一个元素`0`。然后它将其转换为常规迭代器（使用`base()`）并将其与向量的末尾进行比较。最后调用`v.erase`实际上会擦除它们（所谓的**erase-remove idiom**）

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <iterator>

int main()
{

   struct Vector { int fieldA; int fieldB; };
   std::vector<Vector> v = { 
      Vector{ 1, 0 }, Vector{ 2, 1 }, Vector{ 0, 2 }, Vector{ 1, 3 }, Vector{ 0, 4 }, 
      Vector{ 0, 5 }, Vector{ 5, 6 }, Vector{ 6, 7 }, Vector{ 0, 8 }, Vector{ 0, 9 }, Vector{ 0, 10} 
   };   

   for (auto& e: v) { std::cout << "{" << e.fieldA << "," << e.fieldB << "}, "; };
   std::cout << "\n";

   auto m = std::find_if_not(v.rbegin(), v.rend(), [&](Vector const& elem){
       return elem.fieldA == 0;
   }).base();

   if (m != v.end())
      // remove all but one matching element
      v.erase(m + 1, v.end());

   for (auto& e: v) { std::cout << "{" << e.fieldA << "," << e.fieldB << "}, "; };
   std::cout << "\n";   
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/M8iTg%2414)上的输出

# asp.net - 嵌套 Gridview 中的额外行

> ID：14703659
> 
> 赞同：0
> 
> 时间：2013-02-05T09:06:55.390
> 
> 标签：asp.net

我有带有 itemtemplate 列的 gridview，它在渲染的 html 中生成额外的 tr 我设置了 CellPadding="0" CellSpacing="0" 和 AutoGenerateColumns="false"，但没有帮助..

这是我的网格视图：

```
<asp:GridView ID="GridView1" GridLines="None" runat="server"
CellPadding="0" CellSpacing="0" ShowFooter="true"
AutoGenerateColumns="false" AllowPaging="true" OnPageIndexChanging="Grid_PageIndexChanging">
<Columns>

    <asp:TemplateField>
        <HeaderTemplate>
            <table cellpadding="0" cellspacing="0" border="0" width="100%"
                class="table_sabcho">
        </HeaderTemplate>
        <ItemTemplate>

            <tr id="sds">
                <td><a href="show_item.aspx?id=<%# DataBinder.Eval (Container.DataItem, "id") %>">
                    <%# DataBinder.Eval(Container.DataItem, "number")%></a>
                </td>
                <td><%# DataBinder.Eval(Container.DataItem, "date","{0 :dd/MM/yyyy}")%>
                </td>

                <td><%# DataBinder.Eval(Container.DataItem, "Category")%></td>

                <td><%# DataBinder.Eval(Container.DataItem, "type_name")%>
                </td>
                <td style="padding-left: 0;"><%# getDoc((DataBinder.Eval(Container.DataItem, "id")).ToString())%>
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate></table> </FooterTemplate>
    </asp:TemplateField>

</Columns> 
```

这是我数据绑定网格的方式：

```
protected void GetLastNewsGrid()
{

    String query = "Select  * from  sample_view order by id desc";
    DataSet lawdataset = SqlHelper.ExecuteDataset(connString, CommandType.Text, query);

    GridView1.DataSource = lawdataset;
    GridView1.DataBind();
} 
```

这是呈现的 html ：

```
<tr id="it is empty.." >
  <td></td>
</tr>
<tr id="sds" >
  <td><a href="show_item.aspx?id=518"> 4965/2/12 </a></td>
  <td>24.12.2012 </td>
  <td></td>
  <td>dep </td>
  <td style="padding-left: 0;"><a class="pdf_box" href="common/get_doc.aspx?docID=6900" ></a></td>
</tr> 
```

# python - 如何在 Python 中使用 lxml dtd.validate 函数获取 xml 文件的错误位置？

> ID：14703662
> 
> 赞同：1
> 
> 时间：2013-02-05T09:07:10.710
> 
> 标签：python, validation, lxml, dtd

我想检查与 sample.dtd 关联的 xml 文件 sample.xml 的验证。但我无法得到错误位置。我只能收到错误消息。我怎样才能做到这一点？

```
import lxml.etree as ET
import codecs

f = codecs.open('sample.dtd')
dtd = ET.DTD(f)
root = ET.parse('newace_JK.xml')
print(dtd.validate(root))
print(dtd.error_log.filter_from_errors()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:45:28.783

尝试使用单个日志条目而不是打印整个结果，例如

```
for error in dtd.error_log.filter_from_errors():
    print(error.message)
    print(error.line)
    print(error.column) 
```

见[http://lxml.de/api/lxml.etree._LogEntry-class.html](http://lxml.de/api/lxml.etree._LogEntry-class.html)

# wpf - 仅在当前区域显示模态对话框 Grid.Colum/Grid.Row

> ID：14703667
> 
> 赞同：0
> 
> 时间：2013-02-05T09:07:22.577
> 
> 标签：wpf, modal-dialog

我正在从本教程中学习模态对话框：http: [//www.codeproject.com/Articles/36516/WPF-Modal-Dialog](http://www.codeproject.com/Articles/36516/WPF-Modal-Dialog)，但是，是否有可能显示模态对话框仅在区域`Grid.Column`/`Grid.Rows`仅阻塞，除此之外，另一个`Grid.Column`/`Grid.Rows`仍然可以访问？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:17:38.190

您当前可能正在使用模态对话框覆盖整个网格：

```
<Grid>
    <Grid x:Name="ModalDialogParent">
        ...
    </Grid>

    <controls:ModalDialog x:Name="ModalDialog" />
</Grid> 
```

相反，它*应该*可以将模态对话框修复到父网格的特定部分，方法是将其*放在*网格内并指定其位置：

```
<Grid x:Name="ModalDialogParent">
    ...

    <controls:ModalDialog x:Name="ModalDialog"
                          Grid.Row="1" Grid.Column="1"
                          Grid.RowSpan="2" Grid.ColumnSpan="2" />
</Grid> 
```

* * *

¹我不熟悉您链接到的模态对话框代码，我现在只是快速浏览了一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:38:50.860

[模态对话框](http://en.wikipedia.org/wiki/Modal_window)的定义是（强调我的）：

> 在用户界面设计中，模态窗口是一个子窗口，**需要用户与其交互才能返回到对父应用程序的操作**，从而阻止了应用程序主窗口上的工作流。模态窗口通常被称为重窗口或模态对话框，因为窗口通常用于显示对话框。

因此，如果您想要一个模态对话框，您的问题的答案是否定的。如果您只想阻止 Grid 的某个部分，只需将 Dialog 作为 UserControl 加载到您要阻止使用的部分上。然后，您仍然可以访问应用程序的其余部分。

# java - 什么是超大开关的替代品？

> ID：14703671
> 
> 赞同：0
> 
> 时间：2013-02-05T09:07:43.653
> 
> 标签：java, android, performance

我正在我的应用程序中集成伪搜索功能。我有一个搜索小部件，它给出了搜索提示列表（这些提示来自 fts3 sqlite 表）。当用户点击搜索提示时，相应的 sqlite 表将填充 listView。

我需要一种方法来确定将根据所选搜索提示填充列表的表。我正在考虑做这样的事情：

```
switch(search_hint){
    case(search_hint_1):  useTable(table_1);
                          break;
    case(search_hint_2):  useTable(table_2);
                          break;
    case(search_hint_3):  useTable(table_1 + table_2); // Case when I need to use
                          break;                       // two tables for ListView
} 
```

我确信这是一个可能的解决方案，但是如果有几个（数百或数千）个案例怎么办？谁能建议一个更好的方法来面对这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:10:53.893

如果可以的话，将映射变成某种对的数组，然后你可以用 a`for-loop`和 an遍历它们`if`。类似于我在[重构重复保护语句](https://stackoverflow.com/questions/14681923/refactoring-repetitive-guard-statements/14682024#14682024)中的建议。您需要创建一个包含提示和表格的类。

要么，要么创建一个实际的地图。并使用 search_hint 作为键。

```
Map< /*insert hint type here*/,Table> mapTable; 
```

例如。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:12:36.137

我认为按照我的想法可行的方法..使用**HashMap键值**对..（仅限伪代码）

```
Map<Integer,String> mapTable = new HashMap<Integer,String>();
mapTable.put(search_hint_1,table_1);
.
.
. 
```

只需访问`useTable(mapTable.get(search_hint));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:21:04.370

`switch`statement 是面向对象设计中的一种反模式（参见[Object Thinking](https://rads.stackoverflow.com/amzn/click/com/0735619654)）。您应该改用继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:15:55.337

使用枚举器。喜欢 ：

```
private static enum DojoDecider {   

    search_hint_1(table_1),
    search_hint_2(table_2);     

    private Table var;      

    private DojoDecider(Table var) {
        this.var = var;
    }

    @SuppressWarnings("unused")
    public Table getVar() {
        return var;
    }           
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:16:43.967

```
final int[] hintArray = {search_hint_1, search_hint_2, search_hint_3};
final String[] tableArray = {table_1, table_2, table_3};

private Map<Integer,String> hintMap = new HashMap<Integer,String>();

// Populate the map, probably at onCreate() of your activity
for(int i=0; i<hintArray.length; i++) {
    hintMap.put(hintArray[i], tableArray[i]);
}

// When you want to get it
useTable(hintMap.get(search_hint)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:14:45.397

将信息放入搜索提示表中。您需要考虑一下您拥有的不同案例以及如何将它们分解为可配置的小块。

```
search_hint_1  table_1
search_hint_2          table_2
search_hint_3  table_1 table_2 
```

# java - H2 集群设置

> ID：14703674
> 
> 赞同：7
> 
> 时间：2013-02-05T09:07:52.900
> 
> 标签：java, transactions, cluster-computing, h2

由于 H2 支持集群，并且该过程非常类似于：

*   启动服务器
*   用于`java org.h2.tools.CreateCluster`在所需集群之间复制数据库

并且知道`CreateCluster`需要*一个*目标、*一个*源和一个集群端点*列表，我有以下问题：*

1.  当我说**为了启动由 3 个服务器（A、B 和 C）组成的集群时，我是否正确，我需要确切知道集群上的服务器数量，**因为每个服务器都需要有数据库服务器列表以用于`SET CLUSTER`声明`org.h2.tools.CreateCluster.process(String, String, String, String, String)`方法调用。

    *   启动服务器 A；
    *   启动服务器 B；
    *   启动服务器 C；
    *   在B机器`CreateCluster`上执行，A为源，B为目标，A,B,C为集群列表；
    *   在C机器`CreateCluster`上执行，B为源，C为目标，A,B,C为集群列表；
2.  假设我正在启动服务并**启动 A 和 B**，应用程序开始**在集群上执行一些 SQL**。C 没找到，**C 会被当作 down 处理**吗？

3.  继续在第二个问题上启动的启动过程，我**启动了 C**，我准备执行`CreateCluster`以 B 作为源，A、B、C 作为集群节点列表，此时发生了两件事：

    *   B 将被锁定在独占模式 ( `SET EXCLUSIVE 2`) 由于`CreateCluster`
    *   SQL`SET CLUSTER 'A,B,C'`将在 B 和 C 上执行

**B被锁定时执行**的SQL，是在A中执行的吗？如果是这样，他们已经**承诺了吗？**而当**B 被释放时，客户端还会等待吗？之后会通知C这个命令吗？**

# c# - 是否可以为 Windows 8 开发一个也适用于 Windows 7 和 Vista 的 .Net 应用程序

> ID：14703676
> 
> 赞同：1
> 
> 时间：2013-02-05T09:07:52.803
> 
> 标签：c#, windows-7, windows-8, compatibility

我想开发一个适用于 Windows 7 及更低版本并支持 Windows 8 的应用程序我在询问“清单的兼容性部分”是否可以解决问题，我需要建议谢谢；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:24:42.413

如果它是一个 Windows 应用程序（桌面），它会......但如果是 Windows 商店应用程序，你只有 Windows 8 来运行它。

# xcode - 不同的视图取决于 iOS 上的方向

> ID：14703677
> 
> 赞同：0
> 
> 时间：2013-02-05T09:07:56.393
> 
> 标签：xcode, cocoa-touch, ios5

我知道之前有人问过这个问题，但是如何根据我在 iOS 5 中的界面方向支持不同的视图？

Apple 的一个示例显示了 PortraitViewController 和 LandscapeViewController。PortraitViewController 创建 LandscapeViewController 并为旋转通知注册自己。当它收到旋转通知时，它会根据当前界面方向推送或弹出 LandscapeViewController。

到现在为止还挺好。

但是我怎样才能保持两个控制器同步的数据呢？（它们显然显示相同的数据，因为它们在技术上对用户来说是相同的控制器，只是在横向和纵向视图中具有不同的视图）。两者都有一个“重新加载数据按钮”，可以重新加载他们的数据。当 LandscapeViewController 重新加载时，如何告诉 PortraitViewController 显示相同的数据，反之亦然？

另一个问题是内存警告。当界面处于横向模式并且我收到内存警告我的 PortraitViewController 被卸载时。现在，如果我为 LandscapeViewController 重新加载数据，PortraitViewController 就不能做同样的事情，因为它被卸载并且它的 Outlets 仍然设置为 nil。

我该如何解决所有这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:01:01.603

你实际上首先必须制作新的xib ...

转到文件-新建-文件选择用户界面选择视图等以制作新的XIB

现在选择新视图转到右侧面板中的身份检查器添加类名以将 xib 连接到旧的 .h 和 .m 文件

重要的一步……

将新的 xib 视图与文件的所有者连接

现在新的 xib 与 oldviewcontroller .h 和 .m 连接

最后一步

在 appdelegate 中使用 if 语句根据 IOS 更改 nibname

为此你可以使用这个.. [[UIDevice currentDevice] systemVersion]

在 if 语句中，您必须使用新视图更改 initwithname ..

self.viewController = [[[ViewController alloc] initWithNibName:@"View" bundle:nil] 自动释放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:01:50.963

所以我最终做的是使用一个 ViewController 和 2 个视图，根据界面方向显示不同的视图。这样做的缺点是我必须将所有插座连接两次并对其进行两次操作。

但是通过这种方式，我可以轻松地共享我的数据并避免一个视图被卸载而另一个视图不被卸载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:18:01.677

你应该有一个新的类来存储你的数据。两个 viewController 都会引用这个 dataController（或者你想要的任何名称）。您还可以在 viewControllers 的 viewWillAppear 和 viewWillDisappear 上添加一些逻辑。最后，对于内存警告问题，您可以检查 viewWillAppear 是否已加载视图并采取相应措施。

# jdbc - 拖放 MBO [Sybase] 时出现 ClassNotFoundException

> ID：14703681
> 
> 赞同：0
> 
> 时间：2013-02-05T09:08:03.043
> 
> 标签：jdbc, sybase

我已成功 ping 并设法连接到 Microsoft SQL 服务器，但是当我尝试将 MBO 拖放到图表中时，它给出了如下错误。

![错误弹出](../Images/1bce080fdbdfaacfccaa4f9a199f96c0.png)

我已经下载**了 sqljdbc4.jar**和**sqljdbc.jar**并将它们放在下面列出的文件夹中（在服务器端和我的本地副本），如其他线程/论坛中所建议的那样。

我还重新启动了 Sybase Unwired Platform Services 并重新启动了服务器，但无济于事。任何解决此错误的帮助将不胜感激。

> C:\sybase\UnwiredPlatform\Unwired_WorkSpace\Eclipse\sybase_workspace\mobile\eclipse\plugins\com.sybase.uep.com.sqlserver_2.1.0.201109131337\lib C:\sybase\UnwiredPlatform\Servers\UnwiredServer\lib\3rdparty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:03:37.863

我设法通过将 sqljdbc4.jar 放在此文件夹中来解决它。

> C:\Sybase\UnwiredPlatform\MobileSDK213\Unwired_WorkSpace\Eclipse\sybase_workspace\mobile\eclipse\plugins\com.sybase.uep.com.sqlserver_2.1.3.201207271225\lib\

# python - 用python制作解密程序

> ID：14703684
> 
> 赞同：1
> 
> 时间：2013-02-05T09:08:07.500
> 
> 标签：python, encryption

所以不久前我就加密程序寻求一些帮助，
你们太棒了，想出了解决方案。
所以我再次来找你寻求等效解密程序的帮助。到目前为止我得到的代码是这样的：

```
whinger = 0
bewds = raw_input ('Please enter the encrypted message: ')
bewds = bewds.replace(' ', ', ')
warble = [bewds]
print warble
wetler = len(warble)
warble.reverse();
while whinger < wetler:
    print chr(warble[whinger]),
    whinger += 1 
```

但是当我输入
`101 103 97 115 115 101 109`
时，会出现输入不是整数的错误。
我需要的是当我输入数字时，它会将它们变成一个整数列表。
但我不想单独输入所有数字。

提前感谢您的帮助：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:19:55.903

要将输入字符串转换为整数列表：

```
numbers = [int(s) for s in "101 103 97 115 115 101 109".split()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:44:32.013

这几乎是我能想到的最简单的方法：

```
s = '101 103 97 115 115 101 109'
numbers = []
for number_str in s.replace(',', ' ').split():
    numbers.append(int(number_str)) 
```

它将允许用逗号和/或一个或多个空格字符分隔数字。如果您只想允许空格，请留下“ `.replace(',', ' ')`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:25:44.757

你也可以使用`map`

```
numbers = map(int, '101 103 97 115 115 101 109'.split()) 
```

这在 Python 2 中返回一个列表，但`map`在 Python 3 中返回一个对象，您可能希望将其转换为列表。

```
numbers = list(map(int, '101 103 97 115 115 101 109'.split())) 
```

[这与JF Sebastian 的回答](https://stackoverflow.com/a/14703895/1907098)完全相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:21:37.600

你的问题是， raw_input 返回一个字符串给你。所以你有两个选择。

1、使用正则表达式库re。例如：

```
import re
bewds = raw_input ('Please enter the encrypted message: ')
some_list = []
for find in re.finditer("\d+", bewds):
    some_list.append(find.group(0)) 
```

2，或者您可以使用该问题投票最多的答案中描述的拆分方法：[Python中的sscanf](https://stackoverflow.com/questions/2175080/sscanf-in-python)

# java - Web 应用程序和简单应用程序之间的通信

> ID：14703693
> 
> 赞同：1
> 
> 时间：2013-02-05T09:08:42.183
> 
> 标签：java

我有 2 个不同的 Web 应用程序正在运行。

“Web 应用程序 A”具有所有业务逻辑层服务。
我需要从“Web 应用程序 B”调用“Web 应用程序 A”中定义的方法。

如何在不发送
http 请求的情况下使用“Web 应用程序 B”中的服务（或方法）？

到目前为止，我发现您可以按照此问题中的描述调用 java 程序。
[从我们的 Java 程序执行一个 Java 程序](https://stackoverflow.com/questions/502494/execute-a-java-program-from-our-java-program)

我想知道哪个是正确的方法。通过发送http请求或直接调用某个方法来调用方法。
你能告诉我哪个更好，为什么？

**编辑**
我可以使用 Springframework 的远程调用吗？
[http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html](http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html)
哪个更可取。Spring远程处理还是EJB？
我们正在使用Tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:15:24.473

远程 EJB 调用是在 Java EE 世界中的两个应用程序之间进行调用的标准方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:22:42.913

我认为[RESTful](http://docs.oracle.com/javaee/6/tutorial/doc/gijqy.html) Web 服务是这样做的正确方法。您只需将一些类和方法公开为服务，而其他一些应用程序可能会随时调用它们。请参阅Oracle 的[这个](http://docs.oracle.com/javaee/6/tutorial/doc/gijvh.html)非常基本的教程。

# hibernate - 使用 Hibernate 保存时如何使用 DB 端默认值？

> ID：14703697
> 
> 赞同：51
> 
> 时间：2013-02-05T09:08:52.070
> 
> 标签：hibernate, jpa, default, sysdate

我在 DB 中有一个默认值为`sysdate`. 我正在寻找一种方法来插入默认值，而我没有向应用程序端的相应属性提供任何东西。顺便说一句，我正在使用基于注释的配置。

有什么建议吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-05T09:12:43.943

日期列在插入时得到一个值的原因`null`，即使它被定义为`default SYSDATE`dbms 端，也是`default`一个列的值仅在查询中没有给该列赋值的情况下使用。这意味着它不能出现在`INSERT INTO`句子中，即使它已经给出`null`。

如果你想`default SYSDATE`在 DBMS 端使用，你应该配置`@Column`with[`insertable=false`](http://docs.oracle.com/javaee/6/api/javax/persistence/Column.html#insertable())以便从你的 SQL 中获取列`INSERT`。

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "myDate", insertable=false)
private Date myDate; 
```

请注意，在创建实体时，此方法将始终忽略您在应用中提供给属性的值。如果您确实希望有时能够提供日期，也许您应该考虑使用数据库触发器来设置值而不是默认值。

除了使用`default SYSDATE`DBMS 的定义之外，还有另一种方法。您可以使用[`@PrePersist`](http://docs.oracle.com/javaee/5/api/javax/persistence/PrePersist.html)和[`@PreUpdate`](http://docs.oracle.com/javaee/5/api/javax/persistence/PreUpdate.html)注释在保存/更新之前将当前日期分配给属性，当且仅当它尚未分配时：

```
@PrePersist
protected void onCreate() {
    if (myDate == null) { myDate = new Date(); }
} 
```

这个密切相关的问题提供了不同的方法：[Creation timestamp and last update timestamp with Hibernate and MySQL](https://stackoverflow.com/q/221611/851811)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-04-19T11:14:23.330

如果您使用的是 Hibernate，那么您可以只使用`@CreationTimestamp`插入默认日期。

```
@CreationTimestamp
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "create_date")
private Date createDate; 
```

并`@UpdateTimestamp`在必要时更新值

```
@UpdateTimestamp
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "modify_date")
private Date modifyDate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T09:21:25.410

或者您可以直接初始化 POJO 的属性，例如：

```
//java code property declaration

private String surname = "default"; 
```

# c# - 调用（委托）

> ID：14703698
> 
> 赞同：98
> 
> 时间：2013-02-05T09:09:02.007
> 
> 标签：c#, winforms, delegates, invoke

谁能解释一下这个[链接上写的这个声明](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)

```
Invoke(Delegate): 
```

**在拥有控件的基础窗口句柄**的线程上执行指定的委托。

 **任何人都可以解释这意味着什么（尤其是粗体）我无法清楚地理解它

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-02-05T09:15:23.077

这个问题的答案在于 C# 控件是如何工作的

> Windows 窗体中的控件绑定到特定线程并且不是线程安全的。因此，如果您从不同的线程调用控件的方法，则必须使用控件的调用方法之一将调用编组到正确的线程。此属性可用于确定是否必须调用调用方法，如果您不知道哪个线程拥有控件，这可能很有用。

来自[Control.InvokeRequired](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired%28v=vs.90%29.aspx)

实际上，Invoke 所做的是确保您正在调用的代码发生在控件“存在”的线程上，从而有效地防止了跨线程异常。

从历史的角度来看，在 .Net 1.1 中，这实际上是允许的。这意味着您可以尝试从任何后台线程在“GUI”线程上执行代码，这主要是可行的。有时它只会导致您的应用程序退出，因为您在执行其他操作时有效地中断了 GUI 线程。这是*跨线程异常*- 想象在 GUI 绘制其他内容时尝试更新 TextBox。

*   哪个动作优先？
*   甚至有可能两者同时发生吗？
*   GUI 需要运行的所有其他命令会发生什么变化？

实际上，您正在打断队列，这可能会产生许多无法预料的后果。Invoke 实际上是将您想做的事情放入该队列的“礼貌”方式，并且该规则是从 .Net 2.0 开始通过抛出的[InvalidOperationException](http://msdn.microsoft.com/en-gb/library/system.invalidoperationexception.aspx)强制执行的。

要了解幕后实际发生的事情以及“GUI 线程”的含义，了解什么是消息泵或消息循环是很有用的。

[这实际上已经在“什么是消息泵](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)”问题中得到了回答，建议阅读以了解您在与控件交互时绑定的实际机制。

您可能会觉得有用的其他阅读材料包括：

[开始调用是怎么回事](http://www.codeproject.com/Articles/10311/What-s-up-with-BeginInvoke)

> Windows GUI 编程的基本规则之一是只有创建控件的线程才能访问和/或修改其内容（少数记录在案的例外情况除外）。尝试从任何其他线程执行此操作，您将得到不可预知的行为，从死锁到异常再到半更新的 UI。然后从另一个线程更新控件的正确方法是将适当的消息发布到应用程序消息队列。当消息泵开始执行该消息时，控件将在创建它的同一线程上更新（请记住，消息泵在主线程上运行）。

并且，对于具有代表性示例的更多代码重概述：

[无效的跨线程操作](http://www.perceler.com/articles1.php?art=crossthreads1)

```
// the canonical form (C# consumer)

public delegate void ControlStringConsumer(Control control, string text);  // defines a delegate type

public void SetText(Control control, string text) {
    if (control.InvokeRequired) {
        control.Invoke(new ControlStringConsumer(SetText), new object[]{control, text});  // invoking itself
    } else {
        control.Text=text;      // the "functional part", executing only on the main thread
    }
} 
```

一旦您了解了 InvokeRequired，您可能希望考虑使用扩展方法来包装这些调用。这在 Stack Overflow 问题[Clean Up Code Littered with Invoke Required](https://stackoverflow.com/questions/3874134/cleaning-up-code-littered-with-invokerequired)中得到了很好的解决。

还有一篇[关于历史上发生的事情的进一步记录](http://ikriv.com/dev/dotnet/MysteriousHang.html)，可能会引起人们的兴趣。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-02-05T09:13:20.013

Windows 窗体中的控件或窗口对象只是由*句柄*（有时称为 HWND）标识的 Win32 窗口的包装。您对控件执行的大多数操作最终都会导致使用此句柄的 Win32 API 调用。句柄由创建它的线程（通常是主线程）拥有，不应由另一个线程操作。如果由于某种原因您需要对来自另一个线程的控件执行某些操作，您可以使用`Invoke`请求主线程代表您执行此操作。

例如，如果您想从工作线程更改标签的文本，您可以执行以下操作：

```
theLabel.Invoke(new Action(() => theLabel.Text = "hello world from worker thread!")); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-02-05T09:20:31.170

如果要修改控件，则必须在创建控件的线程中完成。此`Invoke`方法允许您在关联线程（拥有控件的底层窗口句柄的线程）中执行方法。

在下面的示例中，thread1 引发异常，因为 SetText1 正在尝试从另一个线程修改 textBox1.Text。但是在thread2中，SetText2中的Action是在创建TextBox的线程中执行的

```
private void btn_Click(object sender, EvenetArgs e)
{
    var thread1 = new Thread(SetText1);
    var thread2 = new Thread(SetText2);
    thread1.Start();
    thread2.Start();
}

private void SetText1() 
{
    textBox1.Text = "Test";
}

private void SetText2() 
{
    textBox1.Invoke(new Action(() => textBox1.Text = "Test"));
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-12T00:47:27.060

```
Invoke((MethodInvoker)delegate{ textBox1.Text = "Test"; }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T09:14:15.933

实际上，这意味着保证在主线程上调用委托。这很重要，因为对于 Windows 控件，如果您不在主线程上更新它们的属性，那么您要么看不到更改，要么控件引发异常。

模式是：

```
void OnEvent(object sender, EventArgs e)
{
   if (this.InvokeRequired)
   {
       this.Invoke(() => this.OnEvent(sender, e);
       return;
   }

   // do stuff (now you know you are on the main thread)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-10T05:49:35.043

`this.Invoke(delegate)`确保您`this.Invoke()`在主线程/创建的线程上调用委托参数。

我可以说 Thumb 规则不会访问您的表单控件，除非来自主线程。

以下几行可能对使用 Invoke() 有意义

```
 private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.textBox1.InvokeRequired)
        {   
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.textBox1.Text = text;
        }
    } 
```

尽管您创建了一个线程池线程（即工作线程），但在某些情况下它会在主线程上运行。它不会创建新线程，因为主线程可用于处理进一步的指令。所以首先调查当前正在运行的线程是否是主线程，使用`this.InvokeRequired`if 返回 true 当前代码正在工作线程上运行，所以调用 this.Invoke(d, new object[] { text });

否则直接更新UI控件（这里保证你在主线程上运行代码。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T09:13:45.507

这意味着委托将在 UI 线程上运行，即使您从后台工作线程或线程池线程调用该方法也是如此。UI 元素具有*线程亲和性*——它们只喜欢直接与一个线程对话：UI 线程。UI 线程被*定义为*创建控件实例的线程，因此与窗口句柄相关联。但所有这些都是一个实现细节。

关键点是：您将从工作线程调用此方法，以便您可以访问 UI（更改标签中的值等） - 因为您***不允许***从 UI 线程以外的任何其他线程执行此操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T09:13:32.903

代表本质上是内联`Action`的或`Func<T>`。您可以在您正在运行的方法范围之外或使用`lambda`表达式（`=>`）声明委托；因为您在一个方法中运行委托，所以您在为当前窗口/应用程序运行的线程上运行它，该线程是粗体。

**拉姆达示例**

```
int AddFiveToNumber(int number)
{
  var d = (int i => i + 5);
  d.Invoke(number);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T09:14:29.250

这意味着您传递的委托在创建 Control 对象的线程（即 UI 线程）上执行。

当您的应用程序是多线程的并且您想从 UI 线程以外的线程执行一些 UI 操作时，您需要调用此方法，因为如果您只是尝试从不同的线程调用 Control 上的方法，您将得到一个System.InvalidOperationException。**

# jquery - 将 var 放入 jquery :gt()

> ID：14703703
> 
> 赞同：9
> 
> 时间：2013-02-05T09:09:22.337
> 
> 标签：jquery, variables

我有一个列表集`display:none`和一些代码来显示第 3 项：

HTML：

```
<ul>
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
</ul> 
```

jQuery：

```
var item = '1';

$("li:gt(1):lt(1)").show(); 
```

是否可以在 gt 选择中获取 var ？我能想到的是这个

```
$("li:gt('+item+'):lt(1)").show(); 
```

不工作。这可以做到吗？如果不是，我还能尝试什么？

示例：http: [//jsfiddle.net/BSakQ/5/](http://jsfiddle.net/BSakQ/5/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T09:10:09.320

您需要用正确的引号分隔字符串。试试这个：

```
$("li:gt(" + item + "):lt(1)").show(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T09:11:19.913

您必须使用双引号进行连接，因为您使用双引号作为选择器。

试试这个 jquery 代码：

```
$("li:gt("+item+"):lt(1)").show(); 
```

# c - 具有阻塞读取和非阻塞写入的循环/环形缓冲区？

> ID：14703707
> 
> 赞同：0
> 
> 时间：2013-02-05T09:09:44.340
> 
> 标签：c, blocking, nonblocking, circular-buffer

我正在用户空间中搜索 C 中的环形缓冲区实现，因此我可以在我的库中使用它。

因为我需要一个环形缓冲区

*   非阻塞写入（=覆盖最旧的数据）
*   如果为空，则阻止读取

我搜索了一段时间并记得我曾在内核模式下使用`wait_event_interruptible`&`wake_up_interruptible`来做类似的事情。

但是在用户空间中使用了什么，所以我也许可以结合该方法搜索环形缓冲区？我不想重新发明轮子——周围有很多环形缓冲解决方案。

提前致谢并致以诚挚的问候！

编辑：

似乎可能`pthread_cond_wait`相当于`wait_event_interruptible`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T19:44:07.537

用一些代码添加另一个答案，这与我的另一个答案中的伪代码不是 1:1 匹配。将此标记为 wiki 答案，以防有人想要添加评论或进行其他改进。C phtread mutex+条件变量实现非常简单的ringbuffer：

```
#include <stdio.h>
#include <pthread.h>

#define RINGBUFFER_SIZE (5)
int ringbuffer[RINGBUFFER_SIZE];
unsigned reader_unread = 0;
unsigned writer_next = 0;
pthread_mutex_t ringbuffer_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t ringbuffer_written_cond = PTHREAD_COND_INITIALIZER;

void process_code(int ch) {
    int counter;
    printf("Processing code %d", ch);
    for(counter=5; counter>0; --counter) {
        putchar('.');
        fflush(stdout);
        sleep(1);
    }
    printf("done.\n");

}

void *reader() {
    pthread_mutex_lock(&ringbuffer_mutex);
    for(;;) {
        if (reader_unread == 0) {
            pthread_cond_wait(&ringbuffer_written_cond, &ringbuffer_mutex);
        }
        if (reader_unread > 0) {

            int ch;
            int pos = writer_next - reader_unread;
            if (pos < 0) pos += RINGBUFFER_SIZE;
            ch = ringbuffer[pos];
            --reader_unread;

            if (ch == EOF) break;

            pthread_mutex_unlock(&ringbuffer_mutex);
            process_code(ch);
            pthread_mutex_lock(&ringbuffer_mutex);
        }
    }
    pthread_mutex_unlock(&ringbuffer_mutex);

    puts("READER THREAD GOT EOF");
    return NULL;
}

void *writer() {
    int ch;
    do {
        int overflow = 0;
        ch = getchar();

        pthread_mutex_lock(&ringbuffer_mutex);

        ringbuffer[writer_next] = ch;

        ++writer_next;
        if (writer_next == RINGBUFFER_SIZE) writer_next = 0;

        if (reader_unread < RINGBUFFER_SIZE) ++reader_unread;
        else overflow = 1;

        pthread_cond_signal(&ringbuffer_written_cond);
        pthread_mutex_unlock(&ringbuffer_mutex);

        if (overflow) puts("WARNING: OVERFLOW!");

    } while(ch != EOF);

    puts("WRITER THREAD GOT EOF");
    return NULL;
}

int main(void)
{
    pthread_t reader_thread, writer_thread;

    puts("Starting threads. Type text and press enter, or type ctrl-d at empty line to quit.");
    pthread_create(&reader_thread, NULL, reader, NULL);
    pthread_create(&writer_thread, NULL, writer, NULL);

    pthread_join(writer_thread, NULL);
    pthread_join(reader_thread, NULL);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:42:12.643

对于 pthreads，标准方法是使用[互斥体](http://linux.die.net/man/3/pthread_mutex_lock)并使用条件变量[在一个线程中等待，](http://linux.die.net/man/3/pthread_cond_wait)直到[被另一个线程唤醒](http://linux.die.net/man/3/pthread_cond_signal)。

伪代码，其中 writer 将短暂阻塞，但不会在不确定的时间内阻塞，并且通过丢弃未读数据来处理缓冲区溢出：

作家写道：

```
acquire new data to write
lock mutex
get current writing position in buffer
compare to current reading position and check for overflow
    in case of overflow, update reading position (oldest data lost)
write new data to buffer
update writing position
do wakeup on condition variable
unlock mutex 
```

读者阅读：

```
lock mutex
loop:
    get current reading position in buffer
    compare to current writing position in buffer
    if there's new data, break loop
    wait (possibly with timeout) on condition variable
    goto loop:
copy data from buffer
update reading position
unlock mutex
process copied data 
```

显然，在上面，writer 可能会短暂地阻塞 mutex，但因为 reader 只会短暂地持有 mutex（这假设缓冲区中的数据相当短），这可能不是问题。

关于理解上述代码的重要细节：条件变量和互斥锁成对工作。等待条件变量将解锁互斥锁，一旦唤醒，只有在它可以重新锁定互斥锁后才会继续。因此，在作者解锁互斥锁之前，阅读器实际上不会继续。

当条件变量等待返回时再次检查缓冲区位置很重要，不要盲目地相信唤醒是由写入器完成的，它只是向它添加了更多数据。

# javascript - 在 Opera 中发出 iframe 的重定向父级

> ID：14703716
> 
> 赞同：2
> 
> 时间：2013-02-05T09:10:43.877
> 
> 标签：javascript, iframe, opera

尝试从 Opera 的 iframe 中重定向父级时遇到问题。

我正在加载带有颜色框的 iframe，[当](http://www.jacklmoore.com/colorbox)我单击 iframe 中的按钮时，我想重新加载更改其 URL 参数的父级。所以我做了这个，它适用于 Chrome/FF：

```
window.parent.location.search = $.param(newArgs); 
```

但在 Opera 上，它似乎用 iframe 的 URL 重新加载父级。我尝试了多种方法，`return false;`在点击处理程序的末尾添加，`window.top`也访问但没有成功。

唯一可行的方法是像这样完全重建 URL：

```
window.top.location = window.top.location.pathname + '?' + $.param(newArgs); 
```

我对位置和 iframe 做错了什么或误解了什么？

编辑： jsfiddle 中的[示例](http://fiddle.jshell.net/DxU8W)感谢 Bergi。在 Firefox 上，这将在 fiddle url 的末尾添加“？example=params”，`http://fiddle.jshell.net/DxU8W?example=params`但在 Opera 上，这将添加到 iframe url 中：`http://fiddle.jshell.net/DxU8W/show/?example=params`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:06:38.527

这确实是一个错误（您的报告现在在内部被跟踪为 CORE-49399 - 谢谢！）。ETA：我们不太可能在 Opera 14 中使用它，但我不能告诉你它什么时候发布。

# c# - Windows 窗体 - 如何从父窗体调用子窗体的事件

> ID：14703719
> 
> 赞同：0
> 
> 时间：2013-02-05T09:10:50.627
> 
> 标签：c#, winforms, visual-studio-2010, events

我有`MDI form`一个项目和一个表单`BaseForm`，它继承自`Form`和所有其他表单，包括`MDIparent`从 this 继承`BaseForm`。我的一些子表单可以编辑，所以我有`Save`按钮。`closing event`如果有打开的可编辑子表单，我还要求保存在父表单上。我这样做：

```
 protected void IsEditable()
        {
            foreach (BaseForm f in MdiChildren)
            { 
                if (f.isEditable == true)
                {
                    MessageBox.Show("To Do Save" + f.GetType().ToString());
                    f.Close();
                }
            }
        } 
```

问题是我已经实现了一次儿童事件的`save`逻辑。`Save button on click`我不想再次编写相同的代码，所以有什么方法可以从上面的代码中调用事件（保存保存逻辑）。检查表单是否可编辑在`BaseForm`表单中进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:23:36.110

您可以将代码中的代码重构`SaveButton_Click`为调用方法`SaveForm()`，使该方法公开，并且：

```
protected void IsEditable()
    {
        foreach (ChildForm f in MdiChildren)
        { 
            if (f.isEditable == true)
            {
                f.SaveForm();
                f.Close();
            }
        }
    } 
```

# android - 在 Windows 7 上为 iOS 生成配置证书

> ID：14703727
> 
> 赞同：1
> 
> 时间：2013-02-05T09:11:12.560
> 
> 标签：android, iphone, cordova

我已经创建了一个 phonegap 应用程序。现在，我想在 Windows 7 上构建 Phonegap iOS。

我在 Windows 7 上的 Eclipse 中用 Android 编写了代码。

我已经生成了 .APK、.XAP、.IPK。现在，我想创建 .IPA（iOS 应用程序）。

是否必须拥有 MAC OS 才能生成 Phonegap iOS 应用程序？

是否必须拥有苹果开发者帐户才能生成 Phonegap iOS 应用程序？

我可以在 Windows 7 上为 iOS 生成证书和配置文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:15:14.560

是的，必须拥有开发人员帐户，因为没有开发人员您无法生成配置文件。

我不知道证书，但您可以在 Windows 7 上生成配置文件，因为它不依赖于操作系统，它需要证书。

生成电话 iOS 应用程序不需要 MAC OS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:17:13.153

由于 PhoneGap Build 使用 Apple 的标准开发流程来构建应用程序，因此您需要注册他们的开发者计划才能在 PhoneGap Build 上构建 iOS 应用程序。您还需要一台 Mac 来配置您的证书和配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:19:05.180

必须拥有 mac 和开发人员帐户才能在 iphone 或 ipad 上安装软件。

您不需要 mac 来开发应用程序

# mysql - KILL QUERY 对 MyISAM 表上的 INSERT 和 LOAD DATA INFILE 语句的影响

> ID：14703733
> 
> 赞同：0
> 
> 时间：2013-02-05T09:11:24.430
> 
> 标签：mysql, myisam

我有一个运行相当繁重的 MySQL 查询的系统，我们想提供一种通过 JDBC 中断查询的方法。`Statement.cancel()`似乎是要走的路，它有效地在与数据库的单独连接上发送了一个 KILL QUERY。但是，由于我们正在处理 MyISAM 表，因此我们没有任何事务管理操作。

我很想知道 KILL QUERY 对 LOAD DATA INFILE 语句或 INSERT 的影响。

似乎 LOAD DATA INFILE 语句比您的平均 INSERT 风险更大，所以我想知道杀死该语句是否会使表处于损坏状态。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:34:53.413

*   查询将被杀死；
*   更改将被回滚。

没有使表损坏的风险。

# c# - Windows Workflow Foundation 每 X 分钟重复一次活动

> ID：14703736
> 
> 赞同：1
> 
> 时间：2013-02-05T09:11:28.567
> 
> 标签：c#, workflow, workflow-foundation-4, workflow-foundation

在满足特定条件之前，每 2 分钟重复一次代码活动的最佳方法是什么？

假设我有以下代码活动来检查数据库以查看一批报告是否已完成。

```
public sealed class CheckReportsAreComplete : CodeActivity
{        
    public InArgument<int> ReportBatchId{ get; set; }       
    public OutArgument<bool> HaveReportsCompleted{ get; set; }

    protected override void Execute(CodeActivityContext context)
    {             
        bool haveCompleted = ReportService.HaveReportsCompleted((context.GetValue(this.ReportBatchId));

        HaveReportsCompleted.Set(context, haveCompleted);                       
    }
} 
```

我需要此代码活动每 2 分钟运行一次，并在 OutArgument HaveReportsCompleted 设置为 true 时继续处理。我应该只在代码中使用 Timer.Sleep 还是这是不好的做法？

我假设我需要一段时间/一段时间与延迟和条件的组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:37:18.580

这是我想出的解决方案：

![在此处输入图像描述](../Images/644dbab29ab1c6b0f73d9ad80f91a40d.png)

# svn - 自动构建 Hudson/SVN

> ID：14703747
> 
> 赞同：0
> 
> 时间：2013-02-05T09:12:04.093
> 
> 标签：svn, build, hudson

有一个`Hudson version 2.2.1`基于颠覆的设置和运行构建。我现在想自动化构建过程，如果用户提交到 svn，构建会自动发生，如果构建失败，则发送电子邮件 ID。但它需要编辑`post commit`钩子。有没有其他方法可以在不使用的情况下实现相同的目标`svn hooks`？

-山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:19:43.547

如果没有 post commit 钩子，唯一可以通知 hudson 更改的方法是通过轮询 svn 服务器。

[Subversion 插件](http://wiki.hudson-ci.org/display/HUDSON/Subversion+Plugin)支持设置轮询时间表（cron 格式 - 例如：每分钟）。

# php - 我是否需要检查查询是否执行？

> ID：14703748
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:12:13.017
> 
> 标签：php, mysql, codeigniter

在模型中，当查询执行时，会有一个 if 条件来检查查询是否执行。IE，

```
$result = $this->db->query($dataQuery);
 if ($result == FALSE) {
       $status = 0;
       $message = $this->db->_error_message();
 } else {
       //remaining codes
 } 
```

实际上是否需要 if 代码？如果查询没有执行或没有响应，程序的流程就会中断。那么检查有什么用呢？

我的前辈遵循我在这里解释的风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:08:41.117

它高度依赖于查询的类型，如果它是一个`INSERT`查询并且在禁用时会产生错误`error_reporting`，那么用户可以看到一些漂亮的错误消息而不是看不到任何内容，并且可以将此信息写入日志文件稍后调试。如果它是一个`SELECT`语句，它还可以防止某些情况，包括不支持的数据错误，但是在没有找到行的情况下，**[强烈建议](http://ellislab.com/codeigniter/user-guide/database/results.html)**检查每个结果是否返回任何内容。

# php - PHP / 用对应的字符替换非拉丁字符

> ID：14703750
> 
> 赞同：2
> 
> 时间：2013-02-05T09:12:20.537
> 
> 标签：php, replace, str-replace

**单词**

```
AŠA 
```

**PHP**

```
<?php

foreach (glob("*.jpg") as $filename) {
    $search = array("Š");
    $replace = array("S");

    $newname = str_replace($search, $replace, $filename);
    echo $filename.'<br>'.$newname;

    //($filename, realpath(dirname(__FILE__)).'/'.$newname);
} 
```

**问题** 它不能替换单词“AŠA”中的字符“Š”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T09:15:27.490

看一下[iconv()](http://www.php.net/manual/en/function.iconv.php)，它允许您将字符串转换为指定的编码。

您的案例示例：

```
$str = 'AŠA';
$str = iconv('UTF-8', 'ASCII//TRANSLIT', $str); // ASA 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-22T14:46:37.060

前面的方法不适用于 ü 或 áéíóú 等拉丁字符，它返回 'a'e'i'o'u 而不是 aeiou。

怎么样`transliterator_transliterate`。适用于 PHP >= 5.4

```
$str = 'AŠAáéíóú';    
transliterator_transliterate('Any-Latin; Latin-ASCII;', $str); //ASAaeiou 
```

[参考 PHP NET：transliterator_transliterate](http://php.net/manual/en/transliterator.transliterate.php)

# java - 如何使 Quartz 调度程序异步（并行）执行作业？

> ID：14703752
> 
> 赞同：0
> 
> 时间：2013-02-05T09:12:36.290
> 
> 标签：java, parallel-processing, quartz-scheduler, crontrigger

我有 56 个作业安排为 cronTrigger，所有这些作业都在完全相同的时间进行。

我希望这些作业都开始一起执行，没有任何顺序。就像每个人都在自己的线程中执行一样。但是石英调度程序会一一执行它们。

我做了一些研究，发现这个 [Quartz Thread Execution Parallel or Sequential？](https://stackoverflow.com/questions/11361939/quartz-thread-execution-parallel-or-sequential)建议在quartz.properties 文件中设置以下属性：

```
org.quartz.scheduler.batchTriggerAcquisitionMaxCount = 60 
org.quartz.threadPool.threadCount = 60 
```

可悲的是，它对我不起作用。仍然当我的一项工作遇到异常时，它会继续尝试运行该工作，这很好，但其他工作永远不会执行，直到经过一些尝试后这个工作完全失败。

你知道如何让调度器表现出并行行为吗？

谢谢。

# delphi - 不使用 TwebBrowser 在 HTML 表单中发布值

> ID：14703756
> 
> 赞同：0
> 
> 时间：2013-02-05T09:12:53.530
> 
> 标签：delphi, delphi-xe2, indy10

> **可能重复：**
> [在按钮单击的表单中没有 TWebBrowser 输入值并获取下一个网页响应](https://stackoverflow.com/questions/14499991/without-twebbrowser-input-values-in-form-on-button-click-and-get-next-webpage-re)

我们正在使用 Delphi Xe2 和 Indy 10 组件。

我们需要在 HTML 页面中输入值并单击搜索按钮并在不使用 TWebBrowser 的情况下获取下一个结果网页。当我们在[URL](https://sun.sunexpress.com.tr/web/RezvEntry.xhtml?LANGUAGE=EN)上发布参数时，我无法获得结果网页。

在 Post 上，我们得到当前页面的 HTML 代码。我们如何获得结果网页作为响应？

我们正在使用的代码：

```
过程 TForm1.Button1Click(Sender: TObject);
变量
  流：TStringStream；
  数据：TIdMultiPartFormDataStream；
开始
  aStream := TStringStream.Create;
  数据：= TIdMultiPartFormDataStream.Create；
  尝试
    用 IdHTTP1 做
    开始
      data.AddFormField('DEP_PORT', '巴塞尔');
      data.AddFormField('ARR_PORT', '加济安泰普');
      Request.UserAgent := 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0';
      Request.AcceptLanguage := 'en-US,en;q=0.5';
      Request.Connection := 'keep-alive';
      Request.Accept := 'text/html';
      IOHandler := SSL;
      尝试
        Post('https://sun.sunexpress.com.tr/web/RezvEntry.xhtml?LANGUAGE=EN', data, aStream);
      除了
      E：例外
        showmessage('POST 过程中遇到错误：' + E.Message);
      结尾;
    结尾;
    Memo1.Lines.Add(aStream.DataString);

  除了
  结尾;
结尾;

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:20:02.917

您所指的网站还将 jsessionid 添加到 post-url。也许没有有效的 jsessionid 就不能发帖？

# emacs - Emacs 无法重置 Ctrl-d 键行为

> ID：14703760
> 
> 赞同：1
> 
> 时间：2013-02-05T09:13:12.237
> 
> 标签：emacs

我想改变`Ctrl`-`d`键的行为。所以它会向后删除一个单词。我创建了一个函数：

```
(defun backward-delete-word (arg)
      "Delete characters backward until encountering the beginning of a word.
With argument ARG, do this that many times."
      (interactive "p")
      (delete-region (point) (progn (backward-word arg) (point)))) 
```

然后将其插入`emacs.d`：

```
(global-set-key (kbd "\C-d") 'backward-delete-word) 
```

它在基本模式下工作，但在 php 模式下它只是删除下一个字符。当我点击

> Ctrl-h k Ctrl-d

Emacs 给出了这个：

```
C-d runs the command c-electric-delete-forward, which is an
interactive compiled Lisp function in `cc-cmds.el'.

It is bound to C-d.

(c-electric-delete-forward ARG) 
```

不知何故，它被重置为另一个功能。如何找出它的重置位置并使其与我的功能一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:44:05.020

我没有，`php-mode`所以我不能肯定地说，但绑定可能会被覆盖`php-mode-map`（作为主要模式映射，它的优先级高于全局映射）。

您可以通过使用`C-h b`来检查所有可用的键绑定，并在输出缓冲区中查找`C-d`或`c-electric-delete-forward`查看绑定是在哪个键映射中定义的。

假设`php-mode-map`覆盖`C-d`绑定，您可以使用禁用它

```
(define-key php-mode-map (kbd "C-d") nil) 
```

# c# - VS2010 中的 FxCop 行为、代码分析和 SuppressMessage

> ID：14703765
> 
> 赞同：4
> 
> 时间：2013-02-05T09:13:17.843
> 
> 标签：c#, visual-studio-2010, code-analysis, suppress-warnings, fxcopcmd

我有一堂像这样的课：

```
 [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Naming", "CA1709:IdentifiersShouldBeCasedCorrectly", MessageId = "Io")]
    public void ParaQueFalleCalidadCodigoUnoIo_ReglaCA1709()
    {

    }

    public void ParaQueFalleCalidadCodigoDosIo_ReglaCA1709()
    {

    } 
```

我使用自定义规则集文件**CustomRules.ruleset**

```
<RuleSet Name="RulesNet" ToolsVersion="10.0">
  <RuleHintPaths>
    <Path>C:\Fxcop10.0\Rules</Path>
  </RuleHintPaths>
  <Rules AnalyzerId="Microsoft.Analyzers.ManagedCodeAnalysis" RuleNamespace="Microsoft.Rules.Managed">

    <Rule Id="CA1709" Action="Warning" />

  </Rules>
</RuleSet> 
```

当我运行内置代码分析工具的 VS2010 时，我收到以下警告：

> CA1709：Microsoft.Naming：通过将成员名称“_Default.ParaQueFalleCalidadCodigoDosIo_ReglaCA1709()”中的“Io”的大小写更改为“IO”来更正它。

现在，我可以在*FxCopCmd.exe*中使用相同的规则集文件**CustomRules.ruleset**：

 *> FxCopCmd.exe /gac /d:"C:\CompanyFramework\4.0.0.0" /f:"D:\TFS\Tests\WebApplication1\bin\WebApplication1.dll" /o:"resultsFxCop.xml" /ruleset:"= CustomRules.ruleset" /v

我收到**2 个错误**（FixCategory Breaking 和 Level Error）

> CA1709 - 通过将成员名称“_Default.ParaQueFalleCalidadCodigoUnoIo_ReglaCA1709()”中的“Io”的大小写更改为“IO”来更正它。
> 
> CA1709 - 通过将成员名称“_Default.ParaQueFalleCalidadCodigoDosIo_ReglaCA1709()”中的“Io”的大小写更改为“IO”来更正它。

```
 <Message Id="Io" TypeName="IdentifiersShouldBeCasedCorrectly" Category="Microsoft.Naming" CheckId="CA1709" Status="Active" Created="2013-02-05 10:24:01Z" FixCategory="Breaking">
             <Issue Name="Member" Certainty="85" Level="Error" Path="D:\TFS\Tests\WebApplication1" File="Default.aspx.cs" Line="21">Correct the casing of 'Io' in member name '_Default.ParaQueFalleCalidadCodigoUnoIo_ReglaCA1709()' by changing it to 'IO'.</Issue>
  </Message>

  <Message Id="Io" TypeName="IdentifiersShouldBeCasedCorrectly" Category="Microsoft.Naming" CheckId="CA1709" Status="Active" Created="2013-02-05 10:24:01Z" FixCategory="Breaking">
             <Issue Name="Member" Certainty="85" Level="Error" Path="D:\TFS\Tests\WebApplication1" File="Default.aspx.cs" Line="26">Correct the casing of 'Io' in member name '_Default.ParaQueFalleCalidadCodigoDosIo_ReglaCA1709()' by changing it to 'IO'.</Issue>
  </Message> 
```

在 resultsFxcop.xml 中，我看到了 CA1709: IdentifiersShouldBeCasedCorrectly 规则：

```
 <Rule TypeName="IdentifiersShouldBeCasedCorrectly" Category="Microsoft.Naming" CheckId="CA1709">
   <Name>Identifiers should be cased correctly</Name>
   <Description>Type, namespace, and... OMITED.</Description>
   <Resolution Name="Member">Correct the casing of '{0}' in member name {1} by changing it to '{2}'.</Resolution>
   <Owner />
   <Url>http://msdn.microsoft.com/library/ms182240(VS.100).aspx</Url>
   <Email>[none]</Email>
   <MessageLevel Certainty="85">Error</MessageLevel>
   <File Name="namingrules.dll" Version="10.0.0.0" />
  </Rule> 
```

CA1709 规则的消息级别：

> ```
>  <MessageLevel Certainty="85">Error</MessageLevel> 
> ```

两个问题：

*   我收到错误但 CA1709 规则操作是警告
*   使用 FxCopcmd.exe 忽略 SuppressMessage

现在，我修改**CustomRules.ruleset**并再次执行 FxCopcmd.exe

```
<Rule Id="CA1709" Action="None" /> 
```

我**没有错误**。

我修改**CustomRules.ruleset**并再次执行 FxCopcmd.exe

```
<Rule Id="CA1709" Action="Ignore" /> 
```

我得到相同的**2 个错误**。

我需要使用 FxCopCmd.exe 和自定义规则集。

*   SuppressMessage 是否适用于 FxCopcmd.exe？
*   如果操作为警告，使用 Fxcopcmd.exe 为什么会出现错误？
*   CA1709 规则的 MessageLevel 错误是什么意思？比规则操作“警告”更优先？

有什么建议么？

**更新**

[http://social.msdn.microsoft.com/Forums/en/vstscode/thread/3f8931da-9a4d-47a6-b331-8b6b07aea8d6](http://social.msdn.microsoft.com/Forums/en/vstscode/thread/3f8931da-9a4d-47a6-b331-8b6b07aea8d6)

[http://social.msdn.microsoft.com/forums/en-US/vstscode/thread/3cb6c50c-7095-4551-a4e3-a3cbc7cb85be](http://social.msdn.microsoft.com/forums/en-US/vstscode/thread/3cb6c50c-7095-4551-a4e3-a3cbc7cb85be)

对于默认的 FxCop 规则，没有简单的方法可以修改消息级别，

*MessageLevel*是消息的重要性，例如，如果您有数千条消息，那么首先开始解决严重（感叹号）错误可能是个好主意。

*确定性*是规则编写者分配给每个规则的数字，它是消息导致代码更改的可能性。这个数字是根据领域专家和客户的反馈以及规则中使用的启发式方法能够避免误报的程度而建立的。

*修复类别*：这表明如果代码之前已发布，则对违规的修复是否是二进制重大更改。例如，您有一个拼写错误的库，您已经将其发送给客户。您现在开始在其上运行 FxCop 并查看拼写错误。FxCop 会告诉你这是一个突破性的变化。如果您修复拼写错误并向客户发送新版本的库，他们将无法使用该库而不更改和重新编译他们的代码。因此，您可能希望忽略此 API 上的 FxCop 违规。另一方面，如果您从未发货，则修复 FxCop 违规是完全可以的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:46:30.840

> SuppressMessage 是否适用于 FxCopcmd.exe？

是的。您需要使用`CODE_ANALYSIS`定义的编译符号进行编译，以便将 SuppressMessage 属性包含在程序集中。一旦它们在那里，FxCop 引擎就会识别它们，而不管用于运行分析的机制如何。

> 如果使用 Fxcopcmd.exe，如果操作为警告，为什么会出现错误？

写入 FxCop 生成的报告的问题级别始终使用规则作者指定的级别。从 Visual Studio 中运行时，Visual Studio 集成插件会使用规则集中指定的级别覆盖此级别。当您运行 fxcopcmd.exe 时，将规则配置为警告与错误之间的唯一区别是，检测到错误级别的规则违规将导致 fxcopcmd.exe 返回非零退出代码，从而允许您中断自动构建。

如果您希望 fxcopcmd.exe 在生成报告时使用您的级别覆盖，您可能需要考虑在[http://visualstudio.uservoice.com/](http://visualstudio.uservoice.com/)上提出建议。*

# vb6 - VB6 代码的 Visual Studio 2012 合并自动对代码进行错误更改

> ID：14703771
> 
> 赞同：5
> 
> 时间：2013-02-05T09:13:31.517
> 
> 标签：vb6, visual-studio-2012, merge

我目前正在尝试将 VB6 代码中所做的一些更改与 Visual Studio 2012 合并。

合并工具会自动删除赋值前面的“Set”，“Variant”更改为“Object”，调用“Sub”方法会自动在参数周围插入括号“()”。如果我签入，这会使 VB6 无法编译结果！

似乎只有更改或冲突的行受到影响。

合并工具不应该使用这样神奇的东西！因为现在我不能使用 VS2012 来合并我们在旧 VB6 代码中所做的更改。

请问有什么办法可以禁用这个功能？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:11:03.393

代码重新格式化被 IDE 隐式关闭，因为它认为需要这些更改的是 VB.Net 代码。

您可以关闭 VB.Net 代码的自动格式化选项，或使用其他合并工具，如[WinMerge](http://winmerge.org/)。

# atk4 - 操作网格列内容的敏捷工具包

> ID：14703777
> 
> 赞同：1
> 
> 时间：2013-02-05T09:13:50.953
> 
> 标签：atk4, agiletoolkit

刚开始使用ATK4，到目前为止非常欣赏它，但不知道如何做到这一点......

我要完成的工作：

我将查询结果输出到网格，其中一个字段是“状态”，数据将是“-1”或“1”。我如何输出一个 HTML 片段（或任何我需要得到我想要的东西）而不是输出 -1 或 1 到列，而不是为每个值显示不同的图标？简而言之：

在“状态”列中：

*   如果值为-1，则显示iconDown.gif；
*   如果值为 1，则显示 iconUp.gif

到目前为止的代码：

```
class page_showlist extends Page {
function init(){
    parent::init();

    $q=$this->api->db->dsql();
    $q->table('remote_system')
            ->join('customers.id','customer_id')
            ->field('customer_id')
            ->field('ip')
            ->field('nickname')
            ->field('name','customers')
            ->field('status')
    ;

    $grid = $this->add('Grid');

    $grid->addColumn('text','status')->makeSortable();
    $grid->addColumn('text','name')->makeSortable();
    $grid->addColumn('text','ip');
    $grid->addColumn('text','nickname');
    $grid->addButton('Reload Grid')->js('click',$grid->js()->reload());
    $grid->addQuickSearch(array('name'));
    $grid->setSource( $q );
    } 
```

}

任何指示/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:35:43.777

要在网格中添加带有图标的列，您可以使用自定义模板。

在我的一个项目中，我这样做：

```
$url = $this->api->pm->base_url . $this->api->locateURL('template', 'images/');
$grid->addColumn('template', 'type', false)
    ->setTemplate('<img src="' . $url . 'icon_object_<?$type?>.png">'); 
```

它将使用名为`type`（在您的情况下使用`status`）的模型字段并在该列中显示图标。`template/images`图标源 URL 是动态生成的，它将在名为**icon_object_XXX.png**的目录中搜索图像文件，其中**XXX**值将从字段`type`值中获取。

在我的情况下`type`是这样的：`array('building','apartment','land','garage')`等。

还有一件事——你应该尽可能开始使用模型！这样，当您的项目变得更大时，您的生活就会变得轻松。也可以与他们有额外的安全性（条件等）。

# javascript - 如何更改方法返回的值（JavaScript OOP）

> ID：14703778
> 
> 赞同：1
> 
> 时间：2013-02-05T09:13:54.447
> 
> 标签：javascript, canvas

我正在尝试使用 OOP 和 html5 画布在 JavaScript 中制作游戏。我无法继续游戏，因为我被困在一个地方。我的问题是如何更改从函数返回值的方法 xPosition 的值。您可以在下面找到一些代码。

```
var myObject = {
    //placing object in start position 
    xPosition : function(){
         return Canvas.width / 2;
    },
    //if keycode pressed move myObject to the left
    move : function(){
         xPosition -= 10; //I know this wont work
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:47:00.723

您不能在不更改（即覆盖）`xPosition`方法本身的情况下更改返回值。

但是，您可以轻松获得一个值，然后更改它：

```
… move: function(){
     var xval = this.xPosition();
     xval -= 10; // this works, reassigning to the "xval" variable (xval=xval-10)

     // or in one step:
     var xval = this.xPosition() - 10;
} 
```

* * *

或者您更改函数的输入值。让它根据画布大小和存储在变量（或更简单：在属性中）中的相对位置计算当前位置，然后仅从`move`函数中更改该变量/属性：

```
var myObject = {
    // placing object in start position
    xPos: 0,
    getXPosition: function() { // compute value from canvas and position
         return Canvas.width / 2 + this.xPos; // or something similar
    },
    move : function() {
         // change relative position
         this.xPos -= 10;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:26:11.403

您需要引用对象的正确范围。this 关键字将引用 myObject 范围。

您还调用了一个函数，因此需要添加括号。

您的另一个问题是您正在调用一个函数并尝试更新该值。您要么需要将 xPosition 分配为变量，要么传入新值。

```
 move : function(){
         this.xPosition(-10); 
    } 
```

看看这些关于构建 javascript 的文章

1.  [第1部分](http://blog.pluralsight.com/2012/09/18/structuring-javascript-code-part-i/)
2.  [第2部分](http://blog.pluralsight.com/2012/09/25/the-prototype-pattern-structuring-javascript-code-part-ii/)
3.  [第 3 部分](http://blog.pluralsight.com/2012/10/02/revealing-module-pattern-structuring-javascript-code-part-iii/)
4.  [第 4 部分](http://blog.pluralsight.com/2012/10/09/revealing-prototype-pattern-structuring-javascript-code-part-iv/)

如果您正在处理 x,y 位置并且正如您所说您正在制作游戏，我会使用向量来管理您的游戏对象。vecotr 库将为您处理所有数学运算。加法、减法、乘法等。

那里有很多矢量库，或者您可以构建自己的。 [矢量数学](http://www.wildbunny.co.uk/blog/vector-maths-a-primer-for-games-programmers/)

# php - 如何使用 php 每小时从 db 获取数据？

> ID：14703779
> 
> 赞同：-3
> 
> 时间：2013-02-05T09:13:57.467
> 
> 标签：php, mysql

我设置了一个每 5 个 miniuts 运行的 cron，并将值添加到 db 中。现在我正在寻找一个代码，该代码将每小时从 db 获取数据，但它将占用特定小时的最新条目，这样我将获得 24 个不同的条目，每个值都是该小时的最新条目

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:17:15.220

如果表中有`DATETIME`or`TIMESTAMP`字段，可以使用 sql`BETWEEN()`函数在一定时间范围内查找一个值，然后`ORDER BY timefield DESC LIMIT 1`检索最后一个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:20:26.897

你能做的是

```
SELECT * FROM table_name
ORDER BY datetime_field_name DESC 
LIMIT 1 
```

对于 PHP 代码，请参阅此[链接](http://www.w3schools.com/php/php_mysql_connect.asp)。如果您在 google 上搜索，您可以找到更多示例。

# spring - Spring Security 自定义身份验证管理器抛出异常

> ID：14703783
> 
> 赞同：0
> 
> 时间：2013-02-05T09:14:09.513
> 
> 标签：spring, spring-security

我正在尝试实现一个轻量级的身份验证管理器。我很难追查这个问题。通常，我当前遇到的异常类型与某些缺少的依赖项有关，但似乎并非如此。

```
WARNING: Exception thrown from LifecycleProcessor on context close
java.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: Root WebApplicationContext: startup date [Tue Feb 05 00:51:15 PST 2013]; root of context hierarchy
at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:360)
at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1057)
at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1010)
at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:549)
at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:143)
at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1498)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:619)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:566)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1454)
at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:74)
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1295)
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1387)
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:818)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
at sun.rmi.transport.Transport$1.run(Transport.java:159)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

...

```
<security:http create-session="stateless" authentication-manager-ref="authenticationManager">
    <security:http-basic />
    <security:custom-filter ref="restFilter" position="BASIC_AUTH_FILTER" />
    <security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http>

<!-- implements org.springframework.web.filter.GenericFilterBean -->
<bean id="restFilter" class="http.security.RestSecurityFilter">
    <constructor-arg name="authenticationManager" ref="authenticationManager" />
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="restAuthenticationProvider" />
</security:authentication-manager>

<!-- implements org.springframework.security.authentication.AuthenticationProvider -->
<bean id="restAuthenticationProvider" class="http.security.RestAuthenticationProvider" /> 
```

当我注释掉我的 security.xml 时，我的应用程序再次开始正常工作。

```
 <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:28:15.100

如果您认为该错误与某些缺少的依赖项有关。尝试添加这些依赖项。您可能缺少 spring 安全配置 jar。

```
<!-- Spring Security -->
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${spring.version}</version>
</dependency> 
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

# asp.net - 如何使用 MVC3 显示数据库中的多个图像

> ID：14703784
> 
> 赞同：2
> 
> 时间：2013-02-05T09:14:14.003
> 
> 标签：asp.net, asp.net-mvc-3

我是新手，`MVC.`我已经保存了图像和一些数据，但无法显示保存的图像。我想在主页中显示所有保存的图像。

**模型：**从模型中获取数据库列表

```
public List<Products> GenreList()
        {
} 
```

**控制器**

```
public ActionResult MYsample()
{
    var MyList = storeDB.GenreList();
    var a= MyList.Count;

    if (a != null)
    {
        foreach (var li in MyList)
        {
            return File(li.fileContent, li.mimeType,li.fileName);
        }
    }
    return View(MyList);
} 
```

**看法**

```
 @foreach (var item in Model)
    {
            <img src="@Url.Action("MYsample", "HomeController", new { id = item.ProductID })" alt="@item.Productname" />
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T09:23:33.877

您可以首先编写一个控制器操作，将图像提供给响应流：

```
public ActionResult Image(int id)
{
    // you should add a method to your repository that returns the image 
    // record from the id
    Products image = storeDB.Get(id);
    return File(image.fileContent, image.mimeType);
} 
```

然后在您的主控制器操作中将图像列表发送到视图：

```
public ActionResult MySample()
{
    var model = storeDB.GenreList();
    return View(model);
} 
```

然后在您的强类型视图中循环遍历图像并通过将其属性指向新创建的控制器操作来`<img>`为每个图像生成一个标签：`src`

```
@model MyList
@foreach (var li in MyList)
{
    <img src="@Url.Action("Image", new { id = li.Id })" alt="" />
} 
```

如果您不想有一个单独的控制器操作来查询数据库并从 id 检索图像记录，您可以使用[`data URI scheme`](http://en.wikipedia.org/wiki/Data_URI_scheme). 请记住，并非所有浏览器都支持此功能。

所以想法是您的控制器操作会将图像数据发送到视图：

```
public ActionResult MySample()
{
    var model = storeDB.GenreList();
    return View(model);
} 
```

然后在您的强类型视图中，您可以遍历列表并生成正确的`<img>`标签：

```
@model MyList
@foreach (var li in MyList)
{
    <img src="src="data:@(li.mimeType);base64,@(Html.Raw(Convert.ToBase64String(li.fileContent)))" alt="" />
} 
```

# flash - Flash 安全对话框

> ID：14703790
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:14:33.183
> 
> 标签：flash, apache-flex, flex4

我正在尝试使用 Flex SDK 4.1 修改 Flex 应用程序问题是用户可以允许访问麦克风的安全对话框未出现在：`var mic:Microphone = Microphone.getMicrophone();`. 我可以轻松地显示高级对话框`Security.showSettings(SecurityPanel.PRIVACY);`，但我想使用带有按钮的默认对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:14:44.693

如果您第一次取消对麦克风的访问并希望第二次获得麦克风，则不会打开安全弹出窗口。像这样使用：

```
private var _mic:Microphone;

protected function initMicrophone():void 
{               
    _mic = Microphone.getMicrophone();

    if (_mic == null) return;

    if (_mic.muted)
    {
        Security.showSettings(SecurityPanel.PRIVACY);
    }
} 
```

# android - 在 Gingerbread 上启动动作模式时出现奇怪的 ActionBarSherlock 行为

> ID：14703792
> 
> 赞同：1
> 
> 时间：2013-02-05T09:14:40.247
> 
> 标签：android, actionbarsherlock

我在我的 android 应用程序中使用 ActionBarSherlock，主题设置为`Sherlock.Light.DarkActionBar`，当我在 ICS 设备上运行应用程序时，一切看起来都不错，但是当我在 Gingerbread（emu 和多个设备上）上测试它时，操作栏看起来很奇怪，有时当它失去焦点时，它会变成白色。

我没有使用自定义样式，所以我不太明白是什么原因造成的。

**更新：** 我注意到每次我以编程方式进入和退出动作模式时都会发生这种情况（`StartActionMode`）。

![插图](../Images/9a1a2dda8d0032b472fb7b7cd8165534.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:27:13.260

我能够解决这个问题，这是因为我非常快速地启动和停止了动作模式。

# javascript - jQuery触发自定义事件在IE中导致未知的运行时错误

> ID：14703795
> 
> 赞同：1
> 
> 时间：2013-02-05T09:14:53.817
> 
> 标签：javascript, jquery

我正在使用下面的代码将自定义事件绑定到元素。

```
 jQueryelement.bind("custom",{}, function(){}); 
```

我正在尝试`trigger`这样做

```
 jQueryelement.trigger("custom"); 
```

这在 Firefox 中运行良好。但在 IE 中导致未知的运行时错误。请帮助我。TIA 我正在使用 jQuery v1.5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:59:33.440

在 jQuery 1.5.2 中使用`bind()`and`trigger()`似乎工作正常。我的猜测是您的应用程序中还有其他一些代码导致了这种情况。

* * *

[**DEMO**](http://jsfiddle.net/JUx4a/) - 适用于 FF、Chrome、IE9、IE8/IE7 战斗模式和 IE 怪癖模式

* * *

演示使用此代码：

```
$('body').bind('custom', {}, function(){
    alert("Well, Hello!")
});

$('body').trigger('custom'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T04:53:53.637

对于 JQuery 1.7 的完整性（我知道这个问题与 JQuery 1.5.2 有关），你最好使用`on()`. 如果您将其用作整个页面的事件，请使用以下内容：

```
$(document).on("custom", function() {
  alert("Triggered!");
});

$.event.trigger("custom"); 
```

或者如果您正在触发一个元素：

```
$(".myElement").on("custom", function() {
  alert("Triggered!");
});

$(".myElement").trigger("custom"); 
```

# php - PHPMailer HTML 带有使用密件抄送的变量

> ID：14703799
> 
> 赞同：0
> 
> 时间：2013-02-05T09:15:05.817
> 
> 标签：php, html-email, phpmailer

我正在使用 PHPMailer，我已经设置好了一切，一切都很好，但是我遇到了问题。

我需要每个收件人收到的 HTML 略有不同，这是 HTML 电子邮件中的一个链接。因此，必须针对每个收件人更改链接。

我可以简单地使用一个 php 循环将其一一发送给每个收件人，但这将需要大量处理并且可能会使请求超时，我不希望这种情况发生。

有没有我可以像在大多数所见即所得编辑器上一样使用大括号使用简码，`{email}`所以我会做`$mail->send()`一次反对循环遍历所有收件人并`$mail->send()`为每个收件人做一次，这是我试图避免的。

如果您需要更多信息，我很乐意编辑这个问题。

> [https://code.google.com/a/apache-extras.org/p/phpmailer/](https://code.google.com/a/apache-extras.org/p/phpmailer/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:29:25.727

我认为你不能只使用 PHPMailer 来做到这一点。我看了一下类方法，没有与这样的事情相关联。

Worx International Inc. 有另一个名为 PHPMailer-ML 的解决方案，它可以为您的需求提供一个很好的解决方案：[http ://phpmailer.worxware.com/index.php?pg=phpmailerml](http://phpmailer.worxware.com/index.php?pg=phpmailerml)

# sticky - 粘性脚本的改编

> ID：14703803
> 
> 赞同：1
> 
> 时间：2013-02-05T09:15:16.330
> 
> 标签：sticky

经过大量搜索后，我似乎无法找到适合我需要的答案。在从事讽刺性博客项目时（位于[此处](http://whitesladiesnights.blogspot.com)) 我能够在右侧边栏上设置一个粘性侧边栏，并按计划在顶部很好地停止。以前，左侧边栏被建模为做同样的事情，它确实做到了。我所追求的是使用类似的设置来拥有第二个元素，在左侧边栏中的页面下方或右侧，在滚动视图时跟随第一个元素，并类似地停在顶部，一些允许灵活性的参数在将内容进一步向下停止在顶部。要么这是不可能的，要么我的技能不适合我只是不知道我在做什么（很可能是后者），我将永远感激指导。您将在下面找到使用的现有编码（保留原样以在链接页面上演示问题，但在上下文中显然不正确）。我无法想象我是唯一一个追求这种变化的人，如果提供了解决方案，我们将不胜感激并在脚本中适当地注明。我的 CSS 知识略好于初级，但具体细节将不胜感激。我想需要一些进一步的定位。很高兴为慷慨的灵魂提供额外的见解，如果需要，他们会做出回应。目前，此应用的元素是准确的（即分别为“.sidebar-right-1”和“HTML7”）......</p>

```
#sidebar-right-1.sticky {
position: fixed;
width: 310px;
top: 5px
}
#HTML7.sticky {
position: fixed;
width: 310px;
left: 50%;
margin-left: -690px;
top:5px 
```

以及下面对应的脚本

```
<script type='text/javascript'>
//<![CDATA[
$(window).scroll(function(){ 
var offset = 0;
var sticky = false;
var top = $(window).scrollTop();
if ($("aside").offset().top < top) {
$("#sidebar-right-1, #HTML7").addClass("sticky");
sticky = true;
} else {
$("#sidebar-right-1, #HTML7").removeClass("sticky");
}
});
//]]>
</script> 
```

干杯，并请原谅本文中的任何礼仪疏忽。

# android - 获取随机列表项android

> ID：14703805
> 
> 赞同：3
> 
> 时间：2013-02-05T09:15:21.360
> 
> 标签：android

我想通过单击android中的按钮从列表中获取随机列表项。有人可以指导我找到一个教程或示例，我可以在其中找到如何做到这一点，或者如果有人已经做过类似的事情，我可以看到一个示例代码。我不知道如何通过它。需要帮忙。

```
public class RandomActivity extends Activity {
String arr[]={"A","B","C","D","E"}; 
```

ListView 列表；pv onCreate（捆绑保存）{

```
list = (ListView)findViewById(R.id.listView1);
ArrayAdapter<String> adapter = new ArrayAdapter<String>           (this,android.R.layout.simple_list_item_1,arr);
list.setAdapter(adapter); 
```

}

```
public void onRandom(View v){
    list.getAdapter().getItem(new Random().nextInt(list.getCount()));
    } 
```

仍然没有得到 size() 方法，所以我用 getCount() 替换它。但没有生成随机值；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T09:20:19.747

使用`Random`类（[http://developer.android.com/reference/java/util/Random.html](http://developer.android.com/reference/java/util/Random.html)）

```
list.get(new Random().nextInt(list.size())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-22T10:41:51.813

## 从 Kotlin 1.3 开始：

```
list.random() 
```

如果列表为空，则会抛出`NoSuchElementException`. [文档](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/random.html)

如果您不能使用 Kotlin，那么[@tom 的答案](https://stackoverflow.com/a/14703904/7855861)就是您的选择。

# linux - 计算linux中的处理器核心数

> ID：14703809
> 
> 赞同：0
> 
> 时间：2013-02-05T09:15:31.237
> 
> 标签：linux

如何通过使用经过的时间（执行任何代码部分所需的时间）来推断 linux 操作系统的处理器数量。我有执行特定代码部分所需的时钟滴答。我如何测量机器上的核心从那

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:20:42.313

您可以使用获取有关 CPU 的信息（处理器数量和内核数量等）

`cat /proc/cpuinfo`.

但是，如果您尝试计算在 linux-kernel 中执行特定代码所花费的时钟滴答，您可以尝试。

```
#include <sys/time.h>

unsigned long ini,end;
preempt_disable();
rdtscl(ini);
...your code....
rdtscl(end);
preempt_enable();
printk("time lapse in cpu clics: %lu\n",(end-ini)); 
```

有关更多详细信息[http://www.xml.com/ldd/chapter/book/ch06.html](http://www.xml.com/ldd/chapter/book/ch06.html)或[download.intel.com/embedded/software/IA/324264.pdf](http://download.intel.com/embedded/software/IA/324264.pdf)如果您的代码需要更多时间，那么您也可以有效地使用 jiffies。

对于用户空间应用程序，您可以使用各种计时函数，以纳秒分辨率或 oprofile（[http://oprofile.sourceforge.net/about/](http://oprofile.sourceforge.net/about/)）提供时间，并参考[Timer 函数以使用 C++ 以纳秒为单位提供时间](https://stackoverflow.com/questions/275004/c-timer-function-to-provide-time-in-nano-seconds)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:52:55.960

我想我们可以这样做：

编写一些代码来完成一些繁重的数学工作，可以并行运行 - 例如寻找素数的简单方法。然后在多个线程中运行它，从一个开始，然后向上。在某些时候，计算出 N 个第一个质数所需的时间将是，线程数将与（可用）处理器内核的数量相同。

但这是一种非常笨拙的方法来查找处理器的数量，并且几乎可以肯定它不适用于高负载的系统，或者在虚拟机上运行的系统等。

# android - 如何在 Android 中备份

> ID：14703810
> 
> 赞同：0
> 
> 时间：2013-02-05T09:15:32.983
> 
> 标签：android, android-webview

在这里，我在 BrowserActivity 中显示 URL。当我按下返回时打开站点后，我应该返回但这里重新加载。因为我的网址打开了另一个网址。我的网址只是正确的。只需按一下后按即可告诉我如何返回活动。如果我按 2 次后退按钮，则它可以正常工作（意味着转到上一个活动）。我在下面发布了我的代码。请仅使用该网址尝试..

```
btn.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View arg0) {
    Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
    myWebLink.setComponent(new ComponentName("com.android.browser","com.android.browser.BrowserActivity"));
    myWebLink.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    myWebLink.setData(Uri.parse("http://www.abcd.com"));
    startActivity(myWebLink);}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:34:00.880

Android 活动存储在活动堆栈中。回到以前的活动可能意味着两件事。

1.  **您使用startActivityForResult**从另一个活动中打开了新活动。在这种情况下，您只需从代码中调用**finishActivity()**函数，它就会带您回到上一个活动。

2.  跟踪活动堆栈。每当您使用一个意图启动一个新活动时，您都可以指定一个意图标志，如 FLAG_ACTIVITY_REORDER_TO_FRONT 或 FLAG_ACTIVITY_PREVIOUS_IS_TOP。您可以使用它在应用程序中的活动之间随机播放。不过没怎么用过。看看这里的标志：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:57:18.293

您正在访问的网站是：

```
http://www.bigticketshop.co.uk/clickout.aspx?did=326177&mid=101&d=21-04-2013&e=A Gala for St George&po=2 
```

这是重定向到：

```
http://www.seatwave.com/a-gala-for-st-george-tickets/royal-albert-hall-tickets/21-april-2013/perf/633910?affid=0316 
```

因此，当您按下返回按钮时，它将返回您的旧网站，该网站再次重定向到新网站，因此它进入一个循环。

直接尝试新的网站它工作正常：

```
btn.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View arg0) {
    Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
    myWebLink.setComponent(new ComponentName("com.android.browser","com.android.browser.BrowserActivity"));
    myWebLink.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    myWebLink.setData(Uri.parse("http://www.seatwave.com/a-gala-for-st-george-tickets/royal-albert-hall-tickets/21-april-2013/perf/633910?affid=0316"));
    startActivity(myWebLink);}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:18:26.790

用这个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
  if(event.getAction() == KeyEvent.ACTION_DOWN)
  {
    switch(keyCode)
    {
      case KeyEvent.KEYCODE_BACK:
        if(myWebLink.canGoBack() == true)
        {
          myWebLink.goBack();
        }
        return true;
    }
  }
  return super.onKeyDown(keyCode, event);
} 
```

# iphone - 缩放/缩放 CClayer 的问题（cocos2d + box2d）

> ID：14703816
> 
> 赞同：2
> 
> 时间：2013-02-05T09:15:56.740
> 
> 标签：iphone, cocos2d-iphone

我正在为 Iphone制作类似愤怒的小鸟游戏`cocos2d & box2d`，其中我需要缩小我的相机视图，因为我抛出的身体离开屏幕，然后它应该按照正常位置放大。（如果你在手机上玩过愤怒的小鸟我希望你得到我完全坚持的东西）我试图缩放我的整个图层但没有按需要工作。我可以使用相机`cocos2d`来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:23:14.417

你必须使用比例因子。相机不会放大和缩小，它只会在你的场景中水平和垂直移动使用比例因子来给它动画效果，就像愤怒的小鸟一样

```
id myAction = [CCScaleTo actionWithDuration:0.5 scaleX:2.0 ScaleY:2.0];    
[self runAction:myAction]; 
```

应该这样做！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:10:57.793

最好的选择是使用 CCLayer 的比例因子。

self.scale = someFactor;

someFactor 的范围从 0 到 1。

为了达到很酷的效果，您可以尝试根据精灵的速度按比例更改因子。我建议您使用时间表随时间更改比例。

# node.js - 403 Forbidden 当尝试通过代理访问 AWS 实例上的节点服务器时

> ID：14703820
> 
> 赞同：0
> 
> 时间：2013-02-05T09:16:18.687
> 
> 标签：node.js, proxy, amazon-web-services, socket.io

我在我的应用程序中使用 Node.js + Socket.io。

比如说，我的聊天应用程序 (php) 托管在`server A`并且 node.js 托管在`AWS`.

每个客户端都访问聊天应用程序，并在后台将客户端注册到 AWS 上托管的 node.js 应用程序。

问题是当我使用代理服务器`hidemyass.com`并配置我的 firefox 来访问应用程序时。

应用程序正在加载，但无法连接到托管在 AWS 上的节点服务器，我得到一个`403 Forbidden error`.

这是 AWS 安全配置或 node.js 设置的问题吗？我完全无法理解这一点。

我已尽力寻找发生这种情况的原因，但没有得到任何线索。可能是 AWS 配置问题还是与 Nodejs 服务器设置有关。任何猜测或帮助都将受到高度赞赏。

非常感谢你。

# javascript - 使用 document.activeElement 在选定的 li 中获取 img 的 id

> ID：14703822
> 
> 赞同：1
> 
> 时间：2013-02-05T09:16:25.020
> 
> 标签：javascript, html, css

这是我的html代码

```
<li id="liButton_1" tabindex="2" class="activeli">
<a onclick="ShowVideo('1');">
    <img id="ImageButton_1" title="Sister Teresa's Talk (Malayalam)" alt="Sister Teresa"
    s="" talk="" (malayalam)
    '="" src="http://www.braddockinfotech.com/demo/dvnonline/vod/timthumb/timthumb.php?src=wp-content/uploads/2012/11/Sr.-Teresa.jpg&amp;h=54&amp;w=109&amp;zc=1&amp;a=c" class="active"></a></li> 
```

好的，当它`li`被选中时，它就像访问一样`document.activeElement`。如何使用 document.activeElement.(some thing)选择里面`id`的`img``li`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:20:53.710

如果您将 li 引用作为活动元素

```
var activeEle = document.activeElement;
var imageID = activeEle.getElementsByTagName("img")[0].getAttribute("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:22:36.643

使用 jQuery 非常简单

```
$("#liButton_1").click(function(){
  var img_id = $("#liButton_1 a img").attr('id');
}); 
```

未经测试，但希望会奏效

# java - 无法通过 Web 服务方法返回 org.w3c.dom.Document

> ID：14703825
> 
> 赞同：1
> 
> 时间：2013-02-05T09:16:28.703
> 
> 标签：java, xml, web-services, axis2

我正在尝试从 java axis2 Web 服务返回一个 XML 文档对象。当我试图在客户端获取 Document 对象时，它给了我这些异常。

```
org.apache.axis2.AxisFault: org.apache.axis2.AxisFault: Mapping qname not fond for the package: com.sun.org.apache.xerces.internal.dom
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at com.turnkey.DataCollectorStub.getData(DataCollectorStub.java:194)
    at com.turnkey.TestClient.main(TestClient.java:28) 
```

我不能从 web 服务返回 Document 对象吗？该服务确实返回 XML 字符串。

下面是我正在使用的方法的伪代码

```
import java.io.*;
import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
public Document getData(args)
    {
     String xmlSource = "/*XML string*/";
     DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
     DocumentBuilder builder = factory.newDocumentBuilder();
     Document xmlDoc = builder.parse(new InputSource(new StringReader(xmlSource)));
     return xmlDoc;
    } 
```

顺便说一句，此方法在服务器端工作正常，但在客户端我无法接收 Document 对象

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:50:37.440

简单的方法不用`Document`作返回值，因为axis2 在模式中找不到合适的导入。如果每次都生成 wsdl，则应将 import org.w3c.dom.Document 添加到 wsdl 模式（这是一个不方便的解决方案）。这就是为什么在我看来最好的方法返回特定实体

```
 public Credit[] getCreditList(){
            Credit[] credits = null;
            try {
                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                DocumentBuilder documentBuilder = factory.newDocumentBuilder();
                Document xmlDoc = documentBuilder.parse(XML_REAL_PATH);

                Element root = xmlDoc.getDocumentElement();

                List<Credit> creditsList = new ArrayList<>();

            NodeList creditNodes = root.getElementsByTagName(CREDIT);
            int countCreditNodes = creditNodes.getLength();

            for (int i = 0; i < countCreditNodes; i++) {
                Element creditElement = (Element) creditNodes.item(i);

                Credit credit = new Credit();

                Element child = (Element) creditElement.getElementsByTagName(OWNER).item(0);
                String owner = child.getFirstChild().getNodeValue();
                credit.setOwner(owner);

                //...
                creditsList.add(credit);
            }
            credits = creditsList.toArray(new Credit[creditsList.size()]);

        } catch (SAXException | IOException | ParserConfigurationException ex) {
            Logger.getLogger(CreditPayService.class.getName()).log(Level.SEVERE, null, ex);
        }
        return credits;
} 
```

# android - Google Play 没有显示我的平板电脑应用程序

> ID：14703826
> 
> 赞同：2
> 
> 时间：2013-02-05T09:16:28.990
> 
> 标签：android, android-manifest, google-play

我在 Google Play 上部署了我的应用程序，但它没有显示为可用于平板电脑。它支持 xlarge 屏幕（如[SO answer 中](https://stackoverflow.com/questions/13438935/app-doesnt-show-in-google-play-for-tablet)所建议）

它没有显示的原因是它需要 3G、电话和平板电脑（通常）没有的其他一些东西，但对于我的智能手机版本来说绝对是必需的，而且在平板电脑上也非常好。

**所以，我的问题本质上是：有没有办法将这些要求设置为“需要但不是必须”或在运行时要求它们并在我的应用程序中处理它们的缺席？**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:26:33.360

是的。有办法处理它。

要进行设置，您需要将所有这些要求设为**功能**而非**权限**。然后通过添加将其设为不是必须需要的功能`android:required="false"`

像这样

```
<uses-feature android:name="android.hardware.bluetooth" android:required="false"/>
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

见[官方文档](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:26:35.187

检查这个文件。[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)

您可以添加`<uses-feature android:name="android.hardware.telephony" android:required="false"/>`到清单中。

# c# - 为什么可以在基类中实现接口方法？

> ID：14703828
> 
> 赞同：60
> 
> 时间：2013-02-05T09:16:37.550
> 
> 标签：c#, interface

在我的项目中，我发现了一个在 C# 中似乎完全有效的奇怪情况，因为我没有编译时错误。

简化示例如下所示：

```
using System;
using System.Collections.Generic;

namespace Test
{

    interface IFoo
    {
        void FooMethod();
    }

    class A
    {
        public void FooMethod()
        {
            Console.WriteLine("implementation");
        }
    }

    class B : A, IFoo
    {
    }

    class Program
    {
        static void Main(string[] args)
        {
            IFoo foo = new B();
            foo.FooMethod();
        }
    }
} 
```

这样的代码编译。但是，请注意，`A`它不是`IFoo`也`B`不会实现`IFoo`方法。在我的情况下，偶然（重构后），`A`具有相同签名的方法。但是为什么要`A`知道如何实现`FooMethod`接口`IFoo`呢？`A`甚至不知道`IFoo`存在。

对我来说有这样的设计是危险的。因为每次我实现某个接口时，我都应该检查这个接口中的每个方法是否“干扰”了基类方法。

如果这是“纯 C# 功能”？这叫什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-05T09:20:31.197

对于接口中的每个成员，编译器只查找*显式*实现（如果有），然后是*公共*实现（*隐式*实现），即公共 API 上与接口签名匹配的方法。在这种情况下，`A.FooMethod()`看起来很适合公共实现。如果`B`对该选择不满意，它可以选择`new`方法，也可以使用显式实现；后者将是首选：

```
void IFoo.FooMethod() { /* explicit implementation */ } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-05T09:19:30.583

这里的关键词是`implements`。您的基类，虽然它对方法签名一无所知，但`IFoo`已声明它在类层次结构中某处的接口中实现该方法。

因此，当您`IFoo`在派生类中实现时，它已经在类结构中实现了方法签名，因此不需要再次实现它。

如果你有这个：

```
interface IFoo
{
  void FooMethod();
}
class A
{
  private void FooMethod(){}
}
class B : A, IFoo
{

} 
```

您需要`IFoo`在这种情况下实施，因为在实施时`IFoo`无法访问该结构，正如 Mark 所说。`IFoo.FooMethod()`尽管在层次结构中已经定义了适当的方法签名，但您可以通过执行以确保您具有实现来隐式实现接口。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-05T13:39:38.703

你在评论中说，

> `FooMethod`在未实现的`A`类中编写实现的人`IFoo`实际上打算实现的可能性有多大`IFoo`？

`A`好吧，作者在创作时的想法并不重要`A`。谁必须对两者都继承自AND 实现`B`这一事实负责的作者。**由作者****来考虑定义 的后果**。`B``A``IFoo`**`B``B`**

你也说

> 就我而言，偶然（重构后）`A`具有具有相同签名的方法

表明这种情况发生在之后`A`，并且`B`都被写入。在这种情况下，情况会发生变化：当编辑 * 继承自 * 的类时（例如`A`），**编辑者有责任检查编辑对所有继承类的影响**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T09:20:28.393

要实现一个接口，一个类只需要 (a) 声明它正在实现该接口（例如您的类 B 所做的），并且 (b) 为接口中定义的所有方法提供实现，直接或间接通过基类（例如您的 B 类）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T12:26:18.233

第 13.4.4 节。C# 规范指出：

> 类或结构 C 的接口映射为 C 的基类列表中指定的每个接口的每个成员定位一个实现。确定特定接口成员 IM 的实现，其中 I 是声明成员 M 的接口通过检查每个类或结构 S，**从 C 开始并针对 C 的每个连续基类重复，直到找到匹配项：**

因此，这似乎是定义明确的行为，因为在`FooMethod`中找不到正确的实现`B`，因此在其基类上执行搜索，`A`找到具有匹配签名的方法。这甚至在规范的同一部分中明确指出：

> 基类的成员参与接口映射。在示例中

```
interface Interface1
{
void F();
}
class Class1
{
    public void F() {}
    public void G() {}
}
class Class2: Class1, Interface1
{
    new public void G() {}
} 
```

> Class1 中的方法 F 用于 Class2 的 Interface1 实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T09:22:59.407

该功能称为*继承*。如果你不喜欢这个设计，就不要使用它。很多人不喜欢继承，所以你也可以。继承的定义是，基类的所有成员也是派生类的成员。所以没有任何编译器错误。因此，Derived 实现了合约`IFoo`提供的功能。它是满足此要求的基类成员。

它的美妙之处在于，您可以通过*基本功能*（虚拟）实现接口，如果期望 Derived 表现不同，则可以覆盖该接口。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T09:23:29.547

接口不被继承，接口被实现。因此，当您从接口派生类时，这意味着

> 嘿接口，你会在这里找到一个实现你提供的方法签名的方法。

由于基类有方法的实现，与接口中定义的方法签名相同，不会有任何问题。

即使您编写包含相同方法签名的第二个接口，它仍然可以工作。

```
interface IFoo2
{
    void FooMethod();
}

class B : A, IFoo, IFoo2
{
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-06T03:48:57.103

“可是A为什么要知道IFoo接口的FooMethod怎么实现呢？A连IFoo的存在都不知道。”

A 不需要知道接口 IFoo 的存在。正确实现 FooMethod 不是 A 的责任。显然 A 恰好实现了与 IFoo 接口方法 FooMethod 具有相同签名的方法。

实现 FooMethod 是 B 的责任，因为它正在实现 IFoo 接口。但是由于 B 已经有一个名为 FooMethod 的方法（从 A 继承），它不需要显式地实现它。如果继承的方法没有发挥作用，B 可以新建方法并编写自己的实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T09:31:17.843

`B`执行`IFOO`。`B`继承自`A`所以它实际上看起来像这样：

```
class B : IFoo  //Notice there is no A here. 
{
    public void FooMethod()
    {
        Console.WriteLine("implementation");
    }
} 
```

很明显（从上面的代码中）`B`正在实现`IFoo`并且没有什么特别的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-05T21:28:42.243

虽然推测 C# 的创建者为什么做了他们所做的事情并不是特别有帮助，虽然我不喜欢这个特殊的功能，但我怀疑它工作的部分原因是没有*其他*好的语法来指定一个接口应该由一个已经存在的基类方法实现。要求派生类必须定义除了链接到基类实现之外什么都不做的方法，这看起来很丑陋。

话虽如此，我认为对于 C# 来说，通过提供一种将接口成员显式附加到类成员的语法来解决该一般问题（链接到其他成员的接口方法很难看）会比使用自动绑定更干净语义来处理一种特定情况，但需要在更常见的情况下进行链接（通过受保护的虚拟方法实现接口）：

受保护的虚拟 IFoo_Method(int a, int b, int c) { ... }

IFoo.Method(int a, int b, int c) { IFoo_Method(a,b,c); }

虽然 JITter 可能能够确定 IFoo_Method 调用应该是内联的，但它实际上不应该这样做。声明受保护的方法`IFoo_Method`应该被视为`IFoo.Method`.

# java - 根据控制器返回值调用javascript方法

> ID：14703832
> 
> 赞同：1
> 
> 时间：2013-02-05T09:16:49.997
> 
> 标签：java, javascript, jsf-2, richfaces, el

我有两个 Javascript 方法，我只想根据返回的值调用其中一个`Controller`。实际上，我想隐藏`rich:popPannel`是否`listSize > 0` 以及是否`listSize = 0` `rich:popPannel`应该关注我应该使用哪个 JSF 组件，这可能有助于我实现这种类型的标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:28:59.803

您是否`listSize`在代码中的其他任何地方使用？如果不是，您可以`boolean`根据 的值返回 a `listSize`，您将使用它来显示或隐藏 popupPanel。

# mysql - MySQL 更新触发器 - 查找更改的列？

> ID：14703844
> 
> 赞同：7
> 
> 时间：2013-02-05T09:17:16.797
> 
> 标签：mysql, triggers

我有一张有 120 列的表。我需要设置审计跟踪，如果它被更改，它将记录任何列。就像现在一样，我想我必须为每一列设置一个条件如下的触发器：

```
IF(NEW.columnName != OLD.columnName)
THEN //log the old value 
```

这需要做 120 次……虽然 20 年前我会接受这种方法，但今天我拒绝相信不可能自动化这样一个简单的过程来自动查找更改的列。

这是我到目前为止发现的：

*   NEW 和 OLD 都不是表格，它是一种语言结构，因此您不能执行“SELECT NOW.*”或类似的操作。
*   触发器中不允许使用动态 SQL（这可以解决问题）。
*   触发器中不允许使用动态 SQL 的过程（说真的，Oracle，看起来您无论如何都非常努力地禁用此功能）。

我正在考虑将 BEFORE 和 AFTER 触发器与可能解决问题的临时表和变量结合使用，但是仍然需要动态 SQL。我觉得我走到了死胡同。

有没有办法解决这个问题？

一个附带问题：这在 PostgreSQL 中可能吗？

**更新**：我发现了 2 个潜在的解决方案，但它们对我来说都不够清楚：

*   使用 EVENTS 作为一种变通方法，将触发器与动态 SQL[变通方法](https://stackoverflow.com/questions/12575631/workaround-for-dynamic-statements-in-stored-procedures-called-from-triggers)结合使用。我不得不承认，我不太明白这一点，这是否意味着 EVENT 无论如何都会每秒触发一次？
*   [这篇文章](http://codewordhank.com/sql-server/dynamic-sql-and-a-trigger-gotcha/)说，只要使用临时表，就可以在触发器中使用动态 SQL。那还是用动态SQL，所以不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:22:28.483

有趣的是，几年前我在实施基于动态触发器的审计日志时遇到了同样的问题。我想出的解决方案是简单地生成 SQL 触发器代码，然后可以（自动）应用来替换旧的触发器定义。如果没记错的话，我创建了几个 SQL 模板，这些模板由 PHP 脚本处理，而 PHP 脚本又根据“SELECT COLUMN_NAME FROM information_schema.COLUMNS WHERE ...”输出完整的触发器定义是的，触发器代码很大，但它有效！希望能有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T18:39:29.817

我通过创建影子表为其中一个项目做到了这一点。如果您不处理数以百万计的更新，这可能会奏效

*   当用户登录时，SET @user_id = { 登录用户 id }
*   在更新之前在表上创建触发器以将要修改的行复制到具有相同结构的影子表中（请注意，影子表中不能有主键，也不能有唯一键）
*   向影子表添加其他列（ modified_by、modified_on ）
*   创建一个小的 php 脚本来显示列之间的差异 - 这样您就不会访问现有的 php 代码库
*   如果您正在处理大量更新并希望保持影子表较小，则可以编写一个 cron 来解析影子表并识别更改了哪一列并将此信息仅存储到另一个表

# jquery - 非基于函数的对象上的 jQuery 小部件桥接

> ID：14703845
> 
> 赞同：0
> 
> 时间：2013-02-05T09:17:21.020
> 
> 标签：jquery, jquery-ui, jquery-widgets

作为从 jQuery 1.6.4 升级到 1.9.x 的一部分，我试图了解如何使用 jQuery 小部件桥来允许访问作为独立对象创建的小部件的函数，而不是作为 jQuery 的扩展。

所有示例（[例如这个](http://www.erichynds.com/jquery/using-jquery-ui-widget-factory-bridge/)示例）都使用原型函数作为对象的源定义，这似乎没有映射为直接从基于 {} 的定义定义对象。

例如，我正在定义一个这样的小部件：

```
var ControlPanel = {

    instance: null,

    options: {
        //Some options here
    },

    simpleFunction: function(){
        alert("I am a function");
    },

    _init: function() {
        //Some init stuff here
    }
}

$.widget("basereality.controlPanel", ControlPanel); // create the widget

//This doesn't appear to work...
$.widget.bridge('controlPanel', $.basereality.controlPanel); //'Bridge' the widget 
```

然后通过执行以下操作创建它的实例：

```
var controlPanelParams = {
  // some options go here
};

var newControlPanel = $('#controlPanel').controlPanel(controlPanelParams); 
```

我现在希望能够在创建的对象上调用方法“simpleFunction”，我尝试这样做：

```
newControlPanel.simpleFunction();
//and 
$(newControlPanel).simpleFunction(); 
```

两者都给出“对象没有称为 simpleFunction 的方法”错误。

那么我做错了什么，你打算如何在基于非功能的对象上使用 $.widget.bridge ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:44:29.940

我想我已经想通了。而不是这个：

```
$(newControlPanel).addControl(smartyControlPanel); 
```

通过将其作为参数调用来访问该函数，如下所示：

```
newControlPanel.controlPanel("addControl", smartyControlPanel); 
```

而且我还将我的代码转换为基于第一个原型的函数：

```
var ControlPanel = function(options, element){
    this.options = options;
    this.element = element;

    this._init();
};

ControlPanel.prototype = {
    //Everything else in here
} 
```

尽管必须将其作为参数调用比直接将其作为函数调用要容易理解得多。

# c# - 获取数组中对象的属性

> ID：14703849
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:17:32.087
> 
> 标签：c#, arrays, object

我这里有个小问题。我有一个数组，其中包含一些对象（具有属性，duh）现在我想通过它们拥有的 int 属性对它们进行排序。我的问题不是如何对它们进行排序，而是如何读取数组中对象的属性值？

```
private void WriteHighscoreToFile(int groesse, int minenAnzahl, int zeit, string name)
{
  using (StreamWriter sw = new StreamWriter(@"C:\Users\tstadler\Desktop\Highscore.txt", true))
  {
    sw.WriteLine("Spieler: " + name + " Punkte: " + (groesse * minenAnzahl - zeit * 2) + " Groesse: " + groesse + " Minenanzahl " + minenAnzahl + " Zeit: " + zeit);
  }

  using (StreamReader sr = new StreamReader(@"C:\Users\tstadler\Desktop\Highscore.txt", true))
  {
    List<CreateNewHighscore> highScores = new List<CreateNewHighscore>();
    while (sr.ReadLine() != null)
    {
      _objectProperties = sr.ReadLine().Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries);
      highScores.Add(new CreateNewHighscore(_objectProperties));
      highscoreCount++;
    }
    _highscoresArray = highScores.ToArray();
    vergleicheArray(_highscoresArray);
  }
} 
```

班上：

```
 public class CreateNewHighscore
      {
        public string _name;
        public int _punkte;
        public int _groesse;
        public int _minenAnzahl;
        public int _zeit;

     public CreateNewHighscore(string[] infos)
     {
       _name = infos[1];
       _punkte = int.Parse(infos[5]) * int.Parse(infos[7]) - 2 * int.Parse(infos[9]);
       _groesse = int.Parse(infos[5]);
       _minenAnzahl = int.Parse(infos[7]);
       _zeit = int.Parse(infos[9]);
     }   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:24:59.370

> 我的问题不是如何对它们进行排序，而是如何读取数组中对象的属性值？

您将其作为属性公开；例如：

```
class CreateNewHighscore
{
    string _name;
    int _punkte, _groesse, _minenAnzahl, _zeit;
    public string Name { get { return _name; } }
    public int Punkte { get { return _punkte; } }
    public int Groesse { get { return _groesse; } }
    public int Zeit { get { return _zeit; } }
    public int MinenAnzahl { get { return _minenAnzahl; } }

    // constructor not shown
} 
```

然后您可以从任何数组/列表访问该成员；例如：

```
highScores.Sort((x,y) => x.Punkte.CompareTo(y.Punkte)); 
```

或者：

```
int firstPunkte = _highscoresArray[0].Punkte; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:19:29.887

使用 LINQ [OrderBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)方法：

```
_highscoresArray = highScores.OrderBy(h => h.Punkte).ToArray(); 
```

您的班级`Punkte`的财产在哪里：`CreateNewHighscore`

```
public int _punkte; // public field

public Punkte // public property
{
   get { return _punkte; }
   set { _punkte = value; } // you may not need setter
} 
```

**顺便说一句**，目前您的班级没有任何属性。只有公共（在您最后一次编辑之后）字段。如果要按字段值排序，则：

```
_highscoresArray = highScores.OrderBy(h => h._punkte).ToArray(); 
```

但我建议您将字段设为私有，或使用自动实现的属性。并重命名你的班级。名称真的很糟糕，听起来像方法名称。

```
public class CreateNewHighscore
{
    public string Name { get; private set; }
    public int Punkte { get; private set; }
    public int Groesse { get; private set; }
    public int MinenAnzahl { get; private set; }
    public int Zeit { get; private set; }

    public CreateNewHighscore(string[] infos)
    {
       // check infos count
       Name = infos[1];
       Punkte = int.Parse(infos[5]) * int.Parse(infos[7]) - 
                2 * int.Parse(infos[9]);
       Groesse = int.Parse(infos[5]);
       MinenAnzahl = int.Parse(infos[7]);
       Zeit = int.Parse(infos[9]);
   } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:25:27.783

您的数组属于类型`CreateNewHighscore[]`，因此如果您想以经典方式访问属性，只需使用以下行。

```
_highscoresArray[i].YourIntProperty 
```

其中“YourIntProperty”是所需的`int`属性。

# django - 渲染以响应 django 中的几个文本框

> ID：14703853
> 
> 赞同：0
> 
> 时间：2013-02-05T09:17:41.180
> 
> 标签：django, forms

几个小时后，我仍然没有弄清楚在这种情况下如何做/思考，我一开始认为这将是最简单的任务..

有一个 html 模板，有七个文本框，每天一个。文本框的名称是当天的名称。我在其中写下文字，然后按提交。

Django 得到它，并将所有内容放入数据库中。一切都很好。

当我再次加载模板时，我希望文本框填充数据库中的数据。但我不知道怎么做，我需要帮助！

我做的第一件事是进行查询并执行render_to_response，但随后我将每个字段渲染了七次，因为它在每个文本框上渲染查询中的所有内容。

如果我的 html 模板中只有一个文本框，则 render_to_response 可以正常工作。但是，当我更改模板中的任何数据并按提交时，所有文本框都具有相同的名称，并且由于 django 无法分隔所有 7 天。

```
{% for activity in activity_data %}     
        Activity  <input type="text" class="textbox" value="{{activity.excercise}}" name="monday" size="12" id="inputField1">  <p>&nbsp;</p>
{% endfor %} 
```

我不知道这有多清楚，如果不让我知道，我会尝试解释更多。欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:42:10.723

这很难看，但您可以使用[`{%cycle%}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#cycle)标记来迭代日期名称。

```
{% for activity in activity_data %}     

 {% cycle 'monday' 'tuesday' 'wednesday' 'thursday' 'friday' 'saturday' 'sunday' as day  silent %}
  Activity  <input type="text" class="textbox" value="{{activity.excercise}}" 
                name="{{day}}" size="12" id="inputField1">  <p>&nbsp;</p>
{% endfor %} 
```

更好的方法是，值`name`来自`activity`对象，这样你就不必操作 for 循环，你可以做一些事情`name="{{activity.day}}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:35:32.170

谢谢！我解决了它作为您的建议，用 ID 而不是当天的真实姓名填充 db 中的名称。效果很好。

# javascript - 如果我单击订单表格，它应该显示而其他表格应该隐藏

> ID：14703855
> 
> 赞同：0
> 
> 时间：2013-02-05T09:17:45.550
> 
> 标签：javascript, html

在此代码中，如果单击订单详细信息，则应显示该表单，如果单击该表单应显示的运输详细信息地址，则应隐藏该表单。但是，这两种形式都显示在我的代码中。

```
 <!DOCTYPE html>
    <html>
       <head>
           <script>
         function orderdetails() {
    document.getElementById('orderdetails').style.display = "block";
       }
         function shippingdetails() {
     document.getElementById('shippingdetails').style.display = "block";
       }
         function ordersummary() {
          document.getElementById('welcomeDiv1').style.display = "block";
           }
          function payment() {
          document.getElementById('welcomeDiv1').style.display = "block";
            }   
     </script>
     </head>

     <body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <a href="javascript:void(0);" value="Show Div" onclick="orderdetails()" >Order                                               Details</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
           <a href="javascript:void(0);" value="Show Div1" onclick="shippingdetails()">Shipping             Details</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         <a href="javascript:void(0);" value="Show Div12" onclick="ordersummary()">Order Summary</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
           <a href="javascript:void(0);" value="Show Div12" onclick="payment()">Payment</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

       <div id="orderdetails"  style="display:none;" class="answer_list" > 
          <table width="200" border="0">
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <h3><u><b>Order Details</b></u></h3>
             <tr>
           <th scope="row"><label>Name*</label></th>
         <td><input name="name" type="text"></td>
          </tr>
          <tr>
           <th scope="row"><label>Email*</label>;</th>
             <td><input name="mail" type="text"></td>
            </tr>
           <tr>
              <th scope="row"><label>Mobile Number*</label></th>
         <td><input name="mobile" type="text"></td>
             </tr>
           <tr>
           <th scope="row"><label>Land Line</label></th>
           <td><input name="phone" type="text"></td>
           </tr>

        </table>

       </div>
          <div id="shippingdetails"  style="display:none;" class="answer_list" > 
           <br/>
             <table width="200" border="0">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <h3><u><b>Shipping Details</b></u></h3>
               <br/>
         <tr>
            <th scope="row"><label>Full Name*</label></th>
            <td><input name="name" type="text"></td>
           </tr>
          <tr>
               <th scope="row"><label>Address*</label></th>
         <td><textarea name="address" cols="" rows=""></textarea></td>
         </tr>
           <tr>
            <th scope="row"><label>Nearest Land Mark*</label>;</th>
           <td><input name="mail" type="text"></td>
          </tr>

         <tr>
            <th scope="row"><label>City</label></th>
           <td><input name="city" type="text"></td>
           </tr>
            <tr>
             <th scope="row"><label>State</label></th>
          <td><form name="form" id="form">
           <select name="jumpMenu" id="jumpMenu" onChange="MM_jumpMenu('parent',this,0)">
    <option>Tamil Nadu</option>
    <option>Kerala</option>
    <option>Orissa</option>
    <option>Delhi</option>
    <option>Andhrs</option>
    <option>Karntaka</option>
  </select>
</form></td>
   </tr>
         <tr>
         <th scope="row"><label>Pin Code*</label></th>
        <td><input name="code" type="text"></td>
               </tr><tr>
          <th scope="row"><label>Mobile Number*</label></th>
          <td><input name="city" type="text"></td>
          </tr><tr>
           <th scope="row"><label>Land Line</label></th>
           <td><input name="city" type="text"></td>
     </tr>
       </table>
     </div>

     </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:21:17.927

不要只显示表单，还要隐藏其他表单。

```
function orderdetails() {
    document.getElementById('orderdetails').style.display = "block";
    document.getElementById('shippingdetails').style.display = "none";
}
function shippingdetails() {
    document.getElementById('shippingdetails').style.display = "block";
    document.getElementById('orderdetails').style.display = "none";
} 
```

为防止用户返回之前的表单，您可以检查他们是否已完成该特定表单。

在您的表单中，为所需项目指定一个类名：

```
<input name="name" type="text" class="order-required">
<input name="mail" type="text" class="order-required">
<input name="mobile" type="text" class="order-required"> 
```

并给“订单详情”链接一个 ID：

```
<a id="orderdetailslink" href="javascript:void(0);" value="Show Div" onclick="orderdetails()" >Order Details</a> 
```

然后`</body>`在“订购详情”中查找所有必填字段：

```
<script>
var elems = document.getElementsByTagName('*'), i, orderRequired = new Array();
for (i in elems) {
    if((' ' + elems[i].className + ' ').indexOf(' ' + 'order-required' + ' ') > -1) {
        orderRequired.push(elems[i]);
    }
}
</script> 
```

最后使用以下函数检查是否应允许用户返回订购详细信息表单。

```
function orderdetailscomplete() {
    for (var i = 0; i < orderRequired.length; i++) {
        if (orderRequired[i].value.length == 0) {
            return false;
        }
    }
    return true;
}
function orderdetails() {
    if (!orderdetailscomplete()) {
        document.getElementById('orderdetails').style.display = "block";
        document.getElementById('shippingdetails').style.display = "none";
    }
}
function shippingdetails() {
    document.getElementById('shippingdetails').style.display = "block";
    document.getElementById('orderdetails').style.display = "none";
    if (orderdetailscomplete()) {
        document.getElementById('orderdetailslink').innerHTML = 'Order Details (completed)';
    }
} 
```

见[小提琴](http://jsfiddle.net/7zMrN/embedded/result/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:02:44.520

除了脚本之外，您的 html 格式严重错误。你真的需要阅读html。[http://validator.w3.org/check](http://validator.w3.org/check)甚至无法继续检查，直到您将该标题移出表格代码

这是我的版本。检查并修复 HTML

```
<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <title>Order form</title>  
<script>
var divs = [];
function show(div) {
  for (var i=0;i<divs.length;i++) {
    document.getElementById(divs[i]).style.display=(div===divs[i])?"block":"none"; 
  }        
}
function MM_jumpMenu() {} // placeholder

window.onload=function() {
  document.getElementById("jumpMenu").onchange=function() {
    MM_jumpMenu('parent',this,0);
  }
  var links=document.getElementById("navigation").getElementsByTagName("a");
  for (var i=0;i<links.length;i++) {
    divs.push(links[i].id.replace("link",""));
    links[i].onclick=function() {
      show(this.id.replace("link",""));
    }
  }    
}
</script>         
  <style>
  ul#navigation {
    float: left;
    margin: 0;
    padding: 0;
    width: 100%;
    background-color: #ccc;
  }
  ul#navigation li { display: inline; }
  ul#navigation li a {
    text-decoration: none;
    padding: .25em 1em;
    border-bottom: solid 1px #39f;
    border-top: solid 1px #39f;
    border-right: solid 1px #39f;
  }
  a:link, a:visited { color: #fff; }
  ul#navigation li a:hover {
    background-color: #fff;
    color:#000;
  }
  .shipping { width:200px; border:0}
  </style>
  </head>         
  <body> 
  <nav>       
    <ul id="navigation">  
      <li><a href="#" value="Show Div"   id="orderdetailslink">Order Details</a></li> 
      <li><a href="#" value="Show Div1"  id="shippingdetailslink">Shipping Details</a></li>             
      <!--li><a href="#" value="Show Div12" id="ordersummarylink">Order Summary</a></li> 
      <li><a href="#" value="Show Div12" id="paymentlink">Payment</a></li -->
    </ul>
  </nav>              
    <div id="orderdetails"  style="display:none;" class="answer_list" >
    <br/>
    <h3><u><b>Order Details</b></u></h3>  
      <table class="shipping">            
        <tr> 
          <th scope="row"><label>Name*</label></th>
          <td><input name="name" type="text"></td>
        </tr>
        <tr> 
          <th scope="row"><label>Email*</label>
          </th>
          <td><input name="mail" type="text"></td>  
        </tr> 
        <tr>    
          <th scope="row"><label>Mobile Number*</label></th>
          <td><input name="mobile" type="text"></td></tr> 
        <tr> 
          <th scope="row"><label>Land Line</label></th>
          <td><input name="phone" type="text"></td></tr>              
      </table>           
    </div>
    <div id="shippingdetails"  style="display:none;" class="answer_list" >   
      <br/>   
     <h3><u><b>Shipping Details</b></u></h3>     
      <table class="shipping">
        <tr>  
          <th scope="row"><label>Full Name*</label></th>
          <td><input name="name" type="text"></td></tr>
        <tr>     
          <th scope="row"><label>Address*</label></th>
          <td><textarea name="address"></textarea></td>             
        </tr> 
        <tr>  
          <th scope="row"><label>Nearest Land Mark*</label></th> 
            <td><input name="mail" type="text"></td>
        </tr>                
        <tr>  
          <th scope="row"><label>City</label></th>
          <td><input name="city" type="text"></td> 
        </tr>  
        <tr>   
          <th scope="row"><label>State</label></th>
          <td>
            <form name="form" id="form"> 
              <select name="jumpMenu" id="jumpMenu">        
                <option>Tamil Nadu</option>        
                <option>Kerala</option>        
                <option>Orissa</option>        
                <option>Delhi</option>        
                <option>Andhrs</option>        
                <option>Karntaka</option>      
              </select>    
            </form></td>       
        </tr>             
        <tr>             
          <th scope="row"><label>Pin Code*</label></th>
          <td><input name="code" type="text"></td>     
        </tr>
        <tr>
          <th scope="row"><label>Mobile Number*</label></th>
          <td><input name="city" type="text"></td>
        </tr>
        <tr> 
          <th scope="row"><label>Land Line</label></th>
          <td><input name="city" type="text"></td>         
        </tr>           
      </table>         
    </div>         
  </body>          
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:22:08.590

您需要编写一个代码来隐藏打开的表单。你可以这样做：

```
function closeAll() {
     document.getElementById('orderdetails').style.display = "none";
     document.getElementById('shippingdetails').style.display = "none";
     document.getElementById('welcomeDiv1').style.display = "none";
}
function orderdetails() {
   closeAll();
   document.getElementById('orderdetails').style.display = "block";
}
function shippingdetails() {
     closeAll();
     document.getElementById('shippingdetails').style.display = "block";
}
function ordersummary() {
   closeAll();
   document.getElementById('welcomeDiv1').style.display = "block";
}
function payment() {
    closeAll()
    document.getElementById('welcomeDiv1').style.display = "block";
} 
```

请参阅隐藏所有 div 的 closeAll 函数。只是为了不寻找打开的div。我也关闭了welcomeDiv1。不确定你是否需要那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:25:02.863

好吧，如果您想一次显示一个表单，您应该最初隐藏它们并只显示第一个出现的表单。

然后在每个功能中，您应该隐藏其他功能。到目前为止，Fangel 有更好的解决方案。

两个提示：

1.  删除所有这些空格 ( ) 并尝试使用一些 css。
2.  对于 javascript，我建议您使用一些 js 框架，例如 jQuery。

祝你好运！

# asp.net - 错误：由于以下错误而失败：80040154 当我调用 Req() 类时

> ID：14703856
> 
> 赞同：1
> 
> 时间：2013-02-05T09:17:48.213
> 
> 标签：asp.net, hp-quality-center

我使用 HP 的 OTAClient.dll 与 Quality Center 连接。我的连接是正确的：

```
TDConnection tdCon = new TDConnection();
tdCon.InitConnectionEx("http://....");
tdCon.Login("username", "userpass");
tdCon.Connect("****", "********"); 
```

但在这方面我得到错误：

```
Req newReq = new Req(); 
```

我在 x86 中设置了平台目标，但没有帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:43:32.150

代替`COM`对象使用其余库。`Req`您可以发送带有参数的 xml 文档，用于在 QC中创建和更新需求 ( )。您可以在 QC 中找到文档。您将使用`"post"`方法 by`HttpWebRequest`来创建和更新，`"get"`方法来获取会话参数。在其余库中寻找创建实体描述。为了保持连接，您必须保存 QCSessionId。查看身份验证说明。祝你好运！

# sql - 物化视图与主表的查询性能

> ID：14703857
> 
> 赞同：0
> 
> 时间：2013-02-05T09:18:00.943
> 
> 标签：sql, performance, oracle, materialized-views

我害怕数据库中的奇怪行为，在我的主表`UDBMOVEMENT_ORIG`（26mil.rows）和`UDBIDENTDATA_ORIG`（18mil.rows）上创建了满足这些主表的一些默认条件和连接条件的物化视图`TMP_MS_UDB_MV`（`UDBMOVEMENT`是该对象的同义词）。MV 有大约 1200 万行。我创建了 MV 来查询不太大的对象，MV 得到 3GB，主表总共 12GB。但我不明白即使物理读取和一致获取在 MV 上也比在主表上少，主表上的最终执行时间更短。请参阅下面的我的日志。

为什么？

```
SQL> set echo on
SQL> @flush
SQL> alter system flush buffer_cache;

System altered.

Elapsed: 00:00:00.20
SQL> alter system flush shared_pool;

System altered.

Elapsed: 00:00:00.65
SQL> SELECT
2 UDBMovement.zIdDevice, UDBMovement.sDevice, UDBMovement.zIdLocal, UDBMovement.sComputer, UDBMovement.tActionTime, UDBIdentData.sCardSubType, UDBIdentData.sCardType, UDBMovement.cEpan, UDBMovement.cText, UDBMovement.lArtRef, UDBMovement.sArtClassRef, UDBMovement.lSequenz, UDBMovement.sTransMark, UDBMovement.lBlock, UDBMovement.sTransType, UDBMovement.lGlobalID, UDBMovement.sFacility, UDBIdentData.sCardClass, UDBMovement.lSingleAmount, UDBMovement.sVAT, UDBMovement.lVATTot, UDBIdentData.tTarifTimeStart, UDBIdentData.tTarifTimeEnd, UDBIdentData.cLicensePlate, UDBIdentData.lMoneyValue, UDBIdentData.lPointValue, UDBIdentData.lTimeValue, UDBIdentData.tProdTime, UDBIdentData.tExpireDate
3 FROM UDBMOVEMENT_orig UDBMovement, Udbidentdata_orig UDBIdentData
4 WHERE
5 UDBMovement.lGlobalId = UDBIdentData.lGlobalRef(+) AND UDBMovement.sComputer = UDBIdentData.sComputer(+)
6 AND UDBMovement.sTransType > 0 AND UDBMovement.sDevice < 1000 AND UDBMovement.sDevice>= 0 AND UDBIdentData.sCardType IN (2) AND (bitand(UDBMovement.sSaleFlag,1) = 0 AND bitand(UDBMovement.sSaleFlag,4) = 0) AND UDBMovement.sArtClassRef < 100
7 AND UDBMovement.tActionTime >= TO_DATE('05/05/2011 00:00:00', 'dd/mm/yyyy hh24:mi:ss') + 0.25 AND UDBMovement.tActionTime < TO_DATE('05/05/2011 00:00:00', 'dd/mm/yyyy hh24:mi:ss') + 0.5
8 ORDER BY tActionTime, lBlock, lSequenz;

4947 rows selected.

Elapsed: 00:00:15.84

Execution Plan
Plan hash value: 1768406139

Id   Operation   Name    Rows    Bytes  TempSpc  Cost (%CPU)     Time

0    SELECT STATEMENT        7166    1238K       20670 (1)   00:04:09
1    SORT ORDER BY       7166    1238K   1480K   20670 (1)   00:04:09
2    NESTED LOOPS                        
3    NESTED LOOPS        7166    1238K       20388 (1)   00:04:05
* 4  TABLE ACCESS BY INDEX ROWID     UDBMOVEMENT_ORIG    7142    809K        7056 (1)    00:01:25
* 5  INDEX RANGE SCAN    IDX_UDBMOVARTICLE   10709           61 (0)  00:00:01
* 6  INDEX UNIQUE SCAN   UDBIDENTDATA_PRIM   1           1 (0)   00:00:01
* 7  TABLE ACCESS BY INDEX ROWID     UDBIDENTDATA_ORIG   1   61      2 (0)   00:00:01

Predicate Information (identified by operation id):

4 - filter("UDBMOVEMENT"."STRANSTYPE">0 AND "UDBMOVEMENT"."SDEVICE"<1000 AND
BITAND("SSALEFLAG",1)=0 AND "UDBMOVEMENT"."SDEVICE">=0 AND BITAND("UDBMOVEMENT"."SSALEFLAG",4)=0)
5 - access("UDBMOVEMENT"."TACTIONTIME">=TO_DATE(' 2011-05-05 06:00:00', 'syyyy-mm-dd
hh24:mi:ss') AND "UDBMOVEMENT"."TACTIONTIME"<TO_DATE(' 2011-05-05 12:00:00', 'syyyy-mm-dd
hh24:mi:ss') AND "UDBMOVEMENT"."SARTCLASSREF"<100)
filter("UDBMOVEMENT"."SARTCLASSREF"<100)
6 - access("UDBMOVEMENT"."LGLOBALID"="UDBIDENTDATA"."LGLOBALREF" AND
"UDBMOVEMENT"."SCOMPUTER"="UDBIDENTDATA"."SCOMPUTER")
7 - filter("UDBIDENTDATA"."SCARDTYPE"=2)
Statistics
543 recursive calls
0 db block gets
84383 consistent gets
4485 physical reads
0 redo size
533990 bytes sent via SQL*Net to client
3953 bytes received via SQL*Net from client
331 SQL*Net roundtrips to/from client
86 sorts (memory)
0 sorts (disk)
4947 rows processed

SQL> @flush
SQL> alter system flush buffer_cache;

System altered.

Elapsed: 00:00:00.12
SQL> alter system flush shared_pool;

System altered.

Elapsed: 00:00:00.74
SQL> SELECT UDBMovement.zIdDevice, UDBMovement.sDevice, UDBMovement.zIdLocal, UDBMovement.sComputer, UDBMovement.tActionTime, UDBMovement.sCardSubType, UDBMovement.sCardType, UDBMovement.cEpan, UDBMovement.cText, UDBMovement.lArtRef, UDBMovement.sArtClassRef, UDBMovement.lSequenz, UDBMovement.sTransMark, UDBMovement.lBlock, UDBMovement.sTransType, UDBMovement.lGlobalID, UDBMovement.sFacility, UDBMovement.sCardClass, UDBMovement.lSingleAmount, UDBMovement.sVAT, UDBMovement.lVATTot, UDBMovement.tTarifTimeStart, UDBMovement.tTarifTimeEnd, UDBMovement.cLicensePlate, UDBMovement.lMoneyValue, UDBMovement.lPointValue, UDBMovement.lTimeValue, UDBMovement.tProdTime
2 FROM UDBMOVEMENT WHERE
3 UDBMovement.sTransType > 0 AND UDBMovement.sDevice < 1000 AND UDBMovement.sDevice>= 0 AND UDBMovement.sCardType IN (2) AND (bitand(UDBMovement.sSaleFlag,1) = 0 AND bitand(UDBMovement.sSaleFlag,4) = 0) AND UDBMovement.sArtClassRef < 100
4 AND UDBMovement.tActionTime >= TO_DATE('05/05/2011 00:00:00', 'dd/mm/yyyy hh24:mi:ss') + 0.25
5 AND UDBMovement.tActionTime < TO_DATE('05/05/2011 00:00:00', 'dd/mm/yyyy hh24:mi:ss') + 0.5 ORDER BY tActionTime, lBlock, lSequenz;

4947 rows selected.

Elapsed: 00:00:26.46

Execution Plan
Plan hash value: 3648898312

Id   Operation   Name    Rows    Bytes   Cost (%CPU)     Time

0    SELECT STATEMENT        2720    443K    2812 (1)    00:00:34
1    SORT ORDER BY       2720    443K    2812 (1)    00:00:34
* 2  MAT_VIEW ACCESS BY INDEX ROWID  TMP_MS_UDB_MV   2720    443K    2811 (1)    00:00:34
* 3  INDEX RANGE SCAN    EEETMP_MS_ACTTIMEDEVICE     2732        89 (0)  00:00:02

Predicate Information (identified by operation id):

2 - filter("UDBMOVEMENT"."STRANSTYPE">0 AND BITAND("UDBMOVEMENT"."SSALEFLAG",4)=0 AND
BITAND("SSALEFLAG",1)=0 AND "UDBMOVEMENT"."SARTCLASSREF"<100)
3 - access("UDBMOVEMENT"."TACTIONTIME">=TO_DATE(' 2011-05-05 06:00:00', 'syyyy-mm-dd
hh24:mi:ss') AND "UDBMOVEMENT"."SDEVICE">=0 AND "UDBMOVEMENT"."SCARDTYPE"=2 AND
"UDBMOVEMENT"."TACTIONTIME"<TO_DATE(' 2011-05-05 12:00:00', 'syyyy-mm-dd hh24:mi:ss') AND
"UDBMOVEMENT"."SDEVICE"<1000)
filter("UDBMOVEMENT"."SCARDTYPE"=2 AND "UDBMOVEMENT"."SDEVICE"<1000 AND
"UDBMOVEMENT"."SDEVICE">=0)
Statistics
449 recursive calls
0 db block gets
6090 consistent gets
2837 physical reads
0 redo size
531987 bytes sent via SQL*Net to client
3953 bytes received via SQL*Net from client
331 SQL*Net roundtrips to/from client
168 sorts (memory)
0 sorts (disk)
4947 rows processed

SQL> spool off 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:52:01.650

我假设所有表/MV 都收集了适当的统计信息。

如果您查看第一个查询的计划，您会看到我们有一个 RANGE SCAN `UDBMOVEMENT_ORIG`，然后对于通过 where 子句找到的每一行，我们有一个 INDEX UNIQUE SCAN 朝向`UDBIDENTDATA_ORIG`（可能是它的 PK）。请注意，Oracle 已将您的 OUTER JOIN 转换为标准的 INNER JOIN（嵌套循环）。

第一步返回几行（<10k），因此第二步几乎没有时间。所以我们可以假设第一个查询的大部分工作都花在寻找与 where 子句的条件匹配的行上。数据库选择使用`IDX_UDBMOVARTICLE`索引。我们缺少它的定义，但`TACTIONTIME, SARTCLASSREF`由于查询计划，我们可以猜测它覆盖了列 ( )。

第二个查询是直接的`RANGE INDEX SCAN`，我们再次错过了索引定义，但我们可以再次猜测它涵盖了列 ( `TACTIONTIME, SDEVICE, SCARDTYPE, SDEVICE`)。

* * *

我的结论是您在原始表及其 MV 上没有相同的索引，因此您看到查询时间（苹果和橙子）的差异也就不足为奇了。*具有讽刺意味的是，对于这个查询*，较小的原始索引比它的对应索引更合适。

我还要指出，数据库非常擅长**加入**，并且在大多数查询中，您只会看到预加入表的边际收益。有时您甚至可能会看到负收益，因为 MV 将被去规范化，因此更大（因此全扫描成本更高）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:34:19.137

如果您查看排序统计信息，较慢的查询执行的排序数几乎是较快的查询的两倍：

`86 sorts (memory)`

对比

`168 sorts (memory)`

这将在某种程度上解释为什么第二个查询较慢，尽管我怀疑排序本身就是全部原因。时间增加的原因可能与文森特确定的指标不同有关。我怀疑有很多原因加起来会使其整体变慢。

# css - CSS边距加起来还是合并？

> ID：14703858
> 
> 赞同：20
> 
> 时间：2013-02-05T09:18:02.800
> 
> 标签：css, margin

假设我们有以下代码：

```
<div style="margin-bottom:100px;">test</div>
<div style="margin-top:100px;">test</div> 
```

我注意到有时它会在元素之间创建 100 像素的边距，有时是 200 像素（当我们使用我不熟悉的某些设置时）。我在规范中找不到任何相关信息。这取决于什么？

如果我们在一个空白文档中有`h1`并且的边距将与 的边距相结合。他们不会加起来。将使用较大的那个。`p``h1``p`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T09:31:39.947

发生这种情况是因为您的利润被允许崩溃。某些边距可能重叠（主要是块元素）并形成由计算元素样式规则中定义的两个值中的较大者定义的组合边距 - 这就是这里发生的事情。[CSS Box Model](http://dev.w3.org/csswg/css3-box/)文档中的[这一部分](http://dev.w3.org/csswg/css3-box/#collapsing-margins)详细解释了它。

**编辑：**作为一个兴趣点，您可以通过几种方式解决这个问题（即打破可折叠的边距）而不破坏事物（*很多？ ）*

*   制作元素`width: 100%; display: inline-block`
*   在元素之间放置一个`height: 0; width: 0; overflow: hidden`块并在其中放置一个点或其他东西。

我叉了阿什利的[小提琴](http://jsfiddle.net/Yjnk4/)来演示。可能还有其他方法，但如果需要，这些方法是一种快速绕过可折叠边距的肮脏方法。

# java - 使用没有 sql 的 java 访问 CSV 文件中的数据

> ID：14703860
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:18:10.600
> 
> 标签：java, sql, csv

如何访问 CSV 文件中的数据，例如我想要来自某个单元格的数据并将其存储在变量中，但不使用 SQL。任何参考资料也很适合阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:54:02.430

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import au.com.bytecode.opencsv.CSVReader;

public class CsvFileReader {
    public static void main(String[] args) {

        try {
            System.out.println("\n**** readLineByLineExample ****");
            String csvFilename = "C:/Users/hussain.a/Desktop/temp/20130128.csv";
            CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
            String[] col = null;
            while ((col = csvReader.readNext()) != null) {
                System.out.println(col[0] + " # " + col[1]);
                //System.out.println(col[0]);
            }
            csvReader.close();
        } catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

[你可以从这里](http://mirrors.ibiblio.org/pub/mirrors/maven2/milyn/opencsv/1.6/opencsv-1.6.jar)附上罐子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:55:32.840

您需要打开 CSV 文件，通过 CSV 解析器运行它，并使用解析器上的 API 来提取您需要的任何信息。

[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

# load - 快速加载以提高性能

> ID：14703863
> 
> 赞同：0
> 
> 时间：2013-02-05T09:18:19.540
> 
> 标签：load, startup

我有一个应用程序可以做一些工作（从网络服务器请求数据，解析它，然后返回重要的东西）。虽然整个过程不超过 1 秒，但应用程序的启动时间相当长（可能大约 5 秒）。

我希望能够在后台运行我的应用程序并从其他地方传递 URL，这样我就可以避免启动时间。我首先想到了 IPC，但后来我需要另一个应用程序，它也会有一些启动时间（所以这并不完美）。

然后我想到了 qBus，但该应用程序也可以在 Windows 上运行（是否有可能在 Windows 上拥有类似 qBus 的东西？）。所以，这也不是解决方案。

我的问题是：如何与我的应用程序“交谈”（如“获取此 URL，处理它并给我重要数据”）避免不必要的启动时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:33:09.943

我能想到的几个选项：

*   [工业PC](http://en.wikipedia.org/wiki/Inter-process_communication)

另一个应用程序的启动时间应该是几分之一秒，如果不是，那么你做错了什么。

*   标准输入

需要手动将其提供给应用程序（可能是 IPC 的一个选项，但不是最佳选项），不适用于 bash 脚本。

*   您的程序定期检查的外部文件（更新或存在）

也许不是最优雅的解决方案，但易于实现，您可以手动打开它，在 bash 脚本中将文本传送到它，或将其用于 IPC。

# codeigniter - 相关数据form_dropdown codeigniter

> ID：14703864
> 
> 赞同：0
> 
> 时间：2013-02-05T09:18:19.673
> 
> 标签：codeigniter

我正在尝试在 form_dropdown('') 中使用 javascript 发布价值，但它没有在表单上发布数据。已加载 Jquery 库。在警报时它显示 dep_selected 的记录

JQUERY 在查看页面

```
function get_subdepartment() {
var dep_selected = $('select[name=txtDept]').val();
$.ajax({
    data: {
        dep_selected: dep_selected,
    },
    type: 'POST',
    url: 'addVacancy/getSubDept',
    success: function(data){ //alert(dep_selected);
        console.log(data);
        $('.subdepartment').html(data);
    }
}) 
```

}

控制器页面：

```
 function getSubDept(){
        if($this->input->post('txtDept')){
            echo "getSubDept > Dept: ".$this->input->post('txtDept');
        }
        else{
            echo "getSubDept > No Return";
        }
    } 
```

它显示“getSubDept > No Return”请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:30:29.057

很明显，在您的控制器中，您通过 key 请求发布值`txtDept`，但是当您使用 AJAX 发送数据时您没有。你现在拥有的是：

```
var dep_selected = $('select[name=txtLocation]').val(); 
```

和

```
data: {
    dep_selected: dep_selected,
}, 
```

因此，您只需将控制器方法中的第一行更改为

```
if($this->input->post('dep_selected')) { 
```

我建议您阅读有关使用 AJAX 发布值以及如何使用 JSON 的内容。

# android - MapView 在安卓上不起作用

> ID：14703876
> 
> 赞同：1
> 
> 时间：2013-02-05T09:19:00.710
> 
> 标签：android, google-maps, api-key

我有这个清单文件

> ```
>  <permission
>             android:name="com.mine.signedgooglemap.permission.MAPS_RECEIVE"
>             android:protectionLevel="signature" />
> 
>     <uses-feature
>             android:glEsVersion="0x00020000"
>             android:required="true" />
> 
>     <uses-permission android:name="com.mine.signedgooglemap.permission.MAPS_RECEIVE" />
>     <uses-permission android:name="android.permission.INTERNET" />
>     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
>     <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" 
> ```
> 
> />

有了这个活动

```
package com.mine.signedgooglemap;

import android.app.Activity;
import android.os.Bundle;
import com.google.android.maps.MapActivity;

public class signedgooglemapActivity extends MapActivity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;  //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

我的 main.xml 文件是

> ```
> <com.google.android.maps.MapView
>         xmlns:android="http://schemas.android.com/apk/res/android"
>         android:id="@+id/mapview"
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"
>         android:clickable="true"
>         android:apiKey="AIzaSyC0WDs0wXDuGwTipv6hDnbnIOObL9oR0Ms"
>         /> 
> ```

我用我的密钥库签署应用程序然后我得到我的密钥库的 sha1 指纹并让谷歌控制台使用这条线 5B:66:36:BB:AE:44:3B:36:52:2D:88:6F 生成新的 api 密钥:A3:44:AD:3C:E4:0F:AB:5D;com.mine.signedgooglemap

我在调试器中收到此消息

> 02-05 10:56:15.228：WARN/System.err(873)：IOException 处理：26 02-05 10:56:15.228：WARN/System.err(873)：java.io.IOException：服务器返回：3 02-05 10:56:15.234: WARN/System.err(873): 在 android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115) 02-05 10:56:15.248: WARN/ System.err(873): 在 android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473) 02-05 10:56:15.254: WARN/System.err(873): 在 android_maps_conflict_avoidance .com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117) 02-05 10:56:15.268：WARN/System.err(873)：在 android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher。服务请求（DataRequestDispatcher.java：994) 02-05 10:56:15.274: WARN/System.err(873): 在 android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702) 02-05 10:56: 15.274: WARN/System.err(873): 在 java.lang.Thread.run(Thread.java:1020)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:22:37.097

你试过添加

```
<uses-library android:name="com.google.android.maps" /> 
```

在你的清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:21:52.460

还将这个库包含到你的主文件中：

```
 <uses-library android:required="true" android:name="com.google.android.maps" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:32:59.863

要设置清单，请遵循[此处列出的所有规范](https://developers.google.com/maps/documentation/android/start?hl=en)

也`MapActivity`被折旧，如此处所示。研究使用[`MapFragment`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment)与 Google Maps API v 2 兼容的版本。

# java - Java中的时区

> ID：14703878
> 
> 赞同：0
> 
> 时间：2013-02-05T09:19:05.393
> 
> 标签：java, javascript

这可能是一个非常基本的问题，但我找不到任何令人满意的答案。希望我对 stackoverflow 的疑惑能得到澄清。

Q 1\. **假设我有时间在不同的时区，我想把它转换成不同的时区，用 Java 怎么做？**

Q 2.**有没有办法使用 JavaScript 获取时区？**

Q 3.**时区只是特定区域中时间的表示，但实际上每个区域都是同时的，只是表示方式可能会因地理条件而异。**-*这种理解正确*吗？

可能的重复[链接](https://stackoverflow.com/questions/9867254/java-timezone-why-different-timezone-give-same-value-in-millisec)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:24:13.133

> 假设我在不同的时区有时间，并且想将其转换为不同的时区，那么在 Java 中如何做到这一点？

创建一个格式化程序并在其中设置时区。

在内部，`java.util.Date`仅存储自 UTC 时区 Epoch 以来的毫秒数。当您使用`Date.toString()`或`new SimpleDateFormat()`不使用时区时，将使用 VM 的默认时区。

所以从某种意义上说，Java 总是转换为您当前/默认的时区（除非您碰巧在 UTC 中）。

> 有没有办法使用 Java Script 获取时区？

这取决于。您可以使用`getTimezoneOffset()`，但这只会为您提供偏移量。没有获取客户端操作系统时区 ID 的 API（如`UTC`、`Europe/Berlin`等）

> 时区只是时间的表示......

并不真地。看上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T00:06:19.247

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T12:01:26.233

我可以回答您的第二个问题并纠正 Aaron Digulla 非常完整的回答

> 有没有办法使用 Java Script 获取时区？

尝试使用这个库，它将返回一个具有特定限制的 TimeZone ID（在开发人员页面中提到）：

[https://bitbucket.org/pellepim/jstimezonedetect](https://bitbucket.org/pellepim/jstimezonedetect)

# ruby - 如何在 Rails 3 应用程序中将 ThemeRoller ui-lightness 主题添加到我的数据表中？

> ID：14703879
> 
> 赞同：1
> 
> 时间：2013-02-05T09:19:13.840
> 
> 标签：ruby, ruby-on-rails-3

在我的 Web 应用程序中，我使用数据表来显示数据。我已经使用[This](http://railscasts.com/episodes/340-datatables) gem 来实现这一点，并且还遵循[了这一集形式 RailsCasts](http://railscasts.com/episodes/340-datatables?view=asciicast)。现在我的表格看起来与 RailsCasts 剧集中显示的完全一样。

但我想像这样展示[它](http://datatables.net/styling/themes/ui-lightness)。但是我在互联网上搜索但没有得到任何关于此的材料。那么如何做到这一点呢？

# c# - EF Code First 多对多关系 - 将重复记录插入数据库

> ID：14703885
> 
> 赞同：4
> 
> 时间：2013-02-05T09:19:32.030
> 
> 标签：c#, entity-framework, ef-code-first

我有一个第三方服务，我从中获取大量数据，我想将这些信息存储在我的本地数据库中。假设我的数据库**User**、**Role**和**UserRole**中有 3 个表。

1.  User 表包含以下字段 - UserId(PK)、UserName。
2.  角色表包含​​以下字段 - RoleId(PK)、RoleName。
3.  UserRole 表包含以下字段 - UserId(FK),RoleId(FK)。

所以用户和角色表之间存在**多对多**关系。

当我尝试将以下记录保存到数据库时，它会在**角色**表中生成重复记录。

```
using (CFAContext context = new CFAContext())
{
    context.Users.Add(new User { UserName = "User 1", Roles = new List<Role> { new Role { RoleName = "Role 1" }, new Role { RoleName = "Role 2" }, new Role { RoleName = "Role 3" } } });
    context.Users.Add(new User { UserName = "User 2", Roles = new List<Role> { new Role { RoleName = "Role 1" }, new Role { RoleName = "Role 2" } } });
    context.Users.Add(new User { UserName = "User 3", Roles = new List<Role> { new Role { RoleName = "Role 1" }, new Role { RoleName = "Role 4" } } });
    context.SaveChanges();
} 
```

如何将此列表插入数据库（用户和角色），而**用户**和**角色**表中没有任何重复记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:28:29.827

我猜这些`RoleId`字段是唯一标识符，因此对于您添加的每个角色，您将在`RoleId`创建新`Role`实例时在数据库中获得具有不同字段的新记录。

如果您将代码更改为以下内容，它将起作用；

```
Role role1 = new Role { RoleName = "Role 1" }
Role role2 = new Role { RoleName = "Role 2" }
Role role3 = new Role { RoleName = "Role 3" }
Role role4 = new Role { RoleName = "Role 4" }

context.Users.Add(new User { UserName = "User 1", Roles = new List<Role> { role1, role2, role3 } });
    context.Users.Add(new User { UserName = "User 2", Roles = new List<Role> { role1,role2 } });
    context.Users.Add(new User { UserName = "User 3", Roles = new List<Role> { role1, role4 } });
    context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:25:52.423

您正在新建 3 个名为“角色 1”的角色，我将在角色表中创建此记录，并在您需要将其分配给用户时简单地检索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:29:41.573

下面的代码创建了 4 个新角色。如果执行两次，则 db 中将有 8 个角色。如果您不希望角色在其他执行中重复，您应该从上下文中选择它们。

```
using (CFAContext context = new CFAContext())
{
    var roles = new List<Role> {
      new Role { RoleName = "Role 1" },
      new Role { RoleName = "Role 2" },
      new Role { RoleName = "Role 3" },
      new Role { RoleName = "Role 4" }
    };

    context.Users.Add(new User { UserName = "User 1", Roles = new List<Role> { roles[0], roles[1], roles[2] } });
    context.Users.Add(new User { UserName = "User 1", Roles = new List<Role> { roles[0], roles[1] } });
    context.Users.Add(new User { UserName = "User 1", Roles = new List<Role> { roles[0], roles[3] } });
    context.SaveChanges();
} 
```

顺便说一句，你的 RoleId 怎么样？

# iphone - 从 iPhone 4 英寸屏幕 xib 在 iPhone 3.5" 模拟器中更改视图框架

> ID：14703886
> 
> 赞同：0
> 
> 时间：2013-02-05T09:19:34.807
> 
> 标签：iphone, iphone-5, viewdidload, viewwillappear

我将 viewcontroller XIB 制作为 4" 视网膜屏幕，并在底部放置了一个自定义视图。
我在 iPhone4 3.5" 模拟器上运行该应用程序。
大多数 iPhone 版本都应该支持我的应用程序，所以我在视图控制器的 viewdidload 上设置了视图的框架。我本来打算第一次隐藏视图，结果视图的框架设置为`{{-320, 401}, {320, 147}}.`
但是在viewwillappear中，我发现视图的框架被重置为`{{0, 313}, {320, 147}}`。

我想知道为什么这个框架会自动更改。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T06:42:23.963

```
Try This Code

+(BOOL)isDeviceiPhone5
{
    BOOL iPhone5 = FALSE;

    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        // code for 4-inch screen
        iPhone5 = TRUE;
    }
    else
    {
        iPhone5 = FALSE;
        // code for 3.5-inch screen
    }
    return iPhone5;

}

+(CGRect )getFrameFor_iPhone4_height:(CGRect)frame
{
    frame.size.height = frame.size.height - 87.0;
    return frame;
}
+(CGRect )getFrameFor_iPhone4_yPos:(CGRect)frame
{
    frame.origin.y = frame.origin.y - 87.0;
    return frame;
} 
```

# c# - Linq 选择日期 + 1 的时间

> ID：14703887
> 
> 赞同：0
> 
> 时间：2013-02-05T09:19:37.067
> 
> 标签：c#, linq

在我的 SQL 2008 R2 中，我有这张表：

![在此处输入图像描述](../Images/db6ec987857eec548184c1713d8c0c14.png)

我创建了 LINQ 语法来选择所有大于计算机时间的时间：

```
 public IList<LS_CLIENTHORRAIRE> Get_All_Obj(string CLIENT_ID)
        {
            try
            {
                IList<LS_CLIENTHORRAIRE> LesListe;
                using (Soft8Exp_ClientEntities oEntite_T = new Soft8Exp_ClientEntities())
                {
                    int The_Hour = DateTime.Now.Hour;
                    var query = from o in oEntite_T.LS_CLIENTHORRAIRE where o.CLIENT_ID == CLIENT_ID && o.HORRAIRE > new TimeSpan(The_Hour, 00/*minutes*/, 00/*seconds*/) select o;
                    LesListe = query.ToList();
                }
                return LesListe;
            }
            catch (Exception excThrown)
            {
                throw new Exception("Err_02", excThrown);
            }
        } 
```

它工作正常：

*   当小时计算机`08:00`然后它返回`12:00`并且`19:00`，
*   当小时计算机`13:00`然后它返回`19:00`。

但现在我还想更改查看日期的程序：

*   当小时计算机`08:00`然后它返回`12:00`and`19:00`和`05:00`。
*   当小时计算机`13:00`然后它返回`19:00`和`05:00`。
*   当小时计算机`20:00`然后它返回`05:00`。

任何想法 ？

我试过这样：

```
 DateTime The_Date = DateTime.Now.Date;
                    var query = from o in oEntite_T.LS_CLIENTHORRAIRE where o.CLIENT_ID == CLIENT_ID && The_Date.Add(o.HORRAIRE) > DateTime.Now select o;
                    LesListe = query.ToList( 
```

);

但不幸的是它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:47:48.427

```
var query = oEntite_T.LS_CLIENTHORRAIRE
                .Where(o => o.CLIENT_ID == CLIENT_ID &&
                      (o.HORRAIRE > DateTime.Now.TimeOfDay || 
                       o.HORRAIRE.Hours == 5)); 
```

这将使该方法的行为像您想要的那样。虽然我不明白，为什么你想要 5:00 返回，即使它实际上小于`DateTime.Now = 13:00`.

我认为您的表格缺少日期信息，这使得逻辑中断。

# iphone - 在 JSON 中是什么意思

> ID：14703888
> 
> 赞同：0
> 
> 时间：2013-02-05T09:19:41.720
> 
> 标签：iphone, ios, objective-c, json

```
{
    "messageshow": [
        {
            "message_id": "497",
            "message": "http://flur.p-sites.info/api/messages/voice/1360076234.caff",
            "message_pic": "<UIImage: 0xa29e160>",
            "uid": "44",
            "created": "4 hours ago",
            "username": "pari",
            "first_name": "pp",
            "last_name": "pp",
            "profile_pic": "http://flur.p-sites.info/api/uploads/13599968121.jpg",
            "tag_user": {
                "tags": [
                    {
                        "message": "false"
                    }
                ]
            },
            "boos_list": {
                "booslist": [
                    {
                        "message": "false"
                    }
                ]
            },
            "aplouds_list": {
                "aploudslist": [
                    {
                        "message": "false"
                    }
                ]
            },
            "total_comments": 0,
            "total_boos": 0,
            "total_applouds": 0
        },
        {
            "message_id": "496",
            "message": "http://flur.p-sites.info/api/messages/voice/1360076182.caff",
            "message_pic": "<UIImage: 0xa3b0610>",
            "uid": "44",
            "created": "4 hours ago",
            "username": "pari",
            "first_name": "pp",
            "last_name": "pp",
            "profile_pic": "http://flur.p-sites.info/api/uploads/13599968121.jpg",
            "tag_user": {
                "tags": [
                    {
                        "message": "false"
                    }
                ]
            },
            "boos_list": {
                "booslist": [
                    {
                        "message": "false"
                    }
                ]
            },
            "aplouds_list": {
                "aploudslist": [
                    {
                        "message": "false"
                    }
                ]
            },
            "total_comments": 0,
            "total_boos": 0,
            "total_applouds": 0
        }
    ]
} 
```

在这`JSON`一切的价值都出现在**“”**引号中，但很少`tags`有没有任何**引号**的出现，这表明了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:27:12.827

**JSON 显示不带引号的值，它认为是数字值..**

**对于 JSON 初学者：**

**JSON 语法规则**

JSON 语法是 JavaScript 对象表示法语法的子集：

*   数据在名称/值对中
*   数据用逗号分隔
*   花括号容纳对象
*   方括号包含数组

`JSON`数据被写为名称/值对。

名称/值对由字段名称（双引号）、冒号和值组成：

```
"firstName" : "John" 
```

这很容易理解，相当于 JavaScript 语句：

```
firstName = "John" 
```

**JSON 值可以是：**

*   一个数字（整数或浮点数）
*   一个字符串（双引号）
*   布尔值（真或假）
*   一个数组（在方括号中）
*   一个对象（在大括号中）
*   空值

**JSON对象：**

JSON 对象写在大括号内，

对象可以包含多个名称/值对：

```
{ "firstName":"John" , "lastName":"Doe" } 
```

这也很容易理解，相当于 JavaScript 语句：

```
firstName = "John"
lastName = "Doe" 
```

**JSON 数组：** `JSON`数组写在方括号内。

一个数组可以包含多个对象：

```
{
"employees": [
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
]
} 
```

**在上面的例子**中，对象`"employees"`是一个包含三个对象的数组。每个对象都是一个人的记录（*有名字和姓氏*）。

这是基本的`JSON`

如需更多了解，请[参阅本网站。](http://www.json.org/) **谢谢**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:22:54.617

没有双引号的标签是整数值或布尔值或 NULL。

以 [] 方括号开头的标签是数组。

以 {} 开头的标签是属性/值内的 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:23:50.110

这取决于值的类型。如果该值是数字类型，***则不***带引号。
如果它不是数字类型，则***带有***引号（例如`Strings`，就像您的示例中的大多数一样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:21:44.690

除了字符串之外，JSON 还支持数值。因此，在这种情况下，不带引号的值仅被视为数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:22:24.557

它们是数值。根据[JSON](http://www.json.org/)文档：

> 值可以是双引号中的字符串、数字、true 或 false 或 null，也可以是对象或数组。这些结构可以嵌套。

# events - DDD 事件和抽象基类

> ID：14703893
> 
> 赞同：0
> 
> 时间：2013-02-05T09:19:47.703
> 
> 标签：events, domain-driven-design, abstract-class, base-class

我目前正在实现多个共享公共属性并且基本相同的事件：模板。我们的事件提供程序应用了一些事件，例如 SomeTemplateAddedEvent 和 SomeOtherTemplateAddedEvent。以后可能会有更多的变化，所以我正在考虑为每个 TemplateAddedEvent 实现一个基类，因为它们都具有共同的属性。但是我怀疑这是否是正确的方法，因为有些人更喜欢事件是包含每个属性的简单类，而不是必须深入挖掘以找出事件可以提供什么。

我希望有人可以对这个问题有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:27:05.870

继承通常用于两个正交的原因 - 重用功能和声明类之间的“is-a”关系。看来您使用它是出于第一个原因。这个原因是一个较弱的论点，因为重用也可以通过组合来实现。那么要问的问题是事件之间是否存在“is-a”关系。有时事件之间的继承是可取的，例如当为从基类派生的所有事件提供处理程序是有意义的时候。

总的来说，如果它仅用于实现代码重用，我会警告不要继承。如果它是关于域的适当陈述，那么它是有意义的。

# git - Jenkins 不会建立指定的 git 分支

> ID：14703898
> 
> 赞同：0
> 
> 时间：2013-02-05T09:20:03.400
> 
> 标签：git, jenkins, continuous-integration

我已经设置了一个 Jenkins 作业，该作业被明确配置为观察分支、“集成”和“主控”，并根据更改构建它们（每分钟检查一次）。

出于某种原因，该工作仅构建集成。即使集成没有变化，但在 master 中，当我尝试手动启动构建时，作业会再次构建最新的集成。

我尝试了一些命名和排序的变化，但没有任何效果。构建 master 的唯一方法是从作业中删除集成规范，然后手动构建它或等待存储库的自动轮询。

我在 1.5 版中运行 Jenkins，但问题出现在较早的某个版本中。

```
<scm class="hudson.plugins.git.GitSCM" plugin="git@1.1.26">
<configVersion>2</configVersion>
<userRemoteConfigs>
  <hudson.plugins.git.UserRemoteConfig>
    <name></name>
    <refspec></refspec>
    <url>git@testserver:theRepository.git</url>
  </hudson.plugins.git.UserRemoteConfig>
</userRemoteConfigs>
<branches>
  <hudson.plugins.git.BranchSpec>
    <name>master</name>
  </hudson.plugins.git.BranchSpec>
  <hudson.plugins.git.BranchSpec>
    <name>integration</name>
  </hudson.plugins.git.BranchSpec>
</branches>
<disableSubmodules>false</disableSubmodules>
<recursiveSubmodules>false</recursiveSubmodules>
<doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
<authorOrCommitter>true</authorOrCommitter>
<clean>false</clean>
<wipeOutWorkspace>false</wipeOutWorkspace>
<pruneBranches>false</pruneBranches>
<remotePoll>false</remotePoll>
<ignoreNotifyCommit>false</ignoreNotifyCommit>
<useShallowClone>false</useShallowClone>
<buildChooser class="hudson.plugins.git.util.DefaultBuildChooser"/>
<gitTool>Default</gitTool>
<submoduleCfg class="list"/>
<relativeTargetDir></relativeTargetDir>
<reference></reference>
<excludedRegions></excludedRegions>
<excludedUsers></excludedUsers>
<gitConfigName></gitConfigName>
<gitConfigEmail></gitConfigEmail>
<skipTag>false</skipTag>
<includedRegions></includedRegions>
<scmName></scmName> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:47:55.403

如果你进入你的工作并点击“配置”，你应该被带到一个像`http://[HOSTNAME]:8080/job/[JOBNAME]/configure`. 在“源代码管理”部分下，您大概选择了“Git”单选按钮。检查“要构建的分支”小节 - 这应该会具体告诉您它正在克隆什么，如果您愿意，您可以在此处更改分支名称。

# qt - QWidget 背景图像适合

> ID：14703899
> 
> 赞同：3
> 
> 时间：2013-02-05T09:20:07.273
> 
> 标签：qt, background-image, qwidget

我正在使用 Qt 4.7 ，我将 QWidget 的背景图像 CSS 设置为来自我的 qrc 的图像。

问题是图像是高分辨率的，并且只显示了左上角，我无法将其按比例缩小以适应。在 CSS3 中，我看到了一个“背景大小：包含”属性，但我担心它在 Qt 4.7 中不起作用。

找不到使图像适合窗口的方法。有任何想法吗 ？我不介意以编程方式进行。

谢谢

**已解决：** [http ://www.developer.nokia.com/Community/Wiki/Archived:Load,_Resize_image_and_set_background_image_in_Qt_application/widget](http://www.developer.nokia.com/Community/Wiki/Archived:Load,_Resize_image_and_set_background_image_in_Qt_application/widget)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T20:05:08.567

如果 QFrame 与图像的纵横比相同，则可以在 QFrame 上使用 CSS，如下所示：

```
QFrame
{
   border-image: url(:/images/myimage.png) 0 0 0 0 stretch stretch;
   border-width: 0px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T11:19:49.900

您可以重新实施`paintEvent`：

```
void Widget::paintEvent(QPaintEvent *e)
{
    QPainter painter(this);
    painter.drawPixmap(0, 0, QPixmap(":/new/prefix1/picture001.png").scaled(size()));
    QWidget::paintEvent(e);
} 
```

# java - 从哪里打电话给我的班级

> ID：14703918
> 
> 赞同：0
> 
> 时间：2013-02-05T09:20:52.990
> 
> 标签：java, swing, constructor

我有一个使用 java swing jframe 作为主类的程序。

它将参数传递给 jframe，然后 jframe 从其构造函数中调用另一个名为 populate menus 的方法。

然后它会读取构成菜单的文件。

我的问题是我应该创建一个读取所有文件的对象并将其传递给我的构造函数吗？

下面是我现在要做的。

我分离参数（这些是配置文件位置），然后调用 jframe 的构造函数，然后传递值。

```
public static void main(args[]){

final String isoconfig = args[0];
final String userlist = args[1];
final String equipment_list = args[2];
final String config = args[3];

java.awt.EventQueue.invokeLater(new Runnable() {
 public void run() {
  try{
     new UserInterFace(isoconfig,userlist,equipment_list,config).setVisible     *     (true);;}
  catch(IOException ioe){
      System.out.println(ioe.getMessage());}}
       });}
} 
```

这是构造函数代码

```
public UserInterFace(String isoList,String userList, String equipment_list, String config)throws IOException  {

   initComponents();
   populatemenus(isoList,userList,equipment_list,config);
   initObjects();} 
```

我当时想的是这样做

```
 public static void main(args[]){

 Readfiles configfiles = new Readfiles(args);  

 java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
      try{
          new UserInterFace(configfiles).setVisible(true);;}
      catch(IOException ioe){System.out.println(ioe.getMessage());}}
     });}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:33:23.313

为简单起见，也许这样做会更好：

```
public static void main (String [] args)
{
    new UserInterface (args).setVisible (true);
} 
```

# javascript - 将字符串转换为 Jquery 数据集

> ID：14703920
> 
> 赞同：0
> 
> 时间：2013-02-05T09:21:00.097
> 
> 标签：javascript

我想将此字符串转换为 jquery 数据表。我不能这样做。

```
var str = "96,xxx,212,xxxx||
100,yyy,123,yyyy";

My original DataSet structure like this 

var aDataSet = [['96','xxx','212','xxxx'],
        ['100','yyy','123','yyyy']]; 
```

这是我尝试过的代码；

```
var srchvalue = str.split('||');
 for (var e = 0; e < srchvalue.length; e++) {

                    alert(srchvalue[e]);
                    aDataSet.push(srchvalue[e]);
} 
```

但它不会转换实际格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:24:19.157

你只需要`split()`两次。你已经完成了第一步。然后，您需要将数组中的两个字符串拆分`,`为分隔符。

您可以在已有`aDataSet.push(srchvalue[e].split(','))`的循环内使用。`for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:24:52.667

您正在向数组中推送拆分的结果，该结果`"||"`是一系列字符串，例如`"96,xxx,212,xxxx"`. 您还需要拆分该字符串以获得矩阵：

```
[...]    
aDataSet.push(srchvalue[e].split(','));
[...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T05:52:19.553

我得到了解决方案，我使用下面的代码来转换它。

```
 var test = eval('[' + srchvalue[e].split(',') + ']');
 aDataSet.push(test); 
```

# jsf - 重新部署服务器后的 ViewScoped

> ID：14703921
> 
> 赞同：0
> 
> 时间：2013-02-05T09:21:00.577
> 
> 标签：jsf, jetty, session-scope, view-scope

我在 JSF 2.0 中的简单表单上有一个奇怪的问题。在这种形式中，我使用了两个选择，如果选择了第一个选择，则第二个应该重新加载新选项。我使用与 Primefaces 演示页面相同的机制：[Primefaces 演示页面](http://www.primefaces.org/showcase/ui/pprSelect.jsf)。我的 bean 是**@ViewScoped**。我还通过“mvn jetty:run”在 jetty-maven 插件上运行我的应用程序。到目前为止没有问题。我的表格效果很好。

当我在服务器运行时更​​改某些内容时会出现问题，码头正在重新加载。之后，这两个选择不起作用 - 如果我选择第一个选项，第二个没有响应。我必须通过在 Spring Security 中注销来清除所有会话，然后我的表单才能恢复工作。

当我将 bean 更改为**@SessionScoped**时，问题消失了。这工作正常吗？我不想让我的表单在会话范围内，我更喜欢 ViewScoped。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:47:45.403

尝试在您的 bean 中的 postConstruct 上检查您的上下文是否像这样回发。

```
@PostConstruct
public void init() {
    if (!FacesContext.getCurrentInstance().isPostback()) { 
        //Write your code here...
    } 
```

如果 jsf 版本是 2.0，或者尝试在 web.xml 上保存部分状态，但是使用这种方法，您的应用程序可能需要更多的内存分配

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

祝你好运！

# javascript - JQuery：选择仅包含“”的段落

> ID：14703924
> 
> 赞同：2
> 
> 时间：2013-02-05T09:21:08.707
> 
> 标签：javascript, jquery, jquery-selectors

> **可能重复：**
> [删除只有   的元素 使用 jQuery 的空间](https://stackoverflow.com/questions/1520981/remove-elements-with-only-a-nbsp-space-using-jquery)

Wordpress`<p>&nbsp;</p>`在后端进行换行时通过添加来完成此操作。

我想知道是否可以`p`使用 jquery 以某种方式选择那些。

![在此处输入图像描述](../Images/f9625a2989483743868feb510746d962.png)

我想`empty()`这行不通，因为它并不是真正空的，而是包含一个`&nbsp;`. 但是`contains()`可能也行不通，因为许多其他段落也包含空格，对吗？

我只想选择那些只有这个“”的paragpahs。

**更新**

我应该提到我不想删除`p`s 而是向它添加一个类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:25:24.350

`functions.php`如果您有权访问主题文件，请将其添加到您的文件中。

```
function user_content_replace($content) {
    return str_replace('<p>&nbsp;</p>','<p class="example">&nbsp;</p>',$content);
}
add_filter('the_content','user_content_replace', 99); 
```

我让它插入一个类而不是删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T09:25:30.263

这将有助于选择有问题的段落：

```
$("p").filter(function() {
    return $.trim($(this).html()) == '&nbsp;';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:36:27.623

你可以做这样的事情

```
$(document).ready(function(){ 
            $("p").each(function(){
                if($(this).html()=="&nbsp;") {
                    alert($(this).attr('id'));
                }   
            });
        }); 
```

我使用的 HTML 是

```
<p id="test" class="les">&nbsp;</p>
<p class="les" id="test1">aaaa &nbsp;</p> 
```

所以它应该只**用 id test 提醒 p**

希望这可以帮助

# java - GWT RPC 调用在编译模式下不起作用

> ID：14703931
> 
> 赞同：2
> 
> 时间：2013-02-05T09:21:22.230
> 
> 标签：java, ajax, gwt, rpc

我正在构建一个 GWT 应用程序。以前，每当我从网页请求图像时，该请求都会转到客户端类，该类用于提供图像。这适用于 GWT 生成的 URL 以及编译后的独立文件 URL。

但是现在我已经用对服务器的 Ajax (RPC) 调用替换了该部分，其中服务器端类从客户端类接收必要的参数，并提供图像，图像由客户端类发送到 UI . 这适用于 GWT 生成 URL，但是在编译后，当我尝试将其作为独立的 HTML 运行时（通过在 URL 栏中提供文件的路径），不会触发任何 Ajax 请求。

是因为 RPC 调用需要服务器来响应（与 jQuery Ajax 调用相比，后者仅在桌面上运行良好）？如何在桌面模式下模仿 Ajax 行为？调用看起来像这样：

```
private final GreetingServiceAsync response = GWT.create(GreetingService.class); //(I haven't changed the defualt names..:))
response.greetServer(i, j,new AsyncCallback<String,String>() {  // i,j is already calculated, server needs to know these to pass an image url
     public void onSuccess(String url1, String url2) {...}
     public void onFailure(Throwable caught) {...}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:05:38.907

你完全脱离了`GWT structure`。

编译项目后，所有 GWT 代码都将转换为 JavaScript。

即使没有服务器正在运行，并且如果您从 C://myapp/myapp.html 等文件系统访问了您的 html 文件。浏览器将其用作静态网络

页面 ..ofcourse 在那个 html 页面里面会有你`app.nochahe.js` 的纯 javascript。

因此，浏览器会毫不犹豫地显示所有内容..但它永远不会成为所谓的 Web 应用程序，也永远不会制作任何 ajax 或任何其他服务器

称呼。

在您的情况下，您没有运行任何服务器并将它们作为 a 访问`static pages`并期望它们连接`server`并带来您的数据，这是非常不可能的。

所以首先请在开发模式下运行||调试你的代码。

开始运行或调试项目后..在开发模式选项卡中生成的 url 将如下所示。

```
h t t p : / / localhost : 8888 / MyModule.html ? gwt.codesvr = localhost : 9997 
```

您可能对参数 gwt.codesvr 有疑问。

它运行您的客户端 Java 代码，该代码已编译为类文件，但尚未编译为 JavaScript 文件。

完成实现后，编译项目并在任何服务器上导出您的 war 文件夹以测试或访问它们

```
ex:localhost:8080/myapp/someservice. 
```

谈到所谓的 AJAX 调用，它们是GWT 中的[RPC。RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)是与服务器通信的 GWT 内部结构，通常它们都是一般的 impl 类，它们扩展了 RemoteServiceServlet，它通过`HTTP`协议和客户端向客户端提供数据不运行服务器就不可能唤起它们。

如果您仍然对不同的`GWT`应用程序模式感到困惑，请参阅此差异[链接](https://stackoverflow.com/questions/11272707/difference-between-hosted-development-mode-and-web-mode-in-gwt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:47:32.270

你的意思是如果你直接从文件系统打开 HTML 主机页面？这是行不通的，因为那时您还没有服务器。这样就没有服务器端可以应答您的 RPC 调用。您必须在 servlet 容器（如 Tomcat 或 Jetty）中运行 GWT 应用程序，以便服务器端 RPC servlet 正在运行并准备好响应来自客户端的 RPC 调用。

即使您在某处运行服务器。如果只是从文件系统中打开文件，RPC 调用无法在哪里找到服务器。RPC 调用使用 URL（主机页面基本 URL）来定位其服务器。在您的情况下，这是`file://C/something`而不是`http://www.hererunsaserver.com/`.

您可能会在应用程序中嵌入您的数据，以实现某种桌面模式。但是不知道你是不是这样的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:44:10.727

这应该是可行的。您必须实现 onFailure，因为如果没有可用的服务器，它将被调用。

为 AsyncCallback 创建一个类似这样的新类，（默认情况下 AsyncCallback 只有一个参数，你用两个实现了吗？）：

```
public class UrlCallback implements AsyncCallback<String, String> {
    private String url1;
    private String url2;

    public UrlCallback(String url1, String url2) {
        this.url1 = url1;
        this.url2 = url2;

    }
    @Override
    public void onSuccess(String result1, String result2) {

        //"Do what you want to do here"

    }

    @Override
    public void onFailure(Throwable caught) {

        //Respond the static file here

    }

} 
```

我在我的情况下处理它，当我没有互联网连接时从本地存储服务器图像 URL：

```
public class PictureCallback implements AsyncCallback<Picture> {
    private Image picture;
    private IAppRequestTransportSupport storage;
    private String storeId;

    public PictureCallback(String storeId, Image picture) {
        this.picture = picture;
        this.storage = new  AppLocalStorageSupport();
        this.storeId = storeId;
    }
    @Override
    public void onSuccess(Picture result) {

        picture.setUrl(result.getImageUrl());
        storage.doOnSuccess(result.getImageUrl(), "picture"+storeId);

    }

    @Override
    public void onFailure(Throwable caught) {

        try {
            String pic = storage.readFromLocaleStorage("picture"+storeId);
            if(pic != null && !pic.equals("")) {
                picture.setUrl(pic);
            }
        } catch (KeyNotFoundException e) {
            e.printStackTrace();
        } catch (NoLocaleStorageSupportException e) {
            e.printStackTrace();
        }
    }

} 
```

# android - Android 根据所选活动读取资产

> ID：14703932
> 
> 赞同：0
> 
> 时间：2013-02-05T09:21:26.720
> 
> 标签：android, android-activity, switch-statement, bufferedreader

我正在开发一个包含不同测试的应用程序，并且对于每个测试（活动）都需要读取不同的 txt 文件。我知道这样做，但手动更改它。当特定活动正在运行时，怎么可能读取正确的 txt。例如，对于活动 1，我需要阅读 1.txt 等等。这是我阅读txt的代码。

```
String questionFile = "";
questionFile = "1.txt";
questionCount = 20;

Log.i("Question", questionFile + ": " + questionCount);
try {
    InputStream is = context.getAssets().open(questionFile);
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    // Skips lines
    for (i = 0; i< questionNumber; i++) {
        reader.readLine();
    }
    question = reader.readLine();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:32:04.037

您需要将当前代码放在单独的类中，并创建一个从资产读取文件的方法，具体取决于当前运行的活动：

```
public class GetFileAssets {
Context context;

public GetFileAssets(Context context){
 this.context=context;
 }

public String readFilefromAssets(String str_file_id){
  String questionFile = "";
  questionFile = str_file_id;
  questionCount = 20;

  //... your code here

  return question;
 }

} 
```

现在将文件编码传递给 Activity .like 从 Activity 1：

```
GetFileAssets obj=new GetFileAssets(Activity1.this);
String str=obj.readFilefromAssets("1.txt"); 
```

与活动 2 相同：

```
GetFileAssets obj=new GetFileAssets(Activity2.this);
String str=obj.readFilefromAssets("2.txt"); 
```

# eclipse - 为 Eclipse 添加 CVS 透视图

> ID：14703943
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:06.643
> 
> 标签：eclipse, eclipse-plugin

我在 Eclipse 中没有 CVS 透视图（从 android 开发者网站下载）

我可以通过任何插件或帮助->安装新软件添加相同的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:05:53.650

你确定它不在：

```
Window -> Show view -> Other -> CVS -> CVS repository 
```

就我现在而言，它默认包含在 Eclipse Java IDE 中。

# applescript - 有没有办法让 applescript（或 elsescript）acrobat XI 执行 OCR？

> ID：14703944
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:08.050
> 
> 标签：applescript, ocr, acrobat

X 版本有很多示例，但它们不适用于 XI，这是因为这些示例适用于菜单项，而 Adob​​e 进入 XI 将 OCR 工具从菜单中移开。所以我不知道如何使用 applescript 告诉 Acrobat XI 对某些文件执行 OCR。

我的最终目标是使用 Hazel 设置一个监视文件夹，以自动对我放入的每个 PDF 进行 OCR，请不要告诉我使用 PDFPen，我不喜欢它，我只是想要 Acrobat 的 OCR 特殊功能；-)

谢谢你。

– 亲切的，

tiziano solignani, da  Mac [http://blog.solignani.it](http://blog.solignani.it)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:28:05.847

Acrobat X 和 XI 之间的 UI 没有改变，即使您看不到菜单项（将它们视为“隐藏”），“执行菜单项”命令仍然有效。

# symfony - 我无法将选择框中的值保存到数据库

> ID：14703946
> 
> 赞同：1
> 
> 时间：2013-02-05T09:22:10.203
> 
> 标签：symfony

我正在 Symfony 2 标准版中构建一个项目。

我制作了一个表格来插入我的疾病实体，我在该表格中有 2 个选择框，一个是名为 group 的 ManyToOne 字段，链接到另一个名为 Groups 的表的 id，另一个是链接到同一个疾病表的父级。

选择框组工作正常并发送一个正常的变量，但父选择框似乎没有发送任何东西这里是错误代码

```
An exception occurred while executing 
'INSERT INTO disease (parent, name, latin_name, code, notice, modified, group_id) VALUES (?, ?, ?, ?, ?, ?, ?)' 
with params {"1":{},"2":"Alamanja","3":"mirkus","4":"A011","5":"sad sada","6":"2012-01-01 00:00:00","7":"1"}:

Catchable Fatal Error: Object of class Acme\BlogBundle\Entity\Disease could not be converted to string in D:\xampp\htdocs\Symfony\vendor\doctrine\dbal\lib\Doctrine\DBAL\Statement.php line 138 
```

我的 Form 对象看起来像这样

```
namespace Acme\BlogBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class DiseaseType extends AbstractType
{
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Acme\BlogBundle\Entity\Disease',
    ));
}
public function buildForm(FormBuilderInterface $builder, array $options)
{

    $builder->add('name');
    $builder->add('latinName');
    $builder->add('code');
    $builder->add('notice', 'textarea');
    $builder->add('parent', 'entity', array(
        'class' => 'AcmeBlogBundle:Disease',
        'property' => 'name',
        'empty_value' => '--Izaberi grupu--',
    ));
    $builder->add('group', 'entity', array(
        'class' => 'AcmeBlogBundle:Groups',
        'query_builder' => function($repository) { return $repository->createQueryBuilder('p')->orderBy('p.id', 'ASC'); },
        'property' => 'name',
    ));
    $builder->add('modified', null, array('widget' => 'single_text'));
}

public function getName()
{
    return 'disease';
}
} 
```

我从我的控制器调用我的表单对象

```
namespace Acme\BlogBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Acme\BlogBundle\Entity\Groups;
use Acme\BlogBundle\Entity\Disease;
use Symfony\Component\HttpFoundation\Request;
use Acme\BlogBundle\Form\Type\BlogType;
use Acme\BlogBundle\Form\Type\DiseaseType;

class DiseaseController extends Controller
{

public function newAction(Request $request)
{
    // create a task and give it some dummy data for this example
    $disease = new Disease();    
    $form = $this->createForm(new DiseaseType(), $disease);

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($disease);
            $em->flush();

            return $this->redirect($this->generateUrl('disease_show'));
        }
    }else{
        return $this->render('AcmeBlogBundle:Default:newDisease.html.twig', array(
        'form' => $form->createView(),
        ));
    }
}
} 
```

请帮助我，我到处搜索，但没有:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:48:52.877

```
Catchable Fatal Error: Object of class Acme\BlogBundle\Entity\Disease 
could not be converted to string. 
```

该`$parent`属性在您的实体中声明为字符串，在您的表单中声明为实体。

* * *

要解决此问题，您有 2 个选项：

## 选项1

您创建一个[OneToOne 关系](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)，自我引用。

```
/**
 * @OneToOne(targetEntity="Acme\BlogBundle\Entity\Disease")
 * @JoinColumn(name="disease_id", referencedColumnName="id")
 */
private $parent; 
```

## 选项 2

**您为父**属性创建一个[数据转换](http://symfony.com/doc/master/cookbook/form/data_transformers.html)器，以将疾病实体转换为字符串。

 *** * *

您决定采用哪个选项取决于您在您的`$parent`财产中需要什么，如果您需要一个字符串，请转到选项 2，如果您需要存储整个实体，请使用选项 1。有点难以理解为什么您需要这样做尽管..**

# scala - SBT 插件：向生成的 jar 添加资源？

> ID：14703951
> 
> 赞同：2
> 
> 时间：2013-02-05T09:22:27.750
> 
> 标签：scala, sbt

我正在写一个 SBT 插件。在这个插件中，我需要将文件添加到生成的 jar 中的资源目录中。

我不想更改源目录中的任何内容（否则用户/开发人员可能不明白为什么文件会出现在他负责的目录中），而只是在生成的 jar 中。

我该怎么做，目标中是否有与资源目录对应的文件夹？

这似乎是由“包”命令完成的，所以如果我可以覆盖包命令，我可能能够做我想做的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:41:20.400

好像我需要向resourceManaged 添加东西。

# viewport - 视口元标记需要在嵌入或链接的任何其他样式之前？

> ID：14703952
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:27.437
> 
> 标签：viewport

```
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0" /> 
```

这需要在嵌入或链接任何其他样式之前？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:41:41.540

不，HTMLMetaTag 独立于 CSS。

我认为 HTMLMetaTag 将在任何样式之前执行，因为 CSSDeviceAdaptation 在设置视口时比元标记重要。

# java - 如何在java swing中垂直对齐按钮

> ID：14703954
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:28.610
> 
> 标签：java, swing, layout-manager

我想`JButton`垂直对齐实例。你能建议一种方法吗？

```
Jbutton jb= new Jbutton();
Jbutton jb1= new Jbutton();
JButton jb3= new JBUtton(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:40:52.130

参考下面的代码：

```
private void prepareUI() {
        this.setUndecorated(true);
        //Preparing control buttons
        JButton jb = new MyButton("-");
        jb.setActionCommand("Min");
        jb.addActionListener(this);
        jb1 = new MyButton("[]");//delete this line
        jb1.setActionCommand("Max");
        jb1.addActionListener(this);
        JButton jb2 = new MyButton("X");
        jb2.setActionCommand("Close");
        jb2.addActionListener(this);
        //Preparing panel
        JPanel buttonPanel = new JPanel();
        BoxLayout boxLayout1 = new BoxLayout(buttonPanel, BoxLayout.Y_AXIS);
        buttonPanel.setLayout(boxLayout1);
        buttonPanel.add(Box.createVerticalGlue());
        buttonPanel.add(jb);
        buttonPanel.add(jb1);
        buttonPanel.add(jb2);
        jb.setFocusable(false);
        jb1.setFocusable(false);

        jb2.setFocusable(false);

        JPanel panel=new JPanel();
        BoxLayout boxLayout = new BoxLayout(panel, BoxLayout.LINE_AXIS);
        panel.setLayout(boxLayout);
        panel.add(Box.createHorizontalGlue()) 
```

# windows-8 - 如何在 WinRT 应用程序中打开任何特定的 SettingsFlyout

> ID：14703955
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:30.997
> 
> 标签：windows-8, winrt-xaml

我正在开发一个 Windows 8 Metro 应用程序，并且有多个 SettingsFlyout 项目，这些项目由下面提到的代码添加

```
SettingsCommand cmd1 = new SettingsCommand("sample", "Color Settings", (x) =>
        {
            // create a new instance of the flyout
            SettingsFlyout settings = new SettingsFlyout();
            // set the desired width.  If you leave this out, you will get Narrow (346px)
            // optionally change header and content background colors away from defaults (recommended)
            // if using Callisto's AppManifestHelper you can grab the element from some member var you held it in
            // settings.HeaderBrush = new SolidColorBrush(App.VisualElements.BackgroundColor);
            settings.HeaderBrush = new SolidColorBrush(Colors.Black);
            settings.HeaderText = string.Format("Color Settings", App.VisualElements.DisplayName);
            settings.Background = new SolidColorBrush(_background);
            settings.Margin = new Thickness(0);
            // provide some logo (preferrably the smallogo the app uses)
            BitmapImage bmp = new BitmapImage(App.VisualElements.SmallLogoUri);
            settings.SmallLogoImageSource = bmp;

            // set the content for the flyout
            settings.Content = new ColorSettings();
            settings.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Stretch;

            // open it
            settings.IsOpen = true;

            // this is only for the test app and not needed
            // you would not use this code in your real app
            // ObjectTracker.Track(settings);
        }); 
```

目前使用 (SettingsPane.Show()) 我可以显示添加的弹出项列表，但我想以编程方式打开任何设置弹出项而不是打开弹出列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:43:36.630

创建一个新类

```
public class SettingsFlyout
{
    private const int _width = 346;
    private Popup _popup;

    /// <summary>
    /// Show the Flyout with the UserControl as content
    /// </summary>
    /// <param name="control"></param>
    public void ShowFlyout(UserControl control)
    {
        _popup = new Popup();
        _popup.Closed += OnPopupClosed;
        Window.Current.Activated += OnWindowActivated;
        _popup.IsLightDismissEnabled = true;
        _popup.Width = _width;
        _popup.Height = Window.Current.Bounds.Height;

        control.Width = _width;
        control.Height = Window.Current.Bounds.Height;

        _popup.Child = control;
        _popup.SetValue(Canvas.LeftProperty, Window.Current.Bounds.Width - _width);
        _popup.SetValue(Canvas.TopProperty, 0);
        _popup.IsOpen = true;
    }

    private void OnWindowActivated(object sender, Windows.UI.Core.WindowActivatedEventArgs e)
    {
        if (e.WindowActivationState == Windows.UI.Core.CoreWindowActivationState.Deactivated)
        {
            _popup.IsOpen = false;
        }
    }

    void OnPopupClosed(object sender, object e)
    {
        Window.Current.Activated -= OnWindowActivated;
    }
} 
```

在 XAML 页面中获取一个按钮，然后编写按钮单击事件。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    SettingsFlyout flyout = new SettingsFlyout();
    flyout.ShowFlyout(new FlyoutContentUserControl());
} 
```

请注意一件事`FlyoutContentUserControl`是您要显示的用户控件。

[归功于](https://github.com/Q42/Q42.WinRT)Q42.WinRT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:36:15.053

您发布的代码将 a 注册`SettingsCommands`到系统设置窗格。从系统设置窗格调用命令时，您会新建一个`SettingsFlyout`实例并`IsOpen=True`对其进行设置。

您只需将此代码重构为一个单独的方法（例如`ShowColorSettingsFlyout()`），并从您的`Button.Click`事件处理程序中调用该方法。您可以创建一个新的 Callisto`SettingsFlyout`并`IsOpen=True`在任何地方进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T13:52:46.547

在 App.xaml.cs 添加以下内容以注册您的[SettingsFlyout](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.settingsflyout.aspx)例如 CustomSetting ...

```
protected override void OnWindowCreated(WindowCreatedEventArgs args)
{
    SettingsPane.GetForCurrentView().CommandsRequested += OnCommandsRequested;
}

private void OnCommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    args.Request.ApplicationCommands.Add(new SettingsCommand(
            "Custom Setting", "Custom Setting", (handler) => ShowCustomSettingFlyout()));
}

public void ShowCustomSettingFlyout()
{
    CustomSetting CustomSettingFlyout = new CustomSetting();
    CustomSettingFlyout.Show();
} 
```

然后在您想要以编程方式打开 CustomSetting 浮出控件的代码中的任何位置，调用 ShowCustomSettingFlyout，例如在事件处理程序中单击按钮...

```
void Button_Click_1(object sender, RoutedEventArgs e)
{
    ShowCustomSettingFlyout()
} 
```

改编自：[快速入门：添加应用设置 (XAML)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh872190.aspx)。

# c# - 在 asp.net mvc3 中的图像幻灯片放映？

> ID：14703956
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:31.760
> 
> 标签：c#, jquery, asp.net-mvc

我的数据库中的图像很少，我像画廊一样在另一个下方显示一个图像，但我的要求是我想像幻灯片一样显示......应该显示一个图像，然后在 2 秒后显示另一个图像......以这种方式，如何完成？

这是我的视图代码

```
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
@for(int i = 1; i <= Convert.ToInt32(ViewData["count"]); i++)
{
    <img src="@Url.Action("dp", "Home",new { id = i })" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:34:06.700

您可以自己编写一些东西，也可以使用众多可用的 JavaScript/jQuery 幻灯片库之一。如果你自己写一些东西，你实际上会在你做的时候一次加载所有的图片，但把它们全部隐藏起来。然后使用 JavaScript/jQuery 显示和隐藏它们。

这是使用来自 jquery.malsup.com/cycle/ 的称为 jQuery Cycle 插件的一种方法。

```
 @{
        ViewBag.Title = "SlideShow";
    }
    <h2>
        SlideShow</h2>
    <style type="text/css">
        .slideshow
        {
            width: 700px;
            height: 700px;
            margin: auto;
        }
        .slideshow img
        {
            padding: 15px;
            border: 1px solid #ccc;
            background-color: #eee;
            margin-left: auto; margin-right: auto; display: block;
        }
    </style>
    <!-- include Cycle plugin -->
    <script src="@Url.Content("~/Scripts/jquery.cycle.all.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.slideshow').cycle({
                fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
            });
        });
    </script>
    <div>
        <a href="javascript:history.go(-1)">Back</a> | @Html.ActionLink("Back to Directory", "Index", new { dir = Request.QueryString["dir"] })
    </div>
    <div class="slideshow">
        @for(int i=1;i<=Convert.ToInt32(ViewData["count"]);i++)
        {
           <img src="@Url.Action("dp", "Home",new { id = i})" />
        }
    </div> 
```

无论如何，这就是要点...您必须根据需要对其进行修改。

# java - 反射的表现：JVM中的优质字节码

> ID：14703959
> 
> 赞同：8
> 
> 时间：2013-02-05T09:22:36.460
> 
> 标签：java, reflection, coding-style, bytecode

**编辑2**：完全`object-oriented`实现的程序是否提供高性能？大部分`framework`都是用它的全部力量编写的。但是，`reflection`也大量用于实现它，例如 for`AOP`和`dependency injection`。使用`reflection`会在一定程度上影响性能。

那么，使用它是一种好习惯`reflection`吗？是否有一些替代编程语言结构的反射的方法？应该使用到什么程度`reflection`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T16:23:24.990

反思本身和本质上都是缓慢的。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1392351/java-reflection-why-is-it-so-slow)。这是由几个原因造成的。[Jon Skeet 很好地解释了它：](https://stackoverflow.com/questions/1392351/java-reflection-why-is-it-so-slow/1392379#1392379)

> 检查是否有无参数构造函数检查无参数构造函数的可访问性检查调用者是否有权使用反射计算出（在执行时）需要分配多少空间调用构造函数代码（因为它不会知道之前构造函数是空的）

基本上，反射必须在调用之前执行所有上述步骤，而普通方法调用必须做的少得多。

> 用于实例化 B 的 JITted 代码非常轻量级。基本上它需要分配足够的内存（除非需要 GC，否则它只是增加一个指针），仅此而已 - 没有真正要调用的构造函数代码；我不知道 JIT 是否跳过它，但无论哪种方式都没有太多工作要做。

话虽如此，在许多情况下，Java 的动态性不足以满足您的需求，而反射提供了一种简单而干净的替代方案。考虑以下场景：

1.  您有大量代表各种项目的类，即 a `Car`、`Boat`和`House`。
2.  它们都扩展/实现了同一个类：`LifeItem`.
3.  您的用户输入 3 个字符串之一，“Car”、“Boat”或“House”。
4.  您的目标是根据参数访问 LifeItem 的方法。
5.  想到的第一个方法是构建一个 if/else 结构，并构建想要的`LifeItem`. 然而，这不是非常可扩展的，一旦你有几十个`LifeItem`实现就会变得非常混乱。

反射在这里可以提供帮助：它可以用于`LifeItem`根据名称动态构造对象，因此“汽车”输入将被分派给`Car`构造函数。突然间，原本可能有数百行 if/else 代码的东西变成了一条简单的反射线。由于引入了带有字符串的 switch 语句，后一种情况在 Java 7+ 平台上不会那么有效，但即便如此，我也希望避免使用具有数百种情况的 switch。在大多数情况下，清洁度之间的区别如下：

没有反射：

```
public static void main(String[] args) {
   String input = args[0];
   if(input.equals("Car"))
      doSomething(new Car(args[1]));
   else if(input.equals("Boat"))
      doSomething(new Boat(args[1]));
   else if (input.equals("House"))
      doSomething(new House(args[1]));
   ... // Possibly dozens more if/else statements
} 
```

而通过利用反射，它可以变成：

```
public static void main(String[] args) {    
   String input = args[0];
   try {
      doSomething((LifeItem)Class.forName(input).getConstructor(String.class).newInstance(args[1]));
   } catch (Exception ie) {
      System.err.println("Invalid input: " + input);
   }  
} 
```

就个人而言，我会说后者比第一个更整洁、更简洁、更易于维护。最后，这是个人喜好，但这只是反射有用的众多情况之一。

此外，在使用反射时，您应该尝试缓存尽可能多的信息。换句话说，使用简单、合乎逻辑的东西，比如`get(Declared)Method`如果你能帮忙就不要到处调用：而是将它存储在一个变量中，这样你就不会在想要使用它时重新获取引用的开销。

所以这些是赞成和反对反思的两个极端。总结一下，如果反射提高了代码的可读性（就像在呈现的场景中那样），那么一定要去做。如果你这样做了，只需考虑减少`get*`反射调用的数量：这些是最容易修剪的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T06:39:36.473

虽然反射比“传统代码”最昂贵，但过早的优化是万恶之源。从长达十年的经验证据来看，我假设通过反射调用的方法几乎不会影响性能，除非它是从重循环中调用的，即使如此，反射也有一些性能增强：

> 某些反射操作，特别是 Field、Method.invoke()、Constructor.newInstance() 和 Class.newInstance()，已被重写以获得更高的性能。反射调用和实例化比以前的版本快几倍 [J2SDK 1.4 中的增强 -](http://docs.oracle.com/javase/7/docs/technotes/guides/reflection/enhancements.html)

注意上面没有提到方法查找（即Class.getMethod），而选择正确的Method对象通常需要额外的步骤，比如遍历类层次结构同时询问“声明的方法”以防它不是公共的），所以我尽可能将找到的方法保存在合适的映射中，这样下一次的成本就只有 Map.get() 和 Method.invoke() 的成本。我想任何编写良好的框架都可以正确处理这个问题。

还应该考虑如果使用反射，某些优化是不可能的（例如方法内联或转义分析[。Java HotSpot™ 虚拟机性能增强](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html)）。但这并不意味着必须不惜一切代价避免反射。

但是，我认为使用反射的决定应该基于其他标准，例如代码可读性、可维护性、设计实践等。在自己的代码中使用反射（而不是使用内部使用反射的框架）时，一个有将编译时错误转化为运行时错误的风险，这些错误更难调试。在某些情况下，可以将反射调用替换为传统的 OOP 模式，例如命令或抽象工厂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:26:22.523

我可以举一个例子（但抱歉，我不能给你看测试结果，因为那是几个月前的事了）。我编写了一个 XML 库（面向自定义项目），它用类 + 注释替换了一些旧的 DOM 解析器代码。我的代码是原始代码的一半。我做了测试，是的，反射更昂贵，但并不多（大约 14-15 秒的执行时间中的 0.3 秒（损失约为 2%））。在不经常执行代码的地方，可以使用反射，但性能损失很小。

此外，我确信我的代码可以改进以获得更好的性能。

所以，我建议这些提示：

1.  如果你能以一种美丽、紧凑和简洁的方式来使用反射；
2.  如果您的代码将被执行多次，请不要使用反射；
3.  如果您需要将大量信息从另一个源（例如 XML 文件）投射到 Java 应用程序，请使用反射；
4.  反射和注释的最佳用法是代码只执行一次（预加载器）。

# android - ExpandableListView - 组行不会对点击做出反应

> ID：14703966
> 
> 赞同：0
> 
> 时间：2013-02-05T09:22:55.910
> 
> 标签：android, android-listview, expandablelistview

我有`ExpandableListView`一个`CheckedTextView`作为 grouprow 视图。但我需要减少组之间的间距，所以我把它放在一个`LinearLayout`. 从那时起，列表没有展开，只是对点击没有反应。有任何想法吗？代码如下

组行.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:id="@+id/holder"
android:clickable="true"
android:orientation="vertical">
<CheckedTextView 

android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="-13dp"
android:layout_marginBottom="-13dp"
android:text="@string/hello_world"
android:paddingLeft="20dp"
android:textColor="#FFFFFF"
android:textSize="60sp"
android:includeFontPadding="false"
android:textStyle="bold" />
 </LinearLayout> 
```

获取组视图：

```
 @Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    if (convertView == null) {

        convertView = minflater.inflate(R.layout.grouprow, null);
    }
    LinearLayout holder = (LinearLayout) convertView;
    CheckedTextView txtGr = (CheckedTextView)    holder.findViewById(R.id.textView1);
    txtGr.setText(groupItem.get(groupPosition));
    txtGr.setChecked(isExpanded);
    font = Typeface.createFromAsset(activity.getAssets(),
            "uww.otf");
    txtGr.setTypeface(font);
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:04:48.337

通过将 the`LinearLayout`和 the设置`CheckedTextView`为不可点击来解决问题

# reference - 缺少 Microsoft.ApplicationServer.HttpEnhancements 参考

> ID：14703972
> 
> 赞同：1
> 
> 时间：2013-02-05T09:23:00.593
> 
> 标签：reference, visual-studio-2012

我打开了一个示例项目，其中缺少突出显示的引用。我在 .net 程序集中找不到这个引用，并且没有运气用谷歌搜索它。这是 .net 本机还是第三方 API 程序集？

![在此处输入图像描述](../Images/e164826bfd9787e28881a14ca9f93eae.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:33:05.660

此程序集由 WebApi 工具（正是 webapi.enhacements 包）提供，您只需运行以下命令即可使用 nuget 获取此程序集（和其他程序集）：

```
Install-Package WebApi.Enhancements -Version 0.6.0 
```

更多信息[在这里](http://nuget.org/packages/WebApi.Enhancements)。

# java - hbase + gwt 多模块应用程序，slf4j 和资源问题

> ID：14703975
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:03.973
> 
> 标签：java, gwt, log4j, hbase

我找到了很多处理这个问题的文章/问题，但还没有对我有用的答案。

我将 GWT 2.5 与 eclipse 插件一起使用。eclipse 版本是带有 Java7 的 Juno。

每次我启动应用程序时，它首先告诉我 log4j 配置不正确（没有附加程序......），而且我的 HBaseAdmin 无法连接到 HBase（它正在运行）。

所有答案都告诉我，我必须将资源放入 WEB-INF/classes 目录。为了自动执行此操作，我将文件添加到根 src 目录中。但还是一无所获。

或许值得一提的是我没有使用maven（b/c其他项目也都没有maven项目，暂时没时间介绍maven）

感谢您提供任何可能缺少的提示。

**编辑：**

不知何故，我不再收到任何警告，但除了一遍又一遍地重新启动之外，我什么也没做。因此，这现在应该可以工作了。但是，Zookeeper 现在抛出

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory 
```

我将 gwt 应用程序划分为 UI 部分，服务的执行实现是一个单独的项目，模型也是单独的。我首先只是将所需的库添加到真正需要它们的项目中。知道我也将它们添加到主 GWT 应用程序中，但这也无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:20:50.717

您使用的 LoggerFactory 类来自 slfj-api-1.6.1.jar 。尝试将该 jar 添加到您的 WEB-INF/lib 和类路径中。此外，我们通常将它与 slf4j-log4j12-1.6.1.jar 结合使用。

注意：我们使用的是 1.6.1 版本，如 gwt 下载中提供的 GWT 示例示例所示。

# android - 通过舍入坐标矩形缓存覆盖 - 如何？

> ID：14703977
> 
> 赞同：8
> 
> 时间：2013-02-05T09:23:07.720
> 
> 标签：android, overlay, android-mapview, coordinate-systems

我有一张带有叠加层的地图，我想缓存它——在用户在地图上访问的每个地方（这是一个矩形区域）——我检查我是否有一个位于这个矩形中的叠加层的缓存。

为了改进缓存（所以如果用户以前在同一个矩形上，除了现在他离前一个矩形几米远） - 我想“圆”坐标。

这样，每次用户处于矩形时 - 我检查这个矩形是否类似于以前缓存的矩形，如果是，我会带来缓存的结果。

此外，如果用户被缩小并且他的矩形**包含在**更大的（以前缓存的）矩形中 - 那么我也可以使用缓存的矩形。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:32:25.387

如果您设置如下数据结构：

```
var a = { 'scales' : [50, 100, 200, 400, 1000],
   'cachedRects': [{'location': 'rect-large-1234-5678.png', x: 1234, y: 5678, scale: 3}
                   {'location': 'rect-small-1240-5685.png', x: 1240, y: 5685, scale: 1} ]
} 
```

您可以使用模函数来执行此操作：

```
var currentx = GetCurrentX();
var currenty = GetCurrentY();

var currentScale = GetCurrentScale();

var rectFound = false;

foreach(rect in a.cachedRects) {
    if (rect.scale === currentScale 
        && currentx % a.scales[currentScale] === rect.x
        && currenty % a.scales[currentScale] === rect.y) {
            rectFound = true;
            useOverlay(rect);
            break;
    }

}

if(!rectFound) {
    //could loop again for a larger rectangle of a lower scale.
} 
```

以上可能是也可能不是有效的 JS - 我没有尝试运行它。无论如何，我希望你能明白要点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:26:09.883

如果您只是在查看如何对坐标进行分组，请确定您想要的 x 和 y 坐标或纬度和经度之间的最大差异。然后有两种方法可以对它们进行分组。第一个比较容易，但是如果你有很多点会很慢。

假设我们有一个名为 cachedPoints 的数据结构，一个名为 maxdistance 的相关点之间的最大距离，以及一个我们试图检查它是否靠近另一个调用点的新点。

```
for each cachedPoint in cachedPoints
{
    if (point.x - cachedPoint.x < maxdistance)
    {
        if (point.y - cachedPoint.y < maxdistance)
        {
              cachedPoint.incrementvisits();  
        }
    }
} 
```

另一种方法是使用按x或纬度排序的数据结构，然后在点的maxdistance范围内搜索是否存在x或纬度的缓存点，然后检查y或经度。它会快一点，但它需要某种哈希来实现，并增加了一堆你可能不需要的复杂性。

希望这就是你要问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:13:49.637

嘿，您可以在 Android 的 Google 地图 v2 中添加标记。

在这里我给出添加标记的代码

```
 MarkerOptions mOpt = new MarkerOptions();
    mOpt.position(new LatLng(userHstry.getMyLatlng().latitude, userHstry.getMyLatlng().longitude)); // map.clear();
                mOpt.title("Address : " + userHstry.getAddress()).snippet("Date : " + userHstry.getDate() + " , Time : " + userHstry.getTime());
                map.addMarker(mOpt); 
```

# wpf - 实心画笔属性不绑定

> ID：14703979
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:13.757
> 
> 标签：wpf, mvvm, datagrid, brush

我有一个 X 类有一些数据：

```
private string yyy;

public string YYY
{
    get { return yyy; }
    set
    {
        yyy= value;
        NotifyPropertyChanged("YYY");
    }
}

private SolidBrush color;

public SolidBrush Color
{
    get { return color; }
    set
    {
        color= value;
        NotifyPropertyChanged("Color");
    }
} 
```

我的数据网格绑定到此类，如下所示：

```
<DataGrid x:Name="dg1" ItemsSource="{Binding}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="yyy" >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding YYY}" Foreground="{Binding Color}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
</DataGrid> 
```

当我执行 Foreground="Red" 时，它可以工作，但绑定它不起作用，为什么？

我把它刷成这样的值：

```
this.Color = new SolidBrush(color); 
```

color 是一个包含任何颜色的变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:47:21.473

看起来您将[System.Windows.Media.SolidColorBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.aspx)与 [System.Drawing.SolidBrush](http://msdn.microsoft.com/en-us/library/system.drawing.solidbrush.aspx)混淆了，这不是 WPF 的一部分。

您必须使用`SolidColorBrush`而不是`SolidBrush`.

# android - 在 Android 2.1+ 上集成 Chartboost

> ID：14703980
> 
> 赞同：1
> 
> 时间：2013-02-05T09:23:14.820
> 
> 标签：android, reflection, chartboost

我将 Chartboost 集成到我的 Android 应用程序中。该应用程序适用于 Android 2.1+。Chartboost SDK 适用于 Android 2.2+。

在我请求 Chartboost 广告之前，我会检查 Android SDK 版本（确保它是 2.2+），但一些用户仍然抱怨崩溃。我相信这些是 2.1 用户，尽管它可能是别的东西。我无法在我的 2.1 设备上复制崩溃。

如何确保 Chartboost 调用不会崩溃？我已经将所有 Chartboost 调用都包含在 try/catch 块中。

注意：这可以被认为是关于如何支持不同 Android 平台版本的一般问题。

谢谢。

# objective-c - 如何使用 AFNetworking 在 UITableCell 中重新加载文本

> ID：14703985
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:33.973
> 
> 标签：objective-c, xcode, uitableview, afnetworking

我正在`UILabel`从 Rotten Tomatoes API 获取我的值，并且我希望我的自定义单元格中的文本在已经获取值时更新。我尝试通过重新加载我的来做到这一点，`UITableView`但它继续循环。

这是我的代码：

```
if (ratingTomatoLabel.text == nil)
    {
        NSLog(@"   Nil");

        NSString *stringWithNoSpaces = [movieTitle.text stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
        NSString *rottenTomatoRatingString = [NSString stringWithFormat:@"%@%@%@", @"http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=6844abgw34rfjukyyvzbzggz&q=", stringWithNoSpaces, @"&page_limit=1"];
        NSLog(@"   Rotten URL: %@", rottenTomatoRatingString);
        NSURL *rottenUrl = [[NSURL alloc] initWithString:rottenTomatoRatingString];
        NSURLRequest *rottenRequest = [[NSURLRequest alloc] initWithURL:rottenUrl];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:rottenRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
            NSLog(@"      3");
            self.testDict = [JSON objectForKey:@"movies"];
        } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
            NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
        }];

        [operation start];

        NSLog(@"   %@", ratingTomatoLabel.text);
        ratingTomatoLabel.text = @"...";
    }
    else if ([ratingTomatoLabel.text isEqualToString:@""])
    {
        NSLog(@"   isEqualToString");
        // Do nothing
    }
    else
    {
        NSLog(@"   else");
    }

    return tableCell;

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog(@"      fetched!");

    if ([ratingTomatoLabel.text isEqualToString:@"..."])
    {
        NSLog(@"      2nd nil");
        NSDictionary *dict = [self.testDict valueForKey:@"ratings"];
        self.criticsScoreString = [NSString stringWithFormat:@"%@", [dict valueForKey:@"critics_score"]];
        self.criticsScoreString = [self.criticsScoreString stringByReplacingOccurrencesOfString:@" " withString:@""];
        self.criticsScoreString = [self.criticsScoreString stringByReplacingOccurrencesOfString:@"(" withString:@""];
        self.criticsScoreString = [self.criticsScoreString stringByReplacingOccurrencesOfString:@")" withString:@""];
        self.criticsScoreString = [NSString stringWithFormat:@"%@%@", self.criticsScoreString, @"%"];

        ratingTomatoLabel.text = self.criticsScoreString;
        NSLog(@"      %@", ratingTomatoLabel.text);
    }
    else
    {
        NSLog(@"      2nd not nil");
        NSLog(@"      %@", ratingTomatoLabel.text);
        // Do nothing
    }
} 
```

如果我`[self.myTableView reloadData];`在文本中设置值后添加代码，它会循环。最好的方法是什么？谢谢！

更新：包括更新的代码和另一种方法。另外，我的 ratingTomatoLabel 在不显示时总是为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:29:52.003

杰特里克斯

由于 AFNetworking 调用异步发生，请考虑使用某种通知来告诉主线程 (UI) 工作何时完成或发生错误。

坦率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:41:41.993

您应该使用[KVO（键值观察）](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)来检测字典或数组何时发生更改 - 在这种情况下，它似乎是`self.testDict`.

当您收到此通知时，请使用 UITableView 的`-visibleCells`方法仅更新可见单元格 - 其他单元格在使用`-tableView:cellForRowAtIndexPath:`.

KVO 需要什么：在视图加载/更改时注册/取消注册并设置您希望观察的变量...

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if([keyPath isEqual:@"testDict"])
    {
        NSLog(@"KVO change: %@", change);
        NSArray *visibleCells = [self.myTableView visibleCells];
        for(UITableViewCell *cell in visibleCells)
        {
            if(/*cell matches the one I'm targeting OR just update regardless*/)
                // assign value to UILabel
        }
    }
}

// Call this from -viewDidLoad
- (void)registerAsObserver
{
    [self addObserver:self forKeyPath:@"testDict" options:NSKeyValueObservingOptionNew context:NULL];
}

// Call this from -viewWillDisappear and -viewDidUnload (may not be necessary for -viewDidUnload if already implemented in -viewWillDisappear)
- (void)unregisterAsObserver
{
    [self removeObserver:self forKeyPath:@"testDict"];
} 
```

最后，要更新已更改的单元格，请调用该`-reloadRowsAtIndexPaths:withRowAnimation:`方法让底层系统刷新该单元格。

# sencha-touch-2 - 如何在 Sencha Touch2 应用程序中使用 google OAuth2？

> ID：14703986
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:34.143
> 
> 标签：sencha-touch-2, google-calendar-api, google-oauth

我使用 Sencha Touch2 构建 Web 应用程序。在 iPhone 上，应用程序可以全屏使用。

我已经为 PC 浏览器构建了 Web 应用程序，并使用谷歌日历 API 与 OAuth2 连接。

授权步骤需要打开新窗口以登录用户谷歌帐户。

也许我可以使用与 pc 相同的架构构建 Sencha Touch 应用程序，但打开新窗口会使全屏应用程序关闭。

你知道如何在 Sencha Touch2 应用程序中使用 google OAuth2 吗？

-- 添加 2013/2/6

我的 Sencha Touch2 应用程序是 Web 应用程序。我想知道可以在全屏 Web 应用程序中授予权限，而不是在浏览器中。

-- 添加 2013/2/7

我用小费。 [http://miketheindian.com/2012/02/22/staying-in-full-screen-mode-on-the-iphone-from-page-to-page/](http://miketheindian.com/2012/02/22/staying-in-full-screen-mode-on-the-iphone-from-page-to-page/)

这种方式不需要打开浏览器。这比打开新窗口要好，但最好是在 iframe 中授权...

-- 添加2013/2/13 最后，我带路；

Google AOuth 是三种模式，供用户使用。

1.用户google账号退出，用户必须填写用户名和密码。

2.用户谷歌账号登录，但应用程序不被允许，用户必须点击“允许”按钮。

3.用户谷歌账号登录，用户不需要做任何事情。

3.的时候，我们可以在iframe中进行授权。并且，当 1\. 或 2\. 的时候，我们无法在 frame 中授权，所以使用 location.href 更改方法（详情在[http://miketheindian.com/2012/02/22/staying-in-full-screen -mode-on-the-iphone-from-page-to-page/](http://miketheindian.com/2012/02/22/staying-in-full-screen-mode-on-the-iphone-from-page-to-page/)）。

细节

make view 有容器 { xtype: 'container', html: '＜iframe src="" id="googleLogin" style="border:0;">' },

更改控制器中的 src

```
var iframe =  Ext.get(Ext.query('#googleLogin'));
iframe.set(
  {
    src: responseInformation.googleOAuthUrl
  }); 
```

3.的时候，用户google账号登录，就OK了。

当 1\. 或 2\. 的时候，我们改变 location.href。我们想处理 iframe “onerror” 事件，但没有那个事件。

我使用 settimer 并检查 iframe 的 src 是否没有更改第一个 src（因为错误重定向到谷歌登录页面）。

3000 ms 没有那么大的意义。3.的时候，重定向成功，页面发生变化。

```
me.timerId = setInterval(function(){
 if (iframe.el.dom.src.indexOf( /* first url */'') !== -1){
  location.href = iframe.el.dom.src;
  clearInterval(me.timerId);
 }
}, 3000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T16:33:35.203

还有另一种方法可以解决这个问题：

使用 Cordova 或 Sencha 的 inAppBrowser 插件启动 auth prompt，然后使用 eventListener 等待页面加载，如果 url 与成功回调 URL 匹配，则可以解析 url 并获取 auth/code 或 auth/token。使用 Cordova 的示例：

```
window.authmodal = window.open(authorizationUrl, '_blank', 'location=yes');
window.authmodal.addEventListener('loadstart', function(event){
  var code = getParam(event.url,"code");
    if(code != null){
      //here we got the code, now make a last request to get the TOKEN
      OAuth2Helper.finish(function(token){
        window.authmodal.close();
        window.localStorage.setItem("token",token)
        //do somethink else with your logic
      },code)   
    }else{
      //no code found in this page start.
    }

}); 
```

注意：OAuth2Helper.finish 使用代码向令牌 url 发出请求，以获得有效且可用的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:44:33.957

在 Android 上，使用设备上的本地联系人数据库而不是通过网络工作可能是个好主意。是的，用户必须授予权限，但无论如何他们都会访问网络。这样你就不需要旋转任何额外的浏览器或任何东西。

# javascript - Ember.js ember-data 查找远程服务器上的所有对象

> ID：14703989
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:42.620
> 
> 标签：javascript, ruby-on-rails, ember.js, client-side, ember-data

伙计们！是否有任何关于 ember-data 和远程后端服务器如何协同工作的示例（单独的应用程序 - 带有 ember.js 的客户端和抽象的后端服务器，例如 Rails）？这里的第二个问题 - 如何使用 ember-data 模型制作数组属性（对象数组）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:48:38.233

Ember 网站上有一个指南，提供了很好的解释；

[http://emberjs.com/guides/models/finding-models/](http://emberjs.com/guides/models/finding-models/)

如果您使用的是 Rails，您可能会使用 REST 适配器

[http://emberjs.com/guides/models/the-rest-adapter/](http://emberjs.com/guides/models/the-rest-adapter/)

这是一个使用 ember-data 和 Rails 的全功能 Ember 应用程序：

[https://github.com/dgeb/ember_data_example/](https://github.com/dgeb/ember_data_example/)

最后一个示例可能看起来应用程序是集成的，但客户端和后端是完全分开的。要更改适配器期望发送数据的位置，您可以在适配器中定义命名空间和/或 url：

```
App.Adapter = DS.RESTAdapter.extend({
  url: "http://www.domain.com/path/to/remote_app/",
  namespace: "api/v1"
}); 
```

# java - 每个线程的方面和每个线程团队的方面

> ID：14703992
> 
> 赞同：1
> 
> 时间：2013-02-05T09:23:55.673
> 
> 标签：java, aspectj

我想知道 AspectJ 中是否有一种方法可以为每个线程声明一个方面，以及是否有一种方法可以为每个线程组声明一个方面？

通过线程团队，我指的是这个例子：

给定线程'X'创建'N'个新线程，然后'X'是这个团队的主人，如果这个团队中的给定线程'Y'也由他们自己创建一个新团队，'Y'将成为主人这个新团队的。所以我想知道我是否可以通过线程'X'向团队生产的团队声明一个方面'A'，并为团队'Y'声明一个方面'A'的不同“实例”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:01:50.793

AspectJ 只操作字节码。所以它在生成Aspects hook时无法确定运行时信息（你知道调用代码的线程是运行时信息）。

如果您需要创建线程唯一状态，请使用[ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)。如果您需要创建 ThreadGroup 唯一状态，您应该做一些手动工作。看看它是如何实现的：[ThreadGroup local variables](https://stackoverflow.com/questions/2017155/are-there-thread-group-local-variables-in-java)。另请注意，在 Java 中您[无法确定父线程](https://stackoverflow.com/a/11722794/1554314)，因此您需要使用 ThreadGroup。

并且每次当你想使用 ThreadLocal 状态和 Aspects 时，想想你的程序设计，它是否适合你？

# ruby-on-rails - 使用 rails 处理查询字符串

> ID：14703994
> 
> 赞同：0
> 
> 时间：2013-02-05T09:23:56.813
> 
> 标签：ruby-on-rails, string, controller, helper

这里是一个完整的 Rails 初学者。如何处理 Rails 中的查询字符串？例如：www.something.com/movie?sort=title

为了实现 haml 文件中的视图，我该如何制作以便单击电影标题将发送该查询字符串，更重要的是如何处理它。我应该在哪里实现可以使用 :params 访问该查询字符串的函数。

我已经研究了一天多，无法理解该查询字符串是否会从帮助程序调用控制器函数或模块。

我希望我对这个问题足够清楚。任何帮助将不胜感激。

PS：- 有一个电影表，标题是它的列之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:28:00.107

不知道我真的明白你想要什么。这适合你吗？

```
link_to "My Link", movie_index_path(sort: :title) 
```

然后使用 ? 访问参数`params[:sort]`？

（`movie_index_path`根据你的路线配置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:19:11.957

由于您的问题没有重点，让我假设您的问题的一部分。

假设

1.  您在 app/controllers/ 中有一个控制器名称 movies_controller.rb
2.  文件夹您在 app/models 文件夹中有一个名为 movie.rb 的模型

然后你应该告诉 Rails 将带有路径 /movies 的请求路由到 movies_controller.rb。这可以通过在 config/routes.rb 中添加以下行来完成

```
resources :movies 
```

如果您调用 www.something.com/movies，这将调用 movies_controller.rb 中的方法索引。所以你应该写一些代码来在这里显示电影。

```
class MoviesController < ApplicationController
 def index
   @movies = Movie.all
 end
end 
```

然后你应该使用 app/views/movies/index.haml 文件来显示电影。有一个链接可以按标题对电影进行排序。

```
link_to "Sort by title", movies_path(:sort=>"title") 
```

不，当单击链接时，用户现在将使用参数到达相同的索引方法。您可以获得如下所示的排序值。

```
params[:sort] 
```

所以要支持排序，您需要稍微更改控制器代码。

```
class MoviesController < ApplicationController
 def index
  if params[:sort]
   @movies = Movie.order('#{params[:sort]} ASC')
  else
    @movies = Movie.all
  end
 end 
end 
```

我强烈建议您在提问之前浏览[http://guides.rubyonrails.org/index.html 。](http://guides.rubyonrails.org/index.html)

# proof - Isabelle/HOL 中的 Verifier 核心

> ID：14703998
> 
> 赞同：8
> 
> 时间：2013-02-05T09:24:15.567
> 
> 标签：proof, isabelle

## 问题

Isabelle/HOL验证器的核心算法是什么？

我正在寻找计划元循环评估器级别的东西。

## 澄清

我只对*Verifier*感兴趣，而不是自动定理证明的策略。

## 语境

我想从头开始实现一个简单的证明验证器（纯粹是出于教育原因，而不是用于生产用途。）

我想了解 Isabelle/HOL 的核心*Verifier*算法。我不关心用于自动定理证明的策略/代码。

我怀疑核心*验证器*算法非常简单（而且优雅）。但是，我找不到它。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T21:05:17.513

Isabelle 是“LCF 系列”证明检查器的成员，这意味着您有一个特殊的模块——推理内核——所有推理都在其中运行以产生抽象数据类型的值`thm`。这有点像操作系统内核处理系统调用。相对于内核实现的正确性，您可以通过这种方式生成的所有内容都是“构造正确的”。由于证明者的编程语言环境（标准 ML）具有非常强的静态类型正确性属性，推理内核的构造正确性会延续到证明助手实现的其余部分，这可能是非常巨大的。

所以原则上你有一个相对较小的“可信内核”部分和一个非常大的“应用程序用户空间”。特别是，Isabelle/HOL 的大部分内容实际上是 Isabelle 用户空间中大量的图书馆理论和附加工具（主要是 SML）的集合。

在 Isabelle 中，内核基础结构非常复杂，但与系统的其余部分相比仍然非常小。内核实际上分为“微内核”（[模块`Thm`）](http://isabelle.in.tum.de/repos/isabelle/file/tip/src/Pure/thm.ML)和“纳米内核”（[模块`Context`）](http://isabelle.in.tum.de/repos/isabelle/file/tip/src/Pure/context.ML)。 `Thm`产生`thm`Milner 的 LCF 方法意义上的值，并`Context`处理`theory`您产生的任何结果的证书，以及本地推理的证明上下文（特别是在 Isar 证明语言中）。

如果你想了解更多关于 LCF 风格的证明者，我建议你也看看[HOL-Light](http://www.cl.cam.ac.uk/~jrh13/hol-light/)，它可能是 LCF 系列中最小的现实系统，在人们用它完成大型应用的意义上是现实的。HOL-Light 最大的优点是它的实现可以很容易理解，但是这种极简主义也有一些缺点：它并没有完全保护用户在它的 ML 环境中做无意义的事情，它是 OCaml 而不是 SML。由于各种技术原因，OCaml 默认情况下不如标准 ML 那样“安全”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:54:11.237

如果你解开 Isabelle 的来源，例如

[http://isabelle.in.tum.de/dist/Isabelle2013_linux.tar.gz](http://isabelle.in.tum.de/dist/Isabelle2013_linux.tar.gz)

您将在中找到核心定义

src/Pure/thm.ML

而且，您已经有这样一个项目要处理：

[http://www.proof-technologies.com/holzero/](http://www.proof-technologies.com/holzero/)

后来补充：另一个更严肃的项目是

[https://team.inria.fr/parsifal/proofcert/](https://team.inria.fr/parsifal/proofcert/)