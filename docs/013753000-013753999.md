# StackOverflow 问答 13753000-13753999

# html - 如何将自定义标记添加到通用 OpenLayers 控件？

> ID：13753000
> 
> 赞同：1
> 
> 时间：2012-12-06T21:32:37.353
> 
> 标签：html, image, controls, openlayers

我正在使用自定义 OpenLayers 控件来更改功能上图标的样式。它看起来像这样：

```
StyleFeature = OpenLayers.Class(OpenLayers.Control, {
    layer = null,
    style = null,
    initialize: function (layer, style, options) {
        OpenLayers.Control.prototype.initialize.apply(this, [options]);
        this.layer = layer;
        this.style = style;
    },
    activate: function() {
        this.layer.styleMap.styles["default"] = this.style;
        this.layer.styleMap.styles["temporary"] = this.style;
        this.layer.styleMap.styles["select"] = this.style;
        return OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    CLASS_NAME: "OpenLayers.Control.StyleFeature"
}); 
```

这很好用，但我想使用我传入的样式中的 externalGraphic 将图像标签放在 OpenLayers 控件本身上。目前，我唯一的样式选项似乎是通过 css 实现的。

有任何想法吗？

# python - Windows 和 Mac OS 之间的 subprocess.Popen 有何不同？

> ID：13753001
> 
> 赞同：2
> 
> 时间：2012-12-06T21:32:45.490
> 
> 标签：python, macos, subprocess

我一直在 Windows 上运行一些 python 代码，它使用以下行打开另一个 python 程序'main_plot.py'...

```
subprocess.Popen(['C:\\python26\\python.exe ','main_plot.py','-n', str(number_of_cores),'-m', str(number_of_motors)]) 
```

我试图通过 ssh 进入 Mac OS 电脑以运行相同的代码，但它不起作用，因为我认为我需要更改路径。这是我的第一个猜测...

```
subprocess.Popen(['python','main_plot.py','-n', str(number_of_cores),'-m', str(number_of_motors)]) 
```

但我得到了错误...... python：无法打开文件'main_plot.py'：[Errno 2]没有这样的文件或目录

我也试过

```
subprocess.Popen(['python','~/code/stochastic/main_plot.py','-n', str(number_of_cores),'-m', str(number_of_motors)]) 
```

但我得到同样的错误。

我已经检查过该文件是否在“~/code/stochastic”中，确实如此。我有点不知道下一步该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:35:27.167

问题不在于 Windows 和 Mac 之间的区别。那是您仅`~`在Mac上使用，而不能`~`在路径名中使用。

换一种说法，`~/code/stochastic/main_plot.py`不是真正的路径名——或者更确切地说，它是，但它正在寻找`~`在当前目录下命名的目录，而不是你的主目录。shell 使用 tilde-expansion 将其转换为真正的路径名。Python 也可以进行波浪号扩展，但您必须明确要求它这样做。

所以，解决方案很简单：

```
subprocess.Popen(['python',
                  os.path.expanduser('~/code/stochastic/main_plot.py'),
                  '-n', str(number_of_cores),'-m', str(number_of_motors)]) 
```

正如 Jeremy Roman 在评论中指出的那样，如果你使用 ，你可以*在*`~`路径中使用`shell=True`，因为这样 Python 会将你所有的 args 放在一个命令行中以传递给 shell，而 shell*确实*处理`~`。但你不想那样做。只要打电话`expanduser`。

为了将来参考，shell 所做的所有其他类型的扩展也是如此。你不能做`"${HOME}/foo"`，但你可以做`os.path.expandvars("${HOME}/foo")`。你不能这样做`"foo$((1+1))bar"`；你必须做类似的事情`"foo%sbar" % (1+1,)`。等等。

# servicestack - 使用 ServiceStack 的 PostFileWithRequest 方法上传文件时显示进度

> ID：13753002
> 
> 赞同：2
> 
> 时间：2012-12-06T21:32:46.470
> 
> 标签：servicestack

我正在开发一个使用 ServiceStack、Mono For Android 和 MonoTouch 的 Android 和 iPhone 移动应用程序。该应用程序的一部分允许用户将文件上传到我们的服务器，我目前正在通过 'JsonServiceClient.PostFileWithRequest(string relativeOrAbsoluteUrl, Stream fileToUpload, string fileName, object request)' 方法执行此操作。这工作正常，但是我想显示一个进度条，指示发送的数据。

对于我的第一次尝试，我创建了一个包装 Stream 的类，并在从流中读取数据时定期引发 ProgressChanged 事件。不幸的是，这并不能很好地工作，因为似乎所有数据都是在任何发送对象之前从流中读取的（至少对于我测试过的高达 90Mb 的文件）。效果是进度条快速运行到 100%，然后在数据实际传输到服务器时处于 100%。最终 PostFileWithRequest() 调用完成，文件传输成功，但进度条行为不太理想。

有没有人对我如何获得更准确地代表文件上传进度的进度更新有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:51:41.127

我想出的解决这个问题的解决方案是将源流分成块并多次调用“PostFileWithRequest”。我在通话后更新进度条。使用这种方法很容易实现取消和重新启动上传，但我确信这不会特别有效。

无论如何，在伪代码中，我的解决方案看起来像这样：

```
using (var client = new JsonServiceClient(WebServiceAddress))
{
    var src = GetStreamForFileToSend();
    long totalBytes = src.CanSeek ? src.Length : 0;
    long byteOffset = 0;

    byte[] Chunk = new byte[Constants.UploadChunkSize];
    for (int read; (read = src.Read(Chunk, 0, Chunk.Length)) != 0;)
    {
        // Progress update
        UploadProgress(byteOffset, totalBytes);

        using (var mem = new MemoryStream(Chunk, 0, read))
        {
            // The request contains a guid so the web service can concatenate chunks
            // from the same client
            var request = new UploadFileData(MyUniqueClientGuid, byteOffset, totalBytes);

            // Send the chunk
            UploadFileDataResponse response = client.PostFileWithRequest<UploadFileData>(
                UploadFileData.Route, mem, filename, request);

            // Cancelling supported easily...
            if (response.Cancelled)
                break;

            byteOffset += read;

            // Can also use 'src.Seek()' and send only the remainder of the file if the
            // response contains info about how much of the file is already uploaded. 
        }
    }
} 
```

# css - Susy Columns 媒体布局查询

> ID：13753005
> 
> 赞同：2
> 
> 时间：2012-12-06T21:32:55.163
> 
> 标签：css, sass, susy-compass

我最近在几个项目中使用了 Compass Susy 并且有一些关于它的问题，现在我已经尝试了几次。

顺便说一下，我从桌面优先的工作流程开始。

在这些项目中，我设置了默认的列宽、间距等。

假设我有一个 90px 的 12 列网格和 10px 排水沟

然后，当我到达移动媒体查询时，假设我想要一个 4 列网格，然后我有一个媒体布局，例如： $mobile: 4 480px

@include at-breakpoint($mobile) { // 这里的样式 }

我真正感到困惑的是我不了解媒体布局。如果我在媒体布局中指定我想要最小宽度为 480 像素的 4 列，那么它如何知道列的宽度或我想要的装订线宽度。我猜它使用默认值。那是它使用的吗？

为了解决这个问题，对于每个媒体查询，我最终不得不设置媒体查询，跨越列，然后使用 with-grid-settings mixin 指定一个新网格，然后重新包含容器。

我可能只是搞错了。有人可以解释它是如何工作的以及我应该如何正确使用 Susy 吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:40:34.627

你是对的。`at-breakpoint`并不是要为您提供每种尺寸的全新网格设置 - 只是为了更改列数。`with-grid-settings`是用于更改网格设置的正确工具，如果您需要更改不同大小的网格设置，它们两者可以很好地协同工作。

```
@include at-breakpoint($mobile) { 
  @include with-grid-settings(4,3em,2em,1em) { // styles here }
} 
```

目前没有捷径。

# java - 尝试从另一个 java 程序调用时出现目录错误

> ID：13753007
> 
> 赞同：0
> 
> 时间：2012-12-06T21:32:56.350
> 
> 标签：java

我正在尝试从另一个目录中的另一个 java 程序调用一个 java 程序。我收到“没有这样的文件或目录”错误，但我可以复制并粘贴我试图从错误中访问的目录，它工作正常。

```
 Exception in thread "main" java.io.IOException: Cannot run program "java -classpath /home/paleus/directories/trunk/web/postProc PostProcAuto": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:474)
    at java.lang.Runtime.exec(Runtime.java:610)
    at java.lang.Runtime.exec(Runtime.java:483)
    at PreParseAuto.parseEmail(PreParseAuto.java:352)
    at PreParseAuto.main(PreParseAuto.java:79)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:467)
    ... 4 more
[paleus@vm20031 preParsing]$ java -classpath /home/paleus/directories/trunk/web/postProc PostProcAuto
Please run as: inFile outFile procType[Inferencing=0|Phone=1|Email=2|Addr=3]
[paleus@vm20031 preParsing]$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:53:55.943

尝试为命令提供完整路径

所以而不是

```
java --classpath ... 
```

做

```
C:\Program Files\Java\jdk1.7\bin\java --classpath ... 
```

此外，如果参数有空格，您可能需要引用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:22:12.617

弄清楚了

需要：

```
Process x = Runtime.getRuntime().exec(new String[]{"java","-classpath",postProcPath,"PostProcAuto",outFile.split("\\."), "2"}); 
```

而不是：

```
Process x = Runtime.getRuntime().exec(new String[]{"java -classpath " + postProcPath +" PostProcAuto", outFile.split("\\."), "2"}); 
```

# c++ - 动画弹出显示

> ID：13753010
> 
> 赞同：1
> 
> 时间：2012-12-06T21:33:07.033
> 
> 标签：c++, winrt-xaml

我在 Windows Store 应用程序中使用一个简单的故事板来淡入动态创建的弹出窗口的显示。目标是弹`storyboard`窗，代码是：

```
popup -> IsOpen = true;      
Storyboard^ storyboard = dynamic_cast<Storyboard^>(Resources -> Lookup("fadeIn"));
storyboard->Begin(); 
```

这行得通，但由于我不清楚弹出窗口和故事板彼此了解多少，我想知道在故事板开始之前是否存在弹出窗口可能显示的任何情况。例如，它是否取决于 UI 循环时间，弹出窗口在下一个循环开始时等待打开，如果故事板在同一个循环中开始，淡入会发生，否则不会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:56:19.833

那也行。当 UI 开始渲染时，它会检查“IsOpen”，如果是打开的，则显示它。然后开始淡入。

# guard - 从命令行运行guard-jasmine 不运行任何规范

> ID：13753016
> 
> 赞同：4
> 
> 时间：2012-12-06T21:33:22.020
> 
> 标签：guard

我已经设置`spec/javascripts/spec.js.coffee`并拥有一个包含 3 个测试的规范文件`spec/javascripts`。当我在浏览器中运行 jasmine 时，会运行 3 个测试。

当我运行guard并启动并运行guard-jasmine时，它会找到并运行我的所有测试，如下所示：

```
$ bundle exec guard
Guard uses GNTP to send notifications.
Guard is now watching at '/workpath'
Guard::Jasmine starts Unicorn test server on port 52512 in development environment.
Waiting for Jasmine test runner at http://localhost:52512/jasmine
Run all Jasmine suites
Run Jasmine suite at http://localhost:52512/jasmine

Finished in 0.013 seconds
3 specs, 0 failures
Done. 
```

但是，当我`guard-jasmine`从终端运行时，找不到规范：

```
$ guard-jasmine
Guard::Jasmine starts Unicorn test server on port 53307 in test environment.
Waiting for Jasmine test runner at http://localhost:53307/jasmine
Run all Jasmine suites
Run Jasmine suite at http://localhost:53307/jasmine

Finished in 0.001 seconds
0 specs, 0 failures
Done.

Guard::Jasmine stops server. 
```

关于我需要更改哪些内容以帮助 CLI 运行程序找到我的规格的任何想法？

谢谢。

编辑：添加相关的 Guardfile 信息：

```
guard :jasmine, timeout: 120, server_timeout: 120, server_env: "test" do
  watch(%r{spec/javascripts/spec\.(js\.coffee|js|coffee)$}) { 'spec/javascripts' }
  watch(%r{spec/javascripts/.+_spec\.(js\.coffee|js|coffee)$})
  watch(%r{app/assets/javascripts/(.+?)\.(js\.coffee|js|coffee)(?:\.\w+)*$}) { |m| "spec/javascripts/#{ m[1] }_spec.#{ m[2] }" }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:19:32.520

问题是`guard`默认情况下在开发环境中运行，而 rake 任务和可执行文件`guard-jasmine`在测试中运行。

`config.assets.debug = true`我通过添加到测试环境配置来修复它。

# cron - 我试图用 cron 脚本启动 openerp-server

> ID：13753020
> 
> 赞同：0
> 
> 时间：2012-12-06T21:33:46.747
> 
> 标签：cron, shared-hosting, openerp, webfaction

我有一个 webfaction 帐户，我安装了 openerp-server 6.1.1，当从 ssh 会话启动服务器时它可以工作，当我关闭会话时它也会关闭服务器。所以我试图用cron启动服务器。

从 cron 我调用这样的脚本：

*/1 * * * * ~/webapps/openerp/start.sh

和脚本：

# .bash_profile

openerp-server -c /home/usuario/webapps/openerp/server.conf

它不起作用....

但是，如果我从命令行调用脚本，则服务器加载正常......

有什么方法可以调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:59:46.577

添加到您的 cron 命令：

su -c "nohup openerp-server -c /home/usuario/webapps/openerp/server.conf &" - 用户名

这样，您将拥有：

1.- 使用不同于 root 的用户运行命令。2.- “man nohup” nohup 将您的应用程序留在了后台。

我希望它对你有帮助。

# fortran - 创建随机数的对数正态分布？

> ID：13753021
> 
> 赞同：2
> 
> 时间：2012-12-06T21:33:49.190
> 
> 标签：fortran

我正在尝试在 Fortran 90 中重新编写一些 Python / numpy 代码。在我的 Python 代码中，我使用以下命令生成 5000 个随机对数正态分布数：

`numpy.random.lognormal(mu,sigma,5000)`

我正在尝试在 Fortran 中做同样的事情。我对 Fortran 不是很熟悉，但我在 Intel 的网站上找到了这个：

`status = vdrnglognormal( method, stream, n, r, a, sigma, b, beta )`

[http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-C564D9DC-FDF0-426B-9C9D-1740969BDBEC.htm](http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-C564D9DC-FDF0-426B-9C9D-1740969BDBEC.htm)

我知道`n,r,a,sigma,b`和`beta`是什么，但我不知道方法/流是什么意思，以及我应该将这些值作为什么传递。还有，什么是状态？我如何在我的代码中调用这个函数？我需要包含任何文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:04:29.873

另一种可能的解决方案：GNU 科学库 (GSL) 提供了一个函数来返回日志正态偏差，gsl_ran_lognormal。GSL 在 C 中。有一个 Fortran 接口，FGSL，[http:](http://www.lrz.de/services/software/mathematik/gsl/fortran/) //www.lrz.de/services/software/mathematik/gsl/fortran/，使用 ISO C 绑定。或者您可以编写自己的界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:03:49.050

或者您可以编写自己的日志正常功能。

给定一个零均值、单位偏差正态分布的随机变量`x`，那么对数正态分布很简单

```
y = exp(mu+sigma*x) 
```

而且，如果你没有一个函数，`x`你可以使用 Marsaglia 极坐标方法只用几行代码来制作一个。

# gridview - 如何为单个按钮单击对 gridview 进行多次回发/ajax 更新？

> ID：13753025
> 
> 赞同：0
> 
> 时间：2012-12-06T21:34:09.440
> 
> 标签：gridview, webforms, ajaxcontroltoolkit

我正在研究搜索功能，并受到后端的限制。我试图通过进行多次小搜索而不是一次大搜索来加快速度。我目前正在做的是在 OnClick 事件中，首先进行搜索并将结果返回到 gridview。如果有更多的搜索要做，我使用 AjaxControlToolkit.ToolkitScriptManager.RegisterStartupScript 注册一个再次单击提交按钮的小函数。

这可行，但似乎是一种黑客行为，我觉得应该有更好的方法。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:51:16.710

The first option that comes to mind is an extra layer of complexity but would probably gain your the best user experience by using ajax to pull sets of results as many times as needed using a small service to provide the data. I provided that example with a little bit of jquery to show the call.

```
searchRequest = $.ajax({
            url: '/GetSearchData.svc',
            data: { searchText: 1 },
            traditional: true,
            success: function(data) {

                // Do something with returned data or kick off another async request
        }); 
```

This would allow you to pull the raw data in any size or chunks that you want. Or to attach them to another event such as scroll to add items over time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:12:53.090

我最终使用了这样的计时器：

```
 <asp:Timer runat="server" ID="timer1" Interval="1000"
   ontick="timer1_Tick" Enabled="false" /> 
```

然后在 Button 的 onClick 事件中，我启动了一个线程来执行搜索并启动计时器。

```
timer1.Enabled = true;
ThreadStart ts = continueSearch;
Thread thread = new Thread(ts);
thread.Start(); 
```

在 timer1_Tick 处理程序中：

```
if(Session["SearchResults"] != null)
{
    DataView dv = (DataView)Session["SearchResults"];
    dv.Sort = (string)Session["SortExpression"] + (string)Session["SortDirection"];
    gvResults.DataSource = dv;
    gvResults.DataBind();
} 
```

# sql - 将复合主键的一列作为外键引用

> ID：13753027
> 
> 赞同：3
> 
> 时间：2012-12-06T21:34:11.513
> 
> 标签：sql, oracle, foreign-keys

在 中`table A`，我有 3 个字段的组合作为 a`primary key`并且在`table B`我有一个组合（这不是唯一的）。我想参考`table A`以缓解`delete`(with `ON DELETE CASCADE`)。

那么，我是否不得不将其他两个字段放在表 B 中并以此作为参考，`composite`还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:41:37.487

如果要在两个表之间创建外键约束，则子表必须具有构成父表上主键约束的所有列（这是我不鼓励使用复合主键的原因之一键）。如果希望 Oracle 在删除父行时自动删除子行，则需要使用`ON DELETE CASCADE`. 所以你的选择是

*   将构成父级主键的所有列添加到子级。
*   重新设计父表，以便有一个单列主键（可能是合成键）并在子表中使用它。
*   编写自己实现删除的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:44:17.223

您可以在表 A 中创建一个新的单列（可能是序列生成的）主键，并使现有的复合键成为唯一键而不是主键。然后从表 B 中引用您的新主键。

# django - 搜索引擎正确索引多语言网站

> ID：13753028
> 
> 赞同：0
> 
> 时间：2012-12-06T21:34:24.060
> 
> 标签：django, internationalization

我已经部署了一个多语言站点。应用程序检测导航器配置的语言并以该语言显示站点，如果导航器语言不可用，则站点以英语显示。

此外，用户可以使用选择器切换到另一种语言：

```
<li><a href="?lang=da"><span id="flag_da">&nbsp;</span>Dansk</a></li>
<li><a href="?lang=de"><span id="flag_de">&nbsp;</span>Deutsch</a></li>
<li><a href="?lang=en"><span id="flag_en">&nbsp;</span>English</a></li>
<li><a href="?lang=es"><span id="flag_es">&nbsp;</span>Español</a></li>
<li><a href="?lang=fr"><span id="flag_fr">&nbsp;</span>Français</a></li>
<li><a href="?lang=it"><span id="flag_it">&nbsp;</span>Italiano</a></li>
<li><a href="?lang=nl"><span id="flag_nl">&nbsp;</span>Nederlands</a></li> 
```

中间件模块是`lang`在 request.GET中更改语言的人

问题是我怀疑搜索引擎（谷歌，必应，...）不会遵循此切换语言链接，并且该站点将仅以英语编制索引。而且，如果此链接被跟踪，相同的 url 将具有不同语言的相同内容，这可能会误导搜索引擎（这是猜测）。

**这个 django 应用程序中最有效的变化是什么可以被多语言很好地索引？**

请注意，这是一个 django 应用程序，我认为将语言代码放在每个 url 的开头并不容易（更改`http://www.domain.com/some_url`为`http://www.domain.com/en/some_url`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:09:28.980

如果您正在运行 1.4.x，您可以使用[i18n_patterns](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns)通过`http://www.domain.com/some_url`变成`http://www.domain.com/en/some_url`（如果英语是活动语言）来处理语言特定的 url。

# javascript - 检查图像上的 500 个错误时最好的方法是什么？

> ID：13753038
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:35:19.210
> 
> 标签：javascript, jquery, html, jsonp, getjson

如果我正在使用的网络服务出现故障，想显示其他图像。有人可以显示一般条件语句。

想要解析 jsonp，无论 js 文件中的谁函数更改名称：OX7289210029({my:example})

我可以使用正则表达式来解析任何以“OX”常量开头的 JSONP 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:40:29.543

您可以尝试以下代码来确定图像是否存在：

```
function urlExists(testUrl) {
 var http = jQuery.ajax({
    type:"HEAD",
    url: testUrl,
    async: false
  })
  return http.status!=404;
} 
```

比使用

```
if(urlExists('urlToImgOrAnything') {
...
}
else {
...
} 
```

如果有任何问题或疑虑，请检查并告诉我。

谢谢和问候， 杜尔加普拉萨德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:44:10.843

最好的方法是使用纯 javascript：

**Javascript**

```
var img = new Image(); //Create new Image object

img.src = "notexisting"; //notexisting = your own path

img.onerror = function() { alert("TEST"); } //Alerts test on failure 
```

或者如果你坚持使用 jQuery...

**jQuery**

```
$("imageselector").error(function() {
    alert("Image error!");
}); 
```

# jquery - jQuery on() 不工作

> ID：13753039
> 
> 赞同：2
> 
> 时间：2012-12-06T21:35:20.690
> 
> 标签：jquery, html

我在我的网站上动态生成按钮。要检测`click`这些元素的状态，我相信您需要使用 jQuery 的`on()`. 我尝试了以下方法，但似乎不起作用。难道我做错了什么？

```
$('.press').on('click', function() {
    alert('clicked'); //Does not trigger on dynamic elements
}); 
```

当您查看我的[JSFiddle](http://jsfiddle.net/GBRaY/1/)时，请注意单击动态生成的按钮不会产生结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T21:37:14.400

当您想委托​​事件处理时，选择器会继续*包含*动态元素的元素（一直到`document`），第二个参数`.on`是选择器：[请参阅文档](http://api.jquery.com/on/)

```
$(document).on('click', '.press', function () { ... 
```

我建议在使用委托时尝试使用尽可能具体的选择器，以便需要最少的遍历。不过，它通常不会产生太大的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:37:44.337

对于动态生成的元素，您需要使用事件委托。.on() 需要应用于父元素才能进行委托

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T21:36:29.633

**委托活动**

```
$('body').on('click','.press', function() {
    alert('clicked'); // now it triggers on dynamic elements
}); 
```

你可以用`static parent container`..替换身体

`not available in the DOM`当您附加事件时，您的方法将不起作用，因为元素仍然存在。

**[检查小提琴](http://jsfiddle.net/sushanth009/GBRaY/2/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T21:36:37.633

它应该是

```
$(document).on('click', ".press", function() {
    alert('clicked'); 
}); 
```

`$('.press')`查找当前文档中的所有元素并将事件绑定到它们上，因此它不适用于您稍后添加的元素，因为它们在被选择时不存在。

`$(document)`选择`document`始终存在于任何地方和任何地方的 ，并将事件绑定到它。然后它过滤`.press`，以便只有匹配`.press`的元素才会真正调用回调。

请注意，您应该选择一个父元素，它是元素的共同父`.press`元素并且当时存在，而不是使用`document`.

# php - cURL - 列出 FTP 目录内容，或下载整个目录

> ID：13753042
> 
> 赞同：0
> 
> 时间：2012-12-06T21:35:46.197
> 
> 标签：php, curl, ftp

使用 CURL 并通过 FTP 连接，我如何列出远程目录的内容？我不需要单独下载单个文件并且必须知道文件名，而是需要下载整个远程目录（这将只是一堆文本文件）。

有没有办法使用带有 cURL 的 FTP 来：

1.  下载目录中的所有文件
2.  列出目录中的所有文件，以便我可以遍历这些文件并下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:40:14.630

如果你不必使用 cURL，[试试这个家伙。](http://php.net/manual/en/book.ftp.php). 它看起来更接近您正在寻找的东西！

# unit-testing - 如何（谷歌）模拟 DBUS 接口？

> ID：13753049
> 
> 赞同：0
> 
> 时间：2012-12-06T21:36:03.133
> 
> 标签：unit-testing, googlemock

假设我有一个带有以下代码的课程

```
void MessageBuilder::Init(DBusMessage* pMsg)
{
    if (NULL != m_pMsg)
    {
        ::dbus_message_unref(m_pMsg);
    }
    // m_pMsg is a private data member
    m_pMsg = pMsg;
    ::dbus_message_iter_init_append(m_pMsg, &m_objArgs);
} 
```

DBUS 调用位于命名空间中，因此是 ::（我相信）。谁能建议如何模拟/存根 ::dbus_* 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:18:51.910

使用 GoogleMock，您可以伪造类的虚拟方法。但是 ::dbus_* 函数不是任何类的成员（你是对的，它们位于命名空间中：全局命名空间）。所以你不能（直接）使用 GoogleMock。

James W. Grenning 在*嵌入式 C 的测试驱动开发中为*您的问题提出了一些解决方案：

1.  **链接时替换**：不要将测试代码链接到包含 ::dbus_* 函数代码的原始库，而是在测试项目中创建新的 C/CPP 文件，这些文件实现了所有 ::dbus_* 函数使用的伪造品被测组件。还将被测组件添加到测试项目中，因此链接器将自动解析 ::dbus_* 对您的假货的调用。
2.  **函数指针替换**：不要直接使用被测组件中的 ::dbus_* 函数，而是使用函数指针，这些函数指针在生产代码中初始化为 ::dbus_* 函数，在测试代码中初始化为假函数。
3.  **预处理器替换**：用于`#define`覆盖名称，例如`#define dbus_message_unref(p) fake_dbus_message_unref(p)`使被测组件调用您自己的假函数`fake_dbus_message_unref()`。这种方法需要将被测组件添加到测试项目中。

如果提案 1\. 可行并且不会产生链接问题，那么它比提案 2 的工作量要少得多。提案 3\. 的俗气部分是它实际上更改了（！）被测组件的代码，所以我宁愿害羞远离 3.**建议 1\. 是推荐的方式。**

Another alternative could be to use C++ wrapper classes with virtual methods around the ::dbus_* functions, so you can use a mocking tool like GoogleMock to fake them. Writing such wrappers would probably mean quite some effort. As short cut you could search for a DBUS C++ wrapper library -- if you are lucky you find a mockable one.

# sharing - 防止共享代码中的蠕变和依赖性

> ID：13753051
> 
> 赞同：2
> 
> 时间：2012-12-06T21:36:21.443
> 
> 标签：sharing, code-sharing

在工作中，我们有几个 C# 项目，有时我们会在它们之间共享类和函数。但是，有时该代码嵌入在类中，这些类会带来人们不想为了一个功能而处理的依赖项。所以最终将一两个函数或类复制并粘贴到他们的代码中。

这让我觉得很糟糕。

但是，如果我们将其分解为它自己的共享工具项目以避免出现问题，那么有人会添加他们自己的函数和类，很快我们就会回到原来的位置。或者他们最终在另一个他们不知道的项目中编辑代码并破坏代码。

如何正确分享但不踩到对方的脚趾？复制粘贴到底是不是正确的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:03:56.183

复制粘贴是一种经常选择的路径，但几乎总是错误的选择。

处理这个问题的最好方法是隔离共享代码，使其对代码库的其他部分有意义。例如，如果不需要的依赖项是一个问题，请将它们的解决方案本地化到实际需要它们的地方。

关于不必要的类/方法的扩散问题，确实必须通过指导方针和治理来管理。

# jquery - 如何让这些图像在切换时停止“闪烁”？

> ID：13753054
> 
> 赞同：1
> 
> 时间：2012-12-06T21:36:23.613
> 
> 标签：jquery, html, css

我在使用 jQuery 图像旋转器时遇到了一些问题。当快速单击下一个/上一个按钮两次时，图像会闪烁，您最终会看到两个图像。关于如何解决它的任何想法？

这是HTML

```
<div id="prev">
<img id="prevListing" class="prevListing" src="..." onmouseover="this.src='...'" onmouseout="this.src='...'">
</div>

<div class="faded">
<div id="fader">
<img src="...">
<img src="...">
</div>
</div>

<div id="next">
<img id="nextListing" class="nextListing" src="..." onmouseover="this.src='...'" onmouseout="this.src='...'">
</div> 
```

CSS

```
.used {float:left; width:50%;}

.usedListingImage {width:65%;float:left; display:block; margin:-1% auto 0 auto; max-width:400px;}

#fader{display:block;  width:95%;}

.nextListing {width:5%;float:right; margin:6% 5% 5% 5%;padding-right:5%;}

.prevListing  {width:5%;float:left; margin:7% 5% 5% 5%; } 
```

和 jQuery

```
<script type="text/javascript">
jQuery (function() {
    $('#fader img:not(:first)').hide();

    $('#fader img').each(function() {
        var img = $(this);
        $('<img>').attr('src', $(this).attr('src')).load(function() {
            img.css('margin-left', -'0');
        });
    });

    var pause = false;

    function fadeNext() {
        $('#fader img').first().fadeOut().appendTo($('#fader'));
        $('#fader img').first().fadeIn();
    }

    function fadePrev() {
        $('#fader img').first().fadeOut();
        $('#fader img').last().prependTo($('#fader')).fadeIn();
    }

    $('#fader, #next').click(function() {
        fadeNext();
    });

    $('#prev').click(function() {
        fadePrev();
    });

    $('#fader, .button').hover(function() {
        pause = true;
    },function() {
        pause = false;
    });

    function doRotate() {
        if(!pause) {
            fadeNext();
        }    
    }

    var rotate = setInterval(doRotate, 5000);

});

</script> 
```

任何想法如何在图像切换时停止闪烁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:48:51.667

你目前有`float:left;`你的CSS。当您同时拥有`fadeIn`并`fadeOut`运行两个元素时，两个元素都可见并且在空间中并且没有足够的空间，因此另一个图像会下降到第一个图像下方。您应该`position: absolute;`在它们上使用它们，以便它们可以存在于同一空间中。然后我只需将 z-index 更改为图像淡入的图像，这样它就在顶部，不用担心旧图像淡出，就`hide()`在另一个图像完成淡入之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:57:03.970

如前所述，图像同时显示，因为溢出没有以任何方式隐藏。[在这里](http://jsbin.com/ocitok/1/edit)可以看到一个将它们堆叠在一起的例子

```
width:85%; position: relative; float: left; 
```

在

```
#fader 
```

和

```
position:absolute; 
```

在

```
.usedListingImage 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:42:58.110

您当前正在同时启动`fadeIn`and `fadeOut`，导致短暂的重叠。您可能想要改为`fadeIn`回调​​：

```
function fadeNext() {
    $('#fader img').first().fadeOut(400, function(){
            $('#fader img').first().fadeIn();
    }).appendTo($('#fader'));

}

function fadePrev() {
    $('#fader img').first().fadeOut(400, function(){
        $('#fader img').last().prependTo($('#fader')).fadeIn();
    });

} 
```

# android - 将 getChildView() 设置为仅返回选定的行

> ID：13753056
> 
> 赞同：0
> 
> 时间：2012-12-06T21:36:29.207
> 
> 标签：android

我有一个 BaseExpandableListAdapter 类，而 getChildView() 必须只返回几行。但是，当然，返回 null 会使应用程序崩溃，并且将可见性设置为 GONE 会在列表中创建一个空白区域。

因此，用户在每一行中都有一个复选框，并且当他下次打开列表时选中一个复选框时，它不会出现（就像从 ArrayAdapter 中删除，但我不能这样做）。

有什么好的选择吗？

**编辑**

```
@Override
public int getChildrenCount(int groupPosition) {
    int childrenCount = categories.get(groupPosition).size();
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);

    /** If the user wants to remove the completed items */
    if (settings.getBoolean("deleteCompletedItemsPref", false) == true) {
        for (int childPosition=0; childPosition<childrenCount; childPosition++) {
            if (categories.get(groupPosition).getItem(childPosition).isChecked()) {
                parent.removeViewAt(childPosition);
            }
        }
    }

    return childrenCount;
} 
```

在这里，我运行该组的孩子并尝试删除不需要的视图，尽管我无法在此处删除视图，因为它是一个 AdapterView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:19:27.577

你`BaseExpandableListAdapter`一定已经实现了一个`getChildrenCount()`方法。您可以让它返回您的类别列表的大小（或者可能是列表的副本）。

```
public int getChildrenCount(int groupPosition) {
        return categories.get(groupPosition).size();
    } 
```

如果选中，则只需删除子位置（最好在点击侦听器中）。当然，您还需要相应地调整数据集。如果不是，则可能将其设为数组列表，然后删除其中的相同位置。

# javascript - 通过书签更改 IE 文档模式

> ID：13753058
> 
> 赞同：0
> 
> 时间：2012-12-06T21:36:31.220
> 
> 标签：javascript, internet-explorer, fancybox, bookmarklet, quirks-mode

我目前正在开发一个小书签，当在网站上单击图像时会触发fancybox iframe。除了 IE 9 的 Quirks 模式之外，此小书签在所有浏览器中都非常有效。事实上，它不仅会破坏屏幕上项目的渲染，还会破坏 Iframe 内的项目。我正在寻找一种强制 IE 进入标准模式的解决方案。特别是在没有声明 Doctype 的页面上。事实上，页面上的静态图像是我们当前对小书签的测试。

成功等于 - 1\. 在 Quirks 模式页面上启动小书签 2\. 将 fancybox iframe 加载到屏幕上的正确位置并进行正确渲染

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:54:50.620

> 我正在寻找一种强制 IE 进入标准模式的解决方案。

我很确定没有办法。使用 Javascript 更改渲染模式不会是任何人认为必要或有益的场景。你的用例太模糊了。

> 成功等于 - 1\. 在 Quirks 模式页面上启动小书签 2\. 将 fancybox iframe 加载到屏幕上的正确位置并进行正确渲染

如果 fancybox 不起作用，请尝试其他解决方案：[http ://www.google.com/search?q=jquery%20lightbox](http://www.google.com/search?q=jquery%20lightbox)

# c - 我将如何获得一个以上的文本文件被接受？

> ID：13753067
> 
> 赞同：0
> 
> 时间：2012-12-06T21:37:10.270
> 
> 标签：c, file, text, cmd

现在，我有这样的事情......

CMD 控制台窗口：c:\users\username\Desktop> wrapfile.txt hello.txt

你好

我怎么会得到这样的东西？

CMD 控制台窗口：c:\users\username\Desktop> wrapfile.txt hello.txt hi.txt

你好

用这个代码？

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc[1], char *argv[1])
{
    FILE *fp; // declaring variable 
    fp = fopen(argv[1], "rb");
    if (fp != NULL) // checks the return value from fopen
    {
        int i;
        do
        {
            i = fgetc(fp);     // scans the file 
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
    }
    else
    {
        printf("Error.\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:39:00.240

好吧，首先：在你的`main`声明中，你应该使用`int main(int argc, char* argv[])`而不是你现在拥有的。声明变量时指定数组大小没有意义`extern`（这就是 argv 和 argc 的含义）。最重要的是，您没有使用正确的类型。`argc`是`integer`和`argv`是`array of strings`（它们是`arrays of chars`）。`argv`s的数组也是如此`char`。

然后，只需使用 argc 计数器循环遍历 argv 数组。`argv[0]`是程序的名称，`argv[1]`to`argv[n]`是您在执行程序时传递给程序的参数。

这是关于它如何工作的一个很好的解释：[http ://www.physics.drexel.edu/courses/Comp_Phys/General/C_basics/#command-line](http://www.physics.drexel.edu/courses/Comp_Phys/General/C_basics/#command-line)

我的 2 美分。

* * *

编辑：这是工作程序的注释版本。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    FILE *fp;
    char c;
    if(argc < 3)    // Check that you can safely access to argv[0], argv[1] and argv[2].
    {               // If not, (i.e. if argc is 1 or 2), print usage on stderr.
        fprintf(stderr, "Usage: %s <file> <file>\n", argv[0]);
        return 1;   // Then exit.
    }

    fp = fopen(argv[1], "rb");   // Open the first file.
    if (fp == NULL)   // Check for errors.
    {
        printf("Error: cannot open file %s\n", argv[1]);
        return 1;
    }

    do   // Read it.
    {
        c = fgetc(fp); // scans the file
        if(c != -1)
            printf("%c", c);
    } while(c != -1);
    fclose(fp);   // Close it.

    fp = fopen(argv[2], "rb");   // Open the second file.
    if (fp == NULL)   // Check for errors.
    {
        printf("Error: cannot open file %s\n", argv[2]);
        return 1;
    }

    do   // Read it.
    {
        c = fgetc(fp); // scans the file
        if(c != -1)
            printf("%c", c);
    } while(c!=-1);
    fclose(fp);   // Close it.

    return 0;       // You use int main and not void main, so you MUST return a value.
} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:40:23.673

argv[2] 将是第二个文件名。

不要忘记检查 argc 的值以查看是否有足够的参数有效。

更好：使用 boost::program_options。

注意：此代码在 Windows 系统上不支持 unicode，这使其不可移植。参考 utf8everywhere.org 如何让它支持这个平台上的所有文件名。

# javascript - 如何使用 javascript 将带有子节点的节点附加到现有树视图

> ID：13753071
> 
> 赞同：0
> 
> 时间：2012-12-06T21:37:13.933
> 
> 标签：javascript, asp.net-mvc, kendo-ui

我正在使用剑道 UI 2012.2.607。

我正在尝试附加一个从 ajax 调用中检索到的节点以添加到我的剑道树视图中。然而，尽管节点匹配相同的模型模式，但只有顶部节点被附加到树中。

示例节点：

```
id: "333-333-333"
text: "Node1"
expanded: true
hasChildren: true
children: <Node2> 
```

Node2 的格式相同。但是，当我尝试调用 TreeView.append("Node1") 时，只添加了顶级节点 (Node1)，而不是 Node2，尽管显示 Node1 的树应该有子节点。请注意，树的 loadOnDemand=true。

追加不应该添加关联的孩子吗？

如果我解释我正在尝试做的事情可能会有所帮助。我有一个潜在的大树，因此使用按需加载，但也使用服务器端辅助来限制每个请求的节点数。我提供了一个特殊节点，单击该节点时，会发出 ajax 请求以获取更多节点并使用 insertBefore 添加更多节点。

我现在也有一个搜索方法，我用它来获取到特定节点的确切路径。我想使用这个路径来动态扩展和添加节点（因为当前节点可能没有加载到树中）。

# ruby-on-rails - 使用 Carrierwave 和 ffmpeg gem 的示例/演示应用程序

> ID：13753072
> 
> 赞同：2
> 
> 时间：2012-12-06T21:37:19.797
> 
> 标签：ruby-on-rails, ffmpeg, carrierwave

我见过很多使用carrierwave gem 上传图片的优秀示例应用程序。我还没有看到任何视频上传。

谁能分享一个使用carrierwave和ffmpeg gem（streemio-ffmpeg）或其他视频处理gem的示例/演示Rails应用程序？

感谢分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:58:02.517

在这里回答我自己的问题，如果其他人愿意贡献，我仍然非常希望看到一些示例。同时有这两个：

[https://github.com/zencoder/dreamlive](https://github.com/zencoder/dreamlive)（由 Zencoder 伙计，一个 Heroku 应用程序）

[http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)（使用uploadify [flash - argh ...]但总体上仍然有用。发现一些事情必须是随着时间的流逝而改变，但里面有很多信息。）

两者都非常有用但并不理想。他们使用 Zencoder，它不是视频处理 gem - 它只是帮助 Zencoder API。Zencoder 是 rVideo 背后的人的付费产品，这是我在寻找 ffmpeg 时注意到的更全面的宝石之一。

最后，我决定 Zencoder 的成本是不方便的，但不会像我的服务器停机等那样不方便，如果我要糟糕地集成我自己的内部视频处理。我接受这个答案，但这不是最好的。

# android - 为什么我的应用程序在尝试获取纬度和经度值时崩溃 Android

> ID：13753073
> 
> 赞同：0
> 
> 时间：2012-12-06T21:37:36.617
> 
> 标签：android, google-maps, latitude-longitude, invocationtargetexception

我正在开发一个应用程序，用户需要提供他们的纬度和经度位置才能发布任何信息。问题是当我使用以下代码时：

```
/********************************************************************
* GET LATITUDE                                                      *
********************************************************************/
public String getLatitude(){
    LocationManager lm = (LocationManager) ACTIVITY.getSystemService(Context.LOCATION_SERVICE); 

    if( lm.isProviderEnabled( LocationManager.GPS_PROVIDER )){
        Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(location != null){
            return Double.toString( location.getLatitude() );
        }
    }
    return null;
}

/********************************************************************
* GET LONGITUDE                                                     *
********************************************************************/
public String getLongitude(){
    LocationManager lm = (LocationManager) ACTIVITY.getSystemService(Context.LOCATION_SERVICE); 

    if( lm.isProviderEnabled( LocationManager.GPS_PROVIDER )){
        Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(location != null){
            return Double.toString( location.getLongitude() );
        }
    }
    return null;
} 
```

我看到以下错误消息：

```
12-06 22:31:46.791: W/dalvikvm(1173): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
12-06 22:31:46.811: E/AndroidRuntime(1173): FATAL EXCEPTION: main
12-06 22:31:46.811: E/AndroidRuntime(1173): java.lang.IllegalStateException: Could not execute method of the activity
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.view.View$1.onClick(View.java:3044)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.view.View.performClick(View.java:3511)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.view.View$PerformClick.run(View.java:14105)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.os.Handler.handleCallback(Handler.java:605)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.os.Looper.loop(Looper.java:137)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at java.lang.reflect.Method.invokeNative(Native Method)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at java.lang.reflect.Method.invoke(Method.java:511)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at dalvik.system.NativeStart.main(Native Method)
12-06 22:31:46.811: E/AndroidRuntime(1173): Caused by: java.lang.reflect.InvocationTargetException
12-06 22:31:46.811: E/AndroidRuntime(1173):     at java.lang.reflect.Method.invokeNative(Native Method)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at java.lang.reflect.Method.invoke(Method.java:511)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at android.view.View$1.onClick(View.java:3039)
12-06 22:31:46.811: E/AndroidRuntime(1173):     ... 11 more
12-06 22:31:46.811: E/AndroidRuntime(1173): Caused by: java.lang.NullPointerException
12-06 22:31:46.811: E/AndroidRuntime(1173):     at com.example.cay.saati.Helper.getLatitude(Helper.java:100)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at com.example.cay.saati.MenuPage.prepareLoginInformation(MenuPage.java:230)
12-06 22:31:46.811: E/AndroidRuntime(1173):     at  com.example.cay.saati.MenuPage.onClick(MenuPage.java:267)
12-06 22:31:46.811: E/AndroidRuntime(1173):     ... 14 more 
```

我使用以下权限来使用 LocationManager：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

还有图书馆：

```
<uses-library android:name="com.google.android.maps" /> 
```

有人可以告诉我确切的问题是什么吗？是什么导致 java.lang.reflect.invocationTargetException？我不明白。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:42:56.470

`lastKnownLocation`即使其他一切正常，也可以为空。就像这里的情况一样： [Android LocationManager.getLastKnownLocation() 返回 null](https://stackoverflow.com/questions/1608632/android-locationmanager-getlastknownlocation-returns-null)

如果 GPS 正在等待修复，并且没有有效`lastKnownLocation`的，返回`null`实际上是非常明智的。您必须等待修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:47:45.117

lastKnownLocation 可以返回 null。

gps 使用观察者设计模式工作 - 您请求它给您一个位置，并使用侦听器，它会自己调用相关函数，给您它找到的位置。

# java - Java - Spring AspectJ AfterThrowing

> ID：13753082
> 
> 赞同：0
> 
> 时间：2012-12-06T21:38:15.923
> 
> 标签：java, spring, aop, aspectj

我有一个带有以下签名的方法

我想在我的切入点捕获后记录异常，现在当我执行代码时它会在控制台上抛出异常打印然后来到我的切入点定义的方法，可能是因为它是@AfterThoring 注释但没有@BeforeThrowing注释可用？请建议我能做什么

```
public void jingleBell(){
        System.out.println("Jingle Bell Job...");
        throw new RuntimeException("test error");
    } 
```

并遵循切入点的建议

```
@AfterThrowing(pointcut = "execution(* com.dc.lnwsk.adapter.Search.jingleBell())", throwing = "ex")
            public void handleException(Throwable ex){
                    //Log exception
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:13:08.810

异常不像在调用切入点方法之前`methods`可以更改（**编织）再见代码以调用新方法。**

异常是运行时现象，JVM 事先并不知道将抛出一些异常，因此**没有 @BeforeThrowing**。

如果您事先知道您的异常情况，那么最好使用`@Before`切入点方法并处理异常情况。

# php - if 函数放置

> ID：13753087
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:38:29.957
> 
> 标签：php

如果有人可以为我提供正确的代码，那就太好了。我要做的是`<hr />`在仅当从我的数据库中提取多个结果时才在回显的信息之后添加一个。如果有人可以帮助我，这是代码。谢谢。

```
<html>
<script>
function goBack()
  {
  window.history.back()
  }
</script>
<body>
<div style="width: 875px; margin-left: 30px; margin-right: auto;"><img         src="searchresults.png" alt="" title="Search Results"  alt="" /></p>
<?php

$term = $_POST['term'];

$sql = mysql_query("SELECT * FROM store_location where store_name like '%$term%' or     address like '%$term%' or city like '%$term%' or state like '%$term%' or zip like     '%$term%' or phone like '%$term%' or fax like '%$term%' or email like '%$term%' or url     like '%$term%' ");

    if( mysql_num_rows($sql) == 0) echo "<p>No TeachPro Store(s) in your area.</p>";

   while ($row = mysql_fetch_array($sql)){

echo 'Store Name: '.$row['store_name'];
echo '<br/> Address: '.$row['address'];
echo '<br/> City: '.$row['city'];
echo '<br/> State: '.$row['state'];
echo '<br/> Zip: '.$row['zip'];
echo '<br/> Phone: '.$row['phone'];
echo '<br/> Fax: '.$row['fax'];
echo '<br/> Email: <a href="mailto:'.$row['email'].'">'.$row['email'].'</a>';
echo '<br/> URL: <a href="'.$row['url'].'">'.$row['url'].'</a>';
echo '<br/><br/>';
}
?>
</div>
<input type="button" value="Back" onclick="goBack()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:40:43.990

`while`只需将您的循环包装在一个`else`案例中并`<hr>`在那里输出。`<p>`如果没有找到行，您已经有适当的逻辑来输出 a ，并且您可以扩展它。

```
if( mysql_num_rows($sql) == 0) {
  echo "<p>No TeachPro Store(s) in your area.</p>";
}
// Instead of relying on an empty fetch to output nothing, put it in an else {}
else {
  while ($row = mysql_fetch_array($sql)){
    echo 'Store Name: '.$row['store_name'];
    echo '<br/> Address: '.$row['address'];
    echo '<br/> City: '.$row['city'];
    echo '<br/> State: '.$row['state'];
    echo '<br/> Zip: '.$row['zip'];
    echo '<br/> Phone: '.$row['phone'];
    echo '<br/> Fax: '.$row['fax'];
    echo '<br/> Email: <a href="mailto:'.$row['email'].'">'.$row['email'].'</a>';
    echo '<br/> URL: <a href="'.$row['url'].'">'.$row['url'].'</a>';
    echo '<br/><br/>';
  }
  // And your <hr /> and whatever else you need...
  echo "<hr />";
} 
```

只是关于 HTML 输出的一个旁注 - 确保将这些值包装起来`htmlspecialchars()`以正确转义为 HTML，以避免在它们包含 HTML 特殊字符时出现问题`< > &`（如果这是用户输入，则可能防止 XSS！）

```
// Ex:
echo 'Store Name: '.htmlspecialchars($row['store_name']); 
```

更紧迫的是使用`mysql_real_escape_string()`.

```
// At a minimum:
$term = mysql_real_escape_string($_POST['term']); 
```

从长远来看，考虑切换到支持预处理语句的 API，如 MySQLi 或 PDO。

# html - CSS：将 div 高度设置为 100%

> ID：13753090
> 
> 赞同：2
> 
> 时间：2012-12-06T21:38:47.077
> 
> 标签：html, css, cross-browser

请看一下这个 jsFiddle：http: [//jsfiddle.net/omarjuvera/TpWNY/#base](http://jsfiddle.net/omarjuvera/TpWNY/#base)

我想`<div class="client">`“继承”`<div class="contact">`的高度（两个内部 div 的大小相同）

请记住，两者的内容`<div class="client">`都会`<div class="contact">`动态变化。所以，没有办法知道预定义的高度。但是，`<div class="client">`总是有 2 或 3 行。

**HTML**

```
<div id="conteiner">
    <div class="client">Name: <br/>Phone:<br/>Emergency</div>
    <div class="contact">
        Contact 1<br/>
        Contact 2<br/>
        Contact 3<br/>
        Contact 4<br/>
        Contact 5<br/>
        Contact 6<br/>
        Contact 7<br/>
        Contact 8<br/>
    </div>
</div> 
```

**CSS**

```
#conteiner {position: relative;}
#conteiner div {
    display: inline-block;
    border: 2px solid red;
    vertical-align: top;
    height: 100%;
}
#conteiner .client {
    width: 200px;
}
#conteiner .contact {
    width: 400px;
} 
```

**=== 编辑 (07/12/2012) ===**
最终 jsFiddle: [http://jsfiddle.net/omarjuvera/TpWNY/](http://jsfiddle.net/omarjuvera/TpWNY/)
谢谢@ [christofer-vilander](https://stackoverflow.com/users/1137696/christofer-vilander) !!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:41:36.033

就这一次，我建议您使用`<table>`，因为您实际上正在制作一张桌子。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:00:08.037

使用`display: table;`并`display: table-cell;`让它们表现得像表格元素怎么样？

像这样的东西 -[演示](http://jsfiddle.net/4WSt3/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:46:20.753

如果我没有错，那么您希望客户 div 和联系人 div 高度应该相同。

请使用以下代码：-

```
​$(document).ready(function(){
   $('.client').height($('.contact').height());
});​ 
```

如果有任何帮助或疑虑，请检查并告诉我。

问候， 杜尔加普拉萨德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T22:02:50.247

`height:100%;`仅在父元素具有设定高度时才有效。你可以这样做：http: [//jsfiddle.net/TpWNY/2/](http://jsfiddle.net/TpWNY/2/)

```
#conteiner {
    position: relative;
    height:200px;  // set height of container. 
}
#conteiner div {
    display: inline-block;
    border: 2px solid red;
    vertical-align: top;
    height: 100%;
    overflow:auto; // allow the div to scroll if necessary.
}
#conteiner .client {
    width: 200px;
}
#conteiner .contact {
    width: 400px;
} 
```

# jquery - ("#panel").is 不是函数错误 Jquery

> ID：13753093
> 
> 赞同：2
> 
> 时间：2012-12-06T21:38:53.457
> 
> 标签：jquery

我不知道为什么这会引发错误

```
 if((("#panel").is(':visible') && elm.length==0)||((("#panel").is(':hidden') && elm.length>0))){
            showSubMenu()
        } 
```

("#panel").is 不是函数？？？

有人可以向我解释为什么这会导致错误的逻辑吗？这样我就不再重复了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T21:40:02.180

`"#panel"`是一个字符串。
字符串没有`.is()`方法。

您可能想调用`$`创建一个 jQuery 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T21:41:01.760

你错过了 jQuery 对象 $，试试这个：

```
 if(($("#panel").is(':visible') && elm.length==0)||(($("#panel").is(':hidden') && elm.length>0))){
        showSubMenu()
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T21:40:32.097

尝试使用 jQuery 函数表示法：

```
if(($("#panel").is(':visible') && elm.length==0)||((("#panel").is(':hidden') && elm.length>0))){
            showSubMenu()
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T21:42:27.067

您忘记了 $ 符号；

尝试

```
if(($("#panel").is(':visible') && elm.length==0)||((("#panel").is(':hidden') && elm.length>0))){
            showSubMenu()
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T21:40:53.247

你忘了把 jQuery-function - call （最常用的形式`$`）放在你的选择器前面

```
$('#panel').is(':visible') 
```

没有这个，`'#panel'`将只是一个字符串而不是一个 jQuery 元素。然后，jQuery-elements 让您可以调用`.is`它们上的函数，而`String`- Object 根本没有，这就是您收到该错误的原因。

# jquery - jquery：如何找到元素的所有类名和实例数

> ID：13753095
> 
> 赞同：0
> 
> 时间：2012-12-06T21:39:16.640
> 
> 标签：jquery, class, indexing, mouse, unique

我创建了一组不同大小的 div，它们都位于父级中。这些 div 具有不同的类名，具体取决于它们的大小和内容。他们共享的是另一个名为 EditBlock 的类名。制作 div 的代码是....

```
<script type="text/javascript">

function makeSmallBlockdiv ()
{
var smallBlock = $('<div class="SmallBlock EditBlock"></div>').appendTo("#canvas");
smallBlock.draggable({containment: "#canvas", scroll: false, grid: [10, 10]}, {cursor: "move", cursorAt: {top: 125, left: 150}})
smallBlock.append('<div class="article_title fontCenter fontBold font24">Article Title</div>')
smallBlock.append('<div class="article_Image"><img style="width: 250px;" src="<? echo $image1 ?>"></div>')
smallBlock.append('<div class="font14"><? echo substr($article_text, 0, 200) ?></div>') 

}

</script> 
```

第二个div如下..

```
<!-- script to create large block draggable div  -->  

<script type="text/javascript">
function makeLargeBlockdiv ()
{
var largeBlock = $('<div class="LargeBlock EditBlock"></div>').appendTo("#canvas");
largeBlock.draggable({containment: "#canvas", scroll: false, grid: [10, 10]}, {cursor: "move", cursorAt: {top: 250, left: 210}})
largeBlock.append('<div class="article_title fontCenter fontBold font32">Article Title</div>')
largeBlock.append('<div class="article_Image"><img style="width: 90%" src="<? echo $image ?>"></div>')

largeBlock.append('<div class="font14"><? echo substr($article_text, 0, 200) ?></div>') 

}    
</script> 
```

我遇到的问题是我需要确定哪个 div 有鼠标在它上面。由于可以有多个 thres div 实例，因此我还需要找到该 div 的正确索引。

这是我用来识别 div 的代码，但我不知道如何获取索引和唯一的类名。

```
<script type="text/javascript">
    $(document).ready(function() {
      $('.EditBlock').bind('mouseover mouseout click', function(event) {
        var $tgt = $(event.target);
        if (!$tgt.closest('.syntax_hilite').length) {
          $tgt.toggleClass(event.type == 'click' ? 'outline-element-clicked' : 'outline-element');      
        }
      });
    });
</script> 
```

回顾一下，我需要获取 div 的类名和与 div 实例关联的索引。

对不起，我啰嗦了这么多，但我无法用更少的词来解释它。

我忘了提到我刚刚开始学习 jquery 并且将在接下来的一天提出更多问题。

任何帮助表示赞赏。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:42:10.310

您似乎正在创建`div's dynamically`. 因此，您需要使用**事件委托附加事件。**

```
$('.EditBlock').bind('mouseover mouseout click', function(event) { 
```

应该

```
$('body').on('mouseover mouseout click','.EditBlock', function(event) {
    var $this = $(this);
    //Then to access the **classNames** you can do this

    var classNames[] = $this.attr('class').split(' ');

   // To access the index of the current div..

   var index = $this.index();

}); 
```

**更新**

尝试这个

```
​$('#small , #big').on('click', function(){
    var $container = $('#container');
    if(this.id === 'small'){
          $container.append('<div class="smallBlock EditBlock">' +
                              'Small Block </div>');
    }
    else{
          $container.append('<div class="largeBlock EditBlock">' +
                              'Large Block </div>');
    }        
});

$('#container').on('click','.EditBlock', function(event) {
    var $this = $(this);
    var $container = $('#container');
    //Then to access the **classNames** you can do this
    var index;
    if($this.hasClass('smallBlock')){
       index = $container.find('.smallBlock').index($this);
        alert('Current Small Block index is : ' + index);        
    }
    else if ($this.hasClass('largeBlock')){
        index = $container.find('.largeBlock').index($this);
        alert('Current Large Block index is : ' + index);         
    }
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/beR6r/)**

# jquery - jcoverflip 重新初始化

> ID：13753096
> 
> 赞同：0
> 
> 时间：2012-12-06T21:39:31.173
> 
> 标签：jquery, jquery-plugins

我使用[jcoverflip](https://github.com/NewSignature/jcoverflip)创建图像轮播。我必须动态添加图像并且需要重新初始化 coveflip。

我从那里尝试了解决[方法](https://github.com/NewSignature/jcoverflip/wiki/Questions-and-Answers)

```
$('#flip').jcoverflip(); //Build it
$('#flip').jcoverflip('destroy'); //All the elements are there but jCoverflip is gone
//Add and remove elements
$('#flip').jcoverflip(); //Build again 
```

但在销毁时出现以下错误

`Uncaught TypeError: Cannot call method 'apply' of undefined`为了`$.widget.prototype.destroy.apply( this, arguments );`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:59:07.373

[vlc](http://code.google.com/p/vlc-shares/source/browse/trunk/public/js/jquery.jcoverflip.js?r=213)的 jcoverflip 的修改版本对我有用。

# java - 在eclipse IDE中手动添加包依赖

> ID：13753107
> 
> 赞同：0
> 
> 时间：2012-12-06T21:40:34.543
> 
> 标签：java, eclipse, package

在eclipse IDE中，快速助手帮助自动导入包包依赖。但是，有时单击所有错误以导入依赖包需要很长时间。

我怎样才能手动做到这一点？我的意思是，快速助手修改什么配置文件来添加依赖？

![在此处输入图像描述](../Images/99f535370b59f411537da80aa0ef8655.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:43:54.197

您可以更改保存操作以组织导入。

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Feditor%2Fref-preferences-save-actions.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Feditor%2Fref-preferences-save-actions.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:01:31.837

您想要的操作是“组织导入”，也可以使用按键访问：Ctrl+Shift+o

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:51:16.160

我发现这`Import-Package`是`MANIFEST.MF`一个eclipse自动添加依赖文件的地方。

![在此处输入图像描述](../Images/5744db7859a2c2419533a6cd5a0ffcfd.png)

# ssis - 尝试在 64 位操作系统上安装 SSIS 2005 包时出错

> ID：13753108
> 
> 赞同：0
> 
> 时间：2012-12-06T21:40:37.563
> 
> 标签：ssis

我在运行 32 位版本 SQL Server 2005 的 64 位 Windows 7 机器上创建了一个 SSIS 包。当我尝试在运行 32 位版本 SQL Server 2005 的 64 位 Windows Server 2008 机器上安装包时，我得到以下错误：

```
===================================

Unexpected error occurred. (Package Installation Wizard)

===================================

Retrieving the COM class factory for component with CLSID {E44847F1-FD8C-4251-B5DA-B04BB22E236E} 

failed due to the following error: 80040154\. (Microsoft.SqlServer.ManagedDTS)

------------------------------
Program Location:

at Microsoft.SqlServer.Dts.Runtime.Application..ctor()
at Microsoft.SqlServer.Dts.Deployment.PackageInstallationWizardForm..ctor()
at Microsoft.SqlServer.Dts.Deployment.PackageInstaller.Main(String[] args)

===================================

Retrieving the COM class factory for component with CLSID {E44847F1-FD8C-4251-B5DA-B04BB22E236E} 

failed due to the following error: 80040154\. (Microsoft.SqlServer.ManagedDTS)

------------------------------
Program Location:

at Microsoft.SqlServer.Dts.Runtime.Application..ctor() 
```

我也尝试将它安装在我的 Windows 7 机器上并得到同样的错误。我在运行 64 位 Windows Server 2003 的测试服务器上运行了相同版本的 SQL Server 2005，安装向导启动得很好。

在 Server 2003 框中，C:\Program Files (x86)\Microsoft SQL Server\90\SDK 中没有程序集文件夹，因此即使它是 SQL Server 的 32 位安装，安装也是不同的。我认为这是对以前版本的升级。

到目前为止，通过我的研究，我还没有发现任何可以帮助我纠正 Server 2008 机器上的这个问题的东西。我假设较新的操作系统或 SQL 服务器的全新安装可能会导致问题，但我现在只是猜测。

我已经使用“SELECT @@VERSION”对所有 3 个 SQL Server 实例进行了版本检查，并验证了所有版本都是 32 位的。

我也在 Server 2003 机器上编译了我的包，但它仍然无法安装在 Server 2008 机器上。我还在包属性中将 Run64BitRuntime 选项设置为“False”，但到目前为止没有任何帮助。

有没有我需要从 2003 服务器传输到 2008 服务器的文件，例如 dll 文件？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:47:57.210

事实证明，我需要卸载 sql expess 2008。我读过 sql server 2005 和 sql express 2008 可以存在于同一台服务器上，如果它们仅用作数据库实例，它们就可以存在。不幸的是，已经安装在服务器上的 sql express 2008 的安装禁止集成服务和 SQL Server 代理正常工作，并导致它们抛出上述错误。

卸载 sql express 后，一切正常。

感谢大家的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:11:22.407

这看起来像是您的包的构建错误。您需要跟踪该“具有 CLSID 的组件 ...”所代表的组件

通常，如果您将包添加到 BIDS SSIS 项目并执行它（调试它），有问题的组件就会变得清晰。

# objective-c - 如何在 Mac OS X 中简单地从 S3 下载对象？

> ID：13753114
> 
> 赞同：2
> 
> 时间：2012-12-06T21:40:55.253
> 
> 标签：objective-c, macos, amazon-s3, amazon-web-services

在 aws 上看到[这个问题](https://stackoverflow.com/questions/9460804/aws-sdk-for-mac-os-x-application-development "这个关于aws的问题")后，我下载了 AWS iOS SDK 并将 .framework 链接到我的 OSX 应用程序中。如果我尝试导入`AWSiOSSDK/S3/AmazonS3Client.h`到我的一个类中，我现在会收到头文件位于 aws 框架中的类的链接器错误，我要做的就是编写一个方法来从 S3 下载文件并将其保存到特定文件夹。

我尝试在 Elastic Beanstalk 上设置 TVM（令牌自动售货机），但不知道如何/是否应该使用它进行身份验证，而且我似乎无法找到有关如何通过 A 从 S3 下载文件的文档Mac 应用程序。

目前，如果我尝试访问 S3 URL，由于缺少凭据而失败。我不想公开 s3 文件，所以我需要在请求中发送凭据。任何可以为我指明正确的开始方向或任何指导的人都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:12:11.493

虽然它不是严格意义上的“OSX 开发工具包”，但您可能会发现适用于 iOS 的 AWS 开发工具包是一个很好的起点。

[SDK下载](https://aws.amazon.com/sdkforios/)

[GitHub 上的 SDK 源](https://github.com/aws/aws-sdk-ios)

# c# - 用于嵌套查询的 RavenDB 索引

> ID：13753117
> 
> 赞同：3
> 
> 时间：2012-12-06T21:41:11.557
> 
> 标签：c#, linq, indexing, ravendb

我对 RavenDB 很陌生，正在努力寻找以下解决方案：

我有一个名为 ServiceCalls 的集合，如下所示：

```
public class ServiceCall
    {
        public int ID { get; set; }
        public string IncidentNumber { get; set; }
        public string Category { get; set; }
        public string SubCategory { get; set; }
        public DateTime ReportedDateTime { get; set; }
        public string Block { get; set; }
        public decimal Latitude { get; set; }
        public decimal Longitude { get; set; }
    } 
```

我有一个名为 ServiceCalls/CallsByCategory 的索引，如下所示：

```
 Map = docs => from doc in docs
                      select new
                      {
                          Category = doc.Category,
                          CategoryCount = 1,
                          ServiceCalls = doc,
                      };
        Reduce = results => from result in results
                            group result by result.Category into g
                            select new
                            {
                                Category = g.Key,
                                CategoryCount = g.Count(),
                                ServiceCalls = g.Select(i => i.ServiceCalls)
                            }; 
```

所以输出是：

```
public class ServiceCallsByCategory
{
    public string Category { get; set; }
    public int CategoryCount { get; set; }
    public IEnumerable<ServiceCall> ServiceCalls { get; set; }
} 
```

使用此查询一切正常

```
var q = from i in session.Query<ServiceCallsByCategory>("ServiceCalls/CallsByCategory") select i 
```

我完全迷失的地方是编写一个允许我按 ReportedDateTime 查询的索引。可以让我这样做的东西：

```
 var q = from i in session.Query<ServiceCallsByCategory>("ServiceCalls/CallsByCategory")
            where i.ServiceCalls.Any(x=>x.ReportedDateTime >= new DateTime(2012,10,1)) 
            select i 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T21:30:18.483

一些东西，

1.  您的 reduce 子句中不能有`.Count()`方法。如果你仔细观察，你会发现你的计数是错误的。从 build 2151 开始，这实际上会引发异常。相反，你想要`CategoryCount = g.Sum(x => x.CategoryCount)`

2.  您总是希望 map 的结构与 reduce 的结构相匹配。如果您要构建一个事物列表，那么您应该映射每个事物的单个元素数组，并`.SelectMany()`在 reduce 步骤中使用。您现在拥有它的方式仅由于可能会在某个时候修复的怪癖而起作用。

3.  通过将结果构建为 ServiceCall 列表，您将整个文档复制到索引存储中。这不仅效率低下，而且是不必要的。您最好保留一个仅包含 id 的列表。如果您需要检索完整的文档， Raven 有一个`.Include()`方法可以使用。此处的主要优点是，即使您的索引结果仍然陈旧，也可以保证您获得返回的每个项目的最新数据。

将所有三个放在一起，正确的索引将是：

```
public class ServiceCallsByCategory
{
    public string Category { get; set; }
    public int CategoryCount { get; set; }
    public int[] ServiceCallIds { get; set; }
}

public class ServiceCalls_CallsByCategory : AbstractIndexCreationTask<ServiceCall, ServiceCallsByCategory>
{
    public ServiceCalls_CallsByCategory()
    {
        Map = docs => from doc in docs
                      select new {
                                     Category = doc.Category,
                                     CategoryCount = 1,
                                     ServiceCallIds = new[] { doc.ID },
                                 };
        Reduce = results => from result in results
                            group result by result.Category
                            into g
                            select new {
                                           Category = g.Key,
                                           CategoryCount = g.Sum(x => x.CategoryCount),
                                           ServiceCallIds = g.SelectMany(i => i.ServiceCallIds)
                                       };
    }
} 
```

使用包含查询它，如下所示：

```
var q = session.Query<ServiceCallsByCategory, ServiceCalls_CallsByCategory>()
               .Include<ServiceCallsByCategory, ServiceCall>(x => x.ServiceCallIds); 
```

当您需要一个文档时，您仍然可以加载它，`session.Load<ServiceCall>(id)`但 Raven 不必往返于服务器来获取它。

现在 - 这并没有解决您关于如何按日期过滤结果的问题。为此，您确实需要考虑您要完成的工作。以上所有内容都假设您真的希望一次为每个类别显示每个服务调用。大多数情况下，这不切实际，因为您想对结果进行分页。您可能甚至不想使用我上面描述的内容。我在这里做了一些宏大的假设，但大多数时候人们会按类别过滤，而不是按类别进行分组。

假设您有一个只计算类别的索引（上面的索引没有服务调用列表）。您可以使用它来显示概览屏幕。但是您不会对每个类别中的文档感兴趣，除非您单击一个并深入到详细信息屏幕。那时，您知道您所在的类别，您可以按它过滤并减少到没有静态索引的日期范围：

```
var q = session.Query<ServiceCall>().Where(x=> x.Category == category && x.ReportedDateTime >= datetime) 
```

如果我错了，并且您确实需要显示所有类别的所有文档，按类别分组并按日期过滤，那么您将不得不采用一种先进的技术，就像我[在另一个 StackOverflow 答案中](https://stackoverflow.com/a/13726983/634824)描述的那样。如果这*真的*是你需要的，请在评论中告诉我，我会看看我是否可以为你写。您将需要 Raven 2.0 才能使其工作。

另外 - 要非常小心您为 ReportedDateTime 存储的内容。如果您要进行任何比较，您需要了解*日历时间*和*瞬时时间*之间的区别。日历时间有一些怪癖，例如夏令时转换、时区差异等等。瞬时时间跟踪某事发生的那一刻，不管是谁在问。您可能需要瞬时时间供您使用，这意味着要么使用 UTC `DateTime`，要么切换到`DateTimeOffset`哪个可以让您在不丢失本地上下文值的情况下表示瞬时时间。

**更新**

我尝试尝试构建一个索引，该索引将使用我描述的技术让您在类别组中获得所有结果，但仍按日期过滤。不幸的是，这是不可能的。您必须在原始文档中将所有 ServiceCall 组合在一起并在 Map 中表达出来。如果你必须先减少，它根本就不会以同样的方式工作。因此，一旦您处于特定类别中，您真的应该考虑对 ServiceCalls 进行简单查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:52:50.287

您能否将 ReportedDateTime 添加到 Map 并将其聚合到 Reduce 中？如果您只关心每个类别的最大值，那么这样的事情就足够了。

```
Map = docs => from doc in docs
                      select new
                      {
                          Category = doc.Category,
                          CategoryCount = 1,
                          ServiceCalls = doc,
                          ReportedDateTime
                      };
        Reduce = results => from result in results
                            group result by result.Category into g
                            select new
                            {
                                Category = g.Key,
                                CategoryCount = g.Sum(x => x.CategoryCount),
                                ServiceCalls = g.Select(i => i.ServiceCalls)
                                ReportedDateTime = g.Max(rdt => rdt.ReportedDateTime)
                            }; 
```

然后，您可以仅根据聚合的 ReportedDateTime 查询它：

```
var q = from i in session.Query<ServiceCallsByCategory>("ServiceCalls/CallsByCategory")
            where i.ReportedDateTime >= new DateTime(2012,10,1) 
            select i 
```

# c#-4.0 - 如何在主应用程序和后台任务之间共享数据？

> ID：13753119
> 
> 赞同：1
> 
> 时间：2012-12-06T21:41:21.107
> 
> 标签：c#-4.0, windows-8, windows-runtime, winrt-xaml

我的应用程序正在使用后台任务来更新动态磁贴。后台任务与主应用程序写在同一个解决方案中的单独项目上，后台任务和主应用程序的命名空间不同。

我希望后台任务能够访问主应用程序的数据，以便后台任务可以更新动态磁贴。

实现这一目标的方法是什么？

谢谢 EitanB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:49:00.330

由于即使在应用程序未运行时后台任务也可以执行，所以最好的办法是将感兴趣的信息存放到某个可共享的数据存储库中的后台任务中。[ApplicationData.Current.LocalSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)将是一个非常轻量级的选项。

# c# - 从模板字段按钮获取 GridView 行索引

> ID：13753121
> 
> 赞同：2
> 
> 时间：2012-12-06T21:41:24.183
> 
> 标签：c#, asp.net

第一个问题：

我有一个带有小吃和价格列表的 gridview 'gvSnacks'。gridview 的第一列是带有按钮“btnAdd”的模板字段。

单击其中一个添加按钮时，我希望它将该行值分配给一个整数，以便我可以从该行中检索其他数据。

这就是我所拥有的，但我遇到了死胡同。

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    int intRow = gvSnacks.SelectedRow.RowIndex;

    string strDescription = gvSnacks.Rows[intRow].Cells[2].Text;
    string strPrice = gvSnacks.Rows[intRow].Cells[3].Text;
} 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:03:16.007

您可能需要使用 RowCommand 事件：

```
public event GridViewCommandEventHandler RowCommand 
```

[这是此事件的 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)。

该按钮必须具有 CommandName 属性，您可以将行的值放在命令参数中：

```
 void ContactsGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    // If multiple buttons are used in a GridView control, use the
    // CommandName property to determine which button was clicked.
    if(e.CommandName=="Add")
    {
      // Convert the row index stored in the CommandArgument
      // property to an Integer.
      int index = Convert.ToInt32(e.CommandArgument);

      // Retrieve the row that contains the button clicked 
      // by the user from the Rows collection.
      GridViewRow row = ContactsGridView.Rows[index];

      // Create a new ListItem object for the contact in the row.     
      ListItem item = new ListItem();
      item.Text = Server.HtmlDecode(row.Cells[2].Text) + " " +
        Server.HtmlDecode(row.Cells[3].Text);

      // If the contact is not already in the ListBox, add the ListItem 
      // object to the Items collection of the ListBox control. 
      if (!ContactsListBox.Items.Contains(item))
      {
        ContactsListBox.Items.Add(item);
      }
    }
  } 
```

# arrays - VBScript 编码挑战：拆分命令后按字符串长度对数组进行排序

> ID：13753130
> 
> 赞同：2
> 
> 时间：2012-12-06T21:42:01.090
> 
> 标签：arrays, sorting, vbscript, string-length

我是 VBScript 编码的 C 学生，需要一点帮助。

我的代码执行如下拆分命令：

outputArray = split(描述,"")

现在将 Description 中的单个单词放在一个数组中，我想根据每个单词的字符串长度对数组进行排序。

因此，例如，如果 Description 等于“这是一个描述的示例”，那么我的数组值是 [this, is, an, example, of, a, description]，对吗？

但我想使用数组，以便最长的单词排在第一位，即数组项按字符串长度排序。因此，在一些我似乎无法弄清楚的 VBScript 代码之后，数组将如下所示：[description, example, this, an, is, of, a]

如果字符串长度相同，则二级排序将按字母顺序排列。

我将非常感谢那里的 A 学生对此提供的一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:25:57.683

由于 VBScript 没有原生排序，因此需要朋友的帮助。在您的情况下 - 由于您的排序标准更复杂 - 朋友不应该是 .Net 的 ArrayList、JScript 的排序或 sort.exe（[在此处介绍](https://stackoverflow.com/questions/268648/how-do-i-sort-arrays-using-vbscript)），而是断开连接的 ADO 记录集：

```
 Const adInteger          =          3 ' 00000003
  Const adVarChar          =        200 ' 000000C8

  Dim sInp : sInp = "this is an example of a description"
  Dim aInp : aInp = Split(sInp)
  WScript.Echo "A:", Join(aInp)

  Dim oRS : Set oRS = CreateObject("ADODB.Recordset")
  oRS.Fields.Append "Word", adVarChar, 50
  oRS.Fields.Append "Length", adInteger
  oRS.Open
  Dim sWord
  For Each sWord In aInp
      oRS.AddNew
      oRS.Fields("Word").value = sWord
      oRS.Fields("Length").value = Len(sWord)
      oRS.UpDate
  Next
  oRS.Sort = "Length DESC, Word"

  Dim aTable : aTable = oRS.GetRows()
  ReDim aOut(UBound(aTable, 2))
  Dim i
  For i = 0 To UBound(aOut)
      aOut(i) = aTable(0, i)
  Next
  WScript.Echo "B:", Join(aOut) 
```

输出：

```
A: this is an example of a description
B: description example this an is of a 
```

背景从[这里](http://technet.microsoft.com/en-us/magazine/2008.09.heyscriptingguy.aspx?pr=PuzzleAnswer)开始。

**添加 - 对于 ArrayList 爱好者：**

如果您的数据本质上是表格的（排序标准涉及元素的多个方面/属性），则断开连接的记录集应该是您的首选。

VBScript 中的 ArrayList 排序仅适用于简单的情况，因为 - AFAIK - 您不能将比较函数传递给 sort 方法。请证明我错了！

如果您必须使用 ArrayList 进行更复杂的排序，请考虑 [Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)：

1.  准备定制的临时数据以方便比较
2.  种类
3.  恢复原始数据

在代码中：

```
 Const csSep = "|"
  Const cnMax = 100

  Dim sInp : sInp = "this is an example of a description"
  Dim aInp : aInp = Split(sInp)
  WScript.Echo "A:", Join(aInp)

  Dim oNAL : Set oNAL = CreateObject( "System.Collections.ArrayList" )
  Dim oSB  : Set oSB  = CreateObject( "System.Text.StringBuilder" )
  Dim sWord
  For Each sWord In aInp
      oSB.AppendFormat_3 "{0,4}{1}{2}", 100 - Len(sWord), csSep, sWord
      sWord = oSB.ToString()
      oSB.Length = 0
      oNAL.Add sWord
  Next
  oNAL.Sort

  ReDim aOut(oNAL.Count - 1)
  Dim i
  For i = 0 To UBound(aOut)
      aOut(i) = Split(oNAL(i), csSep)(1)
  Next
  WScript.Echo "B:", Join(aOut) 
```

输出：

```
A: this is an example of a description
B: description example this an is of a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:47:01.563

这是有关如何按长度和字母顺序排序的有用链接

[http://www.webknowhow.net/dir/ASP/FAQ/array_faq.html](http://www.webknowhow.net/dir/ASP/FAQ/array_faq.html)

# c# - 从随机生成的图中计算邻接矩阵

> ID：13753131
> 
> 赞同：-2
> 
> 时间：2012-12-06T21:42:01.727
> 
> 标签：c#, graph, connection, binary-data, adjacency-matrix

我开发了一个小程序，它在图形之间随机生成多个连接（计数的值也可以是随机的，但是为了测试目的我已经定义了***const value***，它可以随时重新定义为随机值）。

代码是 C#：http: [//ideone.com/FDCtT0](http://ideone.com/FDCtT0)

（结果：成功时间：0.04s 内存：36968 kB 返回值：0）

如果您不知道什么是邻接矩阵，请访问此处：[http ://en.wikipedia.org/wiki/Adjacency_matrix](http://en.wikipedia.org/wiki/Adjacency_matrix)

![在此处输入图像描述](../Images/0e1eb3fc59b462b22068675664b4e4af.png)

我认为，我的代码版本没有经过优化。如果我要使用大小为：***10k x 10k***的大型矩阵。

1.  您有什么建议，在此任务中如何更好地并行计算？我是否应该使用信号量等一些储物柜模型来对大型矩阵进行多线程计算。

2.  您对重新设计程序架构有什么建议。我应该如何为大型矩阵做准备？

3.  如您所见，在*ideone*上，我展示了时间执行参数并在 RAM 中分配了内存。我的程序执行的渐近值是多少？是***O(n^2)***吗？

所以我想听听你的建议如何增加渐近标记，使用信号量进行并行计算（或者更好的线程锁定模型）。

***谢谢！***

PS：SO不允许在没有格式化代码的情况下发布主题，所以我在最后发布（完整程序）：

```
/*
    Oleg Orlov, 2012(c), generating randomly adjacency matrix and graph connections
*/

using System;
using System.Collections.Generic;

class Graph
{
    internal int id;
    private int value;
    internal Graph[] links;

    public Graph(int inc_id, int inc_value)
    {
        this.id = inc_id;
        this.value = inc_value;
        links = new Graph[Program.random_generator.Next(0, 4)];
    }
}

class Program
{
    private const int graphs_count = 10;
    private static List<Graph> list;
    public static Random random_generator;

    private static void Init()
    {
        random_generator = new Random();
        list = new List<Graph>(graphs_count);

        for (int i = 0; i < list.Capacity; i++)
        {
            list.Add(new Graph(i, random_generator.Next(100, 255) * i + random_generator.Next(0, 32)));
        }
    }

    private static void InitGraphs()
    {
        for (int i = 0; i < list.Count; i++)
        {
            Graph graph = list[i] as Graph;
            graph.links = new Graph[random_generator.Next(1, 4)];

            for (int j = 0; j < graph.links.Length; j++)
            {
                graph.links[j] = list[random_generator.Next(0, 10)];
            }

            list[i] = graph;
        }
    }

    private static bool[,] ParseAdjectiveMatrix()
    {
        bool[,] matrix = new bool[list.Count, list.Count];

        foreach (Graph graph in list)
        {
            int[] links = new int[graph.links.Length];

            for (int i = 0; i < links.Length; i++)
            {
                links[i] = graph.links[i].id;
                matrix[graph.id, links[i]] = matrix[links[i], graph.id] = true;
            }
        }

        return matrix;
    }

    private static void PrintMatrix(ref bool[,] matrix)
    {
        for (int i = 0; i < list.Count; i++)
        {
            Console.Write("{0} | [ ", i);

            for (int j = 0; j < list.Count; j++)
            {
                Console.Write(" {0},", Convert.ToInt32(matrix[i, j]));
            }

            Console.Write(" ]\r\n");
        }

        Console.Write("{0}", new string(' ', 7));

        for (int i = 0; i < list.Count; i++)
        {
            Console.Write("---");
        }

        Console.Write("\r\n{0}", new string(' ', 7));

        for (int i = 0; i < list.Count; i++)
        {
            Console.Write("{0}  ", i);
        }

        Console.Write("\r\n");
    }

    private static void PrintGraphs()
    {
        foreach (Graph graph in list)
        {
            Console.Write("\r\nGraph id: {0}. It references to the graphs: ", graph.id);

            for (int i = 0; i < graph.links.Length; i++)
            {
                Console.Write(" {0}", graph.links[i].id);
            }
        }
    }

    [STAThread]
    static void Main()
    {
        try
        {
            Init();
            InitGraphs();
            bool[,] matrix = ParseAdjectiveMatrix();
            PrintMatrix(ref matrix);
            PrintGraphs();
        }
        catch (Exception exc)
        {
            Console.WriteLine(exc.Message);
        }

        Console.Write("\r\n\r\nPress enter to exit this program...");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:23:14.130

I will start from the end, if you don't mind. :)

3) Of course, it is `O(n^2)`. As well as the memory usage.

2) Since `sizeof(bool) == 1 byte, not bit`, you can optimize memory usage by using bit masks instead of raw bool values, this will make it `(8 bits per bool)^2 = 64` times less.

1) I don't know C# that well, but as i just googled i found out that C# primitive types are atomic, which means you can safely use them in multi-threading. Then, you are to make a super easy multi-threading task: just split your graphs by threads and press the 'run' button, which will run every thread with its part of graph on itself. They are independent so that's not going to be any problem, you don't need any semaphores, locks and so on.

The thing is that you won't be able to have an adjacency matrix with size 10^9 x 10^9\. You just can't store it in the memory. But, there is an other way.
Create an **adjacency list** for each vertex, which will have a list of all vertices it is connected with. After building those lists from your graph, sort those lists for each vertex. Then, you can answer on the 'is `a` connected to `b`' in `O( log(size of adjacency list for vertex a) )` time by using binary search, which is really fast for common usage.

Now, if you want to implement Dijkstra algorithm really fast, you won't need an adj. matrix at all, just those lists.

同样，这一切都取决于未来的任务和约束。您不能存储该大小的矩阵，仅此而已。Dijkstra 或 BFS 不需要它，这是事实。:) 从图的角度来看，在概念上没有区别：无论它存储在什么数据结构中，图都是相同的。

如果您真的想要矩阵，那么这就是解决方案：
我们知道，连接数（`1`在矩阵中）远小于其最大值 n^2。通过执行这些列表，我们只需存储`1`（也称为**稀疏矩阵**）的位置，这不会消耗不必要的内存。

# .net - 适用于 .NET 的最新 Oracle 数据提供程序 (11.2.0.3.20) 中断 EF 更新向导

> ID：13753139
> 
> 赞同：2
> 
> 时间：2012-12-06T21:42:36.223
> 
> 标签：.net, oracle, entity-framework, visual-studio-2012, odp.net

我在 Win7 机器上安装了 VS2012 和[最新的 32 位版本的 ODAC](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)（带有 Oracle 开发工具的第 5 版）。一切都是全新安装。在这种环境中，我有一个 ASP.NET Web 表单解决方案，它最初是在 VS2010 中开发的，其中包含基于 32 位 ODAC 第 4 版构建的 EDMX 文件。

我可以使用服务器资源管理器设置与数据库的连接并查看表，**但我现在无法通过更新向导修改我的 EDMX 文件**。更新向导中不会显示任何表格。

![在此处输入图像描述](../Images/8907a192c02248e71b5c5c8d29bc530b.png)

这是 VS2012 更新向导第一步中的连接字符串：

```
metadata=res://*/Models.EventModel.EventModel.csdl|
res://*/Models.EventModel.EventModel.ssdl|
res://*/Models.EventModel.EventModel.msl;
provider=Oracle.DataAccess.Client;
provider connection string="data source=<serverid>;
persist security info=True;
user id=<userid>" 
```

*但是，在我的另一个 Win7 机器上，我使用完全相同的 ASP.NET 解决方案*全新安装了 VS2010、EF 4.1 和以前的 32 位版本的 ODAC（第 4 版），但我对更新向导没有任何问题。

![在此处输入图像描述](../Images/fb44d4be9f5358d02445d93888eb2c81.png)

这是来自 VS2010 和 ODAC4 的更新向导连接字符串：

```
metadata=res://*/Models.EventModel.EventModel.csdl|
res://*/Models.EventModel.EventModel.ssdl|
res://*/Models.EventModel.EventModel.msl;
provider=Oracle.DataAccess.Client;
provider connection string="DATA SOURCE=<serverid>;
PASSWORD=;
PERSIST SECURITY INFO=True";
USER ID=<userid>" 
```

其他相关资料：

1) 我在我的 VS2012/ODAC5 解决方案中使用我的 VS2010/ODAC4 解决方案中的 web.config。

2) 我已将 VS2012 解决方案设置为目标 .NET 4.5。

3) 我已经确保通过 NuGet 安装了 EF5，并且我已经安装了 VS2012 Update 1。

4）我还设置了一个干净安装VS2010和ODAC5的盒子，我遇到了同样的问题。更新向导中没有表。

问题：

**我需要更改任何 web.config 设置或其他设置来解决此问题吗？如果是这样，设置是什么？**

在此先感谢您的帮助。我真的很想使用新的 ODAC 和 VS2012。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T23:28:58.957

~~在 Oracle 论坛中找到的[这个解决方法帮助了我。](https://forums.oracle.com/forums/message.jspa?messageID=10714286#10714286.)（参见**user9948241**在 12 月 19 日的帖子。）~~ Oracle 有一个新的论坛页面，而上面提到的帖子显然没有进入新论坛。

显然，在带有最新 ODAC 的 VS2012 中，当您设置连接过滤条件时，**您始终必须包含默认架构以及您想要的任何架构**。

**更新：**下面显示的是向导中的 Filters 选项卡，用于从 Visual Studio Server Explorer 添加（或修改）数据连接。

仔细查看并注意，在“选择过滤条件”的值字段中，我有两个用逗号分隔的模式值（实际值已从屏幕截图中删除）。一个是默认架构值，另一个是我想要的架构。您可以通过单击我用红色标记的省略号来设置这些模式值。

![在此处输入图像描述](../Images/d92629677865711fab749c101785899e.png)

出于某种原因，我不必在 VS2010 中使用以前版本的 ODAC 执行所有这些操作，我删除了默认架构并添加了我想要的架构。

# laravel - 如何为 Elastic Beanstalk 配置 Laravel？

> ID：13753140
> 
> 赞同：0
> 
> 时间：2012-12-06T21:42:37.893
> 
> 标签：laravel, amazon-elastic-beanstalk

我已经让实例运行了，但我的配置不起作用，我不尝试让它工作。

我得到的只是 503 错误，没有任何解释。

生产模式配置

```
return array(
    'url' => 'http://patientdueling.com',
     'asset_url' => '',
    'profiler' => false,
    'ssl' => false,
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:20:07.363

当我从专用服务器切换到 Elastic Beanstalk 服务器和使用 AWS 的 RDS 时，出于某种原因，我的生产与开发环境不再被检测到。

我将我的生产配置复制到 laravel 的默认配置中，它工作了！

我的错误：

```
exception 'ErrorException' with message 'PDO::__construct(): [2002] No such file or directory (trying to connect via unix:///var/lib/mysql/mysql.sock)' in /var/www/html/laravel/database/connectors/mysql.php:33
Stack trace:
#0 /var/www/html/laravel/laravel.php(42): Laravel\Error::native(2, 'PDO::__construc...', '/var/www/html/l...', 33)
#1 [internal function]: Laravel\{closure}(2, 'PDO::__construc...', '/var/www/html/l...', 33, Array)
#2 /var/www/html/laravel/database/connectors/mysql.php(33): PDO->__construct('mysql:host=loca...', 'root', 'root', Array)
#3 /var/www/html/laravel/database.php(66): Laravel\Database\Connectors\MySQL->connect(Array)
#4 /var/www/html/laravel/database.php(52): Laravel\Database::connect(Array)
#5 /var/www/html/laravel/database/eloquent/query.php(255): Laravel\Database::connection(NULL)
#6 /var/www/html/laravel/database/eloquent/query.php(245): Laravel\Database\Eloquent\Query->connection()
#7 /var/www/html/laravel/database/eloquent/query.php(50): Laravel\Database\Eloquent\Query->table()
#8 /var/www/html/laravel/database/eloquent/model.php(473): Laravel\Database\Eloquent\Query->__construct(Object(System))
#9 /var/www/html/laravel/database/eloquent/model.php(789): Laravel\Database\Eloquent\Model->query()
#10 [internal function]: Laravel\Database\Eloquent\Model->__call('where_real_syst...', Array)
#11 [internal function]: System->where_real_system_id(0)
#12 /var/www/html/laravel/database/eloquent/model.php(804): call_user_func_array(Array, Array)
#13 /var/www/html/application/controllers/system.php(86): Laravel\Database\Eloquent\Model::__callStatic('where_real_syst...', Array)
#14 /var/www/html/application/controllers/system.php(86): System::where_real_system_id(0)
#15 [internal function]: System_Controller->get_list()
#16 /var/www/html/laravel/routing/controller.php(325): call_user_func_array(Array, Array)
#17 /var/www/html/laravel/routing/controller.php(285): Laravel\Routing\Controller->response('list', Array)
#18 /var/www/html/laravel/routing/controller.php(165): Laravel\Routing\Controller->execute('list', Array)
#19 /var/www/html/laravel/routing/route.php(153): Laravel\Routing\Controller::call('system@list', Array)
#20 /var/www/html/laravel/routing/route.php(124): Laravel\Routing\Route->response()
#21 /var/www/html/laravel/laravel.php(167): Laravel\Routing\Route->call()
#22 /var/www/html/public/index.php(34): require('/var/www/html/l...')
#23 {main} 
```

# java - Java 泛型通配符类型不匹配

> ID：13753141
> 
> 赞同：0
> 
> 时间：2012-12-06T21:42:40.873
> 
> 标签：java, generics, type-mismatch

我有以下结构：

```
public abstract class BaseVersionedEntity {
    private long id;

    private List<BaseRevision<? extends BaseVersionedEntity>> versions;

    public BaseRevision<? extends BaseVersionedEntity> getLatestRevision() {
        return versions.get(versions.size() - 1);
    }

    public abstract BaseRevision<? extends BaseVersionedEntity> newRevision();
}

public abstract class BaseVersionedEntityData<E> {
    private long id;

    private BaseRevision<E> revision;
}

public abstract class BaseRevision<E> implements Comparable<BaseRevision<E>> {
    private long id;
    private Timestamp timestamp;

    private E versionedEntity;
    private BaseVersionedEntityData<E> versionedEntityData;

    public BaseVersionedEntityData<E> getVersionedEntityData() {
        return versionedEntityData;
    }
} 
```

这将通过以下方式实现：

```
public class PersonEntity extends BaseVersionedEntity {

    @Override
    public BaseRevision<? extends BaseVersionedEntity> newRevision() {
        PersonRevision newRevision = new PersonRevision();
        newRevision.setTimestamp(new Timestamp(System.currentTimeMillis()));
        getRevisions().add(newRevision);
        return newRevision;
    }
}

public class PersonData extends BaseVersionedEntityData<PersonEntity> {

}

public class PersonRevision extends BaseRevision<PersonEntity> {

} 
```

在我的代码中的某处，我将执行以下调用：

```
// is not null
PersonEntity personEntity;

PersonData personData = personEntity.getLatestRevision().getVersionedEntityData(); 
```

由于某些原因标记为类型不匹配...

```
Type mismatch: cannot convert from BaseVersionedEntityData<capture#1-of ? extends BaseVersionedEntity> to PersonData 
```

谁能找到错误？？或者有什么提示？？

谢谢！！本杰明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:52:23.663

该方法`getLatestRevision`不返回 a `PersonRevision`，它返回 a `BaseRevision`，即使`PersonRevision`那样也不返回`PersonData`- 您需要显式转换，因为这是一个向下转换，甚至不是由类型擦除导致的“安全”向下转换之一：

```
PersonData personData = (PersonData)(personEntity.getLatestRevision().getVersionedEntityData()); 
```

# php - 检查 in_array php 是否不起作用

> ID：13753143
> 
> 赞同：0
> 
> 时间：2012-12-06T21:42:42.647
> 
> 标签：php, arrays

我想检查数组中的值。如果它不存在，它将被推送到一个新数组。如果该值已经存在，则不会将其添加到新值中。但是使用我的代码检查值不起作用。

如果存在特定值，它仍然会添加数组。

我得到了这个代码：

```
foreach($user_movie_info['data'] as $movie) {

            similar_text($movie_facebook_page['genre'], $movie['genre'], $percent);

            if ($percent > 30) {
                echo $movie_facebook_page['genre']. "" ."</br>";
                echo $movie['genre']. "" ."</br>";
                echo $percent. "" ."</br>";
                echo "match! </br></br>";

                // add all movie information to matched array, only if its not already present
                if (!in_array($movie_facebook_page['name'], $matched_movies_array)) {

                    array_push($matched_movies_array, $movie_facebook_page);
                }

        } //foreach 
```

如果我打印出 $matched_movies_array 我得到一个数组 2 次：

```
Array
(
    [0] => Array
        (
            [about] => In theaters January 4th 2013 www.TexasChainsaw3D.com
            [can_post] => 1
            [description] => Lionsgateâ€™s TEXAS CHAINSAW 3D continues the legendary story of the homicidal Sawyer family, picking up where Tobe Hooperâ€™s 1974 horror classic left off in Newt, Texas, where for decades people went missing without a trace.  The townspeople long suspected the Sawyer family, owners of a local barbeque pit, were somehow responsible.  Their suspicions were finally confirmed one hot summer day when a young woman escaped the Sawyer house following the brutal murders of her four friends.  Word around the small town quickly spread, and a vigilante mob of enraged locals surrounded the Sawyer stronghold, burning it to the ground and killing every last member of the family â€“ or so they thought. 

Decades later and hundreds of miles away from the original massacre, a young woman named Heather learns that she has inherited a Texas estate from a grandmother she never knew she had.  After embarking on a road trip with friends to uncover her roots, she finds she is the sole owner of a lavish, isolated Victorian mansion. But her newfound wealth comes at a price as she stumbles upon a horror that awaits her in the mansionâ€™s dank cellarsâ€¦

With gruesome surprises in store for a whole new generation, TEXAS CHAINSAW 3D stars Alexandra Daddario, Dan Yeager, Tremaine â€˜Trey Songzâ€™ Neverson, Scott Eastwood, Tania Raymonde, Shaun Sipos, Keram Malicki-Sanchez, James MacDonald, Thom Barry, Paul Rae and Richard Riehle, along with special appearances from four beloved cast members from previous installments of the franchise: Gunnar Hansen (the original Leatherface), Marilyn Burns, John Dugan and Bill Moseley. The film is directed by John Luessenhop (TAKERS), from a screenplay by Adam Marcus & Debra Sullivan and Kirsten Elms, based on a story by Stephen Susco and Adam Marcus & Debra Sullivan and based on characters created by Kim Henkel and Tobe Hooper, and produced by Carl Mazzocone. Lionsgate presents a  production and Main Line Pictures production.

            [directed_by] => John Luessenhop 
            [genre] => Horror
            [is_published] => 1
            [produced_by] => Millennium Films
            [release_date] => January 4th 2012
            [screenplay_by] => Adam Marcus & Debra Sullivan and Kirsten Elms
            [starring] => Alexandra Daddario, Dan Yeager, Tremaine â€˜Trey Songzâ€™ Neverson, Scott Eastwood, Tania Raymonde, Shaun Sipos, Keram Malicki-Sanchez, James MacDonald, Thom Barry, Paul Rae and Richard Riehle
            [studio] => Lionsgate
            [talking_about_count] => 62964
            [username] => TexasChainsaw3D
            [website] => www.texaschainsaw3d.com, twitter.com/lionsgatehorror, http://pinterest.com/lionsgatemovies/texas-chainsaw-3d, https://plus.google.com/u/0/+LionsgateMovies, http://instagr.am/p/Qpm0JMPtDr/
            [were_here_count] => 0
            [written_by] => based on a story by Stephen Susco and Adam Marcus & Debra Sullivan
            [category] => Movie
            [id] => 323192834416509
            [name] => Texas Chainsaw 3D
            [link] => http://www.facebook.com/TexasChainsaw3D
            [likes] => 367992
            [cover] => Array
                (
                    [cover_id] => 4.14284428641E+14
                    [source] => http://sphotos-c.ak.fbcdn.net/hphotos-ak-ash3/s720x720/530974_414284428640682_1806025466_n.png
                    [offset_y] => 0
                )

        )

    [1] => Array
        (
            [about] => The official Facebook Page for The Shining |  All work and no play makes Jack a dull boy.
            [awards] => (1981) Saturn Award, Best Supporting Actor, Scatman Crothers
            [can_post] => 1
            [description] => Get The Shining at the WB Shop: http://bit.ly/shiningdvd
            [directed_by] => Stanley Kubrick 
            [genre] => Horror, Suspense/Thriller 
            [is_published] => 1
            [plot_outline] => All work and no play makes Academy Award-winner Jack Nicholson ("As Good As It Gets," "Batman"), the caretaker of an isolated resort, go way off the deep end, terrorizing his young son and wife Shelley Duvall ("Roxanne"). Master filmmaker Stanley Kubrick's ("Full Metal Jacket," "2001: A Space Odyssey") visually haunting chiller, based on the bestseller by master-of-suspense Stephen King ("The Stand," "Carrie," "The Shawshank Redemption"), is an undeniable contemporary classic. Newsweek Magazine calls this "the first epic horror film," full of indelible images, and a signature role for Nicholson whose character was recently selected by AFI for its' 50 Greatest Villains.

            [produced_by] => Jan Harlan, Stanley Kubrick
            [release_date] => 5/23/80
            [screenplay_by] => Stephen King, Diane Johnson  
            [starring] => Jack Nicholson, Shelley Duvall, Danny Lloyd, Scatman Crothers 
            [studio] => Warner Bros.
            [talking_about_count] => 5594
            [username] => KubrickShining
            [website] => http://bit.ly/shiningdvd
            [were_here_count] => 0
            [written_by] => Stephen King
            [category] => Movie
            [id] => 135347089926692
            [name] => The Shining
            [link] => http://www.facebook.com/KubrickShining
            [likes] => 832526
            [cover] => Array
                (
                    [cover_id] => 2.24275514367E+14
                    [source] => http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash4/320182_224275514367182_46004854_n.jpg
                    [offset_y] => 85
                )

        )

    [2] => Array
        (
            [about] => The official Facebook Page for The Shining |  All work and no play makes Jack a dull boy.
            [awards] => (1981) Saturn Award, Best Supporting Actor, Scatman Crothers
            [can_post] => 1
            [description] => Get The Shining at the WB Shop: http://bit.ly/shiningdvd
            [directed_by] => Stanley Kubrick 
            [genre] => Horror, Suspense/Thriller 
            [is_published] => 1
            [plot_outline] => All work and no play makes Academy Award-winner Jack Nicholson ("As Good As It Gets," "Batman"), the caretaker of an isolated resort, go way off the deep end, terrorizing his young son and wife Shelley Duvall ("Roxanne"). Master filmmaker Stanley Kubrick's ("Full Metal Jacket," "2001: A Space Odyssey") visually haunting chiller, based on the bestseller by master-of-suspense Stephen King ("The Stand," "Carrie," "The Shawshank Redemption"), is an undeniable contemporary classic. Newsweek Magazine calls this "the first epic horror film," full of indelible images, and a signature role for Nicholson whose character was recently selected by AFI for its' 50 Greatest Villains.

            [produced_by] => Jan Harlan, Stanley Kubrick
            [release_date] => 5/23/80
            [screenplay_by] => Stephen King, Diane Johnson  
            [starring] => Jack Nicholson, Shelley Duvall, Danny Lloyd, Scatman Crothers 
            [studio] => Warner Bros.
            [talking_about_count] => 5594
            [username] => KubrickShining
            [website] => http://bit.ly/shiningdvd
            [were_here_count] => 0
            [written_by] => Stephen King
            [category] => Movie
            [id] => 135347089926692
            [name] => The Shining
            [link] => http://www.facebook.com/KubrickShining
            [likes] => 832526
            [cover] => Array
                (
                    [cover_id] => 2.24275514367E+14
                    [source] => http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash4/320182_224275514367182_46004854_n.jpg
                    [offset_y] => 85
                )

        )

) 
```

我从 Facebook 的开放图形 api 获得此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:49:10.763

$matched_movies_array 不包含电影名称。所以 in_array 永远不会通过。

尝试类似：

```
$movieIds = array();
foreach($user_movie_info['data'] as $movie) {

        similar_text($movie_facebook_page['genre'], $movie['genre'], $percent);

        if ($percent > 30) {
            echo $movie_facebook_page['genre']. "" ."</br>";
            echo $movie['genre']. "" ."</br>";
            echo $percent. "" ."</br>";
            echo "match! </br></br>";

            // add all movie information to matched array, only if its not already present
            if (!in_array($movie_facebook_page['id'], $movieIds)) {
                $movieIds[] = $movie_facebook_page['id'];
                array_push($matched_movies_array, $movie_facebook_page);
            }

    } //foreach 
```

或者甚至更好：

```
 $id = $movie_facebook_page['id'];
            if (!isset($matched_movies_array[$id])) {
                $matched_movies_array[$id] = $movie_facebook_page;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:08:12.393

in_array() 函数无法在多维数组中搜索字符串。以此为例：

```
$find = array("name" => "test");
$matches = array(array("name" => "test"), array("name" => "test2"));

echo (in_array($find['name'], $matches)) ? "found" : "not found";

echo "<br /><br />";

echo (in_array($find, $matches)) ? "found" : "not found"; 
```

第一个回声是“未找到”，第二个是“找到”。您应该使用整个 $movie_facebook_page 数组作为指针。

# java - 如何识别名词的复数

> ID：13753146
> 
> 赞同：2
> 
> 时间：2012-12-06T21:42:51.323
> 
> 标签：java, inflector

我见过有人问过类似的问题，但没有任何好的答案。我现在遇到了同样的问题，有人可以帮忙吗？

见下文：

输入：单词列表

输出：识别复数形式的名词，如果可能的话将它们转换成单数形式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:47:08.893

WordNet will be able to help with stripping plurals. It is a full morphological dictionary of English language.

[http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)

The JAWS is a simple Java API which talks to WordNet, though others exist.

[http://lyle.smu.edu/~tspell/jaws/index.html](http://lyle.smu.edu/~tspell/jaws/index.html)

Note, WordNet will not perfectly deal with the various idiosyncrasies of English, from [their FAQ](http://wordnet.princeton.edu/wordnet/frequently-asked-questions/other/):

> Along with a set of irregular forms (e.g. children - child), it uses a sequence of simple rules, stripping common English endings until it finds a word form present in WordNet. Furthermore, it assumes its input is a valid inflected form. So, it will take "childes" to "child", even though "childes" is not a word.

# ruby-on-rails - 无法从帖子视图创建评论

> ID：13753149
> 
> 赞同：1
> 
> 时间：2012-12-06T21:42:56.157
> 
> 标签：ruby-on-rails, ruby

我有一个`Post`模型`has_many :comments`。将发布评论的表单将与帖子一起显示在 中`posts/show.html.erb`。我有一个`comments_controller`应该处理评论的创建。在google上搜索，我发现

```
<%= form_for([@post, Comment.new], :controller => 'comments', :action => 'create') do |f| %> 
```

但这不起作用。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:25:23.073

```
class Post < ActiveRecord::Base
  has_many :comments

  accepts_nested_attributes_for :comments
#...

class Comment < ActiveRecord::Base
  belongs_to :post
#... 
```

然后在表格中

```
form_for @post do |f|
  f.fields_for :comments do |c|
    c.text_field :title
    #...
  f.submit 
```

这将通过活动记录的accepts_nested_attributes_for 创建关联对象，不需要单独的comments_controller。您正在提交到帖子控制器，该控制器正在处理在帖子更新期间创建关联对象。

使用 comments_controller，您可以做以下两件事之一：

将 item_id 作为参数发送到 comments_controller#new，获取该项目，然后从中构建新评论

```
@post = Post.find(params[:item_id); @comment = @post.comments.build 
```

将 post_id 放在表单上的隐藏字段中，然后像往常一样创建评论

```
# in the controller
@comment = Comment.create(params[:comment])

# in the view
form_for @comment do |f|
  f.text_field :title
  #...
  f.hidden_field :post_id, value: @post.id 
```

# django - Django Apache wsgi virtualenv 导入错误

> ID：13753151
> 
> 赞同：2
> 
> 时间：2012-12-06T21:43:01.087
> 
> 标签：django, mod-wsgi, wsgi, django-wsgi

我正在尝试使用 WSGI 部署在 Apache 上部署 Django（位于 virtualenv 中）。我正在遵循[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/的默认教程](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)

wsgi.py（Django 生成的默认文件，已删除注释）：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "server.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

apache2.conf （它与 Debian 中的 httpd.conf 相同）。将此附加到末尾：

```
WSGIScriptAlias / /home/user/Desktop/expofit/expofit_hg/py/server/server/wsgi.py
WSGIDaemonProcess example.com python-path=/home/user/Desktop/expofit/expofit_hg/py/server:/home/user/Desktop/expofit/expofit_env/lib/python2.7/site-packages
WSGIProcessGroup example.com

<Directory /home/user/Desktop/expofit/expofit_hg/py/server/server>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>

Alias /static/ /home/user/Desktop/expofit/expofit_hg/py/server/server/static

<Directory /home/user/Desktop/expofit/expofit_hg/py/server/server/static>
Order deny,allow
Allow from all
</Directory> 
```

但是，这以错误结束：

```
[Thu Dec 06 17:08:40 2012] [error] [client 192.168.56.1] ImportError: No module named django.core.wsgi 
```

似乎标准的python是可以访问的，因为

```
import os 
```

不会产生错误。所以似乎从 virtualenv 导入的模块是不可导入的。教程说：

> 如果您使用守护程序模式，则需要对上述配置进行进一步更改，即您不能使用 WSGIPythonPath；相反，您应该使用 WSGIDaemonProcess 的 python-path 选项，例如：

```
WSGIDaemonProcess example.com python-path=/path/to/mysite.com:/path/to/venv/lib/python2.7/site-packages
WSGIProcessGroup example.com 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:56:20.980

问题出在权限上。我没有检查谁是用户，一开始的权限是什么，但是，当我将权限 777 更改为包含 Django 代码文件的所有目录时，它开始工作。

我知道一个人必须尽可能小心使用权限，并且为所有内容提供 777 并不是最好的方法，但应该检查如何以最小的权限更改使其工作。然而，它解决了问题中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:49:17.287

对于单个应用程序，这是最容易开箱即用的，请参阅[http://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Baseline_Environment](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Baseline_Environment) 这或使用 WSGIPythonPath 都不能仅用于虚拟主机，但必须是全球的。

```
WSGIPythonHome [path to virtualenv folder] 
```

如果您有多个应用程序 - 使用 sys.path 将您的 virtualenv 的 site-packages 文件夹附加到 wsgi.py 的顶部似乎是最简单的事情，请参阅[http://code.google.com/p/modwsgi/wiki/VirtualEnvironments #Application_Environments](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Application_Environments)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:52:08.630

你的环境的pythonpath与我认为的apache不同。
使用 easy_install 或 pip 安装 django “globaly”

或将 .virtualenv pythonpath 添加到 mod_wsgi 配置

WSGIPythonPath 目录|directory-1:directory-2:

[MOD_wsgi 配置](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)

# bash - 用于更改父 shell 目录的 Bash 脚本

> ID：13753157
> 
> 赞同：11
> 
> 时间：2012-12-06T21:43:25.960
> 
> 标签：bash, shell, unix, cd

**我正在尝试做的事情**

我创建了一个 shell 脚本，并将其添加到我的 $PATH 中，它将下载并设置新[Laravel](http://laravel.com/)项目的所有内容。我希望通过将终端目录更改为新项目文件夹来结束脚本。

据我目前了解，它只是更改脚本实际运行的子 shell 的目录。我似乎无法弄清楚如何做到这一点。任何帮助表示赞赏。谢谢！

```
#! /usr/bin/env bash

echo -e '\033[1;30m=========================================='

## check for a directory
if test -z "$1"; then
  echo -e ' \033[0;31m✖ Please provide a directory name'
  exit
fi

## check if directory already exist
if [ ! -d $1 ]; then
  mkdir $1
else
  echo -e ' \033[0;31m✖ The '"$1"' directory already exists'
  exit
fi

# move to directory
cd $1

## Download Laravel
echo -e ' \033[0;32m+ \033[0mDownloading Laravel...'
curl -s -L https://github.com/laravel/laravel/zipball/master > laravel.zip

## Unzip, move, and clean up Laravel
echo -e ' \033[0;32m+ \033[0mUnzipping and cleaning up files...'
unzip -q laravel.zip
rm laravel.zip
cd *-laravel-*
mv * ..
cd ..
rm -R *-laravel-*

## Make the /storage directory writable
echo -e ' \033[0;32m+ \033[0mMaking /storage directory writable...'
chmod -R o+w storage

## Download and install the Generators
echo -e ' \033[0;32m+ \033[0mInstalling Generators...'
curl -s -L https://raw.github.com/JeffreyWay/Laravel-Generator/master/generate.php > application/tasks/generate.php

## Update the application key
echo -e ' \033[0;32m+ \033[0mUpdating Application Key...'
MD5=`date +”%N” | md5`
sed -ie 's/YourSecretKeyGoesHere!/'"$MD5"'/' application/config/application.php
rm application/config/application.phpe

## Create .gitignore and initial git if -git is passed
if [ "$2" == "-git" ]; then
  echo -e ' \033[0;32m+ \033[0mInitiating git...'
  touch .gitignore
  curl -s -L https://raw.github.com/gist/4223565/be9f8e85f74a92c95e615ad1649c8d773e908036/.gitignore > .gitignore

  # Create a local git repo
  git init --quiet
  git add * .gitignore
  git commit -m 'Initial commit.' --quiet
fi

echo -e '\033[1;30m=========================================='
echo -e ' \033[0;32m✔ Laravel Setup Complete\033[0m'

## Change parent shell directory to new directory
## Currently it's only changing in the sub shell
filepath=`pwd`
cd "$filepath" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T21:53:34.973

从技术上讲`source`，您可以在您的父 shell 中运行脚本，而不是生成子 shell 来运行它。这样，您对当前 shell 所做的任何更改（包括更改目录）都会持续存在。

```
source /path/to/my/script/script 
```

或者

```
. /path/to/my/script/script 
```

但采购有其自身的危险，谨慎使用。

（外围相关：如何[使用脚本改变目录](http://sampsonchen.com/2012/09/18/three-shortcuts-to-quickly-change-directories-in-linux/)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T22:29:46.290

### 使用 shell*函数*来前端你的脚本

```
setup () {
  # first, call your big script.
  # (It could be open-coded here but that might be a bit ugly.)

  # then finally...

  cd someplace
} 
```

将 shell 函数放在 shell 启动文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T22:14:04.693

子进程（包括 shell）不能更改父进程的当前目录。典型的解决方案是在父 shell 中使用 eval。在您希望由父 shell 运行的 shell 脚本 echo 命令中：

```
echo "cd $filepath" 
```

在父 shell 中，您可以使用 eval 启动 shell 脚本：

```
eval `sh foo.sh` 
```

请注意，所有标准输出都将作为 shell 命令执行。消息应该输出到标准错误：

```
echo "Some messages" >&2
command ... >&2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T21:45:42.887

这是做不到的。用于`exec`在适当的目录中打开一个新的 shell，替换脚本解释器。

```
exec bash 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T22:12:59.187

我想一种可能性是确保脚本的唯一输出是您想要结束的路径名，然后执行：

```
cd `/path/to/my/script` 
```

您的脚本无法直接影响其父 shell 的环境（包括它的当前目录），但这会要求父 shell 本身根据脚本的输出更改目录...

# mysql - 从 cpanel/whm 迁移到 Heroku 或 AWS

> ID：13753158
> 
> 赞同：2
> 
> 时间：2012-12-06T21:43:35.017
> 
> 标签：mysql, heroku, amazon-web-services, cpanel, whm

我有一个安装了 WHM 和 cPanel 的专用服务器。

最近我决定转向云服务，因为专用服务器的成本很高，而且我实际上并没有使用它的任何功能、自由度和功能。

我正在考虑迁移到 AWS 或 Heroku，因为它们更便宜、可扩展，而且我不需要自己管理服务器。

* * *

我的服务器上只有几个网站，我通过 cPanel 和 WHM 管理它们

我只使用 mySql 数据库

我也有一些 cron 作业设置

我使用 ftp 上传和维护我的网站（没有 git）

* * *

我想知道是否有人可以解释我如何将我的文件、数据库和域传输到 AWS 或 Heroku。

我更喜欢迁移到更容易和更快的那个。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:15:09.987

如果服务器/网络管理不是你的强项，我强烈建议不要使用 AWS（即使我是 AWS 的大力支持者）。您绝对必须自己管理服务器，至少是配置方面（而不是硬件方面）。事实上，你会发现你必须做一些事情，比如设置安全策略、身份访问管理、IP 地址等，这对于不习惯以一点操作能力工作的人来说并不总是那么直观。

您可能还必须考虑更改应用程序架构以最好地使用 AWS 服务。此外，您将不得不习惯 AWS 的做事方式（启动和停止服务器实例可能会使您的所有数据消失等）。

如果您正在寻找一种不干涉服务器的方法，那么查看 Slicehost/Rackspace 之类的东西可能会更好。

我不能和 Heroku 谈太多，因为我对它的原型设计经验很少。您可以将其更多地视为一个应用程序平台。对于没有独特流量需求或架构要求的简单应用程序，这似乎是一个很好的解决方案，可以通过最少的服务器相关配置来启动和运行应用程序。同样，遗留应用程序可能需要重新架构才能以 Heroku 的方式做事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:20:39.780

AWS 很好，但 Rackspace 的支持要好得多，而且更适合像您这样的人。Rackspaces 支持 24/7，甚至在他们的在线聊天系统上，您无需等待超过几分钟即可与真正知道他们在做什么的人交谈。

# symfony - 如何将变量传递给控制器

> ID：13753161
> 
> 赞同：0
> 
> 时间：2012-12-06T21:43:44.020
> 
> 标签：symfony

我创建自己的捆绑包。此捆绑包中有一个类。

在这个类中，我有一个变量`$Url`。我想在另一个包中的控制器中使用这个变量。如何将变量传递给不同包中的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:48:10.457

听起来您需要将该类转换为服务并使用依赖注入设置 $url 值。或者如果您计划在一个控制器中修改 $url 并稍后在另一个控制器中再次访问它，您可能需要保留 $url上。无论哪种方式，您都需要将该类文件转换为服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:19:48.750

我认为最好的选择是创建一个控制器即服务。[您可以在Richard Miller 的博客文章](http://richardmiller.co.uk/2011/04/15/symfony2-controller-as-service/)中了解这一点。

完成后，您可以创建一个值为 的服务参数`$Url`：

```
# app/config/config.yml
parameters:
    my_first_bundle.url: Some value

services:
    # request and response services
    my.response: 
        class: Symfony\Component\HttpFoundation\Response
    my.request: 
        class: Symfony\Component\HttpFoundation\Request

    # controller services
    my_second_bundle.mycontroller: 
        class: Acme\MySecondBundle\Controller\MyController
        arguments: [ %my.response%, %my.request%, %my_first_bundle.url% ] 
```

# java - 我可以重写 URL、添加查询参数并保留表单数据吗？

> ID：13753164
> 
> 赞同：1
> 
> 时间：2012-12-06T21:43:53.923
> 
> 标签：java, url-rewriting, apache2, mod-jk

我有这样的规则：

```
RewriteCond %{HTTP_HOST}:%{QUERY_STRING} ^(\w+)\.t(.*)\.(\w+)?\.sprawk\.com:(.*)$
RewriteRule ^(.*) /api/translateHtmlPublic?tl=%1&su=%2&p=$1&q=%4 [B,PT,L] 
```

这对 GET 请求很有用。

但是，对于 POST 请求， q 参数为空（这是我所期望的），但在我的 Java servlet 中，`HttpServletRequest.getReader()`和都`HttpServletRequest.getInputStream()`没有提供数据。

使用 Firefox Live 标头，我看到我正在发送：

```
POST /uid/contactSend.cfm HTTP/1.1
Host: fr.t51940.local.sprawk.com
Connection: keep-alive
Referer: http://fr.t51940.local.sprawk.com/uid/contact.cfm?country=137
Cache-Control: max-age=0
Content-Type: application/x-www-form-urlencoded
Content-Length: 146
userName=Nic&queryCountry=Libya&queryCode=137&userEmail=n.cottrell%40idea.int&Comment=Just+testing&captcha=Quotas&Submit=--+Envoyer+Commentaire+-- 
```

我知道 servlet 正在接收它，`POST`因为该`doPost`方法被触发。我知道 Apache 2.x 应该在简单的重写过程中自动保留 POST 数据，但也许添加参数正在擦除内容数据？

更新：我刚刚意识到（通过转储所有参数）userName、queryCountry、queryCode 参数正在通过该`request.getParameter(String)`方法获得正确的值。问题是我需要能够将原始表单参数名称与我在 RewriteRule 中介绍的名称分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:28:08.030

1.  POST 的参数在正文中，而不是标题中。您可以在不影响它们的情况下尽可能多地重写 URL。

2.  内容类型为的 POST 请求的主体仅包含通过读取主体通过`application/x-www-form-urlencoded`检索到的参数，并且不会传递任何内容。（Servlet 规范 3，#3.1.1）`request.getParameter().``request.getInputStream()``request.getReader()`

3.  根据 Servlet Specifcation #3，您添加到 URL 的参数应该可以通过`getParameter()`.

4.  无法区分正文中的 POST 参数和标头中的 URL 参数。因此，您的解决方案或您的问题可能有问题。

# google-chrome-extension - 无法让 ExtensionSidebarPane.setObject 工作

> ID：13753165
> 
> 赞同：0
> 
> 时间：2012-12-06T21:43:56.233
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试修改调试工具元素面板以添加我自己的自定义数据。该数据与被检查页面的网页 DOM 无关。我想把我自己的东西放在那里。

所以，我做了以下事情：

```
function createDebug(token)

    {
        console.log("createDebug() " + token);
        chrome.devtools.panels.elements.createSidebarPane(
            "Token Details: " + token,
            function(sidebar) {
              function updateElementProperties() {
                console.log("updateElementProperties()");
                var data = {};
                data.token = token;
                var s = JSON.stringify(data);
                console.log(s);
                sidebar.setObject(s, "DATA");
              }
              console.log("createSidebarPane() callback");
              updateElementProperties();
        });
    } 
```

当我打开 devtools 时，我只看到我在“令牌详细信息”面板的“数据”子项上设置的对象。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T07:10:25.883

我猜文档令人困惑，`extensionSidebarPane.setObject(string jsonObject, string rootTitle, function callback)`它必须是`extensionSidebarPane.setObject( jsonObject, string rootTitle, function callback)`.

因此，您使用[JSON.stringify()将其显式转换为字符串](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)

```
var data = {};
data.token = token;
var s = JSON.stringify(data);
console.log(s); 
```

我已经消除了最后几行`var s = JSON.stringify(data); console.log(s);`，它正在工作。

![在此处输入图像描述](../Images/f25350ab76e7d82a70a46f9a63774b11.png)

**示范**

使用您的功能，我可以使用以下代码。

***清单.json***

注册`devtools.html`到清单

```
{
  "name": "Dev Tools",
  "description":"This demonstrates dev tools API",
  "version": "1.0",
  "manifest_version":2,
  "devtools_page": "devtools.html"

} 
```

***开发工具.html***

微不足道`devtools.html`的使用`devtools.js`

```
<html>
<head>
<script src="devtools.js"></script>
</head>
<body>
</body>
</html> 
```

***开发工具.js***

消除了显式字符串标记。

```
function createDebug(token){
    console.log("createDebug() " + token);
        chrome.devtools.panels.elements.createSidebarPane(
            "Token Details: " + token,
            function(sidebar) {
              function updateElementProperties() {
                console.log("updateElementProperties()");
                var data = {};
                data.token = token;
                //Commenting out explicit string conversion
                //var s = JSON.stringify(data);
                //console.log(s);
                sidebar.setObject(data, "DATA");
              }
              console.log("createSidebarPane() callback");
              updateElementProperties();
    });

}

document.addEventListener("DOMContentLoaded",function (){
    createDebug("Trivial Token one");
}); 
```

如果您需要更多信息，请与我们联系

# c++ - 使用来自外部类的枚举来避免在 .proto 中定义？

> ID：13753174
> 
> 赞同：4
> 
> 时间：2012-12-06T21:44:29.033
> 
> 标签：c++, python, protocol-buffers

我在代码中有三种不同格式的消息，我制作了所有三个 .proto 文件并进行了编译。我已经有另一个，比如说有很多枚举的常规类，我需要在所有三个类中使用这些枚举。有什么方法可以使用外部常规类中的枚举，而不是在所有三个文件中的 proto 中定义相同的枚举？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:26:32.700

我不太清楚你所说的*外部常规课程*是什么意思......？

如果你想在 C++ 中定义枚举，然后把它放在一个 Protobuf 中，只需在 proto 中放一个 int 字段即可。

但是如果你想要一个由多个原型使用的公共枚举，你可以使用导入：

common.proto：

```
package foo_common;

enum Color {
    red = 1;
    black = 2;
} 
```

树.proto：

```
package foo_tree;

import "common.proto";

message Node {
     optional foo_common.Color color = 1;
}; 
```

# excel - Excel 函数可根据事件的月份和年份显示事件的总发生次数

> ID：13753178
> 
> 赞同：0
> 
> 时间：2012-12-06T21:45:03.307
> 
> 标签：excel

在我的 excel 文件中，我们正在跟踪要维修的物品及其相应的到达日期。日期从 A3 开始，一直到 A23。我需要一个函数来根据 C45（7 月）、D45（8 月）等的到达日期输出每个月有多少物品到达。这甚至可能吗？

没有与这些日期对应的值。这就是我之前尝试使用 LOOKUP 功能失败的原因。谢谢。

```
Arrival Date
7/10/2012
9/10/2012
9/18/2012
9/18/2012
9/19/2012

Total Failures      July '12    August '12  September '12   
Historical         1                0                4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:20:35.097

放入`=SUMPRODUCT(--(MONTH($A$3:$A$23)= 7))`C45

放入`=SUMPRODUCT(--(MONTH($A$3:$A$23)= 8))`D45

礼貌：www.chandoo.org

# orm - Coldfusion ORM NTEXT 类型导致返回“dbo”而不是对象

> ID：13753179
> 
> 赞同：3
> 
> 时间：2012-12-06T21:45:05.040
> 
> 标签：orm, coldfusion, hql, distinct, coldfusion-9

我有一个工作正常的用户对象，直到我向它添加了一个新字段以进行描述。新字段的类型为“NTEXT”，定义为：

```
<cfproperty name="description" type="string" ormtype="text"> 
```

我有一个 HQL 查询，然后搜索在某些地方具有特定权限级别的不同用户。此查询运行良好，直到添加了描述字段，此时它决定它不能返回不同的用户，因为您不能在 NTEXT 字段上使用 distinct。

为了解决这个问题，我嵌套了查询，以便它在嵌套查询中查找用户 ID 所在的用户，现在只选择不同的用户 ID 而不是整个用户对象。

这不再引发错误，而是返回字符串“dbo”而不是用户对象。

我查看了 HQL 日志，复制了函数，用它们的 db 表替换了对象并插入了参数，函数在 mssql 管理器中的行为应该如此。

为什么 orm 会返回 dbo 而不是对象而不给出任何进一步的错误？有谁知道如何处理 NTEXT 字段，以免引起这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:00:54.037

我正在使用

```
SELECT USER 
```

在 hql 查询中，因为它最初是

```
SELECT DISTINCT USER 
```

这是将选择直接发送到返回数据库的当前用户而不是用户对象的数据库。

删除选择行修复了问题

# backbone.js - 传递给路由的查询包含/时的主干.js路由

> ID：13753180
> 
> 赞同：5
> 
> 时间：2012-12-06T21:45:07.473
> 
> 标签：backbone.js, backbone-routing

我的应用程序基本上接受一些表单输入并返回一组结果。我有两条路线

```
routes: {
        '': 'search',
        'search': 'search',
        'results/:query': 'results'
    },
    results: function(query) {
        var search = new ResultsSearchView();
        var grid = new GridView({ query: query });
    } 
```

如果查询包含任何字符 / 特别（在这种情况下可能完全发生），它们将被添加到 URL 并且我的路由中断。

我已经尝试过使用`encodeURI()`并且`encodeURIComponent()`有点我没有任何运气。你们这些人是怎么处理这些事情的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:50:14.950

您可以[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)在构建 URL 时使用将其转换`/`为`%2F`，然后[`decodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)在路由处理程序内部将它们转换回来；HTML 会像这样结束：

```
<a href="#results/pancakes">no slash</a>
<a href="#results/where%2Fis%2Fpancakes%2Fhouse">with slashes</a> 
```

然后在路由器中：

```
routes: {
    'results/:query': 'results'
},
results: function(query) {
    query = decodeURIComponent(query);
    // Do useful things here...
} 
```

演示：http: [//jsfiddle.net/ambiguous/sbpfD/](http://jsfiddle.net/ambiguous/sbpfD/)

或者，您可以使用[splat route](http://backbonejs.org/#Router-routes)：

> 路由可以包含参数部分，`:param`匹配斜杠之间的单个 URL 组件；和 splat parts `*splat`，可以匹配任意数量的 URL 组件。

所以你的 HTML 会是这样的：

```
<a href="#results/pancakes">no slash</a>
<a href="#results/where/is/pancakes/house">with slashes</a> 
```

和你的路由器：

```
routes: {
    'results/*query': 'results'
},
results: function(query) {
    // Do useful things here...
} 
```

演示：http: [//jsfiddle.net/ambiguous/awJxG/](http://jsfiddle.net/ambiguous/awJxG/)

# charts - 如何在 Kendo UI 折线图上对齐系列？

> ID：13753188
> 
> 赞同：0
> 
> 时间：2012-12-06T21:46:01.457
> 
> 标签：charts, telerik, kendo-ui, kendo-dataviz

我需要将系列线对齐到图表的右侧。它始终居中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:47:44.203

图表的 Q3 版本支持每个轴的[合理](http://docs.kendoui.com/api/dataviz/chart#categoryaxisjustified%20booleandefault)设置。它将线和面积系列延伸到轴的最末端。

```
categoryAxis: {
  justified: true
} 
```

在此处查看现场演示：[JS Bin](http://jsbin.com/ihaqov/1/edit)

我希望我正确理解了你的问题。

# c# - Setting a DateTime to the first of the next month?

> ID：13753193
> 
> 赞同：10
> 
> 时间：2012-12-06T21:46:17.707
> 
> 标签：c#

If I have `var olddate = DateTime.Parse('05/13/2012');`

and I want to get `var newdate = (the first of the month after olddate, 06/01/2012 in this case);`

What would I code? I tried to set the month+1 but month has no setter.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-06T21:47:54.057

尝试这个：

```
olddate = olddate.AddMonths(1);
DateTime newDate = new DateTime(olddate.Year, olddate.Month, 1, 
    0, 0, 0, olddate.Kind); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T21:49:48.667

这永远不会导致超出范围的错误，并且会保留`DateTime`'s Kind.

```
dt = dt.AddMonths(1.0);
dt = new DateTime(dt.Year, dt.Month, 1, 0, 0, 0, dt.Kind); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T21:51:31.340

You have to define the Month and Year rightly, and after set the 1ª day. Try this:

```
// define the right month and year of next month.
var tempDate = oldDate.AddMonths(1);

// define the newDate with the nextmonth and set the day as the first day :)
var newDate = new DateTime(tempDate.Year, tempDate.Month, 1); //create 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-14T16:38:16.793

试试这个简单的单行：

```
var olddate = DateTime.Parse("05/13/2012");
var newdate = olddate.AddDays(-olddate.Day + 1).AddMonths(1);
// newdate == DateTime.Parse("06/01/2012") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:59:03.457

很多例子......选择你的位置;）

```
var olddate = DateTime.Parse("05/12/2012");

int currentDay = ((DateTime)olddate).Day;
//can always replace the while loop and just put a 1 for current day
while(currentDay != 1)
   currentDay--;

var newdate = (DateTime.Parse(olddate.AddMonths(1).Month.ToString() + "/" + currentDay.ToString() + "/" + olddate.AddMonths(1).Year.ToString())); 
```

# php - How to Deploy CodeIgniter/Laravel Apps

> ID：13753198
> 
> 赞同：16
> 
> 时间：2012-12-06T21:46:42.780
> 
> 标签：php, codeigniter, laravel

I need to know which are my options when deploying codeigniter/laravel apps.

I develop locally all the time at my home and when i go to work i need some quick way to push all the changes to the server.

Application code needs to be updated, database schemas need to be migrated, and application servers must be restarted.

I do all of this manually wasting a lot of time and i need some automated way kinda like capistrano in Rails environment.

What are my options here ??

**Update:** I got my own server machine, and everything needs to work on an intranet environment without internet connection.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T08:10:07.573

我使用了以下内容：

1.  盐 - [http://www.saltstack.org/](http://www.saltstack.org/)

    运行良好，设置有点繁琐。超快速部署。很多控制。Puppet & Chef 的学习开销更少，具有一定程度的原生 MySQL 工具。

2.  GitHub

    需要与您的机器建立互联网连接 - 在某种程度上，端点作为交互式脚本的写入权限......有效，但让我感到紧张。拉比推好，它比大多数其他解决方案更好。

3.  自定义 shell 脚本

    是的 - 这是最常见的，一旦它在暂存中得到验证并使用 Salt 推出，只需将整个 CI 目录 tar...

4.  超极

    几个月来我们一直在研究这个——界面是 1990 年代的，但它有非常好的功能，包括可以在任何机器上定位的独立于系统的脚本库。

5.  交钥匙 Linux

    锤子 - 这会将整个系统映像从桌面迁移到 EC2 大约需要 5 分钟。效果很好，您还可以在 VM 系统之间移动内容。最后，我认为在 EC2 上更新 AMI 非常容易，这可能是答案之一......

没有什么是真正令人满意的，数据库架构更改是一个巨大的痛苦。以至于对于客户端配置，我们正在从 MySQL 迁移到 Cassandra，这基本上是无模式的。CI 安装程序很有趣，但我不确定它如何处理更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:07:40.863

我最近在 GitHub 上遇到了[这个 CodeIgniter 安装程序。](https://github.com/mikecrittenden/codeigniter-installer)我已经玩过几次了，它对我来说就像一个魅力。

就像把它放在你的根目录（在你的系统文件夹旁边），生成一个 MySQL 转储，然后编辑一些文件一样简单。[完整的说明在这里](https://github.com/mikecrittenden/codeigniter-installer/blob/master/README.md)

我希望它对你有用，对我也有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T03:01:39.520

我在 Github 上发现了这个[Laravel 安装程序](https://github.com/RachidLaasri/LaravelInstaller)，它可能很有用。（首先我在谷歌搜索 Laravel 安装程序后遇到了这个问题，然后在 Github 上搜索了 Laravel 安装程序）

# jquery - 需要 jQuery 投资组合脚本的帮助

> ID：13753200
> 
> 赞同：2
> 
> 时间：2012-12-06T21:46:58.850
> 
> 标签：jquery

我正在为我的网站创建一个投资组合页面。我想在我的网站上展示我的作品，所以我有这个想法。

我将展示我所有的作品，比如 10 张图片。如果任何人点击特定的缩略图图像，所有的缩略图都将淡出，有关工作或项目的详细信息将显示在页面上。现在他们可以点击“关闭”，这样当前的作品就会消失，所有的缩略图都会重新出现。

我使用以下方法实现了这一点：

**HTML 代码看起来像这样**

```
<div class="container project_container">
    <div class="four columns project proj1">
        <img src="http://placehold.it/220x220" /></li>
    </div><!-- End three columns -->

    <div class="four columns project proj2">
        <img src="http://placehold.it/220x220" /></li>
    </div><!-- End three columns -->

    <div class="four columns project proj3">
        <img src="http://placehold.it/220x220" /></li>
    </div><!-- End three columns -->

    <div class="four columns project proj4">
        <img src="http://placehold.it/220x220" /></li>
    </div><!-- End three columns -->
</div><!-- End Container -->

<!-- Project 1 to be displayed when all thumbnails are hidden -->
<div id="project1" class="container project_description">
    <div class="eight columns project_image">
        <p>This is an eight column text for image</p>
    </div><!-- End Eight Columns -->

    <div class="eight columns project_details">
        <p>This is an eight column text</p>
        <a href="#" class="close">Close</a>
    </div><!-- End Eight Columns -->
</div><!-- End Container project description --> 
```

**jQuery 代码如下所示：**

```
$('.project_description').hide();

$('.proj1').click(function(){
   $('.project').fadeOut('fast', function(){
     $('#project1').fadeIn('fast');
   });
});

$('.close').click(function(){
    $('#project1').hide();
    $('.project').fadeIn('fast');
}); 
```

我现在的问题是，假设我有 20 个项目要放在我的网站上，或者如果我以后添加它们怎么办？我是否需要像这样在我的 custom.js 文件中继续添加代码？

```
$('.proj2').click(function(){
   $('.project').fadeOut('fast', function(){
     $('#project2').fadeIn('fast');
   });
});

$('.close').click(function(){
    $('#project2').hide();
    $('.project').fadeIn('fast');
}); 
```

等等将 proj2 更改为 proj3,4,5,6 ..... 将 project2 更改为 3,4,5 等，？

我有什么简单的方法可以做到这一点吗？我的意思是在不重复相同代码的情况下询问我是否有办法实现上述方法？

任何帮助表示赞赏。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:58:14.973

将项目的索引存储在缩略图的某处。无论是在数据中，还是在 ID 中。[演示](http://jsfiddle.net/68UyY/5/)

```
<div class="four columns project proj1" data-projectindex="1"> 
```

用css而不是js隐藏描述

```
.project_description {
    display: none;
} 
```

然后制作一个处理任何项目的单击处理程序。

```
$('.project').click(function(){
    var index = $(this).data('projectindex');
    $('.project').fadeOut('fast', function(){
        $('#project' + index).fadeIn('fast');
    });
}); 
```

概括关闭按钮

```
$('.close').click(function(){
    $('.project_description').hide();
    $('.project').fadeIn('fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:51:48.343

您可以使用 .on() - [http://api.jquery.com/on/](http://api.jquery.com/on/)

然后是这样的：

```
$(".project_container").on("click", "div", function(){
  console.log('i hit them all!');
}); 
```

（在浏览器中按 F12 检查控制台）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:08:05.997

你可以做这样的事情 - 假设你的结构和你的例子完全一样

```
$('.project_description').hide();

$('.project').click(function(){
    var idx = $(this).index(); // get index of clicked project - assuming they are in the same order
   $('.project').fadeOut('fast', function(){      
     $('.project_description').eq(idx).fadeIn('fast'); // fadein only the clicked project
   });
});

$('.close').click(function(){
    $('.project_description:visible').hide(); // hide all visible description
    $('.project').fadeIn('fast');
});​ 
```

[http://jsfiddle.net/ePbaL/](http://jsfiddle.net/ePbaL/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T21:50:26.310

您可以使用循环将事件绑定到所有“项目”：

```
for (i = 1; i <= projectsNum; i++) {

$('.proj' + i).click(function(){
   $('.project').fadeOut('fast', function(){
     $('#project' + i).fadeIn('fast');
   });
});

$('.close').click(function(){
    $('#project' + i).hide();
    $('.project').fadeIn('fast');
});

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T21:51:34.997

不，让它动态。

例如，通过使用带有 LIKE 的选择器：

代替

$('#project1').fadeIn('fast');

放一些类似的东西

$('div[id^="project"]').fadeIn('fast');

或者

$("[id^=project]").fadeIn('fast');

应该选择 id 以“project”开头的所有 div

你可以为类做同样的事情：

$("[类^=项目]")

# javascript - selectedOptions[0].textContent; not working in IE or Firefox

> ID：13753201
> 
> 赞同：21
> 
> 时间：2012-12-06T21:47:01.093
> 
> 标签：javascript, html

```
function call(op) {
    var x = op.selectedOptions[0].textContent;
    var n = x.substring(0, 3);
    //alert(n);
    document.pts.inputbox.value = n;
    document.pts.submit();
} 
```

I have a function that grabs the label value from a selected option in a list box, then it disects out the first 3 letters and passes that information on to an input box value.

The issue is with how the js is grabbing the selected options label text content. It seems to work in Chrome just fine, but in firefox17 and IE9 nothing happens. Any suggestions on a better way to get the selected options label value?

EDIT: I can NOT use the options value, that value is reserved for something more specific Everything works fine in JSfiddle.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-06T22:19:48.180

尝试这个

```
function call(op) {
    var x = op.options[op.selectedIndex].text;
    var n = x.substring(0, 3);
    alert('Index : '+op.selectedIndex+' and first 3 lettrs are : '+n);
} 
```

[**演示**](http://jsfiddle.net/V7ehJ/1/)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-06T22:14:58.857

基于快速[JSFiddle](http://jsfiddle.net/f39cC/29/)，该`selectedOptions`集合尚未得到广泛支持。

**失败/不支持：**

*   IE10（桌面或地铁）
*   IE11
*   野生动物园 7
*   iOS6 Opera Mini
*   安卓4.0.4浏览器
*   安卓 4.0.4 火狐浏览器

**作品：**

*   铬 23.0.1271.95
*   歌剧 12.11
*   黑莓 10 浏览器
*   iOS6 Safari
*   iOS6 铬
*   Android 4.0.4 Opera 移动浏览器
*   火狐 53.0
*   边缘

# python - Pandas 中奇怪的数据操作

> ID：13753213
> 
> 赞同：7
> 
> 时间：2012-12-06T21:47:51.763
> 
> 标签：python, pandas

我正在阅读 Wes Mckinney 的 Python for Data Analysis，但我对这种数据操作感到惊讶。[你可以在这里](http://cmayes.wikispaces.com/PythonForDataAnalysis)看到所有的过程，但我会在这里总结一下。假设你有这样的事情：

```
In [133]: agg_counts = by_tz_os.size().unstack().fillna(0)
    Out[133]:
    a                 Not Windows   Windows
    tz                  245          276
    Africa/Cairo         0            3
    Africa/Casablanca    0            1
    Africa/Ceuta         0            2
    Africa/Johannesburg  0            1
    Africa/Lusaka        0            1
    America/Anchorage    4            1
    ... 
```

`tz`表示时区，`Not Windows`和`Windows`是从原始数据中的User Agent中提取的类别，所以我们可以从收集的数据中看到非洲/开罗有3个Windows用户和0个非Windows用户。

然后为了获得“最高的总时区”，我们有：

```
In [134]: indexer = agg_counts.sum(1).argsort()
Out[134]:
tz
                                  24
Africa/Cairo                      20
Africa/Casablanca                 21
Africa/Ceuta                      92
Africa/Johannesburg               87
Africa/Lusaka                     53
America/Anchorage                 54
America/Argentina/Buenos_Aires    57
America/Argentina/Cordoba         26
America/Argentina/Mendoza         55
America/Bogota                    62
... 
```

所以在那一点上，我会认为根据[文档](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.sum.html)我正在对列（in `sum(1)`）求和，然后根据显示参数的结果进行排序（就像在 argsort 中一样）。首先，我不确定在本系列的上下文中“列”是什么意思，因为`sum(1)`实际上是求和`Not Windows`，并且`Windows`用户将该值与其时区保持在同一行中。此外，我看不到 argsort 值和`agg_counts`. 例如，`Pacific/Auckland`具有`In[134]`0 的“argsort 值”（in ）并且它只有 11`Windows`和`Not Windows`users 的总和。`Asia/Harbin`argsort 值为 1，总和为 3`Windows`且不是 Windows 用户。

有人可以向我解释那里发生了什么吗？显然我误解了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:11:57.133

`sum(1)`表示总和`axis = 1`。该术语来自`numpy`.

对于 2+ 维对象，0 轴指的是行。在 0 轴上求和意味着对行求和，这相当于“垂直”求和（查看表格时）。

1 轴指的是列。对 1 轴求和意味着对列求和，这相当于“水平”求和。

* * *

`numpy.argsort`返回一个*索引*数组，告诉您如何对数组进行排序。例如：

```
In [72]: import numpy as np

In [73]: x = np.array([521, 3, 1, 2, 1, 1, 5])

In [74]: np.argsort(x)
Out[74]: array([2, 4, 5, 3, 1, 6, 0]) 
```

返回的数组中的 2表示is`np.argsort`中的最小值，等于。下一个最小的也是 1。依此类推。`x``x[2]``1``x[4]`

如果我们定义

```
totals = df.sum(1)
print(totals)
# tz                     521
# Africa/Cairo             3
# Africa/Casablanca        1
# Africa/Ceuta             2
# Africa/Johannesburg      1
# Africa/Lusaka            1
# America/Anchorage        5 
```

然后`totals.argsort()`是对值进行 argsorting `[521, 3, 1, 2, 1, 1, 5]`。我们已经看到了结果；它与以下内容相同`numpy.argsort`：

```
[2, 4, 5, 3, 1, 6, 0] 
```

这些值被简单地制成 a `Series`，与`index`相同`totals`：

```
print(totals.argsort())
# tz                     2
# Africa/Cairo           4
# Africa/Casablanca      5
# Africa/Ceuta           3
# Africa/Johannesburg    1
# Africa/Lusaka          6
# America/Anchorage      0 
```

将`totals.index`与此 argsort 索引相关联似乎没有内在含义，但如果您计算，`totals[totals.argsort()]`您会看到`totals`按排序顺序的行：

```
print(totals[totals.argsort()])
# Africa/Casablanca        1
# Africa/Johannesburg      1
# Africa/Lusaka            1
# Africa/Ceuta             2
# Africa/Cairo             3
# America/Anchorage        5
# tz                     521 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-18T20:42:10.050

我喜欢 unutbu 的澄清。在上面倒数第二个表中，print(totals.argsort())，忽略第一列。我们需要的是第二列，它给出了我们需要的位置。这太酷了！

以下是一些关于 take 方法的示例：[https ://pandas-docs.github.io/pandas-docs-travis/advanced.html#take-methods](https://pandas-docs.github.io/pandas-docs-travis/advanced.html#take-methods)

# python-2.7 - Python2 中的任何分配变量是否等于（==）“raw_input（）”？

> ID：13753219
> 
> 赞同：1
> 
> 时间：2012-12-06T21:48:08.350
> 
> 标签：python-2.7, raw-input

“raw_input”一般用于对字符串进行提示响应，然后也可以通过变量赋值（=）。

但是我发现了一些奇怪的东西（对我来说）并且不能很好理解。在一个错误事件的情况下（见下面的例子），我把一个等于（==）用于在函数中分配变量。然后我在解释器中运行它并且没有任何错误。我通过我的脚本做得很好，但它不能作为我的专家。

我的问题：我想知道 Python 中“raw_input”的这种用法是否正确？如果是，我们如何使用它？如果没有，为什么解释器不给我们一个错误警告？

非常感谢。

例子：

```
Python 2.7.3 (default, Apr 24 2012, 00:00:54) 
[GCC 4.7.0 20120414 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> v = "Variable"
>>> def test():
...     v == raw_input(">")
...     print v
... 
>>> test()
>Hello!
Variable
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:50:47.567

这：

```
v == raw_input(">") 
```

只是一个比较。你得到`True`or`False`作为结果然后把它扔掉，因为你没有给它一个名字。你可以写

```
comparison = v == raw_input(">")
print comparison 
```

看价值。

# ios - iOS 用户界面自定义工具包？

> ID：13753222
> 
> 赞同：8
> 
> 时间：2012-12-06T21:48:17.070
> 
> 标签：ios, user-interface, sdk, look-and-feel

我知道最近的 iOS 版本增加了对通过其“外观”功能轻松自定义其组件外观和感觉的支持。然而，我并不完全有*艺术倾向*。

有谁知道提供易于使用 iOS 外观 API 插入的预打包用户界面自定义工具包的资源？我正在寻找高质量的外观和感觉，但也希望看到展示如何将其集成到应用程序中的示例代码。我真的不在乎它是购买的还是免费的。我只是想要看起来非常光滑和高质量的东西。想法？

**更新：** 好的，我找到了一个提供我正在寻找的东西的网站。 [AppDesignVault.com](http://www.appdesignvault.com)为 iOS 应用程序提供了预打包的应用程序模板（图形、代码等）。然而，我很难相信他们是唯一提供这个的。有没有人遇到过类似的资源或包？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T21:35:56.687

不完全是替代品，但您可能想看看[NUI](https://github.com/tombenner/nui)，它是一个支持主题的开源 UI 样式库（主题是用 CSS 样式标记语言编写的）。另一个寻找现成 UI 组件的好资源是[cocoa 控件](http://www.cocoacontrols.com/)，同样，它并不是完全插入和忘记，但仍然比自己实现它更好（尽管那里的东西质量差异很大）。
我不知道有任何提供现成样式的替代品，但我希望这两个能让你以某种方式开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:38:12.307

[这是我喜欢和使用的 objc 自定义库： http](http://www.objclibs.com/#) ://www.objclibs.com/# 。也许其中之一会引起你的幻想？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T02:01:43.163

还有很多，就[在这里](http://www.queness.com/post/10870/useful-collection-of-ios-tools-and-resources-for-designers)。

一旦你有了这些设计，这里有一个在 iOS 6 中实际实现它们的[教程。](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)

# c# - 在 MVVM 中是否可以在视图的代码中访问 ViewModel？

> ID：13753228
> 
> 赞同：3
> 
> 时间：2012-12-06T21:48:31.940
> 
> 标签：c#, wpf, mvvm, viewmodel, datacontext

在 MVVM 模式中，是否可以接受甚至可以在后面的视图代码中访问 ViewModel 属性？

我有一个可观察的集合，它填充在 ViewModel 中。我需要在视图中使用它来绑定到带有链表的无尽代码。IE

```
 private LinkedList<Border> tickerForex = new LinkedList<Border>();

    public ForexBuy()
    {
        InitializeComponent();
        DataContext = new ForexViewModel();
    }

    private void InitializeForexTicker()
    {
        CanvasForexBuyTicker.Children.Clear();
        foreach (var currency in DataContext.Currencies) //Is this possible/allowable???
        {
           AddTickerItem(currency);
        }

        CanvasForexBuyTicker.Dispatcher.BeginInvoke(DispatcherPriority.Background, new DispatcherOperationCallback(delegate
        { var node = tickerForex.First;

            while (node != null)
            {
                if (node.Previous != null)
                {
                    Canvas.SetLeft(node.Value, Canvas.GetLeft(node.Previous.Value) + node.Previous.Value.ActualWidth + gap);
                }
                else
                {
                    Canvas.SetLeft(node.Value, CanvasForexBuyTicker.Width + gap);
                }

                node = node.Next;
            }

            return null;

        }), null);

}

void AddTickerItem(Currency currency)
    {
        Border border = new Border();
        border.Background = new SolidColorBrush(Color.FromArgb(255, 0, 99, 99));

        if (currency.IsUpward == 0)
        {
            border.Background = new SolidColorBrush(Color.FromArgb(255, 255, 153, 0));
        }

        border.BorderThickness = new Thickness(3);
        border.BorderBrush = new SolidColorBrush(Colors.White);
        border.CornerRadius = new CornerRadius(10);
        border.Width = Double.NaN;
        border.Height = 35;

        UIHelper.CanvasAutoSize canvas = new UIHelper.CanvasAutoSize();
        canvas.Background = Brushes.Green;  
        canvas.Tag = currency;
        canvas.Height = Double.NaN;

        TextBlock tb = new TextBlock
        {
            Text = currency.Code + " " + currency.Sell + " ",
            FontSize = 22,
            FontWeight = FontWeights.Bold,
            Foreground = Brushes.Black
        };

        tb.SetValue(Canvas.LeftProperty, 8d);
        tb.SetValue(Canvas.TopProperty, 2d);
        canvas.Children.Add(tb);

        tb.TouchDown += TouchTickerItem;

        border.Child = canvas;

        CanvasForexBuyTicker.Children.Add(border);
        Canvas.SetTop(CanvasForexBuyTicker, 3);
        Canvas.SetLeft(CanvasForexBuyTicker, 0);

        tickerForex.AddLast(border);
    } 
```

对于调度程序是否应该从 ViewModel 触发或是否在后面的视图代码中使用它，我有点迷茫。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T23:23:39.427

如果问题只是关于*如何*从后面的代码访问 ViewModel，您可以简单地将 DataContext 转换为正确的类型：

```
var viewModel = (MyViewModel)DataContext;

foreach (var currency in viewModel.Currencies)
{
    ...
} 
```

这是否可以接受是一个品味问题。我看不出通过视图的 XAML 中的绑定或一段代码隐藏来访问视图模型有任何根本区别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T21:56:52.997

简短的回答：不。

您不应该将特定于业务或模型的代码放在后面的代码中。只有特定于 VIEW 的代码应该放在后面的代码中。

你为什么要声明一个`List<Border>`. 对我来说听起来很奇怪。你到底想做什么？

# javascript - SlickGrid 使用 AMD 污染全局命名空间

> ID：13753229
> 
> 赞同：0
> 
> 时间：2012-12-06T21:48:37.303
> 
> 标签：javascript, requirejs, slickgrid, amd

我正在尝试将 SlickGrid 导入我的应用程序...但即使我使用 AMD 加载模块，它也会将自身附加到窗口

有没有办法使用 Shim 配置来避免污染命名空间。另一个问题可能是 SlickGrid 依赖项将在全局命名空间中寻找它。

想法会很棒。

```
shim:
  'grid/slick.core':
     deps: ["jquery"]
  'grid/slick.grid':
     deps: ["jquery"]
  'grid/jquery.event.drag-2.0.min':
     deps: ["jquery"]
  'grid/jquery.event.drop-2.0.min':
     deps: ["jquery"]

define [
 "grid/jquery.event.drag-2.0.min"
 "grid/jquery.event.drop-2.0.min"
 "grid/slick.core"
 "grid/slick.grid"
], () -> 
```

有我当前的 Shim 配置以及我正在使用网格的模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:49:40.273

原则上，您可以使用`init()`shim 配置中的回调从全局范围中删除任何对象：

```
'grid/slick.core': {
  deps: ['jquery'],
  exports: 'Slick',
  init: function (bar) {
    //"this" is the global scope
    var slick = this.Slick;
    delete this.Slick;
    return slick;
  }
} 
```

但是正如您在问题中所述，库本身取决于全局对象上是否存在 Slick 属性，对此您无能为力。

您可以：

*   联系插件作者并要求他添加 AMD 支持（或者更好的是，在 github 上提交拉取请求）
*   将插件代码包装在`define`自己的调用中，然后删除 shim 配置。

# javascript - 如果满足其他数据条件，则将隐藏复选框设置为 true

> ID：13753235
> 
> 赞同：0
> 
> 时间：2012-12-06T21:49:19.803
> 
> 标签：javascript, jquery, jquery-ui, kendo-ui

我有一个分为[Kendo UI Panel Bar](http://demos.kendoui.com/web/panelbar/index.html)的表单。在第一个面板中，我有一个字段，当填充任何文本时，会选中一个当前不可见且位于其下方折叠面板内的复选框。

我的问题是复选框没有选中。我已经阅读了一些关于复选框在不可见时如何被禁用的帖子。有解决方法吗？

```
 function Validate(uid) {
    if ($("#SomeNumber_" + uid).val().length > 0) 
    {
        $("#MyCheckBox").attr('checked', true);  //This checkbox is display:none at the time this is set
        //Also tried these, but they didn't work:
        //$("#MyCheckBox").click();
        //var myCheckBox= document.getElementById("MyCheckBox");
        //myCheckBox.checked = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:53:37.967

尝试`$("#MyCheckBox").prop('checked', true);`

我有一个类似的用例，可以证明可以检查隐藏的复选框。

我认为使用 attr 的正确方法是 `$("#MyCheckBox").attr('checked', 'checked');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:07:15.617

刚刚通过按钮动态更改复选框来测试复选框上的显示无。它适用于显示无设置。

[http://jsfiddle.net/jmsessink/hcWf8/1/](http://jsfiddle.net/jmsessink/hcWf8/1/)

以下会将您的复选框的属性设置为“已选中” -

这 -

```
$('#MyCheckBox').attr('checked', true) 
```

也

```
$('#MyCheckBox').attr('checked', 'checked') 
```

也

```
document.getElementById('MyCheckBox').checked = true; 
```

也

```
document.getElementById('MyCheckBox').checked = 'checked'; 
```

*edit - 更新 jsfiddle 版本以显示这四种方法

# core-data - 核心数据：究竟什么是“实体”？

> ID：13753236
> 
> 赞同：1
> 
> 时间：2012-12-06T21:49:31.317
> 
> 标签：core-data, entity

根据我多年前在学校学到的知识，实体是数据库中的实际对象。记录集或数据集。

这就是我记得的方式，但我可能是错的。

但是在我读过的许多书中，实体不是对象，而是对象的数据模型，如类。当我在 Xcode 中的核心数据 - 数据模型编辑器中并单击“添加实体”时，我不会将对象添加到数据库，而是添加另一个数据模型。

所以我很困惑！

一个实体，它是像一个对象，还是像我可以从中创建对象的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:45:36.077

如果你想精通核心数据，你应该学习相关的词汇，这在开始时可能是违反直觉的。

让我强调一下，核心数据**不仅仅是**一个数据库包装器，而是一个对象图。因此，请对我在这里给出的等价物持保留态度。

一个**实体**将对应于数据库中的一个表。**属性**
将对应于表中的特定字段。**关系**（一对一或一对多）将是外键的存在 。**多对多关系** 将是具有两个外键的连接表。

 ******数据库中的一个“记录”将是某个实体的一个**实例**。请注意，通常的做法是使用对应的类对实体进行建模，这些类是`NSManagedObject`. 因此，实例化与任何其他对象的工作方式非常相似，只是它们被持久化在数据库存储中。

一定要花一些时间在[Core Data Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)上。******

# c# - 使用 foreach 语句

> ID：13753237
> 
> 赞同：0
> 
> 时间：2012-12-06T21:49:35.233
> 
> 标签：c#

我试图看看我是否可以使用 foreach 语句来尝试让我制作的程序搜索整个数组，因为我没有预设大小并且我不想为它玩猜谜游戏. 我尝试了这段代码，但它告诉我，“不能将类型'string'隐式转换为'int'，它指向'if (query == search[k])

我不确定它到底在说什么，但有人可以帮忙吗？谢谢你。

```
 private void findLast_Click(object sender, EventArgs e)
    {
        query = textBox2.Text;
        search = File.ReadAllText(fileName).Split(new string[] { "\n", "\r\n", ":" }, StringSplitOptions.RemoveEmptyEntries);
        foreach (string k in search)
        {
            if (query == search[k])
            {
                MessageBox.Show("Match");
            }
            else
                MessageBox.Show("No Match");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:52:28.963

在每个循环中，您已经拥有该对象。

```
private void findLast_Click(object sender, EventArgs e)
    {
        query = textBox2.Text;
        search = File.ReadAllText(fileName).Split(new string[] { "\n", "\r\n", ":" }, StringSplitOptions.RemoveEmptyEntries);
        foreach (string k in search)
        {
            if (query == k)
            {
                MessageBox.Show("Match");
            }
            else
                MessageBox.Show("No Match");
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:51:19.750

`k` is a string - therefore you can't use it as the index of an array. Try just `query == k` instead.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:51:35.713

Change your test to

```
if (query == k) 
```

the syntax that you are using is for simple for loop

```
for(int k; k < search.Length; k++)
{
   if (query == search[k])
       .....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T21:52:59.550

C# 不是 JavaScript...`foreach`为您提供元素的价值，而不是索引：

```
 foreach (string currentItem in search)
 {
    if (query == currentItem)
    {... 
```

# r - 从R中的列表元素制作一个向量

> ID：13753239
> 
> 赞同：10
> 
> 时间：2012-12-06T21:49:42.577
> 
> 标签：r, list

我有一个我用 R 编写的函数的引导统计列表列表。主列表有 1000 次引导迭代。列表中的每个元素本身就是一个包含三项内容的列表，包括四个变量中每一个的拟合值（“fvboot”——一个 501x4 矩阵）。

我想为 x 值网格上的每个位置创建一个值向量，从 1:501 开始，对于每个变量，从 1:4 开始。

例如，对于第 j 个变量的 xgrid 上的第 i 个点，我想制作一个如下所示的向量：

```
 vec = bootfits$fvboot[[1:1000]][i,j] 
```

但是当我这样做时，我得到：

```
recursive indexing failed at level 2 
```

谷歌搜索，我想我明白为什么 R 会这样做。但我没有得到关于如何将每个 fvboot 矩阵的第 ij 个元素转换为 1000x1 向量的答案。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-25T16:21:27.637

在 R 中使用 unlist() 函数。从`example(unlist)`,

```
unlist(options())
unlist(options(), use.names = FALSE)

l.ex <- list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
unlist(l.ex, recursive = FALSE)
unlist(l.ex, recursive = TRUE)

l1 <- list(a = "a", b = 2, c = pi+2i)
unlist(l1) # a character vector
l2 <- list(a = "a", b = as.name("b"), c = pi+2i)
unlist(l2) # remains a list

ll <- list(as.name("sinc"), quote( a + b ), 1:10, letters, expression(1+x))
utils::str(ll)
for(x in ll)
  stopifnot(identical(x, unlist(x))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T22:08:17.893

如果你给出一个最小的示例对象，这会更容易。通常，您不能使用诸如`[[1:1000]]`. 我会使用这些`plyr`功能。这应该可以做到（虽然我没有测试过）：

```
require("plyr")
laply(bootfits$fvboot,function(l) l[i,j]) 
```

如果您不熟悉`plyr`：我总是发现 Hadley Wickham 的文章“[数据分析的拆分-应用-组合策略](http://www.jstatsoft.org/v40/i01)”非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T23:54:38.973

您可以使用 sapply 一次提取一个向量，例如对于 i=1 和 j=1：

```
i <- 1
j <- 1
vec <- sapply(bootfits, function(x){x$fvboot[i,j]}) 
```

sapply 对列表 bootfits 的每个元素执行函数（在本例中是我们编写的内联函数），并尽可能简化结果（即，将其从列表转换为向量）。

要将一整套值提取为矩阵（例如，在所有 i 上），您可以将其包装在另一个 sapply 中，但这次在 i 上用于指定 j：

```
j <- 1
mymatrix <- sapply(1:501, function(i){
    sapply(bootfits, function(x){x$fvboot[i,j]})
}) 
```

警告：我没有测试过这段代码，但我认为它应该可以工作。

# javascript - 使用 JavaScript 将表单中的动态字段集放入 JSON

> ID：13753241
> 
> 赞同：0
> 
> 时间：2012-12-06T21:49:56.270
> 
> 标签：javascript, json

我有一个具有动态行数的表单。每行有 3 个字段，一个隐藏的 id、代码和交换。

```
<form id="form_in_question">
    <table>
        <tr>
            <td>0</td>
            <td>
                <input type="hidden" id="id[]" value="123" />
                <input type="input" id="code[]" value="abc" />
            </td>
            <td>
               <select id="exchange[]">
                   <!-- Options... -->
               <select>
            <td>
        <tr>
        <!-- unlimited rows... -->
    </table>
</form> 
```

我试图得到一个看起来像这样的对象：

```
data: {
    "0": {
            id: "123",
            code: "abc",
            exchange: "2"
         },
    "1": {
            id: "124",
            code: "bcd",
            exchange: "4"
         }
       } 
```

所以我可以通过 AJAX 向它传递一个 JSON 对象，例如：

```
$("#dialogEditor").dialog('option', 'buttons', {'Save' : function() {
/* Define variables */
var data = $("#form_in_question").serializeArray();
    $.ajax({
    url: 'ajax.codes.php',
    dataType: 'json',
    data: {
        action: "update_codes",
    entryId: entry,
    data: data
    },
                                            type: 'POST',
                                            success: function() {
    ui.showMsg("Codes Updated");
}
}); 
```

这就是我实际传递的 JSON 的样子：

```
data[0][name]   id[]
data[0][value]  
data[1][name]   code[]
data[1][value]  zxc
data[2][name]   exchange[]
data[2][value]  15
data[3][name]   id[]
data[3][value]  
data[4][name]   code[]
data[4][value]  BVA
data[5][name]   exchange[]
data[5][value]  5 
```

或原始数据：action=update_codes&ResortId=12&data%5B0%5D%5Bname%5D=id%5B%5D&data%5B0%5D%5Bvalue%5D=&data%5B1%5D%5Bname%5D=code%5B%5D&data%5B1 %5D%5Bvalue%5D=zxc&data%5B2%5D%5Bname%5D=exchange%5B%5D&data%5B2%5D%5Bvalue%5D=15&data%5B3%5D%5Bname%5D=id%5B%5D&data%5B3%5D %5Bvalue%5D=&data%5B4%5D%5Bname%5D=code%5B%5D&data%5B4%5D%5Bvalue%5D=BVA&data%5B5%5D%5Bname%5D=exchange%5B%5D&data%5B5%5D%5Bvalue %5D=5

我尝试了一种在 SO 上找到的方法，但它没有将 3 个字段组合在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:28:08.327

以下代码应该可以工作：

```
var data = [];
var table = $("table").get()[0];

for (var i=0; i<table.rows.length; i++) {

    var tableRow = table.rows[i];
    var rowData = {};
    var inputData = {};

    inputData["id"] = $("input[id^='id']", $(tableRow.cells[1])).val();
    inputData["code"] = $("input[id^='code']", $(tableRow.cells[1])).val();
    inputData["exchange"] = $("select[id^='exchange']",$(tableRow.cells[2])).val();

    rowData[$(tableRow.cells[0]).text()] = inputData;

    data.push(rowData);
}

console.log(JSON.stringify(data)); 
```

# objective-c - 将 NSString 中的文本转换为等效的 8 字节 ASCII Hex，并存储回 NSString

> ID：13753244
> 
> 赞同：2
> 
> 时间：2012-12-06T21:49:59.647
> 
> 标签：objective-c, ios

我想将 NSString 转换为`@"2525"`NSString `@"0032003500320035"`。十六进制的 8 字节 ASCII 值`"2"`是`"0032"`，对于`"5"`它是`"0035"`. 为了获得等效的c字符串，我尝试了...

```
const char *pinUTF8 = [pin cStringUsingEncoding:NSASCIIStringEncoding]; 
```

...但正如你所看到的，我正在为此苦苦挣扎，我知道这不会那么容易。有小费吗？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:58:24.637

试试这个：

```
NSString *str = @"2525";
const char *s = [str cStringUsingEncoding:NSASCIIStringEncoding];
size_t len = strlen(s);

NSMutableString *asciiCodes = [NSMutableString string];
for (int i = 0; i < len; i++) {
    [asciiCodes appendFormat:@"%04x", (int)s[i]];
}

NSLog(@"%@", asciiCodes); 
```

# python - 中位数组合适合python中的图像

> ID：13753251
> 
> 赞同：10
> 
> 时间：2012-12-06T21:50:44.127
> 
> 标签：python, multidimensional-array, fits

我有三个适合二维 numpy 数组形式的图像。我想对它们进行中位数组合，即生成一个输出数组，其中每个像素是三个输入数组中相同像素的中位数。这可以使用 imcombine 在 IRAF 上轻松完成。有没有办法在 Python 上做到这一点，而无需遍历整个数组并获取每个像素的中值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T22:08:07.120

最简单的方法是：

*   堆叠 2d 数组以形成 3d 数组
*   [`numpy.median`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.median.html)使用传递来计算中位数，`axis=0`以沿着堆叠的维度进行计算。

您实际上是在计算元素中位数。这是我将要做的一个简单示例：

```
>>> import numpy
>>> a = numpy.array([[1,2,3],[4,5,6]])
>>> b = numpy.array([[3,4,5],[6,7,8]])
>>> c = numpy.array([[9,10,11],[12,1,2]])
>>> d = numpy.array([a,b,c])
>>> d
array([[[ 1,  2,  3],
        [ 4,  5,  6]],

       [[ 3,  4,  5],
        [ 6,  7,  8]],

       [[ 9, 10, 11],
        [12,  1,  2]]])
>>> d.shape
(3, 2, 3)

>>> numpy.median(d, axis=0)
array([[ 3.,  4.,  5.],
       [ 6.,  5.,  6.]]) 
```

# iphone - “implicit declaration of function '…' is invalid in C99”

> ID：13753255
> 
> 赞同：-4
> 
> 时间：2012-12-06T21:50:52.100
> 
> 标签：iphone, objective-c, ios, xcode

I am trying to make a simple soundboard app for the iphone, but have come across some troubles including `implicit definition of function '...' is invalid in C99`, about a few different functions.

My .h file looks like this:

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController

{

}

- (IBAction) Jesus: (id) sender;

@end 
```

and my .m file code looks like this:

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction) NamedAction:(id)sender: (id) sender
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Jesus",
    CSFTR("WAV") NULL);
    if  (soundFileURLRef) {
        CFStringRef url = CFURLGetString(soundFileURLRef);
        NSLog(@"string for URl is %@", (__bridge NSString *) url);
    }

    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

}

@end 
```

The error message I'm getting is:

> Called object type 'int' is not a function or function pointer

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:54:09.007

`- (IBAction) NamedAction:(id)sender: (id) sender`

必须变量命名相同，可能第二个是错字：

`- (IBAction) NamedAction: (id) sender`

和

`soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Jesus", CSFTR("WAV") NULL);`

可能在 NULL 之前缺少逗号？

`soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Jesus", CSFTR("WAV"), NULL);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T18:13:21.423

CSFTR 是什么功能？显然编译器从未听说过它，这就是它所说的（以一种相当奇怪的方式。在 C99 之前，使用没有声明的函数是隐式声明，C99 删除了它）。

可能是您尝试使用名称稍有不同的宏吗？

我真的建议您避免使用 Core Foundation 函数。特别是因为 NSBundle 和 CFBundle 的行为可能不同。尤其是 Core Foundation 和 ARC 的组合可能会使您的大脑受伤并可能导致内存泄漏或崩溃，除非您*真的*知道自己在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:53:25.617

你忘了在你的项目中添加一个框架，我怀疑它是 AudioToolBox

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-29T06:34:49.343

在其他警告标志中添加-Wno-implicit-function-declaration，您将能够编译代码。虽然它不是一个好的解决方案，但它会起作用。

# java - Java 冒泡排序问题

> ID：13753256
> 
> 赞同：1
> 
> 时间：2012-12-06T21:51:01.470
> 
> 标签：java, runtime, bubble-sort

我编写了一个冒泡排序程序，将 10000 个唯一值按顺序排序。

我已经运行了这个程序，它给了我一个时间输出（使用 nanoTime）来表示程序完成所需的时间，但我希望在程序代码中添加另一个输出；程序从开始到结束需要多少次排序。

这是代码：

```
public class BubbleSort {
public static void main(String[] args) {
    int BubArray[] = new int[]{#here are 10000 integers#};
    System.out.println("Array Before Bubble Sort");
        for(int a = 0; a < BubArray.length; a++){
             System.out.print(BubArray[a] + " ");
        }

         double timeTaken = bubbleSortTimeTaken(BubArray);
            bubbleSort(BubArray);
            System.out.println("");               
            System.out.println("Array After Bubble Sort");
    System.out.println("    Time taken for Sort : " + timeTaken + " milliseconds.");                
            for(int a = 0; a < BubArray.length; a++){
                    System.out.print(BubArray[a] + " ");
        }
}

private static void bubbleSort(int[] BubArray) {

        int z = BubArray.length;
        int temp = 0;

        for(int a = 0; a < z; a++){
                for(int x=1; x < (z-a); x++){

                        if(BubArray[x-1] > BubArray[x]){

                                temp = BubArray[x-1];
                                BubArray[x-1] = BubArray[x];
                                BubArray[x] = temp;

                        }      
                }
        }
}
public static double bubbleSortTimeTaken(int[] BubArray) {
long startTime = System.nanoTime();
    bubbleSort(BubArray);
long timeTaken = System.nanoTime() - startTime;
return timeTaken;
}
} 
```

代码执行并输出我想要的方式：

```
Array Before Bubble Sort
13981 6793 2662 10986 733 10107 2850 ... 
Array After Bubble Sort
10 11 17 24 35 53 57 60 61 78 83 89 128 131 138 141 ....
Time taken for Sort : 1.6788472E7 milliseconds. 
```

但我希望在代码中添加另一个输出，它告诉我完成多少次移动（基本上是一个移动计数器），即：

```
Time taken for Sort : 1.6788472E7 milliseconds.
Total number of moves: 3000 
```

这有意义吗？任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:55:59.540

试试这个：

```
// returns the number of switches
private int bubbleSort(int[] BubArray) {

        int z = BubArray.length;
        int temp = 0;
        int timesSwitched = 0;
        for(int a = 0; a < z; a++){
                for(int x=1; x < (z-a); x++){

                        if(BubArray[x-1] > BubArray[x]){

                                temp = BubArray[x-1];
                                BubArray[x-1] = BubArray[x];
                                BubArray[x] = temp;
                                timesSwitched++
                        }      
                }
        }
     return timesSwitched;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:00:51.117

我会更改`bubbleSort`为返回一个 int 并将您的[时间复杂度](http://en.wikipedia.org/wiki/Time_complexity)分配给它。

```
private static int bubbleSort(int[] BubArray) {

        int z = BubArray.length;
        int temp = 0;

        int itrs = 0;

        for(int a = 0; a < z; a++){
                for(int x=1; x < (z-a); x++){

                        if(BubArray[x-1] > BubArray[x]){

                                temp = BubArray[x-1];
                                BubArray[x-1] = BubArray[x];
                                BubArray[x] = temp;

                        }    

                        itrs++;
                }
        }

        return itrs; 
```

}

然后在`main`：

```
int itrs = bubbleSort(BubArray);
            System.out.println("");               
            System.out.println("Array After Bubble Sort");
    System.out.println("    Time taken for Sort : " + timeTaken + " milliseconds.");  
    System.out.println("Time complexity: " + itrs); 
```

# c# - 在 Devexpress 的 LookupEdit 上显示多列

> ID：13753257
> 
> 赞同：2
> 
> 时间：2012-12-06T21:51:07.947
> 
> 标签：c#, winforms, devexpress

我有`DataSource`一个`LookUpEdit`. 例如，我有 2 列`FirstName`，`LastName`我想为`DisplayMember`这两列设置属性。我发现我应该`lookUp_CustomDisplayText()`像这样订阅和编辑显示文本属性：

```
private void lookUpCompanyPerson_CustomDisplayText(object sender, CustomDisplayTextEventArgs e)
{
     LookUpEdit edit = sender as LookUpEdit;

     if (e.DisplayText != "")
     {
           e.DisplayText = e.DisplayText + " " + (string)e.Value;          
     }            
} 
```

但我不明白是什么`e.Value`，我想为所选行显示另一列，而不是所选行的 valuemember。

这就是我将数据源绑定到lookupedit的方式：

```
 private void populateComboBoxForCompanyPerson()
 {
     lookUpCompanyPerson.Properties.ForceInitialize();
     bs = new BindingSource(myDataSet, "CompanyPerson");            
     lookUpCompanyPerson.Properties.DataSource = bs;
     lookUpCompanyPerson.Properties.DisplayMember = "CompanyName";
     lookUpCompanyPerson.Properties.ValueMember = "PersonID";
     this.lookUpCompanyPerson.Properties.Columns.Add(new LookUpColumnInfo("PersonID"));
     this.lookUpCompanyPerson.Properties.Columns["PersonID"].Visible = false;            
     this.lookUpCompanyPerson.Properties.Columns.Add(new LookUpColumnInfo("FirstName"));
     this.lookUpCompanyPerson.Properties.Columns.Add(new LookUpColumnInfo("LastName"));
     this.lookUpCompanyPerson.Properties.Columns.Add(new LookUpColumnInfo("CompanyName"));                
 } 
```

这就是我的数据源的样子：![数据源](../Images/ded6dfcad29fac6c6e1c9f3814bf032d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:32:59.810

我稍微更改了 Ian O'Brien 的代码，它可以工作：

```
private void lookUpCompanyPerson_CustomDisplayText(object sender, CustomDisplayTextEventArgs e)
{
      RepositoryItemLookUpEdit props;
      if (sender is LookUpEdit)
      props = (sender as LookUpEdit).Properties;
      else
      props = sender as RepositoryItemLookUpEdit;

      if (props != null && (e.Value is int))
      {
          DataRowView row = props.GetDataSourceRowByKeyValue(e.Value) as DataRowView;

          if (row != null)
          {
              e.DisplayText = String.Format("{0} {1}", row["FirstName"], row["LastName"]);

          }
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:10:45.190

来自 DevExpress 文档：

*   `e.Value`获取或设置编辑器的当前值。
*   `e.DisplayText`获取或设置编辑器的显示文本

> The lookup editor's value is obtained from the data source field specified by the RepositoryItemLookUpEditBase.ValueMember property. The GetDataSourceRowByKeyValue method searches for the specified value within this field and returns an object representing the first found record.
> 
> The GetDataSourceRowByKeyValue method's return value depends upon the type of the underlying data source. If the data source is a System.Data.DataTable or a System.Data.DataView, this method returns a System.Data.DataRowView object. If the data source is a custom list of items, the appropriate list item is returned.

You want to set the `e.Value` to the value that you want to display in the control.

```
private void lookUpCompanyPerson_CustomDisplayText(object sender, CustomDisplayTextEventArgs e)
{
    RepositoryItemLookUpEdit props
    if (sender is LookUpEdit)
        props = (sender as LookUpEdit).Properties;
    else
        props = sender as RepositoryItemLookUpEdit;
    if (props != null && (e.Value is int))
    {
        object row = props.GetDataSourceRowByKeyValue(e.Value);
        if (row != null)
        {
            e.Value = String.Format("{0} {1}", (DataRowView)row["FirstName"], (DataRowView)row["LastName"]);
            e.Handled = true;
        }
    }
} 
```

Finally, here are some useful pages with more documentation:

*   [BaseEdit.CustomDisplayText Event](http://documentation.devexpress.com/#windowsforms/DevExpressXtraEditorsBaseEdit_CustomDisplayTexttopic)
*   [RepositoryItemLookUpEdit.GetDataSourceRowByKeyValue Method](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemLookUpEdit_GetDataSourceRowByKeyValuetopic)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:49:43.883

我用过，就像这样；

```
cmb_tip.Properties.DataSource = _dt;
cmb_tip.Properties.ValueMember = "Value";
cmb_tip.Properties.DisplayMember = "Type";
cmb_tip.Properties.PopulateColumns();
cmb_tip.Properties.Columns["Value"].Visible = false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-03T11:05:58.087

这是它与版本 15.2.7 中的 LookupEditControl 和一个类的工作方式：

```
private void lookUpEditPatients_CustomDisplayText(object sender, DevExpress.XtraEditors.Controls.CustomDisplayTextEventArgs e)
    {
        var edit = sender as LookUpEdit;
        var props = edit.Properties;
        var pat = (Patients4ComboBoxVm) props?.GetDataSourceRowByKeyValue(e.Value);
        if (pat != null)
        {
            e.DisplayText = pat.Nachname + ", " + pat.Vorname + "; " + pat.Geburtsdatum + "; " + pat.Versicherungsnummer;
        }
    } 
```

# javascript - jQuery插件中存在检查功能

> ID：13753268
> 
> 赞同：1
> 
> 时间：2012-12-06T21:51:46.543
> 
> 标签：javascript, jquery

我正在为我正在处理的项目滚动我自己的 jQuery 表单验证器。我正在定义输入元素的数据验证所需的验证类型。

我想在调用它之前检查这个验证函数是否存在于我的插件中（全部在插件本身内）。

在我使用之前：

```
if($.isFunction(window['functionName']))
    window['functionName'](); 
```

但这似乎不适用于我的插件：

```
(function( $ ) {
    $.fn.validateForm = function(options) {

        ...

        findInputs();

        function validateRequired(input) {

        }

        function findInputs() {

            ...

            if($(this).attr("data-validate"))
            {
                // Get list of required validation functions
                var toValidate = $(this).attr("data-validate").split(/\s+/);

                for(var i = 0; i < toValidate.length; i++) {
                    // Hardcoded function name call for testing
                    if($.isFunction(window['validateRequired']))
                        window['validateRequired']();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:17:23.833

处理这个问题的最好方法是将你的函数声明为对象字面量的一部分。这样，您可以在插件中引用文字，如下所示：

```
(function( $ ) {
    var methods = {
        validateRequired: function(input)
        {
            // STUB
        }
    };

    $.fn.validateForm = function(options) {
        function findInputs() {

            if($.isFunction(methods['validateRequired'])) methods['validateRequired']();

        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:55:40.340

我不是 JS 专家，但试试这个：

```
if(typeof (someFunction) == 'function') {
// do something
} 
```

编辑

或者像这样，使用函数名作为字符串：

```
if(typeof this["functionName"] == "function") {
     this["functionName"](); //it exists, call it
 } 
```

我在这里找到了这个：

[javascript：如何判断一个函数名是否存在？](https://stackoverflow.com/questions/4313462/javascript-how-to-judge-a-function-name-exists)/见尼克克雷弗的回答。

通过这样的谷歌搜索：“函数名存在 javascript”

如果您正在搜索有关 jQuery 的内容 - 尝试使用 javascript 关键字而不是 jQuery 进行搜索。jQuery 是一个用 javascript 编写的框架。

# sql - 将 sqlmaint.exe 与 SQL Server 2008 R2 Express 一起使用时出错

> ID：13753272
> 
> 赞同：1
> 
> 时间：2012-12-06T21:51:54.373
> 
> 标签：sql, sql-server, sql-server-express, sql-server-2008r2-express

在我从 MSDE (SQL Server 2000) 迁移到 SQL Server 2008 R2 Express 之前，我使用以下语句来备份我的数据库：

```
C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\Binn>sqlmaint.exe 
    -S \"(local)\\SQLEXPRESS"\ 
    -D \"DB Name"\ 
    -BkUpDB \@"C:\Documents and Settings\emmug\Application Data\CalibrationSystem\Backup"\ 
    -BkUpMedia DISK 
```

但是现在，我收到了这个错误：

> *Microsoft (R) SQLMaint Utility (Unicode)，版本 10.0.1600.22
> 版权所有 (c) Microsoft Corporation。
> SQLDMO“应用程序”对象无法初始化（特定错误：找不到运行此应用程序所需的库文件之一。）*

所以我看到 SQL Server 2008 R2 不支持 SQLDMO，但我可以使用 Microsoft SQL Server 2005 向后兼容组件。不幸的是，这不起作用。

Microsoft 现在使用 SQL Server 管理对象 (SMO)，但没有提供任何代码示例来帮助我。

那么有人知道我的问题的解决方案吗？

谢谢

伊曼纽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:27:20.567

您可以使用 SQLCMD.exe，例如

> SQLCMD.exe -S "(local)\SQLEXPRESS" -Q"BACKUP DATABASE dbName TO DISK = 'C:\Documents and Settings\emmug\Application Data\CalibrationSystem\Backup\dbname.bak'"

# android - TextView 上的意外顶部和底部填充？

> ID：13753274
> 
> 赞同：4
> 
> 时间：2012-12-06T21:51:57.797
> 
> 标签：android

我有一个文本视图。我想设置它的背景颜色。但是颜色填充的顶部空间多于底部空间。

```
<!-- red background. -->
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="14sp"
    android:textStyle="bold"
    android:background="#f00"
    android:text="10.0" /> 
```

这是它的渲染方式（放大以演示，我添加的绿线）：

![在此处输入图像描述](../Images/5e3447b2426a4dbc380b2850fa3174a6.png)

所以顶部的额外空间使它看起来像文本没有在它自己的容器中居中。这是预期的吗？我希望文本在其自己的容器（红色区域）内垂直居中显示。

这是在一个galaxy nexus，jellybean的股票版本。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T21:57:52.473

添加以下属性：

```
android:includeFontPadding="false" 
```

# c# - 带有 c# 表达式的 XAMLX 工作流

> ID：13753276
> 
> 赞同：2
> 
> 时间：2012-12-06T21:51:57.830
> 
> 标签：c#, workflow-foundation-4, workflow-foundation

我正在 vs2012/.Net 4.5/WF 4.5 中开发一个自托管工作流，并且很难弄清楚以下消息

> 表达式活动类型“CSharpValue`1”需要编译才能运行。请确保已编译工作流。

当我调用由服务引用生成的活动时会发生此错误（当您添加 WCF 服务引用时，端点上的每个操作都会成为一个活动）。

在 MSDN 中环顾四周，我发现了这些文章：

*   [http://msdn.microsoft.com/en-us/library/ee358749.aspx](http://msdn.microsoft.com/en-us/library/ee358749.aspx)
*   [http://msdn.microsoft.com/en-us/library/29110be7-f4e3-407e-8dbe-78102eb21115#CodeWorkflows](http://msdn.microsoft.com/en-us/library/29110be7-f4e3-407e-8dbe-78102eb21115#CodeWorkflows)

他们说

> 当工作流服务托管在 IIS 或 WAS 中时，不需要额外的步骤，但如果 XAML 工作流服务是自托管的，则必须编译 C# 表达式

所以，我终于得到了我的问题：**我应该怎么做才能按 F5 并调试我的工作流程，让它在 IIS 上运行？并停止这个该死的例外......**

我尝试进入项目配置并设置为使用本地 IIS，如下所示：![iis配置](../Images/3a289d6b8816f68b2511abb396402d9c.png)

但由于我仍然收到错误，我认为它不起作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-10T02:43:57.760

老问题，但是在拼凑了一天的各种信息之后，我想我会分享一下，以防其他人遇到这个问题。

从 C# 表达式 MSDN 文档：

XAMLX 工作流服务支持 C# 表达式。**当工作流服务托管在 IIS 或 WAS 中时，不需要额外的步骤**，但如果 XAML 工作流服务是自托管的，则必须编译 C# 表达式。

在您添加自定义 WorkflowHostFactory 之前都是如此。在这种情况下，如果您重写了错误的方法，您的 C# 将不会被编译。以下代码不会编译 C# 表达式，您会感到害怕：

> 表达式活动类型“CSharpValue`1”需要编译才能运行。请确保已编译工作流。

或者，如果您不查看跟踪消息，则更有帮助：

> System.ServiceModel.FaultException：无法执行操作，因为 WorkflowInstance '5cfc33d1-b546-4ba8-a8ec-86d3cb16a68b' 已中止。

```
 public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses)
    {
        return base.CreateServiceHost(constructorString, baseAddresses);
    } 
```

您可以通过覆盖其他工厂方法，然后使用通过[Workflow Foundation 4.5 中的 MSDN C# Expressions](http://msdn.microsoft.com/en-us/library/jj591618%28v=vs.110%29.aspx)提供的代码编译您的活动来解决此问题：

```
 protected override WorkflowServiceHost CreateWorkflowServiceHost(WorkflowService service, Uri[] baseAddresses)
    {
        CompileExpressions(service.Body);
        return base.CreateWorkflowServiceHost(service, baseAddresses);
    } 
```

这是整个 WorkflowServiceHostFactory：

```
 public class MyWorkflowServiceHostFactory : WorkflowServiceHostFactory
{
    protected override WorkflowServiceHost CreateWorkflowServiceHost(WorkflowService service, Uri[] baseAddresses)
    {
        CompileExpressions(service.Body);
        return base.CreateWorkflowServiceHost(service, baseAddresses);
    }

    static void CompileExpressions(Activity activity)
    {
        // activityName is the Namespace.Type of the activity that contains the
        // C# expressions.
        string activityName = activity.GetType().ToString();

        // Split activityName into Namespace and Type.Append _CompiledExpressionRoot to the type name
        // to represent the new type that represents the compiled expressions.
        // Take everything after the last . for the type name.
        string activityType = activityName.Split('.').Last() + "_CompiledExpressionRoot";
        // Take everything before the last . for the namespace.
        string activityNamespace = string.Join(".", activityName.Split('.').Reverse().Skip(1).Reverse());

        // Create a TextExpressionCompilerSettings.
        TextExpressionCompilerSettings settings = new TextExpressionCompilerSettings
        {
            Activity = activity,
            Language = "C#",
            ActivityName = activityType,
            ActivityNamespace = activityNamespace,
            RootNamespace = null,
            GenerateAsPartialClass = false,
            AlwaysGenerateSource = true,
            ForImplementation = false
        };

        // Compile the C# expression.
        TextExpressionCompilerResults results =
            new TextExpressionCompiler(settings).Compile();

        // Any compilation errors are contained in the CompilerMessages.
        if (results.HasErrors)
        {
            throw new Exception("Compilation failed.");
        }

        // Create an instance of the new compiled expression type.
        ICompiledExpressionRoot compiledExpressionRoot =
            Activator.CreateInstance(results.ResultType,
                new object[] { activity }) as ICompiledExpressionRoot;

        // Attach it to the activity.
        CompiledExpressionInvoker.SetCompiledExpressionRoot(
            activity, compiledExpressionRoot);
    }       
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-10T12:56:38.640

尽管文章中提到了在 IIS/WAS 上运行的内容，但我仅在实施建议的结构时才设法运行工作流......这不是问题的答案......它更像是一种解决方法......

# python - 将具有三级分隔的字符串解析为字典

> ID：13753279
> 
> 赞同：1
> 
> 时间：2012-12-06T21:52:11.313
> 
> 标签：python, parsing, dictionary, delimited

[我已经找到了如何在其他地方](https://stackoverflow.com/a/186873/1418030)的字典中将分隔字符串拆分为键：值对，但是我有一个传入的字符串，其中还包含两个相当于字典本身的参数：其中包含一个或三个键：值对的参数：

```
clientid=b59694bf-c7c1-4a3a-8cd5-6dad69f4abb0&keyid=987654321&userdata=ip:192.168.10.10,deviceid:1234,optdata:75BCD15&md=AMT-Cam:avatar&playbackmode=st&ver=6&sessionid=&mk=PC&junketid=1342177342&version=6.7.8.9012 
```

显然，这些是用于混淆专有代码的虚拟参数，在这里。我想将所有这些转储到字典中，`userdata`并且`md`键的值本身就是字典：

```
requestdict {'clientid' : 'b59694bf-c7c1-4a3a-8cd5-6dad69f4abb0', 'keyid' : '987654321', 'userdata' : {'ip' : '192.168.10.10', 'deviceid' : '1234', 'optdata' : '75BCD15'}, 'md' : {'Cam' : 'avatar'}, 'playbackmode' : 'st', 'ver' : '6', 'sessionid' : '', 'mk' : 'PC', 'junketid' : '1342177342', 'version' : '6.7.8.9012'} 
```

我可以采用我发现的光滑的两级定界解析命令吗：

```
requestDict = dict(line.split('=') for line in clientRequest.split('&')) 
```

并添加第三级来处理和保存第二级字典？语法是什么？如果不是，我想我将不得不拆分`&`，然后检查并处理包含`:`但即使这样我也无法弄清楚语法的拆分。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:51:01.097

我基本上接受了[凯尔的回答](https://stackoverflow.com/a/13753604/881224)，并使它对未来更加友好：

```
def dictelem(input):   
    parts   = input.split('&')
    listing = [part.split('=') for part in parts]

    result = {}
    for entry in listing:
        head, tail = entry[0], ''.join(entry[1:])
        if ':' in tail:
            entries = tail.split(',')
            result.update({ head : dict(e.split(':') for e in entries) })
        else:
            result.update({head: tail})

    return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:57:40.913

> 我可以采用我发现的光滑的两级定界解析命令吗：

```
requestDict = dict(line.split('=') for line in clientRequest.split('&')) 
```

> 并添加第三级来处理和保存第二级字典？

当然可以，但是（a）您可能不想这样做，因为超过两个级别的嵌套理解往往会变得不可读，并且（b）这种超级简单的语法不适用于像您这样的情况，其中只有一些数据可以变成字典。

例如，应该发生`'PC'`什么？你想把它变成`{'PC': None}`? 或者也许是`set` `{'PC'}`？还是`list` `['PC']`？或者干脆别管它？您必须做出决定并为此编写逻辑，并且尝试将其编写为表达式将使您的决定很难阅读。

所以，让我们把这个逻辑放在一个单独的函数中：

```
def parseCommasAndColons(s):
    bits = [bit.split(':') for bit in s.split(',')]
    try:
        return dict(bits)
    except ValueError:
        return bits 
```

对于每个以逗号分隔的组件内部都有冒号的情况，这将返回一个`dict`like`{'ip': '192.168.10.10', 'deviceid': '1234', 'optdata': '75BCD15'}`或，但对于其中任何一个都没有的情况，则返回一个like 。`{'AMT-Cam': 'avatar'}``list``['1342177342']`

即使这样也可能有点太聪明了；我可能会更明确地检查“这是字典格式吗”，而不是仅仅尝试转换列表列表并查看会发生什么。

无论哪种方式，您如何将其放回您最初的理解中？

好吧，你想在`line.split('=')`. 所以让我们为此添加一个函数：

```
def parseCommasAndColonsForValue(keyvalue):
    if len(keyvalue) == 2:
        return keyvalue[0], parseCommasAndColons(keyvalue[1])
    else:
        return keyvalue

requestDict = dict(parseCommasAndColonsForValue(line.split('=')) 
                   for line in clientRequest.split('&')) 
```

最后一件事：除非您需要在旧版本的 Python 上运行，否则您不应该经常调用`dict`生成器表达式。如果它可以重写为字典推导式，那几乎肯定会更清晰，如果它不能改写为字典推导式，那么它可能一开始就不应该是一个单行表达式。

当然，将表达式分解为单独的表达式，将其中的一些变成语句甚至函数，并命名它们确实会使您的代码更长——但这并不一定意味着更糟。大约一半的 Python 之禅 ( `import this`) 致力于解释原因。或者来自 Guido 的一句话：“Python 是一种糟糕的编程语言，这是故意的。”

如果你真的想知道它会是什么样子，让我们把它分成两个步骤：

```
>>> {k: [bit2.split(':') for bit2 in v.split(',')] for k, v in (bit.split('=') for bit in s.split('&'))}
{'clientid': [['b59694bf-c7c1-4a3a-8cd5-6dad69f4abb0']],
 'junketid': [['1342177342']],
 'keyid': [['987654321']],
 'md': [['AMT-Cam', 'avatar']],
 'mk': [['PC']],
 'playbackmode': [['st']],
 'sessionid': [['']],
 'userdata': [['ip', '192.168.10.10'],
              ['deviceid', '1234'],
              ['optdata', '75BCD15']],
 'ver': [['6']],
 'version': [['6.7.8.9012']]} 
```

这说明了为什么您不能只添加`dict`对内部级别的调用——因为大多数这些东西实际上并不是字典，因为它们没有冒号。如果你改变了它，那么它就是这样的：

```
{k: dict(bit2.split(':') for bit2 in v.split(',')) for k, v in (bit.split('=') for bit in s.split('&'))} 
```

我认为这不是很可读，而且我怀疑大多数 Python 程序员会这样做。从现在开始 6 个月后阅读它并试图弄清楚我的意思比写它需要更多的努力。

并且尝试调试它不会很有趣。如果您在输入上运行它，但缺少冒号，会发生什么？`ValueError: dictionary update sequence element #0 has length 1; 2 is required`. 哪个序列？不知道。你必须一步一步地分解它，看看什么不起作用。这不好玩。

所以，希望这能说明你为什么不想这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:14:55.033

这是一个两班轮，可以做我认为你想要的：

```
dictelem = lambda x: x if ':' not in x[1] else [x[0],dict(y.split(':') for y in x[1].split(','))]
a = dict(dictelem(x.split('=')) for x in input.split('&')) 
```

# c# - 如何在我的项目中实现 WCF？

> ID：13753280
> 
> 赞同：2
> 
> 时间：2012-12-06T21:52:15.037
> 
> 标签：c#, .net, wcf, entity-framework

我有一个通过 EntityFramework 与 SQLExpress DB 通信的项目。现在我想在系统中添加一个 WCF 层。

这是我在第一个版本（无 WCF）中的一些代码：

```
MessageService.cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Newsletter.DAL;
using System.Data.Entity;
using System.Windows;
using System.Data.Objects.DataClasses;

namespace Newsletter.Services
{
    public class MessageService
    {
        private NewsletterEntities _context;
    public MessageService()
    {
        _context = new NewsletterEntities();
    }
    public Task AddMessageAsync(string subject,string content, bool hasAttachments, DateTime date, Sender sender, MailingList mailingList)
    {
        return Task.Factory.StartNew(() =>
            {
                Message newMessage = new Message();
                newMessage.Subject = subject;
                newMessage.Content = content;
                newMessage.HasAttachments = hasAttachments;
                newMessage.Date = date;
                newMessage.Sender = sender;
                newMessage.MailingList = mailingList;
                _context.Messages.AddObject(newMessage);
                _context.SaveChanges();
            });
    }

    public Task EditMessageAsync(int id, DateTime date, string content, MailingList mailingLists, Sender sender, string subject, bool hasAttachments)
    {
        return Task.Factory.StartNew(() =>
            {
                var messageToChange = (from m in _context.Messages where id == m.MessageID select m).FirstOrDefault();
                if (messageToChange != null)
                {
                    messageToChange.Date = date;
                    messageToChange.Content = content;
                    messageToChange.MailingList = mailingLists;
                    messageToChange.Sender = sender;
                    messageToChange.Subject = subject;
                    messageToChange.HasAttachments = hasAttachments;
                    _context.SaveChanges();
                }
            });
    }

    public Task<List<Message>> GetAllMessagesAsync()
    {
        return Task.Factory.StartNew(() => _context.Messages.ToList());
    }

    public Task<List<MailingList>> GetAllMailingListsAsync()
    {
        return Task.Factory.StartNew(() => _context.MailingLists.ToList());
    }

    public Task<List<Sender>> GetAllSendersAsync()
    {
        return Task.Factory.StartNew(() => _context.Senders.ToList());
    }

    public Task DeleteMessageAsync(Message message)
    {
        return Task.Factory.StartNew(() =>
            {
                MailingList mailinglist = message.MailingList;
                mailinglist.Message.Remove(message);

                _context.Messages.DeleteObject(message);
                _context.SaveChanges();
            });
    }
}
} 
```

我想从一些简单的事情开始，以检查我是否知道大体上发生了什么。我创建了 WCF 服务库项目。我有`IMessageService.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using Newsletter.Common;

namespace WcfServiceLibrary
{
    [ServiceContract]
    public interface IMessageService
    {
        [OperationContract]
        void DeleteMessage(MessageDTO message);
    }
} 
```

和`MessageService.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using Newsletter.Common;
using Newsletter.DAL;
using System.Data.Entity;
using System.Data.Objects.DataClasses;

namespace WcfServiceLibrary
{
    public class MessageService : IMessageService
    {
        private NewsletterEntities _context;

        public MessageService()
        {
            _context = new NewsletterEntities();
        }

        public void DeleteMessage(MessageDTO messageDTO)
        {
            MailingList mailinglist = (from m in _context.MailingLists where m.MailingListID == messageDTO.MailingListID select m).FirstOrDefault();
            Message message = (from m in _context.Messages where m.MessageID == messageDTO.MessageID select m).FirstOrDefault();
            mailinglist.Message.Remove(message);

            _context.Messages.DeleteObject(message);
            _context.SaveChanges();
        }
    }
} 
```

最后`MessageDTO.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Newsletter.Common
{
    public class MessageDTO
    {
        public int MessageID { get; set; }
        public String Subject { get; set; }
        public String Content { get; set; }
        public bool HasAttachments { get; set; }
        public DateTime Date { get; set; }
        public int SenderID { get; set; }
        public int MailingListID { get; set; }
    }
} 
```

我将其标记为启动项目并使用 WCF 测试客户端进行了试用。`DeleteMessage()`我用一些对象调用该方法，`MessageID = 1`并且`MailingList = 5`- 这些是我的数据库中特定记录的值。这就是我收到错误的关键点 - 来自 DAL 的未处理异常：

`The specified named connection is either not found in the configuration, not intended to be used with the EntityClient provider, or not valid.`并在停止调试器后：

```
An error occurred while receiving the HTTP response to http://localhost:8733/WcfServiceLibrary/MessageService/. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.

Server stack trace:     at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)    at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)    at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)    at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)    at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)    at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)    at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:     at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)    at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)    at IMessageService.DeleteMessage(MessageDTO message)    at MessageServiceClient.DeleteMessage(MessageDTO message)

Inner Exception: The underlying connection was closed: An unexpected error occurred on a receive.    at System.Net.HttpWebRequest.GetResponse()    at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

Inner Exception: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.    at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)    at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)    at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)

Inner Exception: An existing connection was forcibly closed by the remote host    at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)    at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

`App.config`WCF:

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="WcfServiceLibrary.MessageService">
        <endpoint address="" binding="basicHttpBinding" contract="WcfServiceLibrary.IMessageService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/MessageService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

我究竟做错了什么？一般方法可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:11:15.953

你的主要错误是

> 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。

您需要在配置文件中指定正确的连接字符串。

另一个错误是第一个错误的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:59:59.567

线索在错误消息中。您需要在配置文件中有一个连接字符串条目，以便 ef 知道从哪里获取其上下文

# fireworks - 为什么复制/粘贴将 x 和 y 置于负值？

> ID：13753281
> 
> 赞同：0
> 
> 时间：2012-12-06T21:52:15.683
> 
> 标签：fireworks

我经常截屏并将其粘贴到 Fireworks 中。我总是必须将 x 和 y 值更改为 0，因为它们总是负数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:49:09.753

如果图像大于我的窗口，我发现会发生这种情况。如果您确保已缩小直到可以首先看到整个画布，则该项目应粘贴到正确的位置。

# ruby-on-rails - 在使用inherited_resource rails 创建评论时设置当前用户

> ID：13753283
> 
> 赞同：2
> 
> 时间：2012-12-06T21:52:20.093
> 
> 标签：ruby-on-rails, nested-resources, inherited-resources

我在我的评论控制器中使用 Rails Inherited_resource gem，评论是一个嵌套资源，所以：
资源：项目做
  资源：评论做
结束

我在评论控制器中也有一个 belongs_to：
belongs_to :project, :finder => :find_by_project_uuid!, :class_name => "Thfz::Project", :polymorphic => true

1.  如何在创建评论时将评论的用户关联设置为 current_user(user_id)？因为 user_id 不应该被大量分配。

2.  我尝试了以下操作：
    def begin_of_association_chain
         current_user
    end
    这确实正确设置了用户 ID，但我无法让嵌套资源为 Project 工作。

3.  销毁评论时也会出现同样的问题，我需要通过current_user找到评论，那么如何实现呢？

那么我必须编写自己的创建和销毁操作吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:56:21.993

您是否在 comments_controller 中尝试过以下操作？

```
class CommentsController < InheritedResources::Base
  before_filter :authenticate_user! # Assuming you are using Devise for authentication
  respond_to :html, :xml, :json

  belongs_to :project, :finder => :find_by_project_uuid!, :class_name => "Thfz::Project"

  def create
    @comment = build_resource
    @comment.author = current_user

    create!
  end
end 
```

# java - JSP 限制文件打开对话框的目录

> ID：13753286
> 
> 赞同：0
> 
> 时间：2012-12-06T21:52:29.097
> 
> 标签：java, html, jsp

我目前正在使用语言 JSP 编写程序。我想知道您是否/如何限制文件打开对话框可以浏览的目录，例如：默认目录在`C:/userFiles/username/` 我希望用户能够浏览该目录中的文件`/username/`或该目录中的目录，但不是任何上面的目录如`C:/`, 或`C:/userFiles`. 我做了一些研究，但我无法找到答案。这对 JSP、HTML 或 Java 是否可行，如果可以，我将如何做？我更喜欢 JSP 或 HTML。

附加信息：对话框将浏览远程服务器上的文件，而不是用户计算机上的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:15:49.807

“文件打开”对话框位于**客户端计算机**上，并且是操作系统的一部分。你不能改变它的行为。

为了列出服务器上的文件，**您不会使用 File Open dialog**，而是将文件列表转换为 HTML 并将其提供给浏览器。由于您是编写服务器端代码的人，因此您已经是首先控制哪些文件进入该列表的人。

说您更喜欢“JSP 或 HTML”是一个很好的指标，表明您没有完全理解 Web 的客户端-服务器关系。

# r - 某些类型数据的有效箱线图（或其变体）

> ID：13753287
> 
> 赞同：1
> 
> 时间：2012-12-06T21:52:30.543
> 
> 标签：r, boxplot

我运行了一堆模拟来评估 I 类错误，所以结果是一个向量，例如

`pdata = c(0,0,0,0,0,0,0,0,0,0.07,0,0.02,0.03)`

模拟向量的平均值应为 0.05。现在我正在考虑一种通过箱线图显示结果的方法。R中的默认函数

`boxplot(pdata)`

给出一个很难看到典型值的箱线图，因为有很多 0。此外，它显示了中位数，但我真正想要的是要在图上显示的平均值。在这种情况下是否有任何有效的图形显示？我知道我可以简单地报告数值，但是因为我的模拟涉及我希望比较的其他因素，所以类似箱线图的图表将是理想的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:17:57.873

可能是这样的：

```
 plot(table(pdata)) 
```

![在此处输入图像描述](../Images/1b0c26d3af5b9c9702142d115863f049.png)

这里有一个 ggplot2 版本：

```
 ggplot(as.data.frame(table(pdata)),aes(x=pdata,y=Freq))+geom_bar() 
```

![在此处输入图像描述](../Images/cbe0dc474695f5d66ecd4021e0992cb9.png)

# c# - 对集合进行排序时调用 CompareTo 方法多少次？

> ID：13753289
> 
> 赞同：1
> 
> 时间：2012-12-06T21:52:55.777
> 
> 标签：c#, .net, sorting, collections, icomparable

如果实现了一个类型`IComparable<T>`，并且您有一个包含 100 个元素的此类型的集合。当您在此集合上调用 Sort 方法时，该`CompareTo`方法将被调用多少次以及如何调用？会以这种方式使用吗？

```
CompareTo(item0, item1);
CompareTo(item1, item2);
CompareTo(item2, item3);
CompareTo(item3, item4);
...
CompareTo(item97, item98);
CompareTo(item98, item99); 
```

编辑：基本上我要做的是将这种排序方式转变为基于值的排序，在其中我为每个项目分配一些值，然后对它们进行排序。很难解释，但我无法使用基于 -1,0,1 的排序函数来解决这个问题。但我只有一个 CompareTo 函数，我需要用它来对项目进行排序。所以我需要为每个项目生成一些值，然后程序会从最小值到最大值进行排序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T21:56:08.013

好吧，您不能 100% 确定（使用大多数排序算法），因为它取决于数据。例如，某些排序算法只会对已经排序的数据执行 N（N 是集合的大小）比较，但如果不是，则需要更多。

常用的排序算法，如MergeSort、QuickSort、HeapSort都是O(n*log(n))，也就是说比较的次数会是item数乘以log base的顺序。项目数。（这些算法的对数基数将为 2。）虽然这并不准确，但它会随着这种关系而扩展。

如果您对特定排序操作调用它的次数感兴趣，您可以使用以下内容：

```
public class LoggingComparer<T> : IComparer<T>
{
    private IComparer<T> otherComparer;
    public LoggingComparer(IComparer<T> otherComparer)
    {
        this.otherComparer = otherComparer;
    }

    public int Count { get; private set; }

    public int Compare(T x, T y)
    {
        Count++;
        return otherComparer.Compare(x, y);
    }
} 
```

它将包装另一个比较器，但也会计算比较调用的数量。这是一个示例用法：

```
var list = new List<int>() { 5, 4, 1, 2, 3, 8, 7, 9, 0 };

LoggingComparer<int> comparer = new LoggingComparer<int>(Comparer<int>.Default);
list.Sort(comparer);
Console.WriteLine(comparer.Count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:57:25.240

小猪支持Servy的回答。无论排序算法的比较操作的渐近复杂度是多少，这就是可能对 CompareTo() 进行多少次调用。请注意，这通常是一种增长模式，而不是确切的操作数量。

# itunes-store - 免费向特定用户提供应用内购买

> ID：13753294
> 
> 赞同：1
> 
> 时间：2012-12-06T21:53:27.907
> 
> 标签：itunes-store

我在 iTunes 商店中有一个具有完整功能的应用程序。我试图发布一个包含一半功能的免费版本，如果用户尝试使用其他功能，则包含指向完整版本的链接。

苹果拒绝了这个应用程序，理由是我应该免费发布主应用程序，并拥有可以通过应用内购买解锁的额外功能，而不是拥有两个应用程序。

没关系; 我可以做这个。唯一的问题是，自从我最初发布完整版以来，已经有人付费下载了完整版。当我更新此应用程序使其免费时，默认情况下它将受到限制。那些为完整版付费的用户将失去他们已经付费的功能。

我真的不想发布应用程序的第二个版本，因为我打算继续更新应用程序并且管理两个发布流会很笨拙。

当我将应用程序更新到新的（免费的，应用程序内支持的）版本时，是否有可能以某种方式免费向那些已经购买了我的应用程序完整版本的用户提供应用程序内购买？

**编辑**：（非首选）替代方案是将购买退还给原始买家的一种方式，并附上解释原因的说明。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:23:13.417

我要做的是在应用程序本身中添加一个已经付费的选项，然后允许用户输入许可证代码或电子邮件地址，具体取决于您的喜好，如果您有他们的联系方式或询问他们，您可以自动从他们的联系方式中发出如果您不这样做，请与您联系，大多数人会因为他们已经付款而与您联系。

现在，就这些代码的许可和验证而言，您可以设置一个便宜的 VPS 来验证代码并且仅使用您在服务器上输入的代码激活，这意味着您不会成为 Keygeners 的受害者。

只是我的2美分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:24:20.113

如果您的应用当前没有用户名/密码注册，我建议发布付费应用的更新，在初始弹出视图中向您的用户解释如下内容：

> 感谢您支持我们的应用程序。由于 Apple 政策的变化，我们将把这个应用程序转换为一个免费的应用程序，并进行应用程序内升级。由于您已经购买了完整的应用程序，您将获得所有功能！请输入 [email_address*或*username]，以便我们提供无痛的过渡。

如果您的应用程序已经存在用户登录机制（用户名/密码），那么只需存储这些详细信息并让用户稍后在“免费”应用程序中登录以解锁所有功能。

显然，这两个建议都需要一个后端进行验证，但创建它应该不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:50:46.520

由于许可协议的第 3.3.3 节和附件 2，这很棘手。我不是律师，所以我会保留我的解释，但请阅读它们。

另一种选择是使免费版本成为一个新的、不同的应用程序，并将原始版本留在商店中但不可用。然后您仍然可以发布更新，但新用户将看不到它。考虑到您仍然只向新用户展示一个应用程序，Apple 可能会允许这样做。缺点是（1）你必须维护两个版本，（2）你必须在评论等方面重新开始。

# java - 我是来自 javascript 背景的 java 新手：他们如何正确管理事件侦听器而不是将类紧密结合在一起？

> ID：13753300
> 
> 赞同：0
> 
> 时间：2012-12-06T21:53:45.150
> 
> 标签：java, events

我一直在尝试在 java 中做一些“简单的事情”，在 javascript 中看起来像：

```
// Main class
var model = new Model();
this.callback = function(e){/* do something */}
model.addListener("change", callback); 
```

那么在java中我到目前为止发现的是从java.util.Observer派生的Main类和从java.util.Observable派生的Model；然后，当模型将调度事件时，它将调用 Main 类的 update 方法。我发现真的很丑，一点也不优雅。我什至想不出我该如何处理它；

有没有更清洁和灵活的方法，也许有一些库可以帮助我，因为我还没有找到任何可以接受的关于如何做到这一点的教程？

多谢

好吧，到目前为止我所管理的，我非常喜欢它，而不仅仅是为简单的事件创建“空”类（但仍然不好，至少对我来说）：

```
private ArrayList __items;
public void addListener(Method method, Object object){
    this.__listeners.add(new Object[] {method, object});
}

public void dispatch(){
    int i = this.__listeners.size();
    Method method;
    Object context;
    while(i>0){
        i--;
        method = (Method)(this.__listeners.get(i))[0];
        context = (Object)(this.__listeners.get(i))[1];
        try{
            method.invoke(context);
        }catch(java.lang.reflect.InvocationTargetException e){

        }catch(java.lang.IllegalAccessException e){

        }
    }
} 
```

然后我这样使用：

```
Gifts gifts = prendastotty.PrendasTotty.getMain().getLoggedUserGifts();
Class[] parameterTypes = new Class[0];
try{
    Method m = Home.class.getMethod("__updateTable", parameterTypes);
    gifts.addListener(m, this);
}catch(NoSuchMethodException e){

} 
```

这是泄漏/反模式/错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:19:46.377

我必须说我在跟上您的代码时遇到了一些麻烦，因为在我的脑海中有些东西没有意义（从 Java 的思维方式，或者至少是*我的*Java 思维方式）。所以我希望我能正确理解你并能帮助你。

让我们首先以您的简单示例为例：

```
var model = new Model();
this.callback = function(e){/* do something */}
model.addListener("change", callback); 
```

例如，在 Java 中，一个好的方法是：

```
public interface ModelListener {
   public void execute(Model context);
}

public class Model { 
    private List<ModelListener> listeners;

    public Model() {
      this.listeners = new ArrayList<ModelListener>();
    }

    public void addListener(ModelListener listener) {
      this.listeners.add(listener);
    }

    public void dispatch() {
      for (ModelListener listener: listeners) {
        listener.execute(this);
      }
    } 
```

}

通过这种设计，您现在可以做以下两件事之一：

## 使用匿名类

在 Java 中，最常见的情况是您的所有类都有一个名称，尽管在某些情况下您可以创建匿名类，但这些基本上是内联实现的类。由于它们是内联实现的，因此它们通常仅在它们很小并且已知它们不能重复使用时使用。

例子：

```
Model model = new Model();
model.add(new ModelListener() {
     public void execute(Model model) { /* do something here */ }
}); 
```

请注意新`ModelListener`对象是如何创建的（它是一个接口）以及`execute`内联提供的实现。那是匿名类。

## 接口实现

您可以创建实现您的接口的类并使用它们而不是匿名类。当您希望侦听器可重用、具有赋予代码语义意义的名称和/或它们的逻辑不仅仅是几行代码时，通常会使用这种方法。

例子：

```
public class LogListener implements ModelListener {

 public void execute(Model model) {
   // Do my logging here
 }
}

Model model = new Model();  
model.addListener(new LogListener()); 
```

*边注*

As a side note, I saw that the method you were trying to bind as a listener was called `__updateTable` are you by any chance trying to detect object's changes so you can commit them to the database? If so I strongly suggest you to look at some [ORM](http://en.wikipedia.org/wiki/Object-relational_mapping) frameworks such as [Hibernate](http://www.hibernate.org/) or [JPA](http://www.oracle.com/technetwork/articles/javaee/jpa-137156.html) they'll keep all that hassle from you, keeping track of changes and committing them to the database.

Hope it helps, regards from a fellow portuguese StackOverflow user ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:01:57.467

您会发现尝试将 javascript 意识形态直接映射到 java 有点困难。他们的基本哲学是不同的。没有更明确的代码和期望，很难给你一个更清晰的答案。这是`GWT`（编写`java`）中的代码示例，它将单击处理程序附加到按钮。

希望这可以帮助您入门。

```
 myButton.addSelectionListener(new SelectionListener<ComponentEvent>(){
                @Override
                public void componentSelected(ComponentEvent ce) {
                    // do your processing here                          

                }

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:52:11.857

在 Java 中，函数不能像在 Javascript 中那样存在于类之外。因此，当您需要在运行时提供函数实现时，不幸的是，您必须将该函数包装在一个类中并传递该类的一个实例。

您使用反射的解决方案将起作用（我假设），但它不是在 Java 中执行此操作的首选方法，因为过去的编译时错误现在将成为运行时错误。

# sql-server-2008 - 使用返回布尔值的多个“With”语句创建 SQL 函数

> ID：13753305
> 
> 赞同：0
> 
> 时间：2012-12-06T21:54:11.147
> 
> 标签：sql-server-2008, tsql

我正在尝试创建一个包含多个“With”语句的函数。

我原来的查询是：

```
WITH EmpCount as 
  (
    SELECT job.EmployeeID, assign.PropertyID FROM EmployeeJobstatus job 
    JOIN Assignment assign ON job.JobID = assign.ID  GROUP by job.EmployeeID,
    assign.PropertyID
  ),
    NoDup as 
  (
    SELECT EmployeeID, Count(employeeID) as NO from EmpCount 
    Group by EmployeeID HAVING count(Employeeid) > 1
  )

    SELECT prop.Name, job.EmployeeID, Emp.EmpID, Emp.Name 
    from EmployeeJobStatus job
    JOIN Assignment assign ON assign.id = job.jobid
    JOIN Property prop ON prop.ID = assign.PropertyID
    JOIN Employee emp on emp.ID = job.EmployeeID
    WHERE EmployeeID IN (SELECT EmployeeID from NoDup)
    GROUP By prop.Name, EmployeeID, emp.EmpID,Emp.Name
    Order BY EmployeeID 
```

这将返回：

```
Name           EmployeeID   EmpID         Name
Property 1      23         1286333      LastNameRemoved1, Rachel A
Property 2      23         1286333      LastNameRemoved1, Rachel A
Property 2      76         1268329      LastNameRemoved2, Tamer A
Property 1      76         1268329      LastNameRemoved2, Tamer A
Property 3      135        1411933      LastNameRemoved3, Sarah E
Property 1      135        1411933      LastNameRemoved2, Sarah E 
```

我的函数需要使用 EmployeeJobStatus StartDate 和 EndDate 中的字段，根据它们是否是交叉属性来返回“Y”或“N”。

我才刚刚开始我的功能，因为我不知道下一步该做什么。

```
CREATE function dbo.IsEmployeeCrossPropertyOnDate
 (@EmpID int, @AsOfDate datetime) 
  RETURNS INT AS 
```

任何帮助，或朝着正确方向轻推将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:53:59.350

这个怎么样...

```
CREATE FUNCTION dbo.IsEmployeeCrossPropertyOnDate
    (
        @empid int
        , @asofdate datetime
    )
RETURNS TABLE
AS
RETURN
    SELECT
        CASE MIN(a.propertyid)
            WHEN MAX(a.propertyid)
                THEN 'N'
            ELSE 'Y'
        END CrossProp
    FROM 
        EmployeeJobStatus j
    JOIN 
        Assignment a
        ON a.id = j.jobid
    WHERE 
        j.employee = @empid
        AND j.startdate <= @AsOfDate
        AND j.endDate > @AsOfDate
    GROUP BY 
        j.employeeid; 
```

编辑：

您可能会在外部应用它，而不是交叉。Nulls 将是当时没有任务的员工。

编辑2：

既然你问了，下面是一个标量函数。请注意标量。根据您在查询中使用它的位置，BEGIN END 块可以欺骗优化器进入 RBAR。

```
CREATE FUNCTION dbo.IsEmployeeCrossPropertyOnDate
    (
        @empid int
        , @asofdate datetime
    )
RETURNS CHAR(1)
AS
BEGIN
    DECLARE @res CHAR(1) = 'N';

    SELECT @res = 
        CASE MIN(a.propertyid)
            WHEN MAX(a.propertyid)
                THEN 'N'
            ELSE 'Y'
        END 
    FROM 
        EmployeeJobStatus j
    JOIN 
        Assignment a
        ON a.id = j.jobid
    WHERE 
        j.employee = @empid
        AND j.startdate <= @AsOfDate
        AND j.endDate > @AsOfDate
    GROUP BY 
        j.employeeid;

    RETURN @res;
END; 
```

# javascript - Javascript 覆盖原型方法

> ID：13753306
> 
> 赞同：0
> 
> 时间：2012-12-06T21:54:16.643
> 
> 标签：javascript, inheritance, prototype

也许有人可以向我解释，为什么我不能从 B 的原型类中重写方法 moep。我找到了一个示例（http://stackoverflow.com/questions/11148960/javascript-prototype-method-override-not-found），如果我用 B.prototype = ... 覆盖该函数，它可以工作。那么为什么我必须指定 .prototype 来覆盖函数呢？

问候 - 托马斯

```
A = function() {
    this.moep = function() { 
        alert("Im in class A!");  
    };
};

B = function() {
};

B.prototype = new A();
B.moep = function() { 
    alert("Im outside!");  
};

var keks = new B();
keks.moep(); // Alerts "Im in class A" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:56:03.753

您分配给`B.moep`, not `B.prototype.moep`or (within `B`) `this.moep`。`B.moep`根本不参与原型链。

当您通过 创建对象时`new <functionname>`，对象的原型是从 设置的`<functionname>.prototype`。所以如果你想将`moep`assigned by覆盖到由创建并分配给`A`的实例，你需要分配给。`new A``B.prototype``B.prototype`

# android - Android 中 simple_list_item_1 布局中的 TextView ID 是什么？

> ID：13753308
> 
> 赞同：16
> 
> 时间：2012-12-06T21:54:27.287
> 
> 标签：android

我有一个使用多种布局类型的自定义 ListView 适配器。一种是这里的内置类型：

```
v = inflater.inflate(android.R.layout.simple_list_item_1, null); 
```

如何访问该布局上的 TextView？身份证是什么？

```
TextView txt1 = (TextView) v.findViewById(***WHAT IS THE ID***);
txt1.setText("foo"); 
```

如果您知道 ID，您是如何找到它的？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-06T21:57:06.857

这是`@android:id/text1`

所以你需要像这样修改你的代码

```
TextView txt1 = (TextView) v.findViewById(android.R.id.text1); 
```

在这里找到[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/simple_list_item_1.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/simple_list_item_1.xml)

源代码是你最好的朋友！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:58:59.200

您可以通过查看 SDK 中的布局文件找到 ID。

在这种情况下，文件位于 中`<SDK DIR>/platforms/<PLATFORM VERSION>/data/res/layout/simple_list_item_1.xml`，这将显示所需的 ID 为`android.R.id.text1`。

# typescript - 将js文件加载到打字稿文件中

> ID：13753311
> 
> 赞同：12
> 
> 时间：2012-12-06T21:54:41.280
> 
> 标签：typescript

我有一个简单的 TypeScript (ts)，它需要 JavaScript 文件中的函数。如何将该 js 文件导入 ts 文件？我是否必须为该 js 文件创建一个 ts 文件才能在我的 ts 文件中使用它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T22:05:12.297

最简单的方法是只`declare`使用您正在使用的功能：

**文件1.js**

```
function greet() { return "Hello!"; } 
```

**文件2.ts**

```
declare function greet(): string;

/* ... later ... */
var hi = greet(); 
```

* * *

如果您的场景更复杂（即多个文件引用 File1.js，或者 File1.js 中有许多函数会使 File2.ts 混乱），您可以创建一个 File1.d.ts 文件并从 File2.ts 引用该文件：

**文件 1.d.ts**

```
function greet(): string; 
```

**文件2.ts**

```
/// <reference path="File1.d.ts" />

/* ... later ... */
var hi = greet(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:11:22.823

仅针对存档，如果您在 TS 文件中为 JavaScript 文件添加 /// 引用，编译器将尝试验证 JS 文件中的所有代码并抛出一个巨大的错误列表。用 jQuery 或类似的东西试试，你会明白我的意思。

# f# - f# 产生的警告：值已被复制以确保原始值未发生变异

> ID：13753312
> 
> 赞同：12
> 
> 时间：2012-12-06T21:54:45.300
> 
> 标签：f#

下面的第一个定义在使用 f# 3.0 编译并将警告级别设置为 5 时在标题中产生警告。第二个定义编译干净。我想知道是否有人可以解释一下编译器担心我可能会意外变异的原因，或者如何用 let 子句拆分表达式有助于避免这种情况。非常感谢。

```
let ticks_with_warning () : int64 =
   System.DateTime.Now.Ticks 

let ticks_clean () : int64 =
   let t = System.DateTime.Now
   t.Ticks 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T22:55:24.270

我无法真正解释为什么编译器会在您的特定情况下发出此警告-我同意@ildjarn 的观点，您可以放心地忽略它，因为编译器可能只是过于谨慎了。

但是，我可以给你一个例子，警告实际上可能会给你一个有用的提示，表明某些事情可能不会像你期望的那样进行。如果我们有一个像这样的可变对象`struct`：

```
[<Struct>]
type Test =
  val mutable ticks : int64
  member x.Inc() = x.ticks <- x.ticks + 1L
  new (init) = { ticks = init } 
```

现在，该`Inc`方法改变了结构（您也可以访问可变字段`ticks`）。我们可以尝试编写一个创建`Test`值并对其进行变异的函数：

```
let foo () =
  let t = Test(1L)
  t.Inc()  // Warning: The value has been copied to ensure the original is not mutated
  t 
```

我们没有将本地值标记`t`为`mutable`，因此编译器会尝试确保在我们调用 时该值不会发生变化`Inc`。它不知道是否`Inc`改变值，所以唯一安全的事情是创建一个副本 - 从而`foo`返回值`Test(1L)`。

如果我们标记`t`为`mutable`，那么编译器不必担心由于调用而改变它，因此它不会给出警告（并且函数返回`Test(2L)`）：

```
let foo () =
  let mutable t = Test(1L)
  t.Inc()
  t 
```

不过，我不确定是什么导致了您的示例中的警告。也许编译器认为（作为一些中间表示的结果）该`Ticks`操作可能会改变左侧的值（`System.DateTime.Now`和`t`分别）并且它希望防止这种情况发生。

奇怪的是，如果您在 F# 中编写自己的`DateTime`结构，则在这两种情况下都会收到警告，除非您将变量标记`t`为`mutable`（这是我所期望的），但标准的行为`DateTime`是不同的。所以也许编译器知道我缺少的标准类型......

# matlab - 有没有 Matlab 支持的价格实惠的入门级 FPGA 开发板？

> ID：13753315
> 
> 赞同：1
> 
> 时间：2012-12-06T21:54:53.090
> 
> 标签：matlab, development-environment, fpga

我只是想知道这是否可能？我找到了这个板：

[http://www.altera.com/products/devkits/altera/kit-cyc2-2C20N.html](http://www.altera.com/products/devkits/altera/kit-cyc2-2C20N.html)

没有提到 Matlab 支持。不管怎样，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T03:56:29.970

与 Matlab 的接口不是特定于 FPGA 板，而是 FPGA 设计工具（综合和布局布线）。两家主要的 FPGA 供应商 - Xilinx 和 Altera - 都支持 Matlab。Xilinx 在其[System Generator](http://www.mathworks.com/fpga-design/simulink-with-xilinx-system-generator-for-dsp.html)中，Altera 在其[DSP Builder](http://www.altera.com/products/ip/altera/t-alt-matlab.html)中。设计流程大致如下：

1.  考虑到您所针对的 FPGA 工具和 FPGA 设备的限制，您编写您的 Matlab 代码。例如，FPGA 设备的内存量有限，从几 KByte 到几 MByte，具体取决于设备。

2.  你编译你的 Matlab 代码。在引擎盖下，代码将被转换为硬件描述语言。

3.  FPGA 工具将合成、布局和路由代码并生成比特流

4.  您将比特流编程到您的 FPGA 中。

# function - 在 postgresql 中创建触发器和函数

> ID：13753320
> 
> 赞同：2
> 
> 时间：2012-12-06T21:55:20.740
> 
> 标签：function, postgresql, stored-procedures, triggers

我如何创建`trigger function`之前`adding/updating`，`function`应该检查具有相同属性的记录`id`（即与具有相同属性的`id`现有记录进行比较）如果找到具有 id 的记录，则将该条目设置为，然后添加包含在该记录中找到的属性的相应值的条目（为新记录设置的属性除外），当为空时，新时间等于当前时刻的那个时间。因此，一个新的记录就像祖先一样。如果找到具有该 id 的记录，则将其添加到数据库中，并建立为当前时间。`objects``temporary_object``time_dead``time_dead``time_create``time_create``time_dead's``time_create`

例如这里是一个简单的解释（仅用于解释目的）

```
id time_create   time-dead  student  amount

 1  06.12           07.12    henry   500

 1  07.12                    henry   1000 
```

因此，如果一个名为 henry 且 ID 为 1 的学生在 06.12 进入一个房间，并在下次他再次进入另一个房间时于 07.12 离开时，time_dead 将等于 time_create（因此旧条目的 time_dead 和新条目的 time_create - 将相等）这些是我下面的表格是 sql 格式

```
CREATE TABLE temporary_object
(
  id integer NOT NULL,
  time_create timestamp without time zone NOT NULL,
  time_dead timestamp without time zone,
  CONSTRAINT temporary_object_pkey PRIMARY KEY (id, time_create)
)

CREATE TABLE persons
(
  fname text,
  fsurname text,
)
INHERITS (temporary_object)

CREATE TABLE rooms
(
  roomnum integer,
  course integer,
  passport text,
  students_number text
)
INHERITS (temporary_object) 
```

这就是我想要做的，但恐怕我不知道如何完成它，但我 100% 不对可能会有所帮助

```
CREATE TRIGGER trigger2
 BEFORE INSERT OR UPDATE
 ON persons
 FOR EACH ROW
 EXECUTE PROCEDURE func1(); 
```

这就是功能

```
 CREATE OR REPLACE FUNCTION func1() RETURNS TRIGGER AS $persons$
 DECLARE
        time_create          integer;
        time_dead     timestamp;
        id       timestamp;
    BEGIN

 IF (TG_OP = 'INSERT') THEN

            time_create= 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:12:52.343

我不能告诉你我从你的问题中遗漏了什么，但我试着回答我认为我理解的内容。

行级触发器可以访问受`NEW`和`OLD`变量影响的行的版本（取决于`TG_OP`）。在这种情况下，您可以使用`NEW`：

```
CREATE OR REPLACE FUNCTION func1() 
RETURNS TRIGGER AS 
$persons$
DECLARE
    i integer;
BEGIN
    IF TG_OP = 'INSERT'
    THEN
        UPDATE persons 
        SET time_dead = NEW.time_create
        WHERE 
            id = NEW.id -- we are looking for the same ID
            AND time_dead IS NULL
        ;
    ELSE -- UPDATE
        -- do here something
    END IF;
END;
$persons$
LANGUAGE plpgsql; 
```

这只是一个初学者，根据您的需要进行修改。

# c++ - 连续上传数据

> ID：13753323
> 
> 赞同：0
> 
> 时间：2012-12-06T21:55:23.227
> 
> 标签：c++, mfc

我有一个基于 MFC 对话框的应用程序，它可以跟踪数据并显示它。缓冲区充满数据点并实时或快速绘制图表。目前，这发生在应用层。一个 DLL 或库如何能够不断地填充数据并更新到应用层中的图形框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:05:00.287

对话框应用程序可以创建一个计时器并使用 OnTimer 处理程序定期调用 DLL/库函数来检索任何新数据。或者对话框应用程序可以将自己注册到 DLL，以便 DLL 知道如何发布 Windows 消息或在对话框应用程序中调用回调函数，以通知对话框新数据可用。

让 DLL 通知应用程序的选项假定您可以控制 DLL 以将这些操作添加到其接口。

# sql - 如何在 SQL Server 2005 的插入语句中增加主键

> ID：13753325
> 
> 赞同：3
> 
> 时间：2012-12-06T21:55:27.063
> 
> 标签：sql, sql-server

我需要在`insert`表中写一条语句，列看起来像这样

*   `demandtypeid`( `PK, FK, int, not null`)
*   `characvalueid`( `PK, FK, int, not null`)
*   `percentage`( `int null`)
*   `lastuser`( `varchar(100), null`)
*   `lastedited`( `datetime, null`)

这是`INSERT`声明。请注意，在

```
value( ,  , 'Bob') 
```

因为我认为那是自动增量命令应该去的地方

```
insert into tr_demandtypecharac(demandtypeID, characvalueid, lastuser) 
values(  , , 'Bob') 
```

请帮忙做一个简单的小声明

我只想知道如何手动插入这个表

这是我的表结构：

```
CREATE TABLE [dbo].[tr_demandtypecharac](
[demandtypeid] [int] NOT NULL,
[characvalueid] [int] NOT NULL,
[percentage] [int] NULL,
[lastuser] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[lastedited] [datetime] NULL,
 CONSTRAINT [PK_tr_dtc_pkey] PRIMARY KEY CLUSTERED 
(
[demandtypeid] ASC,
[characvalueid] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
 ) ON [PRIMARY]

ALTER TABLE [dbo].[tr_demandtypecharac]  WITH CHECK 
ADD CONSTRAINT [FK_tr_dtc_cvid] 
FOREIGN KEY([characvalueid]) REFERENCES [dbo].[tr_characvalue] ([characvalueid])

ALTER TABLE [dbo].[tr_demandtypecharac]  WITH CHECK 
ADD CONSTRAINT [FK_tr_dtc_dtid] 
FOREIGN KEY([demandtypeid]) REFERENCES [dbo].[tr_demandtype] ([demandtypeid]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:00:32.393

如果您想要一个唯一且自动递增的 int 列，请使用以下[`IDENTITY`](http://msdn.microsoft.com/en-us/library/aa933196%28v=sql.80%29.aspx)关键字：

```
CREATE TABLE new_employees
(
 id_num int IDENTITY(1,1),
 fname varchar (20),
 minit char(1),
 lname varchar(30)
) 
```

然后，当您插入表时，不要为该列插入任何内容——它会自动递增。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:51:58.277

鉴于`CREATE TABLE`您发布的语句，没有自动增量（又名身份）列，您将插入提供所有列和值，如下所示：

```
insert into tr_demandtypecharac(
       demandtypeid, characvalueid, 
       percentage, lastuser, lastedited) 
values(2, 3, 80, 'Bob', '01/01/2012') 
```

但是，如果您确实通过更改为使它们自动递增`CREATE TABLE`：

```
CREATE TABLE [dbo].[tr_demandtypecharac](
[demandtypeid] [int] NOT NULL IDENTITY(1,1),
[characvalueid] [int] NOT NULL IDENTITY(1,1),
[percentage] [int] NULL,
[lastuser] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[lastedited] [datetime] NULL,
 CONSTRAINT [PK_tr_dtc_pkey] PRIMARY KEY CLUSTERED 
(
[demandtypeid] ASC,
[characvalueid] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
 ) 
```

然后，您将插入提供所有非身份（非自动增量）列，如下所示：

```
insert into tr_demandtypecharac(
      percentage, lastuser, 
      lastedited) 
values(80, 'Bob', '01/01/2012') 
```

**但是，将多个列作为标识（自动增量）列并不常见，通常，此列是唯一的 PRIMARY KEY 列。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:00:21.587

如果一列是自动增量列（与主键列不同），则在插入语句中省略该列，它将被填充。

```
INSERT INTO tr_demandtypecharac (lastuser) VALUES ('Bob') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-23T20:49:20.727

我遇到了类似的问题，需要用一组记录更新购买的数据库。我的解决方案是找到迄今为止使用的最高密钥，然后将其用作插入的基础。它的核心是 ROWNUMBER() OVER(ORDER BY PART_CODE)。

关键是 inadjinf 表中的“recnum”字段。我确定当前最高密钥是 675400 并将我的查询更新为：

```
insert into inadjinf (recnum, user_id, adj_type, adj_status, trans_date, part_code, lotqty, uom, cost_ctr, lot, location, to_cost_ctr, to_location, rec_status, to_part_grade, to_rec_status, remarks1, uom_conv) 
select ROW_NUMBER() OVER(ORDER BY INVDET.PART_CODE) + 675400 as recnum, 'CHRSTR' as user_id, 'M' as adj_type, 'O' as adj_status, '2020-10-23' as trans_date, invdet.part_code, sum(lotqty) as lotqty, uom, 
cost_ctr, lot, location, 'NS' as to_cost_ctr, '500A' as to_location, rec_status, 'Q' as to_part_grade, 'H' as to_rec_status, 'NS Scrap Request from MSobers 10/21/2020' as remarks1, '1' as uom_conv
from invdet
inner join partmstr on invdet.part_code = partmstr.part_code
where 
invdet.part_code In
(
'86038',
'1271',
'VM-0021',
'CO-0107',
...
'FO-0391',
'FO-0376'
)
and lot not in (select lot from inadjinf where trans_date = '2020-10-23' and user_id = 'CHRSTR')
group by invdet.part_code, uom, cost_ctr, lot, location, rec_status 
```

我的输出从 675401 开始，然后从那里上升。最后，我更新了系统内部的“next id field”表记录。

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-12-06T21:59:10.493

你不应该使用 int 作为主键......这里有一篇关于它的文章：http: [//techtrainedmonkey.com/2012/07/30/why-integers-are-lousy-primary-keys/](http://techtrainedmonkey.com/2012/07/30/why-integers-are-lousy-primary-keys/)

但如果你这样做......将字段设置为身份，Sql Server 会为你做......检查一下：http: [//msdn.microsoft.com/en-us/library/ms186775.aspx](http://msdn.microsoft.com/en-us/library/ms186775.aspx)

# c++ - Infiniband 寻址 - 没有 IBoIP 的 IB 地址的主机名

> ID：13753332
> 
> 赞同：6
> 
> 时间：2012-12-06T21:55:49.640
> 
> 标签：c++, linux, infiniband

我刚刚开始熟悉 infiniband，我想了解可用于解决 infiniband 节点的方法。

基于代码的示例来自：[RDMA read and write with IB verbs](http://thegeekinthecorner.wordpress.com/2010/09/28/rdma-read-and-write-with-ib-verbs/) I can address individual nodes by IP or hostname using IPoIB.

另一种方法是直接使用端口 GUID 地址。但看起来你必须查找这些，并且更类似于以太网 MAC 寻址。

然后是称为 LID 地址的东西，由结构管理器分配的 16 位本地地址。如何在运行时使用和确定 LID 地址？例如，我运行 ibaddr 并获取 GID fe80::1a:4bff:ff0c:34e5 LID start 0x6 end 0x6

基本上，如果您不使用 IPoIB，您如何将主机名转换为地址或类似名称？是否有主机文件或类似文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T23:28:51.847

您列出的各种寻址方法之间存在基本区别：

1.  用纯 IB 动词寻址
2.  使用某种抽象级别进行寻址

当一个数据包被“注入”到 IB 结构中时，它仅由 LID 路由，这是数据包的本地路由标头的一部分。LID 是 Local ID，16 位，由 OpenSM 分配（还有 GID 和 Global Routing Header 的情况，但让我们把这个情况放在一边 - 它不会让解释变得更容易，而且你显然不需要这个观点）。

这意味着，如果您使用纯 IB 动词编写应用程序，则需要通过 LID 寻址端点。您可以使用 ibv_query_port() 获取本地端口的 LID - 它是端口属性字段的一部分。

但是你不必自己做所有的脏活——你可以使用 librdmacm (RDMA Connection Manager) 之类的抽象库来创建端点之间的连接（“端点”是指 RC QP），然后使用纯动词来实际发送/接收您的数据。

> 基本上，如果您不使用 IPoIB，您如何将主机名转换为地址或类似名称？是否有主机文件或类似文件？

你不能，也没有:(如果你浏览了你链接到的那个博客上的[早期帖子](http://thegeekinthecorner.wordpress.com/2010/08/13/building-an-rdma-capable-application-with-ib-verbs-part-1-basics/)，你会发现你需要：

*   确定队列对的地址。
*   将地址传递给另一个节点（通过一些带外机制）。

这里的关键项目是“带外”。例如，MPI 通过 SSH 交换所有这些地址（顺便说一句，它也可以在 IPoIB 之上运行），一旦交换了这些信息并连接了所有 QP，数据就开始通过这些 RC QP 流动。

# excel - Excel 内置或 VBA 函数来格式化部分文本（例如颜色）

> ID：13753333
> 
> 赞同：4
> 
> 时间：2012-12-06T21:55:53.753
> 
> 标签：excel, function, vba, string-formatting

我需要格式化多行文本单元格的第一行的颜色（或粗体文本......）。所以例如我得到了

=myfunction (firstLine, secondLine)，然后产生（在一个单元格内）

```
 firstLine (vbLf)
    secondLine 
```

但我需要它来生产

```
 **firstLine** (vbLf)
    secondLine 
```

（第一行是粗体）所以只格式化字符串的一部分，但在 VBA 函数内。我可以在 Sub 里面做类似的事情

```
 lngPos = InStr(myCell.Value, vbLf)
    With myCell.Characters(Start:=1, Length:=lngPos - 1).Font
        .FontStyle = "Bold"
    End With 
```

但如果可能的话，我无法找到如何在函数中执行此操作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:49:09.587

除了从用户定义的函数（UDF）返回一个值之外，它什么也做不了。但是，您可以通过更改触发工作表事件，然后更新数据。将此添加到相关工作表的模块中。将 Range("J6:J10") 更改为您需要监视的范围并添加粗体/任何其他代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Not Intersect(Target, Range("J6:J10")) Is Nothing Then

        ' do something on the cells

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:37:28.647

如果您想通过代码触发更新而不是等待直接更改（并且格式化单元格不会触发`Change`事件），那么您可以通过简单的 sub 强制它

`Events`处理事件时应始终禁用`Change`以避免意外循环。虽然格式化不会触发事件本身，但进一步的代码更改/添加可以这样做 - 降低这种风险的良好做法

**普通模块**

```
Sub MakeUpdate()
Sheets(1).[a1:a10].Formula = Sheets(1).[a1:a10].Formula
End Sub 
```

**在 Sheet(1) 的工作表代码中**

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Intersect(Target, [a1:a10])
If rng1 Is Nothing Then Exit Sub
With Application
.ScreenUpdating = False
.EnableEvents = False
End With
For Each rng2 In rng1.Cells
rng2.Characters(1, InStr(rng2.Value, vbLf) - 1).Font.FontStyle = "Bold"
Next
With Application
.ScreenUpdating = True
.EnableEvents = True
End With
End Sub 
```

# cygwin - 在 cygwin 中跨 shell 标准化提示

> ID：13753346
> 
> 赞同：2
> 
> 时间：2012-12-06T21:57:02.660
> 
> 标签：cygwin, sh, ksh, prompt, .profile

**我花了很长时间在为cygwin**安装的不同 shell 中标准化我的提示。

已安装的外壳：

1.  **bash**（默认登录外壳）
2.  **嘘**
3.  **csh**（实际上是**tcsh**）
4.  **克什**
5.  **zsh**

我的提示在**bash**、**csh**和**zsh**中是标准化的，但我无法使用**sh**和**ksh**。

我希望在所有 shell 中使用的提示类似于以下内容：

```
20121216 15:18:04 [shell]   # date and time in yellow, shell in red
user@hostname pwd           # user@host in green, pwd in yellow
$                           # white 
```

我已经将它设置为我希望它用于**bash**的方式，其中包含以下行`/etc/profile`：

```
PS1="\[\e]0;\w\a\]\n\[\e[33m\]\D{%Y%m%d %H:%M:%S} \[\e[31m\][bash]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n\$ " 
```

我已经为**csh**设置了以下行`.tcshrc`：

```
set prompt="\n%{\033[33m%}%Y%W%D %P %{\033[31m%}[csh]\n%{\033[32m%}%n@%M %{\033[33m%}%~\n%{\033[0m%}$ " 
```

我已经为**zsh**设置了以下几行`.zshrc`：

```
PROMPT="
%{$fg[yellow]%}%D{%Y%m%d} %* %{$fg[red]%}[zsh]%{$reset_color%}
%{$fg[green]%}%n@%m %{$reset_color%}%{$fg[yellow]%}%~%{$reset_color%}
$ " 
```

但我似乎无法在任何地方为**sh**或**ksh**设置默认提示。我可以同时打开它们并手动设置`PS1="$ "`，但我一辈子都不能让它自动设置。**sh**提示符看起来与**bash**提示符相同，并且**ksh**提示符是乱码（我假设它不喜欢它从**bash继承的 PS1 的语法）。**

我尝试失败的事情：

*   将 PS1 设置为`/etc/profile`（在从 读取 shell 名称的 case 语句中`echo $0`）
*   将 PS1 设置为`.kshrc`
*   将 PS1 设置为`.shrc`
*   将 PS1 设置为`.sh_profile`
*   将 PS1 设置为`.profile`

**当我启动其中一个 shell 时， cygwin**似乎只是不执行上面列出的文件。请注意，我只在**bash**中启动这些 shell 。

有任何想法吗？（对不起这本书，我只是想彻底。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:09:58.583

官方 Korn shell *ksh93*将在登录时读取 /etc/profile 和 ~/.profile，按此顺序。

如果`ksh`不作为登录外壳，它将尝试读取由 引用的文件`$ENV`，或者`$HOME/.kshrc`如果`ENV`未设置。

较旧的版本（尤其是 sun 的*ksh88*）遇到先有鸡还是先有蛋的情况，因为您只能设置`ENV` *.* `~/.profile`，但您仍然必须自己使用`. $ENV`.

请注意，`ENV`并且`PS1`必须导出才能被登录后生成的 ksh 实例拾取（例如， from`screen`或`tmux`）。

# vb.net - Visual Basic ByRef 整数

> ID：13753349
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:57:05.983
> 
> 标签：vb.net, pointers

你如何制作一个整数，而不是设置一个值，而是将它设置为对另一个变量的值的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:22:04.753

在 VB6 中有时需要使用整数作为指针来调用系统函数，但在 vb.net 中不再需要和能够使用整数作为指针。

如果您需要在 vb.net 中使用地址，您可以使用`AddressOf`函数和`InPtr`非托管内存。但是，很有可能您并不真的需要这样做——这相对不常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:25:00.483

这简直是​​胡说八道。作为内存中某个位置的地址的引用与整数值在 32 位上占据相同的位置。甚至比 64 位上的地址还要少。

除非您想将指针传递给 API 或其他东西，否则您最好坚持使用变量本身。

# vb.net - 如何在 VB.Net 中检索活动 IE 选项卡的 url？

> ID：13753350
> 
> 赞同：1
> 
> 时间：2012-12-06T21:57:13.493
> 
> 标签：vb.net, vb.net-2010

我在 VB.Net 中有以下代码来获取 IE 标签的 url：

```
Function getIEUrl() As List(Of String)
    Try
        Dim list As New List(Of String)
        Dim sw As New ShellWindows()
        For Each browser As InternetExplorer In New ShellWindows()
            list.Add(browser.LocationURL)
        Next
        Return list
    Catch ex As Exception
        Return Nothing
    End Try
End Function 
```

如何管理它以仅获取活动选项卡的网址？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:09:15.047

在访问其他程序数据方面，我没有做太多事情，但是快速的谷歌搜索让我进入了这个网站：

[http://www.eggheadcafe.com/community/csharp/2/10112922/how-to-get-current-active-tab-handle-in-an-ie7-window-using-c.aspx](http://www.eggheadcafe.com/community/csharp/2/10112922/how-to-get-current-active-tab-handle-in-an-ie7-window-using-c.aspx)

据我了解，您需要遍历 IE 中的每个选项卡进程并找到活动的。拥有活动的，然后您获取 URL。

# jquery-ui - 自动完成响应

> ID：13753351
> 
> 赞同：0
> 
> 时间：2012-12-06T21:57:15.663
> 
> 标签：jquery-ui, twitter-bootstrap

我正在尝试使用引导程序的弹出组件在文本框下“弹出”jquery 自动完成结果。

我在隐藏的 div (#wrapper) 中呈现自动完成查询的结果，并且我希望在呈现完成时设置弹出框的内容并显示它。

为此，我重载了`_renderItem`将结果的 div 附加到隐藏容器 (#wrapper) 中的函数。

我认为`response`当 _renderItem 调用完成时会调用该函数，但我错过了一些东西，因为从未调用过响应函数。

有什么解决办法吗？

谢谢！

```
$("#bookSearch")
             .autocomplete({
                 minLength: 0,
                 source: '/Autocomplete/Books',
                 focus: function (event, ui) {
                     $("#bookSearch").val(ui.item.label);
                     return false;
                 },
                 search: function(event, ui) {
                     $('#wrapper').empty();
                 },
                 response: function (event, ui) {
                    $('#bookSearch').popover('destroy');
                    $('#bookSearch').popover({
                            html: true,
                            placement: 'bottom',
                            content: $('#wrapper').html()
                    });
                    $('#bookSearch').popover('show');
                 }

             })
             .data("autocomplete")._renderItem = function (ul, item) {
                 $('<div class="media"></div>')                             
                                    .data("item.autocomplete", item)
                                    .append("<a class=\"pull-left\" href=\"#\"><img class=\"media-object\" src=\""
                                    + item.ImgUrl
                                    + "\"></a><div class=\"media-body\"><h6 class=\"media-heading\">"
                                    + item.Name
                                    + "</h6>"
                                    + item.Author + "</div>").appendTo('#wrapper');

             }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T20:22:48.917

我通过在我的 css 文件中添加自动完成的 z-index 样式解决了这个问题。

```
.ui-autocomplete {
  z-index: 10000;
} 
```

`z-index`如有必要，请记住为 设置更高的值。只是为了记录，我在 HTML 文件中有这样的东西

```
<div class="ui-widget">
   <label for="employee">Employee:</label>
   <input id="employee" type="text" name="employee" />
</div> 
```

# java - JVMTI 分析：计算堆栈内存量

> ID：13753352
> 
> 赞同：3
> 
> 时间：2012-12-06T21:57:15.327
> 
> 标签：java, memory-management, stack, jvmti

我正在开发一个 JVMTI 代理来监视应用程序的内存使用情况。我已经设法使用字节码检测来监视堆上的内存分配，以便在分配新对象/数组时调用本机方法。但是我真的很困惑如何确定堆栈上分配的内存量。如果您能提供任何想法、提示或链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:10:08.867

您希望从 JVMTI 界面获得多少细节？看起来它只报告[逻辑 Java 堆栈帧信息](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#GetAllStackTraces)，这意味着您无法找出实际使用了多少运行时堆栈空间，但您可以使用`jmethodID`来确定[Java 堆栈帧的布局](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.6)以做出合理的猜测（局部变量的数量在编译时针对特定方法是固定的，请参阅[GetLocalVariableTable](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#GetLocalVariableTable)）。本机方法的堆栈帧将不可见。并且存储在堆栈中的其他 JVM 状态（例如，调试信息或 JIT 使用的空间，以及线程基础结构）也将不可见。

# android - 将 ImageViews 添加到垂直布局

> ID：13753353
> 
> 赞同：0
> 
> 时间：2012-12-06T21:57:20.647
> 
> 标签：android, android-linearlayout, android-imageview

我有两个图像视图，我试图将它们放入垂直线性布局中。我希望它们一个在另一个之上，但不知何故它们被水平放置。这是我的代码：

```
String[] portalNiz;
Uri slika;
ImageView imgLogo = new ImageView(AllDiscounts.this);
portalNiz = c.getString(1).split("\\.");
slika = Uri.parse("android.resource://rs.jedanzasve/raw/"+portalNiz[0].toLowerCase());
imgLogo.setImageURI(slika);

Uri slikaKategorije;
ImageView imgCategory = new ImageView(AllDiscounts.this);
String categoryImage = "";
if (c.getString(14).contains("lepota")) categoryImage = "lepota";
if (c.getString(14).contains("odmor")) categoryImage = "odmor";
if (c.getString(14).contains("putovanja")) categoryImage = "putovanja";
if (c.getString(14).contains("ostalo")) categoryImage = "ostalo";
if (c.getString(14).contains("proizvodi")) categoryImage = "proizvodi";
if (c.getString(14).contains("sport")) categoryImage = "sport";
if (c.getString(14).contains("hrana")) categoryImage = "hrana";
if (c.getString(14).contains("bioskopi")) categoryImage = "bioskopi";
if (c.getString(14).contains("zdravlje")) categoryImage = "zdravlje";
slikaKategorije = Uri.parse("android.resource://rs.jedanzasve/raw/"+categoryImage.toLowerCase());
imgCategory.setImageURI(slikaKategorije);

LinearLayout vertikalniSlike = new LinearLayout(AllDiscounts.this);
vertikalni.setOrientation(LinearLayout.VERTICAL);

vertikalniSlike.addView(imgLogo, new LinearLayout.LayoutParams(                     LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));

vertikalniSlike.addView(imgTest, new LinearLayout.LayoutParams(                     LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:11:22.340

您已将 imageViews 添加到 vertikalniSlike LinearLayout 但您已将方向设置为 verticalni 布局。除非是错字。请更换：

```
vertikalni.setOrientation(LinearLayout.VERTICAL); 
```

和

```
vertikalniSlike.setOrientation(LinearLayout.VERTICAL); 
```

# php - PHP反序列化函数获取0-9之间的任意数字

> ID：13753370
> 
> 赞同：-1
> 
> 时间：2012-12-06T21:59:07.807
> 
> 标签：php, function, serialization, numbers

我需要使用反序列化 php 函数获取产品 ID。我有这个文字

```
a:1:{i:4;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196;s:11:"category_id";s:3:"209";s:5:"price";d:1;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:0:"";s:12:"product_name";s:4:"test";s:11:"thumb_image";s:0:"";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}} 
```

我用这个 PHP 代码得到 product_id：

```
$rslt = unserialize($data);
echo $rslt[4]["product_id"]); 
```

所以我的问题是有没有办法做一些事情，比如`echo $rslt[x]["product_id"];`x 是 0-9 之间的任何数字

也试过这个但不起作用

```
 $i=0;
        while($rslt[$i]["product_id"]!="")
            {
            echo $i;
            //echo $rslt[4]["product_id"];                    
            echo $rslt[$i]["product_id"];
            $i++;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:57:35.970

一旦你反序列化你的输入，你就有一个很好的旧 PHP 数组，相当于：

```
$rslt = array (
  4 => 
  array (
    'quantity' => 1,
    'product_id' => 5196,
    'category_id' => '209',
    'price' => 1,
    'tax' => '18.00',
    'tax_id' => '1',
    'description' => '',
    'product_name' => 'test',
    'thumb_image' => '',
    'ean' => '',
    'attributes' => 'a:0:{}',
    'attributes_value' => 
    array (
    ),
    'weight' => '0.0000',
    'vendor_id' => '0',
    'files' => 'a:0:{}',
    'freeattributes' => 'a:0:{}',
    'dependent_attr_serrialize' => 'a:0:{}',
  ),
); 
```

要获取第一个元素，只需像调用任何其他数组一样调用[current() ：](http://php.net/current)

```
$first_item = current($rslt);
print_r($first_item['product_id']); 
```

# c# - 如何进入外部for循环

> ID：13753375
> 
> 赞同：0
> 
> 时间：2012-12-06T21:59:21.523
> 
> 标签：c#

> **可能重复：**
> [跳出嵌套循环](https://stackoverflow.com/questions/324831/breaking-out-of-a-nested-loop)

我有两个这样的 for 循环：

```
for (...)
{
   // some code

   for (...)
   {
       if (something)
       {
            // go to the outer for loop   <<<<<< 
       }
   }

   // some more code here 
} 
```

如果我使用`continue`它将进入内循环。我想让它去外面的那个。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T22:00:38.203

使用[`break`](http://msdn.microsoft.com/en-us/library/adbctzc4.aspx). 正如文档所说：

> break 语句终止它出现的最近的封闭循环或 switch 语句。控制权被传递给终止语句之后的语句（如果有）。

所以你的代码应该是这样的：

```
Outer For-Loop
{
   ...// some code
   Inner For-Loop
   {
       if( something  = true )
       {
            break;//breaks out of inner loop
       }
   }

   // some more code here 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T22:00:48.947

你的意思是你想要[“休息”](http://msdn.microsoft.com/en-us/library/adbctzc4.aspx)？？？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T22:01:11.183

使用中断而不是继续？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T22:56:37.453

这是另一种方法

> 一：for(){
> 
> ```
>  for( ){
> 
>         if(  ){
> 
>           continue one
>        }  
>    } 
> ```
> 
> }

使用标签“名称：”我使用了一个：

当满足条件时，代码“继续一个”将跳转到第一个

# download - 强制保存和下载 PHPExcel 文件

> ID：13753381
> 
> 赞同：1
> 
> 时间：2012-12-06T21:59:56.233
> 
> 标签：download, export, phpexcel

在我的一个项目中，我让用户使用 PHPExcel 将信息“导出”到 Excel 文件中。当它工作时，它完美地工作。其他时候，只有某些人可以实际打开文件。

由于我需要存储创建的导出，因此将它们保存在服务器上，然后使用 readfile() 下载创建的文件。当它不起作用时，（现在大部分时间）人们会收到“错误的文件格式”错误。真正奇怪的是，由于文件已保存，他们可以尝试再次下载相同的文件。然后它工作。

这是我的最终保存和下载代码：

```
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="'.$Temp_Export_File_Name.'"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
//$objWriter->save('php://output');
$objWriter->save('../project_files_images/created_exports/'.$Temp_Export_File_Name);
readfile('../project_files_images/created_exports/'.$Temp_Export_File_Name);
exit; 
```

我缺少的这段代码有什么问题吗？对于最新版本的 Office（Mac 或 Windows）的用户来说，这个问题往往最为突出

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:17:37.020

马克的提示是正确的。对于可能遇到这种情况的其他任何人，这就是正在发生的事情。

由于某种原因，PHPExcel 需要“创建者”和“上次修改者”字段，而我没有使用它们。我只是注释掉了引用这两项的 PHPExcel 代码中的两行代码。

它仍然没有解释为什么它会影响强制文件而不是保存的文件，但我运行的理论是这样的。

1.  保存的文件由所有的头信息集创建并保存。
2.  强制文件以某种方式包含文件头部的打印错误。

# ruby - 以升序和降序循环的优雅方式

> ID：13753382
> 
> 赞同：1
> 
> 时间：2012-12-06T21:59:58.573
> 
> 标签：ruby, ruby-on-rails-3, nokogiri

我有以下代码可以解析 HTML 文本并修剪（或去除）空的段落。它类似于`.strip`String 对象。

```
doc = Nokogiri::HTML::DocumentFragment.parse(html)

# repetition that I want to collapse
doc.css('p').each do |p|
  if all_children_are_blank?(p)
    p.remove
  else
    break
  end
end

# repetition that I want to collapse
doc.css('p').reverse_each do |p|
  if all_children_are_blank?(p)
    p.remove
  else
    break
  end
end

doc.to_s.strip 
```

有没有更优雅的方法来防止我用注释标记的代码被复制并遵守代码重用原则？

这是我想出的，但我对它还不满意，想看看是否有更好的东西：

```
doc = Nokogiri::HTML::DocumentFragment.parse(html)

doc.css('p').each do |p|
  if stop(p) then break end
end

doc.css('p').reverse_each do |p|
  if stop(p) then break end
end

doc.to_s.strip

def self.stop(p)
  if all_children_are_blank?(p)
    p.remove
    false
  else
    true
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:19:08.517

如果我了解您要查找的内容，您会想要一种更简单的方法来迭代您正在查看的元素，以删除空白`p`元素。

这是折叠您所写内容的简单方法，无需做很多不同的事情：

```
doc.tap do |d|
  [:each, :reverse_each].each do |sym|
    d.css("p").public_send(sym) do |p|
      if blank_children?(p)
        p.remove
      else
        break
      end
    end
  end
end.to_s.strip 
```

我没有对此进行测试，因此您可能需要对其进行一些调整。如果这是生产代码，我可能会将其分解为一个或多个方法调用以保持清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:27:54.457

怎么样：

```
[*doc.css('p'), *doc.css('p').reverse].each do |p|
  if stop(p) then break end
end 
```

在这种情况下，splat 运算符 ("*") 将两个列表展开为一个数组，其中元素先升序，然后降序。然后你只需遍历整个组。

* * *

编辑：由于`break`语句跳到所有内容的末尾，这将无法正常工作。因此，恕我直言，这样做的正确方法是将块分配给一个变量。而且您也可以消除该`stop`功能，因为无论如何您都在消除代码的重复：

```
remover = lambda do |p|
  if all_children_are_blank? p
    p.remove
  else
    break
  end
end

doc.css('p').to_a.each(&remover).reverse_each(&remover) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:51:19.977

也许是这样的：

```
puts "removing a top p" until stop(doc.at('p'))
puts "removing a bottom p" until stop(doc.search('p').last) 
```

要不就：

```
puts "removing a p" until stop(doc.at('p')) && stop(doc.search('p').last) 
```

# azure - 使用 Windows Azure 服务总线进行消息路由

> ID：13753384
> 
> 赞同：8
> 
> 时间：2012-12-06T22:00:01.867
> 
> 标签：azure, message-queue, azureservicebus

我花了几个小时才了解 Azure 服务总线架构。我特别想知道这种排队技术是否可以用来支持消息路由——类似于 RabbitMQ 的路由能力。 [http://www.rabbitmq.com/tutorials/tutorial-four-python.html](http://www.rabbitmq.com/tutorials/tutorial-four-python.html)

> 我们将改为使用直接交换。直接交换背后的路由算法很简单——消息进入绑定键与消息的路由键完全匹配的队列。
> 
> 在这个设置中，我们可以看到绑定了两个队列的直接交换 X。第一个队列用橙色绑定键绑定，第二个队列有两个绑定，一个用黑色绑定键，另一个用绿色绑定。
> 
> 在这样的设置中，使用路由键橙色发布到交换的消息将被路由到队列 Q1。路由键为黑色或绿色的消息将发送到 Q2。所有其他消息将被丢弃。

寻找对服务总线架构有深刻理解的人来推荐实现这种队列的最佳向量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T22:17:34.820

Windows Azure 服务总线主题和订阅允许您执行完全相同的操作：

![在此处输入图像描述](../Images/30deef10fa753af9462c2f8702ecfb84.png)

让我们将图像与您的示例进行比较：

*   直接交换 X 将是图像中的**DataCollection** `Topic`。
*   Q1 将是**仪表板** `Subscription`（`Filter`设置为**Redmond**）
*   Q2 将是**库存** `Subscription`（没有`Filter`，意味着它将接收所有消息）。

其实很简单。您的客户端向主题发送消息（类似于队列），并且可以向该消息添加一些元数据（这可以用作`binding key`）。现在您不再从 Topic 本身读取消息，Topic 会将消息转发给所有订阅。要实现消息路由，您只需使用类似于 SQL 的语法对一个或多个订阅设置一个过滤器。

Python 教程：[如何使用服务总线主题/订阅](https://www.windowsazure.com/en-us/develop/python/how-to-guides/service-bus-topics/)

# javascript - Jquery - 验证后继续提交表单

> ID：13753389
> 
> 赞同：0
> 
> 时间：2012-12-06T22:00:16.510
> 
> 标签：javascript, jquery

我有这个代码：

```
kreiraj_korisnika.on('submit', function(){
    if(error_count != false) {
        kreiraj_korisnika.submit();
    } else {
        return false;
    }
}); 
```

**当error_count**为**真**（没有 AJAX 提交）时，如何继续提交表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:05:30.667

您必须使用`preventDefault()`事件变量的方法来避免提交。尝试类似：

```
kreiraj_korisnika.on('submit', function(e) {
   if (error_count)
   {
      // avoid the submit...
      e.preventDefault();

      // show your erros messages
   }       
}); 
```

如果 error_count`variable`是`true`，提交将会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:16:30.313

kreiraj_korisnika 实际上是一个 jQuery 对象吗？如果您只是将它分配给 getElementById() 的结果，它将不起作用。

在这种情况下：

```
$(kreiraj_korisnika).on('submit', function(e){
var errorCount = 0;

if(errorCount == 0)
{
    this.submit();
}
else
{
alert('Invalid form input !');
e.preventDefault();
}
}); 
```

莱昂

# image - 使用drupal 7的视图块中未显示图像

> ID：13753391
> 
> 赞同：0
> 
> 时间：2012-12-06T22:00:18.577
> 
> 标签：image, drupal, drupal-7, views, drupal-blocks

我完全坚持这个：

我正在开发一个 drupal 7 网站，并且我创建了一个应该显示图像的块（视图）。无论我尝试什么，我都无法显示图像......

* * *

我试图显示的内容类型有 3 个字段：“名称”、“描述”和“图片”。图片只是存储在“myImages”文件夹中的图像。

这是我正在尝试创建的块视图的图片： ![块](../Images/508307afc86160ab0f7b7637c97e8d53.png)

这会显示字段“title”和“beschrijving”（=description）。然而，“照片”（=图片）没有显示......（在 chrome 中它给出了“破碎的图片”标志，在 Firefox 中什么也没有）。

奇怪的是：图像出现只是眨眼然后消失，这意味着它实际上正在被渲染。

当我用萤火虫查看它时，我得到了以下 html：

```
<div class="views-field views-field-field-foto">
    <span class="field-content">
        <img width="100" height="100" alt="" src="sites/default/files/myImages/imageSource.jpg" typeof="foaf:Image">
    </span>
</div> 
```

当我尝试打开图像本身（imageSource.jpg）时，我得到一个（500）内部服务器错误（但我很确定这是因为 .gitignore 文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:37:16.727

图片路径不正确。它应该看起来像...

src=" **/sites** /default/files/myImages/imageSource.jpg"

...与开始的正斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T15:28:46.257

我在显示带有视图的图像时遇到了问题，结果是“替代文本”选项。为了使用“替代文本”并且没有问题，我不得不使用视图中的“重写结果”选项。

# javascript - GridLayout ListView 的渲染速度非常慢 - WinJS

> ID：13753394
> 
> 赞同：1
> 
> 时间：2012-12-06T22:00:28.403
> 
> 标签：javascript, listview, windows-8, winjs

这是我的第一个 Windows 8 应用程序......我在使用它之前遇到了最后一个问题。:)

**我有一个布局设置为 GridLayout 的 ListView。加载主页面时，应用程序将 50 个项目添加到 ListView 的数据源。ListView 需要 5-6 秒来呈现。**

**注意：**项目添加到数据源后 5-6 秒。XHR/AJAX 调用 + 加载需要 200-300 毫秒。

* * *

这似乎很奇怪。我在下面添加了一些代码：

**JS - 定义 ListView 和数据源**

```
this.categoryProducts = new WinJS.Binding.List();
this.productListview = element.querySelector('#category-products-listview').winControl;
this.productListview.itemTemplate = element.querySelector('#product-template');
this.productListview.itemDataSource = this.categoryProducts.dataSource;
this.productListview.oniteminvoked = this._product_clicked.bind(this); 
```

**JS - 将项目添加到数据源**

```
_ref = data.products;
_results = [];
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
   product = _ref[_i];
   _results.push(Category.categoryProducts.push(product));
} 
```

**HTML：**

```
<div id="product-template" data-win-control="WinJS.Binding.Template">
    <div class="item product">
        <img class="item-image" src="/images/shopping-bag.png" data-win-bind="src: thumbnail; alt: name" onError="this.src='/images/shopping-bag.png';" />

        <div class="item-details" >
            <div class="item-details-top">
                <h4 class="item-title" data-win-bind="textContent: name"></h4>

            </div>
            <div class="item-details-bottom">
                <div  class="price"> <span style="font-weight:bold;">$</span> <span data-win-bind="textContent: price"></span></div> 
                <div class="reviews" ><span class="icon-comments"></span> <span data-win-bind="textContent: reviews_count"></span></div> 
                <div class="stars" > <span class="icon-star"></span><span class="icon-star"></span><span class="icon-star"></span><span class="icon-star"></span><span class="icon-star"></span>  <span data-win-bind="textContent: stars"></span></div>
            </div>
        </div>
    </div>
</div> 
```

* * *

这是 ListView 呈现时的样子。

![在此处输入图像描述](../Images/2246781f7593f4fae0582091831ca6f2.png)

* * *

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:33:32.267

您是在设置 ListView 之前还是之后将项目添加到数据源？不是说这就是它，而是想知道您是否通过按自己的方式添加项目而流失了很多。我会下拉项目并创建一个新的绑定列表，然后设置数据源。

我已经以最小的延迟将 100 个项目加载到 listView 中。

1.  使用空列表设置 ListView
2.  从网络中提取数据
3.  使用网络调用的结果创建新的绑定列表
4.  使用新列表中的新数据源更新 ListView

你的旅费可能会改变...

# jquery - JQuery 使项目具有阴影

> ID：13753395
> 
> 赞同：1
> 
> 时间：2012-12-06T22:00:29.317
> 
> 标签：jquery

使项目具有阴影 ( [http://syddev.com/jquery.shadow/](http://syddev.com/jquery.shadow/) ) 的 jquery 似乎不起作用。这是我尝试过的：

```
<link rel="stylesheet" type="text/css" href="jquery.shadow.css">       
<script src="jquery.shadow.js"></script>
<script src="jquery-1.5.min.js"></script>

<script>
    $('#SHADDOW').shadow({type:'sides', sides:'vt-2'});
</script>

<tr>
    <td><a href="http://burdu976.com/" id="SHADDOW" target='_blank'><img src="Photography8.png" id="SHADDOW" width="700"class="lazy" height="525" /></a></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:01:50.053

执行脚本时，该项目在 DOM 中不存在，将代码包装在`document.ready`处理程序中，以便在调用代码时加载 DOM。

```
jQuery(function ($) {
    $('#SHADDOW').shadow({type:'sides', sides:'vt-2'});
}); 
```

此外，在包含 jQuery 之后，还需要包含该插件：

```
<script src="jquery-1.5.min.js"></script>
<script src="jquery.shadow.js"></script> 
```

请务必检查包含文件的路径是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:31:27.443

看起来你不包括在内`jquery.shadow.js`

而且你也以错误的顺序加载它们......它应该是：

```
<script src="jquery-1.5.min.js"></script>
<script src="jquery.shadow.js"></script>
<link rel="stylesheet" type="text/css" href="jquery.shadow.css"> 
```

除了@zzzzBov 在他的回答中提到的修复。

编辑：看起来@Eskimo 编辑了原始问题，现在包括`jquery.shadow.js`. 我不知道对原始问题的编辑是否正确，因为 OP 可能不知道包含该 JS 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:53:34.950

您是在本地存储脚本文件还是使用其他网站调用 .js 文件？看来您现在正在本地存储它们。

# php - 带有js变量的php while循环

> ID：13753400
> 
> 赞同：0
> 
> 时间：2012-12-06T22:00:42.430
> 
> 标签：php, jquery, mysql

**计划：**

基本上我有一组服装项目存储在一个包含“item_name”“item_id”和“item_shortcode”的表中选定的数组）

* * *

我正在尝试根据从 mySQL 数据库收集的数据创建一个 javascript 对象，然后在将 div 单击到我的方法时将该数据传递给函数。

这是一个例子：

```
<?php 
    while($row = mysql_fetch_array($results)){ 
?>

<script>
    var item = new Object();
    item.itemName = <?php echo json_encode($row['item_name']); ?>;
</script>

<?php
            echo "<div id=\"".$row['item_name']."\" class=\"choice\" onclick=\"SetSelectedChoice(item);\">";
            //echo $row['item_name'];
            echo "</div>";
        }
    }
?> 
```

编辑：这只是一个例子，我将用大量数据填充我的对象，而不仅仅是 item_name

问题是最后一个对象似乎分配给了 while 循环中的每个 div。

有人指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:08:08.617

您在每次迭代中重新定义项目。为什么不做这样的事情：

根据编辑，您可以创建一个项目数组并将其填充到循环中：

```
<script type="text/javascript">
    var objects = new Array();
</script>

<?php while($row = mysql_fetch_array($results)): ?>
    <script type="text/javascript">
        var item = new Object();
        item.itemName = '<?php echo json_encode($row['item_name']); ?>';
        objects.push(item);
    </script>
    <div id="<?php echo $row['item_id']; ?>" class="choice">
            <?php echo $row['item_name']; ?>
    </div>
<?php endwhile; ?> 
```

然后在循环之外的 js 中：

```
$('.choice').on('click', function(){
    SetSelectedChoice($(this).html());
});

function SetSelectedChoice(name)
{
    for(var i = 0; i < objects.length; i ++)
    {
        if(objects[i].itemName == name)
        {
            //do something
        }
    }
} 
```

注意：我不会真的推荐这种奇怪的循环来比较名称。我只是不知道您在将名称传递给此函数时还做了什么。我将传递项目 id 或索引值并直接访问数组中的项目而不是循环。说得通？

基本上，停止使用 onclick。整个世界都更加依赖听众。其次，根本不需要创建对象。您似乎没有使用它，即使您使用了，您也没有像字符串那样在名称周围加上单引号。三、请跳出php来写html。它只是更清洁，更容易。此外，将项目的 id 分配给 id 参数。在元素的 id 中包含名称和空格真的很难看。而且您似乎并不需要它，因为您没有在示例中使用它。尽管如此，我还是把它放在那里，以防你想像`$(this).attr('id')`在点击监听器中一样访问它。

但是，如果我错过了重点，也许您可​​以澄清一下，我可能会更新以更好地满足您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:08:12.297

好吧，老实说，我不知道我是否真的得到了你，但如果我没看错，那么你只需在每次运行 while 循环时覆盖项目对象。在最后一个循环之后（输出之后），变量“item”被设置为循环的最后一个结果，所以点击任何 div 将返回“item”——循环的最后一个项目。

作为解决方案，尝试将 div 中的行名称保存为参数，例如

```
echo "<div id=\"".$row['item_name']."\" class=\"choice\" onclick=\"SetSelectedChoice(\'".$row['item_name']."\');\">"; 
```

# mysql - 在不同主机上的不同数据库上创建视图

> ID：13753404
> 
> 赞同：-1
> 
> 时间：2012-12-06T22:00:53.257
> 
> 标签：mysql

是否可以从两个不同数据库的表中创建视图？像：

```
creative view 'my_view' as
  select names as value
  from host_a.db_b.locations 
  union 
  select description as value 
  from host_b.db_b.items; 
```

它们目前是不同的数据库引擎（MyISAM 和 InnoDB）。

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:44:59.793

是的，您需要[通过 FEDERATED db engine](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html)访问远程表，然后使用您的查询[创建一个视图。](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

然而，这是解决问题的一种相当混乱的方法 - 特别是（从您的示例查询中）您的数据被有效地分片。

此结构不允许在视图上进行更新/插入。即使对于[可更新/可插入的视图](http://dev.mysql.com/doc/refman/5.0/en/view-updatability.html)，我的直觉是，如果您尝试自动提交事务以外的任何操作，尤其是在混合表类型时，您会遇到问题。我建议将复制视为解决问题的更好方法。

# installation - 如何创建批量软件安装程序 (ninite)

> ID：13753405
> 
> 赞同：1
> 
> 时间：2012-12-06T22:00:53.420
> 
> 标签：installation, windows-installer, exe, silent-installer

我希望能够创建不同的批量安装程序以在计算机上安装特定程序。例如：

```
Technician Image:
- Adobe Reader 11
- AutoCAD
- Microsoft Lync
- Norton

Manager Image:
- ACT
- Adobe Reader 11
- Microsoft Lync
- Norton 
```

这些列表列出了更多程序，但这是一个示例。我想在机器上加载 Windows 并让安装程序为我执行此操作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:46:24.233

从 Windows Installer 4.5 开始，您可以通过使用[Multiple-Package Installations](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c4a0f4d8-818d-4e60-908b-adaa2a54de95)和[MsiEmbeddedChainer Table](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/ac1e9c7b-bb83-4e1e-9108-211374c7d878)使用事务处理来安装多个 Windows Installer 包。旧版本的 Windows Installer 无法将多个包的安装作为单个事务回滚。

# javascript - 函数不接受回调

> ID：13753406
> 
> 赞同：1
> 
> 时间：2012-12-06T22:00:54.110
> 
> 标签：javascript, jquery, html

我的目标是显示和隐藏搜索表单和电话号码。当搜索表单可见时，切换应该允许表单提交。它们不应该同时打开，因为没有空间让它们都打开，所以我编写了函数来接受回调函数，除了两个事件似乎同时触发，忽略了这样一个事实他们应该等待第一个功能完成。

我究竟做错了什么？我的代码粘贴在下面，但这里有一个演示问题的[小提琴](http://jsfiddle.net/nsSxh/1/)。可能还有更好的方法来写这个，所以我愿意接受建议。谢谢。

```
//Functions for Search and Call
var closeSearch = function(callback) {
$('.searchbox').removeClass('open').addClass('notOpen').animate({
    width: '40px'
}, function() {
    $('.call').animate({
        width: '100%'
    }, function() {
        $('.call h4').fadeIn();
    });
    $('.search_bar').hide();
});
if (typeof callback == "function") {
    callback();
}
};
var openSearch = function(callback) {
    $('.searchbox').animate({
        width: '100%'
    }).addClass('open').removeClass('notOpen');
    $('.search_bar').animate({
        width: '100%'
    }).fadeIn();
    $('.search_bar #searchform .search-query').animate({
        width: '90%'
    });
    if (typeof callback == "function") {
        callback();
    }
};
var closeCall = function(callback) {
    $('.call').removeClass('open').addClass('notOpen')
    $('.call').animate({
        width: '60px'
    });
    $('.call h4').fadeOut();
    if (typeof callback == "function") {
        callback();
    }
};
var openCall = function(callback) {
    $('.call').animate({
        width: '100%'
    }, function() {
        $('.call h4').fadeIn();
    });
    $('.searchbox').addClass('notOpen');
    if (typeof callback == "function") {
        callback();
    }
};
// Search Box Toggle
$('.searchbox a').toggle(function() {
    if ($('.searchbox').hasClass('notOpen')) {
        closeCall(function() {
            openSearch();
        });
    } else {
        $('.search_bar #searchform').submit();
    }
}, function() {
    if ($('.searchbox').hasClass('notOpen')) {
        closeCall(function() {
            openSearch();
        });
    } else {
        $('.search_bar #searchform').submit();
    }
});
//Call Box Toggle
$('.call a').toggle(function() {
    if ($('.searchbox').hasClass('open')) {
        closeSearch(function() {
            openCall();
        });
    } else {
        openCall();
    }
}, function() {
    if ($('.searchbox').hasClass('open')) {
        closeSearch(function() {
            openCall();
        });
    } else {
        closeCall();
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:10:04.887

由于动画本身需要一些时间来执行，它们异步运行，因此提供了自己的回调方法。

在您的脚本中，您在调用 animate 之后立即放置回调函数，因此您传递的函数会立即被调用。您应该将自己的回调函数的调用放入 jQuery 动画的回调函数中。

例如：

```
$('.searchbox').animate({
    width: '100%'
}, function(){
    //callback of the .animate-function
    if (typeof callback == "function") {
        callback();
    }
}); 
```

我对您的小提琴进行了快速编辑以向您展示：http: [//jsfiddle.net/nsSxh/2/](http://jsfiddle.net/nsSxh/2/)

我知道它并不完美，但它应该让你知道该怎么做。

# java - 将 Context.xml 放在 WAR 文件的什么位置？

> ID：13753408
> 
> 赞同：0
> 
> 时间：2012-12-06T22:00:58.483
> 
> 标签：java, xml, spring, jakarta-ee, web-applications

我正在将一个在 tomcat 中运行的应用程序移植到 Jboss，在那里它将被部署为 .WAR 文件。我有一行代码用于查找配置 .xml 文件：

```
appContext = new ClassPathXmlApplicationContext("cmdAppContext.xml"); 
```

现在我尝试将它放在 WEB-INF/classes 中（在与 eclipse 生成的 .WAR 文件比较之后），并且还尝试了 WEB-INF 文件夹，因为它在 web.xml 中的那个位置被引用。但是每次我得到一个 NullPointerException。我在这里错过了什么吗？

请注意：我已经在论坛中看到了类似的问题，但没有解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:06:58.033

`context.xml`从源代码中查看不是一个好主意。您应该使用`.properties`文件来配置您的应用程序。.WAR 就像一个 .ZIP 文件，其中包含所有站点文件，因此`META-INF`位于 .WAR 的根文件夹中。

# mysql - 选择两个或更多（标志）列为 ON 的行

> ID：13753409
> 
> 赞同：0
> 
> 时间：2012-12-06T22:01:08.730
> 
> 标签：mysql, select

我有一张这样的桌子：

```
+----+-------+-------+-------+
| Id | Flag1 | Flag2 | Flag3 |
+----+-------+-------+-------+
|  1 |     0 |     0 |     1 |
|  2 |     0 |     0 |     0 |
|  3 |     1 |     1 |     1 |
|  4 |     1 |     1 |     0 |
+----+-------+-------+-------+ 
```

如何选择具有任何两个或多个标志的行？

在此示例中，查询应选择具有 Id 的行：`3 and 4`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:02:43.073

你就不能这样做吗？

```
....
WHERE Flag1 + Flag2 + Flag3 >= 2 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/51029/2)

**结果**

```
| 身份证 |
------
| 3 |
| 4 |
```

# php - 如何让 PHP 使用引导程序计算连续缩略图的数量？

> ID：13753413
> 
> 赞同：2
> 
> 时间：2012-12-06T22:01:25.380
> 
> 标签：php, twitter-bootstrap, count

```
 <?php if($userinfo->num_rows == 0)
    echo ("<p style='color: #f00;'>No users in this department<p>");
    else{
    $x = 0;
    echo '<ul class="thumbnails">';
    while($userDetail = $userinfo->fetch_assoc()){
    $x ++;
    echo '
    <li class="span3">
    <div class="thumbnail">
    <a href="#" data-toggle="modal" data-target="#user'.$x.'"><img class="default"                                            src="'.$userDetail['photo'].'" alt="" /></a>
    <div class="caption">
    <h5>'.$userDetail['first'].' '.$userDetail['last'].'</h5>
    <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#user'.$x.'">View Details</a></p>
    </div>
    </div>
    </li>
    (other code) 
```

这是一个引导缩略图。我需要 PHP 在一行中计算 4 个用户，然后开始新的一行用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:42:58.693

您可以使用[模数](http://php.net/manual/en/language.operators.arithmetic.php)来确定当前缩略图是否是四行中的最后一个：

```
$is_last_of_four = $x % 4 === 0; 
```

您可以使用此结果插入结束当前行并开始新行的附加标记。

# ruby - 如何使用 jabber-bot 连接聊天服务器

> ID：13753414
> 
> 赞同：1
> 
> 时间：2012-12-06T22:01:26.653
> 
> 标签：ruby, xmpp, chat

我们有一个私人聊天服务器在我们拥有的其中一台服务器上运行。例如：`company.server.com`。我们通过端口上的聊天客户端连接到此`5223`。

如何让 Jabber-bot 连接到此聊天？如果我想连接到特定房间怎么办？

下面是我所拥有的，但它似乎只是挂起并且什么也不做。我相信应该有一个属性，我应该在其中提供我要连接的服务器的名称，但我在任何地方都找不到该属性。

```
require 'rubygems'
require './jabber/bot'

# Create a public Jabber::Bot
config = {
  :jabber_id => 'name@mycompany.com',
  :password  => 'mypassword',
  :master    => 'name@mycompany.com',
  :presence  => :chat,
}

bot = Jabber::Bot.new(config)

# Give your bot a private command, 'rand'
bot.add_command(
  :syntax      => 'rand',
  :description => 'Produce a random number from 0 to 10',
  :regex       => /^rand$/
) { rand(10).to_s }

# Bring your new bot to life
bot.connect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:40:51.510

```
session = Jabber::Session.bind('account@host/resource', 'password') 
```

# android - 活动之间的 Admob 刷新率

> ID：13753416
> 
> 赞同：1
> 
> 时间：2012-12-06T22:01:29.197
> 
> 标签：android, admob

几个月来，我一直在将应用程序上传到 Google Play。我在我所有的 ~30 个应用程序中都添加了 Admob 横幅广告。我本月将收到第一笔付款，我将在一月份收到一笔“大笔”款项（+2000 美元）。

所以，我一直在做我的研究。我发现 AdMob 今年关闭了很多有利可图的帐户，所以我有点害怕。我遵循他们的规则：没有欺诈点击，横幅始终位于应用底部（无论是否提供广告，都显示在固定区域）。

我唯一的“但是”是刷新率。Admob 建议应用 60 秒的刷新率。我在所有活动的每个“onCreate”调用中加载一个广告。因此，如果用户在 Activity A 中输入我的应用，则会显示广告。如果 5 秒后，他导航到活动 B，则会投放另一个广告。

我前段时间开发了一个基于共享偏好的静态函数，它不允许应用在 X 秒内以超过一次的速度请求广告。这解决了你的问题！没有。

我的大多数应用程序都有 4 或 5 个活动，其中一个显示 80-90% 的时间。我不希望广告成为显示 2 或 3 秒的活动的服务器，然后我不会在主要活动中要求另一个广告，因为我仍然需要再等待 57 秒。

我想知道你们是如何解决这个问题的，我不能成为唯一想要“与之抗争”的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:23:25.267

最简单的解决方案（也是一个很好的启发式方法）是仅在 80-90% 的时间显示的活动中显示广告。如果用户只在您的一项活动中停留 2-3 秒，那么他们很可能并不想点击该活动中的广告。为您的用户做正确的事，不要在您的应用程序的主菜单或设置菜单中使用广告来惹恼他们。

# iphone - iPhone 模拟器可以与 SkyDrive SDK 一起使用吗？

> ID：13753420
> 
> 赞同：0
> 
> 时间：2012-12-06T22:01:42.873
> 
> 标签：iphone, onedrive

鉴于 Safari 可以在 iPhone 模拟器上运行……而且我无法从 iPhone 模拟器发送电子邮件并且需要真正的 iPhone……

..SkyDrive SDK 是否可以在 iPhone 模拟器上运行，或者我是否需要真正的 iPhone 来试验开发 Skydrive 应用程序？

我确实尝试过使用微软的代码片段。结果是这样的：

```
2012-12-07 17:40:29.875 SkyDriveTest[490:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/..../Library/Application Support/iPhone Simulator/6.0/Applications/32377034-803E-4913-A13F-08E723DCDA5E/SkyDriveTest.app> (loaded)' with name 'LiveAuthDialog_iPhone'' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:09:22.583

让“Live SDK Test Bed”示例项目工作。一旦指定了客户端 ID，它就可以工作 - 所以是的，您可以在 iPhone 模拟器上使用 Skydrive API。

# php - 我想将标题标签的内容重复到 html 文档本身

> ID：13753421
> 
> 赞同：0
> 
> 时间：2012-12-06T22:01:44.990
> 
> 标签：php, html

我想将标题标签的内容重复到 html 文档本身中。我可以找到有关如何将 html 提取到标题标签中的信息，但反之则不行

我正在对 html 文档标题中设置的标题标签进行硬编码，并希望在服务器端运行，

```
<title>a title i want to repeat in html</title> 
```

但在标题下方，我希望能够在文本区域内的页面上打印相同的内容。我只想展示这个...

我想在 html 中重复的标题

我找不到确切的方法。像这样的东西？

```
<?php echo $title;?> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:22:15.423

不确定您到底要什么，但在 javascript 中，您可以使用`document.title;`.

如何使用 javascript 设置标题的示例：

`<script type="text/javascript"> document.title = "Something"; </script>`

使用 javascript 将 html 编辑为标题的示例：

**HTML**

`<div id="something"></div>`

**Javascript**

`<script type="text/javascript"> document.getElementById("something").innerHTML = document.title; </script>` 而且由于 php 标签也在这个问题上：

`<?php echo $var; ?>`

这会将变量“$var”打印到网页上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:28:47.217

最好使用 PHP：

```
<?php $title = 'a title i want to repeat in html' ?>

<title><?php echo $title; ?></title>

<?php echo $title; ?> 
```

# javascript - 在 Vim 缓冲区中设置快速修复箭头的颜色

> ID：13753427
> 
> 赞同：0
> 
> 时间：2012-12-06T22:01:57.547
> 
> 标签：javascript, plugins, vim

`==`当我犯下使用而不是`===`，Vim 或它的小脚本的主要罪行时，会打开带有一些有用提示的快速修复窗口。使用[vim-hier](https://github.com/jceb/vim-hier)，我将错误的行以红色突出显示。如何进一步将相邻的箭头染成红色？

TL;博士

是）我有的

![丑陋的黄色箭头](../Images/12b8965f5c02249b751189a55300698f.png)

我想要的是

![超级惊人的红色箭头](../Images/03879bd75d2c19da9e10243752f7c094.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:17:07.720

那是`Error`亮点组。您可以直接在您的配色方案中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:47:08.167

经过几个小时的修补，我终于找到了它。是这个`Todo`团队为我做的。但是，我不知道这是否是直接的，或者其他组是否使用它。无论如何，只有在我从`.vimrc`文件中更改它时它才对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-23T20:42:45.680

错误标记的颜色`>>`更可能归结于 Syntastic 插件（因为它使用`todo`语法组来[标记语法警告](https://github.com/scrooloose/syntastic/blob/master/doc/syntastic.txt#L141)）而不是 Hier 插件（它不使用 ToDo 语法组名称来为其元素着色）。另请参阅有关 Syntastic 标记的含义的[相关问题。](https://stackoverflow.com/questions/14264635/what-do-these-red-arrows-in-vim-mean)

# ruby-on-rails - 自动列出所有 Rspec 示例

> ID：13753435
> 
> 赞同：1
> 
> 时间：2012-12-06T22:02:47.097
> 
> 标签：ruby-on-rails, rspec

是否有任何现有的工具或命令可以自动列出应用程序中的每个示例？

例如，如果我有...

**/spec/apple_spec.rb：**

```
describe Apple do
  it "should be round" do
    @apple.shape.should == "round"
  end
  it "should be red" do
    @apple.colour.should == "red"
  do
end 
```

**/spec/banana_spec.rb：**

```
describe Banana do
  it "should be bent" do
    @banana.shape.should == "bent"
  end
  it "should be yellow" do
    @banana.colour.should == "yellow"
  end
end 
```

...然后我正在寻找的工具或命令会产生类似的东西：

```
apple_spec.rb
  - describe apple
    - it should be round
    - it should be red
banana_spec.rb
  - describe banana
    - it should be bent
    - it should be yellow 
```

查看此输出将帮助我确认我已经测试了所有对我很重要的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:33:08.103

设置`format=documentation`将为所有示例生成格式良好的输出，通过和失败。您可以在命令行上执行此操作：

`rspec --format=documentation`

或者将设置添加到`.rspec`项目根目录中的配置文件中。

# python - 错误属性 %s 不是多行的

> ID：13753436
> 
> 赞同：3
> 
> 时间：2012-12-06T22:02:47.907
> 
> 标签：python, html, django, datastore

我的应用程序因为`%s`（至少，这是我的想法）而出现错误，但我不知道为什么。我已更改为 django 代码以尝试将数据获取到 html 模板。正在加载模板，但未导入数据。该应用程序确实在本地运行，但模板未加载数据，并且在服务器上我收到此错误：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~ceemee11111/1.363684484611202021/helloworld.py", line 37, in get
    for greeting in greetings:
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2314, in next
    return self.__model_class.from_entity(self.__iterator.next())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1442, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 974, in __init__
    prop.__set__(self, value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2823, in validate
    raise BadValueError('Property %s is not multi-line' % self.name)
BadValueError: Property content is not multi-line 
```

你好世界.py：

```
import cgi
import datetime
import urllib
import webapp2
import os

from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext.webapp import template

class Greeting(db.Model):
  """Models an individual Guestbook entry with an author, content, and date."""
  author = db.StringProperty()
  content = db.StringProperty(multiline=False)
  content2 = db.StringProperty(multiline=False)
  date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
  """Constructs a Datastore key for a Guestbook entity with guestbook_name."""
  return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.out.write('<html><body>')
    guestbook_name=self.request.get('guestbook_name')

    greetings = db.GqlQuery("SELECT * "
                        "FROM Greeting "
                        "WHERE ANCESTOR IS :1 "
                        "ORDER BY date DESC LIMIT 10",
                        guestbook_key(guestbook_name))

    for greeting in greetings:
      if greeting.author:
        self.response.out.write(
            '<b>%s</b> wrote:' % greeting.author)
      else:
        self.response.out.write('An anonymous person wrote:')

      self.response.out.write(template.render('myhtml.html', {'guestbook_name': guestbook_name}))

class Guestbook(webapp2.RequestHandler):
  def post(self):
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
      greeting.author = users.get_current_user().nickname()

    greeting.content = self.request.get('content')
    greeting.put()
    self.redirect('/?' + urllib.urlencode({'guestbook_name': guestbook_name}))

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

我的html.html：

```
<!DOCTYPE html>
  <html>
    <body>
      <form action="/sign?{{ guestbook_name }}" method="post">
       <div id="dataImput">
        <div><div><input type="text" name="content"</div>
        <div><div><input type="text" name="content2"</div>
      </div> 
      <script>
        document.write("<h1>This is heading</h1>");

      </script>
        <div><input type="submit" value="Sign Guestbook"></div>
      </form>
      <form>Guestbook name: <input value="{{ guestbook_name|escape }}" name="guestbook_name">
  <input type="submit" value="switch"></form>
  <hr>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:16:14.253

我对谷歌应用引擎一无所知（但我知道 django）。您在模型中使用的类型与您在模板中使用的表单类型之间似乎存在冲突：

[类 StringProperty(verbose_name=None, multiline=False, ...)](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#StringProperty)

> 如果 multiline 为 False，则该值不能包含换行符。djangoforms 库使用它来强制区分数据模型中的文本字段和 textarea 字段，其他人可以将其用于类似目的。

回溯中重要的实际错误行是：

```
BadValueError: Property content is not multi-line 
```

“内容”是指您的模型属性。

对我来说，这表明您需要执行以下选项之一...

**1）**更改您的模型以接受从 textarea 表单字段传递的多行值：

```
class Greeting(db.Model):
...
  content = db.StringProperty(multiline=True)
  content2 = db.StringProperty(multiline=True)
... 
```

**2）**或将您的 textarea 表单字段更改为模板中的文本字段：

```
 <div><input type="text" name="content"></div>
    <div><input type="text" name="content2"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:16:24.980

这是用于加载模板的代码（仅供参考）。感谢大家让我在 Django/Python 编码中达到这一点。没有你不可能做到！

```
import cgi
import datetime
import urllib
import webapp2
import os

from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext.webapp import template

class Greeting(db.Model):
  """Models an individual Guestbook entry with an author, content, and date."""
  author = db.StringProperty()
  content = db.StringProperty(multiline=True)
  content2 = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
  """Constructs a Datastore key for a Guestbook entity with guestbook_name."""
  return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):
  def get(self):
    guestbook_name=self.request.get('guestbook_name')
    greetings_query = Greeting.all().ancestor(
        guestbook_key(guestbook_name)).order('-date')
    greetings = greetings_query.fetch(3)

    if users.get_current_user():
        url = users.create_logout_url(self.request.uri)
        url_linktext = 'Logout'
    else:
        url = users.create_login_url(self.request.uri)
        url_linktext = 'Login'

    template_values = {
        'greetings': greetings,
        'url': url,
        'url_linktext': url_linktext,
    }

    path = os.path.join(os.path.dirname(__file__), 'index.html')
    self.response.out.write(template.render(path, template_values))

class Guestbook(webapp2.RequestHandler):
  def post(self):
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
      greeting.author = users.get_current_user().nickname()

    greeting.content = self.request.get('content')
    greeting.put()
    self.redirect('/?' + urllib.urlencode({'guestbook_name': guestbook_name}))

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

和 index.html 代码：

```
 <html>
    <body>
        {% for greeting in greetings %}
          {% if greeting.author %}
        <b>{{ greeting.author }}</b> wrote:
      {% else %}
        An anonymous person wrote:
      {% endif %}
      <blockquote>{{ greeting.content|escape }}</blockquote>
    {% endfor %}

<form action="/sign" method="post">
  <div><textarea name="content" rows="3" cols="60"></textarea></div>
  <div><input type="submit" value="Sign Guestbook"></div>
</form>

<a href="{{ url }}">{{ url_linktext }}</a>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:54:05.997

我不确切知道我是如何解决这个问题的，但是这段代码的工作原理是错误消失了。我将这个作为关于 %s 错误的信息发布给任何人，因为模板仍然无法正常工作

担

```
import cgi
import datetime
import urllib
import webapp2
import os

from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext.webapp import template

    class Greeting(db.Model):
  """Models an individual Guestbook entry with an author, content, and date."""
  author = db.StringProperty()
  content = db.StringProperty(multiline=True)
  content2 = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
  """Constructs a Datastore key for a Guestbook entity with guestbook_name."""
  return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.out.write('<html><body>')
    guestbook_name=self.request.get('guestbook_name')

    greetings = db.GqlQuery("SELECT * "
                        "FROM Greeting "
                        "WHERE ANCESTOR IS :1 "
                        "ORDER BY date DESC LIMIT 10",
                        guestbook_key(guestbook_name))

    for greeting in greetings:
      if greeting.author:
        self.response.out.write(greeting.author)

      else:
        self.response.out.write('An anonymous person wrote:')
    self.response.out.write(template.render('myhtml.html', {'guestbook_name': guestbook_name}))

class Guestbook(webapp2.RequestHandler):
  def post(self):
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
      greeting.author = users.get_current_user().nickname()

    greeting.content = self.request.get('content')
    greeting.put()
    self.redirect('/?' + urllib.urlencode({'guestbook_name': guestbook_name}))

 app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

myhtml.html 代码：

```
<!DOCTYPE html>
  <html>
    <body>
      <form action="/sign?%s" method="post">
        <div><textarea name="content" rows="3" cols="60"></textarea></div>
        <div><input type="submit" value="Sign Guestbook"></div>
      </form>
          <script>
          document.write("<h1>This is heading</h1>");

          </script>

    </body>
  </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T07:14:27.507

我有同样的问题，改变这些行：

```
content = db.StringProperty(multiline=True)
content2 = db.StringProperty(multiline=True) 
```

对于那些：

```
content = db.TextProperty()
content2 = db.TextProperty() 
```

# java - 浮动变量错误答案

> ID：13753438
> 
> 赞同：0
> 
> 时间：2012-12-06T22:02:49.840
> 
> 标签：java

> **可能重复：**
> [Java：计算返回错误答案？](https://stackoverflow.com/questions/13020297/java-calculations-returning-wrong-answer)

请解释为什么以下程序没有给出正确的输出。

```
class Test
{
    public static void main(String aa[])
    {
        float a=16.15 f;
        float b =10.0f;

        float c =a-b;
        System.out.println(c);
    }
} 
```

/****************/ 输出：-6.1499996

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:06:21.657

[根据http://en.wikipedia.org/wiki/IEEE_floating-point_standard](http://en.wikipedia.org/wiki/IEEE_floating-point_standard)，问题在于浮动本身，而不是您的代码

对于这种情况，请考虑使用`double`s 或`BigDecimal`s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:04:38.390

这是浮点数无法准确存储*十进制*值的完全正常结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:05:53.697

因为浮点数，以 2 为底数不能完全表示 16.15，因此减法的结果不完全是 -6.15。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T22:04:43.243

该类型`float`没有足够好的精度来返回 -6.15。`double`可能还不够，浮点计算总是有一些误差范围。

# javascript - 使用 jQuery 在太长的标题中添加中断

> ID：13753439
> 
> 赞同：0
> 
> 时间：2012-12-06T22:02:53.353
> 
> 标签：javascript, jquery, string

使用 jquery，我想遍历一个父 div 内的所有 h3 标签。可以有 1 个或多个。我必须检查每个标题以确保它不超过 35 个带空格的字符。如果是，我必须`<br>`在第 35 个字符（也是第 70、第 105 等）之后放置一个。

在我们对生成标题的脚本进行永久性更改之前，这是一个快速而肮脏的修复。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:06:39.407

改用 CSS，并使用 35ex 表示 35 个字符。

[http://jsfiddle.net/EPft9/](http://jsfiddle.net/EPft9/)

```
div.parent h3 {
    max-width: 35ex; //Which should give you 35 characters.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:11:26.837

**方法1：（**没有子字符串）

您可以在每个标题内包装一个 div，并使用 css 强制 div 宽度换行。

**演示：http:** [//jsfiddle.net/2c4J6/2/](http://jsfiddle.net/2c4J6/2/)

**JS：**

```
$('h3').wrapInner('<div class="limitHeader" />'); 
```

**CSS：**

```
.limitHeader {
    width: 360px; /* Update as your font-style*/
    word-wrap: break-word;
} 
```

**方法2：（**使用子字符串）

方法1可能不可靠，因为每个字符的宽度不同。因此，如果您真的希望它具有精确的 35 个字符，请尝试如下所示的简单迭代，

**演示：http:** [//jsfiddle.net/2c4J6/](http://jsfiddle.net/2c4J6/)

```
$('h3').html(function(idx, v) {
    if (v.length > 35) {
        var result = '';
        for (var i = 0; i < (v.length / 35); i++) {
           result += v.substr(35*i, 35) + '<br/>';
        }
        return result;
    }
    return v;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:10:56.573

更好的解决方案是使用纯 Javascript：

```
function fixHeader(el) {
var elements = el.getElementsBYTagName("h3");

    for (x in elements) {
        fixHtml(elements[x]);
    }
}

function fixHtml(el) {
var html = "",
    j = 0;

    for (var i = 0; i < el.innerHTML.length; i++) {
        html += el.innerHTML[i];

        if (j > 35) {
            html += "<br />";
            j = 0;
        }

        j++;
    }
} 
```

您可以通过调用 fixHeader(yourElement) 来使用此函数。

更好的解决方案当然是 CSS。你可以创建一个具有宽度的内部元素。

```
<div>
    <div style="width:100px;">My superduper long text which is absolutely to long and definitly needs breaks.</div>
</div> 
```

您可以通过增加宽度来调整字符数。

如果你真的喜欢使用 jQuery...：

```
$(el).find("h3").each(function() {
    var html = $(this).html(),
    j = 0,
    new_html = "";

    for (var i = 0; i < html.length; i++) {
        new_html += html[i];

        if (j > 35) {
            new_html += html[i];
            j = 0;
        }

        j++;
    }

    $(this).html(new_html);
}); 
```

# uitableview - 辅助功能 VoiceOver - 当用户向下滚动列表时，UITableView 不断跳到表格顶部

> ID：13753440
> 
> 赞同：4
> 
> 时间：2012-12-06T22:02:59.603
> 
> 标签：uitableview, accessibility, voiceover

我已经实现了一个 UITableView 并用一个长长的数据列表填充了它。启用 VoiceOver 后，当用户尝试向下滚动屏幕以查看超出屏幕底部的单元格时，表格会不断跳回顶部并重新开始阅读。

我找不到它这样做的任何原因，该表在禁用 VoiceOver 的情况下正常运行。

谢谢，林恩

# html - 第一个完成后如何播放第二个 CSS 动画

> ID：13753441
> 
> 赞同：2
> 
> 时间：2012-12-06T22:02:59.610
> 
> 标签：html, css, animation

我遇到了一个问题。我只是想，一旦一个 CSS3 动画完成，让我的下一个动画开始（最好是淡入）

这是第一个动画代码：

```
#truck {
position: absolute;
margin-top:90px;

-moz-animation: slide 4s;
-webkit-animation: slide 4s;
-ms-animation: slide 4s;
animation: slide 4s;
animation-fill-mode: forwards;
-webkit-animation-fill-mode: forwards;
}

@keyframes slide {
0% { left: 0px; }
35% { left: 250px; }
65% { left: 250px; }
100% { left:590px; }
}

@-webkit-keyframes slide {
0% { left: 0px; }
35% { left: 250px; }
65% { left: 250px; }
100% { left:590px; }
}

@-ms-keyframes slide {
0% { left: 0px; }
35% { left: 250px; }
65% { left: 250px; }
100% { left:590px; }
} 
```

如果有人可以帮助我完成第二个动画以及如何在第一个动画完成后调用它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:07:20.383

我认为您可以使用延迟：

```
animation-delay:4s;
-moz-animation-delay:4s; /* Firefox */
-webkit-animation-delay:4s; /* Safari and Chrome */
-o-animation-delay:4s; /* Opera */ 
```

（调整数字以适应）

# php - Wordpress 标题...在标题中找到标签并将 Span / CSS 添加到仅匹配的标签中

> ID：13753447
> 
> 赞同：0
> 
> 时间：2012-12-06T22:03:14.740
> 
> 标签：php, arrays, wordpress, preg-replace

我试图找到任何包含标签和`preg_replace`匹配标签的标题，所以`span`它周围有一个（加粗标签）。

这就是我到目前为止所拥有的......以下代码只是将 the_tags() 添加到标题的末尾。我不太擅长 Wordpress，我知道这可能是因为该`the_tags()`函数包含其他代码，例如“Tagged:”和“&mindot;”。

```
 <h2 class="entry-title">
            <a href="<?php the_permalink(); ?>" rel="bookmark" title="Permalink to <?php the_title(); ?>">
                <?php 
                    $title = the_title();
                    $tags = array(the_tags());
                    $tag = implode(' ',$tags);
                    $displaytitle = preg_replace($tag, '<span class="larger">$tag</span>', $title);

                    echo $displaytitle;

                ?>
            </a>
        </h2> 
```

任何帮助将不胜感激。在此先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:27:23.443

不要内爆。

```
foreach($tags as $tag) {
    $displaytitle = preg_replace($tag, "<span class=\"larger\">$tag</span>", $title);
} 
```

应该做的伎俩。使用双引号来评估里面的变量。

# android - Android：FragmentStatePagerAdapter Activity 已被销毁 - 向上或向后导航

> ID：13753450
> 
> 赞同：0
> 
> 时间：2012-12-06T22:03:33.570
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

我正在使用游标加载器在活动中创建选项卡。我正在使用 android View Pager 文档中详述的可滑动标签。
[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

到目前为止，我还没有实现将任何加载到后台堆栈的页面，因此当我单击返回时，它会跳转到上一个活动。（现在这很好。）单击后退或向上按钮会导致运行时异常`java.lang.RuntimeException: Unable to destroy activity: java.lang.IllegalStateException: Activity has been destroyed`

我所知道的与示例之间的唯一区别是光标的使用，并且示例将 ViewPager 本身设置为内容视图，而我使用了包含 ViewPager 的布局文件。我也在使用 FragmentStatePagerAdapter 而不是 FragmentPagerAdapter，但是在这两者之间切换没有任何区别。

我不确定android onDestroy 调用中的什么会尝试两次破坏活动。我的代码如下。任何帮助表示赞赏，我很乐意提供更多信息。谢谢。

```
public class WorksheetActivity extends FragmentActivity implements android.support.v4.app.LoaderManager.LoaderCallbacks<Cursor> {
public String user;
private static final int DAY_LOADER = 0;
public int program_index;
public int program_id;
public int item_id;
public int type_key;
ViewPager mViewPager;
TabsAdapter mTabsAdapter;
LoaderManager.LoaderCallbacks<Cursor> mCallbacks;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_worksheet);
    mCallbacks = this;
    ActionBar bar = getActionBar();
    //this sets up to include tabs, and to show the title on each tab
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    //enables navigation up, when clicked calls on options item selected for home button. 
    bar.setDisplayHomeAsUpEnabled(true);
    Bundle extras = getIntent().getExtras();
    if (!(extras.isEmpty())){
        user = extras.getString("user");
        //used for moving up to the Program Activity and restoring the selection. 
        program_index = extras.getInt(ProgramActivity.PROGRAM_KEY);
        program_id = extras.getInt(ProgramActivity.PROGRAM_ID);
        item_id = extras.getInt(ProgramActivity.ITEM_ID);
        type_key = extras.getInt(ProgramActivity.TYPE_KEY);
    }
    Bundle tabData = new Bundle();
    tabData.putAll((extras.isEmpty()? savedInstanceState : extras));
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mTabsAdapter = new TabsAdapter(this, mViewPager, null, tabData);
    LoaderManager lm = getSupportLoaderManager();
    lm.initLoader(0, tabData, mCallbacks);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_worksheet, menu);
    return true;
}

@Override
public void onSaveInstanceState(Bundle out){
    out.putString("user",user);
    //used for moving up to the Program Activity and restoring the selection. 
    out.putInt(ProgramActivity.PROGRAM_KEY, program_index);
    out.putInt(ProgramActivity.ITEM_ID, item_id);
    out.putInt(ProgramActivity.PROGRAM_ID, program_id);
    out.putInt(ProgramActivity.TYPE_KEY, type_key);
}

@Override
public void onRestoreInstanceState(Bundle in){
    user = in.getString("user");
    program_index = in.getInt(ProgramActivity.PROGRAM_KEY);
    program_id = in.getInt(ProgramActivity.PROGRAM_ID);
    item_id = in.getInt(ProgramActivity.ITEM_ID);
    type_key = in.getInt(ProgramActivity.TYPE_KEY);
}

@SuppressLint("NewApi")
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            Intent upIntent = new Intent(this, ProgramActivity.class);
            upIntent.putExtra("user", user);
            upIntent.putExtra(ProgramActivity.PROGRAM_KEY, program_index);
            if (NavUtils.shouldUpRecreateTask(this, upIntent)){
                TaskStackBuilder.create(this)
                    .addNextIntent(new Intent(this, Marta_QC.class))
                    .addNextIntent(upIntent).startActivities();
                finish();
            }else{
                NavUtils.navigateUpTo(this, upIntent);
            }
            return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {
    CursorLoader cl = null;
    switch(id){
        case DAY_LOADER:
            cl = new CursorLoader(getApplicationContext(), Tasks.CONTENT_URI, new String[]{Tasks.DAY_COL},Tasks.PROGRAM_COL+" = ?",
                                    new String[]{Integer.toString(program_id)}, Tasks.DAY_COL+" ASC");
            break;
        default:
    }
    return cl;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor c) {
    switch(loader.getId()){
        case DAY_LOADER:
            mTabsAdapter.swapCursor(c);
            break;
        default:
    }
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    switch(loader.getId()){
    case DAY_LOADER:
        mTabsAdapter.swapCursor(null);
        break;
    default:
}

}

public static class TabsAdapter extends FragmentStatePagerAdapter
    implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    private Bundle mArgs;
    private int currentPosition;

    static final class TabInfo{
        private final Class<?> clss;
        private final Bundle args;
        public final int position;
        TabInfo(Class<?> _class, Bundle _args, int _position){
            clss = _class;
            args = _args;
            position = _position;
        }
    }

    public TabsAdapter (FragmentActivity activity, ViewPager pager, Cursor days, Bundle args){
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
        mArgs = args;
    }

    public void swapCursor(Cursor c){
        mActionBar.removeAllTabs();
        mViewPager.removeAllViews();
        //add the exceptions tab.  Always first.
        ActionBar.Tab tab = mActionBar.newTab();
        Bundle tabArgs = new Bundle();
        tabArgs.putAll(mArgs);
        this.addTab(tab, ExceptionsSheet.class, tabArgs);

        //add each of the day tabs to the set, which stores unique values only
        LinkedHashSet<String> days = new LinkedHashSet<String>();
        if(c.moveToFirst()){
            do{
                days.add(c.getString(c.getColumnIndex(Tasks.DAY_COL)));
            }while (c.moveToNext());
        }
        //iterate through the unique days
        for(String day:days){
            ActionBar.Tab dayTab = mActionBar.newTab();
            Bundle dayArgs = new Bundle();
            dayArgs.putAll(mArgs);
            dayArgs.putString("day", day);
            this.addTab(dayTab, Worksheet.class, dayArgs);
        }
        //start with the first day
        mActionBar.setSelectedNavigationItem(1);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args){
        //implemented adding a position to the tab info class.  
        //gets the current tab count prior to adding this tab. 
        TabInfo info = new TabInfo(clss, args, this.getCount());
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        if (clss.equals(ExceptionsSheet.class)){
            //tab.setCustomView(R.layout.exceptions_tab);
            tab.setText(mContext.getText(R.string.exceptions_tab_title));
        }else{
            if(clss.equals(Worksheet.class)){
                tab.setText("Day "+args.getString("day"));
            }else{
                Log.d("unknown class", clss.toString());
            }

        }
        mActionBar.addTab(tab);
        notifyDataSetChanged(); 
    }

    @Override
    public void onPageSelected(int pos) {
        // set the tab to match the page, following a swipe action.
        currentPosition = pos;
        mActionBar.setSelectedNavigationItem(pos);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        //this will return our tab info
        TabInfo minfo = (TabInfo) tab.getTag();
        int pos = minfo.position;
        this.getItem(currentPosition);
        mViewPager.setCurrentItem(pos);
        currentPosition = pos;  
    }

    //this is the FragmentPager Adapter main method
    //here we will use the arguments bundled into the tab to set the
    //fragment for the page. 
    @Override
    public Fragment getItem(int pos) {
        TabInfo tabInfo = mTabs.get(pos);
        return Fragment.instantiate(mContext, tabInfo.clss.getName(), tabInfo.args);
    }

}

//class for exceptions display
public static class ExceptionsSheet extends Fragment{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        int i = 1;
        i = i+1;
        //must include false, since we're attaching to the ViewPager sheet, not the root view.
        return inflater.inflate(R.layout.exception, container, false);
    }
}

//class for standard worksheet display
public static class Worksheet extends Fragment{
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        return inflater.inflate(R.layout.worksheet, container, false);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:44:21.417

我发现了问题。当 Activity 被销毁时，会调用 onLoaderReset() 方法。在这里，我交换了一个空游标以删除对游标的引用（与非自定义适配器一样），但我的 swapCursor 方法没有检查游标是否为空。一旦我解决了这个问题，代码就不再尝试在活动被销毁后更新 UI。

# haskell - 究竟是什么意思“函子内的功能”

> ID：13753454
> 
> 赞同：9
> 
> 时间：2012-12-06T22:03:43.440
> 
> 标签：haskell, category-theory

在范畴论中，*函子*是两个范畴之间的同态。在 Haskell 中，据说*应用函子*允许我们在*“函子内部”*应用函数。*有人可以将“函子内部的函数”*这个词翻译回数学或提供其他一些见解吗？（我知道函子可以是`Maybe`，`[]`等等，但仍然很难理解这个概念。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T02:34:38.687

我的范畴论一点都不强（我是从 Haskell 的编程方面开始的，最近一直在尝试学习它的一些概念的范畴论基础）。但这就是我所拥有的：

在 Haskell 中，仿函数是类型构造函数，这意味着它从一般类型映射到“仿函数中的类型”。

在范畴论中，函子从一个范畴的对象映射到另一个范畴的对象。

当将范畴理论应用于 Haskell 时，我们假设我们正在使用范畴**Hask**，即 Haskell 类型的范畴。

所以 Haskell 函子不是一般范畴论的函子。它们都从**Hask映射到****Hask**的子类别（因为`f a`某些函子`f`和任意类型`a`的类型*仍然*是 Haskell 类型）。例如，函子将**Hask**`Maybe`中的对象（类型）映射到 form 的类型类别。**`Maybe a`**

 **函数在 Haskell 中是一等的，所以函数类型是完全普通的类型（并且是**Hask**的对象），所以函子*也*将函数类型映射到“函子中的函数类型”。因此，短语“函子内的函数”是一种类型中的*值*的简写，该类型是通过将函子应用于函数类型而产生的。eg`Just (+1)`是类型中的一个特定值`Maybe (Int -> Int)`，它是`Maybe`仿函数映射到的对象（类型） `Int -> Int`。

因此，“应用函子”是一个具有一些额外规则的函子，这些规则足以获取作为函子“目标”类别对象的类型中的函数的*值*，并将这些值应用于目标类别中的其他类型值.

再次`Maybe`举个例子，如果我们只知道它是一个函子，它给了我们对象`Int -> Char`与`Maybe (Int -> Char)`之间、对象`Int`与`Maybe Int`之间以及对象`Char`与之间的对应关系`Maybe Char`。但是，虽然我们有能力接受一个值 in`Int -> Char`和一个值 in`Int`并产生一个值 in `Char`，`Maybe`但作为一个函子并不能保证我们有能力对一个值 in`Maybe (Int -> Char)`和一个值 in进行一些相应的操作`Maybe Int`。

当我们也知道它是一个应用函子时，我们确实有能力接受一个值 in`Maybe (Int -> Char)`和一个值 in`Maybe Int`并产生一个值 in `Maybe Char`，这满足了将`Int -> Char`值应用于`Int`值的某些属性。

据我所知，从纯范畴论的角度来看，应用函子并不是很有趣。*也许这是因为范畴论关注对象*之间的关系，这对应于 Haskell 中的类型，但从编程的角度来看，应用函子是由这些类型中的*值*之间的关系驱动的？（我们希望使用仿函数获得的“函数类型”中的值仍然能够应用于进行计算的事物）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T07:58:49.080

**翻译回数学**

在一个封闭的幺半群范畴中，有一个“指数”的概念，它“内化”了态射关系。然后，您可以评估这些指数。也就是说，您有一种说法（请原谅我的想法，Stackoverflow 缺少 mathjax）

```
eval : (a ~> b,a) -> b 
```

以及用于currying和uncurrying的元操作。
“应用函子”以“适用”方式映射指数，`F (a ~> b)`可以与 a 组合`F a`以获得`F b`. 这是因为应用函子是单曲面函子，所以它们有一个操作（在目标类别中）

```
f a -> f b -> f (a,b) 
```

当您还 fmap eval 时，它会`ap`从 Haskell 给您。

我怀疑这是否有用，

**哈斯克尔**

理解应用函子的最好方法是查看类型

```
class Functor f => Applicative f where
  pure :: a -> f a
  <*>  :: f (a -> b) -> f a -> f b 
```

一个简单的例子是

```
newtype Id a = Id a
instance Applicative Id where
  pure a = Id a
  Id f <*> Id a = Id (f $ a) 
```

`Id`也是一个`Monad`。事实上，所有`Monad`的 s 都是`Applicative`。

```
pure = return
mf <*> mx = do f <- mf
               x <- mx
               return (f x) 
```

一个更有趣的例子是无限序列

```
data Seq a = Seq a (Seq a)
instance Applicative Seq where
  pure a = Seq a (pure a)
  (Seq f fs) <*> (Seq x xs) = Seq (f x) (fs <$> xs) 
```

您可以将其视为等同`zipWith $`于列表。所有`Monad`s 都是`Applicative`，但我认为无限序列很有趣，因为相应的 monad 实例......不明显（而且相当慢）。它将作为练习留给读者（顺便说一句，我正在从我记得读过的东西中锻炼这个例子/练习，我认为 pigworker 写在这个网站上）。**

# compiler-construction - 是否有什么阻止 GPU 开发人员实现（几乎）完全驻留在 GPU 上的操作系统？

> ID：13753456
> 
> 赞同：2
> 
> 时间：2012-12-06T22:03:58.707
> 
> 标签：compiler-construction, cuda, operating-system, opencl, gpu

在过去十年中，GPU 变得越来越通用。最近有相当多的研究成功地将非结构化和基于指针的算法（[广度优先搜索](http://developer.download.nvidia.com/GTC/PDF/GTC2012/PresentationPDF/S0600-GTC2012-GPU-Graph-Traversal.pdf)和[安徒生的点分析](http://clip.dia.fi.upm.es/~mario/files/ppo112-mendezlojo.pdf)都是很好的例子）移植到 GPU 环境中。很快，我们应该会看到越来越多的图形算法用于自适应网格细化和社交网络，它们也在 GPU 环境中执行。

这一趋势的另一个步骤将涉及更复杂的代码结构，例如编译器甚至操作系统。据我所知，在这个领域（目前）还没有做太多的工作。传统观点告诉我们，许多操作系统代码（至少目前的情况）不适合并行环境，因为它本质上是串行的、基于指针的等；然而，多年前我们会错误地将类似的论点用于像 BFS 这样的算法。

考虑到我们目前拥有的工具，我更感兴趣的是目前是否可以实现操作系统或编译器，而不是为什么没有（或不会）完成。我想这是可以做到的，但需要对算法进行巨大的改变。希望这会产生一个很好的讨论。

一个额外的，有点相关的想法：对精确异常的支持是否会成为操作系统案例的一个特别困难的障碍？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:08:56.653

操作系统不是计算密集型的，它主要是基于 IO 的。因此，使用 GPU 并没有什么好处。此外，这些 IO 操作中的大多数，如磁盘控制、键盘输入……目前都无法使用 GPU。考虑内存管理，设备-主机通信甚至不够快，无法实现实用的分页算法。添加这个需要从 CPU 到 GPU 来回移动页面。更有可能将 UI shell 和实用程序等用户级工具移至 GPU 端。

# substring - 如何在字符串中查找字符

> ID：13753463
> 
> 赞同：1
> 
> 时间：2012-12-06T22:04:34.777
> 
> 标签：substring, indexof

我正在尝试使用 textbox1 中的字符串并查找第三个“e”并告诉它的索引，例如，如果有人输入奶酪，那么它的索引

到目前为止，我有

```
Dim word As String = TextBox2.Text
Dim x As String
Dim counter As Integer
Dim Letter As String
Dim word1 As String
x = 0
word1 = word.ToLower()
Do
    If word1.Substring(x, 1) = "e" Then counter = counter + 1 And x = x + 1
Loop Until counter = 3 Or counter <> 3
If counter <> 3 Then MsgBox("There are only " & counter & "e's in the inputted string") Else ListBox2.Items.Add(Letter) 
```

# python - Python中的井字游戏（图形窗口）

> ID：13753468
> 
> 赞同：2
> 
> 时间：2012-12-06T22:04:50.257
> 
> 标签：python, tic-tac-toe

我必须编写的程序不是通用的井字游戏，而是用户可以决定窗口大小和每边有多少个正方形。

我无法让 X 和 O 显示在每个正方形的中心。我可以得到正确数量的 X 和 O 以相对于正方形的数量出现，但不能让它们显示在每个正方形的中心。这是我到目前为止所拥有的

```
from graphics import *

import sys

def tic_tac_toe_o(win, center):
    '''
    Circle the winner's photo
    Parameters:
    - win: the window
    - winner_center: the center of the winner's picture (as a Point)
    '''
    outline_width = 5
    circle = Circle(center, boxsize/2)
    circle.setOutline('red')
    circle.setWidth(outline_width)
    circle.draw(win)

def tic_tac_toe_x(win, p1x, p1y):
    '''
    Cross out the loser's photo
    Parameters:
    - win: the window
    - loser_center: the center of the loser's picture (as a Point)
    '''
    for i in range(2):
        deltaX = (-1) ** i * (boxsize / 2)
        deltaY = (boxsize / 2)
        line = Line(Point(p1x - deltaX, p1y - deltaY),
                 Point(p1x + deltaX, p1y + deltaY))
        line.setFill('red')
        line.setWidth(5)
        line.draw(win)

def main():

    global win
    global boxsize

    try:
        windowsize = int(input("Size of window to draw?: "))
        if windowsize < 100 or windowsize > 2000:
            print("Error: invalid window size")
            quit()

        squares = int(input("How many squares per side?: "))
        boxsize = windowsize/ squares
        if squares < 3 or squares > windowsize / 10:
            print("Error: invalid number")
            quit()
    except ValueError:
        sys.exit("not a valid number")

    win = GraphWin("Tic Tac Toe", windowsize, windowsize)

    for i in range(squares - 1):
        hline = Line(Point(0, (windowsize/squares) * (i + 1)), Point(windowsize,  (windowsize/squares) * (i + 1)))
        hline.draw(win)
        vline = Line(Point((windowsize/squares) * (i + 1), 0), Point((windowsize/squares) * (i + 1), windowsize))
        vline.draw(win)

    for i in range((squares ** 2) // 2):

        print("Player 1: click a square.")
        p1mouse = win.getMouse()
        p1x = p1mouse.getX()
        p1y = p1mouse.getY()
        tic_tac_toe_x(win, p1x, p1y)

        print("Player 2: click a square.")
        p2mouse = win.getMouse()
        p2x = p2mouse.getX()
        p2y = p2mouse.getY()
        tic_tac_toe_o(win, Point(p2x, p2y))

    if squares % 2 == 1:
        print("Player 1: click a square.")
        p1mouse = win.getMouse()
        p1x = p1mouse.getX()
        ply = p1mouse.getY()
        tic_tac_toe_x(win, p1x, p1y)

main() 
```

# jquery - $(this).dequeue(); 与下一个（）；

> ID：13753471
> 
> 赞同：13
> 
> 时间：2012-12-06T22:05:08.427
> 
> 标签：jquery, queue

如果我这样做有什么区别：

```
$queue.queue(function(next){
   //...
   next();
}).queue(function(next){
   //...
   next();
}); 
```

相对

```
$queue.queue(function(){
   //...
   $(this).dequeue();
}).queue(function(){
   //...
   $(this).dequeue();
}); 
```

他们做同样的事情吗？

有什么区别，我应该使用哪个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:29:21.110

没有太大区别。[只需使用闭包（ source](https://github.com/jquery/jquery/blob/1.8.3/src/queue.js#L28-L30) ）中保存的变量进行`next()`调用：`.dequeue()`

```
var ...,
    next = function () {
        jQuery.dequeue( elem, type );
    }; 
```

我会说使用`next()`它只是意味着你需要做的事情更少，因为它已经拥有你需要的东西`.dequeue()`——元素和队列名称（或`type`）。

# spring-integration - Spring 集成：实现远程 HTTP 调用重试的最佳方式

> ID：13753476
> 
> 赞同：1
> 
> 时间：2012-12-06T22:05:29.987
> 
> 标签：spring-integration

我有带队列的频道，它有几条消息。他们都应该通过 http-outbound-gateway 去远程系统

如果远程系统不可用，我的消息会去哪里？到无处？以后如何重试？http-outbound-gateway 是否有类似“错误通道”的东西？

PS：我找到了我可能喜欢的方式：使用事务链 + PseudoTransactionManager。有用。但是我可以用更少的 XML 来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:50:56.703

有关使用 MessageHandlerRetryAdvice 的信息，请参阅此 biog 帖子和相关示例...

[http://spring.io/blog/2012/10/09/what-s-new-in-spring-integration-2-2-part-4-retry-and-more](http://spring.io/blog/2012/10/09/what-s-new-in-spring-integration-2-2-part-4-retry-and-more)

在用尽重试后，您可以将消息发送到 a`<delayer/>`然后再次发送。

# javascript - 在 JavaScript 中将变量设置为未定义是否安全？

> ID：13753478
> 
> 赞同：-2
> 
> 时间：2012-12-06T22:05:40.973
> 
> 标签：javascript, variables, coding-style, undefined

我喜欢有一些干净的代码：

```
var currentVar = aBigObject['Key1']['Key2']['Key3'];
generalValues.push(((!currentVar) ? 0 : currentVar)); 
```

另一种选择（我认为）是这样的：

```
if (!aBigObject['Key1']['Key2][Key3']) generalValues.push(0);
else generalValues.push(aBigObject['Key1']['Key2']['Key3']); 
```

对我来说，第二个不必要地冗长且难以阅读。我的问题是，将变量设置为可能未定义的东西真的安全/良好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:08:52.970

你有没有想过

```
var currentVar = aBigObject['Key1']['Key2']['Key3'] || 0;
generalValues.push(currentVar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:09:30.427

> 对我来说，前者不必要地冗长且难以阅读。我的问题是，将变量设置为可能未定义的东西真的安全/良好吗？

这是非常*安全*的，因为它不会导致错误。这也意味着您不必再次进行所有这些查找。

~~您的替代方案似乎也没有什么意义（当然**与**您的第一个代码片段做的事情不同），因为它在`aBigObject['Key1']['Key2][Key3']` *不*虚假时具有完全不同的行为（将其分配给自己而不是推动它`generalValues`）。~~ *（对问题的编辑解决了这个问题。）*

你的第一个例子当然有很多不必要的括号，可以写成：

```
var currentVar = aBigObject['Key1']['Key2']['Key3'];
generalValues.push(!currentVar ? 0 : currentVar); 
```

..并且可能更好地写成

```
generalValues.push(aBigObject['Key1']['Key2']['Key3'] || 0); 
```

您的一般观点似乎是，“为什么第一个片段使用`currentVar`？” 答案是属性查找不是免费的。因此，一旦您完成了`Key1`on `aBigObject`、`Key2`结果和`Key3`that*的*查找，您就会记住并重用它，而不是再次查找它。JavaScript 对象是哈希图，查找很便宜，但它们不是*免费*的。但在这种*特定*情况下，您可以采用另一种方式（见上文）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:10:10.993

```
a = {};
var b = a.foo; 
```

这不会引发错误，并将局部变量设置`b`为`undefined`. 这没什么错。

但是，当您拥有嵌套属性时，事情会变得很疯狂，其中任何级别都可能是未定义的。

```
a = {};
var b = a.foo.bar; 
```

此示例引发异常。如果嵌套的任何级别可能不存在，则需要在钻入之前测试每个级别。

```
a = {};
var b = a.foo && a.foo.bar; 
```

* * *

鉴于此，此代码应该推送深度嵌套的值（如果存在）。如果没有，请`0`改为推动。

```
generalValues.push(
  (
    aBigObject.Key1 &&
    aBigObject.Key1.Key2 &&
    aBigObject.Key1.Key2.Key3
  ) || 0
); 
```

[还有……coffeescript 很酷](http://coffeescript.org/#try%3ageneralValues.push%28aBigObject.Key1?.Key2?.Key3%20%7C%7C%200%29)

# android - Android 共享首选项不会保存

> ID：13753479
> 
> 赞同：1
> 
> 时间：2012-12-06T22:05:47.183
> 
> 标签：android, sharedpreferences

我正在尝试共享首选项，但我无法持久保存我的更改。

```
SharedPreferences prefs;
SharedPreferences.Editor prefsEditor;
String lastPlayerPref = "LAST_PLAYER";

public void onCreate(Bundle savedInstanceState) {
    prefs = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
    prefsEditor = prefs.edit();
    String lastPlayer = prefs.getString(lastPlayerPref, "test");
    System.err.println(lastPlayer);  //always outputs "test" no matter what I do

    prefsEditor.putString(lastPlayerPref, "me");
    prefsEditor.commit();

    ...
} 
```

当我最初运行它时，我希望输出“测试”。当我在那之后运行它时，我希望它输出“我”。但它总是输出“测试”。如果没有保存任何偏好，那么该参数不只是默认值吗？

对困惑感到抱歉。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:22:45.807

我想你忘了添加**.putString(lastPlayerPref, "player1");**

```
prefs = ProgressBarActivity.this.getSharedPreferences("myPrefs", MODE_PRIVATE);
prefsEditor = prefs.edit().putString(lastPlayerPref, "player1");
prefsEditor.commit();

String lastPlayer = prefs.getString(lastPlayerPref, "test");
System.err.println(lastPlayer);

prefsEditor = prefs.edit().putString(lastPlayerPref, "player2");
prefsEditor.commit();

lastPlayer = prefs.getString(lastPlayerPref, "test");
System.err.println(lastPlayer); 
```

如果你在上面尝试，你会看到它会改变

# sql - 从 SQL Server 获取 HTML 代码

> ID：13753481
> 
> 赞同：0
> 
> 时间：2012-12-06T22:05:56.093
> 
> 标签：sql, sql-server

我在列名中有一个单引号，我想把它翻译成`&#39;`，有没有任何函数可以将一个字符翻译成 html 代码？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:10:15.057

[您可以使用REPLACE](http://msdn.microsoft.com/en-us/library/ms186862.aspx)来实现它，但您必须手动替换每个实体。

```
SELECT REPLACE(YourColumn, '''', '&#39;') FROM YourTable 
```

但正如我在评论中所说，SQL 并不是真正适合这项工作的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:12:36.263

尝试使用 ASCII ( character_expression )

[http://msdn.microsoft.com/en-us/library/ms177545.aspx](http://msdn.microsoft.com/en-us/library/ms177545.aspx)

# r - R中成对观察的加权平均值

> ID：13753484
> 
> 赞同：1
> 
> 时间：2012-12-06T22:06:20.317
> 
> 标签：r

昨天我发布了一个问题，询问如何获得数据集相邻列中观察值的平均值：

[R中的平均列对](https://stackoverflow.com/questions/13739243/average-pairs-of-columns-in-r)

今天我意识到我实际上需要加权平均值。我尝试将上面的答案修改为修改后的情况，但仍然不能很好地理解 apply 函数系列以轻松做到这一点。

我已经编写了代码来获取下面示例数据集的加权平均值，并且可能可以将该代码与我的真实数据一起使用。尽管如此，如果有人能够说明如何在此处使用 apply 系列函数进行加权平均，我认为这将大大有助于提高我的理解和编码能力。无论如何，感谢您过去和未来的所有帮助和想法。

```
x = read.table(text = "
  site     yr1  yr2  yr3  yr4
    1      10   15    6    8
    2      10   20   30   40
    3       5   NA    2    3
    4     100  100   NA   NA", 
sep = "", header = TRUE)

x

weights = read.table(text = "
  site    yr1  yr2  yr3  yr4
    1       2    4    1    3
    2       2    2    4    2
    3       3    2    2    3
    4       4    2    2    4", 
sep = "", header = TRUE)

weights

x.weights = x * weights

numerator <- matrix(NA, ncol=((ncol(x.weights)/2)+1), nrow=nrow(x.weights))

for(i in 1: ((ncol(weights)-1)/2)) {
  for(j in 1:   nrow(weights)      ) {

    numerator[j,   1 ] <- x[j,1]
    numerator[j,(i+1)] <- sum(c(x.weights[j,(1 + ((i-1)*2 + 1))], x.weights[j,(1 + ((i-1)*2 + 2))]), na.rm = TRUE) 

  }
}

numerator

denominator <- matrix(NA, ncol=((ncol(weights)/2)+1), nrow=nrow(weights))

for(i in 1: ((ncol(weights)-1)/2)) {
  for(j in 1:   nrow(weights)      ) {

    denominator[j,   1 ] <- x[j,1]
    denominator[j,(i+1)] <- sum(c(weights[j,(1 + ((i-1)*2 + 1))], weights[j,(1 + ((i-1)*2 + 2))]), na.rm = TRUE) 

  }
}

denominator

weighted.ave <- numerator[,2:ncol(numerator)] / denominator[,2:ncol(denominator)]
weighted.ave

# insert value from x if one of a pair is missing
# insert NA if both in a pair are missing

adj.weighted.ave <- weighted.ave

for(i in 1: ((ncol(x)-1)/2)) {
  for(j in 1:   nrow(x)      ) {

    if( is.na(x[j,(1 + (i-1)*2 + 1)]) & !is.na(x[j,(1 + (i-1)*2 + 2)])) adj.weighted.ave[j,i] =  sum(c(x[j,(1 + ((i-1)*2 + 1))], x[j,(1 + ((i-1)*2 + 2))]), na.rm = TRUE) 
    if(!is.na(x[j,(1 + (i-1)*2 + 1)]) &  is.na(x[j,(1 + (i-1)*2 + 2)])) adj.weighted.ave[j,i] =  sum(c(x[j,(1 + ((i-1)*2 + 1))], x[j,(1 + ((i-1)*2 + 2))]), na.rm = TRUE) 
    if( is.na(x[j,(1 + (i-1)*2 + 1)]) &  is.na(x[j,(1 + (i-1)*2 + 2)])) adj.weighted.ave[j,i] =  NA 

 }
}

adj.weighted.ave

#           [,1]     [,2]
# [1,]  13.33333  7.50000
# [2,]  15.00000 33.33333
# [3,]   5.00000  2.60000
# [4,] 100.00000       NA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:43:25.553

使用上一个问题的答案中的元素：

```
numerator <- sapply(seq(2,ncol(x.weights),2), function(i) {
  apply(x.weights[,c(i, i+1)], 1, sum, na.rm=T)
})

denominator <- sapply(seq(2,ncol(weights),2), function(i) {
  apply(weights[,c(i, i+1)], 1, sum, na.rm=T)
})

numerator/denominator 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:54:13.390

```
 apply(x, 1, function(rw) weighted.mean( rw[2:5], 
                     weights=weights[rw["site"], 2:5 ] ,na.rm=TRUE) )
[1]   9.750000  25.000000   3.333333 100.000000 
```

这确实取决于与 row.names 匹配的站点编号。

# iphone - iOS 混乱发布应用程序在 iStore 上发布

> ID：13753486
> 
> 赞同：0
> 
> 时间：2012-12-06T22:06:27.147
> 
> 标签：iphone, ios, xcode

我将我的应用程序设置为仅支持 iOS 6.0 及更高版本。Epic Fail，该应用程序并不复杂，有人可以帮我找出正确的设置，以允许 iOS 4.3 及更高版本的用户使用我的应用程序。

**当前的应用设置**

项目：AppProject > Base SDK=latest iOS 6.0, iOS Deployment Target = 6.0

目标：AppProject > iOS 部署目标 = 6.0

问题：我已经厌倦了使用 4.3 模拟器运行我的代码，但是在启动屏幕出现后应用程序显示为黑色。任何想法这可能是什么？我对此感到困惑......

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:08:19.770

您需要将部署目标设为 4.3，但可以使用 6.0 SDK。为什么运行应用程序时它是黑色的可能是一个更大的问题。当您将构建上传到 iTunes Connect 时，它会告诉您所需的最低版本，因此您可以仔细检查您是否正确设置了部署目标。

# userid - 从 Siteminder smsession 中检索用户 ID

> ID：13753487
> 
> 赞同：4
> 
> 时间：2012-12-06T22:06:27.830
> 
> 标签：userid, siteminder

我们的系统是一个与 Siteminder 交互的网关，用于身份验证和连接到后端系统。Siteminder 在标头中返回 SMSESSION 和 SMIDENTITY。如何从 SMSESSION 中检索用户 ID。The format is as below: SMSESSION=dQtTYNjolqkVPoblyV2iUYzlaffxweO7jwHdbC8R8HCRzyuR2E6we22hBEdfOquw4Wx4V2Ly6tuTq7DctZXBpiUVOqYr1htSKExdDauUYD0Eh+jmdw9yBSSjkUm/nlDd6iFizN2zeyBAGda7jgHbyvKCB0T54ZrFFEMTd1jdJfiOJS0q6c

我试图手动获取编码的字符串并对其进行解码，但它没有让我获得用户 ID。如何从 SMSESSION 获取用户 ID？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:22:32.267

我相信 SMSESSION cookie 是由代理加密的，你将无能为力。您必须与外部 SiteMinder 支持团队合作，要求他们添加 SM_USER 或其他标头。它是 SiteMinder 配置的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T13:21:04.367

用户 ID 可以在标有“SM_USER”的默认 SiteMinder 标头中找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T03:43:38.820

您可以从 response.getHeaderNames() 中获取 SM_USER，在 index.jsp 中使用以下脚本：

```
 <script language="JavaScript" type="text/javascript">

<%
    java.util.Enumeration names = request.getHeaderNames();

    String SM_USER = "";

    while(names.hasMoreElements())
    {
        String name = (String)names.nextElement();
        if(name.contains("SM_USER"))
        {
                 SM_USER = request.getHeader("SM_USER");
        }
    }

%>  

    var SM_USER = '<%= SM_USER %>';     

</script> 
```

然后您可以从 window.SM_USER 访问 SM_USER 值

# java - Java 等价于 Perl 的 File::Spec->catfile？

> ID：13753491
> 
> 赞同：1
> 
> 时间：2012-12-06T22:06:58.333
> 
> 标签：java, perl, filenames, directory-structure

> **可能重复：**
> [在 Java 中组合路径](https://stackoverflow.com/questions/412380/combine-paths-in-java)

Perl 有一个名为的模块[`File::Spec`](http://search.cpan.org/perldoc?File%3A%3ASpec)，它有一个`catfile()`方法：

```
$x = File::Spec->catfile('a', 'b', 'c'); 
```

该模块根据操作系统返回不同的结果。上面的调用给出了一个文件路径，在 Linux 上是`/a/b/c`，在经典的 Mac OS 上是`:a:b:c`，在 Windows 上是（我相信）`a:\b\c`（或者可能是`\a\b\c`）。`File::Spec->catfile()`还处理连续的目录分隔符，所以如果你传入`'a/', '/b'`你会回来`a/b`。

在Java中有什么可以做到这一点吗？我知道有`File.separatorChar`and`File.separator`字段，但我真的很想使用一个方法，该方法采用`String`s 数组（或可变数量的`String`s）并返回`String`完整路径的 a 。

# asp.net - 如何从 web.config 中的连接字符串中检索服务器名称和数据库名称

> ID：13753494
> 
> 赞同：0
> 
> 时间：2012-12-06T22:07:09.117
> 
> 标签：asp.net, c#-4.0, web-config

如何通过 .net api 以编程方式从 web.config 连接字符串中检索服务器名称和数据库名称？最好不使用我创建的 html 或 xml 解析器。寻找检索此类信息的最简单方法。示例 web.config 片段：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="ConnectionString" connectionString="Provider=SQLOLEDB;Data Source=MyServer;User ID=admind;password=ju7mpst@rterz_Fak3;Initial Catalog=dbDatabase" providerName="System.Data.OLEPlethora"/>
  </connectionStrings>
<system.web> 
```

结果：服务器=MyServer 数据库=dbDatabase

找到有关检索连接字符串设置的[链接。](https://stackoverflow.com/questions/8177223/sql-server-connection-string-in-code-vs-config-file-in-asp-net-site)这似乎要简单得多，但是，我不确定是否可以遍历许多连接字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:08:45.913

从配置中获取连接字符串，如下所示：

```
var myConnectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString(); 
```

然后，您可以使用[oledb 连接字符串构建器](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnectionstringbuilder.aspx)来解析任何连接字符串并提取相关部分。

```
var builder = new System.Data.OleDb.OleDbConnectionStringBuilder(myConnectionString);
var servername = builder["Data Source"];
var database = builder["Initial Catalog"];

Console.WriteLine("server={0}, database={1}", servername, database); 
```

# sql - 从 varchar 中选择元音，Oracle PL/SQL

> ID：13753498
> 
> 赞同：2
> 
> 时间：2012-12-06T22:07:20.257
> 
> 标签：sql, oracle, plsql

我正在尝试增加 varchar 中包含的元音的数量，我一直在谷歌中四处寻找，但没有成功。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:36:01.907

就像是

```
select length(regexp_replace('andrew','[^AEIOUaeiou]')) as vowels from dual; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:19:01.397

如果您使用的是 Oracle 11g，则可以使用[REEXXP_COUNT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions147.htm#SQLRF20014)函数来确定与模式匹配的内容。

```
SQL> select regexp_count('andrew', '[aeiou]', 1, 'i') as vowels
  2    from dual;

    VOWELS
----------
         2 
```

第一个参数是要匹配的字符串，`'andrew'`.

第二个参数是匹配模式，在本例中为`[aeiou]`。`[]`表示字符列表；解析器以任何顺序匹配此列表中的任何和所有字符。

第三个参数`1`是开始位置，指示 Oracle 应该开始搜索匹配的字符串的位置索引。它仅包含在内，因此我可以使用第四个参数。

第四个参数是匹配参数，`'i'`表示我要做不区分大小写的匹配。这就是字符表*没有* `[aeiouAEIOU]`的原因。

如果您使用的是 10g，则 REGEXP_COUNT 不存在。在这种情况下，您可以使用带有[REGEXP_REPLACE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm#SQLRF06302)[的 Annjawan 解决方案](https://stackoverflow.com/a/13753869/458741)的更精确版本。

```
SQL> select length(regexp_replace('andrew','[^aeiou]', '', 1, 0, 'i')) as vowels
  2    from dual;

    VOWELS
----------
         2 
```

克拉( `^`) 表示不是，即用空字符串替换字符串`'andrew'`中不在字符列表中的每个字符。`[aeiou]`下一个参数再次是起始位置。第五个参数`0`表示您要替换匹配的模式的*每一次*出现，我再次使用 match 参数`'i'`来表示不区分大小写的匹配。

[Gaurav的回答](https://stackoverflow.com/a/13753722/458741)是不正确的。这是因为在字符列表中他包含了逗号。请记住，如果可用，字符列表中的*所有内容都会匹配。*所以，如果我在你的字符串中引入一个逗号，你的字符串中就会有 3 个“元音”：

```
SQL> select regexp_count('an,drew','[a,e,i,o,u,A,E,I,O,U]' ) as vowels
  2    from dual;

    VOWELS
----------
         3 
```

正则表达式不是简单的野兽，我强烈建议在尝试它们时阅读[文档。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_regexp.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:25:33.493

```
SELECT length('andrew')
          - length(REGEXP_REPLACE('andrew','[a,e,i,o,u,A,E,I,O,U]','')) 
FROM DUAL; 
```

输出：2——`a`这里`e`是两个元音。

如果您使用的是 Oracle 11g，那么

```
SELECT REGEXP_COUNT('andrew','[a,e,i,o,u,A,E,I,O,U]' ) from dual 
```

# r - Zoo包编译错误

> ID：13753501
> 
> 赞同：2
> 
> 时间：2012-12-06T22:07:57.213
> 
> 标签：r, zoo

我正在运行 RStudio Server，但无法安装该`zoo`软件包。我得到的错误信息如下：

> 将软件包安装到“/home/tsajid/R/library”（因为未指定“lib”）尝试 URL ' [http://mirrors.nics.utk.edu/cran/src/contrib/zoo_1.7-9 .tar.gz](http://mirrors.nics.utk.edu/cran/src/contrib/zoo_1.7-9.tar.gz) ' 内容类型 'application/x-gzip' 长度 807084 字节 (788 Kb) 打开的 URL =========================== ======================= 下载 788 Kb
> 
> ** 安装*源*包 'zoo' ...
> ** 包 'zoo' 成功解包并检查 MD5 和
> ** libs sh: make: command not found ERROR: 包'zoo'编译失败<br> ** 删除 '/ home/tsajid/R/library/zoo' install.packages 中的警告：
> 安装包'zoo'的退出状态非零
> 
> 下载的源码包在'/tmp/RtmpsKlJWz/downloaded_pa​​ckages'</p>

我尝试安装包存档文件，但收到相同的错误消息。

会话信息：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-redhat-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] svMisc_0.9-65

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:34:01.630

它非常清楚地说明了这一点：

```
sh: make: command not found 
```

所以请安装相当于 Debian / Ubuntu 命令的 Red Hat

```
sudo apt-get install r-base-dev 
```

通过它的依赖`build-essential`还安装`make`等`gcc`pp

# wordpress - 在 wordpress 中获取外部循环的摘录和永久链接

> ID：13753502
> 
> 赞同：0
> 
> 时间：2012-12-06T22:07:58.690
> 
> 标签：wordpress, permalinks

我正在尝试在 wordpress 循环之外获取帖子摘录和永久链接，拉动缩略图和标题工作正常，但是在尝试获取摘录时它不起作用？我将如何获得永久链接？到目前为止，我的代码如下。

谢谢！

```
<div id="featured">
            <?php 
                $ftid = 104;
                $url = wp_get_attachment_url( get_post_thumbnail_id($post->ftid) ); 
            ?>  
            <img src="<?php echo $url; ?>" style="float:left;" />
            <div class="featured-info">
                <h2 class="post-title"><?php echo get_the_title($ftid); ?></h2>
                <?php $my_post = get_post($ftid); echo $my_post->post_excerpt; ?>
            </div>
        </div> 
```

也许如果有更好的方法可以为我指明正确的方向？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:27:43.957

永久链接应该按原样工作： $permalink = get_permalink($ftid);

虽然摘录，当直接访问页面对象时，实际上必须有摘录内容（不仅仅是发布内容）。如果您没有在帖子中手动输入摘录，则不会出现任何内容。在循环内部，如果没有手动输入摘录，the_excerpt() 将自动从内容生成。您是否在 WP 管理员中键入了单独的摘录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:17:40.497

查看 wp_get_attachment_url() - 您在 $ftid 变量的名称中留下了 $。 ![在此处输入图像描述](../Images/03c4bcbc4f43d4b1ffeebf73ac60ac53.png)

# html - 修复了标题和响应式网站问题

> ID：13753512
> 
> 赞同：1
> 
> 时间：2012-12-06T22:08:29.243
> 
> 标签：html, css, css-position

我一直在尝试创建一个具有固定标题但也具有响应性的网站。这是我到目前为止所拥有的。我会把它放在一个 jsfiddle 中，但你看不到我要解释的内容。是压缩`.css`后的格式`.scss`。`.css`

**HTML：**

```
<title> Skinny Beer </title>

<meta name="description" content="/">
<meta name="author" content="Josh Hornby">
<meta name="author" content="@joshua_hornby">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="design.css">

<link rel="stylesheet" href="stylesheets/base.css">
<link rel="stylesheet" href="stylesheets/skeleton.css">
<link rel="stylesheet" href="stylesheets/layout.css">

</head>

<body>
<div class="container">
<nav id="main-nav">
<div id="nav-wrapper">
    <div class="six columns"
        <div id="logo" style="background-color:black;"></div>
    </div>

        <div class="ten columns">
            <ul>
                <span class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html">About</a></li>
                    <li><a href="index.html">Beer</a></li>
                    <li><a href="index.html">Contact</a></li>
        </div>
</div>
</nav> 
```

**CSS：**

```
#main-nav{
-webkit-box-shadow: 0 2px 15px rgba(0, 0, 0, 0.25);
-moz-box-shadow: 0 2px 15px rgba(0,0,0,0.25);
 box-shadow: 0 2px 15px rgba(0, 0, 0, 0.25);
-webkit-transition: box-shadow 0.2s linear;
-moz-transition: box-shadow 0.2s linear;
-ms-transition: box-shadow 0.2s linear;
-o-transition: box-shadow 0.2s linear;
transition: box-shadow 0.2s linear;
border-bottom: 1px solid rgba(0, 0, 0, 0.2);
display: block;
position: fixed;
top: 0;
left: 0;
float: left;
width: 100%;
z-index: 12;
height: 60px;
background-color: white;

ul {
    position: relative;
    margin-top: 10px;
}

li {
    vertical-align: middle;
    display: inline;
    margin: 0 2px;
    color: black;
    list-style-type: none;
}

a {
    text-decoration: none;
}
 }

#nav-wrapper {
position: relative;
margin-left: auto;
margin-right: auto;
width: 800px;
}

#logo {
height: 25px;
width: 118px;
display: inline-block;
float: left;
padding: 5px 10px;
margin-top: 11px;
margin-left: -13px;
} 
```

我所追求的是当用户在 iPhone 上时可以说导航缩小并且文本不会低于。我必须使用媒体查询吗？如果是这样，是否有一种快速的方法可以为所有设备执行这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:27:15.937

是的，您将需要使用媒体查询。不知道如果没有它们，你将如何编写一个“响应式”网站，除非你在 js 中做这一切，那太疯狂了。

查看此链接以获取更多详细信息： [http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

但这里的想法：

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {

    #nav-wrapper {
        position: relative;
        margin-left: auto;
        margin-right: auto;
        width: 480px;
    } 

} 
```

所以在较小的屏幕上你会得到一个 480px 的#nav-wrapper 宽度；响应式的总体思路是从移动端进行设计。但是我提供的链接将向您解释所有这些。

此外，您的示例代码没有内容块或任何要在示例中重新定义的内容。但是假设你有一个名为“main_content”的div，你可以告诉它有一个margin-top，这样它就会清除标题、导航或你遇到的任何其他东西。我认为在这种情况下，真实的例子并不像主体那样必要，因为我们可以填满整个页面，涵盖所有设备和维度的可能性。最好的方法是弄脏你的手并练习。习惯真的不难。

至于覆盖amm的快速方法，例如“is_mobile”……不，不要尝试这样做。正如最近有人指出的那样，“移动”的定义每天都在变化。试图以“移动”为目标只会让试图维持这一点变得一团糟。

如果您不在乎它们是否在移动设备上，您可以为最大宽度 768px 编写一个媒体查询，只是为了制作一个小视图。

```
@media only screen and (max-device-width : 768px)
{
  /* styles here */
} 
```

# python - 使用 os 模块时如何在 python 中记录错误

> ID：13753521
> 
> 赞同：4
> 
> 时间：2012-12-06T22:08:56.153
> 
> 标签：python

我正在尝试采用一种简单的方法来跟踪我想使用 python 中的 os 模块运行的定期 mysqldump 命令。我已经写了这个，但在测试中它不会引发异常，即使 mysqldump 命令以错误完成。我对python很陌生，所以我可能会非常接近这个，但我想我会尝试指出正确的方向。

```
db_dump = "mysqldump -u %s -p%s --socket=source_socket --databases %s | mysql -u %s -p%s   --socket=dest_socket" % (db_user, db_pass, ' '.join(db_list), db_user, db_pass)

try:
    os.system(db_dump)
except:
    logging.error("databases did not dump")
else:    
    logging.info("database dump complete") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:12:40.953

os.system 不是调用系统命令的一种非常健壮或强大的方法，我建议使用`subprocess.check_output()`或`subprocess.check_call`

IE，

```
>>> cmd = 'ls -l'
>>> badcmd = 'ls /foobar'
>>> subprocess.check_call(cmd.split())
0
>>> subprocess.check_call(badcmd.split())
ls: /foobar: No such file or directory
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 511, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['ls', '/foobar']' returned non-zero exit status 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:11:20.487

`os.system()`返回一个整数结果代码。返回 0 时，命令运行成功；当它返回一个非零值时，表示错误。

```
db_dump = "mysqldump -u %s -p%s --socket=source_socket --databases %s | mysql -u %s -p%s   --socket=dest_socket" % (db_user, db_pass, ' '.join(db_list), db_user, db_pass)

result = os.system(db_dump)
if 0 == result:
    logging.info("database dump complete")
else:
    logging.error("databases did not dump; result code: %d" % result) 
```

像@COpython，我推荐使用`subprocess`. 它比它复杂一点，`os.system()`但它非常灵活。将`os.system()`输出发送到终端，但`subprocess`您可以收集输出，以便搜索错误消息或其他内容。或者您可以丢弃输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T22:27:43.963

这就是我要做的。

```
import logging
import subprocess
log = logging.getLogger(__name__)

cmd = "mysqldump -u %s -p%s --socket=source_socket --databases %s | mysql -u %s -p%s " \
      "--socket=dest_socket" % (db_user, db_pass, ' '.join(db_list), db_user, db_pass)

process = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE.PIPE)
stdout, stderr = process.communicate()
stdout = [x for x in stdout.split("\n") if x != ""]
stderr = [x for x in stderr.split("\n") if x != ""]

if process.returncode < 0 or len(stderr):
    for error in stderr:
        log.error(error) 
```

# javascript - Pinterest 和 Fancybox 之间的冲突

> ID：13753523
> 
> 赞同：7
> 
> 时间：2012-12-06T22:09:12.427
> 
> 标签：javascript, fancybox, fancybox-2, pinterest

我有一个包含 Fancybox 和 Pinterest pin 按钮的页面。两者似乎都可以正常工作，但是当我关闭 Fancybox 覆盖时，我看到以下 JavaScript 错误：

```
Uncaught TypeError: Cannot read property 'data-pin-aha' of null 
```

我的 Pinterest 按钮呈现如下：

```
<a href="http://pinterest.com/pin/create/button/?url=http://www.mywebsite.com/somepage&amp;media=http://www.mywebsite.com/content/images/2c63a4e0-3b65-4464-934c-77f2a7166090-Dim459X612.jpg&amp;description=some description" class="PIN_1354830754034_pin_it_button PIN_1354830754034_pin_it_beside PIN_1354830754034_hazClick" data-pin-aha="button_pinit" data-pin-config="beside"><span class="PIN_1354830754034_pin_it_button_count" id="PIN_1354830754034_pin_count_0"><i></i>3</span></a> 
```

只是为了好玩，我的 Pinterest 按钮正在异步加载：

```
(function () {
window.PinIt = window.PinIt || { loaded: false };
if (window.PinIt.loaded) return;
window.PinIt.loaded = true;
function async_load() {
    var s = document.createElement("script");
    s.type = "text/javascript";
    s.async = true;
    if (window.location.protocol == "https:")
        s.src = "https://assets.pinterest.com/js/pinit.js";
    else
        s.src = "http://assets.pinterest.com/js/pinit.js";
    var x = document.getElementsByTagName("script")[0];
    x.parentNode.insertBefore(s, x);
}
if (window.attachEvent)
    window.attachEvent("onload", async_load);
else
    window.addEventListener("load", async_load, false);
})(); 
```

还有我的 Fancybox 链接：

```
<a href="//vimeo.com/36573701" class="watch"><span>Watch Our Story</span></a> 
```

总的来说，这是一个非常基本的设置。只是为了好玩，我为 Pinterest 使用了普通的内联脚本标签，但得到了同样的错误。

有没有人见过这个错误并知道如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:58:23.780

Pinterest 按钮也有类似的问题。原来是 Pinterest 的 pinit.js 脚本有问题。

我已经[向 Pinterest 报告了这个问题（需要登录）](https://help.pinterest.com/requests/1041252)，他们正在查看它。

我们在一个页面上使用了 Pinterest 按钮，该页面上有另一个链接并分配了点击事件。链接的 HTML 大致是这样的：

```
<a href="#" class="youCanClickThis"><span>Select</span></a> 
```

点击事件处理程序是这样的：

```
$('.youCanClickThis').click(function (e) {
    $(this).html('Selected');
}); 
```

这个点击处理程序不知何故导致了 pinit.js ( `Uncaught TypeError: Cannot read property 'data-pin-log' of null`) 中的错误。

为了更容易地跟踪错误，我[取消了](http://jsbeautifier.org/) [https://assets.pinterest.com/js/pinit.js 。](https://assets.pinterest.com/js/pinit.js)它出现在 unminified pinit.js 的这个函数中：

```
get: function (b, c) {
    var d = null;
    return d = typeof b[c] === "string" ? b[c] : b.getAttribute(c)
}, 
```

具体来说，`typeof b[c]`。`get()`从 调用`getData()`，而 的 值`b`直接从调用的 传递 `getData()`。原来是这个功能：

```
click: function (b) {
    if ((b = a.f.getEl(b || a.w.event)) && b !== a.d.b) {
        if (!a.f.getData(b, "log")) b = b.parentNode; 
```

每当用户单击具有 Pinterest 按钮的页面上的任何内容时，这似乎都会触发。最后一点 - `b.parentNode`- 是导致我们问题的原因。

到那时，`b`已分配给点击事件起源的元素。`<span>`在我们的例子中，那是`<a>`. 然而，由于我们的 JavaScript 用文本替换了`<a>`标签的内容，`<span>`不再是文档的一部分，因此不再有`parentNode`.

从而`b = b.parentNode`造成`b`的价值为`null`。

我们通过`<span>`在单击时不从文档中删除来解决此问题。`b.parentNode`但是，如果 Pinterest 可以添加检查以查看是否存在或其他内容，那就太好了。

`parentNode`（我对 Pinterest 脚本的理解不够深入，无法知道最好的修复方法是什么，但它是在假设点击事件的源始终具有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:08:24.137

我在`Uncaught TypeError: Cannot read property 'data-pin-log' of null`该页面上收到错误消息。

解决此问题的一种 hacky 方法是添加一个 afterShow 事件，将`data-pin-log`属性添加到关闭按钮

```
 $(".watch").fancybox({
    helpers: {
        media: {}
    },
    afterShow: function(e){
        $('.fancybox-close').attr('data-pin-log', false);
    }
  }); 
```

这也可以通过替换为 OP 的`data-pin-log`问题`data-pin-aha`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T20:12:08.307

We were having the same issue using jQuery Modal. We solved the problem by adding an onHide handler that hid the modal window, waited a few seconds, and then deleted the modal window. Not the prettiest solution, but it worked.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T22:03:36.787

解决此问题的方法是今天推送；很抱歉给您带来麻烦。如果您以后在使用 pinit.js 时遇到困难，请在此处告知我们：

[https://github.com/pinterest/widgets/](https://github.com/pinterest/widgets/)

# sql-server - 如何在运行时从数据库中仅显示组合框中的选定数据？

> ID：13753526
> 
> 赞同：0
> 
> 时间：2012-12-06T22:09:39.433
> 
> 标签：sql-server, vb.net, visual-studio-2010, sql-server-2008, combobox

我是 .Net 的新手，我正在处理一项任务。下面是我的场景。

我有 2 张桌子：

*   表 1：学生

    ```
    StudentID   StudentDetail
        1         StudentName
        2        StudentGrade 
    ```

*   表 2：Student_data

    ```
    StudentDetail  StudentRecords
     StudentName   John (Default)
     StudentName      Jacob
     StudentName      Smith
     StudentGrade            A    (default)
     StudentGrade            B
     StudentGrade            C 
    ```

**问题**：当窗口窗体加载（运行时）时，我需要在组合框中显示 StudentRecords，默认情况下是`StudentName = "John"`和`StudentGrade = "A"`，然后是其他值。

`StudentName`并且`StudentRecords`在`Label`s 中，值在 a 中`ComboBox`。

我正在使用带有 SQL 2008r2 的 VB.Net 和 VS 2010。

我将不胜感激任何一步一步的帮助。抱歉，如果我的要求很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:36:34.780

我认为您应该考虑开始重新考虑您的数据模型。像这样的一些就足够了：

![简单数据模型](../Images/f8a0df363083f7a8fb7e0ea8ab3e62d1.png)

这样你就可以拥有：

*   学生

    ```
    id       name       [   oGrade    ] 
    ```

    * * *

    ```
     1       John       [      1      ]
     2       Paco       [      1      ]
     3       Jacinto    [      2      ] 
    ```

*   年级

    ```
    id       grade      [   aoStudent    ] 
    ```

    * * *

    ```
     1         A        [   John, Paco   ]
     2         B        [   Jacinto      ]
     3         C        [   Nothing      ] 
    ```

无论如何，这样您每个学生只能有一个成绩。所以，它没有多大帮助。如果您想跟踪每个科目的学生成绩和每个科目的几次测试，则需要更复杂的东西。考虑到这一点，这里有另一个更复杂的模型：

![更复杂的模型](../Images/6cd90034463f52f70d1e3c681778345a.png)

同样，你需要停下来想想你的问题。

# linux - so名字的三位数字是什么？

> ID：13753528
> 
> 赞同：0
> 
> 时间：2012-12-06T22:09:48.477
> 
> 标签：linux, shared-libraries

我正在学习管理我的共享库，谷歌揭示了有关两个主要和次要版本数字的大量信息，但我正在查看的许多库都有 3 位数字，例如 libsqlite3.so.0.8.6 ，第三位数字是多少？

提到了一个“时期”：

> ... soname 具有前缀`lib'', the name of the library, the phrase`.so''，后跟一个句点和一个版本号，每当界面更改时都会增加... [http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries .html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

但我找不到这个周期数字是什么以及它的影响的解释？

编辑：

```
libsqlite3.so.0.8.6
              | | |
_What's this?_| | |
_Major__________| |
_Minor____________| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:12:25.150

[这是](http://www.unix.com/unix-advanced-expert-users/90028-naming-conventions-shared-libraries-linux.html)来自另一个论坛（快速谷歌搜索）的一个主题，其中有一些关于命名的对话：

从线程：

> 当有两个数字时，有一个主要版本和一个次要版本。libncursesw.so.5.6 有主要版本 5 和次要版本 6；理论上，相同主要版本的任何次要版本都无需重新编译即可兼容，因此如果您升级到 5.7 进行错误修复，链接到 libncursesw.so.5 的程序不会错过任何一个节拍。如果您有一个需要版本 4 的古老程序，您可以安全地在 5.x 库旁边安装一个 4.x 库，除了那个程序之外什么都不会使用它。

基本上，命名约定允许链接到库的程序具有三个级别的兼容性。程序可以选择链接库名称本身、特定的主编号或特定的major.minor 编号。这实际上取决于应用程序开发人员来确定什么是最有意义的。

您会注意到，通用和主要数字形式通常链接到最近的 major.minor 形式。库可能包含库需要的附加版本号（例如`/lib/ld-linux.so`）。版本号仍然从左到右进行，增加特异性。

# winrt-xaml - WinRT xaml / c#从GoBack页面返回导航参数

> ID：13753529
> 
> 赞同：3
> 
> 时间：2012-12-06T22:09:50.860
> 
> 标签：winrt-xaml

我正在尝试创建一个条目页面，其中一个选项是选择一个项目。该列表可以超过 1000 个，并且显示列出项目的启用搜索的页面是有意义的。当用户从编辑/创建屏幕单击“选择项目”时，我可以将导航参数传递到该屏幕，并在选择项目时执行 Frame.GoBack()。但是，我不能将任何参数传递回页面。有一个更好的方法吗？

目前我正在考虑使用全局变量来存储这些数据:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:43:26.567

您是否尝试过查看 Common 文件夹中的 LayoutAwarePage.cs 类并查看：

```
protected virtual void GoBack(object sender, RoutedEventArgs e)
{
    if ((base.get_Frame() != null) && base.get_Frame().get_CanGoBack())
    {
        base.get_Frame().GoBack();
    }
} 
```

看看你是否可以传递一个对象？

# delphi - 在浮点范围内生成随机数

> ID：13753530
> 
> 赞同：5
> 
> 时间：2012-12-06T22:10:00.783
> 
> 标签：delphi, delphi-xe3

我们如何在浮点数（在delphi xe3中）的范围之间生成随机数？

例如，将 之间的数字随机化`[0.10 to 0.90]`。我需要给出如下结果：

`[ 0.20 , 0.32 , 0.10 , 0.50 ]`

感谢您的解决方案....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T13:53:52.473

另一种选择是使用[`RandomRange`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Math.RandomRange)(returns: `AFrom <= r < ATo`) 如下：

```
RandomRange(10, 90 + 1) / 100 
```

或者

```
RandomRange(10, 90 + 1) * 0.01 
```

将返回 0.10 到 0.90 范围内的数字（包括 0.90）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T22:23:43.727

```
var
  float : Double;

  float := Random;  // Random float in range: 0 <= float < 1
  float := 0.1 + float*0.8 // 0.1 <= float < 0.9 
```

要初始化随机数生成器，请在第一次调用函数之前进行一次调用`Randomize`或设置`RandSeed`参数[`Random`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Random)。

不这样做，每次运行程序时都会生成相同的序列。但是请注意，在为另一个编译器版本重新编译时，不能保证此顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T09:36:49.920

试试这个：

```
function RandomRangeF(min, max: single): single;
begin
  result := min + Random * (max - min);
end; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-06T08:41:59.107

这有点厚颜无耻，但这里有：取决于浮点数之后你想要多少个数字。例如，如果您想要 1 个数字，您可以在 100 - 999 范围内生成然后除以 10。或者 1000 - 9999 然后除以 100。

# android - PhoneGap：不幸的是 phonegapExample 已停止

> ID：13753539
> 
> 赞同：0
> 
> 时间：2012-12-06T22:10:35.277
> 
> 标签：android, eclipse, cordova

我正在使用最新版本的 PhoneGap。我正在使用他们的代码，只修改了应用程序名称，当我在模拟器上运行它时出现此错误：“不幸的是 phonegapExample 已停止”。

我的日志猫：

```
12-07 00:04:48.573: I/Process(996): Sending signal. PID: 996 SIG: 9
12-07 00:04:51.814: W/Trace(1013): Unexpected value from nativeGetEnabledTags: 0
12-07 00:04:51.814: W/Trace(1013): Unexpected value from nativeGetEnabledTags: 0
12-07 00:04:51.814: W/Trace(1013): Unexpected value from nativeGetEnabledTags: 0
12-07 00:04:52.043: W/Trace(1013): Unexpected value from nativeGetEnabledTags: 0
12-07 00:04:52.053: W/Trace(1013): Unexpected value from nativeGetEnabledTags: 0
12-07 00:04:52.053: D/AndroidRuntime(1013): Shutting down VM
12-07 00:04:52.053: W/dalvikvm(1013): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-07 00:04:52.113: E/AndroidRuntime(1013): FATAL EXCEPTION: main
12-07 00:04:52.113: E/AndroidRuntime(1013): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.andreiraileanu.tasker/com.andreiraileanu.tasker.Tasker}: java.lang.ClassNotFoundException: Didn't find class "com.andreiraileanu.tasker.Tasker" on path: /data/app/com.andreiraileanu.tasker-1.apk
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.os.Looper.loop(Looper.java:137)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invokeNative(Native Method)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invoke(Method.java:511)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at dalvik.system.NativeStart.main(Native Method)
12-07 00:04:52.113: E/AndroidRuntime(1013): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.andreiraileanu.tasker.Tasker" on path: /data/app/com.andreiraileanu.tasker-1.apk
12-07 00:04:52.113: E/AndroidRuntime(1013):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
12-07 00:04:52.113: E/AndroidRuntime(1013):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
12-07 00:04:52.113: E/AndroidRuntime(1013):     ... 11 more 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="com.andreiraileanu.tasker" android:versionName="1.0" android:versionCode="1" android:hardwareAccelerated="true">
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-sdk android:minSdkVersion="13" android:targetSdkVersion="17"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name" android:hardwareAccelerated="true" android:allowBackup="true">
        <activity android:name="Tasker" android:label="@string/app_name" android:theme="@android:style/Theme.Black.NoTitleBar"  android:configChanges="orientation|screenSize|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:41:58.007

> 我正在使用他们的代码，只修改了应用程序名称

如果您只更改清单中的名称：

```
android:name="Tasker" 
```

您将看到这些错误。您还需要重命名`android:name`指向的类：

```
public class Tasker ... {
//     This: ^^^^^^ must match the manifest 
```

（您也需要重构文件以更改文件名。）

# backbone.js - 每次分页获取后将数据附加到同一个集合

> ID：13753540
> 
> 赞同：4
> 
> 时间：2012-12-06T22:10:40.583
> 
> 标签：backbone.js

我正在尝试使用主干填充 instagram 图像，

我基本上有3个模型如下，

**用户模型存储与 instagram 相关的所有用户信息**

```
App.Models.User = Backbone.Model.extend({
    defaults: {
        id: '',
        access_token: '',
        userid: '',
        username: '',
        full_name: '',
        profile_picture: ''
    },
    urlRoot: "/api/user/",
    initurl: function() {
        return "https://api.instagram.com/v1/users/"+this.get('userid')+"/media/recent/?access_token=" + this.get('access_token');
    },
    initialize: function() {
        this.set('id', $('#domdump .id').val());
        this.fetch({
            success: function(model) {
                var photos = new App.Collections.Ig_photos([],{
                    url: model.initurl()
                });
            }
        });
    }

}); 
```

**存储下一个 url 以进行分页的模型**

```
App.Models.Ig_next_url = Backbone.Model.extend({
    defaults: {
        next_url: ''
    },
    next_url:function(){
        return this.get('next_url');
    }
}); 
```

**照片的模型**

```
App.Models.Ig_photo = Backbone.Model.extend({}); 
```

**多张照片的集合**

```
App.Collections.Ig_photos = Backbone.Collection.extend({
    model: App.Models.Ig_photo,
    initialize: function(model, options) {
        this.url = options.url;
        this.nextSet();
    },
    sync: sync_jsonp,
    parse: function( response ) {
        if(response.pagination && response.pagination.next_url && response.pagination.next_url != this.url){
            var next_url = new App.Models.Ig_next_url({ next_url: response.pagination.next_url });
            this.url = next_url.next_url();
        }
        return response.data;
    },
    nextSet: function(){
        this.fetch({
            success: function(photos){
                var ig_photos_views = new App.Views.Ig_photos_view({ collection: photos});
                console.log(photos);
            }
        });
    }
}); 
```

此外，我有一些视图使用调用集合的下一组的加载更多按钮进行渲染。

我试图实现的是在 nextset() 时将照片附加到集合中，并且集合会使用以前的数据 + 新数据进行更新，但现在它被覆盖了。

也可以从 modelfetch 实例化新集合吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T22:48:50.243

您不需要创建新视图。相反，您应该听在集合上触发的“添加”事件并相应地呈现新项目。

```
nextSet: function(){
    this.fetch({add : true}); // The add option appends to the collection
} 
```

此选项在[非常好的文档](http://backbonejs.org/#Collection-fetch)中有详细说明。

# c++ - 模板化和非模板化类的可变参数模板方法行为的令人费解的差异

> ID：13753541
> 
> 赞同：9
> 
> 时间：2012-12-06T22:10:42.990
> 
> 标签：c++, c++11

我正在为以下最小代码突出显示的一个奇怪问题而挠头：

```
struct A {
    template <typename ...X, typename ...Y>
    void f(X... a, Y...b) {
    }

    template <typename ...X>
    void g(X...c) {
       f<X...> (c...);
    }
};

template <typename T>
struct B {
    template <typename ...X, typename ...Y>
    void f(X... a, Y...b) {
    }

    template <typename ...X>
    void g(X...c) {
       f<X...> (c...);
    }
};

int main() {
    A a;
    a.g(); // Compiles without problem

    B<int> b;
    b.g(); // Compiler complains saying g() calls f<>() with 0 arguments while 1 is expected
} 
```

对于第二种情况，g++ 和 clang++ 都给出了相同的基本错误消息。他们基本上说在模板类中对 f() 的调用需要一个参数。

这是两个编译器中的错误，还是我在 C++ 标准中遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:24:07.130

根据 14.1 [temp.param] 第 11 段，采用两个参数包的方法是非法的：

> ...函数模板的模板形参包后面不应跟随另一个模板形参，除非该模板形参可以从函数模板的形参类型列表中推导出来或具有默认实参（14.8.2）。[ 例子：

```
template<class T1 = int, class T2> class B; // error
// U cannot be neither deduced from the parameter-type-list nor specified
template<class... T, class... U> void f() { } // error
template<class... T, class U> void g() { } // error 
```

> —结束示例]

# php - ZipArchive::close() 无效或未初始化的 Zip 对象

> ID：13753542
> 
> 赞同：5
> 
> 时间：2012-12-06T22:10:48.060
> 
> 标签：php, zip

我正在尝试通过压缩所有站点来备份我的站点，然后将压缩包放入一个无法访问的文件夹中，使用 PHP 完成。我的代码是

```
<?php
Zip('../../', './');
function Zip($source, $destination)
{
    if (extension_loaded('zip') === true)
    { echo'a';
        if (file_exists($source) === true)
        {
            $zip = new ZipArchive();

            if ($zip->open($destination, ZIPARCHIVE::CREATE) === true)
            {
                $source = realpath($source);

                if (is_dir($source) === true)
                {
                    $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);

                    foreach ($files as $file)
                    {
                        $file = realpath($file);

                        if (is_dir($file) === true)
                        {
                            $zip->addEmptyDir(str_replace($source . '/', '', $file . '/'));
                        }

                        else if (is_file($file) === true)
                        {
                            $zip->addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
                        }
                    }
                }

                else if (is_file($source) === true)
                {
                    $zip->addFromString(basename($source), file_get_contents($source));
                }
            }

            return $zip->close(); // The error.
        }
    }

    return false;
}
?> 
```

但是我得到一个错误，`Warning: ZipArchive::close() [ziparchive.close]: Invalid or unitialized Zip object in backup.php on line 41`我已经搜索了谷歌，但没有结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-31T15:49:18.107

From **PHP 5.2.8**, this issue has started to emerge.

Try adding the `FLAGS` to the `open` method

```
 - ZipArchive::OVERWRITE
 - ZipArchive::CREATE
 - ZipArchive::EXCL
 - ZipArchive::CHECKCONS 
```

This command would most probably fix the issue

```
$zip->open($destination, ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE); 
```

Quick and Dirtiest Fix would be this, if the above doesn't work

```
@$zip->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T16:28:40.227

在我的情况下，目标文件夹完全丢失，这导致`close()`.

因此，我检查目标文件夹是否存在，如果不存在，我尝试创建它。如果两个调用都失败，我会抛出一个异常。在您的情况下，将类似于以下内容：

```
$destinationPath = (new \SplFileInfo($destination))->getPath();
if (!is_dir($destinationPath) && !mkdir($destinationPath, 0755, true)) {
    throw new \Exception(sprintf('Destination folder "%s" is missing and cannot be created', $destinationPath));
} 
```

# c# - 尝试打开屏幕时异常触发

> ID：13753543
> 
> 赞同：0
> 
> 时间：2012-12-06T22:10:55.137
> 
> 标签：c#, visual-studio-lightswitch

当我尝试打开屏幕时，出现以下异常：

> 无法将“System.Windows.Controls.Grid”类型的对象转换为“System.Windows.Controls.TabItem”类型

任何帮助将不胜感激。

```
partial void VouchersDetail_Created()
    {
        this.FindControl("JournalVoucher").ControlAvailable += JournalVoucher_ControlAvailable;
    }

    void JournalVoucher_ControlAvailable(object sender, ControlAvailableEventArgs e)
    {
        ((System.Windows.Controls.TabItem)e.Control).KeyUp += JournalVoucher_KeyUp;
    }

    void JournalVoucher_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.V)
        {
            if ((Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
            {
                var tabitem = (System.Windows.Controls.TabItem)sender;
                tabitem.IsEnabled = true;
            }
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:34:04.810

我的猜测是 JournalVoucher 是 Grid 类型的。而您正试图将其转换为 TabItem 类型。

在该行上放置一个断点并检查该事件是否被多次调用。

如果它只被调用一次，那么它可能足以改变线路

```
((System.Windows.Controls.TabItem)e.Control).KeyUp += JournalVoucher_KeyUp; 
```

至：

```
((System.Windows.Controls.Grid)e.Control).KeyUp += JournalVoucher_KeyUp; 
```

JournalVoucher_KeyUp 中的 Sender 很可能也是 Grid 类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:14:30.140

您的代码中有许多行尝试将对象强制转换为 TabItem：

```
var tabitem = (System.Windows.Controls.TabItem)sender; 
```

其中之一无疑将是根本原因！

您的代码主要是事件处理程序 - 我的猜测是这些是在网格上定义的。

# python - Tkinter 在 grid_remove 上冻结

> ID：13753545
> 
> 赞同：0
> 
> 时间：2012-12-06T22:10:58.513
> 
> 标签：python, tkinter

因此，我正在尝试构建一个 GUI，在其中输入一些信息，清除输入字段，然后添加新的输入字段。但是，当我尝试通过 grid_remove 从根目录清除框架时，应用程序会冻结。相关代码如下。

```
import tkinter
from threading import Thread

class PinGui(tkinter.Frame):
    def __init__(self, client):
        self.client = client
        self.root = client.root
        self.add_pin = client.add_pin
        self.end = client.end
        tkinter.Frame.__init__(self, self.root)
        self.grid_widgets()
        self.grid_buttons()
        self.bind_keys()
        self.grid(padx=32, pady=32)

    def grid_buttons(self, b1='Add', b2='Reset', b3='Quit'):
        self.addButton = tkinter.Button(self, text=b1, command=self.validate)
        self.resetButton = tkinter.Button(self, text=b2, command=self.reset)
        self.quitButton = tkinter.Button(self, text=b3, command=self.end)
        self.buttons = [self.addButton, self.resetButton, self.quitButton]
        for i in range(3): self.buttons[i].grid(row=i, column=11)

    def grid_widgets(self):
        widths = [3,3,4,4,6]
        self.pin_vars = []
        self.pin_fields = []
        for i in range(5):
            self.pin_vars.append(tkinter.StringVar())
            self.pin_fields.append(
                tkinter.Entry(self,width=widths[i], textvariable=self.pin_vars[i])
                )
            self.pin_fields[i].grid(row=0, column=2*i, padx=3)
        self.pin_fields[0].focus_set()

    def bind_keys(self):
        self.root.bind_all("<Return>", self.validate)
        self.root.bind_all("<Escape>", self.end)

    def validate(self, args=None):
        self.client.pin = []
        for field in self.pin_fields:
            self.client.pin.append(field.get())
        Thread(target=self.add_pin).start()

    def ungrid(self):
        for field in self.pin_fields: field.grid_remove()
        for button in self.buttons: button.grid_remove()
        self.display.grid_remove() 
```

和：

```
class PinClient:
    def __init__(self):
        self.root = tkinter.Tk()
        self.gui = PinGui(self)
        self.pins = []

    def add_pin(self):
        self.gui.reset()
        if 'display' in self.__dict__:
            self.pins.append(self.pin)
            self.display.add_pin(self.pin)
            self.ping("Enter PIN for Comp %s:" % len(self.display.col1))
            if len(self.display.col1) > 5:
                self.end() # THIS IS WHERE IT FREEZES
        else:
            self.subject = self.pin
            self.display = Display(self.root, self.pin)
            self.display.grid(row=1, padx=32, pady=32)
            self.ping("Enter PIN for Comp 1:")

    def ping(self, msg):
        self.gui.d_var.set(msg)

    def end(self, args=None):
        self.gui.ungrid()

class Display(tkinter.Frame):
    def __init__(self, master, pin):
        tkinter.Frame.__init__(self, master)
        self.pin = pin
        self.col1 = []
        self.col2 = []
        self.col1.append(tkinter.Label(self, text="Subject:"))
        self.col2.append(tkinter.Label(self, text=self.pin))
        self.grid_widgets()

    def grid_widgets(self):
        self.ungrid()
        for i in range(len(self.col1)):
            self.col1[i].grid(row=i, column=0)
            self.col2[i].grid(row=i, column=1)

    def ungrid(self):
        for i in range(len(self.col1)):
            self.col1[i].grid_remove()
            self.col2[i].grid_remove()

    def add_pin(self, pin):
        self.col1.append(tkinter.Label(self, text="Comp %s:" % len(self.col1)))
        self.col2.append(tkinter.Label(self, text=pin))
        i = len(self.col1)
        self.col1[i-1].grid(row=i, column=0)
        self.col2[i-1].grid(row=i, column=1) 
```

它似乎与线程有关，但我找不到任何应该冻结的原因。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:35:47.153

Tkinter 不是线程安全的。如果您在主线程以外的线程中执行任何接触 GUI 对象的操作，那么您将得到不可预知的结果。几乎可以肯定，是线程导致了您的问题，因为您正在尝试从工作线程访问小部件。

# youtube - YouTube Analytics API - 内容所有者（网络/合作伙伴）跨频道的总观看次数

> ID：13753546
> 
> 赞同：2
> 
> 时间：2012-12-06T22:10:58.570
> 
> 标签：youtube, youtube-api

我正在尝试构建一个 YouTube Analytics API 查询，以返回单个内容所有者（YouTube 网络）拥有的多个频道的总观看次数。

我的请求如下所示：`GET https://www.googleapis.com/youtube/analytics/v1/reports?ids=contentOwner%3D%3D{MY_CONTENTOWNER_ID}&start-date=2000-01-01&end-date=2012-12-06&metrics=views&filters=claimedStatus%3D%3Dclaimed&key={MY_API_KEY}`

查询必须包含一个过滤器，所以我包含了claimedStatus=claimed。

两个问题：

1.  与 YouTube 内容管理器 > 视频报告中为已声明版权的视频报告的数量相比，返回的值相差很大（几乎 1/2）。

2.  如何获取所有视频的观看次数，而不仅仅是声明版权的视频？

关于跨渠道查询总订阅者，我有同样的问题。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:55:46.720

您可以尝试`filters=uploaderType==self`代替`filters=claimedStatus==claimed`吗？这会让你的指标更接近你的预期吗？

# php - 在循环中使用 PHP/AJAX 更新/设置到 MySQL

> ID：13753549
> 
> 赞同：0
> 
> 时间：2012-12-06T22:11:04.220
> 
> 标签：php, mysql, ajax, input, datepicker

我需要一个小提示。假设有这样的代码：

```
<?php
    $test = mysql_query("SELECT * FROM test WHERE id='1'");
    while($row = mysql_fetch_array($test))
      {
      echo "<tr>";
      echo "<td>" . $row['platform_name'] . "</td>";
      echo "<td>" . $row['scan_frequency'] . "</td>";
      echo "<td><input id='freq' type='text' /></td>";
      echo "<td><input id='date1' class='datepicker' type='text' /></td>";
      echo "<td><input id='date2' class='datepicker' type='text' /></td>";
      echo "<td><button id='save'>Save</button></td>";
      echo "</tr>";
      }
?> 
```

逻辑是，当我运行一个页面时，我会按预期从表测试中获取平台名称和扫描频率。然后我需要填写三个输入（新的频率和日期，格式为 yy-mm-dd）并使用“保存”按钮将其发送回（更新/设置）到表格测试。我怎样才能用 AJAX/PHP 做到这一点？

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:28:51.960

这是一个小提示。;-)

您将按钮属性 onclick 链接到一个 javascript 函数（例如 fetch_new_data）。然后定义函数 fetch_new_data，它向服务器发送一个 ajax 请求。服务器处理 ajax 请求，选择新数据，将其打包为 xml 或 json 并将其发送回客户端。在返回数据时，您查找表的位置，您希望在其中插入新数据并用一些新行扩展表。

您可以查找[jquery](http://jquery.com)，它在客户端简化了其中的几个任务。在服务器端，对于 PHP 和 JSON，请参阅[PHP - JavaScript Object Notation](http://php.net/manual/en/book.json.php)以及任何涵盖 PHP+JSON 和/或 PHP+AJAX 的教程或示例。

# ruby-on-rails - Rails 中两列的独立索引和对的唯一约束

> ID：13753551
> 
> 赞同：0
> 
> 时间：2012-12-06T22:11:16.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我的应用程序使用 PostgreSQL 数据库。我有一个看起来像这样的迁移：

```
class CreateTagAssignments < ActiveRecord::Migration
  def change
    create_table :tag_assignments do |t|
      t.integer :tag_id
      t.integer :quote_id
      t.integer :user_id

      t.timestamps
    end

    add_index :tag_assignments, :tag_id
    add_index :tag_assignments, :quote_id
  end
end 
```

这两列将非常频繁地搜索记录，因此我希望为每列设置一个单独的索引。但现在我想在数据库级别强制对 ( `tag_id`, ) 的唯一性。`quote_id`我试过`add_index :tag_assignments, [:tag_id, :quote_id], unique: true`了，但我得到了错误：

```
PG::Error: ERROR:  could not create unique index "index_tag_assignments_on_tag_id_and_quote_id"
DETAIL:  Key (tag_id, quote_id)=(10, 1) is duplicated.
: CREATE UNIQUE INDEX "index_tag_assignments_on_tag_id_and_quote_id" ON "tag_assignments" ("tag_id", "quote_id") 
```

那么多个索引显然可以完成多列索引的工作？如果是这样，那么我可以用 来添加约束`ALTER TABLE ... ADD CONSTRAINT`，但我怎样才能在 ActiveRecord 中做到这一点？

编辑：手动执行`ALTER TABLE ... ADD CONSTRAINT`会产生相同的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:16:40.987

正如 Erwin 指出的那样，“Key (tag_id, quote_id)=(10, 1) is duplicated”约束违规错误消息告诉您，您的唯一约束已经被现有数据违反。我从您的模型的可见内容推断出不同的用户可以在标签和引用之间引入一个共同的关联，因此当您尝试仅限制 quote_id,tag_id 对的唯一性时，您会看到重复。复合索引对于前导键的索引访问仍然有用（尽管效率略低于单列索引，因为复合索引的键密度较低）。您可能会获得所需的速度以及具有两个索引的适当唯一约束，其中一个 id 上的单列索引和所有三个 id 上的复合索引，另一个 id 作为其前导字段。

```
add_index :tag_assignments, :tag_id
add_index :tag_assignments, [:quote_id,:tag_id,:user_id], unique: true 
```

如果您使用 Pg >= 9.2，则可以利用 9.2 的索引可见性映射来启用[覆盖索引](https://wiki.postgresql.org/wiki/Index-only_scans#Covering_indexes)的仅索引扫描。在这种情况下，使上面的第一个索引包含所有三个 id 可能会有好处，其中 tag_id 和 quote_id 前导：

```
add_index :tag_assignments, [:tag_id,:quote_id,user_id] 
```

尚不清楚 user_id 如何约束您的查询，因此您可能会发现您希望索引的位置也更早提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:27:46.663

> 那么多个索引显然可以完成多列索引的工作？

根据你的描述，这个结论是不真实的，也是没有根据的。错误消息表明相反。多列[索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)或多`UNIQUE`列约束（也实现多列索引）提供了您无法从多个单列索引中获得的功能。

# python - 根据域名更改联合 ID 的解决方法？

> ID：13753555
> 
> 赞同：1
> 
> 时间：2012-12-06T22:11:26.560
> 
> 标签：python, google-app-engine, openid, google-openid

我在谷歌应用引擎上有一个 webapp，它检查用户是否使用以下代码登录（通过联合 ID）。我刚刚更改了域名，现在由于某种原因它无法识别我当前的任何用户。这是因为 openID 会根据我通过一些测试找到的域名而变化。是否有任何解决方法或方法可以让这些用户登录？

```
user = users.get_current_user()
currentregistereduser = None
try:
    user_db_qry = User.query(User.theid == user.federated_identity())
    user_db_list = user_db_qry.fetch(1)
    currentregistereduser = user_db_list[0]

    # I go on here to do all of the stuff for a logged in user

#if the user does not exist yet
except IndexError:
    logging.error("indexerror" + str(User.theid) + " and " + str(user.federated_identity()))
    user_db = User(
        name=user.nickname(),
        email=user.email(),
        theid=user.federated_identity(),
        visits = 0,
        medals = 0,
        prestige = 1,
        )
    user_db.put()
    #they go on to create their profile data here
    self.redirect("/profile") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:04:05.057

这似乎与 StackExchange 在实现 OpenID 时面临的问题类似。你可以在这里看到他们是如何处理的： [https ://blog.stackoverflow.com/2010/04/openid-one-year-later/](https://blog.stackoverflow.com/2010/04/openid-one-year-later/)

从该页面：

所以我们的跨站用户账户匹配现在是这样工作的：

1.  按 GUID 匹配。这是我们在帐户关联期间生成和分配的东西，因此它是一个完美的指纹。

2.  通过 OpenID URL 匹配。这适用于绝大多数 OpenID 提供者。

3.  通过 OpenID 提供的电子邮件地址匹配……如果您在我们的信任白名单中。这适用于那些生成特定域标识符的稀有 OpenID 提供商（目前只有 Google GMail）。

您也可以尝试使用 OpenID 库。这里列出了几个：http: [//openid.net/developers/libraries/](http://openid.net/developers/libraries/)

希望这可以帮助。

# c++ - “n”键在 Lua 表中有什么特殊含义吗？

> ID：13753557
> 
> 赞同：2
> 
> 时间：2012-12-06T22:11:36.370
> 
> 标签：c++, lua, associative-array

[http://lua-users.org/wiki/CppLuaDataPassing](http://lua-users.org/wiki/CppLuaDataPassing)有这个代码从 C++ 创建一个 Lua 表：

```
 // set first element "1" to value 45
   lua_pushnumber( state, 1 );
   lua_pushnumber( state, 45 );
   lua_rawset( state, -3 );

   // set the number of elements (index to the last array element)
   lua_pushliteral( state, "n" );
   lua_pushnumber( state, 1 );
   lua_rawset( state, -3 ); 
```

根据该示例，最后一个块似乎暗示 Lua 表具有一些特殊含义的键“n”，它存储最后一个数组元素的索引。

[但我在Lua Manual](http://www.lua.org/manual/5.2/manual.html)中找不到任何参考。

*   我的猜测是对还是错？

*   如果它是正确的，有人可以给我一个很好的参考来解释这个“n”键吗？

*   如果错了，示例中第二个代码块的含义是什么？

*   如果它是正确的，是在 C++ 中为 Lua 读取创建一个有效表所需的最后一个索引分配（假设 Lua 代码不会修改表）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:16:58.313

它曾经是保持表格大小的惯例。我相信在 lua 5.1 中，他们不赞成将其作为一种有利于`#`操作员的做法，因为有时它似乎会与人们在他们的表中填充的数据发生神奇的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:12:53.287

看看这个：[http ://www.lua.org/pil/19.1.html](http://www.lua.org/pil/19.1.html)

`n`表示数组的长度。它最常与`getn()`函数一起使用，它只是返回表中元素的数量。

# java - 在java中搜索数组中的元素

> ID：13753561
> 
> 赞同：0
> 
> 时间：2012-12-06T22:12:00.880
> 
> 标签：java

我想知道我应该使用哪种方法来搜索数组中的元素以及存储返回值的数据结构

例如一个 txt 文件包含以下内容

> 123名线月夜桌
> 124笑哭狗
> 123报价线制作宠物桌
> 127线阵hello桌

并且搜索元素是 line+table 我将每一行作为字符串读取，然后被空格溢出

输出应该是这样的

> 123 2（包含搜索元素的 ID 123 出现两次）
> 127 1

我想要一些关于搜索数组中元素的方法以及存储返回值的数据结构（ID和出现次数。我在考虑hashmap）的一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:20:28.893

读取文本文件并将以 table 结尾的每一行存储在`ArrayList<String>`. 然后对中的每个元素使用 contains `ArrayList<String>`。将结果存储在`HashMap<key,value>`其中 key 是 ID 并且 value 是 Integer 的地方，表示 ID 出现的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:25:06.507

首先，我会逐行阅读文件，除此之外真的没有别的办法。

其次，要选择要保存的行，您不需要进行拆分（假设：它们都以（空格）表结尾）。您可以使用以下方法获取它们：

```
if (line.endsWith(" table")) 
```

然后，我建议使用`Map<String, Integer>`数据类型来存储您的信息。这样，您就有了表的编号（键）以及在文件中找到的次数（值）。

```
Map<String, Integer> map = new HashMap<String, Integer>();
....reading file....
if (line.endsWith(" table")) {
    String number = line.substring(0, line.indexOf(" "))
    if (!map.containsKey(number)) {
        map.put(number, 1);
    } else {
        Integer value = map.get(number);
        value++;
        map.put(number, value);
    }
} 
```

# java - 为每个表格单元格添加进度条以获取文件进度 - Java

> ID：13753562
> 
> 赞同：13
> 
> 时间：2012-12-06T22:12:01.847
> 
> 标签：java, swing, file, jtable, jprogressbar

当您单击加密时，应用程序会加密放入表中的每个文件，我想在文件被加密时显示文件的进度。“状态”列将从“未处理”变为“已处理”。

类似于您查看电子邮件中附加的多个文件的方式。我一直在研究单元格渲染器和 ProgressBarTablecell，但不确定如何实现它们。任何帮助表示赞赏。我张贴桌子。

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Dimension;
    import java.awt.EventQueue;
    import java.awt.Point;
    import java.awt.datatransfer.DataFlavor;
    import java.awt.datatransfer.Transferable;
    import java.awt.datatransfer.UnsupportedFlavorException;
    import java.awt.dnd.DnDConstants;
    import java.awt.dnd.DropTarget;
    import java.awt.dnd.DropTargetDragEvent;
    import java.awt.dnd.DropTargetDropEvent;
    import java.io.File;
    import java.io.IOException;
    import java.util.List;

    import javax.swing.JFrame;
    import javax.swing.JPanel;
    import javax.swing.JScrollPane;
    import javax.swing.JTable;
    import javax.swing.UIManager;
    import javax.swing.UnsupportedLookAndFeelException;
    import javax.swing.table.DefaultTableModel;

    public class DropTable {

        public static void main(String[] args) {
            new DropTable();
        }

        public DropTable() {
            EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    try {
                        UIManager.setLookAndFeel(UIManager
                                .getSystemLookAndFeelClassName());//get look and feel of whatever OS we're using
                    } catch (ClassNotFoundException | InstantiationException
                            | IllegalAccessException
                            | UnsupportedLookAndFeelException ex) {
                    }

                    JFrame frame = new JFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new DropPane());
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                }

            });
        }

        public class DropPane extends JPanel {

            /**
             * 
             */
            private static final long serialVersionUID = 1L;
            private JTable table;
            private JScrollPane scroll;
            private DefaultTableModel tm = new DefaultTableModel(new String[] {
                    "File", "File Type", "Size", "Status" }, 0);

            public DropPane() {
                table = new JTable();
                table.setShowGrid(true);
                table.setShowHorizontalLines(true);
                table.setShowVerticalLines(true);
                table.setGridColor(Color.GRAY);

                table.setModel(tm);
                table.setFillsViewportHeight(true);
                table.setPreferredSize(new Dimension(500, 300));

                scroll = new JScrollPane(table);

                table.setDropTarget(new DropTarget() {
                    @Override
                    public synchronized void dragOver(DropTargetDragEvent dtde) {
                        Point point = dtde.getLocation();
                        int row = table.rowAtPoint(point);
                        if (row < 0) {
                            table.clearSelection();
                        } else {
                            table.setRowSelectionInterval(row, row);
                        }
                        dtde.acceptDrag(DnDConstants.ACTION_COPY_OR_MOVE);
                    }

                    @Override
                    public synchronized void drop(DropTargetDropEvent dtde) {
                        if (dtde.isDataFlavorSupported(DataFlavor.javaFileListFlavor))
                        {//make sure the flavors are files
                            dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);//dndconstants tells what to do with the drag files
                            //change to ACTION_COPY so it removes the file from the directory
                            Transferable t = dtde.getTransferable();
                            List fileList = null;
                            try {
                                fileList = (List) t.getTransferData(DataFlavor.javaFileListFlavor);//get file
                                if (fileList.size() > 0) {
                                    table.clearSelection();
                                    Point point = dtde.getLocation();//point is (x,y) 
                                    int row = table.rowAtPoint(point);
                                    DefaultTableModel model = (DefaultTableModel) table.getModel();
                                    for (Object value : fileList) {
                                        if (value instanceof File) {
                                            File f = (File) value;

                                            if (row < 0) {//insert rows into the right columns
                                            model.addRow(new Object[]{f.getAbsolutePath(), "", f.length(), "", ""});//path under "File"
                                            } else {
                                                model.insertRow(row, new Object[]{f.getAbsolutePath(), "", f.length(), "", ""});//get size of file
                                                row++;

                                            }
                                        }
                                    }
                                }
                            } catch (UnsupportedFlavorException e) {
                                e.printStackTrace();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        } else {
                            dtde.rejectDrop();
                        }
                    }

                });

                add(scroll, BorderLayout.CENTER);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-07T00:35:22.013

这是一个基本示例，它基本上使用`SwingWorker`扫描驱动器的根目录并列出所有文件。完成后，它将尝试读取每个文件，并自行`SwingWorker`更新表。

免责声明：这是一个例子。我使用 a`Thread.sleep`稍微减慢读取速度，忽略缓冲区和其他一些我会在生产代码中以不同方式执行的操作，但我想突出显示进度更新。

![在此处输入图像描述](../Images/8071dfc299675ef874bd512d9a778743.png)

**这个怎么运作**

首先，您需要一个能够显示进度更新的单元格渲染器。我选择了一个简单的 custom `JProgressBar`，但您可能喜欢更复杂一点的东西。

您需要一些方法来更新表模型。我选择提供一个简单的`updateStatus`方法，传递我正在更新的文件，这允许我使用内部查找来查找有问题的行。然后我使用该`setValueAt`方法更新行对象。这并不是真正需要的，但我想演示该`setValueAt`方法的使用，您可以`updateStatus`直接从该方法更新行对象。

最后，通知表模型的更改，以便它自己重新绘制。

```
public class UpdateTable {

    public static void main(String[] args) {
        new UpdateTable();
    }

    public UpdateTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                UpdatableTableModel model = new UpdatableTableModel();

                JTable table = new JTable();
                table.setModel(model);

                table.getColumn("Status").setCellRenderer(new ProgressCellRender());

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                FileFinderWorker worker = new FileFinderWorker(model);
                worker.execute();

            }
        });
    }

    public class ProgressCellRender extends JProgressBar implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            int progress = 0;
            if (value instanceof Float) {
                progress = Math.round(((Float) value) * 100f);
            } else if (value instanceof Integer) {
                progress = (int) value;
            }
            setValue(progress);
            return this;
        }
    }

    public class RowData {

        private File file;
        private String type;
        private long length;
        private float status;

        public RowData(File file, String type) {
            this.file = file;
            this.type = type;
            this.length = file.length();
            this.status = 0f;
        }

        public File getFile() {
            return file;
        }

        public long getLength() {
            return length;
        }

        public float getStatus() {
            return status;
        }

        public String getType() {
            return type;
        }

        public void setStatus(float status) {
            this.status = status;
        }
    }

    public class UpdatableTableModel extends AbstractTableModel {

        private List<RowData> rows;
        private Map<File, RowData> mapLookup;

        public UpdatableTableModel() {
            rows = new ArrayList<>(25);
            mapLookup = new HashMap<>(25);
        }

        @Override
        public int getRowCount() {
            return rows.size();
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public String getColumnName(int column) {
            String name = "??";
            switch (column) {
                case 0:
                    name = "File";
                    break;
                case 1:
                    name = "File Type";
                    break;
                case 2:
                    name = "Size";
                    break;
                case 3:
                    name = "Status";
                    break;
            }
            return name;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            RowData rowData = rows.get(rowIndex);
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = rowData.getFile();
                    break;
                case 1:
                    value = rowData.getType();
                    break;
                case 2:
                    value = rowData.getLength();
                    break;
                case 3:
                    value = rowData.getStatus();
                    break;
            }
            return value;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            RowData rowData = rows.get(rowIndex);
            switch (columnIndex) {
                case 3:
                    if (aValue instanceof Float) {
                        rowData.setStatus((float) aValue);
                    }
                    break;
            }
        }

        public void addFile(File file) {
            RowData rowData = new RowData(file, "A File");
            mapLookup.put(file, rowData);
            rows.add(rowData);
            fireTableRowsInserted(rows.size() - 1, rows.size() - 1);
        }

        protected void updateStatus(File file, int progress) {
            RowData rowData = mapLookup.get(file);
            if (rowData != null) {
                int row = rows.indexOf(rowData);
                float p = (float) progress / 100f;
                setValueAt(p, row, 3);
                fireTableCellUpdated(row, 3);
            }
        }
    }

    public class FileFinderWorker extends SwingWorker<List<File>, File> {

        private UpdatableTableModel model;

        public FileFinderWorker(UpdatableTableModel model) {
            this.model = model;
        }

        @Override
        protected void process(List<File> chunks) {
            for (File file : chunks) {
                model.addFile(file);
            }
        }

        @Override
        protected List<File> doInBackground() throws Exception {
            File files[] = new File(System.getProperty("user.dir")).listFiles();
            List<File> lstFiles = new ArrayList<>(Arrays.asList(files));
            for (File file : lstFiles) {
                // You could actually publish the entire array, but I'm doing this
                // deliberatly ;)
                publish(file);
            }
            return lstFiles;
        }

        @Override
        protected void done() {
            try {
                List<File> files = get();
                for (File file : files) {
                    new FileReaderWorker(model, file).execute();
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            }
        }
    }

    public class FileReaderWorker extends SwingWorker<File, File> {

        private File currentFile;
        private UpdatableTableModel model;

        public FileReaderWorker(UpdatableTableModel model, File file) {
            this.currentFile = file;
            this.model = model;

            addPropertyChangeListener(new PropertyChangeListener() {
                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    if (evt.getPropertyName().equals("progress")) {
                        FileReaderWorker.this.model.updateStatus(currentFile, (int) evt.getNewValue());
                    }
                }
            });

        }

        @Override
        protected File doInBackground() throws Exception {
            if (currentFile.isFile()) {
                setProgress(0);
                long fileLength = currentFile.length();
                BufferedReader reader = null;
                char[] cbuf = new char[1024];
                try {
                    reader = new BufferedReader(new FileReader(currentFile));
                    int bytesRead = -1;
                    int totalBytesRead = 0;
                    while ((bytesRead = reader.read(cbuf)) != -1) {
                        totalBytesRead += bytesRead;
                        int progress = (int) Math.round(((double) totalBytesRead / (double) fileLength) * 100d);
                        setProgress(progress);
                        Thread.sleep(25);
                    }
                    setProgress(100);
                } catch (Exception e) {
                    e.printStackTrace();
                    setProgress(100);
                } finally {
                    try {
                        reader.close();
                    } catch (Exception e) {
                    }
                }
            } else {
                setProgress(100);
            }
            return currentFile;
        }
    }
} 
```

重要概念。

永远不要用任何类型的长时间运行的操作阻塞事件调度线程。相反，将这些耗时的操作移到后台线程中。在这里，我用过`SwingWorker`

阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T00:00:14.593

您需要一个`TableCellRenderer`包含 的，如此[处](https://stackoverflow.com/a/10491290/230513)`JProgressBar`所示。[您可以从此处](https://stackoverflow.com/a/4637725/230513)看到的更新每个文件的进度。`SwingWorker`

![图片](../Images/5a0c079d4cbd293eff641127af287e9d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T10:55:40.653

您需要有某种过程，其整数值介于 0 到 100 之间。例如：

```
class Process {

    public Process(String name, int progress, String description) {
        super();
        this.name = name;
        this.progress = progress;
        this.description = description;
    }

    String name;
    int progress;
    String description; } 
```

这在表 tableModel 中建模。

需要渲染器来在其中一个表列上返回进度条：

```
class ProgressRenderer extends DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
            boolean hasFocus, int row2, int column) {

        int row = table.convertRowIndexToModel(row2);

        ProcessTableModel mtm = (ProcessTableModel) table.getModel();
        Process p = (Process) mtm.getProcessAt(row);

        JProgressBar bar = new JProgressBar();
        bar.setValue(p.progress);
        return bar;
    }
} 
```

现在您只需要一个线程在后台执行某些操作并更新进程对象。我复制了代码片段的完整示例可以在[这里](http://blue-walrus.com/2011/05/advanced-swing-multithreading-tutorial/)找到。

![在此处输入图像描述](../Images/6fc673b47646836f6a00b501d1b22ceb.png)

# excel - 通过 VBA 在 Excel Listobject/Table 中添加/修改/删除计算列公式

> ID：13753563
> 
> 赞同：9
> 
> 时间：2012-12-06T22:12:08.033
> 
> 标签：excel, listobject, excel-tables, vba

如果我在 Excel 表（即 ListObject）的列中手动输入公式，自动更正会将此公式应用于整个列。

有什么方法可以通过 VBA 控制这种行为，即我可以以某种方式修改/删除/添加这个公式吗？

我知道我可以简单地更改`ListObject.ListColumns(1).DataBodyRange`对象的公式 - 但这将覆盖之前输入的任何手动值 - 而在 UI 中更改公式将保持不变......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-07T10:06:14.017

感谢 Doug 和 bonCodigos 的评论/答案，我找到了简单的答案：

```
ListObject.ListColumns("Column name").DataBodyRange.FormulaR1C1 = "new formula" 
```

这将覆盖任何手动值（就像使用自动更正的正常行为一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:21:36.567

最好是您可以向我们展示您的工作表的屏幕截图。基于此，我们将明确给出答案。

这是一般假设。您有一个列表对象可以将一些数据转储到一列，并且该列中的其余单元格是手动交互的。

您可以先手动尝试以下方法，看看它是否适合您。手动的仍然被代码级别所取代，然后您在代码级别执行此操作。:)

这里的主要操作是**停止自动更正**

转到->工具菜单->单击自动更正选项->在自动更正选项卡中->

1-**防止所有自动更正**

清除复选框`Replace Text as you type`

2-**防止特定的更正**

清除该选项的相应复选框。我相信您对后者更感兴趣 - 您只是通过 listobject 转储的特定数据范围。

* * *

现在这里是在代码级别禁用此功能的代码。

使用 Excel 表 (ListObjects) 时，需要考虑两个自动更正选项：您可以详细了解这两个选项。

```
* Apply new rows and columns in table 
  (VBA AutoCorrect.AutoExpandListRange Property)
* Fill formulas in tables to create calculated columns 
 (VBA AutoCorrect.AutoFillFormulasInLists Property) 
```

您可能想在我们的列表对象顶部使用的代码是，

```
Application.AutoCorrect.AutoFillFormulasInLists = False 
```

`Application.AutoCorrect. AutoFillFormulasInLists`并且完全同意，如果在 ListObject 级别逐个表进行控制，它将更加有用。所以这里有一个解决方法。

因此，一种方法是每次清除表数据。当您清除数据时，您可以确保表格忘记论坛和格式。所以在删除表内容之前会先清除数据体范围的内容。

```
Sub forgetMe()
   With Sheet1.ListObjects("myTable")
      If Not .DataBodyRange Is Nothing Then
         .DataBodyRange.ClearContents
         .DataBodyRange.Delete
      End If
   End With

End Sub 
```

当您输入数据时，从自动关闭开始。

# ios - 一台mac创建2个证书

> ID：13753565
> 
> 赞同：0
> 
> 时间：2012-12-06T22:12:11.060
> 
> 标签：ios, certificate, provisioning-profile, ios-provisioning

是否可以在一台 mac 机器上**创建**多个 ios 分发证书？

当我双击证书时，它不会在我的钥匙串中创建密钥。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:34:57.253

您可以要求一个新的，但这并不等同于创建两个。我不相信您可以在一台机器上创建两个，因为它是从您的计算机到他们的服务的独特秘密对。但是，如果您需要将开发证书导出到另一台计算机，您可以做的是从 XCode 导出配置文件并将其安装在另一台计算机上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:44:43.357

证书不会创建密钥，您可以。当您从证书颁发机构请求证书时执行钥匙串访问中的第一步时，这会生成密钥并为您提供 Apple 可以用来对其进行签名的文件。当您安装证书时，它只是附加到已经存在的密钥上。

为了拥有多个分发证书，您必须创建两个密钥并要求 Apple 签署每个密钥。然后，您将收到每个人的证书。但是我不相信在正常情况下Apple会签署多个密钥。

# objective-c - 将数组传递给drawrect条形图

> ID：13753566
> 
> 赞同：0
> 
> 时间：2012-12-06T22:12:12.687
> 
> 标签：objective-c, arrays, drawrect

我想在用户界面的现有视图中绘制条形图。在用户输入后计算单条高点并存储在数组中。在一个按钮被衬套最终绘制条形图之后，该数组应该传递给我的自定义 GraphView 类。但它不起作用。我不知道我是否正确传递了数组（如何检查它？）以及如何在我的 drawrect 方法中访问它以设置单条高点？一旦我`NSNumber *balkenHoehe = [balkenArray objectAtIndex:i];`输入 drawrect 方法并`balkenHoehe`作为 rect-hight 我得到错误。我需要做什么？谢谢！

这是我的代码：

*我的 AppDelegate.h*

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet NSTextField *eingabeNennmass;
@property (weak) IBOutlet NSTextField *eingabeToleranzOben;
@property (weak) IBOutlet NSTextField *eingabeToleranzUnten;
@property (weak) IBOutlet NSTextField *eingabeAnzahlWerte;
@property (weak) IBOutlet NSTextField *ausgabeMittelwert;
@property (weak) IBOutlet NSTextField *ausgabeToleranz
@property (weak, nonatomic) IBOutlet GraphView *ausgabeGraph;

- (IBAction)pushSimulation:(NSButton *)sender;

@end 
```

*我的 AppDelegate.m 缩短了*

```
#import "GraphView.h" 
#import "AppDelegate.h"

implementation AppDelegate
....//couple calculating code and building the array klassenArray//...

    [klassenArray addObject:[NSNumber numberWithDouble: n]];
....//more code//...

[_ausgabeGraph setBalkenArray:klassenArray]; (connected with the GraphView view on the user interface)

....//more code//... 
```

*我的 GraphView.h*

```
#import <Cocoa/Cocoa.h>

@interface GraphView : NSView
{

NSMutableArray *balkenArray;

}

- (NSMutableArray *) balkenArray;
- (void) setBalkenArray:(NSMutableArray *)abalkenArray;

@end 
```

*我的 GraphView.m*

```
#import "GraphView.h"

@implementation GraphView

//*******************************
- (void) setBalkenArray:(NSMutableArray *)abalkenArray
{
    balkenArray = abalkenArray;
    [self setNeedsDisplay:YES];
}

//*******************************
- (NSMutableArray *)balkenArray
{
    return balkenArray;
}

//*******************************
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

    }

    return self;
}

//*******************************
- (void)drawRect:(NSRect)dirtyRect
{

    NSRect bounds = [self bounds];
    float fieldWith = bounds.size.width / 12.0;
    float fieldHeight = bounds.size.height / 12.0;

        //background
    NSRect hintergrundRect =
    hintergrundRect = NSMakeRect(bounds.origin.x, bounds.origin.y,
                                  bounds.size.width, bounds.size.height);
    [[NSColor grayColor] set];
    [NSBezierPath fillRect:hintergrundRect];

        //Diagram

    for (int i = 1; i<=10; i++) {
        NSNumber *balkenHoehe = [balkenArray objectAtIndex:i];
//        NSLog(@"rectnumber at index %d is %@", i, balkenHoehe);

        NSRect aRect =
        aRect = NSMakeRect (fieldWith*i, fieldHeight, fieldWith, balkenHoehe); //x, y, width, hight
        // draw rect
    [[NSColor whiteColor] set];
    [NSBezierPath fillRect:aRect];

        // draw border
    [[NSColor blackColor] set];
    NSBezierPath *aPath = [NSBezierPath bezierPathWithRect:aRect];
    [aPath setLineWidth:1];
    [aPath stroke];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:57:19.010

好的，在这里感谢我自己！好小子。我在 GrapView.h 中使用了 @property 和 @systnesize 东西

```
@interface GraphView : NSView
{
NSMutableArray *balkenArray;
}
@property(nonatomic, retain)NSMutableArray *balkenArray;
@property(readwrite, assign)double _maxKlasse;
@end 
```

和 GraphView.m

```
@synthesize balkenArray, _maxKlasse; 
```

在 AppDelegate.m 中，数组被发送到视图：

```
_ausgabeGraph.balkenArray=klassenArray;
_ausgabeGraph._maxKlasse=maxKlasse;
[_ausgabeGraph setNeedsDisplay:YES]; 
```

最后在 GraphView.m 中使用数组来绘制条形图：

... 代码 ...

```
for (int i = 1; i<=10; i++) {
  double _x = [(NSNumber*)[balkenArray objectAtIndex:i-1] doubleValue];

  //draw rect
  NSRect aRect =
    aRect = NSMakeRect (fieldWith * i, fieldHeight, fieldWith, (6*fieldHeight*_x/_maxKlasse)); //x, y, width, variable hight
    [[NSColor whiteColor] set];
    [NSBezierPath fillRect:aRect]; 
```

...更多代码...

感谢 Gabriele Petronella 使用属性和合成的提示。只要我了解它就更容易使用。我仍然需要学习命名约定。

# version-control - 如何恢复 Fossil 存储库中的单个目录？

> ID：13753568
> 
> 赞同：0
> 
> 时间：2012-12-06T22:12:23.670
> 
> 标签：version-control, dvcs, fossil

一些提交前，我删除了我的[Fossil](http://www.fossil-scm.org)存储库中的一个目录。我该如何取回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:21:12.900

1.  在文件夹 1 中克隆您的存储库

2.  在包含丢失目录的最后一次签入时打开

3.  在文件夹 2 中克隆您的存储库

4.  打开小费

5.  将丢失的目录从文件夹 1 复制到文件夹 2

6.  在文件夹 2 中执行 addremove

7.  提交文件夹 2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:21:51.980

最简单的方法是：

*   打开`fossil ui`
*   转到您的目录存在的最后一次提交
*   单击“zip file”以下载当时存储库的 zip
*   仅解压缩正确的文件夹。

# php - 通过变量访问对象属性

> ID：13753583
> 
> 赞同：2
> 
> 时间：2012-12-06T22:13:12.447
> 
> 标签：php

我以前见过这个问题，但我的特殊情况似乎很奇怪，我无法解决它 - 任何见解都将不胜感激。

我正在尝试使用变量值访问对象属性，即。

```
$foo = new Object();
$foo->first = 'bar';

$array = array(0 =>'first', 1 =>'second');

$var = 0;

return $foo->{$array[$var]}; 
```

这会引发错误“注意：未定义的属性：stdClass::$first”。删除大括号会返回相同的结果。

我不明白什么？（下面的实际代码和错误 - 错误记录在 Drupal 看门狗日志中。）

```
private function load_questionnaire_queue($type, $comparator_id, $comparing_id_array)
{
  $queue = array();
  $type_map = array(
    0 => "field_portfolio_district['und'][0]['nid']",
    1 => "field_time_period['und'][0]['tid']",
  );

  foreach ($this->questionnaires as $q)
  {

    // The commented code below works as expected
    // if ($q->field_portfolio_district['und'][0]['nid'] == $comparator_id &&
    //      in_array($q->field_time_period['und'][0]['tid'], $comparing_id_array))

    // This returns an identical error, with or without braces:
    if ($q->{$type_map[$type]} == $comparator_id && 
            in_array($q->{$type_map[!$type]}, $comparing_id_array))
    {
      $queue[] = node_view($q, $view_mode = 'full');
    }
  }

  $this->queue = $queue;
} 
```

> 注意：未定义属性：StdClass::$field_portfolio_district['und'][0]['nid'] in ComparisonChart->load_questionnaire_queue()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:17:48.640

这就像一个魅力：

```
<?php
$foo = new StdClass();
$foo->first = 'bar';

$array = array(0 =>'first', 1 =>'second');

$var = 0;

echo $foo->{$array[$var]};
?> 
```

但我怀疑这会奏效：

```
<?php
$foo = new StdClass();
$foo->first = array('a' => array('b' => 'test'));

$array = array(0 =>'first["a"]["b"]', 1 =>'second');

$var = 0;

echo $foo->{$array[$var]};
?> 
```

# c++ - static_cast 有什么区别 (var) 和 *(int*)&var?

> ID：13753586
> 
> 赞同：3
> 
> 时间：2012-12-06T22:13:20.977
> 
> 标签：c++, type-conversion, static-cast

好的，所以我尝试这样做

```
 int b;
 char x = 'a';

//Case 1    
b = static_cast<int>(x); 
std::cout<<"B is : "<<b<<std::endl;

//Case 2
b = *(int*)&x;   
std::cout<<"B is changed as  :: "<< b <<std::endl; 
```

现在我知道，在案例 2 中，第一个字节`x`被重新解释为认为它是一个整数，并且位模式被复制到`b`其中给出了一些垃圾，而在案例 1 中，它只是将值从 转换`char`为`int`。

除此之外，这两者之间有什么区别吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T22:16:18.170

第一个只是转换值：`int b = x;`与`int b = static_cast<int>(x);`.

第二种情况假装`int`在实际生活的地方有`x`生活，然后尝试阅读`int`。这是完全未定义的行为。（例如， an`int`可能比 a 占用更多空间`char`，或者可能是`char`居住在一个没有`int`人可以居住的地址。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:25:11.873

第 2 种情况是 C 风格转换（由 bhuang3 标识），但它不是与第 1 种情况等效的 C 风格。那将是 `b = (int)x;`. 情况 2 的 C++ 等价物将是`b = *reinterpret_cast<int*>(&x);` 无论你怎么做，情况 2 都是未定义的行为，因为 x 占用一个字节，而在 x 的地址处强制读取 int 的数据值会给你一个分段错误（某些总线错误系统）如果它不在 a 的合法地址`int`，或者它只会读取接下来的 3 个字节，我们不知道它们的值是什么。因此，正如您所观察到的，它显示为“垃圾”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:21:38.070

1.  `static_cast`不提供运行时检查，如果您知道您引用了特定类型的对象，则使用该检查。

2.  第二个案例实际上是`c-style cast`

# html - 如何防止重新调整浏览器窗口的大小以防止元素相互移动？

> ID：13753589
> 
> 赞同：-3
> 
> 时间：2012-12-06T22:13:25.103
> 
> 标签：html, css

我正在使用 CSS。

假设我有两个彼此相邻的图像元素。如何做到这一点，如果我将浏览器的大小更改为小于两个图像的宽度，它将导致页面获得水平滚动条（而不是将第二个图像推到第一个图像下方） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:24:58.207

你会想要使用相对定位

例子：

```
test
{
position:relative;
left:200px;
} 
```

这样，您的图像的位置将基于它左侧的其他对象的位置（在您的情况下是另一个图像）。

您还可以根据窗口坐标放置绝对位置。

希望这有助于 IronWill

# javascript - Ajax 成功使用 fadeIn() 附加 HTML

> ID：13753591
> 
> 赞同：1
> 
> 时间：2012-12-06T22:13:32.193
> 
> 标签：javascript, jquery

我将 html 附加到`<ul>`ajax 成功函数上。

**HTML**

```
<ul id="revisionList">
  <!-- ajax.js will insert ordered list here based on number of revisions -->
</ul> 
```

**阿贾克斯成功**

```
success: function(json)
        {
            /*
            If successful build the list of revision links
            Links include link that will load images in next tab
            */

            //loop through revisions and display
            for(i = 0, j = json.revision_count.length; i < j; i++) {
                //count for revision number
                var k = i + 1;
                //revision number, does not match k
                var revisionID = json.revision_count[i].layout;
                $('#revisionList').append(
                    "<li><a onclick=\"initEditRevision(" + galleryID + ',' + revisionID + ")\" href=\"#editRev\" data-toggle=\"tab\">Revision " + k + "</a></li>"
                );
            }

        } 
```

列表建立后如何淡化整体`<ul>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:15:50.010

试试这个

```
success: function(json) {
    var $list = $('#revisionList');
        $list.hide();  // Hide Here
    for (i = 0, j = json.revision_count.length; i < j; i++) {
        var k = i + 1;
        var revisionID = json.revision_count[i].layout;
        $list
            .append("<li><a onclick=\"initEditRevision(" + galleryID + ',' +  
                     revisionID + ")\" href=\"#editRev\"
                    data-toggle=\"tab\">Revision " + k + "</a></li>");
    }
    $list.fadeIn('slow'); // Fade In here
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:16:00.383

```
for (...

}
$("#revisionList").hide().fadeIn(); 
```

或者你可以在`for`循环之前隐藏它；任何效果最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:20:17.657

`display`如果您不想使用 CSS，则必须先使用 CSS 属性或使用样式属性隐藏它。

```
#revisionList{display: none;} 
```

或者

```
<ul id="revisionList" style="display: none;"> 
```

然后淡入之后，所有`li`的都被完全附加了。

```
$("#revisionList").fadeIn(500); 
```

# php - 如何从文件 config.yml 中获取变量？

> ID：13753592
> 
> 赞同：0
> 
> 时间：2012-12-06T22:13:42.510
> 
> 标签：php, symfony

欢迎我有一个文件 config.yml

```
d_facebook:
    file:   %kernel.root_dir%/../src/FacebookBundle/Facebook/FacebookInit.php
    app_id: 296925470418713
    secret: fb4d0a99bcf80e55f47077ffadcac921
    cookie: true
    permissions: [email, user_birthday, user_location, user_about_me, user_location] 
```

然后我有这个类，它从文件 config.yml 中检索数据

```
<?php

namespace D\FacebookBundle\Facebook;

use Symfony\Component\Yaml\Yaml;
use Symfony\Component\DependencyInjection\ContainerBuilder;

use D\FacebookBundle\Facebook\Facebook;
use D\FacebookBundle\Facebook\FacebookConfig;

class FacebookInit
{
    public $hAPI;
    public $userProfile;
    public $user;
    public $logoutUrl;
    public $loginUrl;
    public $config;

    public function __construct()
    {
        $this->config = Yaml::parse('/facebookx/app/config/config.yml');

        $this->hAPI = new Facebook(array(
            'appId' => $this->config['d_facebook']['app_id'],
            'secret' => $this->config['d_facebook']['secret']
            ));
        $this->setUserProfile();
    }
} 
```

有什么更好的方法来做到这一点？如何从文件 config.yml 中获取变量？我问一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:01:39.430

在您的配置文件中，您将拥有如下内容：

```
parameters:
    d_facebook:
        file:   %kernel.root_dir%/../src/FacebookBundle/Facebook/FacebookInit.php
        app_id: 296925470418713
        secret: fb4d0a99bcf80e55f47077ffadcac921
        cookie: true
        permissions: [email, user_birthday, user_location, user_about_me, user_location] 
```

您可以从 S2 控制器获取参数数组：

```
$faceBookParameters = $this->container->getParameter('d_facebook'); 
```

但是，您可能希望将 Facebook 类设为服务并使用依赖注入来设置参数。所以在你的 services.yml 中：

```
services:        
    facebook:
        class:  Path\To\Facebook
        arguments:  
            - '%d_facebook%'  # This injects your parameters 
```

在您的控制器中，您只需执行以下操作：

```
$facebook = $this->get('facebook'); 
```

再次通读服务部分。 [http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:38:54.217

也许您想做一些事情，比如[为 bundle 公开语义配置](http://symfony.com/doc/current/cookbook/bundles/extension.html)？

这是如果您想从根级别配置“命名空间”（如“d_facebook”）获取配置。您将在包的 DependencyInjection 文件夹中创建一个配置和一个扩展类。配置类将有一个“getConfigTreeBuilder”方法，该方法将为您的命名空间中的键定义设置。然后扩展类将有一个“加载”方法，该方法将接收解析的配置并能够使用 $container->setParameter('key', 'value') 来允许访问其他类中的配置。链接的食谱有更多详细信息。

# c++ - 带变量的 SQL 查询

> ID：13753593
> 
> 赞同：2
> 
> 时间：2012-12-06T22:13:54.657
> 
> 标签：c++, mysql, qt

我试图将值插入到 mysql 数据库中：

```
database->queryDatabase("INSERT INTO recordings (title, recording, kit, date) VALUES ('"+recordingTitle+"', '"+ recordingArray +"', '"+kitID+"', '"+recordingDateTime+"')"); 
```

database->queryDatabase 只是将它发送到我的数据库连接。

我遇到的问题是：

```
error: no match for 'operator+' in 'operator+(const QString&, const char*)(((const char*)"\', \'")) + ((Studio*)this)->Studio::recordingDateTime 
```

每个 var 的类型为：

```
QString recordingTitle;
std::vector<std::pair<int, QString> > recordingArray;
int kitID;
QDateTime recordingDateTime; 
```

如何将每一个添加到数据库中？vector 和 QDateTime 类型不喜欢查询字符串中的 +。

坦克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:33:18.443

没有 to 的隐式`QDateTime`转换`QString`。您需要显式转换它：

```
database->queryDatabase("INSERT INTO recordings (title, recording, kit, date)"
    " VALUES ('" + recordingTitle + "', '" + recordingArray +"', '" + kitID + 
        "', '" + recordingDateTime.toString() + "')"); 
```

您可能必须提供格式说明符才能将其转换为 MySQL 喜欢的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:28:04.100

还请记住，连接 SQL 查询不是一个好主意，除非您确切知道自己在做什么，因为它会启用[SQL 注入](http://de.wikipedia.org/wiki/SQL-Injection)攻击。您应该使用[bindValue 方法](http://doc.qt.digia.com/qt/sql-sqlstatements.html#inserting-updating-and-deleting-records)。这也有副作用，你的查询会变得更快，也很可能解决原来的问题。

# html - 隐藏在电子邮件中的块引用

> ID：13753594
> 
> 赞同：5
> 
> 时间：2012-12-06T22:13:57.890
> 
> 标签：html, email

我们的系统可以选择在文件状态更改时发送电子邮件。您可以在状态更改中附加一条消息，它将在电子邮件中发送。

这是一个示例电子邮件：

```
File 1234 has been updated by <b>John Smith</b> with a status of <q>Updated</q> with an attached message of:<br/><br/>
<blockquote>Updated the file</blockquote>
<br/> 
```

发送这些电子邮件时，它们的主题是：`Status update for file 1234`.

Zimbra 和大多数其他电子邮件客户端会将来自同一个文件的多封电子邮件分组到同一个“对话”中。出于某种原因，如果发送了两封带有相同状态消息的电子邮件，则该消息将隐藏在电子邮件中。您需要单击“显示引用文本”以显示“隐藏”消息。

我的老板没有注意到“显示引用的文本”链接，并抱怨电子邮件是空白的。

如何让电子邮件客户端不隐藏它认为“引用”的文本？为什么它认为我的`<blockquote>`标签是上一封电子邮件中恰好包含相同文本的引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:07:17.883

> 您不必使用`blockquote`标签。尝试使用`div`或`p`使用样式属性。

例如在`style`：

```
p.blockquote {
  font: 14px/22px normal helvetica, sans-serif;
  margin-top: 10px;
  margin-bottom: 10px;
  margin-left: 50px;
  padding-left: 15px;
  border-left: 3px solid #ccc;
} 
```

在 HTML 中：
`<p class="blockquote">...</p>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T01:07:22.840

p 标签更通用，并且比 blockquote 更常被允许在邮件客户端中使用。

# wolfram-mathematica - 在 Mathematica 中求解积分方程

> ID：13753599
> 
> 赞同：2
> 
> 时间：2012-12-06T22:14:21.557
> 
> 标签：wolfram-mathematica, integration

亲爱的 Mathematica 用户，

我是一名物理专业的学生（对 Mathematica 不太熟练），我必须求解一个积分方程。下面是我尝试的草图：

```
iterstepGap := (valuesgap = Table[
    {t,
     NIntegrate[
     Exp[2 (tprime - t)] gapStart[tprime]/(3- tprime) EllipticK[Exp[tprime - t]],
       {tprime, -10, t}, MaxRecursion -> 150, WorkingPrecision -> 30] +
      NIntegrate[
        Exp[tprime - t] gapStart[tprime]/(3- tprime) EllipticK[Exp[t - tprime]],
       {tprime, t, 0},  MaxRecursion -> 150, WorkingPrecision -> 30]
     }, {t, -10, 0, 1}];
  approxgap[t_] = InterpolatingPolynomial[valuesgap, t]
) 
```

和

```
gapStart[t_] = 0.002 Exp[-t] ((Exp[t] + t)/(t - 1) + 1); 
```

问题是该函数的振荡非常糟糕。正如我所说，我对mathematica 很陌生，我不太确定我在做正确的事情......是否有更好的方法来解决这种方程？

非常感谢您！

# ruby - “语法错误，意外的 tIDENTIFIER，期待 $end”

> ID：13753601
> 
> 赞同：0
> 
> 时间：2012-12-06T22:14:33.503
> 
> 标签：ruby, nokogiri

我根据本[教程](http://www.youtube.com/watch?v=PWI1PIvy4A8)整理了这个脚本。

```
require 'nokogiri'
require 'open-uri'

url = "http://sfbay.craigslist.org/sby/jjj/"

data = Nokogiri::HTML(open(url))

puts data.at_css('.itempn').text
puts data.at_css('.itemcg').text 
```

我不断收到此错误：

```
Macintosh:nokogiri rgrush$ ruby aaa.rb
aaa.rb:1: syntax error, unexpected tIDENTIFIER, expecting $end
url = "http://sf...
                      ^ 
```

有任何想法吗？会不会是我的依赖项之一已过时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:26:32.023

很可能您在 URL 中有一个非 ASCII 字符。

尝试添加

```
# encoding: UTF-8 
```

作为第一行`aaa.rb`

所以它看起来像：

```
# encoding: UTF-8
require 'nokogiri'
require 'open-uri' 
```

# php - PHP/Mysql 风格的输出数据

> ID：13753602
> 
> 赞同：0
> 
> 时间：2012-12-06T22:14:45.447
> 
> 标签：php, mysql

我正在尝试设置我的输出数据的样式，但我不知道究竟是如何做到的。

我的代码如下所示：

```
$Sql99 = "SELECT Cat_Name, Cat_Id, COUNT(Product_Id) AS itemcount FROM tabproducts 
      INNER JOIN tabcats ON tabproducts.Cat_Id = tabcats.Cat_Id  
      GROUP BY tabproducts.Cat_Id ORDER BY itemcount DESC LIMIT 0,4";
$Query99 = mysql_query($Sql99, $Conn);
while($Rs99 = mysql_fetch_array($Query99)){ 

 $cats .= "<li><a href=\"\">".$Rs99["Cat_Name"]."</a></li>"; //this is fine

 $Sql08 = "SELECT tabproducts.*
      FROM tabproducts
      WHERE tabproducts.Cat_Id = '".$Rs99["Cat_Id"]."' ORDER BY Product_Id DESC
      LIMIT 0,5";
$Query08 = mysql_query($Sql08, $Conn) or die(mysql_error());
while($Rs08 = mysql_fetch_array($Query08)){

//OUTPUT

}
 } 
```

我的问题是第二次选择我尝试做的信息输出应该是这样的：

```
 <div>
        <ul class="home-listagem-empresas"> //categorie 1
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
        </ul>
      </div>
      <div>
        <ul class="home-listagem-empresas"> //categorie 2
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
        </ul>
      </div>
      <div>
        <ul class="home-listagem-empresas"> //categorie 3
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
        </ul>
      </div>
      <div>
        <ul class="home-listagem-empresas"> //categorie 4
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
          <li>
            <h1>".$Rs08["Product_Name"]."</h1>
          </li>
        </ul>
      </div> 
```

每个`ul`带有`li`'s 的都代表 4 个类别的结果。

对不起，如果我不能很好地解释它，我的英语不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:25:39.923

如果我理解正确，您的问题是您无法以方便的方式呈现数据。这些类型的问题（嵌套循环）在应用程序开发中经常出现，您可能应该考虑为此练习基本算法。[这里](http://www.primitivetype.com/articles/php_nested_for_loops.php)有[几个](http://www.phpfreaks.com/tutorial/php-loops)教程可以帮助你。

话虽如此，要获得您想要的输出，您可以这样做：

```
$cats .= "<div><ul class='home-listagem-empresas'>";
while($Rs08 = mysql_fetch_array($Query08)){
  //OUTPUT
  $cats .= "<li><h1>".$Rs08["Product_Name"]."</h1></li>";
}
$cats .= "</ul></div>"; 
```

一切顺利，

# go - Go 中的可变参数泛型参数

> ID：13753603
> 
> 赞同：3
> 
> 时间：2012-12-06T22:14:50.837
> 
> 标签：go, slice, polyvariadic

假设我想在 Go 中为 Slices制作等效的[JavaScript函数。`Array.splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)我有以下代码：

```
func splice(slice []int, index, amount int, elements ...int) []int {
    newslice := make([]int, 0)
    for i := 0; i < index; i++ {
        newslice = append(newslice, slice[i])
    }
    for i := index + amount; i < len(slice); i++ {
        newslice = append(newslice, slice[i])
    }
    for _, el := range elements {
        newslice = append(newslice, el)
    }
    return newslice
} 
```

此示例将有效，但仅适用于 type 的参数`int`。我想让它成为通用的，并且我知道我应该给可变参数`elements`提供 type `interface{}`，但是如何从函数内部创建一个具有该接口类型的新切片？

换句话说，如何根据函数第一行中的参数类型动态指定切片的类型，在哪里`newslice`创建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:45:17.273

而不是在 Go 中模拟 JavaScript（为什么？？？）我想建议从 SliceTricks 的构建块中编写类似的所需[操作](http://code.google.com/p/go-wiki/wiki/SliceTricks)。

他们是：

*   完全不知道类型（免费考虑“泛型”）。
*   与在`[]interface{}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T00:49:59.273

### 使用反射

如果你真的想做通用的东西，反射是最终的答案。有关您的问题的详细信息，请参阅反射包中的[MakeSlice 文档](http://golang.org/pkg/reflect/#MakeSlice) 。

您只需要检索传入切片的类型（使用`TypeOf(...)`）并`MakeSlice`正确应用。

使用反射创建切片的示例：

```
y := []int{1,2,3}
t := reflect.TypeOf(y)

slice := reflect.MakeSlice(t, 0, 10)
slice = reflect.Append(slice, reflect.ValueOf(2))

fmt.Println(slice.Interface()) 
```

[在这里运行它](http://play.golang.org/p/tA042mCXPQ)。

### 使用`[]interface{}`

另一种使用方法是`[]interface{}`，它可以存储任何值，但可能会导致运行时恐慌，因为您完全忽略了编译器类型检查（这是一件坏事）。

[这](http://play.golang.org/p/pKrCzRlzpR)是一个用于`[]interface{}` 存储任意值的示例。有了这个，您不需要知道拼接实现中的类型，您只需拼接并`[]interface{}`用于新切片。

这种方法有一个缺点，您不能`[]interface{}`轻松地将某些切片转换为。您必须手动复制它，如[之前的帖子](https://stackoverflow.com/questions/9121515/converting-slice-of-structs-to-slice-of-empty-interface)中所述。

### 结论

无论您使用哪个版本，如果不知道类型并手动将其转换回来，您将永远无法恢复类型安全。Go 中没有这样的东西可以为你做到这一点。这意味着，您将在代码中使用类似的内容来重新获得类型安全：

```
x := []int{1,2,3,4}
y := splice(x, ...)
yn := []int(y) 
```

# c# - 在 C# 中使用并行

> ID：13753606
> 
> 赞同：-2
> 
> 时间：2012-12-06T22:15:08.847
> 
> 标签：c#, foreach, parallel-processing

我是线程和并行的新手。我有这种方法用于 C# 中的游戏，需要使用并行迭代。如何在以下方法的 for 循环中使用它？

```
public int[,] GetLegalMoves()
{
    int[,] legalMoves = new int[8, 8];

    for (int i = 0; i < 8; i++)
        for (int j = 0; j < 8; j++)
            if (IsMoveLegal(i, j)) legalMoves[i, j] = 1;
            else legalMoves[i, j] = 0;

    return legalMoves;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:25:28.267

这可以通过并行化你的外循环来并行化：

```
public int[,] GetLegalMoves()
{
    int[,] legalMoves = new int[8, 8];

    Parallel.For(0, 8, i =>
    {
        for (int j = 0; j < 8; j++)
            if (IsMoveLegal(i, j)) legalMoves[i, j] = 1;
            else legalMoves[i, j] = 0;
    });

    return legalMoves;
} 
```

话虽如此，这可能会导致运行速度变慢，因为 8x8 矩阵是如此之小，以至于调度并行工作的开销可能高于所获得的收益，除非`IsMoveLegal`是相当昂贵的操作。

这也将要求`IsMoveLegal`可以安全地从多个线程中使用。

# c++ - 类（里程表）- 错误消息

> ID：13753615
> 
> 赞同：0
> 
> 时间：2012-12-06T22:16:29.277
> 
> 标签：c++, debugging, class

我想知道当我尝试编译我的代码时，是否有人可以告诉我这些错误消息的含义。

这是我得到的错误：
in function 'int main()': not match for 'operator<<'in 'std::operator<<[with_Traits = std::char_traits(((std::basic_ostr ...

它会重复一段时间。

我想发布我的完整代码，以便您了解我的任务是什么，它不会那么长！=)

```
#include <iostream>
#include <cstdlib>
using namespace std;

class Odometer

{
public:

Odometer();

void reset();
void totalfuel();

void input_miles(int getmiles);
void Odometer::set_fuel_efficiency(double fuel_efficiency);

int gallonsUsed;

private:
int milesDriven;
double fuel_efficiency;
int getmiles;   
};

Odometer::Odometer()
{   
milesDriven = 0;
fuel_efficiency = 0;    
}

void Odometer::reset()
{
milesDriven = 0;
}

void Odometer::totalfuel()
{
fuel_efficiency = (milesDriven/gallonsUsed);
}

void Odometer::input_miles(int miles_driven)
{
milesDriven = milesDriven + miles_driven;

}

void Odometer::set_fuel_efficiency(double Fuel_efficiency)
{
fuel_efficiency = Fuel_efficiency;
}

double Odometer::getgallons()
{
return milesDriven/fuel_efficiency;
} 

// ======================
// main function
// ======================
int main()
{
// Two test trips
Odometer trip1, trip2;

trip1.reset();
trip1.set_fuel_efficiency(45);
trip1.input_miles(100);
cout << "For your fuel-efficient small car:" << endl;
cout << "After 100 miles, " << trip1.totalfuel() << " gallons used." << endl;
trip1.input_miles(50);
cout << "After another 50 miles, " << trip1.totalfuel() << " gallons used." << endl;

trip2.reset();
trip2.set_fuel_efficiency(13);
trip2.input_miles(100);
cout << "For your gas guzzler:" << endl;
cout << "After 100 miles, " << trip2.totalfuel() << " gallons used." << endl;
trip2.input_miles(50);
cout << "After another 50 miles, " << trip2.totalfuel() << " gallons used." << endl;

system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:18:14.903

您希望`cout << void`打印什么？

`totalfuel()`返回`void`，并且您将其作为参数传递给`cout::operator <<`. 你的意思是从方法中返回一些东西吗？

也许：

```
double Odometer::totalfuel()
{
    fuel_efficiency = (milesDriven/gallonsUsed);
    return fuel_efficiency;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T22:20:14.280

`totalFuel()`返回无效。我认为您的意思是调用该`getgallons()`方法。

# oracle - PL/SQL 将 7 天添加到 datetime 并在该日期之间获得一些东西

> ID：13753617
> 
> 赞同：1
> 
> 时间：2012-12-06T22:16:41.523
> 
> 标签：oracle, datetime, plsql

好的，所以我有关于 PL/SQL 的数据库。

这是我的sql问题：

```
SELECT t.AC_NUMBER, t.DATE, a.comment_1, a.comment_2, a.comment_3, a.comment_4
  FROM proddba.cust_info t
       left join proddba.cust_descr a on a.ac_number=t.ac_number
 where a.open_date=(select min(b.open_date) 
                      from proddba.cust_descr b 
                     where b.ac_number=t.ac_number 
                       and b.open_date>=t.date 
                       and b.open_dane<=t.date+7days) 
```

如何动态添加 +7 天日期？

`min(b.open_date)`其次，如果有两个相同的数据，如何只获得一个日期？我应该使用**distinct**吗？

```
(select distinct min(b.open_date) 
   from proddba.cust_descr b 
  where b.ac_number=t.ac_number 
    and b.open_date>=t.date 
    and b.open_dane<=t.date+7days) 
```

如果必须从数据库中获取大约 15000 条记录，这应该可行吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:20:47.097

您可以简单地将天数添加到`DATE`

```
t.date + 7 
```

`DATE`将在in 中增加 7 天`t.date`（因此将保留时间部分）。

`MIN`将已经导致子查询返回单个数据值 - 无需添加 a`DISTINCT`因为它永远不会更改输出。我不确定您试图描述获取多行的结果是什么问题-您是否可能担心外部查询返回具有相同`a.open_date`值的两行并且您试图确保仅获得一行？

# java - 在java中下载网页的问题？

> ID：13753626
> 
> 赞同：0
> 
> 时间：2012-12-06T22:17:35.457
> 
> 标签：java, web

所以我试图用java下载一个aspx网页（Roblox）的文本。我的代码如下所示：

```
URL url;
InputStream is = null;
DataInputStream dis;
String line = "";
try {
    System.out.println("connecting");
    url = new URL("http://www.roblox.com");
    is = url.openStream();  // throws an IOException
    dis = new DataInputStream(new BufferedInputStream(is));

    while ((line = dis.readLine()) != null) {
        System.out.println(line);
    }
} catch (Exception ex) {
    ex.printStackTrace();
} finally {
    try {
        is.close();
    } catch (IOException ioe) {}
} 
```

它适用于 www.roblox.com。但是，当我尝试导航到不同的页面 - [http://www.roblox.com/My/Money.aspx#/#TradeCurrency_tab](http://www.roblox.com/My/Money.aspx#/#TradeCurrency_tab) - 它不起作用，只是加载 www.roblox.com 屏幕。

任何人都可以帮助澄清这一点吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:35:00.180

从 URL 和 # 的使用来看，我怀疑这个页面是使用 javascript 来动态创建页面的。

[您可以使用http://seleniumhq.org/](http://seleniumhq.org/)之类的东西来模拟 Web 浏览器（包括 cookie），这对于任何类型的动态 Web 内容来说都是一种更可靠的方法。

```
 // The Firefox driver supports javascript 
    WebDriver driver = new FirefoxDriver();

    // Go to the roblox page
    driver.get("http://www.roblox.com");

    System.out.println(driver.getPageSource()); 
```

当然，有很多更好的方法可以通过 Selenium 的 WebDriver API 访问页面元素：http: [//selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html)

在一个文件中下载 JAR 和所有 deps：[http ://code.google.com/p/selenium/downloads/detail?name=selenium-server-standalone-2.27.0.jar](http://code.google.com/p/selenium/downloads/detail?name=selenium-server-standalone-2.27.0.jar)

请注意，您可以通过代码导航到其他页面：http: [//seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html) -

```
 WebElement link = driver.findElement(By.linkText("Click Here Or Whatever"));
     link.click(); 
```

然后

```
 System.out.println(driver.getPageSource()); 
```

将获得下一页的页面文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:30:44.173

您在 java 中获得的内容与您在浏览器中看到的内容不同，因为服务器将以下标头添加到响应中：

```
Location=https://www.roblox.com/Login/Default.aspx?ReturnUrl=%2fMy%2fMoney.aspx 
```

如果存在“Location”标头，您应该从 URLConnection 获取标头的值并手动重定向。据我所知，即使您使用 HttpConnection，您也不会自动重定向到“https”

编辑：

你可以这样做（我删除了其他代码，比如异常处理只是为了专注于重定向，所以不要把它当作正确的“编码”示例）：

```
public static void main(String[] args) throws Exception {
    printPage("http://www.roblox.com/My/Money.aspx#/#TradeCurrency_tab");       
}

public static void printPage(String address) throws Exception {     
    String line = null;
    System.out.println("connecting to:" + address);
    URL url = new URL(address);
    URLConnection conn = url.openConnection();
    String redirectAdress = conn.getHeaderField("Location");
    if (redirectAdress != null) {
        printPage(redirectAdress);
    } else {
        InputStream is = url.openStream(); 
        DataInputStream dis = new DataInputStream(new BufferedInputStream(is));
        while ((line = dis.readLine()) != null) {
            System.out.println(line);
        }
    }
} 
```

# php - 自定义 CSS/HTML 浏览图像表单

> ID：13753627
> 
> 赞同：0
> 
> 时间：2012-12-06T22:17:36.100
> 
> 标签：php, html, css, forms, file-upload

> **可能重复：**
> [样式输入类型文件？](https://stackoverflow.com/questions/4909228/style-input-type-file)

我知道每个浏览器都有自己的显示方式...

```
 <input type="file" name="image" id="image" class="input_text"/> 
```

我的问题是，有没有办法自定义浏览图像按钮。我想使用 HTML/CSS/PHP 将普通表单上的浏览和上传按钮替换为一个图像按钮。这可能吗？它是否与所有浏览器类型兼容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:20:56.027

你可能最好使用像***[Uploadify](http://www.uploadify.com/)***这样的插件。它允许您像任何其他元素一样设置该字段的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:21:15.083

有多种方式，我喜欢的方式是这样的：

```
<div class="browse">
    <div class="placeholder">Upload</div>
    <input type="file" name="image" id="image" class="input_text"/>
</div> 
```

使用此 CSS 代码：

```
.browse {
    position: relative;
    width: 100px;
    height: 20px;
}

.browse input, browse div {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0px;
    top: 0px;
}

.browse input {
    opacity: 0;
    filter: alpha(opacity=0);
} 
```

这样会显示上传文本，但您实际上会单击浏览按钮。

# java - 如何从循环链表中删除节点？

> ID：13753631
> 
> 赞同：0
> 
> 时间：2012-12-06T22:17:51.353
> 
> 标签：java, linked-list

我是 Java 初学者，由于其复杂性，我无法理解 Java 中的链表。所以我的代码很简单。

```
Node node, head, tail;
head = null; // initializes the head of the linked list to null
int counter = 0;

String inputdata; // input

do
        {
            System.out.print ("What name would you like stored? (\"quit\" to end) ");
            inputdata = stdin.readLine ();

            if (!inputdata.equals ("quit"))
            {
                node = new Node (inputdata);
                node.next = head;

                // update the head to point to the new front of the list
                head = node;
                count++;
            }
        }
        while (!inputdata.equals ("quit"));  // loop continues until "quit" selected

        System.out.println ();
        node = head;

///////////////////////////////
  String delete;
  boolean found;
  System.out.println ("What node to delete?");
  delete = stdin.readLine ();

 do
        {
            for (int i = 0 ; i <= count ; i++)
            {

                if (delete.equals (node.data))
                {
                    found = true;
                    System.out.println ("It is found!");

                }
            }
        }
        while (found = false); 
```

这是课

```
public class Node
{
    Node next;
    String data;

    public Node (String data)
    {
        this.data = data;
    }
} 
```

我了解算法的工作原理。搜索一个节点，当它找到它时，它将在它之前的节点指向正在搜索的节点之后的节点。

![在此处输入图像描述](../Images/8614a3f2ca6039f7dc37d4ffb9c56165.png)

每当我搜索节点时，我都会得到 java.lang.nullpointer 异常，这些异常基本上会转化为我的代码，这很糟糕。

我需要帮助，因为每当我搜索如何做到这一点时，我总是问自己“为什么放这个”或“LS 是什么”或“为什么有多种方法以及其中的变量 n 是多少”。

请告诉我我做错了什么以及我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T08:00:08.727

```
 node = new Node (inputdata);
            node.next = head;

            // update the head to point to the new front of the list
            head = node;
            count++; 
```

第一次你制作一个节点，然后你说这个节点的下一个是头......然后你去说头是这个节点......所以你基本上是在制作头==节点==节点。下一个

那是不行的：D

我建议这样做：

```
 //Init head and tail...
if(head==null){
 head = new Node("Head"); //use whatever data you want/need
 tail= new Node("Tail");
 tail.next=head;
 head.next = tail;
}

//add a new node...
newnode = new Node("Some data");
//since this is a one-way linked list, i suggest you walk from the head
//and go until you meet the tail
currNode = head;
while( currNode.next.data.compareTo("Tail") != 0 )
{
   currNode = currNode.next;
}
//now add the new node here...
newnode.next = currNode.next;
currNode.next = newNode; 
```

这样你总是将它添加到列表的“末尾”......如果你想在开头添加它，那么就在头部之后使用这个：

```
 newNode = new Node("Some data");
    newNode.next = head.next;
    head.next = newNode; 
```

建议您有一个像尾巴一样的“限制器”，以便知道您何时位于列表的末尾...

所以现在你的删除应该可以工作了，但我推荐更多的东西：

```
currentNode = head;
do
    {
        if(currentNode.next.data.compareTo(delete)==0){ //if the next one is the one i'm looking for, remove it and let the garbage collector take care of it
           currentNode.next = currentNode.next.next;
           break; //leave the loop
        else
          currentNode = currentNode.next;
    }
    while (currentNode.next.data.compareTo("Tail") != 0); 
```

使用此while循环，您将遍历列表直到结束/尾部，如果找不到则停止...在您的示例中，它将永远在列表中四处走动，因为未找到搜索的节点

# objective-c - Extracting data from array only last shown

> ID：13753634
> 
> 赞同：0
> 
> 时间：2012-12-06T22:18:01.103
> 
> 标签：objective-c

I've this model:

```
@interface Data : NSObject
@property (nonatomic, assign) int Period; 
@property (nonatomic, assign) NSDate *Start;
@property (nonatomic, assign) NSDate *End;
@end

@implementation Data
@synthesize Period, Start, End;
@end 
```

I add data in mutable array.

```
@property (strong, nonatomic) NSMutableArray* myArray;
self.myArray = [NSMutableArray arrayWithCapacity:0];

Data *element =[ [Data alloc] init];
element.Period = 1;
element.Start = dateStart1;
element.End = dateEnd1;
[self.myArray addObject:element];

element.Period = 2;
element.Start = dateStart2;
element.End = dateEnd2;
[self.myArray addObject:element];

element.Period = 3;
element.Start = dateStart3;
element.End = dateEnd3;
[self.myArray addObject:element]; 
```

Why when extract Period from array i receive only the last element x 3 ???

```
Data * NumElement = [self.myArray valueForKey:@"Period"];
NSLog(@"All period: %@", NumElement); 
```

and i receive 3 3 3 instead of 1 2 3 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:26:53.560

That's because you're putting *the same object* into your array over and over again. No matter how many times you add it, no matter which of its properties you change, it's the same object.

You need to instantiate an object for each set of data.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:27:53.583

You instantiate a single object, add it to the array, then change that same object and add it again to the array, etc. The array ends up holding 3 references to the same object, with the values last assigned to it.

Try this:

```
Data *element1 =[ [Data alloc] init];
element1.Period = 1;
element1.Start = dateStart1;
element1.End = dateEnd1;
[self.myArray addObject:element1];

Data *element2 =[ [Data alloc] init];
element2.Period = 2;
element2.Start = dateStart2;
element2.End = dateEnd2;
[self.myArray addObject:element2];

Data *element3 =[ [Data alloc] init];
element3.Period = 3;
element3.Start = dateStart3;
element3.End = dateEnd3;
[self.myArray addObject:element3]; 
```

# android - Android 包名称 - 使用破折号

> ID：13753637
> 
> 赞同：8
> 
> 时间：2012-12-06T22:18:19.360
> 
> 标签：android, package

我想知道您是否可以在 Android 应用程序的包名称中使用破折号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T22:23:30.153

不，您不能在包名称中使用破折号。

这是一个很好的问题，可以自己测试。如果您在清单或类中更改包名称（我也假设是向导），它显然会产生编译时错误。

* * *

@vasart 发布的[链接](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)描述了如何在必要时使用下划线代替破折号。

# c# - 有没有办法将 CSS 类动态分配给 MVC4 Html.Encode 条目？

> ID：13753641
> 
> 赞同：1
> 
> 时间：2012-12-06T22:18:47.953
> 
> 标签：c#, css, razor, asp.net-mvc-4

我的一个视图中有一个简单的字段，它使用以下代码显示我的一个列的总和：

```
<p class="points-total" >@Html.Encode(ViewData["pointsTotal"])</p> 
```

这是我的控制器代码`pointsTotal`：

```
pointsTotal = occurrences.Sum(o => o.Points);
ViewData["pointsTotal"] = pointsTotal.ToString(); 
```

我想根据`pointsTotal`. 例如，如果总分超过 50 分，我想将其分配给 class `points-total-fifty`。

我知道我可以通过执行以下操作在 DisplayFor 等其他 HTML 助手上执行此操作：

```
<p class="@(item.Total > 50 ? "points-total-fifty" : 
         "points-total")">@Html.DisplayFor(modelItem => item.Total)</p> 
```

有没有办法用 Html.Encode 助手做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:38:12.797

实际上，您为第二个示例编写的代码也可以与`Html.Encode`帮助器一起使用，因为您正在为`<p>`元素设置样式。例如，一种方法：

```
@{
    string cssClass = "points-total";
    int? total = ViewData["pointsTotal"] as int?;

    if (total.HasValue && total > 50)
    {
        cssClass = "points-total-fifty";
    }
}
<p class="@cssClass" >@Html.Encode(ViewData["pointsTotal"])</p> 
```

# ios5 - IOS：点击动画隐藏视图

> ID：13753643
> 
> 赞同：0
> 
> 时间：2012-12-06T22:19:03.290
> 
> 标签：ios5, uiviewanimation

我想在我的应用程序中隐藏一些带有动画的视图，类似于 Grafio 应用程序，如下图所示。你能否给我一些方向来实现这一目标。

![在此处输入图像描述](../Images/eb5b74e1fb1cb7cff15dc0278ddf2cab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:53:45.390

首先制作两个三角形图像用于向上方向，另一个用于向下方向说 up.png 和 down.png

然后将两个图像设置为不同的控制状态，例如....

```
[btn setBackgroundImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateNormal];
[btn setBackgroundImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateSelected]; 
```

现在在`IBAction`那个按钮上写...

```
- (IBAction)onEnterQtySaveClick:(id)sender
{
    UIButton *button = (UIButton *)sender;

    if (button.selected)
    {
        // move up the menuView
        [UIView animateWithDuration:0.3 animations:^{

            [self.menuView setFrame:CGRectMake(0, 0, 320, 50)];
        }];
    }
    else
    {
        // move down the menuView
        [UIView animateWithDuration:0.3 animations:^{

            [self.menuView setFrame:CGRectMake(0, 50, 320, 50)];
        }];
    }

    button.selected = !button.selected;
} 
```

希望你会喜欢这个，它会解决你和更多的问题

# r - 在一个数据帧中添加计数列与另一个数据帧中的匹配计数

> ID：13753648
> 
> 赞同：1
> 
> 时间：2012-12-06T22:19:22.263
> 
> 标签：r, dataframe

我想在一个数据框中添加一个列，其中包含另一个数据框中的匹配数，这似乎很简单，但我似乎无法让它工作。例子：

```
smaller_df$CountOfMatches <- nrow(subset(larger_df, Date == smaller_df$Date)) 
```

这给了我错误：

```
In `==.default`(Date, smaller_df$Date) :
  longer object length is not a multiple of shorter object length 
```

我知道数据框的长度不同，我不是要求合并，我只需要为 small_df 中的每一行/日期（有效日期对象）进行合并；计算 large_df 中有多少匹配项。

我对 R 非常陌生，所以我在这里必须缺少一些基本且非常琐碎的东西。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:56:19.907

最简单的方法是创建一个汇总表，然后将其与您的原始（较小）数据合并。最好有一个可重现的例子。所以这里有一些可重现的数据：

```
smaller_df <- data.frame(Date=seq(as.Date("2000-01-01"), 
                                  as.Date("2000-01-10"), by="1 day"))
set.seed(5)
larger_df <- data.frame(Date=sample(seq(as.Date("2000-01-01"), 
                                        as.Date("2000-01-20"), by="1 day"),
                                    80, replace=TRUE)) 
```

创建日期表（计数）`larger_df`

```
tbl <- table(larger_df$Date) 
```

将其转换为适合合并的 data.frame

```
counts <- data.frame(Date=as.Date(names(tbl)), CountOfMatches=as.vector(tbl)) 
```

然后在日期合并。请注意，如果日期没有出现在 中`larger_df`但出现在 中`smaller_df`，那么`CountOfMatches`将是`NA`而不是`0`。

```
merge(smaller_df, counts, all.x=TRUE) 
```

对于这个样本数据，你得到

```
> merge(smaller_df, counts, all.x=TRUE)
         Date CountOfMatches
1  2000-01-01              4
2  2000-01-02              2
3  2000-01-03              5
4  2000-01-04              4
5  2000-01-05              5
6  2000-01-06              6
7  2000-01-07              2
8  2000-01-08              5
9  2000-01-09              3
10 2000-01-10              3 
```

编辑：

一个更简洁的版本，它使用一个包（它提供了摆脱一些转换细节的便利功能）是

```
library("plyr")
merge(smaller_df, 
      ddply(larger_df, .(Date), summarise, CountOfMatches=length(Date)),
      all.x = TRUE) 
```

相同的结果，有效地，相同的逻辑。对于未出现在`larger_df`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T23:42:54.623

有一种方法可以使用 data.table 包来做到这一点。这是一个用于在内存中高效处理大型数据集的包，允许类似 SQL 或 SAS 数据的步进式操作，但方括号 [] 的行为与 data.frame 对象不同。您可以将 data.table 连接、表达式和聚合放在 [] 中。阅读 data.table 手册以了解更多信息。

首先，将您的两个框架转换为 data.table 对象，并将键列设置为 Date。data.table 对象将按日期排序，然后可以连接。

使用与上述相同的样本数据：

```
library(data.table)
smaller_df <- data.table(data.frame(Date=seq(as.Date("2000-01-01"), 
    as.Date("2000-01-10"), by="1 day")))
set.seed(5)
larger_df <- data.table(data.frame(Date=sample(seq(as.Date("2000-01-01"), 
    as.Date("2000-01-20"), by="1 day"), 80, replace=TRUE))) 
```

将键列设置为日期：

```
setkey(smaller_df, Date)
setkey(larger_df, Date) 
```

您可以使用 by-without-by 语法并使用您按日期键入的事实。`.N`将返回子集中的行数（即日期匹配的行数）。

```
larger_df[smaller_df, .N]
##         Date   N
##  1: 2000-01-01 4
##  2: 2000-01-02 2
##  3: 2000-01-03 5
##  4: 2000-01-04 4
##  5: 2000-01-05 5
##  6: 2000-01-06 6
##  7: 2000-01-07 2
##  8: 2000-01-08 5
##  9: 2000-01-09 3
## 10: 2000-01-10 3 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T02:35:24.410

这看起来相当简单：

```
smaller_df$bigDfCount <-sapply( smaller_df$Date,  
                        FUN=function(x) length(larger_df[larger_df$Date==x, "Date"] ) )
smaller_df

         Date bigDfCount
1  2000-01-01          4
2  2000-01-02          2
3  2000-01-03          5
4  2000-01-04          4
5  2000-01-05          5
6  2000-01-06          6
7  2000-01-07          2
8  2000-01-08          5
9  2000-01-09          3
10 2000-01-10          3 
```

# php - 让 mySQL 数据库中的数据反映下拉菜单中显示的内容。

> ID：13753653
> 
> 赞同：0
> 
> 时间：2012-12-06T22:20:04.617
> 
> 标签：php, html, mysql, database, drop-down-menu

感谢您花时间看这个问题。

这种情况的前提是我有一个用 PHP 和 HTML 编写的“网站”，它显示我的数据库中名为“电子表格”的项目。有六列，超过 4000 多行数据。这些列是“accountID”、“accountName”、“website”、“rating”、“imageURL”、“comments”。网站中的“评级”列是一个下拉列表。

目前，一切正常，但我有问题：

1.  如何使用 PHP 在单击下拉列表中的选项（例如“非常糟糕”）时将数据提交到数据库？目前，它要求用户单击“提交”按钮，这会完全刷新页面，失去他们的位置。是否可以让它静默提交（不刷新）
2.  第二个问题再次与下拉列表有关。你如何让下拉列表显示数据库中的内容？例如，如果数据库中的评级是“非常差”，下拉列表会反映这一点，而不是第一个元素是什么。

下面是我的代码。

```
 <a href =\"". $urlHTTP, $row['website']."\">". $row['website']."</a><br />
  <Form Name =\"rating\" Method =\"POST\" ACTION =\"\" />

  <input type = \"hidden\" name=accountID value=" . $row['accountID'] . ">
    <select name=\"rating\">
    <option value=\"\"></option>
    <option value=\"Very Bad\">Very Bad</option>
    <option value=\"Bad\">Bad</option>
    <option value=\"Average\">Average</option>
    <option value=\"Above Average\">Above Average</option>
  </select>

      <INPUT TYPE =\"Submit\" Name =\"formSubmit\" VALUE =\"Submit\">

if (isset($_POST['formSubmit'])){
    $rating = $_POST['rating'];
    $accountID = $_POST['accountID'];

var_dump($rating);
var_dump($accountID);

if(!mysql_query("UPDATE Spreadsheet SET rating='$rating' WHERE accountID='$accountID'")) {echo 1;}

}    
mysql_close();
?> 
```

非常感谢！这个问题一直困扰着我。我已经尝试了很多谷歌尝试，但我找不到像我要求的那样具体的答案。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:27:59.933

对于第一个问题，您可以查看 ajax onchange 事件。基本上，当您更改选择值时，您会填充调用函数，该函数可以调用 php 文件以在 db 中插入数据。

对于第二个问题，您检查数据库中的选定值，如果它与选项值或文本匹配，则将其设置为选中

```
<select name=\"rating\">
<option value=\"\"></option>
<option value=\"Very Bad\">Very Bad</option>
<option value=\"Bad\">Bad</option>
<option value=\"Average\">Average</option>
<option value=\"Above Average\" 
<?php if($someValueFromDb=='Above Average'){
   echo 'selected=selected';}?>
 >Above Average</option>
 </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:42:44.933

**回答#1：**

您可以使用 Javascript/AJAX 来完成提交表单，而无需实际按下提交。有各种 javascript 库可以帮助您比简单的 Javascript 更容易地完成此任务，即 jQuery ( [http://jquery.com/](http://jquery.com/) )。这不是一项非常复杂的任务，但您需要学习一些基本的 Javascript 以及如何使用 jQuery。事情的基本流程是*当表单发生变化时，提交一个 AJAX 请求来提交表单*。您将需要第二个脚本来接收传入的 AJAX 请求并进行保存。尝试一些基本的 jQuery 教程的搜索引擎，一旦你掌握了基本的知识，像“ajax submit on form change jquery”之类的东西会让你开始。

**回答#2：**

像这样的东西（请看我的笔记......）

```
echo '<select name="rating" id="rating">';
$q = mysql_query("SELECT `option_name` FROM `options`");
while($row = mysql_fetch_assoc($q)) { 
    echo '<option value="' . $row['option_name'] . '">' . $row['option_name'] . '</option>';
}
echo '</select>'; 
```

如果您希望选择预选，那也很容易！从最后一个例子来看：

```
$pre_selected = "Very Bad";
echo '<select name="rating" id="rating">';
$q = mysql_query("SELECT `option_name` FROM `options`");
while($row = mysql_fetch_assoc($q)) { 
    echo '<option value="' . $row['option_name'] . '"';
    if($row['option_name'] == $pre_selected) { 
      echo ' selected="selected"';
    }
    echo '>' . $row['option_name'] . '</option>';
}
echo '</select>'; 
```

但这是我想指出一些事情的部分：

*   不要像您正在使用的那样使用旧的 mySQL 库，而我的示例正在使用。请使用 PDO，或者至少使用 mySQLi。您正在使用的函数已被弃用，并且可能在 PHP 中不再可用。
*   请正确转义您的数据。搜索“SQL Injection”，您会发现大量关于您的代码如何*非常*不安全（特别是您的 UPDATE）的信息，因为您没有转义这些值。
*   提醒一下，当/如果你使用 jQuery，`id="foo"`除了`name="foo"`.

# .net - System.Diagnostics.Process.Start() 从 WCF 服务运行时拒绝访问

> ID：13753656
> 
> 赞同：2
> 
> 时间：2012-12-06T22:20:10.497
> 
> 标签：.net, asp.net-mvc, wcf, windows-7, windows-server-2008

我有一个 WCF 服务，它调用一个使用 Process.Start(startInfo) 执行 SQLPackage.exe 的类，它是 SQL Server Data Tools DACPAC 执行实用程序。如果我通过在调试器中运行的 WPF 测试工具访问此代码，它会按设计工作。但是，一旦 WCF 服务在 IIS 中运行，调用 Process.Start(startInfo) 的代码行就会失败，并显示“访问被拒绝”消息。

我已经多次尝试解决这个问题；我添加了模拟，我在 startInfo 中添加了“runas”动词，我已更改应用程序池和托管服务的应用程序使用具有管理员权限的域帐户，我已验证该域帐户允许 SQLPackage.exe有问题的是，我弄乱了用户帐户控制设置 - 没有任何效果，我每次都得到相同的确切错误。

除非对通过 Process.Start() 调用可执行文件的 WCF 服务有一些固有的限制，否则在我看来这一定是某种配置问题，但我现在很困惑。我的机器运行的是 Windows 7，我们的服务器是 W2K8，两者都具有相同的行为。调用该服务的客户端是 ASP.NET MVC，但我不确定这是否重要。

有谁知道我需要做什么才能让它作为在 IIS 中运行的 WCF 服务成功执行？我在各种站点上阅读了很多关于类似主题的主题，但它们大多与 Windows 服务和较旧的操作系统有关，而我从来没有得到任何这些建议。提前致谢！如果您需要更多信息，请告诉我。

这是我的代码：

```
 ProcessStartInfo startInfo = new ProcessStartInfo();
            startInfo.FileName = DacPacExecutablePath;
            startInfo.Arguments = FormDacPacArgumentString(dbname, server);
            startInfo.WindowStyle = ProcessWindowStyle.Hidden;
            startInfo.UseShellExecute = false;
            startInfo.Verb = "runas";
            startInfo.CreateNoWindow = true;
            startInfo.RedirectStandardOutput = true;
            using (Process process = Process.Start(startInfo)) //error on this line I think.
            {
              using (StreamReader reader = process.StandardOutput)
              {
                string result = reader.ReadToEnd();
                //do stuff
              }
            } 
```

这是错误：

> 消息：访问被拒绝
> 来源：系统
> 堆栈跟踪：在 System.Diagnostics.Process.Start(ProcessStartInfo startInfo) 在 System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)
> 在 MatterDBGenerator.DoGenerateDB(string dbname, InstallationServer server) 在 c:\projects \pathstuff\MatterDBGenerator.cs：第 107 行在 MatterDBGenerator.GenerateMatterDatabase（字符串数据库名称，InstallationServer 服务器）在 c:\projects\pathstuff\MatterDBGenerator.cs：第 86 行
> TargetSite：布尔 StartWithCreateProcess（System.Diagnostics.ProcessStartInfo）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T14:32:33.227

问题是我指向的是一个目录，而不是一个文件。是的，它确实具有执行权限。StartInfo.FileName 指向“C:\Program Files (x86)\Microsoft Sql Server\110\dac\bin”而不是“C:\Program Files (x86)\Microsoft Sql Server\110\dac\bin\SQLPackage。可执行程序”。显然你不能执行一个目录，但由于某种原因，当我在调试器中指向 SQL Server bin 时，Visual Studio 设法“猜测”运行哪个可执行文件，而不是当文件被复制到 IIS 目录时，在哪一点我注意到 startInfo.filename 有一个目录而不是文件。

# javascript - window.setTimeout 未触发

> ID：13753660
> 
> 赞同：-1
> 
> 时间：2012-12-06T22:20:18.617
> 
> 标签：javascript

我敢肯定，当我发现问题所在时，我会恨自己，但我终其一生都无法弄清楚为什么这不起作用。我在网站的其他地方使用 setTimeout 就像这样，它工作正常。

```
<input type='button' value='Submit Form' onclick='ValidateForm()'/>
var submitFinalTimeout;
function ValidateForm() {
        //Performing a number of validations which may return false;

        //I know that the following if condition evaluates as true.  But just for giggles I tried moving it outside of the if and it still never fires.
        if (types.indexOf("K2") != -1) {
            submitFinalTimeout = window.setTimeout(function () { alert("Timeout set"); }, 2000);
            validateK2();
            return true;
        }

        return true;
    } 
```

当我说验证时，我的意思是如果发现问题并返回 false 以阻止验证继续，我会提醒用户。返回值 true 或 false 不影响页面是否发帖。

我还尝试删除花括号内的所有其他内容，以确保没有其他代码与之冲突。我确实尝试使用 ValidateForm 函数删除除 setTimeout 之外的所有其他代码，但它仍然不会触发。

我看到了一个类似的帖子，问题是页面上的其他一些 javascript 错误导致它无法工作。但是我在 Chrome 中的开发者控制台和 firebug 都没有在页面上显示任何错误或任何类型。只是关于解释图像的一些警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:24:48.917

我猜这`ValidateForm`是在提交表单时调用的。您没有看到调用的函数的原因`setTimeout`是页面被表单提交完全拆除，然后被结果替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:32:11.720

我想回应其他评论者：您*确定*正在调用该函数并且条件正在被评估为真？

我设置了[一个 JS Fiddle 示例](http://jsfiddle.net/domKosmix/g8uuD/)。一切似乎都很好，假设 ValidateForm() 实际被调用并且 (types.indexOf("K2") != -1) 为真：

```
 if (true || types.indexOf("K2") != -1) {
            submitFinalTimeout = window.setTimeout(function() { alert("Timeout set"); }, 2000);
        }
....

        //call the function
        ValidateForm(); 
```

# java - weblogic jmx tomcata php/java 桥并使 t3 协议工作

> ID：13753662
> 
> 赞同：1
> 
> 时间：2012-12-06T22:20:25.630
> 
> 标签：java, php, weblogic

我在 Windows 和 Tomcat 7.0 上设置了 PHP 和 PHP/Java 桥。那里一切都好。

但是，我正在尝试编写一个带有 java 调用的 php 文件，以连接到安装在我的 Windows 7 机器上的 Weblogic 服务器，以添加/删除用户/组等。

这就是我所遵循的： http: [//docs.oracle.com/cd/E13222_01/wls/docs90/jmx/accessWLS.html](http://docs.oracle.com/cd/E13222_01/wls/docs90/jmx/accessWLS.html)我也看了这个[http://weblogic-wonders.com/weblogic/2009/10 /11/creating-users-in-weblogic-server-embedded-ldap-programatically/](http://weblogic-wonders.com/weblogic/2009/10/11/creating-users-in-weblogic-server-embedded-ldap-programatically/)（但对于第二个我在 java:comp/env/jmx/runtime 行上出现错误）

但是，我无法让我的设置识别“t3”协议以连接到我的 weblogic。奇怪的是，我可以在单独的独立脚本中使用 jython 通过 t3 协议连接，并以这种方式连接到控制台。

上面第一个链接中有一个部分可确保将 wljmxclient.jar 添加到类路径中。我设置了一个类路径来添加它。我什至在连接到我的 Weblogic 服务器之前使用 PHP 来执行 Weblogic 的 setWLSenv.cmd 以设置我的 classpath 。. . 它显示了正在添加的 jar 文件。还是不行。然后我将 jar 文件复制到 JavaBirde/WEB-INF/lib 文件夹。还是不行。

我确实尝试了 IIOP 协议，但随后我开始了一条新的错误路径，其中指示了“未在此上下文中绑定”。我尝试在上面 Oracle 文档链接中提到的 3 个 Mserver 之间切换。那里也没有运气。

我看到其他人遇到了这个“不支持 t3 协议”的消息，但我没有看到任何解决方案。

这是我的代码：

```
<?php 

require_once("java/Java.inc");

$output=exec("C:\Oracle\Middleware\wlserver_12.1\server\bin\setWLSenv.cmd");

$protocol = "t3";
$hostname = "localhost";
$port="7001";
$jndiroot="/jndi/";
$mserver="weblogic.management.mbeanservers.domainruntime";
$united = $jndiroot.$mserver;
$serviceURL = new java("javax.management.remote.JMXServiceURL",$protocol, $hostname, $port,$united);

$h = new java("java.util.Hashtable");
$h->put("javax.naming.Context.SECURITY_PRINCIPAL", "myUID");
$h->put("javax.naming.Context.SECURITY_CREDENTIALS", "myPWD");
$h->put("javax.management.remote.JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES",
         "weblogic.management.remote");

$connector = new java("javax.management.remote.JMXConnectorFactory");

$connector->connect($serviceURL,$h);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:47:51.660

这就是我最终连接到我的 Weblogic 的方式：

1) 我安装了 Tomcat 7.0 zip 文件而不是安装程序并手动设置。在我的

```
setenv.bat file it looks like:
set CATALINA_HOME=C:\Program Files (x86)\Apache Software Foundation\apache-tomcat-7.0.34
set CATALINA_BASE=C:\Program Files (x86)\Apache Software Foundation\apache-tomcat-7.0.34
set JAVA_HOME=C:\Program Files (x86)\Java\jdk1.7.0_09
set JRE_HOME=C:\Program Files (x86)\Java\jdk1.7.0_09\jre
set JAVA_OPTS=-Djava.ext.dirs=C:\Oracle\Middleware\wlserver_12.1\server\lib
set CLASSPATH=.;C:\Oracle\Middleware\wlserver_12.1\server\lib\wljmxclient.jar

exit /b 0 
```

2) 我通过 weblogic 控制台在 weblogic 中启用了 IIOP 协议，并添加了我在 num 3 中用于用户 ID/密码的用户 ID/密码

3) 我在 Tomcat 7 上的 PHP 脚本与 PHP/Java 桥（不是 JMXServerURL ......我没有发现你必须使用“rmi”作为协议“）

```
$serviceURL = new java("javax.management.remote.JMXServiceURL","rmi","localhost","7001","/jndi/iiop://localhost:7001/weblogic.management.mbeanservers.edit");

//"service:jmx:iiop://localhost:7001/jndi/weblogic.management.mbeanservers.edit");

$env = new java("java.util.Hashtable");
$env->put("javax.management.remote.JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES","weblogic.management.remote");
$env->put("javax.naming.Context.SECURITY_PRINCIPAL", "myuserID");
$env->put("javax.naming.Context.SECURITY_CREDENTIALS", "mypassword");

$jmxCon = java("javax.management.remote.JMXConnectorFactory")->newJMXConnector($serviceURL, $env);
$jmxCon->connect();
$connection = $jmxCon->getMBeanServerConnection();

$mbeans = $connection->queryNames(null,null);

foreach($mbeans as $key=>$value) {
echo $key. "=". $value;
} 
```

它连接并打印出我的管理服务器和我为测试而创建的两个托管服务器的所有 mbean。

# http - HTTP 客户端指示 HTTP 服务器禁用 gzip 响应的规范方法是什么？

> ID：13753665
> 
> 赞同：18
> 
> 时间：2012-12-06T22:20:31.207
> 
> 标签：http, compression, gzip, http-accept-encoding

我认为这是一个简单的谷歌搜索，但显然我错了。

我看到你应该提供：

```
Accept-Encoding: gzip;q=0,deflate;q=0 
```

在请求标头中。但是，建议它的文章还指出，代理通常会忽略该标头。另外，当我将它提供给 nginx 时，它仍然压缩了响应消息体。

[http://forgetmenotes.blogspot.ca/2009/05/how-to-disable-gzip-compression-in.html](http://forgetmenotes.blogspot.ca/2009/05/how-to-disable-gzip-compression-in.html)

那么，如何告诉 Web 服务器禁用响应消息正文的压缩？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T23:00:16.207

许多 Web 服务器会忽略 'q' 参数。静态资源的压缩版本通常会被缓存，并在请求接受时返回。为避免获得压缩资源，请使用

```
Accept-Encoding: identity 
```

在这种情况下，服务器不应为您提供资源的压缩表示。也不应该有任何代理。如果没有给出，这是默认接受的编码，但您的客户端可能会添加一个接受 gzip 的默认值，因此明确提供“身份”应该可以解决问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T17:19:22.263

您希望完全禁用编码吗？
**然后在 http 请求标头中跳过 Accept-Encoding 标头本身。**

您是否只希望在 http 响应中不存在 gzip 压缩？
然后从 http 请求标头中的值列表中跳过 gzip。

您是否希望优先考虑服务器支持的不同压缩技术？然后对 Accept-Encoding http 请求标头中的每个值使用 0 和 1 之间的不同值以及 q 参数。（目前您正在使用冲突值并通过 weight=0 表示您不知道如何管理，但您希望无论如何都要对响应进行编码）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T16:45:04.453

我认为这个 mod 的 apache

[http://httpd.apache.org/docs/2.2/mod/mod_deflate.html](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html) (2)

这对于 Nginx

[http://wiki.nginx.org/HttpGzipModule](http://wiki.nginx.org/HttpGzipModule) (1)

听起来像是您需要的，具体取决于您计划使用的服务器。剩下的就看你了！

请注意nginx模块都允许关闭解压：

```
[edit] gzip 
Syntax: gzip on | off  
Default: off 
Context: http
server
location
if in location 
Reference: gzip 

Enables or disables gzip compression. 
```

并处理代理：

```
[edit] gzip_proxied 
Syntax: gzip_proxied off | expired | no-cache | no-store | private | no_last_modified | no_etag | auth | any ... 
Default: off 
Context: http 
server
location 
Reference: gzip_proxied 

It allows or disallows the compression of the response for the proxy request in the dependence on the request and the response. The fact that, request proxy, is determined on the basis of line "Via" in the headers of request. In the directive it is possible to indicate simultaneously several parameters: 

off - disables compression for all proxied requests 
expired - enables compression, if the "Expires" header prevents caching 
no-cache - enables compression if "Cache-Control" header is set to "no-cache" 
no-store - enables compression if "Cache-Control" header is set to "no-store" 
private - enables compression if "Cache-Control" header is set to "private" 
no_last_modified - enables compression if "Last-Modified" isn't set 
no_etag - enables compression if there is no "ETag" header 
auth - enables compression if there is an "Authorization" header 
any - enables compression for all requests 
[edit] gzip_types 
```

最良好的祝愿！

资料来源：

1) [http://forum.nginx.org/read.php?11,96472,214303](http://forum.nginx.org/read.php?11,96472,214303)

2）[http://httpd.apache.org/docs/2.2/mod/mod_deflate.html#inflate](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html#inflate)（部分输出解压）

# ios - 减少objective-c中静态库大小的最佳实践是什么？

> ID：13753667
> 
> 赞同：16
> 
> 时间：2012-12-06T22:20:39.147
> 
> 标签：ios, objective-c, xcode, static-libraries

在构建objective-c 静态库时，我注意到.a 文件（来自模拟器和iPhone 的胖文件）非常大。特别是，它最初是 5.7mb。我找到[了这篇文章](https://stackoverflow.com/questions/11722986/static-library-has-big-size)并将我的构建设置设置`Generate Debug Symbols`为否，将库大小减少到 1.7mb。

这是一个很大的改进，但还有什么可以做的吗？仅实现和头文件就占用了大约 100kb。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-06T22:53:29.293

如果它是您关心的一部分，静态库只是一起存档的相关 .o 文件加上一些簿记。因此，一个 1.7mb 的静态库——即使其中的代码是整个 1.7mb——通常也不会给你的产品增加 1.7mb。关于死代码剥离的通常规则将适用。

除此之外，您可以减少代码的构建大小。以下可能不是一个完整的列表。

在目标的构建设置中寻找“优化级别”。通过将其切换为“Fastest, Smallest -Os”，您将允许编译器牺牲一些速度来换取大小。

确保您正在构建拇指，更紧凑的 ARM 代码。`-mno-thumb`假设您使用的是 LLVM，这意味着确保您的项目设置中没有任何内容。

还要考虑要为哪些架构构建。Apple 不允许提交同时支持 ARMv6 和 iPhone 5 屏幕的应用程序，并且从最新的 Xcode 中完全放弃了对 ARMv6 的支持。所以在这一点上可能没有意义。

# aptana - 如何在 AptanaStudio3 中取消缩进？

> ID：13753669
> 
> 赞同：2
> 
> 时间：2012-12-06T22:20:41.807
> 
> 标签：aptana, aptana3

我是一个新的 AptanaStudio3 用户，并且真的开始爱上 in。但是有一个问题，不知道如何取消缩进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:20:41.807

在这里找到答案：[https ://aptanastudio.tenderapp.com/discussions/suggestions/246-block-indent-and-block-unndent](https://aptanastudio.tenderapp.com/discussions/suggestions/246-block-indent-and-block-unindent)

快捷键是`Shift + Tab`

# php - codeigniter 数据未插入数据库

> ID：13753673
> 
> 赞同：0
> 
> 时间：2012-12-06T22:20:47.190
> 
> 标签：php, database, insert, codeigniter-2

[我是CodeIgniter](http://codeigniter.com/)的新手，我只是按照框架内的 CRUD 操作教程进行操作，但我的数据没有插入到我的数据库中。这是我的代码：

控制器：site.php

```
<?php
class Site extends CI_Controller
{
  function index()
  {
    $this->load->view("home");

  }
  function create()
  {
    $data=array('title'=>$this->input->post("title"),
        'song'=>$this->input->post("song")
        );
    $this->site_model->add_record($data);
    $this->index();
  }
} 
```

查看：home.php

```
<html>
  <head>
    <title>my page</title>
    <style type="text/css">
    input,label
    {
      display:block;
    }
    </style>
  </head>
  <body>
    <?php echo form_open('site/create'); ?>
    <p>
      <label for="title">Title:</label>
      <input type="text" name="title" id="title" />
    </p>
    <p>
      <label for="content">Song:</label>
      <input type="text" name="song" id="song" />   
    </p>
    <p>
      <input type="submit" value="submit"/>
    </p>
    <?php echo form_close(); ?>
  </body>
</html> 
```

型号：site_model.php

```
<?php
class site_model extends CI_Model
{
  function getAll()
  {
    $q=$this->db->get('name');
    return $q->result();
  }
  function add_record($data)
  {
    $this->db->insert("name",$data);
    return;
  }
  function update_record($data)
  {
    $this->db->where("id",14);
    $this->db->update('name',$data);
  }
  function delete_row($data)
  {
    $this->db->where("id",$this->uri->segment(3));
    $this->db->delete('name',$data);
  }
} 
```

我的表名是**name**，我有 3 个字段：id(auto_increment)、title 和 song。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:06:21.123

在调用模型函数之前添加此行。

```
$this->load->model('site_model'); 
```

之后调用你的模型函数

```
$this->site_model->add_record($data); 
```

我认为这将解决您的问题

问候

iijb

# javascript - 如何在 google maps api v3 和 google places api 中显示两点之间的地点？

> ID：13753674
> 
> 赞同：1
> 
> 时间：2012-12-06T22:20:47.660
> 
> 标签：javascript, google-maps, google-places-api, google-places

如何从两点之间的路线路径的每个点开始显示特定半径附近的地点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:35:07.277

你不能。

*   Places API 最多返回 60 个结果，每组 20 个。
*   一条路线上有无数个点。

您可以调查[RouteBoxer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/routeboxer/)，但要执行您想要的操作，除了 Places API 之外，您还需要一个数据源。

# ios - transitionFromViewController:toViewController 中的动画：不显示

> ID：13753677
> 
> 赞同：1
> 
> 时间：2012-12-06T22:21:00.780
> 
> 标签：ios, core-animation

我正在尝试构建自定义容器视图控制器并尝试创建自己的动画。我首先将点击的单元格移动到屏幕中心，然后通过缩放和显示新视图进行放大。我从这个开始：

```
- (void)showDetailViewController:(UIView *)viewToAnimate {
    UIImageView *anImageView = [[UIImageView alloc] initWithImage:[self screenShot:_homeViewController.view]];

    CGRect windowBounds = [[UIScreen mainScreen] bounds];
    _detailViewController.view.frame = windowBounds;
    [self addChildViewController:_detailViewController];

    // get a screenshot of the old view before pushing the new view controller

    _detailViewController.view.alpha = 0.0;
    NSLog(@"center: %@", NSStringFromCGPoint(viewToAnimate.center));
    [self transitionFromViewController:_homeViewController toViewController:_detailViewController duration:0.5 options:0 animations:^{

        CGPoint windowCenter = CGPointMake(CGRectGetMidX(windowBounds), CGRectGetMidY(windowBounds));
        viewToAnimate.center = windowCenter;            
    viewToAnimate.layer.transform = CATransform3DMakeScale(2, 2, 2);

            NSLog(@"center 2 : %@", NSStringFromCGPoint(viewToAnimate.center));
        _detailViewController.view.alpha = 1.0;

    }completion:^(BOOL finished) {
        [anImageView removeFromSuperview];
    }];

    [_detailViewController didMoveToParentViewController:self];
} 
```

我不明白的是，如果我注释掉 _detailViewController.view.alpha = 0 和 _detailViewController.view.alpha = 1，我不会得到任何动画。它只是跳转到新的 childViewController。但是有了这两行，我确实看到了动画。这是为什么？谢谢。

编辑：这就是我设置容器控制器的方式：在 ContainerViewController 的 viewDidLoad 中：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
_homeViewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
_homeViewController.homeViewControllerDelegate = self;
_detailViewController = [storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];

[self setSubViewControllers:@[ _homeViewController, _detailViewController]];

_selectedViewController.view.frame = [[UIScreen mainScreen] bounds];
[self addChildViewController:self.selectedViewController];
[self.view addSubview:_selectedViewController.view];
[self didMoveToParentViewController:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:58:33.787

在您发布的代码中，您展示了自己添加 _detailViewController 作为子视图控制器，但没有显示添加 _homeViewController 作为 self 的子视图控制器的步骤。在执行您发布的代码时，_homeViewController 是否是 self 的子项（正在运行转换的视图控制器）？它需要。

# networking - tcp syn 的强制选项

> ID：13753682
> 
> 赞同：1
> 
> 时间：2012-12-06T22:21:29.547
> 
> 标签：networking, tcp

我正在为微芯片编写一个软件，它将通过以太网发送一些数据，但我遇到了一个问题。我正在发送一个 TCP SYN 段，但我没有得到服务器的答复。

一切看起来都很好，获得答案的数据包和我的数据包之间的唯一区别是我的数据包没有选项（池描述为可选）。是否应该定义一些选项以使 SYN 正常工作？

（如果有人知道如何以一种不错的形式从wireshark复制一个数据包，我会告诉你我的数据包。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T18:32:46.703

确保您的 tcp 标头填充字节设置为全 0 或 0xff

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T19:50:07.050

正如 cxxl 在评论中提到的那样，问题是 TCP 校验和不正确。

# json - 如何使用分层 JSON 数据填充表单

> ID：13753684
> 
> 赞同：1
> 
> 时间：2012-12-06T22:22:01.983
> 
> 标签：json, forms

我有一个需要用 JSON 数据填充的表单。该表单包含需要填充的 select、textarea 和 input 元素。JSON 数据是复杂/分层的（即许多嵌套对象）。

我知道[http://www.keyframesandcode.com/code/development/javascript/jquery-populate-plugin/](http://www.keyframesandcode.com/code/development/javascript/jquery-populate-plugin/)但它使用方括号表示法映射到字段名称（例如

```
<input name="person[name][last]" ... 
```

我需要使用点表示法（例如

```
<input name="person.name.last" ... 
```

我正在使用 jQuery，所以 jQuery 解决方案很好。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:41:07.757

这是使用递归函数填充的一种组合替代方案：

```
function populator(json, nodes){
  $.each(json, function(key, value){
    newNodes = nodes ? nodes.slice() : [];
    newNodes.push(key);

    if (typeof(value)=="object") {
        populator(value, newNodes);
    else
        $('name["' + newNodes.join('.') + '"]').val(value);
    }
  });
} 
```

有了这个，你可以这样做：

```
populator({
             person: {
                name: {
                   last: 'Doe', 
                   first: 'John'
                },
                address: {
                   street: '123 Main Street',
                   city: 'Montgomery',
                   state: 'AL'
             }
          }); 
```

# batch-file - 用于语句的批处理脚本中的目录/文件名中的空格

> ID：13753690
> 
> 赞同：1
> 
> 时间：2012-12-06T22:22:53.227
> 
> 标签：batch-file

为什么这个批处理脚本有效...

```
@echo off
for /F %%a in ('dir /b F:\Temp\*.txt') do set TestFileName=%%~nxa 
echo %FileName%
pause 
```

但是这个不...

```
@echo off
for /F "usebackq" %%a in ('dir /b "F:\Temp Folder\*.txt"') do set TestFileName=%%~nxa 
echo %FileName%
pause 
```

由于文件夹名称中的空格，我知道这与我使用的双引号有关。但即使在网上搜索了几个小时并阅读了无数类似的帖子后，我也无法终生弄清楚如何解决它。它让我发疯！！！

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:48:08.657

这里三点：

1- 正如“usebackq”所暗示的那样：使用反引号执行命令，因此您必须使用 ` 而不是 '。

2-独立于上述，此代码：

```
@echo off
for /F "usebackq" %%a in (`dir /b "F:\Temp Folder\*.txt"`) do set TestFileName=%%~nxa 
echo %FileName%
pause 
```

也不起作用，因为显示的变量 FileName 与 FOR 命令不同：TestFileName。

3- 如果简单 FOR 的基本功能足以满足您的需求，我强烈建议您不要使用执行另一个命令（如 DIR）的 FOR /F 命令。例如：

```
@echo off
for %%a in ("F:\Temp Folder\*.txt") do set TestFileName=%%~nxa 
echo %TestFileName%
pause 
```

以前的代码不仅更容易编写和理解，而且运行速度也更快。

*最后：在仅显示最后一个文件名*的意义上，先前的代码“有效” 。如果要通过变量显示*所有名称*，则必须使用不同的方法。

我希望它有帮助...

安东尼奥

# html - 居中 DIV - 自动高度

> ID：13753691
> 
> 赞同：0
> 
> 时间：2012-12-06T22:22:56.397
> 
> 标签：html, css

我有以下内容：

XHTML：

```
<div id="container">
 // contents
</div> 
```

CSS：

```
#container { margin: 0 auto; width: 940px; overflow: hidden; padding: 10px; border: 1px solid #CCCCCC; } 
```

div 以页面为中心`margin: 0 auto`，我使用它`overflow: hidden`来允许 DIV 自动向下扩展至其内容的高度。

我在 DIV 中有一些内容，上面有一个盒子阴影。问题是由于溢出：隐藏规则阴影没有完全出现在页面上。我发现的唯一方法是：

1.  取出溢出：隐藏 - 但随后容器 DIV 不会向下扩展。
2.  在#container 上使用 height / min-height - 但是这不适用于网站上的所有页面。
3.  使用 float: left - 但 DIV 不在页面中心。

有人对此有更多建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:26:08.427

您可以使用许多 clearfix 技术之一。这将让您删除`overflow:hidden`并修复裁剪的`box-shadow`.

这是有关该主题的最新文章：http: [//css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:24:21.653

很确定 div 上的一些边距可以解决它，但是如果您显示更多代码，则更容易检查。

# elasticsearch - 多个节点为自定义脚本查询返回 500 错误

> ID：13753696
> 
> 赞同：1
> 
> 时间：2012-12-06T22:23:41.533
> 
> 标签：elasticsearch

一切正常，然后我重新索引了一些东西，突然 3/5 个节点开始出错。显然，这也导致我只有 2/3 的结果能够正常返回。这仅发生在自定义搜索查询中。代码和 jar 在事情正常和不正常之间发生了变化。

注意：常规过滤的 multi_match 搜索查询工作正常。

我努力了：

1.  删除所有索引并重新索引所有数据
2.  停止和启动 Elasticsearch
3.  重新编译我的自定义脚本
4.  尝试了 50 多次搜索查询（一半使用 Java，一半使用 CURL）

Pastebin 是控制台中出现的错误：http: [//pastebin.com/1iq3M6fk](http://pastebin.com/1iq3M6fk)

正在执行搜索查询（这已经工作了好几天了，并且没有受到影响）：

```
{
  "query": {
    "custom_score": {
      "query": {
        "multi_match": {
          "query": "italian",
          "fields": [
            "name",
            "tags"
          ]
        }
      },
      "script": "customscript",
      "params": {
        "lat": 40.76405282025,
        "lon": -73.972994269042
      },
      "lang": "native"
    }
  }
} 
```

以下是我在执行上述查询时得到的响应：

```
{
  "took": 225,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 2,
    "failed": 3,
    "failures": [
      {
        "status": 500,
        "reason": "RemoteTransportException[Failed to deserialize exception response from stream]; nested: TransportSerializationException[Failed to deserialize exception response from stream]; nested: StreamCorruptedException[unexpected end of block data]; "
      },
      {
        "status": 500,
        "reason": "RemoteTransportException[Failed to deserialize exception response from stream]; nested: TransportSerializationException[Failed to deserialize exception response from stream]; nested: StreamCorruptedException[unexpected end of block data]; "
      },
      {
        "status": 500,
        "reason": "RemoteTransportException[Failed to deserialize exception response from stream]; nested: TransportSerializationException[Failed to deserialize exception response from stream]; nested: StreamCorruptedException[unexpected end of block data]; "
      }
    ]
  },
  "hits": {
    "total": 548,
    "max_score": 16.027588,
    "hits": [
      {
        ...
      }
    ]
  }
} 
```

以下是上述查询中使用的自定义脚本（它也有一个工厂）：

```
import org.elasticsearch.common.Nullable;
import org.elasticsearch.script.ExecutableScript;
import org.elasticsearch.script.NativeScriptFactory;
import org.elasticsearch.script.AbstractDoubleSearchScript;
import org.elasticsearch.index.mapper.geo.GeoPointDocFieldData;

import java.util.Collection;
import java.util.Map;
import java.io.IOException;
import java.lang.Math;

public class CityMapsCustomScript extends AbstractDoubleSearchScript {

    double lat;
    double lon;

    public CityMapsCustomScript(@Nullable Map<String, Object> params) {
        lat = ((Double) params.get("lat")).doubleValue();
        lon = ((Double) params.get("lon")).doubleValue();
    }

    @Override
    public double runAsDouble() {
        double distance = ((GeoPointDocFieldData) doc().field("location")).distance(lat, lon);
        String str = doc().field("_type").getStringValue();
        float score = score();

        if (str.equals("business")) {
            return -distance + (double) score;
        } else {
            return Double.parseDouble(doc().field("_boost").getStringValue());
        }
    }
} 
```

# java - Int[] 到矩阵 Java

> ID：13753700
> 
> 赞同：0
> 
> 时间：2012-12-06T22:23:57.753
> 
> 标签：java

如何将 int[] 转换为矩阵？

假设我想制作 6x6 矩阵，并且我有一个包含 36 个元素的 int[] 数组。所以 00 条目是数组的第 0 个元素，01：1 元素，02：，第 2 个元素，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:27:16.890

怎么样：

```
int[] ints = new int[36];
// fill with values
int[][] matrix = new int[6][6];
for (int i = 0; i < ints.length; i++) {
    matrix[i / 6][i % 6] = ints[i];
} 
```

为了帮助您理解为什么会这样，请在循环中添加以下内容：

```
System.out.println("i = " + i + "; i / 6 = " + (i / 6) + "; i % 6 = " + (i % 6) + ";"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:38:17.237

```
for(int i = 0; i < 6; i++)
  for(int j = 0; j < 6; j++)
    matrix[i][j] = vector[i * 6 + j]; 
```

# version-control - “Release Candidate”应该是不可变的吗？

> ID：13753703
> 
> 赞同：2
> 
> 时间：2012-12-06T22:24:19.173
> 
> 标签：version-control, branch, naming

如果我们有一个源代码控制分支用于停止功能和错误测试（包括在此分支上进行额外提交以修复上述错误），它应该叫什么？

“Release Candidate”合适吗？

我的想法是这样的分支将被称为“发布”，并且使用“候选”这个词意味着它是不可变的。你可以有候选人 1 和候选人 2，但那些特定的候选人不应该改变；IE。候选人 1 不会有任何提交，这会以任何方式修改它。

链接或示例会很棒，因为与我讨论此问题的人非常顽固。

相关问题：[是否有任何规范来推广候选版本？](https://stackoverflow.com/questions/588533/is-there-any-specification-for-promoting-a-release-candidate)（涵盖如何考虑完成的 RC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:27:25.203

它仍然可以被视为最终的集成步骤（并且“不是一成不变的”）：

这仍然是您所在的位置：

*   集成批准进入下一个版本的功能。
*   修复集成测试后出现的错误（SIT - 系统集成测试和 UAT，用户验收测试）

您可以[认为“RC”比我刚才描述的更稳定](http://en.wikipedia.org/wiki/Software_release_life_cycle#Release_candidate)，但您仍然可以修复显示停止器的错误。
从这个意义上说，你不会有“候选人 1”和“候选人 2”（同时）。RC 通常是*连续*的。

然后，“发布”分支用于后期制作（热修复和发布维护）。
它在投入生产时冻结应用程序的状态，并在起点使用它来维护投入生产的内容。

简而言之：

*   **分支不是一成不变**的：[它们在开发生命周期中隔离开发工作](https://stackoverflow.com/questions/2100829/when-should-you-branch/2107672#2107672)。
    您应该添加提交。在任何一个分支。
*   **标签**（或“标签”，或“基线”，或......）**是不可变**的：它们在某个时间点冻结​​代码的特定状态。

# java - java、mysql比较和编辑值

> ID：13753706
> 
> 赞同：0
> 
> 时间：2012-12-06T22:24:36.000
> 
> 标签：java, mysql, comparison

我正在用java构建一个决策支持系统。下面是代码的一部分，它扫描用户输入的搜索词，然后将其与数据库 searchlog.searchcolumn 值进行比较，如果该词不存在则创建一个新条目。但是在 if 语句中，我希望它检查条目，如果它已经在 searchlog.searchcolumn 列中，那么我希望它不要创建新的重复条目，而是为 searchlog.counter 列添加 +1 值具体的词。例如，如果搜索词是“UMBRELLA”并且数据库中已经有一个伞条目，我希望它在 UMBRELLA 行的计数器列中添加 +1。

这样做的目的是存储所有搜索词并跟踪最受欢迎的搜索词。感谢您抽出宝贵的时间 String CheckSearch = "SELECTsearchcolumn FROMsearchlog";

```
String InsertColumn = "INSERT INTO `mydb`.`searchlog` (`searchcolumn`) VALUES ('"+ InputScanner + "'); 
         //
if (InputScanner.equals(CheckSearch)) 
   System.out.println("value ealready exist, counter well be updated"); 
else
   stmt.executeUpdate(InsertColumn); 
```

**编辑** 感谢您对使用 PreparedStatement 的建议，但这是我的第一个或多或少严重的挑战，这次，让我们忽略我的代码的漏洞。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:27:22.920

您的查询应该是：

```
String InsertColumn = "INSERT INTO `mydb`.`searchlog` (`searchcolumn`) VALUES ('"+ InputScanner + "'"); 
```

Values 子句也应该用括号括起来。

并始终使用 equals() 检查两个字符串是否有意义地相等。如果是对象，`==`则检查两个引用变量是否引用同一个对象。

```
 if (InputScanner == CheckSearch) {

should be:

      if (InputScanner.equals(CheckSearch)) { 
```

然后，如果 InputScanner 与 checkSearch 相同，您的 if 语句将返回 true。

## 建议：

我强烈建议您使用[**PreparedStatement**](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)而不是简单的 Statement 来防止 SQL 注入。

```
PreparedStatement st = conn.preparedStatement(InsertColumn);
st.setString(1, val1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:58:34.690

你用的是什么数据库？如果您使用的是 MySQL，那么您应该查看`INSERT ... ON DUPLICATE KEY UPDATE`语句。（其他 SQL 数据库有`MERGE`，我不太熟悉。）这里是[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

您将需要制作您`searchcolumn`的 a`UNIQUE`或`PRIMARY`专栏，然后是以下内容：

```
INSERT INTO searchlog( searchcolumn, count) VALUES ("my search query", 0) ON DUPLICATE KEY UPDATE count= count+ 1;
```

会完成你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:28:51.033

1) 值也需要用大括号括起来

例子：

```
VALUES ('"+ InputScanner + "'); 
```

2）假设`InputScanner`和`CheckSearch`是字符串/可比较的对象，你需要做`.equals()`而不是`==`

例子：

```
if (InputScanner.equals(CheckSearch)) { 
```

注意：您的 SQL 语句容易受到 SQL 注入攻击。最好使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T23:06:53.807

您的任务有一条[MySQL 语句](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

要求：`searchcolumn`是唯一键。

```
String sql = "INSERT INTO mydb.searchlog(searchcolumn, counter) VALUES(?, 1) "
    + " ON DUPLICATE KEY UPDATE counter = counter + 1";
PreparedStatement stmt = connection.createPreparedStatement(sql);
stmt.setParameter(1, checkSearch.toUpperCase());
int updateCount = stmt.executeUpdate(); 
```

我不知道是否`updateCount`区分是否发生了 INSERT 或 UPDATE。`getGeneratedKeys`如果有未提及的 AUTOINCR 主键，则可以用于该目的。

# jquery - jQuery / Cookie 弹出问题

> ID：13753708
> 
> 赞同：0
> 
> 时间：2012-12-06T22:24:55.933
> 
> 标签：jquery, cookies, jquery-cookie

我最近在这个问题上得到了帮助，但无法联系到帮助我的人。

下面的代码每 24 小时弹出一次显示，并创建一个每天过期的 cookie。我遇到的问题是，当 cookie 过期时，会创建一个新的，但不会显示弹出框。我在一个有很多用户的网站上运行它，所有人都说它出现了一次，再也没有出现过。

我对 HTML 和 CSS 很好，但这 100% 超出了我的范围。我认为 cookie 需要从我在互联网上看到的内容中删除而不是更新，但我预计会出错。

任何帮助将不胜感激！提前谢谢了。

```
 <link rel="stylesheet" href="colorbox.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="./colorbox/jquery.colorbox.js"></script>
    <script>
function getCookie(c_name)
    {
        var i,x,y,ARRcookies=document.cookie.split(";");
        for (i=0;i<ARRcookies.length;i++)
        {
            x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
            y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
            x=x.replace(/^\s+|\s+$/g,"");
            if (x==c_name)
            {
                return unescape(y);
            }
        }
    }

    function setCookie(c_name,value,exdays)
    {
        var exdate=new Date();
        exdate.setDate(exdate.getDate() + exdays);
        var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
        document.cookie=c_name + "=" + c_value;
    }
function checkCookie()
{
    var cookieValue=getCookie("IGTop100Vote");
    if (cookieValue==null || cookieValue=="")
    {
      setCookie("IGTop100Vote","IG-Top-100-Vote-Popup-Cookie-24-Hours",1);

   $(".ajax").colorbox({ open:true});

    }
    else{

    }

}
   $(document).ready(function() {

        checkCookie();

    })

    </script>

        <p><a class='ajax' href="./content/ajax.html" title="Vote IG Top 100!"></a</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:43:43.103

`checkCookie()`从此函数中更改您的“if语句”

```
if (cookieValue==null || cookieValue=="") 
```

对此

```
if (!cookieValue || cookieValue==null || cookieValue=="") 
```

这将检查 cookie 是否存在，而不仅仅是检查值。

# c# - 为什么我更改时无线电状态不刷新？

> ID：13753710
> 
> 赞同：1
> 
> 时间：2012-12-06T22:24:58.313
> 
> 标签：c#, windows-mobile, opennetcf

我正在尝试制作一个简单的应用程序来切换 Windows 移动设备上的 WiFi 无线电，并发现 OpenNETCF.WIndowsMo​​bile 命名空间提供了一些宝石，使这项任务变得超级简单：

```
 private void button2_Click(object sender, EventArgs e)
    {
         var wifiRadio = (from radio in Radios.GetRadios()
               where radio.RadioType == RadioType.WiFi
               select radio).FirstOrDefault();

        if (wifiRadio != null)
            switch (wifiRadio.RadioState)
            {
                case RadioState.Off:
                    wifiRadio.RadioState = RadioState.On;
                    button2.Text = "Is On";
                    break;
                case RadioState.On:
                    wifiRadio.RadioState = RadioState.Off;
                    button2.Text = "Is Off";
                    break;
                default:
                    throw new ArgumentOutOfRangeException();
            }                            
    } 
```

这在第一次点击时完美运行。在所有后续点击中，RadioState 仍然报告相同（即使已切换收音机）。

重新启动应用程序后，RadioState 将再次返回正确的状态。

有没有办法刷新状态以便正确报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:29:12.540

我发现有一种刷新方法。如果其他人需要知道这里是如何使用它：

```
 private void button2_Click(object sender, EventArgs e)
    {
        var radios = Radios.GetRadios();
        radios.Refresh();

        var wifiRadio = (from radio in radios
               where radio.RadioType == RadioType.WiFi
               select radio).FirstOrDefault();

        if (wifiRadio != null)
            switch (wifiRadio.RadioState)
            {
                case RadioState.Off:
                    wifiRadio.RadioState = RadioState.On;
                    button2.Text = "Is On";
                    break;
                case RadioState.On:
                    wifiRadio.RadioState = RadioState.Off;
                    button2.Text = "Is Off";
                    break;
                default:
                    throw new ArgumentOutOfRangeException();
            }                            
    }
} 
```

# java - java扫描仪在终端中不起作用

> ID：13753713
> 
> 赞同：2
> 
> 时间：2012-12-06T22:25:03.773
> 
> 标签：java, linux, ant, terminal, java.util.scanner

我已经通过 cmd 终端（在两台不同的机器上）在 Mac 终端和 Linux Mint 终端以及 Windows 上进行了尝试。我正在通过 build.xml 文件运行测试，并且使用的是 ant 1.8.2 和 Java 1.6。它只是在我输入输入后挂起。完全相同的代码可以在 Eclipse 中运行，也可以通过手动编译和运行（即 javac.. 然后 java...）。任何帮助，将不胜感激..

```
import java.util.Scanner;

public class ScannerTest {

    public static void main (String [] args){

        System.err.println("Enter Something...");
        Scanner sc = new Scanner(System.in);
        String s = sc.next();

        System.err.println("Entered: " + s);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:36:09.383

尝试使用旧版本的 ant 运行您的项目。似乎有一个错误（50960）已经针对类似问题提出。这在 1.8.3 中已修复。检查以下链接：

[http://ant.1045680.n5.nabble.com/bug-in-ant-1-8-2-read-on-System-in-hangs-for-forked-java-task-td4258253.html](http://ant.1045680.n5.nabble.com/bug-in-ant-1-8-2-read-on-System-in-hangs-for-forked-java-task-td4258253.html)

[https://issues.apache.org/bugzilla/show_bug.cgi?id=50960](https://issues.apache.org/bugzilla/show_bug.cgi?id=50960)

# .net - 如何读取另一个 exe 的 app.config 文件 - 作为名称值对

> ID：13753720
> 
> 赞同：2
> 
> 时间：2012-12-06T22:25:28.527
> 
> 标签：.net, config

要从当前应用程序的 app.config 中读取 AppSettings 部分很容易 - 您只需使用 ConfigurationManager.AppSettings，它会返回一系列您可以读取的名称/值对。

但是如果你想从另一个应用程序的配置文件中访问这些条目呢？

我看到 ConfigurationManager 有其他方法，例如 OpenExeConfiguration，但是当我一直遵循这些方法时，我看不到任何方法可以将 AppSetting（或任何部分）作为一系列名称/值对进行迭代，例如与 ConfigurationManager.AppSettings 一样。

是否可以读取单独的 exe 配置文件并轻松迭代（不仅仅是通过单个键访问）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:07:28.043

可能有一种更简洁的方法可以做到这一点，但这很有效（显示获取特定值和构建字典以便您可以迭代）。

```
 private string collection;
    Dictionary<string, string> settings = new Dictionary<string, string>();
    // using System.Configuration;
    private void LoadOthersConfig(string exepath)
    {
        Configuration config = ConfigurationManager.OpenExeConfiguration(exepath);
        if (config.Sections["appSettings"] != null)
        {
            AppSettingsSection appSettings = (AppSettingsSection)config.GetSection("appSettings");

            collection = appSettings.Settings["collection"].Value;

            foreach (string k in appSettings.Settings.AllKeys)
            {
                settings.Add(k, appSettings.Settings[k].Value);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:29:29.307

应用程序配置文件是 XML 文件，因此您可以使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)解析它们。这将允许您轻松读取应用程序配置文件并从中获取您选择的任何信息。

# python - 尝试安装 pylibmc 时生成错误

> ID：13753721
> 
> 赞同：5
> 
> 时间：2012-12-06T22:25:32.380
> 
> 标签：python, pip, libmemcache

刚买了一台新笔记本电脑，从头开始设置我的开发环境，我遇到了这个奇怪的错误，这似乎不是缺少依赖项的结果（尽管我可能是错的）。我正在使用 Python 2.7.3 在 vi​​rtualenv 中工作。Libevent、libmemcached 和 memcached 之前都是随 Homebrew 安装的。

```
(grlli)Tylers-MacBook-Pro:grlli tyler$ pip install pylibmc
Downloading/unpacking pylibmc
  Running setup.py egg_info for package pylibmc

Installing collected packages: pylibmc
  Running setup.py install for pylibmc
    building '_pylibmc' extension
    cc -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -I/usr/local/include -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -DUSE_ZLIB -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _pylibmcmodule.c -o build/temp.macosx-10.8-intel-2.7/_pylibmcmodule.o -fno-strict-aliasing
    _pylibmcmodule.c:1895:33: error: member reference base type 'const void' is not a structure or union
                               svr->hostname, svr->port);
                               ~~~~~^~~~~~~~~~~~~~~~~~~~
    /usr/include/secure/_stdio.h:56:62: note: expanded from macro 'snprintf'
      __builtin___snprintf_chk (str, len, 0, __darwin_obsz(str), __VA_ARGS__)
                                                                 ^
    1 error generated.
    error: command 'cc' failed with exit status 1
    Complete output from command /Users/tyler/projects/envs/grlli/bin/python -c "import setuptools;__file__='/Users/tyler/projects/envs/grlli/build/pylibmc/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/1_/jkd0_x495gs0g8v7z2pgz3bc0000gn/T/pip-E_pLFk-record/install-record.txt --single-version-externally-managed --install-headers /Users/tyler/projects/envs/grlli/bin/../include/site/python2.7:
    running install

running build

running build_py

running build_ext

building '_pylibmc' extension

cc -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -I/usr/local/include -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -DUSE_ZLIB -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _pylibmcmodule.c -o build/temp.macosx-10.8-intel-2.7/_pylibmcmodule.o -fno-strict-aliasing

_pylibmcmodule.c:1895:33: error: member reference base type 'const void' is not a structure or union

                           svr->hostname, svr->port);

                           ~~~~~^~~~~~~~~~~~~~~~~~~~

/usr/include/secure/_stdio.h:56:62: note: expanded from macro 'snprintf'

  __builtin___snprintf_chk (str, len, 0, __darwin_obsz(str), __VA_ARGS__)

                                                             ^

1 error generated.

error: command 'cc' failed with exit status 1

----------------------------------------
Command /Users/tyler/projects/envs/grlli/bin/python -c "import setuptools;__file__='/Users/tyler/projects/envs/grlli/build/pylibmc/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/1_/jkd0_x495gs0g8v7z2pgz3bc0000gn/T/pip-E_pLFk-record/install-record.txt --single-version-externally-managed --install-headers /Users/tyler/projects/envs/grlli/bin/../include/site/python2.7 failed with error code 1 in /Users/tyler/projects/envs/grlli/build/pylibmc
Storing complete log in /Users/tyler/.pip/pip.log 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:52:14.287

我遇到了同样的问题。为我修复它的一件事是将 setuptools 更新到最新版本。

```
pip install setuptools --upgrade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:54:14.560

尝试安装 pylibmc 1.2.3，它对我有帮助。

# android - Android 解析 XML 时出错：格式不正确

> ID：13753727
> 
> 赞同：0
> 
> 时间：2012-12-06T22:26:09.593
> 
> 标签：android, xml, parsing, xml-parsing

我有一个错误：在我的 activity_main.xml 文件中解析 XML:not well-formed(invaled token) 时出错，我终其一生都无法弄清楚它是什么。我尝试重新输入它以确保它与引号无关。我几乎从一本书中复制代码。代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 

<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0ak81Gwf6w8ZZhWxdNiCS8e6LvqrrwZ8nUZKmbQ" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:29:52.193

将其更改为：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0ak81Gwf6w8ZZhWxdNiCS8e6LvqrrwZ8nUZKmbQ" />
</LinearLayout> 
```

您没有关闭 LinearLayout 起始标签。

# javascript - 在 HTML5 应用程序中使用 ShareKit 2.0

> ID：13753728
> 
> 赞同：0
> 
> 时间：2012-12-06T22:26:15.693
> 
> 标签：javascript, ios, cordova, phonegap-plugins, sharekit

我正在使用 PhoneGap 开发基于 HTML5 的 iOS 应用程序。我正在使用最新版本的 PhoneGap 2.2.0。我想包含一个分享按钮，以便用户可以在 Facebook 和 Twitter 上分享消息。我做了一些研究并找到了通往 ShareKit 2.0 的方法。我实际上设法完成了[wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)上描述的必要步骤。我的项目能够成功构建。:)

从这里开始，我被困住了。我在我的 JavaScript (jQuery) 项目中找不到任何实现这一点的方法。旧的 ShareKitPlugin[描述了几个步骤](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/ShareKitPlugin)，但它不起作用。所以我猜它从 2.0 开始发生了变化。

还有其他我可以学习的教程吗？或者是否有另一种解决方案来包含 Facebook 和 Twitter 共享按钮？我喜欢 ShareKit 插件的地方在于它使用安装在您手机上的本机 FB/Twitter 应用程序（如果我假设这一点是正确的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:35:56.687

[您是否按照phonegap 插件页面](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ShareKitPlugin)上“将插件添加到项目”部分中的步骤进行操作？

如果是这样，在您的 html 文件中添加 ShareKitPlugin.js 导入后，如下所示：

```
<script src="ShareKitPlugin.js"></script> 
```

您只需要调用 share 方法，如下所示：

```
window.plugins.shareKit.share("text that will be shared", "http://google.com"); 
```

# php - 从字符串创建 html 链接

> ID：13753729
> 
> 赞同：0
> 
> 时间：2012-12-06T22:26:16.467
> 
> 标签：php, regex

我正在尝试转换这样的东西：

`@Username`

进入：

`<a href="Username">Username</a>`

虽然在任何地方都找不到它的正则表达式。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:27:58.483

您可以为此使用该[`preg_replace`](http://php.net/preg_replace)功能：

```
$str = preg_replace('/@(\w+)/', '<a href="$1">$1</a>', $str); 
```

我还建议您阅读[有关正则表达式的文档](http://php.net/manual/en/reference.pcre.pattern.syntax.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:29:44.917

```
<?php
$str = "Sample text @Username sample text.";
$new_str = preg_replace( '\@([a-zA-Z0-9]*)', '<a href="$1">$1</a>', $str );

echo $new_str;
?> 
```

我认为这会奏效。

# webgl - 是否可以在 WebGL 中建模极坐标

> ID：13753730
> 
> 赞同：1
> 
> 时间：2012-12-06T22:26:17.220
> 
> 标签：webgl, cad, polar-coordinates

我想将一组坐标转换为极坐标（简单的部分），然后在极坐标 3D 网格上对其进行建模。这可以使用 WebGL 还是仅支持笛卡尔坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:41:54.860

您可以在着色器中实现任何类型的坐标变换。但是，有一个重要的限制：

如果您绘制两个相连的顶点（即一条直线，或三角形的边），*则结果将始终是屏幕上的一条直线*——在 OpenGL 中不可能这样做。

笛卡尔极坐标变换将直线变为曲线。这意味着，如果您想转换一个直边形状并获得“正确”的弯曲结果，您必须使用一系列紧密间隔的顶点来绘制它 - 尽可能多地产生平滑曲率的“分辨率”想。这通常不难编程，但需要注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:00:08.687

您可以在 webgl 中使用着色器，这样您就可以将输入作为极坐标提供，并让 webgl 在内部将它们转换为笛卡尔坐标。

# c# - 如何在 C# 中通过 AssemblyQualifiedName 在编译时静态声明类型

> ID：13753731
> 
> 赞同：0
> 
> 时间：2012-12-06T22:26:18.123
> 
> 标签：c#, assembly-resolution

> **可能重复：**
> [我们什么时候必须在 C# 中使用 extern 别名关键字？](https://stackoverflow.com/questions/2347260/when-must-we-use-extern-alias-keyword-in-c)

我有一个程序集，它主要由解决方案中其他项目共享的文件组成。换句话说，整个解决方案大约有 10 MB，但我将该功能的一小部分导出到一个单独的 200 KB 程序集中。解决方案中的所有项目都在 NUnit 测试项目中，除了 UI。

问题是，我去为其中一个共享文件添加测试，但出现以下错误：

```
The type 'xxx' exists in both 'c:\path\to\project\Logic.dll'
and 'c:\path\to\project\Exported.dll'. 
```

我知道我可以使用反射并提供一个程序集限定名称，或者我可以将导出的程序集测试删除到一个单独的项目中，但两者都会很痛苦。我只是想在编译时指定使用 Logic.dll 中的 xxx 版本。是否可以在编译时指定要使用的 Type 版本，所以它看起来像这样：

```
xxx blah = new xxx();
blah.DoSomething(123); 
```

代替：

```
Type t = Type.GetType("Logic.xxx, Logic");
object blah = Activator.CreateInstance(t);
t.GetMethod("DoSomething").Invoke(blah, new object[] { 123 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:30:33.153

您应该能够根据您想要的对象类所在的命名空间来指定引用。类似这样的东西：

`LogicNamespace.XXX blah = new LogicNamespace.XXX();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:00:34.350

Hans Passant 的评论是正确的答案：“extern alias”是我一直在寻找的，而[我们何时必须在 C# 中使用 extern alias 关键字？](https://stackoverflow.com/questions/2347260/when-must-we-use-extern-alias-keyword-in-c)给出如何使用它的良好指示。

# wpf - 试图强制 WPF 功能区始终将功能区选项卡组显示为折叠（直到用户打开它们）

> ID：13753732
> 
> 赞同：1
> 
> 时间：2012-12-06T22:26:25.380
> 
> 标签：wpf, wpf-controls, ribbon

我试图强制 WPF 功能区始终将功能区选项卡组显示为折叠状态（直到用户打开它们）。我使用折叠组的组大小定义定义了一个资源定义功能区组大小定义。然后我使用该静态资源为 RibbonGroup 设置样式的 GroupSizeDefinitions 属性。但是，我确实看到一些组没有处于折叠状态。我错过了我的 xaml 中的某些内容吗？：

```
<ribbon:RibbonGroupSizeDefinitionBaseCollection x:Key="groupSizeDefinitions">
    <ribbon:RibbonGroupSizeDefinition IsCollapsed="True"/>
</ribbon:RibbonGroupSizeDefinitionBaseCollection>
<ItemsPanelTemplate x:Key="groupItemsPanelTemplate">
    <StackPanel Orientation="Horizontal"/>
</ItemsPanelTemplate>
<Style TargetType="{x:Type ribbon:RibbonGroup}" BasedOn="{StaticResource RibbonControlStyle}">
    <Setter Property="QuickAccessToolBarId" Value="{Binding Label}" />
    <Setter Property="Header" Value="{Binding Label}" />
    <Setter Property="ItemsSource" Value="{Binding ControlDataCollection}" />
    <Setter Property="ribbon:RibbonTwoLineText.Foreground" Value="Black" />
    <Setter Property="ItemsPanel" Value="{StaticResource groupItemsPanelTemplate}"/>
    <Setter Property="GroupSizeDefinitions"  Value="{StaticResource groupSizeDefinitions}"/>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:08:53.403

您是否尝试在不使用 Style 的情况下这样做？或者使用其他布局面板，比如 ItemsPanelTemplate 中的 DockPanel 而不是 StackPanel？

通过这样做，我能够保持功能区组折叠：

```
<ribbon:RibbonGroupSizeDefinitionBaseCollection x:Key="MyLayout">
      <ribbon:RibbonGroupSizeDefinition IsCollapsed="True" />
</ribbon:RibbonGroupSizeDefinitionBaseCollection>

<ribbon:RibbonGroup GroupSizeDefinitions="{StaticResource MyLayout}" >
      <ribbon:RibbonButton Command="{x:Static Commands.EditItem}" Label="Edit" />
      <ribbon:RibbonButton Command="{x:Static MyCommands.DeleteItem}" Label="Delete" />
</ribbon:RibbonGroup> 
```

# java - 我怎样才能水平放置struts 2元素？

> ID：13753733
> 
> 赞同：0
> 
> 时间：2012-12-06T22:26:28.893
> 
> 标签：java, css, jquery-ui, struts2, struts2-jquery

我正在使用 Struts 2 + JqueryUI Struts2 插件，我想将一些项目水平地放在一起。

在 struts2 表单项中，所有元素都是垂直的......

这是我的代码：

```
<s:form action="test" theme="simple">
<sj:a id="ajaxlink" onclick="disminuyeBloque()" button="true" buttonIcon="ui-icon-minus" cssStyle="height:20px"/>
<sj:textfield id="tamannobloque"  name="tamannobloque" readonly="true" size="2" />
<sj:a id="ajaxlinkminus" onclick="aumentaBloque()" button="true" buttonIcon="ui-icon-plus" cssStyle="height:20px"/>
<sj:slider id="echo4" name="slider" label="Echo" value="{3, 7}" min="1" max="10" onCompleteTopics="sliderRangeStop" cssStyle="margin: 10px; width:20%"/>
</s:form> 
```

我希望滑块出现在最后一个按钮旁边（加号按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:07:15.883

如果要内联打印滑块，则需要使用该`display:inline-block`属性并为滑块提供一定的宽度。

在您的 CSS 中：

```
#echo4 {
    display: inline-block;
    width: 100px;
} 
```

[你可以在这里](http://jsfiddle.net/JXxS4/)看到一个演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:31:12.247

您可以尝试将表单元素设置`parentTheme`为`css_xhtml`并将元素包装在同一行，`div`然后再应用您的样式。

就像是

```
<s:form action="test" theme="simple">
<div>
<sj:a id="ajaxlink" onclick="disminuyeBloque()" button="true" buttonIcon="ui-icon-minus" cssStyle="height:20px"/>
<sj:textfield id="tamannobloque"  name="tamannobloque" readonly="true" size="2" parentTheme="css_xhtml"/>
</div>
<div>
<sj:a id="ajaxlinkminus" onclick="aumentaBloque()" button="true" buttonIcon="ui-icon-plus" cssStyle="height:20px"/>
<sj:slider id="echo4" name="slider" label="Echo" value="{3, 7}" min="1" max="10" onCompleteTopics="sliderRangeStop" cssStyle="margin: 10px; width:20%" parentTheme="css_xhtml"/>
</div>
</s:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:53:39.403

您可以将滑块的显示属性设置为 inline ，

```
<style>
#echo4    
{
display:inline;
}
</style> 
```

# mysql - MySQL 在多行上查询 GROUP_CONCAT

> ID：13753739
> 
> 赞同：4
> 
> 时间：2012-12-06T22:26:50.557
> 
> 标签：mysql, aggregate, group-concat

我从通用问题/答案数据中获取姓名和地址数据，以创建某种标准化报告数据库。

我得到的查询使用 group_concat 并适用于单个问题集，但不适用于多个问题集。

我试图通过只使用名字和姓氏以及 3 条记录来简化我正在做的事情，1 人 2 人，另一个人 1 人。实际上，尽管有超过 300,000 条记录。

**结果[示例](http://sqlfiddle.com/#!2/28443/19)`qs.Id = 1`。**

```
QuestionSetId       Forename        Surname
-------------------------------------------------------
            1       Bob             Jones 
```

**结果[示例](http://sqlfiddle.com/#!2/28443/18)`qs.Id IN (1, 2, 3)`。**

```
QuestionSetId       Forename        Surname
-------------------------------------------------------
            3       Bob,Bob,Frank   Jones,Jones,Smith 
```

**我想看到什么`qs.Id IN (1, 2, 3)`。**

```
QuestionSetId       Forename        Surname
-------------------------------------------------------
            1       Bob             Jones
            2       Bob             Jones
            3       Frank           Smith 
```

那么如何使第二个示例为每组名称和地址信息返回单独的行？

我意识到当前的数据存储方式是“有问题的”，但**我无法更改数据的存储方式。**

我可以得到[一组单独的答案](http://sqlfiddle.com/#!2/28443/6)，但不确定如何组合其他答案。

我无法更改的简化架构：

```
CREATE TABLE StaticQuestion (
  Id INT NOT NULL,
  StaticText VARCHAR(500) NOT NULL);

CREATE TABLE Question (
  Id INT NOT NULL, 
  Text VARCHAR(500) NOT NULL);

CREATE TABLE StaticQuestionQuestionLink (
  Id INT NOT NULL,
  StaticQuestionId INT NOT NULL,
  QuestionId INT NOT NULL,
  DateEffective DATETIME NOT NULL);

CREATE TABLE Answer (
  Id INT NOT NULL,
  Text VARCHAR(500) NOT NULL);

CREATE TABLE QuestionSet (
  Id INT NOT NULL,
  DateEffective DATETIME NOT NULL);

CREATE TABLE QuestionAnswerLink (
  Id INT NOT NULL,
  QuestionSetId INT NOT NULL,
  QuestionId INT NOT NULL,
  AnswerId INT NOT NULL,
  StaticQuestionId INT NOT NULL); 
```

一些仅用于名字和姓氏的示例数据。

```
INSERT INTO StaticQuestion (Id, StaticText)
VALUES (1, 'FirstName'),
       (2, 'LastName');

INSERT INTO Question (Id, Text)
VALUES (1, 'What is your first name?'),
       (2, 'What is your forename?'),
       (3, 'What is your Surname?');

INSERT INTO StaticQuestionQuestionLink (Id, StaticQuestionId, QuestionId, DateEffective)
VALUES (1, 1, 1, '2001-01-01'),
       (2, 1, 2, '2008-08-08'),
       (3, 2, 3, '2001-01-01');

INSERT INTO Answer (Id, Text)
VALUES (1, 'Bob'),
       (2, 'Jones'),
       (3, 'Bob'),
       (4, 'Jones'),
       (5, 'Frank'),
       (6, 'Smith');

INSERT INTO QuestionSet (Id, DateEffective)
VALUES (1, '2002-03-25'),
       (2, '2009-05-05'),
       (3, '2009-08-06');

INSERT INTO QuestionAnswerLink (Id, QuestionSetId, QuestionId, AnswerId, StaticQuestionId)
VALUES (1, 1, 1, 1, 1),
       (2, 1, 3, 2, 2),
       (3, 2, 2, 3, 1),
       (4, 2, 3, 4, 2),
       (5, 3, 2, 5, 1),
       (6, 3, 3, 6, 2); 
```

以防万一 SQLFiddle 出现在这里是我链接到的示例中的 3 个查询：

1： - 工作查询，但仅针对一组数据。

```
SELECT MAX(QuestionSetId) AS QuestionSetId,
       GROUP_CONCAT(Forename) AS Forename,
       GROUP_CONCAT(Surname) AS Surname
FROM   (SELECT
            x.QuestionSetId,
            CASE x.StaticQuestionId WHEN 1 THEN Text END AS Forename,
            CASE x.StaticQuestionId WHEN 2 THEN Text END AS Surname        
        FROM     (SELECT (SELECT   link.StaticQuestionId
                          FROM     StaticQuestionQuestionLink link
                          WHERE    link.Id = qa.QuestionId
                               AND link.DateEffective <= qs.DateEffective
                               AND link.StaticQuestionId IN (1, 2)
                          ORDER BY link.DateEffective DESC LIMIT 1) AS StaticQuestionId,
                         a.Text,
                         qa.QuestionSetId
                  FROM   QuestionSet qs
                            INNER JOIN QuestionAnswerLink qa ON qs.Id = qa.QuestionSetId
                            INNER JOIN Answer a ON qa.AnswerId = a.Id
                  WHERE  qs.Id IN (1)) x) y 
```

2： - 工作查询，但多组数据的结果不理想。

```
SELECT MAX(QuestionSetId) AS QuestionSetId,
       GROUP_CONCAT(Forename) AS Forename,
       GROUP_CONCAT(Surname) AS Surname
FROM   (SELECT
            x.QuestionSetId,
            CASE x.StaticQuestionId WHEN 1 THEN Text END AS Forename,
            CASE x.StaticQuestionId WHEN 2 THEN Text END AS Surname        
        FROM     (SELECT (SELECT   link.StaticQuestionId
                          FROM     StaticQuestionQuestionLink link
                          WHERE    link.Id = qa.QuestionId
                               AND link.DateEffective <= qs.DateEffective
                               AND link.StaticQuestionId IN (1, 2)
                          ORDER BY link.DateEffective DESC LIMIT 1) AS StaticQuestionId,
                         a.Text,
                         qa.QuestionSetId
                  FROM   QuestionSet qs
                            INNER JOIN QuestionAnswerLink qa ON qs.Id = qa.QuestionSetId
                            INNER JOIN Answer a ON qa.AnswerId = a.Id
                  WHERE  qs.Id IN (1, 2, 3)) x) y 
```

3： - 仅在 1 个字段（答案）上对多组数据进行查询。

```
SELECT
    qs.Id AS QuestionSet,
    a.Text AS Answer
FROM
    QuestionSet qs
        INNER JOIN QuestionAnswerLink qalink ON qs.Id = qalink.QuestionSetId
        INNER JOIN StaticQuestionQuestionLink sqqlink ON qalink.QuestionId = sqqlink.QuestionId
        INNER JOIN Answer a ON qalink.AnswerId = a.Id
WHERE
        sqqlink.StaticQuestionId = 1 /* FirstName */
    AND sqqlink.DateEffective = 
            (SELECT DateEffective
               FROM StaticQuestionQuestionLink
              WHERE StaticQuestionId = 1 
                AND DateEffective <= qs.DateEffective
           ORDER BY DateEffective
               DESC 
              LIMIT 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:44:42.147

@PeteGo，试试这个

```
SELECT
    qs.Id AS QuestionSet,
    GROUP_CONCAT(a.Text SEPARATOR ', ')  AS Answer
FROM
    QuestionSet qs
        INNER JOIN QuestionAnswerLink qalink ON qs.Id = qalink.QuestionSetId
        INNER JOIN StaticQuestionQuestionLink sqqlink ON qalink.QuestionId = sqqlink.QuestionId
        INNER JOIN Answer a ON qalink.AnswerId = a.Id
WHERE
        sqqlink.StaticQuestionId in (1,2,3) /* FirstName */
GROUP BY qs.Id; 
```

或者

```
SELECT
    qs.Id AS QuestionSet,
    group_CONCAT(b.Text ORDER BY b.Id )   AS Answer
FROM
    QuestionSet qs
        INNER JOIN QuestionAnswerLink qalink ON qs.Id = qalink.QuestionSetId
        INNER JOIN StaticQuestionQuestionLink sqqlink ON qalink.QuestionId = sqqlink.QuestionId
        INNER JOIN Answer a ON qalink.AnswerId = a.Id
INNER JOIN Answer b ON qalink.AnswerId = b.Id
WHERE
        sqqlink.StaticQuestionId in (1,2,3)  
   group by qs.Id  ; 
```

或者

```
select qs.Id, group_concat(a.Text order by a.Id) from QuestionAnswerLink qalink
left join QuestionSet qs on qalink.QuestionSetId=qs.Id
left join Answer a on qalink.AnswerId = a.Id

 left join QuestionSet qs1 on qalink.QuestionSetId=qs1.Id
left join Answer b on qalink.AnswerId = b.Id

group by qs.Id ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:14:53.027

从@PixelMaker 和@PeteGO 窃取，我会把这个扔进去

```
SELECT qs.Id AS QuestionSetId,
       GROUP_CONCAT(a.Text order by a.id) AS Answer
FROM QuestionSet qs
JOIN QuestionAnswerLink qa ON qs.Id = qa.QuestionSetId
JOIN StaticQuestionQuestionLink link ON qa.QuestionId = link.QuestionId
JOIN Answer a ON qa.AnswerId = a.Id
WHERE link.Id = qa.QuestionId
      AND link.DateEffective <= qs.DateEffective
      AND link.StaticQuestionId IN (1, 2)
      and qs.id in (1,2,3)
GROUP BY qs.Id 
```

[SQL小提琴](http://sqlfiddle.com/#!2/28443/101/0)

最后是这个[SQL Fiddle](http://sqlfiddle.com/#!2/28443/113/0)

```
SELECT qs.Id AS QuestionSetId,
       GROUP_CONCAT(case link.staticquestionid when 1 then a.Text end) AS forename,
       GROUP_CONCAT(case link.staticquestionid when 2 then a.Text end) AS surname
FROM QuestionSet qs
JOIN QuestionAnswerLink qa ON qs.Id = qa.QuestionSetId
JOIN StaticQuestionQuestionLink link ON qa.QuestionId = link.QuestionId
JOIN Answer a ON qa.AnswerId = a.Id
WHERE link.Id = qa.QuestionId
      AND link.DateEffective <= qs.DateEffective
      AND link.StaticQuestionId IN (1, 2)
      and qs.id in (1,2,3)
GROUP BY qs.Id 
```

这给出了预期的结果。

# erlang - 无法让两个 Erlang 节点通信

> ID：13753741
> 
> 赞同：2
> 
> 时间：2012-12-06T22:26:53.567
> 
> 标签：erlang, distributed, distributed-computing

无论我尝试什么，我都无法让两个不同的节点进行通信。这可能是一个非常容易解决的问题。

我已经创建了文件 .cookie.erlang 并将其放入我的主目录中。然后我打开一个终端窗口并输入以下命令：

```
erl -sname user1@pc
erlang:set_cookie(node(),cookie). 
```

在另一个终端窗口中，我键入：

```
erl -sname user2@pc
erlang:set_cookie(node(),cookie). 
```

现在，如果我在第一个终端窗口中键入以下命令：

```
net_adm:ping(user2@pc). 
```

结果我总是得到“假”，这意味着两个节点无法相互连接。我不明白我在这里错过了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:52:57.030

一定要确保“pc”是您机器的*实际*主机名。如果不是，请确保您正在使用它。

或者，由于您使用的是 sname 并且两台主机都在同一台机器上，因此您可以使用`erl -sname user1`and `erl -sname user2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T03:25:54.170

这是一个DNS问题，请看[这里](https://stackoverflow.com/a/22469730/1526656)，类似问题的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T03:39:52.983

是的，它看起来主要是一个 DNS 问题。如果你在基于 Unix 的操作系统上，你应该在*/etc/hosts*中更新它，如果它在同一台机器上，你总是可以使用可以访问的**localhost**：

```
erl -sname a@localhost -cookie aloha 
```

然后在一个单独的终端中：

```
erl -sname b@localhost -cookie aloha 
```

有了它，您应该能够很好地与节点通信。

# objective-c - 以编程方式更改时 UISwitch 不发送 valueChanged 事件

> ID：13753742
> 
> 赞同：10
> 
> 时间：2012-12-06T22:26:54.080
> 
> 标签：objective-c, ios, uiswitch

我有一对通过 valueChanged 事件连接到 IBAction 的 UISwitches。触摸开关时 valueChanged 事件触发良好。但是，如果我以编程方式更改其中一个开关，它不会调用我的 IBAction。

```
- (IBAction)switchChanged:(UISwitch *)sender {
    if (sender == self.shippingSwitch) {
        if (self.shippingSwitch.on && !self.PayPalSwitch.on) {
            [self.PayPalSwitch setOn:YES animated:YES];
        }
    }

    if (sender == self.PayPalSwitch) {
        if (!self.PayPalSwitch.on) {
            // This is not working when the PayPal switch is set via the code above
            self.PayPalEmailField.backgroundColor = [UIColor grayColor];
            self.PayPalEmailField.enabled = NO;

            if (self.shippingSwitch.on) {
                [self.shippingSwitch setOn:NO animated:YES];
            }
        } else {
            self.PayPalEmailField.backgroundColor = [UIColor clearColor];
            self.PayPalEmailField.enabled = YES;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T22:31:08.757

这是正确且理想的行为。由于您明确更改了值，因此由您决定如何处理更改的值。

这样做的原因是，在通过用户交互通知控件的值被更改后，显式更改控件的值并不少见。如果显式状态更改导致事件再次触发，您将陷入无限循环。

# .htaccess - Htaccess 将旧页面重定向到新页面

> ID：13753745
> 
> 赞同：0
> 
> 时间：2012-12-06T22:27:11.453
> 
> 标签：.htaccess, redirect

我已经更改了一个页面的 slug，我想将旧页面重定向到新页面。

我在 htaccess 文件中写的是：

```
Redirect 301 /event.php?event_id=10&slug=old-slug-example http://www.mywebsite.com/event/10/new-slug-example 
```

但是当我尝试访问旧链接时，浏览器会返回：

```
http://www.mywebsite.com/event/10/new-slug-example?event_id=10&slug=old-slug-example 
```

我该如何解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:50:27.810

`?`在重定向目标的末尾添加一个：

```
# here -------------------------------------------v
http://www.mywebsite.com/event/10/new-slug-example? 
```

但是最后你会得到一个丑陋`?`的结果。您可以求助于 mod_rewrite，它不会显示在浏览器的 URL 地址栏中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} event_id=10&slug=old-slug-example
RewriteRule ^/?event.php$ http://www.mywebsite.com/event/10/new-slug-example? [L,R=301] 
```

# linux - find 忽略我搜索的第一个文件名

> ID：13753751
> 
> 赞同：3
> 
> 时间：2012-12-06T22:27:23.020
> 
> 标签：linux, bash, find

我在一个文件夹中搜索最近更改的两个文件，但似乎我调用`find`不正确。作为回报，我只得到第二个文件的结果。

`find /tmp -name 'twofirmscoop.so' -o -name 'twofirms.so' -exec ls -lt {} + 2>/dev/null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:33:00.453

该`-exec`参数仅适用于第二场比赛。要将它们分组，请执行以下操作：

```
find /tmp \( -name 'twofirmscoop.so' -o -name 'twofirms.so' \) -exec ls -lt {} + 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:35:54.617

试试这个：

```
find /tmp \( -name 'twofirmscoop.so' -o -name 'twofirms.so' \) -exec ls -lt {} + 2>/dev/null 
```

# .htaccess - 自动重写 URL

> ID：13753754
> 
> 赞同：-2
> 
> 时间：2012-12-06T22:27:30.573
> 
> 标签：.htaccess, drupal

我的网站出现问题，因为它不断更改网址并在其末尾添加一些不寻常的内容。

示例：[http ://website.com/page](http://website.com/page)

变成

示例：[http ://website.com/page#.UMELy-OLLaU](http://website.com/page#.UMELy-OLLaU)

我怎样才能解决这个问题？或者我应该在哪里获得更多信息。htaccess 是一个普通的drupal htaccess。

[http://puragen.co.uk](http://puragen.co.uk)

谢谢您的帮助。亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:36:24.777

该片段由**AddThis** javascript (addthis_widget.js) 添加。这显然是您在每个页面上用于共享按钮的内容。该脚本为您的站点创建一个 ID 并将其添加为片段。我*认为*您可以通过配置 AddThis 小部件来摆脱它，但我从未亲自做过。如果这不起作用，您可以尝试通过将其添加到整个页面标题来在标题中配置它：

```
<script type="text/javascript">
   var addthis_config = {
      "data_track_addressbar" : false
   };
</script> 
```

# javascript - 如何在 JavaScript 中实际捕获花括号之间的内容？

> ID：13753761
> 
> 赞同：0
> 
> 时间：2012-12-06T22:27:53.777
> 
> 标签：javascript, regex

我需要捕获大括号之间的所有内容。所以如果我有字符串：

{这} {是} 废话 {测试}

应该返回 [this, is a, test]。

我的代码如下所示：

```
var myString = "{this} {is a} blah {test}";
var parts = (/{([^{}]+)}/g).exec(myString);

//   parts = [{this}, {is a}, {test}]  

var parts = (/{([^{}]+)}/g).exec(myString);
//   parts = [{this}, this] 
```

有什么想法/帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T22:29:13.097

我认为您对布丁的要求过高：

```
var rex = /\{([^}]+)\}/g;
var str = "{this} {is a} blah {test}";
var m;
for (m = rex.exec(str); m; m = rex.exec(str)) {
    console.log(m[1]);
} 
```

[实例](http://jsbin.com/ahikaz/1)| [来源](http://jsbin.com/ahikaz/1/edit)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T22:29:27.410

```
var parts = myString.match(/{[^}]+/g).map(function (s) { return s.slice(1); }); 
```

# javascript - Javascript 覆盖图像加载

> ID：13753769
> 
> 赞同：1
> 
> 时间：2012-12-06T22:28:08.527
> 
> 标签：javascript

我试图检测何时使用事件加载图像（而不是使用间隔来检查完整属性）。我有以下代码，但由于某种原因，这不会触发。我也对 onerror 和 onabort 事件做了一些处理，以防图像无法加载。

现在，如果我将回调附加到图像加载，则执行回调，并从原型的 onload 打印“Image Loaded”。几乎就像根本没有调用新的覆盖 onload 一样。我已经确定这是 head 脚本标签中的第一件事。

```
Image.prototype.coreOnload = Image.prototype.onload;
Image.prototype.onload = function() {
   console.log('Image Loaded ' + this.src);
   if( this.coreOnload ) {
      this.coreOnload();
    }
}; 
```

哦，我正在测试这是 chrome！

任何指针？

EDIT1：添加我的整个 html

当我加载此页面时，会记录“从回调加载”，但不会记录“图像加载”。我希望看到两者。

```
<html>
    <head>
        <script type="text/javascript" >

            Image.prototype.coreOnload = Image.prototype.onload;
            Image.prototype.onload = function() {
                console.log('Image Loaded ' + this.src);
                if( this.coreOnload ) {
                    this.coreOnload();
                }
            };
            Image.prototype.coreOnerror = Image.prototype.onerror;
            Image.prototype.onerror = function() {
                console.log('Image Loaded Error ' + this.src);
                if( this.coreOnerror ) {
                    this.coreOnerror();
                }
            };
            Image.prototype.coreOnabort  = Image.prototype.onabort;
            Image.prototype.onabort = function() {
                console.log('Image Loaded Error ' + this.src);
                if( this.coreOnabort ) {
                    this.coreOnabort();
                }

            };
        </script>
        <style>
            .newStyle {
                font-size: 14pt;
            }
        </style>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
    </head>
    <body >

        <script type="text/javascript">
        var img = new Image();
        img.onload = function(){
            console.log("Loaded from callback")
        };
        img.src = "http://i2.cdn.turner.com/cnn/dam/assets/121204012423-obama-boehner-t1-only-t1-main.jpg";

        </script>

        <a href="http://www.news.com">An external link</a>
    </body>

</html> 
```

编辑：更正了日志消息中的错字。

# c# - 如何在不获取所有版本的情况下复制/复制项目？

> ID：13753771
> 
> 赞同：2
> 
> 时间：2012-12-06T22:28:12.343
> 
> 标签：c#, sitecore, sitecore6

是否有一个 API 可以让我复制或复制并且项目只是获得一个版本？
`Item.Duplicate()`并且`Item.CopyTo()`都获得所有编号的版本和语言。

我在 Sitecore 6.3.1 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:01:07.507

`item.Versions.RemoveAll(true);`还会删除最新版本。

您可以复制或复制该项目（及其所有版本），然后尝试以下操作：

```
 private void RemovePreviousVersions(Item myItem, bool includeAllLanguages)
    {
        // get the most recent version
        Item currentVersion = myItem.Versions.GetLatestVersion();
        Item[] versions = myItem.Versions.GetVersions(includeAllLanguages);

        // loop through the item versions
        foreach(Item itemVersion in versions)
        {
            // remove the version if it is not the most recent
            if (!itemVersion.Version.Number.Equals(currentVersion.Version.Number))
            {
                itemVersion.Versions.RemoveVersion();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:08:18.317

我不必复制项目，您可以在树中插入一个新项目，但这取决于您的确切要求。

[http://briancaos.wordpress.com/2011/01/14/create-and-publish-items-in-sitecore/](http://briancaos.wordpress.com/2011/01/14/create-and-publish-items-in-sitecore/)

您是否尝试过以特定语言获取项目的最新版本并进行复制？

```
Item masterItem = master.GetItem("/sitecore/content/home").Versions.GetLatestVersion(Sitecore.Context.Language);
masterItem.Duplicate("newItem"); 
```

或复制/复制然后删除新创建项目的版本：

```
item.Versions.RemoveAll(true); 
```

但是您需要检查它是否也删除了最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T12:43:06.090

我使用此代码仅复制一项的最新版本，包括儿童。它创建一个新项目，创建必要的版本并设置字段。

```
private Item CopyLatestVersion(Item target, Item itemToCopy, string copyOfName)
    {
        var copiedItem = target.Add(copyOfName, new TemplateID(itemToCopy.TemplateID));

        var db = itemToCopy.Database;

        bool sharedFieldsPopulated = false;

        foreach (var lang in itemToCopy.Languages)
        {
            var languageVersionToCopy = 
                db.GetItem(itemToCopy.ID, lang, Sitecore.Data.Version.Latest);

            if (languageVersionToCopy.Versions.Count == 0)
            {
                continue;
            }

            var languageVersionCopied = db.GetItem(copiedItem.ID, lang);

            //we have to check if there is already version cause when the item was created
            //Sitecore automatically creates a version already with the context language
            if (languageVersionCopied.Versions.Count == 0)
            {
                languageVersionCopied = languageVersionCopied.Versions.AddVersion();
            }

            languageVersionCopied.Editing.BeginEdit();
            foreach (Sitecore.Data.Fields.Field field in languageVersionToCopy.Fields)
            {
                if (field.HasValue
                    && (!sharedFieldsPopulated || !field.Shared)
                    && field.Name.Trim() != "")
                {
                    languageVersionCopied.Fields[field.Name].Value = field.Value;
                }
            }
            //this doesn't update the edited by field, which we don't want to set to current user 
            //but keep the original updater like in default copy to functionality
            languageVersionCopied.Editing.EndEdit(false, false);

            //during the first iteration we also copy the shared fields afterwards we don't
            sharedFieldsPopulated = true;
        }

        //recursively copying also all children
        foreach (Item child in itemToCopy.Children)
        {
            CopyLatestVersion(copiedItem, child, child.Name);
        }

        return copiedItem;
    } 
```

# symfony - Symfony2：在链配置的命名空间中找不到类 'Doctrine\Common\Collections\ArrayCollection'

> ID：13753772
> 
> 赞同：2
> 
> 时间：2012-12-06T22:28:15.097
> 
> 标签：symfony, doctrine-orm, persistence

尝试保持一对多关系时发生错误。特别是，一个客户可能有多个家庭成员；给定的家庭成员与一个且只有一个客户相关联。[我是 Symfony 的新手，所以会出现错误！] 非常感谢您的指导。

注意下面的替代控制器片段通过尝试将家庭表中的客户端 ID 设置为 null 来产生完整性约束错误。

### 客户实体片段

```
namespace Mana\AdminBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Mana\AdminBundle\Entity\Clients
 *
 * @ORM\Table(name="clients")
 * @ORM\Entity
 */
class Clients
{
    protected $members;

    public function __construct()
    {
        $this->members = new ArrayCollection();
    }

    public function getMembers()
    {
        return $this->members;
    }

    public function setMembers(ArrayCollection $members)
    {
        $this->members = $members;
    }

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     * @ORM\OneToMany(targetEntity="Household", mappedBy="clients")
     * @ORM\ManyToOne(targetEntity="EthDesc", inversedBy="clients")
     * @ORM\JoinColumn(name="eid", referencedColumnName="id")
     */ 
```

### 家庭实体片段

```
namespace Mana\AdminBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Mana\AdminBundle\Entity\Household
 *
 * @ORM\Table(name="household")
 * @ORM\Entity(repositoryClass="Mana\AdminBundle\Entity\HouseholdRepository")
 */
class Household {

    /**
     * @var integer $hid
     *
     * @ORM\Column(name="hid", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     * @ORM\ManyToOne(targetEntity="Clients", inversedBy="members")
     * @ORM\JoinColumn(name="cid", referencedColumnName="id")
     * @ORM\ManyToOne(targetEntity="EthDesc", inversedBy="members")
     * @ORM\JoinColumn(name="eid", referencedColumnName="id")
     */ 
```

### ClientsType 片段

```
 ->add('members', 'collection', array(
        'type' => new HouseholdType(),
        'allow_add' => true, 
        'by_reference' => false,
        'cascade_validation'  => true,
        )); 
```

### 控制器片段

```
public function createAction(Request $request) {
    $entity = new Clients();
    $form = $this->createForm(new ClientsType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->persist($entity->getMembers());
        $em->flush();
        return $this->redirect($this->generateUrl('clients_show', array('id' => $entity->getId())));
    }
} 
```

### 备用控制器片段

```
public function createAction(Request $request) {
    $entity = new Clients();
    $form = $this->createForm(new ClientsType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        foreach ($entity->getMembers() as $member)
        {
            $em->persist($member);
        }
        $em->flush();
        return $this->redirect($this->generateUrl('clients_show', array('id' => $entity->getId())));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:27:04.833

我得到这个工作的时间，我没有

```
use Doctrine\Common\Collections\ArrayCollection; 
```

我只是

```
$this->field = new \Doctrine\Common\Collections\ArrayCollection(); 
```

在我的构造函数中。

此外，您可能需要考虑将家庭（似乎是客户中的成员）添加为实体形式：

```
->add('members', 'entity', array(
    'type' => new HouseholdType(),
    'allow_add' => true, 
    'by_reference' => false,
    )); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-19T10:57:17.243

在我的情况下，我（错误地）尝试访问 ToMany 关系，因为它是 ToOne 关系（[类似于这个答案](https://stackoverflow.com/a/12330451/4837606)）。

# jquery - 从 rails 传递 javascript 回调函数名称

> ID：13753774
> 
> 赞同：0
> 
> 时间：2012-12-06T22:28:18.247
> 
> 标签：jquery, ruby-on-rails

我正在尝试使用无页 jquery 插件，在我的应用程序助手中，我需要将回调函数的名称作为参数之一传递：

```
opts = {
        :totalPages => total_pages,
    :url        => url,
    :loaderMsg  => 'Loading more items...',
    :loaderImage => image_path("img/ajax_loader.gif"),
    :complete => "update"
}

javascript_tag("$('#tiles').pageless(#{opts.to_json});") 
```

这显然不起作用，因为 jquery 尝试调用“update”.call()

我应该如何传递我的回调函数的名称，以便在 json 中不带引号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:43:12.847

你想做这样的事情：

```
<%= javascript_tag do %>
  $('#tiles').pageless({
    totalPages: <%= total_pages %>,
    url: '<%= url %>',
    loaderMsg: 'Loading more items...',
    loaderImage: '<%= image_path("img/ajax_loader.gif") %>',
    complete: update
  });
<% end %> 
```

如果我假设您的代码段来自 Rails 视图是正确的。

# javascript - 使用 Javascript 连接到 Splunk 但没有获取我保存的搜索

> ID：13753775
> 
> 赞同：0
> 
> 时间：2012-12-06T22:28:23.763
> 
> 标签：javascript, splunk

我正在尝试从 Splunk 中获取一些信息，以便我可以使用它。我登录成功，但是我什么也做不了。我试图让我保存的搜索和工作无济于事。这是我用来登录并尝试获取保存的搜索的代码。

```
var splunkjs = require('splunk-sdk');
    var service = new splunkjs.Service({username: "****", password: "*****", host: "dllprdspl01.dl.prd.p.******.com", port: 8089, scheme: "https", version: 5});
    service.login(function(err, success) {
        if (err) {
            throw err;
        }
        console.log("Login was successful: " + success);
        var mySavedSearches = service.savedSearches();
        mySavedSearches.fetch(function(err, mySavedSearches) {
          console.log("There are " + mySavedSearches.list().length + " saved searches");
          var savedSearchColl = mySavedSearches.list();
          for(var i = 0; i < savedSearchColl.length; i++) {
            var search = savedSearchColl[i];
            console.log(i + ": " + savedSearchColl[i].name);
            console.log("    Query: " + savedSearchColl[i].properties().search + "\n");
          }
        });
    }); 
```

我在登录时成功返回，但是当我尝试列出我保存的搜索时，我收到此错误：

```
TypeError: Cannot call method 'list' of undefined 
```

登录后，我已将我的服务打印到控制台，但我没有看到任何看起来有问题的地方。

我已经能够使用以下代码连接并获取会话密钥：

```
var splunkjs = require('splunk-sdk');
var xml2js = require('xml2js');

var context = new splunkjs.Context({username: "****", password: "****", host: "****.com", port: 8089, scheme: "https", version: 5});
var sessionKey;
var key = context.login(function(err, success){
  if(err){
    throw err;
  }
  // console.log("Login was successful " + success);
  var keyXml = key.req.res.body;
  var parser = new xml2js.Parser();
  parser.parseString(keyXml, function(err, result){
    sessionKey = result.response.sessionKey[0];
  });
  context.sessionKey = sessionKey;
  console.log(context);
  context.get('services/saved/searches/hamm_test_mn7', function(err, response){
    console.get(response);
  })
}); 
```

如果我能得到我的会话密钥，那么我应该登录到 splunk。我将如何从那里完成我保存的搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:21:35.910

在 Splunk 工作的 Neeraj 的帮助下，我能够连接到 Splunk 并获取我保存的搜索。我没有注意到我必须在我的 Splunk 服务器上安装 xml2json。这是解释所有需要发生的事情的[文档页面。](http://dev.splunk.com/view/SP-CAAAEFN)然后我不得不将我的版本号更改为 4.3 而不是上面的 5。然后一切都连接起来，我能够得到我想要的保存的搜索。使用原始代码，我似乎正在连接，但实际上我返回的是一个空的服务对象。这是我用来确保连接的代码。当您看到会话密钥时，您就知道 Splunk 正在与您对话。

```
var splunkjs = require('splunk-sdk');
var service = new splunkjs.Service({username: "admin",password: "changeme",host: "localhost",port:8089,scheme: "https",version: 4.3});
service.login(function (err, success) {
    if (err) console.log("Error logging in", err);
    else console.log(service.sessionKey);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:07:46.870

令人惊讶的是，您可以登录，但它会因保存的搜索而窒息。我们如何查看在获取过程中是否抛出错误。尝试以下代码，如果您在控制台中看到任何内容，请告诉我。

```
var splunkjs = require('splunk-sdk');
var service = new splunkjs.Service({username: "****", password: "*****", host: "dllprdspl01.dl.prd.p.******.com", port: 8089, scheme: "https", version: 5});
service.login(function(err, success) {
  if (err) {
      throw err;
  }
  console.log("Login was successful: " + success);
  var mySavedSearches = service.savedSearches();
  mySavedSearches.fetch(function(err, mySavedSearches) {
    if (err) {
      console.log("Error in fetching savedSearches:", err);
      throw err;
    }
    console.log("There are " + mySavedSearches.list().length + " saved searches");
    var savedSearchColl = mySavedSearches.list();
    for(var i = 0; i < savedSearchColl.length; i++) {
      var search = savedSearchColl[i];
      console.log(i + ": " + savedSearchColl[i].name);
      console.log("    Query: " + savedSearchColl[i].properties().search + "\n");
    }
  });
}); 
```

# java - org.codehaus.jackson.JsonGenerationException 类型无法解析。它是从所需的 .class 文件中间接引用的

> ID：13753783
> 
> 赞同：6
> 
> 时间：2012-12-06T22:29:06.383
> 
> 标签：java, google-app-engine

使用此代码：

```
import org.codehaus.jackson.map.ObjectMapper;
ObjectMapper objectMapper = new ObjectMapper();
String str = objectMapper.writeValueAsString(myObject); 
```

我收到这个 Eclipse 错误：

```
The type org.codehaus.jackson.JsonGenerationException cannot be resolved. It is indirectly referenced from 
 required .class files 
```

在线`String str = objectMapper.writeValueAsString(myObject);`

我的类路径上有三种“JsonGenerationException”类类型（您可能需要保存图像并单独打开它才能读取图像中的文本）：

![在此处输入图像描述](../Images/616d17a7c468b59f7d095f50a78568be.png)

我收到此错误消息的原因是因为 JsonGenerationException 在两个不同的 jar 文件中并且 Eclipse 不确定要使用哪个？如果是这样，我该如何解决？

我需要这个 jar 文件： http: [//grepcode.com/snapshot/repo1.maven.org/maven2/org.codehaus.jackson/jackson-core-asl/1.9.4](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.codehaus.jackson/jackson-core-asl/1.9.4)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T22:58:48.483

确保 JAR 包含`org.codehaus.jackson.JsonGenerationException`在您的类路径中，例如，通过使用[jackson-core-asl POM](http://repo1.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/1.9.4/jackson-core-asl-1.9.4.pom)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-22T09:25:33.803

```
import org.codehaus.jackson.map.ObjectMapper; 
```

而且，你必须添加`jackson-core-asl-XXX.jar`到构建路径。

# iphone - 核心数据 - 简单的 JOIN 类型的 Fetch

> ID：13753789
> 
> 赞同：5
> 
> 时间：2012-12-06T22:29:22.763
> 
> 标签：iphone, objective-c, ios, core-data

我需要对我的核心数据存储中的两个表/模型进行“加入”类型的操作，而且我很难找到好的例子来让这样的事情发挥作用。

我需要做的事情相当简单。我有两个模型/表：位置和 location_categories，其中位置包含位置/机构的详细信息（以及唯一 ID），并且 location_categories 表包含具有关联 location_id 的 category_id。我需要选择给定 category_id 连接两个表/模型的所有位置。如果它是直接的 SQL，它看起来像这样（当我对实际的 SQLite DB 运行它时，这个查询确实有效）：

```
// pretend we passed in a catID of 29:
SELECT * FROM zlocation where zlocid in (select zlocid from zloccategory where zcatid = 29) 
```

如您所见，它非常简单。有没有办法做到这一点而不必进行两次提取和 for 循环？我目前执行此操作的objective-c 代码如下，它运行良好，但当然它非常缓慢且效率低下，因为两个表中都有大量数据。for 循环导致了巨大的减速，我的直觉告诉我，这项工作真的应该在 DB/Core-Data 方面完成：

```
- (NSMutableArray *) fetchLocsWithCatID:(NSString *)catID {
    NSMutableArray *retArr = [[NSMutableArray alloc] init];

    NSManagedObjectContext *context = [self managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:MODELNAME_LOCCATEGORIES inManagedObjectContext:context]];
    [fetchRequest setPredicate: [NSPredicate predicateWithFormat:@"catID == %@", catID]];

    NSError *error;
    NSArray *locCats = [context executeFetchRequest:fetchRequest error:&error];
    NSArray *allLocsArr = [self fetchAllDataForTable:MODELNAME_LOCATION]; // this retrieves contents of entire table

    for (Location *currLoc in allLocsArr) {
        for (LocCategory *currLocCat in locCats) {
            if ([currLoc.locID isEqualToString:currLocCat.locID]) {
                if (![retArr containsObject:currLoc]) {
                    [retArr addObject:currLoc];
                }
            }
        }
    }

    return retArr;
} 
```

关于这是否可以通过一个谓词/提取来实现的任何想法？或者不知道......也许有一种更有效的方法可以通过objective-c代码加入这两个NSArrays？

提前感谢您对此提供的任何指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:45:16.190

最好的方法是使用关系。

这样，当您获取 a 时，`Location`您还可以访问`LocationCategory`like`myLocation.locationCategory`

您需要像这样设置您的关系：

```
(Entity)LocationCategory.(relationship)locations <->> (Entity)Location.(relationship)locationCategory 
```

这是一对多的关系。也不要忘记倒数。

设置好之后，您只需在创建实体实例的地方连接关系即可。像：

```
 Location *myLocation = ...
 LocationCategory *myLocationCategory = ...
 myLocation.locationCategoy = myLocationCategory; 
```

还要确保您使用相同的 MOC 来获取对象。我强烈推荐[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)来轻松管理在指定 moc 中创建对象和获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:40:43.470

阅读核心数据和关系。它将自动创建相关实体的其他对象集。因此，在上述情况下，如果您将 Locations 作为一个实体，将 Location_Categories 作为另一个类别，您需要做的就是在 Locations 表中创建一个指向 Location Categories 实体的关系。

您可以在 Core Data Modeling 屏幕中执行此操作。

一旦你这样做了，位置管理对象类将有一个位置类别的 NSSet。同样，Location Categories Entity 中也会有一个 Location 对象。

因此，您需要做的只是一个位置类别的查询，就像您在上面所做的那样。但是，您不需要做额外的查询

```
for (LocationCategory *locationCategory in locationCats) {
    NSLog(@"Location name is %@",locationCategory.location.locationName);
    // You can ofcourse add it to an arrary or what ever
} 
```

任何核心数据教程都应该能够在这方面为您提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:46:41.640

如果这些实体在 CoreData 中建模，您通常会有从 location_categories 到 location 的关联，从 location 到 location_categories 具有反向关系。因此，如果我有一个名为“Location”的实体，它将在其中有一个名为 locationCategory 的关系，而在 LocationCategory 实体中，它将有一个名为 Location 的关系。

定义了这种双向关系后，我将使用以下内容设置获取请求：

```
[fetchRequest setEntity:[NSEntityDescription entityForName:MODELNAME_LOCATIONS inManagedObjectContext:context]];
[fetchRequest setPredicate: [NSPredicate predicateWithFormat:@"locationCategory.catID == %@", catID]]; 
```

这应该返回与具有给定类别 ID 的位置类别相关联的所有 Location 对象

# python - 使列数动态化

> ID：13753791
> 
> 赞同：0
> 
> 时间：2012-12-06T22:29:23.720
> 
> 标签：python, django, django-tables2

我使用 django 和 django-tables2，我有一个问题：
如何动态呈现列数？每列代表一年。

我多年来汇总了一些数字，但我现在不知道有多少年与这个子集相关。

有时有两年，所以我想得到一个有 3 列的表：Data, 2011, 2012。但有时有四年，所以我想有一个有五列的表：Data, 2009, 2010, 2011, 2012。我想说列数取决于数据，我无法预定义列。

我只寻找将数据显示为表格的可能性。**数据库**
表就像

 **```
The pk of the row (to identify which student)
The year for which this is the average
The value, in this example the average 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:01:23.773

**我误读了这个问题；这没有回答。**

据我了解，您希望每年的每一行都有一个值吗？假设每一行都是一个学生，并且您想要每个学生每年的平均成绩。

并不是这个问题的真正答案，而是另一种（更简单？）的方法是创建一个包含三列的表：

1.  `pk`行的（以识别哪个学生）
2.  这`year`是平均值
3.  ，`value`在这个例子中，平均值

在这里`pk`和`year`都是独一无二的（一个学生每年只能有一个平均值）。

您是否希望数据库强制每个学生每年都有一个平均值，还是可以有空年份（数据库设置中的 NULL 值）？

我不太了解您的情况，但在许多情况下，我认为这是更简单的解决方案，因为它不需要每年更改数据库的结构，只需更改其中的数据即可。**

# hadoop - 无法启动 CDH4 辅助名称节点：NameNode 地址的 URI 无效

> ID：13753800
> 
> 赞同：6
> 
> 时间：2012-12-06T22:30:03.033
> 
> 标签：hadoop, cloudera

我一直在尝试设置 hadoop 的 CDH4 安装。我有 12 台机器，标记为 hadoop01 - hadoop12，并且名称节点、作业跟踪器和所有数据节点都已正常启动。我能够查看 dfshealth.jsp 并看到它找到了所有数据节点。

但是，每当我尝试启动辅助名称节点时，它都会出现异常：

```
Starting Hadoop secondarynamenode:                         [  OK  ]
starting secondarynamenode, logging to /var/log/hadoop-hdfs/hadoop-hdfs-secondarynamenode-hadoop02.dev.terapeak.com.out
Exception in thread "main" java.lang.IllegalArgumentException: Invalid URI for NameNode address (check fs.defaultFS): file:/// has no authority.
        at org.apache.hadoop.hdfs.server.namenode.NameNode.getAddress(NameNode.java:324)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.getAddress(NameNode.java:312)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.getServiceAddress(NameNode.java:305)
        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.initialize(SecondaryNameNode.java:222)
        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.<init>(SecondaryNameNode.java:186)
        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.main(SecondaryNameNode.java:578) 
```

这是我在辅助名称节点上的 hdfs-site.xml 文件：

```
<configuration>
  <property>
    <name>dfs.name.dir</name>
    <value>/data/1/dfs/nn</value>
  </property>
  <property>
    <name>dfs.namenode.http-address</name>
    <value>10.100.20.168:50070</value>
    <description>
      The address and the base port on which the dfs NameNode Web UI will listen.
      If the port is 0, the server will start on a free port.
    </description>
  </property>
  <property>
    <name>dfs.namenode.checkpoint.check.period</name>
    <value>3600</value>
  </property>
  <property>
    <name>dfs.namenode.checkpoint.txns</name>
    <value>40000</value>
  </property>
  <property>
    <name>dfs.namenode.checkpoint.dir</name>
    <value>/var/lib/hadoop-hdfs/cache</value>
  </property>
  <property>
    <name>dfs.namenode.checkpoint.edits.dir</name>
    <value>/var/lib/hadoop-hdfs/cache</value>
 </property>
 <property>
    <name>dfs.namenode.num.checkpoints.retained</name>
    <value>1</value>
  </property>
 <property>
    <name>mapreduce.jobtracker.restart.recover</name>
    <value>true</value>
  </property>

</configuration> 
```

赋予 dfs.namenode.http-address 的值似乎有问题，但我不确定是什么。它应该以 http:// 还是 hdfs:// 开头？我尝试在 lynx 中调用 10.100.20.168:50070 并显示一个页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T23:55:10.517

看起来我缺少辅助名称节点上的 core-site.xml 配置。添加了这一点，并且该过程正常启动。

核心站点.xml：

```
<configuration>
 <property>
  <name>fs.defaultFS</name>
  <value>hdfs://10.100.20.168/</value>
 </property>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T08:52:21.073

如果您正在运行单节点集群，请确保您已正确设置 HADOOP_PREFIX 变量，如链接所示：http: [//hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster .html](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html)

即使我遇到了与您相同的问题，并且通过设置此变量得到了纠正

# c++ - std::function 模板参数解析

> ID：13753801
> 
> 赞同：8
> 
> 时间：2012-12-06T22:30:12.780
> 
> 标签：c++, templates, c++11, std-function

我目前正在开发一个链接函数对象的库。

我正在创建一个函数模板，它接受一个可调用对象（目前是 std::function），并根据函数的输出和输入类型进行参数化。这是我定义的简化版本：

```
template <typename In, typename Out>
std::vector<Out> process(std::vector<In> vals, std::function< Out(In) > func)
{
    // apply func for each value in vals
    return result;
} 
```

我遇到的问题是使用情况。似乎当我传递一个 lambda 时，编译器无法正确推断出类型，因此抱怨该函数不存在：

```
std::vector<string> strings;
// does NOT compile
auto chars = process(strings,
        []( std::string s ) -> char
        {
            return s[0]; // return first char
        }
); 
```

如果我将 lambda 显式包装在 中`std::function`，则程序将编译：

```
std::vector<string> strings;
// DOES compile
auto chars = process(strings,
        std::function< char(std::string) >(
        []( std::string s ) -> char
        {
            return s[0]; // return first char
        })
); 
```

我还没有测试过传递函数指针或函数对象，但如果我不直接传递显式对象，编译器似乎很难推断出`In`and参数。`Out``std::function`

我的问题是：有没有办法解决这个问题，这样我就可以推断出可调用对象的输入/返回类型，而无需在调用站点明确提及它们？

也许在函数类型而不是输入/返回类型上参数化模板？本质上，我需要推断任意可调用对象的`In`and类型。模板函数的返回类型`Out`可能是某种`auto`/技巧？`decltype`

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T22:58:06.877

我认为您可以做的是创建一个中间返回类型推导函数，用于`decltype`确定要传递给实际函数对象的参数：

```
template <typename Out, typename In>
std::vector<Out> process_intern(std::vector<In> vals, std::function< Out(In) > func)
{
    // whatever
}

template <typename In, typename Func>
auto process(std::vector<In> vals, Func func) -> std::vector<decltype(func(vals[0]))>
{
    return process_intern<decltype(func(vals[0]))>(vals, func);
} 
```

当然，您可能需要考虑`process()`直接实现逻辑，除非有理由键入擦除函数类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T22:41:19.697

> 有没有办法解决这个问题，这样我就可以推断出可调用对象的输入/返回类型，而无需在调用站点明确提及它们？

否。模板参数推导不考虑用户定义的转换。编译器必须提出`In`and`Out`使得参数的类型和参数的类型必须（几乎）完全匹配，但在这种情况下它们永远不会匹配。

> 也许在函数类型而不是输入/返回类型上参数化模板

是的，这就是通常所做的（例如，看看标准库算法）

# c++ - 哈希映射和有序遍历

> ID：13753802
> 
> 赞同：0
> 
> 时间：2012-12-06T22:30:16.060
> 
> 标签：c++, iterator, hashmap, abstract-data-type

我将在 C++ 中从头开始实现哈希映射作为功能齐全的抽象数据类型。特别是，我将为这个数据容器提供一个迭代器，它能够以识别键的升序遍历所有记录。这部分让我感到困惑，我不知道该怎么做。顺便说一句，通过散列功能，我决定对单向列表使用单独的链接。我想到的一个解决方案是制作另一个列表，该列表将以适当的顺序完全绑定所有元素，该功能将在插入过程本身期间得到保护。但在我看来，它会损害散列本身的许多好处，至少在插入方面；尤其是看看我的ADT的用途，遍历功能会比较少用。长话短说，我应该提供什么样的解决方案？请注意，我不能使用任何专门的库。

笔记：

我知道哈希映射是什么，并且它的学术定义本质上是无序的。也许我应该换个说法，我要构建一个混合的、实用的 ADT，它基本上由一个哈希映射和一些额外的轻量级模块组成，这些模块将提供迭代器功能，这样 ADT 的用户可以从不时按键的升序对记录进行计时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:34:31.470

哈希映射本质上是无序的。这就是为什么它们在 c++ 中通常被命名为 unordered_map。哈希映射的迭代器将访问每个成员一次，但顺序未定义。

在实践中，您可能要么不使用哈希映射，而是使用其他一些关联映射容器，例如红黑树。或者，如果更新很少，您将维护一个并行有序索引。或者，如果更新频繁但遍历很少，则按需生成排序索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:42:10.913

散列图不是按性质排序的，因为重点是使用散列来知道在哪里存储值。

我可以看到这**可能**起作用的唯一方法（以性能和现实世界可用性为代价）是如果您保证散列始终在增加，即散列是插入顺序的函数并且它给出有序散列。不过，这只会处理非冲突哈希。您仍然需要以正确的顺序在存储桶中遍历您的列表，因此只需在插入时保持您的列表排序

也许这行不通，这只是一个想法

如果没有，唯一的另一种方法是将所有值存储在排序友好的结构中并从那里迭代。如果您在 hashmap 类中执行此操作，看起来您正在迭代 hashmap，但实际上并非如此。请记住，这种方法会使您在迭代时的内存需求翻倍

让我们知道它是怎么回事，这是一个奇怪的要求

# c# - 模拟静态 C# 数据库类

> ID：13753804
> 
> 赞同：1
> 
> 时间：2012-12-06T22:30:23.450
> 
> 标签：c#, database, mocking

我正在为两个项目用 C# 构建一个类库。此类库与 SQLServer 数据库进行了大量连接。

由于该库仅从 SQLServer 数据库中检索数据，因此有一个静态类负责加载连接设置并打开它。然后库的类接收执行查询所需的数据并返回结果。所有这些都是使用静态方法完成的。

像这样的东西。

```
internal static class DBConnection
{
    private const String connectionString = "some connection string";
    public static SqlConnection open() { /* ... open the connection ... */ }
}

public static class DataXRetriever
{
    public static List<DataX> RetrieveById(Int32[] ids)
    {
        using (SqlConnection connection = DBConnection.open())
        {
            /* ... do a query ... */
            /* ... do something with the result of the query ... */
            /* ... return it ... */
        }
    }

    /* ... some other static methods ... */
} 
```

我想为这些方法制作一个测试单元，而无需连接到数据库，我一直在读到这可以通过实例化包含连接的类并将其提供给将使用它的类来完成，但我的设计不是那样工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:36:24.780

您可以允许代码修改您的连接字符串而不是使其成为静态，然后让您的单元测试设置代码在运行测试之前更改其值。（*更新：再想一想，对于你想要做的具体事情，即使那样也行不通。*）

但是*正确*的方法是针对注入到您的类中的接口进行编程，以便可以根据具体情况轻松地模拟它们。

换句话说，如果您的设计“不能那样工作”，那么您的设计就是错误的，需要对其进行更改。

# c# - 在 wcf 服务上返回 html 格式，而不是 json 或 xml

> ID：13753815
> 
> 赞同：14
> 
> 时间：2012-12-06T22:31:12.457
> 
> 标签：c#, wcf, webget

我有运营合同：

```
[System.ServiceModel.Web.WebGet( UriTemplate = "c" , BodyStyle = WebMessageBodyStyle.Bare )]
[OperationContract]
string Connect ( ); 
```

我将其实现为：

```
 public string Connect ( )
    {
        return "<a href='someLingk' >Some link</a>";
    } 
```

当我转到该链接时，我得到： ![在此处输入图像描述](../Images/5f60f9dee3ad63664f296ece8a3174df.png)

如何将响应格式化为 html？甚至纯文本。我不想取回 html 或 json ......

我知道我可以创建一个查询服务的网站，但我只想创建一个可以在任何浏览器上运行的简单的“类似控制台”的应用程序......

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-06T22:40:51.453

返回流允许您返回原始字符串：

```
[System.ServiceModel.Web.WebGet( UriTemplate = "c" , BodyStyle = WebMessageBodyStyle.Bare )]
[OperationContract]
public System.IO.Stream Connect()
{
    string result = "<a href='someLingk' >Some link</a>";
    byte[] resultBytes = Encoding.UTF8.GetBytes(result);
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/html";
    return new MemoryStream(resultBytes);
} 
```

# android - 由于更新了小部件的数据，在成功连接到 Internet 后运行服务

> ID：13753821
> 
> 赞同：0
> 
> 时间：2012-12-06T22:32:14.450
> 
> 标签：android, service, internet-connection

有没有更好的方法来检查我的设备是否已连接到互联网？或者是唯一的解决方案是使用警报管理器或类似的东西，使用定期检查互联网连接的方法进行检查。但是我的应用程序没有运行，因为我需要它来更新小部件的数据。所以我的问题是：有什么东西可以从一些 java 类的 android 中得到响应，是的，我已经连接到互联网了？很难问我的话，我希望你能理解我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:34:04.900

```
public boolean IsConnected() {
    final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {
        return true;
    } else {
        return false;
    }
} 
```

# c# - Javascript DropDownList不改变输入框

> ID：13753825
> 
> 赞同：0
> 
> 时间：2012-12-06T22:32:36.803
> 
> 标签：c#, asp.net-mvc, razor

我正在使用相同的 javascript 作为标签，所以我不确定提交字段有什么问题。

这是我的看法：

```
@model SuburbanCustPortal.Models.OrderGasModel

<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script>   
    $(function () {
    $("#datepicker").datepicker();   }); 
</script>

<script> 
    $(function(){   
        $("#AccountId").change(function(){
            var val=$(this).val();
            $("#contactNumber").load("@Url.Action("GetMyValue","GasOrder")", { custid : val });
            document.forms[0].Amount.focus();   }); }); 
</script>

@{
    ViewBag.Title = "Order Gas"; }

<h2>Order Gas</h2>

        @using (Html.BeginForm("OrderGasSuccess", "GasOrder", FormMethod.Post))
        {
            @Html.ValidationSummary(true, "Submit was unsuccessful. Please correct the errors and try again.")

            <div>
                <fieldset>
                    <legend>Account Information - all fields required</legend>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.AccountNumber)
                    </div>
                    <div class="editor-field">
                        @Html.DropDownListFor(x => x.AccountId, (IEnumerable<SelectListItem>)ViewBag.Accounts)
                    </div>

                  <div class="editor-label">
                        @Html.LabelFor(m => m.TankPercent)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(m => m.TankPercent, new { @class = "GenericTextBox" })
                        @Html.ValidationMessageFor(m => m.TankPercent)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.Amount)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(m => m.Amount, new { @class = "GenericTextBox" })
                        @Html.ValidationMessageFor(m => m.Amount)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.DateRequested)
                    </div>
                    <div class="editor-field">
                      <input type="text" id="datepicker" class="GenericTextBox"/>
                      @Html.ValidationMessageFor(m => m.DateRequested)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.ContactNumber)
                    </div>
                  <div class="editor-field">
                    <input type="text" id="contactNumber" class="GenericTextBox"/>

                    @Html.ValidationMessageFor(m => m.ContactNumber)
                  </div>

                  <div class="editor-label">
                        @Html.LabelFor(m => m.Message)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(x => x.Message)            
                    </div>

                    <div>
                        <input type="submit" value="Submit" />
                    </div>

                </fieldset>

            </div>
        } 
```

任何我的方法被调用：

```
public string GetMyValue(string custid)
{
  var cust = _client.GetCustomerByCustomerId(Guid.Parse(custid));
  return String.Format("{0:C}", Decimal.Parse(cust.TotalBalance));
} 
```

正在调用 GetMyValue 方法并返回一个值。下拉列表也填充了值。

当我更改 ddl 中的值时，GetMyValue 会触发，但输入框不会获取该值。

有人看到我做错了吗？

**==== 更新 ====**

我按照以下建议进行了更改。我不确定我是否做对了，因为我收到了这条消息：

> Microsoft JScript 运行时错误：“val”未定义

这是我对更改的看法：

```
@model SuburbanCustPortal.Models.OrderGasModel

<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script>
  $(function () {
    $("#datepicker").datepicker();
  });
</script>

<script>
    $.post("@Url.Action("GetMyValue","GasOrder")",  { custid : val }, function(r){
        $("#contactNumber").val(r.ContactNumber);
    });
</script>

@{
    ViewBag.Title = "Order Gas";
}

<h2>Order Gas</h2>

        @using (Html.BeginForm("OrderGasSuccess", "GasOrder", FormMethod.Post))
        {
            @Html.ValidationSummary(true, "Submit was unsuccessful. Please correct the errors and try again.")

            <div>
                <fieldset>
                    <legend>Account Information - all fields required</legend>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.AccountNumber)
                    </div>
                    <div class="editor-field">
                        @Html.DropDownListFor(x => x.AccountId, (IEnumerable<SelectListItem>)ViewBag.Accounts)
                    </div>

                  <div class="editor-label">
                        @Html.LabelFor(m => m.TankPercent)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(m => m.TankPercent, new { @class = "GenericTextBox" })
                        @Html.ValidationMessageFor(m => m.TankPercent)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.Amount)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(m => m.Amount, new { @class = "GenericTextBox" })
                        @Html.ValidationMessageFor(m => m.Amount)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.DateRequested)
                    </div>
                    <div class="editor-field">
                      <input type="text" id="datepicker" class="GenericTextBox"/>
                      @Html.ValidationMessageFor(m => m.DateRequested)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.ContactNumber)
                    </div>
                  <div class="editor-field">
                    <input type="text" id="contactNumber" class="GenericTextBox"/>

                    @Html.ValidationMessageFor(m => m.ContactNumber)
                  </div>

                  <div class="editor-label">
                        @Html.LabelFor(m => m.Message)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(x => x.Message)            
                    </div>

                    <div>
                        <input type="submit" value="Submit" />
                    </div>

                </fieldset>

            </div>
        } 
```

我是 javascript 新手，所以如果这是一个微不足道的更改，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:35:08.747

控制器

```
[HttpPost]  
public ActionResult GetMyValue(string custid) 
{          
    var cust = _client.GetCustomerByCustomerId(Guid.Parse(custid));  
    return Json(String.Format("{0:C}", Decimal.Parse(cust.TotalBalance)), JsonRequestBehavior.AllowGet);
} 
```

脚本

```
<script>
    $(document).ready(function() {
        $("#AccountId").change(function(){
            var val=$(this).val();
            $.ajax({
                url: '@Url.Action("GetMyValue","GasOrder")',
                type: 'POST',
                data: val,
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                error: function (xhr) {
                    alert('Error: ' + xhr.statusText);
                },
                success: function (result) {
                    $("#contactNumber").val(result);
                }
           });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:54:54.783

因为 .load 函数“将匹配元素的 HTML 内容设置为返回的数据”（http://api.jquery.com/load/）。但是要更改输入文本，您需要更改 value 属性。要解决此问题，您可以 1）从 GetMyValue 操作返回 JSON 2）使用 .post（如果使用 .get，您可能会遇到缓存问题）而不是 .load 并在成功回调中从响应中设置值。就像是

```
$.post("@Url.Action("GetMyValue","GasOrder")",  { custid : val }, function(r){
    $("#contactNumber").val(r.ContactNumber);
}); 
```

# shell - “mysqldump > mysql”抛出错误。为什么？

> ID：13753826
> 
> 赞同：1
> 
> 时间：2012-12-06T22:32:42.267
> 
> 标签：shell, redirect

我对linux有点新手，还在学习。

今天我需要将数据库复制到生产环境中。为此，我使用了命令

```
(uiserver):u70486952:~ > mysqldump -h host -u user --password=mypassword dbname > mysql -h host2 -u user2 --password=mypassword dbname2 
```

这个命令在我看来没问题，但它抛出了一个错误。

```
mysqldump: Got error: 1044: Access denied for user 'user'@'%' to database 'dbname' when selecting the database 
```

单独执行此操作（在命令后没有 >）有效。我使用管道字符而不是 > （超过）解决了这个问题。

有人可以解释为什么它显示错误吗？我很好奇。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:49:13.907

重定向可以在命令的任何地方执行，只有下一个单词用作文件名；命令行上的任何其他内容都作为参数传递给命令。那是，

```
mysqldump -h host -u user --password=mypassword dbname > mysql -h host2 -u user2 --password=mypassword dbname2 
```

相当于

```
mysqldump -h host -u user --password=mypassword dbname -h host2 -u user2 --password=mypassword dbname2 > mysql 
```

# android - 微调器 onItemSelected(?????)

> ID：13753827
> 
> 赞同：-5
> 
> 时间：2012-12-06T22:32:46.227
> 
> 标签：android, if-statement, spinner

第一个微调器没问题，第二个微调器是 ArrayList, ArrayAdapter<> 它加载一个文件名文件夹，所以，我想知道如何使用 if() 像文件名包含或列表项包含，因为每个文件以 62 或 31 开头。

```
 public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3)
{
    switch(arg0.getId())
    {
    case R.id.spinner:
    {
    if(arg2 == 0)
    {
        break;
    }
    if(arg2 == 1)
    {
        Intent myIntent = new Intent(Inspector.this, hord.class);
        Inspector.this.startActivity(myIntent);
        break;
    }
    if(arg2 == 2)
    {
        Intent myIntent = new Intent(Inspector.this, hord.class);
        Inspector.this.startActivity(myIntent);
        break;
    }
    }
    case R.id.recent:
    {
        if(arg1.getContentDescription().toString().contains("62"))//what im trying to do
        {
            deviation.setText("jobwelldone");
        }

    }
    }

    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:48:20.340

将文件名保存在 String 数组中后，您可以使用 for 循环遍历数组并使用

```
indexOf() 
```

方法在调用 String 对象中搜索传递给它的 String。例如：

```
( if filename.indexOf(String.valueOf(62)) == -1 ) 
```

// 表示文件名字符串不包含 '62' substrng，因为 indefOf() 方法返回 -1。否则文件名字符串包含“62”子字符串。

要从微调器中获取项目：

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        Object item = parent.getItemAtPosition(position);
    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
}); 
```

或使用：

```
String spinnerValue = mySpinner.getSelectedItem().toString(); 
```

# perl - Gitweb Apache 输出不同于终端

> ID：13753829
> 
> 赞同：0
> 
> 时间：2012-12-06T22:32:51.053
> 
> 标签：perl, apache2, cgi-bin, gitweb

Apache 的配置如下：

```
Alias /git /var/www/gitweb
Alias /gitweb /var/www/gitweb

<Directory "/var/www/gitweb">
  AllowOverride None
  Options +ExecCGI +Indexes
  Order allow,deny
  Allow from all

  DirectoryIndex gitweb.cgi
  AddHandler cgi-script .cgi

  SetEnv GITWEB_CONFIG /var/www/gitweb/gitweb.conf
</Directory> 
```

我正在尝试设置 Gitweb，但我不断遇到可怕的`404 - No projects found`问题。通常这是一个权限错误，所以我想看看 perl 是否打印了没有权限的东西，所以我用这个命令从终端运行它

```
sudo -u apache GITWEB_CONFIG=/var/www/gitweb/gitweb.conf perl gitweb.cgi 
```

该脚本与正确列出所有存储库的 HTML 相呼应（即，没有 404）。

这是一个问题：**为什么相同的脚本会从 Apache 运行而终端的行为会有所不同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:30:00.320

问题是 SELinux。我的存储库在目录中`/home/git`。默认情况下，httpd 服务无法访问该目录。

跑`setsebool -P httpd_enable_homedirs=1`，问题就解决了。

# java - Java - 在单行中输出整数到用户输入的整数

> ID：13753832
> 
> 赞同：3
> 
> 时间：2012-12-06T22:33:00.893
> 
> 标签：java, while-loop

我有一个任务要创建一个提示用户输入整数的程序，然后使用 while 循环根据用户输入创建一个乘法表。

输出乘法表必须包括标题行和列。我坚持的是如何创建标题行，因为标题必须计数的数字取决于用户输入。

我在 while 循环中创建了标题列，用于格式化行，因为每次循环通过时都会创建一个新行。但是标题行只打印一次，因此我不能使用格式化列的while循环来创建它。

如何创建标题行，以使用户输入递减回 1，并输出来自 1、2、3、...、用户输入的所有整数值？

这是我所拥有的：

```
import java.util.Scanner;
public class Multiplication
{
    public static void main(String[] args)
    {
    int number;
    String yesno = "Y";
    Scanner keyboard = new Scanner(System.in);
    System.out.print ("This program generates a multiplication table ");
    System.out.println("based on a number you enter.");

    while(yesno.equalsIgnoreCase("Y"))
    {
        System.out.println("Please enter a number.");
        number = keyboard.nextInt();

        int row = 1;
        int column = 1; 

        System.out.println(" |" + MAKETHISWORK + "\t"); //THIS IS WHERE I'M STUCK.
        System.out.println("--------------------");          

        while(number>0)  
        {     
            row = 1;
            while(row <= number)
            {
                System.out.print(row + "|");

                column = 1; 
                while(column <= number)
                {

                    System.out.print(row*column + "\t");   
                    column ++;

                } //END WHILE COLUMN <= NUMBER
                System.out.println();
                row ++;

            } //END WHILE ROW <=NUMBER
            System.out.println();

            while(number>0)
            {
                number--;
            }

        } //END WHILE NUMBER >0

        System.out.println("Would you like to enter another number? (Y/N) ");
        yesno = keyboard.nextLine();
        yesno = keyboard.nextLine();
    } //END WHILE YESNO IS Y

    while(yesno.equalsIgnoreCase("N"))
    {
        System.out.println("Thanks for participating!");
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:40:47.957

为什么不直接使用另一个循环来建立一个字符串到那个值呢？

```
StringBuilder builder = new StringBuilder();
for (int i = 1; i <= number; i++) {
    builder.append(i).append(" ");
}
System.out.println(" |" + builder.toString() + "\t"); 
```

请注意，这将创建一个以空格分隔的数字字符串，直到输入数字为止。如果您想要不同的分隔符，只需附加一个不同的值。

# java - 尝试画线时出现 Nullpointexception

> ID：13753835
> 
> 赞同：0
> 
> 时间：2012-12-06T22:33:13.857
> 
> 标签：java, nullpointerexception

我有以下两段代码

第一个代码：

```
package guicollection;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class RectanglePattern extends GUIcollection implements ActionListener {

    JPanel panelForBackGround;
    JButton actionButton;

    void drawRectangle() {

        RectanglePattern outSideCover = new RectanglePattern();
        outSideCover.setSize(500, 500);
        outSideCover.createGUI();
        outSideCover.setVisible(true);

    }

    private void createGUI() {

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container window = getContentPane();
        window.setLayout(new FlowLayout());

        panelForBackGround = new JPanel();
        panelForBackGround.setPreferredSize(new Dimension(400, 300));

        panelForBackGround.setBackground(Color.blue);

        window.add(panelForBackGround);

        actionButton = new JButton("Press me");
        window.add(actionButton);
        actionButton.addActionListener(this);

    }

    public void actionPerformed(ActionEvent event) {
        Graphics paper = panelForBackGround.getGraphics();

        paper.drawLine(0, 0, 9, 10);
        paper.drawRect(8, 8, 12, 9);
        paper.drawRect(6, 6, 12, 6);

    }
} 
```

第二个代码：

```
package guicollection;

import java.awt.*;
import javax.swing.*;

public class RectanglePattern extends GUIcollection{

    JPanel panelForBackGround;
    JButton actionButton;

    void drawRectangle() {

        RectanglePattern outSideCover = new RectanglePattern();
        outSideCover.setSize(500, 500);
        outSideCover.createGUI();
        outSideCover.setVisible(true);

    }

    private void createGUI() {        

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container window = getContentPane();
        window.setLayout(new FlowLayout());

        panelForBackGround = new JPanel();
        panelForBackGround.setPreferredSize(new Dimension(400, 300));

        panelForBackGround.setBackground(Color.blue);

        window.add(panelForBackGround);

        actionButton = new JButton("Press me");
        window.add(actionButton);
        actionButton.addActionListener(this);

        Graphics paper = panelForBackGround.getGraphics();

        paper.drawLine(0, 0, 9, 10);
        paper.drawRect(8, 8, 12, 9);
        paper.drawRect(6, 6, 12, 6);

}

} 
```

第二个代码在编译时显示以下错误。它不是必须在上面画一条线和两个矩形`panelForBackGround`吗？这个错误的原因是什么？

错误：

```
线程“主”java.lang.NullPointerException 中的异常
    在 guicollection.RectanglePattern.drawRectangle(RectanglePattern.java:20)
    在 guicollection.GUIcollection.main(GUIcollection.java:24)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:03:31.973

这里的空指针接受通常与未正确创建图形环境有关。尝试调用此方法：

```
window.setVisible(true); 
```

或者可能是因为您试图在机器还没有时间完全创建的窗口上绘图。我遇到过这个问题。在创建 Graphics 变量之前，尝试告诉程序等待窗口赶上进度：

```
try{
Thread.sleep(300);
catch(Exception e){
System.out.println(e.printStackTrace());
} 
```

我知道只捕获“异常”而不是特定异常并不是最好的事情，但这是摆脱 xD 的简单方法，哈哈。告诉我这些是否有效。如果不是，我稍后会回来提供更多帮助。

# string - 使用 Delphi 在应用程序和 DLL 之间传递字符串

> ID：13753837
> 
> 赞同：2
> 
> 时间：2012-12-06T22:33:25.997
> 
> 标签：string, delphi, dll, delphi-xe2, delphi-xe3

我需要用 Delphi（XE2 或 XE3）编写一个 DLL 和一个应用程序。我需要将带有许多字符串的参数从应用程序传递到 DLL，然后我需要将许多字符串从 DLL 发送到应用程序作为结果。此外，如果可能的话，我的 DLL 还必须与 C++ 应用程序兼容。

像这样的东西：

函数（aInStrings：TStringList；出aOutStrings：TStringList）：布尔值；

我不想使用 TStringList 因为我知道这是 DLL 的问题。有没有一种快速的方法（不使用 ShareMem、FastMem、BORLNDMM.DLL、...）来解决我的问题？

# java - 向 HashMap 添加集合

> ID：13753843
> 
> 赞同：0
> 
> 时间：2012-12-06T22:34:05.090
> 
> 标签：java, hashmap

我需要帮助将一个集合添加到哈希图中：每次我向集合添加一个值时，它都会获取键的集合并将新值添加到集合中并将集合放回原处。

display 方法应该只返回已经完成的 hashmap。

```
package HashMap;

import java.util.HashMap;
import java.util.Set;

public class Thesaurus {
    HashMap<String, Set<String>> words =new HashMap<String,Set<String>>();

    public void add(String x,String y)
    {
        words.put(x,words.get(x).add(y));
    }
    public void display()
    {
        System.out.println(words);
    }
    public static void main(String[] args) {
        Thesaurus tc = new Thesaurus();
        tc.add("large", "big");
        tc.add("large", "humoungus");
        tc.add("large", "bulky");
        tc.add("large", "broad");
        tc.add("large", "heavy");
        tc.add("smart", "astute");
        tc.add("smart", "clever");
        tc.add("smart", "clever");
        tc.display();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:41:49.440

```
public void add(String x,String y) {
    Set<String> set = words.get(x);
    if (set == null) {
        words.put(x, set = new HashSet<String>());
    } 
    set.add(y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T08:46:35.637

您可以将 Google 的 guava SetMultimap 用于您的同义词库实现：

```
public class Thesaurus {

    private SetMultimap<String, String> thesaurus = Multimaps.synchronizedSetMultimap(HashMultimap.create());  // word -> Set of its synonyms 

    public void addSynonym(String word, String synonym) {
        thesaurus.put(word, synonym);
    }

    public Set<String> getSynonyms(String word) {
        return thesaurus.get(word);
    }

    public void removeSynonym(String word, String synonymToRemove) {
        thesaurus.remove(word, synonymToRemove);
    }
} 
```

# jquery - 在 Drupal 7 中拖放一个 div

> ID：13753844
> 
> 赞同：1
> 
> 时间：2012-12-06T22:34:05.667
> 
> 标签：jquery, drupal, drag-and-drop

我正在尝试在 Drupal 7 中使用 div 的拖放（使用 jQuery）。我使用的是 jQuery 1.4.4 和 jQuery-ui 1.8.7。该代码在一个简单的 html 文件中工作。我看到标准 Drupal 7 设置中包含 1.4.4 jQuery 文件。我正在对 query-ui 1.8.7 进行特定包含，因为我没有看到 jquery-ui 的包含。当我在 Drupal 7 基本页面中嵌入以下代码时，它不起作用......

```
<style>
    .draggable { width: 10px; height: 10px; float: left; margin: 0px; 
                 background: gold ; border: 0px solid gold ; border: 1px solid black ; }
    #draggable { cursor: e-resize; width: 800px ; height: 70px ; 
                 background: blue ; border: 1px solid black ; }
    #containment-wrapper { width: 800px; height:144px; border:2px solid #ccc; 
                 background: gold ;}
</style>

<div id-containment-wrapper">
    <div id="draggable" class="draggable ui-widget-content"></div>
</div>

<script type="text/javascript">
    $(function() {
        $( "#draggable" ).draggable({ axis: "x" });
    });     
</script> 
```

为什么这行不通？什么都不拖。我正在尝试创建一个可拖动的 div，将拖动限制在水平方向。

请，建议将不胜感激...

谢谢你戴夫

# rgb - YUV 到 RGB 的转换。RGB文件结构？

> ID：13753846
> 
> 赞同：4
> 
> 时间：2012-12-06T22:34:19.240
> 
> 标签：rgb, yuv

将 YUV 文件转换为 RGB 文件时出现问题。完成后，我无法使用 GIMP 或其他查看器打开 .rgb 文件，但我成功打开了下载的 .rgb 文件。请告诉我RGB文件的结构是什么？（它是否包含标题？）是：1）所有 R 值，然后所有 G 值，然后所有 B 值？2）循环（一R一G一B）*像素数？

```
void convert_YUV_to_RGB (unsigned char  Y1, unsigned char  Y2, unsigned char  Y3, unsigned char  Y4, unsigned char  U, unsigned char  V) {

/*
//V1 for conversion YUV 420 -> RGB
//1.164*(Y - 16) + 1.596*(V - 128);
//1.164*(Y - 16) - 0.813*(V - 128) - 0.391*(U - 128);
//1.164*(Y - 16) + 2.018*(U - 128);
*/
rgb[rgb_counter++] = Y1 + 1.403*V;
rgb[rgb_counter++] = Y1 + -0.344 * U + -0.714 * V;      
rgb[rgb_counter++] = Y1 + 1.770 * U ;   

rgb[rgb_counter++] = Y2 + 1.403*V;
rgb[rgb_counter++] = Y2 + -0.344 * U + -0.714 * V;      
rgb[rgb_counter++] = Y2 + 1.770 * U ;   

rgb[rgb_counter++] = Y3 + 1.403*V;
rgb[rgb_counter++] = Y3 + -0.344 * U + -0.714 * V;      
rgb[rgb_counter++] = Y3 + 1.770 * U ;   

rgb[rgb_counter++] = Y4  + 1.403*V;
rgb[rgb_counter++] = Y4 + -0.344 * U + -0.714 * V;      
rgb[rgb_counter++] = Y4 + 1.770 * U ;   }

for each (int i in rgb) 
    {
        fputc(i, pRGBFile);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:44:46.203

您可以尝试将数据写入[BMP 文件](http://en.wikipedia.org/wiki/BMP_file_format)。IIRC，RGBs 值是交错的；即 R1G1B1R2G2B2...RnGnBn

当您说“它不起作用”时，您的意思是程序无法打开文件或颜色看起来不对？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:39:07.673

试试[http://www.fourcc.org/rgb.php](http://www.fourcc.org/rgb.php)

这为多种 rgb 格式提供了深度结构。

# android - GCM 不适用于 Nexus 7，它适用于三星 Galaxy S3

> ID：13753847
> 
> 赞同：0
> 
> 时间：2012-12-06T22:34:26.263
> 
> 标签：android, google-cloud-messaging

所以我在 AndroidHive 教程的帮助下在我的应用程序中实现了 GCM。

推送消息过去在我的三星 Galaxy S3 和 Nexus 7 设备上都可以使用。但现在推送通知仅在我的三星 Galaxy s3 上有效，并且它给我的 Nexus 7 带来了错误。我的 Nexus 7 不想再注册了。当我尝试注册我的 Nexus 7 时，我得到了这个：

```
 01-01 07:46:33.396: V/GCMBroadcastReceiver(10980): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-01 07:46:33.396: V/GCMBroadcastReceiver(10980): GCM IntentService class: com.toviehd.remake.GCMIntentService
01-01 07:46:33.396: V/GCMBaseIntentService(10980): Acquiring wakelock
01-01 07:46:33.426: V/GCMBaseIntentService(10980): Intent service name: GCMIntentService-725930664821-1
01-01 07:46:33.426: E/GCMRegistrar(10980): internal error: retry receiver class not set yet
01-01 07:46:33.426: V/GCMRegistrar(10980): Registering receiver
01-01 07:46:33.436: D/GCMBaseIntentService(10980): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-01 07:46:33.436: D/GCMBaseIntentService(10980): Registration error: SERVICE_NOT_AVAILABLE
01-01 07:46:33.436: I/GCMIntentService(10980): Received recoverable error: SERVICE_NOT_AVAILABLE
01-01 07:46:33.446: D/GCMBaseIntentService(10980): Scheduling registration retry, backoff = 1573 (3000)
01-01 07:46:33.466: V/GCMBaseIntentService(10980): Releasing wakelock
01-01 07:46:34.796: D/dalvikvm(10980): GC_CONCURRENT freed 212K, 5% free 8010K/8376K, paused 1ms+3ms, total 20ms
01-01 07:46:34.976: D/dalvikvm(10980): GC_CONCURRENT freed 273K, 6% free 8159K/8592K, paused 3ms+3ms, total 24ms
01-01 07:46:35.026: V/GCMBroadcastReceiver(10980): onReceive: com.google.android.gcm.intent.RETRY
01-01 07:46:35.026: V/GCMBroadcastReceiver(10980): GCM IntentService class: com.toviehd.remake.GCMIntentService
01-01 07:46:35.026: V/GCMBaseIntentService(10980): Acquiring wakelock
01-01 07:46:35.036: V/GCMBaseIntentService(10980): Intent service name: GCMIntentService-725930664821-2
01-01 07:46:35.036: V/GCMRegistrar(10980): Registering app com.toviehd.remake of senders 725930664821
01-01 07:46:35.046: V/GCMBaseIntentService(10980): Releasing wakelock
01-01 07:46:35.146: V/GCMBroadcastReceiver(10980): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-01 07:46:35.146: V/GCMBroadcastReceiver(10980): GCM IntentService class: com.toviehd.remake.GCMIntentService
01-01 07:46:35.146: V/GCMBaseIntentService(10980): Acquiring wakelock
01-01 07:46:35.176: V/GCMBaseIntentService(10980): Intent service name: GCMIntentService-725930664821-3
01-01 07:46:35.176: D/GCMBaseIntentService(10980): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-01 07:46:35.176: D/GCMBaseIntentService(10980): Registration error: SERVICE_NOT_AVAILABLE
01-01 07:46:35.176: I/GCMIntentService(10980): Received recoverable error: SERVICE_NOT_AVAILABLE
01-01 07:46:35.186: D/GCMBaseIntentService(10980): Scheduling registration retry, backoff = 5157 (6000)
01-01 07:46:35.196: V/GCMBaseIntentService(10980): Releasing wakelock
01-01 07:46:35.996: D/dalvikvm(10980): GC_CONCURRENT freed 359K, 6% free 8220K/8736K, paused 3ms+4ms, total 22ms
01-01 07:46:36.116: D/dalvikvm(10980): GC_CONCURRENT freed 332K, 7% free 8332K/8868K, paused 3ms+3ms, total 24ms
01-01 07:46:40.346: V/GCMBroadcastReceiver(10980): onReceive: com.google.android.gcm.intent.RETRY
01-01 07:46:40.346: V/GCMBroadcastReceiver(10980): GCM IntentService class: com.toviehd.remake.GCMIntentService
01-01 07:46:40.346: V/GCMBaseIntentService(10980): Acquiring wakelock
01-01 07:46:40.356: V/GCMBaseIntentService(10980): Intent service name: GCMIntentService-725930664821-4
01-01 07:46:40.356: V/GCMRegistrar(10980): Registering app com.toviehd.remake of senders 725930664821
01-01 07:46:40.366: V/GCMBaseIntentService(10980): Releasing wakelock
01-01 07:46:40.466: V/GCMBroadcastReceiver(10980): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-01 07:46:40.466: V/GCMBroadcastReceiver(10980): GCM IntentService class: com.toviehd.remake.GCMIntentService
01-01 07:46:40.466: V/GCMBaseIntentService(10980): Acquiring wakelock
01-01 07:46:40.476: V/GCMBaseIntentService(10980): Intent service name: GCMIntentService-725930664821-5
01-01 07:46:40.486: D/GCMBaseIntentService(10980): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-01 07:46:40.486: D/GCMBaseIntentService(10980): Registration error: SERVICE_NOT_AVAILABLE
01-01 07:46:40.486: I/GCMIntentService(10980): Received recoverable error: SERVICE_NOT_AVAILABLE
01-01 07:46:40.486: D/GCMBaseIntentService(10980): Scheduling registration retry, backoff = 8885 (12000)
01-01 07:46:40.496: V/GCMBaseIntentService(10980): Releasing wakelock 
```

我真的不知道我做了什么来打破这个......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:45:37.750

它必须使用日期时间设置。平板电脑上的日期是过去的。我认为 GCM 无法同步到过去或其他东西。我在平板电脑上重置了时间，它又可以工作了！！

# ssl - 在 Heroku 上具有自定义域的多租户应用程序上使用 SSL

> ID：13753850
> 
> 赞同：3
> 
> 时间：2012-12-06T22:34:36.590
> 
> 标签：ssl, heroku, multi-tenant

我已经阅读了很多关于此的内容，我必须管理我很困惑。

所以这是一个应用程序，每个客户都有自己的子域，例如 xyz.example.com，并且能够通过创建指向子域版本的 CNAME 来使用自定义域。到目前为止，一切都很好。

问题是需要激活 SSL。我知道每个客户都需要为他们的自定义域购买自己的证书，但这就是我模糊不清的地方：如何安装证书？我会简单地使用 Heroku API 上传它们吗？

基本上，我正在寻找一种解决方案，它可以让非技术娴熟的用户非常容易，甚至可能自己作为经销商提供证书。

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T11:32:39.883

据我所知，每个应用程序只能有一个 SSL，请参阅[https://devcenter.heroku.com/articles/ssl#customdomain-ssl](https://devcenter.heroku.com/articles/ssl#customdomain-ssl) - 每个自定义域也将花费 20 美元。

在这种情况下，您可能发现了一些会限制您使用 Heroku 能力的东西，

# c - 为什么cc1叫cc1？

> ID：13753854
> 
> 赞同：3
> 
> 时间：2012-12-06T22:34:51.327
> 
> 标签：c, gcc

GCC 中负责编译 C 代码调用的部分`cc1`。这个名字从何而来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T23:18:56.547

1 in`cc1`表示这是构建过程的第一阶段。第二阶段是`collect2`。

# java - 如何获取给定函数的调用路径？

> ID：13753857
> 
> 赞同：0
> 
> 时间：2012-12-06T22:35:00.490
> 
> 标签：java, eclipse, debugging

我正在使用 Eclipse 来调试 Java 应用程序。

我想查看导致调用特定函数的所有可能的“调用路径” `somefunc`。

Eclipse 是否提供了获取此信息的方法？（FWIW，我使用的是 Juno Service Release 1；内部版本号：20121004-1855。）

PS：FWIW，至少有一些调用是`somefunc`由用户以交互方式做出的选择产生的，所以我希望一些调用路径将在一个或另一个 GUI 事件处理程序中开始。

编辑：这就是我所说的“调用路径”。假设某个事件处理程序`a`调用函数`b`，然后`b`调用`c`，`c`调用`d`，最后`d`调用`somefunc`。然后是序列

```
a -> b -> c -> d -> somefunction 
```

是我感兴趣的调用路径之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:09:18.833

“右键单击”>>打开调用层次结构有帮助吗？

它不会将所有直接和间接调用者聚合在一个平面结构中，而是为您提供一棵树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:37:14.873

左键单击方法名称，然后右键单击 -> 引用 -> 项目（或工作区）

这将显示调用该方法的所有位置。我不确定这是否是您所说的“呼叫路径”。

# javascript - 跟踪菜单 jpg 中的 onchange 选择

> ID：13753862
> 
> 赞同：-1
> 
> 时间：2012-12-06T22:35:36.220
> 
> 标签：javascript, google-analytics

我不是 javascript 人，并且在配置 Google Analytics 以跟踪图像下载和事件时遇到了问题。客户端有一个使用 onChange 调用的站点，该调用会提取一个精简的 java 脚本，然后将最终用户发送到图像页面。有没有一种简单的方法可以解决以下问题以跟踪 Google 中的事件。我尝试过的一切都失败了。任何帮助，将不胜感激。

```
<script type="text/javascript" language="javascript">
function doIt(theURL)
{
var myPop = window.open(theURL)
}
</script>

<select name="menu2" onchange="if (this.selectedIndex != 0)     doIt(this.options[this.selectedIndex].value)">
    <option selected>Select screen resolution:</option>
    <option value="../images/x.jpg">1600 x 1200</option>
    <option value="../images/y.jpg">1280 x 960</option>
    <option value="../images/zx.jpg">1024 x 768</option>
    <option value="../yz.jpg">800 x 600</option>
  </select>
</p>
<p>&nbsp;</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:51:44.750

根据我的经验，使用 Google Analytics 跟踪事件就像在适当的时候调用这个函数一样简单：

```
_trackEvent(category, action, opt_label, opt_value, opt_noninteraction) 
```

因此，在您的情况下，可能会进入`doIt`：

```
<script type="text/javascript" language="javascript">
function doIt(theURL)
{
  _trackEvent("downloads", "images", theUrl)
  var myPop = window.open(theURL)
}
</script> 
```

或者您可以考虑将所选图像的宽度或高度也传递给`doIt`，然后将其用作`value`（的第四个参数`_trackEvent`）。此参数在 Google Analytics（分析）仪表板中显示为数值，因此将对其进行汇总和汇总（对您来说不太有用），您可以对其进行数字排序。

# facebook - 邀请用户加入 Facebook 群组

> ID：13753864
> 
> 赞同：0
> 
> 时间：2012-12-06T22:35:42.300
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

首次通过 facebook connect 登录我的网站的用户将被重定向到一个 php 脚本，该脚本应该邀请他们加入我的社团 facebook 组。

```
<?php
require_once "facebook_sdk/src/facebook.php";

$app_id = 'xxxxxxx';
$app_secret = 'xxxxxxx';

// Init facebook api.
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true
));

// Get the url to redirect for login to facebook
$login_url = $facebook->getLoginUrl(
    array('scope' => 'manage_pages')
);

// If not authenticated, redirect to the facebook login dialog.
// The $login_url will take care of redirecting back to us
// after successful login.
if (! $facebook->getUser()) {
    echo <<< EOT
<script type="text/javascript">
top.location.href = "$login_url";
</script>;
EOT;

    exit;
}

$token=$facebook->getAccessToken();
echo $token . "</br>";
$user=$facebook->getUser();
$page = "/45277909073/members/" . $user . "/";
echo $page;

$facebook->api($page, "post",array('access_token='=>$token));
?> 
```

此代码输出以下
173863136082149|9f42756f3760ff697b3c4e809bfe48f7
/45277909073/members/987654321/
**致命错误：未捕获的 OAuthException：需要用户访问令牌才能请求此资源。在第 1238 行扔进 /home/somewhere/public_html/fb/facebook_sdk/src/base_facebook.php**

我基于邀请用户部分下的doku
[https://developers.facebook.com/docs/reference/api/group/](https://developers.facebook.com/docs/reference/api/group/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T23:29:47.723

在

```
'access_token=' => $token 
```

它应该是

```
'access_token' => $token 
```

# java - 在正则表达式中使用 Unicode 类别名称时出现 PatternSyntaxException

> ID：13753868
> 
> 赞同：0
> 
> 时间：2012-12-06T22:35:56.720
> 
> 标签：java, android, regex, unicode, uppercase

我正在尝试检测字符串是否由 Android 应用程序中的所有大写字符组成。`[A-Z]`作为一个字符类是不够的，因为字母可能用变音符号等装饰。我想使用`\p{IsLu}+`该模式，但它不断给我一个`PatternSyntaxError`.

然而，[API 参考](http://developer.android.com/reference/java/util/regex/Pattern.html)公布了这些 Unicode 类别名称。我的模拟器运行的 API 级别是 11。

如果我在正则表达式测试器上尝试我的正则表达式模式，例如在[regexplanet](http://www.regexplanet.com/advanced/java/index.html)上，它工作正常。

这是 logcat 输出：

> 12-06 22:08:07.854：E/AndroidRuntime(737)：致命异常：主要
> 12-06 22:08:07.854：E/AndroidRuntime(737)：java.util.regex.PatternSyntaxException：U_ILLEGAL_ARGUMENT_ERROR
> 12-06 22： 08:07.854: E/AndroidRuntime(737): \p{isLu}+
> 12-06 22:08:07.854: E/AndroidRuntime(737): at java.util.regex.Pattern.compileImpl(Native Method)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:38:25.177

似乎在您编写的实际代码中，`isLu`而不是`IsLu`. 但是，`Is`无论如何，这只是一个别名。通常的 Unicode 属性是简单的`\p{Lu}`.

# php - 即使显示成功消息，数据也没有插入表中

> ID：13753871
> 
> 赞同：0
> 
> 时间：2012-12-06T22:36:11.290
> 
> 标签：php, mysql, database, insert

在这里，我尝试使用从其他表中提取的信息将数据输入到表播放列表中。执行后，我收到“成功”消息，但实际上并没有插入数据..有人能指出错误吗？

```
 <?php

$connect= mysql_connect("localhost","root","") or die('couldnt connect to database');

mysql_select_db("music") or die("couldn't find the database");

        $regis['id']=$_GET['id'];
        $regis['username']=$_GET['username'];

           $query="SELECT * FROM songs WHERE id ='id'";
                       $quer="SELECT * FROM images WHERE id ='id'";
            $q="SELECT * FROM users WHERE username ='username'";

           $query=mysql_query($query);
          $quer=mysql_query($quer);

            $q=mysql_query($q);

           $row=mysql_fetch_assoc($query);

          $regis['id']=$row['id'];
           $regis['title']=$row['title'];

          $regis['artist']=$row['artist'];

        $rows=mysql_fetch_assoc($q);
         $regis['link']=$rows['link'];

      $r=mysql_fetch_assoc($q);
         $regis['uid']=$r['uid'];

        $sql="insert into playlist (songid,song,image,album,uid) values('{$regis['id']}','{$regis['title']}','{$regis['link']}','{$regis['artist']}','{$regis['uid']}')";
        $res=mysql_query($sql);
        if($res)
        {
            echo "<script type='text/javascript'>";
            echo 'alert("addition to your playlist was succesful")';
            echo "</script>";

            }
        else
        {   
            echo "<script type='text/javascript'>";
            echo 'alert("'.mysql_error().'Please try again")';
            echo "</script>";
        } 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:40:26.350

```
if(mysql_num_rows($res)>0){
  //query inserted at least one row in db
} 
```

# c++ - c++03 vs 11中的返回值

> ID：13753872
> 
> 赞同：0
> 
> 时间：2012-12-06T22:36:23.157
> 
> 标签：c++, c++11, lvalue, rvalue

我花了几个小时来讨论*rvalue*和 lvalue。这是我的理解

```
int main()
{
  //.....
  Foo foo = Bar1();
  foo = Bar2();
  //......
}  

Foo Bar1()
{
  //Do something including create foo
  return foo;
}

Foo& Bar2()
{
  //Do something including create foo
  return foo;
} 
```

c++03下，`Bar1()`会复制返回对象（就在return之前），然后返回被复制对象的地址；执行一个即将被销毁的对象的浪费副本。`Bar2()`将返回在函数中创建的对象。

在 c++11 下，`Bar1()`本质`Bar2()`上是等价的（也等价于`Bar2()`c++03）。

是对的吗？如果不是，请详细说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:40:33.600

它们是不相同的。`Bar2()`两种标准都是UB。您不能通过引用返回在堆栈上创建的对象。

在 C++03`Bar1()`中可以利用 RVO 并且不会复制任何内容。在 C++11`Bar1()`中甚至会使用 RVO，或者如果 RVO 不可用，将使用移动构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:40:53.333

右值和左值的概念从旧的 C++ 到 C++11 并没有改变。你所描述的“C++03”是应该发生的。在某些情况下，一些编译器优化可以减少不必要的副本数量（包括不必要的复制构造函数调用！），但除此之外它是相同的。

改变的是 C++11 引入了 rvalue-reference ( `T&&`) 的概念。

有几篇关于它的文章，你可以用谷歌搜索，例如在这里：

[http://thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:50:26.127

`Bar2()`不会在 C++ 2003 或 C++ 2011 中创建任何副本。对于在 C++ 2003 和 C++ 2011 中创建`Bar1()`的副本。`foo`仅当您确实有一个右值或者如果您有一个左值时，使用右值引用才适用即将消失，它正在被归还。

当然，该示例恰好是未定义的行为，因为`foo`正在返回的是`foo`正在初始化。`foo`也就是说，您的示例似乎因为没有说明返回时的含义而搞砸了。假设每个函数都有一个局部变量`foo`，`Bar2()`根据两种标准都是未定义的行为，并且`Bar1()`有些不同：

*   如果有 的移动构造函数`Foo`，C++ 2011 可能使用移动构造函数，而 C++ 2003 可能使用复制构造函数。
*   是否使用移动构造函数或复制构造函数取决于函数的其余部分和编译器：如果return中的所有`return`语句，则大多数编译器将省略额外对象的构造。`Bar1()``foo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:43:25.217

> Bar2() 将返回在函数中创建的对象。

这显然是错误的。`Bar2()`将返回对某个对象的**引用。**（注意：如果对象是在里面的堆栈上创建的，那将是 UB `Bar2()`）。

> 在 c++11 下，Bar1() 和 Bar2() 本质上是等价的（也等价于 c++03 的 Bar2()）。

在 C++11 下含义相同。您真正感兴趣的是移动语义：

```
Foo Bar3()
{
  //Do something
  return std::move(foo);
} 
```

这不会执行复制构造函数，而是执行移动构造函数 - 这应该更少资源消耗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T22:46:36.303

这篇文章可能对您来说很有趣：[想要速度吗？按值传递。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

在 C++03 中，`Bar1()`可以复制对象（但这已被优化为所谓的复制省略——参见链接）。

在 C++11 中，基本上没有任何改变。允许编译器调用`Foo`的复制构造函数或`Foo`移动构造函数或进行复制省略。但由于即使在 C++03 中副本也会被忽略，`Bar1()`所以在 C++11 和 C++03 中也是如此。

`Bar2()`返回只是一个引用，在 C++11 中没有什么不同。返回引用可能很关键。如果`foo`将是一个局部值，则返回对已销毁变量的引用，而不是 this。

# php - 包括 php 流套接字代理的用户名和密码

> ID：13753874
> 
> 赞同：1
> 
> 时间：2012-12-06T22:36:29.770
> 
> 标签：php, zend-framework, proxy, stream-socket-client

我有一个连接到 smtp 服务器的 php 脚本，我传递了电子邮件地址、密码和所有其他内容。（我正在使用 Zend）

我想通过代理，但我的代理服务器需要身份验证。我查看了 php 文档，但无法弄清楚代理服务器的用户名/密码放在哪里。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:11:14.350

以下是您的身份验证方式：

1.  [卷曲解决方案](https://stackoverflow.com/questions/9822211/proxy-authentication-required-with-curl)
2.  [PHP stream_context_create](http://php.net/manual/en/function.stream-context-create.php#74431)

# java - 再次重用套接字？

> ID：13753876
> 
> 赞同：-1
> 
> 时间：2012-12-06T22:36:38.310
> 
> 标签：java, sockets

简单的问题，我知道如果你只使用“.close()”或者只是在套接字上设置 null，你仍然不能重用它。但是如果你将它设置为 null 然后说“= new Socket();” 在用过的插座上，还能再用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:37:31.457

当你说它`new Socket();`不会使用已经关闭的套接字时，它会让你获得新的`Socket`. 所以，这不是重复使用。您只是在**重新使用引用变量**，而不是`Socket`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:38:50.860

那不是重用。那就是创建一个新对象。这里唯一被重用的是*变量。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:38:52.747

您正在混合概念：当您这样做时，`socket = new Socket()`您只是在重用变量名，但对象是另一个。所以你没有重用同一个套接字，只是创建一个可以从同一个变量访问的新套接字。

这实际上适用于任何变量。不仅仅是插座。

# javascript - JSON Stringify 和 Parse 函数提供不一致的结果

> ID：13753883
> 
> 赞同：2
> 
> 时间：2012-12-06T22:37:25.033
> 
> 标签：javascript, json, stringify, jsonserializer

> **可能重复：**
> [JSON.stringify() 怪异](https://stackoverflow.com/questions/710586/json-stringify-bizarreness)

好的，所以我使用了各种 JSON 方法（字符串化和解析），但最近遇到了一个页面，它们的行为不正确。我正在使用 Chrome 版本 23.0.1271.91 m

例如，如果我将以下内容放入控制台：

```
var x = [{"color":"red"},{"name":"ryan"}];
console.log('original object = ', x);
var y = JSON.stringify(x);
console.log('stringified = ', y);
var w = JSON.parse(y);
console.log('parsed = ', w); 
```

我通常会得到这个：

```
original object = [Object, Object]
stringified =  [{"color":"red"},{"name":"ryan"}]
parsed = [Object, Object] 
```

![在此处输入图像描述](../Images/98263383ec92c8722686193de2854658.png)

但特别是在一页上，我得到以下内容：

```
original object = [Object, Object]
stringified =  "[{\"color\": \"red\"}, {\"name\": \"ryan\"}]"
parsed =  [{"color": "red"}, {"name": "ryan"}] 
```

![在此处输入图像描述](../Images/b380f34dd6885f0d7c60bb9409cd550f.png)

其中 parsed 是一个值为 [{"color": "red"}, {"name": "ryan"}] 的字符串，而不是具有这些值/属性的对象。

我只是不确定如何解决这个问题。显然，序列化中出了点问题。这是在我无法控制其他脚本正在运行的环境中（它是一个插件），因此该解决方案不能真正涉及禁用可能导致干扰的其他脚本，因为我可能不知道它们和这可能会导致其他问题。

# shell - shell脚本中两种模式之间的grep数据

> ID：13753885
> 
> 赞同：0
> 
> 时间：2012-12-06T22:37:34.437
> 
> 标签：shell, sed, grep

必须使用什么命令来 grep 文件中 2 个匹配模式之间的项目。我的文件有如下行：

```
abc def ghi
abc bcd def (task Name: example)
##some other similar lines## 
```

我需要 Name: 和 ')' 之间的数据

我尝试使用命令

```
cat script.log | sed 's/Name:\(.*\)\)/\1/gp' 
```

此命令没有为我提供所需的结果。请指导我。

此外，是否可以使用 $Name 代替“Name:”（使用替换原始值的变量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:45:35.327

你在哪里，试试

```
echo "abc bcd def (task Name: example)" | sed 's/.*Name: \(.*\)[\)]/\1/'

**output**
example 
```

或者更简单

```
echo "abc bcd def (task Name: example)" | sed 's/.*Name: \(.*\))/\1/' 
```

请注意，您不需要转义文字结束括号')'。

或（每个请求），带有一个变量

```
var="Name: "
echo "abc bcd def (task Name: example)" | sed "s/.\*${var}\(.\*\))/\1/" 
```

**输出**

```
example 
```

请注意 shell 元字符“*”周围的额外转义字符。

如果您的值`var=`包含任何外壳元字符，您也需要转义它们。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:49:58.433

使用 GNU grep

```
grep -oP '(?<=Name: )\w+(?=\))' script.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:43:01.583

就像是：

```
cat script.log | sed -n '/Name:/s/^.*Name:\([^)]*\)).*$/\1/gp' 
```

应该做的工作。

您在原始表达式中的最大错误是您逃脱了第二个括号。当我运行您的代码段时，出现错误：

```
sed: 1: "s/Name:\(.*\)\)/\1/g": RE error: parentheses not balanced 
```

即使您更正了这一点，您也会发现 sed 默认打印每一行。这是我建立的表达式的作用。

Sed 表达式采用`[address[,address]]function[arguments]`. 您的表达式不包含任何可选的*地址*元素。我包含了一个与任何包含“名称：”的行匹配的*地址*( )。`/Name:/`该函数是需要两个参数的*替换函数 - (1) 搜索模式和 (2) 替换表达式。*搜索模式匹配整行并提取“名称：”之后包含零个或多个字符的行的段，直到第一个括号。“转义”括号定义捕获组，未转义的括号终止捕获。该模式包括该行的其余部分（例如，`.*$`）。由于整行匹配，它将被替换表达式替换，该替换表达式仅包含捕获的部分。

综上所述，简单的 sed 语句匹配任何包含“Name:”的行，并将整行替换为`Name:`第一个左括号 ( `)`) 之间的字符。`-n`标志和标志的添加确保`p`只打印匹配的行。

# sql - SQL 如何使用公用表表达式和动态 SQL 透视表

> ID：13753888
> 
> 赞同：2
> 
> 时间：2012-12-06T22:37:44.327
> 
> 标签：sql, sql-server, tsql, pivot, common-table-expression

我有这个按月对搜索进行分组的 SQL 查询：

```
; with Mth (st, nd) as (
    select DATEADD (M, datediff (m, 0,'2012-09-01'), 0),
            DATEADD (M, DATEDIFF (m, 0, '2012-09-01') + 1, 0)  
    union all
    select DATEADD (m, 1, st),
            DATEADD (m, 1, nd)
    from Mth
    where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
)
select MONTH(Mth.st) Month,
    COUNT(S.QRY_ID) Searches
FROM Mth
LEFT JOIN SEARCHES S
on Mth.st <= S.CREATED
and Mth.nd > S.CREATED
GROUP BY YEAR(Mth.st), MONTH(Mth.st)
ORDER BY 1,2 
```

结果如下所示：

```
 Month  |  Searches
---------------------
   9    |    21
   10   |    32
   11   |    18 
```

我试图弄清楚如何使用`PIVOT`来实现这一点：

```
 9   |   10    |   11
-----------------------
  21  |   32    |   18 
```

谁能给我解释一下怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:46:25.270

你可以使用这样的东西：

```
; with Mth (st, nd) as (
    select DATEADD (M, datediff (m, 0,'2012-09-01'), 0),
            DATEADD (M, DATEDIFF (m, 0, '2012-09-01') + 1, 0)  
    union all
    select DATEADD (m, 1, st),
            DATEADD (m, 1, nd)
    from Mth
    where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
)
select *
from
(
  select MONTH(Mth.st) Month,
      COUNT(S.QRY_ID) Searches
  FROM Mth
  LEFT JOIN SEARCHES S
    on Mth.st <= S.CREATED
    and Mth.nd > S.CREATED
  GROUP BY YEAR(Mth.st), MONTH(Mth.st)
) src
pivot
(
  sum(searches)
  for month in ([9], [10], [11])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/71434/1)

如果您要转换的月数未知，则可以使用类似于以下的动态 sql：

```
; with Mth (st, nd) as (
    select DATEADD (M, datediff (m, 0,'2012-09-01'), 0),
            DATEADD (M, DATEDIFF (m, 0, '2012-09-01') + 1, 0)  
    union all
    select DATEADD (m, 1, st),
            DATEADD (m, 1, nd)
    from Mth
    where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
)
select *
into #dates
from Mth

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(month(st))
                    from #dates
                    group by month(st)
                    order by month(st) 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = ' with Mth (st, nd) as (
                select DATEADD (M, datediff (m, 0,''2012-09-01''), 0),
                        DATEADD (M, DATEDIFF (m, 0, ''2012-09-01'') + 1, 0)  
                union all
                select DATEADD (m, 1, st),
                        DATEADD (m, 1, nd)
                from Mth
                where nd <= DATEADD (m, datediff (m, 0, getdate()), 0)
            )
            select *
            from
            (
              select MONTH(Mth.st) Month,
                  COUNT(S.QRY_ID) Searches
              FROM Mth
              LEFT JOIN SEARCHES S
                on Mth.st <= S.CREATED
                and Mth.nd > S.CREATED
              GROUP BY YEAR(Mth.st), MONTH(Mth.st)
            ) src
            pivot
            (
              sum(searches)
              for month in ('+@cols+')
            ) piv'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/445be/8)

# c# - Win32_PhysicalMemory 上的 C# NullReferenceException

> ID：13753890
> 
> 赞同：1
> 
> 时间：2012-12-06T22:37:47.880
> 
> 标签：c#, wmi

我有以下结构；

```
static Memory memory;

  public struct Memory
  {
      public string Name;
      public string Manufacturer;
      public string MemoryType ;
      public string Speed;
      public string DeviceLocator;
      public string Capacity;
      public string OtherInfo;
  }; 
```

除了以下内容，我可以获得所有内容：

```
 ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMemory");
         ManagementObjectCollection myobject = searcher.Get();
             foreach (ManagementObject item in myobject)
             {
                memory.OtherInfo = item["OtherIdentifyingInfo"].ToString();
             } 
```

当我尝试执行上述操作时，我得到：

```
Object reference not set to an instance of an object. 
```

我必须以某种方式创建一个实例 `item["OtherIdentifyingInfo"]`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:44:37.913

**其他识别信息**

数据类型：字符串 访问类型：只读 除了资产标签信息之外，可用于识别物理元素的附加数据。一个示例是与也具有资产标签的元素相关联的条形码数据。如果只有条形码数据可用且唯一或能够用作元素键，则此属性为 NULL，并且条形码数据用作标签属性中的类键。此属性继承自 CIM_PhysicalElement。

在传递给字符串之前，您需要检查值是否为 Null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:52:39.337

一个简单的`null`检查将修复错误，但它看起来像`Win32_PhysicalMemory`不使用`OtherIdentifyingInfo`

```
memory = new Memory();
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMemory");
ManagementObjectCollection myobject = searcher.Get();
foreach (ManagementObject item in myobject)
{
    if (item["OtherIdentifyingInfo"] != null)
       memory.OtherInfo = item["OtherIdentifyingInfo"].ToString();
} 
```

# android - 如何获取维基百科的文本部分并在我的 android 应用程序中使用它

> ID：13753892
> 
> 赞同：0
> 
> 时间：2012-12-06T22:38:04.957
> 
> 标签：android, popup, wikipedia, mapactivity

我编写了一个应用程序，它在地图上的弹出窗口中显示我的位置，以及数据库中的其他位置。我想从 Wikipedia 获取一些信息，并将其中的一部分作为位置信息呈现。

但是，我不知道该怎么做。我是Android新手，希望能在这里找到一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:59:04.910

你可以使用这个[Wikilocation API](http://wikilocation.org/)。它使用您当前的位置来显示附近的文章。这是一个示例：

```
http://api.wikilocation.org/articles?lat=51.500688&lng=-0.124411&limit=1 
```

将返回

```
{
    "articles": [
        {
            "id": "7290308",
            "lat": "51.5006",
            "lng": "-0.124611",
            "title": "Big Ben",
            "url": "http:\/\/en.wikipedia.org\/w\/index.php?curid=7290308",
            "distance": "17m"
        }
    ]
} 
```

向您显示您在大本钟附近。有关更多文档，请参见[此处](http://wikilocation.org/documentation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:46:21.937

如果您将其用作搜索词，您可以将用户重定向到 wikipedia 移动页面：

```
http://en.wikipedia.org/wiki/" + search 
```

或者，如果您不想在 WebView 或浏览器中显示它，您可以使用[Wikimedia API](http://www.mediawiki.org/wiki/API%3aMain_page)仅显示描述的相关部分。

# java - Java alt 代码作为字符串

> ID：13753893
> 
> 赞同：1
> 
> 时间：2012-12-06T22:38:06.940
> 
> 标签：java, string, netbeans, stringbuilder

所以和我之前的问题一样，我想在我的项目中添加 alt+ 代码，特别是 ☆</p>

我用这个作为我的代码：

```
 totalStars.append("\u9733");
    totalStarsLabel.setText(totalStars.toString()); 
```

我也试过：

```
 totalStars.append("☆");
    totalStarsLabel.setText(totalStars.toString()); 
```

但我得到这个作为输出：▛</p>

知道如何解决这个问题吗？我真的很难过。

解决了：

使用 Unicode（Netbeans 源代码中使用的字体）和 ("\u2605")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:13:14.327

那个 u9733 如果确实 9733 是十六进制的并且它应该是十六进制的，那么它就在 CJK 表意文字领域的中间。这种对 CJK 的入侵可能是出于不光彩的原因....

这是你正在使用的吗？
[http://www.fonts2u.com/ravie.font](http://www.fonts2u.com/ravie.font)

# c# - 如何提交 guid 作为隐藏表单域？

> ID：13753899
> 
> 赞同：0
> 
> 时间：2012-12-06T22:38:35.073
> 
> 标签：c#, asp.net, .net

我正在为表单字段分配 GUID，但它没有与表单一起提交。

```
<asp:HiddenField ID=GuidToken" runat="server"/> 
```

//后面的伪代码

```
GuidToken = [valid guid];
//check that guid successfully assigned - yes 
```

提交表单后，我会提取所有表单值：

```
Request.Form["GuidToken"] 
```

其他值很好，但以上为空。这是特定于指南的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:45:13.477

你使用有什么原因`Request.Form`吗？你应该使用

```
Guid myGuid = Guid.Parse(GuidToken.Value); 
```

如果您仍想使用我不推荐的 Request.Form，隐藏字段控件的名称已由 asp.net 更改，因此该集合不包含您指定的内容，因为它添加了一些自动生成的命名约定。现在看起来像这样

```
Request.Form["ctl00$MainContent$GuidToken"] 
```

调试模式

![在此处输入图像描述](../Images/93cc8bd019a699be5e3dbcfe45060806.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:40:22.907

我不确定您要完成什么。但是您可能想考虑使用**会话变量**来存储您的令牌 GUID 并将其“传递”到不同的页面？

```
Session["GuidToken"] = myGeneratedGUID; 
```

然后

```
var retrievedGUID = Session["GuidToken"]; 
```

一定要检查 NULL，会话可以在 POST 之间过期。

# javascript - 简单的计算不起作用

> ID：13753904
> 
> 赞同：0
> 
> 时间：2012-12-06T22:38:56.993
> 
> 标签：javascript, jquery

我想提醒计算的总金额，但我不知道为什么而不是计算它只是附加值。

**编码：**

```
 $('#main button').click(function(){
    id = $(this).attr('id');
    parts = id.split('_');
    item_id = parts[0];
    pairs = $('#'+item_id+'_pairs').val();
    females = $('#'+item_id + '_females').val();
    males = $('#'+item_id + '_males').val();
    if(pairs >0){
        counted_pairs = pairs*2;
    }else{
        counted_pairs = 0;
    }
    total_fishes = (males + females + counted_pairs);
    alert(total_fishes);
}); 
```

如果我在表格中添加 1 对 1 男和 1 女，它应该总共显示 4，但它显示的 111 似乎附加不计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:41:04.843

你需要做一个数字加法。你所拥有的是一个字符串连接。

尝试使用 将其转换为数字`parseInt`。

```
total_fishes = (parseInt(males, 10) + parseInt(females, 10) + counted_pairs); 
```

**注意：**我没有申请 counted_pa​​irs 因为它是一个数字，因为`counted_pairs = pairs*2;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:42:46.943

获取值时将值解析为数字：

```
pairs = parseInt($('#'+item_id+'_pairs').val(), 10);
females = parseInt($('#'+item_id + '_females').val(), 10);
males = parseInt($('#'+item_id + '_males').val(), 10); 
```

现在，when`pairs`是一个数字，您不必专门检查零，因为`0 * 2`计算得很好：

```
counted_pairs = pairs * 2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T22:43:42.317

如果您要添加的变量之一包含一个字符串值，JavaScript 会将这些值相互附加，就好像所有变量都是字符串一样。确保所有变量都包含整数值；否则，通过按照其他答案的建议进行解析，将它们转换为整数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T22:45:08.577

在您的 if 语句之前将您的值转换为整数...

```
pairs = parseInt($('#'+item_id+'_pairs').val(), 10);

females = parseInt($('#'+item_id + '_females').val(), 10);

males = parseInt($('#'+item_id + '_males').val(), 10); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T22:41:03.063

您正在连接字符串，而不是添加值。使用`parseFloat`或`parseInt`添加数字。

```
total_fishes = (parseFloat(males) + parseFloat(females) + parseFloat(counted_pairs)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T22:40:23.213

改变 total_fishes = (males + females + counted_pa​​irs); 对此：

```
total_fishes = ((males * 1 + females * 1) * 1 + counted_pairs * 1); 
```

这**会**起作用，我知道这看起来很奇怪，但是当你使用 * 1 + 值 * 1 时，Javascript 会将变量转换为数字。我无法解释为什么，但几年前我在 cPanel x 中看到了这种和平的代码，我使用很多。

编辑：

当您使用用户输入时实际上存在差异，您可以使用 isNaN 检查值是否错误，这在您使用 parseInt 时将不起作用，因为它会抑制错误并尝试创建一个整数。

测试代码：

```
var males = "2,4";
var females = "3";
var counted_pairs = "33";

var result = ((males * 1 + females * 1) * 1 + counted_pairs * 1);
var resultb = (parseInt(males) + parseInt(females * 1) + parseInt(counted_pairs));

if (isNaN(result)) {
 alert("Input is wrong my method");   
}

if (isNaN(resultb)) {
 alert("Input is wrong using parseint");   
}​ 
```

结果：只会显示第一个警报屏幕。

# overriding - 我如何继承 CCMenuItemImage

> ID：13753906
> 
> 赞同：2
> 
> 时间：2012-12-06T22:39:02.263
> 
> 标签：overriding, subclass, cocos2d-x, ccmenuitem

我收到一条错误消息，提示我将 CCMenuItemImage 错误地转换为“Button”

按钮.cpp：

```
#include "button.h"

void Button::selected(){
    CCLOG("SELECTED");
}

void Button::unselected(){
    CCLOG("UNSELECTED");
} 
```

按钮.h：

```
#ifndef BUTTON_H
#define BUTTON_H
#include "cocos2d.h"

class Button : public cocos2d::CCMenuItemImage{
public:
    virtual void selected();

    virtual void unselected();
};

#endif 
```

SinglePlayer.ccp：

```
//I get an error 'invalid conversion from 'cocos2d::CCMenuItemImage*' to 'Button*' '

Button *left1 = Button::create("turncircle.png","turncircle.png", this, menu_selector(SinglePlayer::turning)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:41:24.627

当您调用 Button::create 时，它​​实际上是在引用 CCMenuItemImage 中的 create 方法，因此您将得到一个 CCMenuItemImage（不是 Button）。

您需要在 Button 类中创建一个静态创建方法。你仍然可以在你的超类中引用初始化器，所以它应该相当简单。因此，在您的 Button 类创建方法中，执行以下操作：

```
Button* Button::create(const char* normalImg, const char* selectedImg) {
    Button *button = new Button ();
    if (button && button->CCMenuItemImage::initWithNormalImage(normalImg, selectedImg, NULL, NULL, NULL) {
      button->autorelease ();
      return button;
    } else {
      delete button;
      button = NULL;
      return NULL;
    }
} 
```

（免责声明：我实际上并没有对此进行测试，这里只是一些快速代码。）

如果您使用此 create 方法，它将返回一个 Button 对象，这正是您要查找的内容。

您正在寻找的初始化程序是：

```
bool CCMenuItemImage::initWithNormalImage(const char *normalImage, const char *selectedImage, const char *disabledImage, CCObject* target, SEL_MenuHandler selector); 
```

您可能希望为您的 Button 类创建构造函数以适应 CCMenuItemImage 初始值设定项的更多值。由你决定。

通过 CCMenuItem.cpp 文件进行跟踪；CCMenuItemImage 本身是 CCMenuItem 的子类，因此应该为您提供一个相当强的参考点，说明应该如何设置。（CCMenuItem 和 CCMenuItemImage 都在 CCMenuItem.cpp/.h 文件中定义。）

希望这可以帮助！！

# c# - 共享数据库 XML vs SQLite vs SQL Server CE

> ID：13753907
> 
> 赞同：0
> 
> 时间：2012-12-06T22:39:02.157
> 
> 标签：c#, xml, sqlite, sql-server-ce

我想知道其中哪一个最适合我的应用程序的需求。该应用程序将分布在多台电脑上并共享一个公共数据库。该数据库最多可以包含大约 20 000 个条目。基本上它只是一个会议经理，数据库中的每个条目都代表一个会议。

例如，我可能想展示涉及某个人的每一次会议或与某个对象的每次会议。在这一点上这并不重要，因为这只是我可能想要制作的数据表示。

事实是我有一定的局限性：

*   我正在用 C# 做应用程序
*   我无法在用户的电脑上安装任何东西（如果需要，我必须只复制 .exe + dll）
*   数据库将位于网络存储上，最多可同时访问 10 台电脑
*   我从未使用过 SQL Server CE 或 SQLite（实际上也没有使用任何其他数据库）

我的第一个想法是使用纯 XML 数据库，因为使用 .NET 类序列化程序非常简单。为了修改数据库，用户必须获得对文件的写访问权。同时，所有其他用户都将处于只读状态。在任何时候，他们都可以通过在获得此访问权时创建的文件知道谁拥有写访问权。每个处于读取模式的应用程序也将有一个正在运行的进程监视 XML 文件，以便在数据库发生任何更改时通知其用户，让用户能够重新加载它。

听说过一点 SQLite 和 SQL Server CE，我不太确定我在可伸缩性和性能方面是否有正确的方法。我不介意学习如何使用它们。我主要担心的是我真的无法在用户电脑上安装任何东西，我想让用户的应用程序部署尽可能简单（理想情况下，复制/粘贴应用程序文件夹）。

所以这里有问题：

**编辑 2：**我猜它已经关闭，因为它可能会引发关于 SQLite 与 SQL Server CE 的争论，这不是我想要的

1.  在上述情况下，使用 XML 文件还是真正的数据库更好？
2.  一旦我们有许多条目，“真正的”数据库在性能之外给 XML 带来什么好处？

类似问题： [Xml 或 Sqlite，何时为数据库删除 Xml？](https://stackoverflow.com/questions/77726/xml-or-sqlite-when-to-drop-xml-for-a-database)

**编辑**：这里为您提供更多信息，以帮助您了解我所处的环境：

实际使用的系统是 Word。一切都写在网络上某些用户共享的文件夹中的文件中。用户从该文件中检索信息以根据他们需要的数据表示创建其他文件。我想创建一个应用程序来简化他们的流程。由于他们已经习惯了他们的系统，如果我的应用程序需要任何类型的操作来安装它，他们可能会想要坚持使用他们的系统。每次安装都需要通过他们的 IT 服务，这是缓慢而复杂的，尤其是对于非官方应用程序。

这些电脑可能会阻止他们的用户做任何常见任务之外的任何事情。这就是为什么我想让我的应用程序尽可能简单（这样我就可以通过 USB 密钥传递可执行文件和 dll 并且它可以以最少的用户交互运行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:19:30.260

根据您的要求，您需要一个处理以下内容的数据库：

1.  处理并发
2.  通过网络正常工作。文件共享不是一个好的做法，在网络中工作的数据库必须有一个 DBMS 来控制访问。
3.  事务性的
4.  用户管理和安全（身份验证/授权）。只要您在网络中公开它，您就需要它。

根据您的所有要求，我相信 SQLite/SQL CE/XML 文件都不是好的答案。在您想要拥有本地数据库（而不是通过网络）的情况下，所有这些都很有用。一旦你想要一个基于网络的数据库，你就需要更高级的东西，就像我上面提到的那样，并发性、安全性等。我建议你可以使用免费、可扩展、安全、网络可访问且公平的[SQL Express 2012](http://www.microsoft.com/en-au/download/details.aspx?id=29062)易于使用。

根据经验，当您有 10 个远程用户时，将来他们很可能会增加。因此，请选择更强大的选项，因为以后更改数据库并不是一件容易的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:20:09.417

像 Sqlite 这样的数据库会处理多用户读/写问题。每次数据更改时，都需要将 XML 文件缓存在内存中并串行写入。即使您想出了确保只有一个用户写入文件的外部策略，其他用户也可能在文件更新时读取。

最后，嵌入式数据库的效率越高，您处理的数据量越大。

# php - 网站菜单和链接本地化的最佳方法？

> ID：13753912
> 
> 赞同：0
> 
> 时间：2012-12-06T22:39:25.247
> 
> 标签：php, localization, menu, hyperlink

我找到了一个看似合适的解决方案。任何人都可以提供此选项的明确示例吗？我觉得它看起来很合适，但我真的不明白。

```
CREATE TABLE T_PRODUCT (
  NAME_FK        int,
  DESCRIPTION_FK int,
  PRICE          NUMBER(18, 2)
)

CREATE TABLE T_TRANSLATION (
  TRANSLATION_ID
)

CREATE TABLE T_TRANSLATION_ENTRY (
  TRANSLATION_FK,
  LANGUAGE_FK,
  TRANSLATED_TEXT NTEXT
)

CREATE TABLE T_TRANSLATION_LANGUAGE (
  LANGUAGE_ID,
  LANGUAGE_CODE CHAR(2)
) 
```

此外，如果我只打算为整个网站的菜单和链接提供本地化，我应该继续使用这种方法吗？这对我的目的来说太复杂了吗（不翻译任何数据内容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:43:07.497

PHP 实际上有一个库来支持这一点。

[获取文本](http://php.net/manual/en/intro.gettext.php)

我以前用过它，它实际上工作得很好。

以下是函数列表：

[获取文本函数](http://php.net/manual/en/ref.gettext.php)

# java - 有效的大二进制字符串上的 BigInteger NumberFormatException

> ID：13753914
> 
> 赞同：4
> 
> 时间：2012-12-06T22:39:35.383
> 
> 标签：java, string, biginteger, numberformatexception

所以，我使用 BigInteger 将一些二进制字符串转换为数字表示，最终陷入了一个奇怪的错误。

当这一行代码运行时，它会引发 NumberFormatException：

```
BigInteger temp = new BigInteger(strbuf.toString(), 2); 
```

其中 strbuf 具有以下字符串（仅由零和一组成）：

```
"1001110000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010" 
```

起初我以为字符串或值可能太大了，但以下独立的 java 类编译并运行得很好：

```
import java.math.BigInteger;

class test {
    public static void main(String[] argv) {
        StringBuffer strbuf = new StringBuffer("1001110000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010");
        BigInteger big = new BigInteger(strbuf.toString(), 2);
        System.out.println(big);
    }
} 
```

我在这里缺少什么吗？为什么具有明显相同值的相同代码无法在我的主应用程序上运行？

异常消息：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "1001110000000100"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.math.BigInteger.<init>(Unknown Source)
    at org.app.star.pad(star.pad:42) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:56:22.497

根据我为 j2ee5 编写的 safari book，尝试（隐式建议）将值转换为*java.lang.Integer*，这是 int 类型的包装器。那就是问题所在。请注意异常展开中的第二个“at”行...

这可能是一个优化问题。关闭主程序的优化，而不是精简的演示程序。

真挚地，

箭树

# c# - 具有双重身份验证的应用程序：自定义和 Active Directory

> ID：13753917
> 
> 赞同：2
> 
> 时间：2012-12-06T22:40:03.617
> 
> 标签：c#, winforms, active-directory

我有一个 C# 应用程序，它将使用企业 Active Directory 对一半用户进行身份验证，并为另一半用户使用自定义身份验证方法。

我已经设法使用 DirectoryEntry、DirectorySearcher 等对 AD 中的用户进行身份验证，并且我的自定义身份验证也正常工作。

但是，我想知道用户是否已经使用公司域登录了他的计算机，那么该用户将不会显示任何登录表单并且必须传递给应用程序。

我知道我可以使用**WindowsIdentity.GetCurrent().IsAuthenticated**，但是对于本地登录的用户和域登录的用户都返回“true”。

我想知道如何区分第一个和最新的。

（注意：这是一个桌面应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:28:21.770

我还维护了一个 winforms 桌面应用程序，它为办公室用户使用活动目录并支持非办公室用户。

这可能比你的要求要多，但因为我和你有相同的场景，所以无论如何我都会提供它，因为它以一种很好的方式组合在一起，我真的没有写太多代码并且一直运作良好。

我敢肯定，其他人可能会用一个包裹而不是自己滚动来做到这一点——老实说，下次我有这个要求时，我可能会走那条路……

这里是：

从概念上讲，我从 ASP.NET 中得到启发，并将安全性分为两个逻辑部分：

**身份验证**- 这个用户是谁？

**授权**- 用户可以这样做吗？

我的实现使用了一个简单的数据库：

![在此处输入图像描述](../Images/5201cd9de87d51face74cb7fa8c97b5e.png)

这是我的应用程序主要形式的一个片段：

```
 public EOMForm()
    {
        InitializeComponent();

        // Show the connection string when hovering over the database label (Test Mode Only)
        if(Properties.Settings.Default.TestMode)
            this.toolTip1.SetToolTip(this.databaseLabel, EomAppCommon.EomAppSettings.ConnStr);

        // Security
        DisableMenus();
    }

    private void DisableMenus()
    {
        // Disable individual menu items
        foreach (var menuItem in this.TaggedToolStripMenuItems())
            menuItem.Enabled = Security.User.Current.CanDoMenuItem((string)menuItem.Tag);

        // Apply disabled color to top level menus that have all their items disabled
        foreach (var menu in menuStrip1.DisabledMenus())
            menu.ForeColor = SystemColors.GrayText;
    } 
```

这[是支持的实用程序代码](https://gist.github.com/4229366)。

最后，我使用 ASP.NET 脚手架站点对其进行管理：

![在此处输入图像描述](../Images/689b530c68c0af32c9e96d60b1733347.png)

# ruby-on-rails - 悬停时显示的第二个 Font Awesome 图标

> ID：13753921
> 
> 赞同：0
> 
> 时间：2012-12-06T22:40:29.410
> 
> 标签：ruby-on-rails, twitter-bootstrap, font-awesome

在我的导航栏下拉列表中，当我将鼠标悬停在链接上时，图标（图标组、图标加号）还会显示另一个图标（图标过滤器）。这只发生在引导下拉菜单上。我在源文件中找不到对正在应用的“icon-filter”类的任何引用。

您可以在以下链接的下拉列表中查看不正确的图标。
[http://agile-ocean-8233.herokuapp.com/](http://agile-ocean-8233.herokuapp.com/)

宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.9'
gem 'sqlite3', :group => :development
gem 'pg', :group => :production
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'font-awesome-rails'
end
gem 'jquery-rails'
gem "rspec-rails", ">= 2.11.4", :group => [:development, :test]
gem "email_spec", ">= 1.2.1", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "database_cleaner", ">= 0.9.1", :group => :test
gem "launchy", ">= 2.1.2", :group => :test
gem "capybara", ">= 1.1.2", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
gem "bootstrap-sass", ">= 2.1.0.1"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.4"
gem "stripe", ">= 1.7.4"
gem "stripe_event", ">= 0.4.0"
gem "quiet_assets", ">= 1.0.1", :group => :development
gem "letter_opener", :group => :development
gem 'will_paginate', '~> 3.0'
gem 'will_paginate-bootstrap'
gem 'turbolinks'
gem 'thin'
gem 'jquery-turbolinks' 
```

应用程序.css.scss

```
 *= require_self
 *= require 'font-awesome'
 *= require_tree .
*/
.content {
  background-color: #eee;
  padding: 20px;
  margin: 0 -20px; /* negative indent the amount of the padding to maintain the grid system */
  -webkit-border-radius: 0 0 6px 6px;
  -moz-border-radius: 0 0 6px 6px;
  border-radius: 0 0 6px 6px;
  -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
  -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
  box-shadow: 0 1px 2px rgba(0,0,0,.15);
}
[class^="icon-"], [class*=" icon-"] {
  background-image: none;
} 
```

导航下拉菜单

```
<li class="dropdown" id="client_menu">
  <a class="dropdown-toggle" data-toggle="dropdown" href='#'>
    Clients <b class="caret"></b> 
  </a>
  <ul class="dropdown-menu">
    <li><%= link_to 'Clients <i class="icon-group"></i>'.html_safe, clients_path %></li>
    <li><%= link_to 'New Client <i class="icon-plus"></i>'.html_safe, new_client_path %></li>
  </ul>
</li> 
```

Bootstrap_and_overrides.css.scss

```
@import "bootstrap";
@import 'font-awesome';
body { padding-top: 60px; }
@import "bootstrap-responsive"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:20:49.573

好的，你的问题是这个

```
 background-image: url(/assets/glyphicons-halflings-white-27ae535ced0dc82c64894d9 etc 
```

当您将鼠标悬停在下拉菜单/锚标记（因此客户端和新客户端）上时，上面的内容被调用，当您使用 chrome 的开发人员工具将其删除时，问题就消失了。

您是否尝试过在 Firefox 上查看您的网站？它没有渲染 CSS 资产。看一看。这个项目在 github 上吗？我可以在源代码中找到它

现在它不在chrome中渲染？同样的错误

# jquery - jQuery Messi 模态窗口插件

> ID：13753938
> 
> 赞同：2
> 
> 时间：2012-12-06T22:41:20.203
> 
> 标签：jquery

我正在尝试配置 jQuery Messi（模态窗口）插件。

我已经检查了文档和示例，但我无法让关闭按钮在模式窗口中居中。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:46:21.043

将此行添加到您的`CSS`文件中，然后重试。

```
.messi-footbox { text-align: center; } 
```

# django - 视图之外的 django 会话

> ID：13753940
> 
> 赞同：2
> 
> 时间：2012-12-06T22:41:23.857
> 
> 标签：django, session

首先，在我想回答这个问题之前，我想说如果有更合适的方法来完成这个，请告诉我，因为我可能会使用它。

好的，所以在我的应用程序中，我需要添加一个 REST API 以允许用户登录、更改一些内容以及注销，而无需使用浏览器。我想我将拥有我编写的 api_login 视图将返回他们的 session_key，然后为每个请求传递会话密钥。比如那时

```
def login(request):
    ... all the django auth code I have
    # login adds the information to the request right?
    login (request, user)
    return simplejson.dumps({'key': request.session.session_key}) 
```

我面临的问题是稍后尝试使用`session_key`如下，但这奇怪地失败了

```
key = request.GET['key']
my_session = SessionStore(session_key=key)
my_session.session_key == key
>>> True
my_session.values()
>>> []
my_session.session_key == key
>>> False 
```

如您所见，我使用正确的键从数据库中检索 SessionStore 对象。但是当我尝试从中检索任何值时，它返回空，甚至更改其中的基础键。对此的任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:23:04.850

看来 Django 要么需要知道会话密钥，要么必须自己生成它。我的猜测是要么你给它一个随机密钥，要么它一无所知（因为它没有被保存）。您的示例在我的 shell 中的工作方式完全相同。现在这是我的例子：

```
>>> from django.contrib.sessions.backends.db import SessionStore
>>> key = 'asdf1234'
>>> my_session = SessionStore(session_key=key)
>>> my_session.session_key == key
True
>>> my_session['foo'] = 'bar'
>>> my_session.values()
['bar']
>>> my_session.session_key == key
False
>>> my_session.session_key
'358d6515b129631d89249687790adc49'
>>> my_session.save() 
```

然后回来：

```
>>> from django.contrib.sessions.backends.db import SessionStore
>>> my_session = SessionStore(session_key='358d6515b129631d89249687790adc49')
>>> my_session.values()
['bar'] 
```

所以让它做它的事情，不要忘记保存会话。

# php - DOMDocument saveHTML 错误地编码 href 属性

> ID：13753948
> 
> 赞同：3
> 
> 时间：2012-12-06T22:41:55.107
> 
> 标签：php, html, domdocument

我正在使用 DOMDocument 加载一些用户贡献的 HTML 块，然后对其进行操作。看来（假设我做的一切都正确）DOMDocument 正在通过 htmlentities 运行 href 属性内的 url。这使得查询字符串中带有与号的锚标记不正确。

例子：

```
$html = <<<HTML
<a href="http://foo.com?bar=baz&foo=bar">Foo</a>
HTML;

$dom = new DOMDocument;
$dom->loadHTML($html);

echo $dom->saveHTML(); 
```

输出变为（注意 url 中的 & 被转换为`&amp;`）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><a href="http://foo.com?bar=baz&amp;foo=bar">Foo</a></body></html> 
```

此外，在调用`$dom->loadHTML($html);`以下警告期间输出...

> 警告：DOMDocument::loadHTML(): htmlParseEntityRef: 期待 ';' 在实体中，行：1

我不知道那是什么意思。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:00:47.340

& 符号在有效/兼容的 XHTML 中用于确定 HTML 实体字符。

请参阅此参考列表： [http ://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

您的 DOMDocument 正在抱怨，因为它在输入时检测到无效的字符定义，并在输出时更正了它。

# java - @autowired 和空引用异常

> ID：13753952
> 
> 赞同：0
> 
> 时间：2012-12-06T22:42:04.860
> 
> 标签：java, spring, spring-mvc

//位于com\src\myproject\services

```
package com.src.myproject.services;

public interface IMyService {
    public boolean Method1();

} 
```

//位于com\src\myproject\services

```
package com.src.myproject.services;

public class MyService implements IMyService {

    @Autowired
    private TestMapper testMapper;

    @Override
    public boolean Method1() {

        return gettestMapper().GetOrder(1); //Get null pointer exception as testMapper is null in debug mode
    }

    public TestMapper gettestMapper(){

            return testMapper;
        }

    public void settestMapper(TestMapper testMapper){
        this.testMapper=testMapper;
        }

} 
```

我的`mapper.java`文件位于`com\src\mappers`

对应`mapper.xml`的位于`src\main\resources\com\src\myproject\mappers`

我的`servelet-context.xml`文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
                    http://www.springframework.org/schema/tx 
                    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd 
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.0.xsd
                    http://www.springframework.org/schema/util
                    http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

    <context:property-placeholder location="/WEB-INF/spring/jdbc.properties,/WEB-INF/spring/mybatis.properties" />

    <context:component-scan base-package="com.src.myproject.controllers" />
    <context:component-scan base-package="com.src.myproject.services" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Declare a datasource that has pooling capabilities -->
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close" p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}" p:user="${app.jdbc.username}" p:password="${app.jdbc.password}"
    p:acquireIncrement="10" p:idleConnectionTestPeriod="60" p:maxPoolSize="100"
    p:maxStatements="50" p:minPoolSize="10" />

    <!-- Declare a transaction manager -->
    <bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
    p:dataSource-ref="dataSource"
    autowire="byName" />

    <!-- define the SqlSessionFactory, notice that configLocation is not needed when you use MapperFactoryBean -->
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="typeAliasesPackage" value="${typeAliasesPackage}" />
    </bean>

    <!-- scan for mappers and let them be autowired -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.src.myproject.mappers" />
         <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    </bean> 
</beans> 
```

当我尝试通过自动连接使用映射器文件中的任何方法时，服务文件中的自动连接始终为空，并给出空引用异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:55:42.053

你永远不应该直接实例化 Spring bean。它是负责创建对象的容器。因此在您的控制器中，而不是：

```
IMyService mySvc = new Service(); 
```

创建这样的字段：

```
@Autowired
private IMyService mySvc; 
```

`MyService`Spring 会发现它并分配适当的值，这是预先为您创建的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:13:08.667

是否添加

```
<context:annotation-config /> 
```

帮助？

# ios - 未调用 AsyncSocket 委托

> ID：13753956
> 
> 赞同：0
> 
> 时间：2012-12-06T22:42:23.950
> 
> 标签：ios, delegates, cocoaasyncsocket

我正在尝试编写一个应用程序来通过 CocoaAsyncSocket 库发送/接收数据。

在应用程序的第一个版本中，套接字在 View Controller 中创建/初始化，我还将正确调用的委托方法放置在其中：

**WakmanFirstViewController.m**

```
#import "WakmanFirstViewController.h"
#import "GCDAsyncSocket.h"

@implementation WakmanFirstViewController

- (void)viewDidLoad
 {  
    [super viewDidLoad];

    asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *error = nil;

    if (![asyncSocket connectToHost:@"192.168.1.13" onPort:2000 error:&error]) {
        NSLog(@"Unable to connect to due to invalid configuration: %@",error);
    }

    NSData *requestData = [@"C" dataUsingEncoding:NSUTF8StringEncoding];
    [asyncSocket writeData:requestData withTimeout:-1.0 tag:0];
    [asyncSocket readDataWithTimeout:1 tag:0];
}

- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {

    NSLog(@"socket:didConnectToHost:%@ port:%hu", host, port);
}

... (other delegate methods) 
```

现在我正在尝试从 ViewController 中删除套接字的创建并将其放入 Singleton 类中，以便我也可以从其他视图中使用相同的连接。

为此，我创建了一个新类（SocketConnection），其中还移动了委托方法：

**wakmanSocketConnection.h**

```
#import <Foundation/Foundation.h>
#import "GCDAsyncSocket.h"

@interface SocketConnection : NSObject {
}

+ (GCDAsyncSocket *)getInstance;

@end 
```

**wakmanSocketConnection.m**

```
#import "SocketConnection.h"

static GCDAsyncSocket *socket;

@implementation SocketConnection

+ (GCDAsyncSocket *)getInstance
{
    @synchronized(self) {

        if (socket == nil) {
            socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];           
        }

        if (![socket isConnected]) {
            NSError *error = nil;

            if (![socket connectToHost:@"192.168.1.13" onPort:2000 error:&error]){
                    NSLog(@"Error connecting: %@", error);
            }
        }
    }
    return socket;
}

- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    NSLog(@"socket connected");
}

... (other delegate methods) 
```

然后我修改了 Viewcontroller：

**WakmanFirstViewController.h**

```
#import <UIKit/UIKit.h>
#import "SocketConnection.h"

@class GCDAsyncSocket;

@interface WakmanFirstViewController : UIViewController  {
    GCDAsyncSocket *socket; 
}

@end 
```

**WakmanFirstViewController.m**

```
#import "WakmanFirstViewController.h"

@implementation WakmanFirstViewController

- (void)viewDidLoad
 {
    [super viewDidLoad];

    socket = [SocketConnection getInstance]; 

    NSData *requestData = [@"C" dataUsingEncoding:NSUTF8StringEncoding];
    [asyncSocket writeData:requestData withTimeout:-1.0 tag:0];
    [asyncSocket readDataWithTimeout:1 tag:0];
} 
```

连接已建立，但问题是未调用委托方法。

在**wakmanSocketConnection.m 中**，我将委托设置为 self，因此它应该引用我复制方法的类。

有人可以帮我找到问题吗？

谢谢， 科拉多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:49:41.427

问题是 didReadData 委托方法只被调用一次，你必须通过调用来保持监听套接字：

```
[_socket readDataWithTimeout:-1 tag:0]; 
```

我的方法是这样的：

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    dispatch_async(dispatch_get_main_queue(), ^{
        @autoreleasepool {
            // DO STH
            [_socket readDataWithTimeout:-1 tag:0];
        }
    });
} 
```

初始化方法：

```
- (id)init
{
    if (self = [super init]) 
    {
        _socketQueue = dispatch_queue_create("Socket TCP Queue", nil);
        _delegateQueue = dispatch_queue_create("Socket Delegate Queue", nil);
        _socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:_delegateQueue socketQueue:_socketQueue];

    }
    return self;
} 
```

和连接方法：

```
- (void)connectToServer:(NSString *)host port:(NSInteger)port
{
    self.host = host;
    self.port = port;

    NSError *error = nil;
    if (![_socket connectToHost:host onPort:port error:&error])
    {

    }
} 
```

写法：

```
- (void)writeData:(NSData *)data withTimeout:(NSTimeInterval)timeout tag:(long)tag
{
    if ([self.socket isConnected]) {
        [self.socket writeData:data withTimeout:timeout tag:tag];
    }
} 
```

# android - monodroid 最小化应用程序后让应用程序继续执行

> ID：13753957
> 
> 赞同：0
> 
> 时间：2012-12-06T22:42:24.220
> 
> 标签：android, xamarin.android, monodevelop, background-process, xamarin

我正在尝试制作一个简单的跟踪应用程序。它所做的只是注册位置更新，然后每 15 秒将设备位置发送到 webapi（Web 服务）服务。这是以下代码，用于注册并发布到服务器。

```
 #region START STOP TRACKING
    public void StartTracking()
    {
        if (currentAsset == null) { return; }
        isTracking = true;
        //SETUP THE LOCATION VARIALBES
        if (_geocoder == null) { _geocoder = new Geocoder(this); }
        if (_locationManager == null) { _locationManager = (LocationManager)GetSystemService(LocationService); }

        var criteria = new Criteria() { Accuracy = Accuracy.Fine };
        string bestProvider = _locationManager.GetBestProvider(criteria, true);

        Location lastKnownLocation = _locationManager.GetLastKnownLocation(bestProvider);

        //LOG RECORD FOR CURRENT LOCATION
        if (lastKnownLocation != null)
        {
            PostData(lastKnownLocation, DateTime.Now);
        }

        _locationManager.RequestLocationUpdates(bestProvider, 2000, 1, this);

        BusTimer.Start();
    }

    private void OnTimeEvent(object source, ElapsedEventArgs e)
    {
        RunOnUiThread(delegate
        {
            var criteria = new Criteria() { Accuracy = Accuracy.Fine };
            string bestProvider = _locationManager.GetBestProvider(criteria, true);
            Location lastKnownLocation = _locationManager.GetLastKnownLocation(bestProvider);

            //LOG RECORD FOR CURRENT LOCATION
            if (lastKnownLocation != null)
            {
                PostData(lastKnownLocation, DateTime.Now);
            }

        });
    }
    public void StopTracking()
    {
        isTracking = false;
        _locationManager.RemoveUpdates(this);
        BusTimer.Stop();
    }
    #endregion

    #region POST LOCATION DATA TO SERVER
    private void PostData(Location setLocation, DateTime setDate)
    {
        try
        {
            currentLocation = setLocation;
             string longString = string.Format("{0}", setLocation.Longitude);
            string latString = string.Format("{0}", setLocation.Latitude);

            //POST DATA OVER
            var client = new RestClient("http://mywebserver/");
            var request = new RestRequest("API/DataAPI/PerformAction", Method.GET);
            request.AddParameter("ActionName", "PostEntityData"); // adds to POST or URL querystring based on Method
            string JSONString = "{'EntityID':" + currentAsset.AssetID.ToString() + ",'EntityName':'Asset','Long':" + longString + ",'Lat':" + latString + ", 'CheckDateTime':'" + setDate.ToString("yyyy-MM-dd HH:mm:ss") + "'}";
            request.AddParameter("ActionData", JSONString); // adds to POST or URL querystring based on Method         
            client.ExecuteAsync(request, response =>
            {
                Console.WriteLine(response.Content);   
                this.RunOnUiThread(new Runnable(PostToastData));                                                       
            });                                                
        }
        catch (System.Exception e)
        {
            Console.Write(e.Message);
        }                           
    }

     public void PostToastData()
     {             
         string longString = string.Format("{0}", currentLocation.Longitude);
         string latString = string.Format("{0}", currentLocation.Latitude);
         Toast.MakeText(this, "Logged Location record for " + currentAsset.AssetNumber + " at Long: " + longString + ", Lat: " + latString, ToastLength.Short).Show();
     }
    #endregion 
```

这一切都完美无缺。当我最小化应用程序时，它会继续正确地将数据发布到服务中。问题是大约一个小时后，应用程序意外地死掉了。

任何人都可以看到它在一定时间后崩溃的任何原因吗？该应用程序几乎没有使用任何内存，所以我认为这不会是内存问题。我应该在不同的庄园处理后台运行的应用程序吗？我是否应该在不同的线程上执行此过程，以便在应用程序不在焦点时它可以继续在后台执行？

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:25:12.570

如果你想在你的应用失去焦点后继续在后台运行，你应该使用后台服务。以下是一些可以帮助您入门的链接：

*   [Mono for Android 中的后台服务](http://visualstudiomagazine.com/Articles/2012/07/10/Background-Services-in-Mono-for-Android.aspx)
*   [创建服务](http://docs.xamarin.com/Android/Guides/Application_Fundamentals/Services)

# java - 具有可选行的 JTextArea

> ID：13753960
> 
> 赞同：2
> 
> 时间：2012-12-06T22:42:35.920
> 
> 标签：java, swing, jtextarea, jcomponent

我正在制作一个应用程序，我需要一个看起来像 JTextArea 的 JComponent，我可以在其中选择单独的行。

我知道我可以通过使用 JTextArea 并自己管理它来做到这一点，但可能有更好的方法来完成我想要做的事情。问题是我不知道在 Google 上搜索什么，因为我不知道如何调用这样的组件。

这是一张显示我想要的图片：![我想要的例子](../Images/8031b6b5ead4e742a443e85302c037d2.png)

突出显示“管理员”的部分正是我正在寻找的。从中，我将在程序的其他部分填写一些信息，因此我需要能够知道选择了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:45:12.457

那是**[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)**，而不是 JTextArea。它具有内置选择等功能。它可以水平或垂直显示元素。请查看我链接的官方教程。

# php - 从包含由分隔的键值的行中获取值：值可以包含：

> ID：13753963
> 
> 赞同：-2
> 
> 时间：2012-12-06T22:42:47.727
> 
> 标签：php

> **可能重复：**
> [PHP 拆分替代方案？](https://stackoverflow.com/questions/2813241/php-split-alternative)

我是 php 的初学者，基本上我试图从一行中提取值，行格式是 key:value

该值可能包含：

所以我想把它分成两部分，这样我就得到了第一次出现的右侧和左侧：

我写了一个函数，因为这将在文件的每一行执行

```
 /**
     * Returns value of the key if its available in line
     * example line 
     * somekey: someva:lue
     * @param type $line  pass full line
     * @param type $key pass the key
     * @return type  someva:lue
     */
    function extractValue($line, $key){
        $value = null;
        $value_array = split(":", $line);
        if(count($value_array)== 2)    
        {
            if($value_array[0] == $key)
               $value = $value_array[1];
        }
        return $value; 
    } 
```

我今天刚开始在 netbeans 中对其进行编码，然后收到以下警告，即拆分已被弃用等

```
 Deprecated: Function split() is deprecated in C:\wamp\www\myprojects\PhpProject1\upload_log.php on line 92 
```

我对php不是很熟悉，你能推荐一个替代函数吗？基本上我想把这条线分成两部分 key:value 想要得到一个给定的 line 和 key 的值

感谢帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:44:30.773

首先，使用[`explode()`](http://php.net/explode)代替[`split()`](http://php.net/split).

但是，您的代码很好，您也可以使用：

```
function extractValue($line, $key)
{
    list($_key, $value) = explode(':', $line, 2);
    if ($_key == $key) {
        return $value;
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:12:36.947

[简单地说](http://php.net/explode)：

```
$value = explode(':', $line, 2); 
```

2 是要获得的最大元素数，这适合您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:59:19.287

如果该值也可以包含`:`符号，则可能更易于使用：

```
$value = ltrim(strstr($line, ":"), ":");
               ^^^^^^ Find the remainder of the string from the first : on
         ^^^^^ Get rid of the : at the start of the result 
```

**编辑：**您可以以相同的方式获取密钥：

```
$key = trim(strstr($line, ":", true));
                               ^^^^ Get everything before the first : symbol 
```

请参阅有关[strstr](http://php.net/manual/en/function.strstr.php)的手册。

我正在修剪它，以防在密钥之前或之后有一些空白。

# java - 基于给定权重向量的随机选择问题

> ID：13753967
> 
> 赞同：2
> 
> 时间：2012-12-06T22:43:00.287
> 
> 标签：java, algorithm, random, weka, sample

我正在阅读基于给定权重向量对数组进行重新采样的 weka 实现。通读代码后，我不确定此实现的算法是什么。另外，我对这两行代码的用法很困惑：

```
 Utils.normalize(probabilities, sumProbs / sumOfWeights); 
```

和

```
// Make sure that rounding errors don't mess things up
probabilities[numInstances() - 1] = sumOfWeights; 
```

我不知道它们是用来做什么的。以下是从 Weka 复制的代码

```
Instances weka::core::Instances::resampleWithWeights(Random random,double[] weights )       
{

if (weights.length != numInstances()) {
  throw new IllegalArgumentException("weights.length != numInstances.");
}
Instances newData = new Instances(this, numInstances());
if (numInstances() == 0) {
  return newData;
}
double[] probabilities = new double[numInstances()];
double sumProbs = 0, sumOfWeights = Utils.sum(weights);
for (int i = 0; i < numInstances(); i++) {
  sumProbs += random.nextDouble();
  probabilities[i] = sumProbs;
}
Utils.normalize(probabilities, sumProbs / sumOfWeights);

// Make sure that rounding errors don't mess things up
probabilities[numInstances() - 1] = sumOfWeights;
int k = 0; int l = 0;
sumProbs = 0;
while ((k < numInstances() && (l < numInstances()))) {
  if (weights[l] < 0) {
  throw new IllegalArgumentException("Weights have to be positive.");
  }
  sumProbs += weights[l];
  while ((k < numInstances()) &&
       (probabilities[k] <= sumProbs)) { 
  newData.add(instance(l));
  newData.instance(k).setWeight(1);
  k++;
  }
  l++;
}
return newData; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:00:40.447

第一个代码片段：

```
Utils.normalize(probabilities, sumProbs / sumOfWeights); 
```

只是将每个元素除以`probabilities`第二个参数。这会将`probabilities`最大元素为 的数组转换为最大元素为 的`sumProbs`数组`sumOfWeights`。第二段代码：

```
probabilities[numInstances() - 1] = sumOfWeights; 
```

只是确保最后一个（最大）元素实际上是`sumOfWeights`并且没有被某种舍入错误抛出。

**编辑**这是关于整个方法如何工作的理论。前半部分（直到声明`k`and `l`）生`probabilities`成为（非独立）随机数的向量，这些随机数正在增加，最后一个是权重之和。这是区间 [0, sumOfWeights] 的随机分区。现在权重本身是同一区间的一个分区。隐式地，每个现有实例都分配给基于权重的分区的每个元素。

该方法的后半部分简单地沿着权重划分（使用 index `l`）。它对`l`^(第 th 个)实例的采样次数与随机分区落在指定权重分区中的次数一样多。我意识到这个解释的措辞有点尴尬。也许正在发生的事情的图片会有所帮助：

```
0                                                   sumOfWeights
↓                                                       ↓

|     *   *         *       *               * *     *   * ← Random partition
|    ^      ^           ^      ^     ^     ^         ^  ^ ← Weights partition

   0     2        1        1       0     0       3     1  ← # of samples 
```

该方法的后半部分简单地计算`*`每个权重区间（由 表示）中有多少随机分区边界（由 表示`^`）。稍微考虑一下应该会让您相信这是根据给定权重随机抽样并替换的有效方法。

# oauth-2.0 - 适用于桌面和移动应用程序的 OAuth 2.0

> ID：13753969
> 
> 赞同：9
> 
> 时间：2012-12-06T22:43:02.170
> 
> 标签：oauth-2.0

我正在研究 OAuth 2.0 协议。

我陷入了为不在 Web 服务器上运行的桌面/移动应用程序生成不记名令牌的问题。

对于 Web 应用程序，我很清楚 OAuth 2.0 协议流程。假设`myapp.com`要`protectedresource.com`代表用户 Alice 访问，然后 Alice 被重定向到，`https://protectedresource.com/oauth?redirect_uri=https://myapp.com/oauth&[...]`因此资源管理器在获得同意后，将 Alice 的浏览器重定向到一个页面，该页面将收集授权代码并使用它来获取承载令牌。

这工作正常且安全，因为`protectedresource.com`识别`myapp.com`域并仅向来自的请求释放不记名令牌`myapp.com`

如果我正在运行桌面应用程序，即使支持浏览器（即在 Windows 窗体中嵌入 HTML 查看器或类似的东西）**，我应该在同意后将 Alice 重定向到哪里？**

谁收集授权码？控制流如何变化？

有人有在桌面或 Android 上运行的 OAuth 2.0 实施示例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:18:02.273

[OAuth wiki 列出了许多](http://wiki.oauth.net/w/page/27249271/OAuth%202%20for%20Native%20Apps)您可以使用的选项，所有这些选项都有缺点。最简单的方法是您运行一个可以向用户显示令牌的 Web 应用程序，然后用户将令牌（可能还有刷新令牌）复制到您的桌面应用程序中。

如果您有足够的时间，那么您可以研究向桌面操作系统注册自定义 URI，然后将其用作`redirect_uri`从浏览器自动传输回您的应用程序。这具有最佳的用户体验。

在这些情况下，恶意应用程序很容易伪装成您的桌面应用程序，而安全性取决于您的用户不安装恶意应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-09T08:12:46.323

我有 ac# 桌面应用程序，我遇到了类似的问题。我没有得到关于如何在桌面应用程序中实现 OAuth 的正确答案。为了解决这个问题，我使用了内置的 webbrowser 控件并通过读取回调 URL 并生成令牌来读取*身份验证代码。*但几个月前 Shopify、eBay 和 QBO 等网站停止支持 IE11 和旧版本，不幸的是，内置的网络浏览器控件使用 IE11 的库，所以我再次陷入困境。

为了克服所有障碍，我实现了 c# listeners，它永久地解决了这个问题，现在我的应用程序是独立于浏览器的。

[你可以在这里](https://www.youtube.com/watch?v=tx8yzVrBbE4)观看我的完整视频，也可以从[这里](https://drive.google.com/file/d/1WZgdJn0FB2K6vT0FGxqUlEg8g24JDn-W/view)下载示例项目。

# ruby - 瘦服务器未超时

> ID：13753973
> 
> 赞同：2
> 
> 时间：2012-12-06T22:43:11.397
> 
> 标签：ruby, http, timeout, webserver, thin

Thin 的代码/文档建议默认连接超时为 30 秒。但是，当我尝试对此进行测试时，它似乎不起作用。我错过了什么？

我正在使用瘦 v1.5.0（最新）。

```
# Test this using: curl -X GET http://localhost:3000/test. You will find that the request does not
# timeout after 30s.

require 'thin'

class SimpleAdapter
  def call(env)
    sleep 100
    body = ["hello!"]
    [
      200,
     { 'Content-Type' => 'text/plain' },
      body
    ]
  end
end

server = Thin::Server.new('127.0.0.1', 3000) do
  map '/test' do
    run SimpleAdapter.new
  end
end

server.start! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:05:26.867

内联文档说明以下内容：

> 在断开连接之前传入数据到达的最大秒数。

并且 Thin 正确显示了该行为，也就是说，如果您 telnet 进入服务器：

```
telnet localhost 3000 
```

并等待 30 秒，它会断开连接。**但是**，cURL 命令已经向瘦服务器发送了一个完整的 HTTP 请求，这就是为什么永远不会达到等待**传入数据的超时时间的原因。**

# ruby - 生成 3 个加起来为 100 的正整数的每个唯一组合的最类似于 Ruby 的方式是什么？

> ID：13753977
> 
> 赞同：6
> 
> 时间：2012-12-06T22:43:38.633
> 
> 标签：ruby, function, combinations, permutation

条件：

```
a + b + c = 100
a,b,c positive integers or 0 
```

期望的输出：

```
[
  [0,0,100],
  [0,1,99 ],
  ... # all other permutations
  [99,1,0 ],
  [100,0,0]
] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T22:54:02.647

我会写：

```
(0..100).flat_map { |x| (0..100-x).map { |y| [x, y, 100-x-y] } }
#=> [[0, 0, 100], [0, 1, 99]], ..., [99, 1, 0], [100, 0, 0]] 
```

站点注释 1：这是一个经典示例，列表理解大放异彩（如果某处有条件，则更是如此）。由于 Ruby 没有 LC，我们必须对 OOP 进行典型的转换：*N-1* `flat_map`的 + *1* `map`。在 Ruby 中拥有 LC 会很棒（检查[此功能请求](http://bugs.ruby-lang.org/issues/5663)），Scala 已经证明，即使是纯 OOP 语言也能从这种语法糖中受益匪浅（尽管由于隐式的可迭代协议/方法，我可以理解开发人员的预防措施）。在一个支持它们的想象中的 Ruby 上，你会写：

```
[[x, y, 100-x-y] for x in 0..100 for y in 0..100-x] # imaginary Ruby 
```

旁注 2：假设您更喜欢内存消耗较少的解决方案（您可能不需要整个数组）。Ruby 2.0 的惰性解决方案只需要添加几个`[lazy][2]`代理：

```
(0..100).lazy.flat_map { |x| (0..100-x).lazy.map { |y| [x, y, 100-x-y] } } 
```

旁注3：为了完整起见，在@akuhn answer的行中，另一个使用枚举器的惰性解决方案：

```
Enumerator.new do |e| 
  (0..100).each { |x| (0..100-x).each { |y| e.yield([x, y, 100-x-y]) } }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T01:30:30.753

这是我的解决方案

```
for a in 0..100; for b in 0..100-a; p [a,b,100-a-b]; end; end 
```

我发现这读起来几乎像@tokland 的列表理解。如果您想在下游使用这些值而不是打印它们，请将代码放在生成器方法中

```
def generate
  return enum_for(:generate) unless block_given?
  for a in 0..100
    for b in 0..100-a
      yield [a,b,100-a-b]
    end
  end
end 
```

然后将其用作

```
generate { |a,b,c| puts [a,b,c] } 
```

或如

```
generate { |each| p each } 
```

或如

```
p generate.to_a 
```

全部打印所有生成的元组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T22:37:39.557

我想说最像 Ruby 的方式（这绝不是最有效的方式）是这样的：

```
(0..100).to_a.repeated_permutation(3).find_all{|triplet|triplet.inject(:+)==100} 
```

该链中唯一不透明的部分是`to_a`，它将 (0..100) 给出的范围对象转换为数组（范围是惰性的，不适用于`repeated_permutation`）。

# webserver - PHP邮件不发送消息

> ID：13753981
> 
> 赞同：1
> 
> 时间：2012-12-06T22:43:59.557
> 
> 标签：webserver, php

我意识到这个问题的标题被过度使用了，但我找不到我的问题的答案。这可能是因为我对 PHP 不太了解并且我不理解这个问题，或者因为我有一个不同的问题，但我想我会发布它，看看是否有人可以帮助我。

我为我所在城市的当地教堂开发了一个网站，并在我的计算机上制作了该网站，将其作为子目录放在我的网站上并进行了全部测试。效果很好。客户想要的一件事是有一个可以发送电子邮件的电子邮件表单。我做到了，一切都很好。

然后我把它上传到教堂服务器上，我觉得它也很好。但后来我们决定尝试使用电子邮件表单，但由于某种原因它不起作用。

我通过让用户使用单选按钮选择收件人（牧师、办公室经理等）来制作电子邮件表单，这将改变电子邮件表单的操作。我只是做了这样的事情：

```
if (recipent == "pastor") {
    document.forms[0].action = "../scripts/php/pastor_contact.php";
} else if (recipent == "pastoralAssist") {
    document.forms[0].action = "../scripts/php/pastoral_assist_contact.php";    
} else if (recipent == "famMinistry") {
    document.forms[0].action = "../scripts/php/sacra_assist_contact.php";   
} else if (recipent == "sacraAssist") {
    document.forms[0].action = "../scripts/php/fam_ministry_contact.php";   
} 
```

我知道这不是最干净的，但效果很好。然后，php 文件看起来都与此非常相似（只是一封不同的电子邮件）”

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="From: $name \n Email: $email \n Phone Number: $phone \n Message: $message";
$recipient = "email@example.com";
$subject = $_POST['subject'];
$mailheader = "$subject \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("There seems to be an error with this form. Sorry about the inconveince. We are working to get this fixed.");
header('Location: ../../quickylinks/message_sent.html') ;
?> 
```

简而言之，它的作用是从电子邮件表单中收集信息，将其作为电子邮件提交，然后将用户重定向到“已发送消息”页面。这适用于我的服务器，但不适用于他们的服务器，所以我相信这与他们的服务器有关。

您可以在此处查看他们的服务器信息，并[在此处](http://dejongdesign.ca/working.php)[查看](http://holyfamilyregina.com/working.php)我的服务器信息。

当用户发送消息时，他们收到“*此表单似乎有错误。很抱歉给您带来不便。我们正在努力解决此问题。* ”尽管代码相同，但电子邮件没有通过我的服务器，它在那里工作正常。

我最初的想法是他们的服务器上没有安装 PHP（很少见，但确实发生了）。但它是。所以我想也许它已经安装了，但是“邮件”功能被禁用了。所以我尝试了以下php代码：

```
<?php 
if (function_exists('mail')) { 
    echo 'mail() is available'; 
} else { 
    echo 'mail() has been disabled'; }
?> 
```

它返回“mail() 可用”。

所以现在我被卡住了，我不知道问题可能出在哪里。正如我所说，我还不是很擅长 PHP，所以如果有人能给出详细的答案，我将非常感激！

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:54:26.047

服务器可能没有正确安装或配置邮件程序。要查看正在发生的事情并解决客户端服务器上的问题，您需要对其进行 root 访问，并且您可能需要**ssh 连接到他们的服务器以检查 / 安装 / 配置什么是必要的**。

您应该做的第一件事是使用 ssh 登录到他们的服务器（如果它只是一个共享主机，则可能不适用），然后尝试 php cli 界面，然后尝试一些东西。

如果没有任何效果，您将需要尝试在他们的服务器上编辑**php.ini**文件，以告知 php 它应该使用什么程序来发送邮件。

如果这没有给您任何帮助，您将需要安装和配置**邮件程序**，因为它可能无法在他们的服务器上正常工作。

**编辑：**

乍一看，他们的服务器的**sendmail_path**根本没有任何价值。这可能意味着 php 不知道应该通过哪个程序发送邮件。

但是，您的设置显示您有**sendmail_path**设置 **/usr/sbin/sendmail -t -i**

所以在他们的服务器上编辑**php.ini**文件，**sendmail_path**（你需要知道他们服务器上 sendmail 程序的路径，显然）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:01:43.567

**您的生产服务器是一台 Windows 计算机**

在新服务器上 mail() 确实可用但未配置。

为了能够从 php 发送电子邮件，您需要编辑 php.ini 以使用 smtp 服务器。

您的开发服务器（Linux 服务器）已正确配置。您的生产服务器是一台需要配置为发送电子邮件的 Windows 计算机（编辑 php.ini）。默认情况下，Windows 没有内置电子邮件服务器，因此您必须安装一个或使用您的 ISP 提供的一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:03:18.987

我强烈建议您使用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/downloads/detail?name=PHPMailer_5.2.2.tgz)类而不是 mail() 函数。

您可以轻松配置 smtp 服务器（如您的客户端之一）并使用它来发送电子邮件。

查看 test_smtp_basic.php 示例以获取更多信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T23:02:47.530

从这里`"You can see their server information here"`您的服务器没有 sendmail 路径![在此处输入图像描述](../Images/4c93fd0e4ecc51991a747710454fd28d.png)

# java - Drools 是否适合预处理资源分配问题_

> ID：13753983
> 
> 赞同：0
> 
> 时间：2012-12-06T22:44:05.653
> 
> 标签：java, optimization, drools

我有一个很大的资源分配问题要计算。

我刚刚发现了**Drools**，我想知道它是否适合用作预处理器并根据一些用户规则生成禁止分配列表。

# 问题

我有一个优化引擎，可以**将**一些**活动**分配给一些**资源**，同时优化一些**KPI**（关键绩效指标）。

优化器将应根据某些用户提供的规则生成的禁止分配列表作为输入（除其他外）。

每个禁止规则是两个规则的“与”组合：

*   一个用于活动
*   一为资源

每个子规则本身就是对某些属性的“AND”测试列表。

这是一个规则的结构，在伪代码中

```
规则1： 
    *活动规则
      * activity.prop1 == "foo" AND
      * activity.prop2 == "bar" AND
      * ...
    *资源规则
      * resource.prop3 == "foobar" AND
      * resource.prop4 == "NULL" AND
      * ...

规则2：
   ...

```

一旦一对 [Activity,Resource] 匹配一个规则，它就应该作为输出发送，而不是针对其他规则再次测试。

此外，重要的是要注意某些规则会非常频繁地匹配，而 overs 将很少匹配（非常具体的情况）。

# 性能限制

以下是有关问题体积的一些粗略提示：

*   1000 项活动
*   200 个资源
*   50条规则

我需要在一分钟内生成禁止分配。

# 挑战

据我了解，Drools 肯定可以生成那些被禁止的分配。问题是：“他**有多聪明**”？

如果我必须自己为这个特定问题编写一个引擎，我会做一些改进：

例如，我不会生成所有可能的分配（200.000），然后尝试对其应用每个规则（50 个规则 x 200.000）。

相反，我会尝试在每条规则（规则的每一侧）上分别匹配资源和活动，然后将匹配至少一个通用规则的对组合起来。

此外，我会在每条规则上添加一些计数器，这些计数器会在每次匹配时自动递增，以便首先应用经常匹配的规则。

# 问题

Drools 的引擎是否足够聪明？还是他更聪明？

您是否有在类似问题中成功使用 Drools 的示例？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:26:18.087

您的计算中有一个错误：对于`1000`活动和`200`资源，您没有`200*1000`可能的分配，而是`200^1000`可能的分配（因此比`10^2000`可能的分配更多）。您确定您的优化引擎可以扩展这么多吗？

您是否考虑过使用[Drools Planner](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html)进行资源分配？Drools Planner 可以处理这样的分配大小并且也更大。它搜索最佳解决方案（并且可以很好地扩展），并使用 Drools 计算它评估的每个解决方案的分数（= 禁止分配数量的负数）。

# javascript - 阻止 jQuery live 影响儿童

> ID：13753984
> 
> 赞同：0
> 
> 时间：2012-12-06T22:44:27.653
> 
> 标签：javascript, jquery

我有一个DOM结构如下：

```
<div class="hotspot">
    <div class="hotspot_inner">
        <div class="hotspot_info">
            <div class="inner_box">
                <h2><%= hotspot.info.title %></h2>
                <p><%= hotspot.info.description.html_safe %></p>
            </div>
        </div>
    </div>
</div> 
```

我还有一些 CoffeeScript 将点击事件侦听器附加到任何具有类“.hotspot”的东西，这使得热点内的所有内容在点击时可见（“.hotspot_inner”和向下）。

再次单击带有“.hotspot”类的任何内容会使里面的所有内容再次不可见。

问题是，单击热点内的任何内容也会触发附加到其父级的关闭事件。

我试过 stopPropagation()，但无济于事。听说.live有这样的问题，但是因为热点是动态添加的，所以需要用到。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:07:09.283

我猜你想要的是：当你点击 .hotspot 类时，你想要切换里面的任何东西，如果你点击 .hotspot_inner 类中的任何东西（文本或其他），你不想触发 .hotspot 上的点击事件？如果是这种情况，您应该确保 stopPropagation() 在 .hotspot_inner 点击事件中。

```
 $('.hotspot_inner').click(function(event){
        event.stopPropagation();

    })​ 
```

如果这是你想要的，请看这里：http: [//jsfiddle.net/5JJEd/](http://jsfiddle.net/5JJEd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:47:58.970

检查 event.target。

```
 if (event.target.className === 'hotspot') {
        // do stuff
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:48:57.260

调用`stopPropagation()`不起作用，因为事件*已经传播*；这就是“实时”机制的工作原理。

相反，您可以做的是在某处设置一个标志，也许是在事件对象本身上。父处理程序可以检查并知道他们不应该做任何事情。

或者，您可以检查事件目标，jQuery 将其规范化为事件对象的“目标”属性。如果父处理程序发现他们不是目标，他们可以跳过该事件。这有时会变得很棘手，具体取决于您的交互模式的性质和 DOM 的结构。

您可能有兴趣了解它`.live()`已经被弃用了几年。您应该使用当前版本的库`.on()`，它结合了`.bind()`和的功能`.delegate()`。

# sql - SQL Server 2012 审计报告生成

> ID：13753991
> 
> 赞同：4
> 
> 时间：2012-12-06T22:44:49.973
> 
> 标签：sql, sql-server-2012, audit

试图确定一台服务器输出的审计文件是否可以在没有 CONTROL SERVER 访问该服务器的情况下被读取。[MSDN 文档](http://msdn.microsoft.com/en-us/library/cc280386.aspx)建议这是可能的：

> 即使数据库引擎正在写入文件，如果其他 Windows 用户有权限，他们也可以读取审计文件。数据库引擎不采用阻止读取操作的排他锁。

并且：

> 我们建议您从单独的 SQL Server 实例（例如 SQL Server Express 实例）生成审计报告，只有审计管理员或审计读者才能访问该实例。通过使用数据库引擎的单独实例进行报告，您可以帮助防止未经授权的用户获得对审计记录的访问权限。

简而言之，我可以这样做吗？

*   在 Prod DB 上配置审核以输出到文件共享
*   授予审核读者对文件共享的读取权限
*   使用来自单独数据库的 sys.fn_get_audit_file('fileshare*') 生成审计报告。

[澄清] q 的关键部分是，您能否使用 sys.fn_get_audit_file 从单独的数据库访问文件，而无需对创建审计信息的数据库进行管理员访问。这样，我们就可以将具有文件系统访问权限的审计阅读器与具有数据库管理员访问权限的 DBA 分开。很抱歉最初没有说清楚。

关于您的回答，这个查询可以从一个不相关的 SQL Mgmt Studio/DB 运行，由不是原始 DB 上的 DBA 的人运行吗？

```
SELECT 
    event_time, action_id, session_id, object_id, class_type, 
    database_principal_name, database_name, object_name, statement
FROM 
    sys.fn_get_audit_file('\\Temp\Audit\*',NULL,NULL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:48:50.953

确实，这行得通。

```
USE [master]
GO

CREATE SERVER AUDIT [SQL2012-Audit-20121214-Demo]
TO FILE 
(   FILEPATH = N'\\Temp\Audit'
    ,MAXSIZE = 2 MB
    ,MAX_FILES = 32
    ,RESERVE_DISK_SPACE = OFF
) WITH (QUEUE_DELAY = 2000,ON_FAILURE = CONTINUE)
GO

ALTER SERVER AUDIT [SQL2012-Audit-20121214-Demo] WITH (STATE = ON);

USE [Performance]
GO

CREATE DATABASE AUDIT SPECIFICATION [SQL2012-DBAudit-20121214-Demo]
FOR SERVER AUDIT [SQL2012-Audit-20121214-Demo]
ADD (SELECT,INSERT,DELETE,UPDATE,EXECUTE ON DATABASE::[Performance] BY [dbo])
WITH (STATE = ON);
GO 
```

在服务器审核和数据库审核到位并激活后，第一个审核文件立即创建，并且无法删除，因为 Windows 声明该文件正在使用中。

但是，从文件中选择始终有效。这是审计设置捕获的活动的“工作量”：

```
SELECT * INTO partition_stats_4 FROM Performance.sys.dm_db_partition_stats
SELECT * INTO partition_stats_3 FROM Performance.sys.dm_db_partition_stats
SELECT * INTO partition_stats_2 FROM Performance.sys.dm_db_partition_stats
SELECT * INTO partition_stats_1 FROM Performance.sys.dm_db_partition_stats
SELECT * INTO partition_stats   FROM Performance.sys.dm_db_partition_stats

DELETE FROM partition_stats
DELETE FROM partition_stats_1
DELETE FROM partition_stats_2
DELETE FROM partition_stats_3
DELETE FROM partition_stats_4

DROP TABLE partition_stats_4
DROP TABLE partition_stats_3
DROP TABLE partition_stats_2
DROP TABLE partition_stats_1
DROP TABLE partition_stats 
```

结果如下：

```
SELECT 
    event_time, action_id, session_id, object_id, class_type, 
    database_principal_name, database_name, object_name, statement
FROM 
    sys.fn_get_audit_file('\\Temp\Audit\*',NULL,NULL); 
```

![SQL Server 2012 - 数据库审核结果](../Images/a14751a69ae0b8399e9ea6d3e9c95313.png)

顺便说一句，这与服务器端跟踪文件的模式完全相同。我们一直在运行跟踪，并且文件是“可查询的”，没有任何问题。

审核愉快！

# php - simple_html_dom 引发警告

> ID：13753994
> 
> 赞同：0
> 
> 时间：2012-12-06T22:45:01.477
> 
> 标签：php, html, simple-html-dom

使用**simple_html_dom**它只是解析网页标题然后引发警告；

错误日志警告：file_get_contents

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<link rel="stylesheet" href="http://www.rxproxy.com/index.php?rxproxyuri=aHR0cDovL3N0YXRpYy5pc29odW50LmNvbS9qcy9pc29odW50LmNzcw%3D%3D" type="text/css" />
<link rel="shortcut icon" href="http://www.rxproxy.com/index.php?rxproxyuri=aHR0cDovL3N0YXRpYy5pc29odW50LmNvbS9mYXZpY29uLmljbw%3D%3D"> 
```

在 simple_html_dom.php 的第 75 行

我注意到第二个快捷方式图标没有结束标签，这会引发错误吗？

错误日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:49:59.033

您的

```
 <!doctype html> 
```

应该是这样的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T22:47:49.523

您缺少两个样式表链接的开始标记 (<)。编辑：编辑后你有开始标签。

是的，您需要关闭第二个。

# php - PHP中有数学集的任何表示吗？

> ID：13753997
> 
> 赞同：2
> 
> 时间：2012-12-06T22:45:10.760
> 
> 标签：php, set

许多语言都有一个“集合”数据结构，它通常只包含来自特定对象集合的唯一值。例如，如果将整数 1、4、5、1、2 和 6 添加到集合中，最终该集合实际上只包含 1、4、5、2 和 6。

我没有在 PHP 中观察到任何这样的集合。语言中是否有这样的集合，或者是否需要自定义滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:45:10.760

我没有注意到 PHP 语言中有任何类型的“Set”集合，所以我推出了自己的方法来模拟集合。我接近一个像哈希表一样的集合。默认情况下，哈希表中的键属于一个集合。你可以利用它来发挥你的优势。

例如，假设我有一个随机生成的整数数组`$random_integers`。以下将产生包含在中的唯一值数组`$random_integers`：

```
$random = array(1,1,1,3,4,5,3,45,7);
$set = array();

foreach($random as $key => $value) {
  $set[$value] = 1;
}

$set = array_keys($set);

print_r($random);
print_r($set); 
```

`array_keys`是 PHP 中包含的一个函数。您可以使用它从哈希表中提取所有键，这相当于一个集合。

这里的一个陷阱是只有整数和字符串可以用作数组键。因此，如果您希望将它们包含在您的集合中，您正在使用的任何对象都需要某种字符串或整数表示。

另请注意，在我的示例中，您不需要采取额外的步骤来提取数组键。 `$set`已经是一套了。`array_keys`如果您碰巧需要它们，调用只是为您提供唯一值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:54:21.770

怀疑有什么内置的，但实现起来很简单：

```
<?

$set = array(1, 4, 5, 1, 2, 6); // original set
$set = array_unique($set);
//$set = array_values($set); // add this to reset the keys
print_r($set); // returns 1, 4, 5, 2 and 6. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:56:37.660

没有像这样的集合是 PHP 核心的一部分。您可以通过使用数组键或使用[`SplObjectStorage`](http://php.net/manual/en/class.splobjectstorage.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T09:50:46.880

在过去，Turbo Pascal 支持 SET 类型来存储最大 255 的值。使用的机制非常简单，使用 32 字节的数组，集合中的每个值都存储在 32*8=256 位中的一个中这个数组。值 0 存储在数组 [0] 的位 0 中，值 1 存储在数组 [0] 的位 1 中。值 255 存储在数组 [31] 的位 7 中：

定位值字节和位：

```
BYTEPOS = $value >> 3     (0..7 => 0, 8..15 => 1 etc)
BITPOS  = $value & 7      (0,8,16 ... => bit 0  1,9,17 => bit 1 etc) 
```

空集[0..255]；

```
$theSET = array( 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ); 
```

添加一个值：

```
$theSET[ $value >> 3 ] = $theSET [ $value >> 3 ] | (1 << ($value & 7)); 
```

删除：

```
$theSET[ $value >> 3 ] = $theSET [ $value >> 3 ] & ~(1 << ($value & 7)); 
```

检查：

```
inSET = ($theSET [ $value >> 3 ] & (1 << ($value & 7)) == (1 << ($value & 7)); 
```

两个集合上的操作可以作为迭代来完成，

结合：

```
$SetA[$i] = $SetA[$i] | $SetB[$i] 
```

只有不在 SetB 中的值：

```
$SetA[$i] = $SetA[$i] & (~$SetB[$i]) 
```

等