# StackOverflow 问答 14314000-14314999

# mamp - MAMP Pro 无法删除虚拟主机

> ID：14314003
> 
> 赞同：3
> 
> 时间：2013-01-14T06:10:09.707
> 
> 标签：mamp

嗨，我在 Mamp Pro 上设置了一个虚拟主机，这样我就可以在本地网站上工作，但是从 Mamp Pro Gui 中删除该虚拟主机后，我无法在线登录我的网站。该域仍然指向 localhost 127.0.0.1，知道如何重新访问我的在线站点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:16:49.583

编辑您的 /private/etc/hosts 文件并删除您不想再指向本地服务器的域名。

# php - 安全表单输入需要哪些功能？

> ID：14314009
> 
> 赞同：0
> 
> 时间：2013-01-14T06:10:58.737
> 
> 标签：php, forms, security, input

在我的注册表单上，我有四个输入：

```
username  
password
email address
web address 
```

无法确定真正需要所有可用的消毒方法中的哪一种：

```
strip_tags()
substr()
mysql_real_escape_string()
trim()
htmlentities()
addslashes()
. . . (you may add more) 
```

在某处我发现一个函数是 a `must have`，在某处这个函数被声明为`deprecated`or`less valuable the another one ...`

有人可以为上述所有四个输入创建一个优先级列表吗？

注意：`PDO - prepared statements`已经用于与数据库的通信。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T06:18:19.977

简单来说：

1.  当您将数据添加到数据库时 - 使用 PDO 的预准备语句和占位符。就是这样，不需要其他任何东西。

2.  当您从 html 页面上的任何位置输出某些内容时 - 您需要执行`htmlspecialchars($string, ENT_QUOTES, 'UTF-8');`，其中`$string`是您要以“安全”方式输出的字符串。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-01-14T06:25:04.593

首先，您需要清楚帽子，因为您喜欢消毒。

因为您使用了所有[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)，所以不需要： [mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)

如果您想拒绝您的用户使用 html，为了避免[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)，您也许应该使用 [strip_tags()](http://php.net/manual/en/function.strip-tags.php)

为了保护您的 html 显示再次不可打印字符 [htmlentities()](http://php.net/manual/en/function.htmlentities.php) 但在 UTF-8 时代它有点过时了。

对于密码输入，可以使用 [trim()](http://php.net/manual/en/function.trim.php) ，因为如果您复制带有前导/附加空格的密码，它会有所帮助。因为前景添加了空格。但并不是每个人都认为这是一个好主意，以修剪密码。

取决于您的模板系统，使用 [addlashes()](http://php.net/manual/en/function.addslashes.php) 处理预定义的输入值可能是个好主意，例如

```
<input type="text" value="<?php addslashes($value); ?>" /> 
```

因为它可以做到：

```
my value " /><script>evil things</script>< 
```

在自动完成表单中有某种 XSS。

# knockout.js - ACE editor foreach binding with knockoutJS

> ID：14314010
> 
> 赞同：1
> 
> 时间：2013-01-14T06:11:06.520
> 
> 标签：knockout.js

-> I would like to integrate the Ace JavaScript editor into KnockoutJS.

-> Unfortunately, it seems I've reached my limits on Javascript so I'm turning to JavaScript Sith Masters here.

-> The HTML is div with "id="editor" data-bind="ace:Value".

-> Value is the actual value for the textEditor from the viewModel.

The start of my custom binding handler for Ace:

```
ko.bindingHandlers.ace = {
        init: function (element, valueAccessor) {
            var editor = ace.edit(element.id);
            var eitorValue = valueAccessor();

            editor.setTheme("ace/theme/textmate");
            editor.getSession().setMode("ace/mode/html");

            //handle edits made in the editor
            editor.getSession().on('change', function (e) {
                if (ko.isWriteableObservable(eitorValue)) {
                    eitorValue(editor.getValue());

                }
            });
        },
        update: function (element, valueAccessor) {

        }
    }

}); 
```

-> It only works when first loaded not at the time of edit when the value is assign to -> editor.

-> For Reference i am trying to achieve something like tinyMce as shown

```
ko.bindingHandlers.tinymce = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        var options = allBindingsAccessor().tinymceOptions || {};
        var modelValue = valueAccessor();

        //handle edits made in the editor
        options.setup = function(ed) {
            ed.onChange.add(function(ed, l) {
                if (ko.isWriteableObservable(modelValue)) {
                   modelValue(l.content);   
                }
            });
        };

        //handle destroying an editor (based on what jQuery plugin does)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).parent().find("span.mceEditor,div.mceEditor").each(function(i, node) {
                var ed = tinyMCE.get(node.id.replace(/_parent$/, ""));
                if (ed) {
                    ed.remove();
                }
            });
        });   

        $(element).tinymce(options);

    },
    update: function(element, valueAccessor, allBindingsAccessor, context) {
        //handle programmatic updates to the observable
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).html(value);
    } 
```

# machine-learning - report random forest results

> ID：14314014
> 
> 赞同：3
> 
> 时间：2013-01-14T06:11:46.810
> 
> 标签：machine-learning, random-forest

This is a question with respective to the output of Random Forest in R.

I understand what the `gini`, `impurity`, and `mean accuracy plots` represent. I have a large number of different response variables and have been computing **MANY** different random forests (separately on each course).

The resulting top predictors are usually fairly similar between the two output plots (mean accuracy and node purity). What confuses me is I have one output with a single variable with high node purity (followed by a huge break), but this same variable on the mean accuracy plot is VERY low. Almost at the bottom.

If I'm interpreting what I've read and what other answers have already been given on this forum correctly,

*   how can the same variable have high importance (node purity) but very low accuracy? This doesn't seem to make sense to me and makes me suspect of my results.

Any insight would be greatly appreciated!

# c++ - 检查 C++ 中是否存在关键字

> ID：14314018
> 
> 赞同：4
> 
> 时间：2013-01-14T06:12:21.637
> 
> 标签：c++

我正在编译一个使用 C++ 关键字“覆盖”的 C++ 程序。

我在 Visual Studio 2010 中编译成功，但现在需要在 g++ 上编译。只有 g++ 4.6 可用（并且您需要 g++ 4.7 来支持“覆盖”）。

真正的解决方案是安装 g++ 4.7（现在正在发生），但这让我开始思考。是否有编译时检查以查看是否支持关键字？

我试过：

```
#ifndef override
    #define override
    #ifdef BUILD_WINDOWS
        #pragma message("The \"override\" keyword is not supported on this compiler!  Ignoring it!")
    #else
        #warning "The \"override\" keyword is not supported on this compiler!  Ignoring it!"
    #endif
#endif 
```

这不起作用，因为“覆盖”不是符号。

我想要更通用的东西，而不是简单地检查编译器版本以查看它是否是支持关键字的版本之一。如果有的话，如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:20:17.633

我不知道从程序中检查特定关键字的方法。我能提供的最好的方法是检查特定编译器/编译器版本或语言/语言版本的特殊预定义宏。

对于前者，有

```
#if defined __GNUC__ && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 7)) 
```

对于后者，有

```
#if __cplusplus >= 201103L 
```

# python - How to tell if a file is being written to a Windows CIFS share from Linux

> ID：14314019
> 
> 赞同：9
> 
> 时间：2013-01-14T06:12:22.390
> 
> 标签：python, linux, share, cifs

I'm trying to write a script to take video files (ranging from several MB to several GB) written to a shared folder on a Windows server.

Ideally, the script will run on a Linux machine watching the Windows shared folder at an interval of something like every 15-120 seconds, and upload any files that have fully finished writing to the shared folder to an FTP site.

I haven't been able to determine any criteria that allows me to know for certain whether a file has been fully written to the share. It seems like Windows reserves a spot on the share for the entire size of the file (so the file size does not grow incrementally), and the modified date seems to be the time the file started writing, but it is not incremented as the file continues to grow. LSOF and fuser do not seem to be aware of the file, and even Samba tools don't seem to indicate it's locked, but I'm not sure if that's because I haven't mounted with the correct options. I've tried things like trying to open the file or rename it, and the best I've been able to come up with is a "Text File Busy" error code, but this seems to cause major delays in file copying. Naively uploading the file without checking to see if it has finished copying not only does not throw any kind of error, but actually seems to upload nul or random bytes from the allocated space to the FTP resulting in a totally corrupt file (if the network writing process is slower than the FTP) .

I have zero control over the writing process. It will take place on dozens of machines and consist pretty much exclusively of Windows OS file copies to a network share.

I can control the share options on the Windows server, and I have full control over the Linux box. Is there some method of checking locks on a Windows CIFS share that would allow me to be sure that the file has completely finished writing before I try to upload it via FTP? Or is the only possible solution to have the Linux server locally own the share?

## Edit

The tldr, I'm really looking for the equivalent of something like 'lsof' that works for a cifs mounted share. I don't care how low level, though it would be ideal if it was something I could call from Python. I can't move the share or rename the files before they arrive.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:37:55.090

那这个呢？：

将 Windows 共享更改为指向为此目的而保留的实际 Linux 目录。然后，使用简单的 Linux 脚本，您可以轻松确定是否有任何文件有任何作者。一旦有文件未被写入，请将其复制到 windows 文件夹——如果需要的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T21:32:12.040

我以前遇到过这个问题，我不确定我的方法是不是最好的方法，而且它是最明确的一个 hacky 修复，但我使用了睡眠间隔和文件大小检查，（如果正在写入，我希望文件会增长至...）

就我而言，我想知道不仅文件没有被写入，而且 Windows 共享也没有被写入......

我的代码是；

```
while [ "$(ls -la "$REMOTE_CSV_DIR"; sleep 15)" != "$(ls -la "$REMOTE_CSV_DIR")" ]; do
    echo "File writing seems to be ocuring, waiting for files to finish copying..."
done 
```

（ls -la 包括以位为单位的文件大小......）

# linux - 为什么 Linux/gnu 链接器选择地址 0x400000？

> ID：14314021
> 
> 赞同：19
> 
> 时间：2013-01-14T06:12:24.067
> 
> 标签：linux, x86, x86-64, ld, elf

我正在 Linux x86_64 上试验 ELF 可执行文件和 gnu 工具链：

我已经链接并（手动）剥离了“Hello World”测试：

```
 .global _start
        .text
_start:
        mov     $1, %rax
        ... 
```

变成一个 267 字节的 ELF64 可执行文件...

```
0000000: 7f45 4c46 0201 0100 0000 0000 0000 0000  .ELF............
0000010: 0200 3e00 0100 0000 d400 4000 0000 0000  ..>.......@.....
0000020: 4000 0000 0000 0000 0000 0000 0000 0000  @...............
0000030: 0000 0000 4000 3800 0100 4000 0000 0000  ....@.8...@.....
0000040: 0100 0000 0500 0000 0000 0000 0000 0000  ................
0000050: 0000 4000 0000 0000 0000 4000 0000 0000  ..@.......@.....
0000060: 0b01 0000 0000 0000 0b01 0000 0000 0000  ................
0000070: 0000 2000 0000 0000 0000 0000 0000 0000  .. .............
0000080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000b0: 0400 0000 1400 0000 0300 0000 474e 5500  ............GNU.
00000c0: c3b0 cbbd 0abf a73c 26ef e960 fc64 4026  .......<&..`.d@&
00000d0: e242 8bc7 48c7 c001 0000 0048 c7c7 0100  .B..H......H....
00000e0: 0000 48c7 c6fe 0040 0048 c7c2 0d00 0000  ..H....@.H......
00000f0: 0f05 48c7 c03c 0000 0048 31ff 0f05 4865  ..H..<...H1...He
0000100: 6c6c 6f2c 2057 6f72 6c64 0a              llo, World. 
```

它有一个程序头 (LOAD) 并且没有节：

```
There are 1 program headers, starting at offset 64

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x000000000000010b 0x000000000000010b  R E    200000 
```

这似乎在地址 0x400000 处加载整个文件（文件偏移量 0 到 0x10b - elf 标头和所有文件）。

入口点是：

```
 Entry point address:               0x4000d4 
```

对应于文件中的 0xd4 偏移量，我们可以看到该地址是机器码的开始（`mov $1, %rax1`）

我的问题是 gnu 链接器为什么（如何）选择`0x400000`将文件映射到的地址？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T11:46:26.783

起始地址通常由链接描述文件设置。

例如，在 GNU/Linux 上，`/usr/lib/ldscripts/elf_x86_64.x`我们看到：

```
...
PROVIDE (__executable_start = SEGMENT_START("text-segment", 0x400000)); \
    . = SEGMENT_START("text-segment", 0x400000) + SIZEOF_HEADERS; 
```

该值是该平台上函数`0x400000`的默认值。`SEGMENT_START()`

您可以通过浏览链接器手册了解有关链接器脚本的更多信息：

```
% info ld Scripts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-26T09:17:28.580

任务的虚拟地址空间的页面零保持未映射，因此可以通过导致 SIGSEGV 的页面错误异常捕获空指针引用。4 MB 适合“大页面”粒度（与“普通页面”粒度 4 KB 相对） - 以 4 MB 页面粒度的设置，0x000000 到 0x3FFFFF 地址范围未映射，使 0x400000 成为任务虚拟地址空间中的第一个有效地址.

# constructor - What specifically is use of Constructors in PHP?

> ID：14314023
> 
> 赞同：0
> 
> 时间：2013-01-14T06:12:33.190
> 
> 标签：constructor

I need some explaination of what specifically is the benefit of constructors in PHP, I already know how constructors work but I am confused in understanding why and where are constructors used in PHP, any simple examples may help me understand well and will be highly appreciated, Thankyou!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T13:49:23.987

构造函数的想法是确保对象“准备好”可以使用。

```
<?php
class Person {
    function __construct($name, $gender) {
        $this->name = $name;
        $this->gender = $gender;
    }
}

$Fred = new Person('Fred', 'male');
?> 
```

通过使用构造函数，您可以指定对象*所需*的值，但可选属性可以留到以后。在上面的示例中，它确保每个实例`Person`都有名称和性别，允许我们编写可能需要名称和/或性别的方法，而不必担心它们是否已被初始化。该示例并非万无一失，您仍然可以为任一值传入一个空字符串，但是在构造函数中您可以进行检查以确保不会发生这种情况，甚至将输入限制为某些值。您也可以使其默认为某些值。

每次创建新的对象定义时都应该使用构造函数。*考虑对象必须*具有哪些值，并强制它们在构造函数中声明。

# postgresql - 嵌入式 PostgreSQL for Java JUnit 测试

> ID：14314026
> 
> 赞同：50
> 
> 时间：2013-01-14T06:12:44.180
> 
> 标签：postgresql, maven, junit, embedded-database, database-driven

是否有嵌入式 PostgreSql 以便我们可以对 PostgreSql 驱动的应用程序进行单元测试？

由于 PostgreSql 有一些方言，所以最好使用嵌入式 PostgreSql 本身，而不是使用其他嵌入式数据库。

嵌入并不一定意味着它必须嵌入到 JVM 进程中。它也不一定需要使用内存中的持久性。它应该由依赖管理（Maven、Gradle）自动加载，以便单元测试可以在每台机器上运行，而无需安装和配置本地 PostgreSQL 服务器。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-04-12T17:19:25.483

这是一个“嵌入式”PostgresSQL 服务器，专为 Java 单元测试而设计：

[https://github.com/yandex-qatools/postgresql-embedded](https://github.com/yandex-qatools/postgresql-embedded)

> 嵌入式 postgresql 将为在**单元测试**中运行 postgres 二进制文件提供一种平台中立的方式。大部分代码都是从[Flapdoodle OSS 的嵌入过程中制作的](https://github.com/flapdoodle-oss/de.flapdoodle.embed.process)

[顺便说一句， Mongo](https://github.com/flapdoodle-oss/de.flapdoodle.embed.mongo)、[Redis](https://github.com/flapdoodle-oss/de.flapdoodle.embed.redis)、[Memcached](https://github.com/flapdoodle-oss/de.flapdoodle.embed.memcached)和[nodejs](https://github.com/flapdoodle-oss/de.flapdoodle.embed.nodejs)也存在类似的项目。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-14T06:27:16.750

不，从进程内可加载数据库即库的意义上说，没有嵌入式 PostgreSQL。PostgreSQL 是面向进程的；每个后端都有一个线程，它会产生多个进程来完成工作。作为图书馆没有意义。

[H2 数据库](http://www.h2database.com/)支持[PostgreSQL SQL 方言的有限子集](http://www.h2database.com/html/features.html#compatibility)和 PgJDBC 驱动程序的使用。

你*可以*做的是[`initdb`一个新的临时数据库](http://www.postgresql.org/docs/current/static/app-initdb.html)，[`pg_ctl`](http://www.postgresql.org/docs/current/static/app-pg-ctl.html)在一个随机端口上启动它，这样它就不会与其他实例冲突，运行你的测试，然后`pg_ctl`用来停止它，最后删除临时数据库。

我*强烈建议您**在非默认端口上*运行临时 postgres ，这样您就不会冒险与运行测试的机器上任何本地安装的 PostgreSQL 发生冲突。

（在[ecpg的意义上](http://www.postgresql.org/docs/current/static/ecpg.html)*有*“嵌入式 PostgreSQL ，本质上是一个嵌入在 C*源代码中的 PostgreSQL**客户端*，作为基于预处理器的 C 语言扩展。它仍然需要一个正在运行的服务器，而且使用起来有点讨厌，不推荐。它主要存在于使从各种其他数据库的移植更容易。）

 *** * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-12-13T10:52:25.500

我尝试了@btiernay (yandex-qatools) 建议的项目。我花了好几天的时间，没有任何冒犯，这是过度设计的解决方案，在我的情况下不起作用，因为我想从内部存储库下载二进制文件而不是去公共互联网。理论上它支持它，但实际上它不支持。

# OpenTable 嵌入式 PostgreSQL 组件

我最终使用了[otj-pg-embedded](https://github.com/opentable/otj-pg-embedded)，它就像一个魅力。它在评论中提到，所以我想我也会在这里提到它。

我将它用作独立数据库，而不是通过规则用于单元测试和本地开发。

**依赖：**

```
<dependency>
    <groupId>com.opentable.components</groupId>
    <artifactId>otj-pg-embedded</artifactId>
    <version>0.7.1</version>
</dependency> 
```

**代码：**

```
@Bean
public DataSource dataSource(PgBinaryResolver pgBinaryResolver) throws IOException {
    EmbeddedPostgres pg = EmbeddedPostgres.builder()
        .setPgBinaryResolver(pgBinaryResolver)
        .start();

    // It doesn't not matter which databse it will be after all. We just use the default.
    return pg.getPostgresDatabase();
}

@Bean
public PgBinaryResolver nexusPgBinaryResolver() {
    return (system, machineHardware) -> {
        String url = getArtifactUrl(postgrePackage, system + SEPARATOR + machineHardware);
        log.info("Will download embedded Postgre package from: {}", url);

        return new URL(url).openConnection().getInputStream();
    };
}

private static String getArtifactUrl(PostgrePackage postgrePackage, String classifier) {
    // Your internal repo URL logic
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-21T20:52:17.147

您可以使用 PostgreSQL 的[容器](https://hub.docker.com/_/postgres)实例。

由于旋转容器只需几秒钟，这对于单元测试应该已经足够了。此外，如果您需要保存数据，例如为了调查，您不需要保存整个容器，只需保存可以映射到容器外部的数据文件。

可以在[此处](https://www.andreagrandi.it/2015/02/21/how-to-create-a-docker-image-for-postgresql-and-persist-data)找到如何执行此操作的示例之一。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-12T17:58:45.893

如果您希望从集成（或类似）测试套件运行 postgres 的进程内版本，那么[postgresql-embedded](https://github.com/yandex-qatools/postgresql-embedded)对我来说工作得很好。

我写了一个[小的 maven 插件](https://github.com/aramcodz/embedded-postgres-maven-plugin)，它可以用作一个 maven 包装器，围绕一个 postgresql-embedded 的分叉版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-12T12:56:12.423

我在测试中使用 PostgreSQL 的[容器](https://hub.docker.com/_/postgres)实例。 [https://www.testcontainers.org/#about](https://www.testcontainers.org/#about) [https://www.testcontainers.org/modules/databases/jdbc/](https://www.testcontainers.org/modules/databases/jdbc/)

依赖项：

```
 <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-api</artifactId>
            <version>5.7.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-params</artifactId>
            <version>5.7.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-engine</artifactId>
            <version>5.7.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.testcontainers</groupId>
            <artifactId>testcontainers</artifactId>
            <version>1.15.3</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.testcontainers</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>1.15.3</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.testcontainers</groupId>
            <artifactId>postgresql</artifactId>
            <version>1.15.3</version>
            <scope>test</scope>
        </dependency> 
```

并进行测试：

```
@SpringBootTest
@ActiveProfiles({"test"})
@Testcontainers
class ApplicationTest {
    @Container
    static PostgreSQLContainer<?> postgreSQL = new PostgreSQLContainer<>("postgres:12.7");

    @DynamicPropertySource
    static void postgreSQLProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.datasource.username", postgreSQL::getUsername);
        registry.add("spring.datasource.password", postgreSQL::getPassword);
    }

    @Test
    void someTests() {

    } 
```

在 application-test.yml 中：

```
source:
  datasource:
    url: jdbc:tc:postgresql:12.7:///databasename 
```**

# ruby-on-rails-3 - 在两个表上使用连接和条件进行活动记录查询

> ID：14314027
> 
> 赞同：0
> 
> 时间：2013-01-14T06:12:53.777
> 
> 标签：ruby-on-rails-3, activerecord

我想使用活动记录进行此查询，以便使查询免受注入。数据库是 Postgresql。Ruby on Rails 3.2.11

```
 def find_possible_duplicates(last_name, date_of_birth, organisation_id)
    find_by_sql( 'select c.* from clients c' +
                 ' join locations l on c.location_id = l.id' +
                 " where c.last_name ILIKE #{last_name}" +
                 " and c.date_of_birth = #{date_of_birth}" +
                 " and l.organisation_id = #{organisation_id}" 
 end 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:27:10.593

以下是 Active Record 查询：

```
 Client.select('clients.*').
 joins('join locations on clients.location_id=locations.id').
 where('last_name like ? and date_of_birth =? and organisation_id = ?',last_name,date_of_birth,organisation_id) 
```

# django - Global name user_id not defined in Django?

> ID：14314028
> 
> 赞同：0
> 
> 时间：2013-01-14T06:12:55.527
> 
> 标签：django

I have a login and query function like this:

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        username1 = ''.join(username)
        password = request.POST['password']
        password = ''.join(password)
        password1 = hashlib.sha1(password).hexdigest()
        user = authenticate(username=username1, password=password1)
        global user_id 
        user_id = request.user.id
        if user is None:
            return HttpResponseRedirect('/login_backend/')
        else:
            return HttpResponseRedirect('/overview/')
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request))

def show_files(request):
    b = File.objects.get(id=user_id) #Get the user id from session .delete() to use delete
    return render_to_response('index.html',  {'result': b}, context_instance=RequestContext(request) 
```

I am getting this error:

```
Exception Type: NameError at /overview/
Exception Value: global name 'user_id' is not defined 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:23:24.817

Doing`global user_id`不会声明全局变量。它只是告诉python这个变量是一个全局范围变量。我不喜欢你试图存储`user_id`在全局变量中。`request.user.id`始终使用您的视图访问当前用户 ID 。

你认为的这段代码`log_backend`也是错误的：

```
global user_id 
user_id = request.user.id # user does not exists in the request because user was trying to logged in 
```

删除它你不需要它。此外，您还需要这样做`login(request, user)`，`authenticate`因为`authenticate`功能只是检查提供的用户名和密码是否正确。

```
user = authenticate(username=username1, password=password1)
login(request, user) 
```

# ruby-on-rails-3 - In Rails, what is the best way to return a RecordNotFound Error from a Model.find call in JSON?

> ID：14314029
> 
> 赞同：1
> 
> 时间：2013-01-14T06:13:05.770
> 
> 标签：ruby-on-rails-3, json, api

What should be the right response for a RecordNotFound Error when doing something like this:

```
def destroy
    @post = current_user.posts.find(params[:id])
    @post.destroy

    head :no_content
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:52:15.390

你可以这样写：

```
def destroy
  @post = current_user.posts.find(params[:id])
  rescue ActiveRecord::RecordNotFound
  flash[:notice] = "Record Not Found"
  @post .destroy

  head :no_content
end 
```

# java - 如何在程序中更改蜡染中 SVG 图像的属性？

> ID：14314035
> 
> 赞同：1
> 
> 时间：2013-01-14T06:14:02.953
> 
> 标签：java, svg, batik

我希望能够在程序运行时通过按下按钮来更改 SVG 文档的属性（例如，通过更改填充颜色将黑色方块变为蓝色）。这是我的代码：

```
 this.addSVGDocumentLoaderListener(new SVGDocumentLoaderAdapter() {
    @Override
    public void documentLoadingCompleted(SVGDocumentLoaderEvent e) {
      setupSVGDocument();

    }});

}
private SVGDocument doc;
private void setupSVGDocument(){
    doc = this.getSVGDocument();
} 
```

然后我希望能够使用文档通过 id 获取元素并在按下这样的按钮时更改元素的属性：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
         el = doc.getElementById("statusColor");
        el.setAttributeNS(null, "stop-color", "green");

    } 
```

图形不会更新！请帮忙！

# linux-kernel - 从 S3C6410 板引导时无法在 unknown-block(0,0) 上挂载 root fs

> ID：14314036
> 
> 赞同：3
> 
> 时间：2013-01-14T06:14:05.877
> 
> 标签：linux-kernel, embedded-linux

我有一个 S3C6410 板。包中的默认 Linux 是 2.6.28 并且工作正常。我想用更新的内核升级它。我抓住了 buildroot 2012.11 版。然后我得到了 DVD 中的默认配置文件并用它编译了内核 3.6.8。引导加载程序和根文件系统是相同的旧系统。现在当我启动内核时，我得到了这个错误：

```
VFS: Cannot open root device "mtdblock2" or unknown-block(0,0): error -19
Please append a correct "root=" boot option; here are the available partitions:
1f00            8192 mtdblock0  (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[<c0018528>] (unwind_backtrace+0x0/0xf0) from [<c03977d4>] (panic+0x78/0x1b8)
[<c03977d4>] (panic+0x78/0x1b8) from [<c04f0bbc>] (mount_block_root+0x178/0x22c)
[<c04f0bbc>] (mount_block_root+0x178/0x22c) from [<c04f0e54>] (mount_root+0xe8/0x10c)
[<c04f0e54>] (mount_root+0xe8/0x10c) from [<c04f0fcc>] (prepare_namespace+0x154/0x1ac)
[<c04f0fcc>] (prepare_namespace+0x154/0x1ac) from [<c04f0874>] (kernel_init+0x16c/0x1a8)
[<c04f0874>] (kernel_init+0x16c/0x1a8) from [<c001424c>] (kernel_thread_exit+0x0/0x8) 
```

这是我的内核配置文件：

```
CONFIG_ARM=y
CONFIG_SYS_SUPPORTS_APM_EMULATION=y
CONFIG_GENERIC_GPIO=y
CONFIG_MMU=y
CONFIG_NO_IOPORT=y
CONFIG_GENERIC_HARDIRQS=y
CONFIG_STACKTRACE_SUPPORT=y
CONFIG_HAVE_LATENCYTOP_SUPPORT=y
CONFIG_LOCKDEP_SUPPORT=y
CONFIG_TRACE_IRQFLAGS_SUPPORT=y
CONFIG_HARDIRQS_SW_RESEND=y
CONFIG_GENERIC_IRQ_PROBE=y
CONFIG_RWSEM_GENERIC_SPINLOCK=y
CONFIG_GENERIC_HWEIGHT=y
CONFIG_GENERIC_CALIBRATE_DELAY=y
CONFIG_ZONE_DMA=y
CONFIG_GENERIC_HARDIRQS_NO__DO_IRQ=y
CONFIG_VECTORS_BASE=0xffff0000
CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"

CONFIG_EXPERIMENTAL=y
CONFIG_BROKEN_ON_SMP=y
CONFIG_INIT_ENV_ARG_LIMIT=32
CONFIG_LOCALVERSION="-EmbedSky"
CONFIG_SYSVIPC=y
CONFIG_SYSVIPC_SYSCTL=y
CONFIG_LOG_BUF_SHIFT=17
CONFIG_NAMESPACES=y
CONFIG_SYSCTL=y
CONFIG_UID16=y
CONFIG_SYSCTL_SYSCALL=y
CONFIG_KALLSYMS=y
CONFIG_HOTPLUG=y
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_ELF_CORE=y
CONFIG_BASE_FULL=y
CONFIG_FUTEX=y
CONFIG_ANON_INODES=y
CONFIG_EPOLL=y
CONFIG_SIGNALFD=y
CONFIG_TIMERFD=y
CONFIG_EVENTFD=y
CONFIG_SHMEM=y
CONFIG_AIO=y
CONFIG_VM_EVENT_COUNTERS=y
CONFIG_SLUB_DEBUG=y
CONFIG_SLUB=y
CONFIG_HAVE_OPROFILE=y
CONFIG_HAVE_KPROBES=y
CONFIG_HAVE_KRETPROBES=y
CONFIG_HAVE_CLK=y
CONFIG_HAVE_GENERIC_DMA_COHERENT=y
CONFIG_SLABINFO=y
CONFIG_RT_MUTEXES=y
CONFIG_BASE_SMALL=0
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
CONFIG_KMOD=y
CONFIG_BLOCK=y
CONFIG_LBD=y
CONFIG_LSF=y

CONFIG_IOSCHED_NOOP=y
CONFIG_IOSCHED_AS=y
CONFIG_IOSCHED_DEADLINE=y
CONFIG_IOSCHED_CFQ=y
CONFIG_DEFAULT_NOOP=y
CONFIG_DEFAULT_IOSCHED="noop"
CONFIG_CLASSIC_RCU=y

CONFIG_ARCH_S3C64XX=y
CONFIG_PLAT_S3C64XX=y
CONFIG_CPU_S3C6400_INIT=y
CONFIG_CPU_S3C6400_CLOCK=y
CONFIG_S3C64XX_SETUP_I2C0=y
CONFIG_S3C64XX_DEV_FIMC0=y
CONFIG_S3C64XX_DEV_FIMC1=y
CONFIG_S3C64XX_SETUP_FIMC0=y
CONFIG_S3C64XX_SETUP_FIMC1=y
CONFIG_NONE_PWM=y
CONFIG_PLAT_S3C=y

CONFIG_S3C_BOOT_ERROR_RESET=y

CONFIG_S3C_LOWLEVEL_UART_PORT=0
CONFIG_SPLIT_ROOT_FILESYSTEM=y
CONFIG_S3C_GPIO_SPACE=0
CONFIG_S3C_GPIO_TRACK=y
CONFIG_S3C_GPIO_PULL_UPDOWN=y
CONFIG_S3C_GPIO_CFG_S3C24XX=y
CONFIG_S3C_GPIO_CFG_S3C64XX=y
CONFIG_S3C_DEV_HSMMC=y
CONFIG_S3C_DEV_HSMMC1=y
CONFIG_S3C_DEV_HSMMC2=y
CONFIG_S3C_DMA_PL080=y
CONFIG_CPU_S3C6410=y
CONFIG_S3C6410_SETUP_SDHCI=y
CONFIG_MACH_SMDK6410=y

CONFIG_SMDK6410_SD_CH0=y
CONFIG_SMDK6410_SD_CH1=y
CONFIG_SMDK6410_SD_CH2=y

CONFIG_CPU_32=y
CONFIG_CPU_V6=y
CONFIG_CPU_32v6K=y
CONFIG_CPU_32v6=y
CONFIG_CPU_ABRT_EV6=y
CONFIG_CPU_PABRT_NOIFAR=y
CONFIG_CPU_CACHE_V6=y
CONFIG_CPU_CACHE_VIPT=y
CONFIG_CPU_COPY_V6=y
CONFIG_CPU_TLB_V6=y
CONFIG_CPU_HAS_ASID=y
CONFIG_CPU_CP15=y
CONFIG_CPU_CP15_MMU=y

CONFIG_ARM_THUMB=y
CONFIG_ARM_VIC=y
CONFIG_DMABOUNCE=y

CONFIG_VMSPLIT_3G=y
CONFIG_PAGE_OFFSET=0xC0000000
CONFIG_HZ=200
CONFIG_AEABI=y
CONFIG_OABI_COMPAT=y
CONFIG_ARCH_FLATMEM_HAS_HOLES=y
CONFIG_SELECT_MEMORY_MODEL=y
CONFIG_FLATMEM_MANUAL=y
CONFIG_FLATMEM=y
CONFIG_FLAT_NODE_MEM_MAP=y
CONFIG_PAGEFLAGS_EXTENDED=y
CONFIG_SPLIT_PTLOCK_CPUS=4
CONFIG_ZONE_DMA_FLAG=1
CONFIG_BOUNCE=y
CONFIG_VIRT_TO_BUS=y
CONFIG_UNEVICTABLE_LRU=y
CONFIG_ALIGNMENT_TRAP=y

CONFIG_ZBOOT_ROM_TEXT=0
CONFIG_ZBOOT_ROM_BSS=0
CONFIG_CMDLINE="root=/dev/mtdblock2 rootfstype=yaffs2 init=/linuxrc console=ttySAC0  mem=128M"

CONFIG_FPE_NWFPE=y
CONFIG_VFP=y

CONFIG_BINFMT_ELF=y
CONFIG_HAVE_AOUT=y

CONFIG_ARCH_SUSPEND_POSSIBLE=y
CONFIG_NET=y

CONFIG_UNIX=y
CONFIG_XFRM=y
CONFIG_INET=y
CONFIG_IP_FIB_HASH=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y
CONFIG_IP_PNP_BOOTP=y
CONFIG_INET_XFRM_MODE_TRANSPORT=y
CONFIG_INET_XFRM_MODE_TUNNEL=y
CONFIG_INET_XFRM_MODE_BEET=y
CONFIG_INET_DIAG=y
CONFIG_INET_TCP_DIAG=y
CONFIG_TCP_CONG_CUBIC=y
CONFIG_DEFAULT_TCP_CONG="cubic"

CONFIG_WIRELESS=y
CONFIG_CFG80211=y
CONFIG_WIRELESS_EXT=y
CONFIG_MAC80211=m

CONFIG_MAC80211_RC_PID=y
CONFIG_MAC80211_RC_MINSTREL=y
CONFIG_MAC80211_RC_DEFAULT_PID=y
CONFIG_MAC80211_RC_DEFAULT="pid"

CONFIG_UEVENT_HELPER_PATH="/sbin/hotplug"
CONFIG_STANDALONE=y
CONFIG_PREVENT_FIRMWARE_BUILD=y
CONFIG_FW_LOADER=y
CONFIG_FIRMWARE_IN_KERNEL=y
CONFIG_EXTRA_FIRMWARE=""
CONFIG_MTD=y
CONFIG_MTD_PARTITIONS=y
CONFIG_MTD_CMDLINE_PARTS=y

CONFIG_MTD_CHAR=y
CONFIG_MTD_BLKDEVS=y
CONFIG_MTD_BLOCK=y

CONFIG_MTD_MAP_BANK_WIDTH_1=y
CONFIG_MTD_MAP_BANK_WIDTH_2=y
CONFIG_MTD_MAP_BANK_WIDTH_4=y
CONFIG_MTD_CFI_I1=y
CONFIG_MTD_CFI_I2=y

CONFIG_MTD_NAND=y
CONFIG_MTD_NAND_IDS=y
CONFIG_MTD_NAND_S3C=y

CONFIG_BLK_DEV=y
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_COUNT=16
CONFIG_BLK_DEV_RAM_SIZE=8192
CONFIG_MISC_DEVICES=y
CONFIG_HAVE_IDE=y

CONFIG_SCSI=y
CONFIG_SCSI_DMA=y
CONFIG_SCSI_PROC_FS=y

CONFIG_BLK_DEV_SD=y
CONFIG_CHR_DEV_SG=y

CONFIG_SCSI_WAIT_SCAN=m

CONFIG_SCSI_LOWLEVEL=y
CONFIG_NETDEVICES=y
CONFIG_NET_ETHERNET=y
CONFIG_MII=y
CONFIG_DM9000AEP=y

CONFIG_WLAN_80211=y
CONFIG_ZD1211RW=m
CONFIG_ZD1211RW_DEBUG=y
CONFIG_RT2X00=m
CONFIG_RT73USB=m
CONFIG_RT2X00_LIB_USB=m
CONFIG_RT2X00_LIB=m
CONFIG_RT2X00_LIB_FIRMWARE=y
CONFIG_RT2X00_LIB_CRYPTO=y
CONFIG_RT2X00_DEBUG=y

CONFIG_INPUT=y

CONFIG_INPUT_MOUSEDEV=y
CONFIG_INPUT_MOUSEDEV_PSAUX=y
CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
CONFIG_INPUT_EVDEV=y

CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYPAD_S3C64XX=y
CONFIG_INPUT_MOUSE=y
CONFIG_INPUT_TOUCHSCREEN=y
CONFIG_TOUCHSCREEN_S3C64XX=y

CONFIG_SERIO=y
CONFIG_SERIO_SERPORT=y

CONFIG_VT=y
CONFIG_CONSOLE_TRANSLATIONS=y
CONFIG_VT_CONSOLE=y
CONFIG_HW_CONSOLE=y

CONFIG_SERIAL_SAMSUNG=y
CONFIG_SERIAL_SAMSUNG_UARTS=4
CONFIG_SERIAL_SAMSUNG_CONSOLE=y
CONFIG_SERIAL_S3C6400=y
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_S3C_MEM=y
CONFIG_I2C=y
CONFIG_I2C_BOARDINFO=y
CONFIG_I2C_CHARDEV=y
CONFIG_I2C_HELPER_AUTO=y

CONFIG_I2C_S3C2410=y

CONFIG_AT24=y
CONFIG_ARCH_REQUIRE_GPIOLIB=y
CONFIG_GPIOLIB=y

CONFIG_HWMON=y
CONFIG_WATCHDOG=y

CONFIG_S3C2410_WATCHDOG=y

CONFIG_SSB_POSSIBLE=y

CONFIG_VIDEO_DEV=y
CONFIG_VIDEO_V4L2_COMMON=y
CONFIG_VIDEO_ALLOW_V4L1=y
CONFIG_VIDEO_V4L1_COMPAT=y
CONFIG_VIDEO_MEDIA=y

CONFIG_MEDIA_TUNER=y
CONFIG_MEDIA_TUNER_SIMPLE=y
CONFIG_MEDIA_TUNER_TDA8290=y
CONFIG_MEDIA_TUNER_TDA9887=y
CONFIG_MEDIA_TUNER_TEA5761=y
CONFIG_MEDIA_TUNER_TEA5767=y
CONFIG_MEDIA_TUNER_MT20XX=y
CONFIG_MEDIA_TUNER_XC2028=y
CONFIG_MEDIA_TUNER_XC5000=y
CONFIG_VIDEO_V4L2=y
CONFIG_VIDEO_V4L1=y
CONFIG_VIDEO_CAPTURE_DRIVERS=y
CONFIG_VIDEO_FIXED_MINOR_RANGES=y
CONFIG_VIDEO_HELPER_CHIPS_AUTO=y
CONFIG_V4L_USB_DRIVERS=y
CONFIG_USB_GSPCA=y
CONFIG_USB_M5602=y
CONFIG_USB_GSPCA_CONEX=y
CONFIG_USB_GSPCA_ETOMS=y
CONFIG_USB_GSPCA_FINEPIX=y
CONFIG_USB_GSPCA_MARS=y
CONFIG_USB_GSPCA_OV519=y
CONFIG_USB_GSPCA_PAC207=y
CONFIG_USB_GSPCA_PAC7311=y
CONFIG_USB_GSPCA_SONIXB=y
CONFIG_USB_GSPCA_SONIXJ=y
CONFIG_USB_GSPCA_SPCA500=y
CONFIG_USB_GSPCA_SPCA501=y
CONFIG_USB_GSPCA_SPCA505=y
CONFIG_USB_GSPCA_SPCA506=y
CONFIG_USB_GSPCA_SPCA508=y
CONFIG_USB_GSPCA_SPCA561=y
CONFIG_USB_GSPCA_STK014=y
CONFIG_USB_GSPCA_SUNPLUS=y
CONFIG_USB_GSPCA_T613=y
CONFIG_USB_GSPCA_TV8532=y
CONFIG_USB_GSPCA_VC032X=y
CONFIG_USB_GSPCA_ZC3XX=y
CONFIG_USB_ZC0301=y
CONFIG_VIDEO_SAMSUNG=y

CONFIG_VIDEO_FIMC=y
CONFIG_VIDEO_FIMC_DEBUG=y
CONFIG_OV965X=y
CONFIG_OV965X_VGA=y
CONFIG_VIDEO_FIMC_CAM_CH=0
CONFIG_VIDEO_FIMC_CAM_RESET=1
CONFIG_VIDEO_POST=y
CONFIG_VIDEO_MFC10=y
CONFIG_VIDEO_MFC_DEBUG=y
CONFIG_VIDEO_JPEG=y
CONFIG_VIDEO_TV=y
CONFIG_VIDEO_ROTATOR=y
CONFIG_VIDEO_G2D=y
CONFIG_VIDEO_G3D=y
CONFIG_VIDEO_CMM=y

CONFIG_VIDEO_SAMSUNG_MEMSIZE_FIMC=10240
CONFIG_VIDEO_SAMSUNG_MEMSIZE_POST=8192
CONFIG_VIDEO_SAMSUNG_MEMSIZE_TV=8192
CONFIG_VIDEO_SAMSUNG_MEMSIZE_MFC=6144
CONFIG_VIDEO_SAMSUNG_MEMSIZE_JPEG=4096
CONFIG_VIDEO_SAMSUNG_MEMSIZE_CMM=8192

CONFIG_FB=y
CONFIG_FB_CFB_FILLRECT=y
CONFIG_FB_CFB_COPYAREA=y
CONFIG_FB_CFB_IMAGEBLIT=y

CONFIG_FB_S3C=y
CONFIG_FB_S3C_LCD800480=y
CONFIG_FB_S3C_BPP=y
CONFIG_FB_S3C_BPP_16=y
CONFIG_FB_S3C_NUM=4
CONFIG_FB_S3C_DOUBLE_BUFFERING=y

CONFIG_DUMMY_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_FONTS=y
CONFIG_FONT_8x16=y
CONFIG_LOGO=y
CONFIG_LOGO_LINUX_CLUT224=y
CONFIG_SOUND=y
CONFIG_SOUND_OSS_CORE=y
CONFIG_SND=y
CONFIG_SND_TIMER=y
CONFIG_SND_PCM=y
CONFIG_SND_OSSEMUL=y
CONFIG_SND_MIXER_OSS=y
CONFIG_SND_PCM_OSS=y
CONFIG_SND_PCM_OSS_PLUGINS=y
CONFIG_SND_SUPPORT_OLD_API=y
CONFIG_SND_VERBOSE_PROCFS=y
CONFIG_SND_VMASTER=y
CONFIG_SND_AC97_CODEC=y
CONFIG_SND_DRIVERS=y
CONFIG_SND_ARM=y
CONFIG_SND_USB=y
CONFIG_SND_SOC=y
CONFIG_SND_SOC_AC97_BUS=y

CONFIG_SND_S3C64XX_SOC=y
CONFIG_SND_S3C64XX_SOC_SMDK6410_WM9713=y
CONFIG_SOUND_WM9713_INPUT_STREAM_MIC=y
CONFIG_SND_S3C6410_SOC_AC97=y
CONFIG_SND_SOC_WM9713=y
CONFIG_AC97_BUS=y
CONFIG_HID_SUPPORT=y
CONFIG_HID=y
CONFIG_HID_DEBUG=y

CONFIG_USB_HID=y

CONFIG_HID_A4TECH=y
CONFIG_HID_APPLE=y
CONFIG_HID_BELKIN=y
CONFIG_HID_BRIGHT=y
CONFIG_HID_CHERRY=y
CONFIG_HID_CHICONY=y
CONFIG_HID_CYPRESS=y
CONFIG_HID_DELL=y
CONFIG_HID_EZKEY=y
CONFIG_HID_GYRATION=y
CONFIG_HID_LOGITECH=y
CONFIG_HID_MICROSOFT=y
CONFIG_HID_MONTEREY=y
CONFIG_HID_PANTHERLORD=y
CONFIG_HID_PETALYNX=y
CONFIG_HID_SAMSUNG=y
CONFIG_HID_SONY=y
CONFIG_HID_SUNPLUS=y
CONFIG_USB_SUPPORT=y
CONFIG_USB_ARCH_HAS_HCD=y
CONFIG_USB_ARCH_HAS_OHCI=y
CONFIG_USB=y

CONFIG_USB_DEVICEFS=y
CONFIG_USB_DEVICE_CLASS=y

CONFIG_USB_OHCI_HCD=y
CONFIG_USB_OHCI_LITTLE_ENDIAN=y

CONFIG_USB_STORAGE=y

CONFIG_USB_SERIAL=y
CONFIG_USB_SERIAL_PL2303=m

CONFIG_USB_GADGET=y
CONFIG_USB_GADGET_VBUS_DRAW=2
CONFIG_USB_GADGET_SELECTED=y
CONFIG_USB_GADGET_S3C_OTGD=y

CONFIG_USB_S3C_OTGD=y
CONFIG_USB_GADGET_S3C_OTGD_DMA_MODE=y
CONFIG_USB_GADGET_DUALSPEED=y
CONFIG_USB_GADGETFS=m
CONFIG_USB_FILE_STORAGE=m
CONFIG_MMC=y

CONFIG_MMC_BLOCK=y
CONFIG_MMC_BLOCK_BOUNCE=y
CONFIG_SDIO_UART=y

CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_S3C=y
CONFIG_RTC_LIB=y
CONFIG_RTC_CLASS=y
CONFIG_RTC_HCTOSYS=y
CONFIG_RTC_HCTOSYS_DEVICE="rtc0"

CONFIG_RTC_INTF_SYSFS=y
CONFIG_RTC_INTF_PROC=y
CONFIG_RTC_INTF_DEV=y

CONFIG_RTC_DRV_S3C=y

CONFIG_FS_POSIX_ACL=y
CONFIG_FILE_LOCKING=y
CONFIG_GENERIC_ACL=y

CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_CODEPAGE=936
CONFIG_FAT_DEFAULT_IOCHARSET="utf-8"

CONFIG_PROC_FS=y
CONFIG_PROC_SYSCTL=y
CONFIG_PROC_PAGE_MONITOR=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_TMPFS_POSIX_ACL=y

CONFIG_YAFFS_FS=y
CONFIG_YAFFS_YAFFS1=y
CONFIG_YAFFS_YAFFS2=y
CONFIG_YAFFS_AUTO_YAFFS2=y
CONFIG_CRAMFS=y
CONFIG_NETWORK_FILESYSTEMS=y
CONFIG_NFS_FS=y
CONFIG_NFS_V3=y
CONFIG_NFS_V3_ACL=y
CONFIG_NFS_V4=y
CONFIG_ROOT_NFS=y
CONFIG_LOCKD=y
CONFIG_LOCKD_V4=y
CONFIG_NFS_ACL_SUPPORT=y
CONFIG_NFS_COMMON=y
CONFIG_SUNRPC=y
CONFIG_SUNRPC_GSS=y
CONFIG_RPCSEC_GSS_KRB5=y

CONFIG_MSDOS_PARTITION=y
CONFIG_NLS=y
CONFIG_NLS_DEFAULT="iso8859-1"
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_CODEPAGE_936=y
CONFIG_NLS_CODEPAGE_950=y
CONFIG_NLS_ASCII=y
CONFIG_NLS_ISO8859_1=y
CONFIG_NLS_UTF8=y

CONFIG_FRAME_WARN=1024
CONFIG_DEBUG_BUGVERBOSE=y
CONFIG_DEBUG_MEMORY_INIT=y
CONFIG_FRAME_POINTER=y
CONFIG_HAVE_FUNCTION_TRACER=y

CONFIG_HAVE_ARCH_KGDB=y
CONFIG_DEBUG_S3C_UART=0

CONFIG_CRYPTO=y

CONFIG_CRYPTO_ALGAPI=y
CONFIG_CRYPTO_ALGAPI2=y
CONFIG_CRYPTO_AEAD2=y
CONFIG_CRYPTO_BLKCIPHER=y
CONFIG_CRYPTO_BLKCIPHER2=y
CONFIG_CRYPTO_HASH2=y
CONFIG_CRYPTO_RNG2=y
CONFIG_CRYPTO_MANAGER=y
CONFIG_CRYPTO_MANAGER2=y

CONFIG_CRYPTO_CBC=y
CONFIG_CRYPTO_ECB=y

CONFIG_CRYPTO_MD5=y

CONFIG_CRYPTO_AES=y
CONFIG_CRYPTO_ARC4=y
CONFIG_CRYPTO_DES=y

CONFIG_CRYPTO_HW=y

CONFIG_BITREVERSE=y
CONFIG_CRC_ITU_T=y
CONFIG_CRC32=y
CONFIG_ZLIB_INFLATE=y
CONFIG_PLIST=y
CONFIG_HAS_IOMEM=y
CONFIG_HAS_DMA=y 
```

看来问题是MTD。但是内核中启用了 MTD 支持。我错过了什么吗？我已经在 NAND 闪存中安装了引导加载程序、内核和根文件系统。如果我想用 ext2 文件系统将根文件系统存储到 SD 卡，我应该改变什么？这条线将如何变化？

```
CONFIG_CMDLINE="root=/dev/mtdblock2 rootfstype=yaffs2 init=/linuxrc console=ttySAC0  mem=128M" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:59:43.680

您需要在内核配置中启用 ext2 文件系统：

```
CONFIG_EXT2_FS=y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:02:47.587

如果您希望有人帮助您，您应该发布您的整个内核启动日志。显然，/dev/mtdblock2 设备不存在，这可能表明您的内核没有为您的闪存分配一个分区。

另外，这个问题与Buildroot完全没有关系，它纯粹是一个内核配置/内核命令行问题。

# node.js - 如何将 Node.js 应用程序部署为单个可执行文件？

> ID：14314038
> 
> 赞同：141
> 
> 时间：2013-01-14T06:14:13.593
> 
> 标签：node.js, deployment

假设我已经编写了一个 Node.js 应用程序，现在我想分发它。当然，我想让用户更容易，因此我不希望他安装 Node.js，运行`npm install`然后手动输入`node app.js`.

我更喜欢的是单个可执行文件，例如`.exe`Windows 上的文件。

我怎么能接近这个？

我知道[这个线程](https://stackoverflow.com/questions/8173232/make-exe-from-node-js-app)，无论如何这只是关于 Windows。我怎样才能以独立于平台的方式实现这一点？有任何想法吗？最佳实践？...？

完美的解决方案是我可以提供源文件夹的“编译器”。源文件夹包含应用程序本身的各种`.js`文件、`node_modules`文件夹和一些元数据，例如`package.json`. 输出应该是各种平台的二进制文件，例如 Windows、OS X 和 Linux。

哦，重要的是：我不想对源代码进行*任何*更改，因此`require`使用相对路径的调用应该仍然有效，即使此相对路径现在位于打包的应用程序中。

有任何想法吗？

PS：我不希望用户独立安装 Node.js，它也应该包含在可执行文件中。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-08-13T16:22:47.527

同时，我找到了（对我而言）完美的解决方案：[nexe](https://github.com/jaredallard/nexe)，它从包含所有模块的 Node.js 应用程序创建单个可执行文件。

这是理想解决方案的次佳选择。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-30T10:30:41.830

首先，我们正在讨论为研讨会、演示等打包 Node.js 应用程序，这样可以很方便地让应用程序“刚刚运行”，而无需最终用户关心安装和依赖关系。

您可以尝试以下设置：

1.  获取您的应用程序源代码
2.  `npm install`所有依赖项（通过 package.json）到**本地**node_modules 目录。在二进制依赖的情况下，在您要单独支持的每个平台上执行此步骤非常重要。
3.  将 Node.js 二进制文件——Windows 上的*node.exe*，（可能） OS X/Linux 上的*/usr/local/bin/node*复制到项目的根文件夹。在 OS X/Linux 上，您可以使用`which node`.

**对于 Windows：**
创建自解压存档，[7zip_extra](http://sourceforge.net/projects/sevenzip/files/7-Zip/)支持在解压后立即执行命令的方式，请参阅：[http ://www.msfn.org/board/topic/39048-how-to-make-a-7-zip -switchless-installer/](http://www.msfn.org/board/topic/39048-how-to-make-a-7-zip-switchless-installer/)。

**对于 OS X/Linux：**
您可以使用[makeself](https://github.com/megastep/makeself)或[unzipsfx](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/unzipsfx.1.html)之类的工具（我不知道这是否使用默认定义的 CHEAP_SFX_AUTORUN 编译）。

这些工具会将存档解压缩到一个临时目录，执行给定的命令（例如`node app.js`）并在完成后删除所有文件。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-06-23T21:59:38.190

不要打死马，但您描述的解决方案听起来很像[Node-Webkit](https://github.com/rogerwang/node-webkit)。

从 Git 页面：

> node-webkit 是一个基于 Chromium 和 node.js 的应用运行时。您可以使用 node-webkit 以 HTML 和 JavaScript 编写本机应用程序。它还允许您直接从 DOM 调用 Node.js 模块，并启用一种使用所有 Web 技术编写本机应用程序的新方法。

[这些说明](https://github.com/rogerwang/node-webkit/wiki/How-to-package-and-distribute-your-apps#user-content-step-2b-alternative-way---making-an-executable-file-out-of-a-nw-file)特别详细说明了用户可以执行的单个文件应用程序的创建，[这部分](https://github.com/rogerwang/node-webkit/wiki/How-to-package-and-distribute-your-apps#which-files-should-be-shipped)描述了外部依赖项。

我不确定这是否是确切的解决方案，但它似乎非常接近。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-10T20:08:45.177

JXcore 将允许您将任何 nodejs 应用程序转换为单个可执行文件，包括 Windows、Linux 或 Mac OS X 中的所有依赖项。

这是安装程序的链接： [https ://github.com/jxcore/jxcore-release](https://github.com/jxcore/jxcore-release)

这里是如何设置它的链接：http: [//jxcore.com/turn-node-applications-into-executables/](http://jxcore.com/turn-node-applications-into-executables/)

它非常易于使用，我已经在 Windows 8.1 和 Ubuntu 14.04 中对其进行了测试。

仅供参考：JXcore 是 NodeJS 的一个分支，因此它与 NodeJS 100% 兼容，并具有一些额外的功能。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-09-09T17:08:00.297

创建安装程序需要执行多个步骤，并且每个操作系统的安装程序都不同。例如：

*   在 Mac OS X 上，您需要创建一个`.pkg`，这里有关于如何执行此操作的说明：[https ://coolaj86.com/articles/how-to-create-an-osx-pkg-installer.html](https://coolaj86.com/articles/how-to-create-an-osx-pkg-installer.html)
*   在 Ubuntu Linux 上，您需要创建一个`.deb`，这里有关于如何执行此操作的说明：[https ://coolaj86.com/articles/how-to-create-a-debian-installer.html](https://coolaj86.com/articles/how-to-create-a-debian-installer.html)
*   在 Microsoft Windows 上，您需要创建一个`.exe`or `.msi`，这里有关于如何使用 innosetup 安装程序的说明：[https ://coolaj86.com/articles/how-to-create-an-innosetup-installer.html](https://coolaj86.com/articles/how-to-create-an-innosetup-installer.html)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-05-15T19:03:38.843

除了 nexe，[browserify](http://browserify.org/)还可用于将所有依赖项捆绑为一个`.js`文件。这不会捆绑实际的节点可执行文件，只是处理 javascript 端。它也不处理本机模块。纯节点编译的命令行选项是`browserify --output bundle.js --bare --dg false input.js`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-17T04:14:28.050

您可以创建一个 git repo 并设置指向节点 git repo 的链接作为依赖项。然后任何克隆 repo 的用户也可以安装节点。

```
#git submodule [--quiet] add [-b branch] [-f|--force]
git submodule add /var/Node-repo.git common 
```

您可以轻松地打包一个脚本以自动克隆您在某处托管的 git 存储库并从一个脚本文件“安装”。

```
#!/bin/sh
#clone git repo
git clone your-repo.git 
```

# xcode - 颜色循环 Xcode UIView 背景

> ID：14314044
> 
> 赞同：1
> 
> 时间：2013-01-14T06:14:48.147
> 
> 标签：xcode, uiview, colors, background-color, cycle

我只是一个新手，所以不确定这是否是正确的地方。

我在你的网站上找到了这段代码来制作一个 xcode iphone 应用程序，其中背景颜色循环 - [UIView backgroundColor 颜色循环](https://stackoverflow.com/questions/6241655/uiview-backgroundcolor-color-cycle/6241680)

效果很好！我怎样才能调整它，使它只循环一次并以数组中的最后一种颜色结束？

谢谢你的帮助。

```
//  ViewController.m
//  colorCycle

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self doBackgroundColorAnimation];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) doBackgroundColorAnimation {
    static NSInteger i = 0;
    NSArray *colors = [NSArray arrayWithObjects:[UIColor greenColor], [UIColor yellowColor], [UIColor orangeColor], [UIColor redColor], nil];

    if(i >= [colors count]) {
        i = 0;
    }

    [UIView animateWithDuration:2.0f animations:^{
        self.view.backgroundColor = [colors objectAtIndex:i];
    } completion:^(BOOL finished) {
        ++i;
        [self doBackgroundColorAnimation];
    }];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:46:19.427

您可以`return`在 if 块中添加一条语句。

```
- (void) doBackgroundColorAnimation {
static NSInteger i = 0;
NSArray *colors = [NSArray arrayWithObjects:[UIColor greenColor], [UIColor yellowColor], [UIColor orangeColor], [UIColor redColor], nil];

if(i >= [colors count]) {
    return;
}

[UIView animateWithDuration:2.0f animations:^{
    self.view.backgroundColor = [colors objectAtIndex:i];
} completion:^(BOOL finished) {
    ++i;
    [self doBackgroundColorAnimation];
}]; 
```

}

# date - 格式化中的apache POI问题

> ID：14314045
> 
> 赞同：1
> 
> 时间：2013-01-14T06:14:54.320
> 
> 标签：date, format, apache-poi

我是 POI 的新手，我的代码没有给我合适的结果。填充 excel 表时，它没有在完成日期列中应用样式，也没有将完成日期列的格式更改为日期**（格式应为 dd-mmm）**。这是我的代码。

```
package oup.excel.report;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFCellStyle;
import org.apache.poi.hssf.usermodel.HSSFFont;
import org.apache.poi.hssf.usermodel.HSSFPalette;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.util.HSSFColor;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.CreationHelper;

import oup.dbconnection.ConnectionObject;
import util.Mail;

public class CreateExcelReport {
    public static void main(String[] args) {
        try {
            File reportPath = new File("/a1/reports/");
            reportPath.mkdirs();
            String filename = "/a1/reports/OUP_Delivery_Report_" + getTodaysDate() + ".xls";
            HSSFWorkbook hwb = new HSSFWorkbook();
            HSSFSheet sheet = hwb.createSheet("OUP Delivery Report");           
            HSSFRow rowhead = sheet.createRow((short) 0);

            HSSFFont font = hwb.createFont();
            font.setFontName("Trebuchet MS");
            font.setFontHeightInPoints((short) 8);
            font.setBoldweight(HSSFFont.BOLDWEIGHT_BOLD);

            HSSFCellStyle style = hwb.createCellStyle();

            HSSFColor CYAN = setColor(hwb, (byte) 204, (byte) 255, (byte) 255);

            style.setBorderBottom(HSSFCellStyle.BORDER_THIN);
            style.setBorderTop(HSSFCellStyle.BORDER_THIN);
            style.setBorderRight(HSSFCellStyle.BORDER_THIN);
            style.setBorderLeft(HSSFCellStyle.BORDER_THIN);

            style.setFillForegroundColor(CYAN.getIndex());
            //style.setFillBackgroundColor(new HSSFColor.BLACK().getIndex());
            style.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND );

            style.setFont(font);
            style.setAlignment(HSSFCellStyle.ALIGN_CENTER);

            HSSFCell jrnlcell = rowhead.createCell(0);
            HSSFCell uidcell = rowhead.createCell(1);
            HSSFCell stepcell = rowhead.createCell(2);
            HSSFCell ptcell = rowhead.createCell(3);
            HSSFCell dccell = rowhead.createCell(4);
            HSSFCell cmtscell = rowhead.createCell(5);

            jrnlcell.setCellValue("Journal");
            uidcell.setCellValue("Unique ID");
            stepcell.setCellValue("Step");
            ptcell.setCellValue("Proof typeset pages");
            dccell.setCellValue("Date completed");
            cmtscell.setCellValue("Comments");

            jrnlcell.setCellStyle(style);
            uidcell.setCellStyle(style);
            stepcell.setCellStyle(style);
            ptcell.setCellStyle(style);
            dccell.setCellStyle(style);
            cmtscell.setCellStyle(style);

            Connection con = ConnectionObject.getConnection();
            String sql = "SELECT getjrabbr (journalbookid) journal, clientreference UniqueID, (CASE WHEN currentstageid = 11 THEN 'GALLEY' WHEN currentstageid = 1 THEN 'PROOF' WHEN currentstageid = 54 THEN 'FROM T/S' WHEN currentstageid = 2 THEN 'REV1' WHEN currentstageid = 3 THEN 'REV2' WHEN currentstageid = 4 THEN 'REV3' WHEN currentstageid = 14 THEN 'REV4' WHEN currentstageid = 18 THEN 'REV5' WHEN currentstageid = 19 THEN 'REV6' WHEN currentstageid = 20 THEN 'REV7' WHEN currentstageid = 21 THEN 'REV8' WHEN currentstageid = 70 THEN 'REV9' WHEN currentstageid = 71 THEN 'REV10' WHEN currentstageid = 6 THEN 'Supply Files for QA' WHEN currentstageid = 93 THEN 'Resupp QA' WHEN currentstageid = 39 THEN 'PAP' WHEN currentstageid = 99 THEN 'PAP1' WHEN currentstageid = 100 THEN 'PAP2' END) step, tsp Prooftypesetpages, TO_CHAR (CLIENTUPLOADDATE, 'MM/DD/YYYY') Datecompleted FROM v_jobitems_history ji WHERE ji.clientid = 1487 AND CLIENTUPLOADDATE IS NOT NULL AND CLIENTUPLOADDATE BETWEEN TRUNC (SYSDATE - 1) + 3 / 24 AND TRUNC (SYSDATE) + 3 / 24 order by 5";
            PreparedStatement pstmt = con.prepareStatement(sql);
            ResultSet rs = pstmt.executeQuery();

            int i=1;

            HSSFCellStyle style1 = hwb.createCellStyle();
            HSSFFont font1 = hwb.createFont();
            font1.setFontName("Trebuchet MS");
            font1.setFontHeightInPoints((short) 8);

            style1.setFont(font1);
            style1.setBorderBottom(HSSFCellStyle.BORDER_THIN);
            style1.setBorderTop(HSSFCellStyle.BORDER_THIN);
            style1.setBorderRight(HSSFCellStyle.BORDER_THIN);
            style1.setBorderLeft(HSSFCellStyle.BORDER_THIN);
            style1.setAlignment(HSSFCellStyle.ALIGN_CENTER);

            CellStyle cellStyle = hwb.createCellStyle();
            CreationHelper createHelper = hwb.getCreationHelper();
            // Set the date format of date
            cellStyle.setDataFormat(createHelper.createDataFormat().getFormat("d-mmmm"));
            cellStyle.setFont(font1);
            cellStyle.setBorderBottom(HSSFCellStyle.BORDER_THIN);
            cellStyle.setBorderTop(HSSFCellStyle.BORDER_THIN);
            cellStyle.setBorderRight(HSSFCellStyle.BORDER_THIN);
            cellStyle.setBorderLeft(HSSFCellStyle.BORDER_THIN);
            cellStyle.setAlignment(HSSFCellStyle.ALIGN_CENTER);

            CellStyle cellStyleInt = hwb.createCellStyle();
            cellStyleInt.setDataFormat(createHelper.createDataFormat().getFormat("#"));
            cellStyleInt.setFont(font1);
            cellStyleInt.setBorderBottom(HSSFCellStyle.BORDER_THIN);
            cellStyleInt.setBorderTop(HSSFCellStyle.BORDER_THIN);
            cellStyleInt.setBorderRight(HSSFCellStyle.BORDER_THIN);
            cellStyleInt.setBorderLeft(HSSFCellStyle.BORDER_THIN);          
            cellStyleInt.setAlignment(HSSFCellStyle.ALIGN_CENTER);

            while(rs.next()){
                String journal = rs.getString("journal");
                String UniqueID = rs.getString("UniqueID");
                String step = rs.getString("step");
                String tsp = rs.getString("Prooftypesetpages");
                String Datecompleted = rs.getString("Datecompleted");

                System.out.println("journal : " + journal);
                System.out.println("UniqueID : " + UniqueID);
                System.out.println("step : " + step);
                System.out.println("tsp : " + tsp);
                System.out.println("Datecompleted : " + Datecompleted);
                System.out.println("================================================");

                HSSFRow row = sheet.createRow((short) i);

                HSSFCell jcell = row.createCell(0);
                HSSFCell ucell = row.createCell(1);
                HSSFCell scell = row.createCell(2);
                HSSFCell tcell = row.createCell(3);
                HSSFCell dcell = row.createCell(4);
                HSSFCell ccell = row.createCell(5);

                tcell.setCellType(Cell.CELL_TYPE_NUMERIC);

                jcell.setCellValue(journal);
                ucell.setCellValue(UniqueID);
                scell.setCellValue(step);
                if(tsp!=null && !tsp.equals("")){
                    tcell.setCellValue(Integer.parseInt(tsp.trim()));
                }else{
                    tcell.setCellValue(0);
                }

                SimpleDateFormat oldFormat = new SimpleDateFormat("dd/MM/yyyy");
                SimpleDateFormat newFormat = new SimpleDateFormat("dd-MMM");

                String reformattedDt = null;
                Date inputDt = null;
                try {
                    reformattedDt = newFormat.format(oldFormat.parse(Datecompleted));
                    inputDt = newFormat.parse(reformattedDt);                   
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                dcell.setCellValue(inputDt);
                ccell.setCellValue("");

                jcell.setCellStyle(style1);
                ucell.setCellStyle(style1);
                scell.setCellStyle(style1);
                tcell.setCellStyle(cellStyleInt);
                dccell.setCellStyle(cellStyle);
                ccell.setCellStyle(style1);

                i++;
            }

            try{
                if(rs!=null){
                    rs.close();
                }
                if(pstmt!=null){
                    pstmt.close();
                }
                if(con!=null){
                    con.close();
                }
            }catch (Exception e) {
                e.printStackTrace();
            }
            for(int j=0;j<6;j++){
                sheet.autoSizeColumn((short) j);
            }
            FileOutputStream fileOut = new FileOutputStream(filename);
            hwb.write(fileOut);
            fileOut.close();
            Mail mail = new Mail();
            boolean sendmail = mail.sendMailWithAttachHtmlFormat("dbadmin@aptaracorp.com", "abc@abc.com", "abc@aabc.com", "OUP daily delivery report", "<p style='color:blue'>Hi, <br/>Please find the daily delivery report for the articles.</p><br/><p style='color:blue'>Thanks,<br/>Aptara Automailer</p>", filename, "", "DBADMIN");
            if(sendmail){
                System.out.println("Mail sent successfully.");
            }
            System.out.println("Your excel file has been generated!");
        } 
        catch(FileNotFoundException fnf){
            if(fnf.getMessage().indexOf("The process cannot access the file because it is being used by another process")>=0){
                System.out.println("The file is already being used by another process. Please close the file and try again.");
            }else{
                System.out.println("Exception occured : " + fnf.getMessage());
            }           
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    private static String getTodaysDate(){
        Date date = new Date();
        SimpleDateFormat sdf;               
        sdf = new SimpleDateFormat("ddMMMyyyy_hh_mm_ss");
        String dtString = sdf.format(date);
        return dtString;
    }

    private static HSSFColor setColor(HSSFWorkbook workbook, byte r,byte g, byte b){
        HSSFPalette palette = workbook.getCustomPalette();
        HSSFColor hssfColor = null;
        try {
        hssfColor= palette.findColor(r, g, b); 
        if (hssfColor == null ){
            palette.setColorAtIndex(HSSFColor.LAVENDER.index, r, g,b);
            hssfColor = palette.getColor(HSSFColor.LAVENDER.index);
        }
         } catch (Exception e) {
             e.printStackTrace();
        }

         return hssfColor;
        }
} 
```

请给我一个适当的解决方案。

谢谢

赛卡特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:20:24.627

您正在创建 HSSFCell`dcell`以将日期值存储在 while 循环中。但是，从未设置此单元格的样式。

你的线

```
dccell.setCellStyle(cellStyle); 
```

在您的 while 循环中设置标题单元格的单元格样式（“dccell”），而不是您的实际日期值单元格的样式（“dcell”）。

# android - Android 4.2.x 上的“错误膨胀类片段”

> ID：14314049
> 
> 赞同：2
> 
> 时间：2013-01-14T06:15:04.167
> 
> 标签：android, android-fragments, android-4.2-jelly-bean

我已经调试了几个小时，但仍然没有运气。我使用 Android 片段制作了一个 RSS 阅读器。它在运行 Android 的设备上运行良好，但在 Android设备`4.0.x to 4.1.x`上启动时崩溃。`4.2.x`

我真的很感激我能得到的任何帮助。

**日志猫：**

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.impsycho.androidpakistan/com.impsycho.androidpakistan.ItemListActivity}: 

android.view.InflateException: Binary XML file line #1: Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
    at android.app.Activity.setContentView(Activity.java:1881)
    at com.impsycho.androidpakistan.ItemListActivity.onCreate(ItemListActivity.java:13)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
... 11 more
Caused by: java.lang.NullPointerException
    at com.impsycho.androidpakistan.ItemListFragment$GetAllThePosts.onPreExecute(ItemListFragment.java:157)
    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
    at android.os.AsyncTask.execute(AsyncTask.java:534)
    at com.impsycho.androidpakistan.ItemListFragment.onCreate(ItemListFragment.java:54)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:835)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
    ... 20 more
Sending signal. PID: 30286 SIG: 9 
```

**主要活动：**

```
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class ItemListActivity extends FragmentActivity implements ItemListFragment.Callbacks {
    private boolean mTwoPane;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_item_list);
        getActionBar().setDisplayShowTitleEnabled(false);

        if (findViewById(R.id.item_detail_container) != null) {
            mTwoPane = true;
            ((ItemListFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.item_list))
                    .setActivateOnItemClick(true);
        }
    }
    ... 
```

**activity_item_list.xml**

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/item_list"
    android:name="com.impsycho.androidpakistan.ItemListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ItemListActivity" /> 
```

**activity_item_twopane.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="?android:attr/dividerHorizontal"
    android:orientation="horizontal"
    android:showDividers="middle"
    tools:context=".ItemListActivity" >

    <fragment
        android:id="@+id/item_list"
        android:name="com.impsycho.androidpakistan.ItemListFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2.5" />

    <FrameLayout
        android:id="@+id/item_detail_container"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_weight="5" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:39:34.247

好的，所以我知道出了什么问题。

我专注于错误的错误。该错误实际上是在我的方法`GetAllThePosts()`中，该方法在应用程序启动时调用，因此布局无法膨胀。它甚至不是错误，因为它在所有其他 Android 版本中都运行良好。

`view`出于某种原因，当应用程序在 Android 4.2.x 中启动时，您无法更改菜单项的

负责的代码是：

```
private class GetAllThePosts extends AsyncTask<Void, Void, Void> {
        protected void onPreExecute() {
            RefreshMenuButton.setActionView(R.layout.action_progress);
            RefreshMenuButton.expandActionView();

            ... 
```

我刚刚添加了一个条件语句来检查我们是否在 Android 4.2 或更高版本上。如果我们是，它不会第一次运行。

# java - 如何为带有子选择的查询编写 HIbernate 标准

> ID：14314052
> 
> 赞同：4
> 
> 时间：2013-01-14T06:15:36.107
> 
> 标签：java, hibernate, collections, hibernate-criteria

我有两个实体**Issue**和**Issue_Tracker**。我正在使用休眠 3.6 和一对多关联。

**问题.java**

```
public class Issue implements Serializable {
        private Integer issue_id;
        private String  issue_description;
        private Date issue_raised_date;
        private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0);

        @OneToMany(fetch=FetchType.LAZY, mappedBy="issue_id")
        public Set<Issue_Tracker> getIssueTracker() {
        return issueTracker;
}

public void setIssueTracker(Set<Issue_Tracker> issueTracker) {
    this.issueTracker = issueTracker; 
```

**Issue_Tracker.java**

```
public class Issue_Tracker implements Serializable
{  
     private Integer   issue_id;
     private String    tracker_status;
     private Timestamp tracked_time;** 
```

这是**sql查询**，如何使用标准来实现

```
SELECT i.issue_id, i.issue_description,
       it.tracker_status, it.tracked_time
FROM issues i 
LEFT JOIN ( SELECT it.issue_id, it.tracker_status, it.tracked_time 
            FROM issue_tracker it 
            INNER JOIN (SELECT issue_id, MAX(tracked_time) tracked_time 
                        FROM issue_tracker GROUP BY issue_id
                       ) A ON it.issue_id = A.issue_id AND it.tracked_time = A.tracked_time 
          ) it ON i.issue_id = it.issue_id 
WHERE i.status = "Escalate To"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:00:51.587

首先我建议你把Issue.issueTracker这个容易混淆的名字改成Issue.issueTrackers，因为它是一个Set。它使您在查询时更容易阅读。但是无所谓。

在 Criteria API 中，我认为您不能直接翻译此 SQL。你最好写一个你想要的结果集的描述。您是否想要*“升级到”状态的所有问题的最后跟踪时间*？如果是这样，这应该接近你想要的。

```
 DetachedCriteria inner = DetachedCriteria.forClass(IssueTracker.class, "inner")
        .setProjection(Projections.max("inner.tracked_time"));

    Criteria crit = session.createCriteria(Issue.class, "issue");

    // Add the join with an ON clause (I am not sure why you need the LEFT JOIN)
    crit.createAlias("issueTracker", "it", Criteria.LEFT_JOIN, 
        Subqueries.eqProperty("it.tracked_time", inner));

    // Specify the SELECT fields
    crit.setProjections(Projections.projectionList()
            .add(Projections.property("issue_id"))
            // etc
            .add(Projections.property("it.tracked_time"));

    crit.add(Restrictions.eq("status", "Escalate To");

    List<Object[]> rows = crit.list(); 
```

# iphone - NSCoding 持久化 UIImage

> ID：14314056
> 
> 赞同：1
> 
> 时间：2013-01-14T06:16:18.067
> 
> 标签：iphone, ios, xcode, uiimageview, uiimage

我在与此主题相关的 stackoverflow 上看到了不同的问题。有人说不`NSCoding`符合，有人说符合`UIImage`iOS 5。

我想在我的应用程序中保留图像。我正在使用`encode`和`decode`方法，一切（标题、标签等）都在持续，但图像却没有。

```
- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:title forKey:@"title"];
    [aCoder encodeObject:link forKey:@"link"];
    [aCoder encodeObject:creator forKey:@"creator"];
    [aCoder encodeObject:pubDate forKey:@"pubDate"];
  //  [aCoder encodeObject:thumbnail forKey:@"thumbnail"];
    [aCoder encodeObject:UIImagePNGRepresentation(thumbnail) forKey:@"thumbnail"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self)
    {
        [self setTitle:[aDecoder decodeObjectForKey:@"title"]];
        [self setLink:[aDecoder decodeObjectForKey:@"link"]];
        [self setCreator:[aDecoder decodeObjectForKey:@"creator"]];
        [self setPubDate:[aDecoder decodeObjectForKey:@"pubDate"]];
        [self setThumbnail:[aDecoder decodeObjectForKey:@"thumbnail"]];        
    }
    return self;
} 
```

我也在使用`UIPNGRepresentation`，但它不起作用。有人可以帮我弄这个吗。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T06:32:44.903

您没有对图像进行编码。UIImagePNGRepresentation() 返回一个 NSData 对象。NSData 符合 NSSecureCoding。我以前没有使用过，但是文档说你必须像这样解码它：

```
id obj = [decoder decodeObjectOfClass:[MyClass class] forKey:@"myKey"]; 
```

**编辑后：**以上似乎没有必要。我在测试应用程序中使用了以下代码，两种编码和解码图像的方法都有效。

```
- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:self.name forKey:@"personName"];
    [aCoder encodeObject:self.image2 forKey:@"thumbnail2"];
    [aCoder encodeObject:UIImagePNGRepresentation(self.image1) forKey:@"thumbnail"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self)
    {
        [self setName:[aDecoder decodeObjectForKey:@"personName"]];
        [self setImage2:[aDecoder decodeObjectForKey:@"thumbnail2"]];
        [self setImage1:[UIImage imageWithData:[aDecoder decodeObjectForKey:@"thumbnail"]]];
    }
    return self;
} 
```

正如 Aleph 所说，问题一定出在其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:07:42.827

尝试这个：

```
 - (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:title forKey:@"title"];
    [aCoder encodeObject:link forKey:@"link"];
    [aCoder encodeObject:creator forKey:@"creator"];
    [aCoder encodeObject:pubDate forKey:@"pubDate"];
    NSData* data = UIImagePNGRepresentation(thumbnail);
    NSLog(@"Data length: %d", data.length);
    [aCoder encodeObject:data forKey:@"thumbnail"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self)
    {
        [self setTitle:[aDecoder decodeObjectForKey:@"title"]];
        [self setLink:[aDecoder decodeObjectForKey:@"link"]];
        [self setCreator:[aDecoder decodeObjectForKey:@"creator"]];
        [self setPubDate:[aDecoder decodeObjectForKey:@"pubDate"]];
        NSData* data = [aDecoder decodeObjectForKey:@"thumbnail"];
        NSLog(@"Data length: %d", data.length);
        [self setThumbnail:[UIImage imageWithData:data]];        
    }
    return self;
} 
```

# java - 我在哪里可以保存java代码中使用的私钥

> ID：14314057
> 
> 赞同：5
> 
> 时间：2013-01-14T06:16:22.933
> 
> 标签：java, certificate, datasource, keystore, private-key

我正在 Java、spring、JDBC 上开发 Web 应用程序，它部署在 Tomcat 7 上。我正在使用私钥对数据源密码进行加密/解密。

现在我用 Java 代码硬编码了这个私钥。但**我必须将私钥保存在更安全的地方**。我怎样才能做到这一点？

生成证书（密钥库，密钥对），将其安装在 tomcat 上并从 java 代码中检索此数据是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:22:56.310

那是你不能轻易解决的问题。如果您将密钥存储在密钥库中，您将需要一个密钥来访问密钥库，您将其存储在哪里？

如果这真的是一个高安全性应用程序，唯一的方法是使用专用的硬件安全盒进行解密。

# entity-framework - Azure 网站 GIT 部署：服务器编译的 .DLL 与本地构建的 .DLL 不同

> ID：14314058
> 
> 赞同：3
> 
> 时间：2013-01-14T06:16:31.877
> 
> 标签：entity-framework, azure, azure-web-app-service, azure-git-deployment

我有一个 MVC4 + EF4.0 .NET 4.5 项目（比如说，`MyProject`）我能够在本地运行该项目就好了。当我**FTP 将**其部署到 Azure 网站（不是云服务）时，它也运行良好。但是，如果我执行**GIT deploy**，该站点大部分时间都会“运行”，直到它执行一些 EF5.0 数据库操作。我得到一个例外`Unable to load the specified metadata resource`。

调试后，我注意到如果我：

*   GIT部署整个MVC4项目（和以前一样）
*   FTP进去，然后用我刚刚在本地构建`bin\MyProject.dll`的`bin\MyProject.dll`文件（Windows 8 x64，VS2012，Oct'12 Azure工具）替换GIT推送之后（即相同的来源）

然后 Azure 托管网站运行良好（甚至是 EF5.0 数据库功能部分）。

本地构建的 .dll 比 Azure GIT 发布构建的 .dll 大约 5KB，并且两者都是“发布”模式。很明显，在 GIT 推送（Azure 内部）之后构建的项目与在我自己的 PC 上构建的项目不同。我检查了门户网站，它设置为 .NET 4.5。我也在 GIT 推送整个解决方案文件夹（只有一个项目），而不仅仅是一些零碎的东西。

当我加载本地构建和远程构建的 MyProject.dll 文件时，我注意到以下差异（**FrameworkDisplayName**）

*   当地的：`System.Runtime.Versioning.TargetFrameworkAttribute(".NETFramework,Version=v4.5", FrameworkDisplayName = ".NET Framework 4.5"),`

*   偏僻的：`System.Runtime.Versioning.TargetFrameworkAttribute(".NETFramework,Version=v4.5", FrameworkDisplayName = ""),`

任何人都知道为什么会发生这种情况以及解决方法可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:42:22.497

是的，这是一个错误，将在下一个版本中修复。好消息是今天可以解决它：

[首先，根据这篇文章](http://blog.amitapple.com/post/38417491924/azurewebsitecustomdeploymentpart1)，您需要使用自定义部署脚本。

然后，您需要根据此[问题](https://github.com/projectkudu/kudu/issues/262)更改自定义脚本中的 MSBuild 命令行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:27:49.227

感谢上面的大卫提供的指针和提示。我投票支持他，但我也会在此处发布该问题的确切解决方案。我编辑了我的原始帖子，因为我发现有一个重大错误，直到我从头开始（移动 GIT 服务器）才注意到。所以这是整个过程，为我工作。

*   [下载 Node.JS](http://nodejs.org/)（即使是 .NET 项目也需要它，因为 GIT 部署工具使用它）
*   安装 azure-cli 工具（打开常规命令提示符 => `npm install azure-cli -g`）
*   在命令提示符下，`cd`到存储库的根目录 ( `cd \projects\MyRepoRoot`)
*   在那里，输入`azure site deploymentscript --aspWAP PathToMyProject\MyProject.csproj -s PathToMySolution.sln`（显然根据需要调整路径）
*   这将创建`.deployment`和`deploy.cmd`文件
*   现在编辑文件，找到以（将只是一个）`deploy.cmd`开头的行`%MSBUILD_PATH%`
*   插入`/t:Build`参数。例如：
    *   [前]`%MSBUILD_PATH% <blah blah> /verbosity:m /t:pipelinePreDeployCopyAllFilesToOneFolder`
    *   [之后] `%MSBUILD_PATH% <blah blah> /verbosity:m /t:Build /t:pipelinePreDeployCopyAllFilesToOneFolder`)
*   推送到 GIT（如果一切正常，请检查 GIT 输出）
*   浏览到您的网站并确认它有效！

当它在下一个版本中修复时我会很高兴，所以我们不会维护构建脚本

# javascript - Kendo UI Grid 长期更新日期

> ID：14314060
> 
> 赞同：1
> 
> 时间：2013-01-14T06:16:45.633
> 
> 标签：javascript, jquery, kendo-ui

在我的网格中，我有一个包含以下参数的日期列：

```
update: {
            url: ROOT+"user/update-user",
            type: "POST"
        }

columns: [
    {...},
    {
        field: "DoB",
        width: 68,
        title: "DoB",
        format: "{0:dd/MM/yyyy}",
        template: '#= kendo.toString(DoB,"dd/MM/yyyy") #'
    },
    {...}

datasource: {
    ...
    schema: {
        model: {
            DoB: {type: "date", editable: false, format: "{0:dd/MM/yyyy}"},
        }
    }
} 
```

问题是，当我尝试更新日期列时，它发送的是一个非常长的日期，而不是 SQL 样式的日期“YYYY-MM-DD”：

```
Wed Jan 09 2003 00:00:00 GMT +0000 etc 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T16:40:14.010

原因是当 KendoUI 即将向服务器发送数据时，它会将您的数据序列化到`string`，并且类型的默认序列化`date`是长格式。

您可以通过将 a 定义为来调整数据以将其发送到服务器`transport.update`：

```
update: {
    url : ROOT + "user/update-user",
    type: "POST",
    data: function (data) {
        data.DoB = kendo.toString(data.DoB, "yyyy-MM-dd");
        return data;
    }
}, 
```

**注意**您可能需要一些额外的验证以确保`DoB`实际定义

# java - 如何将记录的 pl/sql 表检索到 Java

> ID：14314061
> 
> 赞同：0
> 
> 时间：2013-01-14T06:16:46.693
> 
> 标签：java, plsql

我在**pl/sql**中有一个记录类型和一个包含上述声明记录的表

```
TYPE record_type IS RECORD
(a  A,
 b  B) ;
TYPE record_table IS TABLE OF record_type; 
```

注意：上面的 A、B 类型是我的包中的自定义对象

现在，我想将上面声明的表的游标返回给 JAVA。

当我盲目地打电话

```
OPEN Cursor for 
select * from ab_record_table ; 
```

它可以编译，但在使用此过程时会在 java 中引发以下错误

```
Exception in thread "main" java.sql.SQLException: ORA-21700: object does not exist or is marked for delete 
```

请告诉我，如何处理...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:03:54.647

[Spring Data JDBC Extensions](http://www.springsource.org/spring-data/jdbc-extensions)支持[oracle 自定义类型](http://static.springsource.org/spring-data/data-jdbc/docs/1.0.0.RC1/reference/html/#orcl.datatypes)，如对象和数组。

# ruby-on-rails - 未定义的方法“确认！” 为了 ＃

> ID：14314064
> 
> 赞同：0
> 
> 时间：2013-01-14T06:17:04.637
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, devise-confirmable

我为这个文件创建了一个文件种子.rb indb/seeds.rb 代码是

```
puts 'SETTING UP DEFAULT USER LOGIN'
user = User.create! :name => 'My Fir User', :email => 'rashmi@example.com', :password => 'please', :password_confirmation => 'please'
user.confirm!
user2 = User.create! :name => 'My Second User', :email => 'user2@example.com', :password => 'please', :password_confirmation => 'please'
user2.confirm!
puts 'New user created: ' << user.name 
```

它给了我错误

```
rake aborted!
undefined method `confirm!' for #<User:0x934ab30>
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activemodel-3.2.9/lib/active_model/attribute_methods.rb:407:in `method_missing'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/attribute_methods.rb:149:in `method_missing'
/home/ritesh/Desktop/rails3-devise-rspec-cucumber/db/seeds.rb:10:in `<top (required)>'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `block in load'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/engine.rb:520:in `load_seed'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:333:in `block (2 levels) in <top (required)>'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

它正在为用户运行，因为它是在开发数据库中创建的，但是当涉及到 user2.confirm 行时！它引发了这个未定义的方法错误，我无法指出为什么要确认一个实例！方法正在运行，第二个实例显示未定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T15:57:34.063

当您在模型中包含可确认模块时，设备的确认功能就会出现。从它的外观来看，我认为你没有在你的模型中使用它。

您的代码应该有一个可确认的符号，如下所示

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable, :omniauthable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

end 
```

# javascript - cookie 在浏览器中读/写是原子的吗

> ID：14314065
> 
> 赞同：17
> 
> 时间：2013-01-14T06:17:11.650
> 
> 标签：javascript, html, concurrency

我正在尝试根据我的需要实现一个交叉表互斥锁。我在[这里](http://balpha.de/2012/03/javascript-concurrency-and-locking-the-html5-localstorage/#comments)找到了一个实现。这似乎很有希望。基本上，它实现了[Leslie Lamport 的算法](http://en.wikipedia.org/wiki/Lamport%27s_bakery_algorithm)，需要原子读/写来创建互斥锁。

然而，它依赖于 localStorage 提供原子读/写。这适用于除 Chrome 之外的大多数浏览器。

所以我的问题是，我可以改用 cookie 读/写吗？所有主流浏览器（IE、Chrome、Safari、Firefox）中的 cookie 读/写都是原子的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T09:14:23.847

既不 cookie，也不`localStorage`提供原子事务。

我想你可能误解了那篇博文，它并没有说他的实现在 Chrome 中不起作用，它*不依赖于`localStorage`提供 atomic read/writes*。他说Chrome 中的*正常* `localStorage`访问更加不稳定。我假设这与 Chrome 为每个选项卡使用单独的进程这一事实有关，而大多数其他浏览器倾向于对所有选项卡使用单个进程。他的代码实现了一个锁定系统，在该系统之上`localStorage`应该可以防止事情被覆盖。

另一种解决方案是使用[IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB)。IndexedDB**确实**提供原子事务。作为一个新标准，它不受`localStorage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:19:46.347

不会。即使浏览器可能在 cookie 上实现了读取和写入锁定，它也不会保护您免受读取和后续写入之间发生的更改的影响。[通过查看cookie 的 javascript API](http://www.quirksmode.org/js/cookies.html)很容易看出这一点，那里没有互斥锁功能......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T20:22:20.673

我今天使用 localStorage 遇到了这个并发问题（两年后..）

场景：浏览器的多个选项卡（例如 Chrome）具有相同的脚本代码，它们基本上同时执行（由例如 SignalR 调用）。代码读取和写入 localStorage。由于选项卡在不同的进程中运行但共同访问共享的本地存储，因此读取和写入会导致未定义的结果，因为这里缺少锁定机制。就我而言，我想确保只有一个选项卡实际上与本地存储一起使用，而不是所有选项卡..

我尝试了上面问题中提到的 Benjamin Dumke-von der Ehe 的锁定机制，但得到了不希望的结果。所以我决定推出自己的实验代码：

**本地存储锁：**

```
Object.getPrototypeOf(localStorage).lockRndId = new Date().getTime() + '.' + Math.random();
Object.getPrototypeOf(localStorage).lock = function (lockName, maxHold, callback) {
    var that = this;
    var value = this.getItem(lockName);
    var start = new Date().getTime();    
    var wait = setInterval(function() {
        if ((value == null) || (parseInt(value.split('_')[1]) + maxHold < start)) {
            that.setItem(lockName, that.lockRndId + '_' + start);
            setTimeout(function () {
                if (that.getItem(lockName) == (that.lockRndId + '_' + start)) {
                    clearInterval(wait);
                    try { callback(); }
                    catch (e) { throw 'exeption in user callback'; }
                    finally { localStorage.removeItem(lockName); }
                }
            }, 100);
        }        
    }, 200);        
}; 
```

**用法：**

localStorage.lock( *lockName* , *maxHold* , *callback* );

*   *lockName* - 锁的全局范围唯一名称 - 字符串
*   *maxHold* - 以毫秒为单位保护脚本的最长时间 - 整数
*   *callback* - 包含受保护脚本的函数

**例如：** “只在一个标签中播放声音”

```
//var msgSound = new Audio('/sounds/message.mp3');

localStorage.lock('lock1', 5000, function(){

    // only one of the tabs / browser processes gets here at a time
    console.log('lock aquired:' + new Date().getTime());

    // work here with local storage using getItem, setItem

    // e.g. only one of the tabs is supposed to play a sound and only if none played it within 3 seconds        
    var tm = new Date().getTime();
    if ((localStorage.lastMsgBeep == null)||(localStorage.lastMsgBeep <tm-3000)) {
       localStorage.lastMsgBeep = tm;
       //msgSound.play();                       
       console.log('beep');                        
    }  
}); 
```

# php - Zend 框架 2 - 我如何连接到数据库并检索查询结果？

> ID：14314066
> 
> 赞同：0
> 
> 时间：2013-01-14T06:17:17.757
> 
> 标签：php, zend-framework2, zend-db, zend-db-table

我已经尝试过 ZF2，但它没有给出 ZF1 工作的任何查询结果，ZF2 不工作。ZF2 数据库适配器是否不完整，是否保留为 ZF2 本身未解决的错误？原因文档告诉这样做，但它根本不起作用。ZF2 适配器是否可以正常工作？

测试控制器.php

```
<?php
namespace Application\Controller;
//namespace Application\Model;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Db\Adapter\Adapter;
use Zend\Debug\Debug;

class TestController extends AbstractActionController {

  public function indexAction() {
    $sql = "SELECT * FROM stackoverflow";
    $statement = $this->adapter->query($sql);
    $res =  $statement->execute();
    Debug::dump( $res );
    exit;
  }
} 
```

模块.php

```
<?php
namespace Application;
use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\Http;
class Module {

  public function getServiceConfiguration()
  {
      return array(
          'factories' => array(
              'adapter' =>  function($sm) {
                  $config = $sm->get('config');
                  $dbAdapter = new \Zend\Db\Adapter\Adapter($config['db']);
                  return $dbAdapter;
              }
          ),
      );
  }
} 
```

全局.php

```
<?php
return array(
//    'di' =>array(
//        'instance' =>array(
//            'PDO' => array(
//                'parameters' => array(
//                  'dsn'            => 'mysql:dbname=mydb;host=localhost',
//                  'username'       => 'mydb',
//                  'password'       => '',
//                )
//            ),
//            
//            'User' => array(
//                'parameters' => array(
//                    'pdo' => 'PDO'
//                )
//            )
//        )
//    ),

    'db' => array(
      'driver' => 'Pdo',
      'dsn'            => 'mysql:dbname=mydb;host=localhost',
      'username'       => 'mydb',
      'password'       => '',
//      'driver_options' => array(
//          PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
//      ),
    ),

//    'service_manager' => array(
//        'factories' => array(
//            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
//        ),
//    ),
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:26:23.353

是一个结果`$res`集。[您可以在ZF 手册](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html)中阅读有关如何从结果集中提取数据的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T03:57:11.630

//我自己刚启动zf2，但是好像可以这样检索数据。

公共函数 fetchAll() {

```
 $resultSet = $this->tableGateway->select();

 return $resultSet; 
```

}

# jquery - 如果价格为 0.99，则显示文本注释

> ID：14314068
> 
> 赞同：0
> 
> 时间：2013-01-14T06:17:39.783
> 
> 标签：jquery

如果使用 jquery 的价格为 0.99 美元，我想显示一个注释“这是免责声明”。我使用了以下代码，但它不起作用，即使它也没有显示警报。请帮帮我

如果价格显示在使用叠加层的弹出窗口中，那么如何显示以下注释。

```
var productpricevalue=$(".ProductPrice");
if(productpricevalue == 0.99){
//alert(productpricevalue);
//note is shown here
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:20:14.950

这不是您从输入中获取值的方式。尝试：

```
var productpricevalue=$(".ProductPrice").val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T06:21:56.037

试试这个：

```
var productpricevalue=$(".ProductPrice").val();
if(productpricevalue == "0.99"){
//alert(productpricevalue);
//note is shown here
} 
```

# c# - DynamicDataDisplay D3:ChartPlotter 缩放问题

> ID：14314071
> 
> 赞同：1
> 
> 时间：2013-01-14T06:17:43.030
> 
> 标签：c#, wpf, dynamic-data-display

我在我的 C# WPF 应用程序中使用了一个简单的 ChartPlotter。当我通过鼠标滚动放大/缩小时，两个轴都发生了变化。如何通过鼠标滚动控制缩放，使其仅影响 X 轴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:07:28.800

此功能已内置在 D3 中，如果您将鼠标悬停在其中一个轴上并进行鼠标滚轮滚动，则缩放仅与您悬停在的轴有关。如果你想在你的代码中复制它，你可以在源代码中看到它的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T04:26:45.737

缩放功能在“MouseNavigation.cs”中实现。MouseWheel 处理程序将调用下面的函数：

```
Viewport.Visible = Viewport.Visible.Zoom(zoomTo, zoomSpeed); 
```

幸运的是，有一个 ZoomX 功能可以满足您的需求。因此，只需从您的绘图仪中删除 MouseNavigation，然后重新实现您自己的，如下所示：

```
 // Remove mouse navigation
    plotter.Children.Remove(plotter.MouseNavigation);

    // ZoomX when wheeling mouse
    private void plotter_MouseWheel(object sender, System.Windows.Input.MouseWheelEventArgs e)
    {
        if (!e.Handled)
        {
            Point mousePos = e.GetPosition(this);
            Point zoomTo = mousePos.ScreenToViewport(plotter.Viewport.Transform);

            double zoomSpeed = Math.Abs(e.Delta / Mouse.MouseWheelDeltaForOneLine);
            zoomSpeed *= 1.2;
            if (e.Delta < 0)
            {
                zoomSpeed = 1 / zoomSpeed;
            }

            plotter.Viewport.SetChangeType(ChangeType.Zoom);
            plotter.Viewport.Visible = plotter.Viewport.Visible.ZoomX(zoomTo, zoomSpeed);
            plotter.Viewport.SetChangeType();
            e.Handled = true;
        }
    } 
```

# javascript - jQuery 不会在加载了 ajax 的 div 上执行

> ID：14314072
> 
> 赞同：1
> 
> 时间：2013-01-14T06:17:49.153
> 
> 标签：javascript, jquery, ajax, dom

我正在使用 PHP、MySQL、AJAX、Javascript、HTML5、css3 开发一个网站......我想要做的是加载一个外部 html 文件并让嵌入的 Javascript 执行。

我正在尝试使用的 ajax 负载是这个

```
<pre><code>

    $(document).ready(function(){

        $(".meny a").click(function(){
            page=$(this).attr("href");
            $.ajax({
                url: "includes/"+page,
                cache:false,
                success:function(html){
                    afficher(html);
                },

                error:function(XMLHttpRequest,textStatus,errorThrown){
                    alert(testStatus);
                }
            })

            return false;
        });
    });

    function afficher(data){
        $("#main").fadeOut(500,function(){
        $("#main").empty(); 
        $("#main").append(data);
        $("#main").fadeIn(1000);
        })
        }

</code></pre> 
```

当页面的内容直接加载时，javascript（或jQuery）函数工作正常，但是当在AJAX加载的另一个页面的内容中找到的div标签时，javascript（或jQuery）在这个div上不起作用，而jquery脚本是已经存储在“head”标签中。

我认为问题在于 AJAX，因为当我直接调用包含 Javascript 的页面时它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:14:17.827

@kieran 不，我从不尝试这个技巧！我想我找出了真正的问题！

jQuery 实际上删除了它在 ajax 调用中遇到的任何 javascript。他们这样做是为了防止 IE 出现问题。这是 jQuery 1.8.3 的实际代码片段（第 7479-7481 行）：

```
// inject the contents of the document in,removing the scripts 
// to avoid any 'Permission Denied' errors in IE 
.append( responseText.replace( rscript, "" ) ) 
```

在第 7291 行中，它定义了 rscript 正则表达式：rscript = /(?:(?!</script>)<[^<])*</script>/gi，你说得对，我必须添加一个回调加载ajax函数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:34:18.727

默认情况下，您通过 AJAX 检索的页面中包含的 javascript 将不会被执行，因为它被视为纯文本。

您需要将文本评估为 javascript。javascript 中有一个内置函数可以实现这一点，称为`eval`. 这是一篇关于使用`eval`AJAX 的好文章，感谢[technify.me](http://technify.me/user-experience/javascript/executing-javascript-in-an-ajax-response/)。

但是我必须注意，使用`eval`被认为是一种不好的做法。有一句众所周知的说法[“eval is evil”](http://blogs.msdn.com/b/ericlippert/archive/2003/11/01/53329.aspx)，因为它的性能很差，并且可能存在 XSS 漏洞。所以你可能想看看如何在不直接使用 AJAX 调用（可能是动态构建的`script`标签）的情况下实现类似的效果。`eval`但是，如果响应纯粹是 javascript，则出于您的目的将起作用。`$.get`否则，您将需要以某种方式从您返回的 HTML 中提取 javascript 。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T06:20:57.160

利用

```
 $(".meny a").on( 'click', ... 
```

代替

```
 $(".meny a").click( .... 
```

现在`$(".meny a")`就可以点击

# jakarta-ee - 不再能够在我的 IBM RAD 上运行 Websphere Application Server v6.0

> ID：14314077
> 
> 赞同：2
> 
> 时间：2013-01-14T06:18:17.530
> 
> 标签：jakarta-ee, websphere, websphere-portal, ibm-rad

我目前正在为我的同事构建的 java 开发工作使用开发机器。这台机器上的 IBM RAD 设置具有运行服务器配置文件“Websphere Application Server v6.0”的 IBM Websphere Portal 设置，因此我可以通过浏览器使用“http://localhost:9081/wps/portal/home”测试门户。

今天，我正在尝试在 RAD 上设置我自己的动态 Web 项目。在运行 Web 应用程序时，我不小心覆盖了 IBM Websphere Portal 正在使用的服务器配置文件（Websphere Application Server v6.0）。我所做的是我右键单击我的新项目运行 -> 在服务器上运行 -> 选择现有服务器 -> Websphere Application Server v6.0 -> 下一步 -> 添加和删除项目 -> 我在右侧添加了我的新项目box -> Finish，它会自动启动服务器。“正在启动...”几分钟后，控制台显示错误：

```
************ Start Display Current Environment ************
WebSphere Platform 6.0 [BASE 6.0.0.0 o0444.14]  running with process name wnab611300Node01Cell\wnab611300Node01\server1 and process id 2844
Host Operating System is Windows XP, version 5.1
Java version = J2RE 1.4.2 IBM Windows 32 build cn142sr1w-20041028 (JIT enabled: jitc),     Java Compiler = jitc, Java VM name = Classic VM
was.install.root = C:\IBM\Rational\SDP\6.0\runtimes\base_v6
user.install.root = C:\IBM\Rational\SDP\6.0\runtimes\base_v6/profiles/default
Java Home = C:\IBM\Rational\SDP\6.0\runtimes\base_v6\java\jre
ws.ext.dirs = C:\IBM\Rational\SDP\6.0\runtimes\base_v6/java/lib;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/profiles/default/classes;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/classes;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/installedChannels;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib/ext;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/web/help;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/deploytool/itp/plugins/com.ibm.etools.ejbdeploy/runtime
Classpath = C:\IBM\Rational\SDP\6.0\runtimes\base_v6/profiles/default/properties;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/properties;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib/bootstrap.jar;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib/j2ee.jar;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib/lmproxy.jar;C:\IBM\Rational\SDP\6.0\runtimes\base_v6/lib/urlprotocols.jar
Java Library path = C:\IBM\Rational\SDP\6.0\runtimes\base_v6\java\bin;.;C:\WINDOWS\system32;C:\WINDOWS;C:\IBM\Rational\SDP\6.0\runtimes\base_v6\bin;C:\IBM\Rational\SDP\6.0\runtimes\base_v6\java\bin;C:\IBM\Rational\SDP\6.0\runtimes\base_v6\java\jre\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Attachmate\EXTRA!\;C:\Program Files\Rational\common;C:\Program Files\Rational\ClearCase\bin
************* End Display Current Environment *************
[14/01/13 16:37:36:873 EST] 0000000a ManagerAdmin  I   TRAS0017I: The startup trace state is *=info.
[14/01/13 16:37:36:967 EST] 0000000a MBeanDescript W   ADMN0001W: The service is unable to parse the MBean descriptor file com/ibm/ws/management/descriptor/xml/mbeans.xml.
[14/01/13 16:37:37:014 EST] 0000000a AdminInitiali A   ADMN0015I: The administration service is initialized.
[14/01/13 16:37:37:779 EST] 0000000a SystemOut     O PLGC0057I: Plug-in configuration service is started successfully.
[14/01/13 16:37:37:795 EST] 0000000a PMIImpl       A   PMON0001A: PMI is enabled
[14/01/13 16:37:38:201 EST] 0000000a CGBridgeServi I   CWRCB0204E: The core group bridge service is disabled because it may not execute on a non-managed node.
[14/01/13 16:37:38:217 EST] 0000000a SibMessage    I   [:] CWSIU0000I: Release: WAS60.SIB Level: o0444.10
[14/01/13 16:37:38:232 EST] 0000000a SecurityDM    I   SECJ0231I: The Security component's FFDC Diagnostic Module com.ibm.ws.security.core.SecurityDM registered successfully: true.
[14/01/13 16:37:38:373 EST] 0000000a AuditServiceI A   SECJ6004I: Security Auditing is disabled. 
[14/01/13 16:37:38:435 EST] 0000000a distSecurityC I   SECJ0309I: Java 2 Security is disabled.
[14/01/13 16:37:38:467 EST] 0000000a Configuration A   SECJ0215I: Successfully set JAAS login provider configuration class to com.ibm.ws.security.auth.login.Configuration.
[14/01/13 16:37:38:467 EST] 0000000a distSecurityC I   SECJ0212I: WCCM JAAS configuration information successfully pushed to login provider class.
[14/01/13 16:37:38:482 EST] 0000000a distSecurityC I   SECJ0240I: Security service initialization completed successfully
[14/01/13 16:37:38:607 EST] 0000000a ObjectPoolSer I   OBPL0007I: Object Pool Manager service is disabled.
[14/01/13 16:37:38:623 EST] 0000000a J2EEServiceMa I   ASYN0059I: Work Manager service initialized successfully.
[14/01/13 16:37:38:654 EST] 0000000a CScopeCompone I   CSCP0002I: Compensation service is disabled.
[14/01/13 16:37:38:701 EST] 0000000a SibMessage    I   [:] CWSID0006I: The SIB service was not enabled and will not be started.
[14/01/13 16:37:38:717 EST] 0000000a ActivitySessi I   WACS0045I: ActivitySession service is disabled.
[14/01/13 16:37:38:732 EST] 0000000a SOAPContainer I   WSWS1062I: SOAP Container Service has been initialized.
[14/01/13 16:37:38:764 EST] 0000000a SchedulerServ I   SCHD0036I: The Scheduler Service is initializing.
[14/01/13 16:37:38:779 EST] 0000000a SchedulerServ I   SCHD0037I: The Scheduler Service has been initialized.
[14/01/13 16:37:38:889 EST] 0000000a StartUpServic I   STUP0008I: The Startup Beans service is disabled.
[14/01/13 16:37:38:889 EST] 0000000a I18nService   I   I18N0010I: The Internationalization service is created on server1.
[14/01/13 16:37:38:889 EST] 0000000a I18nServiceSe I   I18N0010I: The Internationalization service is disabled on server1.
[14/01/13 16:37:39:326 EST] 0000000a ORBRas        E com.ibm.ws.orbimpl.transport.WSTransport createServerSocket P=859170:O=0:CT ORBX0390E: Cannot create listener thread. Exception=[ java.net.BindException: Address already in use: NET_Bind ].
[14/01/13 16:37:44:357 EST] 0000000a SchedulerServ I   SCHD0040I: The Scheduler Service is stopping.
[14/01/13 16:37:44:357 EST] 0000000a SchedulerServ I   SCHD0002I: The Scheduler Service has stopped.
[14/01/13 16:37:44:373 EST] 0000000a AppProfileCom I   ACIN0009I: The application profiling service is stopping.
[14/01/13 16:37:44:373 EST] 0000000a ActivitySessi I   WACS0049I: The ActivitySession service is stopping.
[14/01/13 16:37:44:420 EST] 0000000a WsServerImpl  E   WSVR0009E: Error occurred during startup
META-INF/ws-server-components.xml
[14/01/13 16:37:44:467 EST] 0000000a WsServerImpl  E   WSVR0009E: Error occurred during startup
com.ibm.ws.exception.RuntimeError: com.ibm.ws.exception.RuntimeError: org.omg.CORBA.INTERNAL: CREATE_LISTENER_FAILED_4  vmcid: 0x49421000  minor code: 56  completed: No
at com.ibm.ws.runtime.WsServerImpl.bootServerContainer(WsServerImpl.java:182)
at com.ibm.ws.runtime.WsServerImpl.start(WsServerImpl.java:120)
at com.ibm.ws.runtime.WsServerImpl.main(WsServerImpl.java:378)
at com.ibm.ws.runtime.WsServer.main(WsServer.java:50)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)
at java.lang.reflect.Method.invoke(Method.java:391)
at com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:190)
Caused by: com.ibm.ws.exception.RuntimeError: org.omg.CORBA.INTERNAL: CREATE_LISTENER_FAILED_4  vmcid: 0x49421000  minor code: 56  completed: No
at com.ibm.ws.runtime.component.ORBImpl.start(ORBImpl.java:347)
at com.ibm.ws.runtime.component.ContainerImpl.startComponents(ContainerImpl.java:821)
at com.ibm.ws.runtime.component.ContainerImpl.start(ContainerImpl.java:649)
at com.ibm.ws.runtime.component.ServerImpl.start(ServerImpl.java:356)
at com.ibm.ws.runtime.WsServerImpl.bootServerContainer(WsServerImpl.java:173)
... 9 more
Caused by: org.omg.CORBA.INTERNAL: CREATE_LISTENER_FAILED_4  vmcid: 0x49421000  minor code: 56  completed: No
at com.ibm.ws.orbimpl.transport.WSTransport.createListener(WSTransport.java:733)
at com.ibm.ws.orbimpl.transport.WSTransport.initTransports(WSTransport.java:605)
at com.ibm.rmi.iiop.TransportManager.initTransports(TransportManager.java:143)
at com.ibm.rmi.corba.ORB.set_parameters(ORB.java:1282)
at com.ibm.CORBA.iiop.ORB.set_parameters(ORB.java:1839)
at org.omg.CORBA.ORB.init(ORB.java:368)
at com.ibm.ws.orb.GlobalORBFactory.init(GlobalORBFactory.java:82)
at com.ibm.ejs.oa.EJSORBImpl.initializeORB(EJSORBImpl.java:174)
at com.ibm.ejs.oa.EJSServerORBImpl.<init>(EJSServerORBImpl.java:123)
at com.ibm.ejs.oa.EJSORB.init(EJSORB.java:339)
at com.ibm.ws.runtime.component.ORBImpl.start(ORBImpl.java:340)
... 13 more 
```

非常后悔我的所作所为，我应该在运行我的新 Web 项目时使用“手动定义服务器”而不是“选择现有服务器”。现在，无论我做什么，我都无法恢复我的 Portal 应用程序。我在网上做过研究，有些帖子说可能是使用的端口冲突，有些建议在任务管理器中停止 java.exe，但没有一个有效。甚至尝试重新启动机器，没有运气。最后尝试使用“手动定义服务器”创建新的服务器配置文件，但仍然出现相同的错误。
总之，有两个问题：
1\. 如何取回我的 Portal 应用程序？
2\. 如何在与现有 Portal 应用程序相同的机器上设置第二个 Web 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T09:07:40.127

阿夫里姆是对的。网络端口未发布，WebSphere 抱怨它 - 以 WebSphere Corba 的方式。但是，您也可以编辑 serverindex.xml 以更改端口。

[这篇博客文章描述了如何做到这一点](http://www.devops-insight.com/2014/08/websphere-port-conflicts-while-starting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:49:32.773

某些进程正在使用 WebSphere 所需的端口。

首先尝试重新启动服务器，有时如果 WebSphere 崩溃，端口不会被正确释放。

如果这没有帮助，您需要确定哪个进程正在使用该端口。

请参阅[WebSphere Application Server 版本](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/rins_portnumber.html)中的端口号设置以查看默认端口（如果您没有更改它们）和配置端口的文件。

然后运行`netstat`并查找正在使用这些端口中的任何一个的进程，不用说您需要确保它没有。

# php - 进入睡眠前的 PHP 睡眠输出以进行下一步

> ID：14314082
> 
> 赞同：0
> 
> 时间：2013-01-14T06:18:41.147
> 
> 标签：php, sleep

我正在使用`SLEEP()`. 该函数似乎可以工作，但脚本会等到我的所有`sleep()`函数都运行完毕后，才会显示任何输出。

有没有办法让我获得第一个输出，然后它应该等待并转到下一个？

```
 echo date('h:i:s') . "<br />";

    //sleep for 10 seconds
    sleep(10);

    //start again
    echo date('h:i:s'). "<br />";
   //sleep for 10 seconds
    sleep(10);

    //start again
    echo date('h:i:s'); 
```

我需要第一个输出，`echo`然后脚本应该等待并给出第二个`echo`......等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:26:23.770

`Sleep`至于页面的输出无关紧要。页面在最后一次睡眠完成后立即提供......虽然它在睡眠期间停止处理服务器上的页面。..在您的场景中，您应该使用javascript来产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:35:38.803

你看，PHP 完全在服务器端运行，`sleep`只会使页面的延迟更加严重。

正如 Rab 所建议的，请尝试使用 JavaScript。它与 Java 不一样（事实上，有很多不同），你可能想在网上找到一些好的教程，或者得到一些好书（Murach 的那本书真的很好，相信我）。

# iphone - UIWebView 和 Safari 内容看起来不一样

> ID：14314087
> 
> 赞同：0
> 
> 时间：2013-01-14T06:19:03.753
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个`UIWebView`适合我拥有的论坛的移动风格。在 Safari 中，它看起来和工作都很棒。

但是，在我的内部`WebView`有一个灾难性的问题。

引用或编辑帖子时，HTML 会显示在`BBcode`. 此外，发布代码会导致忽略换行符。

webview 是这样加载的：

```
 //display the webview
    NSString *fullURL = @"http://www.mysite.com";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSMutableURLRequest *requestObj = [NSMutableURLRequest requestWithURL:url];
    [_webTest loadRequest:requestObj]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:44:47.350

你想在你的 webView 中加载一个 html 字符串吗？

如果是这样的话，以下内容可能会对您有所帮助：

```
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:bundlePath];

NSString *htmlString = [bundlePath pathForResource:@"index" ofType:@"html"] ;
[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:34:33.950

改变你的这一行：

```
NSMutableURLRequest *requestObj = [NSMutableURLRequest requestWithURL:url]; 
```

使用此行并检查：

```
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url]; 
```

# database - 数据库访问的全局属性，而不是到处传递数据库？建议任何人？

> ID：14314090
> 
> 赞同：0
> 
> 时间：2013-01-14T06:19:36.253
> 
> 标签：database, vb.net, ms-access, properties, global-variables

全球人是邪恶的，对吧？至少我读到的所有内容都是这样说的，因为某些事情可能会在任何时候改变全局的状态。

但是，我有一个关于类参数的 DB 对象。下面的属性是在 MS Access 或 SQL 中自动工作的包装类的一个实例——因此它不是 EF 或其他一些 ORM。

```
Public Property db As New DBI.DBI(DBI.DBI.modeenum.access, String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0} ;Persist Security Info=True;Jet OLEDB:Database Password=""lkjhgfds8928""", GetRpcd("c:\cms"))) 
```

代码本身确实具有用于异常处理的 PostSharp，所以我认为我可以通过记录它们并在它为 Null 时重新初始化 DB 来有条件地处理 oledb 错误。

到目前为止，解决方案一直是不断地将 db 作为参数传递给每个需要它的类。大多数数据类都有一个共享的 observablecollection，它是由单独实现 inotifyproperty changed 的​​结构构建的。其中之一是异步构建的。集合属性在触发私有 Async buildCollection 子之前检查它是否为空。

鉴于我们还没有使用依赖注入，因为我需要学习它；全球财产有那么糟糕吗？数据被拉入或保存的任何地方都需要 Db。我根本不需要它的唯一地方是视图及其背后的代码。

这不是一个面向客户的项目，但它确实需要可靠。

任何建议都感激不尽！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:28:44.493

使用依赖注入将数据库连接作为参数传递到您的类中，也许您只是没有意识到它。在调用者中对连接字符串进行硬编码仍然是不依赖于依赖关系的代码，但至少您的数据库访问器本身不依赖于全局连接。

全局变量不仅是邪恶的，因为它们会在没有通知的情况下发生变化——这只是你看到的糟糕设计选择所产生的一种影响。它们是邪恶的，因为使用它们的设计很脆弱。依赖全局变量的代码需要在调用它之前正确设置不可见的东西，这会导致不相关代码之间的相互依赖。看不见的东西变成了至关重要的东西。仅读取内部使用全局变量的模块的接口，我怎么知道我必须在调用 SetupGlobalThing() 方法之前调用它？如果我根据用户选择的函数以不同的顺序调用 IncrementGlobalThing() 和 DecrementGlobalThing() 和 MultiplyGlobalThing() 会发生什么？

相反，更喜欢传递所有要更改和使用的东西的无状态方法： IncrementThing(Integer thing) 不依赖于隐藏的设置步骤。它显然做了一件事：它增加了传入的东西。

从单元测试的角度考虑它可能会有所帮助。如果您要编写单元测试来证明特定的代码模块有效，您是否需要传递真实的数据库连接（硬*），或者您是否能够轻松传递满足您的测试需求的假数据库引用?

测试逻辑的最佳方法是对其进行单元测试。测试类接口和方法结构的最佳方法是编写调用它们的单元测试。如果类很难测试，很可能是由于对外部事物的依赖（全局、单例、数据库、不适当的成员变量等）

*   我之所以称使用真正的数据库为“硬”，是因为单元测试需要简单快速地运行。它不应该依赖于缓慢、易碎或复杂的外部事物。考虑在没有网络连接的情况下在总线上对您的软件进行单元测试。想想创建一个虚拟数据库需要做多少工作：您必须添加用户，您必须在其中拥有正确版本的模式，必须安装它，必须填充正确类型的测试数据，您需要与它的网络连接，所有这些都会使您的测试不可靠。取而代之的是，在单元测试中，您传入一个模拟数据库，该数据库仅返回执行您正在测试的代码的值。

# ruby-on-rails - 试图在“rescues/layout”中捕获 Rails 中的错误？

> ID：14314093
> 
> 赞同：0
> 
> 时间：2013-01-14T06:19:45.290
> 
> 标签：ruby-on-rails

我有很多图片，偶尔有一两张无法正常访问。我不想插入一个空白点，而是想捕获错误而不添加任何内容。

错误：

`Rendered /Users/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)`

如何在 html.erb 中进行测试？

```
 <ul>
        <% @photos.each do |photo| %>
          <% if [HOW DO I TEST IT HERE?] %>  //if no error
            <li style="float: left;">
              <%= link_to image_tag(photo.image.url(:thumb)), photo %>
            </li>
          <% else %> //if it errors that it can't access the file
             // put nothing
          <% end %>
        <% end %>
      </ul> 
```

另外，为什么它被称为/位于`rescues/layout`？我认为错误是由 处理的`logger`，还是这不同？

完整跟踪：

```
`Started GET "/system/images/13/thumb/f838fe117a5a1f03ff5d2056d026d61a.jpg?1358062373" for 127.0.0.1 at 2013-01-14 00:19:19 -0500

ActionController::RoutingError (No route matches [GET] "/system/images/13/thumb/f838fe117a5a1f03ff5d2056d026d61a.jpg"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /Users/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:00:28.060

将您的逻辑放在辅助方法中

```
#PhotosHelper
def validate_image(img_path)
    "<li><img src=\"#{img_path}\"></li>" if File.exist?(img_path)
end

#view
<% @photos.each do |photo| %>
<%= validate_image(photo.image.url(:thumb))%>
<% end %> 
```

[您可以使用content_tag](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)清理 validate_image 方法

# javascript - 动态创建一系列与 keyup/down 一起播放的振荡器

> ID：14314095
> 
> 赞同：0
> 
> 时间：2013-01-14T06:19:52.903
> 
> 标签：javascript, dom, web-audio-api

问题是这样的：在下面的例子中， http: [//jsfiddle.net/GmgGY/2/](http://jsfiddle.net/GmgGY/2/)

当您单击橙色按钮时，它会创建一个新的 div。当你点击这个 div 时，它会播放一个振荡器。如果您在键盘上按下一个键（keydown），它也会播放它。然后当键盘字符被抬起（keyup）时它会停止播放。这很好，也是我想要的。

但是，当您多次单击橙色按钮并创建多个合成器时。当您在键盘上按下一个键时，它们都会播放（这就是我想要的），但只有最后一个创建的键似乎响应 keyup 事件。我希望它们都响应 keyup 事件。不仅仅是最后一个.

我不知道如何解决这个问题。

每个动态创建的 div 都有一个唯一的 ID，但也有一个通用的类。我认为可能有一种方法可以选择类（synth.class）并在 keyup 上启动通用振荡器.disconnect() ???

我在想的另一件事是我的问题可能需要某种迭代线程来补偿导致此问题的任何 DOM 问题（假设它不仅仅是迄今为止的编程）。但我不确定。

Javascript代码如下。我试图让它尽可能小，但我不知道如何使它比这更小并且仍然很清楚。我省略了 html 和 css 元素，但将它们保留在 JSfiddle 示例中。

```
$(function(){

var SynthCreationModule = (function(){   
context = new webkitAudioContext(); 
var orangeButton;
var applicationArea = document.getElementById("applicationArea"),
orangeButton = document.getElementById("orangeButton"),         
counterSynth = 1;
counterPitchInput = 1;
orangeButton.addEventListener("click",createSynth, false); 

function createSynth () {
  var synth = document.createElement("div"); 
  synth.className  = "synth";                         
  synth.id = "synthid" + (counterSynth++);
  applicationArea.appendChild(synth);
  var pitchInput = document.createElement('input');
  pitchInput.type = "range";
  pitchInput.className  = "pitchInputClass";
  pitchInput.id = "pitchInput" + (counterPitchInput++);
  pitchInput.min = "0";
  pitchInput.max="2000";
  synth.appendChild(pitchInput);

synth.onmousedown= function () {
   oscillator = context.createOscillator(),  
   oscillator.type = 2;  
   oscillator.frequency.value = pitchInput.value;                   
   oscillator.connect(context.destination);  
   oscillator.noteOn(0); 

};

synth.onmouseup = function ()    {  
oscillator.disconnect(); 

};

// Keydown & keyup events to launch oscillator. ( These don't work properly if you create two or more synths. Playing a key down works, but keyup only works on the last created synth. The previous created synths will continue to create additional oscillators but the keydown will not work to stop them.

var keydown = false;

$('body').keydown(function() {
    if(!keydown){
        synth.onmousedown();
        keydown = true;
    }
});

$('body').keyup(function() {
    synth.onmouseup();
    keydown = false;
});

$(synth).draggable(); 

};

}());

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:47:26.667

您的问题实际上是您从未明确声明和范围“振荡器” - 所以它进入了全局变量。试着把“这个”。在每次出现“振荡器”之前，它都会起作用。

但是，这不是理想的代码，因为您为每个合成器附加了一个额外的主体事件处理程序 - 您的代码

```
$('body').keydown(function() {
    if(!keydown){
        synth.onmousedown();
        keydown = true;
    }
}); 
```

正在创建一个完整的单独函数调用并在引擎盖下的主体上调用 attachEventHandler，“合成器”绑定到新版本；跟踪合成器列表（甚至从 body.getElementsBySelector() 中获取它们）并在每​​个合成器上调用 noteOn/Off 可能会更好。不过，由你决定。

# php - 如何在记事本++中编写php代码？

> ID：14314096
> 
> 赞同：-4
> 
> 时间：2013-01-14T06:19:56.153
> 
> 标签：php, notepad++

我对这个编辑器很陌生，我想知道在 notepad++ 中编写 PHP 代码的基础知识，例如我应该创建哪个文件，以及从哪个选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T06:22:13.313

首先，打开记事本++。如果屏幕上没有新文档，则打开一个新文档。然后转到语言菜单选项，向下到 P，然后选择 PHP。然后输入您的 PHP 代码。当您要保存它时，请按右上角附近的保存按钮，然后选择一个名称。

就这样。很简单吧？

请注意，可以从语言栏中选择其他语言。如果您不选择任何语言，它将是默认文本，但也可以更改，并且在您使用`.php`扩展名保存文件后，Notepad++ 会自动将文档识别为 PHP，并相应地呈现它。

PS 如果这一切看起来有点复杂，您可能想阅读 bretterer 的评论。这正是你应该做的。

# ajaxform - ajaxForm (malsup) 在第一次提交时不起作用

> ID：14314097
> 
> 赞同：0
> 
> 时间：2013-01-14T06:19:57.237
> 
> 标签：ajaxform

我正在使用 jquery ajaxform malsup 提交我的表单。我的表单是file.php，提交后会在process.php中处理。

问题：提交在第一次尝试时不起作用。我必须再次刷新页面并重新输入数据以提交它才能使其工作......

这是提交代码：

```
$(document).ready(function() {
    var options = {
        success: function() {
            $('.loadergif2').remove();  
            var self = $(this);
            noty({
                text: 'Save Successful!',
                type: 'success',
                dismissQueue: true,
                timeout: 3000,
                layout: 'bottomRight'
            });
        }
    };
    $('#Frm006').submit(function() { 
            $(this).find('.webblock-btn-area').append('<div class="loadergif2"></div>');
        tinymce.triggerSave()
            $(this).ajaxSubmit(options); 
            return false; 
        });
});  

</script> 
```

和形式

```
<form action="process.php" id="Frm006" method="post" class="general-form" enctype="multipart/form-data">
..............//rest of form code
</form> 
```

我错过了什么吗？

谢谢你的帮助~~~

# c# - 自定义对象上的 C# 聚合

> ID：14314100
> 
> 赞同：0
> 
> 时间：2013-01-14T06:20:16.050
> 
> 标签：c#, aggregation

我有一个`List<Fields>`集合，其中类 Fields 具有以下属性

`(Name, Currency, Amount, Date, OtherList)`其中 OtherList 是一个列表

**样本值**

```
Name  Currency  Amount Date         F1    F2    F3  
ABC   XX        12     12 Jan 2013  X     Y     Z  
BCA   YY        11     12 Jan 2013  A     B     C  
ABC   XX        10     13 Jan 2013  X     Y     Z 
```

现在 OtherList 对象将具有et.el的`(X, Y, Z)`值`record1``(A, B, C)``record2`

我需要做的是在名称、货币、F1、F2 和 F3 字段的上述列表上应用聚合，以便结果如下。

**输出**

```
Name  Currency  Amount Date         F1    F2    F3  
ABC   XX        22     13 Jan 2013  X     Y     Z  
BCA   YY        11     12 Jan 2013  A     B     C 
```

知道我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:59:24.223

您可以使用 LINQ：

```
var aggrList = list
    .GroupBy(x => new { x.Name, x.Currency, x.F1, x.F2, x.F3 })
    .Select(grp => new {
            Name = grp.First().Name,
            Currency = grp.First().Currency,
            Amount = grp.Sum(x=>x.Amount),
            Date = grp.Max(x=>x.Date),
            F1 = grp.First().F1,    
            F2 = grp.First().F2,    
            F3 = grp.First().F3,    
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:58:27.483

尝试这样分组：

```
list.Where(x => x.OtherList != null && x.OtherList.Count >= 3 )
    .GroupBy(x => new {F1 = x.OtherList[0], F2 = x.OtherList[1], F3 = x.OtherList[2]})
    .Select(g => new
    {
        Name = g.First().Name,
        Currency = g.First().Currency,
        Amount = g.Sum(x => x.Amount),
        Date = g.Max(x => x.Date),
        F1 = g.Key.F1,
        F2 = g.Key.F2,
        F3 = g.Key.F3,
    }); 
```

我想`Date`你会`Max()`为 Amount - 应用函数，`Sum()`但你打算如何为`Name`和`Currency`字段应用聚合？

# iphone - -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 没有被调用

> ID：14314104
> 
> 赞同：0
> 
> 时间：2013-01-14T06:20:36.660
> 
> 标签：iphone, xcode, methods, storyboard, call

我正在开发 Storyboards。我使用了一个表格视图，并在它的单元格上创建了​​一个从这个表格视图单元原型到新视图控制器的 Segue。

我也包括了一个方法

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    UITableViewCell *cell=sender;
    NSLog(@"%@",cell.textLabel.text);
    thirdViewController *thid=[segue destinationViewController];
    thid.strValue=cell.textLabel.text;

} 
```

但它没有被调用。

这个方法什么时候被调用..？

任何帮助将不胜感激。

谢谢维卡斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:26:31.803

如果您想打开新的 Viewcontroller，请尝试以下行，希望对您有所帮助：

```
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
       Synergy *objSynergy = (Synergy *)[mainStoryboard instantiateViewControllerWithIdentifier:@"Synergy"];
      [self presentModalViewController:objSynergy animated:YES]; 
```

Synergy 是我的新控制器名称，您将其替换为您的类名称，根据您的要求更改此代码。

# ruby-on-rails-3.2 - 第 9 章，练习 6，Michael Hartl 的 Ruby on Rails 教程：解决方案是什么？

> ID：14314109
> 
> 赞同：1
> 
> 时间：2013-01-14T06:21:15.290
> 
> 标签：ruby-on-rails-3.2, railstutorial.org, ruby-1.9.3

在 Michael Hartl 的*Ruby on Rails 教程，第 2 版*，第 9 章的练习 6 中，说：

> 登录用户没有理由访问用户控制器中的新操作和创建操作。如果他们确实尝试访问这些页面，请安排将此类用户重定向到根 URL。

如何为此编写 rspec 测试？我试过这个

```
 describe "POST on Users#create" do
    before { post users_path }
    specify { response.should redirect_to(root_path) }
  end 
```

我尝试过使用 do/end 块，添加用户属性的哈希等。上面的代码片段已添加到[官方示例代码的](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/authentication_pages_spec.rb)第 162 行。他们都给我这个错误：

```
Failures:

  1) Authentication authorization as non-admin user POST on Users#create 
     Failure/Error: before { post users_path }
     AbstractController::DoubleRenderError:
       Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".
     # ./app/controllers/users_controller.rb:27:in `create'
     # ./spec/requests/authentication_pages_spec.rb:72:in `block (5 levels) in <top (required)>'

Finished in 2.72 seconds
88 examples, 1 failure 
```

至于限制对用户控制器中新操作和创建操作的访问的实际目标，我通过添加以下行来解决它们：

```
admin_user if signed_in? 
```

我知道这很有效，因为我手动测试了它。唯一的问题是我无法为其编写 rspec 测试。[我按照本教程创建的代码可在 github 上找到。](https://github.com/haloflightleader/sample_app)

为什么我会收到此错误？我究竟做错了什么？解决办法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:03:11.750

我自己只是在阅读教程，并且正在做这个确切的练习，所以我当然不是专家。但是，我对请求的解释与您不同。据我了解，如果*任何*登录用户尝试用户新建或创建操作，则请求将重定向到根页面，而不仅仅是非管理员。

无论如何，我见过的最优雅的解决方案是使用[https://stackoverflow.com/a/11287798/1008891中所述的 before_filter](https://stackoverflow.com/a/11287798/1008891)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:19:28.293

保罗，谢谢你的线索。我解决了这个问题。

我试图通过添加来解决目标

```
admin_user if signed_in? 
```

虽然这似乎在浏览器中工作，但在后台还有其他事情发生。在仔细查看我的创建操作后，这是我所做的更改，并且 rspec 测试开始起作用：

```
 diff --git a/app/controllers/users_controller.rb b/app/controllers/users_controller.rb
index 6e0fec8..53f8325 100644
--- a/app/controllers/users_controller.rb
+++ b/app/controllers/users_controller.rb
@@ -8,8 +8,8 @@ class UsersController < ApplicationController
   end

   def new
-    admin_user if signed_in?
-    @user = User.new
+    signed_in? ? admin_user : @user = User.new
+    #@user = User.new
   end

   def show
@@ -17,14 +17,17 @@ class UsersController < ApplicationController
   end

   def create
-    admin_user if signed_in?
-    @user = User.create(params[:user])
-    if @user.save
-      sign_in @user
-      flash[:success] = "Welcome to the Sample App!"
-      redirect_to @user
-    else
-      render 'new'
+    if signed_in?
+        admin_user
+      else
+      @user = User.create(params[:user])
+      if @user.save
+        sign_in @user
+        flash[:success] = "Welcome to the Sample App!"
+        redirect_to @user
+      else
+        render 'new'
+      end
     end
   end 
```

解决方案是将代码包含在完整的 if/else 块中。如果我不这样做，则代码似乎会继续执行，正如创建操作所证明的那样。这对于新操作来说不是问题，因为在简单的三元之后，它只分配了一个实例变量。

总之，我只需要保罗提供一个很好的线索，然后睡个好觉。谢谢你。

# html - 避免使用“googleoff”和“googleon”抓取页面的一部分

> ID：14314111
> 
> 赞同：23
> 
> 时间：2013-01-14T06:21:23.427
> 
> 标签：html, seo, comments, googlebot, google-crawlers

我试图告诉 Google 和其他搜索引擎不要抓取我网页的某些部分。

我要做的是：

```
<!--googleoff: all-->

<select name="ddlCountry" id="ddlCountry">
<option value="All">All</option>
<option value="bahrain">Bahrain</option>
<option value="china">China</option>
</select>

<!--googleon: all--> 
```

上传页面后，我注意到搜索引擎仍在 googleoff 标记中呈现元素。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-10-21T08:48:26.050

只有 Google Search Appliance 支持“googleon”和“googleoff”（当您托管自己的搜索结果时，通常用于您自己的内部网站）。

**谷歌的网络搜索根本不支持它们。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-19T20:41:57.260

`data-nosnippet`仅由`div`、`span`或元素的数据属性替换`section`，如下所示：[https ://developers.google.com/search/docs/advanced/robots/robots_meta_tag?hl=en#data-nosnippet-attr](https://developers.google.com/search/docs/advanced/robots/robots_meta_tag?hl=en#data-nosnippet-attr)

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2015-08-07T11:47:39.383

正确的 googleon 标签如下所示：

```
 <!--googleon: all> 
```

# ios - 想在目标 c 中创建字节数组

> ID：14314114
> 
> 赞同：1
> 
> 时间：2013-01-14T06:21:41.280
> 
> 标签：ios, objective-c

我想在目标 c 中创建一个字节数组，我找不到 java 的 ByteArrayOutputStream 和 DataOutputStream 的等效代码。例如..

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
DataOutputStream dos = new DataOutputStream(bos);
dos.writeLong(counter); //counter is a long data type for eg 1165620611
dos.flush();
byte[] data = bos.toByteArray();
return data; 
```

此代码实际上返回八字节数组...这是 java [0,0,0,0,69,121,-11,-125] 中的输出

这正是我在目标 c 中想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T17:14:15.757

```
// #1 long to char array
long l = 1165620611;
char bytes[sizeof(long)];
memcpy(bytes,&l,sizeof(l));

// #2 char array to nsdata
int size = sizeof(bytes)/sizeof(char);
NSData *data = [NSData dataWithBytes:bytes length:size];

// #3 nsdata to char array
char buffer[size];
[data getBytes:buffer length:size];

// #4 prints char array: 0 0 0 0 69 121 -11 -125
while (0<size--) {
    NSLog(@"%d",buffer[size]);
} 
```

NSData 根本不需要，您可以跳过步骤#2 和#3。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T06:23:45.940

在目标中使用 char`buff[]`数组 - c

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:25:50.027

您可以为此使用[NSData](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)和[NSMutableData](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html)类。

> **NSData 及其可变子类 NSMutableData 为字节缓冲区提供数据对象、面向对象的包装器。**数据对象让简单分配的缓冲区（即没有嵌入指针的数据）具有 Foundation 对象的行为。
> 
> NSData 创建静态数据对象，而 NSMutableData 创建动态数据对象。NSData 和 NSMutableData 通常用于数据存储，并且在分布式对象应用程序中也很有用，其中数据对象中包含的数据可以在应用程序之间复制或移动。
> 
> 数据的大小受到大约 8 ExaBytes 的理论限制（实际上，限制不应成为一个因素）。
> 
> NSData 与其核心基金会对应的 CFDataRef 是“免费桥接”的。有关免费桥接的更多信息，请参阅“免费桥接”。

# .net - 用于聊天应用程序的 WCF 与 Web Api

> ID：14314121
> 
> 赞同：1
> 
> 时间：2013-01-14T06:22:33.847
> 
> 标签：.net, wcf, client-server, asp.net-web-api, chat

现在我正在创建一个聊天应用程序。我目前正在使用 webapi 来构建应用程序后端。但是我在想我是否应该为此使用 WCF。我的目标是让应用程序成为一个多层应用程序，其中客户端可以是任何技术（不一定来自微软堆栈）。就应用程序未来的可扩展性观点而言，有什么我应该担心的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:56:14.523

如果这是一个普通的 Web API，那么我会说正确使用 WebApi 将为您提供使用大量客户端技术的能力——如果它们支持使用 HTTP 进行交互；但是，您正在构建一个聊天客户端，它有一些非常不同的设计考虑。

通过与聊天客户端的简单/普通 WebApi 接口，您最终可能会得到一个要求您的客户端反复轮询新消息的架构——这可能并不理想。您发现的大多数 .NET 聊天示例通常会在套接字等上运行 TCP 级别。例如，[这](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/65c848ca-537a-4494-b5e8-3509ea61c171)3 个示例和客户端能够“侦听”消息，通过 Http 事情并不是那么简单。

有支持推送（或模拟推送）的 WebApi 示例非常[适合](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)聊天API [，](https://github.com/davidfowl/JabbR)例如[SignalR](http://signalr.net/)对你来说可能是个问题。

因此，使用 WCF 在 TCP 和 Socket 级别工作可能是您的最佳方法，但如果您确实想要一个基于 Web 的 Api 到您的解决方案并想要推送（类型）消息传递，那么请查看 SignalR 或 CometD 的实现，如果您只是如果想要一个开放的 Web Api 可用于许多客户端技术而不支持推送，那么 WebApi 将是一个非常好的选择。

顺便说一句：要获得对客户端（例如现有聊天客户端等）的最广泛支持，请考虑使用标准化的聊天协议，例如 XMPP。如果需要，这可以在 SignalR 上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:44:07.070

从我的角度来看，如果您的客户端可以使用任何技术（MS 或非 MS）和任何类型（Web、Mobile、Desktop、Smart、Rich..），那么您应该使用 MVC Web Api。它更具互操作性，非常有趣！请注意，此解决方案适用于您的前端服务：您的后端服务可能采用 WCF 等其他技术。

# sql - 从子查询中选择不同顺序的列

> ID：14314126
> 
> 赞同：1
> 
> 时间：2013-01-14T06:23:04.777
> 
> 标签：sql, oracle

我有以下表结构。我想根据 office_id 和最新的 login_datetime 选择不同的 user_id。

```
tbl_id      user_id     office_id login_datetime
----------------------------------------
1           2           28          12/28/2012 5:35:50 AM
2           2           15          12/28/2012 5:35:50 AM
3           3           20          12/28/2012 5:35:50 AM
4           4           28          12/28/2012 5:35:50 AM
5           2           28          12/28/2012 5:35:50 AM
6           4           15          12/28/2012 5:35:50 AM
7           3           20          12/28/2012 5:35:50 AM 
```

我试过了：

```
SELECT user_id as u_id,office_id,
(select login_datetime from tbl t2 where t2.user_id=u_id AND ROWNUM=1 ORDER BY t2.tbl_id DESC ) as LAST_LOGIN  
FROM tbl
GROUP BY user_id,office_id 
```

但是，它对我不起作用，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:25:26.620

采用`Window Function`

```
SELECT  tbl_id, user_id, office_id,login_datetime
FROM    
    (
        SELECT tbl_id, user_id, office_id,login_datetime,
                ROW_NUMBER() OVER (PARTITION BY user_id, "office_id"
                                    ORDER BY login_datetime DESC) rn
        FROM tableName
    ) a
WHERE   a.rn = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/012e4/15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T06:45:03.497

另一种解决方案是直接`group by`使用 a `keep dense rank`：

```
select user_id, office_id, 
 max(login_datetime) keep (dense_rank first order by login_datetime desc) as latest_login_datetime
from tbl
group by user_id, office_id 
```

或者如果你想要唯一的 user_id：

```
select user_id, 
 max(office_id)  keep (dense_rank first order by login_datetime desc) as lastest_office_id, 
 max(login_datetime) keep (dense_rank first order by login_datetime desc) as latest_login_datetime
from tbl
group by user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:31:05.040

好的，我已将示例更改为 ORACLE

我将解释查询

首先，我选择一个不同的 user_id 和 office id（因此，如果一个用户属于两个办公室，他将返回两次），然后选择 MAX login_datetime 以获取最新的日期时间，

然后在 WHERE 中，我通过 office_id 过滤查询，它等于所有不同的办公室。（基本上我正在返回一个不同的 office_id 表）

最后，由于 MAX 功能，我按 user_id 和 office_id 分组

```
SELECT 
DISTINCT "user_id" ,
"office_id",
 MAX("login_datetime")
FROM TableName
WHERE "office_id" IN (SELECT DISTINCT "office_id" FROM TableName)
GROUP BY 
  "user_id",
  "office_id" 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!4/012e4/40)

# css - 如果浏览器现在可以缩放，我们为什么要使用 em 而不是 px？

> ID：14314132
> 
> 赞同：5
> 
> 时间：2013-01-14T06:23:59.957
> 
> 标签：css

我经常看到人们说使用'em's 是一个更好的主意，因为当人们需要更改他们的默认字体大小时它会更好地工作。

但我从来没有听说过有人改变他们的字体大小。但是，我听说有人（并且我自己也做过）放大和缩小。放大和缩小效果很好。

他们过时了吗？我终于可以回到像素了吗？还是人们仍然更改默认字体大小？如果他们这样做了，当人们改变字体大小时，像素是否仍然会破裂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:25:55.873

嗯，当你想创建自定义的可伸缩按钮时，em 在 css 中很不错，你看。如果您使用像素进行填充，那么您将进行大量测量，而如果您使用 em，则填充将根据字体大小动态缩放。

# php - php 设置对象属性，如 array_fill_keys($keys, '') 对数组执行

> ID：14314134
> 
> 赞同：0
> 
> 时间：2013-01-14T06:24:15.627
> 
> 标签：php, object, properties

我想要一个 PHP 方法，它可以让我设置对象的属性，例如：

`array_fill_keys($keys, '');`

用于数组的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T10:01:20.730

这可能会完成这项工作：

```
// Same value for al properties, uses array values only
function object_fill_properties($properties, $value) {
    foreach ($properties as $property) {
        if (property_exists($this, $property)) {
            $this->$property = $value;
        }
    }
}

// Different values for each property, uses key-value array
function object_fill_properties_kv($properties) {
    foreach ($properties as $property => $value) {
        if (property_exists($this, $property)) {
            $this->$property = $value;
        }
    }
} 
```

如您所见，这适用于现有属性。另一方面，如果您希望在运行时向对象添加属性，请查看[此问题](https://stackoverflow.com/questions/829823/can-you-create-instance-properties-dynamically-in-php)。

# javascript - 保持滚动位置会导致页面跳转

> ID：14314135
> 
> 赞同：2
> 
> 时间：2013-01-14T06:24:20.130
> 
> 标签：javascript, asp.net, scroll

我正在使用 asp.net 2.0 开发一个网站，我最近添加了几行`javascript`来保存`scroll position`div `across postbacks`。

问题是当页面加载时，div 的滚动位置从顶部开始，然后跳转到保存的位置。
如何摆脱这种跳跃效应？该网站位于 www.collectedlight.net。

这是我用来保持滚动位置的javascript：

```
window.onload = function () {
   //maintain the scroll position for the list of photos across postbacks
   var scrollPos = document.getElementById('ctl00_pagePlaceHolder_photoListScrollPos').value;
   document.getElementById('photoListScrollBar').scrollTop = scrollPos;
}

//save the scroll position of the list of photos
function SaveScrollPos() {
   var scrollPos = document.getElementById('photoListScrollBar').scrollTop;
   document.getElementById('ctl00_pagePlaceHolder_photoListScrollPos').value = scrollPos;
} 
```

滚动位置确实被保存了，但是当页面加载时，我可以看到滚动位置首先设置为顶部，然后跳到保存的滚动位置。我希望页面在没有跳转效果的情况下在保存的滚动位置加载。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:00:07.057

通过将代码附加到`window.onload`事件中，您可以阻止代码运行，直到所有页面资产（包括图像）都加载完毕。这就是为什么您只在其中一张图片需要一段时间才能加载时才看到问题的原因。您可能可以通过附加到`DOMContentLoaded`事件来解决您的问题。通过在页面底部附加此事件，您可以确保在加载 DOM 和 CSS 并且您的页面布局基本上准备好后执行您的代码，而无需等待每个页面资源都加载完毕。有关详细信息，请参见此处：http: [//ablogaboutcode.com/2011/06/14/how-javascript-loading-works-domcontentloaded-and-onload/](http://ablogaboutcode.com/2011/06/14/how-javascript-loading-works-domcontentloaded-and-onload/)。

# ios - UITextView 在调整捏合效果时留下右边距

> ID：14314140
> 
> 赞同：1
> 
> 时间：2013-01-14T06:24:50.680
> 
> 标签：ios, ios5, ios6, ios-simulator

我正在尝试对 UITextView 进行捏合效果，以便用户可以根据需要调整其大小。

我面临的问题是，当 textView 增长然后再次缩小时，文本会留下很大的右边距并且看起来很奇怪。每次将 textView 从大调整为小时，右边距都会增加。

以下是我用于捏合效果的代码：

```
- (void)pinchGesture:(UIPinchGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
       initialFrame = textEdit.frame;
    }

    CGFloat factor = gestureRecognizer.scale;
    CGAffineTransform zt = CGAffineTransformScale(CGAffineTransformIdentity, factor, factor);
    CGRect newframe = CGRectApplyAffineTransform(initialFrame, zt);
    [textEdit setFrame:CGRectMake(initialFrame.origin.x, initialFrame.origin.y, newframe.size.width, newframe.size.height)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:32:55.980

您可以使用 UIWebview 来显示文本。它具有自动放大和缩小功能。

# java - VelocityEngineUtils 已在 Spring 3.2 中删除，那么还有什么可以使用的呢？

> ID：14314143
> 
> 赞同：20
> 
> 时间：2013-01-14T06:25:14.203
> 
> 标签：java, spring, velocity

今天我已经将我的整个 Spring Web 应用程序从使用 Spring 升级`3.1.1`到 Spring `3.2`。

我现有应用程序的大部分内容都没有中断，除了在 Spring`3.2`中，

```
org.springframework.ui.velocity.VelocityEngineUtils 
```

类似乎已完全从**spring-context-3.2.0.RELEASE.jar 中删除**。

[我在这个](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/migration-3.2.html)url中找到了迁移指南。

它表示`org.springframework.ui.velocity.VelocityEngineUtils`该类刚刚被弃用，但实际上它已被完全删除。

也许我弄错了，我想知道 VelocityEngineUtils 类是否仍然存在于某个地方，或者如果不存在，我可以使用的替代类是什么。

**编辑：**似乎整个速度包已从 Spring 中删除，`3.2`所以现在甚至 `org.springframework.ui.velocity.VelocityEngineFactoryBean`不存在。Spring正在远离Velocity吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-02-20T16:44:21.350

我想添加一个完整的答案。

首先，添加依赖项：

```
<dependency>
    <groupId>org.apache.velocity</groupId>
    <artifactId>velocity</artifactId>
    <version>1.6.4</version>
</dependency> 
```

那么，如果你有这样的习惯`VelocityEngineFactory`；

```
@Bean
public VelocityEngineFactory velocityEngine(){
    VelocityEngineFactoryBean bean = new VelocityEngineFactoryBean();
    Properties properties = new Properties();
    properties.setProperty("input.encoding", "UTF-8");
    properties.setProperty("output.encoding", "UTF-8");
    properties.setProperty("resource.loader", "class");
    properties.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
    bean.setVelocityProperties(properties);
    return bean;
} 
```

您需要将其替换为 bean 定义，如下所示（在您的`@Configuration`课程中）；下面的定义允许您从类路径加载模板。

```
@Bean
public VelocityEngine velocityEngine() throws Exception {
    Properties properties = new Properties();
    properties.setProperty("input.encoding", "UTF-8");
    properties.setProperty("output.encoding", "UTF-8");
    properties.setProperty("resource.loader", "class");
    properties.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
    VelocityEngine velocityEngine = new VelocityEngine(properties);
    return velocityEngine;
} 
```

最后，将其用作：（`registration.vm`可在类路径中找到）

```
@Autowired
private VelocityEngine velocityEngine;

public String prepareRegistrationEmailText(User user) {
    VelocityContext context = new VelocityContext();
    context.put("username", user.getUsername());
    context.put("email", user.getEmail());
    StringWriter stringWriter = new StringWriter();
    velocityEngine.mergeTemplate("registration.vm", "UTF-8", context, stringWriter);
    String text = stringWriter.toString();
    return text;
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-02T17:24:00.117

关于 Spring 中 VelocityEngineUtils 的弃用，Spring 文档对使用什么不是很清楚。

它只是说：

> 已弃用。请改用 mergeTemplateIntoString(VelocityEngine, String, String, Map)，遵循 Velocity 1.6 在其自己的 API 中的相应弃用。

为了使它更加混乱，该链接引用自身。

基本上它只是说使用 Velocity 本身。

这是你如何做到这一点的描述..

```
 // instead of a model map, you use a VelocityContext

 VelocityContext velocityContext = new VelocityContext();
 velocityContext.put("key1", value1);
 velocityContext.put("key2", value2);

 // the velocityEngine you wired into Spring has a mergeTemplate function
 // you can use to do the same thing as VelocityEngineUtils.mergeTemplate
 // with the exception that it uses a writer instead of returning a String      

 StringWriter stringWriter = new StringWriter();
 velocityEngine.mergeTemplate("templateName.vm", "UTF-8", velocityContext, stringWriter);

 // this is assuming you're sending HTML email using MimeMessageHelper

 message.setText(stringWriter.toString(), true); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-14T06:58:54.743

我不认为`VelocityEngineUtils`是在`spring-context`罐子里（至少自 Spring 上一个 3.1.x 版本以来没有，根据 GitHub）。

无论如何，你可以找到它`spring-context-support-3.2.0.RELEASE.jar`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-15T09:33:36.963

VelocityEngineUtils 在 spring > 3.2 中被弃用

下面的依赖将完美地工作

```
<dependency>
            <groupId>com.alibaba.spring</groupId>
            <artifactId>spring-webmvc-velocity</artifactId>
            <version>1.4.3.18.RELEASE</version>
 </dependency> 
```

建议完全弃用 Velocity 并替换为 thymeleaf

# windows - 是否有可以“播放” .exe 文件的开源视频编解码器？

> ID：14314149
> 
> 赞同：0
> 
> 时间：2013-01-14T06:25:52.677
> 
> 标签：windows, opengl, directx, fullscreen, codec

好吧，我想利用 Windows Media Player 在它的视频窗口中运行 .exe 应用程序。例如，应用程序可以是全屏 DirectX 或 OpenGL 应用程序，您可以在操作系统上执行这些应用程序。

我想知道是否有这样的编解码器，以便我可以根据需要对其进行调整？或者也许有一个具有很好的调整能力但不是（完全）开源的？

（我问这个问题是因为这个问题：[https](https://superuser.com/questions/533730/how-to-run-an-directx-or-opengl-application-as-desktop-background) ://superuser.com/questions/533730/how-to-run-an-directx-or-opengl-application-as-desktop-background ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:32:14.437

简单的回答：不。

复杂的答案：您的标题毫无意义，因为在那里您不会谈论播放 exe 文件，而是试图拦截“各种 API”并将它们神奇地转换为视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T11:00:51.897

这可能是我很长时间以来读过的最奇怪的请求。首先是坏消息：不，没有开源编解码器可以在 Windows Media Player 的视频窗口中播放“.exe”生成的输出。“.exe”或更准确的PE文件（便携式可执行文件）包含程序代码，即被您的CPU解释为程序的数据。然而，视频不是程序，而是图像数据。

视频编解码器是在格式之间转换视频数据的*程序。*例如，它可以将压缩的 h.264 解码为适合显示的原始 RGB 数据。视频编解码器有一定的限制，例如它们解码一系列帧。

现在好消息：从技术上讲，编写这样的编解码器是可能的。不过，我无法使用 WMP 打开 .exe，因为 WMP 无法解释这些文件。但是您可以引入一个新的 FOURCC，一个标识特定视频编码格式的 4 字符代码，并使用该 FOURCC 注册一个特殊用途代码。然后，您使用该 FOURCC 创建一个特殊的 AVI 文件，其中包含对目标 .exe 的引用，而不是帧中的视频数据。当 WMP 尝试播放此文件时，它将启动此“编解码器”，而后者又可以启动 .exe。您需要在启动的应用程序和“编解码器”之间建立通信协议。必须创建一个离屏渲染表面，我会说进程之间共享的 PBuffer DC 最适合这个，即“编解码器” 创建 PBuffer 并且 .exe 在它之上创建一个 OpenGL 上下文。然后编解码器将 PBuffer 的内容作为解码后的视频帧传递给 WMP。

* * *

所以是的，可以完成这样的黑客攻击。但这会很丑陋和奇怪。

为什么不简单地为 WMP 编写一个可视化插件呢？那些也可以在视频窗口中运行，但它不需要如此丑陋的 hack。

# razor - 如何从 ServiceStack.Razor 布局模板访问请求 url？

> ID：14314152
> 
> 赞同：1
> 
> 时间：2013-01-14T06:26:08.840
> 
> 标签：razor, servicestack

我使用以下方法为我的网站定义了布局模板 .cshtml：
`@{ Layout = "InsideLayout"; }`

我现在正在尝试获取请求 url，以找出在任何时间点应该将哪个导航菜单项标记为活动。然而，看起来 Request 对象为空（但无法在视图中获得断点，所以问题不是 100%，但很确定）。

对我来说，当前的 Request 对象似乎应该在布局视图中正确填充，因此它可以在其中添加一些上下文敏感的标记，但这似乎是不可能的。是否存在布局必须继承的特定类才能启用此功能，或者是我看到的预期行为？

我认为可能可行的另一个选项是创建一个自定义服务来支持布局视图。我试过这个，但是当加载使用布局的页面时，我无法让服务代码执行。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:27:51.250

通常，您应该可以访问视图内的请求。但更好的方法是在模型中传递它。只需将信息作为属性添加到您传递给此视图的模型中，并让服务填充它。

# java - 如何在 spring mvc 控制器中传递查询？

> ID：14314156
> 
> 赞同：0
> 
> 时间：2013-01-14T06:26:34.113
> 
> 标签：java, spring, jakarta-ee, spring-mvc

假设您在不使用 spring mvc 的普通 servlet 中有类似的东西：

```
if(username == "X" && password =="Y"){
  response.sendRedirect("./user/welcomePage.jsp");
}else{
  response.sendRedirect("./login.jsp?wrongPass=true");
 } 
```

如果用户名&&密码错误，重定向到login.jsp页面后，在login.jsp页面某处以红色通知用户用户名或密码错误：

```
<p style="color:red";
 <%= (request.getParameter("wrongPass")==null)? "visibility:hidden":"" %>;">
    Your username/password is wrong !</p> 
```

我的问题是，有没有办法传递这样的论点：

```
response.sendRedirect("./login.jsp?wrongPass=true"); 
```

在 Spring MVC 控制器内部？

因为如果我们有这样的控制器：

```
@Controller
@RequestMapping(value ="/")
public class Welcome{
public String welcome(@RequestParam("j_username") String username, 
        @RequestParam("j_password") String password){
       .
       .
       .
   return "login"; 
```

作为日志，我们需要返回一个字符串来形成一个页面，因为我们定义了 InternalResourceViewResolver：

```
<bean >class="org.springframework.web.servlet.view.InternalResourceViewResolver">
   <property name="prefix" value="/WEB-INF/views/" />
   <property name="suffix" value=".jsp" />
</bean> 
```

如果我们在控制器中传递参数，例如：在使用 InternalResourceViewResolver 后返回“login?wrongPass=true”，这将创建如下内容：

```
login?wrongPass=true.jsp   Which is totally wrong ... 
```

现在，你有什么解决方案来解决这个问题（不）将字符串添加到我们的控制器中的模型并在 JSP 中获取参数？我希望浏览器 url 变成这样：

```
http://localhost:8080/myProject/login.jsp?wrongPass=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:37:24.217

您可以使用重定向前缀，然后您可以使用绝对 URL

```
return "redirect:http://localhost:8080/myProject/login.jsp?wrongPass=true"; 
```

您也可以使用 HttpServletRequest 的方法动态构建绝对 url

# git - 在远程服务器上我自己的私人仓库的 git clone 权限被拒绝 - 即使我添加了一个新的公钥和所有

> ID：14314158
> 
> 赞同：8
> 
> 时间：2013-01-14T06:27:04.860
> 
> 标签：git, github, ssh

我一直在设置一个服务器实例（Amazon EC2、Ubuntu 12.x），并且在尝试从 git 克隆我自己的私有仓库时遇到了困难。

我一直在看[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)和[https://help.github.com/articles/error-permission-denied-publickey](https://help.github.com/articles/error-permission-denied-publickey)一段时间，但仍然没有好的。

我在远程机器上生成了一个新的 ssh 密钥对

```
ssh-keygen -t rsa -C "myemailaddress@myemail.com" 
```

并很好地设置了我的 git 配置，**并且我已将公钥添加到我的 github 帐户**中。电子邮件地址与我在本地计算机的 ssh 密钥上使用的电子邮件地址相同（我不知道这是否重要）。

在启动一个 ssh-agent 然后做之后`ssh-add -l`，我得到一个与我的 github 公钥中所说的相匹配的指纹结果。`ssh -T git@github.com`还告诉我我已成功通过身份验证。

但是，每当我尝试

```
git clone https://github.com/dmonopoly/myprivateproject.git 
```

或者

```
git clone git@github.com:dmonopoly/myprivateproject.git 
```

在远程机器上（我已经 sshed 进入），我得到这个错误：

```
fatal: could not create work tree dir 'myprivateproject'.: Permission denied 
```

想法？我已经处理过`permission denied (public key)`以前的问题，但这似乎有所不同。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T06:48:13.133

> ```
> fatal: could not create work tree dir 'myprivateproject'.: Permission denied
>                  ^^^^^^^^^^^^^^^^^^^^ 
> ```

这与访问存储库完全无关。您正在尝试将其克隆到您没有写入权限的目录。**检查正在运行的机器上的`git clone`**权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T14:40:17.273

命令前面的 sudo 为我处理了它。比跟踪需要更改权限的文件夹更容易。

# jquery - Imagefit 垂直

> ID：14314160
> 
> 赞同：1
> 
> 时间：2013-01-14T06:27:15.127
> 
> 标签：jquery, css, image

我正在使用 Oliver Boermans 的 jQuery 插件将图像放入具有 100% 宽度和高度的容器中（因此，本质上是视口）；[http://www.olicle.com/eg/jquery/imagefit/](http://www.ollicle.com/eg/jquery/imagefit/)

插件的核心是这个；

```
$(img)
    .width('100%').each(function()
    {
        $(this).height(Math.round(
            $(this).attr('startheight')*(dim.outerWidth/$(this).attr('startwidth')))
        );
    })
    .css({marginTop: Math.round( ($(window).height() - $(img).height()) / 2 )}); 
```

`startwidth`和`startheight`属性包含图像的实际像素尺寸。

现在，当图像比视口宽时，这绝对完美。但是，我发现当视口垂直短于图像时，它不会将图像垂直适应视口。

我如何修改这个插件以考虑除了水平之外的垂直拟合，以便无论视口的尺寸和纵横比如何，图像的每一英寸总是完全显示？

我准备了一把小提琴来玩；[http://jsfiddle.net/NXJCd/](http://jsfiddle.net/NXJCd/) - 调整 Result 分区的大小以查看插件的运行情况。如果将高度设置为比拟合图像短，则图像的顶部和底部边缘会被剪切。

**编辑：**所以经过一番困惑，我想澄清一下；我想按比例*将*图像放入容器内。所有图像都需要始终可见，但不能大于其原始尺寸。我在下面形象化了它。我为此使用的 jQuery 插件适用于水平拟合（示例 A 和 C），但它不适合垂直拟合（示例 B）。这就是我要解决的问题。

![例子](../Images/31966818d7a8e00398a8f42c65182ed8.png)

**EDIT2：**经过进一步的混淆，我什至制作了一个动画，详细说明了我希望它的行为方式；[http://www.swfme.com/view/1064342](http://www.swfme.com/view/1064342)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:16:57.390

更改`one`功能对我有用：

```
one : function(img){
    var parentDim = $(img).parent().getHiddenDimensions();        
    var heightWidthRatio = $(img).attr('startheight') / $(img).attr('startwidth');
    var newWidth, newHeight;

    //Width > height.
    if(heightWidthRatio < 1) {            
        newWidth = parentDim.outerWidth > $(img).attr('startwidth')
            ? $(img).attr('startwidth') : parentDim.outerWidth;
        newHeight = Math.round(newWidth * heightWidthRatio);

        if(newHeight > parentDim.outerHeight) {
            newHeight = parentDim.outerHeight;
            newWidth = Math.round(newHeight / heightWidthRatio);
        }
    }
    //Height >= width.
    else {            
        newHeight = parentDim.outerHeight > $(img).attr('startheight')
            ? $(img).attr('startheight') : parentDim.outerHeight;
        newWidth = Math.round(newHeight / heightWidthRatio);

        if(newWidth > parentDim.outerWidth) {
            newWidth = parentDim.outerWidth;
            newHeight = Math.round(newWidth * heightWidthRatio);
        }
    }

    $(img).width(newWidth).height(newHeight)
        .css({marginTop: Math.round(($(window).height() - $(img).height()) / 2 )});
} 
```

请注意，这将使用父级的大小`div`- 因为图像大小在 CSS 中设置为 100%，这意味着初始图像尺寸大于包含的 div，这可能会在第一次调用该函数时导致问题。

**编辑：**

我已经更新了上面的代码，但变化是：

```
newWidth = parentDim.outerWidth; 
```

变成：

```
newWidth = parentDim.outerWidth > $(img).attr('startwidth') ? $(img).attr('startwidth') : parentDim.outerWidth; 
```

和

```
newHeight = parentDim.outerHeight; 
```

变成：

```
newHeight = parentDim.outerHeight > $(img).attr('startheight') ? $(img).attr('startheight') : parentDim.outerHeight; 
```

这些更改应确保图像不会扩展到大于其实际尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:19:47.753

也许不完全是您正在寻找的东西，但我整理了一个始终显示全屏图像但仍然具有纵横比的[变体，否则图像可能看起来很失真：](http://jsfiddle.net/gguuL/)

```
function optSizeImage( selector ) {
    var obj;
    if(typeof selector === 'undefined' || !selector) {
        selector = '.visual img, .gallery-box img';
    }
    obj = ( typeof ( selector ) == 'string' ) ? $( selector ) : selector;
    function resizeImg() {
        var imgwidth = obj.width(),
          imgheight = obj.height(),
          winwidth = $(window).width(),
          winheight = $(window).height(),
          widthratio = winwidth / imgwidth,
          heightratio = winheight / imgheight,
          widthdiff = heightratio * imgwidth,
          heightdiff = widthratio * imgheight;
       if(heightdiff>winheight) {
        obj.css({
          width: winwidth+'px',
          height: heightdiff+'px'
        });
       } else {
        obj.css({
          width: widthdiff+'px',
          height: winheight+'px'
        });     
       }
    }
   resizeImg();
};

$(document).ready(function(){
  optSizeImage($("img"));
  $(window).bind('resize',function(){
    optSizeImage($("img"));
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:50:19.530

长宽比重要吗？查看这个纯 CSS 解决方案：http: [//jsfiddle.net/Sdush/](http://jsfiddle.net/Sdush/)

单击“放大外部 div”链接以查看图像扩展填充。

这是代码：

```
<div id="out">
  <img id="expand" src="someImage.jpg" />
</div> 
```

...和CSS：

```
#out{width:800px;height:600px;}
#expand{width:100%;height:100%;} 
```

但是同样，这不尊重图像的纵横比，并且需要容器的可识别宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T20:21:45.393

不会 max-width 和 max-height 给你你想要的吗？将最大宽度和最大高度设置为容器大小，它应该限制为容器大小，但纵横比将由浏览器保持。

html:

```
<img id="testimg" src="https://www.google.co.il/images/srpr/logo3w.png"/> 
```

JS代码：

```
i = -25;
function resizeme() {
    var theimg = $("#testimg");
    i++;
    $(theimg).css("max-width", 275 + (i * 5));
    $(theimg).css("max-height", 95 + (i * 2));
}
setInterval(function () {resizeme();}, 500); 
```

看看[这个小提琴](http://jsfiddle.net/hNpkH/4/)。

# php - 使用带有'的值时给出mysql错误

> ID：14314164
> 
> 赞同：-1
> 
> 时间：2013-01-14T06:27:55.283
> 
> 标签：php, mysql, sql

我写了一个查询

```
mysql_query("insert into db_manufacturer(mfgName) values('$manufacturer')" 
```

何时`$manufacturer = ram's`或`sam's`等然后它给出`sql`错误，如何克服这个错误。如果我使用`""`then 在数据库中插入变量而不是变量值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:21:55.823

```
 mysql_query("insert into db_manufacturer(mfgName) values('$manufacturer')") 
```

什么时候`$manufacturer`会`"ram's"`像

```
 mysql_query("insert into db_manufacturer(mfgName) values('ram's')") 
```

这被打破了，因为值结束分隔符出现了两次；也就是说，有奇数个单引号。

**现在解决方案**

```
mysql_query("
  INSERT INTO db_manufacturer
    (mfgName)
  VALUES
    ('".mysql_real_escape_string($manufacturer)."')
"); 
```

一个好的、简单、可扩展和安全的方法是使用参数化查询。此类查询的参数称为绑定变量。

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:29:11.020

```
$manufacturer = mysql_real_escape_string($manufacturer);
mysql_query("insert into db_manufacturer(mfgName) values('$manufacturer')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:29:29.783

```
$manufacturer = mysql_real_escape_string($manufacturer);
mysql_query("insert into db_manufacturer(mfgName) values('$manufacturer')" 
```

*   [mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

但我建议使用 PDO 或 MySQLI。

这是一篇很棒的文章：

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T06:29:59.437

使用`mysql_real_escape_string`which 转义字符串中的特殊字符以用于 SQL 语句

```
$manufacturer = mysql_real_escape_string($manufacturer); 
```

更多细节：

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T06:30:21.550

它已被弃用，但您正在寻找`mysql_real_escape_string`.

但是忘记`mysql_`并学习PDO，它更安全。

# ruby-on-rails - 使用 ActiveSupport::Concern 实现 DCI

> ID：14314173
> 
> 赞同：1
> 
> 时间：2013-01-14T06:29:05.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 和 Ruby 的新手。我正在尝试在 Rails 3.2.11 应用程序中实现 Data-Context-Interaction /aka DCI/ 范例。我有与`User`模型`one-to-many`关联的`Topic`模型。我正在尝试编写一个mixin `User`，但它们不起作用，请您提供一些调试帮助。

我的混合看起来像：

```
module Speaker

  extend ActiveSupport::Concern

  included do
    has_many :assigned_topics, class_name: 'Topic', foreign_key: 'speaker_id'
  end

  def add_topic(topic)
    topic.speaker = self
    topic.save
  end

  def remove_topic(topic)
    topic.speaker = nil
    topic.save
  end
end 
```

当我运行以下代码时，出现错误：

```
u = User.first
u.extend Speaker
u.assigned_topics
NoMethodError: undefined method `assigned_topics' for #<User:0x00000002f5dca8> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:05:14.933

不要在 Rails 中使用 DCI 模式。至少如果您希望获得一些流量。扩展现有对象目前*非常缓慢*。它使每个 ruby​​ 实现的缓存机制崩溃。

我知道在过去的几周里，这种被高估的东西有些模糊，但实际上：不要以这种方式使用它。这只是一个大麻烦和很多戏剧性。Rails*不是*Java 框架，因此它没有像 Java 那样的问题。

如果您想将东西从模型移动到模块，请使用简单的关注点，并将其硬编码到模型中。在运行时没有实时扩展和所有的箍。这是@dhh 的要点如何使用它：[https ://gist.github.com/1014971](https://gist.github.com/1014971)

# wordpress - 在 Wordpress 中更改类别元标题和描述

> ID：14314178
> 
> 赞同：0
> 
> 时间：2013-01-14T06:29:40.387
> 
> 标签：wordpress

是否可以更新类别标题和描述并在类别页面上添加文本？

我曾尝试在论坛/谷歌上搜索这件事，但找不到正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T23:02:58.380

Yoast 的 SEO 作品。可以使用插件更改标题和元描述。

# asp.net - 使用 c# 动态添加的复选框在 asp.net 中不起作用？

> ID：14314179
> 
> 赞同：0
> 
> 时间：2013-01-14T06:29:41.887
> 
> 标签：asp.net, checkbox, dynamic-controls

我通过这样做在我的 asp.net 页面中添加多个复选框：

```
 public static CheckBox[] chck; 
```

在页面加载时：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
      con.Open();
        SqlCommand cmd = new SqlCommand("select count(CompanyName) from Stock_Company");
        cmd.Connection = con;
        comno = Convert.ToInt32(cmd.ExecuteScalar());
         con.Close();

        chck = new CheckBox[comno];
    }
 } 
```

现在我有一个生成复选框的函数：

```
 public void generatecheckbox1()
{

    con.Open();
    SqlCommand cmd = new SqlCommand("select CompanyName from Stock_Company");
    cmd.Connection = con;
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    da.Fill(ds);
    DataTable dt = ds.Tables[0];
    con.Close();
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        chck[i] = new CheckBox();
        chck[i].ID = "chck" + Convert.ToString(i);
        chck[i].Text = dt.Rows[i]["CompanyName"].ToString();
        pnlcom1.Controls.Add(chck[i]);
        pnlcom1.Controls.Add(new LiteralControl("<br />"));
    }
  } 
```

我在一个组合框事件上调用它：

```
 protected void ddluserwebser_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddluserwebser.SelectedItem.Text == "Custom")
    {
        generatecheckbox1();
    }
 } 
```

就这一切而言，一切都很好......但在一个按钮点击我想得到我没有得到的选择复选框的文本

我做了一个功能：

```
 public string getbsecompany()
{
    string companyname = "";
    string bsetricker = "";
    con.Open();
    SqlCommand cmd = new SqlCommand("select CompanyName from Stock_Company");
    cmd.Connection = con;
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    da.Fill(ds);
    DataTable dt = ds.Tables[0];
    con.Close();
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        if (chck[i].Checked == true)     **THE PROBLEM IS HERE**
        {
            companyname = chck[i].Text;
            con.Open();
            SqlCommand cmdd = new SqlCommand("select BSETickerCode from Stock_Company where CompanyName='" + companyname + "'");
            cmdd.Connection = con;
            bsetricker += bsetricker + "+" + cmdd.ExecuteScalar();
            con.Close();
        }
    }

    return bsetricker;
} 
```

我在这里称呼它：

```
 protected void btnusersave_Click(object sender, EventArgs e)
{
    string bsetricker = "";
    bsetricker = getbsecompany();
} 
```

问题是我没有得到复选框的文本。当我检查时，`if (chck[i].Checked == true)`我刚开始`false`并且所有复选框都被选中。我现在该怎么办？任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:52:44.023

如果您希望动态控件显示在页面中，则每次都应在 On_Init() 中将动态控件添加到页面中。否则你什么也得不到。另外，最好不要使用静态值来包含复选框列表，当多个用户访问同一页面时会导致问题。您可以将它们保存在会话中或尝试 this.Form.FindControls()

# php - 从经纬度获取国家名称

> ID：14314183
> 
> 赞同：2
> 
> 时间：2013-01-14T06:30:02.090
> 
> 标签：php, google-maps, google-geocoder

我有一个纬度和一个经度，我需要获取国家/地区。

我正在使用这个：

```
$geocode_stats = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?latlng=".$deal_lat.",".$deal_long . "&sensor=false");
$output_deals = json_decode($geocode_stats);
$country = $output_deals->results[2]->address_components[4]->long_name; 
```

有时它给出一个正确的国家名称，但有时它给出空白值，有时它返回一个城市名称。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:14:36.130

我写了一个函数来简化它。只需传入您的地理地址，该地址可以是完整地址、邮政编码，或者在您的情况下是纬度和经度。然后它将在地址组件数组中搜索国家。如果无法找到县，它将简单地返回 null，如果需要，您可以将其更改为空字符串 ("")。

```
function getGeoCounty($geoAddress) {
    $url = 'http://maps.google.com/maps/api/geocode/json?address=' . $geoAddress .'&sensor=false'; 
    $get     = file_get_contents($url);
    $geoData = json_decode($get);
    if (json_last_error() !== JSON_ERROR_NONE) {
        throw new \InvalidArgumentException('Invalid geocoding results');
    }

    if(isset($geoData->results[0])) {
        foreach($geoData->results[0]->address_components as $addressComponent) {
            if(in_array('administrative_area_level_2', $addressComponent->types)) {
                return $addressComponent->long_name; 
            }
        }
    }
    return null; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-26T08:25:51.633

从纬度和经度获取完整的地址。

```
$url = 'http://maps.googleapis.com/maps/api/geocode/json?latlng='.trim($lat).','.trim($lng).'&sensor=false';
$json = @file_get_contents($url);$data=json_decode($json);
echo $data->results[0]->formatted_address;
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T10:38:37.003

```
$deal_lat=30.469301;

$deal_long=70.969324;

$geocode=file_get_contents('http://maps.googleapis.com/maps/api/geocode/json?latlng='.$deal_lat.','.$deal_long.'&sensor=false');

$output= json_decode($geocode);

for($j=0;$j<count($output->results[0]->address_components);$j++){

    $cn=array($output->results[0]->address_components[$j]->types[0]);

    if(in_array("country", $cn)){
        $country= $output->results[0]->address_components[$j]->long_name;
    }
}

echo $country; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-05T10:26:28.013

```
$deal_lat=30.469301;
$deal_long=70.969324;
$geocode=file_get_contents('http://maps.googleapis.com/maps/api/geocode/json?latlng='.$deal_lat.','.$deal_long.'&sensor=false');

$output= json_decode($geocode);

for($j=0;$j<count($output->results[0]->address_components);$j++){

    $cn=array($output->results[0]->address_components[$j]->types[0]);

    if(in_array("country", $cn)){
        $country= $output->results[0]->address_components[$j]->long_name;
    }
}

echo $country; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T21:26:22.827

I did take the code of matwonk as base.

```
function getGeoCounty($geoAddress) {
    $url = 'http://maps.google.com/maps/api/geocode/json?address=' . urlencode($geoAddress) .'&sensor=false'; 
    $get     = file_get_contents($url);
    $geoData = json_decode($get);
    if(isset($geoData->results[0])) {
        $return = array();
        foreach($geoData->results[0]->address_components as $addressComponet) {
            if(in_array('political', $addressComponet->types)) {
                if($addressComponet->short_name != $addressComponet->long_name)
                    $return[] = $addressComponet->short_name. " - " . $addressComponet->long_name; 
                else
                    $return[] = $addressComponet->long_name; 
            }
        }
        return implode(", ",$return);
    }
    return null;
} 
```

The code return in format: neighborhood, City, State, Country

if detect a shortname (as country code or state code) appear in format CODE - NAME.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-23T13:51:36.767

```
        $latlng = '22.7314,75.88243';
        $request_url = "http://maps.googleapis.com/maps/api/geocode /xml?latlng=".$latlng."&sensor=true";
        $xml = simplexml_load_file($request_url);

        if($xml->status == "OK") {
        $address = $xml->result->formatted_address;
          foreach ($xml->result->address_component as $address) {
            如果（“国家”==修剪（$地址->类型））{
              $country = $address->short_name;
            }
          }
        }

```

# php - 输入类型在带有锚点和标签的 IE 7 和 8 中不起作用

> ID：14314184
> 
> 赞同：-2
> 
> 时间：2013-01-14T06:30:07.643
> 
> 标签：php, javascript, html, css

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:35:16.577

您的代码是错误的，您不需要围绕输入元素的锚标记。它应该看起来像：

```
<a href="<?php echo $url; ?>" id="quotenow" class=""><span class="blue_btn">My Anchor</span></a> 
```

或者，如果您想要按钮上的 onclick 事件，那么您可以执行以下操作：

```
<!-- this uses javascript to get the result. 
     Typically button and input elements are 
     processed by a form which you'll see in the demo -->
<button onclick="window.open('<?php echo $url; ?>', '_self'); return false;"><span class="blue_btn">My Button</span></button> 
```

以下是**元素输入不得作为 a 元素的后代出现的规则。**这是一个[演示](http://jsfiddle.net/rqrS4/)。

# c# - JSON writer - 替换 xmlwriter？

> ID：14314186
> 
> 赞同：2
> 
> 时间：2013-01-14T06:30:17.260
> 
> 标签：c#, xml, xml-serialization, json

没有在这个主题上花费大量时间，我很好奇除了 xml 之外，让我现有的代码序列化为 json 的最直接方法可能是什么。现有代码使用 xmlwriter 为特定目的执行一些复杂的序列化，所以最终我希望能够传递一个 jsonserializer 来代替 xml 并让它生成 json 而不是 xml。

是否有任何 json 库处理这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:33:03.117

不，没有直接的替代品。现有 JSON 序列化程序的 API 有很大不同。他们需要将整个模型保存在内存中，并一步将其序列化。例如，对于[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)，您将使用：

```
string json = JsonConvert.SerializeObject(product); 
```

实现您正在寻找的正确方法是抽象接口后面对象的实际序列化：

```
public interface IMySerializer
{
    void Serialize(MyObject instance, Stream stream);
} 
```

现在您可以有此接口的多个实现，例如`MySerializerXml`, `MySerializerJson`, `MySerializerCsv`, ...

现在依赖于序列化的代码可以简单地使用`IMySerializer`. 因此，当您需要处理新格式时，您所要做的就是*插入*此接口的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:34:27.100

没有直接替代`XmlWriter`. 如果您想同时支持 XML 和 JSON，我建议通过数据合同进行序列化，即使用数据对象上的属性来指示所需的序列化格式。查看适用于 JSON的[DataContractJsonSerializer和适用于 XML 的](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)[DataCONtractSerializer](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.datacontractserializer.aspx)。

您的模型对象看起来像这样：

```
[DataContract(Name = "Customer", Namespace = "http://www.contoso.com")]
class Person
{
    [DataMember()]
    public string FirstName;
    [DataMember]
    public string LastName;
    [DataMember()]
    public int ID;
} 
```

# ios - 无法在 iTunes Connect 中请求新合同（适用于 iOS 付费应用程序）

> ID：14314192
> 
> 赞同：0
> 
> 时间：2013-01-14T06:31:21.087
> 
> 标签：ios, app-store-connect, contract

这是我的情况：

我加入了 Mac OSX 和 iOS 开发计划。

我已成功获得 Mac OS X 付费应用程序的合同。

现在我想获得一份 iOS 付费应用程序的合同。

但是，正如我的屏幕截图所示，我没有请求按钮。我应该联系 Apple 的支持吗？

![在此处输入图像描述](../Images/2dd96fd21329b15dc5554f20817adc37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:34:20.440

是的，建议您直接联系苹果。

# ruby-on-rails - 用于博客文章的rails嵌套资源未定义方法

> ID：14314195
> 
> 赞同：0
> 
> 时间：2013-01-14T06:32:28.287
> 
> 标签：ruby-on-rails, ruby

我试图允许对嵌套资源发表评论，当我选择创建评论按钮时，我在 app/controllers/comments_controller.rb:7:in 'create' 中得到了一个未定义的方法“comment”。由于我还是 ruby​​ 和 rails 的新手，因此我按照入门指南中的代码进行操作，但似乎无法弄清楚错误的原因。

协会是：

```
has_many :comments
belongs_to :restaurant 
```

在我的路线中

```
resources :restaurants do
    resources :comments
 end 
```

在评论控制器中

```
def create
    @restaurant = Restaurant.find(params[:restaurant_id])
    @comment = @restaurant.comments.create(params[:comment])
    redirect_to restaurant_path
end 
```

在我的餐厅展示模板中

```
<%= form_for([@restaurant, @restaurant.comments.build]) do |f| %>
<h2>Add a comment</h2>
  <div>
    <%= f.text_area :body %>
  </div>
  <div>
    <%= f.submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:46:39.473

您应该在 create 语句的第一行执行以下操作

```
raise params.to_yaml 
```

您应该会看到类似以下内容

```
utf8: ✓
authenticity_token: ...
comment: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  commenter: Test Commenter
  body: Test Comment
commit: Create Comment
action: create
controller: comments
restaurant_id: '1' 
```

您网站的其余部分应如下所示

**评论控制器.rb**

```
def create
  @restaurant = Restaurant.find(params[:restaurant_id])
  @comment = @restaurant.comments.create(params[:comment])
  redirect_to restaurant_path(@restaurant)
end 
```

**评论.rb**

```
class Comment < ActiveRecord::Base
 has_many :comments
 belongs_to :restaurant
end 
```

**餐厅.rb**

```
class Restaurant < ActiveRecord::Base
 attr_accessible :content, :name, :title
 has_many :comments
end 
```

您可能错过了指南中的一步。其他一切看起来都很好。

# sockets - 将二进制数据发送到 IP 地址和端口的免费工具？

> ID：14314203
> 
> 赞同：1
> 
> 时间：2013-01-14T06:33:10.710
> 
> 标签：sockets, telnet, binary-data, utility

我正在使用 Windows 7。有一个应用程序正在侦听 IP 地址和端口。它等待二进制数据来处理它。目前，我正在测试该应用程序。

是否有免费工具可用于将二进制数据发送到 IP 地址和端口？

我曾尝试使用 telnet 连接到 IP 地址和端口，但不幸的是我无法在命令提示符中输入二进制数据。

例如，我想输入这个二进制数据（我在这里用十六进制显示）：
FFFFEF0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:02:02.827

如果您不介意安装它，Python 使交互式套接字的使用变得非常容易。下面是一个带有 HTTP 连接的交互式会话示例，用于演示目的：

```
>>> import socket
>>> sock = socket.socket()
>>> sock.connect(("www.google.com", 80))
>>> sock.send("GET / HTTP/1.1\r\nHost: www.google.com\r\n\r\n")
40
>>> sock.recv(64)
'HTTP/1.1 302 Found\r\nLocation: http://www.google.co.uk/\r\nCache-Co' 
```

对于二进制数据，您可以执行以下操作：

```
sock.send("\xff\xfa\xfe\xf0") 
```

套接字 API 在 Python 中使用字符串，但正如您所见，发送任意字节非常容易。

如果您不想为此安装 Python，我可以理解（尽管它有一个非常简单的安装程序），但我个人认为在这种情况下它是一个合理的工具——您拥有强大的灵活性那里的语言，但您不必使用它。

或者，您可以获得[netcat for windows](http://joncraton.org/blog/46/netcat-for-windows)，它应该能够接受来自带有重定向的文件的输入（我很确定 DOS 支持）。所以，如果你把你的二进制数据放到一个文件中`binary_data.bin`，你可以这样做：

```
nc hostname.org 1234 < binary_data.bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:50:22.900

我找到了一个名为**TCP/IP Builder**的免费软件工具。

但是，如果您找到了更好的免费工具，请告诉我。

# ios - 检测音量按钮按下并释放 iOS

> ID：14314207
> 
> 赞同：5
> 
> 时间：2013-01-14T06:33:50.427
> 
> 标签：ios, objective-c, cocoa-touch

> **可能重复：**
> [程序访问 iPhone 音量按钮](https://stackoverflow.com/questions/772832/program-access-to-iphone-volume-buttons)

是否可以在 iOS 应用程序中检测到音量增大按钮按下/释放？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:46:00.743

您可以在应用程序中检测音量按钮按下，但它使用 Apple 的私有 API。由于他们不允许您在您的应用程序中使用他们的私有 API，这会直接导致您的应用程序被拒绝，因此使用它需要您自担风险。

在你的`viewDidLoad:`，例如：

```
MPVolumeView *volumeView = [[MPVolumeView alloc] initWithFrame:CGRectMake(18, 340, 284, 23)];
[self.view addSubview:volumeView];

[NSNotificationCenter.defaultCenter
    addObserver:self
       selector:@selector(volumeDidChange:)
           name:@"AVSystemController_SystemVolumeDidChangeNotification"
         object:nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T06:38:05.790

看看[http://fredandrandall.com/blog/2011/11/18/taking-control-of-the-volume-buttons-on-ios-like-camera/](http://fredandrandall.com/blog/2011/11/18/taking-control-of-the-volume-buttons-on-ios-like-camera/)

本质上，您必须初始化音频会话，使其处于活动状态，然后监听更改。最后你发起一个回调。

但是，请注意硬件命令的实现。无意的滥用可能会让您被禁止进入应用商店。

# android - 更改 EditText 的焦点颜色？

> ID：14314212
> 
> 赞同：4
> 
> 时间：2013-01-14T06:34:21.180
> 
> 标签：android, themes

聚焦时如何更改 EditText 的颜色？在模拟器中，聚焦时它是蓝色的，我看不到从 XML 布局或以编程方式更改它的方法。我不知道如何更改其他视图的焦点颜色以及按钮和微调器。![EditText 蓝色的选定颜色](../Images/7646ea6b2ddb366cd7e78cd9238097ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:37:53.920

```
yourEditText.setOnFocusChangeListener(new OnFocusChangeListener() {

                public void onFocusChange(View v, boolean hasFocus) {
                    if (v == yourEditText)
                    {
                        if (hasFocus)
                        {
                           yourEditText..setTextColor(Color.RED);

                        } 
                        else
                        { 

                        }
                    }

                }
            }); 
```

为此使用焦点侦听器（按钮等）

**编辑** 您必须使用 XML 并为此设置视图的背景

```
 <?xml version="1.0" encoding="utf-8"?>
<selector 
xmlns:android="http://schemas.android.com/apk/res/android"
>
    <item 
      android:state_pressed="true"
      android:color="yourDesiredcolorcode" 
    /> <!-- pressed -->    
    <item 
       android:state_focused="true"
       android:color="yourDesiredcolorcode"
    /> <!-- focused -->    
    <item 
           android:color="yourDesiredcolorcode"
    /> <!-- default -->
</selector> 
```

干杯

# hadoop - ClassNotFoundException，同时运行 Hadoop 的示例作业

> ID：14314213
> 
> 赞同：0
> 
> 时间：2013-01-14T06:34:24.423
> 
> 标签：hadoop, mapreduce, command

我看到了帖子并遵循了这个过程。但它没有用。 [ClassNotFoundException，在运行 Hadoop 的示例作业时](https://stackoverflow.com/questions/8488554/classnotfoundexception-while-running-example-job-of-hadoop/14314172#14314172)

**请帮帮我。**

1.  创建了**mapreduce-0.1-tests.jar**（实际上有一个 MapReduceTest.class）

2.  从本地复制输入文件 > hadoop dfs -copyFromLocal 输入 /Users/test/Documents/movie_titles_only.csv

3.  hadoop jar **/Users/test/project/mapReduce/target/mapreduce-0.1-tests.jar** MapReduceTest -D mapred.reduce.tasks=0 input/movie_titles_only.csv movie_output

但！！这是相同的消息...我该怎么做，请帮帮我！

```
Exception in thread "main" java.lang.ClassNotFoundException: MapReduceTest at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T05:10:57.123

你需要用来`job.setJarByClass`指定你的jar。在您的代码中添加以下语句：

```
job.setJarByClass(MapReduceTest.class); 
```

# jquery - 需要 jQuery 显示/隐藏建议，根据上一页点击显示特定的 div

> ID：14314216
> 
> 赞同：0
> 
> 时间：2013-01-14T06:34:32.363
> 
> 标签：jquery, hide, parameter-passing, pass-by-reference, show

我已经建立了一个带有侧边导航的页面，单击的每个选项都会导致显示某个 DIV，而隐藏其他 DIV。我为此编写了 jQuery，它就像一个魅力。

我感到困惑的是，其他页面上的链接是否可能实际上链接到此页面上的不同部分。换句话说，“第 1 节”的链接打开此页面并显示第 1 节，以及“第 2 节”的链接打开此页面且第 2 节已显示。

任何人都可以帮忙吗？

```
<style type="text/css">
    #content div.section    {   display:none;   }
    #content div.one    {   display:block;  }
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>    
<script type="text/javascript"> 
$(document).ready(function() {
    $('#side_nav ul li a').click(function() {
        $('#side_nav ul li.current').removeClass('current');
        $(this).parent().addClass('current');

        var filterVal = $(this).attr('class');

            $('#content div.section').each(function() {
                if($(this).hasClass(filterVal)) {
                    $(this).fadeIn(200);
                } else {
                    $(this).hide();
                }
            });
        return false;
    });
});
</script>

<section class="main wrapper">
    <div id=side_nav>       
        <ul>
            <li class=current><a href="#" class=one>TOPIC ONE</a></li>
            <li><a href="#" class=two>TOPIC TWO</a></li>
            <li><a href="#" class=three>TOPIC THREE</a></li>
        </ul>
    </div>

    <div id=content>
        <div class="section one">
            <h3>Subtitle</h3>
            <p>One Content</p>
            <br>
            <h3>Subtitle</h3>
            <p>One Content</p>
        </div>
        <div class="section two">
            <h3>Subtitle</h3>
            <p>Two Content</p>
            <br>
            <h3>Subtitle</h3>
            <p>Two Content</p>
        </div>                                      
        <div class="section three">
            <h3>Subtitle</h3>
            <p>Three Content</p>
            <br>
            <h3>Subtitle</h3>
            <p>Three Content</p>
        </div>
</section> 
```

谁能详细说明我将如何使用“window.location.hash”从传入的链接点击中捕获哈希标签，并通过上面的 Javascript 传递它以显示适当的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:40:07.713

在您的文档 URL 中添加一个哈希，以确定应该扩展哪个部分。

```
http://www.mysite.com/#two 
```

然后通过javascript检查并展开相应区域

```
var hash = location.hash.replace('#','');
if (hash != '') {
    $('a.' + hash).addClass('current');  //selector is equiv of $('a.two')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:49:16.830

如果您有来自其他页面的链接包含一些额外的信息，那么当您的页面加载时，您将能够检测到您应该显示哪个部分。

您可以提供链接类值作为传入链接上的哈希值，`yourpage.html#one`然后用于`window.location.hash`检索该值。

在您的情况下，您可以向您的`document.ready()`处理程序添加一些代码，以查看传入链接是否具有值并根据需要显示该部分。

编辑：更新以包括实施示例。

```
<script type="text/javascript"> 
    $(document).ready(function() {

        var hashFromLink = window.location.hash != '' ? window.location.hash.replace('#','') : "";
        loadSection(hashFromlink);

        $('#side_nav ul li a').click(function() {
            $('#side_nav ul li.current').removeClass('current');
            $(this).parent().addClass('current');

            var filterVal = $(this).attr('class');

            $('#content div.section').each(function() {
                if($(this).hasClass(filterVal)) {
                    $(this).fadeIn(200);
                } else {
                    $(this).hide();
                }
            });
            return false;
        });
    });

    function loadSection(filterVal) {
        $('#content div.section.' + filterVal).fadeIn(200);                // this should fade in the section with the location hash class
        $('#side_nav ul li a.' + filterVal).parent().addClass('current');  // this should find the anchor tag in the nav and apply the current class to its parent
    }
</script> 
```

再多说几句，显然这只是你可以做到的一种方式。我认为这些选择器应该可以工作，并且您可能还想从哈希值中清理输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:41:57.467

基于 mrtshermans 的回答（这对我很有用......谢谢！）......

如果（哈希==''）{

//如果有hash如果为空或null，则做一些事情

}

如果（哈希！=='' {

//如果设置了hash，做一些事情

$('a.' + hash).css('color', '#ffffff');

}

请注意，需要使用 '==' 而不是 '=' 才能使我的一些 css 生效。

# android - 使用图形 API 在 Facebook 墙上发帖不起作用

> ID：14314218
> 
> 赞同：4
> 
> 时间：2013-01-14T06:34:44.783
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试使用图形 API 在 Facebook 墙上发布一些内容，但它对我不起作用。它没有错误，但也没有在我的墙上发布任何内容。

这是代码：

```
public class ActivityName extends Activity{

    Dialog dialog;
    Facebook fb;
    SharedPreferences sp;
    String access_token, name, email;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.success);

            String APP_ID = "MY_ID";
            fb = new Facebook(APP_ID);
            sp = getPreferences(MODE_PRIVATE);
            access_token = sp.getString("access_token", null);
            long expires = sp.getLong("access_expires", 0);

            if(access_token!= null){
                fb.setAccessToken(access_token);
            }

            if(expires != 0){
                fb.setAccessExpires(expires);
            }

        ((Button) findViewById(R.id.btn_home)).setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                openContextMenu(v);

            }
        });

        ((Button) findViewById(R.id.btn_home)).setOnCreateContextMenuListener(new View.OnCreateContextMenuListener() {

            public void onCreateContextMenu(ContextMenu menu, View v,
                    ContextMenuInfo menuInfo) {
                // TODO Auto-generated method stub
                menu.setHeaderTitle("Tell the world!");
                menu.add(0, 0, 0, "Facebook");
                menu.add(0, 1, 0, "Twitter");
                menu.add(0, 2, 0, "Skip");
            }
        });

    }

    public boolean onContextItemSelected(MenuItem item) {
            AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();

            switch (item.getItemId()) {
            case 1:

                break;

            case 0:

                 fb.authorize(SuccessActivity.this, new String[]{ "photo_upload,user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener() {
                        public void onComplete(Bundle values) {
                            postToWall();
                        }

                        public void onFacebookError(FacebookError error) {
                        }

                        public void onError(DialogError e) {
                        }

                        public void onCancel() {
                        }
                    });

                break;

            case 2:
                Intent i = new Intent(getApplicationContext(),MainActivity.class);
                startActivity(i);
                overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);

                break;
            }
            return true;
            }

    public void onBackPressed() {

   }

    @SuppressLint("SdCardPath")
    public void postToWall() {
        // post on user's wall.
         try {
                if (fb.isSessionValid()) {
                    byte[] data = null;

                     Bitmap bi = BitmapFactory.decodeFile("/sdcard/Asa.jpg");
                     ByteArrayOutputStream baos = new ByteArrayOutputStream();
                     bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                     data = baos.toByteArray();

                     Bundle params = new Bundle();
                     params.putString(Facebook.TOKEN, fb.getAccessToken());
                     params.putString("message", "Test from Android AVD");
                     params.putByteArray("picture", data);

                     AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(fb);
                     mAsyncRunner.request("/me/feed", params,"POST", new SampleUploadListener(),null);

                }
            }catch(Exception e){
                e.printStackTrace();
            }

    }

    public class SampleUploadListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."

            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {    
        }
    }

} 
```

任何人都可以在此代码中找出缺失或错误的地方吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:22:33.197

这是我不久前用来做类似事情的一些代码：

```
function publishPost(session) {
var $title = $('#title').val(),
    $story = $('#story').val(),
    publish = {
        method: 'stream.publish',
        message: 'I just entered the Your Perfect Kent Day Competition.',
        picture : 'http://apps.facebook.com/perfect-kent-day/',
        link : 'http://apps.facebook.com/perfect-kent-day/',
        name: 'Enter to win or vote for your faourite story here!',
        caption: $title,
        description: $story,
        actions : { name : 'Apply for Kent Teach Jobs...', link : 'http://www.kent-       teach.com/'}
    };

    FB.api('/me/feed', 'POST', publish, function(response) {
    //alert('A post had just been published into the stream on your wall.');
        $('#before-submit').hide();
        $('#after-submit').show();
        $('#loading').fadeOut();
    });
}; 
```

然后，一旦页面上的表单使用 AJAX 提交，我就会调用 publishPost() 函数。希望这有帮助！

# c# - 如何动态更新文本框文本？

> ID：14314219
> 
> 赞同：1
> 
> 时间：2013-01-14T06:34:51.053
> 
> 标签：c#, .net, winforms, textbox

我正在开发一个桌面应用程序，我必须将大量数据从一个数据库传输到另一个数据库。我想动态显示在文本框中传输的记录的详细信息。我正在使用以下代码

插入 db 后执行以下代码：

```
if (val >= 0) 
{
   Transfercounter++;
   saving = "Record " + Transfercounter + " is transferred to new DB"; 
   txtResults.Text = txtResults.Text + saving + Environment.NewLine + Environment.NewLine; 
} 
```

如何在运行时动态显示传输的记录，而不是在执行完成后显示所有记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:16:09.677

就像 Dan Hunex 所说，您应该使用带有 ProgressBar 和显示状态的文本框的 BackgroundWorker 方法：

![后台工作人员上的进度条和文本框](../Images/cbf59d0425460520963d690ec94ad1c2.png)

### 脚步

1.  将您的 SQL 放在 BackgroundWorker 中。[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)上有很好的例子，而且不难使用。

2.  当您调用 BackgroundWorker 时，这会释放您的 UI 以运行某种“状态”控件。

3.  一旦 BackgroundWorker 的 RunWorkerCompleted 发生，您可以删除您的“状态”控件并绑定您的数据或其他

### 更远

*   如果您喜欢 ProgressBar，我建议您查看 CodeProject 上的这篇文章：[ProgressWorker](http://www.codeproject.com/KB/progress/ProgressWorker.aspx)
*   [MSDN 上的后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)
*   如果你是初学者，[基础教程](http://www.dotnetperls.com/backgroundworker)
*   [另一个教程](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c%23/)
*   一个非常[相关的问题](https://stackoverflow.com/questions/8447856/displaying-a-progressbar-while-executing-an-sql-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:45:51.693

使用后台工作者。msdn 中有很好的示例，您可以自定义它以达到您想要的效果 [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# c# - 可以等待的异步计数器

> ID：14314223
> 
> 赞同：7
> 
> 时间：2013-01-14T06:35:28.377
> 
> 标签：c#, asynchronous, task-parallel-library, async-await

我有一个连接类，它有几个异步方法，如 SendText、SendImage 等。

连接类有一个 Disconnect 方法，当它被调用时，我必须小心不要在所有异步方法完成执行之前开始更改类的内部状态。

我相信实现这一点的一个好方法是简单地保持正在执行的操作总数，然后当我想断开连接时，我可以简单地设置 Disconnecting = true 然后等待计数达到 0

我正在考虑类似的事情

```
class ReferenceCounter
{
    void Increment();

    void Decrement();

    async Task WaitForCounterToReachZero();
} 
```

然后当异步操作开始时我可以做

```
refCounter.Increment(); 
```

当它结束时

```
refCounter.Decrement(); 
```

在 Disconnect 方法中

```
disconnecting = true;
taskCancellationSource.Cancel();
await refCounter.WaitForCounterToReachZero();
Cleanup(); 
```

有没有像这样的内置 .NET 类？

或者对我来说更重要的是，有没有更好的方法来做到这一点？

如果它是同步代码，它会很简单

```
lock (thisLock)
{
    while (counter > 0)
        Monitor.Wait(thisLock);
} 
```

我刚刚发现内置的 CountdownEvent 类做同样的事情，但它没有异步等待方法，也没有任何事件，所以我不得不阻止。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T06:46:30.233

*好吧，假设您将其设为 0后*永远不会再增加，您可以执行以下操作：

```
public class Latch
{
    private int count = 0;
    private readonly TaskCompletionSource<object> tcs =
        new TaskCompletionSource<object>();

    public void Increment()
    {
        Interlocked.Increment(ref count);
    }

    public void Decrement()
    {
        if (Interlocked.Decrement(ref count) == 0)
        {
            tcs.TrySetValue(null);
        }
    }

    public Task Task { get { return tcs.Task; } }
} 
```

然后你可以等待`someLatch.Task`。或者，您可以使闩锁本身可等待：

```
public TaskAwaiter GetAwaiter()
{
    return tcs.Task.GetAwaiter();
} 
```

您可能应该考虑如何防止“下降到 0 后计数上升”方面 - 想想您希望它做什么。（在上面的代码中，一旦设置了 TCS 的值，进一步的等待将立即完成。）

# java - 实现我自己的有序双向链表（Java）

> ID：14314225
> 
> 赞同：0
> 
> 时间：2013-01-14T06:35:41.160
> 
> 标签：java

我知道这个问题之前被问过几次，但其他主题似乎都没有讨论我正在尝试做的事情。

```
public void add(int Value) {
      DListNode previous = null;
      DListNode current = first;

      while ((Integer)current.getValue() < Value) {
          previous = current;           //move previous up to current
           current = current.getNext(); //advance current one node ahead

           if (current == null) {  //if current is the very last node in the list
               break;
           }
      }

      if (previous == null) { //if the previous object is null, the value should be inserted at the front
          first = new DListNode(Value, first, null);
      }
      else { //if not, the value should be inserted between current and previous
          previous.setNext(new DListNode(Value, current, previous));

      }

      getLast();  //updates the last field (Not important)

  } 
```

DListNode 是一个包含整数变量、Next DListNode 和前一个 DListNode（以及标准的 getter 和 setter 方法）的类。它使用参数 DListNode(value, next node, previous node) 进行初始化。存储的值是 Object 类型。

我想要做的是在当前和上一个之间插入一个新节点。新节点应设置为previous的下一个节点，current设置为新节点的下一个节点，previous设置为新节点的前一个节点，新节点设置为current的前一个节点。仅当该值大于第一个节点中包含的值时才会发生这种情况。但是，节点只会向前链接，我不知道为什么。

如有必要，我可以发布整个课程，任何帮助或想法将不胜感激。

编辑：我在 Archer 的帮助下想通了。如果有人想知道，这是我的最终方法（我必须添加另一个 if/else 语句来处理 nullPointerErrors）。

```
public void add(int Value) {
      DListNode previous = null;
      DListNode current = first;

      while ((Integer)current.getValue() < Value) {
          previous = current;           //move previous up to current
           current = current.getNext(); //advance current one node ahead

           if (current == null) {  //if current is the very last node in the list
               break;
           }
      }

      if (previous == null) { //if the previous object is null, the value should be inserted at the front
          DListNode insert = new DListNode(Value, current, previous);
          current.setPrevious(insert);
          first = insert;
      }
      else { //if not, the value should be inserted between current and previous
          if (current == null) {
          DListNode insert = new DListNode(Value, current, previous);
          previous.setNext(insert);
          }
          else {
             DListNode insert = new DListNode(Value, current, previous);
             current.setPrevious(insert);
              previous.setNext(insert);
          }

      }

      getLast();  //updates the last field

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:59:13.350

这几行有问题：

```
first = new DListNode(Value, first, null); 
```

和

```
previous.setNext(new DListNode(Value, current, previous)); 
```

您只是添加节点而不更新附近节点的引用。

第一行应如下所示：

```
first = new DListNode(Value, first, null);
first.getNext().setPrevious(first) 
```

第二行应如下所示：

```
previous.setNext(new DListNode(Value, current, previous));
current.setPrevious(previous.getNext()) 
```

类似的东西。

# java - 文本溢出：省略号在 jsf selectOneMenu 和 SelectItem 中不起作用

> ID：14314227
> 
> 赞同：2
> 
> 时间：2013-01-14T06:36:11.723
> 
> 标签：java, jsf

我有一个下拉选择框。我想在该下拉列表中使用省略号。我有selectOneMenu，里面有一个selectItems。我的问题是如何在 selectItems 中使用省略号？我已经尝试过 style 和 styleClass。但它不会工作。任何帮助表示赞赏.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:33:31.003

# objective-c - 在 Objective C 中连接整数和字符串

> ID：14314231
> 
> 赞同：4
> 
> 时间：2013-01-14T06:36:53.390
> 
> 标签：objective-c, xcode, string, integer, concatenation

请原谅问题的简单性。我对Objective C完全陌生。

我想知道如何连接整数和字符串值并将它们打印到控制台。

这就是我想要的输出：

```
10 + 20 = 30 
```

在 Java 中，我会编写这段代码来产生所需的结果：

```
System.Out.Println(intVarWith10 + " + " + intVarWith20 + " = " + result); 
```

Objective-C 完全不同。我们如何连接这 3 个整数以及它们之间的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T10:19:29.420

您可以使用以下代码

```
int iFirst,iSecond;
iFirst=10;
iSecond=20;
NSLog(@"%@",[NSString stringWithFormat:@"%d + %d =%d",iFirst,iSecond,(iFirst+iSecond)]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:39:27.357

看一下`NSString`- 它有一个方法[stringWithFormat 可以满足](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)您的要求。例如：

```
NSString* yString = [NSString stringWithFormat:@"%d + %d = %d",
                              intVarWith10, intVarWith20 , result]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:39:49.730

您可以使用 C 风格的语法和 NSLog（如果您只需要打印）

```
NSLog(@"%d+%d=%d",intvarWith10,intvarWith20,result); 
```

如果你想要一个保存值的字符串变量

```
NSString *str  = [NSString stringWithFormat:@"%d+%d=%d",intvarWith10,intvarWith20,result]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T06:43:47.667

您必须创建一个带有格式的 NSString 并指定数据类型。

像这样的东西：

```
NSInteger firstOperand=10;
NSInteger secondOperand=20;
NSInteger result=firstOperand+secondOperand;
NSString *operationString=[NSString stringWithFormat:@"%d + %d = %d",firstOperand,secondOperand,result];
NSLog(@"%@",operationString); 
```

NSString with format 遵循 C printf 语法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T06:39:37.530

检查以下代码：

```
int i = 8;
NSString * tempStr = [NSString stringWithFormat@"Hello %d",i]; 
NSLog(@"%@",tempStr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T20:53:11.087

我强烈推荐你这个链接[Objective-C Reference](http://techotopia.com/index.php/Objective-C_2.0_Essentials)。

Objective-C int 数据类型可以存储正整数或负整数。int 数据类型可以处理的整数的实际大小或范围取决于机器和编译器的实现。

所以你可以这样存储。

整数a，b；

一个= 10；b = 10；

那么执行操作你需要先了解`NSString`。

C 风格的字符串由单字节字符组成，因此可以存储的字符范围受到限制。

诠释 C = a + b; NSString *strAnswer = [NSString stringWithFormat:@"答案 %d + %d = %d", a , b, c];

NSLog(@"%@",strAnswer)

希望这会帮助你。

# android - CompoundButton Checkbox 在哪里/如何测量可绘制的复选框的宽度

> ID：14314233
> 
> 赞同：3
> 
> 时间：2013-01-14T06:37:07.480
> 
> 标签：android, checkbox, textview, compound-drawables

为了在右侧创建一个复选框，我正在查看 Android 中的代码。但我对 android 在哪里测量复选框图标/drawable 的宽度感到困惑。

**Checkbox**扩展了**CompoundButton**类，并且仅覆盖 onPopulateAccessibilityEvent 方法。CompoundButton 类有更多代码（100 行），它扩展了**Button**类。按钮类几乎没有额外的代码并扩展了**TextView**类。TextView 类的代码量最大（10,000 行）。

这是源代码的链接

**复选框** [http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CheckBox.java/?v=source](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CheckBox.java/?v=source)

**CompoundButton** Web - 语法高亮 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java?av=f)

原始（更快查看） [http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java/?v=source](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java/?v=source)

**TextView** Web - 语法高亮 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/TextView.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/TextView.java?av=f)

原始（更快查看） [http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/TextView.java/?v=source](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/TextView.java/?v=source)

TextView 有一个称为**复合可绘制**对象的功能，您可以在其中将可绘制对象放置在文本的左侧、右侧、底部或顶部。所以我假设这是 CompoundButton 为左侧复合可绘制对象设置可绘制复选框的地方。但是在 CompoundButton 代码中我找不到这个。

但是，当我通过扩展 CompoundButton 创建自定义类并调用 getCompoundPaddingLeft() 时，它给出的宽度大约等于复选框的大小。但是，当您运行 getCompoundDrawables() 时，即使在 onDraw() 处，结果也是一个空数组。在 textView 中，保存所有维度数据的变量都是私有的，所以我不确定 CompoundButton 是如何设置这些值的。这是TextView中**getCompoundPaddingLeft()**的示例

```
 public int getCompoundPaddingLeft() {
    final Drawables dr = mDrawables;
    if (dr == null || dr.mDrawableLeft == null) {
        return mPaddingLeft;
    } else {
        return mPaddingLeft + dr.mDrawablePadding + dr.mDrawableSizeLeft;
    }
} 
```

这是 CompoundButton 中设置了可绘制复选框的代码，似乎无论如何都没有传递给 TextView 左侧现在有一个可绘制图像。

```
public void setButtonDrawable(Drawable d) {
    if (d != null) {
        if (mButtonDrawable != null) {
            mButtonDrawable.setCallback(null);
            unscheduleDrawable(mButtonDrawable);
        }
        d.setCallback(this);
        d.setState(getDrawableState());
        d.setVisible(getVisibility() == VISIBLE, false);
        mButtonDrawable = d;
        mButtonDrawable.setState(null);
        setMinHeight(mButtonDrawable.getIntrinsicHeight());
    }

    refreshDrawableState();
} 
```

所以我的问题是**CompoundButton 如何设置左侧复合可绘制对象的宽度？**请注意，我对右侧的复选框不感兴趣，因为我已经有了一个。

# **经进一步检查**

我通过扩展 textview 类创建了一个自定义 textview 类，并让我的自定义 CompoundButton 类扩展它，以尝试通过覆盖某些方法来确定复选框间距的创建位置。

为复选框创建空间的不是 CompoundLeft 而是 paddingLeft。当我覆盖 setPadding() 方法时，正在向它发送 paddingLeft。这就像您在复选框上放置一个没有填充的背景一样，不会绘制该复选框。

正在从 textView 构造函数代码中的默认样式中读取填充

a = theme.obtainStyledAttributes( attrs, com.android.internal.R.styleable.TextView, defStyle, 0);

```
 int n = a.getIndexCount();
    for (int i = 0; i < n; i++) {
        int attr = a.getIndex(i);

        switch (attr) {
        case com.android.internal.R.styleable.TextView_editable:
            editable = a.getBoolean(attr, editable);
            break;
         ............. 
```

由于我们无法访问正在使用的 com.android.internal.R.styleable 我不知道如何进一步检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:03:33.517

的[`onDraw()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java#CompoundButton.onDraw%28android.graphics.Canvas%29)方法`CompoundButton`似乎吸引[`mButtonDrawable`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/CompoundButton.java#CompoundButton.0mButtonDrawable)了 darwable 到`Canvas`. 代码显示它被绘制在左侧调整重力高度，drawable的固有宽度按原样使用：

```
buttonDrawable.setBounds(0, y, buttonDrawable.getIntrinsicWidth(), y + height);
buttonDrawable.draw(canvas); 
```

# assembly - 如何更改数据段？我究竟做错了什么？

> ID：14314238
> 
> 赞同：0
> 
> 时间：2013-01-14T06:37:39.227
> 
> 标签：assembly, data-segment

我正在开发一个 32 位操作系统，并开发了一个可以正常工作的 ELF 加载程序。现在我没有启用分页（我计划稍后，但现在我只是试图加载内核模块）并且我试图在启动时执行模块。基本上，由于此时多任务处理还没有完全实现，我只想加载每个模块，调用 init（它将安装中断处理程序并设置模块的用途）然后退出并执行下一个。它可以工作，但我不能用 C 程序中的指针做任何事情（因为它仍然认为它正在使用内核数据段）。所以基本上我想做的是创建一个新的数据段，指向 RAM 中的模块 .data 段。我通过在 GDT 中设置条目号 6 来做到这一点。

```
setGDTEntry(6, DataAddress,DataSize, 0xF2, 0xCF); 
```

setEntry 方法工作得很好，看起来像

```
void setGDTEntry(int num, uint Base, uint limit, byte access, byte gran) 
```

同样两者都可以 100% 工作，当我更改数据段选择器时会出现我遇到的问题。我在汇编中执行此操作，ELF 入口点存储在 EAX 中。

```
mov ax, 30h ; This is 8 * 6, the GDT entry containing the new data segment
mov ds, ax ; set data segment
call address ; JUMP!!!!
mov ax, 0x10 ; Restore kernel data segment
mov ds, ax ; set data segment 
```

这将导致我的内核恐慌，给 CPU 异常 0x6，无效的操作码。我的 C 程序的源代码只是一个将文本复制到视频 RAM 的 hello world 程序（没什么可看的。）。有谁知道我做错了什么？我对 GDT 和段选择器的整个概念很陌生............而且我现在不能启用分页或多任务处理，我真的不想解释为什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:56:40.730

首先，您不仅需要设置 ，还需要`ds`设置`es`和`ss`。如果不这样做，一些指令将`ds.base`用作段基（例如`mov eax, [ebx]`），而其他指令将使用`ss.base`（例如`mov eax, [ebp+8]`）或`es.base`（例如`rep movsd`），它们将不同，导致寻址不一致。

您可能遇到的另一个问题是错误`cs`的（无效指令异常表明了这一点）。x86 代码通常不是位置独立的。就像您必须创建并使用单独的数据段来补偿数据段在内存中加载位置和它们应该在内存中的位置之间的差异（各种 ELF 标头/段告诉您），您必须对代码部分执行相同的操作。您可以`cs`使用远调用或远跳转或远返回进行更改。

# sql-server-2008 - 像 sql server 2008 中全长字符串上的运算符

> ID：14314242
> 
> 赞同：2
> 
> 时间：2013-01-14T06:38:01.623
> 
> 标签：sql-server-2008

在下面需要帮助。

我正在使用 sql seerver 2008 并且有一个查询，我在其中使用 like 运算符。当我使用字符串的一部分时，它工作正常但是当我在类似运算符数据库中使用完整字符串时不会填充任何结果。

例如。我有包含描述列的表 EMp。如果描述列包含

```
Description
-------------------------------------------------
'John joined on Wednesday/CELL PHONE [1234567890]' 
```

当我写查询时

```
select * from EMp where 
description like '%CELL%' 
```

它工作正常但是当我将我的查询写为

```
select * from EMp where 
description like '%John joined on Wednesday/CELL PHONE [1234567890]%' 
```

它没有返回任何值。

这是否意味着like 运算符仅适用于部分字符串而不适用于完整字符串。我也尝试过 LTRIM 和 RTRIM 只是为了确保空间不是问题，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:40:32.083

请记住，`LIKE`除了通配符之外，它还支持一组有限的模式匹配`%`。其中一种模式包括用于匹配范围的括号。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

查询中的括号将导致它搜索“指定范围 ([af]) 或集合 ([abcdef]) 内的任何单个字符”。

```
description like '%John joined on Wednesday/CELL PHONE [1234567890]%' 
```

因此，您的查询要求 SQL Server 在集合 [1234567890] 中查找一个字符。

如果您通读[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms179859.aspx)，它提供了使用通配符作为文字的指南。这是一个小例子：

```
DECLARE @table TABLE ( SomeText VARCHAR( 100 ) );
INSERT @table ( SomeText ) VALUES ( 'here is a string with [brackets]' );

-- matches with wildcards on both sides of the pattern
SELECT * FROM @table WHERE SomeText LIKE '%[brackets]%';

-- won't match
SELECT * FROM @table WHERE SomeText LIKE '%here is a string with [brackets]%';

-- matches, because expression is escaped
SELECT * FROM @table WHERE SomeText LIKE '%here is a string with [[brackets]%';

-- a confusing (but valid) escape sequence AND a wildcard
SELECT * FROM @table WHERE SomeText LIKE '%here is a string with [[][a-z]rackets]%'; 
```

请注意，如果您想搜索具有更复杂模式的较大字符串，则全文索引可能更有用。SQL Server 2008 的所有版本（甚至 Express）都支持它。

# neventstore - Jonathan Oliver 的 EventStore 查询和预测

> ID：14314244
> 
> 赞同：1
> 
> 时间：2013-01-14T06:38:05.903
> 
> 标签：neventstore

在 Jonathan Oliver 关于他的 EventStore 实现的 screecast 演示中，他提到了查询事件的能力，例如进行复杂的时间查询。据我了解，这是通过在更新事件存储后更新读取模型或创建投影来完成的 - 但是我似乎看不到任何使用 JO 实现的示例。任何链接或示例都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:35:27.800

EventStore v3.x 的查询机制在这个阶段有点……低于标准。但从技术上讲，这从来都不是 EventStore 的初衷。相反，它是持久化事件并使其可供将来使用。话虽如此，欢迎您使用任何您认为必要的查询机制将事件从底层数据存储中提取出来，并通过您的代码运行它们以将事件“投影”到特定的视图或读取模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T15:42:14.417

描述时间查询的文章例如[http://codeofrob.com/entries/evented-github-adventure---temporal-queries,-who-doesnt-trust-their-hardware.html](http://codeofrob.com/entries/evented-github-adventure---temporal-queries,-who-doesnt-trust-their-hardware.html) 它是基于预测的，你可以看到一个很好的例子。

# django - 在搜索查询集上分面多个字段

> ID：14314247
> 
> 赞同：3
> 
> 时间：2013-01-14T06:38:57.427
> 
> 标签：django, field, django-haystack, facet

如何选择多个字段进行分面`SearchQuerySet`？[文档](http://django-haystack.readthedocs.org/en/latest/faceting.html)中的示例显示了单个字段的 fow to facet。

> sqs = SearchQuerySet().facet('作者')

说，我有多个字段要处理，例如 , `author`, `location`, `score`? 我该怎么做？

目前，如果我使用文档中的上述示例，它会按预期工作，但是如何在 a 上实现多个字段进行分面`SearchQuerySet`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T08:25:27.747

您必须在每个字段的查询集上多次调用 facet 方法。你可以做这样的事情。

```
sqs = SearchQuerySet()
facet_list = ('author', 'location', 'age')
for item in facet_list:
    sqs = sqs.facet(item) 
```

# android - 按下主页按钮时活动被破坏

> ID：14314252
> 
> 赞同：10
> 
> 时间：2013-01-14T06:39:38.630
> 
> 标签：android, android-activity, ondestroy

在我的应用程序中，当我按下主页按钮时，活动将转到`onDestroy()`. 它应该`onPause()`只被称为方法吗？

为什么会这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-20T13:56:23.220

还要检查您没有在清单中为 Activity 使用 android:noHistory 标志

文档：android:noHistory 当用户离开它并且它不再在屏幕上可见时，是否应该从 Activity 堆栈中删除该 Activity 并完成（它的 finish() 方法被调用）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T06:42:07.980

这取决于你的手机有多少内存，如果你的手机没有太多内存，那么它会立即破坏活动以释放资源。在新手机上，这不会发生，因为它们有足够的备用内存。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T06:45:10.367

如果系统受到限制并确定它需要释放一些资源，则您的活动可能会在按下主页按钮时被破坏。[文档](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)说明`onDestroy()`可以在以下情况下调用：

> 这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

另外，请注意，系统可以`kill`在您的程序被调用`onDestroy()`后不调用`onStop()`。因此，任何清理/数据持久性代码都应该在`onPause()`或`onStop()`中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T04:03:05.777

嗯，这取决于很多因素。如果您在 Android 3.2+ 设备上遇到此问题，则应将 screenSize 属性添加到 android:configChanges

```
 android:configChanges="keyboardHidden|orientation|screenSize" 
```

此外，还将 android:launchMode="singleTop" 添加到您的启动器活动中。请注意，您需要使用 Android SDK 15 或更高版本作为目标，但是，您的应用也可以在旧设备上运行。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-28T07:31:38.807

要检查的另一件事是您的活动是否在`finish()`何时调用`onPause()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-24T18:52:52.043

当然可能是内存问题，但在此之前检查清单文件，在活动的声明中，如果你声明了“没有历史记录”（你不希望活动保留在活动堆栈中。你也可以使用一些当您创建带有意图的活动时标记。然后，最可能的答案是 Alex Contour 给出的答案。

# sql - 这种情况如何单查询

> ID：14314253
> 
> 赞同：1
> 
> 时间：2013-01-14T06:39:46.523
> 
> 标签：sql, postgresql

假设我有一个时间戳作为参数，我称之为“C”。在数据库中，我有一个包含 2 个字段的表“TABLE”。时间戳“A”，时间戳“B”。

我想从“TABLE”中获取行，该行按“A”排序，**最接近**“C”并且尚未通过“B”。我怎么做？

我知道如何查询条件 now() <= "B"。但我不能在单个查询中进行排序。这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:42:08.020

只要你没有说你使用什么数据库服务器，这里有一个提示：

```
WHERE timestamp_b >= current_timestamp
ORDER BY ABS(timestamp_c - timestamp_a) 
```

这样，您将获得`timestamp_b`尚未通过的事件，并按与 timestamp_a 的“接近性”排序

# qtp - 无法使用 QTP 的免费许可证

> ID：14314255
> 
> 赞同：1
> 
> 时间：2013-01-14T06:39:51.647
> 
> 标签：qtp

我对 QTP（快速测试专家）有疑问。在尝试安装 QTP 免费许可证时，我错误地单击了“Seat License”，然后单击了取消。现在我无法使用免费许可证，因为它要求提供单机许可证或并发许可证的密钥。

我尝试重新安装 QTP，但没有任何改变 - 我仍然无法使用免费许可证。

是否有任何解决此问题的方法，而不是格式化和重新安装 Windows？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:30:13.103

如果您选择了单机许可证，然后取消演示许可证，则不应受到影响。确保您仍处于单机许可模式。

如果您可以上传错误消息的图像，也许我可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T07:52:16.973

1 - (win + R / appwiz.cpl / enter ) uninstall QTP \ hp update \ hp result viewer

2 - remove (Mercury Interactive) from registry HKCU\software\ and HKLM\software

3 - re-install QTP

# c#-4.0 - 在window phone 7中，我想调用手机中的C#表单中的PHP页面，必须保存在服务器中

> ID：14314261
> 
> 赞同：-1
> 
> 时间：2013-01-14T06:41:11.013
> 
> 标签：c#-4.0

我在window7 手机中有一个注册表单，我想用C# 调用一个PHP 页面，以便我在表单中插入的值必须保存到服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:43:08.777

您可以使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)允许您向远程端点发送 HTTP 请求的类。

这是一个例子：

```
WebClient wc = new WebClient();
wc.OpenReadCompleted += OpenReadCompleted;
UriBuilder fullUri = new UriBuilder("http://example.com/foo.php");
wc.OpenReadAsync(fullUri.Uri); 
```

然后您将拥有`OpenReadCompleted`请求成功时将调用的处理程序：

```
void OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    using (Stream responseStream = e.Result)
    using (StreamReader reader = new StreamReader(responseStream))
    {
        string response = reader.ReadToEnd();
        // do something with the response
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:45:08.677

首先，您不能在 C# 中创建 PHP 页面。PHP 与 C# 完全不同。

您可能想要的是您的手机应用程序可以调用的 Web 服务。Web 服务很容易从 .NET 应用程序（包括电话应用程序）创建和使用。

这是一篇您可能会发现有用的介绍性文章：http: [//a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-web-service-in-cnet.html](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-web-service-in-cnet.html)。

这是一篇关于从 Windows Phone 7 应用程序使用 Web 服务的文章：http: [//www.codeproject.com/Questions/355937/How-to-use-webservice-in-Windows-Phone-7-applicati](http://www.codeproject.com/Questions/355937/How-to-use-webservice-in-Windows-Phone-7-applicati)

还有一个：[http ://code.msdn.microsoft.com/wpapps/Weather-Forecast-Sample-586ef733](http://code.msdn.microsoft.com/wpapps/Weather-Forecast-Sample-586ef733)

祝你好运！

# signalr - 无法在 SignalR 中向组发送消息

> ID：14314264
> 
> 赞同：1
> 
> 时间：2013-01-14T06:41:45.767
> 
> 标签：signalr

我正在使用 SignalR 库。我正在运行我的应用程序的 3 个实例，然后将两个用户添加到名为“Test”的组中。现在，当我向“测试”组发送消息时，消息根本没有传递。

```
public class ChatHub : Hub
    {
        public void send(string name, string message)
        {
            //This line of code is not working
            Clients.Group("test").broadcastMessage(message);

            //This is working
            //Clients.All.broadcastMessage(name, message);

        }

        public void JoinGroup(string groupName)
        {
            Groups.Add(this.Context.ConnectionId, groupName);

        }

        public void RemoveGroup(string groupName)
        {
            Groups.Remove(this.Context.ConnectionId, groupName);
        }
    } 
```

//**客户端**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">

        <input type="text" id="groupName" />
        <input type="button" id="joinGroup" value="Join" />
        <br />
        <input type="text" id="message" />
        <input type="button" id="sendmessage" value="Send" />
        <input type="hidden" id="displayname" />
        <ul id="discussion">
        </ul>
    </div>
    <script type="text/javascript" src="Scripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="Scripts/j`enter code here`query.signalR-1.0.0-rc1.js"></script>

    <script type="text/javascript" src="/signalr/hubs"></script>

</body>

<script type="text/javascript">

    $(function () {
        // Declare a proxy to reference the hub.  
        var chat = $.connection.chatHub;
        // Create a function that the hub can call to broadcast messages. 
        chat.client.broadcastMessage = function (name, message) {
            // Html encode display name and message.  
            var encodedName = $('<div />').text(name).html();
            var encodedMsg = $('<div />').text(message).html();
            // Add the message to the page.  
            $('#discussion').append('<li><strong>' + encodedName
                + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
        };
        // Get the user name and store it to prepend to messages. 
        $('#displayname').val(prompt('Enter your name:', ''));
        // Set initial focus to message input box.   
        $('#message').focus();
        // Start the connection. 
        $.connection.hub.start().done(function () {
            $('#sendmessage').click(function () {
                // Call the Send method on the hub.  
                chat.server.send($('#displayname').val(), $('#message').val());
                // Clear text box and reset focus for next comment.  
                $('#message').val('').focus();
            });

            $('#joinGroup').click(function () {
                // Call the Send method on the hub.  
                chat.server.joinGroup($('#groupName').val());
            });
        });
    });

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:35:22.683

实际上，客户端上的**“broadcastMessage”**需要两个参数，而我在使用组调用**“broadcastMessage”时只传递了一个参数。**

改变

```
'Clients.Group("test").broadcastMessage(message);'

 to 

'Clients.Group("test").broadcastMessage(name, message);' worked. 
```

# ruby - 从 OpenStruct Ruby 对象中提取值

> ID：14314275
> 
> 赞同：4
> 
> 时间：2013-01-14T06:43:04.957
> 
> 标签：ruby, data-structures

我得到以下 Ruby 对象返回（从使用garb [gem](https://github.com/Sija/garb)对 Google Analytics API 的查询，来自那里的 README.md 上显示的示例调用，`Exits.results(profile, :filters => {:page_path.eql => '/'})`）

```
> data.results
=> [#<OpenStruct page_path="/", exits="3706", pageviews="10440">] 
```

我想提取浏览量值（10440），但不知道该怎么做。我看到我的对象`data.results`是`array`length类`1`，但 data.first 是类`OpenStruct`，其返回值看起来几乎相同：

```
irb(main):140:0> data.results.class
=> Array
irb(main):141:0> data.results.length
=> 1
irb(main):142:0> data.first
=> #<OpenStruct page_path="/", exits="3706", pageviews="10440">
irb(main):143:0> data.first.class
=> OpenStruct 
```

而`data`它本身似乎是一个自定义返回类型，称为`ResultsSet`：

```
irb(main):144:0> data.class
=> Garb::ResultSet
irb(main):145:0> data
=> #<Garb::ResultSet:0x00000002411070 @results=[#<OpenStruct page_path="/", exits="3706", pageviews="10440">], @total_results=1, @sampled=false>
irb(main):146:0> 
```

很多数据结构，但不知道如何获得我想要的价值。我收集`OpenStruct`到与哈希有关，所以我想`data.first["pageviews"]`会这样做，

```
NoMethodError: undefined method `[]' for #<OpenStruct page_path="/", exits="3706", pageviews="10440">
    from (irb):146
    from /usr/bin/irb:12:in `<main>' 
```

同时`data.first.keys`返回`nil`。不知道如何取出我的数据，（没有将长度为 1 的数组转换`data.results`为字符串并用 grep 解析，这似乎很*疯狂*。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:14:46.250

请试试这个：

```
data.first.pageviews 
```

# java - 了解按位条件检查以获取数组中所有可能的组合总和

> ID：14314281
> 
> 赞同：2
> 
> 时间：2013-01-14T06:44:09.457
> 
> 标签：java, bit-manipulation, bitwise-operators, bit-shift, bitwise-and

我有一个算法，其目标是在一个整数数组中给出所有组合的所有可能总和。

```
private void arraySumPermutation(int value ,int[] arr){
    int N = arr.length;     
    for(int i=0;i<1<<N;i++){
        int sum = 0;                
        for(int j=0;j<N;j++){       

            if((i & 1<<j)>0){
                iCount++;
                sum += arr[j];  
                //S.O.P(sum);
            }
        }

    }
} 
```

我无法理解使用按位 AND 添加的内部 if 条件。内部 if 循环的目标是什么。

```
if((i & 1<<j)>0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:00:32.550

让我们将 N 元素集合的组合表示为 N 位数，`j`如果组合中包含第一项，则第 1 位为 1 `j`，否则为 0。这样，您可以将所有可能的组合表示为 [0, 2 ^N ) 范围内的数字。

外部循环遍历这些数字（`1 << N`== 2 ^N）。

内部循环遍历集合中的项，`if`条件检查`j`项是否包含在当前组合中。换句话说，它检查`j`th 位`i`是否为 1。

`1<<j`给你一个只有`j`th 位为 1 的数字，`i & (1 << j)`重置`i`除该位之外的所有位，并`>`检查结果是否不为 0。

请注意，此代码（带`int`s）仅适用于 N < 31。

# linux - CGI 中的 SSL 套接字通信是个好主意吗？

> ID：14314290
> 
> 赞同：1
> 
> 时间：2013-01-14T06:45:29.617
> 
> 标签：linux, apache, cgi

我希望有一种方法可以在 Apache 服务器和 Linux 笔记本电脑上运行的应用程序之间进行通信。

我能想到的唯一方法是在 CGI python 或 perl 脚本中使用 SSL 套接字。这是一个好主意吗？

Apache 服务器和应用程序位于同一台机器上，因此加密可能没什么大不了的，因为攻击者需要获得物理访问权限才能破解进程。另一方面，它连接到网络，并且可能被嗅探。

在这种情况下加密吗？在这种情况下，攻击者可以嗅探数据吗？

此外，如果这确实是一个好主意，是否有人有关于如何使用 perl 或 python 实现 ssl 套接字的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:10:12.037

如果您使用环回地址（本地主机或 127.0.0.1），我认为它不会在网络上被嗅探，因为它不会超出您的接口卡。所以加密在这里不是问题。

对于第二部分，以下是一个[SO 示例 python 客户端](https://stackoverflow.com/questions/7749341/very-basic-python-client-socket-example)，尽管你可以找到很多方法。

另一件事是在 Linux 上，你也可以简单地通过 shell 连接。只需使用 netcat 即[nc](http://www.irongeek.com/i.php?page=backtrack-3-man/netcat)。您可以使用此命令行应用程序将任何文本发送到服务器以及回读。

不要重新发明轮子。

# ios - 如何配置我的服务器以使用 MPMoviePlayerViewController 提供视频文件播放？

> ID：14314299
> 
> 赞同：5
> 
> 时间：2013-01-14T06:46:36.350
> 
> 标签：ios, ios6, mpmovieplayercontroller

我想使用 MPMoviePlayerViewController 在我的服务器上播放视频文件。但它不起作用。

我的 iOS 代码如下：

```
NSURL *mediaURL = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"http://127.0.0.1:3000/media/%@", @"sample_iTunes.mov"]];
self.player = [[MPMoviePlayerViewController alloc] initWithContentURL: mediaURL];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.player.moviePlayer];
self.player.moviePlayer.shouldAutoplay = YES;
self.player.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;
[self presentMoviePlayerViewControllerAnimated:self.player];
[self.player.moviePlayer prepareToPlay];
[self.player.moviePlayer play];

-(void)movieFinishedCallback:(NSNotification*)aNotification
{
    NSLog(@"%@",[aNotification valueForKey:@"userInfo"]);
    MPMoviePlayerViewController* theMovie = [aNotification object];
} 
```

我收到的错误消息`NSNotification`是：

```
MPMoviePlayerPlaybackDidFinishReasonUserInfoKey = 1;
error = "Error Domain=MediaPlayerErrorDomain Code=-11850 \"Operation Stopped\" UserInfo=0x1d51b640 {NSLocalizedDescription=Operation Stopped}"; 
```

然后我将网址更改为

```
http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT1211/sample_iTunes.mov 
```

但它运作良好。由于这两个文件是完全相同的文件。我认为我的远程服务器一定有问题。这是来自我的服务器的响应标头：

```
HTTP/1.1 200 OK
Content-Length: 3284257
Date: Mon, 14 Jan 2013 06:06:12 GMT
Last-Modified: Sun, 13 Jan 2013 10:44:02 +0000
Accept-Ranges: bytes
Content-Type: video/quicktime
Connection: close
Server: Jetty(7.6.1.v20120215) 
```

此外，该视频可以在我的 Macbook 上用 Chrome/Safari 播放，但它也不能在 iPhone 上用浏览器播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T23:56:29.623

更正内容 URL 后，如果`Error Domain=MediaPlayerErrorDomain Code=-11850 \"Operation Stopped\"`仍然出现错误，可能是因为您的 HTTP 服务器不支持字节范围请求。有关详细信息，请参阅[立即调用 MPMoviePlayerPlaybackDidFinishNotification](https://stackoverflow.com/questions/22250368/mpmovieplayerplaybackdidfinishnotification-is-called-immediately/26725402#26725402)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T00:43:30.287

您将 MPMoviePlayerController 指向 127.0.0.1，这是当前设备的 IP。因此，您的 iOS 应用程序正在寻找*在*您的 iPhone 上托管该文件的 Web 服务器。您的代码看起来不错，否则您只需将 .mov 托管在有效的地方。

# iphone - 应用程序在 ipod 上显示黑屏

> ID：14314301
> 
> 赞同：1
> 
> 时间：2013-01-14T06:46:56.767
> 
> 标签：iphone, ios, objective-c, storyboard, ipod

这个应用程序是通用的，并且可以在除 iPod 之外的所有其他设备上完美运行。我用过两个故事板。

这是我在`AppDelegate`.

```
 -(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {    
    UIImage* background = [UIImage imageNamed:@"navigation-bar-background"];
    [[UINavigationBar appearance] setBackgroundImage:background forBarMetrics:UIBarMetricsDefault];

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:[[UIImage imageNamed:@"black-back-button"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:[[UIImage imageNamed:@"black-back-button-landscape"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)] forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone];

    [[UISlider appearance] setThumbImage:[UIImage imageNamed:@"knob-button"] forState:UIControlStateNormal];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:41:17.520

只需更改图像（确保新的试用图像为 png 格式）并查看它是否显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:04:45.977

也许 .. 您的 iPod 功能.. 与您的发行代码“不兼容”（armv7 等） 什么 iPod 代？再次检查您的 iPod 功能：[http ://blog.manbolo.com/2012/10/30/uirequireddevicecapabilities-and-device-compatibility-matrix](http://blog.manbolo.com/2012/10/30/uirequireddevicecapabilities-and-device-compatibility-matrix)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:45:36.090

我忘记在项目中添加主情节提要。所以，如果其他人遇到同样的问题，请仔细检查您是否在主情节提要中添加了情节提要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T15:49:57.267

在处理通用应用程序中的情节提要时，Xcode 如何以及它如何生成默认值存在问题。查看此答案：[https ://stackoverflow.com/a/21632289/703530](https://stackoverflow.com/a/21632289/703530)

# wpf - WPF DataGridCell LostFocus 事件在 DataGridRow 处停止冒泡

> ID：14314302
> 
> 赞同：0
> 
> 时间：2013-01-14T06:47:01.513
> 
> 标签：wpf, datagrid, focus, routed-events

我不太明白以下代码发生了什么。

`wpf`这是一个显示对象的相对简单的数据网格`ObservableCollection`。如果我选择一行，然后按删除键，`LostFocus`则会从`DataGridCell`. 使用 Snoop，我可以查看接收此路由（冒泡）事件的元素。它从 开始`DataGridCell`，并在视觉树上冒泡，直到它碰到`DataGridRow`，然后它停止（这在 Snoop 中很明显，它同时显示未处理和已处理的事件）。

我对冒泡事件的理解使我相信`LostFocus`事件应该一直冒泡到父窗口。

是什么赋予了？

```
 <Window x:Class="ApplicationName.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
        <Grid x:Name="_grid">
            <DataGrid
                ItemsSource="{Binding Items}"
                AutoGenerateColumns="False"
                HeadersVisibility="Column"
                CanUserDeleteRows="True"
                SelectionUnit="FullRow">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Path=FirstName}"
                                Header="FirstName"/>
                    <DataGridTextColumn Binding="{Binding Path=LastName}"
                                Header="LastName"/>
                    <DataGridTextColumn Binding="{Binding Path=Information}"
                                Header="Information"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Window> 
```

代码隐藏：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new ViewModel();
        }
    }

    public class ViewModel
    {
        public ObservableCollection<Person> _items = new ObservableCollection<Person>();

        public ViewModel()
        {
            _items.Add(new Person() { FirstName = "Homer", LastName = "Simpson", Information = "Father" });
            _items.Add(new Person() { FirstName = "Bart", LastName = "Simpson", Information = "Son" });
            _items.Add(new Person() { FirstName = "Santa's", LastName = "Little Helper", Information = "Dog" });

        }

        public ObservableCollection<Person> Items
        {
            get { return _items; }
        }
    }

    public class Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Information { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:42:34.277

如果父窗口的`LostFocus`事件触发，这意味着焦点不再在父窗口中。你期待这种行为吗？我认为这不是你的情况。`DataGridRow`失去焦点，`DataGridCells`失去焦点，但不是父窗口。

# database - 从Django中具有多对多关系的两个表中检索数据？

> ID：14314305
> 
> 赞同：0
> 
> 时间：2013-01-14T06:47:07.030
> 
> 标签：database, django

我想从名为 file 的表中检索用户 id 为 1 的数据。用户和文件表和多对多关系。我想显示与该用户相关的文件。

```
class GalaxyUser(models.Model):
    id = models.IntegerField(primary_key=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=765)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    username = models.CharField(max_length=765, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    class Meta:
        db_table = u'galaxy_user'

class File(models.Model):
    users = models.ManyToManyField(GalaxyUser)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    end_date = models.TextField()
    duration = models.TextField()
    size = models.TextField()
    flag = models.TextField() 
```

如果用户以用户身份登录，我会得到 user_id，假设它是 1。现在，我只想检索与用户 1 相关的文件名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:50:52.100

您可以使用`File.objects.filter(users__id__exact=1)`. 参考[这里](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:51:10.030

```
File.objects.filter(users=GalaxyUser.objects.get(id=1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:56:26.600

```
user = GalaxyUser.objects.get(id=1)
files = user.file_set.all() 
```

[在此处](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)查看有关多对多查找的更多信息

# symfony-2.1 - 哪个 MongoDBBundle 版本适用于 Symfony 2.1.6？

> ID：14314309
> 
> 赞同：1
> 
> 时间：2013-01-14T06:47:33.203
> 
> 标签：symfony-2.1

我正在尝试通过此链接在 symfony 2.1.6 中安装 MongoDBBundle

[http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html)

在教程中，他们解释了将以下内容添加到 composer.json

```
{
    "require": {
        "doctrine/mongodb-odm-bundle": "3.0.*"
    },
    "minimum-stability": "dev"
} 
```

这是我的 composer.json

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

在这个我需要放置更新 composer.json 的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:33:51.177

这应该可以工作，在 2.1.4 上运行顺利，并且应该与你在 2.1.6 中的工作相同

```
{

"name": "symfony/framework-standard-edition",
"description": "The \"Symfony Standard Edition\" distribution",
"autoload": {
    "psr-0": { "": "src/" }
},
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.1.*",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.0.*",
    "twig/extensions": "1.0.*@dev",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.1.*",
    "sensio/framework-extra-bundle": "2.1.*",
    "sensio/generator-bundle": "2.1.*",
    "jms/security-extra-bundle": "1.2.*",
    "jms/di-extra-bundle": "1.1.*",
    "kriswallsmith/assetic": "1.1.*@dev",
    "doctrine/mongodb-odm-bundle": "3.0.*"
},
"minimum-stability": "dev",
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
},
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
    }
} 
```

# batch-file - 无法使用 xcopy 从根文件夹和子文件夹复制新创建和更新的文件

> ID：14314310
> 
> 赞同：0
> 
> 时间：2013-01-14T06:47:43.607
> 
> 标签：batch-file

我将文件从源复制到目标的代码是

```
set "source=C:\Documents and Settings\My Documents\msword"
set "dest=D:\Test"

pushd "%source%" ||(
   echo.Source does not exist&pause&goto EOF)

for /f "tokens=*" %%f in (
   'dir /A-D /OD /B') Do set "file=%%f"

popd

xcopy /s /d /e "%source%\%file%" "%dest%\" 
```

我想编写脚本，将当前日期创建的文件和同一天更新的任何先前文件复制到其他驱动器文件夹，包括具有相同的目录结构。但它应该只存储当前日期和更新文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:30:37.547

使用**robocopy**而不是 xcopy。

请参阅[http://technet.microsoft.com/en-us/library/cc733145(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc733145(v=ws.10).aspx)

然后试试这个

```
 robocopy  "C:\Documents and Settings\My Documents\msword" "D:\words" /maxage:1 
```

# objective-c - 按钮操作上的uitableview单元格选择

> ID：14314312
> 
> 赞同：1
> 
> 时间：2013-01-14T06:48:14.007
> 
> 标签：objective-c, xcode, uitableview, uibutton

我的表格视图使用自定义类来创建单元格

MyCustomCell.h

```
#import <UIKit/UIKit.h>

@interface MyCustomCell : UITableViewCell

@end 
```

MyCustomCell.m

```
#import "MyCustomCell.h"
#import <QuartzCore/QuartzCore.h>

@implementation MyCustomCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self)
    {
        // Initialization code

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    self.selectionStyle = UITableViewCellSelectionStyleBlue;

    // Configure the view for the selected state
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    self.imageView.frame = CGRectMake(5,4,80,80);
    self.imageView.layer.masksToBounds = YES;
    self.imageView.layer.cornerRadius = 5.0f;
    self.imageView.contentMode = UIViewContentModeScaleAspectFill;
    float imgWidth =  self.imageView.image.size.width;
    if(imgWidth > 0)
    {
        self.textLabel.frame = CGRectMake(110,2,170,25);
        self.detailTextLabel.frame = CGRectMake(110,18,200,25);
        self.detailTextLabel.font = [UIFont boldSystemFontOfSize:12];
        self.detailTextLabel.alpha = 0.0;
        self.textLabel.font = [UIFont boldSystemFontOfSize:12];
        self.textLabel.textColor = [UIColor colorWithRed:.2314 green:.3490 blue:.5961 alpha:1.0];

    }
}

@end 
```

并像这样使用它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        cell = [[MyCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        //cell.accessoryType = UITableViewCellAccessoryCheckmark;

    }

    CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;

    if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f)
    {
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setBackgroundImage:[UIImage imageNamed:@"select2x.png"] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(SelectButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
    btn.frame = CGRectMake(110, 25, 63, 32);
        //btn.tag = indexPath.row;

        viewProfile = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        viewProfile.frame = CGRectMake(190, 25, 93, 32);
        //[viewProfile setTitle:@"View Profile" forState:UIControlStateNormal];
        [viewProfile setBackgroundImage:[UIImage imageNamed:@"viewProfile@2x.png"] forState:UIControlStateNormal];
        [viewProfile addTarget:self action:@selector(viewProfileTapped:) forControlEvents:UIControlEventTouchUpInside];
        [cell.contentView addSubview:viewProfile];

    [cell.contentView addSubview:btn];

    }

    else
    {

        UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setBackgroundImage:[UIImage imageNamed:@"select.png"] forState:UIControlStateNormal];
        [btn addTarget:self action:@selector(SelectButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
        btn.frame = CGRectMake(110, 25, 63, 32);
        //btn.tag = indexPath.row;

        viewProfile = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        viewProfile.frame = CGRectMake(190, 25, 93, 32);
        //[viewProfile setTitle:@"View Profile" forState:UIControlStateNormal];
        [viewProfile setBackgroundImage:[UIImage imageNamed:@"viewProfile.png"] forState:UIControlStateNormal];
        [viewProfile addTarget:self action:@selector(viewProfileTapped:) forControlEvents:UIControlEventTouchUpInside];
        [cell.contentView addSubview:viewProfile];

        [cell.contentView addSubview:btn];

       }

    return cell;

} 
```

现在每个单元格都包含两个执行操作的按钮（我不在单元格点击上执行操作，而是在按钮点击上执行操作），如上所示

现在我想要的是当用户点击特定单元格中的按钮（比如选择按钮）时，该特定单元格只应突出显示或着色或着色，并且当用户点击另一个单元格中的按钮时，该单元格应突出显示使上一个单元格未突出显示。我尝试将上一个和下一个索引路径存储在 2 个不同的变量中，但无法对它们进行处理以实现我想要的。

```
- (void)SelectButtonTapped:(UIButton *)button
{

    UITableViewCell *cell = (UITableViewCell *)button.superview.superview;

    NSIndexPath *indexPath = [homeTable indexPathForCell:cell];

    // UITableViewCell *cell1 = [homeTable cellForRowAtIndexPath:indexPath];

    //currentSelection = indexPath.row;

    //MyCustomCell *cell1 = (MyCustomCell *)[homeTable cellForRowAtIndexPath:indexPath];

    [[homeTable delegate]tableView:homeTable didSelectRowAtIndexPath:indexPath];

     //MyCustomCell *cell1 = (MyCustomCell *)[homeTable cellForRowAtIndexPath:indexPath];

    /*if(currentSelection == 0)
    {
         [cell1 setSelected:YES animated:YES];
        currentSelection++;
    }
    else
    {
         [cell1 setSelected:YES  animated:YES];

    }*/
   // NSIndexPath *indexPath1 = [homeTable indexPathForCell:cell];

    NSLog(@"current===>%d",currentSelection);

    //[cell1 setSelected:NO animated:YES];

    //if(currentSelection == indexPath)

    //UIButton *clickButton = (UIButton *)sender;
    // NSIndexPath *indexPathHighlight = [NSIndexPath indexPathForRow:button.tag inSection:0];

    //button.tag = indexPathHighlight.row;

    //UITableViewCell *newCell = [homeTable cellForRowAtIndexPath:indexPathHighlight];

    //if(newCell.selected == NO)
    //{
    //[newCell setSelected:YES animated:YES];
     //   [newCell setBackgroundColor:[UIColor lightGrayColor]];
    //}
    //else
   // {
        //[newCell setSelected:NO animated:YES];
        //[newCell setBackgroundColor:[UIColor colorWithRed:232.0f/255.0f green:237.0f/255.0f blue:240.0f/255.0f alpha:1.0f]];
    //}
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    MyCustomCell *cell1 = (MyCustomCell *)[homeTable cellForRowAtIndexPath:indexPath];

    cell1.selectionStyle= UITableViewCellSelectionStyleBlue;

} 
```

你可以看看我乱七八糟的按钮操作方法。我尝试了很多选择，但没有成功。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:27:09.587

取消注释该行：

```
btn.tag = indexPath.row+1000; 
```

还将单元格选择样式更改为

```
[cell setSelectionStyle:UITableViewCellSelectionStyleBlue]; 
```

创建时。

在 SelectButtonTapped 方法中：

```
- (void)SelectButtonTapped:(UIButton *)button
{
  int buttonIndex = button.tag;

  for (int row = 0; row<numberOfRows; row++)
  {
    NSIndexPath indexPathHighlight = [NSIndexPath indexPathForRow:row inSection:0];

    UITableViewCell *newCell = [yourTable cellForRowAtIndexPath:indexPathHighlight];

    if (row == buttonIndex - 1000)
    {
        [newCell setSelected:YES animated:YES];
    }
    else
    {
        [newCell setSelected:NO animated:YES];
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:42:24.733

假设您的表格只有一个部分，按钮的标签是相应单元格的行号。

在按钮动作中

```
int rownumber = button.tag;
//print the rownumber and see if you are getting the correct value
UITableViewCell *cell = [tablename cellForRowAtIndexPath:[NSIndexPath     
indexPathForRow:rownumber inSection:0]];

[cell setHighlighted:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:14:22.083

试试这个 -

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    MyCustomCell *cell1 = (MyCustomCell *)[homeTable cellForRowAtIndexPath:indexPath];
    cell1.selectionStyle= UITableViewCellSelectionStyleBlue;
} 
```

# objective-c - 目标 c 调用 wcf 休息服务请求

> ID：14314316
> 
> 赞同：0
> 
> 时间：2013-01-14T06:48:48.107
> 
> 标签：objective-c, wcf, wcf-data-services, nsjsonserialization

我一直在尝试寻找有关如何对来自 wcf 服务的请求进行编码的在线文章/教程。我已将以下 Web 服务上传到我的服务器：

```
[ServiceContract]
    public interface IUserAccountService
    {
        [OperationContract]
        [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "UserLogIn?id={email}&password={password}")]
        AuthenticationToken UserLogIn(string email, string password);
    } 
```

我对我一直在寻找的与之相关的文章或 SO 问题感到非常困惑：

例如：

*   -http://stackoverflow.com/questions/1557040/objective-c-best-way-to-access-rest-api-on-your-iphone

*   -http://stackoverflow.com/questions/8650296/nsjsonserialization-parsing-response-data

最后偶然发现了这个：

**http://iam.fahrni.ws/2011/10/16/objective-c-rest-and-json/**

所以我的问题是，我真的需要使用 restful 框架来调用 api 吗？如果是这样，更推荐哪一个 - **ASIHttpRequest**或**RestKit**或**AFNetworking**？或者我可以使用我提到的最后一个链接自己简单地做吗？我真的不知道从哪里开始。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:59:34.230

NSURLConnection 和 NSJSONSerialization 工作正常。

编辑：我的一个项目中的一些示例代码，为简洁起见进行了编辑。
fstr(...) 只是 [NSString stringWithFormat:...] 的一个包装器，
我使用 GCD 在后台线程上调用此代码。它不是线程安全的。

```
- (NSMutableURLRequest *)buildGetRequestHeaderWithMethod:(NSString *)method
{
  NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
    initWithURL:[NSURL URLWithString:fstr(@"%@%@", self.url, method)]];
  [request setTimeoutInterval:10.0];
  [request setHTTPMethod:@"GET"];
  [request setValue:self.key forHTTPHeaderField:@"Authentication"];
  [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
  return request;
}

- (id)callMethod:(NSString *)method
{
  NSMutableURLRequest *request = [self buildGetRequestHeaderWithMethod:method];
  return [self sendRequest:request withMethod:method];
}

- (id)sendRequest:(NSMutableURLRequest *)request withMethod:(NSString *)method
{
  NSHTTPURLResponse *response = nil;
  NSError *error = nil;
  [state() pushNetworkActivity];
  NSData *result = [NSURLConnection sendSynchronousRequest:request
    returningResponse:&response error:&error];
  [state() popNetworkActivity];
  self.lastStatusCode = response.statusCode;
  // Bug in Cocoa. 401 status results in 0 status and NSError code -1012.
  if(error && [error code] == NSURLErrorUserCancelledAuthentication)
  {
    [self interpretHTTPError:401 URLError:error forMethod:method];
    self.lastStatusCode = 401;
    return nil;
  }
  if(response.statusCode != 200)
  {
    [self interpretHTTPError:response.statusCode URLError:error forMethod:method];
    return nil;
  }
  id jsonResult = [self parseJsonResult:result];
  debug(@"%@", jsonResult);
  return jsonResult;
}

- (void)interpretHTTPError:(int)statusCode URLError:(NSError *)urlError
  forMethod:(NSString *)method
{
  NSString *message = fstr(@"HTTP status: %d", statusCode);
  if(statusCode == 0)
    message = [urlError localizedDescription];

#ifdef DEBUG
    message = fstr(@"%@ (%@)", message, method);
#endif

  if(self.alertUserOfErrors)
  {
    dispatch_async(dispatch_get_main_queue(), ^{
      errorMessage (message);
    });
  }
  else
    debug(@"%@", message);
  self.lastErrorMessage = message;
}

- (id)parseJsonResult:(NSData *)result
{
  if( ! result)
    return nil;
  NSError *error = nil;
  id jsonResponse = [NSJSONSerialization JSONObjectWithData:result
    options:NSJSONReadingMutableContainers error:&error];
  if(error)
  {
    NSLog(@"JSONObjectWithData failed with error: %@\n", error);
    return nil;
  }
  return jsonResponse;
} 
```

# security - 是否使用持久性 cookie

> ID：14314317
> 
> 赞同：3
> 
> 时间：2013-01-14T06:48:55.450
> 
> 标签：security, cookies, session-cookies

我们刚刚让安全审计员标记了我们使用持久性 cookie 来维护 Web 应用程序中的登录状态。作为背景知识，我们的 Web 应用程序是多租户的，但没有（或不是很多）操作具有破坏性。根据租户的不同，我们的门户可能会提供敏感信息。

当我们设计我们的应用程序时，我们讨论了持久性 cookie 的使用，并决定我们应该基于可用性。我们没有，而且在某种程度上仍然没有，认为可用的信息是敏感的。我们的用户相当新手，我们更关心有数百个重置密码请求。

使用持久性 cookie 登录是否被视为安全风险？当我们谈论一些相当大的企业的运营数据时，可用性的权衡是否是一个讨论？

我们之前没有任何关于持久性 cookie 的问题——我们的任何客户都没有。是否值得实施一个默认为关闭以满足双方的“坚持不懈”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:51:05.083

持久性 cookie 用于多种原因，并支持多种功能。如果您的应用程序绝对没有“敏感”内容，那么您可以使用持久性 cookie 进行永久身份验证，然后发出重新身份验证以访问用户帐户详细信息，或进行一些更改（即更改密码或电子邮件地址）。您提到您的用户是新手，所以我认为他们不知道如果其他人使用他们的浏览器，他们也会在不知道他或她的密码的情况下进行身份验证（我会向用户指出）。

但是有一个原因，为什么像网上银行这样的安全关键应用程序不会发出持久登录 cookie，尽管它们可以，因为在对您的帐户余额进行任何更改之前，您必须重新进行带外身份验证（通过移动设备或某种形式一次性密码）。但它被认为是不安全的，也许是因为知道某人的余额已经侵犯了他们的隐私。

因此，如果您的应用不受任何政府机构控制，并且您不受所在国家/地区的任何法律的约束，并且您对应用的敏感部分实施重新身份验证，那么发布 2-3 周的持久 cookie 进行身份验证，是不是重大的安全威胁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T06:33:30.353

如果不信任持久性 cookie，Fatfredyy 的建议听起来很棒。

但是，如果问题在于持久性 cookie 的使用不安全，为什么不加密它们呢？

在勾选“记住我”或默认情况下会生成一个 cookie，其中包括一些难以理解的用户唯一 ID 和包含验证的加密部分。对称加密的密钥与用户 ID 一起存储在数据库中，并且从不与用户共享。当用户重新访问时，您使用该 ID 访问密钥并解密其余部分，以验证没有被篡改。

当识别出尝试修改用户 ID 时，向用户显示一条消息并更改加密密钥，要求用户重新进行身份验证。

这将使您能够在不损害用户的情况下使用持久性 cookie。

# jsp - 没有脚本的 JSP

> ID：14314322
> 
> 赞同：1
> 
> 时间：2013-01-14T06:49:56.080
> 
> 标签：jsp, scriptlet

我有一个 servlet，它创建对象集合并将其设置为请求对象并将其传递给 jsp 页面。在 jsp 页面中，我使用`logic:iterate`迭代接收到的集合并将其显示在文本框内的 html 表格中。

用户可以编辑文本框，当他单击保存时，必须使用这些表中的数据（其中每一行代表一个对象）再次形成对象集合并将其传递给 servlet 以将其保存在数据库中。主要限制是我不应该使用 SCRIPLETS。

有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T13:06:41.687

我可以建议这个

*   当您单击`save`按钮时，将数据发送到所需的 servlet `<form method = "POST" action = "/YourServlet">`。
*   在这个 servlet 中，您可以获取所有请求参数并根据您的要求将它们转换为集合
*   将创建的集合保存在数据库中
*   完成后，使用`RequestDispatcher`forward 到你以前的 JSP

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-18T12:41:34.937

由于您不能使用 scriptlet，您唯一可能的解决方案是纯 Javascript

# android - 如何减少活动数量

> ID：14314323
> 
> 赞同：0
> 
> 时间：2013-01-14T06:49:59.177
> 
> 标签：android, android-activity

我的主要布局是这样的：

```
~~~~~~~~~~
~~~~~~~~~~ 
---------- 
[][][][][] 
```

底部是固定的，只要单击按钮，顶部就会改变。顶部和底部使用 2 种不同的线性布局，底部`Activity`的每个按钮使用不同的线性布局。实际上它正在工作，但我不确定它是否是正确的方法。我觉得我过度使用`Activities`.

我应该来回`Activities`进行这种设置吗？或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:52:22.313

答案由 Singularity 给出：fragments
[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

Fragment 表示 Activity 中的一种行为或用户界面的一部分。您可以在单个活动中组合多个片段以构建多窗格 UI 并在多个活动中重用一个片段。您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.ViewGroup;

public class ArticleFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     // Inflate the layout for this fragment
        return inflater.inflate(R.layout.article_view, container, false);
    }
}

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<fragment android:name="com.example.android.fragments.HeadlinesFragment"
          android:id="@+id/headlines_fragment"
          android:layout_weight="1"
          android:layout_width="0dp"
          android:layout_height="match_parent" />

<fragment android:name="com.example.android.fragments.ArticleFragment"
          android:id="@+id/article_fragment"
          android:layout_weight="2"
          android:layout_width="0dp"
          android:layout_height="match_parent" /> 
```

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.news_articles);
    }
} 
```

# javascript - 使用 JavaScript 或 jQuery 向表中添加多行

> ID：14314325
> 
> 赞同：4
> 
> 时间：2013-01-14T06:50:03.863
> 
> 标签：javascript, jquery

如何使用 jQuery 或 JavaScript 动态地将多行添加到表中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T06:53:42.440

您可以使用 append() 一个接一个地添加单行：

```
<table id="add"></table>               
<script type="text/javascript">
    function addRow()
    {
        var str ="";
        for(var i=0;i<20;i++)
        {
            str+="<tr>";
            str+="<td>"+i+"</td>";
            str+="</tr>";
        }
        $('#add').html(str); or $('#add').append(str);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:06:43.047

此方法会将给定单元格的“x”个副本添加到表中。

```
function add_rows(target, count, cells) {
  for (var i=0; i < count; i++) {
    var row = $('<tr/>');
    for (var c = 0; c < cells.length; c++) {
      row.append($('<td>'+cells[c]+'</td>'));
    }
    $(target).append(row);
  }
} 
```

有关演示，请参见[http://jsfiddle.net/arLPY/ 。](http://jsfiddle.net/arLPY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:21:00.717

获取表格元素，然后为其创建一个新行，然后根据列数将单元格添加到行中

```
 var tableID,numRows,numCells;
        function addRow(tableID,numRows) {

        var table = document.getElementById(tableID);
         var i;
         for( i=0 ; i<numRows ;i++)
         {

         var rowCount = table.rows.length;

       var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.name="chkbox[]";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        element2.name = "txtbox[]";
        cell3.appendChild(element2);
          }

    } 
```

# ios6 - 无法更改 UISearchDisplayController 的颜色

> ID：14314326
> 
> 赞同：0
> 
> 时间：2013-01-14T06:50:18.530
> 
> 标签：ios6, xcode4.5, uisearchdisplaycontroller

我正在使用`UISearchDisplayController`，`UInavigationBar`但背景颜色`UISearchDisplayController`与 uinavigationbar 的颜色不匹配。我在 ma 中使用了以下代码`ViewDidLoad`但没有改变我无法改变颜色`UISearchDisplayController`

```
self.searchDisplayController.searchBar.tintColor = [UIColor clearColor]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:35:14.097

我所做的是创建了一个`UISearchBar`子类，并在 IB 中使 searchBar 属于 `UISearchDisplayController`该子类的一部分。从那里我能够改变`tintColor`and `backgroundColor`。我需要这个的原因是因为`UISearchBar`在 a 中没有正确显示`UINavigationBar`，这是我能想到的唯一方法，如何做到这一点。

**编辑**

`UISearchDisplayController`您实际上可以使用的初始化程序相对容易地做到这一点`initWithSearchBar:contentsController:`，但是您仍然需要子类化`UISearchBar`.

* * *

这是我使用的代码。现在，如果您通过 IB 执行此操作，您只需要使用`initWithCoder:`但我创建了一个`setup`方法。以防万一，我需要在 IB 以外的地方再次使用它。

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setup];
    }
    return self;
}

-(id) initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [self setup];
    }
    return self;
}

-(id)init {
    if (self = [super init]) {
        [self setup];
    }
    return self;
}

-(void) setup {
    self.backgroundColor = [UIColor clearColor];
    self.tintColor = [UIColor clearColor];
    for (UIView * view in self.subviews) {
        if ([view isMemberOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            view.alpha = 0.0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T12:49:32.993

A`UISearchDisplayController`不是界面元素。它是一个控制器，而不是一个视图。它没有颜色。

# sql - 带有动态 IN() 运算符的 SQL Where 子句

> ID：14314334
> 
> 赞同：1
> 
> 时间：2013-01-14T06:51:12.690
> 
> 标签：sql, sql-server-2008, where-clause

我有一个查询，稍后将用于构建 SSRS-2008 报告。此查询将用作许多报告的通用模板。

因此，查询中有很多参数，每个报表都应该在报表生成器中相应地配置参数。

经过这么长的介绍，我的问题是：

在查询的`WHERE`子句中，参数带有`IN()`运算符，例如：

```
WHERE Users IN(@p1) AND ... 
```

在`@p1`一份报告中可以是特定用户（例如`WHERE Users IN(121,154,151)`），在不同的报告中可以是**所有用户**。在那种情况下，**这是我的问题**，参数`@p1`应该得到什么值？

我知道我可以使用不同的数据集来检索所有用户并将其放入参数中，但我想避免这种情况（由于性能问题并保持查询尽可能通用）并且想知道是否有任何其他选择？（类似`IN('% %')`）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:08:11.260

首先，我喜欢你充满爱的照片，祝你生活愉快。

之后你可能会发现[我关于类似列表的参数的同一个问题](https://stackoverflow.com/q/14257355/1471381)很有用，几天前我问过它并提出了非常好的各种解决方案。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:59:34.823

你可以通过改变参数来做到这一点

```
 @p1 = "SELECT users FROM table" 
```

# android - 是否有任何 Android 函数调用只进行一两个特定的系统调用？

> ID：14314335
> 
> 赞同：0
> 
> 时间：2013-01-14T06:51:15.857
> 
> 标签：android, c, linux-kernel

我想针对`Android`应用程序中的某些特定代码行跟踪系统调用，并使用`strace`or `system call hooking`，我可以获得针对`APK`.

我想知道是否有任何函数调用或我们已经知道确切数量的系统调用的其他任何东西，以便我可以将它放在我感兴趣的代码行之前和之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:48:03.510

您尝试做的问题是您的一步与 Java VM 的底层系统脱节。它可以在你的脚下做各种你的应用无法控制的系统调用相关的事情。

在非 android 世界中，最常用的系统调用是“gettimeofday”，因为它从不被库函数缓存并且相当容易看到发生。但是，正如您在上一个问题中指出的那样，这要困难得多，因为 VM 会自行进行 gettimoufday 调用（很可能是出于会计目的）。因此，您要选择一个会导致系统调用但不太可能被 VM 正常调用的 android 函数。浏览 API 的一些候选人包括：

*   [统计信息](http://developer.android.com/reference/android/os/StatFs.html)
*   [插座](http://developer.android.com/reference/java/net/Socket.html)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:58:30.353

你可以自己找出来。统计一个“hello world”应用程序中的系统调用，给它添加一个函数调用，再统计调用，不同的是添加的函数的调用次数。

# c# - 在数据表中插入记录

> ID：14314341
> 
> 赞同：-1
> 
> 时间：2013-01-14T06:51:34.107
> 
> 标签：c#, linq, foreach

我有大约 10 万条记录，`DataTable`默认值为`EdgeId`0

我正在使用以下`linq`查询在此表中插入值

```
foreach (IEdge ed in edCol)
{
    var row  = from r in dtRow.AsEnumerable()  
               where (((r.Field<string>("F1") == ed.Vertex1.Name) && 
                       (r.Field<string>("F2") == ed.Vertex2.Name)) || 
                      ((r.Field<string>("F1") ==ed.Vertex2.Name) &&
                       (r.Field<string>("F2") == ed.Vertex1.Name)))
               select r;

    foreach (DataRow rows in row)
    {
        row["EgdeId"]=ed.Id;
    }
} 
```

内部`foreach loop`需要大部分时间来执行。

有没有更好的方法来插入记录`DataTable`而不`foreach loop`对每个都使用它`DataRow`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:12:48.740

```
var query = from r in dtRow.AsEnumerable()
            from ed in edCol
            let f1 = r.Field<string>("F1")
            let f2 = r.Field<string>("F2")
            let v1 = ed.Vertex1.Name
            let v2 = ed.Vertex2.Name
            where (f1 == v1 && f2 == v2) || 
                  (f1 == v2 && f2 == v1)
            select new { Row = r, EdgeId = ed.Id };

foreach(var item in query)
   item.Row["EgdeId"] = item.EdgeId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:43:17.657

看起来您正在为 edCol 中的每个项目迭代 dtRow。如果 dtRow 中的项目数量很大，并且匹配项目的数量相对较少，您可以预处理 dtRow 以构建从 (ed.Vertex1.Name, ed.Vertext2.Name) 到行列表的有效映射。例如 Dictionary<Tuple<string,string>、List<DataRow>>。

# python - 2013 年错误的周数

> ID：14314343
> 
> 赞同：4
> 
> 时间：2013-01-14T06:51:40.507
> 
> 标签：python

我从 2011 年开始使用我的备份脚本，完全没有问题。但自 2013 年初以来，我遇到了正确的周数问题。

```
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import time
>>> time.strftime("%W", time.localtime())
'02' 
```

但我们有第 3 周

难道我做错了什么？它一直工作到 2013 年。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:58:17.550

> """一年中的周数（星期一作为一周的第一天），十进制数 [00,53]。在第一个星期一之前的新年中的所有天都被认为是在第 0 周。"""

您正在寻找的是通过 ISO 标准定义的周数的值。

查看 isoweek 模块。

```
>>> from isoweek import Week
>>> Week.thisweek()
isoweek.Week(2013, 3)
>>> Week.thisweek().week
3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T06:53:41.397

第一个星期一之前的新年中的所有日子都被认为是在第 0 周。^([docs](http://docs.python.org/2/library/time.html))

*看看日历：*

```
import calendar    
print calendar.month(2013,1)

Mo Tu We Th Fr Sa Su
    1  2  3  4  5  6
 7  8  9 10 11 12 13
14 15 16 17 18 19 20
21 22 23 24 25 26 27
28 29 30 31 
```

*在标准库中，您可以使用`datetime.isocalendar()`：*

```
from datetime import datetime
datetime.date(datetime.now()).isocalendar()[1] 
```

# python - 如何在不显式调用每个属性的情况下将 GAE 中的一种类型中的所有实体复制到另一种类型

> ID：14314344
> 
> 赞同：3
> 
> 时间：2013-01-14T06:51:56.683
> 
> 标签：python, google-app-engine, google-cloud-datastore

我们如何`function clone_entity()`按照在 Python 中[复制 Google App Engine 数据存储中的实体中所述使用，而无需在“编译”时知道属性名称](https://stackoverflow.com/questions/2687724/copy-an-entity-in-google-app-engine-datastore-in-python-without-knowing-property)来将值复制到不同种类的实体？（由于密钥也被复制，因此克隆发生在同一种类型中，因此上述链接中的解决方案不适用于此特定目的！）

尝试了以下（和其他变体，但无济于事）

```
query = db.GqlQuery("SELECT * FROM OrigKind")
results = query.fetch(10);

for user in results:
    new_entry = models.NewKind()
    new_entry_complete_key = new_entry.put()
    new_entry = clone_entity(user, Key=new_entry_complete_key)
    new_entry.put() 
```

（需要将所有实体从**OrigKind**复制到**NewKind**）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:53:51.567

您需要[clone_entity](https://stackoverflow.com/questions/2687724/copy-an-entity-in-google-app-engine-datastore-in-python-without-knowing-property#answer-2712401)的修改版本：

原始实现的答案中讨论了[原始克隆方法](https://stackoverflow.com/questions/2687724/copy-an-entity-in-google-app-engine-datastore-in-python-without-knowing-property#answer-2712401)存在一些缺陷。

```
def clone_entity(e, to_klass, **extra_args):
  """Clones an entity, adding or overriding constructor attributes.

  The cloned entity will have exactly the same property values as the original
  entity, except where overridden. By default it will have no parent entity or
  key name, unless supplied.

  Args:
    e: The entity to clone
    extra_args: Keyword arguments to override from the cloned entity and pass
      to the constructor.
  Returns:
    A cloned, possibly modified, copy of entity e.
  """
  klass = e.__class__
  props = dict((k, v.__get__(e, klass)) for k, v in klass.properties().iteritems())
  props.update(extra_args)
  return to_klass(**props)

# Use the clone method
query = db.GqlQuery("SELECT * FROM OrigKind")
results = query.fetch(10);

for user in results:
    new_entry = clone_entity(user, NewKind)
    new_entry.put() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T12:34:28.407

我想在 Shay 的回答中添加几件事：

*   处理 to_klass 没有 e 属性的情况。
*   调整 clone_entity 方法以使用 ndb.Model

.

```
def clone_entity(e, to_klass, **extra_args):
    """Clones an entity, adding or overriding constructor attributes.

    The cloned entity will have exactly the same property values as the original
    entity, except where overridden or missing in to_klass. By default it will have 
    no parent entity or key name, unless supplied.

    Args:
      e: The entity to clone
      to_klass: The target class
      extra_args: Keyword arguments to override from the cloned entity and pass
        to the constructor.
    Returns:
      A cloned, possibly modified, instance of to_klass with the same properties as e.
    """
    klass = e.__class__
    props = dict((k, v.__get__(e, klass))
                 for k, v in klass._properties.iteritems()
                 if type(v) is not ndb.ComputedProperty
    )
    props.update(extra_args)
    allowed_props = to_klass._properties
    for key in props.keys():
        if key not in allowed_props:
            del props[key]
    return to_klass(**props) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:14:49.647

它只是编写了一个实用程序来将实体从一个应用程序复制到另一个应用程序并压缩一种实体。该实用程序会进行精确的克隆，包括键、NDB 重复属性、serving_urls 和类型中引用的 blob。为了完成这项工作，我必须知道实体的属性类型。我使用 Python 27 和 NDB，但该实用程序也传输 db.Models。

这是查找 kind 的所有属性类型的代码：

```
 self.kind = 'Books'                                                    # the entities to copy
    self.model_mods = {'Books' : 'models'}                                 # modules to import the model from for a kind

    module = __import__(self.model_mods[self.kind], globals(), locals(), [self.kind], -1)
    self.model_class = getattr(module, self.kind)

    entity = self.model_class()                                            # ndb or db
    if isinstance(entity, ndb.Model): 
        self.ndb = True
        self.query = self.model_class.query()                              # prepare the query to get all the entities 
        self.makePage = self._pager(self.ndbPager)                         # wrap the ndb pager
    elif isinstance(entity, db.Model): 
        self.ndb = False
        self.query = self.model_class.all()
        self.makePage = self._pager(self.dbPager)                          # wrap the db pager
    else :
        raise ValueError('Failed to classify entities of kind : ' + str(self.kind))
    logging.info('Entities of kind : %s inherits from class : %s.Model' 
                 %(self.kind, self.ndb * 'ndb' + (not self.ndb) * 'db'))

    self.data_types = {}                                                   # create a dict of property data types                                         
    for key in self.model_class._properties :                              # the internals of the model_class object
        property_object = getattr(self.model_class, key.split('.')[0])     # strip, so it works for repeated structured properties
        self.data_types[key] = property_object.__class__.__name__          # get the property type
    logging.debug(self.data_types) 
```

在上面的代码中，我为 db 或 NDB 包装了一个寻呼机（使用游标进行分页传输），以在 GAE appid 之间传输实体。

基于这些属性，我可以对属性进行编码和解码以传输模型。为此，我首先使用创建实体的字典`NDB : entity.to_dict() or db: entity.to_dict()`。我将密钥添加到字典中。现在我可以对实体的属性进行编码并腌制结果以传输编码的实体：

```
data = pickle.dumps(entity_dict, 1)
encoded_entity = base64.b64encode(data) 
```

# excel - 通过 VBA 代码的系统信息

> ID：14314348
> 
> 赞同：1
> 
> 时间：2013-01-14T06:52:17.027
> 
> 标签：excel, vba

我想知道是否有任何方法可以通过 VBA 代码检索系统信息？

Excel VBA 中是否有诸如 SystemInfo 类之类的类来执行此任务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:46:07.493

每个 Office 应用程序的 VBA 都有不同的可用类。

例如：- 要找出正在运行的操作系统，Word 有一个包含`System.OperatingSystem`. 这提供了一个文本字符串。Excel 具有相同的 OperatingSystem 对象，但在 Application 类下，因此要在 Excel 中获取相同的信息，请使用`Application.OperatingSystem`.

对象浏览器（VBA 编辑器中的 F2）中提供了可用对象的完整参考。

如果您无法从 WMI 查询中找到任何信息。有关示例，请参见 [http://accesstips.wordpress.com/2009/05/18/using-the-power-of-vbscripts-in-microsoft-access-vba/ 。](http://accesstips.wordpress.com/2009/05/18/using-the-power-of-vbscripts-in-microsoft-access-vba/)

# php - 反混淆 PHP 脚本 (php obfuscator 1.4)

> ID：14314349
> 
> 赞同：3
> 
> 时间：2013-01-14T06:52:27.027
> 
> 标签：php

情况很简单——以前的程序员被解雇了。他所做的最棒的一件事——它混淆了 PHP 代码并删除了源文件。我尝试自己解码脚本，但更改后代码不起作用。也许有人可以帮助解码？

> **[pastebin.com/pfQtzgGx](http://pastebin.com/pfQtzgGx)**
> 
> **[pastebin.com/wPaQ9L6Y](http://pastebin.com/wPaQ9L6Y)**
> 
> **pastebin.com/sgiEaCG0**
> 
> **pastebin.com/xC0q55U2**
> 
> **pastebin.com/pVXtk78k**

为了解码，我尝试了这个扩展：evalhook

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T07:59:11.137

嗯，我只想做一个，但我有点迷上了这个:)它应该是可读的。试试看，但如果没有错误，我会感到非常惊讶。但是很容易猜出它现在是什么以及如何修复它。

这是第一个：（pfQtzgGx）

```
require_once('config.php');
if (isset($_GET['lang'])) {
    $get_lang = mysql_escape_string($_GET['lang']);
} else {
    $get_lang = 'ru';
}
$name1 = 'name1_'. $get_lang;
$name2 = 'name2_' . $get_lang;
$get_step = 0;
$code_len = 0;
if (isset($_GET['step'])) {
    $get_step = mysql_escape_string($_GET['step']);
}
if (isset($_GET['code_len'])) {
    $code_len = mysql_escape_string($_GET['code_len']);
}
if (isset($_GET['term'])) {
    $get_term = mysql_escape_string($_GET['term']);
}
if ($get_step == 3 or $get_step == 4) {
    $get_term_b64dec = base64_decode($get_term);
    $get_term_binary = '';
    for ($i = 0; $i < strlen($get_term_b64dec) - 1; $i += 2) {
        $get_term_binary .= chr(hexdec($get_term_b64dec[$i] . $get_term_b64dec[$i + 1]));
    }
    $_9  = preg_split('/[.]/', $get_term_binary, -1, PREG_SPLIT_NO_EMPTY);
    $_10 = $_9[4];
    if ($get_step == 3) {
        $get_step = 0;
    } else {
        $get_step = 1;
    }
} else {
    $_10 = substr($get_term, 0, strpos($get_term, '.'));
}
if ($get_step == 0) {
    $query = "SELECT DISTINCT 
        pt_len.$name1 AS code, 
        pt_len.$name1 AS field 
        FROM feconi.pt_sort1 
        LEFT OUTER JOIN feconi.pt_len ON pt_sort1.id_pt_standard = pt_len.id_pt_standard 
        WHERE pt_sort1.id = \"$_10\"
            AND pt_sort1.size1 BETWEEN pt_len.s1_min 
            AND pt_len.s1_max 
            AND pt_sort1.id_pt_type = pt_len.id_pt_type";
} else {
    $query = "SELECT DISTINCT 
        pt_len.ID AS code, 
        pt_len.$name2 AS field 
        FROM feconi.pt_sort1 
        LEFT OUTER JOIN feconi.pt_len ON pt_sort1.id_pt_standard = pt_len.id_pt_standard 
        WHERE pt_sort1.id = \"$_10\" 
            AND pt_len.$name1 = \"$code_len\"
            AND pt_sort1.size1 
                BETWEEN pt_len.s1_min AND pt_len.s1_max 
            AND pt_sort1.id_pt_type = pt_len.id_pt_type";
}
$result = @mysql_query($query);
if (mysql_num_rows($result) > 0) {
    for ($i = 0; $i < mysql_num_rows($result); $i++) {
        $row = mysql_fetch_array($result);
        if (mysql_num_rows($result) == 1) {
            $output = '[{"value":"' . $row['code'] . '","text":"' . $row['field'] . '"}';
        } else {
            if ($i == 0) {
                $output = '[{"value":"' . $row['code'] . '","text":"' . $row['field'] . '"}';
            } else {
                $output = $output . ',{"value":"' . $row['code'] . '","text":"' . $row['field'] . '"}';
            }
        }
    }
    $output = $output . ']';
    echo $_GET['jsoncallback'] . '(' . $output . ');';
} 
```

这是第二个：wPaQ9L6Y

```
<?
require_once('config.php');

if (isset($_GET['term'])) {
    $get_term = mysql_escape_string($_GET['term']);
}

if (isset($_GET['lvl'])) {
    $get_lvl= mysql_escape_string($_GET['lvl']);
} else {
    $get_lvl= 1;
}

if (isset($_GET['term1'])) {
    $get_term1 = mysql_escape_string($_GET['term1']);
}

if (isset($_GET['term2'])) {
    $get_term2 = mysql_escape_string($_GET['term2']);
} else {
    $get_term2 = 1;
}

if ($get_term2 == 2) {
    $term1_b64dec = base64_decode($get_term1);

    $term1_binary = '';
    for ($i = 0; $i < strlen($term1_b64dec) - 1; $i += 2) {
        $term1_binary .= chr(hexdec($term1_b64dec[$i] . $term1_b64dec[$i + 1]));
    }

    $term1_ID = preg_split('/[.]/', $term1_binary, -1, PREG_SPLIT_NO_EMPTY);
    $sort1_ID = $term1_ID[4];

    if ($get_term2 == 3) {
        $get_term2 = 0;
    } else {
        $get_term2 = 1;
    }
} else {
    $sort1_ID = substr($get_term1, 0, strpos($get_term1, '.'));
}

$query  = "SELECT 
    pt_len.code_len AS code_len, 
    pt_len.w_min AS w_min, 
    pt_len.w_max AS w_max, 
    pt_len.l_min AS l_min, 
    pt_len.l_max AS l_max, 
    pt_len.w_step AS w_step, 
    pt_len.l_step AS l_step, 
    pt_len.width AS width, 
    pt_len.len AS len, 
    pt_len.default_w AS default_w, 
    pt_len.default_l AS default_l, 
    pt_sort1.weight AS weight, 
    pt_sort1.measure2 AS measure2 
    FROM feconi.pt_len 
    INNER JOIN pt_sort1 ON pt_len.id_pt_standard = pt_sort1.id_pt_standard 
        AND pt_len.id_pt_type = pt_sort1.id_pt_type 
    WHERE pt_len.ID = \"$get_term\" 
        AND pt_len.level <= \"$get_lvl\" 
        AND pt_sort1.ID = \"$sort1_ID\"";
$result = @mysql_query($query);

if (mysql_num_rows($result) > 0) {
    $row = mysql_fetch_array($result);

    $output = '{"code_len":"' . $row['code_len'] . '","w_min":"' . $row['w_min'] . '","w_max":"' . $row['w_max'] . '",';
    $output = $output . '"l_min":"' . $row['l_min'] . '","l_max":"' . $row['l_max'] . '","w_step":"' . $row['w_step'] . '",';
    $output = $output . '"l_step":"' . $row['l_step'] . '","width":"' . $row['width'] . '","len":"' . $row['len'] . '",';
    $output = $output . '"default_w":"' . $row['default_w'] . '","default_l":"' . $row['default_l'] . '",';
    $output = $output . '"weight":"' . $row['weight'] . '","measure2":"' . $row['measure2'] . '"}';

    echo $_GET['jsoncallback'] . '(' . $output . ');';
}
?> 
```

第三个：（sgiEaCG0）

```
require_once('config.php');

if (isset($_GET['lang'])) {
    $get_lang = mysql_escape_string($_GET['lang']);
} else {
    $get_lang = 'ru';
}

$name_lang = 'name_' . $get_lang;
$_2 = 0;
$_3 = 0;
if (isset($_GET['term'])) {
    $get_term = mysql_escape_string($_GET['term']);
}
$query = "SELECT 
    pt_unt.$name_lang AS `text`, 
    pt_unt.id AS value 
    FROM rol_lenunt 
    LEFT OUTER JOIN pt_unt ON rol_lenunt.unt = pt_unt.id 
    RIGHT OUTER JOIN pt_len ON pt_len.code_len = rol_lenunt.len 
    WHERE pt_len.id = \"$get_term\"";
$result = @mysql_query($query);
if (mysql_num_rows($result) > 0) {
    $output = '[';
    for ($i = 0; $i < mysql_num_rows($result); $i++) {
        $row = mysql_fetch_array($result);
        if (strlen($output) <> 1) {
            $output .= ',';
        }
        $output .= '{"text":"' . $row['text'] . '","value":"' . $row['value'] . '"}';
    }
    $output .= ']';
    echo $_GET['jsoncallback'] . '(' . $output . ');';
} else {
    echo 'sorry';
} 
```

#4：（xC0q55U2）

```
if (isset($_GET['q'])) {
    $get_q = mysql_escape_string($_GET['q']);
}
$get_q = base64_decode($get_q);
$q_binary = '';

for ($i = 0; $i < strlen($get_q) - 1; $i += 2) {
    $q_binary .= chr(hexdec($get_q[$i] . $get_q[$i + 1]));
}
$q_splitted = preg_split('/[.]/', $q_binary, -1, PREG_SPLIT_NO_EMPTY);
$_4 = $q_splitted[4];
$_5 = $q_splitted[6];
$_6 = $q_splitted[15];
$_7 = $q_splitted[16];
$_8 = '{"value":"' . $_4 . '.' . $_5 . '","APclass":"' . $_6 . '","apOther":"' . $_7 . '"}';
echo $_GET['jsoncallback'] . '(' . $_8 . ');'; 
```

最后：pVXtk78k

```
require_once('config.php');
if (isset($_GET['q'])) {
    $get_q = mysql_escape_string($_GET['q']);
}
$query = "SELECT 
lc_region.adv_supplier AS adv_supplier , 
lc_region.adv_supplier_web AS adv_supplier_web , 
lc_region.adv_stock AS adv_stock , 
lc_region.adv_stock_web AS adv_stock_web , 
lc_region.adv_producer AS adv_producer , 
lc_region.adv_producer_web AS adv_producer_web 
FROM lc_region 
WHERE lc_region.id = $get_q";
$result = @mysql_query($query);
if (mysql_num_rows($result) > 0) {
    for ($i = 0; $i < mysql_num_rows($result); $i++) {
        $row = mysql_fetch_array($result);
        $output = '{"trade_0_filed_2":"' . $row['adv_supplier'] . 
            '","trade_0_filed_2_web":"' . $row['adv_supplier_web'] . 
            '","trade_1_filed_2":"' . $row['adv_stock'] . 
            '","trade_1_filed_2_web":"' . $row['adv_stock_web'] . 
            '","trade_2_filed_2":"' . $row['adv_producer'] . 
            '","trade_2_filed_2_web":"' . $row['adv_producer_web'] . '"}';
    }
    echo $_GET['jsoncallback'] . '(' . $output . ');';
} 
```

# perl - 从 perl 模块返回 -1

> ID：14314367
> 
> 赞同：1
> 
> 时间：2013-01-14T06:54:05.563
> 
> 标签：perl, package

> **可能重复：**
> [什么是有效的 Perl 模块返回值？](https://stackoverflow.com/questions/1860869/what-are-valid-perl-module-return-values)

一般我们`1;`在模块末尾使用。这是为了表明模块返回`true`并且可以正确导入。现在如果我们返回mean ，这`0`意味着`false`模块导入失败。

我的问题是，如果我在模块末尾使用（或返回）下面的语句怎么办

*   `-1;`
*   `some text;`
*   或者`abc;`

表示`-1`错误，并且`some text`,`abc`表示`true`

另外，如果我根本不使用`1;`或不使用任何语句（如上），那么在这种情况下模块会返回什么？

它回来了`undef`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:27:15.117

任何真值都表示成功。-1 是一个真值。

return 不必在文件的末尾；它是最后一个可执行语句的返回值（也就是说，最后一个语句不仅仅是编译时的东西，比如 package、use、no、sub、format）。

例如，需要包含以下内容的文件：

```
package foo;
our @x;
sub bar { } 
```

如果@foo::x 为空则失败，否则成功。

如果确实没有可执行语句，则返回值为 undef (false)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:43:37.723

就像 sub 一样，模块返回的值是最后一条语句返回的值。如果文件为空，我想它是 undef 。（这绝对不是真正的价值。）

模块应始终返回一个真值（除零、空字符串或 undef 以外的任何值）。

*   `-1`是真的，所以这是可以接受的。
*   `some text`是等效于 的间接方法调用`text->some()`。
    *   `text->some()`（和等价的）当且仅当该方法返回一个真值时是可接受的。为了安全起见，我会跟进一个真正的常量。
*   `abc`是等效于 的子例程调用`abc()`，或等效于 的字符串文字`'abc'`。
    *   `abc()`（和等价的）当且仅当子例程返回真值时是可接受的。为了安全起见，我会跟进一个真正的常量。
    *   `'abc'`（和等价的）是真的，所以这是可以接受的。

如果有错误，`die`则改为。但是，如果合理的话，即使这样也应该避免，因为如果有人捕捉到异常，它会使模块半加载（半执行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:59:43.747

这些都是真的，模块将编译。但是，在更积极的诊断下，我看到编译器会发出关于 1 以外的值的警告。实际上这个“1;” 可以放在任何一条线上。我有时把它放在我正在调试的代码中间，只是为了有很好的调试断点行。

许多程序在较低的诊断级别上运行时不会出现问题，因为在最后一个表达式中意外地有各种真值，不一定是最后一行。

```
$a = "意外地让 -c 开心的真正价值。";

子你好{返回；}
```

# asp.net - 在 Web Api 聊天应用程序后端服务器中使用或不使用数据传输对象 (DTO)

> ID：14314368
> 
> 赞同：10
> 
> 时间：2013-01-14T06:54:07.667
> 
> 标签：asp.net, asp.net-web-api, chat, dto

我有一个使用 Web Api 构建的聊天应用程序后端，我将几个数据库实体直接暴露给客户端。我想知道将实体映射到 DTO 是否有任何积极意义，或者我是否应该像现在一样继续公开实体。只是为了澄清一下，我不是在问 DTO 与非 DTO 的一般问题，而是在这种情况下使用它的优点，因为实体中的大多数字段可能会被客户端使用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T07:00:18.510

是的，如果这是一个由一个人开发的小型应用程序并且您只有几天的时间来完成它，您可以公开您的实体。

如果您打算构建一个未来可能会成长的应用程序，您应该考虑使用 DTO，因为域实体对于数据的表示并不是最佳的。域实体总是或多或少，而不是您在客户端所需要的。

您可以使用名为[AutoMapper](https://github.com/AutoMapper/AutoMapper)的工具将域实体映射到 DTO。

一些演示： http: [//www.codeproject.com/Articles/61629/AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T07:05:49.853

与任何其他应用程序具有相同的优势。您的应用程序没有特定的优势。使用 DTO 本质上是一种解耦练习，将属性与方法分离。目前您正在传递数据库对象。这样做可能意味着你传递的比要求的多，暴露的比需要的多。您还暗示了很多，操作是什么以及如何进行的。再说一遍，你要从分裂的努力中得到什么？

# database - 我应该使用哪个键值数据库？

> ID：14314370
> 
> 赞同：1
> 
> 时间：2013-01-14T06:54:12.063
> 
> 标签：database, nosql

这是我的问题：

该表将具有键值对，并且同一键可以具有多个值。

```
Key    Value
K1      V1
K1      V2
K2      V2
K2      V3 
```

我将只有一种类型的查询：

1.  检索具有所有值（V（i），V（i + 1），...，V（j））的所有键。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:20:06.293

我会尝试`mongodb`。您可以像这样存储文档和查询：

```
db.pairs.find(
   {
     value: { $in: [ v(i), v(i+1),...,v(j)] }
   }
) 
```

要查找所有元素：

```
db.pairs.find(
   {
     value: { $all: [ v(i), v(i+1),...,v(j)] }
   }
) 
```

# javascript - HTML 列表元素

> ID：14314372
> 
> 赞同：0
> 
> 时间：2013-01-14T06:54:15.707
> 
> 标签：javascript, html, ajax

我在 HTML 文档中有两个列表。两个列表都包含不同的数据。

我的收获是，如果用户在一个列表中选择项目，那么相同的项目应该被添加到同一位置的另一个列表中。

**例如。**

```
list 1  - Hi, Hello       
list 2  - Thanks, Welcome 
```

假设用户`"Hi"`在 List1 中选择，然后在 List2 中`"Thanks"`被替换`"Hi"`为相同位置的那个`list2[0]`。

我在internate上读到我们可以通过使用java脚本来实现这一点，但我还没有得到任何解决方案。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:16:10.863

假设我们的标记如下：

```
<div>
  <ul id='list-1'>
    <li>Hi</li>
    <li>Hello</li>
  </ul>
</div>

<div>
  <ul id='list-2'>
    <li>Thanks,</li>
    <li>Welcome</li>
 </ul>
</div> 
```

我们有以下javascript：

首先，我们选择两个列表元素：

```
var listOne = document.getElementById('list-1')
   ,listTwo = document.getElementById('list-2'); 
```

然后，我们在这些元素的子元素中查找列表项：

```
var listOneItems = listOne.getElementsByTagName('li') //returns an array
   ,listTwoItems = listTwo.getElementsByTagName('li'); 
```

接下来，我们设置单击第一个列表中的列表项时要执行的操作：

```
for(var i=0; i<listOneItems.length; i++){
 /*we use swap.call so that the function is in the context of this
   list item*/
 listOneItems[i].onclick = swap.call(listOneItems[i], i);   
} 
```

现在我们需要定义`swap`函数：

```
/*this function returns the listener for the element, using a closure
  to bind the correct elements*/
function swap(i){
  var elem = this;
  return function(){
    listTwoItems[i].innerHTML = elem.innerHTML;  
  }
} 
```

你可以看到它在[这里运行](https://tinker.io/b45e0/1)

# ruby - 增加 Net::HTTP 的超时时间

> ID：14314375
> 
> 赞同：2
> 
> 时间：2013-01-14T06:54:36.703
> 
> 标签：ruby

虽然我提高了 Net::HTTP 的超时时间：

```
http = Net::HTTP.new(uri.host, uri.port)
http.open_timeout = 60
http.read_timeout = 60
response = http.post(uri.path, body, headers) 
```

我不断收到这些错误：

```
Timeout::Error at /
execution expired
file: http.rb location: initialize line: 762 
```

我猜超时时间很长，我不应该得到这些错误，是吗？我还阅读了几篇文章，这些文章描述了如何使用与我不同的方式来增加超时。这让我很困惑：对于这么简单的事情，有很多不同和复杂的解决方案，我不知道哪个是正确的。

您对增加超时的正确方法有何看法？而且，我如何检查我是否做得正确？

# php - Facebook 应用结果在本地和 Heroku 上有所不同

> ID：14314380
> 
> 赞同：4
> 
> 时间：2013-01-14T06:55:21.470
> 
> 标签：php, facebook, facebook-graph-api, heroku, facebook-php-sdk

在我的 facebook 应用程序中，有两个文件 index.php 和 write.php 使用了这个基本代码：

```
require_once('AppInfo.php');
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] !=    '127.0.0.1') {
    header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
    exit();
}
require_once('utils.php');
require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
    'appId'  => AppInfo::appID(),
    'secret' => AppInfo::appSecret(),
));
$user_id = $facebook->getUser(); 
```

加载 index.php 后，将向 write.php 发送一个 ajax 请求，后者将查询发送到 Facebook 并将结果写入文本文件。write.php 使用相同的代码来初始化 Facebook 对象。

这在本地测试时工作正常，但在上传到 Heroku 后会给出任意结果。$user_id 为 null 并且代码无法超出 if($user_id) 或 $user_id 的值为 0，这会在以后引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:26:30.917

Facebook SDK 将登录数据存储在会话中。由于您的 AJAX 请求`write.php`不会发送完整的 facebook POST 数据，因此 facebook 类假定没有签名请求，因此没有数据。

我有时遇到同样的行为，问题总是，会话没有正确建立。不幸的是，我不太确定，确切的原因是什么。

# facebook - Facebook c# windows 窗体：将我的 facebook 页面显示为柱形图，以通过喜欢的数量告诉用户哪个页面最受欢迎

> ID：14314381
> 
> 赞同：0
> 
> 时间：2013-01-14T06:55:30.547
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我试图将我的 Facebook 页面的点赞数显示为图表，以便用户知道哪些页面最受欢迎。我设法提取并显示我的 facebook 页面名称数据以表示图表上的颜色，我似乎无法相应地获得在 y 轴上出现的点赞数。我认为这与将我的 Json 转换为整数有关吗？任何帮助，将不胜感激！我将此[链接](http://www.dotnetperls.com/chart)用作图表的参考。

```
private void topPageBtn_Click(object sender, EventArgs e)
    {

            try
            {

                chart1.Visible = true;

                FacebookAPI api = new Facebook.FacebookAPI(myToken.Default.token);

                JSONObject pageData = api.Get("/me/accounts");

                var data = pageData.Dictionary["data"];

                List<JSONObject> pageList = data.Array.ToList<JSONObject>();

                foreach (var page in pageList)
                {
                    string[] seriesArray = { page.Dictionary["name"].String };

                    //pull more page information from the page ID
                    JSONObject pageInfo = api.Get(page.Dictionary["id"].String);

                    //store the number of likes
                    int[] pointsArray = {pageInfo.Dictionary["likes"].String};

                    // Add series.
                    for (int i = 0; i < seriesArray.Length; i++)
                    {
                        // Add series.
                        Series series = this.chart1.Series.Add(seriesArray[i]);

                        series.Points.Add(pointsArray[i]);
                    }
                }

                // Set palette.
                this.chart1.Palette = ChartColorPalette.EarthTones;

                // Set title.
                this.chart1.Titles.Add("No. of Page likes");

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:16:23.410

```
 try
        {

            chart1.Visible = true;

            FacebookAPI api = new Facebook.FacebookAPI(myToken.Default.token);

            JSONObject pageData = api.Get("/me/accounts");

            var data = pageData.Dictionary["data"];

            List<JSONObject> pageList = data.Array.ToList<JSONObject>();

            foreach (var page in pageList)
            {
                string[] seriesArray = { page.Dictionary["name"].String };

                //pull more page information from the selected ID
                JSONObject pageInfo = api.Get(page.Dictionary["id"].String);

                //
                //store the number of likes

                // Add series.
                for (int i = 0; i < seriesArray.Length; i++)
                {
                    // Add series.
                    Series series = this.chart1.Series.Add(seriesArray[i]);

                    int[] pointsArray = new int[seriesArray.Length];
                    pointsArray[i] = Convert.ToInt32(pageInfo.Dictionary["likes"].Integer);
                    series.Points.Add(pointsArray[i]);
                }
            }

            // Set palette.
            //  this.chart1.Palette = ChartColorPalette.EarthTones;

            // Set title.
            this.chart1.Titles.Add("No. of Fans"); 
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

# actionscript-3 - Flex DataGrid 不想要 DataTip 出现

> ID：14314384
> 
> 赞同：1
> 
> 时间：2013-01-14T06:56:06.477
> 
> 标签：actionscript-3, apache-flex, datagrid, tooltip, flex4.6

附上你会发现一个小项目来显示问题，zip 中还有一个屏幕显示。 [http://imageshack.us/photo/my-images/21/screenhunter50jan140842.jpg/](http://imageshack.us/photo/my-images/21/screenhunter50jan140842.jpg/)

使用 [URL=http://imageshack.us]ImageShack.us[/URL] 上传 - 当您不断刷新**datagrid/advanceddatagrid的****dataProvider**时，会显示不需要的数据提示。- 在屏幕截图中，您可以看到鼠标光标位于高级数据网格的第一列。并显示一个工具提示。- 在第一列的代码中。- 在常规数据网格上也是如此。（虽然有时**工具提示**只是闪烁） - MX 没有问题。**`showDataTips="false"`**

 ****演示项目链接：[https ://dl.dropbox.com/u/5516677/Datatip%20issue.7z](https://dl.dropbox.com/u/5516677/Datatip%20issue.7z)

感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:56:05.667

我发现了问题。这正是 flex 的错误。当 DataGrid 的 dataProvider 发生变化时，渲染器被缓存中的其他渲染器替换，但工具提示仍然来自之前的渲染器，现在是不可见的。我提出一个解决方法。我刚刚为渲染器覆盖了工具提示设置器以检查其可见性。

```
<mx:AdvancedDataGrid id="secoind" left="300" top="20" width="200" height="200" dataProvider="{dta}" showDataTips="false">
        <mx:groupedColumns >
            <mx:AdvancedDataGridColumnGroup >
                <mx:AdvancedDataGridColumn dataField="name" headerText="Name" showDataTips="false">
                    <mx:itemRenderer>
                        <fx:Component>
                            <mx:AdvancedDataGridItemRenderer>
                                <fx:Script>
                                    <![CDATA[
                                        override public function set toolTip(value:String):void
                                        {
                                            super.toolTip = visible ? value : null;
                                        }
                                    ]]>
                                </fx:Script>
                            </mx:AdvancedDataGridItemRenderer>
                        </fx:Component>
                    </mx:itemRenderer>
                </mx:AdvancedDataGridColumn>
                <mx:AdvancedDataGridColumn dataField="text" headerText="Text" showDataTips="true"/>
            </mx:AdvancedDataGridColumnGroup>
        </mx:groupedColumns>
    </mx:AdvancedDataGrid> 
```****

# ruby - 如何在 Aptana 中选择另一个 ruby /gem 环境？

> ID：14314387
> 
> 赞同：1
> 
> 时间：2013-01-14T06:56:56.240
> 
> 标签：ruby, rubygems, aptana

我想在 Aptana Studio3 应用程序中使用非默认的 ruby​​ 解释器和 gem 环境。我在没有 root 权限的 Linux 系统上使用它。`PATH`如设置页面 (http://www.aptana.com/downloads/start) 所述，我也无法配置我的登录名。因此，我想利用设置页面上提出的第二种可能性：

> 如果以这种方式设置登录 PATH 对您来说不切实际，您可以通过使用 studio3 命令行实用程序从命令行启动 Aptana Studio 3 来解决此问题。此实用程序可以在 Aptana Studio 3 安装文件夹的顶层找到，因此您可以将该文件夹放在 PATH 中以方便使用。（也可以在 Aptana Studio 3 运行后调用命令行实用程序，以打开源代码文件进行编辑。）

`studio3`由于我在安装文件夹的顶层没有找到命令行实用程序（我下载了 zip 文件`Aptana_Studio_3_Setup_Linux_x86_3.3.1.zip`），因此我将不胜感激有关如何使用此 studio3 命令行实用程序的帮助。我在哪里可以找到它？如何配置 ruby​​/gem 环境？

# mysql - 用于日志记录的数据库索引和查询优化

> ID：14314388
> 
> 赞同：2
> 
> 时间：2013-01-14T06:57:01.060
> 
> 标签：mysql, sql, query-optimization

对于结构为的任何给定日志记录表：

```
CREATE TABLE `example` (
  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `quantity` varchar(15) COLLATE utf8_unicode_ci NOT NULL,
  `price` varchar(15) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

在每分钟插入条目的地方，我知道在没有索引的情况下离开这个表会更有效。但是，当我尝试将类似的表与`SELECT`

以下查询的平均速度约为 3.7 秒

```
SELECT * FROM (
    SELECT `t1`.`time`,
           `t1`.`quantity` AS `q1`,
           `t1`.`price` AS `p1`,
           `t2`.`quantity` AS `q2`,
           `t2`.`price` AS `p2`
    FROM `example 1` AS `t1`,
         `example 2` AS `t2`
    WHERE `t1`.`time` = `t2`.`time`
    ORDER BY `time` DESC LIMIT 72
) AS dt ORDER BY time ASC; 
```

有什么方法可以大大减少此查询所花费的时间吗？类似的查询，

```
SELECT * FROM (
    SELECT *
    FROM `example`
    ORDER BY `time` DESC LIMIT 72
) AS dt ORDER BY time ASC; 
```

只需要~0.008s。有了这个，我认为简单地执行两个单独的查询然后使用 PHP 比较它们会更有效但更丑陋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:42:50.080

如果这看起来有点基本，请原谅我，但我发现将内容回归基本可以澄清我的想法。

索引是一种组织数据的方式，创建数据时需要付出代价。考虑将纸质文件存储在故障柜中。存放它们的最快方法是将它们塞在合适的地方，但如果您以后需要找到一个，则需要检查抽屉中的每一页。相反，如果您想按日期顺序存储它们，则表示您在放入它们时需要花费更多时间，但找到它们所需的时间更少。

所以这是你的权衡 - 你拥有的索引越多，你的 INSERTS 越慢，但你的 SELECTS 越快，其中 DELETES 和 UPDATES 落在中间的某个地方。

对于一个普通的用户生成/访问的表，通常会有比其他任何东西更多的 SELECTS，并且它们会触及更多的行，因此需要进行广泛的索引。对于日志表，会有更多的 INSERTS，所以要谨慎使用索引。

但是，按照创建顺序对记录进行排序的索引的开销远小于需要在中间粘贴新记录的索引，因此在创建日期时间索引的日志表不会有很大的开销。

此外，在您的情况下，每分钟 1 条记录的速率非常低，因此开销不太重要；每秒几百个，在实时植物记录中并不罕见，是另一回事。

希望这可以帮助。

# ruby - 正则表达式以获取仅包含数字的字符串

> ID：14314389
> 
> 赞同：1
> 
> 时间：2013-01-14T06:57:02.743
> 
> 标签：ruby, regex

我正在制作一个脚本来从源代码中提取指定的字符串。字符串可能包含单词和符号。例如

```
a = "xyz" //1: loading.setText( "#{100}" ); 
```

我要提取

```
"#{100}" 
```

我的[正则表达式](http://rubular.com/r/nJjkThFL5B)错误，它取出`" //1: loading.setText( "`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:33:06.460

这会给[你你想要的](http://rubular.com/r/VbJZifwuX8)：

```
loading\.setText\( ([^ ]+) ) 
```

这是您所追求的匹配组。

如果你不想要引号...

loading.setText("([^"]+)")

但这可能还不够 - 您还没有解释示例字符串中的变量模式是什么，所以我猜到了。如果这对您不起作用，您需要更好地定义您的案例。定义您要提取的数据的周围模式是什么？数据本身的定义模式是什么？

# r - 使用 R 读取具有“通用平面二进制，字节交错 (BIL)”的 GIS 数据

> ID：14314390
> 
> 赞同：1
> 
> 时间：2013-01-14T06:57:14.353
> 
> 标签：r, gis, raster

我正在尝试将[以下 GIS](http://edc2.usgs.gov/glcc/fao/forest_cover.zip)数据文件读入 R：

一些数据规范在[这里](http://edc2.usgs.gov/glcc/fao/data_specifications.php)：

图像类型：通用平面二进制、逐行字节交错 (BIL)

投影：中断的古德同音

我尝试使用 R 包“光栅”，但失败了。

```
library(raster)
r <- raster(file.choose())

Error in .local(.Object, ...) : 
  `C:\global_forest_cover.img' not recognised as a supported file format.

Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer",  : 
  Cannot create a RasterLayer object from this file. 
```

那么，我应该如何将此 GIS 数据加载到 R 中？另外，将投影“Interrupted Goode Homolosine”转换为 LongLat ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:42:12.530

创建一个名为并将[http://edc2.usgs.gov/glcc/fao/header_file.php](http://edc2.usgs.gov/glcc/fao/header_file.php)`global_forest_cover.hdr`的标题信​​息粘贴到其中的文件：

```
BYTEORDER   M
LAYOUT  BIL
NROWS   15059
NCOLS   36543
NBANDS  1
NBITS   8
BANDROWBYTES    36543
TOTALROWBYTES       36543
ULXMAP  -17359000
ULYMAP  8673000
XDIM    1000
YDIM    1000 
```

然后读取`.img`文件：

```
> forest = raster("global_forest_cover.img")
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.6.3, released 2009/11/19
Path to GDAL shared files: /usr/share/gdal16
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files: (autodetected)
> forest
class       : RasterLayer 
dimensions  : 15059, 36543, 550301037  (nrow, ncol, ncell)
resolution  : 1000, 1000  (x, y)
extent      : -17359500, 19183500, -6385500, 8673500  (xmin, xmax, ymin, ymax)
coord. ref. : NA 
data source : /home/nobackup/rowlings/Downloads/global_forest_cover.img 
names       : global_forest_cover 
values      : 0, 255  (min, max) 
```

GDAL 看到`.hdr`文件并使用它来计算文件中 15059*36543 字节的结构`.img`。

但是它没有投影信息。但即便如此，将 IGH 投影扭曲回经纬度可能会有些问题。如果您查看其他 IGH 投影地图，您会发现它们涉及拆除海洋以帮助使地球变平。要回到经纬度，你需要扭转所有这些扁平化和撕裂。这应该是可能的，我认为最新的 PROJ4 库支持 IGH 投影，但可能仅在一个方向上。但是，除非您使用与创建数据完全相同的代码，但反过来，您可能无法得到正确的答案。

鉴于该`.hdr`文件未包含在 zip 中，并且投影对于进一步分析来说并不是一个很好的投影，我会去寻找另一个数据来源。该数据显然仅用于显示目的。而且它也很差，因为它似乎没有丢失 IGH 投影分裂地球的数据值 - 将[http://edc2.usgs.gov/glcc/fao/index.php](http://edc2.usgs.gov/glcc/fao/index.php)页面上的图片与其他 IGH进行比较预测[http://en.wikipedia.org/wiki/Goode_homolosine_projection](http://en.wikipedia.org/wiki/Goode_homolosine_projection)

我认为这里的数据可能更合适： http: [//www.fao.org/forestry/32203/en/](http://www.fao.org/forestry/32203/en/)

```
> r=raster("./fceurope/europe/w001001.adf")
> r
class       : RasterLayer 
dimensions  : 20000, 40000, 8e+08  (nrow, ncol, ncell)
resolution  : 0.009, 0.009  (x, y)
extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +ellps=clrk66 +no_defs 
data source : /home/nobackup/rowlings/Downloads/fceurope/europe/w001001.adf 
names       : w001001 
values      : 1, 6  (min, max)
Raster Attribute Table
     fields : ID   COUNT
        min :  1  129626
        max :  6 4963775 
```

但我对名称中的“欧洲”和全球范围有些混淆。它也是一个非常非常大的栅格。啊，它让欧洲在茫茫荒野中。请注意，投影现在是经纬度。您可能希望先将网格细化，然后再将它们放在一起以从那里提供的所有文件创建全局栅格。

# java - Alembik 开发和源代码

> ID：14314405
> 
> 赞同：2
> 
> 时间：2013-01-14T06:59:37.083
> 
> 标签：java, jakarta-ee, ffmpeg, imagemagick, wurfl

在我的项目中，我大量使用 alembik 媒体服务器。但是我无法在 alembik 网站上找到标签的源代码。他们提供的存储库不确定是否稳定。有人知道 alembik 开发是否已关闭，如果已关闭，那么我可以在哪里找到代码的一个稳定标签，以及是否有任何替代 alembik

# php - 如何从 Wordpress/PHP 中的 $wpdb 对象中检索变量

> ID：14314407
> 
> 赞同：1
> 
> 时间：2013-01-14T06:59:39.793
> 
> 标签：php, arrays, wordpress

我已经尝试访问这个变量几个小时了。

它显示在对象中`$wpdb->last_result->[0]->pid`

```
 $pid   = $wpdb->last_result[0]->pid; 
```

我可以获得其中一个值（如上所示），但我需要将它们全部放在一个数组中。

我尝试使用循环添加，但它总是出错。

我也试过`$wpdb-get_results`which is always `NULL`。

我也试过`$wpdb->get_col`了，`NULL`不管怎样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:11:29.060

```
$pids = array();
  $i=0;

  $result = count($wpdb->last_result);
  while($i < $result) {    

     $pids[] = $wpdb->last_result[$i]->pid;
     $i++;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:12:32.210

该数组是`$wpdb->last_result`您可以抓取它并存储在局部变量中的：

```
$lastResult = $wpdb->last_result;

foreach($lastResult as $item)
{
    echo $item->pid;
} 
```

或者直接从类属性循环它：

```
foreach($wpdb->lastResult $item)
{
    echo $item->pid;
} 
```

或者将 pid 存储在一个数组中：

```
$pids = array();

foreach($wpdb->lastResult $item)
{
    $pids[] = $item->pid;
} 
```

# c++ - 为什么所有迭代器/迭代器适配器在 C++11 中都是不可移动的？

> ID：14314410
> 
> 赞同：18
> 
> 时间：2013-01-14T06:59:51.330
> 
> 标签：c++, c++11, iterator, move-semantics

在[这个](https://stackoverflow.com/questions/14302834/when-to-make-a-type-non-movable-in-c11)讨论的问题中，**何时在 C++11 中使类型不可移动**，我发现 Scott Meyers 在[comp.std.c++](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c%2b%2b/pCO1Qqb3Xa4)上有类似的问题，其中 SG 下面列出的类类型在 C++11 库中是不可移动的。

*   所有互斥锁类型（recursive_mutex，timed_mutex，recursive_timed_mutex，
*   条件变量
*   类型信息
*   错误类别
*   语言环境::方面
*   随机设备
*   种子序列
*   参考包装
*   期间
*   时间点
*   **- 所有迭代器/迭代器适配器**
*   ios_base
*   basic_istream::sentry
*   basic_ostream::哨兵
*   所有原子类型
*   一次标志

问题是为什么`all iterators / iterator adaptors`不可移动？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T09:52:42.803

从该标准批准前一年开始，该帖子已过时。海报是活跃的委员会成员丹尼尔克鲁格勒，有点政治游说：

> 这些是不可移动的，而且可能更多是偶然的，因为隐式生成的移动操作的规则在匹兹堡会议上才得到澄清。已打开一般库问题
> 
> [http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#1331](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#1331)
> 
> 以应对图书馆缺乏移动支持。请务必联系您的国家机构代表，因为我认为这个问题不足以替代国家机构对 FCD 的评论。

换句话说，所有这些不可移动的类型对于标准来说都是一个引人注目的错误，他希望 Usenet 观众中的读者要求在标准正式发布之前解决问题。

该缺陷[已移至](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-closed.html#1331)“关闭”列表。解决方案是（为方便起见提供了链接）：

> 查看规范的库部分并合并新添加的核心功能 Move Special Member Functions ( [N3044](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3044.html) )。

由于 N3044 是一种大量的材料，因此很容易理解为什么它对于这种基本功能的工作至关重要。

迭代器，以及任何其他具有简单值语义的东西，比如`std::duration`and `std::time_point`，**当然是可移动的。**正如其他人所提到的，**可复制性意味着可移动性，**如果不这样做，语言就会被破坏。这篇文章当时并没有错；而是在争论未完成的语言的破碎性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T07:32:44.950

我认为您在不可移动类型列表中包括：“将移动实现为普通复制的类”。. 迭代器被认为是复制成本低的轻量级对象。为他们指定一个移动操作员是没有意义的。例如，`std::vector<T>::iterator`本质上只是一个包装好的`T*`，复制它们就像移动一样便宜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T09:23:08.523

关于迭代器的“不可移动”可能意味着类定义不包含用户声明的移动操作。但是迭代器仍然是可复制的。因此，移动请求仍然有效，并且依赖于复制。因此，在移动操作与复制操作完全相同的情况下，没有理由提供移动操作。对于典型的迭代器实现，没有什么可以针对 wrt 移动进行优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T08:38:59.660

## 简短的回答

因为它们是可复制的。

## 长答案

我们首先要弄清楚“移动”的真正含义。冯纽曼机器不移动数据：你只是“复制”。数据从一个内存位置复制到另一个内存位置。从未“移动​​”过。

但在更高的抽象级别，数据可能只是指向其他数据的指针。当您复制使复制的指针无效的指针时，所引用的数据被称为从一个“所有者”“移动”到另一个“所有者”。

更一般地，复制一个值（包含在指针中的地址）并销毁将其设置为可识别的“无效”的原始值的操作被称为“移动”。

就 C++ 而言，可以区分不同类型的对象：

1.  那些只包含一个简单的值。
2.  那些只包含一个“拥有”它们所指内容的简单指针或引用
3.  那些只包含一个简单的指针或引用而不是“欠”他们所指的东西
4.  那些包含巨大价值的东西。
5.  代表物理实体或操作系统（更一般的“托管平台”）实体的实体。

对于所有这些类型，“复制”和“移动”的概念可能具有不同的语义含义，并且对于其中一些操作，一种或另一种可能根本就没有意义。

现在考虑类型 1 对象：

```
int a=5; c=0;
c = a;
c = std::move(a); 
```

你预计`a`搬家后的价值是多少？怎么样`c = a+b`？a 和 b 是否应该被“移入” `operator+`？

现在考虑输入 2 个对象：

```
std::unique_ptr<int> pa(new int(5)), pb;
pb = std::move(pa); 
```

这里有两个智能指针（它们都将在范围退出时被销毁）并且只有一个整数。有一个操作（`delete`在这种情况下是 ）只能执行一次，因此只有一个指针必须保留整数的“所有权”。这就是“复制”没有意义的情况，移动是唯一支持的操作

现在考虑类型 3 对象：

```
std::list<int> lst = { 1,2,3,4 };
auto i = lst.begin();
auto j = i; 
*j = *i+5;
++i;
*i = *j; 
```

这是完全有道理的：它只是使列表成为`{ 6,6,3,4 }`. 迭代器不拥有它们所指的内容：可能有许多迭代器都引用相同的值。复制是有意义的，但移动没有：如果我们移动`i`到`j`（而不是复制）没有 *i 和 ++i 将不再可能。

现在考虑类型 4 的对象：

```
class A
{
   int m[15000000]; //15 million integers
public:
   int& operator[](unsigned x) { return m[x]; }
   const int& operator[](unsigned x) const { return m[x]; }
}; 
```

在大多数系统中，这样一个巨大的野兽在堆栈上分配是有问题的。它很可能会留在堆上，并由（智能）指针拥有/引用。它的地址将在其指针之间移动，但对象本身将不可移动。它可能仍然是可复制的。

还有另一种微妙的情况：当 A 本身是指向动态分配的巨大数组的指针时：这与 std::vector 相同：它是可移动的，因为它本身就是拥有动态分配数据的“智能指针”，但可能也是可复制的，因为在某些情况下您可能需要拥有数据的新的不同副本。

现在考虑类型 5：

```
class window
{
private:
   HWND handle;
public:
   window() :handle(CreateWindow(....)) 
   { .... }
   ~window() { DestroyWindow(handle); }
}; 
```

这里的一个实例`window`表示屏幕上存在的一个*窗口*。“复制”或“移动”是什么意思？

这很可能是 , 等的情况`mutex`，`condition_variable`其中复制和移动都被禁用。

# android - 蓝牙安卓 - adobe Air

> ID：14314414
> 
> 赞同：1
> 
> 时间：2013-01-14T07:00:37.213
> 
> 标签：android, actionscript-3, air

我正在开发一个需要通过蓝牙连接到嵌入式系统（Pic18fXXXX）的应用程序，我使用了 ANE 库。描述here。 [http://as3breeze.com/bluetooth-ane/](http://as3breeze.com/bluetooth-ane/)

一切正常，数据类型和方法默认导入，但是当编译到 android 应用程序（测试或发布）时，我得到：

> 无法加载内容，因为加载扩展时出现问题：错误：扩展命名空间对 C:\Users\Mhood\AppData\Local\Temp\Tmp_ANE_File_Unzipped_Packages\AndroidBluetooth.ane 无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:35:29.093

这看起来像是您正在使用的 AIR SDK 与本机库所需的版本不匹配。以下是蓝牙 ANE 扩展的扩展描述符的内容：

```
<extension xmlns="http://ns.adobe.com/air/extension/3.4">
  <id>com.as3breeze.air.ane</id>
  <versionNumber>1</versionNumber>
  <platforms>
    <platform name="Android-ARM">
      <applicationDeployment>
        <nativeLibrary>AndroidBluetooth.jar</nativeLibrary>
        <initializer>com.as3breeze.air.BluetoothExtension</initializer>
        <finalizer>com.as3breeze.air.BluetoothExtension</finalizer>
      </applicationDeployment>
    </platform>
  </platforms>
</extension> 
```

来自 Adob​​e 文档：

> 命名空间与 SWF 版本一起是决定 AIR SDK 和 ANE 文件之间兼容性的因素之一。AIR 应用程序必须与等于或超过扩展命名空间的 AIR SDK 版本一起打包。因此，AIR 3 应用程序可以使用具有 2.5 命名空间的扩展，但不能使用 3.1 命名空间。

您是否使用了所需的 Adob​​e AIR 3.4 版本？[查看本机扩展描述符文件](http://help.adobe.com/en_US/air/extensions/WS901d38e593cd1bac-3004221412afa24c001-8000.html)的 Adob​​e 文档以获取更多详细信息。

# twitter - 在网站/应用程序中永久集成 LinkedIn、Twitter

> ID：14314415
> 
> 赞同：1
> 
> 时间：2013-01-14T07:00:39.967
> 
> 标签：twitter, oauth, integration, linkedin

我们如何在`website/app`使用`OAuth`.

一旦用户使用连接到应用程序，即使他稍后更改他的**LinkedIn**密码，`OAuth`他也永远不会再次要求连接。`OAuth`

 **像集成`Facebook <->Twitter`：

一旦我们将 twitter 帐户与 facebook 连接起来，当我们在 facebook 上发帖时，它会自动在 twitter 上发帖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:19:54.993

不确定您所说的“永久”是什么意思，但是一旦您成功验证了用户的身份，您将拥有他们的访问令牌和秘密，可用于代表他们对 LinkedIn 进行经过身份验证的 API 调用。您应该存储此令牌/秘密以进行将来的调用。

注意：此令牌仅在 60 天内有效（类似于 Facebook）。您需要在 60 天之前刷新令牌，否则将需要再次向用户显示 OAuth 登录对话框，以从本质上重新验证您的应用程序。

本文档详细介绍并提供代码示例：[https ://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication)**

# ios - UITableView 原始内容 reloadData 后新内容重叠

> ID：14314416
> 
> 赞同：3
> 
> 时间：2013-01-14T07:00:41.760
> 
> 标签：ios, uitableview, reloaddata, overlapping

我遇到了 UITableView 的问题。我有一张表格，列出了一系列项目。一个分段控件，用于控制应如何按评级/日期对表格内容进行排序。困扰我的是一些表格单元格的文本没有清楚地显示，这些单元格在其中显示两个数组项而不是一个，因此这两个项重叠并使内容不可读。但是，如果我单击单元格，重叠将消失，将显示正确的项目。我想知道这是Xcode的问题吗？显卡内存有时不及时刷新还是怎么回事？

值得注意的一点是，在我的自定义单元格中，有 5 个标签，其中四个带有短内容（标题、日期等）和一个较长的标签（4 行文本，单元格内容摘要）。只有长标签的内容可能会重叠损坏，其他 4 个标签总是可以的。并且重叠损坏只发生在某些单元格上。以前有同样问题的人吗？

# c# - 是否可以在面向 Windows 8 和 Windows Phone 8 的 .net 可移植类库中使用 MediaElement 类

> ID：14314417
> 
> 赞同：2
> 
> 时间：2013-01-14T07:00:53.540
> 
> 标签：c#, windows, windows-phone-8, portable-class-library

我正在将一个 Windows Phone 项目移植到一个针对 Windows 8 和 Windows Phone 8 的可移植类库。我遇到的一个问题是 XNA 库似乎不适用于 Windows 8。

我正在考虑使用 MediaElement 类，因为它似乎在 Windows Phone 8 和 Windows 8 中都可用。但是，它们位于各自平台上的两个不同命名空间中，因此在这个可移植类库中似乎无法访问 MediaElement。

看起来所有 xaml 控件类都位于这两个平台的不同命名空间中。

我弄错了吗？如果没有，是否有其他解决方法可以让便携式类库播放音频？更一般地说，库是否可以使用常见的 xaml 控件类（例如 BitmapImage 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:38:18.607

在可移植类库中，您只能访问两个平台共有的 .net 框架的一小部分。传感器、GPS 或 MediaElement 等面向 XAML 的特定 WinRT API 不可用。您可以做的一件事是在可移植类库的接口中使用 MediaElement 隔离代码，并使用类在每个项目中实现该接口。稍后，您可以在需要时使用依赖注入或其他方法注入项目的类。

# javascript - 不理解在 Javascript 中使用 new 关键字

> ID：14314422
> 
> 赞同：7
> 
> 时间：2013-01-14T07:01:29.590
> 
> 标签：javascript, prototype, new-operator

下面的代码片段来自 O'Reilly 的“Javascript Web Applications”。在其中，作者解释说，使用`new`关键字通常会返回一个`this`上下文，除非您特别返回其他内容——下面，用他的话说（第 7 页），他正在返回“一个将建立一个新类的函数”：

```
var Class = function(){
    var klass = function(){
        this.init.apply(this, arguments);
    };
    klass.prototype.init = function(){};
    return klass;
};

var Person = new Class;

Person.prototype.init = function(){
    // Called on Person instantiation
};

// Usage:
var person = new Person; 
```

我不关注这个。回来`klass`在这里做什么？在这种情况下`var Person = new Class`，我不是得到一个新的 Class 对象，而是一些可以创建 Class 的函数吗？这就是我从文本中读到的内容，但这让我感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T07:45:17.693

在到达他要去的地方之前，第一步是得到`this`。

通常可以指出三件事`this`。如果您有一个作为对象属性的函数：

```
var Bob = {
    name : "Bob",
    say  : function () { console.log(this.name); }
};

Bob.say(); // "Bob" 
```

在这种情况下，`this`指向拥有该属性的任何对象（无论前面是一个点，在调用函数的确切时刻）

```
var say = Bob.say; // passing the function to a variable
var Sam = { name : "Sam" };
Sam.say = Bob.say; // passing the function to an object's property

say(); // undefined -- not what you were expecting
Sam.say(); // "Sam" 
```

所以`this`在最后可能的一秒决定。

函数也有它们自己的属性，比如对象。
其中两个是被调用的函数`.call`，`.apply`它们允许你运行函数，但告诉函数究竟是什么`this`。

还记得自己如何`say();`不工作吗？

```
var say = Bob.say;
say.call(Bob); // "Bob" -- hooray! 
```

下一部分`this`是我们在面向对象语言中最常用的部分；使用`this`with`new`来创建一个类的新实例：

```
var Person = function (name) {
    this.name = name;
    this.say = function () { console.log(this.name); };
};

var bob = new Person("Bob");
bob.say(); // "Bob" 
```

基本上，在这个构造函数（或任何函数，因为构造函数在 JS 中并不特殊）内部，该函数首先检查是否`new`被调用。
如果是，则设置`this`为一个全新的对象，无论它是否是对象的一部分：

```
var Creatures = {};
Creatures.Person = Person;

Creatures.Person("Bob"); // `this` === Creatures
Creatures.name; // "Bob" -- whoops
var bob = new Creatures.Person("Bob");
bob.say(); // "Bob", yay! 
```

所以就像函数在函数`if (new) { this = {}; }`顶部说的一样。

我说有三种可能。
第三个是`this === window`
如果你使用一个`this`不是对象的函数（通过调用/应用，或作为对象的属性）并且`new`不用于创建新对象，则`this`指向`window`.
这就是为什么`say();`以前不能自己工作的原因；`window.say();`是等价的。

回到`new`一秒钟——`new`做一些其他的事情。
即，它设置对象的构造函数的值：

```
var bob = new Person();
bob instanceof Person;  // true 
```

它还使由该构造函数生成的`prototype`对象可以访问所有实例共享的对象。

所以现在，看看 Class/Klass 内部发生了什么：
我们正在创建一个`new Class();`对象。
在`Class`函数内部，`this = {};`（因为`new`）。
然后，我们正在制作一个新的“构造函数”函数，`klass`.

然后，我们将原型`init`函数设置`.apply`为任何新`this`的（在`klass`调用新实例时）。

然后我们要归还克拉斯。

klass 实际上是您创建新课程时所调用的内容

当你调用一个类的新对象时，klass 正在运行。

希望对`new`and`this`和`.call`and有帮助`Class/klass`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T07:41:38.070

在 javascript 中，`new`关键字隐式返回`this`。

当您拥有`function Foo () {}`并申请`new Foo`时，在后台 javascript 会执行此操作`function Foo () { return this; }`。`new`他通过显式返回一个不同的对象（klass 对象）来覆盖 javascript 的工作方式。

看看这个例子。

```
function Foo () { this.name = "foo"; };

function Bar () {
    return new Foo; 
};

var bar = new Bar;  // bar is now a Foo, because of the explicit return.

bar.name //=> 'foo' 
```

如果你能遵循这一点，你就可以遵循他正在做的事情。

当您说`var Person = new Class`时，它实际上是返回`klass`函数并将其存储在`Person`变量（指针）中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:47:30.560

按照作者的逻辑：

> 使用`new`关键字通常会返回`this`上下文， **除非**您特别返回其他内容

如果他/她是正确的，那么下面的代码：

```
var Class = function(){
    var klass = function(){
        this.init.apply(this, arguments);
    };
    klass.prototype.init = function(){};
    return klass;
}; 
```

不定义“类”类；相反，它定义了一个“基础”，当`new`ed 时，而不是返回*实例*，将返回一个私有定义的*类*，当`new`ed 时，将保证运行`init()`方法 ( `this.init.apply(this)`)。

这样一来，当

```
var Person = new Class; 
```

您正在创建一个名为的新**类**`Person`，它遵循定义为`klass`内部的约束和行为（如果有） `Class`（有点像`extend`/`inherit`在“真实”OOP 中）。

所以下面的代码

```
Person.prototype.init = function(){
// Called on Person instantiation
}; 
```

实际上是为**class** `Person`定义一个“构造函数” 。

**编辑**：

很抱歉昨天没有想出正确的单词和句子。我不善于表达。

如果您对 OOP 感到满意，您**可以想象**它`Class`是一个接口/抽象/虚拟类，当您`new Class`而不是*创建实例*时，您是在扩展/继承/实现私有/虚拟定义的行为`Class`。

`klass.prototype.init=function(){};`有点像 JS 的抽象/虚函数方式，通过组合，`this.init.apply(this)`你可以在可能的层面上想象它是一个构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-13T15:08:24.390

实际上，这里`var Person = new Class;`的`new`关键字只是用来触发`Class`函数的，所以基本上你可以这样使用`var Person = Class();`它会得到相同的结果

# scala - Scala RedBlackTree 语法

> ID：14314424
> 
> 赞同：6
> 
> 时间：2013-01-14T07:01:44.743
> 
> 标签：scala, scala-collections, scala-2.10

我正在查看`RedBlackTree`文件的来源，偶然发现了 的定义`Tree`，我在此处复制了其中的相关部分：

```
sealed abstract class Tree[A, +B](
@(inline @getter) final val key: A,
@(inline @getter) final val value: B,
@(inline @getter) final val left: Tree[A, B],
@(inline @getter) final val right: Tree[A, B]) 
```

我有两个问题：

1.  `@(inline @getter)`相比如何`@inline @getter`？
2.  为什么`val`s 有资格`final`？（在这种情况下不是`final`多余的吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T08:25:31.880

语法是元注解的`@(inline @getter)`一个例子，它告诉编译器`@inline`注解应该放在生成的 getter 方法上（而不是构造函数参数，这将是这里的默认值）：[元注解](http://www.scala-lang.org/api/current/index.html#scala.annotation.meta.package)

将`final`生成的字段和 getter 标记为 final，因此它们不能被子类覆盖。

这种特殊的组合在这里被用来欺骗 Scala 编译器直接访问`Tree`实例的字段，而不是调用 getter 并依赖 JVM 优化器来执行正确的内联。不幸的是，Scala 没有提供官方支持的直接使用字段的方式。

当红黑树针对 Scala 2.10 进行优化时，它提供了最佳性能。有关血腥细节，请参阅不可变 TreeMap/TreeSet[拉取请求](https://github.com/scala/scala/pull/82)。

# jquery - jquery显示弹出密码

> ID：14314425
> 
> 赞同：1
> 
> 时间：2013-01-14T07:01:46.767
> 
> 标签：jquery, popup

如何使用 jquery popup 显示传递 id？

对于简单的 pass id <a href=".php?id=21" >

但在揭示

```
 <a href="test.php?id=121"  data-reveal-id="myModal" data-animation="fade"></a>

<div id="myModal" class="reveal-modal">
            <?php include 'test.php'; ?>
        <a class="close-reveal-modal">&#215;</a>
    </div> 
```

我想如何获得我通过 test.php 的 id，对不起，如果我的英语不太好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T09:52:20.667

我找到了解决方案

在你的 test.php

$id = print_r(id);

然后回显 $id

# java - 如何在 android 中将日期从 GMT 时区解析为 IST 时区和反之亦然

> ID：14314426
> 
> 赞同：15
> 
> 时间：2013-01-14T07:01:53.443
> 
> 标签：java, android, date, timezone, simpledateformat

我正在开发一个项目，该项目从`IST`（印度标准时间）的后端获取日期/时间，如图所示`"2013-01-09T19:32:49.103+05:30"`。但是，当我使用以下 DateFormat 解析它时

```
DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ"); 
```

接着解析..

```
Date date = sdf.parse("2013-01-09T19:32:49.103+05:30");

System.out.println("XYZ ==============>"+date); 
```

它以 GMT 格式显示日期作为输出，即

```
Wed Jan 09 14:02:49 GMT+00:00 2013. 
```

我已经尝试使用 TimeZone 类作为..

```
TimeZone timeZone=TimeZone.getTimeZone("IST");
sdf.setTimeZone(timeZone); 
```

但是没有效果。。

我怎样才能得到一个`Date`具有日期`IST`格式而不是格林威治标准时间的类对象...

请提供适当的解决方案..

**编辑：**

这就是代码的样子：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");

TimeZone timeZone=TimeZone.getTimeZone("IST");
sdf.setTimeZone(timeZone);

Date date = sdf.parse("2013-01-09T19:32:49.103+05:30");
String formattedDate=sdf.format(date);

System.out.println("XYZ ==============>"+formattedDate); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-14T07:09:46.890

日期没有任何时区。它只是自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数的持有者。采用您用于解析的相同 DateFormat，设置 IST 时区并格式化您的日期，如下例所示

```
 DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX");
    Date date = sdf.parse("2013-01-09T19:32:49.103+05:30"); 
    sdf.setTimeZone(TimeZone.getTimeZone("IST"));
    System.out.println(sdf.format(date)); 
```

输出

```
2013-01-09T19:32:49.103+05:30 
```

请注意，`XX`自 1.7 以来，X 模式用于 ISO 8601 时区 (-08:00)。如果您在 1.6 中尝试`Z`. 有关格式模式的详细信息，请参阅 SimpleDateFormat API

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T07:04:03.540

> 我怎样才能得到一个日期类对象，其日期为 IST 格式而不是 GMT...

你不能。`Date`没有格式*或*时区。它仅表示自 1970 年 1 月 1 日 UTC 午夜的 Unix 纪元以来的毫秒数。相反，*始终*使用默认时区。[`Date.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString%28%29)

 *要使用特定格式和时区，请使用[`DateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)而不是`Date.toString()`. 您可以设置时区，[`DateFormat.setTimeZone()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29)然后将 a 转换`Date`为`String`using [`DateFormat.format()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)。`DateFormat`它本身有一些用于创建的工厂方法，或者[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)如果你想指定一个特定的模式，你可以使用。

正如 Abu 所说，[Joda Time](http://joda-time.sf.net) *是*一个比内置 API 更好的日期/时间 API，尽管标准库只是格式化日期/时间并没有做坏事。请注意，`DateFormat`它及其子类通常*不是*线程安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-20T07:46:09.167

您可以简单地通过使用 Calender 类来做到这一点。请检查以下片段：

```
Calendar calendar = Calendar.getInstance();
calendar.setTimeZone(TimeZone.getTimeZone("GMT"));
calendar.setTimeInMillis(<--time stamp-->);
//calendar.setTime(<--date object of gmt date-->); 
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyyy 'at' hh:mm a");
sdf.setTimeZone(TimeZone.getDefault());
String result=sdf.format(calendar.getTime()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-06T05:00:20.003*

# javascript - 具有固定高度的 Div

> ID：14314427
> 
> 赞同：1
> 
> 时间：2013-01-14T07:02:12.310
> 
> 标签：javascript, html, ajax, html-table

我正在处理旧代码，因此我无法进行更多结构更改（例如删除表格），因此请在回答时记住这一点。

我的问题是我有一些嵌套表，我将一个列放在一个 div 中。我使用复选框和标签填充的 div，使用 JavaScript 动态创建，具体取决于查询的结果（使用 AJAX 制作）。问题是 DIV 越来越大，以适应内容，这弄乱了我的整个布局。

```
<table border = "0" width="470px">
  <tr>
    <td height="10px">
      <table>
    <tr>
          <td width="200px">                                    
        <font class="section_font">
          <label id="feedbackLabel">Metadata name:</label>
        </font>
      </td>
      <td align="right" width="170px">
         <font class="section_font">
          <input id="selAllCheckbox" type="checkbox" onclick="doSelectAll()">
              <label id="selAllCheckboxLabel">Select all</label>
         </font>
           </td>
    </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td height="100px">
      <div id="metadata_names" style="overflow:auto; border: 0px solid gray">
      </div>
    </td>
  </tr>
</table> 
```

PS。我找到了解决方法：在 div 中添加新对象后，我再次调整 DIV 的大小：myDiv.style.height="100px"; 无论如何，谢谢，我也会尝试你的解决方案。

PS1。两种解决方案都有效。但是，我将使用 Umesh 建议的内容，因为它提供了与页面中其他内容的明确隔离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:39:56.743

将 div 的样式属性下的高度设为 100%，这样它将遵循其父级的最大高度，即**td**在您的情况下。如果您希望内容水平和/或垂直滚动​​，您还可以包括“溢出：滚动”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:10:13.090

使用 div 容器并为其分配一个类。确保在此 div 中填充日期。然后使用 CSS 为其分配一个固定的高度。

**HTML：**

```
<div class="container"> 
    <!-- Your data -->
</div> 
```

**CSS：**

```
.container{  
    height: 123px;
    overflow: scroll;    
} 
```

# php - 使用PHP循环多次查询MYSQL数据库

> ID：14314428
> 
> 赞同：1
> 
> 时间：2013-01-14T07:02:41.533
> 
> 标签：php, mysql, loops

**背景：**我正在查询数据库以返回指定数量的怪物，这些怪物将在一个简单的基于网络的 RPG 中用于战斗。

**问题：**我有一个简单的 MYSQL 查询，其中包含一个 WHERE 子句来确定怪物的“级别”。在之前的函数中，我正在构建一个数组，其中包含应返回的相应怪物的级别；就像是：

```
$levels = Array( [0] => 3 [1] => 1 [2] => 1 ) 
```

所以在上面的数组中，Value对应的是level。所以我希望返回 3 个怪物——3 级、1 级和 1 级。

很简单。现在我想用以下内容查询 MYSQL 并大概使用循环进行 3 次查询以获得我的 3 个怪物；就像是：

```
$query = "SELECT *, CardHP as EncounterCardHP, CardAP as EncounterCardAP";
$query .= " FROM Cards";
$query .= " WHERE CardTypeId = 1 AND CardRarity = {$level}";
$query .= " ORDER BY RAND() LIMIT 1"; 
```

所以在上面的查询中，变量 {$level} 是前一个数组中的怪物等级。循环格式是我苦苦挣扎的地方。我正在尝试类似的东西：

```
while ($i = $levels) {
     $query = "SELECT *, CardHP as EncounterCardHP, CardAP as EncounterCardAP";
     $query .= " FROM Cards";
     $query .= " WHERE CardTypeId = 1 AND CardRarity = {$i}";
     $query .= " ORDER BY RAND() LIMIT 1";
 $result_set = mysql_query($query, $connection);
 confirm_query($result_set);
 return $result_set;    
} 
```

我认为这很接近，但我不知道如何才能最终给我一个来自 MYSQL 的怪物数组。似乎在上面，我正在构建 3 个单独的数组？我需要使用 array_merge()，还是有更简单更优雅的方法来做到这一点？如果我得到所有相同级别的怪物，我可以简单地运行查询 1 次和 LIMIT 3，但我需要怪物与前面的数组显示的内容相对应。

有道理？帮助总是受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:23:04.247

我不完全理解你想要做什么，但这应该循环并让你得到你的数组：

```
foreach ($levels as $key => $value) {
    $query = "SELECT *, CardHP as EncounterCardHP, CardAP as EncounterCardAP FROM Cards WHERE WHERE CardTypeId = 1 AND CardRarity = {$value} ORDER BY RAND() LIMIT 1";
    $results = mysqli_query($connection, $query);
    while($row = $result->fetch_array(MYSQLI_BOTH)) {
        $monsters[$key]['HP'] = $row['CardHP'];
        //Add as needed
    }
} 
```

它创建一个多维数组，其中第一个键与级别中的键相同，后续键是 SQL 查询的结果。

```
$monsters = array(
    [0] => array(
        ['HP'] => 10
        ['AP'] => 5
    )
    [1] => array(
        ['HP'] => 5
        ['AP'] => 7
    )
) 
```

此外，mysqli 可能更适合您使用，因为它支持过程样式以及面向对象，并且大多数功能完全相同，尽管使用了 mysqli 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:08:06.117

我想`WHERE IN`这就是你需要的。

```
$query = "SELECT *, CardHP as EncounterCardHP, CardAP as EncounterCardAP";
$query .= " FROM Cards";
$query .= " WHERE CardTypeId = 1 AND CardRarity IN (".implode(',', $levels).")";
$query .= " ORDER BY RAND() LIMIT 1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T05:22:39.543

实际上比我想象的要容易得多。也许我过度解释了这个问题。这就是我所做的。

1）一旦我返回了我的数组 $levels ，它看起来像这样：

```
$levels = Array( [0] => 3 [1] => 1 [2] => 2 ) 
```

2) 我创建了一个名为 $result_set 的空数组 2) 然后使用 foreach 循环遍历 $levels 数组，并使用 $levels 数组中的第一个 $level 运行查询。但是，我不是只返回 $result_set 并返回第一行，而是将第一行插入到我在步骤 2 中创建的空数组中。每次循环后，我将 MYSQL 中的新行插入到现在填充的 $result_set 数组中。

这是它最终的样子：

```
$result_set = array();
foreach ($levels as $level) {
    $query = "SELECT *, CardHP as EncounterCardHP, CardAP as EncounterCardAP";
    $query .= " FROM Cards";
    $query .= " WHERE CardTypeId = 1 AND CardRarity = {$level}";
    $query .= " ORDER BY RAND() LIMIT 1";
    $result = mysqli_query($query, $connection);
    $result_set[] = mysqli_fetch_array($result);    
    confirm_query($result_set);
}
return $result_set; 
```

我的 $result_set 现在有 3 个怪物，一个 3 级、1 级和 2 级，它们都是从数据库中为每个相应级别随机选择的。

感谢所有的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-22T14:17:11.140

这是一种基于每个`$levels`元素生成随机绘制的怪物的单个结果集的安全方法。

这只需一次访问数据库，这是一种很好的做法。同时我应该提到它`RAND()`并不以其性能而闻名。如果您对随机性、加权随机化或同一结果集中没有重复的怪物有要求，您可能需要考虑替代策略。

```
$param_types = '';
foreach ($levels as $level) {
    $selects[] = "(SELECT CardName, CardHP, CardAP FROM Cards WHERE CardTypeId = 1 AND CardRarity = ? ORDER BY RAND() LIMIT 1)";
    $param_types .= 'i';
}

$conn = new mysqli('localhost', 'root', '', 'dbname');
$stmt = $conn->prepare(implode(' UNION ALL ', $selects));
$stmt->bind_param($param_types, ...$levels);
$stmt->execute();
$result = $stmt->get_result();
return $result->fetch_all(MYSQLI_ASSOC); 
```

[上面的片段与我的这个答案](https://stackoverflow.com/a/56714257/2943403)密切相关。

我准备了一个带有一些捏造数据的工作演示，以证明我的解决方案有效。

**架构（MySQL v5.7）：**

```
CREATE TABLE `Cards` (
  id INT(11),
  CardName VARCHAR(255),
  CardTypeId INT(11),
  CardRarity INT(11),
  CardHP INT(11),
  CardAP INT(11)
);

INSERT INTO `Cards` VALUES
(1, 'Dracula',         2, 1,  500,  75),
(2, 'Gargamel',        1, 1,  200,  20),
(3, 'Rumplestiltskin', 1, 2,  175,  45),
(4, 'Megatron',        3, 3, 1000, 300),
(5, 'Smeagol',         1, 1,  225,  60),
(6, 'Cruella Deville', 4, 1,   95,  35),
(7, 'Thanos',          1, 3, 2575, 960),
(8, 'Stay Puft',       1, 3,  800, 255),
(9, 'Keyser Soze',     1, 3,  750, 300); 
```

* * *

**询问：**

```
(SELECT CardName, CardHP, CardAP FROM Cards WHERE CardTypeId = 1 AND CardRarity = 3 ORDER BY RAND() LIMIT 1)
UNION ALL
(SELECT CardName, CardHP, CardAP FROM Cards WHERE CardTypeId = 1 AND CardRarity = 1 ORDER BY RAND() LIMIT 1)
UNION ALL
(SELECT CardName, CardHP, CardAP FROM Cards WHERE CardTypeId = 1 AND CardRarity = 1 ORDER BY RAND() LIMIT 1); 
```

**潜在结果集：**

```
| CardName  | CardHP | CardAP |
| --------- | ------ | ------ |
| Stay Puft | 800    | 255    |
| Smeagol   | 225    | 60     |
| Gargamel  | 200    | 20     | 
```

* * *

[在 DB Fiddle 上查看](https://www.db-fiddle.com/f/74dfum7HvQ2QFvVEWpXtLL/1)

# asp.net - asp:RadioButtonList 'RepeatLayout' 通过 CDN 被忽略

> ID：14314429
> 
> 赞同：5
> 
> 时间：2013-01-14T07:03:05.113
> 
> 标签：asp.net, webforms, cdn, akamai

我有一个`WebControl`在我的网站上有一个`asp:RadioButtonList`。

我将`RepeatLayout`属性设置为`'Table'`.

当我正常查看该站点时，它会正确呈现（作为表格）。

然后我们设置了一个 CDN，整个站点都通过，但只有图像、JS 和 CSS 文件从 CDN 检索，站点的其余部分通过并访问我们的服务器（因此 aspx 请求仍然来自服务器我可以直接访问）。

在测试中，我已经设置了我的主机文件以指向 CDN 地址。

其他一切似乎都很好，但`RadioButtonList`渲染为`input`和`label`标签，由`<br />'s`. `RepeatLayout`如果我设置为 ，这就是它应该呈现的方式`"Flow"`。

我什至可以编辑控件中 ListItems 中的文本，并查看它们是否更新，因此它肯定会访问我的服务器。

有谁知道为什么我使用 CDN 的测试返回不正确的标记，仅针对 RadioButtonLists？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:15:21.227

我们终于找到了问题所在。

Akaimai`Akamai-Edge`在请求页面时将它自己的用户代理发送到我们的服务器。

这样做时，我们的服务器会根据用户代理返回不同的标记。（我们的站点运行 CMS Sitecore，它具有依赖于用户代理的标记。）

我们设法通过更改 Akamai 配置来解决此问题，以便来自网站访问者的普通用户代理在请求中传递到我们的服务器，而不是 Akamai 的。

我怀疑这也是 Sitecore 中的一个错误（不返回未知用户代理的默认标记）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:26:53.843

你检查过 Firebug 或 Chrome 开发者工具中的 HTML 吗？检查生成的 RadioButtonList HTML 并检查正在应用的 CSS 是否来自正确的 CSS 文件。CSS 可能来自某些（非 CDN）源，它覆盖了控件的表格布局。

# crystal-reports - Crystal Reports 使用抑制公式抑制字段

> ID：14314430
> 
> 赞同：3
> 
> 时间：2013-01-14T07:03:13.547
> 
> 标签：crystal-reports, crystal-reports-2008

嗨，我正在使用 Crystal Report 2008，这是场景：

```
 ITEM No.           Product            Pcs       Status (this Status field is hidden)
  -------------------------------------------------------
  1                 Product1           2030       Cancelled  
  2                 Product2           1000       Cancelled
  3                 Product3           5000       Ok
  4                 Product4           3000       Cancelled
  5                 Product5           4000       Ok 
```

现在如何通过公式在详细信息/组部分中抑制所有状态为“已取消”，输出应如下所示：

```
 ITEM No.           Product            Pcs       Status (this Status field is hidden)
  -------------------------------------------------------
  1                 Product3           5000       Ok
  2                 Product5           4000       Ok 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:55:21.607

你可以通过两种方式做到这一点。

1.  在 Section Expert 上，Suppress (No Drill-down) 输入`Status = 'Cancelled'`。
2.  为状态添加一个参数（确定、取消、全部），以便您可以根据选择过滤记录。

# mysql - 获取具有最新时间日期的每个卡车 ID 的 GPS 数据（纬度、经度、地址）

> ID：14314431
> 
> 赞同：3
> 
> 时间：2013-01-14T07:03:18.893
> 
> 标签：mysql, sql

我有下表：

> 主要（rowId，posDatetime，truckId，纬度，经度，地址）

rowId: PK
posDatetime: 日期时间坐标和地址
truckId
lat,lon
address: 地址字符串

行不按日期时间顺序提供。

为了获得每辆卡车的最新位置，我用这个查询`FOR EACH`卡车访问了数据库：

> SELECT * FROM main WHERE truckId=XXXX ORDER BY posDatetime DESC LIMIT 1

它让我得到了我想要的东西，但我觉得它效率低下，我尝试过使用，`MAX()`但它让我得到了不具有`MAX()`价值的数据行。

有没有办法做类似的事情：

> select * from main where rowId=MAX(posDatetime).rowID GROUP BY truckId

有类似的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:10:51.657

一种能够快速始终为卡车提供最后陈述位置的解决方案。另一种解决方案是将两列 posDateTime 和 mainId 添加到卡车表并更改触发器中的逻辑。

该解决方案假设您有一个支持触发器的 mysql 版本。

```
-- drop table if exists last_position_for_truck ;

CREATE TABLE if not exists `last_position_for_truck` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `truckId` int(11) unsigned NOT NULL,
  `mainId` int(11) unsigned NOT NULL,
  `posDateTime` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `truckId` (`truckId`)
) ENGINE=myisam DEFAULT CHARSET=latin1;

-- make sure there is a one to one relationship with trucks and last_position_for_truck
-- can be run multiple times
-- must be run if a new truck is added if nothing else is done to maintain the one to one relationship
insert into `last_position_for_truck` ( truckId, mainId, posDateTime )
select truckId, mainId, posDateTime from (
    select truck.id truckId, 0 mainId,  DATE_SUB(NOW(), INTERVAL 1 YEAR) `posDateTime`
    , last_position_for_truck.id last_position_for_truck_id
    from truck
    left join last_position_for_truck
    on last_position_for_truck.truckId = truck.id
) last_position_for_truck
where last_position_for_truck_id is null ;

-- DROP TRIGGER if exists main_insert_trigger ;

delimiter $$
CREATE TRIGGER main_insert_trigger AFTER insert ON main
  FOR EACH ROW BEGIN
    update last_position_for_truck 
    set posDateTime = new.posDateTime 
    , mainId = new.id
    where truckId = NEW.truckId and posDateTime < NEW.posDateTime ;
  END$$
delimiter ;

-- assume there is a truck id of 1 and 2, -35.8739731, 152.22774 is somewhere in Asutralia
insert into main( truckId, posDateTime, lat, lon, address ) values ( 2, now(), -35.8739731, 152.22774, 'Somewhere in Australia' ) ;
insert into main( truckId, posDateTime, lat, lon, address ) values ( 1, now(), -35.8739731, 152.22774, 'Somewhere in Australia' ) ;

-- see the results
select last_position_for_truck.truckId 
, last_position_for_truck.mainId
, main.lat
, main.lon
, main.`posDateTime`
from last_position_for_truck 
left join main
on main.id = last_position_for_truck.mainId
where last_position_for_truck.id in (1,2) ;

-- sample results
1   14  -35.874 152.228 2013-01-15 11:00:18
2   13  -35.874 152.228 2013-01-15 10:59:33 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:06:14.790

据我所知，您原来的查询与您的查询一样有效。但是，您可以在 posDatetime 上创建一个索引，这将大大加快您的查询速度，并且不会让数据库做太多工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:30:19.563

您可以在 truckId 和 posDatetime 上添加一个组合键以进行限制，并在 posDatetime 上单独添加一个键以进行排序。

```
ALTER TABLE main
    ADD KEY 'main_cIdx_truckId_posDatetime' ( truckId, posDatetime ),
    ADD KEY 'main_idx_posDatetime' ( posDatetime ); 
```

如果您也按其他行排序（您说的是主体），请尝试在此行上添加键。

确保 rowId 是主键。如果要按时间顺序插入数据，请按 rowId 而不是 posDatetime 排序。

为了加快订购速度，您可以预先选择一个时间窗口。例如，如果一辆卡车确实每月上路一次，您可以将结果限制在一个月的窗口内：

```
WHERE 
    truckId = n 
    AND
    posDatetime > DATE_SUB ( CURENT_DATE, INTERVAL 30 DAY )
ORDER BY
    rowId DESC
LIMIT 1 
```

# sql - 房间搜索sql查询

> ID：14314432
> 
> 赞同：5
> 
> 时间：2013-01-14T07:03:29.670
> 
> 标签：sql, database

这是一个酒店代理的示例程序，他从不同的酒店获得合同，并允许客户搜索和预订与他签订合同的酒店（并因此获得一些利润）。这是我的表模式。

```
CONTRACT (contract_id, hotel_id, valid_from, valid_to) 
ROOM (room_type, hotel_id, contract_id, price, max_adults_allowed, avail_rooms)
HOTEL (hotel_id, hotel_name, location) 
```

搜索，类似[hotels.com](http://www.hotels.com/)的界面；即，例如，客户可以将其指定为“1 个房间有 2 个成人”和“1 个房间有 2 个成人和 1 个房间有 3 个成人”。

到目前为止，这是我的 sql 查询，

```
select h.name, h.location, r.type, r.price FROM HOTEL h, ROOM r, CONTRACT c 
WHERE c.contract_id = r.contract_id and c.hotel_id = h.hotel_id    --table joining
AND 'requested room lies within the contract valid period'  --check in and check out dates comparison
AND 'h.location is the user specified location' --requested location 
........ 
```

我无法将房间搜索详细信息（如前所述）集成到此查询中。有人可以帮我编写包含房间规格的 sql 查询吗？我正在使用 SQL Server。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:40:57.370

假设您已经解析了“自然语言”输入，将您的请求按 max_adults 分组，然后查询每个单独的类型；例如，对于“2 个房间 1 个成人和 3 个房间 2 个成人”发出两个单独的查询，分别为 (max_adults = 1,avail_rooms = 2) 和 (max_adults = 2,avail_rooms = 3)

```
select h.name, h.location, r.type, r.price, r.room_id FROM HOTEL h, ROOM r, CONTRACT c 
WHERE c.contract_id = r.contract_id and c.hotel_id = h.hotel_id
AND c.valid_from >= ? AND c.valid_to <= ? AND h.location = ?
AND r.max_adults = ? AND r.avail_rooms >= ? 
```

请注意，这只会找到max_adults*的完全匹配项，并且不会为您提供“预订”房间的选项。*如果您想让客户预订大房间（并相应地支付，而不是填满），您可以使用以下策略：首先尝试原始查询，然后搜索更大的房间（通过添加“人造客人”）。

例如，如果原始请求是“1 三倍，1 双，1 单”，请先尝试，然后是“1 三倍 2 双倍”，然后是“2 三倍 1 双倍”，然后是“3 倍三倍”。对于每个“修改过的”查询，使用上面的 SQL。第一个成功的将是客户最便宜的选择。

尽管这涉及多个 SQL 事务，但每个事务都有简单的连接，并且可能比复杂的语句工作得更快。

如果您有更多控制权，您可能会更改架构以单独考虑每个房间：

```
ROOM (room_id, room_type, hotel_id, contract_id, price, max_adults_allowed)
BOOKING (room_id, checkin, checkout) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:43:57.043

此脚本检索只有所需房间的酒店。如果酒店只有一个必要的房间，那么它被排除在酒店之外。

更新 15.01.2013

```
IF OBJECT_ID('tempdb.dbo.#RoomParams') IS NOT NULL DROP TABLE dbo.#RoomParams
SELECT SUM(rooms) AS rooms, adults
INTO dbo.#RoomParams
FROM (VALUES(1, 2), -- 1 room with 2 adults
            (1, 2), -- 1 room with 2 adults
            (1, 3)) -- 1 room with 3 adults
p(rooms, adults)
GROUP BY adults

;WITH cte AS
 (
  SELECT h.hotel_id, h.hotel_name, h.location, r.room_type, r.price,
         SUM(avail_rooms) OVER (PARTITION BY h.hotel_id, r.max_adults_allowed) AS cnt,
         r.max_adults_allowed        
  FROM CONTRACT c JOIN ROOM r ON c.contract_id = r.contract_id AND c.hotel_id = r.hotel_id
                  JOIN HOTEL h ON c.hotel_id = h.hotel_id
  WHERE c.valid_from >= '20130114' AND c.valid_to <= '20130115'  --check in and check out dates comparison
        AND h.location IN ('loc4') --requested location        
  )
  SELECT *
  FROM cte s
  WHERE 
    NOT EXISTS (                  
                SELECT rp.adults
                FROM dbo.#RoomParams rp
                EXCEPT
                SELECT st.max_adults_allowed
                FROM cte st JOIN dbo.#RoomParams r ON st.cnt >= r.rooms AND st.max_adults_allowed = r.adults
                WHERE st.hotel_id = s.hotel_id                  
                ) AND s.max_adults_allowed IN (SELECT adults FROM dbo.#RoomParams) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/cbe7c/2/0)上的演示[](http://sqlfiddle.com/#!3/cbe7c/2/0)

 **如果您想检索所有至少有一个选项的酒店

```
IF OBJECT_ID('tempdb.dbo.#RoomParams') IS NOT NULL DROP TABLE dbo.#RoomParams
SELECT rooms, adults
INTO dbo.#RoomParams
FROM (VALUES(1, 2), -- 1 room with 2 adults
            (1, 2), -- 1 room with 2 adults
            (1, 3)) -- 1 room with 3 adults
p(rooms, adults)

;WITH cte AS
 (
  SELECT h.hotel_id, h.hotel_name, h.location, r.room_type, r.price,
         SUM(avail_rooms) OVER (PARTITION BY h.hotel_id, r.max_adults_allowed) AS cnt,
         r.max_adults_allowed
  FROM CONTRACT c JOIN ROOM r ON c.contract_id = r.contract_id AND c.hotel_id = r.hotel_id
                  JOIN HOTEL h ON c.hotel_id = h.hotel_id
  WHERE c.valid_from >= '20130114' AND c.valid_to <= '20130115'  --check in and check out dates comparison
        AND h.location IN ('loc4') --requested location
  )
  SELECT hotel_name, location, room_type, price, max_adults_allowed, cnt
  FROM cte c 
  WHERE EXISTS (
                SELECT 1
                FROM dbo.#RoomParams r 
                WHERE c.cnt >= r.rooms AND c.max_adults_allowed = r.adults
                ) 
```**

# javascript - JS不识别cordova的插件

> ID：14314437
> 
> 赞同：1
> 
> 时间：2013-01-14T07:04:30.343
> 
> 标签：javascript, android, html, cordova, localnotification

我使用`HTML5`和`PhoneGap`，

在应用程序中，我有本地通知。

下面是代码：

**[本地通知](https://github.com/moumen-o/phonegap-plugins/tree/master/Android/LocalNotification)**

本地通知的 Android 实现使用与现有 iOS**本地通知****插件**类似的接口。 该插件依赖于 Android **AlarmManager**和***Notification Bar***的组合。

这是我的js：

```
function appReady() {
    alert('Start appReady');
    var LN = cordova.require("cordova/plugin/LocalNotification");
    alert('LN');
    LN.add({
        date: new Date(2012, 10, 11, 15, 20, 0, 0),
        message: "DeviceReady",
        ticker: "This is a sample ticker text",
        repeatDaily: false,
        id: 1
    });
    alert('End appReady');
} 
```

不会出现警报“LN”。

这是我在 config.xml 文件中的插件：

```
<cordova>
    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->
    <access origin=".*"/>

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" />

    <plugins>
       ...
      <plugin name="LocalNotification" value="org.apache.cordova.plugins.LocalNotification"/>
    </plugins>
</cordova> 
```

看起来JS**不知道插件**，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:45:52.017

您应该使用 navigator.notification.alert

这可以在[文档中找到](http://docs.phonegap.com/en/2.2.0/cordova_notification_notification.md.html#Notification)

# php - 如何通过 PHP 套接字发送二进制表示？

> ID：14314438
> 
> 赞同：3
> 
> 时间：2013-01-14T07:04:38.177
> 
> 标签：php, sockets, binary

我正在尝试通过 PHP 套接字发送数据的二进制表示。

因此，如果数字是 15，`socket_write`将发送 00001111 作为 15 的二进制表示。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:06:00.330

使用`chr`功能：

```
socket_write( $fp, chr(15)); 
```

您还可以使用`\x`带有十六进制值的转义：

```
socket_write( $fp, "\xff\xff\xff\xff" ); 
```

将发送 4 个字节，每个字节的值为 255。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:11:29.210

要从任意数据生成二进制表示，请使用该[`pack()`](http://php.net/manual/de/function.pack.php)函数。

例子：

```
$data = pack("v", 15); // "i" is unsigned little endian integer
socket_write($socket, $data); 
```

有关各种格式的更多信息，请参见手册页。还有[`unpack()`](http://php.net/manual/de/function.unpack.php)反向功能。

# javascript - 相当于没有动画的 Window.scrollTo()？

> ID：14314440
> 
> 赞同：1
> 
> 时间：2013-01-14T07:05:22.870
> 
> 标签：javascript, ios, gwt, mobile-safari

在 Window 类中，我们有：

```
Window.getScrollTop(); 
```

和：

```
Window.scrollTo(0, 0); 
```

有没有办法在**没有**动画的情况下设置滚动？在 ios 上，调用 Window.scrollTo() 会产生动画。我想只设置没有任何动画的滚动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:25:29.153

难道你不能只使用锚标签..？您可以将 document.location 设置为该锚点（#top）

# cross-platform - MvvmCross 服务、插件和应用程序对象

> ID：14314441
> 
> 赞同：3
> 
> 时间：2013-01-14T07:05:23.413
> 
> 标签：cross-platform, mvvmcross

我考虑使用`MvvmCross`将我的应用程序移植到多个平台。我检查了一些使用 MvvmCross 的项目，该框架看起来很有前途且易于采用。我想澄清一些概念，以确保我能正确进行移植。

1.  据我了解，`cross-platform`业务逻辑应该在通过`RegisterServiceInstance`调用可用的服务中实现。

2.  特定于平台的功能通过插件公开。我应该努力使用`MvvmCross`插件，但如果我找不到提供我需要的功能的插件，我可以自己编写。我应该如何规划自定义插件的粒度？我应该避免在那里有任何业务逻辑而只放置特定于平台的东西吗？如果使用标准`Mvvm`插件需要在我的应用程序中进行大量代码更改，我是否仍然应该这样做以避免制作我自己的插件，或者我可以在插件设计决策中自由？

3.  最后，我还没有完全弄清楚所谓的应用程序对象的用途，特别是为什么它们使用这个长后缀`("ApplicationObject")`。什么是合格的应用对象，为什么建议装饰它的名字？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:47:39.170

一般来说.... Mvvmcross 实际上的目标是成为一个相当轻量级的框架 - 它希望更接近 mvvmlight 而不是棱镜......它的目的是让您将 mvvm 用于视图和视图模型 - 然后您如何编写您的业务逻辑（midels 和服务）真的取决于你。

话虽如此，对于我编写的示例，我通常使用 IoC 和插件 - 所以这是“我的实践” - 这是否是“最佳实践”绝对值得商榷 :)

> 1.  据我了解，跨平台业务逻辑应该在通过 RegisterServiceInstance 调用可用的服务中实现。

是的，RegisterServiceInstance、RegisterServiceType 和 GetService 一起提供了一个简单的 IoC 框架。

在我的应用程序中，我通常选择在“服务”层中实现业务逻辑，应用程序在启动期间向 IoC 注册，虚拟机在需要时使用该层。

如果您想直接在 vm 中对业务逻辑进行编码，或者如果您想使用服务的直接编码（而不是 IoC），那么您完全可以这样做。

> 1.  特定于平台的功能通过插件公开。我应该努力使用 MvvmCross 插件，但如果我找不到提供我需要的功能的插件，我可以自己编写。我应该如何规划自定义插件的粒度？我应该避免在那里有任何业务逻辑而只放置特定于平台的东西吗？如果使用标准 Mvvm 插件需要在我的应用程序中进行大的代码更改，我是否仍然应该这样做以避免制作我自己的插件，或者我可以在插件设计决策中自由？

是的，要自由！

插件只是使用 PCL 进行 IoC 的一种正式方式。

在 mvx 树中，插件非常小且具有针对性，因为它们被设计为在许多项目中重用。

在 mvx 树中，插件不包含业务逻辑，因为 mvx 是通用的 - 它不了解您的业务。

如果您想为您的应用程序编写一个插件，注册 50 个接口实现，其中许多是业务对象，那么“是的，请做” - 围绕您的业务需求构建您的代码。

最后，请注意插件是可选的——如果你有一些特定于平台的代码，你总能找到另一种方式将它注入你的虚拟机——例如，你的视图可以注入实现，或者你可以编写使用文件或程序集链接的非 PCL 代码为每个应用平台选择正确的实现。

> 1.  最后，我还没有完全弄清楚所谓的应用程序对象的用途，特别是为什么它们使用这个长后缀（“ApplicationObject”）。什么是合格的应用对象，为什么建议装饰它的名字

我同意这个名字并不完美 - 但我仍然想不出更好的名字。

MvxNotifyPropertyChanged 对象了解 Ui 线程并提供 inpc 实现

MvxApplicationObject 对象从 MvxNotifyPropertyChanged 继承，但也可以访问导航方法。

MvxViewModel 对象继承自 MvxApplicationObject 并被设计用于视图。

我现在唯一经常使用 MvxApplicationObject 的地方是起始对象——启动应用程序中第一个视图模型的“事物”。我通常将其称为 StartApplicationObject，因为它描述了它是什么。如果你想给它起别的名字，那么请这样做——我保证这不会对任何小猫造成任何伤害。

**旁注**：在第一个 mvx 项目中，开始对象最初继承自 MvxViewModel ...但在代码审查中被抓住并批评...在 ui 应用程序中做一些事情 - 它是一个......” - 那就是 MvxApplicationObject 诞生的时候......

如果你后来发现你有其他需要导航的对象，但不是视图模型，那么这个基类也适合你。否则，不要觉得你必须使用它......

* * *

总之...

从您的问题来看，听起来您已经阅读了示例，并且对我通常如何构建我的应用程序的核心部分有了很好的理解。

我唯一要强调的是我要保持灵活性——我不相信有一个最佳实践，大多数新项目都会带来新的独特挑战，而且我通常会在每个项目中学习和尝试新事物。

希望有帮助

斯图尔特

# regex - phpstorm 正则表达式搜索和替换

> ID：14314442
> 
> 赞同：5
> 
> 时间：2013-01-14T07:05:28.363
> 
> 标签：regex, phpstorm

我试图在 PHPstorm 中用正则表达式替换`echo $review->helpful;`，`echo stripslashes($review->helpful);` 但没有任何运气。

我试过但没有奏效，我得到了格式错误的替换字符串`echo \$.*\;`。`echo stripslashes($1);`

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T08:55:56.837

我不熟悉`phpstorm`，但您收到`malformed replacement string`错误的原因可能是因为您在`$1`没有第一个分组时使用引用第一个分组。

尝试使用这个：

```
echo \$(.*?); 
```

并再次替换为这个，就像你最初所做的那样：

```
echo stripslashes($1); 
```

基本上我所做的只是分组`.*`以便`$1`能够引用它，并为星号添加了一个惰性修饰符，以避免稍后在解析中发生任何奇怪的事情。我还删除了`\`, 因为`;`它本身不代表正则表达式中的任何内容，因此没有必要对其进行转义。

这是一个验证它是否有效的测试：http: [//fiddle.re/9e47](http://fiddle.re/9e47)

# c# - 从列表框项中设置复选框文本值

> ID：14314443
> 
> 赞同：2
> 
> 时间：2013-01-14T07:05:31.277
> 
> 标签：c#, wpf, xaml

如何为将添加到列表框中的每个项目绑定复选框内容值？

```
<ListBox BorderThickness="2" Height="389" 
 HorizontalAlignment="Left" Margin="10,10,0,0" 
 Name="lboIssues" VerticalAlignment="Top" Width="175"
 SelectionMode="Multiple" ItemsSource="{Binding Mode=OneWay}"> 
```

然后这是我的 ItemTemplate

```
<ListBox.ItemTemplate>
  <DataTemplate>
   <StackPanel Margin="0,5,0,5" Orientation="Horizontal" >
    <CheckBox   Name="checkbox"
                Content="{Binding Path=Value, Mode=OneWay}"
                VerticalContentAlignment="Center"
        Margin="0,0,5,0"
                Width="Auto"
                IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, 
                AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"
                IsTabStop="False" Checked="FilterCheckbox_CheckChanged" 
                Unchecked="FilterCheckbox_CheckChanged"/>
   </StackPanel>                         
  </DataTemplate>
</ListBox.ItemTemplate>` 
```

当我检查时，复选框的内容值是空白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:10:25.100

尝试将其更改为

```
 <CheckBox   Name="checkbox"
                Content="{Binding Path=Value, Mode=OneWay}"
                VerticalContentAlignment="Center"
                Margin="0,0,5,0"
                Width="Auto"
                IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, 
                    AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"
                IsTabStop="False" Checked="FilterCheckbox_CheckChanged" 
                Unchecked="FilterCheckbox_CheckChanged"
                Content="{Binding}"/> 
```

# java - Vaadin - 破坏关闭的窗口

> ID：14314447
> 
> 赞同：1
> 
> 时间：2013-01-14T07:05:46.053
> 
> 标签：java, memory-leaks, vaadin

我有一个使用多选项卡方法的 Vaadin 应用程序。以如果未找到`Application.getWindow(String name)`的方式被覆盖，它会创建一个新窗口并将其添加到应用程序。`super.getWindow(name)`所有窗口都有`Window.CloseListener`要输出的打印消息。我还看到了创建和销毁窗口的时刻 - 构造函数，并且`finalize()`两者都将消息打印到控制台。

当我刷新同一个浏览器选项卡时，会创建一个新窗口，并且我`Window.CloseListener`在控制台中看到 ' 消息并且没有来自`finalize()`方法的消息。如果我添加一个对实例进行计数的单例 AtomicLong（在构造函数中添加， dec in `finalize()`），我会看到实例数量不断增加（在那些刷新时），并且不会随时间减少。

似乎 Vaadin 商店以某种方式关闭了窗户。我还`jmap`编写了一个应用程序并在 Eclipse MAT 中打开了堆文件。MAT 显示关闭窗口的组件之一`UriFragmentUtility`用链引用：`Application`-> `WebApplicationContext`-> `CommuncationManager`->（通过paintableMap）`UriFragmentUtility`（参见附图）。

如何销毁关闭的窗口以防止内存泄漏？

![从 <code>UriFragmentUtility</code> 到 GC 根的路径的 Eclipse MAT 屏幕截图，<code>DofApplication</code> 是 <code>com.vaadin.Application</code> 的实例](../Images/91ada9770768603cbbcaa126f41b8923.png)

**更新** 我发现在代码窗口中只添加到 Vaadin`Application`并没有删除。添加后`Application.removeWindow()`，与刷新同一选项卡相关的任何内容都没有改变。

# c - 将输出保存到 ac 程序变量

> ID：14314450
> 
> 赞同：2
> 
> 时间：2013-01-14T07:05:59.113
> 
> 标签：c, shell

我有一个 shell 脚本程序，它提供了一些输出。我需要脚本的输出并存储在 c 程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:09:35.633

有两种方法可以做到这一点：

1.  从 C 程序中运行程序，使用如下内容：[How to execute a command and get output of command within C++ using POSIX?](https://stackoverflow.com/questions/478898/how-to-execute-a-command-and-get-output-of-command-within-c) 答案是为 C++ 编写的，但它与 C 中的调用相同。

2.  将其他程序的输出通过管道传输到您的 C 程序中。这意味着您的 C 程序不会在其他程序之前执行。例如，命令：

    ls | 我的程序

例如，将获取“ls”的输出并将其输入 myprog，后者可以通过 scanf 或 fgets 读取它。

# python - 如何在 django 的类视图上进行身份验证

> ID：14314456
> 
> 赞同：7
> 
> 时间：2013-01-14T07:06:25.940
> 
> 标签：python, django

在 Django 文档中，他们这样说[https://docs.djangoproject.com/en/dev/topics/auth/default/#user-objects](https://docs.djangoproject.com/en/dev/topics/auth/default/#user-objects)

```
from django.contrib.auth.decorators import login_required

@login_required(login_url='/accounts/login/')
def my_view(request): 
```

但是我如何在基于类的视图上使用 login_required

```
@login_required
classMyCreateView(CreateView): 
```

这给出了错误

`'function' object has no attribute 'as_view'`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T07:33:22.720

您可以通过多种方式做到这一点，例如

[https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-class-based-views](https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-class-based-views)

1.  无论是这个

> ```
>  urlpatterns = patterns('',
>         (r'^about/', login_required(TemplateView.as_view(template_name="secret.html"))),
>         (r'^vote/', permission_required('polls.can_vote')(VoteView.as_view())),
>     ) 
> ```

2.  或这个

> ```
> class ProtectedView(TemplateView):
>     template_name = 'secret.html'
> 
>     @method_decorator(login_required)
>     def dispatch(self, *args, **kwargs):
>         return super(ProtectedView, self).dispatch(*args, **kwargs) 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-18T13:15:37.587

对于 Django 1.9 或更高版本；基于类的视图 (CBV) 可以利用`mixin`auth 包中的。只需使用以下语句导入 -

```
from django.contrib.auth.mixins import LoginRequiredMixin 
```

> mixin 是一种特殊的多重继承。使用mixin主要有两种情况：
> 
> 1.  你想为一个类提供很多可选特性。
> 2.  你想在很多不同的类中使用一个特定的特性。
> 
> 了解更多：[什么是 mixin，它们为什么有用？](https://stackoverflow.com/a/547714/433587)

* * *

## 使用 login_required 装饰器的 CBV

**网址.py**

```
from django.conf.urls import url
from django.contrib.auth.decorators import login_required
from .views import ListSecretCodes

urlpatterns = [
    url(r'^secret/$', login_required(ListSecretCodes.as_view()), name='secret'),
] 
```

**视图.py**

```
from vanilla import ListView

class ListSecretCodes(LoginRequiredMixin, ListView):
    model = SecretCode 
```

* * *

## 使用 LoginRequiredMixin 的 CBV

**网址.py**

```
from django.conf.urls import url
from .views import ListSecretCodes

urlpatterns = [
    url(r'^secret/$', ListSecretCodes.as_view(), name='secret'),
] 
```

**视图.py**

```
from django.contrib.auth.mixins import LoginRequiredMixin
from vanilla import ListView

class ListSecretCodes(LoginRequiredMixin, ListView):
    model = SecretCode 
```

> **笔记**
> 
> 上面的示例代码使用[django-vanilla](http://django-vanilla-views.org/)轻松创建基于类的视图 (CBV)。通过使用 Django 的内置 CBV 和一些额外的代码行，可以实现相同的目的。

# javascript - Chrome WebRequest 未正确阻止

> ID：14314459
> 
> 赞同：1
> 
> 时间：2013-01-14T07:07:34.240
> 
> 标签：javascript, jquery, google-chrome-extension

我正在创建一个针对我无权访问其服务器的特定站点的扩展。我正在尝试以一种允许我使用 HEAD 请求获取重定向 url 的方式处理 HTTP 302 重定向。我这样做的代码是这样的：

```
var redirUrl = "";
var requestId = 0;

chrome.webRequest.onBeforeRedirect.addListener(function(details){
  console.log("before redirect");
  if(details.method == "HEAD"){
    redirUrl = details.redirectUrl;
    requestId = details.requestId;
  }
},
{urls: [matchUrl]});

chrome.webRequest.onHeadersReceived.addListener(function(details){
  console.log("on headers received");
  if(details.requestId == requestId){
    var temp = {"name":"redirUrl","value":redirUrl};
    details.responseHeaders.push(temp);    
  }  
  return {responseHeaders:details.responseHeaders};  
},
{urls: [matchUrl]},["responseHeaders", "blocking"]);

chrome.webRequest.onCompleted.addListener(function(details){
  console.log(JSON.stringify(details.responseHeaders));
},
{urls: [matchUrl]},["responseHeaders"]); 
```

现在，当前匹配不够具体，无法通过正常导航到匹配的 url 来触发这些事件。这样做后，事情进展得很好，当然不是 HEAD 请求，它不会添加任何东西。即使我允许所有重定向的请求，也可以很好地添加标头。当我尝试在后台 js 文件中的不同位置调用它时，出现了我的问题：

```
 $.ajax({
   url: url,
   data: datas,
   type: "HEAD",
   success: function(data,statusCode, jqXHR){
     console.log(jqXHR.getAllResponseHeaders());
   }      
 }); 
```

onHeadersRecieved 侦听器的阻塞部分完全阻止事件被触发，如果我移除阻塞，则没有足够的时间来附加标头。所以我的问题是什么会阻止它正确触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:28:12.020

好吧，这似乎是 chrome 中的一个错误，而不是我的代码中的错误，并且修复应该在某个时候工作到稳定通道，希望早点而不是晚点。我相信可能是[这个问题](http://src.chromium.org/viewvc/chrome?view=rev&revision=166961)，或者至少与它有关，并且此代码已确认可以在`26.0.1386.0 canary`.

# twitter-bootstrap - Angular-ui select2 在将 Angular 与 twitter-bootstrap 混合时不起作用

> ID：14314461
> 
> 赞同：3
> 
> 时间：2013-01-14T07:07:50.357
> 
> 标签：twitter-bootstrap, angularjs, jquery-select2, angular-ui

我在同一个 Web 应用程序中使用 angular-ui 和 bootstrap，在尝试使用 ui-select2 组件时遇到问题：一切正常，除了在下拉列表中选择一个元素时，它没有显示在组件，它显示为空，尽管 ng-model 关联变量已正确更新。如果我从主页中删除 bootstrap.js 文件的包含，这种奇怪的行为就会消失。有没有人同时使用 angular-js 和 bootstrap 和/或知道任何调整以申请让它们一起工作？

**更新：**

ui-select2 组件位于 input-append div 中，只需删除 div 即可解决问题。我在这里创建了 Angular-ui ui-select2 原始沙盒演示的一个[分支](http://plnkr.co/OMEzYWlosam0c84L926U?p=preview)。您可以转到“版本 2”示例并检查在列表中选择一个值是否正确更新了模型，但没有更新输入元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:08:33.717

底线是您不能`input-append`在本机上与 Select2 一起使用。您放入 HTML 中的输入实际上将被隐藏，并且 Select2 注入了额外的 DOM 元素（div、列表和输入），所有这些元素都将被隐藏/显示，并且都有各自的 CSS。

您遇到的问题是由于 Bootstrap 和 Select2 之间的 CSS 冲突。

您应该考虑 A：不使用 input-append，B：重写或调整 CSS 以取消隐藏相关元素，C：使用 typeahead 或其他与 Bootstrap 的 CSS 配合得很好的解决方案。

您可以查看[AngularUI Bootstrap 项目](http://angular-ui.github.com/bootstrap/)或查看[这个 Plunker / Gist](http://plnkr.co/edit/gist:4464334?p=preview)，它向您展示了如何使用 AngularUI Passthrough 指令运行 Bootstrap 指令。

# css - 从某些行中删除斑马条纹

> ID：14314463
> 
> 赞同：1
> 
> 时间：2013-01-14T07:07:54.110
> 
> 标签：css, css-tables

我有一张桌子，我目前正在用行进行斑马条纹，偶数和奇数都可以正常工作。我的问题是我还有一个类，用于指示不同颜色样式的新行。似乎这个新类被斑马条纹 CSS 抛出了，有没有办法解决这个问题？任何提示或建议表示赞赏，谢谢。

这是控制此表的一些 CSS

```
 #table tbody tr:nth-child(odd){
    background-color: #cccccc; color:black;
     }
   #table tbody tr:nth-child(even){
   background: #EBEBEB; color: #7D7D7D;
    }
   #table tbody tr:nth-child(2n+1):hover{
        cursor:pointer;
        /* add gradient */
        background-color: #808080;
        background: -webkit-gradient(linear, left top, left bottom, from(#909090), to(#606060));
        background: -moz-linear-gradient(top, #909090, #606060);
        color: #dadada;
        font-weight: ;
    }
  #table tbody tr:nth-child(2n):hover{
        cursor:pointer;
        /* add gradient */
        background-color: #808080;
        background: -webkit-gradient(linear, left top, left bottom, from(#909090),        to(#606060));
        background: -moz-linear-gradient(top, #909090, #606060);
        color: #dadada;

    }
  .new {
    background-color: #760086;
    color:white;
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:15:31.610

如果您将斑马条纹行的 CSS 放在新创建元素的代码之前，那么应该没问题：

```
p:nth-child(2n+1){
    /*blah*/
}
p:nth-child(2n){
    /*blah*/
}
p.new{
    /*blah*/
} 
```

现场演示：http: [//jsfiddle.net/DerekL/ZFcKs/](http://jsfiddle.net/DerekL/ZFcKs/)

# php - 在 Zend 1.11.2 中工作的应用程序在 1.12.1 中不工作

> ID：14314465
> 
> 赞同：2
> 
> 时间：2013-01-14T07:07:59.087
> 
> 标签：php, zend-framework, zend-autoloader

我尝试将应用程序从版本 1.11.2 迁移到 1.12.1。我只是将包含 1.11.2 的 Zend 文件夹替换为包含 1.12.1 的 Zend 文件夹。在 1.11.2 中运行的应用程序在 1.12.1 中不起作用，它无法加载类：

```
Fatal error: Class 'Plugin_AccessCheck' not found in 
C:\git_reps\mailable\application\Bootstrap.php on line 32 
```

**我在应用程序/插件文件夹中有插件文件，它在 1.11.2 中工作。**您能否告诉我为什么我的应用程序在 1.12.1 中无法运行以及如何使应用程序在新版本中运行？如果我关闭插件，它将找不到其他类，例如我的模型。

这是来自 application.ini 的片段：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.view.doctype = "HTML5"

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

autoloaderNamespaces[] = "Common_"
autoloaderNamespaces[] = "Shanty_"
resources.view.helperPath.Common_View_Helper_ = "Common/View/Helper/"

bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"

appnamespace = ""

resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0 
```

这里是注册插件的代码：

```
/**
 * Init plugins
 */
protected function _initPlugins()
{
    $fc = Zend_Controller_Front::getInstance();     
    $applicationPart = getenv('APPLICATION_ENV_PART');      
    switch($applicationPart) {
        case 'subscribe':
            $fc->registerPlugin(new Plugin_SubscribeAccessCheck());
            return;             
            break;
        default:
            $fc->registerPlugin(new Plugin_AccessCheck());              
            break;      
    }   
} 
```

当我在 BootStrap 中关闭插件时，它找不到其他文件，例如模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:38:53.183

如果@Marc 的建议不起作用，请尝试在 application.ini 中添加以下行：

```
resources.frontController.plugins.accessCheck = Plugin_AccessCheck 
```

在 Bootstrap.php 中：

```
/**
 * @return Zend_Application_Module_Autoloader
 */
protected function _initAutoload()
{
    $autoloader = new Zend_Application_Module_Autoloader(array('namespace' => '', 'basePath' => APPLICATION_PATH));
    $autoloader->addResourceType('plugin', 'plugins', 'Plugin');
    return $autoloader;
} 
```

如果文件位于以下路径中，则此方法有效： `/app/application/plugins/AccessCheck.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:08:53.967

从错误中，php 无法自动加载类 Plugin_AccessCheck，我猜你的 lib 文件夹中有一个 Plugin 目录，其中包含一个名为 AccessCheck.php 的 php 文件

尝试添加

```
autoloaderNamespaces[] = "Plugin_" 
```

到您的 application.ini 或手动为该文件执行包含

如果不是这种情况，则您错误地命名了您的类 Plugin_AccessCheck。可能的解决方案是将其移动到您的公共库 Common/Plugin/AccessCheck.php 并将类重命名为 Common_Plugin_AccessCheck

# asp.net-webpages - Razor 代码块使用

> ID：14314466
> 
> 赞同：4
> 
> 时间：2013-01-14T07:08:02.320
> 
> 标签：asp.net-webpages, webmatrix-2, razor-2

我刚刚开始使用网页，我不太明白为什么代码块不起作用。我需要有条件地显示一个 WebGrid。在我开始之前，我有这个：

```
<div>
@grid.GetHtml()
</div> 
```

现在我尝试插入一个 if 语句：

```
<div>
  @if (condition) { grid.GetHtml(); }
</div> 
```

这导致没有网格 html 显示。事实上，即使没有 if 语句，只有一个代码块，我也没有得到 html：

```
<div>
  @{ grid.GetHtml(); }
</div> 
```

不幸的是，我正在运行 WebMatrix，所以我无法调试，但似乎每当我使用代码块时，语句都不会执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:44:16.633

对于一行语句，您应该使用 @ 符号而不是将其放在代码块中。如果您仍然将它放在代码块中（在某些情况下您需要），它不会通过调用来显示您的网格`grid.GetHtml();`这就是使用@符号的原因，这意味着您想要写出一些值，但是您仅当您使用 HTML 代码编写时才应使用它。使用代码块时，您必须告诉服务器应该写出该值，如下所示：

```
@{
this.Write(grid.GetHtml());
} 
```

# apache-flex - 下拉列表不显示其值

> ID：14314467
> 
> 赞同：2
> 
> 时间：2013-01-14T07:08:03.583
> 
> 标签：apache-flex, drop-down-menu, dropdownbox

一旦我运行我的 Flex 应用程序，它就会成功获取 SOAP 响应并填充下拉框中的值，但它们是空的，换句话说，当我将鼠标悬停在我的下拉框上时，我可以看到它有三个空值。

我的弹性代码

```
<fx:Script>

    <![CDATA[
        import mx.events.FlexEvent;

        protected function  
                    dropDownList_creationCompleteHandler(event:FlexEvent):void
        {
            myResults.token = myservice.myUsers();
        }

    ]]> 
</fx:Script>

    <fx:Declarations>

    <myservice:myservice id="myservice"/>

    <s:CallResponder id="myResults"/>

</fx:Declarations>

 <s:FormItem label="Label">
  <s:DropDownList id="dropDownList"
       creationComplete="dropDownList_creationCompleteHandler(event)"
       labelField="name">
       <s:AsyncListView list="{myResults.lastResult}"/>
  </s:DropDownList>
  </s:FormItem> 
```

XML 是

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <myusersResponse xmlns="http://Services.com">
      <myusersReturn>
        <name>Nicole</name>
        <age>50</age>
      </myusersReturn>
      <myusersReturn>
        <name>Jayne</name>
        <age>40</age>
      </myusersReturn>
       <myusersReturn>
        <name>Alex</name>
        <age>33</age>
      </myusersReturn>
    </myusersResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:15:36.983

检查 xmlns 命名空间。

我为模拟您的问题而编写的以下代码可以正常工作：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <![CDATA[
        import mx.collections.XMLListCollection;
        import mx.events.FlexEvent;
        import mx.messaging.messages.SOAPMessage;
        [Bindable]
        var _result:*;

        protected function  
            dropDownList_creationCompleteHandler(event:FlexEvent):void
        {
            var xml:XML = <Body>
                            <myusersResponse>
                              <myusersReturn>
                                <name>Nicole</name>
                                <age>50</age>
                              </myusersReturn>
                              <myusersReturn>
                                <name>Jayne</name>
                                <age>40</age>
                              </myusersReturn>
                               <myusersReturn>
                                <name>Alex</name>
                                <age>33</age>
                              </myusersReturn>
                            </myusersResponse>
                          </Body>;

        _result = new XMLListCollection(new XMLList(xml.myusersResponse.myusersReturn));
        }

    ]]> 
</fx:Script>

<fx:Declarations>

</fx:Declarations>

<s:FormItem label="Label">
    <s:DropDownList id="dropDownList"
                    creationComplete="dropDownList_creationCompleteHandler(event)"
                    labelField="name">
        <s:AsyncListView list="{_result}"/>
    </s:DropDownList>
</s:FormItem> 
```

但是，如果您将 xmlns="http://Services.com 添加到 myusersResponse 标记，它会失败。

编辑：如果您需要命名空间解决方法，我刚刚在这里用命名空间解决方案回答了 Jack Moores 的问题[我的弹性代码没有正确解析肥皂响应](https://stackoverflow.com/questions/14312912/my-flex-code-does-not-parse-the-soap-response-properly/14337281#14337281)

# mysql - Mysql 使用过滤器获取排名

> ID：14314471
> 
> 赞同：4
> 
> 时间：2013-01-14T07:08:11.693
> 
> 标签：mysql, select, group-by, ranking

我有一个标记表，例如：

```
ID STUDENT_ID Branch_id Class_id Exam_id Subject_id Numbers Date
1 653 5 1 1 8 60 2012-01-01
2 653 5 1 1 9 40 2012-01-01
3 653 5 1 1 10 80 2012-01-01
4 653 5 1 1 11 50 2012-01-01
5 653 5 1 1 12 65 2012-01-01
6 653 5 1 1 13 33 2012-01-01
7 653 5 1 1 15 86 2012-01-01
8 222 5 1 1 8 100 2012-01-01
9 222 5 1 1 9 80 2012-01-01
10 222 5 1 1 10 92 2012-01-01
11 222 5 1 1 11 50 2012-01-01
12 222 5 1 1 12 65 2012-01-01
13 222 5 1 1 13 33 2012-01-01
7 222 5 1 1 15 86 2012-01-01

```

如果一个或多个学生的等级相同，我需要知道学生的等级。并使用分支和类 ID 进行过滤。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:48:13.087

试试这个：

```
SELECT STUDENT_ID, Numbers, IF(@marks=(@marks:=Numbers), @auto, @auto:=@auto+1) rank 
FROM (SELECT STUDENT_ID, Branch_id, Class_id, SUM(Numbers) Numbers
      FROM quiz_user 
      GROUP BY STUDENT_ID 
      ORDER BY Numbers DESC, STUDENT_ID 
     ) AS A, (SELECT @auto:=0, @marks:=0) AS B
WHERE Branch_id = 5 AND Class_id = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:12:45.907

```
select sum(Numbers),STUDENT_ID,Branch_id,  Class_id
from marksheet 
where Branch_id='value' and Class_id='valueClass'
group by STUDENT_ID,Branch_id,  Class_id
order by sum(Numbers) desc 
```

小提琴演示[在这里](http://sqlfiddle.com/#!2/b4c39/1)

# php - Mongodb GridFS 在下载 .ppt 和 .doc 文件时遇到问题？

> ID：14314473
> 
> 赞同：1
> 
> 时间：2013-01-14T07:08:27.303
> 
> 标签：php, mongodb, powerpoint, mime-types, gridfs

我的控制器中有这个功能来下载我存储在我的 mongodb 网格中的文件：

```
function download_presentation($ext,$store_filename)
{               
    $grid = $this->mongo->db->getGridFS();                      
    //query the file object
    $objects = $grid->find();
    //set content-type header, output in browser
    switch ($ext) {
        case 'pdf':
        $mimeType = 'Content-type: application/pdf';
        break;
        case 'jpg':
        $mimeType = 'Content-type: image/jpg';
        break;
        case 'png':
        $mimeType = 'Content-type: image/png';
            break;
        case 'doc':
        $mimeType = 'Content-type: application/msword';
        break;
        case 'docx':
        $mimeType = 'Content-type: application/vnd.openxmlformats-officedocument.wordprocessingml.document';
        break;
        case 'xls':
        $mimeType = 'Content-type: application/vnd.ms-excel';
        break;
        case 'xlsx':
        $mimeType = 'Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
        break;
        case 'ppt':
            $mimeType = 'Content-type: application/x-mspowerpoint';
        break;
            case 'pptx': $mimeType = 'Content-type: application/vnd.openxmlformats-                           officedocument.presentationml.presentation';
        break;
        default:
        $mimeType='Content-type: application/pdf';
                            }
           while($object = $objects->getNext()) :
           if(($object->file['filename'])==$store_filename){                      
           $content=$object->getBytes();
           header("Content-Length: " . strlen($content)); 
           header($mimeType); 
           echo ($content);}            
           endwhile; 
```

} 每当我下载 .ppt 文件时，它都会说 PowerPoint 无法打开此文件，因为它不是 .ppt。对于 pptx 文件，当我在下载后打开它时，当我单击 PowerPoint 中弹出的“修复”时它正在工作。同样的事情发生在 .doc/MS-Word 上。只有 pdf 文件运行良好。谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T17:40:21.020

好吧，经过一年的大量阅读、理解和实施 PHP，我能够回答我自己的问题，我已经使用[`ob_clean()`](http://www.php.net/manual/en/function.ob-clean.php)方法修复了错误，它就像一个魅力，希望这对未来的人有所帮助......

```
 $content= $object->getBytes();
        header("Content-Length: " . strlen($content)); 
        header($mimeType); 
        ob_clean(); 
        echo($content); 
```

# c# - 如何在图表中绘制日期和时间？

> ID：14314475
> 
> 赞同：3
> 
> 时间：2013-01-14T07:08:50.107
> 
> 标签：c#, asp.net, visual-studio-2010

我制作了这个将图表与gridview绑定的软件。在它的 x 轴上，我正在绘制日期时间，在 y 轴上，我有双数据类型的值。我在获取 x 轴点时遇到问题，因为它只是针对日期绘制而不考虑时间。这是网格视图：

![在此处输入图像描述](../Images/538f896c4ac8ea20b79c9d12f6c66bff.png)

这是代码：

```
private void Form4_Load(object sender, EventArgs e)
    {
        chart1.Series["LDA"].ChartType = SeriesChartType.Column;
        chart1.DataSource = dt2;
        chart1.Series["LDA"].XValueMember = "Date";
        chart1.Series["LDA"].YValueMembers = "Difference";
        //chart1.ChartAreas[0].AxisY.Interval = 0.01;
        chart1.DataBind();
    } 
```

这是图表：

![在此处输入图像描述](../Images/47281e26eda848e835b7ecba14fed449.png)

还请说明如何让图表分别显示绘制的值。网格视图有许多值，所以这里的图表显示了在一个地方累积的所有值。我希望它使用水平滚动条并在每次显着显示值。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:20:13.667

你可以使用谷歌图表

[谷歌图表](https://developers.google.com/chart/interactive/docs/gallery)

做图表的最简单方法

[教程](http://www.netmagazine.com/tutorials/create-beautiful-data-visualisations-svg-google-charts-api)

# android - 左侧列表视图和右侧选项卡主机，屏幕共享比例为 20:80

> ID：14314476
> 
> 赞同：5
> 
> 时间：2013-01-14T07:09:10.620
> 
> 标签：android, android-layout, android-listview, android-widget, android-tabhost

嗨，我在其中添加了两个`TabHost`s`Activity`并且它工作正常。我添加了另一个 XML 文件，`ListView`并`Activity`在我使用`Tabhost`. 它按预期给出错误，但我尝试了很多但无法解决它。谁能给我任何关于如何管理`ListView`和`TabHost`两者合二为一的想法`Activity`？我没有放代码，因为它主要来自教程。任何帮助，将不胜感激。谢谢。主要错误是“您的内容必须具有`TabHost`其 id 属性为 'android.R.id.tabhost'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T10:25:32.780

***带有选项卡的示例活动和带有选中项目的列表视图：***

我在下面发布了一个示例活动，其中包含一个`TabHost`有 3`Tabs`和 2的活动`ListView`，每个活动都有一个`tab1`和`tab3`。我使用 an`ArrayList`来初始化 my `ArrayAdapter`，我可以从中链接我的`ListView`. 然后我通过它的,将项目添加到`tab3ListView`它设置之后。请注意，tab3ListView 的项目有一个相应的复选框。请注意，现在有些人更喜欢，但我发现这种方式更简单。`ArrayList``tab3List``ActionBar.Tabs``TabHost`

***XML 文件：***

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="5dp" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="70dp"
            android:layout_marginBottom="-4dp"
            android:layout_weight="0" >
        </TabWidget>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="0dp"
            android:layout_weight="1">
            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical">
            <ListView 
                android:id="@+id/tab1List"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:fastScrollEnabled="true"></ListView>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >
           <EditText 
                android:id="@+id/tab2Edit1"
                android:layout_width="fill_parent"
                android:layout_height="40dp"
                android:hint="Enter text here"/>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >
           <ListView 
                android:id="@+id/tab3List"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:fastScrollEnabled="true"></ListView>
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost>
</LinearLayout> 
```

***主要活动：***

```
public class MainActivity extends Activity{

// TabHost
TabHost th;
LinearLayout tab1, tab2, tab3;

// ListView
ListView tab1ListView, tab3ListView;

// String list
String stringList[] = {"Paris", "Washington", "Amsterdam", "London", "Bale", "Madrid",
        "Zurich", "Munich", "Berlin", "Milan", "Rome", "Turin", "Lyon", "Marseille"};

// Adapters
ArrayList<String> tab1List, tab3List;
ArrayAdapter<String> tab1Adapter, tab3Adapter;

// Others
EditText tab2Edit1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // Initialize Layout
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Initialize Tabs
    th = (TabHost) findViewById(R.id.tabhost);
    th.setup();
    // Tab1
    TabSpec spec1 = th.newTabSpec("tag1");
    spec1.setContent(R.id.tab1);
    spec1.setIndicator("Tab 1");
    th.addTab(spec1);
    // Tab2
    TabSpec spec2 = th.newTabSpec("tag2");
    spec2.setContent(R.id.tab2);
    spec2.setIndicator("Tab 2");
    th.addTab(spec2);
    // Tab3
    TabSpec spec3 = th.newTabSpec("tag3");
    spec3.setContent(R.id.tab3);
    spec3.setIndicator("Tab 3");
    th.addTab(spec3);

    //Initialize Adapter and ListView from Tab1
    tab1ListView = (ListView) findViewById(R.id.tab1List);
    tab2Edit1 = (EditText) findViewById(R.id.tab2Edit1);
    tab1List    = new ArrayList<String>(Arrays.asList(stringList));
    tab1Adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, tab1List);
    tab1ListView.setAdapter(tab1Adapter);

    //Initialize Adapter and ListView from Tab3
    tab3ListView = (ListView) findViewById(R.id.tab3List);
    tab3List    = new ArrayList<String>(Arrays.asList(stringList));
    tab3Adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, tab3List);
    tab3ListView.setAdapter(tab3Adapter);
    tab3ListView.setFocusable(false);
    tab3ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    // Modify ListView: modify ArrayList and call notifyDataSetChanged() from corresponding adapter
    tab3List.add(0,"New item at location 0");
    tab3List.add(3,"New item at location 3");
    tab3List.add("New item at location end");
    tab3Adapter.notifyDataSetChanged();

    tab3ListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // Set what happenss when you check or uncheck an item here 
        }

    });
} 
```

# iphone - 通过在 iOS 中摇动手机在后台启动进程

> ID：14314483
> 
> 赞同：0
> 
> 时间：2013-01-14T07:10:07.410
> 
> 标签：iphone, ios, cocoa-touch, ios5, background-process

当我的 iPhone 摇晃时，我想在后台启动一个进程。可以说我的 iPhone 在主屏幕上。我摇晃它，后台进程开始。我怎样才能做到这一点？？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:22:02.480

@Varun你不能有后台进程。除非您的应用程序处于活动状态，否则您无法执行任何过程。

正如您所问的，用户何时在主屏幕上。我想告诉你，当用户在主屏幕上时。您无法控制您的应用程序。iOS 不允许除苹果应用程序之外的任何后台进程。

其他方法是使用推送通知或本地通知。当用户检查它们时，您可以打开您的应用程序并做任何您想做的事情。

# c# - 名称为“url”的 HTTP 参数导致我的 Web 应用程序出现奇怪的结果

> ID：14314484
> 
> 赞同：0
> 
> 时间：2013-01-14T07:10:08.310
> 
> 标签：c#, asp.net, http, web-applications

我之前问过这个，但我遇到了另一个问题。说，如果我像这样加载我的页面：

```
http://localhost:57845/api.ashx?v=123&usr=&url= 
```

然后尝试做：

```
string strUser = context.Request["usr"];
string strURL = context.Request["url"]; 
```

两者都`strUser`将`strURL`设置为“”，这是我所期望的。

但如果这样称呼它：

```
http://localhost:57845/api.ashx?v=123 
```

`strUser`will be `null`，我也希望如此，但`strURL`将设置为“/api.ashx”。

这是为什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:13:19.910

我相信这是来自[`ServerVariables`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx)请求的一部分。如果您要求`remote_addr`或 IIS 支持的任何其他[服务器变量](http://msdn.microsoft.com/en-us/library/ms524602.aspx)（假设您通过 IIS），您同样会得到一个值。

如果您*只想*从查询字符串中获取参数，请使用以下[`QueryString`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)属性：

```
string strUrl = context.Request.QueryString["url"]; 
```

（我也*强烈*建议你去掉变量名上的类型前缀，但那是另一回事。）

# django - Django 内联和 DateTimeField

> ID：14314490
> 
> 赞同：1
> 
> 时间：2013-01-14T07:10:44.420
> 
> 标签：django, events, backend, inline-formset

我正在尝试创建简单的事件应用程序，所以我决定创建事件和一些内联事件发生：

```
class EventOccurenceInline(admin.TabularInline):
    model = models.EventOccurance
    form = forms.EventOccuranceForm
    pass

class EventAdmin(TranslatableAdmin):
    list_display = [ "internal_name"]
    inlines = [
        EventOccurenceInline,
    ]
    pass 
```

这是forms.py：

```
class EventOccurenceForm(TranslatableModelForm):
    start_date = forms.DateTimeField()
    end_date = forms.DateTimeField()
    class Meta:
        model = models.EventOccurence 
```

但是，当我打开后端时，我只看到简单的输入而不是 DateTime 选择器，甚至这些字段的标签也没有说明：

![截屏](../Images/a6d830c2598c667f646f9484f5d1c0b8.png)

有谁知道如何在内联中使用这些小部件？我究竟做错了什么？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:59:45.417

看起来问题在于您在没有任何参数的情况下在类中声明`start_date`and`end_date`字段。`EventOccurenceForm`

[以下是 Django 在覆盖默认字段类型或小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)部分中的“从模型创建表单”文档中的引用：

> 如果你像这样显式地实例化一个表单域，Django 假设你想要完全定义它的行为；因此，默认属性（例如`max_length`或`required`）不是从相应的模型中提取的。如果要保持模型中指定的行为，则必须在声明表单字段时显式设置相关参数。

无论如何，您为什么要在类中声明`start_date`and`end_date`字段`EventOccurenceForm`？是因为您试图在表单中只包含这两个字段吗？如果是这种情况，您应该改用`fields`内部`Meta`类的属性。

我假设`EventOccurence`模型`start_date`和`end_date`字段是`DateField`s ，因此，在 Django admin 中，`AdminDateWidget`默认情况下它们将具有小部件。如果由于某种原因不是这种情况并且您无法更改模型，则始终可以使用该类的内部类的`widgets`属性，如下所示：`EventOccurenceForm``Meta`

```
from django.contrib.admin.widgets import AdminDateWidget

class EventOccurenceForm(TranslatableModelForm):
    class Meta:
        model = models.EventOccurence
        widgets = {
            'start_date': AdminDateWidget,
            'end_date': AdminDateWidget,
        } 
```

# ruby - 如何访问 Ruby/对象属性

> ID：14314492
> 
> 赞同：1
> 
> 时间：2013-01-14T07:11:15.783
> 
> 标签：ruby

调试输出如下所示：

```
!ruby/object:Business 
attributes:
  business_type: 8
  type_count: 2 
```

但是我如何访问这些属性？

我在这里感觉很愚蠢：/

编辑：我认为还有更多代码：

```
<% @serviceSections.each do |k,v| %>
<% c = @bc.select{|s| s.business_type == k} %>  
<%= debug(c.type_count) %>
<% end %> 
```

这只是给了我错误

> [# <业务业务类型：8>]的未定义方法`type_count'：数组

编辑2

我主要是个白痴:-)已经晚了....

我需要做的只是检查：

```
<% if !c.respond_to?("type_count") %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:56:06.063

```
Business.business_type # => 8
Business.type_count # => 2 
```

这要求在你的`Business`类中定义一个属性阅读器，通常是这样的：

```
class Business
  attr_reader :business_type, :type_count
  # more code ...
end 
```

如果你想`set`另外取值，你应该定义一个属性访问器：

```
class Business
  attr_accessor :business_type, :type_count
  # more code ...
end 
```

然后您可以：

```
Business.business_type = 17
Business.type_count = 22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:26:11.227

[文档](http://apidock.com/rails/ActiveRecord/QueryMethods/select)说：“虽然在上面的示例中，这个方法看起来好像返回一个数组，但它实际上返回一个关系对象，并且可以附加其他查询方法，例如 ActiveRecord::QueryMethods 中的其他方法。”

考虑到这一点，以下应该可以解决问题

```
c.each do |r|
  puts r.type_count
end 
```

如果您确定只会返回一条记录，`select`那么以下内容也将起作用。

`<%= debug c[0].type_count %>`

# linux - 如何在 Linux (Gnome) 中多路复用多个视频流

> ID：14314497
> 
> 赞同：0
> 
> 时间：2013-01-14T07:11:33.937
> 
> 标签：linux, opengl, video-streaming, gnome

我有许多计算机（客户端）分布在房子周围，并通过有线 LAN 连接。我的目标是从所有这些计算机收集视频流并将它们显示在单个（服务器）大屏幕上。客户可以流式传输他们的桌面、视频文件、文本（作为图像）或其他任何内容。

此时，我在客户端准备了低分辨率的视觉数据，并使用 OpenGL 在服务器上单独显示它们。现在我想创建一个**动态网格**并在同一个窗口上显示多个流。动态的，因为在任何给定时间，只有部分客户端会进行流式传输。我想让这些网格根据活动客户的数量改变其结构。客户端和服务器都运行 Linux 和 Gnome。我目前倾向于使用**OpenGL**并为每个客户端使用**单独的线程。**我不知道这是否是个好主意，因为每个流可能有**不同的更新率**。

您认为实现此功能的最简单方法是什么，例如在不牺牲灵活性的情况下减少编码？哪种技术最适合这项任务？我对图形编程的了解非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:39:36.763

您可以绘制一组矩形 - 每个视频一个。每个视频帧都将是其矩形的纹理。您可以以不同的速率独立更改纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:56:50.953

如果您的每台计算机都有专用的现代 GPU，您可以在称为[并行渲染的过程中利用它。](http://developer.download.nvidia.com/GTC/PDF/GTC2012/PresentationPDF/S0353-GTC2012-Multi-GPU-Rendering.pdf)这意味着每个 GPU 负责渲染最终帧的一部分。您的一台 PC 成为作曲家，其余的是“奴隶”。每个奴隶渲染它的部分并将结果获取到组装最终帧的作曲家。设置这样的系统并非易事，但您可以获得可观的性能提升 + 可扩展性。

看看 [Equalizer](http://www.equalizergraphics.com/)框架。在这种情况下，它可以减少开发工作量。

# asp.net - 为 AutoGenerateColumn GridView 指定 HeaderText

> ID：14314498
> 
> 赞同：0
> 
> 时间：2013-01-14T07:11:46.217
> 
> 标签：asp.net, c#-4.0, gridview

我有一个自动生成列的gridview（有一个`List<>`DataSource），现在我需要`HeaderText`为它的列指定。我用谷歌搜索了很多并检查了一些以前的问题，结果发现*自动生成的网格没有 Columns Collection*，最后我在这篇文章[http://damieng.com/blog/2006/09之后创建了自己的自定义网格/25/extending-gridview-to-access-generated-columns](http://damieng.com/blog/2006/09/25/extending-gridview-to-access-generated-columns) 现在我在一个属性中获取列集合`BoundColumns`，我尝试将 HeaderText 属性设置为事件`PageLoad`，`RowDataBound`但都是徒劳的，我需要知道我可以把这个放在哪个事件上使其工作的代码

```
 gridUsers.BoundColumns[0].Visible = false;
            gridUsers.BoundColumns[1].HeaderText = "Login ID";
            gridUsers.BoundColumns[2].HeaderText = "User Name";
            gridUsers.BoundColumns[3].Visible = false;
            gridUsers.BoundColumns[4].HeaderText = "User Email";
            gridUsers.BoundColumns[5].HeaderText = "User Status";
            gridUsers.BoundColumns[6].HeaderText = "User Role"; 
```

PS：可见属性正在处理页面加载。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:39:57.833

您不必执行自动生成的列，特别是如果您想手动设置标题。将数据源更改为具有正确列标题的返回值，或者使用`<columns><asp:boundfield HeaderText="" >...`并手动指定列（并设置`AutoGenerateColumns=false`）。

在大多数情况下，您可以在 RowDataBound 事件期间更改标题和列，但如果您使用声明性语法或除非您有特殊的呈现要求，则不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:31:20.397

是的，您可以按以下方式执行此操作

```
protected void GridView1_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e) 
{

    if (e.Row.RowType == DataControlRowType.Header) 
    {
        GridView1.Columns[0].HeaderText = "your header text name";
    } 
} 
```

# python - 为 numpy 绑定列（来自向量）

> ID：14314501
> 
> 赞同：7
> 
> 时间：2013-01-14T07:12:13.810
> 
> 标签：python, numpy, scipy

代码是这样的：

```
a = numpy.zeros(3)
b = numpy.ones(3)
bind_by_column((a,b))
=> [[0,1],[0,1],[0,1]] 
```

我检查了[这个](http://mathesaurus.sourceforge.net/r-numpy.html)，但没有找到答案

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T01:51:54.453

np.column_stack

请参阅 [Numpy：连接多维和一维数组](https://stackoverflow.com/questions/4158388/numpy-concatenating-multidimensional-and-unidimensional-arrays/4158985#4158985)

```
>>> import numpy
>>> a = numpy.zeros(3)
>>> b = numpy.ones(3)
>>> numpy.column_stack((a,b))
array([[ 0.,  1.],
       [ 0.,  1.],
       [ 0.,  1.]]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T07:21:38.600

您可以使用`numpy.vstack()`：

```
>>> import numpy
>>> a = numpy.zeros(3)
>>> b = numpy.ones(3)
>>> numpy.vstack((a,b)).T
array([[ 0.,  1.],
       [ 0.,  1.],
       [ 0.,  1.]]) 
```

# javascript - 素面布局

> ID：14314502
> 
> 赞同：0
> 
> 时间：2013-01-14T07:12:30.053
> 
> 标签：javascript, jsf, web-applications, layout, primefaces

我正在使用带有 JSF2.1 的 Primefaces 3.4.2 我创建了一个页面，该页面分为一些布局单元。在右侧布局单元中，我有一个手风琴面板并创建了动态菜单，中间中心布局由 ui:include 组成，并且在图层中加载了一个页面，当我单击一个链接时会打开一个包含动态页面的对话框。在右侧布局中打开和关闭对话框而不执行任何操作后，中间中心布局不再起作用。我可以看到它，但是我单击输入文本我无法在其中输入任何内容也单击其他组件没有任何反应！！！什么是问题？有解决办法吗？

当单击菜单项打开对话框包括其他页面时，当单击树节点中心布局更改时，在对话框中打开的页面工作正常，但当关闭对话框时，中心布局按钮和输入不起作用，其他布局组件工作正常！

我的新代码：

```
 <p:layoutUnit id="right" position="east" size="145"  style="text-align:center;direction: ltr!important;padding: 0px!important;">
                    <h:form prependId="false">
                         <script type="text/javascript">
                            function test(id,url,title){
                                document.getElementById('h1').value=id;
                                document.getElementById('h2').value=url;
                                document.getElementById('h3').value=title;
                                salamm.jq.click();
                            } 
                        </script>
                        <h:inputHidden id="h1" value="#{adminC.nclose}" />
                        <h:inputHidden id="h2" value="#{adminC.nurl}"/>
                        <h:inputHidden id="h3" value="#{adminC.ntitle}"/>
                        <p:commandButton actionListener="#{adminC.addTab()}" id="salam" widgetVar="salamm" update=":dlgpanel" onstart="waitDialogmain.show()" style="display: none" oncomplete="waitDialogmain.hide();dlg1.show()"/>  
                        <p:accordionPanel style="text-align: center;font-family: tahoma!important" activeIndex="#{menuGen.activeIndex}">
                             <p:tab title="connections"  id="t0" rendered="#{menuGen.menuList1.length()>0}"  >

                                 <center>

                                                <h:outputText escape="false" value="#{menuGen.menuList1}"/>
                                            </center>
                                            <br/>
                                        </p:tab>
                                        <p:tab title="manage" id="t1" rendered="#{menuGen.menuList2.length()>0}" >
                                            <center>
                                                <h:outputText value="#{menuGen.menuList2}" escape="false"/>
                                            </center>
                                            <br/>
                                        </p:tab>

                            </p:accordionPanel>
                     </h:form>
                                 </p:layoutUnit>
                <p:layoutUnit id="center" style="padding: 0px!important;" position="center">
                    <p:layout widgetVar="mkh">
                        <p:layoutUnit id="middleright" position="east" size="170"  collapsible="true" style="padding: 0px;direction: ltr" >
                            <h:form prependId="false">
                             <p:tree value="#{treeC.root}"  var="node" dynamic="true" style="width: 165px;border: none;direction: rtl!important;text-align: right;font-family: tahoma;font-weight: bold" selectionMode="single" selection="#{treeC.selectedNode}">
                                 <p:ajax event="select" listener="#{treeC.onNodeSelect}" onstart="waitDialogmain.show()" oncomplete="waitDialogmain.hide()" />       
                                 <p:treeNode  >
                                     <h:outputText value="#{node}"/>
                                 </p:treeNode>

                             </p:tree>
                             <p:commandButton onclick="mkh.toggle('east')" icon="ui-icon-triangle-1-e" title="ctr+shift+right arrow" style="width: 6px;height: 80px;position: absolute;top: 50%;" type="button"/> 
                      </h:form>
                        </p:layoutUnit>
                        <p:layoutUnit id="middlecenter" style="padding: 0px!important;" position="center">
                            <p:layout style="text-align: center">
                                <p:layoutUnit id="middlecenter1" style="padding: 0px!important;" position="center" resizable="true" >

                                        <p:outputPanel autoUpdate="true" id="dlgpanelcenter">                 
                                        <center>
                                            <ui:include src="./../users/networkReport.xhtml" />
                                        </center>
                                    </p:outputPanel>

                                </p:layoutUnit>                                
                                <p:layoutUnit id="middleBottom" size="100"  style=" padding: 0px!important" position="south" resizable="true" >

                                </p:layoutUnit>
                            </p:layout>
                        </p:layoutUnit>
                    </p:layout>
                </p:layoutUnit>
            </p:layout>
            <p:dialog id="dlg" resizable="false" maximizable="true" modal="true"  draggable="true" height="400"  widgetVar="dlg1" style="background-color: white!important;text-align: center!important;direction: ltr">

                <p:outputPanel style="direction: rtl" id="dlgpanel" >                   
                    <center>
                        <ui:include  src="#{adminC.url}" />
                    </center>
                   </p:outputPanel>

            </p:dialog>

        </h:body>
    </f:view>
</html> 
```

这是在对话框中打开的一页：

```
 <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            template="./../template/masterTemplate.xhtml"
            xmlns:p="http://primefaces.org/ui"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns="http://www.w3.org/1999/xhtml"
            xmlns:sec="http://www.springframework.org/security/tags">

<ui:define name="top">

</ui:define>
<ui:define name="content">
    <h:form id="regChannel" prependId="false" style="text-align: right;float: none!important">
      ........

   </h:form>        
</ui:define>
<ui:define name="bottom">

</ui:define> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T07:42:28.300

摆脱所有嵌套形式 ( `<h:form`)，

我注意到你有很多

页面上不能有以下结构

```
<h:form.....
  some elements....
  some elements....
  some elements....
  <h:form.... 
```

例如，您可以放置​​一个`<h:form`将包装的`<p:tab`

或者放在`<h:form`每个里面`<p:tab`

另一种检查你没有嵌套`<h:form`的方法是在你的页面中*查看源代码*`<form`并查看你是否有内部`<form`（嵌套表单是 baaaad）

* * *

**更新**

你确定你需要`<ui:define`对话框中的所有这些吗？尝试从内部删除所有`<ui:define`+并留下`template="./../template/masterTemplate.xhtml"``ui:composition`

```
<ui:composition....
    <h:form...

    </h:form>
</ui:composition> 
```

# ruby-on-rails-3 - 具有用户定义条件的 ActiveRecord has_many

> ID：14314505
> 
> 赞同：0
> 
> 时间：2013-01-14T07:13:02.360
> 
> 标签：ruby-on-rails-3, associations

我有一个包含许多条目的帐户模型，并且我想仅在一段时间内发生时才加载帐户的条目。每个用户会话的这段时间都不同，所以我的`account.rb` ：

```
class Account < ActiveRecord::Base
  attr_accessible :code, :detail, :name
  attr_accessible :startDate, :endDate # not persisted in db
  has_many :entries, :order=>'date1,transref', :conditions => { :date1 => "#{@startDate}".."#{@endDate}" }

def startDate=(sd)
@startDate = sd
end

def startDate
@startDate
end

def endDate=(ed)
@endDate = ed
end

def endDate
@endDate
end

end 
```

还有我的accounts_conttoller.rb：

```
def show
  @account = Account.find(params[:id])
  @account.startDate = '2012-02-01' #Actual value to be read from session[]
  @account.endDate = '2013-02-01' #Actual value to be read from session[]
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @account }
  end
end 
```

当我调用`"show"`时，`@account.entries`是空的，并且使用的 SQL 查询是：

```
SELECT ... WHERE entries.date1 BETWEEN '' and '' ... 
```

和变成`startDate`了`endDate`空。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:44:52.453

当你定义

```
has_many :entries, :order=>'date1,transref', 
  :conditions => { :date1 => "#{@startDate}".."#{@endDate}" } 
```

您的`@`-variables 是**类（或单例）变量**，并且`def show`它们是**实例变量**

所以你必须使用 smth like

```
@entries = self.entries.where( :date1 => @startDate..@endDate ) 
```

在你的**表演**方法中。`@entries`然后，在视图中使用实例变量访问这些条目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:45:40.450

您需要将条件包装在 a 中`proc`，以便在每次调用时动态评估它们`entries`：

```
has_many :entries, :order=>'date1,transref', :conditions => proc { { :date1 => "#{@startDate}".."#{@endDate}" } } 
```

我还建议使用您定义的 getter 方法（`startDate`和`endDate`），而不是直接访问实例变量（通常被认为是不好的做法）：

```
has_many :entries, :order=>'date1,transref', :conditions => proc { { :date1 => "#{startDate}".."#{endDate}" } } 
```

另请参阅：[具有动态条件的 Rails has_many](https://stackoverflow.com/questions/2462203/rails-has-many-with-dynamic-conditions)

# c++ - 静态成员函数和派生类的问题

> ID：14314507
> 
> 赞同：-1
> 
> 时间：2013-01-14T07:13:06.780
> 
> 标签：c++, inheritance, static, static-methods

我有一个带有静态成员函数的类（这是必要的）。能够使用类的非静态成员。我定义了`Static_This`一个指向类的指针。

```
template<class T>
class Energy_Minimizer
{
protected:

    static Energy_Minimizer* Static_This;

    Petsc_Vector<T>* Gradient;
    Petsc_Vector<T>* Solution;
    static int Form_Function_and_Gradient(Petsc_Vector<T> *Solution_,Petsc_Vector<T>  *Gradient_, PetscReal *Function_Value_);
public:
    Energy_Minimizer(MPI_Comm Communicator_);
    void Add_Term(vector<int>& Indexes, void* Coefs, string Function_Name_);
    virtual void Total_Energy()=0;
}; 
```

我`Static_This`在类的构造函数中设置了。

```
template<>
Energy_Minimizer<double>::Energy_Minimizer(MPI_Comm Communicator_)
{
    Communicator = Communicator_;
    Static_This = this;
        ...
} 
```

并且可以访问非静态虚函数：

```
int Energy_Minimizer<double>::Form_Function_and_Gradient(Petsc_Vector<double> *Solution_,Petsc_Vector<double>  *Gradient_, PetscReal *Function_Value_)
{

Static_This->Solution = Solution_;
    Static_This->Gradient = Gradient_;

    // Call the user-defined routine to construct the function value, gradient
    Static_This->Total_Energy();

    return 0;
} 
```

我在派生类中实现了虚函数 Total_Energy()：

```
class Strain_Solver : public Energy_Minimizer<double>;

void Strain_Solver::Total_Energy()
{
        ****** Here problem occurs ******
    this->Add_Term(ij_Indexes, NULL , string("Alpha_Term")); 
} 
```

我从派生类的虚函数中调用基类的函数。我唯一的问题是，一旦我从派生类中调用基类的成员函数，数据（此处为解决方案）就会损坏。即当我在上面的示例中调用 Add_Term 函数时，基类的解决方案向量突然被破坏。就像它被取消分配一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:23:09.663

听起来问题出在派生类中，通过这种设计，它可能出现在任何地方。您似乎没有出于预期目的使用任何语言结构……您违反了所有规则，尚不清楚原因。

> 当我在上面的示例中调用 Add_Term 函数时，基类的解决方案向量突然被破坏。就像它被取消分配一样。

忽略代码，当您增加 a 的大小时`std::vector`，它可能会将包含的对象重新分配（即*解除分配*和移动）到更大的内存块。因此，您不能将指针或迭代器用于`std::vector`大小增加的 a 。

`ij_Indexes`如果程序的某些部分通过调用来跟踪内部的事物`Add_Term`，它必须

*   使用整数偏移量（`std::size_t`是最好的类型）和下标运算符（语法类似`ij_Indexes[offset]`）或
*   的类型`ij_Indexes`应该更改为 container `std::deque`，它不会重新分配但不是平面数组，并且与您似乎正在使用的基于 C 的数学库不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:29:55.533

您的 Static_This 成员不是静态的。即使是这样，静态字段（数据成员）也只有一个实例，但一个类可以有多个实例。您的 Static_This 成员将指向哪个实例？

无论如何，这似乎是一个奇怪的设计。如果您发布您的真实代码（或至少描述它），我相信有人会建议您更好的设计。

# ios - 将字符串转换为url以将数据发送到mysql目标c iOS

> ID：14314508
> 
> 赞同：3
> 
> 时间：2013-01-14T07:13:08.250
> 
> 标签：ios, nsstring, nsurl

我正在尝试将字符串转换为 url 但没有成功。任何更好的方法，或改进以下代码。谢谢

```
NSString *strURL = @"http://domain.com/This Is My, Code for This. app";
NSString *escapedUrlString = [strURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(escapedUrlString); 
```

它正在显示此日志

> [http://domain.com/This2s2y](http://domain.com/This2s2y) ,地址
> 0.000000or2his.20x1.55e800047f4p-1029pp

这是我将数据发送和保存到 mysql 的实际代码

```
NSString *data = @"This Is My, Code for This. app";
NSString *strURL = [NSString stringWithFormat:@"http://domain.com/connection.php?data=%@", data];   

NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];  

NSURL *urll = [NSURL URLWithString:strResult];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:urll];

[request setHTTPMethod:@"GET"];

NSURLResponse *response;
NSError *err;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
NSLog(@"responseData: %@", responseData); 
```

没有成功，但是当我使用

```
data = @"ThisIsMyCode"; 
```

然后一切正常...帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T07:49:54.597

```
NSString *data = @"This Is My, Code for This. app";
NSString *escapedDataString = [data stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString *strURL = [NSString stringWithFormat:@"http://domain.com/connection.php?data=%@", escapedDataString];
    NSLog(@"Encoded:%@",strURL); 
```

这工作正常，这是日志：

```
Encoded:http://domain.com/connection.php?data=This%20Is%20My,%20Code%20for%20This.%20app 
```

# c++ - 字符串以数字结尾的正则表达式

> ID：14314509
> 
> 赞同：0
> 
> 时间：2013-01-14T07:13:13.327
> 
> 标签：c++, regex

1.  我需要使用 std::regex 并验证 C++ 中的输入字符串 输入字符串应该介于`folder-1`或`folder-01`或`folder-001`到之间`folder-200`（前缀必须是“文件夹-”） 如何为此编写正则表达式？

2.  C++ 中使用的正则表达式与 PHP 和 JavaScript 等其他语言中使用的正则表达式有什么不同？

3.  大多数 C++ 开发人员是否使用“Boost regx”或“std::regex”（请发表一些评论）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:21:12.737

就像是

```
const std::regex re("folder-\\d{1,3}"); 
```

例子：

[http://liveworkspace.org/code/1EfD0Q](http://liveworkspace.org/code/1EfD0Q) 12 美元

您可以阅读 C++ 标准中的 std::regex 或 boost 文档中的 boost::regex。boost::regex 是稳定的库，std::regex 是 C++11 标准的新特性。

现在，例如 gcc 4.7 无法处理此正则表达式，因此，使用 boost 更好（在 LWS 的示例中，我使用 boost::regex 而不是 std::regex，因为 gcc 4.7 中的 std::regex 无法正确处理 {n, m }）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:06:41.540

尝试使用，

```
 System.out.println("folder-004".matches("^folder-\\d{1,3}?$")); 
```

更多详情[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# xml - javax.faces.STATE_SAVING_METHOD 自动添加到 web.xml

> ID：14314514
> 
> 赞同：0
> 
> 时间：2013-01-14T07:13:44.300
> 
> 标签：xml, jsf-2

我遇到了一个问题 `javax.faces.STATE_SAVING_METHOD<br>`，我发现它 `javax.faces.STATE_SAVING_METHOD`被设置为客户端出现问题`@ViewScoped`

我的问题是，我没有添加这个标签，我发现它是 `web.xml`自动添加的，
那么在哪些情况下会添加这个标签，为什么？

# linux - 虚拟机管理程序来宾操作系统中的内存地址转换

> ID：14314515
> 
> 赞同：5
> 
> 时间：2013-01-14T07:13:56.307
> 
> 标签：linux, memory, virtualization, virtual-machine, virtual-memory

假设有这样的代码。

```
MOV [0x1234], EAX (intel assembly) 
```

假设 CPU 想要处理这条指令。让我们假设没有管理程序。我们只是在 linux 环境中使用普通的 x86 CPU（保护模式）。

现在，我的理解是，由于 0x1234 是虚拟地址，因此需要将其转换为物理地址。（让我们跳过分段部分）

CPU 只需将此地址（0x1234）传递给 MMU 硬件。MMU 遍历页表并使用物理地址访问内存内容。

我对么？

现在让我们假设有虚拟机管理程序，并且这段代码是从客户操作系统运行的。

到底发生了什么？

我知道管理程序提供了另一层页表。但我不明白这是如何工作的。

如果客户代码“MOV [0x1234], EAX”在真实 CPU 中执行。虚拟地址 0x1234 将由真实硬件 MMU 翻译。所以我认为必须重写这条指令（在执行代码之前应该将0x1234替换为另一个地址），或者被困在管理程序中......

我错了吗？如果我错了，请纠正我的理解......

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T10:46:55.357

回答你的第一个问题：是的，你是。这基本上就是虚拟内存的工作方式。

现在，让我们看看当管理程序在 MMU 和来宾操作系统之间运行时会发生什么。出于性能考虑，管理程序（无论是*类型 1*还是*类型 2*）将尝试避免在每个来宾操作系统内存访问时陷入陷阱。这个想法是*让*客户操作系统管理 MMU。我将详细说明可能的实现，一种用于 x86，一种用于 PowerPC。

在 x86 上，来自[英特尔的手册 3B](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)：

> 27.3.2 访客和主机物理地址空间
> 
> 内存虚拟化为客户软件提供从零开始并扩展到客户虚拟处理器物理地址宽度支持的最大地址的连续客户物理地址空间。VMM 利用客户物理到主机物理地址映射来定位主机内存中的所有或部分客户物理地址空间。VMM 负责此映射的策略和算法，这可能会考虑到主机系统物理内存映射和 VMM 向来宾公开的虚拟化物理内存映射。

VMM 知道 VM 的当前`PDBR`基地址（`PDBR`保存在`CR3`寄存器中），因为访问`CR3`将导致 VM_EXIT。VMM 将能够代表来宾操作系统维护真实页面目录。我的意思是，当客户操作系统修改其页面目录以将逻辑地址 A 映射到物理地址 B 时，VMM 会捕获此问题，而不是将 A 映射到 B，而是将 A 映射到 C。因此，对 A 的任何进一步访问都不会导致#PF，它将通过 MMU 完美地路由到 C。这种方法的可悲之处在于客户机认为它已将 A 映射到 B，但实际上 A 已映射到 C，因此 VMM 必须维护一个虚拟页面目录，以防客户机读取它先前映射 A 的位置。 VMM 捕获此读取访问，而不是说 A 映射到 B，它返回给客户机 A 映射到 C。

> 27.3.3 蛮力虚拟化虚拟内存
> 
> 一种简单的方法是确保所有来宾尝试访问地址转换硬件陷阱到 VMM，在该 VMM 中可以正确模拟此类操作。它必须确保对页目录和页表的访问也被捕获。这可以通过使用传统的基于页面的保护来保护这些内存中的结构来完成。VMM 可以这样做，因为它可以定位页目录，因为它的基地址在 CR3 中，并且 VMM 接收对 CR3 的任何更改的控制；它可以定位页表，因为它们的基地址在页目录中。

在 PowerPC 上，您没有英特尔的页面目录的硬件表遍历。TLB 的每次修改都是由一条指令引起的，通常来自内核内存管理器。同样，一个简单的想法是捕获每个访客对 TLB 的访问（例如，设置一些东西以在访客执行`tlbwe`指令时导致 VM 退出；注意：`tlbwe`将条目写入 TLB）。一旦进入 VMM，管理程序就会对捕获指令进行解码，并模拟其行为，但它不是将 A 映射到 B，而是将 A 映射到 C，直接进入 TLB。同样，VMM 必须维护一个*虚拟 TLB*，以防客户操作系统想要检查 TLB 中的内容，并返回它认为之前放入 TLB 中的内容。

总而言之，虽然一些硬件特性有助于虚拟化来宾物理内存，**但通常由 VMM 来管理有效的来宾-物理到主机-物理内存映射**。

# windows - 网络关闭时重新启动 LAN 连接

> ID：14314517
> 
> 赞同：1
> 
> 时间：2013-01-14T07:14:04.653
> 
> 标签：windows

当网络关闭时，有人可以指导我创建一个脚本来重新启动 LAN 连接（即：禁用然后启用）吗？

我想大致的思路，就是ping Google，然后如果连接`RTO`超过3-5次，则重启局域网。也许像这样？

```
ping www.google.com -t
net stop netman
net start netman 
```

如何将其放入脚本中？

抱歉忘记了，操作系统是win xp

# php - PHP中的mysql_fetch_assoc（）错误

> ID：14314520
> 
> 赞同：0
> 
> 时间：2013-01-14T07:14:24.080
> 
> 标签：php, html, mysql

我正在运行以下代码，但它给了我以下错误。我已经阅读了几篇关于SO的文章，仍然没有用。我得到的错误是：

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/xyz/public_html/13/beta/signup.php on line 49
Warning: Cannot modify header information - headers already sent by (output started at /home/xyz/public_html/13/beta/signup.php:49) in /home/xyz/public_html/13/beta/signup.php on line 69 
```

我的`PHP`脚本：（我已经标记了`49`&行`69`）

```
if(isset($_POST['submit'])&&$_POST['submit']=='Login')
{
    $err = array();
    if(!$_POST['username'] || !$_POST['pass'])
        $err[] = 'All the fields must be filled in!';

    if(!count($err))
    {
        $_POST['username'] = mysql_real_escape_string($_POST['username']);
        $_POST['pass'] = mysql_real_escape_string($_POST['pass']);
        $_POST['remember'] = (int)$_POST['remember'];

        $row = mysql_fetch_assoc(mysql_query("SELECT id,user,email,clg FROM users WHERE user='{$_POST['username']}' AND pass='".md5($_POST['pass'])."'"));-->line 49

        if($row['user'])
        {

            $_SESSION['user']=$row['user'];
            $_SESSION['id'] = $row['id'];
            $_SESSION['clg'] = $row['clg'];
            $_SESSION['email'] = $row['email'];
            $_SESSION['remember'] = $_POST['remember'];
            setcookie('tcookie',$_POST['remember']);
            header("Location: index.php");
            exit;
        }
        else $err[]='Wrong username and/or password!';
    }

    if($err)
    $_SESSION['msg']['login-err'] = implode('<br />',$err);

    header("Location: signup.php");-->line 69
    exit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T07:17:33.930

您的`mysql_query`函数返回错误，而不是结果。尝试：

```
$res = mysql_query("SELECT id,user,email,clg FROM users WHERE user='{$_POST['username']}' AND pass='".md5($_POST['pass'])."'");
if ($res === false) {
    echo mysql_error();
    die;
}
$row = mysql_fetch_assoc($res); 
```

这将帮助您获取错误信息。

一旦该错误消失，您可能会发现“标头已发送错误”也消失了，这是已经打印到输出的结果（可能是错误消息）。

* * *

**更新**：对于您的“未选择数据库”错误，您需要在使用`mysql_select_db($databasename);`之前使用`mysql_query()`. 否则，mysql 不知道您要查询哪个数据库。

此外，您可能想考虑使用 PDO，它是访问 MySQL 数据库的另一种方式，而且它更安全且更易于使用 (IMO)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:25:53.260

在执行 mysql_query 之前检查您是否正确执行了 mysql_connect 并与 MySQL 服务器建立了有效连接。顺便说一句，Fabian Tamp 对 PDO 的看法是正确的。mysqli 扩展也比 mysql 更好。它更快，更稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:19:54.467

尝试删除第 69 行冒号后的空格。

# sql - 了解 UNION 和 ORDER BY 之间的关系？

> ID：14314524
> 
> 赞同：-1
> 
> 时间：2013-01-14T07:14:55.760
> 
> 标签：sql, sql-order-by, union

这里有 2 个查询 -

```
select * --1
from Employee --2
where HireDate < '7/1/2001' --3
order by HireDate --4

--5 gap   

select top(2) * --6
from Employee --7
where HireDate >= '7/1/2001' --8
order by HireDate --9 
```

我想对他们做一个 UNION。当我将 UNION 放入 5 时，为什么会出现错误？

当我删除 4 并将 UNION 放入 5 时，我得到了一个结果，但与我单独执行两个查询时不同。你能告诉我为什么会这样吗？

为了使这项工作正常，我必须删除 4，创建两个查询的派生表，将 4 放在 9 之后，然后对两个派生表执行 UNION。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:23:50.687

删除`ORDER BY`之前的`UNION`. （*它会导致语法错误*）

```
select *
from Employee 
where HireDate < '7/1/2001' 
UNION
select top(2) * 
from Employee 
where HireDate >= '7/1/2001' 
order by HireDate 
```

该`ORDER BY`条款发生在`UNION`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:27:26.620

```
This will help you I guess for your question 
```

[在 SQL Server 中结合 ORDER BY 和 UNION](https://stackoverflow.com/questions/5551064/combining-order-by-and-union-in-sql-server)

```
select first.Id, first.Name 
from (
    select top 1 * 
    from Locations 
    order by Id) first
union all
select last.Id, last.Name 
from (
    select top 1 * 
    from Locations 
    order by Id desc) last 
```

# java - Apache Wicket 中的黑白交互两种形式

> ID：14314525
> 
> 赞同：0
> 
> 时间：2013-01-14T07:15:02.453
> 
> 标签：java, html, wicket-1.5

这听起来可能有点奇怪，我在一个 HTML 页面中有两个表单，它们具有不同的检票口 ID。当用户单击一个按钮时，例如（保存）是否有可能将两个表单中的数据保存在一起。我不能保留一个表格。我是检票口的新手，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:34:38.467

您可以将这两个表单添加到第三个表单，因为 Wicket 支持嵌套表单。这样，您的按钮可以附加到提交所有表单数据的外部表单。

# android - OpenCV ORB 特性

> ID：14314526
> 
> 赞同：4
> 
> 时间：2013-01-14T07:15:12.717
> 
> 标签：android, opencv, machine-learning, computer-vision

我正在使用 ORB 特征检测器和提取器从灰度图像列表中获取特征。问题是如果我尝试多次检测\提取它，我会从同一张图像中获得不同的特征。所以以后不可能用它们来检测。

编码：

```
bmp=BitmapFactory.decodeResource(getResources(),R.drawable.t1);
Utils.bitmapToMat(bmp, mat);
FeatureDetector detector = FeatureDetector.create(FeatureDetector.ORB);
detector.detect(mat, keypoints);
DescriptorExtractor extractor = DescriptorExtractor.create(DescriptorExtractor.ORB);
extractor.compute(mat, keypoints, features); 
```

也许有人对此有所了解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:39:20.623

这不应该是这种情况..您应该获得一致的性能。但是，我正在共享我的代码以在两个图像上使用 Orb 特征检测器以及 Orb Descriptor Extractor。您可以使用任何匹配器来匹配它们。希望这可以帮助你...

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/flann/flann.hpp>
#include <opencv2/legacy/legacy.hpp>
#include <vector>

using namespace cv;
using namespace std;

int main()
{
    Mat image1,image2;
    imageA = imread("C:\\lena.jpg",0);
    imageB = imread("C:\\lena1.bmp",0);

    vector<KeyPoint> keypointsA,keypointsB;
    Mat descriptorsA,descriptorsB;

    std::vector<DMatch> matches;

    OrbFeatureDetector detector;

    OrbDescriptorExtractor extractor;

    BruteForceMatcher<Hamming> matcher;

    detector.detect(imageA,keypointsA);
    detector.detect(imageB,keypointsB);

    extractor.compute(imageA,keypointsA,descriptorsA);
    extractor.compute(imageB,keypointsB,descriptorsB);

    return 0;
 } 
```

# php - 仅在管理订单详细信息中显示产品属性值 magento

> ID：14314533
> 
> 赞同：0
> 
> 时间：2013-01-14T07:16:21.727
> 
> 标签：php, zend-framework, magento, attributes, admin

嗨，我需要在**管理员中显示****产品****属性****值****订单****详细信息****部分**，我不想在前端向用户显示此属性，有什么办法可以做到这一点

 ******谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:54:14.620

我找到了解决方案。这是我能够在 Magento 管理订单视图中显示自定义属性值的代码：

```
<?php
$product = Mage::getModel('catalog/product')
    ->loadByAttribute('sku', $_item->getSku(), array('x'));
echo $product->getX(); 
```

将此代码放在您的属性代码`app/design/adminhtml/default/default/templates/sales/items/column/name.phtml`所在`x`的位置 - 将其替换为您的属性代码。在 admin 中，属性属性应该是：

```
Values Required = no
Visible on Product View Page on Front-end = no
Scope = global 
```******

# ios - Core Data 后台保存不起作用

> ID：14314534
> 
> 赞同：0
> 
> 时间：2013-01-14T07:16:22.303
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我更改了我的数据（按 onBackgroundChange）并保存了它。我没有任何错误。在我的日志中，我看到“ *_*更改成功”状态。

```
-(IBAction) onBackgroundChange:(id)sender
{
 AppDelegate *app = [[UIApplication sharedApplication] delegate];

 NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
 context.parentContext = app.managedObjectContext;
 [context performBlock:^
 {
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Thread"];

    NSArray *array = [app.managedObjectContext executeFetchRequest:request error:nil];

    if (array.count > 0)
    {
        Thread *thread = [array objectAtIndex:0];
        thread.threadInfo = @"background thread";
        NSLog(@"___ change successfully");
    }
    if (![context save:nil])
    {
        NSLog(@"thread save error");
    }
 }];
} 
```

然后我停止了一个程序并再次运行。我的 onDescription 日志是

```
__ thread: main thread. 
```

怎么了？

```
-(IBAction) onDescription:(id)sender
{
 AppDelegate *app = [[UIApplication sharedApplication] delegate];
 NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Thread"];

 NSArray *array = [app.managedObjectContext executeFetchRequest:request error:nil];

 if (array.count > 0)
 {
    Thread *thread = [array objectAtIndex:0];
    NSLog(@"__ thread: %@", thread.threadInfo);
 }
} 
```

# linux - `[stack]`、`[vdso]` 和 `[vsyscall]` mmap 是从哪里来的？

> ID：14314535
> 
> 赞同：4
> 
> 时间：2013-01-14T07:16:37.223
> 
> 标签：linux, linux-kernel, x86, vdso

考虑以下针对 Linux x86_64 的程序：

**信息系统：**

```
 .global _start
    .text
_start:
    jmp _start 
```

这基本上是一个无限循环。

如果我链接并剥离它，我会得到一个 ELF 可执行文件：

```
$ gcc -nostdlib inf.s

$ ./a.out &

[1] 15862

$ cat /proc/15862/maps

00400000-00401000 r-xp 00000000 fc:00 11404632           a.out
7fffacdb8000-7fffacdd9000 rwxp 00000000 00:00 0          [stack]
7fffacddd000-7fffacdde000 r-xp 00000000 00:00 0          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0  [vsyscall] 
```

在 ELF 可执行文件中，第一个程序头`LOAD`包含占上述 mmap (a.out) 中第一个条目的映射。（即使我剥离了所有内容，但此标头和代码观察到相同的映射。） `execve(2)`调用 ELF 处理程序，在`fs/binfmt_elf.c`该处理程序中读取程序标头并在文件上调用 mmap。

我不明白的是其他三个来自哪里（堆栈，vdso，vsyscall）。ELF 文件中没有提到它们，因此 Linux 内核必须默认设置这三个“匿名”或“特殊”映射。

我的问题是 Linux 内核在内核代码中的什么位置（或如何）创建这三个映射？它们是跨 execve 继承的吗？我似乎看不到`fs/exec.c`它们是在哪里创建的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:17:59.687

它们是由内核在将文件加载到内存中以运行它时自动创建的。

由于内核是 32 位还是 64 位`[vdso]`，`[vsyscall]`有各种各样的函数名称定义和重新定义为宏，但一些相关的例程包括：

*   `load_elf_binary`在`fs/binfmt_elf.c`其中调用`arch_setup_additional_pages`
*   `arch_setup_additional_pages`在`arch/x86/vdso/vma.c`
*   `arch_setup_additional_pages`在`arch/x86/vdso/vdso32-setup.c`

`[stack]`映射不是特定于 ELF 的，而是由代码在调用格式特定加载器之前调用的`__bprm_mm_init`in `fs/exec.c`which创建的。`execve`

# android - 片段在重新启动时错过广播

> ID：14314536
> 
> 赞同：2
> 
> 时间：2013-01-14T07:17:19.873
> 
> 标签：android, android-intent, android-orientation, android-dialogfragment, android-broadcast

在 Android 上，我实现了一个类`AsyncTaskWithProgress`，该类将在执行任务的后台工作时显示进度对话框：

```
public abstract class AsyncTaskWithProgress<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {

private final FragmentActivity activity;
private final String action;
private final String title;
private final String message;
private final int icon;

public AsyncTaskWithProgress(FragmentActivity activity, String title, String message, int icon) {
    this.activity = activity;
    this.title = title;
    this.message = message;
    this.icon = icon;
    this.action = "" + hashCode();
}

@Override
protected final void onPreExecute() {
    DialogFragment fragment = ProgressDialogFragment.getInstance(action, title, message, icon);
    fragment.show(activity.getSupportFragmentManager(), "dialog");
    actualOnPreExecute();
}

protected void actualOnPreExecute() {
}

protected final void onPostExecute(Result result) {
    actualOnPostExecute(result);
    context.sendBroadcast(new Intent(action));
}

protected void actualOnPostExecute(Result result) {
}

} 
```

我在收到广播后立即`ProgressDialogFagment`注册并取消对话 - 摘录：`BroadcastReceiver`

```
 public static Dialog getDialog(Activity activity, final String action, String title, String message, int icon,
        SerializableOnClickListener cancelListener) {
    final ProgressDialog dialog = new ProgressDialog(activity);
    dialog.setIndeterminate(true);
    dialog.setOwnerActivity(activity);
    dialog.setTitle(title);
    dialog.setMessage(message);
    if (cancelListener != null) {
        dialog.setButton(ProgressDialog.BUTTON_POSITIVE, "Cancel", cancelListener);
    }
    if (icon != MathUtils.NOT_AN_INT) {
        dialog.setIcon(icon);
    }

    BroadcastReceiver dismissReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            dialog.dismiss();
            context.unregisterReceiver(this);
            Log.d(getClass().getSimpleName(), "Dialog dismissed");
        }
    };
    context.registerReceiver(dismissReceiver, new IntentFilter(action));

    return dialog;
} 
```

这通常有效。但是，每隔一段时间，对话不会被取消，并且似乎涉及方向更改。

我的猜测是，在方向更改期间，对话框片段被破坏并重新实例化。如果 AsyncTask 发送其“完成！” 在 Fragment 被销毁后重新实例化之前进行广播，Fragment 错过了广播，因此永远不会关闭。

我的猜测对吗？如何以更可靠的方式实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:02:38.457

由于您使用的是片段，因此我建议您改用[setRetainInstance()](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)来制作一个在配置更改中持续存在的片段。您可以从该片段注册广播接收器，显示或隐藏进度等（请注意，片段不需要对用户可见。）

另一种不使用片段的方法是为该意图添加一个独立的 BroadcastReceiver 类（在您的清单中注册），并将一个值保存到首选项以提醒您的应用程序已收到广播。

事实上，您可以跳过独立的 BroadcastReceiver，只需将一个值保存到您的 AsyncTaskWithProgress 中的首选项中，该值指示操作的当前状态，例如 Status.LOADING、Status.LOADED、Status.CANCELLED 等，并在 onCreate( ）。但是，我认为使用 setRetainInstance() 是最好的方法，因为您已经在使用片段。

# c# - 如何通过查询字符串传递异常对象

> ID：14314537
> 
> 赞同：0
> 
> 时间：2013-01-14T07:17:21.763
> 
> 标签：c#, asp.net, object, global-asax

```
void Application_Error(object sender, EventArgs e)
{   
    Exception objException = Server.GetLastError().GetBaseException();        
    Server.Transfer("~/ErrorPage/Error_Page.aspx?objException=" 
                        + objException,true);
}

//Error page.aspx page load
protected void Page_Load(object sender, EventArgs e)
{
    object objException = Request.QueryString["objException"];
    //Write exception in log file.
    WriteApplicationErrorLog(objException.Message, objException.StackTrace);
} 
```

我`Global.asax`在应用程序级别得到一个异常对象。我需要将此异常对象传递给 page `errorpage.aspx`，并将其写入日志文件。

我正在使用上面的代码，但得到异常消息，而不是对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:21:00.747

您可以创建一个类并将异常对象传递给它以记录它，但是如果您想以任何方式将其传递给错误页面，那么您可以将异常对象存储在会话中并在错误页面中访问它。

```
void Application_Error(object sender, EventArgs e)
{    
    Session["YourException"] =  Server.GetLastError().GetBaseException();
    Server.Transfer("~/ErrorPage/Error_Page.aspx?objException=" 
                        + objException,true);
}

protected void Page_Load(object sender, EventArgs e)
{
    Exception objException = (Exception ) Session["YourException"];

    //Write exception in log file
    WriteApplicationErrorLog(objException.Message, objException.StackTrace);
} 
```

# php - 用于使用星号的 php 编程

> ID：14314541
> 
> 赞同：0
> 
> 时间：2013-01-14T07:17:34.357
> 
> 标签：php, asterisk, asteriskami

我在 AMI 中编写了一些 php 代码来使用星号命令。

我不知道[Asterisk Manager Interface (AMI)](http://www.the-asterisk-book.com/unstable/asterisk-manager-api.html)和[Asterisk Gateway Interface (AGI)](http://www.asterisk.org/docs/asterisk/trunk/applications/agi)之间有什么区别，而女巫一个更适合我的计划。

我打算打电话给聚会用户，他们的号码是我的网络面板。我们有一些接线员，他们可以通过客户端软电话通过点击他们的号码呼叫当事人用户，因此他们仅限于拨打列出的号码（并且不能拨打其他号码）。

如何设置这些权限？以及如何通过 php 将调用的记录存储在星号（IVR 录制的语音）中。我应该使用[Asterisk Manager Interface (AMI)](http://www.the-asterisk-book.com/unstable/asterisk-manager-api.html)还是[Asterisk Gateway Interface (AGI)](http://www.asterisk.org/docs/asterisk/trunk/applications/agi)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:16:41.637

好吧，AGI 和 AMI 是两个完全不同的东西。AGI 非常像一个脚本 API，使您能够从拨号方案中执行 3rd 方脚本（它可以做的更多，但这是一般的想法）。AMI 是一个 TCP 服务器套接字，允许您在 TCP 客户端程序中进行实时呼叫控制和事件。

大多数系统将使用两者的混合物，以促进解决方案。例如，在您的情况下，您将使用 AMI 发起出站呼叫，而您将使用 AGI 来执行拨号计划逻辑。

AMI 配置由 /etc/asterisk/manager.conf 文件管理，或者如果您使用任何基于 FreePBX 的发行版（Elastix、TrixBox、PIAF、FreePBX Distro），您需要使用的文件称为 /etc/星号/manager_custom.conf。

[你可以在我的个人博客http://www.simionovich.com](http://www.simionovich.com)上找到关于 Asterisk AGI 和 Asterisk AMI 的更多信息——或者如果你把我的名字放到谷歌中（我知道，这是高度自我推销的）——你会发现多篇论文以及我多年来就这个主题所做的演讲。

可以从以下链接获得其他初步信息：

*   [http://www.packtpub.com/article/primer-to-agi-asterisk-gateway-interface](http://www.packtpub.com/article/primer-to-agi-asterisk-gateway-interface)
*   [http://www.cs.tau.ac.il/telux/lecture-notes/Asterisk_Open_Source_PBX-Telux_Presentation.pdf](http://www.cs.tau.ac.il/telux/lecture-notes/Asterisk_Open_Source_PBX-Telux_Presentation.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:49:53.637

如果您想拨出，那么 AMI 适合您（在 Asterisk 用语中称为 Originate）。有许多可用的库可以让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:55:37.307

使用 Mixmonitor 命令进行通话录音

[http://www.voip-info.org/wiki/view/MixMonitor](http://www.voip-info.org/wiki/view/MixMonitor)

或 EAGI

[http://www.voip-info.org/wiki/view/Asterisk+EAGI](http://www.voip-info.org/wiki/view/Asterisk+EAGI)

“权限”可以通过拨号方案设置 [http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Introduction](http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Introduction)

或使用您的 agi/fastagi 脚本。

# javascript - 添加删除 div 点击下一个和上一个

> ID：14314542
> 
> 赞同：0
> 
> 时间：2013-01-14T07:17:41.117
> 
> 标签：javascript, html, onclick, hide, show

我有多个 DIV 需要隐藏并且一次只显示一个 div。使用`OnClick`事件 on `Next`and `Previous`，我希望下一个 div 或上一个 div 以幻灯片效果显示。

```
<div id="box_element_1">
Content Show Here
</div>

<div id="box_element_2">
Content Show Here
</div>

<div id="box_element_3">
Content Show Here
</div>

<div id="box_element_4">
Content Show Here
</div>

<div id="box_element_5">
Content Show Here
</div>

<div id="box_element_6">
Content Show Here
</div>

<div id="box_element_7">
Content Show Here
</div>

<div id="box_element_8">
Content Show Here
</div>

<div id="box_element_9">
Content Show Here
</div>

<div id="box_element_10">
Content Show Here
</div>

<a href="#">Next</a>
<a href="#">Previous</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:24:12.543

你需要学习[.fadeIn()](http://api.jquery.com/fadeIn/)和[.fadeOut()](http://api.jquery.com/fadeOut/)。没有人会为你编写代码。从给出的链接中学习实现您的目标。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:49:33.957

您可以在单击事件上使用 jquery .show() 和 .hide() 和 slideUp() ：

```
 $('#divs').not('[id=box_element_'+index+']').hide();
    $('#box_element_'+index).show().delay(500).slideUp(1000); 
```

# mysql - 如果成功，比较文件和复制替换

> ID：14314545
> 
> 赞同：0
> 
> 时间：2013-01-14T07:18:01.047
> 
> 标签：mysql, linux, ubuntu, size, backup

我编写了一个 shell 脚本来创建我的 MySQL 数据库的备份。该脚本执行以下功能：

1.  创建 MySQL 数据库的备份
2.  压缩备份
3.  将备份复制到远程服务器
4.  发送显示备份大小的电子邮件
5.  删除源服务器上不需要的任何剩余文件。

脚本没有做什么，但我需要它做什么：

1.  根据远程服务器上的现有备份检查新创建的备份
2.  如果新备份小于旧备份，请通过电子邮件/短信发送警告通知。
3.  如果新备份大于或等于旧备份，则将远程服务器上的旧备份替换为新备份，然后发送第 4 点所述的成功通知。

谢谢，非常感谢这里的任何帮助

正在使用的操作系统：

源服务器：Ubuntu 12.04.1 LTS

目标服务器：Fedora 13 版（Goddard）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:23:49.293

我不会依赖文件大小。使用日期戳并保留一组滚动备份，以便您始终拥有最近 5 天的备份。rsync 是我会使用的。

# c# - 为 Window 设置 MaxHeight 时使用棱镜区域的 KeyNotFound 异常

> ID：14314546
> 
> 赞同：0
> 
> 时间：2013-01-14T07:18:06.720
> 
> 标签：c#, wpf, prism

我在我的一个 WPF 应用程序中使用 Prism 区域。一旦我在其构造函数中设置了窗口的最大高度，如此处所示， `this.MaxHeight = SystemParameters.MaximizedPrimaryScreenHeight;` 那么代码行 `IRegion pageRegion = _regionManager.Regions["PageLayout"];` 开始抛出 KeyNotFound 异常，但是当我注释掉设置的行时`MaxHeight`，一切都重新开始工作。

解决这种奇怪行为的任何指针？

# android - 一个空图像 url 会阻止显示其他内容

> ID：14314547
> 
> 赞同：0
> 
> 时间：2013-01-14T07:18:34.800
> 
> 标签：android, sqlite, android-widget, bitmap

我能够从 sqlite 数据库中获取数据。但是，当我的图像 url 为空时，它会阻止我的其他内容显示。

```
try{
                name.setText(nameString);
                school.setText(schoolString);
                psupervisor.setText(info.getPsupervisor());
                pdate.setText(info.getPdate());
                a.setChecked(Boolean.parseBoolean(info.getPtick1()));
                b.setChecked(Boolean.parseBoolean(info.getPtick2()));
                c.setChecked(Boolean.parseBoolean(info.getPtick3()));
                pcomment1.setText(info.getPcomment1());
                psignature1.setImageBitmap(resizeSignatureBitmap(info.getPsignature1()));
                pcomment2.setText(info.getPcomment2());
                psignature2.setImageBitmap(resizeSignatureBitmap(info.getPsignature2()));
                pdate2.setText(info.getPdate2());
                d.setChecked(Boolean.parseBoolean(info.getPtick4()));
                e.setChecked(Boolean.parseBoolean(info.getPtick5()));
                f.setChecked(Boolean.parseBoolean(info.getPtick6()));
                pcomment3.setText(info.getPcomment3());
                psignature3.setImageBitmap(resizeSignatureBitmap(info.getPsignature3()));
                pcomment4.setText(info.getPcomment4());
                psignature4.setImageBitmap(resizeSignatureBitmap(info.getPsignature4()));
                Log.d("PREPOST: ", log2);
                db.close();
            }
            catch(Exception ex){}

        } 
```

例如，如果 psignature2 为 null，则不会显示从 pdate2 到 pcomment4 的项目。*由于 try-catch 没有崩溃，因此我发现错误的原因很晚*

我调整位图分辨率的方法：

```
public Bitmap resizeSignatureBitmap(String imagePath){

     BitmapFactory.Options options = new BitmapFactory.Options();
    InputStream is = null;
    try {
            is = new FileInputStream(imagePath);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    BitmapFactory.decodeStream(is,null,options);
    try {
            is.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    try {
            is = new FileInputStream(imagePath);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    // here w and h are the desired width and height
    options.inSampleSize = Math.max(options.outWidth/w, options.outHeight/h);
    // bitmap is the resized bitmap
    Bitmap bitmap = BitmapFactory.decodeStream(is,null,options);
    is=null;
     return bitmap;
 } 
```

因此，任何人都可以建议我可以这样做的任何方法，即使有一个空图像 url，它也不会阻止其他图像的显示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:26:03.010

您可以在`resizeSignatureBitmap`最后应用检查以检查`bitmap`要返回的天气`null`。如果它`null`你可以返回一些默认位图。

或者您可以简单地将图像设置在单独的`try catch blocks`.

# c# - MS SQL 服务器中的文件大小限制

> ID：14314548
> 
> 赞同：0
> 
> 时间：2013-01-14T07:18:36.830
> 
> 标签：c#, asp.net, sql-server

我正在开发 DMS Web 应用程序。我能够上传数据库中的文件。但问题是当我上传一个大小为 5.61 MB 的文件以及其他一些小于 50KB 的文件时，当我尝试通过网格视图（选择的索引，使用链接按钮）访问该文件时，我收到一条错误消息，提示“加载页面时连接已重置”。我附上截图。图 1) 当重文件未加载到数据库中时。在这里我没有遇到任何问题，所需的文件在相应的应用程序中打开（ms word，exel）

图 2) 在数据库中加载重文件时。在这里，当我单击网格中的 12（这是一个沉重的文件）时，我得到图像三

图 3) 当我尝试访问我添加的这个重文件时

现在，如果我单击任何其他文件以查看并从数据库中获取。我得到与图 3 相同的页面。为了上传具有大 MB 大小的文件，我将以下行放在 web.config 中。

```
<httpRuntime executionTimeout="240" maxRequestLength="20480" useFullyQualifiedRedirectUrl="false" minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="100" enableVersionHeader="true"/> 
```

我正在使用上传的 ajax 文件来上传文件。如果需要任何其他信息，请告诉我。有什么建议么...

**由于我的声誉数量，我无法上传图片。**

# c# - 无法加载文件或程序集“App_Web_1btizmpz，

> ID：14314556
> 
> 赞同：1
> 
> 时间：2013-01-14T07:20:05.063
> 
> 标签：c#, asp.net, visual-studio-2010, wcf

我遇到以下错误：

`Could not load file or assembly 'App_Web_1btizmpz, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`

请指教。

输入以下 URL 时出现错误：

（我已经重新启动了IIS服务器，但仍然出现错误）

```
http://localhost:1110/CustomerManagement/Services/CustomersWcfDS.svc 
```

此处显示了设置的详细信息 -[远程服务器返回了意外响应：(405) Method Not Allowed](https://stackoverflow.com/questions/14313685/the-remote-server-returned-an-unexpected-response-405-method-not-allowed)

# java - 使用静态比较器对 BSTree 进行排序

> ID：14314564
> 
> 赞同：1
> 
> 时间：2013-01-14T07:20:54.897
> 
> 标签：java, generics, comparator

我在上课的地方有一些学校作业`BTree<E>`，现在我不得不做一个`BSTree<E>`扩展的课程`BTree<E>`。`BSTree`应该是一个排序的`BTree`.

老师建议使用一个`Comparator`可以按所需属性对所有元素进行排序的静态方法。他给了我们一些代码，但不太明白如何在类中使用静态泛型变量。我知道静态的作用，但我不知道如何解决这个问题。

这是我的代码：

```
public class BSTree<E> extends BTree<E>{

    List<E> duplicates;
    static Comparator<E> comp = new NasComparator<E>();

    private static class NasComparator<E extends Comparable> implements Comparator<E>{
        @Override
        public int compare(E o1, E o2){
            return o1.compareTo(o2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:51:16.167

可能有点跑题了，但我认为值得一看。

您的比较器根本没用。通常我们需要一个 Comparator，因为要比较的目标对象不是 Comparable，或者默认的比较不适合我们的使用。

但是，如果您只是简单地制作一个具有 E 限制的 Comparator 扩展 Comparable ，并且比较逻辑是 simple `return a.compareTo(b)`，那么为什么不直接比较呢？就像是

```
public class BSTree<E extends Comparable> extends BTree<E>{
} 
```

您的排序只需使用 Comparable#compareTo 方法。

如果您想选择性地让用户提供 Comparator，请参考 TreeMap 中的方式。基本思想是，如果提供了比较器，则使用比较器，如果没有，则将条目转换为 Comparable，然后进行比较。

* * *

如果你坚持使用 Comparator （这就是你在评论中提到的，虽然我不明白背后的原因），因为你需要你的元素是`Comparable`，所以你需要把这个限制放在你的泛型类型参数中，并且只需制作一个比较器来比较“可比较”。

```
public class BSTree<E extends Comparable> extends BTree<E>{

    static Comparator<Comparable> comp = new ComparableComparator();

    private static class ComparableComparator implements Comparator<Comparable>{
        @Override
        public int compare(Comparable o1, Comparable o2){
            return o1.compareTo(o2);
        }
    }
} 
```

它看起来很奇怪，但这就是你所要求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:38:42.100

您的代码有点棘手，因为您定义了两个`E`：

*   一个 in `BSTree<E>`，静态变量`comp`使用：无法编译，因为`E`仅在实例级别知道并且不能在静态上下文中使用。
*   one in `NasComparator<E extends Comparable>`，其范围仅是那个嵌套类

我的理解是，您想根据存储在其中的项目的属性对列表进行排序。您不需要额外的类，并且可以使用比较器。想象一下，您想根据其属性字段对某些 Item 进行排序，您可以这样做：

```
class Item {
    String property;
}

BSTree<Item> tree = ...;
tree.sort(new Comparator<Item> () {
    public int compare(Item o1, Item o2) {
        //you should handle the null case
        return o1.property.compareTo(o2.property);
    }
} 
```

在您的 BSTree 中，您需要使用提供的比较器来实现该排序操作。

现在，您可以将比较器声明为静态变量，以便在需要时能够重用它。

# javascript - 循环调用中的问题

> ID：14314581
> 
> 赞同：3
> 
> 时间：2013-01-14T07:22:52.753
> 
> 标签：javascript, html

我正在使用 JavaScript。我有循环调用的问题。
我的代码是：

这是我的数组

```
picArray = []; // Have tried with this too var picArray = new Array(); 
```

这是我的 onClick 功能：

```
handler:function(){
    for(var i = 1; i<picArray.length; i++) {
        alert(picArray[i]);
    }
} 
```

这是我打印数组中的值的循环。我的数组是：

```
var imgSource = document.getElementById(hellow).src;
picArray[hellow] = imgSource; 
```

该数组正在获取有关条件的数据。处理程序函数在单击名为 Upload 的按钮时调用。问题是当我按下上传按钮时，它会打印正确的值并保持按下状态并再次打印值。我的代码中是否有任何错误迫使循环打印值 2 次？
或者其他什么在做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:25:21.743

它看起来像一个关联数组（因为`hellow`它既是元素 ID 又是数组键），但您正在像索引数组一样访问它。

所以你应该这样做：

```
for (var key in picArray) {
    alert(picArray[key]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:28:06.057

您应该使用`event.preventDefault()`来阻止按钮触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:38:18.103

我认为您应该考虑在单击按钮时使用闭包函数，以保留外部上下文的范围。我的假设是问题的根源在于这样一个事实，即当您进入循环条件时，只有在循环完成时才能获得最终值。

这个问题可以通过创建一个函数并在循环的每次迭代中调用它来解决，同时传递`i`; 调用该函数将形成一个全新的执行上下文，其中 i 的值被保留，并且可以在该上下文中以任何方式使用，包括在返回的函数中。

因为您没有发布其余代码，所以我只认为这是问题所在。为了解决这个问题，这是我将在此上下文中使用的代码：

```
function handler(n) {
    return function() {
        alert( 'You clicked on: ' + n );
    };
}

for (var i = 0; i < picArray.length; ++i) {
    picArray[i].onclick = handler(i);
} 
```

...或另一种更优雅的方式：

```
for (var i = 0; i < picArray.length; ++i) {
    picArray[i].onclick = (function(n) {
        return function() {
            alert( 'You clicked on: ' + n );
        };
    })(i);
} 
```

# django - 如何使用 Django ManyToManyField 和 django admin

> ID：14314582
> 
> 赞同：0
> 
> 时间：2013-01-14T07:22:53.423
> 
> 标签：django, admin

我似乎在 Django 中遇到了 ManyToMany 关系的问题，我似乎没有得到正确的管理屏幕。我想为地址字段显示一个stackedinline，但是我只得到一个Dropbox。有人可以帮忙吗，下面是我的代码。

# 模型.py

```
class AddressType(models.Model):
    TypeCode = models.CharField('Address Type', max_length=50, blank=False, null = False)
    Description = models.TextField('Description')
    def __unicode__(self):
        return self.TypeCode

class Address(models.Model):
    AddressType = models.ForeignKey(AddressType)
    Address = models.TextField('Address', blank=False, null=False)

    def __unicode__(self):
        return self.AddressType.TypeCode

class BusinessPartner(models.Model):
    FullName = models.CharField('Full Name', max_length=50, blank=False, null=False)
    PartnerType = models.ForeignKey(PartnerType)
    Company = models.CharField('Company', max_length=100, blank=True, null=True)
    Website = models.URLField('Website', blank=True, null=True)
    Address = models.ManyToManyField(Address,through='AddressPartner_Assn')

    def __unicode__(self):
        if self.Company:
            return self.FullName + '-' + self.Company
        else:
            return self.FullName

class AddressPartner_Assn(models.Model):
    Address = models.ForeignKey(Address)
    BusinessPartner = models.ForeignKey(BusinessPartner)

Admins.py
=========
class AddressTypeAdmin(admin.ModelAdmin):
    list_display = ('TypeCode','Description')
    search_fields = ['TypeCode','Description']

class AddressAdmin(admin.ModelAdmin):
    list_display = ['Address']
    search_fields = ['Address']
    list_filter = ['AddressType']

class AddressInlineAdmin(admin.StackedInline):
    model = BusinessPartner.Address.through
    extra = 1

class BusinessPartnerAdmin(admin.ModelAdmin):
    list_display = ('__unicode__','FullName','PartnerType','Company')
    inlines = [AddressInlineAdmin,]
    search_fields = ['FullName','Company']
    list_filter = ('PartnerType',)
    raw_id_fields = ('PartnerType',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:22:05.150

由于您使用 through 参数来明确提到中间表，因此您必须将 AddressInlineAdmin 替换为

```
class AddressInlineAdmin(admin.StackedInline):
    model = AddressPartner_Assn
    extra = 1 
```

有关任何其他信息，请参阅[https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#working-with-many-to-many-intermediary-models](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#working-with-many-to-many-intermediary-models)

# embedded - PIC 18F87J50 USART 配置和 ISR 故障

> ID：14314583
> 
> 赞同：1
> 
> 时间：2013-01-14T07:22:58.833
> 
> 标签：embedded, pic, uart, c18, usart

我在使用 PIC 18F87J50 的项目中遇到问题，特别是在我与它的 2 个 USART 通道协调时。

有2个主要问题。

1.) 无法设置目标波特率：

我正在使用 Open1USART() 和 Open2USART() 函数来初始化我正在使用的两个 USART 通道。我希望它们都配置为 14,400 波特。这些函数有 2 个参数。第一个是配置 USART 的位字段（异步与同步模式、8 位与 9 位等）。第二个是配置 USART 波特率的 SPBRG 值（取决于系统时钟速率）。

我打电话给两个像：`Open1USART(USART_ASYNCH_MODE & USART_EIGHT_BIT & USART_BRGH_LOW & USART_RX_INT_ON & USART_TX_INT_OFF, 346);`

在我的设置中，SPBRG 的 346 似乎给了我 14,400 波特（在 O 型示波器上证实，一位的宽度约为 70us）。

问题是这只适用于 USART 2。在 USART 1 上，相同的 SPBRG 值给了我 57,600 的波特率。此外，在使用 SPBRG 值（并查看示波器时序以了解实际波特率影响）时，我看到了一些有趣的事情。

波特率随着我将 SPBRG 值从 0 增加而降低。SPBRG 为 87 给我 57,600 波特，173 -> 28,800 ......但它在大约 255 处重置。在 255 时，我的波特率约为 19,000。但是在 256 时，我的波特率非常高（~1,000,000）。然后，当我将 SPBRG 数字进一步向上移动时，波特率会越来越慢，但永远不会低于 19,000 波特标记，也永远不会一直下​​降到我需要的 14,400。

好的，所以我溢出了 SPBRG 字节，对吧？但是 USART 1 和 2 的配置方式完全相同，我可以在 USART 2 上使用 > 255 的 SPBRG 值。它们都具有相同的 BRGH 设置（低）和 BRG16 设置（高）。此外，根据这篇文章（[PIC18F2680 上的 UART 接收中没有触发中断](https://stackoverflow.com/questions/10116565/no-interrupts-being-triggered-in-uart-receive-on-pic18f2680)），似乎 TRISC6-7 是正确设置的重要位。我按照帖子的建议设置了这些（6 低，7 高）。

如果有帮助，我可以分享一些代码片段。

2.) ISR 不为每个传入字节触发：

我为 USART1 和 2 打开了 UART RX 中断。我没有以正确的波特率在 USART1 上说话，所以没有收到我的外围设备的回复。但是，在 USART2 上，我正在以 14,400 波特率说话，并且我的外围设备正在适当地回复（通过范围验证）。通过示波器，我可以看到我希望收到的所有 16 个字节，并且在线上的时序看起来很棒。但是，我的这个端口的 RX 中断只触发前 2 或 3 个字节。我需要连续接收 8 个字节才能知道外围设备正在回复什么......但我从来没有超过 2 或 3。

所以中断正在触发，但不是针对所有字节。

我知道我需要保持我的 ISR 非常短，以免错过下一个传入字节的中断，但即使我将 ISR 剥离到它的核心功能（删除调试打印输出等），我仍然只看到前 3 个字节。在示波器上，我可以看到前 3 个字节和其余字节之间没有区别（至少在位时序上没有）。前三个字节的值始终为 0xFF（这是预期的）。其余字节是不同的值，但这是我能看到的唯一区别，它并不能真正解释为什么没有 ISR 触发器。上面提到的另一个问题的链接当然似乎也与这个问题有关。但 ISR 正在触发，但并非一直如此。

您可以提供的任何帮助或见解将不胜感激，我将与我的客户再次核对，以确保我可以添加更多代码片段。

# jquery - Jquery：获取具有 id 和类的图像

> ID：14314585
> 
> 赞同：0
> 
> 时间：2013-01-14T07:23:06.947
> 
> 标签：jquery, sorting

我想通过 id like 和 class like 获取图像，我已经这样做了，但无法让它工作：

```
 Recency<input type="checkbox" class="checkbox order-by" id="order_dateDESC"/>   
    <a href="javascript:void(0)">
<img class="order-by order-by-img" id="order_dateASC" src="icons/up-arrow.png" width="8" height="7" /></a>       
<a href="javascript:void(0)">   
<img  class="order-by order-by-img desc" id="order_dateDESC" src="icons/down-arrow.png" width="8" height="7" /></a>

Popularity<input type="checkbox" class="checkbox order-by" id="order_popDESC"/>
<a href="javascript:void(0)">
<img class="order-by order-by-img" id="order_popASC" src="icons/up-arrow.png" width="8" height="7" /></a>
<a href="javascript:void(0)">
<img  class="order-by order-by-img desc" id="order_popDESC" src="icons/down-arrow.png" width="8" height="7" /></a>

<script>
 $('.order-by-img [id^="'+order_by.substring(0, 9)+'"]').toggle() ;
</script> 
```

当您单击复选框时，它会按默认顺序排序。当您单击向下或向上箭头时，它应该相应地排序，复选框正在工作。我无法管理的是切换图像。我该如何进行切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:24:36.403

删除空间：

```
$('.order-by-img[id^="'+order_by.substring(0, 9)+'"]').toggle() ; 
```

空间要求后代。

# android - Android MediaCodec - 将音频即时编码为 aac

> ID：14314589
> 
> 赞同：3
> 
> 时间：2013-01-14T07:23:32.597
> 
> 标签：android, encoding, aac

我正在尝试使用 Android 的[MediaCodec](http://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/MediaCodec.html)将原始音频数据编码为 aac。我通过了缺少很多的 Andoid 文档。我目前能够使用[AudioRecord](http://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/AudioRecord.html)录制音频并即时进行编码。

问题是生成的输出似乎无效。没有播放器可以播放，[MediaExtractor](http://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/MediaExtractor.html)也无法打开文件。后者可能是因为输出未包装到有效容器中。没有关于如何处理编码器的输入缓冲区大小的明确文档。所以我试图在我再次排队之前完全填充每个输入缓冲区但没有成功。我还尝试使用最后一个缓冲区提交 END_OF_STREAM_FLAG 也没有成功。

是否有人成功使用了 MediaEncoder 并可以提供一些有关如何正确使用它的信息？是否有可能生成像 mpeg4 这样的有效媒体容器？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T04:01:39.450

为它选择一个容器。我更喜欢广告。

将有效负载数据复制到对您的容器足够大的数组中，只需添加您的位即可。所以在网上搜索我的解决方案后，我做了一些片段

```
 profile =( configParams[0]>>3 )&0x1f;

    frequency_index = (this.configParams[0]&0x7) <<1 | (this.configParams[1]>>7) &0x1;

    channel_config = (this.configParams[1]>>3) &0xf;

    int finallength = encoded_length + 7;       
    ENCodedByteArray[0] = (byte) 0xff;
    ENCodedByteArray[1] = (byte) 0xf1;
    ENCodedByteArray[2] = (byte) ( ((profile - 1) << 6) + (frequency_index << 2) +(channel_config >> 2));
    ENCodedByteArray[3] = (byte) (((channel_config & 0x3) << 6) + (finallength >> 11));
    ENCodedByteArray[4] = (byte)( (finallength & 0x7ff) >> 3);
    ENCodedByteArray[5] = (byte) (((finallength & 7) << 5) + 0x1f) ;
    ENCodedByteArray[6] = (byte) 0xfc; 
```

使用类似的东西

```
 byte chunkADTS[]=new byte[info.size + 7];
            fillInADTSHeader(chunkADTS,info.size);
            outputBuffers[bR].get(chunkADTS,7,info.size);
            buffer.pushData(chunkADTS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:52:42.643

您可以使用 MediaCodec AAC 解码器再次解码原始数据。请务必按照[在 Android 上使用 MediaCodec API 解码 AAC中所述正确设置它](https://stackoverflow.com/questions/12942201/decoding-aac-using-mediacodec-api-on-android)

# java - Java中的色轮可提供N种等距颜色

> ID：14314593
> 
> 赞同：3
> 
> 时间：2013-01-14T07:24:03.650
> 
> 标签：java, colors, java-2d, color-wheel

我想创建一个函数来提供 N 等距 RGB 颜色。在这种情况下，我们如何定义“距离”？好吧，我不太确定，但我正在考虑使用[色轮](http://blog.worldlabel.com/wp-content/myfiles/2009/08/color-wheel.jpg)定义。

![色轮](../Images/49c2f7213055c89b7e34ad505658e9a4.png)

因此，如果我可以创建一个方法，例如

```
public Color colorForAngle(int theta) 
```

然后我就可以划分 360/N，然后提取出 N 种等距的颜色。那有意义吗？任何人都有更好的想法如何在Java中获得等距的颜色？内置的任何东西可能会有所帮助？

这里的重点是找到足够（或尽可能）不同的 N 种颜色。例如，如果 N 为 3，则颜色`[255, 0, 0], [0, 255, 0], and [0, 0, 255]`看起来尽可能远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:27:55.837

这听起来更适合使用[`HSV`](http://en.wikipedia.org/wiki/HSL_and_HSV)而不是`RGB`，因为从色谱的圆形表示中提取等距颜色将是微不足道的。

正如 Andrew 所说，您可以使用以下功能：[`Color.getHSBColor(H,S,B)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#getHSBColor%28float,%20float,%20float%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:49:18.210

这里重要的一点是没有确切的答案，不同的色彩空间有（稍微）不同的色轮。我认为用于此目的的“最佳”色彩空间将是[CIELAB ，如对](http://en.wikipedia.org/wiki/Lab_color_space)[Function for create colour](https://stackoverflow.com/questions/180/function-for-creating-color-wheels) Wheels的回答中所述，因为它旨在接近人类视觉。

但是，Java 没有对 CIELAB 的内置支持，因此您可以编写对它的支持，或者您可以说 HSB“足够好”（可能是这样），并按照其他答案中的说明使用 Color.getHSBColor。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T11:27:00.303

好吧，我不能说轮子，但很久以前我写了一个动画，在特定时间后我改变了颜色。主线：

```
 colorIndex++;  // A number between 0 and 100.
            if (colorIndex > 100)
               colorIndex = 0;
            float hue = colorIndex / 100.0F;  // Between 0.0F and 1.0F.
            display.setColor( Color.getHSBColor(hue,1,1) ); 
```

# c# - 获取应用程序中 AppDomain.CurrentDomain 对象的控制权

> ID：14314594
> 
> 赞同：1
> 
> 时间：2013-01-14T07:24:05.530
> 
> 标签：c#, .net, logging, appdomain, appdomainsetup

我需要将电流设置`AppDomain`为我创建的内容。

我想使用企业库`HandleException`方法记录我的应用程序异常。当我处理异常时，它会在日志表中插入一个日志，并设置没有意义的`AppDomainName`字段。`System.AppDomain.CurrentDomain.FriendlyName`

我想`FriendlyName`为我的应用程序拥有自己的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:33:59.673

您不能设置当前的应用程序域。

[AppDomain.FriendlyName](http://msdn.microsoft.com/en-us/library/system.appdomain.friendlyname.aspx)属性默认具有应用程序文件名的值（阅读备注部分）。您无法在默认应用程序域中更改此设置。

您可以更改的是可执行程序集的名称。您可以从项目的属性中更改它。然后你可以像这样使用它：

```
Assembly.GetEntryAssembly().GetName().Name 
```

它总是返回进程可执行程序集的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T14:48:14.533

重命名可执行文件时，Assembly.GetEntryAssembly().GetName().Name 保持不变。使用 Assembly.GetEntryAssembly().Location 作为可执行文件名。

# git - 如何重置为特定提交？

> ID：14314596
> 
> 赞同：11
> 
> 时间：2013-01-14T07:24:12.217
> 
> 标签：git, version-control, gerrit

当我执行“git log --oneline”时，我最近有以下提交......我想重置为“8ec2027”，我尝试了一些不起作用的 rebase 命令......执行此操作的确切命令是什么？

```
2503013 code: cs release 1.2.3.47
269ed14 code: Fixed below issues due to which 2nd client is not associating to GO
dca02a3 code: Donot allow the scan during WPS/EAPOL exchange.
b2fee57 code: MCC Adaptive Scheduler
6af29c4 code: Not able to connect more then 10 STA
150aacd code: Fix the Max Tx power value in 5G band and .ini support for 11h
8ec2027 Merge "code: cs release 1.2.3.46"
9015b60 Merge "code: Quarky Support on Prima"
...... 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T07:29:46.367

你想重置而不是变基。变基是重放提交的行为。重置正在使当前提交成为其他提交。

您需要先保存工作目录中的所有工作：

```
 git stash -u 
```

然后你会让你当前提交你想要的

```
git reset --hard 8ec2027 
```

或者，在您可以保存之前执行此操作之前的位置之后：

```
git branch -b temp HEAD@{1} 
```

请参阅 reflog 文档以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:42:58.537

可能这也适合你

1.  在 2503013 创建一个新分支（这会保存 8ec202 之后的更改）

2.  git reset --hard 8ec2027

# xamarin.ios - MonoTouch 和 TableView 数据绑定在回调上

> ID：14314599
> 
> 赞同：0
> 
> 时间：2013-01-14T07:24:29.830
> 
> 标签：xamarin.ios, xamarin

我有一个表格视图占据了我的 MainView 的一半。我的视图加载并向服务器发送一条消息以在线检索用户。在请求返回时，我想填充表格视图。我这样做是使用以下代码：

```
 void HandleGetUsersOnlineComplete (object sender, MessageReceivedEventArgs<WordyMessages.Users.UsersOnlineResponseMessage> e)
    {
        var source = new PlayerSource();
        source.SetData(e.Message.Users.ToList());

        Console.WriteLine ("GetUsersOnlineCompleted");

        this.InvokeOnMainThread ( () =>
                                 {
            PlayersTableView.Source = source;
            this.View.SetNeedsDisplay ();
        });
    } 
```

问题是这段代码被正确调用，大约在加载后 3 秒。但没有什么是显示。但是，如果我导航到另一个页面，然后返回主页。表格视图正确呈现。

UITableViewSource 中的断点仅在向后导航时被击中，而在使用上面的代码绑定数据时永远不会被击中。

我确定我只是缺少一些小东西。

提前致谢

// AnkMannen

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:30:58.460

您必须在设置源后调用 PlayersTableView.ReloadData()

# php - curl_exec() 不会返回响应

> ID：14314600
> 
> 赞同：0
> 
> 时间：2013-01-14T07:24:30.047
> 
> 标签：php, curl, portforwarding

嗨，我在客户端上有一段代码如下：

```
 <?php
      $curl = curl_init();
      // Set some options - we are passing in a useragent too here
      curl_setopt_array($curl, array(
      CURLOPT_RETURNTRANSFER => 1,
      CURLOPT_URL => 'http://xx.xx.xxx.xxx:9000/postpara.php', //xx.xx.xxx.xxx is the public ip
      CURLOPT_USERAGENT => 'Codular Sample cURL Request',
      CURLOPT_POST => 1,
      CURLOPT_POSTFIELDS => array(
           item1 => 'value',
           item2 => 'value2'
           )
       ));
      // Send the request & save response to $resp
      $resp = curl_exec($curl);
      // Close request to clear up some resources
      curl_close($curl);
      echo $resp;
?> 
```

我的服务器代码位于代理服务器后面，本地 ip =“192.168.12.23”。我已经完成了端口转发，公共 IP xx.xx.xxx.xxx:9000 正确指向了本地 ip。但是，我无法从此服务器代码中获得任何响应。服务器代码如下：

```
<?php 
   $items1 = $_POST["item1"];
   $items2 = $_POST["item2"];
   print($items1 . $items2);
?> 
```

我已经在另一台服务器上对此进行了测试，它给了我预期的输出。代理是否有任何问题？

# networking - DNS.GetHostEntry - 为什么它需要摆弄主机文件？

> ID：14314605
> 
> 赞同：1
> 
> 时间：2013-01-14T07:25:18.113
> 
> 标签：networking, dns, proxy, domain-name, hosts-file

我有一个 Windows 应用程序，其中调用了以下 C# 代码行

```
IPHostEntry connected = Dns.GetHostEntry("www.somedomain.com"); 
```

它在 99% 的组织中正常工作（即域名自动解析为 IP 地址），只有在 1% 的组织中它会抛出异常“No such host is known”。

使用浏览器导航到 www.somedomain.com 没有问题。然而，C# 行因上述异常而失败。

为了解决这个问题，我们不得不手动编辑用户 PC 上的本地主机文件以声明域-ip 映射。有人可以解释为什么需要这样做吗？（但不是在 99% 的情况下）。

PS真的是一个网络问题，我知道！只是在寻找（合理的）解释。

# c# - 将图片数组添加到MongoDB中

> ID：14314618
> 
> 赞同：0
> 
> 时间：2013-01-14T07:27:46.857
> 
> 标签：c#, mongodb

我在下面有一个 Mongodb 数据库结构，我想`list of picture`在结构中添加一个：

```
{
    "_id": "50d3dbce1292dd2e98af1dd1",
    "Name": "Bubba",
    "Address": "1111",
    "Loc": {
        "Lon": 11.0000,
        "Lat": 3.113005
    },
    "Pic" : [{"Name": "test1.jpg", "Size":"1000"}, {"Name": "test2.jpg", "Size":"2000"}],
    "LastModified": {
        "$date": "2012-12-21T03:47:26.535Z"
    }
} 
```

我的模型：

```
public class Test
    {
        [BsonId]
        public string Id { get; set; }
        public string Name { get; set; }
        public string Address { get; set; }
        public Location Loc { get; set; }
        public Picure Pic {get; set; }
        public DateTime LastModified { get; set; }
    }

    public class Location
    {
        public double Lon { get; set; }
        public double Lat {get; set;}
    }

    public class Picture
    {
        public string Name{ get; set;}
        public int Size {get; set;}
    } 
```

我对图片模型数组的设计是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:30:19.400

在您的文档`Pic`中是一个数组。因此，您应该将您`Pic`的财产声明为`List<Picture>`

```
public List<Picture> Pic {get; set; } 
```

您的json中也有错误：

```
{"Name", "test1.jpg", "Size":"1000"} 
```

但应该是

```
{"Name": "test1.jpg", "Size":"1000"} 
```

# android - 如何用水平线绘制 EditText？

> ID：14314619
> 
> 赞同：0
> 
> 时间：2013-01-14T07:27:50.683
> 
> 标签：android, android-edittext

因为我想创建一个记事本，我想用水平线编辑文本。请让我知道我需要从哪里开始？我用简单的 xml 布局创建了编辑文本，我也查看了一些示例，但无法理解它的概念。请让我如何用水平线绘制编辑文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:42:49.253

如果我理解正确，你想要一个`EditText`带边框的线，比如页脚和页眉？如果是这样，可能会重复：[如何更改 EditText 的边框颜色（未聚焦）？](https://stackoverflow.com/questions/9224560/how-to-change-the-border-colorun-focused-of-an-edittext)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T07:32:14.980

有一个 Android 记事本教程：http: [//developer.android.com/resources/tutorials/notepad/index.html](http://developer.android.com/resources/tutorials/notepad/index.html)

这将是一个很好的起点。

如果您尝试加载记事本文本，则需要在代码中执行此操作。就像是

```
 <EditText
     android:id="@+id/editor"
      .../> 
```

然后在代码中，

```
 String savedText = loadTextFromFile();
    EditText editor = (EditText)findViewById(R.id.editor);
    editor.setText(savedText); 
```

然后你只需要编写 loadTextFromFile() 方法来实际获取记事本文本。这与您在 Java 中执行的操作相同。

# java - 使用 Apache POI 设置日期格式

> ID：14314620
> 
> 赞同：16
> 
> 时间：2013-01-14T07:27:55.090
> 
> 标签：java, date, apache-poi

我想用 Apache POI 在 Excel 文件中以日期格式设置日期。该值将以这样的方式设置，以便在地址栏中显示为 mm/dd/YYYY，在单元格中显示为 dd-mmm（数字日期和月份缩写：01-Jan）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T07:57:30.403

您可以将 a`CellStyle`应用于需要填充的单元格。这是我过去工作的一些代码片段，它不是完整的，但显示了基本思想：

```
Row row = sheet.createRow(0);
Cell cell = row.createCell((short) 0);
cell.setCellType(Cell.CELL_TYPE_NUMERIC);

SimpleDateFormat datetemp = new SimpleDateFormat("yyyy-MM-dd");
Date cellValue = datetemp.parse("1994-01-01 12:00");
cell.setCellValue(cellValue);

//binds the style you need to the cell.
CellStyle dateCellStyle = wb.createCellStyle();
short df = wb.createDataFormat().getFormat("dd-mmm");
dateCellStyle.setDataFormat(df);
cell.setCellStyle(dateCellStyle); 
```

有关 JDK 中日期格式的更多信息，您应该阅读以下内容： http: [//docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# ruby-on-rails - 在 Rails 中安装 Rack 应用程序不起作用

> ID：14314623
> 
> 赞同：6
> 
> 时间：2013-01-14T07:28:33.730
> 
> 标签：ruby-on-rails, routing, rack

我正在尝试在 Rails 中安装机架应用程序，但它不工作。我已经尽可能地重新创建了我的问题的最简单版本。我正在使用 Ruby 1.9.3p327 和 Rails 3.2.11。

我首先使用`rails new problem_example`. 切换到problem_example 目录后，我可以访问我的rails 应用程序，`http://localhost:3000`并且生活很棒。

按照[Rack in Rails 3 Railscast](http://railscasts.com/episodes/222-rack-in-rails-3?view=asciicast)中的说明，我将以下内容添加到我的路线中：

```
ProblemExample::Application.routes.draw do
  root :to => proc { |env| [200, {}, ["Oh yeah!"]] }
end 
```

我还从公用文件夹中删除了 index.html 文件。如果我导航到`http://localhost:3000`，我会看到“哦，是的！” 输出到我的屏幕。

这是棘手的部分。如果我修改我的路线看起来像这样：

```
class SimpleRackApplication
  def call(env)
    [200, {'Content-Type' => 'text/plain'}, ["Oh no!"]]
  end
end

ProblemExample::Application.routes.draw do
  root :to => SimpleRackApplication
end 
```

我跑了`rails s`，我得到了这个严重的错误：

```
=> Booting WEBrick
=> Rails 3.2.11 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:181:in `default_controller_and_action': missing :controller (ArgumentError)
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1304:in `new'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1270:in `each'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1270:in `match'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:260:in `root'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:1317:in `root'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config/routes.rb:9:in `block in <top (required)>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config/routes.rb:8:in `<top (required)>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config/environment.rb:5:in `<top (required)>'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config.ru:3:in `require'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config.ru:3:in `block in <main>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config.ru:in `new'
    from /Users/landonschropp/Dropbox/Development/current/problem_example/config.ru:in `<main>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
    from /Users/landonschropp/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T08:29:18.953

哦，呵呵。您必须实例化 Rack 应用程序：

```
root :to => SimpleRackApplication.new 
```

# c - 如何在 sendfile 函数中防止 SIGPIPE

> ID：14314624
> 
> 赞同：2
> 
> 时间：2013-01-14T07:28:34.917
> 
> 标签：c, linux, sockets, signals

美好的一天，我有小型 http 服务器，我有线程池当前连接，当我在线程中发送文件时，我收到信号 SIGPIPE 并且我的服务器崩溃。部分代码：//在线程中：

```
 detail::create_headers(headers,stat_buf.st_size,mime_types::extension_to_type(extension.c_str()));
    if(detail::write_to_client(fd_client,headers,unicode_strlen(headers))!=-1)
    {
        while(offset!=stat_buf.st_size)
        {
            if(sendfile(fd_client,src,&offset,stat_buf.st_size)==-1)
            {
                DEBUG_MSG_FORMAT("sendfile error: %d",errno);
                break;
            }
        }
    }
```

//和 ：

```
 size_t write_to_client(int fd_client,const void *buf,size_t len)
{
    int optval = 1;
    setsockopt (fd_client, SOL_TCP, TCP_CORK, &optval, sizeof (int));
    size_t result = write(fd_client,buf,len);
    if(result==-1)
    {
        DEBUG_MSG_FORMAT("write error: %d",errno);
    }
    optval = 0;
    setsockopt (fd_client, SOL_TCP, TCP_CORK, &optval, sizeof (int));
                return result;
} 
```

我如何处理或防止线程中的 SIGPIPE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:30:50.927

> 我如何处理或防止线程中的 SIGPIPE？

至少三种方式：

*   使用`SO_NOSIGPIPE`套接字选项
*   将`MSG_NOSIGNAL`标志用于`send(2)`（Linux 特定）
*   忽略 sigpipe（使用`SIG_IGN`）或为它建立一个真正的处理程序

如果可能的话，我会选择第一个（它不是便携式的）。而不是信号，你会得到 -1 的回报`errno = EPIPE`。

# highcharts - 更改特定页面的高图表颜色

> ID：14314628
> 
> 赞同：0
> 
> 时间：2013-01-14T07:29:39.347
> 
> 标签：highcharts

我`highchart`在 3-4 个不同的页面中使用。我只是想改变`highchart`颜色。我用了

```
Highcharts.setOptions({
    colors: ['#f6921e', '#212060', '#ecd222', '#acacac']
   }); 
```

但它会改变所有页面中的 highchart 颜色。我只想在某些页面上更改 highchart 颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:26:59.590

Highcharts.setOptions 更改所有 highchart 对象的颜色，如 api 本身所述

> [http://api.highcharts.com/highcharts#Highcharts.setOptions](http://api.highcharts.com/highcharts#Highcharts.setOptions) ()

要更改特定图表的颜色，您应该只更新图表颜色选项。您可以通过以下代码片段实现此目的：

```
var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        colors: ['#f6921e', '#212060', '#ecd222', '#acacac'], // these colors will only be used for this highchart graph
        ...
} 
```

> jsfiddle 演示（highchart api 上给出的修改示例）：http: [//jsfiddle.net/25ye6/](http://jsfiddle.net/25ye6/)

# html - 使用css的不同颜色的线

> ID：14314633
> 
> 赞同：0
> 
> 时间：2013-01-14T07:29:56.807
> 
> 标签：html, css

我有一些想法做不同颜色的线

1.  将其用作图像（不好，因为我将在我的网站上使用它，它会增加 http 请求） ![在此处输入图像描述](../Images/cd77c317e81b4a5be056af3599d7ac2b.png)

2.  在 css 中定义 4 或 5 个类（`widht=50px,height=5px,color=somecolor`）并在 html 中使用这些类。（我可能需要使用超过 20 个 span，我不想增加 DOM 元素的数量）

谁能告诉我用css和html做不同颜色的线的其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:15:17.020

您可以使用 css3 来实现它。

将此 CSS 应用到您的 div

```
.multicolor
{
 height:5px;
 width:100%;
 background-image: -webkit-linear-gradient( left, red, orange, yellow, green, blue,indigo,violet, indigo, blue, green, yellow, orange, red );
 background-image: -moz-linear-gradient( left, red, orange, yellow, green, blue,indigo, violet, indigo, blue, green, yellow, orange,red );
 background-image: -o-linear-gradient( left, red, orange, yellow, green, blue,indigo, violet, indigo, blue, green, yellow, orange,red );
 background-image: -ms-linear-gradient( left, red, orange, yellow, green, blue,indigo, violet, indigo, blue, green, yellow, orange,red );
 background-image: -khtml-linear-gradient( left, red, orange, yellow, green, blue,indigo, violet, indigo, blue, green, yellow, orange,red );
 background-image: linear-gradient( left, red, orange, yellow, green, blue,indigo, violet, indigo, blue, green, yellow, orange,red );
} 
```

[JSfiddle 演示](http://jsfiddle.net/EMdVZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T03:29:39.290

您可以使用 :before 和 :after 伪元素。下面的示例显示了如何摆脱颜色接头处的渐变。

```
.line {
height: 11px;
background: #d1d2d4; 
position: relative;
&:before, &:after  {
    content: '';
    height: 11px;
    width: 50%;
    display: block;
}
&:before {
    background: linear-gradient(to right, blue 50%, green 50%);  
}
&:after {
    background: linear-gradient(to right, red 50%, violet 50%);
    position: absolute;
    top: 0;
    right: 0;  
} 
```

}

[https://codepen.io/nektobit/pen/wjOdww](https://codepen.io/nektobit/pen/wjOdww)

# c# - 防止在代码中使用 system.reflection

> ID：14314636
> 
> 赞同：2
> 
> 时间：2013-01-14T07:30:03.873
> 
> 标签：c#, asp.net, reflection

我编写了一些在运行时 C# 代码中编译成程序集的代码，并将其存储在 asp.net 的内存中。之后就可以执行这样的编译代码。

在运行时编译的代码由用户编写。它始终是从我创建的基类继承的一个类。问题是用户可以使用反射访问此基类中的私有字段和方法。所以我的问题是：有没有办法防止使用反射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:48:29.947

框架类库中有[ReflectionPermission属性，它通过 System.Reflection API 控制对非公共类型和成员的访问。](http://msdn.microsoft.com/en-us/library/system.security.permissions.reflectionpermission.aspx)如果您可以将此属性应用于您生成的程序集，您可以尝试查看它是否有效。

# c++ - 参数中的星号和与号

> ID：14314640
> 
> 赞同：20
> 
> 时间：2013-01-14T07:30:30.973
> 
> 标签：c++, pointers, reference, memory-address

我正在读一本关于二叉搜索树的书，出现了一些奇怪的东西。我在函数参数中遇到了以下声明。

```
BinaryNode * & t 
```

这是什么意思？的地址指针`t`？

* * *

对于上下文，这是我看到的代码。私有`insert`函数是公共`insert`函数的辅助函数，私有`insert`函数使用递归查找正确的插入位置。

```
class BST
{
public:
   void insert(const Comparable & item)

private:
   BinaryNode *root;
   struct BinaryNode
   {
       Comparable element;
       BinaryNode *left;
       BinaryNode *right;
       BinaryNode(const Comparable & theElement, BinaryNode *lt, BinaryNode *rt) : 
          element(theElement), left(lt), right(rt) {}
   }
   void insert(const Comparable & item, BinaryNode * & t) const;
}; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T07:38:39.497

在你的表情中`BinaryNode * & t)`

```
 BinaryNode*                & t
           -------------              -----
            BinaryNode pointer        t is reference variable 
```

*对BinaryNode*类 `t`的指针的引用也是如此。

 *> t的地址指针？

您`ampersand &`对 C++ 中的运算符感到困惑。给出变量的地址。但语法不同。

`ampersand &`在一些变量前面，如下所示：

```
BinaryNode b;
BinaryNode* ptr = &b; 
```

但以下方式适用于引用变量（其简单的非指针）：

```
BinaryNode b;
BinaryNode & t  = b; 
```

你的如下：

```
BinaryNode b;
BinaryNode* ptr = &b;
BinaryNode* &t  = ptr; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T07:31:35.717

它是对指针的引用。您可以在此函数中更改指针，它将在外部更改。*

# visual-studio - VIsVim 在深色方案上搜索浅色

> ID：14314641
> 
> 赞同：4
> 
> 时间：2013-01-14T07:30:48.617
> 
> 标签：visual-studio, vim, color-scheme

我很高兴使用 VisVim 插件，但有一件很烦人的事情。当我在寻找东西时，我会得到这种烦人的灯光选择颜色。我不知道如何改变它。我已经尝试了**工具/选项/环境/字体和颜色**中的每个颜色设置， 但我没有找到它。

你能帮我吗，因为我不想因此而删除 VisVim。

![颜色乱了](../Images/3c47878f68a1aa6487282464a71f2c88.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-10T12:22:22.690

您可以使用 Visual Studio 选项更改这些设置，在“工具->选项->环境->字体和颜色”中更改“VsVim 突出显示增量搜索”设置。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:27:40.727

我不了解 VisVim，但在 Vim 中，搜索突出显示由`Search`突出显示组控制。您可以通过指定所需的前景色和背景色在 .vimrc 中全局设置：

```
hi Search guifg=black guibg=yellow 
```

但请注意，如果您在启动 Vim 后更改颜色方案，这将被覆盖。更好的方法是修改 colourscheme 文件本身。您可以通过键入 找到当前方案的名称，该名称`:colo`应该位于您`.vim`目录中的某个位置（通常在 中`.vim\colors`，具体取决于您的系统）。您只需要修改`hi Search`此文件中的行。

如果这与 VisVim 无关，我们深表歉意。

# routing - 为什么锂的（li3）最后一条路线没有抓住一切？

> ID：14314643
> 
> 赞同：0
> 
> 时间：2013-01-14T07:30:54.903
> 
> 标签：routing, lithium

锂路由器上的最后一个连接：

```
Router::connect('/{:controller}/{:action}/{:args}', 'Main::end'); 
```

应该匹配所有的路线？不？但不是执行我的 Main::end 方法（只需**exit('with some text, for testing...')**），Lithium 给了我一个调度程序异常 T_T：

```
 lithium\action\DispatchException (code 404)
 Controller `Sdsa` not found.
 path_to_my_root/libraries/lithium/action/Dispatcher.php: 239 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:59:16.630

通过使用标准正则表达式解决了我的自我问题：

```
Router::connect('/(.*)', 'Main::end'); 
```

这将处理对 Main::end 的所有请求。

正如 Nils 所说，我的实际解决方案并不完美，因为缺少 404 页面处理......

因为我正在尝试使用 Backbone.js，也许我可以像这样处理 404 页面客户端： [How to have a fallback route to catch unknown pages in backbone.js](https://stackoverflow.com/questions/7196478/how-to-have-a-fallback-route-to-catch-unknown-pages-in-backbone-js)

# jquery - 使用 jquerymaps 获取在 googlemap 中单击的点的地理位置

> ID：14314645
> 
> 赞同：1
> 
> 时间：2013-01-14T07:31:04.110
> 
> 标签：jquery, google-maps

我正在使用谷歌地图[jquery 谷歌地图](http://jquery-ui-map.googlecode.com/svn/trunk/ui/jquery.ui.map.js)。我打算做的是，要求用户点击地图上的一个位置，然后根据他点击的地图上的点获取他的地理位置和数据。

我尝试以下代码段：

```
$('#mapCanvas').gmap('click', function(overlay, latlng){
  if (latlng) {
    alert("here");
    marker = new GMarker(latlng, {draggable:true});
    var latlng = marker.getLatLng();
    var lat = latlng.lat();
    var lng = latlng.lng();
    //send these lat and lng to server side save location method through ajax
    console.log(latlng);
  }
  map.addOverlay(marker);
}); 
```

但这不起作用，有人可以告诉我有什么问题吗？ [可以在这里找到小提琴。](http://jsfiddle.net/mMXSg/1/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:49:10.397

捕获事件，`google.maps.event.addListener`通常使用。例如，要捕获用户单击地图的时间，您可以执行以下操作：

```
google.maps.event.addListener(map, 'click', function(event) {
  alert(event.latLng);
}); 
```

中的`click`事件`google.maps.Map`触发 a [`MouseEvent`](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)，它有一个`latLng`属性。这会告诉您用户在地图上单击的位置。同样，`google.maps.Marker`行为方式相同，它会告诉您单击的标记在地图上的位置。

结合这两件事，我们可以创建一个应用程序，其中可以通过单击地图添加标记，并且可以通过单击标记获得它们的位置：

```
google.maps.event.addListener(map, 'click', function(event) {

  // add a marker where the mouse clicked
  var marker = new google.maps.Marker({
    position: event.latLng,
    map: map
  });

  // when the marker is clicked, alert its location
  google.maps.event.addListener(marker, 'click', function(event) {
    alert('This marker is at: ' + event.latLng);
  });

}); 
```

*工作示例：http: [//jsfiddle.net/aLEjR/1/](http://jsfiddle.net/aLEjR/1/)*

* * *

顺便说一句，如果您已经有一个实例`google.maps.Marker`（例如，如果您自己创建了该标记），您可以通过调用该`getPosition()`方法来获取它的位置。您可以在此处阅读有关该方法和许多其他方法的 API 文档：

*   [https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

您可以通过阅读开发者指南了解更多关于如何使用 Google Maps API 的信息：

*   [https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

# java - Spring Integration TCP 连接工厂 SSL - 使用 java 密钥库

> ID：14314651
> 
> 赞同：1
> 
> 时间：2013-01-14T07:31:52.440
> 
> 标签：java, spring, spring-integration

**[在Spring Integration 2.2.1](http://www.springsource.org/node/3793)中修复了**更新****

 **我有一个`tcp-connection-factory`

```
<int-ip:tcp-connection-factory id="tranServer" type="client" host="127.0.0.1" port="1234"
    single-use="true" ssl-context-support="sslContext" />

<bean id="sslContext" class="org.springframework.integration.ip.tcp.connection.support.DefaultTcpSSLContextSupport">
    <constructor-arg value="client.ks" />
    <constructor-arg value="client.truststore.ks" />
    <constructor-arg value="secret" />
    <constructor-arg value="secret" />
</bean> 
```

我想为 SSL 上下文使用默认的 java 密钥库，因为安装过程的一部分是将 SSL 证书加载到其中。如何指定默认密钥库和信任库密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:29:51.543

**[在Spring Integration 2.2.1](http://www.springsource.org/node/3793)中修复了**更新****

 **本质上，问题是从方法中的`DefaultTcpSSLContextSupport`a 加载密钥库和信任库`ClassPathResource``getSSLContext()`

```
ks.load(new FileInputStream(new ClassPathResource(keyStore).getFile()), keyStorePassword);
ts.load(new FileInputStream(new ClassPathResource(trustStore).getFile()), trustStorePassword); 
```

我创建了自己的`FileTcpSSLContextSupport`类，它删除了`ClassPathResource`.

```
ks.load(new FileInputStream(keyStore), keyStorePassword);
ts.load(new FileInputStream(trustStore), trustStorePassword); 
```

然后我用

```
<bean id="sslContext" class="com.liquidtelecoms.tillintegration.FileTcpSSLContextSupport">
    <constructor-arg value="${java.home}/lib/security/cacerts" />
    <constructor-arg value="${java.home}/lib/security/cacerts" />
    <constructor-arg value="changeit" />
    <constructor-arg value="changeit" />
</bean> 
```****

# java - 直接将 2D 数组值放入图像与从这些值生成像素然后将其放入之间的区别

> ID：14314652
> 
> 赞同：1
> 
> 时间：2013-01-14T07:31:52.720
> 
> 标签：java, awt

我是数字图像处理领域的初学者。现在我正在编码以从二维数组中获取图像...我已经下载了这两个代码示例...当我使用第一个时，我得到了正确的图像，但是当我使用第二个时，我正在处理与上一张相比，图像亮度更高。

请建议我这些代码之间有什么区别以及我应该参考哪些代码...我必须使用此代码来获得我的研究论文结果...

1）。

```
 public BufferedImage getImage(BufferedImage original, float paddedArray[][], int width, int height) {

        BufferedImage img = new BufferedImage(width, height, original.getType());
        for (int i = 0; i < width; i++) {
            for (int j = 0; j < height; j++) {
                int c = Math.round(paddedArray[i][j]);
                int pixel = c << 16 | c << 8 | c;
                img.setRGB(i, j, pixel);
            }
        }
        return img;
    } 
```

* * *

2）。

```
public BufferedImage getImages(BufferedImage original, float paddedArray[][], int width, int height) {

    BufferedImage img = new BufferedImage(width, height, original.getType());
    Graphics2D g = (Graphics2D) img.getGraphics();
    for (int i = 0; i < width; i++) {
        for (int j = 0; j < height; j++) {
            int c = Math.round(paddedArray[i][j]);
            if (c >= greyRange) {
                c = greyRange - 1;
            }
            g.setColor(new Color(c, c, c));
            g.fillRect(i, j, 1, 1);
        }
    }
    return img;
} 
```

我正在使用的这些代码我只想知道和之间的 `g.setColor(new Color(c, c, c));`区别 `img.setRGB(i, j, pixel);`

# c# - C#：在运行时创建 SQLParameter

> ID：14314657
> 
> 赞同：0
> 
> 时间：2013-01-14T07:32:16.650
> 
> 标签：c#, sql-server

我很好奇是否可以在运行时创建一个**SQLParameter**并将其添加到**SQLCommand**中。

我想做的是：

```
public void addParameters(string paramName, paramType, SqlParameter paramCommand)
{
    SqlParameter myParameter = new SqlParameter("@" + paramName, paramType);
    paramCommand.Parameters.Add(myParameter);
} 
```

问题是传递 paramType，它是**SqlDbType**，我不知道：

1.如何在此处实现/使用它
2.何时调用此函数。

注意：我只想将参数添加到我的**SQLCommand**对象。是这样的：

```
SqlParameter myParameter = new SqlParameter("@user", SqlDbType.Char); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:38:19.450

像这样的东西：

```
public static class CommandExtensions
{
    public static void AddParameter(this IDbCommand command, string name, object value)
    {
        if (command == null) throw new ArgumentNullException("command");
        if (name == null) throw new ArgumentNullException("name");

        var p = command.CreateParameter();
        p.ParameterName = name;
        p.Value = value ?? DBNull.Value;
        command.Parameters.Add(p);
    }
} 
```

它允许您：

```
using (var command = connection.CreateCommand())
{
    command.CommandText = "SELECT * FROM Users WHERE FirstName LIKE @name";
    command.AddParameter("name", "J%");

    // [...]
} 
```

该代码也独立于 ADO.NET 驱动程序，因此可以在大多数使用 ADO.NET 的项目中重用。如果您想了解有关编写可重用 ADO.NET 代码的更多信息，请阅读我的文章：http: [//blog.gauffin.org/2013/01/ado-net-the-right-way/](http://blog.gauffin.org/2013/01/ado-net-the-right-way/)

> 问题是传递 paramType，它是 SqlDbType，我不知道

通常，您不必指定 db 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:39:29.897

你的方法是正确的：

```
cmd.Parameters.Add(new SqlParameter("@Name", "Frank Rizzo")); 
```

需要注意的一点是 SqlParameter 构造函数提供了许多重载，使得创建一个单独的函数来返回新的 SqlParameter 在很大程度上是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:42:29.303

除了jgauffin的回答：

在构造SqlParameter时，如果不确定参数的SqlDbType，可以使用SqlParameter构造函数，它只接受参数名和值作为参数。即；[SqlParameter 构造函数（字符串，对象）](http://msdn.microsoft.com/en-us/library/0881fz2y.aspx)。

为了 MSDN 文档，

> 在 value 参数中指定 Object 时，SqlDbType 是从 Object 的 Microsoft .NET Framework 类型推断出来的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T09:46:01.733

有多种方法可以在 ADO.NET 中添加 SQL 参数。通常不需要提供 SQL 数据库类型，因为数据作为字符串发送并由 SQL 服务器隐式转换。

MSDN 引用以下示例-

```
command.Parameters.Add("@ID", SqlDbType.Int);
command.Parameters["@ID"].Value = customerID;

// Use AddWithValue to assign Demographics.
// SQL Server will implicitly convert strings into XML.
                                                command.Parameters.AddWithValue("@demographics", demoXml); 
```

第一个例子也可以写成——

```
command.Parameters.Add("@ID", SqlDbType.Int).Value = customerID; 
```

有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters(v=vs.100).aspx)。

显然，提供与 SQL 数据类型不匹配的数据将导致 SQL 异常，您应该设置长度限制并验证输入，使用“as”语法将其转换为本地兼容的类型，这和正则表达式一样有用。

jgauffin 的答案可以很容易地适应使用包含 DB 类型的语法，但我不确定有什么优势（除了提醒您），因为无论分配的值如何，您都不会收到类型警告，甚至在尝试执行命令。

# java - RESTful webservice 和 HttpServlet 的区别

> ID：14314658
> 
> 赞同：12
> 
> 时间：2013-01-14T07:32:17.947
> 
> 标签：java, web-services, rest

实现一个 RESTful Web 服务和一个普通的 HTTPServlet 有什么区别。Servlet 以及任何 REST API 都支持所有 GET/POST/DELETE/PUT。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T07:43:11.390

REST 实际上是在服务器上设计 API 时使用的一种架构风格。HttpServlets 可以是一种实现 RESTful Web 服务的方法。

REST 描述了一种风格，其中 HTTP 动词如 GET/POST/DELETE/等。以可预测的方式用于与服务器上的资源进行交互。

我建议阅读[REST Wikipedia](http://en.wikipedia.org/wiki/REST)页面以获得良好的概述。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T07:44:06.307

REST 是一种架构模式（抽象），而 servlet 是一种实现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T08:53:00.007

我的 5 美分在这里 :) 至于我 - Servlet 只是 HTTP 协议的抽象。它支持 GET/PUT 等，因为 Http 协议定义了这些方法。

另一方面，Restful Web 服务是一个抽象概念，它讨论的是操作资源的思想，而不是特定的实现。确实，在 HTTP 协议的上下文中考虑 rest 功能非常方便，但试着考虑它们，因为它们是完全不同的野兽。Restful Web 服务不是 Java 特有的。

从技术上讲，如果您谈论的是 Java，则可以使用 vanilla servlet 来实现 restful web 服务，或者可以使用 Apache Wink 或 Jersey 等工具来定义实现 rest 服务的便捷方式，但这些毕竟只是工具。顺便说一句，泽西岛（据我所知，我不了解其他人）是在 servlet 之上实现的。

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T07:40:35.247

HttpServlet 以程序员认为合适的方式响应 HTTP 方法。一个 RESTful Web 服务应该基于对实体的处理。CRUD 应该对应于 HTTP 方法 POST、GET、PUT 和 DELETE。url 也应该根据格式定义，例如 {server}/{entities}、{server}/{entities}/{id} 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T08:26:10.620

顾名思义，RESTful Web 服务是一种 Web 服务，用于在 2 个不同的服务器之间建立通信，因此有助于集成基于 Web 的应用程序。Web 服务使用 HTTP 协议。而 HTTPServlet 是一个支持 HTTP 调用的 Servlet。这里面的不同方法都支持HTTP协议。

# javascript - 如何从 1 重复 tabindex 到最后一个带有 tabindex 的元素？

> ID：14314659
> 
> 赞同：24
> 
> 时间：2013-01-14T07:32:27.753
> 
> 标签：javascript, jquery, html, tabindex

因此，例如，这是一个脚本：

```
<!-- Random content above this comment -->
<input type="text" tabindex="1" />
<input type="text" tabindex="2" />
<input type="text" tabindex="3" />
<input type="text" tabindex="4" />
<input type="text" tabindex="5" />
<input type="text" tabindex="6" />
<!-- Nothing underneath this comment --> 
```

所以，当用户按下 tab 并浏览六个文本框，到达最后一个然后按下 tab 时，它会转到第一个评论上方的内容，对吗？那么，我该如何让它重新开始`tabindex="1"`呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-14T08:23:55.890

不幸的是，如果没有 javascript，您将无法做到这一点。您可以在最后一个元素上收听`TAB`（并确保它不是`SHIFT`+ `TAB`）按键，然后手动将焦点设置到处理程序中的第一个元素。但是，**将此逻辑绑定到键盘事件（即特定输入法）并不通用，并且在使用时可能不起作用：**

*   移动浏览器
*   其他一些娱乐设备（智能电视、游戏机等 - 它们通常使用方向键在可聚焦元素之间跳转）
*   无障碍服务

我建议一种更通用的方法，它不知道焦点是如何改变的。

这个想法是你用特殊的“焦点保护”元素包围你的表单元素（你想要创建一个“ *tabindex循环*”），这些元素也是可聚焦的（它们分配了一个tabindex）。这是您修改后的 HTML：

```
<p>Some sample <a href="#" tabindex="0">content</a> here...</p>
<p>Like, another <input type="text" value="input" /> element or a <button>button</button>...</p>

<!-- Random content above this comment -->
<!-- Special "focus guard" elements around your
if you manually set tabindex for your form elements, you should set tabindex for the focus guards as well -->
<div class="focusguard" id="focusguard-1" tabindex="1"></div>
<input id="firstInput" type="text" tabindex="2" class="autofocus" />
<input type="text" tabindex="3" />
<input type="text" tabindex="4" />
<input type="text" tabindex="5" />
<input type="text" tabindex="6" />
<input id="lastInput" type="text" tabindex="7" />
<!-- focus guard in the end of the form -->
<div class="focusguard" id="focusguard-2" tabindex="8"></div>
<!-- Nothing underneath this comment --> 
```

现在您只需监听`focus`这些保护元素上的事件并手动将焦点更改为适当的字段（为简单起见，使用 jQuery）：

```
$('#focusguard-2').on('focus', function() {
  // "last" focus guard got focus: set focus to the first field
  $('#firstInput').focus();
});

$('#focusguard-1').on('focus', function() {
  // "first" focus guard got focus: set focus to the last field
  $('#lastInput').focus();
}); 
```

`SHIFT`如您所见，我还确保当焦点从第一个输入向后移动时（例如第一个输入上的+ ） ，我们快速回到最后`TAB`一个输入。[活生生的例子](http://jsfiddle.net/dipish/F82Xj/)

请注意，*焦点守卫*也被分配了一个 tabindex 值，以确保它们在您的输入字段之前/之后立即获得焦点。如果您没有手动将 tabindex 设置为您的输入，那么两个焦点守卫都可以`tabindex="0"`分配。

当然，当您的表单是动态生成时，您也可以使这一切在动态环境中工作。只需找出您的[可聚焦元素](https://stackoverflow.com/questions/7870544/simplest-way-to-tab-only-through-focusable-descendants-of-a-particular-element?rq=1)（不那么琐碎的任务），并用相同的焦点保护装置围绕它们。

希望对您有所帮助，如果您有任何问题，请告诉我。

**更新**

正如 nbro 指出的那样，如果`TAB`在页面加载后点击，上述实现会产生选择最后一个元素的不良影响（因为这将聚焦第一个可聚焦元素，即`#focusguard-1`，这将触发聚焦最后一个输入。为了减轻这种情况，你可以指定您最初希望聚焦的元素，并使用另一段 JavaScript 聚焦它：

```
$(function() { // can replace the onload function with any other even like showing of a dialog

  $('.autofocus').focus();
}) 
```

有了这个，只需将`autofocus`类设置在您想要的任何元素上，它将专注于页面加载（或您收听的任何其他事件）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-03T16:06:23.337

这是我的解决方案，您不需要任何其他元素。如您所见，元素将在`<form>`元素内部循环。

```
$('form').each(function(){
    var list  = $(this).find('*[tabindex]').sort(function(a,b){ return a.tabIndex < b.tabIndex ? -1 : 1; }),
        first = list.first();
    list.last().on('keydown', function(e){
        if( e.keyCode === 9 ) {
            first.focus();
            return false;
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-30T22:21:39.587

这是我的解决方案，考虑到第一个输入设置了“自动对焦”属性：

在你的表单元素之后添加这个（对于 HTML5，它可以是任何标签）：

```
<div tabindex="6" onFocus="document.querySelector('[autofocus]').focus()"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T08:25:42.537

是的，在输入选项卡后，它将跳转到没有指定选项卡顺序的合适元素。而且，在对所有“可选项卡”元素进行选项卡后，焦点将跳到“页面内容之外”，跳转到浏览器的 UI 元素（选项卡、菜单、书签等）

我认为最简单的方法是`keyup`在最后一个输入上处理事件并拦截`TAB`使用（以及`SHIFT`+`TAB`就此而言）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T08:06:38.647

我建议你增加你的 tabindex 即。>100 并将 tabIndex 提供给您的“内容”容器 div 请注意，您的内容容器的 tabindex 必须小于 ex.99 的输入框。

当您在最后一个输入框上按 Tab 时，使用 javascript 手动将焦点设置在您的内容 div 上（您可以使用按键处理程序作为 tab 键）

```
document.getElementById("content").focus(); 
```

您必须将 tabindex 赋予您的“内容”以设置焦点。

现在如果你按下 tab 焦点将自动转移到第一个输入框。

希望这会有所帮助。

谢谢

# java - 从 Arraylist 转换 到android中的字节数组

> ID：14314665
> 
> 赞同：0
> 
> 时间：2013-01-14T07:33:26.867
> 
> 标签：java, android

我有一个字节数组列表，我正在将它们转换为字节数组。我使用了以下方法。但是它给了我以下错误：E/AndroidRuntime(5228): java.lang.NoClassDefFoundError: com.google.common。原语.字节

```
ArrayList<Byte> byteArrayList_song=new ArrayList<Byte>();
byte[] bytes_song_byte;

 for(int i=0;i<int_arraylist.size();i++)
 {
            bytes_song_byte=Bytes.toArray(byteArrayList_song);                
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:37:47.253

看起来 Google Guava 不在你的类路径上，你也应该从上面的代码中删除 for 循环，因为那是 Guava 函数为你做的。

```
ArrayList<Byte> byteArrayList_song = new ArrayList<Byte>();
byte[] bytes_song_byte = Bytes.toArray(byteArrayList_song); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:48:09.993

您可以在没有外部库的情况下进行此转换

```
 byte[] bytes_song_byte = new byte[byteArrayList_song.size()];
    for (int i = 0; i < byteArrayList_song.size(); i++) {
        bytes_song_byte[i] = byteArrayList_song.get(i);
    } 
```

请注意，如果 byteArrayList_song 有任何`null`元素，此代码将抛出 NullPointerException

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T07:39:04.690

尝试以下

```
 ArrayList<Byte> byteArrayList_song=new ArrayList<Byte>();
        byte[] bytes_song_byte;
        bytes_song_byte=byteArrayList_song.toArray(new Byte[byteArrayList_song.size()]); 
```

# java - 一个免费和开源的数据库管理工具

> ID：14314669
> 
> 赞同：1
> 
> 时间：2013-01-14T07:33:53.840
> 
> 标签：java, database

我需要找到一个免费和开源的数据库管理工具，它可以连接到所有数据库引擎（`jdbc`驱动程序示例）。我想要这个工具的一般任务，比如`add/delete/update/select`表格或`create/edit/remove`表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:39:19.727

SQLWorkbench 是我最喜欢的：[http](http://www.sql-workbench.net/) ://www.sql-workbench.net/ ，零设置，直接从 JAR 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:39:40.740

我们在生产中使用了[ExecuteQuery](http://executequery.org/features.jsp)，它还不错。支持所有具有 JDBC 驱动程序的数据库。开源，纯Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:47:29.247

我对[squirrelsql很满意](http://squirrel-sql.sourceforge.net/)

# android - 无法将 SoapObject 转换为另一个 SoapObject

> ID：14314671
> 
> 赞同：1
> 
> 时间：2013-01-14T07:34:16.430
> 
> 标签：android, wcf, ksoap2

```
 SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(Request);
    envelope.dotNet = true;
    envelope.encodingStyle = SoapSerializationEnvelope.XSD;

    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
    androidHttpTransport.debug = true;
    androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");

    try {

    androidHttpTransport.call(SOAP_ACTION, envelope);
    } 
    catch (Exception e) {

    }

    response = (SoapObject) envelope.bodyIn;
    System.out.println("respone is " + response.toString());
    response1 = (SoapObject) response.getProperty(0);//getting error at this line....
    System.out.println("response1 "+response1.toString());
    return res; 
```

得到错误：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.wcf/com.example.wcf.MainActivity}：java.lang.ClassCastException：org.ksoap2.serialization.SoapPrimitive

是`response.toString()`：

> 01-14 12:45:49.767: I/System.out(2060):

回应是：

```
GetProfilesResponse {
   GetProfilesResult=   {
      "ROWS":[
         {
            "ProfileId":"103",
            "Name":"henry_103",
            "DisplayName":"henry",
            "Age":"22",
            "ProfileDetail":"good looking",
            "CreatedDate":"12/27/2012 12:00:00 AM",
            "ModifiedDate":"",
            "DeletedFlag":"False",
            "ImageName":"Penguins.jpg",
            "ImageURL":"http://graycelltech.net/AlarmClock/UploadedFiles/Images/henry_103/Penguins.jpg"
         },
         {
            "ProfileId":"110",
            "Name":"jenifer_110",
            "DisplayName":"jenifer",
            "Age":"26",
            "ProfileDetail":"nice",
            "CreatedDate":"1/1/2013 12:00:00 AM",
            "ModifiedDate":"",
            "DeletedFlag":"False",
            "ImageName":"Koala.jpg",
            "ImageURL":"http://graycelltech.net/AlarmClock/UploadedFiles/Images/jenifer_110/Koala.jpg"
         },
         {
            "ProfileId":"113",
            "Name":"jokar_113",
            "DisplayName":"jokar",
            "Age":"30",
            "ProfileDetail":"nice looking",
            "CreatedDate":"1/1/2013 12:00:00 AM",
            "ModifiedDate":"",
            "DeletedFlag":"False",
            "ImageName":"Jellyfish.jpg",
            "ImageURL":"http://graycelltech.net/AlarmClock/UploadedFiles/Images/jokar_113/Jellyfish.jpg"
         }
      ]
   }   ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:06:38.003

使用以下

```
 SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
      String result = (String)resultsRequestSOAP.getProperty("Rows"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:06:52.193

尝试这个：

```
response = (SoapObject) envelope.getResponse(); 
```

代替

```
response = (SoapObject) envelope.bodyIn; 
```

# php - 为什么需要在递归函数中包含“return”关键字？

> ID：14314673
> 
> 赞同：0
> 
> 时间：2013-01-14T07:34:50.020
> 
> 标签：php, recursion

我有以下函数在不使用模运算符的情况下实现除法

```
function division($dividend, $divisor, $quotient){
    if($dividend<=$divisor){
        return $quotient;
    }else{
        $dividend-=$divisor;
        $quotient++;
        division($dividend, $divisor, $quotient);
    }
}

echo division(3, 2, 0); 
```

我很困惑为什么如果函数要迭代直到 if 语句评估为 true 并评估，我需要在`return`该行前面加上关键字。`division($dividend, $divisor, $quotient)``return $quotient`

有人可以解释为什么`return`需要关键字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:37:09.957

这是因为一旦计算出商，您可能想要对它做一些事情。在您的情况下，您将其与`echo`语句一起显示。如果没有返回调用，您将无法知道函数的结果是什么。

# php - 如何将jquery中.post传递的数组数据获取到php中？

> ID：14314676
> 
> 赞同：1
> 
> 时间：2013-01-14T07:35:21.123
> 
> 标签：php, jquery

我有一个关于如何将`.post`jquery 中传递的数组变量的值获取到我的 php 页面的问题

这是我的jQuery代码：

```
minDate = [];
hoursWork = [];
empId = [];
        $('.minDate').each(function() { 
            minDate.push($(this).val());
        });

        $('.hoursWork').each(function() { 
            hoursWork.push($(this).val());
        });

        $('.empId').each(function() { 
            empId.push($(this).val());
        });

            $.post('rtInsert.php', { minDate: minDate, hoursWork: hoursWork, empId: empId }, function(data) { 
        alert(data);
    }); 
```

我怎样才能在我的`rtInsert.php`

我试过

```
$minDate = $_POST['minDate'];
$empId = $_POST['empId'];
$workHours = $_POST['hoursWork']; 
```

现在我将如何获得数组的单个值，因为所有 3 个变量都是一个数组

我只知道使用单个数组，`foreach()`但是如果传递了 3 个数组怎么办

是否知道如何获取它或如何将其传递给单个数组。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:43:27.037

您可以使用`JSON.stringify(data);`将它们转换为 JSON 并像这样在服务器端对其进行 prase；`$data = json_decode($json);`.

您的代码将变成这样：

```
var minDate = [];
var hoursWork = [];
var empId = [];
$('.minDate').each(function() { 
    minDate.push($(this).val());
});

$('.hoursWork').each(function() { 
    hoursWork.push($(this).val());
});

$('.empId').each(function() { 
    empId.push($(this).val());
});

$.post('rtInsert.php', { minDate: JSON.stringify(minDate), hoursWork: JSON.stringify(hoursWork), empId: JSON.stringify(empId) }, function(data) { 
    alert(data);
}); 
```

和你的服务器端ccode：

```
<?php
$mindate = json_decode($_POST['minDate']);
$hourswork = json_decode($_POST['hoursWork']);
$empid = json_decode($_POST['empId']);
foreach($mindate as $k=>$val)
{
    $date = $val;
    $work =$hourswork[$k];
    $id =$empid[$k];
    //...
}
?> 
```

# jquery - 如何在对象中插入或缓存页面

> ID：14314677
> 
> 赞同：0
> 
> 时间：2013-01-14T07:35:36.333
> 
> 标签：jquery, caching, object

如果我有一些页面，例如：（home.html、about.html 等），我如何将这些页面插入到对象中以供将来使用？换句话说，我想缓存这些页面：

```
var obj= {"home":home.html, "about": about.html}; 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:37:37.163

```
var obj= {"home": "home.html", "about": "about.html"};

alert( obj.about );   // about.html 
```

# php - Javascript、克隆、函数和更改 id 和名称，有什么想法吗？

> ID：14314679
> 
> 赞同：0
> 
> 时间：2013-01-14T07:35:59.190
> 
> 标签：php, javascript, html, clone

这是我的Javascript：

```
<script>

        function disable()
        {
            document.getElementById("habits").disabled=true;
            document.getElementById("habits2").disabled=true;

            document.getElementById("exact").disabled=false;
        }
        function enable()
        {
            document.getElementById("habits").disabled=false;
            document.getElementById("habits2").disabled=false;

            document.getElementById("exact").disabled=true;
        }
        var counter =0;
        var i = 0;
        function duplicate() { 
            var original = document.getElementById('div');
            var clone = original.cloneNode(true); // "deep" clone

            i+=1;
            clone.id = "div" + i; // there can only be one element with an ID
            original.parentNode.appendChild(clone);

            document.getElementById('div' + i).getElementsByTagName('select').name += '_clone' + i;
            counter+=1;
        }

    </script> 
```

这是我的 HTML 代码：

```
 <button id="button" onclick="duplicate()">Add List</button><br><br>
        <form id ="form" name="search" method="post" action="test.php">
            <div id="div">
                <div id="d">
                    <select name ="select" >
                        ...options...
                    </select>
                </div>

                Value:<input type="text" id ="exact">

                From: <input type="text" id="habits">
                To: <input type="text" id="habits2">

                <br>
                <input type="button" name="answer" value="Range" onclick="enable()"  >
                <input type="button" name="answer" value="Exact" onclick="disable()" >
            </div>
            <br><br>

            <input type="submit" name ="search" value="Submit">
        </form> 
```

我的问题是，当我克隆 时`div id=div`，所有按钮都适用于原始按钮，甚至是克隆的按钮。另一件事是，当我单击提交按钮以从 中获取选项时`drop-down list(s)`，但提交后，仅计算（克隆）最后一个下拉列表，但我只想要原始的。

这是我点击提交后的页面：

```
<?php
$item = $_POST["select"];
echo $item;
?> 
```

我该如何解决这个问题？也就是说，更改`id`'s 和名称，以及使用克隆元素的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:17:42.793

试试这个。我通过添加一行更改了功能

```
 function duplicate() { 
                var original = document.getElementById('div');
                var clone = original.cloneNode(true); // "deep" clone

                i+=1;
               clone.attr("id",replace(clone.attr("id"),"div"+i));// change the id of clone div
              //  clone.id = "div" + i; // there can only be one element with an ID
                original.parentNode.appendChild(clone);

                document.getElementById('div' + i).getElementsByTagName('select').name += '_clone' + i;
                counter+=1;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:54:11.547

首先，如果你想复制东西，不要使用 id。按类使用和选择（我强烈建议使用[jQuery](http://jquery.com/)），并使用`name="some_name[]"`

要解决您的问题，您可以这样做：`onclick="javascript:enable(this)"`或者，如果您决定使用 jQuery，请使用 `onclick="javascript:jQuery(this)"，然后搜索当前元素的兄弟姐妹（不知道纯 js 语法，只是 jquery 之一，如果您需要 jquery 帮助，请告诉我）。

希望这有帮助，祝你好运。

# sql - MSSQL 将连接顺序按空值保留到最后，而如果所有空值按 ID 排序

> ID：14314680
> 
> 赞同：1
> 
> 时间：2013-01-14T07:36:15.853
> 
> 标签：sql, sql-server, sql-order-by

我有这个 mssql 查询

```
SELECT TOP 50 [id], [title], [url], [icon], linkstats.visits 
FROM [websites] LEFT OUTER JOIN [linkstats] ON websites.id=linkstats.lid AND linkstats.code=@country 
WHERE (([country] = @country OR [country]= 'all') AND 
      ([hot] = @hot)) 
ORDER BY linkstats.visits DESC 
```

我想按空值排序到最后，如果都是空值，那么按 ID 排序怎么做？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:40:12.840

采用`CASE`

```
SELECT TOP 50 [id], [title], [url], [icon], linkstats.visits 
FROM [websites] LEFT OUTER JOIN [linkstats] ON websites.id=linkstats.lid AND linkstats.code=@country 
WHERE (([country] = @country OR [country]= 'all') AND 
      ([hot] = @hot)) 
ORDER BY CASE WHEN linkstats.lid IS NULL THEN 1 ELSE 0 END,
         linkstats.visits DESC 
```

# javascript - 如何连接到 Windows 8 Metro 应用程序中的任何数据库？

> ID：14314681
> 
> 赞同：0
> 
> 时间：2013-01-14T07:36:18.617
> 
> 标签：javascript, azure, windows-8, microsoft-metro

我有问题

1.  如何使用 Metro 应用程序在任何数据库中存储和检索数据

我希望每当用户打开我的应用程序并进入主页时，我从服务器获取一些数据并显示给他，我还想将数据从我的应用程序保存到服务器，我搜索了很多但没有找到任何示例要将 Windows 8 应用程序与任何数据库连接，请注意我不是在谈论任何特定的服务器。我只是想保存和检索数据，仅此而已。请帮助我，并提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:58:09.403

看看[http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)。他展示了 javascript 应用程序的示例。另一方面，您可以使用 Windows Azure 移动服务将 Azure SQL DB 与 JavaScript 连接（获取数据的示例：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with- data-js/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-js/)）我希望它有所帮助。

# c# - 从代码创建手势识别器

> ID：14314683
> 
> 赞同：1
> 
> 时间：2013-01-14T07:36:36.513
> 
> 标签：c#, ios, cocoa-touch, xamarin.ios, selector

我正在尝试从代码创建一个手势识别器，但是我无法让它工作，`unrecognised selector sent to instance`当我执行拖动时我得到了一个。`LblDrag`是来自 IB 的 UILabel，它是一个出口。如果我使用 Action 作为识别器的构造函数参数，它可以正常工作，但我希望能够使用选择器方法。

这是我所拥有的：

```
 public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        // Perform any additional setup after loading the view, typically from a nib.
        var selector = new MonoTouch.ObjCRuntime.Selector("DragMe");
        var recognizer = new UIPanGestureRecognizer(LblDrag,selector);
        View.AddGestureRecognizer(recognizer);
    }

    [Export("DragMe")]
    protected void DragMe ()
    {
        Console.WriteLine ("Drag");
    } 
```

我试图更改添加识别器的视图，但都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:49:54.750

这很自然——你添加了错误的目标。`UILabel`不响应`DragMe`选择器（您为什么认为它会响应？）。您必须将该对象添加为实际实现回调方法的手势识别器的目标：

```
var recognizer = new UIPanGestureRecognizer(this, selector); 
```

# java - 模拟数据库 DELETE CASCADE

> ID：14314685
> 
> 赞同：0
> 
> 时间：2013-01-14T07:36:55.433
> 
> 标签：java, database, graph-theory

![在此处输入图像描述](../Images/e9d0e6a2f01196421b6d3ed32e879c61.png)

以上是我的数据库表结构的样子。B指A，C指A，D指B，以此类推。现在，我正在运行一个离线作业，该作业删除这些表上的所有约束，并通过在我的 java 应用程序中评估它们来删除一些记录。例如，**从 A WHERE id > 20 删除**，将被翻译成一堆选择。

*   从 B、A 中选择 B.ID、A.ID，其中 B.FKEY = A.ID
*   从 C、A 中选择 C.ID、A.ID，其中 C.FKEY = A.ID
*   从 D、B、A 中选择 D.ID、A.ID，其中 B.FKEY = A.ID 和 D.FKEY = B.ID
*   ... 很快..
*   .. 最后.. 从 A、B、D、F、H 中选择 H.ID、A.ID，其中 B.FKEY = A.ID AND D.FKEY = B.ID AND F.FKEY = D.ID AND H。 FKEY = F.ID **UNION** SELECT H.ID, A.ID FROM A,C,E,G,H 其中 C.FKEY = A.ID AND E.FKEY = C.ID AND G.FKEY = E.ID AND H .FKEY = G.ID

检索该数据并在代码中验证 A.ID > 20，然后删除不需要的内容是我的应用程序执行删除的方式（我知道这可能听起来有点疯狂，但它应该是这样工作的）。

现在我在这里的问题是......我如何使这个通用？我的挑战是识别像“H”这样具有多重继承的表（或者说在 ER 图中形成循环）。我试过研究图论，但它非常令人困惑——我处理的信息太多。

简而言之，我想识别 ER 图中的循环并为此类表构建 UNION 查询。

# web-services - Sencha 中基于 SOAP 的 Web 服务

> ID：14314686
> 
> 赞同：0
> 
> 时间：2013-01-14T07:36:57.307
> 
> 标签：web-services, soap, sencha-touch-2

我应该如何使用 Sencha 调用基于 SOAP 的 Web 服务？

我能够使用[JavaScriptSoapClient](http://javascriptsoapclient.codeplex.com/)调用我的服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:40:30.503

如果您使用 Ext JS，那么 SOAP 代理可能就是您想要的。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.soap.Proxy](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.soap.Proxy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T09:34:55.010

在 Sencha 博客上查看： [http ://www.sencha.com/blog/taking-a-look-at-the-new-sencha-soap-data-proxy](http://www.sencha.com/blog/taking-a-look-at-the-new-sencha-soap-data-proxy)

# return-value - 将返回值分配给变量警告

> ID：14314687
> 
> 赞同：0
> 
> 时间：2013-01-14T07:36:59.890
> 
> 标签：return-value, concept, method-call

在netbeans中，我用来调用一个返回值的方法，但我直接调用它，我必须将参数传递给函数，即`Function(getValue())`返回`getValuue()`字符串的位置。所以我想知道的是，调用此方法的更有效方法是我应该`string`先将值赋值给a，然后将该值传递给参数，正如netbeans建议我并在那里显示警告，还是直接调用它好？我知道代码运行良好，但要牢记编码的效率或规则，我应该考虑这件事吗？或者如果我忽略它会有多严重的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:44:23.620

如果您只使用该值一次，那么直接在用作参数的地方调用它就可以了。

在 Java 中，这很好：

```
MyClass myClass = new MyClass();
myFunction(myClass.getSomeValue()); 
```

而在以下情况下：

```
MyClass myClass = new MyClass();
MyOtherClass myOtherClass = myClass.someLongComputation();
Int value = myFunction(myOtherClass);
anotherFunction(value, myOtherClass); 
```

最好有一个局部变量，这样您就可以避免两次调用长时间运行的计算。不过对于简单`getValue()`的s来说，真的没关系。

# android - Android：在后台上传/下载文件数量的最佳方式

> ID：14314688
> 
> 赞同：2
> 
> 时间：2013-01-14T07:37:02.277
> 
> 标签：android, ios, asihttprequest

我最近开发了一个涉及媒体（图像、音频和视频）同步的 iPhone 应用程序。使用我的网络服务器进行操作。

我`ASIHTTPRequest`在我的 iOS 应用程序中使用了同时上传和下载，并在每个请求完成和失败的方法中做一些工作，就像 `ASIHTTPRequest`提供这些方法一样。

```
- (void)requestFinished:(ASIHTTPRequest *)request
- (void)requestFailed:(ASIHTTPRequest *)request 
```

有没有类似的android库。这允许我`upload/download`在每次请求成功或失败后排队并更新我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:49:11.497

对于下载部分，[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)可能很有用。唉！，上传没有这样的事情（还）。要拥有类似 IOS 的功能，您需要编写自定义后台服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:51:30.083

在 android 中，您可以使用下载管理器。这是[示例项目](https://github.com/commonsguy/cw-android/tree/master/Internet/Download) ，或者您可以使用异步类
请参考以下链接

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# java - 如何使用 java 执行此 MongoDB 查询？

> ID：14314692
> 
> 赞同：12
> 
> 时间：2013-01-14T07:37:31.743
> 
> 标签：java, mongodb

我必须使用但无法编写一个简单的`MongoDB`查询。`java`

mongo 查询如下所示：

```
db.yourCollection.find({"$where" : "this.startDate < this.endDate"}) 
```

我必须使用`QueryBuilder`该类编写上述查询。但我无法在`MongoDB` `java`驱动程序中做到这一点。

```
BasicDBObject document = new BasicDBObject();
document.put("id", 1001);
document.put("intValue", 1200);
document.put("updateValue", 2100);

DBObject query = QueryBuilder.start("intValue").lessThan("updateValue").get();
DBCursor cursor = collection.find(query);
while (cursor.hasNext()) {
System.out.println("Result : -"+cursor.next());} 
```

上面的代码不返回任何结果。但是如果改成`updateValue`它`2100`就是给出结果。我的问题是`lessThan`将对象作为输入参数。那么如何将文档字段作为输入参数传递呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T07:43:17.443

理想情况下，您的 mongoDB 查询应该是这样的： -

```
db.yourCollection.find({"startDate": {$lt: endDate}}) 
```

可以像这样用Java编写：-

```
BasicDBObject query = new BasicDBObject("startDate", new BasicDBObject("$lt", endDate);
DBCursor cursor = coll.find(query); 
```

你可以看看[官方教程](http://www.mongodb.org/display/DOCS/Java+Tutorial)

* * *

如果你想使用[QueryBuilder](http://api.mongodb.org/java/2.2/com/mongodb/QueryBuilder.html)，你可以这样做： -

```
DBObject query = QueryBuilder.start("startDate").lessThan("endDate").get();
DBCursor cursor = coll.find(query); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T07:44:18.393

QueryBuilder 帮助构建复杂的查询以从 mongo db 的集合中检索数据。您可以像这样使用 QueryBuilder。

```
BasicDBObject document = new BasicDBObject();
QueryBuilder qb = new QueryBuilder();
qb.or(new QueryBuilder().put("starting_date").is(null).put("ending_date").is(null).get(),
                new QueryBuilder().put("starting_date").lessThanEquals("ending_date").get());
document.putAll(qb.get());
DBCursor cursor = getDbCollection().find(document) 
```

*   QueryBuilder qb = new QueryBuilder()，实例化一个新的QueryBuilder。
*   上面示例中 QueryBuilder 构建的逻辑是；（开始日期 = null 和结束日期 = null）或（开始日期 <= 结束日期）
*   document.putAll(qb.get()) 将构造的逻辑添加到 DBObject。

# date - Jython 中的日期时间和刻度

> ID：14314693
> 
> 赞同：-1
> 
> 时间：2013-01-14T07:37:32.317
> 
> 标签：date, time, jython-2.5

我应该如何在 Jython 中编写以下 C# .NET 代码？

```
ticks = DateTime.UtcNow.Ticks; 
```

我是 Jython 新手，我在 nGrinder 3.0 版和 JDK 1.7.0_10 版中使用 Jython-2.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:59:38.970

你为什么需要那些蜱虫？例如，是否需要一些报告来显示两个事件之间经过了多少滴答声？

此 C# 代码显示从 0001-01-01 开始的滴答声（一毫秒内有 10,000 个滴答声）。

包括 Python 模块在内的许多系统都使用始于 1970-01-01 的`time`Unix*纪元。*您可以使用`time.time()`来查看从纪元开始经过了多少秒。它是浮点数。

在 Java 和 Jython 中，您可以使用和之`System`类的方法：`currentTimeMillis()``nanoTime()`

```
# this will work in Python/Jython/IronPython
import time
print(time.time())

# this will work in Jython
from java.lang import System
print(System.currentTimeMillis())
print(System.nanoTime()) 
```

如果您需要它作为“挂钟”，请使用`time.time()`，将其乘以 10000*1000 并在 0001-01-01 和 1970-01-01 之间添加刻度，将其转换为刻度。

如果您需要在两个事件之间使用非常精确的差异`System.nanoTime()`（它与正常的“挂钟”时间无关）。

# mysql - 我的 sql 按字段排序

> ID：14314694
> 
> 赞同：1
> 
> 时间：2013-01-14T07:37:34.590
> 
> 标签：mysql, sql-order-by, field

```
SELECT id_emoticon, title, category 
FROM emoticons
WHERE id_emoticon IN (4, 4, 4, 4, 3) 
ORDER BY id_emoticon DESC 
```

我有这样的查询，我得到的结果只有一个 4 和一个 3 id。我需要在 WHERE 子句中提供的所有 ID。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:39:07.737

我猜你想要 id_emoticon 4 后跟 3 的顺序，简而言之 id_emoticon 的降序

如果是这种情况，请使用以下

```
SELECT id_emoticon, title, category 
FROM fe_emoticons
WHERE id_emoticon IN (4, 4, 4, 4, 3) 
ORDER BY id_emoticon DESC 
```

# mysql - MySQL 创建过程声明变量问题

> ID：14314699
> 
> 赞同：0
> 
> 时间：2013-01-14T07:38:08.787
> 
> 标签：mysql, mysql-error-1364

几天前我曾寻求帮助，但没有得到答复。或任何评论。如果我变得烦人，我深表歉意，我只是想使用可用的渠道来完成我的课堂作业。

使用一个变量来编写一个名为“AddNewAlbum”的过程。此过程至少需要两个参数 - NameOfArtist 和 AlbumName。该程序将：

1.从 Artist 表中查找 ArtistID，其中艺术家名称为 NameOfArtist

2\. 使用在步骤#1 中找到的 ArtistID 和 AlbumName 参数在专辑中插入新行

现在可以安全地假设艺术家在您运行此过程之前存在（这意味着如果您调用 AddNewAlbum ('Bob Dylan', 'Street Legal')；那么“Bob Dylan”已经存在于 Artist 表中。

这就是我需要做的^

```
CREATE PROCEDURE AddNewAlbum (
NameOfArtist varchar(50),
AlbumName varchar(50)
)
BEGIN

DECLARE artist_id varchar(50);

SELECT ArtistID into artist_id
FROM Artists
WHERE ArtistName = NameOfArtist;

INSERT INTO Albums (Title)
VALUES (AlbumName);
END;
//

call AddNewAlbum (
"Bob Dylan",
"Street Legal"
);
// 
```

错误 1364 (HY000): 字段 'ArtistID' 没有默认值

那是返回的错误。我试图用其他几种方式来写这个，并且同样的错误返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:55:06.833

试试这个。添加了一个默认值并稍微更新您的过程以匹配输入

```
CREATE PROCEDURE AddNewAlbum (
NameOfArtist varchar(50),
AlbumName varchar(50)
)
BEGIN

DECLARE artist_id INT DEFAULT 0;

SELECT ArtistID into artist_id
FROM Artists
WHERE ArtistName = NameOfArtist;

INSERT INTO Albums (ArtistID, Title)
VALUES (artist_id, AlbumName);
END;
//

call AddNewAlbum (
"Bob Dylan",
"Street Legal"
);
// 
```

# batch-file - 想在 findstr 中搜索星号，但字符被识别为通配符

> ID：14314702
> 
> 赞同：0
> 
> 时间：2013-01-14T07:38:24.783
> 
> 标签：batch-file, wildcard, findstr

我有一个简单的 findstr 函数（Windows 批处理），但是我试图在文本文档中搜索实际的星号字符。因为 * 字符也用作通配符函数，所以我的程序变得混乱。

有没有人知道如何克服这个问题？

```
@echo off

SET EXTENT=%~x1
SET MYPATH=%~dp1

SET FILETYPE=%PATH%*%EXTENT%

Type C:\HELLO.txt | findstr /I /V /C:"%FILETYPE%">>C:\TEMP.txt

DEL /S/Q "C:\HELLO.txt"

ren "C:\TEMP.txt" "HELLO.txt"

DEL /s/q "C:\TEMP.txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:12:30.167

解决方案：`\*`
可以在`findstr /?`

# github - 如何在 GitHub 上使用协作？所以其他人可以在没有访问主分支的情况下放置他们的代码？

> ID：14314705
> 
> 赞同：5
> 
> 时间：2013-01-14T07:38:44.650
> 
> 标签：github

我希望与其他人合作，但无法弄清楚 GitHub 是如何工作的。我有一个私人存储库，我已将他添加为合作者，但现在呢？

*   他是否必须创建一个他将单独工作的分支？
*   合并将如何进行？
*   合并将如何进行？谁能合并代码？

PS - 我看到了 Stack Overflow 问题*[Do collaborators have commit access on GitHub?](https://stackoverflow.com/questions/5010754/github-collaborators-have-commit-access)* 并查看了[https://github.com/account/organizations/new](https://github.com/account/organizations/new)，所以基本上除非我每月支付 25 美元，否则我不能有人*看*不到整个 Master 分支代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:51:34.540

如果您[将您的同事作为合作者添加到您的存储库](https://help.github.com/articles/how-do-i-add-a-collaborator)（无需组织），他将能够推送到您的存储库。
但他会在任何分支中推动他想要的任何东西。
除非他推动他的专用分支，否则这可能很危险。

另一种选择是让他*分叉*你的回购。

![叉](../Images/1790f1dc8a346b59cdb08c5690418f7c.png)

请参阅“ [github中的origin和upstream有什么区别](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”。

通过使用[拉取请求](https://help.github.com/articles/using-pull-requests)，您的同事会要求您合并他想要考虑的特定提交。
但他将拥有自己的 GitHub 存储库来推送，这意味着他可以推送（或破坏）任何他想要的东西。

# c - OpenCV 距离变换的错误输出

> ID：14314709
> 
> 赞同：1
> 
> 时间：2013-01-14T07:39:16.343
> 
> 标签：c, opencv

我试图找到二进制图像的每个像素的距离变换，使用 C 的 OpenCV 库。根据 DT 的规则，每个零（黑色）像素的值应该是 0。而 255（白色）像素的值应用距离变换后，应该是到零（黑色）像素的最短距离。

我在这里发布代码。

```
IplImage *im = cvLoadImage("black_white.jpg", CV_LOAD_IMAGE_GRAYSCALE);
IplImage *tmp = cvCreateImage(cvGetSize(im), 32, 1);
cvThreshold(im, im, 128, 255, CV_THRESH_BINARY_INV);
//cvSaveImage("out.jpg", im);
cvDistTransform(im, tmp, CV_DIST_L1, 3, 0, 0 );
d = (uchar*)tmp->imageData;
da = (uchar*)im->imageData;

for(i=0;i<tmp->height;i++)
                          for(j=0;j<tmp->width;j++)
                          {
                                                   //if((int)da[i*im->widthStep + j] == 255)
                                                   fprintf(f, "pixel value = %d DT = %d\n", (int)da[i*im->widthStep + j], (int)d[i*tmp->widthStep + j]);
                          }
                          cvShowImage("H", tmp);
                          cvWaitKey(0);
                          cvDestroyWindow("H");
fclose(f); 
```

我将像素值及其 DT 值写入文件。事实证明，一些 0 像素的 DT 值为 65、128 等，即它们不是 0。此外，我还有一些 DT 值为 0 的白色像素（我猜这不会发生至少应为 1)。

任何形式的帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T10:40:12.547

我想这是因为`CV_THRESH_BINARY_INV`它反转了你的形象。因此，对于 DT，您期望为白色的区域实际上是黑色的。

当然，反转图像可能是您的意图。显示图像`im`并进行比较以`tmp`进行验证

# sorting - 如何对具有 HAS_MANY 关系的 cgridview 列进行排序？

> ID：14314712
> 
> 赞同：2
> 
> 时间：2013-01-14T07:39:22.613
> 
> 标签：sorting, yii, cgridview

我需要对 yii (CGridView) 中具有 HAS_MANY 关系的列进行排序。任何人都可以帮助我解决这个问题。

**这是我的 CGRIDVIEW 专栏：**

```
 array(
     'name' => 'emp_cat_id',
     'type' => 'Raw',
     'value' => '$data->getProjectContactClasses($data)',
     'htmlOptions' => array('width' => '350'),
), 
```

**这是我在模型中获取 ProjectContactClasses 的函数**

```
public function getProjectContactClasses($model)
    {      
        $classes = "";
        if (!empty($model->emp_cat_id))
        {
            $criteria = new CDbCriteria();
            $criteria->addInCondition("id", array($model->emp_cat_id));
            $model = LaborClassification::model()->findAll($criteria);

            if (count($model) > 0)
            {
                foreach ($model as $row)
                {
                    $classes .= $row->classification . ", ";
                }
                $classes = substr($classes, 0, -2);
            }
        }
        return $classes;
    } 
```

**这是关系**

```
'project_contacts' => array(self::HAS_MANY, 'ProjectContact', 'project_id'), 
```

* * *

如果有人需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:06:34.753

```
return new CActiveDataProvider($this, array(
        'criteria' => $criteria,
        'sort'=>array(
            'attributes'=>array(
                'emp_cat_id.labor_lassification'=>array(
                    'asc'=>'emp_cat_id.labor_lassification',
                    'desc'=>'emp_cat_id.labor_lassification DESC',
                ),
                '*',
            ),
        ),
    )); 
```

# java - EJB 事务回滚异常

> ID：14314713
> 
> 赞同：5
> 
> 时间：2013-01-14T07:39:23.723
> 
> 标签：java, jakarta-ee, ejb, weblogic, rollback

我正在使用 ejb-2 我得到以下异常。有人可以告诉我这是什么意思，以及可能的解决方案是什么：

> 错误（致命）：EJB 异常：; 嵌套异常是：
> javax.ejb.TransactionRolledbackLocalException: Error committing transaction:; 嵌套异常是：
> weblogic.transaction.internal.AppSetRollbackOnlyException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:08:29.213

尝试找出真正的例外是什么。为此，请将您的 ejb 转换为使用 bean 管理的事务。然后您可以手动提交并捕获提交引发的异常。

WebLogic 喜欢在使用容器管理事务时隐藏提交阶段抛出的异常。通常原因是 EJB 层不知道的数据库约束，例如。Oracle 中基于函数的唯一索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T10:25:28.410

我也面临同样的问题。我只是想和大家分享我的经验。在上述例外中没有提及实际例外是正确的。为了揭示该异常，我使用**了 wlspy.jar**工具。使用此工具，我在配置的日志文件中获得了内部 sql 活动。因此，我得到了隐藏的 sql 约束异常。配置步骤： 1) 在您的 weblogic 服务器类路径中添加 wlspy.jar。2）在数据库源中添加wlspy相关的配置。

例如：

**jdbc:bea:DB2://db2host:50000;spyAttributes=(log=(file)/opt/bea/logs/mySpy.log;timestamp=yes)**

之后重新启动您的 weblogic 服务器并执行该活动。您将在 mySoy.log 文件中获得与数据库相关的日志。就我而言，我得到了实际的约束异常。

通过此链接： [http ://docs.oracle.com/cd/E21764_01/web.1111/e13753/spy.htm#JDBCD469](http://docs.oracle.com/cd/E21764_01/web.1111/e13753/spy.htm#JDBCD469)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T14:51:24.203

您应该刷新对数据库的更改，然后 ejb 可能会向您显示真正的异常。如果不起作用，请将 flush 到似乎可能导致异常的点。通过这种方式，您可以保证找到真正的位置以及异常的真正原因。

# amazon-web-services - Amazon RDS 批量插入比本地数据库慢？

> ID：14314714
> 
> 赞同：1
> 
> 时间：2013-01-14T07:39:27.363
> 
> 标签：amazon-web-services, amazon-rds

我编写了一个节点程序，可以批量插入数据库，并为每个完成的插入记录一个控制台日志。

```
function insert(){
    var sql = "insert into todo (user, content) values (xx, xx);" +
              "insert into todo (user, content) values (xx, xx);" +
              "insert into todo (user, content) values (xx, xx);" +       
    (.... 4000 lines of insert)

    db.insert(sql,function success(){
        console.log('done');
    });
}

for(i=0;i<10000;i++){
    insert();
} 
```

我有两个这样的设置：

```
1) Local machine to local DB. 

2) Amazon EC2 Micro Instance to Amazon RDS Micro Instance from same region

*Both my.cnf leave to default with only max_allowed_packet=500m set. 
```

结果是当RDS完成1次插入时，我的本地机器已经完成了24次插入。我尝试将我的 RDS 升级到小型实例，它没有什么不同。

我的问题是为什么在这种情况下亚马逊的 rds 速度较慢。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:59:36.457

我认为问题可能与微实例性能有关。经过一些测试，我们完全摆脱了微型实例并切换到小型实例。另一方面，我没有发现任何关于 RDS 速度的问题，即使是小型实例。

看看 EC2 微实例是如何工作的以及应该在哪里使用它们： http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)

从我对您的测试用例的理解来看，您的设置大多看起来像第二个图，这不适合微实例。尝试使用一个小实例并在那里比较结果。即使它仍然比您的本地机器慢，那么您将获得可比较的结果。

# jsf-2 - JSF 2.0 p:tabView 和 ui:composite 没有完全呈现 html 响应

> ID：14314715
> 
> 赞同：1
> 
> 时间：2013-01-14T07:39:29.220
> 
> 标签：jsf-2, primefaces

我正在使用 WebSphere Application Server 7.0.0.25、Myfaces 2.0.7、Primefaces 3.4.1

我有以下使用 p:tabView 的页面有 3 个选项卡

dashboard.xhtml 仪表板是具有 header.xhtml 的主页。第一个选项卡有 4 个单选按钮。单击每个单选按钮将加载使用 AJAX以***ui:composite编写的不同代码段。***第二个选项卡在 p:dataTable 的页脚中有一些按钮。当我单击按钮时，一个对话框将显示数据表中的选定行。

我在服务器日志中看到以下错误。

> 渲染视图时出错 [/dashboard.xhtml] javax.faces.FacesException: 找不到从“tabView:userList:addUserButton”引用的标识符为“:tabView:panelGridNewUserDialog”的组件。

但是当我在浏览器中看到“查看源代码”时，HTML 代码不完整。我已将 p:dialog 标记放在 AppUserManagement.xhtml 的底部。所有这些代码都不会呈现为 HTML。并且命令按钮未显示在数据表页脚中

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">
<c:set var="webCtxRoot" value="#{request.contextPath}" />
<f:view locale="#{language.locale}">
    <h:head>
        <link rel="stylesheet" type="text/css"
            href="#{webCtxRoot}/theme/ldapmanager.css" />
        <title>Welcome To Ldap Manager Application</title>
        <h:outputScript name="jsf.js" library="javax.faces" id="script_id" />
    </h:head>
    <h:body>
        <h:form id="headerForm" prependId="false">
            <h:inputHidden value="#{authenticatedBackingBean.session}"
                id="sessionValidator" />
            <ui:include src="header.xhtml" />

            <p:spacer height="8" width="160" />
            <p:tabView id="tabView" dynamic="true" cache="true">
                <p:tab id="applicationUserManagementTab"
                    title="Application User Mgmt">
                    <ui:include src="AppUserManagement.xhtml" />
                </p:tab>
                <p:tab id="userManagementTab" title="User Management">
                    <p:panelGrid id="dashboardContentGrid" styleClass="panelDiv">
                        <p:row>
                            <p:column>
                                <p:panelGrid>
                                    <p:row>
                                        <p:column>
                                            <p:fieldset legend="Choose User Operation" id="buttonPanel">
                                                <p:selectOneRadio id="userOperationType"
                                                    value="#{userAct.userAction}">
                                                    <f:selectItem id="newUser" itemLabel="New User"
                                                        itemValue="UMNewUser" />
                                                    <f:selectItem id="modifyUser" itemLabel="Modify User"
                                                        itemValue="UMModifyUser" />
                                                    <f:selectItem id="deleteUser" itemLabel="Delete User"
                                                        itemValue="UMDeleteUser" />
                                                    <f:selectItem id="modifyPassword"
                                                        itemLabel="Change / Reset Password"
                                                        itemValue="UMModifyPassword" />
                                                    <p:ajax update="ContentPanel"
                                                        listener="#{userAct.returnSelectedValue}" />
                                                </p:selectOneRadio>
                                            </p:fieldset>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:growl id="growl" showDetail="true" life="20000"
                                                autoUpdate="true" />
                                            <p:outputPanel id="ContentPanel" layout="block">
                                                <ui:include src="#{userAct.userAction}.xhtml" />
                                            </p:outputPanel>
                                        </p:column>
                                    </p:row>

                                </p:panelGrid>
                            </p:column>
                            <p:column>
                                <p:outputPanel id="helpPanel">
                                    <p:inputTextarea id="helpWindow" rows="18" cols="80"
                                        value="Move your mouse over various fields for instant help" />
                                </p:outputPanel>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:tab>
                <p:tab id="userGroupManagementTab" title="User Group Mgmt">
                </p:tab>
            </p:tabView>
        </h:form>
    </h:body>
</f:view>
</html> 
```

header.xhtml:

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">        
                                <p:panelGrid id="pnlgLocaleChange" border="0">
                                <p:row>
                                        <p:column rowspan="2">
                                                <p:graphicImage value="images/TelenorLogoWhite.png" />
                                        </p:column>
                                        <p:column colspan="3" style="width:16%">
                                                <h:outputText id="ApplicationBanner" class="bannerLabel"
                                                        value="#{msgs.title}" />
                                                <h:outputText id="ApplicationVersion" value="#{msgs.Version} #{UsersBean.releaseLabel}" class="ApplicationVersion"/>
                                        </p:column>
                                </p:row>
                                <p:row>
                                        <p:column styleClass="LoginBannerLocale" style="padding-right: 0px !important;">
                                                <h:outputText id="languageLabel" value="#{msgs.locale}" />
                                        </p:column>
                                        <p:column style="width:5%;">
                                                <p:selectOneMenu value="#{language.locale}" styleClass="localeSelectClass">
                                                        <f:selectItems value="#{language.countries}" />
                                                        <p:ajax update="@form" />
                                                </p:selectOneMenu>
                                        </p:column>
                                </p:row>
                                <p:row rendered="#{not empty request.remoteUser}">
                                        <!-- <p:column styleClass="HeaderWelcomeMsg" >
                                                <h:outputText value="#{msgs.Welcome}, #{authenticatedBackingBean.userFullName}" style="float:middle !important; "/>
                                        </p:column> -->
                                        <p:column styleClass="LoginBannerLocale" colspan="2">
                                                <h:outputText id="loggedInUser" value="#{msgs.loginUserMessage} #{request.remoteUser } (#{authenticatedBackingBean.roleDescription})| " />  
                                                <h:commandLink value=" #{msgs.Logout}" onclick="document.getElementById('headerForm').action='ibm_security_logout?logoutExitPage=/Login.xhtml';" />
                                        </p:column>
                                </p:row>

                        </p:panelGrid>
</ui:composition> 
```

应用用户管理.xhtml

```
 <?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">

                <p:fieldset id="fieldAppUserMgmt">
                        <p:panelGrid id="filterUsers" style="width:100%;">
                                <p:row>
                                        <p:column style="left: 40%;">
                                                <h:outputText id="applicationNameLabel" value="#{msgs.AppUserMgmt_AppName_Label}" />                                    
                                                <p:selectOneMenu value="#{AppUserManagementBean.applicationName}" styleClass="localeSelectClass" id="applicationName">
                                                        <f:selectItem itemLabel="Select One" itemValue="-1" />
                                                        <f:selectItems value="#{AppUserManagementBean.systemDetails}" />
                                                        <p:ajax update="groupName,userList" listener="#{AppUserManagementBean.loadGroupDetails}" />
                                                </p:selectOneMenu>
                                        </p:column>
                                </p:row>
                                <p:row>
                                        <p:column style="left: 40%;">
                                                <h:outputText id="groupNameLabel" value="#{msgs.AppUserMgmt_AppGroup_Label}" />                                    
                                                <p:selectOneMenu value="#{AppUserManagementBean.groupName}" styleClass="localeSelectClass" id="groupName">
                                                        <f:selectItem itemLabel="Select One" itemValue="-1" />
                                                        <f:selectItems value="#{AppUserManagementBean.groupDetails}" />
                                                        <p:ajax update="userList" listener="#{AppUserManagementBean.loadUserDetails}" />                                                                                                                
                                                </p:selectOneMenu>
                                        </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <p:dataTable id="userList" var="user" value="#{AppUserManagementBean.lstUsrDetails}" 
                                            paginatorAlwaysVisible="false" paginator="true" rows="10" 
                                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}   #{msgs.AppUserMgmt_AppUsers_List_PageSizeLabel} {RowsPerPageDropdown}" 
                                            rowsPerPageTemplate="5,10,15" rowIndexVar="rowNum" filteredValue="#{AppUserManagementBean.lstFilteredUsrDetails}"
                                            widgetVar="usersFilter" rowKey="#{user.userId}" selectionMode="single" selection="#{AppUserManagementBean.selectedUser}">  

                                                <f:facet name="header">                                                           
                                                        <h:outputText id="appUsrMgmtUserListHeader" style="float:left" value="#{AppUserManagementBean.applicationName} #{msgs.AppUserMgmt_AppUsers_List_Title}"/>
                                                        <p:inputText id="globalFilter" onkeyup="usersFilter.filter()"  style="float:right"/>
                                                        <p:watermark forElement="tabView:userList:globalFilter" value="#{msgs.AppUserMgmt_AppUsers_List_Find}"/>
                                                </f:facet>

                                                <p:column id="colRowNo" headerText="#{msgs.AppUserMgmt_AppUsers_List_RowNo}">  
                                                    <h:outputText value="#{rowNum+1}" />  
                                                </p:column>

                                                <p:column id="colUserID" headerText="#{msgs.AppUserMgmt_AppUsers_List_UserID}" filterBy="#{user.userId}" filterMatchMode="contains"  style="text-align:bottom" filterStyle="display:none;visibility:hidden">  
                                                    <h:outputText value="#{user.userId}" />    
                                                </p:column>  

                                                <p:column id="colName" headerText="#{msgs.AppUserMgmt_AppUsers_List_FullName}" filterBy="#{user.firstName} #{user.lastName}" filterMatchMode="contains" style="text-align:bottom" filterStyle="display:none;visibility:hidden">  
                                                    <h:outputText value="#{user.firstName} #{user.lastName}" />  
                                                </p:column>                                             
                                                <p:column id="colRole" headerText="#{msgs.AppUserMgmt_AppUsers_List_Group}" filterBy="#{user.role}" filterMatchMode="contains" style="text-align:bottom" filterStyle="display:none;visibility:hidden">  
                                                    <h:outputText value="#{user.role}" />  
                                                </p:column>  

                                                <p:column id="colEmail" headerText="#{msgs.AppUserMgmt_AppUsers_List_Email}" filterBy="#{user.email}" filterMatchMode="contains" style="text-align:bottom" filterStyle="display:none;visibility:hidden">  
                                                    <h:outputText value="#{user.email}" />  
                                                </p:column>  

                                                <p:column id="colExpiryDate" headerText="#{msgs.AppUserMgmt_AppUsers_List_ExpiresOn}"  filterBy="#{user.expiryDate}" filterMatchMode="contains" style="text-align:bottom" filterStyle="display:none;visibility:hidden">  
                                                    <h:outputText value="#{user.expiryDate}" />  
                                                </p:column>      
                                                <f:facet name="footer">  
                                                    <p:commandButton id="addUserButton" value="#{msgs.AppUserMgmt_AppUsers_NewUser_ButtonLabel}" icon="ui-icon-circle-plus" update=":headerForm:panelGridNewUserDialog" oncomplete="addNewUserDialog.show()"/>
                                                </f:facet>                                                                                                                                  
                                        </p:dataTable>                                      
                                    </p:column>
                                </p:row>
                        </p:panelGrid>
                </p:fieldset>  
                <p:dialog id="addNewUserDialog" header="#{msgs.AppUserMgmt_AppUsers_NewUser_Dialog_Header} #{AppUserManagementBean.groupName},#{AppUserManagementBean.applicationName}" widgetVar="addUserDialog" resizable="false"  
                              width="400" showEffect="clip" hideEffect="fold">
                            <p:panelGrid id="panelGridNewUserDialog" styleClass="insertPage">
                                <p:row>
                                <p:column>
                                        <h:outputText id="userIDDialog" value="#{msgs.userId}" />
                                </p:column>
                                </p:row>                            
                            </p:panelGrid>
                </p:dialog> 
</ui:composition> 
```

我在这里错过了什么吗？我试图在堆栈中找到相关问题，但找不到任何问题。我很高兴被重定向到正确的问题或链接（如果有）。

我会很感激任何人的帮助。

```
 <tfoot>
                                                <tr>
                                                    <td class="ui-datatable-footer ui-widget-header"
                                                        colspan="6">
                                                        <button id="tabView:userList:addUserButton" name="tabView:userList:addUserButton"
                                                            class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"> 
```

其余代码不会发送到浏览器。很多 HTML 代码没有被渲染。可能缺少一些 HTTP 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:46:47.140

您设置`dynamic="true"`这意味着选项卡是延迟加载的。这就是为什么您的 html 代码不完整的原因。删除这个属性，看看发生了什么。

您还编写了 addNewUserDialog.show()，但您的小部件 var 名称是 addUserDialog，因此请尝试使用 addUserDialog.show()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T14:54:50.617

您必须尝试更新“ `:headerForm:tabView:panelGridNewUserDialog`”

以`formId="headerForm"`开头并添加`":"`

# scroll - 在 Components Lwuit 中滚动加速

> ID：14314722
> 
> 赞同：2
> 
> 时间：2013-01-14T07:39:46.630
> 
> 标签：scroll, lwuit

**lwuit**中的大部分组件都像 TextArea 或 Container 一样缓慢滚动。

它是内置在组件定义中的吗？或者我可以控制超速吗？

如果是这样，我该如何控制它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:49:55.597

LWUIT 大部分时间都花在了`Font.stringWidth`，一次又一次地将宝贵的 CPU 周期浪费在基本相同的字符串上（每次滚动步骤/焦点更改后都会重新绘制）。

解决方案是将 Font 子类`'String Width Pool'`化，添加一个跟踪最多 30 个字符串及其宽度的字符串。然后，您使用此缓存返回您已经知道的字符串的宽度。这一变化使得在相同设备上的滚动/轻弹变得更快、更快。

实施它，如果你卡在某个地方，请告诉我。

# python - Python，如何用一级路径替换“任何东西”或“*”

> ID：14314728
> 
> 赞同：1
> 
> 时间：2013-01-14T07:40:03.090
> 
> 标签：python

我正在制作一个用于解析档案中的日志文件的搜索脚本，并且被困在一件我在其他任何地方都找不到资源的特定事情上。

我需要以某种方式将此字符串的“id1”替换为“任何东西”。简而言之，我希望脚本在路径中的那个特定位置接受任何内容。这是否只能通过使用 logZip 作为一个巨大的正则表达式来实现？

```
logZip = ("c:/logs/" + str(id1) + "/" + str(id2) + "/" + str(id1) + "_log_" + str(dateID) + "_" + str(hourID) + "-00_" + str(id2) + ".zip") 
```

根据要求，我添加了我要定义的示例路径和文件：

```
c:/logs/aaa1/sss2/aaa1_log_2013-01-14-13-00_sss2.zip
c:/logs/aaa2/sss2/aaa2_log_2013-01-14-13-00_sss2.zip
c:/logs/aaa3/sss2/aaa3_log_2013-01-14-13-00_sss2.zip 
```

下一步是用 sss2 部分做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:54:43.020

```
import glob
import os

id1 = '*'
logZip = glob.glob(os.path.join("c:/logs", id1, id2, '{}_log_{}_{}-00_{}.zip'.format(id1, dateID, hourID, id2))) 
```

返回`id1`由通配符替换的文件的完整路径列表`*`。

`os.path.join`使路径构建更加清晰。

如果`logZip`必须是单个文件，则可以使用`glob.iglob`，它返回一个迭代器：

```
id1 = '*'
mask = os.path.join("c:/logs", id1, id2, '{}_log_{}_{}-00_{}.zip'.format(id1, dateID, hourID, id2))
for logZip in glob.iglob(mask):
    # logZip is a single file 
```

# google-analytics - 谷歌转换代码 HTML5

> ID：14314732
> 
> 赞同：0
> 
> 时间：2013-01-14T07:40:24.070
> 
> 标签：google-analytics, google-ads-api

Google Adword 转换代码创建一个宽度 =“1”和高度 =“1”的图像，它们在我的 HTML 中形成一条大白线。

我应该怎么办？

他们创造像

我的代码是 HTML5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:44:29.050

在样式表中将显示设置为无

# hibernate - org.hibernate.tool.hbm2ddl.SchemaExport 和 PostgreSQL

> ID：14314733
> 
> 赞同：3
> 
> 时间：2013-01-14T07:40:27.683
> 
> 标签：hibernate, postgresql, database-schema

我正在使用`org.hibernate.tool.hbm2ddl.SchemaExport`为 PostgreSQL 上的数据库创建生成 SQL 脚本。

简化示例：

```
Properties entityManagerFactoryProperties = new Properties();
entityManagerFactoryProperties.put( "hibernate.dialect", "org.hibernate.dialect.PostgreSQLDialect" );
[…]
Configuration configuration = new Configuration();
configuration.setProperty( "hibernate.dialect", "org.hibernate.dialect.PostgreSQLDialect" );
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory( persistenceUnitName, entityManagerFactoryProperties );
Metamodel metamodel = entityManagerFactory.getMetamodel();
for ( final ManagedType< ? > managedType : metamodel.getManagedTypes() ) {
    Class< ? > entityClass = managedType.getJavaType();
    configuration.addAnnotatedClass( entityClass );
}
SchemaExport schemaExport = new SchemaExport( configuration );
schemaExport.setOutputFile( schemaFile );
schemaExport.setFormat( true );
schemaExport.setDelimiter( ";" );
schemaExport.create( true, false ); 
```

生成的架构看起来像这样

```
alter table TableName 
    drop constraint FK101841AFEA9FC;
[…]
drop table if exists TableName cascade;
[…]
create table TableName (
    dbId int8 not null,
    […]
    compositeSingle_dbId int8,
    primary key (dbId)
);
alter table TableName 
    add constraint FK101841AFEA9FC 
    foreign key (compositeSingle_dbId) 
    references TableName2; 
```

问题在于，如果数据库为空，则第一系列命令 ( `ALTER TABLE`) 将失败，因为它们仅在表存在时才有意义。PostgreSQL 然后执行一个完整的回滚并且没有创建任何东西。

这只发生在约束条件下：对于表，`DROP`语句被正确增强`IF EXISTS`

这是一个休眠错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:34:15.187

代替

```
schemaExport.create( true, false ); 
```

称呼

```
schemaExport.execute(true, false, false, true) 
```

它将创建没有更改/删除语句的 DDL

（有关详细信息，请参阅 javadoc [http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaExport.html](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaExport.html)）

# java - Java RMI - 扩展为远程“定义”接口（遇到非法远程方法）

> ID：14314737
> 
> 赞同：1
> 
> 时间：2013-01-14T07:41:04.653
> 
> 标签：java, networking, interface, rmi

我有一个名为的接口`MessageReceiver`，它正在扩展`java.rmi.Remote`为能够由`UnicastRemoteObject.exportObject(obj)`. 只定义了一种方法：`public boolean receive(Message msg) throws RemoteException;`

接下来，我有一个名为的接口`MessageProvider`，它有一个名为`take()`. 此方法抛出一个`InterruptedException`（因为它打算阻塞）。

为了实现我需要的功能（缓冲区），我有一个类`QueueMessageBuffer`，它有某种队列来排队消息。显然，这个缓冲区*"IS A"* `MessageReceiver` **和** *"IS A"* `MessageProvider`。

所以这是我的第一步：

```
public class QueueMessageBuffer implements MessageReceiver, MessageProvider
{
  // ...
  public boolean receive(Message m) throws RemoteException
  {
    // ...
  }
  public Message take() throws InterruptedException
  {
    // ...
  }
} 
```

使用此类定义，以下工作正常：

```
UnicastRemoteObject.exportObject(new QueueMessageBuffer(), 0); 
```

但是因为我有另一个类，它同时使用 1 个实例**和** `MessageReceiver`，`MessageProvider`所以我试图耦合这两个接口。因此，我创建了

```
public interface MessageBuffer extends MessageReceiver, MessageProvider {} 
```

`QueueMessageBuffer`此外仅实施`MessageBuffer`.

这对我来说似乎是正确的，但现在`exportObject`给了我一个例外：

> java.rmi.server.ExportException：远程对象实现了非法的远程接口；嵌套异常是：java.lang.IllegalArgumentException：遇到非法远程方法：public abstract oertwig.rmichat.net.NetworkMessage oertwig.rmichat.net.MessageProvider.take() 在 sun.rmi.server.UnicastServerRef 处抛出 java.lang.InterruptedException。在 java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:252) 的 java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:310) 的 exportObject(UnicastServerRef.java:198)

问题很简单：为什么？我该如何解决它，保持合理的层次结构但没有例外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:48:17.550

方法 take() 未声明为能够抛出[RemoteException](http://docs.oracle.com/javase/7/docs/api/java/rmi/RemoteException.html)。这个声明是强制性的，所以没有它的方法接口是非法的。RemoteException 在执行远程方法调用期间可能发生的许多通信问题期间引发

# colors - 在三种颜色之间进行插值

> ID：14314742
> 
> 赞同：1
> 
> 时间：2013-01-14T07:41:37.540
> 
> 标签：colors, shader

我需要在颜色 A 和 B 之间进行线性插值，以便在 t=.1 时颜色为 0.5A + 0.5B。我怎样才能做到这一点？

我需要在着色器中使用它，所以不能选择条件语句，因为分支会变得非常慢。我需要表达式形式的解决方案。

这是我的解决方案，速度很慢：

```
fixed3 color1= lerp(colorA, colorB, (1.0 - t) * .5 );
fixed3 borderColor= lerp(colorA, colorB, (1.0 - .1) * .5);
fixed3 color2= lerp(colorA, borderColor, t * 10.0 );

finalColor = lerp(color2, color1, saturate( (t - .1) * 100000.0) ); 
```

最后一个 lerp 是确保插值是 0 或 1。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:25:22.603

我将专注于您问题的第一行：两个颜色值或颜色向量之间的线性插值。

您定义一个标记插值中间点的任意时间点：

```
tm = 0.1 
```

对于颜色矢量**C(t)**的计算，您还需要定义开始时间 t1 或结束时间 t2，或两者都定义：

```
t1 = t2 - 2*(t2-tm) = 2*tm - t2
t2 = t1 + 2*(tm-t1) = 2*tm - t1 
```

要在颜色**A**到颜色**B**之间进行转换，您可以像这样计算颜色分量：

```
C = A + (B - A) * (t - t1) / (t2 - t1) 
```

# static-linking - 如何在没有 makefile 或任何配置的情况下链接 MinGW 中的库？

> ID：14314744
> 
> 赞同：0
> 
> 时间：2013-01-14T07:41:46.713
> 
> 标签：static-linking

我将把需要ws2_32库的程序的源代码提供给一些对c++不太了解的菜鸟程序员。所以对他们来说应该尽可能简单。Visual Studio 的编译器支持#pragma 注释，我可以使用它添加库，但我不知道如何处理其他编译器，如 MinGW 或 GCC。是否有任何代码可以添加到我的源代码中，以便库自动链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:45:56.973

我只想写一个makefile来提取他们需要的所有东西。我想对你和他们来说最容易。

或者有什么真正的理由不用makefile来处理它？我无法想象任何事情都容易得多。

# sql-server-2008 - 明确拒绝授予选项

> ID：14314745
> 
> 赞同：0
> 
> 时间：2013-01-14T07:41:52.467
> 
> 标签：sql-server-2008, grant

据我了解，在 SQL Server 中，DENY 会阻止权限并胜过任何现有的 GRANT。我只是在想是否有办法拒绝“with grant option”，意思是防止任何“with grant option”显式地授予委托人，而不是通过在[此处](http://msdn.microsoft.com/en-us/library/ms187965.aspx)描述的 GRANT 语法中省略它。伪代码中的“GRANT permission DENY GRANT OPTION”之类的东西。

我一直在寻找这样的功能，因为我不希望具有相同 GRANT OPTION 的其他委托人稍后给委托人授予 GRANT OPTION。我正在从安全环境中看待这个问题。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:07:28.317

开箱即用，也许您可​​以拥有一个存储过程，将这些用户授予的权限回滚给另一个用户。您可以通过这些更改触发存储过程或 shell 脚本来完成此操作。如果用户更改超过 3 次，您可能要做的唯一附加项目是锁定用户帐户。

# python - 使用 apache mod_wsgi 部署基于烧瓶的应用程序时的 MySQL 连接

> ID：14314748
> 
> 赞同：1
> 
> 时间：2013-01-14T07:42:27.803
> 
> 标签：python, apache, flask, mod-wsgi

我正在尝试在服务器上部署基于烧瓶的应用程序，但是我遇到了问题。基本处理程序似乎工作正常，但是我连接到 MySQL 的处理程序给了我错误 500。

我使用 apache 和 mod_wsgi 将这个应用程序部署为 Debian linux 上的用户烧瓶。我以该用户身份登录并尝试在不同的端口上手动运行该应用程序，然后它运行得非常好。

我检查了烧瓶日志，这是我看到的错误：

```
[Sun Jan 13 14:33:27 2013] [error] [20130113-14:33PM] [susyapi] [ERROR] Exception on /1/product [GET]
[Sun Jan 13 14:33:27 2013] [error] Traceback (most recent call last):
[Sun Jan 13 14:33:27 2013] [error]   File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1687, in wsgi_app
[Sun Jan 13 14:33:27 2013] [error]     response = self.full_dispatch_request()
[Sun Jan 13 14:33:27 2013] [error]   File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1360, in full_dispatch_request
[Sun Jan 13 14:33:27 2013] [error]     rv = self.handle_user_exception(e)
[Sun Jan 13 14:33:27 2013] [error]   File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1358, in full_dispatch_request
[Sun Jan 13 14:33:27 2013] [error]     rv = self.dispatch_request()
[Sun Jan 13 14:33:27 2013] [error]   File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1344, in dispatch_request
[Sun Jan 13 14:33:27 2013] [error]     return self.view_functions[rule.endpoint](**req.view_args)
[Sun Jan 13 14:33:27 2013] [error]   File "/home/pisarzp/susyapi/susyapi.py", line 36, in product_search
[Sun Jan 13 14:33:27 2013] [error]     cur = db.cursor()
[Sun Jan 13 14:33:27 2013] [error] NameError: global name 'db' is not defined 
```

该应用程序的代码如下：

```
from flask import Flask, url_for, session, redirect, escape, request
from subprocess import Popen, PIPE
import socket
import MySQLdb
import urllib
import json
from datetime import datetime
import decimal
import settings
import logging

@app.route('/')
def api_root():
    return '200 OK test'

@app.route('/version')
def version():
    return '200 OK <BR>Version 0.1'

@app.route('/1/product')
def product_search():
    #get the request parameters
    product_code = request.args.get('code')
    product_code = urllib.unquote(product_code)

    #Fetching all product code from database
    cur = db.cursor() #This is where I get error
    query = "SELECT code from %s GROUP BY 1;" % (settings.DB_PRODUCTS_TABLE)
    cur.execute(query)
    rows = cur.fetchall()

    #Not important part which I cut out
    #...
    # End of cut

    #returning JSON with best matching products info
    products_json = []
    for code in best_matching_codes:
        cur = db.cursor()
        query = "SELECT * FROM %s WHERE code LIKE '%s'" % (settings.DB_PRODUCTS_TABLE, code)

        cur.execute(query)
        columns = [desc[0] for desc in cur.description]
        rows = cur.fetchall()
        for row in rows:
            products_json.append(dict((k,v) for k,v in zip(columns,row)))   

    return json.dumps(products_json, default = date_handler)

logging.basicConfig(
    level=logging.DEBUG,
    format='[%(asctime)s] [%(name)s] [%(levelname)s] %(message)s',
    datefmt='%Y%m%d-%H:%M%p',
)
if __name__ == '__main__':
    app.debug = False
    db=MySQLdb.connect(host=settings.DB_HOST, user=settings.DB_USER, passwd=settings.DB_PASSWD, db=settings.DB_NAME)
    app.run() 
```

-----已编辑----

我在反馈后添加了以下更改：

```
def connect_db():
    db_conn = MySQLdb.connect(host=settings.DB_HOST,user=settings.DB_USER,passwd=settings.DB_PASSWD,db=settings.DB_NAME)
    return db_conn

@app.before_request
def db_connect():
    g.db = connect_db()
@app.teardown_request
def db_disconnect(exception=None):
    g.db.close() 
```

但我仍然收到错误：

```
File "/Users/pisarzp/Desktop/SusyChoosy/susyAPI/susyapi.py", line 84, in db_disconnect
g.db.close()
NameError: global name 'g' is not defined 
```

尝试谷歌搜索，但找不到任何东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:43:45.410

mod_wsgi 忽略条件后的代码块`if __name__ == '__main__'`，您需要在其他地方设置数据库连接。一个好地方是`before_request`和`teardown_request`处理程序，所以你的连接是为每个请求建立和处理的，否则你会遇到麻烦，因为 MySQL 会丢弃长期存在的连接：

```
from flask import g

@app.before_request
def db_connect():
    g.db_conn = MySQLdb.connect(host=settings.DB_HOST,
                                user=settings.DB_USER,
                                passwd=settings.DB_PASSWD,
                                db=settings.DB_NAME)

@app.teardown_request
def db_disconnect(exception=None):
    g.db_conn.close() 
```

# c# - 将 BsonDocument 转换为字符串

> ID：14314751
> 
> 赞同：1
> 
> 时间：2013-01-14T07:42:35.853
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有一个查询需要通过其“_id”返回产品及其所有信息，但是当我打印结果时，我得到的是光标而不是 MongoDB 集合中的值？

```
var query_id = dbCollection.Find(Query.EQ("_id", "50ed4ea05baffd13a44d0154"));
return query_id.ToString(); 
```

结果是

```
MongoDB.Driver.MongoCursor`1[MongoDB.Bson.BsonDocument] 
```

编辑我已经尝试过该`.ToJson()`方法但只返回`[]`

```
var query_id = dbCollection.Find(Query.EQ("_id", "50ed4ea05baffd13a44d0154"));
var r = query_id.ToJson(); 
```

编辑这是代码，它是一个基本的 Windows 窗体应用程序，我正在使用它进行基本测试：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string connectionString = "mongodb://127.0.0.1";
        var server = MongoServer.Create(connectionString);

        if (server.State == MongoServerState.Disconnected)
        {
            server.Connect();
            label1.Text = ("Server is connected to: " + connectionString);
            button1.Enabled = false;
        }
        else
        {
            label1.Text = ("Server Error Check DB location");
        }

        var conn = server.GetDatabase("Acord");

        var dbCollection = conn.GetCollection("Mappings");

        var query = dbCollection.FindAll();
        //textBox2.Text = query.ToList().ToJson();

        var query_first = query.First();
        //textBox2.Text = cursorResult.ToString(); 

        var query_id = Query.EQ("_id", "1");//What ID do I put in here? This is were the error is now!
        var entity = dbCollection.FindOne(query_id);
        textBox2.Text = entity.ToString();
    }
} 
```

这是我得到的错误：

```
An unhandled exception of type 'System.NullReferenceException' occurred in WindowsFormsApplication1.exe 
```

我显然在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:52:38.630

正如您所注意到的，`Find()`它返回一个游标，可用于逐一遍历查询结果。但是你只需要一个返回的项目，所以使用`FindOne()`- 它会返回一个项目而不是光标。

您还应该使用正确的查询。例如，默认情况下 MongoDB 使用内部 12 字节[ObjectID](http://www.mongodb.org/display/DOCS/Object+IDs)，所以这`Query.EQ("_id", "1")`是完全错误的。如果您不确定查询，请`FindOne()`不带任何参数调用。

我建议您尝试在线 MongoDB shell（位于[http://mongodb.org](http://mongodb.org)），其中包含交互式 MongoDB 教程。

# wpf - 具有动态内容的控件高度的 XAML 动画

> ID：14314759
> 
> 赞同：0
> 
> 时间：2013-01-14T07:43:23.840
> 
> 标签：wpf, xaml

我有一个应该最小化的面板，除非用户将鼠标悬停在面板上。它是使用故事板实现的，当用户将鼠标放在控件上时，该故事板可以让面板的高度增加。目前目标高度被硬编码为 400，这是一个糟糕的解决方案，因为每次应用程序启动时面板的内容都会不同（在执行期间它是静态的）。

你如何创建一个让面板增长到当前内容大小的动画？

```
<Window x:Class="MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="MainWindow" Height="500" Width="525">
<Grid>
    <Border Margin="10,0" Background="LightGray" HorizontalAlignment="Left" VerticalAlignment="Top" CornerRadius="0,0,8,8">
        <Border.Effect>
            <DropShadowEffect Opacity="0.5"/>
        </Border.Effect>
        <Border.Triggers>
            <EventTrigger RoutedEvent="Border.MouseEnter">
                <BeginStoryboard>
                    <BeginStoryboard.Storyboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="Height" 
                                             From="25" 
                                             To="400" 
                                             Duration="0:0:0.2" />
                        </Storyboard>
                    </BeginStoryboard.Storyboard>
                </BeginStoryboard>
            </EventTrigger>

            <EventTrigger RoutedEvent="Border.MouseLeave">
                <BeginStoryboard>
                    <BeginStoryboard.Storyboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="Height" 
                                             From="400" 
                                             To="25" 
                                             Duration="0:0:0.2" />
                        </Storyboard>
                    </BeginStoryboard.Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Border.Triggers>
        <StackPanel Margin="5">
            <TextBlock Height="25" Text="My items panel" />
            <ListBox MinWidth="150" MinHeight="100" ItemsSource="{Binding MyItems}" />
        </StackPanel>
    </Border>
</Grid> 
```

编辑：我尝试绑定到 StackPanel 的高度，但这并没有真正帮助，因为它没有考虑到 stackpanel 的边距，从而使面板比需要的短。

```
<DoubleAnimation Storyboard.TargetProperty="Height" 
                 From="{Binding ElementName=NameOfStackPanel, Path=ActualHeight}"
                 To="25" 
                 Duration="0:0:0.2" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:46:51.123

您可以创建一个转换器来处理向 StackPanel 的 ActualHeight 添加边距。您甚至可以使用多值转换器，这样您也可以绑定边距，而不必硬编码软糖因子。最后，您可以将您的堆栈面板包装在另一个面板中（没有边距）并绑定到该面板的高度。

# whitespace - 使用 scanf ( %c) 后输出中的额外空格

> ID：14314775
> 
> 赞同：1
> 
> 时间：2013-01-14T07:44:33.917
> 
> 标签：whitespace, scanf, buffer-overflow

在我第一次运行这个 do/while 循环后，输出似乎总是在 printf 之前有一个额外的空间。我认为这可能与缓冲区溢出有关，但我不太确定如何摆脱它。

任何帮助将不胜感激，谢谢！

```
do {
   printf("Enter a format specifier: ");
   scanf(" %c", fmt+1);
   printf(fmt, value);
} while(*(fmt+1) != 'q'); 
```

**fmt 是一个字符数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:29:39.120

我将您的代码扩展为一个完整的程序，如下所示：

```
#include "stdio.h"

main () {
    char fmt[2] = "% ";
    int value = 23;
    do {
        printf("Enter a format specifier: ");
        scanf(" %c", fmt+1);
        printf(fmt,value);
    } while(*(fmt+1) != 'q');
} 
```

...并得到以下结果：

```
Enter a format specifier: i
23h (Enter a format specifier: d
23h (Enter a format specifier: x
17h (Enter a format specifier: o
27h (Enter a format specifier: q
qh ( 
```

此输出与您似乎观察到的略有不同，但我认为原则上可能相同。如果是这样，我认为它就像您所怀疑的那样：由于声明为 char 数组的事实引起的缓冲区溢出错误，该`fmt`数组的长度不足以包含应位于任何 C 字符串末尾的 null。因此，`printf()`在格式字符之后继续写入随机数据，直到它碰巧遇到一个空值。

更改第四行代码以确保字符串有足够的空间容纳可见字符和终止 null，但仅此而已，即：

```
char fmt[] = "% "; 
```

... 给出以下结果（这可能是您所期望的？）：

```
Enter a format specifier: i
23Enter a format specifier: d
23Enter a format specifier: x
17Enter a format specifier: o
27Enter a format specifier: q
q 
```

有关此问题的更多信息，您可以阅读[Char 数组初始化困境](https://stackoverflow.com/questions/6915737/char-array-initialization-dilemma)。

# svn - SVNKit 中是否有任何方法可以区分文件签入的第一个修订版？

> ID：14314781
> 
> 赞同：1
> 
> 时间：2013-01-14T07:45:36.490
> 
> 标签：svn, svnkit

我的项目有一个功能，用户可以在选定的修订版中选择特定文件`repo A`，我的程序会将其复制到`repo B`.

我使用 , 中的方法`getRevision`来`SVNDirEntry`获取特定文件的修订版本。但它总是返回最新的修订，这可能会导致用户选择与该文件无关的修订（因为我使用该修订来生成`<option>`网页）。

示例：文件第一次在修订版 61 上`InfoStruc.java`签入`repo A`，第二次在修订版 946 上签入。

方法`getRevision`in`SVNDirEntry`将返回 946。如果用户选择`InfoStruc.java`修订版 (1~60)，则会导致找不到文件错误。

有没有什么方法`SVNKit`可以区分哪个版本是签入某个文件的第一个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:59:42.690

第一次提交项目时，它将显示为添加操作。您必须查看该项目的所有日志条目，直到找到它是添加而不是更改的条目。

# c++ - 如何仅为特定程序启用无密码 ssh

> ID：14314785
> 
> 赞同：-5
> 
> 时间：2013-01-14T07:45:59.207
> 
> 标签：c++, linux, ssh

我有一个要求，我希望我的 C++ 程序的用户能够在特定机器上执行无密码“ssh”，但同一用户不应该能够通过普通终端/shell 在同一台机器上执行 ssh。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:40:53.793

使用在不同 UID 下执行的代理程序（允许 ssh 到您的远程主机），并将任何来自您的真实程序的请求转发到代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:59:52.073

在您的程序中硬编码 SSH 密码（可能有点混淆，尽管这并没有多大帮助）。

或者，使用带有密码的[SSH 密钥](http://paulkeck.com/ssh/)，并在程序中对密钥的密码（与 Unix 密码不同）进行硬编码（这样可以让您获得更多控制权）。

你确定你不能忍受用户在每个会话开始时（例如早上）输入一次 SSH 密钥密码吗？每个进一步的 ssh 请求都不需要密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:38:58.957

```
Match User stack
    ForceCommand exectute_me.sh 
```

假设您的用户名是`stack`. 在这种情况下，将上述行放入`sshd_config`. 因此，如果此用户 ( `stack`) 尝试通过 登录服务器`ssh`，则调用的脚本`execute_me.sh`将被执行。

如果你能在 中为这个用户写一些特定的条件`execute_me.sh`，我想你可以对这个用户做你想做的事。

# java - 使用 Google Reflections 获取所有类的列表——但 java.* 似乎丢失了

> ID：14314789
> 
> 赞同：7
> 
> 时间：2013-01-14T07:46:27.663
> 
> 标签：java, class, reflections

我正在使用 google Reflections 包来构建可用于调用的所有类的索引。以下代码应该返回 JVM 中加载的所有类：

```
List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
classLoadersList.add(ClasspathHelper.contextClassLoader());
classLoadersList.add(ClasspathHelper.staticClassLoader());                      
Reflections reflections = new Reflections(new ConfigurationBuilder()
         .setScanners(new SubTypesScanner(false), new ResourcesScanner())
         .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0]))));
Set<Class<? extends Object>> allClasses = 
         reflections.getSubTypesOf(Object.class); 
```

我注意到它返回的集合不包含 java.* 域中的任何内容。熟悉 Reflections 包的人可以告诉我如何获得这些吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:34:19.273

Google Reflections 可用于获取所有类，包括 java.*，尽管它不是它的主要用途。

```
Reflections reflections = new Reflections(
    ClasspathHelper.forClass(Object.class), 
    new SubTypesScanner(false)); 
```

然后：

```
Set<String> allClasses = 
    reflections.getStore().getSubTypesOf(Object.class.getName()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:52:52.463

并非所有类都由普通的类加载器加载；有些是由引导类加载器加载的以加快速度，这可以本地编码（因此无法从 Java 代码访问）。看到这条消息：

[http://lists.jboss.org/pipermail/jboss-development/2008-April/011943.html](http://lists.jboss.org/pipermail/jboss-development/2008-April/011943.html)

请参阅此问题以获取替代方案

[Java - 获取 JVM 中加载的所有类的列表](https://stackoverflow.com/questions/2548384/java-get-a-list-of-all-classes-loaded-in-the-jvm)

# attributes - ember：在错误的标签上评估绑定属性

> ID：14314791
> 
> 赞同：1
> 
> 时间：2013-01-14T07:46:43.147
> 
> 标签：attributes, ember.js, bind, handlebars.js

我想突出显示选定的导航元素，因此我将一个属性绑定到导航栏的 li，如下所示：

```
<li {{bindAttr class="isHome:active"}}>{{#linkTo 'home'}}Home{{/linkTo}}</li> 
```

该属性被正确评估并添加了正确的类 - 但不是添加到 li 中，而是添加到 a 中，结果是：

```
<li class="" data-bindattr-1="1"><a id="ember237" class="ember-view active" href="#/home">Home</a></li> 
```

标记有问题还是这是一个错误？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:56:19.760

这里发生了两件事：

1.  该`isHome`属性未应用于您的`li`
2.  `{{linkTo}}`巧合的是，当它指向的路由处于活动状态时，助手会向链接添加一个类`active`。

这让你觉得`active`班级正在被感动。您可以尝试记录该`isHome`属性（通过`{{log isHome}}`）以查看它是否如您所愿。

# c# - 启用/禁用按钮，按网格中的行

> ID：14314795
> 
> 赞同：0
> 
> 时间：2013-01-14T07:46:59.483
> 
> 标签：c#, wpf, button, grid, datatrigger

我有以下代码。这`listClear`是一个对象，由 ViewModel 填充。我正在使用该对象的属性来填充`Grid`. 在下面的代码中，我应该使用什么属性来`Button`禁用`DataTrigger`. 我想在为空`Button`时禁用`Grid`，否则应该启用它。

```
<Button Grid.Column="3" Margin="2" Command="{Binding Path=ClearCommand}" Content="Clear">
    <Button.Style>
        <Style TargetType="Button">
            <Setter Property="IsEnabled" Value="True" />

                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=listClear}" Value="">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:02:43.840

您可以使用该`List` `Count`属性来指示为空

例子：

```
public partial class MainWindow : Window 
{
    private ObservableCollection<string> myVar = new ObservableCollection<string>();

    public MainWindow()
    {
        InitializeComponent();
        MyList.Add("test");
    }

    public ObservableCollection<string> MyList
    {
        get { return myVar; }
        set { myVar = value; }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        MyList.Clear();
    }

} 
```

xml:

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication11"
        Title="MainWindow" Height="136.3" Width="208" x:Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <Button Content="Clear" Click="Button_Click">
            <Button.Style>
                <Style TargetType="Button">
                    <Setter Property="IsEnabled" Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=MyList.Count}" Value="0">
                            <Setter Property="IsEnabled" Value="False"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</Window> 
```

如果您只使用`IEnumerable<T>`它有点困难，因为`IEnumerable`没有要绑定的公共属性，您将不得不制作一个转换器。

像这样的东西

```
public class IsEmptyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is IEnumerable)
        {
            var enumerable = (IEnumerable)value;
            foreach (var item in enumerable)
            {
                return false;
            }
        }
        return true;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

xml:

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns:local="clr-namespace:Namespace for converter"
....
....
 <Window.Resources>
        <local:IsEmptyConverter x:Key="IsEmptyConverter" />
 </Window.Resources>
....
....
   <DataTrigger Binding="{Binding Path=MyList, Converter={StaticResource IsEmptyConverter}}" Value="true"> 
```

# android - 如何在android中将html ul li解析为数组字符序列

> ID：14314798
> 
> 赞同：0
> 
> 时间：2013-01-14T07:47:40.917
> 
> 标签：android, android-listview

我有一个从资产中获取的 html 视图。但我想解析`<ul><li>Category 1</li></ul>`为字符序列数组，所以我可以把它放到listview中。

我的 HTML 数据：

```
<html>
<body>
<ul>
<li>Category 1</li>
<li>Category 2</li>
<li>Category 3</li>
<li>Category 4</li>
</ul>
</body>
</html> 
```

我想得到结果

```
CharSequence[] myList={"Category 1","Category 2","Category 3","Category 4"}; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:22:51.473

使用本地 html 资产作为列表视图的数据源有点奇怪，但无论如何..

要将标签的内容提取到字符序列数组中，您可以使用类似这样的内容

```
List<String> tagValues = new ArrayList<String>();
final Matcher matcher = Pattern.compile("<li>(.+?)</li>").matcher(theStringWithTags);
while (matcher.find()) {
    tagValues.add(matcher.group(1));
}

CharSequence[] cs = tagValues.toArray(new CharSequence[tagValues.size()]); 
```

干杯，马库斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:01:31.993

您可以使用[HtmlCleaner](http://htmlcleaner.sourceforge.net/javause.php)和 XPATH。
你可以看看这个例子：
[Using XPATH and HTML Cleaner to parse HTML / XML](http://thinkandroid.wordpress.com/2010/01/05/using-xpath-and-html-cleaner-to-parse-html-xml/http://thinkandroid.wordpress.com/2010/01/05/using-xpath-and-html-cleaner-to-parse-html-xml/)
[Here](http://htmlcleaner.sourceforge.net/javause.php)

# file-upload - curl，ftp上传大文件：操作在240000毫秒后超时，收到24514592768字节

> ID：14314799
> 
> 赞同：0
> 
> 时间：2013-01-14T07:47:45.583
> 
> 标签：file-upload, curl, ftp, libcurl, ftp-client

我正在尝试使用 ftp 上传 250 gb 文件...我正在使用 ssh 通道进行校验和控制...

得到这个错误：

```
curl -v -m 240 --disable-epsv --ftp-skip-pasv-ip --quote "TYPE I" -T 28.tar         ftp://ftpkxxx:xxx@213.65.123.123/2012/12/

[root@tester /opt/tester/output]# ./send-logs-to-194.sh
* About to connect() to 213.65.123.123 port 21 (#0)
*   Trying 213.65.123.123...   % Total    % Received % Xferd  Average Speed   Time      Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0connected
* Connected to 213.65.123.123 (213.65.123.123) port 21 (#0)
< 220 (vsFTPd 2.2.2)
> USER ftpkxxx
< 331 Please specify the password.
> PASS xxx
< 230 Login successful.
> PWD
< 257 "/str1/tester_data_backup"
* Entry path is '/str1/tester_data_backup'
> TYPE I
< 200 Switching to Binary mode.
> CWD 2012
< 250 Directory successfully changed.
> CWD 12
< 250 Directory successfully changed.
> PASV
* Connect data stream passively
< 227 Entering Passive Mode (217,65,190,194,29,15).
* Skips 213.65.123.123 for data connection, uses 213.65.123.123 instead
*   Trying 213.65.123.123... connected
* Connecting to 213.65.123.123 (213.65.123.123) port 7439
> TYPE I
< 200 Switching to Binary mode.
> STOR 28.tar
< 150 Ok to send data.
} [data not shown]
  9  250G    0     0    9 22.7G      0  97.3M  0:43:55  0:03:59  0:39:56  102M*         Operation timed out after 240000 milliseconds with 24514592768 bytes received
  9  250G    0     0    9 22.8G      0  97.4M  0:43:54  0:03:59  0:39:55  102M* Closing     connection #0

curl: (28) Operation timed out after 240000 milliseconds with 24514592768 bytes received 
```

我更喜欢 ftp 而不是 scp，因为它比 scp 快...用 ftp 和校验和上传 250gb 文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:24:55.493

您使用 -m 指定允许花费的最长时间（240 秒），那么为什么它实际上在您要求的 240 秒后停止时对您来说是一个错误？

PS。默认使用 TYPE I...

# android - Android：通过 Facebook 应用程序实现“Facebook 类似应用程序”

> ID：14314800
> 
> 赞同：0
> 
> 时间：2013-01-14T07:47:46.027
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我正在用 android 制作一个应用程序，但我在集成 facebook 时遇到了严重的问题。我通过了身份验证，我可以通过我的 android 应用程序**发布到墙上。**但我不知道**如何使这三个按钮如图所示工作**

1.  好友请求
2.  留言
3.  通知

![在此处输入图像描述](../Images/8944fd9df04999dd1ff43b53fcdc7c27.png)

任何有关此的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:30:38.490

我正在研究你的问题。我认为您可以通过 fql 查询来实现您的目标。

1.  **好友请求**
    表名：friend_request

    > SELECT uid_from, time, message FROMfriend_request WHERE uid_to = me();

2.  **消息**
    表名称：mailbox_folder

    > SELECT name, unread_count, total_count FROM mailbox_folder WHERE folder_id = 0 and viewer_id = me()

3.  **通知**
    表名称：通知

    > SELECT notification_id, sender_id, title_html, body_html, href FROM notification WHERE recipient_id= AND is_unread = 1 AND is_hidden = 0 AND created_time >

请参阅[fql 技术指南](https://developers.facebook.com/docs/technical-guides/fql/)

# ipad - iPad使用弹出框本身内的按钮关闭弹出框

> ID：14314801
> 
> 赞同：3
> 
> 时间：2013-01-14T07:47:48.560
> 
> 标签：ipad, uipopovercontroller, dismiss, appdelegate

我的弹出框控制器中有一个按钮。我想用它来关闭弹出框，所以我试图访问呈现视图控制器（“根”视图控制器）的方法（dismissPopover）。

**注意：**关闭弹出框的方法已经在根 VC（即委托）中设置并工作。如果我调用它，它将关闭弹出窗口。我只需要从弹出框访问该方法。

为此，我在 AppDelegate 中设置了一个属性，并获得了一个 rootVC 的实例，如下所示`self.rootController = (ViewController*)self.window.rootViewController;`：然后我将根 VC 类和 AppDelegate 导入到弹出窗口的视图控制器的类中，如下所示。似乎让我可以访问 rootVC 和方法，但结果不会触发该方法。知道我在这里缺少什么吗？

```
#import "ViewController.h"
#import "AppDelegate.h" 
```

连接到按钮的操作：

```
- (IBAction)dismissPopover:(id)sender {

//Checking the button works, it does:
NSLog(@"dismissPopover, from popover");

//Trying to get an instance of the rootViewController, the "presenting view controller"                                  
ViewController *rootVC = [(AppDelegate *)[[UIApplication sharedApplication] delegate] rootController];

//trying to access the method in the rootVC that dismisses the popover
[rootVC dismissPopover];

//Tried the following code, does nothing:
//[self dismissPopoverAnimated:YES];
} 
```

**注意：**我最终放弃了使用弹出框，因为它变得有点过于复杂。我尝试将视图控制器加载到 UIView 中（这样我就可以将 nib 的内容加载到弹出视图中）。这也变得有点复杂。所以，现在我只是以编程方式在 UIView 中构建我想要的界面。到目前为止效果很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T10:01:10.873

1.  `dismissPopoverAnimated:`是`UIPopoverController`类的方法。因此，您需要在“根”视图控制器中引用弹出框控制器。

    ```
    MyRootViewController.myPopoverController = thePopover; 
    ```

2.  该按钮在您的“根”视图控制器中，并且在它的操作方法中：

    ```
    [self.myPopoverController dismissPopoverAnimated:YES]; 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-01T19:30:28.127

在 iOS 8 中，您可以在弹出框内关闭弹出框（至少如果它来自 segue）`dismissViewControllerAnimated:completion:`。但是，在 iOS 7（或更低版本）中不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T09:21:05.813

在弹出框外部单击时会自动关闭它，当您订购一个按钮来关闭它时，您可以简单地在您的 dismissPopover 方法中使用以下代码：

```
 [self.popoverController dismissPopoverAnimated:YES]; 
```

你不需要所有这些乏味的工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-27T11:55:14.143

`[self dismissViewControllerAnimated:YES completion:nil];`

是解决方案；您只需要一个 IBoutlet 或将目标添加到您的按钮，然后调用上面的行

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-02T16:03:29.397

我有同样的问题

只需在您的 buttonClickMethod 中执行：

```
[yourPopoverController dismissPopoverAnimated:YES]; 
```

希望你帮忙！

干杯

# python - 有什么方法可以将 django 用于业务应用程序

> ID：14314805
> 
> 赞同：0
> 
> 时间：2013-01-14T07:48:23.777
> 
> 标签：python, django, django-models, django-admin

我需要使用数据库和一些需要在客户端工作的扩展来构建业务应用程序。我知道有一些为此目的而创建的技术，例如 silverlight，但是 django 模型和管理使使用数据库变得更加容易。我需要添加的扩展应该可以在 Windows 机器上运行并且可以完全访问它们。我知道这违反了浏览器的安全性，但也许有任何方法可以实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:58:58.117

正如您所提到的——有一些为此而构建的技术：Java、Silverlight、Flash/Flex。但 Django 仅用于服务器端开发。

实际上，我认为将部分逻辑转移到客户端没有任何理由，但业务需求通常是困难的事情，所以请看上述技术之一。

因此，当您开始制作应用程序时，请查看[http://django-rest-framework.org/](http://django-rest-framework.org/)之类的内容，以使其与非浏览器客户端兼容。

# javascript - 在函数中使用 jQuery 返回文件的文本

> ID：14314811
> 
> 赞同：1
> 
> 时间：2013-01-14T07:48:33.380
> 
> 标签：javascript, jquery

> **可能重复：**
> [AJAX 函数未返回变量](https://stackoverflow.com/questions/12475269/variable-doesnt-get-returned-from-ajax-function)
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我正在构建一个基本的、仅限本地的应用程序。第一次使用 jQuery - 一旦我确定了一个模板系统（倾向于 jsrender 或 mustache），我将引入一个模板系统。

我正在尝试进行设置，以便可以加载页面（比如说 home.html）并在其中调用一个从文件中提取数据并返回它的函数。

我有这个代码

```
function grabFile(name) {
    $.get(name+'.txt', function(data) {
        ...
    });
} 
```

如果我将 a`Console.log(data)`放在中间，控制台会显示文件的内容。成功。`$('#output').html(data);`如果我在中间使用那里，也会取得类似的成功。

但我想对其进行设置，以便可以使用`<script>grabFile(name);</script>`HTML 文件中的任何位置来调用它。在中间使用`return data;`，对于 jQuery 新手来说，似乎是解决方案......但这不起作用。

帮助？

# c++ - C++ 等价于 matlab regress() 函数

> ID：14314812
> 
> 赞同：1
> 
> 时间：2013-01-14T07:48:38.947
> 
> 标签：c++, matlab, math

我正在寻找`regress()`在 Matlab 中等效的 C++ 函数。这是使用最小二乘算法的多元线性回归。

目前我正在看[犰狳图书馆](http://arma.sourceforge.net)。我不太确定它是否支持这个算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:36:56.840

尝试其中一种[正交分解方法](http://en.wikipedia.org/wiki/Linear_least_squares_%28mathematics%29#Orthogonal_decomposition_methods)，Armadillo 支持它们。

（我不知道 Matlab 或它的`regress()`功能。）

# c - GCC 是否检查数组边界？

> ID：14314813
> 
> 赞同：1
> 
> 时间：2013-01-14T07:48:39.777
> 
> 标签：c, linux, gcc

我编写了一个 C 程序如下，并使用 GCC 4.6.3 版本对其进行了编译。

```
#include <stdio.h>

int main(void)
{
    char array1[7] = "network"; // no space for \0 in array here
    char array2[5] = "network"; // even here, no space for \0 in array

    printf("1\. %s\n",array1);
    printf("2\. %s\n",array2);
    return 0;
} 
```

编译时：-

```
warning: initializer-string for array of chars is too long [enabled by default] 
```

程序的输出是：-

```
1\. network
2\. netwo 
```

在 array2 的输出中：- netwo+不可打印的字符。具有十六进制值 7F 的不可打印字符。

我的问题是：-

*   打印array1的值时，为什么打印“network”后不打印垃圾值，就像打印array2一样。

这个疑问得到了 array1 和 array2 中没有 NULL 终止符这一事实的支持，那么为什么只有在 array2 的输出之后才产生垃圾值呢？

那么，GCC 会检查数组边界吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:54:27.130

`network`纯粹是运气不好，它不会打印垃圾；周围恰好有一个零字节。您正在调用未定义的行为，因此允许任何结果。

C 编译器确实检查过长的初始值设定项，但明确要求允许“不终止 null”版本（尽管他们仍然可以警告它，但通常不会；GCC 4.7.1 不会）。

对于一般的数组访问，编译器通常不检查数组边界，尽管在某些情况下有时可以从 GCC 4.7.1 获取信息（需要很多选项，包括`-O`优化）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:53:31.780

您正在利用未定义的行为，任何事情都可能发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:53:52.030

当您使用太长的字符串初始化 char 数组时，您会使用未定义的行为。这意味着任何事情都可能发生，即使出现了正确的值。

# telerik - RadScheduler 不在 MonthView 上工作

> ID：14314815
> 
> 赞同：5
> 
> 时间：2013-01-14T07:48:54.643
> 
> 标签：telerik, radscheduler

我想根据用户使用的视图向用户显示不同的内容。为此，我自定义了 AppointmentTemplate 和 AppointmentCreated 事件。我还想显示具有动态高度的约会，这意味着它们会扩展以填充内容，但在某些日子它什么也没有缩小。发生的事情是在 MonthView 上，只有标题显示在[照片](http://tinypic.com/r/34ilirs/6)中：

这是DayView：[照片](http://tinypic.com/r/fz3ga8/6)

这是 AppointmentCreated

```
 protected void sched_AppointmentCreated(object sender, AppointmentCreatedEventArgs e) {

        using (DBFactory link = new DBFactory()) {
            int evtID = int.Parse(e.Appointment.ID.ToString());
            if (evtID == 0) {
                evtID = SessionManager.Instance.LastInsertedCalendarEventID;
            }
            CalendarEvent ce = link.GetCalendarEvent(evtID);

            Label lblHeader = (Label)e.Container.FindControl("lblHeader");
            Label lblDescription = (Label)e.Container.FindControl("lblDescription");
            Label lbldates = (Label)e.Container.FindControl("lbldates");
            Label lblParticipants = (Label)e.Container.FindControl("lblParticipants");
            Label lblLocale = (Label)e.Container.FindControl("lbllocale");

            switch (sched.SelectedView) {

                case SchedulerViewType.DayView: 
                    lblLocale.Text = string.Format("{0}", ce.EventLocation1.Location);
                    lblHeader.Text = string.Format("{0} - {1} ", ce.EventType1.EventTypeName, ce.Subject);
                    lblDescription.Text = string.Format("{0}", ce.Description);
                    lbldates.Text = string.Format("{0:hh:mm}h - {1:hh:mm}h", ce.StartDate, ce.EndDate);
                    lblParticipants.Text = string.Format("{0}", link.GetUsernamesFromEvent(evtID));  
                break;

                case SchedulerViewType.WeekView:
                case SchedulerViewType.MonthView: 
                    lblLocale.Text = string.Format("{0}", ce.EventLocation1.Location);
                    lblHeader.Text = string.Format("{0} - {1} ", ce.EventType1.EventTypeName, ce.Subject);
                    lblDescription.Text = string.Format("{0}", ce.Description);
                    lbldates.Text = string.Format("{0:hh:mm}h - {1:hh:mm}h", ce.StartDate, ce.EndDate);
                    lblParticipants.Text = string.Format("{0}", link.GetInitialsFromEvent(evtID));
                break;

            }
        }
    } 
```

这是完整的标记

```
 <tk:RadScheduler ID="sched" runat="server" AppointmentStyleMode="Default" DayEndTime="19:00:00" AllowInsert="true" AllowEdit="true" AllowDelete="true"
                EnableDescriptionField="True" FirstDayOfWeek="Monday" LastDayOfWeek="Friday"
                ShowNavigationPane="true" ShowFooter="False" StartEditingInAdvancedForm="true"
                StartInsertingInAdvancedForm="true" Height="551px"
                OnFormCreated="sched_FormCreated"
                OnAppointmentCommand="sched_AppointmentCommand"
                OnAppointmentCreated="sched_AppointmentCreated"
                OnAppointmentDataBound="sched_AppointmentDataBound" 
                Skin="Web20">
                <MonthView  AdaptiveRowHeight="true" MinimumRowHeight="50" VisibleAppointmentsPerDay="30"/>
                <AdvancedForm Modal="true" />
                <ExportSettings OpenInNewWindow="true" FileName="SchedulerExport">
                    <Pdf PageTitle="Schedule" Author="Telerik" Creator="Telerik" Title="Schedule"></Pdf>
                </ExportSettings>
                <TimelineView UserSelectable="false" />
                 <AppointmentContextMenuSettings EnableDefault="true" />
                <TimeSlotContextMenuSettings EnableDefault="true" />
                <TimeSlotContextMenus>
                    <tk:RadSchedulerContextMenu ID="SchedulerTimeSlotContextMenu" runat="server">
                       <Items>
                           <tk:RadMenuItem Text="New Appointment" Value="CommandAddAppointment" />
                        </Items>
                    </tk:RadSchedulerContextMenu>
                </TimeSlotContextMenus>
                <AppointmentContextMenus>
                    <tk:RadSchedulerContextMenu runat="server" ID="ContextMenu1">
                        <Items>
                            <%--<tk:RadMenuItem Text="Ir para dia" Value="CommandNavigateDay" />--%>
                            <tk:RadMenuItem Text="Editar" Value="CommandEdit" />
                            <tk:RadMenuItem Text="Apagar" Value="CommandDelete" />
                            <%--<tk:RadMenuItem Text="Exportar Para PPF" Value="CommandExport"></tk:RadMenuItem>--%>
                        </Items>
                    </tk:RadSchedulerContextMenu>
                </AppointmentContextMenus>
                <AppointmentTemplate>
                    <asp:Label runat="server" ID="lblHeader" Font-Bold="true" />
                    <hr />
                    <table border="0">
                        <tr>
                            <td style=" border-color:transparent;"><span style="font-weight:bold;">Descricao: </span></td>
                            <td style=" border-color:transparent;"><asp:Label ID="lblDescription" runat="server" /></td>
                        </tr>
                        <tr>
                            <td  style=" border-color:transparent;"><span style="font-weight:bold;">Participantes: </span></td>
                            <td  style=" border-color:transparent;"><asp:Label ID="lblParticipants" runat="server" /></td>
                        </tr>
                        <tr>
                            <td  style=" border-color:transparent;"><span style="font-weight:bold;">Duracao: </span></td>
                            <td  style=" border-color:transparent;"><asp:Label ID="lblDates" runat="server" /></td>
                        </tr>
                        <tr>
                            <td  style=" border-color:transparent;"><span style="font-weight:bold;">Local: </span></td>
                            <td  style=" border-color:transparent;"><asp:Label ID="lblLocale" runat="server" /></td>
                        </tr>
                    </table>
                </AppointmentTemplate>
                <AdvancedInsertTemplate>
                    <div class="rsAdvancedEdit rsAdvancedModal" style="position: relative; margin-right: -100px">
                        <div class="rsModalBgTopLeft"></div>
                        <div class="rsModalBgTopRight"></div>
                        <div class="rsModalBgBottomLeft"></div>
                        <div class="rsModalBgBottomRight"></div>
                        <div class="rsAdvTitle">
                            <h1 class="rsAdvInnerTitle"><%# Container.Appointment.Owner.Localization.AdvancedNewAppointment %></h1>
                            <asp:LinkButton runat="server" ID="LinkButton1" CssClass="rsAdvEditClose"
                                CommandName="Cancel" CausesValidation="false" ToolTip='<%# Container.Appointment.Owner.Localization.AdvancedClose %>'>
                                        <%# Container.Appointment.Owner.Localization.AdvancedClose%>
                            </asp:LinkButton>
                        </div>
                        <div class="rsAdvContentWrapper" style="background-color: #ffffff;">
                            <table border="0">
                                <tr>
                                    <td>
                                        <asp:Label runat="server" Text="Sumário" ID="lblSummaryHdr" /></td>
                                    <td colspan="3">
                                        <asp:TextBox ID="txtSubject" runat="server" CssClass="textbox" Columns="60" Text='<%# Bind("Subject") %>' /></td>
                                    <td>
                                        <asp:Label ID="TextBox1" runat="server" Text='<%# Bind("ID") %>' Visible="false" /></td>
                                </tr>
                                <tr>
                                    <td>Descrição</td>
                                    <td colspan="3">
                                        <asp:TextBox ID="txtDescription" CssClass="textbox" Columns="60" runat="server" Text='<%# Bind("Description") %>'></asp:TextBox><br />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Inicío</td>
                                    <td>
                                        <tk:RadDateTimePicker ID="startInput" SelectedDate='<%# Bind("Start") %>' runat="server"></tk:RadDateTimePicker>
                                    </td>
                                    <td>Fim</td>
                                    <td>
                                        <tk:RadDateTimePicker ID="finishInput" SelectedDate='<%# Bind("End") %>' runat="server"></tk:RadDateTimePicker>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Tipo</td>
                                    <td>
                                        <tk:RadComboBox ID="ddlEventType" runat="server" CssClass="combo" />
                                    </td>
                                    <td>Sala</td>
                                    <td>
                                        <tk:RadComboBox ID="ddlLocations" runat="server" CssClass="combo" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Grupos</td>
                                    <td>
                                        <tk:RadComboBox ID="ddlGroups" runat="server" CssClass="combo" CheckBoxes="true" EnableCheckAllItemsCheckBox="true" />
                                    </td>
                                    <td>Usuários</td>
                                    <td>
                                        <tk:RadComboBox ID="ddlUsers" runat="server" CssClass="combo" CheckBoxes="true" EnableCheckAllItemsCheckBox="true" />
                                    </td>
                                </tr>
                            </table>
                            <asp:Panel runat="server" ID="Panel1" CssClass="rsAdvancedSubmitArea">
                                <div class="rsAdvButtonWrapper">
                                    <asp:LinkButton CommandName="Insert" runat="server" ID="LinkButton2" CssClass="rsAdvEditSave">
                                                <span><%# Container.Appointment.Owner.Localization.Save%></span>
                                    </asp:LinkButton>
                                    <asp:LinkButton runat="server" ID="LinkButton3" CssClass="rsAdvEditCancel" CommandName="Cancel" CausesValidation="false">
                                                <span><%# Container.Appointment.Owner.Localization.Cancel%></span>
                                    </asp:LinkButton>
                                </div>
                            </asp:Panel>
                        </div>
                    </div>
                </AdvancedInsertTemplate>
                <AdvancedEditTemplate>
                    <div class="rsAdvancedEdit rsAdvancedModal" style="position: relative; margin-right: -100px">
                        <div class="rsModalBgTopLeft"></div>
                        <div class="rsModalBgTopRight"></div>
                        <div class="rsModalBgBottomLeft"></div>
                        <div class="rsModalBgBottomRight"></div>
                        <div class="rsAdvTitle">
                            <h1 class="rsAdvInnerTitle"><%# Container.Appointment.Owner.Localization.AdvancedEditAppointment %></h1>
                            <asp:LinkButton runat="server" ID="LinkButton4" CssClass="rsAdvEditClose"
                                CommandName="Cancel" CausesValidation="false" ToolTip='<%# Container.Appointment.Owner.Localization.AdvancedClose %>'>
                                    <%# Container.Appointment.Owner.Localization.AdvancedClose%>
                            </asp:LinkButton>
                        </div>
                        <div class="rsAdvContentWrapper" style="background-color: #ffffff;">
                            <table>
                                <tr>
                                    <td>Sumário</td>
                                    <td colspan="3">
                                        <asp:TextBox ID="txtSubject" runat="server" CssClass="textbox" Columns="60" Text='<%# Bind("Subject") %>' /></td>
                                </tr>
                                <tr>
                                    <td>Descrição</td>
                                    <td colspan="3">
                                        <asp:TextBox ID="txtDescription" CssClass="textbox" Columns="60" runat="server" Text='<%# Bind("Description") %>'></asp:TextBox><br />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Inicío</td>
                                    <td>
                                        <tk:RadDateTimePicker ID="RadDateTimePicker1" SelectedDate='<%# Bind("Start") %>' runat="server"></tk:RadDateTimePicker>
                                    </td>
                                    <td>Fim</td>
                                    <td>
                                        <tk:RadDateTimePicker ID="RadDateTimePicker2" SelectedDate='<%# Bind("End") %>' runat="server"></tk:RadDateTimePicker>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Tipo</td>
                                    <td>
                                        <tk:RadComboBox ID="RadComboBox1" runat="server" CssClass="combo" />
                                    </td>
                                    <td>Sala</td>
                                    <td>
                                        <tk:RadComboBox ID="ddlLocations" runat="server" CssClass="combo" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Grupos</td>
                                    <td>
                                        <tk:RadComboBox ID="RadComboBox3" runat="server" CssClass="combo" CheckBoxes="true" EnableCheckAllItemsCheckBox="true" />
                                    </td>
                                    <td>Usuários</td>
                                    <td>
                                        <tk:RadComboBox ID="RadComboBox4" runat="server" CssClass="combo" CheckBoxes="true" EnableCheckAllItemsCheckBox="true" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Privado</td>
                                    <td colspan="3">
                                        <asp:CheckBox runat="server" ID="CheckBox1" AutoPostBack="false" Checked="false" />
                                    </td>
                                </tr>
                            </table>
                            <asp:Panel runat="server" ID="Panel2" CssClass="rsAdvancedSubmitArea">
                                <div class="rsAdvButtonWrapper">
                                    <asp:LinkButton CommandName="Update" runat="server" ID="LinkButton5" CssClass="rsAdvEditSave">
                                            <span><%# Container.Appointment.Owner.Localization.Save%></span>
                                    </asp:LinkButton>
                                    <asp:LinkButton runat="server" ID="LinkButton6" CssClass="rsAdvEditCancel" CommandName="Cancel" CausesValidation="false">
                                            <span><%# Container.Appointment.Owner.Localization.Cancel%></span>
                                    </asp:LinkButton>
                                </div>
                            </asp:Panel>
                        </div>
                    </div>
                </AdvancedEditTemplate>
            </tk:RadScheduler> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:43:12.610

在 Telerik 网站上有一篇关于此的知识库文章：

[http://www.telerik.com/support/kb/aspnet-ajax/scheduler/auto-expand-the-height-of-the-appointment.aspx](http://www.telerik.com/support/kb/aspnet-ajax/scheduler/auto-expand-the-height-of-the-appointment.aspx)

# iphone - 在sqllite中将多个列添加到表中

> ID：14314817
> 
> 赞同：0
> 
> 时间：2013-01-14T07:49:08.677
> 
> 标签：iphone, ios, ipad, sqlite

我可以使用alter table 在单个查询执行中将多个列添加到表中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:55:53.417

不，您不能在单个查询执行中添加多个列。SQLite 支持有限的 ALTER TABLE 子集。因此您必须一一添加它们。

[请参阅 sqlite 的文档](http://www.sqlite.org/lang_altertable.html)

# c++ - C++ 2 重载有类似的转换

> ID：14314819
> 
> 赞同：1
> 
> 时间：2013-01-14T07:49:11.773
> 
> 标签：c++, operator-overloading

我正在为基本类型编写包装类，以便可以输入它们......除非我遇到了问题。我需要这两种方法来使它变得更好：

```
Integer32(FastInteger32 value);
Boolean operator>(Integer32 value);
operator FastInteger32(); 
```

除非我在“FastInteger”和“Integer”之间使用“>”运算符，否则编译器会看到两条可能的路径，并且不只是选择一个，它会爆炸。有没有办法告诉它只选择一个？

整个代码：

```
typedef unsigned int FastInteger32;

class Integer32
{
public:
    Integer32(FastInteger32 value);
    Boolean operator>(Integer32 value);
    operator FastInteger32();
private:
    FastInteger32 value;
};

int main()
{
    Integer32 a = 5;
    FastInteger32 b = 5;
    if (a < b) { }  // Doesn't know what to do here, convert b to Integer32 and compare or convert a to FastInteger32 and compare
} 
```

顺便说一句，你们摇滚，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:31:00.263

问题在于您的构造函数（`Integer32(FastInteger32 value);`）。单参数构造函数应该（几乎）总是被声明为`explicit`. 只需将声明更改为`explicit Integer32(FastInteger32 value);`; 定义不应改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:34:20.930

C++ 总是更喜欢根本没有转换的重载。因此，添加`bool operator<(FastInteger32, Integer32)`和`bool operator<(Integer32, FastInteger32)`将消除所有歧义。

# unix - 使用 tar 命令多次写入磁带机

> ID：14314823
> 
> 赞同：1
> 
> 时间：2013-01-14T07:49:48.300
> 
> 标签：unix, tar, data-persistence

我正在使用命令

```
 tar -cvfE $TAPE_DRIVE $BACKUP_FILE 
```

第一次写入磁带。它就像一个魅力。

但是，当磁带中已经有一个文件（旧备份）时，我使用命令

```
 tar -rvfE $TAPE_DRIVE $BACKUP_FILE 
```

每次都令人失望。

* * *

磁带上有足够的空间 (1.3TB)。

我一次只写 80-90GB 的文件。

磁带安装在本地。

如果我尝试在磁带上列出文件，但在写入磁带失败后，我得到了写入它的旧（第一个）文件。

* * *

我应该使用其他命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:24:35.183

显然，本机 tar 命令并不完美并且存在错误。建议使用 -i（忽略目录校验和错误）标志来解决这个问题，但在我的情况下它没有。

使用 GNU tar 解决了我的问题。只需使用 gtar 而不是 tar，它就像一个魅力。所以命令就像

```
gtar -cvf $TAPE_DRIVE $BACKUP_FILE 
```

和

```
gtar -rvf $TAPE_DRIVE $BACKUP_FILE 
```

# oracleforms - 尝试打开表单时 Oracle Forms 崩溃

> ID：14314828
> 
> 赞同：0
> 
> 时间：2013-01-14T07:49:58.783
> 
> 标签：oracleforms

当我尝试在本地表单环境中打开表单时，Oracle 表单崩溃。这之前对我有用，但是在重新安装表单环境后，我确实开始收到此错误。表单也在服务器上正常工作。我在 Java 控制台中收到以下错误：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: oracle/bali/share/sort/StringComparator
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethod(Unknown Source)
    at java.awt.Component.isCoalesceEventsOverriden(Unknown Source)
    at java.awt.Component.isCoalesceEventsOverriden(Unknown Source)
    at java.awt.Component.access$500(Unknown Source)
    at java.awt.Component$3.run(Unknown Source)
    at java.awt.Component$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Component.checkCoalescing(Unknown Source)
    at java.awt.Component.<init>(Unknown Source)
    at java.awt.Container.<init>(Unknown Source)
    at oracle.ewt.lwAWT.LWComponent.<init>(Unknown Source)
    at oracle.ewt.lwAWT.LWDataSourceChoice.<init>(Unknown Source)
    at oracle.ewt.lwAWT.LWChoice.<init>(Unknown Source)
    at oracle.ewt.comboBox.ComboBox.<init>(Unknown Source)
    at oracle.ewt.comboBox.ComboBox.<init>(Unknown Source)
    at oracle.forms.ui.VComboBox.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at oracle.forms.handler.UICommon.instantiate(Unknown Source)
    at oracle.forms.handler.UICommon.onCreate(Unknown Source)
    at oracle.forms.handler.PopListItem.onCreate(Unknown Source)
    at oracle.forms.handler.ComboBoxItem.onCreate(Unknown Source)
    at oracle.forms.engine.Runform.onCreateHandler(Unknown Source)
    at oracle.forms.engine.Runform.processMessage(Unknown Source)
    at oracle.forms.engine.Runform.processSet(Unknown Source)
    at oracle.forms.engine.Runform.onMessageReal(Unknown Source)
    at oracle.forms.engine.Runform.onMessage(Unknown Source)
    at oracle.forms.engine.Runform.processEventEnd(Unknown Source)
    at oracle.ewt.lwAWT.LWComponent.redispatchEvent(Unknown Source)
    at oracle.ewt.lwAWT.LWComponent.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: oracle.bali.share.sort.StringComparator
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    ... 51 more
Caused by: java.io.IOException: open HTTP connection failed:http://virtualxp-64805:8889/forms/java/oracle/bali/share/sort/StringComparator.class
    at sun.plugin2.applet.Applet2ClassLoader.getBytes(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.access$000(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 55 more 
```

我正在使用 Oracle Forms 10 第 2 版，并且在 Windows XP 模式下运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:49:58.783

经过一番头疼后，我确实发现这是由 Oracle Forms 10 第 2 版 (10.1.2.0.2) 和 Java 6 之间的不兼容引起的。将列表项用作组合框时会发生错误。幸运的是，有一个修复程序，即在本地 Oracle Home 上应用 Oracle Developer Suite 10g 第 2 版 (10.1.2) 补丁集 3 (10.1.2.3.0)。不幸的是，这没有在表格下载网站上列出，因此很容易错过。

# ios - 方法头中的 URL 时解析错误

> ID：14314830
> 
> 赞同：1
> 
> 时间：2013-01-14T07:50:14.487
> 
> 标签：ios, objective-c

在我的项目中，我使用了几个框架（核心数据、社交等）。当框架方法名称包含文本“URL”时，每次出现都会给出解析错误，如下所示：

![在此处输入图像描述](../Images/a8cf296c16b921469cc07401da0d9c41.png)

我不知道问题是什么。我们尝试重新启动 Mac，重新启动 XCode，清理项目和一切。

有人遇到过这个问题吗？我无法在谷歌上找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:54:22.677

听起来好像`URL`在某个地方被`#define`赋予了一些愚蠢的价值。浏览你的头文件。

# c# - 通过代码c#查找对类的所有静态引用

> ID：14314831
> 
> 赞同：0
> 
> 时间：2013-01-14T07:50:21.220
> 
> 标签：c#, reflection

我寻找一种方法来显示类的所有静态出现（类似于 Visual Studio 功能：查找所有引用）。

它应该只通过代码而不是手动。

我想要

1.  仅列出具有特定属性的类
2.  列出对其具有静态引用的所有类（查找与数据类的表绑定）

我的第一步是列出我感兴趣的所有类型：

```
 var result = from t in assembly.GetTypes()
                         where t.IsDefined(typeof(TAttribute), inherit)
                         select t;

            return result.ToList(); 
```

我在第二步遇到问题。我知道如何从一个类中找到属性...。但是怎么可能反过来，找到一个类的所有用法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:53:21.887

您无法使用反射找到静态*引用*，这是`AST`可能知道的。为此，您可能需要使用：[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)（编译器即服务），它可以让您编译和研究 AST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:22:39.120

您无法使用反射在方法主体中找到引用，但您可以找到字段、属性和方法参数/返回值。

您已经知道如何列出所有类型，现在针对每种类型：

`Type.GetProperties`返回一个数组`PropertyInfo`，您可以检查 `PropertyInfo.ProeprtType' 是否在您关心的类型列表中。

字段也是如此`Type.GetFields`

对于您调用的方法`Type.GetMethods`，这将返回一个对象数组`MethodInfo`，以获取您检查的返回类型`MethodInfo.ReturnType`以及参数调用`MethodInfo.GetParameters`和`ParameterInfo.ParameterType`

这只留下定义在方法体内的局部变量，并且不能通过反射访问这些变量

# jquery - 未来与PhoneGap

> ID：14314832
> 
> 赞同：0
> 
> 时间：2013-01-14T07:50:23.617
> 
> 标签：jquery, cordova, storage, offlineapps

我在PhoneGap，HTML5，JQuery，WorkOnLine和OffLine的项目中工作，我想知道我PhoneGAP是否是为公司开发软件的好选择，主要是PHONEGAP是否提供了Storage API（webSQL）将长期维护o我们将来必须更改我们的应用程序并使用其他API / System来拥有SQL存储系统。这个问题是因为我想要一个功能强大且可靠的存储系统，并与 PhoneGAP 等 CrossPlatform 兼容，并且将来我的应用程序将与新的存储 API 兼容。

选项？：API 存储 PhoneGAP、YDN-DB、PersistenceJS、...

当我想要一个未来（几年）的应用程序时，哪个是最好的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:53:57.240

检查[JayData](http://jaydata.org/)进行数据操作。它是全新的，但似乎非常有用。

# variables - 使用 setf、defvar、let 和范围分配变量

> ID：14314834
> 
> 赞同：6
> 
> 时间：2013-01-14T07:50:56.973
> 
> 标签：variables, scope, common-lisp

所以，我已经阅读
[了 lisp 中的 setq 和 defvar](https://stackoverflow.com/questions/3855862/setq-and-defvar-in-lisp)，
[http://www.cs.ucf.edu/courses/cop4020/spr2006/plsetup.html](http://www.cs.ucf.edu/courses/cop4020/spr2006/plsetup.html)和
[在 Lisp 中，我该如何修复“警告：假定特殊？”](https://stackoverflow.com/questions/3860866/in-lisp-how-do-i-fix-warning-assumed-special)
在其他地方关于 setf 和 defvar 之间的区别。所以我决定尝试一下这个想法：

```
CL-USER> (defun foo ()
       (setf x 10)
       (print x))

; in: DEFUN FOO
;     (SETF X 10)
; ==>
;   (SETQ X 10)
; 
; caught WARNING:
;   undefined variable: X
; 
; compilation unit finished
;   Undefined variable:
;     X
;   caught 1 WARNING condition
FOO
CL-USER> x
; Evaluation aborted on #<UNBOUND-VARIABLE X {10040F1543}>.
CL-USER> (foo)

10 
10
CL-USER> x
10 
```

好的，我知道应该使用 setf 来更改现有变量的值，但是未定义变量警告似乎在 SBCL 中处理得很好（尽管我已经读过不同的 CL 实现可能会以不同的方式处理这个问题，因此它不是最好的办法）。

进入第二个测试：

```
CL-USER> (defun bar ()
       (defvar y 15)
       (print y))

; in: DEFUN BAR
;     (PRINT Y)
; 
; caught WARNING:
;   undefined variable: Y
; 
; compilation unit finished
;   Undefined variable:
;     Y
;   caught 1 WARNING condition
BAR
CL-USER> y
; Evaluation aborted on #<UNBOUND-VARIABLE Y {10045033D3}>.
CL-USER> (bar)

15 
15
CL-USER> y
15 
```

根据链接，我将 setf 更改为 defvar 我认为应该一次创建和绑定变量。现在我的未定义变量警告被推送到 (print y) 行......这里发生了什么？

作为第二个问题，我希望函数内分配的任何变量的值在函数之外都无法访问，就像 Python 中的情况一样：

```
>>> def foo():
...     x = 10
...     print x
... 
>>> foo()
10
>>> x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'x' is not defined 
```

我猜这与 common lisp 处理范围的方式有关，即 defvar 创建了一个“全局特殊变量”......所以我最后一次尝试了 (let ...)

CL-USER> (defun baz () (let ((z 10)) (print z)) (incf z 10) (print z))

```
; in: DEFUN BAZ
;     (INCF Z 10)
; --> LET* 
; ==>
;   (SETQ Z #:NEW0)
; 
; caught WARNING:
;   undefined variable: Z
; 
; compilation unit finished
;   Undefined variable:
;     Z
;   caught 1 WARNING condition 
```

在阅读[了 defvar、defparameter、setf 和 setq 之间的区别](https://stackoverflow.com/questions/8927741/whats-difference-between-defvar-defparameter-setf-and-setq)之后，这个似乎工作正常：

```
CL-USER> (defun apple ()
       (defparameter x 10)
       (print 10))

APPLE
CL-USER> x
; Evaluation aborted on #<UNBOUND-VARIABLE X {1004436993}>.
CL-USER> (apple)

10 
10
CL-USER> x
10 
```

重申我的问题：1) setf、defvar 和 let 到底发生了什么？
2) 有没有办法让 common lisp 像 python 示例中那样在函数内限定变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:38:44.800

回答**2)** `DEFVAR`定义一个变量。但它没有被执行。所以编译器不知道表单中的变量`print`- 在编译`DEFUN`表单时.. 它也在`DEFUN`. 因此它不在顶层。作为顶级形式，编译器会识别`DEFVAR`并注意到它`y`是一个全局特殊变量。

> 重申我的问题：1) setf、defvar 和 let 到底发生了什么？2) 有没有办法让 common lisp 像 python 示例中那样在函数内限定变量？

1)`SETF`设置一个变量值，但没有定义它。如果该变量未定义，那么 Common Lisp 标准并没有真正说明会发生什么。大多数 Common Lisp 实现都会做一些有用的事情。通常它会像变量被声明为特殊一样被执行（因此您也会收到警告）。

`DEFVAR`用作定义全局特殊变量的顶级形式（通常不在函数内部）。由于`DEFVAR`声明变量名是特殊的，因此编写一个带有星号的变量是一个非常有用的约定：`*y*`而不是仅仅`y`.

`LET`定义局部变量的范围。

2) Common Lisp 函数有参数列表来引入变量。除此之外，它们没有定义变量范围。如果要在函数中引入局部变量，请使用`LET`.

```
>>> def foo():
...     x = 10
...     print x 
```

是

```
(defun foo ()
  (let ((x 10))
    (print x))) 
```

同样：函数不提供变量的范围，因此在函数内分配变量将自动将其定义为函数局部。改为使用`LET`。

另请注意，这`LET`是*语法糖*，主要是：`(let ((a 1) (b 2)) (+ a b))`基本上与`((lambda (a b) (+ a b)) 1 2)`. 它只是一个简单的函数应用程序，以不同的方式编写，以改进它以供人类读者使用。

Common Lisp 中还支持旧语法：

```
(defun foo (&aux (x 10))
  (print x)) 
```

上面定义了一个局部变量`X`，就像 a`LET`会做的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T09:43:05.380

我会保持简短：

> 1) setf、defvar 和 let 到底发生了什么？

*   `defvar`并`defparameter`用于声明和设置全局特殊变量。它们仅在名称已绑定时有所不同。

*   `setf`用于赋值（给特殊变量、词法变量和其他——可能是自定义的——可设置的地方。）

*   `let`(and `let*`) 创建在其主体内可见的新变量绑定。它可以根据（全局或局部）声明创建词法或特殊绑定。如果没有特殊声明，将创建词法绑定。

> 2) 有没有办法让 common lisp 像 python 示例中那样在函数内限定变量？

将代码放在`let`'s body 中，绑定可见：

```
CL-USER> (defun baz ()
           (let ((z 10))
             (print z)
             (incf z 10) ; i.e. (setf z (+ z 10))
             (print z)))
BAZ
CL-USER> (baz)

10 
20 
20
CL-USER> z
; Evaluation aborted on #<UNBOUND-VARIABLE #x186C611E>. 
```

# node.js - 你如何让节点检查器工作？

> ID：14314839
> 
> 赞同：16
> 
> 时间：2013-01-14T07:51:11.063
> 
> 标签：node.js

安装：

```
npm install node-inspector 
```

运行应用程序：

```
node --debug-brk c:\users\me\desktop\myapp.js // app stops successfully 
```

运行检查器：

```
node-inspector // doesnt work.
C:\Users\me\node_modules\.bin\node-inspector // does work. 
```

打开 chrome 或 safari 并确保调试器已打开并导航到 localhost:5858。但这会从断点释放应用程序，并且它不会显示在 chrome 或 safari 中的任何地方。

![在此处输入图像描述](../Images/4b99e25571145b75b2b46a54ab6ee91f.png)

解决方案：

![在此处输入图像描述](../Images/986ed6a5e229d991611e067e3f2f39d3.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T07:54:06.223

直接访问 http://​localhost:8080。

端口 5858 是 node-inspector 用来与您的节点进程通信的端口；你不能直接访问它。它使用 V8 的原始调试协议。

检查员通过该协议与您的进程对话，并在 8080 上提供一个 HTTP 网站。

此外，npm 应该已放入`C:\Users\me\node_modules\.bin\`您的 PATH 中。您可能需要重新启动才能生效，之后您应该能够`node-inspector`在命令提示符下键入（而不是键入整个路径）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T07:54:10.843

您需要访问`http://localhost:8080/debug?port=5850`而不是`http://localhost:5858`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T08:20:12.457

访问`http://localhost:8080/debug?port=5858`以打开节点检查器控制台。

# spring-security - spring security 3.1 销毁活动用户登录的现有会话

> ID：14314840
> 
> 赞同：0
> 
> 时间：2013-01-14T07:51:12.213
> 
> 标签：spring-security, spring-ldap

我有一个带有 spring security 3.1 和 Ldap 集成的应用程序。以下是到目前为止的需求和实现中的关键点：

1.  应用程序将为单个用户提供多个角色，但这些角色在 ldap 中不存在，因此应用程序仅对来自 ldap 的用户名（或用户 ID）进行身份验证。
2.  角色分别存储在数据库中
3.  从 ldap 成功认证后，通过实现 UserDetailsS​​ervice 将 userdetails 和角色设置为主体对象自定义 userdetails 对象

问题：

1.  用户 A 登录应用程序
2.  用户 B 登录应用程序，用户 A 会话被破坏（这不应该发生，因为用户 A 尚未注销！）
3.  用户 B 注销 用户 A 未找到页面，因为用户 B 登录时其会话已被破坏。

applicationContext-security.xml 如下所示：

```
<beans:bean id="loginUrlAuthenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/login.jsp" />
    <beans:property name="forceHttps" value="true" /> 
</beans:bean>   

<beans:bean id="concurrencyFilter" class="org.springframework.security.web.session.ConcurrentSessionFilter">
    <beans:property name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="expiredUrl" value="/login.jsp?login_error=2" />
</beans:bean>

<beans:bean id="logoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter">
    <beans:constructor-arg value="/login.jsp" />
    <beans:constructor-arg>
        <beans:list>
            <beans:ref bean="logoutEventBroadcaster" />
            <beans:bean id="securityContextLogoutHandler" class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler" />
        </beans:list>
    </beans:constructor-arg>
    <beans:property name="filterProcessesUrl" value="/j_spring_security_logout" />
</beans:bean>

<beans:bean id="myAuthFilter" class="com.*.security.CustomAuthenticationProcessingFilter">  
    <beans:property name="sessionAuthenticationStrategy" ref="sas" />
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="authenticationFailureHandler" ref="failureHandler" />
    <beans:property name="authenticationSuccessHandler" ref="successHandler" />     
</beans:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="adAuthenticationProvider" />
</authentication-manager>

<beans:bean id="adAuthenticationProvider" class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
    <beans:constructor-arg value="*.*.net" />
    <beans:constructor-arg value="ldap://*.*.net:389/" />
    <beans:property name="userDetailsContextMapper">
        <beans:bean class="com.ezadvice.service.CustomUserDetailsContextMapper" />
    </beans:property>       
    <beans:property name="useAuthenticationRequestCredentials" value="true" />
</beans:bean>

<beans:bean id="failureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <beans:property name="defaultFailureUrl" value="/login.jsp?login_error=1" />
</beans:bean>

<beans:bean id="successHandler" class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <beans:property name="defaultTargetUrl" value="/home.do" />
    <beans:property name="alwaysUseDefaultTargetUrl" value="true"/>
</beans:bean>

<beans:bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="maximumSessions" value="1" />
    <beans:property name="exceptionIfMaximumExceeded" value="true" />
    <beans:property name="migrateSessionAttributes" value="false" />
</beans:bean>

<beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

CustomAuthenticationProcessingFilter 类如下所示：

```
public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)
        throws AuthenticationException {

    String roleId = request.getParameter("roleId");
    String username = request.getParameter("j_username");
    TbEzaLoginHistory tbEzaLoginHistory = null;

    // check if the user has authority for the role
    TbEzaUser tbEzaUser = userManagementService.checkUserAndRole(roleId, username);
    if (null != tbEzaUser) {
        tbEzaLoginHistory = userManagementService.saveLoginHistory(tbEzaUser, roleId);
        request.setAttribute("loginHistoryId", tbEzaLoginHistory.getLoginKey());
        request.setAttribute("roleId", roleId);
        request.setAttribute("j_username", username);
        if (UserTracker.increment(username, roleId)) {
            try{
            Authentication attemptAuthentication = super.attemptAuthentication(request, response);
            if (null != attemptAuthentication) {
                CustomUser principal = (CustomUser) attemptAuthentication.getPrincipal();
                if (null == principal && null != tbEzaLoginHistory)
                        userManagementService.deleteFromLoginHistory(tbEzaLoginHistory.getLoginKey());  
                return attemptAuthentication;
            } 
            }
            catch (CommunicationException e) {
                userManagementService.deleteFromLoginHistory(tbEzaLoginHistory.getLoginKey());  
                UserTracker.decrement(username, roleId);        
                RequestDispatcher dispatcher = request.getRequestDispatcher("/login.jsp?login_error=5");                    
                try {
                    dispatcher.forward(request, response);
                } catch (ServletException se) {
                    se.printStackTrace();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
                LOGGER.debug("Connection Timeout error for UserName:"+username +"\n" + e);
                e.printStackTrace();                    
            }

        }else {
            if (null != tbEzaLoginHistory)
                userManagementService.deleteFromLoginHistory(tbEzaLoginHistory.getLoginKey());
            RequestDispatcher dispatcher = request.getRequestDispatcher("/login.jsp?login_error=4");
            try {
                dispatcher.forward(request, response);
            } catch (ServletException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } else {
        RequestDispatcher dispatcher = request.getRequestDispatcher("/login.jsp?login_error=3");
        try {
            dispatcher.forward(request, response);
        } catch (ServletException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    if (LOGGER.isDebugEnabled()) {
        LOGGER.debug(EXITLOGGER + " attemptAuthentication");
    }

    return null;

}

@Override
protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, Authentication authResult) throws IOException, ServletException {
    super.successfulAuthentication(request, response, authResult);
    UsernamePasswordAuthenticationToken token = (UsernamePasswordAuthenticationToken) authResult;
    WebAuthenticationDetails details = (WebAuthenticationDetails) token.getDetails();
    String address = details.getRemoteAddress();
    CustomUser user = (CustomUser) authResult.getPrincipal();
    String userName = user.getUsername();
    System.out.println("Successful login from remote address: " + address + " by username: "+ userName);
}

@Override
protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,
        AuthenticationException failed) throws IOException, ServletException {      
    if (LOGGER.isDebugEnabled()) {
        LOGGER.debug(ENTRYLOGGER + " unsuccessfulAuthentication");
    }
    try {           
        Long loginHistoryId = (Long) request.getAttribute("loginHistoryId");
        String username = (String) request.getAttribute("j_username");
        String roleId = (String) request.getAttribute("roleId");
        userManagementService.deleteFromLoginHistory(loginHistoryId);
        super.unsuccessfulAuthentication(request, response, failed);
        UserTracker.decrement(username, roleId);            
    } catch (Exception e) {
        e.printStackTrace();
    }       

    if (LOGGER.isDebugEnabled()) {
        LOGGER.debug(EXITLOGGER + " unsuccessfulAuthentication");
    }
} 
```

UserTracker 类如下所示：

```
public class UserTracker {
private static Set<String> loggedInUsersDetails = new HashSet<String>();

@SuppressWarnings("unchecked")
synchronized public static boolean increment(String userName, String roleId) {  
    if(loggedInUsersDetails.add(userName.toLowerCase()+'~'+roleId)){
        return true;
    }else 
        return false;

    }       

synchronized public static void decrement(String userName, String roleId) {    
    loggedInUsersDetails.remove(userName.toLowerCase()+'~'+roleId);  
    } 
```

谁能帮我找出为什么用户 A 的会话被破坏了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:46:25.750

在[文档（SavedRequests 和 RequestCache 接口）](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#request-caching)中，他们讨论了 ExceptionTranslationFilter 作业以在调用 AuthenticationEntryPoint 之前缓存当前请求。这允许通过 SavedRequestAwareAuthenticationSuccessHandler （这是默认设置）恢复请求。

但我注意到另一个级别过滤器：RequestCacheAwareFilter。

在重定向到原始请求之后，链调用 RequestCacheAwareFilter，他调用“getMatchingRequest()”，获取请求，然后将其从缓存中删除！然后，当第二次身份验证成功时（来自第二个用户），缓存中没有 URL，所以 Spring 不知道将我重定向到哪里。所以我相信这是问题的根本原因。

我发现这个问题是由于这个jira而产生的： [SEC-1241: SavedRequest not destroy after successful authentication](https://jira.springsource.org/browse/SEC-1241?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:09:34.003

您可以将您的身份验证代码移动到**自定义 AuthenticationManager**中。**AuthenticationManager 将对LdapAuthenticationProvider**和**DaoAuthenticationProvider**有两个依赖项。在身份验证处理期间，它将负责：

*   调用 LDAP 提供程序
*   调用数据库提供者
*   将两个身份验证对象合二为一（来自 LDAP 的凭据和来自 DB 的角色）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:05:51.847

终于找到了解决上述问题的办法。有多种原因：

1.  在测试上述问题时，我犯了一个错误，即当用户在选项卡式浏览器中打开应用程序时，我试图实现并发控制。
2.  Spring内部存储了机器的ip地址，以防止多个用户从同一台机器登录。因此必须进行代码更改，以便不允许具有多个角色的用户从同一台机器登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T07:28:36.537

消除

```
<beans:property name="maximumSessions" value="1" /> 
```

在

```
<beans:bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="maximumSessions" value="1" />
    <beans:property name="exceptionIfMaximumExceeded" value="true" />
    <beans:property name="migrateSessionAttributes" value="false" />
</beans:bean> 
```

# google-maps - 从可拖动标记覆盖 Lat Lon

> ID：14314843
> 
> 赞同：1
> 
> 时间：2013-01-14T07:51:49.920
> 
> 标签：google-maps, google-maps-markers, geocode

我对地理编码/API 有点陌生，但我正在试一试，因为我只需要做一些我认为很简单的事情。我有以下代码，它从带有可拖动标记的设备生成 Lat Lon 地图。到目前为止一切都很好。

我想做的是能够通过标记被丢弃的位置的新坐标来覆盖 Lat Lon 字段。我知道我需要添加一个事件侦听器，但不确定如何让结果覆盖现有的 Lat Lon 字段。

到目前为止，这是我的简单代码。

```
<!DOCTYPE html>
<html>
<body>
<p id="demo">Click the button to get your position:</p>
<button onclick="getLocation()">Find me!</button>
<div id="mapholder"></div>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition,showError);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }

function showPosition(position)
  {
  lat=position.coords.latitude;
  lon=position.coords.longitude;
  latlon=new google.maps.LatLng(lat, lon)
  mapholder=document.getElementById('mapholder')
  mapholder.style.height='250px';
  mapholder.style.width='500px';

  var myOptions={
  center:latlon,zoom:14,
  mapTypeId:google.maps.MapTypeId.ROADMAP,
  mapTypeControl:false,
  navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
  };
  var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);
  var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!",draggable: true});

  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
  }

google.maps.event.addListener(marker, 'dragend', function() {

    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
  });

function showError(error)
  {
  switch(error.code) 
    {
    case error.PERMISSION_DENIED:
      x.innerHTML="User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML="Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML="The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML="An unknown error occurred."
      break;
    }
  }
</script>
</body>
</html> 
```

# php - FB.Event.Subscribe 不适用于某些用户

> ID：14314844
> 
> 赞同：1
> 
> 时间：2013-01-14T07:51:53.947
> 
> 标签：php, facebook-javascript-sdk

> FB.Event.subscribe('edge.create', function(response) { window.location.href="register_form.php"; });

此事件仅针对少数用户帐户缓存，并非针对所有人

facebook在这方面有没有做任何改变..请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:13:28.923

我还注意到 FB.even.subscribe 存在问题，但 'auth.login' 而不是 'edge.create'。更多详细信息： [自动登录 facebook - FB.Event.subscribe auth.login 不起作用](https://stackoverflow.com/questions/14339899/auto-login-facebook-fb-event-subscribe-auth-login-doesnt-work)

**我必须假设 facebook 中存在错误** **或更改**已完成并导致事情出错，**特别是如果代码之前工作**。我可以建议您在调试代码行时使用 firebug 并调试代码行，我发现问题出在“auth.login”上，因为当我用“auth.authResponseChange”替换它时，FB.Event.subscribe 起作用了，所以我说的是你的情况可能是“edge.create”问题。

# liferay - 自定义密码提醒（安全问题）

> ID：14314846
> 
> 赞同：5
> 
> 时间：2013-01-14T07:52:18.117
> 
> 标签：liferay, liferay-6, password-recovery

我使用钩子自定义了注册页面。

`Liferay`我想在用户第一次登录时设置默认安全问题的注册页面中添加安全问题。

那么如何在首次登录时在注册页面中添加安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:41:41.670

首先，您必须自定义`create_account.jsp`页面，添加通常在 上找到的相同选择框和输入`update_reminder_query.jsp`：也就是说，您必须在创建帐户时添加用于输入密码提醒的 UI。

之后，您必须为新用户保存这些值，并且您可能可以挂钩`UserLocalService`实现，添加代码以更新提醒查询。这样的事情应该有效：

```
public class UserLocalServiceImpl extends UserLocalServiceWrapper {

  public UserLocalServiceImpl(UserLocalService userLocalService) {
    super(userLocalService);
  }

  @Override
  public User addUser(
      long creatorUserId, long companyId, boolean autoPassword,
      String password1, String password2, boolean autoScreenName,
      String screenName, String emailAddress, long facebookId, 
      String openId, Locale locale, String firstName, String middleName, 
      String lastName, int prefixId, int suffixId, boolean male, 
      int birthdayMonth, int birthdayDay, int birthdayYear, 
      String jobTitle, long[] groupIds, long[] organizationIds, 
      long[] roleIds, long[] userGroupIds, boolean sendEmail, 
      ServiceContext serviceContext)
    throws PortalException, SystemException {

    // User

    User user = super.addUser(
      creatorUserId, companyId, autoPassword, password1, password2,
      autoScreenName, screenName, emailAddress, facebookId, openId, 
      locale, firstName, middleName, lastName, prefixId, suffixId, male, 
      birthdayMonth, birthdayDay, birthdayYear, jobTitle, groupIds, 
      organizationIds, roleIds, userGroupIds, sendEmail, serviceContext);

    // Reminder query

    String question = ParamUtil.getString(
      serviceContext, "reminderQueryQuestion");
    String answer = ParamUtil.getString(
      serviceContext, "reminderQueryAnswer");

    if (Validator.isNotNull(question) || Validator.isNotNull(answer)) {
      if (question.equals(UsersAdminUtil.CUSTOM_QUESTION)) {
        question = ParamUtil.getString(
          serviceContext, "reminderQueryCustomQuestion");
      }

      updateReminderQuery(user.getUserId(), question, answer);
    }

    return user;
  }

} 
```

您可以覆盖`CreateAccount`Struts 操作，但我认为在服务中执行此操作更安全，以便在发生错误时进行事务处理（例如，如果用户没有为提醒查询输入答案）......但是你应该检查一下以确定！

此外，无论如何，您可能都必须自定义 Struts 操作，以处理可能的`UserReminderQueryException`...

# sql-server - Sql Server 连接问题？

> ID：14314847
> 
> 赞同：0
> 
> 时间：2013-01-14T07:52:19.250
> 
> 标签：sql-server, database-connection

我正在开发一个 C# 项目。我的程序适用于 SQL Server。

以下哪种方法是正确的？

1.  当我启动我的程序时，我打开了一个 SQL Server 连接，当我关闭我的程序时，SQL 连接也关闭了。

2.  当我需要使用 SQL 时，我会打开一个 SQL Server 连接，并在我的工作完成后关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:56:28.873

你告诉我们。两者都是正确的。一种是不好的做法，一种是正常情况下的好做法，但从技术上讲，两者都有效。

取决于上下文。通常你只会使用 2 - 这有很多优点，例如，当服务器关闭或几秒钟时，不必处理被重置的连接。这也意味着您可以轻松地使用多线程并使用多个连接——这一时刻来得更早而不是更晚，当大多数初级开发人员意识到他们宁愿做其他事情时，因为它变得复杂了。

这完全不是 AC# 问题。这是过去 20 年的通用“如何使用数据库”，涵盖了我曾经使用过的每种数据库的每种语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:45:07.780

两者都是正确的，但最佳做法是使用

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();
    //Do something
} 
```

这将在您使用块结束后调用 Dispose。阅读有关连接和连接池的信息[http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.80).aspx)

# iis - 在 IIS 中，使用 MSDeploy 时应如何保留特定于环境/站点的 WEB.CONFIG 设置？

> ID：14314856
> 
> 赞同：1
> 
> 时间：2013-01-14T01:04:51.213
> 
> 标签：iis, iis-7.5, web-config, msdeploy

# 背景

我在一家软件公司从事 QA 工作。

我们有大约六种不同的 Web 应用程序，在任何给定站点上，每个应用程序都可能需要将一些自定义设置添加到其**web.config**文件中。

这些范围可以从应用程序连接到的 Oracle 数据库/模式，到要缓存的搜索结果数量，到在网页上对项目进行排序时使用的层次结构。

我们利用 Microsoft 的 Deploy 包，在客户端站点上安装/更新新版本。

当我们发布新版本时，其中一些自定义设置可能已添加到给定 Web 应用程序的**web.config**文件中或从其中删除，但使用 Deploy 在旧版本之上导入新版本将破坏任何自定义设置可能已经做出来了。

# 备择方案

有一些手动处理的方法，例如通过对新旧**web.config**文件的纯文本比较进行合并，但这些方法很麻烦并且容易出现人为错误。

我正在阅读有关[转换](http://msdn.microsoft.com/en-us/library/dd465326%28VS.100%29.aspx)的内容，并认为它们可能会有用。

还有[使用外部文件的能力（技巧#8）](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)，这似乎是一个不错的方法。

# 改进？

**我们的程序员是否应该为此web.config**文件提供某种半自动合并工具？Deploy 包是否以某种方式提供了这个？

作为最佳实践，我们是否应该使用外部配置文件？

在每个站点自定义此**web.config**文件的概念是否存在根本缺陷，以至于需要重新考虑整个事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:13:42.547

Microsoft 提供 Web.config 转换作为执行此操作的实际方式。您可以在 Visual Studio 和 Web 项目中创建不同的部署配置。然后，当您使用该特定配置构建或构建服务器时，web.config 将转换为包含您想要查看的设置。

[在此处查看有关 web.config 转换的更多信息](http://msdn.microsoft.com/en-us/library/dd465318%28v=VS.100%29.aspx)。

# svn - SVN劫持配置文件

> ID：14314863
> 
> 赞同：0
> 
> 时间：2013-01-14T07:53:47.463
> 
> 标签：svn, clearcase

我需要 svn 中 clearcase 的劫持功能。我**只需要在本地**更改一些配置文件。如何做到这一点防止所有用户提交？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:10:26.027

一个简单的解决方法是使用符号链接。链接，尤其是指向本地文件的指针被保留，但不保留文件的内容。因此，每个本地安装的文件内容可能会有所不同。

如果需要，您可以将此方法与将一些默认文件安装到链接目标的脚本结合起来，以反映您环境的本地差异。

[文档](http://svnbook.red-bean.com/en/1.6/svn.tour.cycle.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:16:13.567

如果您具有管理员权限，则可以定义一个新属性，例如`site:nocommit`. 设置后，您可以让您的预提交挂钩拒绝此文件。

就个人而言，我认为这比其他人建议的“沉默”解决方案要好得多。

# jaxb - MOXy 生成可读的 XML

> ID：14314865
> 
> 赞同：0
> 
> 时间：2013-01-14T07:53:52.233
> 
> 标签：jaxb, eclipselink, jaxb2, moxy

我想知道是否有一种方便的方法来自定义 MOXy 的输出 xml？具体来说，在某些类中，我想在单独的行中打印属性。例如：

```
 <someClass
     attr1="val1"
     attr2="val2"
     attr3="val3"> ...
  </someClass> 
```

如果可能的话，我不想编写完全自定义的编组器，而是编写适配器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:55:58.117

如果您使用的是[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)或其他[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现，您可以在 上设置`Marshaller.JAXB_FORMATTED_OUTPUT`属性以打印输出。`Marshaller`[](http://www.eclipse.org/eclipselink/moxy.php)**[](http://jcp.org/en/jsr/detail?id=222)**

 ****```
Marshaller marshaller = jc.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
marshaller.marshal(foo, System.out); 
```

目前我们不提供在自己的行上输出属性的能力。如果您对此类功能感兴趣，请使用下面的链接针对 MOXy 组件输入增强请求。

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)****

# php - 从 html 表单中的另一个字段获取相同的数据

> ID：14314867
> 
> 赞同：-1
> 
> 时间：2013-01-14T07:54:02.750
> 
> 标签：php, javascript

我是 PHP/Mysql/Javascript 的新手。我正在学习它。

在我的 Html 表单中有 5 个字段：

1.  地位
2.  电子邮件地址
3.  用户名
4.  密码
5.  同意按钮。

我的问题是“如何在用户名字段中获取相同的电子邮件地址？”

例如：**状态**= 先生，**电子邮件地址**= emailaddress@yahoo.com，并且它应该自动使用此**电子邮件地址填写****用户名字**段。我相信它可以用Javascript来完成。因为 javascript 是客户端脚本。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:55:31.703

我会告诉使用 jQuery :-

```
<script>

    $('#email_field_id').change(function(){

        $('#username_field_id').val($('#email_field_id').val())

    })
</script> 
```

或者，如果您严格想使用 Javascript，请使用 getElementById 方法，

您可以将 jquery 插件添加到您的脚本中。从这里下载它[http://jquery.com/](http://jquery.com/)

下载后，在代码上方给出 jquery.js 文件的路径，如下所示：

```
<script language="javascript" src="/* give here path of jquery.js */"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:00:29.550

首先为所有字段提供 id，并假设您已将 id 作为用户名，将 email_id 作为用户名和电子邮件 id 字段，然后使用以下代码

```
$('#email_id').blur(function(){
    $('#username').val($('#email_id').val());
}); 
```

确保您已将 jquery 包含在您的 html 文件中...**

# javascript - 在 JavaScript 的命名空间中存储可重用常量

> ID：14314868
> 
> 赞同：1
> 
> 时间：2013-01-14T07:54:05.990
> 
> 标签：javascript, design-patterns, constructor

请不要将我指向[JavaScript 中的静态变量](https://stackoverflow.com/questions/1535631/static-variables-in-javascript)

我的问题更具体。我是 JS 的新手（只是读了几本书，看一些截屏视频，并阅读关于 JS 中的 monoins/monads 的博客文章）所以请耐心等待））

为了存储可重用的常量，我编写了这样的代码：

```
函数 SVGobj(w, h) {
    this.value = document.createElementNS(SVGobj.svgNS, "svg");
    this.value.setAttribute("版本", "1.2");
    this.value.setAttribute("宽度", w);
    this.value.setAttribute("身高", h);
}
SVG obj.svgNS = "http://www.w3.org/2000/svg";

函数 SVGCircle(cx, cy, r) {
    this.value = document.createElementNS(SVGobj.svgNS, "circle");
    this.value.setAttribute("cx", cx);
    this.value.setAttribute("cy", cy);
    this.value.setAttribute("r", r);
}

```

上面的代码正在工作。**SVGCircle**重用常量**SVGobj.svgNS**。

但我不明白**SVGobj.svgNS =**表达式。根据 JS 规范合法使用 JS 表达式吗？

请注意，此类代码失败：

```
var SVGobj = {};
SVG obj.svgNS = "http://www.w3.org/2000/svg";
函数 SVGobj(w, h) {
    this.value = document.createElementNS(SVGobj.svgNS, "svg");
    this.value.setAttribute("版本", "1.2");
    ...
}
……

```

有错误：

```
TypeError：SVGobj.prototype 未定义

```

当我尝试实例化**新的 SVGobj(320, 240);**

为什么？

我可以通过**new**运算符创建对象，但从**“var Cls = {};”开始** 表达？

有人建议使用：

```
函数 SVGobj(w, h) {
    if (typeof SVGobj.svgNS == 'undefined' ) {
        SVG obj.svgNS = "http://www.w3.org/2000/svg";
    }
   ……
}

```

为什么每次创建对象时都使用**if which 评估？**我的第一个例子对我来说似乎更自然......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:20:59.263

> 但我不明白 SVGobj.svgNS = 表达式。根据 JS 规范合法使用 JS 表达式吗？

是的，**SVGobj**是一个函数，而**svgNS**是函数的一个属性。

> 当我尝试实例化新的 SVGobj(320, 240); 为什么？

是名称冲突。

> var SVGobj = {}; SVG obj.svgNS = "http://www.w3.org/2000/svg";

被以下内容覆盖：

> 函数 SVGobj(w, h) { this.value = document.createElementNS(SVGobj.svgNS, "svg"); this.value.setAttribute("版本", "1.2"); ... }

不要忘记 Javascript 不是面向对象的语言。

> 我可以通过 new 运算符创建对象，但从“var Cls = {};”开始 表达？

这个表达式等于（{} 只是一个捷径）

```
var Cls = new Object(); 
```

> 为什么每次创建对象时都使用 if which 评估？我的第一个例子对我来说似乎更自然......

第一个示例比**if**解决方案更好，但代码可能更简洁。（但它总是可以。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:06:15.037

在这段代码中：

```
var SVGobj = {};
SVGobj.svgNS = "http://www.w3.org/2000/svg";
function SVGobj(w, h) {
    this.value = document.createElementNS(SVGobj.svgNS, "svg");
    this.value.setAttribute("version", "1.2");
    ...
} 
```

你压倒一切：

```
var SVGobj = {}; 
```

和：

```
function SVGobj(w, h) { 
```

`SVGobj.svgNS`那时不再存在。

您可能想要执行以下操作：

```
SVGobj = function (w, h) {
    this.value = document.createElementNS(this.svgNS, "svg");
    this.value.setAttribute("version", "1.2");
    this.svgNS = "http://www.w3.org/2000/svg";

    return {
        svgNS: this.svgNS
    };
};

var o = new SVGobj(100, 100)
console.log(o.svgNS);
// http://www.w3.org/2000/svg 
```

# php - 在 PHP 中使用 Array() 中的变量

> ID：14314874
> 
> 赞同：-1
> 
> 时间：2013-01-14T07:54:15.340
> 
> 标签：php

我想根据加载到页面中的动态数据对数组的内容进行排序。

```
for ($i = 0; $i < $x; $i++) {
    if ($string != "") $string = $string . ", ";
    $string = $string . "\"$id[$i]\" => \"$land[$i]\"";

}
echo $string . "<br>"; //1
$my_array = array($string);
print_r($my_array); //2

asort($my_array);
print_r($my_array); //3

$my_array = array("832838" => "32", "233463" => "3");

asort($my_array);
print_r($my_array); //4 
```

产生这个输出

```
1 "832838" => "32", "233463" => "3"
2 Array ( [0] => "832838" => "32", "233463" => "3" ) 
3 Array ( [0] => "832838" => "32", "233463" => "3" ) 
4 Array ( [233463] => 3 [832838] => 32 ) 
```

第 1 行是第 3 行的 for 语句的输出，它使用变量进行排序，第 4 行直接输入，检查错误在哪里，当使用变量通过 array() 函数时，是混乱的地方发生了，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:04:28.583

使用 rsort 函数解决。

```
<?php
$fruits = array("lemon", "orange", "banana", "apple");
rsort($fruits);
foreach ($fruits as $key => $val) {
    echo "$key = $val\n";
}
?> 
```

上面的示例将输出：

```
0 = orange
1 = lemon
2 = banana
3 = apple 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:40:36.977

如果您想从像您这样的字符串创建数组。用这个：

```
$string = '"832838" => "32", "233463" => "3"';
$my_array = eval("return array({$string});"); 
```

# wordpress - 在 wordpress 的数组中传递 php 值

> ID：14314875
> 
> 赞同：2
> 
> 时间：2013-01-14T07:54:16.210
> 
> 标签：wordpress, function

我有一个像下面这样的功能

```
if(!function_exists('generate_share_urls')) {
  function generate_share_urls() {
      $title = the_title();
      $content = the_content();
    $share_urls = array (
      'facebook'      => 'http://www.facebook.com/sharer/sharer.php?u=',
      'twitter'       => 'http://twitter.com/share?url=',
      'google_plus'   => 'https://plus.google.com/share?url=',
      'linkedin'      => 'http://www.linkedin.com/shareArticle?mini=true&url=',
      'pinterest'     => 'http://pinterest.com/pin/create/button/?url=',
      'email'         => 'mailto:?subject={'.$title.'}&body='.$content.',
      'permalink'     => ''
   );
   return $share_urls;
  }
} 
```

现在，当运行该功能时，我找不到页面的 $title 和 $content。我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:00:17.407

`the_title()`并将**打印**标题/内容，而不是返回它`the_content()`。您需要的是以下功能：**`get_`**

 **```
if(!function_exists('generate_share_urls')) {
  function generate_share_urls() {
      $title = get_the_title();
      $content = get_the_content();
    $share_urls = array (
      'facebook'      => 'http://www.facebook.com/sharer/sharer.php?u=',
      'twitter'       => 'http://twitter.com/share?url=',
      'google_plus'   => 'https://plus.google.com/share?url=',
      'linkedin'      => 'http://www.linkedin.com/shareArticle?mini=true&url=',
      'pinterest'     => 'http://pinterest.com/pin/create/button/?url=',
      'email'         => 'mailto:?subject={'.$title.'}&body='.$content.',
      'permalink'     => ''
   );
   return $share_urls;
  }
} 
```**

# c++ - 了解 Loki 库中的 STATIC_CHECK

> ID：14314876
> 
> 赞同：0
> 
> 时间：2013-01-14T07:54:20.613
> 
> 标签：c++, templates, loki

```
 template<int> struct CompileTimeError;

    template<> struct CompileTimeError<true> {};

    #define STATIC_CHECK(expr,msg)  {CompileTimeError< ((expr)!=0) > Error_##msg; (void)Error_##msg; }

    template <class To , class From>
    To safe_reinterpret_cast(From from)
    {
        STATIC_CHECK(sizeof(From) <= sizeof(To),Destination_Type_Too_Narrow);
        return reinterpret_cast<To>(from);
    }

    void main()
    {
        void *p= NULL;
        char c= safe_reinterpret_cast<char>(p);
} 
```

当我们尝试将指针转换为 char 时，上面的代码工作正常并给出编译时错误。但它不是很清楚 STATIC_CHECK 宏是如何工作的。

根据上面的代码，它应该导致以下

```
STATC_CHECK(false,Destination_Type_Too_Narrow) 
```

上面的宏将扩展如下：

```
CompileTimeError<false>
ERROR_Destination_Type_Too_Narrow;
(void)ERROR_Destination_Type_Too_Narrow; 
```

在上面的宏中，我无法理解这两个语句的含义

```
 ERROR_Destination_Type_Too_Narrow;
    (void)ERROR_Destination_Type_Too_Narrow; 
```

如果有人有清楚的了解，请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:24:21.277

我们对`CompileTimeError<true>`具有默认构造函数的类进行了专门化。其他情况的实例将导致错误，即`CompileTimeError<not true>`未定义类型（在您的情况下，我们尝试创建`ERROR_Destination_Type_Too_Narrow`类型变量`CompileTimeError<false>`）。`(void)VariableName`只是-Wunused的沉默

# php - 将获取当前日期添加到此脚本？

> ID：14314886
> 
> 赞同：0
> 
> 时间：2013-01-14T07:55:24.683
> 
> 标签：php, plugins

我正在使用这个名为 showtime 的插件。我喜欢它，但有一个问题，我想调用当天的日程安排。该插件的某些部分要求使用简码来获取所有日期和那些日子的日程安排。

我在下面的代码中添加了什么以确保它获得当天的时间表。

```
function showtime_schedule_handler($atts, $content=null, $code=""){

global $wpdb;
global $showtimeTable;

//Get the current schedule, divided into days
$daysOfTheWeek = array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

$schedule = array();

$output = '';

foreach ($daysOfTheWeek as $day) {
    //Add this day's shows HTML to the $output array
    $showsForThisDay =  $wpdb->get_results( $wpdb->prepare ( "SELECT * FROM $showtimeTable WHERE dayOfTheWeek = '$day' ORDER BY startTime" )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:01:09.710

我认为使用时间功能来解决问题。

```
<?php
$nextWeek = time() + (7 * 24 * 60 * 60);
                   // 7 days; 24 hours; 60 mins; 60secs
echo 'Now:       '. date('Y-m-d') ."\n";
echo 'Next Week: '. date('Y-m-d', $nextWeek) ."\n";
// or using strtotime():
echo 'Next Week: '. date('Y-m-d', strtotime('+1 week')) ."\n";
?> 
```

上面的示例将输出类似于：

现在：2005-03-30 下周：2005-04-06 下周：2005-04-06

# php - 来自 fgetcsv() 方法的条目的奇怪之处

> ID：14314889
> 
> 赞同：0
> 
> 时间：2013-01-14T07:55:33.687
> 
> 标签：php, fgetcsv

我的 php 代码如下所示，示例中的 CSV 文件如下所示：

Widget1，蓝色，10 美元，有货

Widget2，红色，12 美元，缺货

Widget3，绿色，14 美元

```
<?PHP

    $file_handle = fopen("widgets.csv", "r");

    while (!feof($file_handle) ) {

        $line_of_text = fgetcsv($file_handle, 1024);

        $counter = count($line_of_text)."<br />";

        echo $counter;

        for($i=0; $i<$counter; $i++){
            echo $line_of_text[$i];
        }

        echo "<br />";

    }

    fclose($file_handle);

?> 
```

当我运行代码时，我得到以下结果：

```
4
Widget1 blue $10 have stock
4
Widget2 red $12 out of stock
3
Widget3 green $14
1 
```

我真的不明白为什么最后有一个“1”？为什么`$counter`数组在最后一个循环中有一个元素？而且我也无法使用`$line_of_text[0]`.

有谁知道为什么会这样？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:37:04.827

最后一次调用`fgetcsv`返回`boolean (false)`结果。当你试图计算它时，你得到 1。

我会用[PHP 文件函数](http://php.net/manual/en/function.file.php)替换它：

```
$lines = file("widgets.csv");

foreach ($lines as $line) {

   $line_of_text = str_getcsv($line);

   $counter = count($line_of_text)."<br />";
   echo $counter;

   for($i=0; $i<$counter; $i++){
        echo $line_of_text[$i];
   }
    echo "<br />";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:37:53.900

所有你需要的是

```
$handle = fopen("log.txt", "r");
while ( ($data = fgetcsv($handle, 1024)) !== FALSE ) {
    if(!array_filter($data))
        continue;
    $counter = count($data);
    echo "$counter <br />\n";
    echo implode(" ", $data);
    echo "<br />\n";
}
fclose($handle); 
```

输出

```
4 
Widget1 blue $10 have stock
4 
Widget2 red $12 out of stock
3 
Widget3 green $14 
```

# android - 如何让外部类等待内部 AsyncTask 类？

> ID：14314890
> 
> 赞同：0
> 
> 时间：2013-01-14T07:55:48.013
> 
> 标签：android, multithreading, android-asynctask, signals

我有一个外部类方法，它执行一个扩展 AsyncTask 的内部类，我希望该外部方法然后休眠，直到 AsycnTask 告诉它继续。基本上，我从内部类中的数据库中提取一些东西，并从外部类中调用它，但是我需要外部类等到它实际被检索到之后才能访问它。

```
public class A{
    String response;
    public String returnResponse{
           new B().execute();

           // wait for signal from B

           return response;
    }

    private class B extends AsyncTask<String, Void, Void>{
          response = string pulled from online db;
          //once response has been set, signal A.returnResponce to stop waiting
    } 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:58:24.517

采用

```
new B().execute().get(); 
```

代替

```
new B().execute(); 
```

for make 等待`AsyncTask`执行完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:02:44.957

用这个

```
 new B().execute().get(); 
```

而不是你的代码

```
 new B().execute(); 
```

这将等待来自 B 的信号。

# java - 调用其他类方法的代码效率

> ID：14314894
> 
> 赞同：0
> 
> 时间：2013-01-14T07:56:06.670
> 
> 标签：java, memory, performance

我有三个类，一个是`Feature`，另一个`ContacstsSender`和`ContactsRetriever`。`Feature`类有两个在其他两个类中通用的方法，他们必须使用它们。这两种方法都包含几行代码，例如 6 到 10。我想知道可以将这些类和方法保留在它们所在的位置，或者只是将这些小方法放在两个类中，因为一次又一次地从另一个类调用可能会花费效率？在内存的概念中，从类中调用并在本地调用方法会有什么用？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:57:29.997

通常，从同一个类或另一个类调用将花费相同的[虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)查找。

我建议您参阅 wikipedia 文章以获取完整的详细信息，但以下引用很好地解释了 Peter 的评论：

> 此外，在不使用 JIT 编译的环境中，通常不能内联虚函数调用。虽然编译器可以用例如每个内联体的条件执行来替换查找和间接调用，但这种优化并不常见。为了避免这种开销，只要可以在编译时解析调用，编译器通常会避免使用 vtables。

编译器将知道优化 vtable 查找的方法的一个示例包括`final`在类或函数上使用修饰符（因为这样子类就不可能覆盖该功能）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:59:20.023

> 因为一次又一次地从另一个班级打电话可能会降低成本

重要的不是方法的位置，而是方法使用的参数在内存中的位置。但在 99% 的情况下，即使是参数的位置也无关紧要。

> 在内存的概念中它有什么用处？

内存方面没有区别（除了类加载器加载的类文件的大小，但我们在这里谈论的是数百个字节）。

所以避免代码重复，你会没事的。

与优化一样，应用程序中的瓶颈不在您认为的位置，您应该使用分析器来找到它们。

# gnuplot - 如何在第三列中按键改进彩色线图？

> ID：14314895
> 
> 赞同：1
> 
> 时间：2013-01-14T07:56:12.923
> 
> 标签：gnuplot

![基于运行 kernelkey 的笔记本电脑温度](../Images/8d551a64339e819f7153e03151b25941.png)

我正在尝试绘制笔记本电脑的温度，这是我在[github上的工作文件](https://github.com/kaihendry/laptemp)

我有像这样的纪元、温度和内核标识符数据：

```
1357786501 72 3.6.11-1-ARCH
1357786801 72 3.6.11-1-ARCH
1357787101 60 3.0.57-1-lts
1357787401 54 3.0.57-1-lts
1357800301 52 3.0.57-1-lts
1357800601 48 3.6.11-1-ARCH
1357800902 45 3.6.11-1-ARCH 
```

我最接近我想要的是（使用[这个](https://stackoverflow.com/questions/9082807)）：

```
set term svg size 1024,708
set xdata time
set key outside
set timefmt "%s"
set ytics 5
set format x "%d/%m"
plot "< awk '{if($3 == \"3.0.57-1-lts\") print}' temp.csv" u 1:2 t column(3) w p pt 2, \
 "< awk '{if($3 == \"3.6.10-1-ARCH\") print}' temp.csv" u 1:2 t column(3) w p pt 2, \
 "< awk '{if($3 == \"3.6.11-1-ARCH\") print}' temp.csv" u 1:2 t column(3) w p pt 2, \
 "< awk '{if($3 == \"3.8.1-1-mainline-dirty\") print}' temp.csv" u 1:2 t column(3) w p pt 2 
```

[gihub kaihendry](https://github.com/kaihendry/laptemp/blob/master/temp.gnu)

有没有办法避免使用awk？当我不使用这个 awk 时，它无法绘制不同的内核标识符。

我可以用不同的颜色让它变成一条连续的线吗？

任何想法如何制作没有宽度/高度的 SVG 输出？有什么技巧可以让它看起来更好看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:42:05.660

如果您的 Gnuplot 版本足够新，您可以使用 for 循环和迭代器来循环您想要匹配的不同字符串，例如参见[手册页 88-89](http://www.gnuplot.info/docs_4.6/gnuplot.pdf)或[此博客条目](http://hackerific.net/2008/11/10/gnuplot-gets-iterators/)。要忽略不匹配的行，您可以使用三元运算符 ( `cond ? iftrue : iffalse`) 将这些值设置为 "Not-A-Number" (`1/0`或`NaN`)：

```
set xdata time
set key outside
set timefmt '%s'
set ytics 5
set format x '%d/%m'
set style data linespoints
archs = "`cut -d' ' -f3 temp.csv | sort -u | tr '\n' ' '`"
plot for [arch in archs] 'temp.csv' using 1:((strcol(3) eq arch) ? $2:1/0) title arch 
```

# java - setTextColor 的参数是一个 int 但可以使用 8 位十六进制值的故事是什么？

> ID：14314898
> 
> 赞同：1
> 
> 时间：2013-01-14T07:56:27.077
> 
> 标签：java, android, hex

我真的很困惑，将`TextView.setTextColor(int)`0xFFFFFFFF 作为输入值是完全可以的，但对于 4294967295 的十进制等值则不行

现在，我完全理解为什么第二个值完全超出了 int 的范围。我的问题是为什么十六进制值没有超出范围！

我问的原因是我有一种情况，我从一个文本文件中读取十六进制值，我需要在运行时使用它来设置应用程序中各种文本字段的颜色。

我在尝试 Java 中的各种字符串到 int 方法时遇到了困难（`Long.parseLong`等），但他们都没有做到这一点。

将字符串十六进制值转换为 setTextColor 会满意并正确解释的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:05:17.127

[对于不同形式的整数文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)，JLS 中的不同规则是一个问题

“如果 int 类型的十进制文字大于 2147483648 (231)，或者如果十进制文字 2147483648 出现在除一元减运算符的操作数之外的任何位置 (§15.15.4)，则这是编译时错误。”

“如果十六进制、八进制或二进制 int 文字不适合 32 位，则会出现编译时错误。”

十六进制、八进制或二进制文字可以是负数的 2 的补码表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:59:57.300

也许[`Color`](http://developer.android.com/reference/android/graphics/Color.html)上课会有所帮助：

> 颜色表示为压缩整数，由 4 个字节组成：alpha、red、green、blue。这些值是未预乘的，这意味着任何透明度都仅存储在 alpha 组件中，而不是存储在颜色组件中。组件存储如下 (alpha << 24) | (红色 << 16) | (绿色 << 8) | 蓝色的。每个组件的范围在 0..255 之间，0 表示对该组件没有贡献，255 表示 100% 的贡献。因此不透明黑色将为 0xFF000000（100% 不透明，但没有来自红色、绿色或蓝色的贡献），不透明白色将为 0xFFFFFFFF

# oracle - Oracle，获取所有列

> ID：14314901
> 
> 赞同：0
> 
> 时间：2013-01-14T07:56:35.663
> 
> 标签：oracle, select

我得到了这样的声明：

```
select count(*), 
       article_no_external, 
       article_group_id
  from tbl_erp_article
 where article_no_external != ' '
 group by article_no_external, article_group_id
having count(*) >1 
```

我想按`group_id`and分组`external_no`，这很好用，我得到 128 条记录。但我想查看所有列，而不仅仅是那些 2。我试图将它们添加到`select`，但随后我得到了一个错误`group by`。我还需要 4 列，因为我需要抓取它们以使用所选数据创建新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:22:56.500

```
select article_no_external, article_group_id, col2, col3, col4, col5
from (
  select article_no_external, article_group_id, col2, col3, col4, col,
         count(*) over (partition by article_no_external, article_group_id) as cnt
  from tbl_erp_article
  where article_no_external <> ' '
) 
where cnt > 1; 
```

如果您想查找非空的 varchar 列，请记住 Oracle 没有空字符串。在插入或更新期间转换`''`为。`NULL`所以你可能想要`where article_no_external IS NOT NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:59:47.207

当您聚合计数、总和等字段时，您无法获取所有列值。

结果不完全相同，但这可能会对您有所帮助。

```
select * 
from tbl_erp_article
where  article_no_external != ' ' and
(article_no_external, article_group_id) in (
select article_no_external, article_group_id
from tbl_erp_article
where article_no_external != ' '
group by article_no_external, article_group_id
having count(*) >1) 
```

# mysql - 读取从 MovableType 导出的 SQL/XML

> ID：14314902
> 
> 赞同：1
> 
> 时间：2013-01-14T07:56:38.660
> 
> 标签：mysql, movabletype

有没有办法读取从 MT 导出的 XML 文件？当我打开 XML 文件时，它不是 XML。它只是一串加密的字符。我希望将其中包含的 SQL 带入自定义项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:20:56.153

XML 导出通常是完全可读的。通常它们是用 Gzip 或 ZIP 压缩的，你确定你不是在看压缩文件吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:43:41.120

Glyph，您不应该将可移动类型导出的 .xml 文件导入您的 mysql 数据库。

导出的活字 .xml 文件是活字“备份”功能的结果。您可以使用它在相同或另一个可移动类型安装中恢复您的博客，但使用“恢复”功能。

如您所知，“备份”功能在博客级别可用，位于：工具 -> 备份

或者在系统级别，位于：系统概览 -> 工具 -> 备份

但是，“恢复”功能仅在系统级别下可用：系统概览 -> 工具 -> 恢复

# c++ - cocos2d-x中使用CCBReader出错

> ID：14314908
> 
> 赞同：0
> 
> 时间：2013-01-14T07:57:13.990
> 
> 标签：c++, exc-bad-access, cocos2d-x

我从 *.ccbi 文件加载粒子时遇到了一些问题。这是我的代码：

```
extension::CCBReader reader;
CCNode node2= reader->readNodeGraphFromFile("images/particle1.ccbi"); 
```

但是这段代码在方法 ccArrayEnsureExtraCapacity(ccArray *arr, unsigned int extra) 上的文件 ccCArray.cpp 上出现错误 EXC_BAD_ACCESS

```
while (arr->max < arr->num + extra); 
```

你能帮我解决这个错误吗？

PS我正在使用Xcode

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:30:00.477

我遇到了类似的问题，我从这个地址找到了答案，希望这可以帮助你。

[https://github.com/cocos2d/cocos2d-x/pull/1967/files](https://github.com/cocos2d/cocos2d-x/pull/1967/files)

# css - 将类（fancybox）分配给 SVG 元素

> ID：14314909
> 
> 赞同：1
> 
> 时间：2013-01-14T07:57:21.010
> 
> 标签：css, svg, fancybox

我正在尝试为 SVG 元素分配一个类（video.js）。不知何故，这个类被禁用了。我在下面的尝试不起作用。

```
<a class="video" xlink:href="http://www.youtube.com/v/ZeStnz5c2GI?fs=1&amp;
autoplay=1" title="The Falltape"><circle cx="168" cy="79" r="59" fill="green" />
</a> 
```

当我把它和一些纯文本放在一起时，它工作正常，没有 SVG-circle

```
<a class="video" title="The Falltape" href="http://www.youtube.com/v/ZeStnz5c2GI?
fs=1&amp;autoplay=1"><img src="images/1.jpg" alt="" />TEXT</a> 
```

链接到 video.js

```
Query(document).ready(function() {

$(".video").click(function() {
    $.fancybox({
        'padding'       : 0,
        'autoScale'     : false,
        'transitionIn'  : 'none',
        'transitionOut' : 'none',
        'title'         : this.title,
        'width'         : 853,
        'height'        : 480,
        'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
        'type'          : 'swf',
        'swf'           : {
        'wmode'         : 'transparent',
        'allowfullscreen'   : 'true'
        }
    });

    return false;
  });
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:57:07.233

Don't put the `class` attribute into the XLink namespace, put the `href` attribute into the XLink namespace:

```
<a class="video" xlink:href="http://www.youtube.com/v/ZeStnz5c2GI?fs=1&amp;
autoplay=1" title="The Falltape"><circle cx="168" cy="79" r="59" fill="green" />
</a> 
```

Make sure that the SVG around this is correct, too.

# android - 定位服务准确性

> ID：14314910
> 
> 赞同：0
> 
> 时间：2013-01-14T07:57:21.203
> 
> 标签：android, geolocation

我想知道我的提供商何时提供一个非常糟糕的城市级位置，然后重新生成一个位置。为此，我必须知道从哪个数字到哪个数字的准确度是城市级别，我说的是 getAccuracy() 方法。有没有准确度列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:05:55.427

`getAccuracy()`返回以米为单位的估计精度。例如，您可以决定如果精度大于 1 公里，则可以忽略该位置。

# winforms - Windows 窗体 - 没有 C# 源代码？

> ID：14314911
> 
> 赞同：0
> 
> 时间：2013-01-14T07:57:26.373
> 
> 标签：winforms, definition

我是 Windows 窗体的新手。我不完全理解为什么我看不到方法定义？我只能查看声明吗？

例如，有

```
public class ListBox : ListControl 
```

我想看看它的方法是如何工作的（源代码，不是微软评论）：

```
public override string ToString(); 
```

我只看到这个定义，当我按下“转到定义”时，它会将我转移到这个声明。

有人可以解释一下 System.Windows.Forms 代码是“隐藏的”吗？有人可以描述这个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:29:58.153

.net 是封闭源代码，因此您看不到确切的代码，不仅是 winform，您看不到框架的任何类定义。如果你愿意，你可以使用[反射器](http://www.reflector.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T10:59:00.377

是的，有微软从 2018 年 12 月开始发布的官方源代码，[可以在 Github 上看到](https://github.com/dotnet/winforms)。[Mono](https://github.com/mono/mono/tree/master/mcs/class/System.Windows.Forms)有一个替代（错误）实现。

# android - 在运行时在android问题中添加视图

> ID：14314915
> 
> 赞同：1
> 
> 时间：2013-01-14T07:57:39.783
> 
> 标签：android, android-view

我在运行时以编程方式成功添加了 vie ......但我面临一个问题......实际上我可以在运行时添加视图并将它们拖到屏幕上的新位置..当我添加一个新视图时，所有以前添加的视图都回到一个默认位置..（在LayoutParams中设置）..这是什么原因？？？

下面是在运行时添加视图的代码

```
params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.CENTER_IN_PARENT);
Bitmap bm  = BitmapFactory.decodeResource(getResources(), R.drawable.item4);
ImageView Image = new ImageView(MMSDesignActivity.this);
Image.setImageBitmap(bm);
myRelativelayout.addView(Image, params); 
```

请告诉我一个解决方案...谢谢提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:37:35.307

尝试用以下代码替换 LayoutParams 初始化代码：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:40:54.320

使用 LinearLayout 而不是 RelativeLayout 作为父视图。

# java - java中的字符序列

> ID：14314917
> 
> 赞同：0
> 
> 时间：2013-01-14T07:57:47.500
> 
> 标签：java, regex, matcher

我是做运动的。"字符序列 - 密码，从左到右由 3 个连续数字、4 个连续字母（英文字母）和一组 {*、^、%、#、~、!、& 中的一个或多个字符组成|、@、$}。” 我做了，但我不工作：/

```
public class regex {

    public static void main(String[] args) {
        String regex = "[\\d]{3}[a-aZ-Z]{4}[,@!%]+";
        String txt = "394aZbr@";

        Pattern p = Pattern.compile(regex);
        Matcher m = p.matcher(txt);

        while(m.find()){
            String s = m.group();
            System.out.println("pass : " + s);
        } 
```

我的锻炼结果：

```
pass: 493ahTz@ 
```

你可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:21:47.977

`[\\d]{3}[a-aZ-Z]{4}[,@!%]+`

1.  `[]`只用一个就不要用了，直接`\d`用`{3}`with`\d`即可。
2.  `[a-aZ-Z]`这与 完全相同`[aZ]`，您必须使用`[a-zA-Z]`
3.  最后一部分看起来不错，但您可能想要添加之前提到的所有字符。

结果：`\\d{3}[a-zA-Z]{4}[,@!%]+`

# android - 是否可以在只安装 su 二进制文件且未安装 SuperSU 或 Superuser apk 的情况下以 root 身份运行 shell 命令？

> ID：14314918
> 
> 赞同：5
> 
> 时间：2013-01-14T07:57:55.393
> 
> 标签：android, root, su

我有一部只安装了 su 二进制文件的 Android 手机，它可以工作，这意味着我可以将 shell 插入手机并运行“su”命令，我将成为 root。

当我尝试通过代码运行命令时，无论我尝试以哪种方式运行它，它似乎都不起作用。我尝试了以下命令的许多不同变体。

```
Runtime.getRuntime().exec("su -c ps"); 
```

当我在另一个安装了 Superuser.apk 或 SuperSU.apk 应用程序的 root 手机上运行此命令时，我收到一个对话框，询问我是否要允许它以 root 权限运行。当 apk 不存在时，它永远不会询问并且命令永远不会起作用。

我尝试在第一部手机上安装 apk，但它们似乎没有做任何事情。所以，正如最初的问题所问的那样——>有没有办法在没有安装 SU 应用程序的情况下从应用程序内运行提升的命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T17:14:41.073

这可能是因为您需要将命令`su`作为参数传递给，如下所示：
`su -c 'ls -l'`
或者您可能需要指定完整路径`su`，但我不明白为什么它不能按照您的方式工作： `Runtime.exec("/system/bin/su -c ps")`
或者也许
`Runtime.exec("/system/bin/su -c \'ps\'")`

尝试检查此命令的输出：`System.getenv("PATH")`

另一种变体可能是`Runtime.exec("su -c \'ls -s \'")`
确保您不要忘记转义单引号，因为它们是实际的`String`.

这就是我发现工作最一致的方式，它也适用于没有安装 Superuser 或 SuperSU 的设备，因为这些应用程序只侦听当应用程序尝试运行命令时发出的广播根。@Boardy SuperSU 和 Superuser 拦截广播，因此充当应用程序和 root 权限之间的中间人，但它对于 root 设备不是必需的。如果您想对以 root 身份运行命令的应用程序有更多的控制权，这是必要的，但即便如此，它仍然只限制您决定哪些应用程序，而不是哪些命令，被赋予 root 权限。

此外，您可能想查看[RootTools](https://code.google.com/p/roottools/wiki/Usage)，更具体地说，该[`RootTools.isAccessGiven()`](https://code.google.com/p/roottools/wiki/Usage#Checking_for_su)命令为您的应用程序请求 root 权限。

资料来源：[通过 ADB 以 root 身份启动脚本](https://stackoverflow.com/questions/8761992/launch-a-script-as-root-through-adb?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:52:42.550

并非所有版本的 Android 'su' 都会接受从命令行参数执行的命令。

如果他们不这样做，您将需要让“su”启动一个特权 shell，获取它的输入文件描述符，并将命令输入其中。这已经在 Stackoverflow 上多次介绍过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:53:05.393

我相信您需要安装 SU 应用程序，因为它们为用户提供了是否应允许该应用程序以 root 身份运行的问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-10-28T19:50:08.193

你应该能够做到这一点。

尝试 ：

`adb root shell ls -l`

# ios - 用 NSObject 替换 NSMutableArray 并在 UITableView 中读取它

> ID：14314919
> 
> 赞同：2
> 
> 时间：2013-01-14T07:58:08.083
> 
> 标签：ios, objective-c, uitableview, nsmutablearray, uipickerview

我正在努力做到这一点，以便当我在 picherWheel 上选择船主时，我会将他们的船放在 tableView 中。目前，我正在通过在选择器上提供带有 if-else 系列的 NSMutableArray 来做到这一点，就像这样

```
-(void)updatePicker
{
NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];

boatsForOwner = [[NSMutableArray alloc] init];
if ([boatsFromOwner isEqualToString:@"Owner1"]) {
    [self.boatsForOwner addObject:@"Titanic1"];
    [self.boatsForOwner addObject:@"Titanic2"];
    [self.boatsForOwner addObject:@"Titanic3"];
    [self.boatsForOwner addObject:@"Titanic4"];
    [self.boatsForOwner addObject:@"Titanic5"];
    [self.boatsForOwner addObject:@"Titanic6"];
    [self.boatsForOwner addObject:@"Titanic7"];
    }
if ([boatsFromOwner isEqualToString:@"Owner2"]) {
    [self.boatsForOwner addObject:@"Titanic1"];
    [self.boatsForOwner addObject:@"Titanic2"];
    [self.boatsForOwner addObject:@"Titanic3"];

    } 
```

然后将其读取到这样的 tableView 中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [boatsForOwner count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"SimpleTableCell";

SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];   

cell.nameLabel.text = [boatsForOwner objectAtIndex:indexPath.row];
cell.moreInfoLabel.text = [boatsForOwner objectAtIndex:indexPath.row];

return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{
UITableViewCell *cell = [self.boatsTableView cellForRowAtIndexPath:indexPath];

[self performSegueWithIdentifier:@"boatInfoSegue" sender:cell];

[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

现在，这工作正常。但我认为使用 NSObjects 存储有关船只的信息会很聪明，因为我将在多个地方需要它。所以我做了一些船对象，像这样：

```
cargoShips* Titanic = [[cargoShips alloc]init];
Titanic.name = @"Titanic1";
Titanic.size = @"1000";
Titanic.owner = @"Owner1";
cargoShips* Titanic2 = [[cargoShips alloc]init];
Titanic2.name = @"Titanic2";
Titanic2.size = @"2000";
Titanic2.owner = @"Owner2"; 
```

这可以正确记录并且效果很好。这是第一个问题：

**1）**如何将pickerWheel上的对象链接到* .owner，所以当我在轮子上选择“Owner1”时，我会得到所有船的标签`*.owner = @"Owner1"`？

**2)**如何使用这些船的 *.name 填充 UITableView？

**3）**当表中加载了这些对象时，我怎样才能向目标视图发送关于发送什么对象的消息呢？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:30:22.440

它非常简单直接..只需使用您创建的 CargoShips 类的对象..然后这样做..

```
-(void)updatePicker
{
NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];

boatsForOwner = [[NSMutableArray alloc] init];
if ([boatsFromOwner isEqualToString:@"Owner1"]) {
  cargoShips* Titanic = [[cargoShips alloc]init];
  Titanic.name = @"Titanic1";
  Titanic.size = @"1000";
  Titanic.owner = @"Owner1";

  [self.boatsForOwner addObject:Titanic];

  Titanic = [[cargoShips alloc]init];
  Titanic.name = @"Titanic2";
  Titanic.size = @"2000";
  Titanic.owner = @"Owner2";

  [self.boatsForOwner addObject:Titanic];

  Titanic = [[cargoShips alloc]init];
  Titanic.name = @"Titanic3";
  Titanic.size = @"3000";
  Titanic.owner = @"Owner3";

  [self.boatsForOwner addObject:Titanic];

}else if ([boatsFromOwner isEqualToString:@"Owner2"]) {
  cargoShips* Titanic = [[cargoShips alloc]init];
  Titanic.name = @"Titanic1";
  Titanic.size = @"1000";
  Titanic.owner = @"Owner1";

  [self.boatsForOwner addObject:Titanic];

  Titanic = [[cargoShips alloc]init];
  Titanic.name = @"Titanic2";
  Titanic.size = @"2000";
  Titanic.owner = @"Owner2";

  [self.boatsForOwner addObject:Titanic];

}

} 
```

在 TableView 委托函数中，您可以使用以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"SimpleTableCell";

SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];   

cargoShips* Titanic=[boatsForOwner objectAtIndex:indexPath.row];//You can get the object reference like this 
cell.nameLabel.text = Titanic.name;
cell.moreInfoLabel.text = Titanic.owner;

return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{

cargoShips* Titanic=[boatsForOwner objectAtIndex:indexPath.row]; //Use the Titanic object for further processing..
UITableViewCell *cell = [self.boatsTableView cellForRowAtIndexPath:indexPath];

[self performSegueWithIdentifier:@"boatInfoSegue" sender:cell];

[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

# asp.net-mvc - 数据库上下文 - 查询以从类别中选择帖子

> ID：14314924
> 
> 赞同：0
> 
> 时间：2013-01-14T07:58:27.330
> 
> 标签：asp.net-mvc, linq, entity-framework, asp.net-mvc-4

我在我的 asp.net mvc 4 测试项目中使用 DB 上下文方法。

这是我的域类

类别.cs

```
public class Categroy
{
    public virtual int Id { get; set; }
    public virtual string CategoryName{ get; set; }
    public virtual ICollection<Post> Post{ get; set; }
} 
```

Post.cs

```
public class Post
{
    public virtual int Id { get; set; }
    public virtual string Title { get; set; }
    public virtual string Description { get; set; }
} 
```

IPostsDateSource.cs

```
public interface IPostsDataSource
{
    IQueryable<Category> Categories{ get; }
    IQueryable<Post> Posts { get; }

    void Save();
} 
```

PostsDB.cs

```
public class PostsDB:DbContext,IPostsDataSource
{
    public PostsDB():base("DefaultConnection")
    {

    }

    public DbSet<Category> Categories{ get; set; }
    public DbSet<Post> Posts{ get; set; }

    void IPostsDataSource.Save()
    {
        SaveChanges();
    }

    IQueryable<Category> IPostsDataSource.Categories
    {
        get { return Categories; }
    }

    IQueryable<Post> IPostsDataSource.Posts
    {
        get { return Posts; }
    }
} 
```

我正在使用 StructureMap 来映射 IoC.cs

```
...
x.For<IPostsDataSource>().HttpContextScoped().Use<PostsDB>();
... 
```

在我的 HomeController 我是

```
private IPostDataSource _db;

public HomeController(IAdsDataSource db)
{
    _db = db;
} 
```

我可以通过以下方式检索所有帖子`_db.Posts`

```
public ActionResult Index()
    {
        var Posts= _db.Posts;
        ViewBag.Posts = Posts;
        return View();
    } 
```

问题是我应该写什么查询才能从特定类别中检索所有帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:24:08.010

如果一个类别有一个帖子的集合，那么 Post 实体应该有一个 CategoryID 属性。您可以根据该 CategoryID 进行查询。

否则，您可以查询类别并检索相应的帖子列表：

```
var cat = _db.Categories.Where(a => a.Id == catId).FirstOrDefault();
if(cat != null)
    ViewBag.Posts = cat.Posts;
return View(); 
```

# c# - DotnetHighCharts 不显示负值？

> ID：14314926
> 
> 赞同：1
> 
> 时间：2013-01-14T07:58:52.863
> 
> 标签：c#, highcharts, dotnethighcharts

我的值介于 -1 到 1 之间（-1、-0.25、-0.33、0、0.46、1、......）

我想在 TimeDataWithIrregularIntervals 图表上显示这个。但我没有显示负值。

![在此处输入图像描述](../Images/d0d215f239e66534b6991f6008a49205.png)

我找不到任何显示负值的选项。有很多没有任何选项的示例，但它们可以显示负值。我错过了什么？如何显示负值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:04:52.913

根据您的要求设置 Y 轴的最小值。

[api文档在这里。](http://api.highcharts.com/highcharts#yAxis.min)

# php - 为什么这个查询不能通过 php 运行？

> ID：14314927
> 
> 赞同：0
> 
> 时间：2013-01-14T07:58:55.780
> 
> 标签：php, mysql

我有：

```
$con = mysql_connect($db_server,$db_username,$db_password);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
  mysql_select_db($db_db, $con);
  mysql_query("INSERT INTO failed_logins SET username = 'pachonk', ip_address = INET_ATON('$ip'), attempted = CURRENT_TIMESTAMP");
 // mysql_close($con);
echo $ip;

$count = get_attempts(); // Get the Number of Attempts
mysql_close($con);
sleep((2 ^ intval($count)) - 1);

function get_attempts(){
    $result = mysql_query("SELECT * FROM failed_logins WHERE ip_address = INET_ATON('$ip')");
    if(mysql_num_rows($result) > 0)
    {
        $num_rows = mysql_num_rows($result);
        return $num_rows;
    }
    else
    {
    echo NO;
        return 0;
    }
} 
```

当我在我的 SQL 服务器上运行第二个查询时，它会按照我想要的方式运行，但是当我通过 php 查询时我得到 0 行。如果我查询“用户名 = pachonk”，这也是我想要的完美方式。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:38:34.320

如果 $ip 不为空（在您的示例中 $ip 为空），您可以尝试在 get_attempts($ip); 中修改您的函数 get_attempts();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:03:47.203

您的插入查询应或多或少如下所示：

```
mysql_query("INSERT INTO failed_logins values('pachonk', INET_ATON('$ip'), CURRENT_TIMESTAMP"); 
```

那么你的选择会给你一些结果

# c - __attribute__((constructor)) && __attribute__((destructor)) 在多线程应用程序中

> ID：14314932
> 
> 赞同：2
> 
> 时间：2013-01-14T07:59:21.293
> 
> 标签：c, constructor, thread-safety, destructor

我有一个我目前正在用 C 编写的应用程序，其中我在作为项目一部分的库中声明了几个 TLS 静态全局变量。

TLS 变量是使用 gcc 的 __thread 指令声明的。

我想知道我是否可以使用 .ctor && .dtor 部分在共享或静态 C 库中基于每个线程初始化 TLS 数据，以及使用此方法的线程安全性如何。

.ctor && .dtor 部分是按线程执行还是仅存在于父进程中？

最后一点，库静态或动态编译为应用程序代码，这是否意味着共享/静态库中贴花的 .ctor && .dotr 部分将成为最终可执行文件的一部分？

我真的对线程部分感到困惑，主要是......有谁有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:07:33.360

尝试一下，看看会发生什么，但最好不要依赖手册中未定义的行为——它可能会在没有通知的情况下更改。

据我所知，`__attribute__((constructor))`仅适用于在*加载时*运行的全局数据。尝试将其与 TLS 混合可能是未定义的，或者可能仅初始化主线程的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T03:49:12.833

pthread_key_create 使用析构函数回调创建 tls 条目；

示例用法在这里： http: [//linux.die.net/man/3/pthread_key_create](http://linux.die.net/man/3/pthread_key_create)

但是，您必须在线程中设置 tls 变量，否则不会调用析构函数回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:27:20.747

不，没有可以在启动线程时激活的回调。我认为这将是一个性能杀手：任何天真的程序员都可能意外添加这样的回调，并且突然之间程序的*每个*线程，即使是那些不访问该 TLS 的线程也会变慢。

对于 gcc`__thread`以及相应的 C11 功能，`_Thread_local`只能预见到静态初始化。对于必须在编译时确定的每个副本，这是相同的值。

# java - 从 Java 运行 echo 命令

> ID：14314933
> 
> 赞同：2
> 
> 时间：2013-01-14T07:59:26.037
> 
> 标签：java, cmd, runtime.exec

我想打印`echo %path%`from`Java`而不是`cmd`.

我有以下代码：

```
private void getPath() throws IOException {
    String getPath = "cmd.exe /C echo %path%";
    Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec(getPath);
    BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));
    String commandOutput = "";
    while (commandOutput != null) {
        commandOutput = reader.readLine();
        System.out.println(commandOutput);
    }
} 
```

如果我`echo %path%`从`cmd`输出开始运行：

> C:\Oracle\Ora11\bin;C:\Oracle\Ora10\bin;C:\Program Files\Common

但是`Java`程序的输出开始于：

> C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386

并且只有在这一行之后，其余的输出是相似的。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:01:49.313

看起来像`Java`附加到`%path%`自己的路径。没有其他的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:24:22.833

您可能正在从 IDE（例如 Eclipse）运行您的测试。从命令行尝试相同的操作。顺便说一句，还有另一种从 Java 打印环境变量的方法

```
System.out.println(System.getenv("PATH")); 
```

# c# - 验证文本框中的日期

> ID：14314934
> 
> 赞同：2
> 
> 时间：2013-01-14T07:59:28.327
> 
> 标签：c#, asp.net, datetime, textbox

如何确定 my`textbox`中的值是否正确`date`？

**例如：** 这是我的文本框中日期的值：`01/32/2013`

我知道这是错误的日期值，但我如何确定它是错误的格式？我可以通过使用来避免这种情况**`try and catch`**，但我不想使用它，如果我在我的问题中找不到解决方案，我会使用它。

```
<asp:TextBox ID="txtMEditStartDt" runat="server" Text='<%# Bind("StartDt", "{0:MM/dd/yyyy}") %>'
    CssClass="datePicker" SkinID="textSkin" Width="100px"></asp:TextBox>
<asp:MaskedEditExtender ID="MaskedEditStartDt" runat="server"
    TargetControlID="txtMEditStartDt" Mask="99/99/9999" MaskType="Date" 
    CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
    CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
    CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True"/>
<asp:CalendarExtender ID="calendarEditStartDt" runat="server" TargetControlID="txtMEditStartDt" Format="MM/dd/yyyy">
</asp:CalendarExtender> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:01:44.680

为什么不使用 Calander 控件将数据放入文本框中，而不是允许用户输入日期。这将确保用户不会输入错误的数据值，因为用户只需要从 calander 控件中选择日期

或者

如果您知道数据格式，那么您可以这样做

```
string dateTimeString = "28/08/2012";
DateTime date;
if(DateTime.TryParseExact(dateTimeString, 
   "dd/MM/yyyy", CultureInfo.InvariantCulture,DateTimeStyles.None, 
    out date))
 {
    //code to process valid date
 } 
```

如果不是有效日期，则返回错误值，这样您可以验证您的日期数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T08:01:10.250

您可以使用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)方法。在这种方法中使用的是*当前*的应用文化。所以在失败的情况下，它会简单地返回`false`。

```
DateTime dateValue = default(DateTime);
if (DateTime.TryParse(dateString, out dateValue)) 
   //SUCCESS 
else 
  //FAILURE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T08:02:01.450

```
DateTime dt;

if(DateTime.TryParse("01/32/2013",out dt)){

  //do stuff;
} 
```

# c# - 如何在 asp net 网页中添加和使用 silverlight 控件以及其他 asp.net 控件

> ID：14314938
> 
> 赞同：0
> 
> 时间：2013-01-14T07:59:55.567
> 
> 标签：c#, asp.net, silverlight

使用 Visual Studio 2012，我尝试按照链接 [http://msdn.microsoft.com/en-us/magazine/cc135987.aspx中给出的步骤进行操作](http://msdn.microsoft.com/en-us/magazine/cc135987.aspx)

[同样，我从http://archive.msdn.microsoft.com/silverlightjs](http://archive.msdn.microsoft.com/silverlightjs)下载了 Silverlight.js 文件

但是在第一个增长和缩小绿色球体的例子中，我无法看到预期的输出。我看到一个空白的白页。是我想念的东西。我测试了我的silverlight安装，它在浏览器中完美运行示例silverlight应用程序，所以silverlight版本等没有问题。因为链接上发布的文章太旧了。所以可能会有一些更新或使用方式的改变。请让我知道我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:30:08.567

你是对的——那是一篇很老的文章，在 ASPX 页面中嵌入 Silverlight 控件的方法在 Silverlight 的 v3 左右发生了变化。

我建议您观看此说明视频：[将 Silverlight 添加到网页](http://msdn.microsoft.com/en-us/silverlight/jj730543)。此外[，此页面](http://msdn.microsoft.com/en-us/silverlight/bb187401)也是了解有关 Silverlight 的更多信息的一个很好的启动页面。

# mysql - 每个父ID的Mysql限制

> ID：14314940
> 
> 赞同：2
> 
> 时间：2013-01-14T08:00:07.693
> 
> 标签：mysql, limit, where

如何限制每个`id`in`WHERE`子句的结果？我的查询是：

```
SELECT name 
FROM location_areas 
WHERE parent IN ("1,2,3") 
ORDER BY popularity,name 
```

父母不是唯一的。

我需要为子句中的每个父母`id`获得10 个结果。`WHERE`

例如表结构是：

```
id   name   parent
1    name    0
2    name    1
3    name    1
4    name    80
5    name    80
6    name    80
7    name    80
8    name    1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:22:07.880

试试这个：

```
SELECT
   T.name,
   T.popularity,
   T.parent,
   T.rank
FROM
(
SELECT
   L.name,
   L.popularity,
   L.parent,
   @rank := IF(@parent = parent, @rank + 1, 1) rank,
   @parent := parent
FROM location_areas L,
(SELECT @rank := 1, @parent := NULL) R
) T
WHERE T.rank <= 10 
```

**编辑**

```
SELECT T.name, T.popularity, T.parent, T.level, T.rank
FROM (
         SELECT L.name, L.popularity,
             L.parent, L.level,
             @rank := IF(@parent = parent, @rank + 1, 1) rank,
             @parent := parent
         FROM location_areas L,
             (SELECT @rank := 1, @parent := NULL) R
         WHERE L.parent IN (".$ids.")
     ) T WHERE T.rank <= 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:30:52.397

你可以简单地做到这一点

```
SET @level = 0;
SET @group = '';

SELECT 
    name
FROM (
    SELECT 
        name ,
        parent
        @level := IF(@group = parent, @level+1, 1) AS level, 
        @group := parent as EGroup 
    FROM test
    WHERE parent IN ("1,2,3") 
    ORDER BY parent 
) rs
WHERE level < 11 
```

# java - AVL 树的对数条件

> ID：14314941
> 
> 赞同：0
> 
> 时间：2013-01-14T08:00:15.030
> 
> 标签：java, data-structures, avl-tree

对于我的 AVL 树实现，我有一个节点，它有一个左、右和父指针，以及一个平衡变量。每次我插入一个新节点并执行所需的旋转时，我都会通过从左子树中减去右子树来更新余额。这种有问题的方法递归地调用自身来计算高度。

有问题的方法：

```
private int getHeight(Node nd){
    if (nd != null){
        if (nd.getLeft() == null && nd.getRight() == null)
            return 0;
        else if (nd.getLeft() == null)
            return getHeight(nd.getRight()) + 1;
        else if (nd.getRight() == null)
            return getHeight(nd.getLeft()) + 1;
        else
            return Math.max(getHeight(nd.getLeft()), getHeight(nd.getRight())) + 1;
    }
    else return -1;
} 
```

我的问题是，由于 AVL 树插入时间复杂度是[O(log n)](http://en.wikipedia.org/wiki/AVL_Tree)，我认为这种方法会影响这个时间复杂度。可以做些什么来修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:04:37.460

提示：您不需要高度来计算新天平。节点及其左右子节点的旧余额值就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:07:29.727

你不需要高度。知道旧的平衡，您可以保持平衡。也就是说，如果您还没有编写轮换，您可能需要调整轮换，以便在每次“移动”时保持平衡更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:12:03.637

您不需要计算每个插入中所有节点的平衡因子。

您只需要计算插入节点的父节点，以及它们的父节点，同时您到达平衡为 2 或 -2 的节点，然后旋转它们。

如果您不知道如何以这种方式旋转主题（哪种旋转适合）请告诉我

# linux - 如何列出目录中的所有文件并将结果导出到文本文件？

> ID：14314947
> 
> 赞同：-2
> 
> 时间：2013-01-14T08:00:48.623
> 
> 标签：linux, command-line

如何列出Linux目录/子目录中的所有文件（按名称排序），然后将结果导出到txt文件？请帮帮我！！！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:31:42.197

我会使用[find](http://linux.die.net/man/1/find)如下

```
find /path/to/dir -type f -printf '%p\n' > /path/to/file 
```

/path/to/dir 中的每个常规文件都会打印出它的绝对路径，并使用[bash 重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)到 /path/to/file

要对它们进行排序，您需要通过排序管道进行排序。

```
find /path/to/dir -type f -printf '%p\n' | sort > /path/to/file 
```

这将按完整路径排序以按基本名称排序

```
find /path/to/dir -type f -printf '%f::%p\n' | sort | awk -F'::' '{ $1=""; print }' > /path/to/file 
```

这将首先打印文件的基本名称，然后对其进行排序，然后 awk 删除初始文件名并仅将绝对路径重定向到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T13:25:09.923

下面会将当前文件夹中的所有目录导出到一个文件中。请记住位于包含所有文件夹的目录中：

```
ls >> /path/to/file 
```

# html - 索引方法出现错误“NilClass:Class 的未定义方法‘model_name’”

> ID：14314953
> 
> 赞同：0
> 
> 时间：2013-01-14T08:01:16.797
> 
> 标签：html, ruby-on-rails, postgresql

我在索引方法的房间部分有一些错误，请参阅错误是

```
 NoMethodError in Rooms#index

Showing /home/kingdark/Repos/glowfish/app/views/rooms/_room.html.erb where line #2 raised:

undefined method `model_name' for NilClass:Class

Extracted source (around line #2):

1: <h1>&nbsp;Rooms List <span class='pull-right'> <%= link_to "New Room", new_room_path, class: 'btn btn-primary' %> </span> </h1> 
2: <%= content_tag_for :div , room, class: 'row-fluid' do %> 
3: <div id="r-index_content"> 
4: <li> 
5:   <span class='span9' >

Trace of template inclusion: app/views/rooms/index.html.erb

Rails.root: /home/kingdark/Repos/glowfish Application Trace | Framework Trace | Full Trace

app/views/rooms/_room.html.erb:2:in `_app_views_rooms__room_html_erb__3875627950727331108_69928712927400' app/views/rooms/index.html.erb:1:in `_app_views_rooms_index_html_erb__2888541332730611846_47144000' 
```

这段代码是：

在 rooms_controller.rb 中

```
 class RoomsController < ApplicationController
  respond_to :js, :html, :json

    def index
        @rooms = Room.all
    end 
```

在模型“room.rb”中

```
class Room < ActiveRecord::Base
  attr_accessible :capacity, :description, :is_active, :room_name

  belongs_to :roometable, polymorphic: true
  has_many :events
end 
```

在视图>房间>index.html.erb

```
<h1>&nbsp;Rooms List <span class='pull-right'> <%= link_to "New Room", new_room_path, class: 'btn btn-primary' %> </span> </h1>
<%= content_tag_for :div , room, class: 'row-fluid' do %>
<div id="r-index_content">
<li>
  <span class='span9' >
    <%= link_to room.room_name, room ,{:style => 'color: #000000'} %> 
  </span>
  <span class='span3'>
    <span class='pull-right'>
      <%= link_to "Edit", edit_room_path(room), class: 'btn btn-mini' %> 
      <%= link_to "Delete", room_path(room), method: :delete, data: { confirm: "Are you sure to delete this room?" }, class: 'btn btn-mini btn-danger' %>
    </span>
  </span>
 </li>
</div>
<% end %> 
```

在路线.rb

```
Glowfish::Application.routes.draw do
  match '/calendar(/:year(/:month))' => 'calendar#index', :as => :calendar, :constraints => {:year => /\d{4}/, :month => /\d{1,2}/}

  devise_for :users

  resources :pages
  resources :areas
  resources :rooms

  match '/:id' => 'high_voltage/calendar#index', :as => :static, :via => :get
  root :to => 'high_voltage/calendar#index', :id => 'index'
end 
```

我尝试解决此问题，但没有发生任何问题。

请帮帮我，谢谢你有时间看到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:06:01.393

看起来你`room`在`nil`这段代码中：

```
content_tag_for :div , room, class: 'row-fluid' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:24:28.793

你有没有忘记添加迭代器？

```
<h1>&nbsp;Rooms List <span class='pull-right'> <%= link_to "New Room", new_room_path, class: 'btn btn-primary' %> </span> </h1>
<% @rooms.each do |room| %>
  <%= content_tag_for :div , room, class: 'row-fluid' do %>
  ...
<% end %> 
```

# zend-form - 避免多选框中的空选项元素

> ID：14314959
> 
> 赞同：0
> 
> 时间：2013-01-14T08:02:00.193
> 
> 标签：zend-form

我正在使用`Zend form`和使用它，我正在创建一个多选框。但是当创建多选框时，第一个选项值是一个空元素..像这样

```
`<option value=""></option>` 
```

我想避免这种情况..这是我正在使用的代码..

```
$addressType_selected = $this>createElement('multiselect','addressType_selected[]')                                
                      -> setAttrib('class','float_left input_width_295  k-multiselectbx')
                      -> setAttrib('tabindex',43);
$addressType_selected->setDecorators(array(
                                          'ViewHelper',     
                                          'Errors'
                                     )); 
```

我的代码有什么问题..我被这个卡住了......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:23:22.373

我找到了答案.. 只是使用了以下脚本

```
$("#addressType_selected option[value='']").remove(); 
```

# c++ - 带有互斥锁演示程序的条件变量挂起

> ID：14314961
> 
> 赞同：0
> 
> 时间：2013-01-14T08:02:05.700
> 
> 标签：c++, pthreads, mutex

主意：

当线程A需要检查条件变量的状态时`x`，它会先持有互斥锁，然后再检查变量的状态，如果发现无效则开始等待。

由于线程 A 当前具有互斥锁，因此线程 B 不会中断。一旦线程 A 等待，它将释放互斥锁。
然后线程 B 可以获取互斥体并做任何它想做的事情。

```
#include <stdlib.h>
#include <pthread.h>
#include <iostream>

pthread_mutex_t mutexLock  = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t  cond       = PTHREAD_COND_INITIALIZER;
void *                functionOfThreadA (void * ptr);
void *                functionOfThreadB (void * ptr);
int                     x  = 0;

int main ()
{
    pthread_t threadA;
    pthread_t threadB;
    char      *messageA = (char *) "Thread A"; // TODO
    char      *messageB = (char *) "Thread B";
    int       returnValueA;
    int       returnValueB;

    returnValueA = pthread_create (&threadA, NULL, functionOfThreadA, (void*) messageA);
    returnValueB = pthread_create (&threadB, NULL, functionOfThreadB, (void*) messageB);

    pthread_join (threadA, NULL);
    pthread_join (threadB, NULL);

    exit (0);
}

void * functionOfThreadA (void * ptr)
{
    char * message;
    message = (char *) ptr;
    std :: cout << "\nA: " << message << "\n";

    while (1)
    {
        pthread_mutex_lock (&mutexLock);

        if (x == 10)
        {
            std :: cout << "\nx == 10 : true, functionOfThread A: " << message << "\n";
        }
        else
        {
            std :: cout << "\nThread waits." << "\n";
            pthread_cond_wait (&cond, &mutexLock);
            std :: cout << "\nA:++ " << message << "\n";
        }

        pthread_mutex_unlock (&mutexLock);
        return 0;
    }
}

void * functionOfThreadB (void * ptr)
{
    while (1)
    {
        char * message;
        message = (char *) ptr;

        pthread_mutex_lock (&mutexLock);

        x = x + 1;
        if (x == 10)
        {
            std :: cout << "\nfunctionOfThread B: " << message << "\n";
            pthread_cond_signal (&cond);
        }
        else
        {
            std :: cout << "\nB: Not signaled yet. Value of x: " << x << "\n";
        }

        pthread_mutex_unlock (&mutexLock);
        return 0;
    }
} 
```

输出：

```
anisha@linux-trra:~> ./a.out 
B: Not signaled yet. Value of x: 1

A: Thread A

Thread waits.
^C 
```

然后它只是挂起。

**我需要在这里更正什么，为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:04:14.233

线程在这里 `pthread_cond_wait (&cond, &mutexLock);`无限等待，因为没有其他线程向它发出信号。线程 B 对锁和条件变量不做任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:11:52.393

问题已经被发现。

发出信号后，我需要跳出循环。但在我这样做之前，我还需要解锁互斥锁。中添加的代码`functionOfThreadB`已在下面的程序中以***** ** *** ****突出显示。

```
#include <stdlib.h>
#include <pthread.h>
#include <iostream>

pthread_mutex_t mutexLock  = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t  cond       = PTHREAD_COND_INITIALIZER;
void *                functionOfThreadA (void * ptr);
void *                functionOfThreadB (void * ptr);
int                     x  = 0;

int main ()
{
    pthread_t threadA;
    pthread_t threadB;
    char      *messageA = (char *) "Thread A";
    char      *messageB = (char *) "Thread B";
    int       returnValueA;
    int       returnValueB;

    returnValueA = pthread_create (&threadA, NULL, functionOfThreadA, (void*) messageA);
    returnValueB = pthread_create (&threadB, NULL, functionOfThreadB, (void*) messageB);

    pthread_join (threadA, NULL);
    pthread_join (threadB, NULL);

    exit (0);
}

void * functionOfThreadA (void * ptr)
{
    char * message;
    message = (char *) ptr;

    while (1)
    {
        pthread_mutex_lock (&mutexLock);

        if (x == 1000)
        {
            std :: cout << "\nA: x is now 1000\. Waiting period over."<< "\n";
            return 0;
        }
        else
        {
            std :: cout << "\nNow, thread A will wait for value of `x` to reach 1000" << "\n";
            pthread_cond_wait (&cond, &mutexLock);
        }

        pthread_mutex_unlock (&mutexLock);
    }
}

void * functionOfThreadB (void * ptr)
{
    while (1)
    {
        char * message;
        message = (char *) ptr;

        pthread_mutex_lock (&mutexLock);

        x = x + 1;
        if (x == 1000)
        {
            std :: cout << "\nB: Signaled. Value of x: " << x << "\n";
            pthread_cond_signal (&cond);
    *************pthread_mutex_unlock (&mutexLock);*************
    *************return 0;*************
        }
        else
        {
            std :: cout << "\nB: Not signaled yet. Value of x: " << x << "\n";
        }

        pthread_mutex_unlock (&mutexLock);
    }
} 
```

# c++ - 使用opencv c ++对相同的面孔进行分组

> ID：14314962
> 
> 赞同：4
> 
> 时间：2013-01-14T08:02:05.503
> 
> 标签：c++, opencv, face-recognition

我正在尝试使用 opencv 将人脸分组到一个文件夹中。

我正在使用[http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html)上的 eigenfaces 示例。但找不到任何东西来解决我的问题。

```
I have a set of faces in my face database: A,B,C,D,E,F,G,H,I
As a result I try to get; 
 - A,B,D are person1
 - C,E,F are person2 
 - G,H   are person3
 - I     is person4 
```

我猜这个过程应该是这样的；

```
sampleFace = A
while  
  mode.train(faces,labels) // trains face database 
  model.predict(sampleFace, &predict, &confidence) // get the prediction 
  using the confidence and similarity percentage decide A,B,D faces are person1
  remove A,B,D from face database and remove the labels of these images also 
  if faces.size=1 exit loop
  sampleFace = C
end of loop 
```

为了得到这个结果，我想我需要在特征面样本中为我的模型设置一个阈值。并且需要使用置信度值。

实际上，我想设置一个相似度分数，如 %80，然后我想获得与给定样本人脸相似度分数大于 %80 的图像。eigenfaces 样本只给出了一张具有置信度值的相似人脸。我需要获得每个人脸的置信度值，然后我可以比较相似度分数。同样在 eigenfaces 样本中，我不知道置信限度，我需要每个面的百分比值。

任何帮助、建议或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T07:23:55.533

您尝试做的方法是基于无监督学习，这在人脸图像上效果不佳。如果每个人有足够数量的样本，最好用至少一张人的图像来训练分类器；然后为数据集中的每个图像找到最近的类。

# javascript - jsonpath：添加2个元素然后比较

> ID：14314963
> 
> 赞同：0
> 
> 时间：2013-01-14T08:02:14.083
> 
> 标签：javascript, jsonpath

给定以下`json`数据：

```
[
 {
   "item":"T1",
   "size":10,
   "offset":3
  },
  {
    "item":"T2",
    "size":20,
    "offset":5
  }
] 
```

查询表达式：`$.[? ((@size + @offset)<15)].item`

查询不返回任何内容。哪里不对了？看起来`(@size + @offset)`不支持。如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T13:04:08.217

使用 DefiantJS，您可以在 JSON 结构上执行 XPath。
[http://defiantjs.com/](http://defiantjs.com/)

在此站点 ( [http://defiantjs.com/#xpath_evaluator](http://defiantjs.com/#xpath_evaluator) )，您可以粘贴 JSON 数据并试用标准 XPath。我已经测试了您的 json 数据并测试了这个 XPath 表达式，它按预期工作：

```
//*[size + offset > 15]/item 
```

DefiantJS 用一个额外的方法扩展了全局对象 JSON；“搜索”，在 javascript 中，它看起来像这样：

```
var res = JSON.search(json_data, "//*[size + offset > 15]/item");
console.log(res[0]);
// T2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:53:45.687

我想你可能需要试试这个：

$.[? ((@.size + @.offset)<15)].item

注意每个 @ 符号后面的点。

# symfony - 访问 oauth2 服务器中的 /api 方法

> ID：14314964
> 
> 赞同：6
> 
> 时间：2013-01-14T08:02:17.947
> 
> 标签：symfony, oauth-2.0, fosuserbundle, fosrestbundle

我试图创建一个基于`FOSOauthServerBundle`和`FOSRestBundle`的oauth2 服务器`FOSUserBundle`。我创建了一个演示应用程序来测试我的`oauth-server`，它无法通过 GET 请求接收数据

> （收到 401 错误'error="access_denied", error_description="OAuth2 authentication required"'），

尽管用户已通过身份验证并且客户端正确收到了访问令牌。

我应该如何实现 api 控制器以便 oauth2 执行身份验证过程？

另外，我想看看基于这些捆绑包的真正工作的 oauth 服务器示例，这样我就可以在上面检查我的应用程序。

我的安全.yml：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
acl:
    connection: default

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    in_memory:
        memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }
    fos_userbundle:
        id: fos_user.user_provider.username

encoders:
      FOS\UserBundle\Model\UserInterface: sha512
      Symfony\Component\Security\Core\User\User: plaintext

firewalls:
    api:
        pattern: ^/api
        fos_oauth: true
        stateless: true

    oauth_authorize:
        pattern: ^/oauth/v2/auth
        form_login:
            provider: fos_userbundle
            check_path: /oauth/v2/auth_login_check
            login_path: /oauth/v2/auth_login
            use_referer: true
        anonymous: true

    oauth_token:
        pattern: ^/oauth/v2/token
        security: false  

    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            provider: fos_userbundle
            check_path: /login_check
            login_path: /login
            always_use_default_target_path: true
            default_target_path: /

access_control:
    - { path: ^/oauth/v2/auth_login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/oauth/v2/auth, role: ROLE_USER }
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY}
    - { path: ^/, roles: ROLE_USER }
    - { path: ^/api, roles: [ IS_AUTHENTICATED_FULLY ] } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T14:03:22.840

提交答案，这样这将关闭未解决的问题。

由于请求不包含访问令牌而导致访问被拒绝。请参阅标题为“创建客户端和使用”部分的文档。

[https://github.com/FriendsOfSymfony/FOSOAuthServerBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle/blob/master/Resources/doc/index.md)

# c# - 如何在基类中初始化应该在子类中初始化的字段？

> ID：14314966
> 
> 赞同：6
> 
> 时间：2013-01-14T08:02:31.513
> 
> 标签：c#, oop

我的基类`Car`包含`engine`无法在基类中初始化的字段。我只能在子类中初始化它，例如在`ElectricCar`i can write`engine = new ElectricEngine`中。但是我在基类中使用字段。所以我有一个使用但未初始化的字段：

```
public class Car {

    protected Engine engine;

    public void Start() {
        engine.Start();
        // do something else
    }

    public void Stop {
        engine.Stop();
        // do something else
    }

    public void Diagnose() {
        engine.Diagnose();
        // anotherField.Diagnose();
        // oneAnotherField.Diagnose();
    }

} 
```

如何更好地初始化引擎？

版本 1\. 字段保证被初始化，但有很多字段构造函数看起来很难看。没有错误但丑陋。

```
public class Car {

    protected Engine engine;

    public Car(Engine engine) {
        this.engine = engine;
    }

    public void Start() {
        engine.Start();
        // do something else
    }

    public void Stop {
        engine.Stop();
        // do something else
    }

    public void Diagnose() {
        engine.Diagnose();
        // anotherField.Diagnose();
        // oneAnotherField.Diagnose();
    }

}

public class ElectricCar : Car {
    public ElectricCar() : base (new ElectricEngine()) {
    }
} 
```

版本 2\. 子类应该记住初始化字段，与子类有这样的“合同”可能会引入错误（未初始化的字段）。

```
public class Car {

    protected Engine engine;

    public Car() {
    }

    public void Start() {
        engine.Start();
        // do something else
    }

    public void Stop {
        engine.Stop();
        // do something else
    }

    public void Diagnose() {
        engine.Diagnose();
        // anotherField.Diagnose();
        // oneAnotherField.Diagnose();
    }

}

public class ElectricCar : Car  {
    public ElectricCar() {
        engine = new ElectricEngine();
    }
} 
```

版本 3\. 保证初始化字段。构造函数很清楚。但是从构造函数调用虚方法（可能很危险，一般不推荐）。

```
public class Car {

    protected Engine engine;

    public Car() {
        InitializeEngine();
    }

    protected abstract void InitializeEngine();

    public void Start() {
        engine.Start();
        // do something else
    }

    public void Stop {
        engine.Stop();
        // do something else
    }

    public void Diagnose() {
        engine.Diagnose();
        // anotherField.Diagnose();
        // oneAnotherField.Diagnose();
    }

}

public class ElectricCar : Car  {
    public ElectricCar() {
    }

    protected void override InitializeEngine() {
        engine = new ElectricEngine();
    }
} 
```

所以每个版本都有优缺点。哪个版本更好？或者，您甚至可以提出其他建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T08:06:22.967

第 3 版是对[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)的一种借鉴。如果你的基类不能提供合理的默认实现，但是你要求每辆车都有一个引擎，那么将创建委托给基类是一个非常合适且安全的解决方案。我会稍微调整你的初始化是这样的：

```
protected abstract Engine InitializeEngine(); 
```

然后在 Car 的构造函数中：

```
public Car() {
    engine = InitializeEngine();
} 
```

这将使合同非常明确。您的子类只需要提供一个引擎，而您的基类将保证在调用构造函数后分配引擎变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:06:34.403

另一种选择可能是：

```
public class Car {

    private Engine engine; //PRIVATE  

    protected Engine MyEngine {   //PROTECTED PROPERTY
        get {
            if(engine == null) 
               engine = new Engine(); 
            return engine;
        }
    }
} 
```

这样，*调用者*将安全地使用始终初始化的成员，因为它检查`protected`了它只能访问的内部属性，因为字段是`private`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:32:36.750

我会投票给选项 1。您在构造函数中明确说明每个都`Car` *必须*有`Engine`, `BrakingSystem`,`ECU`等。您还*知道*这些是在`Car`. 如果您将它们的创建延迟到第一次访问并且创建它们时出现问题，那么适当地处理异常将更加困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T08:44:39.380

然后使用 property 而不是 field for `Engine`，因为非私有字段很难调试。

**关于设计** 首先，您必须声明`Car`为`abstract`并使用`IEngine`行为而不是引擎类。然后对于任何具体的汽车（即子类），您可以选择适当的注入类型（通过构造函数，通过属性，...）。

```
public interface IEngine
{
     void Start();
     void Stop();
     void Diagnose();
}

public abstract class Car
{
    protected Car(IEngine engine)
    {
         Engine = engine;
    }

    protected IEngine Engine {get; set;}

    public void Start() {
        engine.Start();
        // do something else
    }

    public void Stop() {
        engine.Stop();
        // do something else
    }

    public void Diagnose() {
        engine.Diagnose();
        // anotherField.Diagnose();
        // oneAnotherField.Diagnose();
    }
}

public class ConcreteCar : Car
{
    public ConcreteCar(IEngine engine):base(engine)  // injection by constructor
    {
    }

    ...
} 
```

用法：

```
Car concreteCar = new ConcreteCar(new ConcreteEngine()); 
```

**编辑**

您可以强制派生类初始化引擎。请参阅更新的示例。

# xml - 带有 Core Data 的 Parse.com 用于图书应用程序

> ID：14314972
> 
> 赞同：2
> 
> 时间：2013-01-14T08:02:58.523
> 
> 标签：xml, xcode, sqlite, core-data, parse-platform

我正在制作一个 iphone 应用程序，这是一本翻译成 40 多种不同语言的书。我将每个翻译都放在一个单独的 SQL 数据库中。如果我在 Core Data 中导入所有翻译，应用程序大小将超过 150 MB。

用户不需要访问所有翻译。他/她只需要他们的母语翻译。所以，我不想用所有翻译预加载应用程序。

我正在考虑将翻译存储在 parse.com 上，并让用户选择下载他们需要的翻译文件。但我认为从 parse.com 下载文件后将翻译导入 Core Data 需要很长时间。每个数据库包含超过 6000 行文本。

实现这一点的最佳方法是什么？

我也有 xml 文件中可用的所有翻译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:34:40.857

根据您的数据，我假设每种语言都需要大约 4 MB 的数据 (150/40)。您可以轻松地在 parse.com 上存储这么多文件，因为它们的文件限制为 10MB。初始下载和导入可能需要几分钟，但由于这是一次性操作，因此不会造成任何问题。

# android - 退出安卓应用

> ID：14314973
> 
> 赞同：3
> 
> 时间：2013-01-14T08:03:00.713
> 
> 标签：android, android-activity

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

并使用这种方法

```
moveTaskToBack(true); 
```

我正在开发一个应用程序，在最后一个活动中我需要退出它，我使用了上述退出应用程序的方法，问题是它只存在活动并且应用程序在后台运行（在任务管理器中看到）。每当我再次加载应用程序时，它都会从我退出它的位置开始（最后一个活动）。

是否有任何代码可以完全退出它并删除表单背景（任务管理器）。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:50:24.863

要退出您的应用程序，请以这种方式返回到您的根活动（启动器启动的第一个活动）：

```
Intent intent = new Intent(this, MyRootActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addExtra("exit", "true");
startActivity(intent); 
```

这会将任务堆栈清除到根活动，然后以此意图再次启动根活动。

在您的根活动中，`onCreate()`您需要根据意图中的额外内容确定是否退出，如下所示：

```
Intent intent = getIntent();
if (intent.hasExtra("exit")) {
    // User wants to exit
    finish();
} 
```

您还谈到从任务管理器中删除您的应用程序。如果您指的是“最近的应用程序列表”，这不是“正在运行的应用程序”的列表，它是用户最近使用的应用程序的列表。仅仅因为您的应用程序出现在那里并不意味着它正在运行。

如果您真的不希望您的应用程序出现在“最近应用程序列表”中，只需将其添加到您的根活动的清单条目中：

```
android:excludeFromRecents="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:30:41.080

如果您不想打电话，`finish();`那么您也可以添加

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

和

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T16:45:33.257

使用此代码启动您的最后一个活动以清除所有活动堆栈。当您按下后退按钮或调用`finish()`它时，它将退出活动。

```
Intent intent = new Intent(this, YourActivityD.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

请注意 FLAG_ACTIVITY_CLEAR_TASK 仅适用于 API 11
有关更多信息，请参阅：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T08:05:35.277

为什么你根本不使用

```
this.finish() 
```

?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T08:26:14.643

当你在它之后调用`startActivity(intent);`add`finish();`来关闭旧的活动时（除非你想在将来回到那个活动）

所以你的代码看起来像：

```
startActivity(intent);  
finish(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T08:32:46.137

试试这个：

```
Intent finishapp = new Intent(Intent.ACTION_MAIN);
finishapp.addCategory(Intent.CATEGORY_HOME);
finishapp.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(finishapp); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T09:24:06.630

尝试`android:noHistory`在您的`AndroidManifest.xml`.

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T09:47:11.457

你必须通过调用来完成活动

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
   intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
   startActivity(intent);
   activity.this.finish(); 
```

或者你可以在你的活动中调用destroy方法

```
 @Override     
   public void onDestroy()
    {
      super.onDestroy();
      finish();
     } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-26T10:25:14.773

这是我的工作代码

在您的退出按钮上：

```
Intent intent = new Intent(getApplicationContext(), MainActivity.class);
ComponentName cn = intent.getComponent();
Intent mainIntent = IntentCompat.makeRestartActivityTask(cn);
mainIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
mainIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
mainIntent.putExtra("close", true);
startActivity(mainIntent);
finish(); 
```

该代码是关闭任何其他活动并将 MainActivity 现在放在您的 MainActivity 上：

```
if( getIntent().getBooleanExtra("close", false)){
    finish();
} 
```

# javascript - 正则表达式倒序排序

> ID：14314974
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:03:24.617
> 
> 标签：javascript, regex, excel

我需要一个正则表达式或类似的。我有一系列模式的字符串：

```
S 8010-Y30R
7020-R
S 7020-R
3852-R10B 
```

我需要订购这些：

```
By the last letter in the order: Y R B G
Then by the last two digits
Then by the second last letter (if any) in the order: Y R B G
Then by the two digits
Then by the first two digits 
```

所以例子：`S 8010-Y30R would be ordered by: R 30 Y 10 80`
第二个例子：`7020-R is a short version of: S 7020-R _ _ _`

我可以在 excel 中订购这些...或使用 JavaScript 并对两个数组进行排序（一个包含上面的颜色代码，一个包含相同的 RGB 版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:24:05.953

尝试这个：

```
 Search string  
    ^[A-Z]? ?(\d\d)(\d\d)-([A-Z]?)(\d\d)?([A-Z])?$
 Replace string 
    $5$4$3$2$1 
```

这假定始终出现的项目是连字符之前的四位数字，以及连字符本身。其他所有内容都是可选的，并且您不想保留第一个字母。每个字符串单独出现在一行上。

# xml - 具有正确格式但没有缩进和空格计数的 xml 文件

> ID：14314975
> 
> 赞同：0
> 
> 时间：2013-01-14T08:03:56.207
> 
> 标签：xml, format, indentation

我知道一个普通的 xml 文件有缩进和空格，比如：

```
<?xml version="1.0" encoding="UTF-8"?>
  <root>
   <child foo="bar"></child>
  </root>
</xml> 
```

但是如果我把它写在一行中

```
<?xml version="1.0" encoding="UTF-8"?><root><child foo="bar"></child></root></xml> 
```

它计算一个xml文件吗？

如果是 rss feed xml，读者可以正确阅读吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:36:56.377

这两个示例都不是有效的 XML！XML 标头`<?xml version="1.0" encoding="UTF-8"?>`不是元素，因此不会在最后关闭。这是一个有效的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <child foo="bar"></child>
</root> 
```

将 XML 写为单行也是有效的，但如果两个版本*相等*，则取决于您的 XSD 。如果您允许[混合内容](http://www.w3schools.com/schema/schema_complex_mixed.asp)，则空格和缩进很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:20:04.983

通常，缩进是可选的。*关于缩进是否有意义*，即空格是否改变了 XML 消息的信息内容，有复杂的规则。出于对 DTD 或 XSD 模式进行验证的目的，如果缩进出现在具有“仅元素内容”的元素中，则忽略缩进，但如果缩进出现在具有“混合内容”的元素中，则不会。如果您使用 XSLT 2.0 或 XQuery 进行处理，则相同的规则会影响应用程序是否看到缩进空格。但是对于较低级别的解析接口，您的应用程序将始终被通知空白，并且必须自行决定是否忽略它。

# android - 有没有办法返回我调用设备管理员激活的活动？

> ID：14314976
> 
> 赞同：1
> 
> 时间：2013-01-14T08:04:07.180
> 
> 标签：android, android-activity, device-admin

我需要为我的应用程序启用设备管理员，它的工作方式是从 Activity A 调用的：

```
Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,    deviceAdminComponentName);
intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "Your boss told you to do this");
startActivityForResult(intent,1); 
```

但我希望在我的活动 A 调用 device-admin-activation 提示并且用户说激活后，立即返回调用者激活。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T09:58:18.963

只要试试它是否有效..

在您的 DeviceAdminReceiver 的 onEnabled() 方法中，启动您想要在设备管理员激活后显示的活动。

# image - 根据 indexPath 更改键盘类型

> ID：14314982
> 
> 赞同：0
> 
> 时间：2013-01-14T08:04:37.173
> 
> 标签：image, cocoa-touch, uitableview

我正在制作一个应用程序，其中有一个自定义 UITableViewCell 具有标准，然后用户键入答案。为了方便用户，我想根据选择的行来更改键盘类型。

例如。“成本”行必须显示数字键盘供用户输入，而“郊区”行必须显示标准键盘供用户输入。

这里有一张图可以帮助大家。该单元需要标准键盘。

[http://i.stack.imgur.com/rGFhC.png](http://i.stack.imgur.com/rGFhC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:17:35.393

这很简单。你可以`-cellForRowAtIndexPath:`像这样修改你的：

```
if (indexPath.row == 1)
{
     [textField setKeyboardType:UIKeyboardTypeNumberPad];
}
else if ()
{
}.. 
```

一些键盘类型是：

```
UIKeyboardTypeDefault,                // Default type for the current input method.
UIKeyboardTypeASCIICapable,           // Displays a keyboard which can enter ASCII characters, non-ASCII keyboards remain active
UIKeyboardTypeNumbersAndPunctuation,  // Numbers and assorted punctuation.
UIKeyboardTypeURL,                    // A type optimized for URL entry (shows . / .com prominently).
UIKeyboardTypeNumberPad,              // A number pad (0-9). Suitable for PIN entry.
UIKeyboardTypePhonePad,               // A phone pad (1-9, *, 0, #, with letters under the numbers).
UIKeyboardTypeNamePhonePad,           // A type optimized for entering a person's name or phone number.
UIKeyboardTypeEmailAddress,           // A type optimized for multiple email address entry (shows space @ . prominently). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:31:36.103

如果您在自定义单元格中放置一个文本字段以输入数据，那么

```
if (indexPath.row == 1)
{
     textfield.keyboardType = UIKeyboardTypeNumberPad; //(for number keypad)
} 
```

有不同的键盘类型。

对于标准键盘，使用枚举`UIKeyboardTypeDefault`

在 -cellForRowAtIndexPath 中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath 
{

    UITableViewCell *cell = nil;

    static NSString *CellIdentifier = @"cellidentifier";

    CustomCell *tableCustomCell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (tableCustomCell == nil)
    {
        [[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];
        tableCustomCell = self.customCell;
        self.customCell = nil;
    }
    //Here add the check for the textfields

    cell = tableCustomCell;
    return cell;

} 
```

希望这会帮助你。

# java - Java 中的按值传递与按引用传递

> ID：14314983
> 
> 赞同：0
> 
> 时间：2013-01-14T08:04:39.537
> 
> 标签：java

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

我试图了解下面编写的 2 个 Java 程序之间的区别：

```
 public class Swapping {

public static void main(String[] args) {

    IntWrap i = new IntWrap(10);
    IntWrap j = new IntWrap(20);

    swap(i, j);
    System.out.println("i " + i.i + ", j " + j.i);
}

public static void swap(IntWrap i , IntWrap j){

    int x = i.i;
    i.i = j.i;
    j.i = x;

    System.out.println("i " + i.i + ", j " + j.i);
}

}

public class IntWrap {

int i;
public IntWrap(int i){
    this.i = i;
}

} 
```

输出 ：

```
i 20, j 10
i 20, j 10 
```

第二个：

```
public class Swapping {

public static void main(String[] args) {

    Integer i = new Integer(10);
    Integer j = new Integer(20);

    swap(i, j);
    System.out.println("i " + i + ", j " + j);
}

public static void swap(Integer i , Integer j){

    Integer temp = new Integer(i);
    i = j;
    j = temp;

    System.out.println("i " + i + ", j " + j);
}

} 
```

输出 ：

```
i 20, j 10
i 10, j 20 
```

我无法理解即使我传递了 Integer 对象，它也应该在原始程序中被交换。如果我在它的顶部编写包装类，因为我再次只传递对象，它会产生什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:21:51.717

所有方法参数，包括对象引用，在 Java 中都是按值传递的。您可以为方法参数分配任何值 - 调用代码中的原始值不会被修改。但是，您可以修改传递的对象本身，并且在方法返回时更改将持续存在。

J2SE API 中有旧的 Holder 类，专门设计用于支持对具有“可返回参数”（例如[IntHolder](http://docs.oracle.com/javase/1.4.2/docs/api/org/omg/CORBA/IntHolder.html)或[StringHolder](http://docs.oracle.com/javase/1.4.2/docs/api/org/omg/CORBA/StringHolder.html)）的方法的调用。它们主要用于从 IDL 语言生成的代码，因为 IDL 需要支持 in、out 和 inout 参数。这些持有者在其他代码中非常少见。

您还可以使用数组模拟通过引用传递：

```
String [] a = new String[1];  String [] b = new String[1];

void swap(String [] a, String [] b) {
   String t = a[0]; a[0] = b[0]; b[0] = t;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:06:11.270

UPS。`Integer`Java中的对象是不可变的。你不能从其他方法改变它们的内部值，也不能。只创建新`Integer`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:38:34.570

Java 使用按值调用来传递所有参数。当您将对象传递给函数时，对象引用（对象的地址）按值传递。在第二个程序交换中，您分配 i=j 和 j=temp . 所以 i=20 的地址 j=10 的地址（新对象）但是从交换返回后，在主程序中 i 仍然指向 10，j 指向 20。这就是为什么你在主程序中得到 10 和 20 .

但是在第一个程序中，您将对象的地址传递给交换函数，并且在交换函数中，您正在修改这些地址指向的对象的内容。这就是为什么，它会反映在 main 方法中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:38:18.687

（如果您不了解指针和引用，我建议您稍微复习一下，那么世界会更有意义 -[指针简介](http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers)）

把它归结为最简单的解释，java 有两种方式来回传递所有内容：

*   Pass-by=Value：用于不可变对象（**String、Integer、Double 等**）。如果您重新创建对象，则这些值不能更改，除非有一个例外。

    ```
     String x = "World"; <- String x = new String("World");
       x = "Hello"; <- x = new String("Hello");
       x = x + " World"; <- x = new String("Hello" + " World");
       printOutString(x); <- printOutString("Hello World"); 
    ```

保存在一个内存位置。任何更改都会创建一个与前一个对象无关的新对象，并查看一个单独的内存位置。

*   Pass-by-reference：用于非不可变对象（**Classes、int、double 等**）。这些值可以更改，并且仍然保留它们在内存中的旧位置。

    ```
     int i = 1;
      i = 2; <- value at <reference-to-memory-as-value> = 2;
      i = i + 1; <- value at <reference-to-memory-as-value> + 1;
      printOutInteger(i); <- printOutInteger(value at <reference-to-memory-as-value>); 
    ```

对此对象的任何更改都会对内存位置进行。因此位置永远不会改变（除非您创建一个新对象）。

你的程序中也发生了同样的事情。在方法中说一件事的对象，然后恢复到以前的值。在某种程度上，你是`Operator Overloading`。您为要发送的反对（`Integer`在这种情况下）分配新值，**但是**您已经传递了值，这意味着`Integer i`方法中的值，因为`Integer`它是不可变的，正在查看`Integer i`与 main 方法中不同的内存位置。因此，当方法退出时，您传递的对象将被释放，`Integer i`现在`j`查看它们的原始内存位置。

当您使用`int`对象传递类时，因为它们**不是**不可变的，所以内存位置被传递（按值）并且这些位置的值被使用。这就是为什么此处的更改显示在原始对象中的原因。

我希望这有帮助

# python - 如何在python的for循环中迭代多个元素

> ID：14314985
> 
> 赞同：1
> 
> 时间：2013-01-14T08:04:53.407
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

这个想法很简单，我想做这样的事情：

```
for elem1, elem2, elem3 in list:
    <some code> 
```

为此，我们需要该列表是 3-iterables 的列表，如下所示：

```
list = [[1, 2, 3], [4, 5, 6]] 
```

但是，如果这个列表只是一个常规列表，我该怎么办？

```
list = [1, 2, 3, 4, 5, 6] 
```

是否有任何快速简单的方法可以将此常规列表转换为 3-iterables 列表，以便循环正常工作？或者 n-iterables，我这里用 3 作为例子。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T08:06:26.373

使用`grouper`来自 itertools 的配方：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

和类似的东西：

```
for a, b, c in grouper(3, some_list):
    pass # whatever 
```

# php - 使用 X-editable for Bootstrap 将值发送到 post.php

> ID：14314991
> 
> 赞同：0
> 
> 时间：2013-01-14T08:05:28.630
> 
> 标签：php, jquery, twitter-bootstrap

我使用 Twitter Bootstrap 并决定使用 X-editable。我放入了所有必要的文件，它工作正常，除了我想将值传递到`post.php`我希望 PHP 处理的地方`$_POST["value"]`。

可编辑元素的标记是

```
<a href="#" id="example">Example</a> 
```

我这样称呼它

```
$(function() {
  $.fn.editable.defaults.mode = 'inline';

  $('#example').editable({
  type: 'text',
  pk: 1,
  url: 'post.php',
  title: 'Enter example'
   });
}); 
```

我使用[jEditable](http://www.appelsiini.net/projects/jeditable)作为内联编辑器，在其中我将值传递给 php 文件没有问题，我想用 X-editable 这样做，但我似乎做不到。

如何将值传递给`post.php`以便我可以使用 php 来操作数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-08T13:46:37.397

`<a href="#" id="example">Example</a>`

您必须添加 data-name=""

`<a href="#" id="example" data-name="db-col-name">Example</a>`

所以当你在 post.php 中访问它时，你可以这样做：

`$name = $_POST['name']`// $_POST['name'] 捕获数据名称值

`$pk= $_POST['pk']` // 你分配的 pk(主键)

`$value= $_POST['value']`// 使用内联编辑后的新值

之后你可以做这样的事情

`if(!empty($value)) {`

`$result = mysql_query('update users set '.mysql_escape_string($name).'="'.mysql_escape_string($value).'" where user_id = "'.mysql_escape_string($pk).'"');`

```
} else {
    header('HTTP 400 Bad Request', true, 400);
    echo "This field is required!";
} ` 
```

归功于 x-editable 的制造商，来自他们的 php 示例 [更多信息在这里](https://github.com/vitalets/x-editable/tree/gh-pages/backend-samples/php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T20:42:08.197

你应该做这样的事情

```
<a href="#" id="roll_no" data-type="text" data-pk="<?php echo $row['id'] ?>" data-url="ajax.php" ><?php echo $row['roll_no']; ?></a> 
```

参考：- [jQuery x 可编辑教程](https://www.mycodingtutorials.com/?p=259)

# c - C 中 const 和 volatile 限定符之间的用法差异？

> ID：14314994
> 
> 赞同：2
> 
> 时间：2013-01-14T08:05:53.443
> 
> 标签：c, volatile

我已经回答了问题@C [中的const和volatile指针有什么区别？](https://stackoverflow.com/questions/2089464/what-are-the-differences-between-const-and-volatile-pointer-in-c) 我理解的解释是：

const 修饰符意味着这段代码不能改变变量的值，但这并不意味着不能通过这段代码之外的方式改变该值。但是，volatile 表示“此数据可能被其他人更改”，因此编译器不会对该数据做出任何假设。

这意味着两种类型的变量都可以被外部事件改变。

但是，那么 const 和 volatile 的使用区别在哪里呢？

在 C 中，编译器优化是否适用于 const？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:36:03.890

volatile 和 const 在很多方面都不同，它们是两个截然不同的特性。

像 const 一样声明一个变量绝不意味着“我希望在程序之外修改这个变量”，我不确定你从哪里得到这个想法。如果您希望在代码之外修改 const 变量，则必须将其声明为，`volatile const`否则编译器可能会假定该变量永远不会更改。

默认情况下，普通的 const 变量就像任何类型的变量一样，它们根本不能被程序本身修改。

就像普通变量一样， const 变量的行为很大程度上取决于它们声明的范围。大多数情况下，它们是在文件范围内声明的，然后它们表现为具有静态存储持续时间的其他变量，除非它们（可能）保存在内存的不同部分。如果它们是在本地范围内声明的，它们可能会在调用它们所在的函数时不时更改。

所以有很多可以优化 const 变量的情况。一种常见的优化是“字符串池”，编译器检查相同的常量字符串文字是否在代码中出现两次，然后为它们使用相同的地址。如果您希望从外部源更改此类字符串，但没有将它们声明为易失性，您会遇到奇怪的错误。

至于 volatile 变量，它们可能被外部源修改，但也可能被程序修改，这与 const 变量不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:15:35.600

具有`const`-qualified 类型的对象与您可以在程序中声明的其他对象一样，只是您无权修改它们。底层对象可能会因别名而改变，编译器必须小心，如果此类事件可能发生，所有其他对象也是如此。例如

```
void toto(double const* pi, double* x) {
  printf("%g %g\n", *pi, *x);
  printf("%g %g\n", *pi, *x);
  *x = 5.0;
  printf("%g %g\n", *pi, *x);
} 
```

在这里，在函数内部调用`toto`类似的东西并指向相同的内存是完全可以的。第二个编译器可以假设，因为它没有同时存储 和 的值没有改变。但是对于第三个，它无法预见是否已更改，因此它必须从内存中重新加载该值。`toto(&a, &a)``pi``x``printf``*pi``*x``printf``*pi`

`volatile`与此不同。

```
void tutu(double volatile* pi, double* x) {
  printf("%g %g\n", *pi, *x);
  printf("%g %g\n", *pi, *x);
} 
```

在这里，第二个`printf`和以前一样，编译器可以假设它`*x`没有改变，但`*pi`它*必须*假设它可以并且*必须*从内存中重新加载它。用例`volatile`在日常程序员生活中要少得多，它们主要涉及对象

*   可能代表一些硬件地址
*   这可能会在中断处理程序中发生变化
*   在某种`setjmp/longjmp`机制下
*   或通过不同的线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:50:35.227

'const' 告诉编译器该值永远不会改变，不是由程序改变，也不是由其他人改变。当某些东西是 const 时，编译器会相应地优化代码，并且通常会将变量替换为代码中的常量。所以即使外面发生了变化，程序也可能永远不会知道。

'volatile'相反，告诉编译器变量可以随时从外部改变，然后编译器不会进行诸如将var放入寄存器中的优化，而是总是从内存中读取它，以防万一改变了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:11:56.160

演示 const 的示例

```
 function1()
  {
      int i = 10;
      function2(&i);
  }
 function2(int const *ptr) // usage of const
 {
      *ptr = 20; //will cause error; outside function can't be modify the value of i
 } 
```

易失性的示例

```
 function1()
 {
       while(1)
       {
             i = 20;

              print(i);
       }
 }

 function2()
 {
       i = 20;
       while(1)
       {
              print(i);
       }
 } 
```

考虑这两个功能。两者似乎都是一样的。用于优化编译器将 function1 转换为 function2。问题是如果 i 的值被另一个线程改变了，那么两个函数就会变得不同，这里 while 循环打印 i 的值和另一个模块改变 i 的值。所以我们不会总是将 i 的值设为 20。

volatile 用于通知编译器不要优化变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:22:11.677

> const 修饰符意味着这段代码不能改变变量的值，但这并不意味着不能通过这段代码之外的方式改变该值。

有两种不同的方式来应用 const 限定符。

程序不得修改const 限定*对象，否则程序具有未定义的行为。*对象可以`const volatile`由操作系统/硬件/任何东西修改，但不能由程序分配。为免生疑问，const 对象是其*定义*使用 const 类型的对象。

指向 const-qualified-type 的指针防止（在编译时）通过该指针进行修改，但可以使用指向同一对象的其他指针来修改它。如果对象本身不是 const，则定义行为。但是，编译器可能仍然假设只有程序修改了对象，从而考虑了 OS/hardware/whatever require 的任意修改`volatile`。

就通过其他指针进行的修改而言，指向非 const 限定类型的指针与指向 const 的指针*完全相同。*

但是，volatile 表示“此数据可能会被此程序中的代码以外的其他内容更改”，因此编译器在优化时不会对该数据做出任何假设。

所以区别如下：

```
#include <stdio.h>
void some_other_function(const int *);

int main() {
    int a = 0;
    int volatile b = 0;
    int const c = 0;
    int const *constptr = &a;
    int *ptr = (int*) constptr;

    printf("%d\n", a); // compiler can assume a == 0 at this point, and 
                       // replace the code with puts("0") if it wants to
    printf("%d\n", b); // compiler cannot assume a value for b, it's volatile[*]
    some_other_function(constptr); // defined in another TU
    printf("%d\n", a); // compiler can *no longer* assume that a == 0, 
                       // it might have changed
    *ptr = 1;          // there's another example of a changing, legally
    some_other_function(&c);
    printf("%d\n", c); // compiler can assume c == 0 because c is const
} 
```

[*] 虽然我说它“不能假设一个值”，但可能是某些假设的 C 实现碰巧知道没有操作系统或硬件机制可以通过任何需要`volatile`检测的方式修改自动变量。尤其是在这种情况下，没有对函数的引用`b`已经转义。如果是这样，那么您可能会发现实现实际上可以`volatile`在此特定代码中忽略，但也许它`volatile`“正确”处理外部全局变量，因为它知道链接器提供了一种将它们映射到 I/O 端口地址或其他地址的方法.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-30T13:55:07.880

在下面的情况下，可以很容易地看出 Volatile 和 Const 之间的区别，

1) 如果您说某个变量为 Const，则您的程序可能无法修改。

2）如果你说volatile，它只是在提示编译器不要优化代码，因为值可能会从外部线程或其他程序中改变。

3）如果我们定义一个变量为Const Volatile，则表示该变量不能被同一个程序修改，不会被编译器优化，可以被外部线程或程序修改。

例子：

如果我写一个像下面这样的函数，

```
const freq = 10;
calfreq()
{
return (Const freq * 2);
} 
```

在这种情况下，编译器可能会将代码优化为

```
return(20); 
```

每时每刻。

但在我的情况下，频率值可能会改变，因为外部硬件/线程/程序所以，如果我说常量易变，那么问题将得到解决。

# jquery - Fancybox 没有正确居中？（稍微向左）

> ID：14314995
> 
> 赞同：0
> 
> 时间：2013-01-14T08:05:53.640
> 
> 标签：jquery, css, fancybox, center

请参阅以下网站：

[http://goo.gl/wa41k](http://goo.gl/wa41k)

单击图书图像上方、标题下方的不可见小白框。当你看到它时，会弹出一个花式盒子，里面有一本翻书。花式框的宽度为 900 像素。

如果您将窗口缩小到足够大（大约 950 即可），您会看到左侧没有剩余空间，而右侧有足够的空间。这会导致fancybox中的左侧导航按钮（对于翻书，您必须转到第三页才能看到左侧导航按钮）被切断。

我应该提到我使用的是相当旧的 Fancybox 版本，因为我无法升级（网站中断）。我使用的是 1.3.4 版。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:07:29.907

我仍然不确定它为什么被推到右边，但我能够通过将 ( `#fancybox-outer`) 内的元素向右推一点来解决它，以对抗左边的“推”。

```
#fancybox-wrap #fancybox-outer { left: 20px; } 
```