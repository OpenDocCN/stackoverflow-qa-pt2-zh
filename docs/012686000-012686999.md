# StackOverflow 问答 12686000-12686999

# javascript - 将 Javascript 组件转换为 JSF 2.0 组件

> ID：12686000
> 
> 赞同：2
> 
> 时间：2012-10-02T07:19:55.360
> 
> 标签：javascript, jakarta-ee, jsf-2

我想将 Javascript 组件转换为 JSF 2.0 组件。我已经创建了简单的 JSF 2.0 自定义组件，现在我想将复杂的 JScript 组件转换为 JSF。我知道我必须编写自己的组件类、渲染器、TagHandlers、EventListeners 等，但我不知道如何启动它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:59:41.390

你不需要转换它，你只需要将现有的 js/jquery 组件集成到 JSF 可重用的组件中，primefaces 将现有的 jquery 组件集成到可重用的 JSF 组件中做得很好，所以 INMO 你可以去看看在 primefaces 源代码中了解总体思路... [primefaces-3.4.1-sources.jar](http://repository.primefaces.org/org/primefaces/primefaces/3.4.1/primefaces-3.4.1-sources.jar)

例如看看这个[COLOR PICKER - JQUERY PLUGIN](http://www.eyecon.ro/colorpicker/)

在这里，它在 primefaces 上展示了[颜色选择器](http://www.primefaces.org/showcase/ui/colorPicker.jsf)

在 primefaces *primefaces-3.4.1-sources\org\primefaces\component\colorpicker中寻找它的实现*

另请查看*primefaces-3.4.1-sources\META-INF\resources\primefaces\colorpicker*

我想这可以给你一些提示......

# c# - SVNsharp如何获取指定页面？

> ID：12686002
> 
> 赞同：1
> 
> 时间：2012-10-02T07:20:05.950
> 
> 标签：c#, .net, svn, sharpsvn

如何使用 SvnSharp 中的 SvnClient 类获取 svn 日志的指定页面；例如，我有修订版 [407, 402, 374, 373, 372, 371, 370, 369, 368, 367, 366, 365, 364] 我需要获得第二页和页面大小 5，怎么办那？

```
var logList = new Collection<SvnLogEventArgs>();
                var args = new SvnLogArgs();

                args.Limit = 10;
                svnClient.GetLog(new Uri(path), args, out logList); 
```

限制方法是只限制第一个项目而不分页。

**应根据页面和页面大小参数提取项目。怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:35:48.570

Subversion 不支持分页。计算页面所花费的时间与检索所有数据本身一样长。

您可能可以通过根据上次请求传递正确的修订号来优化请求，但在这种情况下，您还必须确保正确处理从其他位置复制路径的情况。（这就是 Subversion 无论如何都必须遍历历史的原因，而分页无助于提高性能）

# c# - 识别包含在正则表达式中的其他值中的值

> ID：12686005
> 
> 赞同：0
> 
> 时间：2012-10-02T07:20:25.500
> 
> 标签：c#, .net, regex, windows

我有一个字符串如下：

```
<String>VariableText</String> 
```

我需要一个正则表达式来识别节点内的“VariableText”值。

正如文本所暗示的，该值可能是可变的。

使用正则表达式如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:52:56.620

好吧，有两种常见的正则表达式模式可以得到明确界定的“东西”：

*   使用捕获组：

`/%PatternForOpeningDelimiter%(.+?)%PatternForClosingDelimiter%/`

...或者，在你的情况下：

```
/<String>(.+?)<\/String>/ 
```

内容将存储在`$1`变量中。

*   使用环视：

`/(?<=%PatternForOpeningDelimiter%).+?(?=%PatternForClosingDelimiter%)/`

...或者，在你的情况下：

```
/(?<=<String>).+?(?=<\/String>)/ 
```

此模式将涵盖“所需内容”，无需使用正则表达式变量（`$1`,`$2`等）

不过，意识到可变长度模式（例如`(?<=\d+)`，例如 ）可以用作 .NET 正则表达式风格中的后视表达式（感谢 @Alan Moore 的有益观察），但还有许多其他的缺少此功能（或部分支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:27:11.597

我认为这种模式可以做你想做的事

```
string pattern =    "$<[s|S]tring>\w*</[s|S]tring>^";
Regex r= new Regex(pattern); 
```

# xcode - 在 iOS 5.1 设备上运行的程序找不到带有 Xcode 4.5 的 SDK

> ID：12686009
> 
> 赞同：7
> 
> 时间：2012-10-02T07:21:02.520
> 
> 标签：xcode, build, ios6

当我在 iOS 5.1 模拟器上运行我的项目时，它显示

```
yld: lazy symbol binding failed: Symbol not found: _objc_setProperty_nonatomic_copy
  Referenced from: /Users/apple/Library/Application Support/iPhone Simulator/5.1/Applications/3A003E5F-2C66-494F-BCC1-C3EE82F01464/dogTree.app/dogTree
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation 
```

而且我没有 5.1 SDK。但是为什么库搜索路径是 5.1 而不是 6.0？

我所有的项目都在 iOS 6.0 设备上运行，但是当我在 iOS 5.0 或 5.1 设备上安装时，它崩溃并显示如下消息。

请给我一些帮助，iOS 5.1 SDK 是否需要运行 iPhone 5.1 模拟器？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-03T18:25:27.637

我遇到了同样的问题，发现我只是忘记在包含的项目中更改目标平台。Xcode 在升级时会自动将目标切换到最新的 iOS。只需更改包含项目的目标即可解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:32:28.913

我遇到了类似的问题，并通过将每个静态库所依赖的部署目标设置为 4.3（与我的应用程序的最低版本相同）来解决。
我发现依赖的静态库默认是6.0，当需要低版本的兼容性时，这一定会导致一些库丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T13:38:46.557

对于 pod 等库，它位于 iOS 部署目标的构建设置中。

# time - 什么时间戳格式？

> ID：12686013
> 
> 赞同：0
> 
> 时间：2012-10-02T07:21:16.373
> 
> 标签：time, unix-timestamp

我在某些 unix 日志文件中得到以下格式的（我猜）时间戳，但不知道它是什么格式以及如何转换它：

时间戳如下所示：`589702.337476`

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:33:34.260

如果它在几秒钟内，它只是不到一周。

我怀疑这是使用or`clock_gettime()`参数调用的结果，它被定义为“自某个未指定起点以来的单调时间”；它通常是自系统上次启动以来的秒数。`CLOCK_MONOTONIC``CLOCK_MONOTONIC_RAW`

在我的 Ubuntu 系统上，我在`/var/log/kern.log`.

# c# - Javascript块内的ASP MVC Razor foreach

> ID：12686014
> 
> 赞同：11
> 
> 时间：2012-10-02T07:21:22.607
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个部分视图，它在我提交 Ajax 表单后返回一个 Javascript 函数调用。它需要一个地址列表并调用 Javascript 函数来对谷歌地图进行地理编码和放置标记。当我编译以下代码时，在 ForEach 行中的 var 周围出现“条件编译已关闭”错误。

```
@model IEnumerable<TestStore.Models.Address>

@if (Model.Count() > 0)
{
<script type="text/javascript">
    deleteMarkers();

    @foreach(var item in Model)
    {
        codeAddress('@item.GetAddress');
    }  
</script>
} 
```

我摆弄了代码，以下确实可以在没有编译错误的情况下工作：

```
@if (Model.Count() > 0)
{
<script type="text/javascript">
    deleteMarkers();
</script>

    foreach (var item in Model)
    {
        <script type="text/javascript">
            codeAddress('@item.GetAddress');
        </script>
    }
} 
```

为了便于讨论，如果我有更长的逻辑来在循环内进行大量 Javascript 函数调用，我更愿意将所有内容都包含在 1 个脚本块中。我搜索了 Stack Overflow，似乎 Razor 语法可以进入脚本块，但我不知道在我的示例中是什么样子。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-02T07:30:56.403

或者您可以使用`@:`语法而不是`<text>`循环中的元素。[这](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)是一个教程。

```
@:codeAddress(@item.GetAddress); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-02T07:24:17.230

这是因为 for 循环中的 javascript 看起来像 Razor 的 C# 代码。把它包起来`<text>`。一般来说，任何块内容`{ /* this is block content */ }`都应该始终有一个 html 节点 - 或者如果您不需要 html 节点（如您的情况），您可以使用`<text>`

```
@foreach(var item in Model)
{
    <text>codeAddress('@item.GetAddress');</text>
} 
```

# r - 计算R中一列中的字符串频率并保留其他列

> ID：12686017
> 
> 赞同：2
> 
> 时间：2012-10-02T07:21:29.987
> 
> 标签：r

我有一个看起来像的 data.frame

```
 a = c("sample1", "asd")
 b = c("sample2" ,"poua")
 c = c("sample3", "asd")

 dat <- rbind(a,b,c) 
```

我想计算 column2 字符串频率，并将 column1 名称保留在列表/参差不齐的计数数组中。即让它看起来像

```
 asd    sample1     sample3
 poua   sample2 
```

我知道表计数频率，但我无法让它保留名称，所以我真的非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:51:00.587

你可以使用`tapply`：

```
tapply(dat[,1], dat[,2], as.vector)

$asd
[1] "sample1" "sample3"

$poua
[1] "sample2" 
```

编辑：如果您的行名很重要，您可以`identity`用作函数：

```
tapply(dat[,1], dat[,2], identity)

$asd
        a         c 
"sample1" "sample3" 

$poua
        b 
"sample2" 
```

# git - 如何在 git 中找到空的分支和标签

> ID：12686027
> 
> 赞同：4
> 
> 时间：2012-10-02T07:22:07.740
> 
> 标签：git, git-svn

我已经迁移了一个包含数百个分支和标签的大型 svn 存储库，将它们拆分为多个存储库，现在我正在检查这些存储库中是否有任何空*分支/标签，这些存储库应该在推送迁移之前删除。

有没有比去每个存储库检查每个分支更快的方法来找到它？

* * *

*就本问题而言，“空分支”或“空标签”是指指向不包含文件的提交的分支或标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:14:14.547

`git ls-tree <branch/tag> | wc -l`使用您选择的编程语言为每个分支和标签运行并检查`0`. 您将获得一个带有 的分支列表`git branch`和一个带有 的标签列表`git tag`。

这是一个使用 bash 的分支的简单示例：

```
#!/bin/bash

for branch in $(git branch | cut -c 3-)
do
  if [ $(git ls-tree $branch | wc -m) -eq 0 ]
  then
    echo "branch $branch is empty"
  fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:36:39.353

我实际上最终为它做了这个脚本：

[https://github.com/maxandersen/jbosstools-gitmigration/blob/master/deleteemptybranches.sh](https://github.com/maxandersen/jbosstools-gitmigration/blob/master/deleteemptybranches.sh)

```
 ## this will treat $1 as a repository and go through it and delete all branches and tags with empty content.

export GIT_DIR=$1/.git
export GIT_WORK_TREE=$1

echo Looking for empty branches in $1
git branch | while read BRANCH
do
 REALBRANCH=`echo "$BRANCH" | sed -e 's/\*//g'`
 NOFILES=`git ls-tree $REALBRANCH | wc -l | tr -d ' '`
# echo $NAME "$REALBRANCH" $NOFILES
 if [[ "$NOFILES" == "0" ]]
  then
     git branch -D $REALBRANCH 
  fi
done

git tag | while read BRANCH
do
 REALBRANCH=`echo "$BRANCH" | sed -e 's/\*//g'`
 NOFILES=`git ls-tree $REALBRANCH | wc -l | tr -d ' '`
# echo $NAME "$REALBRANCH" $NOFILES
 if [[ "$NOFILES" == "0" ]]
  then
     git tag -d $REALBRANCH 
  fi
done 
```

# html - 为什么打印我的网页会使弹出窗口透明？

> ID：12686028
> 
> 赞同：0
> 
> 时间：2012-10-02T07:22:09.493
> 
> 标签：html, css

我有一个网页，它也有一个用户可以搜索的弹出窗口。我自然想让用户能够打印搜索结果。但是当我尝试用例并从应该包含在页面中的弹出窗口中打印搜索结果时，弹出窗口变得透明。你能告诉我该怎么做才能使弹出打印不透明吗？

我的 HTML 的开头是

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
    <head>
    <link href="css_js/styles.css" rel="stylesheet" type="text/css">
    <link href="css_js/positions.css" rel="stylesheet" type="text/css">
    <link href="css_js/dialog_box.css" rel="stylesheet" type="text/css">
    <link href="css_js/floats.css" rel="stylesheet" type="text/css">
    <script language="JavaScript1.2" src="css_js/jquery-1.7.1.min.js"
        type="text/javascript"></script>
    <script language="JavaScript1.2" src="css_js/sorttable.js"
        type="text/javascript"></script>
    <script language="JavaScript1.2" src="css_js/general_arendeprocess.js"
        type="text/javascript"></script>
    <script language="JavaScript1.2" src="css_js/dialog_box.js"
        type="text/javascript"></script>
    <script language="JavaScript1.2" type="text/javascript">
        function ingVar(x) {
            var applicationDependence;
            applicationDependence = x;
            document.getElementById('ff').style.display = 'none';
            document.getElementById('avd').style.display = 'none';
            document.getElementById('utb').style.display = 'none';
            document.getElementById('oepa').style.display = 'none';
            document.getElementById('aooep').style.display = 'none';
            if (applicationDependence == 'ff') {
                document.getElementById('ob').style.display = 'none';
                document.getElementById('ff').style.display = '';
            }
            if (applicationDependence == 'avd') {
                document.getElementById('ob').style.display = 'none';
                document.getElementById('avd').style.display = '';
            }
            if (applicationDependence == 'utb') {
                document.getElementById('ob').style.display = 'none';
                document.getElementById('utb').style.display = '';
            }
            if (applicationDependence == 'oepa') {
                document.getElementById('ob').style.display = 'none';
                document.getElementById('oepa').style.display = '';
            }
            if (applicationDependence == 'aooep') {
                document.getElementById('ob').style.display = 'none';
                document.getElementById('aooep').style.display = '';
            }
            if (applicationDependence == 'ob') {
                document.getElementById('ob').style.display = '';
            }
        }
    </script>
    <title>Ingivningsdag - NAT. - Pandora</title>
    </head>

    <body id="content"
        onload="if(document.getElementById('beroende') != null) { ingVar(document.getElementById('beroende').value);}">

    ...

<div class="popup" id="popupSokNamn" style="position: absolute; top: 200px; ">

<table width="100%" border="0" cellspacing="0" cellpadding="2" align="center" class="TB_nb">
    <tbody><tr>
        <td colspan="3" class="pusher TB_nb"><h2>Sök person/företag</h2>
        </td>
        <td align="right"><a href="javascript:void(0)" onclick="document.getElementById('popupSokNamn').style.display = 'none';">X&nbsp;&nbsp;</a>
        </td>
    </tr>
</tbody></table>
<br>
<div id="Vsok">

    <div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;">
        <span onclick="document.getElementById('sokF').style.display='', document.getElementById('bottomA').style.display='none', document.getElementById('bottomV').style.display='', document.getElementById('Vsok').style.display='none'" class="link_sm">Visa sökformulär</span>
    </div>

</div>

<div id="sokF">

    <div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;; padding-bottom: 5px;">
        <span onclick="getElementById('sokF').style.display='none', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display=''" class="link_sm">Dölj sökformulär</span>
    </div>

    <div style="width: 100%; margin-left: 15px; margin-right: 15px;">
        <fieldset style="border: 1px solid Grey; display: inline;">
            <input type="hidden" name="currentSearchMode" value="">
            <legend><i>Fysisk person</i></legend>
            <div class="fl30">&nbsp;Förnamn:</div>
            <div class="fl40">
                <input type="text" size="40" name="searchFornamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
            </div>
            <div class="clear"></div>
            <div class="fl30">&nbsp;Efternamn:</div>
            <div class="fl40">
                <input type="text" size="40" name="searchEfternamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
            </div>
        </fieldset>

        <fieldset style="border: 1px solid Grey; display: inline;">
            <legend><i>Juridisk person</i></legend>
            <div class="fl30">&nbsp;Företag:</div>
            <div class="fl40">
                <input type="text" size="40" name="searchForetag" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
            </div>
            <div class="clear"></div>
            <div class="fl30">&nbsp;Organisationsnummer:</div>
            <div class="fl40">
                <input type="text" size="40" name="searchOrgNummer" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
            </div>
        </fieldset>
        <br>
        <br>
        <div class="fl1">&nbsp;</div>
        <div class="fl20">Postort:</div>
        <div class="fl40">
            <input type="text" size="40" name="searchPostort" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
        </div>
        <div class="clear"></div>

        <div class="fl1">&nbsp;</div>
        <div class="fl20"><label for="searchLandKod">Land</label>:</div>
        <div class="fl60">
            <input type="text" size="2" maxlength="2" name="searchLandKod" id="searchLandKod" value="" onkeyup="setListbox(event, this, 'searchLand');loaddiv(this);onkeyup=doSubmitByEnter('Namnsokning', 'search');"> 
            <select name="searchLand" id="searchLand" onchange="setSearchbox(this, 'searchLandKod');loaddiv(this);">
                        <option value="">Välj land</option>

                ...

    <tr class="g1" onmouseover="javascript:setStoreStyle(this)" ;="" onmouseout="javascript:getStoreStyle(this)" onclick="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editSearchPerson', '', '0')" style="cursor: pointer;">

        <td></td>
        <td></td>

        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>

    <tr class="g1" onmouseover="javascript:setStoreStyle(this)" ;="" onmouseout="javascript:getStoreStyle(this)" onclick="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editSearchPerson', '', '0')" style="cursor: pointer;">

        <td></td>
        <td></td>

        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>

</tbody></table>

<div id="bottomV">
    <table width="100%" align="center">
        <tbody><tr>
            <td align="left"></td>
            <td align="right"><input type="button" value="Avbryt" style="width: 150px;" class="checkmargin" onclick="document.getElementById('popupSokNamn').style.display = 'none';">
            </td>
        </tr>
    </tbody></table>
</div>

<div id="bottomA" style="display: none">
    <table width="100%" align="center">
        <tbody><tr>
            <td align="left"><input type="button" value="Ändra i register" style="width: 150px;">
            </td>
            <td align="right"><input type="button" value="Avbryt" style="width: 150px;" class="checkmargin"><input type="button" value="Infoga" style="width: 150px;">
            </td>
        </tr>
    </tbody></table>
</div>
        </div> 
```

...

CSS是

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}    

.sub_meny_search{
    position: absolute;
    right: 265px;
    font-size: 70%;
    vertical-align: text-top;
}

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}    
.checkmarginL {margin-left: 25px;}    

.pusher {padding-left: 15px;}
.pusherR {margin-right: 40px;}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700px; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400px;
}
.f1450 {
    width: 600px;
    float:left;
}
.f1550 {
    width: 150px;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;}

a img { border: 0; outline:0;}

.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    padding: 2px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 75%;
}

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1055px;
}

#topBar {width:100%; background-color:#EFEFDC; display:inline-block;}
#topBar h2 {float:left}
#close {position:relative; float:right;}â€‹ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:38:54.660

因为我猜这是浏览器不打印背景颜色的问题（如果用户没有选择），唯一不知道更多的解决方案是使用打印样式表删除弹出窗口下方的所有其他内容，以便透明背景不是一个问题。如果页面应该正常打印（当弹出窗口未打开时），您需要例如向正文添加/删除一个类，以让 CSS 知道弹出窗口何时可用。

# c - 如何在 C 程序中获得卷的可用空间？

> ID：12686030
> 
> 赞同：0
> 
> 时间：2012-10-02T07:22:13.017
> 
> 标签：c, filesystems, volume

正如标题所说，如何在 C 程序中获得卷的可用空间？我没有使用 system() 之类的技巧，它们效果不佳。（为什么？嗯，我已经试过了！）

我需要像df这样的东西，不幸的是我在标准库中没有找到任何东西。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:33:34.610

假设是现代 POSIX（Linux、OS X 等），您可以使用[statvfs](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/statvfs.h.html)：

```
struct statvfs st;
statvfs("/file/on/a/volume.ext", &st);
unsigned long free_space = st.f_bfree * st.f_frsize; 
```

对于 Windows，WinAPI 包含[GetDiskFreeSpaceEx() 函数](http://msdn.microsoft.com/en-us/library/aa364937%28VS.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:22:05.930

是的！解决了！谢谢H2CO3！只是一件小事：使用 st.frsize 代替 st.f_bsize。现在一切正常！谢谢！

这是工作代码：

```
#include <sys/statvfs.h>
struct statvfs st;
statvfs("/file/on/a/volume.ext", &st);
unsigned long free_space = st.f_bfree * st.f_frsize; 
```

# java - 调用函数以显示/隐藏另一个类的图像视图

> ID：12686032
> 
> 赞同：1
> 
> 时间：2012-10-02T07:22:18.680
> 
> 标签：java, android

在我的 MainActivity 类中，我有这个方法：

MainActivity.java

```
public void ClearImageViews() {
  final ImageView image_a = (ImageView)findViewById(R.id.image_a);
  image_a.setVisibility(View.INVISIBLE);
 } 
```

在另一个文件中，我有另一个类，它调用 ClearImageViews 方法，如下所示：

```
 MainActivity mainActivity = new MainActivity();
 mainActivity.ClearImageViews(); 
```

从 findViewById 函数运行代码时，我得到了 NullPointerExpection。当我注释掉这些行时：

```
 final ImageView image_a = (ImageView)findViewById(R.id.image_a);
 image_a.setVisibility(View.INVISIBLE); 
```

代码运行良好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:25:52.360

您可能没有`setContentView()`在`MainActivity`.

`setContentView(R.layout.your_layout)`您需要调用`MainActivity`where your_layout 是一个 xml 文件，其中有您的 ImageViews。

或者如果你做不到（因为例如你需要在 中使用另一个布局`MainActivity`），你必须膨胀你的 ImageViews。阅读有关膨胀视图的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:25:57.597

通过这样做`MainActivity mainActivity = new MainActivity();`，您正在创建新的活动实例..这与正在运行的活动不同..
对于您创建的新活动，`onCreate`不会调用它，因此没有为此设置内容，findViewById 返回 null...
您需要使用回调函数以`ClearImageViews()`适当的方式调用..

另一种解决方案是将方法设为`ClearImageViews()`静态，然后使用以下命令调用它：

```
MainActivity.ClearImageViews() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:27:54.480

将`Activity`this`ImageView`作为其字段的 this 作为 a`Context`传递给另一个类。

现在使用这样的东西......

```
class AnotherClass extends Activity{

 OriginalClass o;

 public AnotherClass(OriginalClass oo){

   this.o = oo;

}

final ImageView image_a = (ImageView)this.o.findViewById(R.id.image_a);

                // Use this.o.findViewById like above.

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:21:08.910

我解决了我的问题，将这个其他类从顶级类移动到 MainActivity 的成员类。通过这种安排，我可以访问其他班级的 findviewbyid。

# soap - Apache CXF：发布具有故障转移功能的 Web 服务（SOAP over JMS）

> ID：12686033
> 
> 赞同：1
> 
> 时间：2012-10-02T07:22:30.897
> 
> 标签：soap, jms, cxf, failover

Apache CXF：故障转移功能似乎可用，但适用于客户端。我需要创建一个绑定到特定 JMS 服务器的 JMS 队列的服务。JMS 提供程序 (TIBCO) 具有故障转移能力。有没有一种方法可以让我的服务在运行时故障转移到另一个 JMS 服务器并在那里发布？如果 cxf 无法做到这一点，是否有任何其他框架允许通过 JMS 发布服务的故障转移功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:08:20.493

维迪什，

服务器：TIBCO EMS 管理员需要配置 FT 连接工厂并向您提供连接工厂名称和 URL 详细信息。在您的 JMS 配置中配置这些详细信息 - 这对于服务器来说都是必需的。

客户端：TIBCO JMS API 提供故障转移机制。TIBCO EMS 安装文件夹中提供了示例代码。

喜悦

# c# - Syncfusion PDF 单引号自动转换为制表符空间

> ID：12686045
> 
> 赞同：-7
> 
> 时间：2012-10-02T07:23:39.137
> 
> 标签：c#, asp.net, pdf, pdf-generation, syncfusion

同步融合pdf

在 html 文本中使用分号，但是当显示 pdf 报告时，单引号被替换为制表符空间请给出解决此问题的任何建议

例如不与不转换

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:49:45.477

因为当我们使用这个特殊字符时 ' 是特殊字符。' 不显示在 pdf 报告中并且 ' 被替换为空格

**在 Syncfusion PDF 中解决这个问题**

当 htmlcontent 字符串准备好时。

将“替换为”

```
htmlContent = htmlContent.ToString().Replace("’", "'"); 
```

# php - 双while循环在一页中有效，但在第二页中无效

> ID：12686046
> 
> 赞同：0
> 
> 时间：2012-10-02T07:23:38.993
> 
> 标签：php, mysql

我正在发布一个网站。在主页上，所有最新版本都来自不同的应用程序。然后对于每个应用程序，您都有一个单独的页面，您可以在其中找到所有已发布的版本

我需要从数据库中获取结果，为此我使用了一个 while 循环（一个 while 循环用于 32 位，一个用于 64 位）。当我在主页上使用它时，它会按预期工作。从查询中给出我想要的结果。

但是当我在第二页上使用它时，32 位 while 循环会使所有结果加倍。但前提是 64 位版本号相同。64 位 while 循环工作得很好。

这是一些代码（其中会有一些错误，但我正在处理这些错误，例如相同的 id 和所有）我也知道这可能不是最好的方法，但它适用于主页，所以我真的想要就像这样

```
 <div class="content">
                <div class="content-1">
                        <?php

                    $page = $_GET["pageid"];                            
                        echo "<p class='intro'>Download here the ".$page." final releases</p>";

                    echo "<h3>".$page."</h3>";

                        require("Function/query.php");

            $queryapp = $amx32;
                $queryapp_result = mysql_query($queryapp);

                    while ($queryapprow = mysql_fetch_array($queryapp_result))
                    {
                        $queryapp64 = $amx64;
                        $queryapp64_result = mysql_query($queryapp64);
                        while ($queryapprow64 = mysql_fetch_array($queryapp64_result))
                            {   

                echo "<div class='amxrow' style='opacity:1;'>       
                        <p class='tables'>
                        <table class='table1'>
                        <thead>
                            <tr>
                                <th scope='row' id='bit32'>32 Bit</th>
                                <th scope='row' id='bit64'>64 Bit</th>
                            </tr>
                        </thead>        
                            <tbody>

                                <tr>

                                    <th scope='row'>Version</th>
                                    <td class='version'>".$queryapprow['Version']."</td>
                                    <td class='version64'>".$queryapprow64['Version']."</td>

                                </tr>
                                <tr>
                                    <th scope='row'>Released</th>
                                    <td class='datum'>".$queryapprow['Released']."</td>
                                    <td class='datum64'>".$queryapprow64['Released']."</td>
                                </tr>
                                <tr>
                                    <th scope='row'>Build by</th>
                                    <td>".$queryapprow['BuilBy']."</td>
                                    <td>".$queryapprow64['BuilBy']."</td>
                                </tr>   

                            </tbody>    
                        </table>
                        </p>
<div class='panelnotes'>

            <div style='clear:both;'></div>
                <div class='columnsnotes'>
                    <div class='colleftnotes'>
                    ".nl2br($queryapprow['Notes'])." 
                    </div>
                </div>       
                        <div style='clear:both;'></div>

            </div>

            <div class='triggernotes' style='opacity:1;'>Release   Notes</div>
            <a href='http://localhost/ReleaseWebsite/".$queryapprow['path']."'><div class='download32' style='opacity:1;'>Download redhat_e5 32bit</div></a>
                        <a href='http://localhost/ReleaseWebsite/".$queryapprow64['path']."'><div class='download64' style='opacity:1;'>Download redhat_e5 64bit</div></a>

                            <hr noshade id='line1'>
                            </div>";

            }       
            }

                            ?> 
```

任何人的想法？

*编辑* 这里有两个查询：

```
$amx32 = "SELECT * FROM $page WHERE Type='Final' AND architecture= '32bit' ORDER BY  Version DESC";
$amx64 = "SELECT * FROM $page WHERE Type='Final' AND architecture= '64bit' ORDER BY Version DESC"; 
```

@Mr.alien $page 与它无关。它只提供将从中选择的应用程序表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:38:07.257

最好将您的循环分开为 32 位和 64 位，因为嵌套循环可能会导致您的程序循环两次。

例子：

//循环32位

尽管（）{

} //循环64位

尽管（）{

}

# c# - Unity3d 应用程序作为用户控件

> ID：12686050
> 
> 赞同：4
> 
> 时间：2012-10-02T07:23:58.337
> 
> 标签：c#, wpf, winforms, user-controls, unity3d

是否可以将用 C# 编写的 Unity3d 应用程序用作另一个 WPF 或 winforms 应用程序的一部分？我可以将它用作用户控件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T10:15:07.800

1.  Yes, it is possible to embed unity exe (PC build) into WPF using WindowsFormsHost.
2.  I'm not sure if it can be used as user control because the unity exe is completely separated from WPF application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:15:04.877

不久前，当我不得不使用 Unity 3d 时，有一种方法可以将其嵌入到 WebBrowser 控件中。

有关更多详细信息，请参阅[此论坛](http://forum.unity3d.com/threads/10855-Unity-in-a-Window/page3)。

希望它可以帮助你。

# jquery - 克隆（）无法正常工作 Internet Explorer 8

> ID：12686055
> 
> 赞同：2
> 
> 时间：2012-10-02T07:24:45.983
> 
> 标签：jquery, internet-explorer, clone

我有这个代码：

```
openPopup.hide();

var substr = popupId.split('-');                        
var clone = $("#popup"+substr[1]).clone(true);

$("#popup"+substr[1]).remove();
$(openPopup).html(clone);
$.dimScreenStop(); 
```

它在 IE 7、IE 9、Chrome、Firefox 中运行良好。

我已将问题追踪到“ *var clone = $("#popup"+substr[1]).clone(true);* ”这一行。通过在所有行之间添加“ *alert("Test");* ”并在该行之后（在 IE8 中），它不会输出警报。

奇怪的是，我在 jquery min-file 中收到错误（仅在 IE8 中没有其他浏览器或浏览器版本）：

**SCRIPT5007：无法获取属性“nodeType”的值：对象为 null 或未定义 jquery.min.js?ver=3.4.1，第 2 行字符 4426**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:39:37.333

您可以调用 javascript DOM API cloneNode() 方法而不是 jQuery 的 clone()。有关[MDN的更多信息](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)

例子 ：

```
var clone = $("#node").get(0).cloneNode(true);
var $clone = $(clone); // JQUERY object

$('#copy').empty().html($clone.html());​ 
```

===>[演示](http://jsfiddle.net/NdXh8/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:34:29.087

`.clone()`给你一个**jQuery 扩展元素**而**不是 HTML 文本**。即使`.html()`足够容纳 jQuery 对象，这也不是它最初的用途。

作为解决方案，请尝试使用`$(openPopup).empty().append(clone);`而不是`$(openPopup).html(clone);`

# java - 在 httpClient 中获取 HttpResponse 时出错

> ID：12686057
> 
> 赞同：0
> 
> 时间：2012-10-02T07:24:54.470
> 
> 标签：java, httpclient

我在获取 HttpResponse 时遇到错误。从服务器端正在写这样的响应

```
response.setContentType("text/plain");

PrintWriter writer = response.getWriter();

writer.write("login Successfull"); 
```

这是我的 httpClient 代码

```
HttpClient httpClient = new HttpClient();
PostMethod httpost = new PostMethod("http://localhost:8080/Test/newServlet");
httpost.addParameter("Email" , "my@emial");
httpost.addParameter("name" , "haseeb");
//Getting Error on this line...Saying "Cannot Find Symbol"
HttpResponse response = httpClient.execute(httpost); 
```

# php - 无限滚动和字符集

> ID：12686058
> 
> 赞同：0
> 
> 时间：2012-10-02T07:24:55.950
> 
> 标签：php, ajax, character-encoding, scroll, infinite

我正在努力寻找这个问题的解决方案，但找不到它......

我正在测试一个无限滚动脚本（在这里找到：[https](https://github.com/tournasdim/PHP-infinite-scrolling) ://github.com/tournasdim/PHP-infinite-scrolling ），无限滚动工作正常，但是在我实现之后，当我包含php 与我的 mysql 搜索的结果。

我的数据库是 100% 的字符集 utf-8，我在这个测试中使用的所有页面也是 uft-8。所以我猜它是我需要放在 .js 文件中的东西，而且我是所有这些的新手，不知道该怎么做：D

你可以在这里看到的测试页面：http: [//hogardelocio.com/teste2.php](http://hogardelocio.com/teste2.php)

请注意，在顶部菜单上我写了“ñ¿¡á”只是为了测试，它没有显示错误，但在来自数据库和 ajax 的图片和文本上显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:34:32.240

问题出在您的数据库连接上。

连接必须是 UTF-8。

在 PDO`charset=UTF-8`中添加 DSN，例如：`mysql:host=localhost;dbname=test;charset=UTF-8`

在旧的 MySQL 和 MySQLi 中：在任何查询运行之前`"SET NAMES 'UTF8'"`

# image-processing - 如何在 php gd 中调整图像的曝光度

> ID：12686059
> 
> 赞同：0
> 
> 时间：2012-10-02T07:25:16.083
> 
> 标签：image-processing, computer-vision, php-gd

根据维基，我读到曝光是在拍摄照片的过程中允许落在摄影介质（摄影胶片或图像传感器）的每个区域单位上的光量。我不是图像处理背景。所以，我仍然对此感到困惑。

但我找不到任何关于使用 php 进行曝光调整的教程。有没有办法在php gd中开发曝光调整功能？任何人都可以建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:31:39.633

你应该调整亮度，而不是曝光。一旦已经制作了 JPG 或 BMP，您就可以点亮一个像素。术语“曝光”仅在拍摄数字图像或显影底片（模拟或数字）时正确使用。

GD 有[imagefilter](http://php.net/manual/en/function.imagefilter.php)功能，你应该使用`IMG_FILTER_BRIGHTNESS`filter 类型。

# css - 将 line-height 设置为相对于父元素的百分比

> ID：12686065
> 
> 赞同：54
> 
> 时间：2012-10-02T07:25:43.223
> 
> 标签：css

我有一个响应元素，它的宽度和高度都会缩放。在这里面我有一些我想垂直居中的文本。

`line-height`如果我不知道父级的高度，如何将文本设置为与其父级相同？

`line-height: 100%`是相对于字体的常规高度，所以这无济于事......

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-02T08:00:42.250

这是垂直居中元素的另一种方法。前段时间我遇到了[这种技术。](http://css-tricks.com/centering-in-the-unknown/)基本上它使用伪元素和垂直对齐：中间。

```
.block::before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
  width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-03-06T12:04:21.450

Since it's 2019 already, you could also use flexbox to achieve this :)

To do so, add the following classes to the parent element:

```
display: flex;
flex-direction: column;
justify-content: center; 
```

See this [Fiddle](http://jsfiddle.net/jm6txa18/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:37:08.710

我会尝试将文本放在您知道（或设置）大小的另一个元素中。然后设置它的相对定位，上、左 50% 和负左右边距。

[看到这个小提琴](http://jsfiddle.net/YKh8P/1/)

唯一的问题是这依赖于已知/固定的文本块。如果文本是可变的，恐怕你将不得不求助于使用 Javascript ..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-25T13:18:19.173

关于超链接：

关于主菜单中的链接，我遇到了这个问题。而且由于它`<a>`在`<li>`标签中，我需要一些表面来使链接可点击/可触摸（请参阅[触摸目标大小](https://developers.google.com/web/fundamentals/accessibility/accessible-styles)）。所以我所做的是`<ul>`我设置了一个固定的高度（在这种情况下通过它的父级），- `<li>`s 是它的百分比，`<a>`-s 有一个 min-height 和 line-height 属性设置，很容易从在那里设置顶部。编码：

```
.menu-header-main-container{
position: fixed;
top: 0;
bottom: 160px;
}    
.menu-header-main-container ul.menu {
          height: 100%; }
          .menu-header-main-container ul.menu li {
            height: 33.33%;
            max-height: 110px; }
            .menu-header-main-container ul.menu li a {
              line-height: 40px;
              min-height: 40px;
              top: calc(50% - 20px);
              position: relative; } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T07:32:12.720

您不能仅使用 CSS 将 line-height 设置为父元素高度的 100%。相反，您可以使用 CSS 将元素垂直居中。

```
.parent {
   height:150px;
   position:relative;
   border:1px solid #FDD;
}
.position-center {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
}
```

```
<div class="parent">
  <span class="position-center">I am vertically centered element</span>
</div>
```

# python - django注册重定向

> ID：12686069
> 
> 赞同：0
> 
> 时间：2012-10-02T07:25:58.027
> 
> 标签：python, django, registration

我在 django 注册表单中使用了自定义字段，一切正常，但是每当它尝试重定向时，它都会显示以下错误。

我不知道我在这里错过了什么。

```
NoReverseMatch at /accounts/register/
Reverse for 'registration_complete' with arguments '()' and keyword arguments '{}' not found. 
```

我试过以下

网址

```
url(r'^accounts/register/$', register, {'backend': 'registration.backends.default.DefaultBackend','form_class': RegistrationFormEx}, name='registration_register'), 
```

注册表格.py

```
from django import forms
from registration.forms import RegistrationForm
from django.utils.translation import ugettext_lazy as _
from registration.models import RegistrationProfile

class RegistrationFormEx(RegistrationForm):
    #ADD ALL CUSTOM FIELDS BELOW
    name=forms.CharField() 
```

模型.py

```
import hashlib
import datetime
import hmac
from django.db import models
from django.contrib.auth.models import User
from ecpCommon.models import StateModel
from ecpCommon.enum import enumauto
from ecpPayments.models import PaymentCard
from registration.signals import user_registered
from apps.ecpUser.models import UserProfile
from apps.ecpMerchant.registrationForm import RegistrationFormEx
from apps.ecpCommon.thumbs import ImageWithThumbsField

class MerchantProfile(StateModel):

    name = models.CharField('Merchant Name', max_length=64)

    def user_created(sender, user, request, **kwargs):
        form = RegistrationFormEx(data=request.POST)
        new_user = User.objects.get(username=request.POST['username'])
        digest=hmac.new(str(request.POST['username'])+str(request.POST['password1']), str(request.POST['password1']),hashlib.sha1).hexdigest()
        new_profile = UserProfile(user=new_user,api_key=digest)
        new_profile.save()
        #now add other fields including password hash as well
        uid = new_profile.id

        merchant_profile = MerchantProfile(user_id=uid,
            create_time=datetime.datetime.now(),
            modified_time=datetime.datetime.now(),
            payment_card_id=uid,
            current_state=1,
            name=request.POST['name'],
             )
        merchant_profile.save()

        return new_user

    user_registered.connect(user_created) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:32:11.767

这可能是因为您的视图中的注册成功重定向正在重定向到一个`registration_complete`不存在的 URL: 。

要修复它，您应该添加一个类似于您所拥有的 url 记录`registration_register`

```
url(r'^accounts/register/$', register, {'backend': 'registration.backends.default.DefaultBackend','form_class': RegistrationFormEx}, name='registration_register'), 
```

指向正确的 url `name=registration_complete`。

# css - 媒体查询 Polyfill 性能 - IE

> ID：12686093
> 
> 赞同：0
> 
> 时间：2012-10-02T07:27:58.897
> 
> 标签：css, media-queries, polyfills

我正处于建立网站的早期阶段。我正在研究一些可以利用媒体查询在较小屏幕尺寸下正常工作的设计元素。

我对此没有任何问题，除了这将是一个**小站点**，因此几乎唯一在其上运行的 javascript 将是用于 IE 和其他浏览器的媒体查询的 Polyfill。

这会对性能产生多大影响？是否进行了任何适当的测试？

我问是因为我现在处于阶段，如果 polyfill 对性能的影响足够大，我可以调整设计，这样我就不必使用它们，也可以作为未来项目的想法。

**奖励问题：**
如果我不首先使用移动设备，而是最后使用移动设备，并且进行`max-width`查询而不是查询`min`，我什至需要一个 polyfill。如果页面在宽度小于 500 像素之前没有任何变化，我真的需要担心 IE 不显示它们吗？还是我错过了一些边缘情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:45:09.510

让我们从你的奖金问题开始。

如果您使用`max-width`媒体查询，我认为您实际上不需要 IE8 及以下版本的 js 解决方案。也就是说，这实际上取决于您的网站“*断点*”是什么。

可能仍在运行 IE7 的用户不会拥有 1920x1200 分辨率的高清屏幕。所以请记住，在不涉及媒体查询的情况下，让一切都适用*于*800x600 屏幕。

就个人而言，我更喜欢一种`min-width`方法，因此我可以[逐步增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)我的网站功能。但这实际上取决于您的项目类型/受众。

* * *

根据[StatCounter 的全球统计数据](http://gs.statcounter.com/#browser_version-ww-monthly-201210-201210-bar)，截至 2012 年 9 月，约 14% 的用户仍在使用 IE8，只有不到 2% 的用户使用 IE7。

如果您想为这 15%（每 100 个约 6 个）提供最佳用户体验，那么您可能需要**[respond.js](https://github.com/scottjehl/Respond)**。

我已经在 IE7 和 IE8 上使用并测试过它。我没有注意到性能上的差异，但我在网上找不到任何基准测试。

[Modernizr](http://modernizr.com/resources/)推荐并包含在[html5boilerplate](http://www.initializr.com/)响应式构建中，所以我很确定你可以......相信它;-)

# wix - 使用在 Wix 中创建的 x86 mai 包写入注册表的 x64 部分

> ID：12686094
> 
> 赞同：6
> 
> 时间：2012-10-02T07:28:08.240
> 
> 标签：wix, registry, windows-7-x64, wix3.5

我正在为使用 Wix 的产品编写安装程序包，整个内容都在 x86 中，但现在我需要向注册表的 x64 部分添加一个密钥。我环顾四周，发现[了这个堆栈答案](https://stackoverflow.com/a/2577367/923329)，我认为它可以解决我的问题。但是我收到一个 ICE80 错误（不是警告），它告诉我我基本上需要将我的 Package Platform 属性更改为 x64。

然而，我宁愿避免这种情况，因为正如我所提到的，它只是一个需要在 x64 中的注册表项。

所以我的问题是：是否有另一种方法来解决 ICE80 错误，或者我是否需要构建两个 msi 包，一个用于 x86，一个用于 x64。

这是我的一些代码，以进一步说明我正在尝试做的事情：

```
 <Component Id="Foo" Guid="{GUID}" Win64="yes">
    <RegistryKey Root="HKLM" Key="Software\Microsoft\Windows NT\CurrentVersion\Terminal Server\Compatibility\IniFiles">
      <RegistryValue Type="integer" Name="Hello" Value="1"/>
    </RegistryKey>
    <Condition><![CDATA[VersionNT64]]></Condition>
  </Component>

  <Component Id="Bar" Guid="{GUID}">
    <RegistryKey Root="HKLM" Key="Software\Microsoft\Windows NT\CurrentVersion\Terminal Server\Compatibility\IniFiles">
      <RegistryValue Type="integer" Name="Hello" Value="1"/>
    </RegistryKey>
  </Component> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:35:12.600

Windows Installer 不支持将 32 位程序包写入 64 位注册表（或文件系统）。64 位包可以写入 32 位和 64 位部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T14:48:43.533

或许当时没用。我正在使用 Wix v10 和我的 x86 WIX 项目，并添加`Win64="yes"`最初生成的 ICE80 错误。一旦我抑制了该警告（在 Visual Studio 中，“工具设置”->“抑制特定验证：”列），我不再收到该错误。当我在 Windows 2012 R2 上运行 x86 安装程序时，会创建那些 x64 注册表项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:29:17.620

添加`Win64="yes"`到要放入注册表中的 64 位注册表项中。..:) 我自己的条件中没有包含该条件，它仅与 Win64 属性完美配合。

# java - 如何使用另一个程序编译 Java 程序？

> ID：12686095
> 
> 赞同：0
> 
> 时间：2012-10-02T07:28:09.503
> 
> 标签：java, process, javac

所有人都在通过我的应用程序编译和运行 java 源代码的项目。在这里卡住将在这里解释我的环境.. `java 1.6.0_35 32bit`并 在我使用此代码时`eclipse indigo`使用操作系统`windows 64 bit`

```
String command = "javac "+file.getAbsolutePath();
System.out.println(command);
Process p = Runtime.getRuntime().exec(command);` 
```

得到这个异常..认为错误显示文件不存在，但我检查了它，它就在这里，当我通过编译的命令行执行时，但 eclipse 显示这个错误

```
java.io.IOException: Cannot run program "javac": CreateProcess error=2, The system cannot find the file specified
at java.lang.ProcessBuilder.start(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)` 
```

任何人都可以解决这个问题，我尝试了很多..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:32:51.680

您不需要使用命令行，您可以通过`javac`编程方式访问：

```
JavaCompiler javac = ToolProvider.getSystemJavaCompiler();
javac.run(null, null, null, arguments); 
```

看

*   [Java 6.0 编译器 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html#package_description)
*   和[http://openjdk.java.net/groups/compiler/guide/compilerAPI.html](http://openjdk.java.net/groups/compiler/guide/compilerAPI.html)示例

它是可移植的（在其他系统上工作）并且可以避免路径和命令行的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:35:39.523

您可以使用[Java 6 编译器 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html#package_description)。[这个链接](http://www.javabeat.net/articles/73-the-java-60-compiler-api-1.html)也可能有用..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:36:16.033

您的问题似乎不是找不到您要编译的文件，而是找不到 javac 命令本身。确保运行时可以找到 javac 可执行文件，最终通过将“PATH=/path/to/java/dir”传递给 exec。

请参阅：[Runtime.exec（命令、环境、目录）](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String,java.lang.String%5C%5B%5C%5D,%20java.io.File%29)

# c++ - 复制构造函数不调用

> ID：12686099
> 
> 赞同：4
> 
> 时间：2012-10-02T07:28:27.810
> 
> 标签：c++, constructor

[当我在这里](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)阅读有关复制初始化与直接初始化的信息时。复制构造函数应该调用复制初始化。为什么这里复制构造函数不调用？

```
#include <iostream>

using namespace std;

class A{};

class B{
public:
B(const A &a){cout << "B construct from A" << endl;}
B(const B &b){cout << "B copy constructor" << endl;}
};

int main(){
A a;
B b = a;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:30:57.890

复制初始化仍然受到复制省略的影响，我猜这就是正在发生的事情。从理论上讲，临时`B`构造是从临时构造的，`a`并且复制构造函数用于`b`从临时构造中创建。在实践中，副本可以被优化出来。

要对此进行测试，您可以将复制构造函数设为私有：

```
class B{
public:
B(const A &a){cout << "B construct from A" << endl;}
private:
B(const B &b){cout << "B copy constructor" << endl;}
}; 
```

并得到一个编译错误。这意味着编译器期望复制构造函数可以访问，但不需要调用它。

复制省略是唯一可以改变观察到的行为的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T07:36:48.330

这是**复制省略**^(参考 1)：。
编译器可以通过内联创建对象来优化生成临时对象时的复制构造函数调用，并且 C++ 标准明确允许这样做。

这在标准中也通过示例很好地证明了这一点：

**C++03 标准 12.2 临时对象 [class.temporary]**
**第 2 段：**

```
[Example:
class X {
    // ...
    public:
    // ...
    X(int);
    X(const X&);
    ˜X();
};
X f(X);

void g()
{
    X a(1);
    X b = f(X(2));
    a = f(a);
} 
```

> `X(2)`在这里，一个实现可能会在将它传递给`f()`使用 X 的复制构造函数之前使用一个临时对象来构造它；或者，`X(2)`可以在用于保存论点的空间中构造。此外，在将结果`f(X(2))`复制到``b using`X `’s copyconstructor; alternatively,`f() `’s result might be constructed in b. On the other hand, the expression`a=f(a) `requires a temporary for either the argument a or the result of`f(a) `to avoid undesired aliasing of`a` 之前，可能会使用一个临时值来保存结果。]

**^(参考 1：)**
**C++03 12.8 复制类对象 [class.copy]**
**第 12 段：**

> **当满足某些条件时，允许实现省略类对象**的复制构造，即使对象的复制构造函数和/或析构函数具有副作用......

# android - 为什么我们不创建具有最新版本和最旧版本的模拟器

> ID：12686102
> 
> 赞同：1
> 
> 时间：2012-10-02T07:28:29.150
> 
> 标签：android, android-emulator

如果我们使用具有最新和旧版本 sdk 的模拟器怎么办，优缺点是什么？我注意到有些人倾向于只使用最新版本而不是提供较低版本以实现向后兼容性。我所知道的是，如果我们不使用向后兼容性，有些手机将无法使用最新 sdk 的应用程序。

如果我们只使用最新版本，它对应用程序有何影响？如果我们更深入地了解向后兼容性，是否会导致应用程序性能或 GUI 降低？

请给我你的想法。提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:33:57.363

您应该在您的应用程序支持的所有 API 级别上进行测试（最好是在实际设备上，而不仅仅是模拟器上），而不仅仅是最旧和最新的版本。我也会优先在 API 级别 10 的设备上进行测试，因为它是当前最常见的 API 版本 (http://developer.android.com/about/dashboards/index.html)。

# java - 在java中连接多个音频文件

> ID：12686105
> 
> 赞同：0
> 
> 时间：2012-10-02T07:28:47.887
> 
> 标签：java, audio, merge, concatenation, text-to-speech

我有一个 java text-to-speech 项目，我想连接多个音频文件（'ogg' 格式），以便我在一个流中播放它们，有人知道吗？java可以做到这一点吗？如果您能引导我找到任何资源或教程或任何有用的东西，我将非常高兴，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:16:49.110

对于连接，我会通过 Runtime.exec() 或 ProcessBuilder 使用一些外部命令行工具。

可能，oggcat 应该适用于您的情况：[http](http://en.flossmanuals.net/ogg-theora/command-line-editing/cat-files/) ://en.flossmanuals.net/ogg-theora/command-line-editing/cat-files/ （它是关于视频的，但 ogg 容器是相同的，尝试一下是有意义的，反正）

至于玩，有 JOrbis 库，可能还有别的东西。

# c# - 如何使用代理网站在 C# 中查看其他网站？

> ID：12686106
> 
> 赞同：1
> 
> 时间：2012-10-02T07:28:47.327
> 
> 标签：c#

假设我所在地区有几个网站被过滤，为了获得该页面上的一些特定信息，我需要使用代理网站（例如（[Thisone](http://www.hotpanda.info)））绕过过滤。
我怎样才能将我的邮件发送`URL`到这些网站并获得结果？
如何在结果内容中搜索特定术语或对象（图像、flash 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:53:31.407

您提到的站点似乎没有提供任何可以从 C# 调用的 API。可能您最好的选择是使用[Selenium](http://seleniumhq.org/)或[Watin](http://watin.org/)等工具自动手动输入 url 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:35:55.013

.NET 中的`WebClient`和`WebBrowser`组件自动使用系统 Internet Explorer 网络和代理设置（通过控制面板 > Internet 设置）。如果你把它们放在那里，那么你就准备好了。

如果您使用`WebBrowser`我不知道（我不知道）是否可以手动覆盖代理设置，但`WebClient`您可以设置`WebClient.Proxy`属性。

# ios - 在 iOS 中切换视图时，SQlite 更新不起作用

> ID：12686107
> 
> 赞同：0
> 
> 时间：2012-10-02T07:28:49.987
> 
> 标签：ios, database, xcode, sqlite

我有一个收藏夹视图，它从 sqlite 数据库加载数据。它显然会加载进入单元格。

收藏夹视图类名为 FavReal。我已经启用了一个 canEditRowAtIndexPath ，它具有从数据库中删除条目并将其从表视图中删除的操作。它工作正常！而且我还有一个清除所有收藏夹按钮，可以正确删除所有条目。

现在，如果我单击一个单元格，它会将我带到另一个名为 Details22 视图的视图。在这个视图中，我得到了所选单元格的详细信息并且它可以工作。

现在单击一个条目并返回收藏夹视图后。如果我尝试通过滑动手势或清除所有按钮删除条目。它不起作用：S 没有错误没有什么它只是不会将它从数据库中删除，而只是立即从表视图中删除它。

这是我的代码。

***/* FavReal.m */***

```
//
//  FavReal.m
//  AuthorsApp
//
//  Created by georges ouyoun on 8/16/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "FavReal.h"
#import <sqlite3.h>
#import "Author.h" 
#import "Details22.h"
#import "AuthorVC.h"
@interface FavReal ()

@end

@implementation FavReal
@synthesize textLabel2;
@synthesize theFav;
@synthesize author; 
NSString *authorNAme;
NSString *authorNAme3 , *authorNAme4;
NSString *authorFav;
NSString *PathDB;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"entered the cellForRowAtIndexPath");
    static NSString *CellIdentifier2 = @"FavoritesCell";

    UITableViewCell *cell2 = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
            NSLog(@"Break before the if");
    if (cell2 == nil) {
        NSLog(@"Entered the nil cell 1 ");
        cell2= [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier2];
        NSLog(@"Entered the nil cell 2 ");
    }

    Author *author8 = [self.theFav objectAtIndex:indexPath.row];
    NSLog(@"Author initialized");
    cell2.textLabel.text = author8.title;
    NSLog(@"This is the author8.title variable %@" , author8.title);
    NSLog(@"Cell2 is initialized");
 //   NSString *cellName = cell2.textLabel.text;

 //   [theFav release];
        return cell2;

}

-(void)viewWillAppear:(BOOL)animated{
//    [self.tableView cell];
    NSLog(@"§§§§§§§§§§§§§ VIew will appear phase 1 §§§§§§§§§§§§§§§§");

    [self authorList2];
    [self.tableView reloadData] ;
    NSLog(@"§§§§§§§§§§§§§ VIew will appear §§§§§§§§§§§§§§§§");
   [self viewDidLoad];
}

- (void)viewDidLoad
{
      NSLog(@"§§§§§§§§§§§§§ ViewDidLoad §§§§§§§§§§§§§§§§");
    UIBarButtonItem *nextButton = [[UIBarButtonItem alloc]
                                   initWithTitle:@"Clear All Favorites"
                                   style:UIBarButtonItemStyleBordered

                                   target:self
                                   action:@selector(deleteSomeStuff)];

    [[self navigationItem] setLeftBarButtonItem:nextButton];

    [nextButton release], nextButton = nil;

    [self authorList2];
    [super viewDidLoad];

}

- (void)viewDidUnload
{

    NSLog(@"§§§§§§§§§§§§§ ViewDid UN-Load §§§§§§§§§§§§§§§§");

    [self setTextLabel2:nil];
    [ClearBu release];
    ClearBu = nil;
    [super viewDidUnload];

}

-(void) viewWillDisappear:(BOOL)animated{

}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    int rowCount;

     rowCount = theFav.count;
    return rowCount;
}

-(NSMutableArray *) authorList2{

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSLog(@"1");
    theFav = [[NSMutableArray alloc] initWithCapacity:1000000];

    @try {
        NSLog(@"1 alpha:");

        BOOL success = [fileManager fileExistsAtPath:PathDB];
        NSLog(@"1 gamma");
        if(!success)
        {
            NSLog(@"2");
            NSLog(@"Cannot locate database file '%@'.", PathDB);
        }
        NSLog(@"Success");
        if(!(sqlite3_open([PathDB UTF8String], &db2) == SQLITE_OK))
        {
            NSLog(@"3");
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db2));

        }

        NSLog(@"Database opened");
        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql2 = "SELECT Name FROM Fav";

        sqlite3_stmt *sqlStatement2;
        if(sqlite3_prepare(db2, sql2, -1, &sqlStatement2, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
        }else{
            while (sqlite3_step(sqlStatement2)==SQLITE_ROW) {
              //  NSLog(@"Probleme not with the query but in here!!");
                Author * author2 = [[Author alloc] init];
                //author2.fav = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement2,2)];
                author2.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement2,0)];

               // authorFav=author2.title;              
                [theFav addObject:author2];

            }
        }
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
    }
    @finally {

        return theFav;
    }
}

-(void)deleteSomeStuff{
    NSLog(@"Delete Button Clicked");
    @try {
     //   NSLog(@"This is the authorName2 variable %@",authorNAme2);

        sqlite3_stmt *compiled_statement1;

        if(sqlite3_open([PathDB UTF8String], &db2) == SQLITE_OK) {

            NSString *formatedSql = [NSString stringWithFormat:@"DELETE FROM Fav"];

            const char *sql = [formatedSql UTF8String];
            NSLog(@" !!!!!!!! In the middle of it !!!!!!!!!!!!");
            if (sqlite3_prepare_v2(db2, sql, -1, &compiled_statement1, NULL) != SQLITE_OK) {
                NSLog(@"!!!!!!!!!!!!!!!!!!!ERRRRROOOOOOORRRRRRRRR!!!!!!!!!!!!!!!!!!!!!!!!!");

            }

            NSLog(@"This is the query %@",formatedSql);

            int success = sqlite3_step(compiled_statement1);

            if (success != SQLITE_ERROR) {
                NSLog(@"Successfully Deleted!");
                sqlite3_last_insert_rowid(db2);
            }

            if(sqlite3_prepare(db2, sql, -1, &compiled_statement1, NULL) != SQLITE_OK)
            {
                NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));

            }else{

                NSLog(@"Got in the else tag where pictures should change ");

                while (sqlite3_step(compiled_statement1)!=SQLITE_OK) {

                    NSLog(@"Got in the while tag");
                    break;
                    }
                }
            }

       // NSArray *arr;
        [self.theFav removeAllObjects]; 
        [self.tableView reloadData];

        }

    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
    }
    @finally {
        sqlite3_close(db2);
    }

}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(editingStyle == UITableViewCellEditingStyleDelete)
    {
        @try{
            if(!(sqlite3_open([PathDB UTF8String], &db2) == SQLITE_OK))
            {
                NSLog(@"3");
               // NSLog(@"Could not open Db2", sqlite3_errmsg(db2));

            }
            else {
                NSLog(@"Db2 is opened");
            }
            NSIndexPath *indPath7= [NSIndexPath indexPathForRow:indexPath.row inSection:0]; 
            UITableViewCell *cell7 = [tableView cellForRowAtIndexPath:indPath7]; 
            NSString *cellText7 = cell7.textLabel.text;

          //  NSLog(@"§§§§§§§§§§§§§§§§§ This is the cell text §§§§§§§§§§" , cellText3);
            sqlite3_stmt *sqlStatement7;
            NSString *titleString = [[[NSString alloc] initWithFormat:@"%d",indexPath.row] autorelease];

            //const char *sql3 = ["DELETE FROM Fav WHERE rowid = '%@'" , titleString]  ;

            NSString *formatedSql3 = [NSString stringWithFormat:@"DELETE FROM Fav WHERE Name = '%@'" ,cellText7];
           // const char *formatedSql3 = [@"DELETE FROM Fav WHERE rowid = '%@'",titleString];

            NSLog(@"This is the DELETE Query %@", formatedSql3);
            const char *sql3 = [formatedSql3 UTF8String];
            NSLog(@"This is the titleString Variable %@ " , titleString);

            if(sqlite3_prepare(db2, sql3, -1, &sqlStatement7, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
        }
            else{

                int successS = sqlite3_step(sqlStatement7);
                if (successS != SQLITE_DONE) {
                    NSLog(@"An error Has occured during the delete of the specific record");
                }
                else{

                    NSLog(@"Update Database successfull!");
                }
            }
        }    
                @catch (NSException *exception) {
                    NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
                }

                @finally {
                    //sqlite3_finalize(sql);
                  //  sqlite3_close(db2);
                    //return theFav;
                }
            [self.theFav removeObjectAtIndex:indexPath.row];
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSIndexPath *indPath3 = [NSIndexPath indexPathForRow:indexPath.row inSection:0]; 
    UITableViewCell *cell3 = [tableView cellForRowAtIndexPath:indPath3]; 
    NSString *cellText3 = cell3.textLabel.text;

  //  NSLog(@"This is at first : %@" , authorNAme);
  //   NSString *titleString2 = [[[NSString alloc] initWithFormat:@"Element row number :  %d",indexPath.row] autorelease];
    NSLog(@"This is the showDetailsForIndexPath");

    Details22 * vc4 = [self.storyboard instantiateViewControllerWithIdentifier:@"Details22"];
    //FavReal* author;
    NSLog(@"This is the showDetailsForIndexPath 2");

    @try{
            if(sqlite3_open([PathDB UTF8String], &db2) == SQLITE_OK) {

        NSString *titleString3 = [[[NSString alloc] initWithFormat:@"Element row number :  %d",indexPath.row] autorelease];
        NSLog(@"This is the row number chosen %@",titleString3);

       NSString *formatedSql333 = [NSString stringWithFormat:@"Select * from Sheet1 where field3 = '%@'" , cellText3 ];
                const char *formatedSql3333 = [formatedSql333 UTF8String];

        NSLog(@"This is the SQLite Approriate Query %@",formatedSql333);

        sqlite3_stmt *sqlStatement3;

        NSString *SearchedItem = cellText3;
        NSLog(@"This is the SearchedITem Variable %@" , SearchedItem);

        if(sqlite3_prepare(db2, formatedSql3333, -1, &sqlStatement3, NULL) != SQLITE_OK)
    {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
    }else{

     while (sqlite3_step(sqlStatement3)!=SQLITE_ERROR) {

         NSLog(@"Entered the While tag");   
         NSString *SearchedItem = cellText3;
         NSLog(@"This is the SearchedITem Variable %@" , SearchedItem);

                Author * author3 = [[Author alloc] init];
         NSLog(@" Debug 1  ");

                author3.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement3,2)];
                  NSLog(@" Debug 2  ");

                NSLog(@"This is the author.name in the FavReal %@" , author3.name);

                author3.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement3,3)];
         NSLog(@"This is the author.TITLE in the FavReal %@" , author3.title);

                author3.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement3, 6)];
         NSLog(@"This is the author.GENRE in the FavReal %@" , author3.genre);
         NSLog(@"This is the authorName before %@", authorNAme);
         NSLog(@"This is the authorName2 before %@", authorNAme2);
         authorNAme = author3.genre;
         authorNAme2 = author3.name;

         NSLog(@"This is the authorName after %@", authorNAme);
         NSLog(@"This is the authorName2 after %@", authorNAme2);

         NSLog(@"Before the break");
         NSLog(@"Before the animation part");
         [self.navigationController pushViewController:vc4 animated:true];   
         NSLog(@"Passed the should animate part");

         break;
         NSLog(@"After the break");
     }     
               }
    }
    }

    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));
    }
    @finally {
        sqlite3_close(db2);
        NSLog(@"The database should NOT be closed here");
    }
}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath {

    //return UITableViewCellAccessoryDetailDisclosureButton;
    return UITableViewCellAccessoryDisclosureIndicator;
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {

    [self tableView:tableView didSelectRowAtIndexPath:indexPath];
}

- (void)dealloc {
    [theFav release];
    [self release];
    [textLabel2 release];
    [textLabel2 release];
    [ClearBu release];
    [super dealloc];
}
- (IBAction)ClearButtonAction:(id)sender {

    NSLog(@"Clear Button is Clicked");
}
@end 
```

***/* 详情22.m */***

```
//
//  Details.m
//  AuthorsApp
//
//  Created by georges ouyoun on 7/17/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "AppDelegate.h"
#import "Details22.h"
#import "Author.h"
#import "AuthorVC.h"
#import <sqlite3.h>
#import "FavReal.h"
//#import "MTPopupWindow.h"

@interface Details22 ()

@end

@implementation Details22
//@synthesize Favo;
@synthesize text2;
@synthesize WebV2;
@synthesize labelText;
@synthesize selectedAuthors;
@synthesize author , infoRequest;
NSUInteger textFontSize2 = 20;
NSString *PathDB; 
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"In the viewDidLoad this is the current value of the textFontSize %d" , textFontSize2);

    NSString * htmlString = [NSString stringWithFormat:@"\
                             <html>\
                             <body>\
                             <p dir='rtl' style = 'font-size:40px;'> %@ </p>\
                             </body>\
                             </html>",authorNAme];

    [self.WebV2 setScalesPageToFit:YES];
    [self.WebV2 loadHTMLString:htmlString baseURL:nil];

    self.text2.text = authorNAme2;

    /* ////////////////////////////////////////////         This is where the label text APPearsssssssss       ///////////////////////////          */

    NSLog(@"Everything is ok now !");

}
- (void)viewDidUnload
{
    //  [self setLabelText:nil];
    NSLog(@"U have entered view did unload in Details22");

    //[FavReal initialize];

    [self setText2:nil];

    [self setWebV2:nil];

    [sizeFontFromStepper release];
    sizeFontFromStepper = nil;
    [super viewDidUnload];

    //[self setLabelText:Nil];
    //[AuthorVC load];

    //[self release];
   // NSLog(@" FAvReal should have been initialised ");
    // Release any retained subviews of the main view.
}

-(void)viewWillAppear:(BOOL)animated
{ 
    NSLog(@"U have entered the viewWillAppear tag");
}

-(void) viewWillDisappear:(BOOL)animated{

      NSLog(@"This is the view will disappear tag in Details22");

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)dealloc {
    [labelText release];

    [text2 release];
   // [fontStep release];
    [WebV2 release];
    [sizeFontFromStepper release];
   // [sizeFontFromStepper release];
    [super dealloc];
}

-(void)loadHTMLString:(int)textFontSize2
{
    NSString * htmlString = [NSString stringWithFormat:@"\
                             <html>\
                             <body>\
                             <p dir='rtl' style = 'font-size:%dpx;'> %@ </p>\
                             </body>\
                             </html>",textFontSize2,authorNAme];

    NSLog(@"This is the loadHTMLString function with a textFonSize of %d" , textFontSize2);

    //[self.WebV setScalesPageToFit:YES];
    [self.WebV2 loadHTMLString:htmlString baseURL:nil];

}
- (IBAction)loadHtmlNewFontSize:(int)textFontSize2 {

    textFontSize2 = sizeFontFromStepper.value;

    [self loadHTMLString:textFontSize2];

    NSLog(@"This is textFontSize %d" , textFontSize2);
}          

@end 
```

任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:50:16.417

经过很长时间的折腾！！！唯一最简单的解决方案是添加 FavReal.m ，在 didSelectRowAtIndexPath 方法中，在 @finally 中，***sqlite3_finalize(stmt)***。这就是整个问题！

# sql - 通过变量合并两个检索的行

> ID：12686112
> 
> 赞同：1
> 
> 时间：2012-10-02T07:29:16.323
> 
> 标签：sql, sql-server, tsql

我有以下问题。我已经根据 ID 值声明了一个变量，但是有两个不同的值包含我的数据。这是我检索的：

```
 entry_template_id   entry_template_name book_display_name   entry_count value_count null_value_count    null_percentage followed_value_count    followed_null_value_count   followed_null_percentage    
                   9    Loading             Reporting            10            530           78              0.147169811320      520                      78                         0.150000000000 
                   19   Loading             Reporting            1              53            8              0.150943396226       53                       8                         0.150943396226 
```

我只想检索 ID 为 (9, 19)、相同模板名称、相同显示名称、SUM (entry_count)、SUM(value_count)、SUM(null_value_count)、AVG(null_percentage)、SUM(followed_value_count)、SUM(followed_nulls_value_count) 的一行), AVG(followed_null_percentage)。

你能帮我语法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:06:55.820

如果您想按名称分组，这应该有效：

```
SELECT 
STUFF((SELECT ', ' + CAST(entry_template_id AS varchar(50))
       FROM Entries t2 where t1.entry_template_name = t2.entry_template_name 
       FOR XML PATH('')), 1, 2, '') Ids, 
MAX(entry_template_name) entry_template_name, 
MAX(book_display_name) book_display_name, 
SUM(entry_count) entry_count, SUM(value_count) value_count, 
SUM(null_value_count) null_value_count, 
AVG(null_percentage) null_percentage, 
SUM(followed_value_count) followed_value_count, 
SUM(followed_null_value_count) followed_null_value_count, 
AVG(followed_null_percentage) followed_null_percentage
FROM Entries t1
GROUP BY entry_template_name 
```

请参阅[此问题](https://stackoverflow.com/questions/7448734/sql-comma-separated-row-with-group-by-clause)以获取进一步说明。

# javafx-2 - JavaFX 如何设置最大/最小窗口大小？

> ID：12686120
> 
> 赞同：15
> 
> 时间：2012-10-02T07:29:52.833
> 
> 标签：javafx-2, fxml

`setMinSize()`例如，是否适用于容器`GridPane`？我发现在我的程序中`GridPane`忽略了 min。手动调整大小时的大小属性。

这是 FXML 代码：

```
<GridPane fx:id="gp" prefHeight="134.0" prefWidth="238.0" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication12.SampleController">
  <columnConstraints>
    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
  </columnConstraints>
  <rowConstraints>
    <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
    <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
    <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
  </rowConstraints>
</GridPane> 
```

和控制器类

```
public class SampleController implements Initializable {

    @FXML
    private GridPane gp;

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        gp.setMaxWidth(700);
        gp.setMinSize(200, 200);
    }
} 
```

这里有什么问题？是否应该有某种“窗口”最大/最小尺寸？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-02T10:25:48.890

我将假设通过窗口，您的意思是[`Stage`](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)（哪个子类`Window`）。

窗口大小可以与场景的根容器大小不同。您可以将窗口或舞台视为场景中的独立视口，其大小可以大于或小于场景根的最小和最大规格。

要设置舞台的最小或最大尺寸，请设置其[`minHeight`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#minHeightProperty)and[`minWidth`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#minWidthProperty)或[`maxHeight`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#maxHeightProperty)and[`maxWidth`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#maxWidthProperty)属性。

*其他问题的答案*

> 可以`Stage`设置为“适合整个显示器”大小吗？

[`stage.setFullScreen(true)`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#setFullScreen-boolean-)

> 但是如何使大小与我们通过点击标题栏的大小相同呢？

[`stage.setMaximized(true)`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#setMaximized-boolean-)

# vba - 如何在自定义功能区的 Office 文件中嵌入图像

> ID：12686125
> 
> 赞同：6
> 
> 时间：2012-10-02T07:30:19.940
> 
> 标签：vba, excel, ribbon

我正在为 Excel 开发一个自定义功能区扩展，其中一个控件需要不同的自定义图像。我设法使用了位于我的文件系统中的一些图像，但我想将这些图像嵌入到 .xlsm 文件中。是否可以这样做并从更新控件图像的 VBA 代码中引用它们？

出于测试目的，这是定义我的自定义功能区的 XML：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onLoad="ribbonLoaded">
  <ribbon>
    <tabs>
      <tab idMso="TabHome" >
        <group id="customGroup1" label="My Group" insertAfterMso="GroupFont">
          <button id="customButton1" label="Click Me" size="large" onAction="Macro1" getImage="getButtonImage"/>
        </group>
      </tab>
    </tabs>
  </ribbon>
</customUI> 
```

这是更改`customButton1`控件图像的宏：

```
Dim imgIndex As Long

Public Sub getButtonImage(ByVal control As IRibbonControl, ByRef Image)
Select Case control.ID
  Case "customButton1"
    Set Image = LoadPicture("img" + Trim(Str(imgIndex)) + ".bmp")
    imgIndex = (imgIndex + 1) Mod 2
  End Select
End Sub 
```

我尝试在 .xlsm 中添加 bmp 文件并引用它们来更新关系文件 (.rels)，但我不知道如何从 VBA 中引用它们，最重要的是，当我使用 Excel 打开文件并保存它时，它们被自动删除...

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:39:14.283

如果图像嵌入在 customUI 中，则不需要 VBA 将它们添加到控件中。只需对标签中的图像使用相同的 ID `image`：

```
<button id="button1" label="Test" size="large" image="TestID" onAction="ButtonOnAction" /> 
```

我的示例使用 ID“TestID”处理图像，该图像必须在 customUI XML 中找到 -在[自定义 UI 编辑器](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/07/7293.aspx)`customUI`中展开节点以查找或更改图像 ID（或使用编辑器添加新图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-11T09:41:47.030

[来自UtterAccess.com](http://www.utteraccess.com/forum/custom-images-custom-t1372373.html)的 robcooper 的回答可能会有所帮助：

```
Public Sub getButtonImage(ByVal control As IRibbonControl, ByRef image)
'for use in Access 2007 Ribbon control
'requires a reference to the Micrsoft Office 12.0 Object Library
    Select Case control.ID
    Case "cmdMainMenu"
        Set image = LoadPicture(CurrentProject.Path & "\home.bmp")
    End Select
End Sub 
```

# java - Servlet 不向表发送表单数据

> ID：12686126
> 
> 赞同：0
> 
> 时间：2012-10-02T07:30:29.047
> 
> 标签：java, sql, database

我正在创建一个 java servlet 并尝试创建一个新的“实验室”。但是，它没有提交到数据库。在页面加载时查看控制台打印`JDBC Driver Loaded`，然后在单击提交时`'got connection'`在控制台中打印出来。当我检查数据库时，信息尚未提交

我尝试提交的表格是：

```
lab - id, capacity, day, time, room, subject_id, user_id 
```

这是我的 servlet 的代码：

```
import java.io.IOException;

import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

    /**
     * Servlet implementation class CreateLab
     */
    @WebServlet("/CreateLab")
    public class CreateLab extends HttpServlet {
        private static final long serialVersionUID = 1L;

        /**
         * @see HttpServlet#HttpServlet()
         */
        public CreateLab() {
            super();
            // TODO Auto-generated constructor stub
        }

        private int capacity; 
        private String day = ""; 
        private String time = ""; 
        private String room = ""; 
        private int subject_id;
        private int user_id;

        public void init() {
          try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con =
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("JDBC driver loaded"); 
          } 
          catch (ClassNotFoundException e) {
            System.out.println(e.toString()); 
          } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        } 

        /**Process the HTTP Get request*/ 
        public void doGet(HttpServletRequest request, HttpServletResponse response) throws 
      ServletException,IOException {  
          sendPageHeader(response); 
          sendRegistrationForm(request, response, false); 
          sendPageFooter(response); 
        } 

        /**Process the HTTP Post request*/ 
        public void doPost(HttpServletRequest request, 
          HttpServletResponse response) 
          throws ServletException, IOException {
          sendPageHeader(response); 

          day = request.getParameter("day"); 
          time = request.getParameter("time"); 
          room = request.getParameter("room"); 

          boolean error = false; 
          String message = null; 
          try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got connection"); 
            System.out.println(capacity);
            System.out.println(day);
            System.out.println(time);
            System.out.println(room);
            System.out.println(subject_id);
            System.out.println(user_id);
            Statement s = con.createStatement(); 

            String sql = "SELECT id FROM user" + 
                    " WHERE id='" + user_id + "'";  
            ResultSet rs = s.executeQuery(sql); 
            if (rs.next()) {
              rs.close(); 
               sql = "INSERT INTO lab" + 
                      " (capacity, day, time, room, subject_id, user_id)" + 
                      " VALUES" + 
                      " ('" +  capacity + "'," + 
                         " '"  +  day + "'," + 
                         " '"  +  time + "'," + 
                         " '"  + room + "','" + subject_id +
                         "'," + user_id + "')"; 

              int i = s.executeUpdate(sql); 
              if (i==1) {
                message = "Successfully a new lab class."; 
              } 
            } 
              s.close(); 
              con.close(); 
            } 
            catch (SQLException e) {
              message = "Error." + e.toString(); 
              error = true; 
            } 
            catch (Exception e) {
              message = "Error." + e.toString(); 
              error = true; 
            } 
            if (message!=null) {
              PrintWriter out = response.getWriter(); 
              out.println("<B>" + message + "</B><BR>"); 
              out.println("<HR><BR>"); 
            } 
            if (error==true) 
              sendRegistrationForm(request, response, true); 
            else 
              sendRegistrationForm(request, response, false); 
            sendPageFooter(response); 
          } 

          /** 
           * Send the HTML page header, including the title 
           * and the <BODY> tag 
           */ 
          private void sendPageHeader(HttpServletResponse response) 
            throws ServletException, IOException {
            response.setContentType("text/html"); 
            PrintWriter out = response.getWriter(); 
            out.println("<HTML>"); 
            out.println("<HEAD>"); 
            out.println("<TITLE>Create Lab Page</TITLE>"); 
            out.println("</HEAD>"); 
            out.println("<BODY>"); 
            out.println("<CENTER>"); 
          } 

          /** 
           * Send the HTML page footer, i.e. the </BODY> 
           * and the </HTML> 
           */ 
          private void sendPageFooter(HttpServletResponse response) 
            throws ServletException, IOException {
            PrintWriter out = response.getWriter(); 
            out.println("</CENTER>"); 
            out.println("</BODY>"); 
            out.println("</HTML>"); 
          }   
          /**Send the form where the user can type in 
           * the details for a new user 
           */ 
          private void sendRegistrationForm(HttpServletRequest request, 
            HttpServletResponse response, boolean displayPreviousValues) 
            throws ServletException, IOException {

            PrintWriter out = response.getWriter(); 
            out.println("<BR><H2>Create A Lab</H2>"); 
            out.println("<BR>Please enter the lab details."); 
            out.println("<BR>"); 
            out.println("<BR><FORM METHOD=POST>"); 
            out.println("<TABLE>"); 
            out.println("<TR>"); 
            out.println("<TD>Class Capacity</TD>"); 
            out.print("<TD><INPUT TYPE=TEXT Name=capacity"); 

            if (displayPreviousValues) 
              out.print(" VALUE=\"" + capacity + "\""); 

            out.println("></TD>"); 
            out.println("</TR>"); 
            out.println("<TR>"); 
            out.println("<TD>Day</TD>"); 
            out.print("<TD><INPUT TYPE=TEXT Name=day"); 

            if (displayPreviousValues) 
              out.print(" VALUE=\"" + day + "\""); 

            out.println("></TD>"); 
            out.println("</TR>"); 
            out.println("<TR>"); 
            out.println("<TD>Time</TD>"); 
            out.print("<TD><INPUT TYPE=TEXT Name=time"); 

            if (displayPreviousValues) 
              out.print(" VALUE=\"" + time + "\""); 

            out.println("></TD>"); 
            out.println("</TR>"); 
            out.println("<TR>"); 
            out.println("<TD>Room</TD>"); 
            out.print("<TD><INPUT TYPE=TEXT Name=room");
            if (displayPreviousValues) 
                out.print(" VALUE=\"" + room + "\"");
            out.println("></TD>");
            out.println("</TR>");
            out.println("<TR>");
            out.println("<TD>subject_id</TD>");
            out.print("<TD><INPUT TYPE=TEXT Name=subject_id");
            if (displayPreviousValues) 
                out.print(" VALUE=\"" + subject_id + "\"");
            out.println("></TD>");
            out.println("</TR>");
            out.println("<TR>");
            out.println("<TD>user_id</TD>");
            out.print("<TD><INPUT TYPE=TEXT Name=user_id");
            out.println("></TD>");
            out.println("</TR>");

            if (displayPreviousValues) 
            out.print(" VALUE=\"" + user_id + "\""); 
            out.println("</TD>"); 
            out.println("</TR>");

            out.println("<TR>"); 
            out.println("<TD><INPUT TYPE=RESET></TD>"); 
            out.println("<TD><INPUT TYPE=SUBMIT></TD>"); 
            out.println("</TR>"); 
            out.println("</TABLE>"); 
            out.println("</FORM>"); 
            out.println("<BR>"); 
            out.println("<BR>"); 
          }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:50:47.637

我注意到你从来没有分配你的`subject_id`，除了`0`在声明它时初始化它。看起来您将其作为表单字段，因此您可能想像使用`day`,`time`和一样从请求中提取它`room`。我承认我也不理解实现的逻辑（如果该主题已经存在一个实验室，则只创建一个实验室），但这既不在这里也不在那里。

关于您的代码的几点反馈。

1.  Servlet 不是线程绑定的。servlet 类的一个实例可用于处理对同一 URL 的多个并发请求。因此，您需要考虑线程安全。您的代码绝对**不是**线程安全的，因为您在服务方法中使用实例变量（`capacity`、`day`等`time`）。
2.  如今，在 Java 代码中打印 HTML 并不是真正的做法。至少，您应该始终转发到 JSP 页面来呈现视图。更常见的是使用许多 MVC 或基于组件的 Web 框架之一（Spring、Struts、JSF 等）。
3.  使用有效的 HTML。例如，没有`<input type=int ...>`. 见[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T10:59:56.477

```
import java.io.IOException;

import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class CreateLab
 */
@WebServlet("/CreateLab")
public class CreateLab extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public CreateLab() {
        super();
        // TODO Auto-generated constructor stub
    }

     int capacity; 
     String day = ""; 
     String time = ""; 
     String room = ""; 
     int subject_id;
     int user_id;

    public void init() {
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con =
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("JDBC driver loaded"); 
      } 
      catch (ClassNotFoundException e) {
        System.out.println(e.toString()); 
      } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    } 

    /**Process the HTTP Get request*/ 
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws 
  ServletException,IOException {  
      sendPageHeader(response); 
      sendRegistrationForm(request, response, false); 
      sendPageFooter(response); 
    } 

    /**Process the HTTP Post request*/ 
    public void doPost(HttpServletRequest request, 
      HttpServletResponse response) 
      throws ServletException, IOException {
      sendPageHeader(response); 

      capacity = Integer.parseInt(request.getParameter("capacity")); 
      day = request.getParameter("day"); 
      time = request.getParameter("time"); 
      room = request.getParameter("room"); 
      user_id = Integer.parseInt(request.getParameter("user_id")); 
      subject_id = Integer.parseInt(request.getParameter("subject_id")); 

      boolean error = false; 
      String message = null; 
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con = 
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("got connection"); 
        System.out.println(capacity);
        System.out.println(day);
        System.out.println(time);
        System.out.println(room);
        System.out.println(subject_id);
        System.out.println(user_id);
        Statement s = con.createStatement(); 

        String sql = "SELECT id FROM user" + 
                " WHERE id='" + user_id + "'";  
        ResultSet rs = s.executeQuery(sql); 
        if (rs.next()) {
          rs.close(); 
           sql = "INSERT INTO lab" + 
                  " (capacity, day, time, room, subject_id, user_id)" + 
                  " VALUES" + 
                  " ('" +  capacity + "'," + 
                     " '"  +  day + "'," + 
                     " '"  +  time + "'," + 
                     " '"  + room + "','" + subject_id + "','" + user_id + "')"; 

          System.out.println(sql);
          int i = s.executeUpdate(sql); 
          if (i==1) {
            message = "Successfully a new lab class."; 
          } 
        } 
          s.close(); 
          con.close(); 
        } 
        catch (SQLException e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        catch (Exception e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        if (message!=null) {
          PrintWriter out = response.getWriter(); 
          out.println("<B>" + message + "</B><BR>"); 
          out.println("<HR><BR>"); 
        } 
        if (error==true) 
          sendRegistrationForm(request, response, true); 
        else 
          sendRegistrationForm(request, response, false); 
        sendPageFooter(response); 
      } 

      /** 
       * Send the HTML page header, including the title 
       * and the <BODY> tag 
       */ 
      private void sendPageHeader(HttpServletResponse response) 
        throws ServletException, IOException {
        response.setContentType("text/html"); 
        PrintWriter out = response.getWriter(); 
        out.println("<HTML>"); 
        out.println("<HEAD>"); 
        out.println("<TITLE>Create Lab Page</TITLE>"); 
        out.println("</HEAD>"); 
        out.println("<BODY>"); 
        out.println("<CENTER>"); 
      } 

      /** 
       * Send the HTML page footer, i.e. the </BODY> 
       * and the </HTML> 
       */ 
      private void sendPageFooter(HttpServletResponse response) 
        throws ServletException, IOException {
        PrintWriter out = response.getWriter(); 
        out.println("</CENTER>"); 
        out.println("</BODY>"); 
        out.println("</HTML>"); 
      }   
      /**Send the form where the user can type in 
       * the details for a new user 
       */ 
      private void sendRegistrationForm(HttpServletRequest request, 
        HttpServletResponse response, boolean displayPreviousValues) 
        throws ServletException, IOException {

        PrintWriter out = response.getWriter(); 
        out.println("<BR><H2>Create A Lab</H2>"); 
        out.println("<BR>Please enter the lab details."); 
        out.println("<BR>"); 
        out.println("<BR><FORM METHOD=POST>"); 
        out.println("<TABLE>"); 
        out.println("<TR>"); 
        out.println("<TD>Class Capacity</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=capacity"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + capacity + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Day</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=day"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + day + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Time</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=time"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + time + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Room</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=room");
        if (displayPreviousValues) 
            out.print(" VALUE=\"" + room + "\"");
        out.println("></TD>");
        out.println("</TR>");
        out.println("<TR>");
        out.println("<TD>subject_id</TD>");
        out.print("<TD><INPUT TYPE=TEXT Name=subject_id");
        if (displayPreviousValues) 
            out.print(" VALUE=\"" + subject_id + "\"");
        out.println("></TD>");
        out.println("</TR>");
        out.println("<TR>");
        out.println("<TD>user_id</TD>");
        out.print("<TD><INPUT TYPE=TEXT Name=user_id");
        out.println("></TD>");
        out.println("</TR>");

        if (displayPreviousValues) 
        out.print(" VALUE=\"" + user_id + "\""); 
        out.println("</TD>"); 
        out.println("</TR>");

        out.println("<TR>"); 
        out.println("<TD><INPUT TYPE=RESET></TD>"); 
        out.println("<TD><INPUT TYPE=SUBMIT></TD>"); 
        out.println("</TR>"); 
        out.println("</TABLE>"); 
        out.println("</FORM>"); 
        out.println("<BR>"); 
        out.println("<BR>"); 
      }
      } 
```

# c++ - 构建错误：基本说明符必须命名一个类

> ID：12686127
> 
> 赞同：1
> 
> 时间：2012-10-02T07:30:29.700
> 
> 标签：c++, macos, build, makefile, cmake

我正在尝试在 Mac OS X 中构建一个大型项目，`cmake`但遇到了以下我无法解决的错误。

```
Archive.hpp:92:30: error: base specifier must name a class
    struct Derived : T, Fallback { }; 
```

代码：

```
template<typename T>
class has_save_func
{
    struct Fallback { int save; }; // add member name "X"
    struct Derived : T, Fallback { };
    ... 
```

此外，我有以下内容：

```
Archive.hpp:137:13: error: type 'unsigned long' cannot be used prior to '::' 
```

代码：

```
template <class A>
static bool save(const A& data, class OutputArchive& oarchive, const std::string& id, typename boost::enable_if_c<has_save_func<A>::value, A>::type* def=NULL){
    // todo check if A actually is friend with Access class, else return false
    A::save(data, oarchive); // ! Error on this line !
    return true;
}

template <class A>
static bool save(const A& data, class OutputArchive& oarchive, const std::string& id, typename boost::disable_if_c<has_save_func<A>::value, A>::type* def=NULL){
    // todo check if A actually is friend with Access class, else return false
    return serialization::save<A>( data, oarchive, id);
} 
```

代码调用（OutputArchive.hpp）：

```
template<class T>
void write(const T& data, const std::string& id){
    // the data method must have an implementation of load/save and if not then we try the generic write
    // method which could provide a solution by the implementation itself
    writeEnterScope(id);
    try {
        Archive::Access::save<T>(data, *this, id);
    } catch (...){
        // we fall back to this call
        boost::any adata(data);
        write(adata, id);
    }
    writeLeaveScope(id);
} 
```

代码 serializeutil.cpp

```
void save(const rw::math::Q& tmp, OutputArchive& oar, const std::string& id){
    oar.write(tmp.size(), "size");
    for(int i=0;i<tmp.size();i++){
        oar.write(tmp[i],"q");
    }
} 
```

我使用的编译器可能有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:03:10.843

这两个错误都指向相同：您正在尝试将模板与非类一起使用，很可能是`unsigned int`. 在第一种情况下，您将尝试`Derived`继承 from `unsigned int`，这是非法的；在第二种情况下，您将尝试在 上调用静态方法 ( `save()`) `unsigned int`，这又是非法的。查看调用模板的代码将澄清问题。

更新：从添加到问题的信息中，我们现在可以得出结论，情况确实如此。`tmp.size()`, 很可能是一个`unsigned int`, 所以你`oar.write()`用一个`unsigned int`; 反过来， this`save()`用 an调用`unsigned int`，因此它尝试调用`unsigned int::save()`非法的 ，并实例化 class `has_save_func<unsigned int>`，它试图`struct Derived : unsigned int, Fallback`再次定义哪个是非法的。

如果您希望它们使用内置类型（例如`unsigned int`. 您可能会进行完全重新设计或只是重载函数`write()`或`save()`，这取决于您有什么可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:02:26.063

我认为我可能对提到的代码段负责。但是有些东西不见了，而且很多人已经注意到了这一点。OutputArchive 上的重载写入函数目前看起来像这样：

```
virtual void writeEnterScope(const std::string& id) = 0;
virtual void writeLeaveScope(const std::string& id) = 0;
virtual void writeEnterArray(const std::string& id) = 0;
virtual void writeLeaveArray(const std::string& id) = 0;

// writing primitives to archive
virtual void write(bool val, const std::string& id) = 0;

virtual void write(int val, const std::string& id) = 0;
virtual void write(unsigned int val, const std::string& id){ write((int)val,id); }

virtual void write(boost::uint64_t val, const std::string& id) = 0;
virtual void write(double val, const std::string& id) = 0;
virtual void write(const std::string&  val, const std::string& id) = 0; 
```

该软件的序列化部分本不应该被使用，但它最终还是出现在了构建系统中。如果您在 src/rwlibs 中注释掉 CMakeLists.txt 中的序列化目录，那么它应该可以工作。或者为 unsigned long 添加一个写入函数：

```
virtual void write(unsigned long val, const std::string& id){}; 
```

是的，在冒险创建另一个序列化框架之前，我确实研究了 Boost.Serialization。然而，我试图创建一些不那么侵入性、更少模板化和更用户友好的东西......我猜我失败了......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:50:07.917

First, it would be better to use existing solution like [Boost.Serialization](http://www.boost.org/libs/serialization/). It's already debugged and works in all the cases you may need.

However, you should still know where your current code has problems and how to do template machinery like this. So:

> ```
> oar.write(tmp.size(), "size");
>           ^^^^^^^^^^ 
> ```

This is `unsigned int`. And you do need to serialize it. So you need a write, that can accept primitive types. There are two options:

1.  Write non-template overloads for primitive types. Non-template overloads have priority over template ones, so if you write explicit non-template overload with `unsigned int` first argument, the template won't be instantiated and there won't be any error. You will however need overloads for each possible primitive type separately, because template that matches exactly will be still preferred over non-template overload that requires conversion.

2.  Use free save function instead of method. Advantage of method is that it can be virtual, but you don't usually need that with template. Advantages of free function are that they can be defined for non-class types and that they can be defined for already existing classes, both of which you often do need in templates. So you would change all instances of the `save` method to free function, drop the `has_save_func` altogether and overload the `save` function for primitive types you need.

3.  Amend the `has_save_func` with check whether the template argument is a class type. Non-class types don't have methods, so that's what the other variant will do. You can either use the [boost::is_class](http://www.boost.org/libs/type_traits/doc/html/boost_typetraits/reference/is_class.html) or implement something similar. Boost actually implements it by enumerating all the other options, but it can also be implemented using pointer-to-member, which will cause SFINAE when given non-class type. Unfortunately you don't have anything to cause SFINAE when given class type, so you have to combine with function templates and sizeof and end up with really tricky stuff (I'm sure I've seen it, but really don't remember it).

# ruby-on-rails - Devise for Rails 中的唯一用户名

> ID：12686131
> 
> 赞同：8
> 
> 时间：2012-10-02T07:30:41.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

[除了使用电子邮件](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)进行登录外，我还按照Devise 的说明使用用户名。效果很好，除了人们可以使用重复的用户名注册。如果有人尝试使用重复的电子邮件地址注册，他们会在注册页面上看到以下错误消息：

> 1 个错误禁止保存此用户：
> 
> ```
> Email has already been taken 
> ```

我想要用户名非常相似的东西。我该如何实施？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T07:36:04.457

您应该使用唯一性验证器。将以下内容添加到 user.rb 中：

```
validates_uniqueness_of :username 
```

[有关此验证器的更多信息](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-27T03:14:46.853

请注意，您可能希望使用户名唯一，*但也不区分大小写*，因此您最终不会同时使用用户名和用户名：

```
class User < ApplicationRecord
  validates :username, presence: true, uniqueness: { case_sensitive: false }
  # Rest of user model
end 
```

来自[设计维基](https://github.com/heartcombo/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address)。

# iphone - 将布尔属性保存到 iOS 中的文件。

> ID：12686137
> 
> 赞同：3
> 
> 时间：2012-10-02T07:31:12.507
> 
> 标签：iphone, objective-c, ios, xcode, nsuserdefaults

我想将 bool 属性保存到我的文件中，我认为这样做是野蛮的。我必须检查我的属性，然后将字符串添加到 NSMutableArray。我可以检查一下属性名称、状态/值然后保存到文件吗？或者也许我应该为此使用 XML 文件？但仍然为了有效使用，我应该获取属性名称和状态/值。

你能给我一些建议吗？

```
-(void) saveSettings
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"settings" ofType:@""];

    if (music)
    {
        [correctSettingArray removeObjectAtIndex:0];
        [correctSettingArray addObject:@"music = 1"];
    }
    else
    {
        [correctSettingArray removeObjectAtIndex:0];
        [correctSettingArray addObject:@"music = 0"];
    }

    if (sfx)
    {
        [correctSettingArray removeObjectAtIndex:1];
        [correctSettingArray addObject:@"sfx = 1"];
    }
    else
    {
        [correctSettingArray removeObjectAtIndex:0];
        [correctSettingArray addObject:@"sfx = 0"];
    }

    if (vibration)
    {
        [correctSettingArray removeObjectAtIndex:0];
        [correctSettingArray addObject:@"vibration = 1"];
    }
    else
    {
        [correctSettingArray removeObjectAtIndex:0];
        [correctSettingArray addObject:@"vibration = 0"];
    }

[correctSettingArray writeToFile:path atomically:true];

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T07:36:26.283

如果您想保存这样的简单应用程序设置，请使用[`NSUserDefaults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

```
[[NSUserDefaults standardUserDefaults] setBool:vibrationBool forKey:@"vibrationKey"]; 
```

那么当你想读它的时候

```
BOOL vibrationBool = [[NSUserDefaults standardUserDefaults] boolForKey:@"vibrationKey"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:12:53.157

对于您所要求的 - 保存用户设置 - 您应该按照*wattson12*`NSUserDefaults`的回答中所述使用。

 *如果您确实需要**将布尔属性保存到 file**，假设您正在使用 Objective-C 对象，最简单的方法是使用*归档*`NSCoding`并通过实现协议来序列化您的数据结构。请参阅 Apple 的[Archives and Serializations Programming Guide](http://developer.apple.com/documentation/Cocoa/Conceptual/Archiving/)。

该`NSCoding`协议有两个部分：`initWithCoder`基本上是您对象的另一个构造函数：

```
- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super init];
    if (self) {
        if ([decoder containsValueForKey:@"sunNeverSet"])
            self.sunNeverSet = [NSNumber numberWithBool:
              [decoder decodeBoolForKey:@"sunNeverSet"]];
    }
    return self;
} 
```

是`encodeWithCoder`序列化：

```
- (void)encodeWithCoder:(NSCoder *)coder
{
    if (sunNeverRise) [coder encodeBool:[sunNeverRise boolValue] 
                                 forKey:@"sunNeverRise"];
} 
```

然后，您将使用 将您的对象图编码为与平台无关的字节流（即。`NSData`）`NSKeyedArchiver`并将数据写入文件。

```
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] 
                              initForWritingWithMutableData:data];

[archiver encodeRootObject:myObjectImplementingNSCoding];
[archiver finishEncoding];
[data writeToFile:path atomically:YES]; 
```

要读回它，您将使用解码数据`NSKeyedUnarchiver`并取回您的对象图。

```
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] 
                                  initForReadingWithData:data];
id myObjectImplementingNSCoding = [[unarchiver decodeObject] retain];
[unarchiver finishDecoding]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:41:00.157

我认为你可以使用这个保存为 NSNumber ......

```
[NSNumber numberWithBool:BOOLATR] 
```

并检索价值……

```
BOOLATR = [[correctSettingArray objectAtIndex:X] boolValue] 
```

在任何情况下，您都可能更喜欢使用 NSMutableDictionary 进行变量匹配而不是数组。

```
[dictionary setValue:[NSNumber numberWithBool:BOOLATR] forKey:@"BOOLATR"]; 
```

&

```
BOOLATR = [[dictionary valueForKey:@"BOOLATR"] boolValue] 
```*

# sql-server - SQL Server 2008 R2 中的窗口函数问题

> ID：12686140
> 
> 赞同：3
> 
> 时间：2012-10-02T07:31:31.460
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, over-clause

我在以下 SQL 脚本中收到执行错误：

```
SELECT TOP 1 PERCENT
    a.accode, a.voucherdate, a.credit, a.Debit,
    SUM(a.Debit) OVER (ORDER BY [a.accode],[a.voucherdate]) AS rdr 
FROM
    VoucherMain AS a 
ORDER BY 
    a.accode, a.voucherdate 
```

错误信息

> 'order' 附近的语法不正确

谁能告诉我我的语法有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T07:35:19.477

问题是您需要 SQL Server 2012 及更高版本。好的，我为未来的访问者添加了“及以上”，但将[2008 OVER CLAUSE](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.105%29.aspx)与[2012 OVER CLAUSE](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.110%29.aspx)进行比较。

2008 版有以下重要说明：

> 在排名窗口函数的上下文中使用时，`<ORDER BY Clause>`只能引用由 FROM 子句提供的列。不能指定整数来表示选择列表中列的名称或别名的位置。**`<ORDER BY Clause>`不能与聚合窗口函数一起使用。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T07:35:53.843

在 SQL Server 2008 中，您只能使用[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.105%29.aspx)对聚合函数进行*分区*，而不能应用顺序：

> 排名窗口函数 < OVER_CLAUSE > :: = OVER ([ PARTITION BY value_expression , ... [ n ] ] < ORDER BY_Clause> )
> 
> 聚合窗口函数 <OVER_CLAUSE > :: = OVER ([ PARTITION BY value_expression , ... [n] ])

请注意，`<ORDER BY Clause>`聚合没有。

# xcode - Interface Builder 的颜色选择器中的颜色错误

> ID：12686141
> 
> 赞同：24
> 
> 时间：2012-10-02T07:31:32.893
> 
> 标签：xcode, interface-builder, uicolor, color-picker

我有一个带有棕色图像的 UIImageView，它不会总是到达顶部。UIImage 视图位于白色 UIView 内。

所以，因为图像的顶部是线性的棕色，我说我会让它下面的 UIView 变成同样的棕色，用户不会看到图像在哪里结束。到现在为止还挺好。

我的问题是，当我选择图像顶部的颜色时，颜色选择器会选择比实际颜色更深的颜色:(

在我单击颜色选择器之前： ![在此处输入图像描述](../Images/db9e216da642b87233b83a318f3d5615.png)

单击颜色选择器后： ![在此处输入图像描述](../Images/650ce770f547dfc1068a3c22ba19a801.png)

怎么会 ？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-12-03T23:45:27.727

只是想用一些截图详细说明接受的答案。

如果您想在 Photoshop 和 Xcode 之间**精确**匹配 RGB 值（无需在颜色空间之间进行转换），那么您需要将图像保存为通用 RGB 并使用通用 RGB 颜色空间输入任何滴管值。

*   当您从 Photoshop 中选择“保存为 Web 和设备”时，取消选中“转换为 sRGB”框。

![在此处输入图像描述](../Images/2b7547ea4236c2d03f2e71b19e0bfad1.png)

*   在 Xcode 中，单击颜色选择器中的颜色空间弹出窗口并选择“通用 RGB”，然后从 Photoshop 输入红色、绿色和蓝色值，而**不是十六进制值**，因为这会由于某种原因恢复为 sRGB 颜色空间（注意不要选项卡到十六进制字段，因为这也会将色彩空间更改为 sRGB）。

![在此处输入图像描述](../Images/638140683141b235e8564f25a7227f0d.png)

更多信息[在这里](https://stackoverflow.com/a/14581553/539149)，包括如何匹配屏幕截图。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-02T11:09:10.660

我设法在这个答案中找到了解决方案/解释（尽管我仍然很困惑）：[https ://stackoverflow.com/a/9203647/460750](https://stackoverflow.com/a/9203647/460750)

基本上，我为解决我的问题所做的就是从 RGB“类型”中选择（颜色选择器下的那个小方块）`Apple RGB`选项，然后手动输入 R、G 和 B 值，而不是使用选择器。

奇怪的...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T19:16:08.367

这是因为组件编号没有指定颜色。我们还需要知道 xCode 使用的颜色空间。RGB 滑块左侧的下拉菜单中提供了编码或解码的色彩空间。

![在此处输入图像描述](../Images/26b684cecf7f994a81f3e828c7f8166e.png)

默认情况下，xCode 选择“通用 RGB”，这就是 UIColor 使用来自 RGB 的规范颜色。如果我们使用放大镜，它将更改为“设备 RGB”空间，这取决于您当前的屏幕。因此，如果您使用放大镜，“sRGB”或“Adobe RGB”会更好或更接近您想要的选择一种颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T09:29:47.880

我认为通用 RGB 也可以。诀窍是您需要在下拉列表中更改 RGB 模式后手动输入 RGB 的数量

奇怪...（太）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T10:10:01.447

**更新 10.10.4**

我也遇到了这个问题，我向 Apple 报告了它，它似乎已经在 10.10.4 上得到了解决（它与颜色选择器本身有关，与 Xcode/IB 无关）

其他人可以确认吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T09:28:43.153

这是一个老问题，但对我来说添加一些信息很重要。多年来，唯一对我有效的方法是不使用 PS 的拾色器，而是使用 macOS 的内置“数字色度计” **。**

[![在此处输入图像描述](../Images/2f21ae29793a94757ca3a83494e08100.png)](https://i.stack.imgur.com/Kcsjr.png)

它与 macOS 的每个安装捆绑在一起，并且从那里发出的带有“通用 RGB”的 RGB 值总是在 Xcode 故事板中重现正确的颜色。

[![在此处输入图像描述](../Images/b2f875e22ab45ff63e1f0049485775cd.png)](https://i.stack.imgur.com/nAnuo.png)

# mysql - 如何在mysql中显示数据，如excel中的pivot

> ID：12686145
> 
> 赞同：2
> 
> 时间：2012-10-02T07:31:47.053
> 
> 标签：mysql, sql, pivot

我有这样的查询：

```
SELECT DATE,REGION,COUNT(*)
FROM ALL_ID_DATA
WHERE DATE in (SUBDATE(CURDATE(),1),SUBDATE(CURDATE(),2),SUBDATE(CURDATE(),8))
AND DIRECTION='inbound'
AND REASON_1 = 'complaint'
GROUP BY REGION,DATE DESC 
```

结果是 ![捕获](../Images/289d4c748701d362b9b166b4d6b94c30.png) 什么是正确的查询显示如下捕获

![结果](../Images/270c970c270294d8e29bff69bdf537be.png) 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:02:05.007

这种类型的查询称为`PIVOT`. 不幸的是，MySQL 没有`PIVOT`函数，因此您需要使用`CASE`语句和聚合函数来复制该函数。

如果您知道要转换的列数，则可以对这些值进行硬编码：

```
select region,
  SUM(CASE WHEN date = '2012-09-24' THEN 1 END) as `2012-09-24`,
  SUM(CASE WHEN date = '2012-09-30' THEN 1 END) as `2012-09-30`,
  SUM(CASE WHEN date = '2012-10-01' THEN 1 END) as `2012-10-01`
from ALL_ID_DATA
group by region;

select region,
  COUNT(CASE WHEN date = '2012-09-24' THEN 1 ELSE null END) as `2012-09-24`,
  COUNT(CASE WHEN date = '2012-09-30' THEN 1 ELSE null END) as `2012-09-30`,
  COUNT(CASE WHEN date = '2012-10-01' THEN 1 ELSE null END) as `2012-10-01`
from ALL_ID_DATA
group by region; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/8d705/2)。

然后将此添加到您现有的查询中，它将是：

```
SELECT REGION,
  SUM(CASE WHEN date = '2012-09-24' THEN 1 END) as `2012-09-24`,
  SUM(CASE WHEN date = '2012-09-30' THEN 1 END) as `2012-09-30`,
  SUM(CASE WHEN date = '2012-10-01' THEN 1 END) as `2012-10-01`
FROM ALL_ID_DATA
WHERE DATE in (SUBDATE(CURDATE(),1),SUBDATE(CURDATE(),2),SUBDATE(CURDATE(),8))
  AND DIRECTION='inbound'
  AND REASON_1 = 'complaint'
GROUP BY REGION 
```

或者

```
SELECT REGION,
  COUNT(CASE WHEN date = '2012-09-24' THEN 1 ELSE null END) as `2012-09-24`,
  COUNT(CASE WHEN date = '2012-09-30' THEN 1 ELSE null END) as `2012-09-30`,
  COUNT(CASE WHEN date = '2012-10-01' THEN 1 ELSE null END) as `2012-10-01`
FROM ALL_ID_DATA
WHERE DATE in (SUBDATE(CURDATE(),1),SUBDATE(CURDATE(),2),SUBDATE(CURDATE(),8))
  AND DIRECTION='inbound'
  AND REASON_1 = 'complaint'
GROUP BY REGION 
```

现在，如果您有未知数量的日期要转换为列，那么您可以使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)，您的查询将与此类似（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/8d705/9)）：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when date = ''',
      date,
      ''' then 1 else 0 end) AS ''',
      Date(date), ''''
    )
  ) INTO @sql
FROM ALL_ID_DATA;

select @sql;

SET @sql = CONCAT('SELECT region, ', @sql, ' 
                   FROM ALL_ID_DATA
                   GROUP BY region');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

然后将原始查询放在准备好的语句中，最终查询将是：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when date = ''',
      date,
      ''' then 1 else 0 end) AS ''',
      Date(date), ''''
    )
  ) INTO @sql
FROM ALL_ID_DATA;

select @sql;

SET @sql = CONCAT('SELECT region, ', @sql, ' 
                   FROM ALL_ID_DATA
                   WHERE DATE in (SUBDATE(CURDATE(),1),SUBDATE(CURDATE(),2),SUBDATE(CURDATE(),8))
                   AND DIRECTION=''inbound''
                   AND REASON_1 = ''complaint''');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:34:07.317

我想你正在寻找这个： [http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

# red5 - 使用 XUGGLER 写入 RTMP 流

> ID：12686146
> 
> 赞同：1
> 
> 时间：2012-10-02T07:32:09.977
> 
> 标签：red5, rtmp, xuggler

我正在做一个项目，我想将数据包写入 RTMP 容器。

*   我所取得的成就是：

    1.  使用 RED5 启动一个监听 RTMP 请求的应用程序。让我们说 rtmp://localhost/myapp
    2.  我可以使用 IContainerFormat 的输出格式打开 IContainer，例如 ("flv", "rtmp://localhost/myapp/test", null)
*   出了什么问题：

    1.  我想将数据包写入这个为我打开的 RTMP 通道。
        *   问题是 FFMPEG 开始给出错误 32。与此错误相关的一些搜索表明，这通常是因为客户端 - 服务器数据消耗之间存在滞后。但我真的无法解决这个问题。我搜索了很多，但每个人都在为同样的问题哭泣。我得到的错误是：

> 12:57:20.242 [Thread-0] 错误 org.ffmpeg - WriteN，RTMP 发送错误 32（129 字节） 12:57:20.246 [Thread-0] 错误 org.ffmpeg - WriteN，RTMP 发送错误 32（45 字节） 12:57:20.246 [Thread-0] 错误 org.ffmpeg - WriteN，RTMP 发送错误 9（42 字节）

这是我在 Red5 服务器上收到的错误

```
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Provider connect
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Stream start
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Provider connect
[ERROR] [NioProcessor-1] org.red5.server.net.rtmp.codec.RTMPProtocolDecoder - Error decoding buffer
org.red5.server.net.protocol.ProtocolException: Error during decoding
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decode(RTMPProtocolDecoder.java:203) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decodeBuffer(RTMPProtocolDecoder.java:122) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPMinaProtocolDecoder.decode(RTMPMinaProtocolDecoder.java:61) [red5.jar:na]
    at org.apache.mina.filter.codec.ProtocolCodecFilter.messageReceived(ProtocolCodecFilter.java:225) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:46) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:793) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.IoFilterAdapter.messageReceived(IoFilterAdapter.java:119) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.fireMessageReceived(DefaultIoFilterChain.java:426) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoProcessor.read(AbstractPollingIoProcessor.java:638) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:598) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:587) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoProcessor.access$400(AbstractPollingIoProcessor.java:61) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.run(AbstractPollingIoProcessor.java:969) [mina-core-2.0.0-RC1.jar:na]
    at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64) [mina-core-2.0.0-RC1.jar:na]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.7.0_07]
    at java.lang.Thread.run(Unknown Source) [na:1.7.0_07]
Caused by: java.lang.IllegalArgumentException: null
    at java.nio.Buffer.limit(Unknown Source) [na:1.7.0_07]
    at org.red5.io.amf.Input.bufferToString(Input.java:275) [red5.jar:na]
    at org.red5.io.amf.Input.getString(Input.java:258) [red5.jar:na]
    at org.red5.io.amf.Input.readPropertyName(Input.java:565) [red5.jar:na]
    at org.red5.io.amf.Input.readKeyValues(Input.java:351) [red5.jar:na]
    at org.red5.io.amf.Input.readSimpleObject(Input.java:501) [red5.jar:na]
    at org.red5.io.amf.Input.readObject(Input.java:537) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decodeStreamMetadata(RTMPProtocolDecoder.java:978) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decodeMessage(RTMPProtocolDecoder.java:564) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decodePacket(RTMPProtocolDecoder.java:385) [red5.jar:na]
    at org.red5.server.net.rtmp.codec.RTMPProtocolDecoder.decode(RTMPProtocolDecoder.java:190) [red5.jar:na]
    ... 18 common frames omitted
[WARN] [NioProcessor-1] org.red5.server.net.rtmp.codec.RTMPProtocolDecoder - Closing connection because decoding failed: RTMPMinaConnection from 127.0.0.1 : 44814 to localhost (in: 3569 out 3521 )
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Close
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Provider disconnect
[INFO] [NioProcessor-1] org.red5.server.stream.ClientBroadcastStream - Provider disconnect
[INFO] [NioProcessor-1] org.red5.server.net.rtmp.RTMPHandler - Connecting to: [Scope@5f524524 Depth = 2, Path = '/default/myapp', Name = 'test']
[INFO] [NioProcessor-1] org.red5.server.net.rtmp.RTMPHandler - Remembering client buffer on stream: 300
[ERROR] [NioProcessor-1] org.red5.server.service.ServiceInvoker - Method FCSubscribe with parameters [teststream] not found in org.red5.core.Application@b9e19da
[WARN] [NioProcessor-1] org.red5.server.stream.PlayEngine - Subscribe to teststream provider failed 
```

我是媒体流的新手，所以不确定我是否遗漏了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:09:24.680

我不认为调试 RTMPProtocolDecoder 的 Java 源代码有不同的机会。

但是不知道你用的是什么Red5版本。

RTMPProtocolDecoder.java:203 => 在最新版本的 Red5/Sources 中，您的异常位于第 147 行： [http ://code.google.com/p/red5/source/browse/java/server/trunk/src/org/ red5/server/net/rtmp/codec/RTMPProtocolDecoder.java#147](http://code.google.com/p/red5/source/browse/java/server/trunk/src/org/red5/server/net/rtmp/codec/RTMPProtocolDecoder.java#147)

并且还添加了一些评论。我想你需要做的第一件事就是更新到最新的red5。基于此，您可以调试并寻求更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:14:08.950

只是为了完成答案。不要依赖 Red5 eclipse 插件，它会生成与 Red 5 1.0RC2 不兼容的代码。Red5 1.0 RC 2 与 red5-web.xml 中的配置更改一起正常工作。该应用程序开始工作，我可以使用 xuggler 在容器上启动一个流。

谢谢@seba.wagner。

# sql-server - 具有多于一个非枢轴列的 T-SQL 枢轴

> ID：12686149
> 
> 赞同：2
> 
> 时间：2012-10-02T07:32:10.937
> 
> 标签：sql-server, sql-server-2008, tsql, pivot

我有几列并制作支点。我想有多个非枢轴列并使用最后一个进行枢轴。[在此处](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)的原始规范中，显示您只能拥有一个非枢轴列。

```
SELECT <non-pivoted column>,

    [first pivoted column] AS <column name>,

    [second pivoted column] AS <column name>,

    ...

    [last pivoted column] AS <column name>

FROM

    (<SELECT query that produces the data>)

    AS <alias for the source query>

PIVOT

(

    <aggregation function>(<column being aggregated>)

FOR

[<column that contains the values that will become column headers>]

    IN ( [first pivoted column], [second pivoted column],

    ... [last pivoted column])

) AS <alias for the pivot table>

<optional ORDER BY clause>; 
```

有没有办法拥有更多的非透视列，因为它使用第一列之后的所有列来旋转我的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:03:44.823

是的。只需添加它们。

例如

```
declare @t table (a int, b int, c int, d int)
insert @t values (1,2,3,4)
insert @t values (7,6,5,3)

select a,b, [3],[4] from @t s
pivot 
(sum(c) for d in ([3],[4])) p 
```

# wordpress - bbPress 的评分系统

> ID：12686151
> 
> 赞同：0
> 
> 时间：2012-10-02T07:32:13.653
> 
> 标签：wordpress, bbpress

我正在寻找 bbPress 的评级/投票系统。评价高的评论或主题应该显示得更高。
如果这不可能，在 Wordpress 或 Rails 中是否有支持此类内容的论坛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T23:20:35.117

在这里检查一下，你可以找到[引用、评分和未读帖子的插件](http://bbpress.org/forums/topic/introducing-plugins-for-quotes-ratings-and-unread-posts/)

# windows - 命令提示符脚本命令“cd”

> ID：12686158
> 
> 赞同：0
> 
> 时间：2012-10-02T07:32:50.757
> 
> 标签：windows, windows-7, cmd

好的，所以我正在制作我自己的小命令提示符供我自己使用，并且在过去的 2 个小时里我一直在努力让它工作。这是我所做的：

```
@echo off
set /p labnum="Enter Lab Numnber:"
set labdir=C:\Users\BLAHBLAHBLAH\Dir\Lab-
set labdir2="%labdir%%labnum%"
cd labdir2
:cmd
set /p cmd=">"
%cmd%
cls
goto cmd 
```

我基本上希望能够在每次“会话”之前更改路径但是每次执行 cd labdir2 命令时，我的计算机都会抱怨“系统找不到指定的路径”。而且我肯定知道该目录存在！我直接从 Windows 资源管理器粘贴了文本。任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:34:53.147

错误在这里：

```
cd labdir2 
```

更改为名为 的目录`labdir2`，但您想更改为由变量内容指示的目录：

```
cd %labdir2% 
```

为了确保您可以处理特殊字符，我会用双引号将其括起来：

```
cd "%labdir2%" 
```

您甚至可能希望在`cd`命令中包含 /d 开关，以确保您还更改了当前驱动器。所以最终版本应该是：

```
cd /d "%labdir2%" 
```

# python - 当 Ctrl+C 在 python 中被捕获时清理代码

> ID：12686160
> 
> 赞同：0
> 
> 时间：2012-10-02T07:32:55.997
> 
> 标签：python, multithreading, concurrency

通过注册信号处理程序，我可以将清理代码放入 signal_handler

```
signal.signal(signal.SIGINT, signal_handler) 
```

但问题是当用户多次按下 ctrl+c 时，信号处理程序运行多次并且清理工作变得疯狂。

**我的问题是，如何确保清理处理程序仅在退出之前运行一次。**

这是我使用锁的试验，但发生了死锁

```
def cleanup_handler():
    lock.acquire()
    if not done:
        try:
            cleanup()
            done = True
        finally:
            print "release lock"
            lock.release() 
```

问题是 finally 块永远不会运行（也就是说我看不到正在打印“释放锁”）。

**备注**
做了一个小实验后，似乎不是同时运行信号器处理程序。当收到新的 Ctrl+C 时，旧的处理程序被杀死并运行一个新的处理程序。我对么？如果是，问题会变得更加复杂，因为我不希望我的处理程序在....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:45:13.097

您可以使用装饰器来防止您的函数多次运行：

```
from functools import wraps

def run_once(function):
    @wraps(function)
    def wrapper(*args):
        if not wrapper.has_run:
            wrapper.has_run = True

            return function()

    wrapper.has_run = False

    return wrapper 
```

像这样：

```
@run_once
def signal_handler():
    print 'Exit' 
```

# ruby-on-rails - Heroku上的Rails + Paperclip + S3上传错误

> ID：12686161
> 
> 赞同：2
> 
> 时间：2012-10-02T07:33:03.110
> 
> 标签：ruby-on-rails, heroku, amazon-s3, paperclip

我正在尝试构建一个用户可以上传个人资料图片的应用程序。我正在尝试使用回形针和 S3。

我已经让它在我的本地机器上运行，但由于某种原因它在 Heroku 上不起作用。具体来说，没有任何内容上传到 S3，但来自 Paperclip 或 S3 的 Heroku 日志中也没有产生错误。这是我在日志中看到的内容：

```
2012-10-02T07:22:33+00:00 app[web.1]: [paperclip] Saving attachments.
2012-10-02T07:22:33+00:00 app[web.1]: [paperclip] saving profile_pictures/2/original.jpg
2012-10-02T07:22:33+00:00 app[web.1]: [paperclip] saving profile_pictures/2/thumb.jpg
2012-10-02T07:22:33+00:00 app[web.1]: [paperclip] saving profile_pictures/2/medium.jpg
2012-10-02T07:22:33+00:00 app[web.1]: [paperclip] saving profile_pictures/2/large.jpg 
```

这是我的 s3.yml 文件的样子：

```
development:  
  access_key_id: XXXXXXX
  secret_access_key: XXXXXXX
  bucket: dev-bucket

test:
  access_key_id: XXXXXXX
  secret_access_key: XXXXXXX
  bucket: test-bucket

production:
  access_key_id: XXXXXXX
  secret_access_key: XXXXXXX
  bucket: prod-bucket 
```

任何人都知道为什么这适用于我的开发机器但不适用于 Heroku？我对没有错误感到困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T21:37:35.470

您是否使用 Heroku Toolbelt 设置了环境变量？

```
$ heroku config:set AWS_BUCKET=**BUCKET NAME**
$ heroku config:set AWS_ACCESS_KEY_ID=***GET FROM AMAZON AWS***
$ heroku config:set AWS_SECRET_ACCESS_KEY=***GET FROM AMAZON AWS*** 
```

为此，您必须设置：

```
config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
    :bucket => ENV['AWS_BUCKET'],
    :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
  }
} 
```

# android - 将图像保存到文件时为浅绿色背景

> ID：12686162
> 
> 赞同：0
> 
> 时间：2012-10-02T07:33:12.340
> 
> 标签：android, image, file

我正在为从网上下载的 PNG 实现图像缓存。

到目前为止效果很好，除了在具有白色背景的图像上，当从缓存（外部存储）读取它们时，获得浅绿色背景。

从网络下载图像时，它们会正确显示。但是在从外部存储保存和加载后，它们会显示为浅绿色背景。

在 3 台设备上测试，问题出在其中 2 台，三星 Galaxy 和 HTC 的愿望。第三个，Galaxy Nexus，没有这个问题。

代码的相关部分：

保存到文件：

```
FileOutputStream outputStream = new FileOutputStream(fileUri);
image.compress(Bitmap.CompressFormat.PNG, 100, outputStream);
outputStream.flush();
outputStream.close(); 
```

读取文件：

```
File file = new File(fullCacheDir.toString(), fileName); 
```

从网上下载：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet request = new HttpGet(urlString);
HttpResponse response = httpClient.execute(request);
InputStream is = response.getEntity().getContent();

TypedValue typedValue = new TypedValue();
typedValue.density = TypedValue.DENSITY_DEFAULT;
Drawable drawable = Drawable.createFromResourceStream(null, typedValue, is, "src"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:31:16.210

我相信问题在于在显示之前将图像从 RGB888 自动转换为 16 位 RGB565 格式。这是一篇关于如何处理这个问题的好文章：[Bitmap Format Woes](http://android.nakatome.net/2010/04/bitmap-basics.html)。

# python - Django/tasty-pie 的 Python 请求和 404 错误

> ID：12686163
> 
> 赞同：0
> 
> 时间：2012-10-02T07:33:24.783
> 
> 标签：python, tastypie, python-requests

我有一个 Django 应用程序，它使用美味派提供 RESTful API。

我正在使用 Django 的开发`runserver`进行测试。

当我通过浏览器访问它时，它可以正常工作，并且使用 Curl 也可以正常工作：

```
curl "http://localhost:8000/api/v1/host/?name__regex=&amp;format=json" 
```

在带有 runserver 的控制台上，我看到：

```
[02/Oct/2012 17:24:20] "GET /api/v1/host/?name__regex=&amp;format=json HTTP/1.1" 200 2845 
```

但是，当我尝试使用 Python 请求模块（[http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)）时，我得到一个 404 作为输出：

```
>>> r = requests.get('http://localhost:8000/api/v1/host/?name__regex=&format=json')
>>> r
<Response [404]> 
```

或者：

```
>>> r = requests.get('http://localhost:8000/api/v1/host/?name__regex=&amp;format=json')
>>> r
<Response [404]> 
```

此外，在 Django runserver 控制台上，我看到：

```
[02/Oct/2012 17:25:01] "GET http://localhost:8000/api/v1/host/?name__regex=&format=json HTTP/1.1" 404 161072 
```

出于某种原因，当我使用请求时，它会打印出整个请求 URL，包括 localhost - 但在我使用浏览器或 curl 时不会。

我假设这与它发送的编码、用户代理或请求类型有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:16:06.760

I'm not very familiar with Requests, but I think your encoding idea might be sound. That is Requests might process the URL somehow? Perhaps instead of passing everything in the URL directly, try doing what [Requests docs](http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls) suggest:

```
request_params = { 'name_regex' : '', 'format' : 'json' }
r = requests.get( 'http://localhost:8000/api/v1/host/', params = request_params ) 
```

# android - Android：将所有活动的公共代码转移到基类..应用程序崩溃

> ID：12686164
> 
> 赞同：1
> 
> 时间：2012-10-02T07:33:28.457
> 
> 标签：android, inheritance, base-class

我有以下基类：

```
public class BaseClass extends Activity implements MusicUtils.Defs,
    View.OnTouchListener, View.OnLongClickListener {
private static final int USE_AS_RINGTONE = CHILD_MENU_BASE;

private boolean mOneShot = false;
private boolean mSeeking = false;
private boolean mDeviceHasDpad;
private long mStartSeekenter code herePos = 0;
private long mLastSeekEventTime;
private IMediaPlaybackService mService = null;
private RepeatingImageButton mPrevButton;
private ImageButton mPauseButton;
private RepeatingImageButton mNextButton;
private Worker mAlbumArtWorker;
private AlbumArtHandler mAlbumArtHandler;
private Toast mToast;
private int mTouchSlop;
private ServiceToken mToken;

public BaseClass() {
}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);

    mAlbumArtWorker = new Worker("album art worker");
    mAlbumArtHandler = new AlbumArtHandler(mAlbumArtWorker.getLooper());

    mCurrentTime = (TextView) findViewById(R.id.currenttime);
    mTotalTime = (TextView) findViewById(R.id.totaltime);

    mPrevButton = (RepeatingImageButton) findViewById(R.id.prev);
    mPrevButton.setOnClickListener(mPrevListener);
    mPrevButton.setRepeatListener(mRewListener, 260);
    mPauseButton = (ImageButton) findViewById(R.id.pause);
    mPauseButton.requestFocus();
    mPauseButton.setOnClickListener(mPauseListener);
    mNextButton = (RepeatingImageButton) findViewById(R.id.next);
    mNextButton.setOnClickListener(mNextListener);
    mNextButton.setRepeatListener(mFfwdListener, 260);
    seekmethod = 1;

    mDeviceHasDpad = (getResources().getConfiguration().navigation ==

    Configuration.NAVIGATION_DPAD);

    if (icicle != null) {
        mOneShot = icicle.getBoolean("oneshot");
    } else {
        mOneShot = getIntent().getBooleanExtra("oneshot", false);
    }

    mTouchSlop = ViewConfiguration.get(BaseClass.this).getScaledTouchSlop();
  }

  Handler mLabelScroller = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        TextView tv = (TextView) msg.obj;
        int x = tv.getScrollX();
        x = x * 3 / 4;
        tv.scrollTo(x, 0);
        if (x == 0) {
            tv.setEllipsize(TruncateAt.END);
        } else {
            Message newmsg = obtainMessage(0, tv);
            mLabelScroller.sendMessageDelayed(newmsg, 15);
        }
    }
   };

    Cursor c = MusicUtils.query(this, ContentUris.withAppendedId(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, audioid),
            new String[] { MediaStore.Audio.Media.IS_MUSIC }, null, 

     null,
            null);
    boolean ismusic = true;
    if (c != null) {
        if (c.moveToFirst()) {
            ismusic = c.getInt(0) != 0;
        }
        c.close();
    }
    if (!ismusic) {
        return false;
    }

    boolean knownartist = (artist != null)
            && !MediaStore.UNKNOWN_STRING.equals(artist);

    boolean knownalbum = (album != null)
            && !MediaStore.UNKNOWN_STRING.equals(album);

    title = getString(R.string.mediasearch, title);

    Intent i = new Intent();
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.setAction(MediaStore.INTENT_ACTION_MEDIA_SEARCH);
    i.putExtra(SearchManager.QUERY, query);
    if (knownartist) {
        i.putExtra(MediaStore.EXTRA_MEDIA_ARTIST, artist);
    }
    if (knownalbum) {
        i.putExtra(MediaStore.EXTRA_MEDIA_ALBUM, album);
    }
    i.putExtra(MediaStore.EXTRA_MEDIA_TITLE, song);
    i.putExtra(MediaStore.EXTRA_MEDIA_FOCUS, mime);

    startActivity(Intent.createChooser(i, title));
    return true;
}

private OnSeekBarChangeListener mSeekListener = new OnSeekBarChangeListener() {
    public void onStartTrackingTouch(SeekBar bar) {
        mLastSeekEventTime = 0;
        mFromTouch = true;
    }

    public void onProgressChanged(SeekBar bar, int progress,
            boolean fromuser) {
        if (!fromuser || (mService == null))
            return;
        long now = SystemClock.elapsedRealtime();
        if ((now - mLastSeekEventTime) > 250) {
            mLastSeekEventTime = now;
            updateTrackInfo();
            mPosOverride = mDuration * progress / 1000;
            try {
                mService.seek(mPosOverride);
            } catch (RemoteException ex) {
            }

            // trackball event, allow progress updates
            if (!mFromTouch) {
                refreshNow();
                mPosOverride = -1;
            }
        }
    }

private View.OnClickListener mPauseListener = new View.OnClickListener() {
    public void onClick(View v) {
        doPauseResume();
    }
};

private View.OnClickListener mPrevListener = new View.OnClickListener() {
    public void onClick(View v) {
        if (mService == null)
            return;
        try {
            if (mService.position() < 2000) {
                mService.prev();
            } else {
                mService.seek(0);
                mService.play();
            }
        } catch (RemoteException ex) {
        }
    }
};

@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    try {
        switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_LEFT:
            if (!useDpadMusicControl()) {
                break;
            }
            if (mService != null) {
                if (!mSeeking && mStartSeekPos >= 0) {
                    mPauseButton.requestFocus();
                    if (mStartSeekPos < 1000) {
                        mService.prev();
                    } else {
                        mService.seek(0);
                    }
                } else {
                    scanBackward(-1,
                            event.getEventTime() - 

      event.getDownTime());
                    mPauseButton.requestFocus();
                    mStartSeekPos = -1;
                }
            }
            mSeeking = false;
            mPosOverride = -1;
            return true;
        case KeyEvent.KEYCODE_DPAD_RIGHT:
            if (!useDpadMusicControl()) {
                break;
            }
            if (mService != null) {
                if (!mSeeking && mStartSeekPos >= 0) {
                    mPauseButton.requestFocus();
                    mService.next();
                } else {
                    scanForward(-1,
                            event.getEventTime() - 

     event.getDownTime());
                    mPauseButton.requestFocus();
                    mStartSeekPos = -1;
                }
            }
            mSeeking = false;
            mPosOverride = -1;
            return true;
        }
    } catch (RemoteException ex) {
    }
    return super.onKeyUp(keyCode, event);
}

private boolean useDpadMusicControl() {
    if (mDeviceHasDpad
            && (mPrevButton.isFocused() || mNextButton.isFocused() 

      || mPauseButton
                    .isFocused())) {
        return true;
    }
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    int repcnt = event.getRepeatCount();

    if ((seekmethod == 0) ? seekMethod1(keyCode) : seekMethod2(keyCode))
        return true;

    switch (keyCode) {
    /*
     * // image scale case KeyEvent.KEYCODE_Q: av.adjustParams(-0.05, 0.0,
     * 0.0, 0.0, 0.0,-1.0); break; case KeyEvent.KEYCODE_E: av.adjustParams(
     * 0.05, 0.0, 0.0, 0.0, 0.0, 1.0); break; // image translate case
     * KeyEvent.KEYCODE_W: av.adjustParams( 0.0, 0.0,-1.0, 0.0, 0.0, 0.0);
     * break; case KeyEvent.KEYCODE_X: av.adjustParams( 0.0, 0.0, 1.0, 0.0,
     * 0.0, 0.0); break; case KeyEvent.KEYCODE_A: av.adjustParams( 0.0,-1.0,
     * 0.0, 0.0, 0.0, 0.0); break; case KeyEvent.KEYCODE_D: av.adjustParams(
     * 0.0, 1.0, 0.0, 0.0, 0.0, 0.0); break; // camera rotation case
     * KeyEvent.KEYCODE_R: av.adjustParams( 0.0, 0.0, 0.0, 0.0, 0.0,-1.0);
     * break; case KeyEvent.KEYCODE_U: av.adjustParams( 0.0, 0.0, 0.0, 0.0,
     * 0.0, 1.0); break; // camera translate case KeyEvent.KEYCODE_Y:
     * av.adjustParams( 0.0, 0.0, 0.0, 0.0,-1.0, 0.0); break; case
     * KeyEvent.KEYCODE_N: av.adjustParams( 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
     * break; case KeyEvent.KEYCODE_G: av.adjustParams( 0.0, 0.0, 0.0,-1.0,
     * 0.0, 0.0); break; case KeyEvent.KEYCODE_J: av.adjustParams( 0.0, 0.0,
     * 0.0, 1.0, 0.0, 0.0); break;
     */

    case KeyEvent.KEYCODE_SLASH:
        seekmethod = 1 - seekmethod;
        return true;

    case KeyEvent.KEYCODE_DPAD_LEFT:
        if (!useDpadMusicControl()) {
            break;
        }
        if (!mPrevButton.hasFocus()) {
            mPrevButton.requestFocus();
        }
        scanBackward(repcnt, event.getEventTime() - 

      event.getDownTime());
        return true;
    case KeyEvent.KEYCODE_DPAD_RIGHT:
        if (!useDpadMusicControl()) {
            break;
        }
        if (!mNextButton.hasFocus()) {
            mNextButton.requestFocus();
        }
        scanForward(repcnt, event.getEventTime() - event.getDownTime());
        return true;

    case KeyEvent.KEYCODE_S:
        toggleShuffle();
        return true;

    case KeyEvent.KEYCODE_DPAD_CENTER:
    case KeyEvent.KEYCODE_SPACE:
        doPauseResume();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

private void scanBackward(int repcnt, long delta) {
    if (mService == null)
        return;
    try {
        if (repcnt == 0) {
            mStartSeekPos = mService.position();
            mLastSeekEventTime = 0;
            mSeeking = false;
        } else {
            mSeeking = true;
            if (delta < 5000) {
                // seek at 10x speed for the first 5 seconds
                delta = delta * 10;
            } else {
                // seek at 40x after that
                delta = 50000 + (delta - 5000) * 40;
            }
            long newpos = mStartSeekPos - delta;
            if (newpos < 0) {
                // move to previous track
                mService.prev();
                long duration = mService.duration();
                mStartSeekPos += duration;
                newpos += duration;
            }
            if (((delta - mLastSeekEventTime) > 250) || repcnt < 0) 

            {
                mService.seek(newpos);
                mLastSeekEventTime = delta;
            }
            if (repcnt >= 0) {
                mPosOverride = newpos;
            } else {
                mPosOverride = -1;
            }
            refreshNow();
        }
    } catch (RemoteException ex) {
    }
}

private void scanForward(int repcnt, long delta) {
    if (mService == null)
        return;
    try {
        if (repcnt == 0) {
            mStartSeekPos = mService.position();
            mLastSeekEventTime = 0;
            mSeeking = false;
        } else {
            mSeeking = true;
            if (delta < 5000) {
                // seek at 10x speed for the first 5 seconds
                delta = delta * 10;
            } else {
                // seek at 40x after that
                delta = 50000 + (delta - 5000) * 40;
            }
            long newpos = mStartSeekPos + delta;
            long duration = mService.duration();
            if (newpos >= duration) {
                // move to next track
                mService.next();
                mStartSeekPos -= duration; // is OK to go 

          negative
                newpos -= duration;
            }
            if (((delta - mLastSeekEventTime) > 250) || repcnt < 0) {
                mService.seek(newpos);
                mLastSeekEventTime = delta;
            }
            if (repcnt >= 0) {
                mPosOverride = newpos;
            } else {
                mPosOverride = -1;
            }
            refreshNow();
        }
    } catch (RemoteException ex) {
    }
}

private void doPauseResume() {
    try {
        if (mService != null) {
            if (mService.isPlaying()) {
                mService.pause();
            } else {
                mService.play();
            }
            updateTrackInfo();
            refreshNow();
            setPauseButtonImage();
        }
    } catch (RemoteException ex) {
    }
}

private void toggleShuffle() {
    if (mService == null) {
        return;
    }
    try {
        int shuffle = mService.getShuffleMode();
        if (shuffle == MediaPlaybackService.SHUFFLE_NONE) {

    mService.setShuffleMode(MediaPlaybackService.SHUFFLE_NORMAL);
            if (mService.getRepeatMode() ==            

    MediaPlaybackService.REPEAT_CURRENT) {
                mService.setRepeatMode(MediaPlaybackService.REPEAT_ALL);
            }
            showToast(R.string.shuffle_on_notif);
        } else if (shuffle == MediaPlaybackService.SHUFFLE_NORMAL
                || shuffle == MediaPlaybackService.SHUFFLE_AUTO) {
            mService.setShuffleMode(MediaPlaybackService.SHUFFLE_NONE);
            showToast(R.string.shuffle_off_notif);
        } else {
            Log.e("MediaPlaybackActivity", "Invalid shuffle mode: "
                    + shuffle);
        }
    } catch (RemoteException ex) {
    }
}

private void cycleRepeat() {
    if (mService == null) {
        return;
    }
    try {
        int mode = mService.getRepeatMode();
        if (mode == MediaPlaybackService.REPEAT_NONE) {
            mService.setRepeatMode(MediaPlaybackService.REPEAT_ALL);
            showToast(R.string.repeat_all_notif);
        } else if (mode == MediaPlaybackService.REPEAT_ALL) {
            mService.setRepeatMode(MediaPlaybackService.REPEAT_CURRENT);
            if (mService.getShuffleMode() != MediaPlaybackService.SHUFFLE_NONE) {
                mService.setShuffleMode(MediaPlaybackService.SHUFFLE_NONE);
            }
            showToast(R.string.repeat_current_notif);
        } else {
            mService.setRepeatMode(MediaPlaybackService.REPEAT_NONE);
            showToast(R.string.repeat_off_notif);
        }
    } catch (RemoteException ex) {
    }

}

private void showToast(int resid) {
    if (mToast == null) {
        mToast = Toast.makeText(this, "", Toast.LENGTH_SHORT);
    }
    mToast.setText(resid);
    mToast.show();
}

private void startPlayback() {

    if (mService == null)
        return;
    Intent intent = getIntent();
    String filename = "";
    Uri uri = intent.getData();
    if (uri != null && uri.toString().length() > 0) {
        // If this is a file:// URI, just use the path directly instead
        // of going through the open-from-filedescriptor codepath.
        String scheme = uri.getScheme();
        if ("file".equals(scheme)) {
            filename = uri.getPath();
        } else {
            filename = uri.toString();
        }
        try {
            if (!ContentResolver.SCHEME_CONTENT.equals(scheme)
                    || !MediaStore.AUTHORITY.equals(uri.getAuthority())) {
                mOneShot = true;
            }
            mService.stop();
            mService.openFile(filename, mOneShot);
            mService.play();
            setIntent(new Intent());
        } catch (Exception ex) {
            Log.d("MediaPlaybackActivity", "couldn't start playback: " + ex);
        }
    }

    updateTrackInfo();
    long next = refreshNow();
    queueNextRefresh(next);
}

private ServiceConnection osc = new ServiceConnection() {
    public void onServiceConnected(ComponentName classname, IBinder obj) {
        mService = IMediaPlaybackService.Stub.asInterface(obj);
        startPlayback();
        try {
            // Assume something is playing when the service says it is,
            // but also if the audio ID is valid but the service is paused.
            if (mService.getAudioId() >= 0 || mService.isPlaying()
                    || mService.getPath() != null) {
                // something is playing now, we're done
                setPauseButtonImage();
                return;
            }
        } catch (RemoteException ex) {
        }
        // Service is dead or not playing anything. If we got here as part
        // of a "play this file" Intent, exit. Otherwise go to the Music
        // app start screen.
        if (getIntent().getData() == null) {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            intent.setClass(BaseClass.this, MusicBrowserActivity.class);
            startActivity(intent);
        }
        finish();
    }

    public void onServiceDisconnected(ComponentName classname) {
        mService = null;
    }
};

private void setPauseButtonImage() {
    try {
        if (mService != null && mService.isPlaying()) {
            mPauseButton
                    .setImageResource(android.R.drawable.ic_media_pause);
        } else {
            mPauseButton.setImageResource(android.R.drawable.ic_media_play);
        }
    } catch (RemoteException ex) {
    }
}

private TextView mCurrentTime;
private TextView mTotalTime;

private long mPosOverride = -1;
private boolean mFromTouch = false;
private long mDuration;
private int seekmethod;
private boolean paused;

private static final int REFRESH = 1;
private static final int QUIT = 2;
private static final int GET_ALBUM_ART = 3;
private static final int ALBUM_ART_DECODED = 4;

private void queueNextRefresh(long delay) {
    if (!paused) {
        Message msg = mHandler.obtainMessage(REFRESH);
        mHandler.removeMessages(REFRESH);
        mHandler.sendMessageDelayed(msg, delay);
    }
}

private long refreshNow() {
    if (mService == null)
        return 500;
    try {
        long pos = mPosOverride < 0 ? mService.position() : mPosOverride;
        long remaining = 1000 - (pos % 1000);
        if ((pos >= 0) && (mService.duration() > 0)) {
            mCurrentTime.setText(MusicUtils
                    .makeTimeString(this, pos / 1000));

            if (mService.isPlaying()) {
                mCurrentTime.setVisibility(View.VISIBLE);
            } else {
                // blink the counter
                int vis = mCurrentTime.getVisibility();
                mCurrentTime
                        .setVisibility(vis == View.INVISIBLE ? View.VISIBLE
                                : View.INVISIBLE);
                remaining = 500;
            }

        } else {
            mCurrentTime.setText("--:--");

        }
        // return the number of milliseconds until the next full second, so
        // the counter can be updated at just the right time
        return remaining;
    } catch (RemoteException ex) {
    }
    return 500;
}

private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {

        case REFRESH:
            updateTrackInfo();
            long next = refreshNow();
            queueNextRefresh(next);
            break;

        case QUIT:
            // This can be moved back to onCreate once the bug that prevents
            // Dialogs from being started from onCreate/onResume is fixed.
            new AlertDialog.Builder(BaseClass.this)
                    .setTitle(R.string.service_start_error_title)
                    .setMessage(R.string.service_start_error_msg)
                    .setPositiveButton(R.string.service_start_error_button,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    finish();
                                }
                            }).setCancelable(false).show();
            break;

        default:
            break;
        }
    }
};

private BroadcastReceiver mStatusListener = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action.equals(MediaPlaybackService.META_CHANGED)) {
            // redraw the artist/title info and
            // set new max for progress bar
            updateTrackInfo();
            setPauseButtonImage();
            queueNextRefresh(1);
        } else if (action.equals(MediaPlaybackService.PLAYBACK_COMPLETE)) {
            if (mOneShot) {
                finish();
            } else {
                setPauseButtonImage();
            }
        } else if (action.equals(MediaPlaybackService.PLAYSTATE_CHANGED)) {
            setPauseButtonImage();
        }
    }
};

private static class AlbumSongIdWrapper {
    public long albumid;
    public long songid;

    AlbumSongIdWrapper(long aid, long sid) {
        albumid = aid;
        songid = sid;
    }
}

private void updateTrackInfo() {
    if (mService == null) {
        return;
    }
    try {
        String path = mService.getPath();
        if (path == null) {
            finish();
            return;
        }

        long songid = mService.getAudioId();
        if (songid < 0 && path.toLowerCase().startsWith("http://")) {
            // Once we can get album art and meta data from MediaPlayer, we
            // can show that info again when streaming.
            mAlbumArtHandler.removeMessages(GET_ALBUM_ART);
            mAlbumArtHandler.obtainMessage(GET_ALBUM_ART,
                    new AlbumSongIdWrapper(-1, -1)).sendToTarget();
        } else {
            String artistName = mService.getArtistName();
            if (MediaStore.UNKNOWN_STRING.equals(artistName)) {
                artistName = getString(R.string.unknown_artist_name);
            }
            String albumName = mService.getAlbumName();
            long albumid = mService.getAlbumId();
            if (MediaStore.UNKNOWN_STRING.equals(albumName)) {
                albumName = getString(R.string.unknown_album_name);
                albumid = -1;
            }
            mAlbumArtHandler.removeMessages(GET_ALBUM_ART);
            mAlbumArtHandler.obtainMessage(GET_ALBUM_ART,
                    new AlbumSongIdWrapper(albumid, songid)).sendToTarget();
        }
        mDuration = mService.duration();
        mTotalTime.setText(MusicUtils
                .makeTimeString(this, mDuration / 1000));
    } catch (RemoteException ex) {
        finish();
    }
}

public class AlbumArtHandler extends Handler {
    private long mAlbumId = -1;

    public AlbumArtHandler(Looper looper) {
        super(looper);
    }

    @Override
    public void handleMessage(Message msg) {
        long albumid = ((AlbumSongIdWrapper) msg.obj).albumid;
        long songid = ((AlbumSongIdWrapper) msg.obj).songid;
        if (msg.what == GET_ALBUM_ART
                && (mAlbumId != albumid || albumid < 0)) {
            // while decoding the new image, show the default album art
            Message numsg = mHandler.obtainMessage(ALBUM_ART_DECODED, null);
            mHandler.removeMessages(ALBUM_ART_DECODED);
            mHandler.sendMessageDelayed(numsg, 300);
            Bitmap bm = MusicUtils.getArtwork(BaseClass.this, songid,
                    albumid);
            if (bm == null) {
                bm = MusicUtils.getArtwork(BaseClass.this, songid, -1);
                albumid = -1;
            }
            if (bm != null) {
                numsg = mHandler.obtainMessage(ALBUM_ART_DECODED, bm);
                mHandler.removeMessages(ALBUM_ART_DECODED);
                mHandler.sendMessage(numsg);
            }
            mAlbumId = albumid;
        }
    }
}

public static class Worker implements Runnable {
    private final Object mLock = new Object();
    private Looper mLooper;

    /**
     * Creates a worker thread with the given name. The thread then runs a
     * {@link android.os.Looper}.
     * 
     * @param name
     *            A name for the new thread
     */
    Worker(String name) {
        Thread t = new Thread(null, this, name);
        t.setPriority(Thread.MIN_PRIORITY);
        t.start();
        synchronized (mLock) {
            while (mLooper == null) {
                try {
                    mLock.wait();
                } catch (InterruptedException ex) {
                }
            }
        }
    }

    public Looper getLooper() {
        return mLooper;
    }

    public void run() {
        synchronized (mLock) {
            Looper.prepare();
            mLooper = Looper.myLooper();
            mLock.notifyAll();
        }
        Looper.loop();
    }

    public void quit() {
        mLooper.quit();
    }
} 
```

}

我想扩展这个类..但是程序崩溃显示这个基类的空指针异常..基类没有任何内容视图，它指向按钮（前一个和下一个按钮），并显示空指针..请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:25:43.153

在子类中设置 contentview，父类可以访问它。

# math - 整数多项式插值（或快速选择情况）

> ID：12686171
> 
> 赞同：0
> 
> 时间：2012-10-02T07:34:02.090
> 
> 标签：math, mathematical-optimization

让`x`进`{10, 37, 96, 104}`组。

让`f(x)`一个*“选择案例”*功能：

```
int f1(int x) {
    switch(x) {
    case 10: return 3;
    case 37: return 1;
    case 96: return 0;
    case 104: return 1;
    }
    assert(...);
} 
```

然后，我们可以避免将条件跳转写成`f(x)`“*整数多项式”*，例如

```
int f2(int x) {
    // P(x) = (x - 70)^2 / 1000
    int q = x - 70;
    return (q * q) >> 10;
} 
```

在某些情况下（仍然包括`mul`操作）会`f2`比`f1`（例如大型条件评估）更好。

有没有办法`P(x)`从`switch`注射中找到？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:34:33.213

I suggest you start reading the Wikipedia page about [Polynomial Interpolation](http://en.wikipedia.org/wiki/Polynomial_interpolation), if you do not know how to calculate the interpolation polynomial.

Note, that not all calculation methods are suitable for practical application, because of numerical issues (e.g. divisions in the Lagrange version). I am confident that you shold be able to find a libary providing this functionality. Note that the construction will take some time too, hence this makes only sence if your function will be called quite frequently.

Be aware that integer function values and integer points of support do not imply integer coefficients for your polynomial! Thus, in the general case, you will require O(n) floating point operations, and finally a round toward the nearest integer. It may depend on your input wether the interpolation method is reliable and faster than the approach using switch.

Further, I want to propose a differnt solution, assuming that n is rather large. Why dont you put your entries (the pairs (10,3), (37,1), (96,0), (104,1) for your example) inside a serchtree (e.g. std::map in C++ or SortedDictionary in C#)? Thus, your query cost would reduce from linear to O(log n)!

# sql - SQL Server 插入。. . 执行语句

> ID：12686175
> 
> 赞同：0
> 
> 时间：2012-10-02T07:34:21.630
> 
> 标签：sql, tsql

我创建了一个存储过程来返回包含大约 60 列的记录。但是，我想在我的项目的另一部分从它返回的 60 列中从同一个存储过程中选择大约 40 列。如何正确指定需要返回的列？本质上是什么规则，如果有的话

**插入#TempTable (. . . . . . .) Exec StoredProcedure**

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:41:14.603

规则非常简单。SP 中的选择必须有与#Temptable 一样多的列，并且列，如果不是完全相同的类型，则必须兼容或可协调，例如int 进入VARCHAR。

如果您必须从 60 列中选择 40 列，则必须将其传递给 2 个临时表，或者使用涉及 OPENQUERY 之类的技巧将 SP 调用视为远程数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:02:14.477

您可以使用多个输出参数或一个输出参数，即 NVARCHAR(MAX)。你可以像这样初始化它：

```
'SELECT '+ Col01.Value + ','+ Col02.Value + ',' ...  + ',' +  Col40.Value 
```

因此，您的存储过程将返回如下内容：

```
'SELECT 10,50,''2012-10-02'',''Joro''' 
```

然后你可以这样做：

```
 DECLARE @OUTPUT NVARCHAR(MAX)='SELECT 10,50,''2012-10-02'',''Joro'''

 EXEC sp_executesql @OUTPUT 
```

另外，请在此处查看此解决方案：

[将存储过程的结果插入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

# c# - MS Word，使用 NPOI 库

> ID：12686176
> 
> 赞同：4
> 
> 时间：2012-10-02T07:34:24.970
> 
> 标签：c#, ms-office, npoi

我想使用 NPOI 库从 Word 文件中获取图像（Doc [97-2003]）。

我想要 HWPFDocument 类，但我找不到这个类所在的命名空间。我用 C# 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:07:51.937

我认为您无法使用 NPOI 实现这一目标。
正如 tonyqus（项目背后的人）[在这里](http://npoi.codeplex.com/discussions/360441)和[这里所说的那样，](http://npoi.codeplex.com/discussions/393758) **HWPF 不稳定**且不可用。我已经设法通过“ [OpenOffice uno SDK](http://wiki.openoffice.org/wiki/Documentation/DevGuide/ProUNO/Professional_UNO) ”使用 MS Word 和 Excel。
这并不简单，但经过一点点的努力，你就可以获得很好的结果。
您可以在此处阅读如何提取和使用程序集以及如何[在](http://blog-of-darius.blogspot.co.uk/2011/03/extract-images-from-word-openoffice.html)[此处](http://tinyway.wordpress.com/2011/03/30/how-to-convert-office-documents-to-pdf-using-open-office-in-c/)实现您要查找的内容。

当然，您始终可以使用 MSOffice Interop，但您需要在执行应用程序的客户端上安装 MS Office。

希望能帮助到你。

# ios - 在 PhoneGap 应用程序中检测 iPhone 和其他 iOS 设备上的静音事件和状态？

> ID：12686180
> 
> 赞同：2
> 
> 时间：2012-10-02T07:34:29.713
> 
> 标签：ios, cordova, phonegap-plugins

似乎有一些话题围绕着这个话题，但没有明确的答案：如果用户加载应用程序时启用了声音但后来将他/她的 iPhone 静音，我们如何在 PhoneGap 中检测到这一点？这个事件有回调吗？文档似乎没有列出任何内容。

第二个相关问题：如何检测静音按钮的状态？如果有人启用了静音，您如何检测到这一点以避免播放音频？media.play() 方法似乎只有一个关于是否在屏幕锁定时播放音频的选项。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T21:03:06.840

我希望我们的应用在 iPhone 静音时不播放声音。经过数小时的搜索，我决定尝试使用以下参数并按预期工作：

```
myMedia.play({ playAudioWhenScreenIsLocked : false }); 
```

[文档没有说](http://docs.phonegap.com/en/2.6.0/cordova_media_media.md.html#media.play_ios_quirk)这个参数会在 iPhone 静音时使声音不播放，但它的行为是这样的。

我正在使用 PhoneGap 2.6.0，文档说：

> 将此选项传递给 play 方法以指定是否要在屏幕锁定时播放媒体文件的音频（如果未设置，则默认为 true）。如果设置为 true，它将忽略硬件静音按钮的状态。

记录不好？

# mysql - 在mysql中按列排序并使用索引的最佳方法是什么？

> ID：12686182
> 
> 赞同：3
> 
> 时间：2012-10-02T07:34:32.717
> 
> 标签：mysql, optimization, indexing

我有一个有 10 列的表，现在我想给用户一个选项，用他们想要的任何列对数据进行排序。例如，假设一个包含 7 个项目的组合框，每个项目都是表格的一列，现在用户选择一个项目并获取按所选列排序的数据。

**现在有什么问题？**

我的表有 3M 条记录，如果我使用索引列对数据进行排序，我没有问题，但使用非索引列需要 3.5 分钟才能排序！！！

**我正在考虑的解决方案是什么？**

为需要排序的表的每一列添加索引！就我而言，我将在 8 列上有索引！！！！

**我的解决方案有什么问题？**

在列上有大量索引可能会降低 INSERT/UPDATE 查询的速度！就我而言，表格经常更新（每秒！！！！！！）

您对这种情况有什么解决方案？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:44:21.867

阅读本文以获取有关优化的更多详细信息：http: [//dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

在某些情况下，MySQL 不能使用索引来解析`ORDER BY`，尽管它仍然使用索引来查找与`WHERE`子句匹配的行。使用索引进行排序通常与使用索引查找行一起使用，但是它也可以仅用于排序，例如，如果您只是`ORDER BY`在表上使用 without 和 where 子句。在这种情况下，您会看到“索引”类型，`EXPLAIN`其中对应于按索引顺序扫描（可能）完整的表。了解在哪些条件下可以使用索引对数据进行排序以及限制行数是非常重要的。

查看相同的索引**(A,B)**之类的 东西`ORDER BY A ; ORDER BY A,B ; ORDER BY A DESC, B DESC`将能够使用完整索引进行排序（请注意，如果您对完整表进行无限制的排序，MySQL 可能不会选择使用索引进行排序）。但是`ORDER BY B`or`ORDER BY A, B DESC` 将无法使用索引，因为请求的顺序与 BTREE 中的数据顺序不一致。如果你有限制和排序这样的东西会起作用`A=5 ORDER BY B ; A=5 ORDER BY B DESC; A>5 ORDER BY A ; A>5 ORDER BY A,B ; A>5 ORDER BY A DESC`，这又可以很容易地想象为扫描 BTREE 中的范围。然而这样的事情是行不通`A>5 ORDER BY B , A>5 ORDER BY A,B DESC or A IN (3,4) ORDER BY B`的——在这些情况下，以排序形式获取数据需要的不仅仅是 BTREE 中的简单范围扫描，而 MySQL 决定将其传递下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:38:04.350

**选项 #1**：如果您仅限于 MySQL，则没有更好的选择，而是为可能的顺序列创建 8 个索引。您插入/更新肯定会受到影响，但没有真正的访问者会等待 3.5 分钟才能对列表进行排序。

调整 #1：为了让它更快一点，您可以创建部分索引而不是标准索引，这将使用更少的空间（我假设其中一些列是 varchar），这意味着更少的写入，更小的内存占用。您只需要使用子字符串检查每一列的熵，并确保您仍然有超过 90% 的区别。

例如，使用这样的查询：

```
> select count(distinct(substring(COLUMN, 1, 5))) as part_5, count(distinct(substring(COLUMN, 1, 10))) as part_10, count(distinct(substring(COLUMN, 1, 20))) as part_20, count(distinct(COLUMN)) as sum from TABLE;
+--------+---------+---------+---------+
| part_5 | part_10 | part_20 | sum     |
+--------+---------+---------+---------+
| 892183 | 1996053 | 1996058 | 1996058 |
+--------+---------+---------+---------+ 
```

调整 #2：您可以让插入/更新语句在后台执行。应用程序不会更快，但用户体验会更好。

调整#3：如果可以的话，使用更大的事务进行插入/更新。

**选项#2**：您也可以尝试使用为这种使用模式构建的搜索引擎之一。我会推荐[Solr](http://lucene.apache.org/solr/)，因为我使用了一段时间后非常满意，但我也听说过弹性搜索。

# sql - 在 where 子句中使用“AND”时出现错误“参数必须是布尔类型”

> ID：12686193
> 
> 赞同：6
> 
> 时间：2012-10-02T07:35:40.210
> 
> 标签：sql, postgresql

错误：AND 的参数必须是布尔类型，而不是类型字符变化

```
SELECT 
    partno, 
    count(manufacturer) 
FROM 
    components 
WHERE 
    partno IN (SELECT partno FROM productions 
               WHERE 
                    year = 2005
                AND attr is NULL
              ) 
GROUP BY partno
UNION
SELECT 
    partno, 
    count(manufacturer) 
FROM components 
WHERE 
    partno IN (SELECT partno FROM productions 
               WHERE 
                   year = 2005
               AND attr is NULL
              ) 
GROUP BY partno
) 
AND (
        partno NOT IN (SELECT partno FROM components
    )
); 
```

union 之后的部分是包含所有不在生产中的组件的 partno（它们应该计为 0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:38:23.147

您有一个括号太多（在 之后`attr IS NULL`），并且您有一个聚合函数（`count`在第二部分中）而没有`group by`. 你是这个意思吗：

```
select partno, count(manufacturer) 
from components 
where partno in 
(
   select partno from productions where year=2005 and attr is NULL
) 
group by partno

UNION

select partno, count(manufacturer) 
from components 
where partno in 
(
    select partno from productions where year=2005 and attr is NULL
) 
AND partno not in (select partno from components)
group by partno; 
```

# xpath - 更简单的 XQuery 语句

> ID：12686197
> 
> 赞同：1
> 
> 时间：2012-10-02T07:35:57.240
> 
> 标签：xpath, xquery

我问自己是否可以使以下陈述更简单？你能帮我吗？

```
<Vorlesungsverzeichnis>
{
for $sws in distinct-values(doc('uni')//Vorlesung/SWS) 
order by $sws
return 
 <Vorlesungen SWS="{$sws}">
 {
   for $v in doc('uni')//Vorlesung[SWS=$sws]
   order by $v/Titel
   return <Vorlesung VorlNr="{$v/@VorlNr}" Titel="{$v/Titel}"></Vorlesung>
 }
 </Vorlesungen>
}
</Vorlesungsverzeichnis> 
```

源 XML 可[在此处获得，您也可以在](http://dbkemper4-vm10.informatik.tu-muenchen.de:1999/uni.xml)[此处](http://dbkemper4-vm10.informatik.tu-muenchen.de:1999/index.html#)尝试查询。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T16:03:28.133

在 XQuery 3.0 中，您可以执行以下操作：

```
<Vorlesungsverzeichnis>
{
  for $v in doc('uni')//Vorlesung
  order by $v/Titel
  group by $sws := $v/SWS
  return <Vorlesungen SWS="{$sws}">{$v}</Vorlesungen>
}
</Vorlesungsverzeichnis> 
```

# sql - 使用 VARCHAR(max)、NVARCHAR(max) 和 VARBINARY(max) 代替 TEXT、NTEXT 和 IMAGE 有什么好处？

> ID：12686198
> 
> 赞同：3
> 
> 时间：2012-10-02T07:35:57.387
> 
> 标签：sql, sql-server, database, deprecated, sql-server-2012

我知道 TEXT、NTEXT 和 IMAGE 已被弃用，最终将从 SQL Server 中删除。

但是，**除了这种弃用之外**，为什么 VARCHAR(max)、NVARCHAR(max) 和 VARBINARY(max) 数据类型更好？微软为什么选择它们？

我注意到 VARCHAR 和 NVARCHAR 可以与 = 和 GROUP BY 一起使用，而旧类型不能。还有更多好处吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T07:59:39.337

数据类型已被弃用，因为随着 SQL Server 的进步，不再需要处理与 VARCHAR 或 BINARY 不同的大块文本 (TEXT) 或二进制数据 (IMAGE)。由于存储不再是问题，我们现在可以随心所欲地执行 SUBSTRING( `<varchar(max)>`, 1234567, 400) ，而在过去，1 MB 似乎很多并且需要特殊处理，例如[本文](http://sqlserverpedia.com/wiki/Built-in_Functions_-_Text_and_Image_Functions)中的函数。

IMAGE 携带与 TEXT 类似的包袱，这需要以特殊的方式存储大小，而不是扩展 VARBINARY 以适应任何一直到 2GB 的内容。

但是，具有专用 BLOB 和 CLOB 的相同原因在内存/存储限制下仍然有效，因此 SQL Server CE 继续具有 IMAGE 类型，并且在这方面不会很快消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:45:27.047

因为它们已被弃用或 [不会被支持](http://msdn.microsoft.com/en-us/library/ms187993.aspx)

> **重要**的 ntext 、 text 和 image 数据类型将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用 nvarchar(max)、varchar(max) 和 varbinary(max)。

相关问题

*   [SQL 2008 - varchar(max) 与文本数据类型](https://stackoverflow.com/questions/7390155/sql-2008-varcharmax-vs-text-data-types)
*   [SQL Server 文本类型与 varchar 数据类型](https://stackoverflow.com/questions/564755/sql-server-text-type-vs-varchar-data-type)

# jquery - 不同的浏览器问题，jQuery 或 css 错误

> ID：12686199
> 
> 赞同：0
> 
> 时间：2012-10-02T07:35:57.663
> 
> 标签：jquery, google-chrome, browser, safari

> **可能重复：**
> [jQuery 定位问题](https://stackoverflow.com/questions/12685327/jquery-positioning-porblem)

好吧，如果您看到 FF 15 上的链接，那就太好了。

[http://www.mbu.mn/test/](http://www.mbu.mn/test/)

以及它会破坏的其他浏览器。中断意味着它没有覆盖确切的大小。它更向左，所以看起来很糟糕。我的英语很差，所以请理解我的问题：P

请帮忙解决这个问题。

好的，HTML就像

```
<!doctype html>
<html lang="en">
<head>
    <title>Nofu Entertaiment</title>
    <link rel="stylesheet" type="text/css" href="css/jquery.pageslide.css" />
</head>
<body>
<p><a href="javascript:$.pageslide.close()">Close</a></p>
<div id="main">

    <div id="content">
        <ul>
            <li>
                <a href="#modal" class="second">Click This ..</a>
            </li>
            <li>
                <a href="#modal1" class="second">Click This ..</a>

            </li>
        </ul>
        <div id="modal">
            <h2>Modal</h2>
                <p>This slide uses "modal" option set to "true". When using a modal pageslide, clicking on the main window will not close the window. You must explicitly call <code>$.pageslide.close()</code>.</p>
                <p><a href="javascript:$.pageslide.close()">Close</a></p>
        </div>
        <div id="modal1">
            <h2>testing 1 2 3</h2>
            <p>test test <code>$.pageslide.close()</code>.</p>   
        </div>
    </div>
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.pageslide.min.js"></script>
    <script>
        /* Default pageslide, moves to the right */
        $(".first").pageslide();

        /* Slide to the left, and make it model (you'll have to call $.pageslide.close() to close) */
        $(".second").pageslide({ direction: "left", modal: true });
    </script>
</div>
</body>
</html> 
```

和CSS是

```
body {
    margin: 0 auto;
}
#main {
    margin: 0 auto;
    width: 600px;
}
#content {
    width: 600px;
    margin: 0 auto;
    background: #999999;
}
#content h1 {
    color: #333;
    line-height: 1em;
}
#content ul {
    padding-left: 0;
    list-style: none;
}
#content ul li {
    margin-bottom: 20px;
}
#modal {
    display: none;
}
#modal a {
    background: #CCC;
    color: #333;
    font-weight: bold;
    padding: 5px 10px;
    border: none;
    float: left;
}
#modal a:hover {
    background: #aaa;
}
#modal1 {
    display: none;
}
#modal1 a {
    background: #CCC;
    color: #333;
    font-weight: bold;
    padding: 5px 10px;
    border: none;
}
#modal1 a:hover {
    background: #aaa;
}
#pageslide {
    /* These styles MUST be included. Do not change. */
    display: block;
    margin: 0 auto;
    position: fixed;
    top: 0;
    height: 100%;
    z-index: 999999;
    /* Specify the width of your pageslide here */
    width: 600px;
    /* These styles are optional, and describe how the pageslide will look */
    background-color: #333;
    color: #FFF;
    -webkit-box-shadow: inset 0 0 5px 5px #222;
    -moz-shadow: inset 0 0 5px 5px #222;
    box-shadow: inset 0 0 5px 5px #222;
    position: absolute;
    overflow: hidden;
} 
```

而jQuery是

```
/*
 * jQuery pageSlide
 * Version 2.0
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin which slides a webpage over to reveal an additional interaction pane.
 *
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
*/
;(function(b){function j(e,a){if(0===e.indexOf("#"))b(e).clone(!0).appendTo(c.empty()).show();else{if(a){var d=b("<iframe />").attr({src:e,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});c.html(d)}else c.load(e);c.data("localEl",!1)}}function k(b,a){var d=c.outerWidth(!0),f={},g={};if(!c.is(":visible")&&!h){h=!0;switch(b){case "left":c.css({margin:"0 0 0 600px"});f["margin"]="0 auto"+d;g.right="+="+d;break;default:c.css({left:"-"+d+"px"}),f["margin"]="0 auto"+d,g.left="+="+d}l.animate(f,a);c.show().animate(g,a,function(){h=!1})}}var l=b("#main"),c=b("#pageslide"),h=!1,m;0==c.length&&(c=b("<div />").attr("id","pageslide").css("display","none").appendTo(b("#main")));b.fn.pageslide=function(e){this.click(function(a){var d=b(this),f=b.extend({href:d.attr("href")},e);a.preventDefault();a.stopPropagation();c.is(":visible")&&d[0]==m?b.pageslide.close():(b.pageslide(f),m=d[0])})};b.fn.pageslide.defaults={speed:500,direction:"right",modal:!1,iframe:!0,href:null};b.pageslide=function(e){var a=b.extend({},b.fn.pageslide.defaults,e);c.is(":visible")&&c.data("direction")!=a.direction?b.pageslide.close(function(){j(a.href,a.iframe);k(a.direction,a.speed)}):(j(a.href,a.iframe),c.is(":hidden")&&k(a.direction,a.speed));c.data(a)};b.pageslide.close=function(c){var a=b("#pageslide"),d=a.outerWidth(!0),f=a.data("speed"),g={},i={};if(!a.is(":hidden")&&!h){h=!0;switch(a.data("direction")){case "left":g["margin"]="0 auto"+d;i.right="-="+d;break;default:g["margin"]="0 auto"+d,i.left="-="+d}a.animate(i,f);l.animate(g,f,function(){a.hide();h=!1;"undefined"!=typeof c&&c()})}};c.click(function(b){b.stopPropagation()});b(document).bind("click keyup",function(e){"keyup"==e.type&&27!=e.keyCode||c.is(":visible")&&!c.data("modal")&&b.pageslide.close()})})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:58:15.903

它显然是**CSS**

尝试在您的项目中使用 CSS 框架...

[http://speckyboy.com/2012/08/21/15-more-responsive-css-frameworks-boilerplates-worth-considering/](http://speckyboy.com/2012/08/21/15-more-responsive-css-frameworks-boilerplates-worth-considering/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:38:17.560

我认为这是一个 CSS 错误，它只是边距或填充的问题。你能清理一下css以免你感到困惑吗？

然后我认为对于浮动：离开你，你需要先清除：两者。

# php - PHP传输（发送）文件到另一台服务器？

> ID：12686200
> 
> 赞同：0
> 
> 时间：2012-10-02T07:35:57.660
> 
> 标签：php, file, send, transfer, put

在 PHP 中，我只知道如何处理`get`文件。
但现在我不知道如何处理以下内容：

*   我怎样才能`distribute/ send/ transfer`将文件放到另一个拥有的服务器上？
*   只是从主机服务器发送。不是从目标服务器获取的方式。

知道的请推荐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:41:03.460

如果其他服务器是你的，你可以安装一个 FTP 服务器并使用 ftp 功能：

[http://es2.php.net/ftp](http://es2.php.net/ftp)

[http://es2.php.net/manual/es/function.ftp-fput.php](http://es2.php.net/manual/es/function.ftp-fput.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:52:36.380

使用 curl，它支持 POST http 方法（如果您从 html 表单接收文件）和 ftp 方法（如果您已设置 ftp 服务器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:38:03.287

您可以使用这些`curl_XXX`功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:38:38.970

您将如何收到文件？

如果您有一个监听 POST 请求的网络服务器，我会推荐[cURL](http://php.net/curl)。如果您正在运行其他类型的服务器，我建议您通过[sockets](http://php.net/fsockopen)发送它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T12:49:22.940

是的，您可以在要将数据发送到的服务器上安装 FTP 服务器，然后使用[PHP 的 FTP 功能](http://uk.php.net/manual/en/book.ftp.php)或使用 curl，并在您要将数据发送到的服务器上运行脚本以获取 POST 数据从您发送数据的服务器输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T07:27:03.850

1.  嘿使用 php ftp 功能将文件传输到另一台服务器。但请确保，服务器已授予您编辑的写入权限。

2.  您可以通过 php 的 ftp_fput() 方法在远程服务器上传输文件。通过 php 手册，您将获得用于发送文件的准备好的示例。

3.  首先使用 ftp_connect() 函数连接到远程服务器。然后使用文件函数从本地目录读取文件，然后使用 fput 将文件放到远程服务器上。

# json - 如何让 DotNetNuke 6.2 服务框架对 json 数据进行模型绑定

> ID：12686202
> 
> 赞同：1
> 
> 时间：2012-10-02T07:36:09.200
> 
> 标签：json, asp.net-mvc-2, dotnetnuke, model-binding

DotNetNuke Serviceframework 基于 ASP.NET MVC 2，因此不包括开箱即用的 json 模型绑定。

我尝试了多种方法：

*   MVC3 json值提供者
*   自定义 json 模型绑定器
*   自定义值提供者

调用了注册这些对象的代码，但是没有调用这些对象本身的方法。

注册这些本身就是一个有趣的领域，就像在 DotNetNuke 中一样，我们无法访问 global.asax 文件。

我还尝试在控制器中反序列化请求输入流，但在那里我得到了一个 nullreferenceexception，并且我得到了正确的数据大小，但都是空值！

有任何想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:51:56.177

好的，

我有一个干净且实用的解决方法。

我正在使用[这里](http://erraticdev.blogspot.ie/2010/12/sending-complex-json-objects-to-aspnet.html)的 jquery 插件。这会将 json 转换为标准表单表单。将其与 jquery & 淘汰赛一起使用如下所示：

```
 $.ajax({ 
       url: '<%= ModulePath %>Api/Register/Search', 
       type: 'POST',  
       data: $.toDictionary(ko.mapping.toJS($root),"",true), 
       success: function (data) { //do something }); 
```

让问题保持开放，以防有人有任何想法让 json 直接工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:38:25.360

您需要注册一个 JSON 值提供程序才能使其工作。有关详细信息，请参阅[http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx)。

注册值提供者的最佳方法是在您的路由映射器中进行。一定要保护注册以确保它只发生一次，因为路由映射器有时会被多次调用。如果您要在部署到您无法控制的服务器的模块中执行此操作，您可能应该检查 factory 集合的内容，以确保没有其他服务已经注册了 value provider。

DNN 7 中的服务框架基于 WebAPI 并且原生支持 JSON，因此这个麻烦很快就会消失。

# php - PHP SQL 从表中选择文本值

> ID：12686203
> 
> 赞同：-1
> 
> 时间：2012-10-02T07:36:12.597
> 
> 标签：php, mysql

```
<input type="text" name="id_te" value="100"/> 
```

我认为文本名称 id_te 的值是 100。

现在我想问你是否可以从表 WHERE id_te = 文本 id_te 的值中选择 *？

我使用它，因为我使用的是 jquery modal。Jquery modal 从 href 点击获取 pass id_te。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:10:33.977

就像你想使用 ajax：

关注或阅读此页面以回答您的问题

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:41:05.553

是的。使用 $_POST 或 $_GET 提取字段的值，然后使用以下代码：

```
// Connect to DB:
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'db_name');

$clean_input = $mysqli->real_escape_string($_POST['id_te']);
$resullt = $mysqli->query("SELECT * from table WHERE id_te = '".$clean_input."'"); 
```

当然，您不能真正信任用户输入，因此使用 Prepared Statements 可能会更好，但上面的代码应该给您一个很好的起点！

# .net - 当 HostnameComparisonMode 设置为 Exact 时，Http Input Worker 角色出现 405 错误

> ID：12686215
> 
> 赞同：0
> 
> 时间：2012-10-02T07:37:25.203
> 
> 标签：.net, wcf, azure, azure-worker-roles, http-status-code-405

我遇到了与此类似的错误： [Azure Worker Role with HTTP input endpoint on port 8732 with HTTP 405 Error](https://stackoverflow.com/questions/8332564/azure-worker-role-with-http-input-endpoint-on-port-8732-with-http-405-error)

我在 MSDN 上问过这个问题，但还没有答案： [http ://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/6e9c84be-f39a-4da9-953e-a82f98afea54](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/6e9c84be-f39a-4da9-953e-a82f98afea54)

问题是我无法使用 Http Input 端点测试多个 Worker Role 实例。当我在 Azure 模拟器上启动它们时，我必须将 HostnameComparsionMode 设置为 Exact 以便进行适当的 http 保留。然而，WCF 端点在 LB 和 HostnameComparsionMode = Exact 时表现异常（参见 guomingliwcf.blogspot.com/2009/08/wcf-load-balance-error-http-405-method.html）

有谁知道如何使用 Http 输入在 Azure 模拟器中测试 WorkerRoles 的任何解决方法？

我重现问题的解决方案： [https ://www.dropbox.com/s/378oaqotdp0axen/HttpRolesTest.zip](https://www.dropbox.com/s/378oaqotdp0axen/HttpRolesTest.zip)

**更新：** 我正在使用以下代码启动服务主机

```
 public override void Run()
      {
        // This is a sample worker implementation. Replace with your logic.
        Trace.WriteLine("WorkerRole entry point called", "Information");

        var endpoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints.First().Value;
        var ub = new UriBuilder();
        ub.Host = endpoint.IPEndpoint.Address.ToString();
        ub.Port = endpoint.IPEndpoint.Port;
        ub.Scheme = "http";
        ub.Path = "Service";
        var host = new ServiceHost(typeof (Service), ub.Uri);
        host.AddDefaultEndpoints();
        host.Description.Behaviors.Add(new ServiceMetadataBehavior() {HttpGetEnabled = true});
        host.Description.Behaviors.Add(new OverrideWCFAddressFilterServiceBehavior());
        foreach (var e in host.Description.Endpoints)
        {
            ((BasicHttpBinding)e.Binding).HostNameComparisonMode = HostNameComparisonMode.Exact;
        }
        host.Open();
        foreach(var e in host.Description.Endpoints)
        {
            Trace.WriteLine("Host listening on " + e.ListenUri.ToString());
        }
        while (true)
        {
            Thread.Sleep(10000);
            Trace.WriteLine("Working", "Information");
        }
    } 
```

根据 HostNameComparisonMode 我得到以下行为：

*   弱/强通配符：异常 System.ServiceModel.AddressAlreadyInUseException：HTTP 无法注册 URL [http://+](http://+)：
*   确切：通过负载均衡器访问 wsdl 时出现 405 MethodNotAllowed

**更新 2**

问题已由 Allen Chen 在 msdn 论坛上回答。

# jsf-2 - com.sun.faces.context.StateContext.startTrackViewModifications 处的 java.lang.NullPointerException（StateContext.java:172）

> ID：12686216
> 
> 赞同：1
> 
> 时间：2012-10-02T07:37:28.010
> 
> 标签：jsf-2, jboss, primefaces, spring-webflow

应用程序已成功部署，但是当我尝试访问我的第一页时，出现以下异常。

jsf 2.0 swf 2.0 primefaces 2.2.1 jboss as 7.1.1 final

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'startPage' of flow 'main'
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:583)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

root cause 

org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'startPage' of flow 'main'
    org.springframework.webflow.engine.impl.FlowExecutionImpl.wrap(FlowExecutionImpl.java:569)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:263)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:163)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

root cause 

java.lang.NullPointerException
    com.sun.faces.context.StateContext.startTrackViewModifications(StateContext.java:172)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:456)
    com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
    org.springframework.faces.webflow.FlowViewHandler.restoreFlowView(FlowViewHandler.java:128)
    org.springframework.faces.webflow.FlowViewHandler.restoreView(FlowViewHandler.java:75)
    org.springframework.faces.webflow.JsfViewFactory.getView(JsfViewFactory.java:93)
    org.springframework.webflow.engine.ViewState.resume(ViewState.java:193)
    org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:163)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

当我使用 jsf 2.1 时出现不同的异常

```
java.lang.UnsupportedOperationException
    at javax.faces.context.ExternalContext.encodePartialActionURL(ExternalContext.java:1909)
    at com.sun.faces.renderkit.html_basic.FormRenderer.encodeBegin(FormRenderer.java:170)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1777)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:594)
    at org.springframework.faces.webflow.JsfView.render(JsfView.java:88)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:282)
    at org.springframework.webflow.engine.ViewState.refresh(ViewState.java:241)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:219)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:163)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Thread.java:619) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:22:32.233

这可能是 Spring Webflow 的问题。我在 Oracle Weblogic 12 上使用 Spring Webflow 2.3.1 和 Mojarra 2.1.13 得到了同样的异常。

已经有一个[Jira 问题](https://jira.springsource.org/browse/SWF-1571)。

# javascript - 不同javascript文件的全局变量

> ID：12686217
> 
> 赞同：0
> 
> 时间：2012-10-02T07:37:32.090
> 
> 标签：javascript

我有一个 Web 应用程序，它有 2 个 html 页面（与 javascript 文件 js1.js、js2.js 相关的 html1、html2）当我单击 html1 上的按钮时，它将导航到 html2。我知道有办法使用 url 从 html1/js1/js 到 html2/js2.js 传输参数。

是否有一种机制可以设置 j1.js j2.js 都可以访问的变量？（就像 c 中的全局变量）

欢迎评论？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:39:51.240

这是不可能的，因为每个页面都使用自己的窗口对象命名空间加载。

ie js1.js 中的一个全局变量（在page1.html 中使用）实际上是page1 中window 对象的成员。类似地，page2.html 中的全局变量是该页面窗口对象的成员。这两个窗口对象在某种意义上是完全不同的，**没有站点范围的*窗口*或*站点*对象可以存储全局变量以供整个站点使用**

但是，您可以使用`window.localStorage`在站点中的页面之间共享变量/值。

**示例**：

设定值：

```
window.localStorage.setItem('myglobal', "hello"); 
```

获取价值：

```
var myglobal = window.localStorage.getItem('myglobal'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:42:11.810

变量和值可以通过查询字符串在页面中传递。看看这篇[SO 文章](https://stackoverflow.com/questions/9870512/obtaining-querystring-from-current-url-in-javascript)。

如果您严格需要创建一个 Javascript 全局变量，那么您必须在两个页面中包含一个公共代码段：

```
var myGlobalVar; 
```

但这仅代表两个脚本都可以访问的存储。无论如何，您必须设置它的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:43:44.957

一个骇人听闻的解决方案是将其存储到 window.name 字段中。这在浏览器的同一窗口/选项卡中共享。我个人不喜欢。该变量不应该以这种方式使用。

有库可以保持状态：[http ://pablotron.org/?cid=1557](http://pablotron.org/?cid=1557)

或者，您可以编写自己的代码将变量存储在会话（需要服务器端编程）、HTML5 存储、cookie 等中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:43:23.727

您可以解析`window.location.href`以提取参数，在一个页面中设置 cookie 并在另一个页面中检索它们（[此处示例](http://www.w3schools.com/js/js_cookies.asp)），这也需要解析或使用服务器端解决方案。

最有可能的是，如果您在互联网上寻找，您可以找到 URL 和 Cookie 的解析器。

# python - TypeError：“NoneType”对象不可迭代：smtplib

> ID：12686218
> 
> 赞同：0
> 
> 时间：2012-10-02T07:37:36.723
> 
> 标签：python, smtp, smtplib

```
 def sendmail(self, from_addr, to_addrs, msg='hello', mail_options=[],rcpt_options=[]):
            self.ehlo_or_helo_if_needed()
            esmtp_opts = []
            if self.does_esmtp:
                    # Hmmm? what's this? -ddm
                    # self.esmtp_features['7bit']=""
                    if self.has_extn('size'):
                                esmtp_opts.append("size=%d" % len(msg))
                    for option in mail_options:
                            esmtp_opts.append(option)

            (code, resp) = self.mail(from_addr, esmtp_opts)
            if code != 250:
                self.rset()
                #raise SMTPSenderRefused(code, resp, from_addr)
            senderrs = {}
            if isinstance(to_addrs, basestring):
                to_addrs = [to_addrs]
            for each in to_addrs:
                (code, resp) = self.rcpt(each, rcpt_options)
                if (code != 250) and (code != 251):
                    senderrs[each] = (code, resp)
            if len(senderrs) == len(to_addrs):
                # the server refused all our recipients
                self.rset()
                #raise SMTPRecipientsRefused(senderrs)
            (code, resp) = self.data(msg)
            if code != 250:
                self.rset()
                #raise SMTPDataError(code, resp)
            #if we got here then somebody got our mail
            return senderrs 
```

我正在尝试构建自己的 smtplib。我收到 TypeError: 'NoneType' object is not iterable when I try
(code, resp) = self.data(msg)

self.data() 定义为 - 我正在使用 self.data() 将消息发送到服务器。

```
 def data(self, msg):
            self.putcmd("data")
            (code, repl) = self.getreply()
            if self.debuglevel > 0:
                    print>>stderr, "data:", (code, repl)
            if code != 354:
                    #raise SMTPDataError(code, repl)
                    print "Err"
            else:
                    q = quotedata(msg)
                    if q[-2:] != CRLF:
                            q = q + CRLF
                    q = q + "." + CRLF
                    self.send(q)
                    (code, msg) = self.getreply()
                    if self.debuglevel > 0:
                            print>>stderr, "data:", (code, msg)
                    return (code, msg) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:54:23.250

我们无法从代码中看出您已经发布了`self.data()`正在做什么，但从您的错误中可以清楚地看出它正在返回`None`。如果你尝试解压 None，你会得到：

```
>>> (code, resp) = None
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not iterable 
```

发布代码`self.data()`可能会有所帮助。

*发布额外代码后更新：*

代码`(code, repl) = self.getreply()`也可以解包`None`[注意：在 ] 中有两个 this 实例`self.data()`。`self.data()`异常是 in还是 in引发`sendmail()`？

还

```
if code != 354:
            #raise SMTPDataError(code, repl)
            print "Err"
else:
    ... 
```

如果你得到代码 354，你已经注释掉了`raise`并且函数现在返回 None。这也可能是问题所在。

# c# - 当加载相同程序集的不同版本时，单例应该如何表现？

> ID：12686227
> 
> 赞同：0
> 
> 时间：2012-10-02T07:38:19.603
> 
> 标签：c#, .net

假设在名为 的程序集中有一个单例类`Common`。这个 DLL 由我的主应用程序使用，并且插件文件夹中的插件 DLL 可以使用不同的版本。

分布如下所示：

`\App.exe`

`\Common.dll (v1)`

`\Plugins\Plugin.dll`

`\Plugins\Common.dll (v2)`

因此，两者中的代码都`App`在`Plugin`使用该单例类。我面临一个难以追踪的错误，这让我认为有时单例类会丢失其所有属性值并开始表现得像一个新实例。从堆栈跟踪来看，这总是在插件 DLL 访问它时发生。

编辑：我刚刚发现了一些应用程序正在访问它的堆栈跟踪。所以取消上段的最后一行。

`App`和（不同的 VS 项目）都`Plugin`通过添加到各自`Common`DLL 版本的引用进行编译和链接。

编辑：在主 AppDomain 中`Plugin`使用加载。`Assembly.LoadFrom`

编辑：`Common`插件文件夹中的 DLL v2 也与`Plugin`DLL 一起动态加载，因为所有 DLL 都是从该文件夹加载的：

`foreach( string extensionFile in Directory.GetFiles( ExtensionsDirectory, "*.dll" ) )`

任何人都可以帮助发生什么事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:28:19.123

尽管有可能，但 Microsoft 建议*不要*加载同一 DLL 的两个版本：http: [//msdn.microsoft.com/en-us/library/dd153782.aspx#avoid_loading_multiple_versions](http://msdn.microsoft.com/en-us/library/dd153782.aspx#avoid_loading_multiple_versions)

# html - TinyMCE：从单词重新粘贴时清除编辑器内容

> ID：12686230
> 
> 赞同：1
> 
> 时间：2012-10-02T07:38:36.847
> 
> 标签：html, tinymce, textarea

我的 textarea 上有一个 tinyMCE 编辑器。我经常使用 word 中的粘贴按钮，当我从 word 中重新粘贴时，我想清除编辑器的内容。

你知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:01:12.360

我找到了解决方案。在初始化 tinyMCE 时，我对 paste_postprocess 进行了验证：

```
 paste_postprocess : function(pl, o) {
        // Content string containing the HTML from the clipboard
        tinyMCE.activeEditor.setContent('');
        return tinymce.dom.Event.cancel(pl);
        } 
```

# android - 防止“输入键”触发 TextWatcher

> ID：12686233
> 
> 赞同：6
> 
> 时间：2012-10-02T07:38:49.997
> 
> 标签：android, android-widget, android-edittext

我正在制作一个应用程序来充当远程键盘，用户将在其中单击编辑文本并键入，并在计算机中键入相应的字母。

我在 TextWatcher 的帮助下检测到各种字母和数字，并将它们成功发送到我的服务器。

当用户按下回车键时出现问题。这也会触发 TextWatcher 。由于我正在发送最新输入的更改，因此服务器端会出现错误。

作为一个解决方案，我所做的是，设置一个 onkeylistener，它将检测回车键并执行操作并**使用**它，但不幸的是，在这种情况下，第一个 textwatcher 也会被触发，然后是 onkeylistener。

这是我的 onkeylistener 的代码

```
 keyboard.setOnKeyListener(new OnKeyListener() {                 
  public boolean onKey(View v, int keyCode, KeyEvent event) {                   
    if(keyCode == KeyEvent.KEYCODE_ENTER&&event.getAction()==KeyEvent.ACTION_UP){  
                   out.println("enter");
                 return true;
              }
        return false;
            }
    }); 
```

TextWatcher 的代码：

```
 private TextWatcher watcher = new TextWatcher() {
public void onTextChanged(CharSequence s, int start, int before, int count)    {
        if(count>0){
        out.println(":"+s.subSequence(start, start+count).toString());
        }
    }
            .
            .
            . 
```

问题在于按下回车键会触发 TextWatcher 的 onTextChanged 以及 onkeylistener。而我只想在关键听众上开火。我只想在字母、数字、某些符号等情况下触发 Textwatcher。

此外，如果您可以建议不同的方法来检测和发送字符（软），那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:18:10.153

好的，我想我解决了。在 Textwatcher 中添加这个 if 语句：

```
if(s.toString().substring(start).contains("\n")) 
```

这样，如果输入的最后一个键是“输入”，那么它会进入这个状态，然后你可以执行任何你想要的。

# css - 使用较大图像的 CSS 背景图像破解 (CSS Sprites)

> ID：12686239
> 
> 赞同：0
> 
> 时间：2012-10-02T07:39:06.457
> 
> 标签：css, background-image

浏览器如何智能地实现“css 背景图像黑客”，这种技术在记忆方面是否适用于更大的图像？

这个例子可以是这个页面（看例如加号图标）：
[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

加号图标并不是真正的 16x16px 图像，它更大（469px x 159px），实际上是这个 ： [http](http://blueimp.github.com/cdn/img/glyphicons-halflings.png)
://blueimp.github.com/cdn/img/glyphicons-halflings.png （或者这个：[http://blueimp .github.com/cdn/img/glyphicons-halflings-white.png](http://blueimp.github.com/cdn/img/glyphicons-halflings-white.png) )

此图像用作图标模板，其中包含所有图标，并且在 css ( [http://blueimp.github.com/cdn/css/bootstrap.min.css](http://blueimp.github.com/cdn/css/bootstrap.min.css) ) 中调整背景图像位置以仅显示特定区域这样的图标模板：
`.icon-plus{background-position:-408px -96px;}`

如果图标更大怎么办，例如。大小为 150 像素 x 150 像素的缩略图和图标模板由 500 个图像组成？然后图标模板为 37500 像素 x 37500 像素。浏览器可以以合理的方式处理这个问题，还是一次加载一个缩略图更好，每个都在它自己的 http 进程中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:45:12.057

这种技术称为**CSS Sprites**，它用于减少您的 http 请求，因此您的页面加载速度更快。

解释 ：

网站中使用的所有图像都放置在一个画布上，并且每个图像都使用`background-position`属性进行映射，这样，http请求就会减少，从而使您的网页加载速度更快。

> 例如，您有 10 个`<img>`标签调用 10 个不同的图像，因此浏览器需要 10 次请求 10 个不同的图像，从而增加 http 请求，如果所有这些图像都放在一个画布/图像（主要是透明的 png）上并且它刚刚加载一次，CSS 处理其余的..

当您在悬停按钮或其他东西时使用图像时，这非常有用，因为它已经加载，您在悬停时不会看到轻弹......

[**更多参考**](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:34:00.697

我进一步研究了这一点，并且需要这种名为 CSS sprites 的 hack（以及其他 hacky 优化：data-urls 中的 base64 图像，CSS/Javascript 连接），因为 HTTP 1.1 使所有调用同步（[源代码](http://www.slideshare.net/bjarlestam/spdy-11723049)）。

目前（2012 年 10 月）这些类似 hack 可能适用于每页有数百个 HTTP 调用的大型网站，但[HTTP 2.0 将](http://trac.tools.ietf.org/wg/httpbis/trac/wiki/Http2CfI)在几年内推出（我假设）以支持更好的技术（例如异步调用）并希望这些不必要的黑客攻击。

hack 的问题是降低了可维护性，当 HTTP 2.0 最终出现时，可能需要删除所有 hack 以恢复适当的可维护性和/或充分受益于 HTTP 2.0 的优势（[如果有的话](https://www.varnish-cache.org/docs/trunk/phk/http20.html)）。在等待 HTTP 2.0 时，请考虑例如。SPDY（根据[最近的新闻](http://www.networkworld.com/news/2012/100312-ietf-starts-work-on-next-generation-263000.html)，这可能是 HTTP 2.0 的基础，但首先要仔细检查其他服务器模块是否不会干扰 SPDY，并遵循浏览器对 spdy 的支持如何增加（如果它增加的话）。或者如果您的站点只有很少或数十个 http 调用，请仔细考虑这些 hack 是否有足够的好处来弥补降低的可维护性。

# delphi - Delphi：我们可以在运行时或设计时使用元类引用来访问属性吗？

> ID：12686240
> 
> 赞同：2
> 
> 时间：2012-10-02T07:39:06.333
> 
> 标签：delphi

问题源于需要为不同类型的对象重用代码。

*   设想：

从不同的列表框或相同的列表框中拖放列表框。
当我尝试在同一个控件中实现拖放时，就会出现上述问题。
用户可以通过向上或向下拖动来重新排列列表框中的项目。
我已经写了逻辑，它有效。
问题是，在我的应用程序中，我根据要求使用了不同类型的列表框。
所以他们的类型会改变。为了使用相同的代码进行拖放，
当源和发送者相同时，我将不同的列表框类型转换为共同的祖先 TCustomListBox
，然后将其发送到执行项目移动的函数。
该函数将项目集合中的项目交换到它们的新位置。

*   现在特殊情况：

    我使用了一个复选框，其中有一个与每个项目关联的复选框。
    碰巧的是，每个项目都有一个关联的检查状态对象。
    现在在函数中，为了移动项目，我使用 tstringlist 临时存储项目
    及其对象，然后将它们从控件中删除，然后将它们重新插入控件中。
    但是在这个复选框的情况下，当我删除一个项目时，该项目被删除，
    但其对应的 checkstate 对象仍然存在，并且它与下一个项目相关联，
    这是不需要的。
    所以现在我正在使用一个 int 变量作为正常
    和特殊拖放的模式指示器。
    当它很特殊时，例如在 checklistbox 的情况下，我将其类型转换为 tchecklist 和
    然后访问它的删除方法，该方法删除项目及其检查状态。

    因此，我没有使用 int 作为模式，而是想知道
    是否可以使用所有列表框的基类的类引用，
    然后如果需要，我如何访问特定列表框类型的属性。
    上述解决方案不是最佳的，这就是为什么，我需要一个更通用和正确的方法。看看你能不能帮忙。谢谢。感谢您的建议，我很关心这个社区，我不习惯编辑功能。对不起。

**我正在使用delphi 6。**
函数的声明如下：-
DragDropItemsInListBox(p_HostIndex : Integer; p_HostListBox : TCustomListBox;
p_Mode:Integer);

call:-
hostindex 为放置站点索引，hostlistbox 为要放置项目的控件，
本例中源控件和目的控件相同，
mode 表示删除方式。
DragDropItemsInListBox(3,TCustomListBox(Source), 1);

如果模式为 0，那么我通常删除项目，如下所示：-
p_HostListBox.items.delete(i);

如果是1，表示特殊处理，
在这种情况下我知道该怎么做，因此我使用，

如果 p_Mode = 1 那么
(p_HostListBox as TRzCheckList).items.delete(i);

这将删除该项目以及 checkstate 对象。
但我不想依赖这种基于 int 的差异化。
我可以使用元类吗？如果我通常调用 items.delete，
那么它将适用于该特定类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:45:03.853

> 因此我使用，如果 p_Mode = 1 then (p_HostListBox as TRzCheckList).items.delete(i);
> 
> 这将删除该项目以及 checkstate 对象。但我不想依赖这种基于 int 的差异化。我可以使用元类吗？如果我通常调用 items.delete，那么它将适用于该特定类型吗？

您不能使用元类变量 - 元类指针对于该类型的所有对象都是相同的。如果 Delphi 允许这样做 - 将无法知道要从哪个清单中删除。

然而，使用 int 确实是一个糟糕的解决方案。

```
if p_HostListBox is TRzCheckList 
   then TRzCheckList(p_HostListBox).items.delete(i); 
```

> 旁注：在 Component Pascal 中会有更多的糖：IS 暗示 AS 那里：如果 p_HostListBox 是 TRzCheckList 则 p_HostListBox.items.delete(i);

阅读有关 RzChkLst.TRzCheckList.Items 的帮助可能是更好的方法 - 这是 TStrings 类型的属性。

修改声明

```
procedure DragDropItemsInListBox(p_HostIndex : Integer; p_HostListBox : TCustomListBox; p_Items : TStrings); 
```

将其称为 DragDropItemsInListBox(0, RzCheckList1, RzCheckList1.Items);

在程序中做

```
p_Items.Delete(i); 
```

# themes - 在自托管的 WordPress 上，将 Add This 中的 Share 图标水平对齐而不是垂直对齐

> ID：12686242
> 
> 赞同：2
> 
> 时间：2012-10-02T06:36:46.683
> 
> 标签：themes, wordpress

我有一个问题花了我好几天才弄清楚。

我从[AddThis](http://www.addthis.com/)网站获得的社交关注图标是垂直显示的，而不是水平显示的。我想让它水平显示，但我发现这是不可能的。

以下是我从[https://www.addthis.com/get/follow获得的代码](https://www.addthis.com/get/follow)

```
<!-- AddThis Follow BEGIN -->
<p>Follow Us</p>
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook_follow" addthis:userid="TheMostafaAbedi"></a>
<a class="addthis_button_twitter_follow" addthis:userid="theMostafaAbedi"></a>
<a class="addthis_button_google_follow" addthis:userid="106914586115617584077"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-506a607f490b6601"></script>
<!-- AddThis Follow END --> 
```

出现问题的具体页面是[http://www.under-review.com/about](http://www.under-review.com/about)在 Mostafa Abedi 描述下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:57:56.743

代码行之间有换行符，这使得图标一个接一个。您很可能使用 WordPress 编辑器插入代码，这会改变格式。

如果您使用的是可视化编辑器，请切换到 HTML 编辑器并试一试。如果您使用 HTML 编辑器，至少删除项目之间的所有间距，使它们放在一行中，这将禁止 WordPress 输入新行，即：

```
<a class="addthis_button_facebook_follow" addthis:userid="TheMostafaAbedi"></a><a class="addthis_button_twitter_follow" addthis:userid="theMostafaAbedi"></a><a class="addthis_button_google_follow" addthis:userid="106914586115617584077"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:36:59.663

根据我的经验，大约 90% 的格式问题都可以通过好的代码解决，而且我通常遵循 W3C。我建议您对此进行验证，因为目前它失败了（HTML 和 CSS 都失败了）

[http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Funder-review.com%2Fabout%2F](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Funder-review.com%2Fabout%2F)

[http://jigsaw.w3.org/css-validator/validator?profile=css21&warning=0&uri=http%3A%2F%2Funder-review.com%2Fabout%2F](http://jigsaw.w3.org/css-validator/validator?profile=css21&warning=0&uri=http%3A%2F%2Funder-review.com%2Fabout%2F)

# java - c代码可以引发java异常吗？

> ID：12686244
> 
> 赞同：5
> 
> 时间：2012-10-02T07:39:33.887
> 
> 标签：java, c, exception, native

> **可能重复：**
> [在 JNI 代码中抛出异常的最佳方法？](https://stackoverflow.com/questions/230689/best-way-to-throw-exceptions-in-jni-code)

我看到[System#arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)可能会抛出`ArrayStoreException`等等`IndexOutOfBoundsException`。
但我也看到[System#arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)是一个使用`native`方法，这意味着`C`代码，对吧？
那么`C`代码怎么可能抛出这些`java`异常呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:04:25.167

从本机代码抛出 java 异常没有问题。您可以使用以下代码轻松完成此操作：

```
jclass cls = env->FindClass("java/lang/ArrayStoreException");
env->ThrowNew(cls, message); 
```

# svg - Safari 6 svg 标签使用问题

> ID：12686247
> 
> 赞同：6
> 
> 时间：2012-10-02T07:39:38.733
> 
> 标签：svg, safari, safari6

链接：http: [//jsfiddle.net/xkpeD/](http://jsfiddle.net/xkpeD/)

要不就

```
<svg width="300px" height="300px" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">
  <circle cx="50" cy="50" r="20" fill="pink" fill-opacity="0.5"/>
  <use xlink:href="#:example" x="20" y="20"/>
  <defs>
    <circle id=":example" cx="50" cy="50" r="20" fill="pink" fill-opacity="0.5"/>
  </defs>
</svg>​ 
```

它在所有浏览器（IE9、Chrome、Firefox、Safari 5.1）中都显示正常，但在新的 Safari 6 中仅呈现 1 个圆圈。似乎所有 <use> 标签都没有在 Safari 6 中呈现。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-19T18:37:35.773

我有同样的问题，OP。我通过两个步骤解决了它

1.  将 the`<use>`和 the`<defs>`分成 2 个不同`<svg>`的 （不确定这一步是否必要，也因为其他原因不得不这样做）。旁注，如果一个`<svg>`only has `<defs>`，您可以使用`style="display: none;"`它使其不在布局中占用空间。

2.  在我的 HTML 中移动了`<svg>`包含`<defs>`ABOVE 的内容`<svg>`。`<use>`这一步至关重要。

希望这可以帮助。截至今天，12/19/14 是 Safari 7.1.2 版的必需和工作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-30T17:31:55.920

sam.kozin 的回答对我有用。只是为了让这个答案实际上具有可见性。

将 <use ... /> 替换为 <use ...></use>

所以：

```
<svg width="300px" height="300px" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">
  <circle cx="50" cy="50" r="20" fill="pink" fill-opacity="0.5"/>
  <use xlink:href="#:example" x="20" y="20"></use>
  <defs>
    <circle id=":example" cx="50" cy="50" r="20" fill="pink" fill-opacity="0.5"/>
  </defs>
</svg>​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-19T17:08:59.357

我使用`<use href="">`的是在 Firefox / Chrome 中没有问题的渲染，但在 Safari 中没有。所以我不得不改变`<use xlink:href="">`，这解决了我在 Safari 中的渲染问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:13:25.187

检查您是否使用正确的 http 内容类型标头并将您的文档作为有效的 XML 提供。[此类似问题](https://stackoverflow.com/questions/6117380/doctype-problem-displaying-svg-with-safari)中的更多信息。

# vector - 确定点列表是否适合“编队”？

> ID：12686248
> 
> 赞同：2
> 
> 时间：2012-10-02T07:39:39.157
> 
> 标签：vector, geometry, 2d, linear-algebra, trigonometry

作为输入，我有一个任意的“格式”，它是一个矩形列表*F*：

![形成](../Images/44c30250cef18625a27ed5334cdbb54d.png)

作为另一个输入，二维点的无序列表*P*：

![输入](../Images/15548d3c66052160622fa23b9db15807.png)

在这个例子中，我认为*P*与*F**匹配*，因为如果*P*逆时针旋转 45°，则*F*中的每个矩形都将通过包含一个点来满足。*如果P*中有一个不属于矩形的无关点，它也将被视为匹配。

 ***编队和输入点都没有任何特定的起源，两者之间的比例也不需要相同，例如编队可以描述一公里的面积，输入点可以描述一厘米的面积. 最后，我需要知道*哪个*点最终出现在编队的*哪个节点中。*

我正在尝试开发一种满足所有这些约束的通用算法。它将每秒针对大型位置信息数据库执行数百万次，因此我试图尽快“失败”。

我考虑过获取两个输入中所有点之间的角度并比较它们，或者计算和比较船体，但是每种方法似乎都因其中一个约束而分崩离析。

地层中的点也可以很容易地表示为具有 x,y 原点和公差半径的圆，这似乎简化了我迄今为止尝试过的方法。我会很感激任何可靠的攻击计划或*啊哈！*见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:24:16.837

我有另一个想法——这次使用极坐标。

描述变得复杂/模棱两可，所以[这里](http://pastebin.com/WdXZnsUp)有一些代码希望能说明这个想法。

要点是用极坐标来表达阵型和点，原点在阵型/点集的中心。然后，找到点和地层之间变换的旋转和缩放因子变得容易得多。通过比较点集和形成区域集的平均值，可以很容易地找到平移分量。

请注意，这种方法不会将您的编队区域视为正方形或圆形，而是将其视为圆段的一部分。希望这是一个你可以忍受的软糖。

它也不会返回有效映射变换的精确缩放和旋转项。它将为*您*提供形成区域和点之间的映射，以及最终旋转和缩放因子的良好近似值。这种近似可以通过一个简单的松弛方案很快地细化为一个有效的解决方案。它还将迅速忽略无效的点集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:28:11.360

一种方法是在相对坐标系中表达点集和结构。

对于每个点集和阵型：

1.  识别最相距的一对点，称它们为 A 和 B
2.  通过 A 和 B 确定离线最远的点，将其称为 C。确保 C 位于 AB 线的左侧 - 您可能需要交换 A 和 B 才能做到这一点。
3.  用 A、B 和 C 表示其余的点。这是一个简单的问题，即在通过 AB 的线上为每个点找到最近的点 D，然后缩放以使所有距离都以 A 和 C 之间的距离表示B. A 到 D 的距离是你的相对 x 坐标，D 到该点的距离是 y。

例如，如果您发现 A 和 B 相距十个单位，而 C 距离 AB 的中点 5 个单位，则相对坐标将为： A: (0,0) B: (1,0) C : (0.5,0.5)

然后，您可以独立于全局坐标系比较点集和地层。请注意，找到匹配项的距离容差也必须根据 AB 进行缩放。

我可以很容易地想象这种方法的问题形成，其中 A、B 和 C 的选择很难明确地做出，但这是一个开始。***

# php - 使用 php 使用数组读取文件匹配行

> ID：12686258
> 
> 赞同：0
> 
> 时间：2012-10-02T07:40:31.013
> 
> 标签：php

我希望能够读取纯文本文件并匹配多行，而无需多次迭代文本文件。我正在传入一个包含我想要匹配的字符串列表的数组，理想情况下，我想将其放入一个数组中。

我可以使用下面的代码实现预期的结果，但它需要多次读取文本文件。

```
function readFile($line){
  $contents = file("test.txt");

  if(preg_match("/$line*/i", $val)){
    return($val);
  }
} 
```

理想情况下，我想做以下事情：

```
// pass an array to the funciton which will parse the file once and match on the elements defined.
$v = readFile(array("test_1", "test_2", "test_2", "test_3"));

// return an array with the matched elements from the search.
print_r($v); 
```

任何帮助将非常感激。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:54:23.823

```
$val = array();
foreach ($contents as $file) {
   foreach ($line as $l) {
      if (stristr($file, $l)) {
         $val[] = $file;
         break; // Don't need to check the other $line values
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:46:16.800

```
$val = array();
foreach ($contents as $file) {
   foreach ($line as $l) {
      if (stristr($file, $l) {
         $val[] = $file;
      }
   }
} 
```

即使你想坚持使用`preg_match`，“*”也是不必要的。

# doctrine - Doctrine：有什么方法可以从 PDOstatement 对象创建一个 Doctrine_Query 对象？

> ID：12686264
> 
> 赞同：1
> 
> 时间：2012-10-02T07:40:49.607
> 
> 标签：doctrine, doctrine-1.2

有什么方法可以从 PDOstatement 对象创建一个 Doctrine_Query 对象？

我需要将查询传递给 DoctrinePager 对象。

```
 $pdo = Doctrine_Manager::getInstance()->getCurrentConnection()->getDbh();

   $sql = 'select * from organo_gestor'; //this raw sql will have a union

   $stmt = $pdo->prepare($sql); 
```

教义 1.2.4。

# search - 在行排序的两个昏暗数组中搜索整数，有没有更好的方法？

> ID：12686266
> 
> 赞同：1
> 
> 时间：2012-10-02T07:40:56.660
> 
> 标签：search, coding-style

我最近遇到了这个问题，你必须从一个有序的二维数组中找到一个整数。但是这两个暗淡数组是按行而不是按列排序的。我已经解决了这个问题，但仍然认为可能有更好的方法。所以特地来这里和大家讨论一下。您的建议和改进将帮助我在编码方面成长。这是代码

```
int searchInteger = Int32.Parse(Console.ReadLine());
      int cnt = 0;
        for (int i = 0; i < x; i++)
        {
           if (intarry[i, 0] <= searchInteger && intarry[i,y-1] >= searchInteger)
           {
               if (intarry[i, 0] == searchInteger || intarry[i, y - 1] == searchInteger)
                  Console.WriteLine("string present {0} times" , ++cnt);
                  else
                  {
                      int[] array = new int[y];
                      int y1 = 0;
                      for (int k = 0; k < y; k++)
                      array[k] = intarry[i, y1++];
                      bool result;

                        if (result = binarySearch(array, searchInteger) == true)
                       {
                        Console.WriteLine("string present inside {0} times", ++ cnt);
                        Console.ReadLine();
                       }
                 }
           }

       } 
```

其中 searchInteger 是我们必须在数组中找到的整数。并且二进制搜索是返回布尔值的方法，如果值存在于一维数组中（在该单行中）。

请帮忙，它是最佳的还是有比这更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:57:17.967

前提是您已经声明了数组`intarry`，如下所示：`x``y`

```
int[,] intarry =
{
    {0,7,2},
    {3,4,5},
    {6,7,8}
};
var y = intarry.GetUpperBound(0)+1;
var x = intarry.GetUpperBound(1)+1; 
// intarry.Dump(); 
```

你可以保持简单：

```
int searchInteger = Int32.Parse(Console.ReadLine());

var cnt=0;
for(var r=0; r<y; r++)
{
    for(var c=0; c<x; c++)
    {
        if (intarry[r, c].Equals(searchInteger)) 
        {
            cnt++;
            Console.WriteLine(
                "string present at position [{0},{1}]" , r, c);         
        } // if
    } // for
} // for
Console.WriteLine("string present {0} times" , cnt); 
```

此示例假定您不知道数组是否已排序（这意味着：如果您不知道它是否已排序，则必须遍历每个元素并且不能使用二进制搜索）。如果您更了解数组中数据的结构，则可以基于此示例改进性能：

*   如果行按升序排序，则可以通过二进制搜索替换内部 for 循环
*   如果整个数组按升序排序并且数据不重复，例如

    > int[,] intarry = {{0,1,2}, {3,4,5}, {6,7,8}};

    然后您可以在找到该项目后立即退出循环。最简单的方法是创建一个函数并将 return 语句添加到内部 for 循环。

# c++ - 浮点运算优化导致 Visual C++ 出现罕见和奇怪的行为

> ID：12686271
> 
> 赞同：3
> 
> 时间：2012-10-02T07:41:06.440
> 
> 标签：c++, visual-c++, optimization

我正在用 C++ 编写并用 Visual C++ 2008 编译的例程中执行几个浮点运算。我还激活了优化 (/O2)。

C++ 中的代码大致如下所示：

```
int Calculate( CalculationParams &params )
{
    const ConfigurationParams& configParams = ConfigReader::Instance().Parameters();

    float m1 = configParams.p1 * configParams.p2;
    float m2 = configParams.p3 * configParams.p4;
    float m3 = configParams.p5 * configParams.p6;

    ....
} 
```

ConfigReader 是一个单例，其中包含用于计算的参数结构。这意味着由 configParams 引用来引用。

激活优化后，在极少数情况下我会得到完全不正确的结果的计算错误。

看着反汇编我看到了这个：

```
int Calculate( CalculationParams &params )
{
    ...
    const ConfigurationParams& configParams = ConfigReader::Instance().Parameters();
        call ConfigReader::Instance()
        move ebx, eax

    float m1 = configParams.p1 * configParams.p2;
        fld dword ptr[ebx + 0D4h]
        add ebx, 8
        fmul dword ptr [ebx + 0ECh]
    float m2 = configParams.p3 * configParams.p2;
    float m3 = configParams.p4 * configParams.p2;
    ...
} 
```

首先，我们看到它没有调用Parameters()。这是可以理解的，因为参数结构位于类中，8 个字节（在另外两个浮点数之后）。因此，在调用之后，eax 具有 ConfigReader CLASS（而不是 ConfigurationParams 结构）的地址。

然后它会尝试加载一个浮点数。这就是问题发生的地方。由于某种原因，加载操作的偏移量对于指向 ConfigReader 类的 ebx 是不正确的。它应该首先添加 8 以使偏移量正确。

编译器是否有可能假定 fld 操作将比 add 操作花费更长的时间，并且在从内存加载浮点数之前，ebx 会以某种方式添加 8？这能行吗？我们偶尔出现的问题是否源于此时发生的中断并导致 ebx 在加载浮点数时没有偏移量 8？

我希望这是正确的唯一方法是将添加操作放在 fld 之前。很难理解这完全有效......

有什么办法可以关闭这种重排优化？

编辑： ConfigReader 看起来像这样

```
class ConfigReader
{
public:
    static ConfigReader& Instance();

    const ConfigurationParams& Parameters() const { return myParameters; }

private:
    ConfigReader();

    float internalParam1;
    float internalParam2;

    ConfigurationParams myParameters;
}

struct ConfigurationParams
{
    char s1[10];
    char s2[50];
    int i1;
    int i2;
    int i3;
    int i4;
    int i5;
    int i6;
    int i7;
    int i8;
    int i9;
    int i10;
    int i11;
    int i12;
    int i13;
    int i14;
    int i15;
    int i16;
    int i17;
    int i18;
    int i19;
    int i20;
    int i21;
    int i22;
    int i23;

    float f1;
    float f2;

    int i25;
    int i26;

    int i27;
    int i28;
    int i29;

    int i30;
    int i31;

    bool b1;

    float f3;
    float f4;
    float f5;
    float p1;
    float p3;
    float p4;
    float f9;
    float f10;
    float f11;
    float f12;
    float p2;
    float f14;
    float f15;
    float f16;

    int i32;

    int i33;
    int i34;
    int i35; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:04:42.953

实际上，`fld`看起来对我来说是正确的。`fmul`看起来它采用了错误的值。生成的代码正在执行：

```
float m1 = configParams.p1 * configParams.f14; 
```

鉴于您正在使用优化编译它，并且您没有发布完整的代码，您确定它只是没有相对于您的代码乱序吗？或者，您确定`struct`定义是正确的吗？您似乎已将其匿名化并缩写，从而使发布的代码与您实际看到的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:40:48.840

我简直不敢相信编译器生成的变量地址中存在错误。这并非不可能，但非常罕见。这必须首先排除，但看起来我们并没有提供所有相关代码来对此做出判断。

然而，最有可能发生的是编译器正在执行以下一项或两项操作：

1.  在进行激进的浮点优化时，它会[重新排序浮点运算](http://msdn.microsoft.com/en-us/library/aa289157%28v=vs.71%29.aspx)
2.  它[使一些计算以扩展的精度发生](http://msdn.microsoft.com/en-us/library/e7s85ffb%28v=vs.90%29.aspx)

(1) 的结果是，尽管从数学的角度来看优化是正确的，但数学公理在精度有限的计算中不再起作用，这就是为什么任意（编译器一时兴起）重新排序会导致结果与您可能的结果不同完全期望或相对于同一代码的未优化版本中的结果。

铁的事实是，在大多数计算机中，浮点运算是这样工作的：

(a+b)+c ≠ a+(b+c)
(a*b)*c ≠ a*(b*c)
(a+b)*c ≠ (a*c)+(b*c)
.. . 等等（参见 Knuth 的 TAOCP 或已经提到的[Microsoft Visual C++ Floating-Point Optimization](http://msdn.microsoft.com/en-us/library/aa289157%28v=vs.71%29.aspx)）。

因此，浮点运算的重新排序通常不利于一致性。

根据 C 标准允许的 (2) 的结果是，您可以在经过不同优化的代码中获得具有不同精度的中间结果。最终结果也应该有所不同。

我要做的是首先尝试[`/fp:strict`](http://msdn.microsoft.com/en-us/library/e7s85ffb%28v=vs.90%29.aspx)，如果`/fp:precise`正在使用（这是默认设置）。`/fp:fast`当然，如果你需要一致性，你不想要。

# javascript - jQuery/JavaScript 从路径文件中读取图像/文件

> ID：12686272
> 
> 赞同：1
> 
> 时间：2012-10-02T07:41:08.807
> 
> 标签：javascript, jquery, image, html, blob

我有一个参考如何从文件中加载图像：

[http://jsfiddle.net/eD2Ez/31/](http://jsfiddle.net/eD2Ez/31/)

但我不知道如何通过输入或提供包含路径文件的字符串参数来手动加载图像（例如 C:\myImage\img12.jpg）

在链接中，图像是直接从文件对话框加载的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:40:25.143

事实上，据我所知，由于安全策略的原因，目前还没有既定的甚至是鲜为人知的方式来以编程方式加载本地文件。

除此之外，您可能希望使用`onload`处理程序`img`来确保在画布上绘制图像时加载图像。目前，在某些图像太大或计算机速度慢的情况下，您可能无法渲染图像。

检查演示：http: [//jsfiddle.net/eD2Ez/38/](http://jsfiddle.net/eD2Ez/38/)

**实验/未来**

然而，地平线上可能会有曙光。有一个叫做 FileSystem API 的东西在工作中，但对我不起作用（尽管它应该）。

首先，文件系统 API[目前](http://caniuse.com/#feat=filesystem)是在 Chrome 21+ 版本的供应商前缀下实现的。

`--allow-file-access-from-files`您还必须在启动 Chrome 时使用该标志。

但是即使有了这一切，我仍然没有设法在 Chrome v21 上实现它并且仍然得到`SECURITY_ERR`.

检查“演示”：http: [//jsfiddle.net/MQFGd/2/](http://jsfiddle.net/MQFGd/2/)

*资料来源：*

*   [MDN 文件系统 API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)
*   [W3C 文件系统 API](http://dev.w3.org/2009/dap/file-system/pub/FileSystem/)
*   [文件系统 API 教程](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:44:57.250

```
 $('<img src="'+img.src+'"/>').insertAfter('#cvs'); 
```

这是演示[http://jsfiddle.net/eD2Ez/32/](http://jsfiddle.net/eD2Ez/32/)

# iphone - 如何渲染旋转的 UIlabel

> ID：12686274
> 
> 赞同：0
> 
> 时间：2012-10-02T07:41:14.843
> 
> 标签：iphone, ios, uilabel, transform, render

我目前正在为 iPad 开发像 photoshop 这样的应用程序，当我想要展平我的图层数组时，DrawTextInRect 不会保留`CAAffineTransformMakeRotation`我的`UILabel`. 有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:04:13.027

将您的文本绘制到另一个上下文中并获取它的 CGImage，然后查看在旋转的上下文中绘制图像是否有效（应该）。

编辑：我自己没有这样做，我相信它会起作用。执行此操作时，标签可能不应该插入到视图中，但无论如何它可能会以这种方式工作。您可能需要尝试：

```
UIGraphicsBeginImageContextWithOptions( myLabel.bounds.size, NO, 0); // 0 == [UIScreen mainScreen].scale
CGContextRef context = UIGraphicsGetCurrentContext();

[myLabel.layer renderInContext:context];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T13:38:32.560

将上下文转换为标签的原点，然后将标签的变换应用于上下文。

下面的代码是用 Swift 编写的。

```
let context = UIGraphicsGetCurrentContext()!

context.saveGState()

let t = myLabel.transform
let translationPt = CGPoint.init(x: myLabel.frame.origin.x, y: myLabel.frame.origin.y)
context.translateBy(x: translationPt.x, y: translationPt.y)

context.concatenate(t)

myLabel.layer.render(in: context)

context.restoreGState() 
```

# php - Amazon S3 云架构

> ID：12686276
> 
> 赞同：1
> 
> 时间：2012-10-02T07:41:31.060
> 
> 标签：php, amazon-s3, naming-conventions, cloud, storage

我正在编写一个应用程序，让您可以在云中共享文件。您创建一个用户帐户，可以上传您的文件并将链接发送给朋友。

我正在使用 Amazon S3 来保存数据。但我不确定我应该如何进行。

您可以在 S3 中创建存储桶，并在这些存储桶中保存文件。我想过为每个用户制作一个桶，但后来我读到你一次只能有 100 个桶。

难道没有更好的方法来管理它，然后将所有用户文件保存在一个“目录”中。这会变得如此混乱。我以前从未使用过 S3，我将非常感谢任何建议。如果这是唯一的方法，那么哪种命名约定被证明是最好的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:43:18.073

尽管 S3 在存储桶中具有扁平结构，但每个对象都有自己的路径，就像您习惯的目录一样。

因此，您可以像这样构建路径：

```
/<user-id>/<album-1>/... 
```

要记住的一件事是，并非所有与目录相关的功能都可用，例如：

*   拒绝访问`/<user-123>/*`,
*   从一个目录复制到另一个目录。

# iphone - iOS 6 - Facebook 共享过程失败，并出现错误“代理的应用程序尚未安装”

> ID：12686277
> 
> 赞同：23
> 
> 时间：2012-10-02T07:41:30.983
> 
> 标签：iphone, objective-c, facebook, ios6

虽然，有这样一个问题[Facebook 错误 (7) iOS 6](https://stackoverflow.com/questions/12498972/facebook-error-7-ios-6)它已经关闭，没有任何答案！在获得对用户的 facebook 帐户的访问权限时，我遇到了一个错误： `error is: Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: The proxied app is not already installed." UserInfo=0xa260270 {NSLocalizedDescription=The Facebook server could not fulfill this access request: The proxied app is not already installed.}`

我正在执行这样的请求：

```
self.statusLabel.text = @"Waiting for authorization...";
if (self.accountStore == nil) {
    self.accountStore = [[ACAccountStore alloc] init];
}   
ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSDictionary * dict = @{ACFacebookAppIdKey : FB_APP_ID, ACFacebookAudienceKey : ACFacebookAudienceEveryone};
[self.accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
    __block NSString * statusText = nil;
    if (granted) {
        statusText = @"Logged in";
        NSArray * accounts = [self.accountStore accountsWithAccountType:facebookAccountType];
        self.facebookAccount = [accounts lastObject];
        NSLog(@"account is: %@", self.facebookAccount);
        self.statusLabel.text = statusText;
        [self postToFeed];
    }
    else {
        self.statusLabel.text = @"Login failed";
        NSLog(@"error is: %@", error);
    }
}]; 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T07:55:11.527

我已经解决了这个问题！那是因为我没有传递权限数组！尽管`ACAccountStore`该类声明此参数是可选的，但它不是！ ![在此处输入图像描述](../Images/8c420468a11500873ea31f19265f345f.png)

更多的应用程序可以启动并要求基本权限（因为它是暗示的）！

![在此处输入图像描述](../Images/0d8f231e5f0194e6bf7ee1b3c1dc9363.png)

因此，您必须始终传递一个权限数组。

这里还描述了账户商店返回的错误代码：

```
typedef enum ACErrorCode {
   ACErrorUnknown = 1,
   ACErrorAccountMissingRequiredProperty,
   ACErrorAccountAuthenticationFailed,
   ACErrorAccountTypeInvalid,
   ACErrorAccountAlreadyExists,
   ACErrorAccountNotFound,
   ACErrorPermissionDenied,
   ACErrorAccessInfoInvalid
} ACErrorCode; 
```

（我已经到`ACErrorPermissionDenied`了）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T13:24:28.480

我们遇到了同样的问题，在仔细查看了 iOS facebook 文档广告之后

[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

我注意到以下段落：

> 请注意，要使用 iOS 6 原生身份验证，应用程序需要更改它们向用户请求权限的方式 - 应用程序必须将它们对读取和写入权限的请求分开。

我一定已经读了好几遍了，但它包含了解决方案：

如果要授予写入权限（发布访问权限），则必须多次请求访问权限。所以现在我们首先要求“电子邮件”获得阅读许可，然后要求“publish_action”能够发布到时间线。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-12T03:51:37.017

错误消息不清楚，因为“应用程序”可能是您的 iOS 应用程序？手机上的 Facebook.app？脸书应用？“代理应用程序”是 Facebook 应用程序，“尚未安装”意味着它尚未与在线 Facebook 用户在权限方面相关联。

当您的 Facebook 应用程序第一次连接到用户 Facebook 帐户时，您必须`ACFacebookPermissionsKey`在选项字典的键中指定基本信息值。其他 Facebook SDK 的过去和现在，例如 Javascript 或 PHP 库，默认提供基本信息作为密钥，因此您不必这样做。似乎 iOS 中的本机集成并没有这样做，因此，如果当用户第一次将您的应用程序连接到他们的 Facebook 帐户而没有提供任何权限时，您会收到此错误。

在您获得访问权限后，即用户在其在线隐私设置中连接到应用程序后，`ACFacebookPermissionsKey`就像 Apple 文档一样，成为可选的。

当您开始尝试使用本机 Facebook 集成时，这一切都有些令人困惑……

使用本机 Facebook 集成，您必须提供以下作为基本信息键的键之一：`email`、`user_birthday`或`user_location`.

引用 Facebook（[来源](https://developers.facebook.com/docs/howtos/ios-6/)）：

> 要使用 iOS 6 原生身份验证对话框创建此基本连接，应用程序必须通过请求电子邮件、user_birthday 或 user_location 权限之一来请求访问用户的基本配置文件信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:49:27.267

在我的一台设备上遇到此错误后（在看到正确的、预期的 iO​​S 警报视图要求我批准 Facebook 访问我的应用程序后）：

“Facebook 服务器无法完成此访问请求：应用程序 ID 无效。”

我终于找到了问题所在。

尽管最初似乎是 FB 开发人员网站上的 Facebook 应用程序设置存在问题，但事实证明，我设备的 iOS Facebook 帐户不再具有与之关联的有效密码 - 当用户将 iOS 备份恢复到新设备时，这会很高兴. 一旦我在我的设备设置中对其进行了排序，一切都会按预期工作。

我在第一个 FB 权限访问请求中请求“publish_stream”时没有遇到任何问题——我实际上认为这里真正的问题是错误消息是如此随机，以至于它们无法帮助开发人员找到错误的来源。由于Apple和Facebook缺乏团结，重新体验！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-26T11:53:35.083

除了上述建议之外，还有一些可以尝试的方法是在 facebook.com 上检查您的应用设置 -

```
https://developers.facebook.com/apps/<*APP_ID*>/summary 
```

*   确保沙盒模式设置为关闭

    还，

    在**“选择您的应用如何与 Facebook 集成”下**

    **选择-> 原生 iOS 应用**

*   设置你的 Bundle ID
*   您可以为 iPhone/iPad App Store ID 设置任何临时整数值
*   将 Facebook 登录设置为已启用
*   列出的平台是原生 iPhone 应用程序和/或原生 iPad 应用程序

保存更改并在一段时间后尝试，因为 facebook 可能需要几分钟才能将更改同步到其所有服务器。

# objective-c - 未调用 cellForRowAtIndexPath（再次）

> ID：12686278
> 
> 赞同：1
> 
> 时间：2012-10-02T07:41:33.133
> 
> 标签：objective-c, ios, xcode

我已经找到了同样的问题，但答案对我没有帮助:(也许是因为我有特定的问题。将应用程序安装到 iPhone 4S(iOS 5) 后出现了一些问题。我已经修复了其中的几个，但是这个更顽固乍一看似乎。

我在 Xcode4 中打开了现有的 Xcode3 项目，出现了这个问题。

我会在这里放一些代码：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    // Return the number of sections.       
     return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.

    return [self.townShopsArray count];
} 
```

我检查了：self.townShopsArray 不为空

功能：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { ... 
```

没有被调用，所以我不需要把它的代码放在这里。

谁能告诉我当我将项目从 Xcode 3 升级到 Xcode 4 时会出现什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:56:38.890

以下是可能的原因：

*   您的 UITableView 的数据源未设置为此控制器
*   您的 UIViewController / UITableViewController 的类未在Interface Builder的**Identity Inspector**中设置为此视图控制器的类。如果未设置，iOS 将向通用 UITableView 类询问有关您的单元格的信息，而不是您创建的类。 ![自定义类](../Images/841037b2c647b35c81f1b12ac2dd21ad.png)

*   （如果您以编程方式添加了 UITableView）...您指向表的指针不强，并且 UITableView 已被释放

# c - ProC 在 10g 上编译并在 11g 上运行

> ID：12686279
> 
> 赞同：1
> 
> 时间：2012-10-02T07:41:39.657
> 
> 标签：c, oracle10g, oracle11g, malloc, coredump

我用 oracle 10g 编译了一个 pro*c 源代码并运行安装了 11g 的应用程序。应用程序提供核心转储。我从 DBX 调试中得到以下跟踪：

```
(dbx) where
current thread: t@1
  [1] _smalloc(0x30, 0x0, 0x1dad44, 0xffffffff7b56350c, 0x0, 0xffffffff7b74eac0), at 0xffffffff7b563350
  [2] malloc(0x2c, 0x23e0, 0x1dac88, 0xffffffff7b5633d8, 0xffffffff7b73e000, 0x2000), at 0xffffffff7b5633c8
  [3] sqlalc(0xffffffff7e79dc20, 0x8, 0x1003bf920, 0x200, 0x0, 0x541c), at 0xffffffff7c2a23c8
  [4] sqlbrl(0xffffffff7e79dc20, 0x1003c0300, 0x1003c0328, 0x1003c02a0, 0xffffffff7fffeab0, 0x1), at 0xffffffff7c2ab1d4
  [5] sqlhvdsc(0x1003c0290, 0xffffffff7e79dc20, 0x8, 0xffffffff7ffff040, 0x122, 0xffffffff7e79dc20), at 0xffffffff7c2c5194
  [6] sqlshv(0xffffffff7e2fb350, 0x1, 0x1003c0290, 0xffffffff7fffec86, 0xa, 0x0), at 0xffffffff7c2c59cc
  [7] sqlatm(0xffffffff7e79df78, 0x100151022, 0x100354330, 0x1, 0x5, 0x1003813c0), at 0xffffffff7c2c72cc
  [8] sqlnst(0xffffffff7c2b5288, 0x85, 0x100150f18, 0x1, 0x0, 0xffffffff7ffff040), at 0xffffffff7c2b5618
  [9] sqlcmex(0x6, 0x1003813c0, 0x910, 0x1, 0x100150f18, 0x0), at 0xffffffff7c2a61ec
  [10] sqlcxt(0x0, 0x100150ec0, 0xffffffff7ffff040, 0x100152312, 0x4d, 0x0), at 0xffffffff7c2a6c44
=>[11] upd_prog_status(status = 30), line 476 in "CCFILT_x.pc"
  [12] main(argc = 3, argv = 0xffffffff7ffff918), line 3698 in "CCFILT_x.pc" 
```

我的问题是可以用 10g 编译源代码并在 11g 上运行吗？这个 malloc 错误怎么办。我读了一些你必须在 oracle 11g 的代码中定义 malloc 的地方？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:20:48.333

是的，使用 Oracle 10G 编译的应用程序也可能在 Oracle 11G 上运行。但反之亦然是行不通的。

上述错误表明应用程序中存在一些内存泄漏，但跟踪没有告诉您确切的位置。泄漏已经远离踪迹。

# typescript - 我可以从 TypeScript 的类主体中访问“类对象”吗

> ID：12686280
> 
> 赞同：2
> 
> 时间：2012-10-02T07:41:44.367
> 
> 标签：typescript

我可以做一些类似于 CoffeeScript 或 Ruby 的事情吗，我可以在其中创建类-“宏”

```
class A
    # events adds the class method "listenTo" to the class (not to the prototype)
    # listenTo will make all instances of A a listener to the given Event
    events @

    # this will register instances of A to listen for SomeEvents
    # the event broker (not here in this code) will specifically look
    # for a method called "onSomeEvent(event)"
    @listenTo SomeEvent

    # and then later
    onSomeEvent: (event)-> #do what ever is needed 
```

这将创建以下 Javascript 代码

```
var A;
A = (function() {
   function A() {}
   events(A);
   A.listenTo(SomeEvent);
   A.prototype.onSomeEvent = function(event) {};
   return A;
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:43:19.203

如果你写这个，看看你的例子：

```
function events(A:any) {
    A.listenTo = function(arg:any){alert(arg);};
}

class A {
    public onSomeEvent(event:any) {
        //do stuff  
    }
    constructor {
        events(A);
        (<any>A).listenTo("SomeEvent");
    }
} 
```

在 TypeScript 中，它将编译为：

```
function events(A) {
    A.listenTo = function (arg) {
        alert(arg);
    };
}
var A = (function () {
    function A() {
        events(A);
        (A).listenTo("SomeEvent");
    }
    A.prototype.onSomeEvent = function (event) {
    };
    return A;
})(); 
```

# ruby-on-rails - 在 Rails 环境中使用 Rspec 测试 Rake 任务

> ID：12686282
> 
> 赞同：20
> 
> 时间：2012-10-02T07:41:54.287
> 
> 标签：ruby-on-rails, ruby, rspec

我正在尝试测试一个 rake 任务，它在其中使用了一个活动记录。

```
require 'spec_helper'
require 'rake'

load File.join(Rails.root, 'lib', 'tasks', 'survey.rake')

describe "survey rake tasks" do
  describe "survey:send_report" do
    it "should send a report" do
      Rake::Task['survey:send_report'].invoke
    end
  end
end 
```

当我运行此规范`rspec spec/lib/survey_spec.rb`时，我收到此错误“

```
RuntimeError:
   Don't know how to build task 'environment' 
```

如何通过示例规范加载 :enviroment 任务？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-11T23:47:50.460

我认为您应该首先加载任务：

```
require 'rake'
MyRailsApp::Application.load_tasks 
```

然后调用你的任务：

```
Rake::Task['survey:send_report'].invoke 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T14:04:57.880

我怀疑问题在于您的`survey:send_report`任务取决于`:environment`但您尚未加载定义`:environment`任务的文件。那将在某个地方的轨道上，您的主要`Rakefile`加载它。

所以，我想如果你改变

```
load File.join(Rails.root, 'lib', 'tasks', 'survey.rake') 
```

至

```
load File.join(Rails.root, 'Rakefile') 
```

它会工作的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-30T03:34:10.587

听起来您的拍摄任务可能需要加载 Rails 环境。您可以通过将此行添加到您的 before(:all) 钩子中来解决这个问题：

```
Rake::Task.define_task(:environment) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:56:03.730

您的任务是添加 :enviroment 吗？在你的 .rake 文件中，你应该有这样的东西：

```
namespace :survey do
# ...

task :send_report => :enviroment do
# ... stuff
end 
```

这是因为您需要加载完整的环境来完成该任务。您可以查看此 railcast 以获取更多信息[http://railscasts.com/episodes/66-custom-rake-tasks](http://railscasts.com/episodes/66-custom-rake-tasks)

# python - 是否有用于通知和等待的 python 库？

> ID：12686283
> 
> 赞同：5
> 
> 时间：2012-10-02T07:42:02.010
> 
> 标签：python, apache-zookeeper

我正在使用 python-zookeeper 进行锁定，并且我试图找出一种让执行在它正在观看文件时等待通知的方法，因为它会`zookeeper.exists()`立即返回，而不是阻塞。

基本上，我有下面列出的代码，但我不确定实现`notify()`and`wait_for_notification()`功能的最佳方式。可以用`os.kill()`and来完成`signal.pause()`，但我敢肯定，如果我以后在一个程序中有多个锁，这可能会导致问题 - 是否有特定的 Python 库对这类事情有好处？

```
def get_lock(zh):
    lockfile = zookeeper.create(zh,lockdir + '/guid-lock-','lock', [ZOO_OPEN_ACL_UNSAFE], zookeeper.EPHEMERAL | zookeeper.SEQUENCE)

    while(True):
        # this won't work for more than one waiting process, fix later
        children = zookeeper.get_children(zh, lockdir)
        if len(children) == 1 and children[0] == basename(lockfile):
            return lockfile

        # yeah, there's a problem here, I'll fix it later
        for child in children:
            if child < basename(lockfile):
                break

        # exists will call notify when the watched file changes
        if zookeeper.exists(zh, lockdir + '/' + child, notify):
            # Process should wait here until notify() wakes it
            wait_for_notification()

def drop_lock(zh,lockfile):
    zookeeper.delete(zh,lockfile)

def notify(zh, unknown1, unknown2, lockfile):
    pass

def wait_for_notification():
    pass 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T08:33:59.393

Python 的 threading 模块中的 Condition 变量可能非常适合您尝试执行的操作：

[http://docs.python.org/library/threading.html#condition-objects](http://docs.python.org/library/threading.html#condition-objects)

我已经扩展到该示例，以使其更明显地适应您的目的：

```
#!/usr/bin/env python

from collections import deque
from threading import Thread,Condition

QUEUE = deque()

def an_item_is_available():
    return bool(QUEUE)

def get_an_available_item():
    return QUEUE.popleft()

def make_an_item_available(item):
    QUEUE.append(item)

def consume(cv):
    cv.acquire()
    while not an_item_is_available():
        cv.wait()
    print 'We got an available item', get_an_available_item()
    cv.release()

def produce(cv):
    cv.acquire()
    make_an_item_available('an item to be processed')
    cv.notify()
    cv.release()

def main():
    cv = Condition()
    Thread(target=consume, args=(cv,)).start()    
    Thread(target=produce, args=(cv,)).start()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-27T21:29:27.150

我的回答可能与您的问题无关，但与问题标题有关。

```
from threading import Thread,Event

locker = Event()

def MyJob(locker):
    while True:
        #
        # do some logic here
        #
        locker.clear() # Set event state to 'False'
        locker.wait() # suspend the thread until event state is 'True'

worker_thread = Thread(target=MyJob, args=(locker,))
worker_thread.start()

#
# some main thread logic here
#
locker.set() # This sets the event state to 'True' and thus it resumes the worker_thread 
```

更多信息在这里：[https ://docs.python.org/3/library/threading.html#event-objects](https://docs.python.org/3/library/threading.html#event-objects)

# html - HTML5 到 PDF 服务器端

> ID：12686286
> 
> 赞同：15
> 
> 时间：2012-10-02T07:42:06.427
> 
> 标签：html, pdf, css, printing, creation

我正在寻找一种从服务器端的 HTML5/CSS3 文档生成 PDF 的解决方案。

我知道有很多创建 PDF 的解决方案（如 FOP、iText...），但我需要确保它看起来与 HTML 页面 100% 相同。所以，我不想像 FOP 或 iText 这样逐个元素地创建 PDF 元素。

实际上，应该存在某些东西，因为这就是您从浏览器打印为 PDF 时所做的事情。理想情况下，该解决方案应嵌入 Web 浏览器引擎（webkit 或 gecko）。我尝试了 wkHtmlToPdf ......但结果一点都不好（HTML5画布甚至没有打印......）

如果有人对任何解决方案有任何想法，无论是否免费，任何语言......我将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T22:39:42.767

我使用 PhantomJS 从网页生成 png 图像，它也可以生成 PDF，而且质量通常很好。该属性称为屏幕截图并[在此处](https://github.com/ariya/phantomjs/wiki/Screen-Capture)进行描述。支持的格式为 PNG、JPEG、GIF 和 PDF。

转换为 PDF 时，页面文本保留为文本。

在测试了几个其他库或程序后，发现 PhantomJS 是最完美的解决方案。PhantomJS 使用 WebKit，一个真正的布局和渲染引擎。

[https://github.com/ariya/phantomjs/wiki/Examples](https://github.com/ariya/phantomjs/wiki/Examples)中很少有示例。在**渲染/光栅化**部分中提到了以下脚本，可以帮助您完成此过程：

```
rasterize.js rasterizes a web page to image or PDF 
```

[PhantomJS 快速入门指南](http://code.google.com/p/phantomjs/wiki/QuickStart)说：

可以生成 PDF 输出，例如来自 Wikipedia 文章：

```
phantomjs rasterize.js 'http://en.wikipedia.org/w/index.php?title=Jakarta&printable=yes' jakarta.pdf 
```

或者在创建可打印的备忘单时：

```
phantomjs rasterize.js http://www.nihilogic.dk/labs/webgl_cheat_sheet/WebGL_Cheat_Sheet.htm webgl.pdf 
```

我测试了几页的pdf生成，如果页面遵循标准，它会产生很好的结果。文本是可以选择和打印为高质量的，但在某些页面上，pdf 中的布局与 png 中的不同。以下是使用命令生成的两个屏幕截图：

```
$ phantomjs rasterize.js 'http://windows.microsoft.com/en-US/windows/home' microsoft.png

$ phantomjs rasterize.js 'http://windows.microsoft.com/en-US/windows/home' microsoft.pdf 
```

![使用 Phantomjs 生成 png 和 pdf 的示例](../Images/b7ebe362b0ed5c11bd10640c8f7d3dcd.png)

我还测试[了 http://lab.simurai.com/buttons/](http://lab.simurai.com/buttons/)。pdf 和 png 非常相同，下面是一个 pdf 样本，我将其光栅化为 5641px 宽并裁剪了其中的一个区域。与前面的 PDF 示例一样，可以在 PDF 中选择文本，并且如您所见，文本很清晰（没有抗锯齿！）。

![CSS3按钮](../Images/9c2e10d94c4004ff3ebb94bf73431936.png)

**安装**

我首先尝试在从源代码编译的 Centos5 上安装 Qt 库和 PhantomJS，但没有运气。然后在 Ubuntu 11.10 上，这个过程很轻松：

我下载了[http://phantomjs.googlecode.com/files/phantomjs-1.7.0-linux-x86_64.tar.bz2](http://phantomjs.googlecode.com/files/phantomjs-1.7.0-linux-x86_64.tar.bz2)并使用

```
tar -xjvf phantomjs-1.7.0-linux-x86_64.tar.bz2 
```

然后将 phantomjs 可执行文件复制到系统的 bin 目录：

```
$ cp phantomjs-1.7.0-linux-x86_64/bin/phantomjs /usr/local/bin/phantomjs 
```

phantomjs 已准备好运行。

如果生成的PDF不好，你可以尝试更新Webkit，但我想结果应该足够了。PhantomJS 具有出色的更新周期，因此应在合理的时间内修复错误。

[PhantomJS FAQ](http://phantomjs.org/faq.html)也有很好的可能性信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:00:03.047

根据您的 HTML 的复杂性，您可以使用[XmlWorker](http://sourceforge.net/projects/xmlworker/)，这是 iText 开发人员的一个项目并使用 iText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:31:06.820

您在服务器端使用什么语言？

创建页面的屏幕截图，然后将图像转换为 pdf 可能会给您最好的结果。它将显示的页面与浏览器呈现的页面完全相同。

有一些屏幕截图即服务工具，例如[browshot.com](http://browshot.com/)。查看[API](http://browshot.com/api/documentation)和[支持的语言](http://browshot.com/api/libraries)。

或者你可以使用你的工具。对于[node.js在](http://nodejs.org/)[github](https://github.com/fzaninotto/screenshot-as-a-service)上有一个不错的项目。

# android - IntelliJ IDEA - 无法构建任何东西，总是得到“包 R 不存在”

> ID：12686289
> 
> 赞同：38
> 
> 时间：2012-10-02T07:42:34.757
> 
> 标签：android, intellij-idea

我正在尝试使用 IntelliJ IDEA 与一个发誓的同事一起开发一个 Android 应用程序，但我无法构建他发送给我的任何 Android 项目，因为每当我尝试构建时，我都会收到一条错误消息`package R does not exist`。

我一直在尝试我能想到的一切。示例和其他需要注意的事项是：

*   确保我有一个`local.properties`指向我的 Android SDKs 文件夹根目录的文件版本。

*   在项目结构对话框中摆弄各种设置（我不会全部列出）。

*   我正在处理的项目有两个库项目，它们也使用`R`该类，它们工作正常。

*   IDE 中的智能感知可以识别`R`该类并提供我期望的内容。

任何帮助将不胜感激。我觉得我缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-21T03:51:51.340

我是**IntelliJ**的新手，所以如果这对您不起作用，我深表歉意。我遇到了同样的问题，解决方案是在`Android` `Facet`您的项目中添加一个。

（我在 Mac 上，所以这里的方向可能会稍微偏离，可能有更好的方法可以找到这个窗口，如果有，请告诉我！）

1.  右键单击您的项目并转到`Open Module Settings`（似乎 F4 也可以）
2.  `Facets`在最左列中选择
3.  单击 + 按钮
4.  将一个添加`Android` `Facet`到您的项目中，瞧！
5.  *您现在可能需要导入您`R`的 s，这可能是一个巨大的痛苦......所以希望有人可以用一种简单的方法来自动导入*

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-01-12T04:54:36.793

此处列出的另一种可能的解决方案是检查 AndroidManifest.xml 中的包名称是否与实际包的名称匹配：

`<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.example.yourpackagename" >`

在我重构包名称之前，我的包构建良好，除了清单文件中的包名称（见上文）导致错误“包 R 不存在”之外，所有内容都被重构。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-23T11:35:16.093

如果您在需要“重建”之前使用已经构建的包遇到此问题。构建->重建项目。删除 gen 不会这样做，因为 IDEA 将实际生成的 R 保存在其他地方。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-06T14:41:15.713

就我而言，我从另一个项目中添加了一些类，并且我必须从我的实际项目中将导入添加到 R 包中：

```
import com.youcompanyname.yourprojectname.R; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-26T04:06:07.020

我开始使用 IntelliJ，因为我在使用新的 Android Studio 时遇到了问题，并想尝试一些更稳定的东西（我以前从未真正使用过）。我最终得到了可怕的“包 R 不存在”错误。根据我的经验，这通常是在 XML 文件中搞砸的。对我来说，问题实际上出在我为 ActionBarSherlock 创建的 Android 库模块的 AndroidManifest.xml 文件上。无论出于何种原因，当它创建 AndroidManifest.xml 文件时，它并没有使用 ABS 附带的 AndroidManifest.xml 文件，而是将以下内容放入：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.ActionBarSherlockLibrary_4_3_1"
          android:versionCode="1"
          android:versionName="1.0">

    <application
        android:label="@string/app_name"
        android:icon="@drawable/ic_launcher">
        <activity
            android:name="ACTIVITY_ENTRY_NAME"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

当我创建这个模块时，我选择了文件 > 新模块...然后我在 Android 部分下选择了库模块，对于内容根，我浏览到 ABS 文件的位置（其他字段自动填写正确，但我没有改变它们）。然后我单击完成，它提示我是否要保留本地文件或 project.properties 的内存文件。我选择保留本地文件，之后它没有提示我输入任何其他文件。

我不知道为什么它弄乱了 AndroidManifest.xml 文件（也许我上面做错了......？？？），但为了修复它，我只是复制了我与库一起下载并替换的原始 AndroidManifest.xml混乱的 AndroidManifest.xml 文件。之后我执行了 Build > Rebuild Project 并解决了“包 R 不存在”错误。

另一个想法，@xbakesx 提到了 Facets 设置，对于您用作库的任何模块，您应该确保在该模块的 Facets 下选中“库模块”。起初，当我试图弄清楚如何在 IntelliJ/Android Studio 中配置库时（我真的只使用过 Eclipse），我遇到了一些问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-18T04:40:50.530

我只是重新启动 IntelliJ，它神奇地解决了。先试试看。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-07T16:28:11.873

有同样的问题 - 问题是清单文件没有正确设置默认活动。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-16T17:00:43.343

对于所有已经走到这一步的绝望的人，答案是：我感受到你的痛苦。我花了一个小时什么都没做，只是尝试了上面所有的事情以及其他来源的建议。我检查了我所有的 xml 资源两次，清理了缓存，重建了十几次，甚至重新启动了整台机器。这实际上对我有用：

**在“构建变体”**（左下角）下，**我为缺少 R 问题的目标选择了不同的构建变体**（在我的情况下是发布而不是调试）**。**解决了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-03-12T12:26:35.103

我已经**重构了**包名，而 intellij 没有在清单中更新它。

因此，如果您重构了包名，请转到清单并更新 xml 文件根目录中的属性“package”保存并重建它。如果发生任何错误，则可能是导入中的包名错误（至少这是我的情况），所以只需修复它们

希望这对任何人都有帮助

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-06-19T19:47:29.690

就我而言，我不得不删除 intellj 编译器缓存。在我的 Windows 机器上是这样的：

```
%USERPROFILE%\.IdeaIC12\system\compile-server\<my project> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-02T07:53:38.190

尝试创建新项目并选择**“从现有来源创建项目”**

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-10-16T11:57:57.320

添加我的 0.02 美元，以防其他人遇到我遇到的问题。在我的例子中，我使用 IntelliJ 生成了“Hello world”应用程序，但忘记将包名称从“com.example”更改。然后我使用 IntelliJ 重构包名称。这导致错误开始发生。

因此，我对“com.example”进行了全局搜索，并在其他人提到的 AndroidManifest 文件中找到了它。但是，更改此设置并不能解决问题。在“.idea”目录下的“workspace.xml”中也可以找到“com.example”。我改变了他们的所有事件，进行了重建，然后它又开始工作了！

这似乎是 IntelliJ 中的一个错误。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-06T06:46:33.620

在 Android Studio 中，我的问题是当我复制粘贴一个类以用作模板来制作另一个类似的类时，它要求自动导入一堆东西，其中大部分与新类无关，所以我说取消。有了它，它就被遗漏了，`import com.your.packagename.R;`所以 R 实际上并没有被导入我试图使用它的文件中。

单击 R 时可以使用 alt-enter 修复（它应该以红色突出显示）

# android - 单击按钮时无法打开 pdf 客户端

> ID：12686290
> 
> 赞同：0
> 
> 时间：2012-10-02T07:42:40.420
> 
> 标签：android, android-intent, android-file

这是我的按钮点击代码：

```
 private View.OnClickListener onButton1=new View.OnClickListener() {
       public void onClick(View v){
        copyAssets();

        File rootDir = Environment.getExternalStorageDirectory();
        File file = new File(rootDir + "/sdcard/" +"save.pdf");
         if(file.exists())
           {
            // do action here

            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.fromFile(file));
            intent.setType("application/pdf");

            startActivity(intent);
           }
         else {
            Toast.makeText(getApplicationContext(), "File does not exist",         Toast.LENGTH_LONG).show();
         }

       }
     }; 
```

copyAssets() 是一个函数，通过它我将文件从我的资产文件夹复制到我的 SD 卡，它在我检查我的设备时工作，但是当我单击按钮时我无法打开它。我的文件在 SD 卡上命名为 save.pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:45:32.447

您可以通过提供如下路径从 SDCard 读取 pdf 文件：

```
 File pdfFile = new File(path); 
        if(pdfFile.exists()) 
        {

            Uri path = Uri.fromFile(pdfFile); 
            Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
            pdfIntent.setDataAndType(path, "application/pdf");
            pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            try
            {
                startActivity(pdfIntent);
            }
            catch(ActivityNotFoundException e)
            {
                Toast.makeText(uractivity.this, "File does not exist", Toast.LENGTH_LONG).show(); 
            }
        } 
```

# validation - php jquery, validate remote , array

> ID：12686292
> 
> 赞同：1
> 
> 时间：2012-10-02T07:42:50.823
> 
> 标签：validation, jquery, jquery-validate

I have some problems to run the following code, the js:

```
 $(document).ready(function(){
$.validator.addMethod("name", function(value, element) {
    return $("#identiPIC_selected_0").val() !== '' &&    $("#identiPIC_selected_1").val() !== '' ;
}, "Required!");

$("#signin").validate({
    groups:{
         name : 'identiPIC_selected[]'  
    },
    rules: {
        'identiPIC_selected[]': {
            required: true,
            remote: { 
                url:"check3.php",
                type:"post",
                cache: false,
                async:false,
                data: {
                    'identiPIC_selected[0]': function() {
                        return $.trim($("#identiPIC_selected_0").val());
                    },
                    'identiPIC_selected[1]': function() {
                        return $.trim($("#identiPIC_selected_1").val());
                    }
                }
            }
        }
    }
});

}); 
```

the php is the following:

```
<?php
 $captcha = $_POST['identiPIC_selected'];
$identiPIC[0] = "Apple";
$identiPIC[1] = "Flower";
 if($captcha === $identiPIC){
    echo "true";
 } else {
    echo "false";
 }

?> 
```

and the html:

```
<form id="signin" action="check3.php" method="POST">
<select id="identiPIC_selected_0" name="identiPIC_selected[]">
<option value="">Click to identify</option>
<option>Apple</option>
<option>Cat</option>
<option>Clock</option>
<option>Flower</option>
<option>Fork</option>
</select>
<select id="identiPIC_selected_1" name="identiPIC_selected[]">
<option value="">Click to identify</option>
<option>Apple</option>
<option>Cat</option>
<option>Clock</option>
<option>Flower</option>
<option>Fork</option>
</select>
<input type="submit" id="save" name="save" value="Save"/>
</form> 
```

This code works well when, except when the user selects the second "select" option wrong, presses submit and then fixes his mistake and then he presses submit it just doesnt submit anymore, so what i mean is for example:

User selects: Apple + Cat and click on save button, displays error, User fixes the problem: Apple + Flower and click on save button, it doesnt submit, even all the picks are good.

I added this :

```
$("#identiPIC_selected_0").change(function () {
    $("#identiPIC_selected_0").removeData("previousValue");
});
$("#identiPIC_selected_1").change(function () {
   $("#identiPIC_selected_1").removeData("previousValue");
}); 
```

but it doesnt seem to do anything for me. Anyone any ideas? Thanks!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:13:58.813

ok... after different tries i think i found the solution, this seems to work:

```
 $('#signin').submit(function(){
    $("#identiPIC_selected_0").removeData('previousValue');
    $("#identiPIC_selected_1").removeData('previousValue');
}) 
```

# php - 从whoistext中提取信息

> ID：12686295
> 
> 赞同：-2
> 
> 时间：2012-10-02T07:43:08.653
> 
> 标签：php

我正在获取谁是文本数据，现在我想提取诸如管理员电话、到期日期、地址等信息。我得到的文字如下所示：

```
$text ="Access to .IN WHOIS information is provided to assist persons in determining    the contents of a domain name registration record in the .IN registry database. The data in this record is provided by .IN Registry for informational purposes only, and .IN does not guarantee its accuracy. This service is intended only for query-based access. You agree that you will use this data only for lawful purposes and that, under no circumstances will you use this data to: (a) allow, enable, or otherwise support the transmission by e-mail, telephone, or facsimile of mass unsolicited, commercial advertising or solicitations to entities other than the data recipient's own existing customers; or (b) enable high volume, automated, electronic processes that send queries or data to the systems of Registry Operator, a Registrar, or Afilias except as reasonably necessary to register domain names or modify existing registrations. All rights reserved. .IN reserves the right to modify these terms at any time. By submitting this query, you agree to abide by this policy. Domain ID:D21089-AFIN Domain Name:GOOGLE.IN Created On:14-Feb-2005 20:35:14 UTC Last Updated On:25-Jul-2012 23:14:22 UTC Expiration Date:14-Feb-2013 20:35:14 UTC Sponsoring Registrar:Mark Monitor (R84-AFIN) Status:CLIENT DELETE PROHIBITED Status:CLIENT TRANSFER PROHIBITED Status:CLIENT UPDATE PROHIBITED Registrant ID:EPPIPM-143349 Registrant Name:Admin DNS Registrant Organization:GOOGLE INC. Registrant Street1:1600 Amphitheatre Parkway Registrant Street2: Registrant Street3: Registrant City:Mountain View, CA Registrant State/Province: Registrant Postal Code:94043 Registrant Country:US Registrant Phone: +1.6503300100  Registrant Phone Ext.: Registrant FAX: Registrant FAX Ext.: Registrant Email:dns-admin@google.com Admin ID:EPPIPM-143349 Admin Name:Admin DNS Admin Organization:GOOGLE INC. Admin Street1:1600 Amphitheatre Parkway Admin Street2: Admin Street3: Admin City:Mountain View, CA Admin State/Province: Admin Postal Code:94043 Admin Country:US Admin Phone: +1.6503300100  Admin Phone Ext.: Admin FAX: Admin FAX Ext.: Admin Email:dns-admin@google.com Tech ID:EPPIPM-143349 Tech Name:Admin DNS Tech Organization:GOOGLE INC. Tech Street1:1600 Amphitheatre Parkway Tech Street2: Tech Street3: Tech City:Mountain View, CA Tech State/Province: Tech Postal Code:94043 Tech Country:US Tech Phone: +1.6503300100  Tech Phone Ext.: Tech FAX: Tech FAX Ext.: Tech Email:dns-admin@google.com Name Server:NS1.GOOGLE.COM Name Server:NS2.GOOGLE.COM Name Server:NS3.GOOGLE.COM Name Server:NS4.GOOGLE.COM Name Server: Name Server: Name Server: Name Server: Name Server: Name Server: Name Server: Name Server: Name Server: DNSSEC:Unsigned "; 
```

请帮我获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:00:45.307

你最好使用`PEAR::Net_Whois`哪个是用 PHP 编写的 whois 包来做到这一点。[在http://pear.php.net/package/Net_Whois](http://pear.php.net/package/Net_Whois)找到它

# c++ - Test t 有什么区别？和测试 t();? 如果测试是一个类

> ID：12686298
> 
> 赞同：7
> 
> 时间：2012-10-02T07:43:30.607
> 
> 标签：c++, most-vexing-parse

> **可能重复：**
> [为什么没有调用构造函数？](https://stackoverflow.com/questions/3810570/why-is-there-no-call-to-the-constructor)

我正在使用 Visual Studio 2012，假设 Test 是一个类

```
class Test
{
}; 
```

当我创建一个新的Test实例时，以下两种方式有什么区别？

方式1

```
Test t; 
```

方式2

```
Test t(); 
```

我在下面的代码中得到了这个问题，最初，我在方式 2 中定义了一个 A 的实例，我只得到一个错误，因为 B 没有提供默认构造函数，但是当我在方式 1 中定义它时，我得到了一个额外的错误。

```
class B
{
    B(int i){}
};

class A
{
    A(){}
    B b;
};

int main(void) 
{ 
    A a(); // define object a in way 2

    getchar() ; 
    return 0 ; 
} 
```

如果我在方式 1 中定义一个

```
A a; 
```

我会得到另一个错误说

> 错误 C2248：“A::A”：无法访问在“A”类中声明的私有成员

所以我想这两种方式之间一定存在一些差异。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-02T07:44:38.190

![在此处输入图像描述](../Images/48dd8deb1a102b6d54b1fb0ef9acbd67.png)

`Test t;`定义了一个名为`t`type的变量`Test`。

`Test t();`声明一个被调用的函数`t`，它不带参数并返回一个`Test`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T07:44:18.000

> **两个声明有什么区别？**

```
A a(); 
```

声明一个函数而不是一个对象。它是C++中**[最令人头疼的解析之一。](http://en.wikipedia.org/wiki/Most_vexing_parse)**
它通过名称声明一个`a`不带参数并返回类型的函数`A`。

```
A a; 
```

通过调用其默认构造函数 创建一个以`a`该类型命名的对象。`A`

> **为什么会出现编译错误？**

对于类默认访问说明符`private`，您会收到错误，因为您的类构造函数是`private`，并且在使用上述语法创建对象时无法调用它。

# jquery - 使用 django 和 jquery 添加诸如 facebook 之类的评论

> ID：12686303
> 
> 赞同：0
> 
> 时间：2012-10-02T07:44:07.260
> 
> 标签：jquery, django, comments

我正在使用 django 和 jquery 进行一个项目，我必须实现像 facebook 这样的评论，我不知道该怎么做。请我需要您的帮助，并且需要您对代码非常具体，因为我是新手。

这是代码，请告诉我我缺少什么。

Javascript

```
<script type="text/javascript">
    $(document).ready(function() {
      $('#category_form').submit(function(e) {
      e.preventDefault();
      $.ajax({
        type: 'POST',
        url: '{% url pos.views.add_category %}',
        data: $('#category_form').serialize(),
        dataType: 'json',
        success: function() {
          location.reload();
    $('#category_form').get(0).reset();
      },
     });
     return false;
     });
    });
</script> 
```

形式

```
 class CategoryForm(ModelForm):
    name = forms.CharField(label=(u'Categoria'))
    class Meta:
     model = Category 
```

网址

```
 url(r'^category/$', 'pos.views.Categories'), 
```

看法

```
 def add_comment(request):
     if request.method == 'POST' and request.is_ajax():
      category_form = CategoryForm(request.POST)
      if category_form.is_valid():
       category = category_form.save(commit=True)
       category.save()
       json = simplejson.dumps(category, ensure_ascii=False)
       return HttpResponse(json, mimetype='application/json')
    return render_to_response(simplejson.dumps({'category': category,}),        context_instance=RequestContext(request), mimetype='application/json') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:22:13.263

我认为要发布评论，您将遇到的主要问题是登录，在此之前您需要授权用户，对于授权用户，您可以使用[django-social-auth](https://github.com/omab/django-social-auth)。

正如您所说，保存后您想做某事，您可以通过覆盖模型中的保存功能来做到这一点。例如

```
class Updates(models.Model) 
    ...........
    ...........

    def save():
        super(save())
        ....................
        # Do your job here
        .................... 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:19:24.930

你的观点有两个回报

```
return HttpResponse(json, mimetype='application/json')
return render_to_response(simplejson.dumps({'category': category,}),        context_instance=RequestContext(request), mimetype='application/json') 
```

摆脱你不需要的那个。（很难从格式错误的代码中判断您需要什么。）

Read the jQuery docs here: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

Specifically, check out the **Callback Function Queues** section

Change your javascript so ajax does something like this instead:

```
 $.ajax({
        type: 'POST',
        url: '{% url pos.views.add_category %}',
        data: $('#category_form').serialize(),
        dataType: 'json',
        success: function(data) {
            $("#results").html(data);
        }
            ... 
```

This uses the success callback to set the returned data (the json returned from your view) as the html data of the element with the ID "results" in your HTML.

# php - mysql错误资源ID#5

> ID：12686304
> 
> 赞同：1
> 
> 时间：2012-10-02T07:44:15.707
> 
> 标签：php, mysql

我有这个小代码片段，但它现在并没有真正工作。我总是遇到资源 id#5 错误。我在 google 中搜索了一些指针，但没有找到 mutch 来解决这个问题。这是我的代码

```
<?php
include 'load_db.php';

$var1 = $_POST["gender_1"];
$var2 = $_POST["gender_2"];
$var3 = $_POST["age"];

$sql = mysql_query("SELECT url FROM links WHERE gender ='".$var1."' AND gender1 ='".$var2."' AND age ='".$var3."'");

$result_1 = mysql_query($sql)
OR die("Error: $sql </br>".mysql_error());

echo $result_1;
?> 
```

> 错误：资源 ID #5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:47:10.727

您正在使用两次`mysql_query()`，请`mysql_query()`从以下位置删除`$sql`：

```
$var1 = mysql_real_escape_string($_POST["gender_1"]);
$var2 = mysql_real_escape_string($_POST["gender_2"]);
$var3 = mysql_real_escape_string($_POST["age"]);

$sql = "SELECT url FROM links WHERE gender ='".$var1."' AND gender1 ='".$var2."' AND age ='".$var3."'";
$result_1 = mysql_query($sql) OR die("Error: $sql </br>".mysql_error()); 
```

然后循环结果：

```
while($row = mysql_fetch_array($result_1)){
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:55:39.960

几点建议：

1.  尽管您创建了 3 个局部变量 var1、var2、var3，但您仍然对 mysql 插入可用的漏洞持开放态度。您应该研究一下。
2.  你的代码：

> ```
> $sql = mysql_query("SELECT url FROM links WHERE gender ='".$var1."' AND gender1 ='".$var2."' AND age ='".$var3."'"); 
> $result_1 = mysql_query($sql)  OR die("Error: $sql </br>".mysql_error()); 
> ```

你调用 sql_query 两次..

将 $sql 更改为

```
$sql = "SELECT url FROM links WHERE gender ='".$var1."' AND gender1 ='".$var2."' AND age ='".$var3."'"; 
```

# c# - 找出聊天会话是通过 VPN 连接

> ID：12686308
> 
> 赞同：0
> 
> 时间：2012-10-02T07:44:25.297
> 
> 标签：c#, java, vpn

有没有办法以编程方式（使用 C# 或 Java）找出当前聊天会话是否通过 VPN 连接发生？

我无权使用网络工具进行研发（首先不确定是否可以实时跟踪），因此我没有尝试过任何事情。

任何帮助/指针/方向都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:00:01.580

我相信这将取决于 VPN 的设置方式。

如果 VPN 使用软件端点连接，那么它通常会有一个模拟的网络适配器，您很可能会找到它的名称（硬件驱动程序显示名称而不是连接名称）并将其与已知 VPN 网络适配器列表进行比较。

如果 VPN 是使用防火墙或其他专用网络设备等硬件端点连接的，那么如果没有中间硬件方法中的某种人，可能无法判断。

# php - 如何找出给定的纬度和经度在指定区域内？

> ID：12686309
> 
> 赞同：1
> 
> 时间：2012-10-02T07:44:25.143
> 
> 标签：php, google-maps

我正在使用此代码[http://gmaps-utility-library-dev.googlecode.com/svn/trunk/geometrycontrols/examples/test.html](http://gmaps-utility-library-dev.googlecode.com/svn/trunk/geometrycontrols/examples/test.html) 来选择谷歌地图上的区域。选择后，我将获得所选区域的所有纬度和经度列表。问题是我有一个点的纬度和经度，我想找出那个点是在所选区域下还是不使用 PHP。

谢谢你的回复。我在这里得到了完美的答案 [Find Point in polygon PHP](https://stackoverflow.com/questions/5065039/find-point-in-polygon-php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:35:32.500

如果我没有被误解，您正在尝试查找选定点（纬度，经度）位于其他 4 个点（纬度，经度）的区域内，类似于这种情况；

```
  Ax,Ay Bx,按
A(10,20) B(20,20)
+-----------------+
| 像素, py |
| (15,15) |
| 磷 |
| |
| |
+-----------------+
  Cx,Cy Dx,Dy
C(10,10) D(20,10)

```

您可以通过数学方式找到此信息 A、B、C、D 是矩形的角点，P 是您要查找的单个点。这是可以帮助您找到 P 是否为正方形的代码片段。

**PS：代码不是用编辑器编写的，因此可能包含拼写错误或错误。请仔细检查。**

```
function isInsideSquare($Ax, $Ay, $Bx, $By, $Cx, $Cy, $Px, $Py) {
    if (triangleArea($Ax,$Ay,$Bx,$By,$Px,$Py)>0 || triangleArea($Bx,$By,$Cx,$Cy,$Px,$Py)>0 || triangleArea($Cx,$Cy,$Dx,$Dy,$Px,$Py)>0 || triangleArea($Dx,$Dy,$Ax,$Ay,$Px,$Py)>0) {
        return false;
    }
    return true;
}

function triangleArea($Ax, $Ay, $Bx, $By, $Cx, $Cy){
    return ($Cx*$By-$Bx*$Cy)-($Cx*$Ay-$Ax*$Cy)+($Bx*$Ay-$Ax*$By);
} 
```

# r - 循环删除具有列条件的行

> ID：12686310
> 
> 赞同：-2
> 
> 时间：2012-10-02T07:44:32.383
> 
> 标签：r, loops, matrix, apply

我的循环有问题。它只是删除了我的欲望列中**一些具有 0 或 NA 值的行，我不知道为什么：**

```
for (i in 1:105) {
  for (j in 1:l[i+1]){
    if(m[[i]][j,12]==0 | is.na(m[[i]][j,12])) {
      m[[i]]=m[[i]][-j,]
    } 
  }
} 
```

在网上搜索我看到也许我可以使用应用功能......比如：

```
for( i in 1:105){m[[i]]<-m[[i]][!apply(is.na(m[[i]]), 1, any),]}

for( i in 1:105){
  as.null(0)
  m[[i]]<-m[[i]][!apply(is.null(m[[i]]), 1, any),] 
} 
```

这引发了一个 dim(x) 错误...我想将零数设置为 NULL

我在想如下的事情，但显然它不好......这只是想法......我真的不知道如何很好地使用apply函数

```
for( i in 1:105){as.null(0) m[[i]]<-!apply(m[[i]],1,is.null(m[[i]])) } 
```

非常感谢您的有用帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:07:22.423

您用于`apply`在数组的边距上应用函数，但我认为这不是最好的主意，因为您只需要正确地对矩阵进行子集化。让我们只关注一个矩阵`m`。

```
ind = m[,12] == 0 | is.na(m[,12]) 
```

`ind`将有`TRUE`合适的地方，你可以做

```
m = m[!ind, ] # m is a matrix, not the list 
```

删除行。您可以将其放在循环中，或使用`lapply`（在列表上应用函数），但首先您需要将函数应用于列表中的每个元素（所有 105 矩阵），所以

```
removeRows = function(m) {
ind = m[,12] == 0 | is.na(m[,12])
m   = m[!ind, ]
return(m)
}

m = lapply(m, FUN=removeRows) 
```

那应该行得通。

# java - 来自构造函数的松散控制

> ID：12686311
> 
> 赞同：0
> 
> 时间：2012-10-02T07:44:35.500
> 
> 标签：java, class, exception-handling, double

我正在尝试调用自定义捕获表达式

```
String value1 = side1_tb.getText();
String value2 = side2_tb.getText();
String value3 = side3_tb.getText();
try
{
    result_lbl.setText(
        actual_triangle.Triangle(
            Double.parseDouble(value1),
            Double.parseDouble(value2),
            Double.parseDouble(value3)));
}
catch (NumberFormatException exe)
{

} 
```

所以从上面的代码你可以看到有三个文本框值被分配给一个字符串变量，然后我用'Numberformatexception'实现了一个try and catch方法，但是在'Numberformatexception'的地方我想实现一个自定义异常和这个异常将在另一个类中声明让我们调用这个类 EXCEPTIONclass.java 在这里我想创建一个异常，如果字符串值无法解析为双精度值，我试图在上面的代码中实现。

不太确定如何扩展异常类然后声明一个新异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:53:16.757

你可以这样做：

```
public class MyCustomException extends Exception
{
    // To keep compiler happy about Exception being serializable.
    // Note: This should carry meaningful value when these exceptions are going 
    // to be serialized
    public static final long serialVersionUID = 1L; 

    public MyCustomException(String message, Throwable t)
    {
        super(message, t);
    }

    // Other constructors of interest from the super classes.
} 
```

在您的 catch 块中，您将按如下方式包装 NumberFormatException：

```
catch (NumberFormatException nfe)
{
    throw new MyCustomException("<Your message>", nfe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:51:02.880

只需创建从 Throwable （对于已检查的异常）或 RuntimeException （如果您希望它不被检查）派生的异常类，然后从您的 catch 子句中抛出它。

# android - SDCard 上的 Logcat 输出

> ID：12686314
> 
> 赞同：3
> 
> 时间：2012-10-02T07:44:50.303
> 
> 标签：android, logcat

我正在寻找一种将所有 logcat 输出（按标签过滤）保存在手机内存/sd 卡中的方法。所以即使有人在玩应用程序，会来找我说它崩溃了，或者它没有按预期工作，我可以查看日志。我目前正在使用 RemoteLogs，但它们不处理标准的 logcat 输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:53:16.747

我认为这不是直接可能的。你可以做什么来覆盖这样的标准`Log.x()`方法

```
class MyLog {
  boolean sdLog = false;

  public void d(String arg1, String arg2) {
    if (sdLog) {
       someLogFile.append(arg1).append(":").append(arg2);
    }
    else {
       Log.d(arg1,arg2);
    }
  }
} 
```

然后在您的代码中将所有调用替换为`Log.d()`调用`MyLog.d()`. 然后，用户可以例如在偏好中选择登录到 sd 卡或使用标准机制。

通常，Android 不会选择（公平）将所有内容记录到 SD 卡，因为这意味着对卡进行大量写入，这会缩短其使用寿命。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:06:55.653

您可以简单地转储 logcat 并通过执行类似`sh -c logcat -d -v time > /sdcard/logcat.txt`. 事实上，Market/Play 商店中有一些应用程序可以做到这一点，并允许您通过电子邮件等方式共享 logcat。指导您的用户使用其中一个应用程序（例如[LogCollector](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector)）发送可能是个好主意你的日志。一个更好的主意是使用 ACRA 或 BugSense 来监控应用程序崩溃以及环境信息（Android 版本、屏幕大小等）。

请记住，从 Jelly Bean (4.1) 开始，您只能在设备上运行它时访问自己的 logcat 输出（即，从正在执行的应用程序的包中）（通过 adb 运行具有更多权限，并且可以像以前一样获取所有日志）。

另一个想法是不使用`Log.x()`而是写入您自己的日志文件。最近的 ACRA 版本能够发送此文件的内容以及崩溃报告。

# image-processing - 图像处理中伽马校正和曝光的区别

> ID：12686315
> 
> 赞同：5
> 
> 时间：2012-10-02T07:44:54.393
> 
> 标签：image-processing

有人知道伽玛和曝光有什么区别吗？图像处理中的伽马校正和曝光调整有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T12:38:03.013

由于您没有图像处理背景，我将从基础开始

1）每个数字图像都有一个动态的灰度级范围。现在灰度级只不过是最终对应于颜色的值。假设单色图像（黑白图像）只有 2 个灰度级，即 0 和 1，其中 0 表示黑色，1 表示白色。这里的动态范围是[0-1]。在这些图像中，每个像素都存储为单个位。

同样，灰度图像中也有灰色阴影。这里每个像素存储为 8 位，因此动态范围为 [0-255]。如何？只需应用公式 (2^n -1)，其中 n 是位数。即 (2^8 - 1) 即 256-1 = 255。

类似地，有彩色图像是 24 位图像。通常，图像中灰度级的动态范围由 [0 - L-1] 给出，其中 L 是灰度级数。

2) 现在，一旦您了解了什么是动态范围，就让我们了解 Gamma 校正。
伽玛校正只不过是一种压缩图像动态范围的功能，以便我们可以更好或更准确地查看图像。但是为什么我们需要压缩动态范围呢？

**一个最好的日常例子是在白天看不到星星的时候，原因是太阳的强度与星星的强度相比太大了，以至于我们在白天看不到星星。**

同样，当图像中的动态范围很高时，显示设备的动态范围我们无法正确看到图像。因此我们可以使用 gamma 校正来压缩图像的动态范围

3) Gamma 校正可以写成**g(x,y) = c * f(x,y) ^ #**其中# 是伽玛​​符号（因为我不知道如何在这里写伽玛符号，所以我使用了#），f(x,y) 是具有高动态范围的原始图像，g(x,y) 是修改后的图像。C 是一个正常数。

4）如前所述，曝光在相机中的现象的答案中。我对此了解不多，因为我目前正在学习的图像处理课程大纲中没有涵盖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:03:06.087

Gamma 校正是一种非线性全局函数，可压缩图像中的某些范围。从人类视觉的角度来看，它主要用于提高效率，采用定点格式。它在原始文件中不存在，但在 JPEG 中存在。每个像素经历以下变换：

```
 y = x^p 
```

曝光是相机中的一种物理现象。另一方面，曝光调整是线性全局函数。它主要用于补偿相机中曝光不足或过度的情况：

```
 y = a*x 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T08:48:11.533

曝光是到达相机 CCD（或胶片上的银离子）的总光量的指标。它可以表示为撞击图像记录元件的光子数。

胶片和 CCD 被校准以期望一定数量的光（一定数量的光子），以便能够创建“平均”图像。“预期”光量越高，胶卷（或相机设置）的 ISO 值越低 => 为了获得正常图像，100 ISO 的胶卷（或相机设置）比 100 的胶卷需要更多的光3200 ISO，因此使用 3200 ISO 胶片进行夜间摄影。

下一步：相机的事情。当您想拍摄照片（= 让光子撞击您的 CCD 或胶卷）时，您需要打开相机的光圈。根据您打开隔膜的程度，您的图像的性质会发生变化（从艺术的角度来看）。如果您的光圈全开，大部分未完全对焦的图像会变得模糊（例如在人像摄影中使用的那样）。相反，如果您的光圈在曝光期间只打开一点点，那么您的大部分图像都会非常清晰。这经常用于风景摄影。

由于您的胶卷（或 CCD）在给定 ISO 值下需要一定数量的光，因此很明显，较小的光圈开口需要较长的曝光时间，而较大的光圈需要很短的时间。

Good books about this subject are the series "The Camera", "The Negative" and "The Print" by Ansel Adams.

Conclusion: exposure and gamma correction are different things. - Exposure is a part of the parameters you need to control while creating your initial image through the use of a camera. - Gamma correction is related to subsequent manipulation of your image file. I'm not sure if the notion of "gamma correction" is being used in the context of film.

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-10-02T08:04:07.100

基本上：

伽玛是一个监视器。

曝光是相机的事情。

# java - 在java代码中使用双语拼写字典

> ID：12686321
> 
> 赞同：0
> 
> 时间：2012-10-02T07:45:22.257
> 
> 标签：java, dictionary, spelling

我见过一些类似的主题，但它们似乎并没有解决我的问题。

我正在开发一个需要拼写检查的 java 应用程序。我必须使用的两种语言是英语和希腊语。所以我需要检查一个单词的拼写，如果它不正确，用适当的单词替换错误的单词。

有没有人有如何做到这一点的经验？

# javascript - 淘汰赛JS绑定到对象的属性

> ID：12686324
> 
> 赞同：9
> 
> 时间：2012-10-02T07:45:33.907
> 
> 标签：javascript, html, mvvm, knockout.js

我需要将一些 HTML 绑定到一个对象，但我的问题是我在开发时不知道该对象的属性。

我的主视图模型中有一个`selectedItem`属性，我已绑定到我的 HTML 中的一个部分：

```
<div data-bind="with: selectedItem">

</div> 
```

现在我想根据属性名称和属性值生成一个表：

```
<div data-bind="foreach: [WHAT DO I PUT HERE?]">
    <label class="control-label"><span data-bind="text: [OR HERE?]" /></label>
</div> 
```

我真的不知道该怎么做。任何帮助是极大的赞赏。

另外，只是稍微扩展一下，我想以不同的方式处理绑定对象的属性，例如，如果该属性只是一个原始类型，则将其输出，但如果它是另一个对象/数组，则对其进行特殊处理。

这可以做到吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T11:43:16.967

如果其他人正在寻找绑定简单对象的属性。你可以这样做...

```
<table>
    <tbody data-bind="foreach: arrayOfObjects">
        <tr data-bind="foreach: Object.keys($data)">
            <td data-bind="text: $parent[$data]"></td>
        </tr>
    </tbody>
</table> 
```

注意：旧版浏览器不支持 object.keys，但您可以使用它来添加向后兼容性[http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation](http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T08:13:20.397

[这](http://jsfiddle.net/jQ2At/)是一个使用*计算的 observable*在运行时选择要显示的数据的工作示例。动态选择的[模板](http://knockoutjs.com/documentation/template-binding.html)也用于根据要渲染的数据类型（数组或标量）来渲染数据。

# c++ - boost::asio 充满了警告

> ID：12686327
> 
> 赞同：1
> 
> 时间：2012-10-02T07:46:13.750
> 
> 标签：c++, boost, warnings, boost-asio

这个程序实际上并没有做任何事情，但它构建了[182 个警告](http://pastebin.com/DKCXWdjc)，所有这些似乎都是`boost`代码中的问题。我应该对此做些什么，也许使用不同的库，还是应该只使用`boost::asio`并忽略所有警告？

* * *

```
// main.cpp
#include <boost/asio.hpp>
#include <boost/asio/ssl.hpp>

int main() {
    exit(0) ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:56:52.907

这对于许多 boost（和第三方）库来说很常见。我会将它们视为[系统标头](http://gcc.gnu.org/onlinedocs/cpp/System-Headers.html)。例如，使用 gcc 传递`-isystem`命令行选项或将 boost 标头移动到被视为系统标头目录的目录。

Boost 还有一个[警告指南页面](https://svn.boost.org/trac/boost/wiki/Guidelines/WarningsGuidelines)，可能会有所帮助。见`Suppressing Warnings in GCC`。

# javascript - 在不刷新页面的情况下更新网站的 CSS

> ID：12686331
> 
> 赞同：81
> 
> 时间：2012-10-02T07:46:23.397
> 
> 标签：javascript, jquery, html, css, ajax

我用 CSS 创建了一个页面。现在我必须从我的编辑器切换到我的浏览器并刷新整个页面，只是为了看看每一个微小的变化。但我不想刷新页面，因为我有一些动画。

那么，在 CSS 更新后，我的网站会自动更新吗？
也许使用 JavaScript、jQuery、Ajax 或其他东西？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-02T07:48:02.023

你在这里：[http ://cssrefresh.frebsite.nl/](http://cssrefresh.frebsite.nl/)

CSSrefresh 是一个小型的、通畅的 javascript 文件，用于监控网页中包含的 CSS 文件。保存 CSS 文件后，更改会直接实施，无需刷新浏览器。

只需插入 javascript 文件，它就可以工作了！

但请注意：仅当您在服务器上有文件时它才有效！

* * *

## 编辑：生活风格

如果您使用[Sublime Text](http://www.sublimetext.com/)和 Google Chrome 或 Apple Safari 进行开发，那么您应该使用[Emmet LiveStyle](http://livestyle.emmet.io/)。这是一个更强大的 Live CSS-Reloader。
现在我用它代替*CSS Refresh*。

如果您想了解更多关于这个很棒的插件的信息，请阅读[Smashing Magazine 的帖子](http://coding.smashingmagazine.com/2013/08/08/release-livestyle-css-live-reload/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T07:48:24.923

使用 jQuery，您可以创建一个重新加载外部样式表的函数。

```
/**
 * Forces a reload of all stylesheets by appending a unique query string
 * to each stylesheet URL.
 */
function reloadStylesheets() {
    var queryString = '?reload=' + new Date().getTime();
    $('link[rel="stylesheet"]').each(function () {
        this.href = this.href.replace(/\?.*|$/, queryString);
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-07T20:59:13.347

看看[http://livereload.com/](http://livereload.com/)。

它作为 OS X 和 windows 的浏览器插件工作。我喜欢它，因为我不必在我的版本控制中嵌入可能不小心提交的额外 javascript。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T02:15:42.123

我发现浏览器插件/扩展是最简单的解决方案。它们不需要对您的各个站点进行任何代码更改。它们可以用于网络上的任何站点——如果我快速修改内存中的内容以隐藏工具栏或临时修复错误，这将非常有用；完成处理后，我可以按一个键，所有 CSS 都恢复正常。

安装后，（大多数）CSS 重新加载插件/扩展不会自动重新加载 CSS。但通常使用一些简单的东西，如工具栏按钮、上下文菜单项和/或简单的按键来重新加载 CSS。我发现这种方法无论如何都不太容易出错，并且比那里的一些自动化解决方案要简单得多。

一些例子（随意提出一些其他的）：

铬合金：

*   [tin.cr](http://tin.cr/)（包括自动重新加载，并且可以在浏览器中对源文件进行持久更改）
*   [CSS 刷新](https://chrome.google.com/webstore/detail/css-refresh/ojcnooebgeenefpfngjfifjcnhlkbbdd)

火狐：

*   [重新加载 CSS](https://addons.mozilla.org/en-US/firefox/addon/css-reloader/)
*   [CSS 刷新](https://addons.mozilla.org/en-us/firefox/addon/css-refresh-199425/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-11T08:11:44.970

这是我的小项目。请在 Github 上尝试一下
[CSS Auto reload](http://nv.github.com/css_auto-reload/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-13T19:32:38.117

FireFox 的萤火虫。

它是附加/单独窗口中的插件。对 HTML/CSS 的更改会立即出现，元素会突出显示。

JS hacks 的优势在于您不能意外地将其复制到您的生产实例中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-02T07:50:29.443

是的，您可以操纵`CSS`via `jQuery`：

```
$(".classToBeReplaced").switchClass( "classToBeReplaced", "newClass", 1000 ); 
```

您也可以使用该`toggleClass`方法。

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

[http://jqueryui.com/demos/switchClass/](http://jqueryui.com/demos/switchClass/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-12T05:41:41.470

您正在寻找实时重新加载：

它可作为浏览器扩展使用，易于实现

[http://livereload.com/](http://livereload.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-14T05:57:42.753

新的开源代码编辑器，[括号](http://brackets.io/)，具有**实时开发**功能，您可以在编辑器中编辑 CSS，它会立即反映在 chrome 浏览器中。它目前仅适用于 CSS 编辑，但 HTML 编辑即将推出！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-14T20:24:15.293

Firebug for Firefox 是我的首选方法： [https](https://addons.mozilla.org/de/firefox/addon/firebug/) ://addons.mozilla.org/de/firefox/addon/firebug/ 您可以即时编辑 HTML 和 CSS，快速停用 CSS 规则（不删除它们），添加或删除 HTML等等。如果您不想调整您的设计，这是您的选择。您甚至可以将更改保存到本地副本，但我几乎从未使用过该功能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-11T11:24:46.747

这可能会有所帮助-> [chaicode](http://chaicode-3lads.rhcloud.com/)

它是一个开源和 wip 的实时 CSS、Javascript 和 HTML 编辑器。 [github](http://github.com/zeusdeux/chaicode)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-15T10:10:58.743

如果您使用的是 Firefox，那么您可以从 Firefox 的附加组件安装 Web Developer Toolbar 1.2.2，该附加组件具有重新加载链接样式表的选项。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-16T22:22:04.537

尝试使用[CSS Brush](https://chrome.google.com/webstore/detail/css-brush/mamnhhinmmdpcipjnhflillmhnogoobj?hl=en-US)，一个用于实时创建 CSS 的 chrome 插件。您不必在文本编辑器中编写所有 CSS，返回浏览器并重新加载它，而是像在文本编辑器中那样实时编写 CSS。您将拥有比文本编辑器更多的功能，例如上下文相关菜单、使用重复属性、直接从页面选择完整的 CSS 路径或元素的过滤路径。

# php - Magento - 更改属性排序

> ID：12686332
> 
> 赞同：2
> 
> 时间：2012-10-02T07:46:28.763
> 
> 标签：php, zend-framework, magento, magento-1.7

我正在尝试更改我的产品的排序方式。

我想使用按选项排序的属性，而不是按名称排序，而是按“管理属性”中给出的位置排序。但只有当有一个位置时（当全部为 0 时，它应该按名称排序）。

为此，我需要知道在哪个文件中将排序应用于产品集合。我在 app\code\core\Mage\Catalog\Model\Config.php 和 app\code\core\Mage\Catalog\Block\Product\List.php 中进行了搜索，但都没有找到任何关于排序的信息。也许还有一些代码建议。

谷歌也没有帮助我解决这个问题，所以我在这里尝试一下。也许有人可以帮我解决这个问题。

谢谢

**编辑：**

作为示例，我们采用“颜色”属性，它是一个下拉属性。

“管理属性”中的表格如下所示：

```
Valuename   |   Position
========================
light blue  |       1
blue        |       2
dark blue   |       3
light red   |       4
red         |       5
dark red    |       6 
```

在前端，我按属性“颜色”排序，我的产品将以这种方式列出：

```
blue
dark blue
dark red
light blue
light red
red 
```

但我希望它像这样列出：

```
light blue
blue
dark blue
light red
red
dark red 
```

**编辑2：**

```
 public function getAllOptions($withEmpty = true, $defaultValues = false)
    {
        $storeId = $this->getAttribute()->getStoreId();
        if (!is_array($this->_options)) {
            $this->_options = array();
        }
        if (!is_array($this->_optionsDefault)) {
            $this->_optionsDefault = array();
        }
        if (!isset($this->_options[$storeId])) {
            $collection = Mage::getResourceModel('eav/entity_attribute_option_collection')
                ->setPositionOrder('asc')
                ->setAttributeFilter($this->getAttribute()->getId())
                ->setStoreFilter($this->getAttribute()->getStoreId())
                ->load();
            $this->_options[$storeId]        = $collection->toOptionArray();
            $this->_optionsDefault[$storeId] = $collection->toOptionArray('default_value');
        }
        $options = ($defaultValues ? $this->_optionsDefault[$storeId] : $this->_options[$storeId]);
        if ($withEmpty) {
            array_unshift($options, array('label' => '', 'value' => ''));
        }
        return $options;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:21:54.033

如果您想使用实际的**颜色**属性，这几乎是不可能实现的。产品集合可以从 EAV 结构中获取每种颜色的文本值，并基于它进行排序。但是属性选项表没有加入到集合中，因此它无法知道您为选项设置的*位置。*

我会为此制定一个解决方法，也许不是最好的整体解决方案，但你会得到你想要的。

使用类似**排序**颜色和标签*颜色*的代码和数字选项（例如 1、2、3）创建一个属性。并为每个产品分配适当的值（因此“浅蓝色”为 1，“蓝色”为 2 - 依此类推）。然后从排序中删除实际的**颜色**属性，并添加新创建的排序**颜色**。

正如我所说的不是确切的解决方案，但如果您选择搞乱产品集合排序，您可能会陷入困境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T19:59:03.437

我发现 Mage_Eav_Model_Entity_Attribute_Source_Table 中的函数 addValueSortToCollection 定义了排序顺序。通过向表中添加 LEFT JOIN`eav_attribute_option`并拉入`sort_order`字段，我能够按属性的 adminhtml 位置进行排序。我还没有完全测试，但它似乎做我想要的。

我创建了一个单独的模块来重写这个类，唯一的修改是添加ValueSortToCollection，在这一行下面：

```
Mage::getResourceModel('eav/entity_attribute_option')
        ->addOptionValueToCollection($collection, $this->getAttribute(), $valueExpr); 
```

我添加了以下加入，并修改了 getSelect 语句以按位置第 1 位排序，然后按字母顺序排在第 2 位：

```
// add join here to pull in sort_order for attribute
$collection->getSelect()->joinLeft(
        array($this->getAttribute()->getAttributeCode() . '_option' => 'eav_attribute_option'), "{$this->getAttribute()->getAttributeCode()}_option_value_t1.option_id=" . $this->getAttribute()->getAttributeCode() . "_option.option_id"
);

$collection->getSelect()
        ->order("sort_order {$dir}")  // Add sort_order to the select statement
        ->order("{$this->getAttribute()->getAttributeCode()} {$dir}");

return $this; 
```

}

希望有人觉得这很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:50:22.063

*我也面临同样的问题，并通过使用一些自定义代码解决了它：我想在这里分享，以便有人会从中得到想法：首先，我得到了所有颜色的属性选项，按它们的位置排序*

```
$attribute = Mage::getSingleton('eav/config')->getAttribute('catalog_product', 'color');
if ($attribute->usesSource())
{

$options = $attribute->getSource()->getAllOptions('positions');

}

foreach($options as $val)
{   
$color_attr_array[] = $val['label'];
} 
```

我获得了按位置排序的所有颜色属性选项

```
foreach($childProducts as $_childProduct)
{
//get the attribute option of a particular product and find itd key from the attributes array

$color_attr_val = $_childProduct->getAttributeText('color');

$color_pos = array_search($color_attr_val,$color_attr_array);

//make a new array with key indexes of attribute options

$_childproduct_final_arr[$color_pos] =  $_childProduct;

}

ksort($_childproduct_final_arr); 
```

//这是按属性选项位置排序的最终产品数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:01:26.290

德

只需打开这个文件**Mage/Eav/Model/Entity/Attribute/Source/table.php**并且有一个函数是 getAllOptions() 在其中尝试这个

```
 $collection = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setPositionOrder('asc')
            ->setAttributeFilter($this->getAttribute()->getId())
            ->setStoreFilter($this->getAttribute()->getStoreId())
            ->load(); 
```

或者

请尝试在 app/code/core/Mage/Catalog/Model/Config.php 中查看天气是否有评论：

```
public function getAttributeUsedForSortByArray()
{
  $options = array(
   **‘position’ => Mage::helper(‘catalog’)->__(‘Position’)**
);
foreach ($this->getAttributesUsedForSortBy() as $attribute) {
 /* @var $attribute Mage_Eav_Model_Entity_Attribute_Abstract */
  $options[$attribute->getAttributeCode()] = $attribute->getStoreLabel();
}

  return $options; 
```

}

这可能会帮助你

如果您仍然遇到任何问题，请告诉我

# string - 如何区分 Perl 中的数字标量和字符串标量？

> ID：12686335
> 
> 赞同：20
> 
> 时间：2012-10-02T07:46:29.243
> 
> 标签：string, perl, types, integer

Perl 通常将数字转换为字符串值，反之亦然。然而，必须有一些东西允许例如`Data::Dumper`区分两者，如本例所示：

```
use Data::Dumper;
print Dumper('1', 1);

# output:
$VAR1 = '1';
$VAR2 = 1; 
```

是否有一个 Perl 函数允许我以类似的方式区分标量的值是存储为数字还是字符串？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T16:02:43.163

标量有许多不同的字段。当使用 Perl 5.8 或更高版本时，Data::Dumper 检查 IV（整数值）字段中是否有任何内容。具体来说，它使用类似于以下内容的内容：

```
use B qw( svref_2object SVf_IOK );

sub create_data_dumper_literal {
    my ($x) = @_;  # This copying is important as it "resolves" magic.
    return "undef" if !defined($x);

    my $sv = svref_2object(\$x);
    my $iok = $sv->FLAGS & SVf_IOK;
    return "$x" if $iok;

    $x =~ s/(['\\])/\\$1/g;
    return "'$x'";
} 
```

检查：

*   有符号整数 (IV)：`($sv->FLAGS & SVf_IOK) && !($sv->FLAGS & SVf_IVisUV)`
*   无符号整数 (IV)：`($sv->FLAGS & SVf_IOK) && ($sv->FLAGS & SVf_IVisUV)`
*   浮点数 (NV)：`$sv->FLAGS & SVf_NOK`
*   降级字符串（PV）：`($sv->FLAGS & SVf_POK) && !($sv->FLAGS & SVf_UTF8)`
*   升级字符串（PV）：`($sv->FLAGS & SVf_POK) && ($sv->FLAGS & SVf_UTF8)`

你可以使用类似的技巧。但请记住，

*   将浮点数字符串化而不丢失是非常困难的。

*   您需要正确转义字符串文字中的某些字节（例如 NUL）。

*   一个标量可以存储多个值。例如，`!!0`包含一个字符串（空字符串）、一个浮点数 ( `0`) 和一个有符号整数 ( `0`)。如您所见，不同的值甚至并不总是相等的。有关更戏剧性的示例，请查看以下内容：

    ```
     $ perl -E'open($fh, "non-existent"); say for 0+$!, "".$!;'
      2
      No such file or directory 
    ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-02T08:16:41.043

它更复杂。Perl 根据使用变量的上下文改变变量的内部表示：

```
perl -MDevel::Peek -e '
    $x = 1;    print Dump $x;
    $x eq "a"; print Dump $x;
    $x .= q(); print Dump $x;
'
SV = IV(0x794c68) at 0x794c78
  REFCNT = 1
  FLAGS = (IOK,pIOK)
  IV = 1
SV = PVIV(0x7800b8) at 0x794c78
  REFCNT = 1
  FLAGS = (IOK,POK,pIOK,pPOK)
  IV = 1
  PV = 0x785320 "1"\0
  CUR = 1
  LEN = 16
SV = PVIV(0x7800b8) at 0x794c78
  REFCNT = 1
  FLAGS = (POK,pPOK)
  IV = 1
  PV = 0x785320 "1"\0
  CUR = 1
  LEN = 16 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-02T08:18:43.137

使用纯 perl 无法找到这一点。Data::Dumper 使用一个 C 库来实现它。如果被迫使用 Perl，如果字符串看起来像十进制数字，它就不会区分字符串和数字。

```
use Data::Dumper;
$Data::Dumper::Useperl = 1;
print Dumper(['1',1])."\n";

#output
$VAR1 = [
          1,
          1
        ]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-02T14:01:04.780

根据您的评论，这是为了确定 SQL 语句是否需要引用，我想说正确的解决方案是使用 DBI 文档中描述的占位符。

通常，您不应直接在查询字符串中插入变量。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-08T16:43:38.467

一个没有提到的简单解决方案是 Scalar::Util 的[looks_like_number](https://metacpan.org/module/Scalar%3a%3aUtil#looks_like_number-EXPR)。Scalar::Util 是自 5.7.3 以来的核心模块，looks_like_number 使用[perlapi](http://perldoc.perl.org/perlapi.html#looks_like_number)来确定标量是否为数字。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-23T19:27:00.680

[autobox](https://metacpan.org/pod/autobox)`autobox::universal`附带的模块提供了一个可用于此目的的功能：[`type`](https://metacpan.org/pod/autobox#EXPORTS)

```
use autobox::universal qw(type);

say type("42");  # STRING
say type(42);    # INTEGER
say type(42.0);  # FLOAT 
say type(undef); # UNDEF 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-02T08:32:25.160

当变量用作数字时，这会导致变量在后续上下文中被假定为数字。然而，反过来并不完全正确，如本例所示：

```
use Data::Dumper;

my $foo = '1';
print Dumper $foo;  #character
my $bar = $foo + 0;
print Dumper $foo;  #numeric
$bar = $foo . ' ';
print Dumper $foo;  #still numeric!
$foo = $foo . '';
print Dumper $foo;  #character 
```

人们可能期望第三个操作`$foo`放回字符串上下文（reversing `$foo + 0`），但事实并非如此。

如果您想*检查某物是否是数字*，标准方法是使用正则表达式。您检查的内容因您想要的数字而异：

```
if ($foo =~ /^\d+$/)      { print "positive integer" }
if ($foo =~ /^-?\d+$/)    { print "integer"          }
if ($foo =~ /^\d+\.\d+$/) { print "Decimal"          } 
```

等等。

检查内部存储的方式通常没有用——您通常不需要担心这一点。但是，如果您想复制 Dumper 在这里所做的事情，那没问题：

```
if ((Dumper $foo) =~ /'/) {print "character";} 
```

如果 Dumper 的输出包含单引号，则表示它显示的是一个以字符串形式表示的变量。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-02T14:48:51.840

您可能想尝试[`Params::Util::_NUMBER`](http://search.cpan.org/perldoc?Params%3a%3aUtil#_NUMBER_%24scalar)：

```
use Params::Util qw<_NUMBER>;

unless ( _NUMBER( $scalar ) or $scalar =~ /^'.*'$/ ) { 
   $scalar =~ s/'/''/g;
   $scalar = "'$scalar'";
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-02T08:22:55.657

我认为没有 perl 函数可以找到值的类型。可以找到 DS(scalar,array,hash) 的类型。可以使用正则表达式来查找值的类型。

# twig - NFS 的 Vagrant 文件访问问题

> ID：12686342
> 
> 赞同：4
> 
> 时间：2012-10-02T07:47:27.420
> 
> 标签：twig, nfs, vagrant

我正在使用 Ubuntu 服务器 10.04 LTS 机器运行 vagrant。我 Mac 上的本地文件夹安装了 NFS，除了一件事外一切正常。

我正在开发一个使用 Twig 作为模板系统的 PHP 项目，但是每当我在我的 Mac 上修改模板并保存它时，它需要两次刷新，然后 Twig 才能加载模板。第一次刷新我得到一个异常，告诉我找不到文件。第二次刷新很好，模板加载也很好。

当从 NFS 切换回默认的 VirtualBox 文件系统时，一切都很好，但我的开发站点变得非常缓慢，几乎到了无法使用的地步。

任何人都知道要朝哪个方向看或有明确的解决方案？

![抛出的异常](../Images/3ef3d3792a75681bde0bde5e968718bd.png)

# android - Android 4.1 模拟器不显示黑暗全息主题

> ID：12686343
> 
> 赞同：1
> 
> 时间：2012-10-02T07:47:30.620
> 
> 标签：android, android-emulator

每当我尝试在模拟器上预览我的应用程序时，它都会显示 holo.light 版本主题而不是深色主题。我尝试在 Eclipse 中更改主题，但仍然无法正常工作。

![在此处输入图像描述](../Images/4e674f4791ca73e727b3501987624874.png)

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<style name="AppTheme" parent="android:Theme.Holo" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T15:20:59.690

主题选择下拉菜单不会更新代码，它只是在编辑器中预览主题。

要永久更改应用程序中的主题，请在 Android Manifest 文件中定义主题，例如。

```
 <application
        ...
        android:theme="@android:style/Theme.Holo" > 
```

# jquery - JSON 使用 WCF 服务返回空值

> ID：12686346
> 
> 赞同：0
> 
> 时间：2012-10-02T07:47:50.273
> 
> 标签：jquery, asp.net, wcf, datacontractserializer

大家好，我是 JSON 和 WCF 服务的新手。我正在尝试使用 JSON 调用 wcf 服务，而我的参数是我的数据合同类之一。

这是我的数据合同类。

```
namespace Employee.Services.DataContracts
{
    using System;
    using System.Runtime.Serialization;

    [DataContract]
    public class ReqDataContract
    {
[DataMember]
        public long Type { get; set; }
[DataMember]
        public string ID { get; set; }
[DataMember]
        public DateTime? FDate { get; set; }
[DataMember]
public long? UserID { get; set; }
 }
} 
```

这是 myWCF 服务功能

```
public void SaveRequ(ReqDataContract request)
        {
            var req=request;
        } 
```

这是接口实现

```
[OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
        [return: MessageParameter(Name = "ReqData")]
void SaveRequ(ReqDataContract request); 
```

.js 文件（AJAX 调用）

```
var selection = "{ \"Type\": 55,\"ID\":'test@yahoo.com' ,\"FDate\":" + null + " ,\"UserID\": 'ASDAS'}";
searchData = searchData + (searchData != '' ? "," : "") + selection;
    if (searchData != null) {
        searchData = "[" + searchData + "]";
    }
var searchJSON = jQuery.toJSON(eval("(" + searchData + ")"));
    var strJSON = searchJSON.toString();

    params = '{\"request\":' + strJSON + '}';
    $.ajax({
        async: false, //To perform synchronize operation to get status
        type: "POST",
        url: servicePath + "SaveRequ",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: params,
        processData: true,
        success: function (data) {
          //  alert(data.ReqData);
        },
        error: function (xhr, result, id) { alert(xhr.responseText); }
    }); 
```

**一切正常，但问题是我在请求**参数中获取所有值 null ......我错过了什么吗？请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:22:52.340

这得到解决了吗？如果没有，对于 fdate 尝试一个有效值而不是 NULL 并查看是否有效。JSON.NET 可能是将 null 从 JSON 处理为对象的更好解决方案。

# java - 为什么 DurationFormatUtils 忽略格式中的年份？

> ID：12686347
> 
> 赞同：1
> 
> 时间：2012-10-02T07:47:51.633
> 
> 标签：java, apache-commons, duration

我有这个代码：

```
return DurationFormatUtils.formatDuration(2034430000000L, yyyy-MM-dd_HH:mm:ss.SSS) 
```

结果是：`0000-00-23546_15:26:40.000`

为什么年份和天数都是 0 和这么多天？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:52:56.920

因为文档是这样说的：[`DurationFormatUtils.formatDuration()`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/time/DurationFormatUtils.html#formatDuration%28long,%20java.lang.String,%20boolean%29).

从文档：

> 此方法使用格式模式的天数和较低字段来格式化持续时间。不使用月份和更大的月份。

原因是当您谈论持续时间时，一个月是多长时间？一年有多长？一个月是可变的天数，一年也是如此。现在，如果这些持续时间是固定的，那么这样的事情*就*有意义了；在这些情况下，这些就是 Joda-Time 所说的周期。

但一般来说，持续时间只是几毫秒，所以几个月和几年真的没有意义。

# android - 如何在Android中的mapview上方画一个圆圈？

> ID：12686349
> 
> 赞同：0
> 
> 时间：2012-10-02T07:47:57.170
> 
> 标签：android, google-maps, android-canvas

我想在 Android 中的 Google Maps MapView 上方的图层上画一个圆圈。我的意思是 - 地图视图的中心有一个红色圆圈，但无论我移动我的地图 - 这个圆圈应该始终位于我的视图中心 - 类似于地图视图上方的一层。

你能告诉我怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:59:36.247

使用 a `FrameLayout`，它的第一个孩子将是`MapView`，第二个孩子将是你的圈子（with `Gravity`= CENTER）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:25:52.180

为什么不使用简单的覆盖？就像是：

```
public class MapDemo extends MapActivity  { 
    MapView mMapView;
    CircleOverlay mCOverlay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        GeoPoint mapCentrePoint = new GeoPoint(51500000, 0);
        mMapView = (MapView) findViewById(R.id.mapview);
        MapController mapCtrlr = mMapView.getController();
        mapCtrlr.setZoom(8);
        mapCtrlr.setCenter(mapCentrePoint);
        List<Overlay> listOfOverlays = mMapView.getOverlays();
        mCOverlay = new CircleOverlay(50.0f);
        listOfOverlays.add(mCOverlay);
    }

    @Override
    protected boolean isRouteDisplayed() {return false;}

    public class CircleOverlay extends com.google.android.maps.Overlay {
        Paint mPaint;
        float mRadius;
        public CircleOverlay(float radius) {
            super();
            mRadius = radius;
            mPaint = new Paint();
            mPaint.setColor(Color.RED);
            mPaint.setStyle(Style.STROKE);
            mPaint.setStrokeWidth(2);
        }
        @Override
        public boolean draw(Canvas canvas, MapView mv, boolean shadow,
                long when) {
            canvas.drawCircle(mv.getWidth()/2, mv.getHeight()/2, 
                    mRadius, mPaint);
            return false;
        }
    }
} 
```

.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T07:50:38.090

使用surfaceview [http://developer.android.com/reference/android/view/SurfaceView.html](http://developer.android.com/reference/android/view/SurfaceView.html)或FrameLayout [http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)怎么样？

# php - 从 HTML 文本匹配产品价格

> ID：12686350
> 
> 赞同：1
> 
> 时间：2012-10-02T07:47:59.150
> 
> 标签：php, regex, preg-match-all

我正在尝试在字符串上使用简单的正则表达式来获取定价信息，但我`preg_match_all`根本找不到它应该找到的东西。

我正在寻找例如，`$**.**`或者`£**.**`有时货币符号可能被编码为 HTML 实体，例如 GBP`&pound;`或`&#163;`

使用`preg_match_all`查找 html 实体有问题吗？

这是我正在尝试的：

```
$price = preg_match_all(
    '#(?:\$|\£|\€|\&pound;|\&#163;)(\d+(?:\.\d+)?)#', 
    $string, 
    $matches
); 
```

但我得到：未知修饰符'1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:18:04.333

这里有一些明显的错误：

**1)** `preg_match_all()`至少需要 3 个参数，所以它必须是

```
preg_match_all(
    '#(?:\$|\£|\€|\&pound;|\&#163;)(\d+(?:\.\d+)?)#', 
    $string, 
    $matches
); 
```

该`$matches`变量将包含匹配的字符串。您`$price`将包含模式匹配的次数。请参阅[http://php.net/preg_match_all](http://php.net/preg_match_all)了解更多信息。

**2）**您有一个未转义的分隔符：

```
'#(?:\$|\£|\€|\&pound;|\&#163;)(\d+(?:\.\d+)?)#'
 ^                       ^                    ^
 Start                   Unescaped            End 
```

修复这两个问题将使[代码在没有任何解析错误](http://codepad.viper-7.com/AbEh7a)的情况下运行。它还应该回答您关于匹配实体的字面问题。

但是，我有点怀疑 Regex 是否能实现您想要做的事情。价格并不总是列出`[CurrencySymbol][Amount]`。例如，欧元通常写成 100 欧元或 100 欧元。因此，您还必须检查符号之前的数字和之后的空格。

# xml - Joomla 自定义 xml 选项

> ID：12686352
> 
> 赞同：1
> 
> 时间：2012-10-02T07:48:05.733
> 
> 标签：xml, joomla, joomla2.5

我正在玩 joomla com_menus/models/forms/item.xml 文件。

我想使用此处 joomla 文档中所述的 SQL 表单字段类型的功能。

[http://docs.joomla.org/SQL_form_field_type](http://docs.joomla.org/SQL_form_field_type)

但我似乎无法弄清楚如何获得不止一个价值。

我的代码是这样的：

```
<field 

    name="link" 
    type="sql" 
    default="" 
    class="articleselectbox" 
    label="Select an article" 

    query="

    SELECT #__content.id, #__content.alias, #__content.title, #__content.catid, #__categories.id, #__categories.alias 

    FROM 

    #__content 

    LEFT JOIN #__categories ON #__content.catid=#__categories.id 

    ORDER BY #__content.title" 

    key_field="alias" 

    value_field="catid" /> 
```

我需要的是作为最终值：

```
#__categories.alias / #__content.id - #__content.alias . html 
```

所以输出将是：

```
poultry/12-organic-chicken-farming.html 
```

我可以得到一个值，但文档描述了如何检索更多的值。

有人对如何实现这一点有任何想法吗？

干杯。强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:46:16.727

Sql field type creates a dropdown so you can only select one value you can concat the values from sql. As per my understanding this may help-

```
<field 
    name="link" 
    type="sql" 
    default="" 
    class="articleselectbox" 
    label="Select an article"
    query="SELECT 
    concat(#__categories.alias, '/', #__content.id,'-', #__content.alias,'.html') as value,              
    concat(#__categories.alias, '/', #__content.id,'-', #__content.alias,'.html') as title 
    FROM #__content 
    LEFT JOIN #__categories ON #__content.catid=#__categories.id 
    ORDER BY #__content.title" 
    key_field="title" 
    value_field="value" 
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T09:25:24.313

```
 name="link"
    type="sql"
    multiple="false"
    size="1"
    label="Select an article "
    query="SELECT 
concat(#__categories.alias, '/', #__content.id,'-', #__content.alias,'.html') as value,              
concat(#__categories.alias, '/', #__content.id,'-', #__content.alias,'.html') as title 
FROM #__content 
LEFT JOIN #__categories ON #__content.catid=#__categories.id 
ORDER BY #__content.title"
    key_field="title"
    value_field="name"
    default="0"
    required="true"
    >
        <option value="">JOPTION_SELECT_LINK</option>
</field> 
```

现在它将显示所有

# c# - OnClick 事件在 WebPart 中不起作用

> ID：12686356
> 
> 赞同：0
> 
> 时间：2012-10-02T07:48:33.970
> 
> 标签：c#, sharepoint, web-parts

我有一个带有以下代码的简单 webpart，但是当我单击“UnAcceptClick”中的按钮代码时不起作用。

我错过了什么或做错了什么？

```
public class simple_wp : WebPart
{

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);

        CreateControlHierarchy();
    }

    private void CreateControlHierarchy()
    {

                unAccept.Text = "Cancel";
                unAccept.Click += new EventHandler(UnAcceptClick);

     ... some other code ... }   

    private void UnAcceptClick(object sender, EventArgs e)
    {
        ... some code ...
    }

    protected override void CreateChildControls()
    {
        try
        {
             Controls.Add(unAccept); // button
        }
        catch (Exception ex)
        {
            Controls.Add(new LiteralControl(ex.ToString()));
        }

    } // # CreateChildControls #
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:16:41.340

将此添加到`CreateChildControls`您的 init 方法中，而不是在应用程序的渲染中

```
protected override void CreateChildControls()
    {
        try
        {
             unAccept.Click += new EventHandler(UnAcceptClick);
             Controls.Add(unAccept); // button
        }
        catch (Exception ex)
        {
            Controls.Add(new LiteralControl(ex.ToString()));
        }

    } // 
```

# php - ftp_fput 与 ftp_put 有什么区别？

> ID：12686358
> 
> 赞同：7
> 
> 时间：2012-10-02T07:48:56.017
> 
> 标签：php, ftp

在 PHP 及其手册中，我无法清楚地找到`ftp_fput`vs之间的区别`ftp_put`。

*   [`ftp_fput`](http://php.net/ftp-fput)
*   [`ftp_put`](http://php.net/ftp-put)

有人可以澄清这两种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:51:19.507

`ftp_fput()`需要一个开放资源并且`ftp_put()`只使用一个（本地）文件名

```
ftp_put($foo, $bar, $filename, $baz);
ftp_fput($foo, $bar, fopen($filename, 'r+b'), $baz); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:51:46.037

*   ftp_fput
    *   “从打开的文件上传到 FTP 服务器”
*   ftp_put
    *   “将文件上传到 FTP 服务器”

更具体地说，`ftp_fput`将创建的资源`fopen`作为要上传的文件，其中`ftp_put`将文件名作为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:53:14.883

`ftp_put`需要一个文件名，而`ftp_fput`需要一个文件句柄：

```
ftp_put($conn_id, "remote_file_name.txt", "local_file_name.txt", FTP_ASCII); 
```

但

```
$file_handle = fopen("local_file_name.txt", "r");
ftp_fput($conn_id, "remote_file_name.txt", $file_handle, FTP_ASCII); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:51:09.057

`ftp_fput()`允许从文件中的某个位置开始。

# visual-studio-2010 - VS2010单元测试“Pending”，测试无法完成

> ID：12686360
> 
> 赞同：11
> 
> 时间：2012-10-02T07:49:04.907
> 
> 标签：visual-studio-2010, unit-testing

我正在使用 VS2010（使用 Windows 7）。

每次我尝试运行单元测试时，它都会停留在“待处理”状态，并且无法完成测试。

我试图按照这个[msdn 说明](http://msdn.microsoft.com/en-us/library/ms182532%28v=vs.100%29.aspx)进行操作。

我尝试了调试测试方法（测试视图/调试选择），设置断点，但VS2010显示：断点当前不会被命中...我在调试配置中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T17:06:00.427

如果您在同一个盒子上安装了 VS2010 和 VS2012，则需要为 VS2010 安装 SP1，否则单元测试有时将无法工作。（[此处提供 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:50:57.903

尝试做一个干净的解决方案（右键单击解决方案并清洁）。然后进行重建。那应该可以解决问题。

# asp.net - Visual Studio 2012、ASP.NET Web 表单和 HTML5

> ID：12686364
> 
> 赞同：0
> 
> 时间：2012-10-02T07:49:29.477
> 
> 标签：asp.net, html, webforms, visual-studio-2012, asp.net-4.5

我有一个与 Web 表单相关的问题。Visual Studio 2012 中提供的 ASP.NET Web 控件是否发出 HTML5 作为输出？

我知道我们可以使用自定义控件或内容适配器使 Web 控件发出 HTML5，即使使用 Visual Studio 2010 和可能支持 .NET 框架 2.0 的早期版本，但我对 DEFAULT 行为感兴趣；也就是说，无需进行任何工作或我们自己的实现。

那么你们有没有人检查过 Visual Studio 2012 中提供的 Web 控件的默认输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:49:44.190

有一个可用于 Visual Studio 的 Web 标准更新，它将[在此处输出可用的 HTML 5 控件](http://www.hanselman.com/blog/AnnouncingTheWebStandardsUpdateHTML5SupportForTheVisualStudio2010Editor.aspx)

但是通常 Visual Studio 将输出通用 HTML：

```
<select name="ctl00$ContentPlaceHolder1$reportName" id="ctl00_ContentPlaceHolder1_reportName" class="input-large">
        <option value="Finance">Finance</option>
        <option value="Sales">Sales</option>
        <option value="RealEstate">RealEstate</option>>

    </select> 
```

使用它自己的 ID 添加（如果未指定在 web.config 中不使用它

# iphone - 在 iOS 中保存照片的原始文件名

> ID：12686373
> 
> 赞同：0
> 
> 时间：2012-10-02T07:50:46.263
> 
> 标签：iphone, objective-c, ios, xcode

这是我在图像选择器中保存图像的方法，我的图像选择器`defaultRepresentation`使用`AlAsset`.

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask ,YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%u.png", i]];

ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];

//----resize the images
image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];

//----fix image orientation
image  = [image fixSlotOrientation];

NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:YES]; 
```

我的图像选择器是这样工作的：当按下按钮时，相机胶卷弹出，你选择你想要的相册，然后你可以选择图像（多张或单张）然后当按下完成时，它将保存到`NSCachesDirectory`. 最初，当按下按钮时，您仍然可以看到复选标记，但是当应用程序关闭时它就消失了。所以我正在考虑通过其原始路径保存它。

如何通过从原始路径获取图像来保存图像，然后将选择的图像（多个/单个）存储在 中`NSUserDefaults`，稍后（在应用程序从初始位置关闭后）我可以使用它再次重新加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:37:03.717

最初你在 NSUserDefault 中添加一个 NSMutableArray。

```
 [[NSUserDefault standardDefault] setObject:[NSMutableArray array] forKey:@"PickedImage"];
 [[NSUserDefault standardDefault] synchronize]; 
```

因此，您从 didFinishPickingMediaWithInfo 获取 imageURL：

```
NSURL *url = [info objectForKey:UIImagePickerControllerMediaURL];
if([[NSUserDefault standardDefault] objectForKey:@"PickedImage"])
{
   NSMutableArray arrImages = [[NSUserDefault standardDefault] objectForKey:@"PickedImage"];
   [arrImages addObject:url];

   [[NSUserDefault standardDefault] setObject:arrImages forKey:@"PickedImage"];
 [[NSUserDefault standardDefault] synchronize]; 
} 
```

# scala - SBT 通用构建设置

> ID：12686381
> 
> 赞同：8
> 
> 时间：2012-10-02T07:51:03.063
> 
> 标签：scala, sbt

我有多个 SBT 项目，它们都有一个共同的设置 - 例如多模块、publishTo 设置等。

我如何提供每个项目都可以从中扩展的通用例如 CommonBuild 类？例如：

```
trait CommonBuild {
  val publishSettings = Seq(
    publishTo := Some("", ""),
    credentials += ...
  )

  def module(name: String) (
    settings: Seq[Setting[_]],
    projectId: String = PROJECT + "-" + name,
    dirName: String = name,
    srcPath: String = PROJECT + name
    ) = Project(projectId, file(dirName), settings = (buildSettings ++ srcPathSetting(projectId, srcPath)) ++ publishSettings ++ settings)

} 
```

现在它可以被项目构建使用：

```
object ProjABuild extends CommonBuild {
   // use CommonBuild methods / vals
}

object ProjBBuild extends CommonBuild {
   // use CommonBuild methods / vals
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:47:38.083

我也想这样做。重要的是，公共设置需要存在于子项目所依赖的自己的项目中，以便对公共设置所做的更改自动在所有子项目中生效。实现这一点的唯一方法是将常用的东西放在 SBT 插件中。

我写了这样一个插件，叫做**iesl-sbt-base**。它提供了一堆样板文件，因此您项目的 Build.scala 文件可以非常简短。它提供：

*   解析器配置
*   通过自动更新简化依赖关系解析
*   明确使用了哪些传递依赖项
*   快照版本的可选保护
*   清理日志记录配置

有关详细信息，请参阅[https://github.com/iesl/iesl-sbt-base](https://github.com/iesl/iesl-sbt-base)。您可能想要分叉以更改特定于我的设置的内容（例如，特别是解析器 URL）。如果有需求，我可以考虑如何使其更具可配置性。

# javascript - 在不删除静态属性的情况下覆盖函数

> ID：12686389
> 
> 赞同：6
> 
> 时间：2012-10-02T07:51:58.050
> 
> 标签：javascript, function, static, constructor, extend

如果我有这样的功能：

```
function a() {
    console.log('a');
} 
```

然后像这样分配一个静态属性：

```
a.static = 'foo'; 
```

但是说我想用另一个这样的函数覆盖这个函数：

```
var old = a;

a = function() {
    console.log('new');
    old.call(this);
};

a.static // undefined 
```

由于我为 分配了一个新函数`a`，因此它的静态属性丢失了。有没有一种巧妙的方法来保持静态属性而不循环和手动复制它们？

**更新：**

这是一个真实的场景：在 Bootstrap jQuery 插件中，作者将默认值分配给属性函数，如下所示：

```
$.fn.modal = function() {
    // some code
};

$.fn.modal.defaults = { // some object }; 
```

因此，如果我想“扩展”原型，我通常会这样做：

```
var old = $.fn.modal;

$.fn.modal = function() {
    // do my thing
    old.apply(this, arguments);
} 
```

但这会让

```
$.fn.modal.defaults === undefined 
```

这会破坏功能，因为默认值会丢失。我想知道 javascript 中是否有一种偷偷摸摸的方式来*仅更改函数* 而不会丢失静态属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:09:53.970

不，你不能这样做。替换对象（函数）总是带有它的任何属性。

这里有两种解决方案，都涉及将属性从旧对象转移到新对象。

第一种（推荐）方法是复制属性，可以通过以下方式方便地完成`$.extend`：

```
$.fn.plugin = $.extend(function() { ... }, $.fn.plugin); 
```

第二个选项是将新函数的原型动态设置为旧函数。例如，在某些浏览器中，这会起作用：

```
var f = function() { ... };
f.__proto__ = $.fn.plugin;
$.fn.plugin = f; 
```

然而，这是非标准的，可能会引起并发症；不要这样做。

# java - BIRT 报告：Web 服务数据源不返回数据

> ID：12686391
> 
> 赞同：0
> 
> 时间：2012-10-02T07:52:29.307
> 
> 标签：java, xml, reporting, birt

我正在尝试使用 BIRT 数据源从 Web 服务中检索数据。服务器作为响应提供给我的数据如下所示：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:kpi="http_adress">
   <soap:Header/>
   <soap:Body>
      <kpi:someMethod>
         <!--Optional:-->
         <SomeList>
            <!--Zero or more repetitions:-->
            <SomeVariable oid="R2D2" versionNr="1.0">
               <!--Optional:-->
               <Variable1>10</Variable1>
               <!--Optional:-->
               <Variable2>Value</Variable2>
            </SomeVariable >
         </SomeList>
      </kpi:someMethod>
   </soap:Body>
</soap:Envelope> 
```

我的问题是 BIRT 中的数据集只有 3 个级别。它基本上告诉我选择该行作为数据行。

如何在数据集中获得那些变量 1 和变量 2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:37:14.387

我无法使用行映射来解决这个问题，因为 web 服务包含复杂的数据结构，所以我只使用了脚本数据源，并首先将 web 服务中的数据加载到 java 对象中（使用axis2），然后再将它们加载到报告中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:35:02.290

如果您的行映射指向 SomeList 那么您应该能够在列映射中选择 variable1 和 variable2。

# sql-server - SQL Server 2012 分析服务模式

> ID：12686393
> 
> 赞同：2
> 
> 时间：2012-10-02T07:52:38.273
> 
> 标签：sql-server

如何确定 SQL Server 2012 安装是否安装了 Analysis Services 表格模式或多维模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:01:21.073

几乎不值得回答，但[确定 Analysis Services 实例的服务器模式](http://msdn.microsoft.com/en-us/library/gg471594.aspx)包括：

> *   对象资源管理器中的服务器图标
>     
>     
>     
>     确定服务器模式的最简单方法是连接到 SQL Server Management Studio 中的服务器，并注意对象资源管理器中服务器名称旁边的图标。下图显示了以多维、表格和 PowerPivot 模式部署的三个 Analysis Services 实例

![在此处输入图像描述](../Images/9911697ada70b96aa5af493040f2ca4f.png)

> *   查看 MSMDSRV.INI 文件中的 DeploymentMode 属性
>     
>     
>     
>     或者，您可以检查包含在每个 Analysis Services 实例中的 msmdsrv.ini 文件中的 DeploymentMode 属性。此属性的值标识服务器模式。有效值为 0（多维）、1（SharePoint）或 2（表格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T20:29:15.877

```
# the script is run on a host where SSAS 2012 installed
add-type -AssemblyName "Microsoft.AnalysisServices, Culture=Neutral, Version=11.0.0.0, PublicKeyToken=89845dcd8080cc91";

$s=new-object "Microsoft.AnalysisServices.Server";
$s.connect( '<your_SSAS_instance>' );
$s.ServerMode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:55:44.437

你有这两个细节：

1 选择`Analysis Services from the Feature Tree in Setup`。或者，选择 SQL Server Data Tools 以在您的安装中包含表格模型设计器。 ![在此处输入图像描述](../Images/5c733685c5a8da198a2e830c727bcccc.png)

2 上`Analysis Services Configuration page`，一定要选择`Tabular Mode`。

![在此处输入图像描述](../Images/1ac1c311ac35a0969df7b28e60863e94.png)

# c++ - 如何使用 Swig 将 void * 函数参数视为 Python 字符串

> ID：12686400
> 
> 赞同：1
> 
> 时间：2012-10-02T07:53:06.973
> 
> 标签：c++, python, swig

这是我的 C++ 代码：

```
struct Impl
{
  DT* data_ptr_;

  Impl(void* data_ptr)
    : data_ptr_((DT*)data_ptr)
  {
    //do something to decipher data
  }
}; 
```

Impl 类采用 void 指针作为输入参数。

我想要做的只是传递一个 Python 字符串（Python 2.x 中的二进制字符串）作为参数：

```
data = "I'm a stirng data!"
impl = Impl(data) 
```

但是 Swig 生成的模块提出了这个问题

```
TypeError: in method 'new_Impl', argument 1 of type 'void *' 
```

我是 swig 的新手，现在已经在 SWIG 文档中搜索了一整天。唯一对我有用的是 swig 文档 8.3 C 字符串处理。但我的函数并没有真正采用大小整数。

我认为我的问题很简单，我必须遗漏一些东西，请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:14:39.123

我自己找到了解决方案。

因为我只需要 void* 指针作为输入：

```
%typemap(in) void* = char*; 
```

会成功的。

Swig 接受 char* 参数作为字符串类型，并将 void* 作为指针。所以使用 char* 输入类型就可以了。

# typescript - TypeScript 会支持解构赋值吗？

> ID：12686406
> 
> 赞同：5
> 
> 时间：2012-10-02T07:53:19.617
> 
> 标签：typescript

Typescript 会支持类似于 CoffeeScript 的解构赋值吗？

```
 foo = {x: 1, y: 2, z: 3}
 {x, z} = foo

 # which will yield
 x == 1 && z == 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:42:41.833

**是的，它会。**

在他们的错误跟踪器中看到这个问题：http: [//typescript.codeplex.com/workitem/15](http://typescript.codeplex.com/workitem/15)

`UPDATE:`现在支持此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T17:07:27.300

是的，它现在支持从 ES6 开始。您可以在浏览器（支持 ES6）控制台本身中测试代码，如下所示。

```
const user = {name: 'Robkuz', gender: 'Male', looks: 'Great'}
const {name, looks} = user; 
```

# c# - 将 DataType nvarchar 转换为十进制时出错

> ID：12686408
> 
> 赞同：0
> 
> 时间：2012-10-02T07:53:25.227
> 
> 标签：c#, asp.net

我正在努力解决一个错误。我检查了我的存储过程和代码，但我不知道问题实际存在于什么地方和位置。![错误。](../Images/be79918bd4315d8cb2703cc76e0b9b85.png)

我的 SP：

```
 ALTER PROCEDURE [dbo].[sp_Tbl_Contract_Insert]
    -- Add the parameters for the stored procedure here
    @ItemID int,
    @BrandID int,
    @CountID int,
    @SellerID int,
    @BuyerID int,
    @CountryFromID int,
    @countryToID int,
    @UnitID int,
    @KeyWinCountNumber varchar(50),
    @ContractNumber varchar(50),
    @ContractDate varchar(50),
    @TotalQty varchar(50),
    @Vans varchar(50),
    @UnitPrice decimal(18,2),
    @TotalAmount decimal(18,2)

    AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    -- Insert statements for procedure here

    Insert into Tbl_Contract (ItemID,BrandID,CountID,SellerID,BuyerID,
    CountryFromID,CountryToID,UnitID,
    KeyWinCountNumber,ContractNumber,ContractDate,TQty,Vans,
    UnitPrice,TAmount) values ( @ItemID,@BrandID,@CountID,@SellerID,@BuyerID,@CountryFromID,
    @countryToID,@UnitID,@KeyWinCountNumber,@ContractNumber,@ContractDate,@TotalQty,
    @Vans,@UnitPrice,@TotalAmount)

END 
```

代码：

```
if (ViewState["action"].ToString() == "Insert")
    {
        try
        {
            obj = new DalLib();
            paramArray = new string[16, 2];
            paramArray[0, 0] = "@ItemID";
            paramArray[0, 1] = ddlItem.SelectedValue.ToString();
            paramArray[1, 0] = "@BrandID";
            paramArray[1, 1] = ddlBrand.SelectedValue.ToString();
            paramArray[2, 0] = "@CountID";
            paramArray[2, 1] = ddlCount.SelectedValue.ToString();
            paramArray[3, 0] = "@SellerID";
            paramArray[3, 1] = ddlSellerName.SelectedValue.ToString();
            paramArray[4, 0] = "@BuyerID";
            paramArray[4, 1] = ddlBuyerName.SelectedValue.ToString();
            paramArray[5, 0] = "@CountryFromID";
            paramArray[5, 1] = ddlCountryFrom.SelectedValue.ToString();
            paramArray[6, 0] = "@countryToID";
            paramArray[6, 1] = ddlCountryTo.SelectedValue.ToString();
            paramArray[7, 0] = "@UnitID";
            paramArray[7, 1] = ddlUnit.SelectedValue.ToString();
            paramArray[8, 0] = "@KeyWinCountNumber";
            paramArray[8, 1] = txtkeyWinCount.Text;
            paramArray[9, 0] = "@ContractNumber";
            paramArray[9, 1] = txtContractNum.Text;
            paramArray[10, 0] = "@ContractDate";
            paramArray[10, 1] = txtContractDate.Text;
            paramArray[11, 0] = "@TotalQty";
            paramArray[11, 1] = txttotalqty.Text;
            paramArray[12, 0] = "@Vans";
            paramArray[12, 1] = txtVans.Text;
            paramArray[13, 0] = "@UnitPrice";
            paramArray[13, 1] = txtUnitPrice.Text;
            paramArray[14, 0] = "@TotalAmount";
            paramArray[14, 1] = txtTotal.Text;
            paramArray[15, 0] = "`";
            result = obj.setData("sp_Tbl_Contract_Insert", paramArray);
            mtvResult.ActiveViewIndex = 0;
            LoadData();
            EmptyFields();
        }
        catch
        {
        }
    } 
```

我的 DB_Columns： ![数据库表列](../Images/eb72fe67129ebb2da6a9e759c51a91fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:17:10.273

也许有人在您的价格字段中输入了文本（应该是小数），或者有人使用了 ，而不是 。

```
replace paramArray[13, 1] = txtUnitPrice.Text; 
```

with （并对所有数值做类似的事情）

```
paramArray = Convert.ToDecimal(txtUnitPrice.Text, new System.Globalization.CultureInfo("en-US")); 
```

如果您想使用“1.0”格式，如果您想要不同的格式，请使用其他文化信息。此外，您应该捕获 NumberFormatException 并告诉用户使用特定格式。万一用户使用了错误的格式或说出“我的年薪！”之类的话。:P

# java - 如何调用 Java 类的主函数？

> ID：12686414
> 
> 赞同：0
> 
> 时间：2012-10-02T07:53:55.180
> 
> 标签：java

例如：我有一个 Java 类，其主要功能是这样实现的：

```
public class Job{
    public static void main(String[] args) throws Exception{
        Job jobA = new Job();
        String jobName = System.getProperty("JobName");
        job.DoJobA("jobName");
    }

    public void DoJobA(String jobName){
        String configPath = System.getProperty("ConFig");
        File file = new File(configPath+ "/" + jobName);
        DoJobB(file);
    }
} 
```

我在另一个班级想调用 Job 班级的主要功能，但找不到办法做到这一点！对我有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T07:55:48.477

您应该能够像调用任何其他静态方法一样调用它

`Job.main(yourArgs);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:57:31.673

如果你让 main 方法使用 var args 那么你不需要传入任何变量

```
public static void main(String... args) throws Exception{
    ...
} 
```

那么你可以把它称为

```
Job.main(); 
```

如果你需要参数，那么你可以通过它们 if。

# c# - Socket编程中的异常处理

> ID：12686418
> 
> 赞同：-1
> 
> 时间：2012-10-02T07:54:17.900
> 
> 标签：c#, exception-handling

```
public partial class Form1 : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        String text = textBox1.Text;
        UdpClient udpc = new UdpClient(text,8899);
        IPEndPoint ep = null;

        while (true)
        {
            MessageBox.Show("Name: ");
            string name = "Connected";
            if (name == "") break;
            byte[] sdata = Encoding.ASCII.GetBytes(name);
            udpc.Send(sdata, sdata.Length);

            if (udpc.Receive(ref ep)==null)
            {
               MessageBox.Show("Host not found");               
            }
            else
            {                
                byte[] rdata = udpc.Receive(ref ep);
                string job = Encoding.ASCII.GetString(rdata);
                MessageBox.Show(job);
            }               
        }
    } 
```

当我的远程机器未连接时，我收到一条错误消息。使用此代码，我得到了错误。

```
if (udpc.Receive(ref ep)==null) 
```

错误消息是 **未处理套接字异常**（远程主机强行关闭了现有连接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:04:59.737

将代码包装在一个

```
try
{

}
catch(SocketException se)
{

}
catch(Exception ex)
{
} 
```

并从这里开始获取有关 SocketException 的文档

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:05:50.750

如果异常未处理，则处理异常：

```
 while (true)
    {
        MessageBox.Show("Name: ");
        string name = "Connected";
        if (name == "") break;
        byte[] sdata = Encoding.ASCII.GetBytes(name);

        try{
            udpc.Send(sdata, sdata.Length);
            byte[] rdata = udpc.Receive(ref ep);
            string job = Encoding.ASCII.GetString(rdata);
            MessageBox.Show(job);
        }
        catch(Exception ex)
        {
            MessaageBox.show(ex.toString());
        }
    } 
```

`try...catch`当程序访问外部资源（dbs、队列、文件系统、http 连接、udp 套接字等）时，总是建议使用该块。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T08:03:15.683

您可以将无限循环包装在 try catch 块中。

```
try
{
 while(true)
 {
   //your code
 } 
}
catch(Exception exception)
{
   //show exception.Message; 
}
finally{ //clean up} 
```

看看它是[怎么](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)做的。

# objective-c - 是否可以将方法放在 while 循环和或 if 语句中？

> ID：12686424
> 
> 赞同：1
> 
> 时间：2012-10-02T07:54:45.590
> 
> 标签：objective-c

试图从java转换为objective-c。我很难找到有关此主题的任何内容。我收到错误“语义问题”无法弄清楚。这是代码：

```
-(void) createColorPalatte{
for (int i=0; i<4; i++) {
    colorPalatte[i] = [self getRandomColor];
}}
-(BOOL) checkColorPalatte {
for (int i=0; i<4; i++) {
    for (int j=i+1; j<4; j++) {
        if ([getColorFroemPalatte[i]]==[getColorFromPalatte[j]] ) {
            return YES;
        }
    }
}
return NO; 
```

}

```
-(void) redoColorPalatte {
while (YES==[checkColorPalatte];) {
    [createColorPalatte];
} 
```

}

```
-(char) getColorFromPalatte: (int) index{
return colorPalatte[index]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:58:56.463

您还需要为您的方法提供目标，即调用它的实例。当然使用`:`而不是`[]`参数。

`[self checkColorPalette]`和`[self getColorFromPalette:i]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:14:56.107

这是我可以在您发布的方法中看到的修复：

```
-(BOOL) checkColorPalatte {
for (int i=0; i<4; i++) {
    for (int j=i+1; j<4; j++) {
        if ([self getColorFromPalatte:i]==[self getColorFromPalatte:j] ) { // CHANGED Froem typo and changed [getColorFromPalette[i]] to [self getColorFromPalette:i]
            return YES;
        }
    }
}
return NO;
}

-(void) redoColorPalatte {
while (YES==[self checkColorPalatte]) { // changed [checkColorPalatte]; to [self getColorPalatte]
    [self createColorPalatte]; // ADDED 'self'
}
} 
```

基本上记住 Java 中的约定`[object method]`或`[object methodArg: value]`位置，它更像是`object.method()`或`object.method(value)`

此外，调色板和颜色一样拼写为“调色板”（不是错误，而是拼写错误）。

# jpa - Ebean按预期生成带有undercase_notation而不是CamelCase的sql

> ID：12686427
> 
> 赞同：1
> 
> 时间：2012-10-02T07:54:58.010
> 
> 标签：jpa, playframework-2.0, ebean

我正在设置 Play！2 具有现有数据库的应用程序。实体已移植到新应用程序。运行应用程序时，我得到一个**PersistenceException**，因为 ebean 生成的 sql 使用 undercase_notation 而不是 CamelCase，因为它在我之前的应用程序中使用。所以我的**restfulIdentifier**属性变成了**restful_identifier_id** 而不是**restfulIdentifier_id**。

我已阅读[http://www.avaje.org/ebean/getstarted_props.html](http://www.avaje.org/ebean/getstarted_props.html)上的文档，但找不到设置。

**堆：**

```
PersistenceException: Query threw SQLException:Unknown column 't0.restful_identifier_id'
in 'field list' Bind values:[200926947] Query was: select t0.id c0, t0.name c1, t0.state c2,
t0.restful_identifier_id c3 from company t0 where t0.id = ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:16:42.080

您将不得不修改实体的元数据以告诉 JPA 您的列现在具有不同的名称。您正在使用注释或 XML 文件。但是，您需要编译源代码（或至少增强它）才能完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T19:59:33.370

这是一个非常古老的问题，但 Ebean 有 2 个命名约定实现——UnderscoreNamingConvention 和 MatchingNamingConvention ... 而 MatchingNamingConvention 将提供您所追求的骆驼大小写约定。

所以再一次，答案是做

```
 MatchingNamingConvention namingConvention = new MatchingNamingConvention();

  ServerConfig serverConfig = ...
  serverConfig.setNamingConvention(namingConvention); 
```

# jquery - 弹出消息：不适用于 jquery 1.7

> ID：12686429
> 
> 赞同：0
> 
> 时间：2012-10-02T07:55:00.990
> 
> 标签：jquery, popup

我对 jQuery 的版本有疑问。我使用的网站使用 jQuery 1.7 版。但是，我有一个在 1.4 版上运行的脚本。网站版本： `<script src="http://code.jquery.com/jquery-latest.min.js"></script> <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>`

脚本版本：`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>`

内容脚本：

```
<script type="text/javascript">
function openOffersDialog() {
    $('#overlay').fadeIn('fast', function() {
        $('#boxpopup').css('display','block');
        $('#boxpopup').animate({'left':'30%'},500);
    });
}

// PROBLEM WITH THIS PART (cant close popup):
function closeOffersDialog(prospectElementID) {
    $(function($) {
        $(document).ready(function() {
            $('#boxpopup').css('position','absolute');
            $('#boxpopup').animate({'left':'-100%'}, 500, function() {
                $('#boxpopup').css('position','fixed');
                $('#boxpopup').css('left','100%');
                $('#overlay').fadeOut('fast');
            });
        });
    });
}
</script> 
```

他们是否使用了一些旧功能 jquery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:59:30.613

我猜您的`closeOffersDialog()`函数是通过单击按钮或其他方式调用的。如果是这样，将函数内容包装在`DOMReady`侦听器中是没有意义的：

试试这个：

```
function closeOffersDialog(prospectElementID) 
{    
    $('#boxpopup').css('position','absolute');
    $('#boxpopup').animate({'left':'-100%'}, 500, function() {
        $('#boxpopup').css('position','fixed');
        $('#boxpopup').css('left','100%');
        $('#overlay').fadeOut('fast');
     });
} 
```

# jsf-2 - Primefaces民意调查未更新面板

> ID：12686434
> 
> 赞同：0
> 
> 时间：2012-10-02T07:55:11.517
> 
> 标签：jsf-2, primefaces

我不明白为什么我的 primefaces 投票不会更新任何组件。

```
<p:poll widgetVar="poll" 
                            interval="#{messageBean.refreshInterval}" 
                            listener="#{messageBean.refreshLiveData}" 
                            update=":transactionLogForm:tabViewMain:liveViewPanel"/> 
```

refreshLiveData 方法被成功调用，但它拒绝更新 outputText 组件（或任何与此相关的组件）。

```
 <p:tab id="liveViewTab" title="Live View">
                            <h:panelGrid id="liveViewPanel" columns="6" cellpadding="5">
                                <h:outputText value="Live View Enabled: " />  

                                <p:selectBooleanCheckbox value="#{messageBean.liveViewActive}">  
                                </p:selectBooleanCheckbox> 

                                <h:outputText value="Interval: " />  
                                <p:spinner id="interval" value="#{transactionLogBean.refreshInterval}" />  
                                <h:outputText value="Last Update:" />  
                                <h:outputText id="lastUpdated" value="#{transactionLogBean.lastUpdated}" />  
                            </h:panelGrid>
                        </p:tab> 
```

以下是正文标签中的完整代码：

```
 <p:layout id="mainLayout" fullPage="true" style="height:100%"  >

            <h:form id="transactionLogForm">

                <p:poll widgetVar="poll" 
                        interval="#{messageBean.refreshInterval}" 
                        listener="#{messageBean.refreshLiveData}" 
                        update=":transactionLogForm:tabViewGrids:messageTable :transactionLogForm:tabViewGrids:timestatTable :transactionLogForm:tabViewMain:liveViewPanel"/>

                <p:layoutUnit id="topHeader" position="north" size="178" >

                    <ui:include src="inc_menu.xhtml" />

                </p:layoutUnit>

                <p:layoutUnit id="center" position="center" >

                    <div>
                        <p style="font-size: 20px; font-weight: bold; padding: 0px 0px 0px 10px">Transaction Logs</p>
                    </div>

                    <p:tabView id="tabViewMain" orientation="top">
                        <p:tab title="Reference No">
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:inputTextarea id="referenceNo" rows="1" cols="100" value="#{transactionBean.referenceNo}" style="width:300px"/> 
                                <p:commandButton id="refreshBtnMain0" value="Search" action="#{transactionBean.searchTranLogDetails(true)}" 
                                                 update=":transactionLogForm:transactionSearchTable" ajax="true"
                                                 oncomplete="txnDialog.show()"
                                                 style="vertical-align: baseline"/>
                            </h:panelGrid>
                        </p:tab>
                        <p:tab title="Log Id">
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:inputText id="logID" value="#{transactionLogBean.logID}" style="width:300px"/> 
                                <p:commandButton id="refreshBtnMain1" value="Refresh" action="#{transactionLogBean.refreshData}" update=":transactionLogForm:tabViewGrids:messageTable :transactionLogForm:tabViewGrids:timestatTable" ajax="true" />
                            </h:panelGrid>
                        </p:tab>
                        <p:tab title="Date Range">
                            <h:panelGrid columns="5" cellpadding="5">
                                <h:outputText value="Start Date:" />
                                <p:calendar id="StartDate" pattern="dd/MM/yyyy HH:mm:ss" navigator="true" value="#{transactionLogBean.startDate}" />  
                                <h:outputText value="End Date:" />
                                <p:calendar id="EndDate" pattern="dd/MM/yyyy HH:mm:ss" navigator="true" value="#{transactionLogBean.endDate}" />  
                                <p:commandButton id="refreshBtnMain2" value="Refresh" action="#{transactionLogBean.refreshData}" update=":transactionLogForm:tabViewGrids:messageTable :transactionLogForm:tabViewGrids:timestatTable" ajax="true" />
                            </h:panelGrid>
                        </p:tab>

                        <p:tab id="liveViewTab" title="Live View">
                            <h:panelGrid id="liveViewPanel" columns="6" cellpadding="5">
                                <h:outputText value="Live View Enabled: " />  

                                <p:selectBooleanCheckbox value="#{messageBean.liveViewActive}">  
                                </p:selectBooleanCheckbox> 

                                <h:outputText value="Interval: " />  
                                <p:spinner id="interval" value="#{transactionLogBean.refreshInterval}" />  
                                <h:outputText value="Last Update:" />  
                                <h:outputText id="lastUpdated" value="#{transactionLogBean.lastUpdated}" />  
                            </h:panelGrid>
                        </p:tab>

                    </p:tabView>

                    <p:tabView id="tabViewGrids">
                        <p:tab title="Message Logs">
                            <ui:include src="inc_messagelogs.xhtml" />
                        </p:tab>

                        <p:tab title="Timestat Logs">
                            <ui:include src="inc_timestatlogs.xhtml" />
                        </p:tab>
                    </p:tabView>

                    <p:dialog header="Log Message" widgetVar="logDialog" id="logDlg" showEffect="fade">  

                        <h:outputText id="msg" value="#{transactionLogBean.selectedLogMessage}"/>  

                    </p:dialog> 

                    <p:dialog header="Transaction Search Results" widgetVar="txnDialog" resizable="false" id="tranDlg"  
                              showEffect="fade" modal="false" position="center">  

                        <p:dataTable id="transactionSearchTable" value="#{transactionBean.tranlogList}" 
                                     var="t" widgetVar="tranSearchTable" rowKey="#{t.transactionId}" 
                                     selectionMode="single" selection="#{transactionBean.selectedTranlog}" 
                                     paginator="true" rows="10" style="font-size:14px"
                                     rowStyleClass="#{t.rowColour}">

                            <p:ajax event="rowSelect" update=":transactionLogForm:tabViewGrids:messageTable :transactionLogForm:tabViewGrids:timestatTable" 
                                    listener="#{transactionLogBean.refreshData(transactionBean.selectedTranlog.logId)}" 
                                    oncomplete="txnDialog.hide()" global="false"/>                                  

                            <p:column style="text-align: left">
                                <f:facet name="header">
                                    Tran Id
                                </f:facet>
                                #{t.transactionId}
                            </p:column>

                            <p:column  style="text-align: left" sortBy="#{t.dateCreated}">
                                <f:facet name="header">
                                    Date/Time
                                </f:facet>
                                #{t.dateCreated}
                            </p:column>

                            <p:column  style="text-align: left" sortBy="#{t.transactionType}">
                                <f:facet name="header">
                                    Tran Type
                                </f:facet>
                                #{t.transactionType}
                            </p:column>

                            <p:column  style="text-align: left">
                                <f:facet name="header">
                                    Amount
                                </f:facet>
                                #{t.amount}
                            </p:column>

                            <p:column  style="text-align: left">
                                <f:facet name="header">
                                    Result
                                </f:facet>
                                #{t.externalMessageCode}
                            </p:column>

                        </p:dataTable>

                    </p:dialog> 

                </p:layoutUnit>

            </h:form>

        </p:layout> 
```

我没有收到任何错误报告，所以所有参考都必须是好的 - 请帮助！！！我正在使用 JSF 2.0，Primefaces 3.4.RC1

从生成的 html 中提取：

```
<div id="transactionLogForm:tabViewMain:liveViewTab" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table id="transactionLogForm:tabViewMain:liveViewPanel" cellpadding="5">
<tbody>
<tr>
<td>Live View Enabled: </td>
<td><div id="transactionLogForm:tabViewMain:j_idt27" class="ui-chkbox ui-widget"><div class="ui-helper-hidden-accessible"><input id="transactionLogForm:tabViewMain:j_idt27_input" name="transactionLogForm:tabViewMain:j_idt27_input" type="checkbox" /></div><div class="ui-chkbox-box ui-widget ui-corner-all ui-state-default"><span class="ui-chkbox-icon"></span></div></div><script id="transactionLogForm:tabViewMain:j_idt27_s" type="text/javascript">PrimeFaces.cw('SelectBooleanCheckbox','widget_transactionLogForm_tabViewMain_j_idt27',{id:'transactionLogForm:tabViewMain:j_idt27'});</script></td>
<td>Interval: </td>
<td><span id="transactionLogForm:tabViewMain:interval" class="ui-spinner ui-widget ui-corner-all"><input id="transactionLogForm:tabViewMain:interval_input" name="transactionLogForm:tabViewMain:interval_input" type="text" class="ui-spinner-input ui-inputfield ui-state-default ui-corner-all" autocomplete="off" value="10" /><a class="ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default ui-button-text-only"><span class="ui-button-text"><span class="ui-icon ui-icon-triangle-1-n"></span></span></a><a class="ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default ui-button-text-only"><span class="ui-button-text"><span class="ui-icon ui-icon-triangle-1-s"></span></span></a></span><script id="transactionLogForm:tabViewMain:interval_s" type="text/javascript">$(function(){PrimeFaces.cw('Spinner','widget_transactionLogForm_tabViewMain_interval',{id:'transactionLogForm:tabViewMain:interval',step:1.0});});</script></td>
<td>Last Update:</td>
<td><span id="transactionLogForm:tabViewMain:lastUpdated"></span></td>
</tr>
</tbody>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:01:30.407

问题解决了 - 毕竟这是一个支持 bean 的问题，与运行良好的投票本身无关。

# visual-c++ - 从 .dmp 文件中读取的函数参数值是否可靠？

> ID：12686435
> 
> 赞同：1
> 
> 时间：2012-10-02T07:55:13.533
> 
> 标签：visual-c++, visual-studio-debugging

此 .dmp 文件由发布版本转储。用Visual Studio C++（2010）打开，在调用堆栈视图中，函数调用参数的值很奇怪，有些值丢失，有些值不一致。

例如：函数 A 使用传递给 A 的相同参数调用函数 B：

```
B(pkt=0x13a4bec0, off=, pktlen=0xe06d7363) Line 2506 + 0x21 bytes   C++
A(pkt=0x13a4bec0, off=0x00000034, pktlen=0x00000400) Line 1758  C++ 
```

缺少“off”并且 pktlen 的值错误。

我可以相信这些信息吗？

# ruby-on-rails - rails 3.2 在编辑操作时跳过回形针附件存在验证

> ID：12686443
> 
> 赞同：0
> 
> 时间：2012-10-02T07:55:54.983
> 
> 标签：ruby-on-rails, paperclip, ruby-on-rails-3.2

我是 Rails 新手，我正在开发我的第一个 Rails 应用程序，它使用回形针作为附件，我正在验证附件的存在，使用`validates_attachment :avatar, presence: true`它在创建操作时效果很好，但是当用户正在编辑他的帐户设置并且没有'不上传新头像，没有上传头像时出错，但我想在编辑时跳过该验证，只有在用户上传新头像替换现有头像时才在编辑时验证。我也有

`validates_format_of :avatar, :with => %r{\.(jpg|jpeg|gif|png)$}i,:unless => Proc.new {|m| m[:avatar].nil?}, :message => "Please upload files with the following extensions only`

仅在存在但似乎不起作用的情况下检查格式，非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:23:11.473

使用选项。

```
validates_format_of :avatar ... , :on => :create 
```

[http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#on](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#on)

# php - 在zend框架中从url获取路由名称

> ID：12686452
> 
> 赞同：0
> 
> 时间：2012-10-02T07:56:55.373
> 
> 标签：php, zend-framework

我需要从 zend 框架中的 url 获取路由名称。
我想将 URL 作为参数传递给将返回 URL 的路由名称的方法。

使用`Zend_Controller_Front::getInstance()->getRouter()->getCurrentRouteName()`我可以获得当前的路线名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T20:20:02.153

Zend 对此没有任何直接的方法。但是你可以通过这种方式得到它..

```
$url = 'http://yourproject.com/test/new';

$request = new Zend_Controller_Request_Http($url);

$frontController = Zend_Controller_Front::getInstance();

$router = $frontController->getRouter();

$router->route($request)->getCurrentRouteName(); 
```

# java - 如何从 Java 代码中知道 VM 是否正在调试？

> ID：12686453
> 
> 赞同：4
> 
> 时间：2012-10-02T07:57:10.643
> 
> 标签：java, debugging

我想要这样的东西：

```
long timeout = isDebugModeActive() ? Long.MAX_VALUE : 10000; 
```

因此，当调试器在断点处停止时，不会发生超时。

是否有任何 API 或系统/环境属性可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:16:56.563

[该线程](https://stackoverflow.com/questions/3776204/how-to-find-out-if-debug-mode-is-enabled)的作者找到了这个解决方案：

```
java.lang.management.ManagementFactory.getRuntimeMXBean().
getInputArguments().toString().indexOf("-agentlib:jdwp") > 0; 
```

不过，标准的免责声明似乎是合适的 - 这非常脆弱（因为它在触发时非常具体）并且可能导致[Heisenbugs](https://secure.wikimedia.org/wikipedia/en/wiki/Heisenbug)（当您尝试调试时不会出现的错误）。对于许多情况，系统属性或环境变量可能更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:01:07.183

您可以进行新的运行配置（运行 -> 运行配置）并在那里添加环境变量或系统属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:13:59.270

如果您开发 RCP 应用程序，您可以使用：

```
if(Platform.inDevelopmentMode()) {
   // ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T08:14:23.997

通过检查`JVM`启动程序的参数是可能的。

在那里你会看到：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=[port] 
```

然后检查端口是否正在侦听或有连接。

# javascript - 使用 ajax 通过 post 发送表单的值

> ID：12686457
> 
> 赞同：0
> 
> 时间：2012-10-02T07:57:37.647
> 
> 标签：javascript, jquery, html, ajax

我试图通过 ajax 中的 POST 以表单形式发送值，我如何在发送它们时捕获它们，这是我现在在 GET 中所拥有的

```
 function test(ans_field_uuid){
        var result = "";
        var url="ajax_pages/remove_answer_field_ajax.php"
        url += '?uuid=' + ans_field_uuid;
        $.get(
        url,
        function (data) {
            result = data;
        }
    )
        .success(function () {
            if (result != "") {
                addTableRow('tb_add_field', result);
                $('#ajaaxDiv').html(result);
            }
        })
        .complete(function () {
            $('#img_create_subcat').hide();
            $('#dialog').dialog('close');
        })
        .error(function () {
            alert('An error has occurred.');
        });
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:01:43.060

因为你已经使用了 jQuery

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

数据：名称和位置是您的 POST 变量。您可以在 some.php 中获取此示例中的 POST 变量

```
$_POST["name"] 
```

等于“约翰”

如果你想收到类似“你好”的东西。在你的 some.php 里面

```
echo "Hello"; 
```

它将作为变量 msg 在您的完成函数中作为响应发送到您的 ajax 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:03:44.100

[jQuery 帖子的](http://api.jquery.com/jQuery.post/)文档

```
// ...

var url = "ajax_pages/remove_answer_field_ajax.php";

$.post( url, "uuid=" + ans_field_uuid, function (data) {
    result = data;
}
// ... 
```

# python - 未找到“webapp.views.single_post”的反向

> ID：12686460
> 
> 赞同：0
> 
> 时间：2012-10-02T07:57:57.853
> 
> 标签：python, django, django-templates, django-views

我有以下内容`urlpatterns`：

```
urlpatterns = patterns('',
    url(r'^new$', 'webapp.views.new_post', name="new_post"),
    url(r'^$', 'webapp.views.all_posts', name="main"),
    url(r'^post/(\d{4})/(\d{2})/(\d{2})/$', 'webapp.views.single_post', name="single_post"),
    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

还有一个看起来像这样的模板：

```
{% for i in posts %}
    <h3><a href={% url 'single_post' i.created_at.year i.created_at.month i.created_at.day %}>{{i.title}}</a></h3>
    Posted at: {{i.created_at}}
    <br>
    <br>
    {{i.text}}
    <hr>
{% endfor %} 
```

但我一直收到一个`NoReverseMatch`例外说`Reverse for 'single_post' with arguments '(2012, 9, 30)' and keyword arguments '{}' not found.`

**编辑**：我在 Python 2.7 上使用 Django 1.4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:10:09.977

single_post 的 url def 需要 3 个 args，但您传递的是 4

所以而不是

```
<h3><a href={% url 'single_post' i.created_at.year i.created_at.month i.created_at.day i.slug %}>{{i.title}}</a></h3> 
```

你可能想要

```
<h3><a href={% url 'single_post' i.created_at.year i.created_at.month i.created_at.day %}>{{i.title}}</a></h3> 
```

哦，但你可能想要最后的蛞蝓，在这种情况下，在你的 urls.py 中，将其更改为...

```
url(r'^post/(\d{4})/(\d{2})/(\d{2})/([\w-]+)$', 'webapp.views.single_post', name="single_post") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:56:26.337

来自 python 文档：

> {m} 指定恰好匹配前一个 RE 的 m 个副本；较少的匹配会导致整个 RE 不匹配。例如，a{6} 将精确匹配六个 'a' 字符，但不是五个。

所以 url 模式应该是：

```
r'^post/(\d{4})/(\d{1,2})/(\d{1,2})/$' 
```

希望这可以帮助。

# vb.net - 使用 vb.net 删除临时文件夹文件

> ID：12686464
> 
> 赞同：1
> 
> 时间：2012-10-02T07:58:35.107
> 
> 标签：vb.net, file, delete-file, temp

我正在尝试以编程方式清除我的临时文件夹，但是它无法删除正在使用的文件，只要它会删除所有未使用的文件就可以了。但是，我的代码基本上要求我们删除全部或不删除，而不仅仅是那些未使用的。

下面是代码有人可以告诉我如何解决这个问题吗？

```
 'Deletes files in temporary directory...
    Dim MYDAYS_2 As String
    Dim MYTEMPFOLDER As String = System.IO.Path.GetTempPath

    'this reads the regestry key otherwise gives a default value in its place (365)...
    MYDAYS_2 = Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\AA", "HELLO", "365")

    'Deletes all files older then the day specifyed in the variable MDAYS...
    For Each file As IO.FileInfo In New IO.DirectoryInfo(MYTEMPFOLDER).GetFiles("*.*")
        If (Now - file.CreationTime).Days > MYDAYS_2 Then file.Delete()
    Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:02:07.633

您可以使用简单的 try/catch：

```
For Each file As IO.FileInfo In New IO.DirectoryInfo(MYTEMPFOLDER).GetFiles("*.*")
    If (Now - file.CreationTime).Days > MYDAYS_2 Then 
        Try
            file.Delete()
        Catch
            ' log exception or ignore '
        End Try
    End If
Next 
```

# java - 如何在jsp中使用属性文件

> ID：12686465
> 
> 赞同：20
> 
> 时间：2012-10-02T07:58:41.923
> 
> 标签：java, jsp, properties

> **可能重复：**
> [如何将 .properties 文件加载到 jsp 中](https://stackoverflow.com/questions/1140653/how-to-load-a-properties-file-into-a-jsp)

我正在尝试在 JSP 中使用我的属性文件，但它无法正常工作并引发错误

```
Error: myproperties.properties (The system cannot find the file specified) 
```

在这里，我试图访问我的属性文件：

```
<%
try
{
    FileInputStream fis = new FileInputStream("myproperties.properties");

    Properties p = new Properties();
    p.load(fis);
    String LogFileName = p.getProperty("NameOfLogFile");
    out.println(LogFileName);

}
catch (Exception e)
{// Catch exception if any
    out.println(e.getMessage());
} 
```

我已经尝试了很多方法来访问属性文件。我该如何解决？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-02T13:15:34.773

在你的包中创建 test.properties 文件

```
pname=xyz
psurname=abc 
```

创建jsp文件：

```
<%@ page language="java" import="java.util.*" %> 
<%@ page import = "java.util.ResourceBundle" %>
<% ResourceBundle resource = ResourceBundle.getBundle("test");
  String name=resource.getString("pname");
  String surname=resource.getString("psurname"); %>
  <%=name %>
 <%=surname%> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T08:10:14.460

JSP 运行在 servlet 容器中，所以它的当前工作目录是由容器定义的。通常它是安装容器的目录或其`bin`目录。在任何情况下，它都不是您要存储自定义属性文件的地方。

有两种典型的方法可以满足您的需要。

如果您的文件是应用程序的一部分并且您在部署时从不更改它，则第一种方法很好。在这种情况下，从资源中读取它：

`props.load(getClass().getResourceAsStream())`

甚至更好

`props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream())`

如果您想在部署环境中更改属性文件，则第二种方法很好。在这种情况下，将它放在容器外的文件系统中的某个位置。例如`/opt/mycompany/conf/myproperties.properties`在 linux 或您喜欢的任何其他位置。现在你应该在创建时使用绝对路径`FileInputStream`。

为了使系统更好地可配置，您不应该在代码中写入配置文件的路径。更好的方法是使用系统属性将其传递给应用程序，例如`-Dmycompany.conf=/opt/mycompany/myprops.properties`在运行应用程序服务器时添加参数。当您要读取文件时，请执行以下操作：

`new FileInputStream(System.getProperties("mycompany.conf"))`

现在您的系统配置可以由部署者独立控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:13:31.550

尝试更改`FileInputStream fis = new FileInputStream("myproperties.properties");`为`FileInputStream fis = new FileInputStream(new File("myproperties.properties"));`

另外，请确保您正在使用的类已经导入到您的 jsp 文件中。即，

```
<%@ page import="java.io.FileInputStream" %>
<%@ page import="java.io.File" %> 
```

# objective-c - 移动的 Box2d 世界中的粒子被绘制在顶部而不是图层内

> ID：12686467
> 
> 赞同：1
> 
> 时间：2012-10-02T07:58:56.297
> 
> 标签：objective-c, cocos2d-iphone

我正在使用 LevelHelper 构建我的关卡，并在我的关卡中添加一些粒子（动态初始化的 CCParticleSystemQuad）。一切正常，直到我移动世界（这是 Box2D 中动态绘制的世界，我用相机跟随玩家）。如果我移动世界，新添加的连续发射的粒子被绘制在正确的位置，但在之后的粒子动画中，粒子似乎是相对于全局世界/屏幕位置绘制的。这会产生一种奇怪的“幻觉”效果，看起来完全不切实际。粒子应该在世界内部重新绘制/刷新

```
LevelHelperLoader * lh = gameLayer.lh;
LHLayer * layer = [lh layerWithUniqueName:@"MAIN_LAYER"];

NSArray * array = [lh spritesWithTag:WORTEL];
CCParticleSystemQuad * particle;
CGPoint position;
for (LHSprite * sprite in array) {
    particle = [CCParticleSystemQuad particleWithFile:@"DirtParticles.plist"];
    [layer addChild:particle z:0];
    position = sprite.position;
    position.y += sprite.contentSize.height * 0.5f;
    [particle setPosition:position];
    [particle resetSystem];
} 
```

有人知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:03:46.957

尝试更改粒子位置类型：

```
particle.positionType = kCCPositionTypeFree; 
```

替代方案是 kCCPositionTypeRelative 和 kCCPositionTypeGrouped。您可能必须尝试全部以查看其中哪些最适合您的场景，我猜它是“免费的”或“相对的”。

# android - 如何使用 maxLength 以 3 个点结束 TextView

> ID：12686468
> 
> 赞同：64
> 
> 时间：2012-10-02T07:58:56.710
> 
> 标签：android, android-layout, textview, ellipsize

`TextView`我的布局中有一个`wrap_content`位于`layout_width`. 它限制为最多 15 个字符，所以我使用`maxLength`.

我需要`TextView`用 3 个点 (...) 来结束它，只有当我`layout_width`在 dp 中给出固定大小时才会发生这种情况，这是我不想做的事情。

我知道通过在第 15 个字符之后修剪字符串然后添加 3 个点以编程方式是可能的，但我更喜欢通过 XML 来做到这一点。

知道如何用 3 个点结束文本并将其保留为 wrap_content 吗？

```
<TextView
    android:id="@+id/inbox_contactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:lines="1"
    android:maxLines="1"
    android:ellipsize="end"
    android:singleLine="true"
    android:maxLength="15"
    android:textColor="#0670b4"
    android:textSize="16sp" /> 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2014-01-01T12:19:07.743

**这将解决您的问题，`ellipsize`在您的 XML 代码中使用属性**

```
android:ellipsize="end" <!-- This makes the magic ... thing -->
android:maxEms="15" <!-- Limit of the Text -->
android:singleLine="true" <!-- In case if you want everything in one line --> 
```

**编辑：** `singleLine`已**弃用**。改为使用`maxlines="1"`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-01-07T09:52:51.830

您不能同时使用两者`maxLength`，`Ellipsize`尽管您可以定义`Maximum EMS`参见下面的示例

```
<TextView
        android:id="@+id/tv_hist_source_lang"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:maxEms="8"
        android:maxLines="1"
        android:text="TextView"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

![看起来像这样](../Images/a1fb78981ad41fc9105845a3a95f8dd3.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-18T17:47:27.940

我收集（来自评论）@Yaniv 已经使用代码解决了它 - 但这是正确的方法（使用 xml）。可以帮助其他登陆这里的用户。诀窍是同时使用 toleftof*和*torightof。

```
<RelativeLayout>
...
 <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:singleLine="true"
        android:layout_toRightOf="@id/some_element1"
        android:layout_toLeftOf="@id/some_element2"/>
...
<RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-10-20T07:43:07.020

您可以使用

```
android:maxWidth="100dp"
android:maxLines="1"
android:ellipsize="end" 
```

只有这对我有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-01T11:47:58.960

用这个`android:ellipsize="end"`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-08-22T12:38:43.083

最简单的方法之一是添加**Right Padding + Ellipsize**

```
<TextView
            android:id="@+id/txtvw_contentcell_subhead"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Polem sampler, Lorem Ipsum golep tolem burop yemit noski"
            android:ellipsize="end"
            android:maxLines="1"
            android:textColor="@color/caption_black_color"
            android:textSize="@dimen/caption_size"
            android:paddingRight="40dp"/> 
```

这是一个带有字符限制的示例字幕文本。 [![在此处输入图像描述](../Images/949b0173d603cb8bfcdd1d1a0b5a1db0.png)](https://i.stack.imgur.com/Kv3o4.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-25T00:18:35.747

尝试了上面的大多数解决方案。使用 maxWidth 是我的关键：

```
android:maxWidth="100dp"
android:maxLines="1"
android:ellipsize="end" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-23T13:42:35.433

**非常重要：** `ellipsize = "end"`仅在 `maxLength`设置为**大于**一行字符数的值时才有效。`wrap_content`如果您对齐 TextView 的结尾并开始到任何其他视图，则可以使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-24T12:03:53.220

我需要使用单选按钮来执行此操作，并且我想将大小限制为一行。当我使用`Android:singleline="true"`时，单选按钮的复选圈消失了。这是最终起作用的代码：

```
android:ellipsize="end"
android:maxLines="1" 
```

不需要设置ems。这可能也适用于 TextView 和其他 UI 组件。希望这对某人有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-06T21:39:11.613

`String`当它的长度大于 20 时，您可以修改它以添加椭圆大小。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-23T13:52:23.863

从 xml 中删除该行

```
android:lines="1"
        android:maxLines="1" 
```

# android - 如何在我的服务器中连接数据库

> ID：12686471
> 
> 赞同：-1
> 
> 时间：2012-10-02T07:59:18.413
> 
> 标签：android

> **可能重复：**
> [如何连接到另一台服务器上的数据库](https://stackoverflow.com/questions/1763519/how-to-connect-to-database-on-another-server)

我是 android 编程新手，我想知道是否可以访问托管在我的服务器上的数据库。数据库在access或sql server中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:00:45.683

您可以编写一个 php 或其他脚本并将其放置在您的服务器上，并使用此文件与服务器交互。

# iis - 如何让 Piwik 日志导入器在 Windows / IIS 上运行得更快？

> ID：12686480
> 
> 赞同：2
> 
> 时间：2012-10-02T07:59:43.437
> 
> 标签：iis, matomo, windows-server-2012

我在 Windows Server 2012 上安装了 Piwik，我正在导入大约 20Gb 的历史日志文件，分布在 10 个不同的站点上。

我已将每个站点的日志文件合并为几个巨大的文本文件，因为在 Windows 上无法导入通配符。

导入过程需要很长时间，而我目前在具有 16Gb RAM 的四核服务器上只能获得大约**25 条记录/秒。**

我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:59:43.437

我发现在 Windows 上加快 Piwik 日志导入的关键是**--recorders**设置。

Piwik 文档推荐的记录器数量与服务器上的 CPU 内核数量大致相同，但我认为这是假设 CPU 是瓶颈。在我的情况下，我只得到了大约 5% 的 CPU 利用率，所以很明显还有其他事情在阻止。我怀疑这是我的 PHP / IIS / MySQL 设置，因为 Piwik 前端也有点迟钝。

我添加了**--recorders=64**，现在我得到了更可观的**170 records/sec**。

不过，这仍然感觉有点慢，因此欢迎任何其他建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T10:03:40.140

我没有在 Windows 上运行它，但是通过调整 Mysql InnoDB 设置，我得到了一些不错的性能改进：

```
key_buffer = 16M
max_allowed_packet = 16M
thread_stack = 256K
thread_cache_size = 16
innodb_buffer_pool_size = 2048M
innodb_log_file_size = 512M
innodb_log_buffer_size = 16M
innodb_flush_log_at_trx_commit = 2
sync_binlog = 0
innodb_flush_method = O_DIRECT
transaction-isolation = READ-COMMITTED 
```

不过要小心，其中一些设置会影响安全性。我目前正在以大约 1000 条记录/秒的速度运行，在具有 16 GB RAM 的四核 i5 上使用 8 个记录器，只有一个用于 Mysql 的磁盘。

我的配置是使用带有 mod_fcgid 的 Apache 2.2，使用命令行客户端运行 PHP。我还使用[APC](http://en.wikipedia.org/wiki/List_of_PHP_accelerators#Alternative_PHP_Cache_.28APC.29)来缓存已编译的 PHP 代码。mysql是v5.5。全部在 Ubuntu 12.10 上运行。

# ruby-on-rails - 枚举嵌套的表单字段

> ID：12686482
> 
> 赞同：0
> 
> 时间：2012-10-02T07:59:47.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-attributes

好的，我很难找到解释我的问题的词语。我希望你能理解和帮助我，因为坦率地说，我快疯了。

假设我有四个模型：`User`、`Team`和。我有这个：`Report``UserReport`

```
class Report < ActiveRecord::Base
  belongs_to :team
  has_many :user_reports
  accepts_nested_attributes_for :user_reports
end
class UserReport < ActiveRecort::Base
  belongs_to :report
end

class ReportsController < ApplicationController
  def new
    @team = Team.find params[:team_id]
    @report = Report.new
    @team.users.each do |user|
      ur = @report.user_reports.build
      ur.user_id = user.id
    end
  end
end 
```

我现在所拥有的是该网站的用户选择`Team`. 在团队中，当然是一堆`User`s。对于它们中的每一个，a`UserReport`将被添加到`Report`. 在 中`new.html.haml`，我会这样写：

```
=fields_for :user_reports do |b|
  =b.hidden_field :user_id, user.id
  =user.name 
```

还有问题。我怎样才能在这个表单生成器中获得`user.name`or the或任何东西？`user.id`我需要在那里输出用户名，否则站点用户将无法知道谁是谁。

我希望你能理解我的问题，我现在有点绝望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:24:49.540

```
class ReportsController < ApplicationController
  def new
    @team = Team.find params[:team_id]
    @report = Report.new
    @urs = []
    @team.users.each do |user|
      ur = @report.user_reports.build
      ur.user_id = user.id
      @urs << ur
    end
  end
end 
```

在您看来：

```
= form_for @report do |f|
  =f.fields_for :user_reports, @urs do |b|
    =b.hidden_field :user_id
    =b.object.user.name 
```

# .net-4.0 - 无法为 Azure 项目创建 MVC4 Web 角色

> ID：12686488
> 
> 赞同：0
> 
> 时间：2012-10-02T08:00:32.037
> 
> 标签：.net-4.0, azure, asp.net-mvc-4

我尝试在 Visual Studio 2012 Ultimate 中创建一个包含单个 MVC4 Web 角色的 Azure 项目，但收到此错误消息。

![错误信息](../Images/e59334a9652ae18fa11b5cc20cf6532f.png)

创建后的项目本身不包含我想要的 MVC4 角色。我只发现了 MVC2 的类似错误消息，而在我的另一台计算机上它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:11:09.710

**roletemplatedata.xml**文件是 Visual Studio 中每个 Windows Azure 项目中包含的文件（即：带有 MVC3、MVC4、WCF 的 Web 角色，...）。您应该可以在**C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplatesCache\CloudService**下找到它。

如果找不到此文件，则可能是 Windows Azure SDK（VS2012 工具）的安装有问题。尝试卸载每个 Windows Azure 组件，在[此处](https://www.windowsazure.com/en-us/develop/net/#)下载完整安装程序的最新版本（安装 SDK 链接）并重新安装。这应该可以解决您的问题。

# java - 如何在java中直接使用枚举常量

> ID：12686490
> 
> 赞同：0
> 
> 时间：2012-10-02T08:00:43.157
> 
> 标签：java, enums

我想枚举颜色并使用 Color 实例。因此，我创建了一个带有私有字段和 get 函数的枚举，但由于需要调用`getColor()`.

有没有更好的方法直接使用枚举常量而不调用`getColor()`？

```
public class ColorListTest {
    public enum ColorList
    {
        WHITE(new Color(255, 255, 255)),
        BLACK(new Color(255, 255, 255)),
        ;

        private Color color;
        private ColorList(Color color) { this.color = color; }
        public Color getColor() { return color; }
    }

    public static void main(String[] args)
    {
        Color color = ColorList.WHITE.getColor();
        // I'd rather have something similar to:
        // Color color = WHITE;
        // Color color = ColorList.WHITE;
    }

} 
```

[Using enums as key for map](https://stackoverflow.com/questions/12669497/using-enum-as-key-for-map)问题的答案 建议使用地图，这也需要调用 get()。

另一种选择是使用常量列表，因为不再有枚举，所以类型安全性较低：

```
static public class ColorList
{
    static final Color WHITE = new Color(null, 255, 255, 255);
    static final Color BLACK = new Color(null, 0, 0, 0);
} 
```

（我发现的其他帖子似乎处理了很多字符串转换。）

那么你对一个很好用的枚举有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:03:34.357

您唯一可以做的可能更好的是使用静态导入。

```
import static mypackage.ColourList.*;

public static void main(String[] args) {
    Color color = WHITE.getColor();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:04:14.933

使用枚举器来定义要使用的常量。您可以在不同的类文件中定义枚举器并直接调用常量，而不是在类中定义它。

# iphone - 如何从 iOS 应用程序中的 SQLite 表中删除所有内容

> ID：12686493
> 
> 赞同：1
> 
> 时间：2012-10-02T08:00:50.973
> 
> 标签：iphone, ios, sqlite

我想从我的 iPhone 应用程序的表中删除所有行。我正在使用以下代码，但它没有删除数据：

```
+(void)emptyData:(NSString*)dbPath{

    NSString *query = @"delete from survey_question_responses";
    const char *sqlStatement = [query UTF8String];
    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

   // Loop through the results and add them to the feeds array
     while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
      // Read the data from the result row
        NSLog(@"result is here");
      }

       // Release the compiled statement from memory
      sqlite3_finalize(compiledStatement);
     }
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:04:38.147

```
NSString *query1 = [NSString stringWithFormat:@"DELETE from TableName"];
[[DBManager sharedDatabase]executeQuery:query1]; 
```

在哪里

```
-(void)executeQuery:(NSString*)_query
{
    const char *sql = [_query cStringUsingEncoding:NSUTF8StringEncoding];
    sqlite3_stmt *statement = nil;

    if(sqlite3_prepare_v2(dataBaseConnection,sql, -1, &statement, NULL)!= SQLITE_OK)
    {
        NSAssert1(0,@"error preparing statement",sqlite3_errmsg(dataBaseConnection));
    }
    else
    {
        sqlite3_step(statement);
    }
    sqlite3_finalize(statement);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-25T08:18:45.287

**获取数据库的路径：**

```
NSString*paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

NSString*documentDirectory=[paths objectAtIndex:0];

NSSting*dBPath=[documentDirectory stringByAppendingPathComponent:@"dB.sql"]; 
```

**打开数据库：**

```
if(sqlite3_open([dBPath UTF8String], &database) == SQLITE_OK){

    NSString*query=[NSString stringWithFormat:@"DELETE from tablename"];
} 
```

**执行查询语句：**

```
if(sqlite3_exec(database, [query UTF8String],NULL, NULL, NULL) == SQLITE_OK){            
   NSLog(@"Delete Query Success);

}
else{

     NSLog(@"Delete Query Failed);}

      sqlite3_close(database);

} 
```

希望这可以帮助..

# data-structures - 识别图表类型

> ID：12686494
> 
> 赞同：0
> 
> 时间：2012-10-02T08:00:52.920
> 
> 标签：data-structures

具有 1 个连通分量的图不包含圆，也不包含树。

这种图形是什么类型的？

我做了很多谷歌搜索，甚至在维基百科上查找了所有图形类型，但没有找到符合该标准的图形类型。

# objective-c - 具有两种映射模型的核心数据迁移

> ID：12686496
> 
> 赞同：2
> 
> 时间：2012-10-02T08:01:02.767
> 
> 标签：objective-c, core-data, migration

我希望你能帮助我。我有三个模型版本 V1、V2 和 V3（当前模型）。因此，我有两个映射模型 V1to2 V2to3 我还启用了 NSMigratePersistentStoresAutomaticallyOption。

当我使用 V2 商店启动我的应用程序时，它会成功迁移到 V3。但是当我使用 V1 商店启动我的应用程序时，应用程序崩溃了，因为没有找到映射模型：

```
NSDictionary *optionsDictionary = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];

if (![psc addPersistentStoreWithType:NSSQLiteStoreType
            configuration:nil
                  URL:storeURL
                  options:optionsDictionary
                    error:&error]) {
    [NSexception raise:@"Open failed" format:@"Reason: %@", [error localizedDescription]];
} 
```

我试图将当前模型更改为 V2 并且它可以工作，它成功地从 V1 迁移到 V2。之后，我只是将当前模型改回 V3 并再次对应用程序进行分层，它成功地从 V2 迁移到 V3。

但是我做错了什么，这个迁移不会首先自动运行 V1toV2，然后自动运行 V2toV3？

非常感谢您的期待。弗洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:35:22.873

您需要创建从 V1 到 V3 的第三个映射模型。Core Data 不会逐步执行增量映射模型。它的工作方式是 Core Data 分析数据文件中的模型（V1）和项目中的当前模型（V3），然后尝试找到从前者到后者的映射模型。因此，当您添加 V4 时，您需要创建从 V1 到 V4、V2 到 V4 以及 V3 到 V4 的映射模型。

如果您从 V1 到 V3 的更改导致您无法使单个映射模型正常工作，那么您需要在将生成的 V2 数据文件输入自动迁移之前以编程方式手动将文件从 V1 转换为 V2。

打开 Core Data Migration Debugging 可以帮助您了解正在发生的事情。查看[这篇文章](https://stackoverflow.com/questions/12835950/)了解详情。

# php - 在 MySQL 中选择部分列标题

> ID：12686506
> 
> 赞同：5
> 
> 时间：2012-10-02T08:01:29.703
> 
> 标签：php, mysql

我想知道是否有办法在 mysql 中选择列的一部分。例如，我想从表中选择以“_sep_2012”结尾的所有统计信息。这将使我能够访问 1_sep_2012、2_sep_2012、3_sep_2012 等...有没有办法做到这一点？

```
<?php
$query=mysql_query("SELECT %_sep_2012% FROM statistics WHERE id = '$id'");

$array = mysql_fetch_row($query);

$monthly_total = $array[0];

echo "$monthly_total";
?> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:13:15.263

根据您的问题，应该可以执行以下操作：

```
SELECT * FROM statistics WHERE datecolumn LIKE '%_sep_2012' 
```

不是说它很好，但它应该得到你需要的数据。您可以添加 GROUP BY 子句来进行计数或求和以获得您的总数，例如：

```
SELECT datecolumn, SUM(amountcolumn) FROM statistics WHERE datecolumn LIKE '%_sep_2012' GROUP BY datecolumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:14:51.147

用 PHP 写这个：

```
for($i=1;$i<32;$i++)
  printf("`%d_sep_2012`, ", $i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:15:16.457

试试这个

```
SELECT * FROM statistics WHERE datecolumn LIKE '%_sep_2012' and id = '$id' 
```

# c++ - 避免 C++ 类中的内存泄漏

> ID：12686510
> 
> 赞同：1
> 
> 时间：2012-10-02T08:01:42.407
> 
> 标签：c++, pointers, memory-leaks, unordered-map, delete-operator

我用以下头文件定义了一个 C++ 类：

```
class EarleyParser
{

    public:

        EarleyParser();
        virtual ~EarleyParser();

        void initialize( string filePath, bool probabilityParse );

    private:

        bool probabilityParser;

        typedef unordered_map< string, list<Production>* > productionHashTable;
        productionHashTable earlyHashTable;

}; 
```

如您所见，该类的成员元素是一个[`unordered_map`](http://www.cplusplus.com/reference/stl/unordered_map/)，其关键元素是字符串，内容元素是指向另一个名为的类的对象列表的指针`Production`（不要介意，它可以是任何东西）。

我的问题是我是否应该将它留给默认析构函数来释放分配的内存，或者我是否应该手动检查哈希表并删除它的所有元素。

在第二种情况下，程序是什么？为每个元素调用这个可以吗？

```
EarleyParser::productionHashTable::const_iterator got = this->earlyHashTable.find( "key" );
delete[] got->second; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:06:50.270

如果您要存储指向地图中任何内容的指针，则必须手动浏览地图并删除每个指针。通常在一个类中，您会坚持使用 RAII（资源获取即初始化）并在构造函数中构造事物*并*在析构函数中*销毁*

```
 for (;;)
     delete map->second; //it's not an array of lists 
```

**然而，指向容器的指针不是一个好主意**。为什么需要指针？您要使用指向 a 的指针来解决什么问题`list`？

使用类似的智能指针`std::unique_ptr`是比原始指针更好的主意。原始指针应该是最后的手段，而不是当你想不出更好的东西时你抢的第一件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:07:31.533

用一个：

```
typedef unordered_map< string, std::unique_ptr<list<Production> > > productionHashTable; 
```

反而。然后你就不用担心管理内存了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:08:31.497

您需要明确谁拥有 . 拥有的`list<Production>`对象`EarlyParser`。如果`EarlyParser`拥有它们，那么您需要释放资源。您可以通过遍历列表并调用`delete`每个取消引用的迭代器 ( **not** `delete[]` ) 来实现。或者您可以`unique_ptr<list<Production>>`改为存储。另一方面，最简单的解决方案是存储`list<Production>`，除非您确实有非常充分的理由存储指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T08:08:20.467

编译器合成析构函数不会删除您放入映射中的动态分配列表，因此您必须自己做。在这种情况下，您只需遍历您的地图并删除`second`每个元素的成员：

```
EarleyParser::~EarleyParser() {
  for ( productionHashTable::iterator i = earlyHashTable.begin(); i != earlyHashTable.end(); ++i )
    delete i->second;
} 
```

更好的方法是将列表放在地图中，而不是指向列表的指针。在这种情况下，编译器会自动处理破坏，如下所示：

```
typedef unordered_map< string, list<Production> > productionHashTable; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T08:09:21.397

[Unordered_map 的析构函数](http://en.cppreference.com/w/cpp/container/unordered_map/~unordered_map)实际上调用了它拥有的对象的析构函数，这意味着`list`将调用 s 的析构函数。 [std::list 的析构函数](http://en.cppreference.com/w/cpp/container/list/~list)有这个注释：

> 请注意，如果元素是指针，则不会破坏指向的对象。

所以这意味着，你必须自己清除那个记忆。是的，通过容器并删除元素 1by1 很好。正如其他回答者提到的那样，持有这样的指针并不是一个好主意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T08:10:02.000

由于您使用的是指向 的原始指针，因此`std::list`您必须在地图的生命周期内或`EarleyParser`在其析构函数中清理对象时自行删除它。

你可以在你的析构函数中使用这样的东西：

```
for ( auto it = productionHashTable.begin();
      it != productionHashTable.end(); ++it )
{ 
    delete it->second;
}
productionHashTable.clear() 
```

请注意，最后一行并不是绝对必要的，因为它会在对象被破坏时被清除，`EarleyParser`但很明显，在您删除它们后，您不能使用地图中的值！

# c - C和以太网连接中的客户端-服务器

> ID：12686513
> 
> 赞同：2
> 
> 时间：2012-10-02T08:01:50.783
> 
> 标签：c, client-server

我正在尝试用 c 开发一个小的客户端-服务器应用程序。为此，我获取了源代码：[http ://www.iprelax.fr/outils/c_prog5.php](http://www.iprelax.fr/outils/c_prog5.php)

它在本地工作，无需更改 IP 地址或端口。我尝试使用 2 台计算机（mac os 和 ubuntu）。它们通过以太网电缆连接，我们在此接口 (eth0) 上定义了静态 IP 地址 10.0.0.10 和 10.0.0.20。在客户端，我们改变了这一行：

```
char *msg, *htoname = "127.0.0.1"; 
```

使用服务器IP地址但它不起作用，没有错误。

我们试图更改端口号，但仍然是同样的问题。

我们看到了 netstat 和 netcat 命令的任何内容。

如何在两台计算机之间运行应用程序？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:04:47.553

当在两台机器之间移动时，防火墙通常会阻止传入连接，即您的服务器机器应该允许客户端连接到它自己。

如果您的服务器在 Ubuntu 上，则您使用的是 Linux IP 表。添加规则以允许传入连接的服务器端口或完全禁用 IP 表。

```
vi /etc/sysconfig/iptables

-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 5800 -j ACCEPT 
```

这个问题的答案详细列出来

[在堆栈溢出时使用 ip 表](https://stackoverflow.com/questions/9804068/how-to-make-a-dhcp-server-listen-for-broadcast-requests-in-a-virtual-box-vm)

# php - 具有更好参数放置的 PDO 库

> ID：12686517
> 
> 赞同：0
> 
> 时间：2012-10-02T08:02:08.837
> 
> 标签：php, pdo

不要误会我的意思 PDO 很棒，但我不喜欢它的是如何将变量放置在远离它们在 SQL 语句中的位置的地方。意思是我有一个类似的查询：

```
$stmt = $dbh->prepare("SELECT * FROM users WHERE email = ? AND pass = ?"); 
```

替换 的变量`?`总是远离以下几行：

```
$stmt->bindParam(1, $email);
$stmt->bindParam(2, $pass); 
```

如果你有很多参数，这可能会变得非常难看。使用`:email`而不是`?`不会让它变得更好。有时您会在相同的方法中将参数视为数组，例如：

```
$db->query("SELECT * FROM users WHERE email = ? AND pass = ?",
   array($email, $pass)); 
```

稍微好一点，但有 10 个变量，它仍然很难看。您实际上创建了一个`?`只使用一次的变量。此伪变量也不支持代码突出显示。

我认为这样会更好

```
$db->prepare("SELECT * FROM user WHERE email = ", $email, " AND pass = ", $pass); 
```

你甚至可以包括这样的参数`binParam()`：

```
$db->prepare_new(
   "SELECT * FROM user WHERE email = ", array($email, PDO::PARAM_STR),
   " AND pass = ", $pass); 
```

如果有一个支持这种风格的库，我会很高兴。你认识一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:08:11.177

`?`拥有的很多意义`:email`在于您可以多次重用查询。例如：

```
$stmt = $pdo->prepare("SELECT true FROM user WHERE email = :email");
$stmt->execute(array($email1));
$stmt->execute(array($email2));
// etc. 
```

在查询中包含特定变量会完全删除此功能。

如果您愿意，您可以随时扩展或包含 PDO，不过：

```
class DB {
   private $pdo;

   public function executeQuery($query, $args) {
      $stmt = $this->pdo->prepare($query);
      $stmt->execute($args);
   }
}
$db->executeQuery("SELECT true FROM user WHERE email = :email", array($email1)); 
```

这隐藏了您不喜欢的 PDO 的功能。

更新：

这是一种不寻常的做事方式，但它似乎是你所追求的：

```
$pdo->query("SELECT true FROM user WHERE email = " . $pdo->quote($email)); 
```

[http://us2.php.net/manual/en/pdo.quote.php](http://us2.php.net/manual/en/pdo.quote.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:31:36.277

如果总是每个偶数参数都是参数，你可以这样做：

```
class MyPDO extends PDO {
    public function prepareQuery() {
        $query_str = "";
        $params = array();
        foreach(func_get_args() as $key => $param) {
            if( $key % 2 == 0 ) {
                $query_str .= $param;
            }
            else {
                $params[] = $param;
                $query_str .= ' ? ';
            }
        }

        $prepared = $this->prepare($query_str);
        foreach( $params as $key => $param ) {
            $prepared->bindParam( $key+1, $param );
        }
        return $prepared;
    }
} 
```

然后你可以随心所欲地使用它：

```
$db = new MyPDO( .. );
$db->prepareQuery("SELECT * FROM user WHERE email = ", $email, " AND pass = ", $pass); 
```

PS：未经测试 - 只是一个概念

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:09:56.840

您可以将与此类*似的*内容放入函数中：

```
$stmt = $dbh->prepare("SELECT * FROM users WHERE email = :email AND pass = :pass");

$arr = array(
    'email' => 'test@test.com',
    'pass' => 'secret'
);

foreach($arr as $key => $val){
    $stmt->bindParam(':'.$key, $val);

} 
```

例子：

```
function myBindParams($stmt, $bindings){
     foreach($bindings as $key => $val){
        $stmt->bindParam(':'.$key, $val);
     }
     return $stmt;
}

$stmt = $dbh->prepare("SELECT * FROM users WHERE email = :email AND pass = :pass");

$arr = array(
    'email' => 'test@test.com',
    'pass' => 'secret'
);

$stmt = myBindParams($stmt, $arr); 
```

# java - 如何将JSON格式的表格数据行字符串转换为android中的java数组

> ID：12686530
> 
> 赞同：1
> 
> 时间：2012-10-02T08:03:20.643
> 
> 标签：java, android, json, arrays

我有一个像这样的数据的 JSON 字符串，用于 android 应用程序中的表。其中一个 {} 是表的一行数据。我想将这些 {} 分成一个数组，然后将此数组中的每个元素分成其他子数组，将 {} 中的其他元素分开。请建议使用 JSON 完成此标准的适当方法。谢谢你。

```
[
     {
        "nodeName":"prime_mtsc22@smpp3",
        "nodeId":"MTSC3",
        "tidPrefix":"4",
        "optStatus":"offline",
        "daStart":"1",
        "daEnd":"3",
        "description":"Description"
     },
     {
        "nodeName":"prime_mtsc22@smpp2",
        "nodeId":"MTSC58",
        "tidPrefix":"1",
        "optStatus":"blocked",
        "daStart":"5",
        "daEnd":"10",
        "description":"new description"
     },
     {
        "nodeName":"prime_mtsc22@smpp1",
        "nodeId":"MTSC1",
        "tidPrefix":"15",
        "optStatus":"online",
        "daStart":"12",
        "daEnd":"20",
        "description":"Description"
     },
     {
        "nodeName":"prime_mtsc22@smpp0",
        "nodeId":"MTSC15",
        "tidPrefix":"15",
        "optStatus":"offline",
        "daStart":"25",
        "daEnd":"30",
        "description":"Description"
     }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:10:36.130

好的，在这种情况下，要使用的代码是这样的

```
String jsonString = <your jsonString>;

// THIS IS NOT NEEDED ANYMORE 
//JSONObject json = new JSONObject(jsonString);

JSONArray topArray = null; 
try {
     // Getting your top array

     // THIS IS NOT NEEDED ANYMORE 
     //topArray = json.getJSONArray(jsonString);

     //use this instead
     topArray = new JSONArray(jsonString);

      // looping through All elements
      for(int i = 0; i < topArray.length(); i++){
      JSONObject c = topArray.getJSONObject(i);

      //list holding row data
      List<NodePOJO> nodeList = new ArrayList<NodePOJO>(); 

      // Storing each json item in variable
      String nodeName = c.getString("nodeName");
      String nodeID = c.getString("nodeID");

      NodePOJO pojo = new NodePOJO();
      pojo.setNodeName(nodeName);
      //add rest of the json data to NodePOJO class

      //the object to list
      nodeList.add(pojo);

    }
} catch (JSONException e) {
        e.printStackTrace();
 } 
```

好的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:38:55.807

[对这个http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)使用 JSONObject

例子

```
 String jsonString = <your jsonString>;

    JSONObject json = new JSONObject(jsonString);
    JSONObject topArray = ; 
    try {
         // Getting your top array
         topArray = json.getJSONArray(TAG_ARRAY_TOP);

          // looping through All elements
          for(int i = 0; i < topArray.length(); i++){
          JSONObject c = topArray.getJSONObject(i);

          //list holding row data
          List<NodePOJO> nodeList = new ArrayList<NodePOJO>(); 

          // Storing each json item in variable
          String nodeName = c.getString("nodeName");
          String nodeID = c.getString("nodeID");

          NodePOJO pojo = new NodePOJO();
          pojo.setNodeName(nodeName);
          //add rest of the json data to NodePOJO class

          //the object to list
          nodeList.add(pojo);

        }
    } catch (JSONException e) {
            e.printStackTrace();
     } 
```

使用 NodePOJO 类来保存每一行的值。

```
 public class NodePOJO {
    private String nodeName;
    // do for rest of the json row data
    public void setNodeName(String nodeName) {
          this.nodeName = nodeName;
    }
    public String getNodeName() {
         return this.nodeName;
    }
 } 
```

# android - 带有 Android 4.1.1 的 Galaxy Nexus 上的 Android 接近警报 - 它真的有效吗？

> ID：12686533
> 
> 赞同：0
> 
> 时间：2012-10-02T08:03:25.930
> 
> 标签：android, alert, proximity

我想使用 Android 的 LocationManager 和 addProximityAlert 方法来设置接近警报。为此，我创建了一个小型应用程序，该应用程序在地图顶部显示十字准线，以及用于接近警报名称的文本字段和用于触发添加警报的按钮。

不幸的是，应该接收接近警报的 BroadcastReceiver 没有被触发。我已经单独测试了意图（没有通过 PendingIntent 包装）并且有效。此外，我看到一旦设置了接近警报，GPS / 位置图标就会出现在通知栏中。

我发现有关接近警报的信息有点令人困惑 - 有些人告诉如果活动不再处于前台，则无法使用警报。我认为它*应该*有效，所以我认为还有其他问题。

1 添加接近警报

```
 GeoPoint geo = mapView.getMapCenter();
        Toast.makeText(this, geo.toString(), Toast.LENGTH_LONG).show();
        Log.d("demo", "Current center location is: " + geo);

        PendingIntent pIntent = PendingIntent.getBroadcast(this, 0, getLocationAlertIntent(), 0);
        locationManager.addProximityAlert(geo.getLatitudeE6()/1E6, geo.getLongitudeE6()/1E6, 1000f, 8*60*60*1000, pIntent); 
```

意图本身在这里：

```
 private Intent getLocationAlertIntent()
{
    Intent intent = new Intent("com.hybris.proxi.LOCATION_ALERT");
    intent.putExtra("date", new Date().toString());
    intent.putExtra("name", locationName.getEditableText().toString());
    return intent;
} 
```

我创建了一个接收器，它应该接收位置警报，在 AndroidManifest.xml 中注册：

```
 <receiver android:name=".LocationAlertReceiver">
         <intent-filter>
            <action android:name="com.hybris.proxi.LOCATION_ALERT" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

希望实现本身很简单。它应该显示一个通知（我通过直接发送带有测试按钮的意图进行了检查）。

```
public class LocationAlertReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context ctx, Intent intent) {
    Log.d("demo", "Received Intent!");

    String dateString = intent.getStringExtra("date");
    String locationName = intent.getStringExtra("name");

    boolean isEntering = intent.getBooleanExtra(LocationManager.KEY_PROXIMITY_ENTERING, false);

    NotificationManager notificationManager = (NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE);

     Notification notification = new Notification.Builder(ctx)
     .setContentTitle("LocAlert: " + locationName)
            .setContentText(dateString + "|enter: " + isEntering)
            .setSmallIcon(R.drawable.ic_stat_loc_notification)
     .build();

     notificationManager.notify(randomInteger(), notification);
}

private int randomInteger()
{
    Random rand = new Random(System.currentTimeMillis());
    return rand.nextInt(1000);

} 
```

一些我不能 100% 确定的事情，也许这会触发你的某些事情：

*   我认为可以像我一样使用挂起的意图注册接近警报，并且稍后可以关闭创建接近警报的活动。
*   通过 getCenter 从地图转换返回一个带有 lat/lon 作为 int 值的 GeoPoint。我认为我通过除以 1E6 正确地将它们转换为 addProximityAlert 预期的双精度值
    *   距中心的距离相对较大 - 1000m - 我认为这是一个不错的值。
    *   我在网上找到的示例使用了以编程方式注册的广播接收器。这不是我想做的。但是 Reto Meier 的 Android 4 Profession Dev 一书提到在 xml 中注册广播接收器也很好。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:08:45.873

我遇到了同样的问题。在我的情况下，明确设置意图的目标类有帮助。在您的情况下，它应该如下所示：

```
private Intent getLocationAlertIntent()
{
    Intent intent = new Intent(context, LocationAlertReceiver.class);
    intent.setAction("com.hybris.proxi.LOCATION_ALERT"); //not sure if this is needed
    intent.putExtra("date", new Date().toString());
    intent.putExtra("name", locationName.getEditableText().toString());
    return intent;
} 
```

# github - 如何给 github.com 用户留言

> ID：12686545
> 
> 赞同：445
> 
> 时间：2012-10-02T08:04:14.083
> 
> 标签：github

需要 GitHub 使用方面的帮助。我想知道是否有一种方法可以与 github.com 用户交流，即在用户的 GitHub 页面上只提供用户名/id 时给用户写一条消息？GitHub 有这个社交功能吗？

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2012-10-02T09:23:23.287

尽管 GitHub 删除了私人消息功能，但仍有替代方案。

GitHub 托管 git 存储库。如果您愿意与之交流的用户曾经提交过一些代码，那么您很有可能实现您的目标。实际上，在每个提交中都存储了一些关于更改作者或接受更改的人的信息。

如果您真的很想与用户**user_test交换**

*   显示用户的公开活动页面：[https ://github.com/user_test?tab=activity](https://github.com/user_test?tab=activity)
*   搜索声明**“user_test push to [branch] at [repository]”**的事件。通常有很好的机会，他们可能已经推送了他自己的一个提交。通过单击“查看比较...”链接确保是这种情况，并确保用户被列为提交者之一。
*   在您的本地计算机上克隆他们推送到的存储库：`git clone https://github.com/..../repository.git`
*   查看他们推送到的分支：`git checkout [branch]`
*   显示最新的提交：`git log -50`

作为提交者/作者，电子邮件应与提交数据一起显示。

**注意：**与不请自来的电子邮件相关的每个警告都应在此处适用。不要*垃圾*邮件。

* * *

## 回答 #2

> 赞同：331
> 
> 时间：2017-05-28T15:50:31.460

**此方法自 2022 年 1 月起有效**

1.  将下一行复制并粘贴到浏览器中（随意添加书签）：[https ://api.github.com/users/xxxxxxx/events/public](https://api.github.com/users/xxxxxxx/events/public)
2.  找到您想要接收电子邮件的 GitHub 用户名。将 URL 中的 xxxxxxx 替换为此人的 GitHub 用户名。点击输入。
3.  按 Ctrl+F 并搜索“电子邮件”。

正如[qbolec](https://stackoverflow.com/users/575699/qbolec)所建议的，上述步骤可以通过使用以下代码片段来完成：

```
<input id=username type="text" placeholder="github username or repo link">
<button onclick="fetch(`https://api.github.com/users/${username.value.replace(/^.*com[/]([^/]*).*$/,'$1')}/events/public`).then(e=> e.json()).then(e => [...new Set([].concat.apply([],e.filter(x => x.type==='PushEvent').map(x => x.payload.commits.map(c => c.author.email)))).values()]).then(x => results.innerText = x)">GO</button>
<div id=results></div>
```

资料来源：[马修费里@Sourcecon](https://www.sourcecon.com/how-to-find-almost-any-github-users-email-address/)

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2018-03-14T12:09:18.597

只需创建一个虚拟仓库，打开一个新问题并使用@xxxxx 通知受影响的用户。

如果用户启用了电子邮件通知，他们将收到一封电子邮件，如果没有，他们将在下次登录时通知。

无需在提交或活动流中搜索电子邮件地址，并且尊重隐私。

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2017-06-19T19:08:19.663

对于像我这样的懒人，基于[Nikhil 解决方案的片段](https://stackoverflow.com/a/44229207/575699)

```
<input id=username type="text" placeholder="github username or repo link">
<button onclick="fetch(`https://api.github.com/users/${username.value.replace(/^.*com[/]([^/]*).*$/,'$1')}/events/public`).then(e=> e.json()).then(e => [...new Set([].concat.apply([],e.filter(x => x.type==='PushEvent').map(x => x.payload.commits.map(c => c.author.email)))).values()]).then(x => results.innerText = x)">GO</button>
<div id=results></div>
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2012-10-02T08:06:39.230

Github 在 2012 年 4 月 3 日说：

> 今天我们要删除两个功能。他们已经积攒了一段时间的灰尘，是时候把它们扔掉了：分叉队列和私人消息

[资源](https://github.com/blog/1091-spring-cleaning)

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2017-08-01T18:00:29.563

这是另一种方式：

*   浏览某人的提交历史（单击`commits`分支旁边的哪个以查看整个提交历史）

*   单击带有此人用户名的提交，因为可能有很多人

*   然后您应该会看到该网址有一个与 URL 连接的哈希值。添加**`.patch`**到此提交 URL

*   您*可能会*在此处看到此人的电子邮件地址

例子：`https://github.com/[username]/[reponame]/commit/[hash].patch`

资料来源：[克里斯赫伦@Sourcecon](https://www.sourcecon.com/how-to-find-almost-any-github-users-email-address-2-0/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-04-12T12:30:43.080

除了删除*github 消息服务*外，由于许多 githubber 与 twitter 交流和提倡[twitter](https://twitter.com/) ，因此通常不需要使用。

**优点**是有：

*   完全透明
*   更好的覆盖范围
*   更好的推文搜索功能
*   更好的存档，例如美国国会图书馆

stackoverflow 也不允许私人消息传递，以确保完全透明，这可能并非巧合。整个消息传递问题在[此处](https://meta.stackexchange.com/questions/431/any-way-to-send-a-personal-message-to-another-user)的 meta-stackoverflow 上进行了彻底讨论。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-04T09:33:30.330

对我来说非常有效的最简单的解决方案就是放置该特定用户的用户名或相应用户的存储库链接！

```
<input id=username type="text" placeholder="Github Username or Repo link">
<button onclick="fetch(`https://api.github.com/users/${username.value.replace(/^.*com[/]([^/]*).*$/,'$1')}/events/public`).then(e=> e.json()).then(e => [...new Set([].concat.apply([],e.filter(x => x.type==='PushEvent').map(x => x.payload.commits.map(c => c.author.email)))).values()]).then(x => results.innerText = x)">GO, Get email!</button>
<div id=results></div>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-23T06:03:41.937

> Does GitHub have this social feature?

If the [commit email is kept private](https://docs.github.com/en/github/setting-up-and-managing-your-github-user-account/setting-your-commit-email-address#about-commit-email-addresses), GitHub [now (July 2020) proposes](https://github.blog/changelog/2020-07-22-users-and-organizations-can-now-add-twitter-usernames-to-their-github-profiles/):

> ## Users and organizations can now add Twitter usernames to their GitHub profiles

> You can now add your Twitter username to your GitHub profile directly from your profile page, via profile settings, and also the REST API.
> 
> We've also added the latest changes:
> 
> *   Organization admins can now add Twitter usernames to their profile via organization profile settings and the REST API.
> *   All users are now able to see Twitter usernames on user and organization profiles, as well as via the REST and GraphQL APIs.
> *   When sponsorable maintainers and organizations add Twitter usernames to their profiles, we'll encourage new sponsors to include that Twitter username when they share their sponsorships on Twitter.

That could be a workaround to leave a message to a GitHub user.

# extjs - ExtJS4 gridPanel 数据未显示

> ID：12686546
> 
> 赞同：0
> 
> 时间：2012-10-02T08:04:21.593
> 
> 标签：extjs, store, gridpanel

我制作了这个非常简单的 jsfiddle 来向您展示这种异常行为[http://jsfiddle.net/mrgamer/GgUkE/2/](http://jsfiddle.net/mrgamer/GgUkE/2/)

在我的应用程序中，我使用了与我在这里编写的相同的方法，在商店中使用 .loadRawData()，因为 .loadData() 不会触发“加载”事件。我正在手动填充商店，因为我必须过滤一些 JSON 数据，编译它，然后插入到这个商店。

无论如何，问题似乎不在商店中，因为 Grid 已填充，您可以单击 2 行，但不显示数据！

![在此处输入图像描述](../Images/3bc462a24bb72e319c61a188e2f9bd43.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:19:32.467

**更新**

您的列中的**dataIndex**属性有错字。需要大写字母“I”

**带有商店示例的网格面板**

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)

**固定代码**

[http://jsfiddle.net/fw3Vc/1/](http://jsfiddle.net/fw3Vc/1/)

# asp.net - 使用日历扩展器回发后文本框未保留其值

> ID：12686548
> 
> 赞同：1
> 
> 时间：2012-10-02T08:04:23.747
> 
> 标签：asp.net, textbox, postback, calendarextender

我正在使用带有文本框的 CalendarExtender 作为目标控件。我的代码如下：

```
<asp:TextBox ID="textBoxFromDate" runat="server" EnableViewState="true" />
<asp:CalendarExtender ID="textBoxFromDate_CalendarExtender" runat="server" Enabled="True"
                    TargetControlID="textBoxFromDate" Format="dd/MM/yyyy" EnableViewState="true">
</asp:CalendarExtender> 
```

所以我使用日历控件来设置文本框中的值。这很好用，但是当页面上发生回发时，文本框值将重置为日历控件的默认日期。

如何让文本框在回发时保留其价值？

提前致谢。

我正在使用 ASP.Net 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:24:13.297

您是否尝试动态设置只读字段而不是在标记中？另外，我会确保您`Page_Load()`在回发期间没有重置值。

或者尝试这样的事情`Page_load`，在尝试将其设置为日历扩展器选择的日期之前，还要检查框中是否有有效日期？

```
if (IsPostBack) 
{ 
    MyCalendarExtender.SelectedDate =
        DateTime.ParseExact(MyTextBox.Text, MyCalendarExtender.Format, null); 
} 
```

# c# - 控件未加载到 C# 的设计器中

> ID：12686550
> 
> 赞同：1
> 
> 时间：2012-10-02T08:04:26.137
> 
> 标签：c#, winforms, user-controls, designer

一个非常简单的例子。我有两节课：

```
public class BaseControl : UserControl  {  }

public partial class MyControl : BaseControl 
{
    public MyControl()
    {
        InitializeComponent();
    } 
} 
```

我可以在设计器模式下打开 BaseControl，但 MyControl 不能（VS 2008）。我**不能**只从类 UserControl 继承类 MyControl。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:09:53.047

确保你有这样定义的类：

```
public class BaseControl : UserControl  
{  
    public BaseControl()
    {
        InitializeComponent();
    } 
}

public partial class MyControl : BaseControl 
{
    public MyControl()
    {
        InitializeComponent();
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:11:44.227

你需要用`[Designer(typeof(MyControlDesigner))]`属性装饰你的类 MyControl

并编写`MyControlDesigner`继承的类`IDesigner`

# excel - EPPlus 图表在单独的工作表中

> ID：12686552
> 
> 赞同：1
> 
> 时间：2012-10-02T08:04:34.167
> 
> 标签：excel, graph, epplus

如何使用 EPPLus 将图表创建为单独的工作表，而不是作为现有工作表中的绘图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-23T14:32:35.993

在 4.0.4.0 版本（从[codeplex](http://epplus.codeplex.com/SourceControl/latest)下载代码，以纠正保存文件中的错误），您可以使用：

```
workbook.Worksheets.AddChart(name, type); 
```

这将创建一个只有图表的工作表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T09:13:39.400

你应该做你想做的。那是您要绘制的图表，将其绘制在您想要的工作表中。

```
ExcelPackage pck = new ExcelPackage();
ExcelRange r1, r2;

var sheet1 = pck.Workbook.Worksheets.Add("data_sheet");
var sheet2 = pck.Workbook.Worksheets.Add("chart_sheet");
var chart = (OfficeOpenXml.Drawing.Chart.ExcelBarChart)sheet2.Drawings.AddChart("some_name", OfficeOpenXml.Drawing.Chart.eChartType.ColumnClustered);
chart.Legend.Position = OfficeOpenXml.Drawing.Chart.eLegendPosition.Right;
chart.Legend.Add();
chart.SetPosition(1, 0, 1, 0);
chart.SetSize(600, 400);
chart.DataLabel.ShowValue = true;

r1 = sheet1.Cells["A3:A10"];
r2 = sheet1.Cells["B3:B10"];
chart.Series.Add(r2, r1);

chart.Style = OfficeOpenXml.Drawing.Chart.eChartStyle.Style21;
chart.Title.Text = "Some title";
chart.XAxis.Title.Text = "X axis name";
chart.YAxis.Title.Text = "Y axis name"; 
```

在此示例中，图表在 sheet2 中绘制，但数据在 sheet1 中。希望这会有所帮助。

# javascript - 处理结束后，全局变量是否存储在浏览器中？

> ID：12686560
> 
> 赞同：0
> 
> 时间：2012-10-02T08:05:02.000
> 
> 标签：javascript

请看下面的代码。
在我单击“PUT VAR”按钮后，警报总是显示值“putted!!” 当我单击“SHOW VAR”按钮时。
这是否意味着我可以将全局变量用作页面上的隐藏值？

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript"> 
var test_var = "default";
$(function(){
    $("#show_var").on("click", function(){
        alert(test_var);
    });

    $("#put_var").on("click", function(){
        test_var="putted!!";
    });
});
</script>
</head>
<body>
<div id="demo">
<input type="button" value="SHOW VAR" style="width:100px" id="show_var" />
<input type="button" value="PUT VAR" style="width:100px" id="put_var" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:07:16.800

只要创建变量的上下文有效，就会存储变量。本质上

```
var test_var = value 
```

在任何闭包之外都与

```
window.test_var = value. 
```

该`window`对象在`unload`事件发生后被销毁，因此只要您保持在相同的文档上下文中，您的变量就会被存储。

所以，是的，您可以将它们用作*隐藏值*，但您应该将它们`<input type="hidden">`用于表单值。

# asp.net-mvc-3 - dropDownList 不显示真实数据

> ID：12686563
> 
> 赞同：0
> 
> 时间：2012-10-02T08:05:17.680
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我在我的视图中添加了模型：

```
 @model Tuple<List<EshopTheme.Areas.Administrators.Models.ThemeGroupsModel>,
                      EshopTheme.Areas.Administrators.Models.AdminModel,
                      EshopTheme.Areas.Administrators.Models.ThemesModel> 
```

在我的控制器中，我添加了这个动作：

```
 public ActionResult AddTheme()
    {
        AdminSrv adminService = new AdminSrv();
        AdminModel adminModel = new AdminModel();
        ThemesModel themeModel = new ThemesModel();
        Tuple<List<ThemeGroupsModel>, AdminModel, ThemesModel> tuple =
            new Tuple<List<ThemeGroupsModel>, AdminModel, ThemesModel>
                (adminService.getAllThemeGroupByAdmin(), adminModel, themeModel);
        return View(tuple);
    } 
```

我用过这个 DropDownListFor ：

```
 @Html.DropDownListFor(x => x.Item1, new SelectList(Model.Item1)) 
```

但是， DropDownListFor 显示以下列表：

```
 EshopTheme.Areas.Administrators.Models.ThemeGroupsModel
    EshopTheme.Areas.Administrators.Models.ThemeGroupsModel
    EshopTheme.Areas.Administrators.Models.ThemeGroupsModel 
```

为什么？？？？？？？？？？？？？

这是我的 getAllThemeGroupByAdmin() 代码：

```
 public List<ThemeGroupsModel> getAllThemeGroupByAdmin()
    {
        List<ThemeGroupsModel> ThemeGr = new List<ThemeGroupsModel>();
        ThemeGroupsModel ThemeGrTemp;
        using (var context = new EShopThemeDBEntities(idbconnection.ConnStr))
        {
            var ThemeGroupList = (from o in context.ThemeGroups
                                  select o).ToList();

            foreach (var item in ThemeGroupList)
            {
                ThemeGrTemp = new ThemeGroupsModel();
                ThemeGrTemp.ThemeGroupName = item.ThemeGroupName;
                ThemeGrTemp.ThemeGroupId = item.ThemeGroupID;
                ThemeGr.Add(ThemeGrTemp);
            }
        }
        return ThemeGr;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:13:54.757

您应该使用 Text 和 Value 属性；

SelectList selectList = new SelectList(selectListItems, "Value", "Text");

# mysql - MYSQL - 插入触发器后简单不会触发

> ID：12686565
> 
> 赞同：0
> 
> 时间：2012-10-02T08:05:42.870
> 
> 标签：mysql, sql, triggers

在这里，我有以下触发器：

```
USE dbsspf;

DELIMITER $$

CREATE
DEFINER = 'root'@'localhost'
TRIGGER TR_ASSIGN_PAGEINDEX
AFTER INSERT
ON LIB_RECORDS
FOR EACH ROW
BEGIN

  UPDATE LIB_RECORDS
  SET
  PAGE_INDEX = 13;

END
$$

DELIMITER ; 
```

如您所见，我只是在更新触发器中的表。但是，当我插入新记录时，触发器不会触发。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:10:27.057

> *B.5.9：触发器可以访问表吗？*
> 
> 触发器可以访问自己表中的旧数据和新数据。触发器也可以影响其他表，但不允许修改已被调用函数或触发器的语句使用（用于读取或写入）的表。

[http://dev.mysql.com/doc/refman/5.5/en/faqs-triggers.html#qandaitem-B-5-1-9](http://dev.mysql.com/doc/refman/5.5/en/faqs-triggers.html#qandaitem-B-5-1-9)

换句话说，触发器`LIB_RECORDS`不能在 上写入其他行`LIB_RECORDS`。

# html - 加载没有新行的文本区域

> ID：12686566
> 
> 赞同：1
> 
> 时间：2012-10-02T08:05:44.933
> 
> 标签：html, struts2, textarea, ibatis

这是我的问题：在我的数据库中，我得到了一个长度为 2000 的 VACHAR2。我们称之为“commentReception”。

它被映射到我的 Struts bean 中的字符串。

jspx（在表单中处理咨询和更新）看起来是这样的：

```
<s:if test="%{consultAction}">
  <s:textarea name="dto.commentReception" readonly="true" cssClass="textAreaValue readonly" />
</s:if>
<s:else>
  <s:textarea name="dto.commentReception" readonly="false" cssClass="textAreaValue" />
</s:else> 
```

当我提交表单时，bean 被正确填写，这意味着最后没有任何 \r\n ，即使在数据库中，我也只得到一行：没有换行符。

但是当我切换到consultAction，或者说再次编辑表单（不是consultAction）时，我得到的字符串带有额外的2个换行符。这真的很烦人，我不知道它是来自 Struts 还是来自标签。（我可能缺少标签属性？）

当然，如果我再次提交表单，评论字符串将与换行符一起存储在数据库中。所以它会在每次保存我的评论时再添加两行...

你知道我的问题来自哪里吗？已经谢谢了。

编辑：生成的表格

```
<textarea class="textAreaValue" id="saveControleReception_dto_commentReceiption" rows="" cols="" name="dto.commentReceiption">commentaire contrôle avant reception.

</textarea> 
```

您可以看到有一些换行符，但在我的 bean 中没有考虑到它们。但是当我重新加载它时，它们不知何故。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:06:41.223

因此，似乎 struts 标记在加载 bean 时默认添加两个 \r\n 到字符串。那一定是某种错误。所以这是我的解决方案：

```
<s:if test="%{consultAction}">
  <textarea readonly="true" class="textAreaValue readonly"><s:property value="dto.commentReceiption"/></textarea>
</s:if>
<s:else>
  <textarea class="textAreaValue" name="dto.commentReceiption"><s:property value="dto.commentReceiption"/></textarea>
</s:else> 
```

我使用了 html 标签而不是 Strut 的标签和属性标签...如果有人有更好的答案（必须有），我还在听；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:13:02.953

当您保存或检索数据时，添加 trim() 以防您使用 mySQL。当您检索/保存它时，这将删除剩余的空格

# cloud-foundry - 手动路由到应用程序实例

> ID：12686567
> 
> 赞同：1
> 
> 时间：2012-10-02T08:05:47.803
> 
> 标签：cloud-foundry

作为一个 OpenPaaS，Cloud Foundry 支持通过简单的 VMC 命令扩展和缩减应用程序实例：`vmc instances <appname> <num|delta>`据我所知。

甚至 Cloud Foundry 也支持将“用户”请求动态路由到实例。这很好！

在这里，我想知道的是 Cloud Foundry 是否支持我手动（可能是一些命令或其他技术）路由以使用实例？例如，当我扩展两个实例并且其中一个非常忙于响应“用户”请求时，因此在这种情况下，我想手动将“用户”请求路由到“惰性”实例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:56:33.083

在 Cloud Foundry 中，当您向应用程序添加实例时，它实际上会执行粘性会话。用户无法将流量定向到特定实例。

# javascript - 如何使用 yuidoc 注释记录独立功能

> ID：12686569
> 
> 赞同：2
> 
> 时间：2012-10-02T08:05:49.443
> 
> 标签：javascript, documentation

我想为一组 javascript 文件生成文档。

我正在尝试使用 yuidoc 生成，但我不知道如何记录独立函数。

```
function getNullString(){...} 
```

类中的方法可以正常工作：

```
/**
* ArgumentBuilder
*
* @class argumentBuilder
* @argumentBuilder
*/
function argumentBuilder () {
    /// &lt;summary&gt;Clase utilizada para lo relacionado con funciones del constructor de arguemtnario&lt;/summary&gt;
};

/**
* Explanation of the method
*
* @method getComponents
*/
argumentBuilder.getComponents = function (){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:49:01.927

我有同样的问题。似乎 YUIDocs 只准备“读取”类/模块工作流。我的解决方案是创建一个虚构类，然后使用 @method 注释记录其上的函数。

想象一个 ini.js 文件，在它之上你可以创建一个@class 注解：

```
/**
Main application init functions
@class init
*/ 
```

然后在函数上，使用 @method 注释：

```
/**
My function description here
@method myFunctionName
*/ 
```

这样做确实会在文档中创建“无效”类“init”，但至少您的方法也会出现在文档中。

# extjs - Extjs 3.4 中的日期格式不呈现和显示

> ID：12686575
> 
> 赞同：3
> 
> 时间：2012-10-02T08:06:10.863
> 
> 标签：extjs, extjs3

在下面的代码中，我无法在网格面板中获取**生日字段，**

```
var store = new Ext.data.SimpleStore({
    fields:[
       'name',
       'phone',
       'email',
       {name:'birthday', **type:'date', dateFormat:'m/d/y'**}
       ]
});

 var myData = [
               ['Meyers, Quyn R.', '(943) 570-5141', 'Proin@nullamagna.ca', '05/13/1990'],
               ['Whitney, Tad T.', '(547) 743-0343', 'vulputate@acurnaUt.org', '05/10/1987'],
              ];

store.loadData(myData);

var grid = new Ext.grid.GridPanel({
    store:store,
    columns:[{header:'NAME', width:170 , sortable:true, dataIntex:'name'},
             {header:'PHONE NO', width:150 , sortable:true, dataIntex:'phone'}, 
             {header:'EMAIL ', width:150 , sortable:true, dataIntex:'email'},
             {header:'BirthDate ', width:100 , sortable:true, dataIntex:'birthday',**renderer: Ext.util.Format.dateRenderer('d/m/Y')** }
             ],
    title:'My Contacts',
    autoHeight:true,
    width:590,
    //renderTo:document.body(),
    fram:true
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:41:17.577

`dateFormat`您的`birthday`字段配置有误。应该：

```
{ name : 'birthday', type : 'date', dateFormat : 'm/d/Y' } 
```

希望这有帮助。

# ios - OpenGLES-2 是否支持 iPod Touch 3G？

> ID：12686576
> 
> 赞同：0
> 
> 时间：2012-10-02T08:06:20.987
> 
> 标签：ios, opengl-es-2.0, ipod, info.plist

我们在 iOS 平台上开发了几个应用程序/游戏。我们需要对 opengles-2 的支持最少。

我们必须在 info.plist 中进行配置，Required Device Capabilities => opengles-2 => YES。

现在在这个配置中，iPod Touch 3G 设备是否能够安装我们的游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:21:53.243

在 Apple Developer Library 中，它说第三代 iPod Touch 支持 OpenGL ES 2.0。

请参阅：http: [//developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html)

# javascript - 在视图和 JS 之间传递值

> ID：12686589
> 
> 赞同：0
> 
> 时间：2012-10-02T08:07:34.830
> 
> 标签：javascript, asp.net-mvc-3

我有这样的看法：

```
<script type="text/javascript" src='<%: Url.Content("~/Scripts/new.js") %>'></script>
<div class="col1">
  Number of Questions:
</div>
<div class="col2-input" id="no-of-questions-value">
  <input type="hidden" name="NumberOfQuestionsHidden" id="NumberOfQuestionsHidden" value="<%: Model.NumberOfQuestions %>" />
  <%: Html.TextBoxFor(model => model.NumberOfQuestions) %>
</div>
<div class="col3">
  <div id="save-no-of-questions-button">
    <a href="javascript:saveNoOfQuestions();" class="button">Save</a>
  </div>
</div> 
```

以及我确定值的new.js：这个js运行一个scorm模块并在我检查scorm模块中的问题时记录每个事件，我计算所有正确和所有不正确然后我知道问了多少问题。

```
 function LogEvent(action,data)
 {
    if (data == "correct") {
       correct_count++;
       alert("incorrect count = " + incorrect_count + " correct count = " + correct_count);
 }

 if (data == "incorrect") {
    incorrect_count++;
    alert("incorrect count = " + incorrect_count + " correct count = " + correct_count);
 }

} 
```

为了得到问题的总数，我添加了正确的计数和不正确的计数，并希望将其传递给视图到 Html.TextBoxFor(model => model.NumberOfQuestions)。我不知道该怎么做。请问有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:11:19.570

我想知道为什么您在文本框中显示问题的数量，但仍然......您可以通过以下方式更新您的文本框值：

```
document.getElementById('NumberOfQuestions').value = 'whatever you want'; 
```

这将起作用，因为默认元素 ID 是模型属性的名称。

要获得干净的客户端 ID，您可以[在此处](https://stackoverflow.com/q/5418898/944681)阅读更多内容。

# objective-c - 改变目标C中每个其他单元格的背景颜色

> ID：12686592
> 
> 赞同：3
> 
> 时间：2012-10-02T08:07:54.300
> 
> 标签：objective-c, ios, ios5, uitableview

我有一个 uiTableView。我希望每个其他单元格都获得另一种背景颜色。我正在尝试这样。但它不会起作用。有人有线索吗？

```
 if(indexPath.row % 2 == 0){
        cell.backgroundColor = [UIColor whiteColor];
    }else{
        cell.backgroundColor = [UIColor blueColor];
    } 
```

亲切的问候，

史蒂夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:30:22.553

您可以使用 :`cell.contentView.backgroundColor`而不是`cell.backgroundColor`inside`tableView:cellForRowAtIndexPath:`

或者：（来自 Apple 文档）

> 注意：如果要更改单元格的背景颜色（通过 UIView 声明的 backgroundColor 属性设置单元格的背景颜色），您必须在委托的 tableView:willDisplayCell:forRowAtIndexPath: 方法中进行，而不是在 tableView :cellForRowAtIndexPath: 数据源的。更改组样式表视图中单元格的背景颜色在 iOS 3.0 中产生的效果与以前版本的操作系统不同。它现在影响圆角矩形内部的区域，而不是它外部的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:00:16.687

要回答评论中的扩展问题，请将标签的背景颜色设置为`label.backgroundColor = [UIColor clearColor];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:17:41.987

```
cell.backgroundView=[[UIView alloc]initWithFrame:cell.frame];
[cell.backgroundView setBackgroundColor:[UIColor blueColor]]; 
```

会做这项工作或

```
[cell.contentView setBackgroundColor:[UIColor blueColor]]; 
```

# java - 使用来自 java 客户端的 Tomcat JMX 代理来启动/停止 Web 应用程序

> ID：12686595
> 
> 赞同：1
> 
> 时间：2012-10-02T08:08:23.540
> 
> 标签：java, tomcat, jmx

我正在尝试编写一个简单的 java 客户端，用于使用 Tomcat JMX 代理启动/停止部署在 Tomcat 上的应用程序。Tomcat 的文档在这里[http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Using_the_JMX_Proxy_Servlet](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Using_the_JMX_Proxy_Servlet)有帮助，但是我无法确定这样做的确切代码。任何帮助将不胜感激。

# tfs - TFS API TestManagementService 始终返回 null

> ID：12686596
> 
> 赞同：5
> 
> 时间：2012-10-02T08:08:26.693
> 
> 标签：tfs, tfs-sdk

我正在尝试使用 TFS API 获取测试计划。

```
TfsTeamProjectCollection tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://xxxxxxx:8080/tfs/DefaultCollection"));

var service = (ITestManagementService)tfs.GetService(typeof(ITestManagementService)); 
```

变量“服务”总是返回 null。

你有什么想法，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:56:05.923

在调用 Get Service 命令之前，请尝试确保您已通过团队项目集合的身份验证。这个代码片段对我来说是正确的：

```
TfsTeamProjectCollection tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("https://tfs.companyname.com/tfs/DefaultCollection"));
tpc.EnsureAuthenticated();

ITestManagementService service = tpc.GetService<ITestManagementService>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T20:42:48.210

也许您正在链接不同版本的参考程序集，混合不同版本的 Visual Studio 程序集？例子：

*   `Microsoft.TeamFoundation.Client`v11.0 (VS 2012)
*   `Microsoft.TeamFoundation.TestManagement.Client`v12.0 (VS 2013)

我有同样的问题，`GetService<ITestManagementService>()`总是返回 null，即使`GetService<VersionControlServer>()`会返回好的（非 null）值。

MSDN中发布的解决方案[- VersionControlServer 总是返回 null](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0e965405-b98f-4394-a2a6-f3f3ea377e0c/versioncontrolserver-always-returns-null)对我有用：我引用了一些 v11.0 (VS2012) 和 v12.0 (VS2013) 程序集。更改对 v11.0 的所有引用为我修复了它。

# objective-c - 这个 UIViewController 怎么总是以纵向模式显示？

> ID：12686600
> 
> 赞同：0
> 
> 时间：2012-10-02T08:08:48.343
> 
> 标签：objective-c, ios

当我的设备处于横向模式并且我以模态方式呈现视图控制器时，它始终以纵向模式显示，这正是我想要的。

但是，我不明白为什么其他视图（模态呈现）总是以横向模式显示（如果设备的当前方向是横向）。我使用的代码对于我的所有视图控制器都是相同的，并且 xib 文件方向属性始终为纵向。

这就是我推动工作的视图控制器的方式（它永远不会以横向模式显示）：

```
 - (IBAction)showImport:(id)sender
    {
        CMImportExportViewControlleriPhone *importController = [[CMImportExportViewControlleriPhone alloc] initWithNibName:@"Import-Export-iPhone" bundle:nil];
        [importController setLayoutViewController:self];
        //[importController setDelegate:self];
        [self presentModalViewController:importController animated:YES];
        [importController release];
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:17:52.870

如果这是初始视图控制器，并且您在 plist 文件中有设置以纵向模式启动应用程序，那么它将以纵向模式显示，无论您的设备方向是什么。当您将设备置于横向模式并呈现新的视图控制器时，它将是横向的，因为它遵循状态栏的方向！在呈现新的视图控制器之前，尝试将状态栏重置为纵向模式，然后呈现新的视图控制器。它将以纵向模式呈现！我在 iOS 6.0 中遇到了类似的问题。

# c++ - Boost python / 从线程导入模块需要ReleaseLock()。为什么？

> ID：12686604
> 
> 赞同：1
> 
> 时间：2012-10-02T08:09:02.277
> 
> 标签：c++, c, boost-python

我开发了一个带有多线程的 boost.python C/C++ 程序。

在`main()`中，我创建了一个线程：

> PyEval_InitThreads();
> 
> pthread_create( &id, &detached_attr, newThread, NULL );

・在 newThread() 中，我调用了两个 Py_* 函数。

> Py_Initialize();
> 
> PyGILState_STATE gstate = PyGILState_Ensure();

然后我调用一个名为`hoge()`in的 C++ 函数`newThread()`：

```
void hoge(){
    py::object main_module;
    py::object main_namespace;

    try {
        main_module = py::import("__main__");   //segmentation fault
        main_namespace = main_module.attr("__dict__");
    } catch (py::error_already_set const &) {
        PyErr_Print();
    }

    //Some boost python code
} 
```

gdb 回溯跟踪输出在这里。

```
(gdb) bt
#0  0x4032fe24 in __ctype_b_loc () from /lib/libc.so.6
#1  0x4032fde8 in __ctype_b_loc () from /lib/libc.so.6 
```

为什么会`import()`失败？我不知道。请告诉我如何解决这个问题。

——编辑 28 年 12 月 12 日——

我使用以下方法解决了这个问题。

在`main()`中，我执行

```
Py_Initialize();
PyEval_InitThreads();
PyEval_ReleaseLock(); 
```

然后我创建新线程。在新线程中，我执行

```
PyGILState_STATE gstate = PyGILState_Ensure();
CALL SOME PYTHON CODE
PyGILState_Release(gstate); 
```

但我不知道*为什么*这现在有效。有人可以告诉我原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:09:50.717

与许多其他解释语言一样，Python 通过使用全局解释器锁（或 GIL）来实现线程安全（[请参阅此 wiki](http://wiki.python.org/moin/GlobalInterpreterLock)），它可以阻止两个 Python 解释器调用并行运行。因此，您发出的任何 python 调用都应首先请求锁，执行您的命令，然后释放锁。您必须遵循该规则，否则您可能会使解释器崩溃，就像您在示例中所做的那样。请注意，您的函数`hoge()`没有请求 GIL，因此发生了崩溃。

现在，用 GIL 请求（或“确保”）包装您的代码并释放函数调用并不能解决所有问题 - 您仍然需要确保当您有 2 个线程时，**两者**都可以访问 GIL。如果您不会在主线程上释放 GIL，那么您实际上执行 python 内容的第二个线程将被永远阻塞！你试过吗？如果没有，你可以看看会发生什么。

正确的解决方案 - 您自己找到的解决方案是在每个线程中获取和释放 GIL，并确保您不会陷入其中一个拥有 GIL 的线程而其他线程挨饿。

# java - Hibernate - 不同的持久化方法

> ID：12686608
> 
> 赞同：1
> 
> 时间：2012-10-02T08:09:25.170
> 
> 标签：java, hibernate

使用任何休眠持久性机制是否有任何差异，优点/缺点

*   本机 API 和 hbm.xml 文件
*   注释
*   Java 持久性 API (JPA)
*   恩弗斯

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:14:41.683

你在这里混合你的隐喻

*   Hibernate 使用 Native API 和 hbm.xml 来读取和写入数据库。他们将对象转换为关系表

*   注释是在类中指定对象/表之间的各种关系的一种方式。这可以用来代替 hbm.xml

*   JPA 是一个用于实现 OR 及其周围部分的框架。您可以将 JPA 与 Hibernate 一起使用。

*   Envers 我不太了解，但我相信它是 Hibernate 中的一个审计模块

我建议尽可能保持通用性，以便如果 Hibernate 不能满足您的需求，您可以使用 EclipseLink 或其他东西。如果您将自己束缚在休眠状态，那么如果您遇到问题，将很难移动（说我使用了休眠状态并且从来没有理由移动......但是;））

我建议您查找有关每一项的更多详细信息，然后他们会提出具体问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:14:02.550

Hibernate 与 JPA 语义：我们在整个项目中使用 JPA 语义，这类似于基于接口的实现，其中 JPA 规范类似于接口定义，而 Hibernate 是实现规范的提供者。

注释与 hbm.xml：我们决定使用注释而不是在 XML 文件中指定实体定义，以使域对象和数据库对象之间的关联更容易且连接良好。

# android - Android：充气时出现白屏

> ID：12686614
> 
> 赞同：3
> 
> 时间：2012-10-02T08:09:55.480
> 
> 标签：android

我正在尝试通过夸大我的布局来构建一个动物测验。测验由 1 张图片和 4 个答案组成（每页）

它适用于某些 Android 设备（例如：Samsung GS2），而我在其他设备（Galaxy note、GS3 ...）上都出现了空白屏幕，这些设备都在 4.0 上运行。

我不明白为什么。你能给我一些帮助吗？

-------------- 布局部分 ---------

cat_quiz.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/home_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/label_quiz_score"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:textSize="12dip"
                android:textStyle="normal" >
            </TextView>
        </LinearLayout>

        <include layout="@layout/cat_quiz_item" />
    </LinearLayout>

</ScrollView> 
```

cat_quiz_item.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <com.mycatfamily.widget.MyGallery
            android:id="@+id/photogallery"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/img_item_gallery"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" >

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:paddingTop="5dp" >

            <TextView
                android:id="@+id/label_quiz_button_1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:textSize="15dip"
                android:textStyle="bold" >
            </TextView>

        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            >

            <TextView
                android:id="@+id/label_quiz_button_2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:paddingTop="10dp"
                android:textSize="15dip"
                android:textStyle="bold" >

            </TextView>

        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" >
            <TextView
                android:id="@+id/label_quiz_button_3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:paddingTop="10dp"
                android:textSize="15dip"
                android:textStyle="bold" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" >

            <TextView
                android:id="@+id/label_quiz_button_4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:paddingTop="10dp"
                android:textSize="15dip"
                android:textStyle="bold" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" >

            <TextView
                android:id="@+id/label_photo_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:textStyle="bold"
                android:visibility="gone" >
            </TextView>

            <TextView
                android:id="@+id/animal_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:visibility="gone" >
            </TextView>
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

---------------- 适配器部分 ---------------------------

```
public class QuizAdaptor extends BaseAdapter {
private Activity context;  
    public static int[] ids;
    public static int[] data;
    public static String[] name;
    public static String[] btn_1_name;
    public static String[] btn_2_name;
    public static String[] btn_3_name;
    public static String[] btn_4_name;
    public static int img_width=420;
    public static int img_height=300;
    public int score = 0; 
    public int answers=0;
private int cpt_popup=0;
public QuizAdaptor(Activity context) {   
        this.context = context; 
        } 
    public  class ViewHolder{   
        public TextView animal_id;
        public TextView text;    
        public ImageView image;     
        public TextView label_quiz_button_1;
        public TextView label_quiz_button_2;
        public TextView label_quiz_button_3;
        public TextView label_quiz_button_4;
        public MyGallery gallery;
    }   

    public View getView(int position, View convertView, ViewGroup parent) {   
        View view = null;
        if(convertView==null){  
            LayoutInflater inflater = LayoutInflater.from(context);
            view = inflater.inflate(R.layout.cat_quiz_item, null);
            final ViewHolder viewHolder = new ViewHolder();

            viewHolder.animal_id=(TextView)view.findViewById(R.id.animal_id);
            viewHolder.text=(TextView)view.findViewById(R.id.label_photo_name);  
            viewHolder.image=(ImageView)view.findViewById(R.id.img_item_gallery);
            viewHolder.label_quiz_button_1=(TextView)view.findViewById(R.id.label_quiz_button_1);
            viewHolder.label_quiz_button_2=(TextView)view.findViewById(R.id.label_quiz_button_2);
            viewHolder.label_quiz_button_3=(TextView)view.findViewById(R.id.label_quiz_button_3);
            viewHolder.label_quiz_button_4=(TextView)view.findViewById(R.id.label_quiz_button_4);
            viewHolder.gallery = (MyGallery)view.findViewById(R.id.photogallery);

            view.setTag(viewHolder);          
        }  
        else {
            view = convertView;
        }
        final ViewHolder holder = (ViewHolder) view.getTag();    
        holder.animal_id.setText(String.valueOf(ids[position]));
        holder.text.setText(name[position]);
        final int stub_id=data[position];  
        holder.image.setImageResource(stub_id);
        holder.label_quiz_button_1.setText(btn_1_name[position]);
        holder.label_quiz_button_2.setText(btn_2_name[position]);
        holder.label_quiz_button_3.setText(btn_3_name[position]);
        holder.label_quiz_button_4.setText(btn_4_name[position]);
} 
```

------------- 活动部分--------

```
 public class CatQuiz  extends Activity{
    public String TAG = getClass().getSimpleName();
    public MyGallery galleryView;
    private TextView label_photo_name, animal_id;
    private TextView label_quiz_button_1,label_quiz_button_2,label_quiz_button_3,label_quiz_button_4;
    ArrayList<String> cat_arraylist;
    private int selectedImagePosition = 0;

    public String getRandomName(ArrayList<String> cat_array, String animal_name){
        int rd = (int) Math.round(Math.random()*(cat_array.size()-1));
        if((cat_array.get(rd)).equals(animal_name)){
            return getRandomName(cat_array,animal_name);
        }
        else{
            String rslt = cat_array.get(rd);
            return rslt;
        }

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cat_quiz);
        QuizAdaptor cs_gallery = new QuizAdaptor(this);
        animal_id = (TextView) findViewById(R.id.animal_id);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        animal_id.setVisibility(View.GONE);
        label_photo_name = (TextView) findViewById(R.id.label_photo_name);
        label_photo_name.setVisibility(View.GONE);
        label_quiz_button_1 = (TextView) findViewById(R.id.label_quiz_button_1);
        label_quiz_button_2 = (TextView) findViewById(R.id.label_quiz_button_2);
        label_quiz_button_3 = (TextView) findViewById(R.id.label_quiz_button_3);
        label_quiz_button_4 = (TextView) findViewById(R.id.label_quiz_button_4);

        CatBdd catBdd = new CatBdd(getApplicationContext());
        catBdd.open();
        List<Cat> animals = catBdd.getAllCatRandom();
        cat_arraylist = catBdd.getDistinctCatNameArray();
        final int size = 30;
        int i = 0;
        cs_gallery.data = new int[size];
        cs_gallery.name = new String[size];
        cs_gallery.ids = new int[size];
        cs_gallery.btn_1_name = new String[size];
        cs_gallery.btn_2_name = new String[size];
        cs_gallery.btn_3_name = new String[size];
        cs_gallery.btn_4_name = new String[size];
        String animal_img_name;
        String animal_name_btn1;
        String animal_name_btn2;
        String animal_name_btn3;
        String animal_name_btn4;

        while(i<size){
            String animal_name = animals.get(i).getName();
            int id_item = animals.get(i).getId();
            int rd = (int) Math.round(Math.random()*4);

            if(rd==1){
                animal_img_name = animals.get(i).getCat_images_a();
                animal_name_btn1 = animal_name;
                animal_name_btn2 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn3 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn4 =getRandomName(cat_arraylist, animal_name);

            }
            else if(rd==2){
                animal_img_name = animals.get(i).getCat_images_b();
                animal_name_btn1 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn2 = animal_name;
                animal_name_btn3 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn4 =getRandomName(cat_arraylist, animal_name);

            }
            else if(rd==3){
                animal_img_name = animals.get(i).getCat_images_c();
                animal_name_btn1 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn2 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn3 = animal_name;
                animal_name_btn4 =getRandomName(cat_arraylist, animal_name);
            }
            else {
                animal_img_name = animals.get(i).getCat_images_d();
                animal_name_btn1 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn2 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn3 = getRandomName(cat_arraylist, animal_name);
                animal_name_btn4 =animal_name;
            }
            cs_gallery.ids[i] = id_item;
            cs_gallery.name[i] = animal_name;
            cs_gallery.data[i] = Integer.valueOf(animal_img_name);
            cs_gallery.btn_1_name[i] = animal_name_btn1;
            cs_gallery.btn_2_name[i] = animal_name_btn2;
            cs_gallery.btn_3_name[i] = animal_name_btn3;
            cs_gallery.btn_4_name[i] = animal_name_btn4;
            i++;
        } 
```

# jakarta-ee - 容器管理的事务和 Java 持久性 API

> ID：12686619
> 
> 赞同：1
> 
> 时间：2012-10-02T08:10:10.370
> 
> 标签：jakarta-ee, jpa, transactions

我对 JPA 中的容器管理事务有一些疑问。例如，我有一个带有托管 bean 的 JSF 页面，它调用会话 bean 的方法：

```
@ManagedBean
@RequestScoped
public class TestController {
    @EJB
    private TestBean bean;

    public String action() {
        bean.check();
        return null;
    }
}

@Stateful
@LocalBean
public class TestBean {
    @PersistenceContext
    private EntityManager em;

    public Object check() {
        return em.createQuery("SELECT u from User u WHERE u.id = 1").getSingleResult();
    }
} 
```

我是否理解正确，如果`check()`在同一个事务中调用方法，那么`EntityManagers`将具有相同的持久性上下文并且该方法将`Object`一遍又一遍地返回相同的内容？

如果对控制器的 action() 方法有多个请求，`EntityManagers`每个请求会有不同的持久化上下文吗？它是否取决于会话 bean 的类型：有状态还是无状态？

如果我将控制器的范围更改为`@SessionScoped`并从同一个会话创建多个请求怎么办？

一般来说，是否有任何规则定义容器何时创建新事务？它是否取决于容器类型（我使用的是 Glassfish）？

# c# - 在winform datagrid C#中更改单元格背景颜色

> ID：12686623
> 
> 赞同：0
> 
> 时间：2012-10-02T08:10:17.213
> 
> 标签：c#, winforms, datagrid

我想根据 c# windows 应用程序中的值更改背景数据网格单元格。例如，如果单元格值为 3 单元格背景颜色设置为蓝色，如果单元格值等于 2 单元格背景颜色更改为红色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:13:46.440

您可以使用 CellFormatting 事件：

```
private void dataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 1)
        {
            if ((int)e.Value == 3)
                e.CellStyle.BackColor = Color.Blue;
            if ((int)e.Value == 2)
                e.CellStyle.BackColor = Color.Red;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:14:44.697

你想要这样的东西

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    if (row.Cells[someColumnIndex].Value == 3)
        row.Cells[someColumnIndex].Style.BackColor = System.Drawing.Color.Blue;
    else if (row.Cells[someColumnIndex].Value == 2)
        row.Cells[someColumnIndex].Style.BackColor = System.Drawing.Color.Red;
} 
```

我希望这有帮助。

# java - 有地理散列集合吗？

> ID：12686626
> 
> 赞同：2
> 
> 时间：2012-10-02T08:10:33.517
> 
> 标签：java, collections

我有一个带有很多地理位置线的大阵列。当我想获得具有给定半径的给定点附近的所有点时，我会遍历所有列表并检查它。

有没有更有效的方法来做到这一点？像地理索引集合？我知道 mongodb 是为 db 做的，但如果它存在，我需要像“GeoHash”这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:43:03.597

(1) 使用 GeoHashing[参见此处](http://en.wikipedia.org/wiki/Geohash "GeoHash 维基百科文章")的描述，并使用[geohash-java 之](https://github.com/kungfoo/geohash-java)类的库将每个点转换为哈希。

(2) 使用前缀字符串搜索找出离目标点最近的点。

但是，请注意，比较将是近似的（一些靠近的点可能有完全不同的 geohashes）。

# c# - 使用 JSON.Net 从 Web 下载后在视图中设置图像

> ID：12686629
> 
> 赞同：0
> 
> 时间：2012-10-02T08:10:36.590
> 
> 标签：c#, image, windows-phone-7, json.net

假设我的 xaml 中有 3 个图像视图。我正在从服务器下载图像，现在我想在我的图像视图中设置这些图像。我怎样才能做到这一点 ？请帮忙 ！我的代码：

```
 void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        //parse data
            var container = DeserializeFromJson<DataJsonAttributeContainer>(e.Result);

            //load into list
            for (int i = 0; i < container.MyBookList.Count; i++)
            {
                newData[i] = new data();
                newData[i].id = container.MyBookList[i].ID;
                newData[i].title = container.MyBookList[i].TITLE;
                newData[i].type = container.MyBookList[i].TYPE;
                newData[i].price = container.MyBookList[i].PRICE;
                newData[i].downloadLink = container.MyBookList[i].DOWNLOADLINK;
                string file_name = newData[i].downloadLink.ToString();
                string image_uri = "http://www.banglanews24.com/images/imgAll/" + file_name;   
                WebClient wc = new WebClient();
                wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
                wc.OpenReadAsync(new Uri(image_uri), wc);
            }

    void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

        if (e.Error == null && !e.Cancelled)
        {
            try
            {   //I can set just one image here....what should I do ?

                BitmapImage image = new BitmapImage();
                image.SetSource(e.Result);
                image1.Source = image;

            }
            catch (Exception ex)
            {
                //Exception handle appropriately for your app  
            }
        }
        else
        {
            //Either cancelled or error handle appropriately for your app  
        }  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:28:49.513

这应该这样做：

```
 void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    //parse data
        var container = DeserializeFromJson<DataJsonAttributeContainer>(e.Result);

        //load into list
        for (int i = 0; i < container.MyBookList.Count; i++)
        {
            newData[i] = new data();
            newData[i].id = container.MyBookList[i].ID;
            newData[i].title = container.MyBookList[i].TITLE;
            newData[i].type = container.MyBookList[i].TYPE;
            newData[i].price = container.MyBookList[i].PRICE;
            newData[i].downloadLink = container.MyBookList[i].DOWNLOADLINK;
            string file_name = newData[i].downloadLink.ToString();
            string image_uri = "http://www.banglanews24.com/images/imgAll/" + file_name;   

            Uri uri = new Uri(image_uri, UriKind.Relative);
            ImageSource imgSource = new BitmapImage(uri);

            if (i==0) image1.source = imgSource;
            else if (i==1) image2.source = imgSource;
            else if (i==2) image3.source = imgSource;
            etc
        } 
```

你会发现，当你给它一个 Image URI 时，你的图片会自动下载。

# android - Android SDK 管理器不会运行

> ID：12686633
> 
> 赞同：1
> 
> 时间：2012-10-02T08:10:53.150
> 
> 标签：android, sdk

我在带有 java jdk 7u7 的 Windows 7 Pro x64 上。

我尝试在我的计算机上安装 Android SDK，但是当我启动**SDK Manager.exe**时，dos-windows 正在打开并立即关闭。所以我尝试启动`tools/android.bat`。但这没有用，它对我说：

```
"'C:\PROGRA~2\Android\ANDROI~1\tools\lib\\find_java.exe -s' isn't a external or internal command ...

ERROR No suitable java such ..." 
```

我为修复错误所做的事情：

1.  安装 Java 6u35
2.  安装 Java x32 和 x64
3.  检查我的路径
4.  在管理员中启动
5.  在 C:\Dev 中安装 sdk
6.  使用 android-sdk.zip 或 android-sdk.exe 安装
7.  在路径中添加android目录

但这次尝试中的任何一个都成功了。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:55:25.973

似乎有几种方法可以启动 SDK 管理器：

1.  `SDK Manager.exe`在 Android SDK 的根目录中。
2.  `SDK Manager.exe`在`sdk\tools\lib`Android SDK 中。
3.  `Window -> Android SDK Manager`Eclipse 中的菜单
4.  `android.bat`在`sdk\tools`Android SDK 中。

就我而言，它看起来像是`android.bat`失败了：

```
for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a 
```

至于那条线在做什么......如果我手动运行：`"[path_to_java]java" -jar lib\archquery.jar`

它成功返回：`x86_64`

但是当批处理文件运行相同的命令时，我不知道为什么但它失败并显示错误消息：

```
Unable to access jarfile lib\archquery.jar 
```

所以变量`swt_path`被设置为一个空字符串。一切都从那里崩溃。

批处理文件为变量设置正确的值`java_exe`。其他人通常将此报告为一个问题，但这些解决方法与我的情况无关。

人们建议通过将 REM 添加到问题行的开头来注释掉问题行，并添加一行来手动设置`swt_path`变量，这是一种有效的解决方法：

```
REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
set swt_path=lib\x86 
```

**但是**，就我而言，关键问题是它选择从此处`lib\x86`的文件夹或`lib\x86_64`文件夹加载 jar 文件。在某些时候，BAT 文件错误、32 位 JDK 和 64 位 Android SDK 之间的关系变得混乱。

**所以**，在我的情况下，解决方法是：

1.  卸载所有版本的 Java
2.  安装 JDK
    *   您可以使用 32 位 Android SDK 并安装 32 位 JDK
    *   或者使用 64 位 Android SDK 并安装 64 位 JDK
    *   但是JDK的“位数”应该与Android SDK相匹配。看起来 32 位或 64 位都可以在 64 位计算机上运行，​​只要 JDK 位数与 Android SDK 位数匹配。
3.  编辑“android.bat”

    *   如果使用 32 位 Android SDK/JDK，请使用`lib\x86`：

        ```
        REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
        set swt_path=lib\x86 
        ```

    *   如果使用 64 位 Android SDK/JDK，请使用`lib\x86_64`：

        ```
        REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
        set swt_path=lib\x86_64 
        ```

完成此操作后，我可以通过运行`android.bat`或从 Eclipse 菜单成功运行 SDK 管理器（但仍不能通过`SDK Manager.exe`直接运行任何一个文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:44:24.303

我这周才得到这个答案，并确定了是什么原因造成的。

当 Java 更新时，它会更改存储可执行文件的路径。这意味着当 SDK 管理器去查找 javaw.exe 时，它​​找不到它并立即关闭。

因此，重新安装 Android SDK 并不能解决问题。也不会重新安装JAVA。

解决此问题的唯一方法是正确指向存储 JAVA 的位置。

Windows 有一种称为环境变量的方法。有一个名为 PATH 的变量，它存储 Windows 将在其中查找可执行文件的所有目录。

因此，您必须修改该 PATH 变量以包含 JAVA 的路径。默认情况下，JDK 7 具有以下路径：

```
C:\Program Files\Java\jdk1.7.0_10\bin 
```

要编辑您的环境变量，请执行以下操作。

```
From the Start Menu right click on Computer and select "Properties"
This will take you to the Control Panel System Menu
On the left column look for the option "Advanced System Settings"
This will open a System Properties window
One of the tabs is named Advanced
In that there is a button that says Environmental Variables
If you search your System Variables you will see one called "Path"
Edit that variable and add the path above to include the latest Java Path. 
```

完成后，SDK 管理器应该可以立即打开，您可以继续更新到最新版本的 Android SDK。

更新完成后不要忘记确保您的 IDE（即 Eclipse）指向存储 SDK 的正确位置，以便它读取最新的 Android SDK 文件。要在 Eclipse 中访问此设置，请转到 Window -> Preferences -> Android

这将允许您手动设置存储 SDK 的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T21:28:50.027

这就是我最终修复它的方法 open tools/android.bat

```
set java_exe=
call lib\find_java.bat
if not defined java_exe goto :EOF 
```

用你的java路径替换它

```
set java_exe="c:\PROGRA~1\Java\jdk1.7.0\bin\java.exe" 
```

**注意：** 不要使用`C:\Program Files\Something`它会抛出错误，因为空格使用短名称表示法 `C:\PROGRA~1\Something`

它会像魅力一样起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:58:07.313

唯一对我有帮助的是将 java 重新安装到不包含任何空格的路径中，因此将 C:/Program Files 改为 C:/Java 并将 Path 变量更改为新值。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-10T19:36:23.423

我遇到了同样的问题，这很可能是由路径名中的空格引起的。众所周知，路径名和批处理文件中的空格不能很好地结合在一起。

您可以通过打开命令行提示符、将位置更改为 %SDK%\tools\lib 并运行 find_java.bat 来验证这一点。你会得到一个批处理错误，比如

```
'C:\PROGRA~2\Android\Android' is not recognized as an internal or external command, 
operable program or batch file. 
```

只需将 SDK 安装到 C:\Android\SDK 并将 NDK 安装到 C:\Android\NDK 即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-15T07:01:58.627

**对我来说， SDK Manager.exe**也有同样的问题，只是停止而没有错误消息或 Windows 事件。

我用已经提供的答案的混合解决了这个问题（我在 Win 8.1 上运行）。问题似乎是**find_java**所针对的 java.exe 与最近安装的 JDK 版本不同步。

为了我：

*   *`<sdk>`*是*C:\Users\Simon\AppData\Local\Android\sdk*
*   *`<jdk>`*是*C:\PROGRA~1\Java\jdk1.7.0_80\bin*

    1.  我将我的 JDK 安装路径添加到 PATH 环境变量中，例如 ...；*C:\PROGRA~1\Java\jdk1.7.0_80\bin;* ...
    2.  打开一个新的命令窗口并在文件夹中运行**find_java.bat**`<sdk>\tools\lib\`后，我​​注意到**java_exe 环境**变量设置为*C:\Windows\System32\java.exe*，这不是我所期望的。
    3.  我删除（重命名）*C:\Windows\System32*中的**java.exe**
    **   我再次运行**find_java.bat**，现在**java_exe 环境**变量已`java_exe=<jdk>\java.exe`按预期设置。*   然后**`<sdk>`**我可以成功运行**SDK Manager.exe**。*

 ** * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-09T13:26:19.523

将 JAVA_HOME 从现有指向 JDK 路径更改为 JRE 路径对我有用。*

# ruby - 访问所有 ruby gem 时出错

> ID：12686636
> 
> 赞同：1
> 
> 时间：2012-10-02T08:11:02.117
> 
> 标签：ruby, gem, rvm

每当我尝试访问 ruby​​gem 时，都会出现错误。例如，`rails -v`我收到以下错误：

```
/Users/sayanee/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
    from /Users/sayanee/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/sayanee/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/sayanee/.rvm/gems/ruby-1.9.3-p125/bin/rails:18:in `<main>'
    from /Users/sayanee/.rvm/gems/ruby-1.9.3-p125@global/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/sayanee/.rvm/gems/ruby-1.9.3-p125@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我在具有以下配置的 MAC OSX Lion 上：

```
ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]

rvm -v
rvm 1.16.6 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:08:14.793

多亏了[这个 stackoverflow 问题，才弄清楚出了什么问题](https://stackoverflow.com/questions/4975973/gem-update-unable-to-convert-xe7-to-utf-8-in-conversion-from-ascii-8bit-to-u)。

我已更改为[iTerm2](http://www.iterm2.com/)并安装了[哦我的 zsh](https://github.com/robbyrussell/oh-my-zsh)。因此，我在文件中包含以下内容`~/.zshrc`以修复所有 ruby​​gem 错误。

```
export LC_CTYPE="utf-8" 
```

# javascript - 限制用户篡改地址url

> ID：12686641
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:12:00.597
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 asp.net mvc3 创建一个小型 Web 应用程序

```
http://localhost:1871/ManageMember/Admin/MemberDetail/3 
```

例如，我有上面的 url...您可以看到参数 3 很容易看到并且可以由用户更改，同样可以查看有关该特定 id 参数的详细信息

```
 http://localhost:1871/ManageMember/Admin/MemberDetail/5 
```

我想阻止用户篡改网址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:14:51.100

`af320f32la0gw`不可能，除非您以某种方式破坏 3（即在->`3`和`bof320afj2fw`->的后端有一些映射`5`）。那么至少很难*猜出*ID。

除此之外，您需要某种身份验证才能查看`3`或`5`最初。

最后，*为什么*要阻止人们这样做？似乎它对高级用户来说很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:54:39.523

```
if itIS == MVC
 use Request.ServerVariables["http_referer"]
else if itIS == webforms
 use HttpRequest.UrlReferrer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:14:23.163

IE 允许您锁定地址栏（不确定其他浏览器是否支持此功能）。

但是，正如 E. Pills 指出的那样，无论 URL 多么容易、困难、受限制或“混合”，服务器端强制授权都是强制性的（您的代码和 URL 结构意味着您已经拥有适当的身份验证机制）。

实现此目的的一种方法是将服务器端会话令牌存储在初始身份验证中，并验证所有传入请求以获得正确授权。

# php - PHP在服务器上创建文本文件

> ID：12686644
> 
> 赞同：0
> 
> 时间：2012-10-02T08:12:14.227
> 
> 标签：php, mysql

在我的 php 应用程序中，我想创建一个文本格式的错误日志，所以像这样尝试它在我的本地机器上工作正常

```
if(!$mail->Send())
{
 echo "Message could not be sent. <p>";
 echo "Mailer Error: " . $mail->ErrorInfo;
 $stringData = "Error Info: ".$mail->ErrorInfo."\t\t";
 $stringData .= "Email to reciepient \t Regnumber: ".$RegNo." \t  Apllicant Name: ".$ApplicantName." Failed --- end ----";

 $fp = fopen($_SERVER['DOCUMENT_ROOT']."/lib/email_errorlog.txt","wb");
 fwrite($fp,$stringData);
 fclose($fp);

 exit;
  } 
```

我已经在[PHP Create and Save a txt file to root directory](https://stackoverflow.com/questions/9265274/php-create-and-save-a-txt-file-to-root-directory)中看到过讨论，但它对我不起作用。问题是，没有显示错误，但没有创建文本文件。需要在服务器上设置任何权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:15:27.243

您必须确保：

*   文件夹 /lib 存在于文档根目录中
*   `webserver process`有权写入该文件夹。

如果您使用您的*ftp 帐户*创建文件夹，则网络服务器进程将**无权**访问。您可以将权限设置为 777，但之后每个人都可以访问。最好将权限设置为 770 并将文件夹的组设为网络服务器组 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:26:29.403

您可以在尝试创建文件之前检查文件（或更确切地说是父目录）[是否可写。](http://php.net/manual/en/function.is-writable.php)

并根据[php手册](http://php.net/manual/en/function.fopen.php) `fopen()`：

> 成功时返回文件指针资源，错误时返回 FALSE。

因此，您可以使用此 +[`$php_errormsg`](http://php.net/manual/en/reserved.variables.phperrormsg.php)或[`get_last_error()`](http://php.net/manual/en/function.error-get-last.php)构建**正确的**文件编写代码：

```
$fp = fopen($_SERVER['DOCUMENT_ROOT']."/lib/email_errorlog.txt","wb");
if( $fp === false){
    // Notification about failed opening
    echo "Cannot open file: " + $php_errormsg; // Not that wise in production
    exit();
}

fwrite($fp,$stringData);
fclose($fp);
exit(); 
```

但是如果配置正确，所有错误都应该在错误日志中。

# php - 如何通过 app.php 启动 Symfony？

> ID：12686646
> 
> 赞同：2
> 
> 时间：2012-10-02T08:12:17.713
> 
> 标签：php, symfony

```
http://localhost/Symfony/web/app.php/demo/hello/Alex 
```

节目

> “无法从“D:/UserData/WWWRoot/Symfony/app/config/routing.yml”导入资源“@AcmeDemoBundle/Controller/SecuredController.php”。确保“AcmeDemoBundle/Controller/SecuredController.php”包已正确注册并加载到应用程序内核类中。”

这是我的路线`app\config\routing.yml`

处理 ESI 的内部路由配置

```
_internal:
    resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
    prefix:   /_internal

_welcome:
    pattern:  /
    defaults: { _controller: AcmeDemoBundle:Welcome:index }

_demo_secured:
    resource: "@AcmeDemoBundle/Controller/SecuredController.php"
    type:     annotation

_demo:
    resource: "@AcmeDemoBundle/Controller/DemoController.php"
    type:     annotation
    prefix:   /demo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:44:56.693

`AcmeDemoBundle``AppKernel`仅在for`dev`和`test`环境中激活：

```
if (in_array($this->getEnvironment(), array('dev', 'test'))) {
    $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
} 
```

如果您想通过`app.php`（用于环境）访问它，则`prod`需要将捆绑激活移出条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:35:39.543

AFAIK，在`getEnvironment()`选项数组中添加 prod 是可以的，假设您知道哪些包不去 prod。

有一个单独的条件来检查它的开发或测试是否用于其他不去生产的捆绑包

# database-design - 关系数据库设计 - 我想要一些行类型的额外字段，但不是全部

> ID：12686649
> 
> 赞同：3
> 
> 时间：2012-10-02T08:12:38.710
> 
> 标签：database-design, relational-database, normalization, database-schema

这是一个非常基本的数据库设计/规范化问题。

假设我有一个`Books`包含以下列的表格：

```
isbn|title|author|status 
```

并且`status`可以是`checked out`, `available`, `overdue`,之一`lost`（存储为整数）。

添加行时，我决​​定“实际上，当状态为 时`checked out`，我想存储另一个字段`due_date`”。*我只想将此字段存储为状态为已签出的书籍，*否则它没有任何意义。

**执行此操作的标准、正确、规范的方法是什么？**

一种方法是添加列并将其设置为`NULL`如果状态不是`checked out`，但这对我来说听起来是个坏主意（为了完整性，例如，如果状态是`available`并且我们也有一个`due_date`？）

另一个明显的答案是创建一个`DueDates`表并`isbn|due_date`在其中存储对。这是我通常采用的方法，但很容易最终`JOIN`得到到处都是桌子和 s。

我不是在寻找如何专门存储书籍，这只是问题的一个例子，我想知道标准解决方案。

**编辑**：如果我决定只为状态添加*许多*字段（ 、、、 ...） ，答案是否会改变- 并且所有这些都好像状态不是？`checked out``due_date``borrowed_by``checked_out_from``NULL``checked out`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:22:06.657

我在这些情况下使用的方法是添加一个可选列和一个检查约束，以确保当另一列具有特定值时填充该列（即不为空），而当另一列具有特定值时为空（即为空）列有其他值。

在您的情况下，约束可以写为

```
CHECK ((due_date IS NOT NULL) = (status = 'CHECKED OUT')) 
```

如果需要检查多列，请添加多个约束，每列一个，或者通过列出所有有效组合将它们组合成一个检查约束：

```
CHECK (status = 'A' AND due_date IS NULL OR status = 'B' AND due_date is NULL
OR status = 'C' AND due_date IS NOT NULL OR status = 'D' AND due_date IS NOT NULL) 
```

**注意**AND 比 OR 具有更高的优先级，因此在这种情况下不需要括号，但为了清楚起见，您可能希望添加它们。

在大多数 DBMS 产品中，如果不是不可能的话，添加单独的表会使这变得更加困难，因为检查约束可能不会查询另一个表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:15:46.273

正如您所说，问题基本上是类型和子类型之一。“签出的书”是一种书。“可用书籍”是一种不同类型的书籍。一本书可以随着时间的推移从一个状态发展到另一个状态，因此随着时间的推移可以属于一个或另一个子类型。

在对象建模中，这类问题是通过类、子类和继承来处理的。

在 ER 建模中，这种问题被称为“专业化”。您可以在网上找到有关 ER 专业化的文章。我还没有看到处理时变专业化的例子。更多的例子是时间不变的，比如 Pets 案例。

在关系建模和关系数据库设计中，有几种标准的建表方式来实现专业化。

第一种标准方式称为“单表继承”。这基本上就是你设计的。对于与给定行的子类型不相关的数据，您最终会得到很多 NULL。但是您不必进行任何连接。

第二种标准方式称为“类表继承”。这样，每个类和子类都有一个单独的表，并且它们有一个共享的主键。您可以在 SO 和网络上查找“类表继承”和“共享主键”。你做了更多的加入，但你有更少的 NULLS。

还有其他方法。

哪种方式最好取决于手头的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:48:21.943

**删除冗余数据比尝试执行检查以使其保持同步更好**

您在第一个示例中的真正问题是您的状态列正在复制其他地方保存的信息，并且在到期日期之前更详细。

具体来说，“On Loan”、“Available”和“Overdue”状态都基于due_date，因此您试图强制数据保持同步。最好简化系统，不再存储需要同步的重复数据。

对于评论中给出的第二个示例，我认为 Colin 的答案是正确的方法，但它始终是我设计数据库以减少这些约束的示例的第二选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T08:15:54.240

如果您想要一个严格规范化的数据结构，那么使用 Duedates 表会更加规范化。

取决于状态的截止日期是多值依赖，因此违反了第四范式。

这并不能避免您的状态为“checked_out”和到期日期的问题 - 当状态可用时，在到期日期表中有一个条目，就像在到期日期字段中有一个条目一样。

（顺便说一句，在这个图书馆的例子中，我会将外借与书籍的“丢失”状态分开）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T08:17:57.310

我仍然会将该列添加到基表并定义 a`CHECK CONSTRAINT`以确保`DueDate`当 status 中的值不等于时为 NULL `CHECKED OUT`。

规范化和存储 ISBN -> 到期日映射在不同的表中需要应用层代码以确保其状态未签出的 ISBN 不会最终出现在该表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T16:39:37.093

问题似乎出在您的初始模型（定义）中。实体书（媒体上的书）和普通书是有区别的`{ISBN, Title, Author}`。当您查看示例中的表时，存在依赖项`FD{ISBN} --> {Title, Author}`，但`{Status}`不依赖于 {ISBN} - 因此状态不属于此表。

![在此处输入图像描述](../Images/5426803c428a4a610c8f83a58a333ec3.png)

本质上，状态是一个派生属性

```
select
      c.ISBN
    , b.BookTitle
    , c.BookCopyNo
    , case
      when  ReturnDate is not null                              then 'available'
      when (ReturnDate is null) and (current_date < DueDate)    then 'checked out'
      when (ReturnDate is null) and ((current_date - DueDate) >= 100 ) then 'lost'
      when (ReturnDate is null) and (current_date > DueDate)    then 'overdue'   
      end as BookStatus

from CheckOut as c
join Book     as b on b.ISBN = c.ISBN
where c.CheckOutDate = (select max(xx.CheckOutDate)
                          from CheckOut as xx
                         where xx.ISBN       = c.ISBN
                           and xx.BookCopyNo = c.BookCopyNo)
; 
```

# jquery - 获取 XML 数据跨域 namecheap.com API

> ID：12686650
> 
> 赞同：0
> 
> 时间：2012-10-02T08:12:48.100
> 
> 标签：jquery, xml, ajax, http-get

我正在尝试使用 namecheap.com API 来允许从我的网站进行域搜索，但我陷入了跨域阻止的老问题。在[API 文档](http://www.namecheap.com/support/api/api.aspx)中，它说我需要发出 HTTP-GET 请求来检索 XML 文件。我已经在 jQuery 中完成了此操作，但我收到了跨域错误消息。当我将 dataType 更改为 jsonp 如下所示时，它会获取 XML 文件但会导致错误，因为浏览器不期望 XML 文件。

```
jQuery.ajax({
  dataType: 'jsonp',
  url: 'https://api.sandbox.namecheap.com/xml.response',
  data: {ApiUser: 'user', ApiKey: 'keygoeshere', UserName: 'user', Command: 'namecheap.domains.check',  DomainList: 'test.com, dfuhkgusvhbksbhv.com', ClientIp: '123.1.1.123'},
  success: parseXml
}); 
```

有人可以解释一下我将如何做到这一点并能够毫无错误地获取 XML 文件吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:26:09.260

改用 PHP 中的 simplexml_load_file() 函数，这工作正常，没有任何跨浏览器问题。API 使用这种方法可以正常工作。

# php - facebook如何检测注销？

> ID：12686651
> 
> 赞同：0
> 
> 时间：2012-10-02T08:12:50.527
> 
> 标签：php, facebook

如您所见，虽然我们在 facebook 中有 5 个打开的选项卡，但一旦我们在其中一个“注销”然后转到另一个选项卡，它会检测到我们已注销并通知我们并将用户重定向到登录页面。这是如何工作的？我想用 PHP/jQuery 为我的网络应用程序做这样的事情。我只是需要一个提示...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:23:59.527

Facebook uses [Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29) technology on their pages. Every page holds an open HTTP request. As soon as something changes (e.g. "incoming chat message" or in your case "user logged out", this information will be pushed to the clients.

If you're using NGINX as your webserver, I'd suggest to have a look at the [nginx_http_push_module](http://pushmodule.slact.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:15:57.980

以与任何其他应用程序相同的方式：当您注销时，服务器要么从客户端删除 cookie，要么更改其值以指示“注销”状态。当稍后发出新请求时，服务器会在 cookie 中检测到此状态，并为已注销的用户返回适当的内容。

Facebook 使用 AJAX 来做到这一点，但这并没有改变情况。如果您使用浏览器的开发人员工具监视 Facebook 的 AJAX 请求，您将能够看到所有血淋淋的细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:14:16.010

它绝对使用[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求，它以异步方式联系 Web 服务器（不刷新页面）。

使用 JQuery 库处理 Ajax 请求非常简单：[链接到 API](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:17:07.367

最简单的方法之一是使用 Session 变量来控制用户是否登录。当您点击注销时，它会将该变量设置为 false。

Facebook 将有一个脚本定期调用服务器端脚本的某种 ajax 调用来检查会话是否仍然有效。一旦它无效，ajax 调用将导致弹出窗口出现。

# java - 如何让我的 ActionBar 的“向上”按钮像手机的“返回”按钮一样工作？

> ID：12686654
> 
> 赞同：14
> 
> 时间：2012-10-02T08:12:54.293
> 
> 标签：java, android, android-actionbar

我有一个`ViewPager`with `Fragment`s。当在 中单击一个按钮时`Fragment`，我会启动一个我的按钮`Activity`。当我在 中时按手机上的后退按钮`Activity`，将我带回到上一个屏幕，即 s 中带有`Fragment`s 的屏幕`ViewPager`。

我想启用我的“向上”按钮，`ActionBar`为此，我编写了以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail);

    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
} 
```

现在显示了“向上”按钮，但单击它不会让我回到上一个屏幕。我希望“向上”按钮与“后退”按钮相同。

我怎样才能做到这一点？我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-02T08:15:22.933

您还需要实现单击向上按钮时应该执行的操作：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) { 
        switch (item.getItemId()) {
        case android.R.id.home: 
            onBackPressed();
            return true;
        }

    return super.onOptionsItemSelected(item);
} 
```

# .net - .Net 数据注释和模型层次结构

> ID：12686655
> 
> 赞同：0
> 
> 时间：2012-10-02T08:12:55.693
> 
> 标签：.net, asp.net-mvc-3, validation, data-annotations, model-validation

每个人！我对实现一段代码以在 asp.net mvc 3 中使用具有不同必填字段的模型进行工作的代码感到困惑 (6)。我有一个模型：

```
 public class OpportunityModel
{
    public Guid OpportunityId { get; set; }

    [Display(Name = "Value")]
    [RegularExpression(@"^[-+]?\d{1,10}(\.\d{0,4})?$", ErrorMessage = "Must be a number")]
    public decimal? ActualValue { get; set; }  

    [Display(Name = "Name")]
    [Required(ErrorMessage = "Name is required")]
    public string Name { get; set; } 
    public string Product { get; set; } 

    [Display(Name = "Estimated Date")]
    public DateTime? EstimateDate { get; set; }

    public bool? Sales6ixFallDown { get; set; }

    [Display(Name = "Stage")]
    public Stages Sales6ixStage { get; set; }

    public DateTime? Sales6ixDateInBoard { get; set; }

    public DateTime? Sales6ixDateInCurrentStage { get; set; }

    public DateTime? Sales6ixNextAppointmentDate { get; set; }

    [Display(Name = "Description")]
    public string Description { get; set; }

    public string Sales6ixNextAppointmentDescription { get; set; }

    public int NewColumn { get; set; }

    public Guid? CustomerId { get; set; }

    public string CustomerName { get; set; }
} 
```

我需要的是动态更改其中所需封地的可能性。经过一番谷歌搜索，这是不可能的，并想到使用模型继承。我的意思是：我有一个这样的基本模型：

```
 public class BaseOpportunityModel
{
    public Guid OpportunityId { get; set; }

    public virtual decimal? ActualValue { get; set; }  
    public virtual string Name { get; set; }  

    public string Product { get; set; } 

    public DateTime? EstimateDate { get; set; }

    public bool? Sales6ixFallDown { get; set; }

    [Display(Name = "Stage")]
    public Stages Sales6ixStage { get; set; }

    public DateTime? Sales6ixDateInBoard { get; set; }

    public DateTime? Sales6ixDateInCurrentStage { get; set; }

    public DateTime? Sales6ixNextAppointmentDate { get; set; }

    [Display(Name = "Description")]
    public string Description { get; set; }

    public string Sales6ixNextAppointmentDescription { get; set; }

    public int NewColumn { get; set; }

    public Guid? CustomerId { get; set; }

    public string CustomerName { get; set; }
} 
```

其中虚拟属性是可能是或不是必填字段的属性。然后我有几个从基础派生的模型，如下所示：

```
 public class OpportunityModel0: BaseOpportunityModel
{
    [Display(Name = "Value")]
    [Required(ErrorMessage = "Name is required")]
    [RegularExpression(@"^[-+]?\d{1,10}(\.\d{0,4})?$", ErrorMessage = "Must be a number")]
    public override decimal? ActualValue { get; set; }  

    [Display(Name = "Name")]
    [Required(ErrorMessage = "Name is required")]
 public override string Name { get; set; } 
```

}

然后我可以在 View 和 Controller 基础模型 BaseOpportunityModel 中使用。但我遇到了以下问题：

*   验证使用来自 BaseOpportunityModel 的注释属性并忽略派生模型中的属性。

我错了什么？有人可以引导我朝着正确的方向前进或帮助我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:43:07.160

[根据THIS](http://weblogs.asp.net/imranbaloch/archive/2010/10/21/bug-fixes-and-changes-in-asp-net-mvc-3-beta.aspx)，这个技巧应该在 mvc 3 中工作。可能有问题的一件事是您的发布操作。您应该在 post 操作中将继承的模型指定为参数。

```
public ActionResult MyPostAction(OpportunityModel0 model) 
```

如果基本模型是参数，则验证将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:30:39.317

我发现我的问题是使用自定义RequiredIfValidator对模型进行不同的reqired验证。所以现在我只有一个模型和一个视图。这是代码，可能有人觉得它有用：

**RequiredIfAttribute：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace Infrastructure.Extensions
{
    public class RequiredIfAttribute : ValidationAttribute, IClientValidatable
    {
        private RequiredAttribute _innerAttribute = new RequiredAttribute();

        public string DependentProperty { get; set; }
        public object TargetValue { get; set; }

        public RequiredIfAttribute(string dependentProperty, object targetValue)
        {
            this.DependentProperty = dependentProperty;
            this.TargetValue = targetValue;
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            // get a reference to the property this validation depends upon
            var containerType = validationContext.ObjectInstance.GetType();
            var field = containerType.GetProperty(this.DependentProperty);

            if (field != null)
            {
                // get the value of the dependent property
                var dependentvalue = field.GetValue(validationContext.ObjectInstance, null);

                // compare the value against the target value
                if ((dependentvalue == null && this.TargetValue == null) ||
                    (dependentvalue != null && dependentvalue.Equals(this.TargetValue)))
                {
                    // match => means we should try validating this field
                    if (!_innerAttribute.IsValid(value))
                        // validation failed - return an error
                        return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
                }
            }

            return ValidationResult.Success;
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            var rule = new ModelClientValidationRule()
            {
                ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
                ValidationType = "requiredif",
            };

            string depProp = BuildDependentPropertyId(metadata, context as ViewContext);

            // find the value on the control we depend on;
            // if it's a bool, format it javascript style 
            // (the default is True or False!)
            string targetValue = (this.TargetValue ?? "").ToString();
            if (this.TargetValue.GetType() == typeof(bool))
                targetValue = targetValue.ToLower();

            rule.ValidationParameters.Add("dependentproperty", depProp);
            rule.ValidationParameters.Add("targetvalue", targetValue);

            yield return rule;
        }

        private string BuildDependentPropertyId(ModelMetadata metadata, ViewContext viewContext)
        {
            // build the ID of the property
            string depProp = viewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(this.DependentProperty);
            // unfortunately this will have the name of the current field appended to the beginning,
            // because the TemplateInfo's context has had this fieldname appended to it. Instead, we
            // want to get the context as though it was one level higher (i.e. outside the current property,
            // which is the containing object (our Person), and hence the same level as the dependent property.
            var thisField = metadata.PropertyName + "_";
            if (depProp.StartsWith(thisField))
                // strip it off again
                depProp = depProp.Substring(thisField.Length);
            return depProp;
        }
    }
} 
```

**必需的IfValidator**

```
namespace Infrastructure.Extensions
{
    public class RequiredIfValidator : DataAnnotationsModelValidator<RequiredIfAttribute>
    {
        public RequiredIfValidator(ModelMetadata metadata, ControllerContext context, RequiredIfAttribute attribute)
            : base(metadata, context, attribute)
        {
        }

        public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
        {
            return base.GetClientValidationRules();
        }

        public override IEnumerable<ModelValidationResult> Validate(object container)
        {
            // get a reference to the property this validation depends upon
            var field = Metadata.ContainerType.GetProperty(Attribute.DependentProperty);

            if (field != null)
            {
                // get the value of the dependent property
                var value = field.GetValue(container, null);

                // compare the value against the target value
                if ((value == null && Attribute.TargetValue == null) ||
                    (value.Equals(Attribute.TargetValue)))
                {
                    // match => means we should try validating this field
                    if (!Attribute.IsValid(Metadata.Model))
                        // validation failed - return an error
                        yield return new ModelValidationResult { Message = ErrorMessage };
                }
            }
        }
    }
} 
```

**客户验证**

```
/// <reference path="jquery-1.4.4-vsdoc.js" />
    /// <reference path="jquery.validate.unobtrusive.js" />

    $.validator.addMethod('requiredif',
        function (value, element, parameters) {
            var id = '#' + parameters['dependentproperty'];

            // get the target value (as a string, 
            // as that's what actual value will be)
            var targetvalue = parameters['targetvalue'];
            targetvalue =
              (targetvalue == null ? '' : targetvalue).toString();

            // get the actual value of the target control
            // note - this probably needs to cater for more 
            // control types, e.g. radios
            var control = $(id);
            var controltype = control.attr('type');
            var actualvalue =
                controltype === 'checkbox' ?
                control.is(":checked").toString() :
            //control.attr('checked').toString() :
                control.val();

            actualvalue = actualvalue.toLocaleLowerCase();

            // if the condition is true, reuse the existing 
            // required field validator functionality
            if (targetvalue === actualvalue)
                return $.validator.methods.required.call(
                  this, value, element, parameters);

            return true;
        }
    );

    $.validator.unobtrusive.adapters.add(
        'requiredif',
        ['dependentproperty', 'targetvalue'], 
        function (options) {
            options.rules['requiredif'] = {
                dependentproperty: options.params['dependentproperty'],
                targetvalue: options.params['targetvalue']
            };
            options.messages['requiredif'] = options.message;
        }); 
```

# php - 使用 Ajax 将 Javascript 变量 (var ...) 传递给 PHP 变量 ($...)

> ID：12686665
> 
> 赞同：-2
> 
> 时间：2012-10-02T08:13:55.467
> 
> 标签：php, javascript, ajax, variables

我在将变量从 Javascript 传递到 PHP 时遇到问题，将变量从 PHP
传递到 Javascript 很简单
，但是有没有办法将变量从 Javascript 传递到 PHP？

这是情况
将其视为第一个选择输入
--2010
--2011
--2012

的变量，

第二个选择组的值取决于
第一个选择组的选定选项
值是：

2010
--AAA
--AAB
--AAC

2011
--ABA
--ABB
--ABC

2012
--ACA
--ACB
--ACC

说这些值是由
从数据库中检索数据的条件 PHP 函数显示的，

这是我想要做的：
当我从第一个选择组中选择一个时，
它当然会更改第二个选择组的选项
，这是通过当第一个选择组更改时触发

我需要检索第一个选择组的值以过滤
将显示为来自
数据库的第二个组的选项的数据，并使用 PHP 函数对其进行处理，这就是为什么我需要
第一个选择组的值并将其用作第二个选择组的参数。

问题：
我需要在 PHP Varible 中获取第一个选择组的值
使 PHP 函数工作。

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:18:54.430

您可以简单地将其作为 url 参数添加到您发送的 ajax 请求中。

考虑您的第一个字段是这样的：

```
<select id="field1">
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012">2012</option>
</select> 
```

您的 javascript 将如下所示：

```
var ajaxUrl="http://myserver.com/getfield2.php?field1=" + document.getElementById("field1").value; 
```

然后你会将ajax请求发送到`ajaxUrl`

在 php 中，你会得到这个值

```
$_GET["field1"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:36:01.747

如上所述，您的字段是

```
<select id="field1">
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012">2012</option>
</select> 
```

使用 jQuery 对脚本执行 AJAX 调用。类似的东西

```
$("#field1").change(function(){
  var value = $(this).val();
  $.post('script.php', {
    phpvar: value
  }, function(){
    //this is callback, render your second field here, with the responce of php script
  });
}); 
```

在您的 php 脚本中，从 jQuery 传递的变量将像这样可用

```
$_POST['phpvar'] 
```

# php - php随机丢失部分会话

> ID：12686670
> 
> 赞同：4
> 
> 时间：2012-10-02T08:14:08.193
> 
> 标签：php, joomla, joomla2.5

我正在为 Joomla 开发！2.5.6 并且此代码用于与 Joomla 1.5 一起正常工作

第 1 页

```
JFactory::getSession()->clear('domain_name', 'dominiForm'); 
```

第2页

```
$session = JFactory::getSession();
$session->set('domain_name', $domain_name, 'dominiForm'); 
```

第 3 页

```
$session = JFactory::getSession();
$domain_name = $session->get('domain_name', null, 'dominiForm'); 
```

问题是第 3 页有时会返回 null，有时会返回保存的值。它在我的开发机器上工作正常，但在生产服务器上不行，我不知道该怎么做。

这是服务器上的一些 phpinfo()

```
PHP Version 5.3.3-7+squeeze14
session
Session Support     enabled
Registered save handlers    files user sqlite
Registered serializer handlers  php php_binary wddx

Directive   Local Value Master Value
session.auto_start  Off Off
session.bug_compat_42   Off Off
session.bug_compat_warn Off Off
session.cache_expire    180 180
session.cache_limiter   none    nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  2700    1440
session.gc_probability  0   0
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    a6252c638b628a21b4b4b1cf3338a103    PHPSESSID
session.referer_check   no value    no value
session.save_handler    user    files
session.save_path   /var/lib/php5   /var/lib/php5
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:18:35.697

您正在生产服务器上使用自定义 session.save_handler。可能你不在你的开发机器上。

请注意，Joomla 确实获得了错误的会话锁定 - 没有。从本质上讲，这意味着您是竞争条件的受害者。

如果您查看[session_set_save_handler() 的文档](http://php.net/manual/en/function.session-set-save-handler.php)，您会看到有打开、关闭、读取、写入、销毁和 gc（垃圾收集）的回调。

`open`应该“初始化”东西，但最重要的是应该为用于存储的资源获取写锁。

`read`平时读书，`write`写字。

`close`应该释放写锁。

如果会话保存处理程序未获取锁，则具有相同会话 id 的多个并行请求可以相互覆盖！

你应该在你的服务器上执行一个简单的测试，看看你是否有这个问题：

```
<?php

// initialize alternate session save handler here.
//include_once "session-handler.php";

if (isset($_GET['subrequest'])) {
    $starttime = time();
    $subrequest = intval($_GET['subrequest']);

    session_start(); // should wait until lock is released

    echo "<html><pre>";
    echo "Request started on ". date("Y-m-d H:i:s", $starttime)."\n";
    echo "Session locked for this request on ". date("Y-m-d H:i:s"). "\n";
    echo "Executing subrequest ". $subrequest."\n";
    $_SESSION["subrequest"][] = 'collected subrequest #'.$subrequest;
    echo "All subrequests collected:\n";
    var_dump($_SESSION["subrequest"]);
    echo "\nWaiting 1 second\n";

    sleep(1);
    echo "Releasing session lock on ". date("Y-m-d H:i:s"). "\n";
    echo "</pre></html>";
    exit();
}

session_start();

$_SESSION['subrequest'] = array('master request');

?>
<html>
<iframe src="?subrequest=1" width="90%" height="100"></iframe>
<hr>
<iframe src="?subrequest=2" width="90%" height="100"></iframe>
<hr>
<iframe src="?subrequest=3" width="90%" height="100"></iframe>
</html> 
```

这个 PHP 文件将初始化会话并在屏幕上发出三个 iframe，几乎立即再次向服务器发出三个请求。

如果会话被探测锁定，则每个 iframe 将在接下来的几秒钟内一个接一个地连续填充。此外，按照出现的顺序，控制输出`$_SESSION['subrequest']`应包括最后返回的子请求的所有子请求。

如果会话未正确锁定，则所有三个 iframe 将在加载主页一秒后几乎立即填满，并且都将仅在调试输出中报告它们自己的子请求以及主请求。

如果我将此实现用于[从 php.net 文档（示例 #2）](http://php.net/manual/en/function.session-set-save-handler.php)页面获得的文件系统存储，正确保存到会话将失败！

```
<?php
class FileSessionHandler
{
    private $savePath;

    function open($savePath, $sessionName)
    {
        $this->savePath = $savePath;
        if (!is_dir($this->savePath)) {
            mkdir($this->savePath, 0777);
        }

        return true;
    }

    function close()
    {
        return true;
    }

    function read($id)
    {
        return (string)@file_get_contents("$this->savePath/sess_$id");
    }

    function write($id, $data)
    {
        return file_put_contents("$this->savePath/sess_$id", $data) === false ? false : true;
    }

    function destroy($id)
    {
        $file = "$this->savePath/sess_$id";
        if (file_exists($file)) {
            unlink($file);
        }

        return true;
    }

    function gc($maxlifetime)
    {
        foreach (glob("$this->savePath/sess_*") as $file) {
            if (filemtime($file) + $maxlifetime < time() && file_exists($file)) {
                unlink($file);
            }
        }

        return true;
    }
}

$handler = new FileSessionHandler();
session_set_save_handler(
    array($handler, 'open'),
    array($handler, 'close'),
    array($handler, 'read'),
    array($handler, 'write'),
    array($handler, 'destroy'),
    array($handler, 'gc')
);

// the following prevents unexpected effects when using objects as save handlers
register_shutdown_function('session_write_close'); 
```

如果我看一下一些 Joomla 会话类，我会预测存储到 APC、数据库和 XCache 将无法通过此测试，因为它们使用自定义函数而没有实现`open`或`close`正确。

我不熟悉 Joomla，因此您必须自己实现 Joomla 将会话使用到此测试脚本中的方式。

最后一点：如果无法对数据库中的单个数据集进行锁定（例如，您正在使用 MyISAM 表），那么实际上您不能使用该表来存储会话数据。获取表上的锁将停止所有其他用户会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:46:56.877

您是否在生产机器上使用缓存机制，例如清漆？因为在处理会话和 joomla 时缓存总是一团糟，所以当我使用缓存时遇到了很多与缓存自己相关的问题（这就是为什么我目前不使用缓存，只是没有用户缓存的 APC）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:02:35.993

我认为您可以使用此脚本在第一页或第二页中使用以下脚本

```
 $session =& JFactory::getSession();
    $session->set('name', "value"); 
```

* *name*是你的 session 变量， value 是你的值

然后在第三页使用这个

```
$session =& JFactory::getSession(); 
```

`echo $session->get('name');`* *name*是你的会话变量

# android - Android中的3级ListView

> ID：12686673
> 
> 赞同：1
> 
> 时间：2012-10-02T08:14:18.007
> 
> 标签：android, expandablelistview, android-gridview

我的情况如下：

我想知道是否可以有一个带有线性布局的（自定义）ListView，而在线性布局中另一个ListView。我想要完成的是一个对象列表，其中包含一个对象列表和一个对象列表。这意味着该列表下降了 3 个类别（级别）。公司有几个机构，机构有几个部门。我会试着画出来。

```
[ Company] //ListView
    [Layout]
        [ Establishment]  //ListView
            [Layout]
                [Department]//ListView
                [Department]
            [/Layout]
        [/ Establishment]
    [/Layout]
[/ Company] 
```

对于每个对象（公司、机构和部门），我都有一个主类和一个适配器类。

我知道如何制作 ListView 并检索数据以将其显示在 ListView 中。但是当您必须在另一个 ListView 的层次结构中向下或当您拥有彼此相关的 ListView 时，我还不知道如何使用它。也许我应该使用一个可扩展的 ListView（但我不希望折叠/展开行为）它必须看起来像一个 ListView，也许是一个行为类似于 ListView 的线性布局。或者使用节标题来呈现我想要的数据。

好吧，在我的问题上，我最终使用了带有 GridView 的 ExpandableListView。

# asp.net - 如何将 int 值更改为文本以在 GridView 中显示？

> ID：12686675
> 
> 赞同：0
> 
> 时间：2012-10-02T08:14:25.177
> 
> 标签：asp.net, gridview

正如标题中提到的，我有一个 GridView，它使用后面代码中的 DataBind 方法从数据库中检索数据。但是，我的数据的一列设置为 1 和 0，但我希望将 int 的值更改为文本以显示在 GridView 表中。

例如，我在数据库中有状态 (int) 0 和 1。因此，当我调用它们时，GridView 只会在表中显示 0 和 1，但我想在 GridView 中将 0 更改为 Enabled 和 Disabled 替换为 1。我怎么能用if来做到这一点？但我不确定该放在哪里。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:48:15.523

我很想使用下面的代码。

```
<asp:TemplateField HeaderText="enable" ItemStyle-HorizontalAlign="Center" >
    <ItemTemplate>
        <%# Convert.ToString(Container.DataItem) == "0" ? "Disabled" : "Enabled" %>
    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:22:14.190

您可以使用函数调用并根据您的数据呈现文本：

```
<asp:TemplateField HeaderText="enable" ItemStyle-HorizontalAlign="Center" >
    <ItemTemplate ><%#GiveMeActive(Container.DataItem)%></ItemTemplate>
</asp:TemplateField> 
```

和后面的代码

```
protected string GiveMeActive(object oItem)
{
    bool fEnable = (bool)DataBinder.Eval(oItem, "EnableField");

    if (fEnable)
        return "<div style=\"background-color:Green;color:White;\">true</div>";
    else
        return "<div style=\"background-color:Red;color:White;\">false</div>";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T08:22:21.680

您还可以访问您的字段。 [这里](http://msdn.microsoft.com/en-us/library/aa287786%28v=vs.71%29.aspx)是一个了解访问器的链接访问器封装了一些数据的显示方式。如果您想允许任何人使用“启用”/“禁用”字段，那将会很有趣

# ajax - joomla 2.5 ajax api

> ID：12686679
> 
> 赞同：0
> 
> 时间：2012-10-02T08:14:43.897
> 
> 标签：ajax, joomla2.5

我想为我的 joomla 页面设置一些小的 ajax 支持，详细信息：我想通过 ajax 将日志消息从前端发送到后端并将它们存储在数据库中。

在drupal中，这可以通过在模块中添加路径和回调来完成，那么如何在joomla 2.5中实现这一点，以便有一个像这样的url：

`http://www.domain.com/log`这导致函数调用？

问候..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:13:33.327

正确的方法是创建一个组件来处理调用，但是在您编写的大部分时间里，对于一个模块来说似乎有点矫枉过正。另一种方法是创建一个使用 Joomla 库的独立 php 文件。然后可以轻松地从您喜欢的任何地方调用此文件。它就像 Joomla 的迷你版，具有所有库都可用的优势：

```
define( 'DS', DIRECTORY_SEPARATOR );
if (!defined('JPATH_BASE')){
    define('JPATH_BASE', '..'.DS.'..'.DS.'..');
}
define('JPATH_LIBRARIES', JPATH_BASE . DS . 'libraries');
require_once JPATH_LIBRARIES . DS . 'import.php';
$var = JRequest::getVar('my_var'); 
```

要访问 DB-object，您需要手动设置 DB-object 的选项，因为该文件不会访问配置文件（您当然可以对此进行编程）。

```
$option = array(); //prevent problems  
$option['driver']   = 'mysql';            // Database driver name 
$option['host']     = 'db.myhost.com';    // Database host name 
$option['user']     = 'myuser';       // User for database authentication 
$option['password'] = 'mypass';   // Password for database authentication 
$option['database'] = 'bigdatabase';      // Database name 
$option['prefix']   = 'abc_';             // Database prefix (may be empty)  
$db = & JDatabase::getInstance( $option ); 
```

# javascript - 输入元素内的选项

> ID：12686682
> 
> 赞同：-6
> 
> 时间：2012-10-02T08:14:48.940
> 
> 标签：javascript, html

我有这个输入元素：

```
<Input Type=Text Size=27 Name=NewStatus Value=> 
```

如何让用户在值字段中选择三个选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:18:44.383

将 a`<select>`与给定一起使用`<options>`：

> 该`select`元素表示用于在选项列表中进行选择的控件。([一](http://www.w3.org/TR/html-markup/select.html))

### 例子

```
<select>
 <option>My first option</option>
 <option>My second option</option>
 <option>My third option</option>
</select> 
```

也可以看看：

*   [MDN：选择](https://developer.mozilla.org/en-US/docs/HTML/Element/select)
*   [MDN：选项](https://developer.mozilla.org/en-US/docs/HTML/Element/option)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:17:01.227

你正在寻找这个： [http ://www.w3schools.com/tags/tag_select.asp](http://www.w3schools.com/tags/tag_select.asp)

# google-app-engine - 如何将“应用程序设置”中的“身份验证选项”更改为联合登录

> ID：12686685
> 
> 赞同：0
> 
> 时间：2012-10-02T08:14:54.467
> 
> 标签：google-app-engine

我通过将身份验证选项选择为“对所有 Google 帐户用户开放（默认）”创建了一个 HRD 应用程序，但现在我需要将该选项更改为：“（实验）联合登录”以便向所有用户打开应用程序OpenID 提供者。

问题是选项框被禁用，我不想删除并再次创建应用程序，因为我会丢失应用程序 ID。

我该怎么做？

非常感谢，科托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:11:03.880

看来你不能。

> 警告：目前，您无法在域的 Google Apps 帐户之间切换现有 App Engine 应用的身份验证选项。此用于限制应用程序身份验证设置的选项只能在应用程序创建时设置。

[https://developers.google.com/appengine/articles/auth](https://developers.google.com/appengine/articles/auth)

话虽如此，在我的应用程序中，下拉菜单可用且可选择（应用程序设置、身份验证选项）。所以不确定那里发生了什么。

不要忘记您可以购买一个单独的域并将其指向您最终为您的应用程序使用的任何域，最终用户将无法分辨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:48:22.747

您可以在 Google 帐户和联合登录之间自由切换，但您不能更改为或从 Google Apps 身份验证帖子创建

# gwt - 将javascript参数从外部javascript传递给java

> ID：12686696
> 
> 赞同：2
> 
> 时间：2012-10-02T08:15:43.827
> 
> 标签：gwt, jsni

外部 javascript 提供了一个数字，该数字应交给名为`mycallback`.

我已经定义：

爪哇：

```
class MyClass {
    public static void mycallback(JavaScriptObject number) {
        // do something with the number
    }
} 
```

Javascript：

```
$wnd.callback = $entry(@com.package.MyClass::mycallback(Lcom/google/gwt/core/client/JavaScriptObject)); 
```

Javascript调用是：

```
$wnd.callback(number_from_external_javascript); 
```

但我得到错误：

```
JS value of type number, expected com.google.gwt.core.client.JavaScriptObject 
```

我的最终目标是拥有一个参数类型为`Integer`，而不是 JavascriptObject 的 java 方法。我只是认为 GWT 应该将 javascript 对象包装在 JavascriptObject 中，但似乎不会。

GWT 版本是 2.4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:48:55.660

GWT 会自动*将*JS Number 值转换为任何 Java 数字原始类型（`int`,`double`等），将 JS String 转换为 Java String ，并将 JS Boolean 转换为 Java `boolean`。它永远不会将它们作为`JavaScriptObject`s 传递。

如果数字不能为空，则只需使用`int`参数声明您的回调。如果它可以为空，那么您必须显式创建一个`Integer`实例，例如：

```
$wnd.callback = $entry(function(n) {
      if (number != null) {
         // box into java.lang.Integer
         number = @java.lang.Integer::valueOf(I)(n);
      }
      @com.packge.MyClass::mycallback(Ljava/lang/Integer;)(number);
   }); 
```

`JavaScriptObject`或者，我认为如果它是 Number 对象而不是 Number 值，我认为您可以将 JS 数字作为 a 传递，所以这**可能**有效：

```
$wnd.callback = $entry(function(n) {
      n = new Number(n); // "box" as a Number object
      @com.packge.MyClass::mycallback(Lcom/google/gwt/core/client/JavaScriptObject;)(n);
   }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:04:22.787

使用[gwt-exporter](http://code.google.com/p/gwt-exporter/)生成器将 gwt 代码公开给 js 怎么样，这样您就不必处理 jsni 并且可以受益于它所具有的出色功能（复杂对象、数组、闭包、覆盖、doclet 等）

使用 gwt-exporter 您的类只需实现 Exportable 并使用注释来公开您的方法。

```
public static class MyClass implements Exportable {
 @Export("$wnd.mycallback")
 public static void mycallback(long number) {
  Window.alert("" + number);
 }
} 
```

将此行添加到您的 onmoduleload 并让编译器完成工作

```
public void onModuleLoad() {
  ExporterUtil.exportAll();
} 
```

然后你可以使用你说的方法

```
<script>
  window.mycallback(1234)
</script> 
```

# linux - 调度（）函数linux

> ID：12686697
> 
> 赞同：2
> 
> 时间：2012-10-02T08:15:44.333
> 
> 标签：linux, linux-kernel

我有一项任务是修改 linux 内核的调度程序代码，但我被困在任务的第一点。我无法找到实现 schedule() 的文件。我是一个新手，当然我觉得会有一些结构化的方法来查找哪些特定文件的功能。任何帮助都可以得到。

[编辑] 我有内核版本 3.5.4 的源代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:43:50.983

schedule() 函数实现在：[linux/kernel/sched/core.c](http://lxr.linux.no/#linux+v3.6/kernel/sched/core.c#L3462)

如果您想了解更多有关[进程调度](http://www.makelinux.net/books/ulk3/understandlk-CHP-7)的信息，ULK3 可能非常适合您！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T20:26:51.277

其实我也是linux内核的新手。对于通过 linux 内核代码导航，我使用：

*   **cscope**是一个很好的工具。有一个使用 cscope 和 linux 内核等大型项目的[指南](http://cscope.sourceforge.net/large_projects.html)。
*   **[在线 Linux 交叉参考](http://lxr.free-electrons.com/ident)**。尤其是标识符搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T00:19:06.460

如果你想找到一些函数名，你可以 `grep -r "schedule"` 在源代码树的根目录中使用，如果你有 ctags，你可以从他的任何调用中导航到他的定义。

# google-chrome-extension - Chrome 扩展清单 2 和 1，兼容性

> ID：12686698
> 
> 赞同：17
> 
> 时间：2012-10-02T08:15:46.247
> 
> 标签：google-chrome-extension, manifest, chromium

我有一个最近升级到清单版本 2 的扩展。为此，我删除`background_page`了清单文件中的属性并将其替换为`background: {page: "background.html"}`. 这行得通，一切都很好。然而，事实证明，有些浏览器和人们使用旧版本的 Chrome，或者 Rockmelt 的版本和其他不支持`background`-property 的基于 Chromium 的浏览器，或者`manifest_version: 2`还没有。

除了 -property 之外，一个简单的解决方案是只将`background_page: "background.html"`-property 添加到清单文件中`background`。这会在`chrome://extension`开发人员模式下发出警告：

```
There were warnings when trying to install this extension:
     'background_page' requires manifest version of 1 or lower. 
```

我的问题是：两者都有负面影响吗？例如，`background_page`不推荐使用时会发生什么？我的用户会看到任何警告吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-29T08:58:59.937

您应该将“background_page”替换为“background”。

喜欢：

```
"background": "background.html" 
```

而不是：

```
"background": {"page": "background.html"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T09:27:28.103

即使认为具有未记录的、已弃用的或实验性的属性`manifest.json`会发出警告，但这些警告仅在“开发者模式”处于活动状态时才可见。它们不会影响最终用户。在我的选择中，你完全可以保存`background-page:`在你的清单中。

您还可以考虑使用[minimum_chrome_version](http://developer.chrome.com/extensions/manifest.html#minimum_chrome_version)阻止使用旧浏览器的用户下载您的最新更新。这有点太晚了（因为您的`manifest_vesion: 2`更新已发布）但您可以在这里做一个小技巧。降级到`manifest_version: 1`，等大家下载降级版本，再次推送更新，`manifest_version: 2`这次加入`minimum_chrome_version: 18`。

# playframework - 播放框架 2.0.x AskTimeoutException

> ID：12686706
> 
> 赞同：3
> 
> 时间：2012-10-02T08:16:38.740
> 
> 标签：playframework, playframework-2.0

我正在尝试对我的 Play 2.0.2 应用程序进行一些负载测试，但我一直遇到以下异常：

**无法调用动作，最终报错：Thrown(akka.pattern.AskTimeoutException: Timed out)**

我正在使用[http://blitz.io/](http://blitz.io/)进行负载测试。

我的技术栈是 Play + mysql。

我没有在我的应用程序中使用任何承诺。

这是自定义的akka​​配置：

```
#default timeout for promises
promise.akka.actor.typed.timeout=10s

play {

    akka {
        event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
        loglevel = ERROR

        actor {

            deployment {

                /actions {
                    router = round-robin
                    nr-of-instances = 100
                }

                /promises {
                    router = round-robin
                    nr-of-instances = 100
                }

            }

            retrieveBodyParserTimeout = 10 second

            actions-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 100
                    parallelism-max = 200
                }
            }

        promises-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 100
                    parallelism-max = 200
        }
            }

            websockets-dispatcher = {
                fork-join-executor {
            parallelism-factor = 100
                    parallelism-max = 200
                }
            }

            default-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 100
                    parallelism-max = 200
                }
            }

        }

    }

} 
```

还有一件事：应用程序运行一天左右后，它开始变慢。在检查资源（使用 htop）时，我看到 cpu 利用率为 100%，因此很明显节点卡在做太多工作，它的响应被极大地延迟。此外，我可以看到平均产生了很多 java 实例（8-10 个）。这是为什么？Play 应用程序生成这么多 Java 实例是自然的吗？关于内存使用，java play 实例在生成时获得 512MB-1536MB，我可以从统计数据中看到内存平均使用率约为 50-70%，所以可能这不是问题所在（可能的内存泄漏等） .

我的日程安排非常紧张，因此我将不胜感激任何帮助/指针，我可以调查（或可能解决）这个问题。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:52:42.433

我认为您可能有一些阻塞 IO，这就是您需要`retrieveBodyParserTimeout = 10 second`hack 的原因。尝试使其异步。

# java - 如何在 play framework 2.0 中执行 sql 文件？

> ID：12686708
> 
> 赞同：3
> 
> 时间：2012-10-02T08:16:47.070
> 
> 标签：java, mysql, playframework-2.0, ebean

我有一个 .sql 文件，需要每天在调度程序上运行。我发现调度程序是通过 Akka 完成的。现在如何在 play framework 2 中执行一个 sql 文件？Ebean 只允许我执行单个查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:02:26.537

我认为您可以使用原始 JDBC 连接，并使用此处提供的 ScriptRunner 类：[https ://gist.github.com/831762/](https://gist.github.com/831762/)

Play 提供了一个帮助器来获取 JDBC 连接：

```
java.sql.Connection connection = play.db.DB.getConnection(); 
```

接着：

```
ScriptRunner runner = new ScriptRunner(con, autoCommit, stopOnerror);
runner.setDelimiter(";", true);
runner.runScript(new BufferedReader(new FileReader("yourFile.sql"))); 
```

# javascript - 为 requirejs 包预设包范围的配置

> ID：12686710
> 
> 赞同：1
> 
> 时间：2012-10-02T08:16:54.490
> 
> 标签：javascript, configuration, package, requirejs

我目前正在研究 requirejs，为此我开始编写一个小包。该包由一个`main.js`、应用程序的入口点和几个其他模块组成，这些模块将`main.js`通过调用`require`.

该包有几个可以在运行时配置的选项，为了便于维护，我有一个`configuration.js`可以在需要时加载的中心。的内容`configuration.js`只是一个将键映射到值的对象，没有功能或任何东西。只是一个键值映射。

现在 requirejs 允许将选项传递给包，配置是通过 requirejs 配置完成的。我遇到的问题是，它仅在包的其他模块中可用，`main.js`而在包的其他模块中不可用，而且我找不到设置默认值的方法，除非我将它们硬编码到`main.js`.

我目前的方法（带有 的方法`configuration.js`）是将提供给 requirejs 的配置`configuration.js`与`main.js`.

`main.js`

```
define(function(require, exports, module) {
    var $ = require('jquery'); // Could be any library that offers an "extend"
                               // feature that allows "deep" copies.

    var config = require('configuration'); // Load configuration file

    $.extend(true, config, module.config()); // Overwrite default values with 
                                             // set values

    var otherfile = require('anyotherfile);
    otherfile();
}); 
```

`anyotherfile.js`

```
define(function(require, exports, module) {
    var config = require('config'); // Loads configuration, package-wide
                                    // options are set

    // module.config() will be empty. Unless I explicicy specify the
    // configuration for this one module in the "requirejs.config"

    return function() {
        // Something that can be configured
    };
}); 
```

这种设置配置选项的方式使我依赖于额外的库或我自己的`extend`功能实现（代码不多，但代码仍然比没有代码多）另外还有两点我必须寻找可能导致的配置错误更难发现错误。

所以现在我正在寻找一种更好的方法来传递包范围的配置，同时试图避免多个故障点。（这可能很难，因为如果我不想硬编码默认值，我必须在某处存储它们。）当然，解决方案不应依赖于任何其他库或我自己的`extend`功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:58:35.837

在与 jrburke 讨论该问题后，最好的解决方案是在`configuration.js`.

文件示例`configuration.js`

```
define(function(require, exports, module) {
    var $ = require('jquery'); // need jQuery for extend
    var config = {
        key: value,
        ...
    };
    return $.extend(true, config, module.config());
}); 
```

所以在`main.js`.

这种方法的唯一缺点是`requirejs.config`你必须解决 `package/configuration`而不是`package`。

示例`requirejs.config`

```
requirejs.config({
    config: {
        "package/configuration": {
             key: value
        }
    }
}); 
```

# android - Toast 无法解析为类型

> ID：12686712
> 
> 赞同：0
> 
> 时间：2012-10-02T08:16:57.693
> 
> 标签：android, toast

当单击按钮请求是侦听器的按钮时，我试图显示敬酒。我正在通过此按钮注销，并且我想在注销完成时显示 toast，因此我将 toast 放入请求侦听器的 onComplete 方法中。这是我的完整代码

**包含按钮侦听器的 HomeActivity**

```
public class HomeActivity extends Activity implements OnClickListener{
private static final String TAG = "Facebook";
private Button mLogin, mLogout, mShare;
private Facebook facebook;
private AsyncFacebookRunner abRunner;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.activity_home);

    //mLogin.setBackgroundColor(Color.BLUE);
    // Initialize facebook objects
    facebook = new Facebook("479652662068145");
    abRunner = new AsyncFacebookRunner(facebook);

    // Setup VIews
    mLogin= (Button) findViewById(R.id.Login);
    mLogout= (Button) findViewById(R.id.Logout);

    mLogin.setOnClickListener(this);
    mLogout.setOnClickListener(this);

}
@Override
public void onClick(View v){

   int id = v.getId();
   switch(id){
   case R.id.Login:
       FacebookLoginDialog login = new FacebookLoginDialog();
       facebook.authorize(this, login);
        break;
   case R.id.Logout:
       FacebookLogoutRequest logout = new FacebookLogoutRequest(this);
       abRunner.logout(this, logout);
       break;
        default:
            break;

   }
 }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_home, menu);
    return true;
 }

 } 
```

**还有我的 RequestListener 代码**

```
public class FacebookLogoutRequest implements RequestListener{

private Context context;

public FacebookLogoutRequest (Context context){

this.context= context;
 }
public void onComplete(String response, Object state) {

Toast toast = Toast.makeText(context, "You Are Logged Out", Toast.LENGTH_SHORT);
toast.show();
}

@Override
public void onIOException(IOException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onFileNotFoundException(FileNotFoundException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onMalformedURLException(MalformedURLException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onFacebookError(FacebookError e, Object state) {
    // TODO Auto-generated method stub

}

 } 
```

请帮助我被困在这里..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:31:36.540

使用 Activity 而不是 Context，因为上下文不用于 UI 参考

```
public class FacebookLogoutRequest implements RequestListener{

    private Activity context;

    public FacebookLogoutRequest (Activity context){

    this.context= context;
     }
    public void onComplete(String response, Object state) {

    Toast toast = Toast.makeText(context, "You Are Logged Out", Toast.LENGTH_SHORT);
    toast.show();
    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }

} 
```

# java - 相等检查后使用 Long 的 NullPointerException

> ID：12686718
> 
> 赞同：5
> 
> 时间：2012-10-02T08:17:24.563
> 
> 标签：java, casting, nullpointerexception, long-integer

这把我扔了。

如果您有一个 Java Long 变量，并且您使用 == 运算符检查原始值是否相等，则该值的运行时类型将更改为原始 long。

随后检查变量是否为空值会引发意外的 NullPointerException。

所以在测试类中：

```
public class LongDebug {

public static void main(String[] args) {
    Long validValue = 1L; 
    Long invalidValue = -1L;
    Long nullValue = null;

    System.out.println("\nTesting the valid value:");
    testExpectedBehaviour(validValue);
    testUnExpectedBehaviour(validValue);

    System.out.println("\nTesting the invalid value:");
    testExpectedBehaviour(invalidValue);
    testUnExpectedBehaviour(invalidValue);

    System.out.println("\nTesting the null value:");
    testExpectedBehaviour(nullValue);
    testUnExpectedBehaviour(nullValue);
}

/**
 * @param validValue
 */
private static void testExpectedBehaviour(Long value) {
    if (value == null || value == -1) System.out.println("Expected: The value was null or invalid");
    else System.out.println("Expected: The value was valid");
}

private static void testUnExpectedBehaviour(Long value) {
    try {
        if (value == -1 || value == null) System.out.println("Unexpected: The value was null or invalid");
        else System.out.println("Unexpected: The value was valid");
    } catch (NullPointerException e) {
        System.out.println("Unexpected: The system threw an unexpected NullPointerException");
    }
}
} 
```

我得到的结果是：

```
Testing the valid value:
Expected: The value was valid
Unexpected: The value was valid

Testing the invalid value:
Expected: The value was null or invalid
Unexpected: The value was null or invalid

Testing the null value:
Expected: The value was null or invalid
Unexpected: The system threw an unexpected NullPointerException 
```

这是规范还是JDK中的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:20:11.587

这就是问题：

```
value == -1 || value == null 
```

表达式是从左到右计算的，由于`Long`必须先拆箱，JVM 将其转换为：

```
value.longValue() == -1 || value == null 
```

并在争论时[`value.longValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#longValue%28%29)抛出。它永远不会到达表达式的第二部分。`NullPointerException``value``null`

它在顺序不同时起作用：

```
value == null || value == -1 
```

因为如果`value`is ，由于布尔表达式[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)`null`，第二部分（可能导致`NullPointerException`when `value`is ）永远不会执行。`null`

> 这是规范还是JDK中的错误？

当然，这不是一个错误。原始值包装器的拆箱方式符合规范（[*5.1.8.拆箱转换*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)）：

> *   如果`r`是类型的引用`Long`，则拆箱转换转换`r`为`r.longValue()`

应用拆箱后，剩下的就是标准 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:20:25.377

> 这是规范还是JDK中的错误？

这很正常。如果你取消引用一个引用，`null`你应该得到一个 NullPointerException。这意味着如果您要检查，`null`则必须在发生这种情况之前检查它。之后检查它是没有意义的和令人困惑的。

```
if (value == -1 || value == null) 
```

是相同的

```
if (value.longValue() == -1 || value == null) 
```

并且表达式的第一部分在第二部分运行之前抛出一个 NPE。如果第一部分没有失败，则第二部分必须为假。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:21:20.497

它是规范的一部分，特别是[5.6.2。二进制数字提升](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)和 [5.1.8。拆箱转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)。相关部分：

> 5.6.2\. 二进制数字提升
> 
> 当运算符将二进制数值提升应用于一对操作数时，每个操作数都必须表示一个可转换为数值类型的值，以下规则按顺序适用：
> 
> 1.  如果任何操作数属于引用类型，则将对其进行拆箱转换（第 5.1.8 节）。
> 
> [...]
> 
> 对某些运算符的操作数执行二进制数值提升：
> 
> [...]
> 
> *   数值相等运算符 == 和 != (§15.21.1)

和：

> 5.1.8。拆箱转换
> 
> [...]
> 
> *   如果 r 是 Long 类型的引用，则拆箱转换将 r 转换为 r.longValue()
> 
> [...]
> 
> *   如果 r 为 null，则拆箱转换将引发 NullPointerException

* * *

请注意，`if (value == null || value == -1)`不会因为*短路评估*而引发异常。因为`value == null`is `true`，表达式的第二部分`value == -1`永远不会被计算，所以`value`在这种情况下不会被拆箱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:21:39.840

您的问题是在您的两个测试中检查空值/原始值的顺序。由于您传递的是空值，因此：

```
if (value == null || value == -1) 
```

不会拆箱，因为第一次检查是真的。测试从左到右进行。这

```
if (value == -1 || value == null) 
```

但是，将尝试拆箱（与 -1 比较），并且由于您正在拆箱一个`null`值而失败。这种行为（取消装箱抛出异常的空值）是预期的。

# c# - 将列表元素转换为字符串

> ID：12686728
> 
> 赞同：3
> 
> 时间：2012-10-02T08:18:23.243
> 
> 标签：c#, list, typeconverter

在 C# 中将 Int32 列表转换为带有分隔符（如“，”）的字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:20:13.837

您可以使用`string.Join`：

```
var intList = new[] { 1, 2, 3, 4, 5 };
var result = string.Join(",", intList); 
```

**编辑：**

如果您来自 .NET 4.0，则`string.Join`接受输入参数 as `IEnumerable<T>`，因此您不需要转换为`Array`by `ToArray`。

但是，如果您在 .NET 3.5 中：`ToArray`应该使用其他答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:20:29.310

```
string Result = string.Join(",", MyList.ToArray()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T08:23:06.720

加入一个字符串：`String.Join(",", list.ToArray());`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T08:21:46.483

```
string commaSeparated = String.Join(",", Intlist.ToArray()); 
```

# asp.net - SQL 服务器连接失败

> ID：12686730
> 
> 赞同：0
> 
> 时间：2012-10-02T08:18:42.767
> 
> 标签：asp.net, sql-server

我在使用 ASP.net 开发的 Web 应用程序时遇到问题。

我实际上正在为其添加功能，以前的版本运行良好。

这是一个商家网站，当用户在购物车中有多个商品时，就会出现问题。在这种情况下（两个项目的示例），此代码被调用 2 次：

```
System.Configuration.Configuration WebConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
System.Configuration.ConnectionStringSettings connString = WebConfig.ConnectionStrings.ConnectionStrings["ConnectionString"];
SqlConnection connection;

connection = new SqlConnection(connString.ConnectionString);

if (connection.State == ConnectionState.Closed)
    connection.Open(); 
```

第一次通过，但第二次我收到错误“Échec de l'ouverture de session de l'utilisateur 'IIS APPPOOL\XXXXX'”。什么意思“无法打开用户 'IIS APPPOOL\XXXXX' 的会话。”。

我对所有连接都使用相同的代码部分，但从未遇到过这个问题。

我想到了有限的连接数，但它在 sql server 中设置为 illimited。

你有什么想法 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:44:47.013

我认为每次通话后您的 sqlconnection 都没有正确关闭。尝试这个 -

```
string connString = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

using(SqlConnection connection = new SqlConnection(connString))
{
     connection.Open();
     //your code goes here
} 
```

** using 块将自动处理任何打开的 sqlconnection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:29:45.120

检查 web.config 中的凭据。我还会将连接字符串获取器更改为类似

```
WebConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString; 
```

此外，请记住将其包含在“使用”块或尝试/最终，您可以安全地关闭和处置您的连接和相关对象。

# c# - 从 Winform 应用程序向控制台发送消息或命令（cmd.exe）

> ID：12686731
> 
> 赞同：0
> 
> 时间：2012-10-02T08:18:42.443
> 
> 标签：c#

> **可能重复：**
> [SendMessage 到 .NET 控制台应用程序](https://stackoverflow.com/questions/2376237/sendmessage-to-net-console-application)

我想问一下如何从 Winform 应用程序将消息或命令发送到控制台。关于我的代码，即 winform 中的控制台应用程序（cmd.exe）。我可以在 winform 中放入 cmd.exe，但我无法将消息或命令发送到控制台（cmd.exe）。

请查看我的代码并帮助我

```
void PictureBox1Click(object sender, EventArgs e)
{
    System.Diagnostics.ProcessStartInfo start = new  
    System.Diagnostics.ProcessStartInfo();
    System.Diagnostics.Process bob = new System.Diagnostics.Process();
    bob.StartInfo.UseShellExecute = true;
    bob.StartInfo.Arguments += " /K TITLE CMD";
    bob.StartInfo.FileName =  "cmd";
    bob.Start();
    this.timer1.Enabled = true;
}

private void button1_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process bob = new System.Diagnostics.Process();
    bob.StartInfo.UseShellExecute = true;
    bob.StartInfo.Arguments += " /K TITLE Command Prompt";
    bob.StartInfo.FileName = "CMD";
    bob.StartInfo.CreateNoWindow = true;
    bob.Start();
    this.timer1.Enabled = true;
}

private void BtnSend_Click(object sender, EventArgs e)
{
    System.IntPtr hwnd ;
    hwnd = Usr32.FindWin("ConsoleWindowClass", "cmd");
    if (hwnd != System.IntPtr.Zero)
    {
        IntPtr hwndChild = IntPtr.Zero;
        hwndChild = Usr32.FindWindowEx((IntPtr)hwnd, new IntPtr(0), null, null);
        if (hwndChild != IntPtr.Zero)
        {
            Usr32.SendMessage(hwndChild, 0x000C, 0, "Hello Everyone");

        }
        else
        {
            MessageBox.Show("Cannot Get the Child Handle :( !");
        }
     }
     else

        MessageBox.Show("Application is not running");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:24:01.087

Console applications typically do not have a message pump and therefore cannot receive Windows messages unless it actively cooperates by creating one or pumping messages manually. This is not an option unless you own the source, which in this case you do not.

# python - 如何获取今天或昨天 17:00:00 的时间？

> ID：12686735
> 
> 赞同：6
> 
> 时间：2012-10-02T08:18:59.963
> 
> 标签：python, datetime

如果今天 17:00:00 已经过去，那么它应该是今天的日期，否则 - 昨天的。今天我得到的时间：

```
test = datetime.datetime.now().replace(hour=17,minute=0,second=0,microsecond=0) 
```

但我不想有未来的时间。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T08:27:03.237

您可以检查当前时间是否小于 17:00，如果是，则从生成的时间对象中减去一天：

```
test = datetime.datetime.now().replace(hour=17,minute=0,second=0,microsecond=0)
if datetime.datetime.now() < test:
    test = test - datetime.timedelta(days=1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:27:16.997

最好`datetime.time`直接用今天的比较时间。然后用`datetime.timedelta`做数学：

```
if datetime.datetime.now().time() > datetime.time(17,0):
  # today, as it's after 17 o'clock
  test = datetime.date.today()
else:
  # yesterday, as it's before 17 o'clock
  test = datetime.date.today() - datetime.timedelta(days=1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:47:27.547

根据一天中的时间将测试设置为今天或昨天：

```
from datetime import datetime, date, timedelta

if datetime.now().strftime('%H:%M') > '17:00':
    test = date.today()
else:
    test = date.today() - timedelta(days=1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:39:28.533

Python 的 datetime 函数有时确实很不方便。虽然您可以`datetime.timedelta`为您的案例使用对象，但要减去以天为单位的时间，例如递增月份或年份会变得很烦人。因此，如果您迟早不仅想添加一天，不妨试试这个功能：

```
import datetime
import calendar    

def upcount(dt, years=0, months=0, **kwargs):
    """ 
    Python provides no consistent function to add time intervals 
    with years, months, days, minutes and seconds. Usage example:

    upcount(dt, years=1, months=2, days=3, hours=4)
    """
    if months:
        total_months = dt.month + months
        month_years, months = divmod(total_months, 12)
        if months == 0:
            month_years -= 1
            months = 12
        years += month_years
    else:
        months = dt.month

    years = dt.year + years
    try:
        dt = dt.replace(year=years, month=months)
    except ValueError:
        # 31st march -> 31st april gives this error
        max_day = calendar.monthrange(years, months)[1]
        dt = dt.replace(year=years, month=months, day=max_day)

    if kwargs:
        dt += datetime.timedelta(**kwargs)
    return dt 
```

# php - HTML formring 的 PHP 错误

> ID：12686736
> 
> 赞同：2
> 
> 时间：2012-10-02T08:19:02.240
> 
> 标签：php, html, forms

我正在从一本名为[PHP and MySQL web development](http://www.amazon.co.uk/PHP-MySQL-Web-Development-Edition/dp/0672326728)的书中学习 PHP 。我是 PHP 的新手，我非常精通 C 和 HTML，我发现 PHP 的语法与 C 非常相似。

看代码：

```
<html>
<form action = "processorder.php" method = "post">
<p>tires:<input type=”text” name=”tireqty” size=”3” maxlength=”3” /></p>
<input type=”submit” value=”Submit Order” /></td>
</form>
</html> 
```

这是 HTML 代码，我将输入 php 代码并将其保存为 processorder.php

```
<?php
$tireqty = $_POST[‘tireqty’];
echo "<p>Your order is as follows: </p>";
$tireqty." tires<br />";
?> 
```

完成此操作后，我转到必须输入轮胎值的 html 页面，然后单击提交，然后它会重定向到我的 mu processorder php 页面，在该页面中显示我的原始 php 代码，而不是正确的输出，即：

```
Your order is as follows:
2 tires 
```

但我得到了一个不同的 o/p，如下所示：

```
 $tireqty = $_POST[‘tireqty’];
    echo "<p>Your order is as follows: </p>";
    $tireqty." tires<br />"; 
```

这是怎么回事有什么问题？？？而且我还收到一条错误消息是 processorder 脚本说：

```
parse error: undefined index 'tireqty' in line something and undefined var tireqty 
```

嘿，伙计们，我不知道出了什么问题，但不能发表评论说按钮不起作用或我的浏览器无法让我写评论，我在这里接听所有电话：

是的，我正在使用 XAMPP，那有什么问题，我该怎么办？

我复制了您的代码，是的，其中没有错误，但是当我转到 html 页面并单击提交时，浏览器会打开一个对话框，提示“我已选择打开 process.php”以及它应该如何处理它，所以我选择用 gedit 打开，因为这是那里唯一可用的默认选项，它重定向到我的 php 脚本页面 :(:(:(

这是什么东西这么难，PHP真的那么难还是我在一个糟糕的平台上工作并从一本糟糕的书中学习？

有没有什么关于php的好书

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:22:33.927

```
<?php
$tireqty = $_POST[‘tireqty’]; 
echo "<p>Your order is as follows: </p>";
$tireqty." tires<br />";
?> 
```

您已经在第 2 行关闭了 echo 标签，因此您需要在第 3 行添加另一个 echo 标签。

```
<?php
$tireqty = $_POST[‘tireqty’]; 
echo "<p>Your order is as follows: </p>";
echo $tireqty." tires<br />";
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:21:08.200

始终确保在使用变量之前已设置变量：

```
<?php
    if(isset($_POST['tireqty'])){

        $tireqty = $_POST['tireqty'];
        echo "<p>Your order is as follows: <br />";
        echo $tireqty." tires.</p>";

    }
 ?> 
```

此外，您的 HTML 中有一个随机的结束表格列标记：

```
<html>
<form action = "processorder.php" method = "post">
<p>tires:<input type="text" name="tireqty" size="3" maxlength="3" /></p>
<input type="submit" value="Submit Order" />
</form>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:21:43.537

听起来您的 PHP 环境无法正常工作。您是否有运行 PHP 或 XAMP (http://www.apachefriends.org/en/xampp.html) 的 Web 服务器？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:29:40.387

始终使用

```
if ( isset($_POST['var']) ) { ... } 
```

与`$_GET, $_SESSION`等相同。您的变量`tireqty`在提交表单之前不会初始化，这就是引发错误的原因

# javascript - CSS 从左到右淡入淡出

> ID：12686738
> 
> 赞同：10
> 
> 时间：2012-10-02T08:19:13.130
> 
> 标签：javascript, jquery, css, fade

有没有办法让元素（至少只是文本）从左到右淡入淡出，反之亦然，只使用 CSS？

这是我的意思的一个例子：

![在此处输入图像描述](../Images/9d5c837f4851c260fed2204ce821f78e.png)

实际上，如果它需要 jQuery，我也会接受它，只是作为第二优先级。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T08:49:50.210

是的，您可以使用 CSS3 动画来实现（[在此处查看浏览器支持](http://caniuse.com/css-animation)）。

这是 text-fading 的简单[**演示**](http://jsfiddle.net/gionaf/SNycF/)。

HTML：

```
.text {
        position:relative;
        line-height:2em;
        overflow:hidden;
    }
    .fadingEffect {
        position:absolute;
        top:0; bottom:0; right:0;
        width:100%;
        background:white;
        -moz-animation: showHide 5s ease-in alternate infinite; /* Firefox */
        -webkit-animation: showHide 5s ease-in alternate infinite; /* Safari and Chrome */
        -ms-animation: showHide 5s ease-in alternate infinite; /* IE10 */
        -o-animation: showHide 5s ease-in alternate infinite; /* Opera */
        animation: showHide 5s ease-in alternate infinite;
    }
    @-webkit-keyframes showHide { /* Chrome, Safari */
        0% {width:100%}
        40% {width:0%}
        60% {width:0%;}
        100% {width:100%;}
    }
    @-moz-keyframes showHide { /* FF */
        0% {width:100%}
        40% {width:0%}
        60% {width:0%;}
        100% {width:100%;}
    }
    @-ms-keyframes showHide { /* IE10 */
        0% {width:100%}
        40% {width:0%}
        60% {width:0%;}
        100% {width:100%;}
    }
    @-o-keyframes showHide { /* Opera */
        0% {width:100%}
        40% {width:0%}
        60% {width:0%;}
        100% {width:100%;}
    }
    @keyframes showHide {
        0% {width:100%}
        40% {width:0%}
        60% {width:0%;}
        100% {width:100%;}
    }
```

```
<div class="text">
    There is some text here!
    <div class="fadingEffect"></div>
 </div>
```

CSS：

如您所见，边界处形成鲜明对比。如果您使用图像渐变而不是纯白色背景，它会渲染得更好。

然后，您可以为 IE9 及以下版本使用 jQuery 后备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:41:51.017

在 Photoshop 或其他图像编辑软件中，创建一个中间透明的圆形区域，四周逐渐淡出为纯白色。根据需要随意裁剪顶部/底部。然后，您可以使用 css 过渡从左到右为图形设置动画，以实现演示中的效果。对于像 IE 这样不支持过渡的浏览器，可以使用 jquery 中的 cssHooks 功能来使用 jQuery 执行动画。

您*可以*使用 css 渐变创建此效果，但您会遇到浏览器支持问题，并且在 css 渐变上使用过渡在性能方面非常糟糕。但是，简单地为 png24 设置动画非常容易，并且可以产生相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T14:21:41.113

我找到了一个包含多个文本动画的插件。

[https://tobiasahlin.com/moving-letters/](https://tobiasahlin.com/moving-letters/)

演示：[https ://jsfiddle.net/Danzoftw/hp8qL1e3/7/](https://jsfiddle.net/Danzoftw/hp8qL1e3/7/)

```
var textWrapper = document.querySelector('.demo');
textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

anime.timeline({loop: true})
  .add({
    targets: '.demo .letter',
    opacity: [0,1],
    easing: "easeInOutQuad",
    duration: 2250,
    delay: (el, i) => 150 * (i+1)
  }).add({
    targets: '.demo',
    opacity: 0,
    duration: 1000,
    easing: "easeOutExpo",
    delay: 1000
  });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
<h1 class="demo">Text animation demo</h1>
```

希望这对其他人有帮助。干杯。

# java - JAXB - “对象工厂类中的冲突”的解决方案和策略

> ID：12686740
> 
> 赞同：2
> 
> 时间：2012-10-02T08:19:26.560
> 
> 标签：java, jaxb

我有一组 xsd 文件，我需要为这些类型生成 java 类。问题在于这些文件中有多个 xsd 文件和 xml 类型的多个定义。多重定义并不都是直截了当的。一些覆盖定义，一些扩展，一些与不同的命名空间相同，而另一些在所有意义上都是相同的。没有常规模式（实际上这些 XSD 来自不同的公司，他们需要 xml 中的数据 - 所以他们不关心 JAVA-XML 映射，因此抱怨 XSD 并不是一个真正的选择:|）。

我尝试了两个不同的 JAXB 插件（mojo 和 jvnet），它们都给出了相同的错误 -

> com.sun.istack.SAXParseException2：两个声明导致 ObjectFactory 类中的冲突。

我知道这一定会发生并尝试了几件事。使用 mojo 插件，我试图告诉 maven 分别编译所有文件并将它们放在不同的包中（插件中有多个，每个都有自己的和单独的），但无济于事。

后来我尝试用另一种方式做同样的事情。我使用了jvnet插件，在bindings.xml文件中定义了xsd和java包的映射如下——

```
 <bindings schemaLocation="../xsd/1.0/abcd.xsd">
      <schemaBindings>
        <package name="com.xxx.services.yyy.abcd"/>
      </schemaBindings>
    </bindings> 
```

然后我遇到了这个错误 -

```
com.sun.istack.SAXParseException2: Multiple <schemaBindings> are defined for the target namespace "http://www.fpml.org/FpML-5/recordkeeping"
    at com.sun.tools.xjc.ErrorReceiver.error(ErrorReceiver.java:82)
    at com.sun.tools.xjc.reader.xmlschema.ErrorReporter.error(ErrorReporter.java:79)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.checkMultipleSchemaBindings(BGMBuilder.java:343)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.buildContents(BGMBuilder.java:313)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder._build(BGMBuilder.java:182)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.build(BGMBuilder.java:116)
    at com.sun.tools.xjc.ModelLoader.annotateXMLSchema(ModelLoader.java:415)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:167)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:113)
    at org.jvnet.jaxb2.maven2.RawXJC2Mojo.loadModel(RawXJC2Mojo.java:636)
    at org.jvnet.jaxb2.maven2.RawXJC2Mojo.doExecute(RawXJC2Mojo.java:259)
    at org.jvnet.jaxb2.maven2.RawXJC2Mojo.execute(RawXJC2Mojo.java:135) 
```

这是以不同方式呈现的相同错误。

现在，在深入研究其他选项之前，我决定找出我应该为这种类型的绑定使用的最佳策略。显然我知道的那个不起作用。有什么建议吗？什么可以解决这个问题？

非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:42:59.700

我会回答我自己的问题，以便任何搜索的人都能发现它有用。要理解的基本点是没有办法单独编译所有文件然后将它们分组到java包中（如果有元素需要转到相同的java包）。因此，剩下的唯一方法是隔离导致问题的所有类型（正如我所解释的，某些类型有多个定义）并为它们进行自定义绑定（我使用带有 *-bindings.xml 文件的外部绑定） . 小心枚举，因为它们会导致大多数问题（类型、命名，所以我必须自定义映射每个枚举的所有值）

经验教训：如果你的 XSD 文件很糟糕，你将很难绑定它们

# css - 带 css 的第一行 x-repeat 背景图像

> ID：12686742
> 
> 赞同：0
> 
> 时间：2012-10-02T08:19:44.190
> 
> 标签：css

我想仅在页面的第一行使用 CSS 的 background-image 属性显示背景图像。我怎么能这样做？我使用类似的代码；

```
background-image:url(backgr.png);
background-repeat:x-repeat;
background-position:left top; 
```

但这提供了在所有行中重复图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:23:59.247

如果您在谈论页面的第一行，请考虑制作一个具有适当高度和宽度的 div。你应该把你的图像放在那里。

```
<html>
<head>
   <style type="text/css">
      body
      {
         background-image:url('yourimage.jpg');
         background-repeat:repeat-x;
      }
   </style>
</head>

<body>
   <p>Your text over here</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:29:36.400

试试这个CSS：

```
background:url(backgr.png) repeat-x left top; 
```

# php - MySQL返回所有结果而不重复数据

> ID：12686743
> 
> 赞同：0
> 
> 时间：2012-10-02T08:19:45.363
> 
> 标签：php, mysql, str-replace, explode

这是我的数据

```
id          cost    cat         foreign     colours
--------------------------------------------------------   
385_white   99      swarovski   12          black;blue
386_white   99      swarovski   12          black;blue;green
387_white   99      swarovski   12          yellow;green
389_white   99      swarovski   12          white;silver
385_white   99      swarovski   12          silver 
```

这是我的查询

```
$checkSQL=mysql_query("SELECT * FROM `products`");
while($r = mysql_fetch_assoc($checkSQL)) {

    echo '<ul class="ColourList">';
    $cols = explode( ';', $r['colours'] );
    foreach ( $cols as $col ){
        echo '<li class="' . $col . '">' . $col . '</li>';
    }
    echo '</ul>';
} 
```

这基本上返回每条记录的颜色列表

```
<ul>
 <li>black</li>
 <li>blue</li>
</ul> 
```

但是，我想为整个数据库中的每种颜色返回一个列表并按字母顺序排列。所以基本上得到所有行中的所有颜色，按 ABC 顺序将它们拆分到一个列表中，但没有它们重复 - 这可能与我的客户设置有关吗？只是需要一些方向？思考`explode`然后`replace`我们`ORDER BY ASC`命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:25:23.003

This is a nice example of what happens if you **not normalize** your database. At first it seems easy, but ones runs into trouble later.

Change your tables like this:

Products:

```
id          cost    cat         foreign     
--------------------------------------------   
385_white   99      swarovski   12 
```

ProductColors:

```
id          color_id     
----------------------
385_white   1                
385_white   2 
```

Colors:

```
id          name     
----------------------
1           Black     
2           Blue 
```

If you have a structure like this, it is very easy ro query the database for what you want.

Example:

To query all available colors:

```
select * from colors 
```

To query all available colors for `385_white`:

```
select * from productcolors where id = '385_white' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:26:44.950

SQL 运行一次，所以这个

> 想用替换来爆炸，然后使用 ORDER BY ASC 命令？

无法完成。

试试这个 SQL

```
SELECT * FROM `products` ORDER BY colours GROUP BY colours 
```

这将按字母顺序按颜色排序，然后按颜色分组将删除您正在谈论的重复项。

您还应该将数据重组为颜色的一对多关系，使用`;`分隔符是不好的，以后您会感到非常头疼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:30:17.680

如果您经常需要对您的“颜色”字段（除了用于原始显示的简单 SELECT * 之外）运行查询，这意味着您的字段应该设计为易于查询。

这意味着：不要在 1 个字段中存储多个条目，每次需要查询和提取内容时都会让您的生活变得困难。

相反，创建一个“**颜色**”表（color_id, colour_name）

和一个“ **articlecolors** ”表（article_id, colour_id）。

这样每篇文章仍然可以有多种颜色，并且添加新颜色变得更加容易。您将能够使用标准 SQL 运行关于文章颜色的任何查询：检索没有重复的颜色列表将像 'SELECT DISTINCT(colour_name) FROM colours' 一样简单

# .net - 没有互联网连接：对另一个 dll 的方法调用需要超过 15 秒

> ID：12686744
> 
> 赞同：0
> 
> 时间：2012-10-02T08:19:54.800
> 
> 标签：.net, network-programming, delayed-execution

我面临以下我无法解释的问题：

我有两个 dll（DLLA 和 DllB）。当我第一次从 DllA 调用 Dllb“ObjectFromB.aMethod()”时，一切正常且快速。但是，当我在 DllB“ObjectFromB.anotherMethod()”中从 DllA 调用另一个方法时，需要超过 15 秒！我不知道为什么......除了方法/签名一切都完全相同（相同的线程，相同的对象，相同的程序集，相同的调用堆栈（直到那里），然后只有两个不同的方法/签名（进入同一个对象））。

重要提示：仅当我没有互联网连接时才会出现此问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:54:02.057

我找到了我的问题的原因：

我一直在使用的一些 DLL 是签名的二进制文件。anotherMethod() 在其签名中包含来自另一个 DLL (DLLC) 的类型。不幸的是，由于缺少 Internet 连接，它无法验证此 DLL。可以在此处找到解决方案/解决方法：

[http://support.microsoft.com/kb/936707/en-us](http://support.microsoft.com/kb/936707/en-us)

# matlab - Matlab：从.csv文件中读取字符串格式的文件名

> ID：12686745
> 
> 赞同：1
> 
> 时间：2012-10-02T08:20:01.657
> 
> 标签：matlab, csv

我有一个 .csv 文件，其中包含比方说的`50`行。

在每一行的开头，我有一个以下格式的文件名，`001_02_03.bmp`后跟以逗号分隔的值。像这样的东西：

```
001_02_03.bmp,20,30,45,10,40,20 
```

有人能告诉我如何从数据中读取第一列吗？

我知道如何从第二列开始获取数据。我正在使用这样的`csvread`功能`X = csvread('filename.csv', 0, 1);`。如果我尝试以相同的方式读取第一列，它会输出一个错误，说不`csvread`支持字符串格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:22:17.093

使用`textscan`，即：

```
fid1 = fopen(csvFileName);
X = textscan(fid1, '%s%f%f%f%f%f%f', 'Delimiter', ',');
fclose(fid1);
FirstCol = X{1, 1}; 
```

更详细一点？`csvread`仅适用于纯数字数据，因此您不能使用它来获取带有 .bmp 或下划线的数据。因此我们使用`textscan`. 看起来很有趣的格式字符串输入`textscan`只是说这些列按顺序是 string 类型`%s`，然后接下来的 6 列是 double 类型`%f%f%f%f%f%f`（或者您可以选择更改它以反映整数数据类型 - 我个人很少打扰，除非数据量巨大或浮点精度有问题）。

请注意，如果您只想获取第一列而忽略其余列，则可以将格式字符串替换为`%s% %*[^\n]`. 最后一点，如果您的 csv 文件有标题行，您可以`HeaderLines`使用`textscan`.

# javascript - 使用 JavaScript 在每个第 n 个位置拆分一个字符串？

> ID：12686746
> 
> 赞同：38
> 
> 时间：2012-10-02T08:20:03.303
> 
> 标签：javascript, string

我有以下字符串：

```
foofaafoofaafoofaafoofaafoofaa 
```

一个有 10 行的数组（如果我按每个第 3 个字符分割），如果我要实例化它，它看起来像这样：

```
var fooarray = new Array ('foo', 'faa', 'foo', 'faa', 'foo', 'faa', 'foo', 'faa', 'foo', 'faa'); 
```

所以我想要一个内置或定制的函数，它可以帮助我按每个第 n 个字符分割一个字符串。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-02T08:25:14.097

Try the below code:

```
var foo = "foofaafoofaafoofaafoofaafoofaa";
console.log( foo.match(/.{1,3}/g) );
```

For nth position:

```
foo.match(new RegExp('.{1,' + n + '}', 'g')); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T08:27:11.213

```
var s = "foofaafoofaafoofaafoofaafoofaa";
var a = [];
var i = 3;

do{ a.push(s.substring(0, i)) } 
while( (s = s.substring(i, s.length)) != "" );

console.log( a )
```

印刷：

```
foo,faa,foo,faa,foo,faa,foo,faa,foo,faa 
```

工作演示：http: [//jsfiddle.net/9RXTW/](http://jsfiddle.net/9RXTW/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T08:27:08.187

在我写这篇文章的时候，@xdazz 想出了一个非常简单的正则表达式解决方案。

但是正如您所要求的（关于该答案的评论）非正则表达式解决方案，我无论如何都会提交这个......

```
function splitNChars(txt, num) {
  var result = [];
  for (var i = 0; i < txt.length; i += num) {
    result.push(txt.substr(i, num));
  }
  return result;
}
console.log(splitNChars("foofaafoofaafoofaafoofaafoofaa",3));
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T08:29:40.007

你可以这样做：

```
var input = "foofaafoofaafoofaafoofaafoofaa";

var result = [];
while (input.length) {
    result.push(input.substr(0, 3));
    input = input.substr(3);
} 
```

演示：http: [//jsfiddle.net/Guffa/yAZJ2/](http://jsfiddle.net/Guffa/yAZJ2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T08:30:09.413

正如 Mark Walter 所指出的，这个来自[另一个 Stack Overflow 问题](https://stackoverflow.com/questions/4017671/how-do-you-split-a-string-at-certain-character-numbers-in-javascript)的解决方案非常有效：

```
function splitStringAtInterval (string, interval) {
  var result = [];
  for (var i=0; i<string.length; i+=interval)
    result.push(string.substring (i, i+interval));
  return result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T08:33:19.763

该函数后跟一个使用它的示例。示例测试输出：`["abc","def","ghi","j"]`

```
function splitEvery(str, n)
{
    var arr = new Array;
    for (var i = 0; i < str.length; i += n)
    {
        arr.push(str.substr(i, n));
    }
    return arr;
}

var result = splitEvery('abcdefghij', 3);
document.write(JSON.stringify(result)); 
```

# objective-c - MBProgressHUD 和 StartUpdateLocation

> ID：12686748
> 
> 赞同：-2
> 
> 时间：2012-10-02T08:20:10.357
> 
> 标签：objective-c, ios, xcode

我想在获取 GPS 位置时显示活动 HUD，但它不起作用。平视显示器不显示。知道为什么不显示吗？它只是没有显示在startupdatinglocation上。通话的其余部分都很好。

```
[HUD show:YES];
// start fetching data from a remote API
[locationManager startUpdatingLocation]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:26:54.080

我`MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.tabBarController.view animated:YES];`用来展示我的。`self.tabBarController.view`您需要通过更改为`self.view`或来告诉它哪个视图也显示它`self.navigationController.view`

# android - Android读取文件优化性能

> ID：12686752
> 
> 赞同：0
> 
> 时间：2012-10-02T08:20:25.440
> 
> 标签：android, performance, image, load

我具有读取图像文件 az 字节数组的功能。性能分析给了我有趣的事实。我检查了文件是否存在，然后读取为字节数组。File.exists 69.7% 的时间都花在了函数上？？？？？？打开读取和关闭只花费了 30.3% 的时间。

我无法向自己解释为什么？

这取决于某些东西还是默认行为？

如果此检查总是很慢 - 可能更好的方法是打开文件而不检查现有文件。当然使用 catch 来解决丢失文件的情况。

更新：文件存储在内部 SD 卡中。超过20000个文件。当使用 30 个文件进行测试时，百分比会降低到 23%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:23:40.950

最后我使用文件打开而不检查“存在”。处理文件时我必须捕获异常——所以我的代码安全不会受到影响。

# html - TD的高度即使设置为固定大小也会自动调整大小

> ID：12686753
> 
> 赞同：1
> 
> 时间：2012-10-02T08:20:26.173
> 
> 标签：html, css

我的网站中间有一张桌子：[www.care.dti.dk](http://care.dti.dk)

`<tr>`包裹在 div 周围的第一个表格：`#pricingTable`高度为 5px。

在 localhost 上它工作正常，但是当我把它放到网上时，浏览器会自动将高度调整为 15px，这会使背景图像重复。

我尝试过设置`background-repeat: no-repeat;`，但这并没有将图像放在我想要的位置。

是什么导致了这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:26:05.827

使用这个 CSS ：

```
 #pricingTable table tr:first-child td {
         font-size:0;
         height:5px;
     } 
```

并删除`height="5px"`您的html 元素`td`

现在你写`<td height="5px">` **这个是不正确的**，如果你写高度`td`

比`<td height="5">` **这个**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:34:55.043

去掉`&nbsp;`里面`<td>`

或者

添加另一个 CSS 属性：`line-height: 5px`

# php - PHP 中的 MongoDB 登录系统和会话

> ID：12686754
> 
> 赞同：0
> 
> 时间：2012-10-02T08:20:26.187
> 
> 标签：php, session, mongodb

我在我的 PHP 网站上使用 MongoDB 来保存我的注册用户和他们的登录信息。到目前为止，一切都很好。

当我登录时，我使用以下（简化）：

```
$login = $collection->findOne(array("mail" => $mailIn, "pass" => $passIn));
if($login) {
    $_SESSION["gatekeeper"] = $login['_id'];
} 
```

当我注册时，以下内容：

```
$collection->insert($obj);
mkdir("$appDirectory/users/" . $obj["_id"]);
$_SESSION["gatekeeper"] = $obj["_id"]; 
```

整个系统运行良好，但有一些问题困扰着我：在会话管理器中查看由此派生的 JSON：

```
"{\"gatekeeper\":{\"$id\":\"505f1cd25c73959504000000\"}}" (redis)
array(1) { ["$id"]=> string(24) "505f1cd25c73959504000000" } (php var dump - gatekeeper) 
```

如您所见，它将其存储为关联数组 $id->id。

当然，简单的 gatekeepeer->id 会好得多。

我怎样才能轻松改变这一点？老实说，我觉得它很混乱，因为这个“$id”让我的 PHP 有点困惑，也让我感到困惑。

* * *

基本上烦恼是当我必须检索看门人时：

```
$gatekeeper = $_SESSION["gatekeeper"];

$userID = $gatekeeper['$id']; //WILL work
$userID = $gatekeeper; //WON'T WORK 
```

只需拥有以下内容会更简单（更好）：

```
$userID = $_SESSION["gateID"];
$userName = $_SESSION["gateName"];
.... 
```

代替：

```
$gatekeeper = $_SESSION["gatekeeper"];

$userID = $gatekeeper['$id'];
$userName = $gatekeeper['name']; 
```

因为 $_SESSION 总是引用同一个会话，所以不需要在数组内有一个数组。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:36:12.047

> _id 包含 MongoId 实例

所以你需要在分配给会话变量之前将其转换为字符串

如下

```
$_SESSION["gatekeeper"] = (string) $obj["_id"] 
```

# java - 没有在java中连接到mysql

> ID：12686756
> 
> 赞同：1
> 
> 时间：2012-10-02T08:20:30.447
> 
> 标签：java, mysql, jdbc

我正在通过 java 查询 mysql，我得到了输出。

中间，我有

```
WHERE 
    ipaddress = 'moteid6'
AND datetime BETWEEN '2012-09-25 15:45:00' AND '2012-09-25 18:45:00' 
```

但是当我给 datetime1 而不是 2012-09-25 15:45:00 和 datetime2 而不是 2012-09-25 18:45:00 和 moteid 而不是 moteid6 就像用户输入一样，

```
System.out.println("Enter datetime1 in the format YY-MM-DD HH:MM:SS");
Scanner keyboard1 = new Scanner(System.in);
datetime1 = keyboard1.nextLine();
System.out.println("Enter datetime2 in the format YY-MM-DD HH:MM:SS");
Scanner keyboard2 = new Scanner(System.in);
datetime2 = keyboard2.nextLine();
System.out.println("Enter moteid");
Scanner keyboard3 = new Scanner(System.in);
datetime2 = keyboard3.nextLine(); 
```

然后通过替换 datetime1 而不是 2012-09-25 15:45:00 来查询 mysql，同样是 datetime2 和 moteid 而不是 moteid6，它正在输入但不查询 mysql 我得到的结果是

```
run:
Error: null
Enter datetime1 in the format YY-MM-DD HH:MM:SS
2012-09-25 15:45:00
Enter datetime2 in the format YY-MM-DD HH:MM:SS
2012-09-25 18:45:00
Enter moteid
moteid6
BUILD SUCCESSFUL (total time: 30 seconds)
The query i'm giving is 
String sql = ("SELECT (b.l2framessent - a.l2framessent) AS netl2framessent,CONVERT(endOfInterval*500, DATETIME) endOfInterval FROM (SELECT datetime DIV 500 startOfInterval,l2framessent FROM Statistics3,(SELECT MIN(datetime) mindate FROM Statistics3 WHERE ipaddress='moteid' AND datetime BETWEEN 'datetime1' AND 'datetime2' GROUP BY datetime DIV 500) b WHERE ipaddress='moteid' AND datetime = mindate) a, (SELECT datetime DIV 500 endOfInterval, l2framessent FROM Statistics3, (SELECT MIN(datetime) mindate FROM Statistics3 WHERE ipaddress = 'moteid' AND datetime BETWEEN 'datetime1' AND 'datetime2' GROUP BY datetime DIV 500) b WHERE ipaddress = 'moteid'AND datetime = mindate) b WHERE endOfInterval = startOfInterval+ 1 "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:36:47.630

如果我的问题正确，您想在选择查询中传递变量名称，如下所示：

```
 WHERE 
    ipaddress = 'moteid6 '
AND datetime BETWEEN 'datetime1' AND 'datetime2' 
```

您必须将日期和字符串放在引号内。

我试图通过整个查询，但这似乎是错误的

```
 "(SELECT (b.l2framessent - a.l2framessent) AS netl2framessent,CONVERT(endOfInterval*500, DATETIME) 
endOfInterval FROM (SELECT datetime DIV 500 startOfInterval,l2framessent FROM Statistics3,
(SELECT MIN(datetime) mindate FROM Statistics3 WHERE ipaddress='moteid' AND datetime BETWEEN '"+datetime1+"' AND '"+datetime2+"' 
GROUP BY datetime DIV 500) b WHERE ipaddress='"+moteid+"' AND datetime = mindate) a, 
(SELECT datetime DIV 500 endOfInterval, l2framessent FROM Statistics3, (SELECT MIN(datetime) mindate FROM Statistics3 WHERE 
ipaddress = '"+moteid+"' AND datetime BETWEEN '"+datetime1+"' AND '"+datetime2+"' GROUP BY datetime DIV 500) b WHERE 
ipaddress = '"+moteid+"'AND datetime = mindate) b WHERE endOfInterval = startOfInterval+ 1 "); 
```

# java - ActiveJDBC + Backbone.js 生成的属性名称不可用

> ID：12686757
> 
> 赞同：0
> 
> 时间：2012-10-02T08:20:31.667
> 
> 标签：java, html, backbone.js, activejdbc

我正在使用 ActiveJDBC 访问第三方数据库。有一列名为“用户/年”。我对此不满意，但无法改变。这个结果是 json 中的一个属性“用户/年”，这是我的骨干.js 模型的基础。现在，如果我想在以下模板中访问该属性：

```
<li><%= name+ ' ' + users/year %></li> 
```

当然是行不通的。我试过逃跑，但那不起作用。有什么建议么？

由于我是activeJDBC和backbone.js的新手，有没有办法将属性映射到可接受的变量名？或者其他可能的解决方案？我应该从 activeJDBC 切换到其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:31:22.147

或者，您可以使用 getter 包装器包装模型的动态 getter： [http](http://code.google.com/p/activejdbc/wiki/SettersAndGetters#No_%22standard%22_setters/getters) ://code.google.com/p/activejdbc/wiki/SettersAndGetters#No_%22standard%22_setters/getters ???

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:41:20.000

您可以将 parse 方法添加到您的集合或模型中，以将您的属性重新映射为可用名称：

```
var  M = Backbone.Model.extend({
    parse: function(resp) {
        if (resp['users/year']) {
            resp['users_year'] = resp['users/year'];
            delete resp['users/year'];
        }

        return resp;
    }
}); 
```

并相应地更改您的模板

```
<li><%= name+ ' ' + users_year %></li> 
```

小提琴[http://jsfiddle.net/nikoshr/rnKSD/](http://jsfiddle.net/nikoshr/rnKSD/)

# c# - 无法为文件上传生成脚手架

> ID：12686758
> 
> 赞同：1
> 
> 时间：2012-10-02T08:20:32.147
> 
> 标签：c#, .net, asp.net-mvc-3, scaffolding

我试图为文件上传生成一个视图，但上传部分丢失，其余班级成员为他们生成了视图

查看模型

```
namespace myapps.Models.ViewModels
{
    public class UserPhotoUploadViewModel
    {

        public HttpPostedFile PhotoFile
        {
            get;
            set;
        }

        public Guid UserID
        {
            get;
            set;
        }
    }
} 
```

生成的视图

```
@model myapps.Models.ViewModels.UserPhotoUploadViewModel

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>UserPhotoUploadModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.UserID)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserID)
            @Html.ValidationMessageFor(model => model.UserID)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

我应该填写其余部分吗？这是一种常见的行为吗？asp.net MVC3 可以生成的内容是否有限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:17:56.317

是的，这是标准行为。您可以检查默认的 T4 模板并查看它是如何工作的，它应该位于`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 3\CodeTemplates\AddView\CSHTML\Create.tt`

最重要的方法是`GetEligibleProperties`- 如您所见，它仅获取原始类型（公共类型等）。

`HttpPostedFile`下面是一个在ASP.NET MVC项目中处理的例子[EditorFor()可以用来创建<input type="file">吗？](https://stackoverflow.com/questions/6113390/can-editorfor-be-used-to-create-input-type-file)

# network-protocols - 为 IPv4 编写的遗留应用程序中的 IPv6 地址

> ID：12686759
> 
> 赞同：2
> 
> 时间：2012-10-02T08:20:35.957
> 
> 标签：network-protocols, ipv6, ipv4

我对 IPv6 的引入对我作为开发人员和我的遗留应用程序意味着什么感到困惑。

1.  我了解 IPv4 和 IPv6 本质上是不兼容的。IPv4 客户端能否访问使用 IPv6 的网站，IPv6 客户端能否访问 IPv4 网站？

2.  我检查我的 Spring MVC 网站访问者的 IP 地址，如下所示：

    ```
    private String getIp(HttpServletRequest request) {
        return request.getRemoteAddr();
    } 
    ```

    到目前为止，这始终以*abcd*格式返回 IPv4 地址。如果使用 IPv6 的客户端连接到我的网站，这种情况会改变吗？或者是否会发生各种隧道技术使 IPv6 客户端根据我的网站设置将自己伪装成 IPv4 客户端？

3.  在检索和处理 IP 地址时，我可能会面临其他 IPv6 问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:12:50.460

1.  它们之间没有翻译设备或代理服务器。纯 IPv4 和纯 IPv6 系统之间的直接通信是不可能的。有一些公共代理，例如[SixXS IPv4Gate 和 IPv6Gate](http://www.sixxs.net/tools/gateway/)，您可以在具有 IPv4 和 IPv6 的机器上运行自己的代理，或者您可以使用[DNS64/NAT64](http://en.wikipedia.org/wiki/IPv6_transition_mechanisms#NAT64)从纯 IPv6 网络连接到 IPv4 服务器

2.  是的，`request.getRemoteAddr()`当客户端使用 IPv6 连接到您的服务器时，将为您提供 IPv6 地址。如果客户端使用例如 NAT64，那么它们对您来说就像 IPv4 客户端，因此您不会看到 IPv6 地址。它看起来就像你身边的一个大 IPv4 NAT 盒子。

3.  是的。想想这样的事情：

    *   地址的存储
    *   具有多个 IPv6 地址的客户端
    *   一个同时使用 IPv4 和 IPv6 的客户端
    *   ETC

有一份[白皮书](http://www.stipv6.nl/whitepaper-ip-aspecten-software)重点介绍了您作为软件开发人员将遇到的最重要的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T19:13:16.280

> 我了解 IPv4 和 IPv6 本质上是不兼容的。IPv4 客户端能否访问使用 IPv6 的网站，IPv6 客户端能否访问 IPv4 网站？

如果没有某种转换机制，只有 ipv4 的客户端将无法与只有 ipv6 的服务器通信，反之亦然。

最初的想法是整个世界将从“单栈ipv4”转向“双栈”。然后，一旦每个人都使用双栈，我们就可以开始关闭 IPv4 并转向“单栈 ipv6”。

然而这并没有发生，网络运营商几乎没有看到部署 IPv6 和 IANA 的压力，而且大多数 RIR 已经用完了 IPv4 地址。因此，我们最终处于这样一种情况：大量 IPv4 的时代已经结束，但仍然有许多仅 v4 的客户端和服务器。

各种过渡机制应运而生。包含：

*   隧道机制，包括“自动隧道”（如 6to4 和 teredo）以及到固定端点的配置隧道。这些允许仅 v4 网络上支持 v6 的主机连接到仅 v6 服务。但是它们并没有太大帮助，因为您无法控制其他人网络上的机器是否启用了它们。
*   NAT64，无状态 (1:1) 和有状态 (1:many)。这允许管理员运行仅 v6 的网络，并且仍然与 Internet 上的仅 v4 机器进行交互。这对于客户端来说是一个合理的解决方案，但对于服务器来说，它并不能真正解决地址耗尽的问题，因为您仍然发现自己需要为每台服务器提供一个专用的 ipv4 地址。
*   反向代理，这些可以查看应用程序级别的数据，因此如果更高级别的协议给出主机名的指示（例如带有主机标头的 HTTP，带有 SNI 的 TLS），那么代理可以侦听单个公共 IPv4 地址并直接请求到多个内部服务器。

它们都不能解决所有问题，其中一些会产生自己的问题，但结合使用它们可以让您运行一个仅使用 v6 的内部网络，只有相对少数的 IPv4 地址可以与世界其他地方通信。

> 我检查我的 Spring MVC 网站访问者的 IP 地址，如下所示：....到目前为止，这总是以 abcd 格式返回 IPv4 地址如果使用 IPv6 的客户端连接到我的网站，这会改变吗？或者是否会发生各种隧道技术使 IPv6 客户端根据我的网站设置将自己伪装成 IPv4 客户端？

如果您的服务器直接接受 ipv6 连接，它显然会看到一个 ipv6 地址。

如果您的服务器通过使用“::”上的套接字侦听 ipv4 和 ipv6 连接（Linux 默认启用此功能，Windows 需要特定的套接字选项来启用它），那么 ipv4 地址将使用套接字传递给应用程序为“ IPv4 映射地址”。您使用的库可能会或我不会向您隐藏这一点（我不熟悉 spring MVC 的功能）。

如果您接受来自 nat64 或代理的连接，您显然会看到 nat/proxy 的地址。在代理的情况下，可以根据代理发送的信息确定客户端的真实 IP 地址。

> 在检索和处理 IP 地址时，我可能会面临其他 IPv6 问题吗？

任何将 IPv4 地址存储/传输为 32 位整数或长度限制较短的字符串的地方都可能需要返工。

* * *

我强烈建议你自己建立一个测试网络并开始试验这些东西。

# php - 如何将运行时创建的表值保存到数据库中

> ID：12686760
> 
> 赞同：0
> 
> 时间：2012-10-02T08:20:40.933
> 
> 标签：php, html, mysql

当我输入行数和列数时，我创建了一个表单，然后将生成行数和列数表我想将输入该表的值保存到数据库中。请任何人都可以帮助我.. 我的 PHP 代码：

```
<?php
   global $Hostname;   
    global $Username;   
    global $Password;           
    global $Database_name;  
function getConnection()    
{
    $Hostname = "localhost";    
    $Username ="root";
    $Password ="";
    $Database_name="labdata";

    $oMysqli = new mysqli($Hostname,$Username,$Password,$Database_name);   
    return($oMysqli);   
}
if(isset($_POST['submit']))
{       
    echo "<table border='1' align='center'>";           
    for($iii = 0;$iii <$_POST['column'];$iii++)         
    {               
        echo "<tr>".$jjj."</tr>";                           
        for($jjj = 0; $jjj <$_POST['rows'];$jjj++)  //loop for display no. of rows.
        {
          echo "<td>" ."<input type=\"text\" name='$iii'>"."</td>";
        }
    }
    echo "</table>";
    echo"<form name=\"aa\" method=\"post\">";
    echo "<input type=\"submit\" name=\"save\" value=\"save\">";
    echo "</form>";
}
$TestName = $_POST['testname'];
$Result = $_POST['result'];
$Unit = $_POST['unit'];
$NormalRange = $_POST['NormalRange'];

if(isset($_POST['save']))
{
    $InsertQuery = "INSERT INTO rct(testname,result,unit,NormalRange) VALUES('$TestName','$Result','$Unit','$NormalRange')";
    $oMysqli= getConnection();
    $oMysqli->query($InsertQuery);

    print_r($InsertQuery);exit();

    while($Row = $InsertQuery->fetch_array())
    {
        $TestName = $Row['testname'];
        $Result = $Row['result'];
        $Unit = $Row['unit'];
        $NormalRange = $Row['NormalRange'];
    }   
 }
?>
<html>
<head>
<title>Rct</title>
</head>
<body>
<form name='abc' method="post">
        <label for='Table'>Define Table</label>
        <label for='rows'>Row</label>
        <input type="text" name="column"></input>
        <label for='column'>Column</label>
        <input type="text" name="rows"></input>
        <input type="submit" name="submit" value="submit" onclick="aaa()">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:11:36.230

首先，您必须更正输入标签

代替

```
<input type="text" name="column"></input> 
```

至

```
<input type="text" name="column" /> 
```

其次，上部循环必须是行循环而不是列，因为列位于行内

```
if(isset($_POST['submit']))
{       
    echo"<form name=\"aa\" method=\"post\">";
    echo "<table border='1' align='center'>";           
    for($iii = 0;$iii <$_POST['rows'];$iii++)         
    {               
        echo "<tr>";//start Row here                          
        for($jjj = 0; $jjj <$_POST['column'];$jjj++)  //loop for display no. of rows.
        {
          echo "<td>" ."<input type=\"text\" name='".$iii.$jjj."'>"."</td>";//all TDs must be inside the row
        }
        echo "</tr>";//end row here
    }
    echo "</table>";        
    echo "<input type=\"submit\" name=\"save\" value=\"save\">";
    echo "</form>";
} 
```

当然，表格必须在表格内。

让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:47:43.947

你的代码有很多问题：

1.  包含`<input/>`s 的表应该在里面`<form name='aa'>`。

2.  表中的输入应命名为`$iii[]`.

告诉 PHP 为 中的`[]`所有行创建一个数组`$_POST`，因此您可以访问`$_POST[0][0]`第 0 行、第 0 列、`$_POST[1][2]`第 2 行、第 1 列等。

1.  你似乎有倒退的行和列。

2.  您的所有`<input/>`标签都缺少`/`.

3.  没有输入名为`testname`, `result`, `unit`,的表单`NormalRange`，那么为什么要访问这些`$_POST`值？

4.  `fetch_array()`只能在`SELECT`查询后使用。`INSERT`不返回任何值。

可能还有其他我错过的东西。

# php - 服务器以明文形式返回 MP4

> ID：12686765
> 
> 赞同：0
> 
> 时间：2012-10-02T08:21:08.560
> 
> 标签：php

我有一个上传文件的脚本，它主要上传 MP4。我可以看到文件已上传到正确的位置，并且能够下载它并且播放正常。但是，当尝试定位到文件位置时，似乎什么也没有发生。它似乎也返回了一种 mime 类型的 text/plain；字符集=UTF-8。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:26:33.393

您可以使用 php 设置标题如下：

```
header('Content-type: video/mp4');
header('Content-type: video/mpeg');
header('Content-disposition: inline');
header("Content-Transfer-Encoding:­ binary"); 
```

这应该工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:29:43.530

在您的 Apache 配置文件（或 .htaccess）中，您可以为 mp4 定义一个 mime 类型以强制下载。*.m4p 的正确 mime 类型是“video/mp4”。

强制下载使用

```
AddType application/octet-stream .mp4 
```

或正确的哑剧

```
AddType video/mp4  .mp4 
```

# java - 自动保存模型的动态代理

> ID：12686766
> 
> 赞同：0
> 
> 时间：2012-10-02T08:21:19.490
> 
> 标签：java, hibernate, proxy-classes, cglib

我试图在 java 中使用代理来跟踪对象并在调用 set* 方法时保存它们，从而使一些自动魔术发生。我开始使用 java 的内置代理，一切正常，但据我所知，我需要为每个模型提供一个接口，这是我试图避免的事情。

这就是 CGLIB 的用武之地，它允许我在不使用接口的情况下创建模型的代理。但是，我现在如何检索原始对象，即我要保存的对象？

最佳解决方案类似于休眠使用的 EntityManager 接口，您可以在其中保留原始对象，但仍会对其进行跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:35:50.620

[MethodInvocation](http://aopalliance.sourceforge.net/doc/org/aopalliance/intercept/MethodInterceptor.html)接口仅指定一个将[MethodInvocation](http://aopalliance.sourceforge.net/doc/org/aopalliance/intercept/MethodInvocation.html)作为参数的方法。MethodInvocation 有几种方法来检索正在执行的对象：getStaticPart、getThis。你试过打电话给他们吗？

作为一个无耻的插件，你实际上可以将 Hibernate 与 Xstream 一起使用。这是我关于 Xstream 持久性的[博客文章。](http://koblik.blogspot.ch/2009/02/not-long-time-ago-in-project-i-had-been.html)但在这种情况下，Xstream 用于将 XML 格式的字段保存在数据库中。

# android - 捕获另一个应用程序事件的 Android 应用程序

> ID：12686783
> 
> 赞同：-4
> 
> 时间：2012-10-02T08:22:30.917
> 
> 标签：android, events, capture

我可以开发一个可以捕获另一个（不是我开发的）应用程序事件的 android 应用程序吗？

更好的是，我可以让我的应用程序在后台工作以捕获我正在使用的另一个应用程序的事件（例如点击屏幕的次数、点击的按钮、使用的滚动量、点击“返回”按钮等）吗？

如果可以的话，我不会为这个问题寻求解决方案，但如果你给我一些关键字来搜索和/或一些文档链接或其他对我有帮助的东西，我将不胜感激。但是首先我需要知道我想做的事情是否真的可以做。

*PS对不起我的英语不太好:)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:26:01.360

This is normally called 'spyware' and fortunately cannot be done on Android.

# java - 我期待 outOfMemory 但在这里我在 java 中得到了 stackOverFlow

> ID：12686785
> 
> 赞同：1
> 
> 时间：2012-10-02T08:22:33.973
> 
> 标签：java, memory, stack-overflow

```
package com.atul;

public class StackOverFlow {

    public StackOverFlow() {
        callStackOverFlow();
    }

    public void callStackOverFlow() {
        StackOverFlow st = new  StackOverFlow();
    }

    public static void main(String[] args) {
        StackOverFlow st2 = new StackOverFlow();
    }
} 
```

在上面的程序中，我试图得到 OutOfMemory 错误，但我得到 StackOverFlow 错误。据我所知，所有对象都是在堆中创建的。在这里，我们正在使用构造函数进行递归，但仍然出现 StackOverFlow 错误。

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:25:08.230

You run out of stack (which has a maximum depth around 10,000 for simple cases) long before you run out of heap memory. This is because every thread has its own stack so it must be a lot smaller than the shared heap.

If you want to run out of memory, you need to use up the heap faster.

```
public class OutOfMemoryMain {
    byte[] bytes = new byte[100*1024*1024];
    OutOfMemoryMain main = new OutOfMemoryMain();

    public static void main(String... args) {
        new OutOfMemoryMain();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:25:05.920

The stack size in the JVM is *limited* (per-thread) and configurable via `-Xss`.

If you want to generate an OOM, I would suggest looping infinitely and instantiating a new object per loop, and storing it in a collection (otherwise the garbage collection will destory each instance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:27:05.307

在内存充满对象和程序因内存不足而中止之前；你用完了存储方法调用的堆栈，因此你得到了 Stackoverflow 错误。

当您的对象填满堆空间时会出现溢出错误......

# c++ - 使用 C/C++ 以外的语言构建共享库，特别是 prolog

> ID：12686786
> 
> 赞同：4
> 
> 时间：2012-10-02T08:22:37.530
> 
> 标签：c++, c, dll, prolog, shared-libraries

是否可以使用 C 或 C++ 以外的语言构建共享库（例如`*.so`， ）？`*.dll`

构建共享库的基本要求是什么？该语言是否能够编译为本机二进制文件？

我特别想知道是否可以从 Prolog 构建共享库。

例如，我可以使用 Prolog 构建一个`.so`，然后我可以从另一种语言、C、Java、Python 等链接到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:44:09.363

您可以使用多种语言构建共享库。我经常使用的是Delphi，它可以为windows创建dll。

对于 Prolog，不确定是否可以创建共享库，它需要某种运行时环境，如果有的话，我会从 GNU-Prolog 开始。问题与其说是技术问题，不如说是许可问题。

周围有一些 prologs 可以用作共享库，并与您的应用程序链接，用任何可以包含共享库（大多数语言）的东西编写。一个快速的谷歌出现了这些[http://www.swi-prolog.org/FAQ/](http://www.swi-prolog.org/FAQ/)，[http://www.gprolog.org/#platform](http://www.gprolog.org/#platform)

# javascript - 恢复使用 parentNode.removeChild 删除的项目

> ID：12686788
> 
> 赞同：0
> 
> 时间：2012-10-02T08:22:46.280
> 
> 标签：javascript, recovery, removechild, parent-node

您知道我如何通过以下方式恢复使用 JavaScript 删除的项目：

```
elem1.parentNode.removeChild(elem1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:28:54.457

正如**[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)** `removeChild`中所写，将返回对已删除子节点的引用。像这样的用法：

```
var oldChild = element.removeChild(child);
element.removeChild(child); 
```

更远：

> 被移除的子节点仍然存在于内存中，但不再是 DOM 的一部分。您可以稍后通过 oldChild 对象引用在代码中重用已删除的节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:29:24.077

如果在删除之前不将元素存储在变量中，则无法撤消`removeChild()`调用。在没有赋值的情况下单独调用该函数会将其从 DOM**和**内存中完全删除。

您可以通过执行以下操作强制 JavaScript 将其存储在内存中以供以后使用/恢复：

```
var restoration_element = elem1.parentNode.removeChild(elem1); 
```

将后一种语法与赋值运算符一起使用`elem1`将从显示列表中删除元素，但将其保留为以后使用的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-10T17:33:44.437

我不仅需要获取已删除节点的引用，还需要将已删除节点插入回删除它的位置。因此，我不得不像这样使用堆栈：

```
// Note: This is ES6; for ES5 see https://stackoverflow.com/a/23528539/2065702
const stack = [];
function removeWithStack() {
    const elem = this,
          parent = elem.parentNode;

    const action = {
        "index": Array.from(parent.children).indexOf(elem),
        "parent": parent,
        "elem": parent.removeChild(elem)
    }

    stack.push(action);
}

function popAddStack() {
    const action = stack.pop();
    action.parent.insertBefore(action.elem, action.parent.children[action.index]);
} 
```

```
const ps = document.querySelectorAll("p");

// Note: This is ES6; for ES5 see https://stackoverflow.com/a/23528539/2065702
const stack = [];
function removeWithStack() {
    const elem = this,
          parent = elem.parentNode;

    const action = {
        "index": Array.from(parent.children).indexOf(elem),
        "parent": parent,
        "elem": parent.removeChild(elem)
    }

    stack.push(action);
}

function popAddStack() {
    const action = stack.pop();
    action.parent.insertBefore(action.elem, action.parent.children[action.index]);
}

document.querySelector("button").onclick = popAddStack;

ps.forEach(function(p) {
    p.onclick = removeWithStack;
});
```

```
button,
p {
    cursor: pointer;
}
```

```
<div>
    <p>Test 1</p>
    <p>Test 2</p>
    <p>Test 3</p>
    <p>Test 4</p>
    <p>Test 5</p>
</div>
<button>Undo</button>
```

# asp.net-mvc - 表单验证和 HTTP 异常

> ID：12686789
> 
> 赞同：0
> 
> 时间：2012-10-02T08:22:50.507
> 
> 标签：asp.net-mvc, model-view-controller, jquery-forms-plugin

使用 jQuery 表单插件将表单提交到 MVC 框架中的操作。在操作中，如果表单验证失败，则应将回复发送回客户端。jQuery 表单插件带有错误和成功回调（与任何其他 jQuery Ajax 函数一样）。返回带有错误代码 400（错误请求）的 HTTP 异常并在错误回调中捕获它而不是返回成功的 HTTP 响应并在成功回调中捕获它不是更好的做法吗？

如果答案是肯定的，那么将数据附加到 HTTP Exception 是否更具描述性？从我现在看到的，`HTTPException.Data`是只读的。其中一个构造函数似乎完成了这项工作（`HttpException(SerializationInfo, StreamingContext)`），但我无法理解它。有人可以为我解释一下如何向 HTTP Exception 添加数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:31:06.980

不，即使您确实设法将消息附加到 HTTPException，也不要简单地返回错误代码。

为什么？好吧，那样你会丢失很多信息。您可以选择返回任意 JSON 对象，其中可能包括（例如）所有验证错误的列表（或者实际上，任何可能帮助调用客户端的相关信息），然后您在客户端上呈现该对象，以便用户能够更正。

此外，您必须考虑呼叫成功时会发生什么。200 返回码真的足以满足您的目的吗？

# ruby - 我可以有没有方法类的 RSpec

> ID：12686791
> 
> 赞同：11
> 
> 时间：2012-10-02T08:22:57.810
> 
> 标签：ruby, rspec

我只是在写一些我不想放在类中的算法方法。所以我只是把它们放在我的 ruby​​ 文件中。但是我不知道如何编写测试或更具体地使用描述：xxx，因为我没有在主要描述之后放置类名。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T08:25:13.253

您可以在 describe 语句之后放置任何字符串：

```
describe "Something You Want To Test" do
  # Your specs here
end 
```

# iphone - Xcode restKit error after updating into Xcode 4.5

> ID：12686793
> 
> 赞同：0
> 
> 时间：2012-10-02T08:23:04.730
> 
> 标签：iphone, objective-c, ios, xcode, restkit

I have an application running successfully on Xcode 4.2 iOS 5.1, when i updated to Xcode 4.5 to make the application compatible with iOS 6, when i run the application it gives an error

```
Apple Mach-O linker error: no such file or directory: '/Users/User/Library/Developer/Xcode/DerivedData/Build/Products/Debug-iphonesimulator/RestKit/RestKit' 
```

Note that i have moved the whole project from a Mac that was running xcode 4.2 into another Mac running Xcode 4.5

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:44:00.953

只需转到项目的 BuildSettings 并从有效架构中删除 armv7s

# c# - Cannot retrieve PointCloud using Kinect

> ID：12686797
> 
> 赞同：0
> 
> 时间：2012-10-02T08:23:14.183
> 
> 标签：c#, opencv, kinect, openni

I am using EmguCV and OpenNi in C# to retrieve the pointcloud from the Kinect. The code I am using is below:

```
 IntPtr img = CvInvoke.cvRetrieveFrame(kCapture.Ptr, 1);
                if (img != IntPtr.Zero)
                {
                    MIplImage iplImage = (MIplImage)Marshal.PtrToStructure(img, typeof(MIplImage));

                    MCvPoint3D32f[] points = new MCvPoint3D32f[iplImage.width * iplImage.height];

                    GCHandle handle = GCHandle.Alloc(points, GCHandleType.Pinned);
                    using (Matrix m = new Matrix(iplImage.height, iplImage.width, handle.AddrOfPinnedObject()))
                    {
                        CvInvoke.cvCopy(img, m, IntPtr.Zero);
                    }
                    handle.Free();

                } 

```

I get an exception with the message "OpenCV: src.channels() == dst.channels()" when I am trying to perform the copy operation.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T08:44:27.033

我整个周末都在修补 opencv 和 Emgu CV，我已经设法解决了。原来你可以使用 RetrieveBgrFrame 来检索点云。

```
 Image pcl = kCapture.RetrieveBgrFrame((int)Emgu.CV.KinectCapture.OpenNIDataType.PointCloudMap);
                Image pclf = new Image(pcl.MIplImage.width, pcl.MIplImage.height, pcl.MIplImage.widthStep, pcl.MIplImage.imageData); 

```

# android - Android 果冻豆更多选项按钮

> ID：12686799
> 
> 赞同：1
> 
> 时间：2012-10-02T08:23:20.320
> 
> 标签：android, android-ui, android-button, android-4.2-jelly-bean, android-keypad

我使用 Galaxy Nexus，它没有任何按钮。但其他人有一些特殊的按钮。例如主页、菜单、返回和搜索。我正在开发一个 android 应用程序，例如我想使用菜单按钮。我怎样才能做到这一点 ？如何在底线添加一个或多个键？

例如 Whatsapp 使用这个。我启动whatsapp，我看到4个按钮，返回，主页，应用程序和连续的三点。如果我单击此三点按钮，则会打开新选项卡，并且此处的选项很少。

我想使用这个逻辑我该怎么做？

注意：我不知道如何发音这些按钮的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:45:49.950

您正在开发 Web 应用程序？如果你是，你可以使用已经为你提供了按键/按钮的 jquery mobile。否则你必须在应用程序上创建按钮。CMIIW

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:52:51.793

请从文档中检查此内容，以便将菜单添加到您的应用中

[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

这很简单，只需覆盖几个方法...

# objective-c - 理解类和实例方法变量

> ID：12686802
> 
> 赞同：0
> 
> 时间：2012-10-02T08:23:49.787
> 
> 标签：objective-c

在我的代码中，我有一个类，`mainClass`它有一个实例方法`-(void)record`。在接口中 `mainClass`，我有实例变量，这个方法使用它。

现在，我知道每次我创建一个新的类实例时：

```
mainClass *instance=[mainClass alloc]; 
```

它为所有这些类变量在内存中创建了一个新位置，现在如果我这样做了

```
[instance record]; 
```

它将创建所有变量，`record`但它们将是新的一次。

现在假设我想从外部类调用到`record`，并更改/使用它的变量不是创建一次新的，而是使用已经在`mainClass`.

这样做的最佳方法是什么，它与类方法有什么关系？这个方法应该是类方法吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:35:21.843

如果您希望它可访问，实例和永久更改，您必须使其成为静态，将回答您的下一个问题

[Objective C 静态类级别变量](https://stackoverflow.com/questions/1063229/objective-c-static-class-level-variables)

# java - Jax WS - wsgen throwing ModelerException: Web service endpoint could not be found

> ID：12686807
> 
> 赞同：4
> 
> 时间：2012-10-02T08:24:02.677
> 
> 标签：java, web-services, jax-ws, endpoints

This is a common problem. But looks like my classes and interface are annotated correctly. Please let me know if I am overlooking at something. Thanks in advance. I searched a lot in internet but nothing helping me out.

Exception details:

```
C:\Indu\workspaceWS\CalculatorWS>wsgen -s src -verbose -d bin -cp bin com.indu.w
s.services.CalcServiceImpl

warning: The apt tool and its associated API are planned to be
removed in the next major JDK release.  These features have been
superseded by javac and the standardized annotation processing API,
javax.annotation.processing and javax.lang.model.  Users are
recommended to migrate to the annotation processing features of
javac; see the javac man page for more information.
Note:   ap round: 1
Problem encountered during annotation processing;
see stacktrace below for more information.
com.sun.tools.internal.ws.processor.modeler.ModelerException: [failed to localiz
e] A web service endpoint could not be found()
        at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.o
nError(WebServiceAP.java:219)
        at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.b
uildModel(WebServiceAP.java:326)
        at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.p
rocess(WebServiceAP.java:260) 
```

My Code: Implementation Class:

```
@WebService(serviceName = "CalculatorService", endpointInterface = 
"com.indu.ws.services.CalcIntService", 
targetNamespace="http://com/indu/ws/services/",
portName="CalcIntServicePortType")
public class CalcServiceImpl implements CalcIntService { 
```

Interface:

```
@WebService(name = "CalcIntServicePortType", targetNamespace = 
"http://com/indu/ws/services/", 
 wsdlLocation="WEB-INF/wsdl/CalculatorWS.wsdl")
public interface CalcIntService {
@WebMethod
public int doService(Calculator c);
    } 
```

# objective-c - Declaring Objective-C constant strings accessible by subclass

> ID：12686808
> 
> 赞同：0
> 
> 时间：2012-10-02T08:24:02.973
> 
> 标签：objective-c

With all the new Objective-C features, what is the best way to declare a const string and make accessible to subclassess? (Do I use properties, and if so, what is the best way to assign it once - NOT everytime the object is instantiated?)

# mdx - 如何在 Tableau 中获取当前的 MDX？

> ID：12686809
> 
> 赞同：1
> 
> 时间：2012-10-02T08:24:03.113
> 
> 标签：mdx, tableau-api

给定 Tableau 中的数据透视表，有没有办法知道关联的 MDX 查询？

我会帮助我理解当前的数据透视表并修复潜在的误解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:33:47.610

与 ProClarity 和其他一些 MDX 生成工具不同，您在 UI 中看不到正在创建的 MDX。但是，如果您打开 \My Documents\My Tableau Repository\Logs 文件夹，您将看到 Desktop 的日志。您可以打开它们并查看针对 SSAS 执行的每条 MDX 语句。

希望这可以帮助！

# matlab - Matlab: 10 fold cross giving same fold over and over

> ID：12686811
> 
> 赞同：1
> 
> 时间：2012-10-02T08:24:10.553
> 
> 标签：matlab, machine-learning, cell

I have attached the data at the bottom of the question: I have following code that return the 10 fold in a cell, such a way that cell{1,1} consider the training data and cell{1,2} test data but for some reason beyond cell{1,1} which cell{1,2}.... has same data repeating over and over. I am not really sure why its happening. I debug so many rounds and was not able to figure the reason.

Here is the code,

```
%Function that accept data file as a name and the number of folds
%For the cross fold
function [results_cell] = GetTenFold(dataFile, x)
%loading the data file
dataMatrix = load(dataFile);
%combine the data and labels as one matrix
X = [dataMatrix.data dataMatrix.labels];
%geting the length of the of matrix
dataRowNumber = length(dataMatrix.data);
%shuffle the matrix while keeping rows intact 
shuffledMatrix = X(randperm(size(X,1)),:);
crossValidationFolds = x;
%Assinging number of rows per fold
numberOfRowsPerFold = dataRowNumber / crossValidationFolds;
%Assigning 10X2 cell to hold each fold as training and test data
results_cell = cell(10,2);
    %starting from the first row and segment it based on folds
    i = 1;
    for startOfRow = 1:numberOfRowsPerFold:dataRowNumber
        testRows = startOfRow:startOfRow+numberOfRowsPerFold-1;
        if (startOfRow == 1)
            trainRows = (max(testRows)+1:dataRowNumber);
        else
            trainRows = [1:startOfRow-1 max(testRows)+1:dataRowNumber];
            i = i + 1;
        end
        %for i=1:10
        results_cell{i,1} = shuffledMatrix(trainRows ,:);
        results_cell{i,2} = shuffledMatrix(testRows ,:);
    end
end
data

5.1000    3.5000    1.4000    0.2000
4.9000    3.0000    1.4000    0.2000
4.7000    3.2000    1.3000    0.2000
4.6000    3.1000    1.5000    0.2000
5.0000    3.6000    1.4000    0.2000
5.4000    3.9000    1.7000    0.4000
4.6000    3.4000    1.4000    0.3000
5.0000    3.4000    1.5000    0.2000
4.4000    2.9000    1.4000    0.2000
4.9000    3.1000    1.5000    0.1000
5.4000    3.7000    1.5000    0.2000
4.8000    3.4000    1.6000    0.2000
4.8000    3.0000    1.4000    0.1000
4.3000    3.0000    1.1000    0.1000
5.8000    4.0000    1.2000    0.2000
5.7000    4.4000    1.5000    0.4000
5.4000    3.9000    1.3000    0.4000
5.1000    3.5000    1.4000    0.3000
5.7000    3.8000    1.7000    0.3000
5.1000    3.8000    1.5000    0.3000
5.4000    3.4000    1.7000    0.2000
5.1000    3.7000    1.5000    0.4000
4.6000    3.6000    1.0000    0.2000
5.1000    3.3000    1.7000    0.5000
4.8000    3.4000    1.9000    0.2000
5.0000    3.0000    1.6000    0.2000
5.0000    3.4000    1.6000    0.4000
5.2000    3.5000    1.5000    0.2000
5.2000    3.4000    1.4000    0.2000
4.7000    3.2000    1.6000    0.2000
4.8000    3.1000    1.6000    0.2000
5.4000    3.4000    1.5000    0.4000
5.2000    4.1000    1.5000    0.1000
5.5000    4.2000    1.4000    0.2000
4.9000    3.1000    1.5000    0.1000
5.0000    3.2000    1.2000    0.2000
5.5000    3.5000    1.3000    0.2000
4.9000    3.1000    1.5000    0.1000
4.4000    3.0000    1.3000    0.2000
5.1000    3.4000    1.5000    0.2000
5.0000    3.5000    1.3000    0.3000
4.5000    2.3000    1.3000    0.3000
4.4000    3.2000    1.3000    0.2000
5.0000    3.5000    1.6000    0.6000
5.1000    3.8000    1.9000    0.4000
4.8000    3.0000    1.4000    0.3000
5.1000    3.8000    1.6000    0.2000
4.6000    3.2000    1.4000    0.2000
5.3000    3.7000    1.5000    0.2000
5.0000    3.3000    1.4000    0.2000
7.0000    3.2000    4.7000    1.4000
6.4000    3.2000    4.5000    1.5000
6.9000    3.1000    4.9000    1.5000
5.5000    2.3000    4.0000    1.3000
6.5000    2.8000    4.6000    1.5000
5.7000    2.8000    4.5000    1.3000
6.3000    3.3000    4.7000    1.6000
4.9000    2.4000    3.3000    1.0000
6.6000    2.9000    4.6000    1.3000
5.2000    2.7000    3.9000    1.4000
5.0000    2.0000    3.5000    1.0000
5.9000    3.0000    4.2000    1.5000
6.0000    2.2000    4.0000    1.0000
6.1000    2.9000    4.7000    1.4000
5.6000    2.9000    3.6000    1.3000
6.7000    3.1000    4.4000    1.4000
5.6000    3.0000    4.5000    1.5000
5.8000    2.7000    4.1000    1.0000
6.2000    2.2000    4.5000    1.5000
5.6000    2.5000    3.9000    1.1000
5.9000    3.2000    4.8000    1.8000
6.1000    2.8000    4.0000    1.3000
6.3000    2.5000    4.9000    1.5000
6.1000    2.8000    4.7000    1.2000
6.4000    2.9000    4.3000    1.3000
6.6000    3.0000    4.4000    1.4000
6.8000    2.8000    4.8000    1.4000
6.7000    3.0000    5.0000    1.7000
6.0000    2.9000    4.5000    1.5000
5.7000    2.6000    3.5000    1.0000
5.5000    2.4000    3.8000    1.1000
5.5000    2.4000    3.7000    1.0000
5.8000    2.7000    3.9000    1.2000
6.0000    2.7000    5.1000    1.6000
5.4000    3.0000    4.5000    1.5000
6.0000    3.4000    4.5000    1.6000
6.7000    3.1000    4.7000    1.5000
6.3000    2.3000    4.4000    1.3000
5.6000    3.0000    4.1000    1.3000
5.5000    2.5000    4.0000    1.3000
5.5000    2.6000    4.4000    1.2000
6.1000    3.0000    4.6000    1.4000
5.8000    2.6000    4.0000    1.2000
5.0000    2.3000    3.3000    1.0000
5.6000    2.7000    4.2000    1.3000
5.7000    3.0000    4.2000    1.2000
5.7000    2.9000    4.2000    1.3000
6.2000    2.9000    4.3000    1.3000
5.1000    2.5000    3.0000    1.1000
5.7000    2.8000    4.1000    1.3000
6.3000    3.3000    6.0000    2.5000
5.8000    2.7000    5.1000    1.9000
7.1000    3.0000    5.9000    2.1000
6.3000    2.9000    5.6000    1.8000
6.5000    3.0000    5.8000    2.2000
7.6000    3.0000    6.6000    2.1000
4.9000    2.5000    4.5000    1.7000
7.3000    2.9000    6.3000    1.8000
6.7000    2.5000    5.8000    1.8000
7.2000    3.6000    6.1000    2.5000
6.5000    3.2000    5.1000    2.0000
6.4000    2.7000    5.3000    1.9000
6.8000    3.0000    5.5000    2.1000
5.7000    2.5000    5.0000    2.0000
5.8000    2.8000    5.1000    2.4000
6.4000    3.2000    5.3000    2.3000
6.5000    3.0000    5.5000    1.8000
7.7000    3.8000    6.7000    2.2000
7.7000    2.6000    6.9000    2.3000
6.0000    2.2000    5.0000    1.5000
6.9000    3.2000    5.7000    2.3000
5.6000    2.8000    4.9000    2.0000
7.7000    2.8000    6.7000    2.0000
6.3000    2.7000    4.9000    1.8000
6.7000    3.3000    5.7000    2.1000
7.2000    3.2000    6.0000    1.8000
6.2000    2.8000    4.8000    1.8000
6.1000    3.0000    4.9000    1.8000
6.4000    2.8000    5.6000    2.1000
7.2000    3.0000    5.8000    1.6000
7.4000    2.8000    6.1000    1.9000
7.9000    3.8000    6.4000    2.0000
6.4000    2.8000    5.6000    2.2000
6.3000    2.8000    5.1000    1.5000
6.1000    2.6000    5.6000    1.4000
7.7000    3.0000    6.1000    2.3000
6.3000    3.4000    5.6000    2.4000
6.4000    3.1000    5.5000    1.8000
6.0000    3.0000    4.8000    1.8000
6.9000    3.1000    5.4000    2.1000
6.7000    3.1000    5.6000    2.4000
6.9000    3.1000    5.1000    2.3000
5.8000    2.7000    5.1000    1.9000
6.8000    3.2000    5.9000    2.3000
6.7000    3.3000    5.7000    2.5000
6.7000    3.0000    5.2000    2.3000
6.3000    2.5000    5.0000    1.9000
6.5000    3.0000    5.2000    2.0000
6.2000    3.4000    5.4000    2.3000
5.9000    3.0000    5.1000    1.8000 
```

labels =

```
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3
 3 
```

# git - 我在 ubuntu 中安装了 git，我克隆了一个项目，但是被锁定了，我无法更改文件夹

> ID：12686813
> 
> 赞同：0
> 
> 时间：2012-10-02T08:24:11.773
> 
> 标签：git, ubuntu

我刚刚克隆了一个只读项目，该文件夹已锁定，我什至无法删除。它说许可被拒绝。我试过 shift-delete 但只删除了一些文件，而不是全部。我对 Ubuntu 很陌生，所以我不知道该怎么做，现在我再次重命名并克隆了一个读写项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:28:50.447

首先，你的问题更适合[问ubuntu](https://askubuntu.com/)，
其次，你试过`sudo rm -rf project-folder`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:29:07.963

您可以尝试提供超级用户权限...

```
 sudo rm -rf /file/you/want/to/delete 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:30:01.330

1.  打开终端：Ctrl+Alt+T
2.  使用 CD 命令进入目录（默认为您的主目录，例如，如果它位于名为 MyFolder 的子文件夹中，请执行“cd MyFolder”
3.  输入 sudo rm -R projectname ，它会要求您输入密码。

# linux - Error running Linux find command using sed

> ID：12686816
> 
> 赞同：0
> 
> 时间：2012-10-02T08:24:21.740
> 
> 标签：linux, sed, find, exec

when i try to run the below;

```
find /tmp/PDraw.pl -type f -exec sed -l 's/PEntries/PEntries2/g'{}\; 
```

i get the error "find: missing argument to `-exec'"; I've also tried some posts suggestions to put space between ' and {} and also another between {} and \ but that brings me to another error;

```
sed: -e expression #1, char 7: extra characters after command 
```

my sed version is 4.2.1; This same command ran successfully on another Linux machine. I dont know why its not working now.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:26:46.033

您在 {}\; 之前忘记了一个空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:29:36.493

解决`find`问题后（请参阅 Dorin 的回答），您需要对`sed`调用进行排序。从我的`sed`（v4.2.1）：

```
 -l N, --line-length=N 
```

这表明 -l 采用数字参数。如果我接受您的`sed`调用并使用数字参数进行修改，则不会出现上述错误。你确定这在你的另一台机器上有效（你运行正确`sed`吗？）

# .net - 查看移动计算机（笔记本电脑/平板电脑/等）是否连接到扩展坞的编程方式

> ID：12686820
> 
> 赞同：2
> 
> 时间：2012-10-02T08:24:36.593
> 
> 标签：.net, windows, winapi, hardware

我正在编写一些需要在连接到扩展坞的移动设备上表现不同的软件。因此，我需要一种编程方式来检查计算机是否连接到 C#/.NET 中的扩展坞。

我尝试了以下方法：

*   P/调用[GetCurrentHwProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724311%28v=vs.85%29.aspx)函数。
*   P/调用[CM_Is_Dock_Station_Present](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538716%28v=vs.85%29.aspx)函数。
*   [在 WMI 的Win32_SystemEnclosure](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394474%28v=vs.85%29.aspx)中寻找坞站机箱类型。

不幸的是，这些似乎都不适用于“一刀切”的情况。它们适用于我的一些测试设备，但不适用于其他设备。

我需要在各种设备和扩展坞上运行。是否有任何一致、可靠的方法来检查设备是否停靠在 Windows 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:36:06.550

没有通用的方法来说明这一点。许多坞站只是显示为 USB 集线器，连接了一堆设备并复制了一些 IO 端口，有些确实表现为“坞站”，允许您已经尝试过。

您可能需要做的是使用完整的硬件分析来检查。要求用户断开笔记本电脑的对接，检查所有连接的设备，要求用户将其对接，然后再次检查。您需要检查 PCI 和 USB 总线上的所有可枚举设备。

您还必须做一些魔术来应对可移动设备，因此您必须要求用户在两次检查之前将它们全部删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:59:39.823

您可以考虑使用[GetCurrentHwProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724311%28v=vs.85%29.aspx)并检查返回`dwDockInfo`的[HW_PROFILE_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724479%28v=vs.85%29.aspx)的字段。

# python - pyqt Playing movie files in phonon player QT4.9

> ID：12686827
> 
> 赞同：2
> 
> 时间：2012-10-02T08:25:12.613
> 
> 标签：python, video, media-player, pyqt4, phonon

I'm definitely in need of your help guys.. As in really. My laptop has been stolen and I didn't have a backup of my pyqt phonon video player that I made a year ago. I forgot how and what to do to recreate it.
I only know some key things to do for it to work. So please help me out.

From what i can remember I need to

*   Set backend capabilities (set phonon backend to windows media player?)
*   Install the required codecs (which i dont have a copy of)
*   Code the program (and sadly I forgot how to play a video)

If there's someone out there who have a working sample python videoplayer, can you please share it with me?

I'm trying it right now and my sample doesn't work at all

```
from PyQt4.phonon import Phonon
        media_source = phonon.Phonon.MediaSource("C:\\Sample.avi")
        self.ui.videoPlayer.load(media_source)
        self.ui.videoPlayer.play() 
```

Please help me. And thank you very much to you guys.

I'm using python 2.6 and qt version 4.9\. Now I'm coding on a virtual box windows XP

EDIT: got a following sample with this problem but.. having this error when loading a file.

> "The Operation Cannot Be Performed Because the Pins Are Not Connected"

This maybe because I'm using a virtual box in Ubuntu?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T09:53:30.640

不要忘记`show()`视频播放器。其余的，根据我的经验，Phonon 经常很难找到在 Windows 上播放视频所需的编解码器。安装 K-Lite 编解码器包可能适用于这种情况。

这是一个对我有用的独立示例（Windows Vista32、Python 2.6.5、PyQt 4.7.3）。

```
import sys
from PyQt4 import QtCore, QtGui
from PyQt4.phonon import Phonon
app = QtGui.QApplication(sys.argv)
vp = Phonon.VideoPlayer()
media = Phonon.MediaSource('C:\\video.mp4')
vp.load(media)
vp.play()
vp.show()
sys.exit(app.exec_()) 
```

**编辑：**

多人最近评论说上述代码不再提供所需的行为。我已经很久没有使用 PyQt 了，但我怀疑其中一个更新可能已经改变了 Phonon 的功能。

根据评论者的说法，`vp.show()`现在需要在之前调用`Phonon.MediaSource()`，即：

```
...
vp = Phonon.VideoPlayer()
vp.show()
media = Phonon.MediaSource('C:\\video.mp4')
vp.load(media)
vp.play()
sys.exit(app.exec_()) 
```

# file - get a list of files that are different between two filetrees

> ID：12686830
> 
> 赞同：0
> 
> 时间：2012-10-02T08:25:14.157
> 
> 标签：file, grep, diff, filetree

I'm comparing two very large filesystems (to do with a migration) and diff -qr was great but now since the users have been using the new location the files have changed. I there a way to use diff, grep or anything else to compare only if the file exists, ie: ignore the fact that files differ. By latest diff has a lot of: Only in /dir1/myFile Only in /dir2/myFile In it. is there either an easy way to use grep to show only the files that don't exist at all in dir2 that do exist in dir1 or do something similar with diff.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:35:52.057

you can use:

```
tree /path/to/dir1 > out1
tree /path/to/dir2 > out2
diff out1 out2 | grep ">" 
```

but i find [beyond compare](http://www.scootersoftware.com/ "beyond compare") more suitable for a job like this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:44:33.883

You may also use the command comm

comm -1 -2 <(ls /path_to_dir-1/) <(ls /path_to_dir-2/)

Check the following link for additional info:

[http://nixtricks.wordpress.com/2010/01/11/unix-compare-the-contents-of-two-directories-in-the-command-line/](http://nixtricks.wordpress.com/2010/01/11/unix-compare-the-contents-of-two-directories-in-the-command-line/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:57:10.880

The one liners above are great, but this bash script allows you more customization: can change `-e` to `! -e` or skip certain files.

`for f in $(find old/ -type f) ; do if [ -e "new/${f}" ] ; then echo "${f} exists" ; fi ; done`

# sql - 检索 CLOB 字段期间的 DB2 查询错误

> ID：12686832
> 
> 赞同：2
> 
> 时间：2012-10-02T08:25:19.837
> 
> 标签：sql, database, jdbc, db2, clob

在 Java 中，我在 DB2 上执行以下查询：

```
SELECT * FROM PRV_PRE_ACTIVATION WHERE TRANSACTION_ID = ? 
```

该字段`TRANSACTION_ID`的`VARCHAR`长度为32。我使用该`setString`方法在preparedStatement中设置了参数。

我得到错误：

```
com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=63, DRIVER=3.59.81
    at com.ibm.db2.jcc.am.dd.a(dd.java:676)
    at com.ibm.db2.jcc.am.dd.a(dd.java:60)
    at com.ibm.db2.jcc.am.dd.a(dd.java:127)
    at com.ibm.db2.jcc.am.bn.c(bn.java:2546)
    at com.ibm.db2.jcc.am.bn.d(bn.java:2534)
    at com.ibm.db2.jcc.am.bn.a(bn.java:2026)
    at com.ibm.db2.jcc.t4.cb.g(cb.java:140)
    at com.ibm.db2.jcc.t4.cb.a(cb.java:40)
    at com.ibm.db2.jcc.t4.q.a(q.java:32)
    at com.ibm.db2.jcc.t4.rb.i(rb.java:135)
    at com.ibm.db2.jcc.am.bn.gb(bn.java:1997)
    at com.ibm.db2.jcc.am.cn.pc(cn.java:3009)
    at com.ibm.db2.jcc.am.cn.b(cn.java:3786)
    at com.ibm.db2.jcc.am.cn.bc(cn.java:678)
    at com.ibm.db2.jcc.am.cn.executeQuery(cn.java:652) 
```

其中 sqstate 表示“此版本的 DB2 应用程序请求者、DB2 应用程序服务器或两者的组合不支持功能”。但我不使用任何奇怪的功能。

我尝试使用 squ 客户端查询：

```
SELECT * FROM PRV_PRE_ACTIVATION where transaction_id='A' 
```

一切顺利。

问题的原因是什么？

更新：准备语句的代码：

```
s = con.prepareStatement(sSQL,
                 ResultSet.TYPE_SCROLL_INSENSITIVE,
                 ResultSet.CONCUR_UPDATABLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:15:38.190

尝试更改为选择列表中的指定列列表——我猜你有一个用户定义的列类型（或其他类型），驱动程序不支持。例如，是否声明

```
SELECT TRANSACTION_ID FROM PRV_PRE_ACTIVATION WHERE TRANSACTION_ID = ? 
```

工作？如果是这样，那么开始添加列，您将找到问题列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T01:17:25.317

我最近遇到了这个问题，在网上搜索了一些之后，我发现了这个链接： [DB2 SQL error: SQLCODE: -270, SQLSTATE: 42997, SQLERRMC: 63](http://www.databaseteam.org/9-db2/64ffebaa0c9e113d.htm) ，它指定了这个：

> 不能在不敏感可滚动游标的选择列表中指定具有 LOB 类型、LOB 类型上的不同类型或结构化类型的列。

在同事的帮助下，我们得出了这样的结论：

1、问：什么时候会得到这个“SQLCODE=-204, SQLSTATE=42704”的异常？

A：当一个可滚动的 PreparedStatement 准备和执行时，选择列表中存在 [B|C]LOB 字段。例如：

```
String strQuery = "SELECT NUMBER_FIELD, CHAR_FIELD, CLOB_FIELD FROM TABLE_NAME WHERE CONDITION IS TRUE;"
Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, REsultSet.CONCUR_READ_ONLY);
rs = stmt.executeQuery(strQuery); //and this exception will be thrown here 
```

2、Q：那么在查询[B|C]LOB字段的时候，如果想去掉，有什么办法呢？

A：在创建查询语句时尝试使用 ResultSet.TYPE_FORWARD_ONLY。例如：

```
stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY); 
```

或者干脆试试这个：

```
stmt = conn.createStatement(); 
```

请注意，相同的规则也适用于 conn.prepareStatement()。您可以参考[Java API 文档](http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html)了解更多信息。

# c# - TextBox 上的 Focus() 不起作用

> ID：12686836
> 
> 赞同：1
> 
> 时间：2012-10-02T08:25:49.197
> 
> 标签：c#, winforms, pdf, axacropdf

我有一个表格，`TextBox`里面有一个。每次文本更改时，我都会使用`TextChanged`事件来创建 PDF 文件并将其加载到`AxAcroPDF`同一表单中的 -Object 中。这工作正常，但随后`TextBox`失去焦点，并且由于某种原因`textBox.Focus()`加载文件后不起作用。

有没有人知道我可以如何安排您在刷新 PDF 的同时继续打字？

**编辑：**

我有另一个想法，我创建了一个单独的线程来更新 PDF，并且在`TextChanged`-event 中我只设置了一个标志。但现在我遇到了一个奇怪的错误

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'AcroPDFLib.IAcroAXDocShim'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T08:36:08.863

试试这个：

```
textBox.Select();
textBox.Focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:23:33.987

我为自己感到羞耻，我发现了一个非常非常肮脏的黑客，但它有效......我做了以下事情：

当我在 MessageBox 中编写文本时，我会在 TextChange-Event 中重写我的 PDF。在相同的方法中，我存储了具有焦点的控件（在 PDF 对象上调用 LoadFile 时，此控件仍然失去焦点）。现在脏活来了：我实现了一个线程，它不断地将焦点设置到存储在变量中的控件上。在 TextBox 的 Leave-Event 中，我重置了变量，这样其他控件就不会被阻止。

我知道这是一个非常肮脏的黑客，但现在我可以立即用我自己的表单“编辑”一个 pdf，这是一个很好的眼睛；）

感谢所有的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-06T22:13:54.443

我无法让 .Focus() 和 .Select() 工作，所以我使用了 Jquery，它工作得很好。

```
$(document).ready(function () {
    setTimeout(function () {
        $(".contentWrapper input")[0].focus();
    }, 100);
}); 
```

# .htaccess - htaccess 使用 on 规则重定向

> ID：12686839
> 
> 赞同：1
> 
> 时间：2012-10-02T08:26:09.867
> 
> 标签：.htaccess, redirect, rule

如何编写一条规则什么可以满足所有这些重定向我尝试通过以下规则实现的目标

```
RewriteRule ^desktop/page/1/ /tag/desktop/page/1/ [R,L]
RewriteRule ^desktop/page/2/ /tag/desktop/page/2/ [R,L]
RewriteRule ^desktop/page/3/ /tag/desktop/page/3/ [R,L]
RewriteRule ^desktop /tag/desktop [R,L] 
```

最后一个永远不会被执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:28:22.680

尝试：

```
RewriteRule ^desktop(/.*)?$ /tag/desktop$1 [R,L] 
```

或者，如果您必须将其限制为页码/编号：

```
RewriteRule ^desktop(/(page/[0-9]+/?)?)?$ /tag/desktop$1 [R,L] 
```

# facebook - 通过 Facebook Graph API 确定前 50 个赞

> ID：12686840
> 
> 赞同：0
> 
> 时间：2012-10-02T08:26:22.953
> 
> 标签：facebook, facebook-graph-api

例如，是否有可能获得喜欢帖子、照片、我通过 Graph API 在 facebook 上创建的任何内容的前 50 人？访问 /likes 或 /comments 等连接时是否有任何顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:15:03.053

使用以下链接（假设您有权访问该帖子）：

/喜欢？限制=50

这应该是通过 Facebook 订购的前 50 个赞（通常基于时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:51:54.827

ASFAIK，您无法获得喜欢页面的人的列表。这是一个隐私问题。如果您想创建一个应用程序，并且用户授权您的应用程序，那么您可以获得当前用户喜欢该页面的朋友列表。

# php - 返回数值的函数

> ID：12686841
> 
> 赞同：-2
> 
> 时间：2012-10-02T08:26:28.530
> 
> 标签：php, string

这样做的优雅方式是什么？

我有这个->“MC0001”这是输入。它总是以“MC”开头我用这个输入瞄准的输出是“MC0002”。

所以我创建了一个在删除“MC000”后应该返回“1”的函数。稍后我将把它转换成一个整数，这样我就可以生成“MC0002”，它可以上升到“MC9999”。为此，我想我需要遍历字符串并计算零等等，但我认为那样会弄得一团糟。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:31:36.493

这应该可以解决问题：

```
<?php
$string = 'MC0001';
// extract the part succeeding 'MC':
$number_part = substr($string, 2);
// count the digits for later:
$number_digits = strlen($number_part);
// turn it into a number:
$number = (int) $number_part;
// make the next sequence:
$next = 'MC' . str_pad($number + 1, $number_digits, '0', STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:31:45.323

只需使用 ltrim 删除任何前导字符：[http ://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

```
$str = ltrim($str, 'MC0');
$num = intval($str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:38:53.687

使用 filter_var 可能是最好的解决方案。

```
echo filter_var("MC0001", FILTER_SANITIZE_NUMBER_INT)."\n";
echo filter_var("MC9999", FILTER_SANITIZE_NUMBER_INT); 
```

会给你

```
0001
9999 
```

这些可以转换为 int 或按原样使用，因为如果您将它们用作数字，PHP 无论如何都会自动转换。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T09:41:57.240

```
<php
// original number to integer
sscanf( $your_string, 'MC%d', $your_number );
// pad increment to string later on
sprintf( 'MC%04u', $your_number + 1 ); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-02T08:30:47.897

不确定当有前导零时是否有更好的方法将字符串解析为整数。

我建议执行以下操作： 1\. 遍历字符串（从位置 2 开始，因为您不需要 MC 部分） 2\. 如果您发现一个大于 0 的数字，请停止，使用您当前的位置获取子字符串和字符串的长度减去您当前的位置。转换为整数，返回值。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-02T08:31:21.627

[您可以通过对字符串执行子字符串](http://fr2.php.net/manual/en/function.substr.php)操作来删除“MC”par 。

```
$a = "MC0001";
$a = substr($a, 2); //Lengths of "MC"
$number = intval($a); //1 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-02T08:33:55.603

```
return intval(str_replace($input, 'MC', ''), 10); 
```

# c# - 请问我可以有一个简洁的代码片段会导致 JIT 内联吗？

> ID：12686850
> 
> 赞同：0
> 
> 时间：2012-10-02T08:26:50.910
> 
> 标签：c#, .net, jit, inlining

我正在尝试生成一些会导致 JIT 内联的“Hello World”大小的 C# 代码片段。到目前为止，我有这个：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine( GetAssembly().FullName );
        Console.ReadLine();
    }

    static Assembly GetAssembly()
    {
        return System.Reflection.Assembly.GetCallingAssembly();
    }
} 
```

我从 Visual Studio 编译为“Release”-“Any CPU”和“Run without debugging”。它清楚地显示了我的示例程序程序集的名称，`GetAssembly()`没有内联到`Main()`中，否则它将显示`mscorlib`程序集名称。

如何编写一些会导致 JIT 内联的 C# 代码片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:36:33.373

当然，这里有一个例子：

```
using System;

class Test
{
    static void Main()
    {
        CallThrow();
    }

    static void CallThrow()
    {
        Throw();
    }

    static void Throw()
    {
        // Add a condition to try to disuade the JIT
        // compiler from inlining *this* method. Could
        // do this with attributes...
        if (DateTime.Today.Year > 1000)
        {
            throw new Exception();
        }
    }
} 
```

以类发布模式编译：

```
csc /o+ /debug- Test.cs 
```

跑：

```
c:\Users\Jon\Test>test

Unhandled Exception: System.Exception: Exception of type 'System.Exception' was
thrown.
   at Test.Throw()
   at Test.Main() 
```

请注意堆栈跟踪 - 它看起来好像`Throw`是由 直接调用的`Main`，因为 for 的代码`CallThrow`是内联的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:31:04.433

您对内联的理解似乎不正确：如果`GetAssembly`被内联，它仍然会显示您的程序的名称。

内联意味着：“在函数调用的地方使用函数体”。内联`GetAssembly`将导致与此等效的代码：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(System.Reflection.Assembly.GetCallingAssembly()
                                                    .FullName);
        Console.ReadLine();
    }
} 
```

# c# - 在 WCF 服务应用程序或 WCF 服务库中实现 IErrorHandler

> ID：12686852
> 
> 赞同：1
> 
> 时间：2012-10-02T08:26:57.290
> 
> 标签：c#, wcf, web-config

在实现 IErrorHandler 接口并将其添加到 WCF 服务**应用程序**中的调度程序时，我遇到了一些奇怪的行为。只有`HandleError`方法被触发，而不是`ProvideFault`方法。

在 WCF 服务**库**中使用相同的代码和配置时，两种方法都会在代码中出现异常时触发。

例子：

```
public class ErrorHandler : IErrorHandler, IServiceBehavior
{
    public void ProvideFault(Exception error, System.ServiceModel.Channels.MessageVersion version, ref System.ServiceModel.Channels.Message fault)
    {
        // Provide the fault
    }

    public bool HandleError(Exception error)
    {
        // If handled return true, otherwise false
    }

    // Validate
    // AddBindingParameters
    // ApplyDispatchBehavior
}

public class ErrorHandlerBehavior : BehaviorExtensionElement
{
    public override Type BehaviorType
    {
        get { return typeof(ErrorHandler); }
    }

    protected override object CreateBehavior()
    {
        return new ErrorHandler();
    }
} 
```

在 Web.config 中：

```
 <extensions>
      <behaviorExtensions>
        <add name="ErrorLogging" type="Service.ErrorHandlerBehavior, Service, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>
...
      <serviceBehaviors>
        <behavior>
          <ErrorLogging />
        </behavior>
      </serviceBehaviors> 
```

代码和配置是一样的（虽然配置在Service Application的Web.config和Service Library的i App.config）。

通过在 中插入断点，`ProvideFault`我`HandleError`可以看到`ProvideFault`它只为服务**库**调用- 这怎么可能？我错过了什么吗？

**编辑**

`ProvideFault`当被调用的服务操作的签名具有除原始类型以外的返回类型时，似乎不会调用它，例如：

```
public IEnumerable<MyType> GetMyType(string s1)
{
    throw new Exception("Testing...");
} 
```

...不会触发`ProvideFault`.

但：

```
public bool DoStuff(string s1, string s2)
{
    throw new Exception("Testing...");
} 
```

...确实会触发`ProvideFault`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:26:09.527

NicklasJepsen，你接近正确答案了。我刚刚遇到了与 IEnumerable 相同的问题，但设法解决了它，而不是更改返回类型。

就我而言，问题原因是该方法使用了 yield return 语句。您可能知道，返回 IEnumerable 并使用 yield return 返回元素的方法被编译为“状态机”。实际上，它返回 IEnumerable 实例，该实例返回迭代器，哪些方法实现了该状态机。这个伟大的特性在于 LINQ 的核心，它允许延迟执行——状态机仅在您需要另一个元素时工作。

如果是 WCF，我想我知道会发生什么。WCF 的行为有点像这样：

1.  它调用方法。

2.  如果方法失败，WCF 会将异常传递给您的 ErrorHandler 方法（两者）。

3.  如果方法成功，WCF 准备响应。它按照响应格式对方法返回的对象进行序列化。

4.  如果序列化失败（比方法失败更不期望），WCF 会将异常传递给您的 ErrorHandler，但仅传递给方法 HandleError。由于某种原因，在此阶段未调用 ProvideFault。

5.  如果序列化成功，则将序列化的对象发送给客户端。

现在考虑这两个例子：

```
public bool DoStuff();
public IEnumerable<bool> DoALotOfStuff(); 
```

DoStuff 在第 2 步肯定会失败。但 DoALotOfStuff 不会！请记住，它是一个状态机，它的执行会延迟到您查询第一个元素的那一刻。因此，该方法不会失败，它只返回 IEnumerable 实例，一旦您需要元素，该实例就可以为您提供枚举器。因此，WCF 对方法返回的内容感到满意，因此它继续进行序列化。这就是它得到你阴险异常的地方！

现在，解决方案非常简单——只是不要推迟执行。返回一个“真实的”可枚举实例，如 List 而不是“状态机”。

```
public IEnumerable<bool> DoALotOfStuff()
{
    return _DoALotOfStuff().ToList();
}

protected IEnumerable<bool> _DoALotOfStuff()
{
    yield return true;
    yield return false;
    throw new Exception( "Testing..." );
} 
```

现在，如果该方法失败，它会在正确的位置失败，因此您调用了 ProvideFault。

# erlang - 从 XML 中提取带有 XPath 的 URL

> ID：12686858
> 
> 赞同：0
> 
> 时间：2012-10-02T08:27:07.303
> 
> 标签：erlang

我正在尝试提取描述标签下的第二个链接。我已经编写了以下代码，但它看起来真的很混乱 freads 和子字符串（只是为了让它工作）。有没有更清洁的方法来做到这一点？

![XML 提取](../Images/0b5a088072acebbc4732676f719ca190.png)

> 魔术（网址）->
> 
> 标签 = ".xml",
> 
> inets：开始（），
> 
> { 好的，{状态，标题，正文}} = httpc:request(Url ++ Tag)，
> 
> { Xml, 休息 } = xmerl_scan:string(Body),
> 
> {xmlObj , string , A } = xmerl_xpath:string("substring-after(substring-after(substring->before(//channel/item/description[ [1](https://i.stack.imgur.com/yGXJL.png) ], '\">[link]') , 'br' ) , 'href=')", Xml),
> 
> {ok,_,B} = io_lib:fread("~6s" , A),
> 
> 字符串：子字符串（B，1，字符串：len（B）-1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:29:16.647

不是一个完美的解决方案，但您可以使用这样的 xpath `//channel/item/description[1]/text()[16]`和`//channel/item/description[1]/text()[24]`

提取的字符串开头包含 urls + 引号，因此您可以使用列表匹配语法来切断引号：`[_|Url] = ...`

所以使用这个：`[{_,_,_,_,[_|U1],_}] = xmerl_xpath:string("//channel/item/description[1]/text()[16]", Xml).`将 U1 与第一个 url 绑定。

在外壳中测试：

```
11> [{_,_,_,_,[_|U1],_}] = xmerl_xpath:string("//channel/item/description[1]/text()[16]", Xml). 
[{xmlText,[{description,5},{item,5},{channel,1},{rss,1}],
          16,[],"\"http://www.reddit.com/user/escaped_reddit",text}]
12> 
12> U1.
"http://www.reddit.com/user/escaped_reddit"
13> 
13> 
13> [{_,_,_,_,[_|U2],_}] = xmerl_xpath:string("//channel/item/description[1]/text()[24]", Xml). 
[{xmlText,[{description,5},{item,5},{channel,1},{rss,1}],
          24,[],
          "\"http://www.reddit.com/r/erlang/comments/y62wf/how_to_use_ranch/",
          text}]
14> 
14> U2.
"http://www.reddit.com/r/erlang/comments/y62wf/how_to_use_ranch/" 
```

# queue - RabbitMQ AMQP 队列设计

> ID：12686868
> 
> 赞同：3
> 
> 时间：2012-10-02T08:28:29.403
> 
> 标签：queue, rabbitmq, message-queue, amqp

以下是队列的理想设计：

*   P制作人。插入数据的应用程序
*   X 交换。
*   C1-C3 消费者。从队列中读取的应用程序

队列详情：

*   A. 就像队列日志一样，如果没有客户端绑定，那么消息将被丢弃。
*   B. 这是一个工作队列。如果有条件匹配，它会做一些事情。
*   C. 也是一个工作队列。它将转换数据

A 是可选的，但 BC 将始终在队列中，直到某个客户端进程连接它。

![理想的队列设计](../Images/838935b8350827bde1fab33c22423c18.png)

问题是确定我应该使用哪种类型的交换。它是扇出、直接还是主题？因为如果没有连接客户端，我希望 A 队列丢弃消息，但 B & C 应该始终保留消息。

生产者应该向交易所写入一次，还是使用不同的路由键或主题多次写入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T09:44:42.903

回答问题：我是否希望所有队列接收所有消息？

如果答案是肯定的，那么您应该使用扇出。如果答案是否定的，那么您应该使用直接或主题。直接或主题的全部意义在于，队列本身只会接收基于路由键与绑定键匹配的消息。

队列 A 应该由消费者 C1 实例化，并设置为自动删除和非持久性。这样，当 C1 断开连接时，队列将被删除，消息将被丢弃。

相反，队列 B 和 C 应该在交换时被实例化，或者单独地，或者由生产者。应该设置为非自动删除并且可能是持久的。如果您使用的是持久队列，您可能希望拥有持久消息（如果队列 A 不存在，请不要担心，即使持久消息在这里也不会成为问题）。这样，一旦生产者开始发送消息，队列就会开始排队，并且不会丢失任何消息，即使消费者尚未运行。

使用直接交换还是主题交换是个人喜好。我知道直接交换应该更快，而主题交换允许路由/绑定键有很大的灵活性。

我不是 100% 你最后一个问题的意思。每条消息只能写入一次交换。如果使用扇出，交换将负责正确地将消息路由到队列，就是这样。如果您使用的是直接或主题交换，那么它会使用绑定键来确保每个队列都接收到正确的消息。您不需要发送带有多个路由键的消息，如果您想做类似的事情，那么您的理解就会倒退。但是您可以从单个队列中获得多个绑定键到交换。

简单的例子。X 是直接交换。B有黑色装订键，C有1个黑色装订键和1个白色装订键。P 发送带有黑色或白色路由键的消息。如果它是黑色的，那么 B 和 C 都会收到消息，如果它是白色的，那么只有 C 会收到它。

# javascript - 如何在点击时重新加载 iframe？

> ID：12686870
> 
> 赞同：2
> 
> 时间：2012-10-02T08:28:36.393
> 
> 标签：javascript, jquery, dom

> **可能重复：**
> [使用 jQuery 重新加载 iframe](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery)

如何`<iframe>`在点击事件上重新加载？

我试过这个，但它不工作：

```
jQuery("#link").click(function(){
   jQuery('#iframeID')[0].reload();
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T08:31:09.363

像这样

```
document.getElementById('iframeID').contentWindow.location.reload(); 
```

或通过

```
document.getElementById('iframeID').src = document.getElementById('iframeID').src; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:33:16.073

```
 $("#reload").click(function() {
        jQuery.each($("iframe"), function() {
            $(this).attr({
                src: $(this).attr("src")
            });
        });
        return false;
    }); 
```

每次`id=reload`点击链接时，上面的代码都会重新加载页面中的每个 iframe

感谢@Haim Evgi

或者你也可以这样做

```
$('iframe').each(function() {
  this.contentWindow.location.reload(true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:32:00.427

你可以这样做：

```
$("#iframe").attr('src', ($('#iframe').attr('src')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T08:37:37.270

```
var iframe = document.getElementById('ID');

iframe.src = iframe.src; 
```

# prism - 如何在 Spring.net 中使用 Prism

> ID：12686874
> 
> 赞同：3
> 
> 时间：2012-10-02T08:29:15.010
> 
> 标签：prism, spring.net

我目前正在尝试完成[本教程](http://blogs.infosupport.com/using-spring-net-as-ioc-container-for-composite-wpf/)以使 Prism 与 Spring.net 一起使用。

通过 NuGet（或手动引用程序集）引用 Prism4 和 Spring.Net 后，设置引导程序并运行应用程序后，我得到一个“文件或程序集”系统，版本 = 1.0.3300.0，文化 = 中性，...” FileNotFoundException .

我在单独的项目中成功地使用了 Prism 和 Spring.Net。上述异常仅发生在引用 Prism AND Spring.net 的项目中。Spring.net 甚至没有在代码或 app.config 中使用。搜索各种站点，我找不到有关版本问题或类似问题的任何信息。

```
namespace PrismSpringSandbox {
    /// <summary>
    /// Interaktionslogik für "App.xaml"
    /// </summary>
    public partial class App : Application {
        protected override void OnStartup(StartupEventArgs e) {
            base.OnStartup(e);
            Bootstrapper bootstrapper = new Bootstrapper();
            bootstrapper.Run();
        }
    }
} 
```

异常发生在“bootstrapper.Run()”上。

```
namespace HelloWorld {
    public class Bootstrapper : UnityBootstrapper {
        protected override DependencyObject CreateShell() {
            Shell1 shell = new Shell1();
            shell.Activate();
            RegionManager.UpdateRegions();
            shell.Show();

            return shell;
        }

        protected override IModuleCatalog CreateModuleCatalog() {

            DirectoryModuleCatalog catalog = new DirectoryModuleCatalog{ModulePath = @".\"};

            //ModuleCatalog catalog =
            //    new     ModuleCatalog().AddModule(typeof(HelloWorldModule.HelloWorldModule)).AddModule(
            //        typeof(SecondaryModule.SecondaryModule));

            return catalog;
        }
    }
} 
```

当尝试将当前的 Prism 与当前的 Spring.Net 版本一起使用时，也许有人知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:58:41.267

好的，我知道了！

问题是在同时引用 spring.net 时引用了统一。

# jsf-2 - Primefaces DataExporter 仅打印最后一列

> ID：12686876
> 
> 赞同：0
> 
> 时间：2012-10-02T08:29:21.690
> 
> 标签：jsf-2, primefaces

出于某种原因，当我使用 DataExporter 时，它只打印出最后一列。如果我排除该列，那么它只会输出空数据。这对于 PDF 和 Excel 都是一样的。

我已经包含了 poi 3.7 和 itext 2.1.7。请帮忙！！！

```
 <p:toolbar>  
                <p:toolbarGroup align="left">

                    <h:panelGrid columns="8" cellpadding="5" >
                        <h:outputText value="Log Type:" />
                        <p:selectOneMenu  id="logTypeSelectMessages" value="#{transactionLogBean.mlLogType}" style="width:200px" >  
                            <f:selectItem itemLabel="Select Log Type" itemValue="" /> 
                            <f:selectItem itemLabel="All" itemValue="All" />
                            <f:selectItem itemLabel="Message" itemValue="MESSAGE"  />  
                            <f:selectItem itemLabel="Debug" itemValue="DEBUG" />  
                        </p:selectOneMenu> 

                        <h:outputText value="Message Type:" />
                        <p:selectOneMenu id="reqTypeSelectMessages" value="#{transactionLogBean.reqType}" style="width:200px" > 
                            <f:selectItem itemLabel="Select Log Type" itemValue="" /> 
                            <f:selectItem itemLabel="All" itemValue="All" />
                            <f:selectItem itemLabel="Ext Response" itemValue="EXTRES"  />  
                            <f:selectItem itemLabel="Ext Request" itemValue="EXTREQ" />  
                            <f:selectItem itemLabel="Int Response" itemValue="INTRES" />
                            <f:selectItem itemLabel="Int Request" itemValue="INTREQ" />
                        </p:selectOneMenu>
                        <p:commandButton id="refreshBtnMsgLogs" value="Refresh" action="#{transactionLogBean.refreshMessageLogData}" 
                                         update=":transactionLogForm:tabViewGrids:messageTable" ajax="true" />

                    </h:panelGrid>                                        

                </p:toolbarGroup>

                <p:toolbarGroup align="right">

                    <h:panelGrid columns="2" cellpadding="8" >                    
                        <h:commandLink>  
                            <p:graphicImage value="../resources/excel24.png" />  
                            <p:dataExporter type="xls" target="messageTable" fileName="Message Logs" />  
                        </h:commandLink>  
                        <h:commandLink>  
                            <p:graphicImage value="../resources/pdf24-2.png" />  
                            <p:dataExporter type="pdf" target="messageTable" fileName="Message Logs" />  
                        </h:commandLink>                             

                    </h:panelGrid>                                        

                </p:toolbarGroup>

            </p:toolbar> 

            <p:spacer width="10" height="10" /> 

            <p:dataTable id="messageTable" value="#{transactionLogBean.mlList}" 
                         var="m" widgetVar="msgTable" rowKey="#{m.recID}" 
                         selectionMode="single" selection="#{transactionLogBean.selectedMessage}" 
                         paginator="true" rows="20" style="font-size:14px" 
                         rowStyleClass="#{m.rowColour}" >

                <p:ajax event="rowSelect" update=":transactionLogForm:msg"
                        oncomplete="logDialog.show()" />  

                <p:column style="text-align: left; width: 290px">
                    <f:facet name="header">
                        Log Id
                    </f:facet>
                    #{m.logID}
                </p:column>

                <p:column style="text-align: left; width: 80px" sortBy="#{m.logType}">
                    <f:facet name="header">
                        Log Type
                    </f:facet>
                    #{m.logType}
                </p:column>

                <p:column  style="text-align: left; width: 160px" sortBy="#{m.dateTime}">
                    <f:facet name="header">
                        DateTime
                    </f:facet>
                    #{m.dateTime}
                </p:column>

                <p:column  style="text-align: left; width: 105px" sortBy="#{m.requestType}">
                    <f:facet name="header">
                        Request Type
                    </f:facet>
                    #{m.requestType}
                </p:column>

                <p:column  style="text-align: left; width: 110px" sortBy="#{m.extIPAddress}">
                    <f:facet name="header">
                        Ext IP Address
                    </f:facet>
                    #{m.extIPAddress}
                </p:column>
                <p:column  style="text-align: left; width: 130px" sortBy="#{m.serverIPAddress}">
                    <f:facet name="header">
                        Server IP Address
                    </f:facet>
                    #{m.serverIPAddress}
                </p:column>

                <p:column  style="text-align: left; width: 80px" sortBy="#{m.userID}">
                    <f:facet name="header">
                        User ID
                    </f:facet>
                    #{m.userID}
                </p:column>

                <p:column  style="text-align: left; width: 80px" sortBy="#{m.retailID}">
                    <f:facet name="header">
                        Retail ID
                    </f:facet>
                    #{m.retailID}
                </p:column>

                <p:column  style="text-align: left; width: 80px" sortBy="#{m.clientID}">
                    <f:facet name="header">
                        Client ID
                    </f:facet>
                    #{m.clientID}
                </p:column>

                <p:column  style="text-align: left; width: 110px" sortBy="#{m.application}">
                    <f:facet name="header">
                        Application
                    </f:facet>
                    #{m.application}
                </p:column>

                <p:column headerText="Log Message" style="white-space:nowrap; text-overflow: ellipsis; overflow: hidden; text-align: left" exportable="false">  
                    <div style="overflow:hidden; width:300px; float:left; ">
                        <h:outputText value="#{m.logMessage}"/>  
                    </div>                    
                </p:column>                            

            </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:52:46.447

尝试使用`<h:outputText value="#{m.application}"`而不是`#{m.application}`（将显示的数据放在`h:outputText value`属性内）

# regex - 从期望外壳中获取值并在外部使用它

> ID：12686880
> 
> 赞同：0
> 
> 时间：2012-10-02T08:29:25.207
> 
> 标签：regex, expect, proc

我在一个过程中使用以下代码来获取 eth1 的 IP 地址并将其用作网关。我想要的另一件事是在用户范围之外使用这个变量（IP 地址）。

```
global my_gw_ip_address
expect "# "
send "ifconfig eth1 | grep 'inet addr:' | cut -d: -f2 | awk '{print \$1}' > prod_ip_base.txt\r"
expect "# "
send " my_internal_gw=`cat prod_ip_base.txt`\r"
expect "# "
send " echo \$my_internal_gw\r"
expect "root@cnode-pp81:~ "
set checking_buffer_out $expect_out(buffer)
regexp {(?:\d+\.){3}\d+} $checking_buffer_out my_gw_ip_address
puts "internal gw: $my_gw_ip_address\n" 
```

该函数的输出是：
1\. 该行`send " echo \$my_internal_gw\r"`返回正确的 IP 地址 192.168.138.50
2\. 该行`puts "internal gw: $my_gw_ip_address\n"`返回 internal gw: 0。

谁能告诉我我做错了什么？为什么变量 $my_gw_ip_address 为 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:56:54.580

我解决问题。我应该在以下命令之间添加 sleep 1 。

改变

```
set checking_buffer_out $expect_out(buffer)
regexp {(?:\d+\.){3}\d+} $checking_buffer_out my_gw_ip_address 
```

成为：

```
set checking_buffer_out $expect_out(buffer)
sleep 1 
regexp {(?:\d+\.){3}\d+} $checking_buffer_out my_gw_ip_address 
```

阿米格尔

# android - 测试是否启用了后台数据和数据包数据

> ID：12686899
> 
> 赞同：2
> 
> 时间：2012-10-02T08:30:46.197
> 
> 标签：android, networking

我希望检测用户是否同时启用了后台数据（设置->帐户和同步->后台数据）和数据包数据（设置->无线和网络->移动网络->使用数据包数据），以便通知用户如何启用它们。

此[链接](https://stackoverflow.com/questions/4494483/how-to-check-if-background-data-is-enabled-on-the-android)说明如何测试背景数据，但已被弃用。该建议说使用 getActiveNetworkInfo() 但这可能会返回 WIFI 连接，因此如果启用了后台数据，则不会显示。

我还没有找到任何关于如何检测数据包数据是否启用的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T21:44:14.653

我有这个完全相同的问题，我必须开始赏金才能得到答案。花费了我三分之一的声誉，但非常值得。

```
boolean mobileDataEnabled = false; // Assume disabled
        ConnectivityManager cm1 = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        try {
            Class cmClass = Class.forName(cm1.getClass().getName());
            Method method = cmClass.getDeclaredMethod("getMobileDataEnabled");
            method.setAccessible(true); // Make the method callable
            // get the setting for "mobile data"
            mobileDataEnabled = (Boolean)method.invoke(cm1);
        } catch (Exception e) {
            // Some problem accessible private API
            // TODO do whatever error handling you want here
        } 
```

正如我所说，我不能声称知道这一点，我的问题得到了[https://stackoverflow.com/users/769265/david-wasser的回答](https://stackoverflow.com/users/769265/david-wasser)

但这让我付出了代价，所以如果你想接受这个作为答案，我可以开始让我的一些声望点回来！:)

# mysql - 将大型 SQL 转储上传到 Xeround MySQL 数据库

> ID：12686903
> 
> 赞同：0
> 
> 时间：2012-10-02T08:31:05.550
> 
> 标签：mysql, xeround

我的 MySQL 数据库有一个 SQL 哑巴。它大约 33MB，压缩 zip 存档后大约为 6MB。仍然太大，无法上传。Xeround 的 phpMyAdmin 界面不允许我导入这个大文件。

我应该如何进行？

我在 Mac 上，我可以使用哪些命令行工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:41:54.897

您可以使用[http://xeround.com/developers/how-to-import-mysql-database-to-xeround-cloud-database/](http://xeround.com/developers/how-to-import-mysql-database-to-xeround-cloud-database/)中描述的过程来并行化更大数据库大小的数据导入。希望这可以帮助！

# excel-2010 - 获取基于月份的总值

> ID：12686910
> 
> 赞同：0
> 
> 时间：2012-10-02T08:31:23.717
> 
> 标签：excel-2010

我正试图以这样的月份为基础获得总价值。

```
=SUMPRODUCT(MONTH($A$2:$A$10)=MONTH(C2);($B$2:$B$10))
have even try
=SUMPRODUCT(--(TEXT($A$1:$A$10,"yyyy-mm")=C2);$B$1:$B$10) 
```

但我得到的只是零。

这是一些示例

```
Column A         b            c           d              f       g

2012-10-02       45           2012-10     45             2012    229
2012-09-05       45           2012-09     100            ect.
2012-09-03       55           2012-08     84                      
2012-08-25       84           ect.
etc.
ect. 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:18:33.397

尝试：

```
=SUMPRODUCT(--(MONTH($A$2:$A$10)=MONTH(C2));($B$2:$B$10)) 
```

但请确保 C 是日期列 (2012-10-xx)。ES 2012-10-01。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:54:50.410

使用 Excel 2010，您拥有`SUMIFS`.

我会将公式重写为：

```
=SUMIFS(B:B;A:A;">="&DATE(YEAR(C2),MONTH(C2),1);A:A;"<"&DATE(YEAR(C2),MONTH(C2)+1,1)) 
```

翻译为：

如果列 A 的值等于或大于 C2 中的当月 1 日**且**小于下月 1 日，则对列 B 求和

查看**F**列，当年的相同公式为：

```
=SUMIFS(B:B;A:A;">="&DATE(E2,1,1);A:A;"<"&DATE(E2+1,1,1)) 
```

# f# - 通过模式匹配比较 F# 可区分联合实例

> ID：12686911
> 
> 赞同：5
> 
> 时间：2012-10-02T08:31:28.967
> 
> 标签：f#, pattern-matching, discriminated-union

首先，为糟糕的标题道歉——我对 F# 的理解不足以更好地描述这个问题。

考虑这个简单的 DU：

```
type Money =
    | USD of decimal
    | GBP of decimal
    | EUR of decimal
    static member (+) (first: Money, second: Money) =
        match first, second with 
        | USD(x), USD(y) -> USD(x + y)
        | GBP(x), GBP(y) -> GBP(x + y)
        | EUR(x), EUR(y) -> EUR(x + y)
        | _ -> failwith "Different currencies" 
```

我用不同的货币表示货币，并重载 (+) 运算符，以便我可以安全地执行 Money + Money。但是，如果我有很多货币，那么匹配语句将变得乏味。有没有办法表达类似的东西：

```
match first, second with 
| _(x), _(y) -> _(x + y) 
```

还是有不同的方法可以达到相同的结果？由于[此处](https://stackoverflow.com/questions/4140247/f-can-units-of-measure-be-bound-dynamically-at-runtime)描述的限制，我已经考虑并放弃了计量单位。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T08:56:40.860

这对你有用吗？

```
type Kind = | USD | GBP | EUR

type Money = 
    | Money of Kind * decimal 
    static member (+) (first: Money, second: Money) = 
        match first, second with  
        | Money(k1,x), Money(k2,y) when k1=k2 -> Money(k1, x + y) 
        | _ -> failwith "Different currencies" 
```

# android - Android：游戏循环暂停/恢复问题

> ID：12686912
> 
> 赞同：3
> 
> 时间：2012-10-02T08:31:28.787
> 
> 标签：android, multithreading, surfaceview, game-engine, android-lifecycle

我可以通过让我的游戏线程（与surfaceview保持/同步）等待/通知所有来暂停/恢复我的游戏。使用游戏中的暂停按钮，这一切都运行良好。

但是，当我单击主页/返回按钮时，我可以暂停我的游戏，但是当我通过单击其图标恢复我的游戏时，我收到无响应的游戏屏幕返回给我。

我已将日志放在 OnResume() 方法上，但 LogCat 中没有打印任何内容！如果我点击我的游戏屏幕，我会在我的游戏活动中看到“强制关闭”或“等待”的错误对话框。

为什么我得到这个无响应的屏幕，好像我的应用程序在暂停后挂起？如何以与游戏中暂停/恢复按钮相同的方式处理物理按钮？

这是我对操作的 logcat 视图。你可以看到 onResume sop 没有像 onPause 一样被打印出来。

![LogCat 视图](../Images/98af846ed8f94443a32132aa0cc490d2.png)

编辑：由我的暂停/恢复按钮和 onPause/onResume 函数调用的代码，其中“this”是线程类本身

```
protected void setPause(){
        synchronized (this) {
            isPaused = true;
                }
    }

    protected void setResume(){
        synchronized (this) {
            isPaused = false;
            this.notifyAll();
        }
    } 
```

游戏循环代码：

```
synchronized (this) {
            while (running) {
                if (isPaused) {
                    try {
                        this.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } else {
                    Canvas c = null;

                    try {
                        c = view.getHolder().lockCanvas();
                        synchronized (view.getHolder()) {
                            view.onDraw(c);
                        }
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } finally {
                        if (c != null) {
                            view.getHolder().unlockCanvasAndPost(c);
                        }
                    }
                    sleepTime = ticksPS
                            - (System.currentTimeMillis() - startTime);
                    try {
                        if (sleepTime > 0)
                            sleep(sleepTime);
                        else
                            sleep(10);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        } 
```

这就是我从表面视图中调用它的方式：

```
public void surfaceCreated(SurfaceHolder holder) {

                // start the game loop
                System.out.println("Starting Game Loop @@@@@@@@@");
                if(isPaused){
                    System.out.println("GamePaused");
                    gameLoopThread.setResume();
                }
                else{
                    System.out.println("Game Starting");
                    gameLoopThread.setRunning(true);
                }
                gameLoopThread.start();

            } 
```

编辑2：如果我使用暂停按钮暂停我的游戏并让我的手机自动锁定......恢复后我可以正常玩游戏而没有任何问题。根据日志，我看到在这种情况下不会调用表面破坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:05:21.887

之后`onResume`，`SurfaceView`再次创建您的，但它丢失了之前拥有的所有数据（所需的所有信息`onDraw`）。您必须将数据保存在其中`surfaceDestroyed`或之前，然后将其重新加载到`onCreate`您的表面视图中

# c# - 数据未出现在下拉列表中

> ID：12686913
> 
> 赞同：0
> 
> 时间：2012-10-02T08:31:34.043
> 
> 标签：c#, asp.net

现在我仔细检查了这个，我发现它只是定位不好，但现在我想出了数据没有添加到框中的错误，它只是在页面上显示空白，甚至没有“空”文本出现在其中，但是在我调试并点击添加部分时正在显示数据

```
public class BrandDropDownList : DropDownList
{

    protected override void OnLoad(EventArgs e)
    {
        BrandListRetrieve();
        base.OnLoad(e);
    }

    public void BrandListRetrieve()
    {
        var factory = new BrandFactory();
        var customBool1State = factory.ByCustomBoolean1(true, CoreHttpModule.Session);

        if (customBool1State != null)
        {
            var brandDropDown = CoreHttpModule.Session.CreateCriteria(typeof(Brand)).List<Brand>();
            DropDownList brandDropDownList = new DropDownList();

            foreach (Brand brand in brandDropDown)
            {
                brandDropDownList.Items.Add(brand.Name);
            }

            if (brandDropDownList.Items.Count < 0)
            {
                brandDropDownList.Items.Insert(0, new ListItem("Hello World", "Hello World"));
            }

            brandDropDownList.DataBind();
        }
    }
} 
```

ASP.NET

```
<needlesports:BrandDropDownList runat="server" Visible="true"  /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:57:35.303

你不需要这条线；

```
 DropDownList brandDropDownList = new DropDownList(); 
```

无需在 a 中创建 a 的新`DropDownList`实例`DropDownList`。

你应该这样做；

```
this.Items.Add(brand.Name); 
```

# imagemagick - 将 gif 添加到更大的背景

> ID：12686917
> 
> 赞同：1
> 
> 时间：2012-10-02T08:31:38.360
> 
> 标签：imagemagick, imagemagick-convert

我正在使用 imagemagick 来调整上传文件的大小，但是在处理它们时，我想向用户显示一个旋转的 gif 轮，缩略图通常是在哪里。我提供大约 7 种大小的拇指，并希望轮子在中间保持 32x32 大小，这很简单。

我需要知道的是，我可以在保留动画的同时做到以上几点吗

例子：

这个图片： ![这个图片](../Images/1e1d7e829eb7f2f1c9a528e43ab27815.png)

从这个尺寸开始 ![这个尺寸](../Images/a18933ef48584babdd89d6f1b7d1f65d.png)

带动画

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:46:33.620

看看这个小提琴，它可能包含你想要的：http: [//jsfiddle.net/TGdFB/1/](http://jsfiddle.net/TGdFB/1/)

它使用 jQuery，但应该很容易适应......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:16:34.157

在无法通过 imagemagick 找到自动执行此操作的方法后，最终由 Photoshop 手动执行此操作。我找到了“coalesce”标志，但没有别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:52:14.060

php 女巫中有一个解决方案，我用它来为 gif 动画图像加水印......

```
watermarkpath = 'path to wathermarkimage.jpg|gif|png';
$imagepath= 'path to the image';     
$watermark = new Imagick($watermarkpath);
 $GIF = new Imagick();
 $GIF->setFormat("gif");

$animation = new Imagick($imagepath);
foreach ($animation as $frame) {

    $iWidth = $frame->getImageWidth();
    $iHeight = $frame->getImageHeight();
    $wWidth = $watermark->getImageWidth();
    $wHeight = $watermark->getImageHeight();

    if ($iHeight < $wHeight || $iWidth < $wWidth) {
        // resize the watermark
        $watermark->scaleImage($iWidth, $iHeight);

        // get new size
        $wWidth = $watermark->getImageWidth();
        $wHeight = $watermark->getImageHeight();
    }

    $bgframe = new Imagick();
    $bgframe->newImage(($iWidth), ($iHeight + 80), new ImagickPixel('Black'));
    $bgframe->setImageDelay($frame->getImageDelay());

    $x = ($iWidth) - $wWidth - 5;
    $y = ($iHeight + 80) - $wHeight - 5;

    $bgframe->compositeImage($frame, imagick::COMPOSITE_DEFAULT, 0, 0);
     $bgframe->flattenImages();
    $bgframe->compositeImage($watermark, imagick::COMPOSITE_OVER, $x, $y);
     $bgframe->flattenImages();
    $GIF->addImage($bgframe);
}

$GIF->writeimages($imagepath,true); 
```

# android - Android - 在 Activity onStop 之后是否调用 onServiceDisconnected？

> ID：12686923
> 
> 赞同：1
> 
> 时间：2012-10-02T08:32:31.093
> 
> 标签：android, android-service

我有一个远程服务，我想使用该服务检查`onPrepareOptionsMenu`. 但有时当我从其他活动回来时，我会遇到“binder null”异常。我将 binder 设置为 null in `onServiceDisconnected`。

我的问题：

1.  是否`onServiceDisconnected`在活动 onStop 后调用？
2.  `bindService`用in`onStart`代替更好`onCreate`吗？
3.  您能否简单解释一下本地服务和远程服务的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:55:10.770

1)`onServiceDisconnected()`仅当服务意外终止时才会调用，例如托管服务的进程崩溃时。当您自己解除与服务的绑定时，它不会被调用。从[文档](http://developer.android.com/reference/android/content/ServiceConnection.html#onServiceDisconnected%28android.content.ComponentName%29)中：

> 当与服务的连接丢失时调用。这通常发生在托管服务的进程崩溃或被终止时。这不会删除 ServiceConnection 本身——这个与服务的绑定将保持活动状态，并且当服务下次运行时，您将收到对 onServiceConnected(ComponentName, IBinder) 的调用。

2）一般情况下，如果您在 Activity 停止时不需要连接到服务，那么是的，绑定`onStart()`和取消绑定`onStop()`是正确的方法。这里的想法是当你的活动在后台时你不会浪费资源。但是，[绑定服务的文档](http://developer.android.com/guide/components/bound-services.html)指出，在某些情况下`onCreate()`绑定和取消绑定`onDestroy()`也是可以的。

3）本地服务意味着服务与消费者处于同一进程中。远程服务是处于不同进程中的服务。

# wpf - 如何在 ListView 的每一列上添加过滤器（行编辑）？

> ID：12686924
> 
> 赞同：0
> 
> 时间：2012-10-02T08:32:33.577
> 
> 标签：wpf

我想在 ListView 的每一列上添加过滤器。有人知道怎么做吗？

# symfony - 在 Symfony 2.1 抽象类型中访问当前用户

> ID：12686926
> 
> 赞同：3
> 
> 时间：2012-10-02T08:32:53.087
> 
> 标签：symfony, symfony-2.1

我对如何在 Symfony 2 中访问当前用户感到有点困惑。目前我正在尝试根据当前用户的角色显示表单的变体（AbstractType）。

[Gremo](https://stackoverflow.com/users/220180/gremo)已经回答了一个类似的问题：[Access current logged in user in EntityRepository](https://stackoverflow.com/questions/11709246/access-currently-logged-in-user-in-entityrepository)

我的问题是：是否有一种 Symfony 2 本地方式可以在不使用[JMSDiExtraBundle](http://jmsyst.com/de/bundles/JMSDiExtraBundle)的情况下访问我的 AbstractType 类中的用户？谢谢！

这是我当前的代码：

```
namespace Acme\DemoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class Comment extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {

        //somehow access the current user here

        $builder
            ->add('name')
            ->add('comment_text')
            ->add('comment_email')

        // Add more fields depending on user role

                ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\DemoBundle\Entity\Comment'
        ));
    }

    public function getName()
    {
        return 'acme_demobundle_comment';
    }
} 
```

**编辑：**我正在寻找当前登录的用户（security.context）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T13:17:06.883

进入你的控制器，做这样的事情

```
$form = $this->createForm(new CommentType($this->get('security.context')
                                           ->isGranted('ROLE_ADMIN')), $comment); 
```

`ROLE_ADMIN`您要区分的角色在哪里。

现在，`Type`您必须通过以下方式将其检索到

```
private $isGranted;

public function __construct($roleFlag)
{
  $this->isGranted = $roleFlag;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
  $builder
    ->add('name')
    ->add('comment_text')
    ->add('comment_email');

    if($this->isGranted) {
      $builder
        ->add(....)
        ->add(....)
        [....]
        ->add(....);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T06:19:06.290

JMSDiExtraBundle 提供（除其他外）注释和快捷方式以定义服务，例如表单类型和原则侦听器，这只是常规服务，但**具有特定标签**。如果我没记错的话，该捆绑包包含在标准 Symfony 2.1 版本中，那么为什么不使用它呢？

无论如何要注入用户“旧方式”，例如使用构造函数注入：

```
class Comment extends AbstractType
{
    private $context;

    public function __construct(SecurityContext $context)
    {
        $this->context = $context;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $loggedUser = $this->context->getToken()->getUser();

        /* ... */
    }
} 
```

并将其定义为带有`form.type`标签的服务：

```
<service id="form.type.comment" class="Acme\DemoBundle\Form\Comment">
    <argument type="service" id="security.context" />
    <tag name="form.type" alias="comment" />
</service> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:41:59.487

为什么不将用户作为 ConstructorArgument 注入：

```
$form = $this->createForm(new CommentType($user), $comment); 
```

我是 Symphony 的新手，所以我希望这不是完全错误的 :-S

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-02T11:37:33.473

如果 UserObject 是您正在处理表单的评论模型的一部分，您将能够通过以下方式访问它：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $user = $builder->getData()->getUser();
    .... 
```

# typescript - 如何在 TypeScript 中断言 HTMLElement 的类型？

> ID：12686927
> 
> 赞同：221
> 
> 时间：2012-10-02T08:33:05.020
> 
> 标签：typescript, type-assertion, typescript-types, typescript-lib-dom

我正在尝试这样做：

```
var script:HTMLScriptElement = document.getElementsByName("script")[0];
alert(script.type); 
```

但它给了我一个错误：

```
Cannot convert 'Node' to 'HTMLScriptElement': Type 'Node' is missing property 'defer' from type 'HTMLScriptElement'
(elementName: string) => NodeList 
```

除非我将其转换为正确的类型，否则我无法访问脚本元素的“类型”成员，但我不知道该怎么做。我搜索了文档和示例，但找不到任何东西。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-10-02T08:47:36.087

TypeScript 使用 '<>' 来包围强制转换，所以上面变成：

```
var script = <HTMLScriptElement>document.getElementsByName("script")[0]; 
```

但是，不幸的是，您不能这样做：

```
var script = (<HTMLScriptElement[]>document.getElementsByName(id))[0]; 
```

你得到错误

```
Cannot convert 'NodeList' to 'HTMLScriptElement[]' 
```

但你可以这样做：

```
(<HTMLScriptElement[]><any>document.getElementsByName(id))[0]; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-01-15T23:48:40.120

从 TypeScript 0.9 开始，该`lib.d.ts`文件使用专门的重载签名来返回正确的类型以调用`getElementsByTagName`.

这意味着您不再需要使用类型断言来更改类型：

```
// No type assertions needed
var script: HTMLScriptElement = document.getElementsByTagName('script')[0];
alert(script.type); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-04-20T17:18:53.560

不要键入 cast。绝不。使用类型保护：

```
const e = document.getElementsByName("script")[0];
if (!(e instanceof HTMLScriptElement)) 
  throw new Error(`Expected e to be an HTMLScriptElement, was ${e && e.constructor && e.constructor.name || e}`);
// locally TypeScript now types e as an HTMLScriptElement, same as if you casted it. 
```

让编译器为您完成工作，并在您的假设错误时得到错误。

在这种情况下，它可能看起来有点矫枉过正，但如果您稍后再回来更改选择器，它将对您有很大帮助，例如添加 dom 中缺少的类。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-10-02T19:22:27.400

您始终可以使用以下方法破解类型系统：

```
var script = (<HTMLScriptElement[]><any>document.getElementsByName(id))[0]; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-09-25T09:58:43.443

*我们可以使用显式的返回类型*键入我们的变量：

```
const script: HTMLScriptElement = document.getElementsByName(id).item(0); 
```

或断言***为***（*TSX*需要）：

```
const script = document.getElementsByName(id).item(0) as HTMLScriptElement; 
```

*或者在更简单的情况下，使用尖括号*语法断言。

* * *

> 类型断言类似于其他语言中的类型转换，但不执行数据的特殊检查或重组。它没有运行时影响，并且纯粹由编译器使用。

文档：

[TypeScript - 基本类型 - 类型断言](https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-09-25T17:37:46.147

最后：

*   一个实际的`Array`对象（不是`NodeList`装扮成的`Array`）
*   保证只包含`HTMLElements`而不是`Node`强制转换为`HTMLElement`s 的列表
*   做正确的事的温暖模糊感觉

试试这个：

```
let nodeList : NodeList = document.getElementsByTagName('script');
let elementList : Array<HTMLElement> = [];

if (nodeList) {
    for (let i = 0; i < nodeList.length; i++) {
        let node : Node = nodeList[i];

        // Make sure it's really an Element
        if (node.nodeType == Node.ELEMENT_NODE) {
            elementList.push(node as HTMLElement);
        }
    }
} 
```

享受。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-10-02T19:19:03.567

只是为了澄清，这是正确的。

> 无法将“NodeList”转换为“HTMLScriptElement[]”

因为 a`NodeList`不是一个实际的数组（例如，它不包含`.forEach`, `.slice`,`.push`等...）。

因此，如果它确实`HTMLScriptElement[]`在类型系统中转换，如果您尝试`Array.prototype`在编译时调用它的成员，您将不会收到类型错误，但它会在运行时失败。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-08-11T02:40:36.980

与其使用类型断言、类型保护或`any`解决该问题，更优雅的解决方案是使用*泛型*来指示您选择的元素的类型。

不幸的是，`getElementsByName`不是通用的，而是`querySelector`和`querySelectorAll`是。（`querySelector`并且`querySelectorAll`也更加灵活，因此在大多数情况下可能更可取。）

如果您将标签名称单独传递给`querySelector`or `querySelectorAll`，由于以下行，它将自动正确输入`lib.dom.d.ts`：

```
querySelector<K extends keyof HTMLElementTagNameMap>(selectors: K): HTMLElementTagNameMap[K] | null; 
```

例如，要选择页面上的第一个脚本标签，就像您的问题一样，您可以执行以下操作：

```
const script = document.querySelector('script')!; 
```

就是这样——TypeScript 现在可以推断出它`script`现在是一个`HTMLScriptElement`.

`querySelector`当您需要选择单个元素时使用。如果您需要选择多个元素，请使用`querySelectorAll`. 例如：

```
document.querySelectorAll('script') 
```

结果是`NodeListOf<HTMLScriptElement>`.

如果您需要更复杂的选择器，您可以传递一个类型参数来指示您要选择的元素的类型。例如：

```
const ageInput = document.querySelector<HTMLInputElement>('form input[name="age"]')!; 
```

结果`ageInput`被键入为`HTMLInputElement`.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-10-05T08:37:09.460

这似乎解决了问题，使用`[index: TYPE]`数组访问类型，干杯。

```
interface ScriptNodeList extends NodeList {
    [index: number]: HTMLScriptElement;
}

var script = ( <ScriptNodeList>document.getElementsByName('foo') )[0]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-08T20:32:58.177

如果 TypeScript 将 HTMLCollection 而不是 NodeList 定义为返回类型，则可以在声明文件 (lib.d.ts) 中解决。

DOM4 也将其指定为正确的返回类型，但旧的 DOM 规范不太清楚。

另请参阅[http://typescript.codeplex.com/workitem/252](http://typescript.codeplex.com/workitem/252)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-25T18:35:18.077

我也会推荐sitepen指南

[https://www.sitepen.com/blog/2013/12/31/definitive-guide-to-typescript/](https://www.sitepen.com/blog/2013/12/31/definitive-guide-to-typescript/)（见下文）和 [https://www.sitepen.com/blog/2014/08/22/advanced -typescript-concepts-classes-types/](https://www.sitepen.com/blog/2014/08/22/advanced-typescript-concepts-classes-types/)

> TypeScript 还允许您在将确切的字符串作为参数提供给函数时指定不同的返回类型。例如，TypeScript 对 DOM 的 createElement 方法的环境声明如下所示：

```
createElement(tagName: 'a'): HTMLAnchorElement;
createElement(tagName: 'abbr'): HTMLElement;
createElement(tagName: 'address'): HTMLElement;
createElement(tagName: 'area'): HTMLAreaElement;
// ... etc.
createElement(tagName: string): HTMLElement; 
```

> 这意味着，在 TypeScript 中，当您调用例如 document.createElement('video') 时，TypeScript 知道返回值是一个 HTMLVideoElement，并且能够确保您与 DOM 视频 API 正确交互，而无需键入 assert。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-15T23:42:06.907

作为[CertainPerformance](https://stackoverflow.com/users/9515207/certainperformance)[答案](https://stackoverflow.com/a/63350719/11407695)的扩展，如果您利用[声明合并](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)来扩充标准定义库的`Document`接口，则可以为`getElementsByName`方法（或任何其他方法）添加一个通用覆盖，并将参数默认设置`HTMLElement`为模仿未显式提供类型参数时的非泛型版本：

```
interface Document
  extends Node,
    DocumentAndElementEventHandlers,
    DocumentOrShadowRoot,
    GlobalEventHandlers,
    NonElementParentNode,
    ParentNode,
    XPathEvaluatorBase {
  getElementsByName<T extends HTMLElement>(elementName: string) : NodeListOf<T>;
} 
```

然后在用户代码中，您可以显式传递所需的类型：

```
const scripts = document.getElementsByName<HTMLScriptElement>("name"); //NodeListOf<HTMLScriptElement> 
```

[操场](https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgCIHsEFcC2FwBQyyEAHpCACYDOyAcupRADRHFqa75gCCVAogBsIecPwBu3ABJwqwqNVbsO2UWADyUAMoALOJXQB3AErp0YJewDig9ACM4gidNmV5itsQYghI7gAU4KG4GJktiQODwUJZPZAANQLAdCUcsODB0KAAhOGoUAG82AHMIMF81amyATzo4PAAeABUScnwaZCkmgFkAGQruAD4ACghhNTq8AC5kajAoUGKASmQZmN7gOfUYZsGAbgIAXwICBHQQOdmEBYAHMFoAXmQDVW4AOlLy8e4q2vqIBpdPpaa7AO4DcAjABEIH%20UKWe2QAHoketNhodkDeiDbl8-JCgA)

* * *

请注意，您需要重新指定`extends`列表，因为只能合并相同的声明。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-12-19T17:09:31.887

由于它是 a `NodeList`，而不是`Array`，因此您不应该真正使用括号或强制转换为`Array`. 获取第一个节点的属性方式是：

```
document.getElementsByName(id).item(0) 
```

你可以这样：

```
var script = <HTMLScriptElement> document.getElementsByName(id).item(0) 
```

或者，扩展`NodeList`：

```
interface HTMLScriptElementNodeList extends NodeList
{
    item(index: number): HTMLScriptElement;
}
var scripts = <HTMLScriptElementNodeList> document.getElementsByName('script'),
    script = scripts.item(0); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-02T13:36:56.517

```
var script = (<HTMLScriptElement[]><any>document.getElementsByName(id))[0]; 
```

# c# - .NET MessagingToolkit QRCode 编码问题

> ID：12686930
> 
> 赞同：1
> 
> 时间：2012-10-02T08:33:18.327
> 
> 标签：c#, .net, asp.net-mvc, qr-code

我在我的网站上使用 .NET MessagingToolkit.QRCode 库已经有一段时间了，以便在顶部生成带有自定义图像的 QR 码，直到现在我对这个库完全没有任何问题。

最近，由于系统的增长，我需要编码的数据变得越来越大，并且尝试在 QR 码中编码这些数据一直在 QRCodeEncoder 类的 Encode 方法中导致内部“索引超出范围”异常。

通过测试，我注意到此方法似乎接受的最大字符数为 86，任何大于此的字符都会引发异常。更改传入字符串的编码类型无济于事。

我确实注意到我使用的库版本已经过时，但是，更新到最新版本也没有解决问题。

有没有其他人在图书馆遇到过这个问题并找到了解决方案？或者，我可以使用另一个没有此类问题的库吗？

异常详情如下：

`2012-10-01 17:39:52,098 Error: System.IndexOutOfRangeException: Index was outside the bounds of the array. at MessagingToolkit.QRCode.Codec.QRCodeEncoder.divideDataBy8Bits(Int32[] data, SByte[] bits, Int32 maxDataCodewords) at MessagingToolkit.QRCode.Codec.QRCodeEncoder.calQrcode(Byte[] qrcodeData) at MessagingToolkit.QRCode.Codec.QRCodeEncoder.Encode(String content, Encoding encoding) at MessagingToolkit.QRCode.Codec.QRCodeEncoder.Encode(String content)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:18:36.250

在该库的官方页面上，有一个针对您的问题的解决方案的简短描述：http: [//platform.twit88.com/news/60](http://platform.twit88.com/news/60)。我不知道这是否能解决你的问题。我会找到库的源代码并通过它进行调试以查看错误原因。

嗯...在任何地方都找不到源代码。因此，请与作者联系并询问他们。

如果这不起作用，我会将库更改为其他内容。如果您愿意，我已经成功地将[QrCode.Net](http://qrcodenet.codeplex.com/)与 MVC 一起使用，并且有一些示例代码如何将其集成到 MVC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:25:29.270

我知道这篇文章有点旧，但我遇到了同样的问题，发现我的字符串 (") 中有一个非法字符，二维码无法识别。将其替换为常规引号（ " ）并且效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-24T07:19:35.153

我有同样的问题

```
QRCodeEncoder qrCE = new QRCodeEncoder();
qrCE.QRCodeEncodeMode = QRCodeEncoder.ENCODE_MODE.BYTE;
qrCE.QRCodeErrorCorrect = QRCodeEncoder.ERROR_CORRECTION.L;
qrCE.QRCodeVersion = 1;

picQRCode.Image = qrCE.Encode(memBarcodeDataForPrint.Text, System.Text.Encoding.UTF8); 
```

我改变了以下行

> qrCE.QRCodeVersion = 1;

像

> qrCE.QRCodeVersion = 0;

它解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T12:10:47.017

我遇到了同样的问题。但是我发现每次调用该`Encode`方法时创建一个新的编码器实例解决了这个问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-17T19:20:19.210

同样的问题，但是当将版本更改为 0 时它可以工作。

# c# - 移除 Response.Write 之前的 Html 标签

> ID：12686932
> 
> 赞同：0
> 
> 时间：2012-10-02T08:33:23.810
> 
> 标签：c#, asp.net, httpresponse

> **可能重复：**
> [代码块中的 Response.Write 输出出现在 html 之外](https://stackoverflow.com/questions/6931436/response-write-output-in-code-block-is-appearing-outside-html)

我有一行文本，这是由我正在`Response.Write`使用的 dll 内部编写的。

```
hello world

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>.... 
```

所以我想知道是否有一种方法可以覆盖它`Response.Write`，以便在`<html>`标签之前不写任何东西？

# magento - 致命错误：找不到类'Mage_Core_Helper_Cookie' magento

> ID：12686935
> 
> 赞同：1
> 
> 时间：2012-10-02T08:33:41.557
> 
> 标签：magento, themes

我在自己的 magento 网站上创建了一个主题，并将其上传到另一个 magento 网站，但是当我转到该网站的前端时，我得到了这个

致命错误：在第 516 行的 /home/winterwa/public_html/app/Mage.php 中找不到类 \\'Mage_Core_Helper_Cookie\\'

我搜索了一个解决方案并尝试了本主题中描述的这个：http: [//www.magentocommerce.com/boards/viewthread/280318/#t401019](http://www.magentocommerce.com/boards/viewthread/280318/#t401019)

（app/code/core/mage/core/helper 中的 cookie.php）但它没有帮助。

对此有任何建议/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:13:44.367

听起来两个不同的 Magento 安装正在运行不同版本的 Magento。有问题的文件仅在 1.7 版中添加到 Magento。我只能假设您已经全新安装了 1.7，并且您的主题基于默认/基本主题。因此，当主题被添加到旧版本的 Magento 时，它会尝试加载您尚未重载且基本模板中不存在的块/模板。

不幸的是，这不是最容易解决的问题。您将需要浏览布局/模板文件，删除添加块的引用或使用当前版本的 magento 不存在的帮助器。对于您提到的问题，您应该可以通过在模板文件中搜索 helper('cookie') 找到。

# android - 动态活动注册

> ID：12686936
> 
> 赞同：0
> 
> 时间：2012-10-02T08:33:43.040
> 
> 标签：android, dynamic, android-manifest, android-activity, dynamic-class-loaders

我有这个关于 Android 活动和 AndroidManifest.xml 的问题。当我使用 Java servlet 并想创建一个“基于模块”或类似于基于插件的服务器时出现了这个问题。这工作正常，我可以使用类似于以下的代码方法动态加载我想要的 servlet：[Dynamicly add a servlet to the servletConfig](https://stackoverflow.com/questions/1884310/dynamically-add-a-servlet-to-the-servletconfig)。servlet 在服务器启动期间被动态发现和映射。

这里的问题不是如何找到合适的活动，或者如何创建它们的新实例，或者如何启动它们，我已经弄清楚了那部分。我可以遍历我的包并找到适当的活动类，创建它们的新实例并将它们添加到列表中。

我一直在使用`interface`所有活动都必须实现的，才能成为有效的活动。这样，我可以为我的应用程序创建新的部分、扩展或新功能，并且一切正常。在我的应用程序中，我有一个用户可以单击的按钮列表，并且按钮列表是通过使用`ListView`.

```
private void displayLoadedContent() {
    View v = inflateLayout(R.layout.buttonlayout);
    ListView view = (ListView) v.findViewById(R.id.list);
    view.setAdapter(new ListButtonAdapter(this, content));
} 
```

where`content`被声明为

```
List<MyActivityInterface> content; 
```

并`ListButtonAdapter`扩展`BaseAdapter`。

所以那里没有问题。问题是我必须在 AndroidManifest.xml 中声明我的每一个活动。该文件就像要显示的可能活动的大列表，而且有点混乱，所以我不打算在这里显示代码。

我意识到我必须在清单中添加一项活动，但我希望一项活动就足够了。我的方法在很多方面都可以看作是[前端控制器模式](http://en.wikipedia.org/wiki/Front_Controller_pattern)，其中每个活动都负责加载和显示他们需要的活动。

我只是问是否可以在清单中动态注册活动（或允许它们以另一种方式运行），如果没有，是否有其他有效的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:47:20.130

Android 要求`AndroidManifest.xml`提前在您的文件中注册每个活动。部署后，您的应用程序将作为 .apk 文件存在于设备上，该文件无法修改（除了被更新/替换为新的 APK）。

如果我正确理解了这个问题，您根本不想在清单文件中列出大量活动吗？[片段](http://developer.android.com/guide/components/fragments.html)不需要在清单文件中注册，因此如果您的目标是动态换出 UI 组件，那就是答案。[片段可通过支持库](http://developer.android.com/training/basics/fragments/support-lib.html)回到 1.6 。

# c# - Ninject.Extensions.Factory：找不到绑定

> ID：12686944
> 
> 赞同：1
> 
> 时间：2012-10-02T08:34:42.233
> 
> 标签：c#, dependency-injection, ninject, factory-pattern

我的 Ninject.MVC RegisterServices 中有以下行：

```
kernel.Load(new NinjectBllModule());
kernel.Bind<IMembershipLogicFactory>().ToFactory(); 
```

在我的模块里面：

```
 Bind<IUserLogic<LoginUser>>().To<UserLogic>();
 Bind<IRoleLogic<SimpleRole, LoginUser>>().To<RoleLogic>(); 
```

和我的 IMembershipLogicFactory：

```
public interface IMembershipLogicFactory
{
    IUserLogic<TUser> GetUserLogic<TUser>() where TUser : UserBase;
    IRoleLogic<TRole, TUser> GetRoleLogic<TRole, TUser>() where TRole : RoleBase<TUser> where TUser : UserBase<TRole>;
} 
```

然而，当我注入一个 IMembershipLogicFactory 并在其上调用 GetUserLogic() 时，我收到以下错误：

```
Error activating IUserLogic{LoginUser}
No matching bindings are available, and the type is not self-bindable.
Activation path:
 1) Request for IUserLogic{LoginUser} 
```

而且我似乎找不到我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:24:18.110

该扩展使用以 Get 开头的方法解析命名绑定的约定。GetUserLogic 将因此被翻译成

```
kernel.Get<IUserLogic<LoginUser>>("UserLogic"); 
```

没有定义绑定。只需使用另一个方法名称，例如 CreateUserLogic

# listbox - Windows 8 WinRT 应用程序中的列表框

> ID：12686948
> 
> 赞同：3
> 
> 时间：2012-10-02T08:35:02.547
> 
> 标签：listbox, scrollbar

嗨有没有办法强制显示ListBox的垂直滚动条？我希望它一直可见。当鼠标结束并停留时，我让它显示出来，但我需要它总是显示出来。

谢谢你。

# java - Eclipse：类似于 emacs ace-jump-mode 的插件？

> ID：12686949
> 
> 赞同：3
> 
> 时间：2012-10-02T08:35:04.077
> 
> 标签：java, eclipse

目前我使用 emacs，但有时需要很长时间来配置它。我想使用eclipse，但我想念的是跳来跳去。emacs 是否有一些像 ace-jump-mode: [http://emacsrocks.com/e10.html](http://emacsrocks.com/e10.html)一样工作的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-25T14:59:05.880

从我的 github 试试这个。[https://github.com/whunmr/emacsIDEAsForEclipse/blob/master/acejump_1.0.0.201608252253.jar](https://github.com/whunmr/emacsIDEAsForEclipse/blob/master/acejump_1.0.0.201608252253.jar)

源代码也可以在同一个 repo 中找到。

# c++ - 返回本地人是否还涉及创建临时返回？

> ID：12686952
> 
> 赞同：0
> 
> 时间：2012-10-02T08:35:17.150
> 
> 标签：c++

我来自 Java，任何东西都可以参考，所以我试图弄清楚 C++ 实例创建的基础。

```
Employee getEmp(int a) {
    Employee local(a);
    return local;
}
Employee myEmp = m.getEmp(10); 
```

有 3 次 Employee 实例化（没有 RVO）是否正确？
1 - 创建本地副本
2 - 创建临时副本以绑定到引用）
3 - 创建 myEmp

为什么需要在第 2 步？为什么不直接将本地复制到myEmp？

如果我打算只使用 Ubuntu，我应该依靠 RVO，我是否更正了 RVO 只完成了两个实例创建（步骤 2 中不需要）？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:39:44.820

没有`RVO/NRVO`and`copy elision`则有 1 次调用`Employee(int)`和 2 次调用`copy c-tor`，一次返回时调用，一次构造时调用`myEmp`。和- 一次调用`RVO`，可能是零次调用来复制 c-tor。`copy elision``Employee(int)`

复制构造函数的第二次调用`copy elision`是强制性的，因为您想从另一个对象构造新对象（工作到`copy c-tor`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:39:52.157

函数返回的语义是独立于你对返回值所做的定义的：返回的值被复制到某个地方，当本地堆栈帧被破坏时它不会消失。因此，在您的示例中，如果没有 RVO，您将拥有：

1.  `local`在 的堆栈帧中构造一个名为 的局部变量`getEmp`。

2.  在调用者可以访问的某个地方复制返回对象的构造。通常，调用者在自己的堆栈帧中为返回的对象分配内存，并将带有该内存地址的隐藏参数传递给被调用函数。RVO 或 NRVO 允许编译器将此返回的对象“别名”为本地对象：在您的情况下，`local`在作为隐藏参数传入的地址处创建变量，而不是在本地堆栈帧中。

3.  返回后，返回的对象将被“使用”，然后在完整表达式的末尾销毁。 *如果*此用途是使用复制构造函数初始化局部变量，则可以省略中间值；编译器会将要构造的实际对象的地址作为隐藏参数传递给被调用的函数。（严格来说，这不是 NRVO，但它是相关的。）但是，不能省略其他用途；例如，如果返回值用于对现有变量的赋值，则赋值运算符将需要对要赋值的实例的引用。对中间对象的正式要求是存在的，因为返回值的大多数用途不是作为复制构造函数的参数。

最后，鉴于现代编译器技术，您可能可以指望编译器系统地省略上面的第二个副本。第一个副本（RVO 或 NRVO）可能更难一些。我希望在像上面这样的简单情况下系统地看到它：RVO 任何时候都有一个临时返回，而 NRVO 任何时候都有一个返回，它返回在函数的最外层范围内定义的命名变量。如果函数中有多个返回，则 NRVO（实际上也是 RVO，尽管我不知道为什么）不太可能发生。

# ruby-on-rails - Rails：单一资源更新路径问题

> ID：12686956
> 
> 赞同：0
> 
> 时间：2012-10-02T08:35:33.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-routing, form-for

我正在努力获取正确的 URL 以提供给 form_for 以更新操作以处理单个资源。

我的 routes.rb 如下：

```
scope "(:locale)", :locale => /en|fr/ do
  namespace :quickwizard, :module => 'quick_wizard' do
    resource :business, controller: 'business'
  end
end 
```

给出以下路线：

```
 quickwizard_business POST   (/:locale)/quickwizard/business(.:format)          quick_wizard/business#create {:locale=>/en|fr/}
 new_quickwizard_business GET    (/:locale)/quickwizard/business/new(.:format)      quick_wizard/business#new {:locale=>/en|fr/}
edit_quickwizard_business GET    (/:locale)/quickwizard/business/edit(.:format)     quick_wizard/business#edit {:locale=>/en|fr/}
                          GET    (/:locale)/quickwizard/business(.:format)          quick_wizard/business#show {:locale=>/en|fr/}
                          PUT    (/:locale)/quickwizard/business(.:format)          quick_wizard/business#update {:locale=>/en|fr/}
                          DELETE (/:locale)/quickwizard/business(.:format)          quick_wizard/business#destroy {:locale=>/en|fr/} 
```

在视图中：

```
= simple_form_for @business, url: quickwizard_business_path(@business), validate: true do |f| 
```

生成不正确的更新 url（但适用于创建）：

```
<form accept-charset="UTF-8" action="/15/quickwizard/business" ... 
```

如果我手动输入正确的路线，它适用于更新：

```
= simple_form_for @business, url:"/quickwizard/business", html: { method: 'put' }, validate: true do |f| 
```

所以我的问题是：这样做的正确方法是什么，以便我放置的 url 同时适用于创建和更新操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:42:23.417

问题在于语言环境，而不是单一资源。尝试生成 url

```
quickwizard_business_path(@business, locale: nil) 
```

# emacs - 将`关联到 在 Emacs 中

> ID：12686957
> 
> 赞同：4
> 
> 时间：2012-10-02T08:35:40.377
> 
> 标签：emacs, elisp

**为了将命令与插入字符（反引号）相关联，我必须在`.emacs`文件中写入什么。`<S-dead-grave>````**

我在 Unix 上运行 GNU Emacs 23.1.1。

背景：我通过在 Windows 终端服务器上以 Java (Oracle SGD) 运行的 shell 运行 Unix。我在这两个系统上都没有管理员访问权限。我的键盘设置为挪威语。Java 中显然存在一些错误，导致“死”字符（就像```在挪威语键盘上）表现得奇怪，我还没有成功让我的管理员解决这个问题。

当我在 Emacs 中单击```后跟一个空格（使用我的键盘布局插入该字符的方法）时，我收到错误消息`<S-dead-grave> is undefined`。因此，我相信如果我能定义这一点，我将能够解决这个错误。

在此设置中，我也对替代解决方法感到满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:10:26.203

我不清楚您是在 GUI 模式下还是在文本模式下（在终端模拟器中）运行 Emacs，但根据您对 Emacs 行为的描述，我猜它在 GUI 模式下运行（可能通过 Windows 机器上的某个 X 服务器？ ）。

奇怪的是你会得到 S-dead-grave 事件，所以它可能是你的 GUI 环境中的一个错误（你的 X 服务器的配置？）。

但无论如何

```
(global-set-key [S-dead-grave] "`") 
```

可能会让你解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T21:56:13.157

我有同样的问题，[这个错误报告讨论](https://bugs.launchpad.net/emacs-snapshot/+bug/1251176)报告了一个解决方案：

```
XMODIFIERS= emacs 
```

`.bashrc`我确实在测试后将它放入我的工作中（使用`XMODIFIERS= emacs && emacs`）

emacs 24.4 显然不需要，但我使用 emacs 24.3.1 并且仍然需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T09:48:54.477

如果`XMODIFIERS= emacs`对您有用（*不要忘记等号后的空格）*，请检查`~/.xinputrc`和`/etc/X11/xinit/xinputrc`或运行`im-config`并选择`none`。有关更多信息，请参阅 debian 参考章节[I18N 和 L10N](https://www.debian.org/doc/manuals/debian-reference/ch08.en.html)

# axapta - 似乎无法在 AX 2012 - X++ 中编辑表单域

> ID：12686959
> 
> 赞同：5
> 
> 时间：2012-10-02T08:35:44.840
> 
> 标签：axapta, x++, dynamics-ax-2012

我正在使用 X++ 开发 AX 2012，并尝试将功能添加到 LogisticsPostalAddress 表单部分。部分功能需要填充表单（在保存更改之前），但我似乎无法填充字段。

我找到了使用以下代码的参考：

```
LogisticsPostalAddress_ZipCode.text("NewCode"); 
```

这似乎不起作用。如果我使用：

```
LogisticsPostalAddress.ZipCode = "NewCode"; 
```

表格没有改变，但如果我保存并重新打开表格，数据已经改变。

我需要填充表单上的字段，以便用户在关闭表单之前可以看到新值。有什么建议么？

凯文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:08:55.070

尝试：

```
LogisticsPostalAddress.ZipCode = "NewCode";
LogisticsPostalAddress_ds.refresh(); 
```

# jsf - Primefaces 饼图动画

> ID：12686965
> 
> 赞同：0
> 
> 时间：2012-10-02T08:36:01.070
> 
> 标签：jsf, jakarta-ee, primefaces, pie-chart

有什么方法可以为 primefaces 设置动画`PieChart`。我搜索了所有属性，但找不到如何制作动画？实际上，我希望该图表应该以慢动作绘制。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:18:53.770

据我所知，jqplot 中没有动画（primefaces 图表正在使用）饼图[饼图动画问题 #468 创建于 2011-11-22](https://bitbucket.org/cleonello/jqplot/issue/468/pie-chart-animation)

作为一种解决方法，您可以使用[primefaces effects](http://www.primefaces.org/showcase/ui/misc/effect.xhtml)，但它会影响整个图表容器......

您可以随时转到其他第三方图表库

* * *

没有简单的第三方库（它们很简单，但与 primefaces 组件相比不一样），您将不得不编写更多代码，但灵活性会更大，

例如[gRaphael](http://g.raphaeljs.com/) Pie [gRaphael Pie Chart : 添加动画](https://stackoverflow.com/a/10823832/617373)

或者

[融合图](http://www.fusioncharts.com/demos/gallery/#pie-and-doughnut)

# objective-c - MPMoviePlayerController 覆盖 iOS 6

> ID：12686972
> 
> 赞同：5
> 
> 时间：2012-10-02T08:36:17.273
> 
> 标签：objective-c, uiview, uiviewcontroller, mpmovieplayercontroller, ios6

在 iOS6 中，MPMoviePLayerController 存在覆盖问题，在 iOS6 之前一切正常。

在我有这段代码之前，我似乎可以全屏播放电影：

```
@interface MovieOverlayViewController : UIViewController
{
    UIImageView *skiparrow;
}
@end

@implementation MovieOverlayViewController

-(void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    touchtoskip.frame = CGRectMake( xAdjust,
                                   yAdjust,
                                   touchtoskip.image.size.width / scale, 
                                   touchtoskip.image.size.height / scale);

    [self.view addSubview:touchtoskip];
} 
```

然后：

```
overlay = [[MovieOverlayViewController alloc] init];

UIWindow *keyWnd = [[UIApplication sharedApplication] keyWindow];
[keyWnd addSubview:overlay.view]; 
```

在我的 MoviePlayerViewController 上，视图确实出现了。并添加了 UIViews，但我再也看不到任何东西了。

真的卡住了，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T09:30:13.227

我认为问题的一部分是您正在获取关键窗口并向其添加子视图，而不是获取窗口的视图并向其添加子视图。

查看[MoviePlayer](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007798-Intro-DontLinkElementID_2)示例，该示例展示了如何添加带有子视图的播放器来控制播放。

# java - 如何使用 Java Dialog 参数？

> ID：12686977
> 
> 赞同：0
> 
> 时间：2012-10-02T08:36:42.357
> 
> 标签：java, concept

这是一个新手问题。我正在用 Java 做一些试验，我偶然发现了一个应该调用空对话框的方法。

但是，该方法在签名中有一个 Dialog 参数，我不知道如何使用。它看起来像这样：

```
public TestDialog(GraphicsConfiguration gc,
                     int x, int y,
                     Dialog dialog)
{
    super(dialog, getMsg("dialog.title"), true, gc);
    initDialog(x, y);
} 
```

我从 javadocs 中看到它应该代表父窗口，但是我将如何准确调用此方法以及我需要作为 Dialog 参数传递什么？我用谷歌搜索过，但找不到太多；请耐心等待，我刚开始使用这种语言:)

**编辑**

我应该指出，我了解 Dialog 参数的作用，它允许该方法从调用对话框中检索信息（在此示例中，它应该检索文本字符串）；我只是不知道怎么称呼它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:01:46.483

对话框在构建时必须将一个框架或另一个对话框定义为其所有者。所以在某些时候，你会有一个对话框，其中有一个框架作为它的父级。

Dialog 类具有两个构造函数，以 Dialog 或 Frame 作为父级。

# java - 了解 Java 泛型类型

> ID：12686979
> 
> 赞同：4
> 
> 时间：2012-10-02T08:36:51.507
> 
> 标签：java, generics

考虑这个泛型代码：

```
interface Collection<E>  {  
   public void add (E x);  
   public Iterator<E> iterator(); 
} 
```

和这个：

```
public class MyClass<V> {
    V v;
    setSomeValue(V val) {
       v=val;
    }

    V getSomeValue() {
        return v;
    }
 } 
```

我的问题：把这些字母放在尖括号中： `<V>`并且`<E>` 有特定的含义。我可以使用任何英文字母吗？即它们可以是 `<A>`还是`<Q>`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T08:39:34.213

它们必须是有效的 Java 标识符（不一定只是注释中指出的单个字母），从技术上讲，您可以使用您喜欢的任何标识符，并且您的代码将编译并运行良好（当然，如果没有其他错误！）

不过，最好遵守约定 - 这往往是单个大写字母。一些常见的是`E`,和`T`,分别代表元素、类型、键和值 - 您的用例可能很适合这些类别之一，在这种情况下我会使用这些字母。在上面的例子中，类使用是因为它包含元素。`K``V``Collection``E`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:39:22.793

```
interface Collection<E>  {  
   public void add (E x);  
   public Iterator<E> iterator(); 
} 
```

定义这样的接口意味着您告诉编译器，您可以创建任何类型的此接口的引用...但是，您必须仅使用`letters`来指示泛型类型..

理想情况下，它不是您应该只使用的约束**`T, E, or V`**..您可以使用它们中的任何一个..但是，如果您遵循某些**约定**，您的代码将更具可读性..

`K - Key, V - Value`.. 像这样..

因此，上述界面的参考可以是： -

```
Collection<String>, Collection<Integer>, Collection<YourCustomObject> 
```

无论您使用什么类型，它都会自动反映在您的`method return types`和`parameters`..

因此，对于`Collection<String>`，您的方法将如下所示：-]

```
 public void add (String x);  
   public Iterator<String> iterator(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:21:47.067

`E`等`V`是类型参数。它们不必是单个的大写字母——您可以使用 Java 中任何有效的标识符。

几乎每个人都对类型参数使用单个大写字母——这是几乎每个人都遵循的约定，所以我强烈建议你也这样做。

例如，您也可以这样做：

```
public class MyClass<Value> {
    Value v;
    setSomeValue(Value val) {
       v=val;
    }

    Value getSomeValue() {
        return v;
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:45:10.933

那些`E`或`V`其他只是变量。他们只是建议在编写代码时该类型是未知的。这也通过对这么多类型的对象使用相同的类来简化工作。

这些可以从[`http://docs.oracle.com/javase/tutorial/java/generics/index.html`](http://docs.oracle.com/javase/tutorial/java/generics/index.html)

```
The most commonly used type parameter names are:
    E - Element (used extensively by the Java Collections Framework)
    K - Key
    N - Number
    T - Type
    V - Value
    S,U,V etc. - 2nd, 3rd, 4th types 
```

它们可以`wildcards`在 java 中定义。这些泛型主要用于创建一个适用于许多`types`而不需要`casting`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T08:37:55.803

我认为它们必须是字母。它们基本上是类名的占位符。所以如果你想实例化 MyClass 你可以做

```
new MyClass<String>(); 
```

这将用字符串替换代码中的所有 V。

[本课](http://docs.oracle.com/javase/tutorial/java/generics/index.html)有更多关于泛型的细节

引用本课

> 最常用的类型参数名称是：

```
E - Element (used extensively by the Java Collections Framework)
K - Key
N - Number
T - Type
V - Value
S,U,V etc. - 2nd, 3rd, 4th types 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T08:39:09.330

通常它们会这样做，但编译器会让您根据需要命名它们；与任何其他类型一样，因为它表示类型的通用名称。

约定是：

T——类型；最常用于自定义类

E——元素；用于收藏

K——键；用于地图

V——值；用于地图

# spring-webflow - Spring webflow - 通过电子邮件发送流的链接

> ID：12686980
> 
> 赞同：-1
> 
> 时间：2012-10-02T08:36:58.863
> 
> 标签：spring-webflow

我是使用 Webflow 的新手，我不知道该怎么做：
我想实现一个恢复密码流，我正在获取用户的电子邮件，生成一个随机票并将其存储在休眠中。问题是我不知道如何向用户发送一封电子邮件，其中包含指向另一个流程的链接，该流程应检查票证是否有效，然后让用户更改密码。在使用 webflow 之前，我发送了下一个 URL：
(http://localhost:8080/changePassword?ticket=15teumv5huebt...)
changePassword 是我项目中的一个视图，但我知道这个 URL 将被覆盖。
谁能给我一些建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:12:18.890

好吧，如果您的流程的 id 是`"changePassword"`，您应该能够发送一个链接`"http://localhost:8080/changePassword?ticket=15teumv5huebt..."`

您可能希望用服务器 ip 自动替换 localhost 并对端口号执行相同的操作

您也可能必须使用您的应用程序的名称`"http://localhost:8080/appName/changePassword?ticket=15teumv5huebt..."`

# mysql - 带有语句的 MySQL 存储过程

> ID：12686985
> 
> 赞同：0
> 
> 时间：2012-10-02T08:37:21.250
> 
> 标签：mysql, sql, performance, stored-procedures

**一般来说**，我想知道执行存储过程的性能比较，该存储过程执行语法为

```
BEGIN

    DECLARE query VARCHAR(5000);
    SET @query = " <SQL CODE>";

    PREPARE stmt1 FROM @query;
    EXECUTE stmt1;
    DEALLOCATE PREPARE stmt1;

END 
```

或者直接执行 AS

```
BEGIN

    <SQL CODE>;

END 
```

在我的情况下，我必须使用第一种情况，因为我想设置一个输入参数来设置自定义 LIMIT。我想知道，总的来说，性能是否会下降。

MySQL 信息

*   协议版本 10
*   版本 5.0.95
*   version_bdb Sleepycat 软件：Berkeley DB 4.1.24：（2011 年 12 月 16 日）
*   version_comment 来源
*   发行版本_compile_machine x86_64
*   version_compile_os redhat-linux-gnu

# web-services - Axis2 客户端：避免维护会话

> ID：12686986
> 
> 赞同：2
> 
> 时间：2012-10-02T08:37:24.303
> 
> 标签：web-services, session, client, axis2

我在 Axis2 客户端实现中有一个大问题。我已经通过 Intellij Idea IDE 从 wsdl 文件生成了我的客户端 (Java) 的源代码。我使用客户端在 https 中使用智能卡与 Web 服务器连接，其中存储了用于身份验证的证书。使用第一个智能卡，一切正常：我以正确的方式从 web 服务接收数据。使用第二个智能卡，我收到与第一个智能卡所有者相关的数据。分析我的应用程序的日志，我注意到，在第一次通信结束时，已经保存了一个会话。因此，在第二个连接中，不需要身份验证，并且数据与第一个智能卡所有者有关。

谷歌搜索，我发现，为了避免在 Axis2 客户端中维护会话，需要设置以下内容：

```
currentStub._getServiceClient().getOptions().setManageSession(false); 
```

但它不能正常工作。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:19:17.703

我知道，这个问题已经很老了。

你可以创建一个新的存根。这不应该对旧的连接/会话有任何引用。

# google-apps-script - GAS 库和 ScriptProperties：将属性保存到包含脚本（不是库）的方法

> ID：12686987
> 
> 赞同：1
> 
> 时间：2012-10-02T08:37:27.817
> 
> 标签：google-apps-script

我想将我的所有代码外包给一个库，但是我正在使用 ScriptProperties 为使用该代码的每个电子表格设置和获取持久的全局变量（如“模式”：“编辑”或“数据”）。

根据规范，不可能有一个库写入托管脚本 ScriptProperties：[https ://developers.google.com/apps-script/guide_libraries#scoping](https://developers.google.com/apps-script/guide_libraries#scoping)

> 脚本属性（**）：在库中创建时，所有包括脚本在内的所有脚本都可以看到相同的实例。
> 
> ** 这意味着库拥有自己的资源/功能实例，并且所有使用该库的脚本共享并有权访问同一实例。

因此，这使得使用单个代码库为每个电子表格设置全局变量成为不可能。

与 ScriptProperties 结合使用库的这个缺点是否有解决方法或解决方案？

谢谢，一切顺利

马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:22:00.040

解决方案是将托管 ScriptProperties 的实例传递给库，即类似的东西

```
function test() {
  var props = ScriptProperties.getProperties();
  MyLib.func1(props);
} 
```

**MyLib.gs**

```
function func1(props) {
  var mode = props["mode"];
  //  ...
} 
```

如果托管脚本处理多个电子表格，则可以使用电子表格 id 作为属性键的一部分，例如，有两个电子表格 ids`XYZ000`和`XYZ001`. 托管脚本包含一系列属性

*   `XYZ000.mode`=`normal`
*   `XYZ001.mode`=`extended`

托管脚本接受一个活动的电子表格 ID，并将其与属性一起传递给库方法。

一个复杂的解决方案是拥有一个电子表格的设置类，在托管脚本属性中存储每个处理的电子表格的设置类的 JSON 字符串表示，使用电子表格 id 从属性加载电子表格设置并传递设置实例去图书馆。这是一个示例代码。

```
function Settings(mode) {
  this.mode = mode;
};

function setDefaultSettings() {
  var ID0 = "XYZ000";
  var SettingID0 = new Settings("normal");
  ScriptProperties.setProperty(ID0, SettingID0);
}

function test() {
  var props = ScriptProperties.getProperty("XYZ000");
  MyLib.func1(props);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:24:52.860

这是我尝试解决此问题的方法...

我将所有属性存储在库中，然后在库中使用 getter 和 setter 函数，以便调用电子表格轻松访问这些值。

使用调用电子表格的 id 为属性名称创建复合键。函数返回一个带有全键（复合）、“裸”键和返回给调用者的值（验证、错误检查等）的对象。

**图书馆.gs**

二传手

```
function setLibPropForSpreadsheet(key, keyValue)
{
var theCaller = SpreadsheetApp.getActiveSpreadsheet().getId();
  var fullKey = theCaller + '-' + key;
  ScriptProperties.setProperty(fullKey, keyValue)
  var theResult = new Object();
  theResult.value = keyValue;
  theResult.key = key;
  theResult.fullKey = fullKey;
  return(theResult);
} 
```

吸气剂

```
function getLibPropForSpreadsheet(key){
 var theCaller = SpreadsheetApp.getActiveSpreadsheet().getId();
  var fullKey = theCaller + '-' + key;
  return(ScriptProperties.getProperty(fullKey));
} 
```

然后，您可以在调用电子表格脚本中使用这些函数：

**电子表格.gs**

```
function setIt() {
var test =  getData.setLibPropForSpreadsheet("thesetting", "the value")
    Logger.log(test)
}

function getIt(){
 Logger.log(getData.getLibPropForSpreadSheet("thesetting"))
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:54:17.990

或者也许编码更优雅，更可重用......

还包括在多个用户使用电子表格时很有用的功能，并且他们每个人都需要有自己的设置。

```
/**
 *Returns a script property from the library file to a calling script

 * @param {string} key The name of the scriptProperty property to return.
* @return {string} the string value of the key passed
 */

function getLibraryProperty(key) {
  return ScriptProperties.getProperty(key);
}

/**
 *Returns the appropriate library property for the calling spreadsheet.
 * @param {string} key The name of the scriptProperty property to return.
* @return {string} the string value for the key passed

 */

function getLibPropForSpreadsheet(key){
  return(ScriptProperties.getProperty(setkey_(key).fullKey));

}
/**
 *Returns the appropriate library property for the calling spreadsheet by user
 * @param {string} key The name of the scriptProperty property to return.
 * @return {Object.<string,string>} Object containing the key, full key, and value
 */
function getLibPropForSSUser(key){
  return(ScriptProperties.getProperty(setkey_(key).fullUserKey));
}
/**
 *Returns the appropriate library property for the calling spreadsheet.
 * @param {string} key The name of the scriptProperty property to return.
 * @return {Object.<string,string>} the string value of the key passed
 */
function setLibPropForSpreadsheet(key, keyValue)
{
  return(setLibProp_(key, setkey_(key).fullKey, keyValue));
}

function setLibPropForSSUser(key, keyValue)
{
    return(setLibProp_(key, setkey_(key).fullUserKey, keyValue));
}

function setLibProp_(key, fullKey, keyValue){
  ScriptProperties.setProperty(fullKey,keyValue)
  var theResult = new Object();
  theResult.value = keyValue;
  theResult.key = key;
  theResult.fullKey = fullKey;
  return(theResult);
} 

function setkey_(key){
var theCaller = SpreadsheetApp.getActiveSpreadsheet().getId();
 var theUser = Session.getEffectiveUser().getEmail();
 var fullUserKey = theCaller + '-' +theUser+ '-' + key;
 var fullKey = theCaller + '-' + key; 
  var theKeys = new Object();
  theKeys.fullUserKey = fullUserKey;
  theKeys.fullKey = fullKey;
  return(theKeys);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-16T11:05:52.860

如果有人在 2020 年提出要求，那么传递您想要从库中管理的属性实例要容易得多。所以，你只需在**onOpen**方法或一个名为**initialiceLib**的方法中执行此操作，该方法在加载脚本时为库设置初始配置。

在图书馆：

```
var scriptProperties_;
/**
* Assign local document instance of property to a variable
* @param {Properties} properties - Instance of local document properties
*/
function setScriptProperties(properties) {       
   scriptProperties_ = properties;
}

//in some random function
function someFunction() {
   var someProperty = scriptProperties_.getProperty("propertyKey");
} 
```

在本地脚本中：

```
function initialiceLib() {
   LibraryAlias.setScriptProperties(PropertiesService.getScriptProperties());
} 
```

此示例是关于与库共享本地脚本属性。您可以更改文档属性（用户属性已共享）。

如果您不想启动任何库配置，而只想在库脚本属性中管理文档或其他脚本的所有属性，当然您可以在库中实现一个函数来使用 de 设置属性文档 ID 作为前缀，例如，使每个文档的每个键都是唯一的。

# php - 下一个和上一个链接：如果没有下一页，则不显示链接

> ID：12686990
> 
> 赞同：0
> 
> 时间：2012-10-02T08:37:43.860
> 
> 标签：php, wordpress

我已经按照[此处](http://codex.wordpress.org/Next_and_Previous_Links)（底部）的文档在页面底部创建了下一步和后退按钮。

它似乎工作正常，直到我到达链接只是将我重定向回第一页的最后一页。有没有办法说如果没有下一页不显示链接？我认为这就是 if 语句应该做的！

```
<?php
$pagelist = get_pages('sort_column=menu_order&sort_order=asc');
$pages = array();
foreach ($pagelist as $page) {
   $pages[] += $page->ID;
}

$current = array_search(get_the_ID(), $pages);
$prevID = $pages[$current-1];
$nextID = $pages[$current+1];
?>                  

<?php if (!empty($prevID)) { ?>
    <a class="back" href="<?php echo get_permalink($prevID); ?>">BACK</a>
<?php } ?>
<?php if (!empty($nextID)) { ?>
    <a class="next" href="<?php echo get_permalink($nextID); ?>">NEXT</a>
<?php } ?> 
```

**ps 请不要将我的问题移至 Wordpress 堆栈 - 这似乎有点死，并且没有得到很多回应！**

* * *

我的页面设置如下：

父页面

*   子页面 1
*   子页面 2
*   子页面 3

我在父页面上创建了一个链接以转到第一个子页面。然后在子页面模板上我得到了上面的代码。我只希望下一个链接出现在每个页面上，然后当它到达第 3 页时，它不应该显示下一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:50:49.290

If you are saying that this is effectively looping around then $nextID must never be empty, which would be why the link was always displayed.

You could set a $firstID, ie

```
$firstID = pages[0]; 
```

and then check;

```
if ($firstID != $nextID ) {

   // Display link

} 
```

# python - 上周五怎么去？

> ID：12686991
> 
> 赞同：15
> 
> 时间：2012-10-02T08:37:48.987
> 
> 标签：python, datetime

下面的代码应该在上周五 16:00:00 返回。但它返回[前一周的星期五](https://stackoverflow.com/questions/6172782/find-the-friday-of-previous-last-week-in-python)。如何解决？

```
now = datetime.datetime.now()
test = (now - datetime.timedelta(days=now.weekday()) + timedelta(days=4, weeks=-1))
test = test.replace(hour=16,minute=0,second=0,microsecond=0) 
```

更新。我现在使用以下方法 - 它是最好的吗？

```
now = datetime.datetime.now()
if datetime.datetime.now().weekday() > 4:
    test = (now - datetime.timedelta(days=now.weekday()) + timedelta(days=4))
else:
    test = (now - datetime.timedelta(days=now.weekday()) + timedelta(days=4, weeks=-1))
test = test.replace(hour=16,minute=0,second=0,microsecond=0) 
```

更新2。只是举个例子。假设今天是*Oct 5, 2012*。如果当前时间等于或小于*16:00*，则应返回*Sep 28, 2012*，否则 - *Oct 5, 2012*。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-02T08:43:35.177

该[`dateutil`库](http://dateutil.readthedocs.org/en/latest/relativedelta.html)非常适合这样的事情：

```
>>> from datetime import datetime
>>> from dateutil.relativedelta import relativedelta, FR
>>> datetime.now() + relativedelta(weekday=FR(-1))
datetime.datetime(2012, 9, 28, 9, 42, 48, 156867) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T08:43:51.523

与链接的问题一样，您需要使用`datetime.date`objects 而不是`datetime.datetime`. 最后，您可以`datetime.datetime`使用`datetime.datetime.combine()`：

```
import datetime

current_time = datetime.datetime.now()

# get friday, one week ago, at 16 o'clock
last_friday = (current_time.date()
    - datetime.timedelta(days=current_time.weekday())
    + datetime.timedelta(days=4, weeks=-1))
last_friday_at_16 = datetime.datetime.combine(last_friday, datetime.time(16))

# if today is also friday, and after 16 o'clock, change to the current date
one_week = datetime.timedelta(weeks=1)
if current_time - last_friday_at_16 >= one_week:
    last_friday_at_16 += one_week 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T08:50:35.537

This was borrowed from Jon Clements, but is the full solution:

```
>>> from datetime import datetime
>>> from dateutil.relativedelta import relativedelta, FR
>>> lastFriday = datetime.now() + relativedelta(weekday=FR(-1))
>>> lastFriday.replace(hour=16,minute=0,second=0,microsecond=0)
datetime.datetime(2012, 9, 28, 16, 0, 0, 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-27T12:17:15.633

没有依赖的最简单的解决方案：

```
from datetime import datetime, timedelta

def get_last_friday():
    now = datetime.now()
    closest_friday = now + timedelta(days=(4 - now.weekday()))
    return (closest_friday if closest_friday < now
            else closest_friday - timedelta(days=7)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T08:50:07.953

The principle is the same as in [your other question](https://stackoverflow.com/questions/12686735/how-to-get-time-170000-today-or-yesterday).

Get the friday of the current week and, if we are later, subtract one week.

```
import datetime
from datetime import timedelta
now = datetime.datetime.now()
today = now.replace(hour=16,minute=0,second=0,microsecond=0)
sow = (today - datetime.timedelta(days=now.weekday()))
this_friday = sow + timedelta(days=4)
if now > this_friday:
     test = this_friday
else:
     test = this_friday + timedelta(weeks=-1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-04T01:21:28.210

可能很蹩脚，但对我来说最简单。获取当前月份的最后一天并开始检查周五的循环（因为在找到上周五之前的最大循环数为 7，因此不会花费任何费用）。如果最后一天不是星期五递减和前一天的检查。

```
import calendar
from datetime import datetime, date

def main():
    year = datetime.today().year    
    month = datetime.today().month  
    x = calendar.monthrange(year,month)
    lastday = x[1]
    while True:
        z = calendar.weekday(year, month, lastday)
        if z != 4:
            lastday -= 1
        else:
            print(date(year,month,lastday))
            break

if __name__ == "__main__":
    main() 
```

# c# - System IOException Stream Read End with Sharp SSH

> ID：12686994
> 
> 赞同：5
> 
> 时间：2012-10-02T08:38:10.983
> 
> 标签：c#, ssh, sftp, sharpssh

我目前在我的一个项目中面临一个非常奇怪的问题。

我在我的代码中实现了 Tamir Gal 的 Sharp SSH 库，以通过 FTP 上传一些文件。当我在调试模式下运行代码时，一切正常。但是当我构建解决方案并尝试使用该构建版本时，我得到了 System.IO.IOException：

```
Tamir.SharpSsh.jsch.JSchException: Session.connect: System.IO.IOException: End of IO  Stream Read at Tamir.SharpSsh.jsch.IO.getByte(Byte[] array, Int32 begin, Int32 length)
at Tamir.SharpSsh.jsch.Session.read(Buffer buf)
at Tamir.SharpSsh.jsch.User.Auth.start(Session session)
at Tamir.SharpSsh.jsch.UserAuthNone.start(Session session)
at Tamir.SharpSsh.jsch.Session.connect(Int32 connectTimeout)
at Tamir.SharpSsh.jsch.Session.connect(Int32 connectTimeout)
at Tamir.SharpSsh.jsch.SshBase.ConnectSession(Int32 tcpPort)
at Tamir.SharpSsh.jsch.SshBase.Connect(Int32 tcpPort)
at Tamir.SharpSsh.jsch.SshBase.Connect() 
```

看起来数据流有问题（Hello Captain Obvious！:)），所以程序甚至没有建立完成连接方法。我只是不明白为什么在调试时一切正常。dll 在构建过程中被正确复制。

代码如下所示：

```
sftpClient = new Sftp(this.ftpHost, this.ftpUser, this.ftpPassword);
sftpClient.Connect(); 
```

所有变量都有正确的值，我可以在 Filezilla 等客户端中使用它们连接到 SFTP 服务器。

如果有人可以给我一个提示或有类似的问题，我会非常感谢每一个评论。

提前谢谢大家，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T11:54:55.857

我的同事刚刚找到了解决方案：

在 SharpSSH 中，您有 3 个 Dll：

*   org.mentalis.security.dll
*   Tamir.SharpSSH.dll
*   DiffieHellman.dll

因为我从来不需要在代码中引用 Org.Mentalis.Security.dll 我完全忘记在构建过程中复制它。因此，无法访问 SharpSSH 中继的整个安全层，这就是导致错误的原因。

我希望这个线程可以帮助其他一些健忘的人。:)

# javafx - 相当于 JavaFX 中 SplitPane 上的 setResizeWeight()？

> ID：12686999
> 
> 赞同：7
> 
> 时间：2012-10-02T08:38:29.080
> 
> 标签：javafx, javafx-2, splitpane

在 Swing 中，我们可以使用[`setResizeWeight()`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JSplitPane.html#setResizeWeight%28double%29)JSplitPane 来确定 SplitPane 的哪一部分收到了可用空间。JavaFX 2.2 中是否有等效方法？我只能找到`setDividerPosition()`并不能真正做到我想要的方法（当然，每次大小更改时我都可以手动调用它，但如果可能的话，我想避免这种情况。）

我也可以调用`setResizableWithParent(false)`，但这并不能真正提供我所追求的那种控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T19:30:32.317

在浏览 SplitPane 的 API 时，我发现了这个静态函数 - [setResizableWithParent(root, Boolean.FALSE)](http://docs.oracle.com/javafx/2/api/javafx/scene/control/SplitPane.html#setResizableWithParent%28javafx.scene.Node,%20java.lang.Boolean%29)，它提供了与 JSplitPane 中类似的功能`setResizeWeight()`。

```
 SplitPane sp = new SplitPane();
    final StackPane sp1 = new StackPane();
    sp1.getChildren().add(new Button("Button One"));
    final StackPane sp2 = new StackPane();
    sp2.getChildren().add(new Button("Button Two"));
    final StackPane sp3 = new StackPane();
    sp3.getChildren().add(new Button("Button Three"));
    sp.getItems().addAll(sp1, sp2, sp3);
    sp.setDividerPositions(0.3f, 0.6f, 0.9f);

    SplitPane.setResizableWithParent(sp1, Boolean.FALSE);

    primaryStage.setScene(new Scene(sp, 300, 200));
    primaryStage.setTitle("Welcome to JavaFX!"); 
    primaryStage.sizeToScene(); 
    primaryStage.show(); 
```

`setResizableWithParent`可以模仿的值，`setResizeWeight(0)`但`setResizeWeight(1)`绝对没有介于两者之间。基本上，节点可以是自由流动的或固定的。