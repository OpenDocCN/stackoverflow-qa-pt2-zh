# StackOverflow 问答 15917000-15917999

# hadoop - Hadoop：jobclient 在哪里工作？

> ID：15917001
> 
> 赞同：0
> 
> 时间：2013-04-10T04:33:48.593
> 
> 标签：hadoop, mapreduce

工作客户在哪里工作？两种情况：

1.  将job.jar复制到hdfs，并使用“hadoop jar job.jar”运行作业，我认为jobclient在执行命令的计算机上运行，​​对吗？我们可以使用此命令在配置了 jobtracker 和 hdfs 端口的集群外的计算机上运行作业吗？

2.  当我在我的计算机上使用 eclipse 进行远程编程时，使用菜单“Run on hadoop”运行作业，jobclient 是否在我不属于集群的计算机上运行？或者别的地方...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:45:45.647

在驱动程序类中调用 JobClient 以开始执行 MR 作业和其他一些事情。JobClient 和 Driver 在同一个节点上执行。有关 JobClient 的更多详细信息，请[点击此处](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapred/JobClient.html)。

JobClient 的运行位置取决于驱动程序的运行位置。驱动程序可以在 Hadoop 集群的外部或内部运行。该驱动程序也可以从 Hadoop 集群网关运行。

# microsoft-metro - winJS 应用程序内部的 PDF 查看器

> ID：15917002
> 
> 赞同：2
> 
> 时间：2013-04-10T04:33:48.767
> 
> 标签：microsoft-metro, winjs

## winJS 应用程序内部的 PDF 查看器

嗨，我正在开发一个 winJS 应用程序。我需要在不使用本机 pdf 启动器的情况下从应用程序内部打开一个 PDF 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:40:15.873

您可以尝试[PDF.js](https://github.com/mozilla/pdf.js)，但由于 PDF 的疯狂，您很可能会遇到某些文件的渲染问题。

否则，您将需要一个本机组件，您会在以下问题中找到很多建议：

*   [在 Window 8 中渲染 PDF](https://stackoverflow.com/questions/11392465/rendering-pdf-in-window-8)
*   [是否有内置 Windows 8“现代阅读器”PDF 查看器的 API？](https://stackoverflow.com/questions/8714500/is-there-an-api-for-the-built-in-windows-8-modern-reader-pdf-viewer)
*   [在 Windows 8 应用商店应用程序中嵌入 Acrobat Reader](https://stackoverflow.com/questions/14368140/embeded-acrobat-reader-in-windows-8-store-application)
*   [Windows 8 (RT) 上的 PDF、DOC 库](https://stackoverflow.com/questions/15347921/pdf-doc-library-on-windows-8-rt)
*   [如何在 Windows 8 Metro 应用程序中使用本机 pdf 阅读器？](https://stackoverflow.com/questions/10562946/how-can-i-use-the-native-pdf-reader-in-windows-8-metro-app)

我们在我们的应用程序中使用[DynaPDF](http://www.dynaforms.com/)。

# javascript - jcrop 全宽/高比例裁剪

> ID：15917003
> 
> 赞同：2
> 
> 时间：2013-04-10T04:34:00.033
> 
> 标签：javascript, jquery, crop, jcrop

我们在我们的系统中实现了[Jcrop](http://deepliquid.com/content/Jcrop.html)，到目前为止它运行良好。但我们最近发现了一个小问题：

**设想**

我们的网站允许用户上传他们公司的徽标。我们的纵横比要求是`200/150`，不幸的是，用户的公司徽标看起来像这样（200 x 63px）：

![200x63](https://i.stack.imgur.com/oIhhD.jpg)

用户上传了图片，由于我们的纵横比限制，他们看到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/EcuhV.jpg)

* * *

**问题**：如何裁剪**到图像的全宽或全高**？我不介意 jcrop 是否将负裁剪尺寸发送回服务器，因为它应该足够聪明，可以用白色背景填充图像。最终的预期图像应如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/6PnXn.jpg)

（为了对比，背景已经被阴影化了）

jcrop 可以做到这一点，还是我们可以使用任何替代解决方案/插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:04:29.570

您应该在一个框（或其他一些尺寸，但具有此 w/h 比）上向他展示裁剪工具，`200/150`您可以在其中加载并显示他的上传图像，而不是在他上传的图像上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:56:14.740

裁剪的主要目的是从图像中获取相关内容，并以首选的纵横比。但是，如果纵横比的限制导致您丢失图像数据，那么您选择填充解决方案是正确的。

遵循这个过程：

1.  让用户上传图片，然后向他们展示 page#2 ，他们可以在其中裁剪上传的图片。
2.  一页#2：
3.  项目清单

    (a) 使用 javascript 计算一个 200:150 纵横比的矩形在图像上可以覆盖多少面积。

    (b) 如果这个区域超过 90%（或者你想要的任何值），允许用户裁剪，你会得到一个相关的结果，这将符合你的纵横比要求。

    (c) 如果面积小于 90%，就像这个 200 像素 x 63 像素的图像一样，**更改纵横比的 javascript 变量，使它们完全/大致等于图像的纵横比，**例如 200:65。这样，用户将能够从徽标中裁剪出更完整的部分。

    (d) 在您的后端脚本中，检查它的大小写 (b) 还是大小写 (c)。如果是 (b)，请使用您的图像处理库来生成裁剪后的图像。如果是 (c)，则创建一个宽高比为 200:150（您想要的比例）的白色矩形，并与 (c) 中通过裁剪生成的图像重叠，您就会得到想要的结果。

这样，您的两种情况都被覆盖。这也不会让您的用户感到困惑，他们会很好地理解裁剪是为了选择徽标的最佳部分，并且已经完成了白色填充以使 UI 统一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:06:09.813

我会通过设置一个单选按钮来做到这一点，该按钮允许用户从固定纵横比动态更改为任何纵横比，这样用户就可以选择照片的整个区域。

如果脚本配置正确，服务器将能够通过用白色自动填充任何空白空间来强制将裁剪照片的结果调整为配置的最终尺寸和徽标的纵横比，而不是通过拉伸照片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T17:03:03.010

我不确定你如何在脚本的服务器端裁剪图像，但你可以做的是添加一个名为“使用完整图像”的额外按钮，其中发布数据 (x,y,width,height)将是图像的完整尺寸。然后，如果比率高于预期，您只需创建与您一直想要的相同大小的图像，按宽度调整图像大小并将其放在新图像的中间。所以下面的代码只是“伪代码”来显示我在说什么。假设用户想上传一张 1000px * 200px 的图片，而你想要的比例是 200px * 150px。用户选择“完整图像大小”，因此您发送的数据非常类似于：0,0,1000,200（位置：0,0 和宽度/高度：1000、200）。在服务器端，您可以进行所有必要的计算：

```
$width = $_POST['width'];
$height= $_POST['height'];
$fullsize = isset($_POST['fullsize']) && $_POST['fullsize']; // If the full size mode is on.
if ($fullsize) {
  $image = new Image(0,0,200,150); // Create the image canvas with whatever plugin your using.
  if (($width/$height) > (200/150)) { // If WIDTH ratio is higher...
    $x = 0; // We already know the image will be align on the left because of the previous calculations (ratio)
    $y = (150/2) - ($height/2); // 50% top - half the image size = center.

  }
  if (($height/$width) > (150/200)) { // If HEIGHT ratio is higher...
    // Repeat previous code with adjusted values for height instead of width.
  }
  // The next part is pure fiction, i dont know what php extension you use, but lets pretend this is working.
  $newImage = new Image($x,$y,$width,$height,$file); // $file is probably the $_FILEs...
  $image->placeInsideCanvas($newImage); // Imagine this adds the image into your previously created canvas (200/150);
  $image->output();
} 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T17:40:40.333

jcrop 没有明确的大小调整方法吗？我记得在 jcrop API 中看到过：

`$.Jcrop( '#box', { trueSize: [ w, h ] });`

不确定这是否允许您覆盖裁剪比例，但可能值得一试。

# c# - 使用新保存的图像加密图像时出错

> ID：15917006
> 
> 赞同：1
> 
> 时间：2013-04-10T04:34:23.340
> 
> 标签：c#, image-processing, encryption

首先我使用 image.save 创建图像，这是一个片段代码：

```
 private void Save(Bitmap image)
    {
        string fullPath = string.Empty;
        string encryptPath = string.Empty;
        bool isSaved = false;

        try
        {
            // my code                

            image.Save(fullPath, jgpEncoder, myEncoderParameters); // save and image created

            isSaved = true;

            Log.WriteLine("PictureCapturer", "<< Save", LogLevel.Information, 0);
        }
        catch (Exception ex)
        {
            Log.WriteLine("PictureCapturer", "Error when Save : " + ex, LogLevel.Error, 0);
        }
        finally
        {
            image.Dispose();
        }

        if (Properties.EncryptPicture && isSaved)
        {
            Crypto.EncryptFile(fullPath, encryptPath); // start encrypt file
        }
    } 
```

使用 Rijndael 的文件加密器的代码段：

```
 public void EncryptFile(string inputFile, string outputFile)
    {
        try
        {
            string password = @"xxxxxxx";
            UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = UE.GetBytes(password);

            string cryptFile = outputFile;
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();

            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key, key),
                CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(inputFile, FileMode.Open); // ERROR HERE

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);

            fsIn.Close();
            cs.Close();
            fsCrypt.Close();
        }
        catch(Exception ex)
        {
            string e = ex.Message;
        }
    } 
```

但是加密图像时出现错误：

**Message = "该进程无法访问文件 'D:\Foto\xxxxx.Jpeg'，因为它正被另一个进程使用。"**

仅供参考，我想在运行时创建图像并加密图像。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:33:47.177

消息：

“该进程无法访问文件 'D:\Foto\xxxxx.Jpeg'，因为它正被另一个进程使用。”

意味着一个程序打开了文件并且从不`Close`d 它。两件事情：

1) 确保没有其他程序打开文件（例如，如果您在资源管理器或图像查看器中打开它） 2) 确保您当前或以前的程序迭代没有打开文件并且永远不要关闭它。例如，`Close`如果抛出异常，您的程序将不会生成该文件。我建议使用`finally`块来清理资源，例如调用`Close`and `Dispose`，因为`finally`块总是在所有代码结束后执行，无论是否抛出、捕获异常等等。

# objective-c - 如何使用 OCMock 正确测试此方法？

> ID：15917007
> 
> 赞同：2
> 
> 时间：2013-04-10T04:34:30.073
> 
> 标签：objective-c, unit-testing, stub, ocmock, stubbing

我是 OCMock 的新手，我正在尝试测试是否调用了一个方法，但我希望该方法是一个存根，因为它包含其他我不想在当前测试中测试的加载方法。

```
- (void)setUp
{
    self.rootViewController = [[RootViewController alloc] init];
}

- (void)tearDown
{
   self.rootViewController = nil;
}

- (void)test_ViewDidLoad_DidCallLoadChildViewControllers
{
    id mockRootViewController = [OCMockObject partialMockForObject:self.rootViewController];

    [(RootViewController*)[mockRootViewController stub] loadChildViewControllers];
    [(RootViewController*)[mockRootViewController stub] updateMainNavigation];

    [[mockRootViewController expect] loadChildViewControllers];

    // Force the view to load
    self.rootViewController.view;

    [mockRootViewController verify];
} 
```

这是被调用的方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self loadChildViewControllers];
    [self updateMainNavigation];
} 
```

由于某种原因，测试失败了，就好像它从未被调用过（但我可以通过它并验证它是否被调用，以及它是一个存根。

这是错误：

```
OCPartialMockObject[RootViewController]: expected method was not invoked: loadChildViewControllers 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:20:44.257

尝试删除此行：

```
[(RootViewController*)[mockRootViewController stub] loadChildViewControllers]; 
```

当您`expect`使用该方法时，它具有存根的副作用，因此`stub`没有必要。我怀疑正在发生的事情是您的记录器在记录器有机会匹配它`stub`之前就吞下了调用。`expect`

# wpf - Windows 服务异常

> ID：15917009
> 
> 赞同：0
> 
> 时间：2013-04-10T04:34:42.200
> 
> 标签：wpf, windows-services

我有一个 Windows 服务。并在服务启动期间调用以下函数。

```
static public void SaveXpsPageToJpeg(string xpsFileName, int[] pages){
    using (XpsDocument xpsDoc = new XpsDocument(xpsFileName, System.IO.FileAccess.Read)){
        FixedDocumentSequence docSeq = xpsDoc.GetFixedDocumentSequence();
        DocumentPaginator paginator = docSeq.DocumentPaginator;

        // You can get the total page count from docSeq.PageCount

        foreach(int pageNum in pages){
            using (DocumentPage docPage = paginator.GetPage(pageNum)){
                BitmapImage bitmap = new BitmapImage();
                RenderTargetBitmap renderTarget =
                    new RenderTargetBitmap((int)docPage.Size.Width,
                    (int)docPage.Size.Height,
                        96, // WPF (Avalon) units are 96dpi based
                        96,
                        System.Windows.Media.PixelFormats.Default);

                renderTarget.Render(docPage.Visual);

                JpegBitmapEncoder encoder = new JpegBitmapEncoder();  // Choose type here ie: JpegBitmapEncoder, etc
                encoder.Frames.Add(BitmapFrame.Create(renderTarget));

                using (FileStream pageOutStream = new FileStream(xpsDoc + ".Page" + pageNum + ".jpg", FileMode.Create, FileAccess.Write)){
                    encoder.Save(pageOutStream);
                    pageOutStream.Close();
                }
            }
        }
    }
} 
```

相同的代码可以在 WPF 应用程序中完美运行。但是当我在服务中调试它时，它会抛出一个异常

我还添加了异常和内部细节的屏幕截图

[http://imageshack.us/photo/my-images/62/97453717.png/](http://imageshack.us/photo/my-images/62/97453717.png/)

[http://imageshack.us/photo/my-images/850/95569721.jpg/](http://imageshack.us/photo/my-images/850/95569721.jpg/)

我还尝试在配置管理器中更改 X64、X86 和 AnyCPU

我正在使用 Visual Studio 2010、.Net Framework 4

有人可以在这里帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:16:35.240

我必须自己找到解决方案。

Visual Studio 创建的大多数项目默认设置为 MTA。我必须在 STA 线程中运行我的代码。

最后...！

# javascript - 如果该属性尚未在 JS 或 CSS 中的任何位置指定，我如何找到 JS 样式属性的值？

> ID：15917015
> 
> 赞同：0
> 
> 时间：2013-04-10T04:35:26.197
> 
> 标签：javascript, css, properties, center

如果该属性未在**JS**或**CSS**中的任何位置指定，我如何找到**JS**样式属性的值？**仅限JS**。请不要使用**JQuery**或其他库。

 ******当我说没有指定属性时，我的意思是我的代码中没有任何地方明确地给它一个值。例如，假设我有一个**div**标签，其中包含一些文本：

```
<div id="item" style="float:left;">This is just random text.</div> 
```

由于里面的文本，该**div**的*宽度*当然会大于 0 像素，但它会小于整行的*宽度*，因为它是向左浮动的。**div**将足够宽以容纳所有文本，但我无法弄清楚该*宽度*是多少，因为我从未指定它。例如，尝试以下代码：

 ******```
alert(document.getElementById("item").style.width); 
```

...将返回一个空字符串，因为从未指定*宽度。*但是，在页面加载并呈现元素之后，有没有办法用**JS**检索该**div的计算/演示/实际***宽度*？

 ****顺便说一句，我不妨让你知道，我正在尝试放置几个容器，上面示例中的随机文本，在同一行上隔开并居中。我认为它们必须是**div**，因为我需要操纵*margin*属性以将它们隔开（这不能用**spans**完成）。为了将**div**强制到同一行，它们必须浮动。但是问题就变成了浮动元素不响应**center**标签或**CSS** *text-align*属性。所以唯一剩下的让容器居中的方法是给它们的容器（超级容器）一个*宽度*并设置它的**CSS** *边距*属性为*auto*。但我不知道将超级容器的*宽度*设置为什么，因为内部容器中的文本会有所不同。所以我认为最好的做法是弄清楚每个内部容器的计算*宽度*是多少，并将所有*宽度*相加得到超级容器的*宽度*。但是，如果您发现这种思路有缺陷，或者有更简单的方法，请随时指出。

欢迎所有建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:07:17.847

获取 div 的宽度所需的所有内容`divID.clientWidth`如下所示：

```
alert("Div Width: " + divID.clientWidth); 
```

这是一个[演示](http://jsfiddle.net/5ERVj/18/)。

希望这可以帮助 ：）****************

# javascript - 从弹出窗口返回结果

> ID：15917018
> 
> 赞同：0
> 
> 时间：2013-04-10T04:35:34.150
> 
> 标签：javascript, html

我有一个按钮，它将打开一个弹出窗口，弹出窗口重定向到几个页面并返回到最后一页，

现在我想在父打开窗口中获取最后一页的状态

我试过[这个](https://stackoverflow.com/questions/9276086/popup-window-to-return-data-to-parent-on-close)

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        // put your code here
        ?>
        <button id="imageinstagram">Images</button>
        <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
        <script>
            $(document).ready(function(){
                $('#imageinstagram').click(function(){
                    window.open("./login.php",'','menubar=no,status=no,width=200,height=200') ;
                });

            });
            function HandlePopupResult(result) {
                alert("result of popup is: " + result);
            }
        </script>
    </body>
</html> 
```

现在 login.php 重定向到 success.php

success.php 有以下代码

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>        
            <script>
            function CloseMySelf(sender) {
                try {
                    window.opener.HandlePopupResult(sender.getAttribute("result"));
                }
                catch (err) {}
                window.close();
                return false;
            }

            CloseMySelf();
        </script>

    </body>
</html> 
```

仍然我的父窗口没有收到任何警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:47:29.543

I have done silly mistake without understanding the code :(

silly mistake in javascript of child window.

```
<script>
            function CloseMySelf() {
                try {
                    window.opener.HandlePopupResult('false');
                }
                catch (err) {}
                window.close();
                return false;
            }

            CloseMySelf();
        </script> 
```

# sql - 从两个字段中选择不同的行

> ID：15917019
> 
> 赞同：-2
> 
> 时间：2013-04-10T04:35:34.923
> 
> 标签：sql, sql-server

我有一张有数百万条记录的表。

所以我可能有这些专栏

A B C D

我需要根据 a 和 b 列选择所有不同的记录。

但我需要选择列 a、b、c 和 d 而不仅仅是 a 和 b。

我可以这样做吗？

**编辑**

数据可能是

> 1,1,青蛙,绿色
> 
> 1,1,青蛙,棕色
> 
> 2,1,猫,黑色
> 
> 2,4,狗,白

所以我需要；

> 1,1,青蛙,绿色
> 
> 2,1,猫,黑色
> 
> 2,4,狗,白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:43:16.917

SQL Server 支持公用表表达式和窗口函数。下面的查询使用`ROW_NUMBER()`根据组对记录进行排名。它排序`c ASC, d ASC`（*只是玩它*）。

```
WITH records
AS
(
    SELECT  a, b, c, d,
            ROW_NUMBER() OVER(PARTITION BY a, b ORDER BY c, d) rn
    FROM    TableName
)
SELECT  a, b, c, d
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/5fb09/1)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:43:37.277

分区是你的男人

```
SELECT a, b, c, d FROM (
    SELECT a, b, c, d, ROW_NUMBER() OVER (PARTITION BY  a, b ORDER BY  a, b) rn
    FROM table
) sq
where rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:44:11.650

请试试：

```
select * 
From(
    select 
        row_number() over (partition by a, b order by a, b) RNum, 
        * 
    from
        YourTable
    )x
where RNum=1 
```

样本

```
select * From(
    select row_number() over (partition by a, b order by a, b) RNum, * 
    from(
        select 1 a, 1 b, 'frog' c, 'green' d union all
        select 1 a, 1 b, 'frog' c, 'brown' d union all
        select 2 a, 1 b, 'cat' c, 'black' d union all
        select 2 a, 4 b, 'dog' c, 'white' d)x
    )y
where RNum=1 
```

# python - 试图将bash语句翻译成python中的子进程

> ID：15917021
> 
> 赞同：3
> 
> 时间：2013-04-10T04:36:00.023
> 
> 标签：python, subprocess, output, pipeline, export-to-csv

我正在尝试将 bash 命令转换为 python 中的子进程。bash 命令是：

猫日志文件.msg.log | grep ABCD | awk '{打印 $14,$10,$5,$7}' | 排序 -t' ' -k4 -n -r | 头 -10 > output.csv

到目前为止，我有以下子流程：

```
cat = subprocess.Popen(['cat', 'LogFile.msg.log'],
                        stdout=subprocess.PIPE,
                        )
grep = subprocess.Popen(['grep', 'ABCD'],
                        stdin=cat.stdout,
                        stdout=subprocess.PIPE,
                        )
awk = subprocess.Popen(['awk', '{print $14,$10,$5,$7}'],
                        stdin=grep.stdout,
                        stdout=subprocess.PIPE,
                        )
sort = subprocess.Popen(['sort', '-t','' '', '-k4', '-n', '-r'],
                        stdin=awk.stdout,
                        stdout=subprocess.PIPE,
                        )
head = subprocess.Popen(['head', '-10'],
                        stdin=sort.stdout,
                        stdout=subprocess.PIPE,
                        )
out = subprocess.Popen(['>', 'output.csv'],
                        stdin=head.stdout,
                        stdout=subprocess.PIPE,
                        )
end_of_pipe = out.stdout 
```

现在我收到以下错误：

```
Sort: empty tab
Traceback (most recent call last):
  File "./latency2", line 39, in <module>
    stdout=subprocess.PIPE,
  File "/usr/lib64/python2.6/subprocess.py", line 639, in __init__
    errread, errwrite)
  File "/usr/lib64/python2.6/subprocess.py", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我确定我错过了一些东西，但不确定是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:05:07.183

你有两个问题。首先是您没有`sort`正确翻译参数。当您运行此`sort`命令时：

```
sort -t' ' -k4 -n -r 
```

shell 将标记粘贴在一起`-t`并粘贴`' '`到单个参数`"-t "`（破折号、三通、空格）中。因此，它的正确子流程参数应该是：

```
sort = subprocess.Popen(['sort', '-t ', '-k4', '-n', '-r'],
                        stdin=awk.stdout,
                        stdout=subprocess.PIPE,
                        ) 
```

第二个问题是最终重定向到带有`> output.csv`标记的文件。当 shell 看到这一点时，它不会运行名为`>`;的命令。相反，它打开文件`output.csv`进行写入并将其设置为最后一个命令的标准输出句柄。因此，您不应该尝试运行名为`>`子进程的命令；相反，您需要通过打开文件来模拟 shell：

```
head = subprocess.Popen(['head', '-10'],
                        stdin=sort.stdout,
                        stdout=open('output.csv', 'w'),  # Not a pipe here
                        ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T20:05:00.380

你可以重写：

```
cat LogFile.msg.log | grep ABCD | awk '{print $14,$10,$5,$7}' |
sort -t' ' -k4 -n -r | head -10 > output.csv 
```

在纯 Python 中：

```
from heapq import nlargest
from operator import itemgetter

select_items = itemgetter(13, 9, 4, 6) # note: zero-based indices
with open('LogFile.msg.log') as file, open('output.csv', 'w') as outfile:
    rows = (select_items(line.split()) for line in file if 'ABCD' in line)
    top10_rows = nlargest(10, rows, key=lambda row: int(row[3]))
    print("\n".join(map(" ".join, top10_rows))) 
```

# php - 循环遍历多维数组

> ID：15917022
> 
> 赞同：3
> 
> 时间：2013-04-10T04:36:02.130
> 
> 标签：php, arrays, loops, multidimensional-array

我有一个类似于此的 JSON 文件：

```
{
"Pages":{
        "/":{
            "Name": "Home",
            "Page": "index.php"
        },

        "/_admin":{
            "Name": "Admin",
            "Page": "_admin/index.php",

            "Template": "admin",
            "MobileTemplate": "admin-mobile",

            "Pages":{

                "/settings":{
                    "Name": "Settings",
                    "Page": "_admin/settings/index.php",
                    "Config": "_admin/settings/config.php",

                    "Pages":{

                        "/user":{
                            "Name": "Users",
                            "Page": "_admin/settings/user.php",
                            "Config": "_admin/settings/config.php",
                            "CatchAll": true
                        }

                    }

                }
            }
        },

        "/tasdf":{
            "Name": "fs",
            "Page": "index.php"
        }
    }
} 
```

我正在尝试遍历这个数组（我已经使用 JSON 解码将其转换为 PHP），并且对于每个“页面”块，我都想添加额外的数据。

例如，工作应该是这样的：

```
Array Loop Starts
Finds "Pages"
    -Goes through "/"
    -No "Pages" - continue
   - Goees through "/_admin"
       -Finds "Pages"
       -Goes through "/settings"
           -Finds "Pages"
           -Goes Through "/user"
           -No Pages Continue
   - Goes through "/tasdf"
   - No "Pages" - continue
 End Loop 
```

每次它通过一个部分时，我希望它与另一个数组合并。

我正在努力编写代码以查看它每次找到“Pages”这个词作为键时都在循环。我尝试了很多次，但一直在报废我的代码。

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:41:06.307

You're looking for a recursive function that scans your array to a depth of `n`. Something like this could work:

```
function findPagesInArray($myArray) {
    foreach($myArray as $index => $element) {
        // If this is an array, search deeper
        if(gettype($element) == 'array') {
            findPagesInArray($element);
        }

        // Reached the Pages..
        if($index == 'Pages') {
            // Do your task here
        }
    }
} 
```

And you would now use it by calling `findPagesInArray($json_object)`

# matlab - 从 Matlab 调用 ImageMagick 时出错

> ID：15917023
> 
> 赞同：1
> 
> 时间：2013-04-10T04:36:02.183
> 
> 标签：matlab, system, imagemagick-convert

我已经在我的系统（windows）中安装了 ImageMagick，它的命令在系统 PATH 中。它通过命令行工作得非常好我想使用系统命令从 Matlab 调用 ImageMagick 的“转换”功能。'C:\Users\Vivek' 是图像的路径。我必须通过 Matlab 测试 ImageMagick 的工作，因为我需要它进行进一步处理（使输入适合于 Tesseract OCR）

```
 cmd= ['convert ' 'C:\Users\Vivek\208.jpg ' 'C:\Users\Vivek\208.png']
    system(cmd); 
```

它说无效参数 - C:\Users\Vivek\208.png，我尝试了其他一些方法。但是，问题始终出在第二个参数上。

需要帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:56:13.877

Windows 带有自己的`convert`程序，看起来您正在调用该程序，因为它在此上下文中的路径上是第一个。它在 ImageMagick 的网站上进行了描述：[http ://www.imagemagick.org/Usage/windows/#convert_issue](http://www.imagemagick.org/Usage/windows/#convert_issue)

我没有安装 ImageMagick，当我尝试调用 convert 时收到相同的错误消息。这与您的代码得到错误的`convert`程序是一致的。

```
C:\Users\janke>convert C:\Users\Vivek\286.jpg C:\Users\Vivek\208.png
Invalid Parameter - C:\Users\Vivek\208.png 
```

指定 ImageMagick`convert`程序的完整路径，它应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T13:03:34.220

上一篇文章中提到的解决方案是解决问题的*标准*方法，但*最简单*的方法是将 ImageMagick 的`convert.exe`文件重命名为其他名称，例如`convert1.exe`，并在脚本中使用此文件名。

# jquery - jQuery Mobile 升级后输入文本背景问题

> ID：15917025
> 
> 赞同：1
> 
> 时间：2013-04-10T04:36:23.717
> 
> 标签：jquery, css, html, jquery-mobile

首先，以下是我使用的风格

```
.iblack input,.iblack textarea
{
  box-shadow: 0px 1px 4px 4px rgb(0, 0, 0) inset !important;
} 
```

早些时候我使用的是 jQuery Mobile 1.2 和 jQuery 1.8，一切都很好。在这里查看现场小提琴[http://jsfiddle.net/qPKLZ/](http://jsfiddle.net/qPKLZ/)

今天我升级到 jQuery Mobile 1.3 和 jQuery 1.9 发现背景样式没有正确应用。现场小提琴在这里[http://jsfiddle.net/ECxve/](http://jsfiddle.net/ECxve/)

有人能指出我到底出了什么问题吗？

我什至尝试`background-color`在文本输入本身上找到观察到的相同行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:01:44.857

第一个小提琴标记在输入元素上应用圆角

```
<div class="iblack">
    <input id="hoursMon" name="hoursMon" type="number" value="" data-mini="true" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset ui-mini">
</div> 
```

但是在你的第二个小提琴中有一个额外的 div 包装器来处理圆角

```
<div class="iblack">
    <div class="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c ui-mini">
        <input id="hoursMon" name="hoursMon" type="number" value="" data-mini="true" class="ui-input-text ui-body-c"></div>
</div> 
```

通过设置 div 而不是输入的样式来修复它...类似于

```
.iblack .ui-corner-all
{
  box-shadow: 0px 1px 4px 4px rgb(0, 0, 0) inset !important;
} 
```

[jsfiddle](http://jsfiddle.net/pxfunc/ECxve/1/)

# php - jqplot条形图中最后一个条的标签不显示

> ID：15917029
> 
> 赞同：0
> 
> 时间：2013-04-10T04:36:37.373
> 
> 标签：php, jquery, jqplot

我在 jqplot 条形图中遇到了一个奇怪的问题。最后一个栏中的条形图标签有时会显示，有时会消失。我添加了屏幕截图和我的脚本。！

这是我使用的脚本。

```
 plot1 = $.jqplot('chart1', [s1], {
                    // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
                    animate: !$.jqplot.use_excanvas,
                    seriesColors:<?php echo json_encode($barColor ); ?>,
                    <?php if(isset($_POST['additionalSubmit'])){ ?>
                    negativeSeriesColors: ["#792A86"],
                    <?php } else { ?>
                    negativeSeriesColors: <?php echo json_encode($barColornegative ); ?>,
                    <?php } ?>
                    seriesDefaults:{
                        renderer:$.jqplot.BarRenderer,
                        rendererOptions: { 
                            fillToZero: true,
                            barWidth: 30,
                            varyBarColor :true
                        },
                        pointLabels: { 
                            show: true,
                            formatString :"&#8364; %'s",
                            escapeHTML: false
                            }
                    },
                    canvasOverlay: {
                        show: true,
                        objects: [
                           {horizontalLine: {
                                name: 'zeroline',
                                y: 0,
                                lineWidth: 2,
                                xOffset: 0,
                                color: '#BBCCDD',
                                shadow: false
                            }}
                        ]
                        },
                    axes: {
                        xaxis: {
                            autoscale:true,
                            renderer: $.jqplot.CategoryAxisRenderer,
                            ticks: ticks,
                            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                            tickOptions: {
                                fontSize: '8pt',
                                fontWeight: 'normal',
                                angle:-20,

                            },  
                            borderColor: "#BBCCDD",
                            borderWidth:5
                        },
                        yaxis: {
                            autoscale:true,
                            tickOptions:{ prefix: '&#8364;' , formatString: "%'d",} ,
                            borderColor: "#BBCCDD",
                            borderWidth:5,
                            label: 'resultant in EURO',
                            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                        }
                    },
                    legend: {
                        show: true,
                        placement: 'outside',
                        noColumns: 1
                    },
                    series: [
                             {
                                 fill: true,
                                 label: '<?php echo $_POST['scenario']; ?>'
                             }
                         ],
                    highlighter: { show: false }
                }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T13:13:34.247

标签在“碰到”边缘时不会显示。为避免这种检测，请为您的 pointLabels 设置 edgeTolerance，如下所示：

```
pointLabels: { 
    show: true,
    formatString :"&#8364; %'s",
    escapeHTML: false,
    edgeTolerance: -100
} 
```

# javascript - 尝试直接引用时函数回调中的返回值未定义

> ID：15917030
> 
> 赞同：0
> 
> 时间：2013-04-10T04:36:40.143
> 
> 标签：javascript, jquery, function, error-handling, callback

我确定我提出问题的方式非常糟糕。我需要解释发生了什么。

我正在使用 Jquery-file-upload 包。上传和所有工作都很好，但我正在尝试做一些错误处理。我想具体说明错误，因此我试图获取文件上传脚本返回的“错误”值。

当我尝试上传不受支持的文件时，我在控制台中看到此信息作为响应：

```
name
"300x300_068012f8ad836d2bc459b099065426c6.jpg"

size
29472

type
"image/jpeg"

error
"Filetype not allowed" 
```

在我的 jquery/javascript 代码中，我可以成功获取`file.name`, `file.size`, 或者`file.type`但是每当我尝试时，`file.error`我得到的只是控制台中的“未定义”。

这是我正在使用的功能：

```
function loadNotesUploader() {
    $('#edit_media_notes_input').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.files, function (index, file) {
                console.log(file.name); // works
                console.log(file.error); // undefined
                // do stuff depending on result
                });
            });
        }
    });
} 
```

我不确定为什么我无法获得特定的错误字符串......而且我有点需要。

# javascript - 如何更新传单中 WMS 图层的不透明度？

> ID：15917031
> 
> 赞同：10
> 
> 时间：2013-04-10T04:36:41.357
> 
> 标签：javascript, leaflet

如何在不调用“removeLayer”的情况下调整传单中的不透明度？我已经在我的地图中使用了“map.addLayer(myLayer)”。我看到有一个 setParams() 方法，但是当我调用“myLayer.setParams({opacity:0.1})”并且 WMS 没有刷新按钮时它似乎没有效果。这在 Leaflet 中是否可行？如果是这样，怎么做？是否有某种方式可以调用“map.getLayers()”之类的东西，或者能够检索已经添加到地图的图层？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:48:10.600

使用`setOpacity`喜欢`layer.setOpacity(0.5)`

API 文档 - [http://leafletjs.com/reference.html#tilelayer-opacity](http://leafletjs.com/reference.html#tilelayer-opacity)（向下滚动一点）

# iphone - 他们是UDID的替代品吗？

> ID：15917034
> 
> 赞同：-3
> 
> 时间：2013-04-10T04:36:52.937
> 
> 标签：iphone, ios

由于 UDID 已被弃用，他们有任何替代 UDID 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:40:40.017

You can use the following thing as a unique Identifier for your app user's :

I use the method below to create a UUID and save it to the user preferences the first time the app is started:

```
- (NSString *)getUUID
{
    NSString *UUID = [[NSUserDefaults standardUserDefaults] objectForKey:@"uniqueID"];
    if (!UUID)
    {
        CFUUIDRef theUUID = CFUUIDCreate(NULL);
        CFStringRef string = CFUUIDCreateString(NULL, theUUID);
        CFRelease(theUUID);
        UUID = [(__bridge NSString*)string stringByReplacingOccurrencesOfString:@"-"withString:@""];
        [[NSUserDefaults standardUserDefaults] setValue:UUID forKey:@"uniqueID"];
    }
    return UUID;
} 
```

Hope that helps !

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:18:02.460

Apple 停止支持 iOS 的唯一标识符。这个源代码解决了这个问题。它根据设备的mac地址和bundle标识符生成一个唯一标识符。

请下载演示[http://bit.ly/10SXhrO](http://bit.ly/10SXhrO)

# ruby-on-rails - 设计：只允许用户重置密码

> ID：15917037
> 
> 赞同：4
> 
> 时间：2013-04-10T04:37:09.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个非常标准的`User`模型与设计。管理员`:admin`由模型上的布尔值控制，非管理员用户无法管理自己（即，只有管理员可以对用户进行更改）。

我想要的是允许用户在忘记密码时重置密码。他们将输入他们的电子邮件地址，然后通过电子邮件发送一个令牌，该令牌将授予他们更改它的权限。我已经开始了一个解决方案，但我真的不知道如何进行。

**用户.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessor :current_password
  attr_accessible :name, :password, :password_confirmation, :current_password, :email, :remember_me, :ftp, :colour1, :colour2, :logo, :logo2, :address, :url, :disclosure, :general_advice, :facebook, :twitter, :brand_id, :analytics
  attr_protected :admin
  validates_uniqueness_of :email, :ftp
  belongs_to :brand
  has_many :docs
  has_many :orders, :through => :docs
  has_attached_file :logo
  has_attached_file :logo2
end

class Ability
  include CanCan::Ability
  def initialize(user)
    user ||= User.new #guesting
    if user.admin?
      can :manage, :all
    else
      can :manage, :recoverable
    end
  end
end 
```

这是方法：

```
def reset
  @idiot = User.where(:email => params[:email]).first
    unless @idiot.nil?
      Notifier.send_reset_notice(@idiot).deliver
      @idiot.send_reset_password_instructions
      redirect_to new_user_session_url
    else
      redirect_to new_user_session_url, :flash => { :error => "That email address matches no user." }
    end
end 
```

用户收到设计电子邮件，但单击链接会将用户带到应用程序根目录，而不是密码重置表单。我不知道如何从这里开始。有什么想法吗？干杯!

**更新**

相关路线：

```
devise_for :users, :path => "d"
devise_scope :user do
  get '/sign_in' => 'devise/sessions#new'
  get '/sign_out' => 'devise/sessions#destroy'
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:38:49.730

首先，为句柄 Devise::PasswordsController 创建控制器

```
class PasswordusersController < Devise::PasswordsController 
  prepend_before_filter :require_no_authentication
  append_before_filter :assert_reset_token_passed, :only => :edit

  def new
    super
  end

  def create
    self.resource = resource_class.send_reset_password_instructions(resource_params)

    if successfully_sent?(resource)
      redirect_to root_path, :notice => "Instruction has been send to your email"
    else
      respond_with(resource)
    end
  end

  def edit
    super
  end

  def update
    self.resource = resource_class.reset_password_by_token(resource_params)

    if resource.errors.empty?
      resource.unlock_access! if unlockable?(resource)
      flash_message = resource.active_for_authentication? ? :updated : :updated_not_active
      set_flash_message(:notice, flash_message) if is_navigational_format?
      sign_in(resource_name, resource)
      redirect_to login_path, :notice => "Password has been change"
    else
      respond_with resource
    end
  end

  protected

    def after_sending_reset_password_instructions_path_for(resource_name)
      root_path
    end

    def assert_reset_token_passed
      super
    end

    def unlockable?(resource)
      super
    end

end 
```

然后，为设计运行生成视图

复制`new.html.erb`和`edit.html.erb`从`views/devise/passwords`到`views/passwordusers`

你可以`routes.rb`配置如：

```
devise_scope :user do
get '/reset_password' => "passowrdusers#new", :as => :reset_password
get '/new_password' => "passwordusers#edit", :as => :new_password
end 
```

编辑链接`devise/mailer/reset_password_instructions.html.erb`

```
<p><%= link_to 'Change My Password', new_password_path(@resource, :reset_password_token => @resource.reset_password_token) %></p> 
```

最后，在查看表单登录时添加这个

```
<%= link_to "Forgot Password?", reset_password_url(resource_name) %> 
```

**更新**

你可以`routes.rb`配置如：

```
devise_scope :user do
get '/reset_password' => "passowrdusers#new", :as => :reset_password
get '/new_password' => "passwordusers#edit", :as => :new_password
post '/send_email' => 'passwordusers#create', :as => :create_password
put '/change' =>  'passwordusers#update', :as => :update_password
end 
```

上`views/passwordusers/new.html.erb`

```
 <%= form_for("user", :url => create_password_path(resource_name), :html => { :method => :post }) do |f| %> 
```

上`views/passwordusers/edit.html.erb`

```
<%= form_for("user", :url => update_password_path(resource_name), :html => { :method => :put }) do |f| %> 
```

# javascript - 在 javascript/nodejs 中抛出异常真的那么糟糕吗？

> ID：15917039
> 
> 赞同：2
> 
> 时间：2013-04-10T04:37:12.660
> 
> 标签：javascript, node.js, exception, exception-handling

我正在阅读有关 nodejs 中的错误处理的内容，并且在阅读本文档时遇到了一些令人不安的事情：

[http://nodejs.org/api/domain.html](http://nodejs.org/api/domain.html)

它说“由于 throw 在 JavaScript 中的工作原理，几乎没有任何方法可以安全地“从你离开的地方继续”，而不会泄漏引用或创建其他类型的未定义的脆弱状态。

这听起来非常可怕。这真的是说任何时候抛出异常，我都需要关闭线程吗？我觉得我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:59:58.537

在正确的情况下抛出异常并没有错。这是一个有用的工具，可以这样使用。异常通常不是正常的、预期的、经常使用的代码路径的正确工具，因为它们很慢，比正常的返回值慢得多。如果性能对您很重要，通常最好在这些类型的情况下使用返回值。

但是，异常可以显着简化您的代码以应对意外错误情况或非正常情况，并且在像 javascript 这样的内存管理语言中，您通常不必担心抛出异常时的内存泄漏，除非您处于中间状态抛出异常时操纵持久的全局状态。当超出范围时引发异常时，所有局部变量及其引用都会为您清理。

除非您的代码写得不好，否则异常不会导致内存泄漏或脆弱状态，这对于指示错误条件的任何其他方法都是相同的。

# android - Havok 物理引擎 - Android

> ID：15917042
> 
> 赞同：2
> 
> 时间：2013-04-10T04:37:19.000
> 
> 标签：android, ios, physics, havok

谁能指导我在哪里可以找到有关如何在 Android/iOS 上使用 Havok 物理引擎的教程？

希望这不是一个完全愚蠢的问题，但我找不到任何教程或帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:04:45.340

（免责声明：我为 Havok 工作）

Havok Physics 的免费版本 ( [http://software.intel.com/sites/havok/en/](http://software.intel.com/sites/havok/en/) ) 仅适用于 Windows 并且只有 32 位版本。您可以从此处的 Havok 论坛获得帮助：http: [//software.intel.com/en-us/forums/havok/](http://software.intel.com/en-us/forums/havok/) 还有一些培训视频可帮助您启动并运行 Havok Physics：[http:// www.youtube.com/user/HavokEnthusiast](http://www.youtube.com/user/HavokEnthusiast)

**然而，Havok 很快将发布一个名为Project Anarchy**的跨平台引擎，该引擎对 iOS 和 Android 都是免费的。它将包括捆绑在一起的 Havok **Physics**、Havok **Animation Studio**和 Havok **AI 。**如需更多信息和订阅时事通讯，请访问：http: [//www.projectanarchy.com/](http://www.projectanarchy.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:59:53.960

只是想我应该添加以下内容：

[Havok 团队目前正在开发一款名为Project Anarchy](http://www.projectanarchy.com/)的（免费，尽管提到了“灵活的许可模式”）手机游戏引擎，该引擎将于今年春天推出，最初将支持 iO、Android 和 PlayStation Vita - Windows 8 支持'快来了'。是的，它包括 Havok Physics。

根据[Havok 网站](http://www.havok.com/solutions/mobile-game-developers)的说法， Project Anarchy 将附带：

*   全面的游戏示例和教程开始
*   通过论坛、问答和视频提供在线社区支持

推出后可能值得一看。

# ios - 未知转义序列 '\x20'

> ID：15917043
> 
> 赞同：0
> 
> 时间：2013-04-10T04:37:19.107
> 
> 标签：ios, sql-server, ios4

我已经创建了这段代码

```
NSString *insertSQL = [NSString stringWithFormat:@"Update Expense_Group set Expense_sum = Expense_sum-\%@\ where Expense_Type_Id = \"%@\"",strExpAmount,current_Expense_TypeId]; 
```

现在，我收到了这个警告“**未知转义序列'\x20'** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:39:11.037

您只需要“ `\`”转义该“ `stringWithFormat:`”调用中的引号...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:05:53.697

```
NSString *insertSQL = [NSString stringWithFormat:@"Update Expense_Group set Expense_sum = Expense_sum-'%@' where Expense_Type_Id = '%@'",strExpAmount,current_Expense_TypeId]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:45:35.600

```
NSString *insertSQL = [NSString stringWithFormat:@"Update Expense_Group set Expense_sum = Expense_sum-%@ where Expense_Type_Id = %@",strExpAmount,current_Expense_TypeId]; 
```

这可以解决 %@ 之前不需要转义序列的问题。

# java - ObjectInputStream 和 getInputStream

> ID：15917045
> 
> 赞同：1
> 
> 时间：2013-04-10T04:37:32.737
> 
> 标签：java, stream, runtime-error, objectinputstream, object-serialization

我正在开展一个学校项目，以下代码是为构建项目提供的示例（应该可以正常工作，但不是......）。没有编译错误，但是当我使用 telnet 对其进行测试时，显示以下消息：

```
java.io.StreamCorruptedException: invalid stream header: 56543130 
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:801)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
    at ThreadedDataObjectHandler.run(ThreadedDataObjectServer.java:41) 
```

第 41 行是

```
ObjectInputStream in =new ObjectInputStream(incoming.getInputStream()); 
```

这是我的代码：

```
import java.io.*;
import java.net.*;
import java.util.*;
public class ThreadedDataObjectServer {  
    public static void main(String[] args ) {  

      try 
  {  ServerSocket s = new ServerSocket(3000);

     for (;;)
     {  Socket incoming = s.accept( );
        new ThreadedDataObjectHandler(incoming).start();

     }   
  }
  catch (Exception e) 
  {  e.printStackTrace();
      } 
   } 
}

class ThreadedDataObjectHandler extends Thread
{
DataObject myObject = null;
private Socket incoming;
private String greeting="Hello!";
public ThreadedDataObjectHandler(Socket incoming) 
   { 
        this.incoming = incoming;
   }

   public void run()
   {  try 
      {     

    ObjectInputStream in =new ObjectInputStream(incoming.getInputStream());

    ObjectOutputStream out =new ObjectOutputStream(incoming.getOutputStream());

    myObject = (DataObject)in.readObject();

    System.out.println("Message read: " + myObject.getMessage());

    myObject.setMessage("Got it!");

    System.out.println("Message written: " + myObject.getMessage());

    out.writeObject(myObject);

    in.close();

    out.close();

    incoming.close();    

  }
  catch (Exception e) 
  {  e.printStackTrace();
  } 
   } 
}
class DataObject implements Serializable{
    protected String message;
    public DataObject(){
        message="";
    }
public void setMessage(String m){
    message=m;
}
    public String getMessage(){
    return message;
    }
} 
```

我尝试的是切换语句的顺序，`ObjectInputStream in=...`但`ObjectOutputStream out=...`没有运气。请帮助...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:09:25.150

根据我从评论中了解到的情况，您正在尝试使用 ObjectInputStream 从远程登录连接中读取对象。

你不能这样做。如果要使用 ObjectInputStream，则需要其他连接程序使用 ObjectOutputStream 编写。

你的 telnet 客户端并不真正关心 Java ObjectOutputStream、ObjectInputStream 和序列化。

所以我会尝试像包装在 BufferedReader 中的 InputStreamReader 之类的东西。

如果您只想测试连接性，只需编写一个小型 java 程序，该程序将连接到您的程序，而不是使用 telnet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:21:24.330

正如我在评论中提到的大卫，您必须编写一个客户端，该客户端使用 ObjectOutputStream 将相同的 DataObject 发送到服务器套接字。

由于您期望 DataObject，因此客户端需要发送 DataObject。当您使用 telnet 时，它会连接，但从那里您无法以 java 对象流理解的方式发送 DataObject。

有关服务器/客户端示例，请参阅[http://zeroh.tripod.com/ressources/sockets.html](http://zerioh.tripod.com/ressources/sockets.html)。

此外，由于它的一些学校练习试图理解这个概念，而不仅仅是复制。

# android - Service 的 stopSelfResult 方法的目的是什么？真正的用例将是完美的。

> ID：15917048
> 
> 赞同：1
> 
> 时间：2013-04-10T04:37:57.470
> 
> 标签：android, service

我看到如果我将跟踪传递给 onStartCommant 的 startIds，那么我可以使用最后一个来停止服务。如果我使用不是最后一个的 starttId 调用 stopSelfResult，那么服务将不会终止。

那么问题是如何在现实生活中使用 stopSelfResult 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:47:38.543

See AOSP packages/apps/Mms/src/com/android/mms/transaction/SmsReceiver.java

```
 86     /**
 87      * Called back by the service when it has finished processing notifications,
 88      * releasing the wake lock if the service is now stopping.
 89      */
 90     public static void finishStartingService(Service service, int startId) {
 91         synchronized (mStartingServiceSync) {
 92             if (mStartingService != null) {
 93                 if (service.stopSelfResult(startId)) {
 94                     mStartingService.release();
 95                 }
 96             }
 97         }
 98     } 
```

# php - 基于另一个下拉列表的动态下拉更新

> ID：15917055
> 
> 赞同：0
> 
> 时间：2013-04-10T04:38:35.397
> 
> 标签：php, ajax, json

我希望有人可以帮助我朝着正确的方向前进。我目前有一个文件，我将其命名为 data.php。在这个文件中，我有以下数据：

```
$sports_arr = array();
$sports_arr[] = "Basketball";
$sports_arr[] = "Baseball";
$sports_arr[] = "Football"; 
```

我在同一个 data.php 文件中也有以下数组：

```
$position = array();
$position['Basketball'][] = "Power Forward";
$position['Basketball'][] = "Small Forward";
$position['Basketball'][] = "Center";
$position['Soccer'][] = "Center Forward";
$position['Soccer'][] = "Right Wing";
$position['Soccer'][] = "Left Wing";
$position['Football'][] = "Halfback";
$position['Football'][] = "Fullback";
$position['Football'][] = "Wide Reciever";
$position['Football'][] = "Tight End";
$position['Football'][] = "Center"; 
```

问题是我试图弄清楚如何拥有第一个下拉列表，目前正在填充以下代码：

```
<div class="selectStyled">
    <select name="Sport1" class="styled">
    <option id="default" value="">Your Sport</option>
        <?php natsort($sports_arr);
        foreach ($sports_arr as $key => $val) { 
            echo "<option value='" . $val . "' id='position" . $key . "'>" . $val . "</option>";
        } ?>
    </select>
</div> 
```

这是我遇到问题的地方。我想要的是基于上面下拉列表的结果（例如用户选择棒球），我想要第二个后续下拉列表以填充正确的位置数组。因此，如果他们选择篮球，它将立即动态地填充页面上的第二个下拉列表，其中包含篮球位置。如果他们改变主意并选择足球，它将在第二个下拉列表中动态填充足球位置。

任何帮助在这里表示赞赏。我遇到了一个主要的路障......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:32:56.663

请试试：

```
<?php
$sports_arr = array();
$sports_arr[] = "Basketball";
$sports_arr[] = "Baseball";
$sports_arr[] = "Football";

$position = array();
$position['Basketball'][] = "Power Forward";
$position['Basketball'][] = "Small Forward";
$position['Basketball'][] = "Center";
$position['Soccer'][] = "Center Forward";
$position['Soccer'][] = "Right Wing";
$position['Soccer'][] = "Left Wing";
$position['Football'][] = "Halfback";
$position['Football'][] = "Fullback";
$position['Football'][] = "Wide Reciever";
$position['Football'][] = "Tight End";
$position['Football'][] = "Center";
?>

<div class="home">
    <select id="s1">
        <?php foreach($sports_arr as $sa) { ?>
        <option value="<?php echo $sa; ?>"><?php echo $sa; ?></option>
        <?php } ?>
    </select>
    <select id="s2">
    </select>
</div>

<script type="text/javascript">
var s1= document.getElementById("s1");
var s2 = document.getElementById("s2");
onchange(); //Change options after page load
s1.onchange = onchange; // change options when s1 is changed

function onchange() {
    <?php foreach ($sports_arr as $sa) {?>
        if (s1.value == '<?php echo $sa; ?>') {
            option_html = "";
            <?php if (isset($position[$sa])) { ?> // Make sure position is exist
                <?php foreach ($position[$sa] as $value) { ?>
                    option_html += "<option><?php echo $value; ?></option>";
                <?php } ?>
            <?php } ?>
            s2.innerHTML = option_html;
        }
    <?php } ?>
}
</script> 
```

大多数时候，人们使用 ajax，但如果你的网络很慢，ajax 就不是好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:51:45.067

如果用户从第一个下拉列表中选择篮球，您希望，篮球阵列的所有记录显示在第二个下拉列表中。

所以你应该在第一个下拉列表的 onChange() 事件上使用 AJAX 函数。

# clojure - 如何确定clojure中nil的含义？

> ID：15917056
> 
> 赞同：3
> 
> 时间：2013-04-10T04:38:37.900
> 
> 标签：clojure

例如，

```
> (some #{nil} #{nil 1 2 3})
nil

> (some #{} #{nil 1 2 3})
nil 
```

我知道我可以使用

```
(some nil? #{nil 1 2 3}) 
```

检查零值。目前我想不出任何好的例子。

但是一般情况下，当返回 nil 时，如何判断 nil 是什么都没有找到还是 nil 的值被找到呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:16:35.797

`nil`只是一个值，其含义取决于上下文。

它就像这方面的所有其他值一样：唯一需要注意的是它是，即在条件表达式中`falsy`算作。`false`

需要注意的三个特殊情况：

*   `nil`是用于指示空序列的返回值，例如在`(seq [])`
*   `nil`通常用作返回值来表示假，例如在`(or false nil)`
*   `nil`当映射查找找不到给定键时默认返回，例如在`({:a 1} :b)`

这些情况有时会引起歧义：如果是这样，那么您需要使用不同的功能。你的例子是一个很好的例子：

*   `(some #{nil} #{1 2 3})`=> `nil`（失败 - 未找到结果）
*   `(some #{nil} #{nil 1 2 3})`=> `nil`（成功 - 没有找到结果！！！）

在这种情况下，您只是选择了错误的函数：您不能使用 set`#{nil}`来检测 nils.... 相反，您可以使用`nil?`或者您甚至可以使用替代返回值来做一些花哨的事情，例如`#(get #{nil} % :not-found)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:59:42.950

这不是您要问的问题，而不是 Clojure 特有的问题吗？

你可以问：

```
> (filter nil? #{nil 1 2 3})
> (nil) 
```

它告诉你集合中有一个 nil；你得到了你所要求的——你问了一个模棱两可的问题，得到了一个适当模棱两可的回答。

# php - Amazon EC2 中的 403 错误

> ID：15917063
> 
> 赞同：2
> 
> 时间：2013-04-10T04:39:14.403
> 
> 标签：php, amazon-ec2, amazon, http-status-code-403

我尝试在 AWS 论坛上发布此内容，但没有人回复...

我可以让示例 PHP 应用程序工作，但不能让我自己上传的 PHP 应用程序工作

在过去的一两天里，我一直在终止并重试大量环境和实例，试图让这一切顺利进行（我刚刚注册了免费套餐，并且正在使用微实例）

现在我在“我的第一个 Elastic Beanstalk 应用程序”中有两个环境（我也尝试过将其作为两个单独的应用程序并遇到同样的问题）

我可以让 SSH 在它们两个上工作，但是每当我从控制台的弹性 beanstalk 部分单击“查看运行版本”时，我在已上传的应用程序上都会收到“403 Forbidden”，但能够查看示例应用程序我的浏览器很好（无论它们是在同一个实例和/或环境中，还是它们完全分开，结果都是一样的）。

在 MacOSX 中上传我的 PHP 应用程序时，我右键单击并在包含的文件夹上选择“压缩”并在上传前创建一个 .zip（通过 SSH 查看文件时似乎解压缩得很好）

我刚刚启动了示例环境和我自己的环境，只是注意到事件有所不同，示例应用程序创建 AutoScaling 信息 CloudWatch，并将它创建的实例添加到环境中。我的应用程序没有说这些，但它确实说它在*** *.elasticbeanstalk.com 上可用，它在我的 ec2 中创建和实例，我可以通过 ssh 连接到它，它说它已成功启动，但在浏览器中仍然不可用

至于安全组，我已经将它们都设置在同一个组中，并且我已经在不同的组上尝试过它们，无论哪种方式我在我的应用程序上遇到相同的错误，但从来没有在示例应用程序上。

在 ssh 上，我在 var/www 上运行“ls -l”，发现 var/www/html 对每个设置都具有相同的权限，但它显示：lrwxrwxrwx 1 root root 16 Apr 6 23:07 html -> /var/app/当前的

我以前似乎没有 html -> /var/app/current，我去了那个文件夹，发现权限不同，-rw-r--r-- 显示在示例 PHP 应用程序上的所有文件中，目录包含我的应用程序是 drwxr-xr-x -> 所以我改为 drw-r--r-- 但这并没有改变 403 错误...

我很困惑为什么我上传的应用程序的根目录是 drwxr-xr-x 并不意味着所有人都有执行权限？看起来 drw-r--r-- 将是我想要的。给我读/写权限，而其他人只是读权限，这似乎是一个网络服务器应该是正确的？

无论哪种方式，因为这超出了我的想象，我将终止我更改权限的实例，以确保安全，直到我听到人们的一些建议......

对我来说，这似乎是文件权限或我在 PHP 应用程序的环境事件中没有看到“已添加 ** 实例”到环境的事实，但我确实在示例应用程序中看到了它，我没有在做什么？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T11:11:57.830

如果您只是选择所有需要的文件，然后将它们压缩成一个存档，并通过 AWS 上的 Beanstalk 应用程序上传，它们将出现在根目录中。正如 Ruchit Rami 提到的，如果您压缩文件夹本身，文件将出现在文件名的目录下。

# sql - 表或列名不能以数字开头？

> ID：15917064
> 
> 赞同：22
> 
> 时间：2013-04-10T04:39:18.743
> 
> 标签：sql, postgresql, naming-conventions

我尝试创建`15909434_user`使用如下语法命名的表：

```
CREATE TABLE 15909434_user ( ... ) 
```

当然会产生错误。然后，在我尝试用谷歌进行一些研究之后，我在[这里](http://www.informit.com/articles/article.aspx?p=409471)找到了一篇很好的文章，它描述了：

> 当你在 PostgreSQL 中创建一个对象时，你给那个对象一个名字。每个表都有一个名称，每个列都有一个名称，等等。PostgreSQL 使用单一数据类型来定义所有对象名称：`name`类型。
> 
> type 的值`name`是 63 个或更少字符的字符串。名称必须以字母或下划线开头；字符串的其余部分可以包含字母、数字和下划线。
> 
> ...
> 
> 如果您发现需要创建不符合这些规则的对象，可以将名称用双引号引起来。将名称括在引号中会创建带引号的标识符。例如，您可以创建一个名称为“ `3.14159`”的表——双引号是必需的，但实际上不是名称的一部分（也就是说，它们不被存储并且不计入 63 个字符的限制）。...

好的，现在我知道如何使用这种语法来解决这个问题（在表名上加上双引号）：

```
CREATE TABLE "15909434_user" ( ... ) 
```

您可以创建表名或列名，例如`"15909434_user"`and `user_15909434`，但不能创建以数字开头的表名或列名而不使用双引号。

那么，我很好奇其背后的原因（除了它是一个约定）。为什么应用这个约定？是为了避免语法限制或其他原因吗？

提前感谢您的关注！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T04:59:00.493

它来自原始的 sql 标准，通过几层间接最终到达一个**标识符开始**块，这是几件事之一，但主要是“一个简单的拉丁字母”。还有其他可以使用的东西，但是如果您想查看所有详细信息，请访问[http://en.wikipedia.org/wiki/SQL-92](http://en.wikipedia.org/wiki/SQL-92)并点击实际标准的链接（第 85 页）

使用非数字标识符引入者可以更轻松、更快速地编写解析器来解码 sql 以执行，但引用的形式也可以。

* * *

### 编辑：为什么解析器更容易？

解析器的问题更多在于`SELECT`-list 子句而不是`FROM`子句。select-list 是从表中选择的表达式列表，它非常灵活，允许简单的列名和数字表达式。考虑以下：

```
SELECT 2e2 + 3.4 FROM ... 
```

如果表名和列名可以以数字开头，那么是`2e2`列名还是有效数字（`e`数字文字中通常允许使用格式）并且是`3.4`表“ `3`”和列“ `4`”还是数值`3.4`？

具有**标识符**以简单的拉丁字母（和其他一些特定的东西）开头的规则意味着看到的解析器`2e2`可以快速识别这将是一个数字表达式，同样处理`3.4`

虽然可以设计一个允许数字前导字符的方案，但这可能会导致更晦涩的规则（意见），所以这个规则是一个很好的解决方案。如果您首先允许使用数字，那么它总是需要引用，这可以说不是“干净”的。

* * *

> **免责声明**，我已经稍微简化了上面的内容，忽略了相关名称以保持简短。我对 postgres 并不完全熟悉，但已经根据 Oracle RDB 文档和 sql 规范仔细检查了上述答案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T04:45:18.897

我想这与语法有关。

`SELECT 24*DAY_NUMBER as X from MY_TABLE`

很好，但如果允许 24 作为列名，则不明确。

添加引号意味着您明确引用标识符而不是常量。所以为了使用它，无论如何你总是必须逃避它。

# c++ - Xpcom 组件使 firefox 崩溃

> ID：15917066
> 
> 赞同：2
> 
> 时间：2013-04-10T04:39:33.143
> 
> 标签：c++, xpcom

我正在构建一个简单的 XPCOM 组件。但是每次我试图调用这个 xpcom 组件的方法时，firefox 都会崩溃。

文件层次结构如下：

```
HelloXpcom.xpi
---chrome.manifest
---install.rdf
---chrome
------content
---------sample.xul
---components
------HelloXpcom.dll
------nsISample.xpt 
```

chrome.manifest 片段

```
content     sample    chrome/content/
interfaces components/nsISample.xpt
binary-component components/HelloXpcom.dll

overlay chrome://browser/content/browser.xul chrome://sample/content/sample.xul 
```

我的界面空闲：

```
#include "nsISupports.idl"
[scriptable, uuid(F7F48977-382E-461B-B04A-44567EE6D45A)]
interface nsISample : nsISupports
{
    attribute string value;
    void writeValue(in string aPrefix);
    void poke(in string aValue);
}; 
```

使用 xpidl.exe 生成 npISample.h 和 npISample.xpt。而所有的实现方法几乎什么都没有，只是做一些简单的事情。

样本.xul

```
<?xml version="1.0"?>
<overlay id="sample" 
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<statusbar id="status-bar">
<script>
function DoXPCOM()
{
    try {
        alert("1");
        var sample = Components.classes["@baofeng/sample;1"].createInstance();
        alert("2");
        sample = sample.QueryInterface(Components.interfaces.nsISample);
        alert("3");
        dump("sample = " + sample + "\n");
    }
    catch(err) {
        alert(err);
        return;
    }

    var res = sample.SetValue("123");
    var str = "";
    obj.GetValue(str);
    alert(str);
}
</script>
<button label="xpcom" oncommand="DoXPCOM();"/>
</statusbar>
</overlay> 
```

`"alert("1");"``"Components.classes["@baofeng/sample;1"].createInstance();"`被执行，它在联系人 ID `"@baofeng/sample;1"`被 Firefox 识别 时崩溃 ，​​如果没有，应该有一些信息，如`"@baofeng/sample;1"`undefined 弹出。所以 createInstance() 方法是重点。
有人可以帮我解决这个问题吗？

# android - 捕获图像背景中的图像浮雕

> ID：15917068
> 
> 赞同：2
> 
> 时间：2013-04-10T04:39:37.240
> 
> 标签：android, image-processing

我想将背景图像压印到捕获的相机图像上。

即假设我在办公室点击一个人的图像，然后选择该人的图像并将其压印在已经存在的山背景图像上，以便该人的最终图像显示他在山边拍摄了图像。

有人可以对此提出一些想法或分享代码片段来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:47:42.703

即使在阅读了示例之后，我也没有完全理解压花部分。图像浮雕通常用高光或阴影替换图像的每个像素，因此图像区域被提升到具有不同深度的多个级别。

但是你问的很复杂。如果我是对的，您想合并两个图像，其中第一个图像中的人将出现在山边图像中。

您将在这里面临的问题是在一些随机图像中对人进行对象检测。这将是非常困难的。此外，它将涉及一些数学的图像的核心处理。归根结底，您必须记住，您要的是移动设备而不是台式机。

我建议您在继续您的想法之前对对象检测进行一些广泛的研究。

这里有一些有用的链接

[http://en.wikipedia.org/wiki/Outline_of_object_recognition](http://en.wikipedia.org/wiki/Outline_of_object_recognition)

[对象检测 android opencv](https://stackoverflow.com/questions/7786622/object-detection-android-opencv)

[http://opencv.org/android](http://opencv.org/android) 你可以搜索类似这样的问题

# java - 用于查看不同 JVM 日志的通用 UI

> ID：15917071
> 
> 赞同：3
> 
> 时间：2013-04-10T04:40:06.453
> 
> 标签：java, logging

我们有 4 个盒子，每个盒子都有 2 个 JVM，用于部署我们的应用程序。有一个负载均衡器可以将请求重定向到任何 JVM。

当我们需要分析问题时，打开 8 个 putty 会话来查看日志文件非常笨拙。

有没有什么方法或开源提供通用 UI 来查看不同盒子的日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:43:53.103

[Logstash](http://logstash.net/)就是这样做的。您甚至可以解析和索引日志以供以后检索。还有一个 WEB UI，可让您搜索最后 X 分钟的日志。看看他们的[介绍视频和演示](http://logstash.net/docs/1.1.9/learn)。

# apache - Apache server doesn't work on external IP (ports are forwarded)

> ID：15917074
> 
> 赞同：2
> 
> 时间：2013-04-10T04:40:20.627
> 
> 标签：apache, port, external

Here is my situation, step by step:

*   Apache 2.2 on Windows 7

*   Restarted the apache server plenty of times up to my latest changes being described here

*   Changed apache's port from 80 to 8080\. There is only one "Listen" for 8080 and not for other ports like 80

*   Type localhost on browser and doesnt work as expected

*   type localhost:8080 and everything works perfectly

*   go to [http://www.yougetsignal.com/tools/open-ports/](http://www.yougetsignal.com/tools/open-ports/) and [http://www.canyouseeme.org/](http://www.canyouseeme.org/) while apache is running, they report port 8080 is open

*   type my external IP (the same one reported by yougetsignal.com above) followed by :8080 and get "this webpage is not available"

*   Windows firewall is completely turned off during these tests

*   People that access my external IP actually get my router asking for user and pass authentication (I have no auth requests on htaccess or config)

    What on earth could be causing the external ip not to work properly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:56:41.797

问题是您的 ip 外部地址从您的网络外部将流量引导到您的路由器，因为它是连接到调制解调器的第一件事。这就是您的一些用户看到您的路由器页面的原因。您需要在路由器中设置端口转发，以便将端口 8080 上的请求从路由器直接转发到托管站点的计算机。注意：打开可以在线搜索的端口存在一些潜在的安全风险。

这是一个示例说明视频，或者您可以在线搜索其他端口转发说明。 [http://www.youtube.com/watch?v=Kp-R-eHiQco](http://www.youtube.com/watch?v=Kp-R-eHiQco)

从那里您还需要像您所做的那样打开端口 8080 的 Windows 防火墙端口（或将其关闭）。这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:41:19.903

发现两个不同的问题：

1.  我的路由器总是打开 8080 端口，无论我转发与否。它可能将它用于与 apache 冲突的内部事物。所以我给大家的建议是，确保你选择一个 CLOSED 端口在 apache 上使用

2.  我更改为端口 4000，并对其进行了测试。没有工作一分钟，设置混乱，回到原来的 4000 设置和 bam。作品。关闭服务器，重新打开，仍然工作并且端口是打开的。正如我所怀疑的，关闭服务器，打开电脑，去洗澡，10 分钟后回来，重新打开服务器，不再工作，网站将端口 4000 列为关闭。

    所以看起来我的路由器不一致，有时他可以打开端口，有时由于某种原因无法打开。

# python - 如何从多维数组中返回最大值？

> ID：15917076
> 
> 赞同：12
> 
> 时间：2013-04-10T04:40:29.663
> 
> 标签：python, numpy

假设我有一个多维数组，如下所示：

```
[
   [.1, .2, .9],
   [.3, .4, .5],
   [.2, .4, .8]
] 
```

返回包含每个子数组（）中的最大值的单维数组的最佳*方法是`[.9,.5,.8]`什么？我假设我可以手动执行以下操作：

```
newArray = []
for subarray in array:
   maxItem = 0
   for item in subarray:
       if item > maxItem:
           maxItem = item
   newArray.append(maxItem) 
```

但我很好奇是否有更清洁的方法来做到这一点？

*在这种情况下，最好 = 最少的代码行

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T05:00:54.307

尝试这个：

```
max(array.flatten()) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-10T04:46:07.193

`map`with`max`是更清洁的 IMO。

```
>>> arr = [
...    [.1, .2, .9],
...    [.3, .4, .5],
...    [.2, .4, .8]
... ]
>>> map(max, arr)
[0.9, 0.5, 0.8] 
```

[地图文档](http://docs.python.org/2/library/functions.html#map)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-10T04:53:14.170

由于您在评论中提到您正在使用 numpy ...

```
>>> import numpy as np
>>> a = np.random.rand(3,3)
>>> a
array([[ 0.43852835,  0.07928864,  0.33829191],
       [ 0.60776121,  0.02688291,  0.67274362],
       [ 0.2188034 ,  0.58202254,  0.44704166]])
>>> a.max(axis=1)
array([ 0.43852835,  0.67274362,  0.58202254]) 
```

* * *

**编辑：** 文档在[这里](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-10T04:45:00.347

使用列表推导：

```
maxed = [max(sub_array) for sub_array in array] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T04:46:36.183

```
 map(max,my_array) 
```

我觉得很短...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T04:48:29.403

也许不是第二个 for 循环，而是使用[max](http://docs.python.org/2/library/functions.html)函数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-25T19:00:12.480

你可以使用 numpy

```
import numpy as np
w = [[2,3,4],[5,6,7],[1,2,11]]
h=[]
for i in w:
    h.append(np.amax(i))
print(h) 
```

# node.js - nodejs + https + express - 错误 324 (net::ERR_EMPTY_RESPONSE)

> ID：15917079
> 
> 赞同：3
> 
> 时间：2013-04-10T04:40:43.987
> 
> 标签：node.js, nginx, express

我有一个结构如下的nodejs服务器：（app.js）：

```
var fs = require('fs'),
    http = require('http'),
    https = require('https'),
    express = require('express'),
    connect = require('express/node_modules/connect'),
    app = module.exports = express();

var ssl_options = {
    key: fs.readFileSync('/etc/nginx/ssl/server.key'),
    cert: fs.readFileSync('/etc/nginx/ssl/server.crt')
};

var server = https.createServer(ssl_options, app);

// EXPRESS

// app.set('view options', { layout: false });

var auth_token = "asdfasfdasdfasdf";
var express_session_id = "express.sid";

app.configure(function () {
    app.use(express.cookieParser());
    app.use(express.session({secret: auth_token, key: express_session_id}));

    app.set("view options", {layout: false});
});

app.get('/', function (req, res) {
    console.log (req.headers);
    fs.readFile(__dirname + '/index.html', function(err, data){
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.write(data, 'utf8');
        res.end();
    });
});

app.listen = function(port) {
    server.listen(port);
    console_log.log('info', "COTTONMOUTH server listening on port " + port);
}; 
```

我有一个运行上述 app.js 的 cluster.js：

```
var cluster = require('cluster'),
    os = require('os'),
    workers = {};

if (cluster.isMaster) {

    cluster.on('exit', function(worker, code, signal) {
        if (worker.suicide === false) {
            var exitCode = worker.process.exitCode;
            console.error('worker ' + worker.process.pid + ' died ('+exitCode+'). restarting...');
            cluster.fork();
        }
    });

    var n = process.env.PROC || os.cpus().length;
    for(var i = 0; i < n; i++ ) {
        cluster.fork();
    }

    process.on('SIGTERM', function() {
        console.log('[MASTER] Going for shutdown...');
        for (var id in cluster.workers) { 
            console.log('\tkilling worker: ' + cluster.workers[id].process.pid);
            cluster.workers[id].destroy();
        }
        console.log("[MASTER] Here's looking at you, kid.");
    });

} else {
    require('./app').listen(process.env.PORT || 3456);
} 
```

我的问题是以下设置在我的 localhost 虚拟机环境（在 mac 主机上运行的 ubuntu 虚拟机）上运行良好。我可以使用 dev.domain.com:3456 访问 nodejs 服务器。

但是，当我将它移动到我的生产机架空间服务器（相同的环境配置和设置）时，并尝试通过 prod.domain.com:3456 访问它

浏览器挂了一会儿然后返回`Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.`

我做了一些研究，发现了一些线索，但并没有太大帮助。

有任何想法吗？

**更新：**

当我将端口降低到 90 时，它似乎可以正常工作，这很有趣。我现在要把它留在 90 端口，但如果有人知道为什么会这样的话。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T07:05:41.177

当我的请求变得太大 (>65K) 时，我收到此错误消息。我的解决方案是将数据减少为几个片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T14:32:22.970

**临时解决方法：**

当我将端口降低到 90 时，它似乎可以正常工作，这很有趣。我现在要把它留在 90 端口，但如果有人知道为什么会这样的话。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T11:58:09.870

当您从前端添加额外的“/”以调用后端 API 时，也可能会遇到此问题例如：我的路由是 baseUrl/api/customer，但我正在向 baseUrl/api/customer/ 发送请求，至少它不起作用这是我的情况。太笨了，没注意到这一点。也许这对某人有帮助

# javascript - 无法引用父目录中的 XML 文件 (xmlhttp.open)

> ID：15917085
> 
> 赞同：1
> 
> 时间：2013-04-10T04:41:31.470
> 
> 标签：javascript, xml

我遇到了一些无法访问父目录中的 XML 文件的 Javascript 问题。如果它与页面位于同一目录中，则它可以访问相同的文件。

```
xmlhttp.open("GET", "news.xml", false);  // = Works! (if I copy the XML file in the same folder)
xmlhttp.open("GET", "random/news.xml", false);  // = Works!
xmlhttp.open("GET", "../news.xml", false);  // = Doesn't work!********* 
```

谷歌搜索时，我似乎找不到任何针对父目录的规则……这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:51:01.377

[同源政策](http://www.w3.org/Security/wiki/Same_Origin_Policy)是不允许的。

由于您正在访问本地文件，因此使用 XmlHttpRequest 您可以打开同一目录中的文件。

[Firefox 允许访问](https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file%3a_URIs)主文件所在目录的子目录之一中的文件。

# r - *适用于两个向量的组合

> ID：15917088
> 
> 赞同：2
> 
> 时间：2013-04-10T04:41:34.887
> 
> 标签：r

## 问题

我可以使用哪些应用函数从数据转到结果？

## 数据

```
start      <- "My name is"
name.first <- c("John","Jane")
name.last  <- c("Doe","Smith")
end        <- "and I am a person." 
```

## 期望的结果

```
result.1 <- c("My name is John Doe and I am a person",
              "My name is Jane Doe and I am a person",
              "My name is John Smith and I am a person",
              "My name is Jane Smith and I am a person")

result.2 <- as.list(desired.1) 
```

## 我微弱的尝试...

我认为`mapply`可以在这里解决问题，但它只产生两个输出，而不是我想要的四个。

```
> mapply(function(x,y, start, end) paste(start, x, y, end, sep = " "),
+        name.first, 
+        name.last, 
+        MoreArgs = list(start, end),
+        USE.NAMES = FALSE)
[1] "My name is John Doe and I am a person."  
[2] "My name is Jane Smith and I am a person." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:46:54.847

You just need `outer` and `paste`

```
start <- "My name is"
name.first <- c("John", "Jane")
name.last <- c("Doe", "Smith")
end <- "and I am a person."

as.vector(outer(name.first, name.last, paste))
## [1] "John Doe"   "Jane Doe"   "John Smith" "Jane Smith"

paste("My name is ", as.vector(outer(name.first, name.last, paste)))
## [1] "My name is  John Doe"   "My name is  Jane Doe"   "My name is  John Smith" "My name is  Jane Smith"

paste("My name is ", as.vector(outer(name.first, name.last, paste)), " and I am a person")
## [1] "My name is  John Doe  and I am a person"   "My name is  Jane Doe  and I am a person"  
## [3] "My name is  John Smith  and I am a person" "My name is  Jane Smith  and I am a person"

as.list(paste("My name is ", as.vector(outer(name.first, name.last, paste)), " and I am a person"))
## [[1]]
## [1] "My name is  John Doe  and I am a person"
## 
## [[2]]
## [1] "My name is  Jane Doe  and I am a person"
## 
## [[3]]
## [1] "My name is  John Smith  and I am a person"
## 
## [[4]]
## [1] "My name is  Jane Smith  and I am a person"
## 
```

As you saw in your attempt, `mapply` will match only corresponding elements of it's input vector i.e. for first `iteration` it will use first elements of all input vectors, for second `iteration` it will use second elements of all input vectors and so on.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:59:06.770

```
paste( start = "My name is",
        apply( expand.grid(name.first = c("John","Jane"),
                           name.last  = c("Doe","Smith"), 
                           stringsAsFactors=FALSE),
               1, paste, collapse=" "),
        end  = "and I am a person.")

[1] "My name is John Doe and I am a person."   "My name is Jane Doe and I am a person."  
[3] "My name is John Smith and I am a person." "My name is Jane Smith and I am a person." 
```

# visual-studio-2010 - How can i debug my application in my windows phone 8?

> ID：15917092
> 
> 赞同：6
> 
> 时间：2013-04-10T04:41:49.140
> 
> 标签：visual-studio-2010, windows-phone-7, visual-studio-2012, windows-phone-8

Am using Visual Studio 2010 and developed a application and debugged it in a windows phone 7.5, after registering with [windows phone developer Registration] app.

Now i got a new windows phone 8, i could not register because i read that, the windows phone 8 will not be supported by zune. Without zune [windows phone developer Registration] will not detect your phone.

Some people says i need to use Visual studio 2012 for windows phone 8, then the problem i have i am using only windows 7 desktop operating system. Visual studio 2012 needs windows 8 desktop operating system.

Please suggest me can i run my app in windows phone 8 with visual studio 2010.

If the only way is to develop in Visual studio 2012 then will my application support for windows phone 7.

Please help me with your suggestions and answers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:00:36.803

就是这样，你需要 WP8 的 VS2012，它本身需要 Windows 8。你可以随时下载两者的评估版并使用它们，最终在虚拟机中使用。与开发 Windows 8 应用程序的情况几乎相同。

关于手机版本之间的兼容性，微软重新编译了 WP7 应用程序，以便它们可以在 WP8 上运行，但我不知道这会反过来发生。

WP8 不需要 Zune，而且它在 Windows 8 上也不可用。

出于这个原因，我自己不得不切换到 Windows 8...

# ruby-on-rails - 在 Rails 项目中使用带有 slim 的 angularjs 时遇到问题

> ID：15917094
> 
> 赞同：6
> 
> 时间：2013-04-10T04:41:54.427
> 
> 标签：ruby-on-rails, angularjs, slim-lang

我终于决定试一试 angularjs，但我遇到了一些早期的麻烦。

我正在为视图使用 Rails 3.2 和 Slim 模板 gem。

我只是在这里尝试来自 angularjs 站点的示例：http: [//angularjs.org/#todo-html](http://angularjs.org/#todo-html)

这是相关的位：

```
 <div ng-controller="TodoCtrl">
   <span>{{remaining()}} of {{todos.length}} remaining</span> 
```

苗条的会是这样的：

```
div(ng-controller="TodoCtrl")
  span {{remaining()}} of {{todos.length}} remaining 
```

问题是 Slim 只是打印：

```
{{remaining()}} of {{todos.length}} remaining 
```

从字面上看是一个字符串。

谁能让 Slim 和 Angular 一起玩？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T05:24:58.750

我终于让它工作了。

我必须进入我的布局并这样做：

```
html(ng-app='') 
```

您也可以将其添加到特定页面上的 div 中。

```
div(ng-app='')
  div(ng-controller="TodoCtrl")
    span {{remaining()}} of {{todos.length}} remaining 
```

希望这可以帮助某人。我花了一点时间才弄清楚。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-27T07:59:44.863

你也可以这样做：

```
html [ng-app] 
```

或者：

```
div [ng-app]
  div [ng-controller="TodoCtrl"]
    span {{remaining()}} of {{todos.length}} remaining 
```

# sql-server-2008 - Subquery returned more than 1 value in insert statement

> ID：15917099
> 
> 赞同：0
> 
> 时间：2013-04-10T04:42:33.040
> 
> 标签：sql-server-2008

I need solution to fix this error Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. I don't have subquery in my insert statement but still I am getting this error.

Code:

```
INSERT INTO enquiries_dtls(confdate,confname,region,enquiry,attendedby,dctname,
                           hospital,contactno,email,addr)
VALUES('10/04/2013',
       'APAO',
       'Delhi',
       'test',
       'test',
       'test',
       'test',
       '123214',
       'abc@abc.com',
       'test') 
```

DDL:

```
CREATE TABLE [dbo].[enquiries_dtls]
(
  [sno] [int] IDENTITY(1,1) NOT NULL, 
  [Timestamp] [timestamp] NULL,
  [confdate] [date] NULL,
  [confname] [varchar](max) NULL, 
  [region] [varchar](50) NULL,
  [enquiry] [varchar](max) NULL,
  [attendedby] [varchar](50) NULL,
  [dctname] [varchar](50) NULL,
  [hospital] [varchar](50) NULL,
  [contactno] [int] NULL,
  [email] [varchar](50) NULL,
  [addr] [varchar](max) NULL,
  [stsupdate] [varchar](max) NULL,
  [dtupdate] [date] NULL, 
  [closingdate] [date] NULL,
  [clsedby] [varchar](50) NULL,
  [revenue] [varchar](50) NULL,
  [apprstatus] [varchar](50) NULL,
  [clsed] [varchar](50) NULL,
  [enqId] [varchar](50) NULL
); 
```

# java - Updating android APK not via play store

> ID：15917100
> 
> 赞同：2
> 
> 时间：2013-04-10T04:42:45.693
> 
> 标签：java, android, apk

First of all, I'm sorry I don't speak very good english. I have a thesis project to make android app similiar like logo quiz using java. Basicaly, I have to make the admin site of this app or make it updatable not via play store. I'm going to put the newest APK version in a website host. Does anyone here know how to make it work like that? Or maybe you have another idea to make the admin site? please tell me

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:55:08.570

> 更新也必须安装。用户将检查是否有任何最新版本。然后用户将下载它并自动安装下载的APK

这并不容易。您唯一的选择是编写一些服务器端代码，让客户端知道最新版本是什么。客户端可以触发本地通知并提醒用户有新版本可用。

Facebook[设法做到](http://www.insidefacebook.com/2013/03/18/silent-updates-for-android-download-latest-version-of-facebook-without-google-play/)了你所要求的，但我敢肯定它投入了大量的工程努力。

**[编辑]**

Google 已[更新](https://play.google.com/about/developer-content-policy.html)其政策以禁止动态更新。

> “从 Google Play 下载的应用不得使用 Google Play 更新机制以外的任何方法修改、替换或更新自己的 APK 二进制代码。”</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:58:26.453

仅供参考 如果不上传到 Play 商店，用户将永远不会知道您的应用程序的更新。

或者

您必须在管理员中实施某种通知并使用该应用发送给您的用户，并通过该通知要求用户从您的网络下载更新的 APK。

# javascript - What exactly does domain.dispose() do in nodejs? Are there any hooks?

> ID：15917102
> 
> 赞同：6
> 
> 时间：2013-04-10T04:42:56.307
> 
> 标签：javascript, node.js, error-handling

Reading the documentation at [http://nodejs.org/api/domain.html](http://nodejs.org/api/domain.html) makes it a little vague: "*makes a best effort attempt to clean up any and all IO that is associated with the domain*". It mentions that timers are shutdown, which isn't exactly IO. It would be very nice to know the comprehensive list of things domain.dispose does. Does anyone have that list?

Also, is there any way to hook into that functionality - ie allow some custom clean up code to be called when domain.dispose() is run?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:48:08.257

The dispose function calls the exit and dispose functions, removes all listeners, removes all error handlers, and attempts to kill all members of the domain. The function the checks if the domain has a parent, and if it does, then it is removed from the domain. The domain is then set for garbage collection, and the marked as disposed.

From the Node documentation:

> Once the domain is disposed the dispose event will emit.

I would go more in-depth on the topic, but the Node source is already nicely annotated.

The timer you are talking about would be here, where the members of the domain are being iterated through.

```
this.members.forEach(function(m) {
  // if it's a timeout or interval, cancel it.
  clearTimeout(m);
}); 
```

Here's from the Node [source](https://github.com/joyent/node/blob/master/lib/domain.js):

```
Domain.prototype.dispose = function() {
  if (this._disposed) return;

  // if we're the active domain, then get out now.
  this.exit();

  this.emit('dispose');

  // remove error handlers.
  this.removeAllListeners();
  this.on('error', function() {});

  // try to kill all the members.
  // XXX There should be more consistent ways
  // to shut down things!
  this.members.forEach(function(m) {
    // if it's a timeout or interval, cancel it.
    clearTimeout(m);

    // drop all event listeners.
    if (m instanceof EventEmitter) {
      m.removeAllListeners();
      // swallow errors
      m.on('error', function() {});
    }

    // Be careful!
    // By definition, we're likely in error-ridden territory here,
    // so it's quite possible that calling some of these methods
    // might cause additional exceptions to be thrown.
    endMethods.forEach(function(method) {
      if (typeof m[method] === 'function') {
        try {
          m[method]();
        } catch (er) {}
      }
    });

  });

  // remove from parent domain, if there is one.
  if (this.domain) this.domain.remove(this);

  // kill the references so that they can be properly gc'ed.
  this.members.length = 0;

  // finally, mark this domain as 'no longer relevant'
  // so that it can't be entered or activated.
  this._disposed = true;
}; 
```

# android - Overflow ActionBar actions not showing in Menu for Android 2.x

> ID：15917105
> 
> 赞同：4
> 
> 时间：2013-04-10T04:43:21.070
> 
> 标签：android, actionbarsherlock

I'm using ActionBarSherlock to provide a unified UI for my Android 2.x and Android 4.x users. I have a menu with 6 items.

On a 2.x, 480px wide device with an hdpi screen, only 5 of the icons show. The device has a hardware Menu button, but when I tap it, nothing shows up. I expected it to popup and show the Action that wasn't able to fit.

![enter image description here](https://i.stack.imgur.com/S6HEW.png)

I expect either the three-vertical-dots button to appear in the ActionBar to show a dropdown with the overflowed actions or I expect the physical Menu button to show the old style menu with the overflowed actions.

What am I missing or what am I doing wrong?

Here is my defined menu.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/add"
        android:icon="@drawable/ic_menu_btn_add"
        android:showAsAction="always"
        android:title="Add"/>
    <item
        android:id="@+id/calculateNPV"
        android:icon="@drawable/menu_icon_npv"
        android:showAsAction="always"
        android:title="NPV"/>
    <item
        android:id="@+id/calculateIRR"
        android:icon="@drawable/menu_icon_irr"
        android:showAsAction="always"
        android:title="IRR/YR"/>
    <item
        android:id="@+id/send"
        android:icon="@android:drawable/ic_menu_share"
        android:showAsAction="always"
        android:title="@string/share_pdf"/>
    <item
        android:id="@+id/graph"
        android:icon="@drawable/ic_menu_gallery"
        android:showAsAction="always"
        android:title="@string/view_cashflow_diagram"/>
    <item
        android:id="@+id/deleteReorder"
        android:icon="@drawable/ic_menu_clear_playlist"
        android:showAsAction="always"
        android:title="@string/delete_reorder_cashflows"/>

</menu> 
```

# iphone - Page Control Width issue

> ID：15917110
> 
> 赞同：3
> 
> 时间：2013-04-10T04:43:47.997
> 
> 标签：iphone, ios, uipagecontrol

We have page control width 100 but then also it is going in weird manner

![enter image description here](https://i.stack.imgur.com/DTkpN.png)

Please help how to handle its width

Edit:

```
[pageControl setFrame:CGRectMake(100,258,100,10)]; 
```

This is how i have set frame.I have cross checked no other place i am changing frame. Number of pages are dynamic Whole setting i have done by coding NOT interface builder

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:01:37.373

在方法中尝试这一行，`viewDidLoad:`并在将页面分配给该控件后编写此代码......

```
 yourPageControl.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

并且对于 PageControl align center 使用波纹管...

```
yourPageControl.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin; 
```

您也可以从 Interface Builder 进行此设置

**更新：**

```
//use this code instead of your for init UIPageControl
pageControl = [[UIPageControl alloc] init];
pageControl.frame = CGRectMake(100,258,100,10);
pageControl.numberOfPages = 2;//set here pages which you want..
pageControl.currentPage = 0;
pageControl.autoresizingMask = UIViewAutoresizingNone;
[self.view addSubview:pageControl]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T06:43:47.467

我为时已晚，但仍然，试试下面的代码，它会将点限制在页面控件的范围内

```
pageControl = [[UIPageControl alloc] init];
pageControl.frame = CGRectMake(100,258,100,10);
pageControl.numberOfPages = 100;
pageControl.currentPage = 0;
pageControl.clipsToBounds = YES;
[self.view addSubview:pageControl]; 
```

在这里，您可以看到边界内的点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-22T10:11:00.253

只需将属性**“clipsToBounds”**设置为 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T11:54:35.367

**我如何解决：** *将宽度从高度加倍*

```
pageControl.transform = CGAffineTransform(scaleX: 2, y: 1)

 pageControl.clipsToBounds = true 
```

# visual-studio-2012 - 从字符串“”到类型“Double”的转换不是有效的初学者课程

> ID：15917113
> 
> 赞同：1
> 
> 时间：2013-04-10T04:43:58.263
> 
> 标签：visual-studio-2012

当我尝试“清除”程序中的文本框时，我遇到了以下问题。这是一个初学者的课程，所以我应该能够用我到目前为止所学的内容来回答修复错误。每当我按 NextYear 时，该程序基本上都会计算利率和资本增长。当我按下“清除”按钮时，它会显示错误并将我指向事件`capital = CDbl(txtInitialCap.Text)`下的语法。`txtRate_TextChanged`

```
Private year As Integer
Private capital As Double

Private Sub btnNextYear_Click(sender As Object, e As EventArgs) Handles btnNextYear.Click
    Dim interestAmount, interestRate As Double
    '
    ' Assign value to InterestRate variable from text property
    '
    interestRate = CDbl(txtRate.Text)
    '
    ' Calculate new values for year, interest amount and capital
    '
    year = year + 1
    interestAmount = capital * interestRate
    capital = capital + interestAmount
    '
    ' Assign the values to the textboxes
    '
    txtYear.Text = year
    txtInterest.Text = interestAmount
    txtCapital.Text = capital

Private Sub btnClear_Click(sender As Object, e As EventArgs) Handles btnClear.Click
        txtInitialCap.Text = vbNullString
        txtRate.Text = vbNullString
        txtYear.Text = vbNullString
        txtInterest.Text = vbNullString
        txtCapital.Text = vbNullString
    End Sub

Private Sub txtInitialCap_LostFocus(sender As Object, e As EventArgs) Handles txtInitialCap.LostFocus
    '
    ' Reinitialise the capital variable since probably it was changed
    '
    capital = CDbl(txtInitialCap.Text)
End Sub

Private Sub txtInitialCap_TextChanged(sender As Object, e As EventArgs) Handles txtInitialCap.TextChanged
    '
    ' Reinitialise the year variable and the textboxes
    '
    year = 0
    txtYear.Text = vbNullString
    txtInterest.Text = vbNullString
    txtCapital.Text = vbNullString
End Sub

Private Sub txtRate_TextChanged(sender As Object, e As EventArgs) Handles txtRate.TextChanged
    year = 0
    capital = CDbl(txtInitialCap.Text)
    txtYear.Text = vbNullString
    txtInterest.Text = vbNullString
    txtCapital.Text = vbNullString
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T14:50:41.957

我知道这是一个旧帖子。我会回答以防其他人发现这个。在 txtRate_TextChanged 中，您需要检查

```
txtInitialCap.Text != "" 
```

如果文本是“”，则不能将其转换为双精度

# outlook - 尽管我在 Item_Write 中设置了取消，但仍发送会议通知

> ID：15917115
> 
> 赞同：3
> 
> 时间：2013-04-10T04:44:12.153
> 
> 标签：outlook, vsto, outlook-addin, outlook-2010

我在 Item_Write 事件处理程序中为会议请求设置取消检查，因为如果我在 Item_Send 中将取消设置为 true，会议窗口将关闭。我正在尝试做的是提示用户他们有通常会使用功能区中的自定义按钮进行处理的收件人（按钮详细信息对我的问题并不重要）。无论如何，当我尝试取消 Item_Write 事件时，无论如何都会发送会议通知。无论我尝试什么，即使我将 ref Cancel 设置为 true，我也无法阻止会议通知发出。如果我取消 Item_Send 然后窗口关闭，这不是用户想要的。此时我唯一能想到的可能就是 requestDetailsRegion.SaveRequestDetailsToLocalOutlookItemProperties()，它将自定义表单区域字段属性保存到 AppointmentItem 上定义的自定义属性，正在触发 Application_Item_Load 事件，这以某种方式提示 Outlook 发送会议邀请通知，就好像它处于待处理状态一样。我在 Outlook 2010 中运行它。提前谢谢你。

这是一些示例代码：

```
 void Item_Write(ref bool Cancel)        
 {    

            Cancel = CancelInvite(Cancel);                
 }

        private bool CancelInvite(bool Cancel)
        {

            Inspector activeInspector = Globals.ThisAddIn.Application.ActiveInspector();
            WindowFormRegionCollection formRegions = Globals.FormRegions[activeInspector];
            RequestDetailsFormRegion requestDetailsRegion = formRegions.RequestDetailsForm;

                // Add request form details to meeting item.
                requestDetailsRegion.SaveRequestDetailsToLocalOutlookItemProperties();

                // Checking if there's an incomplete form request pending submission
                if (requestDetailsRegion.txtFileName_Hidden.TextLength == 0 &&
                    appointmentItem != null && appointmentItem.MeetingStatus != OlMeetingStatus.olMeetingCanceled)
                {
                    Persons meetingRecipients = new Persons();

                    foreach (Outlook.Recipient recipient in appointmentItem.Recipients)
                        if (recipient.Address != activeInspector.Session.CurrentUser.Address)
                            meetingRecipients.Add(new MeetingRecipient(recipient));

                    if (meetingRecipients.ContainsSpecialRecipients)
                    {                           
                        CustomDialog customDialog = new CustomDialog();
                        customDialog.OkButtonText = messageBoxTextStatusOK;
                        customDialog.CancelButtonText = messageBoxTextStatusCancel;

                        DialogResult dialogResult = customDialog.ShowDialog();

                        if (dialogResult == DialogResult.Cancel)
                        {
                            Cancel = true;
                        }
                        else
                        {
                            Cancel = false;
                        }    

                        customDialog.Close();
                    }
                }                

            return Cancel;
        }

   public void SaveRequestDetailsToLocalOutlookItemProperties()
        {
            if (this.OutlookItem is Outlook.AppointmentItem)
            {
                Outlook.AppointmentItem appointmentItem = (Outlook.AppointmentItem)this.OutlookItem;

                // Checking if organizer already cancelled meeting. If so, then no need to update apppointment item properties.
                if (appointmentItem.MeetingStatus != Outlook.OlMeetingStatus.olMeetingCanceled)
                {

                    appointmentItem.ItemProperties[RequestSubmitted].Value = chkSubmitted.Checked; // Hidden 
                    appointmentItem.ItemProperties[Filename].Value = txtFileName_Hidden.Text; // Hidden

                    appointmentItem.ItemProperties[ReasonForVisit].Value = txtReason.Text;

   // SPARING SIMILAR LINES OF CODE

    ...
                    chkSaved.Checked = true;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:23:00.350

您从未将 (ref) Cancel 参数设置为 true

```
void Item_Write(ref bool Cancel)        
 {    

            this.cancelInviteResult = CancelInvite(Cancel);
            Cancel = this.cancelInviteResult; 
 } 
```

# python - 在单独的文件中拆分 Django 模型和模型表单

> ID：15917116
> 
> 赞同：0
> 
> 时间：2013-04-10T04:44:17.983
> 
> 标签：python, django, django-models, django-forms

是否可以在不影响性能的情况下将 Django 模型和模型表单拆分到单独的文件中。

我搜索了 Django 文档，但找不到任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:15:41.927

您的问题更多地与 Python 的工作原理有关，而不是与如何使用 Django 相关。所以在我解释如何在 Django 中应用导入之前，这里是你如何在 Python 中执行它们。

Python 具有极其灵活的模块化系统 - 或者能够将您的代码库分解为具有层次结构的许多文件。这在任何编程语言中都是相当必要的，因为将代码放在多个文件中有助于组织事物，当你有一群人在一个项目上工作时它肯定会有所帮助，但 Python 的方式非常简单和强大（如果你需要它成为）。

Python导入系统中最基本的组件是模块。任何 Python 文件（带`.py`扩展名）都是 Python 模块。模块名称只是不包括扩展名的文件名。例如`hello.py`文件是一个`hello`Python 模块。现在模块/文件通常在其中定义了一些变量/函数/类。`import`您可以使用语句轻松地将它们导入其他 Python 模块中。图像您在同一文件夹中有两个文件 -`foo.py`和`bar.py`. 以下是 的内容`foo.py`：

```
# foo.py

hello = 'world'

def sum(a, b):
    return a + b 
```

然后，如果您需要使用文件中定义的任何内容，`foo.py`您`bar.py`可以这样做：

```
# bar.py

# the following import the whole foo module (foo.py file)
import foo

number = foo.sum(1, 2) 
```

正如您在 中看到的`bar.py`，您可以导入整个`foo`模块并使用其中定义的任何内容。然而，这通常不是导入东西的最佳方法。想象一下，在您的`foo`模块中，您将定义 10,000 个变量，但您只需要使用其中一个。因此，如果您要导入整个模块，Python 将不得不导入所有变量，这显然会占用更多的内存。为了解决这个问题，您可以使用该`from .. import ..`语句有选择地从其他对象导入对象。以下示例`bar.py`仅从模块导入`sum`函数`foo`：

```
# bar.py

# import only the sum function from foo module
from foo import sum

number = foo.sum(1, 2) 
```

所以从 Python 模块导入非常容易。现在把它放在你的 Django 上下文中，在你的应用程序中你应该有两个文件 -`models.py`和`forms.py`. 在里面`models.py`你应该定义你所有的模型：

```
# models.py

from django.db import models

class FooModel(models.Model):
    pass 
```

导入`models.py`的方式`models`与我之前展示的不同。在这种情况下，Python 实际上是从 Python 包中导入的，但我不会深入探讨，以免使事情复杂化。只是认为该导入声明是理所当然的。

现在您已经定义了模型，您可以在以下位置为它们创建表单`forms.py`：

```
# forms.py

# import django forms - take this statement for granted
from django import forms

# import the model
from models import FooModel

class FooModelForm(forms.ModelForm):
    class Meta:
        model = FooModel 
```

这就对了。有关 Python 如何导入的更多信息，您可以在[此处](http://www.diveintopython.net/)阅读 Dive Into Python 书（它还有很多其他有用的信息......）。

# c# - Excel charts with #N/A values

> ID：15917117
> 
> 赞同：2
> 
> 时间：2013-04-10T04:44:23.527
> 
> 标签：c#, excel

I have written a C# program that does a lot of iterative calculations and then returns a huge list of data. Because the data changes each time I run the program, I draw it in an Excel spreadsheet with predefined functions and graphs that are useful to interpret the data. However, all my charts in the spreadsheet depend on a single column of data, through with other columns and axis are calculated using formulas. However, the total amount of data is not always constant.

For instance, sometimes I get 22 elements of data in the list, and sometimes the number flows into 100s. To have a stable bound, I cap the charts to graph only the first 50 rows of data, and in my program, I fill the remaining columns with the value "#N/A". However, when I open the spreadsheet, the rows with superfluous data is graphed as `0`s. I want the charts to graph only the rows with valid data.

Here is what my code looks like, it is relatively very simple, so I am not going to modify this, I want to know what changes I can make in the spreadsheet.

```
 FileInfo newFile = new FileInfo("Report.xlsx");
        ExcelPackage pack = new ExcelPackage(newFile);
        ExcelWorksheet ws = pack.Workbook.Worksheets[1];        

        int cellCount = 2;
        for(int i = 0; i < 49; i++)
        {
            String cell = "B" + cellCount;
            if (i < data.Count)
                ws.Cells[cell].Value = data.ElementAt(i);
            else
                ws.Cells[cell].Value = "#N/A";

            cellCount++;

        }

      Console.Out.WriteLine("saving");
        pack.Save();
        System.Diagnostics.Process.Start("Report.xlsx"); 
```

To access the Excel documents, I use EPPLUS. Here is what my charts look like:

![how my charts look](https://i.stack.imgur.com/wT5Ov.png)

As the graph shows, the last 5-6 rows contain NULL values, however, they are graphed as well, with values of `0`. The blue line represents the data in the third column, and red line represents the last column (that is never going to be null because it's dependant on a fixed row).

How do I force Excel to ignore the last few NULL rows?

# sql-server - SQL优化的典型性能案例

> ID：15917119
> 
> 赞同：1
> 
> 时间：2013-04-10T04:44:28.900
> 
> 标签：sql-server, sql-server-2005

我有一个 SQL 优化问题的工程实践，我认为这是一个典型的案例，并且会帮助很多人。

SQL 服务器 2005,

首先，创建主表。这是一个人员信息表。

```
CREATE TABLE [dbo].[OLAPAgentDim](
    [RoleID] [varchar](50) NULL CONSTRAINT [DF_OLAPAgentDim_RoleID]  DEFAULT ((1)),
    [OLAPKey] [bigint] IDENTITY(1,1) NOT NULL,
    [FatherKey] [bigint] NULL,
    [FatherKeyValue] [nvarchar](100) NULL,
    [System] [varchar](6) NULL,
    [Level] [int] NULL,
    [IfLeaf] [real] NULL,
    [IfDel] [real] NULL CONSTRAINT [DF_OLAPAgentDim_IfDel]  DEFAULT ((0)),
    [SourceKey] [varchar](50) NULL,
    [MainDemoName] [nvarchar](100) NULL,
    [FastCode] [varchar](50) NULL,
    [TagValue] [varchar](50) NULL,
    [Script] [nvarchar](max) NULL,
    [Birthday] [datetime] NULL,
    [EarlyStartTime] [datetime] NULL,
    [StartTime] [datetime] NULL,
    [EndTime] [datetime] NULL,
    [EditTime] [datetime] NULL,
    [BecomesTime] [datetime] NULL,
    [ContractTime] [datetime] NULL,
    [ContractEndTime] [datetime] NULL,
    [XMLIcon] [nvarchar](max) NULL,
    [PassKey] [varchar](50) NULL CONSTRAINT [DF_OLAPAgentDim_PassKey]  DEFAULT ('N3pkY3RHaeZXA9mGJdfm8A=='),
    [Address] [nvarchar](100) NULL,
    [HomeTel] [varchar](50) NULL,
    [Mobile] [varchar](50) NULL,
    [Email] [varchar](100) NULL,
    [IDCard] [varchar](50) NULL,
    [IDSecu] [varchar](50) NULL,
    [IDEndowment] [varchar](50) NULL,
    [IDAccumulation] [varchar](50) NULL,
    [ContactPerson] [nvarchar](100) NULL,
    [ContactPersonTel] [varchar](50) NULL,
    [Others1] [varchar](50) NULL,
    [SexKey] [varchar](2) NULL CONSTRAINT [DF_OLAPAgentDim_SexKey]  DEFAULT ((1)),
    [SexKeyValue] [nvarchar](100) NULL,
    [MarrageKey] [varchar](2) NULL CONSTRAINT [DF_OLAPAgentDim_MarrageKey]  DEFAULT ((1)),
    [MarrageKeyValue] [nvarchar](100) NULL,
    [Nation] [nvarchar](50) NULL,
    [Race] [nvarchar](50) NULL,
    [PartyMemberKey] [varchar](2) NULL CONSTRAINT [DF_OLAPAgentDim_PartyMemberKey]  DEFAULT ((1)),
    [PartyMemberKeyValue] [nvarchar](100) NULL,
    [RegionKey] [bigint] NULL CONSTRAINT [DF_OLAPAgentDim_RegionKey]  DEFAULT ((1)),
    [RegionKeyValue] [nvarchar](100) NULL,
    [LeaveResonKey] [bigint] NULL CONSTRAINT [DF_OLAPAgentDim_LeaveResonKey]  DEFAULT ((1)),
    [LeaveResonKeyValue] [nvarchar](100) NULL,
    [RoleStr] [varchar](max) NULL,
    [RoleStrValue] [nvarchar](max) NULL,
    [LeaderKey] [bigint] NULL CONSTRAINT [DF_OLAPAgentDim_LeaderKey]  DEFAULT ((1)),
    [LeaderKeyValue] [nvarchar](100) NULL,
    [FastCode2] [varchar](50) NULL,
    [FastCode3] [varchar](50) NULL,
    [FastCode4] [varchar](50) NULL,
    [FastCode5] [varchar](50) NULL,
    [OtherAddress] [nvarchar](100) NULL,
    [ShowOrder] [int] NULL,
    [RaceKey] [bigint] NULL DEFAULT ((1)),
    [RaceKeyValue] [nvarchar](100) NULL,
    [DepartLevelKey] [bigint] NULL DEFAULT ((1)),
    [DepartLevelKeyValue] [nvarchar](100) NULL,
    [forumname] [nvarchar](100) NULL,
    [IfCloseKey] [bigint] NULL DEFAULT ((1)),
    [IfCloseKeyValue] [nvarchar](100) NULL,
    [InsureStartTime] [datetime] NULL,
    [AccumulationStartTime] [datetime] NULL,
    [Rate] [varchar](50) NULL,
    [DirectLeaderKey] [bigint] NULL CONSTRAINT [DF_OLAPAgentDim_DirectLeaderKey]  DEFAULT ((1)),
    [DirectLeaderAttriKey] [bigint] NULL CONSTRAINT [DF_OLAPAgentDim_DirectLeaderAttriKey]  DEFAULT ((1)),
    [DirectLeaderKeyValue] [nvarchar](100) NULL,
    [DirectLeaderSourceKey] [varchar](50) NULL,
    [DirectLeaderPartName] [nvarchar](100) NULL,
    [DirectLeaderPositionName] [nvarchar](100) NULL,
    [NOTSync] [int] NULL,
    [FatherPath] [nvarchar](max) NULL,
    [SaleDiscount] [real] NULL,
 CONSTRAINT [PK_OLAPAgent Dim] PRIMARY KEY CLUSTERED 
(
    [OLAPKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

其次，在表中插入大约 10,000 条记录。我认为 10,000 条记录对于 SQL SERVER 来说并不是一个很大的数字。你可以看到这实际上是一个父亲和孩子的维度表。ifleaf=0 的记录表示人的部门结构节点，ifleaf=1 的记录表示人。您可以使用 FahterKey 列定义父子关系。例如：

```
OLAPKey IfLeaf FatherKey DepartLevelKey  MainDemoName 
  2        0      0           1          IBM Company
  3        0      2           2          Sales Depart    
  4        0      2           2          Service Depart
  5        0      3           3          Sales Team1  
  6        1      5          NULL        John Smith
  7        1      4          NULL        Mary
...... 
```

DepartLevelKey 列表示离开节点的级别。所以在这张表中，我们可以保存整个 HR 树信息。

第三，我们看到问题SQL：

```
create table #t
(
TableID int IDENTITY(1,1),
OLAPKey bigint,
MainDemoName nvarchar(max)
)

declare @t4 table
(
TableID int IDENTITY(1,1),
MainDemoName nvarchar(max),
OLAPKeystr varchar(100)
)

declare @agentkey bigint
set @agentkey ='2'

    --Part A
    --DepartLevelKey=2, to get @agentkey node's all level=2 department

    ;WITH Result AS(
    SELECT OLAPKey,DepartLevelKey,maindemoname FROM OLAPAgentDim WHERE OLAPKey =@agentkey
     UNION ALL 
     SELECT a.OLAPKey,a.DepartLevelKey,a.maindemoname FROM  OLAPAgentDim AS a,Result AS b WHERE a.FatherKey = b.OLAPKey
    )

     insert #t select OLAPKey,maindemoname from Result where DepartLevelKey=4

    --Part B
    ;with One as  
    (  
    select *,convert(varchar(50),OLAPKey) as Re from #t  
    )
    insert @t4 select maindemoname,stuff((select ','+Re from One where One.maindemoname=#t.maindemoname for xml path('')),1,1,'') as Two  
    from #t 
    group by maindemoname  
    drop table #t 
```

上面的 SQL 分为 Part A 和 Part B。 Part A SQL 获取根节点下的所有子节点（并过滤掉那些属于指定 DepartLevelKey 的子节点）。例如，要获取销售部门的子部门中 level=3 的所有人员。

B 部分 SQL 将行更改为列，例如：

```
Change:
TableID  OLAPKey MainDemoName
  1        6     Sales Team1
  2        10    Sales Team1
  3        12    Sales Team1
to:
TableID  MainDemoName OLAPKeystr
  1      Sales Team1   6,10,12 
```

这样我们就得到了每个目标部门的人，做进一步的处理（这里省略）。

问题：A部分很慢，大约需要5分钟。B部分也很慢。

我想知道如何根据表结构对其进行优化。

你的，伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:07:21.193

尝试：

**(i)**将此索引添加到`OLAPAgentDim`：

```
create index IX_OLAPAgentDim_FatherKey on OLAPAgentDim (FatherKey) include (DepartLevelKey, MainDemoName) 
```

**( **ii** )从变为`MainDemoName`。这与 中的列定义匹配。`#t``nvarchar(max)``nvarchar(100)``OLAPAgentDim`**

 ****(iii)**在 A 部分和 B 部分之间，即在 A 部分之后和 B 部分之前，将此索引添加到`#t`：

```
create clustered index IX on #t (MainDemoName) 
```**

# macos - 通过单击 osx 10.6 选择视图

> ID：15917121
> 
> 赞同：1
> 
> 时间：2013-04-10T04:44:39.343
> 
> 标签：macos, cocoa

我创建了一个图像视图

```
for(int i=0; i<pcount; i++)
{
    int x = rand() % 350;
    int y = rand() % 350;
    NSRect rect = NSMakeRect((x+10),(y+10), 200, 200);
    //NSImageView *imageView 
    imageView1 = [[NSImageView alloc]initWithFrame:rect];
    [imageView1 setTag:i];

    // imageView = [[NSImageView alloc]initWithFrame:rect];
   // [imageView1 rotateByAngle:rand() % 150];

    [imageView1 setImageScaling:NSScaleToFit];
    [imageView1 canBecomeKeyView];
    NSImage *theImage = [[NSImage alloc]initWithContentsOfURL:(NSURL*)[patharray objectAtIndex:(i)]];
    [imageView1 setImage:theImage];
    [[imageView1 cell] setHighlighted:YES];
    [[layoutCustom view] addSubview:imageView1 positioned:NSWindowMovedEventType relativeTo:nil];} 
```

现在如何通过鼠标单击选择每个图像视图？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:21:23.067

我在这里假设您有理由不使用现有的集合视图。因此，从我在您的代码中读到的内容中，您有 layoutCustom.view，其中包含一堆 NSImageView。这里有两个选项：

1.  在您的 layoutCustom 对象中实现 mouseDown: （或 mouseUp: 或两者）。将事件位置转换为视图坐标并查找 CGRectContainsPoint(subview.frame, mouseDownPoint) 返回 YES 的任何子视图。您应该选择该视图。

2.  继承 NSImageView 并实现 mouseDown: (或 mouseUp: 或两者)。在 mouseDown 上：只需设置一个“选定”标志。视图可以在选择时自己绘制某些东西，或者 layoutCustom 对象可以观察属性并相应地绘制选择。

我更喜欢选项 1，因为它更简单，需要更少的类和更少的对象之间的交互。

```
// Option 1 (in layoutCustom class)

- (void) mouseDown:(NSEvent*)theEvent {
    CGPoint mouseDownPoint = [self convertPoint:theEvent.locationInWindow fromView:nil];
    for (NSView *view in self.subviews) {
        if (CGRectContainsPoint(view.frame, mouseDownPoint)) {
            // Do something to remember the selection.
            // Draw the selection in drawRect:
            [self setNeedsDisplay:YES];
        }
    }
}

// Option 2 (in Custom subclass of NSImage)

- (void) mouseDown:(NSEvent*)theEvent {
    self.selected = !self.selected;
}

// Option 2 (in layoutCustom class)
- (void) addSubview:(NSView*)view positioned:(NSWindowOrderingMode)place relativeTo:(NSView*)otherView {
    [super addSubview:view positioned:place relativeTo:otherView];
    [self startObservingSubview:view];
}

- (void) willRemoveSubview:(NSView*)view {
    [self stopObservingSubview:view];
}

- (void) startObservingSubview:(NSView*)view {
   // Register your KVO here
   // You MUST implement observeValueForKeyPath:ofObject:change:context:
}

- (void) stopObservingSubview:(NSView*)view {
   // Remove your KVO here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:53:10.227

我有一个更好的主意：与其将视图中的鼠标点击转换为坐标，然后弄清楚如何将其映射到正确的子视图或子图像，不如先拥有一个大（或滚动？）视图然后将您的图像添加为巨大的“ `NSButton`”对象（设置为自定义类型），其中按钮图像可以是您要添加的图像。

至于如何选择每个图像？您可以继承“ `NSButton`”并跟踪其中的一些自定义数据，或者您可以使用“ `tag`”来确定在您的“”方法中按下了哪个按钮`IBAction`，然后决定如何处理它。

另一种方法可能是将图像嵌入到 NSTableView 单元格中......

# ffmpeg - ffmpeg 酿造 yasm

> ID：15917122
> 
> 赞同：2
> 
> 时间：2013-04-10T04:44:50.080
> 
> 标签：ffmpeg, homebrew, yasm

我正在尝试通过 brew 安装 ffmpeg。我用 yasm 得到的错误是

“错误：在安装 ffmpeg 之前，您必须‘brew link pkg-config yasm’”

这样做时，我被告知我的权限不足。

“正在链接 /usr/local/Cellar/pkg-config/0.28...警告：无法链接 pkg-config。取消链接...错误：权限被拒绝 - /usr/local/share/doc”

权限是 -rw-rw--- 。我试过取消链接 yasm 包，然后重做它没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T03:14:39.293

我想到了。

1.  转到他们在终端中指定的任何目录
2.  然后`chown <your username> .`为子文件夹执行或`chown <your username> someFolder`
3.  有时这不适用于所有目录，因此请使用`sudo chown <your username> .`并输入您的密码
4.  现在尝试重新链接yasm，`brew link yasm`然后一旦完成就可以`brew install ffmpeg`了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T12:35:07.667

我`/usr/local/share/doc`的是

```
drwxr-xr-x 
```

归我的用户名和组所有`admin`。试试看。

也试试`brew doctor`。

# oop - OO设计原则——开闭原则

> ID：15917126
> 
> 赞同：3
> 
> 时间：2013-04-10T04:45:05.797
> 
> 标签：oop

我有一个布局管理器类，这个类设计用于设置数据网格布局。代码：

```
class LayoutManager
{
    private object _target;

    public LayoutManager(object aDataGrid)
    {
        _target = aDataGrid;
    }

    public void SaveLayout(string strProfileID)
    {
    }

    public void LoadLayout(string strProfileID)
    {
    }

    //in future I might add below function
    public void ResetLayout()//OtherFunction0
    {
    }

    public void OtherFunction1()
    {
    }

    public void OtherFunction2()
    {
    }

} 
```

根据 OCP “一个类应该对扩展开放，但对修改关闭”。如果我在 LayoutManager 类中添加新功能，此操作是否违反 OCP？如果是，那么设计课程的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:56:40.250

我不认为向类添加方法通常会违反 OCP 原则，因为这实际上扩展了类的行为。问题是如果你改变现有的行为。因此，如果您添加的方法上的代码可能会更改现有方法的行为（因为它会更改对象的状态），那将是违规行为。

遵循 SOLID 原则的正确方法是创建一个接口： ILayoutManager 具有您想要的接口，并具有记录的行为。

LayoutManager 类将实现此接口。其他新方法可能会添加到新接口中，例如 ILayoutFoo 或添加到现有接口中，只要它们不会破坏现有方法中记录的行为的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T07:03:37.087

如果没有一些具体的代码，就不可能直接回答这个问题。

一般来说，OCP 的结果是，当类从基类派生然后覆盖方法时，内部不变量不应该破坏，因为那是修改。派生类不应该有任何方法来改变类行为的那些部分。*派生类可以通过使用*基类公开的部分来更改行为或添加新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T05:04:26.440

每当我们谈到开放封闭原则时，都会出现一个重要问题，这就是所谓的[战略封闭](https://www.cs.duke.edu/courses/fall07/cps108/papers/ocp.pdf)。

> 应该清楚的是，没有重要的程序可以 100% 关闭。一般来说，无论一个模块多么“封闭”，总会有某种变化，它不会被封闭。由于关闭不可能完全，它必须是战略性的。也就是说，设计者必须选择关闭他的设计的变化类型。这需要一定程度的从经验中获得的先见之明。经验丰富的设计师对用户和行业有足够的了解，可以判断各种变化的可能性。然后，他确保为最可能的变化调用开闭原则。

例如，在著名的 Shape 类示例中，您只是授权您的程序（在客户端和 Shape 一侧）刚刚关闭以进行有关添加新形状的修改。

```
public class Shape {

    public draw() {
    }
}

public class Circle extends Shape {
    @Override
    public void draw() {
        // implementation special to Circle
    }
}

public class Client {
...
    public drawMyShape(Shape shape) {
        shape.draw();
    }
...
} 
```

根据这个策略，当你设计你的程序时，你应该决定你想要对更改关闭的部分。因此，在您的示例中，当您设计程序时，如果您决定您的实体（在本例中是 GraphCalculator 类）应该关闭以进行修改并打开以添加新功能的扩展，则在此示例中添加新功能违反开闭原则，因为它改变了客户端和 GraphCalculator 类的实现。解决方案可以使用抽象，这在之前的答案中提到过。

# javascript - 如何使用电话间隙在 html5 中录制音频

> ID：15917128
> 
> 赞同：3
> 
> 时间：2013-04-10T04:45:28.360
> 
> 标签：javascript, html, cordova, audio

我有一个应用程序，我想在本机应用程序中使用目标 c 录制音频，但我想为我的手机间隙录制相同的音频，所以有没有我们可以使用的库或框架，以便我们可以在手机间隙应用程序中录制音频。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:07:31.130

使用 PhoneGap，您可以使用 PhoneGap API 使用 HTML/JS 执行此操作。您可以在此处找到音频功能的文档：http: [//docs.phonegap.com/en/3.3.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/3.3.0/cordova_media_media.md.html#Media)

# javascript - 如何在浏览器打开的选项卡中使用 ADB 注入 javascript 代码？

> ID：15917135
> 
> 赞同：6
> 
> 时间：2013-04-10T04:46:18.570
> 
> 标签：javascript, android, adb

我正在创建一个 Android 测试场系统，在此过程中，我试图找到一种方法在默认浏览器中已打开的选项卡中注入 javascript。

我正在尝试

```
adb shell am start -a android.intent.action.VIEW -d "javascript:alert('Hello world!');" -n com.android.browser/com.android.browser.BrowserActivity 
```

当它工作时，它会在一个新选项卡中打开。

有没有办法在当前选项卡中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T19:24:39.087

如果您喜欢使用 Chrome（新版本 Android 的默认浏览器），您可以使用 Chrome 的[远程调试](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)。

在设备上启用此功能后（启用 USB 调试 + Web 调试），您可以通过执行连接：

`adb forward tcp:9222 localabstract:chrome_devtools_remote`

如果您从浏览器中点击 localhost:9222，您将看到每个选项卡的 chrome 开发工具。从这里，您可以执行通常可以在桌面 chrome 检查器中执行的任何操作，包括从控制台执行 JavaScript。

如果这不够自动化，您可以编写一个使用 WebView 的应用程序，将其配置为处理您提供任意 JavaScript 的意图，并使用`webview.loadUrl(js)`它来执行它。

# java - 未使用 RXTX 列出端口

> ID：15917136
> 
> 赞同：2
> 
> 时间：2013-04-10T04:46:22.770
> 
> 标签：java

我想使用串口 API 连接到 USB MODEM。所以我使用了以下代码，即使连接了 USB MODEM，它也没有列出。

我在 Fedora 工作，安装了 RXTX 库，但问题就在那里..请帮助我。

```
import java.io.*;
import java.util.*;
import gnu.io.*;

public class SimpleWrite {

static Enumeration portList;
static CommPortIdentifier portId;
static String messageString = "Hello, world!\n";
static SerialPort serialPort;
static OutputStream outputStream;

public static void main(String[] args) throws NoSuchPortException {

    portList = CommPortIdentifier.getPortIdentifiers();
    //System.out.println("JVM Version: " +System.getProperty("java.runtime.version"));
    System.out.println(portList.hasMoreElements()); //portList.hasMoreElements()
    //portList.hasMoreElements()
    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();

        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
// if (portId.getName().equals("COM1")) {
            if (portId.getName().equals("/dev/ttyUSB0")) {
                try {
                    serialPort = (SerialPort) portId.open("SimpleWriteApp", 2000);
                } catch (PortInUseException e) {
                }
                try {
                    outputStream = serialPort.getOutputStream();
                } catch (IOException e) {
                }
                try {
                    serialPort.setSerialPortParams(9600,
                            SerialPort.DATABITS_8,
                            SerialPort.STOPBITS_1,
                            SerialPort.PARITY_NONE);
                } catch (UnsupportedCommOperationException e) {
                }
                try {
                    outputStream.write(messageString.getBytes());
                } catch (IOException e) {
                }
            }
        }
    }
}
} 
```

主要问题是“ portList.hasMoreElements() 返回**false** ”

感谢您

# c# - Errors while building c# project

> ID：15917140
> 
> 赞同：2
> 
> 时间：2013-04-10T04:46:47.620
> 
> 标签：c#, .net

Whenever I try to build my project, I get this error:

> The "Output" task was not found. Check the following:
> 
> 1.  The name of the task in the project file is the same as the name of the task class.
> 2.  The task class is "public" and implements the `Microsoft.Build.Framework.ITask` interface.
> 3.  The task is correctly declared with in the project file, or in the *.tasks files located in the `C:\Windows\Microsoft.NET\Framework\v4.0.30319` directory.

I'm using Visual Studio 2010 Professional. What can I do about this error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:52:32.690

那么我有这个错误我所做的是**重新启动**我的计算机并且错误消失了

希望这可以帮助

# javascript - 有没有办法用 RequireJS 懒惰地设置资源的路径？

> ID：15917144
> 
> 赞同：4
> 
> 时间：2013-04-10T04:47:17.463
> 
> 标签：javascript, requirejs

所以，我有一个使用 requireJS 的应用程序。挺开心的。在大多数情况下。

这个应用程序使用了 Socket.IO。Socket.IO 由 nodejs 提供，并且不在与主网络服务器相同的端口上运行。

为了解决这个问题，在我们的主 js 文件中，我们执行以下操作：

```
 var hostname = window.location.hostname;
    var socketIoPath = "http://" + hostname + ":3000/socket.io/socket.io";
    requirejs.config({
        baseUrl: "/",
        paths: {
            app           : "scripts/appapp",
            "socket.io"   : socketIoPath
        }
    }); 
```

比这更复杂，但你明白了要点。

现在，在交互模式下，这可以游泳。

当我们尝试使用 r.js 编译它时，丑陋就开始了（技术上我们使用 grunt 来运行 r.js，但这不是重点）。

在 r.js 的配置中，我们为 socket.io 设置了一个空路径（以避免它无法拉入），并将我们的主文件设置为 mainConfigFile。

编译器对此大喊大叫，说：

```
Running "requirejs:dist" (requirejs) task
>> Error: Error: The config in mainConfigFile /…/client.js cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.
>>     at Function.build.createConfig (/…/r.js:23636:23) 
```

现在，据我所知，这是因为我使用变量来设置“socket.io”的路径。如果我把它拿出来，需要运行得很好，但我不能从服务器运行原始文件。如果我离开它，我的调试服务器很高兴，但构建会中断。

有没有一种方法可以让我在运行时懒惰地分配“socket.io”的路径，这样它就不必进入 requirejs.config() 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T01:40:52.020

编辑：对此做了一些广泛的研究。这是结果。

通过构建可以使用 RequireJS 从 CDN 加载。但是，如果您使用的是较小的杏仁装载机，[这是不可能的](https://stackoverflow.com/questions/13366103/optimizing-and-loading-external-dependencies-with-requirejs)。

这使您有两个选择：

1.  在构建中使用 almond 以及文件的本地副本。
2.  使用完整的`require.js`加载器并尝试使用 CDN。
3.  仅为该资源使用`<script>`标签。

我说尝试＃2，因为有一些警告。您需要`require.js`在 HTML 中包含`data-main`构建文件的属性。但是如果你这样做了，`require`并且`define`会是全局函数，允许用户对`require`你的任何内部模块和他们乱搞。如果你对此没问题，你需要在你的构建配置中遵循[“空：方案”](http://requirejs.org/docs/optimization.html#empty)（但不是在你的主配置中）。

但事实仍然是您现在有另一个 HTTP 请求。如果您只需要一个包含`require.js`加载程序的构建文件，则只需[针对一个文件进行优化](http://requirejs.org/docs/optimization.html#onejs)。

现在，如果你想避免用户使用`require`你的模块，你必须`wrap:true`在你的构建中做一些类似的事情。但据我所知，一旦你的模块从 CDN 下来，如果它是 AMD，它会寻找一个全局`define`函数来注册自己，而这将不存在，因为它现在被包裹在一个闭包中。

我从中吸取的教训是：**将资源内联到构建**中。这说得通。您减少 HTTP 请求，将其全部缩小并获得 gzip 压缩。您不会将您的模块暴露给世界，一切都会简单得多。如果你正确地缓存你的资源，你甚至不需要担心它。

但由于新版本的 socket.io 不喜欢 AMD，我就是这样做的。确保`<script>`在 requirejs 之前包含 socket.io 标记。然后创建一个 requirejs 模块，命名`socket.io`为以下内​​容：

```
define([], function () {
  var io = window.io;
  window.io = null;

  return io;
}); 
```

像这样设置路径：`'socket.io': 'core/socket.io'`或任何你想要的地方。

并像往常一样要求它！构建以这种方式工作正常。

* * *

### 原始答案

您是否可以使用RequireJS API 中指定的[路径配置回退？](http://requirejs.org/docs/api.html#pathsfallbacks)也许您可以将文件保存在本地作为后备，以便您的构建工作。

socket.io GitHub 存储库[指定](https://github.com/LearnBoost/Socket.IO/wiki/How-do-I-serve-the-client)您可以使用 socket.io-client 包的 dist/ 目录中的文件为客户端提供服务。

# java - missing annotation package in spring-modules-validation-0.8a source file

> ID：15917146
> 
> 赞同：2
> 
> 时间：2013-04-10T04:47:27.320
> 
> 标签：java, spring, spring-mvc, annotations, spring-validator

I have downloaded **spring-modules-validation-0.8a-sources.jar and spring-modules-validation-0.8a- sources.jar.** In spring-modules-validation-0.8a-sources.jar there is package name annotation with package orde as **org.springmodules.validation-> bean->config->loader->annotation.** But in spring-modules-validation-0.8a-sources the package name annotation is missing.I am confused why it is so.As i am trying to write some custom annotaion and i want to take some quick refernce with spring annoation for bean validation with some source files.For eample there are MaxLength,MaxSize and its implementation part in jar files .But it is missing in source files.Thanks

# php - 带有 Onchange 的 JScript 变量

> ID：15917150
> 
> 赞同：0
> 
> 时间：2013-04-10T04:47:41.553
> 
> 标签：php, javascript, forms, math

经过一些帮助和学习，我设法通过 JScript 更改了目标，但我似乎无法弄清楚如何制作变量或让它进行计算。

到目前为止，我的代码是（这些是三个表单框 + 一个提交按钮）：

```
NUMBER
<input name="contact_build" 
       type="text" 
       id="contact_build" 
       value="<?php echo $row_contact['contact_build']; ?>" />

TYPE
<select id="contact_type" 
        name="contact_type" 
        onchange="targ.value=this.value" />
        <?php
        $specresult = mysql_query("SELECT * FROM `types` ORDER BY type_value");
        while ($specrow = mysql_fetch_array($specresult)) {
            echo '<option value="' . $specrow['type_name'] . '">' . $specrow['type_name'] . '</option>';
        }
        ?>
</select>

VALUE
<input name="contact_value" id="targ" value="<?php
        $var1 = $row_contact['contact_build'];
        $var2 = $row_value['type_value'];
        $total = round($var2 * $var1);
        echo "" . $total . "";
        ?>" />

<input type="submit" name="Submit2" value="Update" /> 
```

我想要做的是创建`"TARG"`变量`"$VAR2"`，以便它可以计算出 VALUE 计算，然后在用户更改 TYPE 框中的选项后，在 VALUE 框中回显（或需要任何命令）答案。希望这是有道理的。

目前我已经设法让它在框中显示`"TYPE"`值。`"VALUE"`它忽略上面的任何“回声”命令。

我是不是看错了，应该用另一种方式来做？

PS：我知道是MYSQL；当我们谈论改变它时，我正在努力学习 PDO。:-) 但是目前，我只想使用我有基本知识的语言来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:04:12.930

浏览下面的代码。

```
<body>

    <input name="contact_build" 
      type="text" 
      id="contact_build" 
      value="<?php echo $row_contact['contact_build']; ?>" />

    <select onchange="change(this.value)" >
        <option value="1"> 1</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
    </select>

    <input type="text" id="targ" value="2"/>

    <script>
        function change(val) {
            var cnt_bld = document.getElementById("contact_build").value;
            var total_val = Math.round(parseInt(val) * parseInt(cnt_bld));
            document.getElementById("targ").value = total_val;
        }
    </script>

</body> 
```

在上面的代码中，我调用了一个`change(this.value)`接受选择框值的函数。然后在函数中，我使用该值来更改输入字段的值。看`document.getElementById`。使用您的代码，您直接使用 a`id`代替。希望这可以帮助。

**编辑** 这一行

```
echo '<option value="' . $specrow['type_name'] . '">' . $specrow['type_name'] . '</option>'; 
```

如果您有这些名称和值，则可以这样做。

```
echo '<option value="' . $specrow['type_value'] . '">' . $specrow['type_name'] . '</option>'; 
```

假设您的另一个列名称为 type_value，其中值存储为 100,200 等，而 type_name 是好、更好或最好的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:50:30.350

希望这是您可能想要的

```
<html>
<body>
    <input name="contact_build"
       type="text"
       id="contact_build"
       value="10" />
    <select onchange="change(this.value)" >
        <option value="0">Select</option>
        <option value="1"> 1</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
    </select>

    <input type="text" id="targ" value="0"/>

    <script>
        function change(val) {
            document.getElementById("targ").value = document.getElementById("contact_build").value*val;

        }
    </script>

</body>
</html> 
```

# omnet++ - omnet++ installation error in ubuntu

> ID：15917152
> 
> 赞同：0
> 
> 时间：2013-04-10T04:47:54.153
> 
> 标签：omnet++

i am getting the following error while running "make" command.

cd /home/bismillah/Desktop/omnetpp-4.1/out/gcc-release/src/utils && /home/bismillah/Desktop/omnetpp-4.1/src/utils/install-prog opp_lcg32_seedtool /home/bismillah/Desktop/omnetpp-4.1/bin /bin/sh: /home/bismillah/Desktop/omnetpp-4.1/src/utils/install-prog: Permission denied make[1]: *** [all] Error 126 make[1]: Leaving directory `/home/bismillah/Desktop/omnetpp-4.1/src/utils' make: *** [utils] Error 2

The configure command worked properly,, kindly help;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:52:15.793

提到的 install-prog 脚本应该在 linux 上设置一个可执行标志。

即使用

$ chmod +x 安装程序

就可以了，但通常应该在使用 $ tar xvfz omnetdistro-vertsion.tgz 提取存档后自动设置

可能您已经使用解压缩解压缩了 Windows 版本。我会尝试重新安装并密切关注安装指南。

# dynamics-crm-2011 - 如何在 CRM 2011 中自定义文本框？

> ID：15917161
> 
> 赞同：0
> 
> 时间：2013-04-10T04:48:31.433
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我需要在 CRM 2011 中创建或自定义文本框。如果我在该文本框中输入文本，它将显示链接，这意味着使用链接创建文本框。像这样，

怎么做？在此先感谢

![在此处输入图像描述](https://i.stack.imgur.com/kFB0x.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:09:10.347

在 CRM 2011 中，您需要在`Single Line of Text`自定义字段时更改类型的格式。

![在此处输入图像描述](https://i.stack.imgur.com/rIZI2.png)

您可以选择`E-mail`（它将打开电子邮件客户端）或`URL`（它将打开浏览器）

# android - 如何将 NDK 库导入 Eclipse

> ID：15917163
> 
> 赞同：4
> 
> 时间：2013-04-10T04:48:36.290
> 
> 标签：android, android-ndk

如何将 Android NDK 库导入 Eclipse Java 项目？应该有一些进口商这样做，但我找不到相同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T04:48:56.573

You can import an NDK project in to your Eclipse SDK project. On your project do a right-click and chose -> Android Tools -> Add Native Support -> Click Finish. This will pull your native project files to Eclipse. Now you have to implement the functions as given in several sample projects

# perl - Perl 符号表中不可打印的字符代表什么？

> ID：15917167
> 
> 赞同：10
> 
> 时间：2013-04-10T04:48:49.547
> 
> 标签：perl

我刚刚了解到，在 Perl 中，给定模块的符号表存储在与模块名称匹配的哈希中 - 例如，虚构模块的符号表`Foo::Bar`将是`%Foo::Bar`. 默认符号表存储在`%main::`. 出于好奇，我决定要查看 中的内容`%main::`，因此遍历哈希中的每个键/值对，边走边打印：

```
#! /usr/bin/perl

use v5.14;
use strict;
use warnings;

my $foo;
my $bar;
my %hash;

while( my ( $key, $value ) = each  %:: )  {
    say "Key: '$key' Value '$value'";
} 
```

输出如下所示：

```
Key: 'version::' Value '*main::version::'
Key: '/' Value '*main::/'
Key: '' Value '*main::'
Key: 'stderr' Value '*main::stderr'
Key: '_<perl.c' Value '*main::_<perl.c'
Key: ',' Value '*main::,'
Key: '2' Value '*main::2'
... 
```

我期待看到 STDOUT 和 STDERR 文件句柄，也许还有 @INC 和 %ENV ......我没想到看到的是非 ascii 字符......上面的代码块没有显示的是输出的第三行实际上有一个表示不可打印字符的字形。

我运行脚本并按如下方式通过管道传输它：

```
perl /tmp/asdf.pl | grep '[^[:print:]]' | while read line
do 
    echo $line
    od -c <<< $line
    echo
done 
```

输出如下所示：

```
Key: '' Value '*main::'
0000000   K   e   y   :       ' 026   '       V   a   l   u   e       '
0000020   *   m   a   i   n   :   : 026   '  \n
0000032

Key: 'ARNING_BITS' Value '*main::ARNING_BITS'
0000000   K   e   y   :       ' 027   A   R   N   I   N   G   _   B   I
0000020   T   S   '       V   a   l   u   e       '   *   m   a   i   n
0000040   :   : 027   A   R   N   I   N   G   _   B   I   T   S   '  \n
0000060

Key: '' Value '*main::'
0000000   K   e   y   :       ' 022   '       V   a   l   u   e       '
0000020   *   m   a   i   n   :   : 022   '  \n
0000032

Key: 'E_TRIE_MAXBUF' Value '*main::E_TRIE_MAXBUF'
0000000   K   e   y   :       ' 022   E   _   T   R   I   E   _   M   A
0000020   X   B   U   F   '       V   a   l   u   e       '   *   m   a
0000040   i   n   :   : 022   E   _   T   R   I   E   _   M   A   X   B
0000060   U   F   '  \n
0000064

Key: ' Value '*main:'
0000000   K   e   y   :       '  \b   '       V   a   l   u   e       '
0000020   *   m   a   i   n   :   :  \b   '  \n
0000032

Key: '' Value '*main::'
0000000   K   e   y   :       ' 030   '       V   a   l   u   e       '
0000020   *   m   a   i   n   :   : 030   '  \n
0000032 
```

那么 Perl 符号表中的不可打印字符在做什么呢？它们的符号是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T06:48:38.830

Guru 走在正确的轨道上：具体来说，答案可以在[perlvar](http://perldoc.perl.org/perlvar.html)中找到，它说：

> “Perl 变量名称也可以是数字序列或单个标点符号或控制字符。这些名称都是为 Perl 的特殊用途保留的；例如，全数字名称用于保存正则表达式后的反向引用捕获的数据匹配。Perl 对单控制字符名称有一种特殊的语法：它理解`^X`(caret X) 表示控制 X 字符。例如，符号`$^W`(dollar-sign caret W) 是标量变量，其名称是单字符 control-W。这比在程序中输入文字 control-W 更好。
> 
> 从 Perl 5.6 开始，Perl 变量名可以是以控制字符（或者更好的是，插入符号）开头的字母数字字符串。这些变量必须写成`${^Foo}`; 大括号不是可选的。`${^Foo}`表示标量变量，其名称为 control-F 后跟两个 o。这些变量为 Perl 将来的特殊用途保留，除了以`^_`(control-underscore 或 caret-underscore) 开头的变量。`^_`在 Perl 的任何未来版本中，任何以 因此，这些名称可以在程序中安全地使用。`$^_`然而，它本身是保留的。”

如果你想以一种可读的方式打印这些名称，你可以在你的代码中添加这样的一行：

```
$key = '^' . ($key ^ '@') if $key =~ /^[\0-\x1f]/; 
```

如果 of 的第一个字符`$key`是控制字符，则将其替换为插入符号，后跟相应的字母（`^A`对于 control-A，`^B`对于 control-B，等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:06:12.960

Perl 有特殊的变量，例如`$"`, `$,`, `$/`,`$\`等等。所有这些都是符号表的一部分，这就是您所看到的。此外，您还应该能够在符号表中看到@INC、%ENV。

# c++ - Opening file through a pipe

> ID：15917169
> 
> 赞同：0
> 
> 时间：2013-04-10T04:49:00.610
> 
> 标签：c++, file, io

I'm trying to write a program that allows me to type something like this on the command line:

```
cat inputfile | myprogram outputfile 
```

In myprogram I need to open both the input and output file without the input file being a parameter. I know how to open the output file and set it to a descriptor:

```
int out=open(argv[1],O_RDONLY); 
```

But I don't know how to do this with the input file. I know the output of cat is sent to the cin of my program but I don't want to read the file in line by line. Is it possible to do this in a way similar to opening the output file? Like so:

```
int in=open(?????,O_RDONLY); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:44:51.473

在 C 中，它可以像这样解决

```
#include<stdio.h>
#include <unistd.h>
#include <fcntl.h>

int main(int argc, char **argv)
{
        int flags=fcntl(0,F_GETFL);
        fcntl(0,F_SETFL,flags|O_NONBLOCK);
        char ch;
        while(read(0,&ch,1))
        {
                printf("%c",ch);
        }
} 
```

# date - 验证结束日期是否大于开始日期

> ID：15917172
> 
> 赞同：3
> 
> 时间：2013-04-10T04:49:05.910
> 
> 标签：date, jquery-validate

我想检查结束日期是否大于或等于开始日期，使用 jquery 验证。它正在验证结束日期大于开始日期，但不允许结束日期等于开始日期，

这是我的代码 -

```
 jQuery.validator.addMethod("greaterThan", 
function(value, element, params) {
    if (!/Invalid|NaN/.test(new Date(value))) {
        return new Date(value) > new Date($(params).val());
    }
    return isNaN(value) && isNaN($(params).val()) 
        || (Number(value) > Number($(params).val())); 
},'Must be greater than {0}.');

jQuery("#collect_and_delivery").validate({ 
        errorElement:'div',               
        rules: {                    
                from:{
                        required:true
                     },
                to:{
                    required:true
                },
                start_date:{
                    required:true
                },
                 end_date:{
                    required:true,
                    greaterThan: "#start_date"              
                }
        },
        messages: {
               from:"Please enter collect address",
               to:"Please enter delivery address",
               start_date:"Please enter shipping collect date",
               end_date:
               { 
                    required:"Please enter shipping delivery date",
                    greaterThan:"Delivery date and Collect date should be proper"
               }
        }                
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:25:19.643

您应该在您的自定义方法中使用`is greater than or equal to`( ) 。**`>=`**`greaterThan`

更改此行：

```
return new Date(value) > new Date($(params).val()); 
```

至：

```
return new Date(value) >= new Date($(params).val()); 
```

享受...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T08:41:58.147

如果你想使用简单的 javascript 来比较日期。这是一个；简单易行。

```
 function compareDate() {
    var str = document.getElementById("start_date").value;
    var end = document.getElementById("end_date").value;
    var year = str.substring(0,4);
    var month = str.substring(5,7);
    var date = str.substring(8,10);
    var endYear = end.substring(0,4);
    var endMonth = end.substring(5,7);
    var endDate = end.substring(8,10);
    var startDate = new Date(year, month-1, date);
    var endDate = new Date(endYear, endMonth-1, endDate);

    if (startDate > endDate) {
      alert('start date should be less than end date');
       return false;
    } 
    else { return true; }
} 
```

# codeigniter - Codeigniter ORM Datamapper保存错误

> ID：15917177
> 
> 赞同：0
> 
> 时间：2013-04-10T04:49:23.173
> 
> 标签：codeigniter, codeigniter-datamapper

我是 datamapper 的新手，我尝试使用此代码保存对象

```
$user = new users();
$user->name = $name;
$user->parent = $id_parent;
$user->seq = $seq;
$user->save() 
```

codeigniter 在执行代码时给出这个错误

```
Severity: Warning

Message: sprintf() [function.sprintf]: Too few arguments

Filename: libraries/datamapper.php

Line Number: 4158 
```

数据未保存在 db 中，但是当我`$user->check_last_query()`在 MYSQL 上使用和执行返回的 SQL 时，插入了行。有人可以找出这里的问题吗？谢谢。

# codeigniter - 使用codeigniter上传多个文件

> ID：15917178
> 
> 赞同：0
> 
> 时间：2013-04-10T04:49:31.923
> 
> 标签：codeigniter, upload, multifile-uploader

我在使用 codeigniter 时遇到了多个上传文件的问题。我之前尝试过很多方法，但仍然没有成功。

这是我的代码。

**看法**

```
<?php echo form_open_multipart('staff/upload_files', array('id' => 'form_checkbox')); ?> 
```

**内表：**

```
 <tr>
        <th width="20%">Select File :</th>
        <td>
            <input type="file" name="userfile[]" value="" />&nbsp;<span class="green">[Max File Upload: 2MB]</span><br>
            <input type="file" name="userfile[]" value="" />&nbsp;<span class="green">[Max File Upload: 2MB]</span><br>
            <input type="file" name="userfile[]" value="" />&nbsp;<span class="green">[Max File Upload: 2MB]</span> 
        </td>
    </tr> 
```

**控制器**

```
 function upload_files() {
        $data['studentid'] = $studentid;
        if ($this->input->post('submit')) {

            $config['upload_path'] = './upload/announcement/collegecode/';
            $config['allowed_types'] = 'jpg|png';
            $config['max_size'] = '2048';
            $config['max_width'] = '0';
            $config['max_height'] = '0';
            $config['overwrite'] = FALSE;

            $this->load->library('upload', $config);
            if (!$this->upload->do_upload()) {
                $this->session->set_flashdata('msg', 'error: ' . $this->upload->display_errors());
            } else {
                $this->session->set_flashdata('msg', 'success:Successfully Upload Student Photo');
            }
        }

        $this->template->load('template', 'staff/announcement', $data);
    } 
```

我也试过这个方法，但没有上传文件。

```
$config['upload_path'] = './upload/announcement/collegecode/';
        $path=$config['upload_path'];
        $config['allowed_types'] = 'gif|jpg|jpeg|png';
        $config['max_size'] = '2048';
        $config['max_width'] = '1920';
        $config['max_height'] = '1280';
        $this->load->library('upload');

        foreach ($_FILES as $key => $value)
        {

            if (!empty($key['userfile']))
            {

                $this->upload->initialize($config);
                if (!$this->upload->do_upload($key))
                {

                    $errors = $this->upload->display_errors();

                    flashMsg($errors);

                }
                else
                {
                     // Code After Files Upload Success GOES HERE
                }
            }
        } 
```

# android - ExpandableListView 中的 ContextMenu

> ID：15917181
> 
> 赞同：1
> 
> 时间：2013-04-10T04:49:48.753
> 
> 标签：android, contextmenu, expandablelistview, childviews

嗨 frnds 在我的应用程序中，我使用 expandableListView。我需要为可扩展的 listView 集成一个 contextMenu。在我的可扩展 ListView 中，我为不同的孩子膨胀了不同的布局。因此，当我长按每个 childView 时，我需要执行不同的操作。

这里我给出了 ContextMenu 的代码。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    ExpandableListView.ExpandableListContextMenuInfo info=
            (ExpandableListView.ExpandableListContextMenuInfo)menuInfo;
    int type=ExpandableListView.getPackedPositionType(info.packedPosition);
    Log.e("type",""+type);
    menu.setHeaderTitle("Options");
    menu.add(1, 1, 1, "Edit");
}
@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListView.ExpandableListContextMenuInfo info = (ExpandableListView.ExpandableListContextMenuInfo)item.getMenuInfo();

    if(item.getItemId()==1)
    {
        Log.e("clickd","menu");
    }
    return super.onContextItemSelected(item);
} 
```

并在我的 onCreate() 中注册 listView forContextMenu。

```
registerForContextMenu(expListView); 
```

但是当我按下 GroupView 时，它会显示 contextMenu。但是当我单击 childView 时，它没有显示 ContextMenu .. 请帮助我.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:41:36.210

使用它对我有用的这个。将您的适配器设置为 Expandable ListView 后编写它。

```
setListAdapter(expListAdapter);
            registerForContextMenu(getExpandableListView()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-21T11:55:46.847

您还必须将视图设置为可在`getChildView(...)`适配器中长时间单击。

```
public View getChildView(int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    ... 
    convertView.setLongClickable( true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T20:19:23.963

只需使用：

```
@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
} 
```

在您的 ExpandableListViewAdapter

# cmd - 将转义变量复制到 txt 文件批处理

> ID：15917182
> 
> 赞同：0
> 
> 时间：2013-04-10T04:49:52.033
> 
> 标签：cmd, escaping

这是我想做的。如果我这样做，我有一个变量名

```
echo %a% >txt.txt 
```

它将存储 a 的值

我要存储在 a 中的是文本

```
%a% 
```

像这样。

试过了

```
%%a%% 
^%a^% 
%%%a%%% 
%%%^ a^ %% 
```

1.  *   突出显示前三个字符
2.  *   突出显示除第一个之外的所有内容 ^
3.  *   只给出了 1% 作为输出
4.  *   和上面一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:11:26.943

这将为您工作并突出显示变量：

```
echo %%a%%>txt.bat & notepad++ txt.bat 
```

或者，更高级：

```
echo %%a%%>txt.cmd & notepad++ txt.cmd 
```

# r - R 中是否有与 textplot() 等效的函数用于将 S4 对象打印到 PDF？

> ID：15917183
> 
> 赞同：1
> 
> 时间：2013-04-10T04:49:56.970
> 
> 标签：r, pdf, s4, lme4, gplots

我有几个适合`lmer`（**lme4**包）的随机效应模型。例如：

```
a.1=lmer(songTrait ~ 1 + (1|Year) + (1|ID), REML=F)
a.2=lmer(songTrait ~ Date + (1|Year) + (1|ID), REML=F) 
```

我想打印这些模型的表格摘要，理想情况下，类似于您使用的打印输出

```
a.1 
```

或者

```
show(a.1) 
```

这段代码...

```
pdf("c:/temp/x.pdf")
textplot(anova(a.1,a.2,method="ML"),cex=.8,halign="center",cmar=2)  
dev.off() 
```

可以很好地打印模型比较，但我还想打印每个模型的详细摘要（因为我有 18 个`songTrait`变量我正在拟合模型）。不幸的是，`textplot`（**gplots**包）无法处理 S4 输出，而且我还没有找到一个好的解决方法。任何帮助将非常感激！

# ember.js - 嵌套在 Ember.js 中的部分手风琴内的侧导航列表不显示项目

> ID：15917186
> 
> 赞同：1
> 
> 时间：2013-04-10T04:50:24.180
> 
> 标签：ember.js, zurb-foundation

我正在尝试将基础 UI 与 ember.js 一起使用，但我似乎在让部分正常工作方面遇到问题。div class="content" 中的任何内容都不会出现。我猜这是因为 href ='#' Section 1 。我还能在哪里错？当我试图弄清楚事情时，我对 ember 的工作原理没有清晰的了解。

```
 <div class="section-container accordion" data-section>
            <section class="section">
                <p class="title"><a href="#">Section 1</a></p>
                <div class="content">
                    <ul class="side-nav">
                        <li><a href="#">Item !</a></li>

                    </ul>
                </div>
            </section>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:29:14.747

您的问题是由于默认情况下，部分`content`内具有类的任何元素都是隐藏的。除非您初始化基础，否则它将保持隐藏状态。解决您的问题的关键是这样做：

```
$(document).foundation(); 
```

现在确保你引用了 Foundation 的脚本：`foundation.min.js`

# javascript - Jquery：循环插件突然停止工作

> ID：15917187
> 
> 赞同：0
> 
> 时间：2013-04-10T04:50:27.240
> 
> 标签：javascript, jquery, jquery-plugins, jquery-cycle

我有一个[Cycle](http://jquery.malsup.com/cycle/)插件在我的网站上运行良好，直到今天客户表示它不工作。我检查了指向插件 .js 文件和 jquery 的链接，一切都很好，但我得到了错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“循环”

在我的控制台中。我不明白是什么可能导致断开连接。

我的代码是：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="assets/js/jqcycle.js"></script>
<script type="text/javascript">
$(function() {

$('#frontimageswap') 
.before('<div id="nav">') 
.cycle({ 
    fx:     'turnDown', 
    speed:  'fast', 
    timeout: 5000, 
    pager:  '#nav' 
});
});
</script> 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:17:09.347

我的错是看不正确。页面后面还有另一个 jquery 库链接。

# ios - 地标和注释之间的区别

> ID：15917192
> 
> 赞同：1
> 
> 时间：2013-04-10T04:50:51.080
> 
> 标签：ios, mapkit, mkannotation

对iOS开发不是很熟悉。我有一个非常愚蠢的问题要问！！地标和注释之间有区别吗？我已经浏览了一些 Apple Developer 文档。在某处提到地标具有 areaOfInterest 属性。我不确定注释是否也有一个。

除此之外，地标与注释有何不同？

提前致谢！！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:15:45.343

注释提供了一种在地图上突出显示特定坐标并提供有关它们的附加信息的方法。您可以使用注释来标注特定地址、兴趣点和其他类型的目的地。在地图上显示时，注释通常具有某种图像来标识其位置，并且还可能具有标注气泡，提供信息和指向更多内容的链接。

对于地标，请参阅此链接

[http://ioscreator.com/display-placemarks-with-mapkit/](http://ioscreator.com/display-placemarks-with-mapkit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:03:17.877

从 MKPlacemark 类参考：

> 地标也是一种注解，符合 MKAnnotation 协议，其属性和方法包括地标坐标等信息。因为它们是注释，所以您可以直接将它们添加到地图视图中。

`MKPlacemark`继承自`CLPlacemark`，它具有属性`areasOfInterest`。

看看这两个类和协议的类引用应该可以搞清楚。

# ruby - 重构丑陋的 ruby 代码

> ID：15917193
> 
> 赞同：0
> 
> 时间：2013-04-10T04:50:57.940
> 
> 标签：ruby, refactoring

下面的代码获取一些文本，查找逗号，并返回一个没有逗号的拆分版本数组。

```
class A
  def separate_comma_values(text)
    txt_len = text.length
    if txt_len == 0
      return [""]
    end
    final = []
    sub_arry = ""

    for i in (0...txt_len)
      ch = text[i]
      if ch == ","
        final << sub_arry
        final << ""
        sub = ""
      else
        sub_arry += ch
      end
    end
    return final
  end
end 
```

这是一个示例输入和输出：

```
s = A.new
print s.separate_comma_values("dh,,,dhhd,jhb")
# => ["dh", "", "dh", "", "dh", "", "dhdhhd", ""] 
```

虽然它做了我想让它做的事情，但我觉得它有些不对劲。它只是脏。

我知道我可以使用 ruby​​ 提供的内置方法来实现拆分。

**编辑：**我想这是对我原来帖子的编辑。这背后的动机是应用我在阅读红宝石书后发现的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:57:20.773

Ruby 中有一种方法可以满足您的需求。

[http://ruby-doc.org/core-2.0/String.html#method-i-split](http://ruby-doc.org/core-2.0/String.html#method-i-split)

```
2.0.0p0 :001 > "dh,,,dhhd,jhb".split(',')
 => ["dh", "", "", "dhhd", "jhb"] 
```

因此，您的代码最终可能会像

```
def separate_comma_values(text)
  text.split(',')
end 
```

**更新**：对不起，我错过了你提到你已经知道的部分`split`。哎呀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:07:20.143

显然，重构代码的唯一正确方法是使用`String#split`.

虽然，只是为了好玩：

```
def separate_comma_values(text)
  text.each_char.reduce(['']) do |splitted, char|    
    if char == ','
      splitted << ''
    else
      splitted.last << char
    end    
    next splitted    
  end    
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:01:55.427

这有点干净，尽管正如@depa 指出的那样，如果您尝试基于逗号进行拆分，则有一种更简单的方法，并且您的（以及此）代码无法正常工作。

```
class A
  def separate_comma_values(text)
    return [""] if text.empty?

    final = []
    sub_arry = ""

    text.each_char do |ch|
      if ch == ","
        final << sub_arry
        final << ""
      else
        sub_arry += ch
      end
    end

    return final
  end
end

s = A.new
print s.separate_comma_values("dh,,,dhhd,jhb")
puts 
```

这输出

```
["dh", "", "dh", "", "dh", "", "dhdhhd", ""] 
```

就像你一样。

以下是我将如何实现您的算法：

```
class A
  def separate_comma_values(text)
    return [""] if text.empty?

    array = []
    value = ""

    text.each_char do |c|
      if c == ","
        array << value
        value = ""
      else
        value += c
      end
    end

    array << value if !value.empty?

    array
  end
end

s = A.new
print s.separate_comma_values("dh,,,dhhd,jhb")
puts 
```

这输出

```
["dh", "", "", "dhhd", "jhb"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:07:21.243

作为看起来更好的一个小技巧（在我看来），您应该能够在方法末尾跳过“return”这个词，并且您的“seperate_comma_values(text)”可能只是没有括号的“seperate_comma_values text” （在您的文本编辑器中，语法颜色突出显示使这根本不是清晰度问题）

# algorithm - 枚举所有组合（笛卡尔积、算盘、里程表）

> ID：15917198
> 
> 赞同：1
> 
> 时间：2013-04-10T04:51:17.590
> 
> 标签：algorithm, delphi, combinatorics

如何在 Delphi (Object Pascal) 中实现以下算法：

*   每个字母数字项将是一个对象（在我的情况下是对文件字符串的引用）。
*   可以枚举（输出）每个拾取状态/组合。
*   想象算盘的柱子；都具有相同的大小（根据其基础）。我需要不同大小的列。（在我的情况下，不同大小的文件字符串集）

最后编辑：请参阅[Python intertools implementation](https://docs.python.org/2/library/itertools.html#itertools.product)。

其他语言中的类似算法：[c#](https://stackoverflow.com/questions/6058868/finding-all-possible-value-combinations-between-two-arrays?rq=1)、[ruby](https://stackoverflow.com/questions/15917198/algorithm-to-enumerate-abacus-like-or-the-rule-of-product-combinations)、[java](https://stackoverflow.com/questions/9632677/combinatorics-generate-all-states-array-combinations?rq=1)、[php](https://stackoverflow.com/questions/10149523/generate-a-combination-of-numbers/10149671#10149671)

## 算法

考虑以下集合及其成员：

> S1 = {a1, a2, a3, a4, a5}
> 
> S2 = {b1, b2, b3, b4}
> 
> S3 = {c1, c2, c3, c4, c5}

选择每组的第一个成员（P = Pick States）：

> P1 = {a1, b1, c1}

然后，增加第一个直到它的极限：

> P2 = {a2, b1, c1} P3 = {a3, b1, c1} P4 = {a4, b1, c1} P5 = {a5, b1, c1}

然后，重置第一个集合，并增加第二个集合的“一个”；

> P6 = {a1, b2, c1}

再次增加第一组……依此类推……为第三组上的每个“加一”重置第一组和第二组。

> P7 = {a2, b2, c1}

关于计数的基本原理或乘法原理，该算法将生成 100 个选择状态/组合。

> P100 = {a5, b4, c5}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:11:32.203

我已经使用递归和条件调用达成了解决方案。我用这种结构创建了一条记录：

```
 TGridKey = record
    ID : Integer;
    Index : Integer;
    Files : TStringList;
  end;

  TTrialSet = record
    theGrid : array of TGridKey;
  end; 
```

在 TForm 类中使用此名称。

```
TfRandStimuliSet = class (TForm)

    //...
    lst1: TListBox; 
    dlgOpenPic: TOpenPictureDialog;
private        
    FTrialSet: TTrialSet;
    procedure TfRandStimuliSet.SubSetsMountEngine;
    //...
end; 
```

设置网格数组的长度：

```
 NumComp := 3;
  SetLength(FTrialSet.theGrid, NumComp);
  for I := Low(FTrialSet.theGrid) to High(FTrialSet.theGrid) do
  begin
    FTrialSet.theGrid[I].ID := I;
    FTrialSet.theGrid[I].Index:= -1;
    FTrialSet.theGrid[I].Files := TStringList.Create;
  end; 
```

在每个“I”网格中放置一些字符串：

```
if dlgOpenPic.Execute then
  begin
    if dlgOpenPic.Files.Count > 0 then
    for K := 0 to (dlgOpenPic.Files.Count - 1) do
    begin
     FTrialSet.theGrid[I].Files.Add(dlgOpenPic.Files.Strings[K]);
    end;
    dlgOpenPic.Files.Clear;
  end; 
```

然后程序：

```
procedure TfRandStimuliSet.SubSetsMountEngine;
var ID: integer; s1 : string;
  procedure AddStmFromGrid(Grid, Stm : Integer);
  begin
    s1 := s1 + ExtractFileName(FTrialSet.theGrid[Grid].Files.Strings[Stm]) + ',';
  end;

  procedure AddTrialFromIndex; //each trial is the current index's
  var I: Integer;
  begin

    for I:= Low(FTrialSet.theGrid) to High(FTrialSet.theGrid) do
      AddStmFromGrid(I,FTrialSet.theGrid[I].Index);
    lst1.Items.Add(s1);
    s1:= '';
  end;

  procedure IndexReset(aGrid : Integer);
  var i : Integer;
  begin
    for  I := aGrid to (High(FTrialSet.theGrid)) do
      FTrialSet.theGrid[I].Index := 0
  end;

  procedure IndexInc(aGrid : Integer);
  begin
    AddTrialFromIndex; //Save
    Inc(FTrialSet.theGrid[aGrid].Index);
  end;

      function MoveGrid(var ID:integer): Boolean;   //begin from right most, the highest grid
      var IDMaxIndex, IDCurIndex, LowID, HighID: Integer;
      begin
        Result := True;
        LowID := Low(FTrialSet.theGrid);
        HighID := High(FTrialSet.theGrid);
        //Application.ProcessMessages;
        if  (ID < LowID) then 
          begin
            //ShowMessage('False');
            AddTrialFromIndex;
            Result := False;
          end
        else
          begin
            IDMaxIndex:= FTrialSet.theGrid[ID].Files.Count -1;
            IDCurIndex := FTrialSet.theGrid[ID].Index;

            if IDCurIndex = IDMaxIndex then  
              begin
                ID := ID - 1;
                Result:= MoveGrid(ID);//moveleft
                Exit;
              end;
            if   (ID < HighID)
             and (IDCurIndex < IDMaxIndex) then 
              begin
                IndexInc(ID);                 //increment/move donw
                IndexReset(ID + 1);           //reset everything on the right
                MoveGrid(HighID);             //move to the most right/next down
                Exit;
              end;
            if  (ID = (HighID))
             and (IDCurIndex < IDMaxIndex) then
              begin
                IndexInc(ID);          //increment/move down 
                MoveGrid(ID)           //next increment/move down
              end;  
          end;
      end;
begin
  ID := High(FTrialSet.theGrid);
  IndexReset(Low(FTrialSet.theGrid));  //0's for everyone
  MoveGrid(ID); //begin from the most right
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:20:35.667

你在数。

每个珠子都是一个数字，在您的示例中，您正在以 5 为基数工作，因为每个珠子可以有 5 个位置之一。

要确定珠子的哪个位置对应于给定的整数，只需将该整数写入相关的基数就足够了。以下是在 ruby​​ 中的操作方法`17`：

```
>> 17.to_s(5).rjust(3, '0')
=> "032" 
```

在这里，我左填充了 3 个珠子以清楚每个珠子的位置，并且我使用的约定是珠子从位置 0 开始，而不是位置 1。

# c# - 坏图像格式异常 C#

> ID：15917204
> 
> 赞同：48
> 
> 时间：2013-04-10T04:52:03.047
> 
> 标签：c#, .net, dll

我正在使用带有 .NET Framework 4.0 的 Visual C# Studio 10.0，我试图加载*SoundTouchSharp*库并在我的应用程序中创建库（对象）的实例。但是，在我输入文件的路径后，我收到此错误：

> `BadImageFormatException`was unhandled -- 试图加载格式不正确的程序。（异常来自`HRESULT`：0x8007000B）

我应该如何解决这个问题？我几乎可以肯定我使用 VS 终端创建了 .dll，它应该与 .NET 框架的版本相同。如果需要，我还可以提供更多代码。

谢谢！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-10T04:57:45.117

确保您没有 32 位/64 位冲突。

**参考这个问题：**

[BadImageFormatException 故障排除](https://stackoverflow.com/questions/8996653/troubleshooting-badimageformatexception)

如果您在 64 位操作系统上运行，则 Assembly RevitAPI 可能会编译为 32 位，而您的进程可能会编译为 64 位或“任何 CPU”。

或者，RevitAPI 编译为 64 位，您的进程编译为 32 位或“任何 CPU”并在 32 位操作系统上运行。

# javascript - 如何在点击链接的同时调用该链接所在页面的功能？

> ID：15917205
> 
> 赞同：1
> 
> 时间：2013-04-10T04:52:06.057
> 
> 标签：javascript, html, function

*   index.html - 有菜单`category1`, `category2`,`category3`
*   product.html - 有功能`changeIframe([category1 | category2 | category3]);`

当我单击“index.html”页面上的菜单时，一个链接会将我带到“product.html”页面，然后`changeIframe(var)`立即调用函数。该`changeIframe(var)`函数将比较`$var`（的值`var`后跟我单击的菜单名称），然后更改此页面中的内容。我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:01:54.310

只是一个想法，将类别作为 Url Hash 传递。

索引.html：

```
<a href="product.html#category1">Category 1</a>
<a href="product.html#category2">Category 2</a>
<a href="product.html#category3">Category 3</a> 
```

产品.html

```
var category = (location.hash).replace('#','');
changeIframe(category); //call function 
```

如果您确实需要使用 javascript。如果您使用服务器端脚本会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:07:40.623

将类别添加为链接上的主题标签并读出。

```
<a href="product.html#category1">menu link</a> 
```

在您的产品页面中

```
window.onload = function(){

    var category = (window.location.hash).replace("#",'');;
    alert(category);
    // changeIframe(category)

} 
```

并删除像@Charlie 节目中的“#”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:10:34.777

索引.html

```
<a href="product.html#category1">category 1</a>
<a href="product.html#category2">category 2</a>
<a href="product.html#category3">category 3</a> 
```

产品.html

```
$(document).ready(function(){
    var item =  toLowerCase((document.location.hash)).replace('#','');
    if(/category[1-3]/i.test(item)){
        changeIframe(item);
    }else{
        changeIframe(defaultitem);
    }
}); 
```

如果您使用的是 php

索引.html

```
<a href="product.html?item=category1">category 1</a>
<a href="product.html?item=category2">category 2</a>
<a href="product.html?item=category3">category 3</a> 
```

产品.html

```
<script>
<?php
if(isset($_GET['item']) && preg_match("/category[1-3]/", $_GET['item'])){
    echo "changeIframe(" . $_GET['item'] .");";
}else{
    echo "changeIframe(defaultitem);";
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:55:57.597

在 index.phtml 页面上，当您单击链接时将菜单名称作为查询字符串传递，当您到达 product.phtml 时，调用 $(document).ready 函数上的 changeiframe(var)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T05:08:54.640

使用 PHP 的一种方法（如果您有支持它的服务器）。

如果您最终获得 PHP 设置，这里是一种选择：

索引.php：

```
<a href="product.php?cat=1">Category 1</a>
<a href="product.php?cat=1">Category 2</a>
<a href="product.php?cat=1">Category 3</a> 
```

然后在 product.php 中将此代码与您的 Javascript 一起使用以获取通过的类别：

```
changeIframe(<?php $_GET['cat'] ?>) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T05:12:23.937

将链接作为查询字符串传递，`product.html?category=1`并且可以在该页面中使用此代码

```
 function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;

    }

    $(document).ready(function() {   

   var id = getUrlVars()["category"];
    changeIframe(var);
    }); 
```

# eclipse - 我的 Struts 2 根本不工作

> ID：15917211
> 
> 赞同：-1
> 
> 时间：2013-04-10T04:52:48.057
> 
> 标签：eclipse, struts2, tomcat7

Helo All，我是 Struts 的新手，为了成为开发人员，我需要精通 Struts .. 但是，我应该自学，现在，当我添加**struts.xml时遇到问题**

当我添加**struts.xml**时，结果总是显示**请求的资源不可用。** 当我删除它时，它会在没有 Struts 的情况下运行良好......

我已经学习了许多使用 struts 的简单教程，但没有一个适用于我的..

我认为，我的控制台日志中没有错误...

```
Apr 10, 2013 10:17:39 AM org.apache.catalina.core.AprLifecycleListener init INFO: The APR based
Apache Tomcat Native library which allows optimal performance in
production environments was not found on the java.library.path:
C:\Program
Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program
Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files
(x86)\NVIDIA
Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program
Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth
Software\syswow64;C:\Program Files (x86)\ATI
Technologies\ATI.ACE\Core-Static;c:\Program Files (x86)\Microsoft SQL
Server\90\Tools\binn\;C:\Program Files (x86)\Microsoft SQL
Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL
Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL
Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL
Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL
Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files
(x86)\Microsoft Visual Studio
9.0\Common7\IDE\PrivateAssemblies\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\Common Files\Microsoft
Shared\Windows Live;. Apr 10, 2013 10:17:40 AM
org.apache.tomcat.util.digester.SetPropertiesRule begin WARNING:
[SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting
property 'source' to 'org.eclipse.jst.jee.server:TryAgain' did not
find a matching property. Apr 10, 2013 10:17:40 AM
org.apache.coyote.AbstractProtocol init INFO: Initializing
ProtocolHandler ["http-bio-8080"] Apr 10, 2013 10:17:40 AM
org.apache.coyote.AbstractProtocol init INFO: Initializing
ProtocolHandler ["ajp-bio-8009"] Apr 10, 2013 10:17:40 AM
org.apache.catalina.startup.Catalina load INFO: Initialization
processed in 893 ms Apr 10, 2013 10:17:40 AM
org.apache.catalina.core.StandardService startInternal INFO: Starting
service Catalina Apr 10, 2013 10:17:40 AM
org.apache.catalina.core.StandardEngine startInternal INFO: Starting
Servlet Engine: Apache Tomcat/7.0.39 Apr 10, 2013 10:17:41 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Parsing
configuration file [struts-default.xml] Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Unable
to locate configuration files of the name struts-plugin.xml, skipping
Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Parsing
configuration file [struts-plugin.xml] Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Parsing
configuration file [struts.xml] Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (com.opensymphony.xwork2.ObjectFactory) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.FileManagerFactory) Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for
(com.opensymphony.xwork2.conversion.impl.XWorkConverter) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.impl.CollectionConverter) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.impl.ArrayConverter) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.impl.DateConverter) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.impl.NumberConverter) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.impl.StringConverter) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.ConversionPropertiesProcessor) Apr
10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for
(com.opensymphony.xwork2.conversion.ConversionFileProcessor) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.ConversionAnnotationProcessor) Apr
10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for
(com.opensymphony.xwork2.conversion.TypeConverterCreator) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.conversion.TypeConverterHolder) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.TextProvider) Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (com.opensymphony.xwork2.LocaleProvider) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.ActionProxyFactory) Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for
(com.opensymphony.xwork2.conversion.ObjectTypeDeterminer) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(org.apache.struts2.dispatcher.mapper.ActionMapper) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (jakarta) for
(org.apache.struts2.dispatcher.multipart.MultiPartRequest) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(org.apache.struts2.views.freemarker.FreemarkerManager) Apr 10, 2013
10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for
(org.apache.struts2.components.UrlRenderer) Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for
(com.opensymphony.xwork2.validator.ActionValidatorManager) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.util.ValueStackFactory) Apr 10, 2013 10:17:42
AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO:
Choosing bean (struts) for
(com.opensymphony.xwork2.util.reflection.ReflectionProvider) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Choosing bean (struts) for
(com.opensymphony.xwork2.util.reflection.ReflectionContextFactory) Apr
10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (com.opensymphony.xwork2.util.PatternMatcher) Apr
10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (org.apache.struts2.dispatcher.StaticContentLoader)
Apr 10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (com.opensymphony.xwork2.UnknownHandlerManager) Apr
10, 2013 10:17:42 AM
com.opensymphony.xwork2.util.logging.jdk.JdkLogger info INFO: Choosing
bean (struts) for (org.apache.struts2.views.util.UrlHelper) Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
info INFO: Loading global messages from [ApplicationResources] Apr 10,
2013 10:17:42 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger
error SEVERE: Dispatcher initialization failed Unable to load
configuration. - action -
file:/C:/apache-tomcat-7.0.39/wtpwebapps/TryAgain/WEB-INF/classes/struts.xml:18:54
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
  at
org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)   at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:473)
  at
org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
  at
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
  at
org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
  at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
  at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
  at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
  at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
  at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
  at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)  at
java.util.concurrent.FutureTask.run(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source) Caused by: Action class
[HelloWorld] not found - action -
file:/C:/apache-tomcat-7.0.39/wtpwebapps/TryAgain/WEB-INF/classes/struts.xml:18:54
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:482)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:426)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:543)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:292)
  at
org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:250)
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
  ... 17 more

Apr 10, 2013 10:17:42 AM org.apache.catalina.core.StandardContext
filterStart SEVERE: Exception starting filter Struts2Filter Unable to
load configuration. - action -
file:/C:/apache-tomcat-7.0.39/wtpwebapps/TryAgain/WEB-INF/classes/struts.xml:18:54
  at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:485)
  at
org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
  at
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
  at
org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
  at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
  at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
  at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
  at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
  at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
  at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)  at
java.util.concurrent.FutureTask.run(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source) Caused by: Unable to load
configuration. - action -
file:/C:/apache-tomcat-7.0.39/wtpwebapps/TryAgain/WEB-INF/classes/struts.xml:18:54
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
  at
org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)   at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:473)
  ... 15 more Caused by: Action class [HelloWorld] not found - action -
file:/C:/apache-tomcat-7.0.39/wtpwebapps/TryAgain/WEB-INF/classes/struts.xml:18:54
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:482)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:426)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:543)
  at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:292)
  at
org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:250)
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
  ... 17 more

Apr 10, 2013 10:17:42 AM org.apache.catalina.core.StandardContext
startInternal SEVERE: Error filterStart Apr 10, 2013 10:17:42 AM
org.apache.catalina.core.StandardContext startInternal SEVERE: Context
[/TryAgain] startup failed due to previous errors Apr 10, 2013
10:17:42 AM org.apache.catalina.startup.HostConfig deployWAR INFO:
Deploying web application archive
C:\apache-tomcat-7.0.39\webapps\FirstStruts-Try2.war Apr 10, 2013
10:17:44 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
java.lang.ClassNotFoundException:
org.apache.struts2.dispatcher.StrutsPrepareAndExecuteFilter   at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
  at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
  at
org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
  at
org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
  at
org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
  at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:260)
  at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
  at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
  at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
  at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
  at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
  at
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
  at
org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
  at java.util.concurrent.Executors$RunnableAdapter.call(Unknown
Source)   at java.util.concurrent.FutureTask$Sync.innerRun(Unknown
Source)   at java.util.concurrent.FutureTask.run(Unknown Source)  at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source)

Apr 10, 2013 10:17:44 AM org.apache.catalina.core.StandardContext
startInternal SEVERE: Error filterStart Apr 10, 2013 10:17:44 AM
org.apache.catalina.core.StandardContext startInternal SEVERE: Context
[/FirstStruts-Try2] startup failed due to previous errors Apr 10, 2013
10:17:44 AM org.apache.catalina.startup.HostConfig deployWAR INFO:
Deploying web application archive
C:\apache-tomcat-7.0.39\webapps\StrutsHelloWorld.war Apr 10, 2013
10:17:44 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger
error SEVERE: Dispatcher initialization failed
java.lang.RuntimeException:
java.lang.reflect.InvocationTargetException   at
com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:301)
  at
com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:438)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
  at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)   at
com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
  at
com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:584)
  at
com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:323)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:221)
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
  at
org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)   at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:473)
  at
org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
  at
org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
  at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
  at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
  at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
  at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
  at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
  at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
  at
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
  at
org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
  at java.util.concurrent.Executors$RunnableAdapter.call(Unknown
Source)   at java.util.concurrent.FutureTask$Sync.innerRun(Unknown
Source)   at java.util.concurrent.FutureTask.run(Unknown Source)  at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source) Caused by:
java.lang.reflect.InvocationTargetException   at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)   at
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)   at
java.lang.reflect.Method.invoke(Unknown Source)   at
com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:299)
  ... 31 more Caused by: java.lang.ExceptionInInitializerError  at
com.opensymphony.xwork2.ognl.OgnlValueStackFactory.setContainer(OgnlValueStackFactory.java:84)
  ... 36 more Caused by: java.lang.IllegalArgumentException: Javassist
library is missing in classpath! Please add missed dependency!  at
ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168)   ... 37 more Caused
by: java.lang.ClassNotFoundException: javassist.ClassPool   at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
  at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
  at java.lang.Class.forName0(Native Method)  at
java.lang.Class.forName(Unknown Source)   at
ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:165)   ... 37 more

Apr 10, 2013 10:17:44 AM org.apache.catalina.core.StandardContext
filterStart SEVERE: Exception starting filter struts2
java.lang.reflect.InvocationTargetException - Class:
com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector File:
ContainerImpl.java Method: inject Line: 301 -
com/opensymphony/xwork2/inject/ContainerImpl.java:301:-1  at
org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:485)  at
org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
  at
org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
  at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
  at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
  at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746)
  at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5399)
  at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
  at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
  at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
  at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
  at
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
  at
org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
  at java.util.concurrent.Executors$RunnableAdapter.call(Unknown
Source)   at java.util.concurrent.FutureTask$Sync.innerRun(Unknown
Source)   at java.util.concurrent.FutureTask.run(Unknown Source)  at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source) Caused by:
java.lang.RuntimeException:
java.lang.reflect.InvocationTargetException   at
com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:301)
  at
com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:438)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
  at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)   at
com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
  at
com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
  at
com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:584)
  at
com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:323)
  at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:221)
  at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
  at
org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)   at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:473)
  ... 18 more Caused by: java.lang.reflect.InvocationTargetException
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)   at
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)   at
java.lang.reflect.Method.invoke(Unknown Source)   at
com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:299)
  ... 31 more Caused by: java.lang.ExceptionInInitializerError  at
com.opensymphony.xwork2.ognl.OgnlValueStackFactory.setContainer(OgnlValueStackFactory.java:84)
  ... 36 more Caused by: java.lang.IllegalArgumentException: Javassist
library is missing in classpath! Please add missed dependency!  at
ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168)   ... 37 more Caused
by: java.lang.ClassNotFoundException: javassist.ClassPool   at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
  at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
  at java.lang.Class.forName0(Native Method)  at
java.lang.Class.forName(Unknown Source)   at
ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:165)   ... 37 more

Apr 10, 2013 10:17:44 AM org.apache.catalina.core.StandardContext
startInternal SEVERE: Error filterStart Apr 10, 2013 10:17:44 AM
org.apache.catalina.core.StandardContext startInternal SEVERE: Context
[/StrutsHelloWorld] startup failed due to previous errors Apr 10, 2013
10:17:44 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory
C:\apache-tomcat-7.0.39\webapps\docs Apr 10, 2013 10:17:44 AM
org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying
web application directory C:\apache-tomcat-7.0.39\webapps\examples Apr
10, 2013 10:17:45 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized() Apr 10, 2013 10:17:45 AM
org.apache.catalina.core.ApplicationContext log INFO: SessionListener:
contextInitialized() Apr 10, 2013 10:17:45 AM
org.apache.catalina.core.ApplicationContext log INFO: ContextListener:
attributeAdded('org.apache.jasper.compiler.TldLocationsCache',
'org.apache.jasper.compiler.TldLocationsCache@634fbcac') Apr 10, 2013
10:17:45 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory
C:\apache-tomcat-7.0.39\webapps\host-manager Apr 10, 2013 10:17:45 AM
org.apache.catalina.startup.HostConfig deployDirectory INFO: Deploying
web application directory C:\apache-tomcat-7.0.39\webapps\manager Apr
10, 2013 10:17:45 AM org.apache.catalina.startup.HostConfig
deployDirectory INFO: Deploying web application directory
C:\apache-tomcat-7.0.39\webapps\ROOT Apr 10, 2013 10:17:45 AM
org.apache.coyote.AbstractProtocol start INFO: Starting
ProtocolHandler ["http-bio-8080"] Apr 10, 2013 10:17:45 AM
org.apache.coyote.AbstractProtocol start INFO: Starting
ProtocolHandler ["ajp-bio-8009"] Apr 10, 2013 10:17:45 AM
org.apache.catalina.startup.Catalina start INFO: Server startup in
4929 ms 
```

我使用了这些库作为教程给出

```
asm-3.3.jar      
asm-commons-3.3.jar      
asm-tree-3.3.jar      
commons-fileupload-1.2.2.jar      
commons-io-2.0.1.jar      
commons-lang3-3.1.jar      
freemarker-2.3.19.jar      
javassist-3.11.0.GA.jar      
log4j-1.2.9.jar      
ognl-3.0.6.jar      
struts2-core-2.3.12.jar      
xwork-core-2.3.12.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:21:09.357

你怎么可能认为你的日志中没有错误？

```
SEVERE: Exception starting filter struts2
java.lang.ClassNotFoundException:
org.apache.struts2.dispatcher.StrutsPrepareAndExecuteFilter   at 
```

这是真的，没有这样的课程。过滤器是：

```
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 
```

看起来您也有许多类/库问题，可能是由版本冲突引起的。

# iphone - 如何物理移动 Prefix.pch 和 Info.plist 文件

> ID：15917213
> 
> 赞同：2
> 
> 时间：2013-04-10T04:53:03.333
> 
> 标签：iphone, ios, xcode

我已经在物理目录结构中重新组织了我项目的几乎所有文件，以便它们都在一个物理目录中。但是，我似乎无法毫无问题地移动**Prefix.pch**或**Info.Plist**文件。

我移动其他文件的方法是

(1) 删除他们在**Xcode**中的引用，

(2) 使用 Finder 将它们物理移动到新的物理目录，并且

(3) 在**Xcode**中将它们添加回项目中。

我的项目中是否有设置对我必须更新的这两个文件的物理位置有特定的了解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:06:35.590

有称为**`Prefix header`**和的构建设置**`Info.plist File`**。您还必须将路径更改为这些设置的新路径。

并且要添加，您不必删除引用并再次添加。移动文件后，您可以单击该文件的 Xcode 引用。然后在文件检查器中，“位置”设置附近有一个小矩形框。如果单击它，您可以指定文件实际存在的位置。

![在此处输入图像描述](https://i.stack.imgur.com/Orrq1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T02:48:37.193

我想对你做同样的事情。你可以随心所欲地做。但在那之后，您需要更改 pch 和 plist 文件的“构建设置”。

![在此处输入图像描述](https://i.stack.imgur.com/crlSk.png) ![在此处输入图像描述](https://i.stack.imgur.com/dQzd4.png)

# sql - sql连接多个值

> ID：15917218
> 
> 赞同：1
> 
> 时间：2013-04-10T04:53:35.030
> 
> 标签：sql, sql-server-2008, concatenation, distinct

我在 SQL Server 2008 中设计了一个视图，它以这种格式显示 2 列不同的数据：

```
Column1 Column2
A       Text1
B       Text2
B       Text3
C       Text4
D       Text5
D       Text6
D       Text7
E       Text8 
```

我必须做些什么才能让视图仅显示不同的 Column1 值和 Column2 值连接起来，如下所示：

```
Column1 Column2
A       Text1
B       Text2, Text3
C       Text4
D       Text5, Text6, Text7
E       Text8 
```

如果我使用您似乎认为与此问题重复的答案中建议的代码，那么我会得到这种结果：

```
Column1 Column2
A       Text1,Text2,Text3,Text4,Text5,Text6,Text7,Text8
B       Text1,Text2,Text3,Text4,Text5,Text6,Text7,Text8
C       Text1,Text2,Text3,Text4,Text5,Text6,Text7,Text8
D       Text1,Text2,Text3,Text4,Text5,Text6,Text7,Text8
E       Text1,Text2,Text3,Text4,Text5,Text6,Text7,Text8 
```

编辑：@techdo 修改后的代码有效，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:03:03.143

请试试：

```
SELECT
    Column1,
    STUFF(
    (SELECT ',' + Column2
       FROM YourTable t2
        WHERE t2.Column1=t1.Column1
        FOR XML PATH(''),type).value('.','nvarchar(max)'), 1, 1, '') AS Column2
FROM
    YourTable t1
GROUP BY Column1 
```

检查[链接](https://stackoverflow.com/questions/14643660/order-orderdetail-getting-a-resultset-without-using-cursor)了解更多详情。

# objective-c - 为什么 release 不将指针设置为 nil 而不是让它指向已释放的内存？

> ID：15917219
> 
> 赞同：1
> 
> 时间：2013-04-10T04:53:40.263
> 
> 标签：objective-c, cocoa, memory-management

在下面的代码中，`alert`被分配和初始化，显示，然后释放。释放前后，`alert`仍然指向同一个地址。为什么系统没有将`alert`指针设置为`nil`after `release`？：

```
 -(void) viewDidLoad {
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle: @”Hello”
                       message: @”This is an alert view”
                       delegate: self
                       cancelButtonTitle: @”OK”
                       otherButtonTitles: @”Option 1”, @”Option 2”, nil];
        [alert show];
        [alert release];
        [super viewDidLoad];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:58:59.487

I. 因为即使它是适当的，`release`也不能（也不会）对调用它的对象指针做任何事情，因为就像 C 中的任何事情一样，它是按值传递的。此外，在手动引用计数下，指针永远不会隐式设置为，这是ARC`nil`下指针的一个特性。`weak`

二、无论如何，这都是错误的。该类`UIAlertView`在显示时将自身作为子视图添加到某个视图中，因此它会被保留。因此，在您期望它被释放时，它的引用计数不为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:55:59.380

因为`alert`指向的对象还在附近。它显示在屏幕上，因此无法从内存中删除。

呼叫`release`只会告诉系统“我已经完成了”。它不会显式地从内存中删除任何东西，直到系统（以及任何其他持有指向该对象的指针的对象）也完成了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:58:59.797

像这样发送的消息不可能更改非本地指针的值。你必须做一个任务：

```
alert = [alert release]; 
```

请注意，当您使用 ARC 编译时，有可用的[弱指针](http://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)，当指向的对象被销毁时，它确实使用运行时库来`nil`输出您的变量。

其次，`release`不负责销毁对象。在许多情况下，对象在发送后实际上仍然存在`release`，因为它还有其他所有者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:58:23.343

指针保存“那个东西的地址”。`release`转到“那件事” 。它们是不同的内存位置。

# salesforce - 在 Salesforce 对象中获取对象关系

> ID：15917226
> 
> 赞同：0
> 
> 时间：2013-04-10T04:54:58.907
> 
> 标签：salesforce

我需要获取与销售人员用户相关的机会列表。但我不知道用户对象和机会对象之间的关系。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:07:36.940

当您说“与销售人员用户关联的机会”时，我假设您想要一个销售人员所有者是机会记录所有者的机会列表。你可以这样做：

```
user u = [select id, name from user where id='put the user id here'];
list<opportunity> listOfOpportunity = [select id, name from opportunity where ownerId=: u.Id]; 
```

还有其他方法可以将用户与机会相关联：createdBy 和 lastmodifiedBy.. 您还可以将自定义循环添加到 User 对象

希望能帮助到你

# java - 如何使用 iText fetch 获取单元格值

> ID：15917232
> 
> 赞同：2
> 
> 时间：2013-04-10T04:55:51.017
> 
> 标签：java, excel, apache-poi, itext

这是一个 Emp.xls 表：-

```
+-------+-------------+---------------+--------+
| EmpId |  Name       | Designation   |  Salary|
+-------+-------------+---------------+--------+
|  1.0  |   Akon Roy  | project led   | 12000.0|
|  2.0  |   Brey Deo  | manager       | 13000.0|
|  3.0  |   Dean      | delivery head | 14000.0|
|  4.0  |   Clark     | team led      |155555.0|
+-------+-------------+---------------+--------+ 
```

**我的问题**是我想创建一个**PDF 文件**，其中的输出如下：-

```
 Hello <name>, 
```

这里的**名称**可以是**用户**给出的 Emp.xls 记录中的任何名称。如何使用**iText**和**Apache poi**解决这个问题。

我的代码是：

```
 public static void main(String[] args) {

        try {

            FileInputStream inputFile = new FileInputStream("E:\\Emp.xls");
            HSSFWorkbook workbook = new HSSFWorkbook(inputFile);
            HSSFSheet sheet = workbook.getSheetAt(0);

            //adding row iterator
            Iterator<Row> rowitr = sheet.iterator();
            OutputStream file = new FileOutputStream(new File("E:\\Test.pdf"));

            Document document = new Document();
            PdfWriter.getInstance(document, file);

            document.open();
            document.add(new Paragraph("Hello World, iText"));
            //document.add(new Paragraph("Dear "));

            while(rowitr.hasNext()){
                Row row = rowitr.next();

                //adding cell iterator
                Iterator<Cell> cellitr = row.iterator();
                while(cellitr.hasNext()){
                    Cell cell = cellitr.next();

            switch(cell.getCellType()){
               case Cell.CELL_TYPE_STRING:
                    if(cell.getStringCellValue == "Dean")       
               document.add(new Chunk("Dear " cell.getStringCellValue()+ ","));

                    }
                }
            }
            document.close();
            file.close();

        } catch (Exception e) {

            e.printStackTrace();
        }
    } 
```

如果 iText 无法使用，请向我推荐任何其他开源 API 任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:09:54.630

根据您对原始问题的评论之一，您

> 尝试获取单元格值并与 ​​excel 名称字段进行比较，例如：

```
switch(cell.getCellType())
{
case Cell.CELL_TYPE_STRING:
    if (cell.getStringCellValue() == "Dean")
        document.add(new Chunk(cell.getStringCellValue())); 
```

即您`==`用于`String`比较。

这是几乎没有用的东西，因为在 Java 中`==`应用于对象会检查双方是否引用了**相同的对象实例。**另一方面，您只想检查`String`两边的实例是否*代表相同的字符序列。*对于此任务，您应该使用以下`equals`方法：

```
 if ("Dean".equals(cell.getStringCellValue())) 
```

（我还切换了操作数以防止`NullPointerExceptions`if `cell.getStringCellValue()`is`null`出于某种原因。）

一般来说，使用`==`只对原始数据类型和您知道它们所代表的唯一对象（例如`enum`对象）有意义。

# r - 向量化 seq 的优雅方式？

> ID：15917233
> 
> 赞同：5
> 
> 时间：2013-04-10T04:55:53.477
> 
> 标签：r

尽管标题相似，但这与[R 中的 Vectorizing rep 和 seq](https://stackoverflow.com/questions/5060850/vectorizing-rep-and-seq-in-r)问题不同。

我的直接目标：给定一个向量，我想生成一个新向量，其中包含原始值以及旧值中每个值之间的规则间隔。这并不难。

一种策略是使用更通用的函数，给定两个向量和指定的`by`间隔，使用相同的`by`值重复将 seq 应用于来自两个原始向量的数对。我还没有找到执行此操作的内置函数。 `seq`似乎拒绝将向量作为参数处理。这是一个执行更一般操作的函数（然后我可以立即使用它）：

```
multiseq <- function(froms, tos, by){
  x <- c(); 
  for (i in seq_along(froms)){
    x <- c(x, seq(from=froms[i], to=tos[i], by=by))
  }
  x
} 
```

例如：

```
> multiseq(1:2, 1.75:2.75, .25)
[1] 1.00 1.25 1.50 1.75 2.00 2.25 2.50 2.75 
```

（这只是一个简单的例子。我真正想要的是用任意序列来做到这一点，例如

```
-0.89115386 -0.75346155 -0.61576924 -0.47807693 -0.34038463 -0.20269232 -0.06500001  0.07269230  0.21038460  0.34807691  0.48576922  0.62346153  0.76115383 
```

我想将每个间隔细分为五个，以创建一个包含 5 倍多的元素的新序列。）

只要序列不太长，重复扩展一个向量就不会太慢，我相信。如果我需要大序列，我可以重写以预先扩展向量并填充它。然而，我仍然用循环来做这件事。有没有更优雅的函数式编程 R-ly 方式？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T05:26:05.447

在 R 中，向量化函数的最简单方法之一是使用`Vectorize`函数。

基本上，您可以对参数进行向量化，并将所有启动器`from`作为参数`to`中的向量，并对`from`参数执行相同的操作`to`。

使用你的例子，你可以做这样的事情

```
seq2 <- Vectorize(seq.default, vectorize.args = c("from", "to"))

unlist(seq2(from = c(1, 1.75), to = c(2, 2.75), by = 0.25))

## [1] 1.00 1.25 1.50 1.75 2.00 1.75 2.00 2.25 2.50 2.75 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:29:22.907

正如@TylerRinker 在对我的问题的评论中所建议的那样，对于我的特殊需求，有一个比我对问题的表述所建议的更简单的解决方案——我太专注于一种特定的思考方式。由于我希望在已经规则间隔的数字之间插值规则间隔的数字，因此我可以只应用`seq`到向量中的初始值和终端值，使用一个`by`值均匀地划分为原始向量中值之间的间隔：

```
subdiv <- function(x, by) seq(x[1], x[length(x)], by)
subdiv(1:4, .25)
[1] 1.00 1.25 1.50 1.75 2.00 2.25 2.50 2.75 3.00 3.25 3.50 3.75 4.00
subdiv(c(-0.20269232, -0.06500001,  0.07269230), 0.1376923/3)
[1] -0.20269232 -0.15679489 -0.11089745 -0.06500002 -0.01910259  0.02679485  0.07269228 
```

其中 0.1376923 是第二个应用程序中连续元素之间的差异。只要我不需要从原始向量中携带的元素完全等于它们的原始值，这个解决方案就可以了——正如您所看到的，由于浮点运算存在一些差异。（我实际上在做的是为直方图构建箱；精确的边界并不重要。）

不过，@dickoa 和 @geektrader 的答案具有更广泛的用途，并且可以保留输入向量中原始数字的确切值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:09:58.620

尝试关注

```
x <- c(1, 2, 4, 8)
y <- unlist(mapply(FUN = function(from, to) {
    seq(from = from, to = to, by = 0.25)
}, head(x, -1), tail(x, -1)))
y
##  [1] 1.00 1.25 1.50 1.75 2.00 2.00 2.25 2.50 2.75 3.00 3.25 3.50 3.75 4.00 4.00 4.25 4.50 4.75 5.00 5.25 5.50 5.75 6.00
## [24] 6.25 6.50 6.75 7.00 7.25 7.50 7.75 8.00

result <- y[!duplicated(y)]
result
##  [1] 1.00 1.25 1.50 1.75 2.00 2.25 2.50 2.75 3.00 3.25 3.50 3.75 4.00 4.25 4.50 4.75 5.00 5.25 5.50 5.75 6.00 6.25 6.50
## [24] 6.75 7.00 7.25 7.50 7.75 8.00 
```

# java - 这个分隔符怎么做？

> ID：15917234
> 
> 赞同：0
> 
> 时间：2013-04-10T04:55:55.580
> 
> 标签：java, string, text-parsing

我有这个字符串：

> 1945：纽约大学：70：俄亥俄州立大学：65

我想使用扫描仪来阅读它并忽略分数字段`':'`、`70`和。`65`但我希望它读取年份。我知道如何设置分隔符以丢弃所有数字和`':'`，但我不知道如何使其仅丢弃某些数字。我所说的真的可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:20:31.397

尝试

```
 Scanner sc = new Scanner("1945:New York University:70:Ohio State:65");
    sc.useDelimiter(":\\d+:|:\\d+$|:");
    while(sc.hasNext()) {
        System.out.println(sc.next());
    } 
```

输出

```
1945
New York University
Ohio State 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:34:16.177

我的回答，转贴无幽默

```
Scanner scanner = new Scanner("1945:New York University:70:Ohio State:65");
scanner.useDelimiter(":(\\d\\d:?)?");

while(scanner.hasNext()) {
    System.out.println(scanner.next());
}
scanner.close(); 
```

# sql - Create Insert query with null value in SQL Server

> ID：15917235
> 
> 赞同：4
> 
> 时间：2013-04-10T04:55:57.167
> 
> 标签：sql, sql-server-2008, insert, null

I create insert query for `Organization` table.

```
select 'Insert into Organizations(Name, IndustryId, ContactPerson, Email, Website, LocationId, ContactNumber, Mobilenumber) values(''' + 
       IsNull(Nameofthecompany, 'NULL') + ''',' + 
       Isnull(IndustryType, 'NULL') + ',''' +
       Isnull(Nameofthepersonresponsibleforrecruitment, 'NULL') + ''', ''' +
       Isnull(EmailId, 'NULL') + ''', ''' +
       Isnull(websiteaddress, 'NULL') + ''',' +
       Isnull(Location, 'NULL') + ',' +
       Isnull(PhoneNumber, 'NULL') + ',' +
       Isnull(MobileNumber, 'NULL') + ')' 
from Organization 
```

Here I have the result set

```
Insert into Organizations(Name, IndustryId, ContactPerson, Email, Website, LocationId, ContactNumber, Mobilenumber)
values('username', industry, 'Name', 'NULL', 'NULL', place, NULL, 999999999) 
```

I don't want the NULL value within quotes. If I remove the quotes means I get error. Please Help me find out the problem..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:42:52.680

If a value is NULL, then adding it to a string will produce a NULL. This allows us to add the quotes in the ISNULL check and just produce NULL in the true value of the check, producing the correct syntax for nulls or not nulls as necessary.

```
select 'Insert into Organizations(Name, IndustryId, ContactPerson, Email, Website, LocationId, ContactNumber, Mobilenumber) values(' + 
       IsNull(''''+Nameofthecompany+'''', 'NULL') + ', ' + 
       Isnull(''''+IndustryType+'''', 'NULL') + ', ' +
       Isnull(''''+Nameofthepersonresponsibleforrecruitment+'''', 'NULL') + ', ' +
       Isnull(''''+EmailId+'''', 'NULL') + ', ' +
       Isnull(''''+websiteaddress+'''', 'NULL') + ', ' +
       Isnull(''''+Location+'''', 'NULL') + ', ' +
       Isnull(PhoneNumber, 'NULL') + ', ' +
       Isnull(MobileNumber, 'NULL') + ')' 
from Organization 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:43:12.730

If you want to use `NULL` (as a literal - not a string) for your NULL values, then the creation of the `INSERT` statement gets a lot more complicated; if the value is `NULL`, then you need to add the literal `NULL` **without** a leading and trailing `'`.

For each column where you want to do this, you'll need to use a `CASE` statement - something like this:

```
select 'INSERT INTO Organizations(.....) ' + 
       'VALUES(' + 
       CASE 
           WHEN NameOfTheCompany IS NOT NULL 
              THEN '''' + NameOfTheCompany + ''', '
              ELSE 'NULL, ' 
       END + 
       CASE 
           WHEN IndustryType IS NOT NULL 
              THEN '''' + IndustryType + ''', '
              ELSE 'NULL, ' 
       END +
       ..... and so on ......
       + ')' 
```

... and so on, for each column you need this `CASE` statement ....

# angularjs - 如何删除AngularJS ng-src添加到url的正斜杠

> ID：15917237
> 
> 赞同：0
> 
> 时间：2013-04-10T04:55:58.433
> 
> 标签：angularjs, angularjs-directive, angularjs-ng-repeat

我有一个使用以下代码的应用程序

```
 <li ng-repeat="video in videos.feed.entry">
        <div>
            <h4>{{video.title.$t}}</h4>
            <img ng-src="{{video.media$group.media$thumbnail[2].url}}">
        </div>
    </li> 
```

但是最终结果在 src 属性中添加了一个正斜杠，它看起来像这样

```
<img ng-src="/http://i.ytimg.com/vi/4x-elJk6hWY/2.jpg" src="/http://i.ytimg.com/vi/4x-elJk6hWY/2.jpg"> 
```

请注意 http 之前的正斜杠。有什么办法可以删除它还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:28:34.047

造成问题的是 PHP 模板而不是 AngularJs。

# html - 为什么我的 html 结构无法通过 jquery 找到

> ID：15917240
> 
> 赞同：0
> 
> 时间：2013-04-10T04:56:03.607
> 
> 标签：html, jquery

我所有的页面源代码都是这样

```
<?php
include 'config/koneksi.php';
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Lay Out Penempatan Produk UHT Area Gudang Rak A-F</title>
<link rel="icon" href="http://localhost/wifi/images/RSUP.png">
<link rel="stylesheet" type="text/css" href="css/popup-window.css" media="screen">

<script type="text/javascript" src="js/popup-window.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>

<script>
    function setvalue(values) {
    document.getElementById('posisi').value = values;
}
</script>

<script type="text/javascript">
var htmlobjek;
$(document).ready(function(){
  //apabila terjadi event onchange terhadap object <select id=pid>
  $("#pid").change(function(){
    var pid = $("#pid").val();
     $.ajax({
        url: "ambilnamaproduk.php",
        data: "pid="+pid,
        cache: false,
        success: function(data){
        $("#pname").val(data);
        }
        });
    });
  });
</script>

<script>
var i = $("#data").attr('value');
    alert(i);
</script>

<script type="text/javascript">
var htmlobjek;
 $(document).ready(function () {
var i = $("#myTD").val();
      $.ajax({
             url: "cek.php",
             type:'POST'
             data: "i="+i,
             cache: false,
             success: function (data) {
                 $("#cek").val(data);
             }

        });            
});
 var k = $("#cek").val();
if(k = "0"){
 $(document).ready(function () {
                 $(".data").css("background-color", "#00CC00");//green
                 });
                 }
    else{
 $(document).ready(function () {
                 $(".data").css("background-color", "#FF0000");//red
                 });
}                 
 </script>

</head>
<body>
<div>
<input id="cek" name="cek" type="text" />

<table width="1023" border="1">
  <tr>
    <th colspan="2">A1</th>
    <th colspan="2">A2</th>
    <th colspan="2">A3</th>
    <th colspan="2">A4</th>
    <th colspan="2">A5</th>
    <th colspan="2">A6</th>
    <th colspan="2">A7</th>
    <th colspan="2">A8</th>
    <th colspan="2">A9</th>
  </tr>
  <tr>
    <td id="data" value="A1.4"> <div align="center"> <input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down', parent : this, width : '270px' });setvalue(this.value);" value="A1.4" /></div></td>
    <td class="data"><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A1.8" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.4" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.8" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.4" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.8" /></div></td>

    <td><div align="center">A4.4</div></td>
    <td><div align="center">A4.8</div></td>
    <td><div align="center">A5.4</div></td>
    <td><div align="center">A5.8</div></td>
    <td><div align="center">A6.4</div></td>
    <td><div align="center">A6.8</div></td>
    <td><div align="center">A7.4</div></td>
    <td><div align="center">A7.8</div></td>
    <td><div align="center">A8.4</div></td>
    <td><div align="center">A8.8</div></td>
    <td><div align="center">A9.4</div></td>
    <td><div align="center">A9.8</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.3</div></td>
    <td><div align="center">A1.7</div></td>
    <td><div align="center">A2.3</div></td>
    <td><div align="center">A2.7</div></td>
    <td><div align="center">A3.3</div></td>
    <td><div align="center">A3.7</div></td>
    <td><div align="center">A4.3</div></td>
    <td><div align="center">A4.7</div></td>
    <td><div align="center">A5.3</div></td>
    <td><div align="center">A5.7</div></td>
    <td><div align="center">A6.3</div></td>
    <td><div align="center">A6.7</div></td>
    <td><div align="center">A7.3</div></td>
    <td><div align="center">A7.7</div></td>
    <td><div align="center">A8.3</div></td>
    <td><div align="center">A8.7</div></td>
    <td><div align="center">A9.3</div></td>
    <td><div align="center">A9.7</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.2</div></td>
    <td><div align="center">A1.6</div></td>
    <td><div align="center">A2.2</div></td>
    <td><div align="center">A2.6</div></td>
    <td><div align="center">A3.2</div></td>
    <td><div align="center">A3.6</div></td>
    <td><div align="center">A4.2</div></td>
    <td><div align="center">A4.6</div></td>
    <td><div align="center">A5.2</div></td>
    <td><div align="center">A5.6</div></td>
    <td><div align="center">A6.2</div></td>
    <td><div align="center">A6.6</div></td>
    <td><div align="center">A7.2</div></td>
    <td><div align="center">A7.6</div></td>
    <td><div align="center">A8.2</div></td>
    <td><div align="center">A8.6</div></td>
    <td><div align="center">A9.2</div></td>
    <td><div align="center">A9.6</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.1</div></td>
    <td><div align="center">A1.5</div></td>
    <td><div align="center">A2.1</div></td>
    <td><div align="center">A2.5</div></td>
    <td><div align="center">A3.1</div></td>
    <td><div align="center">A3.5</div></td>
    <td><div align="center">A4.1</div></td>
    <td><div align="center">A4.5</div></td>
    <td><div align="center">A5.1</div></td>
    <td><div align="center">A5.5</div></td>
    <td><div align="center">A6.1</div></td>
    <td><div align="center">A6.5</div></td>
    <td><div align="center">A7.1</div></td>
    <td><div align="center">A7.5</div></td>
    <td><div align="center">A8.1</div></td>
    <td><div align="center">A8.5</div></td>
    <td><div align="center">A9.1</div></td>
    <td><div align="center">A9.5</div></td>
  </tr>
</table>
</div>

<div   class="popup_window_css" id="sample">
<table class="popup_window_css">
<tr    class="popup_window_css">
<td    class="popup_window_css">
<div   class="popup_window_css_head"><img src="images/close.gif" alt="" width="9" height="9" />Aksi</div>
<div   class="popup_window_css_body"><div style="border: 1px solid #808080; padding: 6px; background: #FFFFFF;">
<form method="post" action="aksi.php"/>
<table>
    <tr>
     <td> Werehouse Product </td>
     <td><select name="wp">
        <option selected>- Jenis Werehouse -</option>
        <?php
        $q = mssql_query("select WHSName from tblSPDMstWarehouseProduct Order by WHSID"); 

        while ($r = mssql_fetch_array($q)){
        echo "<option value=$r[WHSName]>$r[WHSName]</option>";
        }
        ?>
</select>
</td>
    <tr>
     <td> Posisi</td>
     <td> <input type='text' name='posisi' id='posisi' readonly/></td>
    </tr>
    <tr>
     <td> Product ID</td>
     <td> <select name="pid" id="pid">
        <option selected = "selected" >- Produk ID -</option>
            <?php
            $q = mssql_query("select ProductID from tblMstProduct Order by ProductID"); 

            while ($r = mssql_fetch_array($q)){
            echo "<option value=$r[ProductID]>$r[ProductID]</option>";
        }?>
        </select>
     </td>
    </tr>
    <tr>
     <td> Product Name</td>
     <td ><input type="text" id="pname" name="pname" size="65" readonly/>
     </td>
    </tr>
    <tr>
     <td> Production Date</td>
     <td > <input type='text' name="tgl" /></td>
    </tr>
    <tr>
        <td colspan='2' align='center'>
         <input type='submit' value= 'Save'> 
         <input type='button' value='view' onclick="javascript:ajax_post();"/>
         </td>
    </tr>
</table>
<div class="popup_window_css_foot"></div></td></tr></table>
</div>
</body>
</html> 
```

我们专注于

```
<td id="data" value="A1.4"> <div align="center"> <input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down', parent : this, width : '270px' });setvalue(this.value);" value="A1.4" /></div></td> 
```

当我使用这个 jquery

```
<script>
var i = $("#data").attr('value');
    alert(i);
</script> 
```

在单一内容中检查它在[http://jsfiddle.net/6qxQW/119/](http://jsfiddle.net/6qxQW/119/)

但是在我用我的所有代码实现它之后。我的浏览器说这个值（i）未定义..真令人头疼..知道什么问题...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:27:38.230

我的建议是，你可以这样尝试：

```
<table>
    <tr>
        <td id="data" data-value="A1.4" >
            <div align="center">
                <input type="button" value="A1.4" />
            </div>
        </td>
    </tr>
</table> 
```

并使用它：

```
var i = $("#data").data('value');
alert(i); 
```

顺便说一句，如果您使用的是 AJAX，这可能行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:04:29.350

当页面加载并读取/解析您的 javascript 时，您的代码会立即执行。把它想象成从上到下阅读。它会在页面的其余部分完成加载之前立即开始执行您的代码（包括 id 为“data”的元素）。它可能会在您的本地计算机上运行，​​因为延迟更少甚至没有，并且所有内容都会立即加载，但在服务器上它会稍微慢一些，因此您可能会或可能不会看到问题，但通常会。

您应该能够通过将其包装在 jquery 文档就绪事件处理程序中来解决您的问题，以便在文档完成加载之前代码不会执行。 [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
$(document).ready(function() {
    // Handler for .ready() called.

    //AT THIS POINT #data should now be loaded in the DOM and be available to access.
    var i = $("#data").attr('value');
    alert(i);
}); 
```

# android - android edittext 不会失去焦点

> ID：15917241
> 
> 赞同：1
> 
> 时间：2013-04-10T04:56:13.497
> 
> 标签：android, listview, focus, android-edittext

我有一个列表视图，其中包含一个编辑文本、一个文本视图和一个图像视图。最初 edittext 消失了，而 textview 是可见的。我的目标是如果用户单击图像视图，文本视图将切换到编辑文本，用户将能够输入新文本。之后，如果用户再次单击图像视图，新文本将被更新。我的问题是在我单击 edittext 并编写 sth listview 后失去焦点，我无法再次单击到 imageview。（甚至没有调用 listview 的 OnItemClick 方法）。我怎样才能克服它？

# php - sql语句已准备好但未执行（根据日志）

> ID：15917246
> 
> 赞同：1
> 
> 时间：2013-04-10T04:57:01.930
> 
> 标签：php, mysql, usercake

所以，我正在使用 usercake（用于用户管理的开源 php mysql 组合）。无论如何，我已经安装了它并且工作正常没有问题。由于我希望我的注册不包括显示名和用户名，我已经在所有代码中删除了显示名，这包括 mysqldb 以及在 vanilla 安装中调用或使用它的任何其他地方。我的老用户仍然可以正常登录和运行，但是在注册新用户时出现错误我无法弄清楚（我对 mysql/php 还很陌生，所以我希望这里有人可以帮助我解释我的日志文件为这是我第一次需要参考它们）首先这里是实际准备数据/插入 mysql 的代码（所有转义和清理都省略了）

```
 $stmt = $mysqli->prepare("INSERT INTO ".$db_table_prefix."users (
          user_name,
          password,
          email,
          activation_token,
          last_activation_request,
          lost_password_request, 
          active,
          title,
          sign_up_stamp,
          last_sign_in_stamp
          )
          VALUES (
          ?,
          ?,
          ?,
          ?,
          '".time()."',
          '0',
          ?,
          'New Member',
          '".time()."',
          '0'
          )");

 $stmt->bind_param("sssssi", $this->username, $secure_pass, $this->clean_email, $this->activation_token, $this->user_active);
         $stmt->execute();
         $inserted_id = $mysqli->insert_id;
         $stmt->close();

 //Insert default permission into matches table
 $stmt = $mysqli->prepare("INSERT INTO ".$db_table_prefix."user_permission_matches  (
        user_id,
        permission_id
        )
        VALUES (
        ?,
        '1'
        )");
 $stmt->bind_param("s", $inserted_id);
 $stmt->execute();
 $stmt->close(); 
```

所以我认为上面的所有内容（关键字）现在都很好，这里是调用上述代码时的日志 mysql 日志文件

```
 65 Prepare   INSERT INTO uc_users (
                user_name,
                password,
                email,
                activation_token,
                last_activation_request,
                lost_password_request, 
                active,
                title,
                sign_up_stamp,
                last_sign_in_stamp
                )
                VALUES (
                ?,
                ?,
                ?,
                ?,
                '1365565745',
                '0',
                ?,
                'New Member',
                '1365565745',
                '0'
                )
       65 Close stmt    
       65 Prepare   INSERT INTO uc_user_permission_matches  (
                user_id,
                permission_id
                )
                VALUES (
                ?,
                '1'
                )
       65 Execute   INSERT INTO uc_user_permission_matches  (
                user_id,
                permission_id
                )
                VALUES (
                '0',
                '1'
                ) 
```

现在有两件事我不明白上面发布的所有内容，第一件事和更相关的是为什么`Execute INSERT INTO uc_user (...`永远不会被调用？其次，为什么其余代码会执行（并以某种方式将 user_id 插入 uc_user）并将其正确传递给`uc_user_permision_matches`?

第 2 部分对于更熟悉 UserCake 内部工作的任何人来说，这个值绑定到什么，`sssssi`因为我在其他地方找不到对它的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:51:36.403

看起来问题是 MySQL 拒绝插入查询`INSERT INTO uc_user_permission_matches`，因为 user_id 是 0，这让我相信之前的查询没有正确完成。

看起来在您的第一个查询中有 5 个占位符，但您尝试绑定 6 个，试试这个：

```
// Remove one of the s placeholders 
$stmt->bind_param("ssssi", $this->username, $secure_pass, $this->clean_email, $this->activation_token, $this->user_active); 
```

# objective-c - 在 Mac OSX 中连接插座 - 混乱

> ID：15917252
> 
> 赞同：0
> 
> 时间：2013-04-10T04:57:33.327
> 
> 标签：objective-c, xcode, macos, cocoa

我来自 iOS 编程背景。现在我正在尝试在 Mac OSX 中编写一个应用程序。我正在尝试将我的界面文件 MainWindow.xib 中的按钮连接到 ViewController，就像我在 iOS 编程中通常所做的那样来划分方法。但是，我只能将按钮连接到 AppDelegate.h - 为什么会这样？我无法将按钮连接到任何其他文件，我尝试过 NSViewController、NSWindowController。我可以通过转储 AppDelegate.h 中的所有方法来继续，但如果可能的话，我想根据文件对这些方法进行逻辑分组。

在 Mac OSX 中做这样的事情的正确方法是什么？

提前致谢。

这是我的 AppDelegate

```
#import <Cocoa/Cocoa.h>

@class MainLoop;

@interface AppDelegate : NSObject <NSApplicationDelegate> {

}

@property (nonatomic, strong, readonly)IBOutlet NSWindow *window;
@property (nonatomic, strong, readonly)MainLoop *mainLoop;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:44:39.177

请按照以下步骤操作：[此处的演示项目](http://www.keepandshare.com/doc/6143598/osx-outlet-in-other-class-controller-33k?da=y)

> *   创建一个从`NSWindowController`. 在图像中是`OutletCollection`。

![在此处输入图像描述](https://i.stack.imgur.com/lr2FI.png)

> *   创建一个对象，将其类设置为 OutletCollection。

![在此处输入图像描述](https://i.stack.imgur.com/AQ3GR.png)

> *   将此对象作为窗口的委托。

![在此处输入图像描述](https://i.stack.imgur.com/WdJ8h.png)

> *   现在您可以创建网点。

![在此处输入图像描述](https://i.stack.imgur.com/qzyrK.png)

# android - 上传一个xml文件到win服务器

> ID：15917257
> 
> 赞同：2
> 
> 时间：2013-04-10T04:57:48.450
> 
> 标签：android, file-upload

xml 文件存储在我的 SD 卡上。

我想将 xml 文件上传到服务器。

我正在使用[Apache Commons Net 3.2 Library](http://commons.apache.org/proper/commons-net/download_net.cgi)。

我使用了以下代码：

```
 FTPClient con = new FTPClient();
    try
    {
        con.connect(InetAddress.getByName("ftp.domin.com"),21);

        if(con.login ("username","password")){
            con.setFileType(FTP.BINARY_FILE_TYPE);
            con.enterLocalPassiveMode();
            File file = new File(Environment.getExternalStorageDirectory()+"/test.xml");
            InputStream in = new FileInputStream(file);
            con.storeFile("test.xml", in);
            in.close();

        }
        if(con.isConnected()){

            Log.i(TAG,"Connect to server");
        }else{

            Log.i(TAG,"No Connect to server");
        }
        con.logout();
        con.disconnect();    

    }
    catch (Exception e){    
        Log.e(TAG, e.getStackTrace().toString());
        Log.e(TAG, "Exception: " + e.getMessage());
    } 
```

但它显示以下错误：[错误照片](http://s1.picofile.com/file/7719817418/U.png)

我使用了以下权限：

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

这里重要的是我无法运行此部分：

```
 if(con.isConnected()){

            Log.i(TAG,"Connect to server");
        }else{

            Log.i(TAG,"No Connect to server");
        } 
```

请帮我 ！

谢谢。

# regex - 使用 htaccess 从 url 中删除 .php

> ID：15917258
> 
> 赞同：9
> 
> 时间：2013-04-10T04:58:01.530
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

编辑：当前 .htaccess 文件：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension snippet

# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L]

# To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

我的网站托管在连接到大型托管帐户的域的子文件夹中。

```
basesite
  /iioengine
    /forums
      /.htaccess //file works
      /.... //other MyBB content
    /demos.php
    /index.php //iioengine.com (homepage)
    /.htaccess //file doesn't work
    /... //other iioengine php pages 
```

是我使用两个不同的 htaccess 文件的问题吗？

这是一个需要工作的链接：http: [//iioengine.com/demos](http://iioengine.com/demos)

我注意到这个当前的 htaccess 文件也破坏了所有论坛的 URL

这不再有效：http: [//iioengine.com/forums/Forum-Box2D](http://iioengine.com/forums/Forum-Box2D)

编辑：感谢您重新打开，我已经取得了一些进展。这是我当前的 htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
</IfModule> 
```

我仍然得到 404 页，但如果我把这一行放在：

`RewriteRule . /index.php [L]`

所有非“.php”的请求都被转发到主页...所以 mod_rewrite 肯定是启用的，它只是不能正常工作。有谁知道可能是什么问题？

**编辑**：这**不是重复**的 - 其他解决方案都不适合我。我的问题是不*存在解决方案*，它*为什么不为我工作*。没有人能够解决这个问题，我自己也尝试了很多解决方案。这个论坛的目的不就是解决具体问题吗？

请允许我澄清...

我在子文件夹中运行了 MyBB，它的重写工作正常。例如，此链接有效：http: [//iioengine.com/forums/Forum-Box2D](http://iioengine.com/forums/Forum-Box2D)

所有不属于 MyBB 的 php 页面在其 URL 中仍然具有 .php 扩展名 - 我正在尝试删除这些但没有任何效果。示例：http: [//iioengine.com/demos](http://iioengine.com/demos)

... [原帖]

显然有很多关于此的信息，但我尝试了近十几种不同的解决方案，但都没有超过 404 页面。

这是我的网站： http: [//iioengine.com/](http://iioengine.com/)，所有页面都是 php，除了主页和所有论坛页面之外的所有页面在其 URL 的末尾都有一个“.php”，我想删除它。

除了将非“.php”请求重定向到正确的页面之外，我还想删除“.php”部分，即使它是请求的一部分（因为我的所有内容都已经在其超链接）。

这是我到目前为止所拥有的，主要来自[这篇文章](https://stackoverflow.com/questions/9821222/remove-php-extension-explicitly-written-for-friendly-url)，但它不起作用，我得到一个 404 页面。

```
RewriteEngine on
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ $1.php [L,QSA]
RewriteCond %{REQUEST_URI} ^/(.*).php$
RewriteRule ^(.*)$ %1 [L,QSA] 
```

在所有情况下，我需要在我的 htaccess 文件中从 URL 中删除文件扩展名吗？谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-11T04:30:33.200

试试这个隐藏 .php 的代码（两种方式都可以）：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## don't touch /forum URIs
RewriteRule ^forums/ - [L,NC]

## hide .php extension snippet

# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L]

# To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:01:04.887

尝试这个。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ $1.php [L,QSA]
</IfModule> 
```

如果这不起作用，那么您的服务器没有激活 mod_rewrite 或支持 url 重写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:40:07.237

这应该工作

```
Options -Indexes +FollowSymlinks -MultiViews

RewriteEngine on

DirectoryIndex index.php

# REDIRECT Force requests for named index files to drop the index file filename, and force non-www to avoid redirect loop
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]*/)*index\.(html?|php[45]?)(\?[^\ ]*)?\ HTTP/
RewriteRule ^(([^/]*/)*)index\.(html?|php[45]?)$ http://example.com/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)/([^\.]+)\.php\ HTTP/
RewriteRule ^([a-zA-Z0-9_-]+)/([^.]+)\.php$ http://example.com/$1/$2 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)/([^/]+)/([^\.]+)\.php\ HTTP/
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([^.]+)\.php$ http://example.com/$1/$2/$3 [R=301,L]

# REDIRECT www to non-wwww
RewriteCond %{HTTP_HOST} !^example\.com$ [NC]
RewriteRule .? http://example.com%{REQUEST_URI} [R=301,L]

# REWRITE url to filepath
RewriteRule ^([a-zA-Z0-9_-]+)/([^/.]+)$ /$1/$2.php [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([^/.]+)$ /$1/$2/$3.php [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:47:34.583

这是我发现的最简单的语法，结果如下：

```
RewriteEngine on
RewriteRule ^/?PrivacyPolicy$ legal.php?mode=privacy [NC,L]
RewriteRule ^Report/([0-9]+)$ report.php?id=$1 [NC,L] 
```

结果：

1.  PrivacyPolicy 到 legal.php?mode=privacy
2.  报告/55 到 report.php?id=55

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-18T04:10:54.830

在 apache 2.4 及更高版本上，您可以使用以下带有**END**标志的规则从 url 中删除 .php 扩展名。

```
RewriteEngine on

RewriteRule ^(.+)\.php$ /$1 [NC,L,R=301]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)/?$ /$1.php [END] 
```

# java - 如何在方法内测试匿名类对象

> ID：15917259
> 
> 赞同：2
> 
> 时间：2013-04-10T04:58:04.497
> 
> 标签：java, unit-testing, anonymous-class

我正在使用 testNg 和 Mockito 编写单元案例。我面临的问题是使用下面给出的方法：

```
public void publishRequest(final NotificationRequest request){

    MessageCreator messageCreator = new MessageCreator() {

        @Override
        public Message createMessage(Session session) throws JMSException {
            if (logger.isDebugEnabled()) {
                logger.debug("Start of MessagePublisher publishRequest");
            }
            ObjectMessage msg = session.createObjectMessage();

            msg.setStringProperty(
                    "SELECTOR",
                    request.getAvailaibilityTier() + "-"
                            + request.getEsbReference());

            if (logger.isDebugEnabled()) {
            logger.debug("Message Selector=>"+msg.getStringProperty("SELECTOR"));
            }

            msg.setStringProperty(NotificationConstants.CACHE_KEY.name(),
                    request.getId());

            msg.setObject(request.getData());
            if (logger.isDebugEnabled()) {
                logger.debug("Publishing request -->" + request);
            }

            if (logger.isDebugEnabled()) {
                logger.debug("End of MessagePublisher publishRequest");
            }
            return msg;
        }
    };
    producerTemplate.send(messageCreator);
} 
```

在编写单元案例时，即使我的测试案例创建了 MessageCreater 对象，也不会调用 createMessage() 方法。我想将它也包含在我的单位案例中以获得更好的覆盖范围。任何想法如何测试内部类方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T08:21:57.833

可以说，anynomous 内部类是该`publishRequest`方法的实现细节。在进行单元测试时，您将通过测试合同`publishRequest`而不是内部实现来获得更健壮的测试。正如@vtheron 建议的那样，要测试您的`MessageCreator`，您必须将其提取到它自己的类中。但除此之外，还要考虑在课堂上“注入”对您的引用`MessageCreator`。这样，您就可以单独测试您的`publishRequest`和`MessageCreator`单独的。就个人而言，我更喜欢在构造函数中“注入”此类依赖项，但还有其他方法可以实现相同的目的。我会做这样的事情：

```
public class MyClass {
    private MessageCreator messageCreator;

    public MyClass(MessageCreator messageCreator) {
        this.messageCreator = messageCreator;
    }

    public void publishRequest(final NotificationRequest request) {
        producerTemplate.send(messageCreator);
    }
} 
```

`MessageCreator`然后，您可以在测试中简单地向您的班级发送“模拟” ：

```
public class MyTest {

    @Test
    public void testPublish() {
        MessageCreator mock = new MessageCreator() { // Mock impl (or use a mock library)};
        MyClass classToTest = new MyClass(mock);
        classToTest.publishRequest(notificationRequest);
        // Do assertions and verify
    }
} 
```

它仍在测试您的`publishRequest`方法的内部结构（测试`void`方法倾向于），但是如果您可以制定类似的合同

> 发布请求时，应将消息发送到队列

而不是

> publishRequest 应该创建一个 MessageCreator 并创建一个由生产者发送的消息

至少你有一个更抽象的方法来编写测试，从长远来看，这将明确地影响你编写测试的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:08:23.203

如果您觉得需要测试匿名类的行为，请将其移到 publishRequest 方法之外，使其成为顶级类或包含您的 publishRequest 方法的类中的静态类。

# macos - CIFilterGenerator 文件扩展名

> ID：15917260
> 
> 赞同：0
> 
> 时间：2013-04-10T04:58:07.477
> 
> 标签：macos, core-image, uti

[使用CIFilterGenerator 的`writeToURL:atomically:`方法](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CIFilterGenerator_Class/Reference/Reference.html#//apple_ref/occ/instm/CIFilterGenerator/writeToURL%3aatomically%3a)导出的生成的核心图像过滤器是否有预期的 UTI 或文件扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:43:41.513

是的，扩展名“.cifilter”。

如果您将其中之一保存到 /Library/Graphics/Image Units/，如果它具有该扩展名，它将被拾取。

# javascript - 嵌套的 javascript 函数丢失“this”

> ID：15917262
> 
> 赞同：0
> 
> 时间：2013-04-10T04:58:17.253
> 
> 标签：javascript, jquery

我有一个嵌套函数，它失去了“this”的正确范围

```
if(tabNav === true){

$("." + tabNavClass).show();
tabNavItem.first().addClass("active");//active class on first li
tabNavItem.each(function(i){
    $(this).attr("rel",(i + 1));
});                         

tabNavItem.on("click", function(e){

    tabNavClick();
    //this works, but i don't want it defined here. i want it in the tabNavClick() function
    //var data = $(this).attr("rel");
    //console.log(data);
    e.preventDefault();

});             

}           

//tab nav function          
function tabNavClick(){

// REGISTERS UNDEFINED HERE B/C LOSES SCOPE OF "THIS". FIX?!                    
var that = $(this);
var data = that.attr("rel");
console.log(data);

tabNavItem.removeClass("active");//remove existing active class 
```

};

我试过`var that = $(this)`了，但这不起作用，我不认为 .call 在这种情况下会起作用。我如何`$(this).attr("rel");`返回我想要的 rel # 值而不是`undefined`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:08:40.953

如果您想`tabNavClick()`获得所需的`this`值，那么您需要在调用它时指定：

```
tabNavItem.on("click", function(e){

    tabNavClick.call(this);
    //this works, but i don't want it defined here. i want it in the tabNavClick() function
    //var data = $(this).attr("rel");
    //console.log(data);
    e.preventDefault();

}); 
```

调用函数的方式决定了`this`值。如果它不是方法调用并且您没有使用`.call()`or `.apply()`，那么`this`将在任何函数调用时重置。在这种情况下，您可以使用`tabNavClick.call(this)`来使`this`值成为您想要的值。

* * *

其中，您可以更改`tabNavClick`为要操作的对象获取参数：

```
tabNavItem.on("click", function(e){

    tabNavClick(this);
    //this works, but i don't want it defined here. i want it in the tabNavClick() function
    e.preventDefault();

});     

//tab nav function          
function tabNavClick(obj){

    var data = $(obj).attr("rel");
    console.log(data);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:00:09.173

传递`$(this)`给函数

```
 tabNavClick($(this));

  function tabNavClick(obj){
     var that = obj;
     .... 
```

此外，您可以将函数 tabNavClick 作为点击处理程序传递并接受事件

```
 tabNavItem.on("click",tabNavClick)

  function tabNavClick(e){
      e.preventDefault();
      var that=$(this);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:04:16.267

您可以将`tabNavClick`自己作为点击处理程序传递：

```
tabNavItem.on("click", tabNavClick); 
```

这将以指向单击的项目`tabNavClick`的方式调用。`this`

您可以让`tabNavClick`return`false`以防止事件冒泡。此外，您也可以`tabNavClick`接受该事件：

```
function tabNavClick(e) {
    // ...
    e.preventDefault();
} 
```

# php - 如何在javascript变量中获取php函数返回值

> ID：15917265
> 
> 赞同：0
> 
> 时间：2013-04-10T04:58:26.783
> 
> 标签：php, javascript, ajax

如何`return`将 PHP 函数中的值用于 JavaScript 变量？例子：

PHP：

```
// Destination folder for downloaded files

$date = date('m.d.y'); 
mkdir("uploads/" . $date, 0777, true); 
$upload_folder = 'uploads/' . $date;

// If the browser supports sendAsBinary () can use the array $ _FILES
if(count($_FILES)>0) { 
    if( move_uploaded_file( $_FILES['upload']['tmp_name'] , $upload_folder.'/'.$_FILES['upload']['name'] ) ) {
        echo 'done';
    }
    exit();
} else if(isset($_GET['up'])) {
    // If the browser does not support sendAsBinary ()
    if(isset($_GET['base64'])) {
        $content = base64_decode(file_get_contents('php://input'));
    } else {
        $content = file_get_contents('php://input');
    }

    $headers = getallheaders();
    $headers = array_change_key_case($headers, CASE_UPPER);

    if(file_put_contents($upload_folder.'/'.$headers['UP-FILENAME'], $content)) {
        echo 'done';
    }
    exit();
}

$pathinfo = realpath($upload_folder);
return $pathinfo; 
```

Javascript

```
this.MakeRequest = function()
{
  var somename = "somenameTest";
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4)
    {
      HandleResponse(xmlHttp.responseText);
    }
  }

  xmlHttp.open("GET", "download.php", true); 
  xmlHttp.send();
}

function HandleResponse(response)
{
  document.getElementById('output').innerHTML = response;
      **var x = php return varible**

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:35:43.340

```
function HandleResponse(response)
{
  document.getElementById('output').innerHTML = response;
      var x = <?php echo json_encode($pathinfo);?>; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:32:36.550

只是`echo`你的`PHP`变量：

```
var x='<?php echo $pathinfo; ?>'; 
```

祝你好运！

# javascript - 如何从html打开保存对话框？

> ID：15917271
> 
> 赞同：2
> 
> 时间：2013-04-10T04:58:58.033
> 
> 标签：javascript, html

在我的项目中，有一个纯 html 的输出页面。结果在 DIV 内部。我必须设置保存按钮。单击保存按钮时，保存对话框提示并询问名称并保存除按钮代码之外的整个 HTML。

我们必须假设观众对浏览器控制不敏感。我们必须提供这种机制来将内容保存到他们的物理驱动器中。

我谷歌它。但是，我没有找到任何相关的解决方案。

提前致谢。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:17:58.047

你不能，在浏览器中 Javascript 没有文件 IO 功能。这是设计使然。

如果要打印页面，您可以要求用户只需按 CTRL+S 或使用 document.print。看看这里以及以[编程方式发送密钥](https://stackoverflow.com/questions/1472458/programmatically-sending-keys-to-input-field)

# javascript - 检查所有单选按钮以获取所选值

> ID：15917278
> 
> 赞同：0
> 
> 时间：2013-04-10T04:59:20.747
> 
> 标签：javascript, jquery, radio-button

我有一个问题清单。一次可以看到一个问题 - 其余的问题是隐藏的 - 当您处理接下来要按的每个问题时。您还可以随时按下并更改答案。

我试图弄清楚到目前为止是否有任何问题被回答否 - 如果他们已经展示了这个项目。否则显示其他。

标记：

```
<div id="audit">
    <p>
        <label class="check-label">Question 1</label>
        <br />
        <input type="radio" value="Yes" id="CAT_Custom_235312_0" name="CAT_Custom_235312" class="required" />Yes
        <br />
        <input type="radio" value="No" id="CAT_Custom_235312_1" name="CAT_Custom_235312" class="required" />No</p>
    <p>
        <label class="check-label">Question 2</label>
        <br />
        <input type="radio" value="Yes" id="CAT_Custom_235313_0" name="CAT_Custom_235313" class="required" />Yes
        <br />
        <input type="radio" value="No" id="CAT_Custom_235313_1" name="CAT_Custom_235313" class="required" />No</p>
    <p>
        <label class="check-label">Question 3</label>
        <br />
        <input type="radio" value="Yes" id="CAT_Custom_235314_0" name="CAT_Custom_235314" class="required" />Yes
        <br />
        <input type="radio" value="No" id="CAT_Custom_235314_1" name="CAT_Custom_235314" class="required" />No</p>
</div>
<div class="granted" style="display: none;">Yes</div>
<div class="denied" style="display: none;">No</div> 
```

和 JS

```
$('input[type="radio"]').click(function () {
    if ($('input[type=radio]:checked').val() == 'No') {
        $('.denied').show();
        $('.granted').hide();
    } else {
        $('.granted').show();
        $('.denied').hide();
    }
}); 
```

这是我到目前为止所拥有的 jsFiddle：http: [//jsfiddle.net/5ZKyH/1/](http://jsfiddle.net/5ZKyH/1/)（仅限收音机）

它适用于第一个项目，但之后不再适用。我可以根据需要多次更改第一个答案并且它会交换，但是如果我转向第二个问题，则什么也不会发生。

最后，它需要准确地告诉我是否有任何问题回答否

似乎无法弄清楚如何每次检查所有输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:08:59.517

尝试使用以下 Javascript：

```
$("#audit").on("click", 'input[type="radio"]', function () {
    var allRadios = $('input[type="radio"]');
    var checkedNo = allRadios.filter(function () {
        return $(this).is(":checked") && $(this).val() === "No";
    });
    if (checkNo.length > 0) {
        $('.denied').show();
        $('.granted').hide();
    } else {
        $('.granted').show();
        $('.denied').hide();
    }
}); 
```

**演示：http:** [//jsfiddle.net/ma7k9/1/](http://jsfiddle.net/ma7k9/1/)

它过滤被选中并具有`value`“否”的单选按钮。如果找到，则显示“.denied”元素，否则显示“.granted”元素。

请注意我是如何更改事件绑定的。这使用事件委托，并将一个事件绑定到`<div id="audit">`元素...而不是一个事件到每个单选按钮。对我来说，这是有道理的，以防您在页面上有其他单选按钮并且不想为此定位它们，并减少绑定的处理程序的数量。

当 div 内发生单击事件时`#audit`，回调处理程序仅在目标元素（事件起源）与选择器匹配时执行`input[type="radio"]`。从那里，回调执行逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:10:46.900

通过在选择器结果上使用来迭代 jquery 中的复选框`.each()`，然后根据它们中的任何一个是否被标记为“否”来适当地表现。

```
$('input[type="radio"]').click(function () {
    var anyNos = false;
    $('input[type=radio]:checked').each(function(e) {
        if ($(this).val() == 'No') {
            anyNos = true;
            return false;
        }            
    });

    if (anyNos) {
        $('.denied').show();
        $('.granted').hide();
    } else {
        $('.granted').show();
        $('.denied').hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:19:12.130

```
 $('input[type="radio"]').click(function () {
   if ($('input[type=radio]:checked').val() == 'No') {
   $('.denied').show();

         $("#2p").show();
           $("#3p").hide();

        if( $("input[name='CAT_Custom_235313']:checked").val()=='No')
        {
           // alert($("CAT_Custom_235313_1").val());
         $("#3p").show();
        }
} else {

}
 }); 
```

**演示::** [http://jsfiddle.net/Praveen16oct90/5ZKyH/4/](http://jsfiddle.net/Praveen16oct90/5ZKyH/4/)

# magento - 我们如何从管理员客户编辑视图中为数据库表添加自定义网格？

> ID：15917279
> 
> 赞同：2
> 
> 时间：2013-04-10T04:59:29.463
> 
> 标签：magento, gridview, block

我在客户编辑标签中添加了自定义新标签。我想在单击新选项卡时添加网格视图。我创建了一个自定义模块，用于将数据添加到数据库表中。我如何使用该控制器来获取我的块。

我正在使用以下文件。任何人都可以帮助我将网格视图加载为按钮单击操作。？

```
require_once("Mage/Adminhtml/Block/Customer/Edit/Tabs.php");
class Proporta_Warrenty_Block_Adminhtml_Customer_Edit_Tabs extends Mage_Adminhtml_Block_Customer_Edit_Tabs {

    private $parent;

    public function _construct() {
        die('came to die');
    }

    protected function _prepareLayout() {

        ///get all existing tabs.
        $this->parent = parent::_prepareLayout();

        ///if the module is enabled, add new tab.
        if (Mage::helper('core')->isModuleEnabled('Proporta_Warrenty') ) {
            $this->addTab('warrenty', array(
                'label' => Mage::helper('customer')->__('Proporta Warrenty'),
               // 'content' => 'test sanjeeeee',
                'content' => $this->getLayout()->createBlock('warrenty/adminhtml_tab_grid')->toHtml() ,
            ));
        }

        return $this->parent;
    } 
```

}

这是网格文件

```
<?php
class Proporta_Warrenty_Block_Adminhtml_Warrenty_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
  public function __construct()
  {
    parent::__construct();
    $this->setSaveParametersInSession(true);

  }

  protected function _prepareCollection()
  {
    $session_customer_id = Mage::getSingleton('customer/session')->getCustomer()->getId();
    $collection = Mage::getModel('warrenty/warrenty')->getCollection($session_customer_id);
    $this->setCollection($collection);
    return parent::_prepareCollection();
  }

  protected function _prepareColumns()
  {
   $this->addColumn('entity_id', array(
        'header'    => Mage::helper('warrenty')->__('Entity Id'),
        'align'     =>'left',
        'index'     => 'increment_id',
    ));

    $this->addColumn('product_id', array(
        'header'    => Mage::helper('warrenty')->__('Product Name'),
        'align'     =>'left',

    ));  
    $this->addColumn('product_barcode', array(
        'header'    => Mage::helper('warrenty')->__('Product Barcode'),
        'align'     =>'left',

    )); 

        $this->addColumn('registered_at', array(
        'header'    => Mage::helper('warrenty')->__('Registered Date'),
        'align'     =>'left',
        'index'     => 'registered_at',
        'type'      => 'datetime'   ,
    ));

    $this->addExportType('*/*/exportCsv', Mage::helper('warrenty')->__('CSV'));
    $this->addExportType('*/*/exportXml', Mage::helper('warrenty')->__('XML'));

    return parent::_prepareColumns();
  }

} 
```

这是模板中的标签文件

```
<li >
        <a href="" 
           id="customer_info_tabs_orders" 
           name="warrenty" title="Warranty"
           class="tab-item-link ajax notloaded">
            <span>
                <span class="changed" title="<?php echo $this->__('The information in this tab has been changed.') ?>"></span>
                <span class="error" title="<?php echo $this->__('This tab contains invalid data. Please solve the problem before saving.') ?>">
                </span><?php echo 'Proporta Warrenty'; ?></span>
        </a>
        <div id="customer_info_tabs_warrenty_content" style="display:none;"></div>
    </li> 
```

这是配置xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<config>
    <stores>
        <admin>
            <design>
                <theme>
                    <default>proporta</default>
                </theme>
            </design>
        </admin>    
    </stores>

    <modules>
        <Proporta_Warrenty> 
            <version>0.1.0</version>
            <depends>
                <!-- no dependencies --> 
            </depends>
        </Proporta_Warrenty> 
    </modules> 

    <global>
        <helpers>
            <warrenty>
                <class>Proporta_Warrenty_Helper</class>
            </warrenty>
        </helpers>

        <template>
            <email>
                <custom_order_tpl module="Proporta_Warrenty">
                    <label>Life time Warranty</label>
                    <file>lifeTimeWarranty.html</file>
                    <type>html</type>
                </custom_order_tpl>
            </email>
        </template>
    </global>

    <frontend>
        <routers>
            <warrenty>
                <use>standard</use>
                <args>
                    <module>Proporta_Warrenty</module>
                    <frontName>warrenty</frontName>
                </args>
            </warrenty>
        </routers>
        <events></events> 
        <translate>
            <modules>
                <Proporta_Warrenty>
                    <files>
                        <default>Proporta_Warrenty.csv</default>
                    </files>
                </Proporta_Warrenty>
            </modules>
        </translate> 
        <layout>
        </layout>
    </frontend>

    <adminhtml>
        <routers>
            <warrenty>
                <use>standard</use>
                <args>
                    <module>Proporta_Warrenty</module>
                    <frontName>warrenty</frontName>
                </args>
            </warrenty>
        </routers>
    </adminhtml> 

</config> 
```

任何人都可以帮我添加上面的选项卡操作块网格视图吗？

# php - PHP mcrypt 相同的尾随字符

> ID：15917291
> 
> 赞同：0
> 
> 时间：2013-04-10T05:00:40.610
> 
> 标签：php, encryption, aes, mcrypt, rijndael

运行时：

```
var_dump(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, '12345', '1abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
var_dump(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, '12345', '2abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
var_dump(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, '12345', '3abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
var_dump(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, '12345', '4abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
var_dump(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, '12345', '5abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)))); 
```

其结果是：

```
string 'X9VFmBzVWwUSoKPtE0VoEYxGkAPwVkUDQfQwF0wPDAVxedrGWE4oMCPBAF7FRBMoQsSUFwHhpknj/fHQqgQVPw==' (length=88)
string 'T/yn6lkyB73cEs57K2pUVNhFk2tDX02CbnBIU2c2I2VxedrGWE4oMCPBAF7FRBMoQsSUFwHhpknj/fHQqgQVPw==' (length=88)
string 'WysJWSV2k5gyYoQ4+hF0Uh2JqMJ6pTC8lcrgs1jmSklxedrGWE4oMCPBAF7FRBMoQsSUFwHhpknj/fHQqgQVPw==' (length=88)
string 'fMsJByfrZBYoQIgL/g+3i6jOPiaHh2Jf0vV59g1w1ZVxedrGWE4oMCPBAF7FRBMoQsSUFwHhpknj/fHQqgQVPw==' (length=88)
string 'Mw0AlrcC5v3v6swEg+wT+uTHf8MNrxdprD9GCpOe/45xedrGWE4oMCPBAF7FRBMoQsSUFwHhpknj/fHQqgQVPw==' (length=88) 
```

注意字符串是如何以相同的字符集结尾的？

这应该发生吗？

我会认为因为数据不同，我每次都在创建一个新的初始化向量，这会导致完全不同的输出。

考虑到数据的微小变化，是否有另一种好的算法可以产生完全不同的输出？

[http://codepad.viper-7.com/jVqpUU](http://codepad.viper-7.com/jVqpUU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:10:55.727

类似的结果是由于[ECB 密码块模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)，其中每个块都单独加密。[改用CBC](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)等不同的模式，先前块的结果也会影响以后的块加密。

# c++ - 非 unicode 应用程序会无法在国际上的某些机器上运行吗？

> ID：15917292
> 
> 赞同：0
> 
> 时间：2013-04-10T05:00:45.703
> 
> 标签：c++

如果没有，使用 unicode 显示更多字符的好处是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:11:17.603

这取决于很多事情。如果你的程序很简单，你也许可以侥幸逃脱，但很可能会有一些 API 出现 Unicode 字符串会让你绊倒。

最简单的例子是文件名——如果你的程序中有任何地方要求用户指定一个文件，他可以很容易地指定一个在其路径中包含 Unicode 字符的文件名。如果您只使用 ANSI API，例如`fopen()`or `CreateFileA()`，那么您将无法打开该文件，并且用户会因为您的程序无法运行而感到沮丧。因此，除非你有一个非常好的理由，否则你应该几乎总是使用 Unicode API（例如`_wfopen()`，或者`CreateFileW()`在这种情况下）。

# c# - DropDownList 中的 ASP.NET Bind() - 字符串值与空值

> ID：15917293
> 
> 赞同：2
> 
> 时间：2013-04-10T05:00:50.917
> 
> 标签：c#, asp.net, .net, entity-framework, data-binding

我希望有人能回答这个问题。我要拔头发了！

我有`DropDownList`一个默认值“”来从数据库中捕获 NULL。
的“值”字段`DropDownList`是`varchar`.
这工作正常。

但是，在保存记录时，该值将作为空字符串保存在数据库中。
稍后重新绑定该记录会引发`ArgumentOutOfRangeException`.
有什么推荐的解决方案吗？

我目前正在使用以下绑定方法：

```
<asp:DropDownList ID="DestinationDropDownList" runat="server" 
   DataSourceID="CountryDataSource" DataTextField="Name" 
   DataValueField="CountryRegionCode" SelectedValue='<%#Bind("DestinationCountryCode")%>'
   AppendDataBoundItems="True">
    <asp:ListItem Text="Select..." Value=""></asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:17:04.607

**发现问题：**
数据库中的Country值字段是固定长度的，所以它试图绑定到“”（3个空格），其中现有`ListItem`值只是“”。
我将默认 ListItem 值更改为“”，现在它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:02:36.483

该区域可能是您在页面加载时绑定下拉列表。

将它绑定在里面`if(!Page.IsPostback)`应该可以工作

```
if (!IsPostBack)
{
   //bin your dropdown here
} 
```

## 编辑

我不知道天气是否会起作用，但您可以创建如下所示的属性

```
private string _myProperty;
public string MyProperty
{
    get { return _myProperty; }
    set
    {
        if (value == String.Empty)
        {
            _myProperty = null;
        }
        else
        {
            _myProperty = value;
        }
    }
} 
```

# asp.net - 在asp.net中上传Excel文件时发现重复记录？

> ID：15917298
> 
> 赞同：0
> 
> 时间：2013-04-10T05:01:10.347
> 
> 标签：asp.net, sql-server-2008, excel

我想在上传 excel 数据时限制重复项，并通知用户 excel 中的特定单元格包含 Sql 数据库中已经存在的重复值。

（应在 Excel (EMP_ID) 中对照 SQL (EMPLOYEE_ID) 检查重复项。如果发现重复记录，消息应显示为：“用户无法上传具有重复值的数据。请删除重复字段并重新上传。”

如果有任何想法可以帮助我，这可能吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:42:53.083

您应该使用[SQLBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)将数据导入临时表，使用 SQL 连接比较值并将重复项返回给用户，以便他可以修复它们并重新上传文件。

# c# - 如何删除绑定在 asp.net 中的 CheckBoxList 中的一项？

> ID：15917300
> 
> 赞同：1
> 
> 时间：2013-04-10T05:01:18.710
> 
> 标签：c#, asp.net, checkboxlist

这是我的绑定代码：

```
string connection_string = ConfigurationManager.ConnectionStrings["DBC"].ConnectionString;
            SqlConnection con = new SqlConnection(connection_string);
            con.Open();
            SqlDataAdapter dataadapter = new SqlDataAdapter("Select * from stud_table", con);
            DataSet ds = new DataSet();
            dataadapter.Fill(ds);
            CheckBoxList1.DataSource = ds;
            CheckBoxList1.DataTextField = "Name";
            CheckBoxList1.DataValueField = "Rollno";
            CheckBoxList1.DataBind();
                con.Open(); 
```

按钮代码：

```
protected void Button2_Click(object sender, EventArgs e)
{
    for(int i=0;i<CheckBoxList1.Items.Count ;i++)
    {
        if (CheckBoxList1.Items[i].Selected == true)
        {
            CheckBoxList1.Items.RemoveAt(i);
        }
    }
 } 
```

如果我选择该项目并单击删除按钮，它应该从数据库和屏幕中删除。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:43:40.963

给你，希望这有帮助：

```
public partial class Default : System.Web.UI.Page
{
    private readonly string connection_string = ConfigurationManager.ConnectionStrings["DBC"].ConnectionString;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
            BindData();
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        var itemsToDelete = new ListItemCollection(); 

        foreach (ListItem item in CheckBoxList1.Items)
        {
            if (item.Selected)
                itemsToDelete.Add(item);
        }

        foreach (ListItem item in itemsToDelete)
        {
            //Assuming your id column is Rollno
            DeleteFromDB(item.Value);
            CheckBoxList1.Items.Remove(item);
        }
    }

    private void BindData()
    {
        using (var con = new SqlConnection(connection_string))
        {
            con.Open();
            using (var adapter = new SqlDataAdapter("SELECT * FROM stud_table", con))
            {
                var ds = new DataSet();
                adapter.Fill(ds);
                CheckBoxList1.DataSource = ds;
                CheckBoxList1.DataTextField = "Name";
                CheckBoxList1.DataValueField = "Rollno";
                CheckBoxList1.DataBind();
                con.Close();
            }
        }
    }

    private void DeleteFromDB(string rollNo)
    {
        int id = 0;
        if (Int32.TryParse(rollNo, out id))
        {
            using (var con = new SqlConnection(connection_string))
            {
                con.Open();
                string commandText = String.Format("DELETE FROM stud_table WHERE Rollno={0}", id);
                using (var command = new SqlCommand(commandText, con))
                {
                    command.ExecuteNonQuery();
                    con.Close();
                }
            }
        }
    }
} 
```

# sql - 从另一个表中插入值

> ID：15917306
> 
> 赞同：0
> 
> 时间：2013-04-10T05:01:43.083
> 
> 标签：sql, sql-server, sql-server-2008, insert

我正在尝试使用来自另一个表字段的输入插入一个字段。虽然这对于很多数据库引擎来说是完全可行的，

我有以下字段，

**新表架构**

*   姓名
*   工业ID(int)
*   位置标识（整数）

但实际记录就像，

*   xxxx
*   文本（varchar）
*   文本（Varchar）

但我想要这两个 Industryid 和 Locationid by id 来自另一个表 Industries, Locations。

我还有 2 张桌子

**行业**

*   ID
*   姓名

**地点**

*   ID
*   姓名

**我的查询是，**

```
select'insert into organizations(name,industryid,locationid)
values
('''+
Nameofthecompany+''','+
Isnull(industrytype,'Null')+','+
ISNULL(Location,'Null')+')' 
from Organization` 
```

**结果**

```
insert into organizations(name,industryid,locationid) 
values 
('Swamy',Telcom,Chennai) 
```

**预期结果**

```
insert into organizations(name,industryid,locationid)
values
('Swamy',12,150) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:04:27.163

如果您的当前/实际记录已经在`Organization`您的查询中所示名称的表中，您可以使用这种方法来填充您的新`Organizations`表：

```
INSERT INTO Organizations( name, IndustryId, LocationId )
SELECT o.Nameofthecompany, i.Id, l.Id
FROM Organization AS o
LEFT JOIN Industries AS i ON o.industrytype = i.Name
LEFT JOIN Location AS l ON o.Location = l.Name 
```

这将获取现有名称，连接到您的参考表（`Industries`和`Locations`）并检索`Id`相应文本值的值。

这`LEFT JOIN`将从组织中带回所有名称，但不要求它们在参考表中具有匹配的行业和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:04:26.367

你可以这样做：

```
SELECT Col1, Col2
INTO TestTable
FROM OriginalTable
WHERE Conditions 
```

*请注意，SELECT INTO 仅在 INTO 子句中指定的表不存在时才有效*

或者：

```
INSERT INTO TestTable (Col1, Col2)
SELECT Col1, Col2
FROM OriginalTable
WHERE Conditions 
```

# r - R播种不“设置”，结果不复制

> ID：15917307
> 
> 赞同：1
> 
> 时间：2013-04-10T05:01:43.113
> 
> 标签：r, random, parallel-processing

我有一个看起来像这样的脚本：

```
#This is the master script.  It runs all other scripts.
rm(list=ls()) 

#Run data cleaing script
source("datacleaning.R")

set.seed(413) #Seed pre-selected as lead author's wife's birthday (April 13th)
reps=128

#Make imputated datasets
source("makeimps.R")

#Model selection step 1\.  
source("model_selection.1.R")
load("AIC_results.1")
AIC_results

#best model removed the year interaction

#Model selection step 2\.  removed year interaction
source("model_selection.2.R")
load("AIC_results.2")
AIC_results

#all interactions pretty good.  keeping this model

#Final selected model:
source("selectedmodel.R") 
```

我将这个主脚本发送到一个超级计算集群；在 32 个内核上大约需要 17 小时的 CPU 时间和 40 分钟的 walltime。（因此我的不可复制的例子）。但是当我运行脚本时，查看结果，然后再次运行，再查看结果，它们略有不同。为什么？我种下了种子！种子会以某种方式重置吗？我是否需要在每个脚本文件中指定种子？

我需要增加代表次数，因为很明显我还没有充分收敛。但这是一个单独的问题。为什么我在这里的结果不能自我复制，我该如何解决？

提前致谢。

**编辑**：我正在通过`doMC`and进行并行化`plyr`。基于以下评论的一些简单的谷歌搜索发现了一个事实，即使用这些包无法真正设置“并行种子”。我需要以`SNOW`某种方式将我的代码迁移到。如果有人知道 and 的解决方案`doMC`，`plyr`我将不胜感激了解它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:19:52.727

查看[`doRNG`](http://cran.r-project.org/web/packages/doRNG/vignettes/doRNG.pdf)专门为这种可重现的并行计算开发的包。在循环调用中设置种子，您将能够准确地重现您的结果......

```
require(doParallel)
require(doRNG)
cl <- makeCluster(4)
registerDoParallel(cl)

unlist( foreach( i = 1:4 , .options.RNG = 413 ) %dorng% { runif(1) } )
#[1] 0.5251507 0.4326805 0.6409496 0.5523651

unlist( foreach( i = 1:4 , .options.RNG = 413 ) %dorng% { runif(1) } )
#[1] 0.5251507 0.4326805 0.6409496 0.5523651 
```

# java - 线程中的可变变量是线程安全的吗？

> ID：15917313
> 
> 赞同：2
> 
> 时间：2013-04-10T05:01:58.147
> 
> 标签：java, scala, thread-safety

我想使用`Thread`在应用程序中扩展 Java 的线程 MyT 中定义的一些可变变量，其用法将是`Thread.currentThread.asInstanceof[MyT]`引用和更新其中的可变变量。

这将是线程安全的吗？

**更新**

我使用 scala 编写了一些应用程序，没有考虑多线程问题，并且使用了所谓的在对象中使用可变变量的最坏做法（因为它对初学者来说非常容易使用！）。

但现在不知何故，该项目扩展到了一个 Web 应用程序，我必须处理多线程问题。

我没有时间再次重写代码，将对象中的每个可变变量重构为周围的参数（可能是不使用全局对象可变变量的一种解决方案），所以我正在考虑将对象中的可变变量移动到扩展的线程类`Thread`类，并重构要使用的代码`Thread.currentThread`，然后将实例转换为我的扩展线程类型，然后引用/更新到最初是全局可变变量的可变变量。

所以这是我最初的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:08:17.787

为此目的使用 ThreadLocal：http: [//java.dzone.com/articles/java-thread-local-%E2%80%93-how-use](http://java.dzone.com/articles/java-thread-local-%E2%80%93-how-use)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:46:55.043

如果您**只**与线程本身（您提到的用例）内的可变变量进行交互`Thread.currentThread.asInstanceof[MyT]`，那么它是线程安全的（通常比 ThreadLocal 更快）。

如果您与来自**任何**其他线程的变量进行交互，那么它可能不是线程安全的。

当然，它仍然不是非常 Scala-ish。您应该尽可能避免可变状态。如果你有一些看起来很难重构的代码，Stack Overflow 的好人总是乐于提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T11:26:07.637

原生 scala 解决方案是使用 scala.util.DynamicVariable[T]。例如：

```
import scala.util._

class TL {
  var x = 0
}

object TL extends DynamicVariable[TL](null) {
  def apply() = value
  def initialize { value = new TL }
}

class Counter(val limit: Int) extends Runnable {
  def run {
    TL.initialize
    for (i <- 1 to limit) { TL().x += 1 }
    println(TL().x)
  }
}

object Program extends App {
  val t1 = new Thread( new Counter(1000000000) )
  val t2 = new Thread( new Counter(2000000000) )
  t1.start; t2.start; t1.join; t2.join
} 
```

在内部，DynamicVariable 使用 java.lang.InheritableThreadLocal。

# android - Unity 游戏引擎上的语音识别

> ID：15917315
> 
> 赞同：4
> 
> 时间：2013-04-10T05:02:15.263
> 
> 标签：android, ios, unity3d, speech-recognition

我已经成功实现了在 android 上开发一个使用来自 Google API 的语音识别的应用程序的目标。

但事实是我必须使用真正的游戏引擎，因为我的应用程序将是跨平台的，并且具有非常丰富的用户界面和手势。

我正在考虑使用 Unity Game Engine，并将我的应用程序部署到 iOS 和 Android 平台。

所以......在网上搜索......我发现我不能在 Unity 游戏引擎上使用 Google Speech Recognition API，因为它属于 Google......这是真的吗？

你能给我一个关于如何实施的建议吗？

第一个选项：实现第三方库或 Unity Speech Recognition API。那些？

第二种选择（可能吗？？）：将语音转换为文本的包模块化，并通过动态反射调用它。在 Android 部署上，使用 Google API。在 iOS 部署上，使用 iOS API（也未知）。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:04:57.770

我建议看看 CMU Sphinx。[http://cmusphinx.sourceforge.net/](http://cmusphinx.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:54:11.490

您可以在 Android 上通过 Unity 使用 google 的语音识别。在 iOS 上，您需要使用其他东西。不幸的是，截至 6 个月前，当我检查 iOS 时，它还没有内置语音识别 API。因此，您需要尝试找到一个 3rd 方库来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T21:55:30.380

在新的 beta 版本 (5.4) 中，Unity 添加了 DictationRecognizer，这是一个提供微软语音识别的类。准确度真的很好。

# python - 将字典列表转换为元组字典

> ID：15917319
> 
> 赞同：3
> 
> 时间：2013-04-10T05:02:24.983
> 
> 标签：python, list, tuples, python-2.6, dictionary

如何转换看起来像这样的字典列表：

```
[{'id':2, 'risk':'a'}, 
 {'id':1, 'risk':'a'}, 
 {'id':32,'risk':'aa'},
 {'id':2, 'risk':'aa'}, 
 {'id':7, 'risk':'a'}, 
 {'id':7, 'risk':'b'}] 
```

进入一个元组字典，排序后看起来像这样：

```
{1:('a', ), 2:('a','aa'), 7:('a','b'), 32:('aa', )} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:06:13.513

您可以使用 a[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)自动创建元组，然后只需遍历`list_of_dicts`：

```
list_of_dicts = [{'id':2, 'risk':'a'}, 
 {'id':1, 'risk':'a'}, 
 {'id':32,'risk':'aa'},
 {'id':2, 'risk':'aa'}, 
 {'id':7, 'risk':'a'}, 
 {'id':7, 'risk':'b'}]

from collections import defaultdict

dict_of_tuples = defaultdict(tuple)

for dct in list_of_dicts:
    dict_of_tuples[dct['id']] += (dct['risk'],) 
```

结果是：

```
>>> dict_of_tuples
defaultdict(<type 'tuple'>, {32: ('aa',), 1: ('a',), 2: ('a', 'aa'), 7: ('a', 'b')}) 
```

如果你想要一个排序的字典：

```
>>> from collections import OrderedDict
>>> OrderedDict(sorted(dict_of_tuples.items()))
OrderedDict([(1, ('a',)), (2, ('a', 'aa')), (7, ('a', 'b')), (32, ('aa',))]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:22:06.157

dict.setdefault方法可以[*轻松*](http://docs.python.org/2.7/library/stdtypes.html#dict.setdefault)解决此类问题：

```
>>> lod = [{'id':2, 'risk':'a'}, 
           {'id':1, 'risk':'a'}, 
           {'id':32,'risk':'aa'},
           {'id':2, 'risk':'aa'}, 
           {'id':7, 'risk':'a'}, 
           {'id':7, 'risk':'b'}]
>>> dot = {}
>>> for d in lod:
        idnum, risk = d['id'], d['risk']
        dot.setdefault(idnum, []).append(risk)

>>> dot
{32: ['aa'], 1: ['a'], 2: ['a', 'aa'], 7: ['a', 'b']} 
```

您也可以使用*collections.defaultdict*创建相同的效果，但这不会创建常规字典，并且需要了解工厂函数和零参数构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T08:19:59.737

[`dict.get`](http://docs.python.org/2/library/stdtypes.html#dict.get)通常人们在类似的情况下忘记使用方法。所以使用基本的python函数：

```
list_of_dicts = [{'id':2, 'risk':'a'}, 
    {'id':1, 'risk':'a'}, 
    {'id':32,'risk':'aa'},
    {'id':2, 'risk':'aa'}, 
    {'id':7, 'risk':'a'}, 
    {'id':7, 'risk':'b'}]

final_dict = {}

for item in list_of_dicts:
    final_dict[item['id']] = final_dict.get(item['id'], tuple()) + (item['risk'],)

>> {1: ('a',), 2: ('a', 'aa'), 7: ('a', 'b'), 32: ('aa',)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:12:54.737

以更长的方式进行。不像 agf 的解决方案那样简洁，但它有效

```
new_dict = {}
for x in my_dict_list: 
    m = new_dict.get(x['id'],())
    m += (x['risk'],)
    new_dict[x['id']] = m 
```

输入

```
my_dict_list = [{'id':2, 'risk':'a'}, 
                {'id':1, 'risk':'a'}, 
                {'id':32,'risk':'aa'},
                {'id':2, 'risk':'aa'}, 
                {'id':7, 'risk':'a'}, 
                {'id':7, 'risk':'b'}] 
```

输出

```
>>> new_dict
{32: ('aa',), 1: ('a',), 2: ('a', 'aa'), 7: ('a', 'b')} 
```

# macos - 将采样率从 AV_SAMPLE_FMT_FLTP 转换为 AV_SAMPLE_FMT_S16 时出错

> ID：15917323
> 
> 赞同：0
> 
> 时间：2013-04-10T05:02:46.347
> 
> 标签：macos, ffmpeg

将采样率从 AV_SAMPLE_FMT_FLTP 转换为 AV_SAMPLE_FMT_S16 并播放 openAL，得到以下错误（[http://joxi.ru/B_JkUdg5CbDrWhe9oNI](http://joxi.ru/B_JkUdg5CbDrWhe9oNI)）

```
CONV_FUNC (AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16 (lrintf (* (const float *) pi * (1 << 15)))) 
```

在文件 audioconvert.c

我的代码

```
swrContext = swr_alloc();
av_opt_set_int(swrContext, "in_channel_layout",  cc->channel_layout, 0);
av_opt_set_int(swrContext, "out_channel_layout", cc->channel_layout,  0);
av_opt_set_int(swrContext, "in_sample_rate",     cc->sample_rate, 0);
av_opt_set_int(swrContext, "out_sample_rate",    cc->sample_rate, 0);
av_opt_set_sample_fmt(swrContext, "in_sample_fmt",  cc->sample_fmt, 0);
av_opt_set_sample_fmt(swrContext, "out_sample_fmt", AV_SAMPLE_FMT_S16P,  0);
swr_init(swrContext);

uint8_t *output;
int out_samples = (int)av_rescale_rnd(swr_get_delay(swrContext, 44100) + (int64_t)decoded_frame->nb_samples, 44100, 44100, AV_ROUND_UP);
swr_convert(swrContext, &output, out_samples, (const uint8_t **)decoded_frame->extended_data, decoded_frame->nb_samples); //error
alBufferData(BufID,AL_FORMAT_STEREO16,output, decsize,44100); 
```

可能有其他解决方案？

可能有其他解决方案？我正在研究[如何将采样率从 AV_SAMPLE_FMT_FLTP 转换为 AV_SAMPLE_FMT_S16？](https://stackoverflow.com/questions/14989397/how-to-convert-sample-rate-from-av-sample-fmt-fltp-to-av-sample-fmt-s16)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:07:06.473

赶到问题出问题了

```
uint8_t * output [x]; 
```

*   错误消失

# android - Android中的转发声明

> ID：15917329
> 
> 赞同：1
> 
> 时间：2013-04-10T05:03:06.490
> 
> 标签：android

我根据项目首先 home.java 运行和 play.java 运行创建了两个类文件 home.java 和 play.java，我在 Play.java 中声明并编写方法我需要在 Home.java 中调用该方法

**主页.java**

```
Public void onItemClick()
 {.............
  ..............
  p1.pl(songindex)//p1 is the object for Play.java
   .......
   } 
```

**播放.java**

```
public void pl(int songindex)
{
if(songindex==0)
{
 .....
 .....
 }
 else(songindex==1)
 {
 ......
 ......
 }
} 
```

我在模拟器中尝试了这段代码“不幸的是应用程序关闭”错误

日志猫：

```
04-10 10:44:05.571: I/ActivityManager(879): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.bostonmediatech.gayatrimantra/.Main} from pid 1015 
04-10 10:44:05.571: W/WindowManager(879): Failure taking screenshot for (180x300) to layer 21005 
04-10 10:44:05.571: D/dalvikvm(1449): Not late-enabling CheckJNI (already on) 
04-10 10:44:05.571: I/ActivityManager(879): Start proc com.bostonmediatech.gayatrimantra for activity com.bostonmediatech.gayatrimantra/.Main: pid=1449 uid=10031 gids={} 
04-10 10:44:05.579: D/dalvikvm(1449): GC_FOR_ALLOC freed 62K, 3% free 9021K/9283K, paused 0ms 
04-10 10:44:05.579: I/dalvikvm-heap(1449): Grow heap (frag case) to 9.450MB for 614412-byte allocation 
04-10 10:44:05.589: W/NetworkManagementSocketTagger(879): setKernelCountSet(10031, 1) failed with errno -2 
04-10 10:44:05.609: D/dalvikvm(1449): GC_CONCURRENT freed 0K, 4% free 9621K/9927K, paused 0ms+0ms 
04-10 10:44:05.671: D/gralloc_goldfish(1449): Emulator without GPU emulation detected. 
04-10 10:44:05.719: I/ActivityManager(879): Displayed com.bostonmediatech.gayatrimantra/.Main: +154ms (total +35s954ms) 
04-10 10:44:05.719: W/InputManagerService(879): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@b5b5f210 (uid=10005 pid=1015) 
04-10 10:44:06.299: W/NetworkManagementSocketTagger(879): setKernelCountSet(10005, 0) failed with errno -2 
04-10 10:44:07.760: I/ActivityManager(879): START {act=com.bostonmediatech.gayatrimantra.CLEARSCREEN cmp=com.bostonmediatech.gayatrimantra/.Home} from pid 1449 
04-10 10:44:07.760: W/WindowManager(879): Failure taking screenshot for (180x300) to layer 21010 
04-10 10:44:07.770: D/dalvikvm(1449): GC_FOR_ALLOC freed 6K, 3% free 9641K/9927K, paused 3ms 
04-10 10:44:07.770: I/dalvikvm-heap(1449): Grow heap (frag case) to 10.055MB for 614412-byte allocation 
04-10 10:44:07.789: D/dalvikvm(1449): GC_CONCURRENT freed <1K, 4% free 10241K/10567K, paused 0ms+0ms 
04-10 10:44:07.820: I/ActivityManager(879): Displayed com.bostonmediatech.gayatrimantra/.Home: +60ms 
04-10 10:44:09.499: I/ActivityManager(879): START {cmp=com.bostonmediatech.gayatrimantra/.Play} from pid 1449 
04-10 10:44:09.499: W/WindowManager(879): Failure taking screenshot for (180x300) to layer 21010 
04-10 10:44:09.499: D/AndroidRuntime(1449): Shutting down VM 
04-10 10:44:09.499: W/dalvikvm(1449): threadid=1: thread exiting with uncaught exception (group=0xb512a180) 
04-10 10:44:09.499: E/AndroidRuntime(1449): FATAL EXCEPTION: main 
04-10 10:44:09.499: E/AndroidRuntime(1449): java.lang.NullPointerException 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.media.MediaPlayer.create(MediaPlayer.java:731) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at com.bostonmediatech.gayatrimantra.Play.pl(Play.java:64) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at com.bostonmediatech.gayatrimantra.Home.onItemClick(Home.java:82) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.widget.AdapterView.performItemClick(AdapterView.java:292) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.widget.AbsListView$1.run(AbsListView.java:3168) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.os.Handler.handleCallback(Handler.java:605) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.os.Handler.dispatchMessage(Handler.java:92) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.os.Looper.loop(Looper.java:137) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at android.app.ActivityThread.main(ActivityThread.java:4424) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at java.lang.reflect.Method.invokeNative(Native Method) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at java.lang.reflect.Method.invoke(Method.java:511) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
04-10 10:44:09.499: E/AndroidRuntime(1449):     at dalvik.system.NativeStart.main(Native Method) 
04-10 10:44:10.009: W/ActivityManager(879): Activity pause timeout for ActivityRecord{b5bc2848 com.bostonmediatech.gayatrimantra/.Home} 
04-10 10:44:10.009: I/Process(879): Sending signal. PID: 1449 SIG: 3 
04-10 10:44:10.019: I/dalvikvm(1449): threadid=3: reacting to signal 3 
04-10 10:44:10.019: I/dalvikvm(1449): Wrote stack traces to '/data/anr/traces.txt' 
04-10 10:44:10.551: I/Process(879): Sending signal. PID: 1449 SIG: 3 
04-10 10:44:10.551: I/dalvikvm(1449): threadid=3: reacting to signal 3 
04-10 10:44:10.551: I/dalvikvm(1449): Wrote stack traces to '/data/anr/traces.txt' 
04-10 10:44:11.069: I/Process(879): Sending signal. PID: 1449 SIG: 3 
04-10 10:44:11.069: I/dalvikvm(1449): threadid=3: reacting to signal 3 
04-10 10:44:11.069: I/dalvikvm(1449): Wrote stack traces to '/data/anr/traces.txt' 
04-10 10:44:11.559: I/Process(879): Sending signal. PID: 1449 SIG: 3 
04-10 10:44:11.559: I/dalvikvm(1449): threadid=3: reacting to signal 3 
04-10 10:44:11.559: I/dalvikvm(1449): Wrote stack traces to '/data/anr/traces.txt' 
04-10 10:44:12.021: I/Process(1449): Sending signal. PID: 1449 SIG: 9 
04-10 10:44:12.021: I/ActivityManager(879): Process com.bostonmediatech.gayatrimantra (pid 1449) has died. 
04-10 10:44:12.021: I/WindowManager(879): WIN DEATH: Window{b5cd5088 com.bostonmediatech.gayatrimantra/com.bostonmediatech.gayatrimantra.Home paused=false} 
04-10 10:44:12.021: W/ActivityManager(879): Force removing ActivityRecord{b5c8e9a8 com.bostonmediatech.gayatrimantra/.Play}: app died, no saved state 
04-10 10:44:12.021: W/NetworkManagementSocketTagger(879): setKernelCountSet(10031, 0) failed with errno -2 
04-10 10:44:12.021: W/ActivityManager(879): Force removing ActivityRecord{b5bc2848 com.bostonmediatech.gayatrimantra/.Home}: app died, no saved state 
04-10 10:44:12.029: W/NetworkManagementSocketTagger(879): setKernelCountSet(10005, 1) failed with errno -2 
04-10 10:44:12.129: D/dalvikvm(1015): GC_FOR_ALLOC freed 3001K, 19% free 17672K/21703K, paused 3ms 
04-10 10:44:12.170: W/InputManagerService(879): Got RemoteException sending setActive(false) notification to pid 1449 uid 10031 
04-10 10:44:12.312: D/dalvikvm(1015): GC_CONCURRENT freed 1724K, 18% free 17955K/21703K, paused 0ms+1ms 
04-10 10:44:12.321: D/dalvikvm(1015): GC_FOR_ALLOC freed 52K, 18% free 17989K/21703K, paused 5ms 
04-10 10:44:12.321: I/dalvikvm-heap(1015): Grow heap (frag case) to 18.845MB for 1286220-byte allocation 
04-10 10:44:12.365: D/dalvikvm(1015): GC_FOR_ALLOC freed 1K, 17% free 19244K/22983K, paused 18ms 
04-10 10:44:21.721: D/dalvikvm(1003): GC_CONCURRENT freed 381K, 5% free 9494K/9991K, paused 1ms+0ms 
04-10 10:44:42.850: W/ThrottleService(879): unable to find stats for iface rmnet0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:28:57.533

没有太多代码，但我猜你忘记初始化 p1 你可能已经给出的空指针异常， `Play p1`而不是 `Play p1 = new Play();`

# jquery - 在jquery中突出显示表单字段的边框

> ID：15917333
> 
> 赞同：1
> 
> 时间：2013-04-10T05:03:29.190
> 
> 标签：jquery, html, forms

用jquery高亮文本框字段边框，效果平滑。例如。当用户聚焦输入框时，字段的边框应该以平滑的效果突出显示。我知道它可以使用 css 的 focus 属性来完成，但我不想使用它，因为它不会产生平滑的效果。

例如参考： 1\. youtube 的搜索框：[http](http://www.youtube.com/) ://www.youtube.com/ 2\. 99lime：[http ://www.99lime.com/elements/#form-example](http://www.99lime.com/elements/#form-example)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:11:06.293

您可以使用 CSS 过渡使效果平滑。

```
input {
    -webkit-transition: box-shadow .3s;
    transition: box-shadow .3s;
}
input:focus {
    box-shadow: 0px 0px 7px blue;
} 
```

[http://jsfiddle.net/ExplosionPIlls/Zn8eZ/](http://jsfiddle.net/ExplosionPIlls/Zn8eZ/)

使用 jQuery 为 box-shadow 设置动画没有简单的方法——它需要一个插件。我想您可以将输入叠加在不可见的阴影存在之上并为其显示设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:14:43.313

你可以这样做

```
 $('input[type="text"]').focus(function() {
   $(this).addClass("focus");
  });

   $('input[type="text"]').blur(function() {
   $(this).removeClass("focus");
  }); 
```

在这里查看演示... [http://jsfiddle.net/d3TbF/](http://jsfiddle.net/d3TbF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:16:08.690

如果你需要 jQuery，你可以试试这个（包括 jQuery UI 库）：

```
jQuery(function($) {
    $("input").on('focus', function(e) {
        $(this).animate({ borderColor: "#0e7796", boxShadow: '0 0 5px 3px rgba(100,100,200,0.4)' }, 'slow');
    }).on('blur', function(e) {
        $(this).animate({ borderColor: "#ccc", boxShadow: '0px 0px 0px #fff' }, 'slow');
    });
}); 
```

您必须使用 box-shadow 动画插件，可在以下网址获得：http: [//www.bitstorm.org/jquery/shadow-animation/](http://www.bitstorm.org/jquery/shadow-animation/)

小提琴（更新）：http: [//jsfiddle.net/vishaldeep/QgYrG/4/](http://jsfiddle.net/vishaldeep/QgYrG/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T10:52:13.513

```
$('#validate').attr('style', "border-radius: 5px; border:#FF0000 1px solid;"); 
```

# php - 在 CodeIgniter 中设置常量不起作用

> ID：15917334
> 
> 赞同：0
> 
> 时间：2013-04-10T05:03:27.800
> 
> 标签：php, codeigniter-2

我在 .application/config/constants.php 中为原始 http post 数据设置常量，如下所示：

```
define('POST_DATA', json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true)); 
```

所以我可以添加从控制器向模型发送常量 POST_DATA 如下：

```
$data['data'] = $this->logins_model->signup(POST_DATA); 
```

但我收到以下错误...

> 严重性：通知
> 
> 消息：使用未定义的常量 POST_DATA - 假定为“POST_DATA”
> 
> 文件名：控制器/logins.php

但是，当我这样做时，我检查并将发布数据发送到模型工作：

```
$data['data'] = $this->logins_model->signup(json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true)); 
```

关于我做错了什么的任何想法？我是否错误地使用了常量文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:07:46.520

`json_decode`返回一个数组或对象，PHP 常量不能是数组或对象。只允许[标量和空值。](http://php.net/manual/en/function.define.php)

每个`HTTP_RAW_POST_DATA`请求都会有所不同，不是吗？所以，不要使用常量。只需在需要时将其存储在变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:10:30.687

您不能设置`constant`为`array`. `json_deocde`生成一个数组，因此不会设置常量。

```
Constants may only evaluate to scalar values 
```

常量的主要目的是做出无法改变的东西。

但是如果你想设置数据，那么你可以`serialize`将数据设置为常量，当你需要该数据时`unserialize`，常量值

```
define('POST_DATA', serialize(json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true)));

$post_data     = unserialize (POST_DATA);
$data['data'] = $this->logins_model->signup($post_data); 
```

# php - 想通过ajax上传图片和数据到数据库

> ID：15917341
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:04:05.347
> 
> 标签：php, ajax

我有一个表单（使用 PHP 和 HTML），我的严格要求是，我想在不刷新页面的情况下将图像和数据上传到数据库。在我的表单中有一些用于收集数据的输入字段，一个用于获取图像的浏览按钮（作为输入类型 =“文件”）和一个称为提交的按钮，当用户单击提交按钮时，我想调用一个 ajax 函数来收集数据从表单并提交它们。（我不想刷新页面，因此使用 ajax 调用）请任何帮助...！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:10:01.183

```
<html> 
<head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                alert("Thank you for your comment!"); 
            }); 
        }); 
    </script> 
</head> 
<body>

<form id="myForm" action="test2.php" method="post" enctype="multipart/form-data"> 
    Name: <input type="text" name="name" /> 
    Comment:<input type="file" name="image">
    <input type="submit" value="Submit Comment" /> 
</form>
</body>
</html> 
```

php 文件 test.php 在这里你处理你的文件上传和数据库操作

```
<?php 
echo "<pre>"; print_r($_FILES); exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:14:22.833

使用 JQuery 提交表单，有一个预定义的函数叫做 .ajaxForm

```
$(document).ready(function() { 
                $('#formName').ajaxForm(function() { 

                }); 
            }); 
```

它将直接联系您的操作页面，您可以在控制器中执行操作。

# php - 如何使用 PHP 将 mysql 数据库导出/转换为 mdb 格式

> ID：15917345
> 
> 赞同：0
> 
> 时间：2013-04-10T05:04:16.037
> 
> 标签：php, mysql

是否有任何 php 类可用于将 mysql 数据库转换为 mdb 格式

我只想以 ms 访问格式备份我的 mysql 数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:41:26.757

[如果您要图书馆，这里](http://www.phpclasses.org/package/1700-PHP-Access-Microsoft-Access-mdb-database-files.html)有一个

您可以使用 COM 来访问 MDB 驱动程序，在 phpclasses 中有一个简单的类作为包装器，您可以使用它来获得灵感或直接移植它，无论哪种方式都是完全可能的：

这是课程：

```
<?php    
class mdb 
{ 
  var $RS = 0; 
  var $ADODB = 0; 

  var $RecordsAffected; 

  var $strProvider = 'Provider=Microsoft.Jet.OLEDB.4.0'; 
  var $strMode     = 'Mode=ReadWrite'; 
  var $strPSI      = 'Persist Security Info=False'; 
  var $strDataSource  = ''; 
  var $strConn     = ''; 
  var $strRealPath = ''; 

  var $recordcount = 0; 
  var $ok = false; 

  /** 
  * Constructor needs path to .mdb file 
  * 
  * @param string $dsn = path to *.mdb file 
  * @return boolean success  
  */ 
  function mdb( $dsn='Please enter DataSource!' ) 
  { 
    $this->strRealPath = realpath( $dsn ); 
    if( strlen( $this->strRealPath ) > 0 ) 
    { 
      $this->strDataSource = 'Data Source='.$this->strRealPath; 
      $result = true; 
    } 
    else 
    { 
      echo "<br>mdb::mdb() File not found $dsn<br>"; 
      $result = false; 
    } 

    $this->RecordsAffected = new VARIANT(); 

    $this->open(); 

  } // eof constructor mdb() 

  function open( ) 
  { 
    if( strlen( $this->strRealPath ) > 0 ) 
    { 

      $this->strConn =  
        $this->strProvider.';'. 
        $this->strDataSource.';'. 
        $this->strMode.';'. 
        $this->strPSI; 

      $this->ADODB = new COM( 'ADODB.Connection' ); 

      if( $this->ADODB ) 
      { 
        $this->ADODB->open( $this->strConn ); 

        $result = true; 
      } 
      else 
      { 
        echo '<br>mdb::open() ERROR with ADODB.Connection<br>'.$this->strConn; 
        $result = false; 
      } 
    } 

    $this->ok = $result; 

    return $result; 
  } // eof open() 

  /** 
  * Execute SQL-Statement 
  * @param string $strSQL = sql statement 
  * @param boolean $getrecordcount = true when a record count is wanted 
  */ 
  function execute( $strSQL, $getrecordcount = false ) 
  { 

    $this->RS = $this->ADODB->execute( $strSQL, &$this->RecordsAffected ); 

    if( $getrecordcount == true ) 
    { 

      $this->RS->MoveFirst(); 
      $this->recordcount = 0; 

      # brute force loop 
      while( $this->RS->EOF == false ) 
      { 
        $this->recordcount++; 
        $this->RS->MoveNext(); 
      } 
      $this->RS->MoveFirst(); 

    } 

  } // eof execute() 

  function eof() 
  { 
    return $this->RS->EOF; 
  } // eof eof() 

  function movenext( ) 
  { 
    $this->RS->MoveNext(); 
  } // eof movenext() 

  function movefirst() 
  { 
    $this->RS->MoveFirst(); 
  } // eof movefirst() 

  function close() 
  { 

    @$this->RS->Close(); // Generates a warning when without "@" 
    $this->RS=null; 

    @$this->ADODB->Close(); 
    $this->ADODB=null; 
  } // eof close() 

  function fieldvalue( $fieldname ) 
  { 
    return $this->RS->Fields[$fieldname]->value; 
  } // eof fieldvalue() 

  function fieldname( $fieldnumber ) 
  { 
    return $this->RS->Fields[$fieldnumber]->name; 
  } // eof fieldname() 

  function fieldcount( ) 
  { 
    return $this->RS->Fields->Count; 
  } // eof fieldcount()   

} // eoc mdb 
?> 
```

还有一个例子：

```
include 'class_mdb.php'; 

$mdb = new mdb('mymdbfile.mdb'); // your own mdb filename required 
$mdb->execute('select * from table'); // your own table in the mdb file 

# 
# first example: using fieldnames 
#  

while( !$mdb->eof() ) 
{ 
  echo $mdb->fieldvalue('description'); // using your own fields name 
  echo ' = '; 
  echo $mdb->fieldvalue( 1 ); // using the fields fieldnumber 
  echo '<br>'; 
  $mdb->movenext(); 
} 

echo '<br><hr><br>'; 

# 
# Going back to the first recordset for the second example 
# 
$mdb->movefirst(); 

# 
# This works, too: Make each Field an object. The values change 
# when the data pointer advances with movenext(). 
#  
$url = $mdb->RS->Fields(1); 
$bez = $mdb->RS->Fields(2); 
$kat = $mdb->RS->Fields(3); 

while( !$mdb->eof() ) 
{ 
  # works! 
  echo $bez->value; 
  echo ' = '; 
  echo $url->value; 
  echo '<br>'; 
  $mdb->movenext();  
} 

$mdb->close(); 
```

[参考](https://stackoverflow.com/questions/6512723/how-to-create-a-new-mdb-file-with-php)帖

**更新**

现在，如果您可以创建 mdb 文件，您可以在那里导出您的 mysql 数据库。

# android-emulator - 如何解决此错误：java.net.UnknownHostException: android.clients.google.com？

> ID：15917350
> 
> 赞同：0
> 
> 时间：2013-04-10T05:04:53.617
> 
> 标签：android-emulator, titanium, titanium-mobile

我在 android 模拟器的 Titanium studio 上运行一个简单的项目`java.net.UnknownHostException: android.clients.google.com`..但我在控制台上收到错误..我该如何解决？

# jquery-mobile - JQuery Mobile listview 搜索过滤器

> ID：15917351
> 
> 赞同：0
> 
> 时间：2013-04-10T05:04:54.260
> 
> 标签：jquery-mobile

我目前正在使用 jQuery mobile 并且正在使用搜索过滤器，但是只要它们包含字符，它就会显示所有结果。我希望它只显示以我搜索的字符开头的结果？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T16:48:23.953

jqm 网站上有一个[演示](http://jquerymobile.com/demos/1.3.0-beta.1/docs/demos/listviews/listview-filter-autocomplete.html)，其中处理 listviewbeforefilter 事件以填充列表。您可以调整代码以满足您的需求。

# maven - 插件标签中的依赖项和依赖项之间有区别吗？

> ID：15917352
> 
> 赞同：4
> 
> 时间：2013-04-10T05:04:56.743
> 
> 标签：maven, maven-plugin

我有个问题。

在 pom.xml 中，依赖项包含在两个地方。一个地方可以在`<project>`标签中，另一个地方可以在`<plugin>`标签中。

我认为标签中的依赖关系只与插件有关吗？这是正确的吗？

提前致谢 ：）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <artifactId>clustered-queue</artifactId>
   <packaging>jar</packaging>
   <name>HornetQ JMS Clustered Queue Example</name>

   <dependencies>

      <dependency>
         <groupId>org.hornetq.examples.jms</groupId>
         <artifactId>hornetq-jms-examples-common</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.jboss.spec.javax.jms</groupId>
         <artifactId>jboss-jms-api_1.1_spec</artifactId>
      </dependency>

   </dependencies>

   <build>
      <plugins>
         <plugin>
            <groupId>org.hornetq</groupId>
            <artifactId>hornetq-maven-plugin</artifactId>
            <executions>
               <execution>
                  <id>start1</id>
                  <goals>
                     <goal>start</goal>
                  </goals>
                  <configuration>
                     <jndiPort>1199</jndiPort>
                     <jndiRmiPort>1198</jndiRmiPort>
                     <hornetqConfigurationDir>${basedir}/target/classes/hornetq/server1</hornetqConfigurationDir>
                     <fork>true</fork>
                     <systemProperties>
                        <property>
                           <name>udp-address</name>
                           <value>${udp-address}</value>
                        </property>
                     </systemProperties>
                  </configuration>
               </execution>
            </executions>
            <dependencies>

               <dependency>
                  <groupId>org.hornetq</groupId>
                  <artifactId>hornetq-core-client</artifactId>
                  <version>${project.version}</version>
               </dependency>
               <dependency>
                  <groupId>org.hornetq</groupId>
                  <artifactId>hornetq-server</artifactId>
                  <version>${project.version}</version>
               </dependency>

            </dependencies>
            <configuration>
               <waitOnStart>false</waitOnStart>
            </configuration>
         </plugin>
      </plugins>
   </build>

</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T05:33:32.340

下面`<dependencies>`是`<project>`我们的工件的依赖项列表，Maven 将在编译时为我们下载并链接依赖项。有关详细信息，请参阅[POM 参考：依赖关系](http://maven.apache.org/pom.html#Dependencies)和[依赖机制简介](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)。

下面`<dependencies>`的内容是`<plugin>`作为它们所在插件的依赖项应用。***这样做的作用是改变插件的依赖列表***，可能是通过**删除**未使用的运行时依赖`exclusions`，或者通过**更改**所需依赖的版本。有关详细信息，请参阅[POM 参考：插件](http://maven.apache.org/pom.html#Plugins)和[配置插件指南](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)。

我希望这可能会有所帮助。

# c# - 如何将文件上传到共享点文档库

> ID：15917354
> 
> 赞同：4
> 
> 时间：2013-04-10T05:04:59.670
> 
> 标签：c#, sharepoint-2010

谁能建议我创建一个关于如何将文件上传到共享点文档库的银光沙盒解决方案。我是 C# 开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:59:23.500

在这里有点难以描述。但我假设您将从文件中获取[FileInfo](http://msdn.microsoft.com/en-in/library/system.io.fileinfo.aspx)。对于银光应用程序，您需要添加两个客户端对象模型的引用 dll。

```
Microsoft.SharePoint.Client.Silverlight.dll.
Microsoft.SharePoint.Client.Silverlight.Runtime.dll. 
```

`C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS\ClientBin`你可以从目录路径中找到上面的dll 。

```
 private ClientContext context;
 private Web web;

 private void UploadFile(FileInfo fileToUpload, string libraryTitle, string subfolderPath, bool fileOverwrite)
    {
        try
        {
            //Treatment of files and loading it to byte array []
            Stream str = null;
            Int32 strLen, strRead;

            str = fileToUpload.OpenRead();
            strLen = Convert.ToInt32(str.Length);

            byte[] strArr = new byte[strLen];
            strRead = str.Read(strArr, 0, strLen);

            using (context = new ClientContext("http://localhost/"))
           {
            web = context.Web;

            //Defining where to find the files to tape record the library go
            List destinationList = web.Lists.GetByTitle(libraryTitle);

            //Creating a file
            var fciFileToUpload = new FileCreationInformation();
            fciFileToUpload.Content = strArr;

            //Must determine whether to upload files directly to the library or whether to upload the files to sub directories and stack your way to the file
            string uploadLocation = fileToUpload.Name;

            if (!string.IsNullOrEmpty(subfolderPath))
            {
                uploadLocation = string.Format("{0}/{1}", subfolderPath, uploadLocation);
            }
            uploadLocation = string.Format("{0}/{1}/{2}", webUrl, libraryTitle, uploadLocation);

            //Sets the path to the file where you want to upload and subor whether to overwrite the file or not
            fciFileToUpload.Url = uploadLocation;
            fciFileToUpload.Overwrite = fileOverwrite;

            clFileToUpload = destinationList.RootFolder.Files.Add(fciFileToUpload);

            //load web,list.
            context.Load(web);
            context.Load(destinationList, list => list.ItemCount);
            context.Load(clFileToUpload);
            context.Load(clFileToUpload.ListItemAllFields);
            context.ExecuteQueryAsync(OnLoadingSucceeded, OnLoadingFailed);
           }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            unhideComponents();
        }
    }
    private void OnLoadingSucceeded(Object sender, ClientRequestSucceededEventArgs args)
    {
        Dispatcher.BeginInvoke(fileUploaded); // fileUploaded is function
    }

    private void OnLoadingFailed(object sender, ClientRequestFailedEventArgs args)
    {
        Dispatcher.BeginInvoke(fileNotUploaded); //fileNotUploaded is function
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:17:22.763

您可以参考以下代码：

```
String UploadFile = @"C:\YourFile.txt";
String sharePointWebAdd = "http://yoursite.com/sites/Research/";
String docLib = "Shared Documents";

using (SPSite oSite = new SPSite(sharePointWebAdd))
{
    using (SPWeb oWeb = oSite.OpenWeb())
    {
        if (!System.IO.File.Exists(UploadFile))
            throw new FileNotFoundException("File not found.", UploadFile);                    

        SPFolder myLibrary = oWeb.Folders[docLib];

        // Prepare to upload
        Boolean replaceExistingFiles = true;
        String fileName = System.IO.Path.GetFileName(UploadFile);
        FileStream fileStream = File.OpenRead(UploadFile);

        // Upload document
        SPFile spfile = myLibrary.Files.Add(fileName, fileStream, replaceExistingFiles);

        // Commit 
        myLibrary.Update();
    }
} 
```

另请参阅：

[http://msdn.microsoft.com/en-us/library/lists.lists.aspx](http://msdn.microsoft.com/en-us/library/lists.lists.aspx)

# iphone - setAuthenticateHandler 无法通过 Game Center 进行身份验证

> ID：15917358
> 
> 赞同：1
> 
> 时间：2013-04-10T05:05:23.910
> 
> 标签：iphone, ios, objective-c, ios6, game-center

我是 iOS 新手，正在尝试编写一款有趣的回合制 iOS 游戏。我现在正在尝试对本地用户进行身份验证，并且虽然此代码构建（尽管带有保留周期警告），但它始终无法通过 GameCenter 进行身份验证。

```
// Authenticate the local user.
- (void)authenticateLocalUser
{
if (!gameCenterAvailable) return;

GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
[localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error)
{
    //[localPlayer authenticateWithCompletionHandler:^(NSError *error) { OLD CODE!
    if (localPlayer.isAuthenticated)
    {
        // Do some stuff.
    }
    else
    {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"NOT AUTHORISED"
                                  message:@"YOUR'RE NOT LOGGED INTO GC."
                                  delegate:self
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
}
)]; 
```

}

我的旧代码仍然有效，但在 iOS6 中被贬低了：

```
NSLog(@"Authenticating local user...");
if ([GKLocalPlayer localPlayer].authenticated == NO)
{
    [[GKLocalPlayer localPlayer]
     authenticateWithCompletionHandler:nil];
}
else
{
    NSLog(@"Already authenticated!");
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:45:39.453

当播放器未通过身份验证时，该处理程序会传递一个 UIViewController。如果收到视图控制器，则显示视图控制器是您的责任。

```
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
    if (viewController != nil) {
        [self presentViewController:viewController animated:YES completion:nil];
    } else if (instance.player.isAuthenticated) {
        //Your handler will be called a second time once the user authenticates GC
        //using the view controller above ^^^^^
    } else if (error != nil) {
        //If all else fails, you'll have an error. Handle it
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T14:30:25.613

我发现 localPlayer，设置在闭包之外/之前没有经过身份验证，而如果我检索到一个新的 GKLocalPlayer.localPlayer() 对象，它将通过身份验证。

```
func authenticatePlayer() {
  local_player.authenticateHandler = {(view_controller, error) -> Void in

    // Note that self.local_player.authenticated and 
    //  GKLocalPlayer.localPlayer().authenticated give different
    //  results

    self.local_player = GKLocalPlayer.localPlayer()
    if (self.local_player.authenticated) {
      // Successfully authenticated
    } else if (view_controller != nil) {
      // Not yet authenticated
    } else {
      // authentication failed
    }
  }
} 
```

在这种情况下，`local_player`设置在周围类中。

注意：我实际上不确定为什么这些会给出不同的结果。

# jquery - 什么 jQuery 选择器会给我第一个元素

> ID：15917359
> 
> 赞同：0
> 
> 时间：2013-04-10T05:05:30.837
> 
> 标签：jquery, jquery-selectors

如何使用类名根据第一行选择第一个 td？

```
<tbody id="logBody">
    <tr class="logArow">
        <td>Log Name</td>
        <td>Log Information</td>
    </tr>
</tbody> 
```

我已经走了这么远，但被卡住了，不知道如何获得 td 的第一个孩子....

```
$("#logBody > tr.logArow").first() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:08:02.973

有多种方法可以做到这一点。这是一个：

```
$("#logBody td:first-child") 
```

有关更多信息，请浏览[此页面](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:18:32.867

以下是如何完成的**部分列表：**

```
$("#logBody > tr.logArow > td:eq(0)")
$("#logBody > tr.logArow > td").eq(0)
$("#logBody > tr.logArow > td:first-child")
$("#logBody > tr.logArow > td").first()
$("#logBody > tr.logArow > td:first")
$("#logBody > tr.logArow > td").slice(0,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:08:22.147

一个与您已有的示例接近的示例：

```
$("#logBody > tr.logArow > td:first") 
```

# unit-testing - 编写难以进行单元测试的代码

> ID：15917363
> 
> 赞同：5
> 
> 时间：2013-04-10T05:05:53.670
> 
> 标签：unit-testing, testing

在一次采访中，有人问我“如何让代码难以进行单元测试？” 我最终喃喃自语地写了一些关于编写紧密耦合的代码的事情。谁能告诉我这个问题的正确答案/方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:20:23.307

看看 Mishko 的[指南：编写可测试](http://misko.hevery.com/code-reviewers-guide/)的代码，在你的代码中引入尽可能多的这些缺陷，你最终会得到不可测试的代码。

例如：

*   在构造函数中做尽可能多的事情，启动线程，使用循环和 ifs
*   通过创建一长串方法调用来打破得墨忒耳法则
*   到处使用单例，从不要求依赖，在静态提供者中查找它们
*   用 2k 行代码创建上帝类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:10:09.207

那么一些答案可能是

*   访问数据库的代码
*   根据系统日期时间运行的代码
*   在同一方法（单元）中执行多个功能的代码
*   具有大量附加行为的代码，它依赖于另一个不可读的代码

并且在一般情况下，任何难以/不可能模拟环境以使其表现出需要测试的方式的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:09:06.777

*   *自己使用***运算符创建类所需的依赖***`new`项就足够了！这意味着紧密耦合的代码就是你的答案。*
**   不遵循[SOLID 原则](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29&ei=T_dkUYHJBIPLrQeQjoG4AQ&usg=AFQjCNHMwHjI1CzjM0208uMB6OSA3S4jug&sig2=TF9my8yA9ExDLNQAlmUtyQ&bvm=bv.44990110,d.bmk)的代码。*

 *因此，在测试中，您将无法使用`Mock`对象，因为您自己创建依赖项并对关系进行硬编码。

通过[依赖注入](https://stackoverflow.com/questions/130794/what-is-dependency-injection)，您可以使用多态行为，因此在构造函数或方法中传递给它的依赖项上调用某些方法的类不需要知道具体类型。所以在测试中你可以传递一个模拟对象，你就可以轻松地测试你的类。

[Misko 的编写可测试代码](http://misko.hevery.com/code-reviewers-guide/)解释了我们如何擅长编写不可测试的代码以及如何解决它。

示例（JAVA）：

```
//hard to unit test this code as testing class A also requires that ClassB should work properly
//What is ClassB does some I/O or DB operations. This makes unit test a integration test
class classA{
   ClassB b = new ClassB();   //Creating concrete dependencies

}

interface B{
     //implemented by Class B and your mock class that you create for testing
}

class ClassA{
     private B b;

     //Here you can use mocking framework or create a mock class yourself and pass that as argument
     //So the mock class will not do any DB or I/O and makes this unit test
     public classA(B b){
         this.b = b;
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T05:17:53.683

这是一个很好的答案。紧密耦合的代码极难进行单元测试（可能不应该进行单元测试——它应该首先重构），因为根据定义，单元测试只能测试某物的特定单元。单元测试应该避免对数据库或系统其他组件的所有调用，因为它们违反了这一点。

话虽如此，您还可以提到集成测试适用于测试更大的代码耦合或具有依赖关系的代码，甚至是基于行为的操作。您可以构建一个集成测试套件来测试您的 REST API，它具有许多依赖项，甚至跨多种技术和多种编程语言。

此外，如果不考虑设计或不使用体面的设计模式，可能会导致极度耦合或依赖的代码，如果不进行重构或重写，就很难或不可能进行单元测试。然后，您可以谈论 TDD（测试驱动开发[http://en.wikipedia.org/wiki/Test-driven_development](http://en.wikipedia.org/wiki/Test-driven_development)）或 BDD（行为驱动开发[http://en.wikipedia.org/wiki/Behavior-driven_development](http://en.wikipedia.org/wiki/Behavior-driven_development)）您首先要设计测试套件并从那里开始工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T05:50:26.433

难以分离的代码 - 多个职责分布在多个类之间，但没有一个类完全承担任何责任

看起来非常复杂的代码 - 试试平均状态机的 500 行 if/then/else 炸弹。

在给定领域非常强大的代码，数学就是一个明显的例子。采用傅里叶变换函数并添加一个单元测试，显示全零转换为全零。100% 的覆盖率，但根本没有经过真正的测试。

与错综复杂的外部依赖关系强耦合的代码。

具有执行多种操作的巨大接口的代码。*

# image - 图像没有上传到magento的服务器

> ID：15917375
> 
> 赞同：0
> 
> 时间：2013-04-10T05:07:21.837
> 
> 标签：image, magento, upload

我在服务器中为magento上传图片时遇到了一些问题，但它在本地主机中工作正常。在服务器中它没有上传

请找到解决方案，请尽快回复

谢谢

# include - 包括 config.php 不工作

> ID：15917381
> 
> 赞同：0
> 
> 时间：2013-04-10T05:07:44.597
> 
> 标签：include, config, document-root

**在我的 doctype 和 html 声明之后，我有：**

```
<?php include ('/setup/config.php'); ?>
// leading slash to get to site root[?]

<?php $pageTitle = 'Home'; include ('header.php'); ?>

<body></body> 
```

**我的 config.php 有：**

```
<?php 
define('ROOT',$_SERVER['DOCUMENT_ROOT']); 
define('INCLUDES',ROOT.'/dir/dir/dir/'); 
?> 
```

内容不显示。我的交易有什么问题？- 尝试没有前导斜线，仍然不起作用。

我认为我的配置文件必须首先加载，因为它定义了我所有其他包含依赖的 ROOT...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:49:17.003

事实证明，据我所知，前导斜杠 [/] 不适用于在 PHP 中获取文档根目录。所以，我还是得使用../../../等。然后，可以找到config.php文件。`:]`

# java - java.net.UnknownHostException 和 java.net.SocketException：打开的文件太多

> ID：15917383
> 
> 赞同：1
> 
> 时间：2013-04-10T05:07:55.487
> 
> 标签：java, linux, servlets

我在 Tomcat 上运行一个 Web 应用程序。我的应用程序连接到其他 Web 服务来满足来自客户端的请求。有时我在打开 URL 连接时收到 java.net.UnknownHostException，然后有时我开始收到 java.net.SocketException: Too many open files。我的服务器停止进一步接受连接。请指导。

```
String  response;
    HttpURLConnection conn = null;
BufferedReader rd = null;
InputStream in = null;
try
{
    // Send data
    String urlStr = URL;
    URL url = new URL(urlStr);
    conn = (HttpURLConnection)url.openConnection();
    conn.setRequestProperty("content-type", "application/x-www-form-urlencoded");
    int contentLength = conn.getContentLength();
    //   System.out.println("content length 1" +  contentLength);
    if (contentLength <= 0)
    {
        InputStream in1 = (conn).getErrorStream();
        if (in1 != null)
        {
            in1.close();
        }
        conn.getInputStream().close();
        in = null;
        conn.disconnect();
        conn = null;
        return null;
    }
    in = conn.getInputStream();
    if (conn.getResponseCode() != 200)
    {
        InputStream in1 = (conn).getErrorStream();
        if (in1 != null)
        {
            in1.close();
        }
        conn.getInputStream().close();
        in = null;
        conn.disconnect();
        conn = null;
        in.close();
        in = null;
        return null;
    }
    // Get the response
    rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    StringBuffer stringBuffer = new StringBuffer();
    String line = null;
    while ((line = rd.readLine()) != null)
    {
        stringBuffer.append(line);
    }
    response = stringBuffer.toString();
    System.out.println("full ads response = " + response);
}
catch (Exception ex)
{
    //   ex.printStackTrace();
}
finally
{
    try
    {
        if (conn != null)
        {
            InputStream in1 = (conn).getErrorStream();
            if (in1 != null)
            {
                in1.close();
            }
            conn.getInputStream().close();
            in = null;
            conn.disconnect();
            conn = null;
        }
        if (rd != null)
        {
            rd.close();
            rd = null;
        }
        if (in != null)
        {
            in.close();
            in = null;
        }
    }
    catch (Exception e)
    {
    }
}
return null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:43:40.827

`UnknownHostException`只是意味着您使用的 URL 指的是一个不存在的主机名，或者可能是该主机名的 DNS 记录或系统当时正在转换。

套接字泄漏可能是由您在下面的过多清理代码引起的，请参阅注释。

当您压制所有异常时，您对 Hades 没有希望找出问题所在。所以这是首先要解决的问题。永远不要忽略异常。记录它们。打印他们的堆栈跟踪。做一点事。

但是，您的代码也有许多其他问题：

```
HttpURLConnection conn = null;
BufferedReader rd = null;
InputStream in = null;
try
{
    // Send data
    String urlStr = URL; 
```

这个变量是多余的。只需`URL`在下面使用。

```
 URL url = new URL(urlStr);
    conn = (HttpURLConnection)url.openConnection();
    conn.setRequestProperty("content-type", "application/x-www-form-urlencoded"); 
```

到目前为止还可以。

```
 int contentLength = conn.getContentLength();
    //   System.out.println("content length 1" +  contentLength);
    if (contentLength <= 0) 
```

检查零内容长度是非常不寻常的。这是检查错误的代理吗？我会简单地删除这个测试。

```
 {
        InputStream in1 = (conn).getErrorStream();
        if (in1 != null)
        {
            in1.close();
        }
        conn.getInputStream().close();
        in = null;
        conn.disconnect();
        conn = null;
        return null;
    } 
```

以上都是多余的。您已经在 finally 块中拥有它。去掉它。

```
 in = conn.getInputStream();
    if (conn.getResponseCode() != 200) 
```

现在这就是检查错误的方法。但是，您必须在调用`getResponseCode()` *之前*调用，否则当您可能对响应代码 404 更感兴趣时`getInputStream(),`，后者可能会抛出。`FileNotFoundException`

```
 {
        InputStream in1 = (conn).getErrorStream();
        if (in1 != null)
        {
            in1.close();
        }
        conn.getInputStream().close();
        in = null;
        conn.disconnect();
        conn = null;
        in.close();
        in = null;
        return null;
    } 
```

同样，以上所有内容都是多余的。您已经在 finally 块中拥有它。去掉它。

```
 // Get the response
    rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    StringBuffer stringBuffer = new StringBuffer();
    String line = null; 
```

的初始化`line`是多余的。变量在下一行中赋值。去掉它。

```
 while ((line = rd.readLine()) != null)
    {
        stringBuffer.append(line);
    }
    response = stringBuffer.toString();
    System.out.println("full ads response = " + response);
}
catch (Exception ex) 
```

你应该只在这里赶上`IOException`。

```
{
    //   ex.printStackTrace(); 
```

**永远不要**忽略异常。

```
}
finally
{
    try
    {
        if (conn != null)
        {
            InputStream in1 = (conn).getErrorStream();
            if (in1 != null)
            {
                in1.close();
            } 
```

您不需要获取或关闭错误流。删除这一切。

```
 conn.getInputStream().close();
            in = null; 
```

将此变量设置为 null 是没有意义的。它是一个局部变量，所以无论如何它都会超出范围。

```
 conn.disconnect();
            conn = null; 
```

同上。

```
 }
        if (rd != null)
        {
            rd.close();
            rd = null;
        } 
```

您已经关闭了输入流。这是多余的。删除此块。

```
 if (in != null)
        {
            in.close();
            in = null;
        } 
```

您已经关闭了连接的输入流。这都是多余的。去掉它。

```
 }
    catch (Exception e)
    {
    } 
```

同样，您应该只在`IOException`这里捕获，并且您不应该忽略错误。就我个人而言，我会使用 throw 方法`IOException`并且根本没有任何 catch 块。返回 null 对调用者来说不是很有用。他通常最好确切地知道出了什么问题，这样他就可以就如何处理它做出有用的决定。

```
}
return null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-14T00:31:44.807

我最近在尝试与无法访问的 URL 建立大量连接时遇到了这个问题。连接会因 UnknownHostException 而失败，但最终会因 java.net.SocketException: Too many open files 而失败。

问题是，底层本机套接字句柄是由 HttpURLConnection 创建的。似乎直到对象被垃圾收集之后才释放此句柄。就我而言，没有足够的内存用于触发垃圾收集。如果 GC 从未运行，则不会释放本机句柄。

我的解决方案是在获取 UnknownHostExceptions 时定期调用 System.gc()。我知道这看起来像是一个杂物，但它起作用了，底层的本机句柄被释放了，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:10:42.517

尝试增加您的 linux 服务器打开文件限制以修复`java.net.SocketException: Too many open files`. 最大文件的限制存储在linux中的这个文件中：

```
/proc/sys/fs/file-max 
```

要检查当前打开的文件，您可以使用：

```
lsof 
```

检查号码。打开文件，使用：

```
lsof | wc -l 
```

此外，除了 conn.disconnect() 之外，关闭您的连接 conn.close()。确保你也关闭了 inputreader。所有此类关闭都应该在 finally 块中，以便在出现任何异常时也关闭连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:10:58.580

你是在windows还是linux上运行？检查这篇文章，希望它有所帮助：[http ://edmund.haselwanter.com/en/blog/2009/03/13/tomcat-too-many-open-files/](http://edmund.haselwanter.com/en/blog/2009/03/13/tomcat-too-many-open-files/)

# graph - 如何在 wp8 中实现条形图？

> ID：15917386
> 
> 赞同：0
> 
> 时间：2013-04-10T05:08:10.100
> 
> 标签：graph, windows-phone-8, bar-chart

我是wp8的新手。

我想在 wp8 中实现条形图，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/rgc7y.jpg)

我怎样才能做到这一点？我不知道如何开始在 wp8 中实现条形图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:34:34.830

我的建议是使用第 3 方控制提供商。

Microsoft 在他们的开发中心应用程序中使用[Telerik Windows Phone 图表控件](http://www.telerik.com/products/windows-phone.aspx)，但请注意，这些控件不是免费的。

# c - C中的易失性，它如何在内部工作

> ID：15917391
> 
> 赞同：1
> 
> 时间：2013-04-10T05:08:27.973
> 
> 标签：c, linux-kernel, x86, linux-device-driver, cpu-registers

只是想知道 volatile 关键字在内部是如何工作的。

尝试使用 GCC 和 Turbo C（基于 DOS）两种情况，它的行为方式不同。

```
volatile int iData;
iData = 5;
printf("%d %d %d %d %d %d\n", ++iData, iData++, iData++, ++iData, iData, iData++); 
```

输出是否取决于 printf 函数数据传递或基于编译器？

谢谢干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:10:26.930

您通过在同一语句中多次修改来调用*未定义的行为。*`iData`由于行为是未定义的，不同的编译器可以为它做不同的事情，它们都不是错的。所以你真的不希望你的代码中有未定义的行为。

请参阅[为什么这些构造（使用 ++）未定义行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)更多细节。

`volatile`注意：代码中的奇怪行为与关键字无关。有关详细信息，`volatile`请参阅[为什么 C 中需要 volatile？](https://stackoverflow.com/questions/246127/why-is-volatile-needed-in-c)

# entity-framework - 为什么在实体框架的 ExecuteReader 中需要 CommandBehavior.SequentialAccess？

> ID：15917392
> 
> 赞同：1
> 
> 时间：2013-04-10T05:08:30.090
> 
> 标签：entity-framework, entity-framework-4

我是实体框架的新手，不明白为什么 ExecuteReader 需要 CommandBehavior.SequentialAccess。下面是我的代码..

```
 using (var conn = new EntityConnection("name=EFRecipesEntities"))
    {
       Console.WriteLine("Customers...");
       var cmd = conn.CreateCommand();
       conn.Open();
       cmd.CommandText = @"select c.Name, C.Email from
       EFRecipesEntities.Customers as c";
       using (var reader = cmd.ExecuteReader(CommandBehavior.SequentialAccess))
       {
           while (reader.Read())
           {
              Console.WriteLine("{0}'s email is: {1}",
              reader.GetString(0), reader.GetString(1));
           }
       }
    } 
```

任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T21:30:05.040

根据微软来自[http://blogs.msdn.com/b/alexj/archive/2007/11/15/commandbehavior-sequentialaccess.aspx?Redirected=true](http://blogs.msdn.com/b/alexj/archive/2007/11/15/commandbehavior-sequentialaccess.aspx?Redirected=true)

在 EntityDataReader 中，有时一个 Cell（行和列的交集）实际上也包含另一个 Reader。缓存你过去读过的嵌套阅读器有点棘手。所以至少目前我们不支持非顺序访问。

# jasper-reports - jasper 报告：将带有分组标题的表导出到 Excel

> ID：15917397
> 
> 赞同：2
> 
> 时间：2013-04-10T05:09:01.217
> 
> 标签：jasper-reports, jasperserver

比方说，我的报告中有一个表格，其中包含这样的复杂标题

![列报告示例](https://i.stack.imgur.com/Ac5f0.jpg)

当我使用 Jasper Reports Server 将其导出到 xls 或 xlsx 时，它会像这样打印（Excel 2010）：

![列报告失败](https://i.stack.imgur.com/zvm2p.jpg)

`Column 1`高度应该等于`Column 2`+`Header`高度

环境：Jasper Reports Server CE 4.5.1，尝试了最新版本（5.0.4）-相同（悲伤）结果

如何正确将此类标头导出到 Excel？

有人知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:17:57.847

JasperReportsServer 配置为折叠行跨度，请参阅`collapseRowSpan`.xlsExportParameters bean 的属性`WEB-INF/applicationContext.xml`。

将该属性设置`false`为使组标题跨越两行。

iReport 在 具有相同的属性`Options/Export Options/Excel/Collapse Row Span`。

# node.js - 直接从 URL 查询字符串提供的 mongo 查询有多危险？

> ID：15917400
> 
> 赞同：19
> 
> 时间：2013-04-10T05:09:21.307
> 
> 标签：node.js, express, mongoose, node.js, mongodb, express, mongoose, security

我正在玩[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")、[express](/questions/tagged/express "显示标记为“快递”的问题")和[mongoose](/questions/tagged/mongoose "显示标记为“猫鼬”的问题")。

为了立即启动并运行某些东西，我将 Express 查询字符串对象直接传递给 mongoose 查找函数。我很好奇的是这种做法在实时应用程序中会有多危险。我知道 RDBMS 极易受到 SQL 注入的攻击。除了“清理你的输入”的好建议之外，这段代码有多邪恶：

```
app.get('/query', function (req, res) {
    models.findDocs(req.query, function (err, docs) {
            res.send(docs);
        });
}); 
```

这意味着 aa get request to`http://localhost:8080/query?name=ahsteele&status=a`只会将以下内容推入 findDocs 函数：

```
{
  name: 'ahsteele',
  status: 'a'
} 
```

出于很多原因，这感觉很糟糕，但它有多不安全？将查询参数传递给 mongodb 的最佳实践是什么？express 是否提供任何开箱即用的消毒？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T06:50:23.347

就注入问题而言，就像 SQL 一样，风险要低得多……尽管理论上可以通过未知的攻击向量来实现。

数据结构和协议是二进制和 API 驱动的，而不是利用特定领域语言中的转义值。基本上，您不能只是欺骗解析器在最后添加一个“;db.dropCollection()”。

如果它只用于查询，它可能没问题......但我仍然会提醒你使用一点点验证：

*   确保仅包含字母数字字符（过滤或使空值无效以及您通常不接受的任何其他内容）
*   强制每个术语的最大长度（如 255 个字符）
*   强制整个查询的最大长度
*   去除以“$”开头的**特殊**参数名称，如“$where”等
*   不允许嵌套数组/文档/哈希......只有字符串和整数

另外，请记住，空查询会返回所有内容。您可能希望对该返回值进行限制。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T07:24:47.773

运算符注入在这里是一个严重的问题，我建议您至少编码/转义某些字符，更具体地说是`$`符号：[http ://docs.mongodb.org/manual/faq/developers/#dollar-sign-operator-escaping](http://docs.mongodb.org/manual/faq/developers/#dollar-sign-operator-escaping)

如果允许用户在您的字符串或元素的开头附加一个符号`$`，或者他们将快速使用它的任何内容：http: [//xkcd.com/327/](http://xkcd.com/327/)，至少可以说，您将是一个 gonner。`$_GET``$_POST`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T06:34:47.223

据我所知，Express 不提供任何开箱即用的消毒控制。您可以编写自己的中间件，我们在您自己的逻辑中进行一些基本检查。正如您所说，您提到的案例有点冒险。

但是为了便于使用，Mongoose 模型中内置的所需类型至少为您提供了默认的清理以及对进入或不进入的内容的一些控制。

例如像这样的东西

```
var Person = new Schema({
  title   : { type: String, required: true }
, age     : { type: Number, min: 5, max: 20 }
, meta    : {
      likes : [String]
    , birth : { type: Date, default: Date.now }
  } 
```

});

检查此以获取更多信息。

[http://mongoosejs.com/docs/2.7.x/docs/model-definition.html](http://mongoosejs.com/docs/2.7.x/docs/model-definition.html)

# android - Android将音频/语音邮件文件转换为文本文件

> ID：15917402
> 
> 赞同：1
> 
> 时间：2013-04-10T05:09:26.270
> 
> 标签：android, speech-recognition, speech-to-text, cmusphinx

与 android 4.1 及更高版本中包含在 android 库本身中的语音到文本库一样。我想使用 Google 库或任何其他第三方库将语音邮件/声音文件识别为文本文件。我已经看到使用 Dragon natural speak 和 CMU 的链接Sphinx 但没有找到任何在 android 中使用它的示例。我更喜欢使用谷歌库进行语音识别。请提出任何方法来做到这一点。

# ios - Tableview使用空数组获取索引超出范围

> ID：15917405
> 
> 赞同：0
> 
> 时间：2013-04-10T05:09:42.770
> 
> 标签：ios, uitableview, core-data, nsmutablearray, nsfetchedresultscontroller

我有一个`tableview`充满 a`fetchedresultscontroller`和 a `searchbar`。到目前为止，在创建应用程序时，我只使用了 7 个单元格并且工作得很好，但是自从我开始使用超过 7 个单元格后，当我触摸搜索栏时，我得到了超出范围空数组的错误。但是当我把它放回 7 个单元格时，它工作得很好。

什么可能是错的？

错误：由于未捕获的异常“ `NSRangeException`”而终止应用程序，原因：“ *** `-[__NSArrayM objectAtIndex:]:`索引 2 超出了空数组的范围”

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Exercises";

    id appDelegate = [[UIApplication sharedApplication] delegate];
    _managedObjectContext = [appDelegate managedObjectContext];

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"%@ %@", error, [error userInfo]);
        abort();
    }

    _searchResults = [[NSMutableArray alloc] init];

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    NSIndexPath *selectedIndexPath = [_tableView indexPathForSelectedRow];
    if (!selectedIndexPath) {
        [_tableView setContentOffset:CGPointMake(0, 44) animated:NO];
    }
    else {
        [_tableView deselectRowAtIndexPath:selectedIndexPath animated:YES];
    }
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    if (self.searchDisplayController.isActive) {
        [self.searchDisplayController setActive:NO animated:YES];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (self.searchDisplayController.isActive) {
        return 1;
    }
    return [[_fetchedResultsController sections] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (self.searchDisplayController.isActive) {
        return nil;
    }
    return [[[_fetchedResultsController sections] objectAtIndex:section] name];
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 22)];
    view.backgroundColor = [UIColor colorWithRed:20.0/255.0 green:20.0/255.0 blue:20.0/255.0 alpha:0.8];

    UILabel *sectionLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 0, 160, 22)];
    sectionLabel.font = [UIFont fontWithName:@"Avenir-Book" size:16.0f];
    sectionLabel.text = @"Search Results";

    if (!self.searchDisplayController.isActive) {
        sectionLabel.text = [[[_fetchedResultsController sections] objectAtIndex:section] name];
    }

    sectionLabel.backgroundColor = [UIColor clearColor];
    sectionLabel.textColor = [UIColor whiteColor];
    [view addSubview:sectionLabel];
    return view;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (self.searchDisplayController.isActive) {
        return [_searchResults count];
    }
    return [[[_fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"exerciseCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        [self stampCell:cell atIndexPath:indexPath];
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

#pragma mark - Cell

- (void)stampCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    if ([cell.reuseIdentifier isEqualToString:@"exerciseCell"]) {

        UILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 2, 150, 22)];
        textLabel.tag = kExerciseCellTextLabel;
        textLabel.font = [UIFont systemFontOfSize:18.0];
        textLabel.textColor = [UIColor blackColor];
        textLabel.highlightedTextColor = [UIColor whiteColor];
        textLabel.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:textLabel];

        UILabel *detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 24, 150, 18)];
        detailTextLabel.tag = kExerciseCellDetailTextLabel;
        detailTextLabel.font = [UIFont systemFontOfSize:14.0];
        detailTextLabel.textColor = [UIColor colorWithRed:128.0/255.0 green:128.0/255.0 blue:128.0/255.0 alpha:1.0];
        detailTextLabel.highlightedTextColor = [UIColor colorWithRed:127.0/255.0 green:127.0/255.0 blue:127.0/255.0 alpha:1.0];
        detailTextLabel.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:detailTextLabel];

    }
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    if ([cell.reuseIdentifier isEqualToString:@"exerciseCell"]) {

        UILabel *textLabel = (UILabel *)[cell.contentView viewWithTag:kExerciseCellTextLabel];
        UILabel *detailTextLabel = (UILabel *)[cell.contentView viewWithTag:kExerciseCellDetailTextLabel];

        Exercise *exercise;

        if (self.searchDisplayController.isActive) {
            exercise = [_searchResults objectAtIndex:indexPath.row];
        }
        else {
            exercise = [_fetchedResultsController objectAtIndexPath:indexPath];
        }

        textLabel.text = [exercise valueForKey:kExerciseName];
        detailTextLabel.text = [NSString stringWithFormat:@"%@ - %@", [[exercise valueForKey:kExerciseEType] valueForKey:kExerciseTypeName], [[exercise valueForKey:kExerciseGear] valueForKey:kGearName]];

        cell.selectionStyle = UITableViewCellSelectionStyleGray;
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }
}

#pragma mark - UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"exerciseDetail" sender:self];
}

#pragma mark - UISearchBarDelegate

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [_searchResults removeAllObjects];
    if (searchString.length > 0) {

        for (Exercise *exercise in [_fetchedResultsController fetchedObjects]) {
            NSRange range = [[exercise valueForKey:kExerciseName] rangeOfString:searchString options:NSCaseInsensitiveSearch];
            if (range.location == 0) {
                [_searchResults addObject:exercise];
            }
        }
    }
    return YES;
}

- (BOOL)searchBarShouldBeginEditing:(UISearchBar*)searchBar {
    [super setPan];
    return YES;
}

- (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar
{
    [super setPan];
    return YES;
}

#pragma mark - NSFetchedResultsControllerDelegate

- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:kExercise inManagedObjectContext:_managedObjectContext];
    [request setEntity:entity];

    NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:kExerciseName ascending:YES];
    [request setSortDescriptors:[NSArray arrayWithObject:sort]];

    NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:_managedObjectContext sectionNameKeyPath:kExerciseFirstLetter cacheName:@"ExerciseList"];
    [self setFetchedResultsController:fetchedResultsController];
    [_fetchedResultsController setDelegate:self];

    return _fetchedResultsController;
}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:41:31.133

它显示一些数组仍然为空..检查它的更好方法

- 将 NSLog 语句放在数组元素之后并运行它..IT 显示哪个数组仍然为空。

如果您的问题没有得到解决，请这样做..请告诉我..所以，我可以进一步帮助您..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:24:23.403

您在哪里看到崩溃 - 仅显示搜索结果或显示整个列表时？

如果它只是搜索结果，那么您的 _searchResults 记录不超过 7 条。

如果是在显示所有结果时，请检查 _fetchedResultsController.sections 的每个值中的记录数。看起来他们没有超过 7 条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:17:42.407

嗨，我想您从 _searchResults 中删除所有元素可能是由于此应用程序正在崩溃。请检查一次。

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [_searchResults removeAllObjects]; 
```

# javascript - 显示一个 div 并隐藏其余部分

> ID：15917407
> 
> 赞同：2
> 
> 时间：2013-04-10T05:09:48.183
> 
> 标签：javascript, ajax, html, css

现在我使用淡入淡出来切换按钮点击的内容。

我用于相同的脚本是

```
function showHide(divId){
    if (document.getElementById(divID).style.display == "none") {
        $('#'+divID).fadeIn(3000);

    } else {
        $('#'+divID).fadeOut(3000);
    }
} 
```

如何修改上述代码以在按钮单击时显示内容。

考虑我有 2 个按钮

```
<button> button1</button>
<button> button2</button>

<div id="div1"> content of button 1 </div>
<div id="div2" style="display:hidden"> content of button 2</div> 
```

我想显示任何一个 div，当单击按钮 1 时，按钮 2 的内容不应该是可见的，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:14:45.413

更新`showHide`

```
function showHide(divID) {
    $("div").not("#" + divID).fadeOut(3000); 
```

每次都选择淡出它们很好，因为隐藏一个 div 不会显示另一个。您可能还应该给所有这些 div 一个类并使用它，而不仅仅是`"div"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:53:52.420

我是 js 的初学者，但试试这个：

HTML：

```
<button id="btn1"> button1</button>
<button id="btn2"> button2</button>

<div id="div1"> content of button 1 </div>
<div id="div2" class="hidden"> content of button 2</div> 
```

CSS：

```
.hidden { display: none;} 
```

JS：

```
$('#btn1').click(function(){
   $('#div2').addClass('hidden');
   $('#div1').removeClass('hidden');
})
$('#btn2').click(function(){
   $('#div1').addClass('hidden');
   $('#div2').removeClass('hidden');
}) 
```

这是一个**[演示](http://jsfiddle.net/G69EJ/3/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:51:30.090

请将您的 HTML 更改为：

```
<button id="btn1" onclick="ShowHideDiv(this);"> button1</button>
<button id="btn2" onclick="ShowHideDiv(this);"> button</button>

<div id="div1" class='divShowHide'> content of button 1 </div>
<div id="div2" class='divShowHide'> content of button 2</div> 
```

现在试试这个代码：

```
 firstCall this function on domready:

 $(document).on('click',function(){
      $('.divShowHide').fadeOut(30);
 });

function ShowHideDiv(divId){

   $('.divShowHide').fadeOut(3000);
   $(divId).fadeIn(3000);

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:15:19.763

您可以使用`onclick`按钮上的事件。

```
<button id="button1" onclick="ShowHideDiv(this);">button1</button>
<button id="button2" onclick="ShowHideDiv(this);">button2</button>
<div id="div1"> content of button 1 </div>
<div id="div2" style="display:hidden"> content of button 2</div> 
```

在脚本标签中，可以使用该功能。

```
function ShowHide(element)
{
   if ($(element).attr("id") == "button1")
   {
      $("#div1").fadeIn(3000);
      $("#div2").fadeOut(3000);
   }
   else if ($(element).attr("id") == "button2")
   {
      $("#div2").fadeIn(3000);
      $("#div1").fadeOut(3000);
   }
} 
```

如果要隐藏除一个以外的所有 div，可以使用类似于以下的代码：

```
$("div").fadeOut(3000); 
```

这将隐藏所有的div。
然后这将显示正确的 div：

```
$("#divId").fadeIn(3000); 
```

在 divId 中使用正确的 div id

# node.js - 如何完全破坏 socket.io 连接？

> ID：15917414
> 
> 赞同：1
> 
> 时间：2013-04-10T05:10:30.960
> 
> 标签：node.js, sockets, socket.io

我正在从 Socket.io 和 Node.js 创建一个浏览器聊天。一切都运行顺利，但我似乎在断开套接字时遇到了问题。当我运行`socket.disconnet();`时，服务器运行`socket.on("disconnect",`事件，但它实际上并没有从内部侦听器中删除套接字。

当我`socket.disconnect();`在套接字上运行时，套接字不再接收任何新消息，但是当“断开连接”的用户发送消息时，服务器接收并将其发送回所有客户端。我想创建一个正确的`/kick`命令，但是当我必须重组所有代码以适应一个简单的功能时，这很困难。

`socket.connection.destroy();`、`socket.end();`和等命令`socket.transport.destroy();`无效且未定义。有没有人有什么建议？`shutup`我已经解决这个问题好几天了，除了为套接字设置一个布尔值并告诉消息事件忽略特定的套接字之外，我没有找到任何答案。这是最好的方法吗？如果用户开始编辑 javascript 代码并且我需要一种从客户端接收其他事件的方法，会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T09:18:43.947

好吧，您可以查看套接字是否已连接。如果套接字已连接，您可以发出数据，反之亦然。：） 希望能帮助到你..！

```
YourProject.sockets.on('connection',function(socket){     
  setInterval(function(){   
    if(!socket.disconnected){
      socket.emit('entrance',{message:'Hey Bro'}); 
    }      
  },10000);        
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T05:13:19.293

您是否尝试过中断线程？这应该以异常结束所有 I/O 操作。

# mysql - VB.NET 中的登录表单出现问题

> ID：15917418
> 
> 赞同：0
> 
> 时间：2013-04-10T05:10:51.103
> 
> 标签：mysql, vb.net

好的，所以这是我在 vb.net 中工作的程序的一部分，它应该做的是进入我的 MYSQL 数据库并检查用户输入的内容与数据库中的用户名/密码匹配（简单登录）但它是不工作，它在第一个 if 语句处停止，我不知道为什么，但每次都会遇到问题。我在messagebox的每一行都输入了以解决问题，所以我知道if语句有问题

```
 Dim rdr As MySqlDataReader = Nothing
    Myconnection = "Server=LocalHost; database=vb; user=root; password=tro63jans; "
    db_con.ConnectionString = Myconnection
    Dim cmd As New MySqlCommand("SELECT * FROM login", db_con)

    Try
        db_con.Open()
        rdr = cmd.ExecuteReader()

        Dim found As Boolean = False

        While rdr.Read()

            If username.ToUpper() = DirectCast(rdr("username"), String) Then

                If password = DirectCast(rdr("password"), String) Then

                    found = True
                    MessageBox.Show("you are log in")
                    Exit While

                Else

                    MessageBox.Show("username and password do not match", "Error")
                    txtpassword.Focus()

                End If

                If found Then

                    MessageBox.Show("user name not found", "error")
                    txtusername.Focus()
                    txtpassword.Focus()
                    Exit While

                End If

            Else

                If found Then
                    MessageBox.Show("User name not found", "error")
                    txtusername.Focus()

                End If
            End If
        End While 
```

# java - 无法在android中使用cachingHttpClient缓存HttpResponse

> ID：15917427
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:11:24.010
> 
> 标签：java, android

```
public class CacheDemo {

public static void main(String[] args) {
    CacheConfig cacheConfig = new CacheConfig();
    cacheConfig.setMaxCacheEntries(1000);
    cacheConfig.setMaxObjectSizeBytes(1024 * 1024);

    HttpClient cachingClient = new CachingHttpClient(new DefaultHttpClient(), cacheConfig);

    HttpContext localContext = new BasicHttpContext();

    sendRequest(cachingClient, localContext);
    CacheResponseStatus responseStatus = (CacheResponseStatus) localContext.getAttribute(
            CachingHttpClient.CACHE_RESPONSE_STATUS);
    checkResponse(responseStatus);

    sendRequest(cachingClient, localContext);
    responseStatus = (CacheResponseStatus) localContext.getAttribute(
            CachingHttpClient.CACHE_RESPONSE_STATUS);
    checkResponse(responseStatus);
}

static void sendRequest(HttpClient cachingClient, HttpContext localContext) {
    HttpGet httpget = new HttpGet("http://www.mydomain.com/content/");
    HttpResponse response = null;
    try {
        response = cachingClient.execute(httpget, localContext);
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    HttpEntity entity = response.getEntity();
    try {
        EntityUtils.consume(entity);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

static void checkResponse(CacheResponseStatus responseStatus) {
    switch (responseStatus) {
        case CACHE_HIT:
            System.out.println("A response was generated from the cache with no requests "
                    + "sent upstream");
            break;
        case CACHE_MODULE_RESPONSE:
            System.out.println("The response was generated directly by the caching module");
            break;
        case CACHE_MISS:
            System.out.println("The response came from an upstream server");
            break;
        case VALIDATED:
            System.out.println("The response was generated from the cache after validating "
                    + "the entry with the origin server");
            break;
    }
}

} 
```

它不适合我。

每次它从服务器获取数据，而不是从缓存中获取数据。

我正在使用 jar `"httpclient-cache-4.1-beta1"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:17:07.683

你还没有向我们展示你的 HTTP 服务器发生了什么。mydomain.com/content 上的服务是否在 HTTP 响应上设置了正确的 Cache-Control 标头？要使缓存起作用，您需要让 HTTP 服务器或 Web 应用程序指示数据是否可以缓存，以及数据可以使用适当的标头缓存的长度。

此外，检查 CachingHttpClient 上记录的 API 以查看它期望来自 Web 服务器的标头。

# javascript - 使用 Javascript 显示表格会在 for 循环内部中断

> ID：15917428
> 
> 赞同：0
> 
> 时间：2013-04-10T05:11:32.573
> 
> 标签：javascript, html, dom

我有一个使用 Javascript 填充表格的代码：

```
var myResponse = document.getElementById("jsonPlaceHolder");
myResponse.innerHTML += "<table border=1> <tr> <td> User Id </td> <td> Question </td> <td> Link Question </td>  </tr>";
for (var i = 0; i < 25; i++) {
    myResponse.innerHTML += "<tr>"
    myResponse.innerHTML += "<td>" + jsonObj[i]["user_id"] + "</td>";
    myResponse.innerHTML += "<td>" + jsonObj[i]["text"] + "</td>";
    myResponse.innerHTML += "</tr>"
}
myResponse.innerHTML += "</table>"; 
```

这段代码的问题是当我运行这个表时没有在 for 循环中继续。如果我添加

```
 myResponse.innerHTML += "<table><tr>" 
```

在我的 for 循环中，创建了表。这不是有点奇怪吗，

因为我正在使用`+=`添加到 DOM 元素的当前*innerHTML*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:20:02.763

关于innerHTML 最容易被误解的事情之一源于API 的设计方式。它重载了 + 和 = 运算符来执行 DOM 插入。这使程序员误以为它只是在执行字符串操作，而实际上 innerHTML 的行为更像是一个函数而不是一个变量。如果innerHTML 是这样设计的，人们就不会那么困惑了：

element.innerHTML('这里有一些**html** '); 不幸的是，更改 API 为时已晚，因此我们必须了解它实际上是一个 API，而不仅仅是一个属性/变量。

当您修改 innerHTML 时，它会触发对浏览器 HTML 编译器的调用。它与编译您的 html 文件/文档的编译器相同。innerHTML 调用的 HTML 编译器没有什么特别之处。因此，无论您可以对 html 文件做什么，都可以将其传递给 innerHTML（一个例外是嵌入式 javascript 不会被执行——可能是出于安全原因）。

从浏览器开发人员的角度来看，这是有道理的。为什么在浏览器中包含两个单独的 HTML 编译器？特别是考虑到 HTML 编译器是庞大而复杂的野兽这一事实。

不利的一面是，处理不完整的 HTML 的方式与处理 html 文档的方式相同。对于不在表格内的元素，大多数浏览器都会简单地将其剥离（正如您自己观察到的那样）。这本质上就是您想要做的 - 创建无效/不完整的 HTML。

解决方案是提供`innerHTML`完整的 HTML：

```
 var htmlString = "<table border=1> <tr> <td> User Id </td> <td> Question </td> <td> Link Question </td>  </tr>";
    for (var i = 0; i < 25; i++) {
        htmlString  += "<tr>"
        htmlString  += "<td>" + jsonObj[i]["user_id"] + "</td>";
        htmlString  += "<td>" + jsonObj[i]["text"] + "</td>";
        htmlString  += "</tr>"
    }
    htmlString += "</table>"
    myResponse.innerHTML += htmlString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:25:52.820

使用 DOM API 来操作 DOM：

```
var myResponse = document.getElementById("jsonPlaceHolder");
var table = document.createElement('table'),
    headings = ["User ID", "Question", "Link Question"];
table.style.border = "1";

var r = table.insertRow(-1);

for (var i = 0; i < 3; i++) {
    (function(){
        return r.insertCell(-1);
    })().innerHTML = heading[i];
}

for (var i = 0; i < 25; i++) {
    r = table.insertRow(-1);

    var userid = r.insertCell(-1),
        text = r.insertCell(-1);

    userid.innerHTML = jsonObj[i]["user_id"];
    text.innerHTML = jsonObj[i]["text"];
}

myResponse.appendChild(table); 
```

# arrays - jsonp返回号

> ID：15917435
> 
> 赞同：0
> 
> 时间：2013-04-10T05:12:01.007
> 
> 标签：arrays, numbers, jsonp

嗨，在我的 succes 函数中，我试图从我的回调 jsonp 函数返回 6 个数字并传递给一个 var，例如；我没有想法thnx P

```
for (var bw=0; bw < bw_numbers.length; x++) {

$('#_pnl' + bw).innerHTML = bw_numbers[bw];
                            }

jsonCallback(
   {
         "bw_numbers": [10, 12, 15, 24, 27, 41]

     }

); 
```

var url = ' [http://www.blabla.com/ajax/bw_results_latest.json?callback=](http://www.blabla.com/ajax/bw_results_latest.json?callback=) ?';

```
 $.ajax({
                    type: 'GET',
                    url: url,
                    async: false,
                    jsonpCallback: 'jsonCallback',
                    contentType: "application/json",
                    dataType: 'jsonp',

                    success: function(json) {

            //do my array thing!!!!         

                        },
                        error: function(e) {
                            alert(e.message);
                            }
                 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:31:59.587

您需要编写 jsonCallBack 函数

```
$.ajax({
                type: 'GET',
                url: url,
                async: false,
                contentType: "application/json",
                dataType: 'jsonp',
                error: function(e) {
                        alert(e.message);
                        }
             });
function jsonCallBack(data)
{ alert(data); } 
```

如果你回来喜欢

```
jsonCallback([10, 12, 15, 24, 27, 41]) 
```

您可以从 javascript 将其作为数组访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:08:56.413

我现在明白了，我不确定 json 数据是否能够用作数组，它是，这里是代码！谢谢P

var url = ' [http://www.blabla.com/ajax/results_latest.json?callback=](http://www.blabla.com/ajax/results_latest.json?callback=) ?';

```
 $.ajax({
                    type: 'GET',
                    url: url,
                    processData: true,
                    async: false,
                    jsonpCallback: 'jsonCallback',
                    contentType: "application/json",
                    dataType: 'jsonp',

                    success: function (data) {
                        processData(data);
                        }
                    });

                function processData(data){

                    for (var x=0; x < data.bw_numbers.length; x++) {
                        document.getElementById('_pnl' + x).innerHTML = data.bw_numbers[x];
                     }

                } 
```

# ruby-on-rails - respond_to 实际上返回了什么？

> ID：15917439
> 
> 赞同：0
> 
> 时间：2013-04-10T05:12:34.377
> 
> 标签：ruby-on-rails

```
respond_to do |format|
  format.html { render :html => @something }
  format.json { render :json => @something }
  format.xml { render :xml => @something }
end 
```

这里我们有三种不同的格式：html、json、xml。那么实际上返回的是哪一个呢？我们是否有以 .html、.xml、.json 结尾的三个不同文件？或者换句话说，respond_to 是否渲染所有三个 html、json、xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:48:01.523

respond_to 是附加到 Controller 类（或者更确切地说，它的超类）的 Rails 辅助方法。它引用将发送到视图（将发送到浏览器）的响应。

您的示例中的块正在格式化数据 - 通过在块中传递“格式”参数 - 每当浏览器请求 html 或 json 数据时从控制器发送到视图。在rails中你也可以这样写

```
class PostsController < ApplicationController
  respond_to :html, :xml, :js

  def index
    @posts = Post.all

    respond_with(@posts)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:24:47.057

`respond_to`可以根据当前请求渲染这三个中的每一个。正确的响应不是返回的内容，`respond_to`而是实际呈现的内容。[你可以在这里](http://apidock.com/rails/ActionController/MimeResponds/respond_to)找到完整的解释

# java - JAVA窗体窗口关闭

> ID：15917446
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:13:15.540
> 
> 标签：java, swing, jframe

```
 this.setDefaultCloseOperation(this.DISPOSE_ON_CLOSE);
        this.addWindowListener(new WindowAdapter()
    {
      public void windowClosing(WindowEvent e)
      {
          new AddPatient().setVisible(false);
          new SearchPatient().setVisible(true);
      }
    }); 
```

上面的代码有问题。这是触发另一个JFrame的dispose和setVisible的正确方法吗？

有人可以告诉我这是正确的编码方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:15:26.167

当然。

```
frame.addWindowListener(new WindowAdapter()
{
  public void windowClosing(WindowEvent e)
  {
      //open other frame
  }
}); 
```

# pdf - Lotus Notes - 到达时自动将电子邮件导出为 PDF

> ID：15917448
> 
> 赞同：0
> 
> 时间：2013-04-10T05:13:20.293
> 
> 标签：pdf, export, lotus-domino, lotus

是否可以使用 Lotus Notes 8.5 编写一个程序（假设是代理）自动将电子邮件导出为 PDF 文档，其中文档的名称将是电子邮件的主题行？

我们可爱的 IT 人员告诉我，这将需要几个月的时间来调查、测试和实施。

当然有一个函数可以被调用来做到这一点？

谁能指出我可以阅读的教程或帮助文档等的方向，以便我可以获得更多信息，以便与我们的 IT 人员更权威地交谈。

然后，我打算将此信息交给 Domino 设计团队，要求他们构建功能（无需花费数月时间）。:-)

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:27:37.623

有一个名为 PD4ML 的第三方应用程序允许您导出为 PDF 格式。他们还提供了有关如何在 Notes 客户端中执行此操作的示例。

[http://www.pd4ml.com/lotus.htm](http://www.pd4ml.com/lotus.htm)

您需要创建一个在新邮件到达时运行的代理。

SearchDomino 上还有一些示例代码。

[http://searchdomino.techtarget.com/tip/Converting-Lotus-Notes-Domino-Web-pages-to-PDF-files-with-a-Java-agent](http://searchdomino.techtarget.com/tip/Converting-Lotus-Notes-Domino-Web-pages-to-PDF-files-with-a-Java-agent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:38:20.623

也可以使用替代选项，用户可以通过第三方 Lotus Notes to PDF 工具以 100% 安全的方式将 Lotus Notes 电子邮件保存为 PDF 格式。 [http://www.lotusnotestooutlookexpress.com/lotus-notes-export-email-to-pdf](http://www.lotusnotestooutlookexpress.com/lotus-notes-export-email-to-pdf)

您可以阅读 PDF 格式的电子邮件转换过程和其他有用的软件详细信息 [http://www.lotusnotestoexchange.com/guide-for-lotus-notes-to-pdf-conversion.pdf](http://www.lotusnotestoexchange.com/guide-for-lotus-notes-to-pdf-conversion.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T10:05:26.433

有一个“行业标准”工具可以将 Lotus Notes 文档导出为 PDF。这个工具是 Swing PDF 转换器。
请在此处查看：[http ://www.swingsoftware.com/pdf-converter/overview](http://www.swingsoftware.com/pdf-converter/overview)

Swing PDF Converter 支持 Lotus Notes 格式电子邮件 (RTF) 和 HTML - MIME 电子邮件转换为 PDF。
还有对 pdf 文档命名、单个文档转换、批量转换、文档归档选项的高级支持，甚至支持自动上传到 MS Sharepoint、Alfresco、Filenet 等文档存储库。

# c# - 当索引不包含在另一个列表中时，按索引从列表中删除

> ID：15917450
> 
> 赞同：0
> 
> 时间：2013-04-10T05:13:32.033
> 
> 标签：c#, list, perf

有没有办法让这段代码更有效率？

```
if (includeRows != null && includeRows.Count > 0)
{
    for (int i = aList.Count - 1; i >= 0; i--)
    {
        if (!includeRows.Exists(j => j == (i + 1)))
        {
            aList.RemoveAt(i);
            includeRows.Remove(i + 1);
        }
    }
} 
```

这就是我所做的，aList 包含对象而不是整数，因此需要列表中对象的索引。不确定 includeRows.Remove() 是否会降低或提高效率，includeRows 刚刚更改为 HashSet。

```
for (int i = aList.Count - 1; i >= 0; i--) {
                    if (!includeRows.Contains(i + 1) )
                    {
                        aList.RemoveAt(i);
                       // includeRows.Remove(i + 1);
                    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:33:00.393

这是一个使用 Linq 方法的简单[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)方法：

```
aList = aList.Intersect(includeRows).ToList(); 
```

但是为了获得更好的性能，您可以[`RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)改用

```
aList.RemoveAll(i => !includeRows.Exists(j => j == (i + 1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:33:22.087

基于 pswg 的回答，我会这样做：

```
HashSet<int> includeRowsFaster = new HashSet<int>(includeRows);
aList.RemoveAll(i => !includeRowsFaster.Contains(i + 1)); 
```

以获得最有效的性能和可读性。在 includeRows 中查找元素是 O(n) 复杂度操作。您可以通过使用哈希集而不是向量（数组或列表）实现将其显着减少到 O(log(n))。

有关 Hashset 与 List 性能的讨论，请参阅此内容：[https ://stackoverflow.com/a/10762995/390330](https://stackoverflow.com/a/10762995/390330)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:34:01.863

```
aList = aList.Intersect(includeRows).ToList<int>(); 
```

# javascript - 在 HTML 中将悬停传递给下面的元素

> ID：15917451
> 
> 赞同：1
> 
> 时间：2013-04-10T05:13:32.427
> 
> 标签：javascript, html, css

我在一个透明元素下面有几个元素（它里面有一些可见的东西）。但似乎填充不允许鼠标事件通过。我有它，所以当鼠标悬停在一个较低的元素上时，它会改变颜色，然后当它离开时，它会慢慢变回原来的颜色。但是对于上面的元素覆盖它们的区域，悬停不会通过。有谁知道如何让这些事件传递到较低的元素？

HTML

```
<body>
<div id="background">
    <canvas class="gridBox" id="grid1x1"></canvas>
    <canvas class="gridBox" id="grid2x1"></canvas>
    <canvas class="gridBox" id="grid3x1"></canvas>
    ...
    <canvas class="gridBox" id="grid18x8"></canvas>
</div>
<div id="header">
    <p id="logo"><img src="img/logo.png"></p>
</div>  
<div id="content">
    <p>Nothing here yet</p>
</div>  
<div id="footer">
</div>
</body> 
```

CSS

```
body,html{
padding:0;
margin:0;
}
#background{
padding:0;
margin:0;
width:110%;
height:100%;
z-index:-1;
position:fixed;
top:0;
left:0;
overflow:visible;
line-height: 0;
}
.gridBox{
margin:0;
padding:0;
height:50px;
width:50px;
border:1px solid #000000;
background:black;
transition:background-color 1s linear;
}
.gridBox:hover{
background-color:green;
transition:background-color 0s linear;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T05:40:06.363

我认为您正在寻找的是：

```
.gridBox:hover, .gridBox:hover * {
  background-color:green;
  transition:background-color 0s linear;
} 
```

它只是在用户悬停 .gridBox 的情况下选择 .gridBox 加上任何子项

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T05:22:51.900

由于您没有发布代码，我猜您正在使用灯箱、悬停父元素和制作动画之类的东西。我建议你看看这个问题已经解决了 [jQuery hover problem due to z-index](https://stackoverflow.com/questions/3517427/jquery-hover-problem-due-to-z-index)

# excel - 有没有办法在有或没有 VBA 的情况下在 Access 和 Excel 之间建立双向同步？

> ID：15917452
> 
> 赞同：0
> 
> 时间：2013-04-10T05:13:36.700
> 
> 标签：excel, vba, ms-access

我想在 Excel 中操作从 Access 导入的数据，并将其他数据发送回 Access mdb 数据库。这可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:15:06.093

如果您正在寻找一个起点，您可以：

```
1\. Record a Macro
2\. Do one manual import and manipulation
3\. Stop the recording 
```

基本上你已经掌握了剩下的代码的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:18:47.280

Microsoft Office 提供了这两个数据库管理系统的访问权限，而 Excel 在数据库中都起着至关重要的作用。是的，您可以轻松地在 excel 中导入访问权限，而无需任何具有相同数据库的 VBA 代码。

通过阅读文章，我得到了以下查询的答案，并且很容易[http://gallery.technet.microsoft.com/Access-To-Excel-Converter-00660936](http://gallery.technet.microsoft.com/Access-To-Excel-Converter-00660936)

将数据导入excel工作表。你只需要阅读文章。

# c - 将 m 位设置为 n 位

> ID：15917454
> 
> 赞同：0
> 
> 时间：2013-04-10T05:14:03.977
> 
> 标签：c, bit-manipulation

我有一个`32-bit`数字并且不使用 for 循环，我想将`m`位设置**为** `n`位。

例如：

`m`位可能是`2nd`or`5th`或`9th`or `10th`。
`n`位可能是 `22nd`或`27`位`11th`。

我假设（m < n）。

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T06:06:16.870

假设位从 LSB 到 MSB 编号：

```
BIT NUMBER    31                                     0
               ▼                                     ▼
number bits    0000 0000 0000 0000 0000 0000 0001 0101 
               ▲    ^           ^                    ▲ 
              MSB   |           |                   LSB
                    |           | 
                   n=27        m=17

LSB - Least Significant Bit (numbered 0)
MSB - Most  Significant Bit (numbered 31) 
```

在上图中，我展示了位是如何从 LSB 到 MSB 编号的。`n`注意和`m`where的相对位置`n > m`。

* * *

## 将（全一）位从 n 设置为 m

* * *

在 32 位数字中设置**`1`**从位置**`m`**到**`n`**(where ) 的所有位。`n > m`您需要一个 32 位掩码，其中所有位为**`1`**from `n`，`m`其余位为**`0`**.

例如，要设置从**`m=17`**到的所有位，**`n=27`**我们需要像这样的掩码：

```
BIT NUMBER    31   n=27        m=17                  0
               ▼    ▼           ▼                    ▼
mask =         0000 1111 1111 1110 0000 0000 0000 0000 
```

如果我们有任何 32 位数字，通过按位 OR ( **`|`**) 与该数字，我们可以将**`1`**所有位设置为从`m`到`n`。所有其他位将保持不变。

**记住**OR 的工作方式如下：

```
x | 1 = 1   , and 
x | 0 = x 
```

其中 `x`value 可以是`1`或`0`。

所以通过这样做：

```
 num32bit = num32bit | mask; 
```

我们可以设置`n`为`m`位`1`，其余位将保持不变。例如，假设，`num32bit`= `0011 1001 1000 0000 0111 1001 0010 1101`，

然后：

```
0011 1001 1000 0000 0111 1001 0010 1101   <--- num32bit
0000 1111 1111 1110 0000 0000 0000 0000   <--- mask     
----------------------------------------  ---------------Bitwise OR operation  
0011 1111 1111 1110 0111 1001 0010 1101   <--- new number  
---- ▲           ▲  -------------------
     |-----------|   this bits are from `num32bit`
      all bits are   
      1 here 
```

这就是我的意思：

```
 num32bit = num32bit | mask; 
```

##如何制作面具？

要制作一个所有位都是`1`from`n`到`m`其他位是 的掩码`0`，我们需要三个步骤：

1.  **`Create mask_n`**：右侧的所有位`n=27`都是一

    ```
     BIT NUMBER     31  n=27                              0
                    ▼    ▼                                ▼
     mask_27=       0000 1111 1111 1111 1111 1111 1111 1111 
    ```

    在编程中，这可以通过右移 ( `>>`) 4 次来创建。

    而且，**为什么`4`？**

    ```
     4 = 32 - n - 1  ==> 31 - 27 ==> 4 
    ```

    另请 注意：`~`的`0`补[码](/q/2429479)[（](/q/15457893#15457908)

2.  **`Create mask_m`**：左侧的所有位`m=17`都是一。

    ```
     BIT NUMBER    31              m=17                  0
                   ▼                ▼                    ▼
     mask_17       1111 1111 1111 1110 0000 0000 0000 0000 
    ```

3.  **`Create mask`**: 按位 AND 到: `mask = mask_n & mask_m`:

    ```
     mask =         0000 1111 1111 1110 0000 0000 0000 0000
                         ▲           ▲
     BIT NUMBER          27          17 
    ```

而且，下面是我的`getMask(n, m)`函数，它返回一个在步骤 3 中看起来像掩码的无符号数。

```
#define BYTE 8
typedef char byte; // Bit_sizeof(char) == BYTE
unsigned getMask(unsigned n,
              unsigned m){
    byte noOfBits = sizeof(unsigned) * BYTE;
    unsigned mask_n = ((unsigned)~0u) >> (noOfBits - n - 1),
             mask_m = (~0u) << (noOfBits - m),
             mask = mask_n & mask_m; // bitwise & of 2 sub masks
    return mask;
} 
```

为了测试我`getMask()`还写了一个`main()`函数和一个 binary() 函数，它以二进制格式打印给定的数字。

```
void binary(unsigned);
int main(){
    unsigned num32bit = 964720941u;
    unsigned mask = 0u;
    unsigned rsult32bit;
    int i = 51;     
    mask = getMask(27, 17);
    rsult32bit  = num32bit | mask;  //set n to m bits 1
    printf("\nSize of int is = %ld bits, and " 
           "Size of unsigned = %ld e.g.\n", sizeof(int) * BYTE,
                                            sizeof(unsigned) * BYTE);
    printf("dec= %-4u, bin= ", 21);
    binary(21);
    printf("\n\n%s %d\n\t   ", "num32bit =", num32bit); 
    binary(num32bit);
    printf("mask\t   "); 
    binary(mask);
    while(i--) printf("-");
    printf("\n\t   "); 
    binary(rsult32bit);
    printf("\n");
    return EXIT_SUCCESS;
}
void binary(unsigned dec){
  int i = 0,
      left = sizeof(unsigned) * BYTE - 1;
  for(i = 0; left >= 0; left--, i++){
    printf("%d", !!(dec & ( 1 << left )));
    if(!((i + 1) % 4)) printf(" ");
  }
  printf("\n");
} 
```

该测试代码运行如下（输出与我在上面的示例中解释的完全相同）：

```
Output of code: 
-----------------
$ gcc b.c 
:~$ ./a.out 

Size of int is = 32 bits, and Size of unsigned = 32 e.g.
dec= 21  , bin= 0000 0000 0000 0000 0000 0000 0001 0101 

num32bit = 964720941
           0011 1001 1000 0000 0111 1001 0010 1101 
mask       0000 1111 1111 1110 0000 0000 0000 0000 
---------------------------------------------------
           0011 1111 1111 1110 0111 1001 0010 1101 
:~$ 
```

此外，您可以在两个语句中以较短的形式编写 `getMask()`函数，如下所示：

```
unsigned getMask(unsigned n,
                 unsigned m){
    byte noOfBits = sizeof(unsigned) * BYTE;
    return ((unsigned)~0u >> (noOfBits - n - 1)) &
           (~0u << (noOfBits -m));
} 
```

^(**注意：**我删除了多余的括号，以清理代码。尽管您永远不需要记住运算符的优先级，因为您可以使用 覆盖优先级`()`，但优秀的程序员总是参考优先级表来编写整洁的代码。)

更好的方法可能是编写如下宏：

```
#define _NO_OF_BITS sizeof(unsigned) * CHAR_BIT
#define MASK(n, m)  (((unsigned)~0u >> (_NO_OF_BITS - n - 1)) & \
                    (~0u << (_NO_OF_BITS - m))) 
```

并调用：

```
result32bit  = num32bit | MASK(27, 17); 
```

* * *

## 将（全零）位从 n 重置为 m

* * *

要将所有位从 n 重置为 m = 0，其余保持不变，您只需要 的补码 ( `~`) `mask`。

```
mask      0000 1111 1111 1111 1000 0000 0000 0000 
~mask     1111 0000 0000 0000 0111 1111 1111 1111   <-- complement 
```

`|`还需要设置零而不是运算符`&`。

记住**AND** 的工作方式如下：

```
x & 0 = 0   , and 
x & 0 = 0 
```

其中`x`值可以是 1 或 0。

因为我们已经有了一个按位补码`~`运算符和和 `&`运算符，我们只需要这样做：

```
rsult32bit  = num32bit & ~MASK(27, 17); 
```

它会像这样工作：

```
num32bit = 964720941
       0011 1001 1000 0000 0111 1001 0010 1101 
mask   1111 0000 0000 0000 0111 1111 1111 1111 
---------------------------------------------------
       0011 0000 0000 0000 0111 1001 0010 1101 
```

# android - 如何从片段活动中的片段访问 ImageButton？

> ID：15917456
> 
> 赞同：0
> 
> 时间：2013-04-10T05:14:14.020
> 
> 标签：android, android-fragments

我正在使用 ViewPager 并使用**FragmentPage Adapter**在 Fragment Activity 中加载多个片段。我想访问一个包含**ImageButton**的片段。任何人都可以帮助我从片段活动中的片段访问**Imagebutton吗？**

这是我的代码：

**片段活动**

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_gallery);
        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (CustomPager) findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
        mPager.setOnPageChangeListener(this);

       pagerLayout = (LinearLayout) findViewById(R.id.tour_pager_lay);
       mPageControl = (PageControl)findViewById(R.id.horizontal_pager);
       mPageControl.addPagerControl(3);
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                return new ImageFragment(R.drawable.landing_logo);
            case 1:
                return new ImageFragment(R.drawable.welcome_postit);
            case 2:

                return new LoginFragment();
            case 4:
                return new RegisterFragment();

            default:
                return null;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:32:28.527

假设您的 ImageButton 在您的 RegisterFragment 上，那么您可以执行以下操作：

```
RegisterFragment tmp = ((RegisterFragment) ((MyAdapter) mPager.getAdapter()).instantiateItem(mPager, 4));

//your ImageButton should be public or you can create a getter or something, I assume that it's public
tmp.imageButton.setText("foo"); 
```

# css - 扩展到最大的包含“定位”块？

> ID：15917460
> 
> 赞同：0
> 
> 时间：2013-04-10T05:14:38.127
> 
> 标签：css

在容器中，您可以*以任何方式*将两个块*放在彼此上方*（例如绝对）并使容器扩展到最大的大小/高度吗？

如果使用`position: absolute`容器没有扩展到定位元素的大小。

*有没有办法用 CSS 获得这种效果？*

* * *

说明性（已失效）示例：

```
<div class="wrap">
    <div class="foo">foo</div>
    <div class="bar">bar</div>
</div> 
```

CSS：

```
.wrap{
    position: relative;
}
.foo{
    height: 40px;
}
.bar{
    height: 60px;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
} 
```

jsfiddle：http: [//jsfiddle.net/qjFR9/](http://jsfiddle.net/qjFR9/)

我想定位`.bar`在`.foo`（位置`.bar`好像没有`.foo`）并且`.wrap`应该是最大孩子的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:55:29.487

如果容器的宽度是固定的，则这样的解决方案有效：

```
<div class="wrap">
    <div class="foo"><div class="inner">foo</div></div>
    <div class="bar"><div class="inner">bar</div></div>
</div> 
```

CSS：

```
.wrap{
    overflow: auto;
}
.wrap,
.wrap .inner{
    width: 300px;
}
.wrap > div{
    float: left;
    width: 0;
}

/* test: .wrap expands to fit the .inner content */
.bar > .inner{
    height: 60px;
} 
```

[jsFiddle 演示](http://jsfiddle.net/qjFR9/1/)。

但这不适用于非固定宽度的包装器。

有没有更好的办法？

# html - 在 Jekyll HTML 中嵌入 Markdown

> ID：15917463
> 
> 赞同：45
> 
> 时间：2013-04-10T05:14:57.237
> 
> 标签：html, markdown, jekyll

我试图在使用 Jekyll 时将 markdown 嵌套在 HTML 文件中。有没有办法实现以下目标？

```
# index.html

---
layout: default
---

<p>[Stack Overflow](http://www.stackoverflow.com)</p> 
```

注意：我知道我可以这样做。

```
# index.html

---
layout: default
---

<p><a href="http://www.stackoverflow.com">Stack Overflow</a></p> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2014-04-30T09:15:44.527

如果您使用 Kramdown，根据[他们的文档](http://kramdown.gettalong.org/syntax.html#html-blocks)，您可以这样做：

```
<div markdown="1">
   My text with **markdown** syntax
</div> 
```

这样，文本中的文本将`div`呈现为降价。

确保使用文件的`.md`或`.markdown`扩展名，因为`.html`文件不会发送到 Kramdown 进行处理！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-30T09:35:17.617

以下是使用[Jekyll 插件](http://jekyllrb.com/docs/plugins/)定义降价块的方法：

```
module Jekyll
  class MarkdownBlock < Liquid::Block
    def initialize(tag_name, text, tokens)
      super
    end
    require "kramdown"
    def render(context)
      content = super
      "#{Kramdown::Document.new(content).to_html}"
    end
  end
end
Liquid::Template.register_tag('markdown', Jekyll::MarkdownBlock) 
```

（要将此片段安装为插件，请将其放在源站点根目录`*.rb`下的文件中）`_plugins`

然后，像这样使用它：

```
{% markdown %}
[Stack Overflow](http://www.stackoverflow.com)
{% endmarkdown %} 
```

*编辑*：请参阅@Cristian 的答案以获得更好的解决方案！如果您使用的是 Kramdown（因为您使用的是 Jekyll，所以很可能是这种情况），您可以使用它的功能在`div`'s 中使用`markdown="1"`属性呈现 markdown。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-11-22T10:26:55.670

从当前的 Jekyll 3.6.2 开始，使用以下两个选项可以简单得多：

[![在此处输入图像描述](https://i.stack.imgur.com/RrBQi.png)](https://i.stack.imgur.com/RrBQi.png)

```
<div>
{{ "## Yes, this renders as markdown" | markdownify }}
</div> 
```

*注意降价属性：*

```
<div markdown="1">
## some markdown
inside some html. `snippet` _italic_ **bold**
</div> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-11T03:17:59.607

@sunny-juneja，查看名为的液体扩展过滤器`markdownify`：

[https://github.com/mojombo/jekyll/wiki/liquid-extensions#markdownify](https://github.com/mojombo/jekyll/wiki/liquid-extensions#markdownify)

像这样使用它：

`<p>{{ '[Stack Overflow](http://www.stackoverflow.com)' | markdownify }}</p>`

*在Output*标记内的字符串周围放置单引号或双引号。

在 Jekyll 1.0.0beta3 上为我工作

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-01T15:32:47.257

要`markdown-formatted`在 Jekyll 页面中将字符串转换为 HTML，`THREE WAYS`可以选择如下：

## 1.克拉姆当：

如果您使用**Kramdown**，根据[他们的文档](https://kramdown.gettalong.org/syntax.html#html-blocks)，您可以这样做：

```
<div markdown="1">
## Some Markdown Title
Let's have a look. `snippet` _italic_ **bold**
</div> 
```

`markdown`属性：

*   如果 HTML 标记具有属性 markdown="0"，则该标记被解析为原始 HTML 块。
*   如果 HTML 标记具有属性 markdown="1"，则使用该标记中解析语法的默认机制。
*   如果 HTML 标记具有属性 markdown="block"，则标记的内容被解析为块级元素。
*   如果 HTML 标记具有属性 markdown="span"，则标记的内容将被解析为跨度级别元素。

要求：

*   降价内容需要在`DIV tag`.
*   确保使用文件的`.md`或`.markdown`扩展名，因为 .html 文件不会发送到 Kramdown 进行处理）

## 2.液体延伸过滤器

有一个名为**[markdownify](https://jekyllrb.com/docs/liquid/filters/)**的液体扩展过滤器，它还可以帮助您将 Markdown 格式的字符串转换为 HTML。

```
<div>
{{ "Renders as markdown. `snippet` _italic_ **bold**" | markdownify }}
</div> 
```

## 3\. Jekyll 插件：

> jekyll-spaceship - 一个 Jekyll 插件，为 table、mathjax、mermaid、plantuml、emoji、youtube、vimeo、dailymotion 等提供强大的支持。

[https://github.com/jeffreytse/jekyll-spaceship](https://github.com/jeffreytse/jekyll-spaceship)

使用这个插件，很容易在 HTML 中编写 markdown：

```
<script type="text/markdown">
# Hybrid HTML with Markdown is a not bad choice ^\_^

##2\. Table Usage

| :        Fruits \|\| Food       : |||
| :--------- | :-------- | :--------  |
| Apple      | :  Apple :| Apple      \
| Banana     |   Banana  | Banana     \
| Orange     |   Orange  | Orange     |
| :   Rowspan is 4    : || How's it?  |
|^^    A. Peach         ||   1\. Fine :|
|^^    B. Orange        ||^^ 2\. Bad   |
|^^    C. Banana        ||  It's OK!  |

## PlantUML Usage

@startuml
Bob -> Alice : hello
@enduml

## Video Usage

![](https://www.youtube.com/watch?v=Ptk_1Dc2iPY)
</script> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-30T14:51:34.060

我最近花了太多时间尝试做类似的事情。@JT 的第二个要点，引用`markdownify`，最终让我朝着正确的方向前进。

我的`_layouts`目录中有几个不同的布局。其中之一，我想在页面内容之前添加一点“索引”。如果我直接从页面或帖子中调用它，那么索引作为部分索引可以完美地工作，但在尝试将其添加到布局时却不行。

这是我所拥有的：

```
---
layout: default
---

<div class="table-of-contents">

  {% include series_index.md %}

  {{ content }}
</div> 
```

但这行不通。不是在页面上呈现 HTML，而是`include`吐出降价，然后作为丑陋的降价块添加到页面中，而不是将降价呈现为 HTML。

所以，我试着附和`| markdownify`这个`include`声明，就像这样：

```
 {% include jekyll-bug-fix-index.md | markdownify %} 
```

那没有用。

## 解决方案，使用变量、捕获“块”和 markdownify

所以，我*捕获*了降价，保存到一个变量中，然后用液体`markdownify`标签渲染了这个变量：

```
 {% capture index %}
  {% include series_index.md %}
  {% endcapture %}

  {{ index | markdownify }} 
```

这行得通！Markdown 在我的页面上呈现为 HTML，一切正常。

我毫不怀疑这是非常规的，我希望有一天能学到更好的解决方案，但这对我来说 100% 已经足够好了，我想分享一下，以便其他人可以从中受益。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-10T05:24:37.967

看看[Paul Irish 的 Gist](https://gist.github.com/paulirish/1343518)的 JS 代码，它可以将你的页面部分从 Markdown 解释为 HTML。

# php - 从 cURL 页面中删除口音

> ID：15917465
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:14:58.497
> 
> 标签：php, curl, character-encoding

我有一个简单的函数，它使用 cURL 来抓取一个页面并拉出名字和姓氏：

```
$base_url = 'http://www.behindthename.com/random/random.php';
$query = http_build_query($params);
$url = $base_url . '?' . $query;

$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);         
$result = curl_exec($curl);                        
curl_close($curl); 
```

示例 $params 数组可能如下所示：

```
Array (
    [number] => 1
    [gender] => f
    [surname] =>
    [randomsurname] => yes
    [all] => no
    [usage_lth] => 1
) 
```

一些回来的名字中有重音（这很好，我希望发生这种情况）。但是，当我对名称执行某些操作时，我需要删除重音符号。

我曾尝试使用[Wordpress 的 remove_accents 函数](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/formatting.php#L607)，但它似乎从未通过第一个 !preg_match 条件。条件总是计算为真，原始字符串只会被返回。

但是，如果我复制粘贴一个带有重音符号的名称，对其进行硬编码，然后在其上运行 remove_accents，一切正常。例如：

```
$name = 'Þýri';
echo remove_accents($name); 
```

返回'THyri'。

我不太明白，因为据我所知，curl_exec 的结果是 utf8，应该可以正常工作。

我尝试直接在 cURL 返回的结果上调用 remove_accents （以确保我提取名称的方法没有搞砸任何事情），但这也不起作用 - 重音仍然存在。

我也尝试删除 !preg_match 条件，在这种情况下，似乎_utf8 恢复为真，但重音仍然没有被删除。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:25:26.347

我认为您可以尝试使用 htmlentities，该函数会将带有重音符号的名称转换为它们各自的 html 代码，您可以在此处阅读文档：`http://php.net/manual/en/function.htmlentities.php`

使用此功能将进行隐蔽，例如：

```
$string = 'noè';

echo htmlentities($string); 
```

这将输出：

```
no&egrave; 
```

Wich 将被 html 读取为

```
noè 
```

否则，如果您只需要用普通字母替换重音，您可以使用 str_replace 函数，它将查找给定值并将其更改为目标值，这里是一个示例：

```
echo str_replace('è', 'e', $string); 
```

将输出

```
noe 
```

在这种情况下，您必须手动插入所有要替换的重音符号。

`UPDATED`

在你的情况下，你已经有你的重音的 html 代码，所以你可以解码它们然后与普通字母交换或用重音存储它们（这是可能的，取决于你的数据库编码（UTF-8）应该允许你存储它们

# asp.net - ASP.NET 客户端验证

> ID：15917467
> 
> 赞同：0
> 
> 时间：2013-04-10T05:15:08.013
> 
> 标签：asp.net, validation, client

我的 aspx 文件中有一个模式弹出窗口。我正在通过单击 Javascript 中的按钮在 Javascript 中进行代码验证。当验证成功时，弹出窗口应该关闭，当不成功时，它应该显示警告消息并**保留弹出窗口**。我如何在 Javascript 中执行此操作？

# c++ - 根据引号对字符串进行标记

> ID：15917468
> 
> 赞同：3
> 
> 时间：2013-04-10T05:15:08.503
> 
> 标签：c++

我正在尝试从文本文件中读取数据并根据引号拆分读取的行。例如

```
"Hi how" "are you" "thanks" 
```

预期产出

```
Hi how
are you
thanks 
```

我的代码：

```
getline(infile, line); 
ch = strdup(line.c_str());
ch1 = strtok(ch, " ");

while (ch1 != NULL)
{
    a3[i] = ch1;
    ch1 = strtok(NULL, " ");
    i++;
} 
```

我不知道要指定什么作为分隔符字符串。我正在使用`strtok()`拆分，但它失败了。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:27:44.897

请在[此处](http://www.cplusplus.com/reference/cstring/strtok/)查看示例代码。您应该向 strtok 提供 "\"" 作为分隔符字符串。例如，

```
ch1 = strtok (ch,"\""); 
```

可能您的问题与表示转义序列有关。请在[此处](http://en.wikipedia.org/wiki/Escape_sequences_in_C)查看字符的转义序列列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:54:54.540

给定您的输入: `"Hi how" "are you" "thanks"`，如果您使用`strtok`with`"\""`作为分隔符，它会将带引号的字符串之间的空格视为它们也是字符串，因此如果（例如）您打印出结果字符串，每行一个，由正方形包围括号，你会得到：

```
[Hi how]
[ ]
[are you]
[ ]
[thanks] 
```

即，每个引用字符串之间的空白字符本身被视为字符串。如果您提供的分隔符`strtok`是`" \""`（即，包括引号和空格），*则*不会发生，但它也会在引号字符串内的空格处中断。

假设你可以依赖你关心的每一个被引用的项目，你想跳过任何东西直到你得到一个引用，忽略这个引用，然后将数据读入你的输入字符串直到你得到另一个引用，然后重复整个过程。

# codeigniter - Codeigniter 编码/解码相同字符串的不同结果。普通的？

> ID：15917470
> 
> 赞同：1
> 
> 时间：2013-04-10T05:15:16.600
> 
> 标签：codeigniter, encryption

在我的自定义配置中，我有这样一行：

```
$config['encryption_key_posts'] ='vfy9SbKO!drtzwHkOvD46hGFedzaw3$l'; 
```

在自定义库中，我有：

```
class MyEncryption {

public $_CI;
public function __construct() {
    $this->_CI = & get_instance();
    $this->_CI->encrypt->set_cipher(MCRYPT_BLOWFISH);
    $this->_CI->encrypt->set_mode(MCRYPT_MODE_CBC);
}
function encode($str, $key) {
    return $this->_CI->encrypt->encode($str, $key);
}
function decode($str, $key) {
    return $this->_CI->encrypt->decode($str, $key);
    }
} 
```

我这样使用它：

```
encode($_POST['post_title'],config_item('encryption_key_posts')) 
```

和

```
decode($this->data['post']->post_title,config_item('encryption_key_posts')) 
```

我正在使用相同的 post_title = 'TEST' 对其进行测试，但我总是得到不同的结果，例如：

```
Gk16w123clh3RZdYbGZc8g==
L64cWTVSaxWf8xGVVCRbyQ==
Ox2H4xAizS9lsKEQHzxRgg== 
```

这是正常的吗？如果我将来移动到不同的服务器，我会有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:24:03.123

好吧，我会根据我的个人经验告诉你，使用 CodeIgniter 进行编码时很常见（我已经为不同的目的使用了数千次），尽管我不知道具体原因。我已经用大量的字符串对它进行了大规模测试，你可以放心地依赖它。

**只要您保持相同的密钥和相同的字符编码，**它就可以在不同的服务器上完美运行。如果您将来移至另一台服务器，则解密将正常工作。

# c++ - 包装指针如何与右值引用一起使用？

> ID：15917475
> 
> 赞同：2
> 
> 时间：2013-04-10T05:15:38.557
> 
> 标签：c++, c++11, operator-overloading, rvalue-reference

[std::shared_ptr::operator* 通过左值引用返回，这里](https://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719)给出的重载指针类操作的答案说约定是通过左值引用返回。但是，当我使用以下代码时，我收到错误 C2664: 'AdjacencyList::addVertex' : cannot convert parameter 1 from 'AdjacencyList::vertex_type' to 'AdjacencyList::vertex_type &&': You cannot bind an lvalue to an右值参考：

```
std::shared_ptr<vertex_type> AdjacencyList::addVertex(vertex_type&& v)
{
    auto existingVertex(findVertex(v));

    if (!existingVertex.isValid())
    {
        existingVertex = std::make_shared<vertex_type>(std::forward<vertex_type>(v))
        m_vertices.push_back(existingVertex);
    }

    return existingVertex;
};

AdjacencyList minimumSpanningTree;
// startVertex is a shared_ptr to a vertex returned from a previous call of addVertex
// on another AdjacencyList object
const auto mstStartVertex(minimumSpanningTree.addVertex(*startVertex)); 
```

我应该提供 AdjacencyList::addVertex(const vertex_type& v) 还是更改上述块底部的代码以在传递给 addVertex 之前复制顶点？

```
AdjacencyList minimumSpanningTree;
Vertex s(*startVertex);
const auto mstStartVertex(minimumSpanningTree.addVertex(std::move(s))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:23:15.540

我认为您应该从您的 中返回一份副本`operator*`，因为该语义`std::weak_ptr`表明您不能保证返回的参考将保持有效。由于返回的副本随后被提供给可以将其移动到其他地方的函数，因此它也应该足够高效，因为`addVertex`看起来它无论如何都需要一个副本，即，如果您*要*创建 的重载`addVertex`，它将创建 的副本内部传递的 const 引用，会吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:51:02.833

就冗余副本而言，最有效的方法是提供 rvalue 和 const 引用重载：

```
std::shared_ptr<vertex_type> AdjacencyList::addVertex(vertex_type&&);
std::shared_ptr<vertex_type> AdjacencyList::addVertex(const vertex_type&); 
```

要消除冗余代码，您可以转发到模板方法或带`bool`标志并根据需要执行的具体方法`const_cast`。

如果复制`Vertex`对象的开销与增加代码的成本相比是最小的，并且如果`if`通常或经常输入块，那么冗余副本将使您的代码更清晰。如果您只是创建一个不需要移动的prvalue临时，您的第二个建议调用会更好：

```
const auto mstStartVertex(minimumSpanningTree.addVertex(Vertex{*startVertex})); 
```

但是，在这种情况下，您不妨在调用本身中创建临时值，方法是提供单个值重载（[如何在添加新的 c++0x 右值引用运算符重载时减少冗余代码](https://stackoverflow.com/questions/2696156/how-to-reduce-redundant-code-when-adding-new-c0x-rvalue-reference-operator-ove?rq=1)）：

```
std::shared_ptr<vertex_type> AdjacencyList::addVertex(vertex_type); 
```

# django - 使用 '*:*' 查询 Solr 失败：[Errno 111] 连接被拒绝

> ID：15917478
> 
> 赞同：0
> 
> 时间：2013-04-10T05:15:49.033
> 
> 标签：django, django-haystack

当我运行以下命令时，尝试将 haystack 2.0.0-beta - solr 与我的 django 项目集成以进行全文搜索

```
from haystack.query import SearchQuerySet
al = SearchQuerySet().all() 
```

出错了

```
Failed to query Solr using '*:*': [Errno 111] Connection refused 
```

我该如何解决这个问题？在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:30:30.433

Solr 看起来没有运行，并且您没有提供任何详细信息，因此：

Solr 是一个需要手动启动的独立进程。此外，[它需要一个 servlet 容器来运行](http://wiki.apache.org/solr/FAQ#Solr_Comes_with_Jetty.2C_is_Jetty_the_recommended_Servlet_Container_to_use_when_running_Solr.3F)，通常`jetty`或者`tomcat`都是基于 java 的（讨论[here](https://stackoverflow.com/questions/602857/solr-container)和[here](https://serverfault.com/questions/224396/apache2-solr-tomcat-or-jetty)）。根据您的机器，您需要在开始使用 python 或 Django 之前安装**并启动它们。**如果你是debian，你很可能会这样做`apt-get install solr-jetty`，瞧。

安装 solr 后，您需要 python`pysolr`和`pip install pysolr`django haystack的绑定`pip install haystack==2.0`。

[这里的haystack 文档](http://django-haystack.readthedocs.org/en/latest/installing_search_engines.html#solr)中有一个教程，这里也有[一篇](http://yuji.wordpress.com/2011/08/15/django-haystack-solr-setup-guide/)关于安装、启动和配置 solr、jetty、python 和 django 组合的好博文。

# java - java regex - 只匹配一个出现

> ID：15917483
> 
> 赞同：1
> 
> 时间：2013-04-10T05:16:31.203
> 
> 标签：java, regex

我在验证输入字段时使用了这种模式“[A-Za-z -]*”：

```
if (input.matches("[A-Za-z -]*")) {
   return true;
} else {
   return false;
} 
```

基本上，我正在检查输入是否符合我的字段验证要求（字母、空格和破折号（只允许一个破折号））。我的问题是，只有当它包含字母、空格和破折号（仅限 ONE DASH）时，我才应该返回 true，即使我输入了很多破折号，我当前的代码也会返回 true。如何限制我的模式以检测破折号是否超过一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:18:18.190

以下相当于您的正则表达式，除了它最多允许一个破折号：

```
[A-Za-z ]*-?[A-Za-z ]* 
```

这匹配零个或多个字母/空格，后跟最多一个破折号，后跟零个或多个字母/空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:27:35.683

使用锚定在输入开始处的否定前瞻：

```
^(?!(.*-){2})[A-Za-z -]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:20:53.117

首先删除破折号。

```
if(input.indexOf('-') != 0) input.replaceFirst("-", " "); 
```

然后，由于您只删除了一个破折号，您可以运行您的正则表达式查询而不检查连字符。如果存在，则查询将返回 false。

# mysql - 为什么删除行Mysql Cluster时数据使用量增加？

> ID：15917484
> 
> 赞同：1
> 
> 时间：2013-04-10T05:16:32.727
> 
> 标签：mysql, database

我的mysql集群数据节点数据使用率提高到95%。然后我尝试删除 500000 行，我的节点数据使用量最初开始增加并达到 99% 及以上，并遇到 TABLE FULL 错误。请谁能告诉我为什么删除行时现有节点的数据使用量会增加？删除行时mysql集群的内部工作是什么？

我在 config.ini 中的 MaxNoOfConcurrentOperations 参数 600000 不是由于这个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:28:55.493

删除行并不一定会释放磁盘空间。事实上，它可能会消耗更多，因为它保留了[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)日志和相关的复制数据。

相比之下，`TRUNCATE`将放弃数据批发并且似乎不会招致相同的惩罚，至少对于大多数引擎而言。

如果您的磁盘空间确实不足，您可能需要完全删除一些表以释放一些空间。

# wso2 - 如何在代理 wso2 esb 中获取属性的值并设置有效负载

> ID：15917486
> 
> 赞同：0
> 
> 时间：2013-04-10T05:16:37.463
> 
> 标签：wso2, wso2esb

这是我的代理代码：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ProviderPublication" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
  <inSequence>
     <filter xmlns:p="http://www.openoandm.org/xml/ISBM/" xpath="//p:OpenPublicationSession">
        <then>
           <property xmlns:xs="http://www.openoandm.org/xml/ISBM/" name="ChannelURI" expression="//xs:ChannelURI" scope="default" type="STRING"/>
           <class name="wso2.org.Communicator.OpenPublication">
              <property name="channelURI" value="myChannelURI"/>
           </class>
           **<property name="sessionIDFromClassMediator" expression="get-property('SessionID')" scope="default" type="STRING"/>**
           <header name="To" action="remove"/>
           <property name="RESPONSE" value="true" scope="default" type="STRING"/>
           <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
           <payloadFactory>
              <format>
                 <ns1:OpenPublicationSessionResponse xmlns:ns1="http://www.openoandm.org/xml/ISBM/">
                    <ns1:SessionID>$1</ns1:SessionID>
                 </ns1:OpenPublicationSessionResponse>
              </format>
              <args>
                 <arg expression="get-property('sessionIDFromClassMediator')"/>
              </args>
           </payloadFactory>
           <send/>
        </then>
        <else>
           <filter xpath="//p:PostPublication">
              <then>
                 <property xmlns:xs="http://www.openoandm.org/xml/ISBM/" name="SessionID" expression="//xs:SessionID" scope="default" type="STRING"/>
                 <property xmlns:xs="http://www.openoandm.org/xml/ISBM/" name="Topic" expression="//xs:Topic" scope="default" type="STRING"/>
                 <property xmlns:xs="http://www.openoandm.org/xml/ISBM/" name="Expiry" expression="//xs:Expiry" scope="default" type="STRING"/>
                 <property xmlns:ns="http://www.openoandm.org/xml/ISBM/" name="MessageContent" expression="//MessageContent" scope="default" type="STRING"/>
                 <class name="wso2.org.postPublication.PostPublication">
                    <property name="topic" value="Sports"/>
                    <property name="sessionID" value="session_001"/>
                    <property name="messagecontent" value="Cricket on air"/>
                    <property name="expiry" value="Monday"/>
                 </class>
                 <property name="getMessageIDFromClassMed" expression="get-property('MessageID')" scope="default" type="STRING"/>
                 <log level="full">
                    **<property name="SessionIDFromFstFltr" expression="get-property('sessionIDFromClassMediator')"/>**
                 </log> 
```

我无法获得 sessionIDFromClassMediator 的属性值，所以我的过滤器永远不会正确并且无法进入过滤器

```
 **<filter xpath="get-property('sessionIDFromClassMediator') = get-property('SessionID')">
                    <then>
                       <log level="custom">
                          <property name="STATE" value="message is sent to queue"/>
                       </log>
                       <property name="OUT_ONLY" value="true"/>
                       <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
                       <header name="To" action="remove"/>
                       <property name="RESPONSE" value="true" scope="default" type="STRING"/>
                       <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
                       <payloadFactory>
                          <format>
                             <ns1:PostPublicationResponse xmlns:ns1="http://www.openoandm.org/xml/ISBM/">
                                <ns1:MessageID>$1</ns1:MessageID>
                             </ns1:PostPublicationResponse>
                          </format>
                          <args>
                             <arg expression="get-property('getMessageIDFromClassMed')"/>
                          </args>
                       </payloadFactory>
                       <send/>
                    </then>
                    <else>
                       <log level="full">
                          <property name="FilterNotRunning" value="----------FilterNotRunning------------------"/>
                       </log>
                       <drop/>
                    </else>
                 </filter>**
              </then>
              <else>
                 <drop/>
              </else>
           </filter>
        </else>
     </filter>
  </inSequence>
  <endpoint>
     <address uri="jms:/myQueue?&transport.jms.DestinationType=queue"/>
  </endpoint> 
```

所以我想得到的值，`<property name="sessionIDFromClassMediator" expression="get-property('SessionID')" scope="default" type="STRING"/>`以便我可以使用这个属性值来匹配其他属性

```
<class name="wso2.org.postPublication.PostPublication">
                            <property name="topic" value="Sports"/>
                            <property name="sessionID" value="session_001"/>
                            <property name="messagecontent" value="Cricket on air"/>
                            <property name="expiry" value="Monday"/>
                         </class> 
```

之后我向消息代理发送消息，但在此之前我想关联一个应该发送到消息代理队列的有效负载。我想在里面实现有效载荷

我无法获得 sessionIDFromClassMediator 的属性值，所以我的过滤器永远不会正确并且无法进入过滤器

```
 **<filter xpath="get-property('sessionIDFromClassMediator') = get-property('SessionID')">
                        <then>
                           <log level="custom">
                              <property name="STATE" value="message is sent to queue"/>
                           </log>
                           <property name="OUT_ONLY" value="true"/>
                           <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
                           <header name="To" action="remove"/>
                           <property name="RESPONSE" value="true" scope="default" type="STRING"/>
                           <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
                           <payloadFactory>
                              <format>
                                 <ns1:PostPublicationResponse xmlns:ns1="http://www.openoandm.org/xml/ISBM/">
                                    <ns1:MessageID>$1</ns1:MessageID>
                                 </ns1:PostPublicationResponse>
                              </format>
                              <args>
                                 <arg expression="get-property('getMessageIDFromClassMed')"/>
                              </args>
                           </payloadFactory>
                           <send/>
                        </then>
                        <else>
                           <log level="full">
                              <property name="FilterNotRunning" value="----------FilterNotRunning------------------"/>
                           </log>
                           <drop/>
                        </else>
                     </filter>** 
```

部分。主要问题是，当我调用操作 OPENPUBLICATION 时执行第一个过滤器，而当我调用第二个操作时，所有属性值都得到重置。那么，我怎样才能使财产价值保持不变，使其永不丢失？希望您能理解我的问题并期待您的解决方案。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:04:38.337

尝试添加您的财产的一些日志以查看它是否存在：

```
<log level="custom">
   <property name="your property" expression="get-property('sessionIDFromClassMediator'))"/>
</log> 
```

请记住不同[级别的属性（transport、axis2、axis2-client）。](http://docs.wso2.org/wiki/display/ESB451/Property+Mediator)

使用 xpath 属性的[过滤器中介](http://docs.wso2.org/wiki/display/ESB451/Filter+Mediator)也有很多问题。我不再使用它，总是使用“source”和“regex”的组合。

例子：

```
<filter source="$body/anElementInTheBody" regex="true"> 
```

因此，对于您的情况，您可以创建一个附加属性（就在过滤器之前），如果它应该被过滤，它将包含布尔值。然后使用 regex=true 您将输入过滤器。

这只是您示例的伪代码 - 可能需要一些更正：

```
<property name="filterCondition" expression="get-property('sessionIDFromClassMediator') = get-property('SessionID')"/>
<filter source="get-property('filterCondition')" regex="true"> 
```

# javascript - javascript中树的遍历

> ID：15917487
> 
> 赞同：0
> 
> 时间：2013-04-10T05:16:50.380
> 
> 标签：javascript

我有一个如下的 javascript 变量：

```
 var treeNode= [{"id":"T1"},{"id":"T2","children":[{"id":"T3"},{"id":"T4"},{"id":"T5","children":[{"id":"T6"}, {"id":"T7"},{"id":"T8"}]},{"id":"T9"},{"id":"T10"}]},{"id":"T11"},{"id":"T12"}]; 
```

节点 t3、t4、t5、t6、t7、t8、t9、t10 是节点 t2 的子节点，我在每个节点上都有一个停用链接。单击停用链接使链接处于活动状态并删除链接。在图片中提到。 ![在此处输入图像描述](https://i.stack.imgur.com/mMWHE.png)

现在我想在父节点的所有子节点上进行相同的活动并删除链接。例如 T3,T4,T5,T6,T7,T8,T9,T10 是 T2 的孩子。如果我点击 T5，那么这将适用于 T6、T7、T8。

我尝试了下面的递归代码。可能是我的方法不对。请指教。

```
var objTreeNode = eval(treeNode);
trav(objTreeNode); 
function trav(TreeNodeObj){
    var i=0;
    for (i=0;i<TreeNodeObj.length;i++){

        if(!TreeNodeObj[i].children){
            if(objID==TreeNodeObj[i].id){ // will get T2 if click on deactivate link of Item T2
            document.getElementById('span_'+TreeNodeObj[i].id).innerHTML = '<a href="javascript:activate(\'' + objID + '\');">Activate</a>    <a href="javascript:deleteNode(\'' + objID
            +'\');">Delete</a>';
            }
        }
        else{
            childObj = TreeNodeObj[i].children;
            trav(childObj)
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:23:23.580

您的代码中有一些愚蠢的东西，让我修复它们：

**1.“评估是邪恶的！”**

```
var treeNode= [{"id":"T1"},{"id":"T2","children":[{"id":"T3"}]}];
var objTreeNode = eval(treeNode);
trav(objTreeNode); 
```

为什么要调用 eval()？让我们看看 MDN 对此有何评论：

*   [不要使用评估！](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)这是危险和缓慢的。`There are safe (and fast!) alternatives to eval() for common use-cases.`

    那么你的“用例”是什么？为什么在这里调用 eval ？什么是“更好”的解决方案？如果您阅读了 MDN 上的整个文档，您可以阅读：

*   `If the argument of eval() is not a string, eval() returns the argument unchanged.`

    所以除非`treeNode`是一个字符串`var objTreeNode = eval(treeNode);`基本上等于`var objTreeNode = treeNode;`

您可以删除整个 eval() 行并使用 treeNode。它已经是一个对象。

**2.骆驼案**

```
function trav(TreeNodeObj) { 
```

这不仅仅是一个错误，只是一个约定：在 JavaScript（以及在大多数具有类似 C 语法的语言中）中，函数的参数用[小写驼峰](http://en.wikipedia.org/wiki/CamelCase)写（第一个字母小写，其他单词的第一个字母大写）。

```
function trav(treeNodeObj) { 
```

**3\. objID 未定义**

您的代码中没有定义 objID 变量。尽管您可能在给定时间在其他地方定义了一个全局变量，但将其作为参数引入函数中会更安全。

```
function trav(treeNodeObj, objID) { 
```

**4\. 你的代码在什么时候做什么**

让我弄清楚你的代码当前做了什么：

*   迭代给定对象的 children 属性（希望是一个数组）。
    *   如果一个元素没有子元素
        *   检查数组项是否具有所需的 ID 属性，并将其更改为 innerHTML
    *   别的
        *   在孩子身上调用函数

那么它的作用：如果没有子元素，则更改具有给定 ID 的元素。

您需要的是：更改具有给定 ID 的元素及其子元素。

我刚刚像这样修改了你的函数：

```
function trav(treeNodeObj, objID, activate) {
    var i = 0;
    for (i = 0; i < treeNodeObj.length; i++) {
        var childrenActive = false;

        if (objID === treeNodeObj[i].id || activate) { // will get T2 if click on deactivate link of Item T2
            childrenActive = true;
            document.getElementById('span_' + treeNodeObj[i].id).innerHTML = '<a href="javascript:activate(\'' + objID + '\');">Activate</a>    <a href="javascript:deleteNode(\'' + objID + '\');">Delete</a>';
        }

        if (treeNodeObj[i].children) {
            childObj = treeNodeObj[i].children;
            trav(childObj, objID, childrenActive);
        }
    }
} 
```

由于您需要更改所有子元素，因此我需要引入剪辑。这是激活参数。如果 activate 参数为真，您就不需要再检查 ID，您知道我们正在迭代具有给定 ID 的元素的子元素，因此无论如何都要更改元素。

即使元素有子节点，您也需要更改元素，所以我重新构建了 if-s。

我还制作了一个 jsfiddle 供您测试：http: [//jsfiddle.net/JZ52g/3/](http://jsfiddle.net/JZ52g/3/)

您可以在函数调用时更改 id 参数。

# android - 空指针异常 - Android 中 Google 帐户的 GoogleAuthUtil 身份验证

> ID：15917494
> 
> 赞同：2
> 
> 时间：2013-04-10T05:17:26.787
> 
> 标签：android, android-asynctask, nullpointerexception

我正在开发一个应用程序，该应用程序通过 Google 进行身份验证，以从他们的 Google 帐户中获取用户的个人资料图片和姓名。目前，我只是尝试打印从 Google 收到的令牌作为调试措施，以验证它是否可以正常工作。但是，我一直有一个空令牌（它似乎根本没有设置），给出以下错误：

```
java.lang.NullPointerException
com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
com.sp.norsesquare.froyo.NorseSquare$LoginAsyncTask.doInBackground(NS.java:465)
com.sp.norsesquare.froyo.NorseSquare$LoginAsyncTask.doInBackground(NS.java:1)
android.os.AsyncTask$2.call(AsyncTask.java:287)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
java.util.concurrent.FutureTask.run(FutureTask.java:137)
android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
java.lang.Thread.run(Thread.java:856) 
```

我正在使用自定义 AsyncTask 类来获取数据并将其返回给主活动，这被定义为主活动中的公共类。

```
public class LoginAsyncTask extends AsyncTask<String, Void, String>
{
NS ns;
String email;
String mScope;
String authToken;
Context context;
Bundle bundle;

public LoginAsyncTask(String e)
{
    email = e;
    bundle = new Bundle();
}

protected void onPreExecute()
{
    Log.i("BEGIN","Getting authtoken");
}

protected String doInBackground(String... args)
{
    try 
    {
        authToken = GoogleAuthUtil.getToken(context, email, "oauth2:"+"https://www.googleapis.com/auth/userinfo.profile", bundle);
        Log.i("MESSAGEGEGEGE","YOUR TOKEN = "+authToken);

    }
    catch (UserRecoverableAuthException recoverableException) {
        Toast.makeText(context, "UserRecoverableException Occurred", Toast.LENGTH_LONG).show();
        Log.e("GOOGLEAUTH","UserRecoverableException Triggered");
         Intent recoveryIntent = recoverableException.getIntent();

     } catch (GoogleAuthException authEx) {

         Log.e("MESSAAGEGEG", "Unrecoverable authentication exception: " + authEx.getMessage(), authEx);
     } catch (IOException ioEx) {
         Log.i("MESSAGEGEGE", "transient error encountered: " + ioEx.getMessage());

     }
       catch (Exception e) {
           e.printStackTrace();
       }
    return authToken;
}

protected void onProgressUpdate(Integer... progress)
{
    Log.i("PROGRESS","Getting somewhere");
}

protected void onPostExecute(String result) 
{

    Log.i("GOOGLEAUTH", "Returning Received Google Token");
    googleAuthToken = result;
        //This is a variable defined in the main activity
    }

} 
```

我不知道这是从哪里来的，在任何地方都找不到任何东西。非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T16:35:16.073

正如 Arhimed 所建议的，您传递给的上下文`getToken()`可能为空。当我将一些东西拼凑在一起以进行快速而肮脏的测试时，这发生在我身上。传递一个有效的上下文解决了这个错误。

# objective-c - getHue 函数返回的色调不正确

> ID：15917495
> 
> 赞同：1
> 
> 时间：2013-04-10T05:17:27.663
> 
> 标签：objective-c, ios4, colors, rgb

我正在使用 UIColour 的内置函数将 RGB 转换为 HSV：`- (BOOL)getHue:(CGFloat *)hue saturation:(CGFloat *)saturation brightness:(CGFloat *)brightness alpha:(CGFloat *)alpha`但对于某些 RGB，它没有给出正确的输出。

```
CGFloat h,s,v,a;
UIColor *tColor=[UIColor colorWithRed:(230.0/255.0) green:(226.0/255.0) blue:(226.0/255.0) alpha:1.0];
BOOL success=[tColor getHue:&h saturation:&s brightness:&v alpha:&a];
NSLog(@"Output-> Success:%d, hue:%f, sat:%f, value:%f, alpha:%f",success,h,s,v,a); 
```

**实际输出：**
Output-> Success:1, hue:1.000000, sat:0.017391, value:0.901961, alpha:1.000000

**预期输出：**
hue:0, sat:0.017391, value:0.901961, alpha:1.000000

注意：我从一些在线转换工具中得出了这个预期的输出（例如：[http](http://www.rapidtables.com/convert/color/rgb-to-hsv.htm) ://www.rapidtables.com/convert/color/rgb-to-hsv.htm ）

您可以清楚地看到色调的差异吗？那么，为什么色调会有这样的差异，我怎样才能得到我的预期输出呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:40:43.923

虽然世界其他大部分地区将“色调”定义为从 0 到 360 度，但对于 UIColor，它是 0.0 到 1.0。

实际上，正如 360.000 度与几何形状中的 0.000 或其他人的色调相同，所以我们在 UIColor 的色调中发现 1.000 与 0.000 相同（在小数点后产生任意数量的零位，如果您愿意，可以使用二进制。 )

因此，您的“实际输出”和“预期输出”是相同的。编码时，色调保持在 0.000 到 0.999 的范围内，将 1.000 更改为 0.000 可以避免麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:27:57.320

[HSB 或 HSL](http://en.wikipedia.org/wiki/HSL_color_space#Basic_principle)中的色调以色环周围的度数来衡量，从 0° 处的红色开始，然后在 360° 处绕回红色；所以 0° 的色调与 360° 的色调相同。`UIColor`将此范围 (0–360°) 映射到值 0–1 (0°=0.0​​, 360°=1.0)。

# jquery - jquery Cycle导致边框底部消失

> ID：15917496
> 
> 赞同：0
> 
> 时间：2013-04-10T05:17:28.413
> 
> 标签：jquery, css, cycle

我正在循环浏览多个 div（div.slide）。在每个 div.slide 中有四个包含图像缩略图的 div。这四个 div 中的每一个都有一个边框底部设置为 1px 实心#BBBDC0，但是一旦我添加了 Cycle 插件，边框底部就会停止显示。我在下面包含了相关 div 的 CSS。

你可以在这里看到我的作品：http: [//dispose.co/Untitled-2.html](http://dispose.co/Untitled-2.html)

我错过了什么？如何让底部边框显示？

谢谢！

```
div.thumbtile {
width:186px;
height:314px;
margin-top:20px;
border-bottom:1px solid #BBBDC0;
margin-right:22px;
float:left;
text-align:center;
color:#A7A9AB;
font-family:Arial, Helvetica, sans-serif;
font-size:11px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:32:07.727

由于您为以下容器（元素）指定的特定高度，您尝试显示的底部栏被隐藏：

# 容器

# 滑块

.thumbtile

增加他们的高度&你会看到酒吧。从最上面的开始。另外，打开你的Firefox浏览器并搜索“firebug”。安装这个插件并查看它的教程。我想你不知道这个插件。否则，你可能不会问这个问题。

希望能帮助到你

# c - 读取和打印文件时接收垃圾数据

> ID：15917498
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:17:30.627
> 
> 标签：c, garbage

在下面发布的代码中，从文件中写入和读取结构时出现问题。输出结果是垃圾数据，我自己无法找到解决方案。使用的操作系统：**Ubuntu**。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct eventos {
    int id;
    char titl[60];
    char desc[120];
    int estado;
} evento;

struct eventos y;

void nuevo_evento(struct eventos *event){
    FILE *eve;
    eve = fopen("Eventos.dat","ab+");
    fwrite(&event,sizeof(struct eventos),1,eve);
    fclose(eve);
}

void VerEventos(){
    FILE *events2 = fopen("Eventos.dat", "rb+");
    printf("------------------------------\n");
    fread(&y, sizeof(struct eventos), 1, events2);
    while(!feof(events2)){
        printf("%d      %s      %d      %s\n", y.id, y.titl, y.estado, y.desc);
        fread(&y, sizeof(struct eventos), 1, events2);
    }
    printf("------------------------------\n");
    fclose(events2);
}

int main(){
    remove("Eventos.dat");

    y.id = 1;
    y.estado = 0;
    strcpy(y.titl,"Evento1");
    strcpy(y.desc,"evento culiao");

    nuevo_evento(&y);

    y.id = 2;
    y.estado = 0;
    strcpy(y.titl,"Evento2");
    strcpy(y.desc,"evento bacan");

    nuevo_evento(&y);

    VerEventos();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:17:20.857

在您发布`nuevo_evento()`的[最新程序](http://pastie.org/7399877#1,7,24,48)的功能中，只需更改

```
fwrite(&event,sizeof(struct eventos),1,eve); 
```

至

```
fwrite(event,sizeof(struct eventos),1,eve); 
```

如果您查看[fwrite()](http://www.cplusplus.com/reference/cstdio/fwrite/)函数，第一个参数是指向数据的指针。在你的程序中，`&event`是指针本身的地址，但是`event`是它指向的结构的地址，这就是你必须使用 fwrite() 的地址。

也看看这个[问题](https://stackoverflow.com/questions/4155791/how-to-write-a-struct-to-a-file-using-fwrite)，这将对您面临的问题有所帮助。

# python - Python 文件对象、关闭和析构函数

> ID：15917502
> 
> 赞同：6
> 
> 时间：2013-04-10T05:17:40.083
> 
> 标签：python, file-io, destructor

的描述`tempfile.NamedTemporaryFile()`说：

> 如果*delete*为 true（默认值），则文件一关闭就会被删除。

在某些情况下，这意味着在 Python 解释器结束后文件不会被删除。例如，在 下运行以下测试时 `py.test`，临时文件仍然存在：

```
from __future__ import division, print_function, absolute_import
import tempfile
import unittest2 as unittest
class cache_tests(unittest.TestCase):
    def setUp(self):
        self.dbfile = tempfile.NamedTemporaryFile()
    def test_get(self):
        self.assertEqual('foo', 'foo') 
```

在某种程度上这是有道理的，因为这个程序从不明确地关闭文件对象。关闭对象的唯一另一种方法可能是在`__del__`析构函数中，但这里的语言参考声明“*不能保证`__del__()`在解释器退出时为仍然存在的对象调用方法。* ”所以一切都与到目前为止的文档。

但是，我对此的含义感到困惑。如果不能保证在解释器退出时关闭文件对象，那么即使程序正常退出，成功写入（缓冲的）文件对象的一些数据是否会丢失，因为它仍然在文件对象的缓冲区中，并且文件对象从未关闭？

不知何故，这对我来说似乎不太可能和非 Pythonic，并且 open() 文档也不包含任何此类警告。所以我（暂时）得出结论，文件对象毕竟保证是关闭的。

但是这个魔法是怎么发生的，为什么不能`NamedTemporaryFile()`使用同样的魔法来确保文件被删除呢？

*编辑：*请注意，我在这里不是在谈论*文件描述符*（由操作系统缓冲并在程序退出时由操作系统关闭），而是关于可能实现自己的缓冲的 Python 文件对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T10:05:23.943

在 Windows 上，NamedTemporaryFile 使用特定于 Windows 的扩展名 (os.O_TEMPORARY) 来确保文件在关闭时被删除。如果进程以任何方式被终止，这也可能有效。但是在 POSIX 上没有明显的等价物，很可能是因为在 POSIX 上您可以简单地删除仍在使用的文件；它只删除名称，并且文件的内容仅在关闭后才被删除（以任何方式）。但确实假设我们希望文件名在文件关闭之前一直存在，就像 NamedTemporaryFile 一样，那么我们需要“魔法”。

我们不能使用与刷新缓冲文件相同的魔法。发生的情况是 C 库处理它（在 Python 2 中）：文件是 C 中的 FILE 对象，并且 C 保证它们在正常程序退出时被刷新（但如果进程被终止则不会）。在 Python 3 的情况下，有自定义 C 代码可以实现相同的效果。但它特定于这个用例，而不是任何可直接重用的东西。

这就是 NamedTemporaryFile 使用自定义`__del__`. 事实上，`__del__`不能保证在解释器退出时被调用。（我们可以通过一个引用 NamedTemporaryFile 实例的全局引用循环来证明这一点；或者运行 PyPy 而不是 CPython。）

作为旁注，NamedTemporaryFile 可以更稳健地实现，例如通过注册自身`atexit`以确保随后删除文件名。但是您也可以自己调用它：如果您的进程不使用无限数量的 NamedTemporaryFiles，那么它就是`atexit.register(my_named_temporary_file.close)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:27:34.377

在任何版本的 *nix 上，所有文件描述符都会在进程完成时关闭，这由操作系统负责。Windows 在这方面可能完全相同。如果不深入研究源代码，我不能以 100% 的权威说实际发生了什么，但可能发生的事情是：

*   If `delete`is `False`, `unlink()`（或其他操作系统上类似的函数）被调用。这意味着*当进程退出并且没有更多打开的文件描述符时*，该文件将被自动删除。在进程运行时，该文件仍将保留。

*   如果`delete`是`True`，则可能使用了 C 函数`remove()`。这将在进程退出之前强制删除文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T05:26:28.543

文件缓冲由操作系统处理。如果您打开文件后不关闭它，那是因为您假设操作系统将在所有者存在后刷新缓冲区并关闭文件。这不是 Python 魔术，这是你的操作系统在做的事情。该`__del__()`方法与 Python 相关，需要显式调用。

# c# - RequiredFieldValidator 客户端验证在 IE 10 上不起作用

> ID：15917503
> 
> 赞同：1
> 
> 时间：2013-04-10T05:17:41.307
> 
> 标签：c#, asp.net, webforms, asp.net-2.0, internet-explorer-10

我所有使用 RequiredFieldValidator、RegularExpressionValidator 和 ValidationSummary 的网络表单都不能在 IE 10 上运行。它在任何其他浏览器上都可以正常运行。奇怪的是回发，这在任何其他浏览器上都不会发生。

另一个奇怪的事情是当我打开开发者控制台（F12）时，它似乎在工作，但它仍在回发。默认情况下，所有这些验证都应该发生在客户端。

这里有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:19:43.927

请检查这些[链接1](https://stackoverflow.com/questions/15745658/asp-net-validation-not-working-in-ie-10)和[链接2](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

**编辑：**

我从.. [Hanselman那里得到了这个修复](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

.Net 2.0 和 .Net 4.0 附带的浏览器定义文件包含特定范围的浏览器版本的定义。默认情况下，ASP.NET 对用户代理字符串使用嗅探技术来检测浏览器。浏览器定义文件涵盖了一定范围的浏览器版本。随着版本号的增加，ASP.NET 可能无法通过使用用户代理字符串来识别浏览器的新版本。在这种情况下，ASP.NET 可能会将这些版本作为未知浏览器来处理并造成不便。

**使固定**

解决方法是获取更新的浏览器定义文件。您可以安装机器范围的修复程序或仅修复单个项目。修补程序可通过下载链接获得。- [.Net 4](http://support.microsoft.com/kb/2600088) - [.Net 2.0](http://support.microsoft.com/kb/2600100)

# java - 有什么不同

> ID：15917510
> 
> 赞同：1
> 
> 时间：2013-04-10T05:18:17.730
> 
> 标签：java, string, memory, encapsulation

```
int a =10;
a = 30; 
```

&

```
String a = "abc";
a = "xyz"; 
```

谁能告诉我这里执行了什么样的任务。

我知道问这样一个愚蠢的问题几乎不值得，但我只想找出字符串赋值和其他对象赋值之间的区别。

据我所知，像“abc”这样的每个字符串值本身就是一个字符串对象，那么当它被分配给`String Object`. 喜欢`a = "xyz"`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:21:53.713

字符串是**不可变**的，当你写的时候

```
String a ="abc" 
```

在字符串池中创建一个内容为 abc 的字符串，当您编写 `a = "xyz"` 另一个字符串时，在内容为 xyz 的字符串池中创建另一个字符串，旧的字符串不会被替换。而在 int 的情况下，值会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:20:26.117

`Strings`表示`immutable`它们无法更改（在内存中）。

所以当我创建一个`String`

```
String a = "abc"; 
```

然后我分配它

```
a = "xyz" 
```

发生的事情是`a`指向内存`"abc"`，但现在是一个全新的字符串并指向`"xyz"`

`int`另一方面，现在他们只是改变了，他们是`mutable`。所以当我创建一个`int`

`int a = 10`;

然后分配它

`a = 30`;

发生的事情是`a`指向 10 的内存，但现在 10 已更改为 30 但 a 仍指向相同的内存。

**注意：**这就是你可以说的原因`if (String1 == String2)`。这将测试它们是否指向相同的内存位置。因此，您必须`if (String1.equals(String2))`测试它们是否是相同的单词。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T05:20:52.760

```
int a = 10;
a = 30; 
```

现在`a`有**新值**，即 30

```
String a = "abc";
a = "xyz"; 
```

引用变量`a`现在指向**新的字符串对象**，即`xyz`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T05:25:56.297

String 是一个不可变的对象。当您将值重新分配给 String 时，系统会重新创建 String 对象。您的示例实际上是这样工作的：

```
 String a = "abs";
  a = new String("xy"); 
```

其次，int 不是对象，它是原始变量；它没有任何方法。对于类似的操作，您需要一个 Integer 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T05:27:54.857

> 整数 a=10

将整数值 10 分配给 int 类型的新引用变量“a”。

> a=30

将整数值 30 分配给相同的引用变量“a”。

> 字符串 a="abc"

创建一个新的字符串对象“abc”并将其分配给字符串类型的新引用变量“a”。

> 一个=“xyz”

创建一个新的字符串对象“xyz”并使变量“a”指向它。现在堆内存中有两个 String 对象，“abc”和“xyz”。除非您创建另一个变量指向它，否则对字符串“abc”的引用现在将丢失。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T05:59:11.643

A `String` is immutable. You cannot change the value of a `String`; you instantiate a new `String` every time. `int` is different; you don't create new instances of primitives, and if it's sufficiently small (i.e. between -1 and 5, inclusive), [it will push a constant value onto the stack](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings).

Well, let's take a look at it on a deeper level.

Here's a sample class which illustrates assignment to an int and a String.

```
public class StackOverflow {
    public static void main(String[] args) {
        int anInt = 30;
        anInt = 5;

        String aWord = "This is not a word";
        aWord = "And we did it again...!";
    }
} 
```

Here's what the bytecode is doing (the man behind the curtain). I'm using the above link as reference into what the bytecode actually means.

```
// class version 51.0 (51)
// access flags 0x21
public class StackOverflow {

    // compiled from: StackOverflow.java

    // access flags 0x1
    public <init>()V
        L0
    LINENUMBER 1 L0
    ALOAD 0
    INVOKESPECIAL java/lang/Object.<init> ()V
        RETURN
    L1
    LOCALVARIABLE this LStackOverflow; L0 L1 0
    MAXSTACK = 1
    MAXLOCALS = 1

    // access flags 0x9
    public static main([Ljava/lang/String;)V
    L0
    LINENUMBER 3 L0
    BIPUSH 30
    ISTORE 1
    L1
    LINENUMBER 4 L1
        ICONST_5
    ISTORE 1
    L2
    LINENUMBER 6 L2
    LDC "This is not a word"
    ASTORE 2
    L3
    LINENUMBER 7 L3
    LDC "And we did it again...!"
    ASTORE 2
    L4
    LINENUMBER 8 L4
        RETURN
    L5
    LOCALVARIABLE args [Ljava/lang/String; L0 L5 0
    LOCALVARIABLE anInt I L1 L5 1
    LOCALVARIABLE aWord Ljava/lang/String; L3 L5 2
    MAXSTACK = 1
    MAXLOCALS = 3
} 
```

So, the *relevant* portions of our little class are:

*   push the *byte* 30 onto the stack (it's small enough to be considered a byte)
*   store that into variable 1
*   push the constant 5 onto the stack
*   store that into variable 1, overwriting our 30
*   load from a constant pool the first string "This is not a word"
*   store the *reference* into variable 2
*   load from a constant pool the second string "And we did it again...!"
*   store the *reference* into variable 2

The big differences is that we're storing references every time we store the String. We're not bothering with that with an int, due to it being a primitive.

And *that* is your difference.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T05:23:53.823

字符串是不可变的。因此，当您重新分配引用时会创建新对象。因此将在堆中创建新对象 XYZ。

```
String a = "abc";
a = "xyz"; 
```

本地定义的原语将在堆栈上。但是，如果将原语定义为对象实例的一部分，则该原语将位于堆上。

```
int a =10;
a = 30; 
```

所以在上述情况下， a 将在堆栈上。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-10T05:24:53.577

1.  `int`是原始类型 - 不是对象

2.  在您的字符串示例中，Java 将创建**“abc”** `String`对象，将此对象的引用分配给变量`a`，然后创建**“xyz”**字符串对象并将对该对象的引用分配给变量“a”（覆盖其先前的值）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T13:34:00.453

有两种不同的 JVM 指令用于此操作：

1.  [astore](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.astore)保存对对象的引用
2.  [istore](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.istore)保存 int 值

您实际上想从中找到什么？

# schema.org - 使用 Microdata / Schema.org 标记导航元素

> ID：15917513
> 
> 赞同：0
> 
> 时间：2013-04-10T05:18:20.157
> 
> 标签：schema.org

我理解使用微数据来突出事物、人物、电影等。

我认为您还应该突出显示关键页面，例如“关于”页面和“联系”页面。

我听说你也应该标记导航区域。我认为这是一个好主意，因为它可以告诉 Google 哪些区域不重要。

我该怎么做？这只是在每个导航栏等周围包裹一个 div 的情况吗？

是不是重要？还有人用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:45:52.917

由于导航项是链接，一种方法是使用 itemprop“url”（取决于 itemscope）。对于创意作品，您也可以使用“isBasedOnUrl”。

您也可以尝试嵌套。

# php - php 常量键值数组

> ID：15917517
> 
> 赞同：1
> 
> 时间：2013-04-10T05:18:43.873
> 
> 标签：php

有什么方法可以使用下面在 php 中提到的键常量创建数组

```
class MysqlConstants
{
    const masterDb['HOST'] = "ip";
    const masterDb['user'] = "user";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:21:10.860

不，这是不可能的；类常量必须是文字，而不是表达式。最接近的选择是静态属性：

```
class MySqlConstants
{
    public static $masterDb = array('HOST' => "ip", 'user' => "user");
} 
```

我个人不喜欢这种方法，因为常量应该是不可变的。这将是一个更好的方法：

```
class MySqlConstants
{
    private static $masterDb = array('HOST' => "ip", 'user' => "user");

    public final static function getMasterDb()
    {
        return self::$masterDb;
    }
} 
```

最后，您可以拆分常量：

```
class MySqlConstants
{
    const HOST = "ip";
    const user = "user";
} 
```

顺便说一句，我不建议在代码中存储配置，除非它们的应用程序常量；例如，最好将连接设置等存储在 ini 文件中，并用于[`parse_ini_file()`](http://php.net/parse_ini_file)检索它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:25:34.223

您还可以序列化您的数组，然后将其放入常量中：

```
# define constant, serialize array
define ("CRED", serialize (array ("host"=>"ip", "user"=>"user")));

# use it
$my_credential = unserialize (CRED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:26:07.597

我建议`define("MYSQL_HOST","ip");`在另一个名为 config.php 的 php 文件中使用，这样您就可以轻松访问它，`MYSQL_HOST`而无需调用类实例或`global $masterDb`每次您想使用它。

拥有 config.php 的另一个优点是您可以轻松修改常用变量。

# c# - 使用 Oauth2 从已安装的应用程序中对用户 Google Drive 文件进行管理员访问

> ID：15917519
> 
> 赞同：0
> 
> 时间：2013-04-10T05:18:46.567
> 
> 标签：c#, google-api, google-drive-api, gdata, gdata-api

我正在编写一组允许用户在其域上运行管理功能的 Powershell Cmdlet。使用 gData，我已经能够进行配置调用来创建新用户、列出组和其他类似的东西。当试图列出另一个用户的文档（作为管理员）时，我遇到了 DocsList api 的障碍，所以我转而使用 Google Drive api。

我已经能够让 Drive API 工作，并根据他们的[QuickStart for DotNet](https://developers.google.com/drive/quickstart-cs)和[File List Example](https://developers.google.com/drive/v2/reference/files/list)运行 Cmdlet 。但是，我似乎无法弄清楚如何让它为另一个用户列出文档。到目前为止，我发现的所有内容似乎都指向[使用](https://stackoverflow.com/questions/13727206/how-to-get-all-files-of-all-users-using-google-drive-api)[服务帐户进行委派](https://developers.google.com/drive/delegation)或[使用旧的 DocList api](https://stackoverflow.com/questions/10331342/access-to-all-files-on-a-users-google-drive) ，无论如何，它已被[贬低](http://googleappsdeveloper.blogspot.com/2012/09/retiring-google-documents-list-api-v3.html)以支持 Drive API。

我的问题是服务帐户似乎是已安装应用程序的替代品，而不是我可以同时使用的东西。或者，如果我能够让它工作，我将不得不让每个用户[创建自己的项目和服务帐户](https://developers.google.com/drive/delegation#create_the_service_account_and_its_credentials)，如果我理解的话。

如何在不给用户带来不便的情况下做到这一点？他们已经将自己认证为管理员，我不明白为什么他们必须创建一个 API 项目和服务帐户来实现相同的目标。我会为我的 API 项目创建一个服务帐户吗？[如果是这样，我如何处理它生成并需要访问](https://developers.google.com/drive/delegation#instantiate_a_drive_service_object)的公钥？如果我扔掉密钥文件，那似乎不太安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:35:59.000

您只能使用服务帐户模拟用户。为域范围的权限配置服务帐户后，您可以使用您提到的管理员帐户提出请求。但是，我不确定 Google Apps 是否允许多个管理员帐户。如果他们这样做了，您只需要设置一个项目和一个服务帐户。

# ruby-on-rails - 轨道上的红宝石宝石

> ID：15917522
> 
> 赞同：0
> 
> 时间：2013-04-10T05:19:01.040
> 
> 标签：ruby-on-rails, ruby, rubygems, ruby-on-rails-3.2

我正在尝试在 windows os 的命令提示符下运行 rails server 并显示以下错误。

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/run
times.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://gi
thub.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUn
available)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/l
ib/execjs.rb:5:in `<module:ExecJS>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/l
ib/execjs.rb:4:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:72:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:72:in `block (2 levels) in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:70:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:70:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:59:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:59:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler.rb:132:in `require'
        from C:/Sites/priya/config/application.rb:7:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:53:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:53:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我已经下载了 execjs 并将文件复制到我的项目文件夹中。但是没有变化。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:40:26.647

错误是

```
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. 
```

如果您使用 Rails 3 并启用资产管道，则需要资产编译器。ExecJS 支持这些运行时，如文档页面中所述：

*   therubyracer - 嵌入在 Ruby 中的 Google V8
*   therubyrhino - 嵌入在 JRuby 中的 Mozilla Rhino
*   节点.js
*   Apple JavaScriptCore - 包含在 Mac OS X 中
*   Microsoft Windows 脚本宿主 (JScript)

按照[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)上的说明安装其中之一。由于您使用 Windows，因此您可能需要先尝试 Microsoft Windows Script Host。

# dynamics-crm-2011 - 具有不同实体的 FetchXML 过滤器

> ID：15917538
> 
> 赞同：2
> 
> 时间：2013-04-10T05:20:46.553
> 
> 标签：dynamics-crm-2011, fetchxml

我希望使用 fetchXML 过滤器过滤我在 CRM2011 中的实体。但是，我对不同实体的 AND 和 OR 分组有问题。

我正在根据客户的同意搜索客户，其中每个客户将拥有 1 个或 0 个有效同意。如果没有有效的同意，我想退回客户。我也希望客户在获得同意的情况下返回，但如果在没有指定机构的情况下获得“受限”同意（例如，client.consent.type == 'restricted' AND client.consent.users CONTAINS user），则不会返回

到目前为止，我有这个：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="true">
  <entity name="contact">
    <attribute name="fullname" />
    <attribute name="thr_verifiedproofofidentity" />
    <attribute name="thr_interpreterrequired" />
    <attribute name="emailaddress1" />
    <attribute name="thr_consent" />
    <attribute name="birthdate" />
    <attribute name="thr_individualreferencenumber" />
    <attribute name="contactid" />
    <order attribute="fullname" descending="false" />
    <filter type="and">
      <condition attribute="statecode" operator="eq" value="0" />
      <condition attribute="thr_consent" operator="not-null" />
    </filter>
    <link-entity name="thr_consent" from="thr_clientid" to="contactid" alias="aa">
      <filter type="and">
        <filter type="or">
          <condition attribute="thr_consenttype" operator="eq" value="130120003" />
          <condition attribute="thr_consenttype" operator="ne" value="130120003" />   *
        </filter>
      </filter>
      <link-entity name="thr_thr_consent_thr_agency" from="thr_consentid" to="thr_consentid" visible="false" intersect="true">
        <link-entity name="thr_agency" from="thr_agencyid" to="thr_agencyid" alias="ab">
          <filter type="and">
            <condition attribute="thr_agencyid" operator="eq" uiname="Test" uitype="thr_agency" value="(agency id goes here)" />   *
          </filter>
        </link-entity>
      </link-entity>
    </link-entity>
  </entity>
</fetch> 
```

这段代码中唯一缺少的是我需要一个带有“*”的两个条件属性市场的 AND 分组。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:44:34.727

正如 Guido Preite 指出的那样，使用 Advanced find 来创建 Fetch Xml 比手动编辑它更容易。

但...

由于您没有进行任何分组，我建议您甚至不要使用 Fetch Xml，而是使用其他受支持的 SDK 选项之一（QueryExpressions、Linq to CRM、oData 等）。

我不确定我是否完全理解您的请求（如果您可以将查询编写为 SQL 语句，那将会很有帮助），但我认为您需要有 2 个 thr_consent 链接实体`link-type="outer"`。第一个具有等于 130120003 的条件，第二个具有指向代理 ID 条件的链接。

# linux - Linux 系统调用流程序列

> ID：15917544
> 
> 赞同：4
> 
> 时间：2013-04-10T05:21:27.897
> 
> 标签：linux, linux-kernel, operating-system, system-calls

我有一个关于 Linux 的深度工作的问题。

假设一个多线程进程正在 CPU 中执行。在这种情况下，我们将有一个正在 CPU 上执行的线程。在更广泛的情况下，我们会将属于进程的相应页面加载到 RAM 中以供执行。

假设线程进行系统调用。我对这之后的工作有点不清楚。中断将产生一个调用。我的一个问题是谁来接听这个电话？

假设系统有 m:n 个用户级线程到内核级线程的映射，我假设相应的内核级线程会响应这个调用。

因此内核将查找中断向量表并获取需要执行的例程。我的下一个问题是执行中断时将使用哪个堆栈？是内核线程的堆栈还是用户级线程的堆栈？（我假设它将是内核线程的堆栈。）

回到程序流程，假设操作是使用`fopen`. 我的下一个问题是如何从 ISR 跳转到系统调用？或者我们的 ISR 是否映射到系统调用？

同样在更广泛的情况下，当内核线程正在执行时，我假设 RAM 上的“OS 区域”将用于容纳正在执行系统调用的页面。

再次从不同的角度看它（希望你还和我在一起）最后我假设相应的内核线程正在由 CPU 调度程序处理，其中在上下文切换中会发生从用户级线程到相应的内核级线程当`fopen`系统调用被应答时。

我做了很多假设，如果有人能够消除疑虑或至少引导我朝着正确的方向前进，那将是非常棒的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:09:14.520

*注意：我主要使用 ARM 机器，所以其中一些可能是 ARM 特定的。另外，我会尽量简化它。随意纠正任何可能错误或过于简单化的内容。*

> 假设线程进行系统调用。我对这之后的工作有点不清楚。中断将产生一个调用。我的一个问题是谁来接听这个电话？

通常，处理器将在内核模式下的某个预定位置开始执行。内核将保存当前进程状态并查看用户空间寄存器以确定请求了哪个系统调用并将其分派给正确的系统调用处理程序。

> 因此内核将查找中断向量表并获取需要执行的例程。我的下一个问题是执行中断时将使用哪个堆栈？是内核线程的堆栈还是用户级线程的堆栈？（我假设它将是内核线程的堆栈。）

我很确定它会切换到内核堆栈。如果他们使用用户空间堆栈，将会有一些非常严重的信息泄漏安全问题。

> 回到程序流程，假设操作是使用 fopen 打开文件。我的下一个问题是如何从 ISR 跳转到系统调用？或者我们的 ISR 是否映射到系统调用？

`fopen()`实际上是一个 libc 函数，而不是系统调用本身。不过，它可能（并且在大多数情况下会）`open()`在其实现中调用系统调用。

所以，这个过程（大致）是：

1.  用户空间调用`fopen()`
2.  `fopen`执行系统调用`open()`
3.  这会触发某种异常或中断。作为响应，处理器切换到特权模式并开始在内核中的某个预设位置执行。
4.  内核确定它是什么类型的中断和异常并适当地处理它。在我们的例子中，它将是一个系统调用。
5.  内核通过读取用户空间寄存器并提取任何参数并将其传递给适当的处理程序来确定正在请求哪个系统调用。
6.  处理程序运行。
7.  内核将任何返回码放入用户空间寄存器。
8.  内核将执行转移回发生异常的地方。

> 同样在更广泛的情况下，当内核线程正在执行时，我假设 RAM 上的“OS 区域”将用于容纳正在执行系统调用的页面。

页面不执行任何操作 :) 通常，在 Linux 中，映射到 0xC0000000 以上的任何地址都属于内核。

> 再次从不同的角度看它（希望你还和我在一起）最后我假设相应的内核线程正在由 CPU 调度程序处理，其中在上下文切换中会发生从用户级线程到相应的内核级线程当 fopen 系统调用被应答时。

使用抢占式内核，线程实际上不会受到歧视。据我了解，新线程并不是为了服务系统调用而创建的——它只是在请求系统调用的同一个线程中运行，但内核模式除外。

这意味着在内核模式下为系统调用服务的线程可以像任何其他线程一样被调度。因此，这是您在为内核开发时听到“用户空间上下文”的地方。这意味着它在用户模式线程上以内核模式执行。

这有点难以解释，所以我希望我做对了。

# c# - 语句未更新数据项

> ID：15917545
> 
> 赞同：0
> 
> 时间：2013-04-10T05:21:28.087
> 
> 标签：c#, linq, data-structures, collections, linq-to-objects

我有这个 LINQ 语句，它试图设置字符串 [] 集合中的第一个元素。但它不起作用。

下面是 LINQ 语句。

```
 docSpcItem.Where(x => x.DocID == 2146943)
           .FirstOrDefault()
           .FinishingOptionsDesc[0] = "new value";

public string[] FinishingOptionsDesc
{ 
        get
        {
            if (this._FinishingOptionsDesc != null)
            {
                return (string[])this._FinishingOptionsDesc.ToArray(typeof(string));
            }
            return null;
        }
        set { this._FinishingOptionsDesc = new ArrayList(value); }
} 
```

我上面的 LINQ 语句有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:11:06.663

几件事..您的 get 和 set 存在一些问题。我只会使用这样的自动属性..

```
public class DocSpcItem
{
    public string[] FinishingOptionsDesc { get; set; }
    public int DocID { get; set; }
} 
```

接下来对于您的 linq 语句，根据 id 为 2146943 的项目的存在，您可能正在设置对象的新版本，而不是您想要的。这应该工作..

```
[TestMethod]
public void Linq()
{
    var items = new List<DocSpcItem>();
    //2146943 
    for (var i = 2146930; i <= 2146950; i++)
    {
        items.Add(new DocSpcItem() 
                     {   DocID = i
                         , FinishingOptionsDesc = new string[] 
                              { i.ToString() } 
                     }
                 );
    }

    var item = items.FirstOrDefault(i => i.DocID == 2146943);
    if (item != null)
    {
        item.FinishingOptionsDesc = new string[]{"The New Value"};
    }
} 
```

和

```
public class DocSpcItem
{
    public string[] FinishingOptionsDesc { get; set; }
    public int DocID { get; set; }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/vDKqA.png)

# javascript - onClick 不会与 onChange 同时工作

> ID：15917547
> 
> 赞同：0
> 
> 时间：2013-04-10T05:21:36.000
> 
> 标签：javascript, html, onclick, onchange

我已经尝试了几个小时来弄清楚如何使用 onchange 定位 iframe，然后当我单击按钮时，它会弹出一个新窗口或选项卡。

```
function changeLocation(locationUrl)
{
 document.getElementById('iframetest').src=locationUrl
}
function subm()
{
var form = document.jump;
var value = document.jump.TSdropdown.options[document.jump.TSdropdown.selectedIndex].value;
document.getElementById('btn').onclick = function() {
    form.target = 'value';
    form.submit();
}
}

<form name="jump" method="post" action="" target="">
    <select name="TSdropdown" onchange="changeLocation(this.options[this.selectedIndex].value);">
    <option selected = "selected">Choose a Model Run</option>
    //option values
    <input class="button" type="button" id="btn" name="Submit" value="Submit" onclick="subm();">
    </select>
</form>
</td>

</tr>

<tr>
<td class="centered">
<div id="outerdiv">
<iframe height="400" width="940" name="iframetest" id="iframetest" src=""></iframe>
</div>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:01:04.770

id 'jump' 没有元素，使用`document.jump`代替`document.getElementById('jump');`

要获取选定下拉列表的值，请使用：

```
var value = document.jump.TSdropdown.options[document.jump.TSdropdown.selectedIndex].value 
```

现在使用这个`value`变量。

# node.js - 如何在没有 child_proccess 的情况下使用 Nodejs 格式化驱动器

> ID：15917550
> 
> 赞同：1
> 
> 时间：2013-04-10T05:21:51.567
> 
> 标签：node.js, asynchronous, format, drive

如何在无需使用 cli/cmd/child_proccess 的情况下使用 Nodejs 格式化驱动器（又名 USB 记忆棒/外部硬盘）？

我正在使用 nodejs 创建一个小工具，该工具需要在向其添加一些文件之前清除硬盘，但我找不到任何允许我异步（或同步）访问这些工具的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:03:28.890

我最终使用`child_process`并编写了一个库，该库允许您为某些输出设置响应者，其语义类似于[`node-suppose`](https://github.com/jprichardson/node-suppose)by `jprichardson`，调用[`respond`](https://github.com/schme16/node-respond) （可以通过 npm install respond 安装 - 此处的文档：[https ://github.com/schme16/node-respond/blob/主/README.md](https://github.com/schme16/node-respond/blob/master/README.md) )

# nosql - HBase - 行键基础

> ID：15917558
> 
> 赞同：8
> 
> 时间：2013-04-10T05:22:11.520
> 
> 标签：nosql, hbase

注意：几个小时前，我开始使用 HBase，我来自 RDBMS 背景：P

我有一个类似 RDBMS 的表 CUSTOMERS 具有以下列：

1.  CUSTOMER_ID 字符串
2.  CUSTOMER_NAME STRING
3.  CUSTOMER_EMAIL 字符串
4.  CUSTOMER_ADDRESS 字符串
5.  CUSTOMER_MOBILE STRING

我想到了以下 HBase 等效项：

> 表：客户行键：客户 ID
> 
> 列族：CUSTOMER_INFO
> 
> 列：姓名电子邮件地址手机

从我读过的任何内容来看，RDBMS 表中的主键与HBase 表的行键*大致相似。*因此，我想保留 CUSTOMER_ID 作为行键。

我的问题既愚蠢又直截了当：

1.  **不管我是使用 shell 命令还是 HBaseAdmin java 类，我如何定义行键？我在 shell 或 HBaseAdmin 类中都没有找到任何可以做的事情（像 HBaseAdmin.createSuperKey(...) 之类的东西）**
2.  给定一个 HBase 表，如何确定行键详细信息，即哪些值用作行键？
3.  *我知道 rowkey 设计是一件至关重要的事情*。假设一个客户 id 接收 CUST_12345、CUST_34434 等值，HBase 将如何使用 rowkey 来决定特定行驻留在哪个区域（假设区域概念类似于 DB 水平分区）？

* *** *编辑添加示例代码片段

我只是想在 shell 中使用“put”为客户表创建一行。我这样做了：

```
hbase(main):011:0> put  'CUSTOMERS', 'CUSTID12345', 'CUSTOMER_INFO:NAME','Omkar Joshi'
0 row(s) in 0.1030 seconds

hbase(main):012:0> scan 'CUSTOMERS'
ROW                              COLUMN+CELL
 CUSTID12345                     column=CUSTOMER_INFO:NAME, timestamp=1365600052104, value=Omkar Joshi
1 row(s) in 0.0500 seconds

hbase(main):013:0> put  'CUSTOMERS', 'CUSTID614', 'CUSTOMER_INFO:NAME','Prachi Shah', 'CUSTOMER_INFO:EMAIL','Prachi.Shah@lntinfotech.com'

ERROR: wrong number of arguments (6 for 5)

Here is some help for this command:
Put a cell 'value' at specified table/row/column and optionally
timestamp coordinates.  To put a cell value into table 't1' at
row 'r1' under column 'c1' marked with the time 'ts1', do:

  hbase> put 't1', 'r1', 'c1', 'value', ts1

hbase(main):014:0> put  'CUSTOMERS', 'CUSTID12345', 'CUSTOMER_INFO:EMAIL','Omkar.Joshi@lntinfotech.com'
0 row(s) in 0.0160 seconds

hbase(main):015:0>
hbase(main):016:0* scan 'CUSTOMERS'
ROW                              COLUMN+CELL
 CUSTID12345                     column=CUSTOMER_INFO:EMAIL, timestamp=1365600369284, value=Omkar.Joshi@lntinfotech.com
 CUSTID12345                     column=CUSTOMER_INFO:NAME, timestamp=1365600052104, value=Omkar Joshi
1 row(s) in 0.0230 seconds 
```

*由于投入最大。5 个参数，我无法弄清楚如何在一个 put 命令中插入整行*。这导致同一行的增量版本不是必需的，我不确定 CUSTOMER_ID 是否被用作行键！谢谢并恭祝安康 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:06:38.833

1.  你不知道，关键（以及任何其他列）是一个字节数组，你可以在那里放任何你想要的东西——甚至封装子实体

2.  不确定我是否理解-每个值都存储为键+列族+列限定符+日期时间+值-所以键就在那里。

3.  HBase 会计算出一条记录将去往哪个区域。当区域变得太大时，它会重新分区。此外，当垃圾太多时，HBase 也会不时执行压缩以重新整理文件。您可以在自己预先分区时控制它，这是您将来绝对应该考虑的事情。但是，由于您似乎刚刚开始使用 HBase，您可以从 HBase 开始处理它。一旦你更好地了解了你的使用模式和数据，你可能会想再过一遍。

[您可以在此处](http://www.slideshare.net/hmisty/20090713-hbase-schema-design-case-studies) 和[此处](http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html)阅读/听到一些有关 HBase 模式设计的信息

# r - R中的db操作异常处理

> ID：15917561
> 
> 赞同：0
> 
> 时间：2013-04-10T05:22:23.263
> 
> 标签：r, sqlite, exception-handling, try-catch

我正在使用以下函数从表中选择值。表名称作为该函数的参数给出。如果表不存在，则会生成错误并停止执行。如果找不到表，我想做一些事情.在R中可能吗？像 try-catch 异常之类的东西？

```
library('RSQLite')
getData <- function(portfolio){
  lite <- dbDriver("SQLite", max.con = 25)
  db <- dbConnect(lite, dbname = "portfolioInfo.db")
  res <- dbSendQuery(db, paste("SELECT * from ",portfolio," ",sep=""))
  data <- fetch(res)
  return (data)
}
getData("table1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:48:25.860

一种方法是检查返回的数据的类别。

我对 RSQLite 不熟悉，但我想如果找到表，它会返回一个数据框，如果找不到，它会返回一个文本错误？

因此，一种可能性是检查是否引发错误：

```
checkQueryResult<-function(data){
    if(class(data)=='data.frame') cat('SQL execution worked!')
    else cat('Something went wrong, table does not exist?')
    }

checkQueryResult(getData("table1")) 
```

但也许 RSQLite 包已经内置了错误处理功能？

# javascript - 使用javascript在页面之间传递参数的不同方法是什么？

> ID：15917564
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:22:41.863
> 
> 标签：javascript, jquery, el

除了在javascript中使用查询参数和全局变量之外，在两个页面之间传递参数有哪些不同的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:25:09.593

是的，您可以通过几种不同的方式将参数传递到另一个页面：

*   通过将参数存储在 cookie 中
*   通过将参数存储在另一个窗口或框架的 JavaScript 变量中
*   通过将参数存储在可重写属性 top.name（浏览器窗口名称）中
*   通过将参数作为
    查询字符串附加到目标页面的 URL

我推荐了这个[**网站**](http://www.javascripter.net/faq/passingp.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:26:57.933

我认为你有 3 个选择

1.  使用服务器端脚本并将参数作为请求参数传递给新页面
2.  使用 cookie 在本地存储值
3.  如果您正在寻找 html5 解决方案，请使用[sessionStorage](http://www.w3.org/TR/2009/WD-webstorage-20091222/#the-sessionstorage-attribute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:27:52.270

您可以使用 DOM 存储（甚至 cookie）来存储信息。

这允许从同一域上的任何页面读取数据。

DOM 存储有多种形式，因此您可以选择存储会话信息或永久存储（直到用户清除它）。

[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

# codeigniter - 会话未在 codeigniter 中设置

> ID：15917567
> 
> 赞同：0
> 
> 时间：2013-04-10T05:22:53.307
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我已经设置了这样的会话

```
$loc_details = array(
                   'maincity_id'  =>$maincity_id,
                   'mainzoneid'     => $mainzoneid,
                   'mainproductid'     => $productid,
               );
        $this->session->set_userdata($loc_details); 
```

在这里我检索到这样的值

```
$maincity_id=$this->session->userdata('maincity_id');

    //$mainzone_id=$this->session->userdata('mainzone_id');
        $mainproduct_id=$this->session->userdata('mainproductid'); 
```

但是如果我看到输出，则会话未设置，任何人都可以帮助解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:27:52.153

你需要这样做…………

```
$loc_details = array(
               'maincity_id'  =>$maincity_id,
               'mainzoneid'     => $mainzoneid,
               'mainproductid'     => $productid,
           );

 $this->session->set_userdata('loc_details',$loc_details);

 $loc_details = $this->session->userdata("loc_details");

 $maincity_id = $loc_details['maincity_id'];

 $mainproduct_id = $loc_details['mainproductid']; 
```

# joomla - 具有地区差异的 joomla 网站

> ID：15917570
> 
> 赞同：0
> 
> 时间：2013-04-10T05:23:08.113
> 
> 标签：joomla, region

我有一个位于一个国家（美国）的 Joomla 网站。我们的任务是创建一个英国/英国版本的网站，它拥有自己的域名，但共享相同的公共页面/帖子/后端。两个版本中大约 75% 的页面是相同的，但会有一些部分（如关​​于和联系）不同，以说明地区差异。

例子

美国网站 (www.example.com) 有

*   主页 关于服务 联系英国网站 (www.example.co.uk) 有 3 页（2 个不同，1 个相同）

*   首页（与美国相同，但网址应为 www.example.co.uk） 关于（内容不同，网址应为 www.example.co.uk/about） 服务（与美国相同，但网址应为www.example.co.uk/services) 联系方式（内容不同，网址应为 www.example.co.uk/contact）

如何设置使用相同后端和基本站点中大部分相同内容但有一些页面差异和不同域的站点的 UK/GB 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:36:41.763

我认为您应该以某种方式依赖 Joomla 的多语言功能！( [http://multilingual-joomla-demo.cloudaccess.net/multi-lingual-steps-by-steps.html](http://multilingual-joomla-demo.cloudaccess.net/multi-lingual-steps-by-steps.html) )

例如为美国/英国定义语言。两者相同的页面，只需将语言设置保留为“全部”。

其余的请指定语言。

希望这可以帮助。

# spring - 为什么 Spring Roo 只显示一个插件？

> ID：15917571
> 
> 赞同：2
> 
> 时间：2013-04-10T05:23:12.580
> 
> 标签：spring, spring-roo

运行`addon search --refresh`只返回一个结果：

```
roo> addon search --refresh
Successfully downloaded Roo add-on Data
1 found, sorted by rank; T = trusted developer; R = Roo 1.2 compatible
ID T R DESCRIPTION -------------------------------------------------------------
01 - Y 0.1.0.BUILD Hindi language support for Spring Roo Web MVC JSP
       Scaffolding; #mvc,#localization,locale:hi
-------------------------------------------------------------------------------- 
```

我正在使用 spring-roo 版本 1.2.2

```
roo> version
    ____  ____  ____  
   / __ \/ __ \/ __ \ 
  / /_/ / / / / / / / 
 / _, _/ /_/ / /_/ /  
/_/ |_|\____/\____/    1.2.2.RELEASE [rev 7d75659] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:04:47.087

最近几个月，插件存储库出现了一些问题 -例如，请参见[此处。](https://jira.springsource.org/browse/ROO-3184)（有点烦人的）解决方法是，如果您可以找到您感兴趣的插件的 URL，您仍然可以通过“osgi obr url add”和“osgi obr deploy”命令加载它。[你可以在这里](http://lalyos.github.io/blog/2012/09/24/spring-roobot-workaround/)看到一个例子。

# javascript - D3：从头开始添加新节点的最佳方式

> ID：15917573
> 
> 赞同：1
> 
> 时间：2013-04-10T05:23:19.117
> 
> 标签：javascript, d3.js

因此，我试图了解[http://bl.ocks.org/mbostock/4062045](http://bl.ocks.org/mbostock/4062045)上的示例并有几个问题。

从例子：

```
 var link = svg.selectAll(".link")
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); }); 
```

基本上所做的（据我所知）是获取“链接”类的所有元素（即没有），然后将“graphs.links”中的所有内容添加到那个空的元素列表中。所有新元素（如“enter()”所示）都被“line”标签封装，具有“class”属性集并被风格化。

我的问题是......如果你知道 selectAll() 不会得到任何东西，为什么要这样做？为什么不这样做？：

```
 var link = svg
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); }); 
```

我想不这样做的一个原因是它似乎不起作用，哈哈，但为什么不呢？

当然，`enter()`如果你假设一切都是新的，这似乎也是多余的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:14:18.453

如果你用 empty 应用这个`graph.links`然后做`console.log(links)`，这就是你在 chrome javascript 控制台上得到的：

> [Array[0]，select：函数，selectAll：函数，attr：函数，classed：函数，样式：函数…]

所以，是的，你将有一个空数组，但是你已经拥有了所有的函数，所以当你之后添加数据时，你不必再做所有的事情。这就是d3的聪明之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:22:30.367

为了理解究竟做了什么，让我们从上到下遍历这个例子：

```
var link = svg.selectAll(".link")
  .data(graph.links)
.enter().append("line")
  .attr("class", "link")
  .style("stroke-width", function(d) { return Math.sqrt(d.value); }); 
```

`selectAll`执行以捕获任何预先存在的链接（与您正确假设的链接不同），并返回一个选择（为空）。然后通过 将数据分配给空选择`data`。`enter`然后根据 中假定的节点与返回的选择之间的差异返回节点`data`选择`selectAll`，在此示例中是所有节点，因为没有预先存在的节点。然后通过 using 将这些节点附加到 svg 元素`append`。

现在，`selectAll`必须使用的原因非常简单： svg 元素是使用`append`这里创建的：

```
var svg = d3.select("body").append("svg")
.attr("width", width)
.attr("height", height); 
```

`append`在这种情况下（因为它在 之后`select`）[返回一个带有一个元素的 d3 选择数组](https://github.com/mbostock/d3/blob/master/src/selection/append.js)via [`select`](https://github.com/mbostock/d3/blob/master/src/selection/select.js)。这假定返回的节点只是[一个元素](https://github.com/mbostock/d3/blob/master/src/selection/selection.js#L63)。因为 Sizzle 引擎返回类数组对象中的所有选择，所以它的行为就像一个数组，但 d3 假定它是一个只有一个节点元素的数组。这就是为什么当你解除`selectAll`and`enter`语句时，[一个单个节点](http://jsfiddle.net/xSTpd/2/)由`data`and绘制`append`。如果您尝试通过重新附加`enter`到语句来更改它，那么您就不走运了：`enter`尝试使其选择包含由定义的所有节点`data`不存在于预先存在的选择中。因为它假定预先存在的选择是一个节点数组，[所以它无法使用`select`](http://jsfiddle.net/xSTpd/4/).

`selectAll`另一方面，[返回所需的节点数组](https://github.com/mbostock/d3/blob/master/src/selection/selection.js#L70)。因为没有预先存在的节点，[您也可以解除字符串选择器](http://jsfiddle.net/ZLS7T/2/)，但最好有它，因为它显示了相应更新所有链接和节点的意图。如果您稍后添加预先存在的节点，则很容易出现错误。

# python - 我听不懂课 （unicode）：在 Python 中？

> ID：15917577
> 
> 赞同：3
> 
> 时间：2013-04-10T05:23:39.417
> 
> 标签：python, oop, object

```
 class Car():  
    def __init__(self,input):  
        self.carName = input  
    def showName(self):  
        print self.carName  
 a = Car("bmw")  
 print type(a)  
 print a 
```

这让我回来了

```
<type 'instance'>
<__main__.Car instance at 0x7f188f38de60> 
```

然而

```
 class Car(unicode):  
    def __init__(self,input):  
        self.carName = input  
    def showName(self):  
        print self.carName  
 a = Car("bmw")  
 print type(a)  
 print a  

<class '__main__.Car'>
bmw 
```

据我了解，打印触发对象。**str** () 方法但这里的 unicode 有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:25:15.630

意义在于您创建了一个继承内置类的类`unicode`。很难理解你为什么要为一个名为`Car`.

# ruby - ruby gem 声明 - 它有什么作用？

> ID：15917578
> 
> 赞同：4
> 
> 时间：2013-04-10T05:23:49.730
> 
> 标签：ruby, gem

我想我对 ruby​​ 脚本顶部的 require/include 语句正在做什么有一个基本的了解，比如

```
require 'rspec' 
```

这些陈述很容易谷歌搜索并找到相关结果。但有时我会看到一个 gem 声明，比如

```
gem 'rspec' 
```

这条线有什么作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T05:38:56.027

在 ruby​​ 代码中，`gem(gem_name, *requirements)`定义在`Kernel`告诉 Ruby 加载特定版本的`gem_name`. 当您安装了同一个 gem 的多个版本时，这很有用。

例如，如果你安装了两个版本`rspec`，比如说`2.12.0`和`2.13.0`，你可以调用`gem`之前`require`使用特定版本。注意`gem`应该在`require`调用之前。

```
gem 'rspec', '=2.12.0'
require 'rspec' 
```

无`gem 'gem_name'`版本使用您机器上的最新版本，这是不必要的。您可以`require`不打电话`gem`来获得相同的行为。

此外，在 Bundler::Dsl 中，`gem`用于告诉 bundler 准备/安装特定版本的 ruby​​ gems。你会在[Gemfile中看到](http://gembundler.com/v1.3/gemfile.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T05:49:19.897

`require`Rubygems 之前的原始行为是在`$LOAD_FILES`变量中列出的所有目录中搜索文件，并加载它找到的第一个匹配的目录。如果没有找到匹配的文件，`require`将引发`LoadError`.

Rubygems 改变了这个过程。使用 Rubygems，`require`将像以前一样搜索现有`$LOAD_PATH`的，但如果没有找到匹配的文件，那么 Rubygems 将在您的机器上搜索已安装的 gem 以查找匹配项。如果找到包含匹配文件的 gem，则*激活*该 gem ，然后`$LOAD_PATH`重复搜索。激活 gem 的主要作用是将 gems`lib`目录添加到您的加载路径中。这样，加载路径的第二次搜索将找到所需的文件。

通常这意味着您已安装的最新版本的 gem 被激活。有时您会想要使用不同版本的 gem，为此您可以使用[`gem`方法](http://ruby-doc.org/stdlib-2.0/libdoc/rubygems/rdoc/Kernel.html#method-i-gem). 该`gem`方法激活一个 gem，你可以指定你想要的版本，但不需要任何文件。当您稍后需要所需的文件时，您将从您指定的 gem 版本中获取它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T05:34:49.750

在 Ruby 中，gem 是具有开箱即用功能的包（作为其他编程语言中的库）。

您在 Ruby 项目中使用的 gem 可以很容易地使用一个名为“bundler”的工具进行管理，只需在 google 上搜索它。您发布的代码片段是 bundler 用于安装和更新您为项目指定的所有库的规范文件的一部分。

如果您正在开发 Ruby on Rails，则使用 gems 和使用 bundler 管理它们是非常常见的，可以说是最佳实践。

Gems 非常棒，因为有很多有用的库可以扩展默认功能，例如 rails，而且您可以开箱即用！

如需宝石列表，请访问 ruby​​gems.org

# c# - 仅序列化那些指定 [XmlElement] 的属性而不更改原始类

> ID：15917584
> 
> 赞同：1
> 
> 时间：2013-04-10T05:24:16.070
> 
> 标签：c#, .net, xml, serialization, xml-serialization

代码：

```
[Serializable]
public class MyClass
{
    [XmlElement("Company")]
    public string Company { get; set; }

    [XmlElement("Amount")]
    public decimal Amount { get; set; }

    public int companyid { get; set; }
} 
```

现在我只想对那些用`[XmlElement]`, companyid 指定的那些不进行序列化。

那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:18:36.530

这是我放在 LinqPad 中的一个简单示例。该`Main`方法的前 4 行设置了一个`XmlAttributeOverrides`实例，然后用于告诉`XmlSerializer`不要序列化该`companyid`属性。

```
void Main()
{
    //Serialize, but ignore companyid
    var overrides = new XmlAttributeOverrides();
    var attributes = new XmlAttributes();
    attributes.XmlIgnore = true;
    overrides.Add(typeof(MyClass), "companyid", attributes);

    using(var sw = new StringWriter()) {
        var xs = new XmlSerializer(typeof(MyClass), overrides);
        var a = new MyClass() { 
                                       Company = "Company Name", 
                                       Amount = 10M, 
                                       companyid = 7 
                                   };
        xs.Serialize(sw, a);
        Console.WriteLine(sw.ToString());
    }
}

[Serializable]
public class MyClass
{
    [XmlElement("Company")]
    public string Company { get; set; }

    [XmlElement("Amount")]
    public decimal Amount { get; set; }

    public int companyid { get; set; }
} 
```

这个程序的输出是：

```
<?xml version="1.0" encoding="utf-16"?>
<MyClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Company>Company Name</Company>
  <Amount>10</Amount>
</MyClass> 
```

如果您需要此代码来检查类以确定基于`XmlElementAttribute`不存在的属性要排除的属性，那么您可以修改上面的代码以使用反射来枚举对象的属性。对于没有 的每个属性`XmlElementAttribute`，将一个项目添加到`overrides`实例中。

例如：

```
void Main()
{
    //Serialize, but ignore properties that do not have XmlElementAttribute
    var overrides = new XmlAttributeOverrides();
    var attributes = new XmlAttributes();
    attributes.XmlIgnore = true;
    foreach(var prop in typeof(MyClass).GetProperties())
    {
        var attrs = prop.GetCustomAttributes(typeof(XmlElementAttribute));
        if(attrs.Count() == 0)
            overrides.Add(prop.DeclaringType, prop.Name, attributes);
    }

    using(var sw = new StringWriter()) {
        var xs = new XmlSerializer(typeof(MyClass), overrides);
        var a = new MyClass() { 
                                Company = "Company Name", 
                                Amount = 10M, 
                                companyid = 7,
                                blah = "123" };
        xs.Serialize(sw, a);
        Console.WriteLine(sw.ToString());
    }
}

[Serializable]
public class MyClass
{
    [XmlElement("Company")]
    public string Company { get; set; }

    [XmlElement("Amount")]
    public decimal Amount { get; set; }

    public int companyid { get; set; }

    public string blah { get; set; }
} 
```

# linux - 如何根据下一行中存在的内容 grep 行？

> ID：15917594
> 
> 赞同：2
> 
> 时间：2013-04-10T05:24:27.903
> 
> 标签：linux, shell, grep

我有大文件，需要获取所需的内容。

以下是我的文件的片段：

```
/home/user/balaji.C
#include<stdio.h>
/home/user/ass.cpp
/home/user/bss.cpp
#include<iostream>
#include<sys/types.h>
/home/user/ne.txt
#include<stdio.h> 
```

我想 grep 唯一的“.C”或“.cpp”类型的行，后面的行应该包含“include”字。预期的输出是：

```
/home/user/balaji.C
/home/user/bss.cpp 
```

我试过了，但无法根据下一行内容进行 grep。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:27:45.693

```
grep -B 1 include $FILE | grep -E '\.(C|cpp)$' 
```

假设 GNU grep（您标记了 Linux），它将通过管道将每个“包含”行*及其前一行*传递给一个 grep，该 grep 只过滤到您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:47:04.850

使用 awk 的一种方法：

```
awk '/include/ && x ~ /\.(C|cpp)$/{print x;}{x=$0;}' file 
```

# ruby-on-rails - 您如何将 OmniAuth (Twitter) 集成到现有用户模型中？

> ID：15917600
> 
> 赞同：1
> 
> 时间：2013-04-10T05:24:55.173
> 
> 标签：ruby-on-rails, ruby, twitter, omniauth

我正在使用 OmniAuth，并且我能够使回调成功工作。

当我浏览`/auth/twitter`并使用 Twitter 登录时，它会引导我返回`/auth/twitter/callback`包含用户 ID、个人资料图片 URL、屏幕名称等的未格式化文本。

我还没有对这个输出做任何事情，这就是我需要帮助的地方。

我已经有一个现有的身份验证系统，我想保持一切原样。我希望从 Twitter 中获取屏幕名称、他们的 oauth_token、他们的 oauth_token_secret 和他们的电子邮件地址（如果可能），以便在我的网站上创建一个新帐户/登录到我的网站。如果我想保持与当前网站完全相同的行为，并且只想允许人们使用 Twitter 登录/注册，我该怎么做？

这是我已经存在的用户表

```
create_table "users", :force => true do |t|
    t.string    "name"
    t.string    "email"
    t.timestamp "created_at",                         :null => false
    t.timestamp "updated_at",                         :null => false
    t.string    "password_digest"
    t.string    "remember_token" 
```

我可以将 oauth_token 和 oauth_token_secret 列添加到该表并使其以这种方式工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:15:43.537

你可以。检查 Ryans railscasts.com/episodes/241-simple-omniauth。另请注意，twitter 不会返回电子邮件。如果您计划允许使用 twitter 或传统用户/密码登录（如果用户选择后者，您可能需要处理验证部分），您可能还需要更改用户模型以允许密码为 null 等

# java - JAXB 是否可以将两个或多个元素编组到一个域对象字段中？

> ID：15917610
> 
> 赞同：3
> 
> 时间：2013-04-10T05:25:36.990
> 
> 标签：java, xml, jaxb, moxy

我有两种不同的 XML 结构，我想映射到一个域对象。我正在使用 MOXy 的外部绑定支持，因此我可以选择动态使用哪个绑定。

这是我的问题。我有一个类似于下面的 XML 结构：

```
<entity>
   <compoundID_one>foo</compoundID_one>
   <compoundID_two>bar</compoundID_two>
</entity> 
```

我想`List<String>`在我的域类中有一个包含“foo”和“bar”的字段

我试过这个：

```
...
<java-attributes>
    <xml-elements>
        <xml-element java-attribute="idList" name="compoundID_one" />
        <xml-element java-attribute="idList" name="compoundID_two" />
    </xml-elements>
</java-attributes>
... 
```

但我只是获取`null`域对象中的字段。如果我省略`xml-elements`包装器，我只会得到列表中的一个 CompoundID。

我发现这个[问题](https://stackoverflow.com/questions/11128191/jaxb-unmarshalling-xml-with-multiple-names-for-the-same-element/11128395#comment22671073_11128395)似乎表明这应该可行。我做错了什么还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:32:52.680

我只是绑定 XML 错误，应该是：

```
...
<java-attributes>
    <xml-elements java-attribute="idList">
        <xml-element name="compoundID_one" />
        <xml-element name="compoundID_two" />
    </xml-elements>
</java-attributes>
... 
```

现在一切正常。

# c# - Drawing Line to next point in realtime

> ID：15917611
> 
> 赞同：1
> 
> 时间：2013-04-10T05:25:41.440
> 
> 标签：c#, wpf, drawing, line

My current program allows the user to click a point, then click another point (at least 20 pixels away) and draws a line between the 2 points. I've used a Polyline so that this can be done multiple times. Though the set of all the lines only appear after all the click are done.

```
void DrawingCanvas_MouseUp(object sender, MouseButtonEventArgs e) {
        Point position = e.GetPosition(this);

        if (leftList == null) {
            //starting a new set
            leftList.Add(position);
            lastPoint = position;
            return;
        }
        //calculate distance, i.e. end click
        double a = lastPoint.X - position.X;
        double b = lastPoint.Y - position.Y;
        double distance = Math.Sqrt(a * a + b * b);
        if (distance > 20) {
            //continue to add to list
            leftList.Add(position);
            lastPoint = position;
        } else {
            //end of the line
            paint();
            leftList = new PointCollection(); 
        }

    }

    private void paint() {
        Polyline line = new Polyline();
        line.Visibility = System.Windows.Visibility.Visible;
        line.StrokeThickness = 2;
        line.Stroke = System.Windows.Media.Brushes.Black;
        line.Points = leftList;
        myCanvas.Children.Add(line);
    } 
```

So my question is two-fold:

A) How do I make it so that after each click the new line is immediately added.

B) How do I render a line between the last point and where the mouse cursor is currently at (i.e. just before you choose your next point)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:00:10.307

The following simple example starts drawing a new polyline when the left mouse button is pressed and the mouse is moved by the minimum point distance of 20, with the button kept pressed. It draws the last polyline segment (to the current mouse position) in either red or green, depending on its length. If the mouse button is released and the length of the new segment is >= 20, a new point is appended to the polyline. Otherwise the polyline is terminated, and a new polyline can be created.

```
private Polyline polyline;
private Polyline segment = new Polyline { StrokeThickness = 2 };

private void Canvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (polyline == null)
    {
        var canvas = (Canvas)sender;
        var point = e.GetPosition(canvas);

        // create new polyline
        polyline = new Polyline { Stroke = Brushes.Black, StrokeThickness = 2 };
        polyline.Points.Add(point);
        canvas.Children.Add(polyline);

        // initialize current polyline segment
        segment.Stroke = Brushes.Red;
        segment.Points.Add(point);
        segment.Points.Add(point);
        canvas.Children.Add(segment);
    }
}

private void Canvas_MouseMove(object sender, MouseEventArgs e)
{
    if (polyline != null)
    {
        // update current polyline segment
        var canvas = (Canvas)sender;
        segment.Points[1] = e.GetPosition(canvas);

        var distance = (segment.Points[0] - segment.Points[1]).Length;
        segment.Stroke = distance >= 20 ? Brushes.Green : Brushes.Red;
    }
}

private void Canvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    if (polyline != null)
    {
        var canvas = (Canvas)sender;
        segment.Points[1] = e.GetPosition(canvas);

        var distance = (segment.Points[0] - segment.Points[1]).Length;

        if (distance >= 20)
        {
            polyline.Points.Add(segment.Points[1]);
            segment.Points[0] = segment.Points[1];
        }
        else
        {
            if (polyline.Points.Count < 2)
            {
                canvas.Children.Remove(polyline);
            }

            polyline = null;
            segment.Points.Clear();
            canvas.Children.Remove(segment);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:55:14.160

please maintain a collection of points on every click. in collection you can add one class which will have two properties like StartPoint and EndPoint.

when the mouse is clicked first time just add one class object to collection having start point only. and when you click the mouse next time, ad end point to the last object of the class and meanwhile create a new object and assign this point as its start point and add it to collection, after that call the paint function.

# function - 在创建共享库的不同情况下，该库可以调用哪些函数？

> ID：15917612
> 
> 赞同：0
> 
> 时间：2013-04-10T05:25:45.250
> 
> 标签：function, gcc, shared-libraries

我已阅读有关共享库和静态库的相关教程，例如：

[“使用 gnu 编译器 [gcc] 创建共享和静态库”](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)

[“静态、共享动态和可加载的 Linux 库”](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

然而，不幸的是，他们使用的所有示例都是一个函数一个 .c 文件。

我有两个问题：

(1) 如果我有一个文件有两个以上的功能，例如example1.c

```
void ctest11(int *i)
{ *i = 5; }

void ctest12(int *i)
{ *i = 5; } 
```

将exmaple1.c编译成libexample1.so后，可以在里面调用ctest11和ctest12吗？

(2) 如果我有一个文件有两个以上的函数，其中一个是主函数，比如example2.c

```
void ctest21(int *i)
{ *i = 5; }

void main(int *i)
{ *i = 5; } 
```

将exmaple2.c编译成libexample2.so后，和编译一个只有ctest21函数的.c文件一样吗？

（3）如果我有一个文件example3.c和exmaple4.c example3.c中的函数会使用example4.c中的函数 例如：example3.c

```
void ctest31(int *i)
{ *i = ctest41(2,3); } 
```

例子4.c

```
int ctest41(int a, int b)
{ return a+b; } 
```

当我将example2.c和example3.c编译为libexample23.so时，我可以同时调用ctest31和ctest41吗？

但是如果gcc example2.c example3.o to libexample2.so，我想我只能调用ctest31吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:33:25.213

您应该查看（并构建）一些现有的免费软件库，对其进行编译，并研究其代码和构建过程。

一般来说，一个共享对象可以由几个 C 源文件`src1sh.c`和`src2sh.c`......很多时候，编译是由一个构建器程序驱动的，通常是[GNU make](http://www.gnu.org/software/make/)

首先，您需要将共享对象的每个源文件编译为与[位置无关的代码](http://en.wikipedia.org/wiki/Position-independent_code)(PIC)，例如

```
gcc -Wall -fPIC src1sh.c -c -o src1sh.pic.o
gcc -Wall -fPIC src2sh.c -c -o src2sh.pic.o 
```

^(您可能希望添加`-g`到`gcc`标志以进行调试。一旦你的程序和共享对象没有错误，因为你已经用`gdb`和调试了它们`valgrind`，传递`-O2`给`gcc`它们以优化它们。)

然后您需要将所有这些 PIC 对象文件链接到单个共享对象（`*.so`文件）中，例如

```
gcc -shared src1sh.pic.o src2sh.pic.o -o shared.so 
```

如果您的意图是创建一个共享库，请调用它，`lib*.so`例如`libfoo.so`，并将其作为使用共享库的链接命令的`-lfoo`标志。`gcc`

请注意，链接共享对象也可能链接其他共享库，因此您可以这样做

```
gcc -shared src1sh.pic.o src2sh.pic.o -lsome -o shared.so 
```

将一些链接`libsome.so`到您的`shared.so`

您通常不会编译包含 a 的共享对象`main`（请记住，这`main`是一个非常特殊的函数，在*C*`crt*.o`标准中专门描述，并从链接`gcc`到每个程序的启动代码中调用）；这几乎是无意义的（就像你的`libexample2.so`）。您`main`在您的程序中定义（并且您的程序可执行文件不需要 PIC 代码）。如果您的程序由源文件制成`src1pr.c`并且`src2pr.c`（定义`main`）您首先将它们编译为

```
gcc -Wall src1pr.c -c -o src1pr.o
gcc -Wall src2pr.c -c -o src2pr.o 
```

你把它们都用例如

```
gcc src1pr.o src2pr.o -o prog -lshared 
```

where`-lshared`指的是一个共享库`libshared.so`（您可能希望编译和链接您的程序文件以`-g`获取调试信息，并且您可能希望`-I`为包含目录传递其他标志，并`-L`为库目录传递标志，例如`-L.`在当前目录中搜索库.. .)

有一种方法可以**在运行时动态链接**一些共享对象，特别是对于拥有[plugins](http://en.wikipedia.org/wiki/Plug-in_%28computing%29)。然后，您想为此使用[dlopen](http://man7.org/linux/man-pages/man3/dlopen.3.html) & `dlsym`functons（并且您通常希望将主程序与`-rdynamic`标志链接）。

您可以（从您的程序）调用共享对象内的任何*可见函数。*您可能想要使用`visibility` [函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)来限制共享对象内某些函数的可见性。您可能希望稍后使用该`constructor`属性，以便在初始化时尽早调用共享对象内的函数（如果它是插件，则在其`dlopen`时间）。

阅读[Program Library Howto](http://tldp.org/HOWTO/Program-Library-HOWTO/)和[Levine 的“Linkers and Loaders”一书](http://www.iecc.com/linker/)了解更多信息。Linux 共享对象（以及可重定位对象`*.o`和可执行二进制文件）采用[可执行和可链接格式](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)（ELF 是行业标准）。[应用程序二进制接口](http://en.wikipedia.org/wiki/Application_binary_interface)（尤其是处理器的 ABI 补充，例如[AMD64 ABI 补充](http://ensiwiki.ensimag.fr/images/d/de/System_V_Application_Binary_Interface_AMD64_Architecture_Processor_Supplement.pdf)）中描述了一些进一步的细节。

PS。你真的想要一个像 GNU *make*这样的构建器来组合所有这些步骤，所以请阅读它的文档。你可能想通过`-v`来`gcc`了解它在做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:37:37.763

感谢 Basile 的精彩解释。据我了解，与我的问题有关，

(a) 对于我的第一个问题 (1)，一个目标文件中有多个函数。我可以在 libexample1.so 中调用 ctest11 和 ctest12

我可以设置 libexample1.so 中函数的可见性。

(b) 对于我的第三个问题 (3)，第一个场景与从两个目标文件创建一个库有关。我可以调用文件中的任何函数。第二个场景与创建一个库并与另一个库链接有关。我可以调用库中的任何函数，包括链接库。

(3) 我还是不明白 main 函数的情况。你说，“你通常不会编译包含 main 的共享对象；这几乎是无意义的（比如你的 libexample2.so）。”

我知道这是无稽之谈。但是如果我不想改变程序文件，想把它编译成一个库，比如说在example2.c中，我把它编译成example2.so，并想调用函数ctest21。我可以这样做吗？

例子2.c

```
void ctest21(int *i)
{ *i = 5; }

void main(int *i)
{ *i = 5; } 
```

我把它编译成一个库。

```
gcc -fPIC -g -c -Wall example2.c
gcc -shared -o libexample2.so example2.o 
```

我想我可以在 example2.o 中调用 crest21 函数。但是主要功能是没用的。我的理解正确吗？

# mfc - 我覆盖了 WM_CLOSE，现在如何从应用程序中出来

> ID：15917614
> 
> 赞同：0
> 
> 时间：2013-04-10T05:25:46.520
> 
> 标签：mfc

我是 Windows 编程的新手，我用单个对话框编写了一个应用程序。在那我覆盖 CWnd::OnClose 在退出应用程序之前做一些事情。之后我需要从应用程序中退出。但是如果我从重写的方法发布或发送带有 WM_CLOSE 事件的消息，它也会被调用，所以现在如何从应用程序中退出。

```
class MyDlg : public CDialogEx
{
public:
afx_msg void OnClose();
};

BEGIN_MESSAGE_MAP(MyDlg , CDialogEx)
ON_WM_CLOSE ()
END_MESSAGE_MAP()

void MyDlg:: OnClose()
{
  //what code I should write here to exit from application. 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:58:57.097

after you do your stuff write this:

```
__super::OnClose(); 
```

# java - Android：使用一个套接字连接跨所有活动

> ID：15917620
> 
> 赞同：3
> 
> 时间：2013-04-10T05:26:08.893
> 
> 标签：java, android, sockets, java-server

基本思想是，当应用程序启动时，一个类将简单地建立到服务器的套接字连接并定义输出和输入流，这些应该通过需要交互的所有不同活动来访问，因此套接字必须始终处于活动状态并准备就绪。

到目前为止，我的想法是创建一个简单地创建套接字和连接的类：

```
public class connection {
    private  String HostIPaddress = "XXX.XXX.XXX.XXX";
    private  int PORT = XXXX;
    public  Socket sock = null;
    public  DataOutputStream out = null;
    public  DataInputStream in = null;

    public void assignStreams(){
        try{
            sock = new Socket(getHostIPaddress(),getPORT());
            out = new DataOutputStream(sock.getOutputStream());
            in = new DataInputStream(sock.getInputStream());
        }catch (Exception ex) {
            Log.i("Connection Error",ex.toString());
        }
      }
    } 
```

然后从首先运行的活动中，创建此类的静态对象，所有其他活动都可以访问该对象。听起来这可行，但我希望有更多的想法或反馈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:36:31.937

不，不是一个好主意。用户可以随时关闭互联网，而您的班级正在使用网络连接，而此时可能根本不需要网络连接。插座后清理也是不可能的。你怎么知道什么时候`close()`去呢？

您最好根据需要创建这些。您的课程的封装也很差。

```
public  Socket sock = null;
public  DataOutputStream out = null;
public  DataInputStream in = null; 
```

这些流可以随时重新分配。用 getters() 和 setters() 保护它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:55:42.090

我不知道为什么这是不可能的。

是不是个好主意，我不知道。

我用你的方式实现它的两分钱是，创建一个单例类。

[单例模式示例](http://www.javacoffeebreak.com/articles/designpatterns/)

这篇文章的学分转到[http://www.javacoffeebreak.com/](http://www.javacoffeebreak.com/)

除了他们的准系统实现之外，确保你有一个方法来检索你的套接字，同样重要的是，关闭你的套接字。当您的应用程序被破坏时，您可以执行此操作。我相信应用程序对象的 onDestroy 方法是一个不错的地方，因为我记得这将是在您的应用程序完全耗尽内存之前调用的最后一个 onDestroy 方法。

话虽如此..如果您的应用程序崩溃怎么办？你需要以某种方式清理。按需创建套接字可能是最安全的方法。

请注意，如果您有一个在活动期间始终打开的套接字，则很容易忘记您需要关闭它。管理每个活动而不是全局的套接字的另一个原因。

# android - 如何将标志添加到 APPWIDGET_CONFIGURE 意图？

> ID：15917621
> 
> 赞同：0
> 
> 时间：2013-04-10T05:26:14.093
> 
> 标签：android, android-intent, android-widget, android-activity, intentfilter

我在以下位置注册了一项活动`APPWIDGET_CONFIGURE`：

```
 <activity android:name="com.tahanot.activities.NearbyStops">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
        </intent-filter>
    </activity> 
```

但是，此活动的行为不符合预期。它在现有堆栈内打开，当我按下后退按钮时，它会将我带到其他活动而不是关闭任务。理想情况下，我希望`APPWIDGET_CONFIGURE`包含`FLAG_ACTIVITY_NEW_TASK`和`FLAG_ACTIVITY_MULTIPLE_TASK`.

是否可以在 中指定标志`AndroidManifest.xml`，如果没有，您会建议什么解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:18:34.450

考虑为活动元素指定launchMode 属性。

```
<activity android:launchMode="singleTask" android:name="com.tahanot.activities.NearbyStops">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
    </intent-filter>
</activity> 
```

根据[官方文档](http://developer.android.com/guide/components/tasks-and-back-stack.html)，

> FLAG_ACTIVITY_NEW_TASK
> 
> 在新任务中启动活动。如果您正在启动的 Activity 的任务已经在运行，则该任务将被带到前台并恢复其最后状态，并且该 Activity 在 onNewIntent() 中接收新意图。
> 
> **这会产生与上一节中讨论的“singleTask”** launchMode 值相同的行为。

既然你提到你想要`FLAG_ACTIVITY_NEW_TASK`行为，所以 singleTask launchMode 可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:29:36.063

开始活动时使用此 java 代码

```
Intent intent = new Intent(this,
        activityname.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

在这里，您可以像这样使用您的意图对象添加标志。

您还可以添加多个标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:22:42.620

这是我使用的清单声明，遵循 approxcom 对 android:launchMode 的想法：

```
<activity
    android:name="com.tahanot.activities.NearbyStops"
    android:configChanges="orientation"
    android:label="@string/title_activity_stops_nearby"
    android:launchMode="singleTop"
    android:taskAffinity="com.tahanot.tasks.widgetConfiguration" > 
    <!-- android:launchMode makes sure the Back button doesn't navigate to another NearbyStops activity. 
         android:taskAffinity makes sure the Back button doesn't navigate to some other activity. -->
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
    </intent-filter>
</activity> 
```

# extjs - 我如何控制煎茶标签面板导航

> ID：15917628
> 
> 赞同：1
> 
> 时间：2013-04-10T05:26:49.677
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有一个带有四个选项卡的选项卡，应用程序完成启动后，我正在显示选项卡面板（第一个选项卡将是活动项目），当用户尝试点击任何其他 3 个选项卡时，我需要检查用户是否已经登录。

如果用户没有登录，那么我需要显示登录布局面板，并且我需要将第一个选项卡设置为活动项目。

如果用户登录，那么我需要 2/3/4 选项卡，你点击了什么。

如果用户没有登录，我可以显示登录覆盖面板，但是将活动项目更改回第一个选项卡是问题所在。

**我在标签面板视图中编写了以下代码**

```
 listeners : {
    activeitemchange : function() {
        var token = localStorage.token; // user already logged in there will be a token at localStorage.
        if (token == undefined || token == '') {
            this.setActiveItem(0);
            this.getAt(0).setActiveItem('firstTab');
        }
    }
} 
```

它显示这样的错误但是，它正在工作（我不希望出现以下错误，即使它工作）

```
Uncaught Error: [ERROR][Ext.Container#factoryItem] Invalid config, must be a valid config object sencha-touch-all-debug.js:26029
Ext.define.doWrite sencha-touch-all-debug.js:26029
Ext.define.write sencha-touch-all-debug.js:18416
Ext.define.log sencha-touch-all-debug.js:18298
(anonymous function) sencha-touch-all-debug.js:18316
Ext.apply.factory sencha-touch-all-debug.js:9221
Ext.define.factoryItem sencha-touch-all-debug.js:64065
Ext.define.applyActiveItem sencha-touch-all-debug.js:64664
(anonymous function) sencha-touch-all-debug.js:27233
Ext.define.config.listeners.activeitemchange /myapp/app/view/myTab.js?_dc=1365571204916:39
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatchEvent sencha-touch-all-debug.js:22330
Ext.define.doFireEvent sencha-touch-all-debug.js:26577
Ext.define.fireAction sencha-touch-all-debug.js:26566
(anonymous function) sencha-touch-all-debug.js:27246
Ext.define.config.listeners.activeitemchange /myapp/app/view/myTab.js?_dc=1365571204916:38
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatchEvent sencha-touch-all-debug.js:22330
Ext.define.doFireEvent sencha-touch-all-debug.js:26577
Ext.define.fireAction sencha-touch-all-debug.js:26566
(anonymous function) sencha-touch-all-debug.js:27246
Ext.define.doTabChange sencha-touch-all-debug.js:76619
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatch sencha-touch-all-debug.js:58971
Ext.define.publish sencha-touch-all-debug.js:59031
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatchEvent sencha-touch-all-debug.js:22330
Ext.define.doFireEvent sencha-touch-all-debug.js:26577
Ext.define.fireAction sencha-touch-all-debug.js:26566
(anonymous function) sencha-touch-all-debug.js:27246
Ext.define.onTabTap sencha-touch-all-debug.js:76344
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatch sencha-touch-all-debug.js:58971
Ext.define.publish sencha-touch-all-debug.js:59031
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatchEvent sencha-touch-all-debug.js:22330
Ext.define.doFireEvent sencha-touch-all-debug.js:26577
Ext.define.fireAction sencha-touch-all-debug.js:26566
Ext.define.onTap sencha-touch-all-debug.js:56146
Ext.define.doFire sencha-touch-all-debug.js:17322
Ext.define.fire sencha-touch-all-debug.js:17249
Ext.define.doDispatchEvent sencha-touch-all-debug.js:22349
Ext.define.dispatch sencha-touch-all-debug.js:17687
Base.implement.callParent sencha-touch-all-debug.js:4516
Ext.define.dispatch sencha-touch-all-debug.js:23074
Ext.define.doPublish sencha-touch-all-debug.js:23116
Ext.define.publish sencha-touch-all-debug.js:23081
Base.implement.callParent sencha-touch-all-debug.js:4516
Ext.define.publish sencha-touch-all-debug.js:23473
Ext.define.onRecognized sencha-touch-all-debug.js:23457
Ext.define.fire sencha-touch-all-debug.js:17748
Ext.define.onTouchEnd sencha-touch-all-debug.js:24429
Ext.define.invokeRecognizers sencha-touch-all-debug.js:23523
Ext.define.onTouchEnd sencha-touch-all-debug.js:23672
override.processEvent sencha-touch-all-debug.js:23744
Ext.define.onEvent sencha-touch-all-debug.js:23350
Base.implement.callParent sencha-touch-all-debug.js:4516
override.onEvent sencha-touch-all-debug.js:23740
(anonymous function) sencha-touch-all-debug.js:3128 
```

这是我的标签面板

```
 Ext.define('myapp.view.myTab', {
    extend : 'Ext.TabPanel',
    xtype : 'mytab',
    requires : [ 'myapp.view.FirstTab', 'myapp.view.SecondTab',
            'myapp.view.ThirdTab', 'myapp.view.FourthTab' ],
    id : 'mytab',
    config : {
        fullscreen : true,
        tabBarPosition : 'bottom',
        ui: 'myUI',
        items : [ {
            xtype : 'firsttab',
            iconCls : 'broadcast',
            title : 'first tab'
        }, {
            xtype : 'secondtab',
            iconCls : 'user_fave',
            title : 'second tab'
        },{
            xtype : 'thirdtab',
            iconCls : 'user3',
            title : 'third tab'
        },{
            xtype : 'fourthtab',
            iconCls : 'address_book',
            title : 'Contacts',
            id : 'Fourth Tab'
        } ],
        listeners : {
            activeitemchange : function() {
                var token = localStorage.token;
                if (token == undefined || token == '') {
                    this.setActiveItem(0);
                    // this.getAt(0).setActiveItem('firsttab');
                }
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:15:39.477

根据我的理解，您正在尝试做的是，当用户未登录时，您不想在弹出窗口或消息框中显示一些消息，而是要激活显示登录表单的选项卡项。

因此，与其监听`activeitemchange`事件，不如在活动*项*更改之前进行登录检查。但是没有这样的事件。我尝试使用`addBeforeListener`for *activeitemchange*，但它属于递归调用。所以我尝试`addAfterListener`了*activeitemchange*并且它起作用了。这是我尝试过的，

```
 Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'bottom',

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'First Tab',
            iconCls: 'broadcast',
            html: 'First Tab'
        },
        {
            title: 'Second Tab',
            iconCls: 'user_fav',
            html: 'Second Tab'
        },
        {
            title: 'Third Tab',
            iconCls: 'user3',
            html: 'Third Tab'
        },
        {
            title: 'Forth Tab',
            iconCls: 'address_book',
            html: 'Forth Tab'
        },
        {
            title: 'Fifth Tab',
            iconCls: 'user',
            html: 'Fifth Tab'
        }

    ],
    listeners:{
        initialize:function(){
            var counter = 1;
            this.addAfterListener("activeitemchange",function(){
               counter += 1;
               if(counter >= 4){
                   if(this.getActiveItem().title !="First Tab")
                       this.setActiveItem(0);
                   else
                        return false;
               }
           });
        }
    }
}); 
```

我试图通过使用计数器来模拟*登录/注销的情况。*因此，当计数器达到 >= 4 时，选项卡面板将活动项目设置为第一个项目。在这里，我使用标题来标识当前处于活动状态的项目。如果当前活动项目是“第一个选项卡”（在您的情况下，它是登录表单的标题），那么不要做任何事情。

试一试，它有效。

# ajax - jsf 2：如何让 Primefaces 折线图每 1 秒改变一次？

> ID：15917629
> 
> 赞同：0
> 
> 时间：2013-04-10T05:26:52.443
> 
> 标签：ajax, jsf-2, primefaces

基本上，我想使用 Primefaces 折线图实现一个网页，该折线图可以每秒更改一次。

在我的托管 bean 中，我从我的数据库中获得了 100 个数据。我不想一次全部填充折线图，而是想像数据波一样显示它们，这样这 100 条数据可以在 100 秒内显示出来。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:13:09.140

您应该从数据库中获取 100 个数据并将它们存储在一个列表中，比如说主列表，并且应该还有一个列表，每隔一秒刷新一次，并且主列表的当前元素将附加到第二个列表中。某事。像那样：

```
@ManagedBean
@ViewScoped
public class DataBean {

    private ArrayList<Data> mainList;//fill this from DB via seperate DAO class
    private ArrayList<Data> viewList;
    public int counter;
    //getter and setters
    public void refreshList() {
        viewList.add(mainList.get(counter);
        counter++;
    } 
} 
```

在视图层，您应该`refreshList`定期调用方法，当然这可以使用`p:poll`or来完成`p:remoteCommand`。RemoteCommand 需要通过 JS 代码多次调用，就像：

```
jQuery(document).ready(function () {
    setInterval("updateChart", 1000);//every 1 sec
}); 
```

而这个功能。将调用`p:remoteCommand`名为`updateChart`：

```
<p:remoteCommand name="updateChart" actionListener="#{dataBean.refreshList}"
                             update="myChart"/> 
```

`myChart`是您的`p:lineChart`组件的客户端 ID，您必须提供准确的 ID，您可以通过浏览器的开发人员设置检测它。

请记住，这不是可能存在错误的确切实现，并且`p:lineChart`需要模型类而不是 arrayLists，我从未使用过图表组件，但我假设系列类似于列表。希望这可以指导你。

# sql - 如何更改 sp_send_dbmail 查询的附件编码？

> ID：15917630
> 
> 赞同：1
> 
> 时间：2013-04-10T05:26:57.057
> 
> 标签：sql, email, encoding, sp-send-dbmail

我`sp_send_dbmail`用来生成和发送提供给其他程序的文件。该程序消化“ANSI/ASCII”和“ISO-8859-1”编码。但我不能`sp_send_dbmail`做一个。

过程调用如下所示

```
exec msdb.dbo.sp_send_dbmail 
    @profile_name= @profile_name, 
    @recipients  = @recipients,
    @body = @body,
    @subject = @subject,
    @attach_query_result_as_file = 1, 
    @query_result_header = 0,
    @query_result_no_padding = 1,
    @query = @query,
    @query_attachment_filename = @fname,
    @query_result_width = 4000,
    @mailitem_id = @mailitem_id OUTPUT 
```

因此，附件是根据传递的查询结果创建的。但是由于某种原因实际附加到邮件的结果文件是使用 UCS2 Little Endian 编码的。有没有办法改变它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:35:22.473

Found workaround that allow to switch between UTF/ANSI. In order to do that you need to modify `sp_send_dbmail` like that:

1.  Add new parameter to procedure somemthing like `@ANSI_Attachment BIT = 0`
2.  Replace piece of its code `IF(@AttachmentsExist = 1) BEGIN ....... END` with

`IF (@AttachmentsExist = 1)

```
BEGIN
    if (@ANSI_Attachment = 1) 
    begin
        --Copy temp attachments to sysmail_attachments      
        INSERT INTO sysmail_attachments(mailitem_id, filename, filesize, attachment)
        SELECT @mailitem_id, filename, filesize, 
                convert(varbinary(max), 
                    substring( -- remove BOM mark from unicode
                        convert(varchar(max), CONVERT (nvarchar(max), attachment)), 
                        2, DATALENGTH(attachment)/2
                    )
                )
        FROM sysmail_attachments_transfer
        WHERE uid = @temp_table_uid
    end else begin
        --Copy temp attachments to sysmail_attachments      
        INSERT INTO sysmail_attachments(mailitem_id, filename, filesize, attachment)
        SELECT @mailitem_id, filename, filesize, attachment
        FROM sysmail_attachments_transfer
        WHERE uid = @temp_table_uid
    end
END ` 
```

This does the same but if in procedure call @ANSI_Attachment = 1 is used it removes unicode BOM mark before sending.

Peeked that solution [here](https://stackoverflow.com/questions/42703/sp-send-dbmail-attachment-encoding)

# android - 无法在我的活动中使用 AsyncTask

> ID：15917632
> 
> 赞同：0
> 
> 时间：2013-04-10T05:27:08.170
> 
> 标签：android, android-asynctask

我在使用时遇到问题`AsyncTask`..当我尝试使用 AsyncTask 时出现错误..但是当我删除它时，一切正常..有人可以帮我解决这个问题吗？我也搜索并发现我必须添加`onpause()`但它没有工作。这是我的代码

```
package co.tosca.persianpoem;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class Database_list extends Activity {

    persian_poem_class main=new persian_poem_class(this);
    public List<String> selected_databases = new ArrayList<String>();
    public ProgressDialog pd;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_database_list);
        File path=new File(ClubCP.SDcardPath+"/temp/database/");
        List<String>file_lists =    main.directoryPath(path,false);
        Log.i("file_list",file_lists.toString());
        ListView Database_list=(ListView)findViewById(R.id.database_list);
        final InteractiveArrayAdapter arrayadapter=new InteractiveArrayAdapter(this,file_lists);
        Database_list.setAdapter(arrayadapter);
        Button build =(Button)findViewById(R.id.btn_build_database);
        build.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                selected_databases=arrayadapter.getSelectedItems();
                if(selected_databases.isEmpty()!=true){
                    new bulid_database().execute();

                }
                else{
                    Toast.makeText(Database_list.this, "At least select one database", 1).show();
                }
            }
        });
    }
    @Override
    public void onPause()
    {
        super.onPause();
        if(pd != null)
            pd.dismiss();
    }
    private class bulid_database extends AsyncTask<String, Long, Void> {

        // Begin - can use UI thread here
        protected void onPreExecute() {
              pd = ProgressDialog.show(Database_list.this,"","Please wait...", true,false);
        }
        // this is the SLOW background thread taking care of heavy tasks
        // cannot directly change UI
        protected Void doInBackground(final String... args) {
            // simulate here the slow activity
            main.emptyDB();
            main.creatDB(8);
            for (int i =0; i < selected_databases.size(); i++) {

                main.attachDatabase(selected_databases.get(i));
                //publishProgress((long)i);
            }
                return null;
                }
        // periodic updates - it is OK to change UI
        @Override
        protected void onProgressUpdate(Long... value) {
            pd.setMessage("still working");
        }
        // End - can use UI thread here
        protected void onPostExecute(final Void unused) {
            if (pd!=null) {
                pd.dismiss();
                }
        }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.database_list, menu);
        return true;
    }

} 
```

这是错误

```
04-10 09:39:15.467: W/dalvikvm(3411): threadid=12: thread exiting with uncaught exception (group=0x2b542210)
04-10 09:39:15.497: E/AndroidRuntime(3411): FATAL EXCEPTION: AsyncTask #1
04-10 09:39:15.497: E/AndroidRuntime(3411): java.lang.RuntimeException: An error occured while executing doInBackground()
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.lang.Thread.run(Thread.java:856)
04-10 09:39:15.497: E/AndroidRuntime(3411): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.os.Handler.<init>(Handler.java:121)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.widget.Toast$TN.<init>(Toast.java:317)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.widget.Toast.<init>(Toast.java:91)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.widget.Toast.makeText(Toast.java:233)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at co.tosca.persianpoem.persian_poem_class.creatDB(persian_poem_class.java:224)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at co.tosca.persianpoem.Database_list$bulid_database.doInBackground(Database_list.java:65)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at co.tosca.persianpoem.Database_list$bulid_database.doInBackground(Database_list.java:1)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-10 09:39:15.497: E/AndroidRuntime(3411):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-10 09:39:15.497: E/AndroidRuntime(3411):     ... 5 more 
```

这是 `attach_database`

```
public void attachDatabase(String database_name){
     Log.i("attach_database",database_name);
    //closeMyDb();
    //openMyDb();
     Db.close();
     Db = SQLiteDatabase.openDatabase(ClubCP.DbPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
    try{
    String sql="attach '"+ClubCP.SDcardPath+"/temp/database/"+database_name+"' as toMerge; insert into cat select * from toMerge.cat; insert into poem select * from toMerge.poem; insert into verse select * from toMerge.verse; insert into poet select * from toMerge.poet;detach database toMerge;";
     String[] queries = sql.split(";");

          for(String query : queries){
              Db.execSQL(query);
          }
     Db.close();
    }
    catch (Exception e) 
    {
        Toast.makeText(c, e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.i("attach_database",e.getMessage());
    }

} 
```

我已经搜索并找到了类似的问题，但问题仍然发生 [progressdialog-how-to-prevent-leaked-window](https://stackoverflow.com/questions/6614692/progressdialog-how-to-prevent-leaked-window)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:40:53.773

由于您在块内部方法`Toast`中显示，可能存在问题。`catch``attachDatabase()`

**问题：**

```
 catch (Exception e) 
    {
        Toast.makeText(c, e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.i("attach_database",e.getMessage());
    } 
```

[`runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)如果您想`Toast`在遇到任何异常时显示消息，请通过实施来覆盖它。

**例子：**

```
runOnUiThread(new Runnable() {
    public void run() {
        Toast.makeText(context, "Hello world", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:38:40.067

您似乎**在 doInBackground() 的 main.attachDatabase() 中显示 toast，**这是不可能的。这就是你得到例外的原因。**doInBackGround() 在后台线程中运行。您正在显示 toast，即从后台线程更新 ui。**

**在 doInBackground() 中返回结果。在 onPostExecute() 中显示基于结果的 toast。**

```
 class TheTask extends AsyncTask<Void,Void,Void>
 {
    protected void onPreExecute()
     {
     //display progressdialog.
     } 

  protected void doInBackground(Void ...params)//return result here  
{  
//http request. do not update ui here

return null;
 } 

protected void onPostExecute(Void result)//result of doInBackground is passed a parameter
{     
    super.onPostExecute(result);
    //dismiss progressdialog.
    //update ui using the result returned form doInbackground()
  } 
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:40:03.940

您正在访问不允许`UI`调用的函数中的元素`doinbackground`

```
catch (Exception e) 
    {
        Toast.makeText(c, e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.i("attach_database",e.getMessage());
    } 
```

# iphone - 从 nsdata NSInvalidArgumentException 中检索图像'，原因：'-[UIImage 长度]

> ID：15917636
> 
> 赞同：1
> 
> 时间：2013-04-10T05:27:21.340
> 
> 标签：iphone, uiimage, nsmutablearray, xcode4.5, nsdata

我添加图像而`NSMutableArray`不是转换它`NSData`并再次将该图像存储在其他图像中`NSMutableArray`。但是当我转换回给我错误的图像时

我的代码是

```
NSData *Puzzleimage;
PuzzleImg = [[NSMutableArray alloc] init];
TriangleImg = [[NSMutableArray alloc] init];

[PuzzleImg addObject:[UIImage imageNamed:@"Triangle_1.png"]];
    [PuzzleImg addObject:[UIImage imageNamed:@"Triangle_2.png"]];
    [PuzzleImg addObject:[UIImage imageNamed:@"Triangle_3.png"]];
    [PuzzleImg addObject:[UIImage imageNamed:@"Triangle_4.png"]];
    [PuzzleImg addObject:[UIImage imageNamed:@"Triangle_5.png"]];

    for (int l=0; l<[PuzzleImg count]; l++) {
        Puzzleimage = UIImagePNGRepresentation([PuzzleImg objectAtIndex:l]);
        [TriangleImg addObject:Puzzleimage]; 
```

**在滚动视图中检索**

```
 CGRect scrollViewFrame = CGRectMake(10, 60, 300, 350);
        PuzzleList = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
        [self.view addSubview:PuzzleList];

        int y1=10;
        int y2=10;
        if ([PuzzleImg count] >0)
        {
            for(int i=0;i<[PuzzleImg count];i++)
            {
                    UIImage *SolImg = [[UIImage alloc] initWithData:[PuzzleImg objectAtIndex:i]];
                    UIButton *btn =[[UIButton alloc]initWithFrame:CGRectMake(10, y1, 100, 100)];
                    [btn setBackgroundImage:SolImg forState:UIControlStateNormal];
                    btn.tag = i;
                    [btn addTarget:self action:@selector(SelectPuzzleButtonClick:) forControlEvents:UIControlEventTouchUpInside];

                    [PuzzleList addSubview:btn];
                    y1=y1+110;
         }
} 
```

**错误是** *错误显示在 Line ::UIImage *SolImg = [[UIImage alloc] initWithData:[PuzzleImg objectAtIndex:i]];*

-[UIImage 长度]：无法识别的选择器发送到实例 0xa1bc690 2013-04-10 10:41:47.292 CreativeLogic[2791:1a003] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UIImage 长度]：无法识别的选择器sent to instance 0xa1bc690' *** First throw call stack: (0x2612012 0x1422e7e 0x269d4bd 0x2601bbc 0x260194e 0x4cf1b2 0x38c1f3 0xc1d7 0xaac3 0xa532 0x44b817 0x44b882 0x44bb2a 0x462ef5 0x462fdb 0x463286 0x463381 0x463eab 0x4644a3 0x464098 0xe255 0x1436705 0x36d920 0x36d8b8 0x42e671 0x42ebcf 0x42dd38 0x39d33f 0x39d552 0x37b3aa 0x36ccf8 0x28fedf9 0x28fead0 0x2587bf5 0x2587962 0x25b8bb6 0x25b7f44 0x25b7e1b 0x28fd7e3 0x28fd668 0x36a65c 0x2022 0x1f55) libc++abi.dylib：终止调用抛出异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:32:31.210

试着从这个改变...

```
UIImage *SolImg = [[UIImage alloc] initWithData:[PuzzleImg objectAtIndex:i]]; 
```

至 ...

```
UIImage *SolImg = [[UIImage alloc] initWithData:[TriangleImg objectAtIndex:i]]; 
```

我想这对你来说已经足够了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:38:20.163

看到你添加`UIImage`为对象`NSData`而`TriangleImg` `NSMutableArray`不是`PuzzleImg` `NSMutableArray`对象，所以使用下面的行

```
UIImage *SolImg = [[UIImage alloc] initWithData:[TriangleImg objectAtIndex:i]]; 
```

而不是这条波纹线......

```
UIImage *SolImg = [[UIImage alloc] initWithData:[PuzzleImg objectAtIndex:i]]; 
```

# java - 为什么这是程序的输出？

> ID：15917641
> 
> 赞同：7
> 
> 时间：2013-04-10T05:27:36.017
> 
> 标签：java, overloading

```
public class OverloadingTest extends Format{

    public int add(String s1){
        System.out.println("With String");
        return 1;
    }
    public int add(Object a){
        System.out.println("With Object");
        return 1;
    }

    public static void main(String[] args) {
        OverloadingTest overloadingTest = new OverloadingTest();
        overloadingTest.add(null);
    }

} 
```

为什么程序的输出`With String ?`

我已经尝试阅读 JLS 的第 6 版，但我仍然找不到答案。

我能猜到的唯一原因是选择了继承层次结构中最接近的匹配。

所以在这种情况下，它将 String 因为 Object 是它的超类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:30:04.340

此答案可在问题[*Method Overloading for NULL parameter*](https://stackoverflow.com/questions/5229809/method-overloading-for-null-parameter)中找到：

> Java 将始终尝试使用可用方法的最具体适用版本（请参阅 JLS [§15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)）。

因此，`String`使用了，因为它是可用的最具体的类型。如果存在多个子类型，则必须强制`null`转换为适当的类型以指定要运行的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:30:57.623

这在[§15.12.2.5 中有详细说明。选择最具体的方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)：

> 如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。
> 
> 非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误，那么一个方法比另一个方法更具体。

在您的示例中，`add(Object)`可以处理任何可以处理 的事情`add(String)`。这使得后者*更加具体*。因此，它是被选择处理的那个`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:47:51.693

如果多个成员方法既可访问又适用于方法调用... Java 编程语言使用**选择最具体方法**的规则。

请参阅[Java 语言规范](http://books.google.com/books?id=Ww1B9O_yVGsC&lpg=PA349&ots=Se4HcnNchF&dq=java%20%22the%20most%20specific%20method%20is%20chosen%22&pg=PA350#v=onepage&q=java%20%22the%20most%20specific%20method%20is%20chosen%22&f=false)

# excel - 如何编辑超过 200 万行的 CSV 文件

> ID：15917642
> 
> 赞同：1
> 
> 时间：2013-04-10T05:27:37.437
> 
> 标签：excel

真的需要一些快速的帮助。

我有一个逗号分隔的 CSV 文件，其中包含大约 200 万行数据（我知道很多，但不幸的是，这是我唯一可以使用的格式）。其中一行有一些数字，其中有很多小数位（如 3.908651901）。我需要将整列（所有 200 万行）四舍五入为整数。

问题是当我在 excel 中打开它时，它会说“仅显示 100 万行”。经过更多调查，我发现 excel 一次不能处理超过 100 万行。

我的问题是：如果我选择整列并将数字四舍五入为整数，这将适用于整个 200 万行吗？还是只有 100 万显示在 excel 中？

是否有任何其他程序可以处理 2-250 万行并将列更改为整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:25:46.367

可能最简单的方法是编写一个小程序来做到这一点。这可以用许多不同语言中的任何一种来完成，但是由于您提到 Excel，这里有一个快速而肮脏的基于 VBA 的选项，它可能足以完成一次性任务。这不会那么快，在我的硬件上花了大约一分钟。其他选择无疑会更快......

这只有效，因为数据从未真正触及工作表，因此百万行限制不会发挥作用。

```
Sub RoundCsv()
    Dim fso As FileSystemObject
    Dim csvIn As TextStream
    Dim csvOut As TextStream
    Dim FinePathAndName As String
    Dim FinePathAndNameNew As String
    Dim ln As String
    Dim dat As Variant
    Dim RoundColumn As Long

    Set fso = New FileSystemObject
    FinePathAndName = "C:\Your\Path\And\File\Name.csv"
    FinePathAndNameNew = "C:\Your\Path\And\File\NameNew.csv"
    RoundColumn = 3 '<-- set to the column number to round, count from 0
    Set csvIn = fso.OpenTextFile(FinePathAndName, ForReading, False)
    Set csvOut = fso.CreateTextFile(FinePathAndNameNew, True)

    Do While Not csvIn.AtEndOfStream
        ln = csvIn.ReadLine
        dat = Split(ln, ",")
        dat(RoundColumn) = Round(dat(RoundColumn))
        ln = Join(dat, ",")
        csvOut.WriteLine ln
    Loop

    csvIn.Close
    csvOut.Close
    Set csvIn = Nothing
    Set csvOut = Nothing
    Set fso = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T17:19:02.283

我在这里有点晚了，但也遇到了同样的问题。经过一番谷歌搜索后，我发现了这个名为 gSplit 的程序，它可以将一个大的 csv 分解为多个较小的文件，并将这些较小的部分放回一个大文件中。

您可以将 CSV 分成两半或三等份，格式化每一份，然后重新组合它们。

PS我与这个产品没有任何关系，我只是找到它并且它解决了我的问题，所以我想我会在这里代表它。

[http://www.gdgsoft.com/gsplit/](http://www.gdgsoft.com/gsplit/)

# clang - 使用 clang 而不是 gcc 编译时的程序段错误

> ID：15917647
> 
> 赞同：5
> 
> 时间：2013-04-10T05:27:49.113
> 
> 标签：clang, compiler-flags

**摘要**：当我`-mcmodel=large`在使用clang编译时设置标志时，我的应用程序在访问线程本地存储时出现段错误。使用 gcc 编译时不会发生这种情况。这是clang的错误还是我做错了什么？

**详情**：

以下代码段在设置`-mcmodel`标志时使用clang编译时崩溃，但使用gcc编译时运行良好

```
#include <stdio.h>
#include <pthread.h>

__thread int tlsTest;

int main(int argc, char **argv) {
  printf("&tlsTest is %p\n", &tlsTest);
  tlsTest = argc;
  printf("tlsTest is %d\n", tlsTest);
  return 0;
} 
```

当我编译时：`clang test.c -pthread -mcmodel=large`结果是：

```
&tlsTest is 0x7fd24262c6fc
Segmentation fault (core dumped) 
```

但是：`gcc test.c -pthread -mcmodel=large`结果是：

```
&tlsTest is 0x7f1cf785c6fc
tlsTest is 1 
```

该程序在编译时也可以正常工作：`clang test.c -pthread`

[我阅读了有关 mcmodel](http://www.slac.stanford.edu/comp/unix/package/intel_tools/icc/mergedProjects/copts_cls/common_options/option_mcmodel.htm)的以下链接，但我不确定这与我观察到的段错误有何关系。请注意，问题也会发生`-mcmodel=medium`，但不会发生`-mcmodel=small`。

这是 clang/llvm 的错误，还是对标准或某些未实现功能的不同解释？

我的系统也是 Ubuntu 12.04。我的gcc版本是4.6.3，我测试的clang/llvm版本是3.3开发的最新快照，我也用clang 3.2测试过。

# wpf - 更改 MahApps Metro 主题

> ID：15917657
> 
> 赞同：13
> 
> 时间：2013-04-10T05:28:22.950
> 
> 标签：wpf, visual-c++, themes, mahapps.metro

我知道 MahApps Metro 主题带有“主题”（颜色集），但我不知道如何从我的 WPF 应用程序中的默认设置更改它们。

我遵循了[MahApps.Metro 文档](http://mahapps.com/MahApps.Metro/)中的初学者教程（包括在页面顶部添加资源库），但没有提及更改主题。

component/Styles/Colours.xaml 文件有注释“来自 cosmopolitan 主题包”，对于比我更精通 WPF 设计的人来说，这可能是一个有用的线索。

我说的是应用程序范围的主题更改，而不是单个控件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T13:02:55.380

如果要更改默认配色方案，只需更改加载哪个颜色资源文件即可。

来自蓝色：

```
 <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" /> 
```

到红色：

```
 <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Red.xaml" /> 
```

您还可以使用 ThemeManager.ChangeTheme() 以编程方式更改（一旦您加载了每个颜色资源文件）。

# c - linux环境下C和Cpp中的volatile

> ID：15917662
> 
> 赞同：5
> 
> 时间：2013-04-10T05:28:51.373
> 
> 标签：c, linux, arm, embedded-linux, volatile

我正在为带有 Linux 环境的 ARM 编写程序。它不是一个低级程序，比如说应用程序级别

你能澄清一下有什么区别，

```
int iData; 
```

对比

```
volatile int iData; 
```

它有硬件特定的影响吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T05:31:28.747

C 中 volatile 的存在是为了不自动缓存变量的值。它会告诉机器不要缓存这个变量的值。因此，每次遇到给定的 volatile 变量时，它都会从主内存中获取它的值。使用这种机制是因为任何时候操作系统或任何中断都可以修改该值。因此，使用 volatile 将帮助我们每次都重新访问该值。

阅读[Wiki](http://en.wikipedia.org/wiki/Volatile_variable)和[此](http://www.cognitus.net/html/tutorial/usingVolatile.html)页面以获取更多说明

# perl - SSHProcessError ssh 进程在 $ssh->waitfor 中终止

> ID：15917666
> 
> 赞同：2
> 
> 时间：2013-04-10T05:28:58.473
> 
> 标签：perl, ssh

我对 Perl 脚本非常陌生，并尝试编写一个 perl 代码以 ssh 到路由器，然后在路由器上运行 scp export 命令（从路由器到远程目标服务器的 scp 导出）。

```
#!/usr/local/bin/perl

use Net::SSH::Expect;
use warnings;

$hostname = "Router";

my $ssh = Net::SSH::Expect->new (
            host => $hostname,
            password=> 'abcd',
            user => 'admin',
            raw_pty => 1,
            timeout => 150,
        );

my $login_output = $ssh->login();
        if ($login_output !~ /Router/) {
        die "Login has failed. Login output was $login_output";
        }

$ssh->send("scp export log traffic start-time equal 2013/04/01\@00:00:00 to user\@192.168.1.1:<path> end-time equal 2013/04/01\@01:00:00",3);
$ssh->waitfor('user@192.168.1.1\'s password:\s*') or die "prompt 'password' not found";
$ssh->send("abcd");
$ssh->send("\n");
sleep 100;
my $logout = $ssh->close();

print "=" x 50;
print "\n"; 
```

我能够看到该脚本很好地登录到路由器（每次运行脚本时我都可以在路由器上看到一个新用户）。但是，几秒钟后，脚本终止并出现错误： SSHProcessError ssh 进程已终止。在 cron1 第 22 行

第 22 行有什么问题： $ssh->waitfor('user@192.168.1.1\'s password:\s*') or die "prompt 'password' not found";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T21:15:47.657

当 $hostname 无效时，我遇到了同样的问题。做一个简单的主机名检查首先为我修复它..

```
die "Host $hostname not found" unless gethostbyname($hostname); 
```

更新：似乎任何 ssh 连接错误都会导致 SSHProcessError 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T05:12:10.780

我使用不同的方法登录到服务器。用这段代码制作了一个功能，每次对我来说都很好。看看能不能帮到你。。

```
 sub connect {

              my $host =shift;
              my $password=shift;
              my $user=shift;
              my $counter=0;
              my $login_output;
              $ssh = Net::SSH::Expect->new (
                                                host => "$host",
                                                password=> "$password",
                                                user => "$user",
                                                raw_pty => 1
                                           );

            $login_output = $ssh->run_ssh();

            LABLE_login:  # Lable used for looping
            $login_output=$ssh->read_all();

            if( $login_output =~ /yes/){  # To check if you are logging in for the first time
                                            $ssh->send("yes\n");
                                            sleep(2);
                                            $login_output=$ssh->read_all();
                                            if( $login_output =~ /Password/){
                                                                                    $ssh->send("$password\n");
                                                                            }
                                       }

            elsif( $login_output =~ /Password/)
                                                    {
                                                            $ssh->send("$password\n");

                                                    }
 else
                    {
                      sleep(2);
                      $counter++;
                      if($counter eq 3)
                            { print color('red');print "Cannot connect to host exiting now\n";print color('reset');exit();}
                      goto LABLE_login;
                    }

            $login_output=$ssh->send("$password\n");
            return $ssh;
             } 
```

# php - Curl 在 PHP 中没有给出响应

> ID：15917669
> 
> 赞同：-2
> 
> 时间：2013-04-10T05:29:16.667
> 
> 标签：php

我正在开发 Android 中的推送通知。在服务器端，我实现了这段代码：

```
 $apiKey = "";

$registrationIDs = array( "" );

$message = "hello";

$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),

                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'

                );

$ch = curl_init();

curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );

curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);

curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

$result = curl_exec($ch);

curl_close($ch);

echo $result; 
```

我正在使用 Xampp。第一次运行此代码浏览器时，未定义 curl 时出现致命错误。然后在 php.ini 文件中，我取消注释行 extension=php.curl.dll 并重新启动 apache 服务器，然后再次运行这段代码，它没有给出任何错误但没有回显结果。我是服务器端的新手，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:41:39.803

要获取有关错误的更多信息，您可以使用以下代码。

```
 $responseInfo    = curl_getinfo($ch);
   $header_size    = curl_getinfo($ch, CURLINFO_HEADER_SIZE); 
   $responseHeader = substr($result, 0, $header_size);
   $responseBody   = substr($result, $header_size);

    echo 'Header: <br>'. $responseHeader;
    echo 'Body: <br>'. $responseBody; 
```

请检查[这个](http://php.net/manual/en/function.curl-getinfo.php)

```
$responseInfo['http_code'] -> gives the http response code. 
```

或者

如果您不确定如何调试，请使用一些对您有帮助的库。 [ZendService_Google_Gcm](https://github.com/zendframework/ZendService_Google_Gcm)

[gcm响应码](http://developer.android.com/google/gcm/gcm.html)快速参考

你可以这样处理 [https://github.com/zendframework/ZendService_Google_Gcm/blob/master/library/ZendService/Google/Gcm/Client.php#L116](https://github.com/zendframework/ZendService_Google_Gcm/blob/master/library/ZendService/Google/Gcm/Client.php#L116)

# node.js - nodejs中的foreach

> ID：15917674
> 
> 赞同：0
> 
> 时间：2013-04-10T05:30:00.217
> 
> 标签：node.js

我知道 nodejs 中的 foreach 是阻塞的。我正在 nodejs 中开发一个 API 服务器，我需要解析 req.body 以生成某种签名来验证请求。所以我的问题是如果我在 req.body 上使用 forEach 会阻止其他请求吗？如果它被阻塞如何克服它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:47:16.777

forEach 是阻塞的，但对于大多数用例来说它很好，只要你的 array.length * function.runTime 不是很大，除非你正在做 IO 或加密，否则它不应该是很大的。如果您正在做一些长时间运行的事情，您可以将 forEach 替换为 async.forEach ( [https://github.com/caolan/async](https://github.com/caolan/async) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:22:12.980

我发现异步非常适合服务器端的短期工作 - 但如果你想要更轻的东西并且可以处理更少的修饰，你可以调整其中之一： http: [//book.mixu.net/ch7.html](http://book.mixu.net/ch7.html)

根据我的经验，速度要快得多……这在低功耗嵌入式设备或低端服务器上运行时很重要

# php - 与 HTML 一起使用时的 PHP 性能

> ID：15917677
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:30:15.997
> 
> 标签：php, html, performance, tags

在我的项目中，我使用 PHP 和 HTML。我不确定如果我在 PHP 中回显 HTML 或者当我关闭 pHP 然后编写 HTML 代码时性能会如何反映。

以下是我可以编码的 2 种方式： 在 PHP 中回显 HTML

```
<?php
  if(!$result) {
     $qwe = 'something';
  }
  echo '<p>'.$qwe.'</p>';
  echo '<p>lots of html tags will be echoed.'</p>
  if('something happens') {
     'do something'
  }
?> 
```

或关闭 PHP 标记，然后编写 HTML

```
<?php
  if(!$result) {
     $qwe = 'something';
  }
?>
  <p><?php echo $qwe; ?></p>
  <p>lots of html tags will be echoed.</p>
<?php
  if('something happens') {
     'do something'
  }
?> 
```

这两者有什么区别吗？任何明显的性能差异？我的项目使用大量 PHP 来操作数据，并且通常使用来自 MySQL 查询的超过 20k 行。我想编写一个针对高性能进行优化的代码。我一直在学习查询优化，只是想知道是否也可以调整上述内容。

还有什么我需要考虑优化的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:39:10.107

在此之前我会担心许多其他性能改进，但我进行了一些测试，似乎方法 1（回声）更快，这实际上与我想象的相反，但这是一个很小的测试用例无论如何都不是决定性的。

选择您和您的开发团队中的哪一个更适合您的代码读/写目的，而不是性能目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:33:42.480

两种方式都需要相同的时间来显示 html。

如果您想创建一个`high performance`站点，那么您可以优化您的站点`mysql queries`并`indexes`在其中创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:38:26.453

嗨，当您在 PHP 中回显 HTML 时，它会转到 PHP 解析器，然后返回浏览器。在该浏览器呈现该 HTML 之后。但是，如果您要关闭 PHP 标记并仅编写 HTML，那么只有浏览器会呈现这些 HTML 部分。

# asp.net - 如何获取转发器中的总行数？

> ID：15917678
> 
> 赞同：1
> 
> 时间：2013-04-10T05:30:22.857
> 
> 标签：asp.net, repeater

我正在使用Repeater控件来显示数据，数据源包含在repeater中显示的多条记录，我需要的是获取两个列表项的差异并将其分配给另一个列表项，我使用了下面提到的代码第一条记录工作正常，但不显示所有记录

aspx.cs 代码

```
DataSet dsJobCardHistory =new DataSet(); 
double dcPriceIncl;
double dcPriceExcl;
double dcTax;
protected void Job_History()
{

    dsJobCardHistory = objReportManager.Get_JobCard_History(strCustNo, strTranId);

     dcPriceIncl = Convert.ToDouble(dsJobCardHistory.Tables[0].Rows[0][6].ToString());
      dcTax = dcPriceIncl * 0.14;
      dcPriceExcl = dcPriceIncl - dcTax;
}
protected void repJobCard_ItemDataBound(object sender, RepeaterItemEventArgs e)
{     
       if (e.Item.ItemType == ListItemType.Item)
            {
            ((Label)e.Item.FindControl("lblRepPrice")).Text = 
                    Convert.ToString(dcPriceExcl);
             ((Label)e.Item.FindControl("lblRepTax")).Text =
                    Convert.ToString(dcTax);
                ((Label)e.Item.FindControl("lblRepTotal")).Text=
                    Convert.ToString(dcPriceIncl);
            }
    }
} 
```

aspx 代码

```
 <font style="font-size:14px"><strong><asp:Label ID="lblRepPrice" runat="server"
 Text=""></asp:Label></strong></font>
 </td>
 <td align="center" width="15%">
 <font style="font-size:14px"><strong><asp:Label ID="lblRepTax" runat="server" 
 Text=""></asp:Label></strong></font>
 </td>
 <td align="center" width="15%">
  <font style="font-size:14px"><strong><asp:Label ID="lblRepTotal" runat="server"
  Text=""></asp:Label></strong></font>
  </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:59:55.650

正如你所说，它只是第一次工作，所以替换你的这条线

```
if (e.Item.ItemType == ListItemType.Item) 
```

和....

```
 if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType==ListItemType.AlternatingItem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T19:15:07.670

1.  给出`[xp:repeat]` 一个 ID 值，例如`idvaluestring`
2.  在 SSJS 中使用`getComponent("idvalueString").getRowCount()`

RepeatControl 的类是：

`com.ibm.xsp.component.xp.XspDataIterator`

```
<xp:repeat var="voyageChoicesCollection"
indexVar="voyageChoicesCollectionIndex" 
value="#{ProfileListRepeat}"
id="voyageChoicesCollectionID"> 

var vccID:com.ibm.xsp.component.xp.XspDataIterator = getComponent("voyageChoicesCollectionID");
vccID.getRowCount() 
```

# uiscrollview - 我们在这个网站上称这种效果是什么？

> ID：15917679
> 
> 赞同：0
> 
> 时间：2013-04-10T05:30:35.137
> 
> 标签：uiscrollview, scroll

[康乃馨集团](http://www.carnationgroup.com/)具有美丽的滚动效果。在这个站点中，背景滚动比它的内容慢。如何使用 JavaScript 获得这种滚动效果？

另一个例子是 [TYG](http://rehearse.skype.com/?cm_mmc=ICDC%7C2123_B1-_-TYG-1882)

# frames - 按时间分组数据

> ID：15917684
> 
> 赞同：2
> 
> 时间：2013-04-10T05:31:16.330
> 
> 标签：frames

我有一个名为 example.csv 的文件，其中包含该数据：

```
day,number,price
2010-01-01 00:01:00,1,0.4
2010-01-01 00:02:00,2,1.2
2010-01-01 00:03:00,3,2.5
2010-01-01 00:04:00,4,9.1
2010-01-01 00:05:00,5,3.4
2010-01-01 00:06:00,6,6.9
2010-01-01 00:07:00,7,8.9
2010-01-01 00:08:00,8,9.1
2010-01-01 00:09:00,9,4.2
2010-01-01 00:10:00,10,11.2
2010-01-01 00:11:00,11,53.12
2010-01-01 00:12:00,12,45.21
2010-01-01 00:12:00,13,1.1
2010-01-01 00:13:00,14,3.43
2010-01-01 00:14:00,15,21.42 
```

加载文件内容：

```
example = read.csv(file="path/example.csv", sep=",") 
```

加载

```
DD <- structure(list(day = structure(c(example$day), class = c("POSIXct", "POSIXt"),   tzone = ""), 
 number = c(example$number), price = c(example$price)), .Names = c("day", "number", "price"), row.names = c(NA, 
-15L), class = "data.frame") 
```

后：

```
ddx <- xts(DD[,c('number','price')], order.by = DD[,'day']) 
```

并且： period.apply(ddx, endpoints(ddx, on = 'minutes',k=3), sum)

在最后一个 period.apply 之后，它会返回：

```
 [,1]
  1970-01-01 02:00:14 301.18 
```

为什么它还给1970

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:19:16.933

将`Datetime`列作为`POSIXct`其他日期时间类后，您可以使用`period.apply`from `xts`。要获得`3`分钟间隔，请使用`endpoints(dd.xts, on = 'minutes', k = 3)`

```
# with a data frame
DD <- structure(list(Dates = structure(c(1034644620, 1034644800, 1034644920, 
1034734860, 1034734920), class = c("POSIXct", "POSIXt"), tzone = ""), 
    Price = c(0.6, 1.4, 4.1, 1.6, 7.7), Price.2 = c(5, 2.4, 9.1, 
    1.4, 3.7)), .Names = c("Dates", "Price", "Price.2"), row.names = c(NA, 
-5L), class = "data.frame")
DD 

#                Dates Price Price.2
# 1 2002-10-15 11:17:00   0.6     5.0
# 2 2002-10-15 11:20:00   1.4     2.4
# 3 2002-10-15 11:22:00   4.1     9.1
# 4 2002-10-16 12:21:00   1.6     1.4
# 5 2002-10-16 12:22:00   7.7     3.7
# coerce to xts

ddx <- xts(DD[,c('Price','Price.2')], order.by = DD[,'Dates'])

period.apply(ddx, endpoints(ddx, on = 'minutes',k=3), sum)

##                      [,1]
## 2002-10-15 11:17:00  5.6
## 2002-10-15 11:20:00  3.8
## 2002-10-15 11:22:00 13.2
## 2002-10-16 12:22:00 14.4 
```

# php - PHP中的特殊字符（如omega和beta）字符串匹配

> ID：15917685
> 
> 赞同：1
> 
> 时间：2013-04-10T05:31:16.417
> 
> 标签：php, javascript, regex, jquery-mobile, special-characters

我在使用 PHP 编写的应用程序时遇到了困难。该应用程序的目的是一个支持触摸屏的开源学习游戏（使用 jQuery mobile）。游戏运行良好，使用 strcasecmp() 将数据库中的条目与所选答案进行比较（用户从不自己输入数据，他们只从选项中进行选择，因此不存在输入清理问题，因为选项直接来自数据库）。但是，当我添加包含特殊字符（例如 Ω 和 β）的功能时，strcasecmp() 不再起作用。自然地，我假设该函数无法比较这些符号。经过深入研究，我尝试了 preg_match 和 mb_ereg_match，虽然它们在常规问题上工作得很好，但同样，它们不能正确地将问题与其中的特殊字符匹配。马上，

```
$selAnswer = $_POST['mainanswer'];//asign from POST form

if (mb_ereg_match($selAnswer, $_SESSION['right']) == TRUE) //if the choice matches the right answer 
{
    //do right answer operations
}
else //if the question does not match
{
   //do wrong answer operations
} 
```

同样，它适用于常规字符串，但不适用于特殊字符。我能做些什么来成功匹配这些字符吗？其中一个用例是化学课，他们肯定需要能够添加特殊字符，例如 omega 和 beta 等。我感谢任何人可能提供的任何帮助。

**更新：**

由于发布整个游戏代码会非常长，供大家参考，大致流程是这样的：一个简单的HTML表单向MySQL数据库提交问题。特殊字符是使用自定义版本的 TinyMCE 插入的，该版本只允许设置粗体、下划线、斜体和特殊字符的格式。它在数据库中的外观示例如下：

```
&beta; is the right answer 
```

因此，一旦数据进入数据库，游戏代码就会随机选择一个问题，并给出一个正确答案和四个错误答案。如果所选答案与数据库答案匹配，则给予一分。该游戏通过 jQuery mobile 进行了触摸友好，但这是代码的唯一特殊之处。其余的只是用 TextWrangler 手写的通用 PHP/JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:39:34.267

我试过了：

```
<?php

$special = "Ω and β";
$right_answer = "Ω and β";

//Returns < 0 if str1 is less than str2; > 0 if str1 is greater than str2, and 0 if they are equal. 
if (strcasecmp($special, $right_answer) == 0) {
    echo "You're right!";
} else {
    echo "Sorry, try again";
}

?> 
```

得到了这个：

> 你是对的！

我错过了什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:12:27.867

试一试：

```
<?php

$database_answer = "Ω and β"; // <-- $grap correct answer from from mysql
$user_answer = "Ω and β";  // <-- make $user_answer the correct answer
// display hex representation of both strings
printf("%s<br>%s", bin2hex($database_answer), bin2hex($user_answer));

?> 
```

*   从您的数据库（mysql？）中检索正确答案的 $database_answer

上面的代码应该显示完全相同的十六进制字符串，如果不是，你在某处有编码问题。您可以首先确保将数据库的字符集设置为 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T00:01:48.160

如果您的数据库是这样设计的：

```
QuestionNumber    |    Answer
-------------------------------
 1                |      3
 2                |      1
 3                |      4
 4                |      2
 5                |      4 
```

你的 HTML：

```
<select name="question1">
    <option value="1">α</option>
    <option value="2">β</option>
    <option value="3">γ</option>
    <option value="4">Ω</option>
</select> 
```

这样，只有数字“4”被发送到服务器，而不是答案“Ω”。然后你只需要比较数字。

# python - 如何每行显示一定数量的单词？

> ID：15917690
> 
> 赞同：1
> 
> 时间：2013-04-10T05:31:38.440
> 
> 标签：python, python-3.x

所以我有一个清单：

```
names = ['dog','cat','mouse','moose','rabbit','horse','apple','banana','orange'] 
```

我希望输出是这样的：

```
dog cat mouse moose rabbit horse
apple banana orange 
```

所以基本上打印时每行最多显示六个字。

老实说，我不知道从哪里开始，因为这样的 for 循环将每行显示 1 个：

```
for i in names:
   print(i)

output -->
dog
cat
mouse
moose
rabbit
horse
apple
banana
orange 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:34:38.107

您可以使用`range`一个步骤来拆分它：

```
names = ['dog','cat','mouse','moose','rabbit','horse','apple','banana','orange']

for i in range(0, len(names), 6):
    print(names[i:i + 6]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:34:40.877

穷人版：

```
counter = 0
for i in names:
    if counter == 5:
        counter = 0
        print i
    else:
        print i,
    counter += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:42:39.997

使用最大 35 个字符的行宽的 textwrap，如果您有不同大小的单词，这会有所帮助：

```
import textwrap
names = ['dog','cat','mouse','moose','rabbit','horse','apple','banana','orange']
for l in textwrap.wrap("\n".join(names),35):
    print l 
```

如果您想正确证明您的输出，这很有用。如果你想生成空格分隔的列，我认为拆分单词的数量很有用。

# php - javascript 验证成功后提交 PHP 表单

> ID：15917691
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:31:40.987
> 
> 标签：php, javascript, validation

当我提交表单时，我得到了正确的 javascript 验证消息，但表单仍然被提交，并且我得到了 php 验证消息。如果通过了 javascript 测试，我如何才能提交我的表单：

形式：

```
enter code here// first name is mandatory
if (!$firstName) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">Please enter your first name.</font></h4>';

// email is mandatory
} else if (!$email) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">Please type an email address ' . $firstName . '.</font></h4>';

// check email is valid
} else if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">' . $email . ' is not a valid email address.</font></h4>';

// check postcode is a number
} else if (!empty($postcode) && !is_numeric($postcode))  {  
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">Postcode must be a numeric value.</font></h4>';

// check postcode is greater than 4 chars
} else if (!empty($postcode) && (strlen ($postcode) < 4)) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">Postcode must be at least 4 characters.</font></h4>';

// check postcode is less than 12 chars
} else if (strlen ($postcode) > 12) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">Postcode must be less than 12 characters.</font></h4>';

// check email doesn't exist    
} else if ($numRows > 0) {
$msg_to_user = '<h4 class="errmsg"><font color="FF0000">' . $email . ' is already in the system.</font></h4>';

// if all test passed, insert details into database
} else {
$sql_insert = mysql_query("INSERT INTO newsletter (firstName, lastName, email, postcode, dateTime) 
                                                VALUES('$firstName','$lastName','$email','$postcode',now() )") or die(mysql_error());

$subscribed = '<h4 class="submsg"><font color="0066FF">Thanks ' . $firstName . ' ' . $lastName . ', ' . $email . '  has been subscribed to our newsletter.</font></h4>';
?>

<form name="newsletter" method="post" action="<?php echo $_SERVER['PHP_SELF'];" ?>    
id="newsletter" onSubmit="postcodeval(); emailval(); notnull();">
<fieldset>
  <label for="firstName" id="firstName_label">First Name*:</label>
  <input type="text" name="firstName" id="firstName" size="36" value="<?php echo isset($firstName) ? $firstName : '' ?>" class="text-input" onBlur="notnull()" />
  <br />
  <label for="lastName" id="lastName_label">Last Name:</label>
  <input type="text" name="lastName" id="lastName" size="36" value="<?php echo isset($lastName) ? $lastName : '' ?>" class="text-input" />
  <br />
  <label for="email" id="email_label">Email*:</label>
  <input type="text" name="email" id="email" size="36" value="<?php if (isset($_POST['submit_newsletter'])){echo $_SESSION['newsletterSignup'];} ?><?php echo isset($email) ? $email : '' ?>" class="text-input" onBlur="emailval()" />
  <br />
  <label for="postcode" id="postcode_label">Postcode:</label>
  <input type="text" name="postcode" id="postcode" size="12" value="<?php echo isset($postcode) ? $postcode : '' ?>" class="text-input" onBlur="postcodeval()" />
    <br />
  <input type="submit" name="submit" id="submit_btn" value="Subscribe" />
</fieldset> 
```

Javascript：

```
 //Name cannot be blank
function notnull() {
var z = document.forms["newsletter"]["firstName"].value;
if (z === null || z === "") {
    inlineMsg('firstName', 'You must enter your name.', 3);
    return false;
}
}

//Vaidate email address
function emailval() {
var y = document.forms["newsletter"]["email"].value;
var atpos = y.indexOf("@");
var dotpos = y.lastIndexOf(".");
if (y === null || y === "") {
 inlineMsg('email', 'You must enter an email.', 3);
}       
if (y === null || y === "") {
    return true;
}
if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= y.length) {
    inlineMsg('email', 'Not a valid e-mail address.', 3);
    return false;
}
}

//Vaidate postcode
function postcodeval() {
var x = document.forms["newsletter"]["postcode"].value;
if(!!x){
    if (isNaN(x)) {
 inlineMsg('postcode', 'Must be numbers only.', 3);
}   

else if (x.length < 4) {
 inlineMsg('postcode', 'Must be more than than 4 characters.', 3);
}   

 else if (x.length > 12) {
 inlineMsg('postcode', 'Must be less than 12 characters.', 3);
}

}else{
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:36:02.863

在表单 onSubmit 中，您必须在函数调用中使用 return。

```
<form name="newsletter" method="post" action="<?php echo $_SERVER['PHP_SELF'];" ?>    
id="newsletter" onSubmit=" return postcodeval(); return emailval(); return notnull();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:36:33.570

在控制台中查找错误。您的验证需要在提交时运行，如果有效则返回 true，否则返回 false。实际脚本中的任何错误都将允许提交

例如

```
<form onsubmit="return validate(this)" ...> 
```

验证在哪里

```
function validate(theForm) {
  return nameval(theForm) &&
         emailval(theForm) &&
         postcodeval(theForm);
}

//Name cannot be blank
function nameval(theForm) {
  var name = theForm["firstName"].value;
  if (name === "") { // cannot be null
    inlineMsg('firstName', 'You must enter your name.', 3);
    return false;
  }
  return true;
}

//Vaidate email address
function emailval(theForm) {
  var email = theForm["email"].value;
  if (email === "") {
   inlineMsg('email', 'You must enter an email.', 3);
   return false;
  }       
  var atpos = email.indexOf("@");
  var dotpos = email.lastIndexOf(".");
  if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= y.length) {
    inlineMsg('email', 'Not a valid e-mail address.', 3);
    return false;
  }
  return true;
}

//Vaidate postcode
function postcodeval(theForm) {
  var postCode = theForm["postcode"].value;
  if(postCode !=="") { // postcode is not mandatory
    if (isNaN(postCode)) {
      inlineMsg('postcode', 'Must be numbers only.', 3);
      return false;
    }   
    if (postCode.length < 4) {
      inlineMsg('postcode', 'Must be more than than 4 characters.', 3);
      return false;
    }   
    if (postCode.length > 12) {
      inlineMsg('postcode', 'Must be less than 12 characters.', 3);
      return false;
    }
  }
  return true;
} 
```

# java - JPA：删除的外键约束

> ID：15917693
> 
> 赞同：4
> 
> 时间：2013-04-10T05:31:53.350
> 
> 标签：java, mysql, hibernate, jpa

我有以下关系

```
Class UserAccount{
//Other fields
@OneToMany(mappedBy = "userAccount", cascade = CascadeType.REMOVE)
private Set<Images> imagesShared;

@ManyToMany
@JoinTable(name = "USER_LIKES", joinColumns = @JoinColumn(name = "USER_NAME"),   inverseJoinColumns = @JoinColumn(name = "ID"))
private Set<Images> imagesLiked;
}

Class Images{
//other fields
@ManyToMany(mappedBy = "imagesLiked")
private Set<UserAccount> likes;
} 
```

在这些行之后我得到一个例外

```
Hibernate: delete from IMAGES where ID=?
Hibernate: delete from COMMENTS where COMMENT_ID=?
Hibernate: delete from COMMENTS where COMMENT_ID=?
Hibernate: delete from COMMENTS where COMMENT_ID=?
Hibernate: delete from COMMENTS where COMMENT_ID=?
Hibernate: delete from COMMENTS where COMMENT_ID=?
Hibernate: delete from IMAGES where ID=? 
```

例外：

```
Cannot delete or update a parent row: a foreign key constraint fails (`testdb`.`USER_LIKES`, CONSTRAINT `FKC6704E28B4E3D8B` FOREIGN KEY (`ID`) REFERENCES `IMAGES` (`ID`)) 
```

据我了解，这发生在 JPA 尝试删除`imagesShared`. 我试过这样做：

```
for (Images image : userAccount.getImagesShared()){
            image.setLikes(null);
        }
em.remove(account); 
```

但同样的错误。任何人？

**更新**

当我添加这一行时，它工作正常。

```
 for (Images image : userAccount.getImagesShared()){
            image.setLikes(null);
        }
userAccount.getImagesShared().clear();
em.remove(account); 
```

但是 JPA 所做的删除操作和我所做的有什么区别呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T06:19:40.003

您`private Set<Images> imagesShared`或`private Set<Images> imagesLiked`必须引用您尝试删除的图像之一。

您必须遍历所有内容并在删除之前删除图像参考。

编辑 ：

回答你的第二个问题。

```
 for (Images image : userAccount.getImagesShared()){
            image.setLikes(null);
        }
userAccount.getImagesShared().clear();
em.remove(account); 
```

有效，因为您正在`userAccount`通过调用清除存储的图像引用`userAccount.getImagesShared().clear()`

以前您所做的只是删除存储在该图像中的喜欢，而不是从`userAccount`对象本身中删除图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:49:14.760

`private Set<Images> imagesLiked`具有对 `IMAGES`( )的外键引用，`ID`因此如果您尝试删除`private Set<Images> imagesShared;`而不删除`private Set<Images> imagesLiked;`.

所以尝试删除 imagesLinked 也

```
image.setImagesLinked(null); 
```

# java - 是拥有更多的 Java 类，还是拥有更少的类做更多的工作更好？

> ID：15917696
> 
> 赞同：1
> 
> 时间：2013-04-10T05:32:08.937
> 
> 标签：java, conventions

我目前正在开发一款游戏。目前，我有一个类（游戏环境）负责保存游戏对象（敌人、武器等）的集合并进行碰撞检查、调用对象的创建例程等。随着我的进展项目，我开始怀疑我是否应该有一个更分层的方法 - 是拥有一个武器管理器、一个 EnemiesManager 和一个将所有东西放在一起的环境，还是让我的环境类像我一样操纵每个对象？我现在在做什么？

值得一提的是，游戏对象已经非常分层：

```
BaseClass
-----EnemyClass
----------Enemy1Subclass
----------Enemy2Subclass
-----WeaponClass
----------Weapon1Subclass
----------Weapon2Subclass 
```

BaseClass 定义了基本的对象属性，例如位置。EnemyClass 和 WeaponClass 是相当通用的类，它们定义了更多特定于类的方法和属性，例如 EnemyClass 的速度或 WeaponClass 的伤害。它们大多存在，所以我可以拥有相当通用的集合，而不是为每个单独的敌人/武器类型单独集合。Enemy1Subclass/Enemy2Subclass 和 Weapon1Subclass/Weapon2Subclass 是实际创建和使用的敌人/武器类。

我的 Environment 类存储 EnemyClass/WeaponClass 的集合，并通过调用游戏对象的方法进行必要的操作。

```
Environment (manipulates EnemyClass and WeaponClass objects by iterating over their respective arrays and calling their respective methods; doesn't do any subclass-specific stuff)
-----EnemyClass array
----------Enemy1Subclass entry
----------Enemy2Subclass entry
----------Enemy1Subclass entry
-----WeaponClass array
----------Weapon1Subclass entry
----------Weapon2Subclass entry
----------Weapon2Subclass entry 
```

但现在我想知道再分离一层是否是个好主意，Environment 持有 EnemyManager/WeaponManager 类，而各自的经理持有和操作他们的集合：

```
Environment (calls generic instantiation, destruction, moving, etc. methods in EnemyManager and WeaponManager; doesn't ever directly interact with an EnemyClass or WeaponClass object)
-----EnemyManager (gets instructions from Environment and manipulates EnemyClass objects to carry out those instructions)
----------EnemyClass array
---------------Enemy1Subclass entry
---------------Enemy2Subclass entry
---------------Enemy1Subclass entry
-----WeaponManager (gets instructions from Environment and manipulates WeaponClass objects to carry out those instructions)
----------WeaponClass array
---------------Weapon1Subclass entry
---------------Weapon2Subclass entry
---------------Weapon2Subclass entry 
```

想法？建议？我找不到任何关于这种“更多课程或更努力的课程”的约定，所以任何答案都是公平的游戏，直到并包括“你的模型是垃圾，重新开始”。虽然希望不会到那个地步。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:45:04.890

一般来说（非常普遍地），面向对象语言的一个主要优点是封装 - 将相关功能/方法和数据组合在一起（具有适当权限）更好的想法。应用在这里，这意味着就“有意义”而言，将代码分开会更好。在您的示例中，“更努力的工作类”意味着更大、整体更难理解以及处理大量数据的类。涵盖连续体任一侧的两个很好的指导方针：

*   如果您需要一个流程图来跟踪一个类中发生的所有事情，您可能应该创建另一个类
*   如果你注意到 A 类只包含 B 类，而 B 类只包含方法 C，也许这都可以在一个函数中

    总之，尽你最大的努力确保你的代码被划分为合理的，而不是多余的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:35:33.407

**请记住，在（几乎）所有编程中，清晰是关键。**

在这种情况下，做最直观的事情。我发现将程序和函数拆分为多个类通常是值得的，因为它提高了可维护性，并使代码通常更明确。

[然而，句法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)和[句法糖精](http://en.wikipedia.org/wiki/Syntactic_sugar#Syntactic_saccharin)之间有一条细线。换句话说，让你的组织尽可能整洁，但不要过度。做让你的代码最清晰的事情。

在这种情况下，这似乎是`interface`s 的一个很好的用途。尽量避免`instanceof`创建接口或抽象类的新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:42:43.683

虽然在开始 hack 之前考虑一下架构是件好事 - 将编程视为一个迭代过程。所以从最简单的事情开始，然后不断地重构。这样你就不会过度设计并保持你的代码可维护。所以关于你的文章标题，从一个班级开始做这项工作，如果你发现提取某些东西是有意义的，那就去做吧——今天的 IDE 会让你很容易。

# extjs4 - Document.write 在 Ie9 标准模式下不起作用

> ID：15917700
> 
> 赞同：1
> 
> 时间：2013-04-10T05:32:30.863
> 
> 标签：extjs4

在这里，我有一些示例代码可以在 chrome 和 Firefox 中运行，但不能在 IE 中运行。

测试.html：

```
<html>
<head>
</head>
<body>
<link rel="stylesheet" type="text/css" href="sdk/extjs4.2/resources/css/ext-all.css">   <script type="text/javascript" src="sdk/extjs4.2/ext-all.js"></script>
<script src="test.js"></script>
</body>
</html> 
```

测试.js：

```
 Ext.onReady(function(){
        Ext.create('Ext.panel.Panel', {
        title: 'My First Panel',
        frame: true,
        width: 400,
        height: 400,
        html : '<iframe id="iframe-test"'+
        ' style="overflow:auto;width:100%;height:100%;"'+
        ' frameborder="0" '+
        ' src="about.html"'+
        '></iframe>',
        items : [{
        xtype : 'button',
        text : 'test',
        handler : function(){
            var iframe = document.getElementById('iframe-test');
             iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument.document) ? iframe.contentDocument.document : iframe.contentDocument;
            var doc = iframe.document;
             doc.open();
             var content = '<html><head> </head>'+
                            '<body>'+
                            '<link rel="stylesheet" type="text/css" href="sdk/extjs4.2/resources/css/ext-all.css">'+
                            '<script type="text/javascript" src="sdk/extjs4.2/ext-all.js"></script>'+
                            '<div id="my-div" class="x-hidden" style="background-color:red;width:100px;height:50px;"></div>'+
                            '<style> .body{ }</style> '+
                            ' <script>Ext.onReady(function() {'+
                            'Ext.Msg.alert("coming fine");'+
                            '});</script></body>'+
                            '</html>';
            //console.log(content);
            doc.write(content);
            doc.close();
        }
        }],
        renderTo: Ext.getBody()
    });
    }); 
```

任何人都可以帮助我失踪的地方吗？我需要做什么才能让它工作

谢谢塔帕斯维尼

# ios - UICollection 的镜像滚动

> ID：15917706
> 
> 赞同：1
> 
> 时间：2013-04-10T05:32:47.507
> 
> 标签：ios, scroll, uicollectionview

我创建了一个带有自定义布局的 UICollection，以允许垂直和水平滚动。它是一个由相等部分和每个部分中的项目组成的网格（即 10 x 10、20 x 20 等）。我希望能够放置两个仍然可见的标题，一个在顶部，一个在左侧。我还没有找到在 UICollection 本身中执行此操作的方法。因此，我在左侧设置了 UICollection，在顶部设置了另一个。但是，当用户左右和/或上下滚动网格时，我希望这两个集合能够反映这些动作。

所以，我的问题是：有没有办法将主 UICollection 的水平移动镜像到顶部 UICollection，然后将主 UICollection 的垂直移动镜像到侧面 UICollection？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:40:34.933

`UICollectionView`是 的子类`UIScrollView`。它向其委托发送[`UIScrollViewDelegate`协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)中定义的所有消息。

您要回复的消息是[`scrollViewDidScroll:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewDidScroll%3a)。`contentOffset`当您的主集合视图发送此消息时，您希望通过获取它并将偏移量应用到您的边距集合视图来响应它。

```
// Implement this in your main collection view's delegate.
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [self synchronizeCollectionViewContentOffsets];
}

- (void)synchronizeCollectionViewContentOffsets {
    CGPoint offset = self.mainCollectionView.contentOffset;
    self.leftMarginView.contentOffset = CGPointMake(0, offset.y);
    self.topMarginView.contentOffset = CGPointMake(offset.x, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T02:19:42.303

所以，我想通了。使用 self.mainCollectionView.contentOffset 总是返回 (0,0)，因此尝试使用我通过 Storyboard 和视图控制器实际分配给它的对象名称。这行得通。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [self synchronizeCollectionViewContentOffsets];
}

-(void)synchronizeCollectionViewContentOffsets {
    CGPoint offset = myCollectionView.contentOffset;
    myLeftMargin.contentOffset = CGPointMake(0, offset.y);
    myTopMargin.contentOffset = CGPointMake(offset.x, 0);
} 
```

其中 myCollectionView、myLeftMargin 和 myTopMargin 通过 Storyboard 链接到 UICollectionView。

# mysql - 使用日期加载数据文件错误

> ID：15917707
> 
> 赞同：0
> 
> 时间：2013-04-10T05:32:51.733
> 
> 标签：mysql, mysql-workbench, mysqlimport

我正在尝试将具有 5 列的 .csv 文件加载到具有相同对应列和 PK 的表中。日期是数据类型 DATE，所有其他都是 Varchar()，PK 除外。

这是我的加载数据导入：

```
LOAD DATA INFILE 'C:\Events_Upload.csv'
INTO TABLE db.events
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
Ignore 1 lines
(
Event_Name,
Event_Handle,
Create_Date,
Retire_Date,
Event_Desc
) 
```

错误是：

```
Error Code: 1292\. Incorrect date value: '' for column 'Retire_Date' at row 1 
```

CSV 中的第一行如下所示：

**Time to Send Survey,SurvESend,2013-04-10,,系统发出Esurveys的时间**

从 CSV 上传时，如何将此字段设为 NULL 且不为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:46:11.120

CSV 文件中没有空值。您可以做的可能是为缺少的列提供一些默认值，并在插入表后通过查询将其替换为 null。

或者你可以看看[skipping-empty-csv-objects](http://www.powershellmagazine.com/2012/12/04/skipping-empty-csv-objects/)

检查此[Export null to .csv](https://stackoverflow.com/q/664406/2006839)和[https://superuser.com/questions/390031/how-to-write-null-into-csv-from-excel-for-blank-fields](https://superuser.com/questions/390031/how-to-write-null-into-csv-from-excel-for-blank-fields)

# php - sql 仅使用 php 从存储过程中返回 1 条记录

> ID：15917713
> 
> 赞同：0
> 
> 时间：2013-04-10T05:33:03.640
> 
> 标签：php

我在 php 中有以下代码，用于运行存储的过程以从数据库中返回记录。

```
public function MelHpdlSql02($database)
{
    $connection = mssql_connect("SQL-02", "user", "test");
    $db = mssql_select_db($database);
    return $connection;
}

public function getRoleRecords()
{
    $this->MelHpdlSql02("Staff");

    $version = mssql_query("EXEC app_role_select");
    $row = mssql_fetch_array($version);     

    var_dump($row);die;

} 
```

这只是从数据库中返回 1 条记录（这假设在我手动运行存储过程时返回 10 条记录）

有谁知道我的代码出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:46:40.977

您的代码有错误，请检查以下代码。

```
public function MelHpdlSql02($database)
    {
        $connection = mssql_connect("SQL-02", "user", "test");
        $db = mssql_select_db($database);
        return $connection;
    }

public function getRoleRecords()
{
    $this->MelHpdlSql02("Staff");

    $version = mssql_query("EXEC app_role_select");
    while($row = mssql_fetch_array($version))
    {
         var_dump($row);
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:51:27.160

我的意思是，当您使用您的功能时：

```
public function getRoleRecords()
{
   $this->MelHpdlSql02("Staff");

   $version = mssql_query("EXEC app_role_select");
   $row = mssql_fetch_array($version);     

   var_dump($row);die;

} 
```

您只获取第一个结果，您需要在其中循环，例如：

```
public function getRoleRecords()
{
   $this->MelHpdlSql02("Staff");

   $version = mssql_query("EXEC app_role_select");
   while($row = mssql_fetch_array($version))     
   {
        // do anything while looping among values  
   }

} 
```

# iphone - 在 UITableView 中插入动态节标题

> ID：15917714
> 
> 赞同：0
> 
> 时间：2013-04-10T05:33:05.423
> 
> 标签：iphone, uitableview

我有一个 UITableView，我想在用户单击添加按钮时动态添加部分标题。如果不需要，用户还应该能够删除标题。在每个标题下，用户应该能够添加相关的项目列表。除此之外，用户应该只能在所选部分下动态插入行。请提出一些想法来实现此功能。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T03:22:12.587

您可以通过删除然后再次添加该部分来实现此目的，这将导致调用`tableView:titleForHeaderInSection:`

假设您的部分索引为 0：

```
BOOL shouldShowHeader;
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    shouldShowHeader ? @"Your Header" : nil;
}

- (IBAction)buttonAction:(id)sender
{
    shouldShowHeader = !shouldShowHeader;
    NSIndexSet *set = [NSIndexSet indexSetWithIndex:0];
    [self.tableView beginUpdates];
    [self.tableView deleteSections:set withRowAnimation:UITableViewRowAnimationNone];
    [self.tableView insertSections:set withRowAnimation:UITableViewRowAnimationNone];
    [self.tableView endUpdates];
} 
```

页脚的工作方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:50:01.893

当用户单击此方法中的按钮时，设置一个标志并重新加载您的表格视图，然后执行此操作..

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if(flag)
    {
        UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0,320, 30)];
        return headerView;
    }
    else
        return nil;
} 
```

你可以像这样删除表格视图中的标题......

如果要删除表格的标题视图，只需将 myTable.tableHeaderView 属性设置为 nil。如果您实际上是一个节标题，那么您需要从 viewForHeaderInSection 方法返回 nil 并调用 [myTableView reloadData]

我希望这会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:42:08.210

我会告诉动态部分标题。保留一个标志并最初设置为 0。当用户单击该 buttonClick 方法中的按钮时，将标志设置为 1 并重新加载 tableView。

```
 -(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
          {
                  if(flag)
                       return aView;//alloc init aView and return.
                  else
                       return nil.
          } 
```

同样对于动态行有一个数组和 numberOfRows 是 array.count。单击按钮在数组中再插入一项并重新加载表。

我希望这会有所帮助。

# mysql - MYSQL：使用 OrderBy 子句加入第三个表的问题

> ID：15917716
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:33:08.413
> 
> 标签：mysql, sql, mysqli

我有三张桌子

```
First table as=incident 
```

![在此处输入图像描述](https://i.stack.imgur.com/3hjyw.png)

在这里我必须选择所有的值。

```
SECOND table=address 
```

![在此处输入图像描述](https://i.stack.imgur.com/LDdbH.png)

第三张表为​​ =fire_inc![在此处输入图像描述](https://i.stack.imgur.com/jeKSZ.png)

我使用了一个查询，for `JOIN three tables`。

```
SELECT E . * , D . * ,F.CAUSE_IGN
FROM  `incident_backup` E
LEFT JOIN address D ON E.`INC` = D.`INC` 
LEFT JOIN fire_inc F   ON D.`INC`=F.`INC`
WHERE E.`STATE` =  "AK"
AND SUBSTRING( E.INC_DATE , -4 ) =  "2009" AND D.`INC`>"AK01001105200900000150" 
LIMIT 0 , 10 
```

但查询不起作用。

我加入`two tables`，`incident and address`

```
SELECT E . * , D . * 
FROM  `incident` E
LEFT JOIN address D ON E.`INC` = D.`INC` 
WHERE E.`STATE` =  "Ak"
AND SUBSTRING( E.INC_DATE , -4 ) =  "2009"
LIMIT 0 , 10 
```

加入两个时效果很好。

```
but using ORDERBY

SELECT  E . * , D . * FROM  `incident` E LEFT JOIN address D ON E.`INC` = D.`INC` WHERE E.`STATE` =  'AK' AND SUBSTRING( E.INC_DATE , -4 ) = '2009' and E.INC >"AK01001105200900000150" order by E.INC limit 0,2 
```

我工作不好。

我必须加入所有三个表，并且必须选择所有表中的所有字段。

我需要通过 INC 加入所有表格。

所以我需要加入查询，我需要使用`order by INC`.

在查询中..，

提前感谢。

```
getting error as,

#2006 - MySQL server has gone away 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:13:24.950

您的 order by 子句使用“E.INC_KEY”，这不是您表中的字段。

# salesforce - Salesforce Oauth 状态代码 302

> ID：15917720
> 
> 赞同：0
> 
> 时间：2013-04-10T05:33:22.410
> 
> 标签：salesforce, oauth-2.0, httpresponse

尝试在组织中设置 oauth 时，获取状态代码 302。
下面是代码片段。

```
String AUTH_URL   = 'https://login.salesforce.com/services/oauth2/authorize';
String redirect_uri = 'https://login.salesforce.com/services/oauth2/success';
String response_type = 'token';
String client_id = 'xxxxxxxxxxxxxx.xxxxxxxxx';

authURL = AUTH_URL + 
         '?response_type=' + response_type + 
         '&client_id=' + client_id + 
         '&redirect_uri=' + redirect_uri;

HttpRequest req = new HttpRequest();
HttpResponse res = new HttpResponse();
Http http = new Http(); 

req.setMethod('GET'); 
req.setEndpoint(authUrl);   
res = http.send(req); 
```

//结果：

res.getStatusCode() = 302
res.getStatus() = 找到

我期望在响应的正文中接收访问令牌和刷新令牌，但它是空的。
如果我错过了什么，请提出建议。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:39:32.717

授权端点用于基于浏览器的交互式登录，而不是程序登录。如果您想要一个纯编程方法，那么您应该检查您可以通过 /services/oauth2/token 端点使用的用户名/密码 oauth 流程。

# haskell - 您将如何实现函数式编程语言？

> ID：15917729
> 
> 赞同：7
> 
> 时间：2013-04-10T05:33:47.467
> 
> 标签：haskell, functional-programming, implementation

在功能范式中，功能是主要的“控制结构”。例如，`+`运算符也被视为一个函数，您可以像传递任何其他“对象”一样传递它们。我想知道，如果我必须实现一种玩具函数式语言，我是将简单的函数实现为真正的函数（即翻译`+`成可调用的例程）还是将它们翻译成普通指令，然后将它们“内联”到翻译的代码中。但是，使用第二种策略，我是否能够像在 haskell 中那样传递它们并部分应用它们？您对实现/翻译函数作为函数式语言的中心思想有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-21T11:42:31.400

I can recommend the PJL book. I wrote a compiler with help from it (in 1989-90, in Prolog) and the book is a very good introduction to the subject.

It might be dated (written in 1987, 30 years ago) but it still covers the basics very well. It is, however, completely focused on lazy languages like Haskell. At the time Haskell did not exist and the book uses LML or Miranda, a predecessor language but the languages are very close.

# c++ - 初始化列表中的 C++ 静态数据成员初始化

> ID：15917732
> 
> 赞同：0
> 
> 时间：2013-04-10T05:34:03.240
> 
> 标签：c++

为什么静态数据成员不能在构造函数的初始化列表中初始化，而可以在构造函数的定义中完成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T05:36:22.360

你理解错了。它们可以在类定义*之外的单个翻译单元中初始化，并且可以在构造函数中**分配给它们。**

您只能`static`在构造函数的初始化列表中初始化当前的非类成员。

[*有例外情况]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:42:13.607

静态成员在类范围内，即它们是类变量而不是实例变量。我们通过构造函数初始化实例。由于静态变量不是针对实例而是针对整个类，因此静态变量不会由构造函数初始化。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:44:47.130

让我们更具体地尝试一下

```
#include <iostream>

using namespace std;

class classWithStaticVariable
{

    static int aStaticVariable;

    int aNormalInstanceVariable;
public:
    classWithStaticVariable(int aParameter)
    {

        aNormalInstanceVariable=aParameter;

        aStaticVariable=aNormalInstanceVariable;/////It is possible to assign value to static data member in constructor but not possible to init it.

    }

    void aTestFunctionJustToPrint()
    {

        cout<<aStaticVariable<<aNormalInstanceVariable;
    }

};
int classWithStaticVariable::aStaticVariable=1;

int main()
{

    classWithStaticVariable t(2);

    t.aTestFunctionJustToPrint();

} 
```

静态变量是类变量而不是实例变量。所以这些静态变量必须用类定义初始化。同样，构造函数用于在创建对象时初始化对象的实例变量。仅此而已。谢谢

# vb.net - 如何在 webgrid 中显示数据表数据

> ID：15917735
> 
> 赞同：1
> 
> 时间：2013-04-10T05:34:08.413
> 
> 标签：vb.net, asp.net-mvc-3, razor, webgrid

我是 MVC3 Razor 的新手。如何在 webgrid 中显示数据表数据？

以下是我尝试过的...

**我的家庭控制器**

```
Public Function List() As ActionResult

Dim dt1 As New DataTable
dt1.Columns.Add("Eno", GetType(Int32))
dt1.Columns.Add("Ename", GetType([String]))
dt1.Columns.Add("Salary", GetType([Double]))
dt1.Columns.Add("Deptno", GetType(Int32))

' Loading data into dt1, dt2:

Dim o1 As Object() = {1, "a", 50000.5, 10}
Dim o2 As Object() = {2, "b", 4000.5, 20}
Dim o3 As Object() = {3, "c", 10000.5, 10}
dt1.Rows.Add(o1)
dt1.Rows.Add(o2)
dt1.Rows.Add(o3)

dt1.AsEnumerable()
Dim columns = dt1.Columns.Cast(Of DataColumn)()
Dim wgrid As Web.Helpers.WebGrid

wgrid = New Web.Helpers.WebGrid(source:=columns, defaultSort:="Eno", rowsPerPage:=2)

Return View(wgrid)
End Function 
```

**我的观点**

```
@ModelType System.Web.Helpers.WebGrid

<h1>Emp Details</h1> 
<div id="grid"> 
  @Model.GetHtml(tableStyle:="grid", headerStyle:="head", alternatingRowStyle:="alt", columns:={Model.Column("Eno")})
</div> 
```

**我的问题**

我收到一条错误消息，因为*“列“Eno”不存在。”*

我需要的是我想将 webgrid 中的数据显示为

```
---------------------------------
Eno    Ename    Salary    Deptno
---------------------------------
1        a      50000.5    10
2        b      4000.5     20
3        c      10000.5    10
--------------------------------- 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:24:49.067

您应该将 List 作为您的模型返回到您的视图中......

首先，您应该有一个如下所示的课程......

```
public class SomeDetails 
{        
    public string Eno { get; set; }
    public string Ename { get; set; }
    public string Salary { get; set; }
    public string Deptno { get; set; }
} 
```

并且您的函数应返回此类的列表。

然后您的视图可以将模型定义为此类的列表，然后您可以使用 webgrid 的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:43:56.620

我以另一种方式得到了解决方案

```
 Dim dt1 As New DataTable
                dt1.Columns.Add("Eno", GetType(Int32))
                dt1.Columns.Add("Ename", GetType([String]))
                dt1.Columns.Add("Salary", GetType([Double]))
                dt1.Columns.Add("Deptno", GetType(Int32))

                Dim o1 As Object() = {1, "a", 50000.5, 10}
                Dim o2 As Object() = {2, "b", 4000.5, 20}
                Dim o3 As Object() = {3, "c", 10000.5, 10}
                dt1.Rows.Add(o1)
                dt1.Rows.Add(o2)
                dt1.Rows.Add(o3)

                Dim skip As Integer = If(page.HasValue, page.Value - 1, 0)

                Dim data = From row In dt1.AsEnumerable() Select New With {.value = row("intDepartmentID").ToString, .display = row("vchDepartment").ToString}

                Dim grid = New Helpers.WebGrid(data, rowsPerPage:=10)

                Dim htmlString = grid.GetHtml(tableStyle:="webgrid", htmlAttributes:=New With {.id = "DataTable"}, headerStyle:="webgrid-header", alternatingRowStyle:="webgrid-alternating-row", footerStyle:="webgrid-footer", selectedRowStyle:="webgrid-selected-row", rowStyle:="webgrid-row-style", columns:=grid.Columns(grid.Column("display", "Eno"), grid.Column("value", "Ename")))

Return Json(New With {.Data = htmlString.ToHtmlString(), .count = data.Count()}, JsonRequestBehavior.AllowGet) 
```

并查看

```
<div class="tablegridpanel">
<div id="div1">
</div>
</div>
<script type="text/javascript">

    /* On pageload web grid is loaded */
    $(document).ready(function () {
        alert("hii");
        PopulateGrid();
    });
    function PopulateGrid() {
        $.getJSON("/Home/webGrid", null, function (d) {
            if (d.count > 0) {
                $("#DataTable").remove();
                $("#div1").append(d.Data);
            }
            else {
                $('#div1').hide();enter code here
            }
            var footer = createFooter(d.Count);
            $("#DataTable tfoot a").live("click", function (e) {
                e.preventDefault();
                var data = {`enter code here`
                    page: $(this).text()
                };
                $.getJSON("/Home/webGrid", { page: data.page }, function (html) {
                    if (html.count > 0) {
                        $("#DataTable").remove();
                        $("#div1").append(html.Data);
                        //                        $('#DataTable thead').after(footer);
                    }
                    else {
                        $('#div1').hide();
                    }
                });

            });
        });
    }
    function createFooter(d) {
        var rowsPerPage = 5;
        var footer = "<tfoot>";
        for (var i = 1; i < (d + 1); i++) {
            footer = footer + "<a href=#>" + i + "</a>&nbsp;";
        }
        footer = footer + "</tfoot>";
        //        $("#DataTable thead").after(footer);
        return footer;
    }
</script> 
```

# c# - 在 SharpSvn 中，什么是 SvnClient.getinfo 返回值？

> ID：15917736
> 
> 赞同：5
> 
> 时间：2013-04-10T05:34:14.827
> 
> 标签：c#, svn, sharpsvn

在我发现的 SharpSvn 的文档中（[here](http://docs.sharpsvn.net/current/html/M_SharpSvn_SvnClient_GetInfo_1.htm)`SvnClient.getinfo` ），缺少（`boolean`type）的返回值。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T09:23:55.717

这是我得到的答案：

> 通常所有的 SvnClient 方法都会在成功时返回 true 并在失败时抛出错误。但是，如果您将 .ThrowOnError 更改为 false 或取消其事件处理程序中的命令，那么它将在错误/取消时返回 false。因此，如果您只是使用 .GetInfo 的简单调用而没有具有特定设置的 SvnInfoArgs 对象（或对 SvnClient 实例本身进行非常特定的处理，您也可以覆盖错误处理），您可以忽略返回值，因为它始终为真.

这要归功于一个名叫伯特的乐于助人的人，他给我发了这封电子邮件。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:45:09.593

它需要一个[SvnInfoEventArgs](http://docs.sharpsvn.net/current/html/T_SharpSvn_SvnInfoEventArgs.htm)的输出参数，该参数填充调用是成功的。例如，我可能使用 GetInfo 调用[从目录中获取最新的修订号](https://stackoverflow.com/questions/684953/how-to-get-latest-revision-number-from-sharpsvn)：

```
private long GetLatestRevisionNumber(Uri myUri)
{
    using (SvnClient client = GetClient())
    {
        SvnInfoEventArgs info;
        client.GetInfo(myUri, out info);
        return info.LastChangeRevision;
    }
} 
```

# dependency-injection - 依赖注入如何知道注入接口时使用哪种类型的映射

> ID：15917741
> 
> 赞同：0
> 
> 时间：2013-04-10T05:34:40.417
> 
> 标签：dependency-injection, inversion-of-control, ninject, autofac

我一直在阅读依赖注入，并且阅读了很多关于如何通过构造函数注入接口的内容。它如何知道接口使用什么类型的映射？例如，如果我有一个名为 ProtienService 的服务和另一个名为 VitaminService 的服务，它们都实现了一个名为 ISupplement Service 的接口，然后我可以将一个 ISupplement Service 注入到我的控制器中，但我不确定它是如何知道是否使用 Protein或维生素服务。这是否仅取决于所使用的 ioc 类型？任何建议都会受到赞赏，因为我对此有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:40:22.263

你告诉容器使用什么。所以在结构图中：

```
For<ISupplement>()
      .Use<VitaminService>(); 
```

当使用 ISupplement 接口时，告诉容器使用 VitaminService。

您可以注册多个实现：

```
For<ISupplement>().Use<VitaminService>().Named("V");
For<ISupplement>().Use<ProteinnService>().Named("P"); 
```

但在这种情况下，您需要告诉容器您想要哪个实现：

```
Container.GetInstance<ISupplement>("V"); 
```

# html - html选择的奇怪按键问题

> ID：15917743
> 
> 赞同：3
> 
> 时间：2013-04-10T05:34:49.610
> 
> 标签：html, select

我们有一个下拉列表（html 选择），其中包含从 00 到 59 的数字（分钟的可能值）。当控件处于焦点并且用户使用键盘输入 13（或 24 或 59 等）时，它会在控件中选择数字 13（或 24 或 59 等）。这是预期的行为。

但是当用户输入像 44 这样的数字时，它会选择 40，然后选择 41。同样是 22、33、55 的问题。

这是 Firefox、Chrome、Safari 的行为。有趣的是，在 IE9 中它工作正常（你输入 44 它选择 44）

请建议如何在所有浏览器中使“html select”的行为统一。最好是它在 IE9 中的工作方式，这似乎是正确的。

示例代码：

```
<html>
<body>
Select Minutes: 
    <select id="hr_sel_min">
        <option title="00" value="00" selected="selected">00</option>
        <option title="01" value="01">01</option>
        <option title="02" value="02">02</option>
        <option title="03" value="03">03</option>
        <option title="04" value="04">04</option>
        <option title="05" value="05">05</option>
        <option title="06" value="06">06</option>
        <option title="07" value="07">07</option>
        <option title="08" value="08">08</option>
        <option title="09" value="09">09</option>
        <option title="10" value="10">10</option>
        <option title="11" value="11">11</option>
        <option title="12" value="12">12</option>
        <option title="13" value="13">13</option>
        <option title="14" value="14">14</option>
        <option title="15" value="15">15</option>
        <option title="16" value="16">16</option>
        <option title="17" value="17">17</option>
        <option title="18" value="18">18</option>
        <option title="19" value="19">19</option>
        <option title="20" value="20">20</option>
        <option title="21" value="21">21</option>
        <option title="22" value="22">22</option>
        <option title="23" value="23">23</option>
        <option title="24" value="24">24</option>
        <option title="25" value="25">25</option>
        <option title="26" value="26">26</option>
        <option title="27" value="27">27</option>
        <option title="28" value="28">28</option>
        <option title="29" value="29">29</option>
        <option title="30" value="30">30</option>
        <option title="31" value="31">31</option>
        <option title="32" value="32">32</option>
        <option title="33" value="33">33</option>
        <option title="34" value="34">34</option>
        <option title="35" value="35">35</option>
        <option title="36" value="36">36</option>
        <option title="37" value="37">37</option>
        <option title="38" value="38">38</option>
        <option title="39" value="39">39</option>
        <option title="40" value="40">40</option>
        <option title="41" value="41">41</option>
        <option title="42" value="42">42</option>
        <option title="43" value="43">43</option>
        <option title="44" value="44">44</option>
        <option title="45" value="45">45</option>
        <option title="46" value="46">46</option>
        <option title="47" value="47">47</option>
        <option title="48" value="48">48</option>
        <option title="49" value="49">49</option>
        <option title="50" value="50">50</option>
        <option title="51" value="51">51</option>
        <option title="52" value="52">52</option>
        <option title="53" value="53">53</option>
        <option title="54" value="54">54</option>
        <option title="55" value="55">55</option>
        <option title="56" value="56">56</option>
        <option title="57" value="57">57</option>
        <option title="58" value="58">58</option>
        <option title="59" value="59">59</option>
    </select> &nbsp;minutes
</body>

</html> 
```

请在 jsFiddle 中找到示例代码：http: [//jsfiddle.net/2QTvJ/](http://jsfiddle.net/2QTvJ/)

（在 IE9 和 chrome 中打开示例查看差异。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:39:32.143

正如 Raheel 所说，它会从你击中的角色开始上升到下一个值，例如 4 或 5。您可以有一个文本框输入，然后更改下拉值或可以区分该值的其他类型的表单元素。

另一种方法是用 jquery keypress 函数区分值。

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

# javascript - 如何向切换添加过渡？

> ID：15917745
> 
> 赞同：1
> 
> 时间：2013-04-10T05:34:50.607
> 
> 标签：javascript, toggle, sidebar

我用它来切换侧边栏：

```
$(document).ready(function () {
$('.sbt').click(function () {
    $('.sidebar').toggle();
}); 
```

});

你可以在这里看到它的工作：

[http://jsfiddle.net/Jacob_Sell/Ye7wp/](http://jsfiddle.net/Jacob_Sell/Ye7wp/)

我认为切换现在看起来很跳跃，如何添加过渡以使其看起来更平滑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:36:36.670

```
$(document).ready(function () {
    $('.sbt').click(function () {
        $('.sidebar').toggle(300);
    });
}); 
```

[**更新了演示**](http://jsfiddle.net/Ye7wp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:44:20.503

[http://jsfiddle.net/Praveen16oct90/Ye7wp/4/](http://jsfiddle.net/Praveen16oct90/Ye7wp/4/)

```
**$(document).ready(function () {
$('.sbt').click(function () {
    $('.sidebar').toggle(2000);
});
});** 
```

# c# - 如何将字符样式应用于文字处理文档中的运行？

> ID：15917747
> 
> 赞同：4
> 
> 时间：2013-04-10T05:34:56.437
> 
> 标签：c#, ms-word, openxml, openxml-sdk, wordprocessingml

当我在 c# 中使用 openxml sdk 2 创建段落样式并将其应用到段落时，一切都是正确的，并且它将毫无问题地运行。

但是使用下面的代码，当我创建字符样式并将其应用于运行时，它不会更改文档的运行：

**下面的代码将创建样式并将其保存到文档的样式部分：**

```
 StyleDefinitionsPart stylePart = mainPart.AddNewPart<StyleDefinitionsPart>();
            Style style = new Style()
            {
                Type = StyleValues.Character,
                CustomStyle = true,
                StyleId = "CharacterStyle1"
            };
            LinkedStyle linkedStyle1 = new LinkedStyle() { Val = "LinkedStyle" };
            style.Append(linkedStyle1);
            style.Append(new Name() { Val = "CharacterStyle1" });
            StyleRunProperties styleRunProperties1 = new StyleRunProperties();
            Color color = new Color() { Val = "FF0000" };
            RunFonts font1 = new RunFonts() { ComplexScript = "Tahoma" };
            styleRunProperties1.Append(color);
            styleRunProperties1.Append(font1);
            styleRunProperties1.Append(new Bold());
            styleRunProperties1.Append(new FontSize() { Val = "48" });
            style.Append(styleRunProperties1);
            stylePart.Styles = new Styles();

            stylePart.Styles.Append(style); 
```

**下面的代码是我编写的将样式应用于运行的代码：**

```
 Paragraph heading = new Paragraph();
            ParagraphProperties headingPPr = new ParagraphProperties();
            heading.Append(headingPPr);

            Run run1 = new Run();
            Text textRun1 = new Text("THIS IS TEST RUN 1");
            run1.Append(textRun1);
            RunProperties rprRun1 = new RunProperties {RunStyle = new RunStyle() {Val = "CharacterStyle1"}};

            heading.Append(run1);
            body.Append(heading); 
```

**这些是*document.xml*的输出代码：**

```
 <?xml version="1.0" encoding="utf-8"?>
 <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
 <w:body>
 <w:p>
  <w:pPr />
  <w:r w:rsidRPr="009531B2">
    <w:t>THIS IS TEST RUN 1</w:t>
  </w:r>
 </w:p>
 </w:body>
 </w:document> 
```

*这种风格不适用于我的跑步！*

最后，这是我打开输出文档时样式库的屏幕截图，这张图显示样式已成功添加到文档中，但未申请运行：

![文档网中的风格图片](https://i.stack.imgur.com/6lxXs.png)

**如何将字符样式应用于跑步？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:44:07.623

基于[OpenXML 的 ECMA 规范](http://www.ecma-international.org/publications/standards/Ecma-376.htm)，为了对段落中的任何运行设置样式，您还必须将样式应用于段落标记：

> **17.3.1.29 rPr（段落标记的运行属性）**
> 
> 此元素指定应用于字形的一组运行属性，用于表示该段落的段落标记的物理位置。该段落标记作为文档中的物理字符，可以被格式化，因此应该能够像文档中的任何其他字符一样表示这种格式。如果此元素不存在，则段落标记未格式化，与任何其他文本运行一样。

**所以要在你的代码中解决这个问题..试试这个..**

```
Paragraph heading = new Paragraph();
ParagraphProperties headingPPr = new ParagraphProperties();
heading.Append(headingPPr);
ParagraphMarkRunProperties headingParagraphMarkRunProperties = new ParagraphMarkRunProperties();
RunStyle runStyle1 = new RunStyle(){ Val = "CharacterStyle1" };

headingParagraphMarkRunProperties.Append(runStyle1);
headingPPr.Append(headingParagraphMarkRunProperties);

Run run1 = new Run();
Text textRun1 = new Text("THIS IS TEST RUN 1");
run1.Append(textRun1);
RunProperties rprRun1 = new RunProperties {RunStyle = new RunStyle() {Val = "CharacterStyle1"}};

run1.Append(rprRun1);

heading.Append(run2);
body.Append(heading); 
```

**更新：**

根据您在评论中打开的 xml 片段，您忘记包含

```
RunProperties rprRun1 = new RunProperties {RunStyle = new RunStyle() {Val = "CharacterStyle1"}};

 run1.Append(rprRun1); //Adding run properties to the run 
```

在你的代码中。还需要将属性单独应用于运行，以便将格式应用于具有自己的属性部分的`run`元素：`run`

> 正如段落可以具有属性一样，运行也可以。r 元素内的所有元素的属性由相应的可选 rPr 运行属性元素（第 17.7.9.1 节；第 17.3.2.27 节）控制，该元素应是 r 元素的第一个子元素。反过来，rPr 元素是一组属性元素的容器，这些属性元素应用于 r 元素的其余子元素。[注：rPr 容器元素内的元素允许消费者控制例如以下运行内容中的内容是粗体、下划线还是可见。尾注]

希望这可以帮助。

# perl - 为什么不能按照存储顺序检索 Perl 哈希的键？

> ID：15917748
> 
> 赞同：3
> 
> 时间：2013-04-10T05:35:00.260
> 
> 标签：perl

我在 Perl 中声明了一个哈希，后来我按一定的顺序添加了几个键值对。当我迭代哈希时，键值对的存储顺序不同。是什么原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T05:42:20.933

因为散列使数据保持由散列函数控制的顺序。好的散列函数将键映射到看起来几乎是随机的散列值。

如果你想在 Perl 中排序哈希，你可以使用[`Tie::Hash::Indexed`](http://search.cpan.org/perldoc?Tie::Hash::Indexed)or [`Tie::IxHash`](http://search.cpan.org/perldoc?Tie::IxHash)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T05:41:33.303

哈希图通常不保留任何语言的顺序。

您可以在迭代它们以获得排序顺序之前对键进行排序，或者如果您确实需要原始插入顺序，则可以将其单独保存在单独的数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:18:26.183

哈希不保留顺序的*原因*是它们存储在称为[哈希表](http://en.wikipedia.org/wiki/Hash_table)的特殊结构中。

当您访问`$hash{key}`时，引擎盖下将`key`转换为标识该值位置的索引。即使您的散列具有大量元素，这也允许近乎即时地访问散列的内容。

相比之下，如果哈希存储在保留插入顺序的结构（例如传统数组）中，则需要大量查找才能找到给定元素。如果您有一个包含一百万个元素的数组，则查找特定元素平均需要 500,000 次操作。

如果插入顺序是您需要访问数据的主要方式，那么使用传统数组可能会更好。

# coldfusion - 冷融合上的 OnRequestStart

> ID：15917750
> 
> 赞同：3
> 
> 时间：2013-04-10T05:35:16.787
> 
> 标签：coldfusion

如果需要，他们是否会强制 OnSessionstart 在 OnrequestStart 上再次运行。

我正在构建一个站点，其中基于动态子域创建了许多变量。因此，如果不重置会话变量，我将要检查 onRequestStart 域是否相同。

这有意义吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:06:54.743

onSessionStart 应该由不同的子域触发 - 那些将是不同的 cookie。

但是，如果 ColdFusion 应用程序事件中的代码需要共享或重新运行，请将它们分解为自己的函数并从多个事件中运行它们。这就是大多数框架运行它们的“重新初始化”功能的方式：应用程序在启动时被初始化，但也通过 URL。调用的是共享函数，而不是原始应用程序事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:01:14.407

回答你的第一个问题，是的。您可以直接调用 onSessionstart ，如下所示：

```
<cfset onSessionstart()> 
```

但是，所做的只是启动会话，并允许您在新会话启动时执行某些代码。CF 已在需要时自动启动新会话。

阅读它似乎你想要做的是设置域特定的会话变量。这可以通过多种方式完成，但可能最不“好”的方式是再次调用 onSessionstart 方法。我这么说的原因是，无论您在 onRequestStart 方法中做什么，您都可以/应该在 onSessionstart 中执行。也就是说，您在 onRequestStart 中可用的任何信息，只要用户正在使用的域在 onSessionstart 中可用。

而且，您可以在站点代码的任何位置设置会话变量。它不必在 onSessionstart 中完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:25:24.827

我个人不会从 OnRequestStart 中调用 onSessionStart ，因为当您在 onSessionStart 中有您可能不想在每次 OnRequestStart 触发时运行的代码时，这可能真的很麻烦。我要做的只是创建一个新方法并将其放在 onSessionStart 和 onRequestStart 方法上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:37:35.927

为什么不直接在 onRequestStart() 中运行 onSessionStart()？这将导致 onSessionStart() 内部的代码触发。此时您不在会话创建生命周期之外，但代码将运行。

# javascript - 从 DOM 中删除已使用 Javascript 和 jQuery 添加的项目？

> ID：15917756
> 
> 赞同：1
> 
> 时间：2013-04-10T05:35:38.973
> 
> 标签：javascript, jquery

我正在开发一个 JavaScript/jQuery 项目，该项目在单击按钮时向页面添加一组 div 和输入字段，当单击该按钮时，还有另一个按钮从页面中删除这些项目。

我的问题是它不会在页面加载后从页面中删除已添加到页面的项目。因此，使用 Javascript 添加到页面的任何内容都不会被 Javascript 删除。

下面是我正在使用`.on`jQuery 事件的代码，但它并没有按照我的解释进行。

如何使下面的代码在 Dom 加载后使用 Javascript 添加到页面的项目上工作？

```
// Remove "Deleted" Rows from View and mark as a Deleted item
$(".delete").on('click',function() {
    $(this).parents(".dnsRecord").addClass("deleted").find("input.delete").val("true");
    $(this).parents(".dnsRecord").find("span.undo").fadeIn('slow');
    PanelDNS.unsavedChanges = true;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:38:16.580

通过将选择器作为第二个参数传递，使用[.on()](http://api.jquery.com/on/)的委托事件模型`.delete`

```
$(document).on('click', '.delete', function() {
    $(this).parents(".dnsRecord").addClass("deleted").find("input.delete").val("true");
    $(this).parents(".dnsRecord").find("span.undo").fadeIn('slow');
    PanelDNS.unsavedChanges = true;
}); 
```

# c# - 试图将今天的日期与一个月前的日期进行比较

> ID：15917757
> 
> 赞同：2
> 
> 时间：2013-04-10T05:35:42.717
> 
> 标签：c#, .net, date, datetime

我有一个从数据库加载配置的对象。我使用 datetime 字段（称为 ）存储上次运行作业的时间，并使用名为`GroupsLastRun`的字符串字段存储作业应该运行的频率`Captureusersandgroups`。`Captureusersandgroups`存储三种不同类型的“每日”、“每周”和“每月”。

基本上，我有一个循环应该只在作业即将运行时继续。到目前为止，我已经达到以下几点：

```
if (configEntity.GroupsLastrun > DateTime.Now.AddDays(-1) && configEntity.Captureusersandgroups == "DAILY") continue;
if (configEntity.GroupsLastrun > DateTime.Now.AddDays(-7) && configEntity.Captureusersandgroups == "WEEKLY") continue;
if (configEntity.GroupsLastrun > DateTime.Now.AddDays(-30) && configEntity.Captureusersandgroups == "MONTHLY") continue; 
```

我确信（确定）有更好的方法来解决这个问题，但主要是作为 SQL Server 开发人员，我缺乏解决这个问题的批判性思维/工具。什么是更好的方法或者我应该学习什么以便更好地思考这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T06:06:42.810

几点：

*   除非您想受时区和夏令时转换等的支配，否则我会使用`DateTime.UtcNow`而不是`DateTime.Now`（并确保您也*存储*UTC 值）
*   正如 pswg 所提到的，只需要询问当前日期/时间一次 - 但不是性能，我想说重要的原因是*一致性*。在这种情况下，您似乎只会实际使用其中一个值，但在其他情况下，我看到人们编写同时使用两个评估的条件，如果代码在午夜运行会导致问题
*   *由于检查条件并同时*确定截止日期，您有重复的代码。我会把两者分开。

所以，我会有这样的代码：

```
// Consider whether you actually want DateTime.UtcNow.Date
DateTime now = DateTime.UtcNow;

DateTime deadline;
switch (configEntity.Captureusersandgroups)
{
    case "DAILY": deadline = now.AddDays(-1);
    case "WEEKYLY": deadline = now.AddDays(-7);
    case "MONTHLY": deadline = now.AddMonths(-1);
    // I'm assuming there's *always* a schedule
    default: throw new InvalidOperationException("Invalid schedule");
}
if (configEntity.GroupsLastrun > deadline)
{
    continue;
} 
```

请注意，从“现在”中减去一个月与从“那时”中添加一个月不同。例如，如果最后一次运行是在 1 月 30 日，那么下一次运行将在 3 月 1 日之前使用上述代码 - 而如果您在 1 月 30 日添加一个月，它将在 2 月 28 日运行（除非您使用两个值的*日期*）。仔细考虑您想要的行为。

（作为一个快速插件，我显然还建议考虑使用我的[Noda Time](http://noda-time.googlecode.com)库进行日期/时间工作。它可以更清楚地说明任何特定值是本地时间还是某个时区等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:52:52.820

两点：

1.  `DateTime.Now`每次调用时都可以（潜在）返回不同的日期。它也不是很快。只需调用一次，您将获得更好的一致性和非常轻微的性能提升。
2.  您可能应该使用标准方法来添加星期和月份，以保持一致性（例如，一个月并不总是 30 天）和全球化（例如，并非所有文化都有 7 天的星期）。请注意，没有简单的方法可以`DateTime`单独添加几周；你必须使用 a[`Calendar`](http://msdn.microsoft.com/en-us/library/7y5k6h07.aspx)代替。

尝试这个：

```
var now = DateTime.UtcNow; // See Jon Skeet's answer
var cal = CultureInfo.InvariantCulture.Calendar;
if (configEntity.GroupsLastrun > now.AddDays(-1) && configEntity.Captureusersandgroups == "DAILY") continue;
if (configEntity.GroupsLastrun > cal.AddWeeks(now, -1) && configEntity.Captureusersandgroups == "WEEKLY") continue;
if (configEntity.GroupsLastrun > now.AddMonths(-1) && configEntity.Captureusersandgroups == "MONTHLY") continue; 
```

或者只是`cal`用于一切：

```
var now = DateTime.UtcNow; // See Jon Skeet's answer
var cal = CultureInfo.InvariantCulture.Calendar;
if (configEntity.GroupsLastrun > cal.AddDays(now, -1) && configEntity.Captureusersandgroups == "DAILY") continue;
if (configEntity.GroupsLastrun > cal.AddWeeks(now, -1) && configEntity.Captureusersandgroups == "WEEKLY") continue;
if (configEntity.GroupsLastrun > cal.AddMonths(now, -1) && configEntity.Captureusersandgroups == "MONTHLY") continue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:16:04.853

作为一种替代方法，您可以将运行期间存储在`enum`like 中：

```
enum RunPeriod
{
    Daily = 1,
    Weekly = 7,
    Monthly = 30
} 
```

然后您可以将`int`值而不是存储`string`在数据库中。这允许您在数据库端进行过滤，例如：

```
var configsToRun = 
    from c in _myContext.Configs
    where EntityFunctions.AddDays(c.LastRun,(int)c.RunPeriod) > DateTime.Now); 
```

# css - 使用 css 溢出自动隐藏垂直滚动条

> ID：15917759
> 
> 赞同：23
> 
> 时间：2013-04-10T05:35:59.220
> 
> 标签：css

我遇到了一个使用 css 溢出来自动隐藏垂直滚动条的问题。我在几篇文章中读到使用 css hover 伪类来实现这种行为，好在我在某种程度上是成功的。

对于overflow-y 属性，我同时使用了'scroll' 和'auto'。使用滚动它就像一个魅力，但使用“滚动”的问题是即使不需要显示滚动条，它也是可见的，我觉得“自动”做得很好。

但是再次使用“自动”，问题是右侧有一个 16 像素（我假设）的间隙。可能是滚动条的宽度。我想要全宽。我用背景来解释我的问题。

这是小提琴。[http://jsfiddle.net/9scJE/](http://jsfiddle.net/9scJE/)

```
div.autoscroll {
    height: 200px;
    width: 400px;
    overflow: hidden;
    border: 1px solid #444;
    margin: 3em;
}

div.autoscroll:hover {
    /* overflow-y: scroll; */
    overflow-y: auto;
} 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T05:45:57.067

这实际上对我来说似乎是一个浏览器错误，但如果您添加`padding-right: 1px`悬停，它似乎可以像您想要的那样工作。

```
div.myautoscroll:hover {
     overflow: auto;
     padding-right: 1px;
} 
```

[http://jsfiddle.net/ExplosionPIlls/9scJE/1/](http://jsfiddle.net/ExplosionPIlls/9scJE/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:47:37.653

您应该使用填充来补偿滚动条。

```
div.autoscroll:hover {
    /* overflow-y: scroll; */
    overflow-y: scroll;
padding-right: 16px;

} 
```

但是最好使用 javascript 来执行此操作，因为滚动条宽度在浏览器之间可能略有不同。我已经成功使用了这个解决方案：[如何计算滚动条的宽度？](https://stackoverflow.com/questions/8079187/how-to-calculate-the-width-of-the-scroll-bar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:44:02.270

您可以在将`width: 100%;`鼠标悬停在 div 上时添加：

```
 div.myautoscroll:hover {
     overflow: auto;
     width: 100%;
 } 
```

`**[Working Demo](http://jsfiddle.net/9scJE/2/)**`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-03T12:37:11.473

```
::-webkit-scrollbar{
     opacity:0;
     background: transparent;
}
::-webkit-scrollbar:hover{
     opacity: 1;
}
.container:hover::-webkit-scrollbar-thumb{
     background: red;
} 
```

# mysql - mysql存储过程声明语句不起作用

> ID：15917763
> 
> 赞同：-2
> 
> 时间：2013-04-10T05:36:05.920
> 
> 标签：mysql, stored-procedures

以下是我的存储过程，并且声明行出现了问题。

```
delimiter //
CREATE PROCEDURE LoadRelationSystem(IN tablename VARCHAR(150),IN fieldvalue INT(10))
BEGIN
DECLARE tabname VARCHAR(150);
SET tabname = tablename;
SELECT * FROM table where fieldtable = tabname;
END
delimiter; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:37:49.217

你不需要声明一个变量，直接使用它：

```
delimiter //
CREATE PROCEDURE LoadRelationSystem
(IN tablename VARCHAR(150), IN fieldvalue INT(10))
BEGIN
    SELECT * FROM `table` where fieldtable = tablename;
END //
delimiter; 
```

# c++ - 查找图像中的不同部分

> ID：15917774
> 
> 赞同：1
> 
> 时间：2013-04-10T05:36:35.393
> 
> 标签：c++, algorithm

假设给定一个`vector<vector<bool>>`（正方形区域），其中 1 对应于“填充”框。有什么方法可以在 O(n) 时间内找到整个区域吗？例如，这个向量将有两个完整的区域：

```
0 0 1 1 1 0 0 0
0 0 0 0 1 0 0 0
0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0
0 1 0 0 1 0 0 0
0 0 1 0 1 0 0 0
0 0 0 1 0 0 0 0
0 0 0 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:51:49.180

这称为 8 连通[区域增长](http://en.wikipedia.org/wiki/Region_growing)。这是图像处理中的一种标准技术，您选择一个种子像素并“增长”。这可以通过[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)在像素数的线性时间内完成：

*   在边缘排队，把初始种子放在那里
*   从队列中获取一个元素，将其称为当前点并添加到您的“区域”列表中
*   将当前点的邻居推送到队列中，永远不要将您已经推送到队列中的点推送到队列中
*   当队列为空时结束。

区域列表包含一个区域，将其设置为零。找到另一个种子并再次运行，直到找不到种子。

# c++ - C++ 中的堆栈异常处理

> ID：15917776
> 
> 赞同：0
> 
> 时间：2013-04-10T05:36:37.187
> 
> 标签：c++

我为 Stack 编写了一个函数，其中函数 top() 显示了堆栈的顶部：

```
class RuntimeException{
    private:
    string errorMsg;
    public:
    RuntimeException(const string& err){errorMsg = err;}
    string getMessage() const {return errorMsg;}
    };

class StackEmpty : public RuntimeException{
public:
StackEmpty(const string& err) : RuntimeException(err){}
};

template <typename E >
const E& ArrayStack<E> ::top() const throw(StackEmpty)
{
    try{
        if(empty()) throw StackEmpty("Top of Empty Stack");
        return S[t];
        }
    catch(StackEmpty& se){
        cout << se.getMessage()<<"\n";
        }
    }

int main()
{
    ArrayStack <int> A;

    cout << "######\n";
    cout << A.top() << "\n";
        cout << "######\n";

    } 
```

它显示以下编译警告：

```
$ g++ -Wall Stack.cpp -o Stack
Stack.cpp: In member function `const E& ArrayStack<E>::top() const [with E = int]':
Stack.cpp:91:   instantiated from here
Stack.cpp:61: warning: control reaches end of non-void function 
```

输出是：

```
$ ./Stack
######
Top of Empty Stack
6649957
###### 
```

有人能说出警告的内容以及如何解决吗？另外输出中的数字“6649957”表示什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:39:05.507

在`StackEmpty`抛出的情况下，函数不返回任何内容，尽管它应该返回`const E&`。

```
template <typename E >
const E& ArrayStack<E> ::top() const throw(StackEmpty)
{
    try{
        if(empty()) throw StackEmpty("Top of Empty Stack");
        return S[t];
        }
    catch(StackEmpty& se)
    {
        cout << se.getMessage()<<"\n";
        // Return operator is missing ! Possibly you want this:
        throw;
   }
} 
```

**编辑。** 这是使用方法抛出的异常的方法。您需要在客户端代码中捕获异常，而不是在方法本身中。

```
template <typename E >
const E& ArrayStack<E> ::top() const throw(StackEmpty)
{
    if(empty()) throw StackEmpty("Top of Empty Stack");
    return S[t];
}

int main()
{
    ArrayStack <int> A;

    try
    {
        cout << "######\n";
        cout << A.top() << "\n";
        cout << "######\n";
    }
    catch(StackEmpty& se)
    {
        cout << se.getMessage()<<"\n";
    }
} 
```

# asp.net - csv文件中的多余字符

> ID：15917777
> 
> 赞同：1
> 
> 时间：2013-04-10T05:36:47.810
> 
> 标签：asp.net, iis

我正在构建一个 csv 文件并将其发送到浏览器。在某些安装中，额外的字符会添加到 http 响应正文的开头，它会破坏文件。

这就是我的代码的样子。

```
Dim File As New Text.StringBuilder
File.Append("Batch Name,")
File.Append("Batch Accepted Total")
File.AppendLine

For Each Batch In Batches
    File.Append(Batch.Name)
    File.Append(",")
    File.AppendFormat("{0:c}", Batch.AcceptedTotal)

    File.AppendLine
Next

Dim FileName = "SomeFile.csv"
Dim Encoder = Text.Encoding.UTF8
Dim FileData = Encoder.GetBytes(File.ToString)

Response.Clear
Response.ClearHeaders
Response.Buffer = True
Response.AddHeader("Content-Disposition", "attachment;filename=" & FileName)
Response.ContentType = "text/plain"
Response.OutputStream.Write(FileData, 0, FileData.Length)
Controller.FileData = Nothing
Response.Flush
Response.End 
```

只有一些安装会这样做，而其他安装则不会。我不知道为什么。如果我交换数据库，同一个站点仍然存在问题。所以我知道它不依赖于数据。

这就是文件最终的样子

```
781
Batch Name,Batch Accepted Total
3/8/2013,$961.24
Lincoln Payroll,$999.99

0 
```

第一行的 718 发生了变化。它接缝取决于文件的大小。最后多余的 0 永远不会改变，我也不知道它来自哪里。

**更新：** 我发现第一行是十六进制预期内容的长度。删除此行也将删除多余的字符。

```
Response.Flush 
```

我仍然不知道为什么。不需要那条线，所以我已经完成了寻找修复的工作，但是如果有人知道发生了什么，我想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:07:53.013

我猜它与 UTF8 编码有关——最后一个字符有点特殊，可能是一个 EOF，然后它被编码为 2 个字节，接收器不会将其视为 UTF8，但除了2 字节字符。接收器（记事本？）将其视为每个字符编码 1 个字节（可能是普通的 ascii）。

哦，我看到你的更新了。然后，虚假字节必须四处移动，足以得到虚假的最终 0，但不足以破坏整个文件。

上次我不得不处理一个具有令人惊讶的编码的文件时，我尝试了所有可能的编码——一些产生了完全混乱的文本，一些是可读的，一种是现货。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:56:00.140

对于 CSV，Response.ContentType 是“text/csv”。另外，尝试使用[StreamWriter](http://www.dotnetperls.com/streamwriter-vbnet)类来编写 CSV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T07:35:44.007

通过禁用响应标头中的服务器重写规则，我在 IIS 8.5 中解决了完全相同的问题。带有添加行和损坏的 PDF 的 CSV 由 SSRS（SQL Server Reporting Services）制作。

# lyx - 如何隐藏 Lyx 空间注释

> ID：15917778
> 
> 赞同：0
> 
> 时间：2013-04-10T05:37:10.570
> 
> 标签：lyx

如果我在数学模式下插入“薄空间”，Lyx 会显示一个类似“U”的符号来代替空间。（注意下图中冒号后面的符号）。

![天猫座空间](https://i.stack.imgur.com/qXaz1.jpg)

有没有办法在 Lyx 中隐藏这个符号？

如果公式中有很多空格，则在 Lyx 中看起来很丑。（请注意，该公式在 pdf 中看起来不错。但我更喜欢在编辑时处于 lyx 视图中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T19:07:25.293

您可以做的一件事是使用[InstantPreview](http://wiki.lyx.org/LyX/InstantPreview)功能。完成数学插图的编辑后，它将即时渲染。有关说明，请参阅[wiki](http://wiki.lyx.org/LyX/InstantPreview)页面。

# php - php单选按钮值计算

> ID：15917780
> 
> 赞同：1
> 
> 时间：2013-04-10T05:37:17.233
> 
> 标签：php, html

我开始使用 php 并被这个看似简单的过程卡住/困惑。我有一个带有不同值的单选按钮列表，我想用一个简单的公式计算这些值。

我想用一个由选定复选框的数量确定的数字添加该值，然后将其作为价格输出。例如。如果选择收音机 1，它的价值是 140 美元，还有 4 个方框打勾，每个价值 10 美元，我如何输出总价值 180 美元？这是我的收音机 html 代码

```
<input type="radio" name="math" id="standard" value="140">
<label for="youth">mid range value</label>
<input type="radio" name="math" id="extra" value="180">
<label for="youth">extra cost</label> 
```

和一些复选框

```
<input type="checkbox" name="more[]" id="a"
value="10"> <label for="val1">box a</label><br>
<input type="checkbox" name="more[]"id="b"
value="10"> <label for="val">box b</label><br> 
```

如何添加取决于所选复选框数量的值？

任何帮助，或指出我正确的方向将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:41:15.520

好吧，我确定您知道该`math`值是从`$_REQUEST['math']`（提交表单后）获取的。这将是`140`（或`180`等）

`$_REQUEST['more']`将是一个数组，其值对应于每个选定的值。您实际上可以很容易地得到总和`array_sum($_REQUEST['more'])`，这将产生每个选定值的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:42:50.777

您必须在每个已选中的单选事件上使用 JavaScript 来获取此信息，您必须添加控件的值，而在未选中的控件中，您必须减去该值，以便得到答案。

# wsdl - 我的代理服务不起作用

> ID：15917782
> 
> 赞同：1
> 
> 时间：2013-04-10T05:37:22.657
> 
> 标签：wsdl, wso2, wso2esb

我创建了一个代理服务，该代理服务映射到在 Tomcat 内的本地主机上运行的外部服务上。当我通过 SOAPUI 调用代理服务时，我收到错误：

> 未找到操作的端点引用 (EPR) 是 /services/TestWebService 和 WSA Action = 。如果此 EPR 以前可以访问，请联系服务器管理员。

这里是从我的原始 WSDL 生成的代理的 WSDL：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://apache.org/hello_world_soap_http" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:x1="http://apache.org/hello_world_soap_http/types" name="HelloWorld" targetNamespace="http://apache.org/hello_world_soap_http">
    <types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://apache.org/hello_world_soap_http/types" elementFormDefault="qualified" targetNamespace="http://apache.org/hello_world_soap_http/types">
            <simpleType name="MyStringType">
                <restriction base="string">
                    <maxLength value="30"/>
                </restriction>
            </simpleType>
            <element name="sayHi">
                <complexType/>
            </element>
            <element name="sayHiResponse">
                <complexType>
                    <sequence>
                        <element name="responseType" type="string"/>
                    </sequence>
                </complexType>
            </element>
            <element name="greetMe">
                <complexType>
                    <sequence>
                        <element name="requestType" type="tns:MyStringType"/>
                    </sequence>
                </complexType>
            </element>
            <element name="greetMeResponse">
                <complexType>
                    <sequence>
                        <element name="responseType" type="string"/>
                    </sequence>
                </complexType>
            </element>
            <element name="greetMeOneWay">
                <complexType>
                    <sequence>
                        <element name="requestType" type="string"/>
                    </sequence>
                </complexType>
            </element>
            <element name="pingMe">
                <complexType/>
            </element>
            <element name="pingMeResponse">
                <complexType/>
            </element>
            <element name="faultDetail">
                <complexType>
                    <sequence>
                        <element name="minor" type="short"/>
                        <element name="major" type="short"/>
                    </sequence>
                </complexType>
            </element>
        </schema>
    </types>
    <message name="sayHiRequest">
        <part name="in" element="x1:sayHi"/>
    </message>
    <message name="pingMeResponse">
        <part name="out" element="x1:pingMeResponse"/>
    </message>
    <message name="greetMeRequest">
        <part name="in" element="x1:greetMe"/>
    </message>
    <message name="sayHiResponse">
        <part name="out" element="x1:sayHiResponse"/>
    </message>
    <message name="greetMeResponse">
        <part name="out" element="x1:greetMeResponse"/>
    </message>
    <message name="pingMeRequest">
        <part name="in" element="x1:pingMe"/>
    </message>
    <message name="greetMeOneWayRequest">
        <part name="in" element="x1:greetMeOneWay"/>
    </message>
    <message name="pingMeFault">
        <part name="faultDetail" element="x1:faultDetail"/>
    </message>
    <portType name="Greeter">
        <operation name="sayHi">
            <input name="sayHiRequest" message="tns:sayHiRequest"/>
            <output name="sayHiResponse" message="tns:sayHiResponse"/>
        </operation>
        <operation name="greetMe">
            <input name="greetMeRequest" message="tns:greetMeRequest"/>
            <output name="greetMeResponse" message="tns:greetMeResponse"/>
        </operation>
        <operation name="greetMeOneWay">
            <input name="greetMeOneWayRequest" message="tns:greetMeOneWayRequest"/>
        </operation>
        <operation name="pingMe">
            <input name="pingMeRequest" message="tns:pingMeRequest"/>
            <output name="pingMeResponse" message="tns:pingMeResponse"/>
            <fault name="pingMeFault" message="tns:pingMeFault"/>
        </operation>
    </portType>
    <binding name="Greeter_SOAPBinding" type="tns:Greeter">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="sayHi">
            <soap:operation soapAction="" style="document"/>
            <input name="sayHiRequest">
                <soap:body use="literal"/>
            </input>
            <output name="sayHiResponse">
                <soap:body use="literal"/>
            </output>
        </operation>
        <operation name="greetMe">
            <soap:operation soapAction="" style="document"/>
            <input name="greetMeRequest">
                <soap:body use="literal"/>
            </input>
            <output name="greetMeResponse">
                <soap:body use="literal"/>
            </output>
        </operation>
        <operation name="greetMeOneWay">
            <soap:operation soapAction="" style="document"/>
            <input name="greetMeOneWayRequest">
                <soap:body use="literal"/>
            </input>
        </operation>
        <operation name="pingMe">
            <soap:operation style="document"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
            <fault name="pingMeFault">
                <soap:fault name="pingMeFault" use="literal"/>
            </fault>
        </operation>
    </binding>
    <service name="SOAPService">
        <port name="SoapPort" binding="tns:Greeter_SOAPBinding">
            <soap:address location="http://WIN-PC:8280/services/TestWebService"/>
        </port>
    </service>
</definitions> 
```

问题是什么 ？SOAPAction 操作为空？其他 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:48:54.423

您从 SOAPUI 指向的服务端点是什么？有点像；

```
http://localhost:8280/services/yourproxy 
```

您用来调用 API 的请求是什么？如果您的代理与服务 wsdl( `using <publishwsdl> option`) 相关联，则您的请求应与该服务进行映射。否则，您可以使用实际请求来调用实际的后端服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:16:58.897

你用的是什么端口？你的 URL 应该是这样的。

```
http://localhost:8280/services/TestWebService 
```

# msbuild - 如何在 MSBuild 中读取 DLL 版本号？

> ID：15917786
> 
> 赞同：0
> 
> 时间：2013-04-10T05:37:52.437
> 
> 标签：msbuild

如何在 MSBuild 中读取 DLL 版本号并将其放入变量中以供以后使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:37:19.540

请参阅[GetAssemblyIdentity](http://msdn.microsoft.com/en-us/library/ms164296.aspx)任务。

```
 <GetAssemblyIdentity AssemblyFiles="MyDll.dll">
        <Output TaskParameter="Assemblies" ItemName="myAssemblyInfo"/>
    </GetAssemblyIdentity> 
```

`%(myAssemblyInfo.Version)`将提供 DLL 版本。

# c++ - 在linux中使用c ++检测连接的接口

> ID：15917790
> 
> 赞同：4
> 
> 时间：2013-04-10T05:38:19.810
> 
> 标签：c++, linux, networking, tcp, routing

我想检测现在连接的是哪个接口；我有三个 3g-modem 连接和两个到服务器的 lan 连接（我的设备不支持 wlan）。我的意思是连接的类型并不重要，但接口名称和细节对我来说很重要。我想在我用 C++ 编写的程序中检测连接的接口。请告诉我如何在 C++ 中检测连接的接口？（root 权限不是问题。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T05:54:24.900

用于`ioctl` `SIOCGIFFLAGS`检查接口是否 UP 和 RUNNING：

```
struct ifreq ifr;

memset( &ifr, 0, sizeof(ifr) );
strcpy( ifr.ifr_name, ifrname );

if( ioctl( dummy_fd, SIOCGIFFLAGS, &ifr ) != -1 )
{
    up_and_running = (ifr.ifr_flags & ( IFF_UP | IFF_RUNNING )) == ( IFF_UP | IFF_RUNNING );
}
else
{
    // error
} 
```

输入变量是`ifrname`。它应该是接口名称“eth0”，eth1”，“ppp0”...。

因为`ioctl()`需要一个文件描述符作为参数，您可以使用例如一些临时 UDP 套接字：

```
dummy_fd = socket( AF_INET, SOCK_DGRAM, 0 ); 
```

记住关闭套接字，不再使用时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:56:06.497

如果您使用的是 NetworkManager，则可以使用它的[API](http://projects.gnome.org/NetworkManager/developers/)。您可以使用 D-Bus API、GLib 包装、[D-Bus 的 C++ 绑定](http://sourceforge.net/apps/mediawiki/dbus-cplusplus/index.php?title=Main_Page)。

如果您使用的是 Qt，则可以直接使用[QtNetwork](http://qt-project.org/doc/qt-5.0/qtdoc/topics-network-connectivity.html)。

当然，您也可以非常低级并使用[`ioctl(7)`](http://manpages.ubuntu.com/7/ioctl). 参见[Adam Risi](http://www.adamrisi.com/?p=132)的[lsif](https://github.com/ajrisi/lsif/blob/master/lsif.c)示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:32:45.700

您还可以使用 netlink 路由套接字。请参阅[libnetlink](http://www.unix.com/man-page/Linux/3/libnetlink/)库，或 man 7 netlink 和 man 7 rtnetlink。

# java - 如何更新 session.setAttribute(name,value) 值，名称相同？

> ID：15917792
> 
> 赞同：3
> 
> 时间：2013-04-10T05:38:24.160
> 
> 标签：java, servlets

我有一种情况，我需要更新名称保持不变的 setAttribute 的值。考虑以下情况作为示例 -
假设我有三个 JSP：abc.jsp、xyz.jsp、pqr.jsp。现在首先运行 abc.jsp，然后将控制转发到 xyz.jsp，然后转发到 pqr.jsp。现在在执行 pqr.jsp 后，控件再次返回 xyz.jsp，并在 setAttribute 处更新了值。
**abc.jsp：**

```
ArrayList<Books> getSupplyStatus=new ArrayList<Books>();
JavaBean javaBean=new JavaBean();
session=request.getSession(false);
getSupplyStatus=javaBean.getSupplyStatus(memberID); //It returns a ArrayList 
if(!getSupplyStatus.isEmpty())
{
  session.setAttribute("UpdatedBooklist", getSupplyStatus);
  request.getRequestDispatcher("xyz.jsp").forward(request, response);
} 
```

**xyz.jsp：**

```
session=request.getSession(false);
ArrayList<Books> getSupplyStatus=(ArrayList<Books>) session.getAttribute("UpdatedBooklist");
// some operations & forward to pqr.jsp 
```

**pqr.jsp：**

```
// in this jsp new ArrayList<Books> will be prodeuced
// & I need to bound the value of "UpdatedBooklist" with 
// which is set in abc.jsp,
// and previous value must be override & then forward to xyz.jsp again
// In xyz.jsp we recieve the updated value. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T05:43:50.690

再次使用 setAttribute() 将[替换该值](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)并调用必要的生命周期方法。

> 如果一个对象已经绑定到此名称的实现 HttpSessionBindingListener 的会话，则调用其 HttpSessionBindingListener.valueUnbound 方法。

您还可以使用[removeAttribute()](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#removeAttribute%28java.lang.String%29)并再次设置具有相同名称的属性。如果通过“更新”表示您希望对象更新而不是替换，那么获取属性`getAttribute()`并在其上调用将改变对象的方法。

# msbuild - 如何在 MSBuild 中压缩文件夹？

> ID：15917803
> 
> 赞同：5
> 
> 时间：2013-04-10T05:39:10.927
> 
> 标签：msbuild

如何在 MSBuild 中压缩输出文件夹？对于文件名，我需要使用在其他地方设置的变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:26:13.507

“MSBuild.Community.Tasks.Zip”是一种方式。未定义 WorkingCheckout 和 OutputDirectory。

但是你可以得到下面的漂移。

下面将获取我的 zip 中所有不是 .config 文件的文件。

注意“主机”是我的自定义 csproj 文件夹名称，您的会有所不同。

```
<ItemGroup>
    <ZipFilesHostNonConfigExcludeFiles Include="$(WorkingCheckout)\Host\bin\$(Configuration)\**\*.config" />
</ItemGroup>
<!-- -->
<ItemGroup>
    <ZipFilesHostNonConfigIncludeFiles Include="$(WorkingCheckout)\Host\bin\$(Configuration)\**\*.*" Exclude="@(ZipFilesHostNonConfigExcludeFiles)" />
</ItemGroup>
<MSBuild.Community.Tasks.Zip Files="@(ZipFilesHostNonConfigIncludeFiles)" ZipFileName="$(OutputDirectory)\MyZipFileNameHere_$(Configuration).zip" WorkingDirectory="$(WorkingCheckout)\Host\bin\$(Configuration)\" />
<!-- --> 
```

这是另一个主流选项：

[http://msbuildextensionpack.codeplex.com/discussions/398966](http://msbuildextensionpack.codeplex.com/discussions/398966)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-03T07:19:37.453

如果要打包所有文件而不保留文件夹结构。

```
<ItemGroup>
  <ZipFiles Include="$(OutDir)\**\*.*" />
</ItemGroup>
<Target Name="AfterBuild" Condition="'$(Configuration)'=='Release'">
  <Zip ZipFileName="$(OutDir)\output.zip" WorkingDirectory="$(OutDir)" Files="@(ZipFiles)" Flatten="True" Quiet="true" />
</Target> 
```

如果要保留文件夹结构

```
<Target Name="AfterBuild" Condition="'$(Configuration)'=='Release'">
  <Zip ZipFileName="$(OutDir)\output.zip" WorkingDirectory="$(OutDir)" Files="@(ZipFiles)" Flatten="False" Quiet="true" />
</Target> 
```

**Flatten="True"** 表示将删除所有目录并将文件放在 zip 文件的根目录下。

**WorkingDirectory**是 zip 文件的基础。所有文件都将与工作目录相对。

# lua - Corona SDK 触摸事件

> ID：15917805
> 
> 赞同：0
> 
> 时间：2013-04-10T05:39:17.577
> 
> 标签：lua, coronasdk

所以最近我一直在为我的游戏制作一个按钮，让玩家回到主菜单，但是由于某种原因，你在场景中触摸的位置并不重要，它仍然会离开菜单。我只是想要它，以便当我单击图像时它会进入菜单。

继承人的代码：

```
function scene:createScene(event)

  screenGroup = self.view

  local createHud = function ()

    gameBg = display.newImage("bg.png")
    lvlnumber = display.newImage("lvlnumber.png", 0, -6)
    menubutton = display.newImage("menubutton1.png", -10, -6)

    screenGroup:insert(gameBg)
    screenGroup:insert(lvlnumber)
    screenGroup:insert(menubutton)
  end
end 

function scene:enterScene(event)

  local group = self.view

  local function onSceneTouch( event )
    if event.phase == "ended" then
      storyboard.gotoScene( "menu", "slideRight", 500 )
      return true
    end
  end

  function startButtonListeners(action)
    if(action == 'add') then  
      menubutton:addEventListener('touch', onSceneTouch)
    end 
  end 

  startButtonListeners('add')

  gameListeners("add")

end 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:19:55.670

对于每个触摸事件，使用上面的代码：

```
local function touchHandler( event )
    if event.phase == "began" then
        -- Some code here --
        display.getCurrentStage():setFocus( event.target )
        event.target.isFocus = true
    elseif event.target.isFocus then
        if event.phase == "moved" then
            -- Some code here --
        elseif event.phase == "ended" then
            -- Some code here --
            display.getCurrentStage():setFocus( nil )
            event.target.isFocus = false
        end
    end
    return true
end 
```

# android - Android倒数计时器一个接一个

> ID：15917813
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:39:51.500
> 
> 标签：android

我想在android应用程序中一个接一个地启动倒数计时器。我面临这个问题我已经编写了第二个倒数计时器的onFinish（）方法的代码，它应该启动第二个计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:50:21.483

```
class MyActivity {

private class MyTimer extends CountDownTimer {
   void onFinish() {
       mTimer.start();
   }
}

private mTimer = new MyTimer();

void firstStart() {
    mTimer.start();
}
} 
```

但是这样会创建/销毁很多 MyTimer 对象。考虑改用[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)。或[ScheduledExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:12:47.773

您可以使用 Android 消息处理程序，它允许您延迟发送消息，此延迟可以是您的倒计时。

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

利用

```
sendMessageDelayed(Message msg, long delayMillis) 
```

发送延迟消息。

以下是如何使用处理程序的示例：[Android 消息处理程序示例](http://idlesun.blogspot.co.il/2012/12/android-handler-and-message-tutorial.html)

# python - 在 python 中的较大字符串中优雅地展开某些子字符串

> ID：15917814
> 
> 赞同：2
> 
> 时间：2013-04-10T05:39:52.090
> 
> 标签：python, regex

嗨，我想将 4-6 类型的子字符串优雅地扩展为 4,5,6 更大的字符串，例如

```
s = "235:2,4,6-9,12,14-19;240:3,5-9,10;245:4,9,10-15,18"

print expand(s)
235:2,4,6,7,8,9,12,14,15,16,17,18,19;240:3,5,6,7,8,9,10;245:4,9,10,11,12,13,14,15,18 
```

使用 Python。

是否有一些正则表达式伏都教或类似的？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:43:13.997

你可以做：

```
>>> import re
>>> def repl(match):
...     start, end = match.groups()
...     return ','.join(str(i) for i in range(int(start), int(end)+1))
... 
>>> re.sub(r'(\d+)-(\d+)', repl, "235:2,4,6-9,12,14-19;240:3,5-9,10;245:4,9,10-15,18")
'235:2,4,6,7,8,9,12,14,15,16,17,18,19;240:3,5,6,7,8,9,10;245:4,9,10,11,12,13,14,15,18' 
```

这使用了`repl`参数 to[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)可以是一个可调用的事实，它将匹配项作为参数并返回替换字符串。

`expand(s)`那么函数将是：

```
import re

def repl(match):
    start, end = match.groups()
    return ','.join(str(i) for i in range(int(start), int(end)+1))

def expand(s):
    return re.sub('(\d+)-(\d+)', repl, s) 
```

# php - mod_rewrite 使用 .htaccess php 重写 url

> ID：15917815
> 
> 赞同：1
> 
> 时间：2013-04-10T05:39:53.593
> 
> 标签：php, .htaccess

我是 htaccess 规则的新手。

我想要一个将两个网址视为一个的规则。

*   [http://domain.com/folder/multisite/index.php](http://domain.com/folder/multisite/index.php)

*   [http://domain.com/folder/multisite/sites/client1/index.php](http://domain.com/folder/multisite/sites/client1/index.php)

这两个应该被视为相同的 URL。我只想将 sites/client1 添加到实际上什么都不做的 URL。每个 URL 请求都应该包含 sites/client1/。

对于下一个请求，例如

*   multisite2/index.php?id_product=1&controller=product
*   multisite2/sites/client1/index.php?id_product=1&controller=product

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:48:37.580

尝试这个：

`RewriteRule index.php?(.*) sites/client1/index.php?$1`

也请在此处发布之前搜索一下。此问题的一些可能重复项如下：

[.htaccess URL 重写一个和两个查询字符串变量](https://stackoverflow.com/questions/8198359/htaccess-url-rewrite-with-one-and-two-query-string-vars)

[htaccess url 重写为 .php](https://stackoverflow.com/questions/9125868/htaccess-url-rewrite-to-php?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:49:16.160

这会将 /sites/client1/ 中的所有请求发送到 /

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^sites/client1/(.*)$ $1 [L,QSA]
</IfModule> 
```

# c# - Convert.ToDecimal 失败并说输入字符串的格式不正确

> ID：15917822
> 
> 赞同：0
> 
> 时间：2013-04-10T05:40:17.840
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有这个带有价格属性的视图模型类。

问题是如果用户输入的值`$200,150.90`未格式化并发送到控制器。

十进制的默认模型格式化程序可能有什么问题？

```
public ItemViewModel
{

public string Name {get;set;}
[DisplayFormat(DataFormatString = "{0:c}")]
[RegularExpression(@"^\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(.[0-9][0-9])?$"
ErrorMessage = "Enter a valid money value. 2 Decimals only allowed")]
public decimal? Price{ get; set; }
} 
```

在视图中

```
@model ItemViewModel

@Html.TextBoxFor(m=>m.Price) 
```

在控制器中

```
public ActionResult Save(ItemViewModel model)
{

 // model.Price is always null, even if it has value $200,150.90
} 
```

我已经注册了这个十进制模型活页夹`Global.asax`

```
 ModelBinders.Binders.Add(typeof(decimal?), new DecimalModelBinder());

   public object BindModel(ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {
        ValueProviderResult valueResult = bindingContext.ValueProvider
            .GetValue(bindingContext.ModelName);
        ModelState modelState = new ModelState { Value = valueResult };
        object actualValue = null;
        try
        {
            actualValue = Convert.ToDecimal(valueResult.AttemptedValue,
                CultureInfo.CurrentCulture);
        }
        catch (FormatException e)
        {
            modelState.Errors.Add(e);
        }

        bindingContext.ModelState.Add(bindingContext.ModelName, modelState);
        return actualValue;
    } 
```

模型绑定器中的错误`Input string was not in a correct format`

```
 Convert.ToDecimal("$200,150.90",CultureInfo.CurrentCulture) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:03:31.253

如果格式为货币，则添加额外的十进制转换

感谢[将货币字符串转换为十进制？](https://stackoverflow.com/questions/14162357/convert-currency-string-to-decimal)

```
 string currencyDisplayFormat=(bindingContext.ModelMetadata).DisplayFormatString;
 if (!string.IsNullOrEmpty(currencyDisplayFormat) 
                           && currencyDisplayFormat == "{0:c}")
 {
    actualValue = Decimal.Parse(valueResult.AttemptedValue,
                  NumberStyles.AllowCurrencySymbol | NumberStyles.Number, 
                  CultureInfo.CurrentCulture);

 }
 else
 {
        actualValue = Convert.ToDecimal(valueResult.AttemptedValue,
                        CultureInfo.CurrentCulture);
 } 
```

# r - 检查R中数据框中的相同列

> ID：15917824
> 
> 赞同：28
> 
> 时间：2013-04-10T05:40:32.577
> 
> 标签：r, dataframe

假设您有一个名为 data 的数据框，其中包含两个相同的列：

```
A B
1 1
2 2
3 3
4 4 
```

如何检查这两列是否相同并返回**一个**逻辑值来表示它？一个非常基本的伪代码是：

```
if(data$A == data$B)
{
   print("Column A and B are identical")
} 
```

我一直在搞砸这件事，但还没有找到一种方法来做到这一点，看起来并没有不必要的复杂。谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-10T05:47:08.530

你可以使用`identical`

```
identical(DT[['A']],DT[['B']]) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-10T05:45:21.580

你可以使用[`all()`](http://rfunction.com/archives/1263)：

```
> data <- data.frame(A=c(1,2,3,4), B=c(1,2,3,4))
> all(data$A == data$B)
[1] TRUE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T06:52:22.117

对于您的问题，这可能是多余的，但您可能还想`compare()`从“比较”包中查看。考虑以下示例：

```
> data <- data.frame(A = c(1, 2, 3, 4), B = c(1, 2, 3, 4))
> compare(data[1], data[2]) ## Should be false
FALSE [TRUE]
> compare(data[1], data[2], ignoreNames = TRUE) # Allow different names
TRUE
  dropped names
> data <- data.frame(A = c(1, 2, 3, 4), B = as.character(c(1, 2, 3, 4)))
> str(data) ## "B" is now a factor, so use `coerce` to test for equality
'data.frame':   4 obs. of  2 variables:
 $ A: num  1 2 3 4
 $ B: Factor w/ 4 levels "1","2","3","4": 1 2 3 4
> compare(data[1], data[2], ignoreNames = TRUE, coerce = TRUE)
TRUE
  [A] coerced from <factor> to <numeric>
  dropped names 
```

有一个通用的逻辑参数 ，`allowAll`可以设置`TRUE`为允许`compare`函数尝试不同的转换来测试是否相等。

# php - cron 守护进程没有得到正确的控制器

> ID：15917827
> 
> 赞同：1
> 
> 时间：2013-04-10T05:40:51.310
> 
> 标签：php, codeigniter, cron

我几乎成功地在我的服务器上设置了一个 Cron 作业，但我无法调用正确的控制器。

工作：

```
 */15 * * * * php fullpath/index.php cron 
```

结果：我得到了默认控制器的 HTML 输出，而不是我的 Cron 控制器。

工作：

```
 */15 * * * * php fullpath/index.php cron index 
```

结果：我得到了默认控制器的 HTML 输出，而不是我的 Cron 控制器。

有人可以请教我做错了什么吗？

注意：我不想使用`wget`或`curl`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:06:58.437

创建 index.php 的副本，并将其命名为 cli.php。

在 cli.php 开头添加

```
#!/usr/local/bin/php
<?php

/* we don't need to be limited by...normal limitations */
set_time_limit(0);
ini_set('memory_limit', '256M');

/* make sure this isn't being called by a web browser */
if (isset($_SERVER['REMOTE_ADDR'])) die('Permission denied.');

/* set some constants */
define('CMD', 1);

/* manually set the URI path based on command line arguments... */
unset($argv[0]); /* ...but not the first one */
$_SERVER['QUERY_STRING'] =  $_SERVER['PATH_INFO'] = $_SERVER['REQUEST_URI'] = '/' . implode('/', $argv) . '/'; 
```

然后将您的 cron 更改为调用 cli.php 而不是 index.php。

# r - 将 LaTex 中的 \to 符号放入 R 中的 ggplot2

> ID：15917831
> 
> 赞同：3
> 
> 时间：2013-04-10T05:41:05.490
> 
> 标签：r, plot, latex, ggplot2

我试图将以下表达式放入我的刻度线中`ggplot2`：通常的乳胶箭头符号`x \to y`在哪里。`\to`这样做的正确方法是什么？`expression(x%to%y)`似乎没有工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T05:54:58.690

利用

`%->%`

例如

```
plot(1, type='n')
text(1,1, expression(x %->%y)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/kuRrw.png)

各种箭头在`?plotmath`

```
x %<->% y      # x double-arrow y
x %->% y       # x right-arrow y
x %<-% y       # x left-arrow y
x %up% y       # x up-arrow y
x %down% y     # x down-arrow y
x %<=>% y      # x is equivalent to y
x %=>% y       # x implies y
x %<=% y       # y implies x
x %dblup% y    # x double-up-arrow y
x %dbldown% y  #     x double-down-arrow y 
```

如果你想要*真正的*LaTex，那么你可以尝试让[tikzDevice](http://cran.r-project.org/web/packages/tikzDevice/index.html)为你的版本工作`R`

# php - 使用jquery ajax删除表中的记录

> ID：15917833
> 
> 赞同：3
> 
> 时间：2013-04-10T05:41:17.380
> 
> 标签：php, jquery, partial-page-refresh

我正在学习 j 查询 Ajax 事件。我已经使用 j 查询 Ajax 在 php 中插入和显示记录，但我无法删除记录我已经编写了代码但它不起作用，我不想再次加载表。请帮助

表名：登录

列：id、用户名、消息

评论.php

```
 <script type="text/javascript">
$(document).ready(function(e) {
 function showComment(){
     $.ajax({
     type:"post",
      url:"process2.php",
      data:"action=showcomment",
      success:function(data){
       $("#flash").html(data);
      }
    });
   }
showComment(); 

//Insert records 
$("#Submit").click(function(){

            if($(":text").val().length==0)
            {
               // $(this).next().html("Field needs filling");
               $(":text").after('<span class="errorkeyup">Field cannot be empty</span>');
                //return false;
                success = false;
            }
            else
            {
                var name=$("#name").val();
                var message=$("#message").val();
                $.ajax({
                  type:"post",
                   url:"process2.php",
                   data:"name="+name+"&message="+message+"&action=addcomment",                            
                  success:function(data){
                  showComment();                                  
                 } 
                }); 
            }

  });

$('.delete').click(function(e){
    e.stopPropagation();
            var deleteID = $(this).attr('name');
            var row = deleteID;
            $.ajax({
                type: "POST",
                url: "delete.php?deleteID=" + deleteID,
                data: "deleteID="+ deleteID,
                success: function(result){
                    $('#row'+row).fadeOut('fast');
                }
            });

        });     
});

</script>
    </head>

    <body>
    <form method="post" name="form" action="">
<div id="content">
 Name :    <input type="text" name="name" id="name"/>
               </br>
               Message : <input type="text" name="message" id="message" />
               </br>
               </div>
<input type="button" value="Submit" id="Submit">
</form>
</div>
<div id="flash"></div>

            </form>
    </body> 
```

进程.php

```
 <?php
  mysql_connect("localhost","root","dot1235");
  mysql_select_db("chitra");

  $action=$_POST["action"];

  if($action=="showcomment"){
     $show=mysql_query("Select * from login order by id ASC");
 echo "<table border=1 id=t1>";

   echo "<tr>";
   echo "<td>SrNo.</td>";
   echo "<td>Name</td>";
   echo "<td>Message</td>";
   echo "<td>Delete</td>";   
   echo "</tr>";
   $i=1;
     while($row=mysql_fetch_array($show)){
        //echo "<li><b>$row[name]</b> : $row[message]</li>";
        echo "<tr>";
    echo"<td>".$i."</td>";
    echo "<td>" .$row['username'] ."</td>"; 
    echo "<td>" .$row['message'] ."</td>";
    echo "<td><a href='javascript:void(0)'><img src=delete.png class=delete name=".$row[id]."</a></td>" ;
    echo "</tr>";
    $i++;
     }
     echo"</table>";
  }
  else if($action=="addcomment"){
    $name=$_POST["name"];
    $message=$_POST["message"];

     $query=mysql_query("insert into login(username,message) values('$name','$message') ");

     if($query){
        echo "Your comment has been sent";
     }
     else{
        echo "Error in sending your comment";
     }
  }

?> 
```

删除.php

```
<?php
include("connection.php");
 if(isset($_POST['id']))
  {
   $id = $_POST['id'];
   $id = mysql_escape_String($id);
   $delquery=mysql_query("delete from login where id=$id") or die(mysql_error());
   //echo "Record deleted";

  }

?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T05:48:56.317

在您的 delete.php 页面中存在小错误。

```
 $(".delete_button").click(function() {
var id = $(this).attr("mid");
var dataString = 'id='+ id ;
var parent = $(this).parent();

$.ajax({
   type: "POST",
   url: "delete.php",
   data: dataString,
   cache: false,

   success: function()
   {
    if(id % 2)
    {
    parent.fadeOut('slow', function() {$(this).remove();});
    }
    else
    {
    parent.slideUp('slow', function() {$(this).remove();});
    }
  } 
```

您传入`id`url 并根据此`mid` 更改您的`delet.php`内容。

```
<?php
include("connection.php");
 if(isset($_POST['id']))  //mid to id
  {
   $id = $_POST['id']; //mid to id
   $id = mysql_escape_String($id);
   $delquery=mysql_query("delete from login where mid=$id") or die(mysql_error());
   //echo "Record deleted";

  }

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:08:33.267

![在此处输入图像描述](https://i.stack.imgur.com/Q6Gqu.png)

这是用 JQuery 编码的整个逻辑的核心：

```
$(document).ready(function()
{
    $('table#delTable td a.delete').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            var id = $(this).parent().parent().attr('id');
            var data = 'id=' + id ;
            var parent = $(this).parent().parent();

            $.ajax(
            {
                   type: "POST",
                   url: "delete_row.php",
                   data: data,
                   cache: false,

                   success: function()
                   {
                    parent.fadeOut('slow', function() {$(this).remove();});
                   }
             });
        }
    });

    // style the table with alternate colors
    // sets specified color for every odd row
    $('table#delTable tr:odd').css('background',' #FFFFFF');
}); 
```

让我们使用分而治之的方法来看看这里发生了什么。

```
$(document).ready(function() 
```

这是 JQuery 的函数，它在文档准备好后立即运行。这类似于 onload 事件，但 JQuery 的功能要快得多。所以我们希望能够在页面准备好时运行这段代码。

```
$('table#delTable td a.delete').click(function() 
```

如果您曾研究过 CSS 选择器，那么上面这行代码对您来说应该不会太神秘。您可以使用相同的语法来使用 JQuery 来定位元素。基本上，它表示带有 id delTable 和 TD 的表在单击时具有带有类删除的超链接，运行此函数中指定的代码。因此，当单击 ID 为 delTable 的表中的 TD 内名为 delete 的类的超链接时，将执行指定的代码。

```
if (confirm("Are you sure you want to delete this row?")) 
```

我们希望能够确认用户是否真的想删除一行。

```
var id = $(this).parent().parent().attr('id');
var data = 'id=' + id ;
var parent = $(this).parent().parent(); 
```

请记住，在 JQuery 中，$(this) 总是指代目标元素，在我们的例子中是带有类删除的超链接。attr 用于获取或设置标签的属性。所以 id 变量指的是这个超链接的父级，它是 TD，然后是这个 TD 的父级，它是 TR。所以这里我们得到了这个TR的id属性。在 HTML 代码中，我们会将每一行的主键字段分配给这些 TR 以识别和删除记录。data 变量使数据作为使用 JQuery 发出的 ajax 请求的一部分发送。父变量是指每个包含目标元素的TR，该目标元素是带有类删除的超链接。

```
$.ajax(
{
       type: "POST",
       url: "delete_row.php",
       data: data,
       cache: false,

       success: function()
       {
        parent.fadeOut('slow', function() {$(this).remove();});
       }
 }); 
```

$.ajax 函数用于发送 ajax 请求。在它的参数中，type 是指请求的方法，无论是 POST 还是 GET，url 是指将获取 ajax 请求数据并返回一些响应的脚本，data 是指作为 ajax 请求的一部分发送的数据，类似于查询字符串表单中，缓存控制请求是否打开或关闭缓存，因为在 IE 中请求被缓存，如果请求成功，成功函数（也是 $.ajax 函数的属性）会运行其中的代码。

```
parent.fadeOut('slow', function() {$(this).remove();}); 
```

如前所述，在我们的案例中，父母指的是 TR。fadeOut 函数需要两个参数；动画速度和要执行的功能。所以这条线的作用是它通过淡出它来删除父链接，然后使用 remove() 方法删除目标链接。通过这种方式，整行都消失了，并且在 ajax 请求的帮助下，数据库中的记录也被删除了。这里我们使用了 JQuery 的 fadeOut 动画功能，但还有更多可用的动画。

```
$('table#delTable tr:odd').css('background',' #FFFFFF'); 
```

此行表示将背景样式应用于 id 为 delTable 的表的每个奇数 TR。现在因为我们的代码在页面准备就绪时执行，因此我们的表格将为每个奇数行提供备用颜色。

你可以[在这里](https://www.box.com/shared/ook6hxc0ix)下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T05:49:22.210

在 javascript 更改

```
var dataString = 'id='+ id ; 
```

至

```
var dataString = 'mid='+ id ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:50:42.763

我会这样做，更简单，更清洁：

删除.php

```
<?php

include("connection.php");
if(!isset($_REQUEST['action'])) die("Invalid request");
if(!isset($_REQUEST['id'])) die("Invalid Comment ID");
$action = $_REQUEST['action'];
if($action == 'remove_comment') {
    $id = (int)$_REQUEST['id'];
    $delquery = mysql_query("DELETE FROM `login` WHERE mid=$id") or die(mysql_error());
    echo 1;
}
?> 
```

js脚本：

```
function RemoveComment(comment_id) {
    var row = $("table#comments tr#commentid-"+comment_id);
    if(row.length < 1) return false; //if element doesnt exist on our page
    $.post("http://yourhost/delete.php", { action: "remove_comment", id: comment_id },
    function(response) {
        if(response == 1) row.fadeOut();
        else alert(response);
    });
} 
```

**编辑：**

```
$(".delete_button").click(function() {
var id = $(this).attr("id");
var dataString = 'id='+ id ;
var parent = $(this).parent(); 
```

我的“var row”在您的代码中是“var parent”，我只是使用了不同的元素名称和 ID。你应该使用你的。

而不是干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T05:48:38.920

`$id = $_POST['id']`在**delete.php**中使用而不是`$_POST['mid']`，那么它应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T05:49:05.657

`POST values`是不同的。像这样改变`delete.php POST values`。

```
<?php
include("connection.php");
 if(isset($_POST['id']))   // changed into 'id'
  {
   $id = $_POST['mid'];
   $id = mysql_escape_String($id);
   $delquery=mysql_query("delete from login where mid=$id") or die(mysql_error());
   //echo "Record deleted";

  }

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T05:49:06.863

伙计，您的 javascript 代码中有以下行，在删除处理程序中：

```
var id = $(this).attr("mid"); 
```

因此，您从删除链接中获取了一个不存在的“中间”属性。

在你的`process.php`：

```
<td><a href="#" id="<?php echo $mid; ?>" class="delete_button">Delete</a></td> 
```

`.attr('id')`您显然应该为`id`变量分配一个。

此外，正如其他评论者所指出的，您的`delete.php`脚本需要一个`$_POST['mid']`参数，但您向`id`它发送了一个参数。

为什么这个奇怪的命名呢？只需放下这个“中间”的东西并在任何地方使用“id”。

顺便说一句，如果您将自定义单击处理程序分配给 HTML 链接，最好`event.preventDefault()`在处理程序中作为第一件事调用，因为否则浏览器将尝试遵循`href`此链接的属性，在您的情况下 - 将页面滚动到顶部.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T05:51:17.843

我在这里看到两个问题

1.  服务器端变量`mid`在您发送的地方被调用`id`
2.  在你的情况下`parent`需要指向`tr`它指向`td`

    $(".delete_button").click(function() { var id = $(this).attr("mid"); var dataString = 'mid=' + id; var parent = $(this).closest(' tr');

    ```
    $.ajax({
                type : "POST",
                url : "delete.php",
                data : dataString,
                cache : false,

                success : function() {
                    if (id % 2) {
                        parent.fadeOut('slow', function() {
                                    $(this).remove();
                                });
                    } else {
                        parent.slideUp('slow', function() {
                                    $(this).remove();
                                });
                    }
                }

            });

    return false; 
    ```

    });

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T05:46:41.247

我认为问题出在变量名上。

在您的 AJAX 函数中，您使用了变量 name `'id'`。

```
$(".delete_button").click(function() {
  var id = $(this).attr("mid");
  var dataString = 'id='+ id ; // Here
  var parent = $(this).parent(); 
```

但是在删除过程中，您从`$_POST['mid']`

```
if(isset($_POST['mid'])) // Change this to $_POST['id']
  {
    $id = $_POST['mid']; // Change this to $_POST['id'] 
```

# sql - 应用带有 NULL 的过滤器访问 2010 不起作用

> ID：15917841
> 
> 赞同：0
> 
> 时间：2013-04-10T05:41:39.583
> 
> 标签：sql, vba, ms-access-2010, office-2010

我有一个从 2003 年迁移的 Access 2010 数据库。我有一个报告，它从 SQL 后端提取数据，然后在 Report_Open 事件过滤器中，该过滤器基于使用 VBA 中的 DoCmd.ApplyFilter 的表单中的值。

我的过滤器查询工作正常，我得到了结果，但是一旦我指定给我一个字段为空的地方，它就会崩溃。

下面是传递给过滤器查询的字符串

```
 lclFilter = "(StartDate < '31 Mar 2013') AND (SalesTransactionDate <> '31 Mar 2013' OR SalesTransactionDate Is Null)"
    DoCmd.ApplyFilter , lclFilter 
```

任何帮助，将不胜感激。如果我删除语句“或 SalesTransactionDate Is Null”，这将有效，否则我不会返回任何内容，甚至没有错误消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:06:12.183

改用 MSAccess 内置函数：

```
... OR IsNull(SalesTransactionDate) 
```

# c# - 更改事件内的文本框值？

> ID：15917846
> 
> 赞同：1
> 
> 时间：2013-04-10T05:42:04.947
> 
> 标签：c#, asp.net

当此事件发生时我有扫描仪事件我有代码将扫描仪读取的内容保存到文本框。

当我跟踪它时，它工作正常，但屏幕上没有为用户显示

按钮内的此代码单击：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            //Instantiate CoreScanner Class
            cCoreScannerClass = new CCoreScannerClass();
            //Call Open API
            short[] scannerTypes = new short[1];//Scanner Types you are interested in
            scannerTypes[0] = 1; // 1 for all scanner types
            short numberOfScannerTypes = 1; // Size of the scannerTypes array
            int status; // Extended API return code
            cCoreScannerClass.Open(0, scannerTypes, numberOfScannerTypes, out status);
            // Subscribe for barcode events in cCoreScannerClass
            cCoreScannerClass.BarcodeEvent += new
            _ICoreScannerEvents_BarcodeEventEventHandler(OnBarcodeEvent);
            // Let's subscribe for events
            int opcode = 1001; // Method for Subscribe events
            string outXML; // XML Output
            string inXML = "<inArgs>" +
            "<cmdArgs>" +
            "<arg-int>1</arg-int>" + // Number of events you want to subscribe
            "<arg-int>1</arg-int>" + // Comma separated event IDs
            "</cmdArgs>" +
            "</inArgs>";
            cCoreScannerClass.ExecCommand(opcode, ref inXML, out outXML, out status);
            Console.WriteLine(outXML);

        }
        catch (Exception exp)
        {
            Console.WriteLine("Something wrong please check... " + exp.Message);
        }
    } 
```

事件发生后的这段代码：

```
void OnBarcodeEvent(short eventType, ref string pscanData)
{
    first = pscanData;
      printfunction();

        } 
```

此代码在 printfunction 函数之后写入文本框：

```
private void printfunction()
    {
        int l = first.IndexOf("<datalabel>");
        second = first.Substring(l + 11);
        int j = second.IndexOf("</datalabel>");
        second = second.Substring(0,j-1);

        string newValue = second.Replace("0x", ""); ;
        newValue = newValue.Replace(" ", string.Empty);
        txt = GetStringFromAsciiHex(newValue);
       TextBox1.Text = txt;
     } 
```

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:08:59.060

您的局部变量是否`txt`包含正确的值？如果是这样，`TextBox1.Refresh()`请在设置文本后尝试。

# java - 我必须发布什么样的内容类型才能上传文件

> ID：15917848
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:42:08.527
> 
> 标签：java, jquery, ajax

如何将文件从 jquery 上传到使用 multipart/form-data 的 resteasy 服务？

我尝试了以下但它总是返回失败。它显示不受支持的媒体类型。

```
jQuery("#Upload").click(function () {
    $.ajax({
        url: serviceurl,
        type: 'POST',
        //contentType: 'application/json; charset=utf-8',
        enctype: 'multipart/form-data',
        data: {
            file: filename
        },
        cache: false,
        success: function (data) {
            alert('success');
            return false;
        },
        error: function (data, status) {
            alert("failue");
            alert(status);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:52:34.060

你可以这样发布：

```
 function uploadFile() {
        var fd = new FormData();
        fd.append("fileToUpload", FILE TO BE UPLOADED);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "URL TO POST");
        xhr.send(fd);
    } 
```

如果您愿意，可以使用添加的侦听器（uploadProgress、uploadComplete、uploadFailed 和 uploadCanceled），否则忽略这些行。

1.  替换`FILE TO BE UPLOADED`为要上传的文件。
2.  将 替换`URL TO POST`为要发布到的 URL。

> 让我知道您是否需要更多帮助，如果有帮助，请将其标记为一个。谢谢你。

# python - 如何在 Theano 中分配/更新张量共享变量的子集？

> ID：15917849
> 
> 赞同：25
> 
> 时间：2013-04-10T05:42:09.473
> 
> 标签：python, numpy, theano

在 中编译函数时`theano`，可以通过指定来更新共享变量（比如 X）`updates=[(X, new_value)]`。现在我正在尝试仅更新共享变量的子集：

```
from theano import tensor as T
from theano import function
import numpy

X = T.shared(numpy.array([0,1,2,3,4]))
Y = T.vector()
f = function([Y], updates=[(X[2:4], Y)] # error occur:
                                        # 'update target must 
                                        # be a SharedVariable' 
```

代码会引发错误“更新目标必须是共享变量”，我猜这意味着更新目标不能是非共享变量。那么有没有办法编译一个函数来更新共享变量的子集？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-07T02:56:48.000

使用[set_subtensor](http://deeplearning.net/software/theano/library/tensor/basic.html#theano.tensor.set_subtensor)或[inc_subtensor](http://deeplearning.net/software/theano/library/tensor/basic.html#theano.tensor.inc_subtensor)：

```
from theano import tensor as T
from theano import function, shared
import numpy

X = shared(numpy.array([0,1,2,3,4]))
Y = T.vector()
X_update = (X, T.set_subtensor(X[2:4], Y))
f = function([Y], updates=[X_update])
f([100,10])
print X.get_value() # [0 1 100 10 4] 
```

Theano FAQ 中有一个关于此的页面：http: [//deeplearning.net/software/theano/tutorial/faq_tutorial.html](http://deeplearning.net/software/theano/tutorial/faq_tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:28:42.940

此代码应该可以解决您的问题：

```
from theano import tensor as T
from theano import function, shared
import numpy

X = shared(numpy.array([0,1,2,3,4], dtype='int'))
Y = T.lvector()
X_update = (X, X[2:4]+Y)
f = function(inputs=[Y], updates=[X_update])
f([100,10])
print X.get_value()
# output: [102 13] 
```

这里是[官方教程中关于共享变量的介绍](http://deeplearning.net/software/theano/tutorial/examples.html#using-shared-variables)。

请询问，如果您还有其他问题！

# jsp - java.io.* 在 JSP 中冻结 netbeans

> ID：15917850
> 
> 赞同：0
> 
> 时间：2013-04-10T05:42:09.770
> 
> 标签：jsp, netbeans, java-io

每当我在 netbeans 中创建 JSP 页面时，我都会尝试导入 java.IO.*

```
<%@page import="java.io.*"%> 
```

，它会冻结 IDE。我正在使用 Windows 7x64 Pro。这发生在 NetBeans 7.2.1 和 7.3 中。使用该特定导入是否违反规则？在两个最新版本中都会出现这样的错误似乎很奇怪。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:55:50.147

应该是其他问题。它适用于我在 NetBeans 7.3 Windows 7x64 Pro 上。

附带说明一下，导入完整的包不是一个好习惯。

# javascript - JavaScript：好的部分空白铁路图令人困惑

> ID：15917859
> 
> 赞同：6
> 
> 时间：2013-04-10T05:43:12.717
> 
> 标签：javascript, whitespace

我已经开始阅读“Javascript: The Good Parts”，但我无法弄清楚空白铁路图中的第一条路径的用途。

请澄清我。

![书中的铁路图](https://i.stack.imgur.com/5STZS.png).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T17:34:21.137

作为“铁路图”，它与铁轨有一些共同的属性。

从左边进入图表，到达第一个开关时，没有向左或向右的选择。就像铁路道岔一样，图表道岔有两条会聚的轨道，但无法从其中一个轨道传递到另一个轨道。

然而，右侧的开关，当流量从左侧到达时，提供了遵循任一分流路线的选项，有效地结束或重复语法规则。

因此，该图定义了由任意正数的空格、制表符、行尾或注释组成的空白实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T20:13:21.663

每一端都有一个条形的铁路图允许在任何一对标记之间插入空格。每端有两个条的铁路图没有。这里的两个条阻止了空白图在空白中允许空白（逻辑上的荒谬）。

外循环（问题所在）从输出循环回到输入。只要起始字符在集合 {space, tab, line end, /} 中，它就允许连续插入允许的字符。因此“/*qwerty*//*another qwerty*/”是可接受的空格，但“/*qwerty*/q”不是。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-14T23:58:06.900

看起来他只是说你也可以使用“无字符”。

# mongodb - 是否可以仅使用 Array([x][y[x][z]]) 方法查询 MongoDB？不知道元素的内容？

> ID：15917865
> 
> 赞同：0
> 
> 时间：2013-04-10T05:43:41.767
> 
> 标签：mongodb

这是集合“SoManySins”中的 7 个测试/示例文档中的第一个。

```
{
  "_id" : ObjectId("51671bb6a6a02d7812000018"),
  "Treats" : "Sin1 = Gluttony",
  "Sin1" : "Gluttony",
  "Favourited" : "YES",
  "RecentActivity" : "YES",
  "GoAgain?" : "YeaSure."
} 
```

我希望能够通过引用该位置来查询以检索任何位置的任何信息。以下文件，

```
{
   "_id" : ObjectId("51671bb6a6a02d7812000018"),
   "Sin1" : "Gluttony",
   "?????????" : "??????",
   "RecentActivity" : "YES",
   "GoAgain?" : "YeaSure."
} 
```

可以检索第三个键值对中可能存在的任何内容。为什么必须提前知道密钥中的数据是什么？如果一个集合的结构相同，谁需要知道？这样一来，你能获得双倍的效率吗？就像拥有大量邮箱一样，您的应用程序的用户提供密钥和价值；您的应用程序只是查询 dbs 文档的数组位置。克拉拉？最后？我希望？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:02:03.727

您提供的示例文档未在 BSON 中保存为数组：

```
{
    "_id" : ObjectId("51671bb6a6a02d7812000018"),
    "Sin1" : "Gluttony",
    "?????????" : "??????",
    "RecentActivity" : "YES",
    "GoAgain?" : "YeaSure."
} 
```

根据您使用的 MongoDB 驱动程序，此处的字段通常在您的应用程序代码中表示为关联数组或哈希。这些数据结构不是保持顺序的，因此您不能假设给定文档中的第三个字段将对应于另一个文档中的同一字段（甚至同一字段的顺序在多次提取中将保持一致）。您需要按名称引用该字段。

如果您改为使用数组作为字段，则可以按位置引用或使用[`$slice`投影](http://docs.mongodb.org/manual/reference/projection/slice/)选择数组的子集。

包含字段数组的示例文档：

```
{
    "_id" : ObjectId("51671bb6a6a02d7812000018"),
    "fields": [
        { "Sin1" : "Gluttony" },
        { "?????????" : "??????" },
        { "RecentActivity" : "YES" },
        { "GoAgain?" : "YeaSure." }
    ]
} 
```

.. 并查询以查找字段数组的第二个元素（a`$slice`带有跳过 1，限制 1）：

```
db.SoManySins.find({}, { fields: { $slice: [1,1]} })
{
    "_id" : ObjectId("51671bb6a6a02d7812000018"),
    "fields" : [
        {
            "?????????" : "??????"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:00:38.427

* * *

当您可能不知道数据是什么但您知道数据的结构时，这是一种查询和取回数据的方法：Mongo Shell 和 PHP 中的示例

// 基础，设置：

```
 $dbhost = 'localhost'; $dbname = 'test';
 $m = new Mongo("mongodb://$dbhost");
 $db = $m->$dbname;
 $CursorFerWrites = $db->NEWthang; 
```

// 定义一组数据，用 PHP 创建一个文档：

```
 $TheFieldGenerator = array( 'FieldxExp' => array(
 array('Doc1 K1'=>'Val A1','Doc1 K2'=>'ValA2','Doc1 K3'=>'Val A3'),
 array('Doc2 K1'=>'V1','Doc2 K2'=>'V2','Doc2 K3'=>'V3' ) ) ) ; 
```

// 然后将其写入 MongoDB：

```
 $CursorFerWrites->save($TheFieldGenerator); 
```

* * *

### 注意：在 Shell 中：这会产生相同的文档：

```
 > db.NEWthang.insert({"FieldxExp" : [
       {"Doc1 K1":"Val A1","Doc1 K2":"Val A2","Doc1 K3":"Val A3"},
       {"Doc2 K1":"V1", "Doc2 K2":"V2","Doc2 K3":"V3"}
                                                                      ]
                                           }) 
```

## #

* * *

现在，一些 mongodb Shell 语法：

```
 > db.NEWthang.find().pretty()
    {
         "_id" : ObjectId("516c4053baa133464d36e836"),
         "FieldxExp" : [
            {
                    "Doc1 K1" : "Val A1",
                    "Doc1 K2" : "Val A2",
                    "Doc1 K3" : "Val A3"
            },
            {
                    "Doc2 K1" : "V1",
                    "Doc2 K2" : "V2",
                    "Doc2 K3" : "V3"
            }
    ]
 }
 > db.NEWthang.find({}, { "FieldxExp" : { $slice: [1,1]} } ).pretty()
 {
    "_id" : ObjectId("516c4053baa133464d36e836"),
    "FieldxExp" : [
            {
                    "Doc2 K1" : "V1",
                    "Doc2 K2" : "V2",
                    "Doc2 K3" : "V3"
            }
    ]
 }

 > db.NEWthang.find({}, { "FieldxExp" : { $slice: [0,1]} } ).pretty()
   {
    "_id" : ObjectId("516c4053baa133464d36e836"),
    "FieldxExp" : [
            {
                    "Doc1 K1" : "Val A1",
                    "Doc1 K2" : "Val A2",
                    "Doc1 K3" : "Val A3"
            }
      ]
 } 
```

* * *

最后，如何在一些 PHP 中编写查询 ::

// 这些将用于构建 MongoCursor：

```
 $myEmptyArray = array();
 $TheProjectionCriteria = array('FieldxExp'=> array('$slice' => array(1,1))); 
```

// 这里设置：

```
 $CursorNEWthang1 = new MongoCollection($db, 'NEWthang'); 
```

// 现在准备好进行查询/读取：

```
 $ReadomgomgPls=$CursorNEWthang1->find($myEmptyArray,$TheProjectionCriteria); 
```

第二个文件将被打印出来：

```
 foreach ($ReadomgomgPls as $somekey=>$AxMongoDBxDocFromCollection) {
var_dump($AxMongoDBxDocFromCollection);echo '<br />';
 } 
```

希望这对一些人有所帮助。

# android - 更改多项选择 AlertDialog 中项目的文本颜色

> ID：15917877
> 
> 赞同：1
> 
> 时间：2013-04-10T05:44:38.173
> 
> 标签：android, android-alertdialog

我可以更改`multiple-choice AlertDialog`Android 中每个项目的文本颜色吗？我的 AlertDialog 弹出以下项目。

```
Apple
Banana
Mango
Grape 
```

显示时`AlertDialog`，所有项目的默认文本颜色为黑色。但我想做如下。

显示时`AlertDialog`，

文字颜色`Apple`应该是`Red`.

文字颜色`Banana`应该是`Yellow`.

文字颜色`Mango`应该是`Green`.

文字颜色`Grape`应该是`Purple`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-24T05:09:41.830

您可以使用**textColorAlertDialogListItem**属性来实现

```
<style name="MyDialogStyle2" parent="Theme.MaterialComponents.Dialog.Alert">
    <item name="textColorAlertDialogListItem">@color/black</item>
</style> 
```

并在创建警报对话框时传递此样式

```
AlertDialog.Builder builder = new AlertDialog.Builder(context, R.style.MyDialogStyle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:54:56.457

您可以执行以下操作

```
 builder.setMessage(Html.fromHtml("<font color='#FF0000'><b>John:</b></font>"+"How are you?"));
                          OR

<string name="Howtoplay"><![CDATA[html data here ]]>   
</string>
builder.setMessage(Html.fromHtml(getString(R.string.HowtoPlay)));

                          OR 
```

使用自定义对话框，然后您可以设置文本的颜色。

[如何在android的警报对话框中的文本消息中应用颜色](https://stackoverflow.com/questions/4416279/how-to-apply-color-in-text-message-in-alert-dialog-box-in-android)

编辑：

您可以按空格拆分单词，然后设置可扩展的字符串前景。还可以为对话框中的每个单词提供自定义颜色。

您还可以从[http://www.colorhunter.com/tag/android/1指定颜色](http://www.colorhunter.com/tag/android/1)

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="84dp"
    android:layout_marginRight="18dp"
    android:text="Button" /> 
```

dialog.xml 自定义布局被膨胀

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

<Button
    android:id="@+id/cancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="127dp"
    android:text="CANCEL" />

</RelativeLayout> 
```

你的 MainActivity

```
 public class MainActivity extends Activity {

String[] each;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b= (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showpopup();
        }

    });
}
 public void showpopup()
 {

final Dialog d = new Dialog(MainActivity.this);
d.setTitle("my title");
d.setContentView(R.layout.dialog);
TextView tv= (TextView) d.findViewById(R.id.editText1);
String s="Apple Bannana Mango Orange";

tv.setText("");
for(int i=0;i<s.length();i++)
{
    each = s.split("\\s+");
}
for(int i=0;i<each.length;i++)
  {

     SpannableString   ss1=  new SpannableString(each[i]);
        if(each[i].equals("Apple"))
        ss1.setSpan(new ForegroundColorSpan(Color.RED), 0, ss1.length(), 0); 
        else if(each[i].equals("Bannana"))
            ss1.setSpan(new ForegroundColorSpan(Color.YELLOW), 0, ss1.length(), 0); 
        else if(each[i].equals("Mango"))
            ss1.setSpan(new ForegroundColorSpan(Color.GREEN), 0, ss1.length(), 0); 
        else if(each[i].equals("Orange"))
            ss1.setSpan(new ForegroundColorSpan(Color.GRAY), 0, ss1.length(), 0); 
        tv.append(ss1); 
        tv.append(" "); 

        tv.setMovementMethod(LinkMovementMethod.getInstance());   
  }

 Button cancel = (Button) d.findViewById(R.id.cancel);

    cancel.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            d.cancel();

        }

    });
    d.show();  
 }
 } 
```

生成的快照

![在此处输入图像描述](https://i.stack.imgur.com/oJ55b.png)

# php - 使用 AJAX 的表单复选框始终在 php 中显示为 ON

> ID：15917880
> 
> 赞同：1
> 
> 时间：2013-04-10T05:44:40.267
> 
> 标签：php, jquery, ajax

我有一个这样的复选框

```
<input name="notify" type="checkbox" id="notify" class="notify" /> 
```

我正在使用这样的ajax调用

```
$("form#submit").submit(function() {
// we want to store the values from the form input box, then send via ajax below
var username = $('#username').attr('value');
var email = $('#email').attr('value');
var password = $('#password').attr('value');
var cpassword = $('#cpassword').attr('value');
var notify = $('#notify').attr('value');
var session_user_id = $('#session_user_id').attr('value');
$.ajax({
type: "POST",
url: "../../includes/editprofile.php?",
data: "username="+ username+
    "&email="+ email+
    "&password="+ password+
    "&cpassword="+ cpassword+
    "&notify="+ notify+
    "&session_user_id="+ session_user_id,
success: function(data){
$('div.success').fadeIn();
$('div.success').html(data);
}
});
return false;
}); 
```

在我的 editprofile.php 文件中，我只是 echo'n $notify 以查看提交表单后的值是什么，无论我是否选中该框，它总是“打开”。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:49:50.350

所有三个都应该在下面工作

尝试

```
$('#notify').is(':checked'); 
```

或者

```
$('#notify').attr('checked'); 
```

或者

```
$('#notify').prop('checked'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:48:02.763

改变这个

```
var notify = $('#notify').attr('value'); 
```

至

```
var notify = $('#notify').attr('checked'); 
```

因为`checkbox`没有`value`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:50:11.097

尝试这个

```
$('#notify').attr('checked') ? "True" : "False"; 
```

# android - 在 Market Place 中隐藏应用程序

> ID：15917881
> 
> 赞同：0
> 
> 时间：2013-04-10T05:44:42.080
> 
> 标签：android

我用谷歌搜索了这个，一年或更长时间才发现不好的答案，所以我希望事情已经改变了。

我为一个公寓大楼开发了一个应用程序，他们只希望他们的居民能够在市场上下载/看到它。它与提交维护请求和租用公共设施有关，因此，出于显而易见的原因，他们不希望任何人看到它，而是希望市场的便利性进行分发。

这可以在没有任何愚蠢的解决方法的情况下完成吗？比如用随机字符串混淆名称或更改包名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:57:18.517

# java - 销毁一个线程，在它的 run() 方法中有一个永无止境的函数？

> ID：15917887
> 
> 赞同：0
> 
> 时间：2013-04-10T05:45:11.740
> 
> 标签：java, multithreading, thread-sleep

在我`run()`的 Thread 类的方法中，我正在调用一个永无止境的函数。我需要线程只运行特定的持续时间。

线程一旦启动就无法控制，他们有什么办法破坏它吗？

我试过了`yield()`，，`sleep()`等等……

PS - 我无法更改永无止境的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:50:13.530

来自 oracle Java 文档：

```
public void run(){
    for (int i = 0; i < inputs.length; i++) {
        heavyCrunch(inputs[i]);
        if (Thread.interrupted()) {
             // We've been interrupted: no more crunching.
             return;
        }
    }
} 
```

您的线程应在每个循环后检查中断条件以查看它是否被中断。如果您正在调用一个刚刚执行的方法，`while(true){}`那么恐怕无法中断它，并且`stop()`绝不能在线程上调用。

***使长时间运行的方法响应中断是程序员的责任。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:49:01.203

[http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)回答了你所有的问题.. 特别是部分我应该使用什么来代替 Thread.stop？

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:59:52.153

这可能太多了，但是如果您不想弄乱中断，这就是我要解决的方法。

```
 public class ThreadTest {
     public static void main(String[] args) throws InterruptedException {
          ThreadTest test = new ThreadTest();
      test.go();
}

void go() throws InterruptedException{
    ExecutorService service = Executors.newSingleThreadExecutor();
    service.execute(new LongRunnable());
    if(!service.awaitTermination(1000, TimeUnit.MILLISECONDS)){
        System.out.println("Not finished within interval");
        service.shutdownNow();
    }
} 
```

}

```
 class LongRunnable implements Runnable {
      public void run(){
    try{
        //Simultate some work
        Thread.sleep(2000);
    } catch(Exception e){
        e.printStackTrace();
    }
}
 } 
```

基本上你将你的可运行文件包装在一个 ExecutorServie 中，如果它没有在间隔内完成，你基本上会杀死它 - 将中断发送给它。

# java - 优先级会影响同一台计算机上的其他程序吗？

> ID：15917888
> 
> 赞同：1
> 
> 时间：2013-04-10T05:45:19.430
> 
> 标签：java, concurrency

我有这样的代码：

```
Thread thread = new Thread(new Runnable()
    {
        @Override
        public void run()
        {
            //extremely time-consuming actions
        }
    });
thread.setPriority(Thread.MAX_PRIORITY);
thread.start(); 
```

该线程将执行一些耗时的操作，并且它也具有高优先级。

现在我想知道这个线程**在我系统的所有其他程序中是否具有更高的优先级，或者****与同一程序**的线程相比它具有更高的优先级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:49:09.760

优先级在进程中的线程内而不是跨进程。JVM 甚至可能[选择忽略优先级](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/thread-priorities.html#javabackground)，因此您甚至无法保证进程本身的优先级。

> JVM 为 Java 线程定义了十个逻辑优先级范围，包括：
> 
> java.lang.Thread.MIN_PRIORITY = 1
> 
> java.lang.Thread.NORM_PRIORITY = 5
> 
> java.lang.Thread.MAX_PRIORITY = 10
> 
> 这些值 [1..10] 被传递到 Thread.setPriority(int) 以将优先级分配给 Java 线程。Java 线程的默认优先级是 NORM_PRIORITY。（没有显式调用 setPriority 的 Java 线程在 NORM_PRIORITY 运行。）JVM 可以自由地以它选择的任何方式实现优先级，**包括忽略 value**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:47:43.920

只有同一个程序 - 在虚拟机本身。但这也不是保证，只是对 VM 的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:48:55.027

很难一概而论，因为它取决于底层平台。Java 线程优先级被映射到操作系统线程优先级，通常没有一对一的映射。一些平台提供从 1 到 10 的优先级。但 Java 只提供 3 个级别。

因此，操作系统有责任平等和公平地对待来自应用程序的所有具有相同优先级的线程以及它自己的线程。

# c# - 如何评估这两个哈希函数？

> ID：15917891
> 
> 赞同：1
> 
> 时间：2013-04-10T05:45:35.567
> 
> 标签：c#, hash

代码1：（将SHA1结果转换为字符串的简单方法）

```
byte[] bs = System.Text.Encoding.UTF8.GetBytes(input);
SHA1CryptoServicesProvider x = new SHA1CryptoServicesProvider();
bs = x.ComputeHash(bs);
System.Text.StringBuilder s = new System.Text.StringBuilder();
foreach (byte b in bs)
   s.Append(b.ToString("x2").ToLower());
result1 = s.ToString(); 
```

Code2：（从世界之初就存在于项目中的遗留代码）

```
byte[] bs = System.Text.ASCIIEncoding.GetBytes(input);
SHA1CryptoServicesProvider x = new SHA1CryptoServicesProvider();
bs = x.ComputeHash(bs);
char[] c = new char[bs.length]
for(int i=0; i<bs.length; i++)
  c[i] = (char)(bs[i] & 0x7f);
resutl2 = new StringBuilder().Append(c).ToString(); 
```

有什么`map()`函数可以用来评估`result1`吗`result2`？

```
result1 == map(result2) 
```

“代码 2”是什么意思`0x7f`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:50:23.287

您的第二个代码在四个方面不好：

*   它假定输入字符串完全由 ASCII 字符组成。（您的第一个代码处理所有 Unicode）
*   它会丢失结果中每个字节的最高位，通过使用`b & 0x7f`- 这只是与二进制值 01111111 的按位“与”，因此结果在 0-127 范围内而不是 0-255 范围内
*   在许多情况下，它以不可打印的文本结尾，这很可能最终在某些转换中被破坏
*   （远不那么重要）它无缘无故地使用 StringBuilder ；最后一行可能是

    ```
    result2 = new string(c); 
    ```

给定一个`result1`值，您*可以*计算出原始文本是否会映射到给定`result2`值（假设原始文本首先是 ASCII），但是您不能反过来工作，因为数据已经丢失。（有几个`result2`值可以产生相同的`result1`值。）这甚至假设您可以获得确切的`result2`值 - 由于它最终使用控制字符的方式，您很可能会发现更多的数据正在丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:49:04.213

> 0x7f 中的“代码 2”是什么意思？

`& 0x7f`手段，即“`& 128`只保留第一个（最低有效）7 位”，它强制输出保持纯 ASCII（ASCII 仅使用 7 位） - 通过简单地丢弃任何不适合的信息。

> 有什么`map()`函数可以用来评估`result1`吗`result2`？

然而，最大的问题是在开始时使用不同的编码：除非`input`只包含 ASCII 文本（即仅使用前 7 位的字符），否则您将散列完全不同的字节数组 ( `bs`)，因此最终输出将无论如何都不能等同。由于散列不是一般可逆的，因此您将无法对此进行补偿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:53:17.280

在代码 1 中，我们看到：

`s.Append(b.ToString("x2").ToLower());`

从[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)我们看到字节的 toString("x2") 意味着每个字节将被呈现为两个十六进制数字，然后小写 - 所以 0a, f9 ， ETC。

但在代码 2 中，我们看到：

`c[i] = (char)(bs[i] & 0x7f);`

做 (bs[i] & 0x7f); 意味着我们在将其放入返回值之前删除第 8 位（将其设置为 0）。这意味着我们在原始哈希中丢失了信息——大约八分之一的信息被清除了。这意味着我们无法确定 result1 将在 result2 上使用任何函数 - 但您可以采用另一种方式，在 result1 上执行一个函数，通过将其转换回字节数组来为您提供结果 2。

如果代码 2 的目的是将散列呈现为可打印的字符串，base64 编码是一个更好的主意（google it）（当然，可打印的十六进制编码也可以）

此外，代码 1 和代码 2 在开始时都使用不同的编码。如果传递给代码 1/2 的字符串中包含 unicode，而不仅仅是纯 ASCII，那么您将立即对不同的事物进行哈希处理，这立即是不可调和的。

# php - Silex 会话不保存数据？

> ID：15917898
> 
> 赞同：0
> 
> 时间：2013-04-10T05:46:28.463
> 
> 标签：php, silex

找到[这个问题](https://stackoverflow.com/questions/9734549/sessions-do-not-work-in-silex-app)后，我让我的 Silex 会话至少分配了一个 ID，但我没有看到会话数据在不同的页面视图中保存：

```
require(__DIR__.'/vendor/autoload.php'); // Composer autoload

$app = new Silex\Application();
$app['debug'] = true;

$app['db'] = $app->share(function() { // Database connector as a service
    return new PDO('mysql:host=localhost;dbname=myawesome_db', 'user', 'paswd');
});

$app['session.db_options'] = array(
    'db_table'      => 'php_sessions',
    'db_id_col'     => 'session_id',
    'db_data_col'   => 'session_value',
    'db_time_col'   => 'session_time',
);

$app['session.storage.pdohandler'] = $app->share(function () use ($app) {
    return new Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler(
        $app['db'],
        $app['session.db_options'],
        $app['session.storage.options']
    );
});
$app['session.storage'] = $app->share(function() use ($app) {
    return new Symfony\Component\HttpFoundation\Session\Storage\NativeSessionStorage(
        $app['session.storage.options'],
        $app['session.storage.pdohandler']
    );
});
$app->register(new Silex\Provider\SessionServiceProvider()); // Start session management
$app['session']->start();

$app->get('/session-set', function() use ($app) {
    $app['session']->set('foobar', 'test');
    $app['session']->save();
    $out = "User session is: ".$app['session']->getId()."<br />\n";
    $out .= "Session variable is: ".var_export($app['session']->get('foobar'), true)."<br />\n";
    return $out;
});
$app->get('/session-get', function() use ($app) {
    $out = "User session is: ".$app['session']->getId()."<br />\n";
    $out .= "Session variable is: ".var_export($app['session']->get('foobar'), true)."<br />\n";
    return $out;
});

$app->run(); // Off into the sunset 
```

该`/session-set`页面显示`foobar`会话变量的值，但该`/session-get`页面不显示。谁能帮我弄清楚为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:29:02.137

我的解决方案原来是 PDO 数据库连接设置不正确（其中一个列名错误）。但是，默认情况下，PDO MySQL 连接在出错时不会抛出异常，它只是设置`ErrorInfo()`细节。一旦我为我的 PDO 连接打开异常抛出，我发现了错误并修复了它。我还向 Symfony 提交了一个补丁，以确保会话 PDO 对象启用了异常抛出，以避免其他人遇到这个问题。

# c# - 保存当前窗口 URL 并在几次导航后移回该 URL

> ID：15917905
> 
> 赞同：1
> 
> 时间：2013-04-10T05:47:04.127
> 
> 标签：c#, javascript, jquery, c#-4.0, c#-3.0

我有一个站点，当用户单击特定 div 然后在我的站点中打开一个新的子窗口时。假设用户站在`xyz.com/category`，现在如果您用户单击该 div，则父窗口会转到另一个 url，假设`google.com`会打开一个弹出窗口，并且在弹出窗口中有更多导航。但是在弹出窗口中打开的每个页面都有一个名为`Go Back To Site` . 我希望当用户单击弹出窗口中的多个链接然后单击`Go Back To Site`按钮然后弹出窗口关闭并且父窗口移回`xyz.com/category`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:50:47.907

你可以试试 PHP 超全局数组

```
$_SERVER['HTTP_REFERER'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:00:35.243

如果您可以为此使用**javascript**，则有一些简单的功能，例如：

```
window.history.back();

window.history.forward(); 
```

您可以在以下链接中引用所有这些：

[https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)

**对于jQuery：**

```
$(document).ready(function() {
   var referrer =  document.referrer;
}); 
```

**对于 C#：**

```
WebBrowser1.Url = new Uri("http://maps.google.com"); 
```

**- document.referrer 不适用于 IE**

对于这个问题，请参考以下代码：

```
<script type="text/javascript" >            
function redirect(url) {
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
        var referLink = document.createElement('a');
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    } else {
        location.href = url;
    }
}
</script> 
```

这段代码也可以参考[这里](https://stackoverflow.com/questions/1890532/ie-has-empty-document-referrer-after-a-location-replace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:12:40.817

我这样做的方法是将当前 URL 作为参数传递到您的弹出窗口中。因此，您可以将锚链接标签更改为：

```
<a href="popup.aspx?prevPage=oldPage.aspx">Click</a> 
```

因此，当您的弹出窗口弹出时，您只需获取 prevPage 的值，然后当他们单击“返回上一页”时，您只需重定向到 prevPage 的值。

# asp.net - 检查符号的正则表达式

> ID：15917908
> 
> 赞同：1
> 
> 时间：2013-04-10T05:47:08.040
> 
> 标签：asp.net, regex

我有一个要输入的文本框。

```
<asp:TextBox ID="txt_namepair" runat="server" Text="<Name>=<Value>">
</asp:TextBox> 
```

我想使用正则表达式验证器添加验证。现在我需要正则表达式来检查输入格式

```
"alpha numeric string = alphanumeric string"  
 like <name>=<value> pairs. 
```

当我单击添加按钮时，这些 = 对将显示在列表框中。但我想要的是，我想通过使用正则表达式检查它们之间是否有等号（=）。And and 对应该是字母数字字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:02:32.770

您可以使用以下正则表达式

```
^[a-zA-Z0-9 ]*=[a-zA-Z0-9 ]*$ 
```

匹配你的字符串

```
"alpha numeric string = alphanumeric string" 
```

PS你真的需要空间吗？如果不删除正则表达式中 9 之后的空格。

[您可以在以下站点http://regexhero.net/tester/](http://regexhero.net/tester/)测试我提供的代码

# c# - this.bind() 仅使用第一个数据集而不是第二个数据集

> ID：15917914
> 
> 赞同：0
> 
> 时间：2013-04-10T05:47:35.190
> 
> 标签：c#, asp.net, dataset

我有一个问题，我想从后面的代码中将一个数据集与 aspx 表单中的标签绑定，并且我在一个函数中使用了 2 个数据集，但问题是它只绑定了第一个数据集。

我的代码是这样的：

```
 private void fill()
    {
        DateTime dat;
        if (txtDate.Text == "")
            dat = DateTime.Now;
        else
            dat = DateTime.ParseExact(txtDate .Text , "M/d/yyyy", null);

        rtbl.LoadRoomTypes(_ds, SessionContext.PropertyID,dat);
        dlDashBoard.DataSource = _ds.Tables[rtbl.SqlEntityX];
        dlDashBoard.DataBind();

        foreach(DataListItem item in dlDashBoard .Items )
        {

            BindNestedItem(item.ItemIndex );

        }
        _ds = null;
        RoomTypeBAL rtbl1 = new RoomTypeBAL(0);

        rtbl1.LoadTotalFree(_ds3, SessionContext.PropertyID, dat);
        if(_ds3 !=null && _ds3.Tables[rtbl1 .SqlEntityX ].Rows.Count >0)
        this.DataBind();//Problem is here binding _ds always but I want to bind _ds3

    } 
```

我的来源是这样的：

```
<table>
   <tr>
                <td>
                    <asp:Label ID="Label1" runat="server" Text="FreeRooms :"></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom1" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom1"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom2" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom2"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom3" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom3"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom4" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom4"].ToString()%>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom5" runat="server" Text='<%#_ds3.Tables[0].Rows[0]["tfreeroom5"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblfreeRoom6" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom6"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label2" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tfreeroom7"].ToString() %>'></asp:Label>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="Label3" runat="server" Text="Arrivals :"></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label4" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tarrival1"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label5" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tarrival2"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label6" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tarrival3"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label7" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tarrival4"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label8" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tarrival5"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label9" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tarrival6"].ToString() %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label10" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tarrival7"].ToString() %>'></asp:Label>
                </td>
            </tr>
    <tr>
        <td>
            <asp:Label ID="Label11" runat="server" Text="CheckOuts :"></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label12" runat="server" Text='<%# _ds3.Tables[0].Rows[0]["tcheckout1"].ToString()%>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label13" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout2"].ToString() %>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label14" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout3"].ToString() %>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label15" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout4"].ToString() %>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label16" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout5"].ToString() %>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label17" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout6"].ToString() %>'></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label18" runat="server" Text='<%#  _ds3.Tables[0].Rows[0]["tcheckout7"].ToString() %>'></asp:Label>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:12:18.307

您好，我相信您需要重置您的数据源，this.DataBind() 是指回 ds_

```
if(_ds3 !=null && _ds3.Tables[rtbl1 .SqlEntityX ].Rows.Count >0)
dlDashBoard.DataSource = _ds3.Tables[rtbl.SqlEntityX];
dlDashBoard.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:37:12.273

首先，我真的建议您切换到gridview，而不是使用带有很多很难管理的内联标签的表格。您可以拥有相同的功能，并且大量使用 GridView 控件而不是手动执行此操作。

至于您的问题 - 您需要在执行 DataBind() 之前设置 DataSource。如果你不告诉它，类应该如何知道绑定到哪个源？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T05:49:59.773

我明白了，我必须将 _ds3 声明为 public

# python - Tornado - 异步装饰器做什么以及为什么它能够更快地处理请求？

> ID：15917921
> 
> 赞同：0
> 
> 时间：2013-04-10T05:48:12.077
> 
> 标签：python, web, tornado

以下代码向 twitter 发出 http 请求：

版本1（非异步）： http: [//pastebin.com/whiufBCF](http://pastebin.com/whiufBCF)

版本 2（异步）： http: [//pastebin.com/qYYw5CVu](http://pastebin.com/qYYw5CVu)

用 SIEGE 测试，none-async 版本的事务速率为 3.20trans/second，而 async 版本为 12.59trans/second。async 版本只是在 get 方法上使用了 async 装饰器，并将代码分成两部分执行，但并没有减少它。那么为什么成交率会大大提升呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:52:24.737

异步版本可以同时向 Twitter 发送多个请求“进行中”，而同步版本必须等待每个请求完成才能开始下一个请求。

因此，异步版本可以更有效地利用其时间，而不仅仅是坐在那里等待单个 HTTP 请求完成。

# .net - 用聚合函数对 case 表达式求和

> ID：15917929
> 
> 赞同：0
> 
> 时间：2013-04-10T05:48:43.360
> 
> 标签：.net, sql, sql-server-2008

在我的一个应用程序中，我想将案例表达式与聚合函数相加。

我尝试了以下查询

```
Select Name,Sum(Case When MIN(arrival_time) = MAX(arrival_time) then 1 Else 0 End) as arrivedate from TableName group by Name 
```

但是我遇到了这样的错误。

```
Msg 130, Level 15, State 1, Line 1
Cannot perform an aggregate function on an expression containing an aggregate or a subquery. 
```

请弄清楚我的问题。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:53:21.687

你不能在聚合函数中有聚合函数，这意味着你不能做

```
sum(min(..) ) 
```

尝试：

```
select Name,Sum(Val) as arrivedate 
from (
    SELECT name , (Case When MIN(arrival_time) = MAX(arrival_time) then 1 Else 0 END) Val
    FROM TableName
    group by Name
) x
group by Name 
```

但是，你真的需要 SUM 吗？我觉得像：

```
SELECT name , (Case When MIN(arrival_time) = MAX(arrival_time) then 1 Else 0 END) Val
FROM TableName
group by Name 
```

无论如何都会给你相同的结果，因为内部查询和外部查询都是 Name 组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:53:17.193

请试试：

```
select 
    Name, 
    Sum(Case When MN = MX then 1 Else 0 End) arrivedate
from(
    select Name, Min(arrival_time) MN, max(arrival_time) MX From TableName
    group by Name
)x
group by Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:55:36.243

您正在尝试对也跨越记录的最小值和最大值求和（跨越多个记录）。您需要重做查询，首先获取最小值/最大值，然后执行 sum 语句检查它们。

# jquery - 使用 jquery 获取 JSON 对象的值

> ID：15917932
> 
> 赞同：0
> 
> 时间：2013-04-10T05:48:49.787
> 
> 标签：jquery, json, servlets

我创建了一个 java servlet，我在其中使用了一个 JSON 对象，现在我想使用 Jquery 将 JSON 对象中的值提取到我的 HTML 页面中，但我不知道该怎么做。

**小服务程序代码：**

```
 ResultSet rs = st.executeQuery("Select * from SampleTable");
  JSONObject obj= new JSONObject();

  if(rs.next())
  {
      String fname=rs.getString(1);
      obj.put("status", "yes");
      obj.put("fname",fname);
      System.out.println(obj);
      out.print("Hello" + obj);

  }
  else
  {
      obj.put("status", "no");
      out.print(obj);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:33:22.633

`response.setContentType("application/json");`在你的 Servlet 之前设置`response.getWriter()`；

添加 jQuery Js

然后`getData()`像按钮点击一样调用。

```
<script type="text/javascript">
  $(function(){
      function getData() {

          $.ajax({
                url : 'getDataServlet', // Your Servlet mapping
                type : 'POST',
                dataType : 'json, 
                success : function(response) {
                    alert(response.status);
                },
                error : function(request, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
      }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T12:41:01.830

在您的 javascript 代码中，您可以简单地编写：

```
<script type="text/javascript">
$(function(){
  function getData() {

      $.ajax({
            url : 'getDataServlet', 
            type : 'POST',
            dataType : 'json, 
            success : function(response) {
                var status = data.status;
                var fname = data.fname;
            },
            error : function(error) {
                //error handling....
            }
        });
  } 
```

status 和 fname 变量包含您放入服务器端 java 代码中的值。

一般来说，要从 javascript 中的 JSON 对象中获取任何值，您只需要知道密钥即可。var value1 = object.key1; var value2 = object.key2;

等等....

# command-line - 使用 Run 方法运行命令后，控制立即转到下一条语句

> ID：15917937
> 
> 赞同：0
> 
> 时间：2013-04-10T05:49:02.207
> 
> 标签：command-line, vbscript, silent

我有脚本来卸载一个包说 pkg_1 使用它的卸载字符串（即 setup.exe -remove）。之后，它试图删除另一个包，比如 pkg_2。pkg_1 的卸载大约需要 1 到 2 分钟。脚本如下所示

```
rc = shellobj.Run("cmd /C " & uninstall_string_1 & " /silent",0, true)
rc1 = shellobj.Run("cmd /C " & uninstall_string_2 & " /silent",0, true) 
```

我的问题是，如果将 WScript.sleep(120000) 放在上述两个语句之间，则两个包都将成功删除。否则，将停止 pkg_1 的卸载并立即开始卸载 pkg_2。结果只有 pkg​​_2 被删除（没有睡眠）。

如何在不使用 sleep 方法的情况下卸载两个包？

仅供参考如果您从命令提示符运行uninstall_string_1，新的提示将在0-5 秒后打开，并且卸载在后台进行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:31:44.510

Arjun，我在另一个论坛上读到了这个：

当我们使用脚本安装或卸载包时，很大程度上取决于包的实现。假设 setup.exe 本身作为进程 A 运行。进程 A 进行一些名义上的验证，然后生成进程 B，即真正的安装引擎，然后自行关闭。在这种情况下，bWaitOnReturn（您已在代码中设置为 true）已完成其工作，控件将交给下一条语句。但是，进程 B 仍在运行。这是 bWaitOnReturn 无法控制的。因此，您的第二个包裹将在您的第一个包裹实际完成之前开始。也许你的第一个包实际上并没有停止，它可能需要时间并在后台执行。反正这只是一个猜测。

如果不是这种情况，你也可以试试这个：

```
Set obj0 = CreateObject("WScript.Shell")
Set objExec = obj0.Exec("your package../../")
'  We will set a loop until finished
Do While objExec.Status <> 1
WScript.Sleep 100
Loop 
```

因此，每 100 毫秒，脚本将检查您的包是否已完成执行。如果有，它将移至下一条语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:04:56.370

试试这个：

```
strCmd = uninstall_string_1 & " & " & uninstall_string_2
rc = shellObj.Run("cmd /C " & strCmd, 0, True) 
```

# python - 如何使用 Python 访问和获取数据库中的数据？

> ID：15917948
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:49:21.810
> 
> 标签：python, database

我特别指的是 Aroon Swartz 的案例，他做了一个程序来有效地访问 JSTOR、IEEE、ACM、elsevier 等学术数据库，不知道他是如何做到的。我的意思是什么 python 库，或者一个通用算法，或者它是如何工作的解释，或者更深入的参考。请不要害羞使用先进的概念。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:58:45.837

Aroon Swartz 并没有真正访问 JSTOR 的数据库。他编写了一个脚本来查找 DB 资源的 URL。

你可以用[`urllib2`](http://docs.python.org/2/library/urllib2.html)和做到这一点[`pygoogle`](http://code.google.com/p/pygoogle/)。打开 URL 并解析它找到你想要的。

# java - Java 中的 while 循环返回祝贺和抱歉消息

> ID：15917950
> 
> 赞同：2
> 
> 时间：2013-04-10T05:49:29.450
> 
> 标签：java

我已经搜索了几个小时，无法弄清楚我做错了什么。这是我在 Java 中的第三个程序，我在作业中迷路了。我必须修改代码以向用户询问颜色，然后一次又一次地询问他们，直到他们猜到“红色”或者他们已经猜不到了。他们尝试了 4 次。我必须给他们反馈“你在 x 次尝试中猜对了”或“你用完了尝试。为了获得满分，我最多需要使用一个循环和一个条件。原始代码使用一段时间来比较颜色并给出无限猜测而不计算。

这是我到目前为止所拥有的，它确实可以编译。但是，如果第一次答案不正确，它会给我带来祝贺和抱歉的信息。如何在不使用另一个循环的情况下解决这个问题？

```
/*************************************************************************
 *  Compilation:  javac JavaLa2.java
 *  Execution:    java JavaLab3
 *  Mary Ross
 *  Date: April 12, 2011
 *
 *  % java JavaLab3
 * This program will ask the user for a color. It will ask until they guess “red” OR they have run out of guesses. 
 * They have four guesses.
 * Example:
 * What is your name? Jordan
 * What color do you guess? White
 * let’s try again: What color do you guess? red
 * “Congratulations! You guessed the correct color in 2 tries.”
 * 
 * NOTE: I have put a lot of comments to guide you in the code.
 *************************************************************************/

import java.io.*;

public class JavaLab3 {

    public static void main(String[] args) {
      // first we define our input streams.
      InputStreamReader input = new InputStreamReader(System.in);
      BufferedReader reader = new BufferedReader(input);   

      String sName ;
      String sColor;
      Integer numGuesses = 0;
      // we catch exceptions if some are thrown.
      try {
            System.out.println("what is your name?");
            sName = reader.readLine();  

            // then we will ask for the color
            System.out.println("What color do you guess?");
            sColor = reader.readLine();
            numGuesses = numGuesses +1;
            // at this point we have primed the condition for the while loop

            while (sColor.compareToIgnoreCase("red") != 0 && numGuesses < 4)  { 

                   System.out.println("You have guessed " + numGuesses + " times. You get four guesses.");
                   System.out.println("Let’s try again: What color do you guess?");
                   sColor = reader.readLine();
                   numGuesses = numGuesses + 1;

            System.out.println("Sorry, "  + sName + " you have exceeded your alloted guesses. The color is red.");

            }
           System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.");
      } catch (IOException e){
            System.out.println("Error reading from user");
       }

    }

} 
```

运行正确答案：

```
> what is your name?
 Mary
What color do you guess?
 red
Congratulations! Mary You correctly guessed Red in 1 tries. 
```

运行 1 个错误答案和正确答案：

```
what is your name?
 Mary
What color do you guess?
 white
You have guessed 1 times. You get four guesses.
Let’s try again: What color do you guess?
 red
Sorry, Mary you have exceeded your alloted guesses. The color is red.
Congratulations! Mary You correctly guessed Red in 2 tries. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:56:53.873

嘿，你怎么知道你的循环是因为颜色是红色还是因为尝试已经用尽而退出......你需要检查一下。你的系统输出

System.out.println("对不起，" + sName + " 你超出了你的猜测范围。颜色是红色的。");

需要退出 while 循环并在 while 循环检查尝试是否用尽之后立即处于 if 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:57:55.620

You are printing the *sorry* message inside the *while* loop. So that will be printed everytime the loop runs. You need to move it outside. Also, your messages should be printed based on some condition.

You need to modify your `while` loop as:

```
while (sColor.compareToIgnoreCase("red") != 0 && numGuesses < 4)  { 

    System.out.println("You have guessed " + numGuesses + " times. You get four guesses.");
    System.out.println("Let’s try again: What color do you guess?");
    sColor = reader.readLine();

    // For incorrect guess, increase the `numGuesses`, and continue the loop
    numGuesses = numGuesses + 1;

}
if (numGuesses == 4) {
    // While loop breaks because of 2nd condition, Then print "Sorry"
    System.out.println("Sorry, "  + sName + " you have exceeded your alloted guesses. The color is red.");
} else {
    // 1st condition is satisfied. Correct color is guessed.
    System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:29:59.657

简单的回答：当第一次猜错，又能猜对的时候，即使人猜对了，“Sorry”输出信息还在这个while循环中。这意味着在第二次尝试时，人们猜对了，代码将执行“抱歉”打印并结束 while 循环以执行“恭喜”打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:57:09.233

您的代码中有这种行为：

```
while (sColor.compareToIgnoreCase("red") != 0 && numGuesses < 4)  { 

                   System.out.println("You have guessed " + numGuesses + " times. You get four guesses.");
                   System.out.println("Let’s try again: What color do you guess?");
                   sColor = reader.readLine();
                   numGuesses = numGuesses + 1;

            System.out.println("Sorry, "  + sName + " you have exceeded your alloted guesses. The color is red.");

            }
           System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries."); 
```

“恭喜”消息**始终**`while`在您的循环之后打印。

你在循环**之外**需要这样的东西::

```
if (numGuesses < 4)  {
    System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.");
} else {
    System.out.println("Sorry, "  + sName + " you have exceeded your allotted guesses. The color is red.");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T06:00:42.640

您应该执行以下操作：

```
 System.out.println("What color do you guess?");
        boolean isCorrectGuess = false; 
        if(sColor.compareToIgnoreCase("red") == 0) {
            isCorrectGuess  = true;
        }
        sColor = reader.readLine();
        numGuesses = numGuesses +1;
        // at this point we have primed the condition for the while loop

        while (!isCorrectGuess && numGuesses < 4)  { 

               System.out.println("You have guessed " + numGuesses + " times. You get four guesses.");
               System.out.println("Let’s try again: What color do you guess?");
               sColor = reader.readLine();
               numGuesses = numGuesses + 1;
               if(sColor.compareToIgnoreCase("red") == 0) {
                  isCorrectGuess  = true;
               }
        }
        if(!isCorrectGuess)
            System.out.println("Sorry, "  + sName + " you have exceeded your alloted guesses. The color is red.");
        else
             System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.")
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T06:05:23.140

因为，您还没有进行任何类型的条件检查，所以恭喜 SOP，所以当 while 循环结束时，它就会移动到这个 SOP。您需要提及一个条件，它将为此提供某种控制流。我想类似的事情。

```
 if (sColor.compareToIgnoreCase("red")== 0 && numGuesses < 4) {
           System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.");
        } 
```

几个小贴士：

您可以切换到**equalsIgnoreCase**而不是使用**compareToIgnoreCase**

 **我在 if 条件中使用的内容，您也可以使用布尔标志，一旦获得正确的输入，将其切换为 true。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T06:09:04.587

一些逻辑框架问题。

```
public static void main(String[] args) { 
        // first we define our input streams.
        InputStreamReader input = new InputStreamReader(System.in);
        BufferedReader reader = new BufferedReader(input);

        String sName;
        String sColor;
        Integer numGuesses = 0;
        // we catch exceptions if some are thrown.
        try {
            System.out.println("what is your name?");
            sName = reader.readLine();

            // then we will ask for the color
//            System.out.println("What color do you guess?");
//            sColor = reader.readLine();
//            numGuesses = numGuesses + 1;
            // at this point we have primed the condition for the while loop

            while (numGuesses < 4) {
                System.out.println("What color do you guess?");
                sColor = reader.readLine();
                numGuesses = numGuesses + 1;
                if (sColor.compareToIgnoreCase("red") != 0) {
                    System.out.println("Sorry, " + sName + " you have exceeded your alloted guesses. The color is red.");

                    System.out.println("You have guessed " + numGuesses + " times. You get four guesses.");
//                    System.out.println("Let’s try again: What color do you guess?");

//                    sColor = reader.readLine();
//                    numGuesses = numGuesses + 1;

                } else {
                    System.out.println("Congratulations! " + sName + " You correctly guessed Red in " + numGuesses + " tries.");
                    break;
                }

            }
        } catch (IOException e) {
            System.out.println("Error reading from user");
        }

    } 
```

**输出1：**

```
what is your name?
Kiran
What color do you guess?
a
Sorry, Kiran you have exceeded your alloted guesses. The color is red.
You have guessed 1 times. You get four guesses.
What color do you guess?
a
Sorry, Kiran you have exceeded your alloted guesses. The color is red.
You have guessed 2 times. You get four guesses.
What color do you guess?
a
Sorry, Kiran you have exceeded your alloted guesses. The color is red.
You have guessed 3 times. You get four guesses.
What color do you guess?
a
Sorry, Kiran you have exceeded your alloted guesses. The color is red.
You have guessed 4 times. You get four guesses. 
```

**输出2**：

```
what is your name?
Kiran
What color do you guess?
Pink
Sorry, Kiran you have exceeded your alloted guesses. The color is red.
You have guessed 1 times. You get four guesses.
What color do you guess?
red
Congratulations! Kiran You correctly guessed Red in 2 tries. 
```**

# iphone - 如何在 cocos2d 中停止 runAction

> ID：15917951
> 
> 赞同：1
> 
> 时间：2013-04-10T05:49:29.923
> 
> 标签：iphone, ios, cocos2d-iphone

一段时间后如何停止游戏中的所有动作？

在下面的代码中，我在精灵上调用 runaction。

```
id actionMove = [CCMoveTo actionWithDuration:actualDuration*2.5 position:ccp(winSize.width + (target.contentSize.width/2), actualY)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
id sequece = [CCSequence actions:delayTime1, calFun1, delayTime2, calFun2,actionMove, actionMoveDone, nil];
id repeate = [CCRepeatForever actionWithAction:sequece];

[target runAction:repeate]; 
```

在这段代码中，精灵不断移动。如何在一段时间或某种条件后停止上述动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:30:58.327

在`runAction call Function`和`stop action`为`sprite`。

```
[CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)];

- (void)setInvisiblestone:(CCNode *)node
{
    [target stopAllActions];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-08T11:00:27.267

所有动作都停止在方法中。

```
-(void)gameover
{
     [self unscheduleAllSelectors];
} 
```

# android - 如何在布局中水平分成4等份

> ID：15917952
> 
> 赞同：1
> 
> 时间：2013-04-10T05:49:33.380
> 
> 标签：android

我必须创建一个这样的应用程序

[http://s22.postimg.org/fhhzngr65/Untitled.png](http://s22.postimg.org/fhhzngr65/Untitled.png)

要垂直创建 4 个相等的部分，我使用`android:weightSum="100"` How to devided into 4 个相等的部分水平（我使用 LinearLayout 和 TableRow）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:21:00.830

使用此代码...

```
<LinearLayout
    android:id="@+id/first"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:layout_weight="1"
    android:orientation="horizontal"
    android:weightSum="4" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="01" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="02" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="03" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="04" />
</LinearLayout>

<LinearLayout
    android:id="@+id/second"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:layout_weight="1"
    android:orientation="horizontal"
    android:weightSum="4" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="11" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="12" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="13" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="14" />
</LinearLayout>

<LinearLayout
    android:id="@+id/third"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:layout_weight="1"
    android:orientation="horizontal"
    android:weightSum="4" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="21" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="22" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="23" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="24" />
</LinearLayout>

<LinearLayout
    android:id="@+id/fourth"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:layout_weight="1"
    android:orientation="horizontal"
    android:weightSum="4" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="31" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="32" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="33" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:text="34" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:09:36.943

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:text="1"
        android:gravity="center"
        android:singleLine="true" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:text="2"
        android:gravity="center"
        android:singleLine="true" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:text="3"
        android:gravity="center"
        android:singleLine="true" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:text="4"
        android:gravity="center"
        android:singleLine="true" />
</LinearLayout> 
```

我希望它会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:07:47.403

有一种“作弊”的好方法

不要对你的观点施加任何影响。然后放置高度或宽度=“0dp”和重量=“1”的视图，然后这些不可见视图将占用您的数字视图未占用的所有空间，这将使所有内容均匀分布。我的一个项目中的自定义工具栏中的类似内容：

```
<LinearLayout android:id="@+id/toolbar"
                style="@style/Toolbar"
                xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageButton
            android:id="@+id/button1"
            style="@style/ToolbarButton"
            android:src="@drawable/sc_bookopen_white"
            android:text="">
    </ImageButton>

    <View
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" >
    </View>

    <ImageButton
            android:id="@+id/button2"
            style="@style/ToolbarButton"
            android:src="@drawable/sc_favourites_add"
            android:text="">
    </ImageButton>

    <View
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" >
    </View>

    <ImageButton
            android:id="@+id/button3"
            style="@style/ToolbarButton"
            android:src="@drawable/sc_bulls_eye"
            android:text="">
    </ImageButton>

    <View
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" >
    </View>

    <ImageButton
            android:id="@+id/button4"
            style="@style/ToolbarButton"
            android:src="@drawable/sc_search"
            android:text="">
    </ImageButton>

    <View
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" >
    </View>

    <ImageButton
            android:id="@+id/button5"
            style="@style/ToolbarButtonRight"
            android:src="@drawable/sc_flip"
            android:text="">
    </ImageButton>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:07:55.730

你可以试试这个肯定工作不要忘记在线性布局中放置边距

toplinearlayout 使用 weightSum 垂直分为四部分

linearlayout1horizo​​ntol 使用 weightSum 分为四部分

linearlayout2horizo​​ntol 使用 weightSum 分为四部分

linearlayout3horizo​​ntol 使用 weightSum 分为四部分

linearlayout4horizo​​ntol 使用 weightSum 分为四部分

# jquery - 如何为动态生成的表填充 table.DataTable.fnSettings.aoFooter？

> ID：15917957
> 
> 赞同：3
> 
> 时间：2013-04-10T05:49:49.103
> 
> 标签：jquery, jquery-datatables

我正在尝试为我的 jQuery DataTable 使用列过滤器插件。表格的 HTML 很简单：

```
<table id="something" class="some_classes"></table> 
```

...并且包括标题文本在内的所有内容都通过代码推送：

```
oTable = $("#something").dataTable({
    ...
    aoColumns: [
        { sTitle: 'ID', sWidth: '5%', mData: 0 },
        { sTitle: 'Subject', sName: 'on_what', mData: 1 },
        { sTitle: 'Action', sName: 'audit_type', mData: 2 },
        etc...
    ],
    ...
}); 
```

当我尝试这样激活列过滤器时：

```
$('#something').dataTable().columnFilter({
    aoColumns: [
        null,
        {
            type: "select",
            values: ['A', 'B', 'C', 'D', 'E']
        },
        {
            type: "select",
            values: ['1', '2', '3']
        },
        etc...
    ]
}); 
```

...什么都没有出现。我已经完成了代码，调试到控制台，问题似乎是表的 fnSettings().aoFooter 没有被填充。列过滤器代码查找它以便将过滤器添加到表的底部，但是当它查看我的表时，除了一个空数组之外什么都没有。我知道代码正在执行的事实，如果我分配 aoFooter = aoHeader 则过滤器会显示在标题中，因此可以肯定代码在它有去处时可以工作。

我还尝试从控制台运行列过滤器代码，但无济于事，即使在附加`<tfoot><tr><th></th>...</tr></tfoot>`到它之后（在我尝试之前我怀疑它不起作用）。我也尝试过类似的东西`oTable.dataTable().fnSettings().aoFooter = [{},{},{},{},{},{}];`，但一无所获。我也试过这个：

```
for (i = 0; i < 6; i++)
    oTable.dataTable().fnSettings().aoFooter[i] = $('<td></td>'); 
```

所以我的问题似乎是如何有效地将内容推送到aoFooter。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-29T00:43:53.200

我有同样的问题。

您必须将`tfoot`部分添加到您的 html`table`中。

```
<table id="data-table" >
    <thead>
        <tr>
            <th> col 1</th>
            <th>col 2</th>
        </tr>
    </thead>
    ...
    <tfoot>
        <tr>
            <td> col 1</td>
            <td>col 2</td>
        </tr>
    </tfoot>
</table> 
```

然后你只需要调用数据表插件。

# asp.net - checkbox inside a gridview within updatepanel

> ID：15917959
> 
> 赞同：1
> 
> 时间：2013-04-10T05:49:53.163
> 
> 标签：asp.net, gridview, updatepanel, autopostback

I have a `gridview` with a `checkbox` in first column. I set `checkbox` property of `autopostback="true"`. The `gridview` is inside the `updatepanel`. When `checkbox` is `checked` i want to make one `panel` as visible, which panel is outside the update panel. I check the code with check point, which is go through the code, but its not working. Can any one help me?..

Thanks in advance.

My code is here for your reference...

HTML Code:

```
<asp:Panel ID="ploperation" runat="server" CssClass="plop" Visible="False">
    <asp:LinkButton ID="lbtnasspam" runat="server" CssClass="panelbtn" Font-Names="Calibri"
                    Font-Size="14px" Font-Underline="False" OnClick="lbtnasspam_Click">Report As Spam</asp:LinkButton>
</asp:Panel>

 <asp:UpdatePanel ID="up" runat="server">
     <ContentTemplate>
         <asp:GridView ID="gvmail" runat="server" AllowPaging="True" AutoGenerateColumns="False">

              <Columns>
                  <asp:TemplateField>
                      <ItemTemplate>
                          <asp:CheckBox ID="chkchild" runat="server" AutoPostBack="true" OnCheckedChanged="chkchild_CheckedChanged"/>
                      </ItemTemplate>
                      <ItemStyle Width="15px" />
                  </asp:TemplateField>
              </Columns>         
         </asp:GridView>
     </ContentTemplate>                        
</asp:UpdatePanel> 
```

C# Code:

```
protected void chkchild_CheckedChanged(object sender, EventArgs e)
{
    ploperation.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:49:50.297

You can use [initializeRequest](http://msdn.microsoft.com/en-us/library/bb397460.aspx) - this event is raised when an asynchronous post back occurs(When you check the checkbox in your gridview it initiates an async postback because it's inside an update panel).

Just change ploperation to a div instead of `<asp:Panel` and you can use javascript to show/hide it:

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(initializeRequest);

    function initializeRequest(sender, args) {
        document.getElementById('ploperation').style.display = 'block';
    }

</script>
<asp:UpdatePanel ID="up" runat="server">
    <ContentTemplate>
        <asp:GridView ID="gvmail" runat="server" AllowPaging="True" AutoGenerateColumns="False">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="chkchild" runat="server" AutoPostBack="true" />
                    </ItemTemplate>
                    <ItemStyle Width="15px" />
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel>
<div id="ploperation" style="display:none;" runat="server">
    <asp:LinkButton ID="lbtnasspam" runat="server" CssClass="panelbtn" Font-Names="Calibri"
        Font-Size="14px" Font-Underline="False" OnClick="lbtnasspam_Click">Report As Spam</asp:LinkButton>
</div>
</form> 
```

Alternatively you can stick to the way you've done it, just place `<asp:Panel` inside UpdatePanel -> ContentTemplate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:18:11.700

update panel does partial page loading.... [check link](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)

so if you want to show your panel than include it also in your update panel.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T20:18:28.530

Put the UpdatePanel on the control you want to change, not on the GridView. Do not forget to Reference the GridView on the Triggers section. For example, if you want to change a label text use the following code:

```
<asp:UpdatePanel ID="up" runat="server">
<ContentTemplate>
    <asp:Label ID="Label1" runat="server" Text="" />
</ContentTemplate>
<Triggers>
        <asp:AsyncPostBackTrigger ControlID="gvmail"  />
</Triggers>
</asp:UpdatePanel>

<asp:GridView ID="gvmail" runat="server" AllowPaging="True" AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="chkchild" runat="server" AutoPostBack="true" OnCheckedChanged="chkchild_CheckedChanged"/>
            </ItemTemplate>
            <ItemStyle Width="15px" />
        </asp:TemplateField>
    </Columns>         
</asp:GridView> 
```

# javascript - 点击背景图片并链接到外部网站

> ID：15917962
> 
> 赞同：0
> 
> 时间：2013-04-10T05:50:04.517
> 
> 标签：javascript, css

是否可以将正文背景图像设置为链接？因此，当有人点击内容区域之外的任何地方时，它将转到另一个网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:07:05.653

像这样的[http://jsfiddle.net/xzuEA/2/](http://jsfiddle.net/xzuEA/2/)，您只需要添加带有 onclick 事件的背景块

```
<div id="fakebody">

</div> 
```

```
html, body {
    width:100%;
    height:100%;
}

div#fakebody {
    width:100%;
    height:100%;
    background:red;
} 
```

```
$(function() {
    $("#fakebody").click(function() {
        window.location = "http://www.google.com/";
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:07:45.710

只能在 html/css 中完成：

```
<body>

<!-- YOUR WEBSITES HTML -->

<a href="YOUR LINK" target="_blank" id="background"></a>

</body> 
```

CSS：

```
#background {
    position:absolute;
    top:0px;
    bottom:0px;
    left:0px;
    right:0px;
    z-index:0; // NOTE: YOUR OTHER ELEMENTS MUST BE ABOVE z-index: 0 TO MAKE IT A BACKGROUND
    background:url(your/path/to/background-image.png);
} 
```

# python - python运行时释放内存

> ID：15917963
> 
> 赞同：1
> 
> 时间：2013-04-10T05:50:05.727
> 
> 标签：python

我有一个在 tornado 上运行的 python 服务器，有一个使用大量内存的请求（使用 gdata 库）。我在使用它们之后删除了这些对象，甚至做了 gc.collect() ，但是当我看到使用 free -m 的系统内存时，当我使用 gdata 执行这些操作时，我可以看到内存中的内存增加。但是在我删除对象后，内存并没有被释放。只有在 python 主程序被杀死后，内存才会被释放。我想知道是否有任何方法可以释放内存。

# ruby-on-rails - Rack::Cache 在更改 etag 后没有破坏缓存

> ID：15917971
> 
> 赞同：3
> 
> 时间：2013-04-10T05:50:27.683
> 
> 标签：ruby-on-rails, ruby, caching, rack, rack-cache

我已设置 Rack::Cache 以与我的 rails 应用程序、heroku、Dalli 和 memcachd 一起使用。一切都按预期工作，但是当我在网站后端更新内容时，缓存仍然是新鲜的。etag 已更改，但这似乎并未破坏 Rack::Cache。我如何告诉 Rack::Cache 破坏内容更新？

# android - 即使有足够的空间，showAsAction="ifRoom" 也不显示该项目

> ID：15917973
> 
> 赞同：50
> 
> 时间：2013-04-10T05:50:31.313
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-menu

我试图让 ActionBar 在我的应用程序上正常工作（我正在使用 ActionBarSherlock 在 Android 2.x 和 4.x 之间获得统一的 UI）。

我觉得`android:showAsAction="ifRoom"`这只是一个又大又胖的谎言。每当我对其设置操作时`ifRoom`，即使有足够的空间，它也总是显示在溢出菜单中。这是来自同一个模拟器的两个屏幕截图。第一个显示所有选项设置为`always`的 ActionBar，第二个显示最后两个选项设置为 的 ActionBar `ifRoom`。如您所见，当它们都显示在`always`屏幕截图中时，有很多空间，那么为什么它们没有在第二个中显示，因为它们确实有空间？

![在此处输入图像描述](https://i.stack.imgur.com/vmhxx.png)

![在此处输入图像描述](https://i.stack.imgur.com/xbxs9.png)

这是我的 menu.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/add"
        android:icon="@drawable/ic_menu_btn_add"
        android:showAsAction="always"
        android:title="Add"/>
    <item
        android:id="@+id/calculateNPV"
        android:icon="@drawable/menu_icon_npv"
        android:showAsAction="always"
        android:title="NPV"/>
    <item
        android:id="@+id/calculateIRR"
        android:icon="@drawable/menu_icon_irr"
        android:showAsAction="always"
        android:title="IRR/YR"/>
    <item
        android:id="@+id/send"
        android:icon="@android:drawable/ic_menu_share"
        android:showAsAction="always"
        android:title="@string/share_pdf"/>
    <item
        android:id="@+id/graph"
        android:icon="@drawable/ic_menu_gallery"
        android:showAsAction="ifRoom"
        android:title="@string/view_cashflow_diagram"/>
    <item
        android:id="@+id/deleteReorder"
        android:icon="@drawable/ic_menu_clear_playlist"
        android:showAsAction="ifRoom"
        android:title="@string/delete_reorder_cashflows"/>

</menu> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-06-02T16:43:45.790

我希望我来参加聚会还不算太晚。

这真的不是一个大谎言，而是一个小小的疏忽。

`showAsAction`必须使用不同的命名空间定义属性`"http://schemas.android.com/apk/res-auto"`

因此，您应该在顶部菜单标签中定义一个命名空间，如下所示 `xmlns:app="http://schemas.android.com/apk/res-auto"`

然后用它来定义你的 showAsAction 属性，就像这样 `app:showAsAction="ifRoom"`

那应该解决它

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-10T06:03:11.663

这是因为指定了应该转到操作栏的最大项目数，它似乎是 4。当然，您可以通过设置来强制它们出现，`showAsAction: always`但与 google API 指南有关：

> 如果您认为超过四个菜单项可以作为操作项，那么您应该仔细考虑它们的相对重要性级别并尝试将不超过四个设置为操作项（并使用“ifRoom”值来当小屏幕上的空间有限时，允许系统将一些内容放回溢出菜单）。即使宽屏幕上有可用空间，您也不应该创建长长的操作项流，这些操作项会使 UI 混乱并看起来像桌面工具栏，因此请将操作项的数量保持在最低限度。
> 
> 此外，以下操作绝不应显示为操作项：设置、帮助、反馈或类似内容。始终将它们保留在溢出菜单中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-12-17T12:50:48.060

为了补充 Michal Z. 的答案：Android Design Guide Page Patterns->Actionbar 在“Action Buttons”一章中说：

[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

主操作栏中可以容纳多少操作？操作栏容量由以下规则控制：

*   主操作栏中的操作按钮**不得超过该栏宽度的 50%**。
*   底部操作栏上的操作按钮可以使用整个宽度。
*   与密度无关的像素 (dp) 中的屏幕宽度决定了适合主操作栏的项目数：
    *   小于 360 dp = 2 个图标
    *   360-499 dp = 3 个图标
    *   500-599 dp = 4 个图标
    *   600 dp 及更大 = 5 个图标

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-23T09:48:11.147

使用`app:showAsAction="always"`而不是`android:showAsAction="always"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-08T15:29:22.107

利用

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" xmlns:yourapp="http://schemas.android.com/apk/res-auto" > 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-29T08:50:40.050

*ActivityBar*力求不超过一定数量的可见元素。而且这个限制确实低于*ActivityBar*可以包含的内容。限制在*android.support.v7.view.ActionBarPolicy*类中设置：

```
`/**
     * Returns the maximum number of action buttons that should be permitted within an action
     * bar/action mode. This will be used to determine how many showAsAction="ifRoom" items can fit.
     * "always" items can override this.
     */
    public int getMaxActionButtons() {
        final Resources res = mContext.getResources();
        final int widthDp = ConfigurationHelper.getScreenWidthDp(res);
        final int heightDp = ConfigurationHelper.getScreenHeightDp(res);
        final int smallest = ConfigurationHelper.getSmallestScreenWidthDp(res); `if (smallest > 600 || widthDp > 600 || (widthDp > 960 && heightDp > 720)
            || (widthDp > 720 && heightDp > 960)) {
        // For values-w600dp, values-sw600dp and values-xlarge.
        return 5;
    } else if (widthDp >= 500 || (widthDp > 640 && heightDp > 480)
            || (widthDp > 480 && heightDp > 640)) {
        // For values-w500dp and values-large.
        return 4;
    } else if (widthDp >= 360) {
        // For values-w360dp.
        return 3;
    } else {
        return 2;
    }
}`` 

如您所见，限制在 2 到 5 之间，这取决于屏幕宽度。

我一直无法找到改变这种行为的方法。所以如果你想超过限制，你应该使用*showAsAction="always"或者为**ActionBar*创建你自己的视图。

            回答 #7

赞同：0

时间：2016-01-14T18:51:54.303

使用下面的代码它将始终有效

```
<menu 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools" 
    tools:context=".MainActivity">
    <item 
        android:id="@+id/menu_share" 
        android:title="Share"
        android:orderInCategory="100" 
        app:showAsAction="ifRoom"
        android:actionProviderClass="android.widget.ShareActionProvider"/>
</menu> 
```

            回答 #8

赞同：0

时间：2021-03-26T11:07:09.647

实际上，Android 最多会显示 5 个按钮，包括菜单，但您可以根据需要覆盖该行为。
请记住，Material 设计指南是在工具栏上有数量有限的按钮。请记住，即使有空间，某些操作也不应该显示为按钮。
但是，如果您有一些有意义的具体操作，即使您总共有 5 个以上，您也可以展示它们。您只需要自己检查屏幕宽度。
首先，在菜单定义中，将“始终”用于您希望始终显示的最多 4 个按钮。对所有其他人使用“从不”，包括那些您可能以编程方式显示为图标的人。
然后，覆盖 onPrepareOptionsMenu 以添加逻辑以强制将更多操作显示为按钮。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    final Configuration config = getResources().getConfiguration();
    final int width = config.screenWidthDp;

    if (width > 400) {
        MenuItem item = menu.findItem(R.id.your_action);
        item.setShowAsAction(SHOW_AS_ACTION_ALWAYS);

        item = menu.findItem(R.id.another_action);
        item.setShowAsAction(SHOW_AS_ACTION_ALWAYS);
    }

    return super.onPrepareOptionsMenu(menu);
} 
```

当方向改变时，您也可以动态地执行此操作，因为在横向模式下通常有足够的空间，尤其是在平板电脑上。

```
 @Override
    public void onConfigurationChanged(@NonNull Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        invalidateOptionsMenu();
    } 
```

但不要弄乱工具栏。并记得在小型设备上进行测试。

```

# sql-server - 从“System.Data.SqlClient.SqlConnection”上的“ServerVersion”获取值时出错

> ID：15917975
> 
> 赞同：0
> 
> 时间：2013-04-10T05:50:34.720
> 
> 标签：sql-server, entity-framework, visual-studio-2012, sql-server-2012

环境：

Visual Studio 2012 Professional 和 SQL Server Express 2012 (localhost\sqlexpress)

这是我的连接字符串：

`Server=localhost\sqlexpress;Database=MyDB;Trusted_Connection=True;Connection Timeout=30;`

当我尝试使用 Newtsonsoft Json Serialzer 序列化对象时出现此错误。

`Page.ClientScript.RegisterArrayDeclaration("user", JsonConvert.SerializeObject(MasterData.User));`

这是我得到的错误：

`Error getting value from 'ServerVersion' on 'System.Data.SqlClient.SqlConnection'.`

不要担心 MasterData.User 对象。它是一个自定义对象，将 SqlConnection 作为其基类的一部分。这就是它失败的地方。

有任何想法吗？

# android - Facebook like android 中的按钮实现

> ID：15917976
> 
> 赞同：4
> 
> 时间：2013-04-10T05:50:39.777
> 
> 标签：android, facebook

我知道这个问题已经被问过很多次了。

在我的应用程序中，我还想集成 Facebook like 按钮，经过大量研发后，我发现了以下链接

[https://developers.facebook.com/docs/reference/opengraph/action-type/og.likes](https://developers.facebook.com/docs/reference/opengraph/action-type/og.likes)

我在我的应用程序中使用以下代码，

```
 Bundle params = new Bundle();
   params.putString("object", "http://samples.ogp.me/226075010839791");

   Request request = new Request(
   Session.getActiveSession(),
   "me/og.likes",
   params,
   HttpMethod.POST
  );
  Response response = request.executeAndWait();
 // handle the response 
```

但是当我点击喜欢按钮时，什么都没有发生。

请大家指导我如何使用上面的代码。

还有一件事需要额外的权限来实现上述代码“权限：publish_actions”。如何获得此权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:49:10.687

[首次使用此](http://developers.facebook.com/docs/reference/android/3.0/Session/#openForPublish%28OpenRequest%29)打开具有发布权限的会话

# java - 如何使用 Java 中断 Linux 进程

> ID：15917982
> 
> 赞同：0
> 
> 时间：2013-04-10T05:51:05.460
> 
> 标签：java, linux, process, interrupt

我有一个进程生成器，可以让一些进程在 linux 中工作（这段代码是由 java 编写的），但是在这些进程工作期间，我想进行一些中断来更改进程配置。

如果我使用假脱机方法，它有太多溢出所以我想用另一种方法对其他进程进行一些中断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:10:02.670

由于@Vlad 链接的答案是针对 Windows 的，而这个问题是针对 linux 的，所以这里有一个答案。Linux[使用信号中断进程](http://www.linuxjournal.com/article/1332)，你可以使用`kill`发送信号：

```
// shut down process with id 123 (can be ignored by the process)
Runtime.getRuntime().exec("kill 123");
// shut down process with id 123 (can not be ignored by the process)
Runtime.getRuntime().exec("kill -9 123"); 
```

使用 kill，您还可以按照[手册页](http://linux.die.net/man/1/kill)中的说明发送其他信号（并且不必是终止信号）。默认情况下，kill 会发送一个`SIGTERM`信号，告诉进程终止，但可以忽略它。如果您希望进程终止而没有忽略的可能性，`SIGKILL`可以使用。在上面的代码中，第一个调用使用 SIGTERM，后一个调用使用 SIGKILL。您也可以明确说明：

```
// shut down process with id 123 (can be ignored by the process)
Runtime.getRuntime().exec("kill -SIGTERM 123");
// shut down process with id 123 (can not be ignored by the process)
Runtime.getRuntime().exec("kill -SIGKILL 123"); 
```

如果您想使用目标程序的名称而不是进程 ID 进行操作，也`killall`可以接受名称作为参数。顾名思义，这将杀死所有匹配的进程。例子：

```
// shuts down all firefox processes (can not be ignored)
Runtime.getRuntime().exec("killall -SIGKILL firefox"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:16:01.010

要终止进程，请使用以下命令获取该进程的 pid，使用 **`ps -ef | grep 'process name'`** pid 终止 pid 为 16804
Ex 的进程：

```
[root@localhost content]# ps -ef | grep tomcat
root     16804     1  0 Apr09 ?        00:00:42 /usr/bin/java -Djava.util.logging.config.file=/usr/local2/tomcat66/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms1024m -Xmx1024m -/usr/local2/tomcat66/bin/bootstrap.jar -Dcatalina.base=/usr/local2/tomcat66 -Dcatalina.home=/usr/local2/tomcat66 -Djava.io.tmpdir=/usr/local2/tomcat66/temp org.apache.catalina.startup.Bootstrap start 
```

然后在java中使用命令

```
1\. Runtime.getRuntime().exec("kill -15 16804"); // where -15 is SIGTERM 
or
2\. Runtime.getRuntime().exec("kill -9 16804"); // where -9 is SIGKILL 
```

检查这个是否有各种[Killing 进程](http://unixhelp.ed.ac.uk/shell/jobz5.html)和这个是否有[killing 信号](http://bash.cyberciti.biz/guide/Sending_signal_to_Processes)

# c# - 如何将 JavaScript 多维数组解析为 c# 数组？

> ID：15917991
> 
> 赞同：1
> 
> 时间：2013-04-10T05:51:43.490
> 
> 标签：c#, javascript, arrays, parsing

JavaScript 数组示例：

```
var array_1 = [["string 1", 2013, "string 2"], "string 3", ["string 4", , "string 5"]];
/* array_1[0][2] = "string 2" */

var array_2 = [1, , ["string 1", "string 2"]];
/* array_2[0][0] = 1 */ 
```

我需要将 JS 数组解析为**c#** `jagged array` ，或者`any other object`可以通过索引轻松访问每个子字符串，**通过函数**，使用：

*   数字变成字符串 ( `1`=> `"1"`)
*   `null`变成`""`（长度为 0 的字符串）。

你能帮我怎么做吗？非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T04:01:18.833

使用[Json.NET](http://json.codeplex.com/releases)

```
// using
using Newtonsoft.Json.Linq;

string JSarray_1 = @"[[""string 1"", 2013, ""string 2""], ""string 3"", [""string 4"", , ""string 5""]]";
JObject j = JObject.Parse("{\"j\":" + JSarray_1 + "}");
MessageBox.Show((string)j["j"][0][2]); // "string 2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:53:53.513

请参阅 C# 语言文档：[“多维数组 (C#)”](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)

```
string[,] items = new  string[,] {{"string 1","string 2"},...}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:29:14.957

我认为 TuyenTk 正在寻找，而 emigue 试图描述的是使用一个库来执行“魔术”（=解析）

我会推荐[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)，因为它是我一直使用的那个 - 但我想那里有很多这样的。

链接页面还包括一​​些关于如何使用它的简单示例。

关于用空字符串替换 null：

```
var myValue = origValue ?? String.Empty; 
```

如果 origValue 为 null，myValue 将设置为“”，否则表达式将计算为 origValue；

有关“??”或所谓的“空合并运算符”的更多信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:05:24.143

作为*[锯齿状阵列](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)*

```
string[][] items = new string[3][];

items [0] = new string[2];
items [1] = new string[1];
items [2] = new string[2];

items[0][0] = "string1";
items[0][1] = "string3";
items[1][0] = "string4";
items[2][0] = "string5";
items[2][1] = "string6"; 
```

或者

```
string[][] items = new string[][] 
{
    new string[] {"string1", "string3"},
    new string[] {"string4"},
    new string[] {"string5", "string6"}
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T06:54:55.800

如果您需要将 javascript 数组解析为 c# 数组，您可以将 Javascript 数组序列化为 JSON，然后将 JSON 反序列化为 C# 数组。

以前，您需要做一个转换：将 Javascript 数组表示中的 "" 替换为 null 作为字符串。

然后，你可以做这样的事情：

```
var JSArrayString = @"{"array_1": [["string 1", 2013, "string 2"], "string 3", ["string 4", null, "string 5"]]}";
var CSharpDict = SomeJSONLibrary.Deserialize(JSString);
var CSharpArray = CSharpDict["array_1"];
var myItem = CSharpArray[0][2]; 
```

# jquery - 将 .position() 函数绑定到 $(window).resize() 事件

> ID：15917993
> 
> 赞同：0
> 
> 时间：2013-04-10T05:51:50.343
> 
> 标签：jquery

我在下面有完整的 jQuery 代码，它使用 UI 位置插件根据偏移量等在网页中定位图标。

虽然这个工作正常，但我在调整浏览器大小时遇到​​了一些问题，并且没有重新计算图标位置。如何为下面的代码将 .position() 函数绑定到 $(window).resize() 事件？

```
(function($) {
$(window).load(function(event) {

if ( $(element_selector).length !== 0 && $(title_class_selector).length !== 0  ) {

$(title_class_selector).position({
my: "center",
at: cornerPosition,
    offset:"<?php echo $x_coordinates_foradjustment;?> <?php echo $y_coordinates_foradjustment;?>",
of: $(element_selector)

});
}

    });
})(jQuery); 
```

我试过把：

```
$(window).bind('resize',event); 
```

就在关闭 jQuery 之前，它没有帮助。感谢您的任何提示..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:42:58.937

我建议您将位置处理移至单独的函数，然后将该函数绑定到`load`和`resize`事件：

```
var doPosition = function(e) {
    if ( $(element_selector).length !== 0 && $(title_class_selector).length !== 0  ) {

        $(title_class_selector).position({
            my: "center",
            at: cornerPosition,
            offset:"<?php echo $x_coordinates_foradjustment;?> <?php echo $y_coordinates_foradjustment;?>",
            of: $(element_selector)

        });
    }
};

$(window)
.load(doPosition)
.resize(doPosition); 
```

**注意：我强烈建议你对 resize 事件进行去抖动，否则它会触发很多次**。这意味着当用户停止调整大小时，该事件将在调整大小*期间*触发一次而不是多次。在此处查看更多信息[http://www.hnldesign.nl/blog/debouncing-events-with-jquery/](http://www.hnldesign.nl/blog/debouncing-events-with-jquery/)

我创建了一个简单的小提琴（使用警报而不是你的位置计算东西，以显示它有效），去抖动，[**在这里**](http://jsfiddle.net/c_kick/3kG8q/)

# google-chrome-extension - 是否可以在 chrome 扩展中调用 pageAction 上的 setBadgeText？

> ID：15917995
> 
> 赞同：5
> 
> 时间：2013-04-10T05:51:51.393
> 
> 标签：google-chrome-extension

我正在尝试使用以下代码为我的 chrome 扩展设置徽章文本：

```
chrome.pageAction.setBadgeText({"text":'3'}) 
```

这会引发错误`Object #<Object> has no method setBadgeText`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:34:39.920

我使用了画布功能来获得相同的结果。这是我使用的代码。

```
window.setInterval(function() {
  chrome.pageAction.setIcon({imageData: draw(10, 0), tabId: tabId});
}, 1000);

function draw(starty, startx) {
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');
    var img = new Image();
    img.src = "icon_16.png"
    img.onload = function () {
       context.drawImage(img,0,2);
    }
  //context.clearRect(0, 0, canvas.width, canvas.height);
  context.fillStyle = "rgba(255,0,0,1)";
  context.fillRect(startx % 19, starty % 19, 10, 10);
  context.fillStyle = "white";
  context.font = "11px Arial";
  context.fillText("3",0,19);
  return context.getImageData(0, 0, 19, 19);
} 
```

在这里您可以更改要显示的文本的位置和颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-09T11:21:42.517

**不，页面操作是不可能的**

但是浏览器操作是可能的。

**摘抄：**

[页面操作文档](https://developer.chrome.com/extensions/pageAction)

> UI 的组成部分 与浏览器操作一样，页面操作可以有图标、工具提示和弹出窗口；**然而，他们不能有徽章**。此外，页面操作可以灰显。您可以通过阅读浏览器操作 UI 找到有关图标、工具提示和弹出窗口的信息。

您可以做的是将当前图像替换为图像中包含徽章的另一个图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:36:31.830

有传言说您可以用来`chrome.browserAction.setBadgeText`在页面操作上设置徽章。由于您的扩展程序中只能包含页面操作或浏览器操作，因此如果您选择前者，则此方法会作用于页面操作，即使它是`browserAction`API 的一部分。

# asp.net - 将 .net C# Web 应用程序转换为桌面应用程序

> ID：15917997
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:52:02.650
> 
> 标签：asp.net

我想将我的网络基础应用程序转换为桌面基础应用程序......请提供解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:05:12.720

将 Asp.net Web 应用程序转换为桌面应用程序几乎是不可能的。WebForms 和 WinForms 是不同的，应该有不同的设计。在类库中维护一个通用的业务逻辑并重用它。但是UI应该从头开始设计，因为webforms不是winforms并且（.aspx文件不能转换为WinForm）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:04:27.093

我不认为有任何直接的方式可以通过创建新的桌面应用程序项目并在其中实现你的逻辑来手动完成。

否则，您必须将 web kit 与您的项目绑定。Webkit 是 Safari 和 Chrome 自带的 HTML 渲染引擎。它是开源的，所以任何人都可以使用它。它在您的应用程序中包含浏览器，因此无需安装任何浏览器即可工作...但可能需要根据您的应用程序要求进行网络连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T06:01:04.063

[使用WestWindAspnetCompiler](http://www.west-wind.com/tools/aspnetcompiler.asp)编译您的`asp.net`页面，部署在您的 IIS 上并使用您的 Web 应用程序与.`loalhost`

# excel - 如何使用 Powershell 在 Excel 文件中进行区分大小写的查找和替换

> ID：15917998
> 
> 赞同：2
> 
> 时间：2013-04-10T05:52:11.477
> 
> 标签：excel, powershell, replace, html-entities

我想使用 Powershell 在 Excel 文档中查找特殊字符（如希腊字母）并将其替换为 HTML 实体。我的脚本如下所示：

```
$file = "C:\Path\To\File\test.xls"
$xl = New-Object -ComObject Excel.Application
$xl.Visible = $True
$objWorkbook = $xl.Workbooks.Open($file)
$objWorksheet = $objWorkbook.Worksheets.Item(1)
$objRange = $objWorksheet.UsedRange

$charArray = @(
([char]948, "&delta;"),
([char]916, "&Delta;")
)

foreach ($char in $charArray){
    $FindText = $char[0]
    $ReplaceText = $char[1]
    if ($objRange.find("$FindText")) {
        $objRange.replace("$FindText", $ReplaceText)
    } else {write-host "Didn't find $FindText"}
} 
```

问题是，`.find()`and`.replace()`方法不区分大小写，因此`[char]948`(δ) 匹配小写 delta (δ) 和大写 delta (Δ) 字符。结果是 Excel (.xls) 文件中的所有 δ 和 Δ 字符都替换为`&delta;`.

在 VBA 中， Range.Find() 有一个 MatchCase 参数，但 Powershell 似乎不允许它。例如，`$objRange.find("$FindText", MatchCase:=$True)`不起作用。

我还尝试了区分大小写的Powershell`-cmatch`和命令，但我不知道如何让它们在 Excel 范围对象上工作：`-creplace``$objRange`

`$objRange -creplace "$FindText", $ReplaceText`对 Excel 文件没有影响。

我无法将数据导出或转换为 .txt 或 .csv，因为特殊字符无法在转换后继续存在。

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:55:11.817

使用 PowerShell，您可以使用 creplace 运算符

```
"aAaAaA" -creplace 'a','I'
IAIAIA 
```

要替换 find 您可以使用`string`类中的 IndexOf 方法，它需要一个`comparisonType`

```
IndexOf(string value, int startIndex, int count, System.StringComparison comparisonType) 
```

例子 ：

```
"Jean Paul".indexOF("paul", 0, [System.StringComparison]::CurrentCulture)
-1
"Jean Paul".indexOF("paul", 0, [System.StringComparison]::CurrentCultureIgnoreCase)
5 
```